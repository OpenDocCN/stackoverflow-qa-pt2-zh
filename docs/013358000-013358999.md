# StackOverflow 问答 13358000-13358999

# amazon-ec2 - EC2 AMI 实例共享密码管理

> ID：13358000
> 
> 赞同：1
> 
> 时间：2012-11-13T09:09:27.980
> 
> 标签：amazon-ec2, amazon-web-services

我的目标是在 aws 中启动 200 个相同 ami 的 windows 节点实例。这些节点出现并连接到我的头节点。现在，每次启动新节点都会为该节点创建一个新密码。如果我想做组远程维护，这很难特别管理。

我在想，也许我可以让所有特定的 ami 都拥有相同的密码，但我会这样做吗？我应该修改 sysprep 配置文件 C:\Program Files\Amazon\Ec2ConfigService\sysprep2008.xml 还是应该禁用 ec2 配置工具的设置密码然后创建 AMI？

如果是配置文件，我应该在 sysprep2008.xml 文件中添加什么？

# java - 使用spring在java中做谷歌应用引擎后端操作

> ID：13358001
> 
> 赞同：2
> 
> 时间：2012-11-13T09:09:30.277
> 
> 标签：java, spring, google-app-engine, jakarta-ee, spring-mvc

我正在使用 spring 和 google app 引擎，后端操作（据我所知）需要在 web.xml 文件中定义一个 servlet，那么如何使用 spring 来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:55:41.393

通常，对于 spring-mvc 应用程序，您`web.xml`应该包含一个引用您的应用程序上下文的 servlet 和该 servlet 的映射，例如：

```
<servlet>
    <servlet-name>dispatch</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/path-to-your/web-application-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>dispatch</servlet-name>
    <url-pattern>/app/*</url-pattern>
</servlet-mapping> 
```

这不是唯一的配置方法，请查看 Spring 参考文档以获取更多详细信息。希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T11:14:15.207

好吧，经过大量搜索，我不会责怪 GAE 没有提供简单的英语教程，那里的人做得很好。我想我应该更仔细地阅读文档。

假设您有一个方法（GAE 中的工作人员），它具有`http://localhost:8080/blabla/coolmethod`then 的映射，如果您需要通过正常请求执行它，只需调用上一个链接，但如果您想通过后端操作执行它，您只需添加即可`http://nameofbackend.localhost:8080/blabla/coolmethod`！ . 所以要么是普通的servlet，要么是spring，或者你只需​​将该后端名称添加为子域并点击该url。

# ftp - 如何在 ftp 之前检查文件完整性

> ID：13358002
> 
> 赞同：0
> 
> 时间：2012-11-13T09:09:30.130
> 
> 标签：ftp, apache-commons, file-transfer

我正在使用 apache commons ftp 客户端来传输文件。虽然我不经常看到一些部分转移。我不确定是否是因为 ftp 在传输过程中有部分文件，因为当我在一段时间后检查时，我看到的文件大小正常。有没有办法在开始传输之前了解文件完整性？在 apache ftp 客户端中是否有现有的机制（搜索 eof、重命名文件等）？已经检查过互联网，但一无所获。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:21:15.147

Apache 肯定会有检查文件完整性的工具，但我不知道它们是否随 FTP 客户端一起提供。您可能需要为作业创建脚本。这个问题并没有说 100% 清楚需要在哪个阶段进行检查。

为了在文件传输中添加一层“制衡”，大多数人通常会在传输之前生成一个 MD5 校验和（或其他校验和；MD5 是最常见的但不被认为是性能最高的），然后当传输完成 在目标上运行 MD5 并比较两者。相同的文件将产生相同的校验和。

自定义协议也可以即时运行校验和，但使用纯 FTP，您最好的选择是编写传输前和传输后校验和脚本。

这能回答问题吗？如果没有，更多的细节可能会给我和其他人更好的画面。

# javascript - jquery显示和隐藏图像不起作用

> ID：13358003
> 
> 赞同：0
> 
> 时间：2012-11-13T09:09:45.963
> 
> 标签：javascript, jquery, image, radio-button, show-hide

我的一个页面有一个代码。当有人单击单选按钮时，它应该淡入、停留和淡出图像。也将使用 ajax 更新数据库。

```
<html>
<body>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>

<script type="text/javascript">
$("#rad").click(function() {
    $("#success").fadeIn(500);
    $("#success").delay(1000);
    $("#success").fadeOut(1000);
})
</script>

<table class="profimg">
    <tr><td height="50" width="50"><img id="success" src="http://cdn4.iconfinder.com/data/icons/simplicio/128x128/notification_done.png" style="display:none" height="50" width="50"></td></tr>
    <tr><td align="center"><img class="profimg" src="" alt="Administratorasdf" height="100" width="100"/></td></tr>
<tr><td id="rad" align="center"><input type='radio' title='Publicly Visible' name='img_pub' onclick="upimg1()" /> <input type='radio' title='Visible Only To Users' value='UsersOnly' name='img_pub' onclick="upimg2()" /> <input type='radio' title='Visible Only To You' value='Hide' name='img_pub' onclick="upimg3()" checked='checked'/></td></tr>
</table>

</body>
</html> 
```

我删除了 ajax 部分以避免混淆。这是我使用的 jsFiddle。[http://jsfiddle.net/c7ajb/1/](http://jsfiddle.net/c7ajb/1/)可能是什么错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T09:12:34.090

这是有效的：

```
$("#rad").click(function () {
    $("#success").fadeIn(500).delay(1000).fadeOut(1000);
});​ 
```

Javascript 有时可以是异步的，如果你不这样做，`delay()`将无法工作。

您还应该使用回调来实现更好的代码演化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T09:16:17.590

将`delay`/`fadeOut`放在函数的回调中`fadeIn`（或按照其他答案中的建议链接方法）：

```
$("#rad").click(function () {
    $("#success").fadeIn(500, function() {
        $(this).delay(1000).fadeOut(1000);
    });
}); 
```

[演示在这里](http://jsfiddle.net/c7ajb/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T09:23:58.847

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function(e) {
            $(".radios").click(function() {
                $("#success").fadeIn(500).delay(1000).fadeOut(1000);
            })
        });
        function upimg1(){}
        function upimg2(){}
        function upimg3(){}
    </script>
</head>
<body>

    <table class="profimg">
        <tr>
            <td height="50" width="50">
                <img id="success" src="http://cdn4.iconfinder.com/data/icons/simplicio/128x128/notification_done.png" style="display:none" height="50" width="50">
            </td>
        </tr>
        <tr>
            <td align="center">
                <img class="profimg" src="" alt="Administratorasdf" height="100" width="100"/>
            </td></tr>
        <tr>
            <td id="rad" align="center">
                <input class="radios" type='radio' title='Publicly Visible' name='img_pub' onClick="upimg1()" /> 
                <input class="radios" type='radio' title='Visible Only To Users' value='UsersOnly' name='img_pub' onClick="upimg2()" /> 
                <input class="radios" type='radio' title='Visible Only To You' value='Hide' name='img_pub' onClick="upimg3()" checked='checked'/>
            </td>
        </tr>
    </table>

</body> 
```

# django - Django 实践：小视图还是少视图？

> ID：13358004
> 
> 赞同：1
> 
> 时间：2012-11-13T09:09:47.013
> 
> 标签：django

我正在使用 django 开发一个应用程序，我有一个视图，我使用 2 return render_to_response，有两个不同的 html 文件，具体取决于用户的状态。

我想知道将我的视图分成两个不同的视图是否会更好，或者我是否应该保持更大的视图。

这样做有什么好处和坏处？

对不起，如果我的问题不清楚。非常感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T09:48:50.803

这个问题没有正确或错误的答案，因此您的问题在 stackoverflow 上可能无法接受，这通常是针对具有特定技术解决方案的问题/问题。

也就是说，这是我对这个主题的看法——我个人喜欢保持`view function`小，如果需要进一步处理，请将它们分成更小的函数。

例如：-

```
@permission_required('organizations.organization_add_user')
def organization_add_user(request, org_slug):
    org = get_object_or_404(Organization, slug=org_slug)
    form = OrganizationAddUserForm(org=org)

    if request.method == 'POST':
        form = OrganizationAddUserForm(request.POST or None, request.FILES or None, org=org)
        if form.is_valid():
            cd = form.cleaned_data

            # Create the user object & send out email for activation
            user = create_user_from_manual(request, data=cd)

            # Add user to OrganizationUser
            org_user, created = OrganizationUser.objects.get_or_create(user=user,\
                                                                    organization=org)
            dept = org.departments.get(name=cd['department'])
            org_user.departments.add(dept)

            # Add user to the appropriate roles (OrganizationGroup) and groups (django groups)
            org_groups = OrganizationGroup.objects.filter(group__name__in=cd['roles'], \
                organization=org)
            for g in org_groups:
                user.groups.add(g.group)

            return HttpResponse(reverse('add_user_success'))

    template = 'organizations/add_user.html'
    template_vars = {'form': form}
    # override request with dictionary template_vars
    template_vars = FormMediaRequestContext(request=request, dict=template_vars)
    return render(request, template, template_vars) 
```

`FormMediaEquestContext`是我从另一个文件中导入的一个类，它有自己的逻辑，可以帮助我处理与我的表单 ( `OrganizationAddUserForm`) 关联的 javascript 和 css 文件。

`create_user_from_manual`是另一个单独封装的函数，它处理与在我的系统中创建新用户和向该新用户发送邀请电子邮件相关的合理复杂的逻辑。

当然，如果这是用户第一次到达这个“添加用户”页面，我会提供一个不同的模板，而不是在添加用户表单成功执行时重定向到具有自己的视图功能和模板的完全不同的 url .

通过保持我们的视图函数相当小，我可以更轻松地跟踪与特定功能相关的错误。

此外，这也是“重用”我的实用程序函数的好方法，例如`create_user_from_manual`在另一个视图函数中是否需要相同的实用程序函数的方法。

然而，归根结底，组织代码和封装代码是一个判断调用，你需要随着开发人员的进步而做出判断。

# c# - 更改语言后程序停止工作

> ID：13358005
> 
> 赞同：0
> 
> 时间：2012-11-13T09:09:47.450
> 
> 标签：c#, .net, winforms

我正在编写一个 Windows 窗体应用程序。我将表单的语言从（默认）更改为瑞典语。后来我改变了主意，将其恢复为默认值。现在我的表单上有一些元素已经停止运行。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T09:17:08.977

我想我自己明白了。我的表单构造函数中有一个额外的 InitializeComponent() 导致了这个

# c# - 无法访问函数返回的值

> ID：13358011
> 
> 赞同：1
> 
> 时间：2012-11-13T09:10:28.957
> 
> 标签：c#, asp.net, asp.net-mvc

我正在使用一个类

```
public partial class CashFlowIndicator:IEnumerable
{
    public static void getCashFlowChartValues(int userid)
    {
            List<KeyValuePair<string, string>> chartValues=new List<KeyValuePair<string,string>>();
            chartValues = cashFlowChart(userid);
    }    

    public static List<KeyValuePair<string, string>> cashFlowChart(int userid)
    {
              //.............................
              //..................................
            List<KeyValuePair<string, string>> cashFlowItems = new List<KeyValuePair<string, string>>();
            cashFlowItems.Add(new KeyValuePair<string, string>(a, b));
            cashFlowItems.Add(new KeyValuePair<string, string>(c, d));
           //.....................    

            return cashFlowItems;
     }    
} 
```

问题是在调用函数 cashFlowChart 时，变量“chartValues”没有被返回的值分配.....

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T09:39:56.327

基于方法名称 - “getCashFlowChartValues”和返回类型 - “void”，这是我的猜测 -

您需要将“chartValues”的定义移到方法之外并使其成为“静态”（如下所示）：

```
public class CashFlowIndicator :IEnumerable
{

    static List<KeyValuePair<string, string>> chartValues;  // has been moved here from getCashFlowChartValues

    public static void getCashFlowChartValues(int userid)
    {
            //List<KeyValuePair<string, string>> chartValues=new List<KeyValuePair<string,string>>();
            chartValues = cashFlowChart(userid);
    }    

    public static List<KeyValuePair<string, string>> cashFlowChart(int userid)
    {
            //.............................
            //..................................
            var cashFlowItems = new List<KeyValuePair<string, string>>();

            cashFlowItems.Add(new KeyValuePair<string, string>(a, b));
            cashFlowItems.Add(new KeyValuePair<string, string>(c, d));
        //.....................    

            return cashFlowItems;
    }    
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-13T09:14:55.893

您正在创建两个对象，一次在`getCashFlowChartValues`该行的方法中：

```
List<KeyValuePair<string, string>> chartValues=
                new List<KeyValuePair<string,string>>(); 
```

并在方法中一次`cashFlowChart`：

```
 List<KeyValuePair<string, string>> cashFlowItems = 
                new List<KeyValuePair<string, string>>(); 
```

尝试直接调用 subfinction，如：

```
List<KeyValuePair<string, string>> chartValues = cashFlowChart (userid); 
```

我不确定这会解决你的问题，但它更干净。

更新：

我刚刚测试了以下代码及其对我的工作，即使在原始版本中，当两个对象都为我工作并返回预期的输出时，我只是设置一个断点来更深入地查看，猜你会发现它的工作. 可能根据代码中的其他行，您没有得到预期的输出：

```
 class Program
    {
        static void Main(string[] args)
        {
            foreach (KeyValuePair<string, string> s in getCashFlowChartValues())
            {
                System.Console.WriteLine(s.Key + s.Value);
            }
            System.Console.ReadLine();

        }

        public static List<KeyValuePair<string, string>> getCashFlowChartValues()
        {
            List<KeyValuePair<string, string>> chartValues = cashFlowChart(5);
            return chartValues;
        }

        public static List<KeyValuePair<string, string>> cashFlowChart(int userid)
        {
            //.............................
            //..................................
            List<KeyValuePair<string, string>> cashFlowItems = new List<KeyValuePair<string, string>>();

            cashFlowItems.Add(new KeyValuePair<string, string>("a", "b"));
            cashFlowItems.Add(new KeyValuePair<string, string>("c", "d"));
            //.....................    

            return cashFlowItems;
        } 
```

# reporting-services - 报告服务，在 rdl 中有两个报告

> ID：13358012
> 
> 赞同：0
> 
> 时间：2012-11-13T09:10:33.750
> 
> 标签：reporting-services, ssrs-2008, rdl

我有一份 SSRS 2008 报告，其中显示了一些基于开始日期的信息。

我现在想将报告的另一个实例添加到同一个 rdl，但开始日期不同。

如何将同一报告的第二个实例添加到 rdl 文件？似乎没有办法复制和粘贴它。

数据集是一样的，只是参数值发生了变化，但都需要在同一个报表上显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T14:05:49.557

您的问题听起来有点令人困惑，因为您说的是“rdl 中的报告”，但 RDL*是*报告。您可能应该研究的是[创建一个子报表](http://msdn.microsoft.com/en-us/library/ms160348%28v=sql.100%29.aspx)。您可以创建一个“主”报告，其中包含恰好两次（2 次）或列表（n 次）的子报告。

开始日期前后的商业案例将决定哪个选项最适合您。如果您只有一个主报表，其中只有两个子报表，则可以对两个子报表的参数“开始日期”进行硬编码。在这种情况下，您甚至不需要主报告中的数据集。

如果您需要或想要更灵活，请在列表中使用带有子报表的其他选项。您可以创建一个包含“开始日期”列的数据集，并将其绑定到子报表的参数。通过这种方式，可以轻松扩展设置以显示报告三、四或 n 次。

在任何情况下，任何一个选项都可以让您[最小化复制/粘贴操作](http://en.wikipedia.org/wiki/DRY)，这是一件好事。

# ffmpeg - 按大小在ffmpeg中重新编码

> ID：13358014
> 
> 赞同：0
> 
> 时间：2012-11-13T09:10:49.237
> 
> 标签：ffmpeg, size

有没有办法通过设置所需的输出大小在 ffmpeg 中重新编码？我的意思是这样的

```
ffmpeg -i in.mp4 -size 650MB out.mp4 
```

所以ffmpeg（或包装器）计算图片的大小，编解码器，比特率等等..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T06:09:45.387

请注意`file size = bitrate * duration`和`bitrate = file size / duration`。您知道所需的文件大小 (650 MB) 和持续时间（请参阅 的输出`ffmpeg -i in.mp4`）。现在阅读[FFmpeg 和 x264 编码指南](https://ffmpeg.org/trac/ffmpeg/wiki/x264EncodingGuide)中[的两遍 ABR 示例](https://ffmpeg.org/trac/ffmpeg/wiki/x264EncodingGuide#twopass)。该示例确实需要相关解释，否则我会将其包含在此处。

# dart - Dart 的“Expando”功能是什么，它有什么作用？

> ID：13358018
> 
> 赞同：26
> 
> 时间：2012-11-13T09:11:02.667
> 
> 标签：dart, expando, nosuchmethod

最近看到了 Dart 使用的术语“Expando”。听起来不错。API 并没有为我提供太多线索。

一两个例子可能是最有帮助的！

（不确定这是否相关，但我最渴望向类添加方法（getter）和/或变量的方法。希望这可能是解决这个问题的关键。（提示：我正在使用 Nosuchmethod 方法现在并希望能够返回未找到方法的值。））

提前致谢，

_swarmii

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-13T16:00:47.847

Expandos 允许您将对象与其他对象相关联。一个非常有用的例子是 HTML DOM 元素，它本身不能被子类化。让我们做一个顶级扩展来为元素添加一些功能 - 在这种情况下，typedef 语句中给出了 Function 签名：

```
typedef CustomFunction(int foo, String bar);

Expando<CustomFunction> domFunctionExpando = new Expando<CustomFunction>(); 
```

现在使用它：

```
main(){
   // Assumes dart:html is imported
   final myElement = new DivElement();

   // Use the expando on our DOM element.
   domFunctionExpando[myElement] = someFunc;

   // Now that we've "attached" the function to our object,
   // we can call it like so:
   domFunctionExpando[myElement](42, 'expandos are cool');
}

void someFunc(int foo, String bar){
  print('Hello. $foo $bar');
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-11-09T01:08:50.500

只是为了澄清expando 和maps 之间的区别：正如[groups](https://groups.google.com/a/dartlang.org/d/msg/misc/S7GGxegtJe4/aQIeq1BfS8IJ)中所报告的，expando 有**弱引用**。
这意味着即使它仍然存在于 expando 中（只要没有其他对它的引用），它也可以被垃圾收集。

对于所有其他意图和目的，它是一张地图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T09:08:21.493

我玩了一下。这就是我所拥有的。

```
import 'dart:html';

const String cHidden = 'hidden';

class ExpandoElement {
  static final Expando<ExpandoElement> expando =
      new Expando<ExpandoElement>("ExpandoElement.expando");

  final Element element;

  const ExpandoElement._expand(this.element);

  static Element expand(Element element) {
    if (expando[element] == null)
      expando[element] = new ExpandoElement._expand(element);
    return element;
  }

//  bool get hidden => element.hidden; // commented out to test noSuchMethod()
  void set hidden(bool hidden) {
    if (element.hidden = hidden)
      element.classes.add(cHidden);
    else
      element.classes.remove(cHidden);
  }

  noSuchMethod(InvocationMirror invocation) => invocation.invokeOn(element);
}
final Expando<ExpandoElement> x = ExpandoElement.expando;
Element xquery(String selector) => ExpandoElement.expand(query(selector));

final Element input = xquery('#input');

void main() {
  input.classes.remove(cHidden);
  assert(!input.classes.contains(cHidden));

  input.hidden = true;
  assert(x[input].hidden); // Dart Editor warning here, but it's still true
  assert(!input.classes.contains(cHidden)); // no effect

  input.hidden = false;
  assert(!x[input].hidden); // same warning, but we'll get input.hidden via noSuchMethod()
  assert(!input.classes.contains(cHidden));

  x[input].hidden = true;
  assert(input.hidden); // set by the setter of ExpandoElement.hidden
  assert(input.classes.contains(cHidden)); // added by the setter
  assert(x[input].hidden);
  assert(x[input].classes.contains(cHidden)); // this is input.classes

  x[input].hidden = false;
  assert(!input.hidden); // set by the setter
  assert(!input.classes.contains(cHidden)); // removed by the setter
  assert(!x[input].hidden);
  assert(!x[input].classes.contains(cHidden));

  // confused?
  assert(input is Element);
  assert(x[input] is! Element); // is not
  assert(x[input] is ExpandoElement);
  assert(x is Expando<ExpandoElement>);
} 
```

# java - 锁定插入符号和光标的位置

> ID：13358019
> 
> 赞同：-2
> 
> 时间：2012-11-13T09:11:08.163
> 
> 标签：java, swing

所以我有一个运行类似于 MS-DOS 的程序。像 MS-DOS 一样，我不希望在我的窗口中有鼠标或插入符号。

到目前为止，我已经设法通过使光标和插入符号都不可见来隐藏它们，但是您仍然可以移动和选择屏幕上的其他内容。

所以我有两个问题：

1.  如何完全移除光标或取消光标的任何移动？
2.  如何使插入符号始终留在一个 JTextField 中？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T09:58:56.990

实现行为的疯狂想法，但是

1.  您可以尝试模仿这种创建完全透明的图像并将其设置为光标。
2.  要让插入符号只留在一个 JTextField 中，只需添加一个 JTextField :-)。其余的都添加为带边框的 JLabels。

或者，您可以使用具有黑色背景和等宽字体的 JTextArea。

# jquery - 如何让 wordpress 无限滚动更改 URL？

> ID：13358020
> 
> 赞同：0
> 
> 时间：2012-11-13T09:11:09.890
> 
> 标签：jquery, wordpress, infinite-scroll, html5-history

我正在为一家希望获得与[http://qz.com/类似的无限滚动效果的初创公司创建一个新博客](http://qz.com/)

它还需要包括在前面提到的链接中看到的 URL 更改。

对于我的生活，我无法弄清楚它是如何完成的，我认为它使用 HTML5 History API，但我也让它在 Internet Explorer 中工作，所以也许它没有？

如果有人能给我一些关于如何完成这项工作的指示（使用 WordPress），我将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-06T10:20:07.817

我的朋友也这样问我。所以我为它做了一个插件。我想这就是你想要的。

[https://github.com/wataruoguchi/clever-infinite-scroll](https://github.com/wataruoguchi/clever-infinite-scroll)

这是如何使用无限滚动更改 URL 的过程。

1.  观看滚动事件。当滚动到页面底部时，Ajax 调用下一个内容。链接指向下一个内容被删除。这是无限滚动的基础。
2.  当下一个内容加载时，它实现了隐藏的 span 标签，包含内容的 URL 字符串和页面标题字符串。
3.  观看滚动事件。当根据滚动位置看到内容时，将 URL 更改为`history.pushState()`。URL 和标题这两个字符串都是从隐藏的 span 元素中获取的。
4.  同时，它也会更改页面标题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T09:16:39.140

您可以通过[添加一些功能](https://github.com/paulirish/infinite-scroll)来无限滚动到您的 WordPress 主题。您也可以使用[jetpack 插件](http://jetpack.me/support/infinite-scroll/)激活此功能。基本上它使用AJAX。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-21T00:17:47.250

如果有人想在 WordPress 上实现无限滚动，请使用[带有 URL 循环脚本的 Wataru 的无限滚动](https://github.com/wataruoguchi/clever-infinite-scroll)

下载脚本，将其排入页脚或将其与 gulp 连接，或者您选择使用它。

**如何在WordPress中实现无限滚动：**

**1）**像这样组织您的帖子内容：

**单.php**

```
<?php get_header(); ?>

   <main id="post-left-col" class="relative infinite-container" role="main">

      <?php if (have_posts()) : while (have_posts()) : the_post();

                    get_template_part( 'template-parts/post/content' );

                endwhile; endif;
                 ?>
                </main>
        </div>
<?php get_footer(); ?> 
```

**内容.php**

```
 <?php
    /**
     * Template part for displaying posts
    */
    ?>
    <article id="post-area" class="infinite-post">

<!-- Insert your post format here e.g. <h1><?php the_title; ?></h1> etc.. 
```

确保包括

```
 <div class="navigation"><?php next_post_link(); ?></div> 
```

在您的 content.php 帖子模板的末尾。

**2)**设置无限滚动配置。当然，这可以包含在您的主 javascript 文件中。以下任何选择器都可以更改其名称。

```
jQuery(document).ready(function($) {

    $('.infinite-content').cleverInfiniteScroll({
                contentsWrapperSelector: '.infinite-container',
                contentSelector: '.infinite-post',
                nextSelector: '.navigation a:first'
            });
}); 
```

感谢 Paul Irish 和 Wataru 在无限滚动脚本的基础上构建。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-16T01:16:23.807

最直接的方法是在每个元素滚动过去后[更改 URL 哈希。](https://stackoverflow.com/questions/11588482/how-can-i-replace-a-windows-url-hash-with-another-response)如果用户返回页面，您可以将其保存在 cookie 中并加载它。

正如您提到的，使用 History API 似乎有一个更高级的版本，这里有一篇很好的文章[，](http://blog.gesteves.com/2011/09/22/better-infinite-scrolling-with-the-html5-history-api/)但这种方法不支持 IE9 或更早版本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-21T07:49:40.973

您可能想尝试 Project Sarus

[https://github.com/srijanlabs/sarus](https://github.com/srijanlabs/sarus)

它实现了相同的功能并且是高度可定制的。

它是一个内置在 AngularJS 中的前端框架，因此它可以在后端与 wordpress 一起使用。您需要做的就是公开 RSS 或创建 API。否则，您可以尝试将其集成到 wordpress html 本身中。

# exit-code - WinSCP 退出代码

> ID：13358022
> 
> 赞同：0
> 
> 时间：2012-11-13T09:11:32.190
> 
> 标签：exit-code, winscp

我正在将 WinSCP 编写到 VB.NET 项目中，并且想知道是否有可用于错误处理的退出代码和描述列表？检查了他们的网站，但找不到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:57:04.773

0 = 成功，1 = 错误。

参考这里：
[https ://winscp.net/eng/docs/scripting#result](https://winscp.net/eng/docs/scripting#result)
[https://winscp.net/eng/docs/faq_script_result](https://winscp.net/eng/docs/faq_script_result)

# android - onSaveInstanceState 总是被调用

> ID：13358025
> 
> 赞同：3
> 
> 时间：2012-11-13T09:11:46.193
> 
> 标签：android, android-activity, savestate

我似乎和其他人有相反的问题。:)

每当我从一个活动导航到下一个活动时，都会调用我的 onSaveInstanceState。我签入了 LogCat，它绝对不会杀死活动。另外，我看到返回时未调用 onRestoreInstanceState ，因此它必须仍在内存中。

我认为它仅在释放内存或方向更改时才被调用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T10:32:31.910

是的，`onSaveInstanceState()`在活动暂停时调用。这是因为一旦 Activity 暂停，Android 可以随时终止进程（无需调用任何其他生命周期方法）。如果 Activity 在进程被杀死之前恢复，Android 会意识到它不需要调用`onRestoreInstanceState()`，因此它不会进行调用（这是一种优化）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-10T19:41:18.627

医生怎么说？

“如果调用，此方法将在 onStop() 之前发生。无法保证它是否会在 onPause() 之前或之后发生。”

# ios - 如何在应用程序开始时切换 iPhone 4 iOS 6 中的手电筒功能与首选项 plist

> ID：13358030
> 
> 赞同：6
> 
> 时间：2012-11-13T09:12:16.363
> 
> 标签：ios

我正在使用一个名为“Stickam”的应用程序，它是实时音频/视频录制并通过 3G 上传。该应用程序非常适合我的目的，除了缺少 LED 手电筒（手电筒）模式。我安装了一个调整，它允许我通过设置打开手电筒并在我使用其他应用程序（即 Safari、Appstore）时保持打开状态，但是当我开始使用 Stickam 广播时，手电筒会关闭。

我在 iPhone 上使用具有基本文本编辑和文件操作能力的文件浏览器来检查 iOS 文件结构和应用程序。我不想编辑 Stickam，只需通过粘贴 Stickam's 来覆盖它的设置 `var/mobile/Applications/FA037A73-C483-43D6-8AE8-7E69CD57EBDD/Library/Preferences/.GlobalPreferences.plist`，这是对手电筒位置和触发器的引用。如同：

```
<dict>
<key>cell</key>
<string>PSSwitchCell</string>
<key>default</key>
<false/>
<key>alternateColors</key>
<true/>
<key>defaults</key>
<string>com.ravirajm.torch</string>
<key>key</key>
<string>torchenabled</string>
<key>label</key>
<string>Enable Torch</string>
<key>PostNotification</key>
<string>com.ravirajm.torch/prefs</string>
</dict> 
```

好像行不通。你对如何做到这一点有什么想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-18T02:49:07.013

You can't modify another developer's app bundle at all unless the device is jailbroken.

# windows - MFC .dll 调试断言

> ID：13358031
> 
> 赞同：2
> 
> 时间：2012-11-13T09:12:18.157
> 
> 标签：windows, mfc, atl

我正在尝试创建一个 shell 扩展，但在这行代码中我得到了一个调试断言：

```
_AFXWIN_INLINE HINSTANCE AFXAPI AfxGetResourceHandle()
    { 
        ASSERT(afxCurrentResourceHandle != NULL);  // here
        return afxCurrentResourceHandle; } 
```

它有什么问题？我创建了这个类

```
class CMyExtShellExtApp : public CWinApp
{
public:
    virtual BOOL InitInstance();
    virtual int ExitInstance();

    DECLARE_MESSAGE_MAP()
};

BOOL CMyExtShellExtApp::InitInstance()
{   
    AFX_MANAGE_STATE(AfxGetStaticModuleState());
    return CWinApp::InitInstance();
}

int CMyExtShellExtApp::ExitInstance()
{
    return CWinApp::ExitInstance();
} 
```

错误仍然存​​在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T09:14:38.400

试着把这一行：

```
AFX_MANAGE_STATE(AfxGetStaticModuleState()); 
```

在函数的开头导致代码中的断言。

# sql - SQL 使用大小写对相等的值进行排序

> ID：13358034
> 
> 赞同：0
> 
> 时间：2012-11-13T09:13:00.057
> 
> 标签：sql, sql-server

[这里](https://stackoverflow.com/questions/13340648/sql-need-to-sort-the-value-using-group-by-or-any-other-way)已经提出了一个类似的问题。但目前的情况比以前稍微复杂一些。在示例中，如果相同`Itime`，那么我们可以按大小写排序，但如果`Itime`和结果相同，那么我该如何排序。

我的问题是，这里的结果 ID：3,5,6,1,2,7,8,4。为什么失败案例是 2,7,8 。

为什么不是8、2、7？

如果我想要这样的预期结果：3,5,1,6,8,2,7,4 我该如何继续？

请运行以下命令并帮助我进行排序。提前致谢。

```
if object_id('tempdb.dbo.#temp321','U') is not null
   drop table tempdb.dbo.#temp321

create table #temp321(id int, uname varchar(50), current_point int, 
                      previous_point int, ITime datetime, Result varchar(10))

INSERT into #temp321 values('1','a','50','40','2012-11-12 13:12:28.103','pass')
INSERT into #temp321 values('2','b','15','10','2012-11-12 13:12:28.103','fail')
INSERT into #temp321 values('3','c','71','70','2012-11-12 12:58:30.000','pass')
INSERT into #temp321 values('4','d','34','30','2012-11-12 13:12:28.103','withdraw')
INSERT into #temp321 values('5','e','40','35','2012-11-12 12:58:41.360','withdraw')
INSERT into #temp321 values('6','f','65','60','2012-11-12 13:12:28.103','pass')
INSERT into #temp321 values('7','g','20','15','2012-11-12 13:12:28.103','fail')
INSERT into #temp321 values('8','h','10','7','2012-11-12 13:12:28.103','fail')

select 
    ID 
from 
    #temp321 
ORDER BY 
    ITime ASC,
    CASE Result 
       WHEN 'pass' THEN 1 
       WHEN 'fail' THEN 2 
       WHEN 'withdrow' THEN 3 
    END 

drop table #temp321 
```

*   当前输出ID：3,5,6,1,2,7,8,4
*   预期输出 ID：3,5,1,6,8,2,7,4

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T09:27:07.160

当前查询不会每次都交付相同的订单。

对我来说，您的示例提供：

```
3, 5, 1, 6, 2, 7, 8, 4 (Note 1 and 6 being swapped) 
```

考虑到排序，与它们的排序值相比，1 和 6 是“相等的”。如果没有指定排序（或相等排序），则该束中的顺序 - 根据定义 - 未定义。（取决于创建数据的顺序线程）

同样适用于`2, 7, 8`。你想要订单`3, 5, 1, 6, 8, 2, 7, 4`- 所以你似乎“有”你期望它如何排序的逻辑？然后添加该条件，您就完成了:)

（对于您的预期输出，添加 current_point 是您想要的 - 但您必须知道是否要按该列排序）

```
SELECT * 
FROM temp321 
ORDER BY ITime ASC,
  CASE Result 
    WHEN 'pass'     THEN 1 
    WHEN 'fail'     THEN 2 
    WHEN 'withdraw' THEN 3 
  END, current_point ASC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T10:34:28.723

您可以使用键值对创建子查询：

```
 SELECT 'pass' value, 1 priority UNION ALL         
   SELECT 'fall' value, 2 priority UNION ALL
   SELECT 'withdraw' value, 3 priority UNION ALL 
```

然后对 value 列的子查询进行连接并按优先级排序，这将为您提供更清晰的解决方案。如果有很多查找值，您甚至可以按值创建临时表和索引，以确保速度合适。

# asp.net - DBMS 如何影响应用程序性能？和 Informix GUI 工具？

> ID：13358048
> 
> 赞同：5
> 
> 时间：2012-11-13T09:13:56.030
> 
> 标签：asp.net, sql-server, performance, informix

我在所有 Web 应用程序中都使用[Informix DBMS。](http://www.informix.com/)我的问题有两个部分：

1.  DBMS 对我的应用程序的性能有很大影响吗？如果答案是肯定的，那么 Informix 和`MS SQL Server 在这个问题上会怎样？

2.  在编写查询、创建数据库、关系、ERD 等时，我想要一些 GUI 工具来帮助我的工作。Informix 客户端太糟糕了。根本没有设施。我想要一些工具，比如`SQL Server Management Studio`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T11:22:06.317

作为 Informix 的 GUI 工具，您可以使用来自 Aquafold 的 Aqua Data Studio。它还支持 MS SQL Server。

至于表现：这取决于。您的数据库设计有多好。您是否使用索引，您的查询是否写得好，等等。很难回答您的问题，我们只是不知道足够多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T12:08:29.593

Aqua Data Studio 不错，但相当昂贵。开源工具[SQL Workbench/J](http://www.sql-workbench.net/downloads.html)也是informix 的有效工具。
Informix 有它自己的魅力，但我想不应该说 MS-Sql Server 速度较慢或性能不佳。您可以根据您的应用程序性质来决定 DBMS。有许多技术可以优化数据库性能，例如应用索引/没有太多的连接/查询也可以优化/也可以使用存储过程/多数据库级别等。

一旦我需要开发社交媒体网站，我就使用 MySQL这个项目但仅适用于我安装了 MongoDB 的 POST。

问候，
萨利克

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T03:39:44.173

要设计一种性能最佳的解决方案，需要了解您正在构建的应用程序的性质。例如，如果您正在构建一个需要处理和计算大量数据并且计算可以分布式的系统，那么无论您选择哪个供应商，“传统”关系数据库都不是一个好的选择。[选择支持分片](http://en.wikipedia.org/wiki/Shard_%28database_architecture%29)、[Hadoop](http://en.wikipedia.org/wiki/Apache_Hadoop)并且可能基于某种[NoSQL](http://en.wikipedia.org/wiki/NoSQL)解决方案的选项会更好。

如果您坚持使用 RDMS 并构建具有大量读取而不是大量写入的东西，请选择支持[快照隔离](http://en.wikipedia.org/wiki/Snapshot_isolation)的数据库，这将使您的读者不会被作者阻止。

成本也影响了这一点——一些 RDMS 系统是免费的，有些则不是。您的问题是一般要具体回答的方式。

# visual-studio-2012 - Ctrl + Dot (ShowSmartTag) 在 Visual Studio 2012 中不起作用

> ID：13358051
> 
> 赞同：15
> 
> 时间：2012-11-13T09:14:16.403
> 
> 标签：visual-studio-2012, keyboard-shortcuts

我现在使用的是 Visual Studio 2012，现在“ShowSmartTag”的键盘快捷键`Ctrl`+`.`不起作用。我搜索了一下发现有人说[CodeRush 的](https://en.wikipedia.org/wiki/CodeRush)Quick Nav 快捷方式是一样的，所以我在 CodeRush 中禁用了该命令，但我仍然无法解决这个问题。我还尝试禁用所有那些可疑的扩展，但仍然没有成功。任何的想法？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-13T09:25:52.317

所有键盘快捷键都可以从 中查看`Tools > Options > Environment > Keyboard`。你的`View.ShowSmartTag`命令对当前的快捷方式有什么看法？

![键盘选项](../Images/d2634b2c1091f4a6f69ab12bae40d0a8.png)

如果您尝试将`CTRL`+分配`.`给任何东西，它会告诉您该快捷方式是否被其他东西使用...

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-08T17:27:08.870

就我而言，是[Web Essentials](https://stackoverflow.com/tags/web-essentials/info)导致了这个问题。我禁用了它，现在一切正常。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-15T03:04:50.227

是 CodeRush 导致了这个问题，我卸载了它，然后 SmartTag 再次工作。我的猜测是 CodeRush 完全取代了 VS2012 的内置 SmartTag。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-23T07:27:02.357

在我的电脑上，问题主要发生在重命名方法或参数时......

为了分析这一点，我在没有开始编辑源代码的情况下启动了第一个 VS 2012 实例。然后我启动了第二个 VS 2012 实例，它必须附加到第一个 VS 实例：

*   调试->附加到进程
*   查找 devenv.exe，Title = VS 主窗口的标题
*   选择托管和本机代码
*   附

发生异常时启用中断：

*   调试->异常
*   启用 C++ 异常、公共语言运行时异常
*   好的

现在，当我开始在第一个 VS 实例中编辑参数名称时，抛出了一个错误，并且第二个实例中的调试器向我显示了内存探查器加载项中的错误。卸载插件后，键盘调用的 ShowSmartTag 再次正常工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T04:19:05.763

我对`Ctrl`+有同样的问题`.`，我在 Visual Studio 的任何地方都尝试了这个热键，但它没用。我的笔记本是越南制造的ThinkPad T430；我认为这是键盘标准的问题。

也许您应该为“ShowSmartTag”设置另一个热键。例如，我删除了“NavigateTo”并将`Ctrl`+添加`+`到“ShowSmartTag”。

# android - 链接 .a 编译库和自己的共享库 Android NDK r8b

> ID：13358052
> 
> 赞同：4
> 
> 时间：2012-11-13T09:14:37.017
> 
> 标签：android, build, android-ndk, libraries

我在使用 Android NDK r8b 链接我的 Android 项目中的 C 库时遇到问题。我使用 ARM 的工具链构建了 cURL 库（无 SSL），它为我提供了一个 libcurl.a 文件和一个 libcurl.so.4.2.0 文件。我还创建了一个 C 文件来为我的 Java 代码提供函数并使用 cURL 库。

**安卓.mk**

```
LOCAL_PATH:= $(call my-dir)

include $(CLEAR_VARS)
LOCAL_MODULE:= libcurl
LOCAL_SRC_FILES := libcurl.a
include $(PREBUILT_STATIC_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE := curljni
LOCAL_SRC_FILES := curljni.c
LOCAL_STATIC_LIBRARIES := libcurl
include $(BUILD_SHARED_LIBRARY) 
```

现在我的**C 文件**

```
#include <string.h> 
#include <jni.h> 
#include <stdio.h> 
#include <stdlib.h> 

jstring Java_test_curljni_MainActivity_stringFromJNI(JNIEnv* env, jobject thiz) 
{ 
  CURL *curl; 
  CURLcode 
......
} 
```

当我尝试使用项目文件夹中的 ndk-build 命令进行构建时，输出错误如下：

```
Compile thumb  : curljni <= curljni.c
jni/curljni.c: In function 'Java_test_curljni_MainActivity_stringFromJNI':
jni/curljni.c:8:3: error: unknown type name 'CURL'
jni/curljni.c:9:3: error: unknown type name 'CURLcode'
jni/curljni.c:11:8: warning: assignment makes pointer from integer without a cast [enabled by default]
jni/curljni.c:13:28: error: 'CURLOPT_URL' undeclared (first use in this function)
jni/curljni.c:13:28: note: each undeclared identifier is reported only once for each function it appears in
/cygdrive/c/android-ndk-r8b/build/core/build-binary.mk:252: recipe for target `obj/local/armeabi/objs/curljni/curljni.o' failed
make: *** [obj/local/armeabi/objs/curljni/curljni.o] Error 1 
```

我在 Android.mk 文件中尝试了很多东西，但都没有成功。使用 PREBUILT_SHARED_LIBRARY 没有帮助，因为它只需要一个 .so 文件并将扩展名从 .so.4.2.0 更改为 .so 只是告诉我在构建时不支持该格式......

一件事我不确定是否必须在我的 C 文件中包含标题，但是当我这样做时，它当然找不到它们。

请注意，当我仅使用我的 Android.mk 文件中声明的 curl 库进行构建时（省略了与 C 文件的共享库），那么 libs 文件夹中不会创建任何内容！

在此先感谢您的帮助 ！

编辑 ：：：：

实际上它确实有效（我已经尝试了数百万次，现在它有效，不知道有什么不同），但现在我有了

```
c:/android-ndk-r8b/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6.x-google/../../../.                                     ./arm-linux-androideabi/bin/ld.exe: cannot find ./obj/local/armeabi/libcurl.a: Permission denied 
```

我正在使用 Cygwin，这可能是我遇到权限问题的原因吗？当创建 .so 和 .a 时，我设法绕过它，返回权限错误，对其进行 chmod 并再次运行 ndk-build，但这似乎有点粗糙！另外，现在我的 curl 函数都无法访问（“对（函数）的未定义引用”）。

```
$ ../../../ndk-build
SharedLibrary  : libcurljni.so
./obj/local/armeabi/objs/curljni/curljni.o: In function `Java_test_curljni_MainActivity_stringFromJNI':
C:\android-ndk-r8b\apps\curljni\project/jni/curljni.c:12: undefined reference to `curl_easy_init'
C:\android-ndk-r8b\apps\curljni\project/jni/curljni.c:14: undefined reference to `curl_easy_setopt'
C:\android-ndk-r8b\apps\curljni\project/jni/curljni.c:15: undefined reference to `curl_easy_perform'
C:\android-ndk-r8b\apps\curljni\project/jni/curljni.c:17: undefined reference to `curl_easy_cleanup'
collect2: ld returned 1 exit status
/cygdrive/c/android-ndk-r8b/build/core/build-binary.mk:378: recipe for target `obj/local/armeabi/libcurljni.so' failed
make: *** [obj/local/armeabi/libcurljni.so] Error 1 
```

我的 curljni.c 如下

```
jstring Java_test_curljni_MainActivity_stringFromJNI(JNIEnv* env, jobject thiz) 
{ 
  CURL *curl; 
  CURLcode res; 
  char buffer[10]; 
  curl = curl_easy_init(); 
  if(curl) { 
  curl_easy_setopt(curl, CURLOPT_URL, "yahoo.com"); 
  res = curl_easy_perform(curl); 
  curl_easy_cleanup(curl); 
  if(res == 0) 
     return (*env)->NewStringUTF(env, "0 response"); 
  else 
     sprintf(buffer,"code: %i",res); 
  return (*env)->NewStringUTF(env, buffer); 
  } 
  else { 
     return (*env)->NewStringUTF(env, "no curl"); 
  } 
} 
```

我确保在 curl.h 中声明了每个需要的函数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T10:00:43.183

是的，您必须在 C 文件中包含 Curl 标头。要允许 ndk-build 在链接时找到这些头文件，您必须使用 LOCAL_EXPORT_C_INCLUDES 添加它们的路径：

```
include $(CLEAR_VARS)
LOCAL_MODULE:= libcurl
LOCAL_SRC_FILES := libcurl.a
LOCAL_EXPORT_C_INCLUDES := /* put the path to the Curl headers here */
include $(PREBUILT_STATIC_LIBRARY) 
```

这将自动将路径添加到所有需要 libcurl 的目标中的标头，并且它应该构建和链接。

# jquery - 跨域ajax问题

> ID：13358057
> 
> 赞同：1
> 
> 时间：2012-11-13T09:14:54.297
> 
> 标签：jquery, ajax, cross-domain, syntax-error

我很简单地尝试从[http://bootcamp.jit.su/welcome/marian获取消息](http://bootcamp.jit.su/welcome/marian)

这是我正在使用的代码

```
<!DOCTYPE html>
<html>
    <head>
        <script src="http://code.jquery.com/jquery-latest.js"></script>
        <meta charset="utf-8" />
        <title>Globant :: Welcome to the HTML5 bootcamp</title>
    </head>
    <body>

    </body>
        <script type="text/javascript">
        $(document).ready(function(){
            var URL = "http://bootcamp.jit.su/Welcome/marian?callback=?";
            var request = jQuery.noConflict().ajax({
                    url: URL,
                    type: "GET",
                    dataType: 'jsonp',
                    processData: false,
                    success: function(data) {alert('hola') ;}
            });
        });

    </script>

</html> 
```

似乎它应该可以正常工作，但我在控制台中不断收到一条错误消息：“意外的'：'字符”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T09:50:23.453

问题是 JSONP 不是实际的 AJAX 请求。这是一种欺骗浏览器的解决方法，它通过在标题中插入脚本标签来工作。想一想，这是您支持 JSONP 的 URL

> domain.com/jsonp.aspx?callback=processJSONP **_**

processJSONP 是您页面中已有的函数，请求返回类似于此的脚本

```
processJSONP( {
    "glossary": {
        "title": "example glossary",
        "GlossDiv": {
            "title": "S",
            "GlossList": {
                "GlossEntry": {
                    "ID": "SGML",
                    "SortAs": "SGML",
                    "GlossTerm": "Standard Generalized Markup Language",
                    "Acronym": "SGML",
                    "Abbrev": "ISO 8879:1986",
                    "GlossDef": {
                        "para": "A meta-markup language, used to create markup languages such as DocBook.",
                        "GlossSeeAlso": ["GML", "XML"]
                    },
                    "GlossSee": "markup"
                }
            }
        }
    }
}); 
```

它使用您需要的数据调用您的函数，然后您可以做任何您想做的事情。当然，数据不必是 JSON 对象，或者您可以获得更多回调，例如

```
processJSONP("data1=11");
processJSONP("data2=22");
processJSONP("data3=33"); 
```

因此，如果 URL 不支持，您将无法获得所需的数据。

要在这里实现您想要的，您必须使用服务器端脚本（例如 ASP.Net、PHP 等）并通过服务器端对象（WebRequest、HttpRequest）请求内容，当您获得它时，您可以将其用作 JSONP或标准 AJAX 请求，因为它现在在您自己的域中。

希望这能清除一切。

# c# - 当用户推送“编辑”链接时，如何将下拉列表框放在 GridView 列中？

> ID：13358059
> 
> 赞同：3
> 
> 时间：2012-11-13T09:14:56.387
> 
> 标签：c#, asp.net

当用户开始在 gridview 中编辑行时，他会看到下一个： ![在此处输入图像描述](../Images/ac5482301cf1581585a7de32777db273.png)

是否可以将带有来自 db 的数据的下拉列表框放入编辑框中？

GridView 从数据库中获取数据。自动生成列 = 真。我的 GridView 从不同的表中获取数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T09:28:30.167

几年前，我制作了一个视频来解释您所问的问题。检查一下，让知道它是否有帮助。虽然我必须提到我不会自动生成列。 [http://www.youtube.com/watch?v=GdfdOum0AdM&feature=plcp](http://www.youtube.com/watch?v=GdfdOum0AdM&feature=plcp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T09:20:53.267

是的，您可能必须在网格视图中设置 EditItemTemplete 字段。考虑以下包含相同答案的类似内容。 [网格视图 EditItemTemplete](http://www.codeproject.com/Articles/23471/Editable-GridView-in-ASP-NET-2-0)

在这篇文章中已经展示了如何在网格视图的编辑模式下出现下拉列表......

# django - 模板标签或过滤器

> ID：13358063
> 
> 赞同：0
> 
> 时间：2012-11-13T09:15:21.850
> 
> 标签：django, django-templates

大家好，我正在尝试在模板上执行此操作`{% some_list |forloop.counter %}`并从列表中返回一个值我有这个函数应该可以解决问题但不知道如何将它们放在一起这里是下面的函数

```
def return_item(a_list,a_int):
    return a_list[a_int] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T09:43:28.607

在[django 模板过滤器文档中](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#writing-custom-template-filters)**非常**清楚如何执行此操作：

```
@register.filter
def return_item(l, i)
    try:
        return l[i]
    except:
        return None 
```

比：

```
{{ mylist|return_item:forloop.counter }} 
```

# .net - Windows 8 行为库？

> ID：13358064
> 
> 赞同：2
> 
> 时间：2012-11-13T09:15:30.067
> 
> 标签：.net, xaml, windows-8, windows-runtime, winrt-xaml

我们需要 Windows 8 Metro Style 应用程序库，它提供与**System.Windows.Interactivity**和**Microsoft.Expression.Interactions**库为 Silverlight / Windows Phone 应用程序提供的相同功能。

你有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T09:17:05.723

Metro 风格的应用程序不存在 Systm.Windows.Interactivity。

您需要使用以下内容：[Winrt Behaviors](http://winrtbehaviors.codeplex.com/)和[Winrt Triggers](http://winrttriggers.codeplex.com/)。您需要自己编写在 Blend 中获得的行为。

# objective-c - 如何在 Objective-C 中每 4 个字符后输入破折号

> ID：13358070
> 
> 赞同：1
> 
> 时间：2012-11-13T09:15:51.813
> 
> 标签：objective-c, input, uitextfield

我有一个获取信用卡输入的 UITextField。如何在用户输入第 4 个字符后自动插入破折号，就像用户输入信用卡号时 iOS 的 Groupon 应用程序一样？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T11:23:23.480

这比我想的更难。文本更改时发送的常见通知是 UITextFieldTextDidChangeNotification。在 viewDidLoad 方法中，您应该注册以接收此通知并在文本更改时执行选择器。在选择器中，您每 4 个字符添加一个破折号。
在我的代码中，文本字段被命名为*textField*。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSNotificationCenter* center=[NSNotificationCenter defaultCenter];
    [center addObserver: self selector: @selector(textDidChange:) name: UITextFieldTextDidChangeNotification object: textField];
}

- (void) textDidChange : (NSNotification*) notification
{
    NSString* string=[[textField text] stringByReplacingOccurrencesOfString: @"-" withString: @""];
    __block NSMutableString* newString= [string mutableCopy];
    NSMutableIndexSet* set=[NSMutableIndexSet new];
    for(NSUInteger i=4; i<[string length];i+=4)
    {
        [set addIndex: i+i/4-1];
    }
    [set enumerateIndexesInRange: NSMakeRange(0, [string length]+[string length]/4) options: 0 usingBlock: ^(NSUInteger index, BOOL* stop)
    {
        [newString insertString: @"-" atIndex: index];
    }];
    [textField setText: newString];
} 
```

每 4 个字符添加一个破折号的代码很长，也许有更短的方法。

PS：上一个版本不正确，我编辑了它（无法正确删除字符）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T06:37:56.253

这对我来说非常有效：

[iOS自动在文本字段中添加连字符](https://stackoverflow.com/questions/6968331/ios-automatically-add-hyphen-in-text-field?lq=1)

通过“dingo sky”检查答案。

# google-app-engine - 在 Google App Engine 上部署应用程序时出错

> ID：13358072
> 
> 赞同：-1
> 
> 时间：2012-11-13T09:16:00.643
> 
> 标签：google-app-engine

我使用谷歌应用引擎平台创建了一个应用程序。最初，我使用带有 Eclipse 的 GAE SDK 在本地测试了应用程序，一切正常。当我尝试在 Google 的服务器上部署它时，出现以下错误：

" 错误：服务器错误 服务器遇到错误，无法完成您的请求。

如果问题仍然存在，请报告您的问题并提及此错误消息和导致它的查询。"

这是一个非常普遍的错误。有没有办法查看服务器的日志以了解可能出了什么问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T09:23:55.100

好吧，在 GAE 站点上查看后，我发现您可以在以下位置查看服务器日志：

管理控制台 -> “我的应用程序” -> 日志

# yii - 从组件的 controller.php 中获取操作名称

> ID：13358077
> 
> 赞同：1
> 
> 时间：2012-11-13T09:16:19.327
> 
> 标签：yii

有没有办法从 Controller.php 初始化函数中获取当前操作名称？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T09:46:34.350

通常，您可以在类`$this->action->id`的后代中调用`CController`。或者您可以`Yii::app()->controller->action->id`通过整个应用程序使用。

但是该方法`init()`在控制器开始执行之前被调用（参见[http://www.yiiframework.com/doc/api/1.1/CController#init-detail](http://www.yiiframework.com/doc/api/1.1/CController#init-detail)）

如您在此处看到的：[http://www.yiiframework.com/doc/api/1.1/CWebApplication#runController-detail](http://www.yiiframework.com/doc/api/1.1/CWebApplication#runController-detail) `actionID`将`run()`仅在以下之后传递给方法`init()`：

```
$controller->init();
$controller->run($actionID); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T04:24:53.457

正如**v2p**所说，在 init() 运行之后，我们可以通过 Yii::app()->controller 获取控制器 id，也可以通过 Yii::app()->controller->action->id 获取行为 id；另一种方式： Yii::app()->getController()->getAction()->id;

# java - 调试自定义 tomcat 领域

> ID：13358078
> 
> 赞同：3
> 
> 时间：2012-11-13T09:16:28.580
> 
> 标签：java, eclipse, tomcat, jdbcrealm

我正在使用 maven 和 eclipse juno 为 Tomcat 7 开发一个自定义领域。

它看起来很像[使用 LDAP 身份验证和 JDBC 授权实现 Tomcat 领域](https://stackoverflow.com/questions/1138450/implement-a-tomcat-realm-with-ldap-authentication-and-jdbc-authorization)中描述的解决方案，其中：

*   一个适应的 hasRole 方法，因为接口略有改变（附加 Wrapper 作为第一个参数）；
*   一些内部特定的东西。

当我尝试使用 eclipse 调试这个领域时，我不断遇到以下异常：

```
The type org.apache.tomcat.util.buf.ByteChunk cannot be resolved. It is indirectly referenced from required .class files 
```

据我所知，这个类在 $TOMCAT_ROOT/lib/tomcat-coyote.jar 中：

```
unzip -t /opt/apache-tomcat-7.0.32/lib/tomcat-coyote.jar | grep ByteChunk
    testing: org/apache/tomcat/util/buf/ByteChunk$ByteInputChannel.class   OK
    testing: org/apache/tomcat/util/buf/ByteChunk$ByteOutputChannel.class   OK
    testing: org/apache/tomcat/util/buf/ByteChunk.class   OK 
```

该项目非常简单，一个 Maven 构建的 jar 以这种方式配置：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <artifactId>senrealm</artifactId>
    <groupId>fr.senat</groupId>
    <packaging>jar</packaging>
    <version>0.1.0</version>
    <name>Realm d'authentification</name>
    <url></url>

    <properties>
        <maven.compiler.source>1.6</maven.compiler.source>
        <maven.compiler.target>1.6</maven.compiler.target>
        <tomcat.version>7.0.32</tomcat.version>
    </properties>

    <dependencies>
        <dependency>
            <groupId>org.apache.tomcat</groupId>
            <artifactId>tomcat-catalina</artifactId>
            <version>${tomcat.version}</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>org.apache.tomcat</groupId>
            <artifactId>tomcat-coyote</artifactId>
            <version>${tomcat.version}</version>
        </dependency>
    </dependencies>
    <build>
        <resources>
              <resource>
                      <directory>src/main/resources</directory>
                      <filtering>true</filtering>
                      <excludes>
                              <exclude>ldap.jks</exclude>
                      </excludes>
              </resource>
              <resource>
                      <directory>src/main/resources</directory>
                      <filtering>false</filtering>
                      <includes>
                              <include>ldap.jks</include>
                      </includes>
              </resource>
      </resources>
   </build>
</project> 
```

生成的 jar 放在 $TOMCAT_ROOT/lib 中。

任何的想法 ？

补充：问题只发生在 ldaps 连接上。使用非 SSL ldap 连接，一切正常。

即使我在 m 中手动设置参数时也是一个重载的“open”方法，代码如下：

```
@Override
protected DirContext open() throws NamingException {

    URL ts = getClass().getResource("/ldap.jks");
    System.setProperty("javax.net.ssl.trustStore", ts.getFile());

    Properties ldapProperties;
    ldapProperties = new Properties();
ldapProperties.put(javax.naming.Context.INITIAL_CONTEXT_FACTORY,"com.sun.jndi.ldap.LdapCtxFactory");
    ldapProperties.put(javax.naming.Context.PROVIDER_URL, "ldaps://ldap.senat.fr:636/dc=senat,dc=fr");
    ldapProperties.put("com.sun.jndi.ldap.connect.pool","true");

    ldapProperties.put(javax.naming.Context.SECURITY_AUTHENTICATION, "simple");
    ldapProperties.put(javax.naming.Context.SECURITY_PROTOCOL, "ssl");
    ldapProperties.put(javax.naming.Context.SECURITY_PRINCIPAL, "uid=batchges, ou=comptes, dc=senat, dc=fr");
    ldapProperties.put(javax.naming.Context.SECURITY_CREDENTIALS, "xxxxx");

    DirContext newDirContext = new InitialDirContext(ldapProperties);
    return newDirContext; 
```

}

...奇怪的异常发生在 InitialDirContext 构造函数中。

**更新：**如果我将 javax.net.ssl.trustStore 属性设置为本地文件而不是 jar 中包含的文件，它可以工作。

所以 ：

```
@Override
protected DirContext open() throws NamingException {
    System.setProperty("javax.net.ssl.trustStore", "/tmp/ldap.jks");
    return super.open();
} 
```

作品。知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T12:52:09.380

好的，所以，错误是 sun ldap 库无法从 jar 加载 jks 文件。解决方法是将文件从汽车提取到 tomcat 临时目录，然后将此“真实”文件设置为 javax.net.ssl.trustStore 属性。

```
 String tmpdir = System.getenv("CATALINA_TMPDIR");
        if(tmpdir == null)
            tmpdir = System.getenv("CATALINA_HOME") + "/temp";
        final String tmpJKSfile = tmpdir + "/ldap.jks";
        URL ts = getClass().getResource("/ldap.jks");
        try {
            InputStream in = new BufferedInputStream(ts.openStream());
            OutputStream out = new BufferedOutputStream(new FileOutputStream(tmpJKSfile));
            IOUtils.copy(in, out);
            out.flush();
            out.close();
            in.close();
        } catch (IOException eio) {
            /* your logging */
        }

        System.setProperty(TrustStoreProperty, tmpJKSfile); 
```

# ruby-on-rails - Rails link_to with remote：页面刷新后真正处理html而不是js

> ID：13358088
> 
> 赞同：15
> 
> 时间：2012-11-13T09:16:55.087
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我的应用程序中有一个搜索页面，其中有一个 ajax 搜索表单。搜索表单正常工作，将参数传递给模型以过滤搜索，模型返回结果集合。搜索提交后，@results 会在页面上呈现。然后每个@result 都有一个指向其上的操作的链接，例如：

```
<%=link_to "Message", message_user_path(:id => user.id), :remote => true%> 
```

控制器中的此操作在哪里：

```
respond_to :js, :html
def message
  @user_id = params[:id]
  @user = User.find_by_id(@user_id)
  respond_to do |format|
    format.html
    format.js
  end
end 
```

这会以 message.js.erb 进行响应，这会触发消息面板弹出给用户的消息。所有这些都正常工作，检查日志我看到发送了正确的获取请求，并且正在处理正确的格式：

```
Started GET "/users/3/message"
Processing by UsersController#message as JS 
```

但是，如果我刷新页面并尝试单击之前工作的相同链接，则会收到错误模板缺失。检查日志，我看到现在发送了两个请求，第一个是 html，然后是同一个 js 请求。

```
Started GET "/users/4/message"
Processing by StudentsController#message as HTML
...
Completed 406 Not Acceptable in 3ms (ActiveRecord: 1.0ms)

Started GET "/users/4/message"
Processing by StudentsController#message as JS 
```

html 请求引发缺少模板错误。有谁知道为什么刷新页面会导致 rails 尝试使用对远程链接的 html 请求进行响应？
编辑：routes.rb

```
resources :students do
    member do
      get 'message'
    end
end 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-06-01T17:18:05.420

你是否`app/assets/javascripts/application.js`包含

```
//= require jquery
//= require jquery_ujs 
```

?

你的erb包含`<%= javascript_include_tag "application" %>`？

我只是在几个小时内一直在努力解决这样的问题，而这两点中的最后一点解决了它；我看到其他一些问题中提到的第一点，所以我会在这里重复一遍。

希望有帮助。

（[信用到期的信用](https://stackoverflow.com/a/9240081/1603071)）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-01-24T23:34:23.353

它对我来说是什么解决方案是添加 :format => "js"

所以在你的情况下：

```
<%=link_to "Message", message_user_path(:id => user.id, :format => "js"), :remote => true %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-15T20:46:32.410

一般来说，当你`link_to`在一个特定的按钮上使用时，当你按下按钮时，`as js`请求被发送到控制器，但也会搜索相应的 .js.erb 文件等等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-12T18:02:55.727

我的解决方案是更换

```
format.json do 
```

和

```
format.js do 
```

您可以通过在控制器中设置断点（我使用 pry）对请求进行故障排除，然后查看变量

```
request.format 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-30T17:34:02.390

对于较新版本的 Rails，这应该`remote: true`在`link_to`代码中使用时得到修复，就像原始海报所做的那样，只会寻找一种`.js`格式来响应。正如其他人所说，如果您从不需要 html 响应，那么您可以将其从代码中一起删除；您甚至不需要`respond_to`,`respond_with`等，因为 Rails 会自动响应 JS 寻找您已经制作的模板。所以你的控制器代码看起来像这样：

```
def message
  @user_id = params[:id]
  @user = User.find_by_id(@user_id)
end 
```

链接仍然是这样的：

```
<%=link_to "Message", message_user_path(:id => user.id), :remote => true %> 
```

或者这也可以（我首​​选的语法方式）：

```
<%=link_to "Message", message_user_path(id: user.id), remote: true %> 
```

此代码将调用将查找模板的控制器操作`message.js.erb`。

我知道这个问题现在已经过时了，但是对于任何正在寻找答案并使用当前 Rails 6+（我使用的是 7.0.0alpha）的人，如果您遇到同样类型的问题，同时请求 HTML 和 JS 模板；检查 turbolinks 不是导致问题的原因。有时 turbolink 会导致请求被发送两次，并且它可能将第一个请求作为 HTML 请求发送。

# python - Argparse：是否可以使帮助上下文敏感

> ID：13358095
> 
> 赞同：2
> 
> 时间：2012-11-13T09:17:15.950
> 
> 标签：python, argparse, context-sensitive-help

我有一个使用 argparse 来处理命令行的程序。程序的命令行，因此它的帮助变得上下文敏感。我想让帮助反映上下文敏感性。

例如

```
prog --mode=1 OPTA OPTB OPTC<br>
prog --mode=2 OPTD OPTE OPTF<br>

prog --mode=1 -h<br>
"In mode 1 you have four options, A,B,C,D"

prog --mode=2 -h<br>
"You mode 2 you have four options, D,E,F,G" 
```

***我应该在这里补充一点，这只是一个例子。在我的实际程序中，可能有任意数量的模式，它们不是由我的代码定义的，它们是由我的 API 的用户定义的。因此，不可能对每种模式的帮助进行硬编码。实际的帮助文本稍后定义。***

这意味着在处理 --mode 参数后更改参数 'option' 的帮助字符串以反映不同的模式。下面的代码基本上可以正常工作，因为命令按预期工作，但帮助没有。

问题是 parse_known_args() 似乎处理了 -h 然后退出。我需要`parse_args()`处理帮助。显然我可以简单地解析`sys.argv`并找到`--mode`自己，但这肯定会打败`argparse`.

```
import argparse

parser = argparse.ArgumentParser(description='Test argparser')
parser.add_argument('--mode', nargs=1, type=int,
                    default=[1],
                   help='program mode')

options={
    1:["OPTA","OPTB","OPTC","OPTD"],
    2:["OPTD","OPTE","OPTF","OPTG"]}

args = parser.parse_known_args()[0]

print "Initial pass"
print args

parser.add_argument('options', type=str, nargs='+',
                    choices=options[args.mode[0]]+["ALL"],
                    default="ALL",
                   help='One or more of the options, above')

args = parser.parse_args()

print "Second pass"
print args 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T11:49:03.870

您想要做的是由 argparse 的[sub-commands](http://docs.python.org/dev/library/argparse.html#sub-commands)处理。使用子命令意味着用子命令替换您的 --mode 选项：

```
prog --mode=1 OPTA OPTB OPTC 
```

会成为

```
prog mode1 OPTA OPTB OPTC 
```

`mode1`子命令可以得到自己的帮助；它可以通过

```
prog mode1 -h 
```

这种方法的另一个优点是`prog -h`列出了可能的子命令（以及相关的描述）。

# zend-framework - PHP 致命错误：在 D:\xampp\htdocs\dev.gamenomad.com\application\controllers\ParticipantController.php 中找不到类 'library\App\App_TestClass'

> ID：13358099
> 
> 赞同：0
> 
> 时间：2012-11-13T09:17:38.563
> 
> 标签：zend-framework

我是 zend 框架的新手。我正在尝试编写一个自定义类。这是代码：

```
<?php
namespace library\App;

class App_TestClass {
    private $name;
    function __construct(){
        $this->name = 'My name is Test Class';
    }

    public function getName()
    {
        return $this->name;
    }
}

?> 
```

此类位于`library/App`文件夹中。我还将此代码添加到 Bootstrap.php 文件中：

```
public function _initAutoload()
{
    $resourceLoader = new Zend_Loader_Autoloader_Resource(array(
            'basePath'  => 'library',
            'namespace' => 'App'));     
} 
```

当我在 ParticipantController.php 中实例化这个类时，我得到这个错误：`PHP Fatal error: Class 'library\App\App_TestClass' not found in D:\xampp\htdocs\dev.gamenomad.com\application\controllers\ParticipantController.php` 我知道这个问题之前已经被问过。但我无法解决我的问题。提前感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:43:28.200

在我看来，您将命名空间与类名中的路径混合在一起。

对于 ZF1，只需：

> 类 App_TestClass {

删除 - 命名空间库\App；

并更改为：

> $resourceLoader = new Zend_Loader_Autoloader_Resource(array('basePath' => APPLICATION_PATH .'library', 'namespace' => 'App_'));

# c# - 将字节数组设置为统一texture2d的快速方法

> ID：13358100
> 
> 赞同：6
> 
> 时间：2012-11-13T09:17:39.950
> 
> 标签：c#, unity3d, shader

在 unity3d 我从相机（彩色相机设备）获取图像作为来自插件的字节数组，我想在屏幕中实时显示图像。

如果我`Texture2D.SetPixels32`用于制作纹理，它**会显着降低 fps**（从 80 到 10）。

```
//First convert byte[] to color[]
  colorr = GetColor(imageBuffer);

  imageColor.SetPixels32(colorr);
  imageColor.Apply();   // fps reduced here 
```

我想我需要在 GPU 上使用着色器来做到这一点。

那么更快地做到这一点的解决方案是什么？如果答案是使用着色器，可以给出一个示例。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T07:37:24.473

我已经使用 openGL 完成了它。只需为 unity 编写一个插件，然后从 unity 获取 Texture2D NativeID 并将其发送到插件，然后使用 openGL 将字节设置为纹理！这是惊人的 ！FPS 从 10 增加到 50 !!! 您还需要知道您必须在 OpenGL 模式下运行游戏，使用“-force-opengl”才能使用 opengl 功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T20:42:13.290

这听起来很适合你...... [http://docs.unity3d.com/Documentation/ScriptReference/WebCamTexture.html](http://docs.unity3d.com/Documentation/ScriptReference/WebCamTexture.html)

# java - Play 2.0/2.1 for Java 和依赖注入

> ID：13358101
> 
> 赞同：9
> 
> 时间：2012-11-13T09:17:42.933
> 
> 标签：java, dependency-injection, playframework-2.0, guice, playframework-2.1

我们有一个新的 Play 2.0 项目，我们计划在添加一些复杂的第 3 方集成代码时引入 DI。

Play 2.0 有一个 Guice 插件，但它看起来在 2.1 时会过时，我有一种预感，即 2.1 不再那么远了。

[https://github.com/typesafehub/play-plugins/tree/master/guice](https://github.com/typesafehub/play-plugins/tree/master/guice)

Guice 是 Play 2.0/2.1 的安全选择还是我们应该考虑其他选择？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T10:03:15.860

我会选择 2.1 版本，以及来自 Global 对象的新控制器实例。

这是[文档](https://github.com/playframework/Play20/blob/master/documentation/manual/javaGuide/main/inject/JavaInjection.md)中的 Guice 示例：

```
 import play.GlobalSettings;

  import com.google.inject.Guice;
  import com.google.inject.Injector;

  public class Global extends GlobalSettings {

    private static final Injector INJECTOR = createInjector(); 

    @Override
    public <A> A getControllerInstance(Class<A> controllerClass) throws Exception {
      return INJECTOR.getInstance(controllerClass);
    }

    private static Injector createInjector() {
      return Guice.createInjector();
    }

  } 
```

你必须为这些控制器声明一个特殊的路由，特殊的`@`：

```
GET    /myUrl       @controllers.MyController.myMethod() 
```

你也可以看看这个使用 Spring 的演示：[https ://github.com/guillaumebort/play20-spring-demo](https://github.com/guillaumebort/play20-spring-demo)

# php - 重度 ddos 攻击下的 php fopen() 和 fwrite()

> ID：13358102
> 
> 赞同：1
> 
> 时间：2012-11-13T09:17:46.177
> 
> 标签：php, fopen, fwrite, ddos, file-pointer

在正常情况下，一切正常，我可以使用但在“重度”DDOS 攻击下写入和创建新文件`fopen()`，`fwrite()`当文件指针位于 0 时，我无法向 file.eg 写入任何内容。使用 "w" mod ，结果将是一个空白文件，但是通过使用 "a" 或 "c" mod ，如果文件不存在或为空，则不会写入任何内容（也只会创建一个空白文件），但如果文件有一些字符，它会在字符之后写入或分别清除和重写新字符。当 DDOS 停止时，一切都会好起来的。这是我用于测试的简单代码，有什么问题？我可以修复它吗？

我在 ubuntu 中使用 php5 和 apache 和 lighttpd ......

```
<?php
$fp = fopen('data.txt', 'w');
fwrite($fp, '1');
fputs($fp, '23');
fclose($fp);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T09:35:31.190

我理解这个问题的方式是，当有多个请求同时访问 .php 文件（以及您正在写入的文件）时，您在运行此代码时遇到问题。

现在，虽然它远非万无一失，但[flock()](http://php.net/flock)可以帮助解决这个问题。基本概念是在写入之前您会要求锁定文件，并且只有在您能够获得该文件的锁定时才写入文件，例如

```
$fp = fopen( $filename,"w"); // open it for WRITING ("w")
if (flock($fp, LOCK_EX | LOCK_NB)) {
    // do your file writes here

    // when you're done, 
    // flush your file writes to a file before unlocking
    fflush($fp);  
    // unlock the file
    flock($fp, LOCK_UN);
} else {
    // flock() returned false, no lock obtained
    print "Could not lock $filename!\n";
}
fclose($fp); 
```

[您可以从手册条目](http://php.net/flock)或[本文](http://www.tuxradar.com/practicalphp/8/11/0)中阅读更多详细信息。

# jsp - Struts 2 如何使用 validate 防止 nullpointerexceptions

> ID：13358107
> 
> 赞同：0
> 
> 时间：2012-11-13T09:17:52.387
> 
> 标签：jsp, struts2

我刚开始使用我的第一个 Struts 2 项目，目前正在使用注册操作。

注册进展顺利，除非您`Register.action`直接从 url 访问，当您这样做时，类变量没有被实例化（例如`String password`），并且在使用它们时我得到空指针异常。`Register.action`是处理`register.jsp`表单的动作。

有没有办法阻止用户在`Register.action`没有来自的情况下访问`register.jsp`？还是我需要对所有内容进行空检查？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T09:23:15.993

您可以使用验证功能来验证所需的变量[http://struts.apache.org/2.x/docs/validation.html](http://struts.apache.org/2.x/docs/validation.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T14:01:35.510

首先，您不应该直接访问 JSP 页面，除非在极少数情况下，使用 MVC 框架时：所有活动都应该通过一个动作发生。

其次，正如 Aleksandr 所说，验证应该通过框架处理，可以通过 XML、注释或基于 Java 的方式。在这种情况下，直接访问处理操作会导致验证失败，因为用户名/密码字段是必需的。

一旦验证失败（取决于您的配置，例如），框架将转发到`"input"`结果，可能是注册 JSP 页面。

# c++ - C++ 调试断言失败

> ID：13358108
> 
> 赞同：0
> 
> 时间：2012-11-13T09:18:12.180
> 
> 标签：c++, assertion

我已经编写了自己的列表类进行练习，这里是：

```
#pragma once

#include <iostream>

using namespace std;

// A linked node structure.
template <typename T>
struct LinkedNode
{
    T data;
    LinkedNode<T>* next;
    LinkedNode<T>* prev;
};

// Class linked list.
template <typename T>
class LinkedList
{
public:

    // Constructor
    LinkedList()
    {
        mFirst = 0;
        mLast = 0;
    }

    LinkedList(const LinkedList& rhs)
    {
        mFirst = 0;
        mLast = 0;

        // Get a pointer to the first node of rhs.
        LinkedNode<T>* current = rhs.mFirst;

        // While not at the end of the rhs linked list.
        while( current != 0 )
        {
            insertLast( current->data );
            current = current->next;
        }
    }

    // Destructor
    ~LinkedList()
    {
        destroy();
    }

    // Overload
    LinkedList& operator=(const LinkedList& rhs)
    {
        // Check for self assignment
        if ( this == &rhs )
            return *this;

        // Get a pointer to the first node of rhs.
        LinkedNode<T>* current = rhs.mFirst;

        // While not at the end of the rhs linked list.
        while( current != 0 )
        {
            insertLast( current->data );
            current = current->next;
        }

        // Chain assignments a = b = c = d
        return *this;
    }

    // Check if list is empty.
    bool isEmpty()
    {
        if( mFirst == 0 && mLast == 0 )
            return true;
        else
            return false;
    }

    // Return first and last nodes.
    LinkedNode<T>* getFirst() { return mFirst; };
    LinkedNode<T>* getLast()  { return mLast;  };

    void insertFirst(T tData);
    void insertLast(T tData);
    bool insertAfter(T tKey, T tData);
    void removeFirst();
    void removeLast();
    void remove(T removalCandidate);
    void destroy();

private:

    LinkedNode<T>* mFirst;
    LinkedNode<T>* mLast;
};

template <typename T>
bool LinkedList<T>::insertAfter(T tKey, T tData)
{
    if( isEmpty() ) return false;

    // Get a pointer to the front of the list
    LinkedNode<T>* current = mFirst;

    // Loop until we find the tKey (the value of the node to insert after)
    while( current->data != tKey )
    {
        // Hop to the next node.
        current = current->next;

        // Test if we reached the end, if we did we didn't find the node to insert after (tKey)
        if( current == 0 )
            return false;
    }

    // Allocate memory for the new node to insert.
    LinkedNode<T>* newNode = new LinkedNode<T>();
    newNode->data = tData;

    // Special case: Are we inserting after the last node?
    if( current == mLast )
    {
        newNode->next = 0;
        mLast = newNode;
    }
    // No, else link in new node after the current node.
    else
    {
        newNode->next = current->next;
        newNode->next->prev = newNode;
    }

    newNode->prev = current;
    current->next = newNode;

    return true;
}

template <typename T>
void LinkedList<T>::insertFirst(T tData)
{
    LinkedNode<T>* newNode = new LinkedNode<T>();
    newNode->data = tData;

    // If the list is empty, then this is the first and last node and doesn't have a previous pointer.
    if( isEmpty() )
        mLast = newNode;
    // If the list is not empty, the new node becomes the previous node of the current first node.
    else
        mFirst->prev = newNode;

    // The new node's next pointer is the old first pointer. May be null if this is the first node being added to the list.
    newNode->next = mFirst;

    //The new node becomes the first node.
    mFirst = newNode;   
}

template <typename T>
void LinkedList<T>::insertLast(T tData)
{
    LinkedNode<T>* newNode = new LinkedNode<T>();
    newNode->data = tData;

    if( isEmpty() )
        mFirst = newNode;
    else
        mLast->next = newNode;

    newNode->prev = mLast;

    mLast = newNode;
}

template <typename T>
void LinkedList<T>::removeFirst()
{

    if( !isEmpty() )
    {
        LinkedNode<T>* current = mFirst;

        if( mFirst == mLast )
        {
            mFirst->next = 0;
            mLast->prev = 0;
        }
        else
        {
            mFirst = current->next;
            mFirst->prev = 0;
        }

        delete current;
        current = 0;
    }   
}

template <typename T>
void LinkedList<T>::removeLast()
{
    if( !isEmpty() )
    {
        LinkedNode<T>* current = mLast;

        if( mFirst == mLast )
        {
            mFirst = 0;
            mLast = 0;
        }
        else
        {
            mLast = current->prev;
            mLast->next = 0;
        }

        delete current;
        current = 0;
    }
}

template <typename T>
void LinkedList<T>::remove(T removalCandidate)
{
    LinkedNode<T>* current = mFirst;

    if( isEmpty() )
    {
        cout << "List is empty!" << endl;
    }
    else
    {
        while( current->data != removalCandidate )
        {
            if( current->data == removalCandidate )
            {
                break;
            }
            current = current->next;
        }
    }

    if( current == mFirst )
        removeFirst();
    else if ( current == mLast )
        removeLast();
    else
    {
        // Create two linked nodes to access the next and prev nodes.
        LinkedNode<T>* left  = current->prev;
        LinkedNode<T>* right = current->next;

        left->next = right;
        right->prev = left;
    }

    delete current;
    current = 0;
}

template <typename T>
void LinkedList<T>::destroy()
{
    // Is there at least one node in the list?
    if( mFirst != 0 )
    {
        // Get a pointer to the first node.
        LinkedNode<T>* current = mFirst;

        // Loop until we reach the end of list.
        while( current != 0 )
        {
            // Save the current node.
            LinkedNode<T>* oldNode = current;

            // Move to next node.
            current = current->next;

            // Delete saved node.
            delete oldNode;
            oldNode = 0;
        }
    }

    mFirst = 0;
} 
```

然后我还编写了一个堆栈和队列类，我测试它们以查看字符串是否为回文。这一切都有效。但是，当它在列表类中运行 destroy 方法时，会在

```
delete oldNode; 
```

线。

队列代码：

```
#pragma once

#include <iostream>
#include "LinkedList.h"

#include <cassert>

template <typename T>
class Queue
{
public:
    Queue(){};

    ~Queue()
    {
        mList.destroy();
    }

    T& getFirst()
    {
        assert( !isEmpty() );
        return mList.getFirst()->data;
    }

    bool isEmpty( void )
    {
        return mList.isEmpty();
    }

    void push( T newElement )
    {
        mList.insertLast( newElement );
    }

    void pop()
    {
        mList.removeFirst();
    }

private:
    LinkedList<T> mList;
}; 
```

堆栈代码：

```
#pragma once

#include <iostream>
#include "LinkedList.h"

#include <cassert>

template <typename T>
class Stack
{
public:
    Stack(){};

    ~Stack()
    {
        mList.destroy();    
    }

    T& getTopItem()
    {
        // Throw error if list is empty.
        assert( !isEmpty() );

        return mList.getLast()->data;
    }

    bool isEmpty( void )
    {
        return mList.isEmpty(); 
    }

    void push( T newElement )
    {
        mList.insertLast( newElement );
    }

    void pop()
    {
        mList.removeLast();
    }

private:
    LinkedList<T> mList;
}; 
```

主要代码：

```
#include "Stack.h"
#include "Queue.h"
#include <iostream>
#include <string>
using namespace std;

int main()
{

    Stack<char> strStack;
    Queue<char> strQueue;

    cout << "Enter a string: ";
    string input = "";
    getline(cin, input);

    for( unsigned int i = 0; i < input.length(); ++i )
    {
        strStack.push( input[i] );
        strQueue.push( input[i] );
    }

    bool isPalindrome = true;

    // FIX PALINDROME AND ASSERTION FAIL

    for( unsigned int j = 0; j < input.length(); ++j )
    {
        if( strStack.getTopItem() != strQueue.getFirst() )
        {
            isPalindrome = false;
            break; // Exit for loop early.
        }

        // Get rid of next element out.
        strStack.pop();
        strQueue.pop();
    }

    cout << input << " is palindrome: " << isPalindrome << endl;
} 
```

我不知道为什么，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T09:43:37.840

问题出在`removeFirst`函数中：当您删除列表中的最后一个节点（即`mFirst == mLast`is `true`）时，您将节点链接指针设置为`0`，然后删除该节点。现在`mFirst`和都`mLast`指向一个已删除的节点！

不应将`next`and`prev`链接设置为`0`，而应将`mFirst`and设置`mLast`为`0`。就像你已经在`removeLast`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T09:23:51.677

因为您没有在 destroy() 方法返回之前将 mFirst 设置为 NULL (0)。如果你多次调用destroy()，你会因为尝试删除一个指针两次而遇到这种crt 断言。队列类在其析构函数中调用了mList.destroy，但是mList的析构函数会再次调用destroy。

# string - 在变量中传递子模式占位符时如何正确引用它？

> ID：13358110
> 
> 赞同：0
> 
> 时间：2012-11-13T09:18:11.997
> 
> 标签：string, perl, replace

在将子模式占位符“$1”传递给变量中的替换运算符“s///”时，我遇到了正确引用子模式占位符的问题。有人可以对此有所了解并建议我，我做错了什么吗？

我正在将一组 MS Word 文档导出为 HTML 文件。除了文件包含许多交叉引用并且需要修复这些以继续工作之外，这或多或少都可以。导出的引用采用 'href="../../somefilename.docx"' 的形式，需要将这些更改为 'href="somefilename.htm"' 以引用导出的 html 文件而不是原始 Word 文件.

示例文件 test.htm 可能如下所示：

```
<html>
<body>
<a href="../../filename1.docx" />
<a href="../../filename2.docx" />
<a href="../../filename3.docx" />
<a href="../../filename4.docx" />
</body>
</html> 
```

然后程序执行应该产生：

```
<html>
<body>
<a href="filename1.htm" />
<a href="filename2.htm" />
<a href="filename3.htm" />
<a href="filename4.htm" />
</body>
</html> 
```

我写了一个小 Perl 程序“ReplaceURLs”来完成这项工作。它工作正常，如果我“硬编码”模式和替换表达式（即，如果我将模式直接放入 s/.../.../g 语句） - 请参阅变体 1。但为了使其更灵活，我希望允许将这些表达式作为参数传递（即 s/$pattern/$subst/g），而我无法使其正常工作。我可以在变量中传递模式 - 请参见变体 2，但不能包含子模式引用 $1 的替换值。在变体 3 中，由于某种原因，替换值中的 $1 未被识别为子模式标记，而是被视为文字“$”。

```
#!/usr/bin/perl

$debug = TRUE;
$tgtfilename = $ARGV[0] || die("usage: ReplaceURLs.pl <filename> <url-pattern> <url-substvalue>");
$urlpattern  = $ARGV[1] || "href=\"\.\./\.\./(.*)\.docx\"";  # href="../../(filename).docx';
$urlsubstval = $ARGV[2] || "href=\"\$1.htm\"";  # href="$1.htm" --> href="(filename).htm";

print "replacing all occurences of pattern '$urlpattern' in file '$tgtfilename' with '$urlsubstval':\n";

# open & read $tgtfilename
open($ifh, '<', $tgtfilename) || die "unable to open $tgtfilename for reading: $!";
@slurp = <$ifh>; 
$oldstring = "@slurp";
close($ifh)  || die "can't close file $tgtfilename: $!";
if ($debug) { print $oldstring,"\n"; }

# look for $urlpattern and replace it with $urlsubstval:

# variant 1: works
#($newstring = $oldstring) =~ s!href=\"\.\./\.\./(.*)\.docx\"!href=\"$1.htm\"!g;

# variant 2: works
#($newstring = $oldstring) =~ s!$urlpattern!href=\"$1.htm\"!g; 

# variant : does not work - why?
($newstring = $oldstring) =~ s/$urlpattern/$urlsubstval/g; 

# save file
#open($ofh, '>', $tgtfilename) || die "unable to re-open $tgtfilename for writing";
#print $ofh $newstring,"\n";
#close($ofh) || die "can't close file $tgtfilename: $!";

# done
if ($debug) { print "result of replacement:","\n", $newstring,"\n"; } else { print "done."; }
__END__ 
```

如果我使用“perl ReplaceURLs.pl test.htm”运行它，我总是会得到：

```
<html>
 <body>
 <a href="$1.htm" />
 <a href="$1.htm" />
 <a href="$1.htm" />
 <a href="$1.htm" />
 </body>
 </html> 
```

而不是想要的结果。我如何需要引用或转义 $urlsubstval 中的“$1”才能使其正常工作？

M。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T10:05:01.510

见`perlop`。

```
Options are as with m// with the addition of the following replacement specific options:

     e   Evaluate the right side as an expression.
     ee  Evaluate the right side as a string then eval the result.
     r   Return substitution and leave the original string untouched. 
```

所以，相当模糊，

```
$ ls -1 | perl -pE '$str = q{"--$1--"}; s/(hah)/$str/ee;' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T23:47:23.067

仅当 $str 不包含任何干扰 Perl 语法的内容时，bobbogo 的解决方案才有效。但是因为我希望替换包含一些偶然看起来像 Perl 赋值的东西，即'href="$1.htm"'，这会产生警告'未引用的字符串 "href" 可能与未来的保留字冲突......'以及错误“在...处的替换迭代器中使用未初始化的值”，然后崩溃。

因此，我最终可行的解决方案是使用正确的字符串替换来构造命令，然后对构造的命令进行 eval(...) ：

```
#!/usr/bin/perl

$debug = 1;
$tgtfilename = $ARGV[0] || die("usage: ReplaceURLs.pl <filename> [ <url-pattern> [ <url-substvalue> ] ]");
$urlpattern  = $ARGV[1] || 'href="\.\./\.\./(.*)\.docx"';  # href="../../<filename>.docx"" in regexp format
$urlreplace  = $ARGV[2] || 'href="$1.htm"';  # href="$1.htm" --> href="<filename>.htm"; 

print "replacing all occurences of pattern '$urlpattern' in file '$tgtfilename' with '$urlreplace':\n";

# open & read $tgtfilename
open($ifh, '<', $tgtfilename) || die "unable to open $tgtfilename for reading: $!";
@slurp = <$ifh>; 
$oldstring = "@slurp";
close($ifh)  || die "can't close file $tgtfilename: $!";
if ($debug) { print $oldstring,"\n"; }

# construct command to look for $urlpattern and replace it with $urlreplace:
$newstring = $oldstring;
$cmd = '$newstring =~ s!'.$urlpattern.'!'.$urlreplace.'!g';
# execute it:
if ($debug) { print "cmd=", $cmd, "\n"; }
eval($cmd);

# done
if ($debug) { 
    print "result of replacement:","\n", $newstring,"\n"; 
} else { 
    # save to file:
    open($ofh, '>', $tgtfilename) || die "unable to re-open $tgtfilename for writing";
    print $ofh $newstring,"\n";
    close($ofh) || die "can't close file $tgtfilename: $!";
    print "done."; 
}
__END__ 
```

# jstl - JSTL：如何打印换行符

> ID：13358111
> 
> 赞同：1
> 
> 时间：2012-11-13T09:18:13.303
> 
> 标签：jstl, el

如何打印换行符（“\n”或“\r\n”或“\n\r”）。哪个是浏览器应该理解的？）使用 JSTL 还是 EL？我真的想打印一个换行符（不是 a `<BR>`），因为我需要将它放在 HTML 文件的 javascript 部分中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T12:25:23.697

为此尝试使用 xml 实体：`&#10;`换行符和`&#13;`回车符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T13:52:05.067

很简单，解决方案就是不使用 JSTL/EL

```
<% out.print("\n"); %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-23T15:57:12.693

您在主要帖子中提出了错误的问题，后来您在评论中添加了它（也许您应该编辑您的帖子以反映评论中的信息？）：

> 我需要在 // <![CDATA[ 之后放置一个 \n 以在actaul JS代码开始之前结束comemnt。

解决问题的最简单方法是`CDATA`使用这样的块注释注释掉：

```
/* <![CDATA[ */ 
```

这将允许您在同一行上继续您的代码，并且它不会成为注释的一部分。

## 例子

```
/* <![CDATA[ */ var foo = "var";alert( foo ); /* ]]> */ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-23T15:31:51.413

更简单：

```
<%= '\n' %> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-10T15:33:32.387

试试下面的概念，它会起作用。

```
<c:set var="String1" value="line1 line2 line3 line4" />
<c:set var="String2" value="${fn:split(String1, ' ')}" />
<c:set var= "new" value="<br />" />

<c:out value="${String2[0]}${new}" escapeXml="false" />
<c:out value="${String2[1]}${new}" escapeXml="false" />
<c:out value="${String2[2]}${new}" escapeXml="false" />
<c:out value="${String2[3]}${new}" escapeXml="false" /> 
```

# angularjs - 使用 angularjs 动态修改 DOM

> ID：13358115
> 
> 赞同：1
> 
> 时间：2012-11-13T09:18:31.683
> 
> 标签：angularjs

我是 angularjs 的新手，我正在尝试向 DOM 添加一些动态内容。例如，我想做的有点像 twitter。我有一个包含不同行的表，如果用户单击一行，则会加载一些详细信息 ajax 只是结束该行。我有一个用于行详细信息的模板（我想显示（和编译）只是结束单击的行。由于我不太了解如何通过单击触发指令，因此我尝试从控制器函数中执行此操作（用 ng-click 在行上）但我无法编译（我只有模板显示）。

如果有人知道如何做到这一点（最好是一种使用指令的方法，因为它似乎是正确的方法）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:11:07.040

由于不清楚您要添加的模板有多复杂，您可能不需要指令—— <tr> 元素上的 ng-repeat 可能就足够了。在 AngularJS 主页上，“Wire up a Backend”演示，tab list.html 展示了如何使用 ng-repeat 动态地将行添加到表中，并使用通过 query() 方法检索到的数据。这足以满足您的需求吗？

# windows-services - 在 windows 中创建 memcached 服务失败

> ID：13358116
> 
> 赞同：3
> 
> 时间：2012-11-13T09:18:34.130
> 
> 标签：windows-services, memcached

我正在使用`Memcached-for-Windows`，请参阅：

[http://blog.elijaa.org/index.php?post/2010/08/25/Memcached-1.4.5-for-Windows&similar](http://blog.elijaa.org/index.php?post/2010/08/25/Memcached-1.4.5-for-Windows&similar)

我试过使用：

```
sc create "memcached" binPath="C:/memcached/mem
cached.exe" start=auto 
```

但我无法创建 Windows 服务，也没有警告或错误，只是：

```
Creates a service entry in the registry and Service Database.
SYNTAX:
sc create [service name] [binPath= ] <option1> <option2>...
CREATE OPTIONS:
NOTE: The option name includes the equal sign.
type= <own|share|interact|kernel|filesys|rec>
   (default = own)
 start= <boot|system|auto|demand|disabled>
   (default = demand)
 error= <normal|severe|critical|ignore>
       (default = normal)
 binPath= <BinaryPathName>
 group= <LoadOrderGroup>
 tag= <yes|no>
 depend= <Dependencies(separated by / (forward slash))>
 obj= <AccountName|ObjectName>
       (default = LocalSystem)
 DisplayName= <display name>
 password= <password> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-04-09T13:45:15.037

要实现这一点，您甚至可以执行命令行，从而创建服务。首先通过命令行进入.exe文件所在的路径。

```
C:\Users\sireesh.yarlagadda>memcached.exe -d install 
```

执行此行后，您将看到为 memcached 创建的新服务

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-22T03:22:39.393

您收到错误的原因是 binPath= 之后必须有一个空格。这是 sc 的一个非常烦人的“功能”。在 start= 之后还需要一个空格。

```
sc create "memcached" binPath= "C:/memcached/memcached.exe" start= auto 
```

上面的命令不会给你语法错误。但是，我怀疑 memcached 仍然无法作为服务成功运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T16:29:10.773

memcached 不是本机 Windows 服务，因此您必须使用“服务包装器”程序来添加缺少的功能。[Microsoft 的免费 Srvany 实用程序](http://www.coretechnologies.com/WindowsServices/FAQ.html#WhatIsSrvany)应该可以解决问题，但也有几种商业替代方案可用。

（请注意，memcached 的某些 Windows 端口支持“-d”标志来自动安装和操作 memcached 作为本机 Windows 服务，但这似乎在 NorthScale 的版本中不可用......）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-18T02:37:32.570

您可以在 Windows 上构建 Memcached。

[http://vasil9v.tumblr.com/post/31921755331/compiling-memcached-on-cygwin-windows](http://vasil9v.tumblr.com/post/31921755331/compiling-memcached-on-cygwin-windows)

# grails - Grails Searchable 插件和 GORM 编组

> ID：13358117
> 
> 赞同：1
> 
> 时间：2012-11-13T09:18:36.363
> 
> 标签：grails, grails-orm, searchable, grails-searchable, searchable-plugin

我有一对一的关系（用户域中的hasOne和UserInfo域中的belongsTo）。当 BootStrap 正在执行时，我得到一个异常：

> org.compass.core.converter.ConversionException：试图为别名 [UserInfo] 编组一个空 id [id]

这行代码产生它：

```
def user = new User(....., new UserInfo()).save() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:11:40.423

根据 Peter Ledbrook 的说法，这是 Hibernate 和 Searchable 之间的重大冲突：http: [//jira.grails.org/browse/GPSEARCHABLE-19](http://jira.grails.org/browse/GPSEARCHABLE-19)

解决方案是在 Searchable 插件中关闭镜像并手动处理更新索引。

# javascript - javascript（包含在 jsp 中）未呈现

> ID：13358119
> 
> 赞同：0
> 
> 时间：2012-11-13T09:18:52.250
> 
> 标签：javascript, jsp, cytoscape-web

我正在尝试将 javascript-tags 包含到 jsp 文件中，但它没有被渲染。代码如下所示：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <title>Insert title here</title>
    <script language="JavaScript" src="AC_OETags.min.js"></script>
    <script language="JavaScript" src="json2.min.js"></script>
    <script language="JavaScript" src="cytoscapeweb.min.js"></script>  
    <script language="JavaScript">
        window.onload=function() {
                    // network data could alternatively be grabbed via ajax
             var xml = '\
            <graphml>\
            <key id="label" for="all" attr.name="label" attr.type="string"/>\
            <key id="weight" for="node" attr.name="weight" attr.type="double"/>\
            <graph edgedefault="undirected">\
                <node id="1"><data key="label">1</data><data key="weight">1.8</data></node>\
                <node id="2"><data key="label">2</data><data key="weight">1.1</data></node>\
                <node id="3"><data key="label">3</data><data key="weight">1.1</data></node>\
                <node id="4"><data key="label">4</data><data key="weight">1.1</data></node>\
                <node id="5"><data key="label">5</data><data key="weight">.3</data></node>\
                <node id="6"><data key="label">6</data><data key="weight">.3</data></node>\
                <edge source="1" target="2" ></edge>\
                <edge source="2" target="3" ></edge>\
                <edge source="4" target="5" ></edge>\
                <edge source="3" target="4" ></edge>\
                <edge source="6" target="5" ></edge>\
                <edge source="4" target="2" ></edge>\
                <edge source="6" target="1" ></edge>\
            </graph>\
            </graphml>\
            ';

                    // init and draw
                    // initialization options
                        var options = {
                            swfPath: "CytoscapeWeb",
                            flashInstallerPath: "playerProductInstall"
                        };

                        var vis = new org.cytoscapeweb.Visualization("cytoscapeweb", options);

                        var draw_options = {
                            // your data goes here
                            network: xml,

                            // show edge labels too
                            edgeLabelsVisible: false,

                            edgeTooltipsEnabled:true,

                            // let's try another layout
                            layout: "circle",

                            // hide pan zoom
                            panZoomControlVisible: true
                        };

                        vis.draw(draw_options);

                    };
    </script>

    <style>
        /* The Cytoscape Web container must have its dimensions set. */
        html, body { height: 100%; width: 100%; padding: 0; margin: 0; }
        #cytoscapeweb { width: 100%; height: 100%; }
    </style>
</head>
<body>
    <h1>The Graph</h1>
    <div id="cytoscapeweb">
         Cytoscape Web will replace the contents of this div with your graph.
    </div>
</body>
</html> 
```

它使用 Cytoscape Web 来呈现图形。如果我从普通的 html 文件运行它，一切都可以正常工作......

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:23:32.217

我必须包括这样的链接：

```
<script language="JavaScript" src="<%@ include file="AC_OETags.min.js" %>"></script>
<script language="JavaScript" src="<%@ include file="json2.min.js" %>"></script>
<script language="JavaScript" src="<%@ include file="cytoscapeweb.min.js" %>"></script> 
```

# ruby - Rails 3.2.8 是否与 Ruby 1.9.3 兼容？

> ID：13358122
> 
> 赞同：2
> 
> 时间：2012-11-13T09:19:26.343
> 
> 标签：ruby, ruby-on-rails-3.2

我一直在尝试遵循[官方的 Rails 指南](http://guides.rubyonrails.org/getting_started.html)并遇到了问题。在新项目中使用以下代码构建的代码似乎存在语法错误消息：

`rails generate scaffold Post name:string title:string content:text`.

很简单，对吧？我正在浏览官方 ruby​​onrails.org “制作博客”教程的第一页。但是当我去`http://localhost:3000/posts`我得到这个问题。

# 语法错误消息：

```
/projects/blog/app/controllers/posts_controller.rb:9: syntax error, unexpected ':', expecting '}'
format.json { render json: @posts }
                          ^ 
```

在[步骤 6.3](http://guides.rubyonrails.org/getting_started.html#working-with-posts-in-the-browser)中，我应该看到一个简单的“列出帖子”页面，大概没有博客条目。

# 我的 posts_controller.rb 文件：

```
class PostsController < ApplicationController
  # GET /posts
  # GET /posts.json
  def index
    @posts = Post.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @posts }
    end
  end
...(continued. This was all generated via a scaffold.) 
```

# 我的设置：

指南[说](http://guides.rubyonrails.org/getting_started.html)：

> 本指南基于 Rails 3.2。此处显示的某些代码不适用于早期版本的 Rails。

我的`rails -v`说：

`Rails 3.2.8`

[rubyonrails.org](http://rubyonrails.org/download)说：

> 我们推荐 Ruby 1.9.3 与 Rails 一起使用。Rails 3.2 是最后一个支持 Ruby 1.8 的版本。不支持 Ruby 1.8.6 及更早版本，1.9.1 版也不支持。

我的`ruby -v`说：

`ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-darwin12.2.0]`

我总是收到 SyntaxError 消息，即使在尝试了不同版本的 Ruby（使用 rbenv）之后也是如此。以下是我尝试过的版本：

`1.9.2-p290`

`1.9.2-p320`

`1.9.3-p194 (latest)`

# 解决方法：

更改`format.json { render json: @post }`以`format.json { render :json => @post }`解决问题。

# 我的问题：

为什么在最新版本的 Ruby 和最新版本的 Rails 中，当版本应该兼容时，我会收到 SyntaxError ？此时在官方教程的第一页，我什至还没有写任何ruby。`posts_controller.rb`我文件中的这些行是由最新的稳定版 Rails*生成的，语法已经过时了？*Rails 还没有更新到使用 Ruby 语法回到 1.9.2 版？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T19:20:18.553

在您的 Gemfile 中`ruby "1.9.3"`，在源代码下方指定 ruby​​ 版本。看看能不能解决。

**编辑**我在部署到 heroku 并将其添加到我的 Gemfile 时遇到了问题，修复了错误。显然它试图使用 1.8.7 而不是 1.9.3，即使 heroku 指定的 ruby​​ 版本是 1.9.3

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T19:13:53.953

介意把这个“puts RUBY_VERSION”放在你的posts_controller的顶部吗？我很好奇是否会选择正确的版本。当您启动 Rails 服务器时，它应该将版本号输出到控制台。

Rails 绝对是 1.9.3 友好的。1.9.3 并没有破坏我所知道的任何东西，并且由于 Rails 与 1.8 兼容，它应该可以正常工作。

# windows-server-2008 - 使用 RewriteRules.config 将非 www 重定向到 www

> ID：13358123
> 
> 赞同：0
> 
> 时间：2012-11-13T09:19:28.793
> 
> 标签：windows-server-2008, umbraco

想将 example.com 重定向到 www.example.com 并将 example.de 重定向到 www.example.de

```
<rule name="CanonicalHostNameRuleCOM" stopProcessing="true">
      <match url="(.*)" />
      <conditions>
        <add input="{HTTP_HOST}" negate="false" pattern="^example\.com$" />
      </conditions>
          <action type="Redirect" url="http://www.example.com/{R:1}" redirectType="Permanent" />
        </rule> 
<rule name="CanonicalHostNameRuleDE" stopProcessing="true">
      <match url="(.*)" />
      <conditions>
        <add input="{HTTP_HOST}" negate="false" pattern="^example\.de$" />
      </conditions>
          <action type="Redirect" url="http://www.example.de/{R:1}" redirectType="Permanent" />
        </rule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T09:58:00.050

尝试关注 .COM 和 .DE

**.com**

```
<rule name="Redirect to WWW COM" stopProcessing="true"> 
  <match url=".*" /> 
  <conditions> 
    <add input="{HTTP_HOST}" pattern="^example.com$" /> 
  </conditions> 
  <action type="Redirect" url="http://www.example.com/{R:0}" redirectType="Permanent" /> 
</rule> 
```

**.de**

```
<rule name="Redirect to WWW DE" stopProcessing="true"> 
  <match url=".*" /> 
  <conditions> 
    <add input="{HTTP_HOST}" pattern="^example.de$" /> 
  </conditions> 
  <action type="Redirect" url="http://www.example.de/{R:0}" redirectType="Permanent" /> 
</rule> 
```

我希望这会有所帮助

# ruby-on-rails - Rails ElasticSearch Tire - 同时过滤多个参数的嵌套字段

> ID：13358125
> 
> 赞同：3
> 
> 时间：2012-11-13T09:19:46.613
> 
> 标签：ruby-on-rails, elasticsearch, tire

我有一个电影模型和一个包含电影流派方面的搜索页面。可以选择搜索页面上每个方面附近的复选框。我将检查的方面术语列表传递给控制器​​，并且我想过滤电影集合以仅包含那些使用复选框选择了流派的电影。

我的带有索引和搜索定义的模型是：

```
class Movie < ActiveRecord::Base
  include Tire::Model::Search
  include Tire::Model::Callbacks

  mapping do
    indexes :id,           :index    => :not_analyzed
    indexes :title,        :analyzer => 'snowball', :boost => 100
    indexes :description,  :analyzer => 'snowball'
    indexes :genres do
      indexes :title, analyzer: 'keyword'
    end
  end

  def to_indexed_json
    to_json( include: { genres: { only: [:title, :id] } } )
  end

  def self.search(params={})
    tire.search(page: params[:page], per_page: 5, load: false) do
      query do
        all
        #boolean do
        #  must { string params[:query], :default_field => 'title' }
        #end
      end

      #filter 'genres.title', :values => params[:genres] if params[:genres].present?
      filter :terms, 'genres.title' => ['Genre 1', 'Genre 2', 'Genre 3']

      facet 'global-genres', global: true do
        terms 'genres.title', size: 15
      end
      facet 'scoped-genres' do
        terms 'genres.title', size: 15
      end
    end
  end

  attr_accessible :description, :title, :year, :genres

  has_and_belongs_to_many :genres, :uniq => true

end 
```

我不确定这部分应该如何重写：

```
#filter 'genres.title', :values => params[:genres] if params[:genres].present?
filter :terms, 'genres.title' => ['Genre 1', 'Genre 2', 'Genre 3']
#filter 'genres.id', :values => [1, 2, 3] 
```

稍后，我将传递流派列表或流派 ID 作为参数，我需要对它们进行过滤。

```
filter :terms, 'genres.title' => ['Genre 1', 'Genre 2', 'Genre 3'] 
```

它过滤到具有“流派 1”或“流派 2”或“流派 3”的电影，我需要这些流派具有 AND 逻辑。

我怎样才能正确地做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T12:11:27.463

您需要使用 设置过滤器`execution: 'and'`。我已将此作为示例[添加到](https://github.com/karmi/tire/commit/0e10a1c)*轮胎*集成测试套件中：

```
s = Tire.search('articles-test') do
  query { all }
  filter :terms, :tags => ['ruby', 'python'], :execution => 'and'
end 
```

# wcf - 使用 msbuild 构建 wcf 项目

> ID：13358127
> 
> 赞同：0
> 
> 时间：2012-11-13T09:19:50.463
> 
> 标签：wcf, msbuild

我正在尝试使用我的自定义 MSBuild 脚本构建一个 WCf 项目。

在 PropertyGroup 我有

```
 <DeployServicesRoot>$(MSBuildProjectDirectory)\$(Configuration)\Services</DeployServicesRoot>
 <IntermediateRoot>$(DeployServicesRoot)\obj</IntermediateRoot>
 <DevelopmentSymbols>DEVELOPMENT;DEBUG</DevelopmentSymbols> 
```

在项目组中

```
<Solution Include="..\..\src\WCFProj\WCFProj.csproj" />
<DeployFiles Include="$(DeployServicesRoot)\**\*.*" />
<IntermediateFiles Include="$(IntermediateRoot)\**\*.*" /> 
```

和 MSBuild 任务：

```
<MSBuild Projects="@(Solution)" Properties="DefineConstants=$(DevelopmentSymbols);OutputPath=$(DeployServicesRoot)\bin\;BaseIntermediateOutputPath=$(IntermediateRoot)\Services\;DeployOnBuild=true;DeployTarget=Package"/> 
```

问题是，部署的包位于 obj 子目录中，而不是在 bin 中。在 bin 中只有 *.dll 文件，没有 WCF *.svc 和转换后的 web.config。是否有任何可用的附加参数来设置 MSBuild 任务的输出包路径？我知道我可以使用复制任务来做到这一点，但我很好奇还有其他（更简单的？）解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:18:59.320

在 MSBuild 属性中，我必须在 DeployTarget 之后添加 _PackageTempDir=$(DeployServicesRoot)"。

# xsd - 如何定义不同 XSD 文件之间的一对多关系，为什么 xs:extends 在这种情况下不起作用？

> ID：13358130
> 
> 赞同：0
> 
> 时间：2012-11-13T09:20:04.207
> 
> 标签：xsd, visual-studio-2012, one-to-many

在过去的几天里，我一直在开发一些 xml 模式文件，并了解了一个特定的元素来扩展 simpletypes 和 complextype 元素。

我目前正在使用visual studio 2012专业版，并且我目前正在测试这些文件之间的XSD文件关系（我敢说父子关系，或一对多关系），例如（我正在使用来自Google DFA API的对象） ：

```
RichMediaAsset
∟ RichMediaExpandingHtmlAsset
∟ RichMediaExpandingHtmlAsset
∟ RichMediaFloatingHtmlAsset
... 
```

所有这些类都从 RichMediaAsset（它是基础或抽象）“扩展”或“继承”。我在 XSD 中将 RichMediaAsset 定义为以下内容

```
<?xml version="1.0" standalone="yes"?>
<xs:schema id="RedirectCreativeBase" xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
  <!-- simpleTypes=primitive -->
  <!-- extBooleanMethodPrefix=is -->
  <xs:complexType name="RichMediaAssetWrapper" abstract="true">
    <xs:sequence>
      <xs:element name="fileName" type="xs:string" minOccurs="0" />
      <xs:element name="fileSize" type="xs:int" minOccurs="0" />
      <xs:element name="id" type="xs:long" minOccurs="0" />
      <xs:element name="parentAssetId" type="xs:long" minOccurs="0" />
      <xs:element name="type" type="xs:string" minOccurs="0" />
    </xs:sequence>
  </xs:complexType>
</xs:schema> 
```

我定义了第二个文件 RichMediaExpandingHtmlAsset 如下：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema id="RichMediaExpandingHtmlAssetWrapper" xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:include schemaLocation="./RichMediaAsset.xsd"/>
  <xs:complexType name="RichMediaExpandingHtmlAssetWrapper" abstract="false" >
    <xs:extension base="RichMediaAssetWrapper"> <!-- Not happy here -->
      <xs:sequence>
         <!-- content to be included,extending RichMediaAsset's complex type called RichMediaAssetWrapper -->
      </xs:sequence>
    </xs:extension>
  </xs:complexType>
</xs:schema> 
```

我提到的VS2012不满意的部分定义如下：

```
Warning 1   The 'http://www.w3.org/2001/XMLSchema:extension' element is not supported in this context.  C:\eclipse\Workspace\aem_adservices_google_dfa\aem.adservices.google.dfa\xsd\Creative\RichMediaExpandingHtmlAsset.xsd   5   6   Miscellaneous Files
Warning 2   The element 'complexType' in namespace 'http://www.w3.org/2001/XMLSchema' has invalid child element 'extension' in namespace 'http://www.w3.org/2001/XMLSchema'. List of possible elements expected: 'annotation, simpleContent, complexContent, group, all, choice, sequence, attribute, attributeGroup, anyAttribute' in namespace 'http://www.w3.org/2001/XMLSchema'.    C:\eclipse\Workspace\aem_adservices_google_dfa\aem.adservices.google.dfa\xsd\Creative\RichMediaExpandingHtmlAsset.xsd   5   6   Miscellaneous Files 
```

现在的问题是：这可能是 2012 年的错误吗，我是否犯了错误，这是否根本不受支持（即使我检查了 w3schools.com 上的用法示例），还是有更好的方法让我定义一对多关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T09:50:43.947

我发现我的 XSD 存在问题。它实际上缺少一个标签。在这些情况下，必须定义 or 以便分别对仅包含混合内容或元素的复杂/简单类型定义扩展或限制`xs:complexContent`。`xs:simpleContent`

这是我的解决方案，我的代码中的错误也消失了。

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema id="RichMediaExpandingHtmlAssetWrapper" xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:include schemaLocation="./RichMediaAsset.xsd"/>
  <xs:complexType name="RichMediaExpandingHtmlAssetWrapper" abstract="false" >
    <xs:complexContent>
      <xs:extension base="RichMediaAssetWrapper">
        <xs:sequence>
          ...
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
</xs:schema> 
```

来源：[ComplexContent](http://www.w3schools.com/schema/el_complexcontent.asp)；[简单内容](http://www.w3schools.com/schema/el_simpleContent.asp)

# c++ - 两个编译器的一个makefile

> ID：13358131
> 
> 赞同：13
> 
> 时间：2012-11-13T09:20:09.650
> 
> 标签：c++, c, g++, cross-compiling, gnu-make

我有两个makefile，用于本机编译和交叉编译。它们之间的唯一区别是编译器名称：

```
# 生成文件
CC = g++
...

```

```
#makefile-cc
CC = arm-linux-gnueabihf-g++
...

```

要进行本机编译，我执行`make`，要进行交叉编译，我执行`make -f makefile-cc`. 我想要一个`makefile`，它应该`make`用于本机编译和`make cross`交叉编译。执行此操作的正确语法是什么，例如：

```
# makefile（类 C 的伪代码）
如果交叉
    CC = arm-linux-gnueabihf-g++
别的
    CC = g++

```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-13T09:31:13.420

您可以使用语法*target:assignment*[为特定目标分配/附加变量](https://www.gnu.org/software/make/manual/html_node/Target_002dspecific.html#Target_002dspecific)。这是一个例子：

 *```
native: CC=cc
native:
    echo $(CC)

cross: CC=arm-linux-gnueabihf-g++
cross:
    echo $(CC) 
```

打电话

```
make native 
```

（或只是`make`，这里）打印

```
echo cc
cc 
```

并打电话

```
make cross 
```

印刷

```
echo arm-linux-gnueabihf-g++
arm-linux-gnueabihf-g++ 
```

所以你可以使用你通常的编译行和 $(CC)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-13T09:34:03.750

你可以传递参数来制作。
例如`make TARGET=native`，`make TARGET=cross`然后使用它

```
ifeq ($(TARGET),cross)
        CC = arm-linux-gnueabihf-g++
else
        CC = g++
endif 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T09:53:58.320

不完全是您想要的，但您可以将`CC`其作为环境变量读取。考虑以下几点`Makefile`：

```
all:
        echo $(CC) 
```

你可以调用它`CC=g++ make`给你：

```
echo g++
g++ 
```

或调用它`CC=arm-linux-gnueabihf-g++ make`给你：

```
echo arm-linux-gnueabihf-g++
arm-linux-gnueabihf-g++ 
```

最好的部分是你可以将它们分别放在你的`~/.bashrc`as`export CC=g++`和`export CC=arm-linux-gnueabihf-g++`中，然后用 only 进行调用`make`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T11:36:34.643

另一种比 gnu make way 更便携的`ifeq`方法是：

`CROSS`包含`arm-linux-gnueabihf-`或为空。

```
CC=$(CROSS)g++ 
```

CC 将包含展开结果。*

# registry - 从 wso2 注册表获取已部署的服务端点 url

> ID：13358133
> 
> 赞同：3
> 
> 时间：2012-11-13T09:20:18.277
> 
> 标签：registry, wso2, wso2carbon, application-server

有没有办法从应用服务器上的注册表中获取部署的服务端点 url。当我在应用程序服务器上部署服务时，它会出现在 Governance Registry 管理控制台服务列表中，并且有关其端点的所有信息也是可用的。但我需要在应用程序服务器上以编程方式获取端点 url 以在服务之间进行通信。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T08:29:23.057

您可以使用治理 API 方法获取端点数据。请参考 [1] 如何使用用户治理 API 来获取端点数据。

1.  [http://wso2.org/library/articles/2010/09/governance-api-wso2-governance-registry](http://wso2.org/library/articles/2010/09/governance-api-wso2-governance-registry)

# java - 使用 Java 在电子邮件正文中发送图像

> ID：13358134
> 
> 赞同：7
> 
> 时间：2012-11-13T09:20:38.523
> 
> 标签：java, gmail, jakarta-mail

我已经能够使用 Java 在电子邮件中将图像作为附件发送。我现在正尝试在电子邮件正文中发送相同的图像，如下所示：

```
public static void main(String[] args) throws NoSuchProviderException, MessagingException {
    System.out.println("Sending mail...");
    Properties props = new Properties();
    props.setProperty("mail.smtp.starttls.enable", "true");
    props.setProperty("mail.transport.protocol", "smtp");
    props.setProperty("mail.smtp.auth", "true");
    props.setProperty("mail.smtp.host", "smtp.gmail.com");

props.setProperty("mail.smtp.port", "587");
    props.setProperty("mail.smtp.user", "mysusername");
    props.setProperty("mail.smtp.password", "mypassword");

    Session mailSession = Session.getDefaultInstance(props, null);
    mailSession.setDebug(true);
    Transport transport = mailSession.getTransport();

    MimeMessage message = new MimeMessage(mailSession);
    message.setSubject("HTML  mail with images");
    message.setFrom(new InternetAddress("myaddress@gmail.com"));
    message.setContent
      ("<h1>This is a test</h1>" 
       + "<img src=\"C:/Users/pc/Desktop/Photos/Shammah.PNG\">", 
       "text/html");
    message.addRecipient(Message.RecipientType.TO,
         new InternetAddress("receiver@simbatech.biz"));

    transport.connect();//This is line 46
    transport.sendMessage(message,
        message.getRecipients(Message.RecipientType.TO));
    transport.close();
} 
```

我得到这个输出：

```
Sending mail...
DEBUG: setDebug: JavaMail version 1.4ea
DEBUG: getProvider() returning        javax.mail.Provider[TRANSPORT,smtp,com.sun.mail.smtp.SMTPTransport,Sun Microsystems, Inc]
DEBUG SMTP: useEhlo true, useAuth true
Exception in thread "main" javax.mail.AuthenticationFailedException
at javax.mail.Service.connect(Service.java:306)
at javax.mail.Service.connect(Service.java:156)
at javax.mail.Service.connect(Service.java:105)
at image.in.body.ImageInBody.main(ImageInBody.java:46)
Java Result: 1 
```

为什么在我为我的 Gmail 帐户使用正确的用户名和密码时身份验证失败？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-12T12:37:49.760

请参阅下面的代码可能会使用完整

```
class SimpleMail2 {
    public static void main(String[] args) throws Exception{

        System.out.println("Sending mail...");
        Properties props = new Properties();
        props.put("mail.smtp.host", "smtp.gmail.com");
        props.put("mail.smtp.socketFactory.port", "465");
        props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
        props.put("mail.smtp.auth", "true");
        props.put("mail.smtp.port", "465");

        Session mailSession = Session.getDefaultInstance(props,
        new javax.mail.Authenticator() {
            protected PasswordAuthentication getPasswordAuthentication() {
                return new PasswordAuthentication("sender@gmail.com","password");
            }
        });
        Message message = new MimeMessage(mailSession);
        message.setFrom(new InternetAddress("sender@gmail.com"));
        message.setSubject("HTML  mail with images");
        message.setRecipient(Message.RecipientType.TO, new InternetAddress("receiver@gmail.com"));
        message.setText("Dear Mail Crawler," + "\n\n No spam to my email, please!");

        MimeMultipart multipart = new MimeMultipart("related");
        BodyPart messageBodyPart = new MimeBodyPart();
        String htmlText = "<H1>Raghava chary</H1>" + "<img src=\"cid:image\">";
        messageBodyPart.setContent(htmlText, "text/html");
        multipart.addBodyPart(messageBodyPart);
        try {
            messageBodyPart = new MimeBodyPart();
            InputStream imageStream = SimpleMail2.class.getClass().getResourceAsStream("/ab/log.gif");
            DataSource fds = new ByteArrayDataSource(IOUtils.toByteArray(imageStream), "image/gif");
            messageBodyPart.setDataHandler(new DataHandler(fds));
            messageBodyPart.setHeader("Content-ID","<image>");
            multipart.addBodyPart(messageBodyPart);
            message.setContent(multipart);
            Transport.send(message);
            System.out.println("Done");
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

并添加 org.apache.commons.io.jar.zip 和 axiom-api-1.2.6.jar 并添加 mail.jar 和 activation.jar

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-13T09:58:45.357

您需要像这样声明您的图像：

```
<img src="cid:unique-name-or-id" /> 
```

将图像加载为 MimeBodyPart，并将 unique-name-or-id 与 MimeBodyPart 的 FileName 匹配。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T09:45:26.433

使用内联内容配置创建一个多部分正文，并在 base64 中对您的图像进行编码。

检查此 SO 以获取一些详细信息（在 Python 中）[发送包含嵌入图像的多部分 html 电子邮件](https://stackoverflow.com/questions/920910/python-sending-multipart-html-emails-which-contain-embedded-images)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T18:51:15.070

首先，查看这个 JavaMail FAQ entry of [common errors](http://www.oracle.com/technetwork/java/javamail/faq/index.html#commonmistakes)。

然后，请参阅此 JavaMail FAQ 条目以及[连接到 Gmail 的示例代码](http://www.oracle.com/technetwork/java/javamail/faq/index.html#gmail)。

请注意，没有“mail.smtp.password”属性。由于您没有提供密码，因此身份验证失败。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-22T20:39:54.703

另一个常见的错误（今天咬我）：图像的 Content-ID 标头必须在 <尖括号> 中。不这样做会破坏一些邮件程序（gmail，OS X 10.10），但不会破坏其他邮件程序（Outlook，iOS <= 8.1）。

# android - ActionBar 底部对齐选项卡图标

> ID：13358135
> 
> 赞同：1
> 
> 时间：2012-11-13T09:20:51.190
> 
> 标签：android, android-actionbar, actionbarsherlock

我想底部对齐标签图标，但我不知道如何实现它:(我已经尝试过`setCustomView`但没有成功。虽然我的自定义布局设置了宽度和高度，`match_parent`但它不会填充整个标签，因此我不能底部对齐我的内容。

这里有两张图片来说明什么

我想实现

![这就是我要的](../Images/cc8b2a6008ca08b0160d445ba1930829.png)

以及我实际得到的

![这就是我得到的](../Images/a07a4ce7d7923e2d9ca5a5dbe78a4a7c.png)

这是自定义选项卡视图布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
          android:background="#f00">
    <ImageView
        android:id="@+id/icon"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:scaleType="fitCenter"/>
</LinearLayout> 
```

我为调试添加了红色背景。它实际上只显示在图标周围，而不是整个选项卡。

选项卡背景的 9-patch 图像为：

![在此处输入图像描述](../Images/28c6f09084250f9859d4202f4a47402e.png)

所以填充区域应该是整个图像......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T13:54:33.113

如果我没记错的话，您正在使用一些 9patch 图像（可能使用 ABS 主题生成器生成）。9 个补丁图像将确定该区域的绘制位置，并且默认情况下会为其添加一些填充。

想了解更多关于 9 补丁以及如何处理“可绘制区域”的信息，请查看这个[网站](http://radleymarx.com/blog/simple-guide-to-9-patch/)

**编辑** 万一您懒得看链接中的文章，9patch 图像不仅可以制作可缩放的背景图像，还可以确定其子项内容的“填充区域”。如果**填充区域**设计为小于整个图像本身，则将添加填充以填充其余部分，从而产生您现在在选项卡上看到的内容。

# jquery - 如何将 data-toggle="dropdown" 添加到锚点

> ID：13358138
> 
> 赞同：15
> 
> 时间：2012-11-13T09:20:59.160
> 
> 标签：jquery

所以我有一个看起来像的锚

```
<a href="http://something.com/something/" class="dropdown-toggle">something</a> 
```

我想添加

```
data-toggle="dropdown" 
```

所以它最终看起来像

```
<a href="http://something.com/something/" class="dropdown-toggle" data-toggle="dropdown">something</a> 
```

我试过

```
$(".dropdown-toggle").data("toggle", "dropdown"); 
```

但它并没有增加任何欢呼

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-11-13T09:21:56.100

您可以使用[**attr()**](http://api.jquery.com/attr/) jquery 方法添加属性。

**[现场演示](http://jsfiddle.net/8xnFh/)**

```
$(".dropdown-toggle").attr("data-toggle", "dropdown"); 
```

# c# - ValidationMessageFor mvc 仅使用小数

> ID：13358141
> 
> 赞同：0
> 
> 时间：2012-11-13T09:21:06.180
> 
> 标签：c#, asp.net-mvc, entity-framework, validation

我有一个带有 EF 的 ASP.NET MVC 4 项目，并且在我的某些字段的视图中存在验证问题。我注意到 ValidationMessageFor 仅适用于我的十进制字段

```
<script type="text/javascript" language="javascript" src="@Url.Content("~/Scripts/jquery.validate.min.js")"></script>
<script type="text/javascript" language="javascript" src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")"></script>
@using (Html.BeginForm("Create", "Order", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
@Html.ValidationSummary(true)

<div class="editor-label">
    @Html.Label("Adresa livrare")
</div>
<div class="editor-field">
    @Html.TextBoxFor(model => model.adresa, new { maxlength = "80" }) @*string - nvarchar*@
    @Html.ValidationMessageFor(model => model.adresa)
</div>
<div class="editor-label">
    @Html.Label("Curs Euro")
</div>
<div class="editor-field">
    @Html.TextBoxFor(model => model.curs_euro, new { onkeypress = "return numericOnly(this)", id = "euro", maxlength = 9 }) @*decimal - decimal(10,2)*@
    @Html.ValidationMessageFor(model => model.curs_euro, Resources.Global.strCursEuroV)
</div> 
```

**问：**为什么验证不适用于字符串字段？

我试图装饰我的模型设计师并添加一个 [Required] 但它搞砸了我所有的项目。

```
[EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
[DataMemberAttribute()]
[Required(ErrorMessage = "validation messeage...")]
public global::System.String adresa 
```

HTML

```
 <div class="editor-label">
        <label for="Adresa_livrare">Adresa livrare</label>
    </div>
    <div class="editor-field">
        <input id="adresa" maxlength="80" name="adresa" type="text" value="" />
        <span class="field-validation-valid" data-valmsg-for="adresa" data-valmsg-replace="true"></span>
    </div>
    <div class="editor-label">
        <label for="Curs_Euro">Curs Euro</label>
    </div>
    <div class="editor-field">
        <input data-val="true" data-val-number="The field curs_euro must be a number." data-val-required="The curs_euro field is required." id="euro" maxlength="9" name="curs_euro" onkeypress="return numericOnly(this)" type="text" value="" />
        <span class="field-validation-valid" data-valmsg-for="curs_euro" data-valmsg-replace="false">Introduceti cursul Euro</span>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:09:55.247

```
 <div class="editor-label">
        @Html.Label("Adresa livrare")
    </div>
    <div class="editor-field">
        @Html.TextBoxFor(model => model.adresa, new { minlength = 1, maxlength = 80 })
        @Html.ValidationMessageFor(model => model.adresa, "Adresa de livrare este    obligatorie")
    </div>//You need to set a minimum number of characters 
```

# mysql - 是否可以每天在同一张桌子上添加一列？

> ID：13358144
> 
> 赞同：2
> 
> 时间：2012-11-13T09:21:19.317
> 
> 标签：mysql

我有一张桌子，每天都会更新它的行和列。该行的更新描述了添加的新记录。该列的更新描述了记录的每日状态。例如：我有这些列：`name`, `description`, `2012-11-10`, `2012-11-11`, `2012-11-12`, `2012-11-13`.

`2012-11-10`, `2012-11-11`,列显示每日状态`2012-11-12`，`2012-11-13`并且每天都会增加，显示当天的状态。而且行也会增加，因为每天都会有新的记录。这在mysql中可能吗？还是有其他建议？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T09:24:08.577

可能：是的。一个好的解决方案：**可能不是！**

您应该考虑[规范化](http://en.wikipedia.org/wiki/Database_normalization)您的数据：

```
table: records
 - ID (key)
 - name
 - description

table: record_history
 - record_ID (composite key part)
 - date (composite key part)
 - status 
```

# javascript - 在 jquery 的表格行中执行单击或焦点

> ID：13358147
> 
> 赞同：0
> 
> 时间：2012-11-13T09:21:40.563
> 
> 标签：javascript, jquery, html, focus

请考虑以下代码：

我有一张这样的桌子：

```
<table class="ArrowNav" cellspacing="0" rules="all" border="1" id="GridView1" style="height:302px;width:692px;border-collapse:collapse;">
    <tr>
        <th class="Id" scope="col">Id</th><th scope="col">"Group</th><th scope="col">Value</th>
    </tr><tr>
        <td align="center" valign="middle">1</td><td align="center" valign="middle">1</td><td align="center" valign="middle">100</td>
    </tr><tr>
        <td align="center" valign="middle">2</td><td align="center" valign="middle">1</td><td align="center" valign="middle">120</td>
    </tr><tr>
        <td align="center" valign="middle">3</td><td align="center" valign="middle">1</td><td align="center" valign="middle">100</td>
    </tr><tr>
        <td align="center" valign="middle">4</td><td align="center" valign="middle">2</td><td align="center" valign="middle">90</td>
    </tr><tr>
        <td align="center" valign="middle">5</td><td align="center" valign="middle">2</td><td align="center" valign="middle">105</td>
    </tr><tr>
        <td align="center" valign="middle">6</td><td align="center" valign="middle">3</td><td align="center" valign="middle">300</td>
    </tr><tr>
        <td align="center" valign="middle">7</td><td align="center" valign="middle">4</td><td align="center" valign="middle">123</td>
    </tr><tr>
        <td align="center" valign="middle">8</td><td align="center" valign="middle">4</td><td align="center" valign="middle">110</td>
    </tr><tr>
        <td align="center" valign="middle">9</td><td align="center" valign="middle">5</td><td align="center" valign="middle">100</td>
    </tr><tr>
        <td align="center" valign="middle">10</td><td align="center" valign="middle">5</td><td align="center" valign="middle">110</td>
    </tr>
</table> 
```

我编写了一个用于在行之间导航的脚本：

```
var SelectedRowIndex;

    $(document).ready(function () {
        $('.ArrowNav tr').first().css('background-color', 'yellow');
        //            $('.ArrowNav tr').first().focus();
        $('.ArrowNav tr:first').first().trigger('click');
        SelectedRow = 0;

        function ResetAllRowColor() {
            $('.ArrowNav tr').each(function () {
                $(this).css('background-color', 'white');
            });
        }

        $('.ArrowNav tr').on('keyup', function (e) {
            ResetAllRowColor();
            switch (e.keyCode) {
                case 40: //Down
                    SelectedRow++;
                    $('.ArrowNav tr').eq(SelectedRow).css('background-color', 'yellow');
                    break;
                case 38: //Up
                    SelectedRow--;
                    $('.ArrowNav tr').eq(SelectedRow).css('background-color', 'yellow');
                    break;
            }
        });

        $('.ArrowNav tr').on('click', function () {
            alert('a');
        });
    }); 
```

问题是导航表必须关注它。我为设置焦点编写了这段代码：`$('.ArrowNav tr').first().focus();`但它没有用。我也写了这段代码：`$('.ArrowNav tr:first').first().trigger('click');`但是行上的单击事件不会触发。我想在页面加载中我可以在行之间导航购买箭头键。哪里有问题？

[jsfiddle](http://jsfiddle.net/8esyG/)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T09:26:23.127

范围和选择问题。

在点击函数被定义之前不能调用点击事件。

```
$('.ArrowNav tr').on('click', function () {
    alert('a');
});
$('.ArrowNav tr').eq(0).click(); 
```

该`keys`事件`up/down`无法绑定到表格，因为表格无法获得焦点。文档立即以焦点开始，因此您可以将 keyup/down 事件绑定到它。

```
 $(document).on('keyup', function(e) {
    ResetAllRowColor();
    switch (e.keyCode) {
    case 40:
        //Down
        SelectedRow++;
        $('.ArrowNav tr').eq(SelectedRow).css('background-color', 'yellow');
        break;
    case 38:
        //Up
        SelectedRow--;
        $('.ArrowNav tr').eq(SelectedRow).css('background-color', 'yellow');
        break;
    }
});​ 
```

你的工作 jsFiddle

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T09:29:34.650

您在设置任何事件之前触发点击。你应该搬家

```
$('.ArrowNav tr').first().trigger('click'); 
```

下

```
$('.ArrowNav tr').on('click', function () {
    alert('a');
}); 
```

**然后另一个问题**是您不能将 onkey* 函数或焦点函数放在表格行/列上。您只能聚焦接受用户输入的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T12:21:43.247

```
<table>
  <tr tabindex="-1" onkeyup="alert(event);">
    <td>click me</td>
  </tr>
</table> 
```

`tabindex`应该给行焦点。

# objective-c - ARC 发布得太早了

> ID：13358153
> 
> 赞同：1
> 
> 时间：2012-11-13T09:22:19.207
> 
> 标签：objective-c, ios, automatic-ref-counting

我在 Objective-C 中编写了一个 BinaryReader 类，它可以`NSString`从使用 C# 创建的字节中提取一个`BinaryWriter.Write(string)`。它似乎工作得很好，但是当我打电话时：

```
 BinaryReader *binaryReader = [[BinaryReader alloc] initWithData:dataArray];
    NSString *strName = [binaryReader readString];
    // strName is not nil, but the value is no longer correct (seems to have been erased) 
```

我进入了 readString 方法，一切看起来都很好（字符串是正确的），直到方法返回（我认为 ARC 正在启动）。

为什么会发生这种情况？

这是我的 readString 方法：

```
-(NSString *)readString
{
    NSUInteger bytesCount = (NSUInteger)[self read7BitEncodedInt];
    const void *byteData = [_data bytes] + _dataIndex;

    NSString *returnValue =
        [[NSString alloc] initWithBytes:byteData length:bytesCount encoding:NSUTF8StringEncoding];

    _dataIndex += bytesCount;
    return returnValue;
} 
```

在`returnValue`方法返回之前包含正确的字符串。

根据要求，这是我的 BinaryReader 的初始化函数。

```
-(id)initWithData:(NSData *)theData
{
    self=[super init];
    if(self != nil)
    {
        _dataIndex = 0;
        _data = theData;
    }
    return self;
} 
```

和标题的相关部分

```
@interface BinaryReader : NSObject
{
    @private
    NSData *_data;
    int _dataIndex;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T09:59:19.227

你确定结果真的坏了吗？您发布的代码看起来不错，使用 ARC 编译时应该没有所有权/内存问题。

最近报告了 lldb（调试器）在某些情况下未显示正确值的问题。尝试使用 记录结果`NSLog`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T09:27:51.770

ARC 不应该这么快释放对象，因此您的错误可能在 readString 本身内部。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-13T09:47:15.583

将您的 binaryReader 作为具有 strong 属性的属性，它可能会解决您的问题。

```
@propert(nonatomic, strong) BinaryReader* binaryReader; 
```

它告诉编译器不要释放对象。

# c# - 是否可以捕获任何任务因异常和日志而终止的时间？

> ID：13358156
> 
> 赞同：9
> 
> 时间：2012-11-13T09:22:27.153
> 
> 标签：c#, task-parallel-library

是否可以捕获任何任务因异常和日志而终止的时间？我已经添加了`CurrentDomain_UnhandledException`处理，但这没有帮助。

`Task.Factory.StartNew()`我照常使用创建任务。当此类任务异常中的某个地方发生时，它会静默崩溃（但它应该永远工作，我也在使用`LongRunning`选项）。因此，我希望收到有关此类行为的通知。

理想情况下，我想在某处设置一些选项，以便在**任何**任务因异常而崩溃时得到通知。

如果不可能，那么我可能应该在我创建的**每个**任务中添加一些东西？当然我可以`try{} finally{}`在每个任务中添加大块，但可能有更好的解决方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T09:32:29.187

假设您有一个`Test`as 任务要运行：

```
static int Test()
{
    throw new Exception();
} 
```

1.  第一种方法 -*在调用者的线程中处理异常*：

    ```
    Task<int> task = new Task<int>(Test);
    task.Start();

    try
    {
        task.Wait();
    }
    catch (AggregateException ex)
    {
        Console.WriteLine(ex);
    } 
    ```

    注意：异常将是 AggregateException 类型。所有实际的例外情况都可以通过`ex.InnerExceptions`财产获得。

2.  第二种方法 -*在某些任务的线程中处理异常*：

    定义`ExceptionHandler`这种方式：

    ```
    static void ExceptionHandler(Task<int> task)
    {
        var ex = task.Exception;
        Console.WriteLine(ex);
    } 
    ```

    用法：

    ```
    Task<int> task = new Task<int>(Test);
    task.ContinueWith(ExceptionHandler, TaskContinuationOptions.OnlyOnFaulted);
    task.Start(); 
    ```

参考：[如何：处理任务引发的异常](http://msdn.microsoft.com/en-us/library/dd537614.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T09:30:43.713

对于您自己创建的任务，它相当简单：创建您自己的方法来调用`Task.Factory.StartNew()`，然后`Task.ContinueWith(loggingDelegate, TaskContinuationOptions.OnlyOnFaulted`在返回任务之前调用。

问题在于，这*不会*为其他基础设施创建的任务添加故障处理程序 - 包括 C# 5 中的异步方法。不过，它仍然可能对您有用。

您也可以使用[`TaskScheduler.UnobservedTaskException`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskscheduler.unobservedtaskexception.aspx), 但根据名称，该名称仅用于其他尚未观察到的异常。（再一次，这对你来说可能很好......）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T09:31:38.370

您可以使用在发生异常时执行操作的扩展方法。当任务出现故障时会发生这种情况。因此，如果它还有其他任务要继续，下一个可以检查上一个任务是否出错并记录异常。

我通常使用这种方法：

```
//If you want to chain more tasks..
public static Task<T> Continue<T>(this Task<T> task, Action<T> action)
{
    if (!task.IsFaulted)
    {
        task.ContinueWith((t) => action(t.Result), TaskContinuationOptions.ExecuteSynchronously | TaskContinuationOptions.OnlyOnRanToCompletion);
    }
    return task;
}

public static Task OnException(this Task task, Action<Exception> onFaulted)
{
    task.ContinueWith(c =>
    {
        var excetion = c.Exception;
            onFaulted(excetion);
    },
        TaskContinuationOptions.OnlyOnFaulted |
        TaskContinuationOptions.ExecuteSynchronously);
    return task;
} 
```

所以你可以使用：

```
Task.Factory.StartNew(...).OnException(ex => Log(ex)); 
```

希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T09:31:29.953

将您的包装`task.Wait()`在 try/catch 块中并 catch `AggregateException`。像这样的东西-

```
Task<string[]> task1 = Task<string[]>.Factory.StartNew(() => GetAllFiles(path));

// Use this line to throw an exception that is not handled.
try
{
    task1.Wait();
}
catch (AggregateException ae)
{

    ae.Handle((x) =>
    {
        if (x is UnauthorizedAccessException) // This we know how to handle.
        {
            Console.WriteLine("You do not have permission to access all folders
                                in this path.");
            Console.WriteLine("See your network administrator or try
                                another path.");
            return true;
        }
        return false; // Let anything else stop the application.
    }); 
} 
```

可以在此处找到详细信息 -[处理 Task 引发的异常](http://msdn.microsoft.com/en-us/library/dd537614.aspx)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T09:32:38.020

您可以在您的任务上创建一个 OnlyOnFaulted 延续，它观察异常并记录/报告问题。

```
t.ContinueWith(task =>
{
    // Report and log error
}, System.Threading.CancellationToken.None, TaskContinuationOptions.OnlyOnFaulted, TaskScheduler.FromCurrentSynchronizationContext()); 
```

上面的代码将在 UI 线程上运行任务，因为`TaskScheduler.FromCurrentSynchronizationContext()`. 如果您使用的是 winforms 并且需要通知用户，这可能是必要的。

# php - 基本模式不适用于页面加载php

> ID：13358157
> 
> 赞同：0
> 
> 时间：2012-11-13T09:22:27.227
> 
> 标签：php, jquery, modal-dialog

我有 jquery 插件，但在页面加载时它可以工作，但是当我将它与我的 php 脚本集成时，它似乎没有加载。我检查了路径但没有成功。页面加载后，我希望窗口显示 onload 检查我放在 head 标签中的代码，请原谅格式：

```
<?php session_start(); ?>       
<!DOCTYPE html>
<html>

    <head>
        <title>SimpleModal Basic Modal Dialog</title>
        <meta name='author' content='Eric Martin'
        />
        <meta name='copyright' content='2012 - Eric Martin' />
        <link type='text/css' href='../css/demo.css' rel='stylesheet' media='screen'
        />
        <link type='text/css' href='../css/basic.css' rel='stylesheet' media='screen'
        />
        <script>
            window.onload = function () {
                $(document).ready(function () {
                    $('#basic-modal-content').modal();
                    return false;
                });
                $('#modalContentTest').modal({
                    onShow: function (dialog) {
                        var sm = this;
                        dialog.container.animate({
                            height: 300,
                            width: 300
                        }, 500, function () {
                            sm.setPosition();
                        });
                    }
                });

            };
        </script>
        <style>
            .noTitle .ui-dialog-titlebar {
                display:none;
            }
        </style>
    </head> 
```

....在身体标签之间我有 php 脚本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T09:41:25.123

我认为您的问题在于 window.onload 和 jquery $(document).ready 的组合。

“就绪”方法在触发 DOMContentLoaded 事件时触发（jQuery 在不支持它的浏览器上对此进行模拟），而 window.onload 在加载所有其他内容（css、图像）时触发 - 之后发生。

所以当你绑定“ready”事件的时候，该事件已经被触发了，不会再触发了。

我建议删除 window.onload 包装函数。

```
 $('#modalContentTest').modal({
                onShow: function (dialog) {
                    var sm = this;
                    dialog.container.animate({
                        height: 300,
                        width: 300
                    }, 500, function () {
                        sm.setPosition();
                    });
                }
            });
           $(document).ready(function () {
                $('#basic-modal-content').modal();
                return false;
            }); 
```

[以下是这两个事件](http://ablogaboutcode.com/2011/06/14/how-javascript-loading-works-domcontentloaded-and-onload/)的一些细节

我担心的另一个问题是声明的模态 (#modalContentTest) 的 id 与您尝试触发的 (#basic-modal-content) 不同

# c# - Array.Sort() 尝试实现 IComparable 进行排序

> ID：13358158
> 
> 赞同：0
> 
> 时间：2012-11-13T09:22:30.730
> 
> 标签：c#, sorting

我正在尝试学习排序数组的一些示例。示例使用 Id 作为整数来按此属性排序，因为我的对象使用 Guid 数据类型而不是 int 我决定使用 Created DateTime 属性对数组进行排序。这是代码

```
Car.cs
    public class Car:ICar,IComparable
    {
       ... properties
       int IComparable.CompareTo(object)
       {
          Car temp = obj as Car;
          if (temp != null)
          {
             if (this.Created > temp.Created)
                return 1;
             if (this.Created < temp.Created)
                return -1;
            else 
                return 0;
          }
          else {throw new ArgumentException("Parameter is not a Car object");}
       }
    } 
```

车库.cs

```
public class Garage : IEnumerable
    {
        private Car[] cars = new Car[4];

        public Garage()
        {
            cars[0] = new Car() { Id = Guid.NewGuid(), Name = "Corolla", Created = DateTime.UtcNow.AddHours(3), CurrentSpeed = 90 };
            cars[1] = new Car() { Id = Guid.NewGuid(), Name = "Mazda", Created = DateTime.UtcNow.AddHours(2), CurrentSpeed = 80 };
        }
       ...
} 
```

程序.cs

```
 static void Main(string[] args)
        {
           Garage cars = new Garage();
           Console.WriteLine("sorting array:");
           Array.Sort(cars); // error occured
        } 
```

**错误 2 参数 1：无法从 'Car' 转换为 'System.Array'**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:03:11.303

此解决方案假定您要对数组进行就地排序，而不是创建一个新数组。

在您的`Garage`班级中，添加一个方法（因此您不必公开内部数组）：

```
public void Sort() {
    Array.Sort(cars);
} 
```

然后从您的程序中调用此方法：

```
static void Main(string[] args)
{
    Garage garage = new Garage();
    garage.Sort();
    //It should be sorted now if you enumerate over it!
} 
```

我冒昧地调用了您的`Garage`对象`garage`，而不是`cars`可能会造成混淆。

我没有对此进行测试，但它是如此简单，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T09:26:23.027

你`private Car[] cars`是在一个块中定义的（在大括号之间），当你写时你在该块之外引用它`Array.Sort(cars)`。

因此，您在某处定义了一个`cars`类型错误的变量。

如果您`Array.Sort`在定义数组的同一块中执行此操作，它将起作用。

# c# - 如何计算向量的相反值，添加一些松弛度

> ID：13358159
> 
> 赞同：1
> 
> 时间：2012-11-13T09:22:46.800
> 
> 标签：c#, windows-phone-7, xna

![在此处输入图像描述](../Images/98903ffbaab422150a8b8340ffddae03.png)

如何为我的物体（黑色）行进方向（绿色）计算有效范围（红色）。绿色是 Vector2，其中 x 和 y 范围为 -1 到 1。

我在这里要做的是创造火箭燃料燃烧效果。所以我得到的是

*   火箭速度（浮动）
*   火箭方向（Vector2 x = [-1, 1], y = [-1, 1]）

我可能认为火箭速度无关紧要，因为燃料燃烧效果（粒子）是在其自身速度的位置上产生的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T09:31:21.090

使用 2D 向量的一个便宜又有趣的技巧是转置 x 和 y，然后翻转其中一个上的符号以获得垂直向量（伪代码）：

```
Vector2 perpendicular ( -original.y, original.x ) // Or original.y, -original.x 
```

然后你可以做类似的事情：

```
direction + perpendicular * rand(-0.3 , 0.3) 
```

**更新：**意识到问题要求相反的向量（太忙于看图片！）我想我最好也回答一下。将“方向”乘以 -1 得到相反的向量。所以这：

```
perpendicular * rand(-0.3 , 0.3) - direction 
```

应该在你的范围内的某个地方给你一个随机的方向向量（没有标准化，但足够接近这些目的）。然后，您可以将该结果乘以一个随机数，具体取决于您想要尾巴的长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T11:17:02.380

如果要花费 OlduwanSteve 的答案，您可以使其在物理上有些准确。

您想要创建几个代表驱逐的向量（红线）。
首先定义要表示驱逐的向量数量 - 让我们将其标记为 n。

你想得到一组 n 个数，总和为 Vx。这些数字将是驱逐向量的 x 分量。你可以这样做（半伪代码）：

```
SumX = Vx;
for (i = 0; i < n; i++)
{
    Ax[i] = -rand(0..SumX); // Ax is the array of all expulsion vectors x components 
    SumX -= Ax[i]; 
} 
```

现在您需要计算 Ay（驱逐向量的 y 分量）。这与计算 非常相似，只是 SumY = 0。

在这里，您需要确定一个最大的 y 分量，而不是在 n 个元素中拆分 SumY。我能想到的最好的选择方法是为排出向量定义最大允许角度，并使用以下方法定义最大 Vy：maxVy = minVx*tan(maxAlpha)。

现在你可以使用这个（半伪代码）得到 Ay：

```
SumY = maxVy*2; // The actual range is (-maxVy, maxVy), but using (0, 2*maxVy) is simpler IMO
for (i = 0; i < n; i++)
{
    Ay[i] = rand(0..SumY);
    SumY -= Ay[i];
}
for (i = 0; i < n; i++)
{
    Ay[i] -= maxVy; // Translate the range back to (-maxVy, maxVy) from (0, 2*maxVy)
} 
```

现在你有了驱逐向量的 x 和 y 分量的数组。迭代两个数组并配对元素以创建向量（您不必以相同的顺序迭代两个数组）。

注意：
•**我在计算中对齐轴，使 X 平行于对象速度矢量（绿线）。** • maxVy 的计算**不**保证会产生角度为 maxAlpha 的向量，它只保证不会产生更大角度的向量。• 行 Ay[i] = rand(0..SumY) 和 Ax[i] = -rand(0..SumX) 可能导致向量的大小为 0。这可能会导致烦人的情况，我建议处理这种情况（例如“当 rand 返回零时，再次调用它”）。

# ruby-on-rails-3 - 设计返回不正确的用户 ID？

> ID：13358163
> 
> 赞同：1
> 
> 时间：2012-11-13T09:23:20.200
> 
> 标签：ruby-on-rails-3, activerecord, devise

我在登录时收到如下所示的错误（通过设计）

奇怪的是，Rails/Devise 似乎返回了一个用户 ID 为“1”，即使我的用户表中没有用户 ID 为“1”的用户。这似乎是随机发生的，我无法弄清楚问题所在。

这是最新的错误消息。

ODBC::Error: S1000 (9001) [Microsoft][SQL Server Native Client 11.0][SQL Server]数据库“[redacted]”的日志不可用。检查事件日志以获取相关的错误消息。解决所有错误并重新启动数据库。: EXEC sp_executesql N'UPDATE [users] SET [last_sign_in_at] = ''2012-11-12T16:58:34.020'', [current_sign_in_at] = ''2012-11-13T08:44: 33.586'', [sign_in_count] = 69, [updated_at] = ''2012-11-13T08:44:33.630'' **WHERE [users].[id] = 1;** 选择 @@ROWCOUNT 作为 AffectedRows'

这是请求参数：

```
{"utf8"=>"✓",
 "authenticity_token"=>"[redacted]=",
"user"=>{"email"=>"jkramxx@xx.com",
"password"=>"[FILTERED]",
"remember_me"=>"0"},
"commit"=>"Sign in"} 
```

db中实际上没有id为“1”的用户，服务器没有问题。用户 jkramxx@xx.com 的 id 为 60。（用户 id 1 不久前已从数据库中删除）。我认为它可能是会话 cookie 中的某些东西，所以我也删除了它）。

我在可以登录的控制台中看到了类似的奇怪行为，但是当我在调试器中检查 current_user 时，即使我直接检查数据库（使用 SQL Server Mgmt Studio）用户的 id 为 34，并且没有 id 为 1 的用户。有时，当我重新启动调试器时，这种行为会消失。都非常随意。

有什么建议么？

（Ruby 1.9.3./Rails 3.2.8 SQL Server 10 使用 ruby​​-obdc gem）

# spring - 任何互联网机器都可以使用 SMTP 主机吗

> ID：13358164
> 
> 赞同：0
> 
> 时间：2012-11-13T09:23:27.127
> 
> 标签：spring, sendmail

我已经使用 spring 和主机详细信息实现了邮件发件人功能，如下所示

```
<property name="host" value="smtp.gmail.com" />
<property name="port" value="587" />
<property name="username" value="gmailid" />
<property name="password" value="password" />

<property name="javaMailProperties">
    <props>
        <prop key="mail.smtp.auth">true</prop>
        <prop key="mail.smtp.starttls.enable">true</prop>
    </props>
</property> 
```

这工作正常，但我想做的是我不想使用 smtp.gmail.com .. 我的 windows 机器可以访问互联网我可以使用我的机器作为主机吗？..

如果可能的话，你能建议我如何将我的机器用作邮件服务器主机。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T11:04:39.487

*虽然在技术上*没有什么可以阻止您，但这在很大程度上取决于您打算发送什么样的电子邮件。如果您打算做类似群发邮件之类的事情，那么您的邮件主机很可能会很快被列为垃圾邮件主机。今天的大型邮件主机非常积极地将不知名的主机标记为垃圾邮件发送者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T09:57:38.043

是的，您可以使用自己的机器进行 SMTP。有几个开源选项可供您使用，具体取决于您的操作系统 - 去看看[freshmeat.net](http://freshmeat.net)（Postfix 是我对 linux 机器的建议）。

但是，您应该首先为自己回答一些问题：

1.  为什么不使用 Google SMTP 服务 - 他们确实提供垃圾邮件过滤、安全性，最重要的是 - 他们受到其他人的信任。
2.  您准备好并准备好自己配置和运行 SMTP 服务器了吗？您是否足够了解如何保护您的设置并在它不起作用时进行故障排除？

干杯，

# java - 包含本机 DLL 的 ANT Java-Jar 任务

> ID：13358165
> 
> 赞同：3
> 
> 时间：2012-11-13T09:23:35.700
> 
> 标签：java, dll, ant, jar

我有一个需要*本地 DLL 库才能正常工作的**JAR*库（Scriptom/Jacob）。

 **我在ANT中将**JAR*添加到了我的类路径中。但我不知道如何添加*DLL 文件*，以便我编译的 Java/Groovy 文件找到它们（既不是在生成的，也不是在普通的执行中）。它们都位于项目子目录中。**`JAR``java Main.class``libs`**

 **如何更改我的应用程序识别 DLL 的 ANT 构建文件？

PS：

因为它在已配置的 Eclipse 环境中正常工作：是否可以从*Eclipse 运行配置*中提取完全工作的 ANT 构建文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T10:17:29.853

当 DLL 文件仍打包在 jar 中时，您不能使用它们。

我建议您创建一个应用程序文件夹，您的 .jar 将位于该 .jar 的位置和旁边，将您的 DLL 文件放在那里。在您的应用程序中，您需要从该位置加载您的 DLL。***

# haskell - 主函数中的 Haskell Let/In

> ID：13358171
> 
> 赞同：4
> 
> 时间：2012-11-13T09:23:54.900
> 
> 标签：haskell

我的代码：

```
import System.IO

main :: IO()
main = do
inFile <- openFile "file.txt" ReadMode
content <- hGetContents inFile
let
    someValue = someFunction(content)
    in
    print(anotherFunction(someValue))
    print(anotherFunction2(someValue))
hClose inFile 
```

我的错误：

```
- Type error in application
*** Expression     : print (anotherFunction2(someValue))
*** Term           : print
*** Type           : e -> IO ()
*** Does not match : a -> b -> c -> d 
```

我需要打印两行或多行需要“someValue”的函数。我该如何解决？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T09:48:51.340

该错误消息的原因是当您编写

```
let
    someValue = someFunction(content)
    in
    print(anotherFunction(someValue))
    print(anotherFunction2(someValue)) 
```

这两个`print`语句实际上被解析为一个：

```
print (anotherFunction (someValue)) print (anotherFunction2 (someValue)) 
```

换句话说，它认为第二个`print`也是`(anotherFunction2 (someValue))`第一个的论据`print`。这就是为什么它抱怨`e -> IO ()`（的实际类型`print`）不匹配`a -> b -> c -> d`（一个接受三个参数的函数）。

`do`您可以通过在之后添加一个来解决此问题，`in`以使其将两个语句分开解析：

```
let
    someValue = someFunction(content)
    in do
    print(anotherFunction(someValue))
    print(anotherFunction2(someValue)) 
```

不过，最好使用这里的`do`-notation 形式`let`，不要使用任何`in`:

```
import System.IO

main :: IO()
main = do
    inFile <- openFile "file.txt" ReadMode
    content <- hGetContents inFile
    let someValue = someFunction content
    print (anotherFunction someValue)
    print (anotherFunction2 someValue)
    hClose inFile 
```

我还去掉了上面代码中的一些多余的括号。请记住，它们仅用于分组，而不用于 Haskell 中的函数应用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-13T09:28:32.273

在 do 块中使用 let 绑定时，不要使用`in`关键字。

```
main :: IO()
main = do
    inFile <- openFile "file.txt" ReadMode
    content <- hGetContents inFile
    let someValue = someFunction(content)
    print(anotherFunction(someValue))
    print(anotherFunction2(someValue))
    hClose inFile 
```

# css - 根据 div 大小调整字体大小

> ID：13358181
> 
> 赞同：38
> 
> 时间：2012-11-13T09:24:52.697
> 
> 标签：css, responsive-design

它由 9 个盒子组成，中间有文本。我已经制作了这样的盒子，所以它们会随着屏幕调整大小而调整大小，所以它会一直保持在同一个地方。

但是，文本不会调整大小 - 即使我使用百分比。

1.  如何调整文本大小，使其始终与整个页面保持相同的比例？
2.  这是处理多个分辨率的正确解决方案吗？还是我应该`@media`在 CSS 中进行许多检查并为每种媒体类型设置许多布局？

```
html,
body {
  height: 100%;
  width: 100%;
}

#launchmain {
  width: 55%;
  display: inline-block;
  position: relative;
  top: 10%;
  left: 25%;
}

#launchmain:after {
  padding-top: 79.26%;
  display: block;
  content: '';
  margin-top: 10px;
}

#box1 {
  border: 1px solid #000000;
  position: absolute;
  width: 25.37%;
  height: 21.88%
}

#box2 {
  border: 1px solid #000000;
  width: 48.48%;
  height: 21.88%;
  position: absolute;
  left: 25.64%
}

#box3 {
  border: 1px solid #000000;
  width: 25.37%;
  height: 21.88%;
  position: absolute;
  left: 74.39%;
}

#box4 {
  border: 1px solid #000000;
  width: 33.235%;
  height: 53.84%;
  position: absolute;
  top: 22.07%;
}

#maininvite {
  border: 1px solid #000000;
  width: 33.53%;
  height: 53.84%;
  position: absolute;
  top: 22.07%;
  left: 33.235%;
}

#box6 {
  border: 1px solid #000000;
  width: 33.235%;
  height: 53.84%;
  position: absolute;
  top: 22.07%;
  left: 66.765%;
}

#box7 {
  border: 1px solid #000000;
  width: 25.37%;
  height: 21.88%;
  position: absolute;
  top: 76.2%;
}

#box8 {
  border: 1px solid #000000;
  width: 48.48%;
  height: 21.88%;
  position: absolute;
  left: 25.64%;
  top: 76.2%;
}

#box9 {
  border: 1px solid #000000;
  width: 25.37%;
  height: 21.88%;
  position: absolute;
  top: 76.2%;
  left: 74.39%;
}

#maininvite h2 {
  font-size: 180%;
}

p {
  position: relative;
  font-size: 80%;
}
```

```
<div id="launchmain">
  <div id="box1"></div>
  <div id="box2"></div>
  <div id="box3"></div>
  <div id="box4"></div>
  <div id="maininvite">
    <h2> header</h2>
    <p>not a lot of text here but still overflowing</p>
  </div>
  <div id="box6"></div>
  <div id="box7"></div>
  <div id="box8"></div>
  <div id="box9"></div>
</div>
```

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-09-08T16:17:09.540

我的回答不需要 Javascript，只依赖 CSS3（在大多数现代浏览器中可用）。如果设计不太依赖 Javascript，我个人非常喜欢它。

我的回答是**“纯 CSS3，不需要 Javascript”** - 解决方案：

可以在这里看到的解决方案（[http://jsfiddle.net/uNF3Z/16/](http://jsfiddle.net/uNF3Z/16/)）使用以下 CSS 样式添加（利用`@media`CSS3 的查询）

```
@media all and (min-width: 50px)   {  body  { font-size:0.1em;  } }
@media all and (min-width: 100px)  {  body  { font-size:0.2em;  } }
@media all and (min-width: 200px)  {  body  { font-size:0.4em;  } }
@media all and (min-width: 300px)  {  body  { font-size:0.6em;  } }
@media all and (min-width: 400px)  {  body  { font-size:0.8em;  } }
@media all and (min-width: 500px)  {  body  { font-size:1.0em;  } }
@media all and (min-width: 600px)  {  body  { font-size:1.2em;  } }
@media all and (min-width: 700px)  {  body  { font-size:1.4em;  } }
@media all and (min-width: 800px)  {  body  { font-size:1.6em;  } }
@media all and (min-width: 900px)  {  body  { font-size:1.8em;  } }
@media all and (min-width: 1000px) {  body  { font-size:2.0em;  } }
@media all and (min-width: 1100px) {  body  { font-size:2.2em;  } }
@media all and (min-width: 1200px) {  body  { font-size:2.4em;  } }
@media all and (min-width: 1300px) {  body  { font-size:2.6em;  } }
@media all and (min-width: 1400px) {  body  { font-size:2.8em;  } }
@media all and (min-width: 1500px) {  body  { font-size:3.0em;  } }
@media all and (min-width: 1500px) {  body  { font-size:3.2em;  } }
@media all and (min-width: 1600px) {  body  { font-size:3.4em;  } }
@media all and (min-width: 1700px) {  body  { font-size:3.6em;  } } 
```

这实际上导致字体大小调整为可用的屏幕宽度。这种调整以 100 像素为步长（对于大多数用途来说已经足够细化了），并且覆盖了 1700 像素的最大屏幕宽度，我认为这是足够的（2013 年），并且可以通过添加更多线条来进一步改进。

附带的好处是每次调整大小时都会调整字体大小。这种动态调整（例如，因为浏览器窗口被调整大小）可能还没有被基于 Javascript 的解决方案覆盖。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2014-04-29T16:36:27.877

我一直在寻找相同的功能并找到了这个答案。但是，我想给你们一个快速的更新。它是 CSS3 的 vmin 单位。

```
p, li
{
  font-size: 1.2vmin;
} 
```

vmin 表示“视口高度的 1% 和视口宽度的 1% 之间较小的那个”。

[有关 SitePoint 的更多信息](http://www.sitepoint.com/new-css3-relative-font-size/)

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2012-11-13T10:02:28.503

关于您的代码，请参阅@Coulton。您需要使用 JavaScript。

结帐[FitText](http://fittextjs.com/)（它确实在 IE 中工作，他们只是以某种方式将他们的网站搞砸了）或[BigText](http://www.zachleat.com/web/bigtext-makes-text-big/)。

FitText 将允许您相对于它所在的容器缩放一些文本，而 BigText 更多的是关于将不同文本部分的大小调整为容器内的相同宽度。

BigText 会将您的字符串设置为与容器的宽度完全相同，而 FitText 的像素不那么完美。首先将字体大小设置为容器元素宽度的 1/10。默认情况下，它不适用于所有字体，但它有一个设置允许您减少或增加重新调整大小的“力量”。它还允许您设置最小和最大字体大小。第一次开始工作需要一些摆弄，但效果很好。

[http://marabeas.io](http://marabeas.io) <- 目前在这里玩。据我了解，BigText 在我的上下文中根本不起作用。

对于那些使用 Angularjs 的人，这里是我制作的 FitText的[Angular 版本。](http://patrickmarabeas.github.io/ng-FitText.js/)

* * *

这是一个 LESS 混合，您可以使用它来使@humanityANDpeace 的解决方案更漂亮：

```
@mqIterations: 19;
.fontResize(@i) when (@i > 0) {
    @media all and (min-width: 100px * @i) { body { font-size:0.2em * @i; } }
    .fontResize((@i - 1));
}
.fontResize(@mqIterations); 
```

感谢@NIXin，还有一个 SCSS 版本！

```
$mqIterations: 19;
@mixin fontResize($iterations) { 
    $i: 1; 
    @while $i <= $iterations { 
        @media all and (min-width: 100px * $i) { body { font-size:0.2em * $i; } } 
        $i: $i + 1; 
    }
} 
@include fontResize($mqIterations); 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-12-03T18:52:09.803

我提出的答案非常简单，我将使用“vw”，而不是使用“px”、“em”或“%”。简而言之，它可能看起来像这样：- h1 {font-size: 5.9vw;} 用于标题目的。

看到这个：[演示](http://css-tricks.com/examples/ViewportTypography/)

更多细节：[主教程](http://css-tricks.com/viewport-sized-typography/)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-11-20T01:12:18.983

这是@Patrick 的 mixin 的 SCSS 版本。

```
$mqIterations: 19;
@mixin fontResize($iterations)
{
  $i: 1;
  @while $i <= $iterations
  {
    @media all and (min-width: 100px * $i) {
      body { font-size:0.2em * $i; }
    }
    $i: $i + 1;
  }
}
@include fontResize($mqIterations); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-11T18:40:11.773

我找到了一种根据 div 大小调整字体大小的方法，无需任何 JavaScript。我不知道它的效率有多高，但它很好地完成了工作。

在所需的 div 中嵌入一个 SVG 元素，然后使用一个可以在其中使用 HTML 元素的 foreignObject 标记。下面给出了一个完成我的工作的示例代码片段。

```
<!-- The SVG element given below should be place inside required div tag -->
<svg viewBox='0 2 108.5 29' xmlns='http://www.w3.org/2000/svg'>
    <!-- The below tag allows adding HTML elements inside SVG tag -->
    <foreignObject x='5' y='0' width='93.5%' height='100%'>
        <!-- The below tag can be styled using CSS classes or style attributes -->
        <div xmlns='http://www.w3.org/1999/xhtml' style='text-overflow: ellipsis; overflow: hidden; white-space: nowrap;'>
            Required text goes here            
        </div>
    </foreignObject>
</svg> 
```

所有的viewBox、x、y、宽度和高度值都可以根据需要改变。

文本可以在 SVG 元素本身内部定义，但是当文本溢出时，省略号不能添加到 SVG 文本中。因此，HTML 元素是在一个`foreignObject`元素内定义的，并且文本溢出样式被添加到那个/那些元素中。

# php - 检查本地网络上的机器是否可以使用 PHP

> ID：13358184
> 
> 赞同：0
> 
> 时间：2012-11-13T09:25:16.377
> 
> 标签：php, terminal, wake-on-lan

我有一个在本地网络服务器（带有 OS X Lion 的 Mac Mini 服务器）上运行的 PHP 应用程序。有几个本地客户端（也包括 Mac）访问这个应用程序。客户端机器不时进入睡眠状态。如果本地客户端正在运行（唤醒）或处于睡眠模式，我需要能够从 PHP 服务器检查。

我已经使用 AJAX 轮询脚本成功地做到了这一点，我定期 ping 本地机器并在 PHP 应用程序中显示本地机器的状态。我遇到的问题是，如果客户端机器处于睡眠模式，PING 命令会在客户端机器上启动 LAN 唤醒，这是我不想要的。我只想在不唤醒机器的情况下查看状态。

这可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T09:31:55.180

查看

> pmset -g | grep 休眠模式
> 
> [http://www.tuaw.com/2010/10/20/safesleep-lets-you-use-safe-sleep-on-demand-on-your-mac/](http://www.tuaw.com/2010/10/20/safesleep-lets-you-use-safe-sleep-on-demand-on-your-mac/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T15:31:35.347

我想说您需要为这些机器正确配置 Wake-on-lan。Aparently 他们被唤醒每个数据包，这可能不是你需要的。通常 WoL 配置为仅在[Magic Packet](http://en.wikipedia.org/wiki/Magic_packet "魔术包")上唤醒（在 Windows 上可以在网卡驱动程序属性中的设备管理器中配置）。然后您将能够使用 ping（或任何其他类型的网络流量）来检查 PC 是否在线。

# c++ - 传递给 qt 插件的对象的调用方法产生符号查找错误

> ID：13358189
> 
> 赞同：1
> 
> 时间：2012-11-13T09:25:46.080
> 
> 标签：c++, qt, plugins

我在将对象传递给 Qt 插件时遇到问题，当尝试使用 const 成员函数获取其成员时，出现符号查找错误。例子：

这是在 Qt 应用程序内部：

```
class A{
    int a,b,c;
}; 

class B{
public:
    const QList<A*>* a() const { return m_a; }
private:
    QList<A*>* m_a;
};

class C{
public:
    const B* b() const { return m_b; }
private:
    B* m_b;
}; 
```

这是在 QtPlugin 里面：

插件.h

```
#include "a.h"
#include "b.h"
#include "c.h"

//.... 
```

插件.cpp

```
void Plugin::somefunc(C* c)
{
    qDebug() << c->b()->a()->count();
} 
```

如果我从插件的 Qt 应用程序 somefunc() 调用，我会收到符号查找错误：

```
symbol lookup error ... plugin.so undefined symbol _ZNK5b6a 
```

但如果我将 B 和 C 类成员放入公共领域，它可以使用：

```
 qDebug() << c->m_b->m_a->count(); 
```

有没有人有类似的问题或知道如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T09:33:32.800

默认情况下，类成员是私有的。`B::a()`并且`C::b()`是私人的。为了能够从您那里调用这些成员函数，`Plugin::somefunc()`您需要明确地将它们公开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T16:41:27.817

这个“问题”有两种解决方案。

*   **制作共享库**- 制作共享库并将应用程序和 QtPlugin 使用的代码移动到该库中
*   **添加用于 QMake 文件的 .h 和 .cpp 文件**- QtPlugin 中使用的应用程序的头文件和源文件添加到 .pro 文件中的 HEADERS 和 SOURCES 指令 - 这实际上是静态链接

我没有在网上找到类似的问题，因此提出了这个答案。也许问题很模糊，对此感到抱歉。感谢您的回答。此答案供将来参考。

# ruby - 如何在不手动加载类的情况下获取命名空间中的所有类？

> ID：13358190
> 
> 赞同：4
> 
> 时间：2012-11-13T09:25:46.243
> 
> 标签：ruby, ruby-on-rails-3, module, namespaces

我正在寻找一种方法来列出模块（命名空间）中定义的所有类。这是关于该问题的类似问题： [How to get all class names in a namespace in Ruby?](https://stackoverflow.com/questions/3676274/how-to-get-all-class-names-in-namespace-in-ruby)

但看到最后一个回复，`Module.constants`在类被调用/加载之前是空的。有没有办法在不手动引用每个类的情况下做到这一点？

我正在尝试在 Rails 3.2 中使用此功能，而我发现的唯一方法是要求初始化程序中的每个类（没有尝试过，但它仍然需要手动输入......）。

在此先感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T17:42:38.727

您可以将文件放在命名空间目录中，如下所示：

```
Dir.glob('/path/to/namespaced/directory/*').collect{|file_path| File.basename(file_path, '.rb').constantize} 
```

因此，在 Rails 初始化文件或模型中，您可以执行以下操作：

```
Dir.glob(File.join(Rails.root, "app", "models", "my_namespace", "*")).collect{|file_path| File.basename(file_path, '.rb').constantize} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-24T20:18:41.007

基于 Bryan 提供的内容，您可以使用它从特定的父命名空间获取常量/类，即使文件名/类名以某些字符串开头/结尾：

```
require 'pathname'

# make this the directory you are autoloading from
autoload_dir = File.join(Rails.application.root, 'app', 'models')

# this will return FooBar::BarFoo::**::*Boo constants and autoload them
Dir.glob(File.join(autoload_dir, 'foo_bar', 'bar_foo', '**', '*_boo.rb')).collect{|pathname| Pathname.new(pathname.chomp('.rb')).relative_path_from(Pathname.new(autoload_dir)).to_s.camelize.constantize} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-14T18:39:49.530

Bryan Liff 简短而优雅的回答几乎是正确的，但会引发错误。相反，请尝试：

`Dir.glob(File.join(Rails.root, "app", "models", "my_namespace", "*")).collect{|file_path| File.basename(file_path, '.rb').camelize.constantize}`

注意使用`camelize`. 我会在评论中发布此内容，但没有足够的声誉这样做。

# php - 在 php 中内爆或爆炸 mysql_fetch_array

> ID：13358194
> 
> 赞同：1
> 
> 时间：2012-11-13T09:26:08.870
> 
> 标签：php, mysql

嗨，大家好。我目前正在尝试进行 mysql 查询，而不是获取结果并在另一个查询中使用它们。所以我想我正在调用我的数据库并使用 mysql_fetch_array 而不是 implode 它插入`,`所以我可以在另一个查询中使用它。我在这里阅读了很多关于此的问题，并基于我编写自己的代码的问题，但我收到了这个错误：

```
Warning: array_values() expects parameter 1 to be array, string given in /var/www/html/lager_management/warenkorb.php on line 107

Warning: implode(): Invalid arguments passed in /var/www/html/lager_management/warenkorb.php on line 108 
```

这是一段代码出了什么问题我无法解释自己，我知道`mysql`它很旧，我应该使用`myqli`

```
$sql3 = "SELECT `Index` FROM lm_Warenkorb;";
        $result3 = mysql_query($sql3);
        while($resultarray3 = mysql_fetch_array($result3)) 
        {
        $anfrage = array();
        $anfrage = $resultarray3['Index'];
        $anfrage = implode(", ", $anfrage); 

          $sql2 = "SELECT `Index`, `Artikelbezeichnung`, `Status`, `Bestand`, `Lieferant`, `Datum-Einlagerung`, `Lagerort` FROM `lm_Artikel` WHERE `Index` IN (".$anfrage.");";
        } 
```

表 lm_Warenkorb 如下所示：

```
Index:
    10
    2
    6 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T09:29:55.523

您`mysql_fetch_array($result)`在 while 循环中使用，这是完全正确的。

但这显然只会从数据库中返回表的一行，而不是整个列。

因此`$resultarray3['Index'];`返回第一个表行的索引列的值，它不是数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T09:34:41.037

试试这个

```
$anfrage = array();
while($resultarray3 = mysql_fetch_array($result3)) 
{
 $anfrage[] = $resultarray3['Index'];
}

if(count($anfrage) > 0) {
  $anfrage = implode(",", $anfrage); 
  $sql2 = "SELECT `Index`, `Artikelbezeichnung`, `Status`, `Bestand`, `Lieferant`, `Datum-Einlagerung`, `Lagerort` FROM `lm_Artikel` WHERE `Index` IN (".$anfrage.");";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T09:36:21.217

我认为您可以使用一个带有嵌套 SELECT 的查询来做到这一点：

```
 $sql3 = "
SELECT `Index`, `Artikelbezeichnung`, `Status`, `Bestand`, `Lieferant`, `Datum-Einlagerung`, `Lagerort` 
    FROM `lm_Artikel` 
    WHERE `Index` IN (
      SELECT `Index` FROM lm_Warenkorb
    )";

        $result3 = mysql_query($sql3);

        while($resultarray3 = mysql_fetch_array($result3)) {
          // handle the results
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T09:37:22.587

```
$sql3 = "SELECT `Index` FROM lm_Warenkorb;";
$result3 = mysql_query($sql3);
$data = array(0);
while($resultarray3 = mysql_fetch_assoc($result3))
{
    $data[] = $resultarray3['Index'];
}
$sql2 = "SELECT `Index`, `Artikelbezeichnung`, `Status`, `Bestand`, `Lieferant`, `Datum-Einlagerung`, `Lagerort` FROM `lm_Artikel` WHERE `Index` IN (".implode(',', $data).");";
echo $sql2; 
```

# objective-c - 如何在 iOS 中使用 Aviary SDK

> ID：13358199
> 
> 赞同：0
> 
> 时间：2012-11-13T09:26:25.773
> 
> 标签：objective-c, ios, aviary

我想创建一个图像编辑应用程序，我正在使用 Aviary，但我在 Aviary 上找不到任何教程，这就是我在处理它时遇到问题的原因。

是否有关于如何使用 Aviary SDK for iOS 的教程？

我正在阅读[此文档](http://www.aviary.com/ios-documentation)，但是否有任何教程可以轻松展示如何操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T09:47:03.330

只需创建一个 Aviary 对象：

```
AFPhotoEditorController *e = [[AFPhotoEditorController alloc] initWithImage:IMAGE];

[e setDelegate:self];

[self presentModalViewController:e animated:YES]; 
```

然后实现 Finished & Canceled Delegate 方法：

```
- (void)photoEditor:(AFPhotoEditorController *)editor finishedWithImage:(UIImage *)image

- (void)photoEditorCanceled:(AFPhotoEditorController *)editor 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:23:51.520

这是一个链接，其中包含有关如何使用 Aviary 网站上的 Aviary SDK 的详细说明：

[Aviary SDK 文档](http://www.aviary.com/ios-documentation)

我希望这能帮到您。

# jquery - 使用单击功能禁用 jquery 悬停功能

> ID：13358202
> 
> 赞同：1
> 
> 时间：2012-11-13T09:26:44.220
> 
> 标签：jquery, click, hover

我们有一个画廊，当您将光标悬停在图像 div 上时，标题会淡入。我们的下一步是添加一个显示所有字幕的按钮，这样人们就可以滚动和阅读，而无需在整个屏幕上移动光标。

创建 showall 函数很容易，但是当光标经过任何照片时，悬停函数会触发并且该图像上的标题会消失。

当 showall 处于活动状态时，是否有一种简单的方法可以让 showall 功能禁用悬停功能？

我们的基本 jquery 代码如下，.tease 是标题：

```
$('.tease').hide();
$('.img33, .img40, .img50, .img60').hover(
    function(){ $(this).children('.tease').fadeIn('900'); },
    function(){ $(this).children('.tease').fadeOut('2500'); }
); 
```

每个图像的基本 html：

```
<div class="img33">
<img src="../dir/someimage.jpg">
<div class="tease">Tease copy</div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T09:40:27.057

您可以只定义一个在悬停函数中检查的全局变量。

例如

```
var hoverEnabled = true;

$('.tease').hide();
$('.img33, .img40, .img50, .img60').hover(
    function(){ if(hoverEnabled) $(this).children('.tease').fadeIn('900'); },
    function(){ if(hoverEnabled) $(this).children('.tease').fadeOut('2500'); }
);

$('#showAllButton').click(function() {
    $('.tease').show();
    hoverEnabled = false;
} 
```

`.bind()`或者，您可以使用事件名称（例如 hover.showTease）绑定悬停事件，并将`.unbind()`其绑定到 showall 函数中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T09:37:58.123

您可以通过这种方式解除“悬停”的绑定：

```
$(this).unbind('mouseenter mouseleave'); 
```

当您想禁用悬停时，只需执行此操作。或者，为了更好地控制而不是继续添加和删除事件，您可能希望引入一个添加和删除的类，并且仅在将某个类设置为元素时才执行悬停动作。像这样：

```
$(this).hover(
    function() { 
        if ($(".yourElement").hasClass("allowHover")) { 
            ... 
        }  
    },
    function() { 
        if ($(".yourElement").hasClass("allowHover")) { 
            ... 
        }  
    }
 ); 
```

然后只需添加或删除一个类，悬停将被启用或禁用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T09:39:36.590

```
var allShown = false;

function showAll(){
    //some imaginary code

    //we're showing all
    allShown = true;
} 
```

这应该是 DOM 准备好的范围。

```
$(function(){
   $('.img33, .img40, .img50, .img60').hover(function(){ 
        if(allShown === false){
            $(this).children('.tease').fadeIn('900');
        }
    },function(){  
        if(allShown === false){
            $(this).children('.tease').fadeOut('2500');
        }
    });

    $('ele').on('something', function(){
        //some code..
        allShown = false;
    });

    //some event to fire the showAll function
    $('ele').on('something', function(){
        showAll();
        allShown = true;
    });

}); 
```

# python - 将字符串转换为日期时间并转换回具有不同格式的字符串

> ID：13358203
> 
> 赞同：0
> 
> 时间：2012-11-13T09:26:57.113
> 
> 标签：python, datetime, strptime, strftime

我怎样才能得到这个格式的字符串`"%Y-%m-%d %H:%M:%S"`？

```
myDateTime = 'datetime.datetime(2012, 11, 16, 3, 0)' 
```

我努力了：

```
x = myDateTime.strftime("%Y-%m-%d %H:%M:%S") 
```

我得到了错误：

> “属性错误：'str' 对象没有属性`'strftime'`”。

我也尝试使用`strptime`但`myDateTime`不是日期时间类型。

我的目标是让字符串被逐字解释，然后我将拥有一个可以使用的日期时间对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T09:30:57.267

您的对象`mydatetime`被引号包围：它是一个字符串。只需删除引号：

```
myDateTime = datetime.datetime(2012, 11, 16, 3, 0)
myDatetime.strftime("%Y-%m-%d %H:%M:%S") 
```

如果`mydatetime`是返回字符串的函数的输出（例如您的 SQL 查询），您可以尝试使用`eval`将其转换为常规 Python 对象。**不过要非常小心**，因为`eval`它根本不安全。您可能想改用第三方模块[`asteval`](http://newville.github.com/asteval/index.html)。

# php - PHP MYSQL - 如果 table1.id 存在于 table2 中，则突出显示数据库表行

> ID：13358206
> 
> 赞同：0
> 
> 时间：2012-11-13T09:26:59.103
> 
> 标签：php, phpmyadmin, compare, record, highlight

我有点卡在这里一段时间，也许你们能帮帮我吗？我想突出显示来自一个表的数据库记录表，并检查该表中的 id 是否也存在于第二个表中。
让我更具体一点：

```
Table 1: Projects (projectid pk)
Table 2: Reservations (projectid fk) 
```

一个简单的示例代码，以保持简单：

```
while( $record=mysql_fetch_array($result) ) 
{
    $projectid=$record['projectid'];
    echo "<tr>". $projectid ."</tr>; 
} 
```

所以这很好用，我得到了数据库中存在的每个 projectid 的所有表行，但是如何将此`$projectid`变量传递给另一个查询，该查询检查它是否存在于另一个表中，如果存在，则回显出不同的东西？这是我的代码，可能没有多大意义，但至少逻辑在那里......我希望？：

```
while( $record=mysql_fetch_array($result) ) 
{
    $projectid=$record['projectid'];
    $hasreservationquery = ("
                            SELECT * 
                            FROM reservelist rl
                                INNER JOIN project p on rl.projectid = p.projectid
                            WHERE rl.projectid = $projectid
                            ");
    $hasreservationqueryresult = mysql_query($hasreservationquery) or die(mysql_error());
    if ($hasreservationqueryresult > 1)
    {
    echo "<tr id='hasreservation'>";
    }
    else
    {
    echo "<tr>";
    }
    echo "". $projectid .""; 
} 
```

不幸的是，这会返回所有突出显示的表，而不仅仅是其中真正有保留的表。我究竟做错了什么？？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T09:29:54.713

您似乎从未检查过行数。你需要改变你的 if 语句：

```
if (mysql_num_rows($hasreservationqueryresult) > 0) 
```

这现在将检查是否返回 1 个或多个结果（如果您希望在突出显示之前返回 x + 1 个结果，请将其更改为 > x）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T09:32:55.580

mysql_query 不返回受影响的行数。

我想像

if($hasreservationqueryresult && mysql_num_rows($hasreservationqueryresult) > 0)

除此之外，我肯定会更好地安排您的代码并重新考虑您的变量名:)

# android - 从 Ormlite 读取日期时的时区问题

> ID：13358207
> 
> 赞同：11
> 
> 时间：2012-11-13T09:27:00.293
> 
> 标签：android, ormlite

我发现更改设备时区时，通过 Ormlite 读取的日期无法正确返回。

例如，当从阿姆斯特丹时间切换到伦敦时间时，日期应该向前移动一个小时。但是，当从数据库中读取日期时，它会返回相同的时间，但现在是伦敦时区。

我按如下方式存储我的字段：

```
@DatabaseField(canBeNull = true)
private Date registration; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-13T09:27:00.293

查看数据库，我发现 Ormlite 默认`Date`以`YYYY-MM-DD HH:MM:SS.SSS`. 由于没有关于时区的信息，它假定设备的当前时区。

## 简单的方法：时间戳

诀窍是将其存储在 UTC 时间戳中：

```
@DatabaseField(canBeNull = true, dataType = DataType.DATE_LONG)
private Date registration; 
```

## 进阶方式：persister

如果您想亲自编写自己的持久化器，可​​以这样做：

```
@DatabaseField(persisterClass = DateConverter.class)
private Date registration; 
```

在哪里：

```
public static class DateConverter extends LongType {

    private static final DateConverter singleton = new DateConverter();

    protected DateConverter() {
        super(SqlType.LONG, new Class<?>[] {
                Date.class
        });
    }

    public static DateConverter getSingleton() {
        return singleton;
    }

    @Override
    public Object javaToSqlArg(FieldType fieldType, Object javaObject) 
            throws SQLException {
        if (javaObject instanceof Date) {
            return ((Date) javaObject).getTime();
        }
        return javaObject;
    }

    @Override
    public Object sqlArgToJava(FieldType fieldType, Object sqlArg, int columnPos)
            throws SQLException {
        if (sqlArg instanceof Long) {
            return new Date((Long) sqlArg);
        }
        return null;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-12T12:21:14.830

如果您正在寻找一种全局方式来配置 OrmLite 如何持久保存 Date 字段，您可以使用`DataPersisterManager`该类 ( [Github](https://github.com/j256/ormlite-core/blob/master/src/main/java/com/j256/ormlite/field/DataPersisterManager.java) )。

例如，要将所有日期保存为 UTC 中的 Longs（自纪元以来的毫秒数）而不是默认值，即没有时区的字符串，您可以这样做：

```
 DataPersisterManager.registerDataPersisters(DateLongType.getSingleton()); 
```

那么就不需要为每个 Date 字段配置`dataType = DataType.DATE_LONG`.

# c# - 在 C# 中将 &#____ 转换为 \u____？

> ID：13358209
> 
> 赞同：2
> 
> 时间：2012-11-13T09:27:06.307
> 
> 标签：c#, .net, html, unicode

我想展示一个特殊的角色。

我找到了[显示所有内容的链接](http://amp-what.com/?tagline=Search%3Cbr%3EUnicode%20Characters&utm_expid=63334077-0&utm_referrer=http://t.co/oklb2ro0#q=arrow)。

让我们以这个 char 为例：

![在此处输入图像描述](../Images/b4acbbf3f4b32050afead298264f51b8.png)

2个问题）

*   如何将`&darr;`, 转换`&#8595;`为`\u____`unicode char ？（ C＃）

*   我什么时候应该使用`&darr;`vs`&#8595;`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T09:41:59.770

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T09:40:21.160

在 c# 中始终使用 unicode 转义约定。对于您的代码点，它将是`\u8559`.

```
Console.WriteLine("Down arrow - \u8559"); 
```

字符实体引用`&darr;`可用于 HTML 和 XML。但是，大多数处理器不知道这个名称。所以使用`&#8595`.

```
<text>Down arrow - &#8585;</text> 
```

请参阅[http://en.wikipedia.org/wiki/Character_entity_reference](http://en.wikipedia.org/wiki/Character_entity_reference)和[http://msdn.microsoft.com/en-us/library/aa664669(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa664669(v=vs.71).aspx)

# wpf - MahApps 风格不应适用于所有项目

> ID：13358211
> 
> 赞同：1
> 
> 时间：2012-11-13T09:27:10.747
> 
> 标签：wpf, xaml, mahapps.metro

在将 MahApps.Metro 样式添加到我的资源字典时，我注意到这些样式正在应用于我的应用程序中的所有项目，这不是预期的效果。我只想使用 ToggleSwitch 和 Combobox 样式。如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T09:51:04.003

仅将以下资源字典放入您的 xaml

```
<ResourceDictionary>
  <ResourceDictionary.MergedDictionaries>
    <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Colours.xaml" />
    <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Fonts.xaml" />
    <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Controls.Buttons.xaml" />
    <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Controls.ComboBox.xaml" />
    <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Accents/Blue.xaml" />
    <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Accents/BaseLight.xaml" />
  </ResourceDictionary.MergedDictionaries>

  <Style TargetType="ToggleButton" BasedOn="{StaticResource MetroToggleButton}" />
  <Style TargetType="ComboBox" BasedOn="{StaticResource MetroComboBox}" />
  <Style TargetType="ComboBoxItem" BasedOn="{StaticResource MetroComboBoxItem}" />
</ResourceDictionary> 
```

希望这可以帮助

# c# - 如何知道计算机的“远程主机的 DNS 名称”？

> ID：13358212
> 
> 赞同：2
> 
> 时间：2012-11-13T09:27:32.773
> 
> 标签：c#

我有两个程序用于通过 UDP 协议（​​客户端和服务器）相互通信，但是当客户端使用方法 Connect（字符串主机名，int 端口）连接到服务器时，什么也没发生。这是代码：

```
 udpclient.Connect("asuspc",6500);
            string duongdan = tbduongdan.Text;
            Byte[] sendbyte = Encoding.ASCII.GetBytes(duongdan);
            udpclient.Send(sendbyte, sendbyte.Length); 
```

“asuspc”是我打算连接的计算机的名称。过了一会才知道主机名是“远程主机的DNS名称”而不是计算机的名称，那么“远程主机的DNS名称”是什么？如何知道“远程主机的DNS名称”计算机的远程主机”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T09:41:46.420

在服务器端，（仅获取 IP 地址的代码）

```
// get the ip and port number where the client will be listening on
static IPEndPoint GetClientInfo()
{
    // wait for client to send data
    using (UdpClient listener = new UdpClient(6500))
    {
        IPEndPoint groupEP = new IPEndPoint(IPAddress.Any, 6500);
        byte[] receive_byte_array = listener.Receive(ref groupEP);

        return groupEP;
    }
} 
```

然后获取IP

```
var ip = clientInfo.Address.ToString();
    var port = clientInfo.Port;

UdpClient client = new UdpClient(new IPEndPoint( IPAddress.Any, 6500));
client.Connect(ip, port);  // use ip address 
```

然后在客户端，您可以使用缓冲区接收数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T09:37:47.157

嗯...我认为一些 TCP/IP 阅读会对您有很大帮助:-)

每台机器都有一个分配的 IP 地址。为了不必记住那些长 IP 地址，创建了 DNS 服务器，所以你可以写“host.domain.com”，你的 DNS 服务器告诉你这个“机器 DNS 名称”对应于 IP 地址 xx.xx.xx .xx。

也就是说，要知道一台机器的“DNS名称”，在windows（和linux）下你可以写：

nslookup ip_address_of_the_machine

示例：nslookup 192.168.1.2

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T14:10:27.987

根据定义，UDP 是一种无连接协议。您无需连接即可发送/接收数据。

请注意，调用`Connect()`对象`UdpClient`只是[设置默认*远程*主机，这样您*就*](http://msdn.microsoft.com/en-us/library/c4w4cta7.aspx)*不必在每次使用该`Send`方法时都指定它。所以不要指望在客户端调用该`Connect`方法后会“发生”任何事情。*

 *顺便说一句，如果您的服务器和客户端都在您的私有 LAN 上，为什么不使用计算机的 IP 呢？*例如*

```
// replace 192.168.1.44 with the server's private IP
udpclient.Connect("192.168.1.44",6500);
string duongdan = tbduongdan.Text;
Byte[] sendbyte = Encoding.ASCII.GetBytes(duongdan);
udpclient.Send(sendbyte, sendbyte.Length); 
```*

# scala - 在 Scalaz7 中管理导入

> ID：13358213
> 
> 赞同：12
> 
> 时间：2012-11-13T09:27:43.320
> 
> 标签：scala, scalaz, scalaz7

我在一个项目中使用 scalaz7，有时我会遇到导入问题。最简单的入门方法是

```
import scalaz._
import Scalaz._ 
```

但有时这会导致冲突。到目前为止，我一直在做以下稍微痛苦的过程：

*   制定一个需要与我的实际代码相同的导入的最小示例
*   将该示例复制到单独的项目中
*   使用选项编译它`-Xprint:typer`以找出代码在隐式解析后的样子
*   在原始项目中导入所需的隐式。

虽然这可行，但我想简化它。我看到 scalaz7 有更细粒度的导入，但我不完全理解它们是如何组织的。例如，我看到一个可以做

```
import scalaz.std.option._
import scalaz.std.AllInstances._
import scalaz.std.AllFunctions._
import scalaz.syntax.monad._
import scalaz.syntax.all._
import scalaz.syntax.std.boolean._
import scalaz.syntax.std.all._ 
```

等等。

> 这些子导入是如何组织的？

例如，假设我想使用验证。我需要什么，例如注入验证隐式并进行以下编译？

```
3.fail[String] 
```

做`ValidationNEL[A, B]`一个实例怎么样`Applicative`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T13:02:49.210

这篇博文详细解释了 scalaz7 中的包结构和导入点菜：http: [//eed3si9n.com/learning-scalaz-day13](http://eed3si9n.com/learning-scalaz-day13)

对于您的具体示例，对于 3.failure[String] 您需要：

```
import scalaz.syntax.validation._ 
```

验证已经有一个方法`ap`：

```
scala> "hello".successNel[Int] ap ((s: String) => "x"+s).successNel[Int]
res1: scalaz.Validation[scalaz.NonEmptyList[Int],java.lang.String] = Success(xhello) 
```

要获取 <*> 运算符，您需要以下导入：

```
import scalaz.syntax.applicative._ 
```

然后你可以这样做：

```
"hello".successNel[Int] <*> ((s: String) => "x"+s).successNel[Int] 
```

# java - 替代 JDBC-ODBC 桥

> ID：13358217
> 
> 赞同：5
> 
> 时间：2012-11-13T09:27:57.807
> 
> 标签：java, jdbc, odbc, jdbc-odbc

在 Java 8 中，[JDBC-ODBC-Bridge 将被移除](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7176225)。典型的错误是：

> java.lang.ClassNotFoundException: sun.jdbc.odbc.JdbcOdbcDriver

你知道可能的替代品吗？我找到了易软。但是这个桥需要一个额外的服务器，它不在 Java VM 内运行。它是类型 3 驱动程序而不是类型 1 驱动程序。还有其他选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-09-28T14:03:27.387

另一种解决方案是从 1.7 JRE 中获取 ODBC 内容并将其打包到它自己的 JAR 文件中。

为此（这适用于 Windows 64，但过程应该相同），您需要`JdbcOdbc.dll`从 1.7 JRE bin 中取出并将其复制到 1.8 JRE bin 中。

接下来，将 1.7 JRE 的内容提取`lib\rt.jar`到另一个位置。提取后，删除除

```
sun\
    jdbc\
        odbc\
            *
    security\
        action\
            LoadLibraryAction.class 
```

然后创建一个包含剩余内容的 JAR 文件（JAR 的根内容应该是 META-INF 和 sun）。将 JAR 文件复制到 1.8 JRE 的`lib\ext`文件夹中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-05-17T08:55:15.000

[同时，我们为我们的报告软件i-net Clear-Reports](https://www.inetsoftware.de/products/clear-reports)编写了我们自己的基于 JNA 的 JDBC-ODBC-Bridge 。目前该驱动程序不是官方产品。但如果您有兴趣，可以联系我们。

# php - 具有特殊字符的值在 mysql 数据库中最终不同

> ID：13358219
> 
> 赞同：0
> 
> 时间：2012-11-13T09:28:04.690
> 
> 标签：php, mysql, ajax

**地址.js**

```
function addAdress(){
var s = document.getElementById('addStreetName').value;
var sn = document.getElementById('addStreetNumber').value;
var sl = document.getElementById('addStreetLittera').value;
var sz = document.getElementById('addZipCode').value;
var sa = document.getElementById('addAreaCode').value;

$.ajax({
    url: 'db/addAdress.inc.php',
    type:'POST',
    dataType: 'json',
    data: { 
        addStreetName: s,
        addStreetNumber: sn,
        addStreetLittera: sl,
        addZipCode: sz,
        addAreaCode: sa
    },
    success: function(output_string){
        $('#addAdressResultBox').append(output_string);
    },
    error: function (xhr, ajaxOptions, thrownError) {
    alert(xhr.status);
    alert(thrownError);
  }
});
} 
```

**添加地址.inc.php**

```
include('../inc/conn.inc.php');

$query = "INSERT INTO comhem_profiler_adresses (comhem_profiler_adresses_street, comhem_profiler_adresses_street_number, comhem_profiler_adresses_littera, comhem_profiler_adresses_zip_code, comhem_profiler_adresses_area_code)
VALUES ('" . $_POST['addStreetName'] . "', '" . $_POST['addStreetNumber'] . "', '" . $_POST['addStreetLittera'] . "', '" . $_POST['addZipCode'] . "', '" . $_POST['addAreaCode'] . "'";
$addAdress = mysql_query($query) or die(mysql_error()); 
mysql_close(); 
```

在这个脚本中，我想将地址添加到数据库中。但是当它们最终出现在数据库中时，特殊字符 å ä ö en 完全是其他字符。Sörbyvägen 最终像 Sörbyvägen 一样。我不知道在哪里看这个改变。

它似乎不是数据库，因为我使用脚本将这些更改为它们的 html 对应项。SÃ¶rbyvÃ¤gen 仍然出现在数据库中，但与 html 对应。并尝试了 htmlspecialchars()。在数据库中仍以 SörbyvÃ¤gen 的形式出现。

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T09:35:37.147

确保您的桌子`default-character-set`是`utf8`并且`default-collation`是`utf8_general_ci`

还要确保在连接到 MySQL 后使用`mysql_set_charset("UTF8", $connection);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T09:30:50.327

您需要将此类字符正确编码为 UTF-8，并设置您的数据库以使用 UTF-8，然后它会像魅力一样工作。您还需要知道将其正确转换为 utf-8 的基本编码是什么

# winforms - HelperProvider 总是打开索引文件

> ID：13358220
> 
> 赞同：1
> 
> 时间：2012-11-13T09:28:05.300
> 
> 标签：winforms, chm, context-sensitive-help

我想为 winforms 应用程序构建一个上下文相关的帮助，为此我使用一个引用 HelperProvider 组件的类，HelpNamespace 设置为索引 html 文件，当加载表单时，我将表单中的每个控件注册到带有我从配置文件中获得的主题的帮助程序提供者：

```
helpProvider.SetShowHelp(control, true);
        helpProvider.SetHelpNavigator(control, helpNavigator);
        helpProvider.SetHelpKeyword(control, helpKeyword); 
```

调试时，我确信某些控件配置了一些与索引文件不同的主题，但是在运行并按 F1 时，它始终是打开的索引文件（HelpNamespace）。当为每个控件使用 HelperProvider 实例并且没有为所有控件使用单个实例时，效果很好！为什么我不能对所有控件使用一个 helperProvider 实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:46:03.927

每个控件都需要 SetHelpKeyword。HelpNavigator.TopicId 可能对内部带有主题 ID 的 CHM 有用。

我在上面的代码示例中缺少“.Topic”。尝试下面的代码或从以下位置下载一个工作示例：
[http ://www.help-info.de/files_download/CSharp2008_CHM.zip](http://www.help-info.de/files_download/CSharp2008_CHM.zip)

```
 // set F1 help topic for controls on this form
        helpProvider1.SetHelpNavigator(this.btnStart, HelpNavigator.Topic);
        helpProvider1.SetHelpKeyword(this.btnStart, @"/Garden/flowers.htm");
        helpProvider1.SetHelpNavigator(this.btnExit, HelpNavigator.Topic);
        helpProvider1.SetHelpKeyword(this.btnExit, @"/Garden/tree.htm");
        helpProvider1.SetHelpNavigator(this.chkShowHelpWithNavigationPane, HelpNavigator.Topic);
        helpProvider1.SetHelpKeyword(this.chkShowHelpWithNavigationPane, @"/HTMLHelp_Examples/jump_to_anchor.htm#AnchorSample"); 
```

# c# - Solr 4.0 和 Solrnet 原子更新

> ID：13358222
> 
> 赞同：4
> 
> 时间：2012-11-13T09:28:18.400
> 
> 标签：c#, solr, solrnet

众所周知，solr 4.0 支持原子更新。 [http://wiki.apache.org/solr/UpdateXmlMessages#Optional_attributes_for_.22field.22](http://wiki.apache.org/solr/UpdateXmlMessages#Optional_attributes_for_.22field.22) solrnet 支持吗？如果是，我可以知道语法。万分感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-05T23:49:10.327

感谢您提供的链接，请执行以下操作（进行明显更改以符合您的要求并假设您正在使用一些 DI 容器，以便通过注册 SolrFacility 来处理您的 IsolrOperations 和 IsolrConnection）：

```
 private readonly ISolrOperations<Document> _solr;
    private readonly ISolrConnection _solrConnection;

    public SolrRecordRepository(ISolrOperations<Document> solr, ISolrConnection solrConnection)
    {
        _solr = solr;
        _solrConnection = solrConnection;
    } 
```

...

```
 public void UpdateField(int id, string fieldName, int value, bool optimize = false)
    {
        var updateXml = string.Format("<add><doc><field name='id'>{0}</field><field name='{1}' update='set'>{2}</field></doc></add>", id, fieldName, value);
        _solrConnection.Post("/update", updateXml);

        _solr.Commit();

        if (optimize)
            _solr.Optimize();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T14:32:19.610

请注意，原子更新非常有限。如果您期望更新功能 a-la 数据库 - 它还没有。在引擎盖下，文档是使用存储的字段重新创建的。当您不想重新发送所有字段并且不关心将所有字段存储在索引中时，它会很方便。据我所知，“真正的”更新即将到来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T12:43:50.890

据我所知，SolrNet 还不支持原子更新，我没有看到它列在[SolrNet 项目问题列表中，也没有](http://code.google.com/p/solrnet/issues/list)[在 GitHub 上的 SolrNet 提交中](https://github.com/mausch/SolrNet/commits/master)提及。

# ruby-on-rails - 为什么 Rails 仅在我是 root 时才有效？

> ID：13358225
> 
> 赞同：1
> 
> 时间：2012-11-13T09:28:30.620
> 
> 标签：ruby-on-rails, macos, bash

我在 Mac OSX 10.7.4 上。所以我在 root 时用 RubyGem 安装了 rails。

当我是 root 时，`rails -v`会产生这个：

```
bash-3.2# rails -v
Rails 3.2.8 
```

但是，当我不是 root 时`rails -v`，会产生以下结果：

```
Sreejiths-MacBook-Pro:~ sreejith$ rails -v
/opt/local/lib/ruby/site_ruby/1.8/rubygems/dependency.rb:247:in `to_specs': Could not find railties (>= 0) amongst [bundler-1.2.1, rake-0.9.2.2, rubygems-bundler-1.1.0, rvm-1.11.3.5] (Gem::LoadError)
    from /opt/local/lib/ruby/site_ruby/1.8/rubygems/dependency.rb:256:in `to_spec'
    from /opt/local/lib/ruby/site_ruby/1.8/rubygems.rb:1231:in `gem'
    from /opt/local/bin/rails:22 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T09:37:51.263

当以 root 身份在终端时，gem 的加载路径是什么。您可以通过进入 irb 并键入 来找到它`$LOAD_PATH`。是`$LOAD_PATH`您可以访问的东西吗？宝石是否安装到根目录的主目录（或子目录）中？

您使用的是 rbenv 或 rvm 之类的东西吗？这两个工具都为每个用户而不是每个系统设置 rubies。因此，当您以您的身份登录时，以 root 身份拥有一组 gem 是不够的。

最后，您总是可以尝试`sudo gem install bundler`重新安装 bundler，然后`bundle install`重新安装您的 gem。

# list - 尝试滚动 Ext.List 时出现未捕获的类型错误

> ID：13358229
> 
> 赞同：2
> 
> 时间：2012-11-13T09:28:40.047
> 
> 标签：list, extjs, sencha-touch-2

我目前正在试验 Sencha Touch 2。我制作了一个简单的 json-store，其中包含的项目多于我的屏幕可以显示来测试滚动，但是每次我尝试滚动时都会出现以下错误：

```
Uncaught TypeError: Cannot call method 'getCount' of null 
```

我试图找出问题所在，但还没有找到解决方案。也许任何人都可以提供帮助？这是我的示例文件：

主机.json：

```
{
"hosts": [
    {
        "host_name": "host 1",
        "status": "pending"
    },
    {
        "host_name": "host 2",
        "status": "normal"
    },
    {
        "host_name": "host 3",
        "status": "critical"
    }

            ...

]
} 
```

我的店铺：

```
Ext.define('myapp.store.MyStore', {
extend: 'Ext.data.Store',

config: {
    storeId: 'mystore',
    model: 'myapp.model.MyModel',

    proxy: {
        type: 'ajax',
        url: 'host.json',
        reader: {
            type: 'json',
            rootProperty: 'hosts'
        }
    },
    autoLoad: true
}

}); 
```

列表视图：

```
 Ext.define('myapp.view.MyListView', {
extend: 'Ext.dataview.List',
alias: 'widget.mylistview',

config: {
    items: {
        xtype: 'list',
        store: 'mystore',
        itemTpl: '<div class="service_status_{status}">{host_name}</div>'
    }
}
}); 
```

以及调用 List-View 的视图：

```
Ext.define('myapp.view.Main', {
extend: 'Ext.Container',

config: {
    layout: {
        type: 'vbox',
        aligh: 'stretch'
    },

    items: [
        {
            xtype: 'mytoolbar',
            docked: 'top',
            height: 50
        },
        {
            xtype: 'mylistview',
            flex: 1
        }
    ]
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-03T11:59:24.223

使用“适合”布局可能会解决它。

**您肯定也应该更改以下内容：**

这已经定义了一个列表

```
Ext.define('myapp.view.MyListView', {
    extend: 'Ext.dataview.List',
    xtype: 'mylistview', 
```

这是列表的配置：

```
 config: { 
```

在这里，您在实际使用的列表中添加一个列表。这不会顺利。这将是某些事情没有按预期工作的一个很好的理由。

```
 items: {
        xtype: 'list',
        store: 'mystore',
        itemTpl: '<div class="service_status_{status}">{host_name}</div>'
    } 
```

# objective-c - iPhone - 找不到我的应用程序

> ID：13358232
> 
> 赞同：0
> 
> 时间：2012-11-13T09:28:47.717
> 
> 标签：objective-c, ios, xcode, cocoa-touch, cocoa

我有一个超级奇怪的问题。我正在开发一个 iOS 应用程序，最近我注意到我在 iPhone 上找不到我的应用程序。它在搜索应用程序时显示在列表中，当我尝试在 Xcode 上构建我的应用程序时它失败，因为我的应用程序的核心数据模型与我在 Xcode 中构建的模型不同。所以我需要从我的 iPhone 中删除我的应用程序，但是当我根本找不到实际的应用程序时很难。

我尝试重新启动我的 iPhone 无济于事，我还浏览了跳板中的每个屏幕以找到我的应用程序，但它不存在。

Xcode 4.5 和 iOS 6.0.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T09:32:40.103

在 iOS 6 上，当您在 Springboard（启动器）中搜索应用程序时，它会显示包含该应用程序的文件夹的名称（如果该应用程序位于文件夹中）。这可能会帮助你找到它。

但是，如果您使用 Xcode 安装了该应用程序，则有一种更简单的方法来删除它。从菜单栏中选取“窗口”>“管理器”，然后点按“管理器”窗口中的“设备”标签。在设备列表中找到您的设备，然后单击设备下方的“应用程序”行。管理器将向您显示您使用 Xcode 在设备上安装的所有应用程序的列表。您可以单击列表中的应用程序，然后按键盘上的删除键，或单击窗口底部的删除按钮，将应用程序从设备中删除。

# python - 如何在Python中将范围内的所有值映射到n，范围（n）

> ID：13358233
> 
> 赞同：1
> 
> 时间：2012-11-13T09:28:47.007
> 
> 标签：python, python-3.x

我正在尝试制作我的第一个 Python 计算器，它可以添加用户给出的给定值。问题是有时我们可能有几个值要添加，即`a + b`不仅仅是我们有的添加，`a + b + d + g + h + ...`所以我定义了一个范围，直到`n`用户`n`输入的位置。

现在的问题是，如果用户`5`在范围内给出一个值，那么如何映射该范围内的每个值以输入要添加的值？

编码：

```
 def main():
    print("how many no.s are we dealing with?");
    n=int(input(""));
    for i in range(n):
        print("addition:"); 
```

简而言之，我只希望用户首先键入要添加的值，然后用户必须键入要键入的所有这些值，以便计算器添加它们。

这就像如果用户有 3 个数字范围，`[a + b + c]`那么用户会`3`在第一个提示中输入，然后他会`a, b, c`在每个提示中输入值以给出总数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T09:50:05.987

```
def main():
    n=int(input("how many no.s are we dealing with?"))
    result = 0
    for i in range(n):
        value = float(input('enter next number to add'))
        result += value
    print('the result is {0}'.format(result)) 
```

注意缺少`;`

其工作原理是将结果初始化为 0。然后每次循环迭代时，都会要求用户输入一个数字。然后将该数字添加到结果中。

* * *

但是，有一种更简单的方法：

```
sum_string = input('please enter a sum. for example: "1 + 2 + 10 ..."') #1
result = sum([float(i) for i in sum_string.split('+')])                 #2
print('the result is {0}'.format(result))                               #3 
```

这是如何工作的：

在第 1 行：您要求用户输入一个字符串并存储它

在第 2 行：你做了很多......我会逐个检查它：

*   `sum_string.split('+')`获取用户输入的字符串并将其转换为列表。例如：`1+2+ 45'.split('+') => ['1','2',' 45']`
*   继续上面的示例：`[float(i) for i in ['1','2',' 45']] => [1,2,45]` 这称为列表推导。太棒了，完全值得一看
*   最后`sum([1,2,45`]) => 48`

在第 3 行：我们打印出结果。我不确定你想用它做什么

注意：这不适用于负数，但可以适应这样做......

# javascript - 参数传递与本地存储

> ID：13358236
> 
> 赞同：5
> 
> 时间：2012-11-13T09:28:58.053
> 
> 标签：javascript, html, local-storage, url-parameters

我有一个用 HTML5 / javascript 编写的大厅。.json 文件为大厅和可以从它启动的各种其他 HTML5 游戏提供了一些配置参数。这些参数可以在 window.open 字符串中传递给游戏（形式为：

```
window.open(http://www.myLovelyDomain.com/index.html?username=bob&token=aaaXXX") 
```

或者可以保存在 localStorage 中，并在游戏发布后由游戏访问。

我的问题是，最好的（最安全/最可能导致最少错误/等）方法是什么？我知道用户可以关闭 localStorage，但我不知道有多少人这样做。有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T11:54:30.703

[`localStorage`](https://developer.mozilla.org/en-US/docs/DOM/Storage#localStorage)over URL 查询字符串的优点

*   不太可能被用户编辑
*   不太可能被复制粘贴给其他人
*   可以跨会话持续存在
*   更广泛的字符选择
*   （略微）更少的带宽使用（更短的 GET）
*   可以存储整个文件
*   基本用户不可见

缺点

*   没有额外的ajax，服务器无法访问变量
*   可能更难调试
*   `sessionStorage`如果每次会议都发生变化（或考虑），可能需要额外检查
*   旧浏览器不支持
*   不能直接使用跨域（可能是优势，看你怎么看）

有关支持的列表和最大尺寸，请参见[**此处**](http://dev-test.nemikor.com/web-storage/support-test/)。

# jquery - IE8 jQuery .text() 返回空字符串

> ID：13358242
> 
> 赞同：0
> 
> 时间：2012-11-13T09:29:31.660
> 
> 标签：jquery, text, internet-explorer-8, string

我在 jQuery 代码中有这样的字符串：

```
$('#global-container').text();
$('#global-container aside').text(); 
```

所有浏览器，包括 IE8，都为 $('#global-container').text() 返回相同的非空字符串，但是：

对于 `$('#global-container aside').text()` 所有浏览器（但不是 IE8 ！！！为什么？）返回包含许多空格和两个数字的非空字符串。IE8 只返回空字符串。为什么？

# msbuild - tf.exe 历史 * 得到“无法确定源代码管理服务器。”

> ID：13358244
> 
> 赞同：30
> 
> 时间：2012-11-13T09:29:40.407
> 
> 标签：msbuild

我们刚刚从 TFS 2010 升级到 TFS 2012，我们遇到了问题

tf.exe 历史记录 *

收到以下错误消息

“无法确定源控制服务器。”

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-30T09:16:55.577

遇到同样的问题并尝试了 /collection 的各种值，最后找到了正确的值，所有 TFS2012 tf 命令再次开始工作。

在 VS 的 Team Explorer 中右键单击服务器名称并选择属性，您需要整个 URL 参数，包括 http、端口号等所有内容。对我来说那是

```
http://devserver:8080/tfs/defaultcollection 
```

所以命令只是

```
tf workspaces /collection:"http://devserver:8080/tfs/defaultcollection" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-15T09:48:59.470

或者，您可以通过添加直接在 Visual Studio 中配置一次连接。之后，tf.exe 将自动使用正确的服务器。

该解决方案使用 Visual Studio 2017 对我有用。

# c++ - 如果有任何 QObject，为什么 QLibrary 无法解析函数？

> ID：13358245
> 
> 赞同：0
> 
> 时间：2012-11-13T09:29:41.747
> 
> 标签：c++, c, qt

我有一个库，它可以像链接一样导出一个函数`extern "C"`。我在库中使用 Qt，但如果我创建任何从 QObject 派生的类，`QLibrary::resolve()`则无法解析我的导出函数。使用`nm -C path_to_lib`，我看到它在那里：

```
00000000000103a0 T GetMyPlugin 
```

但`QLibrary::resolve()`仍然返回 0。只有在我删除了从 QObject 派生的任何类（并使用 moc）之后，我的符号才成功解析。

所以我想知道为什么当符号明显存在时它会继续失败？

# wcf - 图像的 WCF REST 服务在 Azure 上不起作用？

> ID：13358249
> 
> 赞同：2
> 
> 时间：2012-11-13T09:29:47.880
> 
> 标签：wcf, image, rest, azure, stream

我有一个工作的 WCF REST 服务 (.NET 4.0) 用于下游图像。但是，当此服务发布到 Azure 网站 (.NET 4.5) 时，加载的图像会随机损坏。这永远不会在本地发生，甚至不会在域内发生。

在 Azure 上，它并不一致。有时它会加载，有时它不会。您可以在此处查看损坏情况：

[http://telproabrdev.azurewebsites.net/logo/vyrobce/get?id=4bced4ee-7162-45a3-a495-7764305e2d56&format=PNG](http://telproabrdev.azurewebsites.net/logo/vyrobce/get?id=4bced4ee-7162-45a3-a495-7764305e2d56&format=PNG)

这是我的代码（基本上）：

合同：

```
[OperationContract]
[WebGet(UriTemplate = "get?id={id}&format={format}", 
    RequestFormat = WebMessageFormat.Xml, 
    ResponseFormat = WebMessageFormat.Xml, 
    BodyStyle = WebMessageBodyStyle.Bare)]
Stream GetImage(String id, String format); 
```

执行：

```
public Stream GetImage(String id, String format)
{
   // stuff, stuff, stuff

   using (Stream original = GetImageStream())
   {
       Stream result = CreateThumbnailStream(original, width, height);
       result.Seek(0, SeekOrigin.Begin);
       return result;
   }
} 

private Stream GetImageStream() 
{
    Bitmap copy = new Bitmap(Resource.SomePicture);
    Stream result = new MemoryStream();
    image.Save(result, ImageFormat.Png);
    return result;
}

private Stream CreateThumbnailStream(Image image, Int32 width, Int32 height)
{
    Image image = Image.FromStream(stream);
    Image result = new Bitmap(width, height, PixelFormat.Format32bppArgb);

    // shrinking routine skipped for brevity

    return result;
} 
```

到目前为止，我已经尝试过：

1.  删除所有“使用”-> 无效（但可能存在内存泄漏）
2.  将 MemoryStream 包装在 BufferedStream -> 不
3.  删除 Seek() -> 没有图像（如预期的那样）

我做错了什么？它适用于不同的项目（虽然不是 Azure）。.NET 4.0 与 4.5 的兼容性是罪魁祸首吗？

# php - 对 zend_db_table 对象使用表别名

> ID：13358251
> 
> 赞同：0
> 
> 时间：2012-11-13T09:29:48.973
> 
> 标签：php, zend-framework, zend-db, zend-db-table

假设我有一张桌子：

```
$someTable = new Zend_Db_Table ('sometable'); 
```

我知道我可以使用表的文字名称构建查询。

```
$sel = $someTable -> select () 
                  -> from ('sometable', array ('col_foo', 'col_bar')) 
                  -> where ('some_condition') 
```

并且我可以为表格设置别名。

```
$sel = $someTable -> select () 
                  -> from (array ('alias' => 'sometable'), array ('col_foo', 'col_bar')) 
                  -> where ('some_condition') 
```

我也知道我可以在 from() 调用中直接使用 Zend_Db_Table ：

```
$sel = $someTable -> select () 
                  -> from ($someTable, array ('col_foo', 'col_bar')) 
                  -> where ('some_condition') 
```

但是当我尝试像下面那样对表对象进行别名时，我得到了一个致命错误。

```
$sel = $someTable -> select () 
                  -> from (array ('alias' => $someTable), array ('col_foo', 'col_bar')) 
                  -> where ('some_condition') 
```

> 可捕获的致命错误： Zend_Db_Table 类的对象无法在...中转换为字符串

在我看来，这是有问题的行为，因为 from()、join() 等方法可以处理将 Zend_Db_Table 对象传递给它们，但当您想给它起别名时却不行！

上面的例子有点做作和简化来说明问题。真正的代码是在表之间进行连接，但是随着表对象的传入，我提前不知道它们的名称是什么。当然，我可以使用 info() 来解决上述问题，以获取表名并将它们作为字符串注入，但这意味着额外的代码对我来说看起来很乱。此外，这是 Zend_Db 在没有这种变通方法的情况下应该能够应对的情况。

我正在使用 Zend Framework 1.7.6。并继承 Zend_Db_Table_Abstract 来制作我的表对象。不幸的是，我无权安装 Zend 的升级版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T11:06:55.163

ZF 的升级版本无济于事，但您应该争论当前版本的 ZF 和 PHP 的安全角度（尝试永远不会有坏处；））：

```
$sel = $someTable -> select () 
                  -> from (array ('alias' => $someTable), array ('col_foo', 'col_bar')) 
                  -> where ('some_condition') 
```

alias 想要成为字符串而不是对象，并且`$someTable`当前是对象。我认为你想要一些事情，比如`$someTable->getConfig()->name;`应该做你想做的事。

摘自：`Zend_Db_Table_Abstract`_`from()`

```
/**
 * Adds a FROM table and optional columns to the query.
 *
 * The first parameter $name can be a simple string, in which case the
 * correlation name is generated automatically.  If you want to specify
 * the correlation name, the first parameter must be an associative
 * array in which the key is the correlation name, and the value is
 * the physical table name.  For example, array('alias' => 'table').
 * The correlation name is prepended to all columns fetched for this
 * table.
 */ 
```

第一个参数也可以是一个实例，`Zend_Db_Select()`但不能将对象与数组混合。

考虑一下，您可以编写一个简单的实体类，它允许您为任何表名构建 Zend_Db_Table 的实例。

```
class Application_Model_DbTable extends Zend_Db_Table_Abstract
{
    protected $_name;
    protected $_primary;

    public function __construct($name, $primary = 'id') {
        $this->_name = $name;
        $this->_primary = 'something_other_then_id';

    }

    //implement __set and __get if you want

} 
```

这将允许您只传递表名和该表的主 ID。您仍然可以使用整个 Zend_Db_Table api 以及您设计的任何自定义方法。

祝你好运。

# mysql - mysql：从不同的列填充列中的数据

> ID：13358255
> 
> 赞同：2
> 
> 时间：2012-11-13T09:29:58.050
> 
> 标签：mysql, sql, database

我想根据某些条件从不同列中填充列中的数据，例如，我有一个表：

```
MyTable( id, area_id, name ) 
```

带有样本数据：

```
10 1 <name>
20 2 <name>
30 3 <name>
40 4 <name>
50 1 <name>
60 2 <name>
70 3 <name>
80 4 <name> 
```

现在我希望将此表更新为

```
10 1 Area 1
20 2 Area 2
30 3 Area 3
40 4 Area 4
50 1 Area 1
60 2 Area 2
70 3 Area 3
80 4 Area 4 
```

如何在单个查询中实现这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T09:34:50.397

由于列`name`已经存在，请使用`CONCAT`

```
UPDATE tableName
SET name = CONCAT('Area ', area_id) 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!2/ada2f/1)

如果您想添加其他列，请阅读文章

*   [**向现有 MySQL 表添加列**](http://www.tech-recipes.com/rx/378/add-a-column-to-an-existing-mysql-table/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T09:42:37.967

**[SQLFIDDLEexample](http://sqlfiddle.com/#!2/df31a/1)** 更新您的表：

```
UPDATE MyTable
SET `name` = CONCAT('Area ', area_id); 
```

插入新列并更新它

```
ALTER TABLE `MyTable` ADD `new_name` VARCHAR( 50 ) NOT NULL ;

UPDATE MyTable
SET `new_name` = CONCAT('Area ', area_id); 
```

结果：

```
| ID | AREA_ID |   NAME | NEW_NAME |
------------------------------------
| 10 |       1 | Area 1 |   Area 1 |
| 20 |       2 | Area 2 |   Area 2 |
| 30 |       3 | Area 3 |   Area 3 |
| 40 |       4 | Area 4 |   Area 4 |
| 50 |       1 | Area 1 |   Area 1 |
| 60 |       2 | Area 2 |   Area 2 |
| 70 |       3 | Area 3 |   Area 3 |
| 80 |       4 | Area 4 |   Area 4 | 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T09:37:19.997

添加新列（如评论中所述）：

```
ALTER TABLE MyTable ADD areaName VARCHAR(60); 
```

要使用列中的新值更新现有表`name`：

```
UPDATE MyTable
SET name = CONCAT('Area ', area_id) 
```

# asp.net-mvc - asp.net mvc，多个 CustomAuthorize Role Providers

> ID：13358259
> 
> 赞同：0
> 
> 时间：2012-11-13T09:30:16.413
> 
> 标签：asp.net-mvc, roleprovider, custom-authentication

我试图将我的应用程序锁定到用户和管理员可以看到整个控制器但只有管理员可以创建、删除和编辑的每种方法。

我创建了一个包含该方法的 CustomAuthorize 类：

```
 public class CustomAuthorize : AuthorizeAttribute
    {
        public override void OnAuthorization(AuthorizationContext filterContext)
        {
            base.OnAuthorization(filterContext);
            Debug.WriteLine("Show me the filterContext " + filterContext);
            if (filterContext.Result is HttpUnauthorizedResult)
            {
                Debug.WriteLine("Why is this going to the redirect to AccessDenied?");
                filterContext.Result = new RedirectResult("~/AccessDenied/Index");
            }
        }
    } 
```

我的 RoleProvider 类：

```
namespace Office.WebUI.Security {
    public class OfficeRoleProvider : RoleProvider
    {

        public override void AddUsersToRoles(string[] usernames, string[] roleNames)
        {
            throw new NotImplementedException();
        }

        public override string ApplicationName
        {
            get
            {
                throw new NotImplementedException();
            }
            set
            {
                throw new NotImplementedException();
            }
        }

        public override void CreateRole(string roleName)
        {
            throw new NotImplementedException();
        }

        public override bool DeleteRole(string roleName, bool throwOnPopulatedRole)
        {
            throw new NotImplementedException();
        }

        public override string[] FindUsersInRole(string roleName, string usernameToMatch)
        {
            throw new NotImplementedException();
        }

        public override string[] GetAllRoles()
        {
            throw new NotImplementedException();
        }

        public override string[] GetRolesForUser(string username)
        {
            Debug.WriteLine("Get the username" + username);
            using (EFDbContext db = new EFDbContext()) >           
            {
                User user = db.Users.FirstOrDefault(u => u.UserName.Equals(username, >stringComparison.CurrentCultureIgnoreCase) || u.Email.Equals(username, StringComparison.CurrentCultureIgnoreCase));
                //User user = db.TaskPrivilege.FirstOrDefault(u => >u.UserName.Equals(username, StringComparison.CurrentCultureIgnoreCase) || u.Email.Equals(username, StringComparison.CurrentCultureIgnoreCase));

                if (user != null)
                {
                    var roles = from ur in user.UserRoles
                                from r in db.Roles
                                where user.role.RoleID == r.RoleID
                                //where ur.RoleID == r.RoleID
                                select r.Name;
                    if (roles != null)
                        return roles.ToArray();
                    else
                        return new string[] { }; ;
                }
                else
                {
                    return new string[] { }; ;
                }
            }
        }

        public override string[] GetUsersInRole(string roleName)
        {
           throw new NotImplementedException();
        }

        public override bool IsUserInRole(string username, string roleName)
        {
            Debug.WriteLine("The username is " + username + " And the Role it is using is >" + roleName);
            using (EFDbContext db = new EFDbContext())
            {
                User user = db.Users.FirstOrDefault(u => u.UserName.Equals(username, StringComparison.CurrentCultureIgnoreCase) || u.Email.Equals(username, StringComparison.CurrentCultureIgnoreCase));

                if (user != null)
                {
                    var roles = from ur in user.UserRoles
                                from r in db.Roles
                                where user.role.RoleID == r.RoleID
                                //where ur.RoleID == r.RoleID
                                select r.Name;
                    if (user != null)
                        return roles.Any(r => r.Equals(roleName, >StringComparison.CurrentCultureIgnoreCase));
                    else
                        return false;
                }
                else
                {
                    return false;
                }
            }
        }

        public override void RemoveUsersFromRoles(string[] usernames, string[] roleNames)
        {
            throw new NotImplementedException();
        }

        public override bool RoleExists(string roleName)
        {
            throw new NotImplementedException();
        }
    }

} 
```

在我的数据库中，我有一个 Roles 表，其中包含 Role 和 RoleID 作为列，有 2 个值 Administrator 和 User 作为角色，roleID 作为 PK，1 = Administrator & 2 = User。另一个名为 Users 的表，其中包含 UserID、Username 和 role_RoleID

当我将用户分配给 role_RoleID 为 1（管理员）并使用锁定控制器时

> [CustomAuthorize(角色 = "管理员"]

这行得通。

当我分配一个 role_RoldID = 2 并使用以下方法锁定时：

> [CustomAuthorize(角色 = "用户"]

这不行吗？

另一个问题是，如何将 2 个角色分配给控制器？然后我想将每个方法锁定为 1 个用户角色。

希望这是有道理的，我希望有人可以帮助我。

谢谢

史蒂文

基本上我有一个控制器，我已经把 `[CustomAuthorize(Roles = "Administrators, Support")]` 它锁定了，所以两个角色都可以看到控制器。

然后我有创建/删除和编辑方法：

```
[CustomAuthorize(Roles = "Administrators")] 
```

所以基本上我想向两个角色展示整个控制器，但只有管理员可以创建/编辑/删除。

当我在 user table = 2(User) 中分配一个 roleID 时，整个应用程序都会为该用户中断。分配 RoldID = 1（管理员）它适用于所有分配了 roldID 1 的人。

目前我有方法

```
public override string[] GetRolesForUser(string username)
{

    using (EFDbContext db = new EFDbContext())  

    {
        User user = db.Users.FirstOrDefault(u => u.UserName.Equals(username, StringComparison.CurrentCultureIgnoreCase) || u.Email.Equals(username, StringComparison.CurrentCultureIgnoreCase));

        if (user != null)
        {
            var roles = from ur in user.UserRoles
                        from r in db.Roles
                        where user.role.RoleID == r.RoleID

                        select r.Name;
            if (roles != null)
                return roles.ToArray();
            else
                return new string[] { }; ;
        }
        else
        {
            return new string[] { }; ;
        }
    }
}

> public override bool IsUserInRole(string username, string roleName)
>         {
>             
>             using (EFDbContext db = new EFDbContext())
>             {
>                 User user = db.Users.FirstOrDefault(u => u.UserName.Equals(username, StringComparison.CurrentCultureIgnoreCase)
> || u.Email.Equals(username,
> StringComparison.CurrentCultureIgnoreCase));
> 
>                 if (user != null)
>                 {
>                     var roles = from ur in user.UserRoles
>                                 from r in db.Roles
>                                 where user.role.RoleID == r.RoleID
>                                 //where ur.RoleID == r.RoleID
>                                 select r.Name;
>                     if (user != null)
>                         return roles.Any(r => r.Equals(roleName, >StringComparison.CurrentCultureIgnoreCase));
>                     else
>                         return false;
>                 }
>                 else
>                 {
>                     return false;
>                 }
>             }
>         } 
```

我知道我必须更改 IsUserInRole 方法，以便它像这样处理数组参数，`public override bool IsUserInRole(string username, string[] roleName)`

但不知道如何在 linq 中处理它，主要是在 IsUserInRole 方法中：

> ```
> return roles.Any(r => r.Equals(roleName, >StringComparison.CurrentCultureIgnoreCase)); 
> ```

目前它在 GetRolesForUser 方法上失败了，在我相信的 where 子句中，

> 其中 user.role.RoleID == r.RoleID

错误信息如下所示：

已经有一个与此命令关联的打开的 DataReader，必须先关闭它。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.InvalidOperationException：已经有一个与此命令关联的打开的 DataReader，必须先关闭。

源错误：

第 66 行：var roles = 来自 user.UserRoles 中的 ur 第 67 行：来自 db.Roles 中的 r 第 68 行：其中 user.role.RoleID == r.RoleID

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T09:50:50.987

多个角色可以这样完成： `[CustomAuthorize(Roles = "Administrator, User")]` 但是看到你已经编写了这段代码，我想你已经知道了？

如果您只想`Users`避免进入您的创建/编辑/删除功能，为什么不使用默认的授权功能呢？意思是，把`[CustomAuthorize(Roles = "Administrator")]`编辑/创建/删除和`[CustomAuthorize(Roles = "Administrator, User")]`其他任何东西放在首位......

我猜是`IsUserInRole`被要求授权？此方法应采用 string[] roleName 数组，而不仅仅是字符串。

编辑：改变

```
 var roles = from ur in user.UserRoles
                        from r in db.Roles
                       where user.role.RoleID == r.RoleID
                        //where ur.RoleID == r.RoleID
                       select r.Name; 
```

至

```
var roles = user.UserRoles.select(q=>q.Roles.Name); 
```

# objective-c - 数据 = [NSData dataWithContentsOfURL:theUrl];

> ID：13358271
> 
> 赞同：2
> 
> 时间：2012-11-13T09:31:05.470
> 
> 标签：objective-c, nsurlconnection, nsdata, http-status-code-400

如果发生 4xx 或 5xx 错误，数据对象会怎样？程序会崩溃吗？数据对象是否获得任何类型的数据（响应错误或损坏的数据）？或者数据对象将等于零？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T09:34:06.903

你会`nil`回来的。如果您想知道失败的原因，请使用：

```
[NSData dataWithContentsOfURL:options:error:] 
```

（[参考](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/Reference/Reference.html#//apple_ref/occ/clm/NSData/dataWithContentsOfURL%3aoptions%3aerror%3a)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T09:35:02.003

引用自[NSData 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/Reference/Reference.html)。

一个数据对象，包含来自 aURL 指定位置的数据。`nil`如果无法创建数据对象，则返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T09:41:58.913

从客户端的角度来看，4xx 或 5xx 不是错误。它是一个有效的返回码，可以包含数据（堆栈跟踪、错误原因）。你是对的，这种行为是无证的。如何确定的唯一方法是测试它......

# cakephp-2.0 - 我想在 cakephp 中从 webroot 中给出文件路径

> ID：13358272
> 
> 赞同：1
> 
> 时间：2012-11-13T09:31:09.527
> 
> 标签：cakephp-2.0

我想给出webroot之外的文件路径，如何给出？

```
$uploads_dir =  WWW_ROOT .'/uploads';

                    $tmp_name = $this->data["Image"]["filedata"]["tmp_name"];
                    $name = $this->data["Image"]["filedata"]["name"];
                    move_uploaded_file($tmp_name, "$uploads_dir/$name"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T09:50:35.020

你需要另一个常数。Cake 有一些全局定义的常量可供您使用，请参阅[此处的文档](http://book.cakephp.org/2.0/en/core-libraries/global-constants-and-functions.html#core-definition-constants)。

如果您想将图像保存在 webroot 目录之外的目录中（但不确定这是否明智），因此您应该使用`APP`而不是`WWW_ROOT`因为前者保存了您应用程序所在目录的路径。

# angularjs - 如何验证根本没有发出http请求？

> ID：13358275
> 
> 赞同：6
> 
> 时间：2012-11-13T09:31:14.980
> 
> 标签：angularjs

如何验证没有调用任何 http 请求方法来执行任何请求。我有这个代码：

```
 $scope.getSubnetsPageDetails = function (pageNumber) {
        $http.get(URLS.subnetsPagesCount(pageNumber)).success(function (response) {
            $scope.pageDetails = response;
        }).error(function (response, errorCode) {

            });
    }; 
```

这个测试：

```
it("should not allow request with negative page number", function () {

        scope.getSubnetsPageDetails(-1);
        //verify that htt.get is not invoked at all

    }); 
```

如何验证 http.get 没有被调用？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-13T09:56:05.430

您可以使用[$httpBackend mock](http://docs.angularjs.org/api/ngMock.$httpBackend)`verifyNoOutstandingRequest()`中的方法测试是否未进行任何调用。

通常这些验证是在`afterEach`Jasmine 的测试部分完成的。除此之外，调用另一个方法是很常见的，`verifyNoOutstandingExpectation()`以验证是否实际调用了所有预期的调用。

这是代码，您需要在其中注入`$httpBackend`模拟：

```
var $httpBackend;
beforeEach(inject(function($injector) {
  $httpBackend = $injector.get('$httpBackend');
})); 
```

然后你测试并在最后：

```
afterEach(function() {
  $httpBackend.verifyNoOutstandingExpectation();
  $httpBackend.verifyNoOutstandingRequest();
}); 
```

当然，您可以调用`$httpBackend.verifyNoOutstandingRequest()`内部单个测试。提到的[http://docs.angularjs.org/api/ngMock.$httpBackend](http://docs.angularjs.org/api/ngMock.$httpBackend)页面包含大量关于该主题的信息。

# iphone - ios - NSLog 显示详细视图未按正确顺序显示

> ID：13358276
> 
> 赞同：0
> 
> 时间：2012-11-13T09:31:17.627
> 
> 标签：iphone, ios, arrays, string, storyboard

我正在尝试使用情节提要将数据从一个 ViewController 传递到另一个。

请注意此日志消息：

```
2012-11-13 22:25:41.711 Modern Notes[8991:15d03] DetailView - (null) 
2012-11-13 22:25:41.714 Modern Notes[8991:15d03] MainView - {
CurrentDate = "2012-11-13 05:12:46 +0000";
NoteInString = "This is the first note. It will appear here while testing the app.";
} 
```

您将看到 DetailView - 什么都没有，而 MainView 显示数组的内容。Array 是从 MainView 传递的。现在这两条日志消息都是由这一行生成的：

```
NSLog(@"DetailView - %@", _notedict); 
```

和

```
NSLog(@"MainView - %@", noteDetailViewControler.notedict); 
```

notedict 是保存信息的字典。正如你所看到的（我认为）理论上两个日志消息都应该显示这个数组对吗？

**现在我觉得 DetailView 显示在 MainView 之前的日志中似乎很奇怪，我认为它应该是相反的方式？**

为任何提示干杯，并乐意在需要时提供任何详细信息。

**编辑：**

好的，这就是我整理我的详细信息的地方：

在方法中：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath { 
```

我有一条线

```
noteDetailViewControler.notedict = [_listNotes objectAtIndex:indexPath.row]; 
```

现在我认为我的问题是这条线只在本地设置，并没有转移到另一个视图控制器 - 我是对的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T09:36:45.187

当您在 DetailView 中登录时，显然`_notedict`尚未设置或已再次删除。您需要向我们展示**何时（以何种方式）**初始化数据、**何时记录**数据以及**何时显示**mainView/detailView。对于现在提供的信息，我们无法再提供帮助。

# c++ - 如何在 http 代理后面使用 ftp url 下载文件

> ID：13358281
> 
> 赞同：1
> 
> 时间：2012-11-13T09:31:26.763
> 
> 标签：c++, qt, proxy, network-programming, qt4

我在 http/https 代理后面。因此，要使用 QNetworkAccessManager 下载文件，我将代理设置如下：

```
 if(no_proxy)
    {
        QNetworkProxyFactory::setUseSystemConfiguration (false);
        QNetworkProxy::setApplicationProxy(QNetworkProxy::NoProxy);
    }
    else if(system_proxy)
    {
        QNetworkProxyQuery pQuery(QUrl(QLatin1String("http://www.google.com")));
        QList<QNetworkProxy>listOfProxies =QNetworkProxyFactory::systemProxyForQuery(pQuery);
        QNetworkProxy::setApplicationProxy(listOfProxies.first());
    }
    else if(manual_proxy)
    {
        proxy.setHostName(address);
        proxy.setPort(port);
        if(http_proxy)
            proxy.setType(QNetworkProxy::HttpProxy);
        else if(socks_proxy)
            proxy.setType(QNetworkProxy::Socks5Proxy);
        else if(ftp_proxy)
            proxy.setType(QNetworkProxy::FtpCachingProxy);
        QNetworkProxy::setApplicationProxy(proxy);
    } 
```

现在在 http squid 代理服务器后面，这段代码在 http url 的情况下可以正常工作。但是，如果我尝试使用 ftp url 下载文件，则下载失败并出现错误

```
no suitable proxy found 
```

它似乎没有为 ftp url 使用 http 代理。但是，我们有这样的选项，比如在 Firefox 中：

```
use this proxy server for all protocols 
```

如何在 Qt 中做类似的事情！

**更新：**

```
void DownloadThread::startDownload() 
```

{ QString args =downUrl,tempFN;

```
QUrl url = QUrl::fromEncoded(args.toLocal8Bit());

request.setUrl(url);
request.setRawHeader("User-Agent", userAgent);
request.setAttribute(QNetworkRequest::HttpPipeliningAllowedAttribute, true);
reply.setCookieJar(cookieJar);
reply=manager.get(request);
connect(reply, SIGNAL(readyRead()),this,
            SLOT(saveToDisk()));
... 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:34:07.440

您是否尝试过明确设置 Qftp 代理？

```
int setProxy ( const QString & host, quint16 port ) 
```

这可能会让您更开心，但是是的，您必须正常为每个连接设置代理，但是，您尝试使用的代理总是有可能不支持 FTP？如果您向我传递有关代理的更多详细信息以及您的问题所在（例如请求/响应代码）

同样在 squid.conf 中可能想要更改/添加以下内容以防它们不存在

```
acl SSL_ports port 443 21
acl FTP proto FTP
always_direct allow FTP
http_access allow ftp 
```

此外，值得检查防火墙是否允许**端口 20、21 和 443**（我知道这是一个简单的检查，但我经常发现像这样的事情可能是一个真正痛苦的根本原因）。

您是否有生成的日志文件的副本？查看返回的错误代码会很有趣/很有帮助。此外，您是否尝试过手动单步执行程序以查看运行时变量中包含的内容，这将使您更好地了解正在发生的事情，因为可能一切都很好并且有一个简单的方法推进变量的内容将在短时间内引导您进入（可能不是这种情况，但通常值得一试）。

# python - 无法在 Python 中启动 smtp

> ID：13358283
> 
> 赞同：0
> 
> 时间：2012-11-13T09:31:32.667
> 
> 标签：python, smtp, telnet

我尝试使用以下代码使用 python 启动 smtp 服务器：

```
import smtplib
smtp_server = smtplib.SMTP('localhost') 
```

我收到以下错误：

```
File "test.py", line 2, in <module>
    smtp_server = smtplib.SMTP('localhost')
  File "/usr/local/lib/python2.7/smtplib.py", line 242, in __init__
    (code, msg) = self.connect(host, port)
  File "/usr/local/lib/python2.7/smtplib.py", line 302, in connect
    self.sock = self._get_socket(host, port, self.timeout)
  File "/usr/local/lib/python2.7/smtplib.py", line 277, in _get_socket
    return socket.create_connection((port, host), timeout)
  File "/usr/local/lib/python2.7/socket.py", line 571, in create_connection
    raise err 
```

我尝试过`telnet localhost 25`，`telnet localhost`但他们都给出了以下错误：

```
Trying 127.0.0.1...
telnet: connect to address 127.0.0.1: Connection refused
telnet: Unable to connect to remote host: Connection refused 
```

相同的 python 代码在我的另一台机器上运行得很好。

有什么建议吗？

谢谢。

更新：

我遇到问题的机器正在运行 Python 2.7.2，而代码运行良好的机器正在运行 Python 2.6.2。我不知道这是否是原因之一。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T09:47:20.213

`smtplib`是 SMTP 协议客户端。您正在寻找的是[`smtpd`](http://docs.python.org/2/library/smtpd.html).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T09:36:24.430

问题是 smtplib 没有提供 SMTP 服务器实现，它实现了 SMTP 客户端。最有可能的是，代码尝试连接到 localhost 并失败。见[http://docs.python.org/2/library/smtplib.html](http://docs.python.org/2/library/smtplib.html)

您所写的另一台机器是否已经在运行 SMTP 服务器？

你想做什么？

# mp3 - 如何将任何 mp3 文件转换为 .wav 16khz mono 16bit

> ID：13358287
> 
> 赞同：37
> 
> 时间：2012-11-13T09:31:46.133
> 
> 标签：mp3, wav, sample-rate

请帮助选择将任何 mp3 文件转换为特殊 .wav 的解决方案 - 我是 Linux 命令行工具的新手，所以现在对我来说很难。

我需要从任何 mp3 文件中获取具有 16khz 单声道 16 位声音属性的 wav。我在尝试

ffmpeg -i 111.mp3 -ab 16k out.wav,

但我得到的 wav 与 mp3 (22k) 的速率相同。

请帮助构建正确的命令行

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-09-29T01:53:50.823

kdazzle 的解决方案几乎就在那里 - 它仍然输出立体声 wav，这是一个稍微修改的版本，可以生成单声道：

```
ffmpeg -i 111.mp3 -acodec pcm_s16le -ac 1 -ar 16000 out.wav 
```

另外，如果这是为了预处理 sphinx 4 的语音数据，请参见此处：[Convert audio files for CMU Sphinx 4 input](https://stackoverflow.com/questions/13693006/convert-audio-files-for-cmu-sphinx-4-input)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-16T01:29:23.713

尝试这个：

```
ffmpeg -i 111.mp3 -acodec pcm_s16le -ar 16000 out.wav 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-13T20:27:43.043

使用这个例子：

```
import os 
from pydub import AudioSegment
import numpy as np 
from tqdm import tqdm 

for src in tqdm (mp3_files):

    des = src.replace('.mp3','.wav')
    try:
        sound = AudioSegment.from_mp3(src)
        sound.set_channels(1)
        sound = sound.set_frame_rate(16000)                
        sound = sound.set_channels(1)    
        sound.export(des, format="wav")

    except:
        print(src)
        continue 
```

# jquery - Mouseleave mouseout 和 focus

> ID：13358288
> 
> 赞同：1
> 
> 时间：2012-11-13T09:31:53.083
> 
> 标签：jquery

我想对我的想法进行一些确认，以便我可以更好地理解我所经历的不一致之处。

Mouseleave 和 mouseenter 应该和 mouseout 和 mouseover 一起使用。混合说 Mouseleave 和 mouseover 是不好的做法。

Mouseleave 最初仅适用于 IE jQuery 规范化 mouseleave / mouseenter 以便它可以跨浏览器使用

mouseleave 和 mouseout 之间的主要区别在于，当退出父级时触发 mouseleave（这是我想要的），而当在父级内的兄弟姐妹之间移动以及离开父级时触发 mouseout（这是我不想要的） ）。

所以我的问题是行为不一致。使用 mouseleave 时，我发现脚本可能会也可能不会对绑定到事件的代码进行操作。

无论如何都叫我傻瓜。但是我观察到，如果我将鼠标移到父级的侧面或底部，就会触发 #send_To mouseleave。如果我将鼠标移出顶部，则不会。

所以我发现通过在其他地方设置焦点，这种行为被消除了。然而，它仍然不完全一致。并且在某些情况下，无论您以哪种方式退出，事件都不会被触发。再次请随意大笑，但我发现快速移动鼠标比缓慢移动鼠标更有可能触发事件。我想不出任何合理的合理理由，我只是在报告我的发现。

我想了解为什么我会看到这种对我没有任何意义的行为。

```
$("#send_To").bind("mouseleave",
    function(event){
        $("#send_To").css("display","none");
        $("#message").focus();        // added this seems to improve behaviour
    }
); 
```

请有人建议。这是因为 jquery 正在规范化。是否有确保触发 mouseleave 事件的铸铁方法。

# php - 如何使用 youtube api 从播放列表中获取所有视频？

> ID：13358290
> 
> 赞同：9
> 
> 时间：2012-11-13T09:32:00.027
> 
> 标签：php, xml, youtube, youtube-api

现在我正在使用这个链接

```
http://gdata.youtube.com/feeds/api/playlists/plalistID 
```

从 YouTube 播放列表中检索视频。但问题是只有 25 个视频。但播放列表包含 100 个视频。如何从播放列表中获取所有视频？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-15T22:07:09.650

**YouTube API v3**

您需要请求[**PlaylistItems > 列表**](https://developers.google.com/youtube/v3/docs/playlistItems/list)提要：

```
https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&maxResults=25&playlistId=PLVfin74Qx3tV8bgAhzbfDpnfPoGmJWAcn&key=YOUR_API_KEY 
```

API 返回的 JSON 将包含以下属性：

*   `nextPageToken`
*   `prevPageToken`

在查询字符串参数中传递这些值之一`pageToken`以检索结果集中的下一个或上一个“页面”：

```
https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&maxResults=25&playlistId=PLVfin74Qx3tV8bgAhzbfDpnfPoGmJWAcn&pageToken=xxYYzz&key=YOUR_API_KEY 
```

JSON 还包含`pageInfo.resultsPerPage`和`pageInfo.totalResults`属性。

* * *

^(YouTube API v2 答案[在这里](https://stackoverflow.com/revisions/13407091/2)。)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-13T09:49:25.980

Youtube 让您每次请求最多获取 50 个条目。
响应包含一些`<link>`元素。如果还有更多记录要获取其中一条记录，则其形式为，`<link rel='next' ...`例如

```
<link
  rel='next'
  type='application/atom+xml'
  href='https://gdata.youtube.com/feeds/api/playlists/plalistID?start-index=26&amp;max-results=25&amp;v=2'
/> 
```

搜索此元素并检索 href 属性指向的文档，直到响应没有`<link rel='next'`元素。

# java - Java/Android/Eclipse：IllegalArgumentException：已添加

> ID：13358291
> 
> 赞同：1
> 
> 时间：2012-11-13T09:32:02.383
> 
> 标签：java, android, eclipse, illegalargumentexception

我的Eclipse 环境中有一个 Java 项目“ *EDNA ”，它使用名为**libosm*和*osmnavigation*的库。

![在此处输入图像描述](../Images/d398459b726899cfe0e18837fecc7a77.png)

我将包含*libosm*和*osmnavigation的“* *EDNA* ”导出到 jar 中。EDNA.jar 被导入我的 Android 2.2 项目“ *Tableted* ”（复制到 libs 文件夹）。*libosm*和*osmnavigation*会自动添加：

 ***![在此处输入图像描述](../Images/f5c2846ce26d21e71d21f4846a9113f0.png)

*Tableted*在“Java Build Path -> Projects”中没有设置任何内容。“Java 构建路径 -> 库”如下所示：

![在此处输入图像描述](../Images/7482206ace50685600f198e206e31b19.png)

当我点击调试时，会发生以下错误：

```
[2012-11-13 09:53:20 - Tableted] Dx bad class file magic (cafebabe) or version (0033.0000)
...while parsing de/hk/econnect/math/CHull.class
...while processing de/hk/econnect/math/CHull.class
[2012-11-13 09:53:20 - Tableted] Dx 
UNEXPECTED TOP-LEVEL EXCEPTION:
java.lang.IllegalArgumentException: already added:     Lcom/bretth/osmosis/core/xml/v0_5/XmlDownloader;
at com.android.dx.dex.file.ClassDefsSection.add(ClassDefsSection.java:123)
at com.android.dx.dex.file.DexFile.add(DexFile.java:163)
at com.android.dx.command.dexer.Main.processClass(Main.java:486)
at com.android.dx.command.dexer.Main.processFileBytes(Main.java:455)
at com.android.dx.command.dexer.Main.access$400(Main.java:67)
at com.android.dx.command.dexer.Main$1.processFileBytes(Main.java:394)
at com.android.dx.cf.direct.ClassPathOpener.processArchive(ClassPathOpener.java:245)
at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:131)
at com.android.dx.cf.direct.ClassPathOpener.process(ClassPathOpener.java:109)
at com.android.dx.command.dexer.Main.processOne(Main.java:418)
at com.android.dx.command.dexer.Main.processAllFiles(Main.java:329)
at com.android.dx.command.dexer.Main.run(Main.java:206)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at com.android.ide.eclipse.adt.internal.build.DexWrapper.run(DexWrapper.java:180)
at com.android.ide.eclipse.adt.internal.build.BuildHelper.executeDx(BuildHelper.java:703)
at com.android.ide.eclipse.adt.internal.build.builders.PostCompilerBuilder.build(PostCompilerBuilder.java:577)
at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:728)
at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:199)
at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:321)
at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:396)
at org.eclipse.core.internal.resources.Project$1.run(Project.java:618)
at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
at org.eclipse.core.internal.resources.Project.internalBuild(Project.java:597)
at org.eclipse.core.internal.resources.Project.build(Project.java:124)
at com.android.ide.eclipse.adt.internal.project.ProjectHelper.doFullIncrementalDebugBuild(ProjectHelper.java:1000)
at com.android.ide.eclipse.adt.internal.launch.LaunchConfigDelegate.launch(LaunchConfigDelegate.java:147)
at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:854)
at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:703)
at org.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch(DebugUIPlugin.java:937)
at org.eclipse.debug.internal.ui.DebugUIPlugin$8.run(DebugUIPlugin.java:1141)
at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)
[2012-11-13 09:53:20 - Tableted] Dx 10 warnings
[2012-11-13 09:53:20 - Tableted] Dx 1 error; aborting
[2012-11-13 09:53:20 - Tableted] Conversion to Dalvik format failed with error 1 
```

* * *

除了添加 jar 之外，我还尝试引用该项目。但这会导致同样的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T09:56:48.100

它们是否在“订购和导出”选项卡下添加和标记？
否则试试这个，这是一个普遍的问题，在我看来是红色的，它不能让它们正确导出。***

# javascript - 使用纯 JavaScript 捕获“点击”事件

> ID：13358292
> 
> 赞同：44
> 
> 时间：2012-11-13T09:32:05.437
> 
> 标签：javascript

如何使用纯 JS 捕获用户的“点击”事件？不幸的是，我不能使用任何库。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-13T09:41:40.577

该`click`事件在鼠标单击和触摸单击时触发。

`touchstart`触摸屏幕时触发该事件。

`touchend`触摸结束时触发该事件。如果阻止默认操作，`click`则不会触发事件。

[http://www.w3.org/TR/touch-events/](http://www.w3.org/TR/touch-events/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-13T09:43:06.787

There are `touchstart`, `touchend` and other events. You can add event listeners for them in this way:

```
var el = document.getElementById('test');
el.addEventListener('touchstart', touchHandler); 
```

More information about native DOM events you can find on [MDN webstite](https://developer.mozilla.org/en-US/docs/DOM/TouchEvent).

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-13T09:39:01.417

这不是我的代码，但我不记得我从哪里得到它，使用成功。它使用 jQuery，但没有用于点击处理本身的额外库或插件。

```
$.event.special.tap = {
    setup: function(data, namespaces) {
        var $elem = $(this);
        $elem.bind('touchstart', $.event.special.tap.handler)
             .bind('touchmove', $.event.special.tap.handler)
             .bind('touchend', $.event.special.tap.handler);
    },

    teardown: function(namespaces) {
        var $elem = $(this);
        $elem.unbind('touchstart', $.event.special.tap.handler)
             .unbind('touchmove', $.event.special.tap.handler)
             .unbind('touchend', $.event.special.tap.handler);
    },

    handler: function(event) {
        event.preventDefault();
        var $elem = $(this);
        $elem.data(event.type, 1);
        if (event.type === 'touchend' && !$elem.data('touchmove')) {
            event.type = 'tap';
            $.event.handle.apply(this, arguments);
        } else if ($elem.data('touchend')) {
            $elem.removeData('touchstart touchmove touchend');
        }
    }
};

$('.thumb img').bind('tap', function() {
    //bind tap event to an img tag with the class thumb
} 
```

我将它用于专门用于 iPad 的项目，因此可能需要调整以同时适用于台式机和平板电脑。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-03-22T13:10:31.713

我自己写了一个小脚本。它不在纯 JS 中，但对我来说效果很好。它防止在滚动时执行脚本，这意味着脚本仅在“点击”事件时触发。

```
$(element)
        .on('touchstart', function () {
            $(this).data('moved', '0');
        })
        .on('touchmove', function () {
            $(this).data('moved', '1');
        })
        .on('touchend', function () {
            if($(this).data('moved') == 0){
                // HERE YOUR CODE TO EXECUTE ON TAP-EVENT
            }
        }); 
```

# ruby-on-rails - 如何让我的规范运行得更快？

> ID：13358295
> 
> 赞同：1
> 
> 时间：2012-11-13T09:32:21.213
> 
> 标签：ruby-on-rails, ruby, rspec

我有几个如下所示的规范文件：

```
describe "My DSL" do

  before :each do
    @object = prepare_my_object
  end

  describe "foo" do

    before :each do
      @result = @object.read_my_dsl_and_store_stuff_in_database__this_is_expensive
    end

    it "should do this" do
      @result.should be_this
    end

    it "should not do that" do
      @result.should_not be_that
    end

    # ... several more tests about the state of @result
  end

  # ...
end 
```

这些测试需要很长时间，主要是因为第二个`before :each`块每次都运行。使用`before :all`instead 并没有真正的帮助，因为它在 external 之前被调用`before :each`。将所有期望放在一个`it`块中会有所帮助，但这被认为是不好的风格。

让我的昂贵方法只执行一次的最佳做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T09:45:00.310

加快rspec最快的方法是完全解耦数据库。*DSL*问题与将*内容进出数据库问题是不同的*问题。如果您有一种方法可以同时进行这两种操作，是否可以将方法分成几部分？

理想情况下，您的 DSL 将在本地缓存，因此不必在每次请求时都从数据库中提取它。它可以在内存中加载一次并在刷新之前保存在那里。

如果您针对本地内存缓存运行并解耦数据库，这会加快速度吗？如果是，那么就是数据库调用很慢。如果您的 DSL 完全加载到内存中并且测试仍然很慢，那么问题出在您的 DSL 本身。

# python - Django：从多对多关系中列出元素

> ID：13358301
> 
> 赞同：0
> 
> 时间：2012-11-13T09:32:44.783
> 
> 标签：python, django, unit-testing, django-models

我想测试创建事物的视图，您可以在其中选择多个用户（以及其他详细信息）。

我定义了一个 Thing 模型，有一个“**用户**”ManyToManyField 到 User 模型（来自 Django 发布的身份验证应用程序）。

这是我的测试代码：

```
class ViewsTest(TestCase):
    def test_create(self):
        my_users = [...some User instances...]
        response = self.client.post("/create/", {...stuff...,
                                'users': [user.id for user in my_users]})
        self.assertEqual(200, response.status_code)
        created_thing = Thing.objects.get(...)
        self.assertListEqual(my_users, [user for user in created_thing.users.all()]) 
```

这个测试通过了，所以一切都很好，但我对最后的列表理解感到恼火。没有更优雅的方式将**created_thing.users**作为列表吗？

我正在使用 Django 1.4.1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T09:38:12.193

列表理解是从 django 创建列表的典型方法，`queryset`因此您所做的非常好。

@PuercoPop 的建议也很好 - 使用`list(created_thing.users.all())`因为它强制将评估结果`queryset`转换为包含用户对象的列表类型对象。

# java - 如何使用 java 和 xmlunit 比较两个具有相同命名空间但前缀不同的 xml

> ID：13358305
> 
> 赞同：9
> 
> 时间：2012-11-13T09:33:00.607
> 
> 标签：java, xml, namespaces, xmlunit

我有 2 个 xml 文件：

问题在于属性前缀。

```
<element xmlns:prefix1="namespace" prefix1:attribute="some value">Some text</element>

<element xmlns:prefix2="namespace" prefix2:attribute="some value">Some text</element> 
```

这两个 xml 是相同的，具有相同的命名空间，但具有不同的前缀。如果我与 xmlunit 进行比较-> 断言失败。我该如何处理？

在相似（）或相同（）比较的情况下，我有错误：

预期属性名称“消息：MessageNameString”但为“null”
预期属性名称“消息：MessageVersion”但为“null”
预期属性名称“null”但为“mes:MessageNameString”
预期属性名称“null”但为“mes：消息版本'

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T10:08:17.373

以下测试通过了“相似”检查但未通过“相同”检查：

```
 String control = "<prefix1:element xmlns:prefix1=\"namespace\" prefix1:attribute=\"x\">Some text</prefix1:element>";
    String test = "<prefix2:element xmlns:prefix2=\"namespace\" prefix2:attribute=\"x\">Some text</prefix2:element>";
    try
    {
        Diff diff = XMLUnit.compareXML( control, test );
        assertTrue( "Similar", diff.similar() );
        assertTrue( "Identical", diff.identical() );
    }
    catch ( Exception e )
    {
        fail( e.getMessage() );
    } 
```

来自 xmlunit API 文档：

*   相同：文档中节点的内容和顺序完全相同
*   相似：文档中节点的内容相同，但存在细微差别，例如兄弟元素的排序、命名空间前缀的值、隐含属性值的使用

因此，使用“类似”检查应该会给你你想要的。

编辑：添加前缀属性，结果相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-24T22:05:21.670

使用 XMLUnit 1.x：

```
// Similar
XMLAssert.assertXMLEqual()

// Identical
XMLAssert.assertXMLIdentical() 
```

* * *

使用 XMLUnit 2.x：

```
import static org.xmlunit.assertj.XmlAssert.assertThat;
...

// Similar
assertThat(xmlResult).and(xmlExpected).areSimilar();

// Identical
assertThat(xmlResult).and(xmlExpected).areIdentical(); 
```

见[https://github.com/xmlunit/xmlunit#comparing-two-documents](https://github.com/xmlunit/xmlunit#comparing-two-documents)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-29T17:15:57.297

```
// identical
XMLAssert.assertXMLEqual(XMLUnit.compareXML(control, test), true)
// similar
XMLAssert.assertXMLEqual(XMLUnit.compareXML(control, test), false) 
```

# java - 生成一个函数的所有堆栈

> ID：13358312
> 
> 赞同：1
> 
> 时间：2012-11-13T09:33:26.583
> 
> 标签：java, eclipse

Eclipse 允许获取对函数的所有引用。我想进一步了解是否有人知道可以递归执行此操作的工具或脚本，即从一个函数中它将生成不同可能的函数堆栈列表以访问它。

我正在寻找这个以确保在我正在查看的意大利面条式旧遗留代码中捕获更改的所有影响。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T09:40:02.493

试试 eclipse 的[Call Hierarchy](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/views/ref-call-hierarchy.htm)。
它是`CTRL`- `ALT`-`H`在 Windows 上，`CTRL`- `OPTION`-`H`在 OS X 上。

（eclipse 3.x的热键，我还没有使用eclipse 4）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T09:42:01.173

它称为[调用层次结构](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/views/ref-call-hierarchy.htm)，您可以使用 Ctrl+Alt+H 打开它

[http://www.javaprogrammingforums.com/java-jdk-ide-tutorials/19-list-shortcuts-key-eclipse.html](http://www.javaprogrammingforums.com/java-jdk-ide-tutorials/19-list-shortcuts-key-eclipse.html)

# php - PHP 中的 & 作为回报（$var & 1）

> ID：13358313
> 
> 赞同：21
> 
> 时间：2012-11-13T09:33:27.153
> 
> 标签：php

> **可能重复：**
> [参考 - 这个符号在 PHP 中是什么意思？](https://stackoverflow.com/questions/3737139/reference-what-does-this-symbol-mean-in-php)

当我阅读[这个 php 页面](http://php.net/manual/en/function.array-filter.php)时，我不确定 $var & 1 中的 & 在做什么。

```
function odd($var)
{
    // returns whether the input integer is odd
    return($var & 1);
} 
```

它是否[返回参考](http://www.php.net/manual/en/language.references.return.php)？我不确定。

如果你能解释它或给我一个 php 页面，我将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-13T09:38:03.730

这是一个按位与运算。所有奇数都有 LSB（最低有效位设置为 1），偶数 - 0。

所以它只是将两个数字“与”在一起。例如 5。用二进制表示为 101。101 & 001 = 001 => true，所以很奇怪。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-13T09:36:04.680

它正在执行按位与**运算**。那是**[位运算符](http://php.net/manual/en/language.operators.bitwise.php)**

> **$a & $b** 在 $a 和 $b 中设置的位被设置。

* * *

在这种情况**下**，`return($var & 1);`将根据**.** **_**`0000....0001` _ **_** _****`$var`****

 ****> 如果数字的二进制表示以 0 结尾，则它是偶数（十进制）。
> 
> 如果一个数字的二进制表示以 1 结尾，则它是奇数（十进制）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-13T09:36:34.657

`&`是[按位和运算符](http://www.php.net/manual/en/language.operators.bitwise.php)。`1`在这种情况下，如果`$var`是奇数，`0`如果是偶数，它将返回`$var`。****

# c# - 如何获取控件的处理程序方法来处理另一个控件的相同事件

> ID：13358315
> 
> 赞同：1
> 
> 时间：2012-11-13T09:33:34.610
> 
> 标签：c#, winforms, reflection, event-handling

我想找出已分配哪些方法来处理控件的事件（从外部），然后分配相同的方法来处理另一个控件的相同事件。我尝试了以下方法但没有成功：

```
private void ReflectMethods(Control control, Control baseControl, string[] excludedEventNames = null, string[] includedEventNames = null)
{
    Type baseType = baseControl.GetType();
    Type ownType = control.GetType();

    foreach (EventInfo baseEventInfo in baseType.GetEvents())
    {
        if (excludedEventNames != null && excludedEventNames.Contains(baseEventInfo.Name))
            continue;

        if (includedEventNames != null && !includedEventNames.Contains(baseEventInfo.Name))
            continue;

        //
        // Checking if current control has the same event..
        //
        foreach (EventInfo ownEventInfo in ownType.GetEvents())
        {
            if (ownEventInfo.Name == baseEventInfo.Name)
            {
                FieldInfo eventField = baseType.GetField(baseEventInfo.Name, BindingFlags.GetField | BindingFlags.NonPublic | BindingFlags.Instance);

                // The above line always returns null, so I cannot get the handler ???
                EventHandler eventHandler = (EventHandler)eventField.GetValue(baseControl);

                ownEventInfo.AddEventHandler(this, eventHandler);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T07:39:12.950

只要您使用的控件由您实施，您的解决方案就很好。发生这种情况是因为编译器为您可以访问的每个事件创建了一个字段，就像您发布的代码中一样。但这不是您可以做到的唯一方法。这类似于属性：通常每个属性都有一个字段，但这不是唯一的方法。

在 Control 的情况下，要获取与事件关联的委托，您必须通过属性 Events 获取 EventHandlerList，然后使用名称由字符串“Event”组成的字段的值获取正确的 EventHandler 访问它通过事件的实际名称（例如，对于 Click，您必须查找字段“EventClick”）。

在这里，您可以找到适用于 WinForm 控件的代码的修改版本。请注意，它不适用于您自己设计的控件。您应该结合这两种方法来管理所有情况。

```
 private void ReflectMethods(Control control, Control baseControl, string[] excludedEventNames = null, string[] includedEventNames = null)
    {
        Type baseType = baseControl.GetType();
        Type ownType = control.GetType();

        EventHandlerList events = typeof(Control).GetProperty("Events", BindingFlags.Instance | BindingFlags.Public | BindingFlags.Static | BindingFlags.NonPublic).GetValue(baseControl, null) as EventHandlerList;
        foreach (EventInfo baseEventInfo in baseType.GetEvents())
        {
            if (excludedEventNames != null && excludedEventNames.Contains(baseEventInfo.Name))
                continue;

            if (includedEventNames != null && !includedEventNames.Contains(baseEventInfo.Name))
                continue;

            //
            // Checking if current control has the same event..
            //
            foreach (EventInfo ownEventInfo in ownType.GetEvents())
            {
                if (ownEventInfo.Name == baseEventInfo.Name)
                {
                    object eventField = typeof(Control).GetField("Event" + baseEventInfo.Name, BindingFlags.NonPublic | BindingFlags.Static).GetValue(baseControl);
                    Delegate aDel = events[eventField];
                    ownEventInfo.AddEventHandler(control, aDel);
                }
            }
        }
    } 
```

# python - 在图像中创建蒙版并使用 Opencv 在 python 中动态附加它们

> ID：13358317
> 
> 赞同：1
> 
> 时间：2012-11-13T09:33:49.587
> 
> 标签：python, dynamic, image-processing, opencv, masking

我有这个程序要讨论，我认为它具有挑战性。这里我有一个 yml 文件，其中包含图像的数据。图像具有存储在此 yml 文件中的 x、y、z 值和强度数据。我已经使用 opencv 加载数据并且它在掩码中工作正常..但是我在动态附加创建的掩码时遇到问题..这是我为解决问题而编写的代码：

```
import cv
from math import floor, sqrt, ceil
from numpy import array, dot, subtract, add, linalg as lin

mask_size = 9
mask_size2 = mask_size / 2

f = open("Classified_Image1.txt", "w")

def distance(centre, point):
    ''' To find out the distance between centre and the point '''
    dist = sqrt(
            ((centre[0]-point[0])**2) +
            ((centre[1]-point[1])**2) +
            ((centre[2]-point[2])**2)
            )
    return dist 

def CalcCentre(points): # Calculates centre for a given set of points
    centre = array([0,0,0])
    count = 0
    for p in points:
        centre = add(centre, array(p[:3]))
        count += 1
    centre = dot(1./count, centre)
    print centre
    return centre

def addrow(data, points, x, y, ix , iy ):# adds row to the mask
    iy = y + 1
    for dx in xrange(-mask_size2 , mask_size2 + 2):
        ix = x + dx 
    rowpoints = addpoints(data, points, iy, ix)
    return rowpoints

def addcolumn(data, points, x, y, ix , iy ):# adds column to the mask 
    ix = x + 1
    for dy in xrange(-mask_size2-1 , mask_size2 + 1): 
        iy = y + dy 

    columnpoints = addpoints(data, points, iy, ix)
    return columnpoints

def addpoints (data, points, iy, ix): # adds a list of relevant points 
    if 0 < ix < data.width and 0 < iy < data.height:
        pnt = data[iy, ix]
        if pnt != (0.0, 0.0, 0.0):
            print ix, iy
            print pnt
            points.append(pnt)

    return points

def CreateMask(data, y, x):
    radius = 0.3
    points = []
    for dy in xrange(-mask_size2, mask_size2 + 1): ''' Masking the data '''
        for dx in xrange(-mask_size2, mask_size2 + 1):
            ix, iy = x + dx, y + dy
            points = addpoints(data, points, iy , ix )

    if len(points) > 3:
        centre = CalcCentre(points)
        distances = []
        for point in points :
            dist = distance(centre, point)
            distances.append(dist)
        distancemax = max(distances)
        print distancemax 

        if distancemax  < radius: ''' Dynamic Part of the Programme'''
            #while dist < radius: # Going into infinite loop .. why ?
                p = addrow(data, points, x, y, ix , iy  )
                q = addcolumn(data, points, x, y, ix , iy )
                dist = distance(centre, point) # While should not go in infinite
                                                #loop as dist is changing here
                print dist 
        print len(p),  p
        print len(q),  q
        points = p + q        
        points = list(set(points))  # To remove duplicate points in the list
        print len(points), points

def ComputeClasses(data):
    for y in range(0, data.height):
        for x in range(0, data.width):
            CreateMask(data, y, x)

if __name__ == "__main__":
    data = cv.Load("Z:/data/xyz_00000_300.yml")
    print "data loaded"
    ComputeClasses(data) 
```

随意提出解决此问题的替代方法/想法。

提前致谢。

# c++ - ifstream 获取从字符到字符串的行更改输出

> ID：13358322
> 
> 赞同：0
> 
> 时间：2012-11-13T09:33:54.190
> 
> 标签：c++, ifstream

C++ ifstream get line change getline 输出从 char 到 string

我有一个文本文件..所以我读了它，我做了类似的事情

```
char data[50];
readFile.open(filename.c_str());

while(readFile.good())
{
readFile.getline(data,50,',');

cout << data << endl;

} 
```

我的问题是不是通过变量名数据创建大小为 50 的字符，我可以将 getline 获取到一个字符串而不是类似

```
string myData;
readFile.getline(myData,','); 
```

我的文本文件是这样的

Line2D，[3,2] Line3D，[7,2,3]

我试过了，编译器说..

getline(std::string&,char) 没有匹配函数

那么是否仍然可以通过分隔符来打破，将值分配给字符串而不是char。

更新：

使用

```
while (std::getline(readFile, line))
{
    std::cout << line << std::endl;
} 
```

它逐行读取，但我想将字符串分成几个分隔符，最初如果使用 char 我会将分隔符指定为第三个元素

readFile.getline(data,50,' **,** ');

如果我用分隔符逗号打破/爆炸，我该如何处理字符串，上面的那个。一行一行地

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T09:35:56.243

使用[`std::getline()`](http://en.cppreference.com/w/cpp/string/basic_string/getline)：

```
std::string line;
while (std::getline(readFile, line, ','))
{
    std::cout << line << std::endl;
} 
```

始终立即检查读取操作的结果，否则代码将尝试处理读取失败的结果，就像发布的代码一样。

尽管可以在其中指定不同的定界符，`getline()`但它可能会错误地将两个无效行视为单个有效行。建议完整检索每一行，然后拆分该行。用于分割线的有用工具是[`boost::split()`](http://www.boost.org/doc/libs/1_52_0/doc/html/string_algo/usage.html#id3331724).

# filemaker - 按未显示的第二个字段对下拉（值）列表进行排序

> ID：13358324
> 
> 赞同：1
> 
> 时间：2012-11-13T09:34:03.680
> 
> 标签：filemaker

如何在**不显示**`sortId`该字段的情况下获得按第二个字段 ( )排序的下拉（值）列表？（我还想包括一个“分隔线”。）

 **我当前的解决方案使用第二个空格字段进行排序，但这会导致不幸的行为。

### 问题：

由于列表需要是动态的（即从表中读取），我不能使用自定义值列表。
该列表应如下所示：

```
zzz (sortId = 1)
aaa (sortId = 2)
bbb (sortId = 3)
-------------------     (Does maybe also have to be defined with a sortId..)
uuu (sortId = 4)
lll (sortId = 5)
rrr (sortId = 6) 
```

但`sortId`不应该显示在下拉列表中。

### 我尝试了什么：

由于下拉列表按字母顺序排序，我发现使用包含“空格”的第二个字段作为排序顺序存在[这个技巧。](http://forums.filemaker.com/posts/cbe27249a0)使用脚本/命令：

```
Substitute(10^sortId - 1, "9", " ") 
```

我能够转换`sortId`成正确数量的空格。然后排序工作......

**但是**，空格仍然显示在下拉列表中，因为我们在值列表中可能有大约 100 个项目，它会将下拉列表向右扩展。

另一个问题是我们需要使用“-”作为分隔线，但是通过这种方法，“-”不会被分隔线替换，因为空白空格仍然填充在它后面，所以它的“-”确实如此不会被分隔线取代。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T06:06:12.843

我相信这种技术类似于您已经尝试过的技术，只是它使用 0 宽度的字节顺序标记，字符 65279：

[http://www.soliantconsulting.com/blog/2012/09/extending-filemaker-pro%E2%80%99s-value-list-sort-capabilities-using-char-function](http://www.soliantconsulting.com/blog/2012/09/extending-filemaker-pro%E2%80%99s-value-list-sort-capabilities-using-char-function)

它不会为您提供分隔线的功能，但您应该能够通过这种方式获得可排序的列表。**

# javascript - 用 JS 编写 CSS 的 LESS 代码

> ID：13358328
> 
> 赞同：0
> 
> 时间：2012-11-13T09:34:14.813
> 
> 标签：javascript, jquery, css, less

有没有办法使用 Javascript 将 LESS 代码转换为 CSS？在 javascript 变量中有 LESS 代码，我想编译它，并将 CSS 代码放入另一个 javascript 变量中。

**编辑！**

我想用 JS 将 LESS 代码片段转换为 CSS。用户在 textarea 中编写 LESS 代码，我的代码必须实时将其转换为 CSS。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T09:36:54.680

如果您使用的是 less.js，您可以执行以下操作：

```
var parser = new(less.Parser);

parser.parse(myLessCode, function (err, tree) {
    if (err) { return console.error(err) }
    css = tree.toCSS();
    console.log(css);
}); 
```

在 jsfiddle 中检查了它，它可以工作：http: [//jsfiddle.net/3AHTW/](http://jsfiddle.net/3AHTW/)

# trigger.io - Apple App Store 可以使用 Trigger Reload 吗？

> ID：13358329
> 
> 赞同：9
> 
> 时间：2012-11-13T09:34:16.187
> 
> 标签：trigger.io

触发“重新加载”功能允许绕过 App Store 批准流程更新应用程序。

这是否违反 App Store 条款？

[http://trigger.io/cross-platform-application-development-blog/2012/08/16/announcing-trigger-io-reload-iterate-fast-on-mobile/](http://trigger.io/cross-platform-application-development-blog/2012/08/16/announcing-trigger-io-reload-iterate-fast-on-mobile/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-13T11:53:25.537

使用 Trigger.io Forge 构建的 iOS 应用程序大致由 iOS SDK 提供的 UIWebView 组件组成，该组件加载您的 HTML/CSS/JavaScript，无论它是与应用程序捆绑在一起还是使用 Trigger.io Reload 获取。

iOS 开发者程序许可协议实际上涵盖了在不使用 App Store 分发机制的情况下更新 UIWebView 资产的主题：

> 3.3.2 应用程序不得下载或安装可执行代码。如果所有脚本、代码和解释器都打包在应用程序中并且未下载，则解释的代码只能在应用程序中使用。上述情况的唯一例外是由 Apple 内置 WebKit 框架下载和运行的脚本和代码，前提是此类脚本和代码不会通过提供与预期和宣传目的不一致的特性或功能来改变应用程序的主要目的提交到 App Store 的应用程序。

来自[https://developer.apple.com/programs/terms/ios/standard/ios_program_standard_agreement_20120912.pdf](https://developer.apple.com/programs/terms/ios/standard/ios_program_standard_agreement_20120912.pdf)（您需要登录 Apple 开发者中心才能查看）。

# highcharts - Highcharts 在导出时添加图例

> ID：13358333
> 
> 赞同：6
> 
> 时间：2012-11-13T09:34:29.133
> 
> 标签：highcharts, legend

将图表导出为 PNG 时，我正在尝试在饼图上添加图例。这是我的代码：

```
var chart_23_106;
$(document).ready(function () {
chart_23_106 = new Highcharts.Chart({
    chart: { type: 'pie', renderTo: 'container_23_106', plotBackgroundColor: null, plotBorderWidth: null, plotShadow: false },
    title: { text: 'NRJ' },
    tooltip: { pointFormat: '{series.name}: <b>{point.percentage}%</b>', percentageDecimals: 1 },
    plotOptions: {
        pie: { borderWidth: 0, shadow: false, allowPointSelect: true, cursor: 'pointer', dataLabels: { enabled: false } }
    },
    colors: ['#9F9F9F','#BE6EBE','#FFA74F','#B7B7D0','#CBE22A','#00C8C8'],
    credits: { enabled: false, text: "Source: Air Normand", href: "" },
    exporting:{ buttons: {
            printButton: {enabled:false},
            exportButton: {menuItems:null,onclick:function(){this.exportChart(null, 
                                        { chart: {reflow: false, width: 400}, 
                                          title: {text: "Répartition de la Consommation"}, 
                                          subtitle: {text: "Haute-Normandie"}, 
                                          plotOptions: {pie: {dataLabels: {enabled: true}, showInLegend: true}}, 
                                          credits: {enabled: true} }
                                    );}}
    }},
    lang: {exportButtonTitle: "Export image au format PNG"},
    series: [{
        type: 'pie',
        name: 'Proportion',
        data: [
        ['Activite 1',   684.6],
        ['Activite 2',   564.7],
        ['Activite 3',   244.4],
        ['Activite 4',   42.8],
        ]
    }]
});
}); 
```

在函数 exportChart 中，除了 plotOptions 之外的所有函数都给出了正确的效果。在PNG文件中，更改了标题，添加了副标题和学分，但没有出现dataLabels和图例......
有人知道为什么吗？
谁能帮助我？谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-21T09:00:46.197

是的，可以通过禁用图表中的图例和导出参数（[http://api.highcharts.com/highcharts#exporting.chartOptions](http://api.highcharts.com/highcharts#exporting.chartOptions)）将此选项设置为活动状态。

工作示例：http: [//jsfiddle.net/xvQNA/](http://jsfiddle.net/xvQNA/)

```
var chart;
$(document).ready(function() {
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: false
        },
        title: {
            text: 'Browser market shares at a specific website, 2010'
        },
        tooltip: {
            pointFormat: '{series.name}: <b>{point.percentage}%</b>',
            percentageDecimals: 1
        },
        legend:{
            enabled:false
        },
        exporting:{
            chartOptions:{
                legend:{
                    enabled:true
                }
            }
        },
        plotOptions: {
            pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                    enabled: true,
                    color: '#000000',
                    connectorColor: '#000000',
                    formatter: function() {
                        return '<b>'+ this.point.name +'</b>: '+ this.percentage +' %';
                    }
                }
            }
        },
        series: [{
            type: 'pie',
            name: 'Browser share',
            showInLegend:true,
            data: [
                ['Firefox',   45.0],
                ['IE',       26.8],
                {
                    name: 'Chrome',
                    y: 12.8,
                    sliced: true,
                    selected: true
                },
                ['Safari',    8.5],
                ['Opera',     6.2],
                ['Others',   0.7]
            ]
        }]
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-23T08:48:28.820

对我来说，当我在导出选项中禁用导航时它起作用了：

```
 exporting: {
    chartOptions: {
      legend: {
        navigation: {
          enabled: false
        }
      }
    }
  }, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-14T22:20:52.430

你只需要添加 `enable: true`dataLabels：

```
 plotOptions: {
        series: {
            dataLabels: {
                enabled: true,
            }
        }
    } 
```

# symfony - 将每个子实体数据用于集合字段类型的选项

> ID：13358340
> 
> 赞同：1
> 
> 时间：2012-11-13T09:34:52.720
> 
> 标签：symfony, symfony-2.1

我有两个实体，A 和 B。A 与 B 具有一对多的关系。

我使用`collection`字段类型在 A 表单中嵌入了五个 B 表单。为此，我在我的`AController`. 我想做的是使用每个`B`实体的一个字段在表单集合中构建它的标签。

所以，我有以下代码：

```
//AController
$a = new A();

//Followinf returns an array of 5 B entities
$bs = $this->getDoctrine->getEntityManager()->getRepository('MyBundle:B')->findBy(array(
   'field' => 'value',
));

foreach ($bs as $b) {
   $a->addB($b);
}

$form = $this->createForm(new AType(), $a);

return array(
   'a' => $a,
   'form' => $form->createView(),
);

//AType
public function buildForm(FormBuilderInterface $builder, array $options)
{
   $builder
      ->add('a_field')
      ->add('another_field')
      ->add('bs', 'collection', array(
               'type' => new BType(),
               'options' => array(
                  'label' => 'i want to configure it depending on current B data',
                  )
               ))
      ;
} 
```

我发现了这个相关主题：

[Symfony 表单 - 在 CollectionType 中的子条目类型中访问实体](https://stackoverflow.com/questions/9723713/access-entity-data-inside-formtype-for-a-child-in-a-collection-in-symfony2)

但请注意这是不同的，因为它访问子表单中的数据。我想从父表单访问子数据并将其用于集合中的每个子标签。

我知道我可以使用访问子数据，`$builder->getData()->getBs();`但我不知道以后如何为每个子表单使用它。

我也知道我可以在视图中执行此操作，循环遍历实体并使用循环索引手动呈现每个集合元素，但我想在表单中执行此操作。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T22:20:58.893

我想你想要：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
   $data=someProcessingFunction($builder->getData()->getBs());
   $builder
      ->add('a_field')
      ->add('another_field')
      ->add('bs', 'collection', array(
               'type' => new BType(),
               'options' => array(
                  'label' => $data,
                  )
               ))
      ;
} 
```

作为可能相关的，您可以在单独的 $builder->add 调用中将内容添加到末尾：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
   $builder->add('a_field');
   $builder->add('another_field');
   $data=someProcessingFunction($builder->getData()->getBs());
   $builder->add('bs', 'collection', array(
               'type' => new BType(),
               'options' => array(
                  'label' => $data,
                  )
               ))
      ;
} 
```

如果您正在寻找每个唯一的标签，那么第二种方法更好：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
   $builder->add('a_field');
   $builder->add('another_field');

   $data=someProcessingFunction($builder->getData()->getBs());
   foreach ($data as $k=>$v){
   $builder->add('b'.$k, null, array(
                  'label' => $v,
               ))
      ;
   }
} 
```

或类似的

# ios - 在 iOS 中将字幕嵌入到视频文件中

> ID：13358344
> 
> 赞同：2
> 
> 时间：2012-11-13T09:35:09.957
> 
> 标签：ios, avfoundation, subtitle

我对 iOS 开发相对较新，我正在努力实现一些目标，但我运气不好找到好的资源。我想将字幕嵌入到项目的视频文件中。用户录制视频，录制后他输入一些句子，他输入的文本作为字幕嵌入到视频中，一次一个词。我认为这是通过 AVFoundation 实现的，但令我惊讶的是，除了 Apple 的文档外，关于 AVFoundation 的信息相对较少（当您想嵌入字幕时，它并没有多大用处。）

怎么可能这样做呢？如何格式化文本输入以使其成为字幕轨道？如何将该字幕轨道嵌入到视频文件中并将其导出，以便视频始终带有字幕？我希望这里有人知道这些事情..

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-12T14:54:46.077

如果您正在寻找创建嵌入字幕（AKA 软字幕）的 QuickTime 视频，请参阅WWDC 2013 的[avsubtitleswriterOSX](https://developer.apple.com/library/mac/samplecode/avsubtitleswriterOSX)示例代码。

如果您更喜欢将字幕刻录到视频中，您可以使用`AVVideoCompositionCoreAnimationTool`，如[本教程中所述](https://www.raywenderlich.com/30200/avfoundation-tutorial-adding-overlays-and-animations-to-videos)

# .net - powershell：从网站列表中提取元数据

> ID：13358347
> 
> 赞同：1
> 
> 时间：2012-11-13T09:35:31.960
> 
> 标签：.net, html, powershell, metadata

我有一个文本文件中的网站列表，我希望收集主页的元数据。我怎样才能做到这一点？

例如，我要检索的网站“”元数据是

```
meta name="keywords" content="**Chamber of Mines, South Africa, Mining** 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T10:11:49.297

像这样的东西：

```
$web = New-Object Net.WebClient
$a = $web.DownloadString("Http://www.bullion.org.za")
$a | Select-String -Pattern '(meta name="keywords".+")' -allmatches |
   select -expa matches | select -expa value 
```

这将返回：

```
meta name="keywords" content="Chamber of Mines, South Africa, Mining" 
```

# android - PhoneGap Android 应用软件键盘点击导致应用崩溃

> ID：13358355
> 
> 赞同：0
> 
> 时间：2012-11-13T09:36:08.427
> 
> 标签：android, cordova, android-softkeyboard, hybrid

我有一个使用 jQuery Mobile 和 PhoneGap 开发的混合应用程序。我们的一位拥有 Nexus 7 平板电脑的用户面临一个问题 - 当焦点位于文本框中并且按下 7 键时，应用程序会自行关闭。

有没有其他人经历过这种行为？有解决此问题的方法或方法吗？

# ruby-on-rails - 如何在 Ruby on Rails 中为移动应用程序提供身份验证

> ID：13358362
> 
> 赞同：0
> 
> 时间：2012-11-13T09:36:33.237
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, ruby-on-rails-3.2, authlogic

我需要为移动应用程序创建一个新的 Web 应用程序以及 REST api。我计划使用 Authlogic 进行身份验证。我想知道为移动设备提供身份验证的最佳方式是什么？在搜索时，我发现我们可以使用访问令牌对移动设备进行身份验证，它们是否有任何可用的插件，或者是否足以在登录/注册时为每个用户生成访问令牌并让他们与具有该访问权限的 Web 应用程序通信每个请求中的令牌。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:35:22.780

您可以使用子模块[Authlogic::ActsAsAuthentic::PersistenceToken](https://github.com/binarylogic/authlogic/blob/master/lib/authlogic/acts_as_authentic/persistence_token.rb)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T06:27:27.960

使用 devise gem，您可以生成身份验证令牌。基于此身份验证令牌，您可以使用 REST api 验证移动应用程序中的用户。我们为 android 应用程序完成了此操作。

# ios - iPhone：在横向右侧和横向左侧之间偏移罗盘航向值

> ID：13358364
> 
> 赞同：3
> 
> 时间：2012-11-13T09:36:43.230
> 
> 标签：ios, augmented-reality, cllocationmanager, compass-geolocation

要清楚我的问题是没有读取横向或左侧的标题值。它工作正常我正在使用位置管理器并减去 90° 以读取横向右侧的航向值和 270° 横向左侧的航向值，默认情况下，设备始终被视为纵向模式，这就是我们必须进行此调整的原因。

我最近开发了一个基于位置的增强现实应用程序，我正在经历的是，左右横向之间的航向值总是存在偏移。我在“现场”进行了测试，偏移量约为 12°。

我希望这个应用程序尽可能准确，我的意思是因为我们在这里依赖传感器数据并且这是第一个版本，小于 10° 是可以接受的（在最坏的情况下甚至是 15°）。但是，如果我们在现有误差上加上 12° 的偏移量，那就很烦人了。

有人对此有解释吗？即使我现在无法修复它，我也想要一个。所以现在我试图通过向左横向添加 12° 来“修复”这个问题，或者我应该在右侧横向减去 12°，我不知道！

在这个问题上有什么经验吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-13T11:26:25.860

我的经验是指南针不是很好，尤其是在风景视图中。我不会在一个视图中减去 12°，因为差异可能在另一台设备上有所不同。我建议您在继续之前先在其他一两部 iPhone 上进行测试。

另外，您是否正在设置 LocationManager 的视图？

```
CLLocationManager *compassManager;
compassManager.headingOrientation =CLDeviceOrientationLandscapeLeft; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-02-07T06:52:37.010

我也遇到了这个问题，LandscapeLeft、landscapeRight 和 Portrait 之间存在差异。感谢 Sten 的回复和下面的 Swift 代码解决了这个问题。

> ```
> override func willRotateToInterfaceOrientation(toInterfaceOrientation: UIInterfaceOrientation, duration: NSTimeInterval) {
>     var text=""
>     switch UIDevice.currentDevice().orientation{
>     case .Portrait:
>         text="Portrait"
>         locationManager.headingOrientation = CLDeviceOrientation.Portrait
>     case .PortraitUpsideDown:
>         text="PortraitUpsideDown"
>         locationManager.headingOrientation = CLDeviceOrientation.Portrait
>     case .LandscapeLeft:
>         text="LandscapeLeft"
>         locationManager.headingOrientation = CLDeviceOrientation.LandscapeLeft
>     case .LandscapeRight:
>         text="LandscapeRight"
>         locationManager.headingOrientation = CLDeviceOrientation.LandscapeRight
>     default:
>         text="Another"
>     }
>     NSLog("You have moved: \(text)") 
> ```

```
} 
```

# python - 将python映射到列表

> ID：13358368
> 
> 赞同：0
> 
> 时间：2012-11-13T09:37:02.213
> 
> 标签：python, beautifulsoup

我正在尝试在 python 中创建一个 csv 文件并将字段映射到预先存在的字段，这是我的 csv 的标题文件

```
import_fields = ["ID", "Active (0/1)", "Name *", "Categories (x,y,z...)", 
                "Price tax excl. or Price tax incl.", "Tax rules ID", "Wholesale price", "On sale (0/1)", 
                "Discount amount", "Discount percent", "Discount from (yyyy-mm-dd)", "Discount to (yyyy-mm-dd)", 
                "Reference #", "Supplier reference #", "Supplier", "Manufacturer", "EAN13", "UPC", "Ecotax", "Weight", 
                "Quantity", "Short description", "Description", "Tags (x,y,z...)", "Meta-title", "Meta-keywords", 
                "Meta-description", "URL rewritten", "Text when in stock", "Text when backorder allowed", 
                "Available for order (0 = No, 1 = Yes)", "Product creation date", "Show price (0 = No, 1 = Yes)", 
                "Image URLs (x,y,z...)", "Delete existing images (0 = No, 1 = Yes)", "Feature(Name:Value:Position)", 
                "Available online only (0 = No, 1 = Yes)", "Condition", "ID / Name of shop"] 
```

例如：

```
adm_product = []
for category in breadcrumbs.findAll('li', { "class" : re.compile(r'\bcategory\d')}):
    adm_product.append(category.find('a').renderContents())

product_shop = soup.find('div', attrs={"class": "product-shop"})
product_sku = soup.find('p', attrs={"class": "product-sku"})
if product_sku:
    sku = product_sku.renderContents()
    product_ref = ref(sku)[0]
    adm_product.append(product_ref) # MAP TO REFERENCE

short_description = soup.find('div', attrs={"class": "short-description"})
if short_description:
    short_desc = short_description.find('div', attrs={"class": "std"})
    if short_desc:
        adm_product.append(short_desc.renderContents()) # MAP TO SHORT DESCRIPTION 
```

将 product_ref 映射到 import_fields 列表中的引用的正确方法是什么，任何缺失的值都留空或​​创建一个 csv 以便在我附加一个值时将其添加到正确的列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T09:39:37.930

使用 csv`DictWriter`和`DictReader`

[http://docs.python.org/2/library/csv.html#csv.DictWriter](http://docs.python.org/2/library/csv.html#csv.DictWriter)

# javascript - 不使用本机 XMLHttpRequest 的原因 - 为什么 $.ajax 是强制性的？

> ID：13358369
> 
> 赞同：7
> 
> 时间：2012-11-13T09:37:04.967
> 
> 标签：javascript, jquery, xmlhttprequest, jqxhr

我正在编写一个应用程序：

1.  绝对依赖于通过向服务器发送数据`Javascript`
2.  代码中不得包含`JQuery`库。

（我不知道我的代码是否会包含在已经有jquery lib的网页中，我不知道是否会有正确的版本，我不知道是否会有`JQuery`冲突等等......）

我必须使用本机`JS`功能`XMLHttpRequest(ActiveX for older IE's)`方法，这很简单，但比我看到的警告要多：

> “没有 jQuery，AJAX 编码可能有点棘手！
> 
> 编写常规的 AJAX 代码可能有点棘手，因为不同的浏览器有不同的 AJAX 实现语法。这意味着您将不得不编写额外的代码来测试不同的浏览器。然而，jQuery 团队已经为我们解决了这个问题，因此我们只需一行代码就可以编写 AJAX 功能。”

这有什么“棘手”的？我可能做错了什么？据我所知

```
var xmlhttp;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp = new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
  } 
```

只是针对不同浏览器的额外代码，我的 xmlhttp var 应该从现在开始准备在`IE5`, `IE6`, `IE7+`, `Firefox`, `Chrome`, `Opera`,中完成工作`Safari`。

**`XMLHttpRequest`以上是我应该做的所有跨浏览器代码调整，还是在使用本机对象时我应该注意什么？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T09:44:01.893

这是跨浏览器支持唯一需要的东西，除非您需要支持真正旧的 IE（显然使用不同的 ActiveXObject）。

然而，使用例如 jQuery 提供了许多额外的优势：

*   单个函数调用，没有不必要的变量使您的范围变得混乱。
*   将对象自动序列化为 GET/POST 参数。当您可以简单地传递对象时，为什么要手动执行（您需要正确编码值！）？
*   自动解析响应，例如在 JSON 的情况下，您会得到一个对象，而不仅仅是您需要手动解析的字符串。
*   常见事件的良好回调（成功/失败/完成）
*   支持例如 XDomainRequest for CORS 在 IE 中的可插入架构。

由于您提到您不能使用 jQuery，因为您的应用程序将嵌入另一个可能与之冲突的站点中：您可以通过包含 jQuery 来避免这种情况，然后使用`$.noConflict(true)`它来恢复旧的`$`和`jQuery`变量。要在您的代码中使用它，您可以像这样编写它：

```
(function($) {

})(jQuery.noConflict(true)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T09:44:27.540

XMLHttpRequest 对象在这里被定义为 W3C 标准：

[http://www.w3.org/TR/XMLHttpRequest2/](http://www.w3.org/TR/XMLHttpRequest2/)

因此 API 本身应该在浏览器之间保持一致。

正如您所提到的，唯一的变化应该是如何获取 XMLHttpRequest 对象。看这里：

[http://www.quirksmode.org/js/xmlhttp.html](http://www.quirksmode.org/js/xmlhttp.html)

对于跨浏览器、非 jQuery 的执行方式（获取对象是在他的`XMLHttpFactories`数组中完成的。

# c# - 在运行时访问 .NET ActiveX 用户控件构造函数中的设计时属性

> ID：13358372
> 
> 赞同：1
> 
> 时间：2012-11-13T09:37:43.327
> 
> 标签：c#, .net, winforms

我有一个作为 ActiveX 控件公开的 .Net 用户控件。现在我想根据用户的选择为这个控件提供本地化/全球化。我所做的是我在 COM 接口中添加了一个名为“Language”的属性，以便用户可以在设计期间将此 ActiveX 控件放置在一个 contrainer（如 VB6 窗体）上时设置语言。我需要在运行时访问 ActiveX 控件/用户控件构造函数中的这个设计时属性“语言”，以便我可以将 UI 线程文化设置为适当的文化。但我的问题是我无法在运行时访问构造函数中的这个设计时属性，因为它的父级我的意思是用户控件/ActiveX 控件仍在构建中。有没有办法在运行时访问设计时属性，也可以在构造函数中访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-09T03:29:06.460

我有一个间接的方法来解决这个问题，主要是这样的：

1.  您可以定义一个`bool`属性，假设它命名为`Desiging`，并将其默认值设置为 true。
2.  您设置`Designing = false`在应用程序运行时使用 ActiveX 的位置。

现在，您可以在不同的模式下做一些特别的事情。

# javascript - Windows8 中的ActiveX FSO (FileSystemObject) | 互联网浏览器 10

> ID：13358380
> 
> 赞同：1
> 
> 时间：2012-11-13T09:38:10.540
> 
> 标签：javascript, activex, internet-explorer-10, fso

有谁知道 activex 文件系统对象是否被阻止或在新的 windows8/ie10 中不起作用？

示例代码：（javascript）

```
fso = new ActiveXObject("Scripting.FileSystemObject"); //error
d = fso.GetDrive(fso.GetDriveName(fso.GetAbsolutePathName("c:\"))); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-06T01:33:19.643

> 错误可能是第二行：您需要转义反斜杠“c:\”

# android - 使用 ksoap 向 wcf 发送和接收复杂对象

> ID：13358384
> 
> 赞同：2
> 
> 时间：2012-11-13T09:38:32.210
> 
> 标签：android, wcf

嗨，我已经使用 ksoap 有一段时间了，一直以来我都收到了复杂对象的数组。现在我需要发送一个我正在尝试一周但我无法管理它。我的猜测是复杂对象未在服务器端正确映射。我用数据包嗅探器捕获了我发送的消息。我认为命名空间和映射有问题。让我把我到目前为止所做的事情发布给你.Web 服务是 wcf，所以我还会向您发布来自 wcftestclient 的肥皂消息，以及我从我的 android 应用程序发送的内容。

```
public class MainActivity extends Activity {

private Button btn;
private Button btn1;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy);

    btn=(Button) findViewById(R.id.button1);
    btn.setOnClickListener(new OnClickListener() {            
        public void onClick(View v) { 

            SoapObject soapObjectRequest = new SoapObject("http://microsoft.com/webservices/","InsertStudentAbsences");

            SRV_Students_Absence objStudentAbsences = new SRV_Students_Absence();

            PropertyInfo propertyInfo = new PropertyInfo();             
            propertyInfo.setName("objStudentAbsences");
            propertyInfo.setType(SRV_Students_Absence.class);
            propertyInfo.setValue(objStudentAbsences);

            PropertyInfo propertyInfo1 = new PropertyInfo();                
            propertyInfo1.setName("connString");
            propertyInfo1.setType(String.class);
            propertyInfo1.setValue("server=verl,1524;Database=olDB;UID=sa;Password=7Esta#KAz");

            soapObjectRequest.addProperty(propertyInfo1);
            soapObjectRequest.addProperty(propertyInfo);
            soapObjectRequest.addProperty("Company","8");
            soapObjectRequest.addProperty("Lng","00");
            soapObjectRequest.addProperty("MainPeriod","80");
            soapObjectRequest.addProperty("UserID","14453");
            soapObjectRequest.addProperty("CourseDate","2012-11-06");

            SoapSerializationEnvelope soapSerializationEnvelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
            soapSerializationEnvelope.dotNet = true;
            soapSerializationEnvelope.implicitTypes = true;             

            soapSerializationEnvelope.setOutputSoapObject(soapObjectRequest);

            soapSerializationEnvelope.addMapping(soapObjectRequest.getNamespace(), "SRV_Students_Absence", objStudentAbsences.getClass());
            //soapSerializationEnvelope.addMapping(soapObjectRequest.getNamespace(), "SRV_Absence_Category", SRV_Absence_Category.class);
 //soapSerializationEnvelope.addMapping("http://schemas.datacontract.org/2004/07/WcfService_StudentGrades", "SRV_Student", SRV_Student.class);

            try {
                /**
                 * Mail the letter.
                 */
                HttpTransportSE httpTransportSE = new HttpTransportSE("http://androidwcf.schoolportal.gr");             
                httpTransportSE.call("http://microsoft.com/webservices/"+"IVertiSchool_SRV/InsertStudentAbsences", soapSerializationEnvelope);

                httpTransportSE.debug=true;

                SoapObject soapObjectResponse = (SoapObject)soapSerializationEnvelope.getResponse();

            } catch (Exception exception) {
                exception.printStackTrace();

            }

        }
    });

} 
```

这是实现 KvmSerializable 的类：

```
public class SRV_Students_Absence implements KvmSerializable {

private int AbCode;
private String AbNum;
private int AbsCatID;
private String ActID;
private String Cause;
private int  ClCode;
private int CoCode;
private String  CompanyCode;
private String CourseDate;
private boolean Flag;
private String InsDate;
private int InsWay;
private String IsParentsInf;
private String IsVerified;
private String LngCode;
private String MainPeriod;
private String SmsFlag;
private int StuCode;
private int TimeCode;
private String UserIdName;
private String WPCID;
private String WPGID;
private SRV_Student objAC;
private SRV_Absence_Category objStudent;

public SRV_Students_Absence(){

    AbCode= 0;
    AbNum= null;
    AbsCatID= 421;
    ActID= null;
    Cause= null;
    ClCode= 375;
    CoCode= 7628;
    CompanyCode= "8";
    CourseDate= "11/6/2012 9:50 AM";
    Flag=false;
    InsDate=null;
    InsWay=3;
    IsParentsInf=null;
    IsVerified=null;
    LngCode="00";
    MainPeriod=null;
    SmsFlag=null;
    StuCode=1359;
    TimeCode=1963;
    UserIdName=null;
    WPCID=null;
    WPGID=null;
    objAC=null;
    objStudent=null;

}

@Override
public Object getProperty(int arg0) {

    System.out.println("arxh");

      switch (arg0) {
        case 0:
            System.out.println(">0");
            return AbCode;
        case 1:
            System.out.println("1");
            return AbNum;
        case 2:
            System.out.println("2");
            return AbsCatID;
        case 3:
            System.out.println("3");
            return ActID;
        case 4:
            System.out.println("4");
            return Cause;
        case 5:
            System.out.println("5");
            return ClCode;
        case 6:
            System.out.println("6");
            return CoCode;
        case 7:
            System.out.println("7");
            return CompanyCode;
        case 8:
            System.out.println("8");
            return CourseDate;
        case 9:
            System.out.println("9");
            return Flag;
        case 10:
            System.out.println("10");
            return InsDate;
        case 11:
            System.out.println("11");
            return InsWay;
        case 12:
            System.out.println("12");
            return IsParentsInf;
        case 13:
            System.out.println("13");
            return IsVerified;
        case 14:
            System.out.println("14");
            return LngCode;
        case 15:
            System.out.println("15");
            return MainPeriod;
        case 16:
            System.out.println("16");
            return SmsFlag;
        case 17:
            System.out.println("17");
            return StuCode;
        case 18:
            System.out.println("18");
            return TimeCode;
        case 19:
            System.out.println("19");
            return UserIdName;
        case 20:
            System.out.println("20");
            return WPCID;
        case 21:
            System.out.println("21");
            return WPGID;
        case 22:
            System.out.println("22");
            return objAC;
        case 23:
            System.out.println("23");
            return objStudent;
        default:break;
        }

      return 005;
}

@Override
public int getPropertyCount() {
    return 24;
}

@Override
public void getPropertyInfo(int arg0, Hashtable arg1, PropertyInfo info) {

      switch (arg0) {
        case 0:
            System.out.println(":D "+arg0);
            info.type = PropertyInfo.INTEGER_CLASS;
            info.name = "AbCode";
            break;
        case 1:
            System.out.println(":D "+arg0);
             info.type = PropertyInfo.STRING_CLASS;
             info.name = "AbNum";
             break;
        case 2:
            System.out.println(":D "+arg0);
            info.type = PropertyInfo.INTEGER_CLASS;             
            info.name = "AbsCatID";
            break;
        case 3:
            System.out.println(":D "+arg0);
            info.type = PropertyInfo.STRING_CLASS;
            info.name = "ActID";
            break;
        case 4:
            System.out.println(":D "+arg0);
            info.type = PropertyInfo.STRING_CLASS;
            info.name = "Cause";
            break;
        case 5:
            System.out.println(":D "+arg0);
            info.type = PropertyInfo.INTEGER_CLASS;
            info.name = "ClCode";
            break;
        case 6:
            System.out.println(":D "+arg0);
            info.type = PropertyInfo.INTEGER_CLASS;
            info.name = "CoCode";
            break;
        case 7:
            System.out.println(":D "+arg0);
            info.type = PropertyInfo.STRING_CLASS;
            info.name = "CompanyCode";
            break;
        case 8:
            System.out.println(":D "+arg0);
            info.type = PropertyInfo.STRING_CLASS;
            info.name = "CourseDate";
            break;
        case 9:
            System.out.println(":D "+arg0);
            info.type = PropertyInfo.BOOLEAN_CLASS;
            info.name = "Flag";
            break;
        case 10:
            System.out.println(":D "+arg0);
            info.type = PropertyInfo.STRING_CLASS;
            info.name = "InsDate";
            break;
        case 11:
            System.out.println(":D "+arg0);
            info.type = PropertyInfo.INTEGER_CLASS;
            info.name = "InsWay";
            break;
        case 12:
            System.out.println(":D "+arg0);
            info.type = PropertyInfo.STRING_CLASS;
            info.name = "IsParentsInf";
            break;
        case 13:
            System.out.println(":D "+arg0);
            info.type = PropertyInfo.STRING_CLASS;
            info.name = "IsVerified";
            break;
        case 14:
            System.out.println(":D "+arg0);
            info.type = PropertyInfo.STRING_CLASS;
            info.name = "LngCode";
            break;
        case 15:
            System.out.println(":D "+arg0);
            info.type = PropertyInfo.STRING_CLASS;
            info.name = "MainPeriod";
            break;
        case 16:
            System.out.println(":D "+arg0);
            info.type = PropertyInfo.STRING_CLASS;
            info.name = "SmsFlag";
            break;
        case 17:
            System.out.println(":D "+arg0);
            info.type = PropertyInfo.INTEGER_CLASS;
            info.name = "StuCode";
            break;
        case 18:
            System.out.println(":D "+arg0);
            info.type = PropertyInfo.INTEGER_CLASS;
            info.name = "TimeCode";
            break;
        case 19:
            System.out.println(":D "+arg0);
            info.type = PropertyInfo.STRING_CLASS;
            info.name = "UserIdName";
            break;
        case 20:
            System.out.println(":D "+arg0);
            info.type = PropertyInfo.STRING_CLASS;
            info.name = "WPCID";
            break;
        case 21:
            System.out.println(":D "+arg0);
            info.type = PropertyInfo.STRING_CLASS;
            info.name = "WPGID";
            break;
        case 22:
            System.out.println(":D "+arg0);
            info.type = SRV_Absence_Category.class;
            info.name = "objAC";
            break;
        case 23:
            System.out.println(":D "+arg0);
            info.type = SRV_Student.class;
            info.name = "objStudent";
            break;
        default:break;
        }

}

@Override
public void setProperty(int arg0, Object value) {

    System.out.println("setting Property");

      switch (arg0) {
        case 0:
             AbCode = Integer.parseInt(value.toString());
        case 1:
             AbNum  = value.toString();
        case 2:
            AbsCatID=(Integer.parseInt(value.toString()));
        case 3:
            ActID = value.toString();
        case 4:
            Cause = value.toString();
        case 5:
            ClCode = Integer.parseInt(value.toString());
        case 6:
            CoCode = Integer.parseInt(value.toString());
        case 7:
            CompanyCode= value.toString();
        case 8:
            CourseDate = value.toString();
        case 9:
            Flag = Boolean.getBoolean(value.toString());
        case 10:
            InsDate = value.toString();
        case 11:
            InsWay = Integer.parseInt(value.toString());
        case 12:
            IsParentsInf = value.toString();
        case 13:
            IsVerified = value.toString();
        case 14:
            LngCode = value.toString();
        case 15:
            MainPeriod = value.toString();
        case 16:
            SmsFlag = value.toString();
        case 17:
            StuCode = Integer.parseInt(value.toString());
        case 18:
            TimeCode = Integer.parseInt(value.toString());
        case 19:
            UserIdName = value.toString();
        case 20:
            WPCID = value.toString();
        case 21:
            WPGID= value.toString();
        case 22:
            objAC= null;
        case 23:
            objStudent= null;
        }

}

} 
```

伙计们，如果您在这方面有任何经验，请给我一个方向。感谢您的时间。

# http - HTTP 1.0 服务器允许在接收到完整请求之前回复客户端吗？

> ID：13358385
> 
> 赞同：6
> 
> 时间：2012-11-13T09:38:37.590
> 
> 标签：http, google-chrome, post, boost, xmlhttprequest

我找不到可以回答这个问题的 RFC。也许你们可以指出我正确的方向。

我正在实现精简的 http 服务器，它的唯一功能是接受大的多部分编码上传。

在某些情况下，例如文件太大或客户端无权上传，我希望服务器回复错误并立即关闭连接。

看起来 Chrome 浏览器不喜欢它，因为它认为服务器返回的 http 代码为零。

```
Could not get any response

This seems to be like an error connecting to http://my_ubuntu:8080/api/upload. The response status was 0.
Check out the W3C XMLHttpRequest Level 2 spec for more details about when this happens. 
```

因此问题：

HTTP 服务器是否允许在接收到完整请求之前回复客户端？

**更新**：刚刚使用 iOS 6 客户端对其进行了测试。同样的事情，它认为服务器突然关闭连接:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-27T15:49:07.367

这是一个很好的问题，显然它非常模棱两可。您可能会喜欢阅读有关“百万美元漏洞”的文章 - [http://jacquesmattheij.com/the-several-million-dollar-bug](http://jacquesmattheij.com/the-several-million-dollar-bug)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-14T19:25:06.797

我认为这是证书信任问题。尝试手动信任该站点，随后的请求应该可以工作。

# android - Service.startForeground() 在使用 ServiceTestCase 运行时抛出 NullPointerException

> ID：13358386
> 
> 赞同：8
> 
> 时间：2012-11-13T09:38:45.283
> 
> 标签：android, junit, nullpointerexception

[这](http://code.google.com/p/android/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars&groupby=&sort=&id=12122)是一个已知的恼人的 2 岁 Android 错误。

我的问题是除了修改Android源代码并再次编译之外，有没有人知道这个问题的任何解决方法？

为了完成，这是我的代码：

引发 NPE 的我的 Service 子类方法：

```
/** Shows notification of started service */
private void doStartForeground() {

    // Prepare notification
    final NotificationHelper nh = doNotification("Service started");

    // Start foreground
    startForeground(nh.getNotificationId(), nh.getNotification());
} 
```

这是从`onCreate()`方法覆盖调用的。

以及 JUnit 测试方法：

```
public void test1() throws InterruptedException {
    assertTrue(context != null);
    final Intent service = new Intent();
    service.setComponent(new ComponentName(CoreService.PACKAGE_NAME,
        CoreService.SERVICE_FULL_NAME));
    IBinder binder = bindService(service);
    assertTrue(binder != null);
} 
```

堆栈跟踪：

```
java.lang.NullPointerException
at android.app.Service.startForeground(Service.java:631)
at com.blablabla.android.core.CoreService.doStartForeground(CoreService.java:82)
at com.blablabla.android.core.CoreService.onCreate(CoreService.java:149)
at android.test.ServiceTestCase.bindService(ServiceTestCase.java:234)
at com.blablabla.android.core.test.MainTest.test1(MainTest.java:37)
at java.lang.reflect.Method.invokeNative(Native Method)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:169)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:154)
at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:537)
at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1551) 
```

该服务在不通过 Android 的 JUnit 运行时正确启动并且工作正常。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T11:07:16.227

我终于在我的服务中添加了一个新的静态字段：

```
/** JUNIT - this is for testing purposes only */
public static boolean isJUnit = false; 
```

并在`onCreate()`方法中检查：

```
// Start the service as foreground (Android should not kill this
// service)
if (!isJUnit) {
    doStartForeground();
} 
```

然后我从 JUnit 设置这个标志`setUp()`：

```
@Override
protected void setUp() throws Exception {
    super.setUp();
    // More setup
    MyServiceClass.isJUnit = true;
} 
```

不是最优雅的解决方案，但让我摆脱了封锁。

# codesourcery - codesourcery ARM Toolchain 是否可用于 64 位 Windows？

> ID：13358389
> 
> 赞同：0
> 
> 时间：2012-11-13T09:38:56.763
> 
> 标签：codesourcery

我目前正在为 32 位 Windows 使用 32 位 codesourcery ARM 工具链。它工作正常，但是我想知道 64 位代码源 ARM 工具链是否可用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:47:58.920

> Sourcery CodeBench 是一个 32 位应用程序，但在具有 32 位主机库的 64 位主机系统上运行。

该信息来自特定目标平台的网页底部。这是 ARM GNU/Linux 目标的页面：

[http://www.mentor.com/embedded-software/sourcery-tools/sourcery-codebench/platforms/arm-gnulinux](http://www.mentor.com/embedded-software/sourcery-tools/sourcery-codebench/platforms/arm-gnulinux)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-29T21:57:51.440

我强烈建议不要使用任何*Sourcery CodeBench*编译器在 Windows 上交叉编译 ARM 代码。使用 Windows 环境及其工具存在太多问题。但如果您坚持，很多细节可以在[SamyGo](http://wiki.samygo.tv/index.php5/Cross-compiling_%28ES_series%29#REQUIREMENTS.21.21) wikientry 中找到。此外，XDA 论坛上还有一系列自制的 ARM 交叉编译器。喜欢[这里](http://forum.xda-developers.com/showthread.php?t=2098133)和[这里](http://forum.xda-developers.com/showthread.php?t=1686310)。祝你好运。

# ios - checkResourceIsReachableAndReturnError 总是返回 Domain=NSCocoaErrorDomain Code=4 “操作无法完成。（Cocoa 错误 4。）”

> ID：13358392
> 
> 赞同：2
> 
> 时间：2012-11-13T09:39:06.640
> 
> 标签：ios, nsurl

我正在尝试使用： NSURL 类的 checkResourceIsReachableAndReturnError

但我总是得到 FALSE 并且 NSError 显示：Domain=NSCocoaErrorDomain Code=4 “操作无法完成。（Cocoa 错误 4。）”

我用 safary 检查了 URL，它有效，知道吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T10:04:52.643

这不是您正在寻找的方法。NSURL 的类参考中对该方法的描述：

`Returns whether the resource pointed to by a file URL can be reached.`

该方法应该用于测试文件 URL 的可访问性，您无法使用此方法检查 Internet 资源是否可用。

如果您搜索可达性测试或类似的东西，您会在堆栈溢出中找到几个答案。但是，如果失败，您可能只是尝试访问 URL 并处理错误。

# c# - servicestack.text 将数组反序列化为对象

> ID：13358393
> 
> 赞同：4
> 
> 时间：2012-11-13T09:39:18.197
> 
> 标签：c#, .net, servicestack

我有一个带有 ServicStack 的 REST-Service 构建，并且在一次调用中，用户可以发送不同类型的值。所以我在 C# 中创建了对象类型的属性。

发送的 JSON 如下所示：

```
{"name":"ffff","params":[{"pId":1,"value":[624,625]},{"pId":2,"value":"xxx"}]} 
```

“value”部分：[624,625] 生成一个用“[624,625]”填充的字符串对象。我希望得到一个 int 数组或至少一个字符串数组，但它是纯字符串。我设置了 JsConfig.TryToParsePrimitiveTypeValues = true，但这似乎没有任何效果。

我尝试了来自 github 的最新资源。

这可以通过任何开关组合来完成，还是我必须自己解析？

谢谢

编辑：

这是一些测试代码：

```
[TestMethod]
public void JsonTest()
{
    string json = "{\"name\":\"ffff\",\"params\":[{\"pId\":1,\"value\":[624,625]},{\"pId\":2,\"value\":\"xxx\"}]}";

    var x = JsonSerializer.DeserializeFromString<xy>(json);
    Assert.AreEqual(x.Params[0].Value.GetType(), typeof(int[]));
}

public class xy
{
    public string Name { get; set; }

    public List<Param> Params { get; set; }
}

public class Param
{
    public int PId { get; set; }

    public object Value { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:48:47.097

如果将“Value”的类型更改为 int 数组，如下所示，ServiceStack 将序列化为 int 数组。

```
 public class Param
    {
        public int PId { get; set; }

        public int[] Value { get; set; }
    } 
```

以下单元测试通过：

```
 [TestMethod]
    public void JsonTest()
    {
        string json = "{\"name\":\"ffff\",\"params\":[{\"pId\":1,\"value\":[624,625]},{\"pId\":2,\"value\":\"xxx\"}]}";

        var x = JsonSerializer.DeserializeFromString<xy>(json);
        Assert.AreEqual(x.Params[0].Value.GetType(), typeof(int[]));
        // Show that we have some integers
        Assert.IsTrue(x.Params[0].Value.Count()>0);
    } 
```

如果由于任何原因无法更改 Value 的类型，则可以根据需要使用 ServiceStack.Text 将字符串序列化为数组。

# svg - svg，保持文字从颠倒

> ID：13358395
> 
> 赞同：0
> 
> 时间：2012-11-13T09:39:34.957
> 
> 标签：svg

我在svg中有一条路径，它的原点在右边，后面的点在左边，然后我在svg中添加了一个textPath，所有文本都颠倒了。如何保持文本直立并始终从左到右显示？这花了我很多时间！我会很感激你的回答！

```
<!DOCTYPE html>
<html>
<head>
    <style>
    </style>
    <script>
    function CreateSVG(points, container) {

      var id = "idSVG";
      var ns = "http://www.w3.org/2000/svg";
      var xlinkns = "http://www.w3.org/1999/xlink";
      var lineWidth = 10;
      var color = "rgba(120,120,120,0.7)";
      var path = document.createElementNS(ns, "path");
      path.setAttribute('stroke-linecap', 'round');
      path.setAttribute('stroke-linejoin', 'round');
      path.setAttribute('stroke-dasharray', 'solid');
      path.setAttribute('fill', 'none');
      path.setAttribute('id', id);
      var _canvas = document.createElementNS(ns, 'svg');
      _canvas.setAttributeNS('http://www.w3.org/2000/xmlns/', 'xmlns:xlink', xlinkns);
      _canvas.setAttribute('pointer-events', 'none');
      //this._canvas.appendChild(this.path);
      var defs = document.createElementNS(ns, "defs");
      defs.appendChild(path);
      var useSvg = document.createElementNS(ns, 'use');
      useSvg.setAttributeNS(xlinkns, 'xlink:href', '#' + id);
      useSvg.setAttribute('fill', 'none');
      useSvg.setAttribute('stroke', 'red');
      var textSvg = document.createElementNS(ns, 'text');
      var textPathSvg = document.createElementNS(ns, 'textPath');
      textPathSvg.setAttributeNS(xlinkns, 'xlink:href', '#' + id);
      textPathSvg.appendChild(document.createTextNode('test text'));
      textSvg.appendChild(textPathSvg);

      _canvas.appendChild(defs);
      _canvas.appendChild(useSvg);
      _canvas.appendChild(textSvg);

      var minX, maxX, minY, maxY, x, y, width, height;
      for(var i = 0, len = points.length; i < len; i++) {
        x = points[i].x;
        y = points[i].y;
        if(minX == undefined || minX > x) {
          minX = x;
        }
        if(maxX == undefined || maxX < x) {
          maxX = x;
        }
        if(minY == undefined || minY > y) {
          minY = y;
        }
        if(maxY == undefined || maxY < y) {
          maxY = y;
        }
      }
      minX = minX - lineWidth;
      minY = minY - lineWidth;
      width = maxX - minX + lineWidth;
      height = maxY - minY + lineWidth;

      _canvas.setAttribute('style', 'position:absolute;');
      _canvas.setAttribute('width', width);
      _canvas.setAttribute('height', height);
      _canvas.setAttribute('viewBox', '0 0 ' + width + ' ' + height);
      _canvas.setAttribute('stroke', 'true');
      path.setAttribute('stroke-width', lineWidth);
      path.setAttribute('stroke', color);
      var d = [];
      for(var i = 0, len = points.length; i < len; i++) {
        d[i] = (points[i].x - minX + lineWidth / 2) + ',' + (points[i].y - minY + lineWidth / 2);
      }
      path.setAttribute('d', 'M' + d.join(' '));
      container.appendChild(_canvas);
    }
    </script>
</head>
<body onload="CreateSVG([{x:200, y:200}, {x:40, y:60}], document.getElementById('svgContainer'))">
    <div id="svgContainer"></div>
</body>
</html> 
```

# xcode - For循环只计算一个项目一次

> ID：13358399
> 
> 赞同：-1
> 
> 时间：2012-11-13T09:39:43.657
> 
> 标签：xcode, for-loop

在我的应用程序中，我有一个从 tableview 获取日期值的 for 循环。我希望如果在 Tableview 中插入相同的日期只考虑一次，而现在如果插入的日期不止一次，则每次都计算。

```
for (FesteGruppo *festeGruppoEntity in arrayController2_.selectedObjects) {
                if ([festeGruppoEntity.stato intValue]==0) {
                    NSDateComponents *festeGruppoEntityComponents = [[NSCalendar currentCalendar] components:(NSEraCalendarUnit | NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit) fromDate:festeGruppoEntity.data];
                    NSString *nomeFesta =  festeGruppoEntity.nome;

                    NSInteger annoFestaModificato = annoInizio1;
                    NSInteger meseFesta = [festeGruppoEntityComponents month];
                    NSInteger giornoFesta = [festeGruppoEntityComponents day];

                    for (annoInizio1=annoInizio1; annoFestaModificato<=annoFine1; ++annoFestaModificato) {

                        NSDateComponents *components = [[NSDateComponents alloc] init];

                        [components setDay:giornoFesta];
                        [components setMonth:meseFesta];
                        [components setYear:annoFestaModificato];
                        NSCalendar *gregorian = [[NSCalendar alloc]
                                                 initWithCalendarIdentifier:NSGregorianCalendar];
                        NSDate *date = [gregorian dateFromComponents:components];

                        NSString *valorePrimaFesta=[date descriptionWithCalendarFormat:@"%w" timeZone:nil locale:nil];

                        //Festività compresa ripetuta.
                        int compInizio = [dataInizio compare:date];
                        int compFine = [dataFine compare:date];

                        if (compInizio==-1 && compFine==1) {
                            int giornoSettimana = [valorePrimaFesta intValue];
                            NSString *ggSett = [NSString stringWithFormat:@""];

                            if (giornoSettimana==0) {
                                --domenica;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"domenica", @"")];
                            } else if (giornoSettimana==1){
                                --lunedi;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"lunedi", @"")];
                            } else if (giornoSettimana==2){
                                --martedi;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"martedi", @"")];
                            } else if (giornoSettimana==3){
                                --mercoledi;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"mercoledi", @"")];
                            } else if (giornoSettimana==4){
                                --giovedi;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"giovedi", @"")];
                            } else if (giornoSettimana==5){
                                --venerdi;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"venerdi", @"")];
                            } else if (giornoSettimana==6){
                                --sabato;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"sabato", @"")];
                            }

                            [textView1 insertText:[NSString stringWithFormat:NSLocalizedString(@"festaCompresa", @""), nomeFesta, giornoFesta, meseFesta, annoFestaModificato, ggSett]];
                        }else if(compInizio==-1 && compFine==0){
                            int giornoSettimana = [valorePrimaFesta intValue];
                            NSString *ggSett = [NSString stringWithFormat:@""];

                            if (giornoSettimana==0) {
                                --domenica;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"domenica", @"")];
                            } else if (giornoSettimana==1){
                                --lunedi;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"lunedi", @"")];
                            } else if (giornoSettimana==2){
                                --martedi;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"martedi", @"")];
                            } else if (giornoSettimana==3){
                                --mercoledi;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"mercoledi", @"")];
                            } else if (giornoSettimana==4){
                                --giovedi;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"giovedi", @"")];
                            } else if (giornoSettimana==5){
                                --venerdi;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"venerdi", @"")];
                            } else if (giornoSettimana==6){
                                --sabato;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"sabato", @"")];
                            }

                            [textView1 insertText:[NSString stringWithFormat:NSLocalizedString(@"festaCompresa", @""), nomeFesta, giornoFesta, meseFesta, annoFestaModificato, ggSett]];  
                        }else if(compInizio==-0 && compFine==0){
                            int giornoSettimana = [valorePrimaFesta intValue];
                            NSString *ggSett = [NSString stringWithFormat:@""];

                            if (giornoSettimana==0) {
                                --domenica;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"domenica", @"")];
                            } else if (giornoSettimana==1){
                                --lunedi;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"lunedi", @"")];
                            } else if (giornoSettimana==2){
                                --martedi;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"martedi", @"")];
                            } else if (giornoSettimana==3){
                                --mercoledi;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"mercoledi", @"")];
                            } else if (giornoSettimana==4){
                                --giovedi;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"giovedi", @"")];
                            } else if (giornoSettimana==5){
                                --venerdi;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"venerdi", @"")];
                            } else if (giornoSettimana==6){
                                --sabato;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"sabato", @"")];
                            }

                            [textView1 insertText:[NSString stringWithFormat:NSLocalizedString(@"festaCompresa", @""), nomeFesta, giornoFesta, meseFesta, annoFestaModificato, ggSett]]; 
                        }else if (compInizio==-0 && compFine==1){
                            int giornoSettimana = [valorePrimaFesta intValue];
                            NSString *ggSett = [NSString stringWithFormat:@""];

                            if (giornoSettimana==0) {
                                --domenica;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"domenica", @"")];
                            } else if (giornoSettimana==1){
                                --lunedi;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"lunedi", @"")];
                            } else if (giornoSettimana==2){
                                --martedi;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"martedi", @"")];
                            } else if (giornoSettimana==3){
                                --mercoledi;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"mercoledi", @"")];
                            } else if (giornoSettimana==4){
                                --giovedi;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"giovedi", @"")];
                            } else if (giornoSettimana==5){
                                --venerdi;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"venerdi", @"")];
                            } else if (giornoSettimana==6){
                                --sabato;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"sabato", @"")];
                            }

                            [textView1 insertText:[NSString stringWithFormat:NSLocalizedString(@"festaCompresa", @""), nomeFesta, giornoFesta, meseFesta, annoFestaModificato, ggSett]];
                        }
                        else {
                            int giornoSettimana = [valorePrimaFesta intValue];

                            NSString *ggSett = [NSString stringWithFormat:@""];

                            if (giornoSettimana==0) {
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"domenica", @"")];
                            } else if (giornoSettimana==1){
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"lunedi", @"")];
                            } else if (giornoSettimana==2){
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"martedi", @"")];
                            } else if (giornoSettimana==3){
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"mercoledi", @"")];
                            } else if (giornoSettimana==4){
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"giovedi", @"")];
                            } else if (giornoSettimana==5){
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"venerdi", @"")];
                            } else if (giornoSettimana==6){
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"sabato", @"")];
                            }

                            [textView1 insertText:[NSString stringWithFormat:NSLocalizedString(@"festaNonCompresa", @""), nomeFesta, giornoFesta, meseFesta, annoFestaModificato, ggSett]];

                        }
                    }
                } else {

                    NSDateComponents *festeGruppoEntityComponents = [[NSCalendar currentCalendar] components:(NSEraCalendarUnit | NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit) fromDate:festeGruppoEntity.data];
                    NSString *nomeFesta =  festeGruppoEntity.nome;
                    NSInteger annoFesta = [festeGruppoEntityComponents year];
                    NSInteger meseFesta = [festeGruppoEntityComponents month];
                    NSInteger giornoFesta = [festeGruppoEntityComponents day];

                    //for (annoInizio1=annoInizio1; annoFesta<=annoInizio1; ++annoFesta) {

                        NSDateComponents *components = [[NSDateComponents alloc] init];

                        [components setDay:giornoFesta];
                        [components setMonth:meseFesta];
                        [components setYear:annoFesta];
                        NSCalendar *gregorian = [[NSCalendar alloc]
                                                 initWithCalendarIdentifier:NSGregorianCalendar];
                        NSDate *date = [gregorian dateFromComponents:components];

                        NSString *valorePrimaFesta=[date descriptionWithCalendarFormat:@"%w" timeZone:nil locale:nil];
                        //Festività compresa ripetuta.
                        int compInizio = [dataInizio compare:date];
                        int compFine = [dataFine compare:date];

                        if (compInizio==-1 && compFine==1) {
                            int giornoSettimana = [valorePrimaFesta intValue];
                            NSString *ggSett = [NSString stringWithFormat:@""];

                            if (giornoSettimana==0) {
                                --domenica;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"domenica", @"")];
                            } else if (giornoSettimana==1){
                                --lunedi;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"lunedi", @"")];
                            } else if (giornoSettimana==2){
                                --martedi;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"martedi", @"")];
                            } else if (giornoSettimana==3){
                                --mercoledi;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"mercoledi", @"")];
                            } else if (giornoSettimana==4){
                                --giovedi;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"giovedi", @"")];
                            } else if (giornoSettimana==5){
                                --venerdi;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"venerdi", @"")];
                            } else if (giornoSettimana==6){
                                --sabato;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"sabato", @"")];
                            }

                            [textView1 insertText:[NSString stringWithFormat:NSLocalizedString(@"festaCompresaNonRipetuta", @""), nomeFesta, giornoFesta, meseFesta, annoFesta, ggSett]];
                        }else if(compInizio==-1 && compFine==0){
                            int giornoSettimana = [valorePrimaFesta intValue];
                            NSString *ggSett = [NSString stringWithFormat:@""];

                            if (giornoSettimana==0) {
                                --domenica;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"domenica", @"")];
                            } else if (giornoSettimana==1){
                                --lunedi;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"lunedi", @"")];
                            } else if (giornoSettimana==2){
                                --martedi;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"martedi", @"")];
                            } else if (giornoSettimana==3){
                                --mercoledi;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"mercoledi", @"")];
                            } else if (giornoSettimana==4){
                                --giovedi;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"giovedi", @"")];
                            } else if (giornoSettimana==5){
                                --venerdi;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"venerdi", @"")];
                            } else if (giornoSettimana==6){
                                --sabato;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"sabato", @"")];
                            }

                            [textView1 insertText:[NSString stringWithFormat:NSLocalizedString(@"festaCompresaNonRipetuta", @""), nomeFesta, giornoFesta, meseFesta, annoFesta, ggSett]];  
                        }else if(compInizio==-0 && compFine==0){
                            int giornoSettimana = [valorePrimaFesta intValue];
                            NSString *ggSett = [NSString stringWithFormat:@""];

                            if (giornoSettimana==0) {
                                --domenica;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"domenica", @"")];
                            } else if (giornoSettimana==1){
                                --lunedi;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"lunedi", @"")];
                            } else if (giornoSettimana==2){
                                --martedi;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"martedi", @"")];
                            } else if (giornoSettimana==3){
                                --mercoledi;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"mercoledi", @"")];
                            } else if (giornoSettimana==4){
                                --giovedi;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"giovedi", @"")];
                            } else if (giornoSettimana==5){
                                --venerdi;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"venerdi", @"")];
                            } else if (giornoSettimana==6){
                                --sabato;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"sabato", @"")];
                            }

                            [textView1 insertText:[NSString stringWithFormat:NSLocalizedString(@"festaCompresaNonRipetuta", @""), nomeFesta, giornoFesta, meseFesta, annoFesta, ggSett]]; 
                        }else if (compInizio==-0 && compFine==1){
                            int giornoSettimana = [valorePrimaFesta intValue];
                            NSString *ggSett = [NSString stringWithFormat:@""];

                            if (giornoSettimana==0) {
                                --domenica;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"domenica", @"")];
                            } else if (giornoSettimana==1){
                                --lunedi;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"lunedi", @"")];
                            } else if (giornoSettimana==2){
                                --martedi;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"martedi", @"")];
                            } else if (giornoSettimana==3){
                                --mercoledi;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"mercoledi", @"")];
                            } else if (giornoSettimana==4){
                                --giovedi;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"giovedi", @"")];
                            } else if (giornoSettimana==5){
                                --venerdi;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"venerdi", @"")];
                            } else if (giornoSettimana==6){
                                --sabato;
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"sabato", @"")];
                            }

                            [textView1 insertText:[NSString stringWithFormat:NSLocalizedString(@"festaCompresaNonRipetuta", @""), nomeFesta, giornoFesta, meseFesta, annoFesta, ggSett]];
                        }
                        else {
                            int giornoSettimana = [valorePrimaFesta intValue];

                            NSString *ggSett = [NSString stringWithFormat:@""];

                            if (giornoSettimana==0) {
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"domenica", @"")];
                            } else if (giornoSettimana==1){
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"lunedi", @"")];
                            } else if (giornoSettimana==2){
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"martedi", @"")];
                            } else if (giornoSettimana==3){
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"mercoledi", @"")];
                            } else if (giornoSettimana==4){
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"giovedi", @"")];
                            } else if (giornoSettimana==5){
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"venerdi", @"")];
                            } else if (giornoSettimana==6){
                                ggSett = [NSString stringWithFormat:NSLocalizedString(@"sabato", @"")];
                            }

                            [textView1 insertText:[NSString stringWithFormat:NSLocalizedString(@"festaNonCompresaNonRipetuta", @""), nomeFesta, giornoFesta, meseFesta, annoFesta, ggSett]];

                        }
                    //}
                }

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T10:01:23.623

将表中的所有对象放入`NSMutableSet`. 然后遍历集合。

# telerik - 如何在 sitecore 6.5 的 javascript 中打开和处理富文本编辑器？

> ID：13358401
> 
> 赞同：0
> 
> 时间：2012-11-13T09:39:51.310
> 
> 标签：telerik, sitecore, sitecore6, richtext

我一直在研究一个包含列表的自定义字段。我必须能够在富文本编辑器中编辑列表中的选定项目。（这是唯一缺少的部分）。

我已经阅读了关于在[Sitecore Content Editor 的自定义字段中从 c# 代码打开富文本编辑器中打开](https://stackoverflow.com/questions/9333617/opening-rich-text-editor-in-custom-field-of-sitecore-content-editor)的主题。这适用于“添加”按钮，因为我必须打开 RTE 为空（使用默认文本......），但不适用于“编辑”按钮。

我的方法是：

*   以某种方式在编辑按钮的消息字段中`list:edit(id=$Target)`传递选定的索引（例如`list:edit(id=$Target,index=$SelectedIndex)`，但我不知道如何填充 $SelectedIndex
*   不知何故，在被覆盖的`HandleMessage`方法中获取列表的选定**索引**。我能够获得选定的**值** `Sitecore.Context.ClientPage.ClientRequest.Form[ID of list]`，但仅此而已并没有太大帮助，因为如果两个列表项相等，我将无法决定要编辑哪一个。
*   完全在 javascript 中打开和处理富文本编辑器。正如我在内容编辑器中的某些脚本中看到的那样，我尝试这样做，但我无法清楚地理解它：

    *富文本编辑器网址：*

    `var page = "/sitecore/shell/Controls/Rich Text Editor/EditorPage.aspx";`

    *一些参数：*

    `var params = "?da=core&id&ed=" + id + "&vs=1&la=en&fld=" + id + "&so&di=0&hdl=H14074466&us=sitecore%5cadmin&mo";`

    *以及我不确定的部分：*

    `var result = scForm.browser.showModalDialog(page + params, new Array(window), "dialogHeight:650px; dialogWidth:900px;");`

    这样 RTE 会按预期打开（我想我可以从 javascript 中获取选定的索引并稍后将其作为参数传递）。但是，当我单击确定时，我从 EditorPage.js saveRichText 函数中得到异常：`Cannot read property 'ownerDocument' of null`。我错过了一些参数吗？

只要我能够做到，这三种方法中的任何一种对我来说都很好（我也愿意接受新的更好的方法）。提前致谢！

塔马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T10:39:50.400

我能够在消息中输入一些 javascript：

```
list:Edit(id=$Target,index='+document.getElementById(ID of the select using $Target ).selectedIndex+') 
```

这样我就得到了索引`HandleMessage`。

我现在正在等待更好的解决方案。

# javascript - Javascript Regex 同时验证 URL 和 Empty

> ID：13358402
> 
> 赞同：0
> 
> 时间：2012-11-13T09:39:52.503
> 
> 标签：javascript, jquery, regex

我尝试编写一个正则表达式来使用绝对位置的 jQuery 验证插件，如果字符串为空或它的 URL 无效，则会给出错误。它适用于 URl，但如果存在空字符串则不会出错。这是正则表达式

```
 "regex": /^\S$|^(http[s]?:\/\/){0,1}(www\.){0,1}[a-zA-Z0-9\.\-]+\.[a-zA-Z]{2,5}[\.]{0,1}/, 
```

有人可以告诉正则表达式有什么问题吗？

编辑：

我正在使用这个插件进行 jQuery 验证

演示：转到此 URL 并在 URL 验证部分中，删除 HTTP 并查看错误消息

[http://www.position-relative.net/creation/formValidator/demos/demoValidators.html](http://www.position-relative.net/creation/formValidator/demos/demoValidators.html)

当我将 required 和 URL 验证器一起添加时，它会发出 2 个错误。但是只有 URL 验证器，它并没有说它是一个无效的 URL。对于 Empty 和 Invalid URL，我只需要 1 个错误。

[https://github.com/posabsolute/jQuery-Validation-Engine](https://github.com/posabsolute/jQuery-Validation-Engine)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T09:59:30.187

我写了一个小例子，你可以如何快速轻松地验证电子邮件。无需使用插件的麻烦。如果你只使用一次，你可以使用

```
var emailaddressVal = 'nobody@example.cpom';

var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
if(emailReg.test(emailaddressVal) && emailaddressVal.length > 0)
{
    alert('Your email is valid.');
}
else
{
    alert('The email is invalid')
} 
```

但是把它放在一个函数中，这样你就可以多次使用它。而不是把它放在一个函数中，例如：

```
// Email check function 
function checkEmail(email)
{
    var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
    if(emailReg.test(email) && email.length > 0)
    {
        return true;
    }
    else
    {
        return false;
    }
}

// Ussage 
if(checkEmail('nobody@example.com'))
{
    alert('SUCCESS!!');
}
else
{
    alert('FAILED!!');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T09:50:29.453

你试过[jQuery URL 验证方法](http://docs.jquery.com/Plugins/Validation/Methods/url)吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T09:55:41.520

您可以使用 为所有错误设置相同的通用错误消息`data-errormessage`，因此无论该字段是空的还是具有无效值，您都会收到相同的消息。

# android - Android SimpleFramework 命名空间前缀

> ID：13358405
> 
> 赞同：1
> 
> 时间：2012-11-13T09:40:20.693
> 
> 标签：android, namespaces, xml-parsing, simple-framework

在 Android 上，我使用 SimpleFramework 来解析传入的 XML 并创建适当的对象（之后将其保存到 DB...）

XML 的一部分如下所示：

```
<CheckId xmlns:a="http://schemas.microsoft.com/2003/10/Serialization/Arrays">  
   <a:guid>00300001-0000-0000-0000-000000000000</a:guid>
</CheckId> 
```

哪里`<a:guid>`可以重复1..N

我的元素注释如下所示：

```
@ElementList(required = false, name="CheckId")  
@Namespace(reference="http://schemas.microsoft.com/2003/10/Serialization/Arrays")
@ForeignCollectionField(eager = true, orderColumnName = "Guid", columnName = TABLE_CHECK_ID_LIST_COLUMN)
public Collection<TableCheck> TableCheckIdList; 
```

在 TableCheck 类中是：

```
@Root(name = "CheckId")
@Order(elements = { "guid" })   
public static class TableCheck implements XMLParseable {

@Element(required = false, name="guid")
@DatabaseField
public String Guid;
...
} 
```

`<a:guid>`解析完成后，Collection 包含与 XML 中出现的标记一样多的项目。但是，Guid 属性始终为 NULL。

我尝试使用命名空间/前缀属性，但结果始终相同 - Guid 属性中的 NULL 值。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:21:09.553

这与 @Namespace 注释无关。由于以下原因之一，此处 Guid 为空。

a) 写成 <a:guid/>

b) 写成 <a:guid></a:guid> 行

c）在您完成解析后，某些东西将其设置为空。

尝试使用构造函数注入并将值设置为最终值，然后您就知道在创建对象后将其设置为 null。

# xslt - 如何从 XML 中的 2 级分组生成列输出？

> ID：13358412
> 
> 赞同：1
> 
> 时间：2012-11-13T09:40:38.883
> 
> 标签：xslt, grouping

我有以下xml：

### 输入

```
<page>
 <group category="cat1">
  <item fileunder="#">.45 colt</item>
  <item fileunder="#">8 queens</item>
  <item fileunder="#">9 lives</item>
  <item fileunder="#">99 bottles of beer</item>
  <item fileunder="A">An innocent man</item>
  <item fileunder="A">Academy awards</item>
  <item fileunder="B">Before the dawn</item>
 </group>
 <group category="cat2">
  <item fileunder="R">Rows of houses</item>
 </group>
</page> 
```

输入项已经排序。

### 期望的输出

我想为 each 生成一个 3 列 HTML 表格，每个`group`不同的 都有一个副标题（一个 3 列跨越单元格）`fileunder`，最佳地呈现在自上而下的 then-next-column 中（项目已经排序）：

```
<table>
 <tr><td colspan="3">#</td></tr>
 <tr><td>.45 colt</td><td>9 lives</td><td>99 bottles of beer</td></tr>
 <tr><td>8 queens</td></tr>
 <tr><td colspan="3">A</td></tr>
 <tr><td>An innocent man</td><td>Academy awards</td></tr>
 <tr><td colspan="3">B</td></tr>
 <tr><td>Before the dawn</td></tr>
</table>
<table>
 <tr><td colspan="3">R</td></tr>
 <tr><td>Rows of houses</td></tr>
</table> 
```

如果项目以从左到右，然后是下一行的形式呈现，我可以活下去。

到目前为止，我所拥有的是：

### 当前 xslt

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:key name="itm_grp" match="/page/group/item" use="concat(../@category,':',@fileunder)"/>
<xsl:template match="page/group">
  <table>
  <xsl:for-each select="item[.=key('itm_grp',concat(../@category,':',@fileunder))[1]]">
    <tr><td colspan="3"><xsl:value-of select="@fileunder"/></td></tr>
    <xsl:variable name="nodeset" select="key('itm_grp',concat(../@category,':',@fileunder))"/>
    <xsl:for-each select="$nodeset[position() mod 3=1]">
      <tr>
      <td><xsl:value-of select="."/></td>
      <td><xsl:value-of select="following-sibling::item[1]"/></td>
      <td><xsl:value-of select="following-sibling::item[2]"/></td>
      </tr>
    </xsl:for-each>
  </xsl:for-each>
  </table>
</xsl:template>
</xsl:stylesheet> 
```

它产生从左到右，然后是下一行的输出（非最佳）；但是，`following-sibling`选择会产生“渗透”效果：

```
#
.45 colt            8 queens         9 lives
99 bottles of beer  An innocent man  Academy awards
A
An innocent man     Academy awards   Before the dawn
B
Before the dawn     
R
Rows of houses 
```

如您所见，`fileunder` `#`有两个 A 项，`fileunder` `A`一个 B 项。

所以，我的问题是：

如何产生所需的输出（按列）？
如果我不能这样做，我怎样才能让逐行输出避免“出血”？

请注意，我对 XSLT 的经验很少，所以如果我的代码公然低效/愚蠢/无论如何，请随时通过替换所有代码来教育我！

注意：XSLT 版本 1，因此显然没有`index-of`可用的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T09:59:35.903

解决这个问题的最简单方法：

```
<xsl:variable name="header" select="@fileunder"/>
...
<xsl:value-of select="following-sibling::item[@fileunder=$header][1]"/>
<xsl:value-of select="following-sibling::item[@fileunder=$header][2]"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T13:12:00.027

您的叙述与您列出的预期输出之间存在轻微的矛盾。您已要求自上而下，然后是左右列的填充顺序，您在列表中对非空值有这样的要求，但对于空值则没有。这种空间顺序意味着必须先填写一整列，然后才能开始下一列。我假设您的列表是一个错误，而您真正想要的输出是......

```
<table>
  <tr>
    <td colspan="3">#</td>
  </tr>
  <tr>
    <td>.45 colt</td>
    <td>9 lives</td>
    <td>&npsp;</td>
  </tr>
  <tr>
    <td>8 queens</td>
    <td>99 bottles of beer</td>
    <td>&npsp;</td>
  </tr>
  <tr>
    <td colspan="3">A</td>
  </tr>
  <tr>
    <td>An innocent man</td>
    <td>Academy awards</td>
    <td>&npsp;</td>
  </tr>
  <tr>
    <td colspan="3">B</td>
  </tr>
  <tr>
    <td>Before the dawn</td>
    <td>&npsp;</td>
    <td>&npsp;</td>
  </tr>
</table>
<table>
  <tr>
    <td colspan="3">R</td>
  </tr>
  <tr>
    <td>Rows of houses</td>
    <td>&npsp;</td>
    <td>&npsp;</td>
  </tr>
</table> 
```

...这是一致的自上而下，然后是左右列填充顺序。

**这个 XSLT 1.0 样式表...**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="html" doctype-system="about:legacy-compat" encoding="UTF-8" indent="yes" />
<xsl:strip-space elements="*" />  

<xsl:key name="kItemByFile" match="item" use="concat(../@category,':',@fileunder)"/>

<xsl:template match="/">
 <html lang="en">
   <head><title>Songs</title></head>
   <body>  
     <xsl:apply-templates select="*/group" />
   </body>  
 </html>
</xsl:template>

<xsl:template match="group">
  <xsl:variable name="cat" select="concat(@category,':')" />
  <table> 
    <xsl:apply-templates select="item[
      generate-id() = generate-id(key('kItemByFile',concat($cat,@fileunder))[1])]" 
      mode="group-head" />
  </table> 
</xsl:template>

<xsl:template match="item" mode="group-head">
  <xsl:variable name="items"
     select="key('kItemByFile',concat(../@category,':',@fileunder))" />
  <xsl:variable name="row-count" select="ceiling( count($items) div 3)" />
  <tr><td colspan="3"><xsl:value-of select="@fileunder" /></td></tr>
  <xsl:for-each select="$items[position() &lt;= $row-count]">
    <xsl:variable name="pos" select="position()" />
    <xsl:apply-templates select="." mode="row">  
      <xsl:with-param name="items" select="$items" />
      <xsl:with-param name="row" select="$pos" />
      <xsl:with-param name="row-count" select="$row-count" />
    </xsl:apply-templates>  
  </xsl:for-each>
</xsl:template>

<xsl:template match="item" mode="row">
  <xsl:param name="items" select="/.." />
  <xsl:param name="row" select="1" />
  <xsl:param name="row-count" select="1" />
  <tr>
    <xsl:apply-templates select="
       $items[(position() mod $row-count) = ($row mod $row-count)]" mode="td" />
    <xsl:variable name="full-cols" select="floor((count($items) div $row-count))" />
    <xsl:variable name="part-col" select="number($row &lt;
                 ((count($items) mod $row-count) + 1))" />
    <xsl:variable name="empties" select="3 - ($full-cols + $part-col)" />
    <xsl:for-each select="(document('')/*/*)[position() &lt;= $empties]">
      <xsl:call-template name="empty-cell" />
    </xsl:for-each> 
  </tr>  
</xsl:template>

<xsl:template match="item" mode="td">
  <td><xsl:value-of select="." /></td>  
</xsl:template>

<xsl:template name="empty-cell">
  <td>&#160;</td>
</xsl:template>

</xsl:stylesheet> 
```

**...当应用于此输入时...**

```
<page>
 <group category="cat1">
  <item fileunder="#">.45 colt</item>
  <item fileunder="#">8 queens</item>
  <item fileunder="#">9 lives</item>
  <item fileunder="#">99 bottles of beer</item>
  <item fileunder="A">An innocent man</item>
  <item fileunder="A">Academy awards</item>
  <item fileunder="B">Before the dawn</item>
 </group>
 <group category="cat2">
  <item fileunder="R">Rows of houses</item>
 </group>
</page> 
```

**...产量...**

```
<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en">
  <head>
    <META http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Songs</title>
  </head>
  <body>
    <table>
      <tr>
        <td colspan="3">#</td>
      </tr>
      <tr>
        <td>.45 colt</td>
        <td>9 lives</td>
        <td> </td>
      </tr>
      <tr>
        <td>8 queens</td>
        <td>99 bottles of beer</td>
        <td> </td>
      </tr>
      <tr>
        <td colspan="3">A</td>
      </tr>
      <tr>
        <td>An innocent man</td>
        <td>Academy awards</td>
        <td> </td>
      </tr>
      <tr>
        <td colspan="3">B</td>
      </tr>
      <tr>
        <td>Before the dawn</td>
        <td> </td>
        <td> </td>
      </tr>
    </table>
    <table>
      <tr>
        <td colspan="3">R</td>
      </tr>
      <tr>
        <td>Rows of houses</td>
        <td> </td>
        <td> </td>
      </tr>
    </table>
  </body>
</html> 
```

**注意** 对于输出中的空单元格，在查看词法 HTML 时，您将获得`&nbsp;`或得到等效的文字空白。它依赖于 XSLT 处理器实现，但不应引起您的任何担忧，因为它是模型等效的。

# jquery - 无法点击加载

> ID：13358415
> 
> 赞同：3
> 
> 时间：2012-11-13T09:40:48.577
> 
> 标签：jquery, load, onclick

我正在尝试运行以下脚本，但我不能，有什么建议吗？关键是我试图从其他页面调用外部内容。当我单独编写它时没关系，但是当我尝试从列表或单击加载它时，它不能按预期工作

```
<div id="test">
    <a href="1/1.html">text 1</a>
    <a href="1/2.html">text 1</a>
</div>  

<b>see the text:</b>
<ol id="new-nav"></ol>

<script>
    $("#test").click(function () {
        $("#new-nav").load("href");
    });
</script> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-13T09:41:58.160

`Instead of passing "href" to load`这不是一个有效的资源`pass the href of link being clicked`，我还将选择器更改为将点击与锚点绑定。放入 $(document).ready 将确保 dom 元素在使用前的可用性，使用它是安全的。

```
$(document).ready(function(){         

    $("#test a").click(function (e) {

        // Stop the link from changing the page
        //e.preventDefault();

        // Your jQuery code.

        $("#new-nav").load($(this).attr("href"));
    });

}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-13T09:45:34.330

按照我在下面显示的方式放置您的代码。

```
$(document).ready(function(){
     // Your jQuery code.
}); 
```

你必须把 document.ready 因为 jQuery 代码总是在文档完全加载后运行，或者 DOM 对象完全加载...

# jsf-2 - primefaces中的密码匹配消息

> ID：13358417
> 
> 赞同：0
> 
> 时间：2012-11-13T09:40:52.437
> 
> 标签：jsf-2, primefaces

我从这个 Primefaces [http://blog.primefaces.org/?p=1512](http://blog.primefaces.org/?p=1512)博客中复制了关于简单密码验证的确切代码

```
<h:outputLabel for="pwd1" value="Password 1: *" />
                    <p:password id="pwd1" value="#{registerMB.password}"
                        feedback="false" match="pwd2" label="Password 1" required="true" />

                    <h:outputLabel for="pwd2" value="Password 2: *" />
                    <p:password id="pwd2" value="#{registerMB.password}"
                        feedback="false" label="Password 2" required="true" />

                    <f:facet name="footer">
                        <p:commandButton value="Register" action="/pages/public/login" />
                        <p:commandButton value="Cancel" immediate="true"
                            action="/pages/public/login" />
                    </f:facet> 
```

验证有效，但我只能得到验证错误。永远不会显示消息密码 1 应与密码 2 匹配。是否还有此配置？

我下载了 Primefaces 3.4.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-08-30T07:52:12.320

尝试添加以下内容

1.  p:password 标签 id="pwd2" 内的 validatorMessage 属性：

    ```
     <p:password id="pwd2" value="#{registerMB.password}"
                    feedback="false" label="Password 2" required="true"     
                   validatorMessage="password 1 should match password 2"/> 
    ```

2.  添加 p:message 标签以在 h:form 标签下方显示错误

    ```
     <p:messages id="messages" showDetail="true" autoUpdate="true"/> 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T10:27:17.803

添加`<p:messages id="messages" showDetail="true" autoUpdate="true"/>`

就像 int [Primefaecs Password Showcase](http://www.primefaces.org/showcase/ui/input/password.xhtml)

```
<h:form id="form">  
<p:panel header="Match Mode">  
    <p:messages id="messages" showDetail="true" autoUpdate="true"/>  

    <h:panelGrid columns="2" id="matchGrid">                     
        <h:outputLabel for="pwd1" value="Password 1: *" />  
        <p:password id="pwd1" value="#{passwordBean.password5}" match="pwd2" label="Password 1" required="true"/>  

        <h:outputLabel for="pwd2" value="Password 2: *" />  
        <p:password id="pwd2" value="#{passwordBean.password5}" label="Password 2" required="true"/>  
    </h:panelGrid>  

    <p:commandButton id="saveButton" update="matchGrid" value="Save" />  
</p:panel>  
</h:form> 
```

# mirth - 欢乐穿越 GlobalMap

> ID：13358423
> 
> 赞同：2
> 
> 时间：2012-11-13T09:41:35.947
> 
> 标签：mirth

在我的 mirth 实现（Mirth Connect Server 2.2.1）中，我有一个 GlobalMap，其中包含来自外部属性文件的键和属性。如何从 Globalmap 获取密钥集并对其进行迭代以获取值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:45:26.580

您可以像这样遍历全局地图：

```
for each (key in globalMap.getVariables().keySet().toArray())
    logger.info(key+': '+$g('key')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T00:33:58.950

我不确定您是如何初始化键/值集的，但这是我所做工作的基本概要。

要在 GlobalMap 中粘贴键/值集：

```
//I will assume that you have your own routine for initializing the
//kv set from your property file
var kvPairs = {'key1':'value1',
                     'key2':'value2',
                     'key3':'value3'};

globalMap.put('keyValuePairs',kvPairs); 
```

从 GlobalMap 中提取集合：

```
// Method 1
// Grab directly from GlobalMap object.
var kvPairs = globalMap.get('keyValuePairs');

// Method 2
// Use the Mirth shorthand to search all map objects until the
// desired variable is located.
var kvPairs = $('keyValuePairs'); 
```

遍历集合：

```
// Method 1
// If you need to access both the keys and the associated values, then
// use a for in loop
for (var key in kvPairs)
{
    var value = kvPairs[key];

    // you now have key and value, and can use them as you see fit
}

// Method 2
// If you only need the values, and don't need the keys, then you can use
// the more familiar for each in loop
for each (var value in kvPairs)
{
    // you now have value, and can use it as you see fit;
} 
```

# android - 像 ViewPager 一样进行活动转换

> ID：13358426
> 
> 赞同：2
> 
> 时间：2012-11-13T09:41:46.873
> 
> 标签：android, android-activity, android-viewpager, android-animation

我想**用 ViewPager 之类的转换启动Activity**。我的意思是活动 A 将活动 B 从一侧推到另一侧。我阅读[了这篇](https://stackoverflow.com/questions/4807131/new-activity-in-android-enter-from-the-side)文章并尝试实现转换，但它与 ViewPager 不同。

slide_up1.xml

```
<?xml version="1.0" encoding="utf-8"?>
<set
     xmlns:android="http://schemas.android.com/apk/res/android"
    >

<translate 
    android:fromXDelta="0%p" android:toXDelta="0%p" 
    android:fromYDelta="100%p" android:toYDelta="0%p" 
    android:duration="1000" android:startOffset="500"/>

</set> 
```

slide_up2.xml

```
<?xml version="1.0" encoding="utf-8"?>
    <set
         xmlns:android="http://schemas.android.com/apk/res/android"
        >

    <translate 
        android:fromXDelta="0%p" android:toXDelta="0%p" 
        android:fromYDelta="100%p" android:toYDelta="0%p" 
        android:duration="1000" android:startOffset="0"/>

    </set> 
```

称它为。

```
overridePendingTransition(R.animator.slide_up1, R.animator.slide_up2); 
```

**编辑：**

我的情况的解决方案。

slide_up1.xml

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
         >
        <translate android:fromXDelta="0%" android:toXDelta="0%"
          android:fromYDelta="100%" android:toYDelta="0%"
         android:duration="1000"/>
       </set> 
```

slide_up2.xml

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
         >
      <translate
       android:fromXDelta="0%" android:toXDelta="0%"
       android:fromYDelta="0%" android:toYDelta="-100%"
       android:duration="1000" />
    </set> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T09:56:45.723

尝试将 XML 更改为此

动画1

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
         android:shareInterpolator="false">
        <translate android:fromXDelta="-100%" android:toXDelta="0%"
          android:fromYDelta="0%" android:toYDelta="0%"
         android:duration="1000"/>
       </set> 
```

和动画2

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
         android:shareInterpolator="false">
      <translate
       android:fromXDelta="0%" android:toXDelta="100%"
       android:fromYDelta="0%" android:toYDelta="0%"
       android:duration="1000" />
    </set> 
```

这是从右到左的

之后，您可以使用覆盖挂起转换来调用它，就像您在问题中使用的代码一样

```
overridePendingTransition(R.anim.animation1, R.anim.animation2); 
```

# c# - 为什么我不能将 AppointmentsSearchEventArgs 保存到变量中？

> ID：13358428
> 
> 赞同：0
> 
> 时间：2012-11-13T09:41:57.493
> 
> 标签：c#, windows-phone-7, variables, appointment

我有一个相当简单的问题（我相信）。我有这个方法：

```
 void appointments_SearchCompleted(object sender, AppointmentsSearchEventArgs e)
    {

        if (e.Results.Count() == 0)
        {
            results = "no events for the selected day";
            //MessageBox.Show(results);
        }
        else
        {
            results = e.Results.Count() + " events found";
            sourceItem = e.Results;

            //MessageBox.Show(results);
        }
    } 
```

而且我不能同时“保存”变量`results`和`sourceItem`变量（它们是类字段）。此方法内的消息框显示一切正确，但外部`results`恢复为默认值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T13:23:24.947

答案很简单：我不明白 ansynch 下载是如何工作的。就我而言，我必须创建对 MainPage 类的引用，并在`appointments_SearchCompleted`方法中绑定项目。

就那么简单。

# c++ - 强制将文件写入磁盘

> ID：13358431
> 
> 赞同：5
> 
> 时间：2012-11-13T09:41:59.770
> 
> 标签：c++, linux, unix, disk, fflush

我目前正在实施一个 ping/pong 缓冲方案来安全地将文件写入磁盘。我在 Linux/CentOS 机器上使用 C++/Boost。现在我面临强制将文件实际写入磁盘的问题。无论文件系统（ext3 / ext4）/ SO自定义规则/ RAID控制器/硬盘控制器的所有缓存策略如何，都可以这样做吗？

最好使用普通的 fread()/fwrite()、c++ ostream 还是 boost 文件系统？

我听说简单地刷新文件 (fflush()) 并不能保证实际写入

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T09:44:11.653

fflush（用于 FILE*）、std::flush（用于 IOStream）强制您的程序发送到操作系统。

POSIX 有

*   sync(2) 要求安排写入其缓冲区，但可以在写入完成之前返回（Linux 正在等待数据在返回之前发送到硬件）。

*   fsync(2) 保证等待数据发送到硬件，但需要一个文件描述符（您可以使用 fileno(3) 从 FILE* 获取一个，我不知道从一个IO 流）。

*   O_SYNC 作为 open(2) 的标志。

在所有情况下，硬件可能都有自己的缓冲区（但如果它可以控制它，一个好的实现也会尝试刷新它们，并且 ISTR 某些磁盘正在使用电容器，以便它们能够刷新电源发生的任何事情）和网络文件系统有自己的警告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T10:00:51.800

您可以使用[fsync](http://pubs.opengroup.org/onlinepubs/7908799/xsh/fsync.html) ()/ [fdatasync](http://pubs.opengroup.org/onlinepubs/7908799/xsh/fdatasync.html) () 将数据强制（注 1）到存储上。那些需要一个文件描述符，由例如 open() 给出。[linux 手册页](http://linux.die.net/man/2/fsync)有更多的linux 特定信息，特别是关于 fsync 和 fdatasync 的区别。

如果您不直接使用文件描述符，许多抽象将包含驻留在您的进程中的内部缓冲区。

例如，如果您使用 FILE*，您首先必须将数据从应用程序中清除。

```
//... open and write data to a FILE *myfile
fflush(myfile);
fsync(fileno(myfile)); 
```

*   注意 1：这些调用强制操作系统确保任何操作系统缓存中的任何数据都写入驱动器，并且驱动器承认这一事实。许多硬盘驱动器在这方面对操作系统撒谎，并且可能将数据填充到驱动器上的高速缓存中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T09:57:57.670

不在标准 C++ 中。您必须使用某种特定于系统的 IO，例如`open`使用 Unix 下的`O_SYNC`标志，然后使用`write`.

`ostream`请注意，这部分隐含在（在 C 中`FILE*`）被缓冲的事实中。如果您不确切知道何时将某些内容写入磁盘，那么坚持写入的事务完整性就没有多大意义。`streambuf`（但是，设计一个仅在您执行显式刷新*时才*写入的不会太难。）

编辑：

举个简单的例子：

```
class SynchronizedStreambuf : public std::streambuf
{
    int myFd;
    std::vector<char> myBuffer;

protected:
    virtual int overflow( int ch );
    virtual int sync();

public:
    SynchronizedStreambuf( std::string const& filename );
    ~SynchronizedStreambuf();
};

int SynchronizedStreambuf::overflow( int ch )
{
    if ( myFd == -1 ) {
        return traits_type::eof();
    } else if ( ch == traits_type::eof() ) {
        return sync() == -1 ? traits_type::eof() : 0;
    } else {
        myBuffer.push_back( ch );
        size_t nextPos = myBuffer.size();
        myBuffer.resize( 1000 );
        setp( &myBuffer[0] + nextPos, &myBuffer[0] + myBuffer.size() );
        return ch;
    }
}

int SynchronizedStreambuf::sync()
{
    size_t toWrite = pptr() - &myBuffer[0];
    int result = (toWrite == 0 || write( myFd, &myBuffer[0], toWrite ) == toWrite ? 0 : -1);
    if ( result == -1 ) {
        close( myFd );
        setp( NULL, NULL );
        myFd = -1;
    } else {
        setp( &myBuffer[0], &myBuffer[0] + myBuffer.size() );
    }
    return result;
}

SynchronizedStreambuf::SynchronizedStreambuf( std::string const& filename )
    : myFd( open( filename.c_str(), O_WRONLY | O_CREAT | O_SYNC, 0664 ) )
{
}

SynchronizedStreambuf::~SynchronizedStreambuf()
{
    sync();
    close( myFd );
} 
```

（这只是表面上的测试，但基本的想法是存在的。）

# php - How to resize image using phpThumb class

> ID：13358433
> 
> 赞同：0
> 
> 时间：2012-11-13T09:42:03.913
> 
> 标签：php, phpthumb

I'm try to re size image using [phpThumb](http://phpthumb.sourceforge.net/) class(this open source php class)

so i call above class

```
$phpThumb = new phpThumb();
$phpThumb->setParameter('w', 900);
$phpThumb->setParameter('h', 86); 
```

but image not re size correct dimensions help to solution for this problem

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T09:48:26.920

老实说，[PHPThumbnailFactory](http://phpthumb.gxdlabs.com/)是一个非常好的类，您可以使用它来代替您当前使用的类。有了它，你可以说：

```
$thumb->resize(100, 100)->save('/path/to/new_thumb.jpg'); 
```

或类似的东西：

```
$thumb->adaptiveResize(175, 175); 
```

有很多选择。查看[github](https://github.com/masterexploder/PHPThumb/wiki/Basic-Usage)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T10:02:23.137

设置好输出目标等所需参数后，您需要调用 GenerateThumbnail 函数，然后调用其中一个输出函数：

```
if ($phpThumb->GenerateThumbnail()) {
    $phpThumb->OutputThumbnail();
} 
```

# primefaces - Primefaces p:menu 所有图标跳转到子菜单

> ID：13358441
> 
> 赞同：3
> 
> 时间：2012-11-13T09:43:00.760
> 
> 标签：primefaces, tomcat7

我正在使用：

*   素面3.4
*   tomcat7
*   使用自定义 primefaces 主题（dark-hive）
*   火狐 16.0.2, IE8

我正在尝试将 p:menu 放到网站上：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://java.sun.com/jsf/html"
      >
    <body>

        <ui:composition>
            <h:form>
                <p:menu >  
                    <p:submenu label="TESTING" icon="ui-icon-disk">  
                        <p:menuitem value="TEST"  outcome="/jsp/home" icon="ui-icon-star"/>
                        <p:menuitem value="List" outcome="/jsp/rip/home2" /> 
                        <p:menuitem value="ExcelTEst" outcome="/jsp/excelTest" /> 
                    </p:submenu>  
                </p:menu>

            </h:form>
        </ui:composition>

    </body>
</html> 
```

在此示例中，图标 ui-icon-star 跳转到子菜单测试左上角。这也发生在我为菜单项添加的所有图标上。至于图标ui-icon-disk，它没有显示出来。

我尝试了其他几个例子。这有效：

```
<p:panelMenu style="width:200px">  

    <p:submenu label="Navigations" >  
        <p:submenu label="Links" icon="ui-icon-extlink">  
            <p:submenu label="PrimeFaces" icon="ui-icon-heart">  
                <p:menuitem value="Home" url="http://www.primefaces.org" icon="ui-icon-home" />  
                <p:menuitem value="Docs" url="http://www.primefaces.org/documentation.html" icon="ui-icon-document" />  
                <p:menuitem value="Download" url="http://www.primefaces.org/downloads.html" icon="ui-icon-arrowthick-1-s" />  
                <p:menuitem value="Support" url="http://www.primefaces.org/support.html" icon="ui-icon-wrench" />  
            </p:submenu>  
        </p:submenu>  
        <p:menuitem value="Mobile" icon="ui-icon-signal"/>  
    </p:submenu>  
</p:panelMenu> 
```

有人可以说，怎么了？为什么 p:menu 不能按预期工作？

![在此处输入图像描述](../Images/e720768481bccdea4a1c1152464cb3e3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T22:13:33.490

这不是正确的解决方案，只需修复您的自定义主题 css：

```
.ui 菜单 .ui 图标
    位置：绝对；/* 删除这一行 */
    顶部：0.2em；
    左：0.2em；
}

到

.ui 菜单 .ui 图标
     顶部：0.2em；
    左：0.2em；
}

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T08:21:46.470

已解决从 ThemeRoller 中删除主题并从 Primefaces 中获取主题。有效。

# r - grep 和子集

> ID：13358444
> 
> 赞同：2
> 
> 时间：2012-11-13T09:43:13.767
> 
> 标签：r, regex

我正在尝试在一个大文件中对所有不以 . 结尾的单词进行子集化`"_at"`。

例如：文件“myfile”是一个 data.frame 组成如下（特别是我有一个 50 列和 1000 行的文件）：

```
myfile <- read.table( text = '"G1"            "G2"  
    SEP11          ABCC1   
    205772_s_at    FMO2   
    214223_at      ADAM19     
    ANK2           215742_at 
    COPS4          BIK 
    214808_at      DCP1A
    ACE            ALG3
    BAD            215369_at
    EMP3           215385_at
    CARD8          217579_x_at
', header = TRUE, stringsAsFactors = FALSE) 
```

我想要以下输出：

> ```
>  "G1"           "G2"  
>  SEP11          ABCC1  
>  ANK2           FMO2  
>  COPS4          ADAM19     
>  ACE            BIK   
>  BAD            DCP1A
>  EMP3           ALG3 
>  CARD8 
> ```

我使用了以下字符串，但它不起作用可能是因为我做错了什么：

```
sub <- myfile[-grep("\\_at", names(myfile)), ] 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T09:56:12.027

下面的代码会给你一个列表。列表的每个元素都是由正则表达式过滤的列的子集`_at$`。见[`?grep`](http://stat.ethz.ch/R-manual/R-devel/library/base/html/grep.html)。

```
lapply( myfile, 
   function(column) grep( "_at$", column, invert = TRUE, value = TRUE )
) 
```

# python - base64字符串的编译和评估

> ID：13358451
> 
> 赞同：3
> 
> 时间：2012-11-13T09:43:40.397
> 
> 标签：python, python-3.x, base64, eval

这是我最近看到的一些代码：

```
import base64

code="CmltcG9ydCBweW1vbmdvCmltcQ" #very long
eval(compile(base64.b64decode(code), "<string>", 'exec')) 
```

我知道它的作用，解码它非常好。但我很好奇如何自己做。因此，如果我有一个应用程序并且我想对其进行编码并使其通过代码运行，我应该如何对其进行编码以获取它的 base64 字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T09:46:56.620

您对包含在字符串中的有效 python 源代码进行编码：

```
import base64

source = '''\
print('Hello World!')
print('Not sure why you'd ever do this though..')
'''
code = base64.b64encode(source) 
```

# java - 使用 smtp 在 java 中发送邮件

> ID：13358453
> 
> 赞同：1
> 
> 时间：2012-11-13T09:43:45.110
> 
> 标签：java

我正在尝试发送电子邮件，但出现以下错误：

```
javax.mail.SendFailedException: Sending failed;
nested exception is: 
javax.mail.MessagingException: Could not connect to SMTP host: 10.17.1.65, port: 25 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T20:36:00.920

在这里，我分享了一个使用带有多个附件的 Gmail SSL 发送邮件的类。只需使用实际的 gmail 凭据更改 gmailUsername 和 gmailPass。并使用您想要的地址更改往返地址。在这里，我们使用 Gmail SSL smtp 端口发送邮件。您可以使用自己的邮件服务器详细信息对其进行更改。

```
import java.util.*;

import javax.mail.*;

import javax.mail.internet.*;

import javax.activation.*;

/**

Author Mridul Chatterjee

 */

import java.util.Properties;

import javax.mail.Message;

import javax.mail.MessagingException;

import javax.mail.PasswordAuthentication;

import javax.mail.Session;

import javax.mail.Transport;

import javax.mail.internet.InternetAddress;

import javax.mail.internet.MimeMessage;

public class SendMail {

public static void main(String[] args) {

Properties props = new Properties();

props.put(”mail.smtp.host”, “smtp.gmail.com”);

props.put(”mail.smtp.socketFactory.port”, “465″);

props.put(”mail.smtp.socketFactory.class”,

“javax.net.ssl.SSLSocketFactory”);

props.put(”mail.smtp.auth”, “true”);

props.put(”mail.smtp.port”, “465″);

ArrayList fileNames = new ArrayList();

fileNames.add(”C:/Write.txt”);

fileNames.add(”C:/Write1.txt”);

fileNames.add(”C:/Write2.txt”);

fileNames.add(”C:/Write3.txt”);

fileNames.add(”C:/25148.jpg”);

Session session = Session.getDefaultInstance(props,

new javax.mail.Authenticator() {

protected PasswordAuthentication getPasswordAuthentication() {

return new PasswordAuthentication(”gmailUsername”,”gmailPass”);

}

});

try {

Message message = new MimeMessage(session);

message.setFrom(new InternetAddress(”from@no-spam.com”));

message.setRecipients(Message.RecipientType.TO,

InternetAddress.parse(”tomail@mail.com”));

message.setSubject(”Testing Subject”);

message.setText(”Dear Mail Crawler,” +

“nn No spam to my email, please!”);

     //  multipart.addBodyPart(messageBodyPart);

     //  DataSource source = new FileDataSource(filename);

    //   messageBodyPart.setDataHandler(new DataHandler(source));

    //   messageBodyPart.setFileName(filename);

       System.out.println(fileNames.size());

       Multipart multipart = new MimeMultipart();

       BodyPart messageBodyPart = new MimeBodyPart();

       for(int i=0;i            {

                System.out.println(fileNames.get(i));

                messageBodyPart = new MimeBodyPart();

                DataSource source = new FileDataSource((String)fileNames.get(i));

                messageBodyPart.setDataHandler(new DataHandler(source));

                messageBodyPart.setFileName((String)fileNames.get(i));

                multipart.addBodyPart(messageBodyPart);

                //message.setContent(multipart);

            }

       //multipart.addBodyPart(messageBodyPart);

       message.setContent(multipart);

Transport.send(message);

System.out.println(”Mail Sent Successfully….”);

} catch (MessagingException e) {

throw new RuntimeException(e);

}

}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T09:55:30.190

首先测试 netstat 命令是否主机响应。如果是，那么您需要检查主机上的电子邮件服务器/中继。您可以通过此链接[http://www.mailradar.com/openrelay/对其进行测试](http://www.mailradar.com/openrelay/)

# sql - T-SQL 查询矩阵表的空闲位置

> ID：13358454
> 
> 赞同：1
> 
> 时间：2012-11-13T09:43:47.627
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我正在尝试为具有如下架构的矩阵表构建查询：

```
X   | Y   | Z   | Disabled   | OccupiedId |
--------------------------------------------
1     1     1       0            NULL
1     2     1       0            NULL
1     3     1       1            NULL
1     4     1       0               1
1     5     1       0               2
1     6     1       0               3
1     7     1       0               4
1     1     2       0            NULL
1     2     2       0            NULL
1     3     2       0            NULL
1     4     2       0            NULL
1     5     2       0            NULL
1     6     2       0            NULL
1     7     2       0            NULL 
```

我想为 X、Z 分组并在 Y 上找到第一个可用位置。无论如何可用是未禁用且未占用。

在提供的示例中，此查询应返回：

```
X   | Z   | FreeY
--------------------------------------------
 1     1     2
 1     2     7 
```

考虑到每个 (X, Z) 从末尾开始填充（MAX Y 为常数），查询应选择第一个空闲 Y（或最后一个占用的 Y）

我尝试了不同的方法但没有成功:(任何建议都非常感谢！亲切的问候，D。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T09:53:22.140

[SQL小提琴](http://www.sqlfiddle.com/#!3/ef01e/3)

```
 CREATE TABLE Coordinate
(  X int, Y int,Z int, Disabled bit, OccupiedId int)

INSERT INTO Coordinate VALUES (1,1,1, 1, NULL)
INSERT INTO Coordinate VALUES (1,1,2, 0, NULL)
INSERT INTO Coordinate VALUES (1,1,3, 0, NULL)
INSERT INTO Coordinate VALUES (1,1,4, 0, NULL)
INSERT INTO Coordinate VALUES (1,2,1, 0, NULL)
INSERT INTO Coordinate VALUES (1,2,2, 0, NULL)
INSERT INTO Coordinate VALUES (1,2,3, 0, 123)
INSERT INTO Coordinate VALUES (1,2,4, 0, NULL)
INSERT INTO Coordinate VALUES (1,2,5, 1, NULL)

SELECT X, Z, MIN(Y) AS FirstFreePosition
FROM Coordinate
WHERE Disabled = 0 AND OccupiedId IS NULL
GROUP BY X, Z

OR -- if you need the unavailable combinations too, then something like this:

SELECT X, Z, MIN(CASE 
                 WHEN Disabled = 1 OR OccupiedId IS NOT NULL 
                 THEN 1000 --a big number
                 ELSE Y END) AS FirstFreePosition
FROM Coordinate
GROUP BY X, Z 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T09:58:52.817

对于您的编辑（禁用=位列），此查询显示 lastOccupiedID 以及 firstFreeY

```
 select x, z,
         max(case when disabled=1 or occupiedid is not null
             then Y else 0 end) lastOccupiedPosition,
         maX(case when disabled=0 AND occupiedid is null
             then Y else 0 end) firstFreeY
    from matrix
group by x, z
order by x, z; 
```

* * *

[SQL小提琴](http://sqlfiddle.com/#!3/4a72a/2)

**MS SQL Server 2008 架构设置**：

```
create table matrix(
X int  , Y int  , Z int  , Disabled varchar(5)  , OccupiedId int );
insert matrix values
(1    , 1   , 1   , 'True'       , NULL      ),
(1    , 1   , 2   , 'False'      , NULL      ),
(1    , 1   , 3   , 'False'      , NULL      ),
(1    , 1   , 4   , 'False'      , NULL      ),
(1    , 2   , 1   , 'False'      , NULL      ),
(1    , 2   , 2   , 'False'      , NULL      ),
(1    , 2   , 3   , 'False'      , 123       ),
(1    , 2   , 4   , 'False'      , NULL      ); 
```

**查询 1**：

```
 select x, z,
         max(case when disabled='true' or occupiedid is not null
             then Y else 0 end) lastOccupiedPosition
    from matrix
group by x, z
order by x, z 
```

**[结果](http://sqlfiddle.com/#!3/4a72a/2/0)**：

```
| X | Z | LASTOCCUPIEDPOSITION |
--------------------------------
| 1 | 1 |                    1 |
| 1 | 2 |                    0 |
| 1 | 3 |                    2 |
| 1 | 4 |                    0 | 
```

# performance - OpenGL结合纹理

> ID：13358455
> 
> 赞同：1
> 
> 时间：2012-11-13T09:43:54.723
> 
> 标签：performance, opengl, glfw

我正在用 OpenGL 编写一个 2D 游戏，我必须输出一个由 20x15 字段组成的关卡。

所以我目前正在为每个字段输出一个非常慢的纹理（300 个纹理/帧）。

但是由于关卡永远不会改变的原因，我想知道是否可以在游戏循环开始之前将纹理组合成一个大的单一纹理。

然后我只需要输出一个带有 4 个纹理坐标 (0/0)(0/1)(1/1)(1/0) 和 4 个 glVertex2f() 的纹理，它指定了窗口中的位置。

这是 300 个字段中每个字段的当前代码：

```
glColor3f(1,1,1);
glBindTexture(GL_TEXTURE_2D,textur);
glBegin(GL_QUADS);
    glTexCoord2f(textArea.a.x,textArea.b.y);glVertex2f(display.a.x,display.a.y);
    glTexCoord2f(textArea.a.x,textArea.a.y);glVertex2f(display.a.x,display.b.y);
    glTexCoord2f(textArea.b.x,textArea.a.y);glVertex2f(display.b.x,display.b.y);
    glTexCoord2f(textArea.b.x,textArea.b.y);glVertex2f(display.b.x,display.a.y);
glEnd(); 
```

请注意，我在一个 .tga 文件中包含所有可能的字段类型的图像。所以我用 glTexCoord2f() 选择了正确的。

将所有 Tiles 的图像文件加载到

```
GLuint textur; 
```

所以我为每个字段绑定相同的纹理。

我的目标是减少 CPU 时间。显示列表不起作用，因为要在显卡中加载太多数据，最终显示列表甚至更慢。

我也无法使用 VBO，因为我不使用像 GLUT 这样的扩展。

所以我的想法是生成一个应该非常简单有效的单一纹理。

我希望你能给我反馈我如何组合纹理以及这种方法是否是提高性能的最简单方法

编辑：这是我在程序中使用的 OpenGL 函数：

当我启动程序时，我初始化窗口：

```
glfwInit();                     
if( !glfwOpenWindow(windowSize.x,windowSize.y, 0, 0, 0, 0, 0, 0, GLFW_WINDOW ) ) 
{   glfwTerminate();           
    return;
} 
```

这就是游戏循环对 OpenG 所做的一切：

```
int main()
{
    //INIT HERE (see code above)

    glBlendFunc(GL_SRC_ALPHA,GL_ONE_MINUS_SRC_ALPHA);
    glEnable(GL_BLEND);                                
    glAlphaFunc(GL_GREATER,0.1f);
    glEnable(GL_ALPHA_TEST);

    long loopStart;//measure loopcycle-time
    do{
        height = height > 0 ? height : 1;
        glViewport( 0, 0, width, height );              //set Origin
        glClearColor( 0.0f, 0.0f, 0.0f, 0.0f );      //background-color
        glClear(GL_COLOR_BUFFER_BIT);
        glMatrixMode(GL_PROJECTION);
        glLoadIdentity();                      
        glOrtho(0,windowSize.x,0,windowSize.y,0,128);   //2D-Mode
        glMatrixMode(GL_MODELVIEW);
        loopStart=clock();

        //(...) OUTPUT HERE (code see above)

        glfwSwapBuffers();                              //erzeugte Grafikdaten ausgeben

        printf("%4dms -> ",clock()-loopStart);
    }while(...);

    glDisable(GL_ALPHA_TEST);
    glDisable(GL_TEXTURE_2D);
    glfwTerminate();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T20:48:38.830

我看到你正在使用 GLFW。您可以添加 GLEW 和 GLM，然后您应该使用 OpenGL 3.x 或更高版本。

这是一个完整的示例，您如何在预算不足的笔记本电脑上以 200 或更高的 FPS 轻松绘制 2000 个或更多纹理四边形（使用 Alphablending）。它只有一个小纹理，但它也适用于 4096x4096 纹理图集。如果大纹理中的子纹理大小与您绘制的四边形的大小完全匹配，您将获得巨大的性能命中！您也应该在大纹理中使用 50x50 像素！此处的以下 Deme-Code 每帧还更新所有 2000 个 Quads 并将它们发送到 GPU。如果您不必每帧更新它们并将滚动坐标放入着色器......您将再次获得性能。如果您不需要混合...使用 Alpha-Tests..您将再次获得更快的速度。

```
#define GLEW_STATIC
#include "glew.h"
#include "glfw.h"
#include "glm.hpp"
#include "glm/gtc/matrix_transform.hpp"
#include "glm/gtx/transform.hpp"
#include <sstream>
#include <fstream>
#include <vector>

#define BUFFER_OFFSET(i) ((char *)NULL + (i))

std::ofstream logger("Log\\Ausgabe.txt", (std::ios::out | std::ios::app));

class Vertex
{
public:
    float x;
    float y;
    float z;
    float tx;
    float ty;
};

class Quad
{
public:
    float x;
    float y;
    float width;
    float height;
};

int getHighResTimeInMilliSeconds(bool bFirstRun);
GLuint buildShader();
void addQuadToLocalVerticeArray(Vertex * ptrVertexArrayLocal, Quad *quad, int *iQuadCounter);

int main()
{
    logger << "Start" << std::endl;

    if(!glfwInit())
        exit(EXIT_FAILURE);

    glfwOpenWindowHint(GLFW_OPENGL_VERSION_MAJOR,3);
    glfwOpenWindowHint(GLFW_OPENGL_VERSION_MINOR,3);
    glfwOpenWindowHint(GLFW_OPENGL_FORWARD_COMPAT, 1);
    glfwOpenWindowHint(GLFW_OPENGL_PROFILE,GLFW_OPENGL_CORE_PROFILE);

    if( !glfwOpenWindow(1366, 768,8,8,8,8,32,32,GLFW_FULLSCREEN) )
    {
        glfwTerminate();
        exit( EXIT_FAILURE );
    }

    if (glewInit() != GLEW_OK)
        exit( EXIT_FAILURE );

    //Init
    GLuint VertexArrayID;
    GLuint vertexbuffer;
    GLuint MatrixID;
    GLuint TextureID;
    GLuint Texture;

    GLuint programID = buildShader();

    //Texture in Video-Speicher erstellen
    GLFWimage img;
    int iResult = glfwReadImage("Graphics\\gfx.tga", &img, GLFW_NO_RESCALE_BIT);

    glEnable(GL_TEXTURE_2D);
    glGenTextures(1, &Texture);
    glBindTexture(GL_TEXTURE_2D, Texture);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA,32,32, 0, GL_RGBA, GL_UNSIGNED_BYTE, img.Data);
    glfwFreeImage(&img);

    Vertex * ptrVertexArrayLocal = new Vertex[12000];

    glGenVertexArrays(1, &VertexArrayID);
    glBindVertexArray(VertexArrayID);
    glGenBuffers(1, &vertexbuffer);
    glBindBuffer(GL_ARRAY_BUFFER, VertexArrayID);
    glBufferData(GL_ARRAY_BUFFER, sizeof(Vertex) * 12000, NULL, GL_DYNAMIC_DRAW);

    glm::mat4 Projection = glm::ortho(0.0f, (float)1366,0.0f, (float)768, 0.0f, 100.0f);
    glm::mat4 Model      = glm::mat4(1.0f); 
    glm::mat4 MVP        = Projection * Model;

    glViewport( 0, 0, 1366, 768 ); 

    MatrixID = glGetUniformLocation(programID, "MVP");
    glEnable(GL_CULL_FACE);
    glEnable (GL_BLEND); 
    glBlendFunc (GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
    TextureID  = glGetUniformLocation(programID, "myTextureSampler");

    glUseProgram(programID);

    glUniformMatrix4fv(MatrixID, 1, GL_FALSE, &MVP[0][0]);

    glActiveTexture(GL_TEXTURE0);
    glBindTexture(GL_TEXTURE_2D, Texture);
    glUniform1i(TextureID, 0);

    int iQuadVerticeCounter=0;

    int iNumOfQuads = 2000;
    Quad * ptrQuads = new Quad[iNumOfQuads];

    //LOCAL VERTICES CHANGES EACH LOOP
    for (int i=0; i<iNumOfQuads; i++)
    {
        ptrQuads[i].width  = 32;
        ptrQuads[i].height = 32;
        ptrQuads[i].x      = (float)(rand() % (1334));
        ptrQuads[i].y      = (float)(rand() % (736));
    }

    int iCurrentTime=0;
    int iFPS=0;
    int iFrames=0;
    int iFrameCounterTimeStart=0;
    int running = GL_TRUE;

    bool bFirstRun=true;

    while( running )
    {
        iCurrentTime = getHighResTimeInMilliSeconds(bFirstRun);
        bFirstRun=false;

        //UPDATE ALL QUADS EACH FRAME!
        for (int i=0; i<iNumOfQuads; i++)
        {
            ptrQuads[i].width  = 32;
            ptrQuads[i].height = 32;
            ptrQuads[i].x      = ptrQuads[i].x;
            ptrQuads[i].y      = ptrQuads[i].y;
            addQuadToLocalVerticeArray(ptrVertexArrayLocal, &ptrQuads[i], &iQuadVerticeCounter);
        }

        //DO THE RENDERING
        glClear( GL_COLOR_BUFFER_BIT );

        glBindBuffer(GL_ARRAY_BUFFER, VertexArrayID);
        glBufferSubData(GL_ARRAY_BUFFER, 0,sizeof(Vertex) * iQuadVerticeCounter, ptrVertexArrayLocal);

        glEnableVertexAttribArray(0);
        glBindBuffer(GL_ARRAY_BUFFER, vertexbuffer);
        glVertexAttribPointer(0,3,GL_FLOAT,GL_FALSE,sizeof(Vertex),BUFFER_OFFSET(0));

        glEnableVertexAttribArray(1);
        glBindBuffer(GL_ARRAY_BUFFER, vertexbuffer);
        glVertexAttribPointer(1,2,GL_FLOAT,GL_FALSE,sizeof(Vertex),BUFFER_OFFSET(3*sizeof(GL_FLOAT)));

        glDrawArrays(GL_TRIANGLES, 0, iQuadVerticeCounter);

        glDisableVertexAttribArray(0);
        glDisableVertexAttribArray(1);

        iQuadVerticeCounter=0;

        glfwSwapBuffers();

        //END OF DOING THE RENDERING

        running = !glfwGetKey( GLFW_KEY_ESC ) &&glfwGetWindowParam( GLFW_OPENED );

        iFrames++;

        if (iCurrentTime >= iFrameCounterTimeStart + 1000.0f)
        {
            iFPS = (int)((iCurrentTime - iFrameCounterTimeStart) / 1000.0f * iFrames);
            iFrameCounterTimeStart = iCurrentTime;
            iFrames = 0;
            logger << "FPS: " << iFPS << std::endl;
        }
    }

    glfwTerminate();
    exit( EXIT_SUCCESS );
}

int getHighResTimeInMilliSeconds(bool bFirstRun)
{
    if (bFirstRun)
        glfwSetTime(0);

    return (int)((float)glfwGetTime()*1000.0f);
}

GLuint buildShader()
{
    //Hint: Shader in the TXT-File looks like this
    /*std::stringstream ssVertexShader;
    ssVertexShader << "#version 330 core"<< std::endl 
                   <<   "layout(location = 0) in vec3 vertexPosition_modelspace;"<< std::endl
                   <<   "layout(location = 1) in vec2 vertexUV;"<< std::endl
                   <<   "out vec2 UV;"<< std::endl
                   <<   "uniform mat4 MVP;"<< std::endl
                   <<   "void main(){"<< std::endl
                   <<   "vec4 v = vec4(vertexPosition_modelspace,1);"<< std::endl
                   <<   "gl_Position = MVP * v;"<< std::endl
                   <<   "UV = vertexUV;"<< std::endl
                   <<   "}"<< std::endl;*/

    std::string strVertexShaderCode;
    std::ifstream VertexShaderStream("Shader\\VertexShader.txt", std::ios::in);
    if(VertexShaderStream.is_open())
    {
        std::string Line = "";
        while(getline(VertexShaderStream, Line))
            strVertexShaderCode += "\n" + Line;

        VertexShaderStream.close();
    }

    //Hint: Shader in the TXT-File looks like this
    /*std::stringstream ssFragmentShader;
    ssFragmentShader << "#version 330 core\n"
                      "in vec2 UV;\n"
                      "out vec4 color;\n"
                      "uniform sampler2D myTextureSampler;\n"
                      "void main(){\n"
                      "color = texture( myTextureSampler, UV ).rgba;\n"
                      "}\n";*/

    std::string strFragmentShaderCode;
    std::ifstream FragmentShaderStream("Shader\\FragmentShader.txt", std::ios::in);
    if(FragmentShaderStream.is_open())
    {
        std::string Line = "";
        while(getline(FragmentShaderStream, Line))
            strFragmentShaderCode += "\n" + Line;

        FragmentShaderStream.close();
    }

    GLuint gluiVertexShaderId = glCreateShader(GL_VERTEX_SHADER);
    char const * VertexSourcePointer = strVertexShaderCode.c_str();
    glShaderSource(gluiVertexShaderId, 1, &VertexSourcePointer , NULL);
    glCompileShader(gluiVertexShaderId);

    GLint Result = GL_FALSE;
    int InfoLogLength;
    glGetShaderiv(gluiVertexShaderId, GL_COMPILE_STATUS, &Result);
    glGetShaderiv(gluiVertexShaderId, GL_INFO_LOG_LENGTH, &InfoLogLength);
    std::vector<char> VertexShaderErrorMessage(InfoLogLength);
    glGetShaderInfoLog(gluiVertexShaderId, InfoLogLength, NULL, &VertexShaderErrorMessage[0]);
    std::string strInfoLog = std::string(&VertexShaderErrorMessage[0]);

    GLuint gluiFragmentShaderId = glCreateShader(GL_FRAGMENT_SHADER);
    char const * FragmentSourcePointer = strFragmentShaderCode.c_str();
    glShaderSource(gluiFragmentShaderId, 1, &FragmentSourcePointer , NULL);
    glCompileShader(gluiFragmentShaderId);

    Result = GL_FALSE;
    glGetShaderiv(gluiFragmentShaderId, GL_COMPILE_STATUS, &Result);
    glGetShaderiv(gluiFragmentShaderId, GL_INFO_LOG_LENGTH, &InfoLogLength);
    std::vector<char> FragmentShaderErrorMessage(InfoLogLength);
    glGetShaderInfoLog(gluiFragmentShaderId, InfoLogLength, NULL, &FragmentShaderErrorMessage[0]);
    strInfoLog = std::string(&FragmentShaderErrorMessage[0]);

    GLuint gluiProgramId = glCreateProgram();
    glAttachShader(gluiProgramId, gluiVertexShaderId);
    glAttachShader(gluiProgramId, gluiFragmentShaderId);
    glLinkProgram(gluiProgramId);

    Result = GL_FALSE;
    glGetProgramiv(gluiProgramId, GL_LINK_STATUS, &Result);
    glGetProgramiv(gluiProgramId, GL_INFO_LOG_LENGTH, &InfoLogLength);
    std::vector<char> ProgramErrorMessage( std::max(InfoLogLength, int(1)) );
    glGetProgramInfoLog(gluiProgramId, InfoLogLength, NULL, &ProgramErrorMessage[0]);
    strInfoLog = std::string(&ProgramErrorMessage[0]);

    glDeleteShader(gluiVertexShaderId);
    glDeleteShader(gluiFragmentShaderId);
    return gluiProgramId;
}

void addQuadToLocalVerticeArray(Vertex * ptrVertexArrayLocal, Quad *quad, int *ptrQuadVerticeCounter)
{
    //Links oben
    ptrVertexArrayLocal[*ptrQuadVerticeCounter].x  = quad->x;
    ptrVertexArrayLocal[*ptrQuadVerticeCounter].y  = quad->y;
    ptrVertexArrayLocal[*ptrQuadVerticeCounter].z  = 0.0f;
    ptrVertexArrayLocal[*ptrQuadVerticeCounter].tx = 0.0f;
    ptrVertexArrayLocal[*ptrQuadVerticeCounter].ty = 1.0f;

    ++(*ptrQuadVerticeCounter);

    //Links unten
    ptrVertexArrayLocal[*ptrQuadVerticeCounter].x  = quad->x;
    ptrVertexArrayLocal[*ptrQuadVerticeCounter].y  = quad->y - quad->height;
    ptrVertexArrayLocal[*ptrQuadVerticeCounter].z  = 0.0f;
    ptrVertexArrayLocal[*ptrQuadVerticeCounter].tx = 0.0f;
    ptrVertexArrayLocal[*ptrQuadVerticeCounter].ty = 0.0f;

    ++(*ptrQuadVerticeCounter);

    //Rechts unten
    ptrVertexArrayLocal[*ptrQuadVerticeCounter].x  = quad->x + quad->width;
    ptrVertexArrayLocal[*ptrQuadVerticeCounter].y  = quad->y - quad->height;
    ptrVertexArrayLocal[*ptrQuadVerticeCounter].z  = 0.0f;
    ptrVertexArrayLocal[*ptrQuadVerticeCounter].tx = 1.0f;
    ptrVertexArrayLocal[*ptrQuadVerticeCounter].ty = 0.0f;

    ++(*ptrQuadVerticeCounter);

    //Rechts unten
    ptrVertexArrayLocal[*ptrQuadVerticeCounter].x  = quad->x + quad->width;
    ptrVertexArrayLocal[*ptrQuadVerticeCounter].y  = quad->y - quad->height;
    ptrVertexArrayLocal[*ptrQuadVerticeCounter].z  = 0.0f;
    ptrVertexArrayLocal[*ptrQuadVerticeCounter].tx = 1.0f;
    ptrVertexArrayLocal[*ptrQuadVerticeCounter].ty = 0.0f;

    ++(*ptrQuadVerticeCounter);

    //Rechts oben
    ptrVertexArrayLocal[*ptrQuadVerticeCounter].x  = quad->x + quad->width;
    ptrVertexArrayLocal[*ptrQuadVerticeCounter].y  = quad->y;
    ptrVertexArrayLocal[*ptrQuadVerticeCounter].z  = 0.0f;
    ptrVertexArrayLocal[*ptrQuadVerticeCounter].tx = 1.0f;
    ptrVertexArrayLocal[*ptrQuadVerticeCounter].ty = 1.0f;

    ++(*ptrQuadVerticeCounter);

    //Links oben
    ptrVertexArrayLocal[*ptrQuadVerticeCounter].x  = quad->x;
    ptrVertexArrayLocal[*ptrQuadVerticeCounter].y  = quad->y;
    ptrVertexArrayLocal[*ptrQuadVerticeCounter].z  = 0.0f;
    ptrVertexArrayLocal[*ptrQuadVerticeCounter].tx = 0.0f;
    ptrVertexArrayLocal[*ptrQuadVerticeCounter].ty = 1.0f;

    ++(*ptrQuadVerticeCounter);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T12:51:19.890

我现在发现了一个巨大的时间杀手。我使用的纹理太大，分辨率非常低。

包含关卡精灵的主纹理的分辨率为 2200x2200 像素。于是 GPU 将大小增加到 4096x4096 并用海量数据计算出来。

图像包含 10x10 个不同的 Level-Tiles，它们以 50x50 像素的分辨率输出到屏幕上。
所以我以较低的分辨率（1020 x 1020 像素 -> 每个 tile=102x102px）保存了 Tiles 文件，现在我的循环周期时间为 <=15ms。
这并不完美，但与我之前的 30-60 毫秒相比，这是一个巨大的进步。

# jquery-mobile - 从代码启动的 jQM 弹出窗口中未设置样式的按钮

> ID：13358459
> 
> 赞同：2
> 
> 时间：2012-11-13T09:44:14.387
> 
> 标签：jquery-mobile, popup

我正在使用 jQM 弹出窗口来“提醒”用户注意某些事情。例如，我提出一个`$.ajax()`请求，如果响应有问题，我会弹出一个弹出窗口。像这样的东西：

```
<div data-role="popup" id="popup">
    <p id="popupMsg"></p>
</div>

$("#popupMsg").html(msg);
$("#popup").popup({
    history:false,
    overlayTheme: "a"
}).popup('open'); 
```

一切正常，但如果我将弹出窗口更改为包含一个按钮，这样：

```
<div data-role="popup" id="popup">
    <p id="popupMsg"></p>
    <a href="#" data-role="button" data-rel="back" data-theme="c">Ok</a>
</div> 
```

然后链接没有样式，它只会显示一个“Ok”链接。如果我将弹出窗口移动到一个对话框，那么它所有的工作，按钮和所有，但因为我希望看到下面的页面，我想让它保持一个弹出窗口。

我错过了什么吗？我看到了很多关于弹出窗口/对话框的问题，但它们都是指单击按钮来显示它们。我使用 jquery-1.8.2 和 jquery.mobile-1.2.0。

* * *

**编辑**：我的情况的解决方案是弹出窗口`div`必须进入页面*内部*`div`，而不是页面外部（如对话框`div`那样），如下所示：

*之前（错误）*：

```
<div data-role="page">
    <div data-role="content">
        ...page stuff...
    </div>
</div>
<div data-role="popup" id="popup">
    <p id="popupMsg"></p>
    <a href="#" data-role="button" data-rel="back" data-theme="c">Ok</a>
</div> 
```

*之后（右）*：

```
<div data-role="page">
    <div data-role="content">
        ...page stuff...
        <div data-role="popup" id="popup">
            <p id="popupMsg"></p>
            <a href="#" data-role="button" data-rel="back" data-theme="c">Ok</a>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T13:34:57.437

您需要刷新 jQM 标记

*   [http://jsfiddle.net/xvvCA/1/](http://jsfiddle.net/xvvCA/1/)
*   [http://jsfiddle.net/xvvCA/](http://jsfiddle.net/xvvCA/)（内联按钮）

JS

```
var msg = 'Look! A new button!';

$("#popupMsg").html(msg);
$("#popup").popup({
    history:false,
    overlayTheme: "a"
}).popup('open');

$('#okButton').button('refresh'); // you need to refresh jQM markup 
```

HTML

```
<div data-role="page">
    <div data-role="content">

        <div data-role="popup" id="popup">
            <p id="popupMsg"></p>
            <a href="#" data-role="button" data-rel="back" data-theme="c" id="okButton">Ok</a>
        </div>

    </div>
</div> 
```

# rest - Camel Restlet maxThreads 组件选项

> ID：13358460
> 
> 赞同：2
> 
> 时间：2012-11-13T09:44:16.430
> 
> 标签：rest, apache-camel, restlet

我有个问题。apache camel 文档指出，对于 camel-restlet 组件（从 2.10 版本开始），可以定义服务请求的最大线程数（http://camel.apache.org/restlet.html）。

我怎样才能指定这个参数？这是我做的路线

```
from(
            "restlet:http://localhost:" + config.getEmergencyRESTPort()
                    + "?restletMethods=post,get&restletUriPatterns=#emergencyUriTemplates&maxThreads=64").process(
            new EmergencyServerProcessor(config, emergencyService)); 
```

我在 url 中使用了 maxThreads 参数，但它不起作用。

错误是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-10T15:46:16.967

maxThreads 不是 URI 选项，而是一个组件选项。

您可以通过创建这样的 bean 来配置您的 restlet 组件：

```
<bean id="restlet" class="org.apache.camel.component.restlet.RestletComponent">
    <property name="maxThreads" value="50"/>
</bean> 
```

# xcode - 不会迁移到沙盒

> ID：13358461
> 
> 赞同：2
> 
> 时间：2012-11-13T09:44:23.793
> 
> 标签：xcode, macos, cocoa, sandbox

我正在对现有应用程序进行沙盒处理，由于某些原因，迁移似乎不起作用，尽管我完全遵循文档中指定的[内容](http://developer.apple.com/library/mac/#documentation/Security/Conceptual/AppSandboxDesignGuide/MigratingALegacyApp/MigratingAnAppToASandbox.html)。总之，这就是我正在做的事情：

1.  我已经删除了现有的容器（在 ~/Library/Containers/com.mycompany.myapp 中）；
2.  我`container-migration.plist`在资源组中创建了；
3.  我想迁移一个文件，在`~/Application Support`： 我试图指定文件和封闭文件夹，但都没有工作。这是我正在使用的迁移 plist（我刚刚更改了应用程序名称），其中包含以下文件夹：

    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
    <plist version="1.0">
        <dict>
            <key>Move</key>
            <array>
                <string>${ApplicationSupport}/myapp</string>
            </array>
        </dict>
    </plist> 
    ```

4.  当我启动应用程序时，会创建新容器，并创建一个空白文件但不执行迁移。

我要迁移的文件是 CoreData SQLite 存储。数据模型没有改变，因此不涉及数据迁移，我只是试图将 CoreData 存储移动到沙盒容器中。

我想我错过了一些非常明显的东西，因为我找不到任何有用的东西，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T09:57:19.677

在发布问题后，我在系统日志中注意到了这个错误：

```
13/11/2012 4:59:59.026 PM sandboxd[55845]: ([55835]) myapp(55835) deny file-read-data /Volumes/Mac_HD/Users/me/Library/Developer/Xcode/DerivedData/myapp-hfgnivbvxutfvcxjmyntrenofdsh/Build/Products/Debug no receipt verif 
```

我试图在运行之前将应用程序复制到我的桌面，然后它就可以正常工作了。我不明白为什么从构建文件夹迁移不起作用，但这足以解决我的问题。

希望这将避免其他人浪费他们的时间。

# ios - 在项目中链接新框架是否会对应用程序性能产生负面影响？

> ID：13358464
> 
> 赞同：0
> 
> 时间：2012-11-13T09:44:28.890
> 
> 标签：ios, performance, frameworks, import

例如，当我这样编码时：`anView.layer.cornerRadius = 5;`，我需要在我的项目中链接并在头文件中`QuartzCore.framework`导入。`<QuartzCore/QuartzCore.h>`

我想知道在链接新框架时这是否会对应用程序性能产生任何负面影响。

我不确定这一点，所以我总是尝试像这样子类化 UIView。

```
- (void)drawRect:(CGRect)rect
{
    UIBezierPath *path = [UIBezierPath bezierPathWithRoundedRect: self.bounds cornerRadius: 5];
    [[UIColor colorWithWhite: 0.2 alpha: 0.75] set];
    [path fill];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T09:50:33.913

编译器肯定会优化代码。如果您链接一个框架而不导入它，它将忽略链接的框架。在您的情况下，由于您在该框架中使用了属性，因此可能会对性能产生轻微影响`cornerRadius`，但它是如此微妙，以至于您可能感觉不到差异。

# wpf - WPF ListView/GridView 可以显示多行项目吗？

> ID：13358468
> 
> 赞同：0
> 
> 时间：2012-11-13T09:45:03.897
> 
> 标签：wpf, listview, layout

我的应用程序使用 ListView/GridView 控件来显示用户可以选择和编辑的数据记录。这是基于[http://www.switchonthecode.com/tutorials/wpf-tutorial-using-the-listview-part-3-in-place-edit](http://www.switchonthecode.com/tutorials/wpf-tutorial-using-the-listview-part-3-in-place-edit)。现在我有一个列数较大的情况，并且每一行都有一个文本描述，指示用户在该行中编辑的对象。

为了节省水平空间，是否可以将每个项目的文本描述显示在其他列上方，在单独的行中，跨越多列，但在选择项目时仍包含在项目选择中？虽然所有其他列在选择时都是可编辑的，但该信息文本只是静态的，用户无法编辑。

这是一个屏幕模型，因为我觉得有必要理解我的意思。红色矩形仅用于突出显示感兴趣的区域，它们不会显示在应用程序中。这是基于上述链接的屏幕截图，应用程序行为在其他方面完全相同。我只想在每个项目中显示额外的行。

![屏幕模型](../Images/14e3331448ad0733b4376a9ed9f8323b.png)

**编辑 2：**现在当我想到我画的东西时，它看起来像是资源管理器中 ListViews 的分组。虽然这些组标题不包含在选择中，但由于它们在键盘选择中也是不可选择的并且被跳过，我认为这也可以。我只是继续朝那个方向搜索，看看我能找到什么。

如果有任何不清楚的地方，请在评论中提问。

# linux - 在 linux 命令行上创建串行邮件

> ID：13358470
> 
> 赞同：0
> 
> 时间：2012-11-13T09:45:17.100
> 
> 标签：linux, email, command-line

我想在 linux 命令行上生成串行电子邮件。假设我有一个文件，在每个收件人的不同行的列中指示邮件地址、主题和消息文本。IE

```
recipient1@mail.com subject1 text1
recipient2@mail.com subject2 text2
... 
```

该脚本应该使用标准命令，因为我打算将其发送给应该为我创建一些电子邮件的同事。行上的循环可以使用 xargs ...我可以使用命令行工具`mail`吗？

重要的是不要立即发送邮件。理想情况下，它会在用户首选的邮件客户端中创建用于导入的文件。这样发件人可以在提交之前检查邮件。我还希望能够将附件添加到邮件中。

我试过了

```
function mail_kmail {
    kmail -s "$2" --body "$3" --attach "$4" --composer "$1" 
}

function mail_thunderbird {
    thunderbird -compose "to='$1',subject='$2',body='$3',attachment='$4'" 
} 
```

并从文件中读取输入数据

```
while read recipient subject body attach $file
do
  mail_kmail "$recipient" "$subject" "$body" "$attach";
done 
```

但这只有在我的同事安装并设置了这些邮件客户端中的任何一个时才有效。

我发现了这个（已关闭）相关问题： [如何在 linux 中发送自动电子邮件？](https://stackoverflow.com/questions/11304717/how-can-i-send-automated-email-in-linux).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T22:55:01.237

您可以使用 mutt 发送电子邮件，这里是一个示例：

```
echo "This is the message body" | mutt -a "/path/to/file.to.attach" -s "subject of message" -- recipient@domain.com 
```

由于很难知道您要在这里实现什么，您甚至可以创建一个要使用的配置文件，但您将进行更多调查或提供有关您的用例的更多详细信息。

# gwt - 为什么 OnBeforeUnload 不拦截我的 GWT 应用程序中的后退按钮？

> ID：13358476
> 
> 赞同：1
> 
> 时间：2012-11-13T09:45:41.460
> 
> 标签：gwt, onbeforeunload

我在 beforeUnload 事件上有一个钩子。如果我尝试单击链接、重新加载或关闭选项卡或导航器，应用程序会在离开前要求确认。这是期望的行为。

但如果点击后退按钮或输入外的退格键，则无法确认。

在 html 的开头：

```
window.onbeforeunload = function() {
 if (confirmEnabled)
    return "";
} 
```

我使用 Gwt PlaceHistoryMapper。

我错过了什么 ？我忘了看哪里？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T10:46:02.720

只要你留在你的应用程序中，因为它是一个*单页应用程序*，它不会被定义为*unload*，所以没有`beforeunload`事件。

当使用*Places*时，等价于由on`PlaceChangeRequestEvent`调度的。这个事件**也在**BTW 中被调度，并且是在*Activities*中处理的基础。`PlaceController``EventBus`**`beforeunload``mayStop()`**

 ***在 GWT 之外，在 JS 世界中，等效项是`hashchange`和/或`popstate`，具体取决于您的`PlaceHistoryHandler.Historian`实现（默认使用`History.newItem()`，因此是`hashchange`）。***

# javascript - 覆盖 Backbone 的 Collection-fetch

> ID：13358477
> 
> 赞同：26
> 
> 时间：2012-11-13T09:45:46.523
> 
> 标签：javascript, backbone.js, web

我想以非 RESTful 方式获取我的收藏，所以我决定`Collection.fetch`用

```
App.carClc = Backbone.Collection.extend({
    model : App.cardModel,
    url : 'http://localhost/bbtest/data.php',
    fetch : function() {
        $.ajax({
            type : 'GET',
            url : this.url,
            success : function(data) {
                console.log(data);
            }
        });
    }
}); 
```

我不知道如何将我的收藏设置为响应。我是 BackboneJS 的新手，谢谢大家！

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-01-13T07:11:19.127

如果您想向 中添加自定义“装饰器” `fetch`，但不完全覆盖它，请尝试：

```
 var MyCollection = Backbone.Collection.extend({

        //custom methods

        fetch: function(options) {

            //do specific pre-processing 

            //Call Backbone's fetch
            return Backbone.Collection.prototype.fetch.call(this, options);
        }

  }); 
```

在这里，您不必推出自己的`$.ajax`

`return`此外，如果您想使用 Backbone 方法返回的 jQuery 承诺，请不要忘记最后一行中的`fetch`。

有关更多详细信息，请参阅[http://japhr.blogspot.in/2011/10/overriding-url-and-fetch-in-backbonejs.html](http://japhr.blogspot.in/2011/10/overriding-url-and-fetch-in-backbonejs.html)。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-11-13T09:53:31.910

Backbone 集合有两种方法来设置新数据添加和重置。假设您想用传入数据替换所有集合数据，因此使用重置：

```
 App.carClc = Backbone.Collection.extend({
model : App.cardModel,
url : 'http://localhost/bbtest/data.php',
fetch : function() {
    // store reference for this collection
    var collection = this;
    $.ajax({
        type : 'GET',
        url : this.url,
        dataType : 'json',
        success : function(data) {
            console.log(data);
            // set collection data (assuming you have retrieved a json object)
            collection.reset(data)
        }
    });
}
}) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-13T09:52:54.017

我正在使用这样的东西：

```
$.when( $.ajax( URL, { dataType: "json" } ) )
    .then( $.proxy( function( response ) {
            ctx.view.collection.reset( response );                              
    },ctx ) ); 
```

`collection.reset(data)`我用来重新初始化集合的要点

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-06-13T00:09:47.857

如果您想继续为 Promise 获取“thenable”，那么您也可以执行以下操作：

```
fetch: function() {
    var self = this,
        deferred = new $.Deferred();

    $.get(this.url).done(function(data) {
            // parse data
        self.reset({parsed data});
        deferred.resolve(); //pass in anything you want in promise
     });
     return deferred.promise();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-08T06:51:57.967

如果您需要为每个模型和/或集合执行此操作，请覆盖`Backbone.ajax`.

覆盖`Backbone.ajax`为您提供`options`通常会传递给`$.ajax`. 您只需要返回`$.ajax`（或其他`Promise`）的响应，而无需担心在集合/模型中设置内容。

# proxy - 代理机制如何与浏览器中的代理设置一起工作

> ID：13358479
> 
> 赞同：3
> 
> 时间：2012-11-13T09:46:05.267
> 
> 标签：proxy, ip

我们经常在网络浏览器代理设置中找到地址、端口等列。我知道当我们使用代理访问页面时，网络浏览器从代理服务器请求网页，但我想知道整个机制是如何工作的？我观察到，在我们用尽免费数据使用后，许多 ISP 只允许访问单个 IP（他们网站的）。但是，当我们在代理 URL 中输入要浏览的站点，然后输入允许的 IP 时，该站点就会被加载。这是如何工作的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T15:25:03.487

通常，您的浏览器只是连接到代理地址和端口，而不是 DNS 名称解析到的任何 IP 地址。然后它按正常方式发出 Web 请求。

Web 代理读取标头，使用 HTTP/1.1 的“主机”标头来确定请求应该去哪里，然后让该请求自己在两个方向中继所有剩余的数据。

代理通常也会进行缓存，因此如果另一个人从该代理请求相同的页面，它可以只返回以前的结果。（这是简化的——缓存是一个复杂的话题。）

由于代理完全控制连接，它可以选择将请求路由到其他地方、抓取请求和回复数据、注入其他内容（如广告）或完全阻止您。使用 SSL 来防止这种情况。

一些网络代理是“透明的”。它们驻留在网关上，所有 IP 流量都必须通过该网关，并使用机器的网络堆栈将到端口 80 的传出连接重定向到本地端口。然后它的行为就像在浏览器中定义了代理一样。

其他代理，如 SOCKS，有一个专用协议，也允许发出非 HTTP 请求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-08T19:36:52.680

HTTP 代理有两种类型，一种是反向的，一种是正向的。

[![反向代理与正向代理](../Images/2fab68d5017f959fcea8d96d52191b58.png)](https://i.stack.imgur.com/0QgcS.png)

Web浏览器使用转发代理，基本上是通过代理发送所有http流量，代理将把这些流量带到互联网上。从您的计算机发出的每个 http 数据包都将在到达目标站点之前发送到代理。

使用代理时，ISP 阻止不起作用，因为从您的机器发出的每个数据包都指向代理而不是目标站点。代理可能通过另一个没有任何阻塞的 ISP 访问互联网。

# php - 绑定参数 PDO PHP

> ID：13358483
> 
> 赞同：0
> 
> 时间：2012-11-13T09:46:31.940
> 
> 标签：php, pdo

我在绑定参数或值时遇到问题，有人知道什么问题吗？如果我改变？到它工作的区域：-$

```
$item = 'area';
$query = dbConnectionPDO::getConnect()->prepare( ' SELECT * FROM  ? ' );
$query->bindParam(1, $item, PDO::PARAM_STR);
$query->execute();

while($resultId = $query->fetch(PDO::FETCH_ASSOC)){
    ////
} 
```

这是一个好的解决方案吗？有用！

```
$select = 'select * from ' . $item . ' left join ' . $TableName . ' ';

$query = dbConnectionPDO::getConnect()->prepare("$select ON :three = :four");
$query->bindValue(':three', $three, PDO::PARAM_STR);
$query->bindValue(':four', $four, PDO::PARAM_STR);
$query->execute();

while($resultId = $query->fetch(PDO::FETCH_ASSOC)){
    ////
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T09:49:25.570

您正在尝试绑定表名，而不是参数。我不确定你真的能做到这一点。

[bindParam](http://php.net/manual/en/pdostatement.bindparam.php)通过绑定问号持有者*或*命名**参数**来工作，而不是表名。

```
$sth = $dbh->prepare('SELECT name, colour, calories
    FROM fruit
    WHERE calories < ? AND colour = ?');
$sth->bindParam(1, $calories, PDO::PARAM_INT);
$sth->bindParam(2, $colour, PDO::PARAM_STR, 12);
$sth->execute(); 
```

如果您只是在研究占位符“替换”，您可以使用 sprintf，但要小心，因为如果您会做任何可疑或愚蠢的事情（例如从外部来源接受表名），它可能会泄漏。

例如：

```
$theQ = "SELECT * FROM `%s` LEFT JOIN `%s` ON `%s` = `%s`";
$runQ = sprintf($theQ, 'one', 'two', 'three', 'four'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T09:51:24.167

您需要提供一个有效的 SQL 语句，其中仅对文字进行了参数化。即使数据库驱动程序愚蠢到可以接受查询，您最终也会执行以下操作：

```
SELECT * FROM 'area' 
```

...这显然不是你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T09:48:49.383

您不能参数化表名，只能参数化。

# algorithm - 使用堆栈的快速排序实现

> ID：13358488
> 
> 赞同：1
> 
> 时间：2012-11-13T09:47:02.270
> 
> 标签：algorithm, quicksort

我正在阅读以下链接中使用堆栈的快速排序实现。

[关联](http://codeidol.com/community/java/stack-size/11581/#part-3)

我的问题是关于以下段落。

> 将较大的小子文件放在堆栈上的策略确保堆栈上的每个条目不超过其下一个条目大小的一半，因此堆栈只需要包含大约 lg N 个条目的空间. 当分区始终位于文件的中心时，会出现此最大堆栈使用量。对于随机文件，实际的最大堆栈大小要小得多；对于退化的文件，它可能很小。
> 
> 这种技术不一定适用于真正的递归实现，因为它依赖于结束递归或尾递归的去除。如果一个过程的最后一个动作是调用另一个过程，一些编程环境会安排这样的事情，即在调用之前而不是之后从堆栈中清除局部变量。如果没有结束递归删除，我们不能保证堆栈大小对于快速排序来说会很小。

1.  作者所说的“堆栈上的每个条目不超过其下方条目大小的一半”是什么意思？你能举个例子吗？

2.  作者是如何得出堆栈只需要大约`lg N`条目的空间的结论的？

3.  “如果没有结束递归删除，我们不能保证堆栈大小对于快速排序来说会很小”是什么意思？

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T12:46:33.913

> 将较大的小子文件放入堆栈的策略确保堆栈上的每个条目不超过其下方条目大小的一半，

这并不完全正确。假设您要对一个 100 个元素的数组进行排序，并且第一个枢轴正好位于中间。然后你有一个堆栈

```
49
50 
```

然后将 49 个元素的部分从堆栈中弹出，分区，然后将这两个部分压入堆栈。假设这次选择的枢轴不太好，有20个元素不大于枢轴。然后你会得到堆栈

```
20
28
50 
```

并且每个堆栈条目是下面一个的一半以上。

但这不可能永远持续下去，我们有

> 在整个排序过程中，如果栈层`k`被占用，其大小最多为`total_size / (2^k)`.

这在排序开始时显然是正确的，因为那时堆栈上只有一个元素，位于第 0 级，即整个 size 数组`total_size`。

现在，假设所述属性在进入循环 ( `while(!stack.empty())`) 时保持不变。

`s`从栈层弹出一个长度为的子数组`m`。如果`s <= 1`，则在下一次循环迭代之前不做任何其他事情，并且不变量继续成立。否则，如果`s >= 2`， 分区之后，有两个新的子数组要被压入堆栈，并且`s-1`元素在一起。这两个中较小的有一个尺寸`smaller_size <= (s-1)/2`，而较大的有一个尺寸`larger_size <= s-1`。堆栈级别`m`将被两者中的较大者占用，我们有

```
larger_size  <= s-1 < s <= total_size / (2^m)
smaller_size <= (s-1)/2 < s/2 <= total_size / (2^(m+1)) 
```

分别用于堆栈级别`m`。`m+1`在循环体的末尾。不变量适用于下一次迭代。

`lg total_size + 1`由于堆栈上最多有一个大小为 0 的子数组（然后在下一次迭代中立即弹出），因此占用的堆栈级别永远不会超过。

关于

> 作者所说的“没有结束递归删除，我们不能保证堆栈大小对于快速排序来说会很小”是什么意思？

在递归实现中，您可以进行深度递归，并且当堆栈帧未重用于结束调用时，您可能需要线性堆栈空间。考虑一个愚蠢的枢轴选择，总是选择第一个元素作为枢轴，以及一个已经排序的数组。

```
[0,1,2,3,4] 
```

分区，枢轴进入位置 0，较小的子数组为空。对较大 subarray 的递归调用`[1,2,3,4]`分配了一个新的堆栈帧（因此现在有两个堆栈帧）。同样的原理，下一次递归调用子数组`[2,3,4]`分配第三个堆栈帧，等等。

如果一个有结束递归删除，即堆栈帧被重用，一个与上面的手动堆栈相同的保证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T10:33:39.783

我将尝试回答您的问题（希望我没有错）...快速排序的每一步都将您的输入分成两部分（一半）。通过这样做，您需要 logN。这解释了您的第一个和第二个问题（“堆栈上的每个条目不超过一半”和“logN”条目）

# git - 如何合并 git 用户？

> ID：13358497
> 
> 赞同：4
> 
> 时间：2012-11-13T09:47:44.623
> 
> 标签：git, merge

如何合并 git 用户？

我使用不正确的用户名进行了几次提交，现在它们显示在存储库历史记录中，我想将它们与我将用于 git 存储库的真实姓名合并。

我怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T09:52:17.423

我有这个脚本，我经常用它来编辑我的历史。您可以更改 if 子句中的名称或通过电子邮件或其他任何方式进行过滤：

```
git filter-branch --commit-filter '
        if [ "$GIT_AUTHOR_NAME" = "Jimmy McNulty" ];
        then
                GIT_COMMITTER_NAME="Jimmy McNulty";
                GIT_COMMITTER_EMAIL="me@example.com";
                GIT_AUTHOR_NAME="Jimmy McNulty";
                GIT_AUTHOR_EMAIL="me@example.com";
                git commit-tree "$@";
        else
                git commit-tree "$@";
        fi' HEAD 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T09:52:49.017

如果只有几个提交，您可以使用交互式 rebase 并每次强制作者和提交者。

请注意，这将使您的分支提示以及任何人可能拥有的任何内容都无效，因此，如果您不是一个人工作并且已经将您的提交推送到某个地方，那么这对每个人来说都是一种痛苦。

您还可以使用重写您的历史记录`git filter-branch`（尽管您必须弄清楚自己如何做到这一点，因此首先要备份东西;-)）（*编辑*：好的，您不必弄清楚，也许，您可以开始关闭 Oin 的回答）。

# php - 在 Web 注册表单上集成 API

> ID：13358498
> 
> 赞同：1
> 
> 时间：2012-11-13T09:47:45.907
> 
> 标签：php

我有一个网站，用户可以使用他们的手机号码注册，注册用户会收到一条确认注册的短信。该页面使用 php。手机号码存储为变量 $mobile。

向注册用户发送短信的 API 是`http://someurl/&message=[xxxx]&numbers=[xxxxx]`

我想在后台执行 API。我需要知道一种将存储在 $mobile 变量中的数字传递给 API url 的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T09:56:46.400

如果远程站点响应速度很快，您可以同步尝试：只需调用如下代码：

```
file_get_contents(
  sprintf('http://someurl/&message=%s&numbers=%s',
          urlencode($message), 
          urlencode($mobile)) ); 
```

但通常独立于处理您的注册表步骤执行此类任务更安全。然后你必须将那个 $mobile 号码存储在某个地方。可能您将用户配置文件数据存储在数据库中。还存储一个标志（标记），用户尚未收到他的消息。

此外，您配置一个 cron 作业来调用一个脚本，该脚本除了在服务器上发送过期消息之外什么都不做。它在数据库中查询包含指示消息尚未发送的标志的任何用户配置文件，并执行与上述相同的命令。

优点：即使在短信网关关闭或忙碌时，用户也能立即获得注册反馈。消息会在注册完成后几秒钟或一分钟后发送。这种架构通常足够快并且更加稳定。

# jquery - 防止 twitter 引导轮播在页面加载时自动滑动

> ID：13358499
> 
> 赞同：119
> 
> 时间：2012-11-13T09:48:02.657
> 
> 标签：jquery, twitter-bootstrap, carousel

那么，除非单击下一个或上一个按钮，否则是否有办法防止 twitter 引导轮播在页面加载时自动滑动？

谢谢

* * *

## 回答 #1

> 赞同：264
> 
> 时间：2013-09-15T21:27:00.977

或者，如果您使用的是 Bootstrap 3.0，您可以使用 data-interval="false" 停止循环

`<div id="carousel-example-generic" class="carousel slide" data-interval="false">`

其他有用的轮播数据属性在这里-> [http://getbootstrap.com/javascript/#carousel-usage](http://getbootstrap.com/javascript/#carousel-usage)

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2012-11-15T08:13:37.493

实际上，现在问题已经解决了。我在方法 'carousel' 中添加了 'pause' 参数，如下所示：

```
$(document).ready(function() {      
   $('.carousel').carousel('pause');
}); 
```

无论如何，非常感谢@Yohn 为您提供有关此解决方案的提示。

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2013-08-13T11:48:36.967

解决了按上一个/下一个按钮后轮播自动滑动的问题。

```
$('.carousel').carousel({
    pause: true,
    interval: false
}); 
```

[GitHub 提交 78b927b](https://github.com/twbs/bootstrap/pull/2521)

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2014-06-02T20:49:35.447

如果您使用的是在轮播的 HTML 结构上设置的**bootstrap 3**`data-interval="false"`

例子：

```
<div id="carousel-example-generic" class="carousel slide" data-ride="carousel" data-interval="false"> 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2015-07-06T07:53:50.593

*   用于`data-interval="false"`停止自动滑动
*   用于`data-wrap="false"`停止圆形滑动

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2015-12-13T02:13:10.350

将此添加到您的课程 div ：

```
data-interval="false" 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-03-16T06:16:26.893

下面是引导轮播的参数列表。像间隔、暂停、换行：

[![在此处输入图像描述](../Images/4acd06f916d1ad4173ae0b3630e0cee7.png)](https://i.stack.imgur.com/5eYUz.png)

有关更多详细信息，请参阅此链接：

[http://www.w3schools.com/bootstrap/bootstrap_ref_js_carousel.asp](http://www.w3schools.com/bootstrap/bootstrap_ref_js_carousel.asp)

希望对你有帮助 ：）

**注意：**这是为了进一步的帮助。我的意思是加载轮播后如何自定义或更改默认行为。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-10-21T08:12:54.057

我想也许你应该去查看有关轮播的官方说明，对我来说，我没有在上面找到答案，因为引导程序的多个版本，我正在使用 b4-alpha，**我希望自动播放效果停止。**

```
$(document).ready({
    pause:true,
    interval:false
}); 
```

当鼠标离开该页面时，此脚本不会产生任何效果，正好是轮播区域。去官方定义并找到那些：

[![在此处输入图像描述](../Images/2be18b66d4f9887d552db9f2815f232a.png)](https://i.stack.imgur.com/uXCIv.png)

所以你会发现为什么。如果触发了轮播页面的onmouseover事件，页面会暂停，当鼠标离开该页面时，它会再次恢复。

**因此，如果您希望页面永远停止并手动旋转**，您只需设置`data-interval='false'`.

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-07-06T07:42:57.403

--使用 data-interval="false" 停止自动滑动 --使用 data-wrap="false" 停止循环滑动

...

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-10-12T09:01:15.697

对于 Bootstrap 4，只需从 carousel div 中删除 'data-ride="carousel"'。这会在加载时删除自动播放。

要再次启用自动播放，您仍然必须在 javascript 中使用“播放”调用。

# c# - 如何在 OSX 上检查线程是否完成

> ID：13358500
> 
> 赞同：2
> 
> 时间：2012-11-13T09:48:03.257
> 
> 标签：c#, mono

我目前正在用单声道做一些实验。在 OSX（2010 年中期的 MBP）上，我遇到了一个奇怪的错误，所有线程对于 isAlive 返回 true，对于 Join(1) 返回 false，即使它们显然已经完成。

# php - 比较后搜索和排序查询输出

> ID：13358501
> 
> 赞同：0
> 
> 时间：2012-11-13T09:48:09.737
> 
> 标签：php, mysql, pagination

我的搜索查询是：

```
SELECT * FROM `trades` where `app` = '1' AND (`unit` LIKE '%$search%' OR `keyword` LIKE '%$search%')
while($row = mysql_fetch_array($sql )){ 
```

之后我需要像这样比较和显示：

```
similar_text(strtoupper($search), strtoupper($row['unit']), $similarity_pst);
  if (number_format($similarity_pst, 0) > 20){
echo $row['link'];
echo $row['unit'];
echo $row['keyword'];
//.... 
```

但我想在打印值之前，按 90% 的百分比对 $row 中的所有内容进行排序，然后显示 80 ...70% 并且可以显示分页谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T09:58:52.940

使用此函数时请注意，如果要计算相似度百分比，传递字符串的顺序非常重要，实际上，更改变量会得到非常不同的结果。

**例子：**

```
<?php 
    $var_1 = 'PHP IS GREAT'; 
    $var_2 = 'WITH MYSQL'; 

    similar_text($var_1, $var_2, $percent); 

    echo $percent; 
    // 27.272727272727 

    similar_text($var_2, $var_1, $percent); 

    echo $percent; 
    // 18.181818181818 
?> 
```

您可能还会看到这里讨论的主题：[如何找到相似的结果并按相似度排序？](https://stackoverflow.com/questions/3338889/how-to-find-similar-results-and-sort-by-similarity)

# ruby - 在 ruby Gemfile 中指定 gem 的可选依赖项的正确方法

> ID：13358503
> 
> 赞同：5
> 
> 时间：2012-11-13T09:48:14.783
> 
> 标签：ruby, testing, rubygems, bundler, gemfile

gem 旨在支持 gems`a`或`b`作为功能的替代品。

在代码中，我检查`defined?(A)`是否可以恢复`b`。

但是作为 gem 开发者如何指定这些依赖呢？

1）我在 Gemfile 中放了什么。

```
group :development, :test do
  gem 'a', :require => false
  gem 'b', :require => false
end 
```

这允许`Bundle.require(:test)`不自动要求 a，b？

2）当我们在我的测试中回退时，如何明确要求`a`并单独模拟（或模拟）场景？`b``b`

3）另外我如何指定`a`或者`b`是gem的先决条件。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T15:29:18.937

不要`a`在依赖项中包含 gem，但`require`无论如何。如果失败，它将引发`LoadError`，您可以从中解救。

```
begin
  require 'a'
rescue LoadError
  # The 'a' gem is not installed
  require 'b'
end 
```

* * *

我相信这是使用和测试此设置的最佳方式：

1.  为您的后端定义一个接口，并允许轻松插入自定义实现。

    ```
    module YourGem
      class << self
        attr_accessor :backend

        def do_something_awesome
          backend.do_something_awesome
        end
      end
    end 
    ```

2.  实现`a`和`b`后端。

    ```
    # your_gem/backends/a.rb
    require 'a'

    module YourGem::Backends::A
      def self.do_something_awesome
        # Do it
      end
    end

    # your_gem/backends/b.rb
    require 'b'

    module YourGem::Backends::B
      def self.do_something_awesome
        # Do it
      end
    end 
    ```

3.  设置您要使用的那个。

    ```
    begin
      require 'your_gem/backends/a'
      Gem.backend = YourGem::Backends::A
    rescue LoadError
      require 'your_gem/backends/b'
      Gem.backend = YourGem::Backends::B
    end 
    ```

    `YourGem::Backend::A`即使`b`安装了它也会使用。

4.  在测试之前，确保在测试代码中安装了两个`a`和`b`gems，`require`两个后端，用一个后端运行测试，然后用另一个后端再次运行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T13:50:40.873

不久前我也收到了同样的问题。我的解决方案是认为开发人员应该指定这种行为。我不会在 gem 上指定它，而是在 wiki 上指定它。我建议您清楚地记录开发人员需要定义其中一个依赖项。

为了使它更好，您可以检查 gem 的初始化，寻找依赖关系，如果找不到，只需引发运行时异常，或者如果您愿意，您可以自己的异常。=)

# java - 在 MimeMessage 中没有正确解释换行符？

> ID：13358504
> 
> 赞同：10
> 
> 时间：2012-11-13T09:48:17.010
> 
> 标签：java, mime-types, mime, mime-message

```
StringBuffer emailMessage = new StringBuffer("Dear Scott");
emailMessage.append("\r\n");
emailMessage.append("Sending mail over internet"); 
```

所以这是我在调试器中检查时的格式化内容

```
Dear Scott,
Sending mail over internet 
```

但是当我在雷鸟中收到它时，我会在一行中收到完整的消息，如下所示。将内容作为 html 发送时，换行符无法正确解释

```
 Dear Scott,Sending mail over internet 
```

这是我将消息作为 html 发送的方式

```
 MimeMessage msg = null;
 msg = new MimeMessage(mailSession);
 msg.setText(body, CHARSET_UTF_8, "html"); 
```

如果我只是将文本作为 msg.setText(body, CHARSET_UTF_8) 发送，那么我会在下一行看到正确格式的消息，即“通过 Internet 发送邮件”。**我不明白为什么在将文本作为 html 发送时没有正确解释换行符？**

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-13T09:55:53.543

因为您要发送 HTML 电子邮件，所以您必须使用`<br />`而不是`\r\n`，就像*经典*的HTML 文档（例如`.html`文件）一样。当您使用 `\r\n`时，呈现的内容不会打印新行，但邮件的源代码会（反之亦然）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-13T09:50:56.743

HTML 不解释换行符。当您将内容类型设置为“html”时，请使用“<br/>”而不是“\r\n”：

```
StringBuffer emailMessage = new StringBuffer("Dear Scott");
emailMessage.append("<br/>");
emailMessage.append("Sending mail over internet"); 
```

# sql - 如何使用 VSDBCMD 过滤要比较的对象

> ID：13358513
> 
> 赞同：2
> 
> 时间：2012-11-13T09:48:54.323
> 
> 标签：sql, sql-server, continuous-deployment, vsdbcmd

我正在尝试自动化我的部署，并且我一直在尝试使用 VSDBCMD 命令行工具来比较我的开发和暂存数据库的架构。我可以让它工作比较一切，但我不知道如何过滤掉我想要比较的对象。目前它会比较所有内容，这意味着它想要添加或删除用户、全文目录、文件组等。

基本上我只想比较表、存储过程、视图、函数和其他一些东西。在 Visual Studio 中，您可以设置要比较的对象，但我无法从文档中看到如何使用命令行工具执行此操作。

有人有想法么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T09:53:24.290

不幸的是你不能。我见过的最好的解释是：http: [//social.msdn.microsoft.com/Forums/en-US/vstsdb/thread/75656877-95e1-4c13-8540-8a445f47ca57](http://social.msdn.microsoft.com/Forums/en-US/vstsdb/thread/75656877-95e1-4c13-8540-8a445f47ca57)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-26T16:59:13.427

我现在不在我的工作站，但我相信可以通过检查 db 设置文件中的“忽略权限”选项来过滤掉用户脚本。您可以尝试尝试其他忽略设置，看看您是否可以通过这种方式更接近您的目标。

# javascript - 如何在 facebook 初始化函数 javascript 中设置标志？

> ID：13358514
> 
> 赞同：0
> 
> 时间：2012-11-13T09:48:59.127
> 
> 标签：javascript, facebook

我有一个示例代码：

```
function initFB() {
    var flag;
    window.fbAsyncInit = function() {
        FB.init({appId: 'zzzzzz', status: true, cookie: true, xfbml: true});

        var flag;
        FB.getLoginStatus(function(response) {
            if (response.status === 'connected') {
                flag = 1;
            } else if (response.status === 'not_authorized') {
                flag = 2;
            } else {
                flag = 3;
            }
        });    
    };
    return flag;
}

var flag = initFB();
alert(flag); 
```

=> 结果是`undefined`，无法在 facebook 功能中设置标志？，如果没有，如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T10:01:03.120

我建议你做的是使用回调（可能是匿名的），因为函数`fbAsyncInit`和`getLoginStatus`函数都是异步的（这意味着它们不会立即返回某些东西 - 他们必须先调用 facebook，然后再调用这样做，他们调用自己的回调（`function() {`部分））。

```
function initFB(callback) {
    window.fbAsyncInit = function() {
        FB.init({appId: 'zzzzzz', status: true, cookie: true, xfbml: true});

        FB.getLoginStatus(function(response) {
            var flag;
            if (response.status === 'connected') {
                flag = 1;
            } else if (response.status === 'not_authorized') {
                flag = 2;
            } else {
                flag = 3;
            }
            callback(flag);
            /* This will call the anonymous function specified as 
               "callback" with a parameter of whatever is in the 
               "flag" variable. */
        });    
    };
}

/* Here we use an anonymous function as a callback of 
   when getLoginStatus has gotten it's return value */
initFB(function(flag) {
    alert(flag); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T09:53:09.073

这是一个范围和同步问题。第二次定义“flag”时，它只在 fbAsyncInit 函数内部可见，与外部的“flag”变量没有连接。此外，fbAsyncInit 函数中的代码将在稍后调用，此时外部的“标志”已经返回。

# c# - 在 windows/.net 中创建管道文件

> ID：13358515
> 
> 赞同：3
> 
> 时间：2012-11-13T09:49:01.710
> 
> 标签：c#, windows, named-pipes

我正在使用一个较旧的程序，将它的输出生成到一个文件中。我可以在命令行上指定要使用的文件，但它必须转到一个文件（没有发送到的选项`stdout`）。

我想在生成时流式传输该输出（不要等到文件完成）。在 *nix 中，我将创建一个命名管道，并将该“文件”用作输出。

这（或类似的东西）可以在 Windows 中完成吗？可以在纯 C# 中完成，还是仅在 c/c++/pInvoke 中完成？有没有可以做这个跨平台的库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T11:20:13.133

从您的 .Net 应用程序中，您可以将遗留应用程序生成为[Process](http://msdn.microsoft.com/de-de/library/system.diagnostics.process.aspx)，除其他外，您可以为其定义其[标准输出流](http://msdn.microsoft.com/de-de/library/system.diagnostics.process.standardoutput.aspx)。您可以使用文件流或任何其他类型的流来重定向进程的输出。

# postgresql - VIEWS 在 PostgreSQL 中占用多少空间？

> ID：13358516
> 
> 赞同：6
> 
> 时间：2012-11-13T09:49:10.740
> 
> 标签：postgresql, view, size, storage

如果我将查询结果存储为*视图*，与带有查询结果的表相比，它是否会占用更多的内存空间？

关于视图的另一个问题是，我可以根据存储为视图的查询结果进行新查询吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T09:54:02.793

视图不存储查询结果，它们存储查询。

*一些RDBMS**允许*`Oracle`存储查询结果（对于某些查询）：这在.*`SQL Server`*

 *`PostgreSQL`不支持那些（尽管，正如@CalvinCheng 提到的，您可以使用触发器或规则来模拟那些）。

是的，您可以在查询中使用视图。但是，视图只是通过名称引用复杂查询的便捷方式，而不是存储其结果的方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T10:08:53.313

**对于问题 1**

要回答您的第一个问题，您不能将查询结果存储为视图，但您可以使用 PostgreSQL 的功能实现类似的`trigger`功能。

PostgreSQL 支持`views`本地创建但不支持创建`materialized views`（存储结果的视图）——但这可以使用触发器来处理。请参阅[http://wiki.postgresql.org/wiki/Materialized_Views](http://wiki.postgresql.org/wiki/Materialized_Views)

视图不占用 RAM（“内存”）。

**对于问题 2**

要回答第二个问题，要更新 postgresql 中的视图，您需要使用`CREATE RULE`- [http://www.postgresql.org/docs/devel/static/sql-createrule.html](http://www.postgresql.org/docs/devel/static/sql-createrule.html)

> CREATE RULE 定义了应用于指定表或视图的新规则。CREATE OR REPLACE RULE 将创建一个新规则，或者替换同一个表的同名现有规则。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-12T23:11:44.427

我想指出，从 Postgres 9.3 开始，[支持物化视图](https://www.postgresql.org/docs/9.3/rules-materializedviews.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-24T19:49:47.977

PostgreSQL 视图是一个保存的查询。创建后，从视图中选择与从原始查询中选择完全相同，每次都返回查询。所以视图不会占用内存。

您不能将查询结果存储为视图，视图只是查询，但您可以使用物化视图实现类似的功能。物化视图仅按需更新。其次，必须更新整个物化视图；没有办法只更新一个陈旧的行。

因此，在这种情况下，每当发生会使行无效的更改时，您都必须急切地更新视图。它可以通过触发器来完成。*

# mercurial - Mercurial 中本地删除的文件

> ID：13358523
> 
> 赞同：0
> 
> 时间：2012-11-13T09:49:30.703
> 
> 标签：mercurial

我删除了一些似乎已在 Mercurial 中跟踪的本地文件，所以我得到：

```
ga1009@ga1009-dell:~/PhD/equilibrium$ hg status -q
! equilibrium/Computations/Matlab_ga/CVaR_vs_loan.p~
! equilibrium/Computations/Matlab_ga/CVaR_vs_noMargin.p~
! equilibrium/Computations/Matlab_ga/CVaR_vs_xi.p~
! equilibrium/Computations/Matlab_ga/defaults_loan3.p~
! equilibrium/Computations/Matlab_ga/defaults_loan6.p~
! equilibrium/Computations/Matlab_ga/loansBeforeDefault_loan10.p~
! equilibrium/Computations/Matlab_ga/loansBeforeDefault_loan3.p~
! equilibrium/Computations/Matlab_ga/pnl_loan6.p~
! equilibrium/Computations/Matlab_ga/pnl_loan6_alt.p~
! equilibrium/Computations/Matlab_ga/simulation.p~
! equilibrium/Computations/Matlab_ga/values_loan10.p~
! equilibrium/Computations/Matlab_ga/values_loan3.p~
! equilibrium/Computations/Vidur_120330/Chebyshev2value.m
! equilibrium/Computations/Vidur_120330/t=12.fig
! equilibrium/Computations/Vidur_120330/t=2.fig
! equilibrium/Computations/Vidur_120330/t=25.fig 
```

有没有办法在不向存储库添加任何内容的情况下删除这些？我有很多不应该添加的文件，所以使用`hg addremove`不是一个选项。我尝试对`hg forget`这些文件中的每一个进行处理，但我得到`equilibrium/Computations/Vidur_120330/t=25.fig: No such file or directory`了——考虑到这些文件已被删除，这并不奇怪。任何想法如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T09:54:23.363

您可以在 Mercurial-way 中恢复您的 WC 和删除文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T01:24:43.797

你可以用`hg remove --after`这个。在您从磁盘中删除文件后，它将从存储库中删除文件。

`hg help remove`在命令行键入以获取更多信息。

# cocos2d-iphone - cocos2d cctransitionpageturn

> ID：13358527
> 
> 赞同：2
> 
> 时间：2012-11-13T09:49:58.123
> 
> 标签：cocos2d-iphone

我有 2 个问题`CCTransitionPageTurn`。我的目标是使用 topLayer 和 pageLayer 处理图层。topLayer 总是在顶部并且有 menuItem 来改变页面。而pageLayer 则满足于TurnPage 效果。

1.  因为我不能添加`CCScene`另一个`CCScene`（即 MainScene(CCScene) -> PageScene(CCScene) -> TopLayer(CCLayer) ）。所以，我认为设计会在 CCLayer 上做翻页效果（即 MainScene(CCScene) -> PageLayer(CCLayer) -> TopLayer(CCLayer) ）。但是这次`CCTransitionPageTurn`只支持`CCScene. 有什么建议是更好的方法吗？

2.  我看到`CCTransitionPageTurn`在右下角翻页（向前或向后）。但是我怎样才能让它在左下角呢？类似翻转X的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:08:34.720

只需`CCPageTurn3D`在图层上使用动作，这实际上是驱动`CCTransitionPageTurn`.

然后，要让页面从另一个角落翻过来，只需 subclass `CCPageTurn3D`。打开 的源文件`CCPageTurn3D`，你会看到它实现了一个方法。将该方法复制到您的新子类中，并对其进行更改以使操作从您喜欢的任何角落发生。如果您无法做到这一点，请询问，我会帮助您解决问题。

（**专业提示：**当我刚接触 cocos2d 时，我总是忘记它是开源的，所以不要忘记这一点！我通过查看 cocos2d 源代码找到了这个答案！）

# wif - 替换独立 FedUtil 以更新 system.IdentityModel

> ID：13358528
> 
> 赞同：4
> 
> 时间：2012-11-13T09:49:59.087
> 
> 标签：wif, .net-4.5, federated-identity, iis-8

我正在寻找 WIF SDK 中 Microsoft Federation Utility (FedUtil) 的替代品，它允许我自动更新（尤其是）web.config 中的trustedIssuers 列表。旧的 FedUtil 可以使用 /m /u 作为参数。

现在该工具包含在 VisualStudio 和 MS 声明中，FedUtil 没有独立替代品（请参阅：http: [//msdn.microsoft.com/en-us/library/jj157089.aspx](http://msdn.microsoft.com/en-us/library/jj157089.aspx)）。

我的问题是：我现在是否必须手动进行更新，或者是否有一些命令或工具可以自动更新 System.IdentityModel 受信任的颁发者？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:43:17.900

由于似乎不存在替代 FedUtils Update 的工具，我自己制作了一个并将其发布到 codeplex：[IdentityModel.Tools](http://identitymodeltools.codeplex.com/)

# url-rewriting - .JPG 在 G-WAN 上的 URL 重写

> ID：13358529
> 
> 赞同：3
> 
> 时间：2012-11-13T09:50:00.240
> 
> 标签：url-rewriting, g-wan

我正在测试 G-WAN 服务器，我想使用重写规则。

使用 apache 的规则是：

```
RewriteRule ^(.+)-(.+)-(.+)-1.jpg$ imagesproduitnew/$3/$2.jpg [L] 
```

我正在尝试通过处理程序来做到这一点`JPG`，但我遇到了很多困难。

有没有人做过类似的事情？

* * *

我的处理程序在路径 /0.0.0.0_80/#0.0.0.0/handlers 中称为 url_wr.c 这是脚本

```
int init(char *argv[], int argc);

int main(int argc, char *argv[])
{
   const long state = (long)argv[0];
   if(state == HDL_AFTER_READ)
   {
      xbuf_t *read_xbuf = (xbuf_t*)get_env(argv, READ_XBUF);
      xbuf_replfrto(read_xbuf, read_xbuf->ptr, read_xbuf->ptr + 16, "/blog", "/?blog");
   }
   return 255; // execute next connection step
}

int clean(char *argv[], int argc); 
```

在 gwan.log 中，没有写入加载的 url_wr.c 如果我将 printf 放在每个函数中，它就不起作用。servlet bloc.c 运行良好。

我还尝试将代码放在 handlers/main.c 和 gwan 目录的根目录中。

我只有该站点的 error.log 文件，它只显示 error404，没有任何处理程序的详细信息。

预先感谢您的支持

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T13:28:10.440

您必须使用 G-WAN `connection handler`，或者使用：

*   [一个简单的重写：在开发人员](http://gwan.ch/developers/)页面的末尾给出了一个示例，

或者，

*   `regex`如果您针对更通用的重写方案，则需要一个库（libc 提供正则表达式调用）。这是[C 中的一个示例，](http://linuxgazette.net/issue55/misc/tindale/mygrep.c.txt)[其中](http://linuxgazette.net/issue55/tindale.html)的解释由*“Linux Gazette”中的**“Regular Expressions in C”*提供。

 *这也可以通过 rom a 进行`servlet`，但是您必须触发重定向（除非资源被明确地放入缓存中）。如果这是可以接受的，那么 v3.10+ 将允许您在 C#、PHP、Python 等中执行此操作。

* * *

更新问题中发布的代码：

您的`init()`电话是空的，因此`main()`永远不会被调用。你应该这样做：

```
// ----------------------------------------------------------------------------
// init() will initialize your data structures, load your files, etc.
// ----------------------------------------------------------------------------
// init() should return -1 if failure (to allocate memory for example)
int init(int argc, char *argv[])
{
   // define which handler states we want to be notified in main():
   // enum HANDLER_ACT { 
   //  HDL_INIT = 0, 
   //  HDL_AFTER_ACCEPT, // just after accept (only client IP address setup)
   //  HDL_AFTER_READ,   // each time a read was done until HTTP request OK
   //  HDL_BEFORE_PARSE, // HTTP verb/URI validated but HTTP headers are not 
   //  HDL_AFTER_PARSE,  // HTTP headers validated, ready to build reply
   //  HDL_BEFORE_WRITE, // after a reply was built, but before it is sent
   //  HDL_HTTP_ERRORS,  // when G-WAN is going to reply with an HTTP error
   //  HDL_CLEANUP };
   //
   u32 *states = (u32*)get_env(argv, US_HANDLER_STATES);
   *states = 1 << HDL_AFTER_READ; // we assume "GET /hello" sent in one shot
   puts("init()");
   return 0;
} 
```

另外，请确保`connection handlers`命名为`main.c`. 相反，`content handlers`携带目标文件扩展名（gif.c、html.c 等）的名称。*

# android - android自定义视图在虚拟机中有错误

> ID：13358532
> 
> 赞同：1
> 
> 时间：2012-11-13T09:50:20.420
> 
> 标签：android

我写了一个简单的扩展视图类，代码如下：

```
public class MyView extends View
 {

   public MyView(Context context)
    {
        super(context);
    }

     public MyView(Context context, AttributeSet attrs) {
         super(context, attrs);
         // TODO Auto-generated constructor stub
     }

    protected void OnDraw(Canvas canvas)
     {
         super.onDraw(canvas);
     }
 }

XML：
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:tools="http://schemas.android.com/tools"
     android:layout_width="match_parent"
     android:layout_height="match_parent" >

       <com.main.sufaceview.MyView
            android:id="@+id/myview"
            android:layout_width="300dp"
            android:layout_height="300dp"
            android:background="@drawable/tt"/>  

</RelativeLayout> 
```

进入虚拟机时。它显示了细分： ![在此处输入图像描述](../Images/2789ae3b529ddb6214490f96c88ce32a.png)

这是为什么？我认为自定义视图应该很容易。我没有添加其他代码，它有错误。编辑：logcat 显示： ![在此处输入图像描述](../Images/9378d2cf8229b4f739ff0c0d606eef5e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T09:54:22.940

我认为您至少需要另一个构造函数，这就是我在其他帖子中读到的。

```
public MyView(Context context, AttributeSet attrs, int defStyle) {
  super(context, attrs, defStyle);
} 
```

# r - cbind 无警告的任意长度向量

> ID：13358534
> 
> 赞同：0
> 
> 时间：2012-11-13T09:50:24.030
> 
> 标签：r

我想要`cbind`不同长度的非多重向量。较短的将（部分）像香草一样被回收`cbind`：

```
cbind(c(1,2,3),c(4,5))
     [,1] [,2]
[1,]    1    4
[2,]    2    5
[3,]    3    4
Warning message:
In cbind(c(1, 2, 3), c(4, 5)) :
number of rows of result is not a multiple of vector length (arg 2) 
```

结果与预期一致，但警告除外。由于我想在扩展中使用它，是否有可能抑制警告或更好：谁知道一个直接的解决方案会产生相同的结果而没有警告！——谢谢，S。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T10:05:46.553

这是一个选项，将关键概念包装到一个函数中，让事情正常工作。最简单的方法就是`rep()`在每个元素上使用`...`将每个输入向量重复`...`到一个共同的长度（即最长输入向量的长度）。

这就是我在下面`length.out`使用`rep()`.

```
CBIND <- function(..., deparse.level = 1) {
  dots <- list(...) ## grab the objects passed in via ... this is a list
  len <- sapply(dots, length) ## find lengths of individual vectors
  ## this applies rep() over dots extending each component vector to length
  ## of longest vector in ...
  dots <- lapply(seq_along(dots),
                 function(i, x, len) rep(x[[i]], length.out = len),
                 x = dots, len = max(len))
  ## need to put everything together so arrange for a call to cbind
  ## passing the extended list of vectors and passing along
  ## the deparse.level argument of cbind
  do.call(cbind, c(dots, deparse.level = deparse.level))
} 
```

这给出了：

```
R> CBIND(c(1,2,3),c(4,5))
     [,1] [,2]
[1,]    1    4
[2,]    2    5
[3,]    3    4
R> CBIND(c(1,2,3),c(4,5), deparse.level = 2)
     c(1, 2, 3) c(4, 5, 4)
[1,]          1          4
[2,]          2          5
[3,]          3          4 
```

我肯定会赞成这个，而不是简单地`suppressWarnings()`在电话周围发出警告。对于生产代码，您希望明确处理您希望允许的情况，并在用户做了您未考虑的事情的情况下传播警告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T10:02:31.193

如果你真的想要，你可以使用`suppressWarnings`：

```
suppressWarnings(cbind(c(1,2,3),c(4,5)))
#      [,1] [,2]
# [1,]    1    4
# [2,]    2    5
# [3,]    3    4 
```

# jpanel - 如何在固定大小的 JPanel 上绘制一个非常大的 BufferedImage？

> ID：13358547
> 
> 赞同：1
> 
> 时间：2012-11-13T09:50:54.803
> 
> 标签：jpanel, repaint

我在 JFrame 上添加了一个 jpanel。我像这样实现jpanel。

`class MyPanel extends JPanel { private BufferedImage image;`

 ````
public MyPanel(BufferedImage img)
{
    this.image = img;
}
protected void paintComponent(Graphics g){
    super.paintComponent(g);

    g.drawImage(image, 0, 0, image.getWidth(), image.getHeight(), this);
    System.out.println("draw image");
    g.dispose();
}
void update(BufferedImage image){
    this.image=image;       
    repaint();
} 
```` 

`}`

我希望每次调用更新方法时，都可以在面板上绘制新图像。

但是图像太大，只有部分在面板上。接下来我需要做什么？

顺便说一句，我尝试将 JScrollPane 与 JPanel 一起使用，但它没有用。有没有人可以

帮助？非常感谢。

# azure - 如何重新安装 Azure SDK

> ID：13358548
> 
> 赞同：3
> 
> 时间：2012-11-13T09:50:55.270
> 
> 标签：azure

我在打开 azure 项目（使用 v. 1.6 创建）时遇到问题。我想降级或重新安装 Azure SDK（在 Windows XP + Visual Studio 2010 上）。这该怎么做？

使用 Web 安装程序，安装按钮被禁用： ![在此处输入图像描述](../Images/940ca8fbd313f97c7ec5c177291045f9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T06:02:35.633

确定要在 Windows XP 上安装 Azure SDK？WebPI 安装程序识别操作系统并禁用“安装”按钮，即操作系统不受支持。并且可以肯定您没有在这台机器上安装 SDK，这就是为什么它在“添加/删除程序”中不可见

因此，如果您想使用[此处](http://www.microsoft.com/en-us/download/details.aspx?id=35448)的链接使用 Windows Azure SDK（即使没有 WebPI） ，您仍然需要一个支持操作系统，如此处所述：

*   支持的操作系统：Windows 7、Windows 8、Windows Server 2008 R2、Windows Server 2008 Service Pack 2、Windows Server 2012
*   您确定可以将 VS2010 SP1 与 Azure SDK 一起使用

# iphone - Apple Mach-O 链接器 (ID) 错误 _compress 和链接器命令失败，退出代码为 1

> ID：13358551
> 
> 赞同：3
> 
> 时间：2012-11-13T09:51:12.130
> 
> 标签：iphone, xcode, linker-errors, mach-o

我一直在开发一个应用程序，用于将照片图像从 iPhone 上传到网络服务器进行实习，但每次尝试运行该应用程序时，都会出现 Mach-O 链接器错误。我已经尝试了在此站点上找到的所有内容（重新创建应用程序、添加 libz.dylib、添加 QuartzCore.Framework），但错误仍然存​​在。有人知道代码有什么问题吗？

错误

```
Undefined symbols for architecture x86_64:<br>
"_compress", referenced from:<br>
 -[Uploader(Private) compress:] in AppDelegate.o<br>
ld: symbol(s) not found for architecture x86_64<br>
clang: error: linker command failed with exit code 1 (use -v to see invocation)<br> 
```

* * *

```
Ld /Users/AppleStoreStaples/Library/Developer/Xcode/DerivedData/PhotoUploader-bafqzogdtrxrvdgesppeismhxrkf/Build/Products/Debug/PhotoUploader.app/Contents/MacOS/PhotoUploader normal x86_64
cd /Users/AppleStoreStaples/Documents/Projects/PhotoUploader
setenv MACOSX_DEPLOYMENT_TARGET 10.7
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch x86_64 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk -L/Users/AppleStoreStaples/Library/Developer/Xcode/DerivedData/PhotoUploader-bafqzogdtrxrvdgesppeismhxrkf/Build/Products/Debug -F/Users/AppleStoreStaples/Library/Developer/Xcode/DerivedData/PhotoUploader-bafqzogdtrxrvdgesppeismhxrkf/Build/Products/Debug -filelist /Users/AppleStoreStaples/Library/Developer/Xcode/DerivedData/PhotoUploader-bafqzogdtrxrvdgesppeismhxrkf/Build/Intermediates/PhotoUploader.build/Debug/PhotoUploader.build/Objects-normal/x86_64/PhotoUploader.LinkFileList -mmacosx-version-min=10.7 -fobjc-link-runtime -framework QuartzCore -framework Cocoa -o /Users/AppleStoreStaples/Library/Developer/Xcode/DerivedData/PhotoUploader-bafqzogdtrxrvdgesppeismhxrkf/Build/Products/Debug/PhotoUploader.app/Contents/MacOS/PhotoUploader 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T09:55:38.253

您的`AppDelegate`文件包含一个名为`Uploader (Private)`. 它定义了一个名为 的方法`compress:`，该方法使用了一个名为 的函数`compress()`。您还没有将实现该`compress()`功能的任何东西链接到应用程序二进制文件中。

# php - mysqli忽略表中的第一行

> ID：13358552
> 
> 赞同：2
> 
> 时间：2012-11-13T09:51:16.550
> 
> 标签：php, mysqli

这是我用来从表中提取数据的代码：

```
require_once 'connect.php';
$sql = "SELECT * FROM `db-news`";
$result = $mysqli->query($sql);
$row = mysqli_fetch_assoc($result);
while ($row = $result->fetch_assoc()) {
    printf ($row['pagename'].' - To edit this page <a href="editnews.php?id='.$row['id'].'">click here</a><br>');
} 
```

**始终忽略第一行。**我不会`mysqli_fetch_assoc`像其他一些关于 SO 的例子那样打电话两次。我尝试在 while 循环中更改`echo`为`printf`，但数据库中仍然忽略了第一行。

我不知道接下来应该尝试什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T09:53:33.783

mysqli 没有忽略它，但实际上你是在 while 循环之前获取第一行

```
$row = mysqli_fetch_assoc($result); //remove this line
while ($row = $result->fetch_assoc()) {
   ....
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T09:54:47.177

问题是以下摘录的第一行：

```
$row = mysqli_fetch_assoc($result);
while ($row = $result->fetch_assoc()) { 
```

已经获得了第一`mysqli_fetch_assoc`行（因此在 while 循环中，您已经更进一步了）。您应该将该行而不是该`$reslut->fetch_assoc`部分放入 while 语句中或将其删除。那应该可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-25T22:52:31.493

`mysqli_fetch_assoc()`与此相同`$result->fetch_assoc()`，无论何时调用此函数，它都会将内部指针推进到下一行。您在循环之前调用此函数一次，这意味着您正在读取第一行并忽略结果。删除该行。

如果您需要获取第一行，然后仍然循环遍历整个结果，请使用`foreach`而不是`while`. 例如：

```
require_once 'connect.php';
$sql = "SELECT * FROM `db-news`";
$result = $mysqli->query($sql);
foreach($result as $row) {
    printf($row['pagename'].' - To edit this page <a href="editnews.php?id='.$row['id'].'">click here</a><br>');
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-09-03T21:36:28.977

使用`do while`代替，`while`因为它不会跳过第一步。

# sql - Error inserting NOW into datetime returns "The conversion of a varchar data type to a datetime data type resulted in an out-of-range value."

> ID：13358560
> 
> 赞同：1
> 
> 时间：2012-11-13T09:52:04.580
> 
> 标签：sql, vbscript

I am using the INSERT statement below to insert NOW into a datetime field in a SQL dbase

```
<%
 varAlert = request.querystring("alertID")
 varInspector = session("stUserid")
 varDateRead = NOW 

dim sqlalerts

Set con = Server.CreateObject("ADODB.Connection")
    con.Open MM_inspections_STRING

sqlalerts = "INSERT INTO dbo.tbl_AlertsRead (alertID, inspectorID, dateread) VALUES ('"  & varAlert  & "' ,'"  & varInspector  & "','"  & varDateRead & "')"
con.Execute sqlalerts

    con.Close
    Set con = Nothing

%> 
```

but it's returning :

Microsoft OLE DB Provider for ODBC Drivers error '80040e07'

[Microsoft][SQL Server Native Client 10.0][SQL Server]The conversion of a varchar data type to a datetime data type resulted in an out-of-range value.

/html/admin/inspectorsAlertView.asp, line 25

line 25 is the execute statement, am at a loss, NOW returns a valid datetime, and the field 'dateread' is definitely a datetime field, and the above INSERT has worked dozens of times without a problem.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T09:58:55.827

Today is 13 November - in UK that would be written as 13/11/2012 but in US it would be 11/13/2012\. i think you are inserting the date in the wrong format - which will mean that you are trying to use the 13th month.

I suspect that this worked before because your dates would have been valid, but incorrect values stored in your database. Check your database for previously inserted values.

# python - strace 输出处理

> ID：13358565
> 
> 赞同：1
> 
> 时间：2012-11-13T09:52:30.773
> 
> 标签：python, bash, sed, strace

我以这种方式使用 strace：

```
strace -xf -eopen -o out_configure.log ./configure
strace -xf -eopen -o out_make.log make 
```

然后我用 sed 得到清晰的文件列表：

```
sed -n 's/.*open("\(.*\)".*)\s*=.*/\1/p' out_configure.log out_make.log | sort -u 
```

有一个输出示例：

```
/usr/share/locale-langpack/en.utf8/LC_MESSAGES/gcc-4.6.mo
/usr/share/locale-langpack/en.UTF-8/LC_MESSAGES/gcc-4.6.mo
/usr/share/locale-langpack/en.utf8/LC_MESSAGES/grep.mo
/usr/share/locale-langpack/en.UTF-8/LC_MESSAGES/grep.mo
/usr/share/locale-langpack/en.utf8/LC_MESSAGES/make.mo
/usr/share/locale-langpack/en.UTF-8/LC_MESSAGES/make.mo
/usr/share/locale/locale.alias
/usr/share/misc/magic.mgc
/usr/x86_64-linux-gnu/lib64/libc_r.a
/usr/x86_64-linux-gnu/lib64/libc_r.so
/usr/x86_64-linux-gnu/lib64/libsendfile.a
/usr/x86_64-linux-gnu/lib64/libsendfile.so
/usr/x86_64-linux-gnu/lib64/libtruerand.a
/usr/x86_64-linux-gnu/lib64/libtruerand.so
/usr/x86_64-linux-gnu/lib64/libuuid.a
/usr/x86_64-linux-gnu/lib64/libuuid.so
util.c
util_cfgtree.c
./util_cfgtree.h
util_cfgtree.h
util_cfgtree.i
./util_cfgtree.lo
util_cfgtree.lo
util_cfgtree.loT
util_cfgtree.o
util_cfgtree.s
util_charset.c
./util_charset.h 
```

我的问题是非全名条目（例如“util.c”或“./util_cfgtree.h”）。有没有办法在 strace 输出中获取全名？

我写了这个脚本：

```
#!/usr/bin/python
# coding=UTF8
import subprocess
import os

fileList = []
for dirname, dirnames, filenames in os.walk(os.path.abspath('.')):
    for filename in filenames:
        fileList.append(os.path.join(dirname, filename))

straceProcess = subprocess.Popen("strace -s 1000 -xf -o out_configure.sed.log ./configure".split(), stdout=subprocess.PIPE).communicate()[0]
straceProcess2 = subprocess.Popen("strace -s 1000 -xf -o out_make.sed.log make".split(), stdout=subprocess.PIPE).communicate()[0]

f = open("out_configure.sed.log", "r+")
n = open("out_make.sed.log", "r+")

lines = []
for l in f:
    lines.append(l)
for l in n:
    lines.append(l)

f.close()
n.close()

pids = {}

filesInUse = []
currentDir = os.path.abspath('.')
for line in lines:
    parts = line.split()

if not pids.has_key(parts[0]):
    pids[parts[0]] = currentDir

if parts[1].startswith("clone"):
    pid = parts[parts.__len__() - 1]
    if not pids.has_key(pid):
        pids[pid] = os.path.abspath(pids.get(parts[0]))

elif parts[1].startswith("chdir"):
    if parts[1].split("\"")[1].startswith("/"):
        pids[parts[0]] = os.path.abspath(parts[1].split("\"")[1])

    elif parts[1].split("\"")[1].startswith("."):
        pids[parts[0]] = os.path.abspath(pids.get(pids[parts[0]]) + '/' + parts[1].split("\"")[1])
    else:
        pids[parts[0]] = os.path.abspath(pids.get(parts[0]) + '/' + parts[1].split("\"")[1])

elif parts[1].startswith("open("):
    if parts[1].split("\"")[1].startswith("/"):
        filesInUse.append(os.path.abspath(parts[1].split("\"")[1]))
    elif parts[1].split("\"")[1].startswith("."):
        filesInUse.append(os.path.abspath(pids.get(parts[0]) + '/' + parts[1].split("\"")[1]))
    else:
        filesInUse.append(os.path.abspath(pids.get(parts[0]) + '/' + parts[1].split("\"")[1]))

for l in filesInUse:
    if l in fileList:
        fileList.remove(l)

for l in fileList:
    print  l 
```

但是我对Python的了解很差。

有没有错误或不好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:45:17.113

I think in order to do this, you would also need to trace the `chdir()` system calls. Post-processing would be more complicated, and you would probably need to switch to `awk`, `perl`, `python` or something else for the post processing, because you would need to interpret each `chdir()` to track the current working directory as it changes, then, for `open()` calls that are either relative or local (i.e. not a full path), you would need to prepend the current path and make any adjustments for things like `../`, etc.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:37:21.070

这些是与您正在制作的应用程序相关的本地文件。

您可以将列表解析为另一个文件，然后查找以 ./ 开头或不以 / 开头的任何内容，并在脚本中进行查找以映射路径。

在下面的示例中，我正在构建 apache，这些相同的文件出现在隐藏文件夹中（其构建过程的一部分在服务器文件夹中）

```
find . -name vhost.o
./server/.libs/vhost.o
./server/vhost.o

ls  server/.libs/
config.o      core_filters.o  eoc_bucket.o    exports.o        libmain.a   listen.o  main.o        protocol.o  request.o     util_cfgtree.o  util_debug.o   util_filter.o  util.o       util_script.o  util_xml.o
connection.o  core.o          error_bucket.o  gen_test_char.o  libmain.la  log.o     mpm_common.o  provider.o  scoreboard.o  util_charset.o  util_ebcdic.o  util_md5.o     util_pcre.o  util_time.o    vhost.o 
```

E2A：这是一个可以满足您需求的衬垫：

```
 command="sed -n 's/.*open(\"\(.*\)\".*)\s*=.*/\1/p' out_configure.log out_make.log | sort -u"; echo "remote: " && echo $command| /bin/sh|grep "^/" ;echo "______________________"; echo "local" && echo $command|/bin/sh|grep -v "^/" |xargs -I {}   find . -name  {} -print 
```

# objective-c - 如何更改 UIPopOver 框架背景

> ID：13358567
> 
> 赞同：0
> 
> 时间：2012-11-13T09:52:39.447
> 
> 标签：objective-c, ios, ios6

我想在 iOS6 中更改弹出框的边框颜色。

有人可以告诉我一种我可以用来实现这一目标的技术吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T14:32:38.900

在 iOS 6 中，您可以自定义框架、箭头等。

这是一个[指向](http://blog.teamtreehouse.com/customizing-the-design-of-uipopovercontroller)描述该技术的博客的指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T09:55:43.633

[WEPopover](https://github.com/werner77/WEPopover)是您的最佳选择。你不能用 UIPopover 做到这一点，我不知道 ios 6 是否可能。

# java - 在构建独立应用程序后，添加到 project.properties 文件中的类路径的类会发生什么情况？

> ID：13358573
> 
> 赞同：1
> 
> 时间：2012-11-13T09:53:09.157
> 
> 标签：java, classpath, netbeans-platform

我正在开发一个 Netbeans RCP 应用程序，它执行一些部署在 GlassFish 服务器上的 EJB 连接。我使用 package-appclient 包含所需依赖项的 jar，并将`gf-client.jar`jar 文件添加到我的类路径中，并将以下行添加到我的`project.properties`文件中：

```
run.args.extra=-cp:a ./appclient/glassfish/lib/gf-client.jar 
```

存储库位于我的应用程序的根目录。

当我在 Netbeans IDE 中编译/运行应用程序时，上述方法有效。但现在我希望能够创建一个独立的应用程序。

`project.properties`构建应用程序后文件会发生什么？我添加到此文件以添加`gf-client.jar`到类路径的额外参数将不再可行。我需要做什么改变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:09:12.533

project.properties 文件仅供 IDE 使用，在服务器上部署应用程序时没有任何意义。

部署到服务器时有多种选择：

1.  创建一个指向所需 jar的[清单文件。](http://docs.oracle.com/javase/tutorial/deployment/jar/manifestindex.html)
2.  复制服务器 lib 文件夹下的 jar，在这种情况下，服务器上运行的所有应用程序都知道它
3.  如果您的应用程序打包为 WAR 文件，请将 jar 放在应用程序的 lib 文件夹下。

还有其他几个选项，但这些是主要选项。

选项 2-3 是最简单的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T08:25:13.353

您需要在 NetBeans 平台应用程序中使用的任何 jar 文件都可以作为*Wrapped JAR*添加到模块中。您可以通过以下方式做到这一点：

1.  右键单击需要访问此 jar 的模块
2.  从上下文菜单中选择“属性”
3.  选择“图书馆”类别
4.  单击“包装的 JAR”选项卡
5.  单击“添加 JAR”按钮
6.  确保在再次运行之前“清理并构建”模块

如果您有其他模块需要访问此 jar 中的包，那么您需要将必要的包公开提供给这些其他模块（不要与`public`关键字混淆）：

1.  选择“API 版本控制”类别（在库类别下方）
2.  选中要向其他模块公开的每个包旁边的复选框
3.  确保在再次运行之前“清理并构建”模块

有关更多详细信息，请参阅 NetBeans 常见问题解答[DevFaqWrapperModules](http://wiki.netbeans.org/DevFaqWrapperModules)

* * *

作为参考，如果您需要向应用程序的部署实例添加命令行选项，您可以通过编辑 NetBeans 工具中的 app.conf 文件来完成此操作。此文件位于您的应用程序中`<NB_Install_Dir>/harness/etc/app.conf`并将与您的应用程序一起打包。但是，编辑此文件将更改您构建的每个应用程序的每个 app.conf 文件。如果您构建了多个应用程序，则需要设置*此*应用程序以使用自定义线束[DevFaqNbPlatformAndHarnessMixAndMatch](http://wiki.netbeans.org/DevFaqNbPlatformAndHarnessMixAndMatch)

# c# - 处理任务继续中某处抛出的异常

> ID：13358574
> 
> 赞同：3
> 
> 时间：2012-11-13T09:53:11.683
> 
> 标签：c#, .net, multithreading, exception-handling, task-parallel-library

处理任务继续中某处抛出的异常的最佳方法是什么？

例如，我在下面有一个简单的任务延续（`updateMessages`-> `updateInterface`），但实际上这可能是一个超过 2 个任务的链。我想要一个通用的异常“全部捕获”任务，该任务从链中可能发生的任何故障继续。

我如何做到这一点是通过定义一个`Action`（观察并记录异常）并从每个任务中继续`TaskContinuationOptions.OnlyOnFaulted`设置。有没有更好的方法来做到这一点？

```
Task updateMessages = Task.Factory.StartNew(() =>
{
    // Do stuff
});

Task updateInterface = updateMessages.ContinueWith(task =>
  {
    // UI updates
  }, 
  System.Threading.CancellationToken.None, 
  TaskContinuationOptions.NotOnFaulted,
  TaskScheduler.FromCurrentSynchronizationContext());

Action<Task> failureAction = new Action<Task>(failedTask =>
{
    // Observe and log exceptions
});

updateMessages.ContinueWith(failureAction, CancellationToken.None,
                            TaskContinuationOptions.OnlyOnFaulted,
                            TaskScheduler.FromCurrentSynchronizationContext());
updateInterface.ContinueWith(failureAction, CancellationToken.None,          
                             TaskContinuationOptions.OnlyOnFaulted, 
                             TaskScheduler.FromCurrentSynchronizationContext()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T16:59:57.890

您的方法是我使用的方法，并且效果很好。

一些与问题无关的旁白：

*   您的 failureAction 真的需要在主 UI 线程上运行吗？
*   我会编写一个辅助方法来附加失败的延续，因为您将对每项任务都执行此操作。

# c# - WPF 绑定视图数据未正确更新

> ID：13358575
> 
> 赞同：0
> 
> 时间：2012-11-13T09:53:11.813
> 
> 标签：c#, wpf, mvvm, binding

我有这个代码部分：

```
<TextBlock 
      Margin="5,3,5,1" Foreground="White" 
      FontWeight="Bold" FontStyle="Italic" TextAlignment="Center"
      Text="{Binding AntennaName}"/> 
```

在我的视图模型中：

```
private string antennaName;
public string AntennaName
{
    get { return antennaName; }
    set { antennaName = value; OnPropertyChanged("AntennaName"); }
} 
```

我检查了，我可以确认在我的实际代码中`AntennaName`属性确实发生了变化，但文本块没有。

谁能解释为什么会这样？我对 mvvm 场景很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:05:25.230

尝试这个 -

```
<TextBlock Text="{Binding DataContext.AntennaName,
           RelativeSource={RelativeSource FindAncestor,
           AncestorType=UserControl}}"/> 
```

某处的问题在于您`DataContext`为 UserControl 设置的方式。不知何故，textBlock 没有从其父级（用户控件）继承 DataContext。因此，明确要求它可能会起作用。

**解释**

UI 元素默认在其 DataContext 中搜索 Binding，除非明确指定要查看其他位置。

此外，如果您没有为控件设置 DataContext，它将从其父控件继承 DataContext 并在其中查找 Binding 属性。如果在父 DataContext 上也找不到绑定属性，绑定会静默失败，您将看到的只是空字符串。

您始终可以在输出窗口中查找绑定失败。如果您查看输出窗口，您将`AntennaName`在那里看到您的属性。

参考 -[数据绑定概述](http://msdn.microsoft.com/en-us/library/ms752347.aspx)

# java - Java 类常量

> ID：13358579
> 
> 赞同：2
> 
> 时间：2012-11-13T09:53:30.363
> 
> 标签：java

我想为我还创建一个实例的类定义一些类似公共类常量的变量。

在我的类 Response 中，我定义了一些我想在整个应用程序中用作常量的 responseCode。

请不要担心这段代码的含义，这只是片段的复制和粘贴，以显示我如何尝试使用类常量。

我的 IntelliJ 根本没有抱怨这种语法，但是当我尝试构建代码时，我得到了

```
Filter.java:[84,36] cannot find symbol
symbol  : variable BR_PARTIALLY_OK 
```

我的带有 consts 的示例类

```
package xx.xx.xxxxx.connector;

import java.util.HashMap;
import java.util.List;
import java.util.Map;

public class Response {
    public static final int BR_OK                       = 200;
    public static final int BR_PARTIALLY_OK             = 250;
    public static final int BR_NOT_AUTHORIZED           = 401;
    public static final int BR_REQUEST_TIMEOUT          = 408;
    public static final int BR_NOT_IMPLEMENTED          = 501;
    public static final int BR_SERVICE_UNAVAILABLE      = 503;

    private Map<String, List<String>> headers = new HashMap<String, List<String>>();
    private String body = null;

    public void addHeader(String key, List<String> value) {
        this.headers.put(key, value);
    }

    public String getBody() {
        return body;
    }

    public void setBody(String body) {
        this.body = body;
    }

    public Map<String, List<String>> getHeaders() {
        return headers;
    }
} 
```

在另一个类中使用所需的示例

```
package xx.xx.xxxxx.filter; // other package, other maven artifact but depends response package
import xx.xx.xxxxx.connector.Response;

public class Filter {
    public int doFilter(Service service) {
        Response myResponse = service.post(..);
        return Response.BR_PARTIALLY_OK;
    }
} 
```

我也试过

```
import static xxx.xxx.Response.* 
```

或者

```
import static xxx.xxx.Response.BR_PARTIALLY_OK; 
```

并使用

```
return BR_PARTIALLY_OK 
```

导入时已经出现相同的“找不到符号”错误

我已经看过接口和 const 类示例，但我想知道为什么这个示例不起作用

编辑：也许问题是该类是在依赖工件中定义的？

pom.xml

```
<?xml version="1.0"?>
<project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"
         xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <groupId>xxx.xxxxx.xxx</groupId>
        <artifactId>connector</artifactId>
        <version>1.0-SNAPSHOT</version>
    </parent>
    <groupId>used the Response.BR_PARTIALLY_OK constant here</groupId>
    <artifactId>filter</artifactId>
    <version>${connector.filter.version}</version>

    <dependencies>
        <dependency>
            <groupId>defined the Response class in this artifact</groupId>
            <artifactId>component</artifactId>
            <version>1.0-SNAPSHOT</version>
        </dependency>           

        <dependency>
            <groupId>info.magnolia</groupId>
            <artifactId>magnolia-core</artifactId>
            <version>4.5.4</version>
            <scope>provided</scope>
        </dependency>

        <dependency>
            <groupId>net.sourceforge.openutils</groupId>
            <artifactId>openutils-log4j</artifactId>
            <version>2.0.5</version>
            <scope>provided</scope>
        </dependency>

        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.4</version>
            <scope>provided</scope>
        </dependency>

        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.0</version>
            <scope>provided</scope>
        </dependency>

        <!-- Testing Dependencies -->
        <dependency>
            <groupId>org.mockito</groupId>
            <artifactId>mockito-all</artifactId>
            <version>1.9.5</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>${junit.version}</version>
            <scope>test</scope>
        </dependency>
    </dependencies>

    <repositories>
        <repository>
            <id>magnolia.public</id>
            <url>http://nexus.magnolia-cms.com/content/groups/public</url>
            <snapshots>
                <enabled>true</enabled>
            </snapshots>
        </repository>
    </repositories>
</project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:03:01.670

我发现错误消息有点不对劲。

“变量 BR_PARTIALLY_OK”

多变的？这会让我假设代码不包含“Response.BR_PARTIALLY_OK”，而只包含“BR_PARTIALLY_OK”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T11:20:00.717

伙计们感谢你们在这方面所花费的时间。问题确实与构建有关。而不是重建整个项目，我只是重建了一个工件（偶然），这导致了问题，因为 const 定义在另一个工件中，在添加常量后从未重建过

构建父范围自动解决了这个问题。

# css - CSS：删除列表中的点会删除所有效果

> ID：13358582
> 
> 赞同：-1
> 
> 时间：2012-11-13T09:53:39.960
> 
> 标签：css, html-lists

我想删除**ul中的点，但是当我这样做时，** **ul** 的高度减小到 0px，因此包含的**li**具有透明背景。你能给我一个替代方案吗？这是代码：

```
<ul class="class_1" style="z-index: 1; top: -557.15px; left: 801px; display: block; position: relative; width: 200px;">
    <li class="class_2">
        <a>Ba</a>
    </li>
    <li class="class_2">
        <a>Baa</a>
    </li>
    <li class="class_2">
        <a>Baar</a>
    </li>
</ul>
<style>
li {
    list-style-type: none;
}
.class1
{
    background-color: #FFFFFF;
    border: 1px solid;
}
</style> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T09:56:40.297

`<li>`为元素添加 CSS 样式-`display:block`也为它们添加。这应该可以解决问题，假设没有其他风格可以解决这个问题`<ul>`

# java - Java和Ruby之间的正则表达式差异

> ID：13358587
> 
> 赞同：6
> 
> 时间：2012-11-13T09:54:10.677
> 
> 标签：java, ruby, regex

我正在尝试为以下内容编写正则表达式：

1.  以双引号字符开头和结尾的字符串，不包含控制字符，反斜杠用于转义下一个字符。
2.  Pascal 中注释的双星形式：`(*`以 that 开头和结尾的字符串`*)`不包含`*)`

我正在尝试用 Ruby 编写一个版本，然后用 Java 编写另一个版本，但是我很难找到两者的正则表达式的差异。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T10:00:47.137

[这](http://www.regular-expressions.info/)是一个很好的起点：

*   [Java 的细节](http://www.regular-expressions.info/java.html)（通常主要使用正则表达式）
*   [Ruby 的细节](http://www.regular-expressions.info/ruby.html)（通常主要使用正则表达式）
*   [风味比较](http://www.regular-expressions.info/refflavors.html)（主要是正则表达式语法和功能）

通常请注意，在 Ruby 中，您通过用 分隔它们来编写正则表达式`/`，而在 Java 中，您需要对所有内容进行双重转义（`\\`而不是`\`），以便反斜杠通过正则表达式引擎。您应该在我上面给您的那些链接中找到其他所有内容。

为了这个答案的完整性，我还想在[这个在线正则表达式测试器](http://www.regexplanet.com/)中包含汤姆的链接，它支持多种正则表达式风格。

您应该继续尝试两个正则表达式。如果您遇到任何问题，非常欢迎您提出新的（特定）问题，展示您自己的尝试。

# android - 当我得到谷歌密钥时，这个错误来说重试

> ID：13358596
> 
> 赞同：0
> 
> 时间：2012-11-13T09:54:48.800
> 
> 标签：android

当我在命令提示符中获得 google api 密钥时，它显示错误重试错误，那是什么？请帮助我它没有获得akey说的非法操作

```
C:\Program Files\Java\jdk1.6.0_20\bin>keytool -list -alias androiddebugkey -keys
tore"C:\Documents and Settings\Nazeer\.android\debug.keystore" -storepass androi
d -keypass android
Illegal option:  -keystoreC:\Documents and Settings\Nazeer\.android\debug.keysto
re
 Try keytool -help

C:\Program Files\Java\jdk1.6.0_20\bin> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:00:24.637

您需要在密钥库和“C:....等”之间留一个空格

```
-keystore "C:\Documents and Settings\Nazeer\.android\debug.keystore" -storepass androi
d -keypass android 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T10:07:10.263

改变这个

> C:\Program Files\Java\jdk1.6.0_20\bin>keytool -list -alias androiddebugkey -keystore"C:\Documents and Settings\Nazeer.android\debug.keystore" -storepass android d -keypass android

对此

> C:\Program Files\Java\jdk1.7.0_05\bin>keytool -v -list -alias androiddebugkey -keystore C:\Documents and Settings\Nazeer.android\debug.keystore -storepass android -keypass android

您需要在密钥库字和位置之间添加空格，因为命令行将像这样读取

> -keystoreC:\Documents and Settings\Nazeer.android\debug.keysto re

它无法识别该命令，我添加了 -v 以防您还想获取 MD5 指纹

# c++ - 使用 mpl::inherit_linearly 定义接口的含义

> ID：13358598
> 
> 赞同：8
> 
> 时间：2012-11-13T09:54:53.703
> 
> 标签：c++, boost, boost-mpl

我正在编写一些消息处理代码，其中每条消息都是一个 POD 结构。在编写这将是定义一个抽象基类，每个消息类型具有虚拟功能，例如：

```
class AbstractHandler
{
public:
    virtual void handleMessage( const MessageType1& msg ) =0;
    virtual void handleMessage( const MessageType2& msg ) =0;
    virtual void handleMessage( const MessageType3& msg ) =0;
    virtual void handleMessage( const MessageType4& msg ) =0;
}; 
```

然后创建实现处理函数的派生具体类：

```
class ConcreteHandler : public AbstractHandler
{
public:
    virtual void handleMessage( const MessageType1& msg );
    virtual void handleMessage( const MessageType2& msg );
    virtual void handleMessage( const MessageType3& msg );
    virtual void handleMessage( const MessageType4& msg );
}; 
```

如果将新消息添加到系统中，则`AbstractHandler`必须与所有派生类型一起更新。

`mpl`或者，我可以按顺序保存所有支持的消息类型，并用于`mpl::inherit_linearly`生成抽象基类。

（注意：我已经`mpl::vector`在代码的其他地方使用了一种消息类型。）

例如：

```
typedef mpl::vector< MessageType1, MessageType2, 
                     MessageType3, MessageType4 > message_types;

template< class Message >
class Wrapper
{
public:
   virtual void handleMessage( const Message& msg ) = 0;
protected:
   ~Wrapper(){}
};

class AbstractHandler 
     : public mpl::inherit_linearly< message_types
                                   , mpl::inherit< mpl_1, Wrapper< mpl::_2 > >
                                   >::type
{
public:
    virtual ~AbstractHandler() {}
}; 
```

然后具体的处理程序派生自`AbstractHandler`. 这意味着每当向系统添加新消息类型时，只需更改顺序，向派生类`mpl::vector< types... > message_types`添加新功能即可。`handleMessage`

在我看来，这减少了长期维护，因为 AbstractHandler 将自动为所有消息提供纯虚函数`mpl::vector message_types`

在性能方面，使用这种方法有什么缺点吗？

`mpl::inherit_linearly`使用生成抽象基类的含义是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T16:56:22.853

我以前做过类似的代码（今天我又做了一次）。

除了继承引起的成本外，没有其他成本。主要是因为最终类型是在编译时确定的，而不是运行时。

但是，相对于消息类型列表的大小，这显然会使您的编译时间更长。如果像我一样，您还编写了一个消息调度程序类（它可以将任何东西调度到这种类型的任何处理程序），那么编译时间可能会很昂贵。

否则，这很好。

只需了解这种设置的含义：处理的消息列表是在编译时定义的，而不是在运行时定义的。由于使用要求，一些事件系统是运行时的。因此，请确保它是您在用例中想要的。

# django - 使用 django-SES (Amazon SES) 发送电子邮件

> ID：13358599
> 
> 赞同：0
> 
> 时间：2012-11-13T09:55:02.323
> 
> 标签：django, amazon-web-services

我一直在尝试配置 django-SES 服务以发送外发电子邮件，但不确定这里出了什么问题。我收到一条奇怪的错误消息，

设置.py

```
# Email Configuration using Amazon SES Services
EMAIL_BACKEND = 'django_ses.SESBackend'

# These are optional -- if they're set as environment variables they won't
# need to be set here as well
AWS_SES_ACCESS_KEY_ID = 'xxxxxxx'
AWS_SES_SECRET_ACCESS_KEY = 'xxxxxxxxxxxxx'

# Additionally, you can specify an optional region, like so:
AWS_SES_REGION_NAME = 'us-east-1'
AWS_SES_REGION_ENDPOINT = 'email-smtp.us-east-1.amazonaws.com' 
```

在我的设计中，我将所有电子邮件插入到一个表格中，然后使用 celery 任务浏览所有待处理的电子邮件并触发它们。

这是我的任务.py

```
@task(name='common_lib.send_notification', ignore_result=True)
@transaction.commit_manually
def fire_pending_email():
    try:
        Notification        = get_model('common_lib', 'Notification')
        NotificationEmail   = get_model('common_lib', 'NotificationEmail')

        pending_notifications=Notification.objects.values_list('id', flat=True).filter(status=Notification.STATUS_PENDING)
        for email in NotificationEmail.objects.filter(notification__in=pending_notifications):
            msg = EmailMultiAlternatives(email.subject, email.text_body, 'noreply@xx.com.xx', [email.send_to, ])
            if email.html_body:
                msg.attach_alternative(email.html_body, "text/html")
            msg.send()

        transaction.commit()
        return 'Successful'

    except Exception as e:
        transaction.rollback()
        logging.error(str(e))
    finally:
        pass 
```

但是在 celery 调试控制台中看到以下错误

```
 [2012-11-13 11:45:28,061: INFO/MainProcess] Got task from broker: common_lib.send_notification[4dc71dee-fc7c-4ddc-a02c-4097c73e4384]
[2012-11-13 11:45:28,069: DEBUG/MainProcess] Mediator: Running callback for task: common_lib.send_notification[4dc71dee-fc7c-4ddc-a02c-4097c73e4384]
[2012-11-13 11:45:28,069: DEBUG/MainProcess] TaskPool: Apply <function trace_task_ret at 0x9f38a3c> (args:('common_lib.send_notification', '4dc71dee-fc7c-4ddc-a02c-4097c73e4384', [], {}, {'retries': 0, 'is_eager': False, 'task': 'common_lib.send_notification', 'group': None, 'eta': None, 'delivery_info': {'priority': None, 'routing_key': u'celery', 'exchange': u'celery'}, 'args': [], 'expires': None, 'callbacks': None, 'errbacks': None, 'hostname': 'ubuntu', 'kwargs': {}, 'id': '4dc71dee-fc7c-4ddc-a02c-4097c73e4384', 'utc': True}) kwargs:{})
[2012-11-13 11:45:28,077: DEBUG/MainProcess] Task accepted: common_lib.send_notification[4dc71dee-fc7c-4ddc-a02c-4097c73e4384] pid:8256
[2012-11-13 11:45:28,097: DEBUG/MainProcess] (0.001) SELECT `common_lib_notification_email`.`id`, `common_lib_notification_email`.`notification_id`, `common_lib_notification_email`.`send_to`, `common_lib_notification_email`.`template`, `common_lib_notification_email`.`subject`, `common_lib_notification_email`.`html_body`, `common_lib_notification_email`.`text_body` FROM `common_lib_notification_email` WHERE `common_lib_notification_email`.`notification_id` IN (SELECT U0.`id` FROM `common_lib_notification` U0 WHERE U0.`status` = 'P' ); args=(u'P',)
[2012-11-13 11:45:28,103: DEBUG/MainProcess] Method: POST
[2012-11-13 11:45:28,107: DEBUG/MainProcess] Path: /
[2012-11-13 11:45:28,107: DEBUG/MainProcess] Data: Action=GetSendQuota
[2012-11-13 11:45:28,107: DEBUG/MainProcess] Headers: {'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'}
[2012-11-13 11:45:28,109: DEBUG/MainProcess] Host: email-smtp.us-east-1.amazonaws.com
[2012-11-13 11:45:28,109: DEBUG/MainProcess] establishing HTTPS connection: host=email-smtp.us-east-1.amazonaws.com, kwargs={}
[2012-11-13 11:45:28,109: DEBUG/MainProcess] Token: None
[2012-11-13 11:45:28,702: DEBUG/MainProcess] wrapping ssl socket; CA certificate file=/home/mo/projects/garageenv/local/lib/python2.7/site-packages/boto/cacerts/cacerts.txt
[2012-11-13 11:45:29,385: DEBUG/MainProcess] validating server certificate: hostname=email-smtp.us-east-1.amazonaws.com, certificate hosts=[u'email-smtp.us-east-1.amazonaws.com']
[2012-11-13 11:45:39,618: ERROR/MainProcess] <unknown>:1:0: syntax error
[2012-11-13 11:45:39,619: INFO/MainProcess] Task common_lib.send_notification[4dc71dee-fc7c-4ddc-a02c-4097c73e4384] succeeded in 11.5491399765s: None 
```

**更新**

当我将设置更改为

```
AWS_SES_REGION_ENDPOINT = 'email.us-east-1.amazonaws.com' 
```

我得到了一个不同的错误，如下所示

```
[2012-11-13 13:24:05,907: DEBUG/MainProcess] Method: POST
[2012-11-13 13:24:05,916: DEBUG/MainProcess] Path: /
[2012-11-13 13:24:05,917: DEBUG/MainProcess] Data: Action=GetSendQuota
[2012-11-13 13:24:05,917: DEBUG/MainProcess] Headers: {'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'}
[2012-11-13 13:24:05,918: DEBUG/MainProcess] Host: email.us-east-1.amazonaws.com
[2012-11-13 13:24:05,918: DEBUG/MainProcess] establishing HTTPS connection: host=email.us-east-1.amazonaws.com, kwargs={}
[2012-11-13 13:24:05,919: DEBUG/MainProcess] Token: None
[2012-11-13 13:24:06,511: DEBUG/MainProcess] wrapping ssl socket; CA certificate file=/home/mo/projects/garageenv/local/lib/python2.7/site-packages/boto/cacerts/cacerts.txt
[2012-11-13 13:24:06,952: DEBUG/MainProcess] validating server certificate: hostname=email.us-east-1.amazonaws.com, certificate hosts=['email.us-east-1.amazonaws.com', 'email.amazonaws.com']
[2012-11-13 13:24:07,177: ERROR/MainProcess] 403 Forbidden
[2012-11-13 13:24:07,178: ERROR/MainProcess] <ErrorResponse xmlns="http://ses.amazonaws.com/doc/2010-12-01/">
  <Error>
    <Type>Sender</Type>
    <Code>SignatureDoesNotMatch</Code>
    <Message>The request signature we calculated does not match the signature you provided. Check your AWS Secret Access Key and signing method. Consult the service documentation for details.</Message>
  </Error>
  <RequestId>41c15592-2d7c-11e2-a590-f33d1568f3ea</RequestId>
</ErrorResponse>

[2012-11-13 13:24:07,180: ERROR/MainProcess] BotoServerError: 403 Forbidden
<ErrorResponse xmlns="http://ses.amazonaws.com/doc/2010-12-01/">
  <Error>
    <Type>Sender</Type>
    <Code>SignatureDoesNotMatch</Code>
    <Message>The request signature we calculated does not match the signature you provided. Check your AWS Secret Access Key and signing method. Consult the service documentation for details.</Message>
  </Error>
  <RequestId>41c15592-2d7c-11e2-a590-f33d1568f3ea</RequestId>
</ErrorResponse>

[2012-11-13 13:24:07,184: INFO/MainProcess] Task common_lib.send_notification[3b6a049e-d5cb-45f4-842b-633d816a132e] succeeded in 1.31089687347s: None 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:19:27.900

你能试试用这个吗

```
AWS_SES_REGION_ENDPOINT = 'email.us-east-1.amazonaws.com' 
```

而**不是**AWS 仪表板上的 smtp 服务器设置？

（你`AWS_SES_REGION_ENDPOINT = 'email-smtp.us-east-1.amazonaws.com'`如上所述使用）

更新此内容后，您的问题中会出现一个新错误。这确认您现在设置了正确的`AWS_SES_REGION_ENDPOINT`设置。

您收到此新错误的原因很可能是因为您混淆了访问密钥并为亚马逊提供了一组错误的凭据 - 请参阅此处的详细评论 - [https://github.com/boto/boto/issues/476#issuecomment- 7679158](https://github.com/boto/boto/issues/476#issuecomment-7679158)

按照评论中规定的解决方案，我认为你应该没问题。

# php - 使用 php 在数据库中存储点击次数

> ID：13358601
> 
> 赞同：1
> 
> 时间：2012-11-13T09:55:18.693
> 
> 标签：php, mysql, click

> 我正在开发一个包含图片库的项目。现在我想将点击次数/计数值存储到我的数据库中（在 MySQL 中开发）。我试图以自己的方式来做，但问题是所有图像的计数/点击值都存储在数据库中作为相同的值。
> 
> 下面给出的代码在文件**main.php**中，它显示从数据库中检索到的图像**。picture.php**是从数据库中检索图像的那个。我已经附加了代码来计算**picture.php**中的点击次数，以便在点击图像时计数。

**主文件**

```
 $query="SELECT * FROM files";
    $result=mysql_query($query) or die(mysql_error());
    while($fetch=mysql_fetch_array($result)){
         echo "<div class=single>
               <div class=wrap>
                   <a href=picture.php?fid=".$offer_id.">
                       <img src=picture.php?fid=".$offer_id."\">
                   </a>
               </div>
               </div>";
    } 
```

**图片.php**

```
 if(isset($_GET['fid']))
    {
         include "connect.php";
         $fid=$_GET['fid'];
         $query="SELECT * FROM offers_em WHERE o_id =$fid";
         $result=mysql_query($query) or die(mysql_error());

         $sql="UPDATE offers_em SET count+=1 WHERE o_id=".$fid;
         $sql2=mysql_query($sql);

         $name=mysql_result($result,0,"pic_name");
         $size=mysql_result($result,0,"size");
         $type=mysql_result($result,0,"type");
         $content=mysql_result($result,0,"content");

         header("Content-Disposition: attachment; filename=$name");
         header("Content-length: $size");
         header("Content-type: $type");
         echo $content;
    }
    else{
         die("No file ID given...");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T10:01:36.167

我不确定MySQL是否支持“+=”，试试 `SET count = count + 1`

编辑：无论如何，绝对要考虑对注入漏洞进行排序，如您帖子下方的评论中所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T06:16:12.343

它与 SQL 注入无关。

问题是我在循环中调用链接，因此所有点击值都在更新。所以我创建了一个不同的**count_link.php**文件，只有当用户单击图像链接时才会调用它。

```
$query="SELECT * FROM files";
    $result=mysql_query($query) or die(mysql_error());
    while($fetch=mysql_fetch_array($result)){
         echo "<div class=single>
               <div class=wrap>
                   <a href=count_link.php?fid=".$offer_id.">
                       <img src=picture.php?fid=".$offer_id."\">
                   </a>
               </div>
               </div>";
    } 
```

无论如何，谢谢你们的时间..:)

# xml - 基于孩子和/或孙子的父母的 XML 选择

> ID：13358621
> 
> 赞同：2
> 
> 时间：2012-11-13T09:56:30.127
> 
> 标签：xml, xpath, tree

我正在搜索一个 XPath 字符串（用于 VBA Excel），它可以查找特定级别上的所有节点，并且仅在它们具有特定（大）子节点的情况下才返回。不管嵌套有多“深”。关系：我不知道特定孩子的嵌套有多深，因此我无法制定固定路径。

在以下示例的情况下。我正在搜索根目录下的所有节点 '' 并且有任何包含名称 'Test' 的子节点

XML 字符串：

```
<Program>
   <AA name="1"/>
   <BB name="2">
      <CC name="Test"/>
   </BB>
   <DD name="Test"/>
   <EE name="3">
      <FF name="4">
         <GG name="Test"/>
      </FF>
   </EE>
</Program> 
```

要求的选择：

```
Item(0) = <BB name="2">
Item(1) = <DD name="Test">
Item(2) = <EE name="3"> 
```

下面的 XPath 表达式给出了下面的节点`Program`

```
xmlDoc.selectNodes("/Program/*") 
```

以下 XPath 表达式给出了包含名称的节点`Test`

```
xmlDoc.selectNodes("//*[@name="Test"]") 
```

**我需要的不是两条路径的“联合”，而是“重叠”。有人知道怎么做吗？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T10:16:53.820

以下 XPath 表达式选择您需要的内容：

```
/Program/*[.//@name='Test'] 
```

它获取所有直接子级`Program`，然后选择具有`name`属性值`'Test'`或包含具有的后代的那些。

此表达式的更详细且可能更易读的版本是：

```
 /Program/*[descendant-or-self::*/attribute::name='Test'] 
```

因此，您的 VBA 代码可能如下所示：

```
mlDoc.selectNodes("/Program/*[descendant-or-self::*/attribute::name='Test']") 
```

# ios - XCode 项目中文件的错误引用

> ID：13358626
> 
> 赞同：0
> 
> 时间：2012-11-13T09:56:45.957
> 
> 标签：ios, xcode, file, reference

我正在尝试将我的 XCode 项目复制/粘贴到我的 Mac 的另一个文件夹中，但是当我在新文件夹中打开它时，所有文件都是红色的，就像项目中没有一样。但是这些文件在项目的良好树状结构中。

我已经尝试删除它们并添加它们，但它仍然不起作用：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:06:36.253

你现在只有参考！删除这些文件并再次将它们拖到项目中，同时，请选择“将项目复制到目标文件夹”选项

# sql-server - 在 SQL Server 2000 中附加由 SQL Server 2008 创建的 .MDF 文件

> ID：13358630
> 
> 赞同：0
> 
> 时间：2012-11-13T09:56:53.167
> 
> 标签：sql-server, sql-server-2000, mdf

我在 SQL Server 2008 中创建了一个数据库。我分离了数据库并将其复制`.mdf`到运行 SQL Server Enterprise Manager (SQL Server 2000) 的服务器上。

当我尝试连接 MDF 时，我得到...

> *Microsoft SQL-DMO（ODBC SQL 状态：HY000）错误 602：在 sysindexes 中找不到数据库 ID 13、对象 ID 1、索引 ID 1 的行。在 sysindexes 上运行 DBCC CHECKTABLE。*

这是什么意思？这是因为数据库是在较新版本中创建的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T10:17:46.953

从（我相信已折旧，但在 SQL Server 2000 中使用）sp_attach_db 存储过程的[文档中：](http://msdn.microsoft.com/en-us/library/ms179877.aspx)

> 由较新版本的 SQL Server 创建的数据库不能附加到较早版本中。

我认为您必须编写数据库的架构和数据脚本。

Pinal Dave 有一个很好的教程来说明如何做到这[一点](http://blog.sqlauthority.com/2009/07/29/sql-server-2008-copy-database-with-data-generate-t-sql-for-inserting-data-from-one-table-to-another-table/)——只要记住确保你选择了以下设置：

在一般情况下：

*   服务器版本的脚本：SQL Server 2000

在表/视图选项下：

*   脚本数据：真

请记住仔细检查您可能感兴趣的任何其他设置，例如外键、触发器等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:31:52.113

这是可行的，但您需要先将其转换为 SQL 2000 格式，然后再将其分离并附加到旧服务器上。以下是步骤：

在企业管理器中，右键单击数据库

选择属性

在左侧，单击选项

将“兼容级别”更改为 SQL Server 2000 (80)

然后保存，并在重新连接到旧服务器之前分离。

# java - 将刚刚创建的 ArrayList 与之前的进行比较

> ID：13358631
> 
> 赞同：0
> 
> 时间：2012-11-13T09:56:58.733
> 
> 标签：java, arrays, arraylist, compare

我无法弄清楚如何比较 ArrayList 的每个单独值。我通过在我要填充的 ArrayList 之前分配一个空的 ArrayList 来做到这一点，但由于某种原因，它在我运行该方法时同时填充了两者。你们中有人知道为什么吗？注意：此代码没有进行比较，但我无法首先填写它们以尝试进行比较。

```
List<Long> StationsArrayListG7 = new ArrayList<>();
List<Long> StationsArrayListG7a = new ArrayList<>();

public void GetApplicationSpecificUserStats(MBeanServerConnection serverConnectionName) {

StationsArrayListG7a = StationsArrayListG7; 

String attrName = "current";   

for(String stringName : gSelectedApplicationsFromFile) {

     try {
           String connectsName = "WowzaMediaServerPro:vHosts=VHosts,vHostName=_defaultVHost_,"
                        + "applications=Applications,applicationName=" + stringName + ",name=Connections";       

           ObjectName connectsObjName = new ObjectName(connectsName);

           try {
           Long valueObj = (Long)serverConnectionName.getAttribute(connectsObjName, attrName);

           valueX = valueObj;        
           StationsArrayListG7.add(valueX);        

       } catch (MBeanException ex) {
           Logger.getLogger(GUI.class.getName()).log(Level.SEVERE, null, ex);
       } catch (AttributeNotFoundException ex) {
           Logger.getLogger(GUI.class.getName()).log(Level.SEVERE, null, ex);
       } catch (InstanceNotFoundException ex) {
           Logger.getLogger(GUI.class.getName()).log(Level.SEVERE, null, ex);
       } catch (ReflectionException ex) {
           Logger.getLogger(GUI.class.getName()).log(Level.SEVERE, null, ex);
       } catch (IOException ex) {
           Logger.getLogger(GUI.class.getName()).log(Level.SEVERE, null, ex);
           System.out.println("IOException Error has occured!");
       }
       }           

       catch (MalformedObjectNameException ex) {
           Logger.getLogger(GUI.class.getName()).log(Level.SEVERE, null, ex);
       }  

  }  

  } 
```

当我使用单个变量而不是数组进行操作时，它可以正常工作。我无法弄清楚我是否正确分配数组 StationsArrayListG7a = StationsArrayListG7;。我尝试了复制和类似的东西，但它一直给我null。

提前致谢。

更新：替换 StationsArrayListG7a = StationsArrayListG7; 与 StationsArrayListG7a.addAll(StationsArrayListG7); 似乎有帮助。我还不是 100% 确定在我写这篇文章的时候，所以我需要做一些测试。如果您还知道什么，请告诉我：D

UPDATE2：UPDATE 中提到的方法有效。我用来比较的代码是这样的：

```
for (int i = 0; i < Array1.size(); i++) {

     if (Array1.get(i) >= Array2.get(i) + difDrop) {  

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T09:58:44.407

该方法中的第一个非空行是assigning `StationsArrayListG7a = StationsArrayListG7;`，这意味着两个变量现在都引用同一个`ArrayList`对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T09:59:25.513

您正在创建两个不同的`ArrayList`对象：

```
List<Long> StationsArrayListG7 = new ArrayList<>();
List<Long> StationsArrayListG7a = new ArrayList<>(); 
```

然后你扔掉一个并将一个分配给另一个，这意味着它们现在引用同一个对象......：

```
StationsArrayListG7a = StationsArrayListG7; 
```

如果您打算将一个内容复制到*另一个*`ArrayList`，则有一个构造函数：

```
List<Long> StationsArrayListG7 = new ArrayList<>();
// put stuff in StationsArrayListG7
// ...
List<Long> StationsArrayListG7a = new ArrayList<>( StationsArrayListG7 ); 
```

干杯，

# javascriptmvc - Canjs模型在解决后返回未定义

> ID：13358633
> 
> 赞同：0
> 
> 时间：2012-11-13T09:57:01.853
> 
> 标签：javascriptmvc, canjs, canjs-model

我找不到从服务器检索数据并将它们转换为模型实例的方法。我按照[此处](http://donejs.com/docs.html#!can.Model.static.model)的说明进行操作，但仍然无法正常工作。这是我的设置：

服务的网址：`services/foo/barOne`。回应是：`{"calendar":1352793756534,"objectId":"id2"}`

模型定义如下：

```
var myModel = can.Model(
  model: function(raw) {
    newObject = {id:raw.objectId};
    return can.Model.model.call(this,newObject);
  },

  findOne: {
    url: 'services/foo/barOne',
    datatype: 'json'
  }

) 
```

这就是我如何使用它：

```
myBar = myModel.findOne()
myBar.then(function() {
  console.log("resolved with arguments:",arguments); //[undefined]
}) 
```

我放置了各种日志并跟踪了所有调用的函数，请求正确完成，ajax 正确解析。该`model`方法也是正确的，并返回具有`Constructor`正确参数的类型的对象。但是在那之后，在`pipe`canjs的函数内部，结果丢失了（即我在被调用的`undefined`时候得到了结果`d.resolve.apply(d, arguments)`）

这种情况有什么问题？我正在使用带有 jquery 版本 1.0.7 的 canJS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:06:20.060

我认为您不需要仅用于更改 ID 的自定义转换器。您可以通过设置静态`id`属性来更改它。试试这样：

```
var MyModel = can.Model({
  id : 'objectId'
}, {
  findOne: 'services/foo/barOne'
});

MyModel.findOne({ id : 'test' }).done(function(model) {
  console.log(model);
}); 
```

# install4j - 欢迎屏幕中更新安装的 install4j 默认选项

> ID：13358634
> 
> 赞同：1
> 
> 时间：2012-11-13T09:57:07.003
> 
> 标签：install4j

在 install4j 欢迎屏幕中，如果有以前的安装，欢迎屏幕可能如下所示：

默认选择是欢迎屏幕上的“是，更新现有安装”。

启动欢迎屏幕时是否可以将“否，安装到其他目​​录”作为默认选项？

由于我没有足够的声誉，我无法在此处附上图片。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T09:24:35.770

Changing the default selection is not possible, but you can disable the "Alert for update installation" property on the "Welcome" screen.

# java - .m2 ， Ubuntu 中的 settings.xml

> ID：13358635
> 
> 赞同：56
> 
> 时间：2012-11-13T09:57:12.587
> 
> 标签：java, linux, maven, ubuntu, pom.xml

在 Windows 环境中，您将在 C:\Users\user_name 位置拥有 .m2 文件夹，并将 settings.xml 文件复制到其中以设置代理设置和 nexus 存储库位置等。

因此，在 Ubuntu 环境上安装 maven 后，我必须做些什么才能获得类似的设置。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-06-24T18:40:52.867

根据[在 Ubuntu 上安装 Maven 的位置](https://stackoverflow.com/questions/5312350/where-is-maven-installed-on-ubuntu)，它将首先在 /usr/share/maven2/ 上创建您的 settings.xml，然后您可以像 jens 提到的那样复制到您的主文件夹

> $ cp /usr/share/maven3/conf/settings.xml ~/.m2/settings.xml

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-11-13T10:06:21.923

你可以在这里找到你的 Maven 文件：

```
cd ~/.m2 
```

可能您需要[将 settings.xml 复制](https://cwiki.apache.org/WICKET//setup-maven.html#SetupMaven-Configuration)到您的`.m2`文件夹中：

```
cp /usr/local/bin/apache-maven-2.2.1/conf/settings.xml .m2/ 
```

如果不存在 .m2 文件夹：

```
mkdir -p ~/.m2 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-11-13T10:01:11.487

linux盒子上的.m2目录通常是`$HOME/.m2`

你可以得到 $HOME ：

```
echo $HOME 
```

或者简单地说：

```
cd <enter> 
```

转到您的主目录。

来自 maven 站点的其他信息： [http ://maven.apache.org/download.html#Installation](http://maven.apache.org/download.html#Installation)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-11-13T10:03:05.127

引自[http://maven.apache.org/settings.html](http://maven.apache.org/settings.html)：

> settings.xml 文件可能存在两个位置：
> 
> Maven 安装：$M2_HOME/conf/settings.xml
> 
> 一个用户的安装：${user.home}/.m2/settings.xml

因此，通常对于您编辑的特定用户

```
/home/*username*/.m2/settings.xml 
```

要为所有本地用户设置环境，您可能会考虑更改第一个路径。

# asp.net-mvc-3 - 使用数据注释创建的 Asp.net MVC3 自定义验证器在不正确的位置显示消息

> ID：13358645
> 
> 赞同：1
> 
> 时间：2012-11-13T09:57:45.563
> 
> 标签：asp.net-mvc-3, data-annotations, customvalidator

我正在使用 Asp.net MVC3、razor 视图引擎和数据注释进行模型验证。

我有一个表单，其中必须输入 Url 详细信息（Url 和描述）。这两个字段都不是必需的。但是，如果我输入一个字段，则必须要求其他字段。如果我输入描述 Url 是必需的并且格式正确，并且如果我输入 Url，那么描述是必需的。

我为数据注释创建了一个自定义验证器。它验证并输出错误消息。但我的问题是 ValidationMessageFor 生成的错误消息位置不正确。即，如果我输入描述，则所需的 url 消息是描述的一部分。我希望该消息作为 ValidationMessageFor url 字段的一部分。

任何人都可以帮助我吗？提前致谢。以下是我使用的代码

```
[AttributeUsage(AttributeTargets.Property, AllowMultiple = false, Inherited = true)]

public sealed class IsExistAttribute : ValidationAttribute, IClientValidatable
{
private const string DefaultErrorMessage = "{0} is required."; 
public string OtherProperty { get; private set; } 
public IsExistAttribute (string otherProperty)
    : base(DefaultErrorMessage)
{
    if (string.IsNullOrEmpty(otherProperty))
    {
        throw new ArgumentNullException("otherProperty");
    }

    OtherProperty = otherProperty;
}

public override string FormatErrorMessage(string name)
{
    return string.Format(ErrorMessageString, name, OtherProperty);
}

protected override ValidationResult IsValid(object value,ValidationContext validationContext)
{
    if (value != null)
    {
        var otherProperty = validationContext.ObjectInstance.GetType()
                                             .GetProperty(OtherProperty);

        var otherPropertyValue = otherProperty
                                    .GetValue(validationContext.ObjectInstance, null);
        var strvalue=Convert.ToString(otherPropertyValue)

        if (string.IsNullOrEmpty(strvalue))
        {
            //return new ValidationResult(FormatErrorMessage(validationContext.DisplayName));

            return new ValidationResult(FormatErrorMessage(validationContext.DisplayName),new[] { OtherProperty});

        }
    }

    return ValidationResult.Success;
 } 

public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata,ControllerContext context)
{
    var clientValidationRule = new ModelClientValidationRule()
    {
       ErrorMessage = FormatErrorMessage(metadata.GetDisplayName()),
       ValidationType = "isexist"
    };

   clientValidationRule.ValidationParameters.Add("otherproperty", OtherProperty); 
   return new[] { clientValidationRule };           
}      
} 
```

在模型中

```
[Display(Name = "Description")]
[IsExist("Url")]
public string Description { get; set; }

[Display(Name = "Url")]
[IsExist("Description")]
[RegularExpression("(http(s)?://)?([\w-]+\.)+[\w-]+(/[\w- ;,./?%&=]*)?", ErrorMessage  = "Invalid Url")]
public string Url { get; set; } 
```

并且在视野中

```
<div class="editor-field">
@Html.TextBoxFor(m => m.Description )
@Html.ValidationMessageFor(m => m.Description)
</div>
<div class="editor-field">
@Html.TextBoxFor(m => m.Url)
@Html.ValidationMessageFor(m => m.Url)
</div> 
```

不显眼的验证逻辑

```
(function ($) {
    $.validator.addMethod("isexist", function (value, element, params) {
        if (!this.optional(element)) {
            var otherProp = $('#' + params)
            return (otherProp.val() !='' &&  value!='');//validation logic--edited by Rajesh 
        }
        return true;
    });
    $.validator.unobtrusive.adapters.addSingleVal("isexist", "otherproperty");                        
} (jQuery)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T10:38:11.210

您应该以相反的方式进行验证。改变：

```
if (string.IsNullOrEmpty(otherPropertyValue))
    {
        //return new ValidationResult(FormatErrorMessage(validationContext.DisplayName));

        return new ValidationResult(FormatErrorMessage(validationContext.DisplayName),new[] { OtherProperty});

    } 
```

到：

```
if (string.IsNullOrEmpty(Convert.ToString(value)) && !string.IsNullOrEmpty(otherPropertyValue))
    {
        return new ValidationResult(FormatErrorMessage(validationContext.DisplayName));
    } 
```

并删除`if (value != null)`

然后将被无效的字段是空的，如果另一个被填充。

# html - 如何在文本区域的右上角定位跨度？

> ID：13358648
> 
> 赞同：8
> 
> 时间：2012-11-13T09:57:58.223
> 
> 标签：html, css, textarea, positioning

我有一个带有 的文本区域`id="aboutme"`和一个带有 的跨度`class="maxlength-feedback"`，我希望跨度位于文本区域的右上角。它将是文本区域的计数器。

我知道这两个元素都应该有`position="relative"`并且跨度应该是`display="inline-block"`，但它不起作用。

我将不胜感激任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-13T10:01:49.280

就这样做

说明：将您的容器包裹`textarea`在容器中`div`并提供`position: relative;`给容器，然后再提供`position: absolute;`给`span`，以确保您的 div 默认行为`display: block;`将使您的 span 在最左侧流动，因此`display: inline-block;`请用于您的容器 div

[**演示**](http://jsfiddle.net/bxVPE/)

HTML

```
<div class="wrap">
    <textarea></textarea>
    <span>Counter</span>
</div> 
```

CSS

```
.wrap {
    position: relative;
    display: inline-block;
}

.wrap span {
    position: absolute;
    top: 0;
    right: 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T10:07:56.640

**html**

```
<div>
    <span class="mySpan">Some Text</span>
    <textarea class="myTextArea"></textarea>
</div> 
```

**CSS**

```
div{
    position: relative;
    float:left;
}

.mySpan{
    position: absolute;
    right: 0px;
} 
```

工作示例：http: [//jsfiddle.net/VSWXs/](http://jsfiddle.net/VSWXs/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T10:02:14.200

不，必须像这样定位 maxlength-feedback `absolute`；

```
#aboutme {
 position:relative;
}

.maxlength-feedback {
position:absolute;
right: 0; /* or so */
top: 0; /* or so */
} 
```

# c# - 绑定组合框 - 处理外键

> ID：13358650
> 
> 赞同：3
> 
> 时间：2012-11-13T09:57:59.020
> 
> 标签：c#, combobox

在我的数据库中，我有一个表 Cars，其中包含（除其他外）一个作为外键的 idCategory 列。该外键引用包含类别描述的类别表中的 idCategory。

现在在我的 C# 应用程序中，我得到了一个用于添加新车的表单。有一个组合框可以选择类别。

```
comboboxCat.DataSource = datatable1;
comboboxCat.DisplayMember = "categoryDescription";
comboboxCat.ValueMember = "idCategory"; 
```

所以我将ComboBox的DataSource设置为包含Category表数据的DataTable，并将id设置为valueMember，Description设置为DisplayMember。

我还有一个包含表 Cars 的数据集。我要做的是在 Combobox 的值更改时自动更新 DataSet 中的 Car 数据。不知道怎么绑定 在 datagridview 中这很容易，因为我只需要设置 DataGridViewComboBoxColumn 的 DataPropertyName。但是在普通的 ComboBox 中没有这样的属性。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:03:00.530

我相信您必须将 Cars DataTable 中的 IdCategory 字段绑定到 ComboBox 的 SelectedValue。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T10:54:16.247

终于找到了我要找的东西：http: [//blogs.msdn.com/b/bethmassi/archive/2007/04/25/tips-on-related-data-binding-and-comboboxes.aspx](http://blogs.msdn.com/b/bethmassi/archive/2007/04/25/tips-on-related-data-binding-and-comboboxes.aspx)

我的答案是使用 DataBindings 来制作链接

# ios - MonoTouch：如何使用 SDK 4.4 在 Simulator 6.0 中运行应用程序？

> ID：13358653
> 
> 赞同：1
> 
> 时间：2012-11-13T09:58:06.813
> 
> 标签：ios, xcode, xamarin.ios, monodevelop

在我的机器上我安装了：

*   Xcode 4.5
*   Xcode 4.4
*   单触 6.x
*   单触 5.2.13

对于较旧的应用程序，我使用 Xcode 4.4 和 MonoTouch 5.2.13 构建。为此，我更改了 MonoDevelop 设置的 SDK 部分中的路径。

但是，现在我需要在 iOS Simulator 6.0 上测试运行使用 SDK 4.4 和 MT 5.2.13 构建的应用程序。如何告诉 MonoDevelop 模拟器使用什么路径？模拟器本身的下拉列表不提供 v6.0，因为与 SDK 4.4 相比，没有 v6.0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T10:31:11.150

MonoTouch 目前不支持此功能（Xcode 也不支持此功能）。

也就是说，您可以执行以下操作：

*   使用 Xcode 4.4 SDK / iOS 5.1 模拟器构建和运行您的应用程序。从模拟器复制应用程序目录（确定应用程序所在位置的一种方法是使用 MonoDevelop 在模拟器中运行它，然后`ps aux | grep debugtrack`从终端窗口执行 - 这应该显示模拟器进程和二进制文件的路径）。

*   使用 Xcode 4.5 SDK 构建和运行您的应用程序。像上面一样再次找出应用程序所在的位置（因为它是一个不同的模拟器，所以目录会改变），并将它的内容替换为您在上一步中保存的内容。

*   现在您*可以*在 iOS 6 模拟器中运行该应用程序（使用 MonoDevelop 或点击它）。请注意，由于 Xcode 本身并不允许您这样做，因此许多事情可能会中断。使用旧版 SDK 测试构建的唯一受支持方法是在真实设备上对其进行测试。

# android - 如何注意到 Android 中的时区变化？

> ID：13358655
> 
> 赞同：4
> 
> 时间：2012-11-13T09:58:25.063
> 
> 标签：android, timezone

可以通过配置来监听所有类型的配置更改，`android:configChanges`并`AndroidManifest.xml`在活动的`onConfigrationChanged`方法（[Android 文档](http://developer.android.com/guide/topics/resources/runtime-changes.html)）中采取相应的行动。

然而，到目前为止我还没有找到一个处理时区变化的处理程序。例如，如果用户在旅行后经常跨越时区并希望在他所在国家/地区的当地时间查看他的应用程序内容，则可能会发生这种情况。

我在这里唯一的可能真的是`TimeZone.getDefault()`定期检查自己并相应地调整我的时间吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-13T10:01:45.603

收听广播的意图：`android.intent.action.TIMEZONE_CHANGED`

# oracle - Oracle 客户端 ORA-12541: TNS: 没有监听器

> ID：13358656
> 
> 赞同：91
> 
> 时间：2012-11-13T09:58:33.550
> 
> 标签：oracle, listener

我是 Oracle 数据库的新手，但我有一个问题。在我的数据库服务器 (server1) 上，侦听器和数据库实例运行正常，我可以`sqlplus`用来连接到这个数据库。当我使用其他服务器连接到数据库时，我检查了 TNS 配置，它是正确的，但系统说：

> ```
> ERROR:
> ORA-12541: TNS:no listener 
> ```

我的数据库是 Oracle 10gR2

那么我该如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2014-02-19T14:58:45.690

您需要将 oracle 设置为侦听所有 IP 地址（默认情况下，它仅侦听 localhost 连接。）

### 第 1 步 -**编辑** `listener.ora`

该文件位于：

*   窗户：`%ORACLE_HOME%\network\admin\listener.ora`。
*   Linux：$ORACLE_HOME/network/admin/listener.ora

**替换** `localhost` **为** `0.0.0.0`

```
# ...

LISTENER =
  (DESCRIPTION_LIST =
    (DESCRIPTION =
      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1521))
      (ADDRESS = (PROTOCOL = TCP)(HOST = 0.0.0.0)(PORT = 1521))
    )
  )

# ... 
```

### 第 2 步 - 重新启动 Oracle 服务

*   窗户：`WinKey`+`r`

    ```
    services.msc 
    ```

*   Linux（CentO）：

    ```
    sudo systemctl restart oracle-xe 
    ```

[![在此处输入图像描述](../Images/0cd6aff6fd718ac70eb2e622ea654611.png)](https://i.stack.imgur.com/mJPpk.png)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-07-01T05:53:21.543

我也遇到了同样的问题，但我通过在控制面板 -> 管理工具 -> 服务 -> oracle TNS 监听器启动中启动 TNS 监听器解决了这个问题。我正在使用 Windows Xp 和 Toad 连接到 Oracle。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-31T00:31:52.380

检查您的 TNS 名称，别名的左侧不能有空格

此致

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T11:37:27.110

根据 oracle 在线文档

> ORA-12541: TNS: 没有监听器

```
Cause: The connection request could not be completed because the listener is not running.

Action: Ensure that the supplied destination address matches one of the addresses used by 
the listener - compare the TNSNAMES.ORA entry with the appropriate LISTENER.ORA file (or  
TNSNAV.ORA if the connection is to go by way of an Interchange). Start the listener on 
the remote machine. 
```

# haskell - Haskell 乘以 Int 和实数

> ID：13358657
> 
> 赞同：4
> 
> 时间：2012-11-13T09:58:39.510
> 
> 标签：haskell, types, int, monomorphism-restriction, real-datatype

我有

```
coefficient :: ???????
coefficient = 1.0 
```

和

```
val :: Int 
```

我想做

```
result :: ???????
result val coefficient = val * coefficient 
```

我需要做哪些类型签名和转换功能才能完成这项工作？如果我想有能力将 val 推广到任何类型的 Num，我必须做什么？

这个：

```
coefficient = 1.0

val :: Int
val = 3

result :: Num a => a
result = coefficient * (fromIntegral val) 
```

给我这个编译器警告：

```
Could not deduce (a ~ Double)
from the context (Num a)
  bound by the type signature for result :: Num a => a
  at Move.hs:17:1-41
  `a' is a rigid type variable bound by
      the type signature for result :: Num a => a at Move.hs:17:1
In the first argument of `(*)', namely `coefficient'
In the expression: coefficient * (fromIntegral val)
In an equation for `result':
    result = coefficient * (fromIntegral val) 
```

我知道那不是我最初问的，我在清理代码时犯了一些错误。

现在有一个系数类型：

```
coefficient :: Num a => a
coefficient = 1.0

val :: Int
val = 3

result :: Num a => a
result = coefficient * (fromIntegral val) 
```

产生的错误：

```
Could not deduce (Fractional a) arising from the literal `1.0'
from the context (Num a)
  bound by the type signature for coefficient :: Num a => a
  at Move.hs:12:1-17
Possible fix:
  add (Fractional a) to the context of
    the type signature for coefficient :: Num a => a
In the expression: 1.0
In an equation for `coefficient': coefficient = 1.0 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-13T10:03:32.070

有一个函数，fromIntegral，它将整数转换为任何其他数字类型。所以你可以这样做：

```
result :: (Integral n, Num m) => n -> m -> m
result val coefficient = fromIntegral val * coefficient 
```

或者，以无点风格：

```
result = (*) . fromIntegral 
```

### 关于更新问题的更新（@Drew）

考虑这段代码：

```
coefficient :: (Num a) => a
coefficient = 1.0 
```

这本身是无效的，如下。因为 1.0 是小数（不是整数）的文字，所以 GHC 只能将其编码为能够表示小数的任何类型（forall a. Fractional a => a）。但是，您已指定它必须对任何数字类型都有效（forall a. Num a => a）。某些数字类型（例如整数）不能表示小数值，并且不是 Fractional 的实例（正确如此），因此无法进行类型检查。您可以按如下方式解决此问题：

```
coefficient :: (Fractional a) => a
coefficient = 2.0 
```

这里 GHC 可以推断类型，并且系数工作正常。需要注意的是，Fractional 是 Num 的子类，所以所有属于 Fractional 的东西也必须是 Num。如果我们看一下我的答案第一部分中的函数，系数只需要是 Num 类型（因为我们只将它与 (*) 一起使用），所以我们可以使用这个系数的定义来代替那个参数。您的问题发生的原因完全相同。

```
result :: (Num a) => a
result = coefficient * fromIntegral val 
```

同样，此函数的结果必须与系数的类型相同。由于系数不能是任何 Num 类型，而只能是小数类型，我们需要将其更改为：

```
result :: (Fractional a) => a
result = coefficient * fromIntegral val 
```

然后应该进行类型检查。@singpolyma 是正确的，您的原始错误部分与单态限制有关，但您只需要使类型签名更加具体。如果您希望它与 (Num a) => a 一起使用，则系数必须是整数（例如 1）。

### 关于 GHCi 的更新（@Marcin）

为了在 GHCi 中使用它，我建议让 GHCi 推断类型。如果在这种情况下您键入（在 GHCi 中）：

```
let result val coefficient = fromIntegral val * coefficient 
```

然后 GHCi 将正确推断结果的类型。你可以使用 ':t' 命令询问 GHCi 它认为某物是什么类型：

```
Prelude> :t result
result :: (Integral a1, Num a) => a1 -> a -> a 
```

如果你必须有一个明确的类型签名，你可以这样做：

```
let result = (\val coefficient -> fromIntegral val * coefficient) :: (Integral a, Num b) => a -> b -> b 
```

尝试拥有一个显式类型，但 GHCi 将使这个单态：

```
Prelude> :t result
result :: Integer -> Integer -> Integer 
```

这是我们不想要的（这是因为类型注释是指 lambda 表达式的值，而不是结果的声明）。我也不知道如何让显式类型在这里工作，所以也许比我们更有知识的人可以回答：P

# java - paintComponent 在我的绘图之上绘制其他组件

> ID：13358658
> 
> 赞同：8
> 
> 时间：2012-11-13T09:58:41.553
> 
> 标签：java, swing, repaint, graphics2d, paintcomponent

我正在尝试构建一个简单的绘画工具。这些`mouseDrag`事件创建了一个新的椭圆并导致我`JPanel`的 to `repaint()`。

到目前为止，这工作正常。但是，如果我在第一次触发事件之前按下任何按钮（或任何其他 UI 组件）`mouseDrag`，则该按钮将绘制在面板的左上角。

我已将代码隔离到此测试应用程序中：

```
import java.awt.BasicStroke;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class Test extends JFrame
{
    public Test()
    {
        final JPanel paintPanel = new JPanel(){
            @Override
            protected void paintComponent(Graphics g)
            {
                Graphics2D g2d = (Graphics2D)g;
                g2d.setPaintMode();

                g2d.setStroke(new BasicStroke(1));
                g2d.fillRect(100, 100, 10, 10);
            }
        };

        paintPanel.setPreferredSize(new Dimension(300,300));
        paintPanel.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent e)
            {
                paintPanel.repaint();
            }
        });

        this.setLayout(new FlowLayout());

        this.add(paintPanel);
        this.add(new JButton("Dummy"));

        this.pack();
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.setVisible(true);
    }

    public static void main(String... args)
    {
        new Test();
    }
} 
```

![点击面板之前的TestApp](../Images/eac8b6f945568993b721b2afd5023db9.png) ![点击面板后的TestApp](../Images/77ed64392210e1eda3818a0fff930da7.png)

[在我的主应用程序中“查看”问题的屏幕截图](https://i.stack.imgur.com/Ug4mD.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T10:41:57.993

+1 @MadProgrammer 的答案。

*   你应该`super.paintComponent(..)`在你的覆盖中作为第一个调用`paintComponent()`
*   不要`JFrame`不必要地延长
*   [通过EDT](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)创建和微型化 Swing 组件
*   不要打电话`setPrefferedSize()`宁愿覆盖`getPrefferedSize()`

这是一个包含我的建议和@MadProgrammer 的示例：

![在此处输入图像描述](../Images/fb14859934a4166b049dc67e083ece8b.png)

```
import java.awt.BasicStroke;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Rectangle;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.util.ArrayList;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class Test {

    JFrame frame;

    public Test() {
        frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        final PaintPanel paintPanel = new PaintPanel();

        paintPanel.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent e) {
                paintPanel.addRect(e.getX(), e.getY());
            }
        });

        frame.setLayout(new FlowLayout());

        frame.add(paintPanel);
        frame.add(new JButton("Dummy"));

        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String... args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Test();
            }
        });
    }
}

class PaintPanel extends JPanel {

    public PaintPanel() {
        addRect(100, 100);
    }
    ArrayList<Rectangle> rects = new ArrayList<>();

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2d = (Graphics2D) g;
        g2d.setPaintMode();

        for (Rectangle r : rects) {
            g2d.setStroke(new BasicStroke(1));
            g2d.fillRect(r.x, r.y, r.width, r.height);
        }
    }

    public void addRect(int x, int y) {
        rects.add(new Rectangle(x, y, 10, 10));
        repaint();
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(300, 300);
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-13T10:19:57.043

你没有打电话`super.paintComponent`。

用于绘制周期的图形上下文在所有开始绘制的组件之间共享，这意味着如果您在绘制之前不注意清除它，您最终将得到之前绘制的内容。

的工作之一`paintComponent`是准备要绘制的图形

# jsf-2 - 使用 jsf 会话范围的托管 bean 来表示静态分层数据

> ID：13358661
> 
> 赞同：5
> 
> 时间：2012-11-13T09:58:48.903
> 
> 标签：jsf-2, managed-bean

这可能是一种架构问题，但它仍然必须有一个“最佳实践解决方案”或一个公认的标准。

我说的是需要在网站上显示的某种静态数据，例如产品目录、菜单和菜单项列表、面包屑块列表等。我想在使用任何标准 CMS 时都可以使用此选项。

但我想为这个问题使用纯 JSF 解决方案。

所以，回到这个问题，我的阐述基于以下原则：

1.  数据不应在 facelets 中硬编码，因此我使用数据库来保存值，如以下 db 脚本（在我的情况下为 MYSQL）：

    ```
    CREATE TABLE CatalogueGroup (
        CatalogueGroupName VARCHAR(100) NOT NULL PRIMARY KEY,
        URLPath VARCHAR(200) NOT NULL,
        ParentGroupName VARCHAR(100) DEFAULT NULL,
        FOREIGN KEY (ParentGroupName) REFERENCES CatalogueGroup(CatalogueGroupName) ON UPDATE CASCADE ON DELETE SET NULL
    )ENGINE=InnoDB DEFAULT CHARSET=utf8; 
    ```

2.  然后，我想使用要保存在 @ManagedBean 中的实体类并将其显示在视图中，例如

    ```
    public class CatalogueGroup implements Serializable {
        private String catalogueGroupName;
        private List<CatalogueGroup> children = new ArrayList<CatalogueGroup>();
        private CatalogueGroup parentGroup;
        //other stuff of this bean
    }

    @ManagedBean
    @SessionScoped
    public class CatalogueBean implements Serializable {
        private CatalogueGroup catalogue;//loaded via CatalogueGroupDAO with condition parentGroup == null
        //other stuff of this bean
    }

    //snippet of xhtml view for a two-level catalogue
    <ul><h:outputText value="#{catalogueBean.catalogue.catalogueGroupName}" />
        <ui:rereat value="#{catalogueBean.catalogue.children}" var="group">
            <li><h:outputText value="#{group.catalogueGroupName}" /></li>
        </ui:repeat>
    </ul> 
    ```

上述设置有效，但感觉很尴尬。因此，我想向 jsf 社区提出以下开放的“最佳实践”问题：

1.  像这样设置目录 bean 的正确方法是什么：
    *   `@SessionScope`将加载一次并在每个视图上重新显示的bean 或
    *   `@RequestScoped`将在每个页面显示上访问数据库的bean。
2.  有没有办法在 facelet 视图中设置递归函数，或者我应该将目录嵌套级别限制为 2 或 3。
3.  我想显示某种修改后的目录，根据他的角色（在数据库表中添加的列）向登录用户公开更多组，并在没有用户登录时显示基本目录。此外，我想偶尔插入目录中的一些新组不会强制用户重新登录，而是立即重新显示正确的数据：
    *   我应该在业务层过滤组并将过滤后的 CatalogueGroup 暴露给 bean，或者我将加载整个目录并将其子项限制在视图中，并使用 render=false；
    *   在会话中公开整个目录是否正确？
    *   是否可以在将新数据库条目添加到服务器上所有当前处于活动状态的 CatalogueBean 时发送修改事件，强制刷新它们的属性（CatalogueGroup）或实现此功能，我只需要使用`@RequestScoped`bean；
    *   如果使用请求范围的 bean 是唯一的选择，那么明智的做法是访问数据库以经常获取数据，以至于很少更改或者有更智能的做事方式；
    *   当用户登录（和注销）时，已经有一个会话范围目录的实例，如何刷新它：我需要在动作/动作侦听器中手动执行它还是需要使会话无效或做一些更适合情况的事情.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:15:04.920

非常有趣，但也许如此开放的问题。

首先，范围取决于您将为目录提供的实用程序。[`@ViewScoped`](http://balusc.blogspot.com.es/2010/06/benefits-and-pitfalls-of-viewscoped.html)如果您想将数据链接到特定视图，或者`@SessionScoped`您的目标是实现购物篮之类的东西，我建议您进行检查。

对于递归函数，我认为您应该避免在纯视图（*xhtml*）层中进行这种做法，并使用[Primefaces](http://www.primefaces.org/showcase-labs/ui/treeHome.jsf)或[Richfaces](http://docs.jboss.org/richfaces/latest_3_3_X/en/devguide/html/rich_tree.html)之类的库，它们具有内置组件来完成您想做的事情。使用它们，您只需在托管支持 bean 中以编程方式处理它们的逻辑结构。

最后，对于目录限制，我建议您仅从数据库中加载要使用的内容。这样，您就不会超载**服务器-数据库**或**服务器-客户端**连接。您可以拥有一个`@SessionScoped`管理当前登录用户会话的 bean，并且根据该 bean，您可以向数据库询问某些值或其他值。

此外，您必须注意您的目录，如果您在会话期间对其进行大量修改，那么`@ViewScoped`bean 可能是更好的选择，因为每次请求视图时都会重新加载它。如果您为此使用`@SessionScoped`bean，则必须手动在其上添加每个更改，以便在会话期间保持更新。

*`"load the whole catalogue and limit its children in views with rendered=false"`*

如果你按照我说的方式去做，那是你不必做的工作。如果您正在管理一个复杂的树并在视图中引入更多逻辑，那么有条件地评估每个树节点可能会很麻烦。当然，您应该尽可能避免这种情况。

即使您已经找到了解决方案，这也是我的主要想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T09:58:56.207

您可以使用缓存来存储各种用户角色的菜单。然后，当您在数据库中插入新数据（如果您从管理页面插入）时，您可以使缓存失效，或者您可以将缓存设置为在特定时间段（每天一次、每隔几个小时等）后过期，然后您缓存过期时再次读取数据。

# mysql - 如何将数据馈送到我的 Windows 8 应用程序的 Web 服务？

> ID：13358666
> 
> 赞同：0
> 
> 时间：2012-11-13T09:58:54.737
> 
> 标签：mysql, web-services, windows-8

我正在学习如何开发 Windows 8 应用程序，并且我刚刚使用以下教程首次了解了 Web 服务：

[教程](http://davidwalsh.name/web-service-php-mysql-xml-json)

首先，如果我的一些术语不准确，请接受我的歉意——希望你仍然能理解它的意思！

我正在使用 PhP、CSS、JavaScript 或应用程序和 MySQL 作为数据库，我现在正在本地开发。

我已经设法分解了 Web 服务示例并让它与我的本地数据库一起工作，但是在示例中，我只是将带有参数的 URL 直接输入到 Web 浏览器的末尾，它不是从任何地方生成的。

我现在如何进行下一步并直接从我的 Windows 8 应用程序生成查询，这些查询将查询我的数据库，然后由 Web 服务处理？

我发现 Visual Studio 包含可以解释 Web 服务结果的对象，但是我不知道如何调用数据库。

提前感谢您的支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:33:33.707

要使用 JS 从 Windows 8 应用程序调用您的 Web 服务，您可以使用，

```
WinJS.xhr( {
url:'http://yourwebserviceurl'
}).then(function (response) {
   //response will be the response from your webservice,
}) 
```

收到响应后，您可以将其处理到您的 Windows 8 应用程序，或者使用基于 XML/JSON 的 Web 服务。

如果您更喜欢使用 jQuery，您可以使用 jquery 使用此语法向您的 Web 服务请求

```
$.ajax({
  url: "your webservice url",
  context: document.body
}).done(function() { 
  //done
}); 
```

干杯 Yusak Setiawan [http://apptivate.ms/apps/1271/mathboard](http://apptivate.ms/apps/1271/mathboard)

# java - log4j 编码 utf8

> ID：13358668
> 
> 赞同：4
> 
> 时间：2012-11-13T09:59:05.913
> 
> 标签：java, log4j

我使用 Java 和 Log4j ..

我想用德语特殊字符记录一个字符串，例如 Ü Ä ä 等。但在我的 LogFile 中它看起来像这样：

```
<E4><FC><F6> 
```

log4j.properties

```
log4j.rootLogger = ALL, rollingFile

log4j.appender.rollingFile=org.apache.log4j.RollingFileAppender
log4j.appender.rollingFile.File=/home/tomcat/logs/debug.log 
log4j.appender.rollingFile.MaxFileSize=10MB
log4j.appender.rollingFile.MaxBackupIndex=2
log4j.appender.rollingFile.layout = org.apache.log4j.PatternLayout
log4j.appender.rollingFile.layout.ConversionPattern=%d %p %c - %m%n
log4j.appender.rollingFile.encoding=UTF-8 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:11:50.790

您应该尝试使用以下代码以 unicode 格式存储和检索值

```
import java.io.UnsupportedEncodingException;

public class Test {

  public static void printBytes(byte[] array, String name) {
    for (int k = 0; k < array.length; k++) {
      System.out.println(name + "[" + k + "] = " + "0x"
          + UnicodeFormatter.byteToHex(array[k]));
    }
  }

  public static void main(String[] args) {

    System.out.println(System.getProperty("file.encoding"));
    String original = new String("A" + "\u00ea" + "\u00f1" + "\u00fc" + "C");

    System.out.println("original = " + original);
    System.out.println();

    try {
      byte[] utf8Bytes = original.getBytes("UTF8");
      byte[] defaultBytes = original.getBytes();

      String roundTrip = new String(utf8Bytes, "UTF8");
      System.out.println("roundTrip = " + roundTrip);

      System.out.println();
      printBytes(utf8Bytes, "utf8Bytes");
      System.out.println();
      printBytes(defaultBytes, "defaultBytes");
    } catch (UnsupportedEncodingException e) {
      e.printStackTrace();
    }

  } // main

}

class UnicodeFormatter {

  static public String byteToHex(byte b) {
    // Returns hex String representation of byte b
    char hexDigit[] = { '0', '1', '2', '3', '4', '5', '6', '7', '8', '9',
        'a', 'b', 'c', 'd', 'e', 'f' };
    char[] array = { hexDigit[(b >> 4) & 0x0f], hexDigit[b & 0x0f] };
    return new String(array);
  }

  static public String charToHex(char c) {
    // Returns hex String representation of char c
    byte hi = (byte) (c >>> 8);
    byte lo = (byte) (c & 0xff);
    return byteToHex(hi) + byteToHex(lo);
  }

} 
```

**输出**

```
Cp1252
original = AêñüC

roundTrip = AêñüC

utf8Bytes[0] = 0x41
utf8Bytes[1] = 0xc3
utf8Bytes[2] = 0xaa
utf8Bytes[3] = 0xc3
utf8Bytes[4] = 0xb1
utf8Bytes[5] = 0xc3
utf8Bytes[6] = 0xbc
utf8Bytes[7] = 0x43

defaultBytes[0] = 0x41
defaultBytes[1] = 0xea
defaultBytes[2] = 0xf1
defaultBytes[3] = 0xfc
defaultBytes[4] = 0x43 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T10:31:13.743

根据有关使用 Log4J 编码的最多发布问题，似乎没有任何已知问题，因此我假设您在打开文件时使用了错误的编码，请尝试检查编辑器和系统编码，您可能会发现有问题。

# c++ - 如何使用模板将 lambda 转换为 std::function

> ID：13358672
> 
> 赞同：70
> 
> 时间：2012-11-13T09:59:29.243
> 
> 标签：c++, function, templates, c++11, lambda

基本上，我想要做的是获取一个带有任意数量的任意类型参数的 lambda，并将其转换为 std::function。我尝试了以下方法，但两种方法都不起作用。

```
std::function([](){});//Complains that std::function is missing template parameters
template <typename T> void foo(function<T> f){}
foo([](){});//Complains that it cannot find a matching candidate 
```

但是，以下代码确实有效，但这不是我想要的，因为它需要明确说明不适用于通用代码的模板参数。

```
std::function<void()>([](){}); 
```

我整个晚上都在玩弄函数和模板，我只是想不通，所以任何帮助都将不胜感激。

正如评论中提到的，我试图这样做的原因是因为我试图使用可变参数模板在 C++ 中实现柯里化。不幸的是，这在使用 lambdas 时非常失败。例如，我可以使用函数指针传递标准函数。

```
template <typename R, typename...A>
void foo(R (*f)(A...)) {}
void bar() {}
int main() {
    foo(bar);
} 
```

但是，我不知道如何将 lambda 传递给这样的可变参数函数。为什么我对将通用 lambda 转换为 std::function 感兴趣是因为我可以执行以下操作，但最终需要我将模板参数显式声明为 std::function ，这是我试图避免的。

```
template <typename R, typename...A>
void foo(std::function<R(A...)>) {}
int main() {
    foo(std::function<void()>([](){}));
} 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-11-13T10:46:26.507

`std::function<T>`如果不显式指定模板参数，则不能将 lambda 函数对象作为类型参数传递`T`。模板类型推导尝试将您的 lambda 函数的类型与`std::function<T>`在这种情况下它无法做到的类型相匹配——这些类型并不相同。模板类型推导不考虑类型之间的转换。

如果您可以给它一些其他方式来推断类型，这是可能的。您可以通过将函数参数包装在一个`identity`类型中来做到这一点，这样它就不会在尝试匹配 lambda 时失败`std::function`（因为依赖类型只是被类型推导忽略）并提供一些其他参数。

```
template <typename T>
struct identity
{
  typedef T type;
};

template <typename... T>
void func(typename identity<std::function<void(T...)>>::type f, T... values) {
  f(values...);
}

int main() {
  func([](int x, int y, int z) { std::cout << (x*y*z) << std::endl; }, 3, 6, 8);
  return 0;
} 
```

这显然在您的情况下没有用，因为您不想在以后传递值。

由于您不想指定模板参数，也不想传递可以从中推断出模板参数的其他参数，因此编译器将无法推断出`std::function`参数的类型。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2014-06-05T19:13:34.297

您可以使用**专用/回顾演员表**。一旦你有了这样的工具

```
#include <functional>

using namespace std;

template<typename T>
struct memfun_type
{
    using type = void;
};

template<typename Ret, typename Class, typename... Args>
struct memfun_type<Ret(Class::*)(Args...) const>
{
    using type = std::function<Ret(Args...)>;
};

template<typename F>
typename memfun_type<decltype(&F::operator())>::type
FFL(F const &func)
{ // Function from lambda !
    return func;
} 
```

您可以`FFL()`对所有 lambda 类型说，**将它们转换为正确版本的`std::function`**

```
template <typename... Args> void Callback(std::function<void(Args...)> f){
    // store f and call later
}

int main()
{
    Callback(FFL([](int a, float b){
        // do something
    }));

    return 0;
} 
```

[展示](http://ideone.com/omrRr9)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-11-13T10:57:17.683

如[Inferring the call signature of a lambda or absolute callable for "make_function" 所示](https://stackoverflow.com/questions/11893141/inferring-the-call-signature-of-a-lambda-or-arbitrary-callable-for-make-functio)，您可以从 (single) 推断出 lambda（或任何其他具有单个调用签名的仿函数）的调用签名`operator()`：

```
template<typename T> struct remove_class { };
template<typename C, typename R, typename... A>
struct remove_class<R(C::*)(A...)> { using type = R(A...); };
template<typename C, typename R, typename... A>
struct remove_class<R(C::*)(A...) const> { using type = R(A...); };
template<typename C, typename R, typename... A>
struct remove_class<R(C::*)(A...) volatile> { using type = R(A...); };
template<typename C, typename R, typename... A>
struct remove_class<R(C::*)(A...) const volatile> { using type = R(A...); };

template<typename T>
struct get_signature_impl { using type = typename remove_class<
    decltype(&std::remove_reference<T>::type::operator())>::type; };
template<typename R, typename... A>
struct get_signature_impl<R(A...)> { using type = R(A...); };
template<typename R, typename... A>
struct get_signature_impl<R(&)(A...)> { using type = R(A...); };
template<typename R, typename... A>
struct get_signature_impl<R(*)(A...)> { using type = R(A...); };
template<typename T> using get_signature = typename get_signature_impl<T>::type; 
```

不过，这是一种相当不灵活的方法。正如 R. Martinho Fernandes 所说，它不适用于具有多个`operator()`s 的函子，也不适用于具有*模板化* `operator()`或 (C++14) 多态 lambda 的函子。这就是为什么`bind`将其结果类型的推断推迟到最终的调用尝试。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-01-21T19:08:50.303

可以使用派生、decltype、可变参数模板和一些类型特征为 lambda 获取所需的 std::function 类型：

```
namespace ambient {

    template <typename Function>
    struct function_traits : public function_traits<decltype(&Function::operator())> {};

    template <typename ClassType, typename ReturnType, typename... Args>
    struct function_traits<ReturnType(ClassType::*)(Args...) const> {
        typedef ReturnType (*pointer)(Args...);
        typedef const std::function<ReturnType(Args...)> function;
    };

    template <typename Function>
    typename function_traits<Function>::function to_function (Function& lambda) {
        return static_cast<typename function_traits<Function>::function>(lambda);
    }

    template <class L>
    struct overload_lambda : L {
        overload_lambda(L l) : L(l) {}
        template <typename... T>
        void operator()(T&& ... values){
            // here you can access the target std::function with
            to_function(*(L*)this)(std::forward<T>(values)...);
        }
    };

    template <class L>
    overload_lambda<L> lambda(L l){
        return overload_lambda<L>(l);
    }

} 
```

我在我的代码中使用它是这样的：

`ambient::lambda([&](const vector<int>& val){ // some code here // })(a);`

PS：在我的真实案例中，我将这个 std::function 对象及其参数保存在一个通用内核对象中，稍后我可以通过虚拟函数按需执行。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-13T10:28:07.833

currying 不是*已经*实现了`std::bind`吗？

```
auto sum = [](int a, int b){ return a+b; };
auto inc = std::bind( sum, _1, 1 );
assert( inc(1)==2 ); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-06-05T19:42:23.770

这对您来说可能很有趣：[https ://gist.github.com/Manu343726/94769034179e2c846acc](https://gist.github.com/Manu343726/94769034179e2c846acc)

这是我一个月前写的一个实验。目标是创建一个类似函子的 C++ 模板，它模拟 Haskell 的部分调用闭包，即`m-n`当您使用参数调用带参数`n`的函数时自动创建参数闭包`m`。

这是这个实验能够做的一个例子：

```
int f( int a, int b, int c, int d)
{
    return a+b+c+d;
}

int main()
{
    auto foo = haskell::make_function( f );

    auto a = foo , 1 , 2 , 3; //a is a closure function object with one parameter

    std::cout << a , 4 << std::endl; //Prints 10
} 
```

`haskell::make_function`使用一些类型特征来处理不同类型的函数实体，包括 lambda：

```
auto f = haskell::make_function( []( int x, int y , int z ){ return x*y*z; } );

auto a = f(1,2); //a is functor with one parameter (Using the alternative C++-like syntax)
auto b = a(3); // b is 6 
```

如您所见，我使用逗号运算符来模仿 Haskell 语法，但您可以将其更改为调用运算符以实现您的目标语法。

您可以完全自由地使用代码做任何您想做的事情（检查许可证）。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-02-05T07:20:53.100

在 C++17 中有构造函数类型推导。因此，您可以为 std::function 模板参数节省一些输入。这不是什么都没有，而是少了一点。

```
template <typename R, typename...A>
void foo(std::function<R(A...)>) {}
int main() {
   foo(std::function([](){}));
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-09-20T10:57:26.617

七年后，可能是当时最简单的解决方案，今天仍然有效。

```
template< char const * (*name) () >
struct user {
  auto id() { return name(); }
} ; 
```

用法

```
constexpr auto lama () { return "Lama"; } 

 int main( int , char * [] )
 {
   auto amuser = user< lama >{} ;
   cout << boolalpha << amuser.id() << endl ;
 } 
```

还为 Lambda 爱好者提供服务

```
 auto cat = [] () constexpr { return "Cat"; } ;
 auto sneaky = user< cat >{} ;
 cout << boolalpha << sneaky.id() << endl ; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-10-24T16:51:28.627

使用具有显式模板参数列表（C++20 特性）的 lambda 表达式，您可以更轻松地编写函数，如下所示：

```
template <typename F,typename... T>
auto func(F f, T... values) {
    return f(values...);
}
int main() {
    auto result = func([]<typename... T>(T...args){
            return (...*args);
    },1,2,3,6,22);

    std::cout<<result<<"\n";
} 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2021-08-08T15:07:47.137

，`std::result_of`如果你只使用函数（没有类/结构，因为声明不会像`std::function`，而且真的很难看），你现在可以让它像：

```
 template <typename Func, typename ...Args>
std::result_of_t<Func(Args...)> func(Func function, Args... args) {
    /// now do your staff here
}
/// usage:
func([](){printf("lambda function\n"}); 
```

# java - 为什么我的 CORBA 应用程序没有运行？

> ID：13358678
> 
> 赞同：0
> 
> 时间：2012-11-13T10:00:14.870
> 
> 标签：java, compiler-errors, corba

目前正在尝试通过 SAMS 的第 4 章 - 在 14 天内自学 CORBA。我使用 idlj 作为 IDL-To-JAVA 编译器，我得到了一个与使用 idl2Java“JDK 预版本”不同的类列表，我尝试进行一些编辑，但出现了很多错误。

这是我输入和修改的代码，而不是用 idlj “编译”（生成）：

```
// StockMarket.idl

 // The StockMarket module consists of definitions useful
 // for building stock market-related applications.
 module StockMarket {

     // The StockSymbol type is used for symbols (names)
     // representing stocks.
     typedef string StockSymbol;

     // A StockSymbolList is simply a sequence of
     // StockSymbols.
     typedef sequence<StockSymbol> StockSymbolList;

     // The StockServer interface is the interface for a
     // server which provides stock market information.
     // (See the comments on the individual methods for
     // more information.)
     interface StockServer {

         // getStockValue() returns the current value for
         // the given StockSymbol. If the given StockSymbol
         // is unknown, the results are undefined (this
         // would be a good place to raise an exception).
         float getStockValue(in StockSymbol symbol);

         // getStockSymbols() returns a sequence of all
         // StockSymbols known by this StockServer.
         StockSymbolList getStockSymbols();
     };
 }; 
```

服务器实现

```
// StockServerImpl.java

  package StockMarket;

  import java.util.Vector;
import org.omg.CORBA.Context;
import org.omg.CORBA.ContextList;
import org.omg.CORBA.DomainManager;
import org.omg.CORBA.ExceptionList;
import org.omg.CORBA.NVList;
import org.omg.CORBA.NamedValue;

 import org.omg.CORBA.ORB;
import org.omg.CORBA.Object;
import org.omg.CORBA.Policy;
import org.omg.CORBA.Request;
import org.omg.CORBA.SetOverrideType;
 import org.omg.CosNaming.NameComponent;
 import org.omg.CosNaming.NamingContext;
 import org.omg.CosNaming.NamingContextHelper;

 // StockServerImpl implements the StockServer IDL interface.
 public class StockServerImpl extends StockServerPOA 
{

     // Stock symbols and their respective values.
     private Vector myStockSymbols;
     private Vector myStockValues;

     // Characters from which StockSymbol names are built.
     private static char ourCharacters[] = { 'A', 'B', 'C', 'D', 'E', 'F','G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R','S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z' };

     // Path name for StockServer objects.
     private static String ourPathName = "StockServer";

     // Create a new StockServerImpl.
     public StockServerImpl() {

         myStockSymbols = new Vector();
         myStockValues = new Vector();

         // Initialize the symbols and values with some random values.
         for (int i = 0; i < 10; i++) {

             // Generate a string of four random characters.
             StringBuffer stockSymbol = new StringBuffer("    ");
             for (int j = 0; j < 4; j++) {

                 stockSymbol.setCharAt(j, ourCharacters[(int)(Math.random()
                         * 26f)]);
             }

             myStockSymbols.addElement(stockSymbol.toString());

             // Give the stock a value between 0 and 100\. In this example,
             // the stock will retain this value for the duration of the
             // application.
             myStockValues.addElement(new Float(Math.random() * 100f));
         }

         // Print out the stock symbols generated above.
         System.out.println("Generated stock symbols:");
         for (int i = 0; i < 10; i++) {
             System.out.println("  " + myStockSymbols.elementAt(i) + " " +
                     myStockValues.elementAt(i));
         }
         System.out.println();
     }

     // Return the current value for the given StockSymbol.
     public float getStockValue(String symbol) {

         // Try to find the given symbol.
         int stockIndex = myStockSymbols.indexOf(symbol);
         if (stockIndex != -1) {

             // Symbol found; return its value.
             return ((Float)myStockValues.elementAt(stockIndex)).
                     floatValue();
         } else {

             // Symbol was not found.
             return 0f;
         }
     }

     // Return a sequence of all StockSymbols known by this StockServer.
     public String[] getStockSymbols() {

         String[] symbols = new String[myStockSymbols.size()];
         myStockSymbols.copyInto(symbols);

         return symbols;
     }

     // Create and initialize a StockServer object.
     public static void main(String args[]) {

         try {

             // Initialize the ORB.
             ORB orb = ORB.init(args, null);

             // Create a StockServerImpl object and register it with the
             // ORB.
            StockServerImpl stockServer = new StockServerImpl();
             orb.connect((Object)stockServer);

             // Get the root naming context.
// Get the root naming context.
org.omg.CORBA.Object obj = orb.resolve_initial_references("NameService");
NamingContext namingContext = NamingContextHelper.narrow(obj);

             // Bind the StockServer object reference in the naming
             // context.
             NameComponent nameComponent = new NameComponent(ourPathName,
                     "");
             NameComponent path[] = { nameComponent };
             namingContext.rebind(path, (Object)stockServer);

            // Wait for invocations from clients.
             java.lang.Object waitOnMe = new java.lang.Object();
             synchronized (waitOnMe) {
                 waitOnMe.wait();
             }
         } catch (Exception ex) {
             System.err.println("Couldn't bind StockServer: " + ex.
                    getMessage());
         }
     }

    @Override
    public boolean _is_a(String repositoryIdentifier) {
        throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    public boolean _non_existent() {
        throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    public Object _get_interface_def() {
        throw new UnsupportedOperationException("Not supported yet.");
    }

 } 
```

-- 客户端实现

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package StockMarket;

/**
 *
 * @author ygalila
 */
 import org.omg.CORBA.ORB;
 import org.omg.CosNaming.NameComponent;
 import org.omg.CosNaming.NamingContext;
 import org.omg.CosNaming.NamingContextHelper;

 // StockMarketClient is a simple client of a StockServer.
 public class StockMarketClient {

     // Create a new StockMarketClient.
     StockMarketClient() {

     }

     // Run the StockMarketClient.
     public void run() {

         connect();

         if (myStockServer != null) {
             doSomething();
         }
     }

  // Connect to the StockServer.
    protected void connect() {
        try {

             // Get the root naming context.
            org.omg.CORBA.Object obj = ourORB.
                     resolve_initial_references("NameService");
             NamingContext namingContext = NamingContextHelper.narrow(obj);

             // Attempt to locate a StockServer object in the naming
            // context.
             NameComponent nameComponent = new NameComponent("StockServer","");
             NameComponent path[] = { nameComponent };
             myStockServer = StockServerHelper.narrow(namingContext.
                     resolve(path));
         } catch (Exception ex) {
             System.err.println("Couldn't resolve StockServer: " + ex);
             myStockServer = null;
             return;
        }

         System.out.println("Succesfully bound to a StockServer.");
     }

     // Do some cool things with the StockServer.
     protected void doSomething() {

         try {

             // Get the valid stock symbols from the StockServer.
             String[] stockSymbols = myStockServer.getStockSymbols();

             // Display the stock symbols and their values.
             for (int i = 0; i < stockSymbols.length; i++) {
                 System.out.println(stockSymbols[i] + " " +
                         myStockServer.getStockValue(stockSymbols[i]));
             }
         } catch (org.omg.CORBA.SystemException ex) {
             System.err.println("Fatal error: " + ex);
         }
     }

     // Start up a StockMarketClient.
     public static void main(String args[]) {

         // Initialize the ORB.
         ourORB = ORB.init(args, null);

         StockMarketClient stockClient = new StockMarketClient();

         stockClient.run();

         // This simply waits forever so that the DOS window doesn't
         // disappear (for developers using Windows IDEs).
         while (true)
             ;
     }

     // My ORB.
     public static ORB ourORB;

     // My StockServer.
     private StockServer myStockServer;
 } 
```

在netbeans中运行后，我得到以下信息：

```
@ server

run:
Generated stock symbols:
  HDWB 79.99867
  XITG 7.3477798
  BLPP 48.922062
  PDRK 89.32173
  IQAQ 30.236895
  ZSSE 2.7638085
  XDAQ 39.625706
  CEJD 93.04881
  GCYC 64.20899
  LMWN 6.168055

Couldn't bind StockServer: StockMarket.StockServerImpl cannot be cast to org.omg.CORBA.Object
BUILD SUCCESSFUL (total time: 27 seconds)

@ Client

run:
نوف 13, 2012 11:56:33 ص com.sun.corba.se.impl.transport.SocketOrChannelConnectionImpl <init>
WARNING: "IOP00410201: (COMM_FAILURE) Connection failure: socketType: IIOP_CLEAR_TEXT; hostname: 10.100.221.94; port: 900"
org.omg.CORBA.COMM_FAILURE:   vmcid: SUN  minor code: 201  completed: No
    at com.sun.corba.se.impl.logging.ORBUtilSystemException.connectFailure(ORBUtilSystemException.java:2200)
    at com.sun.corba.se.impl.logging.ORBUtilSystemException.connectFailure(ORBUtilSystemException.java:2221)
    at com.sun.corba.se.impl.transport.SocketOrChannelConnectionImpl.<init>(SocketOrChannelConnectionImpl.java:223)
    at com.sun.corba.se.impl.transport.SocketOrChannelConnectionImpl.<init>(SocketOrChannelConnectionImpl.java:236)
    at com.sun.corba.se.impl.transport.SocketOrChannelContactInfoImpl.createConnection(SocketOrChannelContactInfoImpl.java:119)
    at com.sun.corba.se.impl.protocol.CorbaClientRequestDispatcherImpl.beginRequest(CorbaClientRequestDispatcherImpl.java:185)
    at com.sun.corba.se.impl.protocol.CorbaClientDelegateImpl.request(CorbaClientDelegateImpl.java:136)
    at com.sun.corba.se.impl.resolver.BootstrapResolverImpl.invoke(BootstrapResolverImpl.java:99)
    at com.sun.corba.se.impl.resolver.BootstrapResolverImpl.resolve(BootstrapResolverImpl.java:132)
    at com.sun.corba.se.impl.resolver.CompositeResolverImpl.resolve(CompositeResolverImpl.java:47)
    at com.sun.corba.se.impl.resolver.CompositeResolverImpl.resolve(CompositeResolverImpl.java:47)
    at com.sun.corba.se.impl.resolver.CompositeResolverImpl.resolve(CompositeResolverImpl.java:47)
    at com.sun.corba.se.impl.orb.ORBImpl.resolve_initial_references(ORBImpl.java:1170)
    at StockMarket.StockMarketClient.connect(StockMarketClient.java:39)
    at StockMarket.StockMarketClient.run(StockMarketClient.java:27)
    at StockMarket.StockMarketClient.main(StockMarketClient.java:84)
Caused by: java.net.ConnectException: Connection refused: connect
    at sun.nio.ch.Net.connect0(Native Method)
    at sun.nio.ch.Net.connect(Net.java:364)
    at sun.nio.ch.Net.connect(Net.java:356)
    at sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:623)
    at java.nio.channels.SocketChannel.open(SocketChannel.java:184)
    at com.sun.corba.se.impl.transport.DefaultSocketFactoryImpl.createSocket(DefaultSocketFactoryImpl.java:78)
    at com.sun.corba.se.impl.transport.SocketOrChannelConnectionImpl.<init>(SocketOrChannelConnectionImpl.java:206)
    ... 13 more

Couldn't resolve StockServer: org.omg.CORBA.COMM_FAILURE:   vmcid: SUN  minor code: 201  completed: No 
```

那么任何人都可以帮我解决这些问题吗？如果我从命令行运行这些，我在尝试编译 serverimpl 时会得到以下信息：-

```
G:\CORBA\StockMarket>javac StockServerImpl.java
StockServerImpl.java:21: error: cannot find symbol
    extends StockServerPOA
            ^
  symbol: class StockServerPOA
StockServerImpl.java:23: error: cannot find symbol
    implements StockServer
               ^
  symbol: class StockServer
StockServerImpl.java:85: error: cannot find symbol
    public float getStockValue(String symbol) throws InvalidStockSymbolException

                                                     ^
  symbol:   class InvalidStockSymbolException
  location: class StockServerImpl
StockServerImpl.java:98: error: cannot find symbol
            throw new InvalidStockSymbolException();
                      ^
  symbol:   class InvalidStockSymbolException
  location: class StockServerImpl
StockServerImpl.java:84: error: method does not override or implement a method f
rom a supertype
    @Override
    ^
StockServerImpl.java:103: error: method does not override or implement a method
from a supertype
    @Override
    ^
StockServerImpl.java:133: error: cannot find symbol
        StockServer href = null;
        ^
  symbol:   class StockServer
  location: class StockServerImpl
StockServerImpl.java:136: error: cannot find symbol
        ORB orb = StockServerORBHelper.getORB(args);
                  ^
  symbol:   variable StockServerORBHelper
  location: class StockServerImpl
StockServerImpl.java:137: error: cannot find symbol
        POA rootpoa = StockServerPOAHelper.getRoot(orb);
                      ^
  symbol:   variable StockServerPOAHelper
  location: class StockServerImpl
StockServerImpl.java:152: error: method servant_to_reference in interface POAOpe
rations cannot be applied to given types;
        try { ref = rootpoa.servant_to_reference(stockServerImpl); }
                           ^
  required: Servant
  found: StockServerImpl
  reason: actual argument StockServerImpl cannot be converted to Servant by meth
od invocation conversion
StockServerImpl.java:156: error: cannot find symbol
        try { href = StockServerHelper.narrow(ref); }
                     ^
  symbol:   variable StockServerHelper
  location: class StockServerImpl
StockServerImpl.java:199: error: method does not override or implement a method
from a supertype
    @Override
    ^
StockServerImpl.java:206: error: method does not override or implement a method
from a supertype
    @Override
    ^
StockServerImpl.java:213: error: method does not override or implement a method
from a supertype
    @Override
    ^
StockServerImpl.java:219: error: method does not override or implement a method
from a supertype
    @Override
    ^
StockServerImpl.java:225: error: method does not override or implement a method
from a supertype
    @Override
    ^
StockServerImpl.java:231: error: method does not override or implement a method
from a supertype
    @Override
    ^
StockServerImpl.java:237: error: method does not override or implement a method
from a supertype
    @Override
    ^
StockServerImpl.java:243: error: method does not override or implement a method
from a supertype
    @Override
    ^
StockServerImpl.java:249: error: method does not override or implement a method
from a supertype
    @Override
    ^
StockServerImpl.java:255: error: method does not override or implement a method
from a supertype
    @Override
    ^
21 errors

G:\CORBA\StockMarket> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:36:09.463

看看这个[问题](https://stackoverflow.com/questions/13175907/how-to-init-orb-from-property-file)，它处理类似的异常。

看起来客户端 ORB 没有连接到 NamingService 的正确连接详细信息，默认情况下它假定 NamingService 正在侦听端口 900。Sun/Oracle ORB 具有许多预定义的 -ORB 属性，可以当服务位于非默认位置时使用。

[在此处](http://docs.oracle.com/javase/1.5.0/docs/guide/idl/INStutorial.html)`-ORBInitRef`查看 Oracle ORB的属性和详细信息。

至于您在编译服务器代码时遇到的各种编译错误。看起来服务器端骨架代码（从 idl 编译器生成的生成的服务器端代码）要么没有被编译，要么在编译类路径中丢失，所以 java 编译器找不到它。

# javascript - 如何配置 grunt.js 以分别缩小文件

> ID：13358680
> 
> 赞同：57
> 
> 时间：2012-11-13T10:00:28.850
> 
> 标签：javascript, compression, gruntjs

在 static/js/ 中有一些 js 文件

```
 1\. a.js
    2\. b.js
    3\. c.js 
```

如何配置 grunt.js 以获取以下文件：

```
 1\. a.min.js
    2\. b.min.js
    3\. c.min.js 
```

到目前为止，我必须输入特定的文件名：

```
 min: {
    dist: {
    src:  'js/**/*.js',
    dest: 'js/min/xxx.min.js'
   }
 } 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-03-22T17:30:23.887

遇到了同样的问题，并找到了一个可以分别自动缩小我所有脚本的解决方案：

```
uglify: {
      build: {
        files: [{
            expand: true,
            src: '**/*.js',
            dest: 'build/scripts',
            cwd: 'app/scripts'
        }]
      }
    } 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-12-03T03:32:48.093

在 grunt 0.4 中，您可以像这样指定多个 dest/src 对：

```
uglify: {
    dist: {
        files: {
            'dist/main.js': 'src/main.js',
            'dist/widget.js': 'src/widget.js'
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-09-02T00:19:31.210

或者您可以使用 expandMapping，如下所示：

```
min: {
    files: grunt.file.expandMapping(['path/*.js', 'path2/*.js'], 'destination/', {
        rename: function(destBase, destPath) {
            return destBase+destPath.replace('.js', '.min.js');
        }
    })
} 
```

和输出：

path/test.js => 目的地/path/test.min.js
path2/foo.js => 目的地/path2/foo.min.js

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2014-03-07T03:44:06.580

下面的 gruntjs 适用于我为目录下的所有 js 文件创建缩小文件

```
module.exports = function(grunt) {

  // Project configuration.
  grunt.initConfig({
    pkg: grunt.file.readJSON('package.json'),
    uglify: {
    build: {
        files: [{
            expand: true,
            src: '**/*.js',
            dest: 'build/scripts',
            cwd: 'public_html/app',
        ext: '.min.js'
        }]
      }
    }
  });

  // Load the plugin that provides the "uglify" task.
  grunt.loadNpmTasks('grunt-contrib-uglify');

  // Default task(s).
  grunt.registerTask('default', ['uglify']);

}; 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-02-02T10:22:24.237

来自 min 的 grunt 文档：

> 此任务是一个多任务，这意味着如果未指定目标，grunt 将自动遍历所有最小目标。

所以你可以这样做：

```
 min: {
    min_a: {
       src:  'a.js',
       dest: 'a.min.js'
    },
    min_b: {
       src:  'b.js',
       dest: 'b.min.js'
    },
    min_c: {
       src:  'c.js',
       dest: 'c.min.js'
 } 
```

这些任务的名称“dist”没有什么特别之处。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-12-16T10:42:33.597

使用`ext`选项来命名文件`.min.js`，而不是`.js`

```
uglify: {
      build: {
        files: [{
            expand: true,
            src: '**/*.js',
            dest: 'build/scripts',
            cwd: 'app/scripts',
            ext: '.min.js'
        }]
      }
    } 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-12-17T11:07:42.890

要将某些文件显式导出到单独的输出文件（在本例中**为 all.min.js**和**all.jquery.js**），请使用：

```
uglify: {
  js: {
    files : {
        'js/all.min.js' : [
          'js/modernizr.js',
          'js/vendor/modernizr-2.6.2-respond-1.1.0.min.js',
          'js/bootstrap.min.js',
          'js/main.js',
          'js/ZeroClipboard.min.js',
          'js/bootstrap-datepicker/bootstrap-datepicker.js'
        ],

        'js/all.jquery.js' : [
          'js/vendor/jquery-1.9.1.js',
          'js/vendor/jquery-migrate-1.2.1.js',
          'js/vendor/jquery-ui.js'
        ]

    }
  },
  options: {
    banner: '\n/*! <%= pkg.name %> <%= grunt.template.today("dd-mm-yyyy") %> */\n',
    preserveComments: 'some',
    report: 'min'
  }
}, 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-09-01T20:57:04.757

我喜欢保留原始文件并创建丑陋的文件：

```
uglify: {
  dist: {
    files: [{
      expand: true,
      src: '**/*.js',
      dest: 'destdir',
      cwd: 'srcdir',
      rename: function(dest, src) { return dest + '/' + src.replace('.js', '.min.js'); }
    }]
  }
}, 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-12-04T11:08:03.480

你也可以使用 copy 和[grunt-mindirect](https://github.com/buunguyen/grunt-mindirect)。

```
copy: {
  dist: {
    src: 'a.js',
    dest: 'a.min.js'
  }
},
minidirect: {
  all: 'js/min/*.min.js'
} 
```

这应该有效。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-02-27T10:04:09.430

我想这只对手表任务很重要。

在 grunt 0.4 中你可以这样做

```
 var filesA = 'a.js', filesB = 'b.js', filesC = 'c.js';

  ...

  min: {
      min_a: {
         src:  filesA,
         dest: 'a.min.js'
      },
      min_b: {
         src:  filesB,
         dest: 'b.min.js'
      },
      min_c: {
         src:  filesC,
         dest: 'c.min.js'
  }

  watch: {
      min_a: {
         files:  filesA,
         tasks: ['min:min_a']
      },
      min_b: {
         files:  filesB,
         tasks: ['min:min_b']
      },
      min_c: {
         files:  filesC,
         tasks: ['min:min_c']
      }
  } 
```

之后就开始了`grunt watch`，一切都会自动好起来的。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-08-26T03:24:15.797

为了帮助将来访问此页面的其他人-

我在这里看到了一个视频，它解释了如何使用 Grunt JS 缩小 JS 文件：[https ://www.youtube.com/watch?v=Gkv7pA0PMJQ](https://www.youtube.com/watch?v=Gkv7pA0PMJQ)

源代码可在此处获得：[http ://www.techcbt.com/Post/359/Grunt-JS/how-to-minify-uglify-javascript-files-using-grunt-js](http://www.techcbt.com/Post/359/Grunt-JS/how-to-minify-uglify-javascript-files-using-grunt-js)

以防万一，如果上述链接不起作用：

1.  您可以使用以下脚本缩小所有 javascript 文件并合并/合并为一个文件：

```
 module.exports = function(grunt){
	grunt.loadNpmTasks('grunt-contrib-uglify');	

	grunt.initConfig({
		pkg: grunt.file.readJSON('package.json'),

		uglify:{
			t1:{
				files:{
					'dest/all.min.js': ['src/app.js', 'src/one.js', 'src/t/two.js']
				}
			}
		}
	});	
};
```

2.  如果您还想生成源映射，可以启用“sourceMap”选项，如下所示：

```
 module.exports = function(grunt){
	grunt.loadNpmTasks('grunt-contrib-uglify');	

	grunt.initConfig({
		pkg: grunt.file.readJSON('package.json'),

		uglify:{
			t1:{
				options : {
        			sourceMap : true,
      			},
				files:{
					'dest/all.min.js': ['src/app.js', 'src/one.js', 'src/t/two.js']
				}
			}
		}
	});	
};
```

3.  为了在缩小 JS 文件的同时保留整个文件夹结构，可以使用以下脚本：

```
 module.exports = function(grunt){
	grunt.loadNpmTasks('grunt-contrib-uglify');	

	grunt.initConfig({
		pkg: grunt.file.readJSON('package.json'),

		uglify:{
			t1:{
				files: [{
					cwd: 'src/',
               		src: '**/*.js',  
               		dest: 'dest/',    
               		expand: true,    
               		flatten: false,
               		ext: '.min.js'
           		}]
			}
		}
	});	
};
```

# c# - 在 windows mobile 6.1 标准应用程序中关闭所有打开的表单

> ID：13358681
> 
> 赞同：1
> 
> 时间：2012-11-13T10:00:31.110
> 
> 标签：c#, .net-cf-3.5

我正在创建一个 windows mobile 6.1 标准应用程序我想知道如何关闭所有通过单击打开的表单。我使用`Application.Run(new frmLogin());`但它显示异常

> *值不在预期范围内*

有人知道如何在 windows mobile 6.1 标准应用程序中执行此操作吗？

换句话说，如果 `Application.Exit();`关闭登录应用程序，则关闭除登录表单之外的所有 Windows 表单

# apache - 错误的路径混淆了apache？

> ID：13358682
> 
> 赞同：0
> 
> 时间：2012-11-13T10:00:41.890
> 
> 标签：apache, .htaccess, mod-rewrite

使用以下内容`RewriteCond`，我想为所有不是图像、css 或 js 的文件制定规则。

```
RewriteCond %{REQUEST_FILENAME} !\.(ico|jpg|jpeg|png|gif|js|css|svg|svgz)$ 
```

当文件的路径存在时，此规则可以正常工作...

但是当文件的路径不存在（给出了错误的路径）时**，即使文件以列表中的扩展名结尾，规则也会继续。**

即使路径不存在，我如何包含在规则中以包含路径？

**更新：**

解决方案是使用 %{REQUEST_URI} 而不是 %{REQUEST_FILENAME}。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T10:21:56.737

好的，我发现了问题:)

当路径不存在时，`REQUEST_FILENAME`未设置映射到 FS 上的真实文件的路径。

改用`REQUEST_URI`可以解决问题并正确处理所有情况。

**正确的指令：**

```
RewriteCond %{REQUEST_URI} !\.(ico|jpg|jpeg|png|gif|js|css|svg|svgz)$ 
```

# android - 在活动启动时保持 XMPP 连接或（重新）连接

> ID：13358693
> 
> 赞同：1
> 
> 时间：2012-11-13T10:00:58.133
> 
> 标签：android, service, xmpp, keep-alive, messenger

我目前正在开发一个使用*asmack* [源](http://code.google.com/p/asmack/)连接到 XMPP 服务器的应用程序。此应用程序基本上包括所有默认的信使属性（发送/接收消息、更改状态等）。

目前`XMPP connection`生活在应用程序中，而不是某种后台服务。所以现在我想知道，是使用服务保持连接活动还是在我的应用程序实际运行时保持连接活动更好。

这是考虑到我**不想**一直保持连接到 XMPP 服务器（比如几天，或任何超过半小时的时间），因为这会给服务器带来很小但明显的压力。

因此，在某种程度上，我在问是否最好在我的活动被带到前台/启动后立即（重新）连接/登录，或者最好在服务中连接一次并保持此连接处于活动状态？*（并且可能在新收到的消息上弹出通知）*

提前致谢，

# ssas - OLAP - 包括计算径流三角形、样本数据和立方体 (PostgreSQL/Mondrian)

> ID：13358696
> 
> 赞同：11
> 
> 时间：2012-11-13T10:01:06.973
> 
> 标签：ssas, mdx, data-warehouse, olap, mondrian

现实描述：我们确实有一份项目清单。在每个项目中都有很多帐户。您可以对每个帐户执行很多操作。我确实定义了以下维度和事实表（简化）：

```
Dimensions and attributes:
 Project
  project_key
  project_name
  industry
  number_of_accounts
 Distance
  distance_key
  distance_in_months
  distance_in_quarters
 Account
  account_key
  project_key
  account_id
Fact Table and attributes:
 Action_Fact_Table
  project_key
  distance_key
  account_key
  action_id 
```

现在，我想用径流三角形的方法来分析数据（它可能不是真正的径流三角形，但方法是一样的）。最简单的三角形如下所示：

```
 Distance in Months
Project name|     1    2    3    4    5    6    7    8    9    10
-------------------------------------------------------------------------
 Project1   |     5   10   15   20   25   30   35   40   45    50
 Project2   |     7   14   21   28   35   42   49   56   63
 Project3   |     2    5    8   11   14   20   25   30
 Project4   |     0    2    5   10   18   23   40
 Project5   |     5   12   18   20   21   30 
```

有按行计算的动作总和。以月为单位的距离显示了行动日期和项目开始日期之间的距离。您显然可以使用四分之一的距离（或距离维度中定义的任何其他周期）创建类似的三角形。

您还可以为项目维度中的不同层次结构创建三角形，例如行业（Project1-Project3 = Industry1，Project4-Project5 = Industry2）：

```
 Distance in Months
Project name|     1    2    3    4    5    6    7    8    9    10
-------------------------------------------------------------------------
 Industry1   |    14   29   44   59   74   92  109  126  108   50
 Industry2   |     5   14   23   30   39   53   40 
```

还有更高级的径流三角形，您可以在其中将操作的运行总和除以帐户数。假设我们的项目有以下数量的帐户：

```
Project_name number_of_accounts  
-----------------------------
Project1     100
Project2     100
Project3     100
Project4     100
Project5     200 
```

然后我想得到以下三角形：

```
 Distance in Months
Project    |     1    2    3    4    5    6    7    8    9    10
------------------------------------------------------------------------
 Project1  |   .05  .01  .15  .20  .25  .30  .35  .40  .45   .50
 Project2  |    .7  .14  .21  .28  .35  .42  .49  .56  .63
 Project3  |    .2   .5   .8  .11  .14  .20  .25  .30
 Project4  |    .0   .2   .5  .10  .18  .23  .40
 Project5  |   .05  .06  .09  .10 .105  .15 
```

当您想要比较项目及其操作时，如果项目中的帐户数量对于所有项目都不相同，这尤其有用。

问题是是否可以在 OLAP 中创建这样的计算。我在想我可以在项目表中使用 number_of_accounts ，但我想不通。另一种选择是聚合帐户维度中的数据。我也无法使用谷歌找到任何东西，也许是因为我问错了问题。

这个问题的解决方案广泛适用于许多行业，尤其​​是在保险和银行业中至关重要。它可以在流程具有较长性能窗口的任何地方使用，并且可以通过定义明确的、可比较的单位批次进行跟踪。

（我们使用的是PostgreSQL，Saiku，Cubes是在Schema Workbench中定义的）

测试数据（PostgreSQL 语法，如果您需要其他内容，请告诉我）

```
--drop table if exists project cascade;
create table project (
  project_key int primary key,
  project_name character varying,
  industry character varying,
  number_of_accounts int
);

--drop table if exists distance cascade;
create table distance (
  distance_key int primary key,
  distance_in_months int,
  distance_in_quarters int);

--drop table if exists account cascade;
create table account (
  account_key int primary key,
  project_key int references project (project_key)
);

--drop table if exists action_fact_table cascade;
create table action_fact_table (
  project_key int references project (project_key),
  distance_key int references distance (distance_key),
  account_key int references account (account_key),
  action_id int
);

-- project data
insert into project values (1,'Project1','Industry1',100);
insert into project values (2,'Project2','Industry1',100);
insert into project values (3,'Project3','Industry1',100);
insert into project values (4,'Project4','Industry2',100);
insert into project values (5,'Project5','Industry2',200);

-- distance data
insert into distance values(1,1,1);
insert into distance values(2,2,1);
insert into distance values(3,3,1);
insert into distance values(4,4,2);
insert into distance values(5,5,2);
insert into distance values(6,6,2);
insert into distance values(7,7,3);
insert into distance values(8,8,3);
insert into distance values(9,9,3);
insert into distance values(10,10,4);
insert into distance values(11,11,4);
insert into distance values(12,12,4);

-- account data
/* let me know if you need insert statement for every row */
insert into account (
select generate_series (1,100), 1 union all
select generate_series (101,200), 2 union all
select generate_series (201,300), 3 union all
select generate_series (301,400), 4 union all
select generate_series (401,600), 5
);

insert into action_fact_table values(1,1,90,10001);
insert into action_fact_table values(1,1,32,10002);
insert into action_fact_table values(1,1,41,10003);
insert into action_fact_table values(1,1,54,10004);
insert into action_fact_table values(1,1,45,10005);
insert into action_fact_table values(1,2,22,10006);
insert into action_fact_table values(1,2,29,10007);
insert into action_fact_table values(1,2,41,10008);
insert into action_fact_table values(1,2,89,10009);
insert into action_fact_table values(1,2,15,10010);
insert into action_fact_table values(1,3,32,10011);
insert into action_fact_table values(1,3,100,10012);
insert into action_fact_table values(1,3,72,10013);
insert into action_fact_table values(1,3,80,10014);
insert into action_fact_table values(1,3,10,10015);
insert into action_fact_table values(1,4,12,10016);
insert into action_fact_table values(1,4,45,10017);
insert into action_fact_table values(1,4,83,10018);
insert into action_fact_table values(1,4,42,10019);
insert into action_fact_table values(1,4,33,10020);
insert into action_fact_table values(1,5,22,10021);
insert into action_fact_table values(1,5,27,10022);
insert into action_fact_table values(1,5,59,10023);
insert into action_fact_table values(1,5,32,10024);
insert into action_fact_table values(1,5,70,10025);
insert into action_fact_table values(1,6,32,10026);
insert into action_fact_table values(1,6,5,10027);
insert into action_fact_table values(1,6,15,10028);
insert into action_fact_table values(1,6,70,10029);
insert into action_fact_table values(1,6,43,10030);
insert into action_fact_table values(1,7,59,10031);
insert into action_fact_table values(1,7,9,10032);
insert into action_fact_table values(1,7,99,10033);
insert into action_fact_table values(1,7,79,10034);
insert into action_fact_table values(1,7,31,10035);
insert into action_fact_table values(1,8,56,10036);
insert into action_fact_table values(1,8,34,10037);
insert into action_fact_table values(1,8,48,10038);
insert into action_fact_table values(1,8,79,10039);
insert into action_fact_table values(1,8,42,10040);
insert into action_fact_table values(1,9,10,10041);
insert into action_fact_table values(1,9,10,10042);
insert into action_fact_table values(1,9,49,10043);
insert into action_fact_table values(1,9,61,10044);
insert into action_fact_table values(1,9,49,10045);
insert into action_fact_table values(1,10,99,10046);
insert into action_fact_table values(1,10,69,10047);
insert into action_fact_table values(1,10,84,10048);
insert into action_fact_table values(1,10,99,10049);
insert into action_fact_table values(1,10,3,10050);
insert into action_fact_table values(2,1,182,10051);
insert into action_fact_table values(2,1,127,10052);
insert into action_fact_table values(2,1,197,10053);
insert into action_fact_table values(2,1,174,10054);
insert into action_fact_table values(2,1,187,10055);
insert into action_fact_table values(2,1,144,10056);
insert into action_fact_table values(2,1,160,10057);
insert into action_fact_table values(2,2,155,10058);
insert into action_fact_table values(2,2,153,10059);
insert into action_fact_table values(2,2,119,10060);
insert into action_fact_table values(2,2,188,10061);
insert into action_fact_table values(2,2,125,10062);
insert into action_fact_table values(2,2,147,10063);
insert into action_fact_table values(2,2,123,10064);
insert into action_fact_table values(2,3,136,10065);
insert into action_fact_table values(2,3,163,10066);
insert into action_fact_table values(2,3,187,10067);
insert into action_fact_table values(2,3,138,10068);
insert into action_fact_table values(2,3,168,10069);
insert into action_fact_table values(2,3,132,10070);
insert into action_fact_table values(2,3,138,10071);
insert into action_fact_table values(2,4,158,10072);
insert into action_fact_table values(2,4,171,10073);
insert into action_fact_table values(2,4,153,10074);
insert into action_fact_table values(2,4,141,10075);
insert into action_fact_table values(2,4,182,10076);
insert into action_fact_table values(2,4,165,10077);
insert into action_fact_table values(2,4,143,10078);
insert into action_fact_table values(2,5,190,10079);
insert into action_fact_table values(2,5,181,10080);
insert into action_fact_table values(2,5,163,10081);
insert into action_fact_table values(2,5,134,10082);
insert into action_fact_table values(2,5,145,10083);
insert into action_fact_table values(2,5,190,10084);
insert into action_fact_table values(2,5,198,10085);
insert into action_fact_table values(2,6,137,10086);
insert into action_fact_table values(2,6,133,10087);
insert into action_fact_table values(2,6,135,10088);
insert into action_fact_table values(2,6,103,10089);
insert into action_fact_table values(2,6,187,10090);
insert into action_fact_table values(2,6,127,10091);
insert into action_fact_table values(2,6,117,10092);
insert into action_fact_table values(2,7,116,10093);
insert into action_fact_table values(2,7,139,10094);
insert into action_fact_table values(2,7,111,10095);
insert into action_fact_table values(2,7,150,10096);
insert into action_fact_table values(2,7,151,10097);
insert into action_fact_table values(2,7,181,10098);
insert into action_fact_table values(2,7,109,10099);
insert into action_fact_table values(2,8,102,10100);
insert into action_fact_table values(2,8,101,10101);
insert into action_fact_table values(2,8,118,10102);
insert into action_fact_table values(2,8,147,10103);
insert into action_fact_table values(2,8,186,10104);
insert into action_fact_table values(2,8,136,10105);
insert into action_fact_table values(2,8,160,10106);
insert into action_fact_table values(2,9,149,10107);
insert into action_fact_table values(2,9,119,10108);
insert into action_fact_table values(2,9,169,10109);
insert into action_fact_table values(2,9,176,10110);
insert into action_fact_table values(2,9,195,10111);
insert into action_fact_table values(2,9,183,10112);
insert into action_fact_table values(2,9,140,10113);
insert into action_fact_table values(3,1,224,10114);
insert into action_fact_table values(3,1,241,10115);
insert into action_fact_table values(3,2,295,10116);
insert into action_fact_table values(3,2,249,10117);
insert into action_fact_table values(3,2,260,10118);
insert into action_fact_table values(3,3,298,10119);
insert into action_fact_table values(3,3,267,10120);
insert into action_fact_table values(3,3,297,10121);
insert into action_fact_table values(3,4,211,10122);
insert into action_fact_table values(3,4,253,10123);
insert into action_fact_table values(3,4,214,10124);
insert into action_fact_table values(3,5,248,10125);
insert into action_fact_table values(3,5,223,10126);
insert into action_fact_table values(3,5,288,10127);
insert into action_fact_table values(3,6,207,10128);
insert into action_fact_table values(3,6,296,10129);
insert into action_fact_table values(3,6,221,10130);
insert into action_fact_table values(3,6,201,10131);
insert into action_fact_table values(3,6,227,10132);
insert into action_fact_table values(3,6,209,10133);
insert into action_fact_table values(3,7,267,10134);
insert into action_fact_table values(3,7,282,10135);
insert into action_fact_table values(3,7,215,10136);
insert into action_fact_table values(3,7,285,10137);
insert into action_fact_table values(3,7,212,10138);
insert into action_fact_table values(3,8,239,10139);
insert into action_fact_table values(3,8,294,10140);
insert into action_fact_table values(3,8,296,10141);
insert into action_fact_table values(3,8,251,10142);
insert into action_fact_table values(3,8,281,10143);
insert into action_fact_table values(4,2,392,10144);
insert into action_fact_table values(4,2,347,10145);
insert into action_fact_table values(4,3,318,10146);
insert into action_fact_table values(4,3,400,10147);
insert into action_fact_table values(4,3,378,10148);
insert into action_fact_table values(4,4,315,10149);
insert into action_fact_table values(4,4,318,10150);
insert into action_fact_table values(4,4,394,10151);
insert into action_fact_table values(4,4,382,10152);
insert into action_fact_table values(4,4,317,10153);
insert into action_fact_table values(4,5,314,10154);
insert into action_fact_table values(4,5,354,10155);
insert into action_fact_table values(4,5,338,10156);
insert into action_fact_table values(4,5,375,10157);
insert into action_fact_table values(4,5,317,10158);
insert into action_fact_table values(4,5,329,10159);
insert into action_fact_table values(4,5,342,10160);
insert into action_fact_table values(4,5,380,10161);
insert into action_fact_table values(4,6,313,10162);
insert into action_fact_table values(4,6,311,10163);
insert into action_fact_table values(4,6,336,10164);
insert into action_fact_table values(4,6,380,10165);
insert into action_fact_table values(4,6,355,10166);
insert into action_fact_table values(4,7,386,10167);
insert into action_fact_table values(4,7,322,10168);
insert into action_fact_table values(4,7,311,10169);
insert into action_fact_table values(4,7,367,10170);
insert into action_fact_table values(4,7,350,10171);
insert into action_fact_table values(4,7,384,10172);
insert into action_fact_table values(4,7,391,10173);
insert into action_fact_table values(4,7,331,10174);
insert into action_fact_table values(4,7,373,10175);
insert into action_fact_table values(4,7,314,10176);
insert into action_fact_table values(4,7,305,10177);
insert into action_fact_table values(4,7,331,10178);
insert into action_fact_table values(4,7,350,10179);
insert into action_fact_table values(4,7,376,10180);
insert into action_fact_table values(4,7,387,10181);
insert into action_fact_table values(4,7,312,10182);
insert into action_fact_table values(4,7,397,10183);
insert into action_fact_table values(5,1,404,10184);
insert into action_fact_table values(5,1,562,10185);
insert into action_fact_table values(5,1,511,10186);
insert into action_fact_table values(5,1,594,10187);
insert into action_fact_table values(5,1,541,10188);
insert into action_fact_table values(5,2,506,10189);
insert into action_fact_table values(5,2,427,10190);
insert into action_fact_table values(5,2,481,10191);
insert into action_fact_table values(5,2,463,10192);
insert into action_fact_table values(5,2,579,10193);
insert into action_fact_table values(5,2,455,10194);
insert into action_fact_table values(5,2,527,10195);
insert into action_fact_table values(5,3,465,10196);
insert into action_fact_table values(5,3,562,10197);
insert into action_fact_table values(5,3,434,10198);
insert into action_fact_table values(5,3,401,10199);
insert into action_fact_table values(5,3,464,10200);
insert into action_fact_table values(5,3,500,10201);
insert into action_fact_table values(5,4,554,10202);
insert into action_fact_table values(5,4,600,10203);
insert into action_fact_table values(5,5,483,10204);
insert into action_fact_table values(5,6,552,10205);
insert into action_fact_table values(5,6,565,10206);
insert into action_fact_table values(5,6,586,10207);
insert into action_fact_table values(5,6,544,10208);
insert into action_fact_table values(5,6,436,10209);
insert into action_fact_table values(5,6,531,10210);
insert into action_fact_table values(5,6,409,10211);
insert into action_fact_table values(5,6,524,10212);
insert into action_fact_table values(5,6,564,10213); 
```

样品立方体（蒙德里安）：

```
<Schema name="RunoffTriangleSchema">
  <Cube name="RunoffTriangleCube" visible="true" cache="true" enabled="true">
    <Table name="action_fact_table" schema="public">
    </Table>
    <Dimension type="StandardDimension" visible="true" foreignKey="project_key" name="Project">
      <Hierarchy name="Project" visible="true" hasAll="true">
        <Table name="project" schema="public" alias="">
        </Table>
        <Level name="Industry" visible="true" column="industry" uniqueMembers="false">
        </Level>
        <Level name="Project Name" visible="true" column="project_name" uniqueMembers="false">
        </Level>
      </Hierarchy>
    </Dimension>
    <Dimension type="StandardDimension" visible="true" foreignKey="distance_key" name="Distance">
      <Hierarchy name="Distance" visible="true" hasAll="true">
        <Table name="distance" schema="public" alias="">
        </Table>
        <Level name="Distance In Quarters" visible="true" column="distance_in_quarters" uniqueMembers="false">
        </Level>
        <Level name="Distance In Months" visible="true" column="distance_in_months" uniqueMembers="false">
        </Level>
      </Hierarchy>
    </Dimension>
    <Dimension type="StandardDimension" visible="true" foreignKey="account_key" name="Account">
      <Hierarchy name="Account" visible="true" hasAll="true">
        <Table name="account" schema="public">
        </Table>
        <Level name="Account Key" visible="true" column="account_key" uniqueMembers="false">
        </Level>
      </Hierarchy>
    </Dimension>
    <Measure name="CountActions" column="action_id" aggregator="count" visible="true">
    </Measure>
  </Cube>
</Schema> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:51:27.677

两次赏金，没有答案，我很惊讶。我找到了一个变通解决方案 - 使用 SQL 和 BIRT 引擎，我现在接近我正在寻找的东西。我仍然希望有人可以为OLAP解决这个问题。

* * *

为了完成这项工作，我有：

*   自定义函数以返回动态选择的列
*   SQL 根据选定的列计算径流三角形数据
*   BIRT 2.6.1 中的报表显示结果并提供参数选择界面

**动态返回列**

```
 CREATE or replace FUNCTION bizdata.getColumns(_column1 text, _column2 text, _column3 text, _column4 text, _table text, _rqdl text)
      RETURNS TABLE(cmf1 text, cmf2 text, cmf3 text, outval numeric, rqdl text) AS $$
    BEGIN
        RETURN QUERY EXECUTE 
            'SELECT ' 
                || case when _column1 = 'None' then quote_literal('None') else quote_ident(_column1) end || '::text as cmf1,' 
                || case when _column2 = 'None' then quote_literal('None') else quote_ident(_column2) end || '::text as cmf2,' 
                || case when _column3 = 'None' then quote_literal('None') else quote_ident(_column3) end || '::text as cmf3,'   
                || quote_ident(_column4) || '::numeric as baseline,'
                || case when _rqdl = 'None' then 0::text else quote_ident(_rqdl)::text end || '::text as rqdl'  
            ' FROM '
                || 'bizdata.' || _table; 
    END;
     $$ LANGUAGE plpgsql;

Thi function takes the following as input variables:

 - _column1 - common mapping field number 1
 - _column2 - common mapping field number 2
 - _column3 - common mapping field number 3
 - _column4 - column used for aggregation (sum)
 - _table - table used for getting data
 - _rqdl - requested distance level 
```

**计算数据**

```
Using bizdata.getColumns() function I can calculate triangle data using the following statement:

with 

params as (
    select 'cmf1'::varchar as prm_name, 'project_owner_name_short'::varchar as prm_value union all 
    select 'cmf2'::varchar as prm_name, 'project_source_name_short'::varchar as prm_value union all
    select 'cmf3'::varchar as prm_name, 'None'::varchar as prm_value union all
    select 'fact'::varchar as prm_name, 'amount'::varchar as prm_value union all    
    select 'fact_table'::varchar as prm_name, 'dwv_daily_allocation_fact'::varchar as prm_value union all       
    select 'baseline'::varchar as prm_name, 'tmp_nominal_value'::varchar as prm_value union all 
    select 'baseline_table'::varchar as prm_name, 'dw_project'::varchar as prm_value union all
    select 'rqdl'::varchar as prm_name, 'year_distance'::varchar as prm_value 
)

,baseline_data as (
    select 
        cmf1,
        cmf2,
        cmf3,
        sum(coalesce(outval,0)) as baseline
    from 
        bizdata.getColumns(
            (select prm_value from params where prm_name = 'cmf1'::text),
            (select prm_value from params where prm_name = 'cmf2'::text),
            (select prm_value from params where prm_name = 'cmf3'::text),
            (select prm_value from params where prm_name = 'baseline'::text),
            (select prm_value from params where prm_name = 'baseline_table'::text), 
            'None'
            )
    group by
        cmf1,
        cmf2,
        cmf3

)

,fact_data as (
    select 
        cmf1,
        cmf2,
        cmf3,
        rqdl::int as rqdl,
        sum(coalesce(outval,0)) as fact
    from 
        bizdata.getColumns(
            (select prm_value from params where prm_name = 'cmf1'::text),
            (select prm_value from params where prm_name = 'cmf2'::text),
            (select prm_value from params where prm_name = 'cmf3'::text),
            (select prm_value from params where prm_name = 'fact'::text),
            (select prm_value from params where prm_name = 'fact_table'::text),
            (select prm_value from params where prm_name = 'rqdl'::text)
            )
    group by
        cmf1,
        cmf2,
        cmf3,
        rqdl

)

select 
    case when cmf1 = 'None' then null else cmf1 end as cmf1,
    case when cmf2 = 'None' then null else cmf1 end as cmf,
    case when cmf3 = 'None' then null else cmf1 end as cmf1,
    rqdl,
    fact,
    baseline,
    sum(fact) over (partition by cmf1, cmf2, cmf3 order by rqdl) as cfact,
    sum(fact) over (partition by cmf1, cmf2, cmf3 order by rqdl) / baseline as cfactpct
from 
    fact_data 
    join baseline_data using (cmf1, cmf2, cmf3) 
```

您可以看到我最多可以使用 3 个分组变量（cmf1、cmf2、cmf3）并选择任何距离属性（只要该属性在 dwv_daily_allocation_fact 中可用。分组变量应该在基线表和事实表中都可用（以获得普通组级别）

**报告**

最后一步是在 BIRT (2.6.1) 中创建报表，其中 SQL 的 params 部分中的参数被数据集参数替换并链接到报表参数。使用 BIRT 的人可能明白，其他人必须另谋出路。

*参数选择界面* ![参数选择界面](../Images/22b7b887834be05dc8e45f991db18816.png)

*输出报告* ![在此处输入图像描述](../Images/ab668d589fee19fcf3882aa113536984.png)

我仍然必须弄清楚表格的正确排序（所以历史最长的组是第一位的。

编辑：我已经想出了在 BIRT 交叉表中排序，现在它看起来像真正的三角形：

![在此处输入图像描述](../Images/67dcbccf08faf5688031c05564009cc5.png)

如果您需要有关我如何做到这一点的更详细描述，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T13:44:14.417

我创建了 R 包，称为`pgvint`可以轻松计算复古曲线（径流三角形）的地方。该软件包位于[github 上](https://github.com/tomasgreif/pgvint)，目前仅支持 PostgreSQL 作为数据源。

示例输出： ![在此处输入图像描述](../Images/0d39e6f44d741dff16441827fcdc1895.png)

![在此处输入图像描述](../Images/d63573a59459a547381800c28fe9e548.png)

此外，还有一个 Shiny 应用程序，可以在其中以不同的布局交互地显示复古数据：

![在此处输入图像描述](../Images/df675eb6a747b96215d501497ea7c7d6.png)

# html - HTML iframe 支持某些网站

> ID：13358701
> 
> 赞同：0
> 
> 时间：2012-11-13T10:01:34.653
> 
> 标签：html, iframe, facebook-iframe

我无法通过 iframe 打开 google 的主页，也无法通过 iframe 打开 facebook 的登录页面。我看到了 Mozilla 的 X-frame 页面，但看不清楚。有人可以告诉我为什么会发生这种情况，如果可能的话，iframe 的代码打开谷歌主页而不是显示一个空的白色 iframe？

编码：

```
$(document).ready(function() {

$('.iframe').fancybox({
        width : '90%',
        height : '90%',
        titlePosition: 'outside'
    });
}); // end ready

<div class="content">
    <div class="main">
        <h3>For more such beautiful photos visit XYZ on:</h3><br/>
        <ul>
            <li>
                <a href="complete_menu.html" class="iframe" title="Website">His own Web site</a>
            </li>
            <li>
                <a href="http://www.facebook.com/XYZ" class="iframe" title="Facebook">Facebook</a>
            </li>
            <li>
                <a href="http://www.gmail.com/" class="iframe" title="Gmail">Gmail</a>
            </li>
        </ul>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:04:34.410

原因是 Google 正在发送“X-Frame-Options: SAMEORIGIN”响应标头。

在 [如何在 iframe 中显示 google.com？](https://stackoverflow.com/questions/8700636/how-to-show-google-com-in-an-iframe)

# scala - 在 scala varargs 中强制使用单个参数

> ID：13358705
> 
> 赞同：18
> 
> 时间：2012-11-13T10:01:46.913
> 
> 标签：scala, mockito

给定一个具有两种方法的 java 类（取自 mockito）：

```
OngoingStubbing<T> thenReturn(T value);

OngoingStubbing<T> thenReturn(T value, T... values); 
```

如果我从 scala 调用

```
....thenReturn("something") 
```

我收到一个错误：

```
Description Resource    Path    Location    Type
ambiguous reference to overloaded definition, both method thenReturn in trait OngoingStubbing of type (x$1: java.lang.Object, x$2: <repeated...>[java.lang.Object])org.mockito.stubbing.OngoingStubbing[java.lang.Object] and  method thenReturn in trait OngoingStubbing of type (x$1: java.lang.Object)org.mockito.stubbing.OngoingStubbing[java.lang.Object] match argument types (java.lang.String) 
```

我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-13T13:27:03.583

这是一个已知的 Scala-Java 互操作性问题，尽管很遗憾不在 FAQ 中。这是[描述问题的 Scala 票证](https://issues.scala-lang.org/browse/SI-2991)。本质上，当您给出单个参数时，这两种方法都适用，并且 Scala 编译器目前没有任何启发式方法来确定哪个“更具体”。[Alexey Romanov 始终使用可变参数版本](https://stackoverflow.com/a/13358823/384641)的方法是一个很好的解决方法：

```
thenReturn("something", Nil: _*) 
```

还有一个[问题遇到了与 JCommander 类似的问题](https://stackoverflow.com/questions/3313929/how-do-i-disambiguate-in-scala-between-methods-with-vararg-and-without)。那里的答案之一提供了使用结构类型的巧妙解决方法。这种方法将在幕后使用反射，所以你可能想也可能不想去那个方向。对于您的用例，它看起来像：

```
type useSingleArgVersion = { def thenReturn(value: AnyRef): OngoingStubbing }
(...).asInstanceOf[useSingleArgVersion].thenReturn("something") 
```

最后，有一个[类似的问题遇到了 mokito 的类似问题](https://stackoverflow.com/questions/2159248/spurious-ambiguous-reference-error-in-scala-2-7-7-compiler-interpreter)。它并没有真正提供任何解决方法，但它确实更详细地描述了问题，如果您对发生这种情况的原因感兴趣的话。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-13T10:10:42.153

如果调用可变参数版本是可以接受的，

```
thenReturn("something", Nil: _*) 
```

现在想不出一种方法来调用没有可变参数的方法。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-01-12T06:05:14.377

这些答案都是错误的问题。差异是微妙的，但这与[链接票证](https://issues.scala-lang.org/browse/SI-2991)中的问题不同。那确实需要不合理的体操来调用非可变参数方法。对于这一点，以下就足够了。

```
thenReturn[String]("something") 
```

或者，如果您出于某种原因不想这样做，则不需要类型别名和强制转换。您可以直接使用结构类型归属。

```
(this: { def thenReturn[T](s: T): OngoingStubbing[T] }).thenReturn("something") 
```

这里的问题是重载和多态交叉处的类型推断——一种方法更具体，但 scalac 不知道是哪一种。由于重载和元组转换之间的相互作用，SI-2991 中的问题是真正的歧义——两者都不是更具体的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-11-30T10:22:38.293

假设其他人在遇到`overloaded method value thenReturn with alternatives`错误时会发现这个问题，我也想分享我的解决方案。

代替

`when(field.getValue(isA(classOf[Record]))).thenReturn(value)`

我用

`doReturn(value).when(field).getValue(isA(classOf[Record]))`

这解决了我的情况的歧义。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-13T10:08:54.807

解决方法很简单：

```
OngoingStubbing<T> thenReturn(T value);

OngoingStubbing<T> thenReturn(T value1, T valu2, T... values); 
```

没有“可变参数必须为非空”功能。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-28T18:35:54.623

我尝试了史蒂夫的解决方案并得到了一个巨大的编译器错误，包括：

```
scala.tools.nsc.symtab.Types$TypeError: type mismatch;
 found   : scala.reflect.Manifest[Nothing]
 required: scala.reflect.ClassManifest[B]
Note: Nothing <: B, but trait ClassManifest is invariant in type T.
You may wish to investigate a wildcard type such as `_ <: B`. (SLS 3.2.10) 
```

我能够使它与类似的东西一起工作：

```
thenReturn("something", Seq.empty[Object]: _*) 
```

# php - 个人资料页面链接，如 Facebook 个人资料中的链接

> ID：13358709
> 
> 赞同：-1
> 
> 时间：2012-11-13T10:02:05.063
> 
> 标签：php, facebook, user-profile

任何人都可以帮助我设置个人资料页面，就像在 facebook 个人资料页面中一样

例如：www.facebook.com/username

我想设置我的网站地址/用户名。是否可以在 php.ini 中设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T10:04:52.730

使用 .htaccess，一个非常简单的用法可能是：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-s 
RewriteCond %{REQUEST_FILENAME} !-l
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^./(.*)/$ index.php?username=$1 [L] 
```

比如果该人键入[http://www.example.com/nobody/](http://www.example.com/nobody/) 将`$_GET['username']`填充`nobody`

看看[这个初学者](http://www.freewebmasterhelp.com/tutorials/htaccess/)教程`.htaccess`

# javascript - http://mega.co.nz/ 使用什么 UI 框架？

> ID：13358712
> 
> 赞同：5
> 
> 时间：2012-11-13T10:02:25.180
> 
> 标签：javascript, frameworks, web

我对[http://mega.co.nz/](http://mega.co.nz/)使用的框架很感兴趣。特别是瞬时页面/部分转换，带有 :/#/pagename 之类的 url 和平滑的转换效果。表单输入处理也很巧妙。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T10:11:34.347

主干 jQuery，使用 requirejs 加载并使用 r.js 在 main.js 中编译。它使用 lodash 代替 underscore.js。

还使用了这些 jquery 插件：jquery.easing、jquery.jscrollpane、jquery.mousewheel、jquery-validate、jquery-placeholder。

滚动功能是使用[jScrollPane](http://www.kelvinluck.com/assets/jquery/jScrollPane/jScrollPane.html)实现的。

# c# - 想要显示未插入数据库的日期

> ID：13358715
> 
> 赞同：0
> 
> 时间：2012-11-13T10:02:31.927
> 
> 标签：c#, mysql, crystal-reports

我正在从 Mysql 数据库中检索数据，查询是这样的：

```
SELECT
DATE(cap_newspaper_page.insertDate) AS _Date,
count(*) AS Image_Captured
FROM
cap_newspaper_page
WHERE 
cap_newspaper_page.insertDate BETWEEN '2012-11-01' AND '2012-11-13'
GROUP BY
DATE(cap_newspaper_page.insertDate)
ORDER BY
DATE(cap_newspaper_page.insertDate) 
```

数据显示为 ![在此处输入图像描述](../Images/5e3148def54a57cf3e5bb6bd6078f7f8.png)

但我也想显示未插入数据库的 Null 值。像 2012-11-03、2012-11-04、2012-11-09、2012-11-11 没有插入数据库中，但我想将它们显示为 Null 或 0。喜欢

1.  2012-11-01 581
2.  2012-11-02 587
3.  2012-11-03 0/无
4.  2012-11-04 0/无
5.  2012-11-05 752
6.  2012-11-06 690
7.  2012-11-07 495
8.  2012-11-08 623
9.  2012-11-09 0/无
10.  2012-11-10 921
11.  2012-11-11 0/无
12.  2012-11-12 755

有任何想法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T10:12:49.510

我假设您的日期在从数据库中读取后处于某种数据结构中。让我们假设它可以是一个数组，你可以使用这样的东西（只是一个例子）：

```
DateTime[] dts = new DateTime[4];
dts[0] = DateTime.Now.AddDays(-15);
dts[1] = DateTime.Now.AddDays(-4);
dts[2] = DateTime.Now.AddDays(1);
dts[3] = DateTime.Now.AddDays(4);

DateTime dtMax = dts.Max();
DateTime dtMin = dts.Min();
string str = string.Empty;
for (DateTime i = dtMin; i <= dtMax; i = i.AddDays(1))
{
     str += i.ToString("MM.dd.yyyy");
     str += Environment.NewLine;
} 
```

# jsp - 如何在jsp中创建svg文件？

> ID：13358716
> 
> 赞同：0
> 
> 时间：2012-11-13T10:02:37.737
> 
> 标签：jsp, svg

我正在尝试创建将创建 svg 图形文件的 jsp 页面。基于 jsp 页面和 svg 的各种示例，我提供了以下内容：

```
<?xml version="1.0" encoding="UTF-8"?> 

<%@ page language="java" contentType="image/svg+xml; charset=UTF-8;"    pageEncoding="UTF-8"%>

<%
response.addHeader(
        "Content-Disposition","attachment; filename=blob3" );
%>
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="140" width="140" viewBox="0 0 14 14">
  <circle cx="7" cy="7" r="6" fill="blue" />
</svg> 
```

但它不工作。它允许我下载 blob3.svg 文件，但它是空文件。

谁能给我提示，我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T10:08:05.537

我认为您的 Content-Disposition 导致下载。

这是一个为我工作多年的完整示例：

```
<%@ page
    import = "com.spectotechnologies.util.XML"
    import = "com.spectotechnologies.website.systems.reports.helper.Report"
    import = "com.spectotechnologies.website.systems.helper.MeasurePoint"
    import = "com.spectotechnologies.website.systems.reports.helper.ReportPeriod"
    import = "com.spectotechnologies.website.systems.reports.helper.ReportField"
    import = "java.sql.Date"
    import = "java.text.NumberFormat"
    import = "java.text.SimpleDateFormat"

    contentType = "image/svg+xml"
%>
<jsp:useBean id="report" scope="request" class="com.spectotechnologies.website.systems.reports.helper.Report" />
<%
    Integer iACSSystemKey;
    int nTotal;

    int nTotalLength;
    int nPeriodLength;
    int nMeasuresQuantity;

    nTotalLength = (int)(report.getFinalDate().getTime() - report.getInitialDate().getTime());
    nPeriodLength = nTotalLength / report.getPeriodsCount();

    nMeasuresQuantity = 0;

    for(nTotal = 0;nTotal < report.getFooter().getFieldsCount();nTotal++)
    {
        nMeasuresQuantity = nMeasuresQuantity + report.getFooter().getField(nTotal).getValuesCount();
    }
%>
<% 
    MeasurePoint oMeasurePoint;
    ReportPeriod oPeriod;
    ReportField oField;
    String sMeasurePointTag;
    String sMeasurePointsHeader;
    String sDateHeader;
    ReportPeriod oFooter;
    String sRowColor = "#E9E9E9";

    String sDate = new String("");

    int nMeasurePoints, nMeasurePoint;
    int nPeriods, nPeriod;
    int nFields, nField;

    SimpleDateFormat oDateFormat;
    NumberFormat oValueFormat = NumberFormat.getInstance();

    String[] sCurvesColors = { "blue", "red", "green", "violet", "brown", "violet", "orange", "yellow", "gray", "gray", "gray", "gray", "gray", "gray", "gray", "gray", "gray", "gray", "gray", "gray", "gray", "gray", "gray", "gray", "gray", "gray", "gray", "gray", "gray", "gray" };
    String sColor;

    oFooter = report.getFooter();
%>

<%
    int nTotalWidth = 1020;
    int nTotalHeight = 450;
    int nBorder = 5;

    int nLegendWidth = 140;
    int nLegendHeight = 300;
    int nLegendX = nTotalWidth - 2 * nBorder - nLegendWidth;
    int nLegendY = 40;

    int nGraphicWidth = 750;
    int nGraphicHeight = 300;
    int nGraphicX = 65;
    int nGraphicY = 40;

    double dMinimumLeftScale = 0;
    double dMaximumLeftScale = 60;
    int nLeftScaleDigits = 0;

    double dMinimumRightScale = 0;
    double dMaximumRightScale = 100;
    int nRightScaleDigits = 0;

    String sLeftScaleTitle = "";
    String sRightScaleTitle = "";
%>

<svg width="<%= nTotalWidth %>" height="<%= nTotalHeight %>" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">

<!-- External border of the graphic -->
<rect x="<%= nBorder %>" y="<%= nBorder %>" width="<%= (nTotalWidth - (2 * nBorder)) %>" height="<%= (nTotalHeight - (2 * nBorder)) %>" fill="white" stroke="black" stroke-width="1" stroke-opacity="1" shape-rendering="crispEdges" />

<!-- Main title -->
<%
    oDateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
%>
<text x="<%= (nGraphicX + nGraphicWidth / 2) %>" y="20" style="font-family: sans-serif; font-weight: bold; font-size: 10px;" text-anchor="middle">R&#233;sultats du <%= oDateFormat.format(report.getInitialDate()) %> au <%= oDateFormat.format(report.getFinalDate()) %></text>

<!-- Legend -->
<rect x="<%= nLegendX %>" y="<%= nLegendY %>" width="<%= nLegendWidth %>" height="<%= nLegendHeight %>" fill="white" stroke="black" stroke-width="1" stroke-opacity="1" shape-rendering="crispEdges" />
<text x="<%= (nLegendX + nLegendWidth / 2)  %>" y="<%= (nLegendY + 15) %>" style="font-family: sans-serif; font-weight: bold; font-size: 10px;" text-anchor="middle">L&#233;gende</text>

<%
    nMeasurePoints = report.getMeasurePointsCount();
    for(nMeasurePoint = 0;nMeasurePoint < nMeasurePoints;nMeasurePoint++)
    {
        sColor = sCurvesColors[nMeasurePoint];

        oMeasurePoint = report.getMeasurePoint(nMeasurePoint);
        if(oMeasurePoint.getUnit().length() > 0)
        {
            sMeasurePointTag = new String(oMeasurePoint.getName() + " (" + oMeasurePoint.getUnit() + ")");
        }
        else
        {
            sMeasurePointTag = oMeasurePoint.getName();
        }

        // Set scales from inputs unit
        if((sLeftScaleTitle.compareTo(oMeasurePoint.getUnit()) != 0) && (sRightScaleTitle.compareTo(oMeasurePoint.getUnit()) != 0))
        {
            if(sLeftScaleTitle.length() == 0)
            {
                sLeftScaleTitle = oMeasurePoint.getUnit();
                dMinimumLeftScale = oFooter.getField(nMeasurePoint).getMinimum();
                dMaximumLeftScale = oFooter.getField(nMeasurePoint).getMaximum();
                nLeftScaleDigits = oMeasurePoint.getValuePrecision();
            }
            else if(sRightScaleTitle.length() == 0)
            {
                sRightScaleTitle = oMeasurePoint.getUnit();
                dMinimumRightScale = oFooter.getField(nMeasurePoint).getMinimum();
                dMaximumRightScale = oFooter.getField(nMeasurePoint).getMaximum();
                nRightScaleDigits = oMeasurePoint.getValuePrecision();
            }
        }

        // Set scales minimum and maximum
        if(sLeftScaleTitle.compareTo(oMeasurePoint.getUnit()) == 0)
        {
            if(dMinimumLeftScale > oFooter.getField(nMeasurePoint).getMinimum())
            {
                dMinimumLeftScale = oFooter.getField(nMeasurePoint).getMinimum();
            }

            if(dMaximumLeftScale < oFooter.getField(nMeasurePoint).getMaximum())
            {
                dMaximumLeftScale = oFooter.getField(nMeasurePoint).getMaximum();
            }
        }
        else if(sRightScaleTitle.compareTo(oMeasurePoint.getUnit()) == 0)
        {
            if(dMinimumRightScale > oFooter.getField(nMeasurePoint).getMinimum())
            {
                dMinimumRightScale = oFooter.getField(nMeasurePoint).getMinimum();
            }

            if(dMaximumRightScale < oFooter.getField(nMeasurePoint).getMaximum())
            {
                dMaximumRightScale = oFooter.getField(nMeasurePoint).getMaximum();
            }
        }
%>
    <circle cx="<%= nLegendX + 10 %>" cy="<%= (nLegendY + 42 + nMeasurePoint * 15) %>" r="2" fill="<%= sColor %>" />
    <text x="<%= (nLegendX + 20)  %>" y="<%= (nLegendY + 45 + nMeasurePoint * 15) %>" style="font-family: sans-serif; font-weight: bold; font-size: 10px;"><%= XML.encode(sMeasurePointTag) %></text>
<%
    }
%>

<!-- Graphic -->
<rect x="<%= nGraphicX  %>" y="<%= nGraphicY %>" width="<%= nGraphicWidth %>" height="<%= nGraphicHeight %>" fill="white" stroke="black" stroke-width="1" stroke-opacity="1" shape-rendering="crispEdges" />

<!-- Left scale -->
<defs>
    <path id="leftScaleTitle" d="M <%= (nGraphicX - 40) %> <%= (nGraphicY + nGraphicHeight) %> L <%= (nGraphicX - 40) %> <%= nGraphicY %>" />
    <path id="rightScaleTitle" d="M <%= (nGraphicX + nGraphicWidth + 50) %> <%= (nGraphicY + nGraphicHeight) %> L <%= (nGraphicX + nGraphicWidth + 50) %> <%= nGraphicY %>" />
</defs>
<text style="font-family: sans-serif; font-weight: bold; font-size: 12pt;">
    <textPath xlink:href="#leftScaleTitle" text-anchor="middle" startOffset="50%"><%= XML.encode(sLeftScaleTitle) %></textPath>
</text>

<%
    int nY;
    int nLabel;
    int nLabels = 10;
    String sLabel;

    NumberFormat oLabelFormat = NumberFormat.getInstance();

    oLabelFormat.setMinimumFractionDigits(nLeftScaleDigits);
    oLabelFormat.setMaximumFractionDigits(nLeftScaleDigits);

    for(nLabel = 0;nLabel <= nLabels;nLabel++)
    {
        nY = nGraphicY + nGraphicHeight - ((nGraphicHeight * nLabel) / nLabels);
        sLabel = oLabelFormat.format(dMinimumLeftScale + ((dMaximumLeftScale - dMinimumLeftScale) / nLabels) * nLabel);
%>
    <line x1="<%= (nGraphicX - 5) %>" y1="<%= nY %>" x2="<%= nGraphicX %>" y2="<%= nY %>" stroke="black" stroke-width="1" stroke-linecap="square" stroke-opacity="1" shape-rendering="crispEdges" />
    <text x="<%= (nGraphicX - 10) %>" y="<%= nY + 3 %>" style="font-family: sans-serif; font-size: 9px;" text-anchor="end"><%= sLabel %></text>
    <line x1="<%= nGraphicX %>" y1="<%= nY %>" x2="<%= (nGraphicX + nGraphicWidth) %>" y2="<%= nY %>" stroke="black" stroke-width="1" stroke-linecap="square" stroke-opacity="0.3" shape-rendering="crispEdges" stroke-dasharray="5, 5" />
<%
    }
%>

<!-- Right scale -->
<%
    if(!sRightScaleTitle.isEmpty())
    {
%>
    <text style="font-family: sans-serif; font-weight: bold; font-size: 12pt;">
        <textPath xlink:href="#rightScaleTitle" text-anchor="middle" startOffset="50%"><%= XML.encode(sRightScaleTitle) %></textPath>
    </text>

<%
        nLabels = 10;

        oLabelFormat.setMinimumFractionDigits(nRightScaleDigits);
        oLabelFormat.setMaximumFractionDigits(nRightScaleDigits);

        for(nLabel = 0;nLabel <= nLabels;nLabel++)
        {
            nY = nGraphicY + nGraphicHeight - ((nGraphicHeight * nLabel) / nLabels);
            sLabel = oLabelFormat.format(dMinimumRightScale + ((dMaximumRightScale - dMinimumRightScale) / nLabels) * nLabel);
%>
        <line x1="<%= (nGraphicX + nGraphicWidth) %>" y1="<%= nY %>" x2="<%= (nGraphicX + nGraphicWidth + 5) %>" y2="<%= nY %>" stroke="black" stroke-width="1" stroke-linecap="square" stroke-opacity="1" shape-rendering="crispEdges" />
        <text x="<%= (nGraphicX + nGraphicWidth + 35) %>" y="<%= nY + 3 %>" style="font-family: sans-serif; font-size: 9px;" text-anchor="end"><%= sLabel %></text>
        <line x1="<%= nGraphicX %>" y1="<%= nY %>" x2="<%= (nGraphicX + nGraphicWidth) %>" y2="<%= nY %>" stroke="black" stroke-width="1" stroke-linecap="square" stroke-opacity="0.3" shape-rendering="crispEdges" stroke-dasharray="5, 5" />
<%
        }
    }
%>

<!-- Bottom scale -->
<text x="<%= (nGraphicX + nGraphicWidth / 2) %>" y="<%= (nGraphicY + nGraphicHeight + 80) %>" style="font-family: sans-serif; font-weight: bold; font-size: 12px;" text-anchor="middle">Temps</text>

<%
    int nX;
    String sLabelDate = "";
    String sLabelHour = "";
    String sLastLabelDate = "";

    nLabels = report.getPeriodsCount();

    int nLabelDelta = nLabels / 20;

    for(nLabel = 0;nLabel <= nLabels;nLabel+=nLabelDelta)
    {
        nX = nGraphicX + ((nLabel * nGraphicWidth) / nLabels);

        if(nLabel < report.getPeriodsCount())
        {
            oPeriod = report.getPeriod(nLabel);

            oDateFormat = new SimpleDateFormat("yyyy-MM-dd");
            sLabelDate = oDateFormat.format(oPeriod.getInitialDate());

            oDateFormat = new SimpleDateFormat("HH:mm:ss");
            sLabelHour = oDateFormat.format(oPeriod.getInitialDate());
%>
    <line x1="<%= nX %>" y1="<%= (nGraphicY + nGraphicHeight) %>" x2="<%= nX %>" y2="<%= (nGraphicY + nGraphicHeight + 5) %>" stroke="black" stroke-width="1" stroke-linecap="square" stroke-opacity="1" shape-rendering="crispEdges" />
    <line x1="<%= nX %>" y1="<%= nGraphicY %>" x2="<%= nX %>" y2="<%= (nGraphicY + nGraphicHeight) %>" stroke="black" stroke-width="1" stroke-linecap="square" stroke-opacity="0.3" shape-rendering="crispEdges" stroke-dasharray="5, 5" />
<%
            if(sLastLabelDate.compareTo(sLabelDate) != 0)
            {
%>
    <defs>
        <path id="labelDate<%= nLabel %>" d="M <%= (nX - 4) %> <%= (nGraphicY + nGraphicHeight + 65) %> L <%= (nX - 4) %> 50" />
        <path id="labelHour<%= nLabel %>" d="M <%= (nX + 10) %> <%= (nGraphicY + nGraphicHeight + 65) %> L <%= (nX + 10) %> 50" />
    </defs>
    <text style="font-family: sans-serif; font-size: 9px; font-weight: bold;">
        <textPath xlink:href="#labelDate<%= nLabel %>"><%= sLabelDate %></textPath>
    </text>
    <text style="font-family: sans-serif; font-size: 9px;">
        <textPath xlink:href="#labelHour<%= nLabel %>"><%= sLabelHour %></textPath>
    </text>
<%
                sLastLabelDate = sLabelDate;
            }
            else
            {
%>
    <defs>
        <path id="labelHour<%= nLabel %>" d="M <%= (nX + 4) %> <%= (nGraphicY + nGraphicHeight + 65) %> L <%= (nX + 4) %> 50" />
    </defs>
    <text style="font-family: sans-serif; font-size: 9px;">
        <textPath xlink:href="#labelHour<%= nLabel %>"><%= sLabelHour %></textPath>
    </text>
<%
            }
        }
    }
%>

<!-- Curves -->
<%
    double dValue;

    boolean bLastPoint;
    int nLastX = 0;
    int nLastY = 0;
    double dMinimumScale = 0;
    double dMaximumScale = 0;

    nMeasurePoints = report.getMeasurePointsCount();
    for(nMeasurePoint = 0;nMeasurePoint < nMeasurePoints;nMeasurePoint++)
    {
        oMeasurePoint = report.getMeasurePoint(nMeasurePoint);

        bLastPoint = false;

        sColor = sCurvesColors[nMeasurePoint];

        if(sLeftScaleTitle.compareTo(oMeasurePoint.getUnit()) == 0)
        {
            dMinimumScale = dMinimumLeftScale;
            dMaximumScale = dMaximumLeftScale;
        }
        else if(sRightScaleTitle.compareTo(oMeasurePoint.getUnit()) == 0)
        {
            dMinimumScale = dMinimumRightScale;
            dMaximumScale = dMaximumRightScale;
        }
        else
        {
            dMinimumScale = 0;
            dMaximumScale = 1000;
        }

        nPeriods = report.getPeriodsCount();
        for(nPeriod = 0;nPeriod < nPeriods;nPeriod++)
        {
            oPeriod = report.getPeriod(nPeriod);

            oField = oPeriod.getField(nMeasurePoint);

            if(oField.getValuesCount() > 0)
            {
                nX = nGraphicX + ((nPeriod * nGraphicWidth) / nPeriods);

                dValue = oField.getAverage() - dMinimumScale;

                nY = nGraphicY + nGraphicHeight - (int)(nGraphicHeight * (dValue / (dMaximumScale - dMinimumScale)));

                if(bLastPoint)
                {
%>
    <line x1="<%= nLastX %>" y1="<%= nLastY %>" x2="<%= nX %>" y2="<%= nY %>" stroke="<%= sColor %>" />
<%
                }

                bLastPoint = true;
                nLastX = nX;
                nLastY = nY;

            }
            else
            {
                bLastPoint = false;
            }
        }
    }
%>

</svg> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T11:28:48.873

我找到了这个：

```
 <%@ taglib uri="http://svgfaces.org/tags-svg" prefix="s"%>
  <%@ taglib uri="http://svgfaces.org/tags-svg-animation" prefix="a"%>
  <%@ taglib uri="http://svgfaces.org/tags-svg-event" prefix="e"%>
  <%@ taglib uri="http://java.sun.com/jstl/core" prefix="c"%>
  <s:svg width="100%" height="100%">
      <!-- Rectangle to hide/show -->
      <c:forTokens items="1,2,3,4,5,6,7,8,9,13,14,15" delims="," var="s">
          <s:polygon x="120" y="-50" strokeWidth="1" stroke="black" fill="white" points="0,0 50,0 60,10 60,20 0,20" id="text${s}" />
      </c:forTokens>

      <!-- hide-button -->
      <s:rect x="10" y="180" id="hide" width="100" height="20" fill="red">
          <e:onclick>
              <c:forTokens items="1,2,3,4,5,6,7,8,9,13,14,15" delims="," var="s">
                  <a:move path="M0 ${s*30+100} L 0 0" id="text${s}" dur="0.4"/>

                  <a:hide id="text${s}" delay="0.4" />
              </c:forTokens>
          </e:onclick>
      </s:rect>
      <s:text x="15" text="Hide" y="195"/>

      <!-- show-button -->
      <s:rect x="10" y="200" width="100" height="20" fill="green" id="show">
          <e:onclick>

              <c:forTokens items="1,2,3,4,5,6,7,8,9,13,14,15" delims="," var="s">
                  <a:display id="text${s}" />
                  <a:move path="M0 0 L 00 ${s*30+100}" id="text${s}" dur="0.4"/>
              </c:forTokens>

          </e:onclick>
      </s:rect>
      <s:text x="15" text="Show" y="215"/>
  </s:svg> 
```

# windows - windows和一般的windows桌面是怎么绘制的？

> ID：13358724
> 
> 赞同：5
> 
> 时间：2012-11-13T10:03:09.843
> 
> 标签：windows, hook, remote-desktop, vnc

我问这个问题是因为我可能*可以*在几周内研究它，但我希望这里有一个知识渊博的人可以给我指导。

我的问题源于尝试制作[远程桌面软件](https://github.com/jasonpang/remotedesktop)（只是为了好玩）的几年挑战。起初，我发送了整个桌面的简单 PNG。然后我终于进入了一个镜像驱动程序捕获（DemoForge 的 DFMirage 镜像驱动程序），速度非常快。但这绝对不够快。我试图通过将图像分解为 16 x 16 的图块来实现缓存，这样会重复很多次，我只需要发送散列，但它通常只是有点滞后和令人失望。

我最近还有另一个涉及 API 挂钩的项目。我目前正在这个其他项目中连接 Direct3D。在 C# 中，这意味着使用像 EasyHook 这样的挂钩库，因为 C# 是一种托管语言。我想知道是否可以将其应用于我的远程桌面项目。

**问题：是否有可能，如果可能的话，我如何挂钩 gdi32.dll 以将所有桌面绘图重定向到我的应用程序？**

但是等等，不要马上回答，因为我的问题本身可能不正确。

当然，我的最终目标是将屏幕有效地从一台计算机传输到另一台计算机。现在，VNC 和大多数远程桌面产品通过将屏幕作为图像传输来工作。作为像素数据。虽然这是非常灵活的，但它绝对是尽可能慢的。

所以我的猜测是 gdi32.dll 绘制了您在桌面上看到的所有内容。这个对吗？我认为我错了，因为 DWM aero 似乎使用了更“高级”的东西。那么是什么在桌面上绘制所有内容呢？窗户是怎么画的？

我的想法是，如果我可以拦截所有绘图功能，那么我就可以超越像素级别，变得像 Windows 远程桌面一样，发送绘图命令而不是实际像素。

如果我完全错了，那么远程桌面如何“知道”如何发送这些原始绘图命令？文档说远程桌面有一个“底层渲染引擎”，可以“理解”屏幕上的这些原始绘图命令，但**我怎么能得到它呢**？

我正在寻找一个答案，它可以让我在这个图形级别上对 Windows 内部有更大的了解，以及如何实现我的目标的方向（如果它甚至是现实的）。

# sql-server - READ_COMMITTED_SNAPSHOT 和 SNAPSHOT 隔离中的共享锁

> ID：13358728
> 
> 赞同：1
> 
> 时间：2012-11-13T10:03:17.297
> 
> 标签：sql-server, sql-server-2008, read-committed-snapshot, snapshot-isolation

我在微软的网站上读过 [http://msdn.microsoft.com/en-us/library/ms173763.aspx](http://msdn.microsoft.com/en-us/library/ms173763.aspx)

Sql Server 在读取数据时不请求锁，除非正在恢复数据库。

这是否意味着使用 READ_COMMITTED_SNAPSHOT/SNAPSHOT ISOLATION 的 Sql Server 根本不使用共享锁？这怎么可能？

例如，如果有 2 笔交易。第一个事务 T1 想要更新一些行。第二个事务 T2 开始读取同一行（此事务将他复制到某个输出缓冲区、响应缓冲区或在 Sql Server 中调用的任何内容）。同时事务 T1 开始更新该行（它首先创建了版本化行）。

事务T2是否有可能读取未提交的数据？请记住，事务 T2 在 T1 进行更新之前开始复制该行，因此该行上没有排他锁。

这种情况是否可能发生？如果在复制数据期间不对该行设置共享锁，如何避免这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T10:30:08.833

除了逻辑锁之外，还有物理[锁存器](http://sqlserverpedia.com/wiki/Latches_-_Introduction)来保护数据库结构（特别是在本例中为页面）。锁存器保护任何更改（位的修改），与隔离级别无关。所以即使 T1 没有获取锁，它仍然需要在它读取的页面上获取一个共享锁存器，否则它将成为对其读取的结构进行低级别并发修改的牺牲品。只有在获得页独占锁存器时，T2 才能修改包含它修改的行的页。因此，T1 只能在 T2 修改之前（因此该行是 T1 想要的行）或在 T2 完成对该行的修改之后（现在 T1 必须在[版本存储](http://msdn.microsoft.com/en-us/library/ms175492%28v=sql.105%29.aspx)）。

所有隔离级别都必须遵守锁存协议，包括未提交的读取和版本化读取（即快照和朋友）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T10:18:11.150

> 这是否意味着使用 READ_COMMITTED_SNAPSHOT/SNAPSHOT ISOLATION 的 Sql Server 根本不使用共享锁？这怎么可能？

这是可能的，因为 SQL Server 正在从 SNAPSHOT 中读取，而这根本不会经历*任何*更改。在当前事务开始时，它已经**冻结**在数据库的状态，而忽略其他进程中未提交的事务。这是通过 SQL Server在**tempdb中保留记录的****快照**（[行版本化](http://msdn.microsoft.com/en-us/library/ms189050%28v=sql.105%29.aspx)）副本以供事务引用来完成的，让**当前**正在进行的数据/索引页面得到更改。

 ****> 事务T2是否有可能读取未提交的数据？请记住，事务 T2 在 T1 进行更新之前开始复制该行，因此该行上没有排他锁。

上面的叙述已经说明了这一点。但是为了说明（简化）：

**场景一：**

```
T1: begin tran (implicit/explicit)
T1: read value (4)
T2: read value (4) -- *
T1: update value to (8)

* - This is the committed value at the time the T2 transaction started 
```

**场景二：**

```
T1: begin tran (implicit/explicit)
T1: read value (4)
T1: update value to (8)
     version of the row with the value (4) is made
T2: read value (4) -- * from the versioned row
T1: commit

* - (4) is [still] the *committed* value at the time the T2 transaction started 
```****

# python - 用于统计数据的 html 输出的优缺点

> ID：13358729
> 
> 赞同：0
> 
> 时间：2012-11-13T10:03:22.413
> 
> 标签：python, html, output, tabular

我正在使用 Python3 从语言语料库中计算一些统计数据。到目前为止，我将结果导出到 csv 文件或直接在 shell 上。几天前我开始学习如何将数据输出到 html-tables。我必须说我真的很喜欢它，它处理了单元格和 unicode 的完美高度/宽度，您可以将颜色应用于不同的值。虽然我认为在处理大数据或表时存在一些问题。

无论如何，我的问题是，我不确定是否应该继续朝这个方向发展并将结果输出到 html。在这个领域有经验的人可以帮助我了解使用 html 作为输出的利弊吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T10:05:47.020

为什么不两者都做？将您的数据以 CSV 格式提供（用于简单导出到脚本等）并提供经过修饰的 HTML 版本。

在某个阶段，您可能想要（比如说）一个合适的 Excel 工作表、PDF 等。所以我会强制将数据生成与渲染分开。让你的生成器返回一个抽象渲染器可以使用的结构，你的具体实现将呈现 CSV、PDF、HTML 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T11:00:38.517

该问题列出了 HTML 格式的一些好处。仅这些就足以将其用作一种输出格式。使用这种方式，您*不能*轻松地使用 HTML 格式做的事情并不重要，因为您可以根据需要使用其他格式。

好处包括合理的默认渲染，可以使用 CSS 以多种方式进行微调，可能使用备用样式表（现在甚至被 IE 支持）。您还可以包含链接。

在没有脚本的情况下，您在 HTML 中不能做的是计算、排序、重新排序，诸如此类。但是它们可以通过 JavaScript 添加——不是微不足道的，而是可行的。

大型表格存在技术难题：默认情况下，浏览器只有在获取、解析和处理整个表格后才会开始显示表格中的任何内容。这可能会导致几秒钟的延迟。解决此问题的一种方法是使用在表格列上`table-layout: fixed`设置特定宽度的固定布局（`em``ch`

另一个困难是坏的换行符。使用 CSS（或 HTML）很容易解决这个问题，但作者经常忽略这个问题，导致例如像“10 m”这样的单元格内容被分成两行。

在 HTML 中格式化统计数据的其他常见问题包括：

*   未将数字字段向右对齐。
*   使用衬线字体。
*   使用并非所有数字都具有相同宽度的字体。
*   使用不明显的连字符“-”插入正确的 Unicode 减去“-”（U+2212, `&minus;`）。
*   没有以某种合理的方式指示缺失值，使一些单元格为空。（浏览器可能会以奇怪的方式处理空单元格。）
*   水平填充不足，使单元格内容（几乎）命中单元格边框或单元格背景边缘。

此类问题有很好且相当简单的解决方案，因此这只是在使用 HTML 作为输出格式时需要注意的一点，而不是反对它的论据。

# .htaccess - Htaccess 重写规则 - 如何做 (.*) 但如果它是某个单词则不是？

> ID：13358734
> 
> 赞同：1
> 
> 时间：2012-11-13T10:03:55.433
> 
> 标签：.htaccess, unix, mod-rewrite

我在我的 .htaccess 中有这个运行：

> `RewriteRule ^(.*)/videos/(.*) vid.php?a=$1&b=$2 [NC,L]`

工作正常，除了我有这个文件夹：/images/videos/ 其中有图像。

我如何修改该 RewriteRule 以便它捕获第一个 (.*) 中的所有内容，除了“图像”？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T10:07:51.930

我解决了

```
RewriteRule ^(?!images)(.*)/videos/(.*)/ vid.php?a=$1 
```

?!images 是负前瞻的东西。

# android - 在 Eclipse 中调试 Android 框架

> ID：13358735
> 
> 赞同：12
> 
> 时间：2012-11-13T10:04:15.020
> 
> 标签：android, android-source, android-framework

我正在做一个项目，我正在对 android 框架源进行更改。在 Eclipse 中执行此操作并能够进行调试的最佳方法是什么？我已经看到在 Eclipse 中附加 android 源代码的帖子，但那是“标准”源代码，而不是我自己的版本。

目前我只是在文本编辑器中更改框架并每次通过命令行构建，从命令行运行模拟器并启动 adb logcat 会话以查看是否没有任何异常，但必须有另一个（更高效/可行）的方式来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T11:46:53.813

[您可以在此处](http://source.android.com/source/using-eclipse.html)找到的官方文档中解释了如何附加调试器。在我的情况下，步骤不同（Eclipse 3.7.2 和最后一个 android 工具）：

1.  运行 > 调试配置...
2.  右键单击“远程 Java 应用程序”，选择“新建”。
3.  选择一个名称，即“android-debug”或任何您喜欢的名称。
4.  将“项目”设置为您的 android 项目名称。
5.  将主机设置为“localhost”，但将端口更改为 8700。
6.  单击“调试”按钮，您应该一切就绪。
7.  然后转到 DDMS 透视图并选择要调试的进程（在进程列表中选择进程，然后单击绿色错误图标）。如果你想测试你的服务，我认为这是`system_server`过程的一部分。
8.  现在您可以切换到调试视角。

正如文档中所述：

> 完成后，您应该会看到一个线程列表；如果您选择一个并中断它（通过单击“暂停”图标），它应该显示堆栈跟踪、源文件和执行所在的行。断点和诸如此类的东西应该都可以工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-06-25T21:04:02.743

对我有用的是使用 eclipse 来编辑/浏览 AOSP 代码，但使用终端来构建 AOSP 代码。请检查[调试 Android 框架服务](http://apienthusiast.blogspot.com/2014/06/debugging-android-java-framework.html)。本博客介绍了如何设置不会破坏 AOSP 构建的 eclipse 项目，然后使用该项目进行调试。与前面的答案描述的非常相似，但使用了一个影子文件夹，以便 eclipse 构建工件不会破坏 AOSP 构建。

# php - 初始 Symfony2 安装中没有样式或图像？

> ID：13358737
> 
> 赞同：2
> 
> 时间：2012-11-13T10:04:17.983
> 
> 标签：php, image, symfony, styles

我一直在玩 Symfony，但现在出于某种原因，每当我设置一个新项目时，不再加载默认样式和图像。到底是怎么回事？

严格按照[说明](http://symfony.com/doc/current/book/installation.html)执行安装步骤。我使用了 composer.phar 方法并正确设置了权限。

这是我的无样式演示页面的屏幕截图：

![在此处输入图像描述](../Images/91c33cda0fb6729a58bf557cf8020e5b.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-13T12:57:07.757

如果您按照 1 接 1 的说明进行操作，则不会安装您的资产...

`php composer.phar update`当您将提到的附加内容添加到 composer.json 时，您可以做到这一点

```
"extra": {
    "symfony-app-dir": "app",
    "symfony-web-dir": "web",
    "symfony-assets-install": "symlink"
} 
```

或手动通过

```
php app/console assets:install web 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-30T03:57:50.470

你可以通过运行来做到这一点

```
php app/console assets:install web
php app/console cache:clear 
```

最后，重新运行您的应用程序

```
 php app/console server:run 
```

# c# - HP Quality Center 11.0 连接错误

> ID：13358738
> 
> 赞同：1
> 
> 时间：2012-11-13T10:04:22.817
> 
> 标签：c#, .net

我正在尝试通过使用 C# 语言的 Windows 控制台应用程序连接到 HP quality center 11.0。我添加了对 dll OTAClient.dll 的引用，并使用 TDAPIOLELib 添加了命名空间引用；（对 dll 的引用没有发生，所以我使用命令 regsvr32 C:\OTAClient.dll 手动注册了 dll），之后添加了 dll。

当我使用下面提到的代码运行程序时，我得到错误 Error -> COMException was unhandled。服务器抛出异常。（来自 HRESULT 的异常：0x80010105 (RPC_E_SERVERFAULT)）

代码 ：

```
TDConnection qctd = new TDConnection();
qctd.InitConnectionEx("http://localhost:8080/qcbin/"); 
```

我在第二行得到了错误。HP 质量中心托管在 Windows Web Server 2008 r2（64 位操作系统）上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-24T07:00:58.503

从您的 qc 实例的插件下载 TDClient.exe 并安装它。这将在执行它的机器上加载并注册运行时所需的所有库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T05:59:35.177

这一定是抛出的异常，因为您的 DLL 没有被正确引用。

如果已被引用，请尝试以下代码来创建连接对象

```
TDConnection qctd = CreateObject("TDApiOle80.TDConnection");
qctd.InitConnectionEx("http://localhost:8080/qcbin/"); 
```

# dynamics-crm-2011 - 将实体记录设置为活动

> ID：13358740
> 
> 赞同：0
> 
> 时间：2012-11-13T10:04:24.687
> 
> 标签：dynamics-crm-2011

有很多关于如何将记录设置为非活动的示例，但是如何将其设置为活动？

我猜你只是对 State 和 Status 选项集使用不同的值，但它们是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:18:59.303

我找到了答案。

只需使用此处的正确值替换状态和状态值：

[http://msdn.microsoft.com/en-us/library/bb890228.aspx](http://msdn.microsoft.com/en-us/library/bb890228.aspx)

这段代码为进程使用了​​一个新线程，这并不总是必要的，但你明白了。

```
ThreadPool.QueueUserWorkItem(new WaitCallback(SetState), (object)new SetStateThreadRequest()
{
    proxy = proxy,
    Request = new SetStateRequest()
    {
        EntityMoniker = new EntityReference(Entity, entity.Id),
        State = new OptionSetValue(0), // <== 0 = Active, 1 = Inactive
        Status = new OptionSetValue(1) // <== 1 = Active, 2 = Inactive (some use -1)
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T10:22:24.977

激活 Account 实体的示例：

```
Account account = new Account();

          // ...

          SetStateRequest req = new SetStateRequest();

          req.EntityMoniker = new EntityReference(Account.EntityLogicalName, account.Id);
          req.State = new OptionSetValue(0);
          req.Status = new OptionSetValue(1);

          service.Execute(req); 
```

有关状态和状态代码，请检查[MSDN 上的 Account Entity OptionSet Attribute Metadata](http://msdn.microsoft.com/en-us/library/gg328014.aspx)。

# php - 使用 PHP 从 JSON 获取数据

> ID：13358747
> 
> 赞同：0
> 
> 时间：2012-11-13T10:04:47.833
> 
> 标签：php, html, json

我在这里有这段代码：

```
<?php 

$url = "http://otter.topsy.com/search.json?q=debt%20management&window=a";
$jsonfile = file_get_contents($url);
$obj = json_decode($jsonfile);

echo $obj->response[0]->list[0]->trackback_permalink;

?> 
```

*注意：我已从 URL 中取出我的 API 密钥。

但是，它返回：

> ***注意：****尝试在第 23 行的 C:\xampp\htdocs\topsyAPI\index.php 中获取非对象的属性*
> 
> ***注意：****尝试在第 23 行的 C:\xampp\htdocs\topsyAPI\index.php 中获取非对象的属性*
> 
> ***注意：****尝试在第 23 行的 C:\xampp\htdocs\topsyAPI\index.php 中获取非对象的属性*

我尝试在 json_decode 上使用**true参数，但它仍然无法正常工作。**

这是我第一次使用 API 和 JSON，所以我对它非常陌生。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T10:15:56.257

正如我在评论中所写，`response`是一个对象，而不是一个数组。参考应该是

```
$obj->response->list[0]->trackback_permalink 
```

*不是*

```
$obj->response[0]->list[0]->trackback_permalink 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T10:11:54.970

```
$obj->response->list[0]->trackback_permalink; 
```

我认为您的回答是对象而不是数组

# c - shutdown() 和 close() 什么都不做

> ID：13358752
> 
> 赞同：2
> 
> 时间：2012-11-13T10:04:56.257
> 
> 标签：c, sockets, shutdown

我有一台服务器正在侦听 tcp 端口。当有传入连接时，它使用`accept()`并使用`fork()`. 客户端/子进程从连接中读取一些数据并通过管道将其发送回服务器。在此之后，我想关闭连接。我曾尝试从客户端进程中使用`shutdown()`并`close()`没有太多运气。

我检查了两者的结果，`shutdown()`它们`close()`都返回 0。所以显然它们运行顺利。在两者都运行之后`shutdown()`，`close()`服务器`sigchld`从子进程接收到一个。这是在一般基础上处理的，但我更愿意在接收信号之前关闭连接。任何有关如何做到这一点的建议将不胜感激。

附带说明一下`close()`，已用于关闭整个服务器/客户端程序中不需要的文件描述符和套接字，但现在我不确定它们是否真的被关闭了。

下面是两个代码片段。首先是程序的服务器部分中的`accept()`and ：`fork()`

```
if ((client_s = accept(s, &info.addr, &addrlen)) == -1) {
    //Error handling
}
if ((info.pid = fork()) == -1) {
    //More error handling
}
else if (info.pid == 0) {
    //Closing all unneeded file descriptors

    // Set default signal handler for SIGCHLD
    signal(SIGCHLD, SIG_DFL);

    _exit(clientStatus_main(client_s, info_pipes[1]));
}
else {
    //Adding client to list of clients and closing some file descriptors.
    close(client_s);
} 
```

最后是来自函数 clientStatus_main 的代码片段：

```
//Signal handling
signal(SIGINT, client_sighandler);
signal(SIGTERM, client_sighandler);
signal(SIGKILL, client_sighandler);
signal(SIGHUP, client_sighandler);
signal(SIGCHLD, SIG_DFL);

//Read data from socket
read(socket, &status_packet.type, iLength)
//Do data handling and write back to server
write(info_pipe, &status_packet, status_packet.len)

//Close down socket
res = shutdown(socket, SHUT_RDWR);
addlog(LOG_INFO, "Result of shutdown: %i\n", res); //Write to log
res = close(socket);
addlog(LOG_INFO, "Result of close: %i\n", res);
return (iCount > 0 ? 0 : -1); 
```

有什么好主意吗？

***编辑：**在阅读了我试图`close(client_s)`从父进程中做的评论后，但它并没有解决我的问题。为清楚起见，我还在代码片段中添加了这一行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T13:00:31.997

涉及三个过程：

**客户端**：连接到父级的监听套接字。

**父**进程：侦听套接字、接受连接并将它们交给子进程的服务器进程。

**child**：通过已建立的连接与客户端对话的服务器进程。

建立的连接只存在于`the child`和之间`the client`。`The parent`无法检测客户端套接字何时从任一侧关闭。

有两种方法可以通知`the parent`正在`the child`关闭连接和终止，要么捕获`SIGCHLD`信号，要么让`the child`发送消息到`the parent`，例如`pipe`问题中提到的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T09:08:29.930

这有点尴尬，但似乎问题不在于`close()`或根本不在于`shutdown()`。Klas Lindbäck 的评论和回答让我开始思考，我进行了一些实验，发现它`SIGCHLD`被发送是因为客户端实际上在子进程关闭连接的同时关闭了连接。

所以我的解决方案受到了 Klas Lindbäck 建议的启发。子进程通过前面提到的管道发送进程 ID，父进程现在可以安全地忽略/阻止`SIGCHLD`来自该进程的发送。

# java - 同一数据上的多个轴

> ID：13358758
> 
> 赞同：3
> 
> 时间：2012-11-13T10:05:31.460
> 
> 标签：java, jfreechart

我试图在相同的数据上有两个轴。

数据是几个`DefaultTableXYDatasets`。情节是一个`XYPlot`，我有两个`XYLineAndShapeRenderers`和一个`StackedXYAreaRenderer2`。

y 值的所有数据都以米为单位，我希望一个轴以米为单位显示它，一个轴以英尺为单位显示它。现在这感觉像是一件很常见的事情，但我无法决定最明显的方法。一种可行的方法是复制数据并以英尺为单位的 y 值，然后添加另一个`NumberAxis`并完成它。

但我认为子类化`NumberAxis`或注入一些功能`NumberAxis`来缩放值会更明智。还是我应该采用第一种方法？

你怎么看？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T14:46:32.487

为避免重复数据，您可以使用该`XYPlot`方法[`mapDatasetToRangeAxes()`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/plot/XYPlot.html#mapDatasetToRangeAxes-int-java.util.List-)将数据集索引映射到轴索引列表。在下面的示例中，`meters`是主轴，相应`feet`轴的范围也相应缩放，如下[所示](https://stackoverflow.com/a/13363401/230513)。请注意，`invokeLater()`需要确保在轴发生任何变化*后*`feet`对轴进行缩放。*`meters`*

 *![图片](../Images/318e671ab4fac87d0541f08d043dd07d.png)

```
import java.awt.EventQueue;
import java.util.Arrays;
import java.util.List;
import javax.swing.JFrame;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.axis.AxisLocation;
import org.jfree.chart.axis.NumberAxis;
import org.jfree.chart.axis.ValueAxis;
import org.jfree.chart.event.AxisChangeEvent;
import org.jfree.chart.plot.XYPlot;
import org.jfree.chart.renderer.xy.XYItemRenderer;
import org.jfree.chart.renderer.xy.XYLineAndShapeRenderer;
import org.jfree.data.xy.XYDataset;
import org.jfree.data.xy.XYSeries;
import org.jfree.data.xy.XYSeriesCollection;

/**
 * @see https://stackoverflow.com/q/13358758/230513
 */
public class AxisTest {

    private static final int N = 5;
    private static final double FEET_PER_METER = 3.28084;

    private static XYDataset createDataset() {
        XYSeriesCollection data = new XYSeriesCollection();
        final XYSeries series = new XYSeries("Data");
        for (int i = -N; i < N * N; i++) {
            series.add(i, i);
        }
        data.addSeries(series);
        return data;
    }

    private JFreeChart createChart(XYDataset dataset) {
        NumberAxis meters = new NumberAxis("Meters");
        NumberAxis feet = new NumberAxis("Feet");
        ValueAxis domain = new NumberAxis();
        XYItemRenderer renderer = new XYLineAndShapeRenderer();
        XYPlot plot = new XYPlot(dataset, domain, meters, renderer);
        plot.setRangeAxis(1, feet);
        plot.setRangeAxisLocation(1, AxisLocation.BOTTOM_OR_LEFT);
        List<Integer> axes = Arrays.asList(0, 1);
        plot.mapDatasetToRangeAxes(0, axes);
        scaleRange(feet, meters);
        meters.addChangeListener((AxisChangeEvent event) -> {
            EventQueue.invokeLater(() -> {
                scaleRange(feet, meters);
            });
        });
        JFreeChart chart = new JFreeChart("Axis Test",
            JFreeChart.DEFAULT_TITLE_FONT, plot, true);
        return chart;
    }

    private void scaleRange(NumberAxis feet, NumberAxis meters) {
        feet.setRange(meters.getLowerBound() * FEET_PER_METER,
            meters.getUpperBound() * FEET_PER_METER);
    }

    private void display() {
        JFrame f = new JFrame("AxisTest");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(new ChartPanel(createChart(createDataset())));
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(() -> {
            new AxisTest().display();
        });
    }
} 
```

或者，您可以使用 a`JCheckBox`在米和英尺这两个系列之间切换，如相关[示例](https://stackoverflow.com/a/11895709/230513)所示。使用 可用的方法`XYLineAndShapeRenderer`，您可以隐藏第二个系列的线条、形状和图例。系列本身必须可见以建立轴范围。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T15:19:03.973

最终我选择了这个解决方案，它可能不是最优雅的，但它确实有效。我有第二个轴`feetAxis`，并`AxisChangeListener`在第一个轴上添加了一个名为`meterAxis`. 当`meterAxis`更改将范围设置为`feetAxis`.

我使用`SwingUtilities.invokeLater`了 ，否则缩小图表时范围会不正确，那么`feetAxis`只会从 0 变为 1。虽然没有检查原因。

```
feetAxis = new NumberAxis("Height [ft]");
metersAxis = new NumberAxis("Height [m]");
pathPlot.setRangeAxis(0, metersAxis);
pathPlot.setRangeAxis(1, feetAxis);

metersAxis.addChangeListener(new AxisChangeListener() {

   @Override
   public void axisChanged(AxisChangeEvent event) {

       SwingUtilities.invokeLater(new Runnable() {

           @Override
           public void run() {
               feetAxis.setRange(metersAxis.getLowerBound() * MetersToFeet, metersAxis.getUpperBound() * MetersToFeet);
                }
           });
       }
   }); 
```*

# android - Android Lrucache 引用/对象是否重复？

> ID：13358759
> 
> 赞同：1
> 
> 时间：2012-11-13T10:05:37.723
> 
> 标签：android, memcached, android-lru-cache

我想通过应用 Android LruCache 来提高我的应用程序速度并避免对服务器的大量调用。这是我的场景：

我创建了 2 个 LruCache 对象。

```
private LruCache<String, List<Items>> mListItemsCache;

private LruCache<String, Items> mItemsCache; 
```

mItemsCache 将保存可以通过唯一 ID 字符串检索的所有项目的缓存。另一方面，mListItemsCache 将缓存所有不同的项目列表。每个列表都是基于 mItemsCache 上的可用项目构建的。

我的问题是从 mListItemsCache 或 mItemsCache 检索到的 Item 实际上是同一个 Object 吗？

由于put（K，V），每次将数据存储到LruCache时都会重复数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T12:29:28.310

我认为需要更多代码才能给您答案：什么是项目？您如何以字节为单位来衡量项目？为什么同一个项目需要两个缓存？

我会使用一个列表（对于 mListItemsCache），其中每个字符串都是缓存对象（mItemsCache）的键。因此，每当您将项目添加到缓存 (mItemsCache) 时，将键添加到列表 (mListItemsCache) 例如：mItemsCache.put(myKey, Items); mListItemsCache.add(myKey);

# html - 如何在 html5 视频标签中使用视频链接作为源

> ID：13358761
> 
> 赞同：0
> 
> 时间：2012-11-13T10:05:39.760
> 
> 标签：html, video, youtube

谁能告诉我如何将 html5 视频标签用于 youtube 视频？我目前正在使用

```
 <video width="100%" controls="controls">
 <source src="url" type="video/mp4" />
 <source src="url" type="video/ogg" />
 Your browser does not support the video tag.
 </video> 
```

请告诉我任何解决方案，我已经检查了以下链接以获取解决方案，但无法理解

[将 Youtube 视频源显示为 HTML5 视频标签？](https://stackoverflow.com/questions/5157377/show-youtube-video-source-into-html5-video-tag?answertab=votes#tab-top)

注意：我将此代码用于移动网站。谢谢，沙鲁克

# java - java gwt multiselectionmodel禁用蓝色

> ID：13358770
> 
> 赞同：0
> 
> 时间：2012-11-13T10:06:22.640
> 
> 标签：java, css, gwt, celltable

我正在为单元格表使用多选模型。单击一行时，它会变为蓝色格式。是否可以以某种方式禁用此功能？可能在 .css 文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:22:11.577

您可以通过在构造函数中`CellTable`提供您自己的样式来更改您想要的样式。`CellTable.Resources`

# c# - c# 订购一个列表 >

> ID：13358777
> 
> 赞同：3
> 
> 时间：2012-11-13T10:06:58.490
> 
> 标签：c#, extension-methods

如何订购一个 `List<Dictionary<String,object>>`只包含字符串的对象

字典的结构如下

```
[name: mario]
[surname: rossi]
[address: xxxxxx]
[age: 40] 
```

我想按“年龄”排序这些词典的列表，你能帮帮我吗？

我试过：

```
myList.Select(x => x.OrderBy(y=>y.Value)) 
```

它给了我这个错误：该值不是字符串（好吧，我同意他的观点，它是一个对象，我必须以某种方式进行转换）但更重要的是我无法告诉“orderby”方法它必须按年龄排序

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T10:08:59.693

你想要一些类似的东西

```
var sorted = myList.OrderBy(dict => Convert.ToInt32(dict["age"])); 
```

我使用`Convert.ToInt32`了防御性的方法，因为您使用另一种数据类型的可能性很小，并且将（拆箱）转换为错误的类型会引发异常。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-13T10:08:51.067

```
myList.Sort((x,y) => ((int)x["age"]).CompareTo((int)y["age"])); 
```

或类似的：

```
myList.Sort((x, y) => Comparer.Default.Compare(x["age"], y["age"])); 
```

然而！如果您使用正确的类型而不是字典会容易得多；那么它就是：

```
myList.Sort((x,y) => x.Age.CompareTo(y.Age)); 
```

# excel - 在 64 位上构建时“找不到提供程序。它可能没有正确安装”

> ID：13358779
> 
> 赞同：2
> 
> 时间：2012-11-13T10:07:13.273
> 
> 标签：excel, 64-bit, ms-office, ado

我正在使用 ADO 连接到 EXCEL。在我的机器上安装了办公室 32 位。以下代码在使用 32 位构建时运行良好：

```
_ConnectionPtr conn;
conn->Open(connStr, "", "", NULL); 
```

连接字符串包括：

```
Provider=Microsoft.ACE.OLEDB.12.0 
```

当编译为 64 位时，我得到：“找不到提供程序。它可能没有正确安装。” （小时=-2146824582）。64位是否存在兼容性问题？我应该安装64位office吗？如果我这样做，我的代码在为 32 位构建时可以工作吗？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T11:46:44.783

解决方案：“Microsoft Access Database Engine 2010 Redistributable”。

[从http://www.microsoft.com/en-gb/download/details.aspx?id=13255](http://www.microsoft.com/en-gb/download/details.aspx?id=13255)下载“AccessDatabaseEngine_X64.exe”并运行“AccessDatabaseEngine_X64.exe /passive”。

# javascript - 使用 WebGL 渲染器的三个 js 画布纹理失去透明度（可以使用 Canvasrenderer）

> ID：13358782
> 
> 赞同：4
> 
> 时间：2012-11-13T10:07:31.273
> 
> 标签：javascript, canvas, webgl, three.js

我尝试在一个立方体上渲染一个 CircleGeometry（从相机的角度来看，我们同时展示了两者）。立方体是纯色的，圆圈有一个只有圆弧且没有背景颜色的画布。

*   如果我使用 Canvasrenderer，画布透明度还可以，并且弧只是打印。
*   如果我使用 WebGL 渲染器，整个圆圈会被页面背景颜色填充，上面只显示弧线，所以透明度会丢失。

我为此创建了一个测试：http: [//jsfiddle.net/f4u7s/6/](http://jsfiddle.net/f4u7s/6/) ，您可以在其中切换 WebGL 和 CanvasRendering 以显示问题。（寻找

```
// ------------> Switch HERE
    //renderer = new THREE.CanvasRenderer();
    renderer = new THREE.WebGLRenderer(); 
```

)

这听起来像使用 CanvasRenderer 的[three.js 纹理，但使用 WebGLRenderer](https://stackoverflow.com/questions/8936305/three-js-textures-working-with-canvasrenderer-but-show-up-as-black-with-webglre)票证显示为黑色，即使提出了解决方案 (mesh.dynamic = true)，问题仍然存在。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-13T13:55:52.490

您需要设置`transparent`为`true`.

```
plane = new THREE.Mesh(
    new THREE.CircleGeometry(50, 50),
    new THREE.MeshBasicMaterial({
        map: texture,
        transparent: true
    })
); 
```

更新小提琴：http: [//jsfiddle.net/f4u7s/10/](http://jsfiddle.net/f4u7s/10/)

# crash - DirectX 应用程序导致计算机崩溃

> ID：13358783
> 
> 赞同：2
> 
> 时间：2012-11-13T10:07:34.840
> 
> 标签：crash, directx, direct3d, directx-11, d3dx

我编写了一个 DirectX11 应用程序，该应用程序在带有 GeForce GT 555m 显卡的 Alienware 笔记本电脑上运行，所以我知道计算机支持它。

我遇到了这个奇怪的事情，如果我的笔记本电脑没有插入电源，它会在没有任何警告的情况下关闭，但是如果它插入电源，应用程序运行良好。

我试图用其他 DirectX11 应用程序来复制它，包括 DirectX 附带的示例，但是我的应用程序是唯一一个这样做的，但我使用与示例非常相似的代码。我一定错过了什么，但我不知道是什么。

这是我设置 SwapChain 和 RenderTargetView 的代码

```
ZeroMemory(&swapChainDesc, sizeof(swapChainDesc));
swapChainDesc.BufferCount = 1;
swapChainDesc.BufferDesc.Width = width;
swapChainDesc.BufferDesc.Height = height;
swapChainDesc.BufferDesc.Format = DXGI_FORMAT_R8G8B8A8_UNORM;

if(vsync) {
    swapChainDesc.BufferDesc.RefreshRate.Numerator = numerator;
    swapChainDesc.BufferDesc.RefreshRate.Denominator = denominator;
}
else {
    swapChainDesc.BufferDesc.RefreshRate.Numerator = 0;
    swapChainDesc.BufferDesc.RefreshRate.Denominator = 1;
}

swapChainDesc.BufferUsage = DXGI_USAGE_RENDER_TARGET_OUTPUT;
swapChainDesc.OutputWindow = hwnd;
swapChainDesc.SampleDesc.Count = 1;
swapChainDesc.SampleDesc.Quality = 0;

if(fullscreen) {
    swapChainDesc.Windowed = false;
}
else {
    swapChainDesc.Windowed = true;
}

swapChainDesc.BufferDesc.ScanlineOrdering = DXGI_MODE_SCANLINE_ORDER_UNSPECIFIED;
swapChainDesc.BufferDesc.Scaling = DXGI_MODE_SCALING_UNSPECIFIED;
swapChainDesc.SwapEffect = DXGI_SWAP_EFFECT_DISCARD;
swapChainDesc.Flags = 0;

D3D_FEATURE_LEVEL featureLevels[4] = { D3D_FEATURE_LEVEL_11_0, D3D_FEATURE_LEVEL_10_1, D3D_FEATURE_LEVEL_10_0, D3D_FEATURE_LEVEL_9_3, };
if (FAILED(D3D11CreateDeviceAndSwapChain(0, D3D_DRIVER_TYPE_HARDWARE, 0, 0, featureLevels, 4, D3D11_SDK_VERSION, &swapChainDesc, &swapChain, &device, &featureLevel, &deviceContext))) {
    if (!device) {
        printf("Insanity Error: Failed To Create Direct3D Device\n");
    }
    if (!swapChain) {
        printf("Insanity Error: Failed To Create Swap Chain\n");
    }
    return false;
}
else {
    switch (featureLevel) {
    case D3D_FEATURE_LEVEL_11_0:
        printf("Insanity Info: Currently Using DirectX 11.0\n");
        break;
    case D3D_FEATURE_LEVEL_10_1:
        printf("Insanity Info: Currently Using DirectX 10.1\n");
        break;
    case D3D_FEATURE_LEVEL_10_0:
        printf("Insanity Info: Currently Using DirectX 10.0\n");
        break;
    case D3D_FEATURE_LEVEL_9_3:
        printf("Insanity Info: Currently Using DirectX 9.3\n");
        break;
    default:
        printf("Insanity Info: Graphics System Unknown\n");
        break;
    }
}
if (FAILED(swapChain->GetBuffer(0, __uuidof(ID3D11Texture2D), (LPVOID*)&backBufferPtr))) {
    printf("Insanity Error: Faield To Find Back Buffer\n");
    return false;
}
if (FAILED(device->CreateRenderTargetView(backBufferPtr, 0, &renderTargetView))) {
    printf("Insanity Error: Failed To Create Render View Target\n");
    return false;
}
backBufferPtr->Release();
backBufferPtr = 0; 
```

然后这是我设置 DepthStencilState 和 RasterState 的代码

```
 ZeroMemory(&depthStencilDesc, sizeof(D3D11_DEPTH_STENCIL_DESC));
depthStencilDesc.DepthEnable = false;
depthStencilDesc.DepthWriteMask = D3D11_DEPTH_WRITE_MASK_ALL;
depthStencilDesc.DepthFunc = D3D11_COMPARISON_LESS;
depthStencilDesc.StencilEnable = true;
depthStencilDesc.StencilReadMask = 0xFF;
depthStencilDesc.StencilWriteMask = 0xFF;
depthStencilDesc.FrontFace.StencilFailOp = D3D11_STENCIL_OP_KEEP;
depthStencilDesc.FrontFace.StencilDepthFailOp = D3D11_STENCIL_OP_INCR;
depthStencilDesc.FrontFace.StencilPassOp = D3D11_STENCIL_OP_KEEP;
depthStencilDesc.FrontFace.StencilFunc = D3D11_COMPARISON_ALWAYS;
depthStencilDesc.BackFace.StencilFailOp = D3D11_STENCIL_OP_KEEP;
depthStencilDesc.BackFace.StencilDepthFailOp = D3D11_STENCIL_OP_DECR;
depthStencilDesc.BackFace.StencilPassOp = D3D11_STENCIL_OP_KEEP;
depthStencilDesc.BackFace.StencilFunc = D3D11_COMPARISON_ALWAYS;
if (FAILED(device->CreateDepthStencilState(&depthStencilDesc, &depthDisableStencilState))) {
    printf("Insanity Error: Failed To Create Depth State\n");
    return false;
}

deviceContext->OMSetDepthStencilState(depthEnableStencilState, 1);
this->enableDepthTesting = true;

ZeroMemory(&depthStencilViewDesc, sizeof(depthStencilViewDesc));
depthStencilViewDesc.Format = depthBufferDesc.Format;
depthStencilViewDesc.ViewDimension = D3D11_DSV_DIMENSION_TEXTURE2D;
depthStencilViewDesc.Texture2D.MipSlice = 0;
if (FAILED(device->CreateDepthStencilView(depthStencilBuffer, &depthStencilViewDesc, &depthStencilView))) {
    printf("Insanity Error: Failed To Create Depth View\n");
    return false;
}

rasterDesc.AntialiasedLineEnable = false;
rasterDesc.CullMode = D3D11_CULL_NONE;
rasterDesc.DepthBias = 0;
rasterDesc.DepthBiasClamp = 0.0f;
rasterDesc.DepthClipEnable = true;
rasterDesc.FillMode = D3D11_FILL_SOLID;
rasterDesc.FrontCounterClockwise = false;
rasterDesc.MultisampleEnable = false;
rasterDesc.ScissorEnable = true;
rasterDesc.SlopeScaledDepthBias = 0.0f;

if (FAILED(device->CreateRasterizerState(&rasterDesc, &rasterState))) {
    printf("Insanity Error: Failed To Create Rasterizer State\n");
    return false;
}

deviceContext->RSSetState(rasterState); 
```

如果有人对可能发生的事情有任何想法，请提供帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T22:11:55.007

尝试使用参考设备而不是硬件设备，看看问题是否再次出现。这应该有助于将驱动程序与代码隔离开来。创建设备时，请改用`D3D_DRIVER_TYPE_REFERENCE`.

# c# - Mono for Android 添加指向地图的指针

> ID：13358785
> 
> 赞同：0
> 
> 时间：2012-11-13T10:07:40.643
> 
> 标签：c#, google-maps, monodevelop, google-maps-markers

我正在使用 Mono For Android MapsAndLocationDemo 并且有一个问题。

我可以帮忙在当前地图上的某些经度和纬度点上放置一些“标记”吗？另外，当点击每个“标记”时，是否能够执行一些代码？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T11:04:26.063

您需要添加地图叠加层。[这](http://docs.xamarin.com/Android/Guides/Platform_Features/Maps_and_Location/Part_2_-_Maps_API#Adding_Overlays_to_a_Map)是一个教程

您可以实施`ItemizedOverlay`

```
class MonkeyItemizedOverlay: ItemizedOverlay
{
   List<OverlayItem> _items;

   Context context;

   public MonkeyItemizedOverlay (Drawable monkey, Context context) : base(monkey)
   {     
          this.context = context;

          // populate some sample location data for the overlay items
          _items = new List<OverlayItem>{
                  new OverlayItem (new GeoPoint ((int)40.741773E6,
                         (int)-74.004986E6), null, null),
                  new OverlayItem (new GeoPoint ((int)41.051696E6,
                         (int)-73.545667E6), null, null),
                  new OverlayItem (new GeoPoint ((int)41.311197E6,
                         (int)-72.902646E6), null, null)
          };

          BoundCenterBottom(monkey);
          Populate();
   }
} 
```

然后像这样使用它

```
var monkey = Resources.GetDrawable (Resource.Drawable.monkey);  
var monkeyOverlay = new MonkeyItemizedOverlay (monkey, Context);
map.Overlays.Add (monkeyOverlay); 
```

如果你想添加点击功能覆盖 OnTap(int)

```
protected override bool OnTap(int index)
{
    var item = _items[index];

    Toast.MakeText(context, index.ToString(), ToastLength.Short).Show();

    return true;
} 
```

# c - 使用 GCC 编译时 EXC_BAD_ACCESS，Clang 有效

> ID：13358788
> 
> 赞同：0
> 
> 时间：2012-11-13T10:07:58.357
> 
> 标签：c, erlang

首先请原谅我没有提供任何代码，但很难仅 C+P 摘录，因为错误是随机引起的。

使用 GCC 编译 C 源代码时遇到一个非常奇怪的错误。我正在为 Erlang 开发一个链接驱动程序，但我不明白是什么导致了错误。错误是这样的：

```
Program received signal EXC_BAD_ACCESS, Could not access memory.
Reason: KERN_INVALID_ADDRESS at address: 0xffffffffb012aae8
[Switching to process 7316 thread 0x1503]
ktqk_exec (query=0x13e0af00, table=0x13e00ea0) at ktqk.c:215
215   clock_t start = clock(); 
```

我正在运行用 GDB 包装的 Erlang 虚拟机，所以我可以访问内存部分。对我来说，高地址`0xffffffffb012aae8`看起来很可疑。但是，使用 Clang，一切都按预期工作，没有错误，没有段错误。我试图调查：

```
(gdb) p clock
$1 = {<text variable, no debug info>} 0x7fff85c29fd0 <clock>
(gdb) p start
$2 = 2954013712 
```

所以这个值显然没有初始化，之前就崩溃了。当我在同一个文件中设置断点时，它们会被简单地跳过。为什么一切都适用于 Clang，但不适用于 GCC？

由于 Clang 默认使用 C99 和 GCC C89，因此我必须`-std=c99`在 GCC 上包含用于编译的标志。这可能是一个潜在的来源吗？但是，当我注释掉上面的代码时，它会在下一个函数调用时失败。所以它似乎与函数调用有关。尽管如此，这一行之前的所有函数调用都很好。

一个非常奇怪的错误。有人有什么想法吗？对不起，这个相当模糊的解释，我根本不理解这个错误。

一切顺利，马丁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:48:10.287

我可以回答我自己的问题：可以在下面找到导致错误的代码：

```
...
int select = -1;

for (int p = 0; p < SIZE_KEYS; p++)
  if (parts[p] == query->count && (select == -1 || sizes[p] < sizes[select]))
    select = p;

int *index[lists[select]];
if (select != -1) {
  ...
}
... 
```

So`select`被初始化为 -1，如果有什么东西被发现了，它就会是`> 0`. 现在，在我的示例中，什么也没找到，所以`select = -1`. 将 -1 放入`lists`，结果也是`lists[select] = -1`，所以显然与 相同的内存区域`select`。然而，现在我们正在初始化一个大小为 -1 的整数指针列表。这显然是错误的。

为什么 Clang 不抱怨这个严重的错误！？

# xaml - 在 Windows 8 中使用 DLL 中的 ResourceDictionary

> ID：13358790
> 
> 赞同：3
> 
> 时间：2012-11-13T10:08:01.787
> 
> 标签：xaml, windows-8, app-store

如何使用同一个 DLL 中的 ResourceDictionary 资源？

基本上我正在尝试创建一个 UI 库，其中包含从 Page 类派生的所有类。我想将所有用户界面页面保留在同一个 DLL 中。

要查看问题，从VS2012开始，创建一个Windows 8库项目，然后添加ItemDetailed Page。现在，如果您从编辑器打开创建的页面，您将收到一些错误，例如“资源“LayoutRootStyle”无法解析”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-14T15:32:54.223

这只是 Xaml 设计器错误，因此不会阻止您的项目构建或运行 .
唯一需要的是所有 ResourceDictonary 都需要由主应用程序 App.xaml 引用（例如，通过`<ResourceDictionary Source="/<myLibraryName>/Common/StandardStyles.xaml"/>`在库中使用或创建调用 Init 方法，该方法将动态添加资源字典）。
Xaml 设计器中错误的快速解决方法是在库中复制 App.xaml/App.xaml.cs（但在运行时，主应用程序仍需要对所需的 ResourceDictionary 进行引用，因为 App.xaml将不会使用该库的内容）。
另一种可能性是在每个页面上的 ResourceDictionary 上添加一个引用，但我相信这将更加昂贵，因为它将为每个页面创建一个字典实例。

# perl - 如果零行受到影响，为什么 DBI 的 do 方法会返回“0E0”？

> ID：13358793
> 
> 赞同：22
> 
> 时间：2012-11-13T10:08:14.953
> 
> 标签：perl, dbi

我在运行类似于以下示例的代码时遇到了问题：

```
my $rows = $dbh->do('UPDATE table SET deleted=NOW() WHERE id=?', undef, $id) 
  or die $dbh->errstr;
if (!$rows) {
  # do something else
} 
```

由于[文档](http://search.cpan.org/~timb/DBI/DBI.pm#do)状态`do`返回受影响的行数，我认为这会起作用。

> 准备并执行单个语句。返回受影响或`undef`出错的行数。返回值`-1`表示行数未知、不适用或不可用。

事实证明，我错了。当我调试它时，我看到它`$rows`实际上包含 string `0E0`，这当然是一个真实的值。我进一步挖掘了文档并看到了这段代码：

> 默认的 do 方法在逻辑上类似于：
> 
> ```
>  sub do {
>       my($dbh, $statement, $attr, @bind_values) = @_;
>       my $sth = $dbh->prepare($statement, $attr) or return undef;
>       $sth->execute(@bind_values) or return undef;
>       my $rows = $sth->rows;
>       ($rows == 0) ? "0E0" : $rows; # always return true if no error
>   } 
> ```

它在那里。它返回`0E0`。我只是不明白为什么它会那样做。有人知道吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-13T10:10:12.057

这是一个真值，因此您可以将其与错误时返回的假值区分开来，但它在数值上等于零（没有警告），因此它仍然等于受影响的记录数。

```
$ perl -e'
   for (undef, "0E0", 4) {
      if ($_) {
         printf "Success: %d rows affected\n", $_;
      } else {
         print "Error!\n";
      }
   }
'
Error!
Success: 0 rows affected
Success: 4 rows affected 
```

如果`0`在没有记录受到影响的情况下成功返回，您将被迫使用 来检查错误`defined`，这远不如测试真相方便（例如`foo() or die;`）。

[其他真零](http://www.perlmonks.org/?node_id=464548)。（忽略`"0x0"`；它会发出警告。）

# ruby-on-rails - Rails 将脚本作为后台作业执行

> ID：13358805
> 
> 赞同：2
> 
> 时间：2012-11-13T10:09:04.547
> 
> 标签：ruby-on-rails, background, delay

我有一个作为独立功能实现的 ruby​​ 脚本。现在我想在我的 Rails 环境中执行这个脚本，因为它需要大量的时间处理，所以将它作为后台作业执行会增加难度。

添加delayed_job gem 后，我尝试调用以下语句：

```
delay.system("ruby my_script.rb") 
```

这是我得到的错误：

```
Completed 500 Internal Server Error in 95ms
TypeError (can't dump anonymous module: #<Module:0x007f8a9ce14dc0>):
   app/controllers/components_controller.rb:49:in `create' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T11:06:38.957

从您的控制器调用该`self.delay`方法[将不起作用](https://github.com/collectiveidea/delayed_job/issues/371)，因为 DJ 会尝试将您的控制器序列化到作业中。您最好创建一个类来处理您的任务，然后将其方法标记为异步：

```
class AsyncTask
  def run
    system('ruby my_script.rb')
  end
  handle_asynchronously :run
end 
```

在您的控制器中：

```
def create
    ...
    AsyncTask.new.run
    ...
end 
```

[请参阅自述](https://github.com/collectiveidea/delayed_job)文件的“排队作业”部分中的第二个示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T11:20:42.087

就像 Jef 所说，最好的解决方案是创建一个自定义作业。Jef 的答案的问题在于它的语法（据我所知）不正确，这是他的工作处理单个系统命令，而以下内容将允许您进行更多自定义：

```
# lib/system_command_job.rb
class SystemCommandJob < Struct.new(:cmd)
  def perform
    system(cmd)
  end
end 
```

请注意 Struct 初始化程序的 cmd 参数。它允许您将参数传递给您的作业，因此代码如下所示：

```
Delayed::Job.enqueue(SystemCommandJob.new("ruby my_script.rb")) 
```

# python - 密码保护整个 django 应用程序

> ID：13358809
> 
> 赞同：5
> 
> 时间：2012-11-13T10:09:35.820
> 
> 标签：python, django, authentication

我在heroku上运行一个简单的登台环境，我现在正在寻找通过某种简单的身份验证来保护整个应用程序的密码

我想知道是否有一个简单的应用程序或中间件已经支持这个。尝试使用 Heroku / Cloudflare 和 django 寻找解决方案，但似乎没有什么是直截了当的。

Django 1.3.1

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-13T12:25:31.993

我`django-lockdown`正是为了这个目的而使用的。它允许您在整个开发站点上添加一个简单的密码，而无需在您的视图中添加任何在开发环境之外未使用的额外身份验证位。这也意味着您可以以管理员或普通用户身份登录以测试您的站点所做的任何事情

[https://github.com/Dunedan/django-lockdown](https://github.com/Dunedan/django-lockdown)

`settings.py`我在我的文件中使用 Heroku 和 Lockdown 和这段代码

```
USE_LOCKDOWN = os.environ.get('USE_LOCKDOWN', 'False') == 'True'
if USE_LOCKDOWN:
    INSTALLED_APPS += ('lockdown',)
    MIDDLEWARE_CLASSES += ('lockdown.middleware.LockdownMiddleware',)
    LOCKDOWN_PASSWORDS = (os.environ.get('LOCKDOWN_PASSWORD', 'False'),)
    LOCKDOWN_URL_EXCEPTIONS = (r'^/some/url/not/locked/down/$',) 
```

然后显然`USE_LOCKDOWN`在我的开发站点上将配置变量设置为 True，在我的生产站点上设置为 False，因此无需更改两者的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T10:14:33.997

Django 的身份验证框架具有内置实用程序`@login_required`，可帮助您使用密码保护视图功能（当然还有相应的“url”）。

像这样的用法：-

```
from django.contrib.auth.decorators import permission_required, login_required

@login_required
def view_organization(request, org_slug):
    """
    Only permit a logged in user to view the organization.
    """
    org = get_object_or_404(organization, slug=org_slug)
    org_users = organizationuser.objects.filter(organization=org,\
                                                organization__is_active=true)

    template = 'organizations/view_organization.html'
    template_vars = {'org_users': org_users, 'org': org}
    return render(request, template, template_vars) 
```

对于高级访问控制，请使用`@permission_required`装饰器。

# ruby - 使用紫菜和虾

> ID：13358810
> 
> 赞同：2
> 
> 时间：2012-11-13T10:09:42.097
> 
> 标签：ruby, xml, prawn

我最近开始在我的应用程序中使用 Prawn 来生成 PDF，我还使用 Nori 来解析 XML 和发送 SMS。

我意识到我的应用程序无法再发送短信了，我收到了以下错误消息：

```
nori:  undefined method `closed?' for # < Hash:0xb0320e0>

/gems/rest-client-1.6.7/lib/restclient/payload.rb:109:in `close'
/gems/ruby-1.9.3-p194@portal/gems/rest-client-1.6.7/lib/restclient/request.rb:66:in `ensure in execute'
/ruby-1.9.3-p194@portal/gems/rest-client-1.6.7/lib/restclient/request.rb:66:in `execute' 
```

它在这些行中失败（请求是用 构建的`RestClient::Request.new`）：

```
Nori.parse(request.execute) 
```

如果我在我的 Gemfile 中评论 Prawn，它会再次工作，如果我使用 Prawn 0.8.4，它会工作，但我需要来自较新版本的 Prawn 方法。我在互联网上找不到任何关于这两个宝石之间不兼容的内容。谁能告诉我出了什么问题以及如何解决？

我的 Gemfile 看起来像这样：

```
gem "prawn", "~> 0.12.0"

gem "nori",  "~>1.1.3" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:46:46.570

我终于可以解决这个问题了。将 Prawn 添加到我的 Gemfile 导致 RestClient 停止工作，因为它的依赖项之一是 pdf-reader 1.2.0。我不得不在 Gemfile.lock 中将其版本更改为 pdf-reader 1.1.1 并且它再次正常工作。

# excel - 在 .PasteSpecial 上保留上标格式

> ID：13358811
> 
> 赞同：1
> 
> 时间：2012-11-13T10:09:49.710
> 
> 标签：excel, vba, formatting, copy-paste, superscript

我正在将一个范围从一个工作簿复制到另一个工作簿。由于源范围中的大部分数据是我需要按值粘贴的公式：

```
With TargetRange
    .PasteSpecial Paste:=xlPasteAll
    .PasteSpecial Paste:=xlPasteColumnWidths
    .PasteSpecial Paste:=xlPasteValues
End With 
```

问题是 xlPasteValue 破坏了（静态）单元格中的上标格式。如何按值粘贴保留上标格式？

我可以通过 xlPasteAll 重新粘贴这些带有上标格式的静态单元格，但这有点杂乱无章，而且不太容易维护。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T12:26:58.520

复制粘贴功能要么在单元格的总对象上作为范围，要么在某些属性上。range.font 属性之一是上标，因此如果将其应用于 COMPLETE 单元格，它将在此处列出并作为文本格式的过去传递。

现在还可以仅将字体格式应用于单元格中的有限字符集。为单个文本字符设置格式的这种“功能”不是直接的范围属性，而是范围（或单元格）中字符的属性。现在这是一件很麻烦的事情。

请参阅此处的一些代码，从记录上标到字符子集的应用：

```
With rTest.Characters(Start:=1, Length:=2).Font
    .Superscript = True
End With
With rTest.Characters(Start:=3, Length:=2).Font
    .Subscript = False
End With 
```

如果您查看您的（本地人）监视窗口，您会发现未列出 characters 属性。请参阅此处 Microsoft 对 Office 2012 的评价：

[http://msdn.microsoft.com/en-us/library/office/ff198232%28v=office.14%29.aspx](http://msdn.microsoft.com/en-us/library/office/ff198232%28v=office.14%29.aspx)

> “Characters 对象不是一个集合。”

简而言之：您想要的意味着识别具有此“功能”的单元格并`xlPasteAll`用于这些单元格。似乎无法通过 VBA 查询字符属性。

# xml - JAXB 如何编组 ArrayList >

> ID：13358812
> 
> 赞同：1
> 
> 时间：2012-11-13T10:09:51.580
> 
> 标签：xml, jaxb

我有这样的属性

```
private ArrayList<ArrayList<Vector3D>>    trajectories = new ArrayList<ArrayList<Vector3D>>(); 
```

Vector3D 是一个包含 3 个双精度值的简单容器。如何使用 JAXB 正确编组？我只获取 XML 文件中的元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T13:20:49.047

**1)** 使用

```
private ArrayList<ListOfVectors>    trajectories = new ArrayList<ListOfVectors>(); 
```

代替

```
private ArrayList<ArrayList<Vector3D>>    trajectories = new ArrayList<ArrayList<Vector3D>>(); 
```

`ListOfVectors`在哪里

```
@XmlAccessorType(XmlAccessType.FIELD)
public class ListOfVectors 
{
   ArrayList<Vector3D> list = new ArrayList<Vector3D>();
} 
```

# ssis - SSIS 平面文件 - 如何处理文件版本/代

> ID：13358813
> 
> 赞同：3
> 
> 时间：2012-11-13T10:09:52.757
> 
> 标签：ssis, flat-file

我在一个数据仓库项目中工作，其中有很多源创建平面文件作为源，我们正在使用 SSIS 将它们加载到我们的暂存表中，我们目前正在使用平面文件源组件。

但是，一段时间后，我们需要在其中一个文件中添加一个额外的列，并且从文件规范更改的日期开始添加该额外的列。这个练习经常发生，随着时间的推移积累了很多版本。

根据我可以在这里和互联网上找到的答案，处理这种情况的商定方法似乎是在此版本的新单独数据流中设置新的平面文件源，以保持 ETL 过程的可重新运行性对于旧文件。此处概述了方法，例如：[SSIS pkg with flat-file connection with less columns will fail](https://stackoverflow.com/questions/10686785/ssis-pkg-with-flat-file-connection-with-fewer-columns-will-fail)

在我们的特定设置中，附加列始终是附加列（从不删除旧列），并且由于逻辑原因，如果我们在其单独的数据流中保持旧文件的可重新运行性，则新列不能是强制性的。

我不认为创建重复数据流一遍又一遍地处理同一组列的方法对于我们的数据仓库项目来说是一个很好的答案，我更喜欢采用最后一个文件版本并拥有的源组件能够将列标记为“非强制性”并在缺失时提供空值。

是否有人知道 SSIS 平面文件组件在处理旧文件版本方面更灵活或有更好的解决方案来解决这个问题？我假设这样的组件需要在命名列的基础上处理文件，而不是现有的从左到右的方法？

欢迎任何想法或建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:59:10.493

以下内容在处理时会降低效率（超过具有单独的数据流），但将为您提供在单个数据流中处理多种文件类型的灵活性。

您可以通过仅指定行分隔符来安排平面文件连接以返回行而不是单个列。将此连接到一个平面文件源组件，该组件将每行输出一列。我们现在有一行代表您知道的许多文件类型之一——下一步是确定您拥有的文件类型。

使用带有脚本组件的平面文件类型的输出。传入单个列并传递所有可能列的超集。我们丢失了通常来自文件源的元数据，因此您需要在脚本组件输出类型中建立列名/类型/大小。

在脚本组件中，传递该行并将其分成其组件列。您必须执行模式匹配（可能使用 RegularExpression.Regex.Match）来识别新列何时开始。希望该文件格式正确，对您有所帮助 - 请注意文本列中的引号和逗号。

您现在可以通过确定您拥有的列数并默认缺少的列来访问文件类型。设置行的输出列以传递组成部分。您可能需要附加一个新列来记录输出的文件类型。

该过程的其余部分应该能够使用单个数据流加载您的表，因为您已经满足了脚本中的所有文件类型。

我不建议您轻率地执行上述操作。当您必须对所有列/类型等进行编码时，SSIS 的优势会有所降低，但是它将为您提供单个数据流来处理每个文件版本，并且可以在传递新列时进行扩展。

# excel - 如果第三个数字是 1，则插入文本 X

> ID：13358815
> 
> 赞同：2
> 
> 时间：2012-11-13T10:09:56.443
> 
> 标签：excel, excel-formula

我有不同的数字条目（SF123456、SF142365、...）。每一个数字条目对应一个特定的代码。对于每个条目的每个数字，我需要在单独的单元格中输入相应的代码（在此处下载示例表：www.nivpat.com/Example.zip）如何创建自动功能，因为我有数千个条目可以划分为代码... 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T11:34:10.503

好吧。我为解决这个问题所做的是：

*   删除匹配表中的“=”符号以便能够对其进行操作`VLOOKUP`；
*   在标题正上方的第 9 行中添加要查找的数字的位置。您可能希望隐藏此行以便更清晰地展示；
*   我在单元格中使用了以下公式来提取值：

`=VLOOKUP(VALUE(MID($A11, B$9, 1)), $A$2:$B$7, 2, 0)`

在您的`VLOOKUP`表中进行查找`A2:B7`。`MID()`仅提取一个以 中指定的字符开头的字符（`B9`在本例中为 3）。并将`VALUE()`文本字符串转换为数字，以便能够与上表进行匹配。

您现在唯一需要做的就是拖动您的公式，它正在工作！

# vim - 关闭除活动选项卡以外的所有选项卡？

> ID：13358816
> 
> 赞同：69
> 
> 时间：2012-11-13T10:09:58.600
> 
> 标签：vim

我想知道是否有任何方法可以关闭除活动选项卡之外的所有选项卡。

任何想法？

标签： 当前

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-11-13T10:12:41.897

```
:tabo[nly] 
```

您可能想阅读

```
:help tab 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-11-13T10:12:06.847

为什么不

```
:tabonly     - close all other tabs (show only the current tab) 
```

? 请参阅[此处](http://vim.wikia.com/wiki/Using_tab_pages)了解更多信息

# ios - 向 UITableView 单元格添加左缩进

> ID：13358819
> 
> 赞同：7
> 
> 时间：2012-11-13T10:10:12.703
> 
> 标签：ios, uitableview

请参考下面这张图片：

![结果](../Images/34b9e571099e3eea5b1d035b6fc1e6bb.png)

我想自定义一个 UITableView。

我使用 tableView.backgroundView 实现了为其应用图像背景。

现在我想为每一行添加左缩进/边距作为示例图片。然后我想减小它们的宽度并使它们居中。

我能做到这些吗？任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-13T10:16:51.330

您可以为您的单元格使用透明视图，并将您的内容集中在该单元格内。或者你可以使用

```
- (NSInteger)tableView:(UITableView *)tableView indentationLevelForRowAtIndexPath:(NSIndexPath *)indexPath 
```

对于缩进部分。

# sonarqube - Sonar Checkstyle 标签列出多个标签？

> ID：13358825
> 
> 赞同：1
> 
> 时间：2012-11-13T10:10:49.063
> 
> 标签：sonarqube, checkstyle

我在 Sonar 中使用名为 Tag List 的 Checkstyle 规则。是否可以在同一规则中定义多个标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T11:14:00.950

是的，你可以这么做。[Sonar TagList 插件文档](http://docs.codehaus.org/display/SONAR/Taglist+Plugin)包含完整的说明，包括屏幕截图。

# session - 用户在 joomla 中关闭浏览器后记住会话

> ID：13358831
> 
> 赞同：1
> 
> 时间：2012-11-13T10:11:14.787
> 
> 标签：session, cookies, joomla

我对joomla了解不多。我找到了这个：

JFactory::getSession();

在这里我发现有一个过期日期，但我不能让它工作。 [http://www.techportal.co.za/joomla/joomla-tutorials/304](http://www.techportal.co.za/joomla/joomla-tutorials/304)

你能举一个工作的例子吗？

只希望当用户重新打开浏览器时存储在最后一个会话中的数据可用。还不得不说我正在使用外部域登录，所以在这种情况下，我不关心 joomla 处理用户的内部方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T11:26:54.180

您可以在使用的文档中看到的 4 个部分需要在数组中传递（`$options`在 API 中调用）

所以你需要通过

```
$time=99; //time in minutes
$options = array(
    "expire" => $time,
);
$session =& JFactory::getSession($options); 
```

请注意，默认情况下，这是由 Joomla 2.5 以上配置区域中的参数处理的！这很可能在 1.5 中也是如此——我手头没有 1.5 的副本。

# c# - 在实体框架对象中使用外部对象

> ID：13358834
> 
> 赞同：3
> 
> 时间：2012-11-13T10:11:22.850
> 
> 标签：c#, entity-framework, entity-framework-5

我试图用来`Entity Framework`存储和检索一些对象，其中一个属性是我无法控制的类。

为了描述这个问题，假设我正在尝试持久`Arc`化对象：

```
class Arc {
   public Angle start { get; set; }
   public Angle end { get; set; }
   // ... other properties ...
} 
```

但我没有对`Angle`源代码的写访问权限，它有一个像这样的公共接口：

```
class Angle {
   public enum Unit { Radians, Degrees };
   public Angle(double value, Unit units); // constructor
   public float Radians() { get; } // returns angle value in radians
   public float Degrees() { get; } // returns angle value in degrees
} 
```

我想我可以在 DbContext 的`OnModelCreating()`方法中做一些事情来将角度字段映射到数据库中的浮点列，但是尽管阅读了`MSDN`文档，我还是无法弄清楚我需要做什么来完成这个。

在存储对象时，我不知何故需要读取角度的度（或弧度）属性，然后`Angle`在检索它们时使用该值构造一个新的。我怎样才能做到这一点？

编辑：我想到了一个糟糕的解决方案，即不映射角度属性，并为每个属性添加一个额外的映射属性来进行转换，如下所示：

```
public float start_degrees { get { return start.Degrees; }
                              set { start = new Angle(value, Angle.Degrees); }
                             } 
```

但我宁愿避免这种情况，因为我的对象有很多这种性质的属性，所以这意味着添加更多。我希望有一个更简单的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T12:32:12.457

可能我误解了这个问题，但让我试一试。这个怎么样？

```
public class MyOwnTypeOfAngle
{

    public MyOwnTypeOfAngle(Angle input)
    {
        this.Radians = input.Radians;
        this.Degrees = input.Degrees;
    }

    public double Radians { get; set; }
    public double Degrees { get; set; }
} 
```

在任何情况下，当您想在 EF 中更改 DbSet 的配置时，您需要设置以下内容：

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Configurations.Add(new MyNewConfigurationType ());
    } 
```

***更新*** 好的，我还没有深入了解配置，但我希望这可以引导您朝着正确的方向前进：

```
class MyNewConfigurationType : EntityTypeConfiguration<Arc>
 {
    public MyNewConfigurationType()
    {

        Ignore<Angle>(y => y.start);
        Ignore<Angle>(y => y.end);

        Property<float>(x => x.start.Degrees).HasColumnName("myStartDegrees");
        Property<float>(x => x.end.Degrees).HasColumnName("MyEndDegrees");
    }
} 
```

# php - 角色层次继承 - Symfony2

> ID：13358835
> 
> 赞同：1
> 
> 时间：2012-11-13T10:11:26.437
> 
> 标签：php, symfony, acl, hierarchical-data

我在*security.yml中的层级角色有问题*

### 角色层次结构

```
 ROLE_SUPER_ADMIN: [ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH]
    ROLE_ADMIN: [ROLE_PILOT, ROLE_EXPERT]
    ROLE_PILOT: ROLE_PRODIVER
    ROLE_PROVIDER: ROLE_PROVIDER_EXTERNAL
    ROLE_PROVIDER_EXTERNAL: ROLE_USER 
```

当我在 TWIG 中使用 *is_granted* 时：

```
{% if is_granted('ROLE_PROVIDER_EXTERNAL') %}
 <li class="dropdown">[...]</li>
{% endif %} 
```

通常 ROLE_PILOT 应该能够通过角色继承来查看这个 HTML 元素。但是如果用户在 ROLE_PILOT 中连接，则 HTML 元素无法为他显示...

有人对我的问题有想法吗？
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T19:31:34.773

您的代码显示：

```
ROLE_PILOT: ROLE_PRODIVER 
```

尝试将其更改为：

```
ROLE_PILOT: ROLE_PROVIDER 
```

# java - 如何强制 JFrame 为组件提供一定的空间？

> ID：13358839
> 
> 赞同：2
> 
> 时间：2012-11-13T10:11:45.953
> 
> 标签：java, jframe

```
public class n00767255 {
    public static void main(String[] args) {
        CarFrame frame = new CarFrame();
        frame.setSize(600,480);
        frame.setLocationRelativeTo(null);

        frame.setVisible(true);

        while(true)
        {
            frame.repaint();
        }   
    }
}

class CarFrame extends JFrame {
    CarFrame() {
        setLayout(new GridLayout(3,1));

        final CarPanel car1 = new CarPanel();
        car1.initCar(10,50,2,150,70,40);
        add(car1);

        final CarPanel car2 = new CarPanel();
        car2.initCar(10,50,2,150,70,40);
        add(car2);

        JButton startCar1 = new JButton("Start Car 1");

        JPanel panel = new JPanel();
        panel.setSize(600,40);
        panel.add(startCar1);

        add(panel);

        startCar1.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                if(!car1.getMovingF())
                {
                    car1.modifyMovingF();
                }
            }
        });
    }
} 
```

我想要做的是创建两个具有基本汽车形状的 CarPanel，并且两者的尺寸都为 600X200，并且间隔适当，以便可以看到完整的对象。在此之下，我想用一堆不同的按钮来粘贴面板，这些按钮可以做不同的事情。在这里我的问题是汽车永远没有足够的空间可以完全看到，并且使用不同的布局管理器也没有帮助。

**编辑**

经过多次更改后，此代码根本无法按我预期的方式工作。此时第一辆车是唯一显示的车，启动车按钮位于框架的顶部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T10:15:16.310

看看 frame.pack：[http](http://docs.oracle.com/javase/6/docs/api/java/awt/Window.html#pack%28%29) ://docs.oracle.com/javase/6/docs/api/java/awt/Window.html#pack%28%29 - 它设置一个窗口的大小，以便它适合其内容的首选大小。

如果框架的内容具有正确设置的首选大小，只需调用

```
frame.pack(); 
```

代替

```
frame.setSize(600,480); 
```

在您的应用程序中 - 这应该可以解决问题。

**编辑：**您的代码的另一个问题是您可能使用了错误的布局管理器。GridLayout 创建一个规则网格，这意味着所有单元格都具有相同的大小。您应该尝试支持更灵活的单元格大小的布局，例如 JGoodies FormLayout 或 MigLayout。

我已经使用以下 CarPanel 实现尝试了您的代码，GridLayout 似乎忽略了它的孩子的大小：

```
private class CarPanel extends JPanel {
    public CarPanel() {
        setBorder(BorderFactory.createLineBorder(Color.BLACK));
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(600, 20);
    }
} 
```

*   [http://www.miglayout.com/](http://www.miglayout.com/)
*   [http://www.jgoodies.com/freeware/libraries/forms/](http://www.jgoodies.com/freeware/libraries/forms/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T10:15:49.767

尝试使用 JFrame 的[打包方法](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#pack%28%29)。

```
public static void main(String[] args) {
    CarFrame frame = new CarFrame();
    frame.setPreferredSize(new Dimension(600,480));
    frame.setLocationRelativeTo(null);

    frame.pack();
    //...rest of code
  }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-13T10:15:27.370

有关setSize setMinimumSize setMaximumSize 和 setPreferredSize 等方法，请参阅[API](http://docs.oracle.com/javase/6/docs/api/javax/swing/JFrame.html)

# macos - 通过 pip 成功安装 lxml 后，在 python 命令行中执行“from lxml import etree”时出现错误

> ID：13358842
> 
> 赞同：3
> 
> 时间：2012-11-13T10:11:49.777
> 
> 标签：macos, python-2.7, lxml, llvm-gcc, elementtree

```
    bash-3.2$ pip install lxml-2.3.5.tgz
    解压 ./lxml-2.3.5.tgz
      从 file:///Users/apple/workspace/pythonhome/misc/lxml-2.3.5.tgz 为包运行 setup.py egg_info
        构建 lxml 版本 2.3.5。
        使用 Cython 0.17 构建。
        使用 libxslt 1.1.27 的构建配置
        在以下目录中针对 libxml2/libxslt 构建：/usr/local/lib

        警告：未找到与“*.py”匹配的先前包含的文件
    安装收集的包：lxml
      为 lxml 运行 setup.py install
        构建 lxml 版本 2.3.5。
        使用 Cython 0.17 构建。
        使用 libxslt 1.1.27 的构建配置
        在以下目录中针对 libxml2/libxslt 构建：/usr/local/lib
        跳过 'src/lxml/lxml.etree.c' Cython 扩展（最新）
        构建“lxml.etree”扩展
        llvm-gcc-4.2 -fno-strict-aliasing -fno-common -dynamic -arch i386 -arch x86_64 -g -O2 -DNDEBUG -g -O3 -I/usr/local/include -I/usr/local/include/ libxml2 -I/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c src/lxml/lxml.etree.c -o build/temp.macosx-10.6-intel-2.7/src/lxml/ lxml.etree.o -w -flat_namespace
        llvm-gcc-4.2 -bundle -undefined dynamic_lookup -arch i386 -arch x86_64 -g build/temp.macosx-10.6-intel-2.7/src/lxml/lxml.etree.o -L/usr/local/lib -lxslt - lexslt -lxml2 -lz -lm -o build/lib.macosx-10.6-intel-2.7/lxml/etree.so
        跳过 'src/lxml/lxml.objectify.c' Cython 扩展（最新）
        构建“lxml.objectify”扩展
        llvm-gcc-4.2 -fno-strict-aliasing -fno-common -dynamic -arch i386 -arch x86_64 -g -O2 -DNDEBUG -g -O3 -I/usr/local/include -I/usr/local/include/ libxml2 -I/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c src/lxml/lxml.objectify.c -o build/temp.macosx-10.6-intel-2.7/src/lxml/ lxml.objectify.o -w -flat_namespace
        llvm-gcc-4.2 -bundle -undefined dynamic_lookup -arch i386 -arch x86_64 -g build/temp.macosx-10.6-intel-2.7/src/lxml/lxml.objectify.o -L/usr/local/lib -lxslt - lexslt -lxml2 -lz -lm -o build/lib.macosx-10.6-intel-2.7/lxml/objectify.so

    lxml安装成功
    打扫干净...
    bash-3.2$ 蟒蛇
    Python 2.7.3（v2.7.3:70274d53c1dd，2012 年 4 月 9 日，20:52:43）
    [GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] 在 darwin
    输入“帮助”、“版权”、“信用”或“许可”以获取更多信息。
    >>> 导入 lxml
    >>> 导入 html
    回溯（最近一次通话最后）：
      文件“”，第 1 行，在
    ImportError：没有名为 html 的模块
    >>> 从 lxml 导入 html
    回溯（最近一次通话最后）：
      文件“”，第 1 行，在
      文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/lxml/html/__init__.py”，第 12 行，在
        从 lxml 导入 etree
    ImportError：dlopen（/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/lxml/etree.so，2）：找不到符号：_exsltDateXpathCtxtRegister
      引用自：/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/lxml/etree.so
      预期在：平面命名空间
     在 /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/lxml/etree.so

```

对于旧版本 lxml2.3.4 再次出现相同的错误

```
    bash-3.2$ pip install lxml-2.3.4.tgz
    解压 ./lxml-2.3.4.tgz
      从 file:///Users/apple/workspace/pythonhome/misc/lxml-2.3.4.tgz 为包运行 setup.py egg_info
        构建 lxml 版本 2.3.4。
        使用 Cython 0.17 构建。
        使用 libxslt 1.1.27 的构建配置
        在以下目录中针对 libxml2/libxslt 构建：/usr/local/lib

        警告：未找到与“*.py”匹配的先前包含的文件
    安装收集的包：lxml
      为 lxml 运行 setup.py install
        构建 lxml 版本 2.3.4。
        使用 Cython 0.17 构建。
        使用 libxslt 1.1.27 的构建配置
        在以下目录中针对 libxml2/libxslt 构建：/usr/local/lib
        跳过 'src/lxml/lxml.etree.c' Cython 扩展（最新）
        构建“lxml.etree”扩展
        llvm-gcc-4.2 -fno-strict-aliasing -fno-common -dynamic -arch i386 -arch x86_64 -g -O2 -DNDEBUG -g -O3 -I/usr/local/include -I/usr/local/include/ libxml2 -I/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c src/lxml/lxml.etree.c -o build/temp.macosx-10.6-intel-2.7/src/lxml/ lxml.etree.o -w -flat_namespace
        llvm-gcc-4.2 -bundle -undefined dynamic_lookup -arch i386 -arch x86_64 -g build/temp.macosx-10.6-intel-2.7/src/lxml/lxml.etree.o -L/usr/local/lib -lxslt - lexslt -lxml2 -lz -lm -o build/lib.macosx-10.6-intel-2.7/lxml/etree.so
        跳过 'src/lxml/lxml.objectify.c' Cython 扩展（最新）
        构建“lxml.objectify”扩展
        llvm-gcc-4.2 -fno-strict-aliasing -fno-common -dynamic -arch i386 -arch x86_64 -g -O2 -DNDEBUG -g -O3 -I/usr/local/include -I/usr/local/include/ libxml2 -I/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c src/lxml/lxml.objectify.c -o build/temp.macosx-10.6-intel-2.7/src/lxml/ lxml.objectify.o -w -flat_namespace
        llvm-gcc-4.2 -bundle -undefined dynamic_lookup -arch i386 -arch x86_64 -g build/temp.macosx-10.6-intel-2.7/src/lxml/lxml.objectify.o -L/usr/local/lib -lxslt - lexslt -lxml2 -lz -lm -o build/lib.macosx-10.6-intel-2.7/lxml/objectify.so

    lxml安装成功
    打扫干净...
    bash-3.2$ 蟒蛇
    Python 2.7.3（v2.7.3:70274d53c1dd，2012 年 4 月 9 日，20:52:43）
    [GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] 在 darwin
    输入“帮助”、“版权”、“信用”或“许可”以获取更多信息。
    >>> 导入操作系统
    >>> 导入 lxml
    >>> 从 lxml 导入 etree
    回溯（最近一次通话最后）：
      文件“”，第 1 行，在
    ImportError：dlopen（/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/lxml/etree.so，2）：找不到符号：_exsltDateXpathCtxtRegister
      引用自：/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/lxml/etree.so
      预期在：平面命名空间
     在 /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/lxml/etree.so

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T16:38:44.643

另请参阅[将 lxml.etree 导入到 python 时出现错误](https://stackoverflow.com/questions/13355984/get-errors-when-import-lxml-etree-to-python)

我认为这里的关键错误是：

```
ImportError: dlopen(/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/lxml/etree.so, 2): Symbol not found: _exsltDateXpathCtxtRegister 
```

我[在 lxml dev list 上发现了另一个有同样问题的人](http://permalink.gmane.org/gmane.comp.python.lxml.devel/6028)。

他们的建议：

您可能需要检查您的 libxml/libxslt 库。确保您具有[lxml 安装说明中所需的版本](http://lxml.de/installation.html)

从运行开始

```
ldd /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/lxml/etree.so 
```

这将显示您是否有任何未解析的共享库。您可能需要安装/更新一些软件包。

检查上面链接的线程以获取更多故障排除提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-14T09:42:29.867

嘿，我尝试过使用 Conda 环境并且它有效。默认的 venv 似乎在 M1 芯片上运行得非常糟糕。

您必须通过以下命令进行安装：

```
conda install -c conda-forge requests-html 
```

# java - 用图表处理大量数据

> ID：13358845
> 
> 赞同：1
> 
> 时间：2012-11-13T10:12:03.133
> 
> 标签：java, graph

我有一个只抓取一个网站的爬虫。但是一个网站可以有上千页。每个页面都是一个顶点，我使用`JGraphT`它。

但是如果我抓取一个巨大的网站，我会`StackOverflowError`在片刻之后得到一个。

在这种情况下，我该如何处理大量数据？我必须使用数据库？有一个库可以在数据库中处理这种特定类型的数据（顶点、边……）？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T10:19:18.470

You might wanna use [Neo4j](http://neo4j.org/) which is a high performance, NOSQL graph database.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T10:25:42.420

您可以查看以下内容可能会有所帮助：

1.  [大数据®](http://www.bigdata.com/bigdata/blog/)
2.  [泰坦](http://thinkaurelius.github.com/titan/)

# javascript - 单击功能后在表格中切换复选框

> ID：13358855
> 
> 赞同：0
> 
> 时间：2012-11-13T10:13:15.123
> 
> 标签：javascript, jquery, checkbox, toggle

加载页面后，我需要此功能才能工作。错误是缺失的；在真实行上的语句错误之前。此外，当复选框切换全部被单击为“已选中”时，我希望它将表中的类 checkall 标记为 true，并且当再次单击切换所有复选框时，将表中的所有复选框标记为 false。看起来几乎是正确的，但括号有些错误。

```
$(document).ready(function()  {
     $('#toggle-all, input:checkbox').click(
     function () {
        $('#table, :checkbox').attr(':checked','checked').true);
     },function(){
        $('#table :checkbox').attr(':checked').false);
     }
  );
});

 <section id="main">
     <form id="task-list"> <input id="toggle-all" name="toggle-all" type="checkbox" /> 
      </form>
 </section>

 <table class="table" >
     <tr>
         <td><input type="checkbox" class="checkall"  />item.todo </td>
         <td> item.name</td><td>
     </tr>
......  more rows
 </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:20:49.593

简单的解决方案：

```
$(document).ready(function() {

    $("#toggle-all").click(function() {
        $(".table input:checkbox").each(function() {
            $(this).prop("checked", !$(this).prop("checked"));
        });
    });

}); 
```

更防弹（总是同时切换所有复选框）：

```
$(document).ready(function() {

    $("#toggle-all").click(function() {
        $(".table input:checkbox").prop("checked", $(this).prop("checked"));
    });

});​ 
```

演示：http: [//jsfiddle.net/Ck43Z/1/](http://jsfiddle.net/Ck43Z/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T09:10:56.243

当您使用 attr() 和 prop() 检索输入的状态时， attr() 指的是其默认状态（如 HTML 中所写），而 prop() 指的是其当前状态（如果您单击它会改变上等等）。

当您使用它们设置新状态时，它们会做同样的事情；但养成使用 prop() 设置“已检查”值的习惯是件好事。

```
$('#toggle-all').click(function() {
    $('table input:checkbox').prop('checked', $(this).is(':checked'));
}); 
```

这只是写作的简写

```
$('#toggle-all').click(function() {
    if ($(this).is(':checked')) {
        $('table input:checkbox').prop('checked', true);
    } else {
        $('table input:checkbox').prop('checked', false);
    }
}); 
```

因为，通过 if 语句的性质，如果我们在第一个分支中，表达式 $(this).is(":checked") 无论如何都是正确的，如果我们在第二个分支中，它将一直是错误的。所以，在我们写 'true' 和 'false' 的地方，我们可以在这两种情况下都写成 $(this).is(":checked")。这样做之后，两个分支都说完全一样的东西，所以我们不再需要将它们写在 if 语句中。

$(this) 指的是被点击的元素（即复选框）。如果要在 jQuery 中引用事件，请执行以下操作：

```
$('.element').click(function(e) {
    // the variable e now refers to the event
}); 
```

# c++ - 使用 ios::Nocreate 标志会导致“未声明的标识符”错误

> ID：13358857
> 
> 赞同：6
> 
> 时间：2012-11-13T10:13:25.453
> 
> 标签：c++, fstream

> **可能重复：**
> [编译 C++ 代码时出现 ios::nocreate 错误](https://stackoverflow.com/questions/1062861/iosnocreate-error-while-compiling-a-c-code)

我一直在研究如何在 c++/c# 中创建一个简单的词法编译器，但是当我尝试编译程序时似乎出现错误，错误是

```
error c2065 'nocreate' undeclared identifier 
```

我该如何处理这个问题？但我想它可能与 fstream 标头有关，关于我如何处理它的任何想法？

这是它给我一个错误的代码

```
loadTransitionTable( );

    fstream File("input.txt", ios::in|ios::Nocreate);

    if (!File)
    {
       cout<<"\n Unable to open the input file."<<endl;
       cout<<"\n Press any key to exit.";

       getch( );
       exit(0); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-13T10:17:40.443

`ios::Nocreate`不是标准 C++ 的一部分，但如果打算阻止创建该文件（如果该文件尚不存在），则可以放松。无论如何，这是 ifstreams 的默认设置，所以你可以说：

```
fstream File("input.txt", ios::in); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T10:19:17.620

标准 c++ 库没有定义`std::ios::Nocreate`. 无论如何都不会创建打开以供阅读的文件，因此您可以将其省略：

> fstream File("input.txt", ios::in);

或者只是使用：

> ifstream File("input.txt");

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-13T10:19:57.267

如果您使用 VisualStudio，请尝试

```
std::fstream File("input.txt", std::ios::in|std::ios::_Nocreate); 
```

# java - 我在哪里可以找到权威的 Selenium WebDriver 到 Firefox 兼容性矩阵？

> ID：13358859
> 
> 赞同：25
> 
> 时间：2012-11-13T10:13:27.953
> 
> 标签：java, selenium, firefox, webdriver, compatibility

我曾在各种平台上使用 Selenium Java 和 Firefox Web 驱动程序参与过许多项目。我一次又一次地遇到我们使用的 Selenium WebDriver 版本和安装的 Firefox 版本之间的不兼容问题。

第一道防线当然是确保我们使用最新版本的 WebDriver 和最新版本的 FireFox。

有时，这是不可能的，因为我们使用的是旧版本的 Java，或者仅仅是因为阻力最小的路径是使用随操作系统分发的 Firefox 版本。

我真的很想有一个可靠的兼容性矩阵，告诉我哪个版本的 Firefox 可以与哪个版本的 Selenium WebDriver 一起使用。我在哪里可以找到一个？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-10-24T12:59:53.533

我最近在寻找类似的东西，发现 Changelog 可能是查看兼容性问题的最佳位置：

[https://github.com/SeleniumHQ/selenium/blob/master/java/CHANGELOG](https://github.com/SeleniumHQ/selenium/blob/master/java/CHANGELOG)

（当 Selenium 托管在 Google Code 上时，曾经位于[http://selenium.googlecode.com/git/java/CHANGELOG ）。](http://selenium.googlecode.com/git/java/CHANGELOG)

所有最新版本在每个版本的最顶部都支持 Firefox v XX 注释。您必须在评论中阅读一些较旧的版本，但他们会说哪个版本最受该版本的支持。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-05-19T09:59:50.200

[https://github.com/santiycr/selenium-firefox-support-matrix](https://github.com/santiycr/selenium-firefox-support-matrix)有一个很棒的支持矩阵

# ruby-on-rails - 在 windows 和 linux 环境中共享 Gemfile.lock

> ID：13358863
> 
> 赞同：6
> 
> 时间：2012-11-13T10:14:05.183
> 
> 标签：ruby-on-rails, rubygems, bundler

有人建议我不要取消跟踪 Gemfile.lock，但是我遇到了问题。

我在我的 windows 机器上开发，并推送到一个 linux (ubuntu) 服务器，问题是 Bundler 锁定了一些 gem 的 windows 版本，通过添加：`x86-mingw32`在版本号之后，这会导致问题。

```
GEM
  remote: http://rubygems.org/
  specs:
    actionmailer (3.2.1)
    ...
    mysql2 (0.3.11-x86-mingw32)
    ...

  PLATFORMS
    x86-mingw32 
```

我使用 Capistrano 进行部署，但出现此错误：

**请安装 mysql 适配器：gem install activerecord-mysql-adapter（mysql 不是捆绑包的一部分。将其添加到 Gemfile。）**

即使我的 gemfile 是这样的：

```
...
gem 'mysql2'
... 
```

我认为这是因为 Rails 尝试使用在 Gemfile.lock 上找到的 Windows 版本的 mysql2

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T11:31:24.137

将以下内容添加到您的 Gemfile 中，然后进行捆绑更新（显然替换您当前的 mysql2 gem 列表）

```
  if RUBY_PLATFORM =~ /win32/
  gem "mysql2", :platform => [:mswin, :mingw]
else
  gem "mysql2", :platform => :ruby
end 

```

这意味着如果平台是“win32”（Windows），则安装 Windows 版本，否则安装适用于所有 Unix 系统的“ruby”普通版本。至少我不知道任何无法在其上运行的 Unix 系统（从 Mac OS X、Linux、Solaris 到 *BSD）。

更新：获得了更多信息。问题是 --deployment 标志*只*查看锁定文件。否则，您可以放弃 --deployment，将 gem 锁定到 Gemfile 本身中的特定版本，然后运行包更新以强制重新评估 Gemfile，这将强制选择器。问题是 bundle 无法满足您的需求*，因为*它仅在使用 --deployment 标志时评估锁定文件。这意味着它无法重新评估它所在的平台。它*严格按照*锁定文件中的内容进行。这就是为什么唯一真正的解决方案是将您的 gem 版本锁定在主 Gemfile 中，然后捆绑更新以强制重新评估。

您可能会放弃 --deployment 并使用

```
  bundle update && bundle install --without=development,test,any_other_groups --path=./vendor/bundle 

```

如果您要在与您正在部署的平台完全不同的平台上进行开发，这是必要的，因为正如所引用的，捆绑器的工作方式。上面的命令应该完全复制 --deployment 的作用。所有这些都将记录在 .bundle/config 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-07T05:43:37.747

您可以通过在 Windows 上的命令提示符下键入来检查 RUBY_PLATFORM。

```
ruby -e 'puts RUBY_PLATFORM' 
```

例如，这个 Gemfile 可以在我的 Windows 笔记本电脑和 Linux 服务器上共享。

```
if RUBY_PLATFORM =~ /(win32)|(i386-mingw32)/
  gem 'mongrel','1.2.0.pre2'
else
  gem 'unicorn'
end 
```

# javascript - Onclick 切换回第一个选项

> ID：13358864
> 
> 赞同：0
> 
> 时间：2012-11-13T10:14:05.460
> 
> 标签：javascript, onclick, selection, option

如果您选择带有 的选项，`id="second"`您将切换回带有 的选项`id="first"`。

任何人都知道如何使用 onclick 做到这一点？

```
<select id="switchback">
  <option id="first" value="one">Switch back to first option?</option>
  <option id="second" value="two" onclick="...">Yes</option>
</select> 
```

**注意：不能使用 jQuery。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T10:19:54.043

如果您**确实**希望选择自动恢复为第一个选项，您可以这样做：

```
document.getElementById('switchback').onchange = function(){
    if (this.options[this.selectedIndex].id=="second") {
        this.selectedIndex = 0; 
    }
};​ 
```

[示范](http://jsfiddle.net/dystroy/qY9v8/)

但是，提出一个`select`, 那么有什么意义呢？请注意，您可能更愿意禁用它：

```
<select id="switchback" disabled>
  <option id="first" value="one">You can't change me, lalalala...</option>
  <option id="second" value="two">And you can't see me</option>
</select>​ 
```

[示范](http://jsfiddle.net/dystroy/KrtTF/)

对于大多数用户来说，第二种解决方案更清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T10:26:21.400

尝试这个，

**演示：http:** [//jsfiddle.net/axksN/](http://jsfiddle.net/axksN/)

**HTML**

```
<select id="switchback" onchange="revertBack(this)">
  <option id="first" value="one">Switch back to first option?</option>
  <option id="second" value="two">Yes</option>
  <option value="three">Three</option>
</select> 
```

**Javascript**

```
function revertBack(obj){
    if(obj.value=="two"){
       obj.selectedIndex = 0;
    }
}​ 
```

​</p>

# twitter-bootstrap - 如何通过 javascript 激活引导单选按钮？

> ID：13358866
> 
> 赞同：0
> 
> 时间：2012-11-13T10:14:11.597
> 
> 标签：twitter-bootstrap

我正在尝试做的非常简单的事情，但我认为引导程序没有办法做到这一点。

在我的页面中，我使用以下方法动态插入此引导 html `innerHTML`：

```
<div class="btn-group" data-toggle="buttons-radio">
  <button type="button" class="btn">Left</button>
  <button type="button" class="btn">Middle</button>
  <button type="button" class="btn">Right</button>
</div> 
```

页面加载时 html 不在常规 dom 中，因此未激活单选按钮行为。然后如何通过 javascript 激活 data-toggle="buttons-radio" ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T02:34:55.247

你不能只调用`button()`插入的按钮组吗？例如[这个 jsfiddle](http://jsfiddle.net/yStnW/)，除非我完全误解了这个问题，当然。

# php - 如何找到 php exec 命令已完成，以便我可以使用 AJAX 重新渲染页面？

> ID：13358870
> 
> 赞同：0
> 
> 时间：2012-11-13T10:14:58.037
> 
> 标签：php, ajax, exec

我有一个小问题。我正在开发一个使用 node.js 来计算一些东西的项目。我使用 exec() 函数使 node.js 工作。计算大约需要 30 秒，我想显示一些加载页面，直到它完成。问题是如何测试计算是否完成，以便可以使用 AJAX 重新呈现页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T14:54:31.810

将 exec 与输出参数一起使用，这将为您提供填充命令输出的指定数组。您可以在输出数组上找到执行完成。

例子 ：

exec('ls -la',$output);

print_r($输出);

输出 ：

大批

(

```
[0] => total 16
[1] => drwxr-xr-x  2 root root 4096 2012-11-13 20:06 .
[2] => drwxr-xr-x 16 root root 4096 2012-10-14 23:23 ..
[3] => -rw-r--r--  1 root root  177 2012-10-14 23:23 index.html
[4] => -rw-r--r--  1 root root  129 2012-11-13 20:06 index.php 
```

)

您也可以使用 fopen 和 fsockopen 代替 exec。

# javascript - 将 Javascript 插入 ASP.NET 中的内容页面而不编译它

> ID：13358871
> 
> 赞同：2
> 
> 时间：2012-11-13T10:15:02.743
> 
> 标签：javascript, asp.net, vb.net, contentplaceholder

我在**VB.NET中有一个****ASP.NET Web 窗体**应用程序

 **在我的应用程序中，我使用 a并为我使用 a 的特定页面`Master Page`插入**Javascript**`ContentPlaceHolder`。

我有一个**Javascript**，我在其中使用代码块，并像这样插入到我的页面中：

```
<asp:Content ID="Content4" ContentPlaceHolderID="javascript" runat="server">

<script language="javascript" type="text/javascript" >

function showErrors() {
      var id = '<%=Request.QueryString("id") %>';
      <%if (Request.QueryString("errors") == "true")  {%>
          var errorCode = '<%=Request.QueryString["errorCode"] %>';
          var errorMessage = '<%=Request.QueryString["errorMessage"] %>';
<%} %>
    }
</script>
</asp:Content> 
```

问题是，当我构建解决方案时，**Javascript**代码也会被编译，当然会发现语法错误。例如，其中一个构建错误与`if`没有匹配的语句有关`End If`（因为它应该在 VB.NET 中）

我怎样才能让编译器明白它必须跳过**Javascript**？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T10:23:39.427

你必须`if`用语言写声明`VB`。

```
<asp:Content ID="Content4" ContentPlaceHolderID="javascript" runat="server">

<script language="javascript" type="text/javascript" >

function showErrors() {
      var id = '<%=Request.QueryString("id") %>';
      <% If Request.QueryString("errors") = "true" Then  %>
          var errorCode = '<%=Request.QueryString["errorCode"] %>';
          var errorMessage = '<%=Request.QueryString["errorMessage"] %>';
      <% End If %>
    }
</script>
</asp:Content> 
```**

# url-routing - 来自路由的 Symfony2 全局和可选区域设置检测

> ID：13358873
> 
> 赞同：15
> 
> 时间：2012-11-13T10:15:13.433
> 
> 标签：url-routing, locale, symfony-2.1

下面是我想要达到的，后面是我所获得的知识的汇编，无解。

在 Symfony2 项目中，**不使用专用 bundle**，我希望路径中的第一个目录来定义语言环境。它必须是可选的：

*   **1\.** [http://www.example.com/user/account](http://www.example.com/user/account) => 默认*EN*语言环境、*用户*包、*帐户*控制器、默认*索引*操作。
*   **2\.** [http://www.example.com/fr/user/account](http://www.example.com/fr/user/account) => 强制*FR*语言环境...
*   **3\.** [http://www.example.com/en/user/account](http://www.example.com/en/user/account) => 强制*EN*语言环境（需要选项，即使 EN 是默认语言环境）

由于在项目结束时我将有超过 100 条路由，并且考虑到可以随时添加语言环境，**我需要只编写一次所有语言环境路由**。

没有机会通过一个路由文件来实现这一目标。SF2.1 中一个有趣的解决方案是链式路由文件，Fabien Potencier 自己解释说：一个文件将语言环境和链作为正常路由的前缀。我们到了：

第一个文件列出了所有其他普通路由的非区域感知路由和指向区域感知路由文件的链。

--*路由.yml：*

```
sys_ajax:
  resource: "@SystemAjax/InternalAjax/get"
  prefix:   /sysajax

locale_routing:
  resource: base_routing.yml
  prefix: /{_locale}
  defaults:
    _locale: fr 
```

-- *base_routing.yml:*

```
user:
  resource: "@UserBundle/Resources/config/routing.yml"
  prefix:   /user 
```

*@BTUserBundle/Resources/config/routing.yml*是一个普通的捆绑路由文件。

好的，这适用于路径中具有区域设置的 URL（示例 2 和 3），但如果我删除可选的区域设置部分（示例 1），则找不到路由。很容易猜到问题出在 {_locale} 令牌中，当 URL 中没有语言环境字符串时，该令牌将 URL 的“用户”部分捕获为语言环境。但是，例如，如果 URL 的第一部分不是 en|fr|it|de，我怎么能告诉它让 URL 保持不变并将其链接到下一个文件？

来自论坛的解决方案是制作 2 条路线：

--*路由.yml：*

```
sys_ajax:
  resource: "@SystemAjax/InternalAjax/get"
  prefix:   /sysajax

locale_routing:
  resource: base_routing.yml
  prefix: /{_locale}
  requirements:
    _locale: fr|en

locale_routing2:
  resource: base_routing.yml
  prefix: /
  defaults:
    _locale: fr 
```

一条规则有语言环境部分，一条没有。不幸的是，这不起作用，因为有两条线`resource: base_routing.yml`（每条规则一条），后者覆盖前者。

我在这里，没有好的解决方案......

我喜欢 Symfony（自 2008 年以来），但有时我只是惊讶于简单的问题可以使用这个框架需要非常复杂的解决方案。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-09-16T04:52:03.587

您总是可以从另一个方向解决它，并使用带有宏的体面编辑器来编写路由文件。几乎没有任何体力劳动，你会达到你想要的。使用正则表达式替换和/或宏来修改它会很简单。

# javascript - 鼠标悬停时突出显示图像的某些部分

> ID：13358880
> 
> 赞同：1
> 
> 时间：2012-11-13T10:15:39.867
> 
> 标签：javascript, jquery, css

我想创建一个页面，它基本上有一张黑白照片，比如 5 个人。现在，将鼠标悬停在每个人上时，我希望该人亮起并在其旁边显示一个信息对话框。

谁能告诉我该怎么做？

提前致谢。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T10:23:56.420

要么使用[图像映射](http://en.wikipedia.org/wiki/Image_map)，要么在每个人的顶部制作“不可见”的 div。两者都有其优点和缺点，但图像地图是专门为您需要的而创建的。

要“点亮它们”，您唯一的选择是用透明背景覆盖 .png 图像（在不可见 div 的 :hover 上），并切掉那个人，但编辑为“光”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T10:38:59.100

html:

```
 <a href="#" class="highlightit"><img border="0" src="http://twitter.github.com/bootstrap/assets/img/bootstrap-mdo-sfmoma-03.jpg"> 
   <span> something </span>
 </a> 
```

CSS：

```
.highlightit img{
  filter:progid:DXImageTransform.Microsoft.Alpha(opacity=50);
  -moz-opacity: 0.5;
  opacity: 0.5;
 }

.highlightit:hover img{
  filter:progid:DXImageTransform.Microsoft.Alpha(opacity=100);
  -moz-opacity: 1;
  opacity: 1;
 }

.highlightit:hover span{
  display:block;
}

.highlightit span{
  font-size:20px;
  color:white;
  background:black;
  text-decoration:none;
  display:none;
  width:100%;
  padding:10px;
  position:relative;
  margin-top:-20px;
} 
```

检查这个小提琴预览[http://jsfiddle.net/wandarkaf/cNC5G/](http://jsfiddle.net/wandarkaf/cNC5G/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T10:24:54.683

两种可能的方法：

1.  CSS 精灵

    *   创建一个大图像，其中包含原始图像以及处于每种不同悬停状态的图像（可能垂直堆叠）。

    *   将图像放置为 DIV 大小的背景图像，以仅显示原始图像（或图形或其他）。

    *   绝对将 DIV 中的一些链接定位到您希望它们所在的位置（确保您的容器 DIV 相对定位）。

    *   在悬停您的一个链接时，调整图像的背景位置以显示正确的图像并显示包含您的文本对话的隐藏 DIV/SPAN/WHATEVER。

2.  Javascript。

    *   与上面相同的方法，但使用单独的图像，这些图像在悬停/鼠标或其他任何东西上调用，然后再次调用隐藏的对话来显示。大量工具提示插件可用于此目的。

# asp.net-mvc - 我怎么知道需要在 ASP.Net MVC4 中创建哪个控制器

> ID：13358881
> 
> 赞同：0
> 
> 时间：2012-11-13T10:15:43.587
> 
> 标签：asp.net-mvc, asp.net-mvc-4

作为 ASP.Net MVC 4 的新手，我有点迷茫。按照为应用程序（报告生成网站）创建模型的路径，我创建了一个简单的视图页面，它有 5 个下拉列表，需要直接从数据库（现有数据库）填充数据。我用几个示例实体类（例如 ReportContext、SearchModel、ReportModel 等）创建了 ViewModel。现在轮到创建控制器了（或者我应该早点这样做吗？）。我不确定到底需要创建什么。假设我正在做一个搜索页面。我需要 (i) 参数选择，然后 (ii) 查看结果。这是将执行的两个基本初始操作。为他们创建控制器的方法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:22:20.730

一般来说，控制器所做的是在模型（数据）和视图之间创建连接。因此，您想创建函数，用模型中的数据填充下拉列表，当单击按钮（例如搜索）时，控制器将包含一个偶数处理函数，该函数将从您的视图状态中获取数据并使用它们进行查询数据库并带回结果。

当然，这只是概述，因为我没有关于您的确切应用程序的足够信息。

您应该查看 MVC4 的官方教程 - 这是开始和了解 MVC 模型如何工作的好方法。

[http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/intro-to-aspnet-mvc-4](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/intro-to-aspnet-mvc-4)

# ajax - Ajax.actionLink 在 IE 中返回相同的结果

> ID：13358883
> 
> 赞同：1
> 
> 时间：2012-11-13T10:15:47.597
> 
> 标签：ajax, asp.net-mvc, asp.net-mvc-4

我正在尝试`Ajax.ActionLink`在我的`MVC4`网站中实现一个，出于某种原因，我在 IE 中一直得到相同的结果（Firefox 工作正常）。
我将此添加到`_Layout.cshtml`页面底部：

```
@Scripts.Render("~/bundles/jquery")  
@Scripts.Render("~/bundles/jqueryval") 
```

（在添加`jqueryval`我不断重定向的行之前）
这是我的 ajax 调用：

```
@{
    ViewBag.Title = "Test";
}
<h2>Test</h2>

@Ajax.ActionLink("Click to get a new guid", "GetGuid",
new AjaxOptions
{
    UpdateTargetId = "result",
    InsertionMode = InsertionMode.InsertAfter,
    HttpMethod = "GET"
})
<div id="result">
</div> 
```

**我的控制器动作：**

```
public ActionResult GetGuid()
{
    string guid = Guid.NewGuid().ToString();
    return PartialView("_guid", guid);
} 
```

和部分观点：

```
@model String
<div>
@Model.ToString()
</div> 
```

在 IE 中测试时，我不断得到相同的结果，但在 Firefox 中它工作正常。

有什么方法可以让这段代码与 IE 兼容，还是我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T11:32:11.280

您是否尝试在布局的文档中设置以下内容？

```
$.ajaxSetup({cache:false}); 
```

硅

# iphone - iphone sdk：本地通知限制

> ID：13358886
> 
> 赞同：3
> 
> 时间：2012-11-13T10:15:58.330
> 
> 标签：iphone, ios, cocos2d-iphone, uilocalnotification

[本地和推送通知编程指南](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/WhatAreRemoteNotif/WhatAreRemoteNotif.html#//apple_ref/doc/uid/TP40008194-CH102-SW1)指出：

> 设备上的每个应用程序仅限于最快触发的 64 个预定本地通知。操作系统会丢弃超过此限制的通知。它将重复通知视为单个通知。

这是否意味着当我在今天的不同时间安排 64 个本地通知时，我将无法安排明天或下周的任何本地通知？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T10:22:49.713

**计划通知的最大数量为 64**。如果您已达到最大值，则无法在不删除旧通知或触发预定通知后添加更多本地通知。

# jquery - 我应该在“addClass”之前使用“hasClass”吗？

> ID：13358887
> 
> 赞同：109
> 
> 时间：2012-11-13T10:15:58.197
> 
> 标签：jquery, performance, addclass

我遇到了以下脚本，它检查元素是否具有 class `a`，如果没有，则添加它：

```
if (!$("div").hasClass("a")){
   $("div").addClass("a");
} 
```

由于 jQuery 不会添加已经存在的类，因此可以将其更改为：

```
$("div").addClass("a"); 
```

但是，首先使用是否有任何性能改进`hasClass`，或者是否使用与`addClass`无论如何都相同的方法，因此重复了逻辑？

* * *

## 回答 #1

> 赞同：179
> 
> 时间：2012-11-13T10:18:21.210

The `.hasClass()` check is not useful because jQuery [will also always check](https://github.com/jquery/jquery/blob/master/src/attributes/classes.js#L43-L45) from within `.addClass()`. It's just extra work.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-13T10:22:20.060

您可以在源代码中看到：[https](https://github.com/jquery/jquery/blob/master/src/attributes/classes.js#L38-L45) ://github.com/jquery/jquery/blob/master/src/attributes/classes.js#L38-L45他们在使用`addClass`.

所以`.hasClass()`在这种情况下没有理由使用..（*如果元素没有类，您想执行更多操作则例外。*）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-09-05T13:43:47.027

`.hasClass()`对于它的价值，在我的有限测试中有性能改进：http: [//jsperf.com/jquery-hasclass-vs-addclass-and-removeclass](http://jsperf.com/jquery-hasclass-vs-addclass-and-removeclass)

但是，即使`.removeClass()`在 Chrome 中独立报告的速度要慢几倍，它也以每秒大约 70,000 次操作的速度出现。

# android - accessing mat pixels in native

> ID：13358892
> 
> 赞同：2
> 
> 时间：2012-11-13T10:16:24.410
> 
> 标签：android, c++, opencv, android-ndk, native

i am trying to access and modify mat pixels in native, but i cannot get rid of errors. my function is:

```
`extern "C" {
JNIEXPORT void JNICALL Java_org_opencv_samples_tutorial3_Sample3Native_FindFeatures(JNIEnv*, jobject, jlong addrGray, jlong addrRgba)
{
    Mat* pMatGr=(Mat*)addrGray;
    Mat* pMatRgb=(Mat*)addrRgba;
    vector<KeyPoint> v;
int i=0;

uchar* pixel = addrRgba.data;
for(int i = 0; i < Mat.rows * Mat.cols; ++i)
{
    // access pixel[0],pixel[1],pixel[2] here
    pixel += 3; // move to next pixel
}

}

}
` 
```

and it is called by:

FindFeatures(mGrayMat.getNativeObjAddr(), mRgba.getNativeObjAddr());

from java

my errors are

`"field 'data' cannot be resolved", "field 'rows' cannot be resolved"`

help would be very appreciated. thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T10:20:18.053

`Mat.rows`应该`pMatGr->rows`，`Mat.cols`应该`pMatGr->cols`，`addrRgba.data`应该`pMatRgb->data`。

# php - Hide "Update" item on wordpress admin menu

> ID：13358893
> 
> 赞同：0
> 
> 时间：2012-11-13T10:16:25.707
> 
> 标签：php, html, wordpress

I'm trying to hide this item in the admin:

![enter image description here](../Images/af541a5954f98ef38f2dc8d3d348581f.png)

I have already removed the updated message using this:

```
add_action('admin_menu','wphidenag');
    function wphidenag() {
remove_action( 'admin_notices', 'update_nag', 3 );
} 
```

But I haven't found a solution to this item, any ideas to do it the proper way, not with css?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T10:19:07.777

Done some googling. You could try this method:

[http://developersmind.com/2010/06/12/preventing-wordpress-from-checking-for-updates-for-a-plugin/?replytocom=81](http://developersmind.com/2010/06/12/preventing-wordpress-from-checking-for-updates-for-a-plugin/?replytocom=81)

# c# - Choosing return type of collection: Is there a way to return the same type that is provided?

> ID：13358895
> 
> 赞同：2
> 
> 时间：2012-11-13T10:16:30.463
> 
> 标签：c#, generics, extension-methods, ienumerable, type-inference

I'm in a dilemma to choose the return type of collections when writing generic extension methods for an API. I have read discussions on SO on what collection type to return and what should be the design choices. I generally prefer to accept the most basic type as argument and return the richest type.

I'm now thinking of *returning the same type that is provided with.* Irrespective of whether this is a good choice or not, is there a way this can be accomplished in an easy to use manner?

For eg. lets I have this:

```
 public static IEnumerable<T> Generize<T>(this IEnumerable<T> source)
                                         where T : new()
 {
     var lst = source.ToList();
     lst.Add(new T());
     return lst.AsEnumerable(); //since return type is IEnumerable.
 } 
```

Now I want to return an `IEnumerable`, `ICollection` or `IList` depending on the argument `source`. So I modified this a bit.

```
 public static S Generize<S, T>(this S source) where S : IEnumerable<T>
                                               where T : new()
 {
     var lst = source.ToList();
     lst.Add(new T());
     return (S)lst.AsEnumerable(); //not sure if this works
 } 
```

The main problem I'm facing is I can't get to call the function `Generize`.

```
var d = new List<int> { 23, 23 };

d.Generize(); //can not find definition and no extension method by the name.....

d.Generize<List<int>, int>(); //works but so ugly.. 
```

1.  As Marc points out the casting doesn't work everywhere. Is there a better way to return a collection of type `S` from a `List<T>` if `S` is anyway a `IEnumerable<T>` ?

2.  Can it be done without specifying types such that types are inferred automatically?

3.  Also why is `d.Generize()` giving `definition not found` error rather than `types cannot be inferred` error?

**Edit:**

Though `IEnumberable<T>` can be of any concrete type, in my case it would have been only the normally found ones like `T[]` or `List<T>` or few more from `Linq` namsespace. Handling them all wont be easy. Just pointing out that the original question doesn't make sense to me now. Thanks all..!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:15:56.530

## 警告：好吧，我的问题不是很好，我的想法有点愚蠢。这只是为了回答我的帖子，我不推荐它。我将依靠返回正确`List<T>`的生产代码。

一种方法是处理一些已知类型的集合类

```
public static S Generize<S, T>(this S source, T dummyVariable) 
                              where S : class, IEnumerable<T>
{
    var lst = source.ToList();
    lst.Add(dummyVariable);

    if (source is T[])
        return lst.ToArray() as S;

    if (source is List<T>)
        return lst as S;

    if (source is Collection<T>)
        return new Collection<T>(lst) as S;

    throw new TypeAccessException();
} 
```

更笼统地说，我将使用一些反射..

```
public static S Generize<S, T>(this S source, T dummyVariable) 
                              where S : class, IEnumerable<T>
{
    var lst = source.ToList();
    lst.Add(dummyVariable);

    if (source is Array)
        return lst.ToArray() as S;

    foreach (var c in typeof(S).GetConstructors())
    {
        var p = c.GetParameters();

        if (p.Length != 1)
            continue;

        if (typeof(IEnumerable<T>).IsAssignableFrom(p[0].ParameterType))
            return Activator.CreateInstance(typeof(S), lst) as S;
    }

    throw new TypeAccessException();
} 
```

[问题 2 已在此处得到解答](https://stackoverflow.com/questions/13362267/cannot-find-definition-though-intellisense-lists-it)，问题 3 仍然是个谜。

# sharepoint - SPFieldDateTime change Value to none

> ID：13358896
> 
> 赞同：1
> 
> 时间：2012-11-13T10:16:33.217
> 
> 标签：sharepoint, powershell

So i have a SPFieldDateTime, and its default value is set to (none), i.e. null. Now some people use this to sort for specific ListItems (like "time finished" -> sort fot not null items you get all unfinished items). People got quite used to it, built something around it, but now i have a problem: Some guys wrote something into this field even though they werent finished, now everything is broken, and i was asked to set those fields to null via powershell. No Problem i said, but now it is! You cannot set a SPFieldDateTime to null. Or can you?

```
$item["DateTimeField"] = $null;
$item["DateTimeField"] = ""; 
```

None of these work. Anybody got an idea?

edit: I wanna try something like $item.Fields["DateTimeField"].Delete() but that only deletes the Column from the whole list..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T19:23:59.387

您走在正确的道路上，您只需要在进行更改后更新项目。以下应该有效：

```
$item["DateTimeField"] = $null
$item.Update() 
```

# jquery - 在jQuery中检索其他元素之前的特定元素

> ID：13358902
> 
> 赞同：0
> 
> 时间：2012-11-13T10:17:27.703
> 
> 标签：jquery, dom, element

我有一个这样的html：

```
<fieldset>
<legend>Sondage</legend>
<input type="hidden" value="formulaire_test/poll1352736068616/testencode" name="pollpost">
<p class="question">Q1</p>
<p class="response">
<input id="R010101" type="radio" value="A" name="R0101">
<label for="R010101">R11</label>
</p>
<p class="response">
<input id="R010102" type="radio" value="B" name="R0101">
<label for="R010102">r12</label>
</p>
<p class="question">Q2</p>
<p class="response">
<input id="R010201" type="radio" value="A" name="R0102">
<label for="R010201">r2</label>
</p>
<p class="response">
<input id="R010202" type="radio" value="B" name="R0102">
<label for="R010202">r22</label>
</p>
<p class="submit">
<input type="submit" value="Votez">
</p>
</fieldset> 
```

我想用 jQuery，为每个`<p class="response">`检索`<p class="question">`之前的 juste。

例如，如果我有响应“r22”我想检索 Q2，如果我有“r12”我想检索 Q1....

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:21:03.840

```
$('label:contains("r22")').prevAll('.question:first'); 
```

试试这个，这将得到包含 r22 的标签的第一个上一个问题

如果您想动态获取问题，请使用

```
$('.response').each(function(){
      console.log($(this).prevAll('.question:first'));
}); 
```

# ios - 调用 NSArray 的类方法

> ID：13358905
> 
> 赞同：0
> 
> 时间：2012-11-13T10:17:35.377
> 
> 标签：ios, nsarray, class-method

我有这段代码，我想调用这个类方法来获取 imageView 的一些参数，但我不知道如何调用它，你能帮我吗？

```
+ (NSArray*)getRGBAsFromImage:(UIImage*)image atX:(int)xx andY:(int)yy count:(int)count 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T10:20:13.230

您可以使用您的类名调用该方法。

如果你的课是这样的：

```
@interface myClass

+ (NSArray*)getRGBAsFromImage:(UIImage*)image atX:(int)xx andY:(int)yy count:(int)count

@end 
```

你可以像这样调用这个方法：

```
NSArray *temp = [myClass getRGBAsFromImage:yourImage atX:x andY:y count:count]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T10:20:25.680

要调用它，您只需使用类名...

如果这是在 UIImage 上，那么......

```
[UIImage getRGBAsFromImage:someImage atX:xVal andY:yVal count:countVal]; 
```

# ruby-on-rails-3 - Getting "undefined method" with Thinking Sphinx scopes when using STI

> ID：13358906
> 
> 赞同：6
> 
> 时间：2012-11-13T10:17:35.150
> 
> 标签：ruby-on-rails-3, thinking-sphinx

I'm using Thinking Sphinx 2.0.13 with Rails 3.2.9.

Given I have and STI class that looks like this:

```
class User < ActiveRecord::Base
  define_index do
    has :account_id
    has :is_deleted
  end

  sphinx_scope(:by_account) do |account_id|
    {:with => {:account_id => account_id}}
  end

  sphinx_scope(:without_deleted) do
    {:with => {:is_deleted => false}}
  end
end

class Admin < User
end 
```

If I attempt to use a single scope on either the User or Admin class, all is fine. I can also chain scopes together using the User model, as expected. The problem is, If I chain scopes on the Admin model, I get:

```
> Admin.by_account(1).without_deleted

NoMethodError:   Sphinx Query (2.9ms)  
  Sphinx  Found 3 results
  Admin Load (0.6ms)  SELECT `users`.* FROM `users` WHERE `users`.`type` IN ('Admin') AND `users`.`id` IN (7, 8, 9)
undefined method `without_deleted' for #<ThinkingSphinx::Search:0x007fd3d95f7a08> 
```

It appears to be running the query as soon as the first scope is encountered. Is there something obvious I'm missing, or does this look like an issue with TS?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:41:20.963

以下是人们之前遇到的一些问题，`sphinx_scopes`这可能是这里的问题。

*   人们在他们的`sphinx_scopes`. 您的作用域`by_account`是它的主要候选者，因此请尝试重命名它。我可以想象在派生类而不是基类中搞砸的情况。
*   过去的范围问题已通过重新排序调用来解决，因此请尝试`Admin.without_deleted.by_account(1)`. 不是修复，我知道。
*   我还预测这是一个主键（即每个`account_id`最多一个）。如果是这样，这可以解释为什么选择过早获取它。`User``Account``Rails`

# jquery - Appending to $('body') reloads images

> ID：13358911
> 
> 赞同：2
> 
> 时间：2012-11-13T10:17:47.997
> 
> 标签：jquery, append, document-body

The webpage has some images. After loading the document the images are fully loaded. Some seconds later they disappear and then they come back. I've tracked down the problem to this line.

```
document.body.innerHTML = '<div name="abc">some blah</div>'
    + document.body.innerHTML; 
```

, changed it into:

```
document.body.innerHTML += '<div name="abc">some blah</div>'; 
```

Hasn't helped, changed it into:

```
$("body").append('<div name="abc">some blah</div>'); 
```

No success at all.

It seems to me that the complete html code of the body is replaced by a new on. That's why it is empty for a short time. The browser removes all elements and repaints them.

Any solutions?

Thank you.

# javascript - Submit without submit button

> ID：13358912
> 
> 赞同：0
> 
> 时间：2012-11-13T10:17:51.803
> 
> 标签：javascript

I have created dropdown menu "Users", whith 2 options to select

```
<select name="Users">
        <option>User1</option>
        <option>User2</option>
</select> 
```

I'm stuck with next thing i want to do, which is: -if user1 is selected, another dropdown menu is generated -if user2 is selected, input windows is generated

I would like changes to be made without submit button. Changes should be made with selection on "users" dropdown menu.

Any tips or solution will be greatly appreciated!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T10:23:47.623

你需要 Javascript [http://www.w3schools.com/js/default.asp](http://www.w3schools.com/js/default.asp)

PHP 是服务器端语言，它仅在用户加载页面时生成代码，而不是在页面加载后生成代码。如果您希望用户在他们的浏览器中获取代码，在他们采取一些行动之后，您需要用户端语言作为 Javascript。

如果您使用一些 Javascript 库作为 jQuery [http://www.jquery.com](http://www.jquery.com)对您来说会更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T12:04:09.200

```
<select name="Users" onchange="this.form.submit();">
        <option>User1</option>
        <option>User2</option>
</select> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T10:24:26.860

您应该使用 jQuery 事件并使用选择框的更改事件来显示和隐藏您想要的任何 html 元素。

# coldfusion - ColdFusion 中的错误处理 LT

> ID：13358915
> 
> 赞同：5
> 
> 时间：2012-11-13T10:18:10.587
> 
> 标签：coldfusion

我正在编写我的第一个 ColdFusion 组件，但出现此错误。有谁知道这意味着什么？

```
Invalid CFML construct found on line 2 at column 1.
ColdFusion was looking at the following text:
<
The CFML compiler was processing:
< marks the beginning of a ColdFusion tag.Did you mean LT or LTE?
The error occurred in C:/inetpub/wwwroot/ColdFusion/test.cfm
<cfcomponent displayname="News" hint="Get News">
<cffunction name="GetNews" returntype="query">
<cfquery datasource="CFDatabase" name="myQuery" 
```

源代码：

```
<cfcomponent displayname="News" hint="Get News">
<cffunction name="GetNews" returntype="query">
    <cfquery datasource="CFDatabase" name="myQuery">
        select * from tbNews
    </cfquery>
    <cfreturn myQuery>
</cffunction>
</cfcomponent>

<cfinvoke component="components.News" method="GetNews" returnvariable="AllNews">

<table width="100%">
<cfoutput query="AllNews">
<tr>
    <td>Title:</td>
    <td><cfoutput>#myQuery.Title#</cfoutput></td>
    <td>Body:</td>
    <td><cfoutput>#myQuery.Description#</cfoutput></td>
</tr>
</cfoutput>
</table> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T10:35:58.443

您已将其放置`<cfcomponent>`在 cfm 文件中，这是我不允许的。

将`<cfcomponent>`块移动到扩展名为 .cfc 的文件（例如 News.cfc），然后从 .cfm 文件中调用它

在新闻.cfc

```
<cfcomponent>
<cffunction name="getNews">
...
</cffunction>
</cfcomponent> 
```

在 test.cfm

```
<cfset newsObj = createobject('component', 'News')>
<cfset AllNews = newsObj.getNews()> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T10:27:01.080

错误出现在一个名为 test.cfm 的文件中，而您正在向我们展示 CFC 中的代码，这并没有多大帮助。

但是，错误消息相当清楚：您`<`在错误的地方使用了 a 。它位于 test.cfm 的第 2 行（或者可能来自第 1 行的某些东西的连锁反应）。

您可以更新您的问题以发布它正在谈论的实际代码吗？

但请查看第 1-2 行并查找语法错误。是否有一个表达式，您正在执行小于评估，并且您使用 < 而不是 LT / LTE（根据错误消息中的指导...）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-14T01:10:41.953

我遇到了同样的错误，我发现我的一个标签`>`末尾缺少一个（大于号）`cf`，恰好是一个`<cfif>`. 所以，我改变了

```
<cfif condition EQ true</cfif> 
```

到

```
<cfif condition EQ true></cfif> 
```

`#`另一次，我在HTML 元素的样式属性中遇到了类似的问题。由于它在 a 中`cfoutput`，ColdFusion 尝试将我的意思作为十六进制颜色值（以主题标签开头）呈现为 ColdFusion 变量，但它没有用第二个主题标签关闭。所以我将内联样式更改为外部样式表，老实说，我一开始就应该这样做:)

# dll - Import Library in Visual Studio 2010

> ID：13358916
> 
> 赞同：0
> 
> 时间：2012-11-13T10:18:10.250
> 
> 标签：dll, import, shared-libraries

I have the headers SC2_CamExport.h, SC2_SDKStructures.h and the librariese SC2_Cam.lib, SC2_Cam.dll I want to include in a C++ project. I added the folder with the containing libraries and headers, but when I include the header SC2_CamExport.h, I have errors.

```
#ifdef dfsdfdsf
#if defined _WIN64
   #define SC2_SDK_FUNC
#else
   #define SC2_SDK_FUNC __declspec(dllexport)
#endif
#else
   #define SC2_SDK_FUNC __declspec(dllimport)
#endif

#ifdef __cplusplus
extern "C" {            //  Assume C declarations for C++
#endif  //C++

SC2_SDK_FUNC int WINAPI PCO_GetGeneral(HANDLE ph, PCO_General *strGeneral);

SC2_SDK_FUNC int WINAPI PCO_GetCameraType(HANDLE ph, PCO_CameraType *strCamType);

#ifdef __cplusplus
}       //  Assume C declarations for C++
#endif  //C++ 
```

So in the line of "SC2_SDK_FUNC int WINAPI PCO_GetGeneral(HANDLE ph, PCO_General *strGeneral);" I get an error "error C2146: syntax error : missing ';' before identifier 'PCO_GetGeneral'". I guess the main problem is that I am not able to import a DLL in C++ as mentioned in [Using .dll in Visual Studio 2010 C++](https://stackoverflow.com/questions/7136450/using-dll-in-visual-studio-2010-c). So anyway, I'm not sure what I have to do and how I can import this library. Do I just need to import the .lib file anyhow, or what is exactly the problem?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:45:21.110

对我来说，它可以包含 windows.h 以便所有 windows 命令都可用。所以只需插入

`#include <windows.h>`

在文件的开头

KR伯恩哈德

# image - 如何加快将巨大的 TIFF 旋转 90 度

> ID：13358919
> 
> 赞同：4
> 
> 时间：2012-11-13T10:18:21.053
> 
> 标签：image, rotation, tiff, image-rotation

我正在处理巨大的 TIFF 图像（灰度，8 位或 16 位，最大 4 GB），以用作机器的高分辨率输入数据。每个图像都需要旋转 90 度（顺时针）。输入 TIFF 可以是 LZW 或未压缩的，输出可以是未压缩的。

到目前为止，我在 Objective C 中实现了我自己的 TIFF 阅读器类（包括 LZW 解压缩），它能够处理大文件并在内存中进行一些缓存。目前，TIFF 阅读器类用于图像内部的可视化和测量，它的性能相当不错。

对于我的最新挑战，旋转 TIFF，我需要一种新方法，因为当前的实现非常缓慢。即使对于“中等”尺寸的 TIFF (30.000 x 4.000)，也需要大约 30 分钟旋转图像。目前，我遍历所有像素并选择 x 和 y 坐标反转的像素，将它们全部放入缓冲区并在一行完成后立即将缓冲区写入磁盘。主要问题是从 TIFF 中读取数据，因为数据是按条带组织的，并且不能保证在文件中线性分布（对于 LZW 压缩条带，也没有什么是线性的）。

我分析了我的软件，发现大部分时间都花在了复制内存块（memmove）上，并决定绕过我的阅读器类中的缓存进行轮换。现在整个过程快了大约 5%，这并不算多，而且现在所有的时间都花在了 fread() 中。我假设至少我的缓存执行得几乎和系统的 fread() 缓存一样好。

使用 Image Magick 和相同的 30.000 x 4.000 文件进行的另一项测试仅用了大约 10 秒即可完成。AFAIK Image Magick 将整个文件读入内存，在内存中处理，然后写回磁盘。这适用于数百兆字节的图像数据。

我正在寻找的是某种“元优化”，例如另一种处理像素数据的方法。除了逐个交换像素（并且需要从彼此远离的文件位置读取）之外，还有另一种策略吗？我应该创建一些中间文件来加速这个过程吗？欢迎任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T18:53:21.023

好的，鉴于您必须进行像素修正，让我们看看您的整体问题。30000x4000 像素的中等图像是 120M 的 8 位灰度图像数据和 240M 的 16 位图像数据。因此，如果您以这种方式查看数据，您需要问“30 分钟合理吗？” 为了进行 90 度旋转，您正在引发一个最坏情况的问题，即内存方面的问题。您正在触摸单列中的每个像素以填充一行。如果您按行工作，至少您不会将内存占用量增加一倍。

所以 - 120M 像素意味着您正在进行 120M 读取和 120M 写入，或 240M 数据访问。这意味着您每秒处理大约 66,667 像素，我认为这太慢了。我认为您应该每秒处理**至少50 万像素，可能更多。**

如果这是我，我会运行我的分析工具，看看瓶颈在哪里，然后把它们去掉。

在不知道您的确切结构并且不必猜测的情况下，我会执行以下操作：

**尝试为源图像使用一个连续的内存块**

我希望看到这样的旋转功能：

```
void RotateColumn(int column, char *sourceImage, int bytesPerRow, int bytesPerPixel, int height, char *destRow)
{
    char *src = sourceImage + (bytesPerPixel * column);
    if (bytesPerPixel == 1) {
        for (int y=0; y < height; y++) {
            *destRow++ = *src;
            src += bytesPerRow;
        }
    }
    else if (bytesPerPixel == 2) {
        for (int y=0; y < height; y++) {
            *destRow++ = *src;
            *destRow++ = *(src + 1);
            src += bytesPerRow;
            // although I doubt it would be faster, you could try this:
            // *destRow++ = *src++;
            // *destRow++ = *src;
            // src += bytesPerRow - 1;
        }            
    }
    else { /* error out */ }
} 
```

我猜循环内部可能会变成 8 条指令。在 2GHz 处理器上（比方说名义上每条指令 4 个周期，这只是一个猜测），您应该能够在一秒钟内旋转 6.25 亿像素。大致。

如果您不能连续进行，请同时处理多个 dest 扫描线。

如果源图像被分成块或者你有内存的扫描线抽象，你所做的就是从源图像中获取一条扫描线，然后一次旋转几十列到目标扫描线的缓冲区中。

假设您有一种抽象访问扫描线的机制，您可以在其中获取、释放和写入扫描线。

然后你要做的是弄清楚你愿意一次处理多少个源列，因为你的代码看起来像这样：

```
void RotateNColumns(Pixels &source, Pixels &dest, int startColumn, int nCols)
{
    PixelRow &rows[nRows];
    for (int i=0; i < nCols; i++)
        rows[i] = dest.AcquireRow(i + startColumn);

    for (int y=0; y < source.Height(); y++) {
        PixelRow &srcRow = source.AcquireRow();
        for (int i=0; i < nCols; i++) {
            // CopyPixel(int srcX, PixelRow &destRow, int dstX, int nPixels);
            sourceRow.CopyPixel(startColumn + i, rows[i], y, 1);
        }
        source.ReleaseRow(srcRow);
    }

    for (int i=0; i < nCols; i++)
        dest.ReleaseAndWrite(rows[i]);
} 
```

在这种情况下，如果您在较大的扫描线块中缓冲源像素，则不一定会使堆碎片化，并且您可以选择可能将解码的行刷新到磁盘。您一次处理 n 列，并且您的内存位置应该提高 n 倍。然后它就变成了你的缓存有多昂贵的问题。

**可以通过并行处理解决问题吗？**

老实说，我认为您的问题应该是 IO 限制，而不是 CPU 限制。我认为您的解码时间将占主导地位，但让我们假装它不是，笑着说。

以这种方式考虑 - 如果您一次读取一整行源图像，您可以将该解码的行扔到一个线程，该线程将其写入目标图像的适当列。所以写你的解码器，让它有一个像 OnRowDecoded(byte *row, int y, int width, int bytesPerPixel); 这样的方法。然后你在解码时旋转。OnRowDecoded() 打包信息并将其传递给拥有 dest 图像的线程，并将整个解码的行写入正确的 dest 列。当主线程忙于解码下一行时，该线程将所有写入到 dest。工作线程可能会首先完成，但也可能不会。

您需要将您的 SetPixel() 设置为线程安全的，但除此之外，没有理由这应该是一个串行任务。事实上，如果您的源图像使用 TIFF 将其划分为条带或图块的功能，您可以并且应该并行解码它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T14:24:23.683

如果您查看 TIFF 规范，可以将标签添加到设置[图像方向](http://www.awaresystems.be/imaging/tiff/tifftags/orientation.html)的图像 IFD 中。如果您适当地设置此标签，您可以更改图像旋转，而无需对图像进行解码和重新编码。

然而——这是一个**很大**的问题——你应该知道，虽然它看起来很简单，但如果在 TIFF 中重写 IFD 不是微不足道的，那么处理生态系统中所有异常的 TIFF 绝对不是微不足道的，所以要小心你如何去关于它。

# .net - Opening PDF in WPF with ActiveX

> ID：13358920
> 
> 赞同：1
> 
> 时间：2012-11-13T10:18:33.567
> 
> 标签：.net, wpf, pdf, activex

I'm a .NET developer; I need to open PDF files inside the user interface of my application. It's a standalone application (not a web application) running in Windows Vista; it's written in C# and uses WPF (Windows Presentation Foundation) technology for the UI. I'd like to use an ActiveX control (which could already reside in my pc). I have **Adobe** ***Reader*** 8.0, but I seem to understand that **Adobe** ***Acrobat*** is required (see one of the answers at [Opening a pdf in .NET](https://stackoverflow.com/questions/1634769/opening-a-pdf-in-net)). Could anyone just confirm that Adobe Reader is not sufficient? This is, of course, the first point to clarify. If so: are there any **free** ActiveX controls that I could download? Thank you very much in advance for your help!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T11:03:31.417

我认为您需要的是 Adob​​e Acrobat SDK，可[在此处](http://www.adobe.com/devnet/acrobat.html)免费下载。

其中包含诸如 AxAcroPDFLib.AxAcroPDF 之类的类，您可以访问它们，如您提到的讨论链接中所示。

恐怕我自己没有使用过它，所以我不知道用户会有什么要求，但希望这可以为您指明正确的方向。

# android - How do I create this layout in android

> ID：13358921
> 
> 赞同：0
> 
> 时间：2012-11-13T10:18:32.397
> 
> 标签：android, android-layout, android-xml, android-tablelayout

How do I create this layout in android

```
---------------------
|col1 | col2 | col3 |
|  col1   |  col2   |
--------------------- 
```

The first row is 3 columns equal width, and the second row is 2 row equal width. Is it possible to create this in TableLayout ? I did try width android:layout_span="2" for the last cell, but it does not end up in equal width.

```
<TableLayout
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content">
    <TableRow android:layout_marginTop="6dp">
        <Button 
            android:id="@+id/button1"
            android:layout_weight="33"
            android:textStyle="bold"
            android:text="@string/percent" />
        <Button 
            android:id="@+id/button2"
            android:layout_weight="33"
            android:textStyle="bold"
            android:text="@string/percent" />
        <Button 
            android:id="@+id/button8"
            android:layout_weight="33"
            android:textStyle="bold"
            android:text="@string/percent" />
    </TableRow>
    <TableRow android:layout_marginTop="6dp">
        <Button 
            android:id="@+id/button3"
            android:layout_weight="60"
            android:textStyle="bold"
            android:text="@string/percent" />
        <Button 
            android:id="@+id/button4"
            android:layout_weight="40"
            android:layout_span="2"
            android:textStyle="bold"
            android:text="@string/percent" />
    </TableRow>
</TableLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:28:59.677

您可以使用 LinearLayout 来获得该结果，试试这个：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >
       <Button 
            android:id="@+id/button1"
            android:layout_weight="1"
            android:layout_height="wrap_content"
            android:textStyle="bold"
            android:text="@string/percent" />
        <Button 
            android:id="@+id/button2"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:textStyle="bold"
            android:text="@string/percent" />
        <Button 
            android:id="@+id/button8"
            android:layout_weight="1"
            android:layout_height="wrap_content"
            android:textStyle="bold"
            android:text="@string/percent" />

</LinearLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

         <Button 
            android:id="@+id/button3"
            android:layout_weight="1"
            android:textStyle="bold"
            android:layout_height="wrap_content"
            android:text="@string/percent" />
        <Button 
            android:id="@+id/button4"
            android:layout_weight="1"
            android:layout_height="wrap_content"
            android:textStyle="bold"
            android:text="@string/percent" />
</LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T10:23:12.693

在第 2 行中，不要使用跨度并放置相等的权重：

```
<TableRow android:layout_marginTop="6dp" >

    <Button
        android:id="@+id/button3"
        android:layout_weight="50"
        android:text="@string/percent"
        android:textStyle="bold" />

    <Button
        android:id="@+id/button4"
        android:layout_weight="50"
        android:text="@string/percent"
        android:textStyle="bold" />
</TableRow> 
```

# mysql - SQL query to prepend prefix to existing value in a field

> ID：13358923
> 
> 赞同：37
> 
> 时间：2012-11-13T10:18:40.930
> 
> 标签：mysql, sql, joomla, phpmyadmin

I have searched and searched for an answer to this, and I think this must be child's play for anyone who KNOWS SQL (which is not me).

I want to insert a prefix to the values in a field of a table in my DB.

More specifically, I have a table jos_content in which I have a field 'title' (which contains the titles of the content items of my joomla site).

All the values in this field 'title' are names of individuals. Now all I want to do is add a prefix 'Mr.' to all the values of this field.

I can do this from phpmyadmin by clicking the edit pencil icon and simply adding Mr. in front of all the values but I have about 750 rows and an SQL command which can insert a prefix of 'Mr.' in front of all values of this field will be a great help.

I have read about the 'UPDATE' commands but that REPLACES the value with what you provide. But I want to let the values remain and add a prefix before them.

Please can anyone help me achieve this with a SQL command ?

Thanks a ton.

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-11-13T13:25:23.710

您没有其他条件，例如在所有行中更新此内容，然后您可以尝试

```
UPDATE jos_content SET title = CONCAT('Mr. ', title) 
```

如果你想有条件地更新这意味着特定的行需要更新你可以使用

```
 UPDATE jos_content SET title = CONCAT('Mr. ', title)  where fiedl_name ='condition'

eg: UPDATE jos_content SET title = CONCAT('Mr. ', title)  where id = '1' 
```

这将仅更新包含 id=1 的一行。

这样做之前的任何方式都应该保留备份

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-13T11:25:41.580

`UPDATE jos_content SET title = CONCAT('Mr. ', title) WHERE 1`

在测试查询之前，请先备份数据库。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-13T10:23:41.383

```
update tablename set title = 'Mr. ' || title where .... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-11T15:05:20.427

就这样做

例如，如果我想在国家代码前添加 +symbol：

```
UPDATE [masters].[country] SET Countrycode = '+' +Countrycode 
```

# javascript - Webgl Uncaught ReferenceError: createShaderFromScriptElement is not defined

> ID：13358924
> 
> 赞同：3
> 
> 时间：2012-11-13T10:18:44.487
> 
> 标签：javascript, html, canvas, html5-canvas, webgl

I can't find out what I am missing here, why do I get this error? Uncaught ReferenceError: createShaderFromScriptElement is not defined

I got this from a common tutorial and just pasted it. Browsers: Firefox and Chrome --> same error at both browsers

```
 <!DOCTYPE HTML>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>Zooming via HTML5 Canvas Context</title>
    </head>
    <body>

        <canvas id="canvas" width="200" height="200"></canvas>

        <script id="2d-vertex-shader" type="x-shader/x-vertex">
            attribute vec2 a_position;

            void main() {
            gl_Position = vec4(a_position, 0, 1);
            }
        </script>

        <script id="2d-fragment-shader" type="x-shader/x-fragment">
            void main() {
            gl_FragColor = vec4(0,1,0,1);  // green
            }
        </script>

        <script>
            window.onload = function() {
                // Get A WebGL context
                var canvas = document.getElementById("canvas");
                var gl = canvas.getContext("experimental-webgl");

                // setup a GLSL program

                var vertexShader = createShaderFromScriptElement(gl, "2d-vertex-shader");
                var fragmentShader = createShaderFromScriptElement(gl, "2d-fragment-shader");
                var program = createProgram(gl, [vertexShader, fragmentShader]);
                gl.useProgram(program);

                // look up where the vertex data needs to go.
                var positionLocation = gl.getAttribLocation(program, "a_position");

                // Create a buffer and put a single clipspace rectangle in
                // it (2 triangles)
                var buffer = gl.createBuffer();
                gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
                gl.bufferData(
                        gl.ARRAY_BUFFER,
                        new Float32Array([
                            -1.0, -1.0,
                            1.0, -1.0,
                            -1.0,  1.0,
                            -1.0,  1.0,
                            1.0, -1.0,
                            1.0,  1.0]),
                        gl.STATIC_DRAW);
                gl.enableVertexAttribArray(positionLocation);
                gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, 0, 0);

                // draw
                gl.drawArrays(gl.TRIANGLES, 0, 6);
            }

        </script>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T14:46:05.323

`createShaderFromScript`是外部脚本的一部分，而不是内置的。

无论您正在查看什么演示，都可能包含一个 webgl-utils 文件，例如：

[http://greggman.github.com/webgl-fundamentals/webgl/resources/webgl-utils.js](http://greggman.github.com/webgl-fundamentals/webgl/resources/webgl-utils.js)

它定义了一个`createShaderFromScript`.

# windows - Windows batch script for copying files to folder

> ID：13358927
> 
> 赞同：3
> 
> 时间：2012-11-13T10:19:12.067
> 
> 标签：windows, batch-file

I was able to do this in Linux, but Windows batch script is a lot different, hope someone can help me. I have a folder with a couple 100 files. I want a batch script that creates a folder for each of these files with the same name, but without the extension (eg: sheet1.xls will create a folder named sheet1).

After that each file should to moved to its corresponding folder (eg: sheet1.xls -> create folder sheet1 -> move the xls file to sheet1 folder).

Can anyone help me out with this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T10:29:28.720

```
for %%a in (C:\folder\*.*) do (
md "%%~pna"
move "%%a" "%%~pna"
) 
```

# javascript - 删除@后的单词

> ID：13358930
> 
> 赞同：0
> 
> 时间：2012-11-13T10:19:18.073
> 
> 标签：javascript

我如何去掉@之后的单词？例如，如果字符串是

```
12 @ 8.97 MB 
```

那么输出将变为

```
12 
```

如何在javascript中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T10:23:13.903

试试这个：

```
var index = str.indexOf('@', 0);
if (index != -1)
    var output = str.substring(0, index);
else 
    var output = str; 
```

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T10:40:35.220

只是`split`它，如果没有`@`char，它只会返回一个由 1 个字符串组成的数组，如果有 ，则`@`, 之前的所有内容都`@`将分配给`0`结果数组的第一个 ( ) 索引。换句话说：

```
 var preAt = someString.split('@')[0]; 
```

*字符串是否包含 0 或 1000 at*符号无关紧要，这将起作用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T10:36:46.223

尝试：

```
var mystring = "12@something";
return mystring.substring('@')[0]; 
```

# django - How to access json return values in angular.js action success callback

> ID：13358934
> 
> 赞同：1
> 
> 时间：2012-11-13T10:19:30.333
> 
> 标签：django, json, resources, angularjs

I'm trying to make a post call using resources from angular.js and adding a success and error callback.

```
wbsModule.factory('gridData', function($resource) {
    //define resource class
    var root = {{ root.pk }};
    var csrf = '{{ csrf_token }}';
    return $resource('{% url getJSON4SlickGrid root.pk %}:wpID', {wpID:'@id'},{
            get: {method:'GET', params:{root : root }, isArray:true},
            update:{method:'POST', headers: {'X-CSRFToken' : csrf }},
      });
}); 
```

I'm calling the update action like this:

```
args.item.$update([], successUpdateCallback, errorUpdateCallback); 
```

where I followed this [part](http://docs.angularjs.org/api/ngResource.%24resource) of the docs:

```
non-GET instance actions: instance.$action([parameters], [success], [error]) 
```

The server returns json like this if an error occurs:

```
jsonReturn = [{'error' : "Oops.. a problem occured. We could not save your last change in the highlighted row: "}]
        jsonReturn.append({'wp_id' : wp_id})
        try:
            for key, value in wpForm.errors.iteritems():
                jsonReturn.append({"form_errors" : "<br/>" + str(value)})
        except Exception, e:
            print e
        return HttpResponse(json.dumps(jsonReturn, indent=4), mimetype="application/json", status=400) 
```

For the error callback I am able access the error messages like this:

```
 function errorUpdateCallback(result){
            console.log(result.data);
            error = result.data[0].error;
            wp_id = result.data[1].wp_id;
            form_errors = result.data[2].form_errors;
            }
        }; 
```

But when I try to do the same for the success function I'm getting this error, which is thrown before entering the successUpdateCallback:

```
'undefined' is not a function (evaluation 'a.push(U(b[c]))')
 http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js 
```

Where I create the json the same as in the error case at the server:

```
jsonReturn = [{'message' : "Successfull update."}]
return HttpResponse(json.dumps(jsonReturn, indent=4), mimetype="application/json", status=200) 
```

and parsing the success callback the same as the error callback:

```
 function successUpdateCallback(result){
            console.log("in suc. update");
            console.log(result);
            message = result.data[0].message;
        }; 
```

Whereas when I return an empty json object I do not get this error and the successUpdateCallback is entered, printing "in suc.update" to the console:

```
jsonReturn = []
return HttpResponse(json.dumps(jsonReturn, indent=4), mimetype="application/json", status=200) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T14:24:40.117

备查：

Angular 期望服务器以我们调用 $update 或 $save 的资源的 json 表示来响应成功的 post 调用。

我在[这里](http://docs.angularjs.org/api/ngResource.%24resource)找到了。隐藏在评论中:)

```
 card.$save();
 // POST: /user/123/card/456 {id:456, number:'1234', name:'J. Smith'}
 // server returns: {id:456, number:'1234', name: 'J. Smith'}; 
```

因此，我从服务器返回资源的 json 表示形式，它按预期工作。

# c# - 在asp中向表中添加行

> ID：13358935
> 
> 赞同：1
> 
> 时间：2012-11-13T10:19:38.023
> 
> 标签：c#, asp.net, dynamic, viewstate

我想通过用户单击将行添加到表中，而不是在 asp 后面的代码中执行此操作，然后单击“addRowButton”时，只能将一行添加到表中。所以，我在谷歌上搜索了这个问题，在asp中看到了一些关于“ViewState”的文章导致了这个问题，但不明白如何使用或更改“ViewState”来解决这个问题。

这是我在 ASP 页面中的表格的模板：

```
<table runat="server" ID="myTable">
<tr><td>
<asp:textbox runat="server" ID="txt1"></asp:textbox>
</td></tr>
</table> 
```

我正在使用此代码将一些带有特定单元格的行添加到表中：

```
protected void AddNewRow(object sender, EventArgs e)
    { 
        HtmlTable tbl = (System.Web.UI.HtmlControls.HtmlTable)this.FindControl("myTable");
        HtmlTableCell cell = new HtmlTableCell();
        HtmlTableRow row = new HtmlTableRow();
        TextBox txt = new TextBox();
        txt.ID = "txtTest";
        cell.Controls.Add(txt);
        row.Controls.Add(cell);
        int rowNumber = tbl.Rows.Count;
        tbl.Controls.AddAt(rowNumber, row);
    } 
```

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T10:42:39.793

您需要将当前行数存储到 ViewState 字段中（使用`ViewState`当前 Page 上下文的属性）。或者将相同的信息存储在隐藏字段中，然后在页面事件`AddNewRow`期间调用 ViewState 所说的多次。`OnInit`

这是一些伪代码：

```
During OnInit:
    Is this a postback? If so...
        Read the number of table-rows N from ViewState["RowCount"]
        For(I=0 to N) AddTableRow()

During AddRow_ClickHandler
    AddTableRow()
    ViewState["RowCount"]++ 
```

# python - python mock side_effect or return_value dependent on call_count

> ID：13358939
> 
> 赞同：38
> 
> 时间：2012-11-13T10:19:48.023
> 
> 标签：python, mocking

To test a polling function I want to mock the calling of a sub function so that the first time it is called it will fail, and the second time it is called it will succeed. Here's a very simplified version of it:

```
poll_function(var1):
    value = sub_function(var1)  # First call will return None
    while not value:
        time.sleep(POLLING_INTERVAL)  
        value = sub_function(var1) # A subsequent call will return a string, e.g "data"
    return value 
```

Is this possible to do with a `Mock` object from the `mock` framework? I know `Mock` objects have a `call_count` attribute I should be able to use somehow.

Right now I've solved it by creating a custom mock object that I use to monkey patch `sub_function()`, but I feel there should be a better less verbose way of doing it:

```
def test_poll():
    class MyMock(object):                                                      

        def __init__(self, *args):                                             
            self.call_count = 0                                                

        def sub_function(self, *args, **kwargs):                             
            if self.call_count > 1:                                            
                return "data"            
            else:                                                              
                self.call_count += 1                                           
                return None  

    my_mock = MyMock()                                                         
    with patch('sub_function', my_mock.sub_function):           
        ok_(poll_function()) 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-11-13T10:57:15.030

如果我正确理解您的问题，您可以通过[设置`side_effect`为 iterable 来](https://docs.python.org/3/library/unittest.mock.html#unittest.mock.Mock.side_effect)做到这一点。对于您的简单案例：

```
>>> mock_poll = Mock(side_effect=[None, 'data'])
>>> mock_poll()
None
>>> mock_poll()
'data' 
```

如果您想允许无限数量的呼叫，请使用`itertools` `cycle`和`chain`函数：

```
>>> mock_poll = Mock(side_effect=chain(['first'], cycle(['others']))) 
```

# jquery - jQuery Mobile Tapping 事件高亮

> ID：13358943
> 
> 赞同：1
> 
> 时间：2012-11-13T10:20:04.777
> 
> 标签：jquery, html, jquery-mobile

我正在使用 jquery mobile 和 HTML5 开发一个移动页面。

我想更改 div 颜色（最初颜色为黑色），当我按下（点击或单击）该 div 时，我想将该 div 的颜色从黑色更改为白色，并且在我移除我的点击后，即在我取出我的那个 div 的手指我想像以前一样恢复为黑色。

有这种活动吗？请在这方面帮助我。在此先感谢。

```
<!--START:Initial state of  Div Where i want to change color to white when i press that div and change back to normal after i remove my finger-->
<div class="colorBlack inactive"><div>
<!--END:Initial state of Div Where i want to change color to white when i press that div and change back to normal after i remove my hand-->

<!--START: Div class is changed to colorWhite,when i am tapping that div or i am holding that div with my finger-->
<div class="colorWhite active"><div>
<!--END: Div class is changed to colorWhite,when i am tapping that div or i am holding that div with my finger-->

<!--START: Div class is changed back to colorBlack,when i remove my finger -->
<div class="colorBlack active"><div>
<!--START: Div class is changed back to colorBlack,when i remove my finger --> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T10:33:42.843

您可以为此使用触摸开始和触摸结束事件。

```
$('#test').bind('touchstart', function() {
    $(this).css('background-color', 'black');
});

$('#test').bind('touchend', function() {
    $(this).css('background-color', 'white');
});​ 
```

这是工作[演示](http://jsfiddle.net/FaJt4/1/)

[您可以在MDN 网站](https://developer.mozilla.org/en-US/docs/DOM/TouchEvent)上找到有关本机 DOM 事件的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-10T19:27:10.817

```
<button type="button" class="btn btn-default touchbtn">Test</button>

$('.touchbtn').bind('touchstart', function() {
    $(this).css('background-color', 'black');
});

$('.touchbtn').bind('touchend', function() {
    $(this).css('background-color', 'white');
}); 
```

# php - 在 PHP 中将字符串转换为字符

> ID：13358949
> 
> 赞同：1
> 
> 时间：2012-11-13T10:20:28.327
> 
> 标签：php, xml, string, wsdl, character

我正在开发一个应用程序，它使用对另一台服务器的 SOAP 调用。SOAP 使用 WSDL(XML)，它定义了每个对象的所有属性和类型。所有的逻辑都是用 PHP 开发的。

问题是 WSDL 需要一个字符对象。PHP有什么办法可以将对象从字符串转换为字符？无法从提供程序更改 WSDL 文件，因为有许多其他客户端使用此 WSDL。

我尝试了以下但没有成功。

```
$year = $_POST['birthdayYear'];
$property['birthdayYear'] = chr($year); 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T10:24:34.707

[`chr()`](http://php.net/manual/en/function.chr.php)获取参数传递的ascii值，并将其转换为字符。事实上，字符串是一个字符序列，所以我看不出这有什么意义。如果您更喜欢有一个字符列表，请使用[`str_split()`](http://php.net/manual/en/function.str-split.php)（同样，我不确定您是否真的想要那个）

# java - 使用来自 javascript 的索引获取 spring 模型属性列表元素

> ID：13358950
> 
> 赞同：1
> 
> 时间：2012-11-13T10:20:36.900
> 
> 标签：java, javascript, jquery, spring, spring-mvc

抱歉，如果在其他地方有人问过这个问题，但我环顾四周，找到了一些答案，但不是一个完整的例子，我仍然对此表示怀疑。

因此，我将 Spring 控制器中的自动填充列表添加到我的 jsp 中，并且我想在我的 javascript/jquery 函数内的列表中添加项目。可能吗？

我尝试了下面的代码来测试功能，但它不起作用（列表元素根本没有出现在生成的 html 中）。所以我不确定我是否弄乱了 javascrit/spring/jsp 语法，或者它是否不可能。

这是代码：

控制器代码：

```
@RequestMapping(value="/create_custobject.html",method = RequestMethod.GET)
public ModelAndView showCreateCustObjectPage() {
    Map<String, Object> model = new HashMap<String, Object>();

    CreateObjectForm form = new CreateObjectForm();
    model.put("createObjectform", form);

    return new ModelAndView("create_custobject", model) ;

} 
```

表格代码：

```
public class CreateObjectForm {

      private AutoPopulatingList<Criteria> ruleArray = new AutoPopulatingList<Criteria>(Criteria.class);

     public AutoPopulatingList<Criteria> getRuleArray() {
    return ruleArray;
        }

         public void setRuleArray(AutoPopulatingList<Criteria> ruleArray) {
    this.ruleArray = ruleArray;
        }

         public CreateObjectForm() {}
      } 
```

标准代码：

```
public class Criteria{

   String attribute;

    String operator;
       //... constructor + getters and setters
} 
```

javascript/jquery 代码（在与 jsp 相同的页面上）：

```
<script type="text/javascript">
$(document).ready(function(){
    //startup functionality

 var i = 0;
 document.getElementById("addCriteria").onclick = function() {

         $("#msgid").html("${ruleArray[i].attribute}");

        ${ruleArray[i].attribute} = $('#attributeValue').val();             
        ${ruleArray[i].operator} = $('#operatorValue').val(); 

                    i++;            

      }
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T12:01:40.293

对于表单中的现有项目，请使用 jstl 作为

```
<c:forEach items="${form.items}" var="item" varStatus="status" >
<span class="count" > 
<form:input   path="items[${status.index}].field" /> 
```

这将呈现这样的形式

```
<form id = "idform" >
<span class="count" > 
    <input   name="items[0].field"  id="items0.field" />
</span>
</form> 
```

然后您只需添加带有相应索引的 javascript 新表单“行”

例如

```
 var is = $('.count').size()
 $('#idform span:last').after('<span class="count" ><input name="items[' + is + '].field"' + is + '.field" /></span>') 
```

我认为如果您使用的是 spring 3 +，则不需要使用 AutopopulatingList ，任何集合都应该足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T10:30:01.500

您不正确地混合 JSP EL 和 Javascript。您不能`var i`在 JSP 表达式中使用，即。`${ruleArray[i].operator}`. 我建议使用 JSTL 遍历列表并在脚本中创建属性。

此时，您的脚本可以设置为仅`0`在表达式中使用字符串文字。我假设您需要比这更强大的功能，您能否更好地描述它。

```
$(document).ready(function(){
     document.getElementById("addCriteria").onclick = function() {

     $("#msgid").html("${ruleArray[0].attribute}");

     //I assume you wanted to set the element to the value pulled from JSP EL
     $('#attributeValue').val(${ruleArray[0].attribute});           
     $('#operatorValue').val(${ruleArray[0].operator});           

     }
 } 
```

使用 JSTL 的解决方案类似于：

```
<script>
 var criteria = [];
 <c:forEach var="criteria" items=${ruleArray}>
    criteria.push({attr:${criteria.attribute}, oper: ${criteria.operator});
 </c:forEach>

 for(var i = 0; i < criteria.length; i++){
  alert(criteria[i].attribute);
 }
</script> 
```

该解决方案基本上使用 JSTL 编写 Javascript。修改控制器以返回 JSON 并在页面加载时进行 Ajax 调用可能是更好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T10:38:53.793

在以下行中`i`，您在 jsp 代码中引用，但 i 未定义：

```
$("#msgid").html("${ruleArray[i].attribute}"); 
```

定义的javascript代码`i`在客户端（即浏览器）上执行。在将呈现的 html 发送到客户端之前，jsp 代码在服务器上执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-05T03:22:40.067

即使这个线程较旧并且回答正确，为了其他初学者的利益，也为了解释逻辑以实现删除添加的行。

让我用一个最小的代码和用户示例来解释一下*名字、电子邮件、用户名和性别*字段。
考虑到您从控制器发送用户列表中的 3 个空用户，这将创建 3 个空行。现在您想要添加行并将添加的行动态绑定到 modelAttribute。

（如果是最初的 3 行）如果您检查/查看页面源代码，您将看到

*   `<input> tags`具有不同**id 的**Rows( )喜欢`list0.firstName` `list1.firstName`

*   `<input> tags`具有不同**名称**的行（ ），例如`list[0].firstName` `list[1].firstName`

每当提交表单时，服务器不会考虑**id**（添加仅用于帮助客户端验证），但**name 属性**将被解释为请求参数并用于构造你的 modelAttribute，因此属性名称在插入行时非常重要。

### 添加行

那么，如何构造/追加新行？
如果我从 UI 提交 6 个用户，控制器应该从 usersList 接收 6 个用户对象。下面给出了实现相同的步骤
1\. 右键单击`->` **​​查看页面源代码**。你会看到这样的行（你可以`*[0].*`在第一行和`*[1].*`第二行看到）

```
<tr>
    <td><input id="list0.firstName" name="list[0].firstName" type="text" value=""/></td>
    <td><input id="list0.email" name="list[0].email" type="text" value=""/></td>
    <td><input id="list0.userName" name="list[0].userName" type="text" value=""/></td>
    <td>
        <span>
            <input id="list0.gender1" name="list[0].gender" type="radio" value="MALE" checked="checked"/>Male
        </span>
        <span>
            <input id="list0.gender2" name="list[0].gender" type="radio" value="FEMALE"/>Female
        </span>
    </td>
</tr>

<tr>
    <td><input id="list1.firstName" name="list[1].firstName" type="text" value=""/></td>
    <td><input id="list1.email" name="list[1].email" type="text" value=""/></td>
    <td><input id="list1.userName" name="list[1].userName" type="text" value=""/></td>
    <td>
        <span>
            <input id="list1.gender1" name="list[1].gender" type="radio" value="MALE" checked="checked"/>Male
        </span>
        <span>
            <input id="list1.gender2" name="list[1].gender" type="radio" value="FEMALE"/>Female
        </span>
    </td>
</tr> 
```

2.  复制第一行并构造一个 javascript 字符串并将 '0' 替换为变量名索引。如以下示例所示

```
'<tr>'+
    '<td><input id="list'+ index +'.firstName" name="list['+ index +'].firstName" type="text" value=""/></td>'+
    '<td><input id="list'+ index +'.email" name="list['+ index +'].email" type="text" value=""/></td>'+
    ...
'</tr>'; 
```

3.  将构造的行附加到`<tbody>`. 在 UI 中添加行也将在提交表单时在控制器中接收新添加的行。

### 删除行

删除行有点复杂，我将尝试以最简单的方式解释

*   假设您添加了 row0、row1、row2、row3、row4、row5

*   删除了第 2 行、第 3 行。不要只是隐藏行，而是通过捕获事件将其从 DOM 中删除。

*   现在 row0,row1,row4,row5 将被提交，但在控制器中，您的 userList 将有 6 个用户对象，但 user[2].firstName 将为 null，user[3].firstName 将为 null。

*   因此，在您的控制器中迭代并检查 null 并删除用户。（使用迭代器不要使用 foreach 删除用户对象）

### 发布代码以使初学者受益。

```
//  In Controller
@RequestMapping(value = "/app/admin/add-users", method = RequestMethod.GET)
public String addUsers(Model model, HttpServletRequest request)
{
    List<DbUserDetails> usersList = new ArrayList<>();

    ListWrapper userListWrapper = new ListWrapper();
    userListWrapper.setList(usersList);

    DbUserDetails user;
    for(int i=0; i<3;i++)
    {
        user = new DbUserDetails();
        user.setGender("MALE"); //Initialization of Radio button/ Checkboxes/ Dropdowns
        usersList.add(user);
    }

    model.addAttribute("userListWrapper", userListWrapper);
    model.addAttribute("roleList", roleList);

    return "add-users";
}

@RequestMapping(value = "/app/admin/add-users", method = RequestMethod.POST)
public String saveUsers(@ModelAttribute("userListWrapper") ListWrapper userListWrapper, Model model, HttpServletRequest request)
{
    List<DbUserDetails> usersList = userListWrapper.getList();
    Iterator<DbUserDetails> itr = usersList.iterator();

    while(itr.hasNext())
    {
        if(itr.next().getFirstName() == null)
        {
            itr.remove();
        }
    }

    userListWrapper.getList().forEach(user -> {
        System.out.println(user.getFirstName());
    });
    return "add-users";
}

//POJO
@Entity
@Table(name = "userdetails")
@XmlRootElement(name = "user")
public class DbUserDetails implements Serializable
{
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Integer id;
    private String  firstName;
    private String  userName;
    private String  email;
    private String  gender;

    //setters and getters
}

//list wrapper
public class ListWrapper
{
    private List<DbUserDetails> list;

    //setters and getters
} 
```

在 JSP 中

```
<form:form method="post" action="${pageContext.request.contextPath}/app/admin/add-users" modelAttribute="userListWrapper">
    <table class="table table-bordered">
        <thead>
            <tr>
                <th><spring:message code="app.userform.firstname.label"/></th>
                <th><spring:message code="app.userform.email.label"/></th>
                <th><spring:message code="app.userform.username.label"/></th>
                <th><spring:message code="app.userform.gender.label"/></th>
            </tr>
        </thead>
        <tbody id="tbodyContainer">
            <c:forEach items="${userListWrapper.list}" var="user" varStatus="loop">
                <tr>
                    <td><form:input path="list[${loop.index}].firstName" /></td>
                    <td><form:input path="list[${loop.index}].email" /></td>
                    <td><form:input path="list[${loop.index}].userName" /></td>
                    <td>
                        <span>
                            <form:radiobutton path="list[${loop.index}].gender" value="MALE" /><spring:message code="app.userform.gender.male.label"/>
                        </span>
                        <span>
                            <form:radiobutton path="list[${loop.index}].gender" value="FEMALE" /><spring:message code="app.userform.gender.female.label"/>
                        </span>
                    </td>
                </tr>
            </c:forEach>
        </tbody>
    </table>
    <div class="offset-11 col-md-1">
        <button type="submit" class="btn btn-primary">SAVE ALL</button>     
    </div>
</form:form> 
```

Javascript 需要包含在 JSP 中

```
var currentIndex = 3; //equals to initialRow (Rows shown on page load)
function addRow()
{
    var rowConstructed = constructRow(currentIndex++);
    $("#tbodyContainer").append(rowConstructed);
}

function constructRow(index)
{
    return '<tr>'+
    '<td><input id="list'+ index +'.firstName" name="list['+ index +'].firstName" type="text" value=""/></td>'+
    '<td><input id="list'+ index +'.email" name="list['+ index +'].email" type="text" value=""/></td>'+
    '<td><input id="list'+ index +'.userName" name="list['+ index +'].userName" type="text" value=""/></td>'+
    '<td>'+
        '<span>'+
            '<input id="list'+ index +'.gender1" name="list['+ index +'].gender" type="radio" value="MALE" checked="checked"/>Male'+
        '</span>'+
        '<span>'+
            '<input id="list'+ index +'.gender'+ index +'" name="list['+ index +'].gender" type="radio" value="FEMALE"/>Female'+
        '</span>'+
    '</td>'+
'</tr>';
} 
```

# c# - MessageSecurityException，如何修复不同的客户端和服务器时间？

> ID：13358951
> 
> 赞同：0
> 
> 时间：2012-11-13T10:20:38.970
> 
> 标签：c#, wcf

尝试使用 WCF 连接到服务器时出现此错误，并且我的客户端时间与服务器时间不同：

```
System.ServiceModel.Security.MessageSecurityException: An unsecured or 
   incorrectly secured fault was received from the other party. See the inner 
   FaultException for the fault code and detail. ---> 
   System.ServiceModel.FaultException: An error occurred when verifying security 
   for the message. 
```

我的问题是，有没有办法解决这个问题？或者这真的是 wcf 服务的限制吗？我无法关闭绑定的安全性，因为在规范中它应该受到保护。

我将 TransportWithMessageCredential 用于我的绑定安全模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T10:26:14.913

您需要`FaultContract`在接口方法上定义`OperationContract`. 看看[这里](http://msdn.microsoft.com/en-us/library/ms752208.aspx)。

此外，您的故障合约对象需要与 Action 命名空间具有相同的命名空间。

尝试调试服务。详细信息可以在[这里](https://stackoverflow.com/questions/315210/unable-to-debug-wcf-service-message)找到。

# jenkins - Jenkins / Hudson 自动置换参数化构建的参数值

> ID：13358952
> 
> 赞同：0
> 
> 时间：2012-11-13T10:20:43.780
> 
> 标签：jenkins, hudson, build-process, build-automation, jenkins-plugins

我有一个参数化构建，其中有一些关于如何构建项目的选项。例如：

*   颜色：红色、绿色或蓝色
*   包：是的，没有

由于此列表可能会增长，并且我想知道哪个配置特别损坏，我希望 Jenkins 构建此构建的所有变体。因此，在每次签入后，它会使用所有可用颜色以及带和不带包装的每种颜色执行构建。

有这样的事情吗？具体来说，我想避免为构建的每个配置创建一个新作业。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T10:24:16.763

Jenkins 有矩阵项目，请参阅[wiki](https://wiki.jenkins-ci.org/display/JENKINS/Building+a+matrix+project)。他们做的正是你想要的，甚至更多。

# r - ggplot() 中 geom_line() 的应用

> ID：13358953
> 
> 赞同：1
> 
> 时间：2012-11-13T10:20:48.907
> 
> 标签：r, ggplot2

我已经使用 ggplot() 来显示我的数据的均值和方差，但我不知道为什么虽然我使用了 geom_line() 但根据实验结果没有连接为一条线。数据框只是一个例子，如果它很奇怪，对不起。

```
dfc
  m1   s1 sd1.5      sd1.10 sd1.15 sd1.20 sd1.25 sd1.30
1 10  n=4     1 experiment1     15     20     25     30
2 12  n=8     1 experiment1     15     20     25     30
3 14 n=12     2 experiment1     15     20     25     30
4 13  n=4     1 experiment2     15     20     25     30
5 16  n=8     2 experiment2     15     20     25     30
6 19 n=12     1 experiment2     15     20     25     30

ggplot(dfc, aes(x=s1,y=m1,colour=sd1.10)) + 
  geom_errorbar(aes(ymin=m1-sd1.5,ymax=m1+sd1.5),width=0.1)+
  geom_line()+
  geom_point() 
```

![在此处输入图像描述](../Images/dee2768b88a9869cb6402abb1cd6d74d.png)

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T10:31:48.670

只需添加`aes(group = sd1.10)`到`geom_line`以告知`ggplot`哪些点属于一组：

```
ggplot(dfc, aes(x=s1,y=m1,colour=sd1.10)) + 
  geom_errorbar(aes(ymin=m1-sd1.5,ymax=m1+sd1.5),width=0.1)+
  geom_line(aes(group = sd1.10))+
  geom_point() 
```

![在此处输入图像描述](../Images/88fe1e32ec509ef0210c826304c8ab56.png)

# python - Python：结合itertools和sets来节省内存

> ID：13358955
> 
> 赞同：2
> 
> 时间：2012-11-13T10:20:51.553
> 
> 标签：python, memory-management, set, itertools

所以几天前我在 Python 中发现了 Sets，我很惊讶以前从未想过它们，尽管它们让很多事情变得非常简单。我稍后再举个例子。

有些事情我还不清楚。文档说可以从可迭代对象中创建集合，并且操作员总是返回新的集合，但是他们总是将所有数据从一个集合复制到另一个集合并从可迭代对象中复制吗？我处理大量数据，并且希望拥有与 itertools 非常相似的 Set 和集合运算符。因此 Sets([iterable]) 更像是一个包装器，并且运算符 union、intersection 等将返回“iSets”并且不会复制任何数据。一旦我迭代我的最终集合，他们都会评估。最后，我真的很想拥有“iSet”运营商。

**目的：** 我使用 mongoengine 与 MongoDB 合作。我保存了文章。有些与用户相关联，有些被标记为已读，有些则显示给用户，依此类推。将它们包装在不加载所有数据的集合中将是组合、相交等它们的好方法。显然我可以进行特殊查询，但并非总是如此，因为 MongoDB 不支持连接。所以我最终在 Python 中进行连接。我知道那时我可以使用关系数据库，但是，我不需要经常进行连接，而且在我的情况下，MongoDB 的优势超过了它们。

**所以你怎么看？**是否已经有第三方模块？几行结合 itertools 和 Sets 可以吗？

**编辑：** 我接受了 Martijn Pieters 的回答，因为它显然是正确的。我最终只将 ID 加载到集合中以使用它们。此外，Python 中的集合具有相当好的运行时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T10:22:13.243

集合就像`dict`and `list`; 在创建时，他们从种子迭代中复制引用。

迭代器*不能*是集合，因为您不能强制执行集合的唯一性要求。您无法知道迭代器产生的未来值是否已经被看到过。

此外，为了让您确定两个迭代之间的交集是什么，您*必须*从这些迭代中的至少一个中加载所有数据以查看是否有任何匹配项。对于第二个迭代中的每个项目，您需要测试该项目是否已在第一个迭代中看到。为了有效地做到这一点，您需要将第一个迭代中的所有项目加载到一个集合中。*另一种方法是从第二个迭代中的每个项目*从头到尾循环遍历第一个迭代，从而导致指数级的性能下降。

# perl - 以干净的方式查看变量内容

> ID：13358962
> 
> 赞同：7
> 
> 时间：2012-11-13T10:21:12.653
> 
> 标签：perl, catalyst, template-toolkit

所以我用来查看变量内容的方式是在我的模板工具包中使用 Data::Dumper：

```
[% 使用自卸车 %]
[% Dumper.dump(varname) %]

```

但是我得到的结果有点乱——所有关于表关系、列类型和属性等的信息。

我想知道是否有一种方法可以获取“干净”的变量内容-仅在查询的当前结果+相关结果集（即，当我将 php 与 cakephp 框架一起使用时，有一个“调试（varname）”命令它提供了这样的结果，看起来像这样[http://pastebin.com/Hut0LnAb](http://pastebin.com/Hut0LnAb)）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T10:34:40.173

[数据::打印机](https://metacpan.org/module/Data%3a%3aPrinter)来救援！它的对象转储更易于阅读：

```
my $obj = SomeClass->new;
p($obj);
# produces:
\ SomeClass  {
    Parents       Moose::Object
    Linear @ISA   SomeClass, Moose::Object
    public methods (3) : bar, foo, meta
    private methods (0)
    internals: {
       _something => 42,
    }
} 
```

它与模板工具包兼容：

```
[% USE DataPrinter %]
html-formatted, colored dump of the same data structure:
[% DataPrinter.dump_html( myvar ) %] 
```

它也“知道”如何处理 DBIx::Class：

```
use Data::Printer
    filters => {
        -external => [qw[DB]], # use DB filter
    }, class => {
        expand => 2, # traverse object 2-levels deep
        linear_isa => 0, # hide not-so-relevant information
    };

...

my $obj = $schema
    ->resultset('AddressState')
    ->search({}, { prefetch => [qw[country]] })
    ->single;
p $obj; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T00:45:22.683

你可以用

```
 [% Dumper.dump_html(variable) %] 
```

请参阅： [http ://template-toolkit.org/docs/modules/Template/Plugin/Dumper.html](http://template-toolkit.org/docs/modules/Template/Plugin/Dumper.html)

# php - 使用 PHP 在下拉选择中显示所选值

> ID：13358963
> 
> 赞同：1
> 
> 时间：2012-11-13T10:21:14.890
> 
> 标签：php

我正在尝试根据数据库信息加载下拉选项值。我有以下代码并且工作正常，但我不知道如何在下面编写代码以显示所选值。

```
$output = null;

foreach ($records->result() as $row) {
    $output .= "<option value='".$row->sub_category_id."'>".$row->sub_category_name."</option>";
}
return $output; 
```

我知道我应该使用类似下面的东西，但我不明白如何将下面的代码与上面的代码放在一起。

```
 if ($row->sub_category_id == $sub_category_id) {select="selected"} 
```

你能告诉我吗？
谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T10:25:03.310

你几乎正确地完成了它。干得好：

```
$output = null;

foreach ($records->result() as $row){
   $selected="";
   if($row->sub_category_id==$sub_category_id) $selected="selected";
   $output .= "<option $selected value='".$row->sub_category_id."'>".$row->sub_category_name."</option>";

}
return $output; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T10:25:54.943

使用三元运算符：

```
foreach ($records->result() as $row){

 $output .= "<option value='".$row->sub_category_id."' " .$row->sub_category_id==$sub_category_id ? 'selected="selected"':''+ ">".$row->sub_category_name."</option>";

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T10:26:15.560

您需要设置一个选定的值：

```
$selectedValue = 1; // Selected value in dropdown.

foreach ($records->result() as $row){
  $output .= "<option value='".$row->sub_category_id."'".($row->sub_category_id == $selectedValue ? " selected" : "").">".$row->sub_category_name."</option>";
}
return $output; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T10:29:50.827

这应该做得很好，其中“$sub_category_id”是当前选定选项的 id

```
$sub_category_id = 1; //Selected ID
$output = "<select>";
foreach ($records->result() as $row){
    $selected = "";
    if ($sub_category_id == $row->sub_category_id) {
        $selected = "selected='selected'";
    }
    $output .= "<option value='{$row->sub_category_id}' {$selected}>{$row->sub_category_name}</option>";
}
$output .= "</select>"; 
```

# c# - 从 Datagridview 读取到 TextBox 的快速方法

> ID：13358964
> 
> 赞同：0
> 
> 时间：2012-11-13T10:21:16.790
> 
> 标签：c#, datagridview, textbox, readfile

从 DataGridView 读取然后将数据导出到 RichTextBox 时遇到问题。我制作了一个程序，从 4 个 dataGridView 读取数据并将每个单元格的数据导出到文本框中的字符串。对于小文件，它们工作得很好，但是当我有更大的文件时，我的程序会冻结并且不会显示结果。有什么办法可以解决吗？

我用来读取excel中的单元格的代码：

```
for (int i = 0; i < dataGridView4.Rows.Count - 1; i++)
{
    if (dataGridView4.Rows[i].Cells["ABC"].Value.ToString() != "")
    {
        richTextBox1.Text += "ABC_ " + dataGridView4.Rows[i].Cells["ABC"].Value.ToString() 
        + " " + dataGridView4.Rows[i].Cells["DEF"].Value.ToString().Replace("\n", "") + ";";
    }
} 
```

当然它会重复这个循环很多次，因为我在 datagridview 中有很多列

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T10:29:51.483

代替

```
richTextBox1.Text += "ABC_ " + dataGridView4.Rows[i].Cells["ABC"].Value.ToString() 
                + " " + dataGridView4.Rows[i].Cells["DEF"].Value.ToString().Replace("\n", "") + ";"; 
```

利用：

```
richTextBox1.AppendText("ABC_ " + dataGridView4.Rows[i].Cells["ABC"].Value.ToString() 
                + " " + dataGridView4.Rows[i].Cells["DEF"].Value.ToString().Replace("\n", "") + ";"); 
```

它会工作得更快。

除此之外，您可以使用 StringBuilder 代替，您可以在其中附加文本，然后在最后，您可以将该文本设置为richTextBox1。

```
StringBuilder sb = new StringBuilder();
for (int i = 0; i < dataGridView4.Rows.Count - 1; i++)
{
     if (dataGridView4.Rows[i].Cells["ABC"].Value.ToString() != "")
     {

           sb.Append("ABC_ " + dataGridView4.Rows[i].Cells["ABC"].Value.ToString()
                    + " " + dataGridView4.Rows[i].Cells["DEF"].Value.ToString().Replace("\n", "") + ";");
     }
}
richTextBox1.Text = sb.ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T10:46:40.230

问题解决了，但我必须解释一下。

NikolaD 的解决方案会快很多，因为该代码不会在大循环中访问复杂的控件（richTextBox）。

表单控件值的任何更新都会触发一些事件。最慢的是屏幕更新。如果你运行这 10000 次 - 这将需要很多时间。

将数据写入（缓冲）到仅存储在 RAM（非常快的内存）中的普通变量、List 或 StringBuilder 的速度要快得多，因为它不必更新显示。

不要尝试每隔几微秒更新一次屏幕，这是不可能的:)

# ios - 检查一个对象何时被拖动到另一个对象上

> ID：13358966
> 
> 赞同：1
> 
> 时间：2012-11-13T10:21:35.797
> 
> 标签：ios, objective-c, touch-event

我有一个简单的例子：[![截屏](../Images/4ed3fb5bd1230be49b05d2af5aec445b.png)](https://i.stack.imgur.com/mTKme.png)

*   1个可拖动对象（红球）
*   7 个对象（矩形）

我想将球的对象拖到矩形的对象上，当球在某个矩形上时，矩形应该悬停。有一些我可以使用的事件吗？我知道我可以使用方法`forControlEvents:UIControlEventTouchDragOutside | UIControlEventTouchDragInside`并将其分配给 ball 实例，但在这种情况下，我将不得不遍历所有矩形并检查 ball 是否超过其中的某个人。相反，我想到了解决方案，在该解决方案中，矩形本身将知道对象在其上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T10:32:07.827

您必须查看：CGRectContainsRect 和 CGRectContainsPoint [CGGeometry 参考](https://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CGGeometry/Reference/reference.html)

# extjs - 商店调用服务器但不返回

> ID：13358967
> 
> 赞同：0
> 
> 时间：2012-11-13T10:21:40.190
> 
> 标签：extjs, extjs4

我对 store.load 的调用永远不会返回回调函数。如果此存储在网格中定义，则消息“正在加载..”永远不会消失。

```
myStore.load({
        callback: function () {
            alert('returned');

        },
        params: {'person':1, 'datePost':calendarPost.getValue()}

    }); 
```

没有显示错误，服务器（rails）没有错误地完成它的工作。

我已经尝试添加一个“失败：函数”，但它也没有被调用。

这是我的商店定义：

```
var myStore = Ext.create('Ext.data.Store', {
model: 'App.model.Post',
proxy: {
    type: 'ajax',
    format: 'json',
    url: 'posts/build_posts',
    actionMethods :{
        read   : 'POST'
    }
}
}); 
```

这是从服务器返回的（真实）数据：

```
[
{"chegada":null,"consulta_id":null,"convenio_id":1,"data":"2012-11-13","encaixe":false,"hora":"2000-01-01T08:00:00Z","id":40031,"inicio_consulta":null,"medico_id":1,"observacao":null,"paciente_id":1948,"tipo":1},
/* Took out similiar ones */
{"chegada":null,"consulta_id":null,"convenio_id":null,"data":"2012-11-13","encaixe":false,"hora":"2000-01-01T09:15:00-02:00","id":null,"inicio_consulta":null,"medico_id":null,"observacao":null,"paciente_id":null,"tipo":null},
/* Took out similiar ones */
{"chegada":null,"consulta_id":null,"convenio_id":52,"data":"2012-11-13","encaixe":false,"hora":"2000-01-01T14:00:00Z","id":40042,"inicio_consulta":null,"medico_id":1,"observacao":null,"paciente_id":1732,"tipo":1}
/* And so on.. */
] 
```

这是我的模型定义：

```
Ext.define('App.model.Post',{
    extend: 'Ext.data.Model',
    fields: ['id', 'hora', 'data','chegada','tipo','encaixe','nome','paciente_id','consulta_id','inicio_consulta','convenio_id']
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T23:22:28.470

我有问题。它缺少一个 Ext.require('App.model.Post'); 在我的 js 文件中。

没有错误消息使编码变得困难。

# sql - 如何通过 ssh 和 psql 从 bash 变量运行 SQL 命令？

> ID：13358973
> 
> 赞同：3
> 
> 时间：2012-11-13T10:22:02.540
> 
> 标签：sql, bash, ssh, escaping, psql

我确实想运行一个 SQL 命令，该命令通过 .bashrc 存储在 bash 变量中`ssh postgres@hostname psql dbname -c SQL_COMMAND`。

考虑到 SQL 命令中有字符串，运行它的正确方法是什么，所以它被正确转义了？

例子：`SQL_COMMAND="SELECT 'aaa'"`

我正在寻找一种处理转义的解决方案，这样我就可以轻松地运行其他 SQL 命令，而不必自己转义它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T12:34:31.227

这在 shell 中是很尴尬的。如果可以选择，我会使用对元字符不太敏感的脚本语言。壳只是痛苦。我知道获得可靠原始字符串的唯一方法是使用（a）输入函数，例如`read`；(b) 临时文件；或 (c) 使用此处引用的文档。

这就是我要做的，利用`ssh`通过标准输入的方式：

```
$ ssh hostname psql <<"__END__"
SELECT 'aaa!*#${notavar}' FROM "generate_series"(1,2);
__END__

     ?column?     
------------------
 aaa!*#${notavar}
 aaa!*#${notavar}
(2 rows) 
```

不幸的是，您不能轻松地将其包装起来`$( ... )`以将其存储在 shell 变量中。它似乎会起作用，但是某些元字符（例如）`!`会引起问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T10:33:42.553

似乎只为我工作`psql -c "$SQLCOMMAND"`

```
% export SQLCOMMAND='select "generate_series"(1, 5, 1);'
% echo $SQLCOMMAND
select "generate_series"(1, 5, 1);
% psql -c "$SQLCOMMAND"
 generate_series 
-----------------
               1
               2
               3
               4
               5
(5 rows) 
```

或者

```
% export SQLCOMMAND="SELECT 'aaa' FROM \"generate_series\"(1,2);"
% echo $SQLCOMMAND
SELECT 'aaa' FROM "generate_series"(1,2);
% psql -c "$SQLCOMMAND"
 ?column? 
----------
 aaa
 aaa
(2 rows) 
```

如果您可以将 SQL 语句正确地放入变量中，那么双引号`psql`'s`-c`选项的参数似乎可以工作。

# windows-phone-7 - JSON.net (newtonsoft) - 访问深层“属性”C#

> ID：13358976
> 
> 赞同：0
> 
> 时间：2012-11-13T10:22:16.630
> 
> 标签：windows-phone-7, c#-4.0, json.net

我在 Windows Phone 7.1 (mango) 上使用了很棒的 NewtonSoft.Json 库。

我想访问 Bing json 答案的深层属性（红色箭头）：

![必应 json 答案](../Images/ec353d8cd51c4df599e2639c478d7184.png)

我已将已回答的字符串分配给`resultado`变量，并尝试以这种方式进行：

```
JObject o = JObject.Parse(resultado);
JsonAddress unaAddress = 
       JsonConvert
       .DeserializeObject<JsonAddress>(o["resourceSets"][0]["resources"][0].ToString());
MessageBox.Show(unaAddress.Coordinates.X);  // iexample.. 
```

但我不知道如何定义类`JsonAddress`来获取我需要的信息。

```
public class JsonAddress
{
    // public xxxx Coordinates { get; set; }
} 
```

有什么帮助吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T10:38:57.837

我找到了：

以这种方式定义类（和子类）：

```
public class JsonAddress
{
    public string Name { get; set; }
    public JsonPoint Point { get; set; }

}
public class JsonPoint
{
    public double[] Coordinates { get; set; }
} 
```

并以这种方式访问​​它：

```
MessageBox.Show(unaAddress.Point.Coordinates[0] + ", " +
                unaAddress.Point.Coordinates[1]); 
```

感谢和抱歉浪费了您的时间... :-\

# web-applications - tag-it 自动完成标记中的 minLength

> ID：13358981
> 
> 赞同：0
> 
> 时间：2012-11-13T10:22:25.187
> 
> 标签：web-applications, autocomplete, tagging, tag-it

[有没有办法在tag-it](https://github.com/aehlke/tag-it)中支持 minLength （仅在输入 minLength 字符后才开始建议）？

另外，我可以处理建议框的css吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:46:19.770

minLength support has been added to this plugin now. I have styled it by looking at the css classes of the elements it creates.

# r - 使用 read.ssd 将 SAS 数据集转换为 R data.frame

> ID：13358982
> 
> 赞同：2
> 
> 时间：2012-11-13T10:22:31.943
> 
> 标签：r, sas

我希望从 Windows 中的 SAS 数据集中将数据读入 R。read.ssd 函数允许我这样做，但是，当我尝试导入名称中包含任何非字母符号的 SAS 数据集时，它似乎出现了问题。例如，我可以`table.sas7bdat`使用以下内容导入：

```
directory <- "C:/sas data sets"
sashome <- "/Program Files/SAS/SAS 9.1"
table.df <- read.ssd(directory, "table", sascmd = file.path(sashome, "sas.exe")) 
```

但我不能对名为`table1.sas7bdat`. 它返回一个错误：

```
Error in file.symlink(oldPath, linkPath) : 
symbolic links are not supported on this version of Windows 
```

鉴于我没有重命名这些数据集的选项，有没有办法将名称中包含非字母符号的 SAS 数据集读取为 R？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T22:36:09.903

利用：

`directory <- "C:/sas data sets"`
`sashome <- "/Program Files/SAS/SAS 9.1"`
`table.df <- read.ssd(library=directory, mem="table1", formats=F,`
`sasprog=file.path(sashome, "sas.exe"))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T21:59:07.177

环顾四周，看起来其他人也有你的问题。也许这只是一个错误。

不管怎样，试试这个（旧的）R 帮助帖子中的建议，该帖子由尊敬的 Dan Nordlund 发布，他非常擅长这些东西 - 如果你想尝试交叉发布你的那里的问题。 [https://stat.ethz.ch/pipermail/r-help/2008-December/181616.html](https://stat.ethz.ch/pipermail/r-help/2008-December/181616.html)

此外，如果您不介意 8 个字符长的变量名，您可以考虑使用传输方法。

# javascript - 防止 jQuery 中的“递归过多”错误

> ID：13358983
> 
> 赞同：5
> 
> 时间：2012-11-13T10:22:36.533
> 
> 标签：javascript, jquery, loops, if-statement, recursion

**编辑****

我有这个点击事件

```
$('.next-question').click(function () {

    $('td').removeClass('highlight-problem');
    var r = rndWord;
    while (r == rndWord) {
        rndWord = Math.floor(Math.random() * (listOfWords.length));
    }
    $('td[data-word="' + listOfWords[rndWord].name + '"]').addClass('highlight-problem');
    $('td[data-word=' + word + ']').removeClass('wrong-letter').removeClass('wrong-word').removeClass('right-letter');
    var spellSpace = $('td[data-word=' + listOfWords[rndWord].name + ']').hasClass('right-word');
    if (spellSpace) {

        $('.next-question').trigger('click');

   } else {

        $("#hintSound").attr('src', listOfWords[rndWord].audio);
        hintSound.play();
        $("#hintPic").attr('src', listOfWords[rndWord].pic);
        $('#hintPic').show();
        $('#hintPicTitle').attr('title', listOfWords[rndWord].hint);
        $('#hintPicTitle').show();

    }

}); 
```

在控制台中调试时，它表示此时`too much recursion`它处于某种无限循环中。我想是因为声明中的`trigger("click")`事件`if`，因为我在网上看到过类似的东西。

基本上，我想说，如果给定的单词有类`right-word`然后继续（因此触发），否则......

还有另一种不会崩溃的写法吗？

这是一个小提琴：http: [//jsfiddle.net/Dxxmh/112/](http://jsfiddle.net/Dxxmh/112/)

说明：单击右侧的字母以拼写网格中突出显示的区域（帮助您拼写单词的图像在小提琴中不可用，因此您必须使用控制台通过查找 td 来拼写它们）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T11:02:04.990

我会做这样的事情：

```
if (spellSpace) {
            if(score.right != 4)
                $('.next-question').trigger('click'); 
```

我看到like`if(score.right == 4)`意味着游戏的结束。在它结束之后——你根本就没有词（或者只是没有“正确”的词，不确定），这就是它永远不会停止的原因。它只是触发永远单击而不是停止执行任何操作并等待用户单击重新启动按钮。

我想这个条件还不够。不确定如何计算和处理错误单词的数量。但这应该足以根据您的程序逻辑继续前进并建立正确的条件。您开始的任何递归（并且您使用 trigger("click") 启动它）都必须有一个停止条件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T10:26:41.873

`.trigger('click')`只会再次调用监听器。您是否打算仅在这种情况下访问该链接？在这种情况下，你可以`return false`在你的`else`场景中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T10:29:05.280

这不是 jQuery 问题：您正在从处理程序中手动触发相同的事件：

```
 $('.next-question').trigger('click'); 
```

现在，如果您不小心，这将导致无限循环。解决此问题的最佳方法*不是*通过第二次触发事件来调用处理程序，而是使用函数名调用它：

```
 $('.next-question').click(function callMe(event)
 {
      //replace: $('.next-question').trigger('click');
      //with this:
      if (spellSpace && event)
      {//also check if the event has been passed
          callMe.apply(this,[]);//don't pass event for recursive call
      }
 }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T10:24:26.033

尝试使用这个：

```
$('.next-question').click(function (event) {
     event.preventDefault();
 }); 
```