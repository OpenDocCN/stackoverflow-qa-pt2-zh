# StackOverflow 问答 16205000-16205999

# javascript - jQuery data() 可能会更改不在选择器中的元素？

> ID：16205000
> 
> 赞同：0
> 
> 时间：2013-04-25T01:34:56.230
> 
> 标签：javascript, jquery

似乎 jQuery 数据可以将数据链接到多个元素。在下面的示例中，两个元素都获得了两个属性，尽管看起来它应该只影响`#one`元素。

我认为这是 jQuery 中的预期行为，因为它正在更改对象？

```
<div id="one" class="thing"></div>
<div id="two" class="thing"></div>
<div id="three" class="thing"></div>
<script>
jQuery(function($) {
    $('.thing').data('obj',{a:'a'});

    $('#one').data('obj',$.extend($('#one').data('obj'),{one:'one'}));

    //Display:
    for (i in $('#one').data('obj')) {
        alert(i+' in obj.');
    }
    for (i in $('#two').data('obj')) {
        alert(i+' in obj.');
    }
})
</script> 
```

JSF中：

[http://jsfiddle.net/qFZ6y/](http://jsfiddle.net/qFZ6y/)

我知道用 .each() 函数初始化来设置单个数据可以解决这个问题，但这会被认为是 javascript 或 jQuery 中的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T01:45:09.200

这实际上是您使用`$.extend`文档[的](http://api.jquery.com/jQuery.extend/)结果：

> 请记住，目标对象（第一个参数）将被修改，并且也将从 $.extend() 返回。但是，如果您想保留两个原始对象，可以通过传递一个空对象作为目标来实现：
> 
> ```
> var object = $.extend({}, object1, object2); 
> ```

从您的原始代码中，唯一需要的更改是：

```
jQuery(function($) {
    $('.thing').data('obj',{a:'a'});

    $('#one').data('obj',$.extend({}, $('#one').data('obj'),{one:'one'}));

    //Display:
    for (i in $('#one').data('obj')) {
        alert(i+' in obj.');
    }
    for (i in $('#two').data('obj')) {
        alert(i+' in obj.');
    }
}) 
```

在此处查看更改：http: [//jsfiddle.net/potatosalad/qFZ6y/2/](http://jsfiddle.net/potatosalad/qFZ6y/2/)

**更长的解释**

对于以下代码块：

```
var a = {};
var b = {};
var c = {};

var debug = function() {
  console.log("  a.obj: %s", JSON.stringify($(a).data('obj')));
  console.log("  b.obj: %s", JSON.stringify($(b).data('obj')));
  console.log("  c.obj: %s", JSON.stringify($(c).data('obj')));
};

// a, b, and c all have the same obj
$([a, b, c]).data('obj', {x: true});
console.log("-- test 1 --");
console.log("a.obj = b.obj = c.obj = {\"x\":true}");
debug();

// extending the obj of any of them will affect all others
$(a).data('obj', $.extend($(a).data('obj'), {y: true}));
console.log("-- test 2 --");
console.log("$.extend(a.obj, {\"y\":true})");
debug();

// b.obj is now a different obj from a and c
$(b).data('obj', $.extend({}, $(b).data('obj'), {z: true}));
console.log("-- test 3 --");
console.log("$.extend({}, b.obj, {\"z\":true})");
debug();

// c.obj is still affected by changes to a.obj (b.obj is not)
$(a).data('obj').m = true
console.log("-- test 4 --");
console.log("a.obj.m = true");
debug();

// c.obj is now different from a.obj and b.obj
$(c).data('obj', {r: true})
console.log("-- test 5 --");
console.log("c.obj = {\"r\":true}");
debug();

// a.obj changes do not affect b.obj or c.obj
$(a).data('obj', $.extend($(a).data('obj'), {s: true}));
console.log("-- test 6 --");
console.log("$.extend(a.obj, {\"s\":true})");
debug(); 
```

结果如下：

```
-- test 1 --
a.obj = b.obj = c.obj = {"x":true}
  a.obj: {"x":true}
  b.obj: {"x":true}
  c.obj: {"x":true}
-- test 2 --
$.extend(a.obj, {"y":true})
  a.obj: {"x":true,"y":true}
  b.obj: {"x":true,"y":true}
  c.obj: {"x":true,"y":true}
-- test 3 --
$.extend({}, b.obj, {"z":true})
  a.obj: {"x":true,"y":true}
  b.obj: {"x":true,"y":true,"z":true}
  c.obj: {"x":true,"y":true}
-- test 4 --
a.obj.m = true
  a.obj: {"x":true,"y":true,"m":true}
  b.obj: {"x":true,"y":true,"z":true}
  c.obj: {"x":true,"y":true,"m":true}
-- test 5 --
c.obj = {"r":true}
  a.obj: {"x":true,"y":true,"m":true}
  b.obj: {"x":true,"y":true,"z":true}
  c.obj: {"r":true}
-- test 6 --
$.extend(a.obj, {"s":true})
  a.obj: {"x":true,"y":true,"m":true,"s":true}
  b.obj: {"x":true,"y":true,"z":true}
  c.obj: {"r":true} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T01:39:24.567

正如您所提到的，这是您使用相同对象这一事实的副作用。因此，与其说它正在更改与选择器不匹配的事物的数据，不如说它正在为您碰巧设置为共享的对象设置一个值。

如果您不想共享数据，则需要使用`.each`循环单独设置数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T01:39:47.050

这绝不是一个错误。

如果你有这个，你的代码会做同样的事情：

```
var a = {a:'a'}, b = a;
b.c = "derp";
alert(a.c); // derp 
```

这是因为对象是通过引用而不是值传递的。如您所述，要获取单个对象，您应该使用`.each`循环。

# java - 按键时如何播放声音

> ID：16205001
> 
> 赞同：1
> 
> 时间：2013-04-25T01:35:12.150
> 
> 标签：java, swing

我想制作一个允许用户输入消息的程序。消息将输入到 JTextField 中。我想让它在按下每个键时都会发出短促的声音。我有一个 mp3 格式的声音文件，它发出一声​​短促的哔声。

我只希望它适用于键 A - Z、0 - 9、退格键和空格键。

我知道如何使用回车键执行此操作；一个动作监听器。我不知道如何使用在输入之前按下的每个键来执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:25:07.193

A[`KeyListener`](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)中的A`JTextField`可能会出现焦点问题。

相反，您可以[将键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)到[`Action`](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)播放短的[`Tone`](https://stackoverflow.com/a/2065693/230513).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T01:39:51.187

您需要将 KeyListener 添加到您的文本字段。

这是一些[示例文档](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)。

[这是](https://stackoverflow.com/questions/6045384/playing-mp3-and-wav-in-java)来自该站点的一个问题，将有助于播放 mp3。

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T01:40:39.460

我想说的最好的选择是使用 KeyListener。在您的类中实现它，创建您要使用的任何声音类的实例，创建一个方法并在 keyPressed 方法中调用您的函数，这是一个如何做到这一点的示例。[http://www.daniweb.com/software-development/java/threads/108969/linking-jbuttons-to-key-events-through-key-listeners](http://www.daniweb.com/software-development/java/threads/108969/linking-jbuttons-to-key-events-through-key-listeners)

# for-loop - 方案中的定义语法问题

> ID：16205002
> 
> 赞同：1
> 
> 时间：2013-04-25T01:35:22.417
> 
> 标签：for-loop, lisp, scheme

我想知道我如何在方案中定义我的 for 循环出了什么问题。每当我尝试使用它运行 for 语句时，它都会运行一段时间然后崩溃。

```
(define-syntax for 
  (syntax-rules (:)
    [(_ (initial : test : update) body) 
     (begin initial 
            (if test 
                (begin body update 
                       (for [test : update] body))))]
    [(_ (test : update) body) 
     (if test 
         (begin body update 
                (for [test : update] body)))])) 
```

它应该运行初始条件，检查测试，运行主体，然后循环到下一次运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T02:09:52.227

您的宏失败，因为宏是递归的并且没有基本情况。因此，在编译过程中，宏会不断地扩展，再扩展，再扩展，直到永远。

这是一个实现：

```
(define-syntax for
  (syntax-rules (:)
    ((_ (initial : test : update) body)
     (begin initial
            (let repeating ()
              (when test 
                body
                update
                (repeating)))))
    ((_ (test : update) body)
     (for (#f : test : update) body))))

> (let ((foo 0)) 
    (for ((set! foo 5) : (positive? foo) : (set! foo (- foo 1))) ;; w/ init
      (begin (display 'YES) (newline))))
YES
YES
YES
YES
YES
> (let ((foo 2)) 
    (for ((positive? foo) : (set! foo (- foo 1)))  ;; w/o init
      (begin (display 'YES) (newline)))
YES
YES 
```

# sql-server-2008 - 表上的 SQL Server sp_recompile

> ID：16205003
> 
> 赞同：0
> 
> 时间：2013-04-25T01:35:49.150
> 
> 标签：sql-server-2008, sql-execution-plan, parameter-sniffing

当对表运行 sp_recompile 时，我知道依赖于该表的所有存储过程和触发器都将被重新编译。

我不明白的是 SQL Server 用于此重新编译的参数。我看不出参数嗅探会如何影响这里。它是否使用类似于 OPTIMIZE FOR UNKNOWN 的东西来编译一个“通用”的执行计划？

我觉得我错过了一些非常明显的东西。

有人对此有了解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T09:30:14.080

sp_recompile 不执行对象本身的重新编译。它只删除所有保存的执行计划。这会通过对象的下一次调用（使用下一次调用的参数）强制重新编译。

# django - Django 应用中的单页登录

> ID：16205004
> 
> 赞同：0
> 
> 时间：2013-04-25T01:35:55.217
> 
> 标签：django, login, single-page-application

我目前正在使用开箱即用的方式`django.contrib.auth`来处理我的 Django 应用程序中的身份验证。这意味着用户从登录页面开始，并在成功登录时被重定向到应用程序。我想让我的应用程序单页，包括这个登录过程，其中不会发生重定向，但可能是“热”模板切换或一些花哨的客户端 div 魔术（[仍然保持安全](http://jacobbijani.com/post/47867397902/some-paywalls-are-so-pointless)）。我的[谷歌搜索](https://www.google.com/search?q=single%20page%20login%20django)结果很短，[最接近的解决方案](https://stackoverflow.com/questions/2734055/putting-a-django-login-form-on-every-page)是在每个页面上放置一个登录表单。

这里的任何方向或想法将不胜感激。如果可能的话，我显然更愿意在现有范围内工作`django.contrib.auth`，但我对所有解决方案持开放态度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T02:19:29.610

我不确定我是否完全理解你的问题。我想你想要一个页面。如果是这样，请将逻辑放入您的模板中，以检查用户是否已通过身份验证。如果不是，则显示一个登录表单，该表单发布到相应的`django.contrib.auth`视图。您可以为此视图提供一个参数，使其重定向回您的页面。当您回来时，用户将通过身份验证，因此您不会显示登录表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T09:10:50.667

看看 Django-Easy-Pjax [https://pypi.python.org/pypi/django-easy-pjax](https://pypi.python.org/pypi/django-easy-pjax) - 它就像一个魅力，并且有据可查。你喜欢的一切都是用 AJAX 请求制作的：链接、使用 GET 的表单和使用 POST 的表单。

本质上，您只需要在and标签中添加一个`data-pjax="#id_of_the_container_where_the_result_goes"`属性。它的好处是：它会更新浏览器的标题和位置栏。`a``form`

一个警告：如果您想以某种形式上传文件，Easy-Pjax 不支持此功能，因此您可能需要使用一些解决方法 jQuery 库。

# java - 在 LinkedList 中插入节点：语句的顺序重要吗？

> ID：16205006
> 
> 赞同：2
> 
> 时间：2013-04-25T01:36:10.943
> 
> 标签：java, data-structures, linked-list

参考LinkedList对应的以下PDF（第14页）：

很明显，需要在“p”指向的节点之后插入新节点。

[http://www.cs.utep.edu/vladik/cs2401.10a/Ch_16_Linked_Lists.pdf](http://www.cs.utep.edu/vladik/cs2401.10a/Ch_16_Linked_Lists.pdf)

我的问题：

如果我们继续前进到 PDF 的第 16 页，为什么它说插入节点的语句序列非常重要。我的意思是我可以编写如下代码：

```
p.link = newNode; // writing this part of code first 

newNode.link = p.link; //writing this part of code after the above one. 
```

请让我知道以不同的顺序编写这两个语句有什么区别？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T01:43:25.567

有一个非常显着的差异，是的。

```
p.link = newNode; 
newNode.link = p.link; //p.link = newNode, per above, so now newNode.link = newNode 
```

以前存在`p.link`的东西现在都丢失了，根本不再联系。而 newNode 只是链接到它自己，所以如果你跟随所有的链接，你最终会在`newNode`.

您可能想要的是以下选项：

```
newNode.link = p.link; 
p.link = newNode; 
```

在这种情况下，`newNode.link`设置为old`p.link`和。`p.link``newNode`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T01:43:12.527

PDF是正确的。

如果您按照上面列出的顺序执行步骤，`newNode`将指向自身，并且链接列表的剩余部分将“丢失”。

由于您设置`p.link`为 newNode，因此您不再拥有指向 p.link 之前指向的内容（下一个元素）的指针。（您可以通过`p.link`在将其分配给 之前将其保存到临时变量来解决此问题`newNode`，但这需要一个额外的变量，当它并不真正需要时。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T01:47:14.530

假使，假设：

这是你的新节点：

```
+---+
| n |
+---+ 
```

这是你的 p：

```
+---+
| p |
+---+ 
```

p.link = 新节点；

```
+---+    +---+
| p | -> | n |
+---+    +---+ 
```

newNode.link = p.link

```
+---+    +---+            +---+    +---+
| p | -> | q |  same with | n | -> | q |
+---+    +---+            +---+    +---+ 
```

解释

1.  p.link = newNode 表示 p 的下一个是 newNode
2.  newNode.link = p.link 表示 p 的下一个与 newNode 的下一个相同

# matlab - Matlab - 根据正确的参数设置绘图 Xaxis 范围

> ID：16205008
> 
> 赞同：0
> 
> 时间：2013-04-25T01:36:45.343
> 
> 标签：matlab

具有`n`相同大小（也）的向量`n`保存在`v_1 , v_2 ..., v_n`. 我想把`plot`它们全部放在一起，这样 Xaxis 范围将是`1..n`，每个向量的 Yaxis 值将根据 X 值作为它的元素。

就像是 - `plot(1:n,v_1,v_2,...,v_n)`

**编辑：**

按照@Phonon 的建议修复。

我怎样才能获得上述内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T03:08:35.510

你已经走在正确的轨道上了。

假设所有你`v_1, ... v_n`的长度相同并且每行向量：

```
plot(1:m, [v_1; v_2; ... v_n]); 
```

您还可以通过以下方式一次绘制一个：

```
figure;
plot(1:m, v_1);
hold on;
plot(1:m, v_2);
plot(1:m, v_3);
...
plot(1:m, v_n); 
```

第二种方法最终会让您更好地控制绘图中每条线的属性。

如果您稍后需要更改 x 轴的限制，您可以通过`xlim([])`函数或`set(axHandle,'XLim',[lowerLim, upperLim])`命令来执行此操作。

# php - 如何通过php5将照片上传到mysql

> ID：16205009
> 
> 赞同：-3
> 
> 时间：2013-04-25T01:36:46.850
> 
> 标签：php, mysql, blob

我在 DB mysql 上传图像时遇到问题，例如 blob 类型，我将包含脚本 db 以及表单代码和 php 上传文件

sql脚本

```
 CREATE TABLE IF NOT EXISTS `images` (   `id` int(11) NOT NULL AUTO_INCREMENT,   `data` longblob NOT NULL,   `descripcion` varchar(240) COLLATE utf8mb4_spanish2_ci NOT NULL,   PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_spanish2_ci AUTO_INCREMENT=1 ;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */; /*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */; /*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */; 
```

* * *

index.html（上传表单）

```
<html>
    <head>

    </head>

    <body>
        <form method="post" action="insertar.php" enctype="multipart/form-data">
        <label>elige imagen:</label>
        <br/>
        <input type="file" name="imagen"/>
        <br/>
        <label>descripcion:</label>
        <br/>
        <textarea cols="20" rows="10" name="texto"></textarea>
        <br/>
        <input type="submit" value="enviar"/>
        </form>
    </body>
</html> 
```

insertar.php（上传代码）

```
<?php
    include "conexion.php";

    $archivo=$_FILES['imagen']['name'];
    $texto=$_POST['texto'];
    $id=rand(1,200);

    $insertar=mysql_query("INSERT INTO image VALUES('".$id."','".$archivo."','".$texto."')");

    if($insertar){
        echo "<a href='verImagenes.php'> ver mis imagenes</a>";
    }else{
        echo "fallo la insercion";
    }
?> 
```

这是错误消息：

> 注意：第 9 行 C:\xampp\htdocs\ejemlo\insertar.php 中的数组到字符串转换

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T01:44:54.293

为什么要尝试将 *$_FILES* 数组存储在数据库中？*$_FILES* 是一个数组，用于存储有关您刚刚上传的文件的信息，因此会出现数组到字符串错误。

当您上传文件时，该文件会临时存储在服务器上。您需要正确处理文件上传 - 即将其保存在某处，然后将此路径存储在您的数据库中。

您总是可以序列化 *$_FILES* 数组并存储它，但我不知道这有什么用，因为它只引用临时在您的服务器上的文件。

# android - 关于位图图像和图像存储的问题

> ID：16205012
> 
> 赞同：0
> 
> 时间：2013-04-25T01:37:18.083
> 
> 标签：android, imageview, bitmapimage

我有从相机活动中获得的位图图像。有人可以指导我如何将这张图片存储在图库中吗？

代码：

在我的按钮 OnClickListener

```
 Intent campic=new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
    startActivityForResult(campic,cameradata ); 
```

在我的 onActivityResult

```
 if(resultCode==RESULT_OK)
        {
           Bundle bun=data.getExtras();
           bmp=(Bitmap)bun.get("data");
           SaveIamge(bmp);
           iveventpic.setImageBitmap(bmp);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T01:47:28.450

```
MediaStore.Images.Media.insertImage(getContentResolver(), bmp, title, desc); 
```

正如在[这篇文章中看到的那样。](https://stackoverflow.com/questions/8560501/android-save-image-into-gallery)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T04:51:35.373

调用此函数将位图保存在 sdcard 中：

```
private void SaveIamge(Bitmap finalBitmap) {

String root = Environment.getExternalStorageDirectory().toString();
File myDir = new File(root + "/saved_images");    
myDir.mkdirs();
Random generator = new Random();
int n = 10000;
n = generator.nextInt(n);
String fname = "Image-"+ n +".jpg";
File file = new File (myDir, fname);
if (file.exists ()) file.delete (); 
try {
       FileOutputStream out = new FileOutputStream(file);
       finalBitmap.compress(Bitmap.CompressFormat.JPEG, 90, out);
       out.flush();
       out.close();

} catch (Exception e) {
       e.printStackTrace();
}
} 
```

通过调用此行，您必须将该图像存储在图库中：

```
sendBroadcast(new Intent(
Intent.ACTION_MEDIA_MOUNTED,
        Uri.parse("file://" + Environment.getExternalStorageDirectory()))); 
```

并在清单中添加权限：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# android - 使用片段时如何让适配器在数据更改后更新视图？

> ID：16205013
> 
> 赞同：0
> 
> 时间：2013-04-25T01:37:20.030
> 
> 标签：android, onclick, adapter, fragment, notifydatasetchanged

我在一个片段中有一个订单列表。在第二个片段中，我显示订单的详细信息，并使用第三个片段显示更改订单状态的按钮。

在列表中，每个订单都以背景颜色显示，指示其状态，例如绿色表示已完成交货。

在横向模式下，详细信息和列表都会显示。在纵向模式下，我使用两个单独的活动。

这一切都很好，直到我更改订单的状态。我找不到更新列表的方法。

据我了解，需要发生的是适配器需要调用其 notifyDateChanged() 方法。我试过直接从处理按钮单击的方法中调用它，我试过一个异步任务，我试过一个处理程序。我的调试方法显示调用正在发生，但列表没有更新。

有可能我正在做一些完全愚蠢的事情，但我已经检查了两次和三次。我怀疑有一些我不明白的关键要素。我希望其他人会告诉我我错过了什么。

我发布了一些代码，但显然是错误的。不确定要发布什么代码，因为我认为这更像是一个概念问题而不是编码问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T02:03:01.667

如果要更新视图，请尝试使用：

1.  线程 + 处理程序

2.  异步任务

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T17:27:16.570

通过其他海报的有用评论，我发现我的问题不在于适配器没有在正确的线程上获得 notifyDataChanged() 调用。我输入了证明这一点的调试代码。问题是listview项的背景是基于底层数据本身的变化，所以真正的答案是让Adapter刷新Cursor。我做了一些改变。我修改了用来通知适配器的 AsyncTask。现在 AsyncTask 获得了一个新的游标并调用了 adapter.changeCursor(cursor) 的结果。当状态改变时，AsyncTask 会从 MainActivity（它承载列表和细节片段）中调用。它也在 ListFragment 代码的 onResume() 部分中调用，因此当从详细片段返回时列表将正确更新。效果很好。

# php - 执行 mySql 的 php 循环中的错误处理

> ID：16205014
> 
> 赞同：0
> 
> 时间：2013-04-25T01:37:21.653
> 
> 标签：php, mysql, loops, error-handling

我有一个 php 循环，它为循环的每个循环执行一个 mySQL 查询。现在我的循环遇到了一个 mySql 错误并停止了。我该如何设置它，以便当它遇到 mySql 错误时，它会停止它正在做的事情并继续进行下一个循环？

我在下面添加了代码。请记住，我不是试图解决 SQL 错误，而是告诉 php 循环跳过它。

```
 foreach ($queryData as $value) { 
       mysql_query(" PREPARE stmt FROM 'INSERT INTO `table_name`( `column_name`) VALUES   ('value'  )'EXECUTE stmt1"
                   )or die("die message");
                                  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T02:03:44.320

如果您不想在执行时停止，只需省略`die`.

```
$res = mysql_query($sql);
if ($res) {
 /* do stuff with the query results */
} else {
  /* output an error if desired... or don't */
  echo 'There was a database error: '.mysql_error();
} 
```

# php - python解包替换php解包

> ID：16205015
> 
> 赞同：2
> 
> 时间：2013-04-25T01:37:22.623
> 
> 标签：php, python

php代码

```
$body = unpack("Lcmd/Lstatus/a*username", $body_string); 
```

我想用 python 代码替换这一行。怎么做？

> struct.error: unpack 需要一个长度为 17 的字符串参数

```
cnt = unpack('LLs', body_string) 
```

# algorithm - 测量两个短语之间的语义相似度

> ID：16205020
> 
> 赞同：20
> 
> 时间：2013-04-25T01:38:08.273
> 
> 标签：algorithm, nlp, semantics, wordnet

我想测量两个短语/句子之间的语义相似性。有没有我可以直接可靠地使用的框架？

我已经检查了[这个问题](https://stackoverflow.com/questions/62328/is-there-an-algorithm-that-tells-the-semantic-similarity-of-two-phrases)，但它已经很老了，我在那里找不到真正有用的答案。有[一个链接](http://swoogle.umbc.edu/SimService/)，但我发现这不可靠。

例如：
我有一个短语：feeled crushed
我有几个选择：向内强迫、粉碎、情感破坏、重塑等。
我想找到与第一个相似度最高的术语/短语。
这里的答案是：情感上的毁灭。

更大的图景是：我想根据它在句子中的用法来识别 FrameNet 中的哪个帧与给定动词匹配。

更新：我发现[这个库](https://code.google.com/p/ws4j/)对于测量两个词之间的相似度非常有用。此外，ConceptNet 相似性机制非常好。

[这个库](http://simlibrary.wordpress.com/)用于测量句子之间的语义相似度

如果有人有任何见解，请分享。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T09:04:47.700

这是一个非常复杂的问题。

我能想到的主要技术（在进入更复杂的 NLP 过程之前）是将余弦（或任何其他度量）相似性应用于每对短语。显然，由于不匹配的问题，这个解决方案目前效率很低：句子可能用不同的词指代相同的概念。

要解决此问题，您应该将每个短语的初始表示转换为更“概念”的含义。一种选择是使用同义词扩展每个单词（即使用[WordNet](http://wordnet.princeton.edu/)，另一种选择是应用扩展表示的分布式语义 DS（ [http://liawww.epfl.ch/Publications/Archive/Besanconetal2001.pdf](http://liawww.epfl.ch/Publications/Archive/Besanconetal2001.pdf) ）等指标每个术语与更可能出现的单词一起出现。

示例：文档的表示：{"car","race"} 将转换为具有同义词的 {"car","automobile","race"}。而对于 DS，它将类似于：{"car","wheel","road","pilot", ...}

显然，这种转换不会是二元的。每个术语都有一些相关的权重。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-06T15:25:16.657

也许[cortical.io](http://api.cortical.io) API 可以帮助您解决问题。这里的方法是将每个单词转换成一个语义指纹，用 16K 语义特征来表征它的含义。短语、句子或更长的文本通过 ORing 单词指纹一起转换为指纹。在转换为（数字）二进制向量表示之后，可以使用距离度量（如欧几里得距离或余弦相似度）轻松计算语义距离。api 提供了所有必要的转换和比较功能。

# node.js - 将 Sails.js 应用程序部署到 Heroku？

> ID：16205028
> 
> 赞同：18
> 
> 时间：2013-04-25T01:39:08.230
> 
> 标签：node.js, deployment, heroku, web-deployment, sails.js

我在部署 Node.js 应用程序方面的经验有限——如何将 Sails.js 应用程序部署到 Heroku？

我已经`heroku login`编辑`heroku create`了我的应用程序。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-05-01T13:10:29.263

你应该看看这个 github repo：[heroku-](https://github.com/chadn/heroku-sails) sails 它应该让你开始在 heroku 上使用sailsjs

[在sails.js google group上](https://groups.google.com/d/topic/sailsjs/vgqJFr7maSY/discussion)围绕这个特定的github repo进行了讨论

这些也是可以帮助您运行应用程序的资源：

*   [Sails 部署指南](https://github.com/balderdashy/sails-docs/blob/0.9/deployment.md)
*   [Sails.js 作者对同一问题的回答](https://stackoverflow.com/questions/15799887/can-i-deploy-sailsjs-to-appharbor-or-heroku)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-11-25T04:44:48.380

我想防止那些熟悉在 heroku 上部署节点的人感到困惑。有很多将节点应用程序部署到 heroku 的指南，sails 应用程序确实没有什么不同。如果您通过在终端中键入“node app.js”来启动 Sails 应用程序，它将起作用。这是 Heroku 为节点应用程序发布的指南。唯一不同的是你有一个风帆而不是一个普通的香草快递应用程序。

[https://devcenter.heroku.com/articles/getting-started-with-nodejs](https://devcenter.heroku.com/articles/getting-started-with-nodejs)

我用它来部署我的帆应用程序没问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-04T06:11:48.933

首先创建sails js网站或项目，然后更改sails js项目中的设置，如下所示：

在项目配置->环境->生产中

```
 //remove from comments

  onlyAllowOrigins: [

  'https://example.com',

  'https://staging.example.com',

],

   //remove from comments

    trustProxy: true, 
```

然后部署在heroku上

# ruby-on-rails - 多态关联 - 删除评论

> ID：16205033
> 
> 赞同：1
> 
> 时间：2013-04-25T01:39:30.737
> 
> 标签：ruby-on-rails, comments, polymorphic-associations

我正在创建一个应用程序，允许用户对创建的项目发布发表评论。我按照这个[Railscast](http://railscasts.com/episodes/154-polymorphic-association?)设置了多态关联。

每个教程的一切都很好，但我一直在尝试在我的评论控制器中构建一个删除方法，以便可以删除评论。我在评论控制器中创建了一个名为destroy 的方法。

对我的项目帖子发表了评论。评论的部分是在项目页面和发布帖子的用户页面上生成的。当我在项目页面上删除时，效果很好，但是当我尝试从用户页面中删除时，我得到下面的结果。我该如何修复它，以便用户可以删除评论，无论他们是从项目页面还是从他们自己的用户页面中删除？

```
Unknown action
The action 'show' could not be found for CommentsController 
```

评论控制器.rb

```
 def destroy
    @comment = Comment.find(params[:id])
    @comment.destroy

    if @comment.destroy
      redirect_to @commentable, notice: "Comment deleted."
    end
  end 
```

_comment.html.erb

```
<div class="comments">        
  <p><%= comment.content %></p>
  <span>
    By <%= link_to comment.user.name, comment.user %> <%= time_ago_in_words(comment.created_at) %> ago

    <div class="pull-right">
<%= link_to "Destroy", [@commentable, comment], method: :delete, data: { confirm: 'Are you sure?' } %>
</div>
  </span>
</div> 
```

路线.rb

```
resources :comments

resources :projects do
  resources :comments
  member do
    get :following
  end   
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T05:51:37.800

试试这个...

```
<%= link_to "Destroy", [@commentable, comment], method: :delete, data: { confirm: 'Are you sure?' } %> 
```

# java - 使用排序数组并查找各州的增长率

> ID：16205038
> 
> 赞同：0
> 
> 时间：2013-04-25T01:40:02.757
> 
> 标签：java, arrays, sorting, methods

我无法弄清楚为什么会出现不匹配异常，一切正常，直到我在计算机上打开它。我必须把人口普查文件读进去，我这样做了，我找到了增长率，但唯一的问题似乎是这个不匹配异常，我不明白为什么会出现不匹配错误，请帮忙。这是文件示例：

```
 Alabama,4447100
      Alaska,626932
      Arizona,5130632
      Arkansas,2673400 
```

这是程序：

```
 public static void main(String[] args) throws IOException {
    File f = new File("census2010.txt");
    File ff = new File("census2000.txt");
    if(!f.exists()) {
        System.out.println( "f does not exist ");
    }
    if(!ff.exists()) {
        System.out.println( "ff does not exist ");
    }
    Scanner infile2010 = new Scanner(f);
    Scanner infile2000 = new Scanner(ff);
    infile2010.useDelimiter("[\t|,|\n|\r]+");
    infile2000.useDelimiter("[\t|,|\n|\r]+");
    final int MAX = 60;
    int[] pop10 = new int[MAX];
    int[] pop00 = new int[MAX];
    String[] statearray10 = new String[MAX];
    String[] statearray00 = new String[MAX];
    double [] growtharray = new double[MAX];
    int fillsize;

    fillsize = fillArrayPop (pop10, statearray10, MAX, infile2010, prw);
    fillsize = fillArrayPop2 (pop00, statearray00, MAX, infile2000, prw); // the mismatch exception occurs here
    growthRate(growtharray, pop10, pop00, fillsize);
    sortarray(growtharray, statearray10, fillsize);
    printarray (growtharray, statearray10, fillsize, prw);

}

public static int fillArrayPop (int[] num, String[] statearray10, int mAX, Scanner infile2010, PrintWriter prw) throws FileNotFoundException{
    int retcnt = 0;
    int pop;
    String astate;
    while(infile2010.hasNext()){
        astate = infile2010.next();
        pop = infile2010.nextInt();
        statearray10[retcnt] = astate;
        num[retcnt] = pop;
        retcnt++;
    }
    return (retcnt);
}

public static int fillArrayPop2 (int[] number, String[] statearray00, int mAX, Scanner infile2000, PrintWriter prw) throws FileNotFoundException{
    int retcounts = 0;
    int pop;
    String state;
    while(infile2000.hasNext()){
        state = infile2000.next();
        pop = infile2000.nextInt(); // the mismatch exception occurs here
            statearray00[retcounts] = state;
            number[retcounts] = pop;
            retcounts++;
    }
    return (retcounts);
}

public static void printarray (double[] growth, String[] state, int fillsize, PrintWriter prw){
    DecimalFormat form = new DecimalFormat("0.000");
    for (int counts = 0; counts < fillsize ; counts++){
        System.out.println("For the position ["+counts+"] the growth rate for " + state[counts] + " is " +form.format(growth[counts]));
        prw.println("For the position ["+counts+"] the growth rate for " + state[counts] + " is " + form.format(growth[counts]));
    }
    prw.close();
    return;
}

public static void growthRate (double[] percent, int[] pop10, int[] pop00, int fillsize){
    double growthrate = 0.0;
        for(int count = 0; count < fillsize; count ++){
            percent[count] = (double)(pop10[count]-pop00[count])/ pop00[count];

        }

}

public static void sortarray(double[] percent, String[] statearray10, int fillsize) {

    for (int fill = 0; fill < fillsize - 1; fill = fill + 1) {

        for (int compare = fill + 1; compare < fillsize; compare++) {

            if (percent[compare] < percent[fill]) {
                double poptemp = percent[fill];
                percent[fill] = percent[compare];
                percent[compare] = poptemp;

                String statetemp = statearray10[fill];
                statearray10[fill] = statearray10[compare];
                statearray10[compare] = statetemp;

            }
        }
    }
} 
```

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T01:51:19.033

来自的[javadoc`Scanner.nextInt()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#nextInt%28%29)：

> InputMismatchException - 如果下一个标记与 Integer 正则表达式不匹配，或者超出范围

这意味着，当它抛出错误时，您尝试读取的下一个令牌不能被解析为整数。例如，如果令牌中有非数字字母或整数超出范围，即小于 -2,147,483,648 或大于 2,147,483,647，就会发生这种情况。

如果您的文件中没有标记超出范围，则很可能是因为文件的布局不是您对其进行编程的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T02:17:15.490

如果您在打印数组中取出您的 prw，您的程序应该可以正常运行。DELETE prw.println("对于位置 ["+counts+"] " + state[counts] + " 的增长率是 " + form.format(growth[counts])); 和 DELETE prw.close() 它应该运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T02:27:22.797

正如@Pescis 的回答所说，例外情况是您尝试使用的令牌`nextInt`不是`int`. 它包含意外字符，或者超出范围。

如果您向我们展示了异常的消息字符串和**完整的堆栈跟踪**，则诊断起来会更容易。没有这个，我们不得不求助于猜测。

猜想#1：此时您正在阅读的实际输入数据文件中有一些不好的地方。

猜猜＃2：您设置分隔符正则表达式的方式是错误的。您的正则表达式似乎以几乎可以肯定不正确的方式混合了字符类和交替。应该是这样的：

```
 useDelimiter("[\\t,\\n\\r]+"); 
```

（目前尚不清楚修复此问题是否会解决问题......但您的正则表达式仍然是错误的。）

* * *

评论：

1.  您有两种方法`fillArrayPop`，`fillArrayPop2`并且*似乎*在做同样的事情。据我所知，唯一的区别是不同的变量名和其他无关紧要的东西。

2.  您的“解析”方法忽略了文件实际上是行结构的事实。我认为您应该（从概念上）阅读行，然后将行拆分为字段。您当前正在做的是将它们视为一系列交替场。

3.  理想情况下，您的“解析”应该更健壮。它至少应该尝试诊断预期文件格式与您从文件中实际读取的内容之间的不匹配。（如果我正在写这个，我至少会尝试输出检测到“坏处”的行或行号。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T03:08:54.877

如果文件的格式与您在上面描述的完全一样，那么紧接错误上方的 .next() 方法调用实际上会拉动整行（即变量“state”将包含“Alabama,4447100”）。

由于状态名称和人口之间没有空格/分隔符，.next() 读取整行，并且对 .nextInt() 的下一次调用尝试读取下一行（字符串），产生错误。

我建议单独阅读每一行，然后用逗号分隔两条数据。另外，如果方法中没有使用对象，为什么要向方法传递一个 PrintWriter 对象？

# xml - 一般可以这样写吗？XPATH 2.0

> ID：16205043
> 
> 赞同：0
> 
> 时间：2013-04-25T01:40:32.323
> 
> 标签：xml, xpath, xpath-2.0, schematron

是否可以更一般地编写此测试。我已经坐在上面几个小时了，我想不通：D。

```
 <pattern>
            <title>Pravidla pro měnu(CZK/USD)</title>
            <rule context="/o:objednávka/o:položky">
                <report test="(contains(o:položka[1]/o:cena/@měna,'CZK') and 
                    contains(o:položka[2]/o:cena/@měna,'USD'))or(contains(o:položka[2]/o:cena/@měna,'CZK') and 
                    contains(o:položka[1]/o:cena/@měna,'USD'))">V objednávce 
                    musí být jen jedna měna.</report>     
            </rule> 
```

**XML 文档**

```
 <?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="cssTrans.css" type="text/css" ?>
<?xml-model href="objednavka.sch" type="application/xml" schematypens="http://purl.oclc.org/dsdl/schematron"?>
<objednávka xmlns="urn:x-eshop:document-schemas:purchase-order">
    <položky>
        <položka kód="a">
            <název>Sekačka na trávu</název>
            <počet mj="ks">1</počet>
            <cena měna="USD">0.9</cena>
            <popis>http://example.org/sekacka.html</popis>
        </položka>
        <položka kód="d">
            <název>Travní semeno</název>
            <počet mj="kg">2.5</počet>
            <cena měna="CZK">18001</cena>
        </položka>
    </položky>
</objednávka> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T03:36:13.137

**使用**：

```
contains('USD|CZK|USD', string-join(o:položka/o:cena/@měna, '|')) 
```

**基于 XSLT 2.0 的验证：**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:o="urn:x-eshop:document-schemas:purchase-order">
 <xsl:output method="text"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/o:objednávka/o:položky">
  <xsl:sequence select=
  "contains('USD|CZK|USD', string-join(o:položka/o:cena/@měna, '|'))"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<objednávka xmlns="urn:x-eshop:document-schemas:purchase-order">
    <položky>
        <položka kód="a">
            <název>Sekačka na trávu</název>
            <počet mj="ks">1</počet>
            <cena měna="USD">0.9</cena>
            <popis>http://example.org/sekacka.html</popis>
        </položka>
        <položka kód="d">
            <název>Travní semeno</název>
            <počet mj="kg">2.5</počet>
            <cena měna="CZK">18001</cena>
        </položka>
    </položky>
</objednávka> 
```

**对 XPath 表达式求值，并将该求值的结果复制到输出中：**

```
true 
```

**如果在此 XML 文档上计算相同的表达式：**

```
<objednávka xmlns="urn:x-eshop:document-schemas:purchase-order">
    <položky>
        <položka kód="a">
            <název>Sekačka na trávu</název>
            <počet mj="ks">1</počet>
            <cena měna="USD">0.9</cena>
            <popis>http://example.org/sekacka.html</popis>
        </položka>
        <položka kód="d">
            <název>Travní semeno</název>
            <počet mj="kg">2.5</počet>
            <cena měna="USD">18001</cena>
        </položka>
    </položky>
</objednávka> 
```

**然后再次产生正确的结果：**

```
false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:48:48.400

查看您的规则和您的实例文档，我强烈怀疑您不想要“包含”测试，而是想要“=”测试。人们经常认为英文短语“attribute contains value”应该翻译成 XPath `contains(@att, 'val')`，但这是错误的；它应该是`@att = 'val'`。

我认为您试图表达的约束是有两个 položka 元素，其中一个 cena/@měna 属性的值为 USD，而在另一个中，它的值为 CZK。我会表示为

```
o:položka/o:cena/@měna ='CZK' and o:položka/o:cena/@měna = 'USD' 
```

请记住，在 XPath 中，“=”是存在性的：`a/b/c='USD'`意味着至少有一个由 选择的节点`a/b/c`具有值`'USD'`。

# asp.net-mvc - 使用jquery检查POST是否成功

> ID：16205044
> 
> 赞同：6
> 
> 时间：2013-04-25T01:40:34.377
> 
> 标签：asp.net-mvc, html, jquery

我正在尝试编写会弹出并说 Post 成功的 jquery 函数！如果没有，则 Post 不成功！我如何在输入一些 jquery 时使用 try catch？

```
@using (Html.BeginForm("Admin", "Home", "POST"))
{
<div class="well">
    <section>
        <br>
        <span style="font-weight:bold">Text File Destination:&#160;&#160;&#160;</span>
        <input type="text" name="txt_file_dest" value="@ViewBag.GetTextPath">
        <span style="color:black">&#160;&#160;&#160;Example:</span><span style="color:blue"> \\invincible\\chemistry$\\</span>
        <br>
        <br>
        <span style="font-weight:bold">SQL Connection String:</span>
        <input type="text" name="sql_Connection" value="@ViewBag.GetSqlConnection">
        <span style="color:black">&#160;&#160;&#160;Example:</span> <span style="color:blue"> Server=-</span>
        <br>
        <br>
        <button class="btn btn-success" type="submit" >Save Changes</button>
    </section>
</div> 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T20:50:22.337

所以我想出了我的答案。仅供将来尝试此操作的任何人参考，以下是我所做的。我把它放在@using (Html.BeginForm("Admin", "Home", "POST")) 上面。@Andrew我确实尝试过你的，但我无法让它工作。感谢大家不厌其烦地帮助我。

```
<script language="javascript" type="text/javascript">
    $(function() {
       $("form").submit(function(e) {
          $.post($(this).attr("action"), // url 
  $(this).serialize(), // data
  function (data) { //success callback function
     alert("Edit successful");
  }).error(function () {
      alert('failure'); 
  });
             e.preventDefault();
          });
       });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T03:32:34.723

您需要稍微更改 HtmlHelper BeginForm 声明，以便 id 属性将与元素一起呈现，如下所示：

```
@using (Html.BeginForm("Admin", "Home", FormMethod.Post, new { id = "well-form" })) 
```

现在您可以在声明上方添加一个脚本，该脚本捕获并提交表单并处理响应（成功或错误）。

```
<script>
$(function() {
    // Find the form with id='well-form'
    $('#well-form').submit(function() {
        $.ajax({
            url: this.action,
            type: this.method,
            data: $(this).serialize(),
            success: function(result) {
               alert('Post was successful!');
            },
            error: function(result) {
               alert('Post was not successful!');
            }
        });
        // return false to cancel the form post
        // since javascript will perform it with ajax
        return false;
    });
});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T03:41:20.990

你可以使用 Ajax 事件吗？比如 $.ajaxSuccess

[http://api.jquery.com/category/ajax/global-ajax-event-handlers/](http://api.jquery.com/category/ajax/global-ajax-event-handlers/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T01:41:49.757

```
$.ajax({
  url: 'post.html',
  success: function(){
    alert('success');
  },
  error: function(){
    alert('failure');
  }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T03:25:09.133

与 Sonu 的回答相辅相成，我发现关于这很难完成的类似问题，因为 HTML 表单提交没有回调，并且似乎建议`ajax()`在您想要回发确认表单提交时使用。

请参阅此[Stackoverflow 链接](https://stackoverflow.com/questions/5854753/how-do-i-know-if-form-submission-is-successful)。

# paypal - Prestashop 上使用的 Paypal API

> ID：16205052
> 
> 赞同：1
> 
> 时间：2013-04-25T01:41:32.013
> 
> 标签：paypal, prestashop

是否适用于在不同域和主机上的 2 次不同 Prestashop 安装中使用相同的 Paypal API 用户名、密码和签名？或者是每个 Prestashop 的每个 Paypal 模块的唯一 Paypal API 用户名、密码和签名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:56:43.337

1.  是的
2.  不。

您的 Paypal 凭据与您的域或主机无关，它们只是让您可以访问 Paypal 服务。

# r - 这个 WinBUGS 模型有什么问题

> ID：16205053
> 
> 赞同：4
> 
> 时间：2013-04-25T01:41:34.217
> 
> 标签：r, winbugs, r2winbugs

我用`Winbugs`了from `R`via`R2WinBUGS`和`BRugs`package，我写了模型并尝试运行它，但是结果并没有出来，我看了`WinBUGS`日志，似乎没有任何问题。这是模型：

```
require(BRugs)
require(R2WinBUGS)
#  MCMC mosel
model<-function(){
  for(i in 1:M){
    y[i] ~ dnorm(x[i], sigma.y)
  }
  x[1] ~ dnorm(theta[1], sigma.x)
  theta[1] <- 0
  for(j in 2:M){
    x[j] ~ dnorm(theta[j], sigma.x)
    theta[j] <- a + b*x[j-1]
  }
  a ~ dunif(0, 1)
  b ~ dunif(-1, 1)
  tau.y ~ dgamma(0.1, 0.1)
  tau.x ~ dgamma(0.1, 0.1)
  sigma.y <- 1/sqrt(tau.y)
  sigma.x <- 1/sqrt(tau.x)
}

write.model(model, con = "model.bug")
modelCheck("model.bug")
#  model is syntactically correct

data=list(M = 90, y = rnorm(90)

inits = function(){
  list(tau.x = rgamma(1, 0.1, 0.1), tau.y = rgamma(1, 0.1, 0.1), a = runif(0, 1), b = runif(-1, 1))
}
parameters=c("a", "b", "x")

ret.sim <- bugs(data, inits, parameters, "model.bug",
            n.chains = 1, n.iter = 1000,
            n.sims = 500,
            program= "winbugs",
            working.directory = NULL,
            debug = T) 
```

模型检查通过，日志在`WinBUGS`这里：

```
display(log)
check(C:/Users/ADMINI~1.PC-/AppData/Local/Temp/Rtmp2LfZTu/model.bug.txt)
model is syntactically correct
data(C:/Users/ADMINI~1.PC-/AppData/Local/Temp/Rtmp2LfZTu/data.txt)
data loaded
compile(1)
model compiled
inits(1,C:/Users/ADMINI~1.PC-/AppData/Local/Temp/Rtmp2LfZTu/inits1.txt)
this chain contains uninitialized variables
gen.inits()
initial values generated, model initialized
thin.updater(1)
update(500) 
```

`WinBUGS`没有继续，并且没有显示错误消息，所以我找不到任何错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-26T23:44:26.173

此错误消息显然与初始值有关。尝试`runif(-1, 1)`在 R 控制台上运行，您会看到 :-) 您的意思是`runif(1, -1, 1)`（也`runif(1, 0, 1)`适用于前一个控制台。

祝你好运！

# java - 主题、背景颜色和操作栏的交互

> ID：16205056
> 
> 赞同：1
> 
> 时间：2013-04-25T01:42:34.283
> 
> 标签：java, android, colors, themes

我无法理解动作栏的外观与主题化之间的交互模式。我的应用程序设置为使用默认主题，我认为它是黑暗的：

```
<style name="AppBaseTheme" parent="android:Theme">
</style> 
```

通过应用程序范围的样式从应用程序中删除操作栏会导致主要活动的黑色背景：

```
 <activity
        android:name="com.atlarge.motionlog.MainActivity"
        android:label="@string/app_name" 
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
    > 
```

没有`android:theme="@android:style/Theme.NoTitleBar.Fullscreen"`线，活动背景是白色的。如果在 Activity 的方法中的代码中删除了`onCreate()`操作栏，则操作栏也消失了，但背景仍然是白色：

```
 ActionBar actionBar = getActionBar();
    actionBar.hide(); 
```

**TL;DR：**行为总结：

*   存在操作栏：白色背景
*   通过代码删除操作栏：白色背景
*   通过 XML 删除的操作栏：黑色背景

这是为什么？有人可以通过代码与 XML 和背景颜色解释操作栏外观的交互（或指向一个好的资源）吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-15T09:40:42.293

删除 onCreate 中的操作栏只是隐藏了 ActionBar 视图。它没有改变主题。

设置`android:theme="@android:style/Theme.NoTitleBar.Fullscreen"`是为您的活动设置一个主题，该主题带有该主题层次结构中的任何继承样式。

如果您查看android 源代码中的[Themes.xml](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/res/res/values/themes.xml)，您会看到样式中存在`<style name="Theme">`该项目`<item name="colorBackground">@android:color/background_dark</item>`

然后`<style name="Theme.NoTitleBar">`继承了`Theme`集合的所有样式`<item name="android:windowNoTitle">true</item>`

然后`<style name="Theme.NoTitleBar.Fullscreen">`which 继承自`NoTitleBar`and`Theme`设置`<item name="android:windowFullscreen">true</item>`and`<item name="android:windowContentOverlay">@null</item>`

这解释了为什么在应用该样式时您的背景是深色的。

如果你将你的主题设置为`Theme.Light.NoTitleBar.Fullscreen`你会达到同样的效果，但你会继承`<item name="colorBackground">@android:color/background_light</item>`应该`<style name="Theme.Light">`是浅色的。

或者，您可以扩展您想要的任何它们并覆盖任何样式。

所以，例如，你可以做类似的事情......

```
<style name="MyTheme" parent="@android:style/Theme.NoTitleBar.Fullscreen">
    <item name="colorBackground">@color/my_light_color</item>
    <item name="windowBackground">@drawable/screen_background_selector_light</item>
</style> 
```

这里有一些资源可以帮助你更多地理解主题：http: [//developer.android.com/guide/topics/ui/themes.html](http://developer.android.com/guide/topics/ui/themes.html) [http://brainflush.wordpress.com/2009/03/15/understanding -android 主题和样式/](http://brainflush.wordpress.com/2009/03/15/understanding-android-themes-and-styles/)

如果你想创建或扩展你自己的主题，它总是值得看看 android 源代码，看看你可以扩展和覆盖什么：http: [//developer.android.com/guide/topics/ui/themes.html#PlatformStyles](http://developer.android.com/guide/topics/ui/themes.html#PlatformStyles)

希望有帮助。

# php - 通过ajax加载内容后Jquery不起作用

> ID：16205057
> 
> 赞同：0
> 
> 时间：2013-04-25T01:42:44.673
> 
> 标签：php, javascript, html, jquery

我是java脚本的新手。当页面中已经存在表格时，我用于删除表格行的代码可以正常工作，但是如果我通过 ajax 调用从另一个页面加载表格，则它不起作用..请帮我解决这个问题.. java 脚本在这里

```
$(document).ready(function()
{
    $('table#delTable td a.delete').click(function()
    {
        if (confirm("Are you sure you want to delete this row?"))
        {
            var id = $(this).parent().parent().attr('id');
            var data = 'id=' + id ;
            var parent = $(this).parent().parent();

            $.ajax(
            {
                   type: "POST",
                   url: "delete_row.php",
                   data: data,
                   cache: false,

                   success: function()
                   {
                        parent.fadeOut('slow', function() {$(this).remove();});
                   }
             });                
        }
    });

    // style the table with alternate colors
    // sets specified color for every odd row
    $('table#delTable tr:odd').css('background',' #FFFFFF');
}); 
```

html代码

```
<table id="delTable">       

    <tr id="ripon">
        <td align="left">Ipsum</td>
        <td align="center">19</td>
        <td align="center">17</td>
        <td align="center"><a href="#" class="delete" style="color:#FF0000;"><img alt="" align="absmiddle" border="0" src="img/delete.png" /></a></td>
    </tr>
    <tr id="rukon">
        <td align="left">Dolor</td>
        <td align="center">55</td>
        <td align="center">12</td>
        <td align="center"><a href="#" class="delete" style="color:#FF0000;"><img alt="" align="absmiddle" border="0" src="img/delete.png" /></a></td>
    </tr>
    <tr id="sumon">
        <td align="left">Sit</td>
        <td align="center">11</td>
        <td align="center">18</td>
        <td align="center"><a href="#" class="delete" style="color:#FF0000;"><img alt="" align="absmiddle" border="0" src="img/delete.png" /></a></td>
    </tr>
    <tr id="mamun">
        <td align="left">Amet</td>
        <td align="center">29</td>
        <td align="center">27</td>
        <td align="center"><a href="#" class="delete" style="color:#FF0000;"><img alt="" align="absmiddle" border="0" src="img/delete.png" /></a></td>
    </tr> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T01:49:24.080

最简单的解决方案是使用“委托事件”。有关更多信息，请参阅[jQuery 的`on`文档](http://api.jquery.com/on/)。

```
$("body").on("click", "table#delTable td a.delete", function(event){
  // insert your code here
}); 
```

注意：当我调用`on`时`body`，如果页面加载时（或者更具体地说，当您`on`拨打电话时）它会在那里，您可以在离桌子“更近”的地方调用它。

# iphone - 在 iOS 中创建选项类型菜单

> ID：16205058
> 
> 赞同：5
> 
> 时间：2013-04-25T01:42:47.310
> 
> 标签：iphone, ios, objective-c

这就是我所说的，只是隐藏了调用它的视图的一半：

![在此处输入图像描述](https://i.stack.imgur.com/RzMNg.png)

我已经在互联网上搜索了几个小时，但我似乎缺少某种关键词。我搜索过：iOS 菜单、iOS 覆盖菜单、iOS 选项菜单、iOS 共享菜单（因为它类似于旧菜单）、iOS 调用菜单以及所有这些菜单的变体。如果有人能告诉我这种菜单的名称或可能解释如何制作菜单，那将非常有帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-25T01:44:40.693

这叫做一个[`UIActionSheet`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIActionSheet_Class/Reference/Reference.html)。

# ios - ios - 移动框架破坏了项目

> ID：16205059
> 
> 赞同：0
> 
> 时间：2013-04-25T01:43:01.300
> 
> 标签：ios, ios5, ios6

我最近将 Social.framework 和 Accounts.framework 添加到我的 ios 项目中。它被放置在导航器区域的顶部，我将这两个拖到了框架文件夹中。然后它在构建阶段“将二进制文件与库链接”中显示为红色......现在项目在启动时崩溃。

我做错了什么？解决此问题的正确方法是什么？

我收到此错误：

```
dyld: Library not loaded: /System/Library/Frameworks/Social.framework/Social
  Referenced from: /Users/owner12/Library/Application Support/iPhone Simulator/5.1/Applications/823A0485-7443-4206-B9F5-A84C03DBFB89/BusinessPlan.app/BusinessPlan
  Reason: image not found 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T01:47:40.430

你没有做错什么。有时 Xcode 会感到困惑。我建议您编辑项目，向下滚动到列出框架的位置，然后选择 Social 和 Accounts 框架，然后单击减号按钮。

![在此处输入图像描述](https://i.stack.imgur.com/7jW49.png)

之后，您可能想要退出 Xcode 并清理构建文件夹，如下所述：

[如何清空缓存并清理所有目标 Xcode 4](https://stackoverflow.com/questions/5714372/how-to-empty-caches-and-clean-all-targets-xcode-4/6247073#6247073)

如果*这*不能解决问题，您可能必须恢复到较早的提交。

# java - 如何使用 XMLBeans 将 XML 声明添加到 xml

> ID：16205060
> 
> 赞同：4
> 
> 时间：2013-04-25T01:43:05.003
> 
> 标签：java, xml, xmlbeans

我有这个关于 Java XMLBeans 的问题。我想在 XML 文件的顶部包含以下声明：

```
<?xml version="1.0" encoding="UTF-8"?> 
```

无论如何，有没有用 XMLBeans 原生地做到这一点？以上内容始终可以作为字符串连接到 xml 内容，但这很难看。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-09T14:06:43.567

该`<?xml version="1.0" encoding="UTF-8"?>`构造是一个*[**XML 声明**](http://www.w3.org/TR/REC-xml/#NT-XMLDecl)*。

每[org.apache.xmlbeans.save(ContentHandler ch, LexicalHandler lh)](http://xmlbeans.apache.org/docs/2.0.0/reference/org/apache/xmlbeans/XmlTokenSource.html#save%28org.xml.sax.ContentHandler,%20org.xml.sax.ext.LexicalHandler%29)：

> 将此源表示的 XML 写入给定的 SAX 内容和词法处理程序。请注意，此方法不保存 XML 声明，包括编码信息。**要使用 XML 保存 XML 声明，请参阅[save(OutputStream)](http://xmlbeans.apache.org/docs/2.0.0/reference/org/apache/xmlbeans/XmlTokenSource.html#save%28java.io.OutputStream%29)、[save(OutputStream, XmlOptions)](http://xmlbeans.apache.org/docs/2.0.0/reference/org/apache/xmlbeans/XmlTokenSource.html#save%28java.io.OutputStream,%20org.apache.xmlbeans.XmlOptions%29)、[save(File)](http://xmlbeans.apache.org/docs/2.0.0/reference/org/apache/xmlbeans/XmlTokenSource.html#save%28java.io.File%29)或[save(File, XmlOptions)](http://xmlbeans.apache.org/docs/2.0.0/reference/org/apache/xmlbeans/XmlTokenSource.html#save%28java.io.File,%20org.apache.xmlbeans.XmlOptions%29)**。

# javascript - 为什么有一个'！' 在'函数（$）{}（window.jQuery）'之前？

> ID：16205068
> 
> 赞同：-2
> 
> 时间：2013-04-25T01:43:58.740
> 
> 标签：javascript, twitter-bootstrap

有一个“！” 在函数之前，为什么？

[http://twitter.github.io/bootstrap/assets/js/bootstrap-transition.js](http://twitter.github.io/bootstrap/assets/js/bootstrap-transition.js)

```
! function($) {

    //......

}(window.jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T01:45:44.853

`!`导致函数被视为表达式，这意味着它具有与此相同的效果：

```
(function($) {

    //......

})(window.jQuery); 
```

# ruby-on-rails - 获取 Rails 2.x 应用程序的特定 Rails 版本

> ID：16205070
> 
> 赞同：2
> 
> 时间：2013-04-25T01:44:09.680
> 
> 标签：ruby-on-rails

可以找出在 Rails 2.x 上构建的 Rails 应用程序，因为它有一个脚本/服务器文件。

但是我如何找到编写该应用程序的特定 Rails 版本。该应用程序的 doc/README_FOR_APP 似乎在这方面没有任何帮助。我可以通过任何其他方式计算出应用程序的特定 Rails 版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T02:05:07.053

尝试`script/about`在命令行中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T02:05:18.160

它在您的 config/environment.rb 中定义。赶紧跑

```
 ./script/runner 'puts RAILS_GEM_VERSION' 
```

# php - rss fetch 中的 foreach 循环错误

> ID：16205077
> 
> 赞同：0
> 
> 时间：2013-04-25T01:45:03.713
> 
> 标签：php, rss

我正在尝试从 rss 提要中获取链接，但这样做时出现以下错误

`Warning: Invalid argument supplied for foreach() in /home/sss/public_html/radiorss/feedcrawler.php on line 1`1

下面是我正在运行以获取值的代码。

```
 <?php
    include 'xml_regex.php';
    include 'simple_html_dom.php';

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL,'www.newsonair.nic.in/NSD.asp');
    curl_setopt($ch, CURLOPT_HEADER, false);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    $xml = curl_exec($ch);
    curl_close($ch);

    foreach($item as $item) {
      echo $item->title.'<br />';
      echo $item->pubDate.'<br />';
      echo $item->link.'<br />';
      echo $item->description.'<br />';
      echo $item->enclosure.'<br />';
    }

?> 
```

请帮助我知道我错在哪里。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T01:58:26.977

> 警告：在第 11 行的 /home/sss/public_html/radiorss/feedcrawler.php 中为 foreach() 提供的参数无效

这种类型的错误表明您没有将数组传递给 foreach 构造。

您的第一个问题是您需要确保 $item 是一个已初始化的数组。您的代码示例未显示它的定义位置。您必须将其追溯到它的起源，并确保它的值是 w/e 对象的数组。var_dump() 函数可用于此目的。

您的下一个问题是您要覆盖 foreach 中数组的值。

```
foreach($item as $item) {
...
} 
```

需要像...

```
foreach($items as $item) or foreach($item as $aItem) 
```

# c++ - 使用列表类和 push_back 的 C++ 内存泄漏

> ID：16205080
> 
> 赞同：0
> 
> 时间：2013-04-25T01:45:39.470
> 
> 标签：c++, memory-management, vector, memory-leaks, destructor

使用列表类和 push_back 的 C++ 内存泄漏

```
void EMAdd(int n)
{
   list<Employee*> em;
   for (int i = 1; i <= n; i++)
      em.push_back(new Employee());
} 
```

Q1。最后，类list的析构函数自动删除em的节点？

Q2。但是为什么这个函数还有内存泄漏呢？

谢谢，我会很感激你的回答！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T01:49:07.987

的析构函数`Employee`没有*被*调用。你有一个*指向*`list`对象的指针，而不是一个对象列表。当列表的析构函数被调用时，它会销毁指向对象的指针，但不会销毁它们指向的您使用创建的对象。它们仍将在内存中，但是当列表被销毁时，对它们的唯一引用会丢失，从而泄漏内存。*`Employee``Employee``Employee``new Employee()`*

 *请记住，每个呼叫都`new`必须有一个匹配的呼叫到`delete`某个地方。但是，最好不要使用指针，直接使用`Employee`对象列表。

```
void EMAdd(int n)
{
   list<Employee> em;
   for (int i = 1; i <= n; i++)
      em.push_back(Employee());
} 
```

由于其中的每个元素`std::list`都已动态分配，因此指针列表是多余的，并且本质上为您提供了一组指向指针的指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T01:51:28.063

您应该有 a `list`of `unique_ptr`s 以便在销毁时释放内存：

```
std::list<std::unique_ptr<Employee>> em; 
```

但正如大卫布朗所说，你不应该一开始就使用指针。*

# android - 手动更改设置后小部件更改设置不更新

> ID：16205082
> 
> 赞同：0
> 
> 时间：2013-04-25T01:45:51.577
> 
> 标签：android, android-widget

我对android编程有点陌生。我正在尝试制作一个关闭和打开飞行模式的小部件。在设置中手动更改飞行模式后，我无法更新小部件。我假设一旦我回到主屏幕就会调用 onUpdate 函数，但我错了。我将如何解决这个问题？

下面是我的代码：主小部件

```
import android.app.PendingIntent;
import android.appwidget.AppWidgetManager;
import android.appwidget.AppWidgetProvider;
import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;
import android.widget.RemoteViews;
import android.provider.Settings;
import android.widget.Toast;
import android.util.Log;

public class AirplaneModeWidget extends AppWidgetProvider
{
    private static boolean state;
    private static String TAG = "APMode_WIDGET";
    public void onCreate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds)
    {
        Log.i(TAG,"In onCreate");
        state = isAirplaneMode(context);
        RemoteViews remoteViews = new RemoteViews(context.getPackageName(), R.layout.airplane_mode);
        remoteViews.setOnClickPendingIntent(R.id.ibtn_airplane_mode, buildButtonPendingIntent(context));
        updateUI(remoteViews);
        pushWidgetUpdate(context, remoteViews); 
    }
    @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) 
    {
        Log.i(TAG,"In onUpdate");
        state = isAirplaneMode(context);
        RemoteViews remoteViews = new RemoteViews(context.getPackageName(), R.layout.airplane_mode);
        remoteViews.setOnClickPendingIntent(R.id.ibtn_airplane_mode, buildButtonPendingIntent(context));
        updateUI(remoteViews);
        pushWidgetUpdate(context, remoteViews);

    }

public static PendingIntent buildButtonPendingIntent(Context context) 
{

        Intent intent = new Intent();
        intent.setAction("com.ps.transparenttogglewidget.intent.action.CHANGE_STATUS");
        return PendingIntent.getBroadcast(context, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
    }

    public static void pushWidgetUpdate(Context context, RemoteViews remoteViews) 
    {
        ComponentName myWidget = new ComponentName(context, AirplaneModeWidget.class);
        AppWidgetManager manager = AppWidgetManager.getInstance(context);
        manager.updateAppWidget(myWidget, remoteViews);     
    }

    public static void updateUI(RemoteViews rview)
    {
        Log.i(TAG,"in updateUI");
        Log.i(TAG,"State is" + state);
        if(state)
        {
            rview.setImageViewResource(R.id.ibtn_airplane_mode,R.drawable.ic_hw_airplane_on);
        }
        else
        {
            rview.setImageViewResource(R.id.ibtn_airplane_mode,R.drawable.ic_hw_airplane_off);
        }
    }
    public static boolean isAirplaneMode(Context context) 
    {
        Log.i(TAG,"in isAirplaneMode");
        return Settings.System.getInt(context.getContentResolver(), Settings.System.AIRPLANE_MODE_ON, 0) == 1;
    }
    public static void setAirplaneMode(Context context)
    {
        Log.i(TAG,"in setAirplaneMode");
        state = isAirplaneMode(context);
        Toast.makeText(context,"state :"+state,Toast.LENGTH_SHORT).show();
        Log.i(TAG,"state is "+state);
        Settings.System.putInt(context.getContentResolver(),Settings.System.AIRPLANE_MODE_ON, state ? 0 : 1);
        Intent intent = new Intent(Intent.ACTION_AIRPLANE_MODE_CHANGED);
        intent.putExtra("state",!state);
        context.sendBroadcast(intent); 
        state = isAirplaneMode(context);
    }
} 
```

这是我的 IntentReceiver 代码

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;
import android.widget.RemoteViews;

    public class AirplaneModeIntentReceiver extends BroadcastReceiver
    {
        private static String TAG = "APMode_WIDGET";
        public void onReceive(Context context, Intent intent)
        {   
            Log.i(TAG,"in onReceive");
            if(intent.getAction().equals("com.ps.transparenttogglewidget.intent.action.CHANGE_STATUS"))
            {
                AirplaneModeWidget.setAirplaneMode(context);
                RemoteViews remoteViews = new RemoteViews(context.getPackageName(), R.layout.airplane_mode);
                remoteViews.setOnClickPendingIntent(R.id.ibtn_airplane_mode, AirplaneModeWidget.buildButtonPendingIntent(context));
                AirplaneModeWidget.updateUI(remoteViews);
                AirplaneModeWidget.pushWidgetUpdate(context, remoteViews);
            }

        }
    } 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-07T18:15:21.407

我猜你不应该检查飞行模式，而是检查互联网。

```
//check internet connection
public static boolean isNetworkAvailable(Context context) {
    ConnectivityManager connectivityManager = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo activeNetworkInfo = connectivityManager.getActiveNetworkInfo();
return activeNetworkInfo != null && activeNetworkInfo.isConnected();
} 
```

并仅在网络正常时触发您的任务。如果没有网络，您可以检查飞行模式并显示敬酒“请转飞行模式”。

希望有帮助:)

# android - 滚动时防止选项卡中的 webview 中的单击事件

> ID：16205083
> 
> 赞同：2
> 
> 时间：2013-04-25T01:46:04.997
> 
> 标签：android, webview, gesturedetector

我正在使用[ViewPager Extension](https://github.com/astuetz/ViewPagerExtensions)使我的应用程序具有标签功能。我的应用中有两个选项卡，我们在这里命名为 tabA 和 tabB。tabA 包含一个 webview 组件，而 tabB 包含一个 listview。

现在，我遇到了一个问题：一旦我尝试从 tabA 滚动到 tabB，tabA 中的页面会在更改为 tabB 时（或之前）更改。换句话说，当我尝试从 tabA 滚动到 tabB 时，我的要求是不要触发 tabA 中的点击事件。

有没有人对这个问题有任何想法或经验，非常感谢！

我曾尝试使用 GestureDetector 来检测手势，但它对我不起作用。

```
final GestureDetector dector = new GestureDetector(new OnGestureListener(){...}
webView.setOnTouchListener(new OnTouchListener() {

    @Override
    public boolean onTouch(View v, MotionEvent event) {

        return dector.onTouchEvent(event);
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-13T04:24:44.250

我有同样的问题。我已经搜索了几个需要在 java 中编码的想法，但我认为这不是好的、简单、干净的方式。然后我找到了一个非常简单和干净的解决方案。你只需要使用`android:descendantFocusability="blocksDescendants"`这行代码在 webView 的父 XML 中使用这行代码。而已

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T02:27:53.833

你能做的是

1.  然后检测滑动并设置一个标志

    ```
    public interface TouchDelegate {
       public void gestureHandler(String msg, float downX, float downY);

       public boolean notASwipe(View v, MotionEvent event);
    }

    public class SwipeDetector implements View.OnTouchListener {

       private TouchDelegate mView;
       static final int MIN_DISTANCE = 50;
       private float downX, downY, upX, upY;
       public SwipeDetector(TouchDelegate view) {
          this.mView = view;
       }

       public void onRightToLeftSwipe() {
          mView.gestureHandler("R2L", downX, downY);
       }

       public void onLeftToRightSwipe() {
          mView.gestureHandler("L2R", downX, downY);
       }

       public void onTopToBottomSwipe() {
          mView.gestureHandler("T2B", downX, downY);
       }

       public void onBottomToTopSwipe() {
          mView.gestureHandler("B2T", downX, downY);
       }

       public boolean onTouch(View v, MotionEvent event) {
       switch (event.getAction()) {
       case MotionEvent.ACTION_DOWN: {
           downX = event.getX();
           downY = event.getY();
           return true;
       }
       case MotionEvent.ACTION_UP: {
           upX = event.getX();
           upY = event.getY();

           float deltaX = downX - upX;
           float deltaY = downY - upY;

           // swipe horizontal?
           if (Math.abs(deltaX) > MIN_DISTANCE) {
               // left or right
               if (deltaX < 0) {
                   this.onLeftToRightSwipe();
                   return true;
               }
               if (deltaX > 0) {
                   this.onRightToLeftSwipe();
                   return true;
               }
           } else {
               // swipe vertical?
               if (Math.abs(deltaY) > MIN_DISTANCE) {
                   // top or down
                   if (deltaY < 0) {
                       this.onTopToBottomSwipe();
                       return true;
                   }
                   if (deltaY > 0) {
                       this.onBottomToTopSwipe();
                       return true;
                   }
               } else {
                   Log.d(getClass().getSimpleName(),
                           "SwipeDetector: onTouch: Swipe was only x: " + Math.abs(deltaX)
                                + " long, need at least " + MIN_DISTANCE);
                Log.d(getClass().getSimpleName(),
                        "SwipeDetector: onTouch: Swipe was only y: "
                                + Math.abs(deltaY)
                                + " long, need at least " + MIN_DISTANCE);
                return mView.notASwipe(v, event); // We don't consume the
                                                    // event
            }
        }
        return true;
    }
    }
    return false;
    }
    } 
    ```

2.  覆盖 shouldOverrideUrlLoading 以禁用 webview 上的所有链接。这是禁用 webview 上所有链接的代码：

    ```
    public class MyWebViewClient extends WebViewClient {
     public boolean shuldOverrideKeyEvent (WebView view, KeyEvent event) {
        if(swipe)              
           return true;
         return false;
     }
     public boolean shouldOverrideUrlLoading (WebView view, String url) {
       if (!swipe) {
            view.loadUrl(url);
       }
       return true;
     }
    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-25T06:02:50.840

子类化`WebView`，然后像这样覆盖该`onTouchEvent`方法：

```
@Override
public boolean onTouchEvent(MotionEvent event)
{
    // If this web view gets sent a 'CANCEL' event, it means the 
    // parent view has intercepted the event (for scrolling / swiping),
    // so we want to catch it, otherwise it propagates into the HTML 
    // and triggers the click
    int action = MotionEventCompat.getActionMasked(event);
    if(action == MotionEvent.ACTION_CANCEL)
    {
        return true;
    }
    return super.onTouchEvent(event);
} 
```

应该发生的是，当有适当的滑动时，封闭的 ViewPager 已经拦截了触摸事件，这会将`ACTION_CANCEL`事件发送到 WebView。通过在方法中捕获该`ACTION_CANCEL`事件`onTouchEvent`，它可以防止该事件进入 WebView 中的 HTML。

# c# - Form.Show() 可以在调用后使表单本身变为空吗？

> ID：16205084
> 
> 赞同：1
> 
> 时间：2013-04-25T01:46:08.093
> 
> 标签：c#, winforms, forms, dotnetbar

这真的是我编程生活中最烦人的事情：

1.  我有一个与我的申请一起保存的表格。我没有调用某些方法来处理它的代码，我不希望它以任何理由被处理，我确定如果它发生，原因不会在我的代码中。这个表单是一个自定义表单，它有一个名为 Next() 的方法，这个 Next() 只是在表单上显示下一个项目信息。

2.  当我按下一个导致调用 Next() 的按钮时发生了最糟糕的事情，并且出现了一个异常说“**对象引用未设置为对象的实例**”。什么？这是代码，我将表单的引用保存到名为“currentShownForm”的表单变量中（一次只显示我的表单之一，所有这些都应该与我的应用程序一起使用）：

    ```
    private void ShowForm(CustomRibbonForm form)
    {               
        if (!form.Visible)
        {
            if (currentShownForm != null) currentShownForm.Hide();
            form.Show();                
            currentShownForm = form;                
        }
    } 
    ```

如果我按下 Next 按钮，Next() 会像这样调用：

```
currentShownForm.Next(); 
```

谜团的形式是.Show(); 有了上面的ShowForm()方法，你觉得currentShowForm可以为null吗？？？什么？任何情况？它为 null 的唯一时刻是在显示第一个表单之前。在第一个显示后，它将是第一个表单，任何其他显示的下一个表单都将被它引用。那么在某些情况下它是如何变为空的？？？ShowForm() 方法中的代码是我项目中唯一可以更改 currentShownForm 引用的代码。

这真的让我很困惑，我无法相信我所看到的。哦，我的上帝，我对此一无所知，任何想法，但我不得不尝试这样最荒谬的事情：

```
private void ShowForm(CustomRibbonForm form){
        if (!form.Visible)
        {
            if (currentShownForm != null) currentShownForm.Hide();
            currentShownForm = form; 
            form.Show();                                               
        }
} 
```

哇，在尝试这个之前，我不认为它可以让任何事情变得不同，但它确实有效。当我按下 Next 按钮时，currentShownForm 不为空。ShowForm中两行代码的交换有什么魔力？？？我认为只有一个原因，form.Show() 以某种方式处理了表单本身？但为什么它仍然显示？

值得注意的是我的表单不是 .NET 表单（只是继承自 .NET 表单），它是一个自定义表单，而且它再次来自 DotNetBar lib，哇，我有一个想法，关于写一本你应该写的最烦人的事情知道使用 DotNetBar 时（至少，我有大约 5 件事要写，我敢打赌，如果我仍然使用它，还会有更多）。

请查看上面的代码，并解释一下为什么会发生这种情况？我无法解释它，事实上，我想这是一个错误。

您的帮助将不胜感激！

谢谢！

# 更新

现在，至少我知道问题发生的原始原因，但仍然不明白为什么：

实际上我的表单有一些自定义控件，这里涉及到的控件是一个CustomComboBox。这个组合框是一个二合一控件，由一个普通的组合框（同样，一个 DotNetBar 组合框，即 ComboBoxEx）和一个可聚焦的标签（一个自定义的用户控件）组成。所有控件都注册一个 ParentChanged 事件来为其父窗体注册一些事件，如下所示：

```
protected override void OnParentChanged(EventArgs e){
  if(Parent is CustomRibbonForm){
      ((CustomRibbonForm)Parent).RefreshControls += (s,ev) => {
              Show();
              Hide();
      };
  }   
} 
```

我的表单有一个名为 RefreshControls 的已定义事件，将在需要时引发。它有一个引发该事件的公共方法，称为 RefreshAllControls。并且对该方法的调用放置在 ShowForm() 之后我的主表单（不是我正在谈论的表单）的 Activated 事件处理程序中，如下所示：

```
Activated += (s,e) => {
    ShowForm(myForm);
    myForm.RefreshAllControls();
}; 
```

接下来是：当我注释掉 Show(); 和隐藏（）；在 OnParentChanged 方法中，它在两种情况下都可以正常工作：

```
protected override void OnParentChanged(EventArgs e){
  if(Parent is CustomRibbonForm){
      ((CustomRibbonForm)Parent).RefreshControls += (s,ev) => {
              //Show();
              //Hide();
      };
  }   
} 
```

但如果不是，则只有 1 个案例有效（在调用 form.Show() 之前分配了 currentShowForm。它更接近问题的原因，但仍然不容易理解。

希望您能通过这次更新向我解释一些事情！谢谢

# 下一个更新

现在我知道 currentShownForm 为空，因为第一个分配实际上从未完成，显示了表单`currentShownForm = form`但未执行，并且因为 currentShownForm 最初为空，在调用 ShowForm() 方法后它仍然为空。

它非常接近原因，但仍然很奇怪：

```
private void ShowForm(CustomRibbonForm form){
        if (!form.Visible)
        {
            if (currentShownForm != null) currentShownForm.Hide();
            form.Show(); //<------ I marked a break point here.                                               
            currentShownForm = form; //<----- I also marked a break point here.
        }
} 
```

用同样的方法标出两个连续的断点后，似乎可以确定所有的断点都会被单步通过，但只有第一个断点被单步通过。之后显示主界面，绕过第二个断点？？？？？？？？？什么？？？？？？？？？？？？？？在调用 form.Show() 之后发生了许多事件，其中大多数是我的自定义控件中的事件（与 Focus、LostFocus 和 Paint 事件有关）。这是我第一次看到如此奇怪的代码步进。现在这很接近事业，希望你有话要说。谢谢

# haskell - Haskell 编写 myLength

> ID：16205086
> 
> 赞同：4
> 
> 时间：2013-04-25T01:46:18.310
> 
> 标签：haskell

我在这个页面上工作

[http://www.haskell.org/haskellwiki/99_questions/Solutions/4](http://www.haskell.org/haskellwiki/99_questions/Solutions/4)

我理解每个函数的含义，并且很高兴看到一个函数可以以多种方式定义。但是，我刚开始想知道哪个更快。我认为它会是它所说的`length`那个`Prelude`。

```
length [] = 0
length (x:xs) = 1 + length xs 
```

但是，这比`length`.`Prelude`

在我的计算机`length`上，`Prelude`返回长度为`[1..10^7]`0.37 秒。然而，如上定义的函数需要 15.26 秒。

我定义了自己的长度函数，它使用了一个累加器。只用了 8.99 秒。

我想知道为什么会出现这些大差异？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T02:05:00.710

当您说“ `length`in `Prelude`return ... in 0.37 sec”时，您指的是哪个编译器？如果您使用 GHC，您可以看到，例如，[here](http://www.haskell.org/ghc/docs/latest/html/libraries/base/src/GHC-List.html#length)实际实现与简单的不同

```
length [] = 0
length (x:xs) = 1 + length xs 
```

即，它是：

```
length l = len l 0#
  where
    len :: [a] -> Int# -> Int
    len []     a# = I# a#
    len (_:xs) a# = len xs (a# +# 1#) 
```

这段代码使用了一个累加器，并且通过使用未装箱的整数来避免巨大的未计算的thunk 的问题，即这个版本是高度优化的。

为了说明“简单”版本的问题，请考虑如何`length [1, 2, 3]`评估：

```
length [1, 2, 3]
  => 1 + length [2, 3]
  => 1 + (1 + length [3])
  => 1 + (1 + (1 + length []))
  => 1 + (1 + (1 + 0)) 
```

直到真正需要它的结果时才会计算总和，因此您会看到，当输入是一个巨大的列表时，您将首先在内存中创建一个巨大的总和，然后仅在真正需要其结果时才对其进行评估。

相比之下，优化版本的评估如下：

```
length [1, 2, 3]
  => len [1, 2, 3] 0#
  => len [2, 3] (1#)
  => len [3] (2#)
  => len [] (3#)
  => 3 
```

即，“+1”立即完成。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T02:34:23.137

您应该注意的两个步骤是：

*   你是在运行编译的代码而不是在 ghci 中吗？
*   您是否使用 -O2 标志

以下基准是在标准中完成的，并使用以下功能以及[前奏曲的长度](http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/src/GHC-List.html#length)，这需要`MagicHash`pragma 和 importing `GHC.Base`：

```
myLength1 :: [a] -> Int                                                          
myLength1 [] = 0                                                                 
myLength1 (x:xs) = 1 + myLength1 xs                                              

myLength2 :: [a] -> Int                                                          
myLength2 lst = len lst 0                                                        
  where                                                                          
    len :: [a] -> Int -> Int                                                     
    len [] n = n                                                                 
    len (_:xs) n = len xs (n+1)                                                  

myLength3                  :: [a] -> Int                                         
myLength3 l                =  len l 0#                                           
  where                                                                          
    len :: [a] -> Int# -> Int                                                    
    len []     a# = I# a#                                                        
    len (_:xs) a# = len xs (a# +# 1#) 
```

基准测试的结果，在最后找到完整的，没有使用 teh`-O2`标志是：

```
 mean
length    :   5.4818 ms
myLength1 : 202.1552 ms
myLength2 : 236.3042 ms
myLength3 :   5.3630 ms 
```

现在让我们`-02`在编译时使用标志

```
 mean
length    :   5.2597 ms
myLength1 :   12.882 ms
myLength2 :   5.2026 ms
myLength3 :   5.6393 ms, 
```

请注意，长度`myLength3`没有变化，但其余两个变化很大。天真的方法在 3 个不同的因子之内，`myLength2`现在通过模拟前奏长度，但使用拆箱，现在可以与内置长度相媲美。

另外值得注意的是，将 Int 拆箱的 myLength3 变化不大，并且在 ghci 中的性能可能比 myLength 1 或 2 好得多。

完整代码在：[https ://gist.github.com/Davorak/5457105](https://gist.github.com/Davorak/5457105)

编辑：一些不适合评论的进一步信息：

带有字母的 ghc 标志`-O2`表示“应用所有非危险优化，即使这意味着编译时间显着延长。”如果这涉及一些数据类型的拆箱，我不会感到惊讶。您可以在此处找到不同标志的进一步解释[。](http://www.haskell.org/ghc/docs/7.6.1/html/users_guide/options-optimise.html)这里是带有更多[ghc](http://www.haskell.org/ghc/docs/7.6.1/html/users_guide/flag-reference.html) 7.6.2 标志列表的链接，但是解释可能简短而神秘。

我对拆箱和原始操作并不十分熟悉，它们的后果是[GHC 手册的第三个链接，](http://www.haskell.org/ghc/docs/7.6.2/html/users_guide/primitives.html)其中涵盖了拆箱类型。您偶尔会在优化教程中发现它们。大多数情况下，除非您真的需要每一克的性能，否则您不应该打扰它们，因为正如我们上面所说，它们通常只会在使用其他优化标志后产生持续的差异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T02:04:00.587

前奏只是语义规范；它不限制实施。来自[http://www.haskell.org/onlinereport/haskell2010/haskellch9.html#x16-1710009](http://www.haskell.org/onlinereport/haskell2010/haskellch9.html#x16-1710009)：

> 它构成了 Prelude 的规范。许多定义是为了清晰而不是效率而编写的，并且不需要按照此处所示实施规范。

在 GHC 的情况下，实际`length`功能是高度优化的。

# c++ - IntelliSense：没有构造函数“Sock::Connection::Connection”的实例与参数列表 C++ 匹配

> ID：16205087
> 
> 赞同：0
> 
> 时间：2013-04-25T01:46:19.143
> 
> 标签：c++, winsock

我有这个奇怪的问题，我不知道发生了什么。它不会让我在 VC++2012 中创建一个类。我收到此错误：IntelliSense：没有构造函数实例“Sock::Connection::Connection”与参数列表 C++ 匹配

这是我在命名空间 Sock 中的连接类

```
class Connection
    {
    private:
        const char *host;
        const char *nick;
        LPHOSTENT hostEntry;
        SOCKET sock;
        unsigned short port;
        bool ip;    

        _onrecv onrecv;
        _onconnect onconnect;
    public:
        Connection(const char *_host, unsigned short _port, bool _ip, _onrecv myonrecv = NULL, _onconnect myonconnect = NULL);
        ~Connection();

        bool _connect(int delay_ms);
        int _isconnected(fd_set *rd, fd_set *wr, fd_set *ex);
        void start();       
    }; 
```

这就是我试图创建它的方式......但它不会工作

```
#include "sock.h"

void WINAPI HandleConnection(SOCKET sock);
void WINAPI HandleReceive(SOCKET sock, char *buf, int len);

static const char host[] = "127.0.0.1";

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInst, LPSTR lpCmdLine, int nShowCmd)
{
    if( Sock::Initiate() )
    {
        using namespace Sock;
        Connection conn(host, 9001);
    }

    return 0;
}

void WINAPI HandleConnection(SOCKET sock)
{

}

void WINAPI HandleReceive(SOCKET sock, char *buf, int len)
{
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T01:53:55.363

`_ip`调用构造函数时，似乎缺少非可选参数。

# ios - 如何在动画期间更改CALayer的颜色？

> ID：16205089
> 
> 赞同：4
> 
> 时间：2013-04-25T01:46:30.200
> 
> 标签：ios, objective-c, calayer

我希望图层从绿色开始，然后慢慢变成黄色、橙色，最后变成红色。我该怎么做呢？

```
CAShapeLayer *layer = [CAShapeLayer layer];
[layer setStrokeColor:[UIColor greenColor].CGColor];
[layer setLineWidth:5.0f];
[layer setFillColor:[UIColor clearColor].CGColor];

UIBezierPath *path = [UIBezierPath bezierPathWithRoundedRect:button.bounds cornerRadius:10.0f];
layer.path = path.CGPath;

CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"strokeEnd"];
animation.fromValue = [NSNumber numberWithFloat:0.0f];
animation.toValue = [NSNumber numberWithFloat:1.0f];
animation.duration = 4.0f;

[layer addAnimation:animation forKey:@"myStroke"];
[button.layer addSublayer:layer]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T05:33:09.707

我刚刚为你编写了这段代码。我使用 CAKeyframeAnimation 既是因为它允许多个`toValues`动画，也是因为它允许对动画进行更多控制。

```
//Set up layer and add it to view
CALayer *layer = [CALayer layer];
layer.frame = self.view.bounds;
[self.view.layer addSublayer:layer];

//Create animation
CAKeyframeAnimation *colorsAnimation = [CAKeyframeAnimation animationWithKeyPath:@"backgroundColor"];
colorsAnimation.values = [NSArray arrayWithObjects: (id)[UIColor greenColor].CGColor,
                          (id)[UIColor yellowColor].CGColor, (id)[UIColor orangeColor].CGColor, (id)[UIColor redColor].CGColor, nil];
colorsAnimation.keyTimes = [NSArray arrayWithObjects:[NSNumber numberWithFloat:0.25], [NSNumber numberWithFloat:0.5], [NSNumber numberWithFloat:0.75],[NSNumber numberWithFloat:1.0], nil];
colorsAnimation.calculationMode = kCAAnimationPaced;
colorsAnimation.removedOnCompletion = NO;
colorsAnimation.fillMode = kCAFillModeForwards;
colorsAnimation.duration = 3.0f;

//Add animation
[layer addAnimation:colorsAnimation forKey:nil]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-14T15:53:54.340

使用`CAKeyframeAnimation`是可以的，但有时你需要一些更简单的东西。这是使用`CABasicAnimation`3 行代码的方法。

```
CABasicAnimation *colorAnimation = [CABasicAnimation animationWithKeyPath:@"backgroundColor"];
colorAnimation.toValue = (id)[UIColor redColor].CGColor;

[layer addAnimation:colorAnimation forKey:nil]; 
```

# php - composer prefer-dist 和 prefer-source 之间的区别？

> ID：16205100
> 
> 赞同：58
> 
> 时间：2013-04-25T01:47:55.887
> 
> 标签：php, composer-php

查看PHP Composer`install`命令的帮助，我看到以下两个选项

```
$ composer help install
Options:
 --prefer-source            Forces installation from package sources when possible, including VCS information.
 --prefer-dist              Forces installation from package dist even for dev versions. 
```

什么是“dist”安装？我浏览了作曲家网站和谷歌，但似乎没有任何东西可以解决这个问题（所以我认为这对于熟悉 Composer 的人来说是核心和显而易见的——为新手问题道歉）

我假设`--prefer-source`Composer 会向 Packagist 询问存储库位置，然后是 checkout/clone/export/etc。项目本身。

如果是这样，那么`--prefer-dist`从哪里下载？它下载什么？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-04-25T03:20:28.357

根据[http://getcomposer.org/doc/03-cli.md](http://getcomposer.org/doc/03-cli.md)，该`--prefer-source`选项将更喜欢创建一个包目录，即“版本控制存储库”。这相当于您输入：

```
$ git clone ... 
```

或者

```
$ svn checkout ... 
```

该`--prefer-dist`选项将更喜欢创建一个非“版本控制存储库”，这相当于您键入：

```
$ git clone ... ; rm -fr dir/.git 
```

或者

```
$ svn export ... 
```

此外，您可以为`source`和`dist`在您的`composer.json`. 这是一个例子：

```
{
    "repositories": [
        {
            "type": "package",
            "package": {
                "name": "joshuaclayton/blueprint-css",
                "version": "master",
                "source": {
                    "url": "git://github.com/joshuaclayton/blueprint-css.git",
                    "type": "git",
                    "reference": "master",
                }
            }
        },
        {
            "type": "package",
            "package": {
                "name": "fiftyone/mobi-lite-php",
                "version": "2013.03.06",
                "dist": {
                    "url": "http://iweb.dl.sourceforge.net/project/fiftyone/51Degrees.mobi-Lite-2013.03.06.php.zip",
                    "type": "zip"
                },
            }
        }
    ]
} 
```

注意：无论出于何种原因，当我使用 时`--prefer-dist`，有时会出现错误，例如

```
Fatal error: Cannot redeclare class Zend_Db_Adapter_Pdo_Abstract in ... 
```

当我使用`--prefer-source`. 出于这个原因，我只使用`--prefer-source`, 直到我找出这个问题的原因。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2017-10-09T08:22:30.427

我不欣赏，甚至不赞成提供的答案，因为它**没有解决问题**。因此，尽管它有点太旧了，但我还是发布了这个答案，以便进一步参考这个问题。

* * *

# 基本：

通常作曲家处理**标签**（如`1.2.7`），但并非总是如此。您可能还需要一个**分支**（如`dev-master`）作为依赖项。

*   如果您希望 composer 需要一个**tag**，它只是将文件复制到您的本地（在您的`vendor`目录中的某个位置）。

*   如果您希望 composer 签出一个**分支**而不是一个标签，那么有机会（composer 的合理假设），您想要开发它（从而进行更改），因此 composer将存储**库克隆**到您的本地（同样，在目录中的某个位置`vendor`）。

* * *

# 所以呢？！

### 问题：

如果您需要一个**标签**，但仍然能够在本地开发它怎么办？

### 回答：

`--prefer-source`与您的`composer require`or`composer update`命令一起使用：

```
composer require symfony/symfony:3.4.* --prefer-source 
```

### 问题：

如果您想要一个最新的开发**分支**，但您只是想获得新的东西而不想参与它的开发怎么办？

### 回答：

`--prefer-dist`与您的`composer require`,`composer update`命令一起使用：

```
composer require symfony/symfony:dev-master --prefer-dist 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-05-13T22:34:17.527

正如[作曲家的文档](https://getcomposer.org/doc/05-repositories.md)中明确指出的那样：

> 事实上，Composer 内部将**每个版本都**视为一个**单独的包**。虽然在您使用 Composer 时这种区别并不重要，但在您想要更改它时却非常重要。

和，

> **Dist**：dist 是*包数据的打包版本*。通常是发布版本，*通常是稳定版本*。
> 
> **Source**：源用于开发。这*通常来自源代码存储库，例如 git*。当你想修改下载的包时，你可以获取它。

所以，

> 软件包可以提供其中任何一个，甚至两者都提供。根据某些因素，例如用户提供的选项和包的稳定性，将首选一个。

如果您要签出一个分支，则假定您要在该分支上工作，并且 Composer 实际上会将存储库克隆到您的供应商目录中的正确位置。

对于标签，它只是复制正确的文件而不实际克隆 repo。

# c# - OpenCV 相机跟随对象

> ID：16205101
> 
> 赞同：0
> 
> 时间：2013-04-25T01:48:02.050
> 
> 标签：c#, opencv, computer-vision, tracking, opencvsharp

我最近开始玩 openCVSharp，我用它来检测眼睛等物体并在它们周围画小盒子。

但是，我想控制我的相机，它能够水平旋转 180 度和垂直旋转 90 度，以实时检测和跟踪眼睛。因此，就好像脸部向左移动一样，相机会向左转以跟随它，等等。

你知道 OpenCVSharp（C# 包装器）是否可以做到这一点吗？

让我们让它变得更简单：假设我想检测和跟踪头部（不是眼睛），所以让头部的中心作为目标，并尽量让它成为相机图片的中心。现在，我知道在 C# Winform 或 WPF 中，我可以布局位图并计算像素并手动调整相机移动以使头部尽可能成为中心，例如使用 PID 控制器或其他东西。

综上所述，我是否可以在 OpenCVSharp 中使用来自摄像头的实时视频源做类似的事情？我只处理 C# Windform 和 WPF 中的静态图像，但没有像实时摄像头那样处理。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-19T08:17:32.543

您可以使用 KLT 功能跟踪器： [https ://www.youtube.com/watch?v=6B_PNDCWtz4](https://www.youtube.com/watch?v=6B_PNDCWtz4)

或 Camshift： [https ://www.youtube.com/watch?v=C-ivmaUHaP4](https://www.youtube.com/watch?v=C-ivmaUHaP4)

它们都在 Accord.NET Extensions 框架中实现： [https ://github.com/dajuric/accord-net-extensions](https://github.com/dajuric/accord-net-extensions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T12:44:58.837

我没有使用 OpenCVSharp 的经验，但是您尝试过[Emgu](http://www.emgu.com/wiki/index.php/Main_Page)吗？作为 OpenCV 的 C# 包装器，我有过非常积极的体验。我知道 Emgu 可以做到这一点。

这是一个[视频](http://www.youtube.com/watch?v=YINja04h3Ak)，显示它是可能的。

这是使用 Emgu 进行基本人脸检测的[教程。](http://www.emgu.com/wiki/index.php/Face_detection)

# .net - 从 MS Word 中提取文本信息

> ID：16205102
> 
> 赞同：3
> 
> 时间：2013-04-25T01:48:50.480
> 
> 标签：.net, ms-word, ms-office, office-interop, openxml-sdk

我想从 MS Word 文档中提取文本信息。提取的信息包括文本的位置、页码和样式。有谁可以建议我我该怎么做？什么图书馆可以支持我这样做？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T02:31:12.100

我建议您使用 OpenXML SDK 2.0 版。您可以查看下面的博客以了解如何了解提取内容。 [http://blogs.msdn.com/b/ericwhite/archive/2009/02/16/finding-paragraphs-by-style-name-or-content-in-an-open-xml-word-processing-document。 aspx](http://blogs.msdn.com/b/ericwhite/archive/2009/02/16/finding-paragraphs-by-style-name-or-content-in-an-open-xml-word-processing-document.aspx)

或有关 OpeXML SDK 的更多信息：

[http://msdn.microsoft.com/en-us/office/aa905545.aspx](http://msdn.microsoft.com/en-us/office/aa905545.aspx)

使用此库，您无需在计算机上安装 MS Word 即可提取内容或生成新的 Word 文档。

希望这有帮助。

# java - 如何在Java中找到员工列表的最低工资？

> ID：16205105
> 
> 赞同：1
> 
> 时间：2013-04-25T01:49:08.230
> 
> 标签：java

嗨，所以我有两个班级员工和部门。我的主要功能读取一个 .txt 文件，其中包含员工姓名、薪水、部门和职位。我的 Employee 类只是 getter 和 setter。制作了一个数组列表来代表员工，我不确定如何找到每个部门的最低工资。为了找到最高薪水，我在我的部门班上做了这个。

```
public class Department {
    String dept;
    List<Employee> employees;
    double minSal;
    double maxSal;

    public void addEmployee(Employee emp){
        maxSal = 0.0;
        if (maxSal < emp.getSalary()) {
            maxSal = emp.getSalary();
        } 
```

但我不确定如何获得最低工资。我的想法是从每个部门获取一名员工的薪水，并以此为起点

```
if (minSal > emp.getSalary()) {
    minSalary = emp.getSalary();
} 
```

但我意识到我不知道该怎么做。我能得到一些帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T01:53:57.637

```
if (employees.isEmpty() {
   return null; // No minimum salary available.
}
int minSalary = Integer.MAX_INT;
for (Employee e : employees) {
    minSalary = Math.min(minSalary, e.getSalary();
}
return minSalary; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T02:01:38.957

听起来您想要每个部门的最低薪水列表，而其他答案似乎只是为您提供跨部门的最低薪水。如果我是对的，并且您希望按部门获得低薪，您可能只想遍历列表并按部门将它们放在地图中，如下所示：

```
public Map<String, Double> getLowSalaries(List<Employee> employees) {
    Map<String, Double> lowSalaries = new HashMap<String, Double>();

    for(Employee employee : employees) {
        Double lowSalaryForDept = lowSalaries.get(employee.getDept());

        if(lowSalaryForDept == null || lowSalaryForDept < employee.getSalary()) {
            lowSalaries.put(employee.getDept(), employee.getSalary());
        }
    }
    return lowSalaries;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T01:52:49.290

有一个特殊的数字 ，`Double.POSITIVE_INFINITY`它大于任何可以用 表示的数字`double`。您可以将其用作搜索最小值的起点：

```
double minSalary = Double.POSITIVE_INFINITY;
...
if (minSal > emp.getSalary()) {
    minSalary = emp.getSalary();
} 
```

另一个常见的技巧是设置`minSalary`列表的第一个元素，然后从第二个元素开始搜索。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T01:57:22.153

这是使用 的变体`Iterator`：

```
public double minSalary(List<Employee> employees) {
    if (employees == null || employees.isEmpty()) {
        throw new IllegalArgumentException();
    }

    Iterator<Employee> iterator = employees.iterator();
    double min = iterator.next();
    while (iterator.hasNext()) {
        min = Math.min(min, iterator.next().getSalary());
    }

    return min;
} 
```

# css - CSS 预处理器 - 为每个页面加载构建 CSS 还是仅用于构建过程？

> ID：16205111
> 
> 赞同：1
> 
> 时间：2013-04-25T01:49:56.397
> 
> 标签：css, less

刚刚进入 CSS 预处理器的有趣世界。假设我们使用 LESS 来渲染我们的 CSS。我想知道两种不同的方法：

*   在每次页面加载时使用 LESS 呈现 CSS。
*   使用 LESS 作为构建过程的一部分，并且只在生产中使用渲染的 CSS。

我想知道是否有时您会使用其中一个而不是另一个。一方面，你有一个运行时的动态 CSS，而另一个静态 CSS 是从一个（希望）简洁明了的 LESS 模板构建的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T02:38:03.970

[这](http://css-tricks.com/lingering-misconceptions-on-css-preprocessors/)是 Chris Coyier 写的一篇关于 CSS-Tricks 的文章

Chris 说，使用 LESS，可以像使用普通文件一样`.less`使用`link`带有标签的`.css`文件

```
<link href="style.less"> 
```

尽管这是处理文件的一种方法，但它并不是最有效的方法。它可能会严重减慢加载案例，并且可能会使浏览器崩溃。最好使用 LESS gem 将 LESS 转换为 CSS。正如克里斯所说，

> 您可以将预处理的“预”部分视为“在将这些文件发送到实时网站之前”。

[这](http://jeffcroft.com/blog/2012/feb/23/many-ways-to-use-css-preprocessors/)`.less`是一篇很好的文章，解释了处理文件的不同方式。

在客户端编译上，作者总结得很好

> Sass/LESS 代码不是编译一次，而是在每个页面请求上编译——更糟糕的是，你把这个负担转嫁给了你的用户，而不是你自己做

对于您的第二点，这本质上是 CSS 预处理器的构建目的。它们被设计成具有可读性高、更改难度低的易于管理的 CSS 脚本。然后，您甚至不必查看 CSS 文件。只需将它运送到浏览器的土地上，无论如何它都会被浏览器特定的渲染（咳嗽，咳嗽 IE）撕裂。

# php - 提交时允许电子邮件和数据库条目

> ID：16205116
> 
> 赞同：0
> 
> 时间：2013-04-25T01:50:36.717
> 
> 标签：php, database, forms, email

嗨，我已经有一段时间了，并且一直在努力做事。它只是进入数据库，我经常检查它，但你可以假设这是一种非常乏味的做事方式。这是我当前的代码。

```
<?php
$name = "";
$email = "";
$msg_to_user = "";
if ($_POST['name'] != "") {

    include_once "newsletter/connect_to_mysql.php";

    // Be sure to filter this data to deter SQL injection, filter before querying database
    $name = $_POST['name'];
    $email = $_POST['email'];

    $sql = mysql_query("SELECT * FROM newsletter WHERE email='$email'");
    $numRows = mysql_num_rows($sql);

    if (!$email) {

        $msg_to_user = '<br /><br /><span style="font color="FF0000">Please type an email address ' . $name . '.</span>';

    } else if ($numRows > 0) {

        $msg_to_user = '<br /><br /><font color="FF0000">' . $email . ' is already in the system.</font>';

    } else {

        $sql_insert = mysql_query("INSERT INTO newsletter (name, email, dateTime) 
                                                    VALUES('$name','$email',now() )")  or die (mysql_error());

        $msg_to_user = '<br /><br /><div style="color=#F47926;width:180px;">Thanks ' . $name . ',  expect an email shortly!</div>';
        $name = "";
        $email = "";
    }
}
?> 
```

我正在尝试添加一种简单的方法来使用电子邮件和名称向我自己的电子邮件地址发送和发送电子邮件。这样我就不必经常检查数据库本身，而是查看它们出现在我的电子邮件中的样子。我希望这是有道理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T02:10:06.897

做一些额外的检查来验证通过 $_POST 传递的数据是明智的。

这样的事情应该让你开始。

```
$email = filter_var($_POST['Email'], FILTER_VALIDATE_EMAIL); 
```

以下是您发送电子邮件的方式。

```
$message = 'Name: ' . $_POST['name'] . ', Email: ' . $_POST['email']; 
mail('your@email.com', 'A New User Has Signed Up',  $message); 
```

[http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

[http://php.net/manual/en/function.filter-var.php](http://php.net/manual/en/function.filter-var.php)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-25T02:22:29.570

我真的不知道需要做什么，但是如果您要求改进或建议...

**而不是这个：**

```
$msg_to_user = '<br /><br /><span style="font color="FF0000">Please type an email address ' . $name . '.</span>'; 
```

**你可以这样做：**

```
$msg_to_user = "<br /><br /><span style='color:FF0000'>Please type an email address {$name}.</span>"; 
```

注意：使用双引号。

# mysql - 在 IF（条件）语句中进行查询时，MySQL 是否“延迟评估”？

> ID：16205118
> 
> 赞同：1
> 
> 时间：2013-04-25T01:50:38.950
> 
> 标签：mysql, sql, query-optimization

我有一个包含条件的 SQL 语句，在条件内部有一个查询。如果条件不成立，是否仍会评估查询？还是 MySQL 会根据需要“懒惰地”评估子查询？

样本有子句

```
HAVING
    IF(NOT isConfirmed, IF(
       IFNULL((SELECT SUM(net) as net from invoices where `to_id` = 5), 0)
       > 0
    , 1, 0) -- if its not confirmed, make sure total_paid total is greater than 0
, 1) -- otherwise dont care 
```

# hbase - HBase 对 RowKey 中的通配符的支持

> ID：16205127
> 
> 赞同：5
> 
> 时间：2013-04-25T01:51:37.713
> 
> 标签：hbase

我想知道 HBase 是否支持 RowKey 扫描的通配符。类似于：

```
select * from TABLE where KEY like '%SEARCH_KEY%'; 
```

我知道如果我们对行键的前缀有一些了解，我们可以使用部分键扫描（并且 HBase 在该扫描方面非常有效）。但是，如果我们没有前缀信息（意味着搜索键可以在 RowKey 中的任何位置），那么 Hbase 必须运行全表扫描，对吗？

另外，如何在 HBase 中形成这样的查询（代码或通过 shell）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-01T21:03:29.373

您只能进行基于前缀的行键扫描。

假设您有如下数据：

```
aaa_001
aaa_002
aab_001
aac_001
baa_001
...
zzz_001 
```

使用[HappyBase](http://happybase.readthedocs.org/en/latest/index.html)，您可以编写这样的代码来获取 aaa*

```
for key in table.scan(row_prefix="aaa"):
  print key 
```

将打印

```
aaa_001
aaa_002 
```

而这段代码：

```
for key in table.scan(row_prefix="aa"):
  print key 
```

会给你这个：

```
aaa_001
aaa_002
aab_001
aac_001 
```

因此，您可以进行基于前缀的匹配，但不能进行基于后缀的匹配。希望这是有用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-23T11:24:51.007

您可以将 RegexStringComparator 与 RowFilter 一起使用并指定正则表达式，但它将以全表扫描结束。

```
RegexStringComparator comp = new RegexStringComparator("my.");   // any value that starts with 'my'
SingleColumnValueFilter filter = new SingleColumnValueFilter(
cf,
column,
CompareOp.EQUAL,
comp
);
scan.setFilter(filter); 
```

而不是 SingleColumnValueFilter 使用 RowFilter

# c++ - C++ 向量和列表插入

> ID：16205128
> 
> 赞同：1
> 
> 时间：2013-04-25T01:51:42.587
> 
> 标签：c++, performance, list, vector

谁能知道为什么将元素插入列表中间比将元素插入向量中间更快？

我更喜欢使用向量，但如果可以的话，我会被告知使用列表。任何人都可以解释为什么？是否总是建议使用列表而不是向量？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T06:25:20.347

如果我逐字回答这个问题，找到一个数组的中间（std::vector）是一个简单的操作，你将长度除以二，然后向上或向下舍入以获得索引。查找双向链表（std::list）的中间需要遍历所有元素。即使你知道它的大小，你仍然需要走过一半以上的元素。因此 std::vector 比 std::list 快，换句话说，一个是 O(1) 而另一个是 O(n)。

在已知位置插入需要对数组的相邻元素进行混洗，并仅在另一个节点中链接以获得双向链表，正如其他人在此处解释的那样。因此，使用 O(1) 的 std::list 比使用 O(n) 的 std::vector 快。

在一起，要插入到精确的中间，我们有 O(1) + O(n) 的数组和 O(n) + O(1) 的双向链表，使得两者都插入到中间 O(n)容器类型。所有这些都忽略了诸如 CPU 缓存和分配器速度之类的东西，它只是比较了“简单”操作的数量。总之，您需要了解如何使用容器。如果你真的在随机位置插入/删除了很多，std::list 可能会更好。如果您很少这样做，然后只读取容器，则 std::vector 可能会更好。如果你只有十个元素，那么所有的 O(x) 都可能毫无价值，你应该选择你最喜欢的那个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T01:56:40.467

插入向量的中间需要将插入点之后的所有元素打乱以腾出空间，这可能涉及大量复制。

该列表被实现为一个链表，每个节点在内存中占用自己的空间并引用相邻节点，因此添加一个新节点只需要更改 2 个引用以指向新节点。

根据您使用的数据类型，向量的执行速度可能比列表快得多。但是要复制的对象越复杂，向量就越糟糕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T01:58:55.973

简单来说，向量就是一个数组。因此，它的元素存储在连续的内存位置（即，一个挨一个）。唯一的例外是向量允许在运行时调整大小，而不会导致数据丢失。

现在，要插入列表，您需要识别节点，然后创建新元素（内存中的任何位置），存储值并连接指针。

但是在向量（数组）的情况下，您必须物理地将元素从一个单元格移动到另一个单元格，以便为新元素创建该空间。这种物理移动是导致延迟的原因，尤其是在需要移动许多元素（即数据）的情况下。您不是在物理上移动数组元素。相反，它的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-02T11:57:38.590

Ulrich Eckhardt 的回答非常好。我没有足够的声誉来添加评论，所以我会自己写一个答案。就像 Ulrich 所说的那样，列表和向量在中间的插入速度在理论上都是 O(n)。在实践中，现代 CPU 有一个叫做“预取器”的东西。它非常擅长获取连续数据。由于向量在内存中是连续的，因此由于预取器，移动大量元素非常快。您需要操作非常非常大的向量，以使它们的插入速度比列表慢。有关更多详细信息，请查看这篇很棒的博客文章：

[http://gameprogrammingpatterns.com/data-locality.html](http://gameprogrammingpatterns.com/data-locality.html)

# javascript - 使用 D3.js 和标准化数据绘制迷你图

> ID：16205131
> 
> 赞同：1
> 
> 时间：2013-04-25T01:52:11.893
> 
> 标签：javascript, d3.js

您好我正在尝试在 D3 中绘制一组火花线。

我的主要问题是我想规范化数据。

因此，如果我有两个这样的数据数组：

```
var wind = [1, 8,3,4]
var powerGenerated = [50, 40,20,30] 
```

我希望能够将它们绘制在彼此之上，因为我对值之间的差异不感兴趣，但我对值之间的关系如何变化感兴趣。看到这一点的最好方法是将它们以相同的比例绘制在彼此之上。

我已经整理了一个 JS fiddle 来开始。

[http://jsfiddle.net/redenvy/4KqTt/2/](http://jsfiddle.net/redenvy/4KqTt/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T03:15:24.640

您必须创建两个单独的 yScale，一个用于风数据，另一个用于发电数据。

```
var wind = [1, 8,3,4]
var power = [50, 40,20,30]

var w = 200, h = 80;
var yWind = d3.scale.linear().domain([d3.min(wind), d3.max(wind)]).range([0 , h]),
    yPower = d3.scale.linear().domain([d3.min(power), d3.max(power)]).range([0 , h]),
x = d3.scale.linear().domain([0, wind.length]).range([0, w])

var vis = d3.select("#sparklines")
    .append("svg:svg")
    .attr("width", w)
    .attr("height", h)

var g = vis.append("svg:g")
    .attr("transform", "translate(0, " + h     +")");

var lineWind = d3.svg.line()
    .x(function(d,i) { return x(i); })
    .y(function(d) { return -1 * yWind(d) });

var linePower = d3.svg.line()
    .x(function(d,i) { return x(i); })
    .y(function(d) { return -1 * yPower(d); });

g.append("svg:path").attr("d", lineWind(wind)).attr('class', 'wind');
g.append("svg:path").attr("d", linePower(power)).attr('class', 'power'); 
```

小提琴更新：http: [//jsfiddle.net/4KqTt/6/](http://jsfiddle.net/4KqTt/6/)

# c# - 将较小的 Texture2D 放入较大的 Texture2D

> ID：16205134
> 
> 赞同：0
> 
> 时间：2013-04-25T01:52:35.417
> 
> 标签：c#, xna, textures, monogame, placement

类似于许多采用平铺地图的程序，如游戏泰拉瑞亚中的那样，并将地图变成整个地图的单张图片，我正在尝试做类似的事情。问题是，我的块纹理位于单个大型纹理图集中并由索引引用，并且我无法从单个块中获取颜色数据并将其放置在较大纹理中的正确位置。

到目前为止，这是我的代码。

从索引中获取源代码（此代码有效）：

```
public static Rectangle GetSourceForIndex(int index, Texture2D tex)
    {
        int dim = tex.Width / TEXTURE_MAP_DIM;

        int startx = index % TEXTURE_MAP_DIM;
        int starty = index / TEXTURE_MAP_DIM;

        return new Rectangle(startx * dim, starty * dim, dim, dim);
    } 
```

在索引处获取纹理（问题开始的地方）：

```
public static Texture2D GetTextureAtIndex(int index, Texture2D tex)
    {
        Rectangle source = GetSourceForIndex(index, tex);
        Texture2D texture = new Texture2D(_device, source.Width, source.Height);

        Color[] colors = new Color[tex.Width * tex.Height];
        tex.GetData<Color>(colors);
        Color[] colorData = new Color[source.Width * source.Height];

        for (int x = 0; x < source.Width; x++)
        {
            for (int y = 0; y < source.Height; y++)
            {
                colorData[x + y * source.Width] = colors[x + source.X + (y + source.Y) * tex.Width];
            }
        }

        texture.SetData<Color>(colorData);
        return texture;
    } 
```

将纹理放入更大的图片中（我敢肯定这是完全错误的）：

```
private void doSave()
    {
        int texWidth = this._rWidth * Region.REGION_DIM * 16;
        int texHeight = this._rHeight * Region.REGION_DIM * 16;

        Texture2D picture = new Texture2D(Game.GraphicsDevice, texWidth, texHeight);
        Color[] pictureData = new Color[picture.Width * picture.Height];

        for (int blockX = 0; blockX < texWidth / 16; blockX++)
        {
            for (int blockY = 0; blockY < texHeight / 16; blockY++)
            {
                Block b = this.GetBlockAt(blockX, blockY);
                Texture2D toCopy = TextureManager.GetTextureAtIndex(b.GetIndexBasedOnMetadata(b.GetMetadataForSurroundings(this, blockX, blockY)), b.GetTextureFile());
                Color[] copyData = new Color[toCopy.Width * toCopy.Height];
                Rectangle source = new Rectangle(blockX * 16, blockY * 16, 16, 16);
                toCopy.GetData<Color>(copyData);

                for (int x = 0; x < source.Width; x++)
                {
                    for (int y = 0; y < source.Height; y++)
                    {
                        pictureData[x + source.X + (y + source.Y) * picture.Width] = copyData[x + y * source.Width];
                    }
                }
            }
        }

        picture.SetData<Color>(pictureData);

        string fileName = "picture" + DateTime.Now.ToString(@"MM\-dd\-yyyy-h\-mm-tt");
        FileStream stream = File.Open(this.GetSavePath() + @"Pictures\" + fileName, FileMode.OpenOrCreate);
        picture.SaveAsPng(stream, picture.Width, picture.Height); 
```

我找不到关于如何在纹理和一维颜色数组之间正确转换的任何好的描述。如果我知道如何轻松、正确地将正方形颜色放入更大的二维纹理中，那就容易多了。

TL;DR：如何将较小的纹理放入较大的纹理中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T09:32:29.423

创建一个与您最大纹理大小相同的 RenderTarget2D 并将其设置为活动。画大纹理，然后画小纹理。将对原始纹理的引用设置为您刚刚绘制到的 RenderTarget2D。

```
int texWidth = this._rWidth * Region.REGION_DIM * 16;
int texHeight = this._rHeight * Region.REGION_DIM * 16;

_renderTarget = new RenderTarget2D(GraphicsDevice, texWidth, texHeight);
GraphicsDevice.SetRenderTarget(_renderTarget);
GraphicsDevice.Clear(Color.Transparent);

_spriteBatch.Begin(SpriteSortMode.Immediate, BlendState.Opaque);

for (int blockX = 0; blockX < texWidth / 16; blockX++)
{
    for (int blockY = 0; blockY < texHeight / 16; blockY++)
    {
         _spriteBatch.Draw(
            TextureManager.GetTextureAtIndex(b.GetIndexBasedOnMetadata(b.GetMetadataForSurroundings(this, blockX, blockY)), b.GetTextureFile()), 
         new Rectangle(blockX * 16, blockY * 16, 16, 16), 
         Color.White);
     }
}

_spriteBatch.End()

GraphicsDevice.SetRenderTarget(null);
var picture = _renderTarget; 
```

# html - DIV 水平滚动

> ID：16205151
> 
> 赞同：8
> 
> 时间：2013-04-25T01:54:15.370
> 
> 标签：html, css

我在一个固定宽度的 div 中有几个 HTML 元素。内部元素的宽度之和大于容器的宽度。如何使内部元素显示为内联（并显示水平滚动）而不是在达到父级宽度后中断？

我可以添加一个包装器并为其分配一个最小宽度，但我想要一些在内容发生变化时会改变其大小的东西。

```
<div id="container">
    <div class="contents" id="one"></div>
    <div class="contents" id="two"></div>
    <div class="contents" id="three"></div>
    <div class="contents" id="four"></div>
</div>

#container {
    width: 100px;
    background-color: #CCC;
    overflow: auto;
    height: 100px;
}

.contents {
    width: 35px;
    height: 60px;
    float: left;
}
#one {
    background-color:#ABC;
}
#two {
    background-color:#333;
}
#three {
    background-color:#888;
}
#four {
    background-color:#AAA;
} 
```

[http://jsfiddle.net/elohr/G5YZ6/2/](http://jsfiddle.net/elohr/G5YZ6/2/)

谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-25T01:56:56.380

使用`display:inline-block`代替`float:left`，并添加`white-space:nowrap;`到容器中。如果需要，添加`white-space:normal`到内容元素。[演示](http://jsfiddle.net/G5YZ6/3/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T01:58:41.740

试试这个：

1.  替换`float: left`为`display: inline-block;`
2.  用于`white-space: nowrap;`容器。

CSS：

```
#container {
    width: 100px;
    background-color: #CCC;
    overflow: auto;
    height: 100px;
    white-space: nowrap;
}

.contents {
    width: 35px;
    height: 60px;
    display: inline-block;
} 
```

### 小提琴：http: [//jsfiddle.net/praveenscience/G5YZ6/6/](http://jsfiddle.net/praveenscience/G5YZ6/6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T02:00:33.827

在您的根 DIV 元素中，您始终可以指定溢出是可滚动的：

```
<div id="container" style="overflow: scroll;">
  <div class="contents" id="one"></div>
  <div class="contents" id="two"></div>
  <div class="contents" id="three"></div>
  <div class="contents" id="four"></div>
</div> 
```

# plugins - Phonegap - 更新版本 pg-plugin-screen-orientation？

> ID：16205153
> 
> 赞同：0
> 
> 时间：2013-04-25T01:54:27.757
> 
> 标签：plugins, cordova, screen, orientation

插件链接：[pg-plugin-screen-orientation](https://github.com/champierre/pg-plugin-screen-orientation)

我试图更新它，但它根本不起作用。这是我的更新版本（Java）：

```
package com.tsukurusha.phonegap.plugins;

import org.json.JSONArray;
import android.app.Activity;
import android.content.pm.ActivityInfo;

import org.apache.cordova.api.CordovaPlugin;
import org.apache.cordova.api.PluginResult;

public class ScreenOrientation extends CordovaPlugin {
    // Refer to http://developer.android.com/reference/android/R.attr.html#screenOrientation

    private static final String UNSPECIFIED = "unspecified";
    private static final String LANDSCAPE = "landscape";
    private static final String PORTRAIT = "portrait";
    private static final String USER = "user";
    private static final String BEHIND = "behind";
    private static final String SENSOR = "sensor";
    private static final String NOSENSOR = "nosensor";
    private static final String SENSOR_LANDSCAPE = "sensorLandscape";
    private static final String SENSOR_PORTRAIT = "sensorPortrait";
    private static final String REVERSE_LANDSCAPE = "reverseLandscape";
    private static final String REVERSE_PORTRAIT = "reversePortrait";
    private static final String FULL_SENSOR = "fullSensor";

    public PluginResult execute(String action, JSONArray args, String callbackId) {
        if (action.equals("set")) {
            String orientation = args.optString(0);
            Activity activity = (Activity)this.cordova.getActivity();
            if (orientation.equals(UNSPECIFIED)) {
                activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED);
            } else if (orientation.equals(LANDSCAPE)) {
                activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
            } else if (orientation.equals(PORTRAIT)) {
                activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
            } else if (orientation.equals(USER)) {
                activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_USER);
            } else if (orientation.equals(BEHIND)) {
                activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_BEHIND);
            } else if (orientation.equals(SENSOR)) {
                activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR);
            } else if (orientation.equals(NOSENSOR)) {
                activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_NOSENSOR);
            } else if (orientation.equals(SENSOR_LANDSCAPE)) {
                activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR_LANDSCAPE);
            } else if (orientation.equals(SENSOR_PORTRAIT)) {
                activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR_PORTRAIT);
            } else if (orientation.equals(REVERSE_LANDSCAPE)) {
                activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_REVERSE_LANDSCAPE);
            } else if (orientation.equals(REVERSE_PORTRAIT)) {
                activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_REVERSE_PORTRAIT);
            } else if (orientation.equals(FULL_SENSOR)) {
                activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_FULL_SENSOR);
            }
            return new PluginResult(PluginResult.Status.OK);
        } else {
            return new PluginResult(PluginResult.Status.INVALID_ACTION);
        }
    }
} 
```

JS文件：

```
var screenOrientation = function() {}
    screenOrientation.prototype.set = function(str, success, fail) {
    cordova.exec(success, fail, "ScreenOrientation", "set", [str]);
};
navigator.screenOrientation = new screenOrientation(); 
```

脚本的执行根本不会产生任何错误消息，所以我不知道出了什么问题。感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T22:43:17.623

所以我设法更新了这段代码以使用cordova 2.3.0（尚未测试与更新版本的cordova的兼容性），享受：

爪哇：

```
package org.apache.cordova.plugin;

import org.json.JSONArray;
import android.app.Activity;
import android.content.pm.ActivityInfo;

import org.apache.cordova.api.CallbackContext;
import org.apache.cordova.api.CordovaPlugin;

public class ScreenOrientation extends CordovaPlugin {
    // Refer to http://developer.android.com/reference/android/R.attr.html#screenOrientation

    private static final String UNSPECIFIED = "unspecified";
    private static final String LANDSCAPE = "landscape";
    private static final String PORTRAIT = "portrait";
    private static final String USER = "user";
    private static final String BEHIND = "behind";
    private static final String SENSOR = "sensor";
    private static final String NOSENSOR = "nosensor";
    private static final String SENSOR_LANDSCAPE = "sensorLandscape";
    private static final String SENSOR_PORTRAIT = "sensorPortrait";
    private static final String REVERSE_LANDSCAPE = "reverseLandscape";
    private static final String REVERSE_PORTRAIT = "reversePortrait";
    private static final String FULL_SENSOR = "fullSensor";

    @Override
    public boolean execute(String action, JSONArray args, CallbackContext callbackContext) {
        if (action.equals("set")) {
            String orientation = args.optString(0);
            Activity activity = cordova.getActivity();
            if (orientation.equals(UNSPECIFIED)) {
                activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED);
            } else if (orientation.equals(LANDSCAPE)) {
                activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
            } else if (orientation.equals(PORTRAIT)) {
                activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
            } else if (orientation.equals(USER)) {
                activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_USER);
            } else if (orientation.equals(BEHIND)) {
                activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_BEHIND);
            } else if (orientation.equals(SENSOR)) {
                activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR);
            } else if (orientation.equals(NOSENSOR)) {
                activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_NOSENSOR);
            } else if (orientation.equals(SENSOR_LANDSCAPE)) {
                activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR_LANDSCAPE);
            } else if (orientation.equals(SENSOR_PORTRAIT)) {
                activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR_PORTRAIT);
            } else if (orientation.equals(REVERSE_LANDSCAPE)) {
                activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_REVERSE_LANDSCAPE);
            } else if (orientation.equals(REVERSE_PORTRAIT)) {
                activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_REVERSE_PORTRAIT);
            } else if (orientation.equals(FULL_SENSOR)) {
                activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_FULL_SENSOR);
            }
            return true;
        } else {
            return false;
        }
    }
} 
```

JS：

```
 //wait for cordova to load
        window.addEventListener("load",function(){
            document.addEventListener("deviceready",phonegapReady,false)
        });

        function phonegapReady(){

            //once cordova has loaded
            var screenOrientation = function() {}
            screenOrientation.prototype.set = function(str, success, fail) {
                cordova.exec(null, null, "ScreenOrientation", "set", [str]);
            };
            window.screenOrientation = new screenOrientation();

            //To change screen orientation use
            window.screenOrientation.set("landscape");
        }; 
```

您还应该添加到 res/xml/config.xml

```
<plugin name="ScreenOrientation" value="org.apache.cordova.plugin.ScreenOrientation" /> 
```

# tags - 如何在 Shopify 中分配多个客户标签？

> ID：16205154
> 
> 赞同：1
> 
> 时间：2013-04-25T01:54:30.427
> 
> 标签：tags, shopify, liquid

我正在尝试将多个自定义标签分配给在 Shopify 中注册我的商店的客户。

这是我到目前为止所拥有的，但它分配了第一个标签和第二个标签，我需要找到一种方法来分配和保留两者。

```
{% layout settings.customer_layout %}

<div id="customer-accounts" class="content clearfix">

 <!-- Create Customer -->
 <div id="customer-register">

   <div class="page-header">
      <h1>Create Account</h1>
    </div>

    {% form 'create_customer' %}
{{ form.errors | default_errors }}

<div id="school" class="clearfix form-row">
  <label for="school">School</label>
  <select name="customer[tags]" id="school">
    <option value="default" selected="selected">Choose your school</option>
    <option value="syracuse">Syracuse</option>
    <option value="cornell">Cornell</option>
    <option value="Miami">UMiami</option>
  </select>
</div>

<div id="fraternity" class="clearfix form-row">
  <label for="fraternity">Fraternity</label>
  <select name="customer[tags]" id="fraternity">
    <option value="default" selected="selected">Choose your fraternity</option>
    <option value="sigma_chi">Sigma Chi</option>
    <option value="sigma_alpha_mu">Sigma Alpha Mu</option>
    <option value="delta_tau_delta">Delta Tau Delta</option>
  </select>
</div>

<div id="first_name" class="clearfix form-row">
  <label for="first_name" class="login">First Name</label>
  <input type="text" value="{{ form.first_name }}" name="customer[first_name]" id="first_name" class="large" size="30" />
</div>

<div id="last_name" class="clearfix form-row">
  <label for="last_name" class="login">Last Name</label>
  <input type="text" value="{{ form.last_name }}" name="customer[last_name]" id="last_name" class="large{% if form.errors contains 'last_name' %} error{% endif %}" size="30" />
</div>

<div id="email" class="clearfix form-row">
  <label for="email" class="login">Email Address</label>
  <input type="email" value="{{ form.email }}" name="customer[email]" id="email" class="large{% if form.errors contains 'email' %} error{% endif %}" size="30" />
</div>

<div id="password" class="clearfix form-row">
  <label for="password" class="login">Password</label>
  <input type="password" value="" name="customer[password]" id="password" class="large password{% if form.errors contains 'password' %} error{% endif %}" size="30" />
</div>

<div class="action_bottom">
  <input class="btn" type="submit" value="Create" />
</div>
{% endform %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T12:14:18.797

改变你的形式。对于选择元素 id=school 和 id=fraternity，您不想使用同名 customer[tags]。相反，为该名为 customer[tags] 的新隐藏元素。在提交表单之前，使用 Javascript 从 id=school 和 id=fraternity 元素中获取值，并将它们组合成一个字符串，用逗号分隔。将该字符串分配给名为 customer[tags] 的隐藏元素。然后将两个值分配给一个。提交该表格，您就可以开始了。

# iphone - 使用带有 UIActionSheet 的 Storyboard 为新视图创建模型效果

> ID：16205156
> 
> 赞同：0
> 
> 时间：2013-04-25T01:54:50.937
> 
> 标签：iphone, ios, objective-c, uiactionsheet

`add`当他们单击按钮时，我正在使用更多选项更新应用程序。之前，当他们点击它时，某个屏幕会出现模型转换。我可以从 .storyboard 文件轻松做到这一点，但由于 UIActionSheet 没有出现在 .storyboard 文件中，我无法将其链接到另一个场景。我该怎么做呢？

这是我现在拥有的代码：

```
- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {
    switch (buttonIndex) {
        case 1:
            //  where somehow I need to get to the next scene using storyboard
            break;

        default:
            break;
    }
} 
```

这可能无关紧要，但是当调用操作表时，我在 TabBar 中使用了 UITableView。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T01:59:00.057

你可以打电话`performSegueWithIdentifier:sender:`。

您可能需要确保首先关闭操作表。

# android - 无法通过intent android传递字符串

> ID：16205157
> 
> 赞同：0
> 
> 时间：2013-04-25T01:55:00.750
> 
> 标签：android, android-intent

这是 Andrj 活动

```
 private void switchActivity(String key)
    {
        String r="123";
        Bundle basket=new Bundle();
        //basket.putString("key", key);
        basket.putString("roll", r);
        Intent i=new Intent(Andprj.this, extra.class);
        i.putExtras(basket);
        startActivity(i);

    } 
```

这是额外的活动

```
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.exam);
    tv=(TextView) findViewById(R.id.t1);
    setContentView(R.layout.exam);
    Bundle gotbasket=getIntent().getExtras();
    String gotbread=gotbasket.getString("roll");
    tv.setText(gotbread);
} 
```

即将显示的只是 TextView...（默认值）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T02:00:49.967

尝试这个

```
protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.exam);
        tv=(TextView) findViewById(R.id.t1);
        Bundle gotbasket=getIntent().getExtras();
        String gotbread=gotbasket.getString("roll");
        tv.setText(gotbread);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T02:04:29.250

你还记得`invalidate()`设置文本后的视图吗？**<-----不需要。**

或者你应该打电话`setText()`之前`setContentView()`。**<-----错了**

**更新：**上面的两行都不正确。对不起。

# java - onMarkerClick 使用 switch Case

> ID：16205161
> 
> 赞同：1
> 
> 时间：2013-04-25T01:55:21.090
> 
> 标签：java, android, google-maps, google-maps-markers

我想使用谷歌地图制作标记应用程序，但是 . 我对使用 switch Case 的 onMarkerClick 有问题，我使用数组将 Marker 添加到我的应用程序中，当标记 OnCLick 时，他可以为每个标记调用不同的 Activity。我对此有疑问..我如何将 onMarkerClick 与 switch case 一起用于我的应用程序。 .??? 请帮忙 。这是我的代码：

```
public static final String TAG = markerbanyak.TAG;
    final LatLng CENTER = new LatLng(43.661049, -79.400917);

    class Data {
        public Data(float lng, float lat, String title, String snippet, String icon) {
            super();
            this.lat = (float)lat;
            this.lng = (float)lng;
            this.title = title;
            this.snippet = snippet;
            this.icon = icon;
        }
        float lat;
        float lng;
        String title;
        String snippet;
        String icon;
    }

    Data[] data = {
            new Data(-79.400917f,43.661049f, "New New College Res",
                    "Residence building (new concrete high-rise)", "R.drawable.mr_kun"),
            new Data(-79.394524f,43.655796f, "Baldwin Street",
                    "Here be many good restaurants!", "R.drawable.mr_kun"),
            new Data(-79.402206f,43.657688f, "College St",
                    "Lots of discount computer stores if you forgot a cable or need to buy hardware.", "R.drawable.mr_kun"),    
            new Data(-79.390381f,43.659878f, "Queens Park Subway",
                    "Quickest way to the north-south (Yonge-University-Spadina) subway/metro line", "R.drawable.mr_kun"),
            new Data(-79.403732f,43.666801f, "Spadina Subway",
                    "Quickest way to the east-west (Bloor-Danforth) subway/metro line", "R.drawable.mr_kun"),
            new Data(-79.399696f,43.667873f, "St George Subway back door",
                    "Token-only admittance, else use Spadina or Bedford entrances!", "R.drawable.mr_kun"),
            new Data(-79.384163f,43.655083f, "Eaton Centre (megamall)",
                    "One of the largest indoor shopping centres in eastern Canada. Runs from Dundas to Queen.", "R.drawable.mr_kun"),
    };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.peta);

        SupportMapFragment supportMapFragment = (SupportMapFragment)
        getSupportFragmentManager().findFragmentById(R.id.map);

                // Getting a reference to the map
        mMap = supportMapFragment.getMap();

        Marker kuningan = mMap.addMarker(new MarkerOptions()
        .position(KUNINGAN)
        .title("Kuningan")
        .snippet("Kuningan ASRI")
        .icon(BitmapDescriptorFactory
        .fromResource(R.drawable.mr_kun)));

        mMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);

        mMap.moveCamera(CameraUpdateFactory.newLatLngZoom(KUNINGAN, 2));

        // Zoom in, animating the camera.
        mMap.animateCamera(CameraUpdateFactory.zoomTo(10), 2000, null);

        }

     public void wisata(){

            if (mMap==null) {
                Log.d(TAG, "Map Fragment Not Found or no Map in it!!");
                return;
            }

            for (Data d : data) {
                LatLng location = new LatLng(d.lat, d.lng);
                Marker wisata =mMap.addMarker(new MarkerOptions()
                      .position(location)
                      .title(d.title)
                      .snippet(d.snippet)
                      .icon(BitmapDescriptorFactory.fromResource(R.drawable.mr_wis)));

                // Let the user see indoor maps where available.
                mMap.setIndoorEnabled(true);

                // Enable my-location stuff
                mMap.setMyLocationEnabled(true);

                // Move the "camera" (view position) to our center point.
                mMap.moveCamera(CameraUpdateFactory.newLatLng(CENTER));
                        // Then animate the markers while the map is drawing,
                // since you can't combine motion and zoom setting!
                        final int zoom = 14;
                        mMap.animateCamera(CameraUpdateFactory.zoomTo(zoom), 2000, null);

                mMap.setOnMarkerClickListener(new OnMarkerClickListener() {

                    @Override
                    public boolean onMarkerClick(Marker v) {
                        // TODO Auto-generated method stub
                        //(PLEASE HELP ME !!! :))

                        return false;
                    }
                });
            }

            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T02:33:40.827

```
 @Override
                public boolean onMarkerClick(Marker v) {
                    // TODO Auto-generated method stub
                    //(PLEASE HELP ME !!! :))
                 if(v.getTitle().contains("New New College Res")){
                    // do if marker has this title
                    }else if(v.getTitle().contains("Baldwin Street")){
                    // do if marker has this title
                    } // and so on
                    return false;
                }
            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T02:53:21.127

标记类如果是最终的，因此您不能扩展它并添加自己的属性。您将不得不使用自己的逻辑来处理这个问题。

您可以通过两种方式做到这一点。

您已经有一个包含所有标记数据的数据列表。

1）您可以尝试使用 Data 数组的数组索引设置 Marker 的“snippet”属性，在 onMarkerClick 上，您可以让 Snippet 将其更改回 int，这将是您的 Data Array 的索引。所以你可以得到你点击的 Marker 和它的 Data 对象，然后做任何你想做的事情。

2）使用哈希映射。

它看起来像这样

```
HashMap<Marker, Integer> hashMap = new HashMap<Marker, Integer>();

// now even in your loop where you are adding markers. you can also add that marker to this hashmap with the id of Data array's index.

hashMap.add(marker, indexOfDataArray);

// final in your onMarkerClick, you can just pass marker to hashMap and get indexOfDataArray and base of that do whatever you want to do.

int id = hashMap.get(marker); 
```

# html - 在 Twitter Bootstrap 中更改 .btn-navbar 的颜色

> ID：16205162
> 
> 赞同：0
> 
> 时间：2013-04-25T01:55:21.220
> 
> 标签：html, css, twitter-bootstrap

我想在 Bootstrap 中更改响应式折叠 .btn-navbar 的颜色。它通常是黑色的 3 条水平线，我只是希望黑色是不同的颜色。如果我改变 .btn-inverse .btn-navbar:hover 我会得到一个奇怪的效果，但只是改变 .btn-inverse .btn-navbar 什么都不做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T04:26:01.277

这会将主背景更改为红色：

```
.nav {
background: #ff0000 !important;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T03:25:45.457

你的风格的顺序是什么？如果您尝试在 twitter 引导程序之前进行更改，则引导程序将优先。

# java - 当我运行一个基于图块的游戏时，它经常死机。我怎样才能解决这个问题？

> ID：16205168
> 
> 赞同：0
> 
> 时间：2013-04-25T01:55:58.843
> 
> 标签：java

我最近发布了这个，但我的问题措辞不正确，所以我再试一次。作为我的 Java 类的项目，我一直在努力开发基于 tile 的 Java 游戏。到目前为止一切进展顺利，但我遇到的一个相当大的问题是，当我运行我的游戏时，它会在大约 50% 的时间里开始冻结，对按下的任何键或任何类似的东西都没有反应。有时它有效，有时则无效。它在结构上与[本教程有些相似](https://www.youtube.com/watch?v=d3BuJcKoljU)，但显然我做了很多更改和补充。我感觉它正在我的游戏面板类中发生，因为当游戏正确运行时，一切似乎都按预期运行，所以我将发布该类。我也为我的代码中的任何奇怪或非常规的地方道歉，我仍然是编码方面的业余爱好者，所以如果需要澄清，我会提供它。

所以我的主要问题是，有没有人知道问题是什么，或者对我如何解决冻结有任何建议？谢谢！

面板.java：

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Image;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.awt.image.BufferedImage;
import javax.swing.ImageIcon;
import javax.swing.JPanel;

public class panel extends JPanel implements KeyListener, Runnable
{
    //game variables
    private Thread game;
    private boolean running = false;
    private boolean mapFinished = false;
    player p1;

    //panel variables
    static final int Width = 480;
    static final int Height = 432;
    static final Dimension dim = new Dimension(Width,Height);

    //maps
    map map1;
    map map2;
    map map3;
    map map4;

    enemy e;

    boolean map1Finished;
    boolean map2Finished;
    boolean map3Finished;
    boolean map4Finished;

    //drawing variables
    private BufferedImage image;
    private Graphics g;
    private long time = 6*1000000;
    goal ng;
    private Image winningImage;

    private boolean map2Spawn;
    private boolean map3Spawn;
    private boolean map4Spawn;

    public panel(){
        map1 = new map("tester.txt");
        map2 = new map("tester2.txt");
        map3 = new map("tester3.txt");
        map4 = new map("tester4.txt");
        p1 = new player(map1);
        ng = new goal(map1);
        e = new enemy(map1);
        setPreferredSize(new Dimension(Width,Height));
        setFocusable(true);
        requestFocus();
    }

    public void run(){
        long startTime;
        long elapsedTime;
        long diff;
        long sleepTime;
        long overSleep=0;

        image=new BufferedImage(Width,Height,BufferedImage.TYPE_INT_RGB);
        g=image.getGraphics();
        running = true;

        while (running){
            startTime=System.nanoTime();
            gameUpdate();
            gameRender();
            gameDraw();
            elapsedTime=System.nanoTime();
            diff=elapsedTime-startTime;
            if(diff<time){
                sleepTime=time-diff-overSleep;
                try{
                    game.sleep(sleepTime/1000000);
                }
                catch(Exception e){

                }
            }
            else{
                overSleep=diff-time;
            }
        }
    }

    private void gameUpdate(){
        p1.update();

        if((p1.playerRec.x/48)==(ng.goalRec.x/48) && (p1.playerRec.y/48)==(ng.goalRec.y/48)){
            if(!map1Finished){
                map1Finished=true;
            }
            else if(map1Finished&&!map2Finished){
                map2Finished=true;
            }
            else if(map2Finished&&!map3Finished){
                map3Finished=true;
            }
            else if(map3Finished&&!map4Finished){
                map4Finished=true;
            }

        }

        changeSpawn();
    }

    private void gameRender(){
        g.setColor(Color.WHITE);
        g.fillRect(0,0,Width,Height);
        g.setColor(Color.BLACK);
        if (!map1Finished){
            map1.draw(g);
            p1.draw(g);
        }

        if (map1Finished&&!map2Finished){
            map2.draw(g);
            p1.draw(g);
            winningImage=new ImageIcon("sprites/level1.png").getImage();
            g.drawImage(winningImage,5,5,null);
        }
        if (map2Finished&&!map3Finished){
            map3.draw(g);
            p1.draw(g);
            winningImage=new ImageIcon("sprites/level1.png").getImage();
            g.drawImage(winningImage,5,5,null);
        }
        if (map3Finished&&!map4Finished){
            map4.draw(g);
            p1.draw(g);
            winningImage=new ImageIcon("sprites/level1.png").getImage();
            g.drawImage(winningImage,5,5,null);
        }
        //g.drawString(""+map1.tileMap[1][7], 100, 100);
    }

    public void gameDraw(){
        Graphics g2=this.getGraphics();
        g2.drawImage(image, 0, 0, null);
        g2.dispose();
    }

    public void keyTyped(KeyEvent key) {}

    public void keyPressed(KeyEvent key) {

    int code = key.getKeyCode();    
    if(code == KeyEvent.VK_LEFT) {
            p1.setLeft(true);
    }
    if(code == KeyEvent.VK_RIGHT) {
            p1.setRight(true);
    }
    if(code == KeyEvent.VK_UP) {
            p1.setUp(true);
    }
    if(code == KeyEvent.VK_DOWN) {
            p1.setDown(true);
    }
    }

    public void keyReleased(KeyEvent key) {
    int code = key.getKeyCode();
    if(code == KeyEvent.VK_LEFT) {
        p1.setLeft(false);
    }
    if(code == KeyEvent.VK_RIGHT) {
        p1.setRight(false);
    }
    }

    public void addNotify(){
        super.addNotify();
        if(game==null){
            game=new Thread(this);
            game.start();
        }
        addKeyListener(this);
    }

    public void startGame(){
        if (running == false){
            running = true; 
        }
    }

    public void stopGame(){
        if (running == true)
        {
            running = false; 
        }
    }

    public boolean boolTimer(){
        long now=System.currentTimeMillis();
        long end = now+1*3000;
        long current = System.currentTimeMillis();
        while(current<end){
            current = System.currentTimeMillis();
        }
        return true;
    }

    public void changeSpawn(){
        if(map1Finished==true && map2Spawn==false){
            p1=new player(map2);
            ng=new goal(map2);
            map2Spawn=true;
        }

        else if(map2Finished==true && map3Spawn==false){
            p1=new player(map3);
            ng=new goal(map3);
            map3Spawn=true;
        }
        else if(map3Finished==true && map4Spawn==false){
            p1=new player(map4);
            ng=new goal(map4);
            map4Spawn=true;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T02:30:21.800

1.  不要使用 Swing 组件的 getGraphics() 进行绘画。自定义绘画是通过覆盖`paintComponent()`JPanel 的方法来完成的。

2.  使用 a`Swing Timer`来安排动画，而不是线程。

3.  不要使用 KeyListener 来监听 KeyEvent。相反，您应该使用`Key Bindings`.

我建议您从阅读[Swing 教程](http://docs.oracle.com/javase/tutorial/uiswing/TOC.html)开始。本教程中的某些部分涵盖了上述几点。

1.  不要使用 requestFocus()。更好的使用方法是`requestFocusInWindow()`。尽管除非组件显示在可见的 GUI 上，否则这两种方法都不起作用，因此将代码放在构造函数中不会做任何事情。

2.  static final 常量变量应该完全大写，而不仅仅是第一个字母。

# ruby-on-rails - 在 Mac OS 10.8.3 中安装导轨时遇到问题

> ID：16205178
> 
> 赞同：0
> 
> 时间：2013-04-25T01:57:09.513
> 
> 标签：ruby-on-rails

我正在尝试按照与此非常相似的 railstutorial.org 安装 RoR：[http ://www.creativereason.com/how-to-install-ruby-on-rails-mountain-lio.html](http://www.creativereason.com/how-to-install-ruby-on-rails-mountain-lio.html)

但是，当我在命令中键入“gem install rails”时，我收到此错误并且无法安装 RoR。

我收到此错误：

错误：在任何存储库中都找不到有效的 gem 'rails' (>= 0) 错误：执行 gem 时 ... (Gem::RemoteFetcher::FetchError) 连接重置[太多.org/latest_specs.4.8.gz](http://production.s3.rubygems.org/latest_specs.4.8.gz)）

有人知道如何解决这个问题并正确安装导轨吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T03:03:59.770

另一种可能性是 ruby​​gems 已过时：

```
gem install rubygems-update 
```

和/或

```
gem update --system 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T02:11:10.113

安装 RVM 和 ruby​​：

$ curl -L [https://get.rvm.io](https://get.rvm.io) | bash -s 稳定 --ruby

然后是导轨：

`rvm gem install rails`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-03T17:01:51.563

我找到了解决方案：我必须禁用 Avast 防病毒软件！现在，它正在工作！

# css - 如何使用 2 张图片显示内联列表

> ID：16205191
> 
> 赞同：1
> 
> 时间：2013-04-25T01:58:27.907
> 
> 标签：css, html

我目前有两张图片一起在线显示（到目前为止还不错）。我有 3 行不同的文本，我也想与这些图像并排排列。所以它会是：图像->图像->列表中的 3 行不同的文本/链接。

所有这些都需要适应一个不可见的宽矩形。到目前为止，这两个图像的高度和宽度都是相同的，所以如果我可以让 3 条线适合它们的高度，它会很好地显示出来。

我想显示的 (3) 行（来自下面的代码）是：“标题”、“提交”、“分享”的类。

```
html, body {
    font-family: sans-serif;
    margin: 0;
    padding: 0;
}
#logobar {
    background: rgb(206, 211, 255);
}
#logobar ul {
    list-style-type: none;
    margin: 40;
    padding: 40;
}
#logobar li {
    display: inline;
    padding: 20;
    font-size: 52;
    font-family: Comic sans MS;
}
.box {
    margin-left: 50px;
    width: 650px;
    height: 80px;
    display: inline-block;
}
.box .headline {
    font-size: 18px;
    color: black;
    list-style-type: none;
} 
```

我的 HTML 代码如下所示：

```
<div id="logobar">
    <ul>
        <li>Breaditt: Bread News Aggregator</li>
        <li>
            <img src="img/logo.jpg" alt="breaditt cat" width="150" height="100">
        </li>
    </ul>
</div>
<div id="breadnews">
    <div class="box">
        <img src="img/counter.png" alt=counter width="75" height="75" />
        <img src="img/breadcat.jpg" alt=article-logo width="75" height="75" />
        <div class="headline"><a href="http://breadcats.tumblr.com">Website dedicated to cats with bread</a> 
        </div>
        <div class="submitted">
            <h>submitted 2 days ago by Alex Doggrowski</h>
        </div>
        <div class="share">
            <h>14,400 Comments. Share Save hide report</h>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T02:04:12.623

```
.box img {
    float: left;
    margin-right: 10px;
}
.box {
    clear:both;
} 
```

[http://jsfiddle.net/samliew/uUcL6/](http://jsfiddle.net/samliew/uUcL6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:55:40.850

您可以使用显示属性。

示例：//CSS

```
img{
    display:inline-block; vertical-align:top;
    height:100px; width:100px;
} 
```

//HTML

```
<div>
   <img src="1.jpg" alt="image1"/>
   <img src="2.jpg" alt="image2"/>
</div> 
```

# css - 站点 css 只能在 chrome 中运行，不能在 ie、firefox 或 opera 中运行

> ID：16205192
> 
> 赞同：-3
> 
> 时间：2013-04-25T01:58:39.707
> 
> 标签：css, internet-explorer, google-chrome, firefox, opera

我正在使用 cloudflare 并打开了开发模式，然后更新了 css，它仍然无法正常工作。

有任何想法吗？

网站是[http://our-gen.com](http://our-gen.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T02:10:17.213

除了各种 HTML 错误之外，您的样式表不适用于大多数浏览器的原因是您的 MIME 类型错误：

```
<link href='css/style.css' type='css/text' rel='stylesheet'> 
```

应该是`text/css`。

上述各种 HTML 错误包括但不限于：

*   无效的列表嵌套。这个：

    ```
    <ul>
    <a href='index.php'>
    <li>
    Home
    </li>
    </a>
    <a href='#catalog.php'>
    <li>
    Catalog
    </li>
    </a>
    <a href='#users.php'>
    <li>
    Users
    </li>
    </a>
    <a href='#forum.php'>
    <li>
    Forum
    </li>
    </a>
    </ul> 
    ```

    应该看起来更像这样：

    ```
    <ul>
        <li><a href="index.php">Home</a></li>
        <li><a href="#catalog.php">Catalog</a></li>
        <li><a href="#users.php">Users</a></li>
        <li><a href="#forum.php">Home</a></li>
    </ul> 
    ```

*   `<!DOCTYPE>`不是有效的 DTD。你可能的意思是`<!DOCTYPE html>`。

*   `<!DOCTYPE html>`应该在文档的开头找到，而不是在`<html>`.

# .htaccess - 环境标签 E 在 .htaccess mod rewrite 中的工作原理

> ID：16205194
> 
> 赞同：0
> 
> 时间：2013-04-25T01:58:50.557
> 
> 标签：.htaccess, mod-rewrite, environment-variables

我在 htaccess 文件中有以下规则

```
RewriteEngine On
RewriteRule mytest.php test.php
RewriteCond %{QUERY_STRING} !done
RewriteRule (.*)  $1?done [E=TEST:itworks] 
```

文件 test.php 很简单

```
<?php
echo "TEST = " . getenv('TEST'); 
?> 
```

当我输入请求 uri test.php 时，定义了环境变量 TEST 并回显“Test = itworks”。但是，当我输入请求 uri mytest.php 时，它也会转到 test.php，但未定义环境变量 TEST 并回显 'Test =' 。

这是预期的行为吗？如果这是我环境中的错误，请不要介意。否则，也许有人可以用那个简单的案例向我解释它是如何工作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T02:08:47.407

当您通过`mytest.php`时，通过 mod_rewrite 会有额外的一轮。

然后环境变量以 . 为前缀`REDIRECT_`。如果您检查`REDIRECT_TEST`，您将看到所需的输出

```
<?php
echo "TEST = " . getenv('TEST') . "/" . getenv('REDIRECT_TEST'); 
```

有关详细信息，请参阅[可用变量](http://httpd.apache.org/docs/trunk/custom-error.html#variables)。

# c++ - Thrift C++ 服务器超时，java 服务器没有

> ID：16205197
> 
> 赞同：0
> 
> 时间：2013-04-25T01:59:11.887
> 
> 标签：c++, thrift

我正在尝试使用 Apache thrift RPC 框架在 PHP 客户端和 C++ 服务器之间建立通信。经过数小时无果而终的调试后，我从同一个 thrift 文件构建了一个 java 服务器并让一切正常工作。当我运行 C++ 服务器时，我的任何方法都不会被调用，并且从 java 服务器获得响应的同一个客户端会引发异常`Exception: TSocket: timed out reading 4 bytes from localhost:65123`（即使我已将客户端上的传输和接收超时都设置为 5 秒。）至少这个错误与我在服务器未运行时得到的错误 [ `TSocket: Could not connect to localhost:65123 (Connection refused [111])`] 不同，所以我知道 C++ 服务器至少绑定到客户端正在与之通信的端口。

（工作的）java服务器代码是：

```
public class Server 
{
    public static void Start(EncabulationGame.Processor<EncabulationInputListener> processor)
    {
        try
        {
            TServerTransport serverTransport = new TServerSocket(65123);
            TServer server = new TSimpleServer(new Args(serverTransport).processor(processor));
            System.out.println("Starting the simple server...");
            server.serve();
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
    }

    public static void main(String[] args)
    {
        Start(new EncabulationGame.Processor<EncabulationInputListener>(new EncabulationInputListener()));
    }

} 
```

（非工作）C++ 服务器在与我的应用程序的主处理线程分开的线程中生成。代码如下所示：

```
void* ListenerThreadEntryPoint(void* threadStartData)
{
    struct InputListenerThreadStartupData * threadData;
    threadData =  ((struct InputListenerThreadStartupData *) threadStartData);
    int port = threadData->ListnerThreadPort;

    shared_ptr<EncabulationGameHandler> handler(new EncabulationGameHandler(threadData));
    shared_ptr<TProcessor> processor(new EncabulationGameProcessor(handler));
    shared_ptr<TServerTransport> serverTransport(new TServerSocket(port));
    shared_ptr<TTransportFactory> transportFactory(new TBufferedTransportFactory());
    shared_ptr<TProtocolFactory> protocolFactory(new TBinaryProtocolFactory());
    TSimpleServer server(processor, serverTransport, transportFactory, protocolFactory);
    server.serve();

    return 0;
} 
```

java 和 C++ 服务器代码片段都是从 thrift 编译器生成的骨架代码中剪切和粘贴的。

我真的想不通。为什么我的 C++ 服务器没有响应客户端？为什么我的处理程序（构造函数除外）中的任何方法都没有被调用？我将非常感谢社区可以提供的任何帮助。我正在使用节俭的 0.9.0 版本。

如果有帮助，这是实现我的处理程序的代码：

```
class EncabulationGameHandler : virtual public EncabulationGameIf {
 public:
  EncabulationGameHandler(InputListenerThreadStartupData * threadData) {
    // Your initialization goes here
  }

  int32_t RegisterPlayer() {
    // Your implementation goes here
    printf("RegisterPlayer\n");
  }

  void UnRegisterPlayer(const int32_t playerID) {
    // Your implementation goes here
    printf("UnRegisterPlayer\n");
  }

  bool IsGameRunning() {
    // Your implementation goes here
    printf("IsGameRunning\n");
  }

  int32_t GetPlayerScore(const int32_t playerID) {
    // Your implementation goes here
    printf("GetPlayerScore\n");
  }

  void Bounce(const int32_t playerID) {
    // Your implementation goes here
    printf("Bounce\n");
  }

  void ChangeColor(const int32_t playerID) {
    // Your implementation goes here
    printf("ChangeColor\n");
  }

}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:30:41.427

你没有给我们足够的继续 - 所以看看差异并为自己编写最简单的 C++ 服务器，你可以与你的独立 java 服务器相同（例如，运行 C++ 服务器而不在线程中）

C++ 代码看起来很像节俭骨架中的自动生成内容，所以我看不出这怎么可能是错误的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T19:52:48.043

回答我自己的问题后，我设法通过使用多线程 Thrift 服务器模型解决了这个问题。我从来没有弄清楚为什么上面发布的代码片段不起作用。

# media-queries - 通过 slideToggle 显示隐藏的 div 而无需按下其他 div

> ID：16205201
> 
> 赞同：1
> 
> 时间：2013-04-25T02:00:21.403
> 
> 标签：media-queries, slidetoggle, css

我在构建我的在线设计作品集时遇到了这个问题。这对我来说似乎很复杂，但我知道有办法做到这一点，所以我对找不到解决方案感到沮丧。请帮忙！

我的设计要求使用媒体查询来优化我的移动设备、平板电脑和台式机/笔记本电脑的网站。移动版只有一列缩略图。单击每个缩略图时，通过 jQuery slideToggle 在其下方显示一个隐藏的 div，向下推其他项目缩略图。

这就是移动版本的工作方式，而且效果很好。问题是平板电脑和桌面/笔记本电脑版本。对于那些版本，我希望缩略图以网格模式显示。平板电脑上两个并排，台式机/笔记本电脑上三个并排，所有版本都有无限行。我可以使它们显示在带有 HTML 的网格中，但是当单击缩略图并通过 slideToggle 显示其下方的 div 时，问题就出现了。由于我使用的是媒体查询，因此 HTML 的顺序仍然与移动版本相同，隐藏的 div 位于代码中每个缩略图的正下方。因此，显示隐藏的 div 会下推所有其他缩略图，包括与正在单击的缩略图在同一行中的缩略图（如果它们在代码中位于该缩略图之后）。每行中的最后一个 div 执行我想要的操作；当隐藏的 div 显示时，下一行被推下。我希望隐藏的 div 显示在它所在的行下方，并按下下面行中的缩略图。

显然，如果可能的话，我想坚持使用媒体查询来避免创建单独的 HTML。

**为缩略图和隐藏的 div 重复 HTML：**

```
<div class="body">
    <div class="thumb"></div>
    <div class="projectWrapper"></div>
    <div class="thumb"></div>
    <div class="projectWrapper"></div>
    <div class="thumb"></div>
    <div class="projectWrapper"></div>
    <div class="thumb"></div>
    <div class="projectWrapper"></div>
    <div class="thumb"></div>
</div> 
```

**我创建了一个 jsfiddle 来演示这个问题：http:** [//jsfiddle.net/EuHyc/13/](http://jsfiddle.net/EuHyc/13/)

请注意，使用 jQuery 隐藏 div。用 CSS 隐藏它们不允许隐藏 div 中的内容在显示时正确显示。另外，我不得不使用 display:inline-block 因为 float:left 不会强制隐藏的 div 在布局中出现在它的下方。

我希望我充分解释了这个问题。提前感谢您的帮助！我由衷的感谢！

# c - 一组点的最大周长边界矩形

> ID：16205202
> 
> 赞同：2
> 
> 时间：2013-04-25T02:00:33.310
> 
> 标签：c, algorithm, geometry, mathematical-optimization, bounding-box

我已经为这个看似简单的问题苦苦挣扎了很长一段时间。我得到了一组点（我已将其进一步简化为凸包），我的任务是找到一个包含所有点的矩形（不一定与轴对齐），周围没有额外的空间（所以它是紧贴在点周围）并具有最大可能的周长。找到最小的对我来说并不困难，但事实证明这是一个更难破解的坚果。在搜索最小边界矩形时，我可以假设矩形的一侧总是与船体的一侧对齐，但在这里我看不到任何这种情况。我错过了一些非常明显的东西吗？到目前为止，我能想到的唯一方法是测试对映点对是否可以投影到矩形的侧面并使用一些三角函数来最大化函数，但我只是在计算中迷失了自己。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T04:10:31.103

首先，计算点集的凸包。

现在，考虑旋转多边形并计算最小的封闭轴对齐矩形。请注意，顶部点、左侧点、右侧点和底部点将围绕凸包顺时针从一个顶点到下一个顶点。

你不能明确地尝试所有可能的角度。但是，您可以使用扫线技巧。但是，给定一个角度，您可以在将多边形旋转该角度后计算顶部、左侧、底部和右侧点以及顶部、左侧、底部和右侧点中的第一个点，以在您继续旋转多边形时更改身份多边形。所以你得到了一个角度范围，你当前选择的上、左、下和右是正确的；此外，您知道上、左、下和右的*下一个正确选择是什么。*

对于顶部、左侧、底部和右侧的每个合法选择，您最终必须在某个 theta 范围内计算固定 a 和 b 的 a*sin(theta) + b*cos(theta) 的最大值。回想一下三角函数 a*sin(theta) + b*cos(theta) = sqrt(a^2+b^2) cos(theta - arctan(b/a))。您在区间边界处评估函数，并且导数为零（在 arctan(b/a) 加上任何整数倍 pi 处）并且您是黄金。

# mysql - 通过 PHPadmin 导入 MySQL 时出错

> ID：16205208
> 
> 赞同：1
> 
> 时间：2013-04-25T02:01:00.183
> 
> 标签：mysql

错误 SQL 查询：

```
CREATE DATABASE `information_schema` DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci; 
```

MySQL 说：

```
View Full Image 
#1044
 - Access denied for user 'mydatabasenamehere'@'%' to database 'information_schema' 
```

我被告知我没有正确的凭据/权限。好的。但是我在哪里改变它们？数据库已导出，然后我更改了新站点的 URL，因此我将拥有原始数据库的精确副本。当我上传时，我收到上述消息。

我可以访问两个数据库和两个密码。那么我在哪里使信息正确，以便我可以毫无错误地导入它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T02:21:39.480

您的脚本正在尝试插入[系统表](http://dev.mysql.com/doc/refman/5.5/en/information-schema.html)，这是被禁止的：

> 虽然您可以使用 USE 语句选择 INFORMATION_SCHEMA 作为默认数据库，但您只能读取表的内容，而不能对其执行 INSERT、UPDATE 或 DELETE 操作。

您应该问自己的问题是：为什么您的数据库备份包含这些表？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:59:44.520

您应该在导入之前从您的转储中删除`information_schema`,`mysql`和。`performance_schema`

*   使用命令实用程序再次进行转储`mysqldump`而不是恢复它可能会更容易。
*   它使用的另一个选项`grep`, `head`, `tail`(*nix) 或`PowerShell`(Windows) 从转储文件中提取您需要的数据库。

# android - 我不明白为什么我们需要将 Android sdk 导入项目

> ID：16205209
> 
> 赞同：2
> 
> 时间：2013-04-25T02:01:17.940
> 
> 标签：android, android-2.2-froyo

我有一个奇怪的问题，当我们开发一个android应用程序或其他应用程序时，我们需要将android.jar导入到我们的项目中，我知道如果我们不将那个jar导入到项目中，我们将无法编译项目并且无法生成apk文件，但我的问题是我们的手机是在Android系统上建立的，并且Android系统包含android.jar中的所有类，当我们在Android系统上运行我们的apk文件时，它将使用哪些类。我的意思是一个Activity类都存在于Android System Framework和Android.jar中，应用程序运行时将使用哪个Activity类。请有人帮我解决这个问题。非常感谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T02:06:23.387

Java是一种编译语言。

这是一个两步的过程——首先代码必须*编译*成字节码，然后编译的字节码必须实际运行（通常称为*执行*）

您可能已经注意到编译错误和运行时错误之间的区别。例如，编译错误通常被视为 eclipse 中的红色下划线和红色 x。应用程序在您的手机上运行时会发生运行时错误。

知道我在说什么吗？

所以编译环境（Eclipse）和运行环境（Android）是完全分离的。因此，他们都需要知道 Android 类，并且必须导入 android sdk。

# actionscript-3 - 禁用按钮丢失 TextFormat

> ID：16205210
> 
> 赞同：0
> 
> 时间：2013-04-25T02:01:36.050
> 
> 标签：actionscript-3, flash

我有一个带有自定义文本格式的按钮，我通过 setStyle 方法设置，例如：

```
var tf:TextFormat = new TextFormat();
tf.font = "Arial";

var button:Button = new Button();
button.setStyle("textFormat", tf);
button.label = "Click Me"; 
```

但是，当此按钮被禁用时，它会丢失其 textFormat。禁用按钮后重置文本格式不会影响它。

我该怎么做才能将 textformat 仍然应用于禁用的按钮？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T02:10:48.637

我相信您可以访问按钮的 textField 。

然后使用[defaultTextFormat](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/TextField.html#defaultTextFormat)而不是[setTextFormat](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/TextField.html#setTextFormat%28%29)。

```
 var tf:TextFormat = new TextFormat();
 tf.font = "Arial";
 my_textBox.defaultTextFormat = tf; 
```

* * *

显然上面不会工作，但这会：

```
button.setStyle("disabledTextFormat", tf); 
```

# json - 创建 RavenDB 参考字段而不链接到 Newtonsoft.Json

> ID：16205213
> 
> 赞同：0
> 
> 时间：2013-04-25T02:02:40.210
> 
> 标签：json, ravendb

我在 RavenDB 中存储了一个对象，该对象引用了另一个对象。我希望向 RavenDB 序列化程序表明它应该是一个引用，而不是一个嵌入式对象。这样做的方法是用`[JsonObject(IsReference = true)]`属性来装饰它。这很好，但这意味着我必须`Raven.Imports.Newtonsoft.Json`在我的 POCO 程序集中引用该程序集。

所以问题是，还有其他方法可以应用这个属性吗？也许以`DefaultContractResolver`某种方式使用？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T04:29:11.783

您可以使用合同解析器来处理，是的。您可以在 RavenDB 约定中自定义合约解析器。

# php - 在 highcharts 上更新数据后获取文本文件中的数据，但最初是从 csv 文件中检索

> ID：16205217
> 
> 赞同：0
> 
> 时间：2013-04-25T02:03:20.810
> 
> 标签：php, javascript, file, highcharts

[我实际上正在尝试完全执行此示例“ http://jsfiddle.net/BrLp7/](http://jsfiddle.net/BrLp7/) ”中所做的操作，但不幸的是在从 csv 文件中检索数据时无法执行此任务。下面是我的代码，它不输出任何内容，当我们单击给定示例中的一个点时，如果单击最后一个点，则结果图必须以 5,10,13 的形式存储在某个文本文件中。

```
<html>
<head>
<title>A BASIC HTML FORM</title>
</head>
<body>

<FORM NAME ="form1" METHOD ="POST" ACTION = "BasicForm.php">

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"   

"http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<title>Highcharts Example</title>

<!-- 1\. Add these JavaScript inclusions in the head of your page -->

<script type="text/javascript"   

src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>

<script type="text/javascript" src="../js/highcharts.js"></script>

<!--[if IE]>

<script type="text/javascript" src="../js/excanvas.compiled.js"></script>

<![endif]-->

<!-- 2\. Add the JavaScript to initialize the chart on document ready -->

<script type="text/javascript">

$(document).ready(function() {

var options = {

chart: {

renderTo: 'container',

defaultSeriesType: 'line'

},
title: {
text: 'Input'
},
xAxis: {
categories: []
},
yAxis: {
title: {
text: 'Units'
}
},
plotOptions: {
series: {
cursor: 'pointer',
point: {
events: {
click: function() {                                                                                                                                                         

$.get('testFile.csv', function(data) {
// Split the lines
var lines = data.split('\n');

$.each(lines, function(lineNo, line) {

var x=this.series.processedXData.indexOf(this.x);
var items = line.split(',');                                                                                              

seriesData =[];                                                                                                     

$.each(items, function(itemNo, item) {
if (itemNo < x) {
seriesData.push(parseFloat(item));
}  else if (itemNo == x){
seriesData.push(0);
}
});
}
this.series.setData(seriesData);

}
}
}
},
series: []

};

$.get('testFile.csv', function(data) {
// Split the lines
var lines = data.split('\n');

$.each(lines, function(lineNo, line) {

var items = line.split(',');

var series = {
data: []
};

$.each(items, function(itemNo, item) {

series.data.push(parseFloat(item));    });

options.series.push(series);

});

var chart = new Highcharts.Chart(options);
});
});
</script>

</head>

<body>

<script src="http://code.highcharts.com/highcharts.js"></script>

<script src="http://code.highcharts.com/modules/data.js"></script>

<script src="http://code.highcharts.com/modules/exporting.js"></script>

<!-- 3\. Add the container -->

<div id="container" style="width: 1400px; height: 400px; margin: 0 auto"></div>

</body>
</html>
</FORM>

</body>

</html> 
```

# javascript - RequireJS 定义回调返回错误的模块依赖

> ID：16205223
> 
> 赞同：0
> 
> 时间：2013-04-25T02:04:00.267
> 
> 标签：javascript, requirejs, amd

我对 RequireJS 有一个非常奇怪和令人沮丧的问题。当我为具有依赖项列表的模块调用 require 时，回调中可用的所有依赖项都引用单个模块。这可能更容易用代码解释：

包括 require.js 脚本（没有 data-main 属性）

```
<script type="text/javascript" src="/js/common/require.min.js" ></script> 
```

在此之下，我包括了需要我的 main.js（在网站的所有页面中使用），它在回调中需要我的页面特定 js。

```
<script type="text/javascript">
  require(['/js/require/main.js'], function () {
    require(['page/home_page']);
  });
</script> 
```

main.js

```
requirejs.config({
  baseUrl: 'js/require'
});

requirejs(['base'],
function() {
  var base = require('base');
  base.init();
}); 
```

home_page.js

```
define(['home','searchbar'], function (home,searchbar){

  console.log(home.init == searchbar.init); // This is always true !!!

  home.init();
  searchbar.init();
}); 
```

主页.js

```
define(function(){
  this.init = function(){
    console.log('in home page'); 
  }
  return this;
}); 
```

搜索栏.js

```
define(function(){
  this.init = function(){
    console.log('Now in the searchbar init')
  }
  return this;
}); 
```

问题在于 home_page.js 两个模块 home 和 searchbar 引用了相同的东西。奇怪的是，现在我已经简化了这个例子，它选择哪一个似乎很随机。大多数时候它是搜索栏，但每隔几次刷新它就会回家。

有人有想法吗？这是非常明显的事情吗？

编辑：简化示例并提供所有模块源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T21:59:58.120

您`this`在两个模块中分配给。这不是一个好主意（请原谅双关语）。`this`在这两种情况下都可能是`window`对象。您可以通过添加一个来检查

```
window.init === searchbar.init 
```

测试。

重写模块以返回唯一对象，如下所示：

```
define(function() {
    return {
        init: function() {
            console.log('in home page'); 
        }
    };
}); 
```

和

```
define(function() {
    return {
        init: function() {
            console.log('Now in the searchbar init'); 
        }
    };
}); 
```

# assembly - MIPS如何存储用户输入并打印出来

> ID：16205225
> 
> 赞同：1
> 
> 时间：2013-04-25T02:04:04.577
> 
> 标签：assembly, printing, input, mips

我应该为这个问题做的是，我需要存储这些值，并打印出一个矩阵，用户要求输入行数、列数和元素的值，现在我什至不知道我是否打印/存储部分是否正确，我尝试打印一个输入的字符串，但它不起作用

```
 .text
    .globl main

main:
addi $v0, $0, 4   
la   $a0, str1 
syscall             #printing str1 
addi $v0, $0, 5   
syscall 
la $t1, M1_1
sw $v0, 0($t1)      #reading and storing the number of rows 

addi $v0, $0, 4   
la   $a0, str2 
syscall             #printing str2 
addi $v0, $0, 5   
syscall 
la $t2, M1_2
sw $v0, 0($t2)      #reading and storing the number of columns   

addi $v0, $0, 4   
la   $a0, str3 
syscall             #printing str3 
addi $v0, $0, 5   
syscall 
la $t3, M1_3
sw $v0, 0($t3)      #reading and storing the value of element   

    .data

str1:.asciiz "\“Please enter the number of rows in the matrix\n"
str2:.asciiz "\“Please enter the number of columns\n"
str3:.asciiz "\“Please enter the elements of the matrix\n"
.align 2
M1:.space 256 
M1_1:.space 4
M1_2:.space 4
M1_3:.space 4
M2:.space 256 
M2_2:.space 4 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T23:49:40.430

在 SPIM 中单步执行您的代码后，该行`sw $v0, 0($t1)`似乎是一个问题。我建议不要使用`sw`将输入移动到 register ，而是使用该命令。在下面的代码示例中，我修改了您的代码以演示如何将收到的值作为输入保存到寄存器中：`$t0``move``$t0`

```
 .text
    .globl main

main:
    sub         $sp , $sp , 4           # push stack
    sw          $ra , 0 ( $sp )     # save return address

    addi        $v0 , $0 , 4   
    la          $a0 , str1 
    syscall     #printing str1

    addi        $v0 , $0 , 5   
    syscall     #get input

    move        $t0 , $v0               # save input in $t0
    move        $a0 , $v0
    addi        $v0 , $0 , 1
    syscall     #print first input

    ... 
```

有关如何使用每条 MIPS 指令的更多信息，请[查看此页面](http://www.mrc.uidaho.edu/mrc/people/jff/digital/MIPSir.html)。

# sql - 复杂查询有限的 SQL 知识

> ID：16205229
> 
> 赞同：2
> 
> 时间：2013-04-25T02:04:47.220
> 
> 标签：sql, sql-server

我试图编写我认为是相当复杂的 SQL 查询，但我使用有限的 SQL 知识工作。我有这个查询：

```
 SELECT 
   analysisvalue.analysisid, 
   heatname, 
   analysistime, 
   sampletype,
   grade, 
   productid, 
   element, 
   value 
 FROM 
   dbo.AnalysisValue 
 INNER JOIN 
   dbo.CAnalysis 
 ON 
   dbo.AnalysisValue.AnalysisID = dbo.CAnalysis.AnalysisID
 WHERE 
   heatname = 'A7M0066' 
 ORDER BY 
   analysisvalue.analysisid ASC, 
   element 
```

这个查询：

```
SELECT 
  * 
FROM 
  S_analysis 
WHERE 
  heat_no = 'A7M0066' 
```

我需要修改第二个查询，使其还包括 * from S_analysis WHERE heat_no = 'A7M0066' 以及所有记录，包括那些没有 heat_no 的记录，其中 analysis_datetime 介于第一个查询的最后一条记录的分析时间和该时间之后的两个小时之间.

第二个查询的 S_analysis 表结构为：

```
analysis_datetime(datetime, not null)
heat_no(varchar(7), not null)
comment(varchar(40), null)
Then about 30 other columns of type (real, null) 
```

第一个查询中AnalysisValue的表结构为：

```
AnalysisID(int, not null)
Element(char(9), not null)
Value(real, null) 
```

第一个查询中CAnalysis的表结构为：

```
AnalysisID(PK, int, not null)
HeatName(char(7), null)
AnalysisTime(datetime, null)
SampleType(char(5), null)
Grade(char(4), null)
ProductID(char(14), null) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T02:51:53.370

由于您只需要第一个查询的第一行。您可以`Cross join`与第二个查询一起使用以获得所需的结果

```
 ;with cte as 
(SELECT 
 analysisvalue.analysisid, 
 heatname, 
 analysistime, 
 sampletype,
 grade, 
 productid, 
 element, 
 value 
 FROM 
 dbo.AnalysisValue 
 INNER JOIN 
 dbo.CAnalysis 
 ON 
 dbo.AnalysisValue.AnalysisID = dbo.CAnalysis.AnalysisID
 WHERE 
 heatname = 'A7M0066' 
 )
 SELECT 
      * 
 FROM 
 S_analysis s
 CROSS JOIN (SELECT TOP 1 analysistime
 FROM cte
 ORDER BY analysisid desc
 ) c
 WHERE s.heat_no = 'A7M0066' OR
 (s.analysis_datetime BETWEEN c.analysistime AND DATEADD(hh, 2, c.analysistime )) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T03:27:27.983

试试这个（从未使用过`sql-server`，但它应该会产生你预期的结果）

```
SELECT 
  * 
FROM 
  S_analysis 
  CROSS JOIN 
  ( 
    SELECT TOP 1
      analysistime
    FROM 
       dbo.CAnalysis 
    WHERE 
       heatname = 'A7M0066' 
    ORDER BY 
      analysistime DESC ) c
WHERE 
  heat_no = 'A7M0066'
  OR ( heat_no IS NULL AND s.analysis_datetime BETWEEN c.analysistime AND DATEADD(hh, 2, c.analysistime ) ) 
```

# r - 以升序和降序逐列排序数据

> ID：16205232
> 
> 赞同：3
> 
> 时间：2013-04-25T02:04:59.630
> 
> 标签：r, dataframe

我试图弄清楚如何按 c1 降序和 c2 升序对下面的数据框进行排序。

```
c1 <- c("a", "b", "c", "d", "d", "e", "f", "g", "h", "i")
c2 <- c("29-JAN-08", "29-JAN-08", "29-JAN-08", "29-JAN-08", "20-MAR-08", "28-MAR-08", "28-MAR-08", "28-MAR-08", "28-MAR-08", "28-MAR-08")
example <- data.frame(c1, c2) 
```

我不能将 - 符号与日期向量一起使用：

```
> example <- example[order(example$c1, -example$c2),]
Error: unexpected input in "example <- example[order(example$c1, -1ex" 
```

而且我还无法弄清楚如何使用“递减”参数：

```
> example <- example[order(example$c1, example$c2, decreasing = c(F, T)),]
Error: unexpected input in "example <- example[order(example$c1, -1ex" 
```

有没有办法可以按这两列对这个数据框进行排序，当列分别是字符和日期类型时，按第一列升序，第二列降序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T03:36:35.940

这是使用该`data.table`包的答案，它展示了它在更简洁的代码方面的好处：

```
example <- as.data.table(example)
# set the date variable as an actual date first
example$c2 <- as.Date(example$c2,format="%d-%b-%Y")

# then sort - notice no need to keep referencing example$...
example[order(c1,-as.numeric(c2))] 
```

如何执行此操作的基本 R 版本将使用`with`

```
example[with(example,order(c1,-as.numeric(c2))),] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T02:26:18.983

这将执行反向词法排序，但它可能不是您想要的，因为您尚未转换为 Date 值，因为反向排序将首先在字符日“字段”上完成：

```
 example[ order(example$c1, rev(example$c2)) , ]
#-------
   c1        c2
1   a 29-JAN-08
2   b 29-JAN-08
3   c 29-JAN-08
4   d 29-JAN-08
5   d 20-MAR-08
6   e 28-MAR-08
7   f 28-MAR-08
8   g 28-MAR-08
9   h 28-MAR-08
10  i 28-MAR-08 
```

如果您想以相反的“真实”日期顺序进行排序：

```
example[ order(example$c1, -as.numeric(as.Date(example$c2, format="%d-%b-%Y"))) , ]
#-----
   c1        c2
1   a 29-JAN-08
2   b 29-JAN-08
3   c 29-JAN-08
5   d 20-MAR-08
4   d 29-JAN-08
6   e 28-MAR-08
7   f 28-MAR-08
8   g 28-MAR-08
9   h 28-MAR-08
10  i 28-MAR-08
9   h 28-MAR-08
10  i 28-MAR-08 
```

# php - 使用额外参数进行排序以确定所需的确切类型或排序

> ID：16205237
> 
> 赞同：0
> 
> 时间：2013-04-25T02:05:34.473
> 
> 标签：php, function, sorting, usort

我有这个糟糕的排序功能，当在同一页面上调用两个时，它开始给我带来问题。它很可能会在同一页面上被多次调用。

我希望能够调用排序函数并发送特定的参数来确定排序的类型。其中包括按 ( `$arr['key']`) 排序的字段，是字符串还是整数 ( `strcmp`vs `x - y`) 以及比较的方向 ( `asc`vs `desc`)。

我怎样才能以一种不疯狂、复杂和混乱的方式做到这一点？我尝试了很多很多搜索，但是我发现了很多使用对象和类的东西，这让我很困惑，我没有看到如何发送更多参数。

任何帮助，即使这是一个重复的问题并且您有答案，将不胜感激！

```
//awful sorting function
switch($sort) {
case 'photoname_asc':
    function a_compare($a, $b) {
        $t1 = $a['photoname'];
        $t2 = $b['photoname'];
        return strcmp($t1, $t2);
    }
    usort($photos, 'a_compare');
    default;
    break;
case 'photoname_desc':
    function a_compare($a, $b) {
        $t1 = $a['photoname'];
        $t2 = $b['photoname'];
        return strcmp($t2, $t1);
    }
    usort($photos, 'a_compare');
    break;
case 'dateup_asc':
    function a_compare($a, $b) {
        $t1 = $a['id'];
        $t2 = $b['id'];
        return $t1 - $t2;
    }
    usort($photos, 'a_compare');
    break;
case 'dateup_desc':
    function a_compare($a, $b) {
        $t1 = $a['id'];
        $t2 = $b['id'];
        return $t2 - $t1;
    }
    usort($photos, 'a_compare');
    break;
 } 
```

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T02:34:04.223

下面是一个压缩 switch 语句的函数示例。警告未经测试，但应该可以解决问题。

```
function photoStort(array &$photos, $key, $order) {
    if ($order !== 'desc' && $order !== 'asc') {
        return false;
    }

    usort($photos, function($a, $b) use ($key, $order) {
        $t1 = $a[$key];
        $t2 = $b[$key];

        if (is_string($t1) && is_string($t2)) {
            if ($order === 'asc') {
                return strcmp($t1, $t2);
            } else {
                return strcmp($t2, $t1);
            }
        } elseif (is_int($t1) && is_int($t2)) {
            if ($order === 'asc') {
                return $t1 - $t2;
            } else {
                return $t2 - $t1;
            }
        } else {
            trigger_error('Invalid type in photoSort!', E_WARNING);
        }
    });
}
$photos = array(/* Photos */);

//ex 1
photoSort($photos, 'photoname', 'asc');

//ex 2
photoSort($photos, 'id', 'desc'); 
```

PHP 5.2 解决方案

```
function usortCallback($a, $b, $key, $order) {
    $t1 = $a[$key];
    $t2 = $b[$key];

    if (is_string($t1) && is_string($t2)) {
        if ($order === 'asc') {
            return strcmp($t1, $t2);
        } else {
            return strcmp($t2, $t1);
        }
    } elseif (is_int($t1) && is_int($t2)) {
        if ($order === 'asc') {
            return $t1 - $t2;
        } else {
            return $t2 - $t1;
        }
    } else {
        trigger_error('Invalid type in photoSort!', E_WARNING);
    }
}

function photoSort(array &$photos, $key, $order) {
    if ($order !== 'desc' && $order !== 'asc') {
        return false;
    }

    usort($photos, create_function('$a, $b', 'return usortCallback($a, $b, "' . $key . '", "' . $order . '");'));
} 
```

# java - 如何更改显示的布局

> ID：16205238
> 
> 赞同：0
> 
> 时间：2013-04-25T02:05:36.177
> 
> 标签：java, android, android-layout, spinner

我正在制作一个应用程序，其中有一个微调器，您可以在其中选择 4 个选项中的 1 个。我想要它，以便如果您单击选项 a 图像，则会在下面绘制一个布局，并且如果您选择选项 ba 绘制不同的布局，我尝试将布局设置为不可见并使其成为可见的，以便当您选择一个主题时布局变得可见但问题是当我需要该布局消失时它不会

这是我的代码，当我从微调器中选择一个选项时，此代码都会出现

```
 if (pos == 1){

            cooldown.setVisibility(0);
            warmup.setVisibility(1);

        }else if (pos == 2){
            cooldown.setVisibility(1);
            warmup.setVisibility(0);
        } 
```

我认为setvisibility是一个死胡同

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T02:15:30.467

参数 for`setVisibility()`不应该被硬编码为 0 或 1。有常量。`VISIBLE`是 0、`INVISIBLE`是 4 和`GONE`是 8。传入 1 不会做任何事情。 [看这里。](http://developer.android.com/reference/android/view/View.html#setVisibility%28int%29)

在您的情况下，您应该使用`VISIBLE`and `GONE`since`INVISIBLE`仍将占用布局空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T02:15:15.703

这些不是`visibility`. 试试吧

```
 if (pos == 1){

        cooldown.setVisibility(View.VISIBLE);
        warmup.setVisibility(View.INVISIBLE);

    }else if (pos == 2){
        cooldown.setVisibility(View.INVISIBLE);
        warmup.setVisibility(View.VISIBLE);
    } 
```

[能见度](http://developer.android.com/reference/android/view/View.html#setVisibility%28int%29)

如果这些是单个图像，那么这就是您想要的方式。如果它们`Layouts`包含很多，`Views`那么您可能需要考虑使用[Fragments](http://developer.android.com/reference/android/app/Fragment.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T03:16:51.530

我认为你应该使用**VISIBLE, INVISIBLE, GONE**代替数字

# java - 随机圈子JAVA

> ID：16205239
> 
> 赞同：0
> 
> 时间：2013-04-25T02:06:11.243
> 
> 标签：java, user-interface, geometry

我正在尝试创建一个 GUI，它将接受要绘制的圆的数量，并在具有随机位置/大小的 drawPanel 中绘制它们。在我的 actionListener 上，当我尝试绘制圆圈时，它在我的 drawOval 上给了我红线

第一类：

```
 import java.awt.BorderLayout;
 import java.awt.Color;
 import java.awt.Dimension;
 import java.awt.FlowLayout;
 import java.awt.Graphics;
 import java.awt.GridLayout;
 import java.awt.event.ActionEvent;
 import java.awt.event.ActionListener;
 import java.util.Random;
 import javax.swing.BorderFactory;
 import javax.swing.JButton;
 import javax.swing.JPanel;
 import javax.swing.JTextArea;

/**
 * 
 * @author Chris
 *
 */
 public class CirclesPanel extends JPanel{
 private JButton draw, clear;
 private JTextArea textArea;
 private JPanel panel, drawPanel, buttonPanel;
 private int count;

 /**constructor
* builds the frame
*/
 public CirclesPanel(){

//creates buttons and textArea
  draw = new JButton("Draw"); 
  clear = new JButton("Clear");
  textArea = new JTextArea(1,10);
  textArea.setBorder(BorderFactory.createTitledBorder("Circles"));

//creats panel
 JPanel panel = new JPanel();
 panel.setLayout(new BorderLayout());
 setPreferredSize(new Dimension(620, 425));
//creates subpanel drawPanel
 JPanel drawPanel = new JPanel();
 drawPanel.setPreferredSize(new Dimension(450,400));
 drawPanel.setBackground(Color.BLACK);
//creates subpanel buttonPanel
 JPanel buttonPanel = new JPanel();
 buttonPanel.setLayout(new GridLayout(3,1));
//adds all the content to the frame
 add(panel);
 add(buttonPanel, BorderLayout.WEST);
 add(drawPanel, BorderLayout.EAST);
 buttonPanel.add(textArea);
 buttonPanel.add(draw);
 buttonPanel.add(clear);
//reads if the draw button is clicked
 draw.addActionListener(new ActionListener() {

public void actionPerformed(ActionEvent e)
    {
      count =Integer.parseInt(textArea.getText());//takes the count in
      repaint();//repaints the picture to add the circles
    }
 }); 
//reads if the clear button is clicked
 clear.addActionListener(new ActionListener() {

        public void actionPerformed(ActionEvent e)
            {
            count=0;//sets the count to 0 so nothing is painted
              repaint();//repaints the window
            }
         }); 

 }
/**Paint component
 * draws the random circles
 */
  public void paintComponent(Graphics g) {
 Random generator = new Random();
 int x, y, diameter;
 for(int i = 0; i < count; i++){ //loop that takes the count and does this "x" times
  g.setColor(Color.BLUE);//sets color to blue
  x = generator.nextInt(90);//random location for x
  y = generator.nextInt(90);//random location for y
  diameter = generator.nextInt(30);//random size
  g.fillOval(x, y, diameter, diameter);//draws the circle
    }
}
 } 
```

二等

```
import javax.swing.JFrame;

public class Circles { 
public static void main(String[]args){
JFrame frame = new JFrame("Cicles HW9");
frame.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);

frame.getContentPane().add(new CirclesPanel());

frame.pack();
frame.setVisible(true);

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T04:03:50.313

您要做的是在**单击按钮**时**绘制一些随机圆圈**。我给你写了一个**简化的版本**来展示事情是如何工作的。`drawPanel`

 ****![样本](https://i.stack.imgur.com/qi2F6.jpg)

我只保留`drawButton`and`paintPanel`以保持简单。

```
public class PaintFrame extends JFrame {

    private JPanel content = new JPanel();
    private JButton drawButton = new JButton("Draw");
    private PaintPanel paintPanel = new PaintPanel();

    public PaintFrame() {

        getContentPane().add(content);
        content.setLayout(new BorderLayout());

        drawButton.setSize(100, 500);
        drawButton.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                // drawButton is fired, repaint the paintPanel
                paintPanel.repaint();
            }
        });
        content.add(drawButton, BorderLayout.WEST);
        content.add(paintPanel, BorderLayout.CENTER);
    }

} 
```

您需要一个扩展 JPanel 的新类并覆盖该`paintComponent`方法来为您完成绘画工作。这**可以确保您在面板上绘图**。

```
class PaintPanel extends JPanel {

    public PaintPanel() {
        setSize(500, 500);
        setBackground(Color.BLACK);
    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        Random random = new Random();
        g.setColor(Color.WHITE);
        // draw 5 random circles
        int count = 5;
        for (int i = 0; i < count; i++) {
            g.drawOval(random.nextInt(250), random.nextInt(250),
                    random.nextInt(250), random.nextInt(250));
        }
    }

} 
```

主班

```
public class DrawMain {

    public static void main(String[] args) {

        JFrame frame = new PaintFrame();
        frame.setDefaultCloseOperation(PaintFrame.EXIT_ON_CLOSE);
        frame.setSize(600, 500);
        frame.setVisible(true);

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T03:47:52.073

所以在你的里面，我做了一点补充，首先，我把整个程序放在一个类中（CIRLCES PANEL），如果你想使用第二类，你可以使用它....问题来了，你的程序是不是读取绘图的**ActionPerformed**方法，意味着它不在按钮上，现在我直接用你的**按钮（DRAW）添加它，**现在每当你点击按钮时，它会自动读取你的**textArea**值，并绘制你的界。我已将您的文本区域设为 FINAL，因此您可以在任何地方使用它......

现在您需要做的事情-----该程序正在整个框架上绘制圆圈，意味着不在您的绘图面板上，您需要设置值，因此它将在您的绘图面板区域上绘制-您还需要为您的椭圆添加颜色，因为它会绘制黑色圆圈，您将无法看到......

还有一件事我忘了提到你，你的，你还需要为你的 clear 方法添加代码......

```
 import java.awt.BorderLayout;
 import java.awt.Color;
 import java.awt.Dimension;
 import java.awt.FlowLayout;
 import java.awt.Graphics;
 import java.awt.GridLayout;
 import java.awt.event.ActionEvent;
 import java.awt.event.ActionListener;
 import java.util.Random;
 import javax.swing.BorderFactory;
 import javax.swing.JButton;
 import javax.swing.JPanel;
 import javax.swing.JTextArea;

 public class CirclesPanel extends JPanel{
 private JButton draw, clear;
 private JTextArea textArea;
 private JPanel panel, drawPanel, buttonPanel;
 private int count;

 public CirclesPanel(){

JButton draw = new JButton("Draw");
JButton clear = new JButton("Clear");
final JTextArea textArea = new JTextArea(1,10);
textArea.setBorder(BorderFactory.createTitledBorder("Circles"));

JPanel panel = new JPanel();
panel.setLayout(new BorderLayout());
setPreferredSize(new Dimension(620, 425));

JPanel drawPanel = new JPanel();
drawPanel.setPreferredSize(new Dimension(450,400));
drawPanel.setBackground(Color.BLACK);

JPanel buttonPanel = new JPanel();
buttonPanel.setLayout(new GridLayout(3,1));

add(panel);
add(buttonPanel, BorderLayout.WEST);
add(drawPanel, BorderLayout.EAST);
buttonPanel.add(textArea);
buttonPanel.add(draw);
buttonPanel.add(clear);

draw.addActionListener(new ActionListener() {

    public void actionPerformed(ActionEvent e)
    {
          count =Integer.parseInt(textArea.getText());
          repaint();
    }
});        
}

  public void paintComponent(Graphics g) {
  Random generator = new Random();
  int x, y, diameter;
  for(int i = 0; i < count; i++){
     x = generator.nextInt(90);
    y = generator.nextInt(90);
    diameter = generator.nextInt(30);
    g.drawOval(x, y, diameter, diameter);

 }
 }

 } 
```

![在此处输入图像描述](https://i.stack.imgur.com/SNRmO.jpg)****

# ssh - SSH 传输层协议中哪一方会发起版本协商？

> ID：16205240
> 
> 赞同：0
> 
> 时间：2013-04-25T02:06:13.287
> 
> 标签：ssh

在 SSH 传输层协议规范[http://www.ietf.org/rfc/rfc4253.txt](http://www.ietf.org/rfc/rfc4253.txt)的“4.2.协议版本交换”部分中，它说，“当连接建立时，双方必须发送一个标识细绳。”。

但它没有定义哪一方应该启动这个过程，服务器端还是客户端？

这里有一些观察，

1.  在[http://www.cisco.com/web/about/ac123/ac147/archived_issues/ipj_12-4/124_ssh.html](http://www.cisco.com/web/about/ac123/ac147/archived_issues/ipj_12-4/124_ssh.html)，“图2：SSH传输层协议包交换”中，客户端发起交换过程。

2.  我尝试使用 JSCH 作为客户端连接服务器，这是快照。服务器端先发送 SSH 协议版本。 ![在此处输入图像描述](https://i.stack.imgur.com/PvSAF.png)

这是一个问题，JSCH 和 SSH 服务器都不发送协议版本。TCP 连接建立在包 93、94、95 中。5 秒后，服务器端关闭包 99 中的连接。

你能帮忙弄清楚为什么客户端和服务器都没有发送协议版本吗？多谢！

![在此处输入图像描述](https://i.stack.imgur.com/gPvgl.png)

问候，乔伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:10:49.367

是的，我们发现一些 cisco 盒子在没有收到客户端的版本字符串的情况下不会发送它的版本字符串。最近的jsch版本会立即发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T02:53:35.030

> 但它没有定义哪一方应该启动这个过程，服务器端还是客户端？

正确的。由于双方都必须发送它，并且两者都不是对对方的响应，因此谁先发送它是无关紧要的。

# c# - 使用 AGSXMPP 检查名册项目的在线状态

> ID：16205244
> 
> 赞同：1
> 
> 时间：2013-04-25T02:06:36.457
> 
> 标签：c#, xmpp, google-talk, agsxmpp

我正在使用带有 C# 的 AGSXMPP 库。一切正常，除了`OnPresence`当 GTalk 用户与 Internet 断开连接并且用户的状态保持为在线时没有触发事件。`RosterItems`有没有办法定期检查状态？

# asp.net-mvc - 对控制器进行 Ajax 调用

> ID：16205246
> 
> 赞同：1
> 
> 时间：2013-04-25T02:07:31.870
> 
> 标签：asp.net-mvc, jquery, asp.net-mvc-2

我正在使用 MVC 2 并尝试对控制器方法进行 ajax 调用。

**控制器：**

```
 [HttpGet]
        public ActionResult FirstAjax()
        {
            return View();
        }

        [HttpPost]
        public ActionResult FirstAjax(string a)
        {

            return Json("chamara", JsonRequestBehavior.AllowGet);

        } 
```

**看法：**

```
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {

            var serviceURL = '<%= Url.Action("FirstAjax", "AjaxTest") %>';

            $.ajax({
                type: "POST",
                url: serviceURL,
                data: param = "",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: successFunc,
                error: errorFunc
            });

            function successFunc(data, status) {

                alert(data);

            }

            function errorFunc() {
                alert('error');
            }
        });
    </script>
</head> 
```

在上面的代码中，请注意我的控制器。**为了使代码正常工作，我必须使用HTTPPOST**和**HTTPGET**添加到方法中，甚至参数 a 也不相关，我只是添加了它，因为我无法添加具有相同签名的两个方法。

我想这可能不是正确的方法。请解释最适合这种代码的方法。

**更新：**

添加一个没有 POST 和 GET 的方法不起作用。它只是在页面上打印字符串“chamara”。警报没有触发

```
 public ActionResult FirstAjax()
        {

            return Json("chamara", JsonRequestBehavior.AllowGet);

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T03:54:39.073

由于您不能有两个具有相同名称和签名的方法，因此您必须使用 ActionName 属性：

**更新：**

```
[HttpGet]
    public ActionResult FirstAjax()
    {
        Some Code--Some Code---Some Code
        return View();
    }

    [HttpPost]
    [ActionName("FirstAjax")]
    public ActionResult FirstAjaxPost()
    {
        Some Code--Some Code---Some Code
        return View();
    } 
```

请参阅[此](http://haacked.com/archive/2008/08/29/how-a-method-becomes-an-action.aspx)链接以进一步了解方法如何成为操作。不过很好的参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T03:56:48.653

根据您的解释，我认为您需要的代码如下：

AjaxTestController.cs

```
[HttpGet]          
public ActionResult FirstAjax()
{
     return Json("chamara", JsonRequestBehavior.AllowGet);
} 
```

脚本：

```
<script type="text/javascript">
      $(document).ready(function () {

      var serviceURL = '<%= Url.Action("FirstAjax", "AjaxTest") %>';

      $.ajax({
           type: "GET",
           url: serviceURL,               
           success: successFunc,
           error: errorFunc
      });

      function successFunc(data) {           
           alert(data);
      }

      function errorFunc(xhr, status, err) {            
           alert('error');
      }

      });
</script> 
```

# boost - 如何在集群上使用 boost 库进行编译？

> ID：16205247
> 
> 赞同：1
> 
> 时间：2013-04-25T02:07:49.090
> 
> 标签：boost, compilation, static-libraries

我正在尝试使用集群上的 boost 库编译我的程序。但我不知道如何在我的集群上链接库。

我使用以下命令在我的 Mac 上本地编译我的程序：

```
mpic++ -o local ods_v2.4.cpp -L/opt/local/lib/  -lboost_iostreams-mt -lz -I/opt/local/include 
```

这是我集群上的 boost 信息：

```
-bash-4.1$ module avail boost

---------------------------------------------------------------- /opt/modules/modulefiles -----------------------------------------------------------------
boost/1.49.0_intel-12.0.084   boost/1.49.0_intel-13.0.1.117
-bash-4.1$ module show boost
-------------------------------------------------------------------
/opt/modules/modulefiles/boost/1.49.0_intel-13.0.1.117:

module-whatis    access boost ver. 1.49.0 header files and libraries 
module       load python/2.7.3_intel-13.0.1.117 
setenv       BOOST_HOME /apps/rhel6/boost/1.49.0_intel-13.0.1.117 
setenv       BOOST_ROOT /apps/rhel6/boost/1.49.0_intel-13.0.1.117 
setenv       BOOST_INCLUDE -I/apps/rhel6/boost/1.49.0_intel-13.0.1.117/include 
setenv       LINK_BOOST -L/apps/rhel6/boost/1.49.0_intel-13.0.1.117/lib -Xlinker -rpath -Xlinker /apps/rhel6/boost/1.49.0_intel-13.0.1.117/lib 
prepend-path     LD_LIBRARY_PATH /apps/rhel6/boost/1.49.0_intel-13.0.1.117/lib 
-------------------------------------------------------------------

-bash-4.1$ 
```

我想知道我应该使用什么命令行？我正在尝试这个，但它不起作用：

```
-bash-4.1$ mpiCC -o cluster ods_v2.4.cpp  $LINK_BOOST $BOOST_INCLUDE -lz 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T02:10:05.773

解决了

```
-bash-4.1$ mpiCC -o cluster ods_v2.4.cpp  $LINK_BOOST -lboost_iostreams -lz $BOOST_INCLUDE 
```

我忘了-lbookst-XXXX

谢谢

# ruby-on-rails - Nokogiri-如果这个维基百科表格没有唯一的 TR 名称，我该如何解析？

> ID：16205249
> 
> 赞同：0
> 
> 时间：2013-04-25T02:08:17.267
> 
> 标签：ruby-on-rails, ruby, nokogiri

这是我到目前为止所拥有的......问题是它正在生成一个看起来像的 JSON 文件（见下文）。我的问题是，当我检查页面上的代码时，我看不到 css 选择器的任何独特之处。他们都只是 tr td a。任何提示将不胜感激。

谢谢！

```
require 'rubygems'
require 'nokogiri'
require 'open-uri'
require 'uri'
require 'json'

sammiches = Nokogiri::HTML(open("http://en.wikipedia.org/wiki/List_of_sandwiches"))

class Scraper

def initialize
 @url = "http://en.wikipedia.org/wiki/List_of_sandwiches"
 @nodes = Nokogiri::HTML(open(@url))

end

def summary(filename)

 sammich_data = @nodes

 sammiches = sammich_data.css('div.mw-content-ltr table.wikitable tr') 

 sammich_hashes = sammiches.map {|x| 
   name = x.css('td a').text
   image = x.css('td a.image').text
   country = x.css('td a').text
   description = x.css('td a').text

 {
  :name => name,
  :image => image,
  :country => country,
  :description => description,
  }
    }

File.open("public/#{filename}","w") do |f|
 f.write(JSON.pretty_generate(sammich_hashes))
 end   
 end

 sammy = Scraper.new
 puts sammy.summary('listy')
 end 
```

Json文件输出部分

```
[
{
"name": "",
"image": "",
"country": "",
"description": ""
},
{
"name": "BaconUnited Kingdomketchupbrown sauce",
"image": "",
"country": "BaconUnited Kingdomketchupbrown sauce",
"description": "BaconUnited Kingdomketchupbrown sauce"
},
{
"name": "Bacon, egg and cheesebreakfast sandwich",
"image": "",
"country": "Bacon, egg and cheesebreakfast sandwich",
"description": "Bacon, egg and cheesebreakfast sandwich" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T02:34:56.113

只需使用 td 索引：

```
name = x.at('td[1]').text
country = x.at('td[3]').text 
```

您可能想先删除引文：

```
sammich_data.search('sup').remove 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T05:34:37.937

与其解析 Wikipedia 的 HTML，不如利用[他们的 API](http://www.mediawiki.org/wiki/API%3aMain_page)，这将为您提供 XML、JSON 或其他格式的数据。它更清洁，更可重复使用。

您甚至可以获得用于呈现没有所有边框和框的页面的 HTML。

# c# - 从 C# 中的资源/程序集中加载 excel 文件

> ID：16205252
> 
> 赞同：9
> 
> 时间：2013-04-25T02:08:36.867
> 
> 标签：c#, excel, resources, embedded-resource

我需要加载一个 Excel 文件并在上面写字。我已经将该文件添加到资源并将其构建操作设置为嵌入式资源。我的问题是我似乎无法从资源/程序集中加载它。我目前有这个代码：

```
 Assembly assembly = Assembly.GetExecutingAssembly();
        Assembly asm = Assembly.GetExecutingAssembly();
        string file = string.Format("{0}.UTReportTemplate.xls", asm.GetName().Name);
        var ms = new MemoryStream();
        Stream fileStream = asm.GetManifestResourceStream(file);

        xlWorkBook = xlApp.Workbooks.Open(file);
        if (xlApp == null)
        {
            MessageBox.Show("Error: Unable to create Excel file.");
            return;
        }
        xlApp.Visible = false; 
```

我究竟做错了什么？如何访问该文件？任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-25T02:26:01.917

您需要从程序集中提取资源（在本例中为 excel 电子表格）并将其作为流写入文件，例如：

```
Assembly asm = Assembly.GetExecutingAssembly();
string file = string.Format("{0}.UTReportTemplate.xls", asm.GetName().Name);
Stream fileStream = asm.GetManifestResourceStream(file);
SaveStreamToFile(@"c:\Temp\Temp.xls",fileStream);  //<--here is where to save to disk
Excel.Application xlApp = new Excel.Application();
xlWorkBook = xlApp.Workbooks.Open(@"c:\Temp\Temp.xls");
if (xlWorkBook  == null)
{
   MessageBox.Show("Error: Unable to open Excel file.");
   return;
}
//xlApp.Visible = false; 
```

...

```
public void SaveStreamToFile(string fileFullPath, Stream stream)
{
    if (stream.Length == 0) return;

    // Create a FileStream object to write a stream to a file
    using (FileStream fileStream = System.IO.File.Create(fileFullPath, (int)stream.Length))
    {
        // Fill the bytes[] array with the stream data
        byte[] bytesInStream = new byte[stream.Length];
        stream.Read(bytesInStream, 0, (int)bytesInStream.Length);

        // Use FileStream object to write to the specified file
        fileStream.Write(bytesInStream, 0, bytesInStream.Length);
     }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-27T19:53:11.197

```
//save resource to disk
string strPathToResource = @"c:\UTReportTemplate.xls";
using (FileStream cFileStream = new FileStream(strPathToResource, FileMode.Create))
 {
            cFileStream.Write(Resources.UTReportTemplate, 0, Resources.UTReportTemplate.Length);
 }

//open workbook
Excel.Application xlApp = new Excel.Application();
xlWorkBook = xlApp.Workbooks.Open(strPathToResource);
if (xlWorkBook  == null)
{
   MessageBox.Show("Error: Unable to open Excel file.");
   return;
}
xlApp.Visible = false; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-14T07:12:57.117

我想在这里添加我的代码片段，它在 Visual Studio 2015 中运行良好。（只是改进了[Jeremy Thompson](https://stackoverflow.com/users/495455/jeremy-thompson)的[答案](https://stackoverflow.com/questions/16205252/load-excel-file-from-resources-assembly-in-c-sharp/16205403#16205403)。）

（不要忘记在属性窗口中将 Excel 文件资源的`Build Action`属性设置为。）`Embedded Resource`

```
public void launchExcel()
{
    String resourceName = "Sample.xls";
    String path = System.Environment.GetFolderPath(Environment.SpecialFolder.LocalApplicationData);

    Assembly asm = Assembly.GetExecutingAssembly();
    string res = string.Format("{0}.Resources." + resourceName, asm.GetName().Name);
    Stream stream = asm.GetManifestResourceStream(res);
    try
    {
        using (Stream file = File.Create(path + @"\" + resourceName))
        {
            CopyStream(stream, file);
        }
        Process.Start(path + @"\" + resourceName);
    }catch (IOException ex)
    {
        MessageBox.Show(ex.Message);
    }
}

public void CopyStream(Stream input, Stream output)
{
    byte[] buffer = new byte[8 * 1024];
    int len;
    while ((len = input.Read(buffer, 0, buffer.Length)) > 0)
    {
        output.Write(buffer, 0, len);
    }
} 
```

希望这能帮助你解决你的麻烦。

此致。

# javascript - 将低效的代码变成循环？Javascript

> ID：16205256
> 
> 赞同：0
> 
> 时间：2013-04-25T02:09:14.703
> 
> 标签：javascript, loops

我有一个带有彩色框的网页，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/Gp0s0.jpg)

每个盒子都有自己的 div，第一个 id 为“one”，第二个为“two”，依此类推。这应该是一个猜谜游戏，如果你点击正确的盒子你赢了，如果你选择了错误的盒子你输了。使用数字生成器随机选择正确的框。我的 javascript 代码正在运行，但我想知道是否有更有效的方法来编写它？这是我现在拥有的：

```
function rand(){
  temp = Math.floor((Math.random()*6)+1);
  document.getElementById("one").onclick = one;
  document.getElementById("two").onclick = two;
  document.getElementById("three").onclick = three;
  document.getElementById("four").onclick = four;
  document.getElementById("five").onclick = five;
  document.getElementById("six").onclick = six; 
}

function correct(){
  alert("You are correct");
}

function incorrect(){
  alert("You are incorrect");
}

function one(){
 if (temp == 1){
   correct();
 }
 else {
   incorrect();
 }
}

function two(){
 if (temp == 2){
   correct();
 }
 else {
   incorrect();
 }
}

function three(){
 if (temp == 3){
   correct();
 }
 else {
   incorrect();
 }
} 
```

所有六个盒子的代码都是这样的。几个小时以来，我一直在思考如何使用循环或其他东西来做到这一点，但我就是想不通。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T02:14:20.213

由于它是随机生成的，因此单击哪个框实际上并不重要。举个例子，我的网站上有一个小游戏，它是一张刮刮卡：你可以选择十二个区域，但你只能选择一个。在内部，您选择哪一个绝对没有区别。这里同样适用。

所以，试试这个：

HTML：

```
<div id="board">
    <div id="one"></div>
    <div id="two"></div>
    ....
</div> 
```

JS：

```
document.getElementById('board').onclick = function() {
    if( Math.random() < 1/6) {
        alert("You win!");
    }
    else {
        alert("Sorry, you lost...");
    }
} 
```

编辑：[这](http://jsfiddle.net/VBpaZ/)是一个演示如何允许多次获胜的机会。但是请注意，出于任何严肃的目的，您应该向服务器提交请求并让服务器告诉您您是赢还是输，否则非常容易作弊；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T02:14:55.727

在这种情况下，使用像 jQuery 这样的 DOM 操作库确实很有帮助。但是，如果您愿意继续使用 vanilla javascript，则可以使用 querySelectorAll/addEventListener 事件委托，并检查调用元素的 id，然后进行处理

检查[http://jsfiddle.net/KYvGf/上的工作代码](http://jsfiddle.net/KYvGf/)

```
$(function(){
  var $box, $boxes = [], secret = Math.floor((Math.random()*6)+1);

  $(document).on('click', '.box', function(event){
    var $el = $(event.target);
    if ($el.data('id') === secret){
      alert('bingo!');
    }
  });

  for (var i = 1; i < 7; i++){
    $box = $('<div/>', {'class': 'box'});
    switch (i){
      case 1:
        $box.css({'backgroundColor': 'red'});
        break;
      case 2:
        $box.css({'backgroundColor': 'blue'});
        break;
      case 3:
        $box.css({'backgroundColor': 'green'});
        break;
      case 4:
        $box.css({'backgroundColor': 'yellow'});
        break;
      case 5:
        $box.css({'backgroundColor': 'purple'});
        break;
      case 6:
        $box.css({'backgroundColor': 'orange'});
        break;
    }
    $box.data('id', i);
    $boxes.push($box);
  }
  $('#holder').append($boxes);
}); 
```

```
<div id="holder"></div> 
```

# java - Tomcat 6 到 Tomcat 7 升级会解决内存泄漏问题吗？

> ID：16205263
> 
> 赞同：1
> 
> 时间：2013-04-25T02:10:03.843
> 
> 标签：java, tomcat, memory-leaks

目前，我得到：

java.lang.OutOfMemoryError：Java 堆空间

该应用程序部署在tomcat 6中。在某种程度上，当我升级到tomcat 7环境时，这个问题会得到解决吗？

我现在不能这样做，因为它是在生产环境中。我想知道升级是否有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T03:33:56.917

> 该应用程序部署在tomcat 6中。在某种程度上，当我升级到tomcat 7环境时，这个问题会得到解决吗？

(IMO) 更改 Tomcat 不太可能解决问题。

> 该应用程序有点旧，并计划重构代码或可能重写它

也不*一定*需要重构/重写。修复内存泄漏实际上需要做的是使用内存分析器并跟踪内存泄漏的原因。一旦你找到它，它可能很容易修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T04:54:10.520

Tomcat 不太可能是这种情况。Tomcat 6 应该足够稳定。尝试运行 visualvm 并查看一段时间内的内存消耗。你有没有考虑过增加堆大小，也许你的边距太小了？

# html - 如何将左侧导航的背景颜色扩展为与主要内容区域相同的高度？

> ID：16205271
> 
> 赞同：0
> 
> 时间：2013-04-25T02:10:38.197
> 
> 标签：html, css

如何将左侧导航的背景颜色扩展为与主要内容区域相同的高度？如果使用滑动切换，背景也需要增加。请参阅 JSfiddle 以获取标记示例：http: [//jsfiddle.net/8WJRQ/](http://jsfiddle.net/8WJRQ/)

我希望#nav 的样式扩展与 .main-content 相同的高度（不更改 HTML 结构，b/ci 使用 12 列模板。）

*我应该提到编号类（.two 和 .ten）不能更改，因为它们是全局模板的一部分。

```
<div class="row">
    <div class="two columns">
        <div id="nav">
            <ul><li>Home</li><li>News</li><li>About </li></ul>
        </div>
    </div>
    <div class="ten columns">
        <div class="main-content">
            <p>Lorem ipsum</p>
            <p>Lorem ipsum</p>
            <p>Lorem ipsum</p>
            <a href="#" onclick="$('.foo').slideToggle()">Toggle Text</a>
            <p class="foo">Lorem ipsum<br>
            hello<br>
            world</p>
            <p>Lorem ipsum</p>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T02:30:21.930

您可以使用`table`,`table-cell`和`table-row`css 属性。

[http://www.w3schools.com/cssref/pr_class_display.asp](http://www.w3schools.com/cssref/pr_class_display.asp)

并将背景放入`.two .columns`

[http://jsfiddle.net/G6sdD/](http://jsfiddle.net/G6sdD/)

**更新**

好的，这是一个js版本。我并没有真正考虑太多。所以可能有更好的方法。

[http://jsfiddle.net/vGNXb/](http://jsfiddle.net/vGNXb/)

```
$(document).ready(function(){
var height = $('.ten.columns').height();
$('.two.columns').height(height);
});
function extend(){
    $('.foo').slideToggle(function(){
         var height = $('.ten.columns').height();
         $('.two.columns').height(height);
    });
} 
```

# jquery - JQuery如何通过文本从选择标签中选择一个选项并将其设为默认选项

> ID：16205272
> 
> 赞同：0
> 
> 时间：2013-04-25T02:10:44.443
> 
> 标签：jquery, jquery-selectors

我有一个看起来像这样的选择标签：

```
<form id="edit">
<select name="school">
<option val="1">School Name1</option>
<option val="2">School Name2</option>
<option val="3">School Name3</option>
</select>
</form> 
```

这些选项是从 sql 服务器上的 php 生成的，并且 javascript 使用相同的数据。

现在，我用来按文本选择它的 jquery 是：

```
$('#edit select[name = school] option:contains('+name+')').attr("selected", "selected"); 
```

我也尝试了其他一些变体，但似乎都没有。那么，我到底哪里错了？我目前正在使用 jquery 1.7.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T02:19:38.440

设置选中为真：

```
.attr("selected", true); 
```

代替：

```
.attr("selected", "selected"); 
```

[http://jsfiddle.net/samliew/HueEv/](http://jsfiddle.net/samliew/HueEv/)

# mysql - mysql gem在debian测试中坏了？

> ID：16205279
> 
> 赞同：0
> 
> 时间：2013-04-25T02:11:50.070
> 
> 标签：mysql, ruby, gem, rvm

我整晚都在尝试，到目前为止还无法在我的 Debian 测试 64 位系统上为 ruby​​ 编译 mysql gem。

我相信这是因为我安装了 openssl v1.0.0 库。

这是我尝试安装时得到的结果（使用 RVM 1.14.7 和 Ruby 1.9.1p431）：

```
gem install mysql
Building native extensions.  This could take a while...
ERROR:  Error installing mysql:
    ERROR: Failed to build gem native extension.

        /home/jarrett/.rvm/rubies/ruby-1.9.1-p431/bin/ruby extconf.rb
checking for mysql_ssl_set()... *** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/home/jarrett/.rvm/rubies/ruby-1.9.1-p431/bin/ruby
    --with-mysql-config
    --without-mysql-config
/home/jarrett/.rvm/rubies/ruby-1.9.1-p431/lib/ruby/1.9.1/mkmf.rb:364:in `try_do': The complier failed to generate an executable file. (RuntimeError)
You have to install development tools first.
    from /home/jarrett/.rvm/rubies/ruby-1.9.1-p431/lib/ruby/1.9.1/mkmf.rb:417:in `try_link0'
    from /home/jarrett/.rvm/rubies/ruby-1.9.1-p431/lib/ruby/1.9.1/mkmf.rb:421:in `try_link'
    from /home/jarrett/.rvm/rubies/ruby-1.9.1-p431/lib/ruby/1.9.1/mkmf.rb:529:in `try_func'
    from /home/jarrett/.rvm/rubies/ruby-1.9.1-p431/lib/ruby/1.9.1/mkmf.rb:774:in `block in have_func'
    from /home/jarrett/.rvm/rubies/ruby-1.9.1-p431/lib/ruby/1.9.1/mkmf.rb:670:in `block in checking_for'
    from /home/jarrett/.rvm/rubies/ruby-1.9.1-p431/lib/ruby/1.9.1/mkmf.rb:276:in `block (2 levels) in postpone'
    from /home/jarrett/.rvm/rubies/ruby-1.9.1-p431/lib/ruby/1.9.1/mkmf.rb:250:in `open'
    from /home/jarrett/.rvm/rubies/ruby-1.9.1-p431/lib/ruby/1.9.1/mkmf.rb:276:in `block in postpone'
    from /home/jarrett/.rvm/rubies/ruby-1.9.1-p431/lib/ruby/1.9.1/mkmf.rb:250:in `open'
    from /home/jarrett/.rvm/rubies/ruby-1.9.1-p431/lib/ruby/1.9.1/mkmf.rb:272:in `postpone'
    from /home/jarrett/.rvm/rubies/ruby-1.9.1-p431/lib/ruby/1.9.1/mkmf.rb:669:in `checking_for'
    from /home/jarrett/.rvm/rubies/ruby-1.9.1-p431/lib/ruby/1.9.1/mkmf.rb:773:in `have_func'
    from extconf.rb:45:in `<main>'

Gem files will remain installed in /home/jarrett/.rvm/gems/ruby-1.9.1-p431/gems/mysql-2.9.1 for inspection.
Results logged to /home/jarrett/.rvm/gems/ruby-1.9.1-p431/gems/mysql-2.9.1/ext/mysql_api/gem_make.out 
```

当我检查 mkmf.log 文件时（位于`/home/jarrett/.rvm/gems/ruby-1.9.1-p431/gems/mysql-2.9.1/ext/mysql_api/mkmf.log`，它是空的）。

**我试过的**

1）确保安装了所有必需的开发包（libssl-dev libopenssl-ruby build-essential gcc autoconf automake libmysql-ruby ruby​​-mysql libmysqld-dev ruby​​-dev）

2) 我最初安装了更新的 RVM - 我将其卸载并重新安装了早期版本的 RVM。我这样做了（按照这些说明：[undefined symbol: SSLv2_method when trying to run Thin webserver](https://stackoverflow.com/questions/13366409/undefined-symbol-sslv2-method-when-trying-to-run-thin-webserver)）希望我可以运行`rvm pkg install openssl`（在本地安装了 openssl 0.9.8），然后用这个：`rvm install 1.9.1 --with-openssl-dir=/home/jarrett/.rvm/usr`. 我希望这将使用 0.9.8 版本的 openssl。没有骰子。

3）尝试将本地 openssl 0.9.8 导出到`LD_LIBRARY_PATH`with `export LD_LIBRARY_PATH=/home/jarrett/.rvm/usr/lib`，然后再次运行安装。没有骰子。

4) 通过 RVM 安装 ruby​​ 1.9.2 和 1.9.3 并尝试它们。没有骰子。

5) 对着电脑大喊大叫。没有骰子。

有人有任何想法/建议吗？

也许 mysql gem 有可能很快更新为使用 openssl 1.0.0 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:57:26.527

想不通，所以我按照这些说明安装了 openssl 0.9.8（[未定义的符号：SSLv2_method 在尝试运行 Thin webserver](https://stackoverflow.com/questions/13366409/undefined-symbol-sslv2-method-when-trying-to-run-thin-webserver)和[https://rvm.io/packages/openssl/](https://rvm.io/packages/openssl/)时），然后安装了 mysql2 gem 并改用它。

# jquery - jQuery动态调整元素的高度到视口

> ID：16205280
> 
> 赞同：0
> 
> 时间：2013-04-25T02:11:54.773
> 
> 标签：jquery

我在让 jQuery 脚本正常工作时遇到了一些问题。我需要我的标题元素是我的视口的高度。问题是，除非我单击检查元素或更改我的浏览器大小，否则它不会扩大我的视口高度。我觉得很奇怪，因为它不是页面加载时视口的高度，但如果我篡改它就会变得如此。

这是我正在使用的：

```
 $(document).ready(function(){
        $(window).resize(function(){
        var newheight = $(window).height();      
        $("header.full-header").height(newheight);
        });
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T02:14:20.390

您必须在页面加载时调用该函数一次，因为在调整窗口大小之前不会触发调整大小。

```
$(document).ready(function(){
    doResize(); // run once on page load
    $(window).resize(doResize); // run on every resize
});
function doResize(){
    var newheight = $(window).height();      
    $("header.full-header").height(newheight);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T02:15:21.353

在函数之后再次触发 resize 事件，即：

```
$(window).resize(function (){
    // All your code here
    var newheight = $(window).height();      
    $("header.full-header").height(newheight);
}).resize(); 
```

现在应该可以工作了，因为您正在通过链接触发 resize onload。

# visual-studio-2012 - 发布构建链接器失败

> ID：16205281
> 
> 赞同：1
> 
> 时间：2013-04-25T02:12:01.900
> 
> 标签：visual-studio-2012

我刚刚完成了我的项目，并第一次尝试在 Release 中构建它。我以前遇到过 Windows 7 SDK 和位于程序文件中的 Common7 的问题（即它们丢失了，我不得不从 msdn 安装它们）。

构建抱怨：

```
1>LINK : fatal error C1350: error loading dll 'msobj110.dll': dll not found
1>Block.obj : fatal error LNK1000: unknown error at 00A14372; consult documentation for technical support options
========== Rebuild All: 0 succeeded, 1 failed, 0 skipped ========== 
```

然而我看了看：

C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE

我在 C:\Program Files... 下有相同的文件夹，而 IDE 几乎是空的；没有 ms 库。

我怎么知道 Visual Studio 从哪里挑选这些 dll？我正在使用VS2012。

# sql - 在 DataGridView 中检查当前行的空单元格

> ID：16205282
> 
> 赞同：0
> 
> 时间：2013-04-25T02:12:04.510
> 
> 标签：sql, vb.net

如何检查 CurrentRow 单元格是否有数据，并且任何单元格都没有数据，然后出现 MessageBox 警告选择非空单元格。如果不在代码下方，则会出现“无法删除未提交的新行”的错误。

```
Private Sub MerhabaToolStripMenuItem_Click(sender As Object, e As EventArgs) Handles MerhabaToolStripMenuItem.Click
    DataGridView1.Rows.Remove(DataGridView1.CurrentRow)
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T04:25:00.060

试试这个

```
Private Sub MerhabaToolStripMenuItem_Click(sender As Object, e As EventArgs) Handles MerhabaToolStripMenuItem.Click
    If Not DataGridView1.CurrentRow.IsNewRow Then
         DataGridView1.Rows.Remove(DataGridView1.CurrentRow)
    End If
End Sub 
```

# c# - 将 Razor 嵌入的 JavaScript 代码提取到单独文件中的最佳实践

> ID：16205285
> 
> 赞同：1
> 
> 时间：2013-04-25T02:12:13.057
> 
> 标签：c#, javascript, asp.net-mvc, razor

我有一个`.cshtml`包含大量内联 JavaScript 的大文件。对我来说，做这样的事情的能力非常有用：

```
function submitForm() {
    $.ajax({
        url: "@Url.Action("Action", "Controller")",
        type: "post",
        data: $form.serialize()
    });
} 
```

但是随着代码大小的增长，Intellisense 变得非常缓慢，我想将我的 JavaScript 代码提取到单独的`.js`. 文件。我知道有[RazorJS](http://john.katsiotis.com/blog/razorjs---write-razor-inside-your-javascript-files)，但我不想在我的项目中使用它。

我应该将这些 Razor 表达式提取到 JavaScript 变量中，将剩余的代码提取到一个单独的文件中，然后从那里引用这些值吗？这方面的最佳做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T02:24:09.603

您可以使用不显眼的 JS 技术来完成其中的一些操作，例如将操作放在表单上（即使您实际上并未提交表单）。

**看法**

```
<!-- Of course, you would probably use Html.BeginForm() here -->
<form action="@Url.Action("Action", "Controller")" id="form1"></form> 
```

**脚本文件**

```
function submitForm() {

    // you can abstract this further if you don't like having IDs 
    // hardcoded (I don't). Data attributes can help with this.
    var form = $("#form1");

    $.ajax({
        url: form.attr("action"),
        type: "post",
        data: form.serialize()
    });
} 
```

> 然而，随着代码大小的增长，Intellisense 变得非常缓慢，我想将我的 JavaScript 代码提取到单独的 .js 中。文件。

`data-*`您可以通过向相关元素添加属性来执行更广泛的抽象。虽然这很干净，但它也会使您的代码过于复杂。

如果你有数百行 JavaScript，一定要花时间提取它。如果您只有几十行纯“管道”代码，我会尝试找出 Intellisense 速度慢的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:38:12.693

还有另一种技术可以做你想做的事，但我不确定它是否理想。

只需创建一个局部视图 (.cshtml)，仅包含一个`<script></script>`元素，并在其中放置您愿意提取的 js。

然后，您可以像在 JS 中一样保留 Html 帮助器，只需在原始页面中使用 Html.Partial 帮助器，即可使用 JS 代码显示新创建的局部视图。

由于您的文件是一个 cshtml 文件，因此 razor 会解析它，因为它已经在您的当前页面中进行了解析。

# shell - Shell：子命令列表/显示

> ID：16205288
> 
> 赞同：-3
> 
> 时间：2013-04-25T02:13:15.797
> 
> 标签：shell

我写了一个shell脚本，它需要很多命令。按 T​​AB 键外壳应列出命令。怎么做？Br，普拉文 PB

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T02:19:06.993

这取决于您的目标外壳。对于 bash，您需要阅读Bash 参考手册中有关[可编程完成的章节。](http://www.gnu.org/software/bash/manual/html_node/Programmable-Completion.html)

基本上，您为它编写一个脚本并让用户在某处获取它（通常通过将其放入`/etc/bash_completion.d/`或类似的方式；检查现有脚本可能也是一个好主意）。

# javascript - 如何在 JavaScript 中获取域名的“有意义”节点？

> ID：16205289
> 
> 赞同：4
> 
> 时间：2013-04-25T02:13:16.273
> 
> 标签：javascript, url

我所说的“有意义”是指大多数人用来识别网站的 URL 部分（有这方面的技术术语吗？）。例如，我希望代码在以下所有情况下都返回“gm”：

`gm.com`, `gm.net`, `gm.info`, `gm.com.uk`, `gm.co.jp`, `gm.jp`（这些可能不是真实的网站）

加上以上任何一个具有附加子域的情况，例如`www.gm.com`,`www.cars.gm.com`等。它不必与国际化国家代码顶级域（具有非 ASCII 字符的域）一起使用。

我能想到的唯一方法是将最高级别的标签（例如`.com`）与通用顶级域、美国顶级域和国家代码顶级域进行比较，然后尝试将一个标签左移到时间。这仍然需要我知道（以及所有其他国家/地区）下的所有二级域名`.jp`，否则我将无法为`www.yahoo.jp`and都返回正确的值`yahoo.co.jp`。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T02:29:43.507

这实际上是一个比乍看起来更棘手的问题，因为您想要的域组件（技术上的“标签”）的数量取决于域名。看到这个：

[http://www.onlineaspect.com/2011/03/17/detect-subdomains-using-effective-tlds/](http://www.onlineaspect.com/2011/03/17/detect-subdomains-using-effective-tlds/)

Mozilla 项目启动了一个姊妹项目来维护有效 TLD 的列表；一旦您确定了 TLD，那么您正在寻找的只是在此之前的另一个标签。该列表可在此处获得：

[http://publicsuffix.org/](http://publicsuffix.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T02:44:27.057

唯一的办法是提前知道有效的 TLD：

```
// Source: http://data.iana.org/TLD/tlds-alpha-by-domain.txt
var TLDs = ["ac", "ad", "ae", "aero", "af", "ag", "ai", "al", "am", "an", "ao", "aq", "ar", "arpa", "as", "asia", "at", "au", "aw", "ax", "az", "ba", "bb", "bd", "be", "bf", "bg", "bh", "bi", "biz", "bj", "bm", "bn", "bo", "br", "bs", "bt", "bv", "bw", "by", "bz", "ca", "cat", "cc", "cd", "cf", "cg", "ch", "ci", "ck", "cl", "cm", "cn", "co", "com", "coop", "cr", "cu", "cv", "cx", "cy", "cz", "de", "dj", "dk", "dm", "do", "dz", "ec", "edu", "ee", "eg", "er", "es", "et", "eu", "fi", "fj", "fk", "fm", "fo", "fr", "ga", "gb", "gd", "ge", "gf", "gg", "gh", "gi", "gl", "gm", "gn", "gov", "gp", "gq", "gr", "gs", "gt", "gu", "gw", "gy", "hk", "hm", "hn", "hr", "ht", "hu", "id", "ie", "il", "im", "in", "info", "int", "io", "iq", "ir", "is", "it", "je", "jm", "jo", "jobs", "jp", "ke", "kg", "kh", "ki", "km", "kn", "kp", "kr", "kw", "ky", "kz", "la", "lb", "lc", "li", "lk", "lr", "ls", "lt", "lu", "lv", "ly", "ma", "mc", "md", "me", "mg", "mh", "mil", "mk", "ml", "mm", "mn", "mo", "mobi", "mp", "mq", "mr", "ms", "mt", "mu", "museum", "mv", "mw", "mx", "my", "mz", "na", "name", "nc", "ne", "net", "nf", "ng", "ni", "nl", "no", "np", "nr", "nu", "nz", "om", "org", "pa", "pe", "pf", "pg", "ph", "pk", "pl", "pm", "pn", "pr", "pro", "ps", "pt", "pw", "py", "qa", "re", "ro", "rs", "ru", "rw", "sa", "sb", "sc", "sd", "se", "sg", "sh", "si", "sj", "sk", "sl", "sm", "sn", "so", "sr", "st", "su", "sv", "sy", "sz", "tc", "td", "tel", "tf", "tg", "th", "tj", "tk", "tl", "tm", "tn", "to", "tp", "tr", "travel", "tt", "tv", "tw", "tz", "ua", "ug", "uk", "us", "uy", "uz", "va", "vc", "ve", "vg", "vi", "vn", "vu", "wf", "ws", "xn--0zwm56d", "xn--11b5bs3a9aj6g", "xn--3e0b707e", "xn--45brj9c", "xn--80akhbyknj4f", "xn--90a3ac", "xn--9t4b11yi5a", "xn--clchc0ea0b2g2a9gcd", "xn--deba0ad", "xn--fiqs8s", "xn--fiqz9s", "xn--fpcrj9c3d", "xn--fzc2c9e2c", "xn--g6w251d", "xn--gecrj9c", "xn--h2brj9c", "xn--hgbk6aj7f53bba", "xn--hlcj6aya9esc7a", "xn--j6w193g", "xn--jxalpdlp", "xn--kgbechtv", "xn--kprw13d", "xn--kpry57d", "xn--lgbbat1ad8j", "xn--mgbaam7a8h", "xn--mgbayh7gpa", "xn--mgbbh1a71e", "xn--mgbc0a9azcg", "xn--mgberp4a5d4ar", "xn--o3cw4h", "xn--ogbpf8fl", "xn--p1ai", "xn--pgbs0dh", "xn--s9brj9c", "xn--wgbh1c", "xn--wgbl6a", "xn--xkc2al3hye2a", "xn--xkc2dl3a5ee0h", "xn--yfro4i67o", "xn--ygbi2ammx", "xn--zckzah", "xxx", "ye", "yt", "za", "zm", "zw"].join()

function getDomain(url){

    var parts = url.split('.');
    if (parts[0] === 'www' && parts[1] !== 'com'){
        parts.shift()
    }
    var ln = parts.length
      , i = ln
      , minLength = parts[parts.length-1].length
      , part

    // iterate backwards
    while(part = parts[--i]){
        // stop when we find a non-TLD part
        if (i === 0
            || i < ln-2
            || part.length < minLength
            || TLDs.indexOf(part) < 0  // officialy not a TLD
        ){
            return part
        }
    }
}

getDomain(location.host) 
```

# ruby-on-rails - 在 Cancan 或模型验证中编写规则？

> ID：16205293
> 
> 赞同：1
> 
> 时间：2013-04-25T02:13:53.520
> 
> 标签：ruby-on-rails, validation, activerecord, cancan

**更新：** *阅读答案后，我想我应该改写我的问题（作为问题 3）*

有时我会困惑我应该在哪里写一些条件检查：Cancan 能力还是`ActiveRecord`模型验证？

作为第一个示例：假设我有一个可以嵌套的文件夹模型。如果文件夹是父文件夹的唯一子文件夹，我想防止删除该文件夹。

这可能应该是模型逻辑（作为 before_destroy 回调）。但是，我还想隐藏删除按钮（和阻止控制器操作），这似乎是 Cancan 的领域。

作为第二个示例：我想防止删除不属于我的文件夹。

这将需要使用`current_user`其中存储的会话。我的印象是会话相关条件不应该触及模型本身，所以这是针对 Cancan 的。这是对的吗？

* * *

**问题 3：**

如果删除文件夹同时需要：

1.  current_user 是所有者检查（写为 Cancan 能力）
2.  文件夹不是唯一的子检查（写在模型中`destroyable?()`）

Cancan 能力也应该调用`model.destroyable?()`，还是我应该`model.destroyable?()`单独调用（在视图和控制器中）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T02:19:45.103

IMO Cancan 是关于*授权*的：是否允许用户根据他们的身份删除给定的资源。基于*其他*标准限制资源删除不在该权限范围内。

这听起来像是授权和业务逻辑的结合。视图助手可能会检查用户是否`can?`删除资源以及资源是否为`deletable?`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T02:24:21.077

对于第一个示例，我会同时执行以下操作：放置一个 before_destroy 回调以防止破坏最后一条记录，并根据 CanCan 功能显示按钮。仅隐藏按钮不会阻止将 POST 请求发送到您的服务器并删除记录。

对于第二种场景，在控制器动作上打上CanCan检查，这样就不能擅自调用destroy动作。它不属于模型。

# c - 从文件中扫描数据时出现分段错误

> ID：16205296
> 
> 赞同：2
> 
> 时间：2013-04-25T02:14:24.507
> 
> 标签：c, segmentation-fault

全部。

在阅读了分段错误之后，我仍然无法弄清楚这个错误来自哪里。我知道它来自这个特定的功能；我的驱动程序中的其他所有内容都可以正常工作。

值得注意的是，所有样式都是枚举数据类型 StyleT。

被调用的函数：

```
openList(&list, "List.txt"); 
```

函数定义：

```
void openList(VehicleListT *list, char *infilename)
{   
    FILE *infile;
    int i = 0;
    char styleString[20];

    newList(list);

    if((infile = fopen(infilename, "r")) == NULL)
    {
        fprintf(stderr, "ERROR: Cannot open source file!\n");
        exit(1);
    }

    fscanf(infile, "%s\n", list->vehicles[i].vin);
    while(!feof(infile))
    {
        fscanf(infile, "%i\n", list->vehicles[i].year);
        fscanf(infile, "%lf\n", list->vehicles[i].price);
        fscanf(infile, "%s\n", list->vehicles[i].make);

        fscanf(infile, "%s\n", styleString);

        if((strcmp(styleString, "TWO_DOOR")) == 0)
        {
            list->vehicles[i].style = TWO_DOOR;
        }
        if((strcmp(styleString, "FOUR_DOOR")) == 0)
        {
            list->vehicles[i].style = FOUR_DOOR;
        }

        if((strcmp(styleString, "CONVERTIBLE")) == 0)
        {
        list->vehicles[i].style = CONVERTIBLE;
        }

        if((strcmp(styleString, "TRUCK")) == 0)
        {
                list->vehicles[i].style = TRUCK;
        }

        if((strcmp(styleString, "SUV")) == 0)
        {
            list->vehicles[i].style = SUV;
        }

        fscanf(infile, "%s\n", list->vehicles[i].color);
        fscanf(infile, "%s\n", list->vehicles[i].vin);

        i++;
        list->count++;
    }

    fclose(infile);
    return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T02:59:07.727

在其他问题中，由于我没有完整的代码，我无法找出其中一个明显的错误，它会给您的程序带来分段错误是

```
fscanf(infile, "%i\n", list->vehicles[i].year);
fscanf(infile, "%lf\n", list->vehicles[i].price); 
```

以上几行应该是，

```
fscanf(infile, "%i\n",  &list->vehicles[i].year);
fscanf(infile, "%lf\n", &list->vehicles[i].price); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T02:49:54.303

一些想法：

*   看起来您读取了 VIN 两次（就在 while 循环之前，然后在其中）？你能跳过一行吗？
*   字符串会溢出吗？即 30 个字符的 VIN 号码？
*   或者你正在超越数组边界？停车场车太多？:) 我建议为此添加安全检查。或者做一个链表。

我会在 while 循环的每次迭代结束时检查数据是如何加载或打印出来的。如果“i”太大，还建议进行安全检查。

# java - 在 selenium 网格上创建和上传文件

> ID：16205299
> 
> 赞同：7
> 
> 时间：2013-04-25T02:15:02.520
> 
> 标签：java, selenium-webdriver, selenium-grid

我拥有的测试用例之一是将文件上传到应用程序。没有网格，这可以通过创建一个虚假文件并获取文件的绝对路径并填写输入字段并单击上传来轻松完成。但是，当我使用网格时，文件不在托管节点的机器上。无论如何将文件发送到节点或告诉节点创建文件并获取绝对路径。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-26T20:22:12.397

一旦你知道如何，它实际上非常简单，只需设置一个本地文件检测器。

```
import org.openqa.selenium.remote.LocalFileDetector
import org.openqa.selenium.remote.RemoteWebDriver

WebDriver driver = new RemoteWebDriver(new URL("http://localhost:4444/wd/hub"), DesiredCapabilities.firefox());
driver.setFileDetector(new LocalFileDetector()) 
```

然后像往常一样上传，Selenium 将通过网络将文件发送到节点。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-26T10:56:39.843

您可以在本地计算机上创建文件时以正常方式执行此操作。见下文，

```
File file = new File("\\\\00.00.00.00\\c$\\somefile.txt");
file.createNewFile(); 
```

这将在远程机器上的“C”驱动器中创建一个名为 somefile.txt 的文件。将 IP 地址更改为您的远程计算机。

# mysql - mysql获取给定月份查看的组件计数

> ID：16205301
> 
> 赞同：0
> 
> 时间：2013-04-25T02:15:02.837
> 
> 标签：mysql, join, count

我试图获取在给定月份中查看特定项目的次数。

我有一个看起来像这样的查看表：

```
id_component viewed_date
1 | 2013-03-25 11:40:04
3 | 2013-03-26 11:41:04
4 | 2013-04-05 11:42:04
2 | 2013-04-07 11:43:04
3 | 2013-04-12 11:44:04
4 | 2013-04-17 11:45:04
3 | 2013-04-18 11:46:04
2 | 2013-04-20 11:47:04
4 | 2013-04-22 11:48:04 
```

我有一个像这样的组件表：

```
id, component_name, component_desc, component_price, folder_id
1 | muffler | ford focus muffler | 99.00 | 3
2 | air filter| ford focus air filter | 12.00 | 3
3 | oil filter| ford focus oil filter | 6.00 | 3
4 | wiper | ford focus rear wiper | 6.00 | 3 
```

我目前的查询是这样的：

```
SELECT MONTHNAME(viewed_date) AS vmonth, YEAR(viewed_date) AS vyear, COUNT(*) AS vcount  
FROM viewed AS V
RIGHT JOIN components AS C on V.id_component = C.id 
WHERE id_component IN (SELECT id FROM components WHERE folder_id = '3')
GROUP BY YEAR(V.viewed_date), MONTH(V.viewed_date)
ORDER BY V.viewed_date 
```

我想找回的是：

```
vmonth = march, vyear = 2012, vcount = 1, id = 1, component_name = muffler, etc. etc.
vmonth = april, vyear = 2012, vcount = 1, id = 2, component_name = air filter, etc. etc.
vmonth = march, vyear = 2012, vcount = 1, id = 3, component_name = oil filter, etc. etc.
vmonth = april, vyear = 2012, vcount = 2, id = 3, component_name = oil filter, etc. etc.
vmonth = april, vyear = 2012, vcount = 3, id = 4, component_name = wiper, etc. etc. 
```

我得到这个

```
vmonth = march, vyear = 2012, vcount = 4
vmonth = april, vyear = 2012, vcount = 9 
```

我没有得到连接的数据或单个组件的数据......只是文件夹的每月总数

我正在做的事情一定很愚蠢......有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:39:25.560

您只得到两行，因为您按一对（年，月）分组，您查看的表中只有两个不同的值。您需要将第三列 - id_component 添加到 group by 以获得您想要的结果。此外，您似乎不想在月、年和 id 的每个组合中都看到 0，因此您需要 INNER JOIN 而不是外部的。

此查询应为您提供所需的输出：

```
SELECT v.vmonth, v.vyear, v.vcount, c.id, concat( c.component_name, ', etc. etc.' ) AS component_name
FROM components c
JOIN ( SELECT MONTHNAME( viewed_date ) AS vmonth, YEAR( viewed_date ) AS vyear, id_component, count( * ) AS vcount
       FROM viewed
       GROUP BY vmonth, vyear, id_component ) v 
ON v.id_component = c.id 
```

# security - 创建用于互通 Redis 的 AWS EC2 安全组

> ID：16205302
> 
> 赞同：2
> 
> 时间：2013-04-25T02:15:03.890
> 
> 标签：security, amazon-web-services, amazon-ec2, redis

我将在主从配置中使用 Redis，其中每个 Redis 节点都位于单独的 EC2 实例中。由于每个 Redis 从站都需要与主站通信，因此我需要添加 Redis 自己的安全组 ID 作为源。但是，我不确定 Redis 将使用什么协议。我应该将安全组规则设置为具有选择访问端口的自定义 TCP，还是应该只是“所有 TCP”规则？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T08:31:35.960

端口 6379 上的自定义 tcp 规则和作为源的安全组就足够了

# javascript - 我的循环有什么问题？

> ID：16205309
> 
> 赞同：0
> 
> 时间：2013-04-25T02:15:57.360
> 
> 标签：javascript, html, jquery, jquery-mobile

XML 响应：

```
<NewDataSet xmlns="">
<Table diffgr:id="Table1" msdata:rowOrder="0">
    <Code>106377</Code>
    <Name>Blackened red snapper</Name>
    <Category>123</Category>
    <Yield>4</Yield>
    <YieldUnit/>
</Table>
<Table diffgr:id="Table2" msdata:rowOrder="1">
    <Code>303570</Code>
    <Name>Celery soup</Name>
    <Category>123</Category>
    <Yield>1</Yield>
    <YieldUnit/>
</Table>
<Table diffgr:id="Table3" msdata:rowOrder="2">
    <Code>303675</Code>
    <Name>Challah French Toast</Name>
    <Category>123</Category>
    <Yield>6</Yield>
    <YieldUnit/>
</Table>
<Table diffgr:id="Table4" msdata:rowOrder="3">
    <Code>303681</Code>
    <Name>Challah french toast</Name>
    <Category>123</Category>
    <Yield>4</Yield>
    <YieldUnit/>
</NewDataSet> 
```

HTML 代码

```
<div data-role="output">
    <ul id="RecipeList" data-role="listview" data-split-icon="star" data-split-theme="e" data-inset="true">
    </ul>
</div> 
```

JS 代码

```
var CodeObj = new Array();
var NameObj = new Array();
var Codeindex = 0;
var Nameindex = 0;

$(req.responseText).find('Name').each(function () {
    NameObj[Nameindex] = $(this).text();
    Nameindex += 0;

    for (var i = 0; i < NameObj.length; i++) {
        $(this).append(NameObj[i] + "<br/>");

        $(req.responseText).find('Code').each(function () {
            CodeObj[Codeindex] = $(this).text();
            Codeindex += 0;
            for (var a = 0; a < CodeObj.length; a++) {
                $(this).append(CodeObj[a] + "<br/>");
            }
        });

        var $content = $('<li><a href="#"><img src="../../img/album-bb.jpg"><h3>Name: ' + NameObj[i] + '</h3><p>Code: ' + CodeObj[a] + '</p></a><a href="#purchase" data-rel="popup" data-position-to="window" data-transition="pop">Add to favorites</a></li>');
        $('#RecipeList').append($content).listview('refresh');
    }
}); 
```

列表视图输出

```
Name : Blackened red snapper
Code : 106377
Name : Celery soup
Code : 106377
Name : Challah french toast
Code : 106377
Name : Challah french toastr
Code : 106377 
```

问题：总是相同的代码。谁能知道我的循环有什么问题？谢谢你。我尝试了很多方法。但仍然可以获得名称的正确输出

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T02:23:29.290

问题在于增量。代替：

```
Nameindex +=0;
Codeindex +=0; 
```

和

```
Nameindex++;
Codeindex++; 
```

或者

```
Nameindex +=1;
Codeindex +=1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T02:21:56.997

似乎

> 名称索引 +=0; 代码索引 +=0;

错了。不应该是Nameindex+=1吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T02:22:27.120

`Nameindex += 0`并且`Codeindex += 0`是无操作的，所以他们可能与它有关。

相反，试试这个：

```
$(req.responseText).find("Table").each(function() {
    var item = $(this),
        name = item.find("Name").text(),
        code = item.find("Code").text();
    $("#RecipeList").append('<li><a href="#"><img src="...." />'
       +'<h3>'+name+'</h3>Code: '+code+'</a>.....');
}); 
```

# javascript - Object.create 从一个对象

> ID：16205311
> 
> 赞同：1
> 
> 时间：2013-04-25T02:16:34.123
> 
> 标签：javascript

全部，如果我将一个对象传递给`Object.create`，这意味着创建一个从它继承的新对象。下面的代码证明了这一点。

```
 function Shape() {
          this.x = 0;
          this.y = 0;
        }

        Shape.prototype.move = function(x, y) {
            this.x += x;
            this.y += y;
            console.info("Shape moved.");
        };

        Rectangle = Object.create(Shape);
        Rectangle.__proto__==Shape;//it is true.yes, I can understand
        Rectangle//It is Function {} I can not understand it.
        Rectangle.constructor==Function//it is true.I can not understand it. 
```

该图表示的关系如下。但我无法理解的是它的亮点部分。究竟是`Rectangle`什么？我的意思是什么是`Function{}`，它来自哪里？还有`Rectangle.constructor`属性，不知道是不是所有的对象都有`constructor`属性，属性有什么`constructor`用？谢谢。

PS：以上数值都是在FireBug中计算和观察的。

![在此处输入图像描述](https://i.stack.imgur.com/E9tsT.png)

**通过 minitech 的评论更正图表**

![在此处输入图像描述](https://i.stack.imgur.com/BO0Sz.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T02:19:56.440

这就是继承使用的`Object.create`工作原理。它应该看起来像这样：

```
function Shape() {
    this.x = 0;
    this.y = 0;
}

Shape.prototype.move = function(x, y) {
    this.x += x;
    this.y += y;
    console.info("Shape moved.");
};

function Rectangle() {
    Shape.call(this);
}

Rectangle.prototype = Object.create(Shape.prototype); // Leaving out the constructor business for simplicity 
```

你在那里做的是复制实际的`Shape`函数，所以（作为一个函数）它的构造函数当然是`Function`.

PS`Rectangle.__proto__ = Shape`不是比较。

# php - 如何使用 xpath 获取数据集

> ID：16205312
> 
> 赞同：0
> 
> 时间：2013-04-25T02:16:39.920
> 
> 标签：php, dom, xpath

我下面的代码从网站的搜索结果中检索一系列图像以及相应的`age`数据。它工作正常，但是我得到一个图像列表，然后是该`age`字段中的信息列表。

`img img img img age age age age`等等。

我如何组合这些以便我可以成组显示它们：`img age` `img age` `img age`

```
<?php
    error_reporting(-1);

    $html = new DOMDocument();
    @$html->loadHtmlFile('http://www.site.com/searchresults.html');
    $xpath = new DOMXPath( $html );
    $nodelist = $xpath->query( "//div[@class='age']" );

    $tags = $html->getElementsByTagName('img');

    foreach ($tags as $tag) {

            $image =  $tag->getAttribute('src');
            echo '<img src='. $image .' alt="image" ><br>';
    }

    foreach ($nodelist as $n)
    {
        echo $n->nodeValue."<br>";
    }

?> 
```

示例页面，我想从中提取`img`源`title`数据`<div class="age" title="30 usa">`：

```
<div id="sr-15763292" class="search-result">
    <div class="thumb-wrapper">
      <a class="bioLink" href="http://www.site.com/user/"  title="View user"><img src="http://www.site.com/img/15763292.jpg" class="thumb" alt="user" width="140" height="105"></a>

      <p class="status"><a href="http://www.site.com/user/" >Online</a></p>
    </div>

    <div class="rating">
      <div class="rating-stars rating4"></div>
    </div>

    <div class="age" title="30 usa">
     <p>30</p>
     <p class="gender m">m</p>
     <p>USA</p>
    </div>

    <div>
        <p class="headline">Hello there.</p>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T03:14:12.243

如果我们不知道 HTML 是什么样子，就很难回答！假设它看起来像这样

```
<div class="age"><p>21</p>
    <img src="a.jpg" />
</div>
<div class="age"><p>51</p>
    <img src="b.jpg" />
</div> 
```

您需要找到每个 div，然后在每个 div 中找到图像。即使只有一个结果，getElementsByTagName() 也会为您提供一个列表，因此请使用 item() 获取第一个结果。

```
error_reporting(-1);

$html = new DOMDocument();
@$html->loadHtmlFile('results.html');
$xpath = new DOMXPath( $html );
$nodelist = $xpath->query( "//div[@class='age']" );

foreach ($nodelist as $node) {
    $tags = $node->getElementsByTagName('img');
    $image =  $tags->item(0)->getAttribute('src');
    echo '<img src="'. $image .'" alt="image" ><br>';
    echo $node->textContent . '<br>';
} 
```

如果 HTML 是这样的

```
<div class="age"><p>21</p></div><img src="a.jpg" /> 
```

你可以试试

```
 $node->nextSibling() 
```

作为通过 HTML 的一般点跟踪，并思考如何从 A 到 B？往前走？向后？到父节点，到下一个节点，然后再次下降......？

# hibernate - 如何仅验证 1 个字段的实体

> ID：16205314
> 
> 赞同：0
> 
> 时间：2013-04-25T02:16:49.100
> 
> 标签：hibernate, spring-mvc, bean-validation

我对 JPA 验证器有一个简单的问题

```
@Entity
class Account {
  @NotNull
  int id;
   @Size(max = 30, min = 6)
  String name;

  @Size(max = 30, min = 5)
  @NotNull
  String password;
} 
```

如果我打电话

```
 Set<ConstraintViolation<Account>> constraintViolations =
            validator.validate(account); 
```

它将验证所有字段。在某些情况下，我不想验证所有字段。如何仅验证密码？

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:07:48.630

要执行此调用`validateProperty()`方法而不是`validate()`：

```
Set<ConstraintViolation<Account>> constraintViolations =
    validator.validateProperty(account, "password"); 
```

另请参阅[文档中的示例](http://docs.jboss.org/hibernate/validator/4.3/reference/en-US/html/validator-usingvalidator.html#d0e620)

顺便说一句，还有`validateValue()`可能有用的方法。组也可以用来实现这一点。

# haskell - 仅使用 Show/Read 将 Haskell 数据结构序列化到磁盘是否是一种合理的做法

> ID：16205320
> 
> 赞同：10
> 
> 时间：2013-04-25T02:17:28.837
> 
> 标签：haskell, serialization

我玩过[Text.Show.Pretty](http://hackage.haskell.org/packages/archive/pretty-show/1.1/doc/html/Text-Show-Pretty.html)模块，它可以将 Haskell 数据结构（如记录）序列化为一种很好的人类可读格式，并且仍然能够使用`read`. 输出格式比 YAML 和 JSON 更具可读性。

使用 Haskell 记录的示例序列化输出`Text.Show.Pretty`：

```
Book
  { author = "Plato"
  , title = "Republic"
  , numbers = [ 123
              , 1234
              ]
  } 
```

来自 Ruby 世界，我知道 YAML 和 JSON 是大多数 Ruby 主义者用于序列化数据结构的首选格式。Haskell Show 和 Read 实例是否经常用于在 Haskell 中达到相同的目的？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-25T02:50:26.327

对于大型结构，我不会推荐它。`read`比糖蜜慢。轶事时间：我有一个名为`yeganesh`. 从概念上讲，它非常简单：读入`[(String,Double)]`大约 2000 个元素的 a 并转储出按元素排序的键。我曾经使用`Show`/来存储它`Read`，但发现切换到自定义打印机和解析器使程序加速了 8 倍。（注意：并不是解析速度提高了 8 倍。*整个程序*加速了八倍。这意味着解析速度比这更大。）这造成了令人不舒服的长时间停顿和即时满足之间的区别。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-25T08:00:39.703

我同意 Daniel Wagner 的观点，但是如果您想要用户可以使用简单的文本编辑器操作的文件，您可以使用 read/show 来处理一小组数据，也就是配置文件。

我不认为这在haskellers中是一种常见的方式，我通常使用parsec而不是读取'config data'和一个自定义类/instance而不是Show。

如果你有很多数据，通常使用 Data.Binary 或 Data.Serialize。

# php - php：在使用正则表达式检测前面带有空格/空格的字符串后删除某些字符

> ID：16205322
> 
> 赞同：0
> 
> 时间：2013-04-25T02:17:31.830
> 
> 标签：php, html, regex, whitespace, preg-match-all

我目前正在尝试使用网络爬虫，并遇到了正则表达式的这个问题。

我想从下面的字符串中存储的字符是“09:00 AM”：

```
<td style="border: #080707 1px solid;" lang="lang" valign="top" scope="scope"> 09:00 AM</td> 
```

下面是我的正则表达式部分：

```
preg_match_all ('/<td .+ scope="scope">(.*)<\/td>/i',$link_string,$details); 
```

结果输出是 09:00 AM，我不想要 Â。我知道这是由空格引起的，但我尝试了几种不同的方法，例如：

```
 preg_match_all ('/<td .+ scope="scope">\s(.*)<\/td>/i',$link_string,$details);

    preg_match_all ('/<td .+ scope="scope">(\w+)<\/td>/i',$link_string,$details);

    preg_match_all ('/<td .+ scope="scope"> (.*)<\/td>/i',$link_string,$details); 
```

但是，返回是假的，我想要的字符不匹配。

希望对进行这种正则表达式的最佳方式有所启发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T02:24:08.080

如果您不能自己标记`trim()`，`td`那么为什么不使用`substr()`输出来切断第一个字符：

`$time = substr($details[0][1],1) //[0][1] to be changed to actual output`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T04:23:07.267

您必须添加 u 修饰符。使用此标志，正则表达式引擎会将您的字符串视为 unicode 字符串。例子：

```
preg_match_all ('/<td .+ scope="scope">(.*)<\/td>/iu',$link_string,$details); 
```

# java - 在 BootStrap 位置添加的 jar 未反映在使用 Eclipse 的 My Classes 中

> ID：16205323
> 
> 赞同：0
> 
> 时间：2013-04-25T02:17:34.160
> 
> 标签：java, jvm

请帮助我了解这有什么问题。我在 BootStrap 的位置添加了一个 jar

> jdk(C:\Program Files\Java\jdk1.6.0_27\lib\ext) 和 jre(C:\Program Files\Java\jre1.6.0_22\lib\ext)

但是 jar 类在尝试调用 Eclipse 中 jar 添加的方法或类时没有反映。

**还帮助我知道在哪里可以通过 Logs 的静态块看到打印的东西.......**

下面我包含了我用来创建 JAR 的类。

```
package test.classloader;

public class BootStrapTest {
    static
    {
        System.out.println("BootStrap Jar is Loaded....................");
    }
    public static String checkClassLoader()
    {       
        return "This is BootStrap Class Check ClassLoader";     
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T02:22:50.080

我将探讨您认为需要这样做的原因。对不起，如果我不正确，但您提供的信息含糊不清，并且不清楚您的问题是什么。

如果您需要在 Eclipse 中缺少 Java EE 库（或其他 3rd 方库），请添加此 URL 上列出的软件 REPO 之一（到您的 Eclipse 软件管理器），然后从中安装 Java EE 库：[http://download。 eclipse.org/tools/orbit/downloads/](http://download.eclipse.org/tools/orbit/downloads/)

或者，使用 Maven 作为构建工具并添加适当的依赖项以下载项目所需的库。

# nuget - MvvmCross V3 + Nuget - 如何解决 dll not found 问题？

> ID：16205326
> 
> 赞同：1
> 
> 时间：2013-04-25T02:17:54.940
> 
> 标签：nuget, mvvmcross, portable-class-library

我正在尝试完成 N+1 TipCalc 教程并在尝试编译核心项目时收到以下错误：

```
Error   1   Metadata file '1\packages\MvvmCross.HotTuna.CrossCore.3.0.4\lib\portable-win+net45+MonoAndroid16+MonoTouch40+sl40+wp71\Cirrious.CrossCore.dll' could not be found   C:\Source.CS\trunk\Learning\Mono\TipCalc1\TipCalc.N=1\TipCalc.Core\CSC  TipCalc.Core
Error   2   Metadata file '1\packages\MvvmCross.HotTuna.StarterPack.3.0.4\lib\portable-win+net45+MonoAndroid16+MonoTouch40+sl40+wp71\Cirrious.MvvmCross.dll' could not be found C:\Source.CS\trunk\Learning\Mono\TipCalc1\TipCalc.N=1\TipCalc.Core\CSC  TipCalc.Core
Error   3   Metadata file '1\packages\MvvmCross.HotTuna.CrossCore.3.0.4\lib\portable-win+net45+MonoAndroid16+MonoTouch40+sl40+wp71\Cirrious.MvvmCross.Localization.dll' could not be found  C:\Source.CS\trunk\Learning\Mono\TipCalc1\TipCalc.N=1\TipCalc.Core\CSC  TipCalc.Core 
```

NuGet 2.5 RC 是从这里安装的[https://nuget.codeplex.com/](https://nuget.codeplex.com/)
Profile104 xml 文件，根据说明创建并在尝试将 NuGet 用于 MvvmCross 组件之前已在 V3 中使用了几周。
Pre NuGet TipCalc 教程顺利完成。

从 GitHub 下载完整的项目也可以毫无问题地编译。
我无法看到下载项目中的 packages.config 文件与从头开始创建的项目之间有任何区别。
核心项目的概况在每种情况下也是相同的。
dll位于指示的位置。

仅在尝试编译项目时，使用 NuGet 下载包没有问题。

关于我错过了什么的任何建议？

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:02:44.000

我的**猜测**是问题出在你的路上

路径似乎是`C:\Source.CS\trunk\Learning\Mono\TipCalc1\TipCalc.N=1\TipCalc.Core\CSC`

信息是`'1\packages\MvvmCross.HotTuna.CrossCore.3.0.4\lib\portable-win+net45+MonoAndroid16+MonoTouch40+sl40+wp71\Cirrious.CrossCore.dll' could not be found`

所以也许尝试使用没有`=`?

# sql - 方法 'GetRows()' 没有重载需要一个参数

> ID：16205327
> 
> 赞同：0
> 
> 时间：2013-04-25T02:18:10.353
> 
> 标签：sql, asp.net, layer

我正在开发一个视图页面。

这是我的代码：

```
int idses = Convert.ToInt32(Session["ID"].ToString());

// address
DataTable adrDT = new DataTable();
adrDT = ClassView.GetRows(idses);

houseN.Text = adrDT.Rows[0]["houseN"].ToString();
streetAD.Text = adrDT.Rows[0]["stAddress"].ToString();
townAD.Text = adrDT.Rows[0]["town"].ToString();
cityAD.Text = adrDT.Rows[0]["city"].ToString();
stateAD.Text = adrDT.Rows[0]["state"].ToString();
zipC.Text = adrDT.Rows[0]["zipCOde"].ToString();
ddlC.SelectedValue = adrDT.Rows[0]["countryID"].ToString();
teleNumb.Text = adrDT.Rows[0]["telephoneN"].ToString();
faxNumb.Text = adrDT.Rows[0]["faxN"].ToString(); 
```

这是我的数据层中的代码：

```
string rowSQL = "SELECT Merchant_Master.id, Merchant_Master.CompanyName, Merchant_Master.Url, Merchant_Master.AddressID, Industry.IndustryName, "
              + "Merchant_Master.IsActive, Merchant_Master.IsDeleted, Merchant_Master.DateCreated "
              + "FROM Merchant_Master JOIN Industry on Merchant_Master.IndustryID = Industry.id where Merchant_Master.id = @id";
//string rowSQL = "SELECT CompanyName, Url, DateCreated FROM Merchant_Master";

string[] param = {"@id"};
object[] paramVal = {};

return ClassDBQuery.ExecDataReader(rowSQL, param, paramVal); 
```

我的问题是：我将如何在后面的代码中调用@id？

`adrDT = ClassView.GetRows(idses);`-> 在这一行中...当我放置 idses 时，我收到错误“方法 'GetRows()' 没有重载需要一个参数”...我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T02:47:35.473

这意味着，在您的 ClassView 类上，您没有期望任何参数的 GetRows 方法。再次查看您的 ClassView。

编辑：

如果 idses 的类型是 int，你应该这样做：

```
public static DataTable GetRows(int ideses) {...} 
```

# doxygen - 如何获取主页的手册页输出？

> ID：16205329
> 
> 赞同：2
> 
> 时间：2013-04-25T02:18:11.000
> 
> 标签：doxygen

Doxygen 允许您生成手册页输出，但据我所知，它只为实际代码（函数、类等）生成手册页。我在 doxygen @mainpage 评论中有大量信息，例如示例，这些信息没有出现在手册页输出的任何地方。我希望它采用这种格式，以便我还将有一个手册页作为整体介绍。有没有办法用 doxygen 做到这一点？

到目前为止，我还没有找到一种方法，并且我探索过的替代方法不适用于 doxygen 为我创建的 index.html 文件。例如，我在 index.html 文件上尝试了几个不同的 html2man 脚本，但均未成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T05:18:46.507

我想出了这个解决方法，它将伪主页文本放在手册页中，并从 HTML 主页放置一个很好的链接：

```
/**
 * @mainpage
 * Summary of my simple project.  Please see @ref foo.h for more details.
 *
 * @file foo.h
 * @brief Summary of my simple project.
 * 
 * Here is the much more detailed description of my project,
 * originally intended for the main page.  Since I value the quality
 * of man page output the most, this will end up on the individual
 * file man page, and will be linked to from the HTML main page.
 * I can rattle on with other things like...
 * @todo find a better solution to the mainpage problem.
 */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T08:31:16.763

您是否在包含文档`@file <filename>`的文件中包含注释`@main`并且确实`<filename>`与实际文件名匹配？

Doxygen 不会包含至少没有此文件的文件中的文档。

[http://www.doxygen.nl/manual/commands.html#cmdfile](http://www.doxygen.nl/manual/commands.html#cmdfile)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-21T04:45:47.750

据我所知，这是不可能的。HTML 输出涵盖整个项目，而手册页输出涵盖单个 @file。@mainpage 适用于整个项目，而不是任何特定的@file。因此 doxygen 不会输出 @mainpage 用于 man 输出。

我下载了源代码，并浏览了 src/layout.cpp。搜索（例如）BriefDesc，您将看到每个“布局处理程序”是如何组合在一起的。我还不明白@mainpage 映射到什么，但显然它不是“文件布局处理程序”部分中添加的东西。

我尝试添加@mainpage 或@page，并使用@ref 引用它，看看我是否可以创建2 个手册页并手动将它们绑定在一起，但仍然有一个漂亮的HTML 首页。例如，我尝试获取 2 个手册页，foo 和 foo-intro。为此，我需要@page。但是对于 HTML 输出，介绍显示在“相关页面”下，而不是“主页”下。然而@mainpage 似乎无法触发单独的手册页。不理想。

# javascript - html/javascript/css 如何组合和解决这个问题

> ID：16205332
> 
> 赞同：1
> 
> 时间：2013-04-25T02:18:24.247
> 
> 标签：javascript, html, function

好的，这就是一切，但我的问题很小.. 页面已设置，点系统是正确的，我需要做的就是让输入显示与点系统匹配并显示与之相关的警报。

问题是当用户在文本框中输入命令时，它应该提醒排名是什么（专业、新手、初学者、菜鸟）

```
 <HTML>
    <HEAD>
    <script>
     function system(){

     var point=document.world.system.txt_points.value
     var tourn=document.world.system.txt_tourn.value
     var level=document.world.system.txt_level.value
     var check=document.world.system.txt_check.value
     var results=document.world.system.txt_results.value

     if ((point>=100000)&&(level>10)&&(tourn>25))
     {
     results=alert("pro status")
     }
    if((points>=100000)&&(level>10))
    {
   alert("Novice")
    }
   if (point>=100000)
   {
   alert("beginner")
   }

   if (points<100000)
   {
   alert("noob")
   }

   if (check=true)
   {
   alert("pro")

   }

   }
   </script>
   </HEAD>
   <BODY>
   <form name="world">
   <center>
   <table border=3>
   </center>

   <b>
   <th><font size='16'>defined</font></th>
   </b>
   <th><font size='16'>user input</font></th>

   </center>
   <tr>
   <td>How many points have you earned?</td>
   <td>
   <input type="textbox" name="txt_points" size='50'id='point'>
   </td>
   </tr>

   <tr>
   <td>How many tournaments have you played in?</td>
   <td>
   <input type="text box" size='50'id='tourn' name='txt_tourn'>
   </td>
   </tr>

   <tr>
   <td>highest level</td>
   <td>
   <input type="text box" size='50'id='level' name ='txt_level'>
   </td>
   </tr>

   <tr>
   <td>Have you won atleast 1 tournement</td>
   <td

    ><center>
       <input type="checkbox"id='check' name=txt_check>
       </center>
      </td>
    </tr>
    <tr>
    <td>your world of wizards ranking is </td>
    <td><center>
    <input type="submit"value ="submit">
    <br>
    <input type ="text box" name ="txt_results">
    </center>

    </td>
    </tr>
    </table>
    </center>
    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T03:33:58.450

您的 HTML 充满了无效标记。我已经对其进行了一些清理（它仍然存在问题），并在表单中添加了一个 onsubmit 以调用您的系统函数。我也稍微修改了你的系统功能。您并没有一直使用正确的名称来引用您的变量。（点而不是点等）。下次，在发布问题或代码*之前进行一些拼写检查。*通常一两个错别字被认为只是被忽略了，但你的错字很多。只需几分钟的时间就可以让你更接近开始。

**HTML**

```
 <form name="world" method="post" onsubmit="system(); return false;">

   <table border=3>

   <th><font size='16'>defined</font></th>

   <th><font size='16'>user input</font></th>

   <tr>
   <td>How many points have you earned?</td>
   <td>
   <input type="text" name="txt_points" size='50' id='point'>
   </td>
   </tr>

   <tr>
   <td>How many tournaments have you played in?</td>
   <td>
   <input type="text" size='50' id='tourn' name='txt_tourn'>
   </td>
   </tr>

   <tr>
   <td>highest level</td>
   <td>
   <input type="text" size='50' id='level' name ='txt_level'>
   </td>
   </tr>

   <tr>
   <td>Have you won atleast 1 tournement</td>
   <td

    >
       <input type="checkbox"id='check' name=txt_check>

      </td>
    </tr>
    <tr>
    <td>your world of wizards ranking is </td>
    <td>
    <input type="submit"value ="submit">
    <br>
    <input type ="text box" name ="txt_results">

    </td>
    </tr>
    </table>

    </form> 
```

**JAVASCRIPT**

```
function system(){

     var point=document.world.txt_points.value;
     var tourn=document.world.txt_tourn.value;
     var level=document.world.txt_level.value;
     var check=document.world.txt_check.value;
     var results=document.world.txt_results.value

     if ((point>=100000)&&(level>10)&&(tourn>25))
     {
     alert("pro status")
     }
    if((point>=100000)&&(level>10))
    {
   alert("Novice")
    }
   if (point>=100000)
   {
   alert("beginner")
   }

   if (point<100000)
   {
   alert("noob")
   }

   if (check==true)
   {
   alert("pro")

   }

   } 
```

# linux - 将 bash 脚本的输出写入带有日期的文件

> ID：16205333
> 
> 赞同：7
> 
> 时间：2013-04-25T02:18:29.450
> 
> 标签：linux, bash, console

我正在尝试创建与数据一起运行的 bash 脚本的日志文件。我目前有这个：

```
bash script.sh > /var/log/%Y-%m-%d_%H:%M.log 
```

问题是日志文件实际写入 %Y-%m-%d_%H:%M 而不是日期。有没有办法通过仅在控制台中运行来获取实际写出日期的日期？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-25T02:21:51.493

将该字符串传递给`date`：

```
bash script.sh > "/var/log/$(date +%Y-%m-%d_%H:%M).log" 
```

# android - 列表项行颜色问题android

> ID：16205334
> 
> 赞同：0
> 
> 时间：2013-04-25T02:18:44.447
> 
> 标签：android, list, click

我已经为列表项实现了自定义适配器。我有两个要求

1) 列表项应该有备用颜色。为了实现这一点，我有以下代码

```
private final int[] bgColors = new int[] {R.color.list_bg_1, R.color.list_bg_2};            
int colorPosition = position % bgColors.length;
convertView.setBackgroundResource(bgColors[colorPosition]); 
```

2）当您单击列表项时，它应该突出显示

```
Drawable selectedBackground;
  selectedBackground = context.getResources().getDrawable(R.color.backgroundColor);
    if (selectedPos == position) {
                convertView.setBackgroundDrawable(selectedBackground);
            } else {
                convertView.setBackgroundDrawable(null);
            }

// this method is called in onItemClick in Activity.
 public void setSelectedPosition(int pos){
            selectedPos = pos;
            notifyDataSetChanged();
        } 
```

问题：当我输入两个代码时，任何一个功能都不起作用。如何确保这两个功能都适用于上述代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T02:28:50.617

您应该为背景创建一个 selector.xml 文件，然后将视图的背景设置为该选择器名称。选择器允许您为视图的每个状态选择背景；是否选择、按下视图等。

即，您有一个名为 my_views_background_selector 的 xml 文件

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_selected="true"
    android:drawable="@drawable/selectedBackground" />
<item android:state_pressed="true"
    android:drawable="@drawable/pressedBackground" />
<item android:drawable="@drawable/regularBackground"/>

</selector> 
```

然后您可以通过执行以编程方式设置背景

```
convertView.setBackgroundResource(R.drawable.my_views_background_selector) 
```

或者在你用来膨胀你的convertedView的xml文件中

# ruby-on-rails-3.2 - 用于弹性搜索的查询字符串中的符号

> ID：16205341
> 
> 赞同：12
> 
> 时间：2013-04-25T02:19:28.953
> 
> 标签：ruby-on-rails-3.2, elasticsearch, tire

我有一个名为偏差的属性的“文档”（活动记录）。该属性具有“Bin X”“Bin $”“Bin q”“Bin %”等值。

我正在尝试使用轮胎/弹性搜索来搜索属性。我正在使用空白分析器来索引偏差属性。这是我创建索引的代码：

```
settings :analysis => {
    :filter  => {
      :ngram_filter => {
        :type => "nGram",
        :min_gram => 2,
        :max_gram => 255
      },
      :deviation_filter => {
        :type => "word_delimiter",
        :type_table => ['$ => ALPHA']
      }
    },
    :analyzer => {
      :ngram_analyzer => {
        :type  => "custom",
        :tokenizer  => "standard",
        :filter  => ["lowercase", "ngram_filter"]
      },
      :deviation_analyzer => {
        :type => "custom",
        :tokenizer => "whitespace",
        :filter => ["lowercase"]
      }
    }
  } do
    mapping do
      indexes :id, :type => 'integer'
      [:equipment, :step, :recipe, :details, :description].each do |attribute|
        indexes attribute, :type => 'string', :analyzer => 'ngram_analyzer'
      end
      indexes :deviation, :analyzer => 'whitespace'
    end
  end 
```

当查询字符串不包含特殊字符时，搜索似乎工作正常。例如`Bin X`，将只返回那些包含单词`Bin`AND`X`的记录。但是，搜索类似`Bin $`或`Bin %`显示包含`Bin`几乎忽略符号的单词的所有结果（带有符号的结果在没有结果的搜索中显示得更高）。

这是我创建的搜索方法

```
def self.search(params)
    tire.search(load: true) do
      query { string "#{params[:term].downcase}:#{params[:query]}", default_operator: "AND" }
        size 1000
    end
end 
```

这是我构建搜索表单的方式：

```
<div>
    <%= form_tag issues_path, :class=> "formtastic issue", method: :get do %>
        <fieldset class="inputs">
        <ol>
            <li class="string input medium search query optional stringish inline">
                <% opts = ["Description", "Detail","Deviation","Equipment","Recipe", "Step"] %>
                <%= select_tag :term, options_for_select(opts, params[:term]) %>
                <%= text_field_tag :query, params[:query] %>
                <%= submit_tag "Search", name: nil, class: "btn" %>
            </li>
        </ol>
        </fieldset>
    <% end %>
</div> 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-05-08T13:48:01.367

您可以清理查询字符串。这是一种适用于我尝试过的所有东西的消毒剂：

```
def sanitize_string_for_elasticsearch_string_query(str)
  # Escape special characters
  # http://lucene.apache.org/core/old_versioned_docs/versions/2_9_1/queryparsersyntax.html#Escaping Special Characters
  escaped_characters = Regexp.escape('\\/+-&|!(){}[]^~*?:')
  str = str.gsub(/([#{escaped_characters}])/, '\\\\\1')

  # AND, OR and NOT are used by lucene as logical operators. We need
  # to escape them
  ['AND', 'OR', 'NOT'].each do |word|
    escaped_word = word.split('').map {|char| "\\#{char}" }.join('')
    str = str.gsub(/\s*\b(#{word.upcase})\b\s*/, " #{escaped_word} ")
  end

  # Escape odd quotes
  quote_count = str.count '"'
  str = str.gsub(/(.*)"(.*)/, '\1\"\3') if quote_count % 2 == 1

  str
end

params[:query] = sanitize_string_for_elasticsearch_string_query(params[:query]) 
```

# web-hosting - 重定向后会话值丢失，但它适用于另一个主机

> ID：16205344
> 
> 赞同：1
> 
> 时间：2013-04-25T02:19:39.640
> 
> 标签：web-hosting, php

直升机，

我遇到了会话变量的问题。页面重定向到另一个页面后会话值丢失。我简单地使用了两个页面进行测试。

在第一页（test.php） -

```
<?php 
        session_start(); 
        $_SESSION['test'] = 'SS'; 
        header('location: test2.php'); 
?> 
```

在第二页（test2.php）-

```
<?php
       session_start();
       echo $_SESSION['SS'];
?> 
```

但是test2.php 没有任何价值。目前我正在对 startlogic 主机进行测试，当我在不同主机上使用相同的页面时，它起作用了。这真的是托管问题吗？PHP 版本或 Web 服务器 (aarche) 问题？

谢谢你，登

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T02:44:58.467

在 test2.php 上，你应该有 echo $_SESSION['test'] 而不是 $_SESSION['SS']。“SS”是您保存到会话变量的值，“test”是索引。

# javafx - 在javafx中最大化窗口大小时如何增加子fxml文件的宽度

> ID：16205345
> 
> 赞同：0
> 
> 时间：2013-04-25T02:19:42.157
> 
> 标签：javafx

我是 javafx 的新手，我使用以下代码在主设计中显示子 fxml 文件。但现在我面临设计部分的问题。当我最大化主设计的尺寸时，子设计不会拉伸。这在右侧和底部留出了很多空间。我创建了示例代码以使您易于理解，请从以下链接下载它 请查看此并让我知道如何解决它。运行它并采取行动，你会明白我在上面的意思。

www.anamol.com.np/Example.rar

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:13:55.400

我还没有下载源代码，但我认为 AnchorPane 会成功。
并设置以下：

```
AnchorPane.setTopAnchor(yourNode, 0);
AnchorPane.setRightAnchor(yourNode, 0);
AnchorPane.setBottomAnchor(yourNode, 0);
AnchorPane.setLeftAnchor(yourNode, 0); 
```

# asp.net - 将自定义参数发送到用户控件 ascx

> ID：16205347
> 
> 赞同：20
> 
> 时间：2013-04-25T02:19:54.080
> 
> 标签：asp.net, user-controls

我需要在页面上使用用户控件 (.ascx)，它是基于 2 个参数的相关帖子用户控件：

```
 1\. Current post
 2\. Relation type 
```

页面需要此控件的 3 个不同实例，每个实例具有相同的 Current post 参数，但不同的关系类型（标题、作者、流派）。

第一个参数我可以通过url获取，但是第二个参数呢？

我已经在谷歌上搜索了一段时间，但我还没有找到答案。如何传递第二个参数，以便控件可以根据这些参数加载信息？我宁愿不为每个参数创建一个控件，否则最好不构建用户控件而是直接进入代码:(谢谢！

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-25T03:09:43.553

创建用户控件的公共属性，例如：

```
public partial class SampleUC : UserControl
{
    public string CurrentPost {get;set;}
    public string RelationType {get;set;}

    //...

    //...
} 
```

从使用它的页面中分配这些标记，例如：

```
<%@ Register TagPrefix="cc" TagName="SampleUC" Src="SampleUC.ascx" %>
...
...
<cc:SampleUC id="myUC" runat="server" CurrentPost="Sample Post Title" RelationType="Title" /> 
```

或从代码隐藏（使用它的页面）：

```
protected void Page_Load(object sender, EventArgs e)
{
    //...

    myUC.CurrentPost = "Sample Post Title";
    myUC.RelationType = "Title" ;

    //...
} 
```

# javascript - 如何使弹出窗口工作

> ID：16205348
> 
> 赞同：-3
> 
> 时间：2013-04-25T02:19:55.690
> 
> 标签：javascript, jquery

当您单击图像时，我正在尝试开发弹出功能，该图像作为弹出窗口打开。这是示例 [http://soumghosh.com/otherProjects/natalierosscms/175-2/](http://soumghosh.com/otherProjects/natalierosscms/175-2/)

单击第一个图像并关闭它。然后点击第二张图片。图像在重复。任何想法我做错了什么？由于某种原因，我无法在此处发布代码。

**JavaScript：**

```
$('.alignnone').click(function(){
    $('.overlay').appendTo('body');
    $('.overlay').show();

    var popImage = $('.projectContainer').show();
    var thumbHolder = $(this).parent();
    thumbHolder.css('position', 'relative');

    $(this).clone().appendTo('.projectContainer');
    var cssAtrOne = {
        padding:'10px',
        width:'110%'
    };
    popImage.appendTo(thumbHolder).css(cssAtrOne);
});

$('.closeButton').click(function(){
    $('.overlay').hide();
    $('.projectContainer').hide();
}); 
```

**HTML：**

```
<!-- clickable image -->
<img src="http://soumghosh.com/otherProjects/natalierosscms/wp-content/uploads/2013/03/T1Main.jpg" alt="T1Main" width="559" height="745" class="alignnone size-full wp-image-181">

<!-- popup -->
<div class="projectContainer" style="padding: 10px; width: 110%; display: block;">
    <img class="closeButton" src="/otherProjects/natalierosscms/wp-content/themes/twentyeleven/images/closeButton.png">
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T02:25:55.707

你有这个：

```
$(this).clone().appendTo('.projectContainer'); 
```

您将图像附加到`projectContainer`而不清除第`projectContainer`一个（因此图像每次都会继续构建）。所以你需要做的是清除以前的图像，然后插入新的图像。

但是里面`projectContainer`是你的关闭按钮，这让事情变得有点棘手。有很多方法可以解决这个问题，但直接的解决方案是引入另一个`<div>`, `imageContainer`inside `projectContainer`：

**HTML：**

```
<div class="projectContainer" style="display: none; padding: 10px; width: 110%;">
    <img class="closeButton" src="/otherProjects/natalierosscms/wp-content/themes/twentyeleven/images/closeButton.png">
    <div class="imageContainer"></div>
</div> 
```

然后修改你的JS：

**更改 JS：**

```
//REPLACE the contents of imageContainer, not append to it.
//$(this).clone().appendTo('.projectContainer');
$('.projectContainer > .imageContainer').html($(this).clone()); 
```

达到这种效果的东西应该起作用。

# sql - SQL Server + 选择行及其子表内容

> ID：16205352
> 
> 赞同：0
> 
> 时间：2013-04-25T02:20:20.643
> 
> 标签：sql, sql-server

我有这样的简单选择语句：

```
SELECT 
[NAME], 
[AGE], 
[GENDER], 
SELECT [PHOTOS] FROM [USERPHOTOS] WHERE... --Yes, this is wrong but just want to make my intentions clearer. 
FROM PEOPLE WHERE AGE = '20' 
```

选择的人可能在另一个表中有多张照片，如何选择这种查询以便我也可以抓取照片？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T02:24:54.257

使用连接： [http ://www.w3schools.com/sql/sql_join.asp](http://www.w3schools.com/sql/sql_join.asp)

```
SELECT 
[NAME], 
[AGE], 
[GENDER],
[Photo]
From [People]
Inner join [PHOTOS] on People.ID = Photo.OwnerID

WHERE AGE = '20' 
```

我假设 photo 和 people 没有相同的列名以避免列名不明确。我假设照片表中有一个外键指向一个人。

# ruby-on-rails-3 - 为现有 Rails 3 模型生成 Rspec 测试

> ID：16205357
> 
> 赞同：1
> 
> 时间：2013-04-25T02:21:08.697
> 
> 标签：ruby-on-rails-3, rspec

我决定学习 Rspec，因为我更喜欢它的语法。所以我已经包含了`rspec-rails`gem 并运行了`rails g rspec:install`。我已经修改了我的 .rspec 和 rspec-helper 文件（使用 mocha 和 factory girl）。

然后，我使用`rails g rspec:model search`. 我的模型是`search.rb`，类名是`Search`.

所以在我`/spec/models/search_spec.rb`生成的 rspec:model 生成器中，我有：

```
require 'spec_helper'

describe Search do
  describe "#merge_searches" do

  end
end 
```

但是当我尝试运行测试时，我得到了错误：

> Jans-MacBook-Pro-2:spec jan$ rspec models/search_spec.rb /Users/jan/Documents/ruby/js3/spec/models/search_spec.rb:3:in `': uninitialized constant Search (NameError)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T20:07:31.163

如果我没有名为 Search 的模型，我可以重现该错误。一旦我创建`app/models/search.rb`了内容

```
class Search < ActiveRecord::Base
end 
```

错误消失了。希望能帮助到你。

# php - MissingConnectionException 通过 AppFog 上的 mysql 隧道运行 CakePHP

> ID：16205358
> 
> 赞同：2
> 
> 时间：2013-04-25T02:21:16.587
> 
> 标签：php, mysql, cakephp, appfog

当我的隧道已连接（af 隧道）时，我正在尝试运行一个 cakephp 控制台应用程序，该应用程序将连接到我的 mysql 数据库（通过隧道）。

我的数据库配置中有这个：

```
public $default = array(
    'datasource' => 'Database/Mysql',
    'persistent' => false,
    'host' => 'localhost',
    'login' => '11111111ZQyI',
    'password' => '11111111111MR',
    'database' => '111111111111115bc',
    'port' => '10000',
    'prefix' => '',
    //'encoding' => 'utf8',
); 
```

我会收到此错误消息：

```
Error: exception 'MissingConnectionException' with message 
'Database connection "Mysql" is     missing, or could not be 
created.' in /.../lib/Cake/Model/Datasource/Database/Mysql.php:161
Stack trace:
#0 /..../lib/Cake/Model/Datasource/DboSource.php(262): Mysql->connect() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T02:21:16.587

答案是我需要以某种方式调用 mysql 来连接 TCP 而不是套接字。显然，当您使用 localhost 它会自动触发一个 Socket 连接，如果您使用 12.0.0.1 它会触发一个 TCP 连接。所以这是解决方案：

```
public $default = array(
    'datasource' => 'Database/Mysql',
    'persistent' => false,
    'host' => '127.0.0.1',
    'login' => '11111111ZQyI',
    'password' => '11111111111MR',
    'database' => '111111111111115bc',
    'port' => '10000',
    'prefix' => '',
    //'encoding' => 'utf8',
); 
```

# wix - 在安装结束时打开 readme.txt 在 WiX 中失败

> ID：16205360
> 
> 赞同：3
> 
> 时间：2013-04-25T02:21:16.720
> 
> 标签：wix, wix3.6

我们想在安装结束时打开一个记事本文件。因此，我复制了一个 readme.txt 并在安装过程中放置​​在某个本地驱动器下，然后尝试从该位置打开。但是，它给出了“系统找不到指定的路径”的问题。但是，当我将本地硬编码路径设置为“d:\readme.txt”时，它就可以工作了。

```
<Directory Id='ProgramFilesFolder' Name='PFiles'>
   <Directory Id='INSTALLDIR' Name='SimpleMvvmToolkit_2012'>          
   </Directory>
</Directory>

<Property Id='NOTEPAD'>Notepad.exe</Property>
<CustomAction Id='LaunchFile' Property='NOTEPAD' ExeCommand='[INSTALLDIR]Readme.txt'
              Return='asyncNoWait' />

<InstallExecuteSequence>
   <Custom Action='LaunchFile' After='InstallFinalize'>NOT Installed</Custom>
</InstallExecuteSequence> 
```

在某个地方我犯了错误，但我无法准确找出。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T04:54:21.613

WiX SDK 中有一个名为[How To: Run the Installed Application After Setup](http://wix.sourceforge.net/manual-wix3/run_program_after_install.htm)`readme.txt`的主题，如果您只想这样做，可以使用它来启动。

如果您真的不想要那种用户体验，我建议您使用`WixShellExec`自定义操作来启动`readme.txt`而不是尝试启动 Notepad.exe。这样，`readme.txt`将在用户的默认 .txt 编辑器中打开。您可以通过以下方式做到这一点：

```
<Property Id="WixShellExecTarget" Value="[#FileIdForReadMe.txt]" />
<CustomAction Id="LaunchFile" 
    BinaryKey="WixCA" 
    DllEntry="WixShellExec"
    Impersonate="yes" />

<InstallExecuteSequence>
   <Custom Action='LaunchFile' After='InstallFinalize'>NOT Installed</Custom>
</InstallExecuteSequence> 
```

# wordpress-theming - 从不同的 slug 获取不同的页面

> ID：16205363
> 
> 赞同：0
> 
> 时间：2013-04-25T02:21:23.477
> 
> 标签：wordpress-theming, wordpress

我有这样的逻辑，但我无法在我的 wordpress 上实现它，我是这个平台的新手。

*   从不同的 slug 获取不同的页面
*   显示来自 slug1 的页面标题和内容
*   显示来自 slug2 的页面标题和内容
*   显示来自 slug3 的页面标题和内容

总而言之，它们将显示在一个页面上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:22:28.750

我刚刚意识到我没有使用正确的方法。我通过显示他们的 ID 给出的 3 个帖子做得恰到好处

```
<?php
    $postslist  = get_posts('include=120,122,124&orderby=ID&order=ASC');
                    foreach ($postslist as $post) :  setup_postdata($post); ?>

     <h3><a href="<?php the_permalink();?>"><?php the_title(); ?></a></h3>
                    <p><?php the_excerpt(); ?></p>

                  <?php endforeach; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:39:39.307

最好从 ID 获取页面而不是页面，即使它们被称为“永久链接”，您仍然可以更改它们，然后您还必须更新您的代码，这当然是一种痛苦。

我建议您为您的页面创建一个模板，当您完成后，您可以在模板中查询多个帖子/页面。

您可以创建这样的模板：

```
<?php
/*
Template Name: Snarfer
*/
?> 
```

之后，您可以像这样查询不同的帖子：

```
$query = new WP_Query( 'page_id=7' ); //this will get the page with teh ID 7

while ( $query -> have_posts() ) : $query -> the_post();
    //query the page data here like the_content(), the_title();
endwhile; 
```

如果您希望所有查询页面的样式相同，那么您最好使用`post__in`变量进行查询。在此处阅读有关不同选项的更多信息：[https ://codex.wordpress.org/Class_Reference/WP_Query#Post_.26_Page_Parameters](https://codex.wordpress.org/Class_Reference/WP_Query#Post_.26_Page_Parameters)

在此处阅读有关自定义模板的更多信息：http: [//codex.wordpress.org/Theme_Development#Custom_Page_Templates](http://codex.wordpress.org/Theme_Development#Custom_Page_Templates)

# shell - Shell脚本帮助，如何跳过错误报告文件？

> ID：16205365
> 
> 赞同：0
> 
> 时间：2013-04-25T02:21:46.497
> 
> 标签：shell, tesseract

我当前的shell脚本是这样的：

```
for i in *.pdf
do
    convert -density 400 $i -depth 8 ${i/pdf/jpg}
done

for j in *.jpg
do
    tesseract -l eng $j ${j/.jpg}
    rm $j
    mv ${j}.txt textfile
done 
```

所以它大致做的是，对于每个 pdf 文件，它将其转换为 jpg 文件，对于每个 jpg 文件，我使用 tesseract 将其转换为原始文本文件。从 pdf 到 jpg 的转换不会出现错误，但是 tesseract 可能会报告错误，例如：“由于已加入而取消了长度为 0 的重复”。我的脚本从那里停止......有没有办法让我的脚本在看到某种错误报告时跳过？所以我不需要转录损坏的 jpg 文件并想跳过它们。任何形式的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T02:28:41.023

您可以检查`$?`（上一个命令的返回码）并在脚本非零时退出（例如，失败）。

```
[ $? != 0 ] && echo "Failed and died"
# More traditionally
if [ $? != 0 ] ; then
  return_val=$?
  echo "Failed with ${return_val} code"
  exit $return_val
fi 
```

您还可以将输出流（stdout，stderr）合并到标准输出并取值

```
r=$(tessaract -l eng $j ... &>/dev/stdout) 
```

并将`$r`包含 stderror 结果。

或者，您可以将输出发送到您通过以下方式创建的另一个文件描述符`exec`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T02:29:27.250

tesseract 向命令行返回错误。

```
for j in *.jpg
do
    tesseract -l eng $j ${j/.jpg}
    [ $? -ne 0 ]  && break
    rm $j
    mv ${j}.txt textfile
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T02:34:03.567

如果您的脚本在 tesseract 失败时中止，那么您可能已经`set -e`接近脚本的顶部。如果您希望脚本在 tesseract 失败时中止，请添加`set -e`或检查是否`tesseract`成功：

```
if ! tesseract -l eng $j ${j/.jpg}; then exit 1; fi 
```

或者

```
 tesseract -l eng $j ${j/.jpg} || exit 1 
```

# c++ - 两个模板类由彼此的成员组成

> ID：16205367
> 
> 赞同：2
> 
> 时间：2013-04-25T02:21:51.833
> 
> 标签：c++, templates, g++

我的代码需要两个模板类由彼此的成员字段组成。例如，我有两个文件，

模板.h

```
template <class T> class B;

template <class T>
class A
{
    B<A> a;

    // fields and methods dependent on T
};

template <class T>
class B
{
    A<B> b;

    // fields and methods dependent on T
}; 
```

主文件

```
#include "templates.h"

int main()
{
    A<int> a;
} 
```

当我编译时，我收到此链接中显示的输出

[http://pastebin.com/taBWZjar](http://pastebin.com/taBWZjar)

我正在使用 g++ 编译器。当我输入 g++ --version 时，我得到

> g++ (Gentoo 4.7.2 p1.3, pie-0.5.5) 4.7.2

如果这在 C++ 中是不可能的，那么有什么替代方法或解决方法？或者这可能是我的编译器的一个错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T03:02:08.300

您当前的设计包含一个严重的缺陷，称为**循环依赖**。它永远不会编译，修复它的最好方法是重新设计你的类层次结构。

为了给您提供它为什么永远无法编译的线索，让我们通过删除模板来简化情况：

```
class B;

class A {
  B b;
};

class B {
  A a;
}; 
```

现在尝试将其视为编译器。要知道分配类需要多少空间`A`（编译器必须在**编译时****知道**这一点），它需要知道分配类需要多少空间，反之亦然。显然，这是一个**循环依赖**。您可以尝试自己编译它并查看编译器抱怨它。**`B`**

 ****解决此问题的一种可能方法是切换到指针（或引用）：

```
class B;

class A {
  B* b; // B& b; is possible too
};

class B {
  A a;
}; 
```

这应该编译得很好。原因是现在编译器知道这`b`是一个指针，并且容纳该指针所需的空间是固定的（32 位目标为 4 个字节，64 位目标为 8 个字节）。

**注意：**`a`指向in的指针/引用`B`是不必要的，因为`A`此时已经定义了，因此我们可以将它用作 in 的直接成员`B`。

在您的情况下，您使用模板使事情变得更加复杂，虽然您可以利用建议的修复（使用指针/引用）并将其与模板结合起来，但我不推荐它。您的代码必须完全重新设计。****

# zend-framework - zend framework1 中的操作 url 问题

> ID：16205368
> 
> 赞同：0
> 
> 时间：2013-04-25T02:21:54.637
> 
> 标签：zend-framework

我创建了一个本地 php 项目：zf-tutorial，现在主要 url 是：`http://localhost/zf-tutorial/public/`

然后我使用命令创建了一个动作：zf create action add Index，现在我得到了这个动作的另一个 url：`http://localhost/zf-tutorial/public/index/add`

问题：

为什么`http://localhost/zf-tutorial/public/index/add`不是`http://localhost/zf-tutorial/public/add`？有没有办法可以将“添加”操作网址更改为`http://localhost/zf-tutorial/public/add`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:25:54.573

创建一个名为的控制器`AddController`并命名操作`indexAction`，然后您将获得 url`http://localhost/zf-tutorial/public/add`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:01:39.803

您可以使用[Zend_Controller_Router](http://framework.zend.com/manual/1.12/en/zend.controller.router.html)为您的操作创建自定义 URL 。通读该文档部分以了解所有概念。

在您的特定情况下，我认为[Zend_Controller_Router_Route_Static](http://framework.zend.com/manual/1.12/en/zend.controller.router.html#zend.controller.router.routes.static)可能是最合适的。尝试将其添加到应用程序的引导程序中：

```
$route = new Zend_Controller_Router_Route_Static(
    'public/add',
    array('controller' => 'index', 'action' => 'add')
);
$router->addRoute('login', $route); 
```

# jquery - 滚动到锚点+调整顶部的固定菜单

> ID：16205376
> 
> 赞同：0
> 
> 时间：2013-04-25T02:22:35.787
> 
> 标签：jquery, scroll, jquery-animate, anchor, offset

我已经看到了几个关于此的问答，但我似乎无法让其中任何一个在我的情况下工作，例如：[jQuery Smooth Page Anchor Transitions with position:fixed menu](https://stackoverflow.com/questions/13502993/jquery-smooth-page-anchor-transitions-with-positionfixed-menu)
:(

页面示例： http: [//fpco-site.squarespace.com/familylife](http://fpco-site.squarespace.com/familylife)

当您向下滚动页面时，主菜单会固定/固定在顶部。固定菜单中还有一个下拉菜单。在菜单内（可能还有页面上的其他地方）我有常规链接和锚链接。当前，当单击锚链接时，菜单和下拉菜单在固定位置时会覆盖内容。

我需要跳转到锚点以适应菜单以及打开时的下拉菜单。内容在滚动到锚点时上下动画是理想的，并且随着下拉菜单的打开和关闭而上下动画。

万一这很重要，我在整个页面中的锚点都是通过 jquery 添加的。

我尝试了以下操作，但代码中有问题破坏了我的下拉菜单：

```
 /* scrollTo */
    function scrollTo(id){
        $('html,body').animate({scrollTop: $(id).offset().top},'slow');
    };
    $('a[href^="#"]').click(function(){
        scrollTo($(this).attr('href'));
        return false;
    }); 
```

我想如果我可以让它工作，那么我可以添加额外的offest来解释菜单，然后尝试在下拉菜单打开/关闭时进行抵消。但我无法让这个第一个想法发挥作用....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T20:32:48.160

通过使用一些 css 重新定位我的锚点，我能够在我的情况下解决这个问题。在我的情况下，锚点没有应用于任何视觉元素，所以我可以移动它们而不会伤害任何东西。我用了：

```
.anchor {
position: relative;
top: -160px;
height: 1px;
display: block; 
```

}

当单击下拉列表中的锚链接时，我还告诉下拉列表关闭。这样我就不必担心下拉菜单是打开还是关闭。

现在，当我单击转到其中一个锚点时，它会在我顶部的固定菜单下排列:) 可能有更好的方法，但这对我有用！~

接下来看看我是否可以让它动画滚动到锚点而不是直接跳到它。那样就好了 ：）

# asp.net - 当数据源是连接语句的结果时删除 gridview 行

> ID：16205377
> 
> 赞同：0
> 
> 时间：2013-04-25T02:22:36.687
> 
> 标签：asp.net, webforms

由于有问题的数据源是连接语句的结果，因此我必须指定删除命令。我尝试执行以下操作，但它不起作用。

```
<asp:ObjectDataSource ID="ObjectDataSource1" runat="server" OldValuesParameterFormatString="original_{0}" DeleteMethod="GridView1_RowDeleting" SelectMethod="GetSubjectPrerequisites" TypeName="EnrolSystemCore.SubjectPrerequisitesDSTableAdapters.subjectsTableAdapter">
        <SelectParameters>
            <asp:QueryStringParameter DefaultValue="32113" Name="subjectid" QueryStringField="subjectid" Type="Int32" />
        </SelectParameters>
    </asp:ObjectDataSource>
    <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" DataKeyNames="sj_id" DataSourceID="ObjectDataSource1" OnSelectedIndexChanged="GridView1_SelectedIndexChanged" AllowSorting="True">
        <Columns>
            <asp:BoundField DataField="sj_id" HeaderText="sj_id" ReadOnly="True" SortExpression="sj_id" />
            <asp:BoundField DataField="sj_name" HeaderText="sj_name" SortExpression="sj_name" />
            <asp:ButtonField ButtonType="Button" CommandName="Delete" HeaderText="Delete" ShowHeader="True" Text="Delete" />
        </Columns>
    </asp:GridView> 
```

并在 .cs 文件中创建了以下删除行的方法：

```
 protected void GridView1_RowDeleting(object sender, GridViewDeleteEventArgs e)
    {

        int subjectID = Convert.ToInt32(Request.QueryString["subjectID"]);
        GridViewRow row = GridView1.SelectedRow;
        int prerequisite1 = Convert.ToInt32(GridView1.DataKeys[e.RowIndex].Values[0].ToString());

        try
        {
            SubjectPrerequisites subjectPrerequisite1 = new SubjectPrerequisites();
            subjectPrerequisite1.removePreRequisite(subjectID, prerequisite1);
        }
        catch (Exception)
        {

        }
    } 
```

但是每当我尝试删除一行时，都会出现以下错误：

**ObjectDataSource“ObjectDataSource1”找不到具有参数的非泛型方法“GridView1_RowDeleting”：original_sj_id。**

我应该如何解决这个问题？我研究了现有的解决方案，但他们在我不想要的 aspx 页面中执行删除过程。

# django - 使用没有管理员权限的 ForeignKeyRawIdWidget

> ID：16205378
> 
> 赞同：2
> 
> 时间：2013-04-25T02:22:45.833
> 
> 标签：django, widget, foreign-keys, lookup

在 Django 中，我有一个模型表单，它有一个字段是具有 300k 行的模型的 ForeignKey 值。SelectBox 不适用于这种规模。

管理界面中的 raw_id_fields/ForeignKeyRawIdWidget 正是我想要的，我让它适用于我自己的表单，从参考链接中借用示例：

```
from django.contrib import admin
admin.autodiscover()

from django.contrib.admin.widgets import ForeignKeyRawIdWidget
from django import forms

from .models import Post, Photo

class PostForm(forms.ModelForm):
    photo = forms.ModelChoiceField(
        Photo.objects.all(),
        widget=ForeignKeyRawIdWidget(Post._meta.get_field("photo").rel,admin.site)
    ) 
```

唯一的问题是外键查找弹出窗口的 url 是 [http://mydomain.com/admin/photo/photo/?t=id&pop=1](http://mydomain.com/admin/photo/photo/?t=id&pop=1) 所以这需要管理员权限才能访问。我想让普通用户能够搜索/填充外键。我应该怎么做，将一些管理应用程序代码复制/粘贴到我自己的应用程序中？

我的问题与此类似，但他们没有提及有关管理员权限问题的任何内容： [raw_id_fields for modelforms](https://stackoverflow.com/questions/980405/raw-id-fields-for-modelforms)

提前致谢！

# html - 像 xaml 一样的 HTML 元素绑定

> ID：16205386
> 
> 赞同：0
> 
> 时间：2013-04-25T02:23:44.870
> 
> 标签：html, css, binding

我有一个全局的css文件，带有一个html元素，样式代码很大，但是不同的页面用这个样式有一点不同，我不想复制多个只修改一两行样式代码，就是有一种方法可以将 html 元素绑定到 css 文件，以便它可以具有不同的版本，例如在 xaml 中，我们可以将 viewmodel 的属性绑定到样式，以便它可以动态加载样式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T02:34:57.487

作为免责声明，我对 XAML 了解不多。但是，如果您只是想使用全局样式表来提供通用样式，然后针对一些例外情况覆盖它，您可以只链接到包含你想做的改变。

例如：

```
//global stylesheet
...
.classname {
color:blue;
font-family:Arial;
...
} 
```

* * *

```
//stylesheet specific to that page
...
.classname {
color:red; //include changes
//If you don't need a style declaration changed, just leave it blank
...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T02:29:48.350

您可以做的是动态加载该页面所需的 css 文件。有多种方法可以做到这一点。由于您没有指定是否使用 jQuery，您可以使用

```
function loadjscssfile(filename, filetype){
 if (filetype=="js"){ //if filename is a external JavaScript file
  var fileref=document.createElement('script')
  fileref.setAttribute("type","text/javascript")
  fileref.setAttribute("src", filename)
 }
 else if (filetype=="css"){ //if filename is an external CSS file
  var fileref=document.createElement("link")
  fileref.setAttribute("rel", "stylesheet")
  fileref.setAttribute("type", "text/css")
  fileref.setAttribute("href", filename)
 }
 if (typeof fileref!="undefined")
  document.getElementsByTagName("head")[0].appendChild(fileref)
} 
```

因此，您可以执行以下操作：

```
loadjscssfile("mystyle.css", "css") ////dynamically load and add this .css file 
```

来源：[http ://www.javascriptkit.com/javatutors/loadjavascriptcss.shtml](http://www.javascriptkit.com/javatutors/loadjavascriptcss.shtml)

有多个插件也允许您通过 jQuery 执行此操作。你只需要搜索它们。

# php - 将数组值转换为 longtoip

> ID：16205395
> 
> 赞同：0
> 
> 时间：2013-04-25T02:25:04.930
> 
> 标签：php, mysql, json

我是一名新手 php/js 程序员，正在学习如何使用 php 和 MySQL 更有效地做事。我正在通过将服务器 ip 存储在数据库中来从事个人项目（自学练习）。网络上的很多页面都建议在 MySQL 中存储 IPv4 地址的最佳方法是使用整数字段并将 IPv4 地址转换为存储它。这不是问题，很容易做到这一点。

但是，我正在填充数据表，并以数组的形式将信息拉回以填充每一行。当涉及数组时，我不知道如何使用 longtoip 将这些值转换回可读格式。您将在下面的输出部分看到我遇到的问题，网络上的大多数示例都没有处理这种情况。

请注意，我不关心其余代码的安全性，我知道它需要一些工作，但我稍后会修复它（对于那些意识到这些事情的人）。

**输入：**

```
$name = $_REQUEST['name'];
$ipv4 = $_REQUEST['ipv4'];
$ipv6 = $_REQUEST['ipv6'];
$port = $_REQUEST['port'];
$username = $_REQUEST['username'];
$password =$_REQUEST['password'];

$ipv4 = ip2long($ipv4);

require 'conn.php';

$sql = "insert into servers(name,ipv4,ipv6,port,username,password) values('$name','$ipv4','$ipv6','$port','$username',$password)";

mysql_query($sql) or die(mysql_error());
//mysql_query($sql);
echo json_encode(array(
    'id' => mysql_insert_id(),
    'name' => $name,
    'ipv4' => $ipv4,
    'ipv6' => $ipv6,
    'port' => $port,
    'username' => $username,
    'password' => $password
)); 
```

在 ipv4 字段中输入“192.168.1.1”的结果一旦写入 MySQL，就会产生结果“-1062731519”。

**输出：**

```
<?php

require 'conn.php';

$rs = mysql_query('select * from servers');
$result = array();
while($row = mysql_fetch_object($rs)){
    array_push($result, $row);
}

echo json_encode($result);

?> 
```

非常感谢任何关于如何解决这个问题的简单方法。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T02:55:17.277

你试过这个吗..

```
while($row = mysql_fetch_object($rs)){
 $row->ipv4 = long2ip($row->ipv4);
 array_push($result, $row); 
```

}

这通常会用新值更新 $row 对象。尝试让我知道这是否有效

# jquery - 如何通过jquery制作两个依赖字段

> ID：16205397
> 
> 赞同：0
> 
> 时间：2013-04-25T02:25:27.920
> 
> 标签：jquery, ajax

这段代码就像在 facebook 中更改个人资料用户名一样，我对这段代码有疑问：

```
$(function(){
 var uid = 1;
 var name_available=0;
 var password_ok=0;
$('#name,#password').bind('keyup',function(){
  var name = $('#name').val();
  var password = $('#password').val();

   if(/[^a-zA-Z_\.0-9]+/.test(name)){
      $('#result').html('Invalid Charcters');
      name_available = 0;
   }else{
     $.ajax({
       url: 'check_user.ajax.php',
       type: 'POST',
       data: 'name='+name,
       success: function(data){
         if(data){
              $('#result').html('available');
              name_available = 1;
         }else{
              $('#result').html('not available');
              name_available = 0;
         }
       }
     });
   }
     $.ajax({
       url: 'check_user.ajax.php',
       type: 'POST',
       data: 'uid='+uid+'&password='+password,
       success: function(data){
         if(data){
              $('#result2').html('true');
              password_ok = 1;
         }else{
              $('#result2').html('false');
              password_ok = 0;
         }
       }
     });

     if(name_available === 1 && password_ok === 1){
        $('#save').removeAttr('disabled');
     }else{
        $('#save').attr('disabled','disabled');
     }
});
}); 
```

html代码是：

```
username:<input type="text" name="name" value="" id="name" /><span id="result"></span><br />

password:<input type="password" name="password" value="" id="password" /><span id="result2"></span><br />

<input type="submit" name="save" value="save changes" id="save" disabled /><br /> 
```

ajax.php oage 是：

```
include 'config.php';

if(isset($_POST['name'])){
$name = $_POST['name'];
    if(!empty($name)){
    $sel = mysql_query("SELECT `id` FROM `users` WHERE `name`='$name'");
    $num = mysql_num_rows($sel);
    if($num > 0){
        echo false;
    }else{
        echo true;
    }
}else{
  echo false;
}
}else{
echo false;
}

if(isset($_POST['password']) && isset($_POST['uid'])){
$uid      = $_POST['uid'];
$password = md5($_POST['password']);
$sel      = mysql_query("SELECT `id` FROM `users` WHERE `id`='$uid' AND `password`='$password'");
$num      = mysql_num_rows($sel);
if($num < 1){
    echo false;
}else{
    echo true;
}
}else{
echo false;
} 
```

该代码有效，但并非总是在更改用户名或密码然后更改用户时

请帮助我，这对我很重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T02:36:13.270

如果我没记错的话，您正在尝试检查用户名是否已被使用并暗示用户输入另一个用户名。

我在我的项目中有一个类似的实现，它检查 ID 是否已被使用并提示用户输入另一个。请看下面的代码：

```
 var checkIndicatorId = function () {
        var indId = {
            'Id': $('#IdDescriptor').val()
        };

        $('#spnConfirmation img').remove();  **//removes the x or check image** 
        $('#spnConfirmation').append('<img class="icon" src="/CSS/Contents/loader.gif" title="Checking for availability.">');

        $.ajax({   //ajax call for checking data on the server
            url: 'http://localhost:54004/Cd/CheckIndicatorId',
            data: indId,
            type: 'GET',
            contentType: 'application/json;charset=utf-8'

        }).success(function (result) {   **// on success do this**
            if (result == true) {       **if id is available**
                $('#spnConfirmation img').remove();
                $('#spnConfirmation').append('<img class="icon" src="/CSS/Contents/check.png" title="Id is available.">');
            }else {              **//if is is already taken**
                $('#spnConfirmation img').remove();
                $('#spnConfirmation').append('<img class="icon" src="/CSS/Contents/error.png" title="Id is not available. Please enter another one.">');
            }
        }).error(function () {

        });
    }; 
```

添加：后端代码：

```
 var context = new MyContext();
            var result = context.Cd.Count(x => x.IdDescriptor == id);
            if (result < 1)
            {
                return Json(true, JsonRequestBehavior.AllowGet); //this is where the result is thrown back to the front end
            }
            else
            {
                var recommendedId = context.Cd.OrderByDescending(x => x.IdDescriptor + 1).FirstOrDefault();
                return Json(recommendedId, JsonRequestBehavior.AllowGet);//this is where the result is thrown back to the front end
            } 
```

如果您有一些澄清或问题，请发表评论，我很乐意提供帮助。

# c++ - C++-amp 库和软件要求

> ID：16205398
> 
> 赞同：1
> 
> 时间：2013-04-25T02:25:44.423
> 
> 标签：c++, visual-studio, gpgpu, c++-amp

我的 Visual Studio 版本没有 GPU 调试器选项。是因为版本本身还是我应该下载一些更新？版本是“Microsoft Visual Studio Express 2012 for Windows Desktop Version 11.0.60315.01 Update 2”、“Windows 7 home premium SP1”库呢，我在哪里可以得到它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T02:32:16.477

> Windows 7、Windows 8、Windows Server 2008 R2 和 Windows Server 2012 支持调试。要在软件模拟器上进行调试，需要 Windows 8 或 Windows Server 2012。要在硬件上进行调试，您必须安装显卡驱动程序。并非所有硬件供应商都实现了所有调试器功能。有关限制，请参阅供应商文档。
> 
> 想要在 Visual Studio 中支持 GPU 调试的独立硬件供应商必须创建一个实现 VSD3DDebug 接口并针对他们自己的驱动程序的 DLL。

来源：http: [//msdn.microsoft.com/en-us/library/vstudio/hh873126.aspx](http://msdn.microsoft.com/en-us/library/vstudio/hh873126.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-04T07:37:13.120

对于 Windows 7，有一些额外的下载。不支持开箱即用。

[http://blogs.msdn.com/b/nativeconcurrency/archive/2013/01/25/c-amp-gpu-debugging-now-available-on-windows-7.aspx](http://blogs.msdn.com/b/nativeconcurrency/archive/2013/01/25/c-amp-gpu-debugging-now-available-on-windows-7.aspx)

这将使您在 Windows 7 上的 WARP 软件模拟器上进行调试。您的 GPU，更重要的是，您拥有的驱动程序可能支持也可能不支持调试。

我相信 Express 支持 GPU 调试，它适用于 VS11 预览版。

这应该让你开始。

# java - Spring MVC HttpServletRequest 请求：单击了哪个按钮

> ID：16205402
> 
> 赞同：0
> 
> 时间：2013-04-25T02:25:57.403
> 
> 标签：java, spring, spring-mvc

我有一个带有三个按钮的表单，一个用于保存、更新和查询，但是我想在服务器端知道用户单击了哪个按钮。我尝试使用 request.getParameter("action") 和 request.getAttribute("action") 但它们都返回 null。有什么方法可以在服务器上获取它，也许我可以在会话中存储“动作”值？如果是这样，我如何创建和存储会话变量？

**代码**

```
<button class="btn" value="save"  id="action"></button>

<button class="btn" value="update"  id="action"></button>

<button class="btn" value="query"  id="action"></button> 
```

基本上我试图避免重新发布到服务器。我知道我想使用 POST/redirect/GET 模式，但是我的方法不支持重定向，即使更改并且表单有错误，我也无法返回服务器验证。

**控制器**

```
@RequestMapping(value = "crime_registration_save.htm", method = RequestMethod.POST)
    public ModelAndView handleSave(@Valid @ModelAttribute Crime crime,HttpServletRequest request,
            HttpServletResponse response,BindingResult result, ModelMap m, Model model) throws Exception {

        String action = request.getParameter("action");

    logger.info("The requested action is "+ action);
        if (result.hasErrors()) {

            logger.debug("Has Errors In crime_registration_save");
            model.addAttribute("dbcriminals", myCriminalList);
            model.addAttribute("dbvictims", myVictimList);
            model.addAttribute("status", myStatusList);
            model.addAttribute("crimeCategory", myCrimeCategoryList);
            model.addAttribute("crimeLevel", myCrimeLevelList);
            model.addAttribute("officers", myOfficerList);

            model.addAttribute("victimList", crime.getVictims());
            model.addAttribute("criminalList", crime.getCriminals());

            model.addAttribute("crimeTypeList",
                    crimeTypeManager.getCrimeTypeList(crime.getOffenceCatId()));
            model.addAttribute("icon", "ui-icon ui-icon-circle-close");
            model.addAttribute("results", "Error: Unable to Save Record!");

            return new ModelAndView("crime_registration");
        }
        logger.debug("No errors going to preform save");

        int crimeRecNo;

        crimeRecNo = crimeManager.saveCrime(crime);

        model.addAttribute("dbcriminals", myCriminalList);
        model.addAttribute("dbvictims", myVictimList);
        model.addAttribute("status", myStatusList);
        model.addAttribute("crimeCategory", myCrimeCategoryList);
        model.addAttribute("crimeLevel", myCrimeLevelList);
        model.addAttribute("officers", myOfficerList);
        model.addAttribute("save", "disabled");
        model.addAttribute("victimList", crime.getVictims());
        model.addAttribute("criminalList", crime.getCriminals());

        model.addAttribute("crimeTypeList",
                crimeTypeManager.getCrimeTypeList(crime.getOffenceCatId()));
        model.addAttribute("crimeRecNo", crimeRecNo);
        model.addAttribute("crimeRecordNoStatus", "true");
        model.addAttribute("icon", "ui-icon ui-icon-circle-check");
        model.addAttribute("results", "Record Was Saved");

        return new ModelAndView("crime_registration");
    } 
```

**jQuery**

```
function submitPage(urlMapping,method,action) {
        alert(urlMapping);
        document.getElementById("crime_registration").action = urlMapping;
        document.getElementById("crime_registration").target = "_self";
        document.getElementById("crime_registration").method = method;
        document.getElementById("crime_registration").submit();
        $('#action').val(action);

        alert($('#action').val());
        return false;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T02:29:44.250

表单的东西不是请求属性，它们是参数。

使用提交，给它一个名称，并通过该名称检索参数。

```
<input type="submit" class="btn" value="save" name="action" />

String button = request.getParameter("action"); 
```

如果它*不在*表单中，您将需要一些 JavaScript，但您的问题暗示它是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T02:30:31.610

这里的解决方案是调用一个隐藏变量`action`，然后单击按钮，您可以使用单击按钮的值更新隐藏变量，然后提交表单。

前任：

```
<form action="" method="post" name="myform">
    <input type="hidden" name="action" />

    ....

    <button class="btn" value="save"  id="action" onclick="submitForm(this)"></button>
    <button class="btn" value="update"  id="action" onclick="submitForm(this)"></button>
    <button class="btn" value="query"  id="action" onclick="submitForm(this)"></button>
</form> 
```

然后

```
<script>

    function submitForm(btn){
        var frm = document.myform;

        frm.action.value = btn.value;
        frm.submit();
        return false;

    }

</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T05:27:34.383

您需要添加到按钮的只是属性 type="submit" 和属性 name="parametername"。然后按钮标签就像提交类型的输入一样，其优点是值可以不同于显示文本或您放在按钮标签内的任何内容。

如果你想用 ajax 提交你的表单，我现在会使用 jquery ajaxform 插件来处理这个问题。

# prolog - Prolog - 谓词中的否定

> ID：16205404
> 
> 赞同：0
> 
> 时间：2013-04-25T02:26:06.087
> 
> 标签：prolog

我是序言编程任务，我无法以序言形式表示以下谓词。

喜欢看球的蝙蝠侠从比尔那里买票，空闲时间从不打曲棍球或板球。

我无法以列表格式编写谓词的否定部分。该列表的形式。

`member([batman,soccer,gotham,tikcet,bill],Listname)`

batman - 蝙蝠侠的名字 足球 - 这个人喜欢做什么 gotham - 起源城市 tikcet - 买东西做他喜欢做的事情 bill - preson 卖票

感谢任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:08:54.837

我没有看到问题与您的列表之间的联系。

> 喜欢看球的蝙蝠侠从比尔那里买票，空闲时间从不打曲棍球或板球。

第一部分在我看来是这样的：

```
loves(batman, watching(soccer)).
buys(batman, tickets, bill). 
```

最后一部分在我看来是这样的：

```
:- dynamic plays/2. 
```

这只是告诉 Prolog，plays/2 是一种事实，这些事实将很快出现。

然后你可以像这样编写查询：

```
?- loves(Batman, watching(soccer)), 
   buys(Batman, tickets, bill), 
   \+ plays(Batman, hockey),
   \+ plays(Batman, cricket). 
```

这看起来像是向我反映了这个问题，并给出了预期的回应：

```
Batman = batman. 
```

# xml - 输出中的重复数据 - xquery

> ID：16205406
> 
> 赞同：1
> 
> 时间：2013-04-25T02:26:21.643
> 
> 标签：xml, xquery

我对 xQuery 很陌生，我必须编写以下查询；

> 显示每个导演的 DVD 标题。

我的 xQuery 是；

```
let $doc := doc("DVDStore.xml")//DVDTitle
return <Directors>{
    for $dir in $doc/Directors/Name    
        let $t := $doc[$dir = Directors/Name]/Title
        return <DVDTitles> {$dir} {$t} </DVDTitles>
    } </Directors> 
```

DVDStore.xml 是；

```
<?xml version="1.0" encoding="UTF-8"?>
<DVDStore>
    <DVDTitles>
        <DVDTitle>
            <Title>A. I. Artificial Intelligence</Title>
            <Date>2002-03-05</Date>
            <Studio>Universal Studios</Studio>
            <Rated>PG-13</Rated>
            <Code>1</Code>
            <Directors>
                <Name>Steven Spielberg</Name>                
            </Directors>
            <Starrings>
                <Name>Haley Joel Osment</Name>
                <Name>Jude Law</Name>
            </Starrings>
        </DVDTitle>
        <DVDTitle>
            <Title>Terminator 2-Judgment Day</Title>
            <Date>2001-01-01</Date>
            <Studio>Artisan Entertainment</Studio>
            <Rated>R</Rated>
            <Code>6</Code>
            <Directors>
                <Name>James Cameron</Name>                
            </Directors>
            <Starrings>
                <Name>Arnold Schwarzenegger</Name>
                <Name>Linda Hamilton</Name>
            </Starrings>
        </DVDTitle>
        <DVDTitle>
            <Title>Titanic</Title>
            <Date>1999-08-31</Date>
            <Studio>Paramount Home Video</Studio>
            <Rated>PG-13</Rated>
            <Code>2</Code>
            <Directors>
                <Name>James Cameron</Name>  
            </Directors>
            <Starrings>
                <Name>Leonardo DiCaprio</Name>
                <Name>Kate Winslet</Name>
            </Starrings>
        </DVDTitle>
    </DVDTitles>
</DVDStore> 
```

我得到以下输出；

```
<?xml version="1.0" encoding="UTF-8"?>
<Directors>
   <DVDTitles>
      <Name>Steven Spielberg</Name>
      <Title>A. I. Artificial Intelligence</Title>
   </DVDTitles>
   <DVDTitles>
      <Name>James Cameron</Name>
      <Title>Terminator 2-Judgment Day</Title>
      <Title>Titanic</Title>
   </DVDTitles>
   <DVDTitles>
      <Name>James Cameron</Name>
      <Title>Terminator 2-Judgment Day</Title>
      <Title>Titanic</Title>
   </DVDTitles>
</Directors> 
```

问题是，当一位导演导演了两部电影或多部电影时，就像`James Cameron`导演了一样`Terminator 2-Judgment Day`，`Titanic`然后这两个标题都应该与发生正确的导演分组，但我得到了两次（见输出）。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:37:19.947

如果您的处理器支持 XQuery 3.0，您可能需要查看该`group by`语句，因为在我看来它非常优雅，并且还可以阅读更多您实际想要做的事情：处理每个 DVD 标题，按导演分组并输出一些信息.

```
let $doc := doc("DVDStore.xml")//DVDTitle
return <Directors>{
  for $title in $doc
  let $director := $title/Directors/Name
  group by $director
  return <DVDTitles><Name>{$director}</Name>{$title/Title}</DVDTitles>
} </Directors> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T03:44:30.100

我找到了解决方案。我错过了关键字 distinct-values。工作查询是；

```
let $doc := doc("DVDStore.xml")//DVDTitle
return <Directors>{
    for $dir in distinct-values($doc/Directors/Name)
        let $t := $doc[$dir = Directors/Name]/Title
        return <DVDTitles> {$dir} {$t} </DVDTitles>
    } </Directors> 
```

# ios - 使用 NSLayoutConstraints 均匀间隔任意数量元素的几行

> ID：16205409
> 
> 赞同：2
> 
> 时间：2013-04-25T02:26:38.537
> 
> 标签：ios, objective-c, autolayout, nslayoutconstraint

我有一个关于在以下场景中使用布局约束的问题。一切都在代码中（没有笔尖或故事板）。我想创建一个包含任意数量的项目行的视图。每行包含任意数量的子视图。

为了创建这个视图，我想传入一个深度为两层的数组。第一级数组包含每一行。第二级数组包含每一行中的元素。因此，例如，这可能如下所示：

`NSArray *elements = @[@[subview1, subview2, subview3], @[subview4], @[subview5, subview6]]`

在这个数组中，将有 3 行：

1) 第 1 行：subview1、subview2、subview3
2) 第 2 行：subview4
3) 第 3 行：subview5、subview6

我希望将这些元素格式化为：

- 行都应该是它们父视图的全宽（为此我们可以假设它是屏幕的大小）
- 一行中的每个元素应该是相同的宽度并且它们之间具有相同的空间量（比如如果有 4 个元素，则 1&2 和 2&3 之间的空间可能是 10pt）
- 每行之间应该有相同数量的垂直空间（例如，每行之间的垂直空间为 10pt）

在上面的场景中，第 1 行将有 3 个等宽等间距的子视图，第 2 行将有 1 个占据行全宽度的子视图，第 3 行将有 2 个等宽且等间距的子视图分开。

所以，问题是，我该怎么做？！

我已经为此工作了一段时间，但我的理解似乎并没有变得更好。帮助将不胜感激！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T06:37:20.353

我认为这样的事情应该有效。我试着做一般，所以它应该适用于不同数量的行和每行的元素。

```
#define subviewHeight 44
#define spaceFromTop 10
#define spaceFromSide 10
#define subviewVerticalSpacing 10
#define subviewHorizontalSpacing 10

@implementation ViewController

- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];

    UIButton *subview1 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [subview1 setTitle:@"View 1" forState:UIControlStateNormal];
    UIButton *subview2 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [subview2 setTitle:@"View 2" forState:UIControlStateNormal];
    UIButton *subview3 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [subview3 setTitle:@"View 3" forState:UIControlStateNormal];
    UIButton *subview4 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [subview4 setTitle:@"View 4" forState:UIControlStateNormal];
    UIButton *subview5 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [subview5 setTitle:@"View 5" forState:UIControlStateNormal];
    UIButton *subview6 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [subview6 setTitle:@"View 6" forState:UIControlStateNormal];

    NSArray *arrayOfSubviews = @[@[subview1, subview2, subview3], @[subview4], @[subview5, subview6]];

    [self addSubviewsWithConstraints:arrayOfSubviews];

}

-(void)addSubviewsWithConstraints:(NSArray *) arrayOfArrays {
    NSMutableArray *arrayOfViewsDicts = [NSMutableArray array]; // make the views dictionaries needed for the views parameter of constraintsWithVisualFormat:options:metrics:views:. One for each row.

    for (NSArray *array in arrayOfArrays) {
        NSMutableDictionary *dict = [NSMutableDictionary dictionary];
        for (int i = 0; i < array.count; i++) {
            [dict setObject:array[i] forKey:[NSString stringWithFormat:@"view%d",i]];
        }
        [arrayOfViewsDicts addObject:dict];
    }

    for (int i=0; i<arrayOfArrays.count; i++) {
        NSString *formatString = [self makeConstraintsForRowOfSubviews:arrayOfArrays[i] withViewsDict:arrayOfViewsDicts[i]]; // Make the format string for a row of subviews

        for (id subview in arrayOfArrays[i]) {
            [subview setTranslatesAutoresizingMaskIntoConstraints:NO];
            [self.view addSubview:subview];
            NSLayoutConstraint *heightCon = [NSLayoutConstraint constraintWithItem:subview attribute:NSLayoutAttributeHeight relatedBy:0 toItem:nil attribute:NSLayoutAttributeNotAnAttribute multiplier:1 constant:subviewHeight];
            [subview addConstraint:heightCon];

            NSLayoutConstraint *verticalCon = [NSLayoutConstraint constraintWithItem:subview attribute:NSLayoutAttributeTop relatedBy:0 toItem:self.view attribute:NSLayoutAttributeTop multiplier:1 constant:spaceFromTop + ((subviewHeight + subviewVerticalSpacing)*i)];
            [self.view addConstraint:verticalCon];
        }
        NSArray *cons = [NSLayoutConstraint constraintsWithVisualFormat:formatString options:NSLayoutFormatAlignAllBottom metrics:nil views:arrayOfViewsDicts[i]];

        [self.view addConstraints:cons];
    }
}

-(NSString *) makeConstraintsForRowOfSubviews:(NSArray *) arrayOfSubviews withViewsDict:(NSDictionary *) viewsDict {
    NSMutableString *formatString = [NSMutableString string];

    for (int i = 0; i<arrayOfSubviews.count; i++) {
        if (i == 0) {
            [formatString appendFormat:@"|-%d-[%@]",spaceFromSide,[viewsDict allKeysForObject:arrayOfSubviews[i]][0]];
        }else{
            [formatString appendFormat:@"-%d-[%@(==view0)]",subviewHorizontalSpacing,[viewsDict allKeysForObject:arrayOfSubviews[i]][0]];
        }
    }

    [formatString appendFormat:@"-%d-|",spaceFromSide];
    return formatString;
} 
```

这段代码产生了这个结果：

![在此处输入图像描述](https://i.stack.imgur.com/lOnbl.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T05:01:05.347

您*可以*使用自动布局来做到这一点，但我认为如果您只是将 a`UICollectionView`与您自己的自定义`UICollectionViewLayout`子类一起使用，您的代码实际上会更容易理解。

如果您真的想使用自动布局来做到这一点，我认为您应该通过引入中间级别的“行”视图来使您的视图层次结构与您的数组层次结构相匹配：

```
gridView
├─ rowView0
│  ├─ subview1
│  ├─ subview2
│  └─ subview3
├─ rowView1
│  └─ subview4
└─ rowView2
   ├─ subview5
   └─ subview6 
```

现在您可以像这样对行设置约束：

```
// These constraints force the rows to collectively fill gridView:
rowView0.top = gridView.top
rowView1.top = rowView0.bottom + 10
rowView2.top = rowView1.bottom + 10
gridView.bottom = rowView2.bottom

// These constraints force the rows to have equal heights:
rowView1.height = rowView0.height
rowView2.height = rowView0.height

// These constraints force the rows to each be the width of gridView:
rowView0.leading = gridView.leading
rowView0.trailing = gridView.trailing
rowView1.leading = gridView.leading
rowView1.trailing = gridView.trailing
rowView2.leading = gridView.leading
rowView2.trailing = gridView.trailing 
```

这些约束应该是必要的（即，不会过度约束）和充分的（即，不会模棱两可）。

然后，您可以对每一行应用相同的约束方案，交换 X 轴和 Y 轴。例如，您将在第 0 行中使用这些约束：

```
// These constraints collectively force the cells to fill rowView0:
subview1.leading = rowView0.leading
subview2.leading = subview1.trailing + 10
subview3.leading = subview2.trailing + 10
rowView0.trailing = subview3.trailing

// These constraints force the cells to have equal widths:
subview2.width = subview1.width
subview3.width = subview1.width

// These constraints force the cells to each be the height of rowView0:
subview1.height = rowView0.height
subview2.height = rowView0.height
subview3.height = rowView0.height 
```

# android - 返回空结果？

> ID：16205415
> 
> 赞同：0
> 
> 时间：2013-04-25T02:27:32.793
> 
> 标签：android

我创建了一个将美元转换为欧元的应用程序，要求在没有输入任何内容时，它不会出现结果。我这样编码：

```
case R.id.main_btn_convert:

        String input = mTvBaseCurrency.getText().toString();

        if (input.matches("")) {
            Toast.makeText(this, "Type the number!", Toast.LENGTH_SHORT).show();
            mTvBaseCurrency = null;

            Log.i("String", ",asdkns,adkjsahd ");
            break;
        }

        else {

            String url = currencyUtils.createUrl(strBase, strTarget, input);
            Log.i("String", "url= " + url);

            currencyUtils.handlerJson(url);

            String result = currencyUtils.getStringResult();
            Log.i("String ", "result" + result);

            mTvTargetCurrency.setText("" + result);
            break;
        } 
```

问题开始出现，第一次点击（没有输入数据），它确定，但是当第二次点击它有错误：强制关闭应用程序。这是我的 logcat [http://s17.postimg.org/6uaprjm5b/Untitled.png](http://s17.postimg.org/6uaprjm5b/Untitled.png) 请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T02:34:13.603

问题是你设置`mTvBaseCurrency`为 null 如果它通过了`matches("")`。只需删除以下行：

```
mTvBaseCurrency = null; 
```

# perl - Perl：我如何获得几个文件夹的创建日期和时间？

> ID：16205419
> 
> 赞同：0
> 
> 时间：2013-04-25T02:28:24.813
> 
> 标签：perl, directory

我实际上是 perl 的新手。
我想知道如何获取文件夹的创建日期和时间（或者可能超过 1 个）？
我在网上搜索过，只有修改时间出现。
有什么办法吗？
提前致谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T02:35:36.407

这取决于特定的文件系统类型。在 POSIX 系统上，创建日期通常不可用 - 您所能获得的只是内容修改、元数据修改和访问时间。某些系统，例如 Mac OS X 系统上的 HFS+ 文件系统，确实提供了创建日期，但由于它不是标准功能，因此没有标准 API 来获取它，您可能必须利用文件系统特定的优势，或至少特定于平台的代码。

# mathjax - pandoc和mathjax遇到一些问题

> ID：16205426
> 
> 赞同：5
> 
> 时间：2013-04-25T02:29:22.650
> 
> 标签：mathjax, pandoc, s5

我正在尝试使用 pandoc 从包含一些乳胶的降价文件中生成 html 幻灯片。

该文件[位于 github](https://raw.github.com/rcalsaverini/ThesisPresentation/master/apresentacao.md)。

如果我运行以下 pandoc 命令：

```
pandoc -s -t s5 --mathjax apresentacao.md -o index.html 
```

MathJax 完美地显示了数学，但我只得到一个包含所有幻灯片且没有幻灯片功能的网页。

如果我运行以下命令：

```
pandoc -s --self-contained -t s5 --mathjax apresentacao.md -o index.html 
```

我得到了一个完美的演示文稿，但 MathJax 无法加载。对于加载的图像和 javascript 库，生成的 html 文件中（令人难以置信地）充满了二进制文件。但它似乎未能正确合并 MathJax。

你们有这个问题吗？有什么简单的方法可以解决这个问题吗？

我正在使用以下 pandoc 版本：

```
$ pandoc --version
pandoc 1.11.1
Compiled with citeproc-hs 0.3.8, texmath 0.6.1.3, highlighting-kate 0.5.3.8.
Syntax highlighting is supported for the following languages:
    actionscript, ada, apache, asn1, asp, awk, bash, bibtex, boo, c, changelog,
    clojure, cmake, coffee, coldfusion, commonlisp, cpp, cs, css, curry, d,
    diff, djangotemplate, doxygen, doxygenlua, dtd, eiffel, email, erlang,
    fortran, fsharp, gnuassembler, go, haskell, haxe, html, ini, java, javadoc,
    javascript, json, jsp, julia, latex, lex, literatecurry, literatehaskell,
    lua, makefile, mandoc, matlab, maxima, metafont, mips, modula2, modula3,
    monobasic, nasm, noweb, objectivec, objectivecpp, ocaml, octave, pascal,
    perl, php, pike, postscript, prolog, python, r, relaxngcompact, rhtml, ruby,
    rust, scala, scheme, sci, sed, sgml, sql, sqlmysql, sqlpostgresql, tcl,
    texinfo, verilog, vhdl, xml, xorg, xslt, xul, yacc, yaml
Default user data directory: /home/calsaverini/.pandoc
Copyright (C) 2006-2013 John MacFarlane
Web:  http://johnmacfarlane.net/pandoc
This is free software; see the source for copying conditions.  There is no
warranty, not even for merchantability or fitness for a particular purpose. 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-25T05:49:24.023

这是一个[已知问题](https://github.com/jgm/pandoc/issues/682)： `--mathjax`不适用于`--self-contained`. 我还没有充分研究它以提出修复，但欢迎提出建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-05T17:41:03.393

我刚刚编写了一个 python 脚本来将 markdown 文件编译成一个独立的（需要互联网连接）html 文件，并支持 mathjax：

```
#!/usr/bin/env python
'''
pandoc_compile.py

Usage:
pandoc_compile.py markdown_file template_file
'''
import subprocess, re, sys, os

print("Compiling Markdown file: "+sys.argv[1])
print("Using template: "+sys.argv[2])
print("Output file: "+sys.argv[1]+".html")
pandoc_result = subprocess.Popen(['pandoc','--mathjax',sys.argv[1]], stdout=subprocess.PIPE).stdout.read()
with open(sys.argv[2]) as f: template = f.read()
final_result = re.sub('{{pandoc_output}}', pandoc_result, template)
with open(sys.argv[1]+".html", "w") as f: f.write(final_result) 
```

它使用 pandoc 编译 markdown，然后将结果放在下面的 html 模板中。

```
<html>

<head>
<script type="text/javascript"
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
</head>

<body>

{{pandoc_output}}

</body>
</html> 
```

# c# - Convert.ToBoolean 失败，值为“0”

> ID：16205436
> 
> 赞同：26
> 
> 时间：2013-04-25T02:30:49.153
> 
> 标签：c#, types, reference, value-type, type-conversion

我正在尝试将值`"0"`( `System.String`) 转换为其`Boolean`表示形式，例如：

```
var myValue = Convert.ToBoolean("0"); // throwing an exception here 
```

我查看了[MSDN page](http://msdn.microsoft.com/en-us/library/86hw82a3.aspx)，在代码示例块中，我发现了以下几行：

```
ConvertToBoolean("0");
// ...
Unable to convert '0' to a Boolean. 
```

在我的代码中，我从 转换`System.String`为`Boolean`：

```
// will be OK, but ugly code
var myValue = Convert.ToBoolean(Convert.ToInt32("0")); 
```

*   有没有其他方法可以转换为`Boolean`没有那么难看的代码的类型？
*   为什么会出现这样的异常？因为从引用类型转换`System.String`为值类型`System.Boolean`，但`System.Int32`也是值类型，不是吗？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-04-25T02:33:47.780

发生这种情况是因为`Convert.ToBoolean`预计会出现以下情况之一：

*   [`"True"`（字符串）](http://msdn.microsoft.com/en-us/library/system.boolean.truestring.aspx) =`true`
*   [`"False"`（字符串）](http://msdn.microsoft.com/en-us/library/system.boolean.falsestring.aspx) =`false`
*   `0`（数值类型；int、double、float 等）=`false`
*   任何非`0`（数字类型；...）=`true`
*   `null`=`false`

任何*其他*值都对 无效`Boolean`。

你**已经有了一个干净的**方法：

```
var myValue = Convert.ToBoolean(Convert.ToInt32("0")); 
```

* * *

**编辑：**您可以创建一个扩展方法来为您处理其中一些情况，同时隐藏处理转换的丑陋。

这个扩展提供了一个非常松散的解释`Boolean`：

*   `"True"`（字符串）=`true`
*   `"False"`（字符串）=`false`
*   `"0"`（字符串）=`false`
*   任何其他字符串 =`true`

代码：

```
public static class Extensions
{
    public static Boolean ToBoolean(this string str)
    {
        String cleanValue = (str ?? "").Trim();
        if (String.Equals(cleanValue, "False", StringComparison.OrdinalIgnoreCase))
            return false;
        return
            (String.Equals(cleanValue, "True", StringComparison.OrdinalIgnoreCase)) ||
            (cleanValue != "0");
    }
} 
```

* * *

或者，如果您想要一种更严格的方法，它遵循 .NET Framework 的预期；然后只需使用`try/catch`语句：

```
public static class Extensions
{
    public static Boolean ToBoolean(this string str)
    {
        try
        {
            return Convert.ToBoolean(str);
        }
        catch { }
        try
        {
            return Convert.ToBoolean(Convert.ToInt32(str));
        }
        catch { }
        return false;
    }
} 
```

尽管这不是一个*干净*或*漂亮*的方法，但它保证了获得正确值的更多可能性。而且，该`Extensions`课程远离您的数据/业务代码。

最后，您的转换代码使用起来相对简单：

```
String myString = "1";
Boolean myBoolean = myString.ToBoolean(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-25T02:34:52.850

```
public static class BooleanParser
{
    public static bool SafeParse(string value)
    {
        var s = (value ?? "").Trim().ToLower();
        return s == "true" || s == "1";
    }
} 
```

* * *

```
static readonly HashSet<string> _booleanTrueStrings = new HashSet<string> { "true", "yes", "1" };
static readonly HashSet<string> _booleanFalseStrings = new HashSet<string> { "false", "no", "0" };

public static bool ToBoolean(string value)
{
    var v = value?.ToLower()?.Trim() ?? "";
    if (_booleanTrueStrings.Contains(v)) return true;
    if (_booleanFalseStrings.Contains(v)) return false;
    throw new ArgumentException("Unexpected Boolean Format");
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-25T02:37:05.657

既然仍然进行这些转换等等，那么扩展方法怎么样？

```
public static class Extensions {
    public static bool ToBool(this string s) {
        return s == "0" ? false : true;
    }
} 
```

所以你会像这样使用它：

```
"0".ToBool(); 
```

现在，如果您愿意，您可以轻松扩展此方法以处理更多情况。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T02:37:05.937

要成功进行转换， value 参数必须等于[`Boolean.TrueString`](http://msdn.microsoft.com/en-us/library/system.boolean.truestring.aspx)、值为 的常量 、 、值为`True`的[`Boolean.FalseString`](http://msdn.microsoft.com/en-us/library/system.boolean.falsestring.aspx)常量`False`，或者它必须为 null。在将值与 Boolean.TrueString 和 Boolean.FalseString 进行比较时，该方法忽略大小写以及前导和尾随空格。

来自[MSDN](http://msdn.microsoft.com/en-us/library/86hw82a3.aspx)

因为[如果值不为零，则](http://msdn.microsoft.com/en-us/library/h0b8dwce.aspx)`Convert.ToBoolean`期望为真；[否则为假。](http://msdn.microsoft.com/en-us/library/h0b8dwce.aspx)数值和`True`或`False` `String`值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-25T02:40:36.700

如果您知道它将是一个 int，那么您可以将其转换为 int，然后再转换为 bool。以下将通过尝试字符串然后尝试数字来尝试转换为布尔值。

```
public bool ToBoolean(string value)
{
  var boolValue = false;
  if (bool.TryParse(value, out boolValue ))
  {
    return boolValue;
  }

  var number = 0;
  int.TryParse(value, out number))
  return Convert.ToBoolean(number);
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-06-21T10:01:13.003

足够快和简单：

```
public static class Extensions
{
        static private List<string> trueSet = new List<string> { "true","1","yes","y" };

        public static Boolean ToBoolean(this string str)
        {
            try
            { return trueSet.Contains(str.ToLower()); }
            catch { return false; }
        }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-11-03T18:14:56.480

这是一个非常宽容的解析器，它关闭了第一个字符：

```
public static class StringHelpers
{
    /// <summary>
    /// Convert string to boolean, in a forgiving way.
    /// </summary>
    /// <param name="stringVal">String that should either be "True", "False", "Yes", "No", "T", "F", "Y", "N", "1", "0"</param>
    /// <returns>If the trimmed string is any of the legal values that can be construed as "true", it returns true; False otherwise;</returns>
    public static bool ToBoolFuzzy(this string stringVal)
    {
        string normalizedString = (stringVal?.Trim() ?? "false").ToLowerInvariant();
        bool result = (normalizedString.StartsWith("y") 
            || normalizedString.StartsWith("t")
            || normalizedString.StartsWith("1"));
        return result;
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-03-18T10:37:27.433

```
 public static bool GetBoolValue(string featureKeyValue)
    {
        if (!string.IsNullOrEmpty(featureKeyValue))
        {
                    try 
                    {
                        bool value;
                        if (bool.TryParse(featureKeyValue, out value))
                        {
                            return value;
                        }
                        else
                        {
                            return Convert.ToBoolean(Convert.ToInt32(featureKeyValue));
                        }
                    }
                    catch
                    {
                        return false;
                    }
         }
         else
         {
                  return false;
         }
   } 
```

你可以这样称呼它-：

```
GetBoolValue("TRUE") // true
GetBoolValue("1") // true
GetBoolValue("") // false
GetBoolValue(null) // false
GetBoolValue("randomString") // false 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-07-18T10:14:33.110

为时已晚，但如果其他人也在寻找同样的东西，可以试试这个，它简短而容易

`return (string!= "0")`

# haskell - Haskell 管道和分支

> ID：16205440
> 
> 赞同：10
> 
> 时间：2013-04-25T02:31:16.467
> 
> 标签：haskell, haskell-pipes

# 问题

我正在尝试使用 Haskell 和 Pipes 库实现一个简单的 Web 服务器。我现在明白循环或菱形拓扑对于管道是不可能的，但是我认为我想要的是。因此，我想要的拓扑是：

```
 -GET--> handleGET >-> packRequest >-> socketWriteD
                                 |
socketReadS >-> parseRequest >-routeRequest
                                 |
                                 -POST-> handlePOST >-> packRequest >-> socketWriteD 
```

我有链中使用的类型`HTTPRequest RequestLine Headers Message`。从套接字获取字节并将它们转发给，后者使用 Attoparsec 将字节解析为对象。然后，我希望管道至少分支两次，并且可能更多，这取决于我实现了多少 HTTP 方法。每个函数都应该从上游接收对象并将对象转发到，这只是将 HTTPResponse 对象打包到准备好与 一起发送。`HTTPResponse StatusLine Headers Message``socketReadS``parseRequest``HTTPRequest``handle<method>``HTTPRequest``HTTPResponse``packRequest``ByteString``socketWriteS`

如果我让 GHC 推断类型，则以下代码类型检查`routeRequest'''`（我的似乎有点偏离）。但是，之后似乎没有任何执行`parseRequest`。谁能帮我弄清楚为什么？

## 代码

我有以下代码`routeRequest`应该处理分支。

```
routeRequest''' ::
    (Monad m, Proxy p1, Proxy p2, Proxy p3)
    => () -> Consumer p1 HTTPRequest (Pipe p2 HTTPRequest HTTPRequest (Pipe p3 HTTPRequest HTTPRequest m)) r
routeRequest''' () = runIdentityP . hoist (runIdentityP . hoist runIdentityP) $ forever $ do
    httpReq <- request ()
    let method = getMethod httpReq
    let (URI uri) = getURI httpReq
    case method of
      GET -> lift $ respond httpReq
      POST -> lift $ lift $ respond httpReq

routeRequest'' = runProxyK $ routeRequest''' <-< unitU
routeRequest' socket = runProxyK $ raiseK (p4 socket <-< handleGET) <-< routeRequest''
routeRequest socket = (p4 socket <-< handlePOST) <-< (routeRequest' socket) 
```

`handleGET`并`handlePOST`这样实现：

```
handleGET :: Proxy p => () -> p () HTTPRequest r ByteString IO r
handleGET () = runIdentityP $ do
    httpReq <- request ()
    let (URI uri) = getURI httpReq
    lift $ Prelude.putStrLn "GET"
    respond $ B.append (B.pack "GET ") uri

handlePOST :: Proxy p => () -> p () HTTPRequest r ByteString IO r
handlePOST () = runIdentityP $ do
    httpReq <- request ()
    let (URI uri) = getURI httpReq
    lift $ Prelude.putStrLn "POST"
    respond $ B.append (B.pack "POST ") uri 
```

我有以下代理的简写：

```
p1 socket = socketReadS 32 socket
p2 = parseRequestProxy 
p4 socket = socketWriteD socket 
```

最后，我像这样运行整个事情：

```
main = serveFork (Host "127.0.0.1") "8080" $
    \(socket, remoteAddr) -> do
        ret <- runProxy $ runEitherK $ p1 socket >-> printD >-> p2 >-> printD  >-> routeRequest socket 
        Prelude.putStrLn $ show ret 
```

的类型签名`parseRequestProxy`是这样的：

```
parseRequestProxy
  :: (Monad m, Proxy p) =>
     ()
     -> Pipe
          (EitherP Control.Proxy.Attoparsec.Types.BadInput p)
          ByteString
          HTTPRequest
          m
          r 
```

## 编辑

这是带有源代码的存储库。请注意，它没有经过修饰，因此使用风险自负。[https://bitbucket.org/Dwilson1234/haskell-web-server/overview](https://bitbucket.org/Dwilson1234/haskell-web-server/overview)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T03:53:58.130

当我最初说您无法处理菱形拓扑时，我错了。后来我发现了一种使用类似接口的明智方法，并以and组合子的形式`ArrowChoice`包含了解决方案。我将解释它是如何工作的：`pipes-3.2.0``leftD``rightD`

不是嵌套代理转换器，而是使用`Left`or包装结果`Right`

```
routeRequest ::
    (Monad m, Proxy p)
    => () -> Pipe p HTTPRequest (Either HTTPRequest HTTPRequest) m r
routeRequest () = runIdentityP $ forever $ do
    httpReq <- request ()
    let method = getMethod httpReq
    let (URI uri) = getURI httpReq
    respond $ case method of
      GET  -> Left  httpReq
      POST -> Right httpReq 
```

然后您可以有选择地将每个处理程序应用于每个分支，然后合并分支：

```
routeRequest >-> leftD handleGET >-> rightD handlePOST >-> mapD (either id id)
    :: (Monad m, Proxy p) => () -> Pipe p HTTPRequest ByteString IO r 
```

如果您有两个以上的分支，那么您将不得不嵌套`Either`s，但这只是`ArrowChoice`工作方式的限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T03:24:06.737

I have not run your code, but I think I spotted a problem.

```
routeRequest'' = runProxyK $ routeRequest''' <-< unitU 
```

`routeRequest'''` is requesting data from unitU which has nothing to supply, so it hangs.

```
:t runProxy $ unitU >-> printD 
```

Will type check but nothing runs.

It seems like the data is being sent to the wrong level of the monad transformer, data which is flowing into `routeRequest` should be flowing into `routeRequest'''`. The data flowing into the wrong level of the monad transformer is what is probably causing you to need to leave of the type signature to get everything to type check. With the type signature `routeRequest` is expecting a `()` coming from upstream and, I bet, with no type signature it is allowed to be polymorphic.

In your definition of `routeRequest` you could "close the pipe", I think that is what it is called, by using unitD which would disallow your construction even when `routeRequest'''` does not have the type signature.

# java - 哈希表中的并发性和故障安全行为

> ID：16205443
> 
> 赞同：1
> 
> 时间：2013-04-25T02:32:04.297
> 
> 标签：java, concurrency, thread-safety, hashtable

我正在阅读有关 Hashtables 的内容，这个问题让我印象深刻。哈希表是同步的，那么哈希表上的迭代器是否安全？

此外，对于故障安全集合，当多个线程尝试访问一个集合时，您不会收到 ConcurrentModificationException，因为每个线程都在处理它自己的副本。我想知道这是否意味着在内存中为每个线程创建了 Collection 的实际物理副本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T02:42:50.613

嗯...如果“故障安全”是指您无法获得 a `ConcurrentModificationException`，那么答案是否定的。您*可以*`Hashtable`在 a 上使用 a 时获得该异常`Iterator`。[javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/Hashtable.html)明确说明了这一点。

* * *

> 此外，对于故障安全集合，当多个线程尝试访问一个集合时，您不会收到 ConcurrentModificationException，因为每个线程都在处理它自己的副本。

（您似乎从某个地方引用或总结了这一点。无论如何，我认为它不准确。）

> 我想知道这是否意味着在内存中为每个线程创建了 Collection 的实际物理副本？

在某些情况下，迭代器正在处理一个不会被修改的副本。在其他情况下，迭代器正在处理一些*可以*修改和/或根本不代表集合的一致快照的东西。这实际上取决于如何为*您正在谈论的特定集合类*指定“故障安全”行为。（关于集合类的好处之一是它们清楚地指定了您可以依赖和不能依赖的内容。您只需要*仔细*阅读规范以确保您真正理解它们！！）

* * *

> 哦，所以 Hashtable 中的迭代器是故障快速的，但枚举器是故障安全的。

第一部分是正确的。第二个是不正确的。

不保证`Enumeration`返回的对象是故障安全的。[javadocs](http://docs.oracle.com/javase/7/docs/api/java/util/Hashtable.html)`Hashtable`的状态是它们不是快速失败的。*未指定*修改 a并同时枚举它时实际发生的情况。（如果您真的想知道，请查看您正在使用的特定 Java 版本的源代码。）`Enumeration``Hashtable`

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T02:43:36.867

实时调频：

> 由此类的所有“集合视图方法”返回的集合的迭代器方法返回的迭代器是快速失败的：如果在创建迭代器后的任何时间对 Hashtable 进行结构修改，除了通过迭代器自己的删除之外的任何方式方法，迭代器将抛出 ConcurrentModificationException。因此，面对并发修改，迭代器快速而干净地失败，而不是在未来不确定的时间冒任意的、非确定性的行为。Hashtable 的键和元素方法返回的枚举不是快速失败的。
> 
> 请注意，不能保证迭代器的快速失败行为，因为一般来说，在存在不同步的并发修改的情况下，不可能做出任何硬保证。快速失败的迭代器会尽最大努力抛出 ConcurrentModificationException。因此，编写一个依赖于这个异常的正确性的程序是错误的：迭代器的快速失败行为应该只用于检测错误。

换句话说，对 a 的迭代`Hashtable`并不比对 unsynchronized 的迭代更安全`HashMap`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-18T18:46:36.797

```
Hashtable<String, Integer> hashtable = new Hashtable<>();
Integer a = hashtable.put("a", 1);
Integer a1 = hashtable.put("b", 2);
Integer a3 = hashtable.put("c", 3);
Iterator<Map.Entry<String, Integer>> iterator = hashtable.entrySet().iterator();
while(iterator.hasNext()){
        hashtable.put("d",4);
        iterator.next();
    } 
```

1.  Hashtable 不是并发的，它是同步的。
2.  Hashtable 是快速失败的，如果您在不使用迭代器的情况下添加或删除一个元素时迭代 Hashtable，那么您将得到 ConcurrentModificationException。*

# jquery - 如何找到具有选定用户值的组合框

> ID：16205445
> 
> 赞同：-1
> 
> 时间：2013-04-25T02:32:20.627
> 
> 标签：jquery

我确实有 5 个同级别的组合。

我想找出其中哪个组合框选择了值 5

我的尝试：

```
$(document).ready(function($){
    previous = 0;
    $('.check').focus(function () {
        // Store the current value on focus and on change
        previous = this.value;
    }).change(function() {
        // Do something with the previous value after the change
        //change previous container with value
        newVal = this.value; 
        //alert(previous);
        console.log('Old Val: ' + previous + '- new val:' + newVal);
        $lst = $('.ranking option[value=' + newVal + ']:selected');
        console.log('one ' + $lst.length);

        // Make sure the previous value is updated
        previous = this.value;
    });

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T02:48:12.070

jQuery 可以很容易地根据元素的值、名称等过滤掉元素

```
$('.check').filter(function(){
  return $(this).find('option:selected').val() == 5;
}) 
```

上面的函数将只返回选择值为 5 的元素。

这是小提琴[http://jsfiddle.net/N2bya/](http://jsfiddle.net/N2bya/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T02:57:09.060

嗨，您可以检查我的[jsFiddle](http://jsfiddle.net/KevinIsNowOnline/NQ73T/)是否包含您需要的所有代码。

这是整个代码的片段：

```
$('select').change(function (){   //trigger for the change event of the comboboxes

    var selectedIndex = $(this).prop("selectedIndex");
    if(selectedIndex === 4) { //basically the 5th item as it is zero indexed
        alert('you have chosen the fifth item');
    }
});

$('#checker').click(function (){   //for checking of all items with item number 5 selected
   indexChecker(); 
});

var indexChecker = function (){
    var controlList =[];
    $('select').each(function (){
        if($(this).prop("selectedIndex") === 4){
            controlList.push($(this).attr('id'));

        }
    });
    alert('You have selected the fifth element in <select> element with id of : '+ controlList);
}; 
```

# magento - Magento 共享用户会话适用于除 Safari 以外的所有浏览器

> ID：16205448
> 
> 赞同：2
> 
> 时间：2013-04-25T02:33:05.350
> 
> 标签：magento, safari

再会。

我有一个运行 2 个网站的多网站/商店 Magento 安装，并且想知道如何让 Magento 的共享会话/购物车在 Safari 中同一商店的不同网站之间工作。

**Magento 如何处理会话的简介**

当从一个购物车共享网站切换到另一个时，magento 会将 SID（会话 ID）附加到登录页面的 URL。从该页面导航后，会话仍应被记住，但由于不再需要而从地址栏中删除。

共享会话 URL 示例 从 www.website1.com 传输将导致 www.website2.com/?SID=[encrypted key] 类型的 URL 仅用于登录页面。

**问题**

从 www.website1.com 切换到 www.website2.com 时，会话 ID 在 Safari 中丢失。换句话说，SID 出现在登录页面的地址栏上，但实际上并未加载/保存会话。购物车中没有商品，如果用户在 website1 上登录，则用户将被注销。

Safari 版本是 5.2.1，在 Windows 7 上。移动 Android 手机与 Safari 完全相同，运行 Dolphin 9.3.2。

会话传输在 2013 年 4 月的最新浏览器中完美运行：Windows 7 上的 Chrome、IE 和 FireFox 浏览器。

如果我手动将 SID 添加到地址栏中并刷新，我会得到会话。

**迄今为止研究的解决方案**

[http://www.magentocommerce.com/boards/viewthread/17924/](http://www.magentocommerce.com/boards/viewthread/17924/)

[http://www.magentocommerce.com/boards/viewthread/36473/](http://www.magentocommerce.com/boards/viewthread/36473/)

（无法发布更多链接，但我也已阅读线程 60749）

**迄今为止尝试的解决方案没有效果**

*   关闭 Persistent Cart（测试后撤消）
*   从数据库中删除重复的电子邮件地址
*   将“共享客户帐户”设置为全局
*   将“Cookie 域”设置为 [website1].com 或 [website2].com（测试后撤消）
*   关闭“在前端使用安全 URL”（测试后撤消）
*   为 cookie 关闭“仅 HTTP”（测试后取消）
*   关闭 OneStepCheckout，购物车仍然不能仅在 Safari 中传输（测试后撤消）
*   将 Unsecure url 设置为“https”（测试后撤消）
*   清除缓存和会话文件
*   清除 Magento 和系统缓存
*   重新启动 Apache
*   重新同步服务器时间
*   打开“验证 HTTP_USER_AGENT”（测试后取消）
*   将会话 ID 强制设置为从 [website1] 传递的任何内容，导致错误（测试后撤消）
*   登录和注销时测试，相同的错误结果。已登录的用户已注销

任何帮助将不胜感激。

# c++ - 链接两个目标文件时，#ifndef 是否会阻止定义函数两次？

> ID：16205449
> 
> 赞同：2
> 
> 时间：2013-04-25T02:33:13.460
> 
> 标签：c++, linker, object-files

我有两个类实现（`.cpp files`）

他们都需要一个在`header`(.h) 文件中实现的函数。这两个 .cpp 文件都包含 .h 文件。编译后，这两个`.cpp`文件就变成了两个`.o`文件。

链接两个目标文件时是否定义了两次函数？

能`#ifndef`防止这种情况吗？

我用过`#ifndef`，但收到以下消息，

```
ld: 1 duplicate symbol for architecture x86_64 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T02:38:47.577

您必须了解函数*声明*（具有给定名称和签名的函数存在的声明）和函数*定义*（确定函数实际执行的代码）之间的区别。

如果你在头文件中*定义*函数，那么函数将在每个目标文件中定义，当你尝试将它们链接在一起时会发生冲突；`#ifndef`不会解决这个问题。

*如果你在头文件中声明*函数，并在源文件中*定义*它（必须编译成对象，并与使用它的对象链接），就不会有这样的问题。在这种简单的情况下，`#ifndef`不需要。

例如，函数`foo`可以声明在`foo.h`：

```
int foo(int); 
```

并定义在`foo.cpp`：

```
int foo(int n)
{
  return(n+3);
} 
```

`#ifndef`宏解决了一个不同的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T03:15:51.580

作为 Beta 答案的替代方案，您可以使用关键字在头文件中*定义*一个自由函数，该函数将包含在多个翻译单元中。`inline`考虑一下：

```
// Foo.h

int foo(){return 1;}

// UsesFoo1.cpp

#include "Foo.h"
int usesFoo2(){return foo();}

// UsesFoo2.cpp

#include "Foo.h"
int usesFoo1(){return foo();}

// Main.cpp

#include <iostream>
int usesFoo1();
int usesFoo2();

int main()
{
   std::cout << usesFoo1() + usesFoo2() << std::endl;
} 
```

这会产生链接器错误，因为`int foo()`它是在两个单独的翻译单元中定义的。但是，如果您在`inline`此处添加关键字，则不会产生错误：

```
// Foo.h

inline int foo(){return 1;} 
```

注意：在类定义中定义的函数隐含了`inline`关键字，因此您可以在此处省略它。

# c# - wp8：用键盘截图

> ID：16205450
> 
> 赞同：1
> 
> 时间：2013-04-25T02:33:37.237
> 
> 标签：c#, silverlight, windows-phone-8, screenshot

我有一个项目，其中包括 wp8 内容的根视图的屏幕截图。但是，如果有人单击编辑文本并打开虚拟键盘，我无法在我的图片中获得此键盘视图。我的意思是 wp8 内容的根视图不包含虚拟键盘。

我想要它在 wp8 中。

我使用[这个分支的例子](http://www.markarteaga.com/screen-capture-on-windows-phone-7/)

如何进行按键模拟

感谢您从现在开始的回复

# linux - 如何在linux中将net-snmp默认端口更改为小于1024的1？

> ID：16205453
> 
> 赞同：0
> 
> 时间：2013-04-25T02:33:47.213
> 
> 标签：linux, port, net-snmp

每个人！在 Red Hat Server Linux 中，我通过在 snmpd.conf 文件中添加“agentaddress 165”将 Net-SNMP 默认端口（161）更改为 165，但它不起作用。服务 snmpd 启动失败。有人知道原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T08:50:13.083

1.  关闭 SELinux。

2.  在配置文件 /etc/snmpd.conf 中添加“代理地址 XXX（端口）”。

3.  service snmpd restart，查看snmp的运行状态。

# javascript - 每当 Caps Lock 键打开时，如何创建从焦点文本框中弹出的工具提示？

> ID：16205455
> 
> 赞同：2
> 
> 时间：2013-04-25T02:33:48.007
> 
> 标签：javascript, jquery, html

我有一个基于 Web 的登录表单，如果他们的 Caps Lock 键已打开，我想通知用户，尤其是在他们输入密码时。我怎样才能做到这一点？

类似的东西：用户输入用户名，然后专注于密码，然后如果大写锁定键打开，工具提示或弹出窗口会显示告诉用户大写键已打开

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T03:05:41.327

试试这个插件，你可以在文本框中或直接在整个窗口中监控大写锁定状态：[https ://github.com/nosilleg/capslockstate-jquery-plugin](https://github.com/nosilleg/capslockstate-jquery-plugin)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T02:49:51.233

您可以使用 jQuery 执行以下操作

```
var CAPS_LOCK = 17; //Constant for caps lock key value

$('#myPasswordField').keypress(function(e) { 
    var keyCode = e.keyCode ? e.keyCode : e.which;
    if ( keyCode === CAPS_LOCK ) {
        alert('Caps lock pressed');
    }
}); 
```

有关键值的详细信息：有关键值，请参阅[http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00000520.html](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00000520.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T03:21:13.373

目前没有针对键事件的标准，并且似乎没有指示大写锁定键状态的事件属性，尽管将来可能会提供。

测试大写锁定的唯一合理可靠的方法似乎是查看键代码是否是大写字母并且没有按下 shift 键，例如

```
function capsLockOn(e) {
  var code = e.keyCode || w.which;

  if (code >64 && code < 97 && !e.shiftKey) {
    return true;
  }
  return false;
} 
```

在某些键盘上，大写锁定仅影响 a 到 z 键，因此您无法可靠地测试其他键盘。按下大写锁定键不会启动键事件并且无论如何都不会可靠地工作，因为大写锁定可能在有机会启动事件之前打开。

或者，如果您喜欢简洁：

```
function capsLockOn(e) {
  var code = e.keyCode || w.which;
  return code > 64 && code < 97 && !e.shiftKey || void 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T03:38:08.473

除了 JQuery，您还需要添加[Twitter 的 Bootstrap](http://twitter.github.io/bootstrap/index.html)以启用某些效果。这是您的工作代码。

## html

```
<link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet">
<script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script>

<input type="password" id="myPasswordField" name="myPasswordField" data-content="Caps Lock is on!"></input> 
```

## Javascript

```
$('#myPasswordField').keypress(function (e) {
    var s = String.fromCharCode(e.which);
    if (s.toUpperCase() === s && s.toLowerCase() !== s && !e.shiftKey) {
        $this = $(this);
        $this.popover('show').click(function (e) {
            $this.popover('hide');
            e.preventDefault();
        });

    }
}); 
```

# ruby-on-rails - Rails link_to 用 remote=>true 阻塞？

> ID：16205457
> 
> 赞同：3
> 
> 时间：2013-04-25T02:33:54.570
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试将我的`link_to`标签转换为`link_to do`块，如此[处](http://apidock.com/rails/ActionView/Helpers/UrlHelper/link_to)所述。我不确定 :remote=>true 选项应该放在哪里。

原来的：

```
<%= link_to "Title", {:controller => "users", :action => "edit", :id => u.id }, :remote => true %> 
```

到目前为止，这适用于该`link_to do`块，但我不知道在哪里放置：remote=>true。它在选项块或 html_options 中都不起作用。

```
<%= link_to (options = {:controller => "users", :action => "edit", :id => u.id}) do %>
     Link contents
<% end %> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T02:43:07.037

没有测试，但我认为正确的方法是

```
<%= link_to (url_for({:controller => "users", :action => "edit", :id => u.id}), :remote => true) do %>
     Link contents
<% end %> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T03:26:44.847

知道了！正确的语法是

```
<%= link_to (url_for({:controller => "users", :action => "edit", :id => u.id})), :remote => true do %>
     Link contents
<% end %> 
```

谢谢。

# javascript - Javascript 代码中的错误

> ID：16205460
> 
> 赞同：0
> 
> 时间：2013-04-25T02:34:11.517
> 
> 标签：javascript, html

```
 if(e.target.id == "cited"){
        alert(e.target.innerHTML);
        if (document.getElementById(e.target.id).innerHTML == "[1]") {
            display = "sometext1";  
        }
        else if (document.getElementById(e.target.id).innerHTML == "[2]") {
            display = "sometext2";
        }
        else if (document.getElementById(e.target.id).innerHTML == "[3]") {
            display = "sometext3";
        } 
```

好吧，当我将鼠标悬停在我的 [3] 上时，它会显示“sometext2”，而它应该显示“sometext3”。[2] 和 [3] 在同一页上。我确实添加了一个快速调试，以查看它是否通过执行以下操作获取错误的 innerHTML：

```
alert(e.target.innerHTML); 
```

当我将鼠标悬停在警报消息中时，它会显示正确的，但我不知道为什么它显示错误的工具提示。这里有什么帮助吗？

```
 document.onmousemove = function(e)
{
    // e.target, e.srcElement and e.toElement contains the element clicked.
    var x = e.pageX;
    var y = e.pageY;
    var display;
    if(e.target.id == "cited"){
    //  alert(e.target.innerHTML);
        if (document.getElementById(e.target.id).innerHTML == "[1]") {
            display = "sometext1";  
        }
        else if (document.getElementById(e.target.id).innerHTML == "[2]") {
            display = "sometext2";
        }
        else if (document.getElementById(e.target.id).innerHTML == "[3]") {
            display = "sometext3";
        }
        document.getElementById("toolTip").style.top = y-50+"px";
        document.getElementById("toolTip").style.left = x+"px";
        document.getElementById("toolTip").style.visibility = "visible";
        document.getElementById("toolTip").innerHTML = "<p>"+display+"</p>";
    }
    else {
        document.getElementById("toolTip").style.visibility = "hidden"; 
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T02:38:44.647

一个问题似乎是您在同一页面上有多个具有相同 ID 的元素。从您的代码中，您似乎至少有三个带有 id 的元素`cited`。

如果要引用多个元素，则应使用类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T03:01:51.413

修复它的坏方法：

```
document.onmousemove = function (e) {
    var x = e.pageX;
    var y = e.pageY;
    var display;

    if (e.target.id == "cited") {
        if (e.target.innerHTML == "[1]") {
            display = "sometext1";
        } else if (e.target.innerHTML == "[2]") {
            display = "sometext2";
        } else if (e.target.innerHTML == "[3]") {
            display = "sometext3";
        }

        document.getElementById("toolTip").style.top = y - 50 + "px";
        document.getElementById("toolTip").style.left = x + "px";
        document.getElementById("toolTip").style.visibility = "visible";
        document.getElementById("toolTip").innerHTML = "<p>" + display + "</p>";
    } else {
        document.getElementById("toolTip").style.visibility = "hidden";
    }
} 
```

更好的方法是将事件监听器添加到所有元素并将它们`id`的 s 更改为`class`es，但这会变得笨拙，所以这里有一个 jQuery 解决方案：

```
$('.cited').mousemove(function(e) {
    $('#tooltip').css({
        top: e.pageY - 50 + 'px',
        left: e.pageX + 'px',
        text: $(this).data('tooltip')
    });
}).mouseleave(function() {
    $('#tooltip').hide();
}).mouseenter(function() {
    $('#tooltip').show();
}); 
```

您可以将 HTML 更改为：

```
<span class="cited" data-tooltip="This is the tooltip text">Foo</span>
<span class="cited" data-tooltip="This is the tooltip text">Bar</span> 
```

# mongodb - 在 MongoDB 中使用数据库与集合

> ID：16205464
> 
> 赞同：1
> 
> 时间：2013-04-25T02:34:40.083
> 
> 标签：mongodb, database-design, architecture, database

我正在与有讨论和撰写博客的用户建立一个站点，并计划使用 MongoDB 作为该站点的数据库。哪种架构选项会更有效并允许它们之间更轻松的数据流：

1.  一个包含博客集合、讨论集合和用户活动集合的数据库？每个集合都会被适当地分片。

2.  博客数据库、讨论数据库和用户活动数据库？每个数据库都将被分解为集合并根据需要进行分片。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T04:03:05.047

将所有内容放入单个数据库或多个数据库中不会有很大的不同，直到您发现您需要做一些在数据库级别处理的事情，例如访问控制，或将数据库文件放在单独的物理设备上（以减少 I/O 争用）。

此外，当前锁定粒度是在数据库级别上，因此如果您碰巧有大量的小写操作让它们进入不同的数据库，这意味着它们不会争用同一个锁。由于您预计分片，您还可以将每个数据库放在不同的分片上，这可能允许您推迟实际需要对任何特定集合进行分片，因为每个分片只会处理该数据库集合的流量。

我会说，如果您有疑问，请继续将它们放在单独的数据库中，这不太可能造成伤害并且可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T02:46:05.177

Mongo 可以，但根据您的经验，熟悉它可能需要一些时间。

如果您使用 MySQL（或其他 SQL 数据库），您可能会更轻松。您可能应该为您的博客、讨论和活动创建单独的表，而不是多个数据库。

另一个需要考虑的因素是数据库的大小。SQL 数据库适用于大多数应用程序，即使是相当大的应用程序。MongoDB（和其他 NoSQL 数据库）非常适合扩展大数据。

希望这可以帮助！

# multithreading - delphi中的多线程队列？

> ID：16205470
> 
> 赞同：0
> 
> 时间：2013-04-25T02:35:29.300
> 
> 标签：multithreading, delphi, queue

这是我的第二个问题，我对此有一些麻烦>。<

好吧，我只想创建有限数量的线程（在这种情况下，我想要 10 个线程），然后每个线程将在我的列表中选择一个名称并在我的站点中获取一些数据。

我的系统运行良好，但我的多线程系统仍然失败 =(

--

我尝试了LU RD发布的代码，但是主线程不等待线程完成队列，而是停止=（

编码：

```
uses
Classes,SyncObjs,Generics.Collections;

Type
TMyConsumerItem = class(TThread)
private
 FQueue : TThreadedQueue<TProc>;
 FSignal : TCountDownEvent;
protected
 procedure Execute; override;
public
 constructor Create( aQueue : TThreadedQueue<TProc>; aSignal : TCountdownEvent);
end;

constructor TMyConsumerItem.Create(aQueue: TThreadedQueue<TProc>; aSignal : TCountDownEvent);
begin
 Inherited Create(false);
 Self.FreeOnTerminate := true;
 FQueue := aQueue;
 FSignal := aSignal;
end;

procedure TMyConsumerItem.Execute;
var
aProc : TProc;
begin
 try
 repeat
  FQueue.PopItem(aProc);
  if not Assigned(aProc) then
   break; // Drop this thread
  aProc();
 until Terminated;
 finally
  FSignal.Signal;
 end;
end;

procedure DoSomeJob(myListItems : TStringList);
const
 cThreadCount = 10;
 cMyQueueDepth = 100;
var
i : Integer;
aQueue : TThreadedQueue<TProc>;
aCounter : TCountDownEvent;
function CaptureJob( const aString : string) : TProc;
begin
 Result :=
  procedure
  begin
    // Do some job with aString
  end;
end;
begin
aQueue := TThreadedQueue<TProc>.Create(cMyQueueDepth);
aCounter := TCountDownEvent.Create(cThreadCount);
try
 for i := 1 to cThreadCount do
  TMyConsumerItem.Create(aQueue,aCounter);
 for i := 0 to myListItems.Count-1 do begin
  aQueue.PushItem( CaptureJob( myListItems[i]));
 end;
finally
 for i := 1 to cThreadCount do
  aQueue.PushItem(nil);
 aCounter.WaitFor;  // Wait for threads to finish
 aCounter.Free;
 aQueue.Free;
end;
end; 
```

我的另一个问题：[多线程德尔福](https://stackoverflow.com/questions/15622261/multi-thread-delphi)

我正在使用德尔福 XE3。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T16:48:27.750

*   首先，如果你想`DoSomeJob()`从主线程调用过程并阻塞直到准备好，有一个警告。`aCounter.WaitFor`如果您的工作线程正在与主线程同步，则and会出现死锁情况`TThread.Synchronize()`。

我假设这是发生在你身上的事情，在这里猜测。

正如我将在这个答案中展示的那样，有一种方法可以解决这个问题。

*   其次，通常工作线程应该由线程池处理，以避免一直创建/销毁线程。将您的工作传递给线程池，因此一切都在线程内运行并等待。这样可以避免阻塞主线程。我会把这个留给你。一旦编写了该框架，线程将更容易。如果这看起来很复杂，请尝试`OTL`使用线程框架。

`DoSomeJob()`这是一个主线程可以以安全方式等待的示例。创建一个匿名线程来等待`aCounter`to 信号。此示例使用 a`TMemo`和 a `TButton`。只需使用这些组件创建一个表单并将按钮`OnClick`事件连接到该`ButtonClick`方法。

```
unit Unit1;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants,
  System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls;

type
  TForm1 = class(TForm)
    Button1: TButton;
    Memo1: TMemo;
    procedure Button1Click(Sender: TObject);
  private
    { Private declarations }
    procedure DoSomeJob( myListItems : TStringList);
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

uses
  SyncObjs, Generics.Collections;

{- Include TMyConsumerItem class here }

procedure TForm1.Button1Click(Sender: TObject);
var
  aList : TStringList;
  i : Integer;
begin
  aList := TStringList.Create;
  Screen.Cursor := crHourGlass;
  try
    for i := 1 to 20 do aList.Add(IntToStr(i));
    DoSomeJob(aList);
  finally
    aList.Free;
    Screen.Cursor := crDefault;
  end;
end;

procedure TForm1.DoSomeJob(myListItems: TStringList);
const
  cThreadCount = 10;
  cMyQueueDepth = 100;
var
  i: Integer;
  aQueue: TThreadedQueue<TProc>;
  aCounter: TCountDownEvent;

  function CaptureJob(const aString: string): TProc;
  begin
    Result :=
      procedure
      var
        i,j : Integer;
      begin
        // Do some job with aString
        for i := 0 to 1000000 do
          j := i;
        // Report status to main thread
        TThread.Synchronize(nil,
          procedure
          begin
            Memo1.Lines.Add('Job with:'+aString+' done.');
          end
        );

      end;
  end;
var
  aThread : TThread;
begin
  aQueue := TThreadedQueue<TProc>.Create(cMyQueueDepth);
  aCounter := TCountDownEvent.Create(cThreadCount);
  try
    for i := 1 to cThreadCount do
      TMyConsumerItem.Create(aQueue, aCounter);
    for i := 0 to myListItems.Count - 1 do
    begin
      aQueue.PushItem(CaptureJob(myListItems[i]));
    end;
    // Kill the worker threads
    for i := 1 to cThreadCount do
      aQueue.PushItem(nil);
  finally
    // Since the worker threads synchronizes with the main thread,
    // we must wait for them in another thread.
    aThread := TThread.CreateAnonymousThread(
      procedure
      begin
        aCounter.WaitFor; // Wait for threads to finish
        aCounter.Free;
        aQueue.Free;
      end
    );
    aThread.FreeOnTerminate := false;
    aThread.Start;
    aThread.WaitFor;  // Safe to wait for the anonymous thread
    aThread.Free;
  end;
end;

end. 
```

# android - BroadcastReceivers 是否需要自己的进程才能独立于 UI（活动）？

> ID：16205478
> 
> 赞同：0
> 
> 时间：2013-04-25T02:36:48.277
> 
> 标签：android, broadcastreceiver, repeatingalarm

因此，我正在开发一个应用程序，该应用程序使用 AlarmManager 广播意图，让我的接收器完成一项简单的任务并快速完成。我希望我的接收器每隔几分钟运行一次，所以我用它`setRepeating`来确保这一点。我不想担心我的应用程序的主要活动正在运行或在警报触发时可见。为了让我的接收器像这样与主要活动分开运行，我是否需要`android:process=":remote"`在清单中添加到接收器？还是它们本身就已经是分开的东西了？两者不需要交流。我正在尽最大努力在不取消任何警报的情况下终止活动，并且接收器现在似乎运行正常，但我想知道它是否会继续工作几个小时或几天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T02:48:39.333

是的，它们是分开的。无需使用该属性。

顺便问一下，你在那个 BroadcastReceiver 中做了多少工作？通常，您不能在 BroadcastReceiver 本身内部做很多事情，您可以使用它来触发其他事情。

另外，我想知道您是如何执行以下操作的：

> “我正在尽力扼杀活动……”

我想知道您试图通过杀死活动来解决什么问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-29T19:15:00.517

对于您的直接问题-当然不是-它将成为性能杀手，并且无论如何都不需要。

对您的设计 - 有缺陷。你应该 ：

1.  注册警报（还要注意在启动时重新注册） - 请参阅[wakeLock 不等待网络连接](https://stackoverflow.com/questions/19360571/wakelock-does-not-wait-for-network-connectivity/19384289#19384289)以获取注册警报的代码
2.  当 AlarmaManager 唤醒你的接收者委托到一个[*`WakefulIntentService`*](https://github.com/commonsguy/cwac-wakeful). 不保证 Intent 服务在设备处于睡眠状态时运行（请参阅[Android 深度睡眠和唤醒锁](https://stackoverflow.com/questions/12417541/android-deep-sleep-and-wake-locks/16268293#16268293)）。

也可以看看：

*   [PowerManager.PARTIAL_WAKE_LOCK 安卓](https://stackoverflow.com/questions/20321444/powermanager-partial-wake-lock-android/20332558#20332558)
*   [PowerManager 唤醒锁未从](https://stackoverflow.com/questions/17471028/powermanager-wakelock-not-waking-device-up-from-service/17496029#17496029)WIS 框架的服务中唤醒设备
*   [WakefulIntentService 实现说明](https://stackoverflow.com/questions/20074035/wakefulintentservice-implementation-clarifications)

# java - 减去日期得到昨天的日期

> ID：16205481
> 
> 赞同：0
> 
> 时间：2013-04-25T02:37:13.090
> 
> 标签：java, date

我有这些代码可以在我的服务器中获取今天的日期

```
 DefaultTableModel dnow = MyDB.DataTable("SELECT date_format(now(),'%m-%d-%Y')"); 
```

以及用于日期格式的这些代码。

```
SimpleDateFormat format = new SimpleDateFormat("MM-dd-yyyy"); 
```

现在我怎样才能得到昨天的日期？我应该用一个减去它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T02:43:01.783

不，建立一个`Date`（或者更好的是使用[joda](http://joda-time.sf.net)的`DateTime`对象）然后做你的算术。我会给你两个解决方案，一个有 Joda，另一个没有，从没有开始：

```
Date d = format.parse(dnow.getDataVector().get(dnow.getTable().getSelectedRow()));
d.add(Calendar.DATE, -1); 
```

现在，使用 joda：

```
DateTime d = new DateTime(format.parse(dnow.getDataVector().get(dnow.getTable().getSelectedRow()))).minusDays(1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T03:29:04.400

另一种方法是在 SQL 中进行数学运算。该语句可能会因您使用的数据库平台而异。

```
DefaultTableModel dnow = 
  MyDB.DataTable("SELECT date_format(now() - INTERVAL 1 DAY,'%m-%d-%Y')"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T02:39:46.850

这对你来说应该是完美的，

```
Calendar cal = Calendar.getInstance()
cal.add(Calendar.DATE, -1);
System.out.println("Yesterday's date = "+ cal.getTime()); 
```

这只会从当前日历日期中减去 1 天，为您提供昨天的日期

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T04:16:33.167

如果您将时间戳在内部存储为 POSIX 时间（自 1970 年 1 月 1 日 MN 以来的毫秒数），那么您可以轻松地为任何时间戳添加或减去一天：

```
Date today = new Date(); // today
Date tomorrow = new Date(today.getTime() + (24 * 60 * 60 * 1000)); // tomorrow 
```

POSIX 时间的巨大好处是它始终采用 UTC。UTC 是一个全球性的“固定”参考点。然后，如果您需要在任何时区、任何夏令时区、奥尔森时区数据库中的任何地点为用户显示此日期，您可以简单地创建一个日历：

```
GregorianCalendar gc = new GregorianCalendar(TimeZone.getTimeZone("America/Chicago"));
SimpleDateFormat sdf = new SimpleDateFormat();
sdf.setCalendar(gc);
sdf.applyPattern("MM-dd-yyyy");

// Now your formatter is set with the pattern and a time zone-aware Calendar. 
// The world is at your command

String myOutput = sdf.format(tomorrow); 
```

我强烈建议在您的数据模型中以某种 UTC 表示形式在内部处理时间戳。使用 POSIX 时间（或儒略日数，或修改后的儒略日数）进行日期运算很容易，Java 日期/时间 API 有足够的能力来处理大多数本地时间转换，而无需您大惊小怪。

# extjs - 在extjs中单击按钮时可以关闭浏览器正在运行

> ID：16205483
> 
> 赞同：0
> 
> 时间：2013-04-25T02:37:30.623
> 
> 标签：extjs

比如我正在运行的页面“login.html”，上面有“是”和“否”两个按钮，你点击“否”，浏览器会自动关闭。我希望得到人们的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T02:43:54.713

根据您的“输入”方法，以下内容会起作用

```
<input type="button" value="close window" onclick="window.close()"/> 
```

但只是为了澄清 close 方法仅关闭 JavaScript 使用 open 方法打开的窗口。如果您尝试关闭任何其他窗口，则会显示一条确认消息，要求用户出于明显的安全原因选择是否关闭该窗口

# xcode - Xcode 4.6.2 中的“类型名称需要说明符或限定符”是什么？

> ID：16205488
> 
> 赞同：-1
> 
> 时间：2013-04-25T02:38:08.927
> 
> 标签：xcode

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController
@property (weak, nonatomic);
@property (weak, nonatomic);

@end 
```

我在两个@property 行上都遇到了同样的错误。它告诉我“类型名称需要说明符或限定符”。这是在';'下 在两条线上。

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T03:19:31.587

您没有正确声明您的属性，您需要告诉它您拥有什么样的对象以及名称是什么：

例如

```
@property (copy, nonatomic) NSString *title;
@property (assign, nonatomic) BOOL *hasReadDocumentation; 
```

# javascript - Shopify 为每个产品创建单选按钮选项

> ID：16205494
> 
> 赞同：0
> 
> 时间：2013-04-25T02:39:05.647
> 
> 标签：javascript, e-commerce, shopify

我正在 Shopify 上进行开发，并且我正在尝试为客户创造构建计算机的能力。但是，我找不到办法做到这一点。我想让它看起来类似于 www.cyberpowerpc.com/system/Cyber​​Power_Z77_Configurator/ 如果我使用 JavaScript 进行操作，我如何连接到购物卡以获取最终价格？我也阅读了 Shopify API，但没有任何帮助。请有任何提示！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:02:34.777

假设最终价格是组件的总和，您可以使用 Javascript 创建一个配置器工具。Shopify 有一个小的[AJAX API](http://wiki.shopify.com/Ajax_API)库可用，可以将产品添加到购物车、查找产品详细信息等。

# google-apps-script - Google Apps 脚本图表服务：脚本已完成但未返回任何内容？

> ID：16205495
> 
> 赞同：0
> 
> 时间：2013-04-25T02:39:06.457
> 
> 标签：google-apps-script

主要问题：为什么下面的脚本没有返回任何内容？给定版本并部署后，脚本返回“脚本已完成但未返回任何内容。”

（额外的问题：我可以在同一个仪表板和同一个脚本中的两个不同数据表上运行两个图表吗？）

输入是一个谷歌电子表格，有四列和一个标题行：年|月|组|计数，除组外的所有数字（单个字母）。

目标是按 yearmo（201001、201002...）创建总计数折线图。理想情况下，我想在同一脚本中按年组生成另一个总计数折线图，但一次一步......

由于数据没有汇总（而且我是谷歌应用程序脚本的新手，并且在旋转电子表格本身之外找不到任何聚合），我求助于哈希来计算年月的总和。我会为年级组做同样的事情。

它可能并不优雅（我恰好也是 js 新手），但对我来说很有意义。太糟糕了，它不起作用。感谢指点。

编辑 2013-04-25

试图在一个脚本中完成太多工作而失去了立足点。所以我在脚本之外进行了聚合，创建了一个新的电子表格，并运行了在这里找到的代码[https://sites.google.com/site/appsscripttutorial/chart-services/line-chart](https://sites.google.com/site/appsscripttutorial/chart-services/line-chart)：得到我的折线图。

```
function doGet(){
  // counts by yearmo
  var ss = SpreadsheetApp.openById('0Atd6tVDA1d3UOI-jfkdlRHbk85Y19BcU9BNFdPNXBlVlE');
  var data = ss.getDataRange().getValues();
  var yr = [];
  var mo = [];
  for (var i = 1; i < data.length; i++) {
    yr[data[i][0]] = 0;
    mo[data[i][1]] = 0;
  }
  Logger.log( yrLvls = Object.keys(yr) );
  Logger.log( moLvls = Object.keys(mo) );
  // initialize hash
  var yearmo = [];
  for (var i = 0; i < yrLvls.length; i++){
    for (var j = 0; j < moLvls.length; j++){
      var key = yrLvls[i] + '-' + moLvls[j]
      yearmo[ key ] = 0;
    }
  }
  // aggregation
  for (var i = 1; i < data.length; i++) {
    yearmo[  data[i][0] + '-' + data[i][1] ]  +=  data[i][3];
  }
  // check
  var values = Object.keys(yearmo).map(function(key){
    return yearmo[key];
  });
  Logger.log( values );
  // Year Mo
  Logger.log( "--------------" );
  var data_yearmo = Charts.newDataTable()
  .addColumn(Charts.ColumnType.STRING, 'YearMo')
  .addColumn(Charts.ColumnType.NUMBER, 'Count');
  Logger.log( Object.keys(yearmo) );
  for ( key in Object.keys(yearmo) ) {
      Logger.log( key );
      data_yearmo.addRow(  [ key , yearmo[key] ]  );
  }
  data_yearmo.build()

  var lineChart_yearmo = Charts.newLineChart()
   .setTitle('Counts')
   .setXAxisTitle('YearMo')
   .setYAxisTitle('Counts')
   .setCurveStyle(Charts.CurveStyle.SMOOTH)
   .setPointStyle(Charts.PointStyle.MEDIUM)
   .setDataTable(data_yearmo);

  var uiApp = UiApp.createApplication().setTitle('Yearmo');
  uiApp.add(lineChart_yearmo);
  return uiApp;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T05:13:01.590

我怀疑您没有更新您部署的应用程序的版本。尝试使用“最新代码”开发链接（您可以在部署应用程序时从对话框中获取它），如果可行，请从“管理版本”菜单创建新版本并更新已部署的应用程序以使用该版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:52:28.790

我忘了添加`.build()`到我的`Charts.newLineChart()`通话中。

`data_yearmo.build()`显然没有必要，但'.build（）'绝对`Charts.newLineChart()`是。信用转到上面编辑中的链接。

# javascript - jQuery / Javascript 元素高度总是返回 0

> ID：16205497
> 
> 赞同：0
> 
> 时间：2013-04-25T02:39:25.197
> 
> 标签：javascript, jquery

我试图在每个换行符处将一些段落分成各自的行。尝试恢复元素的高度时，我的代码似乎中断了，它总是返回“0”。

我的功能：

```
function getLines(element){
    words = element.text().split('');
    width = element.width();
    lines = [];
    hiddenElement = jQuery('<p width ="'+ width +'px", visible ="true"></p>');
    hiddenElement.text('i'); //add character to get height
    height = hiddenElement.height();
    alert(height);
    hiddenElement.empty();
    jQuery.each(words, function(i, val) {
      lineText = hiddenElement.text();
      hiddenElement.text(lineText + this);
        if(hiddenElement.height() > height) {
            lines.push(lineText);
            hiddenElement.text(this);
        }
   });
    alert(hiddenElement.height());
    alert(lines);
    jQuery('body').append(hiddenElement); // to see results
} 
```

[http://jsfiddle.net/zQUhV/2/](http://jsfiddle.net/zQUhV/2/) - 通过调用的函数`up arrow key`

为什么返回 0 而不是元素的高度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T02:41:11.160

如果元素没有插入到文档中，它们就没有尺寸。此外，您正在`<p>`错误地创建您的。

# opencv - opencv2.4.4 visual studion 2012 找不到或打开PDB文件

> ID：16205498
> 
> 赞同：2
> 
> 时间：2013-04-25T02:39:40.517
> 
> 标签：opencv, visual-studio-2012

我正在使用 opencv 库和 VS2012 运行程序。我使用的是windows 7 64位，所以我通过项目属性将配置管理器更改为x64。在我系统的环境变量中，我首先从命令提示符创建了这些条目： `setx -m OPENCV_DIR C:\OpenCV\build`并将其添加到系统路径中：`%OPENCV_DIR%\build\x64\vc11\bin`

在 Visual Studio 的属性管理器中，我将以下文件夹链接添加到项目属性：

1.  在 C/C++ 下，附加包含目录，我添加了：`$(OPENCV_DIR)\include`

2.  在链接器，附加库目录下，我添加了；`$(OPENCV_DIR)\x64\vc10\lib;`

3.  链接器、输入、附加依赖项，我添加了以下内容：

    `opencv_core244d.lib opencv_imgproc244d.lib opencv_highgui244d.lib opencv_ml244d.lib opencv_video244d.lib opencv_features2d244d.lib opencv_calib3d244d.lib opencv_objdetect244d.lib opencv_contrib244d.lib opencv_legacy244d.lib opencv_flann244d.lib opencv_gpu244d.lib opencv_nonfree244d.lib opencv_photo244d.lib opencv_stitching244d.lib opencv_ts244d.lib opencv_videostab244d.lib`

当我运行我的程序时，我遇到了这个错误

> “ConsoleApplication0.exe”（Win32）：已加载“D:\configuration\ConsoleApplication0\x64\Debug\ConsoleApplication0.exe”。已加载符号。“ConsoleApplication0.exe”（Win32）：已加载“C:\Windows\System32\ntdll.dll”。已加载符号。“ConsoleApplication0.exe”（Win32）：已加载“C:\Windows\System32\kernel32.dll”。已加载符号。“ConsoleApplication0.exe”（Win32）：已加载“C:\Windows\System32\KernelBase.dll”。已加载符号。“ConsoleApplication0.exe”（Win32）：已加载“C:\opencv\build\x64\vc11\bin\opencv_core244d.dll”。无法找到或打开 PDB 文件。“ConsoleApplication0.exe”（Win32）：已加载“C:\Windows\System32\msvcp110d.dll”。已加载符号。“ConsoleApplication0.exe”（Win32）：已加载“C:\Windows\System32\msvcr110d.dll”。已加载符号。' ConsoleApplication0.exe' (Win32): 加载'C:\opencv\build\x64\vc11\bin\opencv_imgproc244d.dll'。无法找到或打开 PDB 文件。“ConsoleApplication0.exe”（Win32）：已加载“C:\opencv\build\x64\vc11\bin\opencv_highgui244d.dll”。无法找到或打开 PDB 文件。“ConsoleApplication0.exe”（Win32）：已加载“C:\Windows\System32\user32.dll”。已加载符号。“ConsoleApplication0.exe”（Win32）：已加载“C:\Windows\System32\gdi32.dll”。已加载符号。“ConsoleApplication0.exe”（Win32）：已加载“C:\Windows\System32\lpk.dll”。已加载符号。“ConsoleApplication0.exe”（Win32）：已加载“C:\Windows\System32\usp10.dll”。已加载符号。“ConsoleApplication0.exe”（Win32）：已加载“C:\Windows\System32\msvcrt.dll”。已加载符号。'ConsoleApplication0.exe' (Win32): 加载'C:\Windows\System32\ole32.dll'。已加载符号。“ConsoleApplication0.exe”（Win32）：已加载“C:\Windows\System32\rpcrt4.dll”。已加载符号。“ConsoleApplication0.exe”（Win32）：已加载“C:\Windows\System32\oleaut32.dll”。已加载符号。“ConsoleApplication0.exe”（Win32）：已加载“C:\Windows\System32\advapi32.dll”。已加载符号。“ConsoleApplication0.exe”（Win32）：已加载“C:\Windows\System32\sechost.dll”。已加载符号。“ConsoleApplication0.exe”（Win32）：已加载“C:\Windows\winsxs\amd64_microsoft.windows.common-controls_6595b64144ccf1df_5.82.7601.17514_none_a4d6a923711520a9\comctl32.dll”。已加载符号。“ConsoleApplication0.exe”（Win32）：已加载“C:\Windows\System32\msvfw32.dll”。已加载符号。'ConsoleApplication0.exe' (Win32): 加载'C:\Windows\System32\winmm.dll'。已加载符号。“ConsoleApplication0.exe”（Win32）：已加载“C:\Windows\System32\shell32.dll”。已加载符号。“ConsoleApplication0.exe”（Win32）：已加载“C:\Windows\System32\shlwapi.dll”。已加载符号。“ConsoleApplication0.exe”（Win32）：已加载“C:\Windows\System32\avifil32.dll”。已加载符号。“ConsoleApplication0.exe”（Win32）：已加载“C:\Windows\System32\msacm32.dll”。已加载符号。“ConsoleApplication0.exe”（Win32）：已加载“C:\Windows\System32\avicap32.dll”。已加载符号。“ConsoleApplication0.exe”（Win32）：已加载“C:\Windows\System32\version.dll”。已加载符号。“ConsoleApplication0.exe”（Win32）：已加载“C:\opencv\build\x64\vc11\bin\opencv_objdetect244d.dll”。无法找到或打开 PDB 文件。“ConsoleApplication0.exe”（Win32）：已加载“C:\Windows\System32\imm32.dll”。已加载符号。“ConsoleApplication0.exe”（Win32）：已加载“C:\Windows\System32\msctf.dll”。已加载符号。程序“[4228] ConsoleApplication0.exe”已退出，代码为 1 (0x1)。

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T04:14:24.607

这些都不是致命的错误消息。这些仅仅是诊断性陈述（例如，没有任何问题，它只是通知您某些事件）。

PDB 文件是特定于 Visual Studio 的文件，其中包含项目的调试符号。如果您使用 OpenCV 的预构建库/dll，您将没有任何这些文件。幸运的是，您可以忽略这些消息，除非您希望使用调试器单步执行这些 dll 的代码。

如果它让您感到困扰，您可以从源代码重新构建 opencv 并启用`/ZI`or`/Zi`选项。然而，就目前而言，这些消息都不会表明有任何问题。您的程序以代码 1 (0x1) 退出是由其他原因引起的，但您没有提供足够的信息来确定是什么。

[这是来自 MSDN 的 PDB 文件的官方描述：](http://msdn.microsoft.com/en-us/library/yd4f8bd1%28v=vs.100%29.aspx)

> 程序数据库 (PDB) 文件包含调试和项目状态信息，允许增量链接程序的调试配置。使用 /ZI 或 /Zi 编译 C/C++ 程序时会创建 PDB 文件

# xcode - 界面生成器中的控制原点坐标在 xcode 4.6 中被禁用

> ID：16205502
> 
> 赞同：1
> 
> 时间：2013-04-25T02:40:21.230
> 
> 标签：xcode, interface-builder

我是 iOS 开发的新手，正在努力完成“学习 iOS 开发”中的项目。

当我在 XCode 4.6.2 的 Interface Builder 中将控件（例如按钮）拖到网格中时，我可以在 Size Inspector 中指定宽度和高度的数字，但不能为原点指定数字，它是灰色的。我可以通过选择文本框左侧网格中的九个点之一来更改原点以指定数字，但这太粗略了。

我已经看到报告了类似的问题，解决方案是关闭模拟用户界面元素（请参阅[Can't resize UIView in IB](https://stackoverflow.com/questions/1087676/cant-resize-uiview-in-ib)）。但我认为这个选项已从 4.6 中删除。（参见[Interface Builder 的“Simulate Interface”在 xcode 4.6 中消失了吗？](https://stackoverflow.com/questions/13623144/interface-builders-simulate-interface-is-gone-in-xcode-4-6)。）

我怀疑解决方案很简单，我忽略了。任何帮助是极大的赞赏！

# arrays - 初始化二维数组的 Malloc 错误

> ID：16205505
> 
> 赞同：0
> 
> 时间：2013-04-25T02:40:43.843
> 
> 标签：arrays, malloc, 2d

所以我现在只是想创建和打印一个整数矩阵。在尝试初始化我的二维整数数组时，我遇到了一个冗长而冗长的 malloc 错误，我不明白问题是什么。我现在只关注创建命令。这是到目前为止的代码：

主.cpp：

```
using namespace std;
#include "dfs.h"

int main()
{
string temp1;
string temp2;
int n;
int g;
deep d;

do{

cout << "DFS> ";
cin >> temp1;

//Checking for quit command.

if(temp1.compare("quit") == 0)
{
    return 0;
}
//Checking for create command.
else if(temp1.compare("create") == 0)
{
    cin >> g;
    int *array = new int[g];
    int s = 0;
    while(s < (g*g))
    {
        cin >> array[s];
        s++;
    }
    d.create(g, array);
}

//Checking for dfs command.
else if(temp1.compare("dfs") == 0)
{
    cin >> n;
    cout << d.matrix[1][1] << endl;
    d.dfs(n);
    cout << endl;
}

//Anything else must be an error.
else
{
    cout << endl;
    cout << "Error! "<< endl;
}
}while(temp1.compare("quit") != 0);
} 
```

dfs.h：

```
#include <iostream>
#include <string>
#include <cstdlib>

using namespace std;

//DFS class.
class deep{
public:
    int max;
    int **matrix;
    void create(int, int*);
    void dfs(int);

//Constructor
deep()
{};
}; 
```

dfs.cpp：

```
#include "dfs.h"

void deep::create(int n, int *array)
{
max = n;
matrix = new int*[max];
for(int i=0; i<max; i++)
{
    matrix[i] = new int[max];
}
int c = 0;
for(int j=0; j<n; j++)
{
    for(int k=0; k<n; k++)
    {
        matrix[j][k] = array[c];
        c++;
        cout << matrix[j][k] << " ";
    }
    cout << endl;
}
}

void deep::dfs(int u)
{
if(u>=max)
{
    cout << "Error! ";
}
else
{
    matrix[u][u] = 2;
    cout << u;
    int v = u+1;
    while(u<max && v<max)
    {
        if(matrix[u][v] != 0 && matrix[u][v] != 2)
        {
            cout << " ";
            dfs(v);
        }
    }
}
} 
```

重点主要在这里：

```
void deep::create(int n, int *array)
{
max = n;
matrix = new int*[max];
for(int i=0; i<max; i++)
{
    matrix[i] = new int[max];
}
int c = 0;
for(int j=0; j<n; j++)
{
    for(int k=0; k<n; k++)
    {
        matrix[j][k] = array[c];
        c++;
        cout << matrix[j][k] << " ";
    }
    cout << endl;
}
} 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T02:45:50.450

这里：

```
int *array = new int[g];
int s = 0;
while(s < (g*g))
{
    cin >> array[s];
    s++;
} 
```

您正在写超出数组的末尾。如果`g`为 3，`array`则只有 3 个元素，索引从 0 到 2，但您一直在写入`array[8]`.

# javascript - jquery UI Slider绑定到选择

> ID：16205512
> 
> 赞同：1
> 
> 时间：2013-04-25T02:41:41.813
> 
> 标签：javascript, jquery, slider, uislider, jquery-ui-slider

```
<p>Cost: $<span id="hddValue"></span></p>
<p>Cost2: $<span id="hddValue2"></span></p>

<select id="hdd">
  <option>1000</option>
  <option>2000</option>
  <option>3000</option>
  <option>4000</option>
  <option>5000</option>
</select>

<select id="hdd2">
  <option>1700</option>
  <option>500</option>
  <option>3700</option>
  <option>4300</option>
  <option>5070</option>
</select>

$(function () {
            var select = $('#hdd');
            var slider = $("<div id='slider'></div>").insertAfter(select).slider({
                min: 1,
                max: 5,
                range: "true",
                value: select[0].selectedIndex + 1,
                slide: function (event, ui) {
                    select[0].selectedIndex = ui.value - 1;
              $("#hddValue").text($('#hdd option:selected').text());
             $("#hddValue2").text($('#hdd2 option:selected').text());
                }
            });
        //show start value
        $( "#hddValue" ).html(  $('#slider').slider('value') );
        $( "#hddValue2" ).html(  $('#slider').slider('value') );
        }); 
```

谁能帮我这个js脚本？我想要做的是当我移动滑块时，我希望每个选定的值都显示在页面上，如两个选项值“hdd”和“hdd2”所示。

现在发生的情况是，当我移动滑块时只有#hdd 更改，当我在javascript 中添加#hdd2 时，hdd2 html 视图只是冻结到第一个选项并且不会更改。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T02:59:46.093

您的更新方法仅更新两个选择，但使用第一个选择的值。没有尝试过，但它应该看起来像这样，顺便说一句。具有相同 id 的多个元素（您的滑块）是无效的，并且会破坏旧浏览器。

```
<p>Cost: $<span class="hddvalue"></span></p>
<p>Cost2: $<span class="hddvalue"></span></p>

<select id="hdd">
  <option>1000</option>
  <option>2000</option>
  <option>3000</option>
  <option>4000</option>
  <option>5000</option>
</select>

<select id="hdd2">
  <option>1700</option>
  <option>500</option>
  <option>3700</option>
  <option>4300</option>
  <option>5070</option>
</select>

$(function () {
            var
                $selects = $('#hdd,#hdd2'),
                $values = $('.hddvalue')
            ;
            $selects.each(function (i) {
                var sel = this;
                $("<div class='slider'></div>").insertAfter(select).slider({
                    min: 1,
                    max: 5,
                    range: "true",
                    value: sel.selectedIndex + 1,
                    slide: function (event, ui) {
                        sel.selectedIndex = ui.value - 1;
                       $values.eq(i).text(jQuery(this).find('option:selected').text());
                    }
                });
            });

        //show start value
        $values.eq(0).html(  $('.slider').eq(0).slider('value') );
        $values.eq(1).html(  $('.slider').eq(1).slider('value') );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-04T09:44:07.820

```
$(function () {
            var
                $selects = $('#hdd,#hdd2'),
                $values = $('.hddvalue');
            $selects.each(function (i) {
                var sel = this;
                $("<div class='slider'></div>").insertAfter(sel).slider({
                    min: 1,
                    max: 5,
                    range: "true",
                    value: sel.selectedIndex + 1,
                    slide: function (event, ui) {
                        sel.selectedIndex = ui.value - 1;
                       $values.eq(i).text(jQuery(this).find('option:selected').text());
                    }
                });
            });

        //show start value
        $values.eq(0).html(  $('.slider').eq(0).slider('value') );
        $values.eq(1).html(  $('.slider').eq(1).slider('value') );
}); 
```

# sql - count children has_many 关系的范围

> ID：16205515
> 
> 赞同：2
> 
> 时间：2013-04-25T02:42:00.157
> 
> 标签：sql, ruby-on-rails-3, scope

我有两个模型

```
# == Schema Information
#
# Table name: answers
#
#  id          :integer          not null, primary key
#  content     :text
#  question_id :integer
#  accept      :boolean
#  created_at  :datetime         not null
#  updated_at  :datetime         not null    
#  user_id     :integer
#

class Answer < ActiveRecord::Base
  attr_accessible :accept, :content, :question_id, :user
  belongs_to :question
  belongs_to :user
  delegate :username, to: :user, allow_nil: true, prefix: 'owner'
end 
```

和问题

```
# == Schema Information
#
# Table name: questions
#
#  id           :integer          not null, primary key
#  title        :string(255)
#  content      :text             default(""), not null
#  created_at   :datetime         not null
#  updated_at   :datetime         not null
#  user_id      :integer
#  viewed_count :integer          default(0)
#

class Question < ActiveRecord::Base

  validates_presence_of :title, :content, :user
  attr_accessible :content, :title, :tag_list
  acts_as_taggable
  belongs_to :user, :counter_cache => true
  has_many :answers
  delegate :username, to: :user, allow_nil: true, prefix: 'owner'
  scope :owner, joins(:user)
  scope :without_answer, joins(:answers).
     select('questions.id').
     group('questions.id').
     having('count(answers.id) = 0')

  validate :validation_of_tag_list

  def self.no_answer
    Question.all.select{|question|question.answers.count == 0}
  end 
```

范围`without_answer`和类方法`no_answer`理论上应该是相同的。但是，我在控制台中运行它们，如下所示：

```
Loading development environment (Rails 3.2.13)
irb(main):001:0> Question.without_answer
  Question Load (0.6ms)  SELECT questions.id FROM `questions` INNER JOIN `answers` ON `answers`.`question_id` = `questions`.`id` GROUP BY questions.id HAVING count(answers.id) = 0
=> []
irb(main):002:0> Question.no_answer
  Question Load (0.6ms)  SELECT `questions`.* FROM `questions` 
   (0.5ms)  SELECT COUNT(*) FROM `answers` WHERE `answers`.`question_id` = 1
   (0.4ms)  SELECT COUNT(*) FROM `answers` WHERE `answers`.`question_id` = 2
   (0.4ms)  SELECT COUNT(*) FROM `answers` WHERE `answers`.`question_id` = 16
   (0.4ms)  SELECT COUNT(*) FROM `answers` WHERE `answers`.`question_id` = 17
   (0.3ms)  SELECT COUNT(*) FROM `answers` WHERE `answers`.`question_id` = 34
=> [#<Question id: 2, title: "Here is the second", content: "here you go\r\n", created_at: "2013-04-20 00:34:15", updated_at: "2013-04-20 00:34:15", user_id: nil, viewed_count: 0>, #<Question id: 16, title: "my question", content: "Here is my question", created_at: "2013-04-21 02:02:47", updated_at: "2013-04-23 02:29:27", user_id: 1, viewed_count: 1>, #<Question id: 17, title: "Hello", content: "me", created_at: "2013-04-23 00:37:56", updated_at: "2013-04-23 00:37:56", user_id: nil, viewed_count: 0>, #<Question id: 34, title: "Question title", content: "question content", created_at: "2013-04-23 04:57:49", updated_at: "2013-04-23 04:57:49", user_id: 42, viewed_count: 0>] 
```

1.  为什么范围不能按预期工作？
2.  在这种情况下，哪种方式会更好，甚至更好的解决方案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-15T05:09:07.030

您的`without_answer`范围非常接近，但需要像这样的外部连接：

```
scope :without_answer,
   joins('LEFT OUTER JOIN answers ON answers.question_id = questions.id').
   select('questions.id').
   group('questions.id').
   having('count(answers.id) = 0') 
```

然后，您可以通过以下方式获得计数`length`：

```
Question.without_answer.length 
```

注意：如果您想`without_answer`与`no_answer`（即返回实际的 Question 对象）相同，则需要删除`select`.

计算未回答问题的一种更简单、更快捷的方法如下：

```
Question.joins('LEFT OUTER JOIN answers ON answers.question_id = questions.id').
         where('answers.id' => nil).count 
```

此外，这将返回与原样相同`no_answer`，只需使用`all`而不是`count`.

# cakephp - CakePHP 2.4.2：包含未按预期工作

> ID：16205520
> 
> 赞同：1
> 
> 时间：2013-04-25T02:42:33.003
> 
> 标签：cakephp, model, cakephp-2.0, relationships

我有一个模型，评论，它属于模块、照片、评论、文章和用户。反过来，这些模型中的每一个都有许多评论。

用户属于头像，头像有很多用户

在下面的代码中，我成功检索了最新的 5 条评论，无论它们来自什么模型（照片、文章、评论），并且我显示了有关用户的一些信息（用户名、在线状态）。

```
$recentComments = $this->find('all',
array(
    'limit' => '5',
    'order' => array('Comment.id' => 'desc'),
    'conditions' => array(
        'Comment.page_id' => $page_id
    ),
    'contain' => array(
        'Photo' => array(
            'fields' => array('Photo.id'),
            'conditions' => array(
                'Comment.module_id' => 8
            ),
        ),
        'Review' => array(
            'fields' => array('Review.title', 'Review.id'),
            'conditions' => array(
                'Comment.module_id' => 2
            ),
        ),
        'Article' => array(
            'fields' => array('Article.title', 'Article.id'),
            'conditions' => array(
                'Comment.module_id' => 3
            ),
        ),
       'Module' => array(
            'fields' => array('Module.model', 'Module.post_title'),
        ),
      'User' => array(
            'fields' => array('User.username', 'User.online'),
        ),
    )
)); 
```

不幸的是，这存在一些问题。正如您在上面看到的，我不包含 User->Avatar 并且所有预期的数据都已成功检索。

```
$recentComments = Array
(
    [0] => Array
        (
            [Comment] => Array
                (
                    [id] => 179
                    [page_id] => 2
                    [module_id] => 3
                    [page] => 
                    [user_id] => 29
                    [post_id] => 9
                    [title] => test comment for article 9
                    [content] => here is the content for the comment
                    [created] => 2013-04-24 00:00:00
                    [redeemed] => 0
                    [status] => 0
                )

            [User] => Array
                (
                    [username] => bowlerae
                    [online] => 0
                )

            [Module] => Array
                (
                    [model] => Article
                    [post_title] => title
                )

            [Article] => Array
                (
                    [title] => Test title for article 9
                    [id] => 9
                    [likes] => 0
                    [dislikes] => 0
                    [comments] => 2
                )

            [Photo] => Array
                (
                    [id] => 
                )

            [Review] => Array
                (
                    [title] => 
                    [id] => 
                )

        ) 
```

但是，如果我确实包含这样的 User-> Avatar ......

```
 'User' => array(
        'fields' => array('User.username', 'User.online'),
        'Avatar' => array(
            'fields' => array('Avatar.file')
        )
    ), 
```

然后递归基本上变得无限，与评论，用户，模块，文章，照片和评论相关的所有模型也被检索到了很多。

谁能解释为什么会这样？如果需要，我很乐意从某些模型中提交更多代码，但我没有看到任何问题。

看看另一个成功的例子……下面我正在检索最近的 5 篇文章。成功检索到包括用户头像在内的所有信息。

```
 $this->set('articles_sidebar', ClassRegistry::init('Article')->find('all',
array(
    'limit' => '5',
    'order' => array('Article.id' => 'desc'),
    'conditions' => array('
        Article.page_id' => $page_id
    ),
    'contain' => array(
       'User' => array(
            'fields' => array('User.username', 'User.online'),
            'Avatar' => array(
                'fields' => array('Avatar.file')
            )
        ),
    )
))); 
```

请注意，鉴于 $page_id > 0，这两个查找是在 beforeRender 的 AppController 中执行的。 $page_id 设置在当前控制器的任何位置。我知道人们可能会问这个问题，但这不是问题所在，因为我提到示例 2 检索最近的文章目前有效。

**编辑：**我发现这与我在 Article 模型中的 afterfind 回调有关。有没有办法可以调整 afterfind 和/或 $recentComments 查询中的查询，以便它们仍然可以工作而不会破坏我的包含？我的 $recentComments 查询中不需要喜欢、不喜欢或评论虚拟字段，这就是为什么它们没有被列为包含字段之一的原因。

```
function afterFind($results, $primary = false) {
parent::afterFind($results, $primary);

          foreach($results as $key => $val){
               if (isset($val['Article']['id'])){    

                        $results[$key]['Article']['likes'] = $this->Like->find('count', array('conditions' => array('Like.post_id' => $results[$key]['Article']['id'], 'Like.module_id' => 3, 'Like.status' => 0)));

                        $results[$key]['Article']['dislikes'] = $this->Like->find('count', array('conditions' => array('Like.post_id' => $results[$key]['Article']['id'], 'Like.module_id' => 3, 'Like.status' => 1)));

                        $results[$key]['Article']['comments'] = $this->Comment->find('count', array('conditions' => array('Comment.post_id' => $results[$key]['Article']['id'], 'Comment.module_id' => 3, 'Comment.status < 2')));
               }
          } // end for each

      return $results;

} // end afterfind 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T04:34:56.197

我的猜测是你的问题是这样的：

> 当使用 'fields' 和 'contain' 选项时 - 小心包含您的查询直接或间接需要的所有外键。

确保您包含用于加入用户和头像模型的任何字段。

[（在这里阅读）](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html#containing-deeper-associations)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:17:49.563

现在我改变了（在文章模型afterFind中）

```
 if (isset($val['Article']['id'])) 
```

至

```
 if (isset($val['Article']['id']) && $val == "article") 
```

似乎在当前控制器中工作，但需要进一步测试。有更好的解决方案吗？

# dynamics-crm-2011 - 如何在crm中自定义实体的gridView中添加“sendemail”按钮

> ID：16205525
> 
> 赞同：0
> 
> 时间：2013-04-25T02:43:05.473
> 
> 标签：dynamics-crm-2011, dynamics-crm, ribbon

有一个名为“添加到广告系列”的自定义实体。由于子网格中没有默认的“电子邮件”按钮，所以我放置了一个自定义按钮并提供了 javascript 来打开电子邮件表单，并且电子邮件表单打开良好。但现在的问题是，无法在电子邮件表单的“发送到字段”中获取选定的记录“电子邮件字段”。那么如何让选定的记录电子邮件在“电子邮件表单”中被替换

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T03:46:33.850

打开带有参数的电子邮件表单：

```
Xrm.Utility.openEntityForm("email", null, param); 
```

```
var param = {}; // passed as parameters to the new email form
if(Xrm.Page.getAttribute("-- LogicalNameOfField --") // make sure that the field has a value
    param["-- LogicalNameOfFieldInNewEmail --"] = Xrm.Page.getAttribute("-- LogicalNameOfField --"); // passes a field value to the new form
// This passes a lookup field as a parameter to the new form
if(Xrm.Page.getAttribute("-- LogicalNameOfLookup --").getValue() != null) { // make sure that the lookup field is not empty or we will have a problem trying to access [0].id and [0].name
    param["-- LogicalNameofLooupFieldInEmail --"] = Xrm.Page.getAttribute("-- LogicalNameOfLookup --").getValue()[0].id;
param["-- LogicalNameOfLookup --" + "name" (eg. "accountname")] = Xrm.Page.getAttribute("-- LogicalNameOfLookup --"].getValue()[0].name;
Xrm.Utility.OpenEntityForm("LogicalEntityName", null, param); // open the form and pass parameters 
```

注意查找字段是如何作为参数传递的：

*   为每个查找字段传递 2 个参数
*   GUID 作为查找字段的名称（如果帐户是新电子邮件中查找字段的名称，则为帐户）
*   源实体中查找的名称作为特殊参数 (accountname)
*   注意：没有名为“accountname”的字段，但在此假设实体中有一个名为“account”的字段

# java - 为什么这段代码会使文本居中对齐？

> ID：16205527
> 
> 赞同：0
> 
> 时间：2013-04-25T02:43:09.720
> 
> 标签：java

我正在为 Star Micronics 的收据打印机做一些 Android 编程。在它提供的示例代码中，有一行我不太明白。我对它在某种程度上链接到汇编语言或某种机器特定指令的事实感到困惑。

```
ArrayList<Byte> list = new ArrayList<Byte>();
Byte[] tempList;

// Alignment (center)                   
list.addAll(Arrays.asList(new Byte[]{0x1b, 0x1d, 0x61, 0x01})); 
```

有人能告诉我那条线是如何实现中心对齐的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T02:56:47.443

这几乎可以肯定是发送到打印机的命令序列。确切含义取决于打印机型号，但字节值对应于以下字符序列：

```
<ESC><GS>a<01> 
```

如果这是一台 TSP200 系列打印机，那么根据[程序员手册](http://www.starmicronics.com/support/Mannualfolder/tsp200pm.pdf)（第 58 页），它对应于“启用/禁用自动状态传输”功能。既然你说效果是中心对齐，我猜它只是一个不同的打印机型号。只需检查相应程序员手册中的转义序列即可。

# java - 使用用户输入的动态计算器？

> ID：16205533
> 
> 赞同：-1
> 
> 时间：2013-04-25T02:43:50.353
> 
> 标签：java, calculator

我正在尝试制作一个使用多个参数从字符串中获取输入的计算器。

示例：用户类型输出：14 + 20 * 8

然后它将进行数学运算并返回一个变量。

我看到了这样的东西，但是代码对我来说太高级了，而且不是我想要的。我已经查看了其他问题，但他们似乎并没有得到这个先进。

我正在考虑使用字符串生成器，然后将每个参数分解为一个变量，然后以这种方式进行数学运算，但我不太确定该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T02:51:12.663

一个聪明的方法是使用[递归下降解析器](http://www.savarese.org/articles/1998-2006/2001-05-Recursive_Descent_Parsing/)。对于更简单的事情，您可以禁止使用括号并要求用户用空格分隔每个标记（因此 14 + 20 可以，但不允许使用 14+20），然后使用 String#split(" ") 分隔标记. 如果token的第一个字符是数字，则使用Integer.parseInt(str)转成int；如果您得到 a`NumberFormatException`那么可能是因为用户没有包含空格（并且您试图将“14 + 20”转换为整数）

# javascript - 在 Opencart 中实现不同的 disqus 短名称

> ID：16205542
> 
> 赞同：1
> 
> 时间：2013-04-25T02:45:16.550
> 
> 标签：javascript, conditional-statements, opencart, disqus

我正在使用 opencart 1.5.5.1。在产品页面上，我已经使用[Disqus](http://disqus.com/)的讨论工具成功更改了“评论”选项卡！而且效果很好。但是我的网站是意大利语/英语双语，我希望用户以他们选择的语言阅读讨论。所以我创建了两个不同的disqus id（两个独立的讨论板）。

在我的 product.tpl 上，我必须插入带有变量的 javascript，例如：

```
<script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */

var disqus_shortname = 'xxxxxxxxxx';

/* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script> 
```

我想让变量 disqus_shortname 依赖于会话中给出的语言代码。

只要我明白我可以通过 php 得到它

```
$this->session->data['language'] 
```

或者

```
$this->language->get('code') 
```

但在这里我们谈论的是js！我怎样才能告诉这个脚本语句 if？我需要类似的东西

```
if $this->language->get('code') == 'it' { var disqus_shortname = 'xxxxxxxxxxitalian'; }
else { var disqus_shortname = 'xxxxxxxxxxenglish'; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T02:58:03.850

检查您是否在 Disqus 上为您的网站注册了 disqus 短名称。

> disqus_shortname
> 
> 告诉 Disqus 服务您论坛的短名称，这是您在 Disqus 上注册的网站的唯一标识符。如果未定义，Disqus 嵌入将不会加载。

要在页面上加载不同的语言，请使用

```
var disqus_config = function () { 
  this.language = "ru";
}; 
```

代码如：

```
 <?php
    $language = ( $this->language->get('code') == 'it' )? 'it' : 'en';
    ?>
    <script>
    var disqus_config = function () { 
          this.language = "<?php echo $language; ?>";
        }; 
```

[http://help.disqus.com/customer/portal/articles/466249-can-disqus-be-loaded-in-different-languages-per-page-](http://help.disqus.com/customer/portal/articles/466249-can-disqus-be-loaded-in-different-languages-per-page-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:35:36.877

在您的控制器中，您必须将语言代码传播到模板（编辑`catalog/controller/product/product.php`文件） - 添加：

```
$this->data['language_code'] = $this->language->get('code'); 
```

然后以这种方式编辑模板文件（`catalog/view/theme/<YOUR_THEME>/template/product/product.tpl`）：

```
<script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */

var disqus_shortname = 'xxxxxxxxxx<?php echo $language_code; ?>'; // here the mojo is done...

/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script> 
```

# java - Java/PHP 中的空格

> ID：16205545
> 
> 赞同：0
> 
> 时间：2013-04-25T02:46:01.310
> 
> 标签：java, php, sql

从 Java-->PHP-->SQL 发送时，空格不会变为下划线

Java代码：

```
String urlString = "http://www.mysite.com/auth/verifyuser.php?name="+name.toLowerCase().replace(" ","_"); 
```

PHP代码：

```
$name = mysql_real_escape_string($_GET['name']);
$name = str_replace(' ', '_', $name);
$query = "select * from authinfo where name LIKE '$name'";
mysql_query($query);
$num = mysql_affected_rows();

if ($num > 0) {
echo '1';
} else {
echo '0';
} 
```

当我在 SQL 数据库上实现测试日志时，它似乎仍然显示为空格而不是下划线（即使我用 Java 和 PHP 替换它）并且 PHP 文件返回“0”而不是“1”。我听说问题可能是空格？它似乎只发生在某些用户身上，主要是 mac 用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T03:12:33.673

如果您的 php 文件返回 0，则表示您的查询没有被执行。在执行查询之前，您在哪里与数据库建立连接？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T13:13:19.597

评论：`where name = '$name'`

`mysql_affected_rows`涉及插入、更新和删除。

```
$r = mysql_query($query);
$num = mysql_num_rows($r); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-29T00:20:13.760

将原始名称传递给 URL 而不对其进行编码是不安全的。

```
String urlString = "http://www.example.com/auth/verifyuser.php?name=" + URLEncoder.encode(name.toLowerCase(), "UTF-8"); 
```

在 PHP 中，您可以获取数据：

```
$name = urldecode($_GET['name']); 
```

# php - zend framework1 中的 layout.phtml 问题

> ID：16205548
> 
> 赞同：0
> 
> 时间：2013-04-25T02:46:24.533
> 
> 标签：php, zend-framework

```
<?php
$this->headMeta()->appendHttpEquiv('Content-Type', 'text/html;charset=utf-8');
$this->headTitle()->setSeparator(' - ');
$this->headTitle('Zend Framework Tutorial');
echo $this->doctype(); ?>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<?php echo $this->headMeta(); ?>
<?php echo $this->headTitle(); ?>
</head>
<body>
<div id="content">
<h1><?php echo $this->escape($this->title); ?></h1>
<?php echo $this->layout()->content; ?>
</div>
</body> 
```

上面的代码取自本教程：`http://akrabat.com/wp-content/uploads/Getting-Started-with-Zend-Framework.pdf` 它在第 10 页，文件是：`zf-tutorial/application/layouts/scripts/layout.phtml`

问题：

1.  这条线是干什么用的？`$this->headTitle()->setSeparator(' - ');`

2.  为什么我们需要这条线：`<?php echo $this->escape($this->title); ?>`我猜“escape”是为了安全，但它在这里究竟意味着什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:19:03.697

**`$this->escape()`**

默认情况下，escape() 方法使用 PHP htmlspecialchars() 函数进行转义。[转义输出](http://framework.zend.com/manual/1.12/en/zend.view.scripts.html#zend.view.scripts.escaping)

**$this->headTitle()->setSeparator(' - ');**

当您向标题添加多个值时，`setSeparator`将使用指定的分隔符分隔标题。[头衔](http://framework.zend.com/manual/1.12/en/zend.view.helpers.html#zend.view.helpers.initial.headtitle)

```
<?php
$request = Zend_Controller_Front::getInstance()->getRequest();
$this->headTitle($request->getActionName())
     ->headTitle($request->getControllerName());
$this->headTitle('Zend Framework');   
$this->headTitle()->setSeparator(' - ');
?> 
```

`<?php echo $this->headTitle() ?>`将创建`<title>action - controller - Zend Framework</title>`

# javascript - 如果 touchmove 触发，则取消 touchend

> ID：16205553
> 
> 赞同：9
> 
> 时间：2013-04-25T02:47:44.677
> 
> 标签：javascript, jquery, click, touch-event, touchmove

我正在构建一些主要用于平板电脑的东西，用户可以在屏幕上点击一个项目并将一个类应用于它。这是我到目前为止所拥有的：

问题：

1.  我想使用触摸事件来删除类并在触摸端添加类（以使其更快）。
2.  如果用户滑动（触摸移动），我不希望它做任何事情。

我已经尝试了很多东西，但都没有奏效。我尝试过的最简单的（不成功）是这样的：

```
var dragging = false;

$(".items").on("touchmove", function(){
      dragging = true;
});

$('.items').on("click touchend", function(event){
    if (dragging = true){
    }
    else{
    $('.items').removeClass('selected');
    $(this).addClass('selected');
    }
}); 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-09-17T17:27:11.597

**我认为这是一种更安全的方法**

将变量设置为 false

```
var dragging = false; 
```

将 var 设置为 true ontouchmove（允许您在应用程序的任何地方重用此代码）

```
$("body").on("touchmove", function(){
  dragging = true;
}); 
```

你的按钮

```
$("#button").on("touchend", function(){
      if (dragging)
      return;

      // your button action code
}); 
```

重置变量（重要）

```
$("body").on("touchstart", function(){
    dragging = false;
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-25T02:50:56.767

您想使用以下任一项：

```
if(dragging == true) 
```

或者，简单地说：

```
if(dragging) 
```

*设置*值时应仅使用单个`=`符号，而*检查*值时应使用两个符号。因此，您的代码应如下所示：*`==`*

 **```
$('.items').on("click touchend", function(event){
    if(!dragging)
    {
        $('.items').removeClass('selected');
        $(this).addClass('selected');
    }
}); 
```

请注意，您不需要检查是否`dragging == true`因为在这种情况下您没有运行任何代码。相反，您可以简单地检查是否`dragging == false`或，`!dragging`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-25T11:11:47.673

你有拖动检查放的地方

```
if (dragging == true){
   dragging = false;
}

else{
$('.items').removeClass('selected');
$(this).addClass('selected');
} 
```

它将在发布时重置

还要注意事件的双重调用，因为它们有时会在某些平台上触发两次最好首先检查平台以下将有助于检查

```
var clickEventType=((document.ontouchstart!==null)?'click':'touchend'); 
```

或者

```
var clickEventType = 'touchend';
if(document.ontouchstart!==null)
{
     clickEventType = 'click';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-27T09:41:59.250

您可以检查事件是否可取消。touchmove后是假的

```
$('.items').on("click touchend", function(event){
    if (event.cancelable){
        $('.items').removeClass('selected');
        $(this).addClass('selected');
    }
}); 
```**

# arrays - 对 ArrayList 使用集合排序

> ID：16205557
> 
> 赞同：0
> 
> 时间：2013-04-25T02:48:04.627
> 
> 标签：arrays, collections, generic-collections

```
class UnfairContainer<T> implements Comparable<UnfairContainer>
{    
    private ArrayList<T> array = new ArrayList<T>();

    public void sort()
    {
        Collections.sort(array);
    }

    public int compareTo(UnfairContainer o)
    {

    }
} 
```

所以我有实现可比较的类，但是当我尝试创建调用 Collections.sort() 的排序方法时，它给了我一个错误，说我不能用 ArrayList 调用集合排序。任何人都可以帮忙吗？并帮助我使用 compareTo 方法，我被困在如何比较我的 ArrayList 中的每个元素

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T03:24:18.663

The problem is that the list is not guaranteed to be sort-able. This is because with your current setup, `T` could be anything- including a class that does not implement `Comparable` and hence cannot be sorted by `Collections`. The type signature of `Collections.sort()` reflects this:

```
public static <T extends Comparable<? super T>> void sort(List<T> list); 
```

To fix this, you need to put an upper bound on T to ensure that it is sort-able:

```
class UnfairContainer<T extends Comparable<T> > 
        implements Comparable<UnfairContainer<T> >
{

... 
```

The `T extends Comparable<T>` means that T must be a class that implements Comparable. This lets Collections know that the ArrayList can be sorted, and everything works.

For more information, please refer to the [java trail on bounded wildcards in generics](http://docs.oracle.com/javase/tutorial/java/generics/wildcards.html)

# vba - Visual Basic 十进制计算结果为双精度

> ID：16205562
> 
> 赞同：1
> 
> 时间：2013-04-25T02:48:23.823
> 
> 标签：vba, visual-studio-2012

我是 Visual Basic 的新手，我正在使用小数进行一些计算，但是 Visual Studio 在每次计算时都会引发此错误：“Option Strict On 不允许从 'Double' 到 'Decimal' 的隐式转换”。我理解这个错误的含义。我只是想知道为什么答案首先是 Double 。这是代码（产生错误的行是 FWT = 0.1 * (taxable - 116)）：

```
Private Function GetFWT(ByVal allowances As Integer, ByVal status As String, ByVal gross As Decimal) As Decimal

    Dim FWT As Decimal
    Dim taxable As Decimal

    taxable = gross - CDec(allowances * 70.19)

    If status = "S" Then
        If taxable < 116 Then
            FWT = 0
        ElseIf taxable >= 116 And taxable < 200 Then
            FWT = 0.1 * (taxable - 116)
        End If
    End If

End Function 
```

我已经删除了其他 ElseIf 语句，因为它们都很相似并且有很多。Visual Studio 建议使用 CDec() 来解决错误，所以我将实现它来解决它（除非有人知道更好的解决方案），但我只是想了解为什么使用 Decimal 变量和文字数字的计算会产生双倍的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T03:13:23.567

是`0.1`作为`Decimal`还是`Double`？

我的理解是文字会被解释为 Double，这将产生一个`Double`结果。

你可以试试：`FWT = 0.1D * (taxable-116)`

# android - Widget中的Android ImageView onClick事件

> ID：16205563
> 
> 赞同：0
> 
> 时间：2013-04-25T02:48:25.080
> 
> 标签：android, android-widget

我如何知道或捕获 ImageView onclicklistener？

```
public class AppWidget extends AppWidgetProvider{
    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
        final int N = appWidgetIds.length;
        for (int i=0; i<N; i++) {
            int appWidgetId = appWidgetIds[i];
            Intent intent = new Intent(context, ShowActivity.class);
            PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, intent, 0);
            RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget_layout);
            views.setOnClickPendingIntent(R.id.imageView1, pendingIntent);
            appWidgetManager.updateAppWidget(appWidgetId, views);
        }
    }
} 
```

在上面的编码中，当点击 ImageView 时，intent 到 ShowActivity.class。但我真正想要的是当单击 ImageView 时，我想显示“Toast”消息而不进行任何活动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T04:21:58.320

它会显示你想要什么：

```
Intent intent = new Intent(context, ShowActivity.class);
intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);          
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
intent.setData(Uri.parse(intent.toUri(Intent.URI_INTENT_SCHEME)));
PendingIntent pendIntent = PendingIntent.getActivity(context, 0,intent, PendingIntent.FLAG_UPDATE_CURRENT);
RemoteViews views = new RemoteViews(context.getPackageName(),R.layout.widget_layout);
views.setOnClickPendingIntent(R.id.image1, pendIntent);
appWidgetManager.updateAppWidget(appWidgetId, views ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T02:53:14.030

你试过onClickListener吗？

```
 ImageView img = (ImageView) findViewById(R.id.img_id);
 img.setOnClickListener(new OnClickListener() {
 @Override
 public void onClick(View v) {
    Toast.makeText(YourActivityName.this,
            "My Toast Text", Toast.LENGTH_LONG).show();
    }
 }); 
```

# c - 如何比较两个 w_char[] 字符串

> ID：16205564
> 
> 赞同：0
> 
> 时间：2013-04-25T02:48:35.763
> 
> 标签：c, winapi

我想检查一个编辑控件是否只有 HEX 字符：

```
wchar_t valid_chars[] = {
    '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 
    'a', 'b', 'c', 'd', 'e', 'f', 
    'A', 'B', 'C', 'D', 'E', 'F', 
    0x08, 0x7f // backspace, del
};

wchar_t buf[80];  // store (wide) text from EDIT Control

GetDlgItemText(hwnd, IDC_EDT_HEX, buf, 80); 
```

所以现在我的编辑控件中的文本存储在`buf`，我将如何确保`buf`只包含来自的字符`valid_chars`？

**注意**`valid_chars`：在另一种检查击键的方法中需要退格、del 字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T03:06:17.477

```
#include <cwchar>

wchar_t valid_chars[] = {
    L'0', L'1', L'2', L'3', L'4', L'5', L'6', L'7', L'8', L'9', 
    L'a', L'b', L'c', L'd', L'e', L'f', 
    L'A', L'B', L'C', L'D', L'E', L'F', 
    0x0008, 0x007f, // backspace, del
    0x0000
};

UINT len = GetDlgItemText(hwnd, IDC_EDT_HEX, buf, 80);
for (UINT i = 0; i < len; ++i)
{
    if (std::wcschr(valid_chars, buf[i]))
        // is valid
    else
        // is not valid
} 
```

或者：

```
#include <algorithm>

wchar_t valid_chars[] = {
    L'0', L'1', L'2', L'3', L'4', L'5', L'6', L'7', L'8', L'9', 
    L'a', L'b', L'c', L'd', L'e', L'f', 
    L'A', L'B', L'C', L'D', L'E', L'F', 
    0x0008, 0x007f // backspace, del
};
wchar_t *valid_chars_end = &valid_chars[24];

UINT len = GetDlgItemText(hwnd, IDC_EDT_HEX, buf, 80);
for (UINT i = 0; i < len; ++i)
{
    if (std::find(valid_chars, valid_chars_end, buf[i]) != valid_chars_end)
        // is valid
    else
        // is not valid
} 
```

# silverlight - Silverlight 将字节 [] 转换为图像的字符串

> ID：16205569
> 
> 赞同：1
> 
> 时间：2013-04-25T02:49:16.407
> 
> 标签：silverlight, azure, encoding, bytearray, storage

在我的 silvelright 应用程序中，我有一个存储在 byte[] 中的图像。我想使用 REST 服务将图像保存到 Azure Blobl 存储，但它只接受字符串 (UploadStringTaskAsync)

我尝试了很多方法将我的 byte[] 转换为有效的 String 但没有成功：

*   Encoding.UTF8.GetString(data, 0, data.Length)

*   Encoding.Unicode.GetString(data, 0, data.Length)

*   即使使用自定义函数（至少该函数给了我正确的字符串长度）

    var sb = new StringBuilder(); foreach(数据中的字节 b) sb.Append((char)b);

    返回 sb.ToString();

但另一方面，图像总是损坏和/或不可读。我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:07:08.480

在客户端使用`Convert.FromToBase64String`方法。然后在服务器上用`Convert.FromBase64String`.

更新：
您也可以使用`WebClient.OpenWriteAsync`方法。

# logic - 在 Java 中查找无序列数据的 ArrayList

> ID：16205579
> 
> 赞同：0
> 
> 时间：2013-04-25T02:50:36.413
> 
> 标签：logic

我需要按地区 ID 获取邮政编码的数组列表，但我的地区 ID 不在提供的顺序中，并且邮政编码必须与提到的地区 ID 相关联。（这个数据是一个小例子，我有数千个邮政编码的csv文件）请帮我用Java写一个正确的逻辑。

```
Zip Codes V/s Region Ids = {"71854 , 612" ; "71865, 612"; "88008, 765"; "88021, 765" ; "88252 , 612"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T03:21:20.230

You can do this of two ways.

*   first declare a structure that contain the two values required and then fill an array with the values, as show in the example.

    struct Data{

    ```
    int zip_code, region_id;

    Data() {}

    Data(int z, int r) {

        zip_code = z;

        region_id = r;

    } 
    ```

    };

    # define MAX 100

    Data my_list[MAXN];

*   second declare declare two parallel arrays and fill these with the data requiered

    # define MAX 100

    int zip_code[MAX] = {71854, 71865, 88008, 88021, 88252};

    int region_id[MAX] = {612, 612, 765, 765, 612};

# c# - C# EnumDisplaySettings 不适用于 lpszDeviceName

> ID：16205580
> 
> 赞同：1
> 
> 时间：2013-04-25T02:50:37.733
> 
> 标签：c#, windows

如果其 IpszDeviceName 参数为空，则 EnumDisplaySettings() 有效，但如果它是设备名称，则返回 0。

这是下面代码的输出。

```
devNum =0

cb =424

DeviceID =PCI\VEN_10DE&DEV_0402&SUBSYS_0440196E&REV_A1

DeviceKey =\Registry\Machine\System\CurrentControlSet\Control\Video\{B757E378-AF2E-4826-BA9E-927C5B81B139}\0000

DeviceName =\\.\DISPLAY1

DeviceString =NVIDIA GeForce 8600 GT

Monitor name =Generic PnP Monitor

>>> EnumDisplaySettings RETURNED 0\. <<<<<<<<<<<<<<

devNum =1

cb =424

DeviceID =PCI\VEN_10DE&DEV_0402&SUBSYS_0440196E&REV_A1

DeviceKey =\Registry\Machine\System\CurrentControlSet\Control\Video\{B757E378-AF2E-4826-BA9E-927C5B81B139}\0001

DeviceName =\\.\DISPLAY2

DeviceString =NVIDIA GeForce 8600 GT

Monitor name =Generic PnP Monitor

>>> EnumDisplaySettings RETURNED 0\. <<<<<<<<<<<<<< 
```

这是源代码。

```
 public static void show_display_devices()
    {
        DISPLAY_DEVICE lpDisplayDevice = new DISPLAY_DEVICE(0);     // OUT
            DISPLAY_DEVICE monitor_name = new DISPLAY_DEVICE(0);        // OUT
        DEVMODE mode = new DEVMODE();

        int devNum = 0;
        while (EnumDisplayDevices(null, devNum, ref lpDisplayDevice, 0))
        {

            Console.WriteLine("\ndevNum =" + devNum);
            Console.WriteLine("cb =" + lpDisplayDevice.cb);
            Console.WriteLine("DeviceID =" + lpDisplayDevice.DeviceID);
            Console.WriteLine("DeviceKey =" + lpDisplayDevice.DeviceKey);
            Console.WriteLine("DeviceName =" + lpDisplayDevice.DeviceName.Trim());
            Console.WriteLine("DeviceString =" + lpDisplayDevice.DeviceString.Trim());
            // Show monitor name:

            EnumDisplayDevices( lpDisplayDevice.DeviceName, 0, ref monitor_name, 0);
            Console.WriteLine("Monitor name =" + monitor_name.DeviceString.Trim());

            // Show the device's settings:
            if (EnumDisplaySettings(lpDisplayDevice.DeviceName,
                    ENUM_CURRENT_SETTINGS,
                    ref mode) == true) // Succeeded
            {
                Console.WriteLine("Current Mode:\n\t" +
                    "{0} by {1}, " +
                    "{2} bit, " +
                    "{3} degrees, " +
                    "{4} hertz",
                    mode.dmPelsWidth,
                    mode.dmPelsHeight,
                    mode.dmBitsPerPel,
                    mode.dmDisplayOrientation * 90,
                    mode.dmDisplayFrequency);
            }
            else
            {
                Console.WriteLine(">>>  EnumDisplaySettings  RETURNED 0\.  <<<<<<<<<<<<<<");
            }
            ++devNum;
        }
    }

    [DllImport("User32.dll")]
    private static extern bool EnumDisplayDevices(
        string lpDevice, int iDevNum,
        ref DISPLAY_DEVICE lpDisplayDevice, int dwFlags);

          [DllImport("User32.dll", SetLastError=true)]
    [return: MarshalAs(UnmanagedType.Bool)]
    public static extern Boolean EnumDisplaySettings(
        [param: MarshalAs(UnmanagedType.LPTStr)]
        string lpszDeviceName,
        [param: MarshalAs(UnmanagedType.U4)]
        int iModeNum,
        [In, Out]
        ref DEVMODE lpDevMode); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-19T19:13:39.537

您需要将 lpDisplayDevice.DeviceName 转换为[EnumDisplaySettings](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162611%28v=vs.85%29.aspx)函数可以理解的字节数组。最好使用String 类的[扩展方法来完成：](http://msdn.microsoft.com/en-ca/library/bb383977.aspx)

```
public static class StringExtensions
{
    public static byte[] ToLPTStr(this string str)
    {
        var lptArray = new byte[str.Length+1];

        var index = 0;
        foreach (char c in str.ToCharArray())
            lptArray[index++] = Convert.ToByte(c);

        lptArray[index] = Convert.ToByte('\0');

        return lptArray;
    }
} 
```

然后，将 EnumDisplaySettings extern 声明的签名更改为采用 lpszDeviceName 的字节数组：

```
 [DllImport("User32.dll")]
    [return: MarshalAs(UnmanagedType.Bool)]
    internal static extern Boolean EnumDisplaySettings(
        byte[] lpszDeviceName,
        [param: MarshalAs(UnmanagedType.U4)]
        int iModeNum,
         [In, Out]
        ref DEVMODE lpDevMode); 
```

然后，您可以像这样调用 EnumDisplaySettings：

```
EnumDisplayDevices(lpDisplayDevice.DeviceName.ToLPTStr(), 0, ref monitor_name, 0); 
```

# html - 列表中的每一个附加项目都与一个额外的缩进级联

> ID：16205581
> 
> 赞同：0
> 
> 时间：2013-04-25T02:50:42.830
> 
> 标签：html

我正在尝试重复 div .box (5) 次（现在在每个框中使用相同的确切材料，之后会更改内容）并且每一行都比下一行缩进更多。

这是我的代码的链接： http: [//jsfiddle.net/infoed/DN8x4/1/](http://jsfiddle.net/infoed/DN8x4/1/)：

```
<DOCTYPE! html>
<html>

<head>
    <title> Breaditt </title>
    <style>

html, body {
font-family: sans-serif;
margin: 0;
padding: 0; }

#logobar {
background: rgb(206, 211, 255); }

#logobar ul {
list-style-type: none;
margin: 40;
padding: 40; }

#logobar li {
display: inline;
padding: 20;
font-size: 52;
font-family: Comic sans MS;}

.box {
margin-left: 50px;
width: 650px;
height: 80px;
display: inline-block; }

.box .headline  {
font-size: 18px;
color: black;
list-style-type: none; 
display: inline-block; }

.box .submitted {
display: inline-block; }

.box h {
display: inline-block; }

.box img {
float: left;
margin-right: 10px;
}

.box {
clear:both;
}

    </style>
</head>

<body>

    <div id="logobar">
        <ul>
        <li>Breaditt: Bread News Aggregator</li>

        <li><img src="img/logo.jpg" alt="breaditt cat" width="250" height="200"></li>
        </ul>
    </div>

    <div id="breadnews">
        <div class="box">
        <img src="img/counter.jpg" alt=counter width="75" height="75" />
        <img src="img/bread.jpg" alt=article-logo width="75" height="75" />
        <div class="headline"><a href="http://breadcats.tumblr.com">Website dedicated to cats with bread</a> </div>
        <div class="submitted"><h>submitted 2 days ago by Alex Doggrowski</h> </div>
        <div class="share"><h>14,400 Comments. Share    Save    hide    report</h> </div>

        <div id="breadnews">
        <div class="box">
        <img src="img/counter.jpg" alt=counter width="75" height="75" />
        <img src="img/bread.jpg" alt=article-logo width="75" height="75" />
        <div class="headline"><a href="http://breadcats.tumblr.com">Website dedicated to cats with bread</a> </div>
        <div class="submitted"><h>submitted 2 days ago by Alex Doggrowski</h> </div>
        <div class="share"><h>14,400 Comments. Share    Save    hide    report</h> </div>

        <div id="breadnews">
        <div class="box">
        <img src="img/counter.jpg" alt=counter width="75" height="75" />
        <img src="img/bread.jpg" alt=article-logo width="75" height="75" />
        <div class="headline"><a href="http://breadcats.tumblr.com">Website dedicated to cats with bread</a> </div>
        <div class="submitted"><h>submitted 2 days ago by Alex Doggrowski</h> </div>
        <div class="share"><h>14,400 Comments. Share    Save    hide    report</h> </div>

        <div id="breadnews">
        <div class="box">
        <img src="img/counter.jpg" alt=counter width="75" height="75" />
        <img src="img/bread.jpg" alt=article-logo width="75" height="75" />
        <div class="headline"><a href="http://breadcats.tumblr.com">Website dedicated to cats with bread</a> </div>
        <div class="submitted"><h>submitted 2 days ago by Alex Doggrowski</h> </div>
        <div class="share"><h>14,400 Comments. Share    Save    hide    report</h> </div>

        <div id="breadnews">
        <div class="box">
        <img src="img/counter.jpg" alt=counter width="75" height="75" />
        <img src="img/bread.jpg" alt=article-logo width="75" height="75" />
        <div class="headline"><a href="http://breadcats.tumblr.com">Website dedicated to cats with bread</a> </div>
        <div class="submitted"><h>submitted 2 days ago by Alex Doggrowski</h> </div>
        <div class="share"><h>14,400 Comments. Share    Save    hide    report</h> </div>

        </div>

</body>

</html> 
```

有什么帮助吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T02:54:36.100

您反复打开`<div id="breadnews">`and `<div class="box">`，但您也从不关闭。

对于初学者，ID 必须是唯一的，因此您可能不想复制粘贴该`<div id="breadnews">`行。之后，只需`</div>`在每个块之后添加，你应该会很好。

*另外，请正确*使用 JSFiddle 。当有完美可用的 CSS 和 JS 框时，不要将所有内容都塞进 HTML 框中。最后，是`<!DOCTYPE html>`，不是`<doctype! html>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T02:57:24.670

Kolink 的所有观点都是正确的。这是一个更新的小提琴：

[http://jsfiddle.net/DN8x4/4/](http://jsfiddle.net/DN8x4/4/)

```
 <div id="logobar">
        <ul>
        <li>Breaditt: Bread News Aggregator</li>

            <li><img src="img/logo.jpg" alt="breaditt cat" width="250" height="200" /></li>
        </ul>
    </div>

    <div id="breadnews">
        <div class="box">
        <img src="img/counter.jpg" alt=counter width="75" height="75" />
        <img src="img/bread.jpg" alt=article-logo width="75" height="75" />
        <div class="headline"><a href="http://breadcats.tumblr.com">Website dedicated to cats with bread</a> </div>
        <div class="submitted"><h>submitted 2 days ago by Alex Doggrowski</h> </div>
            <div class="share"><h>14,400 Comments. Share    Save    hide    report</h> </div></div>

        <div id="breadnews">
        <div class="box">
        <img src="img/counter.jpg" alt=counter width="75" height="75" />
        <img src="img/bread.jpg" alt=article-logo width="75" height="75" />
        <div class="headline"><a href="http://breadcats.tumblr.com">Website dedicated to cats with bread</a> </div>
        <div class="submitted"><h>submitted 2 days ago by Alex Doggrowski</h> </div>
            <div class="share"><h>14,400 Comments. Share    Save    hide    report</h> </div></div>

        <div id="breadnews">
        <div class="box">
        <img src="img/counter.jpg" alt=counter width="75" height="75" />
        <img src="img/bread.jpg" alt=article-logo width="75" height="75" />
        <div class="headline"><a href="http://breadcats.tumblr.com">Website dedicated to cats with bread</a> </div>
        <div class="submitted"><h>submitted 2 days ago by Alex Doggrowski</h> </div>
            <div class="share"><h>14,400 Comments. Share    Save    hide    report</h> </div></div>

        <div id="breadnews">
        <div class="box">
        <img src="img/counter.jpg" alt=counter width="75" height="75" />
        <img src="img/bread.jpg" alt=article-logo width="75" height="75" />
        <div class="headline"><a href="http://breadcats.tumblr.com">Website dedicated to cats with bread</a> </div>
        <div class="submitted"><h>submitted 2 days ago by Alex Doggrowski</h> </div>
            <div class="share"><h>14,400 Comments. Share    Save    hide    report</h> </div></div>

        <div id="breadnews">
        <div class="box">
        <img src="img/counter.jpg" alt=counter width="75" height="75" />
        <img src="img/bread.jpg" alt=article-logo width="75" height="75" />
        <div class="headline"><a href="http://breadcats.tumblr.com">Website dedicated to cats with bread</a> </div>
        <div class="submitted"><h>submitted 2 days ago by Alex Doggrowski</h> </div>
            <div class="share"><h>14,400 Comments. Share    Save    hide    report</h> </div>

        </div> 
```

标记仍然需要一些工作（例如修复重复的 id）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T02:59:52.470

您`<div class="box">`的 's 没有关闭。，请参阅：

[http://jsfiddle.net/DN8x4/5/](http://jsfiddle.net/DN8x4/5/)

# vb6 - 字符串表中包含的 Visual Basic 6 命令

> ID：16205584
> 
> 赞同：2
> 
> 时间：2013-04-25T02:50:57.627
> 
> 标签：vb6, embedded-resource, resource-files

情况就是这样，我有这个字符串表，在一个`.res`文件中，我有一些字符串加载到其中一个表单中，比如 Form1。在一个表单上，我想弹出一个消息框，其中包含使用从字符串表加载的消息`LoadResString(1234)`。

当资源 ID 1234 包含`"This is testing vbNewline This is a new line!."`该字符串时，是否有可能使用上述函数将字符串加载到消息框（弹出框）上？我已经对其进行了测试：它还将打印出`"vbNewline"`命令并且不解析它。有没有其他方法可以解析生成这种消息的所述字符串？

> 这是测试
> 这是新行！

我希望出现这种信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T03:23:27.390

You are trying to put a VB constant in a String expression so it is treating it like text, you can try using the [Replace](http://msdn.microsoft.com/en-US/library/bt3szac5%28v=VS.80%29.aspx) Function ( I realize this is a .Net link but the signature is the same as the VB6 method) to remove your string and substitute the correct value something like this should work:

```
MsgBox (Replace(LoadResString(1234), "vbNewLine", vbNewLine)) 
```

or create a function like this:

```
Public Function ParseNewLine(value As String) As String
    ParseNewLine = Replace(value, "vbNewLine", vbNewLine)
End Function 
```

and call it like this:

```
MsgBox (ParseNewLine(LoadResString(1234))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T14:48:49.127

为什么不将换行序列嵌入到 RES 文件中。如果您使用的是资源加载项，则可以按`Ctrl`+`Enter`插入这些字符。

在 Visual Studio 的资源编辑器和原始资源脚本中，您可以使用`\n`.

# java - 更改 Jackson 中的默认序列化行为

> ID：16205586
> 
> 赞同：2
> 
> 时间：2013-04-25T02:51:17.700
> 
> 标签：java, json, serialization, jackson

我正在使用 Jackson 库编写自定义序列化程序，并将它们注册到自定义 ObjectMapper 中。但是，我还想更改默认序列化，以便在未编写更具体的自定义序列化时简单地输出对象的字符串表示形式。

例如，假设除了默认序列化程序之外，我还为类“Map”和“Entry”编写了自定义序列化程序。然后我的自定义 ObjectMapper 中的序列化模块可能如下所示：

```
SimpleModule module = new SimpleModule("module", new Version(0, 1, 0, "alpha", null, null));
module.addSerializer(Entry.class, new EntryJsonSerializer());
module.addSerializer(Map.class, new MapJsonSerializer());
module.addSerializer(Object.class, new DefaultJsonSerializer());
this.registerModule(module); 
```

但是，我发现该模块将使用 DefaultJsonSerializer 来序列化 Map 和 Entry 对象（因为它们也是 Object 对象）。

如何更改默认序列化行为，同时确保按预期序列化 Entry 和 Map 对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T17:12:02.973

问题可能是值的实际类型（例如，字符串）用于定位序列化程序。

如果您知道它们，一种解决方案是为值类型注册序列化程序。

或者，您可以强制使用静态类型；这将使序列化程序查找使用声明的（静态）类型，而不是实际的运行时类型。这可以通过以下方式完成：

```
objectMapper.enable(MapperFeature.USE_STATIC_TYPING); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-30T20:25:37.607

我通过编写一个序列化程序并使用一系列 if 语句来实现优先级来解决这个问题：

```
public final class UnifiedJsonSerializer extends JsonSerializer<Object> {
    @Override
    public void serialize(Object object, JsonGenerator jgen, SerializerProvider provider)
            throws IOException, JsonProcessingException {
        if (object instanceof Entry) {
            // Entry serialization code
        } else if (object instanceof Map) {
            // Map serialization code
        } else  {
            // default serialization code
        }
} 
```

# iphone - iOS：网络应用的最佳实践

> ID：16205587
> 
> 赞同：0
> 
> 时间：2013-04-25T02:51:19.050
> 
> 标签：iphone, ios, ipad

我正在为 iphone 和 ipad 构建一个新应用程序，我需要知道与我的 API 通信的最佳实践，通常我会在每个视图中调用 API 1 次或多次。我发现我应该使用`NSURLConnection`但在处理多个连接时特别分配委托`self`将使组织任务和连接成为一个非常困难的非组织过程。

以前有人遇到过这个问题吗？最佳做法是什么？我应该创建 1 个类来处理所有请求吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T03:10:02.300

虽然理解 NSURLConnection 很有用，但（你需要）没有必要重新发明轮子。

只需使用[AFNetworking](http://afnetworking.com/)。它是异步的，易于使用，并且您会获得不错的附加功能，例如状态栏中的网络活动微调器会在有网络活动时显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T04:54:11.807

我很久以前就经历过这个教条，解决方案是使用 blocks 和[AFNetworking](http://afnetworking.com/)。

使用块的优点是它允许从同一个控制器调用相同的 API，而无需区分每个调用，因为每个调用都有自己的要执行的块。

如果您需要此类应用程序的完整架构，只需遵循基本的 OOP 原则，将网络通信逻辑分离到一个单例类（AFHTTPClient 的扩展）中，然后可以从模型类中调用，如果是数据密集型应用程序或控制器。

我创建的示例客户端扩展如下。

```
#import <Foundation/Foundation.h>
#import <AFNetworking.h>

@interface CRLClient : AFHTTPClient

+ (CRLClient*) sharedClient;
+ (void) setBaseURL:(NSString*)url;

- (void) uploadFiles:(NSArray*)files
                path:(NSString*)path
          parameters:(NSDictionary*)parameters
       progressBlock:(void (^)(NSUInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite))block
             success:(void (^)(AFHTTPRequestOperation *, id))success failure:(void (^)(AFHTTPRequestOperation *, NSError *))failure;
@end

#import "CRLClient.h"

@implementation CRLClient

static NSString *CRLBaseURL = nil;

+ (void) setBaseURL:(NSString*)url;
{
    CRLBaseURL = [url copy];
}

+ (CRLClient*) sharedClient
{
    static CRLClient* sharedInstance = nil;

//    dispatch_once_t dispOnce;
    @synchronized (sharedInstance) {
        if (!sharedInstance) {
//    dispatch_once(&dispOnce, ^{
            sharedInstance = [[CRLClient alloc] initWithBaseURL:[NSURL URLWithString:CRLBaseURL]];
        }
//    });
    }

    return sharedInstance;
}

- (id)initWithBaseURL:(NSURL *)url {
    self = [super initWithBaseURL:url];
    if (!self) {
        return nil;
    }

    [self registerHTTPOperationClass:[AFJSONRequestOperation class]];
    [self setDefaultHeader:@"Accept" value:@"application/json"];
    self.parameterEncoding = AFJSONParameterEncoding;

    return self;
}

- (void) uploadFiles:(NSArray*)files
                path:(NSString*)path
          parameters:(NSDictionary*)parameters
       progressBlock:(void (^)(NSUInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite))block
             success:(void (^)(AFHTTPRequestOperation *, id))success failure:(void (^)(AFHTTPRequestOperation *, NSError *))failure
{

    NSMutableURLRequest *request =
    [self multipartFormRequestWithMethod:@"POST"
                                    path:path
                              parameters:parameters
               constructingBodyWithBlock:
     ^(id <AFMultipartFormData>formData) {

         for (CRLMultiPartFile *file in files) {
             NSAssert(file.name, @"Name cannot be nil");
             NSAssert(file.file, @"Nothing found to upload");
             NSAssert(file.filename, @"FileName cannot be nil");
             NSAssert(file.mimeType, @"Must set Mime-Type for %@", file.filename);
             [formData appendPartWithFileData:file.file name:file.name fileName:file.filename mimeType:file.typeString];
         }
    }];

    AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
    [operation setUploadProgressBlock:block];
    [operation setCompletionBlockWithSuccess:success failure:failure];
    [self enqueueHTTPRequestOperation:operation];
} 
```

# c - 当我尝试检查空行时出现分段错误？

> ID：16205588
> 
> 赞同：1
> 
> 时间：2013-04-25T02:51:23.473
> 
> 标签：c, string, segmentation-fault

所以这是我到目前为止的代码：

```
 char *c;
char inputString[200];

//get number of lines
c=fgets(inputString, 200, in_file);
while(c!=NULL){
    numLines++;
    c=fgets(inputString, 200, in_file);
}

rewind(in_file);

//array of instructions
char** instruc = malloc(numLines * 200); 

c = fgets(inputString, 200, in_file);

//fill the array of instructions.   
while (c != NULL){
    //allocate space for the string in the index of the array
    instruc[i] = malloc(200);
    strcpy(instruc[i], inputString);
    if (strcmp(instruc[i], "\n")==0){
        fprintf(stderr, "Blank line.\n");
        exit(-2);
    }
    i++;
    c = fgets(inputString, 200, in_file);
} 
```

出于某种原因，我的 strcmp(instruc[i], "/n") 没有在脚本中捕获新行，因此每当我的代码遇到新行时，都会出现分段错误。这是我传入的示例脚本：

```
CONST R1 11

PUSH R1
CONST R2 12 
```

在 CONST R1 11 和 PUSH R1 之间，出现分段错误。任何人都可以帮助我如何检查行之间的空白吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T03:17:49.747

空（空白）行`"\n"`不适`"/n"`用于您的程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T04:00:19.533

这段代码中的逻辑错误

```
if (strcmp(instruc[i], "/n")==0){
        fprintf(stderr, "Blank line.\n");
        exit(-2);
    } 
```

在这里，您使用“/n”而不是“\n”来检查空行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T03:25:22.400

在您的代码中的其他问题。

```
char** instruc = malloc(numLines * 200); 
```

正如您想象的那样，这不会为您提供动态二维字符数组。

这是创建动态字符串数组的[SSCCE ..](http://sscce.org/)

```
#include <stdio.h>
#include <stdlib.h>

#define ROW_SZ 5        //row size is number of strings
#define COL_SZ 200      //column size is number of characters in a string

int main()
{
int i;
char** str = malloc(ROW_SZ * sizeof(char*) );     //str is assigned char**

for ( i = 0; i < ROW_SZ; i++ )
    str[i] = malloc(COL_SZ * sizeof(char) );   //str[i] is assigned char*

// code here to use your dynamic 2-d string

for ( i = 0; i < ROW_SZ; i++ )
    free(str[i]);

free(str);

return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T03:27:38.083

空行与“\n”而不是“/n”进行比较。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T11:02:03.290

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main(void){
    char inputString[200];
    size_t i, numLines = 0;
    FILE *in_file = fopen("input.txt","r");

    while(NULL!=fgets(inputString, sizeof(inputString), in_file)){
        if (strcmp(inputString, "\n")==0){
            fprintf(stderr, "Blank line.\n");
            exit(-2);
        }
        ++numLines;
    }

    rewind(in_file);

    char** instruc = malloc(numLines * sizeof(char*)); 

    for(i=0;i<numLines;++i){
        instruc[i] = malloc(sizeof(inputString));
        fgets(instruc[i], sizeof(inputString), in_file);
    }
    fclose(in_file);
    //do something
    //deallocate memory
    return 0;
} 
```

# php - 将 Include 分配给字符串变量 PHP

> ID：16205590
> 
> 赞同：0
> 
> 时间：2013-04-25T02:51:35.760
> 
> 标签：php, include

我有需要进一步处理的模板文件，因此想使用包含而不使用 file_get_contents 将其分配给字符串变量。这样做的原因是因为最终输出是通过ob缓冲的，并且包含需要执行的php。如果我使用 file_get_contents 它不会执行。问题是如果我使用 $output = include 'file.php' 它会打印输出而不分配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T03:05:18.170

尝试这个：

```
ob_start();

include 'file.php';

$output = ob_get_clean(); 
```

# mips - MIPS 所需的最小内存空间

> ID：16205593
> 
> 赞同：1
> 
> 时间：2013-04-25T02:51:54.740
> 
> 标签：mips

运行程序（其部分如下所示）以及在 5 个流水线阶段的 MIPS 上运行时所需的最小内存量是多少，对于定点操作，每个阶段需要 2 纳秒？在浮点运算阶段 EX 需要 16 ns。指令仅在其执行所需的流水线阶段的最后数量（假设不存在流水线冲突）。

```
.data
    Pf1:    .word 0x41400000
    Vet1:   .double 1.0, 2.0, 3.0, 4.0

.text

leaf_example:
    addi $sp, $sp, -48
    sw $s0, 0($sp)
    sll $t0, $s0, 5
label:  addu $t0, $t0, $s2
    sll $t0, $t0, 3
    addu $t0, $a1, $t0
    bgt $t0, $s0, label
    l.d $f18, 0($t0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-13T06:20:17.277

AFAIK，流水线和在特定阶段花费的时间有助于动态指令计数和/或指令处理时间，而不是存储程序所需的内存。

`.text`从 0x10010000 开始

`.data`从 0x00400000 开始

您需要多少内存取决于硬件/芯片组是否可以在不同位置虚拟呈现内存而不需要物理内存来填补空白，这似乎是合理的。

# 没有虚拟/逻辑内存管理

如果没有提供逻辑内存管理的芯片组或系统，您似乎需要 4194304 字节，如果没有`.data`部分，则需要 4 MB。如果你有任何东西`.data`，那么它至少需要 256MB + 64 KB + 你存储的字节数。

在您的示例中，这意味着您需要 256 MB + 64 KB + 36 字节 = 268501028 字节，或大约 256.07 MB。

# 使用虚拟内存管理

假设您的 MIPS 程序运行在进行虚拟内存管理的平台上。然后系统可以在位置 0x10010000 处显示内存，例如，实际上没有物理定位所有先前的地址（如 0x1000ffff）。

此外，如果您使用修改后的 MIPS 内存布局，此分析可能会起作用。在 MARS 中，您可以通过设置`.data`从地址 0x0 开始来压缩内存。

这将是指令和数据的直接计算。在您的示例中，由于`ble`和`l.d`是伪指令，它们将指令数量从明显的 8 条增加到 11 条真实机器指令。11 个字`.text`（44 个字节）加上 9 个字`.data`（36 个字节）得到 80 个字节。

# r - 绘制使用 bbmle 包创建的非线性模型的残差

> ID：16205595
> 
> 赞同：0
> 
> 时间：2013-04-25T02:52:10.633
> 
> 标签：r

我正在尝试获取我用 bbmle 构建的非线性模型的残差图，但不知道如何处理此任务。bble 包有一些关于残差的注释，但无法绘制直方图之类的东西。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T03:49:51.583

残差（）函数似乎工作。然后你可以做任何你想做的事情——直方图、qqplot、残差散点图与预测值（predict() 也有一个方法）。例如：

```
set.seed(1002)
lymax <- c(0,2)
lhalf <- 0
x <- runif(200)
g <- factor(rep(c("a","b"),each=100))
y <- rnbinom(200,mu=exp(lymax[g])/(1+x/exp(lhalf)),size=2)
dat <- data.frame(y,g,x)

fit3 <- mle2(y~dnbinom(mu=exp(lymax)/(1+x/exp(lhalf)),size=exp(logk)),
    parameters=list(lymax~g),
    start=list(lymax=0,lhalf=0,logk=0),
    data=dat)

par(mfrow=c(2,2))
hist(residuals(fit3))
qqnorm(residuals(fit3))
hist(residuals(fit3, type="response"))
qqnorm(residuals(fit3, type="response")) 
```

![在此处输入图像描述](https://i.stack.imgur.com/j3LbT.png)

还是我错过了重点？

# javascript - 具有可观察 MVVM 的 KendoUI 网格在弹出编辑后自动选择行

> ID：16205596
> 
> 赞同：0
> 
> 时间：2013-04-25T02:52:13.730
> 
> 标签：javascript, jquery, kendo-ui, kendo-grid

我正在使用带有 MVVM（可观察对象）的 Kendo UI 网格。我试图在创建或编辑后自动选择一行。在“保存”事件之后发生了一些事情，它破坏了对网格选择方法的调用。我的解决方法是一个明显的 hack（但现在有效），通过设置 100 毫秒的超时来让所有事件等完成。Kendo 文档似乎没有在“保存”之后提到事件（例如“保存”方法或类似的方法）。有这样的动物吗？你能想出一个更好的方法来做到这一点（我可以在某个地方附加一个回调会让我更开心）：

```
...
testRequestEdited: function(e) {
    var uid = e.model.uid;
    console.log(testRequestGrid.tbody.find(">tr[data-uid='"+uid+"']"));
    // some event happens after "save" that clobbers the select
    // this timeout is not the right way, but I will try it for now.
    setTimeout(function() {
        testRequestGrid.select(testRequestGrid.tbody.find(">tr[data-uid='"+uid+"']"));
    }, 100);
},
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:30:59.647

添加新行触发的事件：（ 在添加新行`dataBinding`之前），`dataBound`（添加新行时），然后新行进入编辑状态，立即触发`edit`事件（从此时起它的行为与正常编辑一样）。然后`save`当对数据源进行任何更改时触发该事件，这都是网格事件。

但是，在`save`也发生了一个 dataSource 事件之后 - `change`。您可以像这样在网格初始化后绑定到它

```
$('#grid').data('kendoGrid').dataSource.bind("change",function(e)
  { 
    if(e.action=="itemchange")
    {
      console.log(e)
      //do your stuff
    }
   }); 
```

e：dataSource`change`是链中的最后一个事件。

# ios - Xcode 中的测试链接器错误

> ID：16205597
> 
> 赞同：1
> 
> 时间：2013-04-25T02:52:23.693
> 
> 标签：ios, xcode, linker-errors

[我按照使用TDD 站点](http://codingsolutions.blogspot.com/2012/12/tdd-kata-create-model-view-presenter-in.html)中的 xcode/appcode 构建测试的说明进行操作。我顺利完成了最初的部分并开始在我自己的项目中进行实验，但我不断收到链接错误，无法弄清楚从哪里来？

我得到的输出是这个

```
Ld /Users/prasanth/Library/Developer/Xcode/DerivedData/acidplus-ctbnayjfiyhfxkccqyopjsnfagos/Build/Products/Debug-iphonesimulator/acidplusTests.octest/acidplusTests normal i386
cd /Volumes/Defiant/Freeradical/freeradical_newacidbase/acidplus
setenv IPHONEOS_DEPLOYMENT_TARGET 6.1
setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -bundle -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.1.sdk -L/Users/prasanth/Library/Developer/Xcode/DerivedData/acidplus-ctbnayjfiyhfxkccqyopjsnfagos/Build/Products/Debug-iphonesimulator -LLibs/OCMock/iOS -LLibs/OCMock/iOS/OCMock -F/Users/prasanth/Library/Developer/Xcode/DerivedData/acidplus-ctbnayjfiyhfxkccqyopjsnfagos/Build/Products/Debug-iphonesimulator -F/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.1.sdk/Developer/Library/Frameworks -F/Applications/Xcode.app/Contents/Developer/Library/Frameworks -filelist /Users/prasanth/Library/Developer/Xcode/DerivedData/acidplus-ctbnayjfiyhfxkccqyopjsnfagos/Build/Intermediates/acidplus.build/Debug-iphonesimulator/acidplusTests.build/Objects-normal/i386/acidplusTests.LinkFileList -Xlinker -objc_abi_version -Xlinker 2 -force_load Libs/OCMock/iOS/libOCMock.a -fobjc-arc -fobjc-link-runtime -Xlinker -no_implicit_dylibs -mios-simulator-version-min=6.1 -framework CoreGraphics -framework SenTestingKit -framework UIKit -framework Foundation -lOCMock -o /Users/prasanth/Library/Developer/Xcode/DerivedData/acidplus-ctbnayjfiyhfxkccqyopjsnfagos/Build/Products/Debug-iphonesimulator/acidplusTests.octest/acidplusTests

Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_BPG_testModelObject", referenced from:
      objc-class-ref in testModelTest.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我尝试查看丢失的源或链接库，但找不到任何东西。有谁知道还有什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:22:09.657

您是否尝试过以下方法：

转到 XCode，在 Project 下 -> 进行清理并再次构建您的解决方案。

# assembly - 汇编语言指令

> ID：16205601
> 
> 赞同：0
> 
> 时间：2013-04-25T02:53:03.993
> 
> 标签：assembly, x86, nasm

反转寄存器内容的指令是什么？

我正在使用这两条指令对两个寄存器进行 AND 逻辑运算，并将其结果存储在第三个单独的寄存器中：

```
and ax, dx ; AND operation b/w ax and dx register and storing its result in ax first then 
mov bx, ax ; storing result in bx. 
```

它不能在一条指令中同时发生（我的意思是操作并将结果存储在单独的寄存器中）吗？

我正在使用 NASM 汇编器和 AFD 调试器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T03:23:44.443

No, it can't as a single operation can not act upon 3 registers.

You're suggesting that you can do:

```
bx = ax & dx 
```

as a single instruction, and that's simply not the case. What you have instead is:

```
ax = ax & dx
bx = ax 
```

You could always swap it around:

```
mov bx, ax
and bx, dx 
```

but it's still the same number of instructions.

# ruby-on-rails - 是否可以将 RSA SecurID 集成到 Rails 应用程序中？

> ID：16205605
> 
> 赞同：1
> 
> 时间：2013-04-25T02:53:43.420
> 
> 标签：ruby-on-rails, ruby, authentication, securid

我有一个相当标准的 Ruby on Rails 应用程序。有没有办法将 RSA SecurID 或 RSA 基于风险的身份验证集成到登录过程中？这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:21:02.463

所有企业调用双因素身份验证系统都支持 Radius - 一种非常有用的身份验证协议。如果有 Ruby Radius 模块，那么我建议你使用它。那将是最标准的标准。LDAP 也可能是一种选择。

如果您还没有接受双因素解决方案，您可以考虑我们的解决方案，它有一个 Ruby 模块（也获得了 LGPL 许可），并且可以与我们的开源社区版本一起使用。API 包在这里： http: [//www.wikidsystems.com/downloads/network-clients](http://www.wikidsystems.com/downloads/network-clients)。

# android - 从 Android 中的库项目访问可绘制资源

> ID：16205608
> 
> 赞同：0
> 
> 时间：2013-04-25T02:53:47.077
> 
> 标签：android, image, shared-libraries

我正在尝试从我的库项目中的 android 资源文件中搜索可绘制（图片）在没有实际 android 项目的上下文的情况下是否可能，或者我需要添加它吗？另外，我如何能够通过我的库项目通过使用字符串作为 ID 的名称找到 ID，然后将其转换为适当的整数以设置后台资源。

这是我迄今为止尝试过的：这有效但只查看库项目中的资源，我需要查看当前应用程序项目中的资源

```
 try
            {
                Class res = R.drawable.class;
                Field field =
                    res.getField("string_ID_I_want");
                drawableId = field.getInt(null);
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T03:09:14.923

实际的可绘制资源被编译到您的应用程序中，因此访问它们与访问普通应用程序资源没有什么不同。

假设库中drawable的ID是big_picture。那么 R.drawable.big_picture 就是你要加载的drawable的ID。你不必使用内省。如果 R.drawable.big_picture 不可用，则您的项目设置有问题（或编译错误）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-25T03:31:26.833

```
Context context = getApplicationContext();
Resources r = context.getResources();
r.getDrawable(id);  //pass your drawable id in it, could be R.id.whatever 
```

# amazon-mws - 亚马逊 MWS：XML productFeeds 出现错误 99019（SubmitFeed 类型为 _POST_PRODUCT_DATA_）

> ID：16205609
> 
> 赞同：1
> 
> 时间：2013-04-25T02:53:50.847
> 
> 标签：amazon-mws

当我尝试通过亚马逊 MWS API 向亚马逊市场添加产品（通过“_POST_PRODUCT_DATA_”类型的 SubmitFeed）时，我收到以下错误：

> [Marketplace : Amazon.de] “数量”或“fulfillment_center_id”字段中需要一个有效值。

但是我的 Product.xsd 和官方文档中都没有“数量”或“fulfillment_center_id”字段。同样，完全相同的提要在我的亚马逊 MWS 沙盒账户上也能正常工作。我错过了什么？

完整的 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<AmazonEnvelope>
    <Header>
        <DocumentVersion>1.01</DocumentVersion>
        <MerchantIdentifier>XXX</MerchantIdentifier>
    </Header>
    <MessageType>Product</MessageType>
    <Message>
        <MessageID>1</MessageID>
        <OperationType>Update</OperationType>
        <Product>
            <SKU>123456</SKU>
            <StandardProductID>
                <Type>EAN</Type>
                <Value>767715012826</Value>
            </StandardProductID>
            <ProductTaxCode>A_GEN_TAX</ProductTaxCode>
            <Condition>
                <ConditionType>New</ConditionType>
                <ConditionNote>Zustand/condition: neu OVP</ConditionNote>
            </Condition>
            <DescriptionData>
                <Title>Bellydance for Fitness and Fun</Title>
                <Manufacturer>New World 2011</Manufacturer>
            </DescriptionData>
            <ProductData>
                <Music>
                    <ProductType>
                        <MusicPopular>
                            <MediaType>audioCD</MediaType>
                            <NumberOfDiscs>1</NumberOfDiscs>
                            <Genre>New Age</Genre>
                        </MusicPopular>
                    </ProductType>
                </Music>
            </ProductData>
        </Product>
    </Message>
</AmazonEnvelope> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T02:53:50.847

1.  确保在 Feed 内的标签“MerchantIdentifier”中使用正确的“Merchant Token”（不是商家 ID）（这没有很好的记录）。

    ```
    <MerchantIdentifier>YOUR_MERCHANT_TOKEN</MerchantIdentifier> 
    ```

    `Sellercentral > Settings > Account Info`您应该会在页面底部的部分下方看到您的商家令牌`Return Information`。如果商家令牌不存在（这是一个常见错误），请联系卖家支持并要求提供正确的商家令牌：`Please send me my Merchant Token (NOT merchant id) for use with 3rd party software.`

2.  尽量省略描述产品的附加标签，尤其是元素`<ProductData>`内的整个部分`<Product>`。每当我指定该`<ProductData>`部分时，我都会收到错误 99019。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T15:10:46.427

MWS 错误消息中的字段名称与 XML 结构不匹配。我假设它们与平面文件 (CSV) 列匹配，但实际上并未检查。

您说“我尝试添加产品”，而我猜测在替换库存提要时发生了上述错误，这就是为什么您在 Product.xsd 中找不到任何此类内容的原因。

对应的 XML 元素是`Quantity`和`FulfillmentCenterID`，都在[Inventory.xsd](https://images-na.ssl-images-amazon.com/images/G/01/rainier/help/xsd/release_1_9/Inventory.xsd)中定义。

# android - Android 中位图 factory.decodefile 的 java.lang.outofmemory 错误

> ID：16205611
> 
> 赞同：1
> 
> 时间：2013-04-25T02:53:51.567
> 
> 标签：android, bitmap

首先我调用 MediaStore.ACTION_IMAGE_CAPTURE 意图打开相机然后我从这个函数中获取保存的捕获图像路径。

```
private String getLastImageId(){
    String[] imageColumns = { MediaStore.Images.Media._ID, MediaStore.Images.Media.DATA };
    String imageOrderBy = MediaStore.Images.Media._ID+" DESC";
    Cursor imageCursor = managedQuery(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, imageColumns, null, null, imageOrderBy);
    if(imageCursor.moveToFirst()){
        int id = imageCursor.getInt(imageCursor.getColumnIndex(MediaStore.Images.Media._ID));
        String fullPath = imageCursor.getString(imageCursor.getColumnIndex(MediaStore.Images.Media.DATA));
        //imageCursor.close();
        return fullPath;
    }else{
        return "";
    }
} 
```

然后我将该路径作为参数传递给产品对象属性。将该对象添加到产品列表中，该列表由自定义适配器显示。我在 listView 中显示产品标题和图像

在自定义适配器类中，我从它获取产品获取产品标题和路径从路径制作位图并将其分配给包含图像视图的产品持有者，对于第一张照片以这种方式工作很好，但在第二张照片上它给出了例外java.lang.outofmemory 我也尝试过给出的解决方案

[java.lang.OutOfMemoryError：位图大小超出 VM 预算 - Android](https://stackoverflow.com/questions/1949066/java-lang-outofmemoryerror-bitmap-size-exceeds-vm-budget-android)

在产品适配器中这样做

```
public class ProductAdopter extends ArrayAdapter<Product> {
Context context; 
int layoutResourceId;    
ArrayList<Product> data = null;
public ProductAdopter(Context context, int layoutResourceId, ArrayList<Product> product_data) {
    // TODO Auto-generated constructor stub
    super(context, layoutResourceId, product_data);
    this.layoutResourceId = layoutResourceId;
    this.context = context;
    this.data = product_data;
}
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;
    ProductHolder holder = null;

    if(row == null)
    {
        LayoutInflater inflater = ((MainActivity)context).getLayoutInflater();
        row = inflater.inflate(layoutResourceId, parent, false);

        holder = new ProductHolder();
        holder.imgIcon = (ImageView)row.findViewById(R.id.imgIcon);
        holder.txtTitle = (TextView)row.findViewById(R.id.txtTitle);

        row.setTag(holder);
    }
    else
    {
        holder = (ProductHolder)row.getTag();
    }

    Product product = data.get(position);
    holder.txtTitle.setText(product.getName());
    File imgFile = new  File(product.icon);
    if(imgFile.exists()){

        Bitmap myBitmap = BitmapFactory.decodeFile(imgFile.getAbsolutePath());

        holder.imgIcon.setImageBitmap(myBitmap); 
        //myBitmap.recycle();
    }
    return row;
}
static class ProductHolder
{
    ImageView imgIcon;
    TextView txtTitle;
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T03:15:22.610

```
 if(imgFile.exists()){

    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inSampleSize = 8;

   Bitmap myBitmap = BitmapFactory.decodeFile(imgFile.getAbsolutePath(),options);
        holder.imgIcon.setImageBitmap(myBitmap); 
        //myBitmap.recycle();
    } 
```

使用 inSampleSize 将比例位图加载到内存。对 inSampleSize 值使用 2 的幂对于解码器来说更快、更有效。但是，如果您计划将调整大小的版本缓存在内存或磁盘上，通常仍然值得将其解码为最合适的图像尺寸以节省空间。

有关更多信息，请参阅[有效加载大型位图](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T03:08:13.393

如果您尝试自己解码大图像，您将遇到内存不足的问题。

尝试使用通用图像加载器。它将负责从本地存储或互联网加载所有图像。

[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T04:43:02.310

OutOfMemory 可能会很累，这里有一些您可以查看的选项

```
try { 
     //Create your bitmap here 

} catch (OutOfMemoryError ooM) {
        // You got out of memory now do something to recycle images
                    // Yes you can catch OOM.
        recycle();
} 
```

如果您没有很多图像要处理，那么您可以试试这个。

```
 BitmapFactory.Options op = new BitmapFactory.Options();
    op.inSampleSize = 8;
    return BitmapFactory.decodeFile("<YOUR IMAGE FILE HERE>", op); 
```

如果您有很多图像，上述组合可能会很有用

# ember.js - 在 Ember 中，如何延迟准备，并将 AJAX 结果放入控制器中？

> ID：16205615
> 
> 赞同：5
> 
> 时间：2013-04-25T02:54:28.583
> 
> 标签：ember.js, promise

我知道 Ember.Application 现在有[deferReadiness](http://emberjs.com/api/classes/Ember.Application.html#method_deferReadiness)让我在初始化应用程序之前等待 AJAX 调用的返回。但是，在 api 文档的示例中，他们将值放入 App 中的全局变量中：

```
App = Ember.Application.create();
App.deferReadiness();

jQuery.getJSON("/auth-token", function(token) {
  App.token = token;
  App.advanceReadiness();
}); 
```

我不想为令牌引入全局变量，而是想将返回的值放入我的 ApplicationController。但是，此时我似乎无法找到如何获取控制器的句柄，即在 jQuery 回调中。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-27T17:02:15.370

您可以[`reopen`](http://emberjs.com/api/classes/Ember.Controller.html#method_reopen)在`$.getJSON`回调中的控制器中设置属性中的响应值`token`。假设您有一个端点`~/auth-token`返回带有单个属性的 JSON `key`，您可以执行以下操作：

```
window.App = Ember.Application.create();

App.ApplicationController = Em.Controller.extend({
    token: ''
});

App.deferReadiness();

$.getJSON("/auth-token", function(token) {
    console.log(token.key);
    App.ApplicationController.reopen({
        token: token.key
    });
    App.advanceReadiness();
}); 
```

（见[小提琴](http://jsfiddle.net/schawaska/NPaaA/)）

# c - 一个简单的 x86 反汇编开源内核使用

> ID：16205617
> 
> 赞同：4
> 
> 时间：2013-04-25T02:54:43.513
> 
> 标签：c, assembly, kernel, processor, disassembly

我正在编写一个用于教育目的的内核，并且我想将一个反汇编程序集成到我的内核中。
因为我要将它集成到内核中，所以我希望它非常小且简单，
即我只需要它接收一个内存地址并返回该地址的汇编指令。
我一直在寻找可以做到这一点的开源，但我发现的只是大型库，它们太大而复杂。
我说的是几个 (2-4) 源代码文件，它们不需要复杂的安装/集成，而且功能非常有限，只提供非常基本的功能。
有人知道这样的开源（当然是C）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T23:05:21.600

如果你使用 GNU gcc 和 binutils，你可以只使用 objdump。我通常使用它的方式是：

```
objdump -dSr my_file.o > my_file.s 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T08:44:14.210

您可能听说过[radare2](http://radare.org/y/)项目（[github](https://github.com/radare/radare2)）。它包括[rasm](http://radare.org/y/?p=examples&f=rasm)，这是一个非常简单的反汇编程序。

[您可以在他们的github 存储库](https://github.com/radare/radare2)中找到他们的代码。

# c++ - C++ 使用 UDP 发送数据报

> ID：16205620
> 
> 赞同：0
> 
> 时间：2013-04-25T02:55:05.180
> 
> 标签：c++, udp

你好再次stackoverflow！

我让我的教授给我分配了一个程序，该程序将尝试获取用户输入的信用卡信息，将其发送到带有数据库的服务器以更新数据报并打印返回的内容。

我想我差不多完成了，但是在尝试将信息发送到服务器时，我的一个错误正在消失。

错误是

```
Mismatch in number of sent bytes: Permission Denied 
```

我不知道该怎么做，任何建议都将不胜感激:)我在下面发布了我的代码：

```
#include <iostream>
#include <cstring>
#include <string>
#include <sys/socket.h>
#include <arpa/inet.h>
#include <unistd.h>
#include <netinet/in.h>
#include <cstdio>
#include <cstdlib>

using namespace std;

int countDigits(char[], int);
int findDec(char[],int);
int findLastEle(char[]);
int findSlash(char[],int);

int main() {

    //variables
    char cardNum[64], cardName[64], expDate[8], cardAmt[64], message[64]; //User input variables and datagram message

    int cardNumlen, cardDigits, amtLen, decVar, lastVar,
        expLast, expEle, expLen, sock, echolen, received = 0;
    char buffer[64];

    unsigned int addrlen;

    struct sockaddr_in echoserver;  // structure for address of server

    //Welcome the user
    cout << "Welcome to the Credit Card Transaction verification utility!\n";

    //ask user for card holder name or quit
    cout << "Enter card holder name (or quit): ";
    cin.getline(cardName, 64);

    //Make loop that will quit if quit chosen
    while(strcmp(cardName, "quit") != 0){
        //Ask for numbers
        cout << "Enter CC number: ";
        cin.getline(cardNum, 64);

        //count number of digets
        cardNumlen = strlen(cardNum);
        cardDigits = countDigits(cardNum, cardNumlen);

        //make sure there are 15-16 digits
        while(cardDigits < 15 or cardDigits > 16){
            cout << "You have entered an invalid CC number. Please try again: ";
            cin.getline(cardNum, 64);
            cardNumlen = strlen(cardNum);
            cardDigits = countDigits(cardNum, cardNumlen);
        }

        //ask for experation date
        do{
            cout << "Enter experation (form mm/yyyy): ";
            cin.getline(expDate, 8);
            expLen = strlen(expDate);
            expEle = findSlash(expDate, expLen);
            expLast = findLastEle(expDate);
        }while(expEle != (expLast - 5));

        //ask for card amount
        cout << "Enter amount: ";
        cin.getline(cardAmt, 64);

        //find . in char array
        amtLen = strlen(cardAmt);
        decVar = findDec(cardAmt, amtLen);

        //find last character in array
        lastVar = findLastEle(cardAmt);
        //Make sure . is in right spot
        while(decVar != (lastVar - 3)){

            //ask for card amount again if fail
            cout << "You entered an invalid amount! Please try again: ";
            cin.getline(cardAmt, 64);

            //find . in char array
            amtLen = strlen(cardAmt);
            decVar = findDec(cardAmt, amtLen);

            //find last character in array
            lastVar = findLastEle(cardAmt);
        }

        cout << "Verifying...\n";

        //Make the message by looping
        // through message and putting 
        // each character into message
        strcpy(message, cardNum);
        strcat(message, ":");
        strcat(message, expDate);
        strcat(message, ":");
        strcat(message, cardAmt);
        strcat(message, ":");
        strcat(message, cardName);

        // Create the UDP socket
        if ((sock = socket(AF_INET, SOCK_DGRAM, 0)) < 0) {
            perror("Failed to create socket");
            exit(EXIT_FAILURE);
        }

        // Construct the server sockaddr_in structure
        memset(&echoserver, 0, sizeof(echoserver));
        echoserver.sin_family = AF_INET;                  //Internet IP
        echoserver.sin_addr.s_addr = inet_addr("IPADDRESSHERE");  //IP address
        echoserver.sin_port = htons(PORTHERE);       //server port

        // Send the message to the server 
        echolen = strlen(message);
        if (sendto(sock, message, strlen(message), 0, (struct sockaddr *) &echoserver, sizeof(echoserver)) != echolen) {
            perror("Mismatch in number of sent bytes");
            exit(EXIT_FAILURE);
        }

        // Receive the message back from the server 
        addrlen = sizeof(echoserver);
        if ((received = recvfrom(sock, buffer, 64, 0, (struct sockaddr *) &echoserver, &addrlen)) != echolen) {
            perror("Mismatch in number of received bytes");
            exit(EXIT_FAILURE);
        }

        buffer[received] = '\0';        /* Assure null-terminated string */
        cout << buffer << endl;

        close(sock); // closing the sock

        //Restart the while(maybe quit) loop
        //ask user for card holder name or quit
        cout << "\nEnter card holder name (or quit): ";
        cin.getline(cardName, 64);

    }//end of while loop for quit
    return 0;
} 
```

这些是我为帮助获取用户输入而制作的功能

```
 //countDigits function
    int countDigits(char array[], int strLen){
        int i, digits = 0;
        for( i = 0; i < strLen; i++){
            if( array[i] == ' '){
                digits--;
            }
            digits++;
        }
        return digits;

    }

    //findDec function (finds decimal place in array)
    int findDec(char array[], int arrayLen){
        int r, dec = 0;

        for(r = 0; r < arrayLen; r++){
            if(array[r] == '.'){
                break;
            }
            else{
                dec++;
            }
        }

        return dec;
    }

    //Finds the last element in a array
    int findLastEle(char array[]){
        int i, last;
        while(array[i]){
            i++;
            last++;
        }

        return last;
    }

    //findSlash function (finds slash place in array)
    int findSlash(char array[], int arrayLen){
        int r, dec = 0;

        for(r = 0; r < arrayLen; r++){
            if(array[r] == '/'){
                break;
            }
            else{
                dec++;
            }
        }

        return dec;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T03:07:26.160

您总是尝试接收 64 个字节，但检查返回值是否与`echolen`. in 的值`echolen`是长度`message`，可能不完全是 64 字节。您也没有检查`recvfrom`. 如果它返回 0，则连接被另一端关闭，如果它返回 -1，则发生错误，任何其他值都是接收到的字节数。

请注意数据报套接字是基于消息的。如果您尝试读取 64 个字节并且消息的长度更大，则数据报中的所有未读字节都将被丢弃。

# javascript - JavaScript 未定义？

> ID：16205622
> 
> 赞同：-2
> 
> 时间：2013-04-25T02:55:22.433
> 
> 标签：javascript

更新代码

当前错误：未捕获的类型错误：无法读取未定义的属性“id_cursa”

我真的不知道可能是哪个问题？

```
function locurilibere(data, callback) {
var URL = Path + 'rezervaribilete/locurilibere/' + data;
$.get(URL, function(obj) {
if (obj.raspuns === "nu") {
callback(true);
} else {
callback(false);
}
}, 'json');
}

function populateCurseDus(de_la, pana_la, data_plecarii) {
var data = de_la + "-" + pana_la + "-" + data_plecarii;
$.get(Path + 'rezervaribilete/listCurseDus/' + data, function(o) {
for (var i = 0; i < o.length; i++) {
var id_cursa = o[i].id_cursa;
var datalocuri = id_cursa + "-" + data_plecarii;
locurilibere(datalocuri, function(result){
if (result) {
$('#cursedus tbody').append('<tr style="background:red;"><td><input type="radio" name="id_cursadus" value="' + o[i].id_cursa + '" disabled></td><td>' + o[i].cod_cursa + '</td><td>' + o[i].de_la + '</td><td>' + o[i].pana_la + '</td><td>' + o[i].ora_plecare + '</td><td>' + o[i].ora_sosire + '</td><td>' + o[i].id_transportator + '</td><td>' + o[i].id_traseu + '</td></tr>');
} else {
$('#cursedus tbody').append('<tr><td><input type="radio" name="id_cursadus" value="' + o[i].id_cursa + '"></td><td>' + o[i].cod_cursa + '</td><td>' + o[i].de_la + '</td><td>' + o[i].pana_la + '</td><td>' + o[i].ora_plecare + '</td><td>' + o[i].ora_sosire + '</td><td>' + o[i].id_transportator + '</td><td>' + o[i].id_traseu + '</td></tr>');
}
});
}
}, 'json');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T03:16:57.727

由于 ajax 请求的异步性质，它不会按预期工作，您需要回调来修复它

```
function freeseats(data, callback) {
    var URL = Path + 'bookings/freeseats/' + data;
    $.get(URL, function(obj) {
        if (obj.raspuns === "nu") {
            // alert("no");
            callback(true);
        } else {
            // alert("yes");
            callback(false);
        }
    }, 'json');
}

// ********************************* second
// **************************************
function populateDepartures(from, to, departure) {
    var data = from + "-" + to + "-" + departure;
    $.get(Path + 'booking/listDepartures/' + data, function(o) {

        $.each(o, function(index, item) {
            var id_flight = item.id_flight;
            var dataseats = id_flight + "-" + departureDate;

            freeseats(dataseats, function(result) {
                if (result) {
                    alert("no more seats");
                    $('#cursedus tbody')
                    .append('<tr style="background:red;"><td><input type="radio"         name="id_cursadus" value="'
                            + item.id_cursa
                            + '" disabled></td><td>'
                            + item.cod_cursa
                            + '</td><td>'
                            + item.de_la
                            + '</td><td>'
                            + item.pana_la
                            + '</td><td>'
                            + item.ora_plecare
                            + '</td><td>'
                            + item.ora_sosire
                            + '</td><td>'
                            + item.id_transportator
                            + '</td><td>'
                            + item.id_traseu + '</td></tr>');
                } else {
                    alert("there are free seats");
                    $('#cursedus tbody')
                    .append('<tr><td><input type="radio" name="id_cursadus" value="'
                            + item.id_cursa
                            + '"></td><td>'
                            + item.cod_cursa
                            + '</td><td>'
                            + item.de_la
                            + '</td><td>'
                            + item.pana_la
                            + '</td><td>'
                            + item.ora_plecare
                            + '</td><td>'
                            + item.ora_sosire
                            + '</td><td>'
                            + item.id_transportator
                            + '</td><td>'
                            + item.id_traseu + '</td></tr>');
                }
            });
        });
    }, 'json');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T03:15:05.293

我想我已经破译了你需要什么。请看一下这个[jsFiddle 链接](http://jsfiddle.net/KevinIsNowOnline/67yNC/)，看看这是否能解决您的问题。

这是代码：

```
var boolFlag = false;
var firstFunc = function (){
    if(boolFlag === false){
        boolFlag = true;
        return 'yes';    
     }else{
        boolFlag = false;
        return 'no';   
    }
};

var secondFunc = function () {
        return firstFunc();
};

$('#myButton').click(function (){
    if(secondFunc() == 'yes'){
        console.log('hello world, you said: YES'); 
    }else{
        console.log('hello universe, you said: NO'); 
    }

}); 
```

# pointers - Fortran：指向各种数组值函数的指针

> ID：16205624
> 
> 赞同：1
> 
> 时间：2013-04-25T02:55:29.930
> 
> 标签：pointers, fortran, pass-by-reference, fortran95, fortran2003

我开始这个线程是因为我想学习如何成功地使用相同的指针作为不同数组值函数的别名，比如 f1 和 f2，顺序。

这是一个不成功的代码来说明我想要什么。谢谢。李

```
PROGRAM main
...
REAL(WP), POINTER, DIMENSION(:) :: p
p=>f1
print*,p(1.0_wp) ! the outcome should be 3
p=>f2
print*,p(2.0_wp) ! the outcome should be 3 1   

CONTAINS

FUNCTION f1(x)
IMPLICIT NONE
REAL(WP), TARGET :: f1
REAL(WP), INTENT(IN) :: x
f1=x+2
END FUNCTION f1    

FUNCTION f2(x)
IMPLICIT NONE
REAL(WP), TARGET :: f2(2)
REAL(WP), INTENT(IN) :: x
f2(1) = x+1
f2(2) = x-1
END FUNCTION f2

END PROGRAM main 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T03:39:24.137

对于指向返回数组的函数的指针，您希望有一个接口来描述指向返回数组的函数的指针。

下面是一个如何设置函数指针的示例，它可能会让您朝着正确的方向前进： [How to alias a function name in Fortran](https://stackoverflow.com/questions/8612466/how-to-alias-a-function-name-in-fortran)

编辑：好的，这是一些示例源代码：

```
module ExampleFuncs

   implicit none

contains

function f1 (x)
  real, dimension (:), allocatable :: f1
  real, intent (in) :: x

  allocate (f1 (1:2))
  f1 (1) = 2.0 * x
  f1 (2) = -2.0 * x

  return
end function f1

function f2 (x)
   real, dimension (:), allocatable :: f2
   real, intent (in) :: x

   allocate  (f2 (1:3))
   f2 (1) = x
   f2 (2) = x**2
   f2 (3) = x**3

   return
end function f2

end module ExampleFuncs

program test_func_ptrs

   use ExampleFuncs
   implicit none

   abstract interface
      function func (z)
         real, dimension (:), allocatable :: func
         real, intent (in) :: z
      end function func
   end interface

   procedure (func), pointer :: f_ptr

   real :: input

   do

      write (*, '( // "Input test value: ")', advance="no" )
      read (*, *) input

      if ( input < 0.0 ) then
         f_ptr => f1
      else
         f_ptr => f2
      end if

      write (*, '( "evaluate function: ", *(ES14.4) )' )  f_ptr (input)

   end do

end program test_func_ptrs 
```

# windows - windowsjadejs手表无法正常工作

> ID：16205627
> 
> 赞同：1
> 
> 时间：2013-04-25T02:56:07.893
> 
> 标签：windows, pug, watch

平台：win7 节点版本：v0.10.4 翡翠版本：0.29.0

我想使用玉选项来观看滑块目录：

`d:/webwork/`

我的命令是：

`jade -w -P ./slider`

并得到下面的 cmd 结果：

```
jade -w -P ./slider
C:\Users\Administrator\AppData\Roaming\npm\node_modules\jade\node_modules\monocle\monocle.js:125
        watched_directories[directory] = (new Date(stats.mtime)).getTime();
                                                        ^
TypeError: Cannot read property 'mtime' of undefined
    at C:\Users\Administrator\AppData\Roaming\npm\node_modules\jade\node_modules\monocle\monocle.js:125:57
    at Object.oncomplete (fs.js:107:15) 
```

如果我想使用jade默认选项-w来观察文件变化，我应该使用什么命令？

# perl - 列出完全正确的错误和百分比？

> ID：16205629
> 
> 赞同：-2
> 
> 时间：2013-04-25T02:56:21.693
> 
> 标签：perl

好的，对于我正在做的一个学校项目，我正在用 Perl 创建一个小测验，

```
#########################################
# Solar Game                            #
#                                       #
# (C) 2013 Donovan Roudabush            #
# GPU/Creative Commons                  #
#                                       #
# sharksfan98@gmail.com                 #
# github.com/sharksfan98/solargame      #
#########################################

print "  _________      .__                   ________                       \n";
print " /   _____/ ____ |  | _____ _______   /  _____/_____    _____   ____  \n";
print " \_____  \ /  _ \|  | \__  \\_  __ \ /   \  ___\__  \  /     \_/ __ \ \n";
print " /        (  <_> )  |__/ __ \|  | \/ \    \_\  \/ __ \|  Y Y  \  ___/ \n";
print "/_______  /\____/|____(____  /__|     \______  (____  /__|_|  /\___  > \n";
print "        \/                 \/                \/     \/      \/     \/ \n";
print "Version 1.0 Beta\n\n";
print "Developed by Donovan Roudabush\n";
print "https://github.com/sharksfan98/solargame\n\n";
print "Press enter to start\n";
$ok = <STDIN>;
chomp $ok;
print "Enter the number of players\n";
$num = <STDIN>;
chomp $num;

my @names;
for (1 .. $num) {
    print "Please enter your name\n";
    my $name = <STDIN>;
    chomp $name;
    push @names, $name;
}

print "Hello, Players! Have you played before? (Y/N)\n";
$exp = <STDIN>;
chomp $exp;

if ($exp == Y) {
    print "Ok! The game will begin.\n";
    print "Press Enter to begin the questions\n\n";
}

if ($exp == N) {
    print "Then I will explain the rules\n";
    $ok2 = <STDIN>;
    chomp $ok2;
}   # Add rules here later

print "Part 1: Measurements\n\n";
print "Question 1\n";
print "What measurement is used to measurements within our Solar System?\n\n";
print "A) Astronomical Unit (AU)\n";
print "B) Light Year\n";
print "C) Parsec\n";
$q1 = <STDIN>;
chomp $q1;

if ($q1 == A) {
    print "Correct!\n\n";
}

if ($q1 == B) {
    print "Wrong!\n\n";
}

if ($q1 == C) {
    print "Close! The Parsec is only used by Professionals, like NASA\n\n";
}

print "Question 2\n\n";
print "What do you use to measure farther objects, like stars and galaxies?\n";
print "A) Astronomical Unit (AU)\n";
print "B) Light Year\n";
print "C) Parsec\n";
$q2 = <STDIN>;
chomp $q2;

if ($q2 == A) {
    print "Wrong!\n\n";
}

if ($q2 == B) {
    print "Correct!\n\n";
}

if ($q2 == C) {
    print "Wrong!\n\n";
}

print "Question 3\n";
print "Which measurement would you use to measure Earth to the Sun?\n\n";
print "A) Astronomical Unit (AU)\n";
print "B) Light Year\n";
print "C) Parsec\n";
$q3 = <STDIN>;
chomp $q3;

if ($q3 == A) {
    print "Correct!\n\n";
}

if ($q3 == B) {
    print "Wrong!\n\n";
}

if ($q3 == C) {
    print "Wrong!\n\n";
}

print "Question 4\n";
print "Which measurement would you use measure the Sun to Polaris?\n\n";
print "A) Astronomical Unit (AU)\n";
print "B) Light Year\n";
print "C) Parsec\n";
$q4 = <STDIN>;
chomp $q4;

if ($q4 == A) {
    print "Correct!\n\n";
}

if ($q4 == B) {
    print "Wrong!\n\n";
}

if ($q4 == C) {
    print "Wrong!\n\n";
}

print "Question 5\n";
print "Which would you use to measure Earth to Uranus?\n\n";
print "A) Astronomical Unit (AU)\n";
print "B) Light Year\n";
print "C) Parsec\n";
$q5 = <STDIN>;
chomp $q5;

if ($q5 == A) {
    print "Correct!\n\n";
}

if ($q5 == B) {
    print "Wrong!\n\n";
}

if ($q5 == C) {
    print "Wrong!\n\n";
} 
```

在我的代码末尾，我想计算并列出正确和错误的问题数量，以及正确的百分比。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T03:29:08.713

您可以有一个变量，每次正确回答问题时都会增加一个变量，并且每次错误回答问题时都会增加一个变量。

```
my $correct = 0;
my $incorrect = 0;

...

if ($q1 eq 'A') {
    print "Correct!\n\n";
    $correct++;
} else {
    print "Wrong!\n\n";
    $incorrect++;
}

print "Percentage: ", int($correct/($correct + $incorrect) * 100 + 0.5), "%\n"; 
```

您不能使用像 A 这样的裸词来比较文本。对字符串使用字符串等于运算符 (eq)。喜欢`$q1 eq 'A'`。您也可以使用`else`块而不是与其他所有内容进行比较。

如果您将有固定数量的问题，您实际上只需要一个变量来表示正确回答的问题数量，因为 then`$incorrect`将与 相同`(total questions) - $correct`，并且`$correct + $incorrect`始终是问题的总数。

# java - Flickr JSON 请求未完成

> ID：16205631
> 
> 赞同：-1
> 
> 时间：2013-04-25T02:56:23.250
> 
> 标签：java, json, flickr

我在尝试从 HTTP Get 获取 JSONObject 时收到 JSONException。我有一个我知道有效的链接，因为我已经在浏览器中对其进行了测试，但它在 Java 中不起作用，而且似乎缩短了。我收到的 JSON 文本末尾的一个片段，我很确定错误是......

```
{"id":"1111111111", "owner":"11111111@A11", "secret":"a1a1a1... 
```

.. 1 和 a 是它们的正确值在哪里。末尾的 ... 省略号似乎向我表明它正在切断？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T03:35:26.130

为了解决这个问题，我必须从响应的开头修剪“jsonFlickrApi(”并从响应的末尾修剪“)”以正确形成 JSON。

谢谢大家的支持。

# c - SHA_256 函数破坏内存空间

> ID：16205633
> 
> 赞同：0
> 
> 时间：2013-04-25T02:56:29.340
> 
> 标签：c, sha256, message-digest

我一直在尝试在 FreeBSD 9.1 系统上使用 sha256.h 中的 SHA_256 函数，但它似乎正在破坏我的程序的内存空间，从而导致各种躁狂行为。我编写了一个快速程序来使用这些功能，但仍然遇到问题。

在下面的示例中，当我调用 SHA256_Init() 时， *int i发生了变化，如围绕它的**printf()*语句的输出所示。

这就是我运行代码的原因。

```
$ ./miner "hello world"  
i = 0  
i = 32  
0000000032      9010a9cf81ce2c28a642fd03ddf6da5790c65c30cd4a148c4257d3fe488bacc7 
```

为什么这个值变成 32？我错过了什么吗？代码如下...

```
#include <sha256.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sys/types.h>

#define DIFFICULTY 0

int main(int argc, const char **argv) {
    uint nonce, i, j;
    SHA256_CTX ctx;
    size_t arglen;
    unsigned char digest[32];
    char * data;

    if(argc < 1) exit(1);
    arglen = strlen(argv[1]);
    data = malloc(arglen + 1);
    char digestStr[65];
    i = 0;
    do {
        nonce = i;
        strncpy(data, argv[1], arglen + 1);

        printf("i = %i\n", i);
        SHA256_Init(&ctx);
        printf("i = %i\n", i);

        SHA256_Update(&ctx, data, arglen);
        SHA256_Update(&ctx, (unsigned char *) &nonce, sizeof(nonce));
        SHA256_Final(digest, &ctx);
        SHA256_End(&ctx, digestStr);
        printf("%010i\t%s\n", i, digestStr);

        j = 0;
        while(j < 32 && digest[j] == '\0') {
            j++;
        }
        i++;
    } while(j < DIFFICULTY);

    free(data);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-05T21:06:43.843

我刚刚遇到了同样的问题并解决了。

问题是您在代码中包含的标头与链接到应用程序正在使用的 SHA2 库不同。

就我而言，SHA256_CTX 结构在 openSSL 库中的大小不同。openSSL 库的结构比文件中的结构长度大 8 个字节。

函数 SHA256_Init(&ctx) 在 SHA256_CTX 结构上执行 memset，然后破坏结构后的 8 个额外随机字节。我说随机是因为它会在发布版和调试版中做不同的事情，因为优化编译器会移动你的变量。

# java - 是不正确的方法调用，还是过度思考？

> ID：16205640
> 
> 赞同：0
> 
> 时间：2013-04-25T02:57:52.580
> 
> 标签：java, class, methods, counter

这是我的代码

```
/*Simulate a tally counter that can be used to admit a limited number of people.*/
public class tally
{public static void main(String[] args)
 {tallyCounter occupancy = new tallyCounter();
  occupancy.setLimit();
  occupancy.getPeople();
  if (people <= limit)
  {occupancy.storeOC();
  }
  else if (people > limit)
  {String big = JOptionPane.showInputDialog("There are too many people in the restaraunt\n Do you want to raise the limit of " + limit + " occupants? y/n");
   if(big.equals("y") || big.equals("Y") || big.equals("yes") || big.equals("Yes"))
   {occupancy.setLimit();
   }
   else if(big.equals("n") || big.equals("N") || big.equals("no") || fro.equals("No"))
   {occupancy.clearLimit();
}}}}

/*Initializes tools for tally class*/
class tallyCounter
{private int people;
 private int limit;
 //Constructs tallyCounter 
 public tallyCounter()
 {people = 0;
  limit = 0;
 }
 //Increments people (people)[people]
 public void Count(int people)
 {people = people + 1;
 }
 //Gets the amount of people in the restaraunt
 public int getpeople()
 {return people;
 }
 //sets limit (people)[limit]
 public int setLimit()
  {String lim = JOptionPane.showInputDialog("How many people can be in the restaurant tonight?\n (Integers only please.)");
   int limit = Integer.parseInt (lim);
   return limit;
  }
 //Clears count (people)[count]
  public static int clearcount(int count)
 {String cnt = JOptionPane.showInputDialog("Are you sure you want to return the count to zero? y/n");
  if(cnt.equals("y") || cnt.equals("Y") || cnt.equals("yes") || cnt.equals("Yes"))
  {count = 0;
  }
  else if(cnt.equals("n") || cnt.equals("N") || cnt.equals("no") || cnt.equals("No"))
  {
  count = count;
  }
  return count;
 }
 //clears limit (people)[limit]
 public static int clearlimit(int limit)
 {String cnt = JOptionPane.showInputDialog("Do you want to set the limit to zero? y/n");
  if(cnt.equals("y") || cnt.equals("Y") || cnt.equals("yes") || cnt.equals("Yes"))
  {limit = 0;
  }
  else if(cnt.equals("n") || cnt.equals("N") || cnt.equals("no") || cnt.equals("No"))
  {
  limit = limit;
  }
  return limit;
 }
  public int storeOc()
  {String fro = JOptionPane.showInputDialog("Is the store open?");
    if (fro.equals("y") || fro.equals("Y") || fro.equals("yes") || fro.equals("Yes"));
    {String fre = JOptionPane.showInputDialog("Has someone entered the restaraunt? y/n");
    if(fre.equals("y") || fre.equals("Y") || fre.equals("yes") || fre.equals("Yes"))
     {int people = Count();
     }
   else if(fro.equals("n") || fro.equals("N") || fro.equals("no") || fro.equals("No"))
   {int limit = clearlimit();
  }}
  return people;
}} 
```

我包含了整个代码，因为我相信这段代码无法编译的原因是不正确的方法调用。我只是不知道我需要做什么不同的事情。我已经多次重新编写了这段代码，这似乎是最接近正确的，或者我只是在严重地思考它。

- - - - - - - - - - - 编辑 - - - - - - - - - - - -

```
here is the full error list as of now

tally.java:6: error: cannot find symbol
  occupancy.getPeople();
           ^
  symbol:   method getPeople()
  location: variable occupancy of type tallyCounter
tally.java:7: error: cannot find symbol
  if (people <= limit)
      ^
  symbol:   variable people
  location: class tally
tally.java:7: error: cannot find symbol
  if (people <= limit)
                ^
  symbol:   variable limit
  location: class tally
tally.java:8: error: cannot find symbol
  {occupancy.storeOC();
            ^
  symbol:   method storeOC()
  location: variable occupancy of type tallyCounter
tally.java:10: error: cannot find symbol
  else if (people > limit)
           ^
  symbol:   variable people
  location: class tally
tally.java:10: error: cannot find symbol
  else if (people > limit)
                    ^
  symbol:   variable limit
  location: class tally
tally.java:11: error: cannot find symbol
  {String big = JOptionPane.showInputDialog("There are too many people in the restaraunt\n Do you want to raise the limit of " + limit + " occupants? y/n");
                                                                                                                                 ^
  symbol:   variable limit
  location: class tally
tally.java:11: error: cannot find symbol
  {String big = JOptionPane.showInputDialog("There are too many people in the     restaraunt\n Do you want to raise the limit of " + limit + " occupants? y/n");
            ^
  symbol:   variable JOptionPane
  location: class tally
tally.java:15: error: cannot find symbol
   else if(big.equals("n") || big.equals("N") || big.equals("no") || fro.equals("No"))
                                                                     ^
  symbol:   variable fro
  location: class tally
tally.java:16: error: cannot find symbol
   {occupancy.clearLimit();
             ^
  symbol:   method clearLimit()
  location: variable occupancy of type tallyCounter
tally.java:37: error: cannot find symbol
  {String lim = JOptionPane.showInputDialog("How many people can be in the restaurant tonight?\n (Integers only please.)");
                ^
  symbol:   variable JOptionPane
  location: class tallyCounter
tally.java:43: error: cannot find symbol
 {String cnt = JOptionPane.showInputDialog("Are you sure you want to return the count to zero? y/n");
               ^
  symbol:   variable JOptionPane
  location: class tallyCounter
tally.java:55: error: cannot find symbol
 {String cnt = JOptionPane.showInputDialog("Do you want to set the limit to zero? y/n");
               ^
  symbol:   variable JOptionPane
  location: class tallyCounter
tally.java:66: error: cannot find symbol
  {String fro = JOptionPane.showInputDialog("Is the store open?");
                ^
  symbol:   variable JOptionPane
  location: class tallyCounter
tally.java:68: error: cannot find symbol
    {String fre = JOptionPane.showInputDialog("Has someone entered the restaraunt? y/n");
                  ^
  symbol:   variable JOptionPane
  location: class tallyCounter
tally.java:70: error: method Count in class tallyCounter cannot be applied to given types;
     {int people = Count();
                   ^
  required: int
  found: no arguments
  reason: actual and formal argument lists differ in length
tally.java:73: error: method clearlimit in class tallyCounter cannot be applied to given types;
   {int limit = clearlimit();
                ^
  required: int
  found: no arguments
  reason: actual and formal argument lists differ in length
17 errors 
```

# javascript - 针对更新的 DOM 重新运行 jQuery 插件

> ID：16205645
> 
> 赞同：0
> 
> 时间：2013-04-25T02:58:25.373
> 
> 标签：javascript, jquery, dom, plugins

我正在使用一个 jQuery 网格滑块插件，我想在 DOM 操作后再次运行它。

我怀疑我的问题与此类似 -[在 DOM 修改后重新运行 jQuery 插件的任何方法？](https://stackoverflow.com/questions/10640981/any-way-to-rerun-a-jquery-plugin-after-dom-modification)- 但我的尝试是行不通的。

这是设置：

当页面加载时，网格插件 js 和选项 js 针对无序列表运行，如下所示：

```
<div class="panel">
    <div class="g-container">
        <div class="g-slider">        
            <div class="tiles">
                <ul>                
                    <li><a href="#"><img src="Images/image-01.jpg"></a><div><h1>automotive</h1></div></li>                                          
                    <li><a href="#"><img src="Images/image-03.jpg"></a><div><h1>electronics</h1></div></li>                                             
                    <li><a href="#"><img src="Images/image-02.jpg"></a><div><h1>medical</h1></div></li>                                             
                    <li><a href="#"><img src="Images/image-11.jpg"></a><div><h1>automotive</h1></div></li>                                          
                    <li><a href="#"><img src="Images/image-02.jpg"></a><div><h1>automotive</h1></div></li>                                          
                    <li><a href="#"><img src="Images/image-09.jpg"></a><div><h1>medical</h1></div></li>                                             
                    <li><a href="#"><img src="Images/image-11.jpg"></a><div><h1>electronics</h1></div></li>                                             
                </ul>             
            </div>
        </div> 
    </div>
</div> 
```

...并创建网格滑块。这是一个示例：http: [//1.s3.envato.com/files/27300390/index.html](http://1.s3.envato.com/files/27300390/index.html)

这一切都很好。

（长话短说）我有一个很大的类别列表，这些类别都组合在一起，我放在一个 div 持有者中，如下所示：

```
<div id="listing-holder">
    <ul>                
        <li><a href="#"><img src="Images/car-01.jpg"></a><div><h1>automotive</h1></div></li>                                            
        <li><a href="#"><img src="Images/car-01.jpg"></a><div><h1>electronics</h1></div></li>                                           
        ...
    </ul>
</div> 
```

这些类别是动态创建的，并且在一个大（隐藏在页面之外）组中。所以可能有 20 个类别和 100 个项目（在我的示例中为图像）。这些项目可能出现在多个类别中，但我只想一次显示一个。

页面上的其他地方是一些导航链接。单击其中一个链接时，#listing-holder 中的项目将复制到 .tiles ul 中。然后根据 .tiles ul 中的标题标签检查它的名称，删除任何不匹配的项目。然后，我希望插件再次运行，以便分页和滑块像更改之前一样工作，但使用新的分页（如果它或多或少）。像这样：

```
$("#left-menu").delegate("a", "click", function(e) {
    var itemClicked;
    itemClicked = $(this).text();
    $('.g-container .g-slider .tiles').html('');
    $('.g-container .g-slider .tiles').html($('#listing-holder').html());
    $(".g-container .g-slider .tiles h1:not(:contains(" + itemClicked + "))").closest('li').remove();
    init(); // this isn't working the way I expected it to
}); 
```

这是选项js的（相关信息）：

```
$(document).ready(  
    function() {
        var $panel = $(".panel");       
        var $container = $panel.find(".g-container");
        ... // more variables

        $(".g-container").gridSlider({
            num_cols:5,
            num_rows:3,
            ... // more settings
        });

        $submitButton.click(function() {
            $container.undoChanges()
            .setGridSize($gridCol.val(),$gridRow.val())                   
            .setNoCategory($categories.filter(":checked").val() == "no")
            ... // more settings
            .updateChanges(); // this is in the grid.js         
            setPanelWidth();
        });

        $resetButton.click(function() {
            init();
            $submitButton.trigger("click");
        });

        var init = function() {
            $gridCol.val(5);
            $gridRow.val(3);
            ... // more settings
        }

        var setPanelWidth = function() {
            var width = $container.find(">div").outerWidth();
            if (width < panelWidth) {
                width = panelWidth; 
            }
            $panel.css({width:width, marginLeft:-width/2});
            ... // more settings
        }

        init();
    }
); 
```

我试过调用 init 函数，它确实调用了它，但似乎什么也没发生。我在 grid.js（已缩小）的开头和结尾放置了警报，它们都被触发了，所以看起来它正在通过。

我想我必须使用这样的东西：

```
(function( $ ){
    $.fn.myPlugin = (function(){
        {
        // do something...
        }
    });
})(jQuery); 
```

...但是因为我能够从 options.js 调用 init，所以我没有走那条路（但我愿意重新访问它，因为我可能错误地实现了它）。

我已经在这里待了大约一个星期，我怀疑我正在接近这个错误，并且可以使用一些方向。

我想我可以通过创建所有类别来解决这个问题，然后使用 getScript() 之类的东西来运行。我认为那会奏效。问题是可能有几十个类别，其中的项目可能出现在几个类别中。

我想（与手打交道）如果我只有一个列表并根据点击从该列表中选择我需要的东西，那将是要走的路。我可以成功地做到这一点。它只是将它连接到不起作用的滑块上。

如果我需要提供更多详细信息，请告诉我。

谢谢。

斯蒂芬

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T04:17:02.547

我不熟悉网格滑块插件。但是您是否尝试过完全破坏容器 DOM，然后重新创建并插入它。然后在新创建的 DOM 上再次调用 .gridSlider 函数？

# javascript - 匹配 JavaScript RegEx 中的不可见字符

> ID：16205646
> 
> 赞同：3
> 
> 时间：2013-04-25T02:58:44.737
> 
> 标签：javascript, regex

我有一些包含不可见字符的字符串，但它们在一些可预测的地方。通常包围我要提取的一段文本，然后在第二次出现之后我想保留其余的文本。

我似乎无法弄清楚如何关闭隐形字符，*并将*它们从我的结果中排除。为了匹配隐形我一直在使用这个正则表达式：`/\xA0\x00-\x09\x0B\x0C\x0E-\x1F\x7F/`这似乎确实有效。

这是一个例子：`[invisibles]Keep as match 1[invisibles]Keep as match 2`

到目前为止，这是我一直在使用但没有成功的方法：

`/([\xA0\x00-\x09\x0B\x0C\x0E-\x1F\x7F]+)(.+)([\xA0\x00-\x09\x0B\x0C\x0E-\x1F\x7F]+)/(.+)`

我在那里有捕获组，但是自从我不得不以这种方式使用正则表达式以来已经有一段时间了，所以我知道我错过了一些重要的东西。我希望只是使不可见的匹配成为非捕获组，但似乎 JavaScript 不支持这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T03:10:01.290

像这样的东西似乎是你想要的。您拥有的第二个正则表达式非常有效，但是`/`完全错误。也许您没有正确读出组数据。

```
var s = "\x0EKeep as match 1\x0EKeep as match 2";
var r = /[\xA0\x00-\x09\x0B\x0C\x0E-\x1F\x7F]+(.+)[\xA0\x00-\x09\x0B\x0C\x0E-\x1F\x7F]+(.+)/;

var match = s.match(r);

var part1 = match[1];
var part2 = match[2]; 
```

# java - 用随机数填充我的数组？

> ID：16205651
> 
> 赞同：6
> 
> 时间：2013-04-25T02:59:14.933
> 
> 标签：java, arrays, random, int

我无法将随机数放入我的测试类的数组中。代码在java中。我不能单独完成，因为最终我必须用多达 600 个值填充数组。这是测试类：

```
import java.util.Random;

public class test {
    /**
     * @param args
     */
    public static void main(String[] args) {
        int size = 1000;
        int max = 5000; 
        int[] array = new int[size];
        int loop = 0; 

        Random generator = new Random();
        //Write a loop that generates 1000 integers and 
        //store them in the array using generator.nextInt(max)

        generator.nextInt(max); //generating one

        //I need to generate 1000
        //So I need some kind of loop that will generate 1000 numbers. 
        for (int i =0; i<1000; i++)
        {
            generator.nextInt(max);
        }

        /**
         * After I do this, I'll have the array, array. 
         * Then comes what's under this. 
         * THat method is for measuring the time.
         * System.currentTimeMillis();, 
         * with this, I can collect a time for the start of the method
         * and one for the end. 
         * Time at the end, minus the time at the start
         * gets us the running time. 
         */

        long result;

        long startTime = System.currentTimeMillis();
        sort.quickSort(array,  100,  array.length-1);

        long endTime = System.currentTimeMillis();
        result = endTime-startTime; 

        System.out.println("The quick sort runtime is " + result + " miliseconds");

        long result2;

        long startTime2 = System.currentTimeMillis(); 
        sort.partition(array, 100, array.length-1); 
        long endTime2 = System.currentTimeMillis();
        result2 =  endTime2 - startTime2;
        System.out.println("The partition runtime is "+result2 + " miliseconds");

        long result3;

        long startTime3 = System.currentTimeMillis();
        sort.bubbleSort(array, 100);
        long endTime3 = System.currentTimeMillis();
        result3 = endTime3-startTime3;
        System.out.println("The bubble sort runtime is "+result3 + " miliseconds");

        long result4;

        long startTime4 = System.currentTimeMillis();
        sort.selectionSort(array, 100); //change the second number to change
        //the size of an array. 
        long endTime4 = System.currentTimeMillis();
        result4 = endTime4-startTime4;
        System.out.println("The selection sort runtime is "+result4 + " miliseconds");

    }
} 
```

我已经完成了测试类和它调用函数的另一个类，并且没有错误。我只需要以某种方式将随机值放入数组中。任何建议将不胜感激。

如果你看一下代码，你会发现我已经做了一个小函数来自己生成数字。我只是不知道该怎么做才能使数字进入数组。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T03:03:31.733

您只需要更改循环内的行以将随机数分配给数组的当前索引。

```
array[i] = generator.nextInt(max); 
```

查看[Arrays](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)教程线程，了解有关创建、初始化和访问数组的所有信息。

顺便说一句，`1000`您的循环条件可能应该上升到，而不是重复`size`。

```
for (int i = 0; i < size; i++) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-16T20:50:24.800

**从 1.8 开始**

```
Arrays.setAll(array, i -> {
    return generator.nextInt(max);
}); 
```

这会用 0（含）和（不含）之间的随机数填充您的数组`max`。

进一步阅读：[数组类](https://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html)和[IntUnaryOperator 接口](https://docs.oracle.com/javase/8/docs/api/java/util/function/IntUnaryOperator.html)

话虽如此，我更喜欢使用 Bill the Lizard 提供的方法，使用循环来初始化每个值。

# php - 在同一页面内将 javascript 变量值发送到 php

> ID：16205652
> 
> 赞同：1
> 
> 时间：2013-04-25T02:59:26.733
> 
> 标签：php, javascript

我只想知道是否可以将 javascript 的值发送到 php。这是我想说的简单代码。

```
<script language="javascript" >
var id = "data"
</script>

<?php
$getthevalueofid = var id;
?> 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T03:01:04.480

不是您的代码示例的结构方式，不。PHP 是一种服务器端语言，而 Javascript 是一种客户端语言。当任何客户端脚本执行时，PHP 已超出范围。

如果需要将对象从浏览器传递到服务器，可以使用 XMLHttpRequest（通常称为 AJAX）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T03:12:37.490

要将 Javascript 变量发送回 PHP，您需要执行 AJAX 请求：

```
<script language="javascript" >
xmlhttp.open("GET","getvalue.php?id="+id,true);
xmlhttp.send();
</script> 
```

在 getvalue.php 中，您将拥有：

```
<?php
$getthevalueofid = $_GET['id'];
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T03:04:02.020

没有办法做到这一点。使用 Ajax 将 javascript 变量传递给 php

# c++ - Raytracer 不会渲染多个对象的实例

> ID：16205654
> 
> 赞同：0
> 
> 时间：2013-04-25T02:59:43.093
> 
> 标签：c++, rendering, intersection, raytracing

我正在用 C++ 编写光线追踪器，但我很难理解为什么我的输出图像不包含所有应该存在的对象。也就是说，我正在使用球体和平面，并且我不能绘制多个实例。

对象值是从 ASCII 文件中读取的（例如半径、位置、法线等）。这是我的相交测试代码。

```
//check primary ray against each object
    for(int size = 0; size < objList.size(); size++){
      //if intersect
      if(objList[size]->intersect(ray,origin,&t)){
        if(t < minDist){ //check depth
          minDist = t; //update depth
          bestObj = size; //update closest object
        }
      }
    }
    vec3 intersection = origin + minDist*ray;

//figure out what to draw, if anything
    color_t shadeColor;
    if(bestObj != -1){ //valid object
      //get base color
      //using rgb color
      if(objList[bestObj]->rgbColor != vec3(-1)){
        shadeColor.r = objList[bestObj]->rgbColor.x;
        shadeColor.g = objList[bestObj]->rgbColor.y;
        shadeColor.b = objList[bestObj]->rgbColor.z;
      }
      //else using rgbf color
      else if(objList[bestObj]->rgbfColor != vec4(-1)){
        shadeColor.r = objList[bestObj]->rgbfColor.x;
        shadeColor.g = objList[bestObj]->rgbfColor.y;
        shadeColor.b = objList[bestObj]->rgbfColor.z;
        //need to do something with alpha value
      }
      //else invalid color
      else{
        cout << "Invalid color." << endl;
      }

//...the rest is just shadow and reflection tests. There are bugs here as well, but those are for another post 
```

上面的代码在一个检查每个像素的循环中。'ray' 是光线的方向，'origin' 是那条光线的原点。'objList' 是一个 stl 向量，用于保存场景中的每个对象。我已经测试以确保每个对象实际上都被放入向量中。

我知道我的交集测试正在工作......至少对于呈现的每种类型的一个对象。我已经让程序将“bestObj”所获得的所有值打印到一个文件中，但它似乎从未注册过除最后一个之外的任何对象都是“bestObj”。我意识到这是问题所在，没有其他对象被设置为“bestObj”，但我不知道为什么！

任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T04:04:22.867

感谢didierc，我发现了问题所在。我不确定他到底在说什么，但这让我想到了我是如何处理我的指针的。确实，尽管我的向量将每个对象都推回，但每次我推回一个对象时，我并没有创建新的对象。这导致 stl 向量中的每个球体都指向同一个球体（也就是从文件中读取的最后一个球体）！

# javascript - 使用嵌套的手风琴和非手风琴项展开/折叠全部：BOOTSTRAP

> ID：16205662
> 
> 赞同：1
> 
> 时间：2013-04-25T03:01:39.940
> 
> 标签：javascript, twitter-bootstrap, expand, collapse

我刚接触编程和 Twitter Bootstrap 大约 2 个月，所以请善待！

我做了很多挖掘和搜索，但不确定我使用的术语是否正确，所以我想我会直接问。

我正在尝试创建一个展开/折叠所有按钮，该按钮将展开或折叠标题标题下的所有项目。标题标题下的项目包括文本片段和图像。我希望能够通过单击标题标题来展开/折叠文本片段。我希望能够通过单击按钮来展开/折叠文本和图像。

问题是：无论文本是展开还是折叠，我都想按下按钮展开/折叠所有内容。

这是 jsfiddle：http: [//jsfiddle.net/mcfly303/XXXYn/1/](http://jsfiddle.net/mcfly303/XXXYn/1/)

如您所见，该按钮将打开或关闭与当前状态相反的项目。无论嵌套项目是展开还是折叠，有没有办法进行“通用”展开/折叠？

基本上我希望“全部切换”按钮只产生a）标题或b）标题和图像。

提前感谢您的帮助！！！！

我的html：

```
<div class="well sidebar-nav" id="sidebar">
    <ul class="nav nav-list">
        <li><a href="#" class="expandcollapse">Toggle All</a>

        </li>
    </ul>
</div>
<div class="accordion" id="accordion1">
    <div class="accordion-group">
        <div class="row-fluid">
           <div class="span9">
                <div class="accordion-heading"> <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion1" href="#collapseOne">
                                    <h2>COOL HAND LUKE</h2>
                    </a>

                </div>
            </div>
        </div>
        <div id="collapseOne" class="accordion-body collapse">
            <div class="accordion-inner">
               <div class="mainList"> <a href="#">Paul Newman Movies</a>  <a href="#"> <i class="icon-white icon-th-list"></i></a>

                </div>
            </div>
        </div>
    </div>
</div>

<div id="collapseMain" class="accordion-body collapse in">
    <div class="accordion-inner">
        <div class="row-fluid">
            <div class="span12">
                <img src="http://www.samefacts.com/wp-content/uploads/2012/12/CoolHandLuke_135Pyxurz.jpg" alt="">

            </div>
        </div>
    </div>
</div> 
```

我的JavaScript：

```
$('.expandcollapse').click(function () {

    $('.collapse').each(function (index) {
        $(this).collapse("toggle");
    });
}); 
```

编辑：所以我部分想通了。jsfiddle： http: [//jsfiddle.net/mcfly303/XXXYn/4/](http://jsfiddle.net/mcfly303/XXXYn/4/) 我将按钮拆分为两个单独的按钮，以清楚地标记我要实现的每个功能。但是，仍然有一个扭结。即在加载时，标题视图按钮上的第一次单击将切换文本打开和图片关闭。同样在加载时，第一次单击“标题和图像”按钮将打开文本并保持图像打开。

第一次单击后，一切正常，澄清（并编辑我上面的错误陈述）是：单击标题视图 - 折叠除标题之外的所有内容。单击标题将展开/折叠文本片段 单击标题和图像视图 - 展开为标题和图像。单击标题将展开/折叠文本片段

如果有人可以帮助解决“首次点击问题”的最后一个问题，我将不胜感激！

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T03:37:56.613

更新的 JS：

```
var isCollapsed = false;
$('.expandcollapse').click(function () {
  var collapseCommand = isCollapsed ? "show" : "hide";

  $('.collapse').each(function () {  
    $(this).collapse(collapseCommand);
  });

  isCollapsed = !isCollapsed;
}); 
```

我还添加了`in`该类，`#collapseOne`以便页面最初正确显示。

编辑：

基于您的编辑的新代码：

```
$('.titleView').click(function () {
  $('#collapseOne, #collapseMain').collapse('hide');
});

$('.fullStubView').click(function () {
  $('#collapseOne, #collapseMain').collapse('show');
}); 
```

除非我遗漏了什么，否则这似乎可以解决问题。[jsFiddle](http://jsfiddle.net/XXXYn/5/)

# java - Java JPanels 图形

> ID：16205663
> 
> 赞同：0
> 
> 时间：2013-04-25T03:01:40.130
> 
> 标签：java, swing, geometry, java-2d, paintcomponent

如果我有很多 JPanel，我将如何选择只使用其中一个？我正在尝试在我的绘图面板上绘制随机圆圈，但这不起作用？我无法让我的代码从 textArea 读取我的号码并在右侧面板中的随机位置和随机大小处生成该数量的圆圈。

主要的

```
public class Circles {
public static void main(String[]args){
JFrame frame = new JFrame("Cicles HW9 Chris Houston");
frame.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);

frame.getContentPane().add(new CirclesPanel());

frame.pack();
frame.setVisible(true);

}
} 
```

控制板

```
public class CirclesPanel extends JPanel implements ActionListener{
private JButton draw, clear;
private JTextArea textArea;
private JPanel panel, drawPanel, buttonPanel;
private int count;

public CirclesPanel(){

    JButton draw = new JButton("Draw");
    JButton clear = new JButton("Clear");
    JTextArea textArea = new JTextArea(1,10);
    textArea.setBorder(BorderFactory.createTitledBorder("Circles"));

    JPanel panel = new JPanel();
    panel.setLayout(new BorderLayout());
    setPreferredSize(new Dimension(620, 425));

    JPanel drawPanel = new JPanel();
    drawPanel.setPreferredSize(new Dimension(450,400));
    drawPanel.setBackground(Color.BLACK);

    JPanel buttonPanel = new JPanel();
    buttonPanel.setLayout(new GridLayout(3,1));

    add(panel);
    add(buttonPanel, BorderLayout.WEST);
    add(drawPanel, BorderLayout.EAST);
    buttonPanel.add(textArea);
    buttonPanel.add(draw);
    buttonPanel.add(clear);

    draw.addActionListener(this);
    clear.addActionListener(this);

}

public void actionPerformed(ActionEvent e) {

    if(e.getSource() == draw){
        String tempText = textArea.getText();
        count = Integer.valueOf(tempText);
        repaint();

        }
    }

public void paintComponent(Graphics g) {
    Random generator = new Random();
    int x, y, diameter;
    for(int i = 0; i < count; i++){
        x = generator.nextInt(90);
        y = generator.nextInt(90);
        diameter = generator.nextInt(30);
        g.drawOval(x, y, diameter, diameter);

}
  }
} 
```

# android - Android SQLite 查询 ContentProvider Case Statement 语法

> ID：16205665
> 
> 赞同：0
> 
> 时间：2013-04-25T03:01:50.877
> 
> 标签：android, sqlite, case

运行此查询时收到错误消息，是否知道我的语法错误是什么？

```
final Cursor c = getContentResolver().query(
Provider.GAME_URI, new String[]{"CASE WHEN " +DBHelper.COLUMN_CRE_USER + " = " + preferences.getInt(LoginScreen.ID, 0) + " THEN (" + DBHelper.COLUMN_CRE_PTS + " AS you AND " + DBHelper.COLUMN_CON_PTS + " AS them) ELSE (" + DBHelper.COLUMN_CON_PTS + " AS you AND " + DBHelper.COLUMN_CRE_PTS + " AS them)"},"turn = ?",
new String[] { preferences.getInt(LoginScreen.ID, 0) + ""}, null); 
```

> 04-24 19:57:48.345: E/AndroidRuntime(18775): 由: android.database.sqlite.SQLiteException: 靠近 "AS": 语法错误 (代码 1): , 编译时: SELECT CASE WHEN createduser = 112 THEN (createdplayerpts as you and connectedplayerpts as they) ELSE (connectedplayerpts as you and createdplayerpts as they) FROM game WHERE (turn = ?)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T03:21:18.907

尝试这个。

```
SELECT 
    CASE WHEN createduser = 112 THEN createdplayerpts ELSE connectedplayerpts END AS you,
    CASE WHEN createduser = 112 THEN connectedplayerpts ELSE createdplayerpts END AS them
FROM 
    game WHERE (turn = ?) 
```

# lua - Lua - 几个问题

> ID：16205667
> 
> 赞同：0
> 
> 时间：2013-04-25T03:01:57.760
> 
> 标签：lua

我是编码的业余爱好者。所以，如果我面对一些事情，请注意我。

无论如何，我正在为正在制作的操作系统制作 alpha 阶段吗？我正在制作我的安装程序。两个问题。我可以从 pastebin 中获取代码然后让我的 lua 脚本下载吗？二。我将代码的“打印”部分放在 cmd 中。我得到“非法字符”。我不知道出了什么问题。这是我的代码。

```
 --Variables
Yes = True
No = False
--Loading Screen
print ("1")
sleep(0.5)
print("2")
sleep(0.5)
print("Dowloading OS")
sleep(2)
print("Done!")
sleep(0.2)
print("Would you like to open the OS?")
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T05:33:29.967

我发现您的代码存在一些问题。

首先，`True`and`False`都是无意义的名字——除非你之前给它们分配了一些东西，否则它们都等于`nil`. 因此，您的`Yes`和`No`变量也都设置`nil`为。这并不是因为 lua 中不存在 true 和 false ——它们只是小写的:`true`和`false`. 创建`Yes`和`No`变量是多余的并且难以阅读 - 只需直接使用`true`和`false`。

其次，如果您使用的是从他们的网站下载的标准 lua，`sleep`则不是一个有效的功能（尽管它在 Lua 的 Roblox 版本中，或者我听说过）。和大写一样`True`，默认`False`是 sleep `nil`，所以调用它是行不通的。根据您正在运行的内容，`os.execute("sleep " .. number_of_seconds)`如果您在 Mac 上或`os.execute("timeout /t " .. number_of_seconds)`在 PC 上，您将希望使用它。你可能想把这些包装成一个`function`

```
function my_sleep_mac(number_of_seconds)
    os.execute("sleep " .. number_of_seconds)
end

function my_sleep_PC(number_of_seconds)
    os.execute("timeout /t " .. number_of_seconds)
end 
```

至于您遇到的具体错误，我认为这是由于您的`end`声明是程序的结尾。 `end`in lua 并没有完全按照你的想法做——它没有指定程序的结束。Lua 可以通过查看文件中是否有任何文本来确定程序的结束位置。不说不知道是各个子代码块在哪里结束，IE`if`语句的分支，`function`s等。例如，假设你写代码

```
print("checking x...")
if x == 2 then
print("x is 2")
print("Isn't it awesome that x is 2?")
print("x was checked") 
```

lua 无法知道最后一条语句（打印`x`已检查）是否应该仅在`x`2 或始终发生时才发生。因此，您需要明确说明您使用`end`. 但是，对于文件，这是不必要的，实际上会导致错误。这是`if`带有`end`介绍的声明

```
print("checking x...")
if x == 2 then
print("x is 2")
print("isn't it awesome that x is 2?")
end
print("x was checked") 
```

尽管 lua 并不关心，但缩进这些代码部分是一个非常好的主意，这样您就可以一眼看出它的开始和结束位置：

```
print("checking x...")
if x == 2 then
    print("x is 2")
    print("isn't it awesome that x is 2?")
end
print("x was checked") 
```

关于您的“pastebin”问题，您将不得不更加具体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:00:18.610

您可以`sleep`以独立于操作系统（但 CPU 密集型）的方式实现：

```
local function sleep(seconds)
  local t0 = os.clock()
  repeat
  until os.clock() - t0 >= seconds
end 
```

# bundler - 如何使用 Bundler 只需要 sinatra/base？

> ID：16205669
> 
> 赞同：0
> 
> 时间：2013-04-25T03:02:23.923
> 
> 标签：bundler

我只需要`sinatra/base`，但我不知道如何使用捆绑器来做到这一点。因为在`Gemfile`我不能给它'sinatra/base'，而是给它gem名称`sinatra`。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-25T19:33:00.707

在您的 Gemfile 中使用以下语法：

```
 gem "sinatra", "X.Y.Z", :require => "sinatra/base" 
```

然后，您可以使用 #require 方法通过捆绑程序要求它：

```
Bundler.require :default 
```

# windows - 它是否可能复制文件并将它们放置在我的文件夹中并使用 xy 坐标？

> ID：16205671
> 
> 赞同：0
> 
> 时间：2013-04-25T03:02:55.600
> 
> 标签：windows, winapi, batch-file, position, directory

确实存在问题，但是，我想创建一个批处理脚本或（任何脚本）来复制文件夹中的文件，以便能够以特定排列将它们定位在文件夹窗口中。例如，如果我将脚本应用到我的桌面或当前打开的窗口，那么它会排列我的所有快捷方式和文件以创建“X”图案或圆圈。是否可以在批处理文件中进行 XCOPY 并应用 x & y 定位？什么语言可以控制我的 Windows 8 或 Windows 7 桌面环境？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T13:07:01.390

这基本上就像在[这个问题](https://stackoverflow.com/questions/131690/how-can-i-programmatically-manipulate-windows-desktop-icon-locations)中回答的那样。桌面是一个列表视图，支持设置图标位置。您需要在复制操作后使用一个小程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-02T20:52:47.237

如果这是可能的，从 Windows Vista 开始，它可能只能在桌面上运行，或者在一个由 Shell 扩展提供便利的“地方”，如桌面。或者除非我弄错了，Explorer 不再在任何视图中排列项目。尝试自己重新定位。它应该以完美的网格弹回其排序顺序（除非您使用的是 XP 或 XP 之前的版本。）

我曾经有一个自解压档案，其中一个文件在提取后在其文件夹中远离几个滚动屏幕（全部单独）。两年后我才注意到那个文件。它是补丁的一部分。我以为文件丢失了时间。

# java - 重绘不更新？

> ID：16205672
> 
> 赞同：0
> 
> 时间：2013-04-25T03:03:00.740
> 
> 标签：java, swing, jpanel, repaint, mouselistener

到目前为止，我正在努力创建一个 JAVA 版本的 uno，我的老师称之为“Singles”。目前，我只是想获得一个可以移除卡片的工作套牌。

不过，我目前的问题是，当我移除一张卡时，没有任何更新。它根本不会重绘。我不知道为什么。

这是面板和框架类。

控制板：

```
package singles;

import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import javax.swing.JPanel;
import java.awt.event.MouseMotionListener;
/**
 *
 * @author Xenorosth
 */

public class CardPanel extends JPanel{
    private Card myCard; //To get information for card
    //private static Deck myDeck = new Deck(); //Get a deck!
    public CardPanel(Card myOtherCard){
        this.setSize(100,150);
        this.setPreferredSize(new Dimension(100,150));
        myCard = myOtherCard;
        //myCard = myDeck.getMainCard(0);
    }

    public void paintComponent(Graphics g){
        super.paintComponent(g); 
        g.setColor(Color.black); //Set word drawings to black

        if(myCard.isFlipped()){
            if(myCard.getColor() == "red"){
                this.setBackground(Color.red);
                g.drawString(myCard.getValue(), 30, 30);
            }
            else if(myCard.getColor() == "green"){
                 this.setBackground(Color.green);
                 g.drawString(myCard.getValue(), 30, 30);
            }
            else if(myCard.getColor() == "blue"){
                 this.setBackground(Color.blue);
                 g.drawString(myCard.getValue(), 30, 30);
            }
            else if(myCard.getColor() == "yellow"){
                 this.setBackground(Color.yellow);
                 g.drawString(myCard.getValue(), 30, 30);
            }
            else if(myCard.getColor() == "black"){
            this.setBackground(Color.black);
            g.setColor(Color.white);
            g.drawString(myCard.getValue(), 30, 30);
            g.setColor(Color.black);      
            }
        }
        else{
        this.setBackground(Color.black);
         g.setColor(Color.white);
         g.drawString("Singles", 30, 30);
         g.setColor(Color.black);  

        }

    }

    /**
     * @return the myCard
     */
    public Card getMyCard() {
        return myCard;
    }

    /**
     * @param myCard the myCard to set
     */
    public void setMyC`enter code here`ard(Card myCard) {
        this.myCard = myCard;
    }

} 
```

框架：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package singles;

import java.awt.Component;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.event.MouseMotionListener;
import javax.swing.JFrame;
import javax.swing.JLabel;

/**
 *
 * @author Xenorosth
 */
public class SinglesFrame extends JFrame implements MouseListener, MouseMotionListener{

    Deck myDeck = new Deck();
    CardPanel myTopMain = new CardPanel(myDeck.getMainCard(0)); //Top card of main deck
    CardPanel myTopUsed = new CardPanel(myDeck.getMainCard(1)); //Top card of used deck
    JLabel myLabel1 = new JLabel();

    public SinglesFrame(){
        setLayout(new FlowLayout(FlowLayout.CENTER));
       // myLabel1.setText(myDeck.getMainDeckLength() + "");
        myTopMain.addMouseListener(this);
        this.add(myTopMain);
        this.add(myTopUsed);
        this.add(myLabel1);

    }

    @Override
    public void mouseClicked(MouseEvent e) {
          myDeck.addUsedCard(myDeck.getMainCard(0));
          myDeck.removeMainCard(0);
          this.repaint();
          System.out.println(myDeck.getMainCard(0).toString());
    }

    @Override
    public void mousePressed(MouseEvent e) {
        //throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    public void mouseReleased(MouseEvent e) {
       // throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    public void mouseEntered(MouseEvent e) {
    //    throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    public void mouseExited(MouseEvent e) {
       // throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    public void mouseDragged(MouseEvent e) {
       // throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    public void mouseMoved(MouseEvent e) {
       // throw new UnsupportedOperationException("Not supported yet.");
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T03:28:58.387

让我们从这里开始...

```
CardPanel myTopMain = new CardPanel(myDeck.getMainCard(0));
CardPanel myTopUsed = new CardPanel(myDeck.getMainCard(1)); 
```

您创建两个`CardPanel`. 每个面板都传递了一个对`Card`

然后在你的`mouseClicked`事件中，你这样做......

```
myDeck.addUsedCard(myDeck.getMainCard(0));
myDeck.removeMainCard(0);
this.repaint();
System.out.println(myDeck.getMainCard(0).toString()); 
```

您已经更改了，但是两个s 指向`Deck`的引用没有改变。`Card``CardPanel`

你需要跟注（类似的东西）`setMyCard`，要么传递下一张要显示的牌，要么`null`。

您可能遇到的下一个问题是您的`paintComponent`方法不允许`null` `Card`

# android - 将字符串转换为双精度以在 LatLng/Google 地图中使用

> ID：16205675
> 
> 赞同：1
> 
> 时间：2013-04-25T03:03:15.423
> 
> 标签：android, string, google-maps-android-api-2

我需要将 String 值转换为 LatLng 值，以便在 Android 应用程序的 GoogleMaps 片段中使用。字符串值可能以“-45.654765, 65.432892”的形式出现。

我尝试了两种不同的方法，但都导致了错误。首先，我尝试使用 split() 并将结果放入 String[]，然后使用 parseDouble() 访问每个结果，如下所示：

```
String[] geo = GEO.split(",");
double lati = Double.parseDouble(geo[0]);
double lngi = Double.parseDouble(geo[1]);
LOCATION = new LatLng(lati, lngi); 
```

这产生由`ArrayIndexOutOfBoundsException`引起的`double lati = Double.parseDouble(geo[0]);`。我不太确定为什么。

我也尝试过使用 StringTokenizer，如下：

```
StringTokenizer tokens = new StringTokenizer(GEO, ",");
String lat = tokens.nextToken();
String lng = tokens.nextToken();
double lati = Double.parseDouble(lat);
double lngi = Double.parseDouble(lng);
LOCATION = new LatLng(lati, lngi); 
```

这会产生一个`NoSuchElementException`指向`String lng = tokens.nextToken();`。

在这两种情况下，我正在处理的字符串`GEO`, 是`public static final`通过意图从另一个活动传递的，目前它只是硬编码为`"43.75,-70.15"`.

`LOCATION`是`public static`并且 是一个初始化为 的 LatLng 变量`null`。

谁能指出我正确的方向？这看起来很简单，所以我比平时更困惑......

编辑：

数据源自通过意图传递的不同活动。接收意图的活动`GEO`定义如下：

```
public static final String GEO = "geo"; 
```

上一个活动的意图是这样的：

```
 bundle.putString(PlaceActivity.GEO, geo); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T03:23:13.500

You should have

```
String loc = getIntent().getExtras().getString(PlaceActivity.GEO);
String[] geo = loc.split(","); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T03:12:48.203

你可以只使用一个非常基本的`substring`：

```
int index = GEO.indexOf(",");
String lat = GEO.substring(0, index).trim();
String lng = GEO.substring(index+1).trim();
double lati = Double.parseDouble(lat);
double lngi = Double.parseDouble(lng);
LOCATION = new LatLng(lati, lngi); 
```

抱歉，未经测试。

# c# - 订阅 observable 未达到 oncompleted

> ID：16205681
> 
> 赞同：0
> 
> 时间：2013-04-25T03:04:25.617
> 
> 标签：c#, .net, wcf, system.reactive

我正在尝试为 wcf 调用创建一个可观察的包装器，我创建如下。

方法是这样的，

```
private IObservable<List<string>> Search(string searchTerm)
    {
        return Observable.Create<List<string>>(o =>
        {
            var searchClient = new SearchServiceClient();
            var s = Observable
                .FromEventPattern<SearchCompletedEventArgs>(searchClient, "SearchCompleted");
            var subscription = s.Subscribe(
                r =>
                {
                    if (r.EventArgs.Error == null)
                        o.OnNext(r.EventArgs.Result);
                    else
                    {
                        o.OnError(r.EventArgs.Error);
                    }
                },
                    e =>
                    {
                        o.OnError(e);
                    },
                        () =>
                        {
                            o.OnCompleted();
                        });
            searchClient.SearchAsync(searchTerm);
            return subscription;
        });
    } 
```

和方法调用是，

```
Search("reactive").Subscribe(
                   r =>
                   {
                       MessageBox.Show("Result");
                   },
                   e =>
                   {
                       MessageBox.Show(e.ToString());
                   },
                   () =>
                   {
                       MessageBox.Show("Completed");
                   }); 
```

但它永远不会到达已完成的块。你能建议我哪里出错了吗？

@26日编辑

感谢 Petar Vučetin、Rarous 和 Lee Campbell。我已经测试了所有三个建议，并且都在工作。但我喜欢 Petar 对单行代码的处理方式。即使它似乎 Observable.FromAsyncPatterns 已被贬低。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:16:14.283

@Rarous 是正确的。事件没有完成的概念，因此 FromEventPattern 永远不会完成（或错误）。我认为首选的方法是使用 Petar Vučetin 指定的 Task.FromAsync.ToObservable，然后考虑 Rarous 指定的 FromAsyncPattern。如果你真的想要，你可以通过使它看起来像这样来更正你的代码。

```
private IObservable<List<string>> Search(string searchTerm)
{
    return Observable.Create<List<string>>(o =>
    {
        var searchClient = new SearchServiceClient();
        var s = Observable
            .FromEventPattern<SearchCompletedEventArgs>(searchClient, "SearchCompleted");
        var subscription = s.Subscribe(
            r =>
            {
                if (r.EventArgs.Error == null)
                {
                    o.OnNext(r.EventArgs.Result);
                    o.OnCompleted();
                }
                else
                {
                    o.OnError(r.EventArgs.Error);
                }
            });
        searchClient.SearchAsync(searchTerm);
        return subscription;
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T14:47:56.120

从事件创建的 Observable 永远不会运行到完成。正如 Petar 所提到的，您可以从异步模式创建 Observables。您可以使用工厂方法，而不是强制转换`Task`为 Observable：

```
IObservable<string[]> Search(string searchTerm)
{
    var searchClient = new Service1Client();
    return Observable.FromAsyncPatterns(searchClient.BeginGetData, searchClient.EndGetData)(searchTerm);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T04:02:13.923

如果您可以为 WCF 客户端生成异步方法，则可以尝试这种方法。

```
 static void Main(string[] args)
        {
            var searcher = Search("test").Subscribe(Console.WriteLine);
            Console.WriteLine("Done");
            Console.ReadLine();
        }

        private static  IObservable<string[]> Search(string searchTerm)
        {
            var searchClient = new Service1Client();

            return Task<string[]>.Factory.FromAsync(searchClient.BeginGetData, searchClient.EndGetData, searchTerm, null).ToObservable();
        } 
```

# jquery - 点击jQuery时改变颜色

> ID：16205682
> 
> 赞同：1
> 
> 时间：2013-04-25T03:04:53.010
> 
> 标签：jquery, html

我想做类似的事情我有这个代码

```
$(document).ready(function(){
  $('#au').click(function(){
    $('#light1').css('background', 'yellow');
  });
  $('#cu').click(function(){
    $('#light2').css('background', 'yellow');
  });
}); 
```

运行良好，但我想在单击另一个 div 时删除其中一个 div 的背景。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T03:05:24.397

您可以设置`transparent`背景以提供移除背景的效果，也可以将背景设置为`none`. 就您而言，听起来您想选择该`background: none`选项-见下文。

**没有任何：**

```
$('#cu').click(function(){
    $('#light2').css('background', 'none');
}); 
```

**透明的：**

```
$('#cu').click(function(){
    $('#light2').css('background', 'transparent');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T03:09:58.773

您应该使用类而不是使用 ID：

```
$('.clickable').click(function(){
    $('.light').css('background', 'none');
    $('.light').eq($(this).data('light')).css('background', 'yellow');
}); 
```

这适用于 HTML，例如：

```
<div class="light"></div>
<div class="light"></div>
<button id="au" class="clickable" data-light="0"/>
<button id="cu" class="clickable" data-light="1"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T03:16:05.613

怎么样：

```
$(document).ready(function(){
  $('#au').click(function(){
    $('#light1').toggleClass('yellow');
});
  $('#cu').click(function(){
    $('#light2').toggleClass('yellow');
  });
}); 
```

# ubuntu - (Ubuntu 10.04) 安装 php5 时如何摆脱安装 apache2？

> ID：16205684
> 
> 赞同：1
> 
> 时间：2013-04-25T03:05:16.530
> 
> 标签：ubuntu, apt

由于我想使用 nginx ，我不想安装 apache2

[http://packages.ubuntu.com/lucid-updates/php5-curl](http://packages.ubuntu.com/lucid-updates/php5-curl) 在该链接中没有对 apache2 的依赖。

```
root@ubuntu:/etc/apt/apt.conf.d# apt-get install --no-install-recommends php5-curl
Reading package lists... Done
Building dependency tree       
Reading state information... Done
The following extra packages will be installed:
  apache2-mpm-prefork apache2-utils apache2.2-bin apache2.2-common libapache2-mod-php5 libaprutil1-dbd-sqlite3
  libaprutil1-ldap

Suggested packages:
  apache2-doc apache2-suexec apache2-suexec-custom php-pear

Recommended packages:
  ssl-cert

The following NEW packages will be installed:
  apache2-mpm-prefork apache2-utils apache2.2-bin apache2.2-common libapache2-mod-php5 libaprutil1-dbd-sqlite3
  libaprutil1-ldap php5-curl

0 upgraded, 8 newly installed, 0 to remove and 49 not upgraded.

Need to get 6,281kB of archives.
After this operation, 19.3MB of additional disk space will be used. 
```

这很烦人，我无法摆脱安装 apache2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T03:15:15.730

正如您从链接中看到的那样，该包依赖于`phpapi-20090626`，它是由 、 、 或 之一提供`libapache2-mod-php5`的`libapache2-mod-php5filter`虚拟`php5-cgi`包`php5-cli`。在没有理由不这样做的情况下，它会更喜欢第一个，这取决于 Apache。

要解决此问题，请手动安装提供`phpapi-20090626`. 后两个选项不依赖于 Apache。

```
apt-get install php5-cli
apt-get install php5-curl 
```

# d3.js - D3 重绘笔刷

> ID：16205687
> 
> 赞同：2
> 
> 时间：2013-04-25T03:05:27.157
> 
> 标签：d3.js, brush

我有一个问题好几个星期都无法解决。我正在研究这个例子的修改版本：http: [//bl.ocks.org/mbostock/1667367](http://bl.ocks.org/mbostock/1667367)我最初定义了画笔，所以它的画笔范围在 0.5 和 0.8 之间。

```
var brush = d3.svg.brush()
    .x(x2)
    .extent([0.5, 0.8])
    .on("brush", brushed); 
```

画笔选择显示在正确的位置（在上下文图上），但焦点区域的初始视图仍设置为整个数据集的范围（而不是画笔的剪切区域）。我读过定义画笔不会自动强制重绘该区域，但我似乎无法弄清楚如何使焦点区域的视图自动缩放到画笔范围。有人可以提供一些意见吗？

**更新 1** 我目前有一个名为 Brushed 的函数，它执行以下操作：

```
function brushed() {
  x.domain(brush.empty() ? x2.domain() : brush.extent());
  focus.select("path").attr("d", Light_area);
  focus.select(".x.axis").call(xAxis);
  Light_line_overlay.select("path").attr("d", Light_area);

  rules.select(".y.grid").call(make_x_axis_light()
          .tickSize(-height, 0, 0)
          .tickFormat("")
      );

  var xx0=brush.x()(brush.extent()[0]);
  var xx1=brush.x()(brush.extent()[1]);

  brushfill.attr("x", xx0);
  brushfill.attr("width", xx1-xx0);
} 
```

它与示例略有不同......因为我一直在对其进行修改以执行与基本示例不同的操作。然而，第一条评论建议我应该在声明画笔后调用这个画笔函数（见第一篇文章）。然而，调用这个函数并没有做任何事情（或者至少，它不会将焦点区域更新到画笔的范围）。你有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-04T13:36:40.923

我很抱歉迟了两年才回答这个问题，但我遇到了同样的情况，这是我在这个话题上找到的唯一资源。我能够弄清楚，所以希望这会帮助其他任何偶然发现它的人。

原始问题中的代码几乎一直存在，只是在范围初始化上没有正确的缩放比例。

我正在使用的数据是一个对象数组，其中包含一个用于我的值的`ts`键（即纪元毫秒） 。`x`

```
// These are needed for the brush construction to know how to scale
x2.domain(x.domain());
y2.domain(y.domain());

// Pick out the ~50% and ~80% marks from the data
var N = data.length;
var cx0 = new Date(data[Math.floor(N*0.50)].ts);
var cx1 = new Date(data[Math.floor(N*0.80)].ts);

// Construct with that extent, which will leave the
// context box started in the correct position.
var brush = d3.svg.brush()
                  .x(x2)
                  .extent([cx0, cx1])
                  .on("brush", brushed)
;

// This is just the original brushed example 
function brushed() {
    x.domain(brush.empty() ? x2.domain() : brush.extent());
    focus.select(".area").attr("d", line);
    focus.select(".x.axis").call(xAxis);
}

...

var focus = svg.append("g")
               .attr("class", "focus")
               .attr("transform",
                     "translate(" + margin.left + "," + margin.top + ")")
;

// Now that focus is defined we can manually update it
brushed(); 
```

实际上，我`brushed`在设置的最后保留了对的调用，只是为了保持美观，但这里的目的只是为了说明一旦`focus`定义，您就可以调用`brushed`来执行您想要的任何更新。

最终，您的主要问题似乎是在一定程度上获得正确的类型。使用`[0.5, 0.8]`用于初始化，但如果您检查`brushed`是否从实际使用鼠标滑动焦点时调用，`brush.extent()`将是`[Date(), Date()]`. 这是有道理的，因为我们正在将这个范围传递给`x.domain`. 所以这在初始化画笔之前设置了所有缩放，因此初始化范围可以是 a `Date`，然后其他一切都是肉汁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T03:38:06.097

每当以编程方式更改画笔范围时，您都需要执行类似于画笔功能的操作。调整 x.domain 的大小，刷新视图。

```
function brushed() {
  x.domain(brush.empty() ? x2.domain() : brush.extent());
  focus.select("path").attr("d", area);
  focus.select(".x.axis").call(xAxis);
} 
```

如果这不能解决您的问题，请考虑提供一些代码示例。

# ruby-on-rails - rails remote_ip 中间件中的一个奇怪错误

> ID：16205688
> 
> 赞同：2
> 
> 时间：2013-04-25T03:05:28.550
> 
> 标签：ruby-on-rails

这是我在 Rails 生产环境中发现的错误：

```
IP spoofing attack?!HTTP_CLIENT_IP="10.127.166.241"HTTP_X_FORWARDED_FOR="10.127.166.241, 61.164.36.180"
actionpack (3.2.11) lib/action_dispatch/middleware/remote_ip.rb:55:in `calculate_ip' 
```

于是我深入到 rails [remote_ip.rb](https://codeclimate.com/github/rails/rails/ActionDispatch%3a%3aRemoteIp%3a%3aIpSpoofAttackError)源代码，过一遍`calculate_ip`，在本地测试，发现它不应该发生，这里是测试代码：

```
forwarded_ips = "10.127.166.241, 61.164.36.180".strip.split(/[,\s]+/).reverse
client_ips ="10.127.166.241".strip.split(/[,\s]+/).reverse
!forwarded_ips.include?(client_ips.last) # return false? 
```

根据我阅读源代码后的理解，caculate_ip`61.164.36.180`会在错误的情况下返回，有人知道为什么吗？谢谢~

# emacs - OSX / Emacs -- 用于打开/保存文件的目录树的箭头键导航

> ID：16205692
> 
> 赞同：1
> 
> 时间：2013-04-25T03:05:43.983
> 
> 标签：emacs

在 OSX（Mountain Lion）中打开/保存文件时是否可以使用箭头键导航目录树？我宁愿不使用鼠标，也不想输入文件夹的名称。箭头键没有任何作用，除了 command+up/down。

我已经尝试了几个不同的 OSX 版本的 Emacs，但还没有弄清楚如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T05:19:26.147

我将这个 bug 传达给了开发人员，他们很快回应说这个 bug 已经在 emacs-trunk 的开发人员版本中得到解决。此后，我构建了 eacs-trunk 的开发人员版本，并验证了该错误已修复——它将作为下一个主要版本的一部分提供，或者供任何想要使用夜间版本的人使用。Aquamacs 的夜间版本已经合并了来自 emacs-trunk 的这个错误修复。

# javascript - 以编程方式更改由标签值对对象填充的 Dojo Form Select 的选定选项

> ID：16205699
> 
> 赞同：0
> 
> 时间：2013-04-25T03:06:37.510
> 
> 标签：javascript, dojo, dojox.mobile

我有一个 Dojo 表单选择输入框，我在其中使用具有标签值对的 javascript 数据对象填充选项（下面构建此类对象的示例代码）：

```
for loop {
  varStateValuePairs.push({
    label: <State ID>, 
    value: <State Name>
  });
}
dijit.byId("StateDDL").addOption(varStateValuePairs); 
```

现在，我想在这个 Dojo Form Select 中以编程方式选择一个特定的状态。我尝试了以下方法：

```
dijit.byId("StateDDL").attr("value", String(5)); // 5 is the example value corresponding to the label-value pair I want to select
dijit.byId("StateDDL").attr("value", 5);
dojo.byId("StateDDL").value = 5;
dijit.byId("StateDDL").set("displayedValue", "Texas"); 
```

以上都不起作用。我哪里错了？我进行了很多搜索，其他帖子中列出的解决方案都不适合我。我正在运行 Dojo 1.8。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T06:52:03.217

使用`Select.setValue()`.

[http://jsfiddle.net/fiddlegrimbo/qauHX/2/](http://jsfiddle.net/fiddlegrimbo/qauHX/2/)

`value0`默认会被选中，我们`value2`手动选择。

```
var varStateValuePairs = [];
for (var i = 0; i < 10; i++) {
  varStateValuePairs.push({
    label: "state"+i, 
    value: "value"+i
  });
}

require(["dojo/parser", "dijit/registry", "dijit/form/Select", "dojo/domReady!"], function (parser, registry) {
    parser.parse().then(function () {
        var widget = registry.byId("StateDDL");
        widget.addOption(varStateValuePairs);
        widget.setValue("value2");
    });
}); 
```

# ios - 有没有办法保留 UIImage 的中心（倒置帽插图）

> ID：16205700
> 
> 赞同：4
> 
> 时间：2013-04-25T03:06:38.910
> 
> 标签：ios, objective-c, uiimageview, uiimage, image-resizing

有没有办法保留图像的中心而不是插图。像倒置的 Cap Inset？

# c++ - 快速计算 3 维空间中的粒子接近度

> ID：16205701
> 
> 赞同：1
> 
> 时间：2013-04-25T03:06:39.567
> 
> 标签：c++, algorithm, math, loops

这似乎是一个简单的问题，但我目前看不到其他路线。没有太多不必要的细节，大致的概念如下：

我在包含的 3 维空间中有许多实体（想想粒子）实例。初始实例的数量可以从 10 到 1000 个所述粒子变化，每个都用它的标识号和它自己的 x、y 和 z 坐标进行初始化。粒子可能会超时移动，因此这里的目标是能够尽快检查任何两个粒子是否在彼此预设的接近距离内（在任何方向上）。我能想到的最简单但不幸的是不优雅/缓慢的方法是嵌入 for 循环，如下所示：

```
 for(int i = 0; i < upper; i++)
    {
        for(int j = 0; j < upper; j++)
        {
            //If within proximity
            if(sqrt( ((entity1.x[i] - entity2.x[j])*(entity1.x[i] - entity2.x[j])) + ((entity1.y[i] - entity2.y[j])*(entity1.y[i] - entity2.y[j])) + ((entity1.z[i] - entity2.z[j])*(entity1.z[i] - entity2.z[j])) ) <= proximity )
            {
                //Perform function
            }
        }
    } 
```

这是我的代码中的实际循环。我正在使用 3 维中的距离公式，查看所述距离是否小于预定义的接近度。如果它们在那个距离内，那么我执行一个功能。目前我有什么都不做的功能，所以我可以只观察循环本身的时间，而不用担心里面的算法。我知道每个系统的时间各不相同，但我的系统至少是平均上限，如果不是更好的话，这个循环大约需要 5 秒才能完成，而上限设置为 100 个循环。有没有更快的算法来做到这一点？还是我在这个循环中做了一些非常低效的事情？我能做的越快越好。

感谢您的帮助，DevenJ

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T03:16:31.677

这里要提到的一件事是，如果速度很重要，您不应该使用平方根来进行计算。更好的方法是对接近值进行平方并删除平方根。

您还需要确保不重复计算。例如，考虑下面的方法

```
for(int i = 0; i < upper; i++)
{
    for(int j = 0; j < upper; j++)
    {
        if(i < j)
        {
            //do stuff
        }
    }
} 
```

但是二进制八叉树是更好的解决方案，尽管它们需要更多的算法知识。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T03:13:24.823

您可以通过设置消除在循环内使用 sqrt() 的需要

```
proximity = proximity * proximity; 
```

在循环之前。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T03:14:11.887

将您的实体存储在对您的空间进行分区的数据结构中将允许您消除任何未包含在包含您的邻近区域的分区中的粒子。二进制空间分区、四叉树和八叉树对此很有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T03:15:39.600

对于正值，如果`a <= b`，则`a^2 <= b^2`。

平方根运算保留两个值之间的顺序。因此，只需在循环之前平方您的接近度以匹配平方幅度。

# c++ - Matlab 无法正确初始化 C++ 共享库

> ID：16205705
> 
> 赞同：1
> 
> 时间：2013-04-25T03:07:12.097
> 
> 标签：c++, matlab, shared-libraries, visual-c++-2010, matlab-deployment

我正在尝试在 Visual C++ 中使用 MATLAB 中的 deploytool 生成的 C++ 共享库。我收到一个错误：无法正确初始化库。

我跟着：

[http://www.mathworks.com/support/solutions/en/data/1-2QTWCE/](http://www.mathworks.com/support/solutions/en/data/1-2QTWCE/)和[http://blogs.mathworks.com/loren/2011/02/03/creating-c-shared-libraries-and -dlls/](http://blogs.mathworks.com/loren/2011/02/03/creating-c-shared-libraries-and-dlls/)教程。

我的代码是：.cpp 文件是：

```
#include "stdafx.h"
#include "try2.h"
#include <iostream>
#include <string.h>
#include "mex.h"
#include "mclmcr.h"
#include "mclmcrrt.h"
#ifdef _DEBUG
#pragma comment(lib, "try2.lib")
#pragma comment(lib, "mclmcrrt.lib")
#pragma comment(lib, "mclcommain.lib")
#pragma comment(lib, "mclbase.lib")
#pragma comment(lib, "mclmcr.lib")
#pragma comment(lib, "mclxlmain.lib")
#else
#pragma comment(lib, "try2.lib")
#pragma comment(lib, "mclmcrrt.lib")
#pragma comment(lib, "mclcommain.lib")
#pragma comment(lib, "mclbase.lib")
#pragma comment(lib, "mclmcr.lib")
#pragma comment(lib, "mclxlmain.lib")
#endif
using namespace std;
int _tmain(int argc, _TCHAR* argv[])
{
    /* Call the MCR and library initialization functions */

if( !mclInitializeApplication(NULL,0) )
{

      std::cerr << "Could not initialize the application properly."
                  << std::endl;
        return -1;
}
try2Initialize();
if (!try2Initialize())
{

     std::cerr << "Could not initialize the library properly."
                  << std::endl;
        return -1;
}

     mwArray img= "C:/Users/Desktop/dressimages/T1k5aHXjNqXXc4MOI3_050416.jpg";

            shoes(img);
            try2Terminate();
mclTerminateApplication();
            return 0;
} 
```

从 MATLAB 生成的 try2.cpp 包装文件是

```
//
  // MATLAB Compiler: 4.18 (R2012b)
  // Date: Tue Apr 23 13:16:46 2013
  // Arguments: "-B" "macro_default" "-W" "cpplib:try2" "-T" "link:lib" "-d"
  // "C:\UsersDocuments\MATLAB\try2\src" "-N" "-p" "vision" "-p"
  // "stats" "-w" "enable:specified_file_mismatch" "-w" "enable:repeated_file"
  // "-w" "enable:switch_ignored" "-w" "enable:missing_lib_sentinel" "-w"
  // "enable:demo_license" "-v"
  // "C:\Users\Desktop\trial\shoes.m" "-a"
  // "C:\Users\Desktop\trial\color_space_file.mat" 
  //
#include <stdio.h>
#define EXPORTING_try2 1
#include "try2.h"
static HMCRINSTANCE _mcr_inst = NULL;
#if defined( _MSC_VER) || defined(__BORLANDC__) || defined(__WATCOMC__) || defined(__LCC__)
#ifdef __LCC__
#undef EXTERN_C
#endif
#include <windows.h>
static char path_to_dll[_MAX_PATH];
BOOL WINAPI DllMain(HINSTANCE hInstance, DWORD dwReason, void *pv)
{
    if (dwReason == DLL_PROCESS_ATTACH)
    {
        if (GetModuleFileName(hInstance, path_to_dll, _MAX_PATH) == 0)
            return FALSE;
    }
    else if (dwReason == DLL_PROCESS_DETACH)
    {
    }
    return TRUE;
}
#endif
#ifdef __cplusplus
extern "C" {
#endif
static int mclDefaultPrintHandler(const char *s)
{
  return mclWrite(1 /* stdout */, s, sizeof(char)*strlen(s));
}
#ifdef __cplusplus
} /* End extern "C" block */
#endif
#ifdef __cplusplus
extern "C" {
#endif
static int mclDefaultErrorHandler(const char *s)
{
  int written = 0;
  size_t len = 0;
  len = strlen(s);
  written = mclWrite(2 /* stderr */, s, sizeof(char)*len);
  if (len > 0 && s[ len-1 ] != '\n')
    written += mclWrite(2 /* stderr */, "\n", sizeof(char));
  return written;
}
#ifdef __cplusplus
} /* End extern "C" block */
#endif
/* This symbol is defined in shared libraries. Define it here
 * (to nothing) in case this isn't a shared library. 
 */
#ifndef LIB_try2_C_API
#define LIB_try2_C_API /* No special import/export declaration */
#endif
LIB_try2_C_API 
bool MW_CALL_CONV try2InitializeWithHandlers(
    mclOutputHandlerFcn error_handler,
    mclOutputHandlerFcn print_handler)
{
    int bResult = 0;
  if (_mcr_inst != NULL)
    return true;
  if (!mclmcrInitialize())
    return false;
  if (!GetModuleFileName(GetModuleHandle("try2"), path_to_dll, _MAX_PATH))
    return false;
    {
        mclCtfStream ctfStream = 
            mclGetEmbeddedCtfStream(path_to_dll);
        if (ctfStream) {
            bResult = mclInitializeComponentInstanceEmbedded(   &_mcr_inst,
                                                                error_handler, 
                                                                print_handler,
                                                                ctfStream);
            mclDestroyStream(ctfStream);
        } else {
            bResult = 0;
        }
    }  
    if (!bResult)
    return false;
  return true;
}
LIB_try2_C_API 
bool MW_CALL_CONV try2Initialize(void)
{
  return try2InitializeWithHandlers(mclDefaultErrorHandler, mclDefaultPrintHandler);
}
LIB_try2_C_API 
void MW_CALL_CONV try2Terminate(void)
{
  if (_mcr_inst != NULL)
    mclTerminateInstance(&_mcr_inst);
}
LIB_try2_C_API 
void MW_CALL_CONV try2PrintStackTrace(void) 
{
  char** stackTrace;
  int stackDepth = mclGetStackTrace(&stackTrace);
  int i;
  for(i=0; i<stackDepth; i++)
  {
    mclWrite(2 /* stderr */, stackTrace[i], sizeof(char)*strlen(stackTrace[i]));
    mclWrite(2 /* stderr */, "\n", sizeof(char)*strlen("\n"));
  }
  mclFreeStackTrace(&stackTrace, stackDepth);
}
LIB_try2_C_API 
bool MW_CALL_CONV mlxShoes(int nlhs, mxArray *plhs[], int nrhs, mxArray *prhs[])
{
  return mclFeval(_mcr_inst, "shoes", nlhs, plhs, nrhs, prhs);
}
LIB_try2_CPP_API 
void MW_CALL_CONV shoes(const mwArray& imagepath)
{
  mclcppMlfFeval(_mcr_inst, "shoes", 0, 0, 1, &imagepath);

  } 
```

当我尝试运行它时，它无法初始化 try2Initialize()。有什么解决办法？它是一个win32 控制台应用程序。

我正在使用 Visual Studio 2010、MATLAB R2012b-64bit，我的操作系统是 Windows 7。P>S。对不起，多余的代码只是想给出程序的细节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-28T10:33:03.117

我不确定 R2012b 和 64 位版本。我正在使用 r2012a。但我想我可以分享我的故事。我一直使用 deploytool，所以生成的方法被命名为你的方法：try2Initialize(); 最近改成mcc命令，发现在c文件中，方法名还是一样的，但是如果我用一些3方工具检查dll文件中的方法名，比如dll export viewer：[http://www. nirsoft.net/utils/dll_export_viewer.html](http://www.nirsoft.net/utils/dll_export_viewer.html)

实际的方法名称是 _try2Initialize(); 前面有一点_

因此，如果您用尽选项，我建议您检查方法名称。祝你好运！

# c++ - 为单链接堆栈编写 operator==

> ID：16205709
> 
> 赞同：0
> 
> 时间：2013-04-25T03:07:42.250
> 
> 标签：c++, stack

我在`operator==`为我的堆栈类编写函数时遇到了很多麻烦，我似乎无法理解逻辑。目前我有：

```
template<class myType>
bool linkedStack<myType>::operator==(const linkedStack<myType>& op)
{
    linkedStack<myType> stackA, stackB;
    bool res = false;
    stackA.copyStack(this);
    stackB.copyStack(op);

    while(!stackA.isStackEmpty() && !stackB.isStackEmpty())
    {
        if (stackA.peek() == stackB.peek()) {
            stackA.pop();
            stackB.pop();
            if (stackA.isStackEmpty() && stackB.isStackEmpty())
                res = true;
        } else
            res = false;
    }
    return res;
} 
```

问题是我无法将当前类堆栈复制到 stackA 中，因为`this`它是一个 const 指针，并且我的 copyStack 会喷出编译器错误。必须有一个更简单的解决方案，有人可以指出我正确的方向吗？谢谢！

编辑：我的代码的修改部分：

```
template<class myType>
bool linkedStack<myType>::operator==(const linkedStack<myType>& op)
{
    nodeType<myType> *current, *opcurrent;
    current = stackTop;
    opcurrent = op.stackTop;

    while(current != NULL && opcurrent != NULL)
    {
        if (current->info != opcurrent->info) {
            return false;
        }
        current = current->link;
        opcurrent = opcurrent->link;
    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T03:15:58.690

一旦发现差异，您就不需要遍历所有堆栈，此时您可以直接返回 false。

```
while(!stackA.isStackEmpty() && !stackB.isStackEmpty())
{
    if (stackA.peek() == stackB.peek()) {
        stackA.pop();
        stackB.pop();
    } else
        return false;
}
return stackA.isStackEmpty() && stackB.isStackEmpty(); 
```

更笼统地说，如果您在类中进行操作，您还不如直接使用类的内部数据，而不是制作副本（这也会导致堆栈保存的所有数据的副本）。您应该使用几个指针来跟踪内部列表。这段代码可以很容易地从上面的代码中派生出来，它应该给出以下内容：

```
node *a_ptr = head_ptr;
node *b_ptr = op.head_ptr;
while(!(a_ptr == tail || b_ptr == tail)
{
    if (a_ptr->data == b_ptr->data) {
        a_ptr = a_ptr->next;
        b_ptr = b_ptr->next;
    } else
        return false;
}
return (a_ptr == tail && b_ptr == tail); 
```

取决于您的实施细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T03:16:51.460

第一次调用比较方法不应该修改它被调用的对象。宣布它`const`。

其次，我认为像这样复制对象不是一个好主意，因为堆栈非常大，可能会导致性能问题（我假设是通用用法）。

但最重要的是，如果这是您的堆栈实现，为什么不使用内部数据而不是调用这样的公共方法呢？

例如，微软的 STD 使用 deque 作为堆栈的内部数据表示，并且`operator==`简单地定义为：

```
template<class _Ty,
    class _Container> inline
    bool operator==(const stack<_Ty, _Container>& _Left,
        const stack<_Ty, _Container>& _Right)
    {   // test for stack equality
    return (_Left._Get_container() == _Right._Get_container());
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T03:21:41.327

You are making local copies of both `this` and `op`. This is unnecessary and you can do the comparisons directly between the data in `this` and `op` instead. It looks like you are trying to pass a const-object to a function taking a non-const parameter. `copyStack` should take a const reference or pointer.

# php - HTML5 localStorage 和同源策略：有时有效，有时无效

> ID：16205711
> 
> 赞同：0
> 
> 时间：2013-04-25T03:08:03.063
> 
> 标签：php, javascript, html, local-storage

我有一个托管一些 .html 文件的服务器（实际上都是 .php，但客户端只能看到 html）。当用户输入 page1.html 时，有一个按钮可以转到 page2.html。这个按钮有 href="page2.html" 和 rel="external"。其他 4 页也是如此。

我的 localStorage 停留在第 1,2 和 3 页之间，但不在第 4 和 5 页之间。此外，如果在页面内打开一个弹出窗口（我使用 jquery mobile 的弹出窗口），在弹出窗口打开时运行的任何 javascript 我总是得到未定义的 localstorage 值条目。谷歌浏览器的元素检查器-->资源在弹出窗口打开时显示值，但 javascript 警报给出未定义。

那么：什么可能导致这种情况？我很喜欢“[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)”（都以[http://www.example.com/](http://www.example.com/)开头），但是某些东西必须导致其他页面没有 localStorage。

这是我的大多数页面开始的 php 代码：

```
<?php
$userid = mysqli_real_escape_string($connection, $_GET['userid']);
echo "<script>localStorage.userid = $userid;</script>";

$keyword = mysqli_real_escape_string($connection, $_GET['keyword']);
echo "<script>localStorage.keyword = $keyword;</script>";
?> 
```

然后我还将进入下一页的按钮设置为包含相同的 php 查询字符串，以便下一页获得相同的变量。当然，如果 localStorage 正常工作并且我可以从它们那里获取值（并稍后对它们做一些事情），这将是不必要的。我使用谷歌浏览器的元素检查器来查看每个页面在本地存储中的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T04:13:03.537

我在滥用 phph 和 localStorage 的组合。我有时会输入以下内容（省略 php echo）：

localStorage.keyword = $关键字；

但它应该用引号引起来：

localStorage.keyword = '$keyword';

这样就解释了某些只有未定义条目的页面中的随机行为。

# python - 对于 Base64 编码，更喜欢 str.encode('base64_codec') 还是 base64.b64encode(str)？

> ID：16205713
> 
> 赞同：4
> 
> 时间：2013-04-25T03:08:14.307
> 
> 标签：python, codec

在 Python 库中，有用于处理 Base64 的 base64 模块。同时，如果要对字符串进行编码，还有base64的编解码器，即`str.encode('base64_encode')`. 首选哪种方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T03:16:12.787

虽然它可能适用于 Python 2：

```
>>> 'foo'.encode('base64')
'Zm9v\n' 
```

Python 3 不支持它：

```
>>> 'foo'.encode('base64')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
LookupError: unknown encoding: base64 
```

并且在速度方面（在 Python 2 中），该`b64encode`方法大约比 快三倍`.encode()`：

```
In [1]: %timeit 'fooasodaspf8ds09f8'.encode('base64')
1000000 loops, best of 3: 1.62 us per loop

In [5]: %timeit b64encode('fooasodaspf8ds09f8')
1000000 loops, best of 3: 564 ns per loop 
```

所以无论是速度还是兼容性，`base64`模块都比较好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-23T15:25:50.797

仅供参考，还有另一个适用于 Python 2.4+ 和 3.2+ 的选项：

```
>>> from codecs import encode
>>> encode(b'fooasodaspf8ds09f8', 'base64')
b'Zm9v\n' 
```

这还可以对 gzip 和 bzip2 等进行编码/解码。

[https://docs.python.org/3.4/library/codecs.html#binary-transforms](https://docs.python.org/3.4/library/codecs.html#binary-transforms)

[http://wingware.com/psupport/python-manual/3.4/whatsnew/3.4.html#improvements-to-codec-handling](http://wingware.com/psupport/python-manual/3.4/whatsnew/3.4.html#improvements-to-codec-handling)

# c++ - 如何链接到 /usr/local/lib 上的 libc++？

> ID：16205714
> 
> 赞同：3
> 
> 时间：2013-04-25T03:08:20.337
> 
> 标签：c++, macos, linker, osx-mountain-lion, libc++

我尝试过提供`-L /usr/local/lib`，尝试过`-nostdinc++`，尝试过设置`DYLD_LIBRARY_PATH`，`DYLD_FALLBACK_LIBRARY_PATH`但`otool`离开给了我：

```
otool -L sample
sample:
    /usr/lib/libc++.1.dylib (compatibility version 1.0.0, current version 1.0.0)
    /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 169.3.0) 
```

如何链接到我`/usr/local/lib/libc++.dylib`在 OS X 上编译的自定义？

编译的变化是基本的`clang++ -std=c++11 -stdlib=libc++`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:04:02.213

正如您所指出的，带有 -L 的 oTool 告诉您 libc++.1.dylib 正在从 /usr/lib 使用。

OSX 开发为您提供了命令 *install_name_tool*，它允许您设置所需路径的位置。

例如，您可以像这样使用它：-

```
install_name_tool -change /usr/lib/libc++.1.dylib /usr/local/lib/libc++.dylib <target file> 
```

其中第一个路径是当前路径，第二个是要更改的路径，第三个是要更改路径的文件。

# android - 如何在 Activity 中创建覆盖 EditText

> ID：16205719
> 
> 赞同：-5
> 
> 时间：2013-04-25T03:08:40.233
> 
> 标签：android, overlay

像这样：

[一条链接](http://i.stack.imgur.com/aMb2n.jpg)

请告诉我 。最好能提供demo。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T05:13:58.020

欢迎来到 Stackoverflow。

它不是对话框。它的**Activity 作为一个对话框**

![在此处输入图像描述](https://i.stack.imgur.com/tzkI8.png)

```
public class diaActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        super.onCreate(savedInstanceState);
        setContentView(R.layout.test_dialog);
    }
} 
```

test_dialog.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#FFFFFF"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="42dp"
        android:orientation="horizontal"
        android:weightSum="3" >

        <Button
            android:id="@+id/button1"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Cancle" />

        <View
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1" />

        <Button
            android:id="@+id/button2"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="OK" />
    </LinearLayout>

    <EditText
        android:id="@+id/editText1"
        android:layout_width="match_parent"
        android:layout_height="100dp"
        android:ems="10"
        android:inputType="textPostalAddress" >

        <requestFocus />
    </EditText>

</LinearLayout> 
```

在 android 清单文件中添加您的活动主题：

```
<activity
            android:name="diaActivity"
            android:theme="@android:style/Theme.Holo.Dialog" >
        </activity> 
```

对于 < 11 Api，您必须使用

```
<activity
            android:name="diaActivity"
            android:theme="@android:style/Theme.Dialog" >
        </activity> 
```

编辑：

**关闭键盘并退出使用此代码：**

```
public void onBackPressed() {

InputMethodManager imm = (InputMethodManager)getSystemService(
      Context.INPUT_METHOD_SERVICE);
imm.hideSoftInputFromWindow(myEditText.getWindowToken(), 0);

finish();

} 
```

# jquery - Jquery 动画测验

> ID：16205722
> 
> 赞同：1
> 
> 时间：2013-04-25T03:09:18.487
> 
> 标签：jquery

大家好，我想问一下jquery代码的动画，我只是学习它，不知道如何解决它，我认为这对这里的人也有帮助，因为它是关于动画的，，

编写代码，点击一个id为“social”的元素，从top 0、left 0、width 50px到top 20、left 20、width 150px，2秒后它回到原来的位置，包括css和jquery代码（你必须使用“this”）？

代码

```
$(document).ready(function() { 
    $('#myImage').top('height','20px'); 
    $('#myImage').left({'height':20}); 
    $('#myImage').width(50); //assign 
    $('#myImage').height() //get }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T03:19:14.757

您可以轻松地`delay()`使用`animate()`. 请参阅下面的我的代码和工作示例：

**jQuery**

```
$(document).ready(function(){
    $("#social").animate({"top":20, "left": 20}).delay(20000).animate({"top":0, "left": 0});
}); 
```

**CSS：**

```
#social{
    width: 50px;
    height: 50px;
    background: black;
    position: relative;
} 
```

# [工作小提琴](http://jsfiddle.net/R8Azz/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T03:20:29.240

尝试

```
$(function() {
    var timer;
    $('#social').click(function() {
        if (timer) {
            clearTimeout(timer);
        }
        $('#myImage').stop().animate({
            top : '20px',
            left : '20px',
            width : '150px'
        }, function() {
            timer = setTimeout($.proxy(function() {
                $(this).stop().animate(
                    {
                        top : '0',
                        left : '0',
                        width : '50px'
                    })
            }, this), 2000);
        })
    })
}) 
```

# c++ - 为什么析构函数构造的两个对象被调用了3次

> ID：16205723
> 
> 赞同：4
> 
> 时间：2013-04-25T03:09:21.267
> 
> 标签：c++, c++11, move-semantics

这是我对一些 C++11 学习示例的实现。我让所有的构造函数和析构函数打印到控制台。但令人惊讶的是，我调用了两次构造函数，但调用了三次析构函数。

一个似乎出乎意料的是在 0x7fff5fbff6d0。这个对象是什么时候创建的？但是为什么没有关联构造函数调用呢？

为什么会这样？

```
template<typename T>
class ArrayWrapper{
public:
    ArrayWrapper():data_(nullptr), size_(0){
        cout << "Default ctor called "<< this <<endl;
    }

    ArrayWrapper(size_t n, const T& val) : data_(new T[n]), size_(n){
        cout << "ctor_n_val called "<< this << endl;
        for_each(data_, data_+size_, [&](T& elem){ elem=val; });
    }

    ArrayWrapper(const ArrayWrapper& other): data_(new T[other.size_]), size_(other.size_)
    {
        cout << "copy ctor called "<< this <<endl;
        copy(other.data_, other.data_+other.size_, data_);
    }

    ArrayWrapper(ArrayWrapper&& other): data_(other.data_), size_(other.size_)
    {
        cout << "move ctor called"<<endl;
        other.data_ = nullptr;
        other.size_ = 0;
    }

    ArrayWrapper<T>& operator=(const ArrayWrapper& other){
        cout << "copy assignment called" <<endl;
        if(this != &other){
            delete data_;
            data_ = new T[other.size_];
            copy(other.begin(), other.end(), begin());
            size_ = other.size_;
        }
        return *this;
    }

    ArrayWrapper<T> operator=(ArrayWrapper&& other){
        cout << "move assignment called " <<this << " <- " <<&other <<endl;
        swap(size_, other.size_);
        swap(data_, other.data_);
    }

    ~ArrayWrapper(){
        cout <<"Destroying " << this << " Size " << size_ <<endl;
    }
    typedef T* iterator;
    typedef const T* const_iterator;

    T* begin() {
        return data_;
    }

    T* end(){
        return data_ + size_;
    }

    const T* begin() const {
        return data_;
    }

    const T* end() const {
        return data_ + size_;
    }

    const T* cbegin() const {
        return data_;
    }

    const T* cend() const {
        return data_ + size_;
    }

    size_t size(){
        return size_;
    }
public:
    T* data_;
    size_t size_;
};

template<typename T>
ArrayWrapper<T> make_array(size_t n, const T& val){
    cout <<"Factory method called"<<endl;
    return ArrayWrapper<T>(n, val);
}

template<typename T>
std::ostream& operator<<(std::ostream& os, const ArrayWrapper<T>& arr){
    for(const T& elem: arr){ os << elem << ", ";}
    return os;
}

int main(){
    size_t n = 10;
    ArrayWrapper<int> a4(n, 1);
    a4 = make_array(n, 4); // move assignment:
    cout << "A4: " << a4 << endl;
} 
```

输出：

```
$ g++-mp-4.8 -std=c++11 move.cpp 

$ ./a.out 

ctor_n_val called 0x7fff5fbff6b0

Factory method called

ctor_n_val called 0x7fff5fbff6e0

move assignment called 0x7fff5fbff6b0 <- 0x7fff5fbff6e0

Destroying 0x7fff5fbff6d0 Size 0

Destroying 0x7fff5fbff6e0 Size 10

A4: 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 

Destroying 0x7fff5fbff6b0 Size 10 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-25T03:19:52.287

您的移动赋值运算符应该返回一个引用：

```
ArrayWrapper<T>& operator=(ArrayWrapper&& other)
//             ^ 
```

由于您将其按值返回，但没有`return`声明，因此您正在调用未定义的行为。您应该像复制赋值运算符一样实现它，当然除了移动资源而不是复制它们：

```
ArrayWrapper<T>& operator=(ArrayWrapper&& other){
    if(this != &other){
        delete[] data_;
        size_ = other.size_;
        data_ = other.data_;
        other.size_ = 0;
        other.data_ = nullptr;
    }
    return *this;
} 
```

另外，请注意`delete[]`删除动态分配的数组的使用。

# matlab - Matlab 对象在 .mat 文件中占用很大空间

> ID：16205727
> 
> 赞同：5
> 
> 时间：2013-04-25T03:09:59.297
> 
> 标签：matlab

我有一个我在 Matlab 中编写的类的对象。当我使用“whos”命令来确定它的大小时，它大约是 720,000 字节。当我将它保存在 .mat 文件中时，大约需要 75MB。到底是怎么回事？

有没有一种在 Matlab 中保存和加载对象的有效方法？

编辑：这是属性及其大小的列表

```
            CT_COL：2
            人：5
            d: 10
            n: 37
            数量：20
          idx：[20x1 双]
           上午：[4-D双]
            X：[4-D双]
            y：[37x1 双]
        公斤：[20x20 双倍]
       回波：[]
          转速：2
         grps：[1x37 双]
        exIDX：[1 4 5 6 13]
          nCV：100
        prIDX：[100x6 双倍]
        trIDX：[100x26 双倍]
            U：[5x100 双]
            五：[10x100双]
            B：[20x100 双倍]
         Yhat：[37x100 双倍]
          林：[100x1 双]
    峰值比率：[37x1 双倍]

```

Am 和 X 都是 20x10x5x37 数组（双）

顺便说一句，属性“reWave”用于保存另一个对象的方法的句柄。我认为这可能不是一个好主意（并且可能导致这种情况），所以我从类定义中删除了任何提及它的内容。但它似乎以某种方式出现在属性集中。（即使在我发布了“明确的课程”之后。）

EDIT2：我正在使用命令 `save('uvXbMod1.mat','ob')` 来保存对象。令人费解的是：当我使用命令 `whos -file uvXbMod1.mat` 查看文件中保存的内容时，它显示

```
名称大小字节类属性

ob 1x1 680512 uvXbModel   

```

（这是另一个例子，不是上面提到的那个。） .mat 文件中还有什么使它变得那么大？

EDIT3：好的......问题似乎是我存储在两个受保护属性中的两个内联函数句柄。就这两个， `@(X) median(abs(X),2)`和 `@median` 。句柄本身只有几个字节的大小，我假设由于它们是内联函数，它们应该与它们的单行定义一起存储为文本 (?)。但显然这不会发生，它会导致大量其他东西被存储（事后这似乎并不奇怪......）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T18:13:55.013

这是我在代码中发现的问题：问题是我存储在两个受保护属性中的两个~~内联匿名函数句柄。~~就这两个，`@(X) median(abs(X),2)`和`@median`。

句柄本身只有几个字节大小，我假设由于它们是 ~~内联~~匿名函数，它们应该与它们的单行定义一起存储为文本。但显然这不会发生，它会导致大量其他东西被存储起来。

# android - Android Webview 没有实现 CSS

> ID：16205733
> 
> 赞同：4
> 
> 时间：2013-04-25T03:10:22.833
> 
> 标签：android, css, html, jquery-mobile, webview

我正在使用 webview 创建一个 Android 应用程序。我计划将所有 PHP、HTML5、CSS 和 Javascript 文件放在服务器上。我正在使用 JQuery Mobile 框架。

这是打开 web 视图的代码：

* * *

```
WebView myWebView = (WebView) findViewById(R.id.webview);
WebSettings webSettings = myWebView.getSettings();
webSettings.setJavaScriptEnabled(true);
myWebView.setWebViewClient(new WebViewClient());
myWebView.loadUrl("http://thefinddroid.com/TriviaGame"); 
```

* * *

这是CSS文件：

```
img.option {
    paddding:5px;
    border:3px solid #FFFFFF;
    -webkit-border-radius:5px;
    -moz-border-radius:5px;
    border-radius:5px;
}
#text_question {
    font-size:25px;
    text-align: center;
}
img.question {
    padding:5px;
    border:4px solid #FFFFFF;
    -webkit-border-radius:5px;
    -moz-border-radius:5px;
    border-radius:5px;
}
#offer {
    display:block;
    width:480px;
    margin:10px;
    height:20px;
    padding:5px;
    -webkit-border-radius:10px;
    color:#000000;
    -moz-border-radius:10px;
    border-radius:10px;
    border:3px solid #DBDBDB;
} 
```

* * *

这是加载 CSS 的 HTML 文件的一部分：

```
<link rel="stylesheet" 
      href="http://code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.css" />
<link rel="stylesheet" href="styles/styles.css" />
<script src="js/jqm_171.js"></script>
<script src="js/jqm120_alpha.js"></script> 
```

* * *

这是 body 标签内的 HTML5 代码：

```
 <body>
    <div align="center" data-role="page" data-theme="b">
        <div data-role="header">
            <h1>Trivia Game</h1>
        </div>
        <div data-role="content">
            <div data-role="fieldcontain">
                <h1>Question #1</h1>

                <img class="question" 
                                         src="images/q1.jpg" 
                                         align="center" />
                <div id="text_question">
                    <p>Which guitar is used in this picture?</p>
                </div>

                <table cellspacing="10">
                    <tr>
                        <td>
                            <img class="option"
                             id="option_1" 
                             src="images/c1.jpg" 
                             onclick="selected_option(1)" />
                        </td>
                        <td>
                            <img class="option"   
                             id="option_2" 
                             src="images/c2.jpg" 
                             onclick="selected_option(2)" />
                        </td>
                    </tr>
                        <td>
                            <img class="option" 
                             id="option_3" 
                             src="images/c3.jpg" 
                             onclick="selected_option(3)" />
                        </td>
                        <td>
                            <img class="option" 
                             id="option_4" 
                             src="images/c4.jpg" 
                             onclick="selected_option(4)" />
                        </td>
                    </tr>
                </table>

                <br /> <br />
                <div id="offer">To learn more on Stylist :
                 Article, Links and Benfits - <a href="#">Click here</a></div>
            </div>
        </div>
    </div>   
</body> 
```

* * *

这是场景：

1.  当我在 PC 浏览器中打开网页时，一切正常。我所有的 CSS 样式都运行良好。
2.  当我第一次在我的 Android 浏览器中打开网页时（没有重新加载），CSS 样式不显示。但是当我刷新它时，它会显示 CSS 样式。
3.  当我打开我创建的应用程序时，CSS 不起作用。所有的 CSS 样式都没有显示在我的应用程序中。

* * *

应用程序的屏幕截图（不实现 CSS）：![这是应用程序的屏幕截图，它没有显示 CSS](https://i.stack.imgur.com/OA322.png)

* * *

Android 浏览器的屏幕截图（实现 CSS）![这是浏览器的截图，它显示了 CSS](https://i.stack.imgur.com/42ozX.png)

* * *

## 回答 #1

> 赞同：-6
> 
> 时间：2013-04-25T05:36:40.133

Android 不支持**表格**标签。在您的 html 中包含 table 标签，这就是您没有获得正确视图的原因。

**Android 仅支持以下 html 标签。**

```
<a href="...">
<b>
<big>
<blockquote>
<br>
<cite>
<dfn>
<div align="...">
<em>
<font size="..." color="..." face="...">
<h1>
<h2>
<h3>
<h4>
<h5>
<h6>
<i>
<img src="...">
<p>
<small>
<strike>
<strong>
<sub>
<sup>
<tt>
<u> 
```

# javascript - 在 Google 地图上绘制文字

> ID：16205734
> 
> 赞同：2
> 
> 时间：2013-04-25T03:10:51.040
> 
> 标签：javascript, jquery, html, google-maps, drawing

我知道您可以在 Google 地图上绘制基本形状，但有人尝试在地图上绘制文字吗？我已经看到这可能在过去可用...

我想使用 JavaScript 在谷歌地图上以各种纬度/经度坐标绘制文本。最终，我希望有一个网页，我可以在其中在文本框中输入一些文本，然后单击一个按钮并让 javascript 在地图上显示一些自定义文本。这将不使用谷歌地图提供的气球。

任何帮助深表感谢。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T03:47:35.713

您想要的是自定义叠加层。

您可以在此处阅读有关它们的更多信息：[https ://developers.google.com/maps/documentation/javascript/overlays#CustomOverlays](https://developers.google.com/maps/documentation/javascript/overlays#CustomOverlays)

您可以在此处的操场上进行编辑：[https ://code.google.com/apis/ajax/playground/#map_simple_v3](https://code.google.com/apis/ajax/playground/#map_simple_v3)

我迅速更改了他们的自定义叠加示例以执行您的要求。在操场上插入以下代码：

```
 var overlay;
USGSOverlay.prototype = new google.maps.OverlayView();
function initialize() {
  var myLatLng = new google.maps.LatLng(62.323907, -150.109291);
  var mapOptions = {
    zoom: 11,
    center: myLatLng,
    mapTypeId: google.maps.MapTypeId.SATELLITE
  };

  var map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);

  var swBound = new google.maps.LatLng(62.281819, -150.287132);
  var neBound = new google.maps.LatLng(62.300471, -150.005608);
  var bounds = new google.maps.LatLngBounds(swBound, neBound);

  // Photograph courtesy of the U.S. Geological Survey
  overlay = new USGSOverlay(bounds, map);
}

/** @constructor */
function USGSOverlay(bounds, map) {

  // Now initialize all properties.
  this.bounds_ = bounds;
  this.map_ = map;

  // We define a property to hold the image's div. We'll
  // actually create this div upon receipt of the onAdd()
  // method so we'll leave it null for now.
  this.div_ = null;

  // Explicitly call setMap on this overlay
  this.setMap(map);
}

USGSOverlay.prototype.onAdd = function() {

  // Note: an overlay's receipt of onAdd() indicates that
  // the map's panes are now available for attaching
  // the overlay to the map via the DOM.

  // Create the DIV and set some basic attributes.
  var div = document.createElement('div');
  div.style.borderStyle = 'solid';
  div.style.borderWidth = '1px';
  div.style.borderColor = '#FFF';
  div.style.color = '#FFF';
  div.style.position = 'absolute';

  // Create an IMG element and attach it to the DIV.
  div.innerHTML= "HELLO WORLD";

  // Set the overlay's div_ property to this DIV
  this.div_ = div;

  // We add an overlay to a map via one of the map's panes.
  // We'll add this overlay to the overlayLayer pane.
  var panes = this.getPanes();
  panes.overlayLayer.appendChild(div);
}

USGSOverlay.prototype.draw = function() {

  // Size and position the overlay. We use a southwest and northeast
  // position of the overlay to peg it to the correct position and size.
  // We need to retrieve the projection from this overlay to do this.
  var overlayProjection = this.getProjection();

  // Retrieve the southwest and northeast coordinates of this overlay
  // in latlngs and convert them to pixels coordinates.
  // We'll use these coordinates to resize the DIV.
  var sw = overlayProjection.fromLatLngToDivPixel(this.bounds_.getSouthWest());
  var ne = overlayProjection.fromLatLngToDivPixel(this.bounds_.getNorthEast());

  // Resize the image's DIV to fit the indicated dimensions.
  var div = this.div_;
  div.style.left = sw.x + 'px';
  div.style.top = ne.y + 'px';
  div.style.width = (ne.x - sw.x) + 'px';
  div.style.height = (sw.y - ne.y) + 'px';
}

USGSOverlay.prototype.onRemove = function() {
  this.div_.parentNode.removeChild(this.div_);
  this.div_ = null;
}

    google.maps.event.addDomListener(window, 'load', initialize); 
```

​</p>

# jquery - 在文本区域焦点之前具有默认文本的 jQuery 字段

> ID：16205737
> 
> 赞同：0
> 
> 时间：2013-04-25T03:11:14.777
> 
> 标签：jquery, html

如何让 jquery 有一个“textarea”包含默认消息，如“输入”框。我对 jQuery 很陌生，似乎无法弄清楚这一点。我很抱歉需要问这个问题。

我做了很多研究，希望将非常简单的 jQuery 功能整合到一个站点中。我真的试图将额外的 js 占用空间限制为最少的脚本。不是大型插件脚本。在我的研究中，我发现这样做有很多帮助。

我有几个自定义搜索查询，我尽可能地接近预期。通过这些小搜索框，我使用一个小脚本将“输入”的内容替换为自定义消息，例如“搜索...”，直到有人（焦点）在框中键入。这个小脚本效果很好。但我也希望相同的脚本在评论区做同样的事情。

```
$('#outputList, #outputList2').removeClass('no-display');
$(document).on("blur", "#inputBox, #inputBox2, #commentArea", function(){
    var default_value = $(this).attr("rel");
    if ($(this).val() === ""){
        $(this).val(default_value);
    }
}).on("focus", "#inputBox, #inputBox2, #commentArea", function(){
    var default_value = $(this).attr("rel");
    if ($(this).val() === default_value){
        $(this).val("");
    }
}); 
```

基本的html如下。对于评论框...

```
<textarea name="comment" id="commentArea" class="input-block-level" rows="6" rel="Leave a Comment…"></textarea><!--text between the text areas tags does not get removed --> 
```

对于搜索框.​​..

```
<input type="text" id="inputBox" value="Search for..." rel="Search for..." />
<ul id="outputList" class="align-left no-display">
    <!-- list to be filtered -->
</ul>

<input type="text" id="inputBox2" value="Search for..." rel="Search for..." />
<ul id="outputList2" class="align-left no-display">
   <!-- list to be filtered -->
</ul> 
```

正如我在[jsFiddle](http://jsfiddle.net/Pelligea/ehwRU/)上看到的那样。加载时，搜索框的默认值为值字段。并且失去焦点转到 rel 领域。

textarea 在失去焦点时获取 rel 字段，但不能与值字段一起使用。

我通过 HTML 知道占位符，但我希望它具有与搜索框相同的格式并以相同的方式操作。这可能吗？

我已经搜索并找到了很多答案，但似乎没有一个让评论框让默认字段在加载时工作。提前感谢大家的帮助和时间。

如果有帮助，我正在执行以下操作。Wordpress 3.5.1、jQuery 1.9.1、jQuery UI 1.9、php 5.4 和 MySql Ver 14.14 Distrib 5.5.30。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T03:14:34.433

对我来说似乎工作正常；您可能打错了省略号或有不必要的空格。您可能需要修剪`default_value`以进行比较。

而不是`rel`您可能想要使用`placeholder`，它可以在现代浏览器中没有 JS 的情况下工作。

[http://jsfiddle.net/ehwRU/1/](http://jsfiddle.net/ehwRU/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T03:26:35.470

更新并简化了您的小提琴：http: [//jsfiddle.net/ehwRU/3/](http://jsfiddle.net/ehwRU/3/)

```
$("#inputBox, #inputBox2, #commentArea").each(function () {    

    var default_value = $(this).attr("rel");

    $(this).val(default_value)

        .blur(function () { 
            if (!$(this).val().length) $(this).val(default_value); 
         })

        .focus(function () { 
            if ($(this).val() === default_value) $(this).val(""); 
         });
}); 
```

现在似乎按预期工作？

# ios - 如何将部分添加到 UITableView？

> ID：16205740
> 
> 赞同：1
> 
> 时间：2013-04-25T03:11:40.280
> 
> 标签：ios, objective-c, uitableview, cocoa-touch, uikit

有人可以用基本术语解释添加部分的流程是如何工作的吗？

我有一组对象，我目前正在将它们填充到单个 sectioned`UITableView`中，但是我想根据这些对象的共享“类别”属性将它们分成多个部分。我从 API 获取对象列表，所以我事先不知道每个类别有多少。

非常非常感谢提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T03:33:10.620

您必须使用 UITableViewDataSource 协议。您必须实现其中一种可选方法：

```
//Optional
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Default is 1 if not implemented

    NSUInteger sectionCount = 5; //Or whatever your sections are counted as...
    return sectionCount;
} 
```

确保每个部分都计算您的行数：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 4;  //This will return 4 rows in each section
} 
```

如果要为每个部分命名页眉和页脚：

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    return @"";
}// fixed font style. use custom view (UILabel) if you want something different

- (NSString *)tableView:(UITableView *)tableView titleForFooterInSection:(NSInteger)section
{
    return @"";
} 
```

最后，确保正确实现单元格：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Row display. Implementers should *always* try to reuse cells by setting each cell's reuseIdentifier and querying for available reusable cells with dequeueReusableCellWithIdentifier:
    // Cell gets various attributes set automatically based on table (separators) and data source (accessory views, editing controls)

    NSUInteger section = [indexPath indexAtPosition:0];
    NSUInteger rowInSection = [indexPath indexAtPosition:1];

    //Do your logic goodness here grabbing the data and creating a reusable cell

    return nil;  //We would make a cell and return it here, which corresponds to that section and row.
} 
```

可折叠部分是另一回事。您需要子类化 UITableView，或者只是在 CocoaControls 上找到一个。

# ruby - 具有延迟作业 gem 的定期任务

> ID：16205746
> 
> 赞同：3
> 
> 时间：2013-04-25T03:13:02.047
> 
> 标签：ruby, delayed-job

```
class A < ActiveRecord::Base
  def self.a
    A.first.touch
    delay(run_at: Proc.new{ 10.seconds.from_now }).a
    log.info 'Added job to run at ' + 10.seconds.from_now.to_s
  end

  def self.log
    @log ||= Logger.new 'dj.log'
  end
end 
```

为什么我在工作日志中看到这个：

```
Added job to run at 2013-04-26 01:04:53 UTC
Added job to run at 2013-04-26 01:04:53 UTC
Added job to run at 2013-04-26 01:04:54 UTC
Added job to run at 2013-04-26 01:04:54 UTC
Added job to run at 2013-04-26 01:04:55 UTC 
```

注意：不分开 10 秒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T16:06:30.717

如果您想要运行重复性任务，例如，每天。您可以使用[rufus-scheduler](https://github.com/jmettraux/rufus-scheduler)：

```
rufus-scheduler is a Ruby gem for scheduling pieces of code (jobs) 
```

还有一些[resque](https://github.com/bvandenbos/resque-scheduler)和[sidekiq](https://github.com/yabawock/sidekiq-scheduler)的扩展。

希望能帮助到你！

# php - JSON 字符编码与 utf8

> ID：16205749
> 
> 赞同：0
> 
> 时间：2013-04-25T03:13:39.763
> 
> 标签：php, javascript, jquery, json, utf-8

我有一个 JSON 字符编码的问题。当我调用 ajax 并返回编码 utf8 字符串时，`json_encode()`我的关键世界是“áo”，但编码后它返回“\u00c1o”，但在 javascript、jquery 中我想将该字符串与“áo”进行比较怎么做（我不想比较 \u00c1o 和 \u00c1o）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T03:15:57.643

Unicode 转义序列与 UTF-8 字符没有什么不同（前提是您的文档和 JS 使用 UTF-8 编码）。

```
>>> '\u00c1o' === 'Áo'
<<< true 
```

注意：具有不同大小写的字符串被认为是不同的。您可能需要调用`toLowerCase()`或`toUpperCase()`在两个字符串上进行不区分大小写的比较：

```
>>> '\u00c1o'.toLowerCase() === 'áo'.toLowerCase()
<<< true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T03:17:32.603

数据由JS插值显示，编码存储。因此，`'\u00c1o' == 'Áo'`. 请注意，它不等于`'áo'`，但这确实有效：

```
"áo" == "\u00c1o".toLowerCase() 
```

# grails - 有没有办法在js弹出窗口中打开jsp文件

> ID：16205752
> 
> 赞同：0
> 
> 时间：2013-04-25T03:14:02.073
> 
> 标签：grails

有没有办法在 grails 项目中调用 .jsp 文件以在 JS window.open("filename") 弹出窗口中打开。我只尝试了在我的视图文件夹中的文件的名称，但没有奏效。是否有我应该使用的特定路径，或者是否有一个文件夹可以存储我可以加载到弹出窗口中的常规 html 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:07:44.097

您当然想知道 Grails 是否可以处理 JSP 文件？答案是否定的，但您应该能够在 .gsp 文件中使用 JSP 标记。

[http://jira.grails.org/browse/GRAILS-3906](http://jira.grails.org/browse/GRAILS-3906)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:21:52.967

GSP 文件需要由 Grails 进行“渲染”，然后才能在浏览器中显示。我将调用一个 Grails 控制器操作，该操作呈现您希望使用 Ajax 调用显示的 GSP 模板，并将结果显示为弹出窗口的内容。

# haskell - 在 Persistent Yesod 中进行多对多的最佳方式是什么？

> ID：16205755
> 
> 赞同：8
> 
> 时间：2013-04-25T03:14:14.747
> 
> 标签：haskell, persistent, yesod

所以我的 /config/models 看起来像这样。

```
Person
  name Text
Car
  name Text
PersonCar
  personId PersionId eq
  carId CarId eq
  UniquePersonCar personId carId 
```

假设数据库中的输入`Person "Batman"` `Person "Superman"` `Car "SUV"` `Car "Ford"`分别是。

我目前正在这样做以将它们链接到我的处理程序中。

```
runDB $ do
  person <- selectFirst [PersonName ==. "Batman"] []
  car    <- selectFirst [Carname ==. "SUV"] []
  let Entity personId _ = case person of
                            Just info -> infor
                            Nothing -> error "no such Person"
  let Entity carId _ = case car of
                            Just info -> infor
                            Nothing -> error "no such Car"
  _ <- insert $ PersonCar personId carId 
```

有没有更简单的方法来做到这一点？是否有进行这种表达的约定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:45:33.517

调用错误将停止您的应用程序。[logError](http://hackage.haskell.org/packages/archive/yesod-core/latest/doc/html/Yesod-Core.html#v%3alogError)可能会更好。

这更短：

```
import Data.Conduit
import qualified Data.Conduit.List as DCL

runDB $ do
    mbPersonId <- runResourceT $ selectKeys [PersonName ==. "Batman"] [] $$ DCL.head
    mbCarId    <- runResourceT $ selectKeys [CarName ==. "SUV"] [] $$ DCL.head

    case (mbPersonId, mbCarId) of
        (Just personId, Just carId) -> do
              _ <- insert $ PersonCar personId carId
              return ()

        _ -> $(logError) "error looking for Batman and SUV" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T09:44:55.103

不，目前这种查询没有简写（至少我能想到）。

# nservicebus - appharbor 的最佳 ESB/消息队列

> ID：16205756
> 
> 赞同：2
> 
> 时间：2013-04-25T03:14:22.230
> 
> 标签：nservicebus, esb, appharbor, rhino-servicebus

我目前正在尝试为 appharbor 应用程序找到最佳的消息队列解决方案。大多数人都假设你有一个安装了 MSMQ 和 DTC 的 windows 环境，我不相信 appharbor 环境提供了。

我想要一些与 ravendb 配合得很好的东西，因为那是我们正在使用的数据库。只依赖 raven 的东西是理想的，特别是如果它与我们现有的工作单元集成在一起。即，当在我们的控制器操作中调用保存更改时，消息将保存在同一个事务中。

它还需要一个在控制台应用程序中工作的主机以进行后台处理。

理想情况下，我也想要在开发环境中“正常工作”的东西。以 raven 为例，我们在开发时使用嵌入式模式，我想要一些不需要安装的东西。

我查看了 nServicebus，它似乎无法满足这些条件，因为它需要传输（msmq、sql 等）并且大部分文档已过时。

我还查看了 rhino 服务总线，但明显缺乏文档和社区。我也不确定它是否可以完全依赖 ravendb。

我看过的其他似乎都非常重量级，需要安装和配置才能在开发环境中运行。

编辑：另一个选项是实现我们自己的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:47:50.570

首先，恭喜你成为 StackOverflow 上的第 1000 个 NServiceBus 问题！

其次，如果您要使用 SQL 来持久化您的业务数据，那么您可以在同一 SQL 之上运行 NServiceBus，其中所有消息都通过表（而不是队列），然后您就不需要 DTC。

第三，如果您确实想使用 RavenDB 作为 NServiceBus 的传输方式，则必须在其之上实现 ISendMessages 和 IReceiveMessages 接口，但我相信社区中的某个人已经开始着手研究了，所以您可能可以与他们联手。

最后，我不建议这些天编写自己的 ESB - 不是在已经有这么多好的选择的时候。您提到了社区和文档问题——在编写您自己的基础架构时，这些问题往往被处理得最差。

# xcode - NSTimer 出错

> ID：16205760
> 
> 赞同：0
> 
> 时间：2013-04-25T03:14:57.460
> 
> 标签：xcode, nstimer

我在下面的行中得到一个预期的表达式错误：

```
 for (int i = [timeArray count] - 1; i >= 0; i-) { 
```

特别是 i-) 它把事情搞砸了，我不知道该怎么做。我正在尝试构建一个秒表应用程序。这是整个声明：

//

```
- (void)showTime {
int hours = 0;
int minutes = 0;
int seconds = 0;
int hundredths = 0;
NSArray *timeArray = [NSArray arrayWithObjects:self.hun.text, self.sec.text, self.min.text, self.hr.text, nil];

for (int i = [timeArray count] - 1; i >= 0; i-) {
    int timeComponent = [[timeArray objectAtIndex:i] intValue];
    switch (i) {
        case 3:
            hours = timeComponent;
            break;
        case 2:
            minutes = timeComponent;
            break;
        case 1:
            seconds = timeComponent;
            break;
        case 0:
            hundredths = timeComponent;
            hundredths++;
            break;

        default:
            break;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T03:27:16.187

`i-)`不是合法的语法。编译器需要在`-`.

您可能打算写`i--`或`--i`。这两个语句都从 中减去 1 `i`。它们之间存在差异，但它们在逻辑上对于您的循环都是正确的。

# linux - vsftp 虚拟用户设置配置

> ID：16205764
> 
> 赞同：3
> 
> 时间：2013-04-25T03:15:20.220
> 
> 标签：linux, ftp, installation, centos5

我无法让 vsftp 虚拟用户工作……我正在尝试为仅限于 apache 文档根文件夹的 Web 开发人员设置一个虚拟用户。

CentOS 5.9（最终版）、vsftpd 2.0.5、pam 0.99.6.2

将 pam 服务文件 (/etc/pam.d/vsftp_vusers) 设置为：

```
auth required pam_pwdfile.so pwdfile /etc/vsftpd/passwd
account required pam_permit.so 
```

通过以下方式设置 htpasswd：

```
$htpasswd /etc/vsftpd/passwd user_a
$chmod 600 /etc/vsftpd/passwd 
```

也试过：

```
$htpasswd -m /etc/vsftpd/passwd user_a 
```

将 user_list 文件 (/etc/vsftpd/user_list) 构建为：

```
user_a 
```

建立帐户文件和权限文件（/etc/vsftpd/user/user_a）为：

```
local_root=/var/www/ 
```

将 vsftpd (/etc/vsftpd.conf) 配置为：

```
pasv_min_port=65500
pasv_max_port=65535
listen_port=21
anonymous_enable=NO
local_enable=YES
write_enable=YES
local_umask=022
userlist_deny=NO
userlist_file=/etc/vsftpd/user_list
chroot_list_enable=YES
chroot_list_file=/etc/vsftpd/user_list
xferlog_enable=YES
dual_log_enable=YES
connect_from_port_20=YES
xferlog_std_format=YES
listen=YES
tcp_wrappers=YES

## VUSER ##
pam_service_name=vsftpd_vusers
user_config_dir=/etc/vsftpd/user
virtual_use_local_privs=YES
guest_enable=YES
secure_chroot_dir=/var/run/vsftpd
hide_ids=YES 
```

当我尝试在本地登录时，给出了 530 login wrong 。我尝试了无数次以确保我得到了正确的用户名和密码……</p>

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-12-10T21:35:36.507

这解决了 530 错误：

```
pam_service_name=ftp 
```

# java - 从类“解析”opennlp中获取文本

> ID：16205772
> 
> 赞同：1
> 
> 时间：2013-04-25T03:16:00.367
> 
> 标签：java, nlp, opennlp

我有一个解析树，它是`Parse`opennlp中类的一个对象。我想打印解析树中的文本。例如考虑以下句子：`Wikipedia is a collaboratively edited, multilingual, free Internet encyclopedia supported by the non-profit Wikimedia Foundation.`. 我已经确定了句子中的名词短语：

```
 (NP (NNP Wikipedia))
 (NP (NP (DT a) (RB collaboratively) (JJ edited,) (JJ multilingual,) (JJ free) (NNP    Internet) (NN encyclopedia)) (VP (VBN supported) (PP (IN by) (NP (DT the) (JJ non-profit) (NNP Wikimedia) (NNP Foundation.)))))
 (NP (DT a) (RB collaboratively) (JJ edited,) (JJ multilingual,) (JJ free) (NNP Internet)  (NN encyclopedia))
 (NP (DT the) (JJ non-profit) (NNP Wikimedia) (NNP Foundation.)) 
```

我想输出列表`["Wikipedia", "collaboratively edited...", "non profit wikimedia foundation"]`。中的`getText`方法`Parse`返回整个句子，而不仅仅是与解析树关联的字符串。有没有办法直接在 OpenNLP 中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T19:23:41.657

我找到了解决方案，功能是：`Parse.getCoveredText()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T03:34:18.640

您是否尝试过使用该方法[`Parse.getChildren()`](http://opennlp.apache.org/documentation/apidocs/opennlp-tools/opennlp/tools/parser/Parse.html#getChildren%28%29)？`Parse`这将返回一个包含所有孩子的数组。您可以从那里`getLabel()`找到`Parse`要打印的对象。

# android - 将表面视图相机图像发送回父活动

> ID：16205775
> 
> 赞同：1
> 
> 时间：2013-04-25T03:16:09.177
> 
> 标签：android, android-camera

我有一个用来用相机拍照的surfaceview类，我想知道如何将这个拍摄的图像发回调用它的类。我尝试通过不确定我是否正确实施的意图将图像发回。我的主类 onActivityResult 如下：

```
//WHAT TO DO WITH RESULT DATA FROM CAMERA
protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
    if (resultCode == CAMERA_PIC_REQUEST && picCount < 5) {  
        //curPic = (Bitmap) data.getExtras().get("data");  
        curPic = (Bitmap) data.getExtras().get("files");
        ImageView images = new ImageView(getApplicationContext());

        //SET PICTURE TO NEW VIEW AND ANIMATE INTO POSITION
        images.setImageBitmap(curPic);

        //ADD TO PREVPICS LAYOUT
        images.setPadding(3, 0, 0, 0);
        showCase.addView(images);
        badge.setImageBitmap(curPic);

        //ADDS CLICK LISTENER TO EACH ELEMENT AND SETS ID
        try{    
            Log.i("AFTER TAKING PIC", "PICCOUNT IS NOW:"+picCount);
            showCase.getChildAt(picCount).setId(picCount);
            images.setId(picCount);
            showCase.getChildAt(picCount).setOnClickListener(btnListener);              
            images.setTag("pics");

            //SAVE PITCTURE
            savePic(curPic);

            previewImages(picCount);
        }catch(Exception e){Log.e("ERROR TAKING PIC", e.toString());}

        }else
            Toast.makeText(getApplicationContext(), "Unable to add more pictures", Toast.LENGTH_SHORT).show();

} 
```

而surfaceview类如下：

```
public class SecondCamera extends Activity implements SurfaceHolder.Callback {

Camera camera;
SurfaceView surfaceView;
SurfaceHolder surfaceHolder;
boolean previewing = false;
LayoutInflater controlInflater = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.second_cam);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

    getWindow().setFormat(PixelFormat.UNKNOWN);
    surfaceView = (SurfaceView) findViewById(R.id.surfaceView1);
    surfaceHolder = surfaceView.getHolder();
    surfaceHolder.addCallback(this);
    surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

    controlInflater = LayoutInflater.from(getBaseContext());
    /*
     * View viewControl = controlInflater.inflate(R.layout.control, null);
     * LayoutParams layoutParamsControl = new
     * LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
     * this.addContentView(viewControl, layoutParamsControl);
     */

    Button buttonTakePicture = (Button) findViewById(R.id.button1);
    buttonTakePicture.setOnClickListener(new Button.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            camera.takePicture(myShutterCallback, myPictureCallback_RAW,
                    myPictureCallback_JPG);
        }
    });
}

ShutterCallback myShutterCallback = new ShutterCallback() {

    @Override
    public void onShutter() {

    }
};

PictureCallback myPictureCallback_RAW = new PictureCallback() {

    @Override
    public void onPictureTaken(byte[] arg0, Camera arg1) {

    }
};

PictureCallback myPictureCallback_JPG = new PictureCallback() {

    @Override
    public void onPictureTaken(byte[] rawImg, Camera arg1) {
        Bitmap bitmapPicture = BitmapFactory.decodeByteArray(rawImg, 0, rawImg.length);

        try {

            Intent cameraIntent = new Intent();
            cameraIntent.putExtra("files", bitmapPicture);
            setResult(123, cameraIntent);
            finish();
        } catch (Exception e) {
            Log.e("IMAGE CONVERT", e.toString());
        }
    }
};

@Override
public void surfaceChanged(SurfaceHolder holder, int format, int width,
        int height) {
    if (previewing) {
        camera.stopPreview();
        previewing = false;
    }

    if (camera != null) {
        try {
            camera.setPreviewDisplay(surfaceHolder);
            camera.startPreview();
            previewing = true;
        } catch (IOException e) {

            e.printStackTrace();
        }
    }
}

@Override
public void surfaceCreated(SurfaceHolder holder) {

    camera = Camera.open();
}

@Override
public void surfaceDestroyed(SurfaceHolder holder) {

    camera.stopPreview();
    camera.release();
    camera = null;
    previewing = false;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T03:29:51.437

AFAIK，你不能直接通过`Bitmap`a `Intent`。我想你想把它保存在某个地方，比如本地存储。[您可以使用File](http://developer.android.com/reference/java/io/File.html)方法保存它。您可以将该文件路径作为 a`String`传递，`Intent`并使用它在以前的`Activity`.

另一种选择可能是将其存储在 an 中`ArrayList`并将其作为`Serializable`

# maven - 什么是 Maven 目标和阶段，它们有什么区别？

> ID：16205778
> 
> 赞同：364
> 
> 时间：2013-04-25T03:16:23.603
> 
> 标签：maven

Maven目标和阶段之间有什么区别/关系？它们是如何相互关联的？

* * *

## 回答 #1

> 赞同：280
> 
> 时间：2013-04-25T03:20:47.443

Goals are executed in phases which help determine the order goals get executed in. The best understanding of this is to look at the [default Maven lifecycle bindings](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Built-in_Lifecycle_Bindings) which shows which goals get run in which phases by default. The `compile` phase goals will always be executed before the `test` phase goals, which will always be executed before the `package` phase goals and so on.

Part of the confusion is exacerbated by the fact that when you execute Maven you can specify a goal or a phase. If you specify a phase then Maven will run all phases up to the phase you specified in order (e.g. if you specify package it will first run through the compile phase and then the test phase and finally the package phase) and for each phase it will run all goals attached to that phase.

When you create a plugin execution in your Maven build file and you only specify the goal then it will bind that goal to a given default phase. For example, the `jaxb:xjc` goal binds by default to the `generate-resources` phase. However, when you specify the execution you can also explicitly specify the phase for that goal as well.

If you specify a goal when you execute Maven then it will run that goal and only that goal. In other words, if you specify the `jar:jar` goal it will only run the `jar:jar` goal to package your code into a jar. If you have not previously run the compile goal or prepared your compiled code in some other way this may very likely fail.

* * *

## 回答 #2

> 赞同：225
> 
> 时间：2015-09-24T10:46:43.773

> 生命周期是一系列命名**阶段**。
> 阶段按顺序执行。执行一个阶段意味着执行所有先前的阶段。
> 
> 插件是一个**目标**集合，也称为 MOJO（**M** aven **O** ld **J** ava **O** bject）。
> 类比：插件是一个类，目标是类中的方法。

Maven 基于**构建生命周期**的核心概念。在每个*构建生命周期*中都有**构建阶段**，在每个*构建阶段*中都有**构建目标**。

我们可以执行构建阶段或构建目标。在执行构建阶段时，我们会在该构建阶段执行所有构建目标。构建目标被分配给一个或多个构建阶段。我们也可以直接执行构建目标。

有三个主要的内置**构建生命周期**：

1.  默认
2.  干净的
3.  地点

[**每个构建生命周期都由阶段组成**](https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html)

例如，`default`生命周期包括以下**构建阶段**：

```
◾validate - validate the project is correct and all necessary information is available
◾compile - compile the source code of the project
◾test - test the compiled source code using a suitable unit testing framework. These tests should not require the code be packaged or deployed
◾package - take the compiled code and package it in its distributable format, such as a JAR.
◾integration-test - process and deploy the package if necessary into an environment where integration tests can be run
◾verify - run any checks to verify the package is valid and meets quality criteria
◾install - install the package into the local repository, for use as a dependency in other projects locally
◾deploy - done in an integration or release environment, copies the final package to the remote repository for sharing with other developers and projects. 
```

因此，要完成上述阶段，我们只需要调用一个命令：

```
mvn <phase> { Ex: mvn install } 
```

对于上述命令，从第一个阶段开始，所有阶段依次执行，直到“安装”阶段。`mvn`可以执行一个目标或一个阶段（甚至多个目标或多个阶段），如下所示：

```
mvn clean install plugin:goal 
```

但是，如果要自定义用于引用插件的前缀，可以直接通过[插件 POM](https://maven.apache.org/guides/introduction/introduction-to-plugin-prefix-mapping.html)`maven-plugin-plugin`中的配置参数指定前缀。

**构建阶段由[插件](https://maven.apache.org/plugins/index.html)目标组成**

Maven 的大部分功能都在插件中。插件提供了一组可以使用以下语法执行 的**目标：**

```
 mvn [plugin-name]:[goal-name] 
```

例如，可以使用编译器插件的 compile-goal 通过运行来编译 Java 项目`mvn compiler:compile`。

构建生命周期是一个命名阶段的列表，可用于为目标执行指定顺序。

**插件提供的目标可以与生命周期的不同阶段相关联。**例如，默认情况下，*目标* `compiler:compile`与`compile` *阶段*相关联，而*目标* `surefire:test`与`test` *阶段*相关联。考虑以下命令：

```
mvn test 
```

执行上述命令时，Maven 会运行与每个阶段相关联的所有目标，直至并包括该`test`阶段。在这种情况下，Maven 运行`resources:resources`与阶段关联的目标`process-resources`，然后`compiler:compile`，依此类推，直到它最终运行`surefire:test`目标。

但是，即使构建阶段负责构建生命周期中的特定步骤，它执行这些职责的方式也可能会有所不同。这是通过声明绑定到这些构建阶段的插件目标来完成的。

插件目标代表了一个特定的任务（比构建阶段更精细），它有助于项目的构建和管理。它可能绑定到零个或多个构建阶段。未绑定到任何构建阶段的目标可以通过直接调用在构建生命周期之外执行。执行顺序取决于调用目标和构建阶段的顺序。例如，考虑下面的命令。和参数是构建阶段，而`clean`是（插件的）目标。`package``dependency:copy-dependencies`

```
mvn clean dependency:copy-dependencies package 
```

如果要执行此操作，`clean`则将首先执行阶段（意味着它将运行干净生命周期的所有先前阶段，加上`clean`阶段本身），然后是`dependency:copy-dependencies`目标，然后最终执行`package`阶段（及其之前的所有构建阶段）默认生命周期）。

此外，如果一个目标绑定到一个或多个构建阶段，则该目标将在所有这些阶段中调用。

此外，构建阶段还可以绑定零个或多个目标。如果构建阶段没有绑定目标，则该构建阶段将不会执行。但是，如果它绑定了一个或多个目标，它将执行所有这些目标。

**[内置生命周期绑定](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Built-in_Lifecycle_Bindings)**
某些阶段默认绑定了目标。而对于默认生命周期，这些绑定取决于包装值。

Maven架构：

[![在此处输入图像描述](https://i.stack.imgur.com/wZpms.png)](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Built-in_Lifecycle_Bindings)

[参考 1](https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Build_Lifecycle_Basics)
[参考 2](https://en.wikipedia.org/wiki/Apache_Maven#Build_lifecycles)

Maven 生命周期映射的 Eclipse 示例

[![Maven 生命周期映射的 Eclipse 示例](https://i.stack.imgur.com/F9QMr.png)](https://i.stack.imgur.com/F9QMr.png)

* * *

## 回答 #3

> 赞同：54
> 
> 时间：2014-10-12T03:20:54.497

这些定义在[Maven 站点的*“构建生命周期简介*](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html)”页面中有详细说明，但我试图[总结一下](https://sites.google.com/site/nosuchmethodexception/buildcycle)：

Maven 定义了 4 项构建过程：

1.  **生命周期**

    三个内置生命周期（又名*构建生命周期*）：`default`, `clean`, `site`. （[生命周期参考](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Lifecycle_Reference)）

2.  **阶段**

    每个生命周期都由*阶段*组成，例如对于`default`生命周期：`compile`、`test`、`package`、`install`等。

3.  **插入**

    提供一个或多个目标的工件。

    基于打包类型（`jar`,`war`等），插件的目标默认绑定到阶段。（[内置生命周期绑定](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Built-in_Lifecycle_Bindings)）

4.  **目标**

    执行的任务（动作）。一个插件可以有一个或多个目标。

    [在 POM 中配置插件](https://maven.apache.org/pom.html#Plugins)时需要指定一个或多个目标。此外，如果插件没有定义默认阶段，则可以将指定的目标绑定到阶段。

可以通过以下方式调用 Maven：

1.  一个阶段（例如`clean`, `package`）
2.  [`<plugin-prefix>:<goal>`](https://maven.apache.org/guides/introduction/introduction-to-plugin-prefix-mapping.html)（例如`dependency:copy-dependencies`）
3.  `<plugin-group-id>:<plugin-artifact-id>[:<plugin-version>]:<goal>`（例如`org.apache.maven.plugins:maven-compiler-plugin:3.7.0:compile`）

具有任何或全部的一种或多种组合，例如：

```
mvn clean dependency:copy-dependencies package 
```

* * *

## 回答 #4

> 赞同：53
> 
> 时间：2015-08-24T13:45:39.987

选择的答案很棒，但我仍然想为这个主题添加一些小东西。插图。

它清楚地展示了不同阶段如何绑定到不同的插件以及这些插件公开的目标。

因此，让我们检查一个运行类似的案例`mvn compile`：

*   这是一个执行带有编译**目标的编译器****插件的****阶段**
*****   编译器插件有不同的目标。因为`mvn compile`它映射到一个特定的目标，即编译目标。*   和跑步一样`mvn compiler:compile`****

 ****因此，**阶段由插件目标组成**。

[![在此处输入图像描述](https://i.stack.imgur.com/ciktU.png)](https://i.stack.imgur.com/ciktU.png)

链接到[参考](http://www.carminespagnuolo.eu/otheractivities/tutorato/PR-2014-2015/apache-maven-PR-27-04-2015.pdf)

* * *

## 回答 #5

> 赞同：35
> 
> 时间：2018-10-01T06:43:39.760

我相信已经提供了一个很好的答案，但我想添加一个易于理解的图表，其中显示了不同的 3 个生命周期（`build`、`clean`和`site`）以及每个生命周期中的阶段。

[![在此处输入图像描述](https://i.stack.imgur.com/yg0mZ.png)](https://i.stack.imgur.com/yg0mZ.png)

粗体相 - 是常用的主要相。

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2017-01-04T14:38:21.127

归功于 Sandeep Jindal 和 Premraj。在对此感到困惑一段时间后，他们的解释帮助我理解。

我在这里创建了一些完整的代码示例和一些简单的解释[https://www.surasint.com/maven-life-cycle-phase-and-goal-easy-explained/](https://www.surasint.com/maven-life-cycle-phase-and-goal-easy-explained/)。我认为这可能有助于其他人理解。

简而言之，从链接中，您不应该试图同时了解所有三个，首先您应该了解这些组中的关系：

*   生命周期与阶段
*   插件与目标

**1\. 生命周期与阶段**

**Life Cycle是按顺序排列的****阶段**的集合，请参见此处[Life Cycle References](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Lifecycle_Reference)。当你调用一个**阶段**时，它也会调用它之​​前的所有**阶段**。

例如，**清洁生命周期**有 3 个阶段（**清洁前、清洁、清洁后**）。

```
mvn clean 
```

它将调用**pre-clean**和**clean**。

**2\. 插件与目标**

**目标**就像**Plugin**中的一个动作。所以如果插件是一个类，那么目标就是一个方法。

你可以这样称呼一个目标：

```
mvn clean:clean 
```

这意味着“在 clean 插件中调用 clean 目标”（这里与 clean 阶段无关。不要让“clean”这个词混淆你，它们是不一样的！）

**3\. 现在阶段和目标之间的关系：**

**阶段**可以（预）链接到**目标**。例如，通常，清洁阶段链接到清洁目标。因此，当您调用此命令时：

```
mvn clean 
```

它将调用 pre-clean 阶段和链接到 clean:clean 目标的 clean 阶段。

它几乎与以下内容相同：

```
mvn pre-clean clean:clean 
```

更多详细信息和完整示例在[https://www.surasint.com/maven-life-cycle-phase-and-goal-easy-explained/](https://www.surasint.com/maven-life-cycle-phase-and-goal-easy-explained/)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-09-16T09:33:27.100

具有阶段和目标的 Maven 工作术语。

阶段：Maven阶段是一组与2或3个目标相关的动作

示例：- 如果您运行 mvn clean

这是执行目标 mvn clean:clean 的阶段

目标：Maven 目标以阶段为界

供参考 [http://books.sonatype.com/mvnref-book/reference/lifecycle-sect-structure.html](http://books.sonatype.com/mvnref-book/reference/lifecycle-sect-structure.html)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-08-14T19:05:34.037

有以下三个内置的构建生命周期：

*   默认
*   干净的
*   地点

**生命周期默认值**-> [验证、初始化、生成源、流程源、生成资源、流程资源、编译、流程类、生成测试源、流程测试源、生成测试资源、流程-test-resources、test-compile、process-test-classes、test、prepare-package、package、pre-integration-test、integration-test、post-integration-test、verify、install、deploy]

**Lifecycle clean** -> [pre-clean, clean, post-clean]

**生命周期站点**-> [站点前、站点、站点后、站点部署]

流程是顺序的，例如，对于*默认*生命周期，它从*validate*开始，然后进行*初始化*等等......

`mvn`您可以通过启用ie的调试模式来检查生命周期，`mvn -X <your_goal>`****

# javascript - 使用 new window[] 创建静态内部函数对象

> ID：16205784
> 
> 赞同：1
> 
> 时间：2013-04-25T03:17:17.277
> 
> 标签：javascript

我有一个静态内部函数：

```
function A() {

}

A.B = function() {

} 
```

我无法使用以下方法创建内部静态函数的函数对象：

```
new window['A.B'](); //Does not work 
```

然而

```
new window['A'](); //Works 
```

&

```
new A.B(); //Also works if I create inner static function object directly. 
```

有谁知道如何使用窗口创建静态内部函数对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T03:18:49.593

`A.B`不是 的财产`window`。`A`是 的财产`window`并且`B`是 的财产`A`。因此，如果您出于某种奇怪的原因真的想用括号来做这件事，那就是`new window['A']['B']()`.

如果您想在基于点下降时访问对象的任何属性，那不是内置的。

```
function descend(obj, path) {
    var parts = path.split('.');

    for(var i = 0; i < parts.length; i++) {
        obj = obj[parts[i]];
    }

    return obj;
}

// var B = descend(window, 'A.B');
// new B() 
```

# jquery - jQuery 在现有段落标签内附加文本

> ID：16205788
> 
> 赞同：22
> 
> 时间：2013-04-25T03:18:23.017
> 
> 标签：jquery, append, wrapall

我正在尝试使用 jQuery 在段落末尾添加其他文本。我的想法是产生这样的结构：

**从我的回答来看，我会澄清。我需要先创建这个结构。这是我觉得困难的部分，而不是第二个最终结果。那么我如何动态创建这个：**

```
<p>old-dynamic-text<span id="add_here"></span></p> 
```

然后在添加新文本后，它看起来像这样：

```
<p>old-dynamic-text<span id="add_here">new-dynamic-text</span></p> 
```

我一直在玩 .wrapAll() 方法，但我不能完全得到想要的效果。这是最好的方法（如果是这样的话），还是有另一种方法可以将新文本附加到现有段落的末尾（需要用某种类型的标签包装，因为我需要不同的样式） ?

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-04-25T03:22:32.130

尝试这个...

```
$('p').append('<span id="add_here">new-dynamic-text</span>'); 
```

或者，如果存在现有跨度，请执行此操作。

```
$('p').children('span').text('new-dynamic-text'); 
```

[**演示**](http://jsfiddle.net/maheshsapkal/xXCFv/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T03:26:49.870

尝试这个

```
$('#add_here').text('new-dynamic-text'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T03:25:00.727

如果您想将`append`文本或 html 发送到，`span`那么您可以按如下方式进行。

```
$('p span#add_here').append('text goes here'); 
```

append 将在末尾添加文本到 span 标签。

要替换 span 内的整个文本或 html，您可以使用`.text()`或`.html()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-08T10:15:36.353

我刚刚发现了一种附加文本的方法，并且至少可以正常工作。

```
 var text = 'Put any text here';
 $('#text').append(text); 
```

您可以根据需要更改文本。

希望这可以帮助。

# iphone - 滑动到另一个元素时 UIAccessibilityAnnouncementDidFinishNotification 未触发

> ID：16205792
> 
> 赞同：5
> 
> 时间：2013-04-25T03:18:56.177
> 
> 标签：iphone, ios, accessibility

我正在使用`UIAccessibilityPostNotification`和`UIAccessibilityAnnouncementDidFinishNotification`在我的应用程序中。根据[此链接](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Accessibility/AccessibilityfromtheViewControllersPerspective.html)，通知应在公告成功完成或未成功完成时发布（即用户滑动到屏幕上的另一个元素）。

`UIAccessibilityAnnouncementDidFinishNotification`期望 a`NSNotification dictionary`作为参数，您可以从中确定说的值以及说话是否已不间断地完成。`VoiceOver`如果用户在宣布结束之前执行停止讲话手势或滑动到另一个元素，讲话可能会被打断。

如果公告结束，它可以正常工作，但如果我在它结束之前滑动或点击屏幕，则不会发布任何通知。关于为什么会这样的任何想法？这可能是一个错误吗？如果是这样，有关解决方法的任何建议？我有需要按顺序读取的文本，所以我使用它来同步。即使我可以在用户点击屏幕/执行任何操作时以某种方式将我的口语标志重置为 0，那也很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-30T03:42:59.180

创建自定义视图，该自定义视图需要实现协议`UIAccessibilityFocus`

```
- (void)accessibilityElementDidBecomeFocused
- (void)accessibilityElementDidLoseFocus
- (BOOL)accessibilityElementIsFocused 
```

# firefox - 在 Firefox 中使用 pdf.js

> ID：16205795
> 
> 赞同：1
> 
> 时间：2013-04-25T03:19:18.293
> 
> 标签：firefox, pdf

我已将[pdf.js 扩展](https://addons.mozilla.org/en-us/firefox/addon/pdfjs/)下载到 Firefox。但是当我打开一个 PDF 文件时，它仍然使用 Adob​​e Reader 显示。如何使用 pdf.js 显示它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T04:08:25.627

你可以试试这个

转到 Firefox -> 工具 -> 附加组件 -> 插件 -> 在此处禁用插件 Adob​​e 阅读器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T03:24:56.790

You can do that following this instructions : Firefox -> Options -> Applications -> Adobe Acrobat Document then set the default program.

Good Luck.

# java - 未调用 Cxf 异常映射器

> ID：16205797
> 
> 赞同：3
> 
> 时间：2013-04-25T03:19:27.567
> 
> 标签：java, spring, exception-handling, cxf

我创建了一个自定义异常，并且我有一个异常映射器，我希望在抛出异常时调用它，以便我可以返回正确的 http 返回代码和消息，但由于某种原因，它不适用于我的异常。

这是相关代码

我的例外类：

```
public class MyException extends ApplicationRuntimeException
{

    private static final long serialVersionUID = 1L;

    public MyException ()
    {
        super();
    }

    public MyException (String message)
    {
        super(message);
    }

    public MyException (String message, ErrorCode errorCode)
    {
        super(message, errorCode);
    }

    public MyException (Throwable t)
    {   
        super(t);
    }

    public MyException (String message, Throwable t)
    {
        super(message, t);
    }

} 
```

我的异常映射器类

```
@Provider
public class MyExceptionMapper implements ExceptionMapper<Exception>
{
    @Override
    public Response toResponse(Exception exception)
    {
        //code
        return response;
    }
} 
```

CXF 配置

```
<jaxrs:server id="serviceId" address="/">
        <jaxrs:providers>
            <bean class="com.package.MyExceptionMapper"/>
        </jaxrs:providers>
</jaxrs:server> 
```

这基本上就是我的代码的样子，我是否遗漏了什么或我需要提供任何其他信息才能解决此问题？

异常和异常映射器位于两个不同的项目中，但我认为这并不重要，因为它们都在类路径中。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T14:57:52.430

如果这是您的完整 CXF，则您缺少正在执行的此服务器中的服务 bean。

提供者与服务绑定，并且只会为同样在服务器中定义的服务 bean 执行。

除此之外，一切看起来都很好，所以我会检查并确保你的异常真的被抛出了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-19T20:37:30.923

异常映射器只处理服务 bean 抛出的异常。

在这种情况下，一种选择是抛出一个新的 WebApplicationException(Throwable, Response) ，其中响应的构建方式应与异常映射器中所做的相同。

如果您尝试进行一些验证，我认为创建自定义消息正文阅读器是一个不错的选择。通过这样做，在消息正文阅读器中，您还可以访问其他提供程序/异常映射器。

祝你好运！

# android - 当按下后退按钮或方向改变时，带有地图的片段崩溃应用程序

> ID：16205803
> 
> 赞同：1
> 
> 时间：2013-04-25T03:20:02.620
> 
> 标签：android, android-fragments, google-maps-android-api-2

我有一个`Activity`在`ActionBar`. 选项卡 1 加载的 a`Fragment`将使 a 膨胀`WebView`，而选项卡 2 加载`Fragment`带有地图的 a。最初，我遇到了更改导致应用程序崩溃的选项卡的问题。我已按照[此处](https://stackoverflow.com/questions/14074625/mapfragment-in-action-bar-tabs/14466954#14466954)的说明执行`onDestroyView()`。

现在的问题是，如果我按 Tab 1 ( `WebView`) 中的后退按钮，它会正确退出`Activity`。但如果我在 Tab 2（地图）上执行此操作，应用程序就会崩溃。当我改变方向时，完全相同的情况也适用。我确信它与 . 有关系`onDestroyView()`，但我不确定它是什么。

我什至尝试`Override`过返回按钮，但没有任何效果。

这是我提供一些上下文的代码：

活动类：

```
public class MyActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    //Displaying the tabs by calling ActionBar
    ActionBar actionBar = getActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    //Details Tab
    String label1 = getResources().getString(R.string.details);
    Tab tab = actionBar.newTab();
    tab.setText(label1);
    TabListener<DetailsFragment> t1 = new TabListener<DetailsFragment>(this, label1, DetailsFragment.class);
    tab.setTabListener(t1);
    actionBar.addTab(tab);

    //Map Tab
    String label2 = getResources().getString(R.string.map);
    tab = actionBar.newTab();
    tab.setText(label2);
    TabListener<MapFragment> t2 = new TabListener<MapFragment>(this, label2, MapFragment.class);
    tab.setTabListener(t2);
    actionBar.addTab(tab);
}

private class TabListener<T extends Fragment> implements ActionBar.TabListener {
    private Fragment mFragment;
    private final Activity mActivity;
    private final String mTag;
    private final Class<T> mClass;

    /**
     * Constructor used each time a new tab is created.
     * 
     * @param activity
     *            The host Activity, used to instantiate the fragment
     * @param tag
     *            The identifier tag for the fragment
     * @param clz
     *            The fragment's Class, used to instantiate the fragment
     */
    public TabListener(Activity activity, String tag, Class<T> clz) {
        mActivity = activity;
        mTag = tag;
        mClass = clz;
    }

    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        // Check if the fragment is already initialized
        if (mFragment == null) {
            // If not, instantiate and add it to the activity
            mFragment = Fragment.instantiate(mActivity, mClass.getName());
            ft.add(android.R.id.content, mFragment, mTag);
        } else {
            // If it exists, simply attach it in order to show it
            ft.attach(mFragment);

        }
    }

    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        if (mFragment != null) {
            // Detach the fragment, because another one is being attached
            ft.detach(mFragment);
        }
    }

    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        // User selected the already selected tab. Usually do nothing.
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
} } 
```

细节片段：

```
public class DetailsFragment extends Fragment {

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    View v = inflater.inflate(R.layout.morning, container, false);
    WebView webview = (WebView) v.findViewById(R.id.details);
    webview.loadUrl("file:///android_asset/pools/details.html");
    return v;
} } 
```

地图片段：

```
public class MapFragment extends Fragment {

static final LatLng mapLatLng = new LatLng("some numbers", "some numbers");
private GoogleMap map;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    View v = inflater.inflate(R.layout.map, container, false);
    map = ((MapFragment)getFragmentManager().findFragmentById(R.id.map)).getMap();
    Marker amksc = map.addMarker(new MarkerOptions().position(mapLatLng).title("Map"));

    map.moveCamera(CameraUpdateFactory.newLatLngZoom(mapLatLng, 18)); 
    return v;
}

@Override
public void onDestroyView() {
    super.onDestroyView();
    MapFragment destroyMe = (MapFragment)getFragmentManager().findFragmentById(R.id.map);
    if (destroyMe != null) {
        getFragmentManager().beginTransaction().remove(destroyMe).commit();
    }
} } 
```

感谢您阅读这么长的帖子。任何帮助是极大的赞赏。我会在没有笔记本电脑的情况下离开一段时间（确切地说是 15 天），所以我可能无法回复并测试你的答案，但请放心，我会的 =)

提前致谢！

已编辑以包含错误日志（不确定如何格式化）

```
04-25 11:27:54.333: E/AndroidRuntime(21779): FATAL EXCEPTION: main

04-25 11:27:54.333: E/AndroidRuntime(21779): java.lang.NullPointerException

04-25 11:27:54.333: E/AndroidRuntime(21779):    at android.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1380)

04-25 11:27:54.333: E/AndroidRuntime(21779):    at android.app.FragmentManagerImpl$1.run(FragmentManager.java:430)

04-25 11:27:54.333: E/AndroidRuntime(21779):    at android.os.Handler.handleCallback(Handler.java:615)

04-25 11:27:54.333: E/AndroidRuntime(21779):    at android.os.Handler.dispatchMessage(Handler.java:92)

04-25 11:27:54.333: E/AndroidRuntime(21779):    at android.os.Looper.loop(Looper.java:213)

04-25 11:27:54.333: E/AndroidRuntime(21779):    at android.app.ActivityThread.main(ActivityThread.java:4786)

04-25 11:27:54.333: E/AndroidRuntime(21779):    at java.lang.reflect.Method.invokeNative(Native Method)

04-25 11:27:54.333: E/AndroidRuntime(21779):    at java.lang.reflect.Method.invoke(Method.java:511)

04-25 11:27:54.333: E/AndroidRuntime(21779):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)

04-25 11:27:54.333: E/AndroidRuntime(21779):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)

04-25 11:27:54.333: E/AndroidRuntime(21779):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T12:17:38.690

我似乎已经解决了后退按钮和方向更改问题。

这里的技巧是不使用`onDestroyView()`，而是改变处理片段的方式。而不是`ft.attach(mFragment)`and `ft.detach(mFragment)`，我将它们更改为`ft.show(mFragment)`and `ft.hide(mFragment)`。

至于导致应用程序崩溃的方向变化，我相信（如果我错了，请纠正我）只要您没有替代横向布局，您就可以添加`android:configChanges="orientation|screenSize"`到此活动的清单中，如下所示：

```
<activity 
        android:theme="@style/AppTheme" 
        android:name="MyFragmentActivity" 
        android:label="@string/fragmentActivity" 
        android:configChanges="orientation|screenSize">
    </activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:52:25.793

GoogleMap 需要一点时间来加载，所以如果你想使用它，它可以返回 null。尝试在 MapFragment 的 onActivityCreated() 方法中移动此代码

```
map = ((MapFragment)getFragmentManager().findFragmentById(R.id.map)).getMap();
Marker amksc = map.addMarker(new MarkerOptions().position(mapLatLng).title("Map"));

map.moveCamera(CameraUpdateFactory.newLatLngZoom(mapLatLng, 18)); 
```

这曾经对我有用。请务必查看[片段生命周期](http://developer.android.com/guide/components/fragments.html#Lifecycle)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-20T14:07:18.350

这对我有用..试试下面在 onDestory() 方法中编写的代码

```
@Override
    public void onDestroy() { 
if (fragment != null
                        && getFragmentManager().findFragmentById(
                                fragment.getId()) != null) {

                    getFragmentManager().beginTransaction().remove(fragment)
                            .commit();
                    fragment = null;
                }
} 
```

# ios - 如何调用电子邮件应用程序？

> ID：16205804
> 
> 赞同：1
> 
> 时间：2013-04-25T03:20:12.713
> 
> 标签：ios, email, invoke

如何在ios系统中通过代码调用E-mail应用程序？我想检查电子邮件界面而不是发送邮件界面。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T05:06:01.747

你可以利用这个：

```
- (void)launchMailAppOnDevice
{
    NSMutableString *subject  = [NSMutableString string];
    [subject appendString:@"Your Subject"];

    NSMutableString *mailbody  = [NSMutableString string];
    [mailbody appendString:@"Blah Blah Blah"];
    [mailbody appendString:@"Blah Blah Blah "];

    NSString *recipients = [NSString stringWithFormat:@"mailto:test@test.com?&subject=%@!",subject];

    NSString *body = [NSString stringWithFormat:@"&body=%@!",mailbody];;

    NSString *emailString = [NSString stringWithFormat:@"%@%@", recipients, body];

    emailString = [emailString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:email]];
} 
```

如果要检查邮件应用程序是否存在 int app 并且要打开它。

```
if ([[UIApplication sharedApplication] canOpenURL:[ NSURL URLWithString:@"mailto:"]]) 
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"mailto:"]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T13:30:39.207

您无法打开邮件应用程序。`MFMailComposeViewController`您所能做的就是使用 URL或URL打开撰写电子邮件界面`mailto:`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T03:30:36.160

MFMailComposeViewController 是一个官方 API，您可以使用它在您的应用程序中*编写*消息。

[我听说您可以使用“ `mailto:`” URL 方案打开邮件应用程序](https://stackoverflow.com/questions/9225351/mailto-link-not-launching-on-ios-web-app)并从那里撰写邮件（假设邮件应用程序仍安装在您的 iOS 设备上），但这仅适用于撰写邮件在邮件应用程序中，它不会将用户切换到收件箱。

# php - 是否可以在 MySQL 中返回表的第 n 个字段？

> ID：16205805
> 
> 赞同：0
> 
> 时间：2013-04-25T03:20:18.260
> 
> 标签：php, mysql

我正在尝试使用 PHP 来使用来自单独表的某些列的数据填充下拉菜单。但是，我有很多菜单要填充，所以我不想为每个菜单创建一个特定的函数，而是想将列名（这是字段，对吗？）传递给函数。

目前我有一个菜单

```
function print_dropdown($query, $link){
   $queried = mysql_query($query, $link);
   $menu = '<select name="wholesaler" id="wholesaler">';
   while ($result = mysql_fetch_array($queried)) {
       $menu .= '<option value="' . $result['id'] . '">' . $result['wholesaler'] . '</option>';
   }
   $menu .= '</select>';
   return $menu;
}
...
<?php echo print_dropdown("SELECT id, wholesaler FROM wholesaler_flag LIMIT 0, 10", $connect_normas_boudoir);
?> 
```

但是，我想这样做：

```
function get_field($table){
    $col_2 = mysql_query('SHOW COLUMNS FROM "$table" WHERE FIELD = 2');
    return $col_2;
}

function print_dropdown($query, $link){
    $queried = mysql_query($query, $link);
    $menu = '<select name="'$col_2'" id="'$col_2'">';
    while ($result = mysql_fetch_array($queried)) {
        $menu .= '<option value="' . $result['id'] . '">' . $result['$col_2'] . '</option>';
    }
    $menu .= '</select>';
    return $menu;
} 
```

...

```
<?php
    get_field(wholesaler_flag);
    echo print_dropdown("SELECT id, wholesaler FROM wholesaler_flag LIMIT 0, 10", $connect_normas_boudoir);
?> 
```

尝试选择每个表格的第二个字段是不是很糟糕？就我而言，每个相关表中只有两列。但是，我知道将来可以在 id 之后插入一个新列。有一个更好的方法吗？如果我搞砸了我的单引号和双引号，请原谅。还在学习。

**注意：**我已经`SHOW COLUMNS FROM wholesaler_flag WHERE FIELD = 2;`在 MySQL 控制台中尝试过。当然它没有用，但我认为可能有一种方法可以访问它。这是我的问题所关注的特定领域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T03:44:29.073

```
function print_dropdown($query, $link,$field0,$field1){
    $queried = mysql_query($query, $link);
    $menu = '<select name="'.$field1.'" id="'.$field1.'">';
    while ($result = mysql_fetch_array($queried)) {
        $menu .= '<option value="' . $result[0] . '">' . $result[1] . '</option>';
    }
    $menu .= '</select>';
    return $menu;
} 
```

* * *

```
<?php
     echo print_dropdown("SELECT id, wholesaler FROM wholesaler_flag LIMIT 0, 10", $connect_normas_boudoir,"id","wholesaler");
?> 
```

既然你将sql语句传递给函数，为什么不传递你想要的选项id和选项值名称。使用上述内容，您应该始终在 sql 语句中提供 id 作为第一列，将 name 作为第二列，因为选项值固定为第一列，值固定为第二列，即`$result[0]`和`$result[1]`分别。你可以试试上面的方法。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T03:34:21.627

你到底想做什么？要从字段中选择第 n 行，如果您正在执行*SELECT*查询，将是：

```
SELECT * FROM table LIMIT n-1,1 
```

但是，您在查询*SHOW COLUMNS*上执行此操作，该查询不依赖于行号。您可以选择第 5 行或第 50 行（在该查询中无论如何都不可能），它仍然会返回相同的结果（有关表列的信息）。

您可以轻松地将字段/表名称传递给函数并构建这样的查询。但是，在您给定的示例中，由于 PHP/SQL 语法不正确，尚不清楚您要使用函数完成什么。

**根据评论反馈进行编辑：** 您可以编写一个函数来获取表和目标列号，然后将列名传回给您。以下函数获取您的 SQL 表（即“wholesaler_flag”）和您想要的列数（即示例中所述的 2）。

```
function getColumnName($sqlTable, $targetColumn = 2) {
    $currentColumn = 1; // indicate our starting position for the column traversal

    $theQuery = mysql_query("SHOW COLUMNS FROM " . $sqlTable); // get columns from table

    // traverse columns until we reach the desired column number; return column name
    while ($theColumn = mysql_fetch_array($theQuery)) {
        if ($currentColumn == $targetColumn) {
            return $theColumn["Field"];
        }

        $currentColumn++;
    }

    return false; // returns Boolean false if column number is not found
} 
```

这可以通过以下方式调用：

```
$columnName = getColumnName("wholesaler_flag", 2);
// $columnName = getColumnName("wholesaler_flag"); also works since 2 is set as the function's default column 
```

您也可以使用它来获取第 3、4 列等或任何您想要的。稍加修改，您还可以使其返回一系列列。

# email - Google App Script GMailApp 发送电子邮件并在对话中将它们分组

> ID：16205807
> 
> 赞同：0
> 
> 时间：2013-04-25T03:20:24.493
> 
> 标签：email, google-apps-script, google-apps

我对 Google App Script 和使用 GmailApp.sendEmail 还是很陌生。当我尝试发送具有相同主题的多封电子邮件时，如何将它们分组在一个对话中（假设收件人的 Gmail 已打开对话选项）。

非常感谢，明

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T02:35:37.133

由于您正在使用`GmailApp`，请查看[Gmail 线程类](https://developers.google.com/apps-script/reference/gmail/gmail-thread)。如果您使用`thread.replyAll(body, options)`回复您发送的第一条消息，则第二条消息将出现在收件人邮箱的同一线程中。

发送第一条消息时，您需要自己抄送，以便它最终出现在您自己的收件箱中，然后您可以使用`[GmailApp.search()][2]`查找与您发送的消息匹配的线程。从那里，向下钻取到线程，然后`replyAll`.

# iphone - 通过位置动态更改 UITableViewController

> ID：16205810
> 
> 赞同：0
> 
> 时间：2013-04-25T03:20:37.697
> 
> 标签：iphone, ios, ios5, ios6, uitabbarcontroller

我正在构建一个应用程序，为了记录，我正在使用`ECSlidingView`控制器中的代码。我希望我的应用程序使用 GPS 从我的 Web 界面中提取数据，让用户知道他们可以在给定位置做某些事情。例如，我让一个用户去一家商店，让他们说我希望他们在那个地方付款，它会给他们这个选项。或者，如果商店不提供通过应用程序付款，我会禁用它。什么是解决这个问题的好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T03:30:04.640

您可以尝试使用`CoreLocation`，但您可能无法在内部获得准确的位置（它很可能会使用 wifi 或蜂窝信息，因此准确度可能不是您所期望的）。然后，当您获得位置时，向您的服务发出请求，传递您从 接收的纬度和经度`CoreLocation`。在那里，您应该按位置搜索以检索可能的匹配项 - 由于准确性问题，考虑返回附近商店的多个商店信息。

# c++ - Convert existing TCP socket into TLS using OpenSSL

> ID：16205813
> 
> 赞同：2
> 
> 时间：2013-04-25T03:20:47.603
> 
> 标签：c++, ssl, tcp, openssl

I need some information about OpenSSL, TLS socket. First of i want to made a connection with server through TLS over TCP. Generally first create a TCP socket, then connect to server using the TCP socket, after that convert(before send or receive any data through TCP socket) the TCP socket into TLS.

My question is is it possible according to following way?

1.  Create TCP socket.

2.  Connect with server using TCP socket.

3.  Send and receive some data through TCP socket.

4.  Then convert the TCP socket into TLS.

    Note: I am using OpenSSL.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T03:58:15.007

如果服务器必须支持它，那么以给定的方式似乎是可能的。请参阅 SMTP。对于 SMTP 服务器，它以这种方式工作，其中前几个对话是在纯 TCP 中，然后是在 SSL/TLS 上。您可以使用 BIO_new_socket 将现有套接字绑定到 BIO，然后使用 SSL_set_bio 将此套接字设置为 SSL * 结构。

您可以找到许多 SSL 客户端示例。

# math - 带四元数的非线性 slerp 动画

> ID：16205821
> 
> 赞同：2
> 
> 时间：2013-04-25T03:21:42.250
> 
> 标签：math, animation, graphics, 3d

虽然在 3D 方向之间插值的流行`slerp`公式非常酷且有用，但我突然想到这是一个线性动画。

不太复杂的动画，例如浮动之间的简单补间，很容易更改为二次缓入和缓出，但`slerp`公式并非如此简单（其发明者 Shoemake 在最初发现时甚至没有公布公式的推导）。

所以我用这个：

```
template <typename T>
inline QuaternionT<T> QuaternionT<T>::Slerp(T t, const QuaternionT<T>& v1) const
{  
const T epsilon = 0.0005f;
T dot = Dot(v1);

if (dot > 1 - epsilon) {
    QuaternionT<T> result = v1 + (*this - v1).Scaled(t);
    result.Normalize();
    return result;
}

if (dot < 0)
    dot = 0;

if (dot > 1)
    dot = 1;

T theta0 = std::acos(dot);
T theta = theta0 * t;

QuaternionT<T> v2 = (v1 - Scaled(dot));
v2.Normalize();

QuaternionT<T> q = Scaled(std::cos(theta)) + v2.Scaled(std::sin(theta));
q.Normalize();
return q;
} 
```

有谁知道如何根据`t`（经过/持续时间）使其成为缓动插值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T05:28:03.573

控制 lerping 的“轻松”的变化率`t`，而不是 lerping 本身。我假设这`T`是一个标量（如浮点/双精度）。

AFAICT，您正在尝试获得缓入效果，但路径本身是开始和结束四元数之间的“直线”旋转。因此，只要`t`从 0 变化到 1，您所要做的就是*改变 t 的变化率*来获得“缓动插值”。

我通常使用`3*t^2-2*t^3`公式来轻松进出。我会在这里留下一个[维基百科链接](https://en.wikipedia.org/wiki/Slerp)，以防万一。

（我觉得我在这里遗漏了一些东西。如果这回答了你的问题，请告诉我）。

# php - 为什么 ajax 在一台服务器上工作而不是下一台？

> ID：16205825
> 
> 赞同：-2
> 
> 时间：2013-04-25T03:22:46.813
> 
> 标签：php, jquery, ajax, wordpress

我有一些脚本可以在我的开发服务器上运行，但不能在我的登台服务器上运行：

```
 add_action('wp_head','get_gz_info',30);
    function get_gz_info(){
        ?>
        <script type="text/javascript" >
        jQuery(document).ready(function($) {
                var modal = {action:'modal_action'};
                var ajaxurl = '<?php echo admin_url('admin-ajax.php'); ?>';
            $.post(ajaxurl,modal,function(data){
                $('body').append(data);
            });
        });
        </script>
    <?php
} 
```

php大致是：

```
add_action('wp_ajax_modal_action', 'set_modal');
    add_action('wp_ajax_nopriv_modal_action', 'set_modal');
    function set_modal() {
...
} 
```

在我的开发端一切正常，但 javascript 的暂存端放置在标题中（就像开发一样），但它不会运行“ajax 部分”。可能是暂存端需要用户名/密码才能访问它吗？

我已经尝试过使用和不使用 https 并得到相同的结果。

根据检查，这被设置为 ajaxurl，“...mysite.../wp-admin/admin-ajax.php”，因此正在实施 ajaxurl。奇怪的问题是它在一台服务器上按原样工作，但在下一台服务器上却不行。

----- 编辑 ----- html 将其显示为头部的 js（在 jquery 加载后）

```
<script type="text/javascript" >
        jQuery(document).ready(function($) {
                var modal = {action:'modal_action'};
                var ajaxurl = '...mysite.../wp-admin/admin-ajax.php';
            $.post(ajaxurl,modal,function(data){
                $('body').append(data);
            });
        });
        </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T14:36:28.727

设置登台服务器的人将 .htaccess 放在管理端，阻止站点访问 wp-admin 区域中的文件。

# linux - Burning an array of paths using genisoimage

> ID：16205829
> 
> 赞同：0
> 
> 时间：2013-04-25T03:23:16.320
> 
> 标签：linux, bash

I have an array of files (some have spaces). I use genisoimage to create an iso file from these files, but the spaces mess it up.

Here's an example:

```
#This is my array of files.  Note: "2 a" is a filename with a space in it.
files=(1 "2 a" 3)

#Here I try to create an iso file with the files in the array..fail
echo "${files[@]}"|xargs genisoimage -o "test.iso"

```

I get this output:

```
genisoimage: No such file or directory. Invalid node - '2'.

```

If I just look at the output of `echo "${files[@]}`, I see that the output of files is not properly quoting the filenames (thus `2 a` becomes `2`)

Is there a way to output an array of files that will be properly escaped for use by xargs? I'd prefer a way to just output the element separator as a null character so I can use the `-0` option in xargs.

# javascript - 在 contenteditable div 中单击按钮时选择文本（可见）

> ID：16205831
> 
> 赞同：0
> 
> 时间：2013-04-25T03:23:31.627
> 
> 标签：javascript

单击按钮时，我想选择 contenteditable div 中的所有文本。有一些像

```
document.getElementById("myTextArea").select() 
```

我已经研究过创建一个范围，但对用户来说是不可见的。

有没有办法在 JavaScript 中做到这一点（使用闭包库）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T04:16:09.520

对不起，我不明白你想要什么

```
function highlight(element){
      var inner = document.getElementById(element).innerText;
      inner = "<span class=\"highlighted\">" + inner + "</span>"
    }
    <style>
      span .highlighted{
        background-color: yellow;
      }
    <style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T03:40:23.073

```
var x = document.getElementById("myTextArea").innerText; 
```

获取任何事物内容的这一行都有一个 id

```
document.getElementById("myTextArea").innerText =  x; 
```

这一行来设置内容

现在将该代码放在一个函数中并像这样调用它 onClick

```
<input type="submit" onClick="functionname();" id="submit"> 
```

# azure - 有没有办法从 Azure ACS 检索活动日志？

> ID：16205832
> 
> 赞同：0
> 
> 时间：2013-04-25T03:23:39.770
> 
> 标签：azure

我想构建一些功能，让我能够分析我的公共网站的用户如何使用各种身份提供者进行登录。

我有多个通过 WIF 连接到 ACS 的网站。ACS 通过社交网络登录以及我的自定义 STS 提供身份联合。

我希望能够从 ACS 检索“活动日志”。大致如下：

```
1\. RP: Web1; IdP: Google; Claims: [email: user1@gmail.com, name: User One]; Time: 15:37
2\. RP: Web2; IdP: Custom; Claims: [email: user2@custom.com, name: User Two]; Time: 15:38
3\. RP: Web1; IdP: Facebook; Claims: [email: user3@email.com, name: User Three]; Time: 15:39 
```

（这只是一个简化，我了解每个提供商都会发送不同的声明等）。

我希望我可以使用管理服务检索类似的东西，但我找不到方法。

我探索的其他选项是将 RP-STS 添加到声明链：Web -> RP-STS -> ACS -> IdP。但是为了收集使用信息而在链中添加另一个跃点感觉有点过头了。有没有更聪明的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T05:14:25.970

没有。恐怕您今天无法检索此类信息。您必须自己进行审计日志记录。如果您需要简化版本的信息，那么如果没有中间 STS 就不会很难实现。

我会做以下事情：

*   [从 WsFederationAuthenticationModule 中](http://msdn.microsoft.com/en-us/library/ee727479.aspx)获取一些事件（[SessionSecurityTokenCreated](http://msdn.microsoft.com/en-us/library/microsoft.identitymodel.web.wsfederationauthenticationmodule.sessionsecuritytokencreated.aspx)可能是一个不错的选择）
*   在该事件处理程序中收集我需要的所有内容，包括当前正在运行的应用程序标识，并将其异步写入 Azure 表存储
*   将上述代码打包在单独的类库中，并从我拥有的所有 Web 应用程序中引用它

我的想法是写入 Azure 存储表，因为我认为它非常适合该场景。我可以将几乎无限数量的 Web 应用程序写入 Azure 表服务。如果我仔细选择分区键/行键组合，我将拥有无限的审计日志存储。设计 Azure 表的主要问题实际上是关于如何读取数据。

# javascript - 在 JavaScript 中的函数中插入一行

> ID：16205835
> 
> 赞同：5
> 
> 时间：2013-04-25T03:23:57.990
> 
> 标签：javascript, function

在 JavaScript 中，是否可以在已经存在的函数中插入一行？我想创建一个在函数的特定位置插入一行的函数：

```
function insertLine(theFunction, lineToInsert, positionToInsert){
    //insert a line into the function after the specified line number       
} 
```

例如，是否可以以编程`checkParameterTypes(min, "string", max, "string");`方式在该函数的第一行之前插入该行？

```
function getRandomInteger(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T03:59:55.173

如果您希望在函数的开头发生某些事情，可以使用以下内容。您确实可以访问`this`注入函数的参数。所以它仍然适用于需要特定上下文的函数。

```
function inject(before, fn) {
    return function(){
        before.apply(this, arguments);
        return fn.apply (this, arguments);
    }
} 
```

例如

```
function add(a, b) {
   return a + b; 
}    

function concat(a, b) {
    return a + b;
}

/**
 * You can repeat index and type to check multiple arguments
 */
function createArgumentChecker(index, type /**index, type, ... */) {
    var originalArgs = arguments; 
    return function() {
        for (var i=0; i < originalArgs.length; i+=2) {
             var index = originalArgs[i],
                 requestedType = originalArgs[i+1],
                 actualType = typeof arguments[index];
             if (typeAtIndex  != actualType) {
                 console.log("Invalid argument passed at index " + index  + 
                     ". Expected type " + requestedType +  "but it's " + actualType );
             }
        }
    }
}

function logArguments() {
    console.log(this, arguments);
}

// Inject an argument checker
add = inject(add, createArgumentChecker(0,"number", 1, "number"));
concat = inject (concat, createArgumentChecker(0, "string", 1, "string"));

// You can even do it multiple times, inject an argument logger;
add = inject(add, logArguments);
concat = inject(concat, logArguments); 
```

*[JSfiddle](http://jsfiddle.net/sDBJ9/)*

这在调试无法修改源代码的网站时很方便，除非您可以将其剥离用于生产版本，否则我不会使用它进行参数检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T03:34:30.870

是的，你可以，但使用 eval 总是邪恶的；）

```
function insertInbetween (arr, value, index) {
  var inserted, i, newarr = [];
  for (i = 0; i < arr.length; i++) {
    if(i == index && !inserted) {
      newarr[i] = value;
      inserted = true;
    }
    newarr.push(arr[i]);
  }
  return newarr;
}

function test (a, b) {
    console.log(a,b);
}

var fstrarr = test.toString().split('\n');
eval(insertInbetween(fstrarr, "console.log('injected!');", 1).join('\n')); 
```

编辑：正如对您问题的评论中提到的那样，您这样做会失去范围。

# javascript - In Javascript, how do you access key value data from an object in a mixed array?

> ID：16205839
> 
> 赞同：0
> 
> 时间：2013-04-25T03:24:16.677
> 
> 标签：javascript, arrays, object, properties, key-value

my name's Mike and my question is two-fold:

1.  How can I access the objects in my array so that they properly appear in my `question` prompt, and
2.  How can I access the properties of the randomely selected object in an `if/else` statement?

I'm trying to make a simple flashcard program to help me memorize different kinds of sound equipment. The list of equipment is large but I'm only including three different kinds to keep this example simple. I want each object to have two properties: `answer` and `desc`. This first part defines three objects, places them in an array, creates a variable for picking one of the array items randomely, and another variable for prompting the user for an `answer`:

```
var newFlash = function() {
    var A827 = {
        answer: "T",
        desc: "Multitrack Tape Recorder"
    };
    var LA2A = {
        answer: "O",
        desc: "Classic Leveling Amplifier"
    };
    var SonyC800G = {
        answer: "M",
        desc: "Tube Condenser Microphone"
    };
    var list = [A827, LA2A, SonyC800G];
    var rand = Math.floor(Math.random() * list.length);
    var question = prompt("What kind of equipment is " + list[rand] + "?");
}; 
```

Now, if I make my three items in my array all strings, they show up no problem in the `question` prompt correctly replacing `list[rand]` with the appropriate array item. However, using objects in my array, my prompt says `"What kind of equipment is [object Object]?`.

My end goal is for the user to enter the appropriate one- or two-letter response (M for Microphone, C for Console, O for Outboard Gear, T for Tape Machine, S for Software, and CH for Computer Hardware) where upon entering the successful letter(s) yields an alert that displays both the object's `answer` and `desc`. My n00b instinct tells me this second part should be an `if/else` statement in the form of

```
if (question == list[rand.answer]) {
    alert("Correct, Answer: " + list[rand.answer] + ", a " + list[rand.desc] + "!");
}
else {
    alert("Wrong, try again.");
} 
```

but I'm very certain that this isn't the right way to access these object properties.

So, again, my question has two parts:

1.  How can I access the objects in my array so that they properly appear in my `question` prompt, and
2.  How can I access the properties of the randomely selected object in an `if/else` statement?

I'm sure some piece of logic is escaping me. Thanks for reading.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T03:45:23.027

你想用`var question = prompt("What kind of equipment is " + list[rand].desc + "?");`. `list[rand]`将为您生成一个具有结构的对象`{answer: "", desc: ""}`，因此您需要另外访问代码中的描述。

同样，您想要：

```
if (question == list[rand].answer) {
    alert("Correct, Answer: " + list[rand].answer + ", a " + list[rand].desc + "!");
}
else {
    alert("Wrong, try again.");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T03:46:44.240

要在 Javascript 中访问对象的属性，请使用点表示法，这在许多具有对象的语言中很常见。 `list`是一个对象数组，因此当您键入时，`list[rand]`您将返回其中一个对象。一旦你有了一个对象，你只需要使用点符号来访问你需要的任何属性，在这种情况下是`desc`或`answer`。

所以而不是

`var question = prompt("What kind of equipment is " + list[rand] + "?");`

尝试

`var question = prompt("What kind of equipment is " + list[rand].desc + "?");`

将您尝试访问的属性放置在括号*之外。*这也解决了您的第二个问题，只需更改：

```
if (question == list[rand.answer]) {
    alert("Correct, Answer: " + list[rand.answer] + ", a " + list[rand.desc] + "!"); 
```

至：

```
if (question == list[rand].answer) {
    alert("Correct, Answer: " + list[rand].answer + ", a " + list[rand].desc + "!"); 
```

[这个小提琴](http://jsfiddle.net/ujJ4n/)将有助于演示。

# jquery - jQuery没有注册点击

> ID：16205841
> 
> 赞同：0
> 
> 时间：2013-04-25T03:24:22.747
> 
> 标签：jquery, dynamic

我遇到的问题是我可以单击我的元素开始并且一切都相应地工作，但是在我按 S 键从 textarea->paragraph 更改我的元素后，我不能再单击并且没有单击注册。

```
$(document).ready(function() {
    $('#dynamic').click(function() {
        log('`Clicked`');
        var text = $('#dynamic').text();
        $('#dynamic').replaceWith('<textarea id="dynamic">' + text + '</textarea>');
    });

    $(document).keydown(function(e) {
        log(e.which);
        switch(e.which) {
            // S key
            case 83:
                if ($('#dynamic').is('textarea')) {
                    var text = $('#dynamic').val();
                    $('#dynamic').replaceWith('<p id="dynamic">' + text + '</p>');
                }
                break;
            default: return;
        }
        e.preventDefault();
    });
}); 
```

这是我正在使用的代码，它注册了第一次点击，而不是元素转换后的第二次点击。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T03:26:35.593

返回的元素`$('#dynamic')`不再存在。您必须使用事件委托来绑定事件处理程序：

```
$(document).on('click', '#dynamic', function() {
    ...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T03:29:21.403

当您替换原始元素时，它会*消失*- 以及直接绑定到它的任何处理程序。您可以在重新创建处理程序时再次重新绑定处理程序，或者您可以使用委托事件处理程序，在这种情况下，您可能需要添加一个关于元素是否已经是 textarea 的测试：

```
$(document).on('click', '#dynamic', function() {
    if (this.tagName === "TEXTAREA") return; // already a textarea, so no action needed
    log('`Clicked`');
    var text = $('#dynamic').text();
    $('#dynamic').replaceWith('<textarea id="dynamic">' + text + '</textarea>');
}); 
```

# java - Java循环效率

> ID：16205843
> 
> 赞同：11
> 
> 时间：2013-04-25T03:24:38.837
> 
> 标签：java, performance, for-loop, while-loop, do-while

我正在比较 Java 中嵌套 for、while 和 do-while 循环的效率，我遇到了一些需要帮助理解的奇怪结果。

```
public class Loops {
    public static void main(String[] args) {
        int L = 100000;    // number of iterations per loop
        // for loop
        double start = System.currentTimeMillis();
        long s1 = 0;
        for (int i=0; i < L; i++) {
            for (int j = 0; j < L; j++) {
                s1 += 1;
            }
        }
        double end = System.currentTimeMillis();
        String result1 = String.format("for loop: %.5f", (end-start) / 1000);
        System.out.println(s1);
        System.out.println(result1);

        // do-while loop
        double start1 = System.currentTimeMillis();
        int i = 0;
        long s2 = 0;
        do {
            i++;
            int j = 0;
            do {
                s2 += 1;
                j++;
            } while (j < L);
        } while (i < L);
        double end1 = System.currentTimeMillis();
        String result2 = String.format("do-while: %.5f", (end1-start1) / 1000);
        System.out.println(s2);
        System.out.println(result2);

        // while loop
        double start2 = System.currentTimeMillis();
        i = 0;
        long s3 = 0;
        while (i < L) {
            i++;
            int j = 0;
            while (j < L) {
                s3 += 1;
                j++;
            }
        }
        double end2 = System.currentTimeMillis();
        String result3 = String.format("while: %.5f", (end2-start2) / 1000);
        System.out.println(s3);
        System.out.println(result3);
    }
} 
```

所有循环各自的计数器总和为 100 亿；结果让我感到困惑：

for 循环：6.48300

执行时间：0.41200

而：9.71500

为什么 do-while 循环这么快？这种性能差距与对 L 的任何更改并行扩展。我已经独立运行这些循环并且它们执行相同。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-05-09T13:59:23.793

我已经运行了您提供的代码，并且惊讶地发现这些性能差异。出于好奇，我开始调查并发现尽管这些循环似乎在做同样的事情，但它们之间还是有一些重要的区别。

第一次运行这些循环后我的结果是：

```
for loop: 1.43100
do-while: 0.51300
while: 1.54500 
```

但是当我运行这三个循环至少 10 次时，每个循环的性能几乎相同。

```
for loop: 0.43200
do-while: 0.46100
while: 0.42900 
```

JIT 能够随着时间的推移优化这些循环，但一定有一些不同之处导致这些循环具有不同的初始性能。其实其实有两个区别：

*   **循环进行的`do-while`比较少于`for`and`while`循环**

为简单起见，假设 L = 1

```
long s1 = 0;
for (int i=0; i < L; i++) {
    for (int j = 0; j < L; j++) {
        s1 += 1; 
```

外循环：0 < 1
内循环：0 < 1
内循环：1 < 1
外循环：1 < 1

共 4 次比较

```
int i = 0;
long s2 = 0;
do {
    i++;
    int j = 0;
    do {
        s2 += 1;
        j++;
    } while (j < L);
} while (i < L); 
```

内循环：1 < 1
外循环：1 < 1

共 2 次比较

*   **不同生成的字节码**

为了进一步调查，我稍微改变了你的课程，而不影响它的工作方式。

```
public class Loops {
    final static int L = 100000; // number of iterations per loop

    public static void main(String[] args) {
        int round = 10;
        while (round-- > 0) {
            forLoop();
            doWhileLoop();
            whileLoop();
        }
    }

    private static long whileLoop() {
        int i = 0;
        long s3 = 0;
        while (i++ < L) {
            int j = 0;
            while (j++ < L) {
                s3 += 1;
            }
        }
        return s3;
    }

    private static long doWhileLoop() {
        int i = 0;
        long s2 = 0;
        do {
            int j = 0;
            do {
                s2 += 1;
            } while (++j < L);
        } while (++i < L);
        return s2;
    }

    private static long forLoop() {
        long s1 = 0;
        for (int i = 0; i < L; i++) {
            for (int j = 0; j < L; j++) {
                s1 += 1;
            }
        }
        return s1;
    }
} 
```

然后对其进行编译并调用`javap -c -s -private -l Loop`以获取字节码。

首先是 doWhileLoop 的字节码。

```
 0:   iconst_0        // push the int value 0 onto the stack
   1:   istore_1        // store int value into variable 1 (i)
   2:   lconst_0        // push the long 0 onto the stack
   3:   lstore_2        // store a long value in a local variable 2 (s2)
   4:   iconst_0        // push the int value 0 onto the stack
   5:   istore  4   // store int value into variable 4 (j)
   7:   lload_2     // load a long value from a local variable 2 (i)
   8:   lconst_1        // push the long 1 onto the stack
   9:   ladd        // add two longs
   10:  lstore_2        // store a long value in a local variable 2 (i)
   11:  iinc    4, 1    // increment local variable 4 (j) by signed byte 1
   14:  iload   4   // load an int value from a local variable 4 (j)
   16:  iload_0     // load an int value from a local variable 0 (L)
   17:  if_icmplt   7   // if value1 is less than value2, branch to instruction at 7
   20:  iinc    1, 1    // increment local variable 1 (i) by signed byte 1
   23:  iload_1     // load an int value from a local variable 1 (i)
   24:  iload_0     // load an int value from a local variable 0 (L)
   25:  if_icmplt   4   // if value1 is less than value2, branch to instruction at 4
   28:  lload_2     // load a long value from a local variable 2 (s2)
   29:  lreturn     // return a long value 
```

现在 whileLooP 的字节码：

```
 0:   iconst_0        // push int value 0 onto the stack
   1:   istore_1        // store int value into variable 1 (i)
   2:   lconst_0        // push the long 0 onto the stack
   3:   lstore_2        // store a long value in a local variable 2 (s3)
   4:   goto        26
   7:   iconst_0        // push the int value 0 onto the stack
   8:   istore  4   // store int value into variable 4 (j)
   10:  goto        17
   13:  lload_2     // load a long value from a local variable 2 (s3)
   14:  lconst_1        // push the long 1 onto the stack
   15:  ladd        // add two longs
   16:  lstore_2        // store a long value in a local variable 2 (s3)
   17:  iload   4   // load an int value from a local variable 4 (j)
   19:  iinc    4, 1    // increment local variable 4 (j) by signed byte 1
   22:  iload_0     // load an int value from a local variable 0 (L)
   23:  if_icmplt   13  // if value1 is less than value2, branch to instruction at 13
   26:  iload_1     // load an int value from a local variable 1 (i)
   27:  iinc    1, 1    // increment local variable 1 by signed byte 1
   30:  iload_0     // load an int value from a local variable 0 (L)
   31:  if_icmplt   7   // if value1 is less than value2, branch to instruction at 7
   34:  lload_2     // load a long value from a local variable 2 (s3)
   35:  lreturn     // return a long value 
```

为了使输出更具可读性，我附加了注释，描述了基于[Java 字节码指令列表](http://en.wikipedia.org/wiki/Java_bytecode_instruction_listings)的每条指令的作用。

如果您仔细观察，您会发现这两个字节码之间有一个重要的区别。while 循环（for 循环也是如此`if_icmplt`）在字节码末尾定义了 if 语句（指令）。这意味着要检查第一个循环的退出条件，必须调用第 26 行的 goto，类似地，必须调用第二个循环的第 17 行的 goto。

上面的字节码是在 Mac OS X 上使用 javac 1.6.0_45 生成的。

**概括**

我认为不同数量的比较加上在 while 和 for 循环字节码中存在 goto 指令是导致这些循环之间的性能差异的原因。

# ruby-on-rails - Rails seems to be creating objects in wrong time zone for created_at, updated_at values

> ID：16205844
> 
> 赞同：7
> 
> 时间：2013-04-25T03:24:40.760
> 
> 标签：ruby-on-rails

I just created a new object using a form and its updated_at and created_at values are

```
created_at: "2013-04-25 03:22:19", updated_at: "2013-04-25 03:22:19", 
```

However that is ~7 hours ahead of where I am (PST).

```
Time.now.to_s
 => "2013-04-24 20:23:12 -0700" 
```

How can I make sure the time zone is consistent with wherever a user is creating it from?

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-25T06:27:13.543

您的`created_at`和`updated_at`值是从您的服务器写入数据库的，因此它们将始终位于您的服务器或应用程序的时区中。当服务器处理表单数据并保存到您的数据库时，它不知道浏览器的时区。

`config.time_zone`正如@lulalala 建议的那样，您可以使用 设置 Rails 时区。

听起来您有兴趣在他们的本地时区向用户显示时间。为此，您有两种选择：

*   在注册时向您的用户询问时区（或分配默认时区并允许用户对其进行编辑）

*   使用 javascript 检测时区并向您的服务器报告 ( [http://josephscott.org/archives/2009/08/detecting-client-side-time-zone-offset-via-javascript/](http://josephscott.org/archives/2009/08/detecting-client-side-time-zone-offset-via-javascript/) ) - 不保证正确

将时区保存为用户属性后，您可以像这样向用户显示您的时间：

```
Model.created_at.in_time_zone(@current_user.time_zone) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-27T19:57:49.873

`irb`我用命令检查时区，`> Time.now.to_s`时间是正确的，但应用程序将其保存错误 3 小时。所以..

我的解决方案是添加`config.time_zone = "Santiago"`到`config/environments/development.rb`文件中。时区列表在[这里](http://api.rubyonrails.org/classes/ActiveSupport/TimeZone.html)，我的条目是

```
"Santiago" => "America/Santiago" 
```

# django - The installed Boto library must be 2.4 or higher error when using django-storages on ec2

> ID：16205846
> 
> 赞同：3
> 
> 时间：2013-04-25T03:24:58.093
> 
> 标签：django, amazon-ec2, boto

I'm trying to connect to Amazon s3 from a Django application running on Amazon ec2 to upload and serve media files. I'm using [django-storages](http://django-storages.readthedocs.org/) to connect to s3 via the python boto library.

I can get this to work on my local machine using the django built in web server without a problem but when I deploy the project on Amazon ec2 I get the following error:

```
ImproperlyConfigured
The installed Boto library must be 2.4 or higher.
See https://github.com/boto/boto 
```

I'm running my application in a virtual environment and I have confirmed that the version of boto installed is 2.9\. I've confirmed that this is the version that django is accessing by running

```
python manage.py shell 
```

and importing boto then printing the version.

Here is the relevant snippet of my settings.py:

```
DEFAULT_FILE_STORAGE = 'storages.backends.s3boto.S3BotoStorage'
MEDIA_ROOT = ''
MEDIA_URL = '/media/' 
```

# scala - 在 listView 中添加 TextField 并使用 wicket 1.4 在退出时更新模型

> ID：16205848
> 
> 赞同：0
> 
> 时间：2013-04-25T03:25:01.887
> 
> 标签：scala, wicket, wicket-1.4

我正在尝试在 listView 中添加 TextField ，它可以在退出时更新模型或在更新其上的文本之后。

我已经收到了一个[很好的](https://stackoverflow.com/a/16147101/220175)解决方案，但它似乎适用于 wicket 6.7.0，我猜？

```
import org.apache.wicket.ajax.attributes.{ThrottlingSettings, AjaxRequestAttributes}

 val detail = new TextField("detail", new PropertyModel[Meeting](meeting, "description"))
      detail.add(new AjaxFormComponentUpdatingBehavior(("keyup")) {
        protected def onUpdate(target: AjaxRequestTarget) {
          meeting.salvarMeetingInfo(meeting)
        }

        protected override def updateAjaxAttributes(attributes: AjaxRequestAttributes) {
          attributes.setThrottlingSettings(new ThrottlingSettings("thr", Duration.milliseconds(800.0)))
          super.updateAjaxAttributes(attributes)
        }
})
item.add(detail)

//Error messages
      scala: object attributes is not a member of package org.apache.wicket.ajax
import org.apache.wicket.ajax.attributes.{ThrottlingSettings, AjaxRequestAttributes}

                              ^

scala: not found: type AjaxRequestAttributes
        protected override def updateAjaxAttributes(attributes: AjaxRequestAttributes) {
                                                            ^ 
```

但是我需要使用wicket 1.4，那么对于wicket 1.4，上面的代码有类似的实现或解决方案吗？

感谢有人可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T03:54:00.567

1.4中没有`updateAjaxAttributes`方法调用方法`setThrottleDelay`来代替行为。[有关详细信息，请参阅](http://wicket.apache.org/apidocs/1.4/org/apache/wicket/ajax/AjaxEventBehavior.html#setThrottleDelay%28org.apache.wicket.util.time.Duration%29)文档。

# python - 将新的非重复记录从数据库 B 添加到数据库 A 的最快方法（两者都很大）

> ID：16205851
> 
> 赞同：2
> 
> 时间：2013-04-25T03:25:10.023
> 
> 标签：python, memory-management, duplicate-removal

有两个 sqlite 数据库 A 和 B，都包含 10+ 百万行。任务是读取 B 中的所有记录并将这些新记录添加到 A 中，如果它们不存在的话。

A中没有重复，但B中有很多重复。

我发现这是一项棘手的工作，因为当 A 和 B 都只包含大约 100 万行时，我所做的就是：

```
list_from_A = read all rows into a list from database A
list_from_B = read all rows into a list from database B

no_dupe_list = list(set(list_from_A) - set(list_from_B))

append no_dupe_list into database A 
```

现在由于这两个数据库太大而无法全部读入内存，所以我在执行此操作时经常遇到 MemoryError，实际上发生这种情况时只使用了 2G 内存，而我的 win 7 64 位总共有 16G RAM，所以顺便说一下让python充分利用这一点的想法吗？

无论如何，基本上我必须将数据库 B 分成几个部分来完成这项工作，这更加无效，因为 B 中已经有很多重复项，并且它们最终被分成不同的部分，每次与数据库 A 进行比较时都会处理这些部分，那么有没有更快的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T10:58:41.907

可以在两个数据库中为有序 SELECT 制作游标，并通过游标记录“并行”（如在合并排序中）并在数据库 A 中插入缺失的行。最好先将它们插入临时表中，而不是混淆游标并且不需要内存使用（2行除外。）

喜欢：

```
ca = db_a.cursor("SELECT ....")
cb = db_b.cursor("SELECT ....")
ra = ca.fetch_row()
rb = cb.fetch_row()
while ra and rb:
  if ra <= rb:
    last_row_in_new_A = ra
    ra = ca.fetch_row()
  else:  # rb < ra
    if rb != last_row_in_new_A:  # Removes possible duplicates
      insert row rb
      last_row_in_A = rb
    rb = cb.fetch_row()
# Insert remaining rows from B
while rb:
  if rb != last_row_in_new_A:
    insert row rb
    last_row_in_new_A = rb
  rb = cb.fetch_row() 
```

# jquery - 添加后删除列表项

> ID：16205854
> 
> 赞同：1
> 
> 时间：2013-04-25T03:25:23.400
> 
> 标签：jquery

我有以下代码，

```
 $('.button').click(function(){
    var inputItem = $('.listItem').val();
    $('.thelist').append('<li class="item">'+inputItem+'</li><span        class="delete">delete</span>');    
});

 //TRYING TO REMOVE THE ITEM
 $(document).on('click','.delete',function(){
    $(this).remove(function(){
        $('.item').remove();
    });
 }); 
```

我对 jQuery 还是很陌生，谁能指出我正确的方向。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T03:30:15.360

你可能想做这样的事情：

```
var $delete = $('<span>', {
    'class': 'delete',
    'text': 'delete'
});

$('.button').click(function () {
    $('<li>', {
        'class': 'item',
        'html': $('.listItem').val()
    }).append($delete.clone()).appendTo('.thelist');
});

$('.thelist').on('click', '.delete', function() {
    $(this).parent().remove();
}); 
```

您可以忽略我所做的其他更改，但这`$(this).parent().remove();`会删除`<li>`与`<span>`.

`$(this).closest('li.item').remove();`即使`<span>`不是 的孩子也可以工作`<li>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T03:33:11.370

您好，如果满足您的查询，请查看此代码段：

```
var index=0;   //mock index variable
$('button').click(function (e){
   $('#theList').append('<span><li class="delete">hello world ' + index+ '</li></span>' ); 
    e.stopPropagation();   //stop bubbling of event

    index= index+1;
});

$(document).click(function (){ //click anywhere but the button and all <li> items disappear.
   $('.delete').remove();
}); 
```

您可以查看此[jsFiddle 链接](http://jsfiddle.net/KevinIsNowOnline/waGT2/)以获取更多信息。

# css - 引导媒体对象 - 当媒体标题很长时修复浮动按钮换行

> ID：16205855
> 
> 赞同：0
> 
> 时间：2013-04-25T03:25:33.027
> 
> 标签：css, twitter-bootstrap, position, css-float, user-experience

我正在使用[Twitter Bootstrap 的媒体对象](http://twitter.github.io/bootstrap/components.html#media)样式作为我们在各种社交网络上的用户配置文件。非常标准的布局：左侧的头像/徽标，右侧的标题和简短描述（抱歉，没有足够的代表提供图像，但请参阅下面的 jsfiddle）。

**我陷入困境的地方**：我需要在媒体标题旁边包含一个“关注”按钮，但我不知道如何正确定位它以处理长媒体标题（按钮包裹到媒体正文）。

怀疑我正走向面对面的时刻。

这是一个说明这两种情况的[jsfiddle](http://jsfiddle.net/jR3Kf/3/)。

这是我的 HTML：

```
<div class="row">
  <div class="span8 media top-buffer">
    <div class="row">
        <p class="media-object pull-left span2">
            <img class="img-polaroid" src="160x120.jpg">
        </p>
        <div class="media-body span6">
             <h3 class="media-heading">Some Name<i class="icon-circle addToFoo-yes-org"></i> <button class="addToFoo-org btn btn-flat pull-right"><i class="icon-plus-sign"></i> Add to My Foo</button><br />
            </h3>

            <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.</p>
        </div>
    </div>
</div> 
```

请注意，这是一个原型，我坚定地属于 n00b 类别，所以请原谅我的 janky 标记（特别是 i 元素的过分使用）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T04:34:11.233

添加一个`clearfix`类到`h3.media-heading`.

```
<h3 class="media-heading clearfix"> 
```

# python - 如何在kivy中使用阻塞MessgeBox

> ID：16205860
> 
> 赞同：0
> 
> 时间：2013-04-25T03:26:06.460
> 
> 标签：python, qt4, kivy, blocking

我有一个 Kivy 应用程序。

在主 GUI 中，我想打开一个新消息框并强制主 GUI 等待操作框交互的结果。

我看到 Qt4 消息框支持这种阻塞调用类型，但是我在 Kivy 中没有找到等效的功能。有这样的功能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T03:34:00.330

Popup 小部件用于创建**模式**弹出窗口。默认情况下，弹出窗口将覆盖整个“父”窗口。创建弹出窗口时，您必须至少设置一个 Popup.title 和一个 Popup.content 小部件。

模态意味着阻塞:)

[http://kivy.org/docs/api-kivy.uix.popup.html](http://kivy.org/docs/api-kivy.uix.popup.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-12T00:03:20.423

这是一个可以完成这项工作的代码片段，尽管它实际上并没有真正阻塞。您需要定义一个或两个可供跳转的选项，以便继续使用该程序。这就是伪阻塞技巧。

```
import kivy
from kivy.uix.popup import Popup
from kivy.uix.button import Button
from kivy.uix.gridlayout import GridLayout
from kivy.uix.boxlayout import BoxLayout
from kivy.uix.label import Label
from kivy.app import App

class MessageBoxApp(App):

    def build(self):
        return Button(text='Press for MessageBox!', on_press=self.callpopup)

    def callpopup(self, event):
        dlg = MessageBox(self, titleheader="Title Header", message="Any Message", 
        options={"YES": "printyes()", "NO": "printno()", "CANCEL": ""})
        print "Messagebox shows as kivy popup and we wait for the user action"

    def printyes(self):
        # routine for going yes
        print "You chose the Yes routine"

    def printno(self):
        # routine for going no
        print "You chose the No routine"

class MessageBox(MessageBoxApp):
    def __init__(self, parent, titleheader="Title", message="Message", options={"OK": ""}, size=(400, 400)):

        def popup_callback(instance):
            "callback for button press"
            self.retvalue = instance.text
            self.popup.dismiss()

        self.parent = parent
        self.retvalue = None
        self.titleheader = titleheader
        self.message = message
        self.options = options
        self.size = size
        box = GridLayout(orientation='vertical', cols=1)
        box.add_widget(Label(text=self.message, font_size=16))
        b_list =  []
        buttonbox = BoxLayout(orientation='horizontal')
        for b in self.options:
            b_list.append(Button(text=b, size_hint=(1,.35), font_size=20))
            b_list[-1].bind(on_press=popup_callback)
            buttonbox.add_widget(b_list[-1])
        box.add_widget(buttonbox)
        self.popup = Popup(title=titleheader, content=box, size_hint=(None, None), size=self.size)
        self.popup.open()
        self.popup.bind(on_dismiss=self.OnClose)

    def OnClose(self, event):
        self.popup.unbind(on_dismiss=self.OnClose)
        self.popup.dismiss()
        if self.retvalue != None and self.options[self.retvalue] != "":
            command = "self.parent."+self.options[self.retvalue]
            exec command

if __name__ == '__main__':
    MessageBoxApp().run() 
```

# sql - 如何在 VB.NET 上执行存储过程

> ID：16205863
> 
> 赞同：2
> 
> 时间：2013-04-25T03:26:36.853
> 
> 标签：sql, vb.net, stored-procedures

```
CREATE PROCEDURE DeletetblOfficeEquipmentProfileRecord
@OE_ID  varchar(11)
AS
BEGIN
DELETE FROM [EOEMS].[dbo].[tblOfficeEquipmentProfile]
WHERE [OE_ID]=@OE_ID
END
RETURN
GO 
```

以上是我的sql存储过程我将如何在vb.net 2003中执行

此 SP 用于根据在文本框中选择的 OE_ID 删除记录

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T04:16:05.793

您需要以下代码来执行存储过程

```
Imports System.Data.SqlClient

Dim conn as New SqlConnection(YourConnectionString)
Dim cmd as SqlCommand = conn.createcommand
conn.open()
cmd.CommandType = CommandType.StoreProcedure
cmd.Parameters.Add(New SqlParameter("@OE", YourValue)
cmd.CommandText = DeletetblOfficeEquipmentProfileRecord
cmd.ExecuteNonQuery() 
conn.close() 
```

# c# - 在 C# 中，如果我的对象支持该接口，我如何检查 T 是否属于 IInterface 类型并转换为该类型？

> ID：16205864
> 
> 赞同：19
> 
> 时间：2013-04-25T03:26:41.370
> 
> 标签：c#, generics, interface

在 C# 中，我有一个传入`T`using的函数，`generics`我想运行检查以查看是否`T`是`object`实现 a 的`interface`，如果是，则调用`methods`on that中的一个`interface`。

我不想`T`限制只能属于那种类型。是否有可能做到这一点？

例如：

```
public class MyModel<T> : IModel<T> where T : MyObjectBase
{
    public IQueryable<T> GetRecords()
    {
        var entities = Repository.Query<T>();
        if (typeof(IFilterable).IsAssignableFrom(typeof(T)))
        {
            //Filterme is a method that takes in IEnumerable<IFilterable>
            entities = FilterMe(entities));
        }
        return entities;
    }

    public IEnumerable<TResult> FilterMe<TResult>(IEnumerable<TResult> linked) where TResult : IFilterable
    {
        var dict = GetDict();
        return linked.Where(r => dict.ContainsKey(r.Id));
    }
 } 
```

我得到的错误是：

**错误 21 类型“TResult”不能用作泛型类型或方法“FilterMe(System.Collections.Generic.IEnumerable)”中的类型参数“TResult”。没有从“TResult”到“IFilterable”的隐式引用转换。**

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-25T03:53:45.723

缺少的部分是`Cast<>()`：

```
if(typeof(IFilterable).IsAssignableFrom(typeof(T))) {
    entities = FilterMe(entities.Cast<IFilterable>()).AsQueryable().Cast<T>();
} 
```

请注意使用`Cast<>()`将实体列表转换为正确的子类型。除非`T`implements否则这个转换会失败`IFilterable`，但由于我们已经检查过，我们知道它会失败。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-04-25T03:27:37.097

```
if (typeof(IMyInterface).IsAssignableFrom(typeof(T)) 
```

`IMyInterface`这将检查是否可以从 type 的实例分配type 的变量`T`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-26T15:12:55.850

如果您有一个可能实现也可能不实现的泛型类型参数，则`IFoo`可以将`as`其强制转换为 type 的存储位置`IFoo`；如果你这样做，你可以将它传递给任何需要一个 的方法`IFoo`，以及任何需要一个泛型参数约束到的方法`IFoo`，但是如果你这样做，你将丢失所有泛型类型信息——参数将作为类型传递`IFoo`. 除此之外，这意味着如果您的原始对象是一个结构，它将被装箱。

如果您希望测试泛型参数类型是否实现`IFoo`并调用一个采用泛型约束的方法`IFoo`，同时保持原始泛型类型（如果类型是结构，这可能很有用，如果类型被传递给一个具有`IFoo`和`IBar`约束的泛型方法，并且可能想要传递的东西不共享任何单一的公共超类型），则有必要使用反射。

例如，假设一个人想要一个方法`Zap`，它接受一个泛型参数，如果它实现了就`ref`调用它，然后清除它。如果参数是类类型，则应将空测试作为原子操作执行，并清除参数。`Dispose``IDisposable``IDisposable`

```
public static class MaybeDisposer
{
    static class ClassDisposer<T> where T : class,IDisposable
    {
        public static void Zap(ref T it)
        {
            T old_it = System.Threading.Interlocked.Exchange(ref it, null);
            if (old_it != null)
            {
                Console.WriteLine("Disposing class {0}", typeof(T));
                old_it.Dispose();
            }
            else
                Console.WriteLine("Class ref {0} already null", typeof(T));
        }
    }
    static class StructDisposer<T> where T : struct,IDisposable
    {
        public static void Zap(ref T it)
        { 
            Console.WriteLine("Disposing struct {0}", typeof(T));
            it.Dispose();
            it = default(T);
        }
    }
    static class nonDisposer<T>
    {
        public static void Zap(ref T it)
        {
            Console.WriteLine("Type {0} is not disposable", typeof(T));
            it = default(T);
        }
    }
    class findDisposer<T>
    {
        public static ActByRef<T> Zap = InitZap;
        public static void InitZap(ref T it)
        {
            Type[] types = {typeof(T)};
            Type t;
            if (!(typeof(IDisposable).IsAssignableFrom(typeof(T))))
                t = typeof(MaybeDisposer.nonDisposer<>).MakeGenericType(types);
            else if (typeof(T).IsValueType)
                t = typeof(MaybeDisposer.StructDisposer<>).MakeGenericType(types);
            else
                t = typeof(MaybeDisposer.ClassDisposer<>).MakeGenericType(types);
            Console.WriteLine("Assigning disposer {0}", t);
            Zap = (ActByRef<T>)Delegate.CreateDelegate(typeof(ActByRef<T>), t, "Zap");
            Zap(ref it);
        }
    }
    public static void Zap<T>(ref T it)
    {
        findDisposer<T>.Zap(ref it);
    }
} 
```

第一次使用任何类型调用代码时`T`，它将确定可以为该参数生成哪种泛型静态类，并使用反射创建一个委托来调用该泛型类的静态方法。具有相同类型的后续调用`T`将使用缓存的委托。尽管反射可能有点慢，但对于任何类型，它只需要使用一次`T`。`MaybeDisposer.Zap<T>(ref T it)`所有具有相同类型的后续调用`T`将直接通过委托分派，因此将快速执行。

请注意，`MakeGenericType`如果给定的泛型类型参数不满足给定的开放泛型类的约束，则调用将引发异常（例如，如果`T`是类或未实现`IDisposable`，则尝试创建泛型类型`StructDisposer<T>`将引发异常） ; 此类测试发生在运行时，编译器不会对其进行验证，因此您可以使用运行时检查来查看类型是否满足适当的约束。请注意，代码不测试是否`it`实现`IDisposable`，而是测试是否`T`实现。这个非常重要。否则，如果使用包含对a 的引用`MaybeDispose`的类型参数调用，它将确定已实现并因此尝试创建一个`Object``Stream``it``IDisposable``ClassDisposer<Object>``Object`，因为没有实现而崩溃`IDisposable`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-02T15:16:32.683

我能想出的最简单的形式是：

```
public IEnumerable<T> GetRecords()
{
    IQueryable<T> entities = new List<T>().AsQueryable();

    if (typeof(IFilterable).IsAssignableFrom(typeof(T)))
    {
        entities = FilterMe<IFilterable, T>(entities.OfType<IFilterable>()).AsQueryable();
    }

    return entities;
}

public IEnumerable<TResult> FilterMe<TSource, TResult>(IEnumerable<TSource> linked) where TSource : IFilterable
{
    return linked.Where(r => true).OfType<TResult>();
} 
```

这里的重点是需要有类型可以传入和退出该方法。我必须在本地更改类型才能使其正常工作。

`OfType`将默默地过滤掉不是真正属于给定类型的项目，因此它假定它在任何一次调用中都是相同类型的集合。

因为您是从 重新分配`FilterMe`，所以您仍然需要接口可分配检查。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-29T20:10:45.770

`OfType(...)`方法（[链接](http://msdn.microsoft.com/en-us/library/bb360913.aspx)）是你要找的吗？

```
public class MyModel<T> : IModel<T> where T : MyObjectBase
{

    public IQueryable<T> GetRecords()
    {
        var entities = Repository.Query<T>();
        if (typeof(IFilterable).IsAssignableFrom(typeof(T)))
        {
            //Filterme is a method that takes in IEnumerable<IFilterable>
            entities = FilterMe(entities));
        }
        return entities;
    }

     public IEnumerable<TResult> FilterMe<TResult>(IEnumerable<TResult> linked) where TResult :  IFilterable
    {
        var dict = GetDict();
        return linked.OfType<TResult>().Where(r => dict.ContainsKey(r.Id));
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-05-01T13:36:47.330

在我的回答中，我假设该方法`FilterMe`在内部使用，不应该在您的模型之外可见，并且可以标记为`private`. 如果我的假设是错误的，您可以创建一个私有重载`FilterMe`.

在我的回答中，我刚刚删除了通用的`<TResult>`. 我假设这`FilterMe`总是关于类型的实体`T`（因为它在同一个模型类中）。这解决了在`T`和之间进行转换的问题`TResult`。`TResult`不必标记为，`IFilterable`因为没有使用 的成员`IFilterable`。既然代码已经检查`T`了`IFilterable`为什么要再次检查（特别是什么时候`FilterMe`是私有的）？

```
 public IQueryable<T> GetRecords()
    {
        var entities = Repository.Query<T>();
        if (typeof(IFilterable).IsAssignableFrom(typeof(T)))
        {
            //Filterme is a method that takes in IEnumerable<IFilterable>
            entities = FilterMe(entities).AsQueryable();
        }
        return entities;
    }

    public IEnumerable<T> FilterMe(IEnumerable<T> linked) 
    {
        var dict = GetDict();
        return linked.Where(r => dict.ContainsKey(r.Id));
    } 
```

如果您要创建第二个`FilterMe`，请将 `IEumerable<T>`类型替换为`Queryable<T>`，因此您不必将实体转换为`AsQueryable()`。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-05-03T20:23:01.810

```
public IEnumerable<TResult> FilterMe<TResult>(IEnumerable<TResult> linked) where TResult : IFilterable
{
    var dict = GetDict();
    return linked.Where(r => dict.ContainsKey(r.Id));
} 
```

尝试用这个版本替换 FilterMe：

```
public IEnumerable<T> FilterMe(IEnumerable<IFilterable> linked)
{
    var dict = GetDict();
    return linked.Where(r => dict.ContainsKey(r.Id)).Cast<T>();
} 
```

然后，如果您打电话，请将您的代码更改为：

```
if (typeof(IFilterable).IsAssignableFrom(typeof(T)))
{
    //Filterme is a method that takes in IEnumerable<IFilterable>
    var filterable = entities.Cast<IFilterable>();
    entities = FilterMe(entities).AsQueryable();
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-05-04T18:02:53.290

您不必使该`FilterMe`方法成为通用方法即可获得相同的结果。

```
 public class MyModel<T> : IModel<T> where T : MyObjectBase {
        public IQueryable<T> GetRecords()
    {
        var entities = Repository.Query<T>();
        if (typeof(IFilterable).IsAssignableFrom(typeof(T)))
        {
            //Filterme is a method that takes in IEnumerable<IFilterable>
            entities = FilterMe(entities.Cast<IFilterable>());
        }
        return entities;
    }

        public IEnumerable<T> FilterMe(IEnumerable<IFilterable> linked)  {
            var dict = GetDict();
            return linked
                    .Where(r => dict.ContainsKey(r.Id))
                    .Cast<T>();
        }
    } 
```

# compilation - 如何创建将创建两个单独的可执行文件的 makefile？

> ID：16205867
> 
> 赞同：0
> 
> 时间：2013-04-25T03:26:52.003
> 
> 标签：compilation, makefile

我对 makefile 非常陌生，并且使用了一个为项目提供给我们的文件，并且我正在对其进行一些扩展。

这个 makefile 当前有一个 arg，即您要制作的可执行文件的名称。在下面的代码中，该命令`make shapes`将为我创建一个名为`shapes`.

```
GCC_OPTIONS=-Wall -pedantic -I include
GL_OPTIONS=-lGLEW -lGL -lglut
OPTIONS=$(GCC_OPTIONS) $(GL_OPTIONS)

.cpp:
    g++ $@.cpp Common/InitShader.o $(OPTIONS) -o $@ 
```

现在我对我的项目所做的是创建它的副本并更改一些数据以查看它将如何影响程序的输出。原版被称为`shapes.cpp`，另一个版本被称为`shapes2.cpp`。

我尝试的是在当前 g++ 行下添加以下行，但无济于事。我试图硬编码文件名的“2”部分，可能是错误的。

```
g++ $@2.cpp Common/InitShader.o $(OPTIONS) -o $@2 
```

谁能帮我想出一个解决方案？同样，我有 2 个单独的 cpp 文件，我想将它们编译为两个单独的可执行文件。更改makefile以对文件名进行硬编码没有问题，但我有点不确定如何做到这一点。

编辑：这也行不通有什么原因吗？它抱怨它在第 13 行缺少一个分隔符，在那里它编译了第二个程序。

```
GCC_OPTIONS=-Wall -pedantic -I include 
```

GL_OPTIONS=-lGLEW -lGL -lglut 选项=$(GCC_OPTIONS) $(GL_OPTIONS)

```
.PHONY: all original modified

all: original modified

original:
    g++ shapes.cpp Common/InitShader.o $(OPTIONS) -o shapes

modified:
    g++ shapes2.cpp Common/InitShader.o $(OPTIONS) -o shapes2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T03:35:14.283

在“.cpp:”行上方，添加以下内容：

```
shapes: shapes2 
```

现在该命令`make shapes`将生成两者（假设源文件存在且正确）。

# javascript - 了解javascript中的构造函数属性

> ID：16205876
> 
> 赞同：0
> 
> 时间：2013-04-25T03:28:56.023
> 
> 标签：javascript

似乎我不明白这个`constructor`概念，所以，我写了一些代码来测试它。假设你有这样的代码：

```
var test=function(){...} 
```

我知道对象中有一个指向该`constructor`对象的属性。`test.prototype``test`

我的问题来了：

这个属性（`constructor`）是否只属于原型对象？还是所有对象都具有该`constructor`属性？

我做了另一个测试。如下代码：

```
 function Shape() {
              this.x = 0;
              this.y = 0;
            }

            Shape.prototype.move = function(x, y) {
                this.x += x;
                this.y += y;
                console.info("Shape moved.");
            };

            Rectangle = Object.create(Shape);//inherit from the Shape instead of Shape.prototype
            Rectangle.constructor==Function//it is true. 
```

我不知道它是`Rectangle.constuctor`从哪里来的还是继承自`Shape`? 谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T03:30:41.763

`Object.create`返回一个对象，其原型是您传递给它的对象。

因此，由于`Shape.constructor`is `Function`(`Shape`是一个`Function`对象)，`Rectangle`继承了它。

# c++ - 在没有 GUI 的情况下使用 Qt for iOS（仍然使用本机 Cocoa Touch）？

> ID：16205879
> 
> 赞同：1
> 
> 时间：2013-04-25T03:29:03.103
> 
> 标签：c++, ios, objective-c, qt

我有一个用 Qt 编写的服务器（主要是因为我需要使用 Qt 加密包），我想将它移植到 iOS。我已经检查了 Qt4iOS 项目，并且能够将我的服务器编译成一个`.a`库。但是，我仍然想使用应用程序的原生 Cocoa Touch (Obj-C) 界面。我只想能够从应用程序启动服务器并使用它。

我不太确定该怎么做...我应该在我`qt_main`的? Qt4iOS 对完全是 Qt 的应用程序有说明。您链接文件并删除其他所有内容，它将起作用。但是如果我不使用 Qt GUI 怎么办？`main``ViewController``.a`

非常感谢！

# wpf - WPF中如何自定义CheckBox的样式

> ID：16205880
> 
> 赞同：1
> 
> 时间：2013-04-25T03:29:03.900
> 
> 标签：wpf, templates, checkbox, styles

我刚开始学习WPF，所以我对样式和模板不熟悉。我想`CheckBox`用 a`Image`和两个自定义 a ，`Labels`如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/2viSa.jpg)

![在此处输入图像描述](https://i.stack.imgur.com/6fWGl.png)

我能怎么做？

.xaml

```
<Window x:Class="WpfApplication4.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">

    <StackPanel>
        <CheckBox Width="150" 
                  Height="40" 
                  Margin="4" 
                  Padding="4,0,0,0">
            <Grid Background="#FFEEEEEE" 
                  Width="130"
                  MaxWidth="Infinity">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <Image Grid.Row="0"
                       Grid.RowSpan="2"
                       Grid.Column="0"
                       Margin="5" 
                       Source="/WpfApplication4;component/Images/LargeIcon.png" />
                <Label Grid.Row="0"
                       Grid.Column="1" 
                       Padding="0">
                    Label1
                </Label>
                <Label Grid.Row="1"
                       Grid.Column="1" 
                       Padding="0">
                    Label2
                </Label>
            </Grid>
        </CheckBox>
    </StackPanel>
</Window> 
```

**编辑：**

.xaml

```
<Application x:Class="WpfApplication4.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2006" 
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             StartupUri="MainWindow.xaml">

    <Application.Resources>
        <Style x:Key="MyCheckBox" 
               TargetType="{x:Type CheckBox}">
            <Setter Property="Width" Value="150"/>
            <Setter Property="Height" Value="40"/>
            <Setter Property="Margin" Value="4"/>
            <Setter Property="Padding" Value="4,0,0,0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type CheckBox}">
                        <DockPanel Background="#FFEEEEEE" 
                                   Height="34"
                                   Width="130">
                            <Image DockPanel.Dock="Left"
                                   Source="/WpfApplication4;component/Images/LargeIcon.png"
                                   Margin="5" />
                            <TextBlock DockPanel.Dock="Top" Text="Label1" />
                            <TextBlock DockPanel.Dock="Top" Text="Label2" />
                        </DockPanel>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Application.Resources>
</Application> 
```

在 .xaml 中使用

```
<CheckBox Style="{StaticResource ResourceKey=MyCheckBox}" /> 
```

出现了一些东西，但是小网格消失了，像这样：

![在此处输入图像描述](https://i.stack.imgur.com/Yv44z.jpg)

我能怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T04:31:49.850

这`DockPanel`可能是此布局的最佳选择

例子：

```
<CheckBox>
   <DockPanel Height="34">
      <Image DockPanel.Dock="Left" Source="/WpfApplication4;component/Images/LargeIcon.png" Margin="2" />
      <TextBlock DockPanel.Dock="Top" Text="Label1" />
      <TextBlock DockPanel.Dock="Top" Text="Label2" />
   </DockPanel>
</CheckBox> 
```

## 编辑：

看起来您仍想使用默认值，`Checkbox` `Template`但只需覆盖`Content`.`Style`

例子：

```
<Style x:Key="MyCheckBox" TargetType="{x:Type CheckBox}">
    <Setter Property="Width" Value="150"/>
    <Setter Property="Height" Value="40"/>
    <Setter Property="Margin" Value="4"/>
    <Setter Property="Padding" Value="4,0,0,0"/>
    <Setter Property="Content">
        <Setter.Value>
            <DockPanel Background="#FFEEEEEE" Width="130"  MaxWidth="Infinity">
                <Image DockPanel.Dock="Left" Source="Capture.png" Margin="5" />
                <TextBlock DockPanel.Dock="Top" Text="Label1" />
                <TextBlock DockPanel.Dock="Top" Text="Label2" />
            </DockPanel>
        </Setter.Value>
    </Setter>
</Style> 
```

结果：

![在此处输入图像描述](https://i.stack.imgur.com/kGSw1.png)

# mysql - MySQL 将 3 个查询合并为 1 个

> ID：16205887
> 
> 赞同：0
> 
> 时间：2013-04-25T03:29:52.687
> 
> 标签：mysql

我正在尝试将 3 个 MySQL 查询合二为一。

这就是我用来获取我的新闻条目的内容（带有分页）：

```
SELECT A.sid,
       A.title,
       A.time,
       A.bodytext,
       A.author,
       A.url
FROM news A
INNER JOIN
  (SELECT sid
   FROM news
   WHERE approved=1
   ORDER BY sid DESC LIMIT $start, $limit) B USING (sid) 
```

现在，我最近添加了一个评论功能，并希望获得每个“sid”的评论总数

让我感到困惑的部分是我需要将“sid”（来自 news.news）与“page_id”（来自comments.pages）匹配以获取它的唯一“id”。

```
+----+---------+
| id | page_id |
+----+---------+
|  1 |      87 |
|  2 |      86 |
| 41 |      85 |
|  3 |      84 |
| 13 |      83 |
+----+---------+ 
```

现在有了那个唯一的“id”，我需要查询“comments.comments”并将其与“page_id”列匹配并计算（*）它有多少评论 - WHERE is_approved = 1

```
SELECT page_id,is_approved,count(*) FROM comments WHERE page_id = $id and is_approved = 1;
+---------+-------------+----------+
| page_id | is_approved | count(*) |
+---------+-------------+----------+
|       1 |           1 |        2 |
+---------+-------------+----------+ 
```

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T03:45:00.603

编辑了我的回复以符合更新后的问题：

```
SELECT A.sid, A.title, A.time, A.bodytext, A.author, A.url,
       D.page_id, D.num_comments 
FROM news.news A 
INNER JOIN (SELECT sid 
              FROM news 
             WHERE approved=1 
             ORDER BY sid desc 
             LIMIT $start, $limit) B USING (sid)
LEFT JOIN comments.pages C ON A.sid = C.id
LEFT JOIN (SELECT page_id,is_approved,count(*) as num_comments 
             FROM comments.comments 
            WHERE is_approved = 1) D ON C.page_id = D.page_id 
```

# php - 这可以用百分比而不是静态值来完成吗

> ID：16205896
> 
> 赞同：1
> 
> 时间：2013-04-25T03:30:43.767
> 
> 标签：php

好吧伙计们，基本上我有一些代码可以从一个`if`语句中工作，我想知道是否可以重新编码它以按百分比工作，这是当前代码

```
@sort($prices_array);
if ($prices_array[1] > 10000 AND $prices_array[1] < 50000) {
    $sell_at = $prices_array[1] - 250;
} elseif ($prices_array[1] > 50000 AND $prices_array[1] < 100000) {
    $sell_at = $prices_array[1] - 500;
} else {
    $sell_at = $prices_array[1] - 100;
}
$buy_at = $prices_array[1] - 1000;

if ($prices_array[1] >= 10000) {
    $buy_at = $buy_at - 1000;
    if ($prices_array[1] >= 20000) {
        $buy_at = $buy_at - 1000;
        if ($prices_array[1] >= 30000) {
            $buy_at = $buy_at - 1000;
        }
        if ($prices_array[1] >= 40000) {
            $buy_at = $buy_at - 1000;
        }
        if ($prices_array[1] >= 50000) {
            $buy_at = $buy_at - 750;
        }
        if ($prices_array[1] >= 60000) {
            $buy_at = $buy_at - 500;
        }
        if ($prices_array[1] >= 70000) {
            $buy_at = $buy_at - 500;
        }
    }
} 
```

我知道代码做得很糟糕，但是是否可以`$buy_at`从某个百分比开始计算，例如**比 5% 低，`sell_at`但四舍五入到`if`语句中的正确减量**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T04:10:45.203

首先，我认为`switch`这里的形式会更好。其次，您可以使用此函数将舍入设置为您想要的任何增量：

```
function roundUpTo($number, $increments) { 
    $increments = 1 / $increments; 
    return (ceil($number * $increments) / $increments); 
} 
```

要找到一个值的百分比，只需将该值乘以百分比除以 100。

# java - 在 c# 中使用 [java.util] 和 [java.lang] 使用 ikvm

> ID：16205898
> 
> 赞同：0
> 
> 时间：2013-04-25T03:30:56.100
> 
> 标签：java, c#-4.0, ikvm

我正在尝试通过 C# 访问一个 java 类，但我不确定如何传递所需的参数来实例化它。

我需要将 [java.util.Properties] 类型的对象传递给构造函数，并且我需要您输入我需要使用 IKVM 将哪些 jar/java 类文件转换为 dll ..

从 java 实现看来，我需要包含**java.util.dll**和**java.lang.dll**。任何帮助将不胜感激！

如果上面的描述不清楚，请告诉我！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T03:38:22.783

我必须在我的 c# 项目中引用 IKVm.OpenJDK.Core.dll 才能开始使用 java.util.Properties。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T17:23:16.767

如果你想使用 IKVM，那么你需要 IKVM.OpenJDK.Core.dll。另请参阅[wiki](http://sourceforge.net/apps/mediawiki/ikvm/index.php?title=Run_a_jar_file_on_the_fly)。

# android - 带有 Google Play 的 Android 推送通知

> ID：16205900
> 
> 赞同：2
> 
> 时间：2013-04-25T03:31:12.287
> 
> 标签：android, notifications

在我的项目中，如果 Play 商店有更新的新版本，我想向用户发送推送通知。每次用户打开手机时我都必须通知。有没有办法做到这一点？请帮助我

提前致谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T05:45:41.717

正如 StoneBird 提到的，如果您的应用在 Play 商店中（这听起来像是基于问题文本），它会通知您或自动更新。

如果您的应用程序在其他地方（另一个市场，或者在没有市场的情况下加载），这种类型的推送通知可能很有用......

要向用户推送通知，您可以使用 Google Cloud Messaging。这是一项免费服务，可让您将通知推送到应用程序中的服务（通过预定义的广播接收器）。然后，该服务可以向用户提供有关可用更新的通知。

有关如何实现它的详细信息，请参阅[文档。](http://developer.android.com/google/gcm/index.html)

今晚我碰巧在我的 Android 开发课上做了一个关于这个的讲座。我刚刚编辑了大部分问题并在 youtube 上发布了一个[视频剪辑。](http://www.youtube.com/watch?v=oUYlFDdAVIo)[这里](https://docs.google.com/file/d/0BxF4_-k2zB3mQlFSYmhoOTNQWXc/edit?usp=sharing)的代码

# django - 如何在 django 上获取当前语言环境的“short_date_format”？

> ID：16205903
> 
> 赞同：7
> 
> 时间：2013-04-25T03:31:32.003
> 
> 标签：django, localization

我已经在我的项目上成功设置了 L10N，并且我能够将日期转换为正确的格式。但现在我需要`SHORT_DATE_FORMAT`模板上的当前语言环境或 context_processor 中的。

从中获取它`django.conf.settings`总是给我默认值，`m/d/Y`. 当前语言环境设置为`pt_BR`，因此格式应为`d/m/Y`。

```
In [42]: settings.LANGUAGE_CODE
Out[42]: 'pt-br'

In [43]: settings.USE_L10N
Out[43]: True

In [44]: settings.SHORT_DATE_FORMAT
Out[44]: 'm/d/Y' 
```

有什么线索吗？

顺便说一句，我真正想做的是：获取当前语言环境的格式，以便我可以将其传递给 bootstrap-datepicker 插件。它目前正在使用`m/d/Y`，django 正在以`d/m/Y`格式给出日期。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-25T07:04:05.140

我必须执行以下操作：

```
from django.conf import settings
from django.utils import formats 

correct_format = formats.get_format("SHORT_DATE_FORMAT", lang=settings.LANGUAGE_CODE) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T17:11:36.550

我能够使用[babel](http://babel.edgewall.org/wiki/BabelDjango)做到这一点：

`settings.py`：

```
MIDDLEWARE_CLASSES = (
    ...
    'babeldjango.middleware.LocaleMiddleware',
    ...
) 
```

`context_processors.py`：

```
def global_context(request):
    # Fixing the date format so bootstrap-datepicker understands.
    js_frm = request.locale.date_formats['medium'].pattern

    context = {
    ...

    return context 
```

# iphone - 如何在iOS中辞职数字文本字段？

> ID：16205905
> 
> 赞同：-1
> 
> 时间：2013-04-25T03:31:41.693
> 
> 标签：iphone, ios

我想知道如何辞职我的数字文本字段？

我的`viewDidLoad`方法中有一个创建`textfields`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T03:48:11.387

打电话`endEditing:`。这样做的好处是您不需要知道第一响应者到底是谁！它是一个 UIView 方法，它对所有的子视图进行操作，而你在一个 UIViewController 中，所有这些文本字段都是它的子视图，所以你可以简单地说：

```
[self.view endEditing:YES]; 
```

至于将那行代码放在*哪里*，这取决于您要对什么做出反应。你说“每当我触摸视图中的任何地方”；但是什么观点？如果它是 UIViewController 的整体视图，那么正如已经指出的那样，您可以只放置一个 UITapGestureRecognizer`self.view`并让它的操作方法处理程序调用`endEditing:`，如图所示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T03:34:25.613

与您辞职常规（非数字）文本字段的方式相同。

将您的视图控制器设置为文本字段委托，一旦编辑完成，您可以在该文本字段上 resignFirstResponder 并且键盘将关闭。

[您还可以使用分配给视图的 UITapGestureRecognizer](https://stackoverflow.com/questions/5306240/iphone-dismiss-keyboard-when-touching-outside-of-textfield) [，然后在命中时调用 resignFirstResponder](https://stackoverflow.com/questions/11809816/uitableview-resign-first-responder-on-outside-touch)（示例代码可以在我连接的这两个链接中找到）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T04:48:46.410

您还可以在 UIView 的背景触摸上进行工作。正如我在下面给出的步骤。

1) 将 UIView 的类更改为 UIControl。

![在此处输入图像描述](https://i.stack.imgur.com/amyUB.png)

2) 从 UIControl 事件的 touch down 事件中拖动控件。

![在此处输入图像描述](https://i.stack.imgur.com/zmk3K.png)

3）连接到文件拥有您的后台触摸IBAction方法。并编写代码以辞职第一响应者。

```
-(IBAction)backgroundtouch:(id)sender
{
    [_yourTextField resignFirstResponder];
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/Ry6Zo.png)

# html - CSS垂直对齐属性不起作用

> ID：16205907
> 
> 赞同：5
> 
> 时间：2013-04-25T03:31:47.143
> 
> 标签：html, css, text-align

嘿，我有以下 CSS 代码：

```
.parent
{
    position : 'absolute';
    top : '50px';
    left : '50px';
    width : '400px';
    height : '160px';
    padding : '10px';
    border : '2px solid';
    border-color : '#444444';
    background-color : '#FF0000';
    text-align : 'center';
    /*display : inline; tried this also and didn't work.*/
}

.child
{
    color : '#123456';
    font-size : '16px';
    font-family : 'Arial';
    vertical-align : 'middle';
} 
```

我只想将孩子的内容放在父 div 的中心（x 和 y），但它不起作用，它只显示父元素顶部的文本。有什么建议吗？谢谢你。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-25T03:35:55.977

`vertical-align`有一个骗人的名字。它实际上并没有以您认为的方式垂直对齐元素。

如果您的孩子只有一行文字，您可以使用以下`line-height`技巧将其居中：

```
.parent {
    line-height: 160px; /* Height of the parent */
} 
```

**演示：http: [//jsfiddle.net/vVAdZ/](http://jsfiddle.net/vVAdZ/)**

另一种方法是伪造一张桌子：

```
.parent {
    display: table;
}

.child {
    display: table-cell;
    vertical-align: middle;
} 
```

**演示：http: [//jsfiddle.net/vVAdZ/3/](http://jsfiddle.net/vVAdZ/3/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T03:36:22.557

丢失 CSS 属性值中的引号并添加`line-height: 160px;`到 .parent

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T03:36:24.920

取任何宽度，在本例中为 400，除以 2 得到一半的 div。然后取一半高度 160，除以 2 得到一半高度，你应该得到中心。

# django - Django modelform 非必填字段

> ID：16205908
> 
> 赞同：95
> 
> 时间：2013-04-25T03:32:07.130
> 
> 标签：django, django-forms, optional, django-models

我有这样的表格：

```
class My_Form(ModelForm):
    class Meta:
        model = My_Class
        fields = ('first_name', 'last_name' , 'address') 
```

如何将地址字段设置为可选？

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2015-05-22T18:54:43.580

```
class My_Form(forms.ModelForm):
    class Meta:
        model = My_Class
        fields = ('first_name', 'last_name' , 'address')

    def __init__(self, *args, **kwargs):
        super(My_Form, self).__init__(*args, **kwargs)
        self.fields['address'].required = False 
```

* * *

## 回答 #2

> 赞同：114
> 
> 时间：2013-04-25T05:27:10.023

猜猜你的模型是这样的：

```
class My_Class(models.Model):

    address = models.CharField() 
```

您的 Django 版本 < 1.8 的表单：

```
class My_Form(ModelForm):

    address = forms.CharField(required=False)

    class Meta:
        model = My_Class
        fields = ('first_name', 'last_name' , 'address') 
```

您的 Django 版本 > 1.8 的表单：

```
class My_Form(ModelForm):

    address = forms.CharField(blank=True)

    class Meta:
        model = My_Class
        fields = ('first_name', 'last_name' , 'address') 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2019-03-26T12:00:14.140

```
field = models.CharField(max_length=9, default='', blank=True) 
```

只需添加`blank=True`您的模型字段，当您使用`modelforms`.

“如果模型字段有`blank=True`，则在表单字段上将 required 设置为 False。否则，`required=True`。”

来源： [https ://docs.djangoproject.com/en/3.1/topics/forms/modelforms/#field-types](https://docs.djangoproject.com/en/3.1/topics/forms/modelforms/#field-types)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-08-07T16:42:26.830

您必须添加：

```
address = forms.CharField(required=False) 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2020-06-27T09:53:45.717

解决方案：同时使用`blank=True`, `null=True`。

```
my_field = models.PositiveIntegerField(blank=True, null=True) 
```

解释：

如果你使用`null=True`

```
my_field = models.PositiveIntegerField(null=True) 
```

then`my_field`是必需的，`*`在表单中旁边是它，您不能提交空值。

如果你使用`blank=True`

```
my_field = models.PositiveIntegerField(blank=True) 
```

then`my_field`不是必需的，`*`表单中不会有旁边的，您不能提交该值。但它会得到不允许的空字段。

注意：标记为不需要和允许空字段是两件不同的事情。

专业提示：比文档更仔细地阅读错误。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-07-10T10:12:47.520

[@Anentropic 对@Atma](https://stackoverflow.com/questions/16205908/django-modelform-not-required-field#comment73058095_25187863)[答案](https://stackoverflow.com/a/25187863/4345461)的评论中的解决方案对我有用。而且我认为它也是最好的。

他的评论：

> `null=True, blank=True`将导致该`ModelForm`领域是`required=False`

我只是将它设置在我`UserProfile`课堂上的 ManyToMany 字段上，它工作得完美无缺。

我的`UserProfile`班级现在看起来像这样（注意该`friends`字段）：

```
class UserProfile(models.Model):
    user = models.OneToOneField(User, on_delete=models.CASCADE)
    friends = models.ManyToManyField('self', null=True, blank=True) 
```

我也认为这是最漂亮的解决方案，因为你做同样的事情，放`null`和`blank`到`True`，天气你有一个简单的`char`领域，或者像我一样，`ManyToMany`领域。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-09-05T10:15:08.647

以上答案都是正确的；不过请注意，`null=True`ManyToManyField 上的设置在数据库级别没有影响，并且在迁移时会引发以下警告：

`(fields.W340) null has no effect on ManyToManyField.`

在这个其他[线程](https://stackoverflow.com/questions/18243039/migrating-manytomanyfield-to-null-true-blank-true-isnt-recognized/18244527)中解释了一个很好的答案。

# java - 将元素添加到通配符列表中会导致编译错误

> ID：16205915
> 
> 赞同：1
> 
> 时间：2013-04-25T03:32:55.903
> 
> 标签：java, generics

我有一个包含未来任务的列表，未来类型未知，所以我创建了一个带有通配符类型的列表`?`，但是当我向列表中添加一个元素时，会发生编译错误。

这是代码：

```
private List<Pair<String, Future<?>>> futureTasks = Collections.synchronizedList(
        new ArrayList<Pair<String, Future<?>>>(8));

// taskId is a string
futureTasks.add(Pair.makePair(taskId, getExecutors().submit(
    new Callable<String>() {
        public String call() {
            try {
                return exportAccountSrcTask(tmpFile); // return a string
            } catch (Exception e) {
                logger.error("failed to export account src", e);
            }
            return null;
    }}))
); 
```

编译器错误：

> `add(Pair<String,Future<?>>)`类型中的方法`List<Pair<String,Future<?>>>`不适用于参数`(Pair<String,Future<String>>)`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T04:46:30.553

你得到一个错误，因为 a`Pair<String, Future<String>>`不是 a `Pair<String, Future<?>>`。泛型类型不是协变的。

但是，您可以键入`futureTasks`为`List<Pair<String, ? extends Future<?>>>`. 然后你就可以添加一个`Pair<String, Future<String>>`。

**编辑：**

为了更好地解释这一点，请考虑尝试将对象分配给变量而不是将其添加到列表中。如果我们有 a `List<T>`，我们只能添加一个对象，如果它*是 a* `T`。所以这实际上是相同的情况：

```
Pair<String, Future<String>> pairOfStringAndFutureOfString;
Pair<String, Future<?>> pairOfStringAndFutureOfSomething;

// incompatible types
pairOfStringAndFutureOfSomething = pairOfStringAndFutureOfString; 
```

同样，这是不允许的，因为泛型不是协变的。为什么？考虑一下如果它们是会发生什么：

```
Future<Integer> futureOfInt;
Future<?> futureOfSomething;
futureOfSomething = futureOfInt; // a future of int is a future of something

Pair<String, Future<String>> pairOfStringAndFutureOfString;
Pair<String, Future<?>> pairOfStringAndFutureOfSomething;

// pretend this is legal
pairOfStringAndFutureOfSomething = pairOfStringAndFutureOfString;

// danger!
pairOfStringAndFutureOfSomething.setRight(futureOfSomething);
Future<String> futureOfString = pairOfStringAndFutureOfString.getRight();

//sometime later...
String string = futureOfString.get(); //ClassCastException 
```

我们必须`futureOfString`指出一些实际上是`Future<Integer>`. 但这甚至没有`ClassCastException`立即引起，因为由于类型擦除，JVM 只看到了`Future`s。这种情况被称为“堆污染”——一个变量指向一个它不应该被允许的对象。实际的运行时错误仅在我们尝试 unwrap 时发生`futureOfString`。

这就解释了为什么泛型不是协变的。让我们看看解决方法：

```
Pair<String, ? extends Future<?>>
pairOfStringAndSomethingThatIsAFutureOfSomething; 
```

这个变量名很拗口，但我希望它准确地描述这里发生的事情。之前，第二种类型的参数*正是* `Future<?>`. 现在，我们说它是“某种未知类型，它是或扩展`Future<?>`。例如，它可能是`Future<?>`，它可能是`Future<String>`，甚至可能是`MySpecialFuture<Integer>`。

我们自愿放弃有关此变量类型的一些信息，以便放宽可以分配给它的内容。现在，这是合法的：

```
pairOfStringAndSomethingThatIsAFutureOfSomething = pairOfStringAndFutureOfString; 
```

编译器通过防止这种未知类型被“消耗”来防止早期的“堆污染”场景：

```
//compiler error - nothing can be legally passed into setRight
pairOfStringAndSomethingThatIsAFutureOfSomething.setRight(futureOfSomething); 
```

要了解有关这些限制的更多信息，请参阅这篇文章：[什么是 PECS（生产者扩展消费者超级）？](https://stackoverflow.com/questions/2723397/java-generics-what-is-pecs)

# haskell - 具有代数类型的镜头包

> ID：16205925
> 
> 赞同：13
> 
> 时间：2013-04-25T03:33:39.730
> 
> 标签：haskell, lenses

我正在使用镜头包进行编码。一切都很顺利，直到我尝试访问代数类型的某个字段：

```
import Control.Lens

data Type = A { _a :: Char } | B

makeLenses ''Type

test1 = _a (A 'a')
test2 = (A 'a') ^. a

No instance for (Data.Monoid.Monoid Char)
  arising from a use of `a'
Possible fix:
  add an instance declaration for (Data.Monoid.Monoid Char)
In the second argument of `(^.)', namely `a'
In the expression: (A 'a') ^. a
In an equation for `test2': test2 = (A 'a') ^. a 
```

我可以使用 _a，但我的实际程序中的数据类型要深得多，我打算使用镜头来减少我必须做的工作量。我一直在查看镜头库，但那里有很多东西，我不确定他是否处理过这种情况，或者这只是镜头库不支持的东西。

附带说明一下，如果我实际上使用像 String 这样的幺半群而不是 Char 作为数据类型，那么它会编译并给出正确的答案，我不知道为什么。

编辑：在阅读了 hammar 的评论后，我尝试了这个，这很有效：

```
test2 = (A 'a') ^? a
test3 = B ^? a 
```

但是对于必须存在的东西来说，从中获得一个可能有点奇怪。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T13:52:58.607

为了回答这个问题，我的问题是我有一个代数类型，其中一些字段在不同的构造函数之间是共同的，但是如果我尝试使用它们，有几个不共享的字段会在运行时消失。

```
data Exercise =
  BarbellExercise {
    name   :: String,
    weight :: Int,
    reps   :: Int
  } |
  BodyWeightExercise {
    name   :: String,
    reps   :: Int
  }

exer1 = BarbellExercise "Squats" 235 15
exer2 = BarbellExercise "Deadlifts" 265 15
exer3 = BodyWeightExercise "Pullups" 12
exer4 = BarbellExercise "Overhead Press" 85 15

workout = [exer1, exer2, exer3, exer4]

test = do
  mapM_ displayExercise workout

  where
    displayExercise x = putStrLn $ "Exercise: " ++ (name x) ++ " You must perform " ++ (show $ reps x) ++ "@" ++ (show $ weight x) 
```

如果我错误地使用了权重函数，这会编译但运行时会死掉。可以理解的错误。当镜头使用模板 haskell 生成实例时，它会注意到这一点并更改其行为以防止错误。您可以删除字段访问器，但在我的情况下，大多数字段在数据类型之间是相同的。一旦我注意到字段不匹配，我应该这样编写数据类型：

```
data Exercise =
  BarbellExercise
   String -- ^ name
   Int    -- ^ reps
   Int    -- ^ weight
     |
  BodyWeightExercise
    String -- ^ name
    Int    -- reps

name :: Exercise -> String
name (BarbellExercise n _ _) = n
name (BodyWeightExercise n _) = n

reps :: Exercise -> Int
reps (BarbellExercise _ r _) = r
reps (BodyWeightExercise _ r) = r 
```

通过这种方式，虽然它不太干净，但在编译时会捕获错误。通过强迫我自己编写函数，我会在编写它们时注意到任何部分函数。

我真希望 ghc 会警告我。似乎真的很容易检测到这样的事情。

# java - 阻止 java 请求接受连接的权限

> ID：16205926
> 
> 赞同：2
> 
> 时间：2013-04-25T03:33:40.323
> 
> 标签：java, java-web-start, jsch

我正在编写一个供公司内部使用的 java webstart 应用程序。它使用 JSch 连接并允许将端口转发到我们数据中心之一的服务器。我不希望用户在每次运行应用程序时都看到此消息：

[http://img33.imageshack.us/img33/5103/permissionsr.jpg](http://img33.imageshack.us/img33/5103/permissionsr.jpg)

有什么办法可以压制这条消息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-11T23:07:15.103

您是否真的需要从程序外部转发连接，或者您的程序本身是否是唯一使用转发端口的程序？

如果是前者，那么能做的事情并不多。您可能会尝试以不同的方式配置权限，但随后您会收到有关这些权限的问题。或者您可以在客户端的 JRE 上设置权限，但我不确定该怎么做。

如果您的 Webstart 程序本身试图通过 SSH 连接访问内部服务器，并且当前正在向您的 JSch 会话正在侦听的本地端口打开一个 Socket，那么您可以做得更好：

与其打开 Socket，不如打开一个[direct-tcp 通道](http://epaul.github.io/jsch-documentation/simple.javadoc/index.html?com/jcraft/jsch/ChannelDirectTCPIP.html)并使用它的输入和输出流。现在不需要打开本地端口，也不会有安全问题。

```
ChannelDirectTCPIP channel = (ChannelDirectTCPIP)gateway.openChannel("direct-tcpip");
channel.setHost(host);
channel.setPort(port);
// important: first create the streams, then connect.
InputStream iStream = channel.getInputStream();
OutputStream oStream = channel.getOutputStream();
channel.connect();

// now write to oStream and read from iStream 
```

我用它通过另一个 JSch 会话来隧道 JSch 会话，[请参阅我的 ProxySSH 示例](http://sourceforge.net/apps/mediawiki/jsch/index.php?title=ProxySSH)。

# php - 如何在 REST API 中接受多个变量

> ID：16205927
> 
> 赞同：0
> 
> 时间：2013-04-25T03:33:55.387
> 
> 标签：php, api, rest, get, slim

我目前正在学习如何将rest api用于移动开发，我只想知道是否有一种方法可以在URL中接受多个变量？

例如：

```
$app->get('/chara/arena/:id', 'getArea');
//now this code above can accept only 1 prameter now how do i make it to accept 2 parameters? 
```

喜欢：

```
/chara/arena?idA=102&idB=123 
```

顺便说一句，我正在使用 SLIM 框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T04:20:11.600

试试这个代码：

```
$idA = $app->request()->get('idA');
$idB = $app->request()->get('idB'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T08:46:44.370

我设法以某种方式创建了一个解决方案：我没有传递 1 个字符的 id，而是同时传递了它们

因此，如果我想传递 id 的 1 和 2，我将传递它们 /chara/battle/1:2 并像数组一样使用爆炸。

```
 $app->get('/chara/battle/:mid', 'setArena');

 function setArena($raw_ids){
      $ids = explode(':', $raw_ids);
        $chara_a_id = $ids[0];
        $chara_b_id = $ids[1];
 } 
```

我不知道这可以这么简单。

# sql - 如何连接具有 2 个 where 子句的 2 个表

> ID：16205938
> 
> 赞同：0
> 
> 时间：2013-04-25T03:34:39.487
> 
> 标签：sql, join

我有一个工作代码，其中第一个查询将选择用户的所有评论，另一个将选择该评论的每个主题并仅选择用户评论的主题，但他不是创作者。它就像一个订阅的主题页面。问题是我不能在单行查询中完成它，我需要它来进行分页。

我的原始代码是这样的：

```
$qry="SELECT * FROM tbl_comment WHERE user_id='$selected_user' GROUP BY topic_id";
    $res=mysql_query($qry);
        if(mysql_num_rows($res)==0)
            {
                echo "<tr><td colspan=2><br>No Topic(s) Subscribed.</td></tr>";
            }
        else
            {
                while($row=mysql_fetch_array($res))
                    {
                        $subcid = $row['topic_id'];
                        $qry2="SELECT * FROM tbl_topic WHERE topic_id='$subcid' AND user_id!='$selected_user'";
                        $res2=mysql_query($qry2);
                        while($row2=mysql_fetch_array($res2))
                            {
                                //echo output
                            }
                        }

                } 
```

这是我的两张桌子

```
tbl_topic
----------
topic_id
topic_title
user_id

tbl_comment
----------
comment_id
comment_message
user_id
topic_id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T04:44:42.967

正如你的问题中提到的......只选择用户不评论的主题......

```
Select Tp.topic_Id , Tc.User_Id
From tbl_topic Tp
Inner Join tbl_comment Tc
   On  Tp.topic_Id = Tc.topic_Id
   And Tp.User_Id != Tc.User_Id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T03:56:57.767

你的意思是子查询？尝试这个..

```
select * from tbl_comment where user_id in(
    select user_id from tbl_topic where topic_id='$subcid' and user_id!='$selected_user'
)
group by topic_id 
```

# iphone - 如何从 Lift 中实现这样的滑动 2 按钮菜单？

> ID：16205939
> 
> 赞同：0
> 
> 时间：2013-04-25T03:34:45.887
> 
> 标签：iphone, ios

[http://imgur.com/3ZBCsDn](http://imgur.com/3ZBCsDn) 无法在网站上发布图片，但它就在那里。

我一直在尝试查找这是模板还是单独的 nib 文件，以及翻页动画。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T03:37:46.907

那就是所谓的`UIActionSheet`。它完全用代码创建，因此仅限于一些非常简单的东西（即几个按钮，其中一个是取消按钮，其中一个可以标记为“破坏性”）。只需查阅`UIActionSheet`课程的文档；它告诉你所有关于它的知识。

另外，这是我书中的讨论：

[http://www.aeth.com/iOSBook/ch26.html#_action_sheet](http://www.apeth.com/iOSBook/ch26.html#_action_sheet)

# javascript - 在 HTML 页面中禁用锚链接单击 + 拖动/滑动带有链接的容器

> ID：16205940
> 
> 赞同：2
> 
> 时间：2013-04-25T03:34:46.457
> 
> 标签：javascript, html, hyperlink

我想禁用链接上的单击+拖动

当您在网页中的链接上按下鼠标左键并拖动此链接时，您可以移动链接，例如打开一个新选项卡。我想在我的页面、javascript 或 css 上禁用此功能。

在网站 500px 上，他们禁用了它：

[http://500px.com/photo/31922503](http://500px.com/photo/31922503)

以这张照片为例，您可以单击链接（照片），但无法拖动链接。避免图片的拖放也很好。

所以如果我禁用链接，我不需要禁用容器。

我禁用了停止对它们进行拖动启动的链接（感谢“KevinIsNowOnline”）：

```
$('div#multislides').on('dragstart', 'a', function () {
    return false;
}); 
```

但是，我需要拖动/滑动容器！所以我正在寻找解决方案来做到这一点。

没有链接，作品：http: [//jsfiddle.net/Ff3Ts/](http://jsfiddle.net/Ff3Ts/)

使用链接，不起作用：http: [//jsfiddle.net/Mfmfz/](http://jsfiddle.net/Mfmfz/)

在示例中，您可以在没有链接时拖动/滑动容器，但它不适用于链接。

任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T03:46:49.997

嗨，我检查了您发布的网站，能够观察到您想要实现的目标。

请看下面的代码：

```
document.getElementById('notClickable').ondragstart = function() { return false; };
//upon start of drag of the selected image, it immediately returns false, or cancels the event. 
```

查看此[jsFiddle 链接](http://jsfiddle.net/KevinIsNowOnline/scmUv/)以获取更多信息。

# c# - MVC 是否仅适用于 Web 应用程序

> ID：16205942
> 
> 赞同：0
> 
> 时间：2013-04-25T03:35:16.727
> 
> 标签：c#, asp.net-mvc

我想创建一个应用程序，我想在 web 和 windows 上工作，我想为其制作单独的表示层。首先我想知道，MVC 是否仅适用于 Web 应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T03:39:45.853

无论如何，没有。查看来自[http://blog.iandavis.com/2008/12/09/what-are-the-benefits-of-mvc/的引用](http://blog.iandavis.com/2008/12/09/what-are-the-benefits-of-mvc/)

> 模型/视图/控制器 (MVC) 三元组 [首先由 Krasner 和 Pope 在 1988 年描述] 用于在 Smalltalk-80 中构建用户界面。

当我在读研究生时，我们将 MVC 用于 Java 应用程序......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T03:38:21.567

不一定只适用于网络，取决于您如何使用它。它只是一个应该同时适用于两者的框架。例如，iOS 开发也是基于 MVC 风格进行的。但是，如果您正在使用`WPF/Silverlight`，则应该查看`MVVM`而不是`MVC`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T06:58:04.973

据我所知，MVC 为您提供了构建 html 的更多命令。如果您想要一个干净且更受控制的 html 输出，请使用 MVC。如果您正在开发业务应用程序，请在类库类型项目中设置解决方案和 DAL 和其他业务逻辑层，然后为 Web 和桌面构建单独的用户界面。如果您不想对输出 HTML 进行更多控制，ASP.NET 将是最好的选择。

# javascript - 允许用户调用 JSON 对象的元素

> ID：16205943
> 
> 赞同：0
> 
> 时间：2013-04-25T03:35:24.023
> 
> 标签：javascript, json

有什么方法可以让用户调用 JSON 对象的元素？

大意是：

```
var jsonobj = {"name":"charlie", "age":"17"};

var ins = document.getElementById('input_box');
var usergen = ins.value;

div.innerHTML = jsonobj.usergen; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T03:37:23.563

是的。

```
jsonobj[usergen] 
```

此外，您定义的`jsonobj`不是 JSON……它只是一个对象文字。JSON 是与 JavaScript 的对象表示法兼容的对象的字符串表示形式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T03:41:21.730

[没有“JSON 对象”之类的东西。](http://benalman.com/news/2010/03/theres-no-such-thing-as-a-json/)你所拥有的只是一个“对象”。

无论如何，方括号语法会做你想要的：

```
div.innerHTML = jsonobj[usergen]; 
```

...请记住，用户可能会输入一个不存在的属性名称，在这种情况下`jsonobj[usergen]`将返回，当您尝试将其放入您的 div 时，该名称`undefined`最终将显示为字符串。`"undefined"`如果您愿意，可以对此进行测试：

```
if (usergen in jsonobj)
    div.innerHTML = jsonobj[usergen];
else {
    alert("The property '" + usergen + "' does not exist.");
    // OR perhaps
    div.innerHTML = "The property '" + usergen + "' does not exist.";
} 
```

# iphone - LevelHelper 碰撞不起作用

> ID：16205945
> 
> 赞同：0
> 
> 时间：2013-04-25T03:35:33.003
> 
> 标签：iphone, ios, cocos2d-iphone, levelhelper

这个问题已经困扰了我两个晚上，我不能简单地让两个`LHSprites collide`彼此使用`level helper collision`. 我已经多次检查[文档](http://www.gamedevhelper.com/documentation/documentation.html#collision)以检查我是否遗漏了什么，但我看不到它。

在 xCode 的控制台中，它记录：

```
 LevelHelper WARNING: Please call useLevelHelperCollisionHandling after addObjectsToWorld
2013-04-24 20:33:04.537 Monkeys2D[1322:c07]
 LevelHelper WARNING: Please call registerPostCollisionCallbackBetweenTagA after useLevelHelperCollisionHandling 
```

但是正如您在下面的代码中看到的那样，我正在正确地做它警告我我不是的事情。

```
-(id) init
{
if( (self=[super init])) {

    self.isTouchEnabled = YES;

    loader = [[LevelHelperLoader alloc]initWithContentOfFile:@"Level1"];

    [loader addObjectsToWorld:world cocos2dLayer:self];

    [loader useLevelHelperCollisionHandling];

    [loader registerPostCollisionCallbackBetweenTagA:MONKEY andTagB:SINGLEBANANA idListener:self selListener:@selector(collision)];

}
return self;
} 
```

我的问题是碰撞不会注册，它的行为就好像在`MONKEY`和`SINGLEBANANA`碰撞时什么都没有发生。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T16:03:59.887

原来我需要添加一个`update`方法并实现一些其他的 box2d 东西，请访问级别助手文档和论坛查看。

# c++ - 有没有办法将字符矩阵显示为图像？

> ID：16205946
> 
> 赞同：0
> 
> 时间：2013-04-25T03:35:42.663
> 
> 标签：c++, matrix

我应该以我对 c++ 非常陌生的事实开始。

我正在尝试显示一个不断更新的 20x20 字符矩阵。目前，我正在使用 for 循环作为 cout （下面的代码）显示矩阵，但这非常闪烁 - 我正在寻找更平滑的东西。

有没有办法将此字符矩阵转换为图像并显示？

这是我在这里的第一个问题，所以如果我做错了什么，我深表歉意！

到目前为止的代码：

```
#include <iostream>
#include <cstdlib>
#include <stdio.h>
#include <stdlib.h>
#include <windows.h>

using namespace std;

int main()
{
    int randInt;

    //Initialize matrix and location
    int matrix[20][20];
    int location[2] = {0,0};
    for (int i=0; i<20; i++)
    {
            for (int j=0; j<20; j++)
            {
                matrix[i][j] = 1;
            }
    }

    //move the X around
    for (int i=0; i<100; i++)
    {
        cout << string(50, '\n');
        //Change the X's location
        randInt = rand() % 4;
        switch (randInt)
        {
            case 0:
                if(location[1] > 0)
                    location[1] = location[1]-1;
                break;
            case 1:
                if(location[0] < 20)
                    location[0] = location[0]+1;
                break;
            case 2:
                if(location[1] < 20)
                    location[1] = location[1]+1;
                break;
            case 3:
                if(location[0] > 0)
                    location[0] = location[0]-1;
                break;
            default:
                cout << "Switch statement problem";
        }
        //Display the matrix
        for (int x=0; x<20; x++)
        {
            for (int y=0; y<20; y++)
            {
                if(x==location[0] && y==location[1])
                    cout << "X";
                else
                    cout << matrix[x][y];
            }
            cout << endl;
        }
        Sleep(100);
    }

system ("pause");
return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:32:41.113

If you want to convert the char to a image and see the color means, write the char value as pixel in simple pgm format.

Write a file in this sample format

```
P2
# feep.pgm
24 7
15
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  3  3  3  3  0  0  7  7  7  7  0  0 11 11 11 11  0  0 15 15 15 15  0
0  3  0  0  0  0  0  7  0  0  0  0  0 11  0  0  0  0  0 15  0  0 15  0
0  3  3  3  0  0  0  7  7  7  0  0  0 11 11 11  0  0  0 15 15 15 15  0
0  3  0  0  0  0  0  7  0  0  0  0  0 11  0  0  0  0  0 15  0  0  0  0
0  3  0  0  0  0  0  7  7  7  7  0  0 11 11 11 11  0  0 15  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 
```

check this link [http://netpbm.sourceforge.net/doc/pgm.html](http://netpbm.sourceforge.net/doc/pgm.html) for pgm format

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T04:17:52.263

您应该将其重命名为`location[2]``struct { int x,y; } 位置便于阅读。

然后，您可以在 RAM 中构建一个字符数组并立即将其输出。

```
int _tmain(int argc, _TCHAR* argv[])
{
    char matrix[20][20];
    char image[21][21];
    struct { int x, y; } location;

    int x = 0;
    int y = 0;
    location.x = 7;
    location.y = 3;

    // fill the matrix
    for (x = 0; x < 20; ++x)
    {
        for (y = 0; y < 20; ++y)
        {
            matrix[y][x] = 'a' + x + y;
        }
    }

    // prepare the image
    y = 0;

    while (y < 20)
    {
        memcpy(image[y], matrix[y], 20);
        image[y][20] = '\n';
        ++y;
    }

    // add the cross
    image[location.y][location.x] = 'X';
    image[20][0] = '\0';

    // use the image        
    puts((char*)image);
} 
```

请根据需要添加随机功能。

# c# - 在 MEF 中使用 RegistrationBuilder 时一般不工作

> ID：16205947
> 
> 赞同：1
> 
> 时间：2013-04-25T03:35:44.343
> 
> 标签：c#, generics, mef

我只想使用 RegistrationBuilder 来创建零件。

例子：

```
public interface IModel
{
    String Name { get; }
}

public interface IRepository
{
}

class ModelOne : IModel
{
    public String Name { get { return "ModelOne"; } }
}

class ModelTwo : IModel
{
    public String Name { get { return "ModelTwo"; } }
}

public interface IRepository<TModel> : IRepository where TModel : IModel
{
}

public class Repository<TModel> : IRepository<TModel> where TModel : IModel
{
}

static void Main(String[] args)
{
    var builder = new RegistrationBuilder();
    builder.ForTypesDerivedFrom<IModel>()
        .Export()
        .Export<IModel>();
    builder.ForTypesDerivedFrom<IRepository>()
        .ExportInterfaces();
    var asmCatalog = new AssemblyCatalog(Assembly.GetExecutingAssembly(), builder);
    var container = new CompositionContainer(asmCatalog);
    var one = container.GetExportedValue<IRepository<ModelOne>>();
    var two = container.GetExportedValue<IRepository<ModelTwo>>();
} 
```

我无法得到我想要的结果（一个，两个）。

因为当我使用 RegistrationBuilder 时包装在 ProjectingType 中的所有类型，但 GetExportedValue 方法没有将通用参数包装在 ProjectingType 中。

我的临时解决方案是删除 ProjectingType 中的 IsAssignableFrom 方法。现在我可以得到我想要的结果（一个，两个）。

有什么好的解决方案或更正吗？

# c# - C#中自定义异常的Interview_Question

> ID：16205948
> 
> 赞同：0
> 
> 时间：2013-04-25T03:35:45.693
> 
> 标签：c#, exception-handling, .net-4.5, custom-exceptions

我在面试中遇到了一个关于自定义例外的问题。如下所示，有四个捕获每个自定义异常的多个捕获。面试官让我为 catch 块编写一个伪代码，我如何处理所有四个自定义异常。

![在此处输入图像描述](https://i.stack.imgur.com/KyLrd.jpg)

**我回答为**

```
 try 
        {   try 
            {
                try { }
                catch (DEx dEx) { Console.WriteLine(dEx.Message); }
            }
            catch (BEx bEx) { Console.WriteLine(bEx.Message); }
            catch (CEx cEx) { Console.WriteLine(cEx.Message); }
        }
        catch (AEx aEx) { Console.WriteLine(aEx.Message); } 
```

它是正确的还是错误的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T03:52:45.490

CEx 和 DEx 继承于 BEx，BEx 继承自 AEx。所以异常处理应该从下往上开始。基础异常最后。

```
try
    {
       // statements causing exception
    }
    catch( CEx cEx )
    {
       // error handling for CEx
    }
    catch( DEx dEx )
    {
       // error handling for DEx
    }
    catch( BEx bEx )
    {
       // error handling for BEx
    }
    catch( AEx aEx )
    {
       // error handling for AEx
    }
    finally
    {
       // statements to be executed
    } 
```

# ajax - 用于搜索帖子 wordpress 的 AJAX

> ID：16205950
> 
> 赞同：2
> 
> 时间：2013-04-25T03:36:07.270
> 
> 标签：ajax, wordpress, search

这是返回当您尝试加载带有 [] 的 url 时发生的错误（据我所知）...我不知道为什么会收到此错误...请帮助我更正以下代码：

错误：警告：strpos() 期望参数 1 为字符串，数组在 C:...\query.php 中的第 1718 行 <<<
警告：preg_split() 期望参数 2 为字符串，数组在 C: 中给出。 ..\query.php 第 1719 行 <<<
警告：在 C:...\query.php 中为 C: 中的 foreach() 提供的参数无效 <<<

```
$("#submit").live("click", function() {
$("#form").submit(function() {
    event.preventDefault();
    var teste=$(this).serialize();
    $.ajax({
        type: "POST",
        url: "./.../search.php",
        data: teste,
        success:function(data) {
            $("#index_content").html(data);
        }
    });
});
}); 
```

有效的编辑版本:)

```
$("#submit").live("click", function() {
$("#form").submit(function() {
    event.preventDefault();
    teste = $('#form').serialize();
    $.ajax({
        type: "POST",
        url: "./.../search.php",
        data: { 'album-features': teste },
        success:function(response) {
            $("#index_content").html(response);
        }
    });
});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T04:15:47.200

既然您使用的是 wordpress，为什么不使用其内置的 ajax 并将请求发送到`admin-ajax.php`. 我看到您将其发送到 search.php，这不是一个好方法，尤其是对于安全性而言。

编写要在`functions.php`和中执行的 php 代码`add actions`。

此页面在其答案中包含这样做的详细方法：[Dynamically changed navigation links (next and previous) in Wordpress via AJAX](https://stackoverflow.com/questions/15175020/dynamically-changing-navigation-links-next-and-previous-in-wordpress-via-ajax)

祝你好运，我来帮你

# django - 带有选择字段的 Django values_list

> ID：16205953
> 
> 赞同：4
> 
> 时间：2013-04-25T03:36:21.117
> 
> 标签：django

在`values_list`过滤对象中，确实帮助我在 django 视图中提供解决方案。

我的代码如下所示，这个有效：

```
values_list_ac = realdata.objects.filter(product = '1').values_list('company', 'brand', 'created_by__username') 
```

而用户名是存在于当前真实数据模型之外的不同模型中的字段。

但是下面的代码不起作用，因为我想显示 的值`ac_type`，它基于同一`realdata`模型中的选择字段。（我尝试使用与模板相同的解决方案来解决它）：

```
values_list_ac = realdata.objects.filter(product = '1').values_list('company', 'brand', 'created_by__username', 'get_ac_type_display') 
```

`get_ac_type_display`除了显示字段值之外，还有其他解决方案吗？

我真的很感激一些光。

编辑：这是我的模型：

```
 class realdata(models.Model):
        company = models.CharField(max_length=60, verbose_name="Company")
        brand = models.CharField(_('brand'), max_length=60) 
        model = models.CharField(max_length=60)
        type_choices = (
            (u'1', u'Inverter'),
            (u'2', u'Non-Inverter'),
        )
        ac_type = models.CharField(max_length=60, verbose_name="Type", choices=type_choices)
        created_by = models.ForeignKey(User) 
```

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-13T13:18:40.370

该`values_list`函数将只获取存储在数据库中的值。在模型字段上定义选项时，它将存储元组的第一个值，因此这将是您将检索的内容。

这意味着您必须查看选项元组来确定项目的显示值。的目的[`get_foo_display`](https://docs.djangoproject.com/en/1.5/ref/models/instances/#django.db.models.Model.get_FOO_display)是为您提供这个人类可读的值，但它需要一个模型实例才能工作。

因此，自己解决此问题的解决方案是检查选择，并相应地转换数据。以下应该能够做到这一点：

```
result = []
for p in realdata.objects.filter(product='1').values_list(
                          'company', 'brand', 'created_by__username', 'ac_type'):
    choice = {k: v for k, v in realdata.type_choices}[p[-1]]
    result.append(list(p[:-1]) + [choice]) 
```

该`result`变量将包含转换后的列表。需要新变量，因为该`values_list`函数将返回一个元组列表；后者是不可变的。此外，请注意将您想要解决的值作为`values_list`调用中的最后一项，或调整以上内容以匹配。

# ios - Objective-C APN 问题

> ID：16205955
> 
> 赞同：1
> 
> 时间：2013-04-25T03:36:23.510
> 
> 标签：ios, objective-c, apple-push-notifications

我创建了两个证书，并且门户中的 APP 为开发和生产启用了 APNS。

在开发中它工作正常，但在生产中，当有人下载​​应用程序并登录我的服务器时，会使用代表**No Push Notifications的****NAPN**进行更新。

 **如果用户禁用它们，这是代码部分，但我已经检查了多个用户并且它们已完全启用但由于某种原因它就像它被困在开发 APNS 证书或其他东西上，也没有提示用户在他们首次下载和启动应用程序时启用推送通知。

我不知道我是否需要向苹果提出这个问题，但如果有人可以，请提供有关如何使其工作的建议，我们将不胜感激。

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
    {
    // Override point for customization after application launch.

    //Clear notifications upon launching
    [[UIApplication sharedApplication] cancelAllLocalNotifications];
    [UIApplication sharedApplication].applicationIconBadgeNumber = 0;

    //Register with APN
    if ([[UIApplication sharedApplication] enabledRemoteNotificationTypes] != 0)
    {
    [[UIApplication sharedApplication] registerForRemoteNotificationTypes:(UIRemoteNotificationTypeAlert | UIRemoteNotificationTypeSound)];
    }else
    {
    URLSingleton *registrar = [URLSingleton sharedInstance];
    [registrar setDevToken:@"NAPN"];

    //Register APN with iShame Service
    URLSingleton *urls = [URLSingleton sharedInstance];
    NSString *authString = [NSString stringWithFormat:@"{\"user\":\"%@\",\"token\":\"%@\"}", [[NSUserDefaults standardUserDefaults] valueForKey:@"session_token"], [registrar getDevToken]];
    NSData *authData = [authString dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:YES];
    NSMutableURLRequest *url = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:urls.updateAuth]];

    [url setHTTPMethod:@"POST"];
    [url setValue:@"application/json" forHTTPHeaderField:@"Accept"];
    [url setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
    [url setValue:@"json" forHTTPHeaderField:@"Data-Type"];
    [url setValue:[NSString stringWithFormat:@"%d", [authData length]] forHTTPHeaderField:@"Content-Length"];
    [url setHTTPBody:authData];

    NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:url delegate:self];
    [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;
    [connection start];

    } 
    return YES;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T03:41:46.867

当您创建 .ipa 时，而不是使用发行版构建，（除非您将其放在商店中）使用开发人员许可证构建，以便应用程序使用您的签名对其进行签名。我遇到了应用程序问题，那是我的问题。希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:16:36.330

您应该始终注册远程通知类型，因为该调用会导致用户在首次启动应用程序时被提示启用推送通知。删除该条件。我不知道这段代码在沙盒环境中是如何工作的。我的猜测是你在稍后阶段添加了这个条件，在你已经运行了没有条件的应用程序之后，这就是注册在那个环境中的工作方式。**

# c# - 无法将特定的 excel 单元格导入到 texbox：对象引用未设置为抛出 C# 的对象的实例

> ID：16205957
> 
> 赞同：0
> 
> 时间：2013-04-25T03:36:29.370
> 
> 标签：c#

您好我正在尝试将特定 excel 单元格的值导入表单上的文本框。该值将在表单加载后立即出现。现在这个单元格可以为空，我正在处理空值，但每次传递空值时它都会抛出异常并进入捕获状态。这是我的代码片段：

```
try
{
    var v;
    if( oSheet.Cells[3, 4].Value2 != null)
    {
        v = Sheet.Cells[3, 4].Value2; 
        var s = Convert.ToString(v);
        textBox1 = string.Format("{0:N2}", s);
    } 
    else 
    { 
        v = 0;
        var s = Convert.ToString(v);
        textBox1 = string.Format("{0:N2}", v);
    } 
}
catch(Exception)   
{
    string errorMessage = "Data cannot be retrieved from the strats file ;
    MessageBox.Show(errorMessage);
} 
```

捕获显示此异常“对象引用未设置为对象的实例”。我正在照顾或 null oSheet.Range.Value2，那么为什么它一到达 if 语句就会抛出错误？有人可以帮助我几天以来对这个问题感到沮丧

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T03:46:12.067

你初始化“oSheet”对象了吗？

```
if( oSheet.Cells[3, 4].Value2 != null)
{
//I think you have a spelling mistake,    oSheet.Cells[3, 4] vs Sheet.Cells[3,4] 
    v = Sheet.Cells[3, 4].Value2; 
....
} 
```

# jquery - 在提交之前将更多数据附加到表单？

> ID：16205961
> 
> 赞同：1
> 
> 时间：2013-04-25T03:36:50.787
> 
> 标签：jquery, forms, blob, form-submit, multipartform-data

我不明白为什么这不起作用？

```
var $formElement = $("#upload-form");
var formData = new FormData($formElement);
formData.append("file", blob_output, "timelapse.webm");
formData.append('token', token);

$formElement.submit(); 
```

我想在提交时附加文件`timelapse.webm`和`token`数据`$("#upload-form")`。它似乎不起作用。

检查员显示这是空的：

![这是请求有效负载。](https://i.stack.imgur.com/40N8H.png)

相关信息： [https ://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData/Using_FormData_Objects#Retrieving_a_FormData_object_from_an.C2.A0HTML.C2.A0form](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData/Using_FormData_Objects#Retrieving_a_FormData_object_from_an.C2.A0HTML.C2.A0form)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T04:06:07.447

您需要发送 FormData，而不是提交 HTML 表单。例如：

```
$.ajax({
    url: submitUrl,
    data: formData,
    processData: false,
    contentType: false,
    type: 'POST',
    success: function(data) {
        ...
    }
}); 
```

# xml - 如何删除多个文件中的 xml 元素？

> ID：16205962
> 
> 赞同：0
> 
> 时间：2013-04-25T03:37:01.577
> 
> 标签：xml, bash

`<div class='hello'>...</div>`如果我有多个要在**多个文件**中删除的标签，我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T03:53:11.417

你可以试试`xmlstartlet`

```
xmlstarlet ed -d '//div[@class="hello"]' <input.xml >output.xml 
```

将其包裹起来`find`以处理多个文件。

# html - 如何使用 CSS Background-size: 封面；但为菜单留出空间？

> ID：16205964
> 
> 赞同：0
> 
> 时间：2013-04-25T03:37:16.087
> 
> 标签：html, image, css, background-image

我刚刚发现了 CSS`background-size: cover`属性，但我希望左侧导航后面的区域为黑色。我尝试在图像本身中留下黑色空间，但是当它调整大小时，它会被裁剪掉。

我怎么能这样做，以便我的图像自动调整大小，但在我的左侧导航下留下黑色空间？想法/建议？

**CSS：**

```
html {
    background: url(images/bg.jpg) no-repeat center center fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
    height: 100%;
}
body {
    margin: 0;
    height: 100%;
    padding-left: 40px;
    padding-top: 25px;
}
#container {
    min-height: 100%;
    position: relative;
    height: 100%;
}
#header {
}
#body {
    padding-bottom: 100px;
}
#footer {
    position: absolute;
    bottom: 0px;
    width: 100%;
    height: 100px;
}
.logo {
    font-family: Didot;
    font-size: 4.5em;
    color: #FFF;
}
.main_nav {
    list-style-type: none;
    margin: 0;
    padding: 0;
}
.footer_text {
    font-family: Garamond;
    font-size: 14px;
    color: #FFF;
}
.main_nav li {
    margin: 5px;
}
.main_nav li a {
    color: #FFF;
    text-decoration: none;
    font-size: 32px;
    font-family: Garamond;
    font-variant: small-caps;
} 
```

**HTML：**

```
<body>
<div id="container">

  <div id="header">
    <div class="logo">C</div>

    <ul class="main_nav">
      <li><a href="index.html">Home</a></li>
      <li><a href="about.html">About</a></li>
      <li><a href="music.html">Music</a></li>
      <li><a href="services.html">Services</a></li>
      <li><a href="gallery.html">Gallery</a></li>
      <li><a href="contact.html">Contact</a></li>
    </ul>
  </div>

  <div id="body">

  </div>

  <div id="footer">

  </div>

</div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T03:50:56.787

只需重新定位背景：

```
html {
    background: black url(images/bg.jpg) no-repeat 200px center fixed;
    /* ... */
} 
```

[这是一个演示。](http://jsfiddle.net/DCcmX/)

# c# - “方法 'WndProc' 没有重载需要 0 个参数”

> ID：16205975
> 
> 赞同：0
> 
> 时间：2013-04-25T03:38:08.960
> 
> 标签：c#

```
protected override void WndProc(ref Message message)
    {
        if (message.Msg == WM_SETTINGCHANGE)
        {
            if (message.WParam.ToInt32() == SPI_SETDESKWALLPAPER)
            {
                // Handle that wallpaper has been changed.
            }
        }

        base.WndProc(ref message);
    }

    private void check_Tick(object sender, EventArgs e)
    {
        WndProc();
    } 
```

我知道我在 WndProc 之后的 () 中遗漏了一些东西，但我不确定*是什么*......有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T04:02:38.603

您不需要计时器来检查更改，这是 WndProc 的工作：

```
 private static readonly UInt32 SPI_SETDESKWALLPAPER = 0x14;
    private static readonly UInt32 WM_SETTINGCHANGE = 0x1A;

    protected override void WndProc(ref Message message)
    {
        if (message.Msg == WM_SETTINGCHANGE)
        {
            if (message.WParam.ToInt32() == SPI_SETDESKWALLPAPER)
            {
                // Handle that wallpaper has been changed.]
                 Console.Beep();
            }
        }

        base.WndProc(ref message);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T04:19:18.470

当我在 Windows 消息处理程序中放置断点时，我注意到当背景发生变化时，它接收到的 Wparam 为 42 而不是 20，它可能是位的组合，因此您可以尝试这样的事情。

```
protected override void WndProc(ref Message m)
{
    if (m.Msg == WM_SETTINGCHANGE)
    {
        if ((m.WParam.ToInt32() & (int)SPI_SETDESKWALLPAPER) == SPI_SETDESKWALLPAPER)
        {
            // Handle that wallpaper has been changed.
        }
    }

    base.WndProc(ref m);

} 
```

如果您想使用计时器轮询更改，您可以创建一条消息，然后像这样调用 WndProc 方法。

```
private void timer1_Tick(object sender, EventArgs e)
{
    Message m = new Message();
    m.Msg = (int)WM_SETTINGCHANGE;
    m.WParam = (IntPtr)SPI_SETDESKWALLPAPER;
    WndProc(ref m);

} 
```

# signals - 频分复用如何共享？

> ID：16205977
> 
> 赞同：0
> 
> 时间：2013-04-25T03:38:17.347
> 
> 标签：signals, communication

我知道频分复用是将频谱分成一个频带，然后通过介质发送。但是我不明白它是如何收到的。

```
Does the user who received the signal have access to all the frequencies on the band or
only a specific channel? 
```

我之所以问是因为我看到使用时分复用的每个用户都可以在短时间内访问整个频段，而且我正在阅读的内容远离这个区域。

感谢所有的帮助！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T04:00:13.890

一个例子：广播电视是频分复用的一种形式。每个频道都以不同的频率广播，所有电台的信号都由电视天线接收，并出现在 TV Tuber 的输入端。电视调谐器基本上是一个从指定频带中提取信号的滤波器。

用户是否被认为具有完全访问权限取决于用户和传输通道之间的设备。例如，电话交换机之间的通信通常使用 TDM，但在从交换机到我家的电话线路上，我只能得到适合我的信号。

# ios - 如何使安装了 CocoaPods 的 pod 可用于我工作区中的所有项目？

> ID：16205981
> 
> 赞同：6
> 
> 时间：2013-04-25T03:38:56.150
> 
> 标签：ios, objective-c, xcode, xcode4.6, cocoapods

我正在使用`XCode 4.6.1`. 我的工作区中有几个项目，但其中只有一个能够包含使用`CocoaPods`. 其他项目根本没有检测到它们。

如何`CocoaPods`与整个工作区共享我的？我需要包含`libPods.a`在所有项目的构建依赖项中吗？我需要在 podfile 中添加一些特殊的东西吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T13:56:00.893

默认情况下，CocoaPods 只链接到它找到的第一个目标。您可能想查看[xcodeproj](http://docs.cocoapods.org/podfile.html#xcodeproj)和[link_with](http://docs.cocoapods.org/podfile.html#link_with) Podfile 指令。

# wordpress - Wordpress，iframe，带有重定向的表单仅在 iframe 内打开

> ID：16205983
> 
> 赞同：0
> 
> 时间：2013-04-25T03:39:16.573
> 
> 标签：wordpress, redirect, iframe

我使用 wordpress，我在我的网站上的一个小 iframe 中有一个注册表单。提交后，用户将被重定向到感谢页面。现在重定向只发生在小的 iframe 框中，而不是整个页面。

如何让用户被重定向到整个页面的新网址？（不只是在 iframe 内）

谢谢 - 干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:30:32.260

[这个答案](https://stackoverflow.com/questions/2985353/php-header-location-inside-iframe-to-load-in-top-location)有一些可能有效的选项，具体取决于您的特定情况，例如`target="_top"`在您的`form`标签中使用。

# windows-phone-8 - Windows Phone 8 卸载事件？

> ID：16205985
> 
> 赞同：1
> 
> 时间：2013-04-25T03:39:39.030
> 
> 标签：windows-phone-8

我有一个 Web 服务，它以指定的时间间隔联系我的 Windows Phone8 应用程序。

当用户卸载 Windows Phone8 应用程序时需要通知该服务。

是否存在某种类型的卸载事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:02:51.313

> 是否存在某种类型的卸载事件？

不，没有办法知道用户卸载了您的应用程序（使用当前的 Windows Phone SDK）。

# rvm - rvm install 1.9.X on lion 解压 ruby 源后挂起

> ID：16205987
> 
> 赞同：0
> 
> 时间：2013-04-25T03:39:57.923
> 
> 标签：rvm

清理，rvm 内爆，安装了新的 rvm，`--ruby`所以我安装了 2.0.0。

尝试`rvm install ruby-1.9.3 --autolibs=4`时，安装会在 src 正在被提取的消息之后立即挂起。1.9.3、ruby-1.9.3-p392 和 1.9.2 也会发生这种情况。我得到了几个点，然后没有进一步的反应。有什么建议么？

在 1.9.2 尝试中使用 --debug 的结果。

```
$ rvm --debug install ruby-1.9.2 --autolibs=4
ruby-1.9.2 - install
Searching for binary rubies, this might take some time.
Remote file does not exist https://rvm.io/binaries/osx/10.7/x86_64/ruby-1.9.2-p320.tar.bz2
Remote file does not exist http://jruby.org.s3.amazonaws.com/downloads/ruby-1.9.2-p320.tar.bz2
Remote file does not exist http://binaries.rubini.us/osx/10.7/x86_64/ruby-1.9.2-p320.tar.bz2
rvm_remote_server_url3 not found
No remote file name found
No binary rubies available for: osx/10.7/x86_64/ruby-1.9.2-p320.
Continuing with compilation. Please read 'rvm mount' to get more information on binary rubies.
__rvm_setup_compile_environment_setup ruby-1.9.2-p320
rvm_autolibs_flag=4
__rvm_setup_compile_environment_requirements ruby-1.9.2-p320
Installing requirements for osx, might require sudo password.
requirements code for osx loaded
requirements code for osx_brew loaded
brew seems to be writable
Already up-to-date.
Found required packages: autoconf, automake, libtool, pkg-config, libyaml, readline, libxml2, libxslt, libksba, openssl, sqlite.
Certificates in '/usr/local/etc/openssl/cert.pem' already are up to date.
rvm_configure_flags+=( --with-opt-dir=/usr/local/opt/libyaml )
__rvm_update_configure_env(1):CFLAGS=-I/usr/local/opt/readline/include:
__rvm_update_configure_env(1):LDFLAGS=-L/usr/local/opt/readline/lib:
__rvm_update_configure_env(1):CFLAGS=-I/usr/local/opt/libxml2/include:
__rvm_update_configure_env(1):LDFLAGS=-L/usr/local/opt/libxml2/lib:
__rvm_update_configure_env(1):CFLAGS=-I/usr/local/opt/libxslt/include:
__rvm_update_configure_env(1):LDFLAGS=-L/usr/local/opt/libxslt/lib:
__rvm_update_configure_env(1):CFLAGS=-I/usr/local/opt/libksba/include:
__rvm_update_configure_env(1):LDFLAGS=-L/usr/local/opt/libksba/lib:
__rvm_update_configure_env(1):CFLAGS=-I/usr/local/opt/openssl/include:
__rvm_update_configure_env(1):LDFLAGS=-L/usr/local/opt/openssl/lib:
__rvm_update_configure_env(1):CFLAGS=-I/usr/local/opt/sqlite/include:
__rvm_update_configure_env(1):LDFLAGS=-L/usr/local/opt/sqlite/lib:
__rvm_setup_compile_environment_osx_compiler ruby-1.9.2-p320
__rvm_setup_compile_environment_architectures ruby-1.9.2-p320
__rvm_setup_compile_environment_gcc47plus ruby-1.9.2-p320
__rvm_setup_compile_environment_bison ruby-1.9.2-p320
__rvm_setup_compile_environment_smartos ruby-1.9.2-p320
__rvm_setup_compile_environment_sunos ruby-1.9.2-p320
__rvm_setup_compile_environment_openbsd ruby-1.9.2-p320
__rvm_setup_compile_environment_auto_conf_make ruby-1.9.2-p320
__rvm_setup_compile_environment_flags_docs ruby-1.9.2-p320
__rvm_setup_compile_environment_flags_tcltk ruby-1.9.2-p320
__rvm_setup_compile_environment_flags_shared_static ruby-1.9.2-p320
__rvm_setup_compile_environment_flags_threads ruby-1.9.2-p320
found compiler: gcc-4.2
Installing Ruby from source to: /Users/jfnixon/.rvm/rubies/ruby-1.9.2-p320, this may take a while depending on your cpu(s)...
ruby-1.9.2-p320 - #downloading ruby-1.9.2-p320, this may take a while depending on your connection...
No archive, downloading
Running(11): curl --fail --location --max-redirs 10 --create-dirs -C - -o ruby-1.9.2-p320.tar.bz2 http://ftp.ruby-lang.org/pub/ruby/1.9/ruby-1.9.2-p320.tar.bz2
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 8770k  100 8770k    0     0   177k      0  0:00:49  0:00:49 --:--:--  123k
Downloaded archive checksum matched.
Log file: /Users/jfnixon/.rvm/log/ruby-1.9.2-p320/1366859728_extract.log
ls: /Users/jfnixon/.rvm/log/ruby-1.9.2-p320/1366859728_extract.log: No such file or directory
remove[ny]? y
[2013-04-24 23:15:34] __rvm_package_extract
__rvm_package_extract () 
{ 
    rvm_debug __rvm_package_extract:$#: "$@";
    typeset __tempdir __path __file __return;
    __return=0;
    __tempdir="$( TMPDIR="${rvm_tmp_path}" mktemp -d -t rvm-tmp.XXXXXXXXX )";
    __rvm_package_extract_run "$1" "$__tempdir" || __return=$?;
    if (( __return == 0 )); then
        for __path in "$__tempdir"/*;
        do
            __file="${__path##*/}";
            if [[ -n "${__file}" && -e "$2/${__file}" ]]; then
                \rm -rf "$2/${__file}" || __return=$?;
            fi;
            \mv -f "${__path}" "$2/" || __return=$?;
        done;
    fi;
    if [[ -n "$__tempdir" ]]; then
        \rm -rf "$__tempdir";
    fi;
    return $__return
}
current path: /Users/jfnixon/.rvm/src
command(3): __rvm_package_extract /Users/jfnixon/.rvm/archives/ruby-1.9.2-p320.tar.bz2 /Users/jfnixon/.rvm/tmp/rvm_src_71265
ruby-1.9.2-p320 - #extracting ruby-1.9.2-p320 to /Users/jfnixon/.rvm/src/ruby-1.9.2-p320..^C
__rvm_rm_rf already gone: /Users/jfnixon/.rvm/tmp/71265* 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T22:09:27.707

看起来像一个死循环，错误应该直接报告给 RVM => [http://bit.ly/rvm-issues](http://bit.ly/rvm-issues)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T20:20:10.757

我也有这个问题。我等了一个多小时才能完成本应在 4 分钟内完成的手术。随着它的调整，由于某种原因，我的 Mac 上安装了 rvm 之外的不同版本的 ruby​​。一个简单`rm /usr/bin/ruby`的伎俩。

# mysql - 在给定日期范围内按多个组优化 MySQL 查询求和和平均

> ID：16205988
> 
> 赞同：4
> 
> 时间：2013-04-25T03:40:09.413
> 
> 标签：mysql, sql, optimization, query-optimization

我目前正在开发一个本土分析系统，目前在 Windows Server 2008 上使用 MySQL 5.6.10（很快就会迁移到 Linux，而且我们还没有死心于 MySQL，仍在探索不同的选项，包括 Hadoop）。

我们刚刚完成了一个巨大的导入，对于一个小客户来说是闪电般快速的查询现在对于一个大客户来说慢得难以忍受。我可能会添加一个全新的表来预先计算这个查询的结果，除非我能弄清楚如何让查询本身变得更快。

查询所做的是将@StartDate 和@EndDate 作为参数，并计算该范围内的每一天的日期、该日期的新评论数、总评论数（包括@StartDate 之前的任何评论） ，以及每日平均评分（如果没有给定日期的信息，则平均评分将从前一天结转）。

可用的过滤器包括年龄、性别、产品、公司和评级类型。每条评论都有 1-N 评级，至少包含“总体”评级，但每个客户/产品可能更多，例如“质量”、“声音质量”、“耐用性”、“价值”等……

调用它的 API 会根据用户选择注入这些过滤器。如果未指定评级类型，它使用“AND ratingTypeId = 1”代替我将在下面列出的查询的所有三个部分中的 AND 子句注释。所有评级都是 1 到 5 之间的整数，尽管这对这个查询并不重要。

这是我正在使用的表：

```
CREATE TABLE `times` (
    `timeId` int(11) NOT NULL AUTO_INCREMENT,
    `date` date NOT NULL,
    `month` char(7) NOT NULL,
    `quarter` char(7) NOT NULL,
    `year` char(4) NOT NULL,
    PRIMARY KEY (`timeId`),
    UNIQUE KEY `date` (`date`)
) ENGINE=MyISAM

CREATE TABLE `reviewCount` (
    `companyId` int(11) NOT NULL,
    `productId` int(11) NOT NULL,
    `createdOnTimeId` int(11) NOT NULL,
    `ageId` int(11) NOT NULL,
    `genderId` int(11) NOT NULL,
    `totalReviews` int(10) unsigned NOT NULL DEFAULT '0',
    PRIMARY KEY (`companyId`,`productId`,`createdOnTimeId`,`ageId`,`genderId`),
    KEY `companyId_fk` (`companyId`),
    KEY `productId_fk` (`productId`),
    KEY `createdOnTimeId` (`createdOnTimeId`),
    KEY `ageId_fk` (`ageId`),
    KEY `genderId_fk` (`genderId`)
) ENGINE=MyISAM

CREATE TABLE `ratingCount` (
    `companyId` int(11) NOT NULL,
    `productId` int(11) NOT NULL,
    `createdOnTimeId` int(11) NOT NULL,
    `ageId` int(11) NOT NULL,
    `genderId` int(11) NOT NULL,
    `ratingTypeId` int(11) NOT NULL,
    `negativeRatings` int(10) unsigned NOT NULL DEFAULT '0',
    `positiveRatings` int(10) unsigned NOT NULL DEFAULT '0',
    `neutralRatings` int(10) unsigned NOT NULL DEFAULT '0',
    `totalRatings` int(10) unsigned NOT NULL DEFAULT '0',
    `ratingsSum` double unsigned DEFAULT '0',
    `totalRecommendations` int(10) unsigned NOT NULL DEFAULT '0',
    PRIMARY KEY (`companyId`,`productId`,`createdOnTimeId`,`ageId`,`genderId`,`ratingTypeId`),
    KEY `companyId_fk` (`companyId`),
    KEY `productId_fk` (`productId`),
    KEY `createdOnTimeId` (`createdOnTimeId`),
    KEY `ageId_fk` (`ageId`),
    KEY `genderId_fk` (`genderId`),
    KEY `ratingTypeId_fk` (`ratingTypeId`)
) ENGINE=MyISAM 
```

'times' 表预先填充了从 1900-01-01 到 2049-12-31 的每一天，两个计数表由 ETL 脚本填充，其中包含按公司、产品、年龄分组的汇总查询，性别、评分类型等...

我对查询的期望是这样的：

```
Date        NewReviews  CumulativeReviewsCount  DailyRatingAverage
2013-01-24  7020        10586                   4.017514595496247
2013-01-25  5505        16091                   4.058400718778077
2013-01-27  2043        18134                   3.992957746478873
2013-01-28  3280        21414                   3.983625730994152
2013-01-29  4648        26062                   3.921597633136095
...
2013-03-09  1608        60297                   3.9409722222222223
2013-03-10  470         60767                   3.7743682310469313
2013-03-11  1028        61795                   4.036697247706422
2013-03-13  494         62289                   3.857388316151203
2013-03-14  449         62738                   3.8282208588957056 
```

我很确定我可以预先计算按年龄、性别等分组的所有内容……除了平均值，但我可能错了。如果我在一天内对两种产品进行了 3 条评论，所有其他组都不同，其中一个的评分为 2 和 5，另一个评分为 4，第一个的每日平均评分为 3.5，第二个评分为 4。这些平均值会给我 3.75，而我预计会得到 3.66667。也许我可以做一些事情，例如将该分组的平均值乘以评论数量，以获得当天的总评分，将它们相加，然后将它们除以最后的总评分数。似乎需要做很多额外的工作，但它可能比我目前正在做的要快。说到这里，这是我当前的查询：

```
SET @cumulativeCount :=
    (SELECT coalesce(sum(rc.totalReviews), 0)
        FROM reviewCount rc
        INNER JOIN times dt ON rc.createdOnTimeId = dt.timeId
        WHERE dt.date < @StartDate
        -- AND clause for filtering by ratingType (default 1), age, gender, product, and company is injected here in C#
    );

SET @dailyAverageWithCarry :=
    (SELECT SUM(rc.ratingsSum) / SUM(rc.totalRatings)
        FROM ratingCount rc
        INNER JOIN times dt ON rc.createdOnTimeId = dt.timeId
        WHERE dt.date < @StartDate
        AND rc.totalRatings > 0
        -- AND clause for filtering by ratingType (default 1), age, gender, product, and company is injected here in C#

        GROUP BY dt.timeId
        ORDER BY dt.date DESC LIMIT 1
    );

SELECT
    subquery.d AS `Date`,
    subquery.newReviewsCount AS `NewReviews`,
    (@cumulativeCount := @cumulativeCount + subquery.newReviewsCount) AS `CumulativeReviewsCount`,
    (@dailyAverageWithCarry := COALESCE(subquery.dailyRatingAverage, @dailyAverageWithCarry)) AS `DailyRatingAverage`
FROM
    (
        SELECT 
            dt.date AS d,
            COALESCE(SUM(rc.totalReviews), 0) AS newReviewsCount,
            SUM(rac.ratingsSum) / SUM(rac.totalRatings) AS dailyRatingAverage
        FROM times dt
        LEFT JOIN reviewCount rc ON dt.timeId = rc.createdOnTimeId
        LEFT JOIN ratingCount rac ON dt.timeId = rac.createdOnTimeId
        WHERE dt.date BETWEEN @StartDate AND @EndDate
        -- AND clause for filtering by ratingType (default 1), age, gender, product, and company is injected here in C#

        GROUP BY dt.timeId
        ORDER BY dt.timeId
    ) AS subquery; 
```

该查询当前需要大约 2 分钟才能运行，其中行数如下：

```
times       54787
reviewCount 276389
ratingCount 473683
age         122
gender      3
ratingType  28
product     70070 
```

任何帮助将不胜感激。我想让这个查询更快，或者如果这样做会更快，预先计算按日期、年龄、性别、产品、公司和 ratingType 分组的值，然后快速汇总查询该表。

**更新#1**：我尝试了 Meherzad 的建议，即向时间和 ratingCount 添加索引：

```
ALTER TABLE times ADD KEY `timeId_date_key` (`timeId`, `date`);
ALTER TABLE ratingCount ADD KEY `createdOnTimeId_totalRatings_key` (`createdOnTimeId`, `totalRatings`); 
```

然后再次运行我的初始查询，它快了大约 1 秒（~89 秒），但仍然太慢。我尝试了 Meherzad 建议的查询，几分钟后不得不将其杀死。

根据要求，这是我查询的 EXPLAIN 结果：

```
id|select_type|table|type|possible_keys|key|key_len|ref|rows|Extra
1|PRIMARY|<derived2>|ALL|NULL|NULL|NULL|NULL|6808032|NULL
2|DERIVED|dt|range|PRIMARY,timeId_date_key,date|date|3|NULL|88|Using index condition; Using temporary; Using filesort
2|DERIVED|rc|ref|PRIMARY,companyId_fk,createdOnTimeId|createdOnTimeId|4|dt.timeId|126|Using where
2|DERIVED|rac|ref|createdOnTimeId,createdOnTimeId_total_ratings_key|createdOnTimeId|4|dt.timeId|614|NULL 
```

我检查了有关缓冲区大小的文章中提到的缓存读取未命中率，它是

```
Key_reads 58303
Key_read_requests 147411279
For a miss rate of 3.9551247635535405672723319902814e-4 
```

**更新#2**：解决了！指数肯定有帮助，所以我将把答案归功于 Meherzad。实际上最大的不同是意识到计算同一查询中的滚动平均值和每日/累积评论计数是将这两个巨大的表连接在一起。我看到变量初始化是在两个单独的查询中完成的，因此决定尝试将两个大查询分成子查询，然后根据 timeId 将它们连接起来。现在它在 0.358 秒内运行，查询如下：

```
SET @StartDate = '2013-01-24';
SET @EndDate = '2013-04-24';

SELECT 
    @StartDateId:=MIN(timeId), @EndDateId:=MAX(timeId)
FROM
    times
WHERE
    date IN (@StartDate , @EndDate);

SELECT 
    @CumulativeCount:=COALESCE(SUM(totalReviews), 0)
FROM
    reviewCount
WHERE
    createdOnTimeId < @StartDateId
    -- Add Filters
;

SELECT 
    @DailyAverage:=COALESCE(SUM(ratingsSum) / SUM(totalRatings), 0)
FROM
    ratingCount
WHERE
    createdOnTimeId < @StartDateId
        AND totalRatings > 0
        -- Add Filters
GROUP BY createdOnTimeId
ORDER BY createdOnTimeId DESC
LIMIT 1;

SELECT 
    t.date AS `Date`,
    COALESCE(q1.newReviewsCount, 0) AS `NewReviews`,
    (@CumulativeCount:=@CumulativeCount + COALESCE(q1.newReviewsCount, 0)) AS `CumulativeReviewsCount`,
    (@DailyAverage:=COALESCE(q2.dailyRatingAverage,
            COALESCE(@DailyAverage, 0))) AS `DailyRatingAverage`
FROM
    times t
        LEFT JOIN
    (SELECT 
        rc.createdOnTimeId AS createdOnTimeId,
            COALESCE(SUM(rc.totalReviews), 0) AS newReviewsCount
    FROM
        reviewCount rc
    WHERE
        rc.createdOnTimeId BETWEEN @StartDateId AND @EndDateId
        -- Add Filters
    GROUP BY rc.createdOnTimeId) AS q1 ON t.timeId = q1.createdOnTimeId
        LEFT JOIN
    (SELECT 
        rc.createdOnTimeId AS createdOnTimeId,
            SUM(rc.ratingsSum) / SUM(rc.totalRatings) AS dailyRatingAverage
    FROM
        ratingCount rc
    WHERE
        rc.createdOnTimeId BETWEEN @StartDateId AND @EndDateId
        -- Add Filters
    GROUP BY rc.createdOnTimeId) AS q2 ON t.timeId = q2.createdOnTimeId
WHERE
    t.timeId BETWEEN @StartDateId AND @EndDateId; 
```

我曾假设两个子查询会非常慢，但它们非常快，因为它们没有加入完全不相关的行。它还指出了一个事实，即我之前的结果与我之前的结果相去甚远。例如，从上面：

```
Date        NewReviews  CumulativeReviewsCount  DailyRatingAverage
2013-01-24  7020        10586                   4.017514595496247 
```

应该是，现在是：

```
Date        NewReviews  CumulativeReviewsCount  DailyRatingAverage
2013-01-24  599         407327                  4.017514595496247 
```

平均值是正确的，但是连接搞砸了新评论和累积评论的数量，我用一个查询验证了这一点。

我还摆脱了与时间表的联接，而是在快速初始化查询中确定开始和结束日期 ID，然后在最后重新加入时间表。

现在结果是：

```
Date        NewReviews  CumulativeReviewsCount  DailyRatingAverage
2013-01-24  599         407327                  4.017514595496247
2013-01-25  551         407878                  4.058400718778077
2013-01-26  455         408333                  3.838926174496644
2013-01-27  433         408766                  3.992957746478873
2013-01-28  425         409191                  3.983625730994152
...
2013-04-13  170         426066                  3.874239350912779
2013-04-14  182         426248                  3.585714285714286
2013-04-15  171         426419                  3.6202531645569622
2013-04-16  0           426419                  3.6202531645569622
2013-04-17  0           426419                  3.6202531645569622
2013-04-18  0           426419                  3.6202531645569622
2013-04-19  0           426419                  3.6202531645569622
2013-04-20  0           426419                  3.6202531645569622
2013-04-21  0           426419                  3.6202531645569622
2013-04-22  0           426419                  3.6202531645569622
2013-04-23  0           426419                  3.6202531645569622
2013-04-24  0           426419                  3.6202531645569622 
```

最后几个平均值也正确地承载了较早的平均值，因为我们在大约 10 天内没有从该客户的数据馈送中导入数据。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T08:15:03.657

试试这个查询

您没有必要的索引来优化您的查询

表`times`添加复合索引`(timeId, dateId)`
表`ratingCount`添加复合索引`(createdOnTimeId, totalRatings)`

正如您已经提到的，您正在根据用户输入使用各种其他过滤器，因此请按照您为它们各自的表 Ex Table复合索引`AND`添加的顺序为这些列创建一个复合索引。 仅当您在查询中添加这些约束时，此索引才有用。`ratingCount``(createdOnTimeId, totalRatings, ratingType, age, gender, product, and company)`**`NOTE`**

我还会检查以确保您的缓冲池足够大以容纳您的索引。您不希望索引在查询期间分页进出缓冲池。

检查缓冲池大小

## **[缓冲区大小](http://www.mysqlab.net/knowledge/kb/detail/topic/myisam/id/5114)**

如果您没有发现性能有任何改进，请`explain`也为您的查询发布声明，这将有助于正确理解问题。

我试图理解您的查询，并重新检查它是否有效。

```
 SELECT 
   * 
 FROM
 (SELECT
  dt.timeId 
  dt.date,
  COALESCE(SUM(rc.totalReviews), 0) AS `NewReviews`,
  (@cumulativeCount := @cumulativeCount + subquery.newReviewsCount) AS    `CumulativeReviewsCount`,
  (@dailyAverageWithCarry := COALESCE(SUM(rac.ratingsSum) / SUM(rac.totalRatings), @dailyAverageWithCarry)) AS `DailyRatingAverage`
  FROM
    times dt
  LEFT JOIN 
    reviewCount rc 
  ON 
    dt.timeId = rc.createdOnTimeId
  LEFT JOIN 
    ratingCount rac ON dt.timeId = rac.createdOnTimeId
  JOIN
    (SELECT @cumulativeCount:=0, @dailyAverageWithCarry:=0) tmp
  WHERE 
    dt.date < @EndDate
    -- AND clause for filtering by ratingType (default 1), age, gender, product, and company is injected here in C#

  GROUP BY 
    dt.timeId
  ORDER BY 
    dt.timeId
 ) AS subquery
 WHERE
    subquery.date>@StartDate; 
```

希望这可以帮助....

# java - Spring MVC 中何时不需要 @RequestParam 注释？

> ID：16205990
> 
> 赞同：13
> 
> 时间：2013-04-25T03:40:36.790
> 
> 标签：java, spring-mvc

我正在查看一些 Spring 3 MVC 控制器代码，我看到 @RequestParam 用于某些参数而不是其他参数。未使用的示例：

```
@RequestMapping(value = "/experiments", method = RequestMethod.GET)
public String getExperimentsPage(ExperimentSearchCriteria criteria, Map<String, Object> model) {
    // method body here
} 
```

什么时候不需要@RequestParam（或类似的参数指定注释）？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2018-01-24T03:17:20.283

好问题，我也一直想知道这个问题，直到我发现文档中提到了它：

> 请注意，@RequestParam 的使用是可选的，例如设置其属性。默认情况下，任何由 BeanUtils#isSimpleProperty 确定的简单值类型的参数，并且未被任何其他参数解析器解析，都被视为使用 @RequestParam 注释。

[https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html#mvc-ann-requestparam](https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html#mvc-ann-requestparam)

大多数时候，除非我的方法参数名称与请求参数不同，否则我不会指定这个，或者，如果该值是可选的，我将需要使用`required=false`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-24T07:24:18.270

@RequestParam 用于传递查询参数。

示例：[http://localhost:8080/employee/get?status=ACTIVE](http://localhost:8080/employee/get?status=ACTIVE)

在这里，我们可以使用以下代码获取状态

@RequestParam(value="status") 字符串状态

我们有一些属性，如 required、defaultValue 等。如果您在下面的代码行中提供 required=false，则 URL 中的 status 参数不是必需的

@RequestParam(value="status",required=false)

URL 类似于[http://localhost:8080/employee/get](http://localhost:8080/employee/get)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-25T12:23:16.880

我不太确定您的问题，但仅`@RequestParam`当您想将方法参数与请求所持有的参数绑定时才需要。

[我认为这在这里](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-ann-requestparam)很清楚。

# c# - 在 C# 中格式化 DateTime 以附加到文件名

> ID：16205991
> 
> 赞同：4
> 
> 时间：2013-04-25T03:40:49.670
> 
> 标签：c#, .net

我需要以这种格式**dd-mm-yyyy-hh-mm-ss**格式化当前 DateTime并且不知道该怎么做。我在互联网上阅读，然后编写以下代码：

```
DateTime saveNow = DateTime.Now;
MessageBox.Show(String.Format("{0:u}", saveNow)); 
```

但这会以这种格式返回日期：

```
2013-04-24 23:11:34Z 
```

有什么可以帮助我的吗？我需要第一种格式来附加到我正在创建的文件名。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-25T03:42:26.333

```
DateTime.Now.ToString("dd-MM-yyyy-hh-mm-ss") 
```

更多信息[在这里](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

# jquery - 为什么 jQuery 不能在 Rails 上运行？

> ID：16205993
> 
> 赞同：0
> 
> 时间：2013-04-25T03:40:56.577
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3

我已经完成了这个命令

```
bundle exec rake assets:precompile RAILS_ENV=production 
```

现在，加载页面时不会启动已加载的 jQuery:( 在预编译之前它曾经可以正常工作...

可能的原因是什么？

**资产/javascripts/refresh_count.js**

```
 jQuery(document).ready(function () {
        refreshPartialMail();
    });

    function refreshPartialMail() {
      $.ajax({
        url: "/messages/refresh_part",
        type: "GET",
        dataType: "script",
      });
    } 
```

**看法**

```
...
<%= javascript_include_tag 'refresh_count' %>
... 
```

**生成的 HTML**

```
<script src="/assets/refresh_count-0cdf67811wb7eavf438be9c8b8cc932bf.js" type="text/javascript"></script> 
```

**“/assets/refresh_count-0cdf67811wb7eavf438be9c8b8cc932bf.js”的内容**

```
function refreshPartialMail(){$.ajax({url:"/messages/refresh_part",type:"GET",dataType:"script"})}jQuery(document).ready(function(){refreshPartialMail()}); 
```

**资产/javascripts/application.js**

```
// This is a manifest file that'll be compiled into application.js, which will include all the files
// listed below.
//
// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,
// or vendor/assets/javascripts of plugins, if any, can be referenced here using a relative path.
//
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// the compiled file.
//
// WARNING: THE FIRST BLANK LINE MARKS THE END OF WHAT'S TO BE PROCESSED, ANY BLANK LINE SHOULD
// GO AFTER THE REQUIRES BELOW.
//
//= require jquery
//= require jquery-ui
//= require twitter/bootstrap
//= require jquery_ujs
//= require jquery.ui.datepicker
//= require autocomplete-rails 
```

执行的时候也这么说`precompile`有关系吗？？？

```
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /var/www/html/sampleapp/Rakefile:7) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T06:16:47.983

我也在我的项目中使用 jquery，它工作正常

在生产上也

这是我的 application.js 内容

```
//= require jquery
//= require jquery_ujs
//= require bootstrap
//= require tinymce
//= require_tree . 
```

我想添加**//= require_tree 。**可能会解决问题请尝试一次并回复....

# java - 将带有指针的 C++ 代码转换为 Java 等效代码

> ID：16205994
> 
> 赞同：0
> 
> 时间：2013-04-25T03:41:03.147
> 
> 标签：java, c++, pointers

所以我正在尝试将这段代码转换为在我的 Java 程序中使用。但是，它有一个指针，我不确定将它翻译成 Java 的最佳方式是什么。

```
/**
* 32-bit Multiplicative Congruential Pseudo Random Number Generator
* Microsoft Visual C++ Version
*/
#include <math.h>
/**
* The seed used by randomNumberGenerator.
*/
long gv_lRandomNumberSeed;
/**
* Returns a random number between 0.0 and 1.0.
* plSeed - Pointer to the seed value to use.
*/
double randomNumberGenerator( long* plSeed ) {
double dZ;
double dQuot;
long lQuot;
dZ = ( *plSeed ) * 16807;
dQuot = dZ / 2147483647;
lQuot = ( long ) floor( dQuot );
dZ -= lQuot * 2147483647;
( *plSeed ) = ( long ) floor( dZ );
return ( dZ / 2147483647 );
} 
```

我需要能够使用此函数中返回的上述数字：

```
/**
* Returns a random variate from an exponential probability
* distribution with the given mean value of dMean.
*/
double exponentialRVG( double dMean ) {
return ( -dMean * log( randomNumberGenerator( &gv_lRandomNumberSeed 
) ) );
} 
```

并且能够为 dMean 输入一个值并获得一个值作为回报..

有什么帮助吗？

（我知道很多人对这个网站上发布的问题很生气，请尽量不要消极，如果是这样的话，请帮助我更好地提出问题）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T03:46:48.753

该指针用于创建`plSeed`一个 inout 变量。

由于您已经将其`randomNumberGenerator`放入某个类，因此您应该将函数参数`plSeed`提升为该类的字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T03:47:12.803

指针用于更新参数的值。我建议重新组织代码以避免使用这样的参数（并直接访问类变量`gv_lRandomNumberSeed`）。其余代码相当直接地转换为 Java（如果您熟悉 Java 的`Random`类）。

哦，请在移植时去掉匈牙利符号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T03:48:11.823

选择包括：

*   将种子作为字段放在与方法 randomNumberGenerator() 相同的类中。
*   将可变对象参数中的种子传递给 randomNumberGenerator()。
*   返回包含新值和新种子的对象中的种子。

Java 的 Random 类使用第一种方法。对于方法的调用者来说，这是最简单的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T03:46:40.913

使用JNI（Java Native Interface）技术。使用 JNI，您可以从 java 调用 C 函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-03T03:16:52.153

该指针基本上只是引用参数的 C 等价物。您可以通过多种方式在 Java 中实现相同的目标。看看下面问题中的答案：

[我可以在Java中通过引用传递参数吗？](https://stackoverflow.com/questions/1068760/can-i-pass-parameters-by-reference-in-java)

# javascript - JavaScript 函数无法识别

> ID：16205996
> 
> 赞同：0
> 
> 时间：2013-04-25T03:41:15.077
> 
> 标签：javascript, html, css, function

我正在制作一个井字游戏，其中有一系列 9 个按钮。我根据 variable 的布尔值将背景图像更改为 an`X`或 an 。 `O``isX`

我有`div`一个 id `stage`，其中包含 class 的所有按钮`square`。我在 上添加了一个侦听器`stage`并传递了一个`event`参数。但是，`clickHandler`无法识别该功能。铬 说：

```
Uncaught ReferenceError: clickHandler is not defined 2Players.html:38
(anonymous function) 
```

HTML：

```
<body>
    <div id="stage">

    </div>
</body> 
```

CSS：

```
#stage{
    width: 400px;
    height: 400px;
    padding: 0px;
    position: relative;
}
.square{
    width: 64px;
    height: 64px;
    background-color: gray;
    position: absolute;
} 
```

JavaScript：

```
 const ROWS = 3;
        const COLS = 3;
        const GAP = 10;
        const SIZE = 64;
        var stage = document.querySelector("#stage");
        var lotOfButtons = [];

        var winningPatterns = ["123","159","147",
                               "258","357","369",
                               "456","789"];
        var isX = true;
        var player1Pattern = "";
        var player2Pattern = "";

        stage.addEventHandler("click",clickHandler,false);
        prepareBoard();

        function prepareBoard(){
            for(var row = 0;row<ROWS;row++){
            for(var col = 0;col < COLS;col++){
                var square = document.createElement("button");
                square.setAttribute("class","square");
                stage.appendChild(square);
                lotOfButtons.push(square);
                square.style.left = col * (SIZE+GAP) + "px";
                square.style.top = row * (SIZE+GAP) + "px";
            }
        }
        function clickHandler(event){
            if(isX===true){
                event.target.style.backgroundImage = "url(../img/X.PNG)";
                isX = false;
            }else{
                event.target.style.backgroundImage = "url(../img/O.PNG)";
                isX = true;
            }
        }
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T03:45:05.563

代码中有一些语法和语义错误——可能比我发现的要多，但它处于工作状态。

1.  您只关闭`for`了`prepareBoard`. 这导致`clickHandler`被定义为*inside* `prepareBoard`而不是 on `window`。
2.  是`addEventListener`，不是`addEventHandler`。

[http://jsfiddle.net/4pgQ8/](http://jsfiddle.net/4pgQ8/)

# asp.net-mvc - 使用 Web api 将图像从桌面应用程序上传到 Web 服务器时，GDI+ 中发生一般错误

> ID：16205999
> 
> 赞同：2
> 
> 时间：2013-04-25T03:41:32.850
> 
> 标签：asp.net-mvc, file-upload, asp.net-web-api, gdi+

我正在尝试使用 web api 将图像从我的 Windows 桌面应用程序 (VB.NET) 上传到 Web 服务器

代码在本地机器上正确运行。但在 Web 服务器上运行时失败，并显示错误消息 **A generic error occurred in GDI+。**

以下是接受图像的 WebApi 代码

公共无效 PostFile(ImageData objImage)

```
 {
        Image img = BytesToImage(objImage.ImageFile);
        string ImageName = objImage.EmployeeGUID.ToString() + ".Jpg";
        string FilePath = "";
        FilePath = System.Web.HttpContext.Current.Server.MapPath("~/photo") ;

        try { 
    img.Save(FilePath + '\\' + ImageName.ToString(), System.Drawing.Imaging.ImageFormat.Jpeg);
        }
        catch (Exception ex) {
        }
    }

  public class ImageData
  {
        public long EmployeeCode;
        public Guid EmployeeGUID; 
        public byte[] ImageFile ;
    }

    private Image BytesToImage(byte[] ImageBytes)
   {
        Image imgNew;
        MemoryStream memImage = new MemoryStream(ImageBytes);
        imgNew = Image.FromStream(memImage);
        return imgNew;
    } 
```

以下代码是从中
上传图像的 VB.NET 代码（Windows 窗体应用程序）

公共子发送文件（）

```
Dim EmployeeGUID As GUID
Dim EmployeeCode As long
    Dim ImagefileToSend As String
    Dim objImage As ImageData
    Dim client As New HttpClient

    client.BaseAddress = New Uri(WebApiPath)
    client.DefaultRequestHeaders.Accept.Add(New MediaTypeWithQualityHeaderValue("application/json"))

    objImage = New ImageData()
    objImage.EmployeeCode = EmployeeCode
    objImage.EmployeeGUID = EmployeeGUID
    objImage.ImageFile = ImageToBytes(Image.FromFile(ImagefileToSend))

    Dim jsonFormatter As MediaTypeFormatter = New JsonMediaTypeFormatter()
    Dim content As HttpContent = New ObjectContent(GetType(ImageData), objImage, jsonFormatter)
    Dim result As System.Net.Http.HttpResponseMessage

    Try
      result = client.PostAsync("api/GetFile", content).Result
    Catch ex As Exception
    End Try
End Sub

Private Class ImageData
    Public EmployeeCode As Long
    Public EmployeeGUID As Guid
    Public ImageFile As Byte()
End Class

Private Function ImageToBytes(ByVal image As Image) As Byte()
    Dim memImage As New IO.MemoryStream
    Dim bytImage() As Byte

    image.Save(memImage, image.RawFormat)
    bytImage = memImage.GetBuffer()

    Return bytImage
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:21:37.627

照片目录没有写权限。现在它工作正常