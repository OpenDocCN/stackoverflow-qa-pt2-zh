# StackOverflow 问答 16000000-16000999

# wpf - 从 ObjectModel.Collection(Of T) 中引发事件

> ID：16000002
> 
> 赞同：0
> 
> 时间：2013-04-14T14:12:27.623
> 
> 标签：wpf, vb.net, class, events, collections

我有一个定义如下的集合：

```
Public Class cData_X_Collection
    Inherits ObjectModel.Collection(Of cData_X)
End Class 
```

此类在 WPF 表单上的 ListView 中使用并且可以正常工作。

cData_X 类有一个事件：

```
Public Event SendCheckBoxChange() 
```

如何在 cData_X_Collection 中捕获该事件（当它引发时）？

# c - 如何在前台移动进程

> ID：16000014
> 
> 赞同：-2
> 
> 时间：2013-04-14T14:13:56.447
> 
> 标签：c, bash, unix, pid, background-foreground

我写了命令 bash 解释器的相似性。

```
#include <sys/types.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <signal.h>
#include <unistd.h>
#include <fcntl.h>
#include <wait.h>
#include "shell.h"
#include <string.h>

char *infile;
char *outfile;
char *appfile;
struct command cmds[MAXCMDS];
char bkgrnd;
int k = 0;

static void my_wait(pid_t pid, pid_t bkgrnds[]);

int main(int argc,char *argv[])
{
    int i;
    char line[1024];      /*  allow large command lines  */
    int ncmds;
    char prompt[50];      /* shell prompt */
    pid_t bkgrnds[1024];     /* for fg */

    /* PLACE SIGNAL CODE HERE */
    signal(SIGINT, SIG_IGN);
    signal(SIGTSTP, SIG_IGN);

    sprintf(prompt,"[%s] ",argv[0]);

    while (promptline(prompt, line, sizeof(line)) > 0)
    {    /* l eof  */

        if (0 >= (ncmds = parseline(line)))
        {
            continue;   /* read next line */
        }
#ifdef DEBUG
        {
            int i, j;
            for (i = 0; i < ncmds; i++)
            {
                for (j = 0; NULL != cmds[i].cmdargs[j]; j++)
                {
                    fprintf(stderr, "cmd[%d].cmdargs[%d] = %s\n", i, j, cmds[i].cmdargs[j]);
                }
                fprintf(stderr, "cmds[%d].cmdflag = %o\n", i, [i].cmdflag);
            }
        }
#endif
        {
            int previous_pipe_output = -1;
            int pipeline_start = 0;
            pid_t pids[MAXCMDS];
            fprintf(stderr, "%d %s\n", ncmds, cmds[0].cmdargs[0]);
            if (1 == ncmds && 0 == strcmp(cmds[0].cmdargs[0], "fg"))
            {
                if (0 == k)
                {
                    fprintf(stderr, "k == 0\n");
                    continue;
                }
                int num = -1;
                signal(SIGTTOU, SIG_IGN);
                if (0 == cmds[0].cmdargs[1])
                {
                    num = k - 1;
                }
                else
                {
                    num = atoi(cmds[0].cmdargs[1]);
                }
                fprintf(stderr, "%d\n", bkgrnds[num]);

                if(-1 == tcsetpgrp(STDIN_FILENO, bkgrnds[num]))
                {
                    perror("Couldn't set terminal foreground process group");
                    return EXIT_FAILURE;
                }
                signal(SIGTTOU, SIG_DFL);
                my_wait(bkgrnds[num], bkgrnds);
                signal(SIGTTOU, SIG_IGN);
                if (-1 == tcsetpgrp(STDIN_FILENO, getpgrp()))
                {
                    perror("Couldn't set terminal foreground process group");
                    return EXIT_FAILURE;
                }
                signal(SIGTTOU, SIG_DFL);
                continue;
            }
            for (i = 0; i < ncmds; i++)
            {
                int pipefd[2] = {-1, -1};
                if(cmds[i].cmdflag & OUTPIP)
                {
                    if(-1 == pipe(pipefd))
                    {
                        perror("Couldn't create pipe");
                        return EXIT_FAILURE;
                    }
                }
                {
                    /*  FORK AND EXECUTE  */
                    pids[i] = fork();
                    if (0 == pids[i])
                    {
                        signal(SIGINT, SIG_DFL);
                        signal(SIGTSTP, SIG_DFL);
                        if(-1 == setpgid(0, (cmds[i].cmdflag & INPIP)? pids[pipeline_start]:0))
                        {
                            perror("Couldn't set process group ID");
                            return EXIT_FAILURE;
                        }
                        if (!bkgrnd && !(cmds[i].cmdflag & INPIP))
                        {
                            signal(SIGTTOU, SIG_IGN);
                            if(-1 == tcsetpgrp(STDIN_FILENO, getpgrp()))
                            {
                                perror("Couldn't set terminal foreground process group");
                                return EXIT_FAILURE;
                            }
                            signal(SIGTTOU, SIG_DFL);
                        }

                        //....
                        execvp(cmds[i].cmdargs[0], cmds[i].cmdargs);
                        perror("Couldn't execute command");
                        return EXIT_FAILURE;
                    }
                    else if (-1 != pids[i])
                    {
                        if (!bkgrnd)
                        {
                            if (!(cmds[i].cmdflag & OUTPIP))
                            {
                                {
                                    int j = 0;
                                    for (j = pipeline_start; j <= i; j++)
                                    {
                                        my_wait(pids[j], bkgrnds);
                                    }
                                }
                                signal(SIGTTOU, SIG_IGN);
                                if (-1 == tcsetpgrp(STDIN_FILENO, getpgrp()))
                                {
                                    perror("Couldn't set terminal foreground process group");
                                    return EXIT_FAILURE;
                                }
                                signal(SIGTTOU, SIG_DFL);
                            }
                        }
                        else
                        {
                            printf("Background process ID: %ld\n", (long)pids[i]);
                        }
                    }
                    else
                    {
                        perror("Couldn't create process");
                    }
                }
            }
        }
    }  /* close while */
    return EXIT_SUCCESS;
}

static void my_wait(pid_t pid, pid_t bkgrnds[])
{
    int status = 0;
    if (-1 != waitpid(pid, &status, WUNTRACED))
    {
        if (WIFSTOPPED(status) && (SIGTSTP == WSTOPSIG(status)))
        {
            bkgrnds[k++] = pid;
            //printf("%d %d\n", pid, k);
            kill(pid, SIGCONT);
            bkgrnd = 1;
            printf("Background process ID: %ld\n", (long)pid);
        }
    }
    else
    {
        perror("Couldn't wait for child process termination");
    }

} 
```

现在我想实现一个命令 fg.

```
if (1 == ncmds && 0 == strcmp(cmds[0].cmdargs[0], "fg"))
            {
                if (0 == k)
                {
                    fprintf(stderr, "k == 0\n");
                    continue;
                }
                int num = -1;
                signal(SIGTTOU, SIG_IGN);
                if (0 == cmds[0].cmdargs[1])
                {
                    num = k - 1;
                }
                else
                {
                    num = atoi(cmds[0].cmdargs[1]);
                }
                fprintf(stderr, "%d\n", bkgrnds[num]);

                if(-1 == tcsetpgrp(STDIN_FILENO, bkgrnds[num]))
                {
                    perror("Couldn't set terminal foreground process group");
                    return EXIT_FAILURE;
                }
                signal(SIGTTOU, SIG_DFL);
                my_wait(bkgrnds[num], bkgrnds);
                signal(SIGTTOU, SIG_IGN);
                if (-1 == tcsetpgrp(STDIN_FILENO, getpgrp()))
                {
                    perror("Couldn't set terminal foreground process group");
                    return EXIT_FAILURE;
                }
                signal(SIGTTOU, SIG_DFL);
                continue;
            } 
```

问题：PID 我知道如何将其带到前台？那就是如果我导入

猫

CTRL + Z

fg

<- 这里将继续 cat 提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:52:01.807

对不起。我只是忘了发送 SIGCONT 进程和所有内容。添加并工作。`kill(bkgrnds[num], SIGCONT);`

# jquery - 对服务器的单个 ajax 请求，尝试在 jquery 中多次重用对象

> ID：16000015
> 
> 赞同：0
> 
> 时间：2013-04-14T14:13:58.807
> 
> 标签：jquery, ajax, json

我为产品创建了一个图片库，并有 2 个不同的视图。每次选择一个视图时，都会向服务器发送一个 ajax 请求并返回一个 json 对象。我的代码目前可以工作，但我担心它可以变得更快，而且我不确定 $.empty() 是否真的从内存中清除了 json 对象。

编码：

```
<div id=grid2></div>
<div id=grid4></div>
<section id=maindisplay> 

$.ajax({   // DEFAULT VIEW                                    
  url: 'query.php',                          
  data: "",                         
  dataType: 'json',                      
  success: ajaxfunction
}); 

function ajaxfunction(json_data){
  console.log (json_data) 
  //format json_data here in to a table
  $("#maindisplay").append(table);
}

$("#grid2").click(function(){
  $.ajax({                                      
    url: 'query.php',                            
    data: "",                        
    dataType: 'json',                     
    success: ajaxfunction2
  });
});

function ajaxfunction2(json_data){  //ONE OF THE GRID VIEWS
  $("#maindisplay").empty();
  console.log (json_data) 
  //format json_data here in to a table
  $("#maindisplay").append(table);
}

</section> 
```

我已经尝试过，但是我可以使用 json 数据在本地创建另一个对象以供重用而无需再次调用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T14:26:47.600

如果我理解正确，您不想检索 JSON 数据并多次引用它？如果是这样，那么可以，您只需要在发送 ajax 请求之前创建一个变量，然后将数据分配给该变量。类似于下面的。

```
var jsonData;
$.ajax({                                 
  url: 'query.php',                          
  data: "",                         
  dataType: 'json',                      
  success: function(data){
     jsonData = data;
     ajaxfunction(data);
  }
}); 
```

# c# - 如何将空图像添加到表格

> ID：16000016
> 
> 赞同：3
> 
> 时间：2013-04-14T14:14:05.917
> 
> 标签：c#, winforms

如果用户不为图片框设置图像，我想在表中保存 empy 图像。

我的代码是：

```
 byte[] arrImage;
 if (picperson.Image != null)
 {
     //convert image to byte
     MemoryStream ms = new MemoryStream();
     picperson.Image.Save(ms, picperson.Image.RawFormat);
     arrImage = ms.GetBuffer();
     ms.Close();
 }
 else arrImage = null;

objcommand.Parameters.AddWithValue("@picture", arrImage); 
```

当他添加空图像时， picperson.Image.Save(ms, picperson.Image.RawFormat); 行发生异常

如何将空图像添加到表中？

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T16:12:32.327

You can't pass a null value for your image parameter, so a work around would be to send in a zero byte array:

```
if (picperson.Image != null) {
     //convert image to byte
} else {
 arrImage = new byte[0];
} 
```

Unfortunately, that will not set the field to null.

To set the field to null would probably be handled best with a separate query, for example:

```
using (SqlCommand q = new SqlCommand("INSERT INTO M (MyImage) VALUES (null)", cn)
... 
```

which does not use parameters.

As far as reading some of the comments are concerned, it sounds like the image format needs to be specified. Try using the actual format that you want the image saved as:

```
picperson.Image.Save(ms, ImageFormat.Bmp);
// or
picperson.Image.Save(ms, ImageFormat.Jpeg);  // or Png, etc. 
```

# asp.net-mvc - ASP.NET MVC 永久设置全局可访问变量的值

> ID：16000022
> 
> 赞同：0
> 
> 时间：2013-04-14T14:14:30.860
> 
> 标签：asp.net-mvc, save, global-variables

我正在用三种类型的用户在 ASP.NET MVC 中编写一个应用程序：学生、员工和管理员。

学生必须能够选择和申请由管理员设置的课程。程序按术语分开：夏季、秋季和春季，它们保存在程序表中称为“术语”的数据库字段中。

我希望管理员能够设置期限，因此当用户（学生和员工）登录时，他们只能查看仅适用于该期限的程序。问题是我无法将其保存在数据库中，因为我的数据库具有诸如 StaffProfile（检索管理员和员工的用户名和密码）和程序（包含每个程序的信息）之类的表，并且仅针对该术语的新表不会成为一个理想的解决方案。

我想将术语变量保存在某个地方，它可以在全局范围内访问，并且在应用程序结束时不会被销毁。

也许这有一个我看不到的简单解决方案。我已经考虑过 ApplicationState 但我不确定这是否是要走的路。欢迎任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:19:35.903

根据我对你的问题的理解。您可以将全局变量存储在 web.config 或 global.asax 文件中。你也可以使用会话。通过静态声明静态类，您还有另一种选择。喜欢

```
public static class GlobalVariables
{
    // readonly variable
    public static string Foo
    {
        get
        {
            return "foo";
        }
    }

    // read-write variable
    public static string Bar
    {
        get
        {
            return HttpContext.Current.Application["Bar"] as string;
        }
        set
        {
            HttpContext.Current.Application["Bar"] = value;
        }
    }
} 
```

如果我错了，请纠正我。

# python - 在 Windows 7 上运行 cudamat Makefile.win

> ID：16000033
> 
> 赞同：0
> 
> 时间：2013-04-14T14:15:48.063
> 
> 标签：python, windows, cuda, makefile

我使用 Visual Studio 2008 和 2010 的 cmd 来运行这个 make 文件：

```
cudamat: cudamat.cu cudamat.cuh cudamat_kernels.cu cudamat_kernels.cuh learn.cu learn_kernels.cu learn_kernels.cuh
nvcc -O --ptxas-options=-v -o libcudamat.dll --shared cudamat.cu cudamat_kernels.cu -lcublas
nvcc -O --ptxas-options=-v -o libcudalearn.dll --shared learn.cu learn_kernels.cu -lcublas

clean:
rm *.linkinfo *.pyc *.so 
```

使用`nmake -f Makefile.win`cudamat 目录中的命令，但我得到了这个：

```
Makefile.win(2) : fatal error U1036: syntax error : too many names to left of '=' 
```

# knockout.js - 订阅后在 knockoutjs 中加载初始值

> ID：16000034
> 
> 赞同：4
> 
> 时间：2013-04-14T14:16:01.673
> 
> 标签：knockout.js

我正在使用 knockoutjs 并有两个下拉框。其中之一取决于另一个。仅此一项就可以正常工作，但我现在想设置初始值及其选择的值。

由于我订阅了第一个下拉框中的更改以加载第二个下拉框，因此我现在不仅加载了两次数据，而且还丢失了第二个下拉框中的初始选择。这样做的原因是，每当第一个更改其值时，我必须清除第二个下拉列表的选择。否则可能会预选错误的值。

见：http: [//jsfiddle.net/sturm/6Mp33/31/](http://jsfiddle.net/sturm/6Mp33/31/)

```
<select name="model" data-bind="options: models, value: selectedModel, optionsText: 'name', optionsValue: 'id', optionsCaption: 'Choose...'"></select>
<select name="makes" data-bind="options: makes, value: selectedMake, optionsText: 'name', optionsValue: 'id', optionsCaption: 'Choose...'"></select>

function viewModel(initialModels, initialSelectedModel, initialMakes, initialSelectedMake) {
    var self = this;

    self.models = ko.observableArray(initialModels);
    self.selectedModel = ko.observable(initialSelectedModel);
    self.makes = ko.observableArray(initialMakes);
    self.selectedMake = ko.observable(initialSelectedMake);

    self.selectedModel.subscribe(function() {
        // This runs after the initial data and clears the selection
        if (self.selectedModel()) {
            $.ajax({
                type: 'POST',
                url: '/echo/json/',
                data: {
                    json: ko.toJSON(makeData[self.selectedModel()-1])
                },
                context: this,
                success: function(data) {
                    self.makes(data);
                    // The folowing line is the problem
                    self.selectedMake(undefined);
                },
                dataType: 'json'
            });
        } else {
            self.makes.removeAll();
        }
    });
};

ko.applyBindings(new viewModel(modelData, 2, makeData[1], 2)); 
```

如何在不加载两次并保持选择的情况下干净地设置初始值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-23T17:25:09.797

只需从评论中添加 Nemesv 的答案即可关闭

**更新淘汰赛**

# vb.net - 用于通知的 PayPal IPN 问题

> ID：16000035
> 
> 赞同：0
> 
> 时间：2013-04-14T14:16:06.670
> 
> 标签：vb.net, paypal, paypal-ipn

我已经设置了一个 PDT 表单，它正在工作并收集付款，然后使用以下参数返回到适当的 url

tx=1* ***** ***** *X&st=已完成&amt=0.02&cc=GBP&cm=&item_number=NA

我正在使用以下示例代码：

```
Dim strSandbox As String = "https://www.sandbox.paypal.com/cgi-bin/webscr"
    Dim strLive As String = "https://www.paypal.com/cgi-bin/webscr"
    Dim req As HttpWebRequest = CType(WebRequest.Create(strLive), HttpWebRequest)

    'Set values for the request back
    req.Method = "POST"
    req.ContentType = "application/x-www-form-urlencoded"
    Dim Param() As Byte = Request.BinaryRead(HttpContext.Current.Request.ContentLength)
    Dim strRequest As String = Encoding.ASCII.GetString(Param)
    strRequest = strRequest & "&cmd=_notify-validate"
    req.ContentLength = strRequest.Length

    'for proxy
    'Dim proxy As New WebProxy(New System.Uri("http://url:port#"))
    'req.Proxy = proxy

    'Send the request to PayPal and get the response
    Dim streamOut As StreamWriter = New StreamWriter(req.GetRequestStream(), Encoding.ASCII)
    streamOut.Write(strRequest)
    streamOut.Close()
    Dim streamIn As StreamReader = New StreamReader(req.GetResponse().GetResponseStream())
    Dim strResponse As String = streamIn.ReadToEnd()
    streamIn.Close()

    If strResponse = "VERIFIED" Then
        'check the payment_status is Completed
        'check that txn_id has not been previously processed
        'check that receiver_email is your Primary PayPal email
        'check that payment_amount/payment_currency are correct
        'process payment
        lit1.Text = "verified"
    ElseIf strResponse = "INVALID" Then
        'log for manual investigation
        lit1.Text = "invalid"
    Else
        'Response wasn't VERIFIED or INVALID, log for manual investigation
        lit1.Text = "unknown"
    End If
    lit1.Text = lit1.Text & "<br /><br />" & strRequest.ToString 
```

我只收到无效响应，所以我试图查看发送到 Paypal 的内容，但它只发送 &cmd=_notify-validate 而不是其余参数。

所以我手动添加了参数，但仍然无效。

有人可以帮忙解决我所缺少的吗？支付成功

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T22:08:18.027

我排序了，我不明白这个过程，但现在做

# asp.net - DotNetOpenAuth AspNet 请求 status_update 权限

> ID：16000037
> 
> 赞同：0
> 
> 时间：2013-04-14T14:16:38.507
> 
> 标签：asp.net, asp.net-mvc, dotnetopenauth

我正在使用[DotNetOpenAuth.AspNet](https://nuget.org/packages/DotNetOpenAuth.AspNet)进行 Facebook 身份验证。一切正常。

但是，我必须更改应用程序权限，因此当用户登录时，我应该请求 status_update 权限。我在 Facebook 应用程序配置中更改了权限，但我的应用程序中没有更新登录窗口。

![在此处输入图像描述](https://i.stack.imgur.com/9r8EQ.png)

我还尝试通过传递额外的数据范围属性来处理 OAuthWebSecurity.RegisterFacebookClient 方法调用，但没有任何访问权限。

有人知道如何使用 DotNetOpenAuth.AspNet 请求额外的 Facebook 权限吗？

**编辑：**

当我尝试发布时，我收到了这个错误：

(OAuthException - #200) (#200) 用户未授权应用程序执行此操作

这就是我尝试登录我的应用程序时得到的结果：

![在此处输入图像描述](https://i.stack.imgur.com/UDHMR.png)

没有 status_update 权限。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-05T05:59:01.210

在这一点上你不能。在 DotNetOpenAuth.AspNet 的内部深处，有一个名为 FacebookClient 的类。类中有一个称为“GetServiceLoginUrl”的方法。

4.3.0 版中的此方法将范围硬编码为“电子邮件”。

但是，如果您访问 Nuget 预发布存储库，并从那里获取预发布版本 4.3.1，则 FacebookClient 类在构造函数中带有一个附加参数 - 范围。您可以在其中添加权限，它会将它们添加到请求 url。

预发布包源为[http://teamcity.dotnetopenauth.net:82/guestAuth/app/nuget/v1/FeedService.svc/](http://teamcity.dotnetopenauth.net:82/guestAuth/app/nuget/v1/FeedService.svc/)

```
new FacebookClient(appId, secret, new[] {"email","manage_pages"}); 
```

你应该很高兴。

# java - Java，当面板改变大小时改变框架的大小，家庭作业

> ID：16000038
> 
> 赞同：2
> 
> 时间：2013-04-14T14:16:49.613
> 
> 标签：java, swing

新手，请多多包涵。我正在用 Java 编写一个推箱子游戏，我启动了游戏，但是我遇到了 pack() 的问题。我希望我的框架根据关卡的大小自行调整大小，不同的关卡有不同的大小。面板正在为不同的尺寸正确绘制，所以如果我只是最大化框架，那么一切都很好，但是我如何调用 pack() 来自动调整框架的大小？我试图将 pack() 放在我的 Main 方法中，但我怀疑解决方案不是那么简单（可能我构建程序的方式也无济于事）。将 pack() 放在 Main 方法中会生成附加的图像，一个非常小的矩形，基本上只有最小、最大和关闭按钮。![框架](https://i.stack.imgur.com/Nbcz6.png)

我想实施的推荐解决方案如下：

编写 Sokoban 构造函数，使其将周围的 JFrame 作为引用参数，然后对象在字段中记住该参数。然后，在您更改推箱子组件的首选大小后，调用此存储的周围 JFrame 的方法包。

我附上了我的构造函数和 Main 方法的代码。

```
public class Sokoban extends JPanel {

LevelReader lReader = new LevelReader();      
private static final int SQUARESIZE = 50;  // square size in pixels
int currentLevel = 0;
int height = 0;
int width = 0;
int x = 0;
int y = 0;
Contents [][] mapArray;

public Sokoban(String fileName) {
    lReader.readLevels(fileName);
    initLevel(currentLevel);
    KeyListener listener = new MyKeyListener();
    addKeyListener(listener);
    this.setPreferredSize(new Dimension(500,500));
    setFocusable(true);

}

public static void main(String[] args) {
    JFrame frame = new JFrame("Sokoban");
    Sokoban sokoban = new Sokoban("m1.txt");
    frame.add(sokoban);
    frame.setVisible(true);
    frame.pack();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T15:17:53.213

> 编写 Sokoban 构造函数，使其将周围的 JFrame 作为引用参数，然后对象在字段中记住该参数。然后在更改推箱子组件的首选大小后，调用此存储的周围 JFrame 的方法包

## 答案已更新为使用@mKorbel 建议的[键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)（感谢提示，代码现在看起来更干净了）

你的 Fried 想要告诉的是创建这样的东西（我删除了你在这个例子中不需要的代码）

```
class Sokoban extends JPanel {

    private JFrame frame;

    private class MyAction extends AbstractAction {
        private Dimension dimension;

        public MyAction(Dimension dimension) {
            this.dimension = dimension;
        }

        @Override
        public void actionPerformed(ActionEvent e) {
            //we will pack only when dimensions will need to change
            if (!getPreferredSize().equals(dimension)) {
                setPreferredSize(dimension);
                frame.pack();
            }
        }
    }

    public Sokoban(String fileName, JFrame tframe) {
        this.frame = tframe;
        setFocusable(true);
        setPreferredSize(new Dimension(100, 100));
        setBackground(Color.red);
        add(new JLabel("press A, S, D"));

        getInputMap().put(KeyStroke.getKeyStroke('a'), "typed a");
        getInputMap().put(KeyStroke.getKeyStroke('s'), "typed s");
        getInputMap().put(KeyStroke.getKeyStroke('d'), "typed d");

        getActionMap().put("typed a", new MyAction(new Dimension(100, 100)));
        getActionMap().put("typed s", new MyAction(new Dimension(200, 100)));
        getActionMap().put("typed d", new MyAction(new Dimension(100, 200)));
    }

    public static void main(String[] args) {
        JFrame frame = new JFrame("Sokoban");
        Sokoban sokoban = new Sokoban("m1.txt", frame);

        frame.setContentPane(sokoban);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setVisible(true);
    }
} 
```

在构造函数`public Sokoban(String fileName, JFrame tframe)`中，您需要传递对包含推箱子面板的框架的引用。您需要将该引用中的对象存储在类中的某个位置，例如在类字段中`private JFrame frame;`。

现在感谢该参考，每当您更改面板的大小时，您都可以使用它通过调用来更改包含该面板的框架的大小，`frame.pack()`并使其适应新的大小。

# html - 这两个 CSS 选择器之间的区别

> ID：16000050
> 
> 赞同：-2
> 
> 时间：2013-04-14T14:18:00.493
> 
> 标签：html, css

`div.red > p`选择器和选择器有什么区别`div.red p`？

请指出这些 CSS 选择器之间的主要区别。

### HTML

```
<div class="red"><p></p><div class="blue"><p></p></div> 
```

第一个选择器是否只选择第一个`<p>`元素？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T14:19:31.433

```
div > p 
```

这将只选择`p`属于`div`

```
div p 
```

这将选择 a 的所有后代（即孩子、孩子的孩子等）`p`元素`div`

请参阅[此处](http://www.w3.org/TR/CSS2/selector.html)了解更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T14:22:00.773

解释这一点的最简单方法是制作一个简单的[**DEMO**](http://jsfiddle.net/zQ54P/)。

**HTML**

```
<div id="id">
    <p>First text</p>
    <div>
        <p>Second text</p>
    </div>
</div> 
```

**CSS**

```
div#id > p { background: red; }
div#id p { color: green; } 
```

只有第一个文本有红色背景，因为`>`只接受`p`那是`div#id`. 第二个不匹配，因为在and`div`之间还有另一个。`div#id``p`

但是，它们都是绿色的，因为无论文档对象模型的深度如何，都`div#id p`匹配 的所有`p`后代。`div#id`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T14:20:10.517

第一个选择器说“所有`p`标签都是`div`”的直接子级。第二个说“`p`里面的所有标签`div`，不管他们是孩子，孙子”等等。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-14T14:22:39.993

考虑以下[HTML](http://en.wikipedia.org/wiki/HTML)：

```
<div>
    <p>1</p>
    <p>
        <p>2</p>
        <p>3</p>
    </p>
    <p>4</p>
</div>
<p>5</p> 
```

`div > p`只会选择直接后代：1、4 和其中`p`嵌套了元素的那个。

`div p`将选择一个 div 中的所有 p 个标签：1 2 3 4。

# javascript - 使用Javascript选择文档中的所有文本框？

> ID：16000055
> 
> 赞同：1
> 
> 时间：2013-04-14T14:19:05.913
> 
> 标签：javascript, textbox

当用户单击它时，我想选择文本框的所有内容。`onfocus`但是，由于我的文档包含近 5 个文本框，我不想为每个文本框提供 ID 选择器或属性，而是选择所有文本框。

例如：`var x = document.getElementsByTagName("p");`

上面的代码选择文档中的所有段落。所以，我需要所有文本框的类似代码。我试过更换`input`，但`input[type=text]`没有任何效果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T14:36:13.747

# 试试这个： -

[http://jsfiddle.net/aidioo7/zvgHx/](http://jsfiddle.net/adiioo7/zvgHx/)

# JS：

```
var x = document.getElementsByTagName("INPUT");
var y = [];
var cnt2 = 0;
for (var cnt = 0; cnt < x.length; cnt++) {
    if (x[cnt].type == "text") y.push(x[cnt]);
}

alert("Total number of text inputs: " + y.length); 
```

# HTML：

```
<input type="text" id="input1" value="input1"></input>
<input type="text" id="input2" value="input2"></input>
<input type="text" id="input3" value="input3"></input>
<input type="text" id="input4" value="input4"></input>
<input type="text" id="input5" value="input5"></input> 
```

**因此，数组`y`将保存所有类型为文本的输入。**

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-04-14T14:28:52.640

使用 jQuery：`$('input[type=text]')`这样就可以了。

[http://jquery.com/](http://jquery.com/)

# scala - 使用反射或宏时如何可靠地比较符号？

> ID：16000058
> 
> 赞同：2
> 
> 时间：2013-04-14T14:19:18.250
> 
> 标签：scala, reflection, scala-macros

如何`Symbol`在 scala 宏中或使用反射时可靠地比较两个 s 是否相等？是否保证当两个`Symbol`对象表示相同的符号（相同的类、相同的局部值或变量等）时，它们在`==`运算符方面是相等的？

我需要这个做什么？我有`Tree`一个宏，它代表一些可能引用一些本地值的表达式。我想转换这棵树并将对这个本地值的所有引用替换为对其他值的引用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T15:45:45.160

是的，`==`（或者`eq`，引用相等比较，在这种情况下也是如此）是比较符号的方法。

# php - PHP cURL 和响应代码 302

> ID：16000059
> 
> 赞同：0
> 
> 时间：2013-04-14T14:19:26.090
> 
> 标签：php, curl, http-status-code-302

我正在尝试使用以下代码发送一个页面：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "http://www.olx.es/posting_success.php");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true); 
curl_setopt($ch, CURLOPT_MAXREDIRS, 10);
curl_setopt($ch, CURLINFO_HEADER_OUT, 1); 
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTREDIR, 2);
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST"); 
curl_setopt($ch, CURLOPT_POSTFIELDS, array("itemid" => $json['id'], "sh" => $json['sh']));
curl_setopt($ch, CURLOPT_HTTPHEADER, array("Content-type: application/x-www-form-urlencoded"));
$response = curl_exec($ch);
curl_close($ch); 
```

在这样做的过程中，我返回了一个服务器错误，上面写着“无效请求”。

我注意到，如果我通过 telnet 手动执行请求，我第一次返回 302，尽管事实上我已经关注他，但没有工作，也许就是这样。

随着wireshark获得客户实际发送的内容，我做错了什么？

```
**Hypertext Transfer Protocol:**
POST /posting_success.php HTTP/1.1
Host: www.olx.es
Connection: keep-alive
Content-Length: 52
Cache-Control: max-age=0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Origin: http://www.olx.es
User-Agent: Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.64 Safari/537.31
Content-Type: application/x-www-form-urlencoded
Referer: http://www.olx.es/posting.php?categ_id=322
Accept-Encoding: gzip,deflate,sdch
Accept-Language: es-ES,es;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3

**Line-based text data: application/x-www-form-urlencoded:**
itemid=501347053&sh=b9302ed20769ae3717f896a33a369aa2 
```

对不起我的英语不好..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T14:26:26.863

无需进行自定义请求、发送此类标头或使用 CURLINFO_HEADER_OUT。
尝试这个：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "http://www.olx.es/posting_success.php");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true); 
curl_setopt($ch, CURLOPT_MAXREDIRS, 10);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTREDIR, 2);
curl_setopt($ch, CURLOPT_POSTFIELDS, http_build_query( array("itemid" => $json['id'], "sh" => $json['sh']) ));
$response = curl_exec($ch);
curl_close($ch); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T14:27:45.213

看来您在 POST 请求中有问题。请试试

```
$fields=array('itemid' => $json['id'], 'sh' =>urlencode ($json['sh'])); 
```

格式化您的字段

```
foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
rtrim($fields_string,'&'); 
```

然后在 Curl OPt 中使用

```
 curl_setopt($ch1,CURLOPT_POST,count($fields));
    curl_setopt($ch1,CURLOPT_POSTFIELDS,$fields_string); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-08T22:39:07.503

问题是，这个表单不是 multipart/form-data，然后你将创建一个查询字符串来发布。请参阅手册页[http://php.net/manual/en/function.curl-setopt.php](http://php.net/manual/en/function.curl-setopt.php)。然后你给一个数组。标头将设置为 multipart/form-data。这是无效的请求。

**解决方案是**

字符串很容易构建 "&itemid=".json['id']."&sh=".json['sh']; 把它放在 CURLOPT_POSTFIELDS 中。

问候（再见），对不起我的英语......

# android - Facebook打开新的登录活动

> ID：16000060
> 
> 赞同：1
> 
> 时间：2013-04-14T14:19:27.277
> 
> 标签：android, facebook, android-activity, sdk, single-sign-on

在我的应用程序中是来自 FB-SDK 3.0 的 com.facebook.widget.LoginButton。

如果我单击此 LoginButton，则会使用我的对话框身份验证打开一个新的空白 Activity。我不知道为什么会发生这种情况以及如何防止这种情况发生。我希望对话身份验证流过我的正常活动。感谢 com.facebook.widget.LoginButton，我的应用程序中没有要登录的代码，一切都由我的 LoginButton 完成。只是一个处理登录的onActivityResult-Method。

[https://developers.facebook.com/docs/howtos/androidsdk/3.0/native-login/](https://developers.facebook.com/docs/howtos/androidsdk/3.0/native-login/)

有人知道答案吗？谢谢

# semantic-web - 向网站添加语义的最佳实践

> ID：16000064
> 
> 赞同：5
> 
> 时间：2013-04-14T14:19:36.793
> 
> 标签：semantic-web, rdfa

我对网站的语义有点困惑。我知道每个 URI 都应该代表一个资源。我假设 RDFa 在网页内提供的所有信息都描述了由该网页的 URI 表示的资源。*我的问题是：为网站的子页面*提供语义数据的最佳实践是什么。

就我而言，我想使用带有 schema.org 和 opengraph 词汇表的 RDFa 为一个名为 magma 的剧院组创建一个网站。假设我有欢迎页面 ( `http://magma.com/`)、联系页面 ( `http://magma.com/contact/`) 和个人播放页面 ( `http://magma.com/play/<playid>/`)。

现在我认为欢迎页面和联系页面都代表相同的资源（岩浆），同时提供有关该资源的不同信息。然而，播放页面代表仅由岩浆执行的播放。还是说播放页面也代表岩浆，但提供有关该组将要执行的播放的信息是否更好？我偶然发现的第三个选项是[http://schema.org/WebPage](http://schema.org/WebPage)。特别是像这样的亚型`ContactPage`似乎是相关的。

在实现方面，我将 RDFa 放在哪里？

最后：我的选择将如何改变第三方（谷歌、脸书……）对待网站的方式？

我意识到这个问题有点模糊。为了使其更具体，我将添加一个您可能会批评的示例：

```
<html vocab="http://schema.org/" typeof="TheaterGroup">
  <head>
    <meta charset="UTF-8"/>
    <title>Magma - Romeo and Juliet</title>

    <!-- magma sematics from a template  file -->
    <meta property="name" content="Magma"/>
    <meta property="logo" content="/static/logo.png"/>
    <link rel="home" property="url" content="http://magma.com/"/>
  </head>

  <body>
    <h1>Romeo and Juliet</h1>

    <!-- semantics of the play -->
    <div typeof="CreativeWork" name="Romeo and Juliet">
      ...
    </div>

    <h2>Shows</h2>

    <!-- samantics of magma events -->
    <ul property="events">
      <li typeof="Event"><time property="startDate">...</time></li>
      ...
    </ul>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-15T13:59:59.733

> 我知道每个 URI 都应该代表一个资源。我假设网页内 RDFa 提供的所有信息都描述了由该网页的 URI 表示的资源。

嗯，HTTP URI 可以识别页面本身或页面的内容。您无法仅通过查看 URI 来识别页面或事物。

示例（在 Turtle 语法中）：

```
<http://en.wikipedia.org/wiki/The_Lord_of_the_Rings> ex:author "John Doe" 
```

这*可能*意味着带有 URI 的 HTML 页面`http://en.wikipedia.org/wiki/The_Lord_of_the_Rings`是由“John Doe”创作的。或者这可能意味着该 HTML 页面（→ 小说）所描述的内容是由“John Doe”创作的。当然，这是一个重要的区别。

有多种方法可以区分 URI 代表什么，并且对此存在一些争议。围绕这个问题的讨论被称为**httpRange-14 问题**。例如，参见 Wikipedia 文章[Web 资源](http://en.wikipedia.org/wiki/Web_resource)。

一种方法是使用**哈希 URI**（[另请参阅此答案](https://stackoverflow.com/a/20606313/1591669 "rdf:resource中的#是什么意思")）。示例：`http://magma.com/play/42`可以识别关于该剧*的页面*`http://magma.com/play/42#play`，可以识别*该剧*。

另一种方法是使用**HTTP 状态代码 303**。代码`200`给出了关于事物的页面的表示，代码`303 See Other`给出了标识事物的附加 URI。DBpedia 使用此方法：

*   [http://dbpedia.org/resource/The_Lord_of_the_Rings](http://dbpedia.org/resource/The_Lord_of_the_Rings)代表小说

*   [http://dbpedia.org/page/The_Lord_of_the_Rings](http://dbpedia.org/page/The_Lord_of_the_Rings)代表关于小说的页面

    （对应于机器的[http://dbpedia.org/data/The_Lord_of_the_Rings ）](http://dbpedia.org/data/The_Lord_of_the_Rings)

请参阅[在 303 和 Hash 之间进行选择](http://www.w3.org/TR/cooluris/#choosing)。

现在，当使用 RDFa 时，您可以对页面本身和页面所代表的事物进行陈述。只需使用相应的 URI 作为主题（例如，通过使用[`resource`属性](http://www.w3.org/TR/rdfa-lite/#resource)）。

所以让我们说`http://magma.com/#magma`代表剧团。*现在，您可以在每个*页面（/contact、/play/、...）上使用此 URI来*对*组进行声明。引用该组。

```
<div resource="http://magma.com/#magma">
  <span property="ex:name">Magma</span>
</div>

<div resource="http://magma.com/">
  <span property="ex:name">Website of Magma</span>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T16:21:03.557

我建议您首先查看[schema.org 简单明了的文档](http://schema.org/docs/gs.html)。该词汇表非常全面地解决了您的问题，并得到了主要搜索引擎的支持。

这是一个片段示例供您入门，您可以将其直接包含在 HTML 页面中。当您在页面上谈论该剧的表现时，您可以使用：

```
<div itemscope itemtype="http://schema.org/TheaterEvent">
  <h1 itemprop="name">Romeo and Juliet</h1>
  <span itemprop="location">Council Bluffs, IA, US</span>
  <meta itemprop="startDate" content="2011-05-23">May 23
  <a href="/offers.html" itemprop="offers">Buy tickets</a>
</div> 
```

在您的联系页面上，您可以包括：

```
<div itemscope itemtype="http://schema.org/TheaterGroup">
  <span itemprop="name">Magma</span>
  Tel:<span itemprop="telephone">( 33 1) 42 68 53 00 </span>
</div> 
```

# eclipse - 如何将 eclipse 插件开发库源附加到项目中？

> ID：16000067
> 
> 赞同：6
> 
> 时间：2013-04-14T14:20:13.093
> 
> 标签：eclipse, eclipse-plugin, open-source

我是 Eclipse 插件开发的新手。

如何获取所有 Eclipse 插件开发库的源代码？没有源代码，很难调试调用或查看实现。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-11-29T05:01:24.347

除非必要，否则我拒绝自己下载资源并附上它们。Eclipse 确实允许您在发布时执行此操作，步骤不太直观。

*   帮助 > 安装新软件
*   使用“Eclipse 项目更新”（不是主站点！）
*   安装以下项目
    *   Eclipse RCP 插件开发人员资源
    *   Eclipse PDE 插件开发人员资源
    *   Eclipse 平台插件开发人员资源
    *   Equinox p2 核心函数源
    *   Eclipse JDT 插件开发人员资源

这可能不是一个完整的列表，但对我来说这是一项正在进行的工作。每次发现新内容时，我都会尝试更新此列表，因为 StackOverflow 的 SEO 比[我的博客文章](http://karunab.com/2013/10/08/eclipse-plugin-development-attaching-sources/)更好:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T06:28:07.353

对于大多数插件，使用Plugin Development Perspective 的 Plugins 视图中的上下文菜单*Import -> As Binary plugin*就足够了。如果您需要对多个插件进行此操作，则可以[使用向导和多选](http://www.vogella.com/articles/EclipseCodeAccess/article.html#importplugins)来完成。

如果您是 Eclipse 插件开发的新手，阅读链接页面上的更多教程将非常有帮助，因为它有很多指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T14:10:31.723

发布“ **juno** ”似乎是问题所在。

使用预发布的“ **kepler** ”4.3M6 可以毫无问题地查看源代码。

# python - Python 检查是否已经过了一分钟

> ID：16000068
> 
> 赞同：14
> 
> 时间：2013-04-14T14:20:14.027
> 
> 标签：python

我每分钟只运行一次脚本的一部分并想出了这个：

```
def minutePassed(oldminute):
    currentminute = time.gmtime()[4]

    if ((currentminute - oldminute) >= 1) or (oldminute == 59 and currentminute >= 0):
        return True
    else:
        return False 
```

这里的问题是，如果分钟是 59，它每次都会运行，直到过了那个时间——对我来说，这对我来说并不是一个麻烦的表现。但我仍然不喜欢它发生！

我现在想到了这样的事情：

```
def minutePassed(oldminute):
    currentminute = time.gmtime()[4]

    if ((currentminute - oldminute) >= 1) or (oldminute == 59 and currentminute >= 0 and ran == false):
        ran = True
        return True
    else:
        return False 
```

然后在脚本的另一部分，当分钟为 != 59 并且变量不是已经为假时，我再次运行错误 - 但这看起来很粗糙？

另一方面 - 有没有其他方法可以检查一分钟是否已经过去？也许我让事情变得复杂......

编辑：也许我不够清楚：

1.  每分钟只运行一次。
2.  执行时间相差很多秒，但不到 30 秒。

我现在在看timedelta。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-14T14:27:38.557

不要使用这样的分钟；例如，如果时间是 00:00:59，您的代码会认为下一秒已经过了一分钟。

相反，使用类似的东西[`time.time()`](http://docs.python.org/2/library/time.html#time.time)，它返回自纪元以来经过的秒数：

```
def minute_passed(oldepoch):
    return time.time() - oldepoch >= 60 
```

出于同样的原因，这仍然可以相差近一秒钟，但这可能更容易接受。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-14T14:27:18.367

您可以使用自纪元以来的秒数来获得以秒为单位的时间，这样您就不必担心分钟数会环绕：

```
import time
oldtime = time.time()
# check
if time.time() - oldtime > 59:
    print "it's been a minute" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T14:29:37.943

`time()`我认为您会发现在模块中使用该函数要容易得多，该函数[`time`](http://docs.python.org/2/library/time.html)返回自“纪元”以来经过的秒数。

```
import time

oldtime = time.time()

def minutePassed(oldtime):
    currenttime = time.time()
    if currenttime - oldtime > 60 and ran == False:
        ran = True
        return True
    else:
        return False 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T14:26:20.267

使用[time.sleep](http://docs.python.org/2/library/time.html#time.sleep)：

```
from time import sleep

while True:
    # do something
    sleep(60) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-14T15:41:49.823

我在 timedelta 方面没有取得多大成功，所以我采用了我以前的粗略想法：

```
def minutePassed(oldminute):
    currentminute = time.gmtime()[4]

    if ((currentminute - oldminute) >= 1) or (oldminute == 59 and currentminute == 0):
        return True
    else:
        return False 
```

然后在脚本中：

```
while True:
    dosomething()

    if minutePassed(time.gmtime(lastrun)[4]):
        domore
        lastrun = time.time() 
```

这对我来说现在非常好 - 每分钟只运行一次 - 在这里睡觉或任何事情对我来说都是一个糟糕的选择，因为每个循环的执行时间是不可靠的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-08T12:36:06.510

我遇到了完全相同的问题，我想我找到了解决方案：

```
import time

oldtime = time.time()
print oldtime

while oldtime + 60 != time.time():

    if oldtime + 3 == time.time():
        print "60 secs passed"
        print time.time()
        break 
```

你可以删除打印语句，我把它们放在那里只是为了看看它是否有效，希望它是你正在寻找的。

# c# - 代码的可读性是否证明嵌套的 try-catch 块用于流控制？

> ID：16000087
> 
> 赞同：0
> 
> 时间：2013-04-14T14:22:06.007
> 
> 标签：c#, try-catch, code-design

此代码检索日志文件的行并尝试在分隔字段之一中查找日期。哪个字符是分隔符可能会有所不同，并且可以在哪个字段中找到日期也会有所不同。它也可以写成不同的日期格式或从 Unix 纪元时间经过的毫秒数。它从列表的底部开始，如果没有找到，它会递归地向上移动，直到没有更多的行可以读取。因此，最简单、最易读的方法（在我看来）是使用嵌套的 try-catch 块，但鉴于它也是一种递归方法，理论上应该会降低性能吗？这是一个糟糕的代码吗？

我可以将一堆 if-else 块与 DateTime.TryParse 一起使用，并为结果添加额外的变量，但这会让我的眼睛流血。代码的可读性是否证明嵌套的 try-catch 块用于流控制？

```
static DateTime? Search(List<string> lines)
{
    if (lines.Count == 0)
    {
        return null;
    }

    DateTime? date = null;
    string dateField;

    try
    {
        dateField = lines.Last().Split(';')[18].Trim('\'').Trim();
        date = DateTime.ParseExact(dateField, "MM'/'dd'/'yy HH:mm:ss", null, DateTimeStyles.AllowWhiteSpaces);
    }
    catch (Exception)
    {
        try
        {
            dateField = lines.Last().Split(';')[19].Trim('\'').Trim();
            date = DateTime.ParseExact(dateField, "MM'/'dd'/'yy HH:mm:ss", null, DateTimeStyles.AllowWhiteSpaces);
        }
        catch (Exception)
        {
            try
            {
                dateField = lines.Last().Split(':')[9].Split('=')[1].Trim();
                date = FromUnixEpochTime(long.Parse(dateField));
            }
            catch (Exception)
            {
                try
                {
                    dateField = lines.Last().Split(':')[12].Split('=')[1].Trim();
                    date = FromUnixEpochTime(long.Parse(dateField));
                }
                catch (Exception)
                {
                    try
                    {
                        dateField = lines.Last().Split(':')[19].Trim('\'').Trim();
                        date = DateTime.ParseExact(dateField, "MM'/'dd'/'yy HH", null, DateTimeStyles.AllowWhiteSpaces);
                    }
                    catch (Exception)
                    {
                        lines.RemoveAt(lines.Count - 1);
                        date = Search(lines);
                    }
                }
            }
        }
    }

    return date;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T14:31:48.297

当您打算处理同一部分中的代码时，您永远不应该抛出异常。这使得调试异常成为一场噩梦。我的建议是有一个调用子方法的主要方法来尝试每种类型 - 如果值不是你所期望的 - 移动到下一个。

```
 public DateTime? GetValue()
    {
        DateTime? value = null;

        // Regular way
        value = GetValueImpl1();

        if (value != null)
            return value;

        // Fall back 1
        value = GetValueImpl2();
        if (value != null)
            return value;

        // Fall back 2
        value = GetValueImpl3();
        if (value != null)
            return value;
        return null;
    }
    private DateTime? GetValueImpl1()
    {
        return new DateTime();
    }
    private DateTime? GetValueImpl2()
    {
        return new DateTime();
    }
    private DateTime? GetValueImpl3()
    {
        return new DateTime();
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T14:51:45.167

我知道你已经排除了他们，但我会选择

```
TryParse 
```

和

```
TryParseExact 
```

（虽然 AFAIK 在内部他们只是使用 try-catch .. 但你的代码变得更具可读性）

我会借用 TryParse 等背后的想法，并按照 .. 的方式做一些事情（见下文）

我认为这种风格将每个策略分开并使其更易于维护，因为每个策略周围的“噪音”（即异常捕获）更少

（我在示例策略中允许重复，但其中一些也可以重新考虑）

干杯

斯图

```
static DateTime? Search(List<string> lines)
{
    if (lines.Count == 0)
    {
        return null;
    }

    DateTime parsedDate;

    // the first successful strategy will 'short circuit' the rest so they don't run
    if(TryGetDateStrategy1(lines, out parsedDate)
        || TryGetDateStrategy2(lines, out parsedDate)
        || etc. etc.) 
    {
        return parsedDate;
    }
    return null;
}

private static bool TryGetDateStrategy1(List<string> lines, out DateTime? date)
{
    var dateField = lines.Last().Split(';')[19].Trim('\'').Trim();
    DateTime parsedDate;
    if (DateTime.TryParseExact(dateField, "MM'/'dd'/'yy HH:mm:ss", null, DateTimeStyles.AllowWhiteSpaces,out date))
    {
        date = parsedDate;
        return true;
    }
    return false;
}
private static bool  TryGetDateStrategy2(List<string> lines, out DateTime? date)
{
    var dateField = lines.Last().Split(';')[18].Trim('\'').Trim();
    DateTime parsedDate;
    if (DateTime.TryParseExact(dateField, "MM'/'dd'/'yy HH:mm:ss", null, DateTimeStyles.AllowWhiteSpaces, out date))
    {
        date = parsedDate;
        return true;
    }
    return null;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T14:30:23.943

例外适用于“特殊”情况。它们的性能时间很差，因为它们的处理方式与普通代码不同。网上有很多解释解释了为什么异常会减慢代码的速度。

使用 tryParse 方法检查您的数据是否为日期，然后使用 if then else 语句会更有效，并且可以说更简洁和可读。

也使用字符串常量而不是再次输入日期格式。这会产生更难维护的代码。

作为事后的想法，您可以使用 if 语句：

```
if (tryParse(...)){
   return Parse(...);
}

if (tryParse(...)){
   return Parse(...);
}

return null; 
```

这将是没有嵌套的最可读的，并且可以以更可读的方式进行注释

# javascript - js - 如何命名此代码？

> ID：16000091
> 
> 赞同：-2
> 
> 时间：2013-04-14T14:22:49.440
> 
> 标签：javascript, jquery, namespaces

我正在尝试使用命名空间，但不能让它工作。我尝试使用 mdd = {} 包装所有代码，并且尝试将所有代码都包装在`$(document).ready(`其中，`var MDD = {}`但均未成功。

如何为此代码添加命名空间？

```
<script type="text/javascript">
  $(document).ready( function() {
    $("#categories").sortable({
      revert: true,
      receive: function(evt, ui) {
        ui.item.remove();
        if ( $('#list_to_process li').length == 0) {
          $('#list_to_process').remove();
        }
      }
    });
    $("li.to_process").draggable( {
      connectToSortable: "#categories",
      helper: "clone",
      revert: "invalid"
    });
  });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:44:58.337

如果组织您的代码是您想要实现的目标，我会建议以下内容：

*   **在外部** 创建命名空间`$(document).ready`（在我的示例中使用了[Revealing 模块模式](https://stackoverflow.com/questions/5647258/how-to-use-revealing-module-pattern-in-javascript)）。
*   `$(document).ready`你打电话给你的代码。

**例子：**

```
$(function(){
    MDD.init();
});

var MDD = function () {
  var init = function () {
    $("#categories").sortable({
      revert: true,
      receive: function(evt, ui) {
        ui.item.remove();
        if ( $('#list_to_process li').length == 0) {
          $('#list_to_process').remove();
        }
      }
    });
    $("li.to_process").draggable( {
      connectToSortable: "#categories",
      helper: "clone",
      revert: "invalid"
    });
  };
  return {
    init : init
  }
}(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T14:28:37.953

JQuery `.sortable`和`.draggable`调用是方法，而不是事件处理程序。据我所知，它们不能被命名空间。

但是，jQuery`$(document).ready(...` *是*一个事件处理程序，因此您可以命名它，但前提是它与该`.on`方法一起使用。请注意，我之前没有对此进行过测试，但如果可行，那么以下应该可以工作：

```
$(document).on("ready.namespace", function() {
    ...
}); 
```

# javascript - javascript 属性如何添加到对象并在对象上查找？

> ID：16000092
> 
> 赞同：1
> 
> 时间：2013-04-14T14:22:49.447
> 
> 标签：javascript, properties, lookup

当向 JavaScript 对象添加属性时，它们是以有序的方式添加的（按字母顺序等）。如果是这样，这是否意味着当您在 JavaScript 对象上查找属性时，会使用像二叉树搜索这样的快速算法？我对此进行了搜索，发现了很多关于原型继承的解释，我已经理解了我只是对如何在原型链的单个级别中查找属性感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T19:27:08.353

[这](https://developers.google.com/v8/design#prop_access)是 v8 如何使用隐藏类的高级描述，然后使用隐藏类定义提供的固定偏移量查找属性值。它还证实了大多数其他实现都使用字典类型的数据对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T14:32:22.803

这完全取决于实施。Google 的 V8 引擎可能与 Firefox 的 JagerMonkey 不同。而且他们几乎可以肯定它与 IE6 不同。在对象中查找属性只是一个接口（程序员称之为相当常见的 Map 接口）。Javascript 唯一能保证你的是接口的方法，没有关于实现的细节，这是一件好事。它可能是一个哈希表（可能），也可能是一个链表（不太可能，但可能），甚至可能是二叉搜索树。

关键是我们不知道它是如何实现的，我们也不应该知道。你不应该对实现做任何假设。就像编程中的抽象一样，假设它很神奇。:)

# regex - UNIX 中的扩展正则表达式

> ID：16000097
> 
> 赞同：1
> 
> 时间：2013-04-14T14:23:12.777
> 
> 标签：regex, unix, ksh

我并不是说这个问题只针对 UNIX，而是我在 Solaris 上工作，我没有在任何其他操作系统上尝试过。我在扩展的正则表达式之间感到困惑：

第一的：

```
[[ "str" == ?(str|STR) ]] && echo "matched" 
```

这项工作是正确的，但是当：

```
[[ "str str" == ?(str|STR)(.*) ]] && echo "matched" 
```

它不起作用，是不是意味着我只能比较一种模式。

第二：

```
[[ "str" =~ ?(str|STR) ]] && echo "matched" 
```

我不能在这里使用这个表格，为什么？，但是当：

```
[[ "str" == (str|STR)? ]] && echo "matched" 
```

它工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T14:38:15.457

看起来您正在尝试将 [扩展的 glob](http://mywiki.wooledge.org/glob) 与 [扩展的正则表达式](http://mywiki.wooledge.org/BashGuide/Patterns)结合起来。我会说这是一件坏事。

```
$ set '(str|STR)'

$ [[ 'str' =~ $1 ]] && echo matches
matches

$ [[ 'str str' =~ $1 ]] && echo matches
matches 
```

# c# - 获取不带名称的 Treeview.Nodes.Text

> ID：16000102
> 
> 赞同：0
> 
> 时间：2013-04-14T14:23:39.573
> 
> 标签：c#, treeview, nodes

嗨，我有一个 Treeview，每个节点都有名称（id）和文本。当我使用`.Text`属性时，我获得名称 + 文本，但我只需要文本。例子：

```
1 - Car
2 - Bike 
```

我想为第一个节点获取“汽车”，为第二个节点获取“自行车”。

我怎样才能做到这一点？

我使用此代码加载 TreeView：

```
private void CaricaAlbero(TreeNodeCollection parentNode, int parentID, DataTable folders)
    {
        foreach (DataRow folder in folders.Rows)
        {
            if (Convert.ToInt32(folder["idParent"]) == parentID)
            {
                string key = folder["idArtCategorie"].ToString();
                string text = key + " - " + folder["Descrizione"].ToString();
                TreeNodeCollection newParentNode = parentNode.Add(key, text).Nodes;
                CaricaAlbero(newParentNode, Convert.ToInt32(folder["idArtCategorie"]), folders);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:33:09.563

看来您将 id 和 value 存储在`Text`属性中，因此您可以获取`Text`并将其拆分为“-”并仅获取第二部分

`node1.Text.Split('-')[1]`

# ios - AudioQueue 字节发送到服务器

> ID：16000104
> 
> 赞同：0
> 
> 时间：2013-04-14T14:24:15.500
> 
> 标签：ios, cocoa-touch, core-audio, audioqueue

我`AudioQueues`用来获取`Chunks`音频样本。

这是我的回调方法

```
void AQRecorder::MyInputBufferHandler(  void *                              inUserData,
                                    AudioQueueRef                       inAQ,
                                    AudioQueueBufferRef                 inBuffer,
                                    const AudioTimeStamp *              inStartTime,
                                    UInt32                              inNumPackets,
                                    const AudioStreamPacketDescription* inPacketDesc) 
```

有 api 期望我发送字节数组（我不熟悉）在这种情况下我应该发送哪个变量？

关于这个的文档不多

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:46:50.373

inPacketDesc 指向的 C 结构的 mDataByteSize 元素将告诉您每个数据包的字节数。而 inNumPackets 函数参数是发送到您的 Audio Queue 回调函数的数据包数。将两者相乘以获得要发送的字节总数。

该应用程序还可能在配置音频队列时设置了每个数据包的字节数，因此您可以使用该数字。

# wifi - NS-3 跟踪文件数据包 ID

> ID：16000110
> 
> 赞同：0
> 
> 时间：2013-04-14T14:25:19.130
> 
> 标签：wifi, simulation, wireshark, packet-capture, ns-3

我在 NS-3 中有一个简单的点对点 UDP WiFi 模拟，可将数据输出到跟踪文件。它提供了大量有用的数据，但没有信息可以为每个数据包提供唯一 ID。当我打开 pcap 文件时，我在wireshark 中也找不到任何东西。

我已将模拟结果输出到两个节点的 ascii 跟踪文件和 pcap 文件，但我找不到任何数据包标识符。我可以看到数据包的序列号，仅此而已。

我是 NS-3 的新手，所以我不确定如何生成这些信息。

这是跟踪文件的一些输出。

t 2.00082 /NodeList/0/DeviceList/0/$ns3::WifiNetDevice/Phy/State/Tx ns3::WifiMacHeader (DATA ToDS=0, FromDS=0, MoreFrag=0, Retry=0, MoreData=0 持续时间/ID =0usDA=ff:ff:ff:ff:ff:ff, SA=00:00:00:00:00:01, BSSID=00:00:00:00:00:01, FragNumber=0, SeqNumber=0 ) ns3::LlcSnapHeader (type 0x806) ns3::ArpHeader (request source mac: 00-06-00:00:00:00:00:01 source ipv4: 10.1.1.1 dest ipv4: 10.1.1.2) ns3::WifiMacTrailer ()

任何建议表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T06:31:41.287

如果您可能还没有意识到这一点，让我首先指出似乎显而易见的事情，但是：“在真实网络中没有唯一数据包 id 这样的东西”，并且因为 pcap 跟踪旨在包含真实的转储在真实网络中的数据包，您将能够在 ns-3 生成的 pcap 跟踪中找到唯一数据包 ID 的可能性为零。

现在，ns-3 确实包含一个可用于 Packet::GetId 方法的每个数据包唯一 ID，您可以轻松更改生成 ascii 转储的函数的源代码，以将其添加到 src/wifi/helper/yans -wifi-helper.cc。“Ascii”的 Grep。

现在，如果您想知道为什么默认情况下它不这样做，因为它非常有用，老实说，我不记得了，但是：

*   可能有一些与 ns2 跟踪格式相关的东西启发了这种 ascii 格式。与现有工具的兼容性可能是个问题

*   添加数据包 id 违背了 ns-3 匹配真实网络的理念

# sql - 触发器 - 使用 SQL Server

> ID：16000114
> 
> 赞同：1
> 
> 时间：2013-04-14T14:25:28.997
> 
> 标签：sql, sql-server, triggers

如何创建在更新或插入之前运行的触发器并检查新行是否具有特定条件？

假设 A 列的值大于 5

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T14:28:43.520

> 假设 A 列的值大于 5

应该在表列上使用[`CHECK`约束](http://msdn.microsoft.com/en-us/library/ms188258%28v=sql.105%29.aspx)`TRIGGER`而不是 来完成，例如：

```
 CREATE TABLE [dbo].[SalesHistory](
      (...)
      [A] [int] NULL CHECK (A > 5)
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T15:37:28.270

您可以使用[INSTEAD OF](http://msdn.microsoft.com/en-us/library/ms175089%28v=sql.105%29.aspx)触发器

简单的例子：

```
CREATE TRIGGER iu_trigger ON [dbo].[SalesHistory]
INSTEAD OF INSERT, UPDATE
AS
BEGIN
  IF EXISTS (
             SELECT 1
             FROM inserted
             WHERE A > 5
             )
  BEGIN
    PRINT 'A > 5'     
  END
  ELSE
  BEGIN
    PRINT 'A <= 5'
  END            
END 
```

# serialization - 如何快速将 Clojure 数据结构序列化为带有缩进的字符串？

> ID：16000116
> 
> 赞同：4
> 
> 时间：2013-04-14T14:25:46.020
> 
> 标签：serialization, clojure, indentation

clojure.pprint 似乎做我想做的事：

```
user=> (def a {"q" {:q 1 :w 2 :e 3 :r 4 :t 4}, "w" {:q 1 :w 2 :e 3 :r 4 :t 4} "e" {:q 1 :w 2 :e 3 :r 4 :t 4}, "r" {:q 1 :w 2 :e 3 :r 4 :t 4}})
user=> (pprint a)
{"e" {:r 4, :e 3, :w 2, :t 4, :q 1},
 "q" {:r 4, :e 3, :w 2, :t 4, :q 1},
 "r" {:r 4, :e 3, :w 2, :t 4, :q 1},
 "w" {:r 4, :e 3, :w 2, :t 4, :q 1}}
nil 
```

但

```
user=> (time (with-out-str (pprint a)))
"Elapsed time: 174.621945 msecs"
...
user=> (time (do (with-out-str (pprint (repeat 1000 {:r 4 :t 6 :q 3 :u 5 :d 3}))) nil))
"Elapsed time: 32902.028436 msecs" 
```

它太慢了。

Clojure 中是否有任何打印机可以进行缩进（可能不如 pprint 准确），但速度也很快并且适用于大型结构？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T16:14:36.567

您可能想查看 Brandon Bloom 的[Fipp](https://github.com/brandonbloom/fipp)（GitHub 存储库摘要：“Fast Idiomatic Pretty Printer for Clojure”）。请注意，README 声明它现在是[edn](https://github.com/edn-format/edn) -only。

# java - 我需要在复选框中添加侦听器，并且选择的更改显示在 textArea 中

> ID：16000117
> 
> 赞同：3
> 
> 时间：2013-04-14T14:25:56.133
> 
> 标签：java, swing, jtextarea

```
import javax.swing.*;
import java.awt.event.*;
import java.awt.*;

public class JDorm implements ItemListener{

public static void main(String[] args){

    JCheckBox privateroom = new JCheckBox("Private Room",false);
    JCheckBox interweb = new JCheckBox("Internet Connection",false);
    JCheckBox cable = new JCheckBox("Cable TV connection",false);
    JCheckBox fridg = new JCheckBox("Refridgerator",false);
    JCheckBox microwave = new JCheckBox("Microwave",false);
    JCheckBox soon = new JCheckBox(",and so on",false);
    JLabel greet = new JLabel("Please choose ammenities");
    String sel = "Your selected options";

    JTextArea textBox = new JTextArea(sel,0,1);
    cable.addItemListener();

    JFrame dormFrame = new JFrame("Dorm Options");// creates frame with title
    final int WIDTH = 250;
    final int HEIGHT = 500;
    dormFrame.setSize(WIDTH, HEIGHT);// sets the size of frame in pixels
    dormFrame.setVisible(true);// note: default visibility is false
    dormFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    dormFrame.setLayout(new FlowLayout());
    dormFrame.add(greet);
    dormFrame.add(microwave);
    dormFrame.add(fridg);
    dormFrame.add(cable);
    dormFrame.add(interweb);
    dormFrame.add(privateroom);
    dormFrame.add(soon);
    dormFrame.add(textBox);
}
public void itemStateChanged(ItemEvent event){
    Object source = event.getSource();
    int select = event.getStateChange();
}

} 
```

这是我到目前为止所拥有的，我知道我需要监听器，并且在选中和取消选中选择时会在框中显示一条消息。我需要 if 语句来进行更改吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T18:12:38.517

创建一个可以添加到所有复选框的通用侦听器。就像是：

```
ItemListener listener = new ItemListener()
{
    public void itemStateChanged(ItemEvent event)
    {
        JCheckBox checkBox = (JCheckBox)event.getSource();
        textBox.setText( checkBox.getText() );
    }
}; 
```

然后将侦听器添加到每个复选框：

```
privateRoom.addItemListener( listener );
interweb.addItemListener( listener ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T14:56:18.980

我试过一个复选框，你可以做其他类似的事情

```
 final JCheckBox privateroom = new JCheckBox("Private Room",false); 
```

现在将项目侦听器添加到复选框私人房间以及您希望发生的操作，即

```
 privateroom.addItemListener(new ItemListener()
    {
        public void itemStateChanged(ItemEvent event)
        {
            if (event.getItemSelectable() == privateroom)
                textBox.setText("Private Room");
        }
    }); 
```

我将 Checkbox privaterroom 声明为 final 的原因是因为 privaterroom 是本地的并且是从内部类访问的。

还有一件事我不知道您编写程序的方式是好是坏，因为我也在学习挥杆并且是新手。但是我编写程序的方式具有以下结构

```
class MyClass extends JFrame implements LISTENER_NAME
{
    // Components declared here

    // constructor starts
    public MyClass()
    {
        //Componenets instantiated 
        // add listeners to appropriate components
        // setVisible(), setDefaultCloseOperation(),setSize() etc called

    }

    // listener interface methods here like

    public void itemStateChanged(ItemEvent ie)
    {
        ................
    }

    // main method
    public static void main(String[] args)
    {
        new MyClass();
    }
} // class over 
```

这样我就从来没有遇到过 final 关键字等问题。希望有高手指导一下。

# node.js - Socket.io - 关闭服务器

> ID：16000120
> 
> 赞同：12
> 
> 时间：2013-04-14T14:26:41.110
> 
> 标签：node.js, socket.io

我的应用程序中有一个 socket.io 服务器，监听端口 5759。

在我的代码中的某个时刻，我需要关闭服务器，所以**它不再监听了**。

我怎样才能做到这一点？

Socket.io 未在 http 服务器上侦听。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-14T20:10:00.783

你有一个服务器：

```
var io = require('socket.io').listen(8000);
io.sockets.on('connection', function(socket) {
    socket.emit('socket_is_connected','You are connected!');
}); 
```

停止接收传入连接

```
io.server.close(); 
```

注意：这不会关闭现有连接，它们会在关闭之前等待超时。要立即关闭它们，首先列出已连接的套接字

```
var socketlist = [];
io.sockets.on('connection', function(socket) {
    socketlist.push(socket);
    socket.emit('socket_is_connected','You are connected!');
    socket.on('close', function () {
      console.log('socket closed');
      socketlist.splice(socketlist.indexOf(socket), 1);
    });
}); 
```

然后关闭所有现有连接

```
socketlist.forEach(function(socket) {
  socket.destroy();
}); 
```

逻辑从这里开始：[如何立即关闭 Node.js http(s) 服务器？](https://stackoverflow.com/questions/14626636/how-do-i-shutdown-a-node-js-https-server-immediately)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-06-18T12:01:35.053

这个 api 在 socket.io v1.1.x 中再次发生了变化，现在是：

```
io.close() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-11T18:24:53.663

API 已更改。要停止接收传入连接，您应该运行：

```
io.httpServer.close(); 
```

# sql - 在 SQL Server Management Studio 2012 上使用 Compute By 时语法不正确

> ID：16000123
> 
> 赞同：1
> 
> 时间：2013-04-14T14:26:48.070
> 
> 标签：sql, database, sql-server-2012

我有这个代码：

```
SELECT TransactionDate, CustomerName, TreatmentName, Price
FROM MsCustomer mc, HeaderSalonServices hss,DetailSalonServices dss, MsTreatment mt, MsStaff ms
WHERE mc.CustomerId = hss.CustomerId AND hss.StaffId = ms.StaffId
AND hss.TransactionId=dss.TransactionId and dss.TreatmentId=mt.TreatmentId
AND StaffName LIKE 'Ryan%' and DATENAME(WEEKDAY, TransactionDate)='thursday'
ORDER BY CustomerName, TreatmentName
COMPUTE SUM(price) BY CustomerName 
```

它不会运行，并且一直说“'COMPUTE'附近的语法不正确”我做错了什么？

这是我的 ERD：

![ERD](https://i.stack.imgur.com/7R0H8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:44:48.977

COMPUTE / COMPUTE BY 在 SQL 2012 中停止使用。[http://msdn.microsoft.com/en-us/library/ms144262.aspx](http://msdn.microsoft.com/en-us/library/ms144262.aspx) 而不是 COMPUTE / COMPUTE BY 使用[ROLLUP](http://msdn.microsoft.com/en-us/library/ms177673.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-14T20:39:04.533

执行以下操作，您将获得计算结果：

Select columnname, count(*) From tablename Group by columnname Order by columnname Select 'SUM' , COUNT(columnname) from tablename

# java - 在 int 方法中返回“default”以传递给 switch

> ID：16000124
> 
> 赞同：0
> 
> 时间：2013-04-14T14:26:48.990
> 
> 标签：java

所以我正在为学校的作业制作一个测试课，它看起来像这样：

```
public class Tester{
  //variables....  some for the object to be tested, others for a Base object to be tested against

  public void test(SpecialObject objectToBeTested){
    SpecialObject baseObject = new SpecialObject();
    int testCase = this.compareObjects(objectToBeTested, baseObject); //compare the two
    switch (testCase){
      case 1: System.out.println("CASE 1"); break;
      case 2: System.out.println("CASE 2"); break;
      default: System.out.println("Default, everything is good"); break;
      //can't just make this case 0, because I think the switch requires a default
      //so how do I pass an int to trigger the default?
    }
  }
  public int compareObject(SpecialObject one, SpecialObject two) {
    //compare one.this1 and two.that1
    if ( one.this1 = two.that1 ) {return 1;};
    //compare one.this2 and two.that2
    if ( one.this2 = two.that2 ) {return 2;};
    //......
    // HERE IS WHERE I AM CONFUSED
    // I want to do something like
    return default;
    //or
    return "default";
    // but can't because I need to pass an int
  }
} 
```

由于我试图将所有比较保留在一种方法中（尽管稍后将抽象为多个方法），因此我试图将整数传递回给`test()`switch 方法的整数。为了保持良好的信息，我想告诉自己什么特定的比较失败了，我想我需要将一些东西传递给 switch 方法以使用默认值。如果一切都检查了，我应该从什么返回`compareObject(one, two)`来触发 switch 方法中的默认情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T14:28:43.977

如果变量不匹配任何情况，则调用 switch 语句中的“默认值”。如果您有案例 1 和案例 2，则任何不是 1 或 2 的 int 都将转到默认块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T14:33:47.660

您可以返回`int`除 1 或 2 以外的任何值。您可以选择您想要的“默认值”。也许是 0 或 -1 或其他东西。

另请参阅 Thomas 关于`switch`. 确保你理解“switch”语句的作用。

# jquery - 随页面位置变化的水平菜单

> ID：16000125
> 
> 赞同：1
> 
> 时间：2013-04-14T14:26:51.697
> 
> 标签：jquery, css, menu, horizontallist

我的网站上有一个水平粘性菜单，它是一个长页面。菜单将用户滚动到页面的不同部分。

[www.dyhas.com](http://www.dyhas.com)（向下滚动到菜单）

我的问题：当用户单击菜单项到某个部分时，有没有一种方法可以使按钮更改颜色并保持“白色”。或者，当用户滚动到新部分时，有没有办法让菜单动态变化？

例如，如果用户滚动到“概览”或单击“概览”，带有“概览”的 li 框将变为白色并保持白色。当用户“单击”健康或滚动到“健康”部分时，菜单将更改为健康 li 是白色的并且在该部分中保持白色？

那里已经有一个 jquery 菜单可以做类似的事情吗？我进行了搜索，但没有找到。

# c# - 我们可以在线程中传递除 void 之外的任何方法吗？

> ID：16000127
> 
> 赞同：3
> 
> 时间：2013-04-14T14:27:03.180
> 
> 标签：c#, multithreading

我正在研究一个线程。我有一个方法：

```
private int Calculate(int number);
can I used this method in a thread ?
Thread t = new Thread(new ThreadStart(Calculate)); 
```

我们不能这样做，因为 ThreadStart() 只接受 void 方法。那么，有没有办法使用线程来处理它？另外，如果 Calculate 是 void 方法，我如何传递参数

```
thread t = new Thread(new ThreadStart(Calculate)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T14:29:50.227

您可以使用[ParameterizedThreadStart](http://msdn.microsoft.com/en-us/library/system.threading.parameterizedthreadstart.aspx)并将 int 类型参数更改为 object 并将其转换回 int。

```
private int Calculate(object number)
{
   int num = Convert.ToInt32(number);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T14:34:27.107

您可以使用 lambda，编译器将推断其类型：

```
Thread t = new Thread(() => Calculate(number)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-14T14:35:38.097

捕获的变量运行良好：

```
 int number = 42;
  var thread = new Thread(() => Calculate(number)); 
```

# regex - 如何标记布尔表达式字符串？

> ID：16000130
> 
> 赞同：0
> 
> 时间：2013-04-14T14:27:28.697
> 
> 标签：regex, boolean-logic

我有`boolean`一个字符串形式的表达式，并想以某种方式拆分它。查看以下示例，我想要 3 个拆分`in, out, sig`：

`(in == 1'b1) | !out & (sig==1'b0)`

可能`RegEx`最适合拆分，但我将如何定义界限？也许我需要某种可用于跟踪文字标记何时开始或结束的字母表，例如：`&|=()!~` 但是我怎么能告诉`in`和之间的所有内容`out`，即`== 1'b1) | !`，不应该被标记？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T14:51:03.383

`(in == 1'b1) | !out & (sig==1'b0)`

我们有这个输入。并想找到所有变量。

我将使用`Perl`语言进行算法，想想，写起来很简单。

首先，让我们尝试查找所有`simple`表达式：

```
my $input = q((in == 1'b1) | !out & (sig==1'b0)); #string as input
my @expressions = split(/[|&]/,$input); 
#after that split we have:
#1) (in == 1'b1) 
#2) !out 
#3) (sig==1'b0)
#next thing, I thought, would be searhing of (!) and equations:
for my $expression (@expressions){
    $expression =~ s/^\s+//; #delete all spaces from beginning of string
    $expression =~ s/\s+$//; #delete all spaces at end of string
    $expression =~ s/^[\(](.+)[\)]$/$1/; #delete round brackets
    #here you must check, if we have round brackets, some kind of iteration must be here

    $expression =~ s/^!//; #find first (!), it can be here 
    my ($left, $right) = split(/!=|==/,$expression);
    #ok, now check, if left or right operand a variable:
    if($left eq "1'b1" or $left eq "1'b0"){
        #not our variable
    } 
    else{

       #our variable, $left ;)
    }
    if ($right eq "1'b1" or $right eq "1'b0"){
        #not our variable
    }
    else{
       if(defined($right) and $right!=""){
        #our variable $right
       }

    }

} 
```

但是，正如我所见，你在这里有一些简单的东西。

所以，你想在这里找到所有变量。

`/(?<!1|b|')[a-zA-Z_\d]+(?!(0|1|'))/`

# python - 用于同时播放大量 mp3 文件的 Python 模块

> ID：16000135
> 
> 赞同：1
> 
> 时间：2013-04-14T14:27:57.843
> 
> 标签：python, python-3.x, python-module

我正在搜索，但找不到一个好的 python 模块，它允许我加载大量声音并在我想要的时间播放它们，其中一些一起播放。喜欢：我有 10 个 mp3 文件，其中一些是示例 dubstep 文件，所以我想用它们创作音乐。然后我需要快速加载它们，而不是每次我想播放时都按文件加载。所以我需要一个模块，它可以加载大量带有“for”条件的声音，然后为每个声音创建一个“对象”，然后随时播放。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:34:51.653

您可以使用多平台的[Snack Sound Toolkit](http://www.speech.kth.se/snack/)：

```
sound = Sound() 
sound.read('sound.mp3') 
sound.play() 
```

然后根据用户输入使用不同的 .read() + .play() 组合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T20:29:13.453

> 我需要一个可以加载大量带有“for”条件的声音然后为每个声音创建一个“对象”的模块

正如[@Aya 建议](https://stackoverflow.com/questions/16000135/python-module-for-playing-lots-of-mp3-files-together#comment22842934_16000135)的那样，您可以使用[`pyglet`](http://pyglet.org/download.html)(+ [`AVbin`](http://avbin.github.io/AVbin/Download.html)for mp3) 并行播放多个 mp3 文件：

```
#!/usr/bin/env python3
import os
import random
from glob import glob

import pyglet 

# load sounds    
paths = glob(os.path.expanduser('~/Music/*.mp3'))
sounds = [pyglet.media.load(p, streaming=False) for p in paths]

# play them in parallel
for sound in sounds:
    player = sound.play()
    player.volume = random.random()
    player.push_handlers(on_eos=lambda: print('done playing the sound'))

# exit in `delay` seconds
pyglet.clock.schedule_once(lambda dt: pyglet.app.exit(), delay=10)
# run event loop
pyglet.app.run() 
```

它适用于 Windows、Mac OS X、Linux。它同时支持 Python 2 和 3 (pyglet 1.2)。

# php - 如何在wordpress的侧边栏下方添加图片

> ID：16000142
> 
> 赞同：0
> 
> 时间：2013-04-14T14:28:58.040
> 
> 标签：php, html, wordpress, css

我正在[http://calgarydefencelaw.com/](http://calgarydefencelaw.com/)建立一个网站。但我面临的主要问题是我输入的 3 张图像是受损驾驶，没有很好地对齐。我想对齐侧边栏下方的所有三张图片任何建议谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T14:34:35.677

尝试`clear: both;`使用 id 向 div 添加样式`imageboxes`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-08T14:29:53.470

据我了解您的要求，您需要在侧边栏下方显示 3 个框。只需将html

```
<div id="imageboxes">
<div id="homebox1">
<div id="homebox2">
<div id="homebox3">
</div> 
```

在里面而不是在外面写它并添加 #imageboxes div{padding-left: 5px;} 而不是 margin-left:15px;

# c# - jstree 下载

> ID：16000145
> 
> 赞同：1
> 
> 时间：2013-04-14T14:29:15.537
> 
> 标签：c#, javascript, json, model-view-controller, jstree

是否可以使用 jstree 作为目录查看器从服务器下载文件？

注意 - 我通过连接到我的 Dropbox 帐户并从通过 Dropbox 发送的 json 结果填充树来创建一个 jstree。

所以我可以看到我的 Dropbox 帐户的内容，这很好，但是我想与节点交互（下载、删除、上传等）

这可行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T14:38:52.347

只要您可以获取数据（例如从 Dropbox），是的，这完全有可能。本质上，jsTree 只是一种表示数据的方式。它不受任何特定*类型*的数据的约束。如果您有一堆来自 Dropbox 的以某种方式表示文件系统的数据，您可以随心所欲地表示这些数据，包括使用 jsTree。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T14:48:01.183

这可以通过 select_node 事件来实现。请参阅[jsTree UI 插件文档](http://www.jstree.com/documentation/ui)

```
.select_node ( node , check , event ) 
```

*   节点（混合）
    这可以是 DOM 节点、jQuery 节点或指向树中元素的选择器。
*   check (bool)
    是检查指定的规则并执行适当的操作（检查 select_limit，分别取消选择其他节点等）还是只强制选择节点而不考虑 select_limit。
*   event (event)
    内部使用 - 当点击一个节点导致这个函数被执行时。

根据回调需要多少元数据，传递数据可能很棘手。在这种情况下，jsTree 使用 jQuery 数据插件支持每个节点的元数据。[这篇 SO 文章](https://stackoverflow.com/questions/3604790/how-to-get-the-metadata-of-jstree)讨论了在 jsTree 中使用元数据。

# c# - DropDownList 不会在 SelectedIndexChanged 上回发

> ID：16000146
> 
> 赞同：0
> 
> 时间：2013-04-14T14:29:20.760
> 
> 标签：c#, asp.net

当所选项目发生更改时，我试图将 DropDownList 设置为 AutoPostBack。对于为什么这不起作用，我会有点疯狂。

有没有人有任何快速的想法？请帮助

这是代码： -

```
 <asp:DropDownList ID="ddl_username" runat="server"
   AutoPostBack="True" 
   onselectedindexchanged="ddl_username_SelectedIndexChanged" 
  DataTextField="Shortname" DataValueField="ID">
  </asp:DropDownList>`

  protected void Page_Load(object sender, EventArgs e)
  {
    if (!IsPostBack)
    {
        Bind_Users();
    }
  }

 private DataSet Bind_Users()
 {
    DataSet ds;
    ds = cs.BindUsers();
    if (ds.Tables[0] != null)
    {
        if (ds.Tables[0].Rows.Count > 0)
        {
            ddl_username.DataSource = ds.Tables[0];
            ddl_username.DataTextField = "Shortname";
            ddl_username.DataValueField = "ID";
            ddl_username.DataBind();
            ListItem li = new ListItem();
            li.Text = "Select";
            li.Value = "-1";
            ddl_username.Items.Insert(0, li);
            ddl_username.SelectedIndex = 0;
        }
        //ddl_username.SelectedIndex = 0;
        //ddl_username.Text = "-----Select-----";
    }
    return ds;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T14:41:07.953

您是否检查过重新发布后是否再次发生 ddl 的初始加载？只需在您的 selected-index-changed 方法和 oninit/page-load 方法中放置一个调试断点 - 无论您将数据加载到 ddl 的哪个位置。如果它在触发你的事件之前再次加载 - 你需要放一个

```
if(!IsPostBack) 
```

在加载方法之前 - 比如：

```
if(!IsPostBack)
  this.MyDDL.DataSource = GetDatasourceForMyDDL(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T14:49:33.470

`Page_Load`每次页面都调用回发，所以你必须在`Bind_Users()`里面放一个

`if(!IsPostBack)`block ，因为`Page_Load`之前调用过`ddl_username_SelectedIndexChanged`

# visual-studio-2010 - 在管理员（提升）模式下使用 Visual Studio 2010

> ID：16000151
> 
> 赞同：6
> 
> 时间：2013-04-14T14:29:44.253
> 
> 标签：visual-studio-2010, visual-studio, ide, administrator, elevation

有很多帖子告诉您如何以管理员身份运行 Visual Studio 2010。
当我找到答案时，我可能会感到非常羞愧，但是......
我的问题是我无法启动 Visual Studio 而**不是**提升！

我总是在标题上有“（管理员）”文本。
我希望能够在非提升环境中调试我的应用程序。

我没有标有“以管理员身份运行”的快捷方式/应用程序文件。
不是 Devenv.exe 和 VSLauncher.exe 不是“开始”菜单上的快捷方式。没有像这样标记的东西，Visual Studio 仍然以管理员身份运行。

我的用户属于本地管理员组..但这并没有用于启用此管理员模式。
UAC 被禁用，但这也无关紧要。

也检查了

```
HKEY_CURRENT_USER\Software\Microsoft\Windows NT\CurrentVersion\AppCompatFlags\Layers 
```

并从列表中删除了 Visual Studio。没有。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T07:02:55.127

我重新打开了 UAC，真是令人惊讶……Vis​​ual Studio 再次以正常模式运行！
再次感谢微软，让事情变得非常清楚......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T17:34:32.687

您可以尝试下载[VSCommands](http://visualstudiogallery.msdn.microsoft.com/d491911d-97f3-4cf6-87b0-6a2882120acf)扩展并使用它的 Debug As Normal 用户功能。

# coded-ui-tests - 如何使用 tcm.exe 从 testsuite 运行特定的自动化测试？

> ID：16000155
> 
> 赞同：1
> 
> 时间：2013-04-14T14:30:15.833
> 
> 标签：coded-ui-tests, microsoft-test-manager, tcm

我在 Visual Studio 2012 中设计了 Coded UI 测试。我已将它们与来自测试管理器的手动测试相关联。

1.  如何仅从某些测试套件中运行优先级 = 1 的自动化测试？
2.  如何仅运行在以前的测试运行中被错误标记为失败的测试用例？

我想使用类似这样的命令行运行测试：

```
tcm run /create /title:"Nightly Run" /planid:1 /suiteid:5 /configid:13 /settingsname:"<Name of your automated test settings>" /testenvironment:"<Name of a matching environment>" /collection:<CollectionURL> /teamproject:<Team Project name> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-31T16:59:07.320

您是否为 MTM（Microsoft 测试管理器）配置了代理和控制器？

如果是这样，那么您可以从 MTM 做到这一点。使用您描述的 #1 和 #2 的条件创建一个基于查询的测试套件，这将为您生成一个测试套件。然后，您可以选择该套件中的测试，右键单击并运行测试。这就是我今天要做的。

如果您想使用命令行选项执行此操作，那么也许可以研究如何调用该基于查询的测试套件。到目前为止，我从未使用过 cmd 行。

# java - 这是正确使用策略模式吗

> ID：16000158
> 
> 赞同：0
> 
> 时间：2013-04-14T14:30:23.803
> 
> 标签：java, design-patterns, graph, strategy-pattern

我有一个复杂的网络，表示为超图超
图顶点来自各种类型：图像，标签......我还有各种类型的超边，这些顶点与同质 HyperEdge ：ImageImageHyperEdge ，TagTagHyperHedge ... 异构 HyperEdge ：ImageTagHyperEdge ，ImageTagLocationHyperEdge 相关。 ..

所以我认为策略模式对这种情况很有用
我很快画了这个 uml 图 ![在此处输入图像描述](https://i.stack.imgur.com/L9SlO.png)

这是策略模式的正确用法吗？

另一个问题，例如图像顶点可能有不同的异构超边缘类型 ImageTag ，ImageTagLocation 怎么做？

# java - 使用 Gson 和抽象类

> ID：16000163
> 
> 赞同：10
> 
> 时间：2013-04-14T14:30:54.137
> 
> 标签：java, object, gson, abstract-class

我正在尝试使用 GSON 在客户端和服务器之间交换消息。

问题如下：

我有这个结构：

```
public class Message 
{
    private TypeOfContent type; //  It's a enum 
    private Content       content;
    ....
} 
```

那么对象内容可以是一组不同的类。

[我在这里](http://chaos.unknown-entity.com/?p=124)和[这里](http://ovaraksin.blogspot.co.il/2011/05/json-with-gson-and-abstract-classes.html)找到了 2 个教程，但没有一个能解决问题。

编辑1：

## 类 Message 是这样的：

* * *

```
public class Mensagem
{
    private TipoMensagem    type;

    private Conteudo        conteudo;

    private Cliente         autor;
    private Cliente         destino;    // null -> to all(broadcast)
} 
```

* * *

## 内容是这样的：

```
public class Conteudo
{
    protected   TipoConteudo typeConteudo; 

    protected   String      texto;

    protected   Posicao     posicao;

    public Conteudo(TipoConteudo typeConteudo, String texto, Posicao posicao)
    {
        this.texto   = texto;
        this.posicao = posicao;  
        this.typeConteudo = typeConteudo;
    }    
} 
```

## 来自 conteudo 的扩展类的一个示例是：

```
public class ConteudoTweet extends Conteudo 
{
    protected   String      pathImagem;

    public ConteudoTweet(TipoConteudo typeConteudo, String tweet, Posicao location, String picturePath) 
    {
        super(typeConteudo,tweet, location);

        this.pathImagem = picturePath;
    }
} 
```

* * *

最后我所做的是：“String strObject = new Gson().toJson(mensage);” 哪个有效，但在反序列化时无效，因为它始终假定它来自 Content 类

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-15T15:11:12.083

我终于解决了！

```
 // GSON

    GsonBuilder gsonBilder = new GsonBuilder();
    gsonBilder.registerTypeAdapter(Conteudo.class, new InterfaceAdapter<Conteudo>());
    gsonBilder.setPrettyPrinting();

    Gson gson =gsonBilder.create();

    String str2send = gson.toJson(message);

    Mensagem msg_recv = gson.fromJson(str2send,Mensagem.class); 
```

注意：“registerTypeAdapter( **AbstractClass.class** , new InterfaceAdapter());”

通过**AbstractClass.class**我的意思是你在我的例子中实现的类是 Conteúdo 可能是 ConteudoTweet 或 ConteudoUserSystem 等等......

**InterfaceAdapter**的实现是：

```
import java.lang.reflect.Type;

import com.google.gson.JsonDeserializationContext;
import com.google.gson.JsonDeserializer;
import com.google.gson.JsonElement;
import com.google.gson.JsonObject;
import com.google.gson.JsonParseException;
import com.google.gson.JsonSerializationContext;
import com.google.gson.JsonSerializer;

public class InterfaceAdapter<T>
    implements JsonSerializer<T>, JsonDeserializer<T> {

    @Override
    public final JsonElement serialize(final T object, final Type interfaceType, final JsonSerializationContext context) 
    {
        final JsonObject member = new JsonObject();

        member.addProperty("type", object.getClass().getName());

        member.add("data", context.serialize(object));

        return member;
    }

    @Override
    public final T deserialize(final JsonElement elem, final Type interfaceType, final JsonDeserializationContext context) 
            throws JsonParseException 
    {
        final JsonObject member = (JsonObject) elem;
        final JsonElement typeString = get(member, "type");
        final JsonElement data = get(member, "data");
        final Type actualType = typeForName(typeString);

        return context.deserialize(data, actualType);
    }

    private Type typeForName(final JsonElement typeElem) 
    {
        try 
        {
            return Class.forName(typeElem.getAsString());
        } 
        catch (ClassNotFoundException e) 
        {
            throw new JsonParseException(e);
        }
    }

    private JsonElement get(final JsonObject wrapper, final String memberName) 
    {
        final JsonElement elem = wrapper.get(memberName);

        if (elem == null) 
        {
            throw new JsonParseException(
                "no '" + memberName + "' member found in json file.");
        }
        return elem;
    }

} 
```

而且这个 InterfaceAdapter 是通用的，所以它应该可以正常工作......

而已！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-28T07:53:19.230

你应该看看我在这里回答的类似问题： [https ://stackoverflow.com/a/22081826/3315914](https://stackoverflow.com/a/22081826/3315914)

你需要使用[Gson 的 RuntimeTypeAdapterFactory](https://code.google.com/p/google-gson/source/browse/trunk/extras/src/main/java/com/google/gson/typeadapters/RuntimeTypeAdapterFactory.java)

并注册基类和所有子类以使其工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-04T06:17:40.977

这是我对 Sub 类型序列化的看法。[（这里是 github 仓库）](https://github.com/anandchakru-archives/gson)

```
// GsonSerializer.java
package com.rathnas.main;

import java.lang.reflect.Type;
import com.google.gson.Gson;
import com.google.gson.GsonBuilder;
import com.google.gson.JsonDeserializationContext;
import com.google.gson.JsonDeserializer;
import com.google.gson.JsonElement;
import com.google.gson.JsonObject;
import com.google.gson.JsonParseException;
import com.google.gson.JsonSerializationContext;
import com.google.gson.JsonSerializer;
import com.rathnas.vo.Thing;
import com.rathnas.vo.sub.Animal;
import com.rathnas.vo.sub.Bird;
import com.rathnas.vo.sub.nested.Barking;
import com.rathnas.vo.sub.nested.Chirping;
import com.rathnas.vo.sub.nested.NoiseType;

public class GsonSerializer {
    public static void main(String[] args) {
        GsonBuilder builder = new GsonBuilder().registerTypeAdapter(Thing.class, new ThingSerializer<Thing>()).registerTypeAdapter(NoiseType.class, new ThingSerializer<NoiseType>());
        builder.setPrettyPrinting();
        Gson gson = builder.create();
        Animal thing = God.createDog();
        String tmp = gson.toJson(thing, Thing.class); // Note: StackoverflowError, if you do gson.toJson(thing)
        System.out.println("Ser Dog: " + tmp);
        System.out.println("Des Dog: " + gson.fromJson(tmp, Thing.class));
        Bird thing2 = God.createBird();
        tmp = gson.toJson(thing2, Thing.class);
        System.out.println("\n\n\nSer Bird: " + tmp);
        System.out.println("Des Bird: " + gson.fromJson(tmp, Thing.class));
    }
}

class ThingSerializer<T> implements JsonSerializer<T>, JsonDeserializer<T> {
    private static final String TYPE = "type";

    public T deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context) throws JsonParseException {
        JsonObject jsonObj = json.getAsJsonObject();
        String className = jsonObj.get(TYPE).getAsString();
        try {
            return context.deserialize(json, Class.forName(className));
        } catch (ClassNotFoundException e) {
            throw new JsonParseException(e);
        }
    }
    public JsonElement serialize(T src, Type typeOfSrc, JsonSerializationContext context) {
        JsonElement jsonEle = context.serialize(src, src.getClass());
        jsonEle.getAsJsonObject().addProperty(TYPE, src.getClass().getCanonicalName());
        return jsonEle;
    }
}

class God {
    public static Animal createDog() {
        Animal thing = new Animal();
        thing.setName("Dog");
        thing.setLegs(4);
        thing.setWings(0);
        thing.setNoise(new Barking());
        return thing;
    }
    public static Bird createBird() {
        Bird thing = new Bird();
        thing.setName("Bird");
        thing.setLegs(1);
        thing.setWings(2);
        thing.setNoise(new Chirping());
        return thing;
    }
}
// Thing.java
public abstract class Thing {
    private String name;
    private NoiseType noise;
    ..
}

// Animal.java
public class Animal extends Thing implements iThing {
    private Integer legs;
    private Integer wings;
    ..
}
// Bird.java
public class Bird extends Thing implements iThing {
    private Integer legs;
    private Integer wings;
    ..
}
// NoiseType.java
public abstract class NoiseType {..}
// Chirping.java
public class Chirping extends NoiseType {..}
// Barking.java
public class Barking extends NoiseType {..} 
```

**输出**

```
Ser Dog: {
  "legs": 4,
  "wings": 0,
  "name": "Dog",
  "noise": {
    "noise": "barking",
    "type": "com.rathnas.vo.sub.nested.Barking"
  },
  "type": "com.rathnas.vo.sub.Animal"
}
Des Dog: Animal [legs=4, wings=0, noise=NestedAbstractClass [noise=barking]]

Ser Bird: {
  "legs": 1,
  "wings": 2,
  "name": "Bird",
  "noise": {
    "noise": "chirping",
    "type": "com.rathnas.vo.sub.nested.Chirping"
  },
  "type": "com.rathnas.vo.sub.Bird"
}
Des Bird: Bird [legs=1, wings=2, noise=NestedAbstractClass [noise=chirping]] 
```

# c# - Windows 8 打开桌面 IE10

> ID：16000164
> 
> 赞同：2
> 
> 时间：2013-04-14T14:30:56.717
> 
> 标签：c#, internet-explorer, windows-8

当 IE10 是 Windows 8 上的默认浏览器，并且 Internet 选项 -> 程序 -> 选择打开链接的方式设置为`Always in Internet Explorer`时，当您通过 URL 打开新进程时，它将在 Metro 版本的 IE10 中打开。

我能想到两种解决方法，但我还没有找到任何一种方法。

1.  传递一个参数`iexplore.exe`告诉它在桌面上打开。
2.  以编程方式更改注册表中该 Internet 选项的值，打开 URL，然后将其设置回之前设置的值。

我有一种感觉，＃2是我必须走的路线，但是，在注册表中`HKLM\Software\Microsoft\Windows\CurrentVersion\Internet Settings`我看不到任何与该设置相近的东西。

以前有没有人解决过这个问题并且可以提供任何见解？

***这不是道德问题 - 我只需要知道设置在哪里，或者是否有办法通过参数将其强制进入桌面。我真的真的不需要知道这并不理想；我已经完全清楚这个事实了。***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T15:10:04.983

现在我们了解了您的场景（自动化测试），我们可以解释如何正确执行此操作，并且它不涉及覆盖任何用户设置，甚至暂时也不涉及。即使用户将默认浏览器设置为 Internet Explorer 以外的其他浏览器，它也可以工作。

您所做的是[打开 Internet Explorer 的显式桌面版本并将其导航到您的站点](http://blogs.msdn.com/b/oldnewthing/archive/2011/11/18/10238335.aspx)。这是 JavaScript 中的一个示例。您可以通过一点点导入使其适应 C#，或者您可以选择卓越的解决方案并将 IE 托管在您的 C# 应用程序中。

```
var ie = new ActiveXObject("InternetExplorer.Application");
ie.Visible = true;
ie.Navigate("http://www.microsoft.com/");
WScript.Sleep(5000); // five seconds, say
ie.Quit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T14:37:34.710

[如何强制 IE 在 Windows 8 上以桌面模式打开](http://regularitguy.com/2012/12/05/how-to-force-ie-to-open-in-desktop-mode-on-windows-8/)

如果用户想要在 Metro 中使用它并一直在 Metro 中工作，那么在使用 URL 时切换回桌面模式会很烦人。希望该网页是您想要的。

# glassfish - jboss7.1.3 中的 javaee-api 导致： 引起：java.lang.NoClassDefFoundError: javax/faces/component/UIComponentBase

> ID：16000165
> 
> 赞同：0
> 
> 时间：2013-04-14T14:30:59.323
> 
> 标签：glassfish, jboss7.x, java-ee-6, cdi

我目前正在尝试开发一个耳朵应用程序，并希望将其部署在 jboss7.1.3 服务器中。

我使用 jboss maven 模板创建了一个 javaee6 ear 应用程序，并将大部分 javaee6 相关依赖项替换为：

```
<dependency>
    <groupId>javax</groupId>
    <artifactId>javaee-api</artifactId>
    <version>6.0</version>
</dependency> 
```

因为我认为坚持标准会更好。但是当我将接缝面添加到依赖项时，抛出了一个错误：

```
Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: JBAS018045: Failed to load annotated class: org.jboss.seam.faces.component.UIViewAction 
```

进一步挖掘发现了一个缺失的类：

```
Caused by: java.lang.NoClassDefFoundError: javax/faces/component/UIComponentBase 
```

这是为什么？我应该坚持使用 Maven 原型提供的依赖项吗？我担心的是如果我迁移到 Glassfish 会怎样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:27:01.677

是的，坚持原型中的内容。“标准” jars 并不完整，iirc 是通过剥离字节码创建的，这与 Geromino 和 JBoss jars 的创建方式不同（有人通过规范并手动编码所有 api）。只要您保留罐子，`provided`使用 Glassfish 就不会有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T02:14:04.210

上面的答案是有效的，但我所做的不同，我删除了 seam-faces 依赖，它解决了我的问题。我在 seam-faces 中使用的是我在组合框中使用的 s:objectConverter，没有它我创建了自己的实体转换器。

# java - 我正在使用猎物源代码制作自己的应用程序，但出现错误

> ID：16000167
> 
> 赞同：-1
> 
> 时间：2013-04-14T14:31:22.997
> 
> 标签：java, android, eclipse

好吧，我正在使用猎物源代码来开发我自己的防盗应用程序。根据 git ，我从那里得到了 5 个文件。但我正在研究一个大师，我认为这是正确的一个。

当我将它上传到 Eclipse 时，我收到 100 个错误，其中一个仍然保留在 **FileConfigReader.java**中，错误是：

说明：**config**无法解析或不是字段
资源：FileConfigReader.java
路径：/LoginActivity/src/com/prey
位置：第 25 行
类型：Java 问题

出现错误的行：

> InputStream = ctx.getResources().openRawResource(R.raw.config);

该文件的代码：

```
/*******************************************************************************
 * Created by Carlos Yaconi
 * Copyright 2012 Fork Ltd. All rights reserved.
 * License: GPLv3
 * Full license at "/LICENSE"
 ******************************************************************************/
package com.prey;

import java.io.IOException;
import java.io.InputStream;
import java.util.Properties;

import android.content.Context;
import android.content.res.Resources.NotFoundException;

public class FileConfigReader {

    private static FileConfigReader _instance = null;
    Properties properties;

    private FileConfigReader(Context ctx) {
        try {
            PreyLogger.d("Loading config properties from file...");
            properties = new Properties();
            InputStream is = ctx.getResources().openRawResource(R.raw.config);
            properties.load(is);
            is.close();
            PreyLogger.d("Config: "+properties);

        } catch (NotFoundException e) {
            PreyLogger.e("Config file wasn't found", e);
        } catch (IOException e) {
             PreyLogger.e("Couldn't read config file", e);
        }
    }

    public static FileConfigReader getInstance(Context ctx){
        if (_instance == null)
            _instance = new FileConfigReader(ctx);
        return _instance;

    }

    public String getAgreementId(){
        return properties.getProperty("agreement-id");
    }
    public String getGcmId(){
        return properties.getProperty("gcm-id");
    }
    public String getGcmIdPrefix(){
        return properties.getProperty("gcm-id-prefix");
    }

    public String getc2dmAction(){
        return properties.getProperty("c2dm-action");
    }
    public String getc2dmMessageSync(){
        return properties.getProperty("c2dm-message-sync");
    }

    public String getPreyDomain(){
        return properties.getProperty("prey-domain");
    }

    public String getPreySubdomain(){
        return properties.getProperty("prey-subdomain");
    }

    public String getPreyUiSubdomain(){
        return properties.getProperty("prey-ui-subdomain");
    }

    public String getPreyMinorVersion(){
        return properties.getProperty("prey-minor-version");
    }

    public boolean isAskForPassword() {
        return Boolean.parseBoolean(properties.getProperty("ask-for-password"));
    }
    public boolean isLogEnabled() {
        return Boolean.parseBoolean(properties.getProperty("log-enabled"));
    }

    public String getAnalyticsUA() {
        return properties.getProperty("analytics-ua");
    }

} 
```

任何帮助将不胜感激。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T14:40:29.303

您是否创建了资源“配置”？

该资源必须在系统中可用，与其他资源（布局、字符串等）一样

检查本指南：http: [//developer.android.com/guide/topics/resources/providing-resources.html](http://developer.android.com/guide/topics/resources/providing-resources.html)

您的文件“config”应该在 res/raw 文件夹中。

# matlab - 如何在 MATLAB 中绘制此函数？

> ID：16000169
> 
> 赞同：0
> 
> 时间：2013-04-14T14:13:27.753
> 
> 标签：matlab

我在下面有一个简单的函数（为简洁起见，我省略了分配等），我一直在尝试针对它的 x 值绘制 N 和 T 的特定值，但我不断收到尺寸错误。我认为当我尝试绘制这个时，我正在为 x 定义一个数组，然后针对这些 x 绘制某些 N' 和 T' 的 Psum(N', x, T') ，但是 MATLAB 似乎不喜欢这样。有人可以给我一些方向吗？

```
function U = Psum(N, X, T)
  for m = 1:N
    A(1,m) = (1/(m*pi))*sin(m*pi*X)*T*exp(-(m^2)*(pi^2)*T);
    % array terms of partial sum
  end
  M = -sum(A); % evaluate Nth partial sum
  U = T*(1-X) + M; % output U(X,T) = T(1-X) + V(X,T)
end 
```

* * *

当我尝试绘制以下内容时，我遇到了类似的错误，我认为我的一般方法一定有问题

```
 syms x;
 f = @(x)((x/(100*pi))*(exp(-(100^2)*(pi^2)*x)));
 x = 0:0.1:10000;
 plot(x,f(x),'r')
 title('PartialSum convergence');
 xlabel('T');
 ylabel('a_n'); 
```

我在这里得到的错误是：

```
Error using  * 
Inner matrix dimensions must agree. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T15:12:50.630

以下是您遇到尺寸不匹配错误的原因的分析。从这一行：

```
A(1,m) = (1/(m*pi))*sin(m*pi*X)*T*exp(-(m^2)*(pi^2)*T) 
```

该元素`A(1, m)`应该是二维矩阵中的标量值。现在让我们看看每个被乘数的维度是多少：

*   `(1/(m*pi))`是一个标量（即一个 1×1 矩阵）。
*   `sin(m*pi*X)`具有与 相同的尺寸`X`。假设它的维度是 q×n。
*   `exp(-(m^2)*(pi^2)*T)`具有与 相同的尺寸`T`，并乘以`T`。因此`T`必须是一个方阵，所以我们假设它的维数是 p×p。

我们得到的是aq×n矩阵乘以一个p×p方阵，结果一定是一个标量（即1×1矩阵）。这迫使 q=1 和 n=p。

现在让我们看看这一行：

```
U = T*(1-X) + M 
```

我们被迫得出p=1的结论，否则`T`不能`X`从右乘。

这意味着您的代码强制`T`并且`X`是标量的！难怪你得到一个错误:)

补救措施很简单：修改计算，`Psum`以便它可以为标量`X`和向量产生正确的结果`X`。一个可能的解决方法是添加另一个循环来遍历 的所有值`X`：

```
function U = Psum(N, X, T)
    U = zeros(size(X));
    for k = 1:numel(X)  %// Iterate over all values of X
        for m = 1:N
            A(1,m) = (1/(m*pi))*sin(m*pi*X(k))*T*exp(-(m^2)*(pi^2)*T);
            %// array terms of partial sum
        end
        M = -sum(A); % evaluate Nth partial sum
        U(k) = T*(1-X(k)) + M; % output U(X,T) = T(1-X) + V(X,T)
    end
end 
```

此函数的输出具有与 相同的维度`X`。

顺便说一句，您是否验证了这`Psum`会为标量输入产生正确的结果？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T15:05:29.493

我不完全理解您要完成的工作，但只是对您的观察：如果您的输入 X 是向量，则无法正确计算第 3 行

```
A(1,m) = (1/(m*pi))*sin(m*pi*X)*T*exp(-(m^2)*(pi^2)*T); 
```

因为等式的右边给你一个向量，但右边`A(1,m)`是一个元素，而不是向量。所以你有尺寸不匹配。希望这可以帮助！

# python - 使用 iPhone 加速度计数据获取图像的自上而下视图

> ID：16000170
> 
> 赞同：5
> 
> 时间：2013-04-14T14:31:45.997
> 
> 标签：python, iphone, opencv

我开发了一个简单的小 iPhone 应用程序（用于学术目的），它允许用户为物体拍照。在拍摄照片时，手机的加速度计数据也会被捕获。用户将采用自上而下（鸟瞰图）的图像，这意味着手机应合理地与对象成 90 度角。但是，不能保证角度*始终为 90 度这一概念。*

鉴于我有拍摄图像时的加速度计数据（x、y、z 值），我相信有一种方法可以构造一个变换矩阵来变换图像，就好像它是从 90 度角拍摄的一样。但是，我不确定如何构建这个矩阵。

正如我所提到的，这是为了玩耍/学术目的，所以一旦我捕捉到图像和 x、y、z 数据，我只需将其发送到我的一台计算机进行进一步处理。正在使用 Python 和 OpenCV 执行处理。

任何帮助或指示将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T13:13:48.687

# 你的家庭作业

阅读文章

*   [http://en.wikipedia.org/wiki/Perspective_control](http://en.wikipedia.org/wiki/Perspective_control)
*   [http://en.wikipedia.org/wiki/Projective_transformation](http://en.wikipedia.org/wiki/Projective_transformation) AKA Homography
*   [http://en.wikipedia.org/wiki/Image_rectification](http://en.wikipedia.org/wiki/Image_rectification)
*   [http://en.wikipedia.org/wiki/Epipolar_geometry](http://en.wikipedia.org/wiki/Epipolar_geometry)

这些演示文稿将使您了解所涉及的数学的复杂性。- [http://www.cs.auckland.ac.nz/compsci773s1t/lectures/773-GGpdfs/773GG-FundMatrix-A.pdf](http://www.cs.auckland.ac.nz/compsci773s1t/lectures/773-GGpdfs/773GG-FundMatrix-A.pdf) - [http://www.robots.ox.ac.uk/~vgg/hzbook/ hzbook1/HZepipolar.pdf](http://www.robots.ox.ac.uk/~vgg/hzbook/hzbook1/HZepipolar.pdf)

# 答案？

从相关问题[Skewing an image using Perspective Transforms](https://stackoverflow.com/questions/2446494/skewing-an-image-using-perspective-transforms)，使用 OpenCV 函数**cvWarpPerspective**（感谢@jeff7）

[http://opencv.willowgarage.com/documentation/geometric_image_transformations.html](http://opencv.willowgarage.com/documentation/geometric_image_transformations.html)

您仍然需要创建矩阵，为此您可以尝试**cvGetPerspectiveTransform**并根据传感器的方向信息创建输入顶点。

或者，如果角度非常小，仿射变换可能看起来足够好（**cvWarpAffine**和**cvGetAffineTransform**） [http://docs.opencv.org/doc/tutorials/imgproc/imgtrans/warp_affine/warp_affine.html](http://docs.opencv.org/doc/tutorials/imgproc/imgtrans/warp_affine/warp_affine.html)

# c# - 从 DataAdapter 错误填充数据集

> ID：16000171
> 
> 赞同：3
> 
> 时间：2013-04-14T14:31:46.437
> 
> 标签：c#, sql-server, sqldataadapter

我正在尝试执行标题所说的操作，但在运行时出现此错误：

> 关键字“顶部”附近的语法不正确。

```
string connString = @"server  =.\sqlexpress; Database=BestScores.mdf; trusted_connection=TRUE; AttachDbFileName= D:\Programing\Projects Visual Studio 2008\JigSaw\JigSaw\bin\Debug\BestScores.mdf";
SqlConnection conn = new SqlConnection(connString);
conn.Open();
DataSet ds = new DataSet();
SqlDataAdapter da = new SqlDataAdapter(@"SELECT * FROM Top", conn);
da.Fill(ds);//Error 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T14:39:43.693

`Top`是Transact-SQL 上的*[保留关键字。](http://msdn.microsoft.com/en-us/library/ms189822.aspx)*当你想在你的 sql 命令中使用它时，你必须将它与方括号一起使用，如`[TOP]`.

```
SqlDataAdapter da = new SqlDataAdapter(@"SELECT * FROM [Top]", conn); 
```

这就是为什么你得到

> 关键字“顶部”附近的语法不正确

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T14:33:37.710

尝试将 Top 更改为另一个名称，因为 TOP 是 SQL 上的保留字。看看这个[http://www.w3schools.com/sql/sql_top.asp](http://www.w3schools.com/sql/sql_top.asp)

# node.js - 在 Windows 上安装 npm（Node.js 包管理器）（不使用 Node.js MSI）

> ID：16000173
> 
> 赞同：56
> 
> 时间：2013-04-14T14:31:56.937
> 
> 标签：node.js, installation, npm

问题：在使用`nvm`安装 Node.js 时，我能够安装我需要的 Node.js 版本，但`nvm`不会`npm`自动安装。NPM 的页面没有提供有关安装它的信息。我自己不是 Windows 用户，我完全不知所措......

Google 中的每个结果似乎都使用 Node.js MSI 安装程序来使其正常工作——在我的情况下，这不是一个选项。那么，我该怎么做？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-14T19:09:23.973

要在 Windows 上安装 npm，只需解压缩node 所在的 npm[存档。](http://nodejs.org/dist/npm/)有关更多详细信息，请参阅[文档](https://github.com/isaacs/npm#fancy-windows-install)。

npm 随节点一起提供，这就是您应该安装它的方式。nvm 仅用于更改节点版本，不安装 npm。使用 npm 和 nvm 的一种更简洁的方法是首先按原样安装节点（使用 npm），然后安装[nvm](https://npmjs.org/package/nvm)包`npm install nvm`

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-06-03T19:24:42.283

[https://nodejs.org/download/](https://nodejs.org/download/)。该页面包含 Windows Installer (.msi) 以及其他安装程序和二进制文件。下载并安装 Windows。

Node.js 带有 NPM。

NPM 位于安装 Node.js 的目录中。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-02-16T08:57:18.993

我使用了相当@Eyuel的方法：

*   [从https://nodejs.org/en/#download](https://nodejs.org/en/#download)下载 nodejs msi
*   [从 github https://github.com/npm/npm](https://github.com/npm/npm)下载 npm zip
*   在目录“node”中提取 msi（带有 7 Zip）
*   设置PATH环境变量添加“node”目录
*   从 npm 中提取 zip 文件到不同的目录（不在节点目录下）
*   CD 到 npm 目录并运行命令`node cli.js install npm -gf`

现在你应该有 node + npm 工作，使用这些命令来检查：`node --version`和`npm --version`

**更新 27/07/2017**：我注意到最新版本的节点 8.2.1 和最新版本的 npm 与我在回答此问题时使用的完全不同。使用这些版本的安装将不起作用。它适用于节点 6.11.1 和 npm 5.2.3。此外，如果您使用代理运行，请不要忘记连接互联网：

*   导出 http_proxy= [http://proxy:8080](http://proxy:8080)
*   导出 https_proxy= [http://proxy:8080](http://proxy:8080)
*   npm 配置设置代理[http://proxy:8080](http://proxy:8080)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-09-22T18:23:42.160

我还需要在 Windows 中安装 npm 并通过 Chocolatey pacakage manager 获得它。对于那些还没有听说过的人，Chocolatey 是一个 Windows 包管理器，它为您提供了在 Windows 环境中使用 apt-get 的便利。要获得它，请访问[https://chocolatey.org/](https://chocolatey.org/)，那里有一个 PowerShell 脚本可以下载并安装它。之后，您可以运行：

```
chocolatey install npm 
```

你可以走了。

请注意，不再更新独立的 npm，并且已知最后一个版本在 Windows 上存在问题。您可以查看的另一个选项是使用[LessMSI](https://chocolatey.org/packages/lessmsi)从 MSI 中提取 npm 。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-01-11T06:23:34.583

第一张 CD 到使用 windows CMD 安装 node(nodejs) 的位置，然后按照以下步骤操作

```
C:...\node> git config --system http.sslcainfo /bin/curl-ca-bundle.crt
C:...\node> git clone --recursive git://github.com/isaacs/npm.git
C:...\node> cd node=modules\npm
C:...\node=modules\npm> node cli.js install npm -gf 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2015-02-20T15:54:35.933

[只需从http://nodejs.org/dist/](http://nodejs.org/dist/)下载“node.exe” ，选择您喜欢的“node.js”版本或获取[最新](http://nodejs.org/dist/latest/)的. 您还可以从“x64”子目录中获取 64 位版本。

然后，转到[http://nodejs.org/dist/npm/](http://nodejs.org/dist/npm/)以检索您最喜欢的“npm”版本的 Zip-archive（推荐：）`1.4.10`。沿“node.exe”提取存档。

最后，为方便起见，建议将“node.js”目录添加到 PATH 中。

编辑：我建议使用更新 npm，`npm install npm -g`因为 nodejs.org 提供的版本非常旧。

如果要保留原始 npm 版本，请不要将 npm 放在旁边`"node.exe"`。只需创建一个目录并使用带有“global”标志的相同命令，然后复制`.\node_modules\.bin\npm.cmd`到新目录：

```
mkdir c:\app\npm\_latest
cd c:\app\npm\_latest
<NPM_ORIGINAL_PATH>\npm install npm
cp node_modules\.bin\npm.cmd npm.cmd 
```

最后更改您的 PATH 以使用`c:\app\npm\_latest`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-08-27T06:38:57.987

我最近写了一个快速简单的应用程序来处理各种版本的节点和 npm 的管理。它允许您选择不同版本的 node 和 npm 下载并选择要使用的版本。检查一下，看看它是否有用。

[https://github.com/nhatkthanh/wnm](https://github.com/nhatkthanh/wnm)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-12-11T11:45:45.583

# TL;DR：安装 Chocolatey、Node（和 NPM）

## 安装巧克力

注意：您可能希望从[他们的安装页面](https://chocolatey.org/install)复制确切的命令，因为它可能会随着时间而改变。

1.  打开标准 Windows 命令行
2.  `@powershell -NoProfile -ExecutionPolicy unrestricted -Command "(iex ((new-object net.webclient).DownloadString('https://chocolatey.org/install.ps1'))) >$null 2>&1" && SET PATH="%PATH%;%ALLUSERSPROFILE%\chocolatey\bin"`
3.  重启控制台
4.  完毕！

## 安装节点（和 NPM）

1.  因为 Chocolatey 安装的目录与 MSI 安装不同，所以转到您的系统配置并删除您之前的`node`安装（如果有的话）
2.  如上所述安装 Chocolatey
3.  `choco install nodejs`

    > 注意我使用了`nodejs`. 我什至不确定是什么，但我认为，在其他系统中已经被其他东西占用了`node`我相当多的麻烦，我认为，这将是更安全的选择`node``nodejs`

4.  重新启动您的控制台
5.  当心：`node -v`工作！
    *   而且`npm -v`还有效！惊人的。

在此之后，我能够`firebase-tools`毫无问题地安装（我以前无法做到这一点），所以一定有什么事情做得非常好！:)

# 我第一次相当完整的故事

> “巧克力在几秒钟内安装”

如果您不关心周日下午的讽刺或哀叹工程师，请跳至下面**TL;DR**部分中的安装说明。

对于其他所有人：我想修改[这个建议使用的答案](https://stackoverflow.com/questions/16000173/install-npm-node-js-package-manager-on-windows-w-o-using-node-js-msi/25980740#25980740)（现在似乎是 Windows 最热门的包管理解决方案）：[Chocolatey](https://chocolatey.org/)

它可以快速完成工作。然而，当我第一次尝试时，我花了一段时间才弄明白安装说明有点复杂。安装说明有点像这样（完成时我脑子里想的）：

*   **笔记：**
*   **笔记：**
*   **笔记：**

    > 在了解基本知识之前就写了三个大屁股……这让我很焦虑……事情怎么会出错！？

*   **使用受限 TLS 安装**

    > 甚至不确定是什么`TLS`......哦，它是一个好朋友`SSL`- 这不应该只是默认设置并且开箱即用吗？我的浏览器可以`HTTPS`，没问题！（开个玩笑……我知道这一点，`SSL`并且`TSL`经常在具有高安全需求的环境中造成很多痛苦）

*   **选项1**
*   **选项 2**

    > 呃……太好了……我不能安装吗？

*   **在代理后面安装？**

    > 就是不行...

*   **要求**

    > 呃，博伊...

*   **为什么 Chocolatey 默认安装在它的位置？**

    > 严重地！？！

*   **安装之前**

    > [![伤心](https://i.stack.imgur.com/nTnlV.png)](https://i.stack.imgur.com/nTnlV.png)
    > [（来源：[clipartbest.com](http://www.clipartbest.com/cliparts/jix/Ekx/jixEkxaGT.png)）]

*   **我可以使用代理安装吗？**

    > 再次与代理...

*   **我可以安装特定版本的 Chocolatey 吗？**

    > 任何版本都可以，谢谢...

*   **我可以使用 Windows 内置压缩而不是下载 7zip 吗？**

    > 7zip？！为什么还要提这个？！

*   **非管理安装**
*   > 现在听起来很棒！

    *   "**注意**：此选项应该是最后的手段，并且被认为是高级方案。"
        *   > 嘘$%!@T。

*   **替代安装选项**

    > *头晕*

*   **命令行**
    *   “这确实是最简单的方法，因为它在执行之前不需要配置 PowerShell。”

        > 你去吧！

虽然我真的很欣赏这样一个事实，即对陷阱及其可能的解决方案进行了如此广泛的讨论，但也许可以重新组织它们，并`Chocolatey installs in seconds`通过将“最简单的方法”放在首位来实现承诺，这真是太棒了！

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-07-30T13:01:32.783

尝试转到 Window -> Preferences -> Nodeclipse 并取消选中“find node on PATH ...”框。然后确保下面的“Node.js 路径”设置为 node.exe 文件的位置（对我来说它是 C:\Program Files (x86)\nodejs\node.exe）。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-04-27T02:34:46.897

下载最新的 Node.js MSI（4.x 或 5.x）安装程序并通过命令行运行以下命令：

```
msiexec /a node-v4.4.3-x64.msi /qb TARGETDIR="C:\Node.js" 
```

这会将二进制文件提取到`C:\Node.js\nodejs`.

然后你会想要添加`C:\Node.js\nodejs` `PATH`环境变量。

要更新 NPM，请执行以下操作：

```
cd C:\Node.js\nodejs
npm install npm@latest 
```

完成后，您应该能够检查版本：

```
node --version
npm --version 
```

Node 应该是 4.4.3+（无论你安装了哪个），npm 应该是 3.8.7+。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-05-16T23:54:50.043

如果您正在运行 Windows 10 Creators Update (1703) 并且可以轻松地在 Unix 终端上导航，那么您可以使用**[Windows 上的 Ubuntu 上的本机 Feature Bash](https://msdn.microsoft.com/commandline/wsl/about)**（又名*Bash/WSL*）来实现此目的

> 这最初是在 Build 2016 发布时引入的，但在 Creators 更新中解决了许多添加和错误修复，但请注意这仍处于测试阶段。

要启用，只需导航到**控制面板\所有控制面板项\程序和功能\打开或关闭 Windows 功能**

然后选择**Windows Subsystem for Linux (Beta)**如下 [Bash on Windows Feature](https://i.stack.imgur.com/yovel.png)

# java - 按长字符串中的单词进行 Java 统计

> ID：16000175
> 
> 赞同：0
> 
> 时间：2013-04-14T14:32:08.283
> 
> 标签：java, string, optimization, words

我正在用java编写一个程序来获取一个非常大的字符串（字符串s <= 100000）中单词的统计信息。这应该花费不到 1 秒的时间并使用少于 16 MB 的内存。

```
import java.util.Scanner;
class Main{
 public static void main(String[] args){

  Scanner sc = new Scanner(System.in);
  String t = sc.nextLine();
  int i=0;
  while(t.charAt(i)==' ') i++;
  t = t.substring(i);
  String[] s = t.split(" +");

  RecString[] stat  = new RecString[s.length];
  for(i=0; i<s.length;i++){
    stat[i] = new RecString("");  
  }
  int j=0;
  for(i=0; i<s.length;i++){
    int f=0;
    for(int h =0; h<stat.length; h++){
     if(stat[h].word.equals(s[i])){
       f = 1;
       stat[h].count++;
       break;
     }
    }
    if(f==0){
      stat[j] = new RecString(s[i]);
      j++;
    }
  }
  for(i=0;i<=j;i++){
   if(stat[i].word != ""){
      System.out.println(stat[i].word+" "+(stat[i].count));
   }
  }

 }
}

class RecString{
    public  String word;
    public  int count;

    public RecString(String s){
        word = s;
        count = 1;
    }

} 
```

此代码适用于长度 <=255 的字符串，但对于大字符串，我有时间或/和内存限制。

请帮我优化我的程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:57:18.643

如果您关心内存，您将希望尽可能多地进行流式传输。

请参阅[http://docs.oracle.com/javase/6/docs/api/java/io/StreamTokenizer.html](http://docs.oracle.com/javase/6/docs/api/java/io/StreamTokenizer.html)

```
StreamTokenizer tokenizer = new StreamTokenizer(new InputStreamReader(System.in));

while(tokenizer.nextToken() != StreamTokenizer.TT_EOF){

    if(tokenizer.ttype == StreamTokenizer.TT_WORD) {
        // found a word.
        System.out.println(tokenizer.sval);
    }
} 
```

当然，如果内存不是问题并且速度是您唯一关心的问题，Hadoop 有一个出色的字数统计示例：[http](http://wiki.apache.org/hadoop/WordCount) ://wiki.apache.org/hadoop/WordCount 。但是把它留到下雨天的学习。

此外，您计算单词的逻辑也不适合效率（其`O(N)`）。@DaveNewton 是正确的，您可能应该使用 a`Map<String,Integer>`这会给您`O(1)`而不是您的`RecString`. 我不会纠正你对此的看法，因为我认为这是一个很好的练习。

# java - 如何在 java DynamicWebApplication 中创建文件/文件夹？

> ID：16000176
> 
> 赞同：0
> 
> 时间：2013-04-14T14:32:12.420
> 
> 标签：java, eclipse, jersey, jax-ws

我正在使用[REST 和 Java (JAX-RS) 使用 Jersey](http://www.vogella.com/articles/REST/article.html)来创建 Web 服务。现在，对于我的项目，我需要在运行时相对于我的项目创建文件夹。

这就是我所做的。

```
String str = "<?xml version=1.0><users><user name=\"Taruni\" id=\"501\"></users>";          
File f= new File("helloWorldIndia.xml");
boolean status = f.createNewFile();
FileWriter writer = new FileWriter(f);
writer.write(str); 
```

在这里，状态正在返回`true`，但文件在我的机器中的任何地方都不可见。我已经扫描了我的机器。即使那样我也找不到。

创建文件夹/文件的正确方法是什么？可以创建相对于项目的文件夹吗？如果不是，还有什么选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T16:26:22.347

当你这样做

> 新文件（“helloWorldIndia.xml”）.createNewFile（）

无论您从哪里运行程序，都会创建文件“helloWorldIndia.xml”。在这种情况下，您的程序正在由 Web 服务器运行。因此，该文件将在您的 Web 服务器**部署**Web 应用程序的路径上创建，而**不是**在您放置 war 文件的位置。

现在让我们假设您的网络服务器是码头。使用默认配置，jetty 将战争部署在系统的临时文件夹中，该文件夹在 Windows 上位于 %TEMP%，在 Linux 上位于 /tmp。在这种情况下，如果您在临时文件夹中搜索“helloWorldIndia.xml”，在运行您的代码后，您应该会找到该文件。

话虽如此，某些服务器会在您关闭服务器时删除已部署的文件。在执行 FS 扫描时未找到您的文件的原因可能是在您关闭服务器时已删除部署的文件夹本身。

要找出您的代码在哪里写入文件，请将此行添加到代码段的末尾。

> System.out.println(f.getAbsolutePath());

这将记录使用当前代码创建文件的完整路径。

对于 Web 应用程序，您应该将文件写入文件系统的*绝对路径*。在相对路径上写入是不安全的，因为如果您将服务器配置为部署在不同的位置，那么在不更改配置/代码的情况下可能无法找到以前写入的文件。

*最好的方法是在代码中设置*要写入文件的文件夹的绝对路径。您可以传递需要写入文件的文件夹的路径 -

*   作为环境变量（启动服务器时的 -D 属性）。
*   作为 web.xml 中的[servlet 配置](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletConfig.html)属性，如下[所示](http://www.javatpoint.com/servletconfig)
*   作为数据库中的配置条目。在运行时执行数据库查询以获取文件夹的路径。
*   还有很多..

需要注意的是，除非不可避免，否则不建议通过 Web 应用程序编写文件。原因之一可能是交易。事务不能自动处理文件 IO。如果事务失败并需要回滚，您必须手动处理文件写入场景。

# android - 动态设置两个垂直堆叠的按钮

> ID：16000179
> 
> 赞同：0
> 
> 时间：2013-04-14T14:32:32.347
> 
> 标签：android, android-layout

我想在屏幕底部设置两个按钮，一个在另一个之上，这些按钮应该填充父宽度并包裹内容的高度。我是否必须像在下面的代码中那样手动计算不同屏幕尺寸的屏幕高度，或者是否有其他方法可以完成此操作，我是否必须调用`LayoutParams`每个按钮才能`topMargin`稍微更改？

到目前为止我有这个

```
//BUTTON ONE
RelativeLayout.LayoutParams btnParams1 = new RelativeLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
final float scale = getResources().getDisplayMetrics().density;
int marginTop = (int) (350 * scale + 0.5f);
btnParams1.topMargin = marginTop ;
btn_true.setLayoutParams(btnParams1);

//BUTTON TWO
RelativeLayout.LayoutParams btnParams1 = new RelativeLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
final float scale = getResources().getDisplayMetrics().density;
int marginTop = (int) (300 * scale + 0.5f);
btnParams1.topMargin = marginTop ;
btn_false.setLayoutParams(btnParams1); 
```

# c# - 在“EditorForModel()”中插入默认值

> ID：16000182
> 
> 赞同：1
> 
> 时间：2013-04-14T14:32:45.270
> 
> 标签：c#, asp.net-mvc-3, editorformodel

在我的应用程序中，我有一个管理地址的视图。

当调用该操作时，它会传递 ID 和一个布尔值。如果为 true，则应编辑而不是创建地址。有什么方法可以将要编辑的地址中的值分配给 EditorForModels 字段，还是单独写出每个字段更好？

```
 @Html.EditorForModel() 
```

或者

```
 <input type="text" required="required" name="firstName" value="@fName"/>
    <br/>
    <label>Last Name: </label>
    <input type="text" required="required" name="lastName" value="@lName"/>
    <br/>
    <label>Address: </label>
    <input type="text" required="required" name="address" value="@addy"/>
    <br/>
    <label>Town: </label>
    <input type="text" required="required" name="town" value="@town"/>
    <br/>
    <label>Post Code: </label>
    <input type="text" required="required" name="postCode" value="@postCode"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:17:55.370

使用强类型视图，将值分配给模型对象的属性并将其传递给您的视图。这将产生预填充的编辑器模板：

模型：

```
public class SomethingModel
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string PostCode { get; set; }
} 
```

控制器：

```
public ActionResult MyAction()
{
    var model = new SomethingModel {
        FirstName = "John",
        LastName = "Doe",
        PostCode = "XXY XXY"
    };
    return View(model);
} 
```

看法：

```
@model SomethingModel

<div class="input">
    @Html.TextBoxFor(m => m.FirstName)
</div>
<div class="input">
    @Html.TextBoxFor(m => m.LastName)
</div>
<div class="input">
    @Html.TextBoxFor(m => m.PostCode)
</div> 
```

# image-processing - 匹配点的启发式方法

> ID：16000187
> 
> 赞同：0
> 
> 时间：2013-04-14T14:33:43.697
> 
> 标签：image-processing, matching, point, heuristics

我正在使用 SIFT 和 SURF 算法。但我需要研究点和特征匹配中的启发式方法。图像处理中匹配点的启发式方法有哪些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T20:04:51.237

对于您的问题， [FLANN 匹配器](http://opencv.willowgarage.com/documentation/cpp/features2d_common_interfaces_of_descriptor_matchers.html#flannbasedmatcher)可能是一个有用的启发式匹配器，并且非常适合 SIFT 和 SURF 描述符。还有各种其他分类器，例如决策树/蕨类植物/森林和机器学习技术，但如果您只寻找匹配器而不是分类器，我会选择 FLANN。

# javascript - js覆盖函数被调用两次

> ID：16000190
> 
> 赞同：2
> 
> 时间：2013-04-14T14:33:57.030
> 
> 标签：javascript, overriding

jQuery Datepicker 小部件基于内置的 Date。我正在尝试覆盖 Date 来计算我们自己的具有不同年份、月份 .... 的日历（无需更改 datepicker 代码）。我尝试了下面的代码进行测试，但是这个覆盖被调用了两次。

```
Date.prototype.getFullYear = (function(){
    var $gfy = Date.prototype.getFullYear;
    if (!this.done) {
        this.done = true; // add my own variable to this instance
        return function() {
             return $gfy.call(this)+150;
       };
    } else {
        return function() {
             return $gfy.call(this);
        };
    }
}()); 
```

所以，

1.  什么是覆盖本机功能的正确方法和

2.  如何将变量添加到原始实例。

3.  如何获取实例本身（这在这里不起作用）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:39:27.850

首先是一些重要的区别（您可能已经知道这一点，但我们在同一页面上）。

`prototype`改变所有对象（实例和未来实例）的行为。因此，在修改内置类型（日期、字符串等）时要小心，因为您将为使用它们的每个例程更改这些对象的行为。

`**[Live Demo](http://jsfiddle.net/NTbv2/)**`

```
//Add a property to the instance
var date = new Date(); 
date.newProp = 'test'; 
alert(date.newProp); //test

//----VS----

//Add a property to all instances existing 
//and too be created
Date.prototype.newProp2 = 'new prop'; 

var date2 = new Date(); 
alert(date2.newProp);//undefined 
alert(date2.newProp2); //new prop

//See how the prototype modified the existing instance as well. 
alert(date.newProp2); //new  prop 
```

要回答您的具体问题：

1.  看起来您正确地覆盖了本机功能。存储本机函数的副本，以便您可以像调用`base`函数一样调用它。
2.  在我上面的示例中，您要么需要修改所有 Date 实例，要么只修改一个有问题的实例。
    *   `var date = new Date(); date.done = false;`
    *   `Date.prototype.done = false;`
3.  原因`this`在您的外部函数中不起作用是因为它是一个[自我执行的匿名函数](https://stackoverflow.com/q/14322708/402706)，并且会立即执行以便将您的内部函数之一分配给该`getFullYear`方法。

总而言之，由于存在干扰其他库的危险，我不确定您的方法是否是最好的主意，而且我不确定您为什么只希望此函数在每个 Date 实例中一次返回 +150，但是这是您修改后的代码以执行您的预期逻辑。

`**[Live Demo](http://jsfiddle.net/26LBp/1/)**`

```
//Add a variable to all Date objects
Date.prototype.done = false; 

//Override the getFullYear function
Date.prototype.getFullYear = (function(){

    //Store a reference to the native function
    var $gfy = Date.prototype.getFullYear;
    return function(){

        //Have we hit this routine before?
        if (!this.done) {

            //We've hit this routine once so flag it.
            this.done = true;

            //Execute native funciton, then add 150
            return $gfy.call(this)+150;
        } else {

            //Call the native function from now on.
            return $gfy.call(this);
        }
    }
}());//self executing function so it executes as soon as it is evaluated.

var date = new Date(); 

//Will return +150 the first time
alert(date.getFullYear()); 

//After that execute the default 
//function for'getFullYear'
alert(date.getFullYear()); 
```

# php - 选中多个复选框时页面中断

> ID：16000192
> 
> 赞同：0
> 
> 时间：2013-04-14T14:34:05.053
> 
> 标签：php, checkbox

我有一个带有一些复选框的页面，如果只选择一个复选框，它工作正常，但是如果我选择 2 个或更多复选框，结果显示正常，但脚本切断后页面的其余部分。任何想法会导致这种情况发生。

```
<?php

if (isset($_POST['criteria']) && !empty($_POST['criteria'])) {
    foreach($_POST['criteria'] as $key => $value) {

        // get the function

        include ($_SERVER['DOCUMENT_ROOT'] . '/scripts/pagination-functions.php');

        $page = (int)(!isset($_GET["page"]) ? 1 : $_GET["page"]);
        $limit = 14;
        $startpoint = ($page * $limit) - $limit;

        // Runs mysql_real_escape_string() on every value encountered.

        $clean_criteria = array_map('mysql_real_escape_string', $_REQUEST['criteria']);

        // Convert the array into a string.

        $criteria = implode("','", $clean_criteria);

        // to make pagination

        $statement = "table WHERE page IN ('$criteria') ORDER BY long_title ASC";
        if (!$query = mysql_query("SELECT * FROM {$statement} LIMIT {$startpoint} , {$limit}")) {
            echo "Cannot parse query";
        }
        elseif (mysql_num_rows($query) == 0) {
            echo "No records found";
        }
        else {
            echo "";
            while ($row = mysql_fetch_assoc($query)) {
                echo "" . $row['name'] . "<br />
             " . $row['description'] . "";
            }
        }

        echo "<div class=\"pagination\">";
        echo pagination($statement, $limit, $page);
        echo "</div>";
    }
}

?> 
```

如果有人可以提供帮助或指出正确的方向，我将非常感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:43:48.367

您确定要将所有内容都放在该`foreach`循环中吗？看起来您根本不需要该`foreach`循环，因为您将条件项作为一个组使用，而不是单独使用：

```
$clean_criteria = array_map('mysql_real_escape_string', $_REQUEST['criteria']);
$criteria = implode("','", $clean_criteria); 
```

这意味着您的查询将对指定的每个条件执行一次，但每个查询都已经查看了所有条件。您从不引用`$key`or `$value`，所以我认为循环没有用。

## 重做的代码示例

```
<?php

if (!empty($_POST['criteria'])) {

    // get the function

    include ($_SERVER['DOCUMENT_ROOT'] . '/scripts/pagination-functions.php');

    $page = (int)(!isset($_GET["page"]) ? 1 : $_GET["page"]);
    $limit = 14;
    $startpoint = ($page * $limit) - $limit;

    // Runs mysql_real_escape_string() on every value encountered.

    $clean_criteria = array_map('mysql_real_escape_string', $_POST['criteria']);

    // Convert the array into a string.

    $criteria = implode("','", $clean_criteria);

    // to make pagination

    $statement = "table WHERE page IN ('$criteria') ORDER BY long_title ASC";
    $query = mysql_query("SELECT * FROM {$statement} LIMIT {$startpoint} , {$limit}");
    if (!$query) {
        echo "Cannot parse query";
    } elseif (mysql_num_rows($query) == 0) {
        echo "No records found";
    } else {
        while ($row = mysql_fetch_assoc($query)) {
            echo $row['name'] . "<br />" . $row['description'] . "<br /><br />";
        }
    }

    echo "<div class=\"pagination\">";
    echo pagination($statement, $limit, $page);
    echo "</div>";
}
?> 
```

# java - 线程“主”org.apache.axis2.AxisFault 中的异常：1

> ID：16000195
> 
> 赞同：0
> 
> 时间：2013-04-14T14:34:23.090
> 
> 标签：java, axis2, rampart

我尝试使用具有壁垒安全性的轴 2 Web 服务。
我被这个问题困扰了三天，但知道我得到了这个例外：

```
Exception in thread "main" org.apache.axis2.AxisFault: 1
at org.apache.axis2.util.Utils.getInboundFaultFromMessageContext(Utils.java:531)
at org.apache.axis2.description.OutInAxisOperationClient.handleResponse(OutInAxisOperation.java:375)
at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:421)
at org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:229)
at org.apache.axis2.client.OperationClient.execute(OperationClient.java:165)
at org.apache.axis2.client.ServiceClient.sendReceive(ServiceClient.java:555)
at org.apache.axis2.client.ServiceClient.sendReceive(ServiceClient.java:531)
at tan.zltestcl.main(zltestcl.java:55) 
```

* * *

这是我的 PWCBhanler,.java

```
package tan;
import org.apache.ws.security.WSPasswordCallback;
import javax.security.auth.callback.Callback;
import javax.security.auth.callback.CallbackHandler;
import javax.security.auth.callback.UnsupportedCallbackException;
import java.io.IOException;
public class PWCBHandler implements CallbackHandler {
public void handle(Callback[] callbacks) throws IOException,
UnsupportedCallbackException {
for (int i = 0; i < callbacks.length; i++) {
//When the server side need to authenticate the user
WSPasswordCallback pwcb = (WSPasswordCallback)callbacks[i];
if(pwcb.getIdentifier().equals("bob") ) {
pwcb.setPassword("bobPW");
} 
}
}
} 
```

这是我的 service.xml

<

```
service name="ztest" >
<module ref="rampart"/>
<Description>
Please Type your service description here
</Description>
<messageReceivers>
<messageReceiver mep="http://www.w3.org/2004/08/wsdl/in-only" class="org.apache.axis2.rpc.receivers.RPCInOnlyMessageReceiver" />
<messageReceiver mep="http://www.w3.org/2004/08/wsdl/in-out" class="org.apache.axis2.rpc.receivers.RPCMessageReceiver"/>
</messageReceivers>
<parameter name="ServiceClass" locked="false">tan.ztest</parameter>
<wsp:Policy wsu:Id="UTOverTransport"
xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd"
xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
<wsp:ExactlyOne>
<wsp:All>
<sp:SignedSupportingTokens
xmlns:sp="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy">
<wsp:Policy>
<sp:UsernameToken
sp:IncludeToken="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy/IncludeToken/AlwaysToRecipient" />
</wsp:Policy>
</sp:SignedSupportingTokens>
<ramp:RampartConfig xmlns:ramp="http://ws.apache.org/rampart/policy">
<ramp:passwordCallbackClass>tan.PWCBHandler</ramp:passwordCallbackClass>
</ramp:RampartConfig>
</wsp:All>
</wsp:ExactlyOne>
</wsp:Policy>
</service> 
```

* * *

## 在我的客户端 policy.xml 中，与来自servoces.xml 的策略的唯一区别是我添加了 `<ramp:user>bob</ramp:user>`

这是我的client.java

```
package tan;
import org.apache.axiom.om.OMAbstractFactory;
import org.apache.axiom.om.OMElement;
import org.apache.axiom.om.OMFactory;
import org.apache.axiom.om.OMNamespace;
import org.apache.axiom.om.impl.builder.StAXOMBuilder;
import org.apache.axis2.addressing.EndpointReference;
import org.apache.axis2.client.Options;
import org.apache.axis2.client.ServiceClient;
import org.apache.axis2.context.ConfigurationContext;
import org.apache.axis2.context.ConfigurationContextFactory;
import org.apache.neethi.Policy;
import org.apache.neethi.PolicyEngine;
import org.apache.rampart.RampartMessageData;
import javax.xml.namespace.QName;
public class zltestcl {
    public static void main(String[] args) throws Exception {

        if(args.length != 3) {
            System.out.println("Usage: $java Client endpoint_address client_repo_path policy_xml_path");
        }

        ConfigurationContext ctx = ConfigurationContextFactory.createConfigurationContextFromFileSystem(args[1], null);

        ServiceClient client = new ServiceClient(ctx, null);
        Options options = new Options();
        options.setAction("urn:testws");
        options.setTo(new EndpointReference(args[0]));
        options.setProperty(RampartMessageData.KEY_RAMPART_POLICY,  loadPolicy(args[2]));
        client.setOptions(options);

        client.engageModule("rampart");

        OMElement response = client.sendReceive(getPayload("Hello world"));

        System.out.println(response);

    }

    private static Policy loadPolicy(String xmlPath) throws Exception {
        StAXOMBuilder builder = new StAXOMBuilder(xmlPath);
        return PolicyEngine.getPolicy(builder.getDocumentElement());
    }

    private static OMElement getPayload(String value) {
        OMFactory factory = OMAbstractFactory.getOMFactory();
        OMNamespace ns = factory.createOMNamespace("http://tan%22,%22ns1/");
        OMElement elem = factory.createOMElement("testws", ns);
        OMElement childElem = factory.createOMElement("param0", null);
        childElem.setText(value);
        elem.addChild(childElem);

        return elem;
    }

} 
```

* * *

！！！请注意我的 prvicy.xml 我更改了

我得到了例外：回调处理程序没有为用户提供密码：mari

所以看来我的客户端代码正在阅读 policy.xml

# java - Java生成非重复随机数

> ID：16000196
> 
> 赞同：34
> 
> 时间：2013-04-14T14:32:29.803
> 
> 标签：java, random, duplicates

我想在 Java 中创建一组没有重复的随机数。

例如，我有一个数组来存储从 0 到 9999 的 10,000 个随机整数。

这是我到目前为止所拥有的：

```
import java.util.Random;
public class Sort{

    public static void main(String[] args){

        int[] nums = new int[10000];

        Random randomGenerator = new Random();

        for (int i = 0; i < nums.length; ++i){
            nums[i] = randomGenerator.nextInt(10000);
        }
    }
} 
```

但是上面的代码会创建重复项。如何确保随机数不重复？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-04-14T14:35:57.363

```
Integer[] arr = {...};
Collections.shuffle(Arrays.asList(arr)); 
```

例如：

```
public static void main(String[] args) {
    Integer[] arr = new Integer[1000];
    for (int i = 0; i < arr.length; i++) {
        arr[i] = i;
    }
    Collections.shuffle(Arrays.asList(arr));
    System.out.println(Arrays.toString(arr));

} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-04-20T14:04:33.090

[可以在Programming Pearls](https://rads.stackoverflow.com/amzn/click/com/0201657880) p一书中找到一个简单的算法，它可以为您提供不重复的随机数。127.

**注意**：生成的数组按顺序包含数字！如果您希望它们以随机顺序排列，则必须使用[Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)或使用 List 和 call对数组进行洗牌`Collections.shuffle()`。

这种算法的好处是您不需要创建一个包含所有可能数字的数组，并且运行时复杂度仍然是线性的`O(n)`。

```
public static int[] sampleRandomNumbersWithoutRepetition(int start, int end, int count) {
    Random rng = new Random();

    int[] result = new int[count];
    int cur = 0;
    int remaining = end - start;
    for (int i = start; i < end && count > 0; i++) {
        double probability = rng.nextDouble();
        if (probability < ((double) count) / (double) remaining) {
            count--;
            result[cur++] = i;
        }
        remaining--;
    }
    return result;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-04-26T05:51:55.650

在 Java 8 中，如果你想在 中拥有一个`list`不重复的`N`随机整数`range (a, b)`，其中`b`是独占的，你可以使用这样的东西：

```
Random random = new Random();
List<Integer> randomNumbers = random.ints(a, b).distinct().limit(N).boxed().collect(Collectors.toList()); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-14T17:30:30.947

Achintya Jha 的想法是正确的。您无需考虑如何删除重复项，而是首先删除创建重复项的能力。

如果您想坚持使用整数数组并希望随机化它们的顺序（手动，这很简单），请按照以下步骤操作。

1.  创建大小为 n 的数组。
2.  循环遍历索引 i 处的每个值并将其初始化为值 i（或 i+1，如果您希望数字 1 到 n 而不是 0 到 n-1）。
3.  最后，再次循环遍历数组，将每个值交换为随机索引处的值。

您的代码可以修改为如下所示：

```
import java.util.Random;

public class Sort
{
    // use a constant rather than having the "magic number" 10000 scattered about
    public static final int N = 10000;

    public static void main(String[] args)
    {
        //array to store N random integers (0 - N-1)
        int[] nums = new int[N];

        // initialize each value at index i to the value i 
        for (int i = 0; i < nums.length; ++i)
        {
            nums[i] = i;
        }

        Random randomGenerator = new Random();
        int randomIndex; // the randomly selected index each time through the loop
        int randomValue; // the value at nums[randomIndex] each time through the loop

        // randomize order of values
        for(int i = 0; i < nums.length; ++i)
        {
             // select a random index
             randomIndex = randomGenerator.nextInt(nums.length);

             // swap values
             randomValue = nums[randomIndex];
             nums[randomIndex] = nums[i];
             nums[i] = randomValue;
        }
    }
} 
```

如果我是你，我可能会将这些块中的每一个分解为单独的、更小的方法，而不是使用一个大的 main 方法。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-12-12T01:55:40.223

如果您需要生成带间隔的数字，它可以是这样的：

```
Integer[] arr = new Integer[((int) (Math.random() * (16 - 30) + 30))];
for (int i = 0; i < arr.length; i++) {
arr[i] = i;
}
Collections.shuffle(Arrays.asList(arr));
System.out.println(Arrays.toString(arr));` 
```

结果：

`[1, 10, 2, 4, 9, 8, 7, 13, 18, 17, 5, 21, 12, 16, 23, 20, 6, 0, 22, 14, 24, 15, 3, 11, 19]`

笔记：

如果你需要零不离开你可以放一个“如果”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-28T09:48:46.273

这个怎么样？

```
LinkedHashSet<Integer> test = new LinkedHashSet<Integer>();
Random random = new Random();
do{
    test.add(random.nextInt(1000) + 1);
}while(test.size() != 1000); 
```

然后，用户可以`Set`使用 for 循环遍历。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-19T03:14:41.217

开始了！

```
public static int getRandomInt(int lower, int upper) {
    if(lower > upper) return 0;
    if(lower == upper) return lower;
    int difference = upper - lower;
    int start = getRandomInt();

    //nonneg int in the range 0..difference - 1
    start = Math.abs(start) % (difference+1);

    start += lower;
    return start;
}

public static void main(String[] args){

    List<Integer> a= new ArrayList();

    int i;
    int c=0;
    for(;;) {
        c++;
        i= getRandomInt(100, 500000);
        if(!(a.contains(i))) {
            a.add(i);
            if (c == 10000) break;
            System.out.println(i);
        }

    }

    for(int rand : a) {
        System.out.println(rand);
    }

} 
```

获取随机数 返回一个随机整数 x，满足 lower <= x <= upper。如果 lower > upper，则返回 0。@param lower @param upper @return

在我创建列表的主要方法中，然后我检查列表中是否存在随机数，如果不存在，我会将随机数添加到列表中

这是非常缓慢但直截了当的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-11-10T05:06:59.590

如果您使用的是 JAVA 8 或以上版本，请按照以下方式使用流功能，

```
Stream.generate(() -> (new Random()).nextInt(10000)).distinct().limit(10000); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-12-04T13:04:59.183

```
public class RandomNum {
    public static void main(String[] args) {
        Random rn = new Random();
        HashSet<Integer> hSet = new HashSet<>();
        while(hSet.size() != 1000) {
            hSet.add(rn.nextInt(1000));
        }
        System.out.println(hSet);
    }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-03-17T21:28:13.243

一个简单的流解决方案：

```
 new Random().ints(0, 10000)
        .distinct()
        .limit(10000)
        .forEach(System.out::println); 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2014-07-11T07:07:48.427

```
public class Randoms {

static int z, a = 1111, b = 9999, r;

public static void main(String ... args[])
{
       rand();
}

    public static void rand() {

    Random ran = new Random();
    for (int i = 1; i == 1; i++) {
        z = ran.nextInt(b - a + 1) + a;
        System.out.println(z);
        randcheck();
    }
}

private static void randcheck() {

    for (int i = 3; i >= 0; i--) {
        if (z != 0) {
            r = z % 10;
            arr[i] = r;
            z = z / 10;
        }
    }
    for (int i = 0; i <= 3; i++) {
        for (int j = i + 1; j <= 3; j++) {
            if (arr[i] == arr[j]) {
                rand();
            }
        }

    }
}
} 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2018-09-20T09:39:57.023

```
HashSet<Integer>hashSet=new HashSet<>();
Random random = new Random();
//now add random number to this set
while(true)
{
    hashSet.add(random.nextInt(1000));
    if(hashSet.size()==1000)
        break;
} 
```

# c# - 使用 ado.net 和 c# 与 .csv 文件连接

> ID：16000207
> 
> 赞同：3
> 
> 时间：2013-04-14T14:35:37.537
> 
> 标签：c#, sql, csv, ado.net

我想使用 c# 语言中的 ado.net 将 .csv 文件与 Windows 窗体应用程序连接起来。这样我就可以从 .csv 文件中检索数据并使用 sql 查询将其存储在我的 Windows 窗体应用程序中。请给我完整的连接字符串。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T14:48:41.223

没有什么像“到 csv 的连接字符串”。如果您想查询 CSV，您可以使用[LINQ to CSV](http://linqtocsv.codeplex.com/) - 查看[一些示例](http://www.codeproject.com/Articles/25133/LINQ-to-CSV-library)。然后，您可以将 LINQ 结果绑定到例如 DataGridView 的`DataSource`属性。

```
 CsvFileDescription inputFileDescription = new CsvFileDescription
 {
     SeparatorChar = ',', 
     FirstLineHasColumnNames = true
 };

 CsvContext cc = new CsvContext();

 IEnumerable<Product> products =
     cc.Read<Product>("products.csv", inputFileDescription);

 // Data is now available via variable products.

 var productsByName =
     from p in products
     orderby p.Name
     select new { p.Name, p.LaunchDate, p.Price, p.Description };

 grid.DataSource = productsByName.ToList(); 
```

# php - 使用正则表达式获取纯文本列表

> ID：16000209
> 
> 赞同：0
> 
> 时间：2013-04-14T14:35:50.563
> 
> 标签：php, regex, text-processing, plaintext

我想使用正则表达式获取纯文本（.txt 文件）中的所有列表项。例如在：

```
Books must I read this week before Saturday:
1\. Geography
2\. Math
3\. Biology
The priority book is book 2\. This book is borrowed by John. 
```

我使用`preg_match_all`如下

```
$pattern = "/^[0-9]\.(.*)\n/";
preg_match_all($pattern, $filehandler, $matches); 
```

我期待以下结果：

```
1\. Geography
2\. Math
3\. Biology 
```

该字符串`2\. This book is borrowed by John.`不应在`$matches`. 但我没有从那种模式中得到任何东西。有谁知道我应该使用什么模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T14:43:53.650

你可以试试这个

```
$list = 'Books must I read this week before Saturday:
1\. Geography
  2\. Math
        3\. Biology
The priority book is book 2\. This book is borrowed by John.';

preg_match_all('/\n[\s\t]*(\d+\..*)/', $list, $bullets);

var_dump($bullets); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T15:03:09.743

最有效的方法是使用多行模式：

```
preg_match_all('/^[0-9]+\. .*$/m', $list, $matches);
$result = $matches[0]; 
```

# ruby-on-rails - site5 的推荐 gem 版本和配置？我遇到内存错误

> ID：16000212
> 
> 赞同：0
> 
> 时间：2013-04-14T14:36:14.747
> 
> 标签：ruby-on-rails, gem

据我所知，我已经正确设置了我的 gem 以在 Ruby 1.8.7 p370 上运行。我已按照网站的说明让网站在 phusion 乘客上运行。这是site5上所需的版本。我试过降级 rails 但 activerecord-mysql-adaptor 需要 rails 3.2+，所以我不愿意放弃。我不确定这是不是问题，所以我希望有人遇到过。谢谢。

我收到以下错误：

```
Cannot allocate memory -- /home/visualha/public_html/vendor/bundle/ruby/1.8/gems/activerecord-3.2.9/lib/active_record/integration.rb 
```

这是我的宝石清单：

```
abstract (1.0.0)
actionmailer (3.2.12, 3.2.11, 3.2.9, 3.2.2, 3.0.3, 2.3.8)
actionpack (3.2.13, 3.2.12, 3.2.11, 3.2.9, 3.2.2, 3.0.3, 2.3.8)
activemodel (3.2.13, 3.2.12, 3.2.11, 3.2.9, 3.2.2, 3.0.3)
activerecord (3.2.12, 3.2.11, 3.2.9, 3.2.2, 3.0.3, 2.3.8)
activerecord-mysql-adapter (0.0.1)
activeresource (3.2.12, 3.2.11, 3.2.9, 3.2.2, 3.0.3, 2.3.8)
activesupport (3.2.13, 3.2.12, 3.2.11, 3.2.9, 3.2.2, 3.0.3, 2.3.8)
acts-as-taggable-on (2.3.3)
adauth (1.2.1)
arel (3.0.2, 2.0.6)
bcrypt-ruby (3.0.0)
bootstrap-sass (2.3.1.0, 2.3.0.1)
builder (3.0.4, 3.0.0, 2.1.2)
bundler (1.2.1, 1.1.0, 1.0.7)
capistrano (2.11.2, 2.5.19)
capybara (2.0.2)
carrierwave (0.8.0)
cgi_multipart_eof_fix (2.5.0)
childprocess (0.3.8)
chronic (0.6.7, 0.6.6)
coffee-rails (3.2.2)
coffee-script (2.2.0)
coffee-script-source (1.6.2, 1.4.0)
commonjs (0.2.6)
cucumber (1.2.1)
cucumber-rails (1.3.0)
daemon_controller (1.0.0, 0.2.6)
daemons (1.1.8, 1.1.0)
diff-lcs (1.2.3, 1.1.3)
erubis (2.7.0, 2.6.6)
execjs (1.4.0)
faraday (0.8.4)
faraday_middleware (0.8.8)
fastthread (1.0.7)
fcgi (0.8.8)
ferret (0.11.8.4, 0.11.6)
ffi (1.4.0)
flvtool2 (1.0.6)
formtastic (2.2.1)
formtastic-bootstrap (2.0.0)
gem_plugin (0.2.3)
gherkin (2.11.6)
highline (1.6.11, 1.6.1)
hike (1.2.2, 1.2.1)
hoe (3.5.3, 3.5.0)
hoe-bundler (1.2.0)
hoe-debugging (1.1.1)
hoe-gemspec (1.0.0)
hoe-git (1.5.0)
i18n (0.6.4, 0.6.0, 0.5.0)
id3lib-ruby (0.6.0)
journey (1.0.4, 1.0.3)
jquery-rails (2.2.1)
json (1.7.7, 1.7.5, 1.6.6, 1.6.5)
kaminari (0.14.1)
less (2.3.1, 2.2.2)
less-rails (2.3.2, 2.2.6)
libv8 (3.11.8.17 x86_64-linux, 3.11.8.13 x86_64-linux)
lumberg (1.0.1, 1.0.0)
mail (2.4.4, 2.4.3, 2.2.14)
mime-types (1.22, 1.21, 1.17.2, 1.16)
mini_portile (0.5.0)
minitest (4.7.1, 4.6.1)
mongrel (1.1.5)
multi_json (1.7.2, 1.6.1, 1.1.0)
multipart-post (1.1.5)
mysql (2.9.1, 2.8.1)
mysql2 (0.3.11)
net-ldap (0.3.1)
net-scp (1.0.4)
net-sftp (2.0.5)
net-ssh (2.3.0, 2.0.23)
net-ssh-gateway (1.1.0, 1.0.1)
nokogiri (1.5.9, 1.5.6, 1.5.2)
passenger (3.0.11, 3.0.9, 2.2.15)
polyglot (0.3.3, 0.3.1)
puma (1.4.0)
racc (1.4.9)
rack (1.4.5, 1.4.1, 1.2.1, 1.1.0)
rack-cache (1.2)
rack-mount (0.8.3, 0.6.13)
rack-ssl (1.3.3, 1.3.2)
rack-test (0.6.2, 0.6.1, 0.5.7)
rails (3.2.11, 3.2.9, 3.2.2, 3.0.3, 2.3.8)
railties (3.2.12, 3.2.11, 3.2.9, 3.2.2, 3.0.3)
rake (10.0.4, 10.0.3, 0.9.2.2, 0.8.7)
rake-compiler (0.8.3)
rdoc (3.12.2, 3.12.1, 3.12)
ref (1.0.4, 1.0.2)
rexical (1.0.5)
rmagick (2.13.2)
rspec-core (2.13.1, 2.12.2)
rspec-expectations (2.13.0, 2.12.1)
rspec-mocks (2.13.1, 2.12.2)
rspec-rails (2.13.0, 2.12.2)
rubygems-update (2.0.3, 1.8.18, 1.6.2, 1.4.1)
rubyzip (0.9.9)
sass (3.2.7, 3.2.6)
sass-rails (3.2.6)
selenium-webdriver (2.30.0)
sprockets (2.2.2, 2.1.2)
sqlite3-ruby (1.3.2, 1.2.5)
therubyracer (0.11.4, 0.8.2)
thor (0.18.1, 0.17.0, 0.14.6)
tilt (1.3.7, 1.3.3)
tissue (1.0.3, 1.0.2, 1.0.1, 1.0.0)
treetop (1.4.12, 1.4.10, 1.4.9)
trollop (2.0, 1.16.2)
twitter-bootstrap-rails (2.2.6, 2.2.5)
tzinfo (0.3.37, 0.3.35, 0.3.32, 0.3.23)
uglifier (2.0.1, 1.3.0)
validates_existence (0.8.0)
webrat (0.7.3)
websocket (1.0.7)
xpath (2.0.0, 1.0.0)
yaml_db (0.2.3) 
```

# video - Windows 7 上的 FFmpeg，在 mp4 中为 HTML 5 视频编码视频失败

> ID：16000215
> 
> 赞同：1
> 
> 时间：2013-04-14T14:36:33.207
> 
> 标签：video, windows-7, encoding, ffmpeg, html5-video

我尝试使用 FFmpeg 对我的视频进行编码，以转换为 mp4。但是该视频不适用于 html 5。我不明白为什么。

我在网上找到了这个命令，我试了一下：

```
ffmpeg.exe -i 野生动物.wmv -b 1500k -vpre 慢 -vpre 基线 -vcode libx264 \
  -g 30 野生动物.mp4

```

但它失败了，我有这个错误：

```
File for preset 'slow' not found 
```

我检查了文件夹“预设”并且预设在文件夹上，所以我不明白为什么它告诉我这个错误。我尝试了完整的路径，它也失败了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T14:47:06.367

```
ffmpeg -i 野生动物.wmv -b:v 1500k -preset slow -profile:v 基线 \
  -vcodec libx264 -g 30 野生动物.mp4

```

*   你`-vcode`应该是`-vcodec`
*   `-vpre slow`应该`-preset slow`
*   `-vpre baseline`应该`-profile:v baseline`
*   `-b 1500k`应该`-b:v 1500k`

为了回答这些评论，在 [Firefox 21](http://wikipedia.org/wiki/HTML5_video)之前 ，跨浏览器兼容性的最佳格式是 WebM。YouTube 也使用这种格式。

# python - Z3：Z3 能告诉我算术运算是否返回具体值吗？

> ID：16000228
> 
> 赞同：2
> 
> 时间：2013-04-14T14:38:14.287
> 
> 标签：python, z3

我有一个简单的代码，如下所示：

```
a, b, c = BitVecs('a b c', 32)
a == b + c
c == b + 5 
```

我们可以很容易地看到 (c - b) 返回一个具体的值（数字 5），但 (a - b) 返回一个抽象的值（因为 a - b == c，它具有未知值）。

问题是：给定上述情况的算术运算，Z3 能否告诉我们结果是具体的，还是不具体的？如果这是可能的，该怎么做？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T03:21:52.223

Z3 是定理证明器，但我们也可以将其视为约束求解器。我们可以查看诸如`a == b + c`约束之类的表达式。Z3 Python 接口有一个名为`solve`. 它试图解决一组约束。那就是它，它试图找到一个使所有约束都为真的“分配”。例如，如果我们执行以下命令（也可[在此处](http://rise4fun.com/Z3Py/3p8o)获得）。

```
a, b, c = BitVecs('a b c', 32)
solve(a == b + c, c == b + 5) 
```

它产生了解决方案：

```
[b = 0, a = 5, c = 5] 
```

我们说解决方案“满足”约束。Z3 还有其他几个命令和 API。有关 Z3 的更多信息，请参阅[在线教程](http://rise4fun.com/Z3Py/tutorial/guide)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-08-13T13:27:15.277

即使我发现这个问题很老。我想发布我的解决方案，看看 z3 中是否有具体的值。

以下方法通过测试位向量是否始终等于或不等于具体值（零）来测试位向量是否具有具体值。`is_true`Simplify 在调用or之前是“必需的” `is_false`。

```
bool is_concrete_byte(z3::expr byte) {

    z3::expr zero = context.bv_const(0, 8);

    return (zero == byte).simplify().is_true() ||
            (zero == byte).simplify().is_false();

} 
```

# endpoints-proto-datastore - _message_fields_schema 自动填充

> ID：16000230
> 
> 赞同：1
> 
> 时间：2013-04-14T14:38:26.543
> 
> 标签：endpoints-proto-datastore

在这个使用`_message_fields_schema()`示例模型的优秀库给出的示例中，只定义了一些属性引用。用所有属性和 ID 填充元组的最佳方法是什么？

描述这一点的最佳方式是，如果我在 SQL 中执行此操作：

```
select t.id, t.* from table t 
```

有点做作，但希望你能明白。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T17:04:27.513

图书馆不支持这样做，但我（作者）愿意接受建议。

目前，您必须明确命名所有字段。例如，从[简单的 get 示例](http://endpoints-proto-datastore.appspot.com/examples/simple_get.html)：

```
from endpoints_proto_datastore.ndb import EndpointsModel

class MyModel(EndpointsModel):

  _message_fields_schema = ('id', 'attr1', 'attr2', 'created')

  attr1 = ndb.StringProperty()
  attr2 = ndb.StringProperty()
  created = ndb.DateTimeProperty(auto_now_add=True) 
```

随时[提交功能请求](http://code.google.com/p/endpoints-proto-datastore/issues/list)。

# html - MediaElementJS 和 Phonegap

> ID：16000231
> 
> 赞同：1
> 
> 时间：2013-04-14T14:38:40.933
> 
> 标签：html, cordova, video, mediaelement.js

Hej 我正在尝试在带有 phonegap 的混合应用程序中运行 MediaElementJs。它可以作为没有 phonegap 但不能组合使用的 webapp 正常工作。视频标签不播放任何视频。

我正在使用 Phonegap 2.1.0 和 Android 2.1（也用于测试的 android 2.2.3）

谁能告诉我为什么它不适合在一起以及我如何解决这个问题？

提前致谢

托比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T15:35:54.400

我们在原生 iOS PhoneGap 2.3.0 应用程序中使用 MediaElementJS 没有问题。我们也在 Android 上测试了 MediaElementJS。我建议仔细检查您的配置。

# linux - 为什么鼠标的 p->dx 和 p->dy 总是为零？

> ID：16000234
> 
> 赞同：0
> 
> 时间：2013-04-14T14:38:55.800
> 
> 标签：linux, kernel

我在 mousedev_packet()（在 mousedev.c 中）的 Linux 内核源代码中添加了一些跟踪。当我从内核 printk 移动鼠标时，我想查看坐标的变化。但这似乎有点奇怪。

```
static void mousedev_packet(struct mousedev_client *client,
                signed char *ps2_data)
{
    struct mousedev_motion *p = &client->packets[client->tail];
    int val;
    printk(KERN_WARNING "..................tomxue: case 19.................");

    ps2_data[0] = 0x08 |
        ((p->dx < 0) << 4) | ((p->dy < 0) << 5) | (p->buttons & 0x07);
    ps2_data[1] = mousedev_limit_delta(p->dx, 127);
    ps2_data[2] = mousedev_limit_delta(p->dy, 127);
    p->dx -= ps2_data[1];
    p->dy -= ps2_data[2];
    val = p->dx;
    printk(KERN_WARNING "mousedev_packet: ps2_data[1]=%d ps2_data[2] =%d.................", ps2_data[1], ps2_data[2]);
    printk(KERN_WARNING "mousedev_packet: p->dx=%d p->dy=%d p=%p val=%d.................", p->dx, p->dy, p, val); 
```

dmesg 如下：

```
[  105.631164] mousedev_packet: p->dx=0 p->dy=0 p=dd9b6a10 val=0.................
[  105.631195] mousedev_read data=�s�$......................
[  105.639160] mousedev_packet: ps2_data[1]=-25 ps2_data[2] =3.................
[  105.639160] mousedev_packet: p->dx=0 p->dy=0 p=dd9b6a10 val=0.................
[  105.639190] mousedev_read data=�s�$......................
[  105.647155] mousedev_packet: ps2_data[1]=-26 ps2_data[2] =3.................
[  105.647155] mousedev_packet: p->dx=0 p->dy=0 p=dd9b6a10 val=0.................
[  105.647186] mousedev_read data=�s�$......................
[  105.655151] mousedev_packet: ps2_data[1]=-24 ps2_data[2] =5.................
[  105.655181] mousedev_packet: p->dx=0 p->dy=0 p=dd9b6a10 val=0.................
[  105.655212] mousedev_read data=�s�$......................
[  105.663543] mousedev_packet: ps2_data[1]=-19 ps2_data[2] =6.................
[  105.663543] mousedev_packet: p->dx=0 p->dy=0 p=dd9b6a10 val=0.................
[  105.663574] mousedev_read data=�s�$......................
[  105.671142] mousedev_packet: ps2_data[1]=-17 ps2_data[2] =6.................
[  105.671173] mousedev_packet: p->dx=0 p->dy=0 p=dd9b6a10 val=0.................
[  105.671173] mousedev_read data=�s�$......................
[  105.679168] mousedev_packet: ps2_data[1]=-13 ps2_data[2] =5.................
[  105.679168] mousedev_packet: p->dx=0 p->dy=0 p=dd9b6a10 val=0.................
[  105.679199] mousedev_read data=�s�$......................
[  105.687133] mousedev_packet: ps2_data[1]=-8 ps2_data[2] =3.................
[  105.687164] mousedev_packet: p->dx=0 p->dy=0 p=dd9b6a10 val=0.................
[  105.687194] mousedev_read data=�s�$......................
[  105.695190] mousedev_packet: ps2_data[1]=-4 ps2_data[2] =1.................
[  105.695190] mousedev_packet: p->dx=0 p->dy=0 p=dd9b6a10 val=0.................
[  105.695220] mousedev_read data=�s�$......................
[  105.703155] mousedev_packet: ps2_data[1]=-5 ps2_data[2] =0.................
[  105.703186] mousedev_packet: p->dx=0 p->dy=0 p=dd9b6a10 val=0.................
[  105.703186] mousedev_read data=�......................
[  106.047302] mousedev_packet: ps2_data[1]=0 ps2_data[2] =1.................
[  106.047302] mouMinicom2.5Minicom2.5Minicom2.5sedev_packet: p->dx=0 p->dy=0 p=dd9b6a10 val=0.................
[  106.047332] mousedev_read data...................... 
```

正如你所看到的，`p->dx`并且`p->dy`总是为零，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:30:11.200

我感觉合理。

查看此输出：

```
[  105.639160] mousedev_packet: ps2_data[1]=-25 ps2_data[2] =3.................
[  105.639160] mousedev_packet: p->dx=0 p->dy=0 p=dd9b6a10 val=0................. 
```

似乎在这一行

```
ps2_data[1] = mousedev_limit_delta(p->dx, 127); 
```

`p->dx`是`-25`，并且您也将`ps2_data[1]`成为`-25`。

然后在这一行：

```
p->dx -= ps2_data[1]; 
```

你设置`p->dx`为`p->dx - ps2_data[1]`. 或者，`-25 - -25`是`0`。

# java - 我如何将数据（文本）发送到其他应用程序（如消息）

> ID：16000240
> 
> 赞同：1
> 
> 时间：2013-04-14T14:39:27.473
> 
> 标签：java, android, eclipse, android-intent, sdk

我如何制作一个程序，在输入字符串并按下一个键后，该字符串存储在手机中（SharedPreferences），然后如果我打开程序发送短信（消息），3秒后在消息编辑文本中写入之前存储的字符串。

到目前为止，我已经这样做了：

```
@Override 
public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.activity_main);  

  EditText stringinput = (EditText) findViewById(R.id.string);
  Button bu = (Button) findViewById(R.id.button1);
  stringinput.setImeOptions(EditorInfo.IME_ACTION_DONE); 
  bu.setOnClickListener(this);
}

@Override  
public void onClick(View v) {  
  EditText stringinput = (EditText) findViewById(R.id.string);
  String name = stringinput.getText().toString();   
  if(v.getId()==(R.id.string)){  
  SavePreferences("STRING",name);  
  }
}  

private void SavePreferences(String key, String value){  
  SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);  
  SharedPreferences.Editor editor = sharedPreferences.edit();  
  editor.putString(key, value);  
  editor.commit();  
 }  

private void LoadPreference(){         
      SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);           
      String strSavedMem1 = sharedPreferences.getString("STRING", ""); 
     /******************** stringoutput.append(strSavedMem1);*******************/
      }
} 
```

好的 现在我不知道如何前进---> 我认为最难的工作是在这个函数 LoadPreferences(); , 也许我应该建立一个隐式意图

```
Intent SEND = new Intent(Intent.ACTION_SEND); 
```

我不知道，请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:02:42.710

如果您尝试向在 android 中运行的其他应用程序发送消息，或者为它们留下消息，我会在此处的 android 服务教程中查看在单独进程中运行的服务：[http ://www.vogella.com/articles/AndroidServices /article.html](http://www.vogella.com/articles/AndroidServices/article.html) 您可以让服务跟踪您传递给它的字符串，并让其他应用程序绑定到服务以获取它们。

否则，如果您只想将字符串保存到文件中，属性文件就可以了。如果其他应用程序需要能够读取该文件，请将其保存到外部存储中。这里有一个很好的教程，说明它如何在主要的 android 网站上工作：http: [//developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

编辑：如果您对使用共享首选项在应用程序之间共享字符串一无所知，另一个堆栈溢出用户在此处发布了一个教程：[如何在两个不同的 android 应用程序之间共享 SharedPreferences 文件？](https://stackoverflow.com/questions/11025234/how-can-i-share-a-sharedpreferences-file-across-two-different-android-apps)

# objective-c - 核心数据 NSPredicate“已删除 == NO”无法按预期工作

> ID：16000242
> 
> 赞同：2
> 
> 时间：2013-04-14T14:39:31.050
> 
> 标签：objective-c, core-data, nspredicate, uimanageddocument

我正在使用带有父子上下文的 UIManagedDocument。

在我的孩子上下文中，我执行以下操作

## 代码 1

```
NSSet *results = [self.event.memberships filteredSetUsingPredicate:[NSPredicate predicateWithBlock:^BOOL(id evaluatedObject, NSDictionary *bindings) {

    return ([[evaluatedObject deleted] boolValue] == NO);

}]]; 
```

上面的代码返回预期的结果（仅限未删除的事件成员）。

## 代码 2

但是这段代码没有。它获取所有记录。

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"deleted == NO"];
NSSet *results = [self.event.memberships filteredSetUsingPredicate:predicate]; 
```

这似乎令人困惑。两者都应该返回相同的结果，但在 as返回所有记录`predicateWithBlock`的情况下返回正确的结果。`predicateWithFormat`

使用`predicateWithBlock`代替的优点和缺点是`predicateWithFormat`什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-14T20:19:14.900

问题是您已经`deleted`为您的实体定义了一个属性。这与 的`isDeleted`方法冲突`NSManagedObject`，因此您应该重命名该属性。

以下“实验”表明，如果您将属性称为“已删除”（`c`是具有自定义`deleted`属性的托管对象），则会发生奇怪的事情：

```
// Set custom "deleted" property to YES:
c.deleted = @YES;

// Use the property, as your Code 1
NSLog(@"%@", [c deleted]);
// Output: 1

// Use Key-Value Coding, as your Code 2
NSLog(@"%@", [c valueForKey:@"deleted"]);
// Output: 0

// Now really delete the object and try again:
[context deleteObject:c];
NSLog(@"%@", [c valueForKey:@"deleted"]);
// Output: 1 
```

您的“代码 1”是指该属性，因此它返回预期结果。“代码 2”使用键值编码，如果对象实际上已从上下文中删除，则`[c valueForKey:@"deleted"]`返回！`YES`

因此，重命名该属性应该可以解决您的问题。不幸的是，如果属性名称与内置方法冲突，编译器不会发出警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T17:20:35.763

使用格式化占位符替换布尔值：

`NSPredicate *predicate = [NSPredicate predicateWithFormat:@"%K == %@", @"deleted", @(NO)];`

您对密钥路径的使用可能没问题，但右侧可能看起来不像解析器的“否”。

# scala - 柯里化方法中最后一个协变参数的问题

> ID：16000251
> 
> 赞同：2
> 
> 时间：2013-04-14T14:40:54.603
> 
> 标签：scala, currying, variance

这对我来说开始是一个很常见的情况：

```
 trait CoVariant[+T] {
    def bar: T
  }

  def curried[T](x: String)(y: CoVariant[T]) = y // Not really, but for simplicity
  val applied = curried("foo") _

  val bar = new CoVariant[String] {
    def bar = "bar"
  }
  applied(bar) 
```

所以我有一些共同变体的东西，我需要先做一些常见的事情，然后让一个通用的部分未应用。我真的很希望能够像上面的柯里化函数一样编写它，但这当然会在最后一行产生编译错误：

```
- type mismatch;  found   : CoVariant[String]  required: CoVariant[Nothing] 
```

我似乎诉诸于引入一个类只是为了在某个地方粘贴类型参数，以便可以将其保留为抽象：

```
trait StupidWrapper {
   def apply[T](y: CoVariant[T]) : CoVariant[T]
} 
```

而不是咖喱的东西

```
def notAsNice(x: String) = new StupidWrapper {
   def apply[T](y: CoVariant[T]) = y
} 
```

所以现在：

```
val applied = notAsNice("foo")
applied(bar) 
```

编译。

这感觉很愚蠢，我想有更好的方法吗？

**更新：**

我想我会更好地具体化。我所拥有的是：

```
 abstract class ParserToSeq {
    def apply[T](parser: Parser[T]): Seq[T]
  }

  def fromTrainingData(trainingLines: Seq[String]) = new ParserToSeq {
    def apply[T](p: Parser[T]) = trainingLines.map(parseAll(p, _)).map {
      _ match {
        case Success(wt, _) => Some(wt)
        case _ => None
      }
    }.flatten
  } 
```

进而

```
val thisData = fromTrainingData(trainingLines)
lazy val wordTags = thisData(wordtagParser) // Parser[WordTag]
lazy val uniGrams = thisData(uniGramParser) // Parser[UniGram]
… 
```

我只想取消 ParserToSeq 并执行以下操作：

```
def fromTrainingData[T](trainingLines: Seq[String])(p: Parser[T]) = 
  trainingLines.map(parseAll(p, _)).map {
  _ match {
    case Success(wt, _) => Some(wt)
    case _ => None
  }
}.flatten 
```

请注意，此处的 T 特定于每个解析器。据我了解，问题是 T 被解析为部分应用方法上的具体类型，即使该类型实际上适用于第二个参数列表。

看来我想把类型参数的声明放在中间的某个地方：

```
def fromTrainingData(trainingLines: Seq[String])[T](p: Parser[T]) 
```

这当然不是有效的Scala。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T15:43:17.383

正如您所提到的，scala`Function`对象[不携带类型参数](https://stackoverflow.com/a/15264993/500314)。

但是，您可以替换为[采用更高种类](https://stackoverflow.com/a/15268017/500314)`ParseToSeq`的[更通用`~>`](https://stackoverflow.com/a/15268017/500314)的类型，

```
trait ~>[A[_],B[_]] {
  def apply[X](a : A[X]) : B[X]
} 
```

然后你的例子变成了，

```
trait Parser[T]
trait WordTag
trait UniGram
val trainingLines: Seq[String] = ???
val wordtagParser: Parser[WordTag] = ???
val uniGramParser: Parser[UniGram] = ???

def fromTrainingData[T](trainingLines: Seq[String]) = new ~>[Parser,Seq] {
  def apply[T](p: Parser[T]): Seq[T] = ???
}
val thisData = fromTrainingData(trainingLines)
lazy val wordTags = thisData(wordtagParser) // Seq[WordTag]
lazy val uniGrams = thisData(uniGramParser) // Seq[UniGram] 
```

# visual-studio-2012 - 如何在 Visual Studio 2012 中更快地添加我的属性表？

> ID：16000254
> 
> 赞同：0
> 
> 时间：2013-04-14T14:41:30.010
> 
> 标签：visual-studio-2012

我正在使用属性表来设置项目属性。当我将一个项目添加到我的解决方案中时，我添加了 3 个属性表（一个在调试和发布之间共享，一个用于调试，一个用于发布）。我必须在属性管理器中右键单击调试和发布，每次都导航到包含 .props 文件的文件夹。由于我经常向解决方案添加新项目，这很烦人。

项目

调试：

*   属性表 a
*   属性表 b

发布：

*   属性表 a
*   属性表 c

有没有办法更快更方便地做到这一点？我可以添加解决方案属性吗？

# javascript - 将 JSON 数据保存到数据库

> ID：16000258
> 
> 赞同：1
> 
> 时间：2013-04-14T14:42:02.237
> 
> 标签：javascript, knockout.js, laravel, json

拿起 knockout.js，我正在尝试使用 PHP（更具体地说是 Laravel 框架）将数据保存到 mysql 数据库中。这是阿贾克斯：

```
$.ajax("save", {
  data: ko.toJSON(this), // turns the input into JSON I assume?
  type: "post",
  success: function() {
    alert("Success!");  // right now I'm alerting the data to troubleshoot
  }
}); 
```

以及我将数据保存到数据库中的方法：

```
// I expect my ajax to send me data that is in json format
// I then decode the data to get an array which I can use to run my query
$data = json_decode(Input::json(), true);
return DB::table('content')->insert($data); 
```

但是，问题是我似乎正在接收对象类型的数据（运行`gettype()`并`$data`返回`json_decode()`错误），`stdClass Object`准确地说。在对我的 javascript 中发生的事情进行故障排除后，我警告了数据并且它是 JSON 格式，所以它必须工作。

我确实让它像这样工作：

```
$data = json_encode(Input::json(), true);
return DB::table('content')->insert(json_decode($data), true); 
```

这成功了，保存到数据库等，但是我很困惑。请原谅我对 JSON 的缺乏经验，但过程不应该是：

*   在前端将数据编码为 JSON
*   向服务器发送数据
*   在后端解码数据，将其转换为服务器可以处理的格式（本例中为数组）
*   插入数据

因此，在我的第一次尝试中不起作用`$data = Input::json()`的是对象类型。Json_decode 引发错误，因为它需要一个字符串，现在我有点迷路了，因为我需要 JSON。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T15:25:38.867

当你使用`Input::json()`Laravel 时，它会自动将 JSON 解码为一个对象供你使用。在大多数情况下，您希望对提交的 JSON 进行一些处理，并且通常不会将其存储为 JSON，而是存储在数据库行的单独列中。

如果您使用的是 Laravel 3，则可以改用以下行来获取原始（未解码）JSON：

```
$raw = Request::foundation()->getContent(); 
```

在 Laravel 4 中，我相信它是：

```
$raw = Input::getContent(); 
```

或者，如果您希望将 JSON 解码为数组，您可以在 Laravel 3 中使用以下内容...

```
$array = Input::json(true); 
```

*Laravel 4 中没有等效的 as-array 。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T15:25:16.533

所以，我找到了解决方案。显然`Input::json()`返回对象类型的数据，PHP的通用对象，正常为空。所有数据都存储在该对象中，剩下要做的就是将该对象转换为数组。`get_object_vars()`确实，结果将是一个格式良好的数组，这就是有效的：

```
$data = get_object_vars(Input::json()); // will return an array, exactly what I need
return DB::table('tableName')->insert($data); // Data can be inserted now properly 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-14T14:53:36.260

如果您尝试将淘汰视图模型作为 json 传输，您将无法直接将您的视图模型转换为 json。原因是视图模型中的所有字段实际上都不是这样的字段：

```
var viewmodel = {
    name: 'Bob',
    age: 23
}; 
```

相反，这些字段是淘汰的 observables：

```
var viewmodel = {
    name: ko.observable('Bob'),
    age: ko.observable(23)
}; 
```

您实际上需要调用每个 observable 来获取它的当前值。显然，这可能很乏味，但有一个映射插件可以为您完成此[任务——Knockout 映射插件](http://knockoutjs.com/documentation/plugins-mapping.html)。

使用映射插件，您可以简单地执行以下操作：

```
ko.mapping.toJSON(viewmodel) 
```

它会返回一个 json 字符串，将 viewmodel 表示为一个常规的 js 对象。

# c++ - 如何实现通用最小值？

> ID：16000262
> 
> 赞同：4
> 
> 时间：2013-04-14T14:42:12.417
> 
> 标签：c++, templates

当我写

```
T min(T& a,T& b)
{return a<b?a:b;} 
```

并调用`min(3,4)`，它会产生错误。

如何实现通用最小值？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-14T14:43:08.430

这是因为非`const`左值引用 ( `T&`) 不能绑定到右值（`3`并且`4`是右值，这直观地意味着它们没有对象标识）。

尝试使用左值引用来`const`代替，它*可以*绑定到右值（毕竟，`min()`函数不应该改变其参数的状态）。

`template<typename T>`此外，如果您正在编写函数*模板*，请不要忘记该部分：

```
template<typename T> // <== Don't forget this, if you are writing a template
T min(T const& a, T const& b)
//      ^^^^^       ^^^^^
{
    return (a < b) ? a : b;
} 
```

例如，考虑这个小程序：

```
#include <iostream>

template<typename T> // <== Don't forget this, if you are writing a template
T min(T const& a, T const& b)
//      ^^^^^       ^^^^^
{
    return (a < b) ? a : b;
}

int main()
{
    int x = 42;
    int y = 1729;

    std::cout << min(x, y) << std::endl; // Passing lvalues, that would be OK also
                                         // with your original code.

    std::cout << min(42, 1729) << std::endl; // Passing rvalues, this would not be OK
                                             // with your original code (non-const
                                             // lvalue references cannot bind to rvalues)
} 
```

这是一个[活生生的例子](http://liveworkspace.org/code/3kW04t%24342)。

* * *

**更新：**

上述方案只允许将*相同类型的*值传递给`min()`，否则编译器将无法进行类型推导（如果第一个和第二个参数的类型不同，应该`T`是什么？）：

```
min(3.14, 42); // Huh? What is `T` here, `double` or `int`? 
```

要强制编译器对 使用特定类型`T`，您可以显式指定模板参数：

```
min<double>(3.14, 42); 
```

然而，这不是一个非常优雅的选择（用户每次都必须手动输入正确的模板参数）。相反，您可以让您的函数模板接受*两个*模板类型参数，而不是一个：

```
#include <type_traits>

template<typename T, typename U>
typename std::common_type<T, U>::type min(T const& a, U const& b)
{
    return (a < b) ? a : b;
} 
```

并使用[`std::common_type<>`](http://en.cppreference.com/w/cpp/types/common_type)类型特征（自 C++11 起可用）来确定用作返回类型的正确类型。

再一次，这里是一个[活生生的例子](http://liveworkspace.org/code/3kW04t%24345)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T14:42:58.193

你必须使用模板头

```
template<typename T>
T const& min(T const & a, T const & b)
{
   return a<b?a:b;
} 
```

你可以用类似的方式为 max 做到这一点：

```
template<typename T>
T const& max (T const &a,  T const& b)
{
  return a<b? b:a;
} 
```

您必须确保类型 T 支持 < 运算符

# php - XmlPullParserException 在 android 中使用带有 Ksoap2 的 php Web 服务

> ID：16000269
> 
> 赞同：0
> 
> 时间：2013-04-14T14:43:13.283
> 
> 标签：php, android, web-services

我正在开发一个使用基于 php 的 web 服务的 android 应用程序。我知道有很多关于这个的问题，但经过三天的阅读，我可以说答案对我没有帮助。

一方面，我得到了如下所示的 php 服务：

服务器端树文件夹：

```
 http://IP/WSexample/wsdl/
           - hello_server.php
           - hello.wsdl 
```

PHP部分（hello_server.php）：

```
if (!extension_loaded("soap")) {
    dl("php_soap.dll");
}

ini_set("soap.wsdl_cache_enabled", "0");
$server = new SoapServer("hello.wsdl");

function sayHello($yourName = '') {
    if (empty($yourName)) $yourName = "Mundo";

    return "Hello, ".$yourName;
}

$server->addFunction("sayHello");
$server->handle(); 
```

XML 部分（hello.wsdl）：

```
<?xml version="1.0" encoding="UTF-8"?>
<definitions name="HelloService"
   targetNamespace="http://XX.XX.XX.XX/WSexample/wsdl/hello.wsdl"
   xmlns="http://schemas.xmlsoap.org/wsdl/"
   xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
   xmlns:tns="http://XX.XX.XX.XX/WSexample/wsdl/hello.wsdl"
   xmlns:xsd="http://www.w3.org/2001/XMLSchema">

   <message name="SayHelloRequest">
      <part name="firstName" type="xsd:string"/>
   </message>
   <message name="SayHelloResponse">
      <part name="greeting" type="xsd:string"/>
   </message>

   <portType name="Hello_PortType">
      <operation name="sayHello">
         <input message="tns:SayHelloRequest"/>
         <output message="tns:SayHelloResponse"/>
      </operation>
   </portType>

   <binding name="Hello_Binding" type="tns:Hello_PortType">
      <soap:binding style="rpc" 
         transport="http://schemas.xmlsoap.org/soap/http"/>
      <operation name="sayHello">
         <soap:operation soapAction="sayHello"/>
         <input>
            <soap:body
               encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
               namespace="urn:examples:helloservice"
               use="encoded"/>
         </input>
         <output>
            <soap:body
               encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
               namespace="urn:examples:helloservice"
               use="encoded"/>
         </output>
      </operation>
   </binding>

   <service name="Hello_Service">
      <documentation>WSDL File for HelloService</documentation>
      <port binding="tns:Hello_Binding" name="Hello_Port">
         <soap:address 
            location="http://XX.XX.XX.XX/WSexample/wsdl/hello_server.php"/>
      </port>
   </service>
</definitions> 
```

如果我尝试使用自己的 php 客户端，服务器可以正常工作并返回 Hello 和我给它的名称，即使我尝试使用[http://validwsdl.com](http://validwsdl.com)，它也会获得正确的数据......Android 是我的问题。 ..

我只有一个简单的 Activity 来获取数据，但是当我使用 HttpTransportSE 对象的方法调用时，它总是给我一个 XmlPullParserException。异常说：

```
org.xmlpull.v1.XmlPullParserException: expected: START_TAG {http://schemas.xmlsoap.org/soap/envelope/}Envelope (position:START_TAG <definitions name='HelloService' targetNamespace='http://XX.XX.XX.XX/WSexample/wsdl/hello.wsdl'>@7:49 in java.io.InputStreamReader@405701b0) 
```

安卓代码：

```
public class MainActivity extends Activity {
    public static final String NAMESPACE="urn:examples:helloservice";
    public static final String METHOD_NAME ="sayHello";
    public static final String URL = "http://XX.XX.XX.XX/WSexample/wsdl/hello.wsdl";    
    public static final String SOAP_ACTION = "sayHello";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        TextView tv = (TextView) findViewById(R.id.tv);

        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
        request.addProperty("firstName", "John"); 

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.setOutputSoapObject(request);

        HttpTransportSE ht = new HttpTransportSE(URL);

        try {
            ht.call(SOAP_ACTION, envelope);

            SoapPrimitive response = (SoapPrimitive) envelope.getResponse();
            tv.setText("Mensaje: "+response.toString());

        } catch (XmlPullParserException i){
            Log.e("MI_ERROR", i.getMessage());
        }catch(Exception e) {
            Log.e("MI_ERROR", e.getMessage());
            e.printStackTrace();
        }

    }
} 
```

我想我与属性有关：URL、NAMESPACE、METHOD_NAME 和 SOAP_ACTION，我尝试将它们更改为其他选项但没有成功。

当我将 URL 属性更改为：

```
public static final String URL = "http://XX.XX.XX.XX/WSexample/wsdl/hello_server.php"; 
```

异常更改为：

```
org.xmlpull.v1.XmlPullParserException: unexpected type (position:END_DOCUMENT null@1:0 in java.io.InputStreamReader@40570008) 
```

请帮忙！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T20:05:13.583

最后，错误出在字符串 URL 中。我必须放第二个：

```
public static final String URL = "http://XX.XX.XX.XX/WSexample/wsdl/hello_server.php"; 
```

XMLPullParserException 是服务器编码错误。

了解 WSDL 是否正常工作的一个非常有用的工具是这个网站：

[http://www.validwsdl.com/](http://www.validwsdl.com/)

# php - 如果答案正确，代码重定向到另一个页面

> ID：16000277
> 
> 赞同：-1
> 
> 时间：2013-04-14T14:43:59.713
> 
> 标签：php

我正在做一个在线测试。有10个级别。该问题是从数据库中挑选出来的，如果答案是正确的，那么它会更新该特定用户的清除级别并在同一页面上显示下一个问题。

但是，如果答案正确，其 url 在数据库中，我想将页面定向到另一个页面，并如上所述更新用户的级别号。我知道如何在同一页面中显示问题，但如果正确不知道如何重定向。

这是简单测试的代码，其中问题显示在同一页面上。

```
<?php
 session_start();
 if(!isset($_SESSION['myusername'])){
 header("location:index.php?unreg=1");
  }
 else {
 $myuser = $_SESSION["myusername"];
  $mypass = $_SESSION["mypassword"];

 $host="localhost"; // Host name 
  $username=""; // Mysql username 
   $password=""; // Mysql password 
  $db_name=""; // Database name 
  $tbl_name="members"; // Table name 
    $tbl_name2="quiz"; // Table name 2

     // Connect to server and select databse.
     mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
   mysql_select_db("$db_name")or die("cannot select DB");

     if(isset($_POST['qno']))
    {
       $sql3="SELECT * FROM $tbl_name2 WHERE id='".$_POST['qno']."'";
    $result3=mysql_query($sql3);

       $disp3=mysql_fetch_assoc($result3);

      $sql4="SELECT * FROM $tbl_name WHERE username='$myuser' and password='$mypass'";
        $result4=mysql_query($sql4);

      $disp4=mysql_fetch_assoc($result4);

     if($disp3['Answer']==$_POST['Answer'])
     {

     $sql5 ="UPDATE $tbl_name SET level_crossed='".($disp4

   ['level_crossed']   +1)."', Score='    $disp4['Score']+1)."' WHERE 
      username='$myuser' and password='$mypass'";
     $result5=mysql_query($sql5);
         }
         else {
          $sql5="UPDATE $tbl_name SET level_crossed='".($disp4['level_crossed']+1).
         "' WHERE username='$myuser' and password='$mypass'";
         $result5=mysql_query($sql5);

        }

         }

        $sql="SELECT * FROM $tbl_name WHERE username='$myuser' and password='$mypass'";
        $result=mysql_query($sql);

     $disp=mysql_fetch_assoc($result);
            echo "    ".$disp['level_crossed']."    ";

          $sql7="SELECT * FROM $tbl_name2 WHERE id='".($disp['level_crossed']+1)."'";
           $result7=mysql_query($sql7);

            $disp2=mysql_fetch_assoc($result7);
               ?>
        <br>
     <?php

      echo "Q.)".$disp2['Question']."    ";
        ?>
          <br>
           <form name="quizq" action="quiz1.php" method="post" >
         <input name="qno" type="hidden" value="<?php echo $disp['level_crossed']+1; ?>" />
          <input type="radio" name="Answer" value="<?php echo $disp2['Option1'];>" /><? 
                                                                                                        php echo $disp2['Option1']; ?><br>
      <input type="radio" name="Answer" value="<?php echo $disp2['Option2']; ?>" />
          <?php  echo $disp2['Option2']; ?><br>
      <input type="radio" name="Answer" value="<?php echo $disp2['Option3']; ?>" />
     <?php echo $disp2['Option3']; ?><br>
      <input type="radio" name="Answer" value="<?php echo $disp2['Option4']; ?>" />
       <?php echo $disp2['Option4']; ?><br>
       <input type="submit" value="Submit Answer" />
        </form>
     <br><br>
         <a href="logout.php">Logout</a>
   <?php

     }
    ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T14:46:50.630

重定向到另一个网址：

```
header('Location: /path/of/next/page'); 
```

就像其他任何事情一样`header`，您不能在调用之前呈现任何输出`header`。这包括`echo`、和标签`print`之外的任何文本。`php`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T14:46:40.427

您可以使用标题重定向页面

```
header( 'Location: http://www.url.com/' ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T14:49:39.593

尝试使用`header` 例如： `header( 'Location: test.php' );`

# javascript - 如何处理与 tile id javascript 的冲突

> ID：16000279
> 
> 赞同：1
> 
> 时间：2013-04-14T14:44:11.170
> 
> 标签：javascript, jquery, html, canvas, collision-detection

我用 html5 画布用 JavaScript 编写了一个小游戏，并且正处于碰撞检测点并且变得相当困惑。

我以平铺的方式构建关卡，然后将保存的 JSON 文件导入游戏。

在我的水平绘制功能中，我检查是否有任何图层属性以及图层属性是否存在冲突。如果是，则返回该层并继续循环。完成后，与碰撞返回的图层将通过另一个循环，以便可以将平铺值放入数组中。

所以在这个数组中，我有一系列数组，具体取决于图层中有多少行瓷砖，这些行保存每个瓷砖的该行的数据。

我想做的是当玩家 x/y 在不等于 0 的瓷砖之一中时，然后碰撞。

如果我所拥有的只是该瓷砖空间中的价值，我将如何做到这一点？

[这](http://upbeatevents.co.uk/dis)是游戏实时版本的链接，因此您可以自己查看图块的存储方式，我已经放入了一些 console.logs，因此您可能需要使用 firebug 或等效的方法来查看。登录使用

*   用户名 - 客人
*   密码 - 客人

澄清我的问题是：我如何在我的玩家 x/y 和瓷砖值之间创建碰撞？非常感谢

**更新**

好的，所以我认为我快到了，我目前的问题是我如何从数组中读取对象 x 和 y 然后检查碰撞，此时碰撞检测与数组中的最后一个图块一起工作（屏幕右下角），这是我为遍历数组而实现的代码：

```
this.check_coll = function(array,posX, posY){

    var collided = false,
        block_x,
        block_y,
        block_cx,
        block_cy,
        combined_hw = 32,
        combined_hh = 32,
        player_cx = posX+(32/2),
        player_cy = posY+(32/2);

    array.forEach(function(value,i){

            //get obj x
            block_x = value[1];
            //get obj y
            block_y = value[2];
            block_cx = block_x+(32/2);
            block_cy = block_y+(32/2);

        collided = Math.abs(player_cx - block_cx)< combined_hw
                 && Math.abs(player_cy - block_cy)< combined_hh;
    });

return collided;
} 
```

有什么想法吗？

# java - 为什么我们需要在 Java 中的 ArrayList 上使用迭代器？

> ID：16000282
> 
> 赞同：38
> 
> 时间：2013-04-14T14:44:31.560
> 
> 标签：java, arraylist, iterator

[我正在阅读问题“我们是否需要在 ArrayList 上使用迭代器？](https://stackoverflow.com/questions/15827703/do-we-ever-need-to-use-iterators-on-arraylist) ”的答案。

在回答中，用户这样说：“使用 ArrayLists 的迭代器的一个重要用例是当您想要在迭代时删除元素”。

这甚至可以在 Java 中使用 ArrayList 的 remove 方法来实现。我的问题是为什么我们需要 ArrayList 中的迭代器？

考虑代码：

```
import java.util.*;
public class ocajp66 {
    public static void main(String[] args) {
        ArrayList a = new ArrayList();
        for (int i = 0; i < 10; i++) {
            a.add(i);
        }
        System.out.printf("BEFORE ITERATOR\n");
        for (int i = 0; i < a.size(); i++) {
            System.out.printf("I:%d\n", a.get(i));
        }
        System.out.printf("AFTER ITERATOR\n");
        Iterator i = a.iterator();
        while (i.hasNext()) {
            System.out.printf("I:%d\n", i.next());
        }
    }
} 
```

任何人都可以解释迭代器的重要性吗？如果你能用代码解释我，那就太好了。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-04-14T14:56:18.053

正如您所说，当您想要在迭代数组内容时删除内容时使用迭代器。如果您不使用迭代器，而只是有一个 for 循环并在其中使用 remove 方法，您将得到异常，因为在您迭代时数组的内容会发生变化。例如：您可能认为在 for 循环开始时数组大小为 10，但一旦删除东西就不会是这种情况。所以当您到达最后一个循环时，可能会有 IndexOutofBoundsException 等。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-14T14:59:29.667

很明显，一个`ArrayList`类似的 API 可以在没有该`iterator()`方法的情况下工作。但是， an`ArrayList`是 a`Collection`并且`iterator()`方法是在`Collection`接口中定义的......所以`ArrayList` *必须*实现它。

从 an 中删除的要点`ArrayList`是，通过索引进行操作需要一些思考：

```
 for (int i = 0; 
         i < a.size(); // Hoist this at your peril
         i++) {
        if (a.get(i) == something) {
            a.remove(i);
            i--;  // Leave this out at your peril
        }
    } 
```

如果您需要在从循环调用的方法中删除列表元素，情况会变得更糟......因为该方法必须说它已经删除了一个元素，以便调用者可以调整循环索引。

`iterator`an 上好东西的第三个原因`ArrayList`是它允许您使用 Java 5 的`for (type var : iterable) ...`语法。

底线是您不必在实例*上*使用迭代器。`ArrayList`如果你不想，那就不要。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-14T15:27:28.433

这是一个如何通过几种不同方式获得所需结果的示例。这种冗余并不是 Java 独有的。

*   for (int i=0; i < myArray.length; i++) { ... }

这种语法是在 Java 的早期版本中引入的。它在 for { } 循环中迭代一个普通的 Java 数组。这通常是安全的，因为 Java 数组是固定长度的，因此不可能出现“索引越界”异常。

*   for (int i=0; i < myArrayList.size(); i++ { ... }

在引入了引入 ArrayList 的 Collections API 之后，此语法反映了 Java 的更高版本。如上所述，实现 Collection 接口的类必须实现 Iterator，但您不必使用它。这个 for { } 循环没有，但这里的危险是 ArrayLists 不是固定大小的。如果它应该在你的 for 循环体中收缩，就会导致异常。

*   对于 (MyArrayType t : myArrayList) { }

此语法也在 Java 的后续版本中发布。它被称为增强的 for 循环。任何通过实现 Iterable 接口来提供 Iterator 的集合类都可以利用此语法。这允许迭代集合中的项目，而无需显式实例化迭代器。在 JavaFX 应用程序中使用它的最喜欢的方法是循环通过一堆控件来将属性设置为一个值，例如。重置一组 TextField 的内容：

```
for (TextField tf : new TextField[] { txtf1, txtf2, txtf3, txtfa, txtfb, txtfc}) {
    tf.setText("");
} 
```

*   而 (myCollectionIterator.hasNext()) { }

你总是可以显式地实例化一个迭代器。当集合大小发生变化时（来自集合自己的方法），这可以安全使用。说 Iterator 更接近于 Iterable 接口的属性而不是核心 Java 语言的特性是正确的。但是由于后来的 Java 版本，您仍然可以将其用作类似语言的功能（在增强的 for 循环中）。

这些结构提供了冗余，但它们并不相同。每一个都有细微差别，使一个在给定时间特别有用。您应该使用所有这些。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-14T15:17:21.377

**问：为什么我们需要 ArrayList 中的迭代器？**

我们不这样做 - 正如您在代码中所示，您可以在没有迭代器的情况下迭代并在 ArrayList 上执行核心操作。但是有功能很好。

**问：谁能解释一下迭代器的意义？**

除了它的设计价值之外，我还可以看到它的快速故障功能。我从[ArrayList 文档](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)中引用了这一段：

> 此类的 iterator 和 listIterator 方法返回的迭代器是**快速失败的**：如果在创建迭代器后的任何时间对列表进行结构修改，除了通过迭代器自己的 remove 或 add 方法之外，迭代器将抛出 ConcurrentModificationException。因此，面对并发修改，迭代器快速而干净地失败，而不是在未来不确定的时间冒任意的、非确定性的行为。

您正在寻找代码，您实际上可以在这里看到 ArrayList 的迭代器实现：[ArrayList.java](http://www.docjar.org/html/api/java/util/ArrayList.java.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-14T15:35:17.707

对于您的问题，如果我们使用`list.remove()`方法而不是`iterator.remove()`then`IndexOutOfBoundsException`将被抛出。

`list.remove()`如果您在找到要删除的特定对象/索引后放置语句，则可以安全使用，`break`以便它将退出循环而没有任何异常（如`IndexOutOfBoundsException`）

**如果我们在同步**环境中使用迭代器，以下**迭代器代码仍然可以抛出。** `ConcurrentModificationException`

 **```
List<String> empNames = new ArrayList<String>();
        synchronized (empNames) {
            Iterator<String> iterator = empNames.iterator();
            while (iterator.hasNext()) {
                iterator.next();
                empNames.add("Another Name"); // throws
                // ConcurrentModificationException
            }
        } 
```**

# css - 带有搜索图标位置的文本框

> ID：16000283
> 
> 赞同：0
> 
> 时间：2013-04-14T14:44:45.297
> 
> 标签：css

我不是很擅长CSS，文本框已经对齐了，我试着把搜索图标放到文本框里，就是进不去。代码如下：

```
<style type="text/css">
#textbox-search{overflow:auto;}

#textbox-search input.searchkeyword {
     -webkit-border-radius: 5px;
     -moz-border-radius: 5px;
     border-radius: 5px;
     border:1px solid #8e8e8e;
     background-color:#f5f5f5;
     height:16px;
     padding:-4px;
     padding-left:-48px;
     color:#4a4a4a;
     float:right;
 }

#textbox-search input.button{
    border:0;
    padding:4px;
    margint:0 0 0 600px;
    width:24px;
    height:24px;
    background:transparent url('images/search.png') center center  no-repeat;
    float:right;

}
</style>

<form id="textbox-search">
<input type="submit" class="button" value="" />
<input type="text" class="searchkeyword" />
</form> 
```

更新 ：![在此处输入图像描述](https://i.stack.imgur.com/srq63.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T15:12:21.597

`background`您可以使用这样的属性简单地实现这一点

```
input{  
    background: url("http://png.findicons.com/files/icons/1389/g5_system/32/toolbar_find.png") top right no-repeat;
    height:30px;
    padding-right:30px;
} 
```

[JS 小提琴演示](http://jsfiddle.net/zUzgU/)

您可以根据图像尺寸更改高度和填充值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-23T09:34:15.440

你可以很容易地做到这一点

```
.searchkeyword {
  width: 100%; /*textbox width*/
  float: none;
  background: url(your_image.png);
  background-size: 20px 20px;/*background icon size*/
  background-repeat: no-repeat;
  background-position: 8px 10px; /*place where you wnat*/
  display: block;
  text-indent: 20px; /*help to indent your text on textfield*/
} 
```

# c# - 顶级目录结构如何揭示应用程序的用途？

> ID：16000284
> 
> 赞同：6
> 
> 时间：2013-04-14T14:44:50.470
> 
> 标签：c#, mvvm, architecture

Robert C. Martin 在他关于清洁架构的一次演讲中公开批评了当今相当标准的做事方式。 [Robert C. Martin - 清洁建筑和设计](http://www.youtube.com/watch?feature=player_detailpage&v=asLUTiJJqdE#t=757s)

我的理解`standard way`是这样的：

```
solution
    - UI project
        - Models
        - Views
        - Controllers
        - Assets
    - Logic project
    - Data project 
```

Martin 在这里说，当您查看其顶级目录结构时，应用程序应该立即显示其用途......我想知道，任何人都可以提供这种目录结构的示例，例如使用 MVVM 模式作为交付机制时？如何按照 Martin 所描述的方式构建他的应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T19:35:11.080

从我在您的示例中看到的内容，我只能猜测它是一个 ASP.NET MVC 应用程序，我们需要查看`Logic`或`Data`项目以了解此应用程序的含义。

大多数时候，人们根据所使用的技术或框架来组织他们所有的目录结构。这来自默认项目模板的创建方式（对您的应用程序应该做什么一无所知，他们真的不能为我们做更多的事情）。

现在，Robert C. Martin 告诉我们的是，我们的顶级目录结构应该反映应用程序的功能，而不是它的构建方式。我不确定在解决方案级别这样做是个好主意。[但是，如果我们可以应用域驱动程序设计](http://en.wikipedia.org/wiki/Domain-driven_design)原则，我总是建议有一个`Domain`项目。

如果在此类*域*项目中，您在根级别看到以下文件夹：

```
Clients
Orders
Billing
Shipping
Promotions
... 
```

你可以猜到它是某种电子商务应用程序。如果您找到的文件夹类似于或`Models`，您将不得不更深入地了解目录结构。 `DTOs``Exceptions`

我不喜欢在我的解决方案中有太多项目（如果可能的话，少于 10 个），所以我不会去为我的系统的每个域对象创建一个项目。这就是为什么我认为项目的根本级别而不是解决方案是我们应该将注意力集中在定义应用程序正在做什么上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T15:29:17.907

他并不是在谈论一种放弃应用程序目的的结构。他说，在顶层应该有用例，以便您可以快速了解它的作用以及需要更改代码的地方。我认为他根本不是在谈论文件夹名称。更多信息可用性。

# c++ - 链接方法会导致数据损坏

> ID：16000286
> 
> 赞同：0
> 
> 时间：2013-04-14T14:45:12.157
> 
> 标签：c++

我有一个看起来像这样的类结构：

```
class Bar
{
public:
    Bar & AddPart(int size, const string & name)
    {
        partitions.insert(pair<string, int>(name,size));
        return *this;
    }
    void PrintParts(ostream & os) const
    {
        map<string, int>::const_iterator it;

        for (it = partitions.begin(); it != partitions.end(); ++it)
        {
            os << it->first << " " << it->second << endl;
        }
    }
private:
    std::map<string, int> parts;
}

class Foo
{
public:
    Foo & AddElement(Bar &a)
    {
        elements.push_back(&a);
        return *this;
    }
private:
    vector<Bar *> elements;
}; 
```

我返回当前类实例的原因是能够链接方法调用，如下所示：

```
Foo f();
f.AddElement(Bar().AddPart(10,"abcd").AddPart(5,"xyz").AddPart(20, "jklm")); 
```

问题是，当我调用这些链接方法然后尝试打印数据时，它已损坏。而不是得到预期的输出，应该是这样的：

```
abcd 10
xyz 5
jklm 20 
```

我得到甚至无法显示的随机字符。

我尝试通过 valgrind 运行它，但我遇到了一堆错误，与这个非常相似：

`Invalid read of size 8 ==3347== at 0x4EC6690: std::basic_ostream<char, std::char_traits<char> >& std::operator<< <char, std::char_traits<char>, std::allocator<char> >(std::basic_ostream<char, std::char_traits<char> >&, std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.17)`

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T14:51:19.523

您的实例在`Bar`之后立即被销毁`f.AddElement(Bar().AddPart(10,"abcd").AddPart(5,"xyz").AddPart(20, "jklm"));`但是您正在保存指针

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T14:51:38.993

再想想当你把一个指向 rvalue ( `Bar()`)的指针放入 时会发生什么`elements`：

```
Foo & AddElement(Bar &a)
{
    elements.push_back(&a); // <--- Here you take address of temporary Bar()
    return *this;
}

f.AddElement(Bar().AddPart(10,"abcd").AddPart(5,"xyz").AddPart(20, "jklm")); 
```

# google-app-engine - 如何从客户端通过谷歌数据存储中的参考集合定义获取数据存储实体的长度（或计数）

> ID：16000287
> 
> 赞同：3
> 
> 时间：2013-04-14T14:45:17.297
> 
> 标签：google-app-engine, google-cloud-datastore, jinja2

我在 2 个实体（谷歌数据存储）之间有一对多的数据存储关系——即 Restaurant_Table 中的一个实例可以有来自 Review_Table 的许多评论——由集合“restaurant_reviews”标记

当我通过 jinja 遍历每家餐厅（循环）以在我的模板中列出每家餐厅时，我想显示一家餐厅的评论数量或数量。所有餐馆都以从变量餐馆中的数据存储区查询的形式从服务器传递，如我模板中的 jinja2 逻辑所示。

我收到一个错误，即查询对象 TypeError：“查询”类型的对象没有 len()。关于如何获得单个餐厅的评论数的任何其他想法？帮助！

```
{% for each in restaurants %}
    <script>            
     var html_output = "";
     var review_count ={{each.restaurant_reviews|length}};
    ...     
{% endfor %} 
```

DATASTORE ENTITY 定义为：

```
 class Review_Table(db.Model):
   date_submission = db.DateTimeProperty(required=True, indexed=True)
   course_id = db.ReferenceProperty(Restaurant_Table, 
             indexed=True, collection_name='restaurant_reviews') 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-14T14:57:14.923

要获取查询表示的实体数，可以使用 count 方法：

```
db.Query(Kind).count() 
```

您不能在 jinja 模板中执行此操作——您需要在处理程序中构建输出，然后渲染到您的模板。

然而，正如文档所说， .count() 方法“比实际检索所有结果要快一个常数因子，但运行时间仍然与偏移量 + 限制的总和成线性关系。” 这意味着，如果您获得大量餐厅/评论，这可能会变得非常非常缓慢。

在我看来，一个更好的选择是在您的餐厅模型“num_reviews”中添加一个额外的属性，您的处理程序会在每次添加新评论时更新 - 使成本稍微高一些/写入速度变慢会变得非常便宜/读取速度更快，因为不需要进行额外的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-30T02:03:00.403

性能可能是一个问题，但这将完成任务：

```
var review_count = {% for n in restaurant_reviews %}{% if loop.index == 1 %}{{ loop.length }}{% endif %}{% endfor %}; 
```

# ios - Testflight 无法安装应用程序

> ID：16000289
> 
> 赞同：7
> 
> 时间：2013-04-14T14:45:26.550
> 
> 标签：ios, download, testflight

我有几个测试人员已经注册到 testflight 并连接了他们的设备......他们有不同的 ios 型号...... iOS 6 及更高版本......但他们都有同样的问题。

当他们从“safari”或“testflight”应用程序本身单击应用程序的安装按钮时......

应用程序开始下载...达到大约 90% 并出现错误消息....“无法下载应用程序。此时无法安装“应用程序”。

现在我有大约 30 名测试人员......其中 7 人有同样的问题......其他人已经成功安装了该应用程序，没有任何问题......

对我来说，这似乎是完全随机的错误，因为手机型号或 ios 版本之间没有相关性......顺便说一下，所有 6 及以上版本......

所以……我该怎么办。请帮忙

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T17:27:06.637

可能有很多原因以下是提到的一些原因

1.  您正在使用开发人员配置文件而不是临时分发配置文件

2.  您使用的应用标识符与属于您的个人资料的标识符不同

3.  启用/禁用 iCloud/Gamecenter 可能存在问题

在任何情况下都要求测试人员将设备连接到 PC/Mac 打开**iPhone 配置实用程序**并在您从 testflight 中的构建中按下安装后查看日志。这将使他们深入了解那里出了什么问题。希望这会有所帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-19T15:31:12.657

对我来说，将 Build Active Architecture 设置为 NO... 工作并成功安装

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-10T03:07:14.640

我只是遇到了同样的问题，似乎 testflight 已关闭。它从一开始就没有显示在[系统状态](https://developer.apple.com/system-status/)中，但他们更新了它以反映我遇到问题的时期。

我有大约 70 个测试人员，只有一个能够下载，那个测试人员只是不断重试。

[![试飞](https://i.stack.imgur.com/BYNd0.png)](https://i.stack.imgur.com/BYNd0.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-13T16:59:50.620

就我而言，从测试人员的手机上卸载/重新安装 TestFlight 应用程序似乎有所帮助，就好像安装已进入不可挽回的糟糕状态一样。

对于经历过这种情况的其他人，值得注意的是 iTunes Connect 支持无济于事，Apple Developer Support 也无济于事。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-14T20:25:05.417

似乎通过使用正确的配置文件解决了最初的问题。

但是，对于未来的 googlers 记录，我收到了配置文件安装错误（在控制台日志中看到）*0xe800800b*，这似乎是一个不常见的错误代码，因为我找不到任何东西。

最后，发现提到“坏 UDID”的东西会导致一系列可能的错误代码，而我有 19 个旧代码（该死的*Select All*）。

只选择我真正关心（并且知道）的少数人解决了这个问题（从不费心去寻找哪个是坏的）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-16T18:11:59.210

在 xcode 生成的临时配置文件之后，我删除了我的临时配置文件。它工作正常

# java - 如何将首选项值放入静态字符串变量？

> ID：16000291
> 
> 赞同：0
> 
> 时间：2013-04-14T14:45:50.750
> 
> 标签：java, android, android-activity

我收到以下错误消息：

> “无法从类型 Activity 对非静态方法 getPreferences(int) 进行静态引用”是我的错误。'TimeCardLogin' 必须是静态变量。”

如何获得对静态`String`变量的偏好？

```
public class MyBaseURLContainer extends Activity {

    public static String urlPref = "";

    static String BASE_URL = 
           getPreferences(MODE_PRIVATE).getString("Name of variable",urlPref);

    public static final  String TimeCardLogin = BASE_URL + "/timecard";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T15:00:57.063

我建议制作一个以 Context 作为参数的静态 getter。这样a）它将实际编译，并且b）如果您的base-url在某个时候发生更改，它将加载最新的值，而不是像您的程序一样在开始时加载一次：

```
private final static String PREFS = "myUrlPrefs";

public static String getBaseUrl(Context context) {
    return context.getSharedPreferences(PREFS, MODE_PRIVATE).getString(
        "Name of variable",urlPref);
} 
```

您可以从这样的另一个活动中调用它：

```
String baseUrl = MyBaseUrlContainer.getBaseUrl(this); 
```

或者从任何你可以访问这样的上下文的地方（一个活动就是一个上下文）：

```
String baseUrl = MyBaseUrlContainer.getBaseUrl(myContext); 
```

如果您绝对必须从无法访问 Context 的地方使用此代码（在 Android 应用程序中几乎永远不会出现这种情况），您可以在检索到该值后存储该值，但第一次获得它必须来自上下文的值。

# jquery - 在 jQuery 对象中按 ID 选择以获取文本

> ID：16000293
> 
> 赞同：4
> 
> 时间：2013-04-14T14:46:21.350
> 
> 标签：jquery

我正在尝试从尚未添加到 DOM 的 jQuery 对象中获取文本。所以：

```
var fragment = $("<span id='thing'>stuff</span><span id='thing2'>stuff2</span>"); 
```

但这些都不起作用（试图获取文本“stuff2”）：

```
var test1 = fragment.find("#thing2").text();
var test2 = $("#thing2", fragment).text(); // trying to use fragment as the context 
```

谁能告诉我为什么不呢？在将 jQuery 对象添加到 DOM 之前，如何访问它的文本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T14:47:58.470

由于您已经定义了一个 jQuery 对象，您只需要使用**[text()](http://api.jquery.com/text/)**：

```
fragment.text() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T14:51:12.287

你没有得到它，因为你做错了。片段内没有以 id 作为事物的元素。事实片段是具有 id 作为事物的元素。所以你可以使用

```
fragment.html() 
```

或者

```
fragment.text() 
```

[请参阅此 Bin 示例 1](http://jsbin.com/idayut/1/edit)

```
var fragment = $("<span id='outer'> <span id='inner'> Inner Span </span> </span>");
console.log($('#inner', fragment).html()); //Says Inner Span 
```

**更新** 在您更新的问题中，您将片段创建为跨度数组，因此您必须从数组索引中获取元素，而不是查找具有 id 的元素。

[请参阅此 bin 示例 2](http://jsbin.com/idayut/1/edit)

```
// This time fragment2 is an array
var fragment2 = $("<span id='outer'> Outer Span </span><span id='inner'> Inner Span </span>");

console.log(fragment2.length);
console.log(fragment2.eq(0).html()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T15:12:28.117

查看此示例：[Bin 代码](http://jsbin.com/idayut/3/edit)

```
var final = $("<span id='outer'> Outer Span </span><span id='inner'> Inner Span </span>");
// Virtual wrapper
var div = $("<div>").append(final);
console.log($("#inner", div).html()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T15:17:54.490

我想到了。感谢“Juhana”，我只需要使用 filter() 而不是 find()。

所以改变： `var test1 = fragment.find("#thing2").text(); // returns nothing` 到：
`var test1 = fragment.filter("#thing2").text(); // returns 'stuff2'`

filter() 起作用而不是 find() 的原因是，在 中`fragment`，我创建了一个元素数组，`span`而 find() 只搜索传递的对象的子对象，其中的元素`fragment`没有。如果我将两个跨度`filter`与另一个包裹起来`span`，那么有一个带有子元素的元素并且 find() 将起作用。或者，在这种情况下可以使用 filter() ，因为它搜索所有元素，而不仅仅是子元素（因此不需要用 a 包装`span`）。

谢谢大家的宝贵建议！！

# c# - 获取行ID然后将其存储在会话中？

> ID：16000294
> 
> 赞同：3
> 
> 时间：2013-04-14T14:46:28.203
> 
> 标签：c#, asp.net, session, jqgrid

我对使用 JQGRID 有疑问。

如何获取 jqgrid 的行号，然后
将其存储在会话中。

谁能帮我这个？
我真的不知道我将如何开始创建这个。
我是使用 JQGrid 和会话的新手

谢谢

这是我的代码。

```
function beforeSelect(rowid, e) {
                grid = $("#<%= jqgrid.ClientID %>");
                ItemID = grid.jqGrid('getCell', rowid, 'ItemID');
                var sessionItemID = '<%=Session["ItemID"] %>';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T07:01:48.527

如果您的 rownumber 与 rowid 不同，您可以包含一个额外的字段来存储行号（就像您在代码中使用 itemId 一样）。否则，您将需要遍历网格以搜索特定的 rowid 并使用计数器来获取行号：

```
function getRowNumber(rowId) {

            var rownumber= 0;
            $('#gridId tbody tr').each(function (i, n) {
                var $row = $(n);

                    if($row.find('td:eq(0)').text()==rowId)//Assuming rowid is the first column of jqgrid(index=0). Otherwise change the index appropriately

                    { rownumber=i; }

            });
           return rownumber;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T07:30:12.477

会话在服务器上可用，而 jQGrid 在客户端上运行。这意味着您不能使用 Javascript 直接影响会话。

您*可以*做的是创建一个返回给服务器的 Ajax 请求，并告诉 C# 您在会话中想要什么。

在您的 C# 页面中...

```
protected void Page_Load(object sender, EventArgs e) {
    Session["Id"] = Request.Querystring["Id"];
} 
```

然后在您拥有 ID 后在您的 javascript 中执行此操作...

```
$.ajax({
    url: "/Path/To/SetSession.aspx",
    data: {"Id": ItemID},
    success: function(){
        alert('Stored Ok');
    },
    error: function() {
        alert('Something went wrong - check the C# page for errors and check for network issues');
    }
}); 
```

这是一个绝对最小的示例 - 您希望在 PHP 中进行适当的错误处理，确保会话存在，等等...

# db2 - 从没有分隔符的 db2 导出到 csv

> ID：16000295
> 
> 赞同：0
> 
> 时间：2013-04-14T14:46:34.947
> 
> 标签：db2, export-to-csv, db2-luw

我需要将 db2 表的内容导出到 CSV 文件。我读到这`nochardel`会阻止在每个数据之间使用分隔符，但这并没有发生。

假设我有一张桌子

```
 MY_TABLE
  -----------------------
  Field_A   varchar(10)
  Field_B   varchar(10)
  Field_A   varchar(10) 
```

我正在使用这个命令

```
 export to myfile.csv of del modified by nochardel select * from MY_TABLE 
```

我把它写入 myfile.csv

```
 data1    ,data2    ,data3 
```

但我不想像下面这样的“，”分隔符

```
 data1    data2    data3 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T16:10:28.400

您在问如何消除*逗号*分隔值文件`,`中的逗号 () ？:-)

 *`NOCHARDEL`告诉 DB2 不要用字符字段分隔符（默认为双引号字符）包围字符字段（`CHAR`和字段）。`VARCHAR``"`

无论如何，当使用分隔格式从 DB2 导出时，您必须有某种列分隔符。没有`NOCOLDEL`分隔文件的选项。

该`EXPORT`实用程序无法写入固定长度（位置）记录 - 您必须通过以下任一方式执行此操作：

*   自己写程序，
*   使用单独的实用程序（IBM 销售高性能卸载实用程序）
*   编写将各个列连接成单个字符串的 SQL 语句：

这是最后一个选项的示例：

```
export to file.del 
    of del
    modified by nochardel
    select 
       cast(col1 as char(20))   ||
       cast(intcol as char(10)) || 
       cast(deccol as char(30)); 
```

最后一个选项可能会很痛苦，因为 DB2 没有`sprintf()`帮助很好地格式化字符串的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-25T09:29:09.967

使用“of asc”而不是“of del”。然后您可以指定固定的列位置而不是定界。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-24T16:12:04.903

是的，还有另一种方法可以做到这一点。我总是这样做：

1.  将 select 语句放入文件（input.sql）：

    ```
    select 
        cast(col1 as char(20)),
        cast(col2 as char(10)), 
        cast(col3 as char(30)); 
    ```

2.  像这样调用 db2 clp：

    ```
    db2 -x -tf input.sql -r result.txt 
    ```

这对您有用，因为您需要将 varchar 转换为 char。正如 Ian 所说，将数字或其他数据类型转换为 char 可能会带来意想不到的结果。

PS：我认为 Ian 指出了 CSV 和固定长度格式之间的区别；-)*

# c++ - std::piecewise_linear_distribution 在 VS2012 下不起作用？

> ID：16000299
> 
> 赞同：11
> 
> 时间：2013-04-14T14:47:05.913
> 
> 标签：c++, visual-c++, random, visual-studio-2012, c++11

我决定`<random>`更好地了解c++11，所以我写了这样一段代码：

```
std::mt19937 gen(10);
std::piecewise_linear_distribution<> d(Range.begin(), Range.end(),
                                       RangeValues.begin());

std::map<int, unsigned int> hist;
for (int n = 0; ++n != iterations;)
    ++hist[std::round(d(gen))];

for (auto p : hist)
   std::cout << std::setw(2) << p.first << ": "
             << std::string(p.second/(iterations/200), '*') << '\n'; 
```

由于某种原因`std::random_device`似乎不适用于 Coliru，所以我输入了一个 const 样本种子。我认为它是 UB，因此 IIRC 它严重基于硬件，这就是为什么 Coliru 不支持它（如果我错了，请纠正我）。然而，在 Ideone 上它确实有效。

然后我将它移植到 VS2012 上运行，唯一的区别是自己的实现`std::round`：

```
return number < 0.0 ? std::ceil(number - 0.5) : std::floor(number + 0.5); 
```

[它在Coliru](http://coliru.stacked-crooked.com/view?id=073271c22fb657fa27b96965ba84eb80-50d9cfc8a1d350e7409e81e87c2653ba)上完全正确，但是当我在 VS2012 上编译和运行它时，[输出是错误的](http://i.imgur.com/0i32ccc.png)。

知道如何纠正这个问题，更重要的是，为什么会这样？我是在做一些迟钝的事情，还是 VS2012 不是这里的聪明人？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-14T17:15:21.750

看来这是一个 Visual Studio 问题。我已经尝试过下面的程序（改编自 OP），GCC 4.7.2、Clang 3.2 和 Intel 13.1.0 生成的输出非常合理，而 Visual Studio Nov 2012 CTP 生成的输出则完全不同。

概率密度是分段线性的，并由数组 x 和 p 以下列方式定义。建立连接点 (x[i], p[i]) for i = 0, ..., N（其中 N = x.size() - 1）的分段线性函数。然后对该函数进行归一化（通过将其除以其积分）以获得概率密度。

```
#include <iostream>
#include <iomanip>
#include <string>
#include <random>
#include <array>

int main() {

    std::mt19937 gen(10);

    std::array<double, 3> x = {{0, 20, 40}};
    std::array<double, 3> p = {{0,  1,  0}};
    std::piecewise_linear_distribution<> dist(x.begin(), x.end(), p.begin());

    std::array<int, 40> hist = {{0}};

    for (size_t i = 0; i < 200000; ++i)
        ++hist[static_cast<size_t>(dist(gen))];

    for (size_t n = 0; n < hist.size(); ++n)
        std::cout << std::setfill('0') << std::setw(2) << n << ' ' << 
          std::string(hist[n] / 200, '*') << std::endl;

    std::cout << "\nValues in interval [20, 21[ : " << hist[20] << std::endl;
} 
```

在我们的示例中，多边形函数连接 (0, 0)、(20, 1) 和 (40, 0)。因此，它的形状是一个底边为 40，高为 1 的等腰三角形，其面积为 20。因此，概率密度 f 连接 (0, 0)、(20, 1/20) 和 (40, 0)。这意味着在区间 [20, 21[ 我们可以预期大约 f(20) * (21 - 20) = 1/20 * 1 = 1/20 的平局结果。我们总共绘制了 200,000 个值，然后，我们可以预期在 [20, 21[.

GCC、Clang 和 Intel 在 [20, 21[ 中报告了 9734 个点，并显示了与等腰三角形非常相似的模式：

```
00 *
01 ***
02 *****
03 ********
04 ***********
05 **************
06 ***************
07 ******************
08 ********************
09 ************************
10 **************************
11 ****************************
12 *******************************
13 *********************************
14 ***********************************
15 ***************************************
16 *****************************************
17 ******************************************
18 **********************************************
19 ************************************************
20 ************************************************
21 *********************************************
22 *******************************************
23 *****************************************
24 **************************************
25 ************************************
26 **********************************
27 ******************************
28 ****************************
29 **************************
30 ***********************
31 ********************
32 ******************
33 ****************
34 *************
35 ***********
36 *********
37 ******
38 ***
39 *

Values in interval [20, 21[ : 9734 
```

不幸的是，Visual Studio Nov 2012 CTP 给出了这个：

```
00 ********************************************** [truncated]
01 **********************************************
02 ***********************************
03 *****************************
04 **************************
05 ***********************
06 *********************
07 ********************
08 *******************
09 ******************
10 *****************
11 ****************
12 ***************
13 **************
14 **************
15 **************
16 *************
17 *************
18 *************
19 ************
20 ************
21 *************
22 *************
23 *************
24 *************
25 **************
26 ***************
27 ***************
28 ****************
29 *****************
30 ******************
31 *******************
32 *******************
33 *********************
34 ***********************
35 **************************
36 *****************************
37 ***********************************
38 **********************************************
39 ********************************************** [truncated]

Values in interval [20, 21[ : 2496 
```

笔记：

1.  为了更好地显示，我截断了 Visual Studio 输出。
2.  对 [20, 21[ 中的点数的更好估计是 200,000 * (0.5 * (f(20) + f(21))) * (21 - 20) = 100,000 * (1/20 + 1/20 - 1/400) = 10,000 - 250 = 9750。

# xml - JAXB 不将值属性视为属性

> ID：16000302
> 
> 赞同：1
> 
> 时间：2013-04-14T14:47:23.540
> 
> 标签：xml, xsd, jaxb

我创建了一个 XSD，我的元素属性之一被命名为`value`. 我使用 JAXB 创建了类，但是当我使用这些类创建 XML`value`不是属性时，它是元素标记中的值。

XSD：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema attributeFormDefault="unqualified"
    elementFormDefault="qualified" targetNamespace="http://ibm.org/seleniumframework"
    xmlns:xs="http://www.w3.org/2001/XMLSchema">

    <xs:element name="Test" type="sel:Test" xmlns:sel="http://ibm.org/seleniumframework"/>

    <xs:complexType name="Test">
        <xs:choice minOccurs="1" maxOccurs="unbounded">
            <xs:element type="sel:CLISessionType" name="CLISession" xmlns:sel="http://ibm.org/seleniumframework"/>
            <xs:element type="sel:DBSessionType" name="DBSession" xmlns:sel="http://ibm.org/seleniumframework"/>
            <xs:element type="sel:ScreensType" name="Screens" xmlns:sel="http://ibm.org/seleniumframework"/>
        </xs:choice>
    </xs:complexType>

    <!--Screen XML section -->
    <xs:complexType name="ScreensType">
        <xs:sequence>
            <xs:element type="sel:ScreenType" name="Screen" minOccurs="1" maxOccurs="unbounded" xmlns:sel="http://ibm.org/seleniumframework"/>
        </xs:sequence>
    </xs:complexType>

    <xs:complexType name="ScreenType">
        <xs:sequence>
            <xs:element type="sel:ScreenDataType" name="ScreenData" minOccurs="1" maxOccurs="unbounded" xmlns:sel="http://ibm.org/seleniumframework"/>
        </xs:sequence>
        <xs:attribute type="xs:string" name="name" use="required" />
        <xs:attribute type="xs:string" name="package" use="required" />
        <xs:attribute type="xs:string" name="class" use="required" />
    </xs:complexType>

    <xs:complexType name="ScreenDataType">
        <xs:sequence>
            <xs:element type="sel:elementType" name="element"
                minOccurs="1" maxOccurs="unbounded" xmlns:sel="http://ibm.org/seleniumframework"/>
        </xs:sequence>
        <xs:attribute type="xs:int" name="step" use="required"/>
        <xs:attribute type="xs:string" name="description" use="required"/>
    </xs:complexType>

    <xs:complexType name="elementType">
        <xs:simpleContent>
            <xs:extension base="xs:string">
                <xs:attribute type="xs:string" name="name" use="required" />
                <xs:attribute type="xs:string" name="type" use="required" />
                <xs:attribute type="xs:string" name="value" use="required" />
            </xs:extension>
        </xs:simpleContent>
    </xs:complexType>

    <!--CLI XML section -->
    <xs:complexType name="CLISessionType">
        <xs:sequence>
            <xs:element type="sel:CliLoginType" name="login"
                minOccurs="1" maxOccurs="1" xmlns:sel="http://ibm.org/seleniumframework"/>
            <xs:element type="sel:CommandsType" name="Commands"
                minOccurs="1" maxOccurs="1" xmlns:sel="http://ibm.org/seleniumframework"/>
        </xs:sequence>
        <xs:attribute type="xs:string" name="use_test.properties"
            use="required" />
    </xs:complexType>

    <xs:complexType name="CliLoginType">
        <xs:simpleContent>
            <xs:extension base="xs:string">
                <xs:attribute type="xs:string" name="host" use="required" />
                <xs:attribute type="xs:string" name="password" use="required" />
                <xs:attribute type="xs:string" name="username" use="required" />
            </xs:extension>
        </xs:simpleContent>
    </xs:complexType>

    <xs:complexType name="CommandsType">
        <xs:sequence>
            <xs:element type="sel:CommandType" name="Command"
                minOccurs="1" maxOccurs="unbounded" xmlns:sel="http://ibm.org/seleniumframework"/>
        </xs:sequence>
    </xs:complexType>

    <xs:complexType name="CommandType">
        <xs:simpleContent>
            <xs:extension base="xs:string">
                <xs:attribute type="xs:string" name="exe" use="required"/>
                <xs:attribute type="xs:string" name="args" use="required"/>
                <xs:attribute type="xs:string" name="wait" use="required"/>
                <xs:attribute type="xs:string" name="expectedOutput" use="required"/>
                <xs:attribute type="xs:string" name="toVariable" use="required"/>
            </xs:extension>
        </xs:simpleContent>
    </xs:complexType>

    <!--DB XML section -->
    <xs:complexType name="DBSessionType">
        <xs:sequence>
            <xs:element type="sel:DbLoginType" name="login" minOccurs="1"
                maxOccurs="1" xmlns:sel="http://ibm.org/seleniumframework"/>
            <xs:element type="sel:QueriesType" name="Queries"
                minOccurs="1" maxOccurs="1" xmlns:sel="http://ibm.org/seleniumframework"/>
        </xs:sequence>
        <xs:attribute type="xs:string" name="use_test.properties"
            use="required" />
        <xs:attribute type="xs:string" name="use_dbserver" use="required"/>
        <xs:attribute type="xs:string" name="use_db" use="required"/>
    </xs:complexType>

    <xs:complexType name="DbLoginType">
        <xs:simpleContent>
            <xs:extension base="xs:string">
                <xs:attribute type="xs:string" name="server" use="required"/>
                <xs:attribute type="xs:string" name="database" use="required"/>
                <xs:attribute type="xs:string" name="username" use="required"/>
                <xs:attribute type="xs:string" name="password" use="required"/>
            </xs:extension>
        </xs:simpleContent>
    </xs:complexType>

    <xs:complexType name="QueriesType">
        <xs:sequence>
            <xs:element type="sel:SQLType" name="SQL" maxOccurs="unbounded"
                minOccurs="1" xmlns:sel="http://ibm.org/seleniumframework"/>
        </xs:sequence>
    </xs:complexType>

    <xs:complexType name="SQLType">
        <xs:simpleContent>
            <xs:extension base="xs:string">
                <xs:attribute type="xs:string" name="query" use="required"/>
                <xs:attribute type="xs:string" name="expectedResults" use="required"/>
            </xs:extension>
        </xs:simpleContent>
    </xs:complexType>

</xs:schema> 
```

绑定文件：

```
<bindings xmlns="http://java.sun.com/xml/ns/jaxb"
          xmlns:xsi="http://www.w3.org/2000/10/XMLSchema-instance"
          xmlns:xs="http://www.w3.org/2001/XMLSchema"
          version="2.1">
    <bindings schemaLocation="xmlSchema.xsd" version="1.0">
        <!-- Customise the package name -->
        <schemaBindings>
            <package name="com.example.schema"/>
        </schemaBindings>

        <!-- rename the value element -->
        <bindings node=".//xs:attribute[@name='value']">
            <property name="ValueAttribute"/>
        </bindings>
    </bindings>
</bindings> 
```

JAXB 命令：

`xjc -b xmlSchema.xjb -d C:\Users\Alison\workspace\FTFXmlGenerator\src -p com.q1labs.qa.xmlgenerator.model.generatedxmlclasses xmlSchema.xsd`

如何编辑它以便将元素中的值视为属性？

编辑：

```
package com.qa.xmlgenerator.model.generatedxmlclasses;

import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlAttribute;
import javax.xml.bind.annotation.XmlType;
import javax.xml.bind.annotation.XmlValue;

/**
 * <p>Java class for elementType complex type.
 * 
 * <p>The following schema fragment specifies the expected content contained within this class.
 * 
 * <pre>
 * &lt;complexType name="elementType">
 *   &lt;simpleContent>
 *     &lt;extension base="&lt;http://www.w3.org/2001/XMLSchema>string">
 *       &lt;attribute name="name" use="required" type="{http://www.w3.org/2001/XMLSchema}string" />
 *       &lt;attribute name="type" use="required" type="{http://www.w3.org/2001/XMLSchema}string" />
 *       &lt;attribute name="value" use="required" type="{http://www.w3.org/2001/XMLSchema}string" />
 *     &lt;/extension>
 *   &lt;/simpleContent>
 * &lt;/complexType>
 * </pre>
 * 
 * 
 */
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "elementType", propOrder = {
    "value"
})
public class ElementType {

    @XmlValue
    protected String value;
    @XmlAttribute(name = "name", required = true)
    protected String name;
    @XmlAttribute(name = "type", required = true)
    protected String type;
    @XmlAttribute(name = "value", required = true)
    protected String valueAttribute;

    /**
     * Gets the value of the value property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getValue() {
        return value;
    }

    /**
     * Sets the value of the value property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setValue(String value) {
        this.value = value;
    }

    /**
     * Gets the value of the name property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getName() {
        return name;
    }

    /**
     * Sets the value of the name property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setName(String value) {
        this.name = value;
    }

    /**
     * Gets the value of the type property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getType() {
        return type;
    }

    /**
     * Sets the value of the type property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setType(String value) {
        this.type = value;
    }

    /**
     * Gets the value of the valueAttribute property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getValueAttribute() {
        return valueAttribute;
    }

    /**
     * Sets the value of the valueAttribute property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setValueAttribute(String value) {
        this.valueAttribute = value;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T16:31:19.937

由于您在自定义绑定中将**value**重命名为**valueAttribute**，因此您也应该使用重命名的属性来设置值：

```
element.setValueAttribute("valueAttribute"); 
```

我自己试过这个，价值最终成为一个属性。

```
ElementType element = new ElementType();
element.setName("name");
element.setType("type");
element.setValueAttribute("valueAttribute"); 
```

你应该得到：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementType value="valueAttribute" type="type" name="name"/> 
```

# clojure - 如何安全地读取不受信任的 Clojure 代码（不仅仅是一些序列化数据）？

> ID：16000306
> 
> 赞同：8
> 
> 时间：2013-04-14T14:48:17.577
> 
> 标签：clojure, s-expression

```
(def evil-code (str "(" (slurp "/mnt/src/git/clj/clojure/src/clj/clojure/core.clj") ")" ))
(def r (read-string evil-code )) 
```

有效，但不安全

```
(def r (clojure.edn/read-string evil-code))
RuntimeException Map literal must contain an even number of forms  clojure.lang.Util.runtimeException (Util.java:219) 
```

不工作...

如何安全地将 Clojure 代码（保留所有 '#'s 本身是可取的）读入树中？想象一个 Clojure 防病毒软件，它想要扫描代码中的威胁并想要使用数据结构，而不是纯文本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-04T14:01:11.443

首先，您永远不应该直接从不受信任的数据源中读取 clojure 代码。您应该改用 EDN 或其他序列化格式。

话虽如此，自 Clojure 1.5 以来，有一种无需评估即可读取字符串的安全方法。在使用 read-string 之前，您应该将[*read-eval var 绑定为 false。*](http://clojuredocs.org/clojure_core/clojure.core/%2aread-eval%2a)在 Clojure 1.4 和更早的版本中，这可能会导致调用 java 构造函数引起的副作用。这些问题已经得到解决。

这是一些示例代码：

```
(defn read-string-safely [s]
  (binding [*read-eval* false]
    (read-string s)))

(read-string-safely "#=(eval (def x 3))")
=> RuntimeException EvalReader not allowed when *read-eval* is false.  clojure.lang.Util.runtimeException (Util.java:219)

(read-string-safely "(def x 3)")
=> (def x 3)

(read-string-safely "#java.io.FileWriter[\"precious-file.txt\"]")
=> RuntimeException Record construction syntax can only be used when *read-eval* == true  clojure.lang.Util.runtimeException (Util.java:219) 
```

**关于阅读器宏**

调度宏 (#) 和标记文字在读取时被调用。Clojure 数据中没有它们的表示，因为到那时这些构造都已被处理。据我所知，没有内置方法可以生成 Clojure 代码的语法树。

您将不得不使用外部解析器来保留该信息。您可以使用自己的自定义解析器，也可以使用 Instaparse 和 ANTLR 等解析器生成器。可能很难找到其中任何一个库的完整 Clojure 语法，但您可以扩展其中一个 EDN 语法以包含额外的 Clojure 形式。一个快速的谷歌揭示[了 Clojure 语法的 ANTLR 语法](https://github.com/antlr/grammars-v4/blob/master/clojure/Clojure.g4)，如果需要，您可以更改它以支持缺少的结构。

还有[Sjacket](https://github.com/cgrand/sjacket)是为 Clojure 工具制作的库，需要保留有关源代码本身的信息。这似乎很适合您尝试做的事情，但我个人对此没有任何经验。从测试来看，它的解析器确实支持阅读器宏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T20:43:51.187

根据[当前文档](http://clojuredocs.org/clojure_core/clojure.core/read)，您不应该*使用*也不`read`应该`read-string`从不受信任的数据源中读取。

```
WARNING: You SHOULD NOT use clojure.core/read or
clojure.core/read-string to read data from untrusted sources.  They
were designed only for reading Clojure code and data from trusted
sources (e.g. files that you know you wrote yourself, and no one
else has permission to modify them). 
```

您应该使用`read-edn`或`clojure.edn/read`考虑到该目的而设计的。

邮件列表中关于使用 read 和*read-eval*以及关于这些的最佳实践进行了[长时间的讨论。](https://groups.google.com/d/topic/clojure/YBkUaIaRaow/discussion)

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-18T14:10:39.973

我想指出一个旧库（在 LightTable 中使用），它使用`read-string`一种技术来提出客户端/服务器通信

[Fetch：用于客户端/服务器交互的 ClojureScript 库](https://github.com/LightTable/fetch)。

您可以特别看到[`safe-read`](https://github.com/LightTable/fetch/blob/master/src/noir/fetch/remotes.clj#L12)方法：

```
(defn safe-read [s]
  (binding [*read-eval* false]
    (read-string s))) 
```

你可以看到绑定`*read-eval*`到的使用`false`。我认为其余代码值得关注它提出的抽象类型。

在[PR](https://github.com/ddellacosta/fetch/commit/9e3a4e27db5caf665bfd115e0f5b1e9d763adf93)中，建议存在可以通过使用`edn`来解决的安全问题（...aaand back to your question）：

```
(require '[clojure.edn :as edn])

(defn safe-read [s]
    (edn/read-string s)) 
```*

# jquery - 如何获取当前 HTML 表格行中文本框的值？

> ID：16000310
> 
> 赞同：0
> 
> 时间：2013-04-14T14:48:30.967
> 
> 标签：jquery, html, dom, textbox, html-table

我有以下 HTML 表格：

```
<table>
   <tr>
       <th>Name</th>
       <th>Button</th>
   </tr>
   <tr>
         <td><input type='text' name='Name' id='Name' class='NameClass' /></td>
         <td><a id="myLink" >Click Here</a></td>
   </tr>
</table> 
```

我正在简化该表，因为有很多列和行，但基本上当我单击链接时，我想将 Name 文本框中的任何值读入局部变量（为简化起见，我们可以提醒该值）。

使用 jQuery 读取该文本框的值的最佳方法是什么？我想避免任何硬编码的列偏移，因为尽管它是本示例中的第一列，但我可能会添加新列，所以我想让它更具前瞻性。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T14:52:08.107

ID 应该是唯一的，您可以使用类代替，将 ID 更改为可以编码的类后：

```
$('.myLink').click(function(e){
   e.preventDefault();
   var val = $(this).closest('tr').find('.NameClass').val();
   // var val = $(this).parent().prev().find('.NameClass').val();
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-14T15:08:39.340

另外的选择

`var result= $(this).parent().parent().find('input[type="text"]').val();`

如果添加了另一个输入框，则使用输入的类名来获取所需的值

`var result= $(this).parent().parent().find('.className').val();`

# android - 在 logcat 中成功但屏幕为空

> ID：16000311
> 
> 赞同：2
> 
> 时间：2013-04-14T14:48:37.683
> 
> 标签：android, android-layout

我目前有这个问题。正因为如此，我不能做任何其他事情，因为我必须参考这个页面。如果有人能指出我犯的错误，我将不胜感激。

我想查看特定产品的详细信息，其中上一页（列表）中的按钮会将 ID 参数传递给页面（详细信息）。Java 代码或 PHP 代码中没有错误。我对此很确定，因为 Logcat 会相应地显示结果（因为我在任何地方都添加了日志）。但是模拟器中的页面是空的。我不明白为什么会发生这种情况，因为布局的设计也与其他页面相同。如果您需要代码，如下所示：

Java 代码：list.java

```
ListView lv = getListView();

    lv.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

            String pid = ((TextView) view.findViewById(R.id.pid)).getText()
                    .toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(),
                    details.class);
            // sending pid to next activity
            in.putExtra(TAG_PID, pid);

            // starting new activity and expecting some response back
            startActivity(in);
        }
    }); 
```

Java代码：details.java

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_book_details);

        Intent i = getIntent();

        // getting product id (pid) from intent
        pid = i.getStringExtra(TAG_PID);

        Log.d("pid is:",pid);

        new GetProductDetails().execute();

    }

 class GetProductDetails extends AsyncTask<String, String, String> {

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(Details.this);
            pDialog.setMessage("Loading. Please wait...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();
        }

        protected String doInBackground(String... params) {

            runOnUiThread(new Runnable() {
                public void run() {

                    int success;
                    try {
    List<NameValuePair> params = new ArrayList<NameValuePair>();
               params.add(new BasicNameValuePair("pid", pid));

JSONObject json = jParser.makeHttpRequest(url_product_details, "GET", params);

   Log.d("Single Product Details", json.toString());

                        success = json.getInt(TAG_SUCCESS);
                        if (success == 1) {
JSONArray productObj = json.getJSONArray(TAG_BOOK); 
        int i = productObj.length();    //line 1

JSONObject product = productObj.getJSONObject(i);

String title = "Title : "+ product.getString(TAG_TITLE);
    String description = product.getString(TAG_DESCRIPTION);

HashMap<String, String> map = new HashMap<String, String>();

map.put(TAG_TITLE, title);
map.put(TAG_DESCRIPTION, description);                              

eventsList.add(map);

Log.d("Title", title);
Log.d("Description", description);
            }   
}
        protected void onPostExecute(String file_url) {
            pDialog.dismiss();
            runOnUiThread(new Runnable() {
                public void run() {

ListAdapter adapter = new SimpleAdapter(
            Details.this, eventsList,
R.layout.list_item2, new String[] { TAG_PID, TAG_TITLE, TAG_DESCRIPTION},
    new int[] { R.id.pid, R.id.title, R.id.description });                  
                    setListAdapter(adapter);
                }
            });
        }
    } 
```

布局：details.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<ListView
    android:layout_marginTop="70dp"
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_marginLeft="20dp"/>
</LinearLayout> 
```

日志猫：

```
04-15 00:05:28.005: D/All Products:(4345): {"success":1,"books":[{"author":"Agnesh","category":"Fiction","title":"The Immortals of Shiva","pid":"1","price":"150","description":"Life of Shiva","discount":"20%"},{"author":"Chetan Bhagat","category":"Drama","title":"3 Mistakes of My Life","pid":"14","price":"180","description":"Story of a 3 friends and their destiny","discount":"30%"},{"author":"Chetan Bhagat","category":"Comedy","title":"Two States","pid":"15","price":"175","description":"Love Story","discount":"5%"},{"author":"Charles Darwin","category":"Personality Developm","title":"How to win friends","pid":"16","price":"250","description":"Building your confidence","discount":"10%"},{"author":"Paulo Coelho","category":"Science Fiction","title":"Alchemist","pid":"17","price":"300","description":"In search of Gold","discount":"20%"},{"author":"Vivekananda","category":"Social Awareness","title":"Call to the Nation","pid":"18","price":"100","description":"Knowing yourself","discount":"5%"}]}
04-15 00:05:29.675: D/pid is:(4345): 18
04-15 00:05:30.995: D/Single Product Details(4345): {"book":[{"author":"Vivekananda","category":"Social Awareness","title":"Call to the Nation","pid":"18","price":"100","description":"Knowing yourself","discount":"5%"}],"success":1}
04-15 00:05:31.000: W/System.err(4345): org.json.JSONException: Index 1 out of range [0..1)
04-15 00:05:31.005: W/System.err(4345):     at org.json.JSONArray.get(JSONArray.java:263)
04-15 00:05:31.005: W/System.err(4345):     at org.json.JSONArray.getJSONObject(JSONArray.java:480)
04-15 00:05:31.005: W/System.err(4345):     at com.spyraa.store.Details$GetProductDetails$1.run(Details.java:104)
04-15 00:05:31.005: W/System.err(4345):     at android.os.Handler.handleCallback(Handler.java:587)
04-15 00:05:31.005: W/System.err(4345):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-15 00:05:31.005: W/System.err(4345):     at android.os.Looper.loop(Looper.java:130)
04-15 00:05:31.010: W/System.err(4345):     at android.app.ActivityThread.main(ActivityThread.java:3691)
04-15 00:05:31.010: W/System.err(4345):     at java.lang.reflect.Method.invokeNative(Native Method)
04-15 00:05:31.010: W/System.err(4345):     at java.lang.reflect.Method.invoke(Method.java:507)
04-15 00:05:31.010: W/System.err(4345):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
04-15 00:05:31.010: W/System.err(4345):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
04-15 00:05:31.015: W/System.err(4345):     at dalvik.system.NativeStart.main(Native Method)
04-15 00:05:31.020: D/AndroidRuntime(4345): Shutting down VM
04-15 00:05:31.020: W/dalvikvm(4345): threadid=1: thread exiting with uncaught exception (group=0x4001e578)
04-15 00:05:31.030: E/AndroidRuntime(4345): FATAL EXCEPTION: main
04-15 00:05:31.030: E/AndroidRuntime(4345): java.lang.NullPointerException
04-15 00:05:31.030: E/AndroidRuntime(4345):     at android.widget.SimpleAdapter.getCount(SimpleAdapter.java:93)
04-15 00:05:31.030: E/AndroidRuntime(4345):     at android.widget.ListView.setAdapter(ListView.java:485)
04-15 00:05:31.030: E/AndroidRuntime(4345):     at android.app.ListActivity.setListAdapter(ListActivity.java:265)
04-15 00:05:31.030: E/AndroidRuntime(4345):     at com.spyraa.store.Details$GetProductDetails$2.run(Details.java:166)
04-15 00:05:31.030: E/AndroidRuntime(4345):     at android.app.Activity.runOnUiThread(Activity.java:3743)
04-15 00:05:31.030: E/AndroidRuntime(4345):     at com.spyraa.store.Details$GetProductDetails.onPostExecute(Details.java:156)
04-15 00:05:31.030: E/AndroidRuntime(4345):     at com.spyraa.store.Details$GetProductDetails.onPostExecute(Details.java:1)
04-15 00:05:31.030: E/AndroidRuntime(4345):     at android.os.AsyncTask.finish(AsyncTask.java:417)
04-15 00:05:31.030: E/AndroidRuntime(4345):     at android.os.AsyncTask.access$300(AsyncTask.java:127)
04-15 00:05:31.030: E/AndroidRuntime(4345):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
04-15 00:05:31.030: E/AndroidRuntime(4345):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-15 00:05:31.030: E/AndroidRuntime(4345):     at android.os.Looper.loop(Looper.java:130)
04-15 00:05:31.030: E/AndroidRuntime(4345):     at android.app.ActivityThread.main(ActivityThread.java:3691)
04-15 00:05:31.030: E/AndroidRuntime(4345):     at java.lang.reflect.Method.invokeNative(Native Method)
04-15 00:05:31.030: E/AndroidRuntime(4345):     at java.lang.reflect.Method.invoke(Method.java:507)
04-15 00:05:31.030: E/AndroidRuntime(4345):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
04-15 00:05:31.030: E/AndroidRuntime(4345):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
04-15 00:05:31.030: E/AndroidRuntime(4345):     at dalvik.system.NativeStart.main(Native Method) 
```

新的日志猫：

```
04-15 01:37:50.695: D/pid is:(8773): 18
04-15 01:37:52.285: D/Single Product Details(8773): {"book":[{"author":"Vivekananda","category":"Social Awareness","title":"Call to the Nation","pid":"18","price":"100","description":"Knowing yourself","discount":"5%"}],"success":1}
04-15 01:37:52.295: D/AndroidRuntime(8773): Shutting down VM
04-15 01:37:52.295: W/dalvikvm(8773): threadid=1: thread exiting with uncaught exception (group=0x4001e578)
04-15 01:37:52.305: E/AndroidRuntime(8773): FATAL EXCEPTION: main
04-15 01:37:52.305: E/AndroidRuntime(8773): java.lang.NullPointerException
04-15 01:37:52.305: E/AndroidRuntime(8773):     at com.spyraa.bookstore.BookDetails$GetProductDetails$1.run(BookDetails.java:127)
04-15 01:37:52.305: E/AndroidRuntime(8773):     at android.os.Handler.handleCallback(Handler.java:587)
04-15 01:37:52.305: E/AndroidRuntime(8773):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-15 01:37:52.305: E/AndroidRuntime(8773):     at android.os.Looper.loop(Looper.java:130)
04-15 01:37:52.305: E/AndroidRuntime(8773):     at android.app.ActivityThread.main(ActivityThread.java:3691)
04-15 01:37:52.305: E/AndroidRuntime(8773):     at java.lang.reflect.Method.invokeNative(Native Method)
04-15 01:37:52.305: E/AndroidRuntime(8773):     at java.lang.reflect.Method.invoke(Method.java:507)
04-15 01:37:52.305: E/AndroidRuntime(8773):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
04-15 01:37:52.305: E/AndroidRuntime(8773):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
04-15 01:37:52.305: E/AndroidRuntime(8773):     at dalvik.system.NativeStart.main(Native Method)
04-15 01:38:00.015: I/Process(8773): Sending signal. PID: 8773 SIG: 9 
```

太感谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T15:27:18.847

这缺少一些代码，因此其中一些答案是在黑暗中拍摄的，但是您应该在这里采取的关键步骤是：

*   您已经为您的活动和适配器膨胀了您的 xml 文件（我假设正在使用自定义适配器）
*   你已经从你的视图中选择了你的列表视图和它的 ID
*   你已经设置了列表视图的适配器
*   您已将其设置为 onClick 侦听器（我可以看到您已经这样做了。）
*   您已覆盖适配器的 getView 以正确设置数据

如果您已经完成了这 5 件事，那么一旦获得 JSON 数据，您将如何处理它？您应该告诉活动处理数据，这也应该在处理程序中完成，因为您正在使用异步任务执行此操作。

还要确保以某种方式将数据添加到适配器。

最后，这是一个关于带有自定义列表适配器的 listViews 的很好的教程，其中可能有一些代码可以帮助您发现错误（它看起来不像我们可以看到的任何代码）[http://www.ezzylearning.com/ tutorial.aspx?tid=1763429](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)

# d3.js - 替换 d3.js 图而不是每次都创建一个新图

> ID：16000314
> 
> 赞同：0
> 
> 时间：2013-04-14T14:48:55.780
> 
> 标签：d3.js

我将 d3.js 与 GWT 结合使用，每次调用用于创建饼图的 javascript 代码时，它都会附加一个新代码，而不是用新值替换旧代码。

如何更改此代码，以便在添加新代码之前删除旧代码？

```
var svg = d3.select(".body").append("svg")
            .attr("width", width)
            .attr("height", height)
          .append("g")
            .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T07:43:45.830

而不是更改您的代码，我建议您创建一次，然后使用您的数据构建您的图表并查看 d3.js 的 .enter() 和 .exit() 方法 - 所以如果您的数据发生更改，库将添加/删除一些元素。

干杯

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-14T14:58:21.327

只需添加

```
d3.select(".body").selectAll("svg").remove(); 
```

在删除所有 SVG 元素的代码之前。

# java - Spring JDBC并使对象和数据库保持正确状态

> ID：16000319
> 
> 赞同：1
> 
> 时间：2013-04-14T14:49:38.297
> 
> 标签：java, spring, jakarta-ee, spring-jdbc

我正在 Spring JDBC 中创建一个应用程序，我对如何保持对象图和数据库处于正确状态有一些疑问。如果您有一个带有零件列表的汽车对象。如果您从汽车中移除零件，则需要使用汽车存储库中的更新操作将其保存到数据库中。然后您是否必须找到属于汽车的所有零件，然后从零件表中删除任何零件？这意味着我需要在更新之前进行查找操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:15:47.813

我想这取决于您的数据库的设计。

给定汽车和零件，我会有类似的东西

```
table cars: car_id, name
table parts: part_id, description
table installed_parts: car_id, part_id 
```

一个`Cars`对象会有一个`List`of `Parts`，它们是从 中的信息中提取的`installed_parts`。

当`car.removePart(part)`被调用时，`installed_part where car_id == Car.car_id and part_id = Part.part_id`被移除。

# c# - 字节数组的缓冲流

> ID：16000322
> 
> 赞同：4
> 
> 时间：2013-04-14T14:49:47.333
> 
> 标签：c#, stream

我正在使用[DropNet](https://github.com/dkarzon/DropNet)库从 Dropbox 下载文件。

```
public Stream GetFileStream(string path)
    {
        return new MemoryStream(dropboxClient.GetFile(path));
    } 
```

我在下载大文件时遇到问题，因为 DropNet 库返回`byte`数组，然后我将该字节数组转换为流以用于另一个逻辑目的，使用`MemoryStream`这不好，因为我必须将文件下载到服务器内存然后完成我的逻辑我试图找到一个将该文件缓冲为流的方法。

我查看了[BufferedStream 类](http://msdn.microsoft.com/en-us/library/3dsccbf4.aspx)，但要创建新的 buffersteam，它首先需要一个流。我想不出我的问题的最佳解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T17:23:28.047

DropNet API 不公开用于检索文件的 Stream 功能。您必须等待整个文件下载完毕才能使用它。如果您希望能够读取传入的流，则需要使用不同的库、修改现有库[或编写自己的](https://www.dropbox.com/developers/core/api).

# c# - wp7音乐播放器

> ID：16000323
> 
> 赞同：2
> 
> 时间：2013-04-14T14:50:05.267
> 
> 标签：c#

我正在尝试在 wp 中开发音乐播放器应用程序。现在，我可以从 MediaLibrary 中检索歌曲列表并将其添加到列表框中。

```
MediaLibrary lib = new MediaLibrary();
var SongName = (from m in lib.Songs select m.Name).ToList();
listBox1.ItemsSource = SongName; 
```

列表正在填充，我正在使用事件访问 ListBox 项目

```
listBox1_SelectionChanged 
```

我希望将所选项目转换为歌曲类型，以便我可以使用 MediaPlayer 类播放它。

正常的类型转换，例如

```
Song x = (Song)listBox1.SelectedItem; 
```

我如何使它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:09:47.713

您选择歌曲名称（字符串）作为数据源类型。如您所见，您不能简单地通过显式强制转换将字符串转换为 类型（如果您真的想保留字符串类型，`Song`可以在 中执行搜索）。`MediaLibrary`或者，您可以将`Song`对象本身绑定到您的 ListBox。

```
MediaLibrary lib = new MediaLibrary();
var SongName = lib.Songs.ToList();
listBox1.ItemsSource = SongName; 
```

然后在您的事件处理程序中

```
Song x = listBox1.SelectedItem as Song;
if(x != null)
   MediaPlayer.Play(x); 
```

如果您真的只想在 中具有`string`类型`ListBox`，您可以在您的`SelectedChanged`事件中执行这样的搜索。（您必须创建`lib`一个类级别的变量）

```
Song x = lib.Songs.Where(s => s.Name == listbox1.SelectedItem.ToString()).FirstOrDefault(); 
```

这种方法的主要问题是，如果有两个同名的轨道，则只返回第一个。您需要一种区分它们的方法，但其他属性，例如`Artist`，已从您的数据源中删除（因为您只使用了 Song 的`Name`属性）。

# ibm-mq - 连接到 Websphere MQ 7.1 时出现 MQRC_NOT_AUTHORIZED 错误

> ID：16000324
> 
> 赞同：6
> 
> 时间：2013-04-14T14:50:09.430
> 
> 标签：ibm-mq, userid

我是 IBM Websphere Mq 的“非常”新手，我将尝试提供尽可能多的细节。

我在 Vmware Workstation 上运行的 Windows server 2003 上安装了 Websphere MQ 7.1。主机运行带有 Websphere MQ 客户端和我的 ASP.NET 应用程序的 Windows 7。（我的应用程序应该通过 SVRCONN 通道连接到 Windows server 2003 Websphere 的队列管理器，安装在主机上的 Websphere 客户端仅用于测试目的，将 WMQ 客户端连接到 WMQ 服务器会导致 AMQ4036 访问未授权错误，从而导致结论需要服务器配置！）

两个系统都可以互相ping通，并且在同一个本地网络上。（我是否也提到过打开 1415 端口并且 TCP 侦听器正在服务器虚拟机上运行？）

**ASP.NET 代码段：**

```
queueManager = new MQQueueManager(queueManagerName, queueProperties); 
```

**queueManagerName 与服务器的队列管理器和 queueProperties 匹配，如下所示：**

```
queueProperties[MQC.HOST_NAME_PROPERTY] = "192.168.203.128";

queueProperties[MQC.PORT_PROPERTY] = 1415;

queueProperties[MQC.CHANNEL_PROPERTY] = "QM_TEST.SVRCONN";

queueProperties[MQC.USER_ID_PROPERTY] = "";

queueProperties[MQC.PASSWORD_PROPERTY] = ""; 
```

**编译时，我得到 MQRC_NOT_AUTHORIZED 异常，并在服务器端的 AMQERR01.log 中记录以下日志（注意：IBM WMQ 以法语安装，日志以法语生成，但我认为您会设法理解错误。）**

```
3/04/2013 21:32:25 - Process(1120.3) User(MUSR_MQADMIN) Program(amqzmur0.exe)
                      Host(HATRIXX-82HDFHA) Installation(Installation1)
                      VRMF(7.1.0.2) QMgr(QM_TEST)

AMQ6287: WebSphere MQ VC:\Program Files\IBM\WebSphere MQ (Installation1).

EXPLICATION :
Informations système WebSphere MQ : 
Produit           :- Windows Server 2003, Build 3790: SP1 (MQ Windows 32-bit) 
Version           :- C:\Program Files\IBM\WebSphere MQ (Installation1) 
Informations hôte :- 7.1.0.2 (p710-002-121029)
ACTION :
Aucun(e). 
-------------------------------------------------------------------------------
13/04/2013 21:32:25 - Process(2128.11) User(MUSR_MQADMIN) Program(amqzlaa0.exe)
                      Host(HATRIXX-82HDFHA) Installation(Installation1)
                      VRMF(7.1.0.2) QMgr(QM_TEST)

AMQ8075: L'autorisation a échoué car il est impossible d'obtenir le SID de
l'entité 'hatrix'.

EXPLICATION :
Le gestionnaire des droits d'accès aux objets n'a pas pu obtenir le SID de
l'entité spécifiée. Cet incident peut être dû à l'absence de la machine locale
du domaine (l'entité ne peut donc pas être localisée) ou à l'inexistence de
l'entité.
ACTION :
Vérifiez que l'entité est valide et que tous les contrôleurs de domaine requis
sont disponibles. Il peut être nécessaire de créer l'entité sur la machine
locale. 
----- amqzfubn.c : 2227 -------------------------------------------------------
13/04/2013 21:32:25 - Process(2524.7) User(MUSR_MQADMIN) Program(amqrmppa.exe)
                      Host(HATRIXX-82HDFHA) Installation(Installation1)
                      VRMF(7.1.0.2) QMgr(QM_TEST)

AMQ9245: Impossible d'extraire des détails de compte pour l'ID utilisateur de
canal MCA.

EXPLICATION :
WebSphere MQ n'a pas pu extraire des détails de compte pour l'ID utilisateur de
canal MCA Hatrix. Il s'agit de l'ID utilisateur MCA pour le canal
QM_TEST.SVRCONN sur le gestionnaire de files d'attente QM_TEST. Il peut avoir
été défini dans la définition de canal ou fourni par un exit de canal ou un
client.
ACTION :
Vérifiez que l'ID utilisateur est correct et qu'il est défini dans le système
local Windows, le domaine local ou un domaine de confiance. Dans le cas d'un ID
utilisateur de domaine, assurez-vous que que tous les contrôleurs de domaines
nécessaires sont disponibles. 
----- cmqxrsrv.c : 1778 -------------------------------------------------------
13/04/2013 21:32:25 - Process(2128.11) User(MUSR_MQADMIN) Program(amqzlaa0.exe)
                      Host(HATRIXX-82HDFHA) Installation(Installation1)
                      VRMF(7.1.0.2) QMgr(QM_TEST)

AMQ8073: Echec de l'autorisation. Le SID ((None)) n'a pas pu être corrélé.

EXPLICATION :
Le gestionnaire de droits d'accès aux objets n'a pas pu faire correspondre le
SID spécifié à des informations connues d'entité et de domaine.
ACTION :
Assurez-vous que l'application fournit un SID reconnu sur ce système, que tous
les contrôleurs de domaines nécessaires sont disponibles et que les règles de
sécurité sont correctement définies. 
----- amqzfubn.c : 4351 ------------------------------------------------------- 
```

**DISPLAY CHLAUTH(QM_TEST.SVRCONN) 命令返回：**

```
 CHLAUTH(QM_TEST.SVRCONN)                TYPE(USERMAP)
   DESCR( )                                CUSTOM( )
   ADDRESS(*)                              CLNTUSER(HATRIX)
   MCAUSER( )                              USERSRC(CHANNEL)
   WARN(NO)                                ALTDATE(2013-04-13)
   ALTTIME(13.53.03)
AMQ8878: Affichage des détails relatifs à l'enregistrement d'authentification de
 canal.
   CHLAUTH(QM_TEST.SVRCONN)                TYPE(USERMAP)
   DESCR( )                                CUSTOM( )
   ADDRESS(*)                              CLNTUSER(MQM)
   MCAUSER( )                              USERSRC(CHANNEL)
   WARN(NO)                                ALTDATE(2013-04-13)
   ALTTIME(13.57.59)
AMQ8878: Affichage des détails relatifs à l'enregistrement d'authentification de
 canal.
   CHLAUTH(QM_TEST.SVRCONN)                TYPE(ADDRESSMAP)
   DESCR( )                                CUSTOM( )
   ADDRESS(*)                              MCAUSER(ADMINISTRATEUR)
   USERSRC(MAP)                            WARN(NO)
   ALTDATE(2013-04-13)                     ALTTIME(01.53.52) 
```

*（请注意，我添加了一些规则，并且 USERID Hatrix 不存在，我已将其包含在 SET CHLAUTH 命令中以进行测试）*

**我认为它与 MCAuser 有关，所以我尝试将 MCAuser 设置为“Administrateur”（这是 WMQ 上的管理员名称）并连接：**

```
queueProperties[MQC.USER_ID_PROPERTY] = "Administrateur"; 
```

**仍然给我同样的错误，但服务器端日志输出不同：**

```
13/04/2013 21:41:18 - Process(1120.3) User(MUSR_MQADMIN) Program(amqzmur0.exe)
                      Host(HATRIXX-82HDFHA) Installation(Installation1)
                      VRMF(7.1.0.2) QMgr(QM_TEST)

AMQ6287: WebSphere MQ VC:\Program Files\IBM\WebSphere MQ (Installation1).

EXPLICATION :
Informations système WebSphere MQ : 
Produit           :- Windows Server 2003, Build 3790: SP1 (MQ Windows 32-bit) 
Version           :- C:\Program Files\IBM\WebSphere MQ (Installation1) 
Informations hôte :- 7.1.0.2 (p710-002-121029)
ACTION :
Aucun(e). 
-------------------------------------------------------------------------------
13/04/2013 21:41:18 - Process(2524.8) User(MUSR_MQADMIN) Program(amqrmppa.exe)
                      Host(HATRIXX-82HDFHA) Installation(Installation1)
                      VRMF(7.1.0.2) QMgr(QM_TEST)

AMQ9776: La canal a été bloqué par l'ID utilisateur.

EXPLICATION :
Le canal entrant 'QM_TEST.SVRCONN' a été bloqué à partir de l'adresse
'192.168.203.1' parce que les valeurs actives du canal étaient mappées sur un
ID utilisateur qui devrai t être bloqué. Les valeurs actives du canal étaient
**'MCAUSER(Administrateur) CLNTUSER(Hatrix)'.**
ACTION :
Prenez contact avec l'administrateur système qui examinera les enregistrements
d'authentification de canal pour s'assurer que les paramètres corrects ont été
configurés. Le commutateur ALTER QMGR CHLAUTH permet de contrôler si les
enregistrements d'authentification de canal sont utilisés. La commande DISPLAY
CHLAUTH peut être utilisée pour interroger les enregistrements
d'authentification de canal. 
----- cmqxrmsa.c : 1004 -------------------------------------------------------
13/04/2013 21:41:18 - Process(2524.8) User(MUSR_MQADMIN) Program(amqrmppa.exe)
                      Host(HATRIXX-82HDFHA) Installation(Installation1)
                      VRMF(7.1.0.2) QMgr(QM_TEST)

AMQ9999: Le canal 'QM_TEST.SVRCONN' vers l'hôte 'FAIROUZ (192.168.203.1)' s'est
terminé anormalement.

EXPLICATION :
Le programme du canl s'exécutant sous l'ID processus 2524(488) pour le canal
'QM_TEST.SVRCONN' a pris fin anormalement. Le canal est 'FAIROUZ
(192.168.203.1)'. Dans certains cas, son nom ne peut pas être déterminé et il
est représenté par '????'.
ACTION :
Examinez les messages d'erreur précédents du programme de canal dans les
journaux des erreurs afin de déterminer la cause de l'incident. Notez que ce
message peut être totalement exclus ou supprimé en réglant les attributs
"ExcludeMessage" ou "SuppressMessage" sous la strophe "QMErrorLog" dans le
fichier qm.ini. D'autres informations figurent dans le guide d'administration
du système. 
----- amqrmrsa.c : 925 -------------------------------------------------------- 
```

我无法理解的是，在 ASP.NET 的 queuemanager 属性中，USERID 和 PASSWORD 的用途是什么，其中 WMQ 中标识的 USERID 是“ **Hatrix** ”（这是 Windows 7 帐户的名称）。

我是否必须在 WMQ 中创建一个新的 USERID“ **Hatrix** ”才能使我的代码正常工作？（我不知道怎么做）
提前谢谢，

MQ调试。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T03:00:57.317

第一个问题是 QMgr*必须*能够解析传递给它的 ID。这意味着 ID 要么在本地定义，要么在 QMgr 有权访问的域中定义。通常，在组上授予权限，如果是，那么它也必须由接收 QMgr 解决。

现在的问题是，QMgr 究竟解决了什么问题？当您从 Windows 机器连接到 Windows 机器上的 QMgr 时，通道传递的 ID 是 Windows SID，它是通用唯一标识符 (UUID)，而不是文本字符串。同样，该组解析为 Windows SID。

因此，例如，您可能在两个 Windows 机器上本地定义了一个名为 ADMINISTRATEUR 的 ID，但它仍然失败。错误将显示提供的 ID 是`ADMINISTRATEUR`并且该 ID 未授权，您可以在授权的`dspmqaut`命令中`ADMINISTRATEUR` *清楚*地看到。除了正在发生的事情是，`ADMINISTRATEUR`在一个主机上具有其唯一的 UUID，而另一台主机上的同名帐户具有不同的 UUID，并且 Windows 正在查看 UUID 而不是文本字符串。

当您在多个地方定义了相同的 ID 时，QMgr 必须能够区分它们。当它不能时，就会发生奇怪和不寻常的事情。

例如，假设您定义了一个通道，`MCAUSER('hatrix')`然后运行`setmqaut -p hatrix`。让我们进一步规定，`hatrix`ID 不是在本地定义的，而是在两者中定义的`DOMAINA`，`DOMAINB`并且当命令运行时，`DOMAINA`域服务器首先在搜索路径中。

该`setmqaut`命令将名称解析为`hatrix`定义在`DOMAINA`.

后来由于网络中的正常活动，`DOMAINB`上升到域搜索路径中的第一个位置。现在，当`MCAUSER('hatrix')`尝试连接时，字符串`hatrix`解析`DOMAINB`的UUID 与命令解析的 UUID*不同。*`setmqaut`正常连接的通道突然抛出2035错误。

这个问题的答案是用所需的域来限定`setmqaut`命令和值。`MCAUSER`例如，无论是否在搜索路径中首先，或者即使是在 WMQ 主机服务器上本地定义， `setmqaut -p hatrix@DOMAINA`then都将起作用。（假设这确实是在当然定义。`MCAUSER('hatrix@DOMAINA')``DOMAINA``DOMAINB``hatrix``hatrix``DOMAINA`

通常，您通常不想在`setmqaut`命令上使用 -p 选项。唯一的例外是 Windows 主机，并且仅当 ID 使用域名或服务器名称进行限定时，如上所示。

最后，将通道`MCAUSER`留空是允许您的 Windows ID 流向 MCA 并用于授权检查的原因。您需要意识到的是，没有进行身份验证。是的，Windows 客户端确实会发送其 Windows SID。但是，如果您在 Windows 机器上运行 Linux VM 并与之连接，则没有要传递的 SID，因此 Windows QMgr 回退到解析 ID 的字符串值。这意味着任何人都可以通过从非 Windows 客户端断言所需的 ID 以任何 ID 身份连接到该通道。

因此，使用证书对管理连接进行强身份验证。对于低权限连接，使用 CHLAUTH 规则或出口来设置`MCAUSER`而不是让它通过，然后使用`setmqaut`以确保它`MCAUSER`不是管理的。这意味着永远不要`+set`将 QMgr 和`+crt`队列授予非管理员，并`+setid, +setall`尽可能避免。

更多 WMQ 安全内容，请访问[t-rob.net](https://t-rob.net/links)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T15:45:30.933

使用 setmqaut 将权限分配给“Hatrix”用户 ID，但最好针对组而不是用户 ID 执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-23T11:06:52.523

修复...命令是

setmquat -m qmgrname -t qmgr -p 用户名+allqmi

whrere: qmgrname 是 qmgr 的名称 username 是 eclipse 下正在运行的帐户名，并且该帐户不在禁止列表中。

# sql - 关于生成行号的任务

> ID：16000327
> 
> 赞同：-3
> 
> 时间：2013-04-14T14:50:20.003
> 
> 标签：sql, sql-server, sql-server-2008

```
sno Fname   Sname
1   Vandana Pandey
2   Ritesh  Kumar
3   Kumar   Ritesh
4   Pandey  Vandana
5   Priya   Kapoor 
```

假设我有一个表格，其中插入了这些值。现在我想生成行号。相同名称的行号应相同，输出应为：-

```
sno Fname   Sname   RowNumber
1   Vandana Pandey  1
2   Ritesh  Kumar   2
3   Kumar   Ritesh  2
4   Pandey  Vandana 1
5   Priya   Kapoor  3 
```

因为 Vandana Pandey 的名字在 sno-1 和 4 中是相同的。

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:54:13.040

```
 USE tempdb;
    GO
    IF OBJECT_ID('dbo.name','U') IS NOT NULL DROP TABLE dbo.name;
    CREATE TABLE dbo.name
    (
    sno INT NOT NULL PRIMARY KEY
    ,fname VARCHAR(50)
    ,lname VARCHAR(50)
    )
    INSERT INTO dbo.name(sno,fname,lname)
    VALUES
    (1,'Vandana','Pandey')
    ,(2,'Ritesh','Kumar')
    ,(3,'Kumar','Ritesh')
    ,(4,'Pandey','Vandana')
    ,(5,'Priya','Kapoor');

    WITH cte_names AS
    (
    Select  n.sno
            ,n.fname + ' ' + n.lname AS fname_first
    From    dbo.name n
    UNION ALL
    Select  n.sno
            ,n.lname + ' ' + n.fname AS lnames_first
    From    dbo.name n
    )

    ,cte_dense_rank AS
    (
    Select  cn.sno
            ,cn.fname_first
            ,DENSE_RANK() OVER( ORDER BY cn.sno) AS [Row_Number]
    From    cte_names cn
    )

    , cte_row_num AS
    (
    Select      n.sno,rn.[Row_Number]
    From        dbo.name n
    Inner Join  cte_dense_rank AS rn
        ON      n.fname + ' ' + n.lname = rn.fname_first
    )

    Select      n.sno,n.fname,n.lname
                ,DENSE_RANK() OVER(ORDER BY MIN(mr.[Row_Number])) AS [Row_Number]
    From        dbo.name n
    Inner Join  cte_row_num mr
        ON      n.sno = mr.sno
    Group By    n.sno,n.fname,n.lname
    Order BY    n.sno 
```

# php - 带有组件的 As3 电子邮件表单 php

> ID：16000329
> 
> 赞同：0
> 
> 时间：2013-04-14T14:50:27.790
> 
> 标签：php, forms, actionscript-3, flash, combobox

我需要使用 AS3 创建一个电子邮件表单。来自 AS2 我的知识是有限的。在舞台上，我有一个提交按钮、一个组合框和两个用于电子邮件和密码的文本输入字段。通读一些教程，我知道如何将变量电子邮件和密码发送到 mysql 数据库。我的问题是，我在表单中填充了一些数据的组合框。我怎样才能将那条数据发送到我的数据库？我向您展示了我的代码，抱歉它相当长，但如果您能提供帮助，那就太好了！

```
//Building the variables
var phpVars:URLVariables = new URLVariables();

//Requesting the php file
var phpFileRequest:URLRequest = new URLRequest("php.file");
phpFileRequest.method = URLRequestMethod.POST;

 phpFileRequest.data = phpVars;

 //Building the loader
 var phpLoader:URLLoader = new URLLoader();

 phpLoader.dataFormat = URLLoaderDataFormat.VARIABLES;

 //Variables ready for the processing
 phpVars.email = email.text;
 phpVars.password = password.text;

btn_one.addEventListener(MouseEvent.CLICK, btnHandler);

 //Validate form fields
 function btnHandler(event:MouseEvent):void{
    statusTxt.text =  "" + event.target.data.systemResult;
    trace(event.target.data.systemResult); 
```

}

```
 var statusTxt:TextField = new TextField();
    statusTxt.x = 160.00;
    statusTxt.y = 9.80;
    statusTxt.width = 241.95;
    statusTxt.height = 22.75;
    statusTxt.text = "Please fill out the form below";
    addChild(statusTxt);

    //Wanting to add this combobox to my db
       var persons:Array = new Array();
    persons[0] = "Male";
    persons[1] = "Female";

   combo_box.dataProvider = new DataProvider(persons);
   combo_box.addEventListener(Event.CHANGE, dataHandler);

   function dataHandler(e:Event):void{
      trace(e.target.value);
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T18:30:29.727

你应该试试 AmfPHP。它非常适合填补 Flash 和 PHP 之间的空白。

您可以在 php 中对服务进行编程，并使用 servicebrowser 进行调试。一旦 php 端工作，您可以执行 as3 部分。

[http://www.silexlabs.org/amfphp/](http://www.silexlabs.org/amfphp/)

在过去帮助了我很多

# c# - 在不保留空间的情况下隐藏列宽时居中网格

> ID：16000336
> 
> 赞同：1
> 
> 时间：2013-04-14T14:50:47.553
> 
> 标签：c#, wpf, grid

我有一个`Grid`有两列的。我想隐藏第二列，直到有人点击`Button`第一列中的 a。问题是：

如果我在第二列上将可见性设置为折叠，则不会显示该元素，并且不会在布局中为其保留空间，导致第二列可见时网格不居中。

如果我将可见性设置为隐藏，则不会显示元素，而是为布局中的元素保留空间，使其居中，但在第 1 列可见而第 2 列不可见时显示我不想要的保留空间。

我想要介于两者之间的东西。例如，仅显示第一列并将整个网格居中。当第二列也显示时，再次将整个网格居中。

这有意义吗？

`XAML`

```
<Grid>
    <Grid.ColumnDefinitions>
    <ColumnDefinition Width="*"  />
    <ColumnDefinition Width="auto" />
</Grid.ColumnDefinitions>

<Grid.RowDefinitions>
    <RowDefinition Height="auto" />
    <RowDefinition Height="auto" />
</Grid.RowDefinitions>

    <Label  Content="Show second column on grid" Width="300"
                FontStyle="Italic" 
                FontWeight="Bold"
                Grid.Column="0" 
                Grid.Row="0"
                HorizontalAlignment="center"
                Foreground="White"/>
    <Button Content="Click Me" 
                Width="75" 
                Margin="5" 
                Grid.Column="0" 
                Grid.Row="1" Click="Button_Click" />
    <StackPanel x:Name="showSecondColumn" 
                Grid.Column="1" 
                Grid.Row="0"
                Grid.RowSpan="2"
                Margin="5,0,0,0" 
                Orientation="Vertical" 
                Background="Red" Visibility="Collapsed">
        <Label Content="Second column is shown" 
               Background="Red" />
        <Label Content="Another item inside second column" 
               BorderBrush="Red" 
               BorderThickness="3" 
               Margin="0,5" 
               Background="White" />
    </StackPanel>
</Grid> 
```

`Code behind`

```
private void Button_Click(object sender, RoutedEventArgs e)
{
    showSecondColumn.Visibility = Visibility.Visible;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:57:21.887

尝试不同的方法怎么样？
您可以有两列，一列`width="*"`（以便它占据所有可用空间），并将第二列的宽度设置为`width="Auto"`. 然后在第二列中，您可以将控件/容器`visibility`设置为`collapsed`默认设置。在按钮单击时，您可以根据需要切换它。

# java - BufferStrategy 不缩放 Graphics2D

> ID：16000342
> 
> 赞同：0
> 
> 时间：2013-04-14T14:51:09.043
> 
> 标签：java, awt, scale, paint, graphics2d

我目前正在尝试编写一个简单的平台游戏。我想将图形放大 2/4 倍，这样我就可以从游戏中获得老式的外观和感觉。但是，当我在 Graphics2D 实例上调用 scale 时，什么也没有发生。

```
@Override
public void paint(Graphics g) {

    BufferStrategy bf = this.getBufferStrategy();

    Graphics2D bfg = (Graphics2D) bf.getDrawGraphics();

    mLevel.draw(bfg, this);

    for (GameEntity entity : mGameEntities) {
        entity.draw(bfg, this);
    }

    bfg.scale(2.0, 2.0);

    bf.show();

} 
```

绘制调用基本上只是最终调用 g.drawImage(..)。其他所有内容都正确绘制，所以我不明白为什么它没有将所有内容放大 2 倍。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:00:01.747

@MadProgrammer 是正确的 - 在进行任何绘制调用之前必须缩放 Graphics2D 实例。

```
@Override
public void paint(Graphics g) {

    BufferStrategy bf = this.getBufferStrategy();

    Graphics2D bfg = (Graphics2D) bf.getDrawGraphics();

    bfg.scale(2.0, 2.0);

    mLevel.draw(bfg, this);

    for (GameEntity entity : mGameEntities) {
        entity.step();
        entity.draw(bfg, this);
    }

    bf.show();

} 
```

# javascript - javascript中未定义的返回

> ID：16000344
> 
> 赞同：0
> 
> 时间：2013-04-14T14:51:16.690
> 
> 标签：javascript, jquery

为什么以下 Javascript 函数在警报中返回“未定义”。

这是片段

```
var tests = validateUserSelectedExperType(userSelectedOptioName);
alert(tests); 
```

代码

```
function validateUserSelectedExperType(inp) {
    $.each(splitter.getFirstPaneContent(), function (index, item) {
        var splitterinner = splitter.getFirstPaneContent()[index];
        var getLabel = splitterinner.getFirstPaneContent()[0];
        if (getLabel.getText() == inp) {
            return true;
        } else {
            return false;
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T14:54:08.753

您从嵌套函数返回，而不是从`validateUserSelectedExperType`函数返回。设置一个布尔值并更新该值。最后，返回它：

```
function validateUserSelectedExperType(inp) {
    var flag = false;
    $.each(/* ... */, function (index, item) {
        // ...
        if (getLabel.getText() == inp) {
            flag = true;
            return false;
        }
    });
    return flag;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T14:55:17.773

那是因为您的`return`陈述在`$.each()`匿名函数中。从该函数返回`false`将停止`each`循环。

你必须为 main 函数返回一些东西（我无法理解你的代码逻辑，所以我无法帮助你）。

# python - 从 GUI 类外部访问 GUI 元素

> ID：16000361
> 
> 赞同：2
> 
> 时间：2013-04-14T14:52:44.153
> 
> 标签：python, qt, pyqt, qt-designer

我希望有人可以帮助我解决 Qt 设计师的问题。我正在尝试从调用 GUI 文件的类外部修改 GUI 元素。我已经设置了显示我的程序结构的示例代码。我的目标是`func2`在主程序（或另一个类）中更改主窗口的状态栏。

```
from PyQt4 import QtCore, QtGui
from main_gui import Ui_Main
from about_gui import Ui_About
#main_gui and about_gui are .py files generated by designer and pyuic

class StartQT4(QtGui.QMainWindow):
    def __init__(self, parent=None):
        QtGui.QWidget.__init__(self, parent)
        self.ui = Ui_Main()
        self.ui.setupUi(self)

        self.ui.actionMyaction.triggered.connect(self.func1)
    #Signals go here, and call this class's methods, which call other methods.
        #I can't seem to call other methods/functions directly, and these won't take arguments.

    def func1(self):
    #Referenced by the above code. Can interact with other classes/functions.
        self.ui.statusbar.showMessage("This works!")

def func2(self):
   StartQT4.ui.statusbar.showMessage("This doesn't work!")
    #I've tried many variations of the above line, with no luck.

#More classes and functions not directly-related to the GUI go here; ie the most of the program.

if __name__ == "__main__":
    app = QtGui.QApplication(sys.argv)
    myapp = StartQT4()
    myapp.show()
    sys.exit(app.exec_()) 
```

我正在努力`func2`工作，因为我不希望我的整个程序都属于 StartQT4 类。我已经尝试了该行的许多变体，但似乎无法从此类外部访问 GUI 项。我也尝试过发送信号，但仍然无法正确使用语法。

我的结构可能是伪造的，这就是我发布大部分内容的原因。本质上，我有一个`.py`由 Designer 创建的文件，以及导入它的主程序文件。主程序文件有一个启动 GUI 的类（以及每个单独窗口的一个类）。它在这个类中有信号，调用类中的方法。这些方法从我的主程序或我创建的其他类中调用函数。程序末尾有`if __name__ == "__main__"`代码，用于启动 GUI。这种结构是假的吗？我在网上阅读了很多教程，都不同，或者已经过时了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T15:07:37.887

您的`func1`方法是一种方法 - 因为`ui`是`StartQT4`类中的一个字段，您应该只在同一个类中直接使用它的数据进行操作。在一个类中拥有一个小部件的所有用户界面功能并没有错 - 如果您的代码中只有两个类，这不是一个大问题，但是有几个类来直接引用字段对于维护来说是潜在的噩梦（什么如果您更改`statusbar`小部件的名称？）。

但是，如果您真的想从 编辑它`func2`，那么您需要将`StartQT4`对象的引用传递给它，因为您需要指定需要更改状态栏消息的窗口**实例。**

```
def func2(qtWnd): # Self should go here if func2 is beloning to some class, if not, then it is not necessary
   qtWnd.ui.statusbar.showMessage("This should work now!")

if __name__ == "__main__":
    app = QtGui.QApplication(sys.argv)
    myapp = StartQT4()
    myapp.show()
    func2(myapp)
    sys.exit(app.exec_()) 
```

# ruby-on-rails - ORM 如何将类/属性与 表/字段相关联？

> ID：16000364
> 
> 赞同：1
> 
> 时间：2013-04-14T14:53:22.273
> 
> 标签：ruby-on-rails, ruby, orm

我正在尝试理解 ORM 并寻找以下解释的示例：

**表映射到类，行映射到对象，列映射到对象属性**

我知道表映射到类，但是映射到对象的行和映射到对象属性的列的术语让我感到困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T15:13:50.407

我发现实际的例子最有帮助。试试这个：

# Ruby 和 Rails：

## 创建类（创建表）

```
class House < ActiveRecord::Base
  attr :length, :width, :finish, :price, :available
end 
```

## 创建实例（插入一行）

```
my_house = House.new(:length => 23, :width => 12, :finish => 'siding', 
:price => '$100,000.00', :available => false) 
```

## 获取实例（选择一行）

```
my_house = House.find(1)
puts my_house.length, my_house.width, my_house.price, 
my_house.finish, my_house.available? 
```

# SQL：

## 创建表（创建类）

```
create table house(
length Integer, 
width Integer, 
finish Varchar(255), 
price Text, 
available Boolean)
# Note this is generic SQL, adapt as needed 
# to your implementation - SQLserver, Oracle, mySQL, etc. 
```

## 插入一行（创建实例）

```
insert into house (length,width,finish,price,available)
values            (23, 12, 'siding', '$100,000.00', false) 
```

## 选择一行（获取实例）

```
my_house = select * from house where id = 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T15:02:51.827

因此，以 ActiveRecord 为例，假设您有一个表 posts，其中包含 'id'、'title'、'date' 列。帖子表中有 2 行。

```
posts = Post.all 
```

posts 将是一个长度为 2 的数组。数组中的每个对象都是其中的一行，并且是 Post 类的一个实例。

```
posts[0] 
```

这是数组中的第一个对象，它是表中第一行的表示`posts`。

```
posts[0].title 
```

这将返回`title`第一个对象的属性，即表`title`第一行中的`posts`列。

这有帮助吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-14T15:41:05.513

在我画画的时候，这里出现了一些很好的答案，但仍然希望我的简单答案会有所帮助：（
因为你用'rails'标记了你的问题，我应用了rails代码）

```
class User < ActiveRecord::Base
  attr_accessor :first_name, :email
end

puts User.inspect # => class
puts u = User.create(:first_name => 'name', 
                     :email => 'em@il.com') # => object (class instance)
puts u.name # => object's attribute 
```

D B：
![在此处输入图像描述](https://i.stack.imgur.com/pQ6sL.png)

# c++ - 带 alpha 通道的纹理覆盖背景对象

> ID：16000367
> 
> 赞同：1
> 
> 时间：2013-04-14T14:53:32.913
> 
> 标签：c++, opengl, glsl

在为我的引擎实现广告牌对象时，我遇到了一个问题（下面的屏幕截图）

![在此处输入图像描述](https://i.stack.imgur.com/8jdlR.jpg)

如您所见，广告牌对象覆盖了背景中的所有内容（天空盒似乎是一个例外）。这并不是我希望它工作的方式。我不知道问题出在哪里。

我的片段着色器非常简单：

```
#version 330

uniform sampler2D tex;

in vec2 TexCoord;
out vec4 FragColor;

void main()
{
    FragColor = texture2D(tex, TexCoord);
} 
```

广告牌只是在几何着色器中制作的三角形条。

所有的想法都会很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T15:01:25.140

可能是绘制顺序问题，您需要先绘制不透明对象，然后将 alpha 混合对象重新绘制到前面。或者，如果 alpha 低于某个阈值，您可以启用 alpha 测试或在着色器中丢弃片段。

# iphone - 隐藏默认键盘

> ID：16000368
> 
> 赞同：1
> 
> 时间：2013-04-14T14:53:34.733
> 
> 标签：iphone, ios, objective-c, cocoa-touch, uikit

我是这个编程的新手，我正在使用自定义键盘在 Xcode 4.6 中制作一个应用程序。我做了键盘，它工作得很好，但是当我点击文本框时我需要禁用默认键盘，我该怎么做？就像我说的我是新手，所以任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T16:23:39.600

您只是想隐藏键盘还是还想显示您的自定义键盘？要显示您的自定义键盘而不是默认键盘，请使用`inputView`文本字段的属性并将您的键盘设置为它。`textField.inputView = customKeyBoard`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T15:22:32.023

所以，你有两个选择。

**1-** `UITextField`有一个委托方法称为

`-(void)textFieldDidBeginEditing:(UITextField *)textField`这是您点击 `textField`. 所以你需要在这里隐藏你的默认键盘。

```
-(void)textFieldDidBeginEditing:(UITextField *)textField
{
      [self.yourTextField resignFirstResponder];
} 
```

**2-**有一个通知被称为`UIKeyboardWillShowNotification`立即发布到键盘的显示。因此，您可以`NSNotificationCenter`在收到通知时使用来完成您的工作。所以，在你的`viewDidLoad`方法中：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    [[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(keyboardWillShow:) name:UIKeyboardWillShowNotification object:nil];
} 
```

然后实现你的选择器。

```
-(void)keyboardWillShow:(id)sender
{
    [self.yourTextField resignFirstResponder];
} 
```

我已经测试了他们两个，我认为他们工作得很好。

我希望这会有所帮助。

# mysql - 如何以编程方式创建一对零或一关系 - MySQL？

> ID：16000370
> 
> 赞同：4
> 
> 时间：2013-04-14T14:53:41.667
> 
> 标签：mysql, sql, database-design, foreign-keys, relational-database

我正忙于一个项目，我遇到的绊脚石之一如下：

我有一个预订表，它可能会或可能不会导致开具发票（因为一些不相关的东西，例如取消）。我将如何强制执行一（在预订方面）到零或一（在发票方面）的关系？到目前为止，这是我所拥有的：

```
CREATE TABLE IF NOT EXISTS `booking` (    
   `booking_id` int(11) NOT NULL AUTO_INCREMENT,   
   `voucher_id` int(11) NOT NULL,  
   `pickup_date_time` datetime NOT NULL, ...  
   PRIMARY KEY (`booking_id`,`voucher_id`)  
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ; 
```

然后，稍后：

```
 CREATE TABLE IF NOT EXISTS `invoice` (  
  `booking_id` int(11) NOT NULL,  
  `voucher_id` int(11) NOT NULL,  
  `invoice_number` int(11) NOT NULL,  
  `paid` tinyint(1) NOT NULL,  
  PRIMARY KEY (`booking_id`,`voucher_id`),  
  UNIQUE KEY `invoice_number` (`invoice_number`),  
  KEY `voucher_id` (`voucher_id`)  
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ; 
```

`voucher_id`只是我在系统中使用的其他东西。`invoice_number`也是在PHP中生成的，所以这无关紧要。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T02:16:08.257

这更像是对@thaJeztah 在他的评论中已经提出的建议的系统化，但无论如何你都在这里......

```
CREATE TABLE voucher (
    voucher_id int(11) PRIMARY KEY
   -- Etc...
);

CREATE TABLE booking (
    booking_id int(11) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    voucher_id int(11) REFERENCES voucher (voucher_id),
    pickup_date_time datetime NOT NULL
   -- Etc...
);

CREATE TABLE invoice (
    invoice_number int(11) NOT NULL PRIMARY KEY,
    booking_id int(11) NOT NULL UNIQUE REFERENCES booking (booking_id),
    paid tinyint(1) NOT NULL
   -- Etc...
); 
```

**最小基数：**可以有没有发票的预订。但是，没有预订就不可能有发票（由于非 NULL 字段上的 FK `invoice.booking_id`）。

**最大基数：**由于 UNIQUE 约束，一个预订不能连接到多个发票`invoice.booking_id`。一张发票不能连接到多个预订，因为一个字段（一行）不能包含多个值。

因此，预订和发票之间的最终关系是“一对零或一”。

* * *

或者，将所有内容放在一个表中，该表具有可空字段，随着预订的进行逐渐填充。

# php - 不区分大小写的排序数组

> ID：16000373
> 
> 赞同：2
> 
> 时间：2013-04-14T14:53:46.877
> 
> 标签：php, arrays, sorting

前段时间在查看数组排序的线程时，我想出了以下内容：

```
public function sortList(&$objects, $on, $order = 'ASC') {
    $comparer = ($order === 'DESC') 
    ? "return -strcmp(\$a->{$on},\$b->{$on});" 
    : "return strcmp(\$a->{$on},\$b->{$on});"; 
usort($objects, create_function('$a,$b', $comparer)); 
return $objects;
} 
```

上面的代码工作正常，唯一的问题是它区分大小写，而我希望它不区分大小写。不重写整个事情有可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-14T14:58:12.257

使用[strcasecmp](http://www.php.net/manual/en/function.strcasecmp.php)代替 strcmp。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T06:49:09.363

已经给出了使用的答案[`strcasecmp()`](http://php.net/strcasecmp)，但是通过使用适当的闭包，您的函数可以变得更加简洁：

```
public function sortList(array &$objects, $on, $order = 'ASC') 
{
    $multiplier = $order == 'ASC' ? 1 : -1;

    usort($objects, function($a, $b) use ($on, $multiplier) {
        return $multiplier * strcasecmp($a->{$on}, $b->{$on});
    });

    return $objects;
} 
```

# android - 无法在登录 Twitter 中恢复 Activity..java.lang.NullPointerException

> ID：16000377
> 
> 赞同：0
> 
> 时间：2013-04-14T14:53:58.243
> 
> 标签：android, twitter, nullpointerexception, twitter-oauth, twitter4j

我尝试编写一个可以在 Twitter 上登录的应用程序。我的图书馆是 Twitter4j。`onResume`代码在调用该方法之前一直有效。这

`exception(Unable to resume Activity...NullPointerException)`在方法的这一行

`onResume():`

```
AccessToken acc = twitter.getOAuthAccessToken(requestToken,verifier); 
```

但我不明白我的错误在哪里。有人可以帮助我吗？？

```
public class MainActivity extends Activity {

    private Twitter twitter;
    private RequestToken requestToken;
    private static RequestToken re;
    final public static String CALLBACK_URL = "app://casa";
    private RequestToken priv = null;

    @SuppressLint("NewApi")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Button b = (Button) findViewById(R.id.button1);

        b.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                new updateTwitterStatus().execute();

            }
        });

    }

    class updateTwitterStatus extends AsyncTask<Void, Void, String> {

        @Override
        protected String doInBackground(Void... params) {
            String testStatus = "prova tweet ";

            ConfigurationBuilder cb = new ConfigurationBuilder();

            cb.setDebugEnabled(true)
                    .setOAuthConsumerKey("******")
                    .setOAuthConsumerSecret(
                            "*******");

            try {
                TwitterFactory tf = new TwitterFactory(cb.build());
                twitter = tf.getInstance();
                Log.i("bauu", "miao");
                requestToken = twitter.getOAuthRequestToken(CALLBACK_URL);
                String authUrl = requestToken.getAuthenticationURL();

                startActivity(new Intent(Intent.ACTION_VIEW,
                    Uri.parse(requestToken.getAuthenticationURL())));

                return authUrl;

            } catch (Exception e) {
                e.printStackTrace();
            }
            return null;
        }

        @Override
        protected void onPostExecute(String s) {

        }

    }

    @Override
    public void onResume() {
        super.onResume();
        Uri uri = this.getIntent().getData();
        Log.i("callback funziona", "ciao");
        if (uri != null && uri.toString().startsWith(CALLBACK_URL)) {
            final String verifier = uri.getQueryParameter("oauth_verifier");

            // c 
            try { // the next line is the error's line
                AccessToken acc = twitter.getOAuthAccessToken(requestToken,
                        verifier);
            } catch (TwitterException e) {

                e.printStackTrace();
            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:38:26.403

`Twitter`您仅在用户单击按钮后创建实例，但尝试`onResume()`在它等于的方法中使用它`null`。阅读活动生命周期以避免此类错误[https://developer.android.com/reference/android/app/Activity.html](https://developer.android.com/reference/android/app/Activity.html)

# python - 从 Python 中的文本文件中获取某些单词和短语

> ID：16000380
> 
> 赞同：1
> 
> 时间：2013-04-14T14:54:16.927
> 
> 标签：python, string, list, for-loop

我有这段代码，它通过一个文本文件，逐行抓取它并将其拆分为单独的单词。这一切都很好，但是在我的文本文件中，我有某些以“-”开头和结尾的单词和短语，例如，“-foo-”或“-foo bar-”。现在，它们被拆分为“-foo”和“bar-”的代码。我理解为什么会发生这种情况。

我的计划是抓取那些以 '-' 开头和结尾的实例，将它们存储到一个单独的列表中，然后用户将这些短语中的每一个更改为新的内容，将它们放回列表中。如果它是两个单独的单词，我如何告诉它抓取某个短语？

```
def madLibIt(text_file):
    listOfWords = [] #creates a word list
    for eachLine in text_file: #go through eachLine, and split it into 
        #seperate words
        listOfWords.extend(eachLine.split())
 print listOfWords 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T15:02:03.863

不带分隔符的调用`str.split()`会按空格分隔文本，因此您不使用`-`分隔符。

您可以[`re.findall()`](http://docs.python.org/2/library/re.html#re.findall)与模式一起使用`(-.+?-)`：

```
matches = re.findall(r'(-.+?-)', 'This is a -string- with a -foo bar-')
print(matches) # ['-string-', '-foo bar-'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T15:28:53.817

这个正则表达式准确地抓住了你想要的东西。

```
import re

s = 'This is a string with -parts like this- and -normal- parts -as well-'

print re.findall(r'((?:-\w[\w\s]*\w-)|(?:\b\w+\b))', s)

>>> 
['This', 'is', 'a', 'string', 'with', '-parts like this-', 'and', '-normal-', 'parts', '-as well-'] 
```

# java - 不能将列表的元素用作对象构造函数中的参数

> ID：16000381
> 
> 赞同：0
> 
> 时间：2013-04-14T14:54:17.467
> 
> 标签：java, arrays, object, for-loop, constructor

```
 final int NUM_OF_SERVERS = 2;

    List<Database> databases = new ArrayList<Database>();

    for (int i = 1; i < NUM_OF_SERVERS; i++){

        Database database = new Database("server" + i + ".txt");
        databases.add(database);

    }

    List<Server> servers = new ArrayList<Server>();

    for (int i = 1; i < NUM_OF_SERVERS; i++){

        **Server server = new Server(databases[i-1]);** //the error is here
    } 
```

我有一个数据库列表，我想使用数据库列表的元素作为构造函数的参数来创建一个服务器列表，但它会引发此错误：“表达式的类型必须是数组类型，但它解析为列表”将鼠标悬停在突出显示的行上时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T14:55:33.197

问题是那`databases`是`List<Database>`- 而不是`Database[]`. 因此表达式`databases[i-1]`无效。这与您调用构造函数这一事实无关 - 这与您访问列表中元素的方式无关。你要`databases.get(i - 1)`

```
for (int i = 1; i < NUM_OF_SERVERS; i++) {
    Server server = new Server(databases.get(i-1));
    // Presumably do something with server here
} 
```

不过，在我看来，您遇到了一个错误的错误-您最终只会得到`NUM_OF_SERVERS - 1`服务器。我怀疑你会更好：

```
final int NUM_OF_SERVERS = 2;

List<Database> databases = new ArrayList<Database>();

// Note the change to starting index
for (int i = 0; i < NUM_OF_SERVERS; i++) {
    Database database = new Database("server" + i + ".txt");
    databases.add(database);
}

List<Server> servers = new ArrayList<Server>();
// Note the change to starting index *and* the use of i rather than i - 1 
for (int i = 0; i < NUM_OF_SERVERS; i++) {
    Server server = new Server(databases.get(i));
    // Use server here
} 
```

或者更好的是，为第二个循环使用增强的 for 循环：

```
for (Database database : databases) {
    Server server = new Server(database);
    // Use server here
} 
```

# android - android.widget.ProgressBar 不能转换为 android.widget.LinearLayout

> ID：16000385
> 
> 赞同：3
> 
> 时间：2013-04-14T14:54:46.483
> 
> 标签：android, progress-bar, android-linearlayout

**给定**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".InboxActivity" >

    <!-- refresh button -->

    <Button
        android:id="@+id/button_refresh_inbox"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:onClick="refreshInbox"
        android:text="@string/refresh_inbox" />

    <LinearLayout
        android:id="@+id/inbox_container"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/button_refresh_inbox" >

        <ProgressBar
            android:id="@+id/inbox_prog_bar"
            style="@android:style/Widget.ProgressBar.Small"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
    </LinearLayout>

    <TextView
        android:id="@+id/empty_inbox"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/inbox_container"
        android:textIsSelectable="false" />

</RelativeLayout> 
```

**结果**：

当我运行应用程序时出现错误

```
E/AndroidRuntime(930): java.lang.ClassCastException: android.widget.ProgressBar
cannot be cast to android.widget.LinearLayout 
```

有谁知道如何解决这一问题？

**目标**：

在收件箱加载时显示进度条；然后让收件箱内容填充线性布局。

**背景**：

一切都运行良好。我只是认为在收件箱加载时最好有一个进度条而不是空白屏幕。添加进度条导致错误。（我真的想在布局文件中指定进度条，而不是以编程方式）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-25T16:30:14.187

刷新和项目 > 清理您的两个项目。

这与自动生成 R 引用时所做的一些混乱有关，在清理时它将创建一个具有正确 id 引用的新引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T16:14:20.870

当它不是基类时，为什么要转换为 LinearLayout？

```
java.lang.Object

↳ android.view.View

↳ android.widget.ProgressBar 
```

# maven - maven 解决安装到本地 maven 存储库的 jar/依赖项的问题

> ID：16000386
> 
> 赞同：0
> 
> 时间：2013-04-14T14:54:47.207
> 
> 标签：maven

我通过在本地安装了一个 jar 文件

```
mvn install:install-file  
    -Dfile=/usr/home/myname/Downloads/com/google/appengine/appengine-mapper/1.0/appengine-mapper-1.0.jar \
       -DgroupId=com.google.appengine \
       -DartifactId=appengine-mapper \
       -Dversion=1.0 \
       -Dpackaging=jar \ 
```

这是成功的。

尝试 maven 编译时，出现以下错误。

无法解析项目 myproject:war:1.0-SNAPSHOT 的依赖项：未能在[http://google-api-client-libraries.appspot.com/mavenrepo](http://google-api-client-libraries.appspot.com/mavenrepo)中找到 com.google.appengine:appengine-mapper:jar:1.0已缓存在本地存储库中，直到 google-api-services 的更新间隔已过或强制更新，才会重新尝试解析。

我的 pom.xml 文件：...

```
<repositories>
  <repository>
    <id>google-api-services</id>
    <url>http://google-api-client-libraries.appspot.com/mavenrepo</url>
  </repository>
</repositories>

<dependencies>
    <!-- Compile/runtime dependencies -->    
        <groupId>com.google.appengine</groupId>
        <artifactId>appengine-mapper</artifactId>
        <version>1.0</version>
    </dependency> 
```

...

我究竟做错了什么。Maven 仍在尝试从远程存储库中提取依赖项。

# php - 按序列化值搜索

> ID：16000391
> 
> 赞同：1
> 
> 时间：2013-04-14T14:55:32.367
> 
> 标签：php, mysql

这是我用于从数据库中获取数据的查询

```
SELECT
    product_description.name as name, 
    product.image as iurl
FROM
    product_description, product
WHERE
    product_description.product_id = product.product_id
    AND product.product_id
    AND product.product_id = '33'; 
```

1.  为什么这个查询会产生双重结果？

2.  我想通过存储在数据库中的多个值（id）自动搜索，而不是手动添加`AND product.product_id='?'`部分。值以**序列化**形式存储。

就像是

```
... AND product.product_id in (setting.value WHERE key='featured'); 
```

我知道查询不正确，只是想显示我想要的。

**桌面设置'：**

```
value    | key
-------------------
23,43,28 | featured 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:05:13.907

这在某种程度上打破了关系范式，您应该拥有三个值为 23、43 和 28 的条目。

然后我再次猜测字段`value`是一个 varchar（你知道“值”和“键”是 mysql 的保留字吗？）所以你可能想查看字符串内部以在字段中找到模式“,23”。就像是 ：`WHERE CONCAT(',', field_value, ',') LIKE "%,23,%"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T16:19:22.380

## 解决方案

要获取`products`存储在`settings`表中的所有内容（逗号分隔）的详细信息，您可以使用[**FIND_IN_SET()**](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)

```
SELECT
    product_description.description, 
    product.name,
    product.id
FROM
    product_description, product
WHERE
    product_description.id = product.id
    AND FIND_IN_SET(product.id, ( SELECT value FROM setting where `key` = 'featured' ) ); 
```

[**SQLFiddle**](http://sqlfiddle.com/#!9/14042/1)

**注意：**您看到重复条目的原因可能是因为特定产品有多个描述选项，您可以使用[**GROUP_CONCAT**](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)处理此问题 以下应该有效

## 结语

你的**数据库设计**不好，应该是这样的

```
product             -- All my products go here
product_details     -- Details of all the products ( A product could have multiple details)
categories          -- eg: Featured, Seasonal
product_categories  -- association of product to categories 
```

# jquery - 如何使用 jquery validate 比较两个下拉值

> ID：16000393
> 
> 赞同：1
> 
> 时间：2013-04-14T14:55:43.040
> 
> 标签：jquery, jquery-validate

我有两个下拉列表（开始时间和结束时间），我想使用 jquery validate 进行验证，确保结束时间大于开始时间，但我无法让它工作。无论我放什么，它总是显示错误消息。有人可以看看我的代码并告诉我我做错了什么吗？

[JSFIDDLE 示例在这里](http://jsfiddle.net/uVnQ4/12/)

```
<label for="start_time">Start Time:<font color="red">*</font></label>
            <select name = 'start_time_hour'>
                <option value = '10'>10</option>
                <option value = '11'>11</option>
                <option value = '12'>12</option>
            </select>
<label for="end_time_hour">End Time:<font color="red">*</font></label>
            <select name = 'end_time_hour'>
                <option value = '10'>10</option>
                <option value = '11'>11</option>
                <option value = '12'>12</option>
            </select> 
```

javascript

```
$(document).ready(function(){
    jQuery.validator.addMethod("le", function(value, element, param) {
    return this.optional(element) || value <= $(param).val();
    }, "less"); 
    jQuery.validator.addMethod("ge", function(value, element, param) {
    return this.optional(element) || value >= $(param).val();
    }, "greater");  
$("#add").validate({
    event: "keyup",
    highlight: function(element, errorClass, validClass) {
            $(element).addClass(errorClass).removeClass(validClass);
        },
rules:{
        start_time_hour:{le: "#end_time_hour"},
    end_time_hour:{ge: "#start_time_hour"},
    },
messages:{
    start_time_hour:{le: "Must be less than end time"},
    end_time_hour:{ge: "Must be greater than start time"},
},
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T16:09:23.057

问题是因为您混合了 id 属性和 name 属性。参考：[http](http://api.jquery.com/id-selector/) ://api.jquery.com/id-selector/和[http://api.jquery.com/attribute-equals-selector/](http://api.jquery.com/attribute-equals-selector/)

通过在选择器中指示 # ，您是在告诉选择具有给定 id 属性的单个元素，但您使用的是 name 属性。

因此，为了不引用不存在的 id 属性，您必须将规则代码更改为：

```
rules:{
    start_time_hour:{le: "end_time_hour"},
    end_time_hour:{ge: "start_time_hour"},
    } 
```

和您的验证人：

```
jQuery.validator.addMethod("le", function(value, element, param) {
    return this.optional(element) || value <= $("select[name="+param+"]").val();
}, "less"); 
jQuery.validator.addMethod("ge", function(value, element, param) {
    return this.optional(element) || value >= $("select[name="+param+"]").val();
}, "greater"); 
```

（查看选择器）

这是一个工作小提琴：http: [//jsfiddle.net/uVnQ4/13/](http://jsfiddle.net/uVnQ4/13/)

# javascript - IF 语句替换脚本

> ID：16000395
> 
> 赞同：-1
> 
> 时间：2013-04-14T14:55:47.603
> 
> 标签：javascript, jquery, html, css

我购买了一个我正在尝试编辑的响应式网站模板。我想使用`<script>`代码放置一个从另一个附属网站获得的搜索框，该搜索框具有设定的宽度和高度，并且没有响应。我的网站在桌面版中看起来不错，但在移动版中却不行。如何将 IF 语句添加到我的 html 文件`<script>`中，以根据查看器的屏幕大小将搜索框替换为另一个搜索框。

如果访问者正在从移动设备浏览，我只是想`<script .....></script>`用另一个替换。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:58:45.680

您将需要一种方法来查看您是否正在浏览网站。Wurfle (PHP) 是实现这一目标的好方法。

如果只是图形，您还可以使用“媒体”属性更改样式。

# java - 带有多个按钮的表单

> ID：16000399
> 
> 赞同：0
> 
> 时间：2013-04-14T14:56:03.660
> 
> 标签：java, javascript, html, forms

我有一个带有提交按钮和输入按钮的表单。我想在表单提交时向 servlet 发送一个参数。

```
<form action="postValues">
  <table>....</table>
  <input type="submit" name"event" value="add"/>
  <input type="button" name="event" value="refresh" onclick="getValues()"/>
</form> 
```

当我在 servlet 中单击提交时，我在请求参数中得到“事件”值，但在 servlet 中单击刷新时，我没有在刷新参数中得到“事件”值。我需要那个 javascript 函数“getValues”，我需要在其中获取表格单元格的值。

当此输入类型为按钮时，如何将参数发送到 servlet？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:11:55.000

如果您单击“刷新”按钮，则“getValues()”javascript 函数负责与服务器通信，它不会提交表单。因此，您需要单独发送按钮值。你可以试试这个

```
<input type="button" name="event" value="refresh" onclick="getValues(this)"/> 
```

因此在 getValues 函数中，您将获得此事件按钮引用，因此您可以在查询字符串上发送按钮的值。

例如：

```
function getValues(button){
    var buttonValue = button.value;
    //send this value in your query string.
} 
```

# ios - UILabel 的位置以兼容 iPhone 4 和 iPhone 5

> ID：16000400
> 
> 赞同：0
> 
> 时间：2013-04-14T14:56:14.467
> 
> 标签：ios, xcode, iphone-5, iphone-4

为我的应用程序制作 UILabel 的简单代码是

```
UILabel *todaysGame = [[UILabel alloc] initWithFrame:CGRectMake(10, 60, 300, 250)];
todaysGame.text = @"Today's Game";
todaysGame.backgroundColor = [UIColor grayColor];
[self.view addSubview:todaysGame]; 
```

这非常适合我的 iPhone 5 屏幕高度，但在 iPhone 4 屏幕上搞砸了。我试图阅读 iOS 6 的自动布局功能，但真的不明白该怎么做。我不想使用 Storyboard 或 NIB，我想以编程方式进行。如何定位与 iPhone 4 和 5 的屏幕高度兼容的 UI 元素。

我也试着看看这是否有帮助而不是使用数字

```
screenBound = [[UIScreen mainScreen] bounds];
screenSize = screenBound.size;
screenWidth = screenSize.width;
screenHeight = screenSize.height; 
```

并在 CGRectMake() 方法中使用了“screenHeight”变量。

我正在使用 Xcode 4.6 和 iPhone 5 (iOS 6.1.3) 和 iPhone 4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:02:42.323

`- (void)viewWillLayoutSubviews`您可以在您的方法中以编程方式设置框架`UIViewController`或设置`autoresizingMask`视图属性。

设置框架：

```
- (void)viewWillLayoutSubviews {
    if ([UIScreen mainScreen].bounds.size.height == 568) {
        self.label.frame = CGRectMake(0, 0, 320, 100); // for iPhone 5
    } else {
        self.label.frame = CGRectMake(0, 0, 320, 60);
    }
} 
```

或设置`autoresizingMask`在`- (void)viewDidLoad`：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    CGFloat height = self.view.bounds.size.height * 0.2 // 20% of parent view
    self.label.frame = CGRectMake(0, 0, 320, height);
    self.label.autoresizingMask = UIViewAutoresizingFlexibleHeight;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T15:09:19.880

你想要的效果是什么？相同高度、可变高度、上边距等？

您希望标签始终是那个大小吗？如果是这样，您可以关闭自动调整大小

```
label.translatesAutoresizingMaskIntoConstraints = NO; 
```

如果您希望标签与您的视图高度相同...

```
NSLayoutConstraint *constraint = [NSLayoutConstraint constraintWithItem:label attribute:NSLayoutAttributeHeight relatedBy:NSLayoutRelationEqual toItem:self.view attribute:NSLayoutAttributeHeight multiplier:1.0 constant:0.0];
[self.view addConstraint:constraint]; 
```

# java - 从 Map 中的对象中检索值

> ID：16000401
> 
> 赞同：0
> 
> 时间：2013-04-14T14:56:14.590
> 
> 标签：java, object, map

我正在编写一个解释器程序，我现在被困住了。有一个整数和 MJObjects 的映射：

```
private Map<Integer, MJObject> objectHeap;

objectHeap = new HashMap<Integer, MJObject>(); 
```

MJObject 类如下所示：

```
MJObject(SymbolTable symTab, String className) 
```

我创建了一个新的 MJObject 并将其存储在带有引用整数的 Map 中。

```
public Integer allocClassInstance(String className)
MJObject object = new MJObject(symTab, className);
objectHeap.put(nextFree, object); 
```

然后从另一个仅使用 MJObject 引用的方法中，我需要检索 MJObject 中的类名。我怎样才能做到这一点？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T14:59:20.870

> 然后从另一个仅使用 MJObject 引用的方法中，我需要检索 MJObject 中的类名。我怎样才能做到这一点？

如果你已经有了，`MJObject`那么地图是无关紧要的。假设`MJObject`它以某种方式构建的类名可以访问，你只想要这样的东西：

```
String className = mjObject.getClassName(); 
```

如果您*实际上是*在尝试获取与之关联的映射中的键，则`MJObject`必须遍历映射 - 或者可能创建具有反向映射 ( to )的*第二个映射。*`MJObject``Integer`

# java - 处理来自 android 客户端的 POST

> ID：16000406
> 
> 赞同：0
> 
> 时间：2013-04-14T14:56:36.263
> 
> 标签：java, android, playframework-2.0, httpclient

我正在使用播放！框架（2.0.4）作为我的android应用程序的休息服务。我想从 android 发送 POST 请求，但从路由接收错误消息。这就是我的路由文件的样子

```
POST     /addText/:txt                               controllers.Application.addText(txt: String) 
```

和来自 android 的 POST 请求

```
int response = HttpRequest.post("localhost:9000/addtext/").send("txt=some text").code(); 
```

我正在使用 Http Request[库](https://github.com/kevinsawicki/http-request)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:15:49.813

尝试：

```
POST     /addText                               controllers.Application.addText 
```

在控制器中：

```
public static Result addText() {
    String txt = request().body().asFormUrlEncoded().get("txt")[0];
    return ok(...);
} 
```

见： http: [//playlatam.wordpress.com/2012/05/21/play-framework-posted-values-revisited/](http://playlatam.wordpress.com/2012/05/21/play-framework-posted-values-revisited/)

或者`DynamicForm`

```
public static Result addText() {
    DynamicForm df = form.bindFromRequest();
    String txt = df.get("txt");
    return ok(...);
} 
```

最后，您还可以声明一些模型，然后从请求中将其全部绑定（当您要验证传入数据并稍后将其保存到数据库时，这是最好的选择）：[播放文档](http://www.playframework.com/documentation/2.0.4/JavaForms)

# css - HTML & CSS：#wrapper 背景图像不出现

> ID：16000409
> 
> 赞同：0
> 
> 时间：2013-04-14T14:57:00.953
> 
> 标签：css, html, image, wrapper

所以我事先在这里进行了搜索，试图找到我的问题的答案，但我找到的所有解决方案都没有给我任何结果。基本上，我的 div#wrapper 中有一个我想显示的图像，但除非我用文本填充相应 div 之后的区域，否则它不会显示。

我有溢出：自动；在我的#wrapper 中，因为我在后续的 div 中有浮动。

CSS 文件：

```
@media only screen and (min-width: 25em) {
   html {
   background: url(images/gridbg.jpg) repeat fixed center top;
   }
}

@media only screen and (max-width:25em) {
    html {
    background-color:#0c0c1f;
    }
}

img {
    border:0px;
}

textarea:focus, input:focus{
    outline: none;
}

#wrapper {
    margin:0 auto;
    width:60em;
    overflow:auto;
    background-image:url(images/cont-bg.png);
}

#content {
    text-align:justify;
    position:fixed;
    width:59em;
    height:100%;
    overflow:auto;
    padding-top: 0.4em;
    padding-bottom: 0.4em;
    padding-left: 0.4em;
    padding-right: 0.4em;
    outline:none;
    z-index:2;
    margin-top:12em;
}

#homeNav {
    position:fixed;
    float:left;
    margin-left:0.65em;
    margin-top:0.65em;
    z-index:3;
}

#primaryNav {
    z-index:2;
    float:right;
    margin-left:28em;
    margin-top:1em;
    position:fixed;
}

#navGFX {
    background-image:url(images/navGFX.png);
    background-repeat:no-repeat;
    width:60em;
    height:8em;
    float:left;
    position:fixed;
    z-index:1;
    margin-top:3em;
} 
```

HTML 文件：

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Ag Design</title>
<link href="main.css" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="scrollstyles.css"/>

<script type='text/javascript' src="js/flexcroll.js"></script>
</head>

<body>
<div id="wrapper">

<div id="navGFX">
<div id="homeNav"><a href="index.html"><img src="images/buttons/btn_logo.png"></a></div>
<div id="primaryNav">
<a href="index.html"><img src="images/buttons/btn_home.png"></a>
<a href="index.html"><img src="images/buttons/btn_link1.png"></a>
<a href="index.html"><img src="images/buttons/btn_link2.png"></a>
<a href="index.html"><img src="images/buttons/btn_link3.png"></a>
<a href="index.html"><img src="images/buttons/btn_link4.png"></a>
</div>
</div>

<div id="content" class="flexcroll">
This area is full of filler text
</div>
</div>
</body>
</html> 
```

我没有最模糊的线索我做错了什么。有人有想法么？：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T04:38:14.423

只需删除 CSS：

```
position: fixed; 
```

从`#wrapper`id 和背景图像将出现

# php - 执行操作时无法在 PHP 中计算时间差

> ID：16000411
> 
> 赞同：0
> 
> 时间：2013-04-14T14:57:15.220
> 
> 标签：php, time, datediff

```
$timeFromMysql = strtotime($createdtime);
$currenTime = SPRequest::now();;

if ($diff = abs( strtotime( $timeFromMysql ) - strtotime( $currenTime )  > 30*24*60*60) {  
  ACTION
} 
```

我只是想知道我这样做是否正确。似乎该动作是在没有时间检查的情况下完成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T14:58:58.083

你的父母不匹配。

```
if ($diff = abs( strtotime( $timeFromMysql ) - strtotime( $currenTime ) )  > 30*24*60*60) {  
 //ACTION
} 
```

进一步分解：

```
if (
  $diff = abs(
    strtotime( $timeFromMysql ) - strtotime( $currenTime )
  )  > 30*24*60*60)
{  
 //ACTION
} 
```

数一数你的括号并确保它们匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T15:01:43.857

我收到以下错误：

PHP 通知：DateInterval 类的对象无法在规则 128 中转换为 int blabla

这是代码（128）：

```
if ( $difference > 30*24*60*60) { 
```

有关更多信息，这里是一个更大的代码：

```
$timeFromMysql = strtotime($createdtime);
$currenTime = SPRequest::now();

function format_interval(DateInterval $interval) {
    $result = "";
    if ($interval->y) { $result .= $interval->format("%y years "); }
    if ($interval->m) { $result .= $interval->format("%m months "); }
    if ($interval->d) { $result .= $interval->format("%d days "); }
    if ($interval->h) { $result .= $interval->format("%h hours "); }
    if ($interval->i) { $result .= $interval->format("%i minutes "); }
    if ($interval->s) { $result .= $interval->format("%s seconds "); }
    return $result;
}

$first_date = new DateTime($createdtime);
$second_date = new DateTime($currenTime);

$difference = $first_date->diff($second_date);

//echo format_interval($difference);
//echo $createdtime;
//echo $currenTime;

if ( $difference > 30*24*60*60) { 
    // load the apicall
    $xml = simplexml_load_file($api);
} 
```

回声工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T14:59:31.653

您不检查是否等于 - 您将值分配给 $diff，这始终是正确的。所以：

```
$diff == 
```

# java - 如何将 Java 应用程序与系统 Web 浏览器连接起来？

> ID：16000413
> 
> 赞同：-5
> 
> 时间：2013-04-14T14:57:20.330
> 
> 标签：java, url, browser

我想将我的 java 应用程序连接到系统 Web 浏览器（无论存在哪些浏览器和多少浏览器）。

我想要的只是当我的应用程序运行用户试图通过系统中的任何浏览器访问的任何 URL 时，我的应用程序必须捕获该 URL。我怎么能用java做到这一点？如果可能的话，但将它连接到库或其他 API 对我来说没问题。

ps 我只会在**Windows**上运行这个应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T22:42:48.657

```
try{     
    java.awt.Desktop.getDesktop().browse(uri);
catch(Exception e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T15:05:27.237

根据操作系统，这会有所不同，例如在 Windows`start http://www.example.com`上将打开浏览器，而在 OSX 中，您必须执行`open http://www.example.com`. 这些是您必须从 Java 调用的系统命令。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-14T16:22:54.877

您可以使用跨平台支持创建 Web 浏览器：您只需要：

*   AWT 和 Swing 等用户界面 api
*   一个网络 API(java.net)
*   文件和流处理 API(java.io)

所有这些都在 J2SE 库中可用，但您将需要一些额外的 api，例如 HTML 渲染器 api。在android中使用WebKit

# html - 如何使用 Kendo UI Web 布局简单、对齐的表单

> ID：16000420
> 
> 赞同：4
> 
> 时间：2013-04-14T14:58:25.087
> 
> 标签：html, css, kendo-ui

刚刚进入 Kendo UI Web，并试图找出布局简单表单的最佳方法。坦率地说，我对缺乏执行这样一项基本任务的文档感到有点震惊。我正在使用 kendo.bootstrap 主题并试图弄清楚如何组织一个简单的表单，其中标签位于一列中，相关的输入位于另一列中，两者都正确对齐等。

如果您按照文档创建带有文本框控件和标签的简单表单，则文本框控件无法正确对齐……即使在它们的示例中也是如此。

使用以下代码来演示这一点：

```
<div>
<ul class="forms">
    <li>
        <label class="k-label">Username:</label>
        <input type="text" class="k-textbox" />         
    </li>
    <li>
        <label class="k-label">Password:</label>
        <input type="text" class="k-textbox" />         
    </li>
</ul> 
```

不确定是否需要 k 标签，看到它并认为我会尝试它......没有帮助。

我查看了所有样式文档，但没有看到任何有助于创建简单但样式化的表单的内容。Kendo UI Web 是否提供任何固定或流动的网格系统来帮助布局表单，或者用户是否对此负责？谢谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T00:41:12.493

据我所知，Kendo 不提供任何表单布局（但 Kendo Mobile 提供）。那将取决于用户。一般来说，为标签提供 CSS 固定宽度很简单，如下[所示](http://demos.kendoui.com/web/validator/index.html)。

```
 .k-textbox {
                width: 11.8em;
            }

            label {
                display: inline-block;
                width: 90px;
                text-align: right;
            } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-06T18:28:49.963

剑道确实提供了这一点。您只需要使用 kendo.common.min.css 中的类 editor-label 和 editor-field

例子：

```
<div class="editor-label">
    @Html.LabelFor(model => model.Description)
</div>
<div class="editor-field">
    @Html.TextBoxFor(model => model.Description, new { style="width:500px;" })
    @Html.ValidationMessageFor(model => model.Description)
</div> 
```

# java - 如何从java中的json url读取数据？

> ID：16000422
> 
> 赞同：0
> 
> 时间：2013-04-14T14:58:27.550
> 
> 标签：java, json

我遇到了以下教程： [http ://www.mkyong.com/java/how-to-convert-java-object-to-from-json-jackson/](http://www.mkyong.com/java/how-to-convert-java-object-to-from-json-jackson/)

但是本教程展示了如何将 json 转换为 Java 对象，当 json 文件存储在用户的 pc 上时。我想做的是，当我转到以下链接时：

http://api.rottentomatoes.com/api/public/v1.0/movies.json?apikey=[MyApiKey]&q=Toy+Story+3&page_limit=1

它返回我以下 json 数据：

```
{
  "total": 2,
  "movies": [{
    "id": "770672122",
    "title": "Toy Story 3",
    "year": 2010,
    "mpaa_rating": "G",
    "runtime": 103,
    "critics_consensus": "Deftly blending comedy, adventure, and honest emotion, Toy Story 3 is a rare second sequel that really works.",
    "release_dates": {
      "theater": "2010-06-18",
      "dvd": "2010-11-02"
    },
    "ratings": {
      "critics_rating": "Certified Fresh",
      "critics_score": 99,
      "audience_rating": "Upright",
      "audience_score": 91
    },
    "synopsis": "Pixar returns to their first success with Toy Story 3\. The movie begins with Andy leaving for college and donating his beloved toys -- including Woody (Tom Hanks) and Buzz (Tim Allen) -- to a daycare. While the crew meets new friends, including Ken (Michael Keaton), they soon grow to hate their new surroundings and plan an escape. The film was directed by Lee Unkrich from a script co-authored by Little Miss Sunshine scribe Michael Arndt. ~ Perry Seibert, Rovi",
    "posters": {
      "thumbnail": "http://content6.flixster.com/movie/11/13/43/11134356_mob.jpg",
      "profile": "http://content6.flixster.com/movie/11/13/43/11134356_pro.jpg",
      "detailed": "http://content6.flixster.com/movie/11/13/43/11134356_det.jpg",
      "original": "http://content6.flixster.com/movie/11/13/43/11134356_ori.jpg"
    },
    "abridged_cast": [
      {
        "name": "Tom Hanks",
        "characters": ["Woody"]
      },
      {
        "name": "Tim Allen",
        "characters": ["Buzz Lightyear"]
      },
      {
        "name": "Joan Cusack",
        "characters": ["Jessie the Cowgirl"]
      },
      {
        "name": "Don Rickles",
        "characters": ["Mr. Potato Head"]
      },
      {
        "name": "Wallace Shawn",
        "characters": ["Rex"]
      }
    ],
    "alternate_ids": {"imdb": "0435761"},
    "links": {
      "self": "http://api.rottentomatoes.com/api/public/v1.0/movies/770672122.json",
      "alternate": "http://www.rottentomatoes.com/m/toy_story_3/",
      "cast": "http://api.rottentomatoes.com/api/public/v1.0/movies/770672122/cast.json",
      "clips": "http://api.rottentomatoes.com/api/public/v1.0/movies/770672122/clips.json",
      "reviews": "http://api.rottentomatoes.com/api/public/v1.0/movies/770672122/reviews.json",
      "similar": "http://api.rottentomatoes.com/api/public/v1.0/movies/770672122/similar.json"
    }
  }],
  "links": {
    "self": "http://api.rottentomatoes.com/api/public/v1.0/movies.json?q=Toy+Story+3&page_limit=1&page=1",
    "next": "http://api.rottentomatoes.com/api/public/v1.0/movies.json?q=Toy+Story+3&page_limit=1&page=2"
  },
  "link_template": "http://api.rottentomatoes.com/api/public/v1.0/movies.json?q={search-term}&page_limit={results-per-page}&page={page-number}"
} 
```

我想将此数据存储在 Java 对象中，然后使用它。我是Java编程的新手。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:03:38.710

我建议使用 Gson 库之类的东西来解析 Json。
Gson 让它变得非常优雅和简单。
但是，由于您是新手，我建议您阅读[Gson Overview](https://sites.google.com/site/gson/gson-user-guide)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T21:43:07.693

Jackson 有一些内置的方法来读取 URL。您可以尝试以下方法（使用 java.net.URL）：

```
ObjectMapper mapper = new ObjectMapper();
User user = mapper.readValue(new URL("http://www.mydomain.com/info.json"), User.class); 
```

# java - 如何像 UAC 窗口一样控制键盘和鼠标

> ID：16000423
> 
> 赞同：2
> 
> 时间：2013-04-14T14:58:34.350
> 
> 标签：java, c++, visual-c++

任何人都可以帮助我吗？我想创建一个应用程序，例如用户访问控制 (UAC) 应用程序。当 UAC 运行时，我们无法单击屏幕上的任何位置，除非我们关闭 UAC 窗口。我们也不能按任何键来做任何事情，比如窗口键或任何功能键。因此，我想使用 C++ 代码创建一个类似的应用程序来控制键盘和鼠标，在我的应用程序窗口中仅启用鼠标和键盘并在外部禁用，除非我不关闭我的应用程序，否则我无法执行任何其他任务。我的应用程序将只是一个带有关闭按钮的图形简单窗口，以及上面提到的控件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T00:49:10.593

很久以前，Windows 支持系统模式对话框。这些将阻止用户与包括桌面在内的其他窗口进行交互。由于它引起的问题，微软很久以前就取消了对此的支持。

现在，当 Windows 需要为 UAC 提供系统模式窗口时，他们会使用一些*桌面*魔法。为了模拟一个系统模式窗口，UAC 会做这样的事情。

*   创建位图并拍摄当前桌面的快照。
*   使位图变暗
*   创建一个新桌面
*   将新桌面设置为当前活动的桌面。
*   创建一个新桌面大小的窗口并在其中绘制位图。

现在他们有一个*看起来*像旧的桌面，就像一个系统模型窗口一样。然后，您可以自由地创建一个子窗口来获取用户的输入。下面的示例显示了如何创建桌面并切换到它，应该是您想要做的一个很好的起点

```
// TODO: Make a copy of the current desktop

// Prepeare a new desktop and activate it
HDESK oldDesktop = GetThreadDesktop(GetCurrentThreadId());
HDESK desktop = CreateDesktop(L"MyDesktop", NULL, NULL, 0, GENERIC_ALL, NULL);
SwitchDesktop(desktop);

// TODO: Create the window that draws the snapshot of the old desktop

// TODO: Create a dialog with buttons and stuff

// Since we don't have a window sit for 5 seconds staring at blank screen
Sleep(5000);

//  Switch back to the old desktop and destroy the one we created
//  ALERT: If we crash or exit without doing this you will need to
//  restart windows
SwitchDesktop(oldDesktop);
CloseDesktop(desktop); 
```

[您可以在桌面相关 API](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687107%28v=vs.85%29.aspx)上找到更多信息

# objective-c - 如何获取 UIScrollView 的 indexPath？

> ID：16000427
> 
> 赞同：1
> 
> 时间：2013-04-14T14:58:48.627
> 
> 标签：objective-c, uitableview, uiscrollview, nsindexpath

我有`UITableViewCell`一个`UIScrollView`：

```
cellScroll = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 320, 43)];
cellScroll.contentSize = CGSizeMake(960, 43);
cellScroll.contentOffset = CGPointMake(320, 0);
cellScroll.decelerationRate = UIScrollViewDecelerationRateFast;
[cell addSubview:cellScroll]; 
```

使用`UIButton`此代码可以解决此问题：

```
UIView *animationView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 960, 43)];
[cellScroll addSubview:animationView];

cellButton = [UIButton buttonWithType:UIButtonTypeCustom];
cellButton.frame = CGRectMake(320, 0, 320, 43);
[cellButton addTarget:self action:@selector(didPushCellButton:event:) forControlEvents:UIControlEventTouchUpInside];

[animationView addSubview:cellButton];

- (void)didPushCellButton:(id)sender event:(id)event {        
NSSet *touches = [event allTouches];
UITouch *touch = [touches anyObject];
CGPoint currentTouchPosition = [touch locationInView:theTable];
NSIndexPath *indexPath = [theTable indexPathForRowAtPoint:currentTouchPosition];
} 
```

我也试过这个`UIScrollView`，但没有奏效。此外，我还尝试了一些其他的手势等等。但没有任何效果。

谁能帮我？

先感谢您。

# java - 连接四；二维数组混淆

> ID：16000432
> 
> 赞同：0
> 
> 时间：2013-04-14T14:59:18.397
> 
> 标签：java, user-interface, multidimensional-array, logic, jlabel

这是我第一次使用 GUI。我似乎无法用它来操纵我的头。我觉得答案很简单（对此我很抱歉），但我就是想不通。：/

我有一个 2D JLabel 数组，每个数组都设置为默认板 ImageIcon。我在每列上方都有指定列号的按钮。在 actionPerformed 方法中，每个按钮都有这个：

```
if(e.getSource()== (whatever column number button name) )
{
} 
```

我不知道如何将令牌添加到指定令牌的最低行，我认为在找到设置为 ImageIcon p0 的最低行后，我将不得不根据玩家颜色将其设置为 pR 或 pB。但我不确定如何编写一个循环来找到存储 p0 的最低单元格或如何跟踪玩家颜色。

```
final ImageIcon p0 = new ImageIcon("Board.jpg");// default board box
final ImageIcon pR = new ImageIcon("Red.jpg");
final ImageIcon pB = new ImageIcon("Black.jpg");

JLabel [][] connectFourBoardComp = new JLabel[6][7];
for(int row=0, count=6; row<1; row++)
{
    for(int col=0; col<7; col++, count++)
    {
          connectFourBoardHumn[row][col].setIcon(p…
          System.out.println(connectFourBoardHumn[…
    }
} 
```

任何帮助将不胜感激！谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:31:25.263

要跟踪当前播放器的颜色，只需在每次用户播放时切换颜色：

```
if (nextColor == pR) {
    nextColor = pB;
}
else {
    nextColor = pR;
} 
```

要查找带有 p0 图标的第一行（假设最低行位于索引 0 处），只需遍历行直到找到该行：

```
int firstEmptyRow = connectFourBoardComp.size(); // default case: the the row is full of tokens
for (int i = 0; i < connectFourBoardComp; i++) {
    if (connectFourBoardComp[i][column] == p0) {
        firstEmptyRow = i;
        break; // break out of the loop
    }
} 
```

# c# - 在 ASP.NET MVC4 中加密

> ID：16000433
> 
> 赞同：1
> 
> 时间：2013-04-14T14:59:19.967
> 
> 标签：c#, asp.net-mvc, encryption, cryptography

我想在 System.Security.Cryptography 中使用 AES 算法加密一些用户的机密数据并将其存储在数据库中。

所以我的问题是我应该如何存储用于解码私人数据的密钥。以及如何获得 Key 和 IV 向量。

也许它应该有机会分享这些数据，我的意思是使用私钥/公钥。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-14T16:17:41.260

您有两个选择：
1\. 如果您的密钥和 IV 对于所有用户都是静态的，您可以将其存储在 Web.config 中，这样您就可以从您的应用程序访问它，而其他人无法访问。
2\. 如果您的密钥和 IV 对于每个用户都不同，您可以在您的 Web 配置中保存一个特定的模式并使用它。模式是这样的

```
UserID+NationalCode+BirthDate 
```

然后在您的加密方法中解析此模式，附加项目，转换为字节数组并使用字符串的每个部分作为密钥和 IV。

# sql - 涉及创建用于显示数据的列的 SQL 查询

> ID：16000435
> 
> 赞同：-1
> 
> 时间：2013-04-14T14:59:27.213
> 
> 标签：sql, sqlite, compare

我在下表中创建查询时遇到困难：

```
Table Stats:
Column name       Type
_______________________________
STNAME            String
AREANAME          String
Population2010    Number
Population2011    Number 
```

我想列出特定 STNAME 的所有 AREANAME，假设 STNAME = "NEVADA"，以及截至 2011 年 (POPULATION2011) 与 2010 年 (POPULATION2010) 相比，该 AREANAME 的人口绝对变化。查询应该创建一个名为“Result”的新列，显示更改是增加还是减少，如下所示：

```
Name                Change    Result
Abberville City     100       Increase
Jefferson City      50        Decrease 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T15:03:46.590

您应该能够使用类似以下的方法来获取`population2010`和`population2011`之间的变化值`areaname`，然后使用`CASE`表达式来获取`result`：

```
select areaname,
  abs(population2010-population2011) Change,
  case 
    when population2010 > population2011
    then 'Decrease'
    else 'Increase'
  end Result
from stats
where stname = 'Nevada'; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!7/023ef/1)

# matlab - matlab函数工作错误

> ID：16000437
> 
> 赞同：4
> 
> 时间：2013-04-14T14:59:31.167
> 
> 标签：matlab, polynomial-math

我试图在matlab中制作这样的功能 ![在此处输入图像描述](https://i.stack.imgur.com/4srse.png)

但是，它必须是`l_k`wheres的数组`k` `from 1 to n`。

在代码中：`x`- 一些向量（数组），`z`- 标量；in code`w`是 frac 的上半部分，`g`下半部分。

```
function out_l =  l_k(z, x)
%вычисления массива l_k для числа z
%x - узлы интерполяции
%z - значение для которог овычисляем значение полинома
n = size(x);
w = 1;
g = 1;
out_l = zeros(n);

for k = 1:n

    for j = 1:n
    %вычислим w
        for i=1:n
            if((i ~= k) && (i ~= j))
                w = w * (z - x(i));
            end
        end
    %вычислим g
        for i=1:n
            if(i ~= k)
                g = g * (x(k) - x(i));
            end
        end

    end
    out_l(k) =  (w/g);  
end
end 
```

问题是 - 当涉及到这个循环时，它只是在第一次检查 if 语句后退出！穿什么？

```
 %вычислим w
            for i=1:n
                if((i ~= k) && (i ~= j))
                    w = w * (z - x(i));
                end
            end
        %вычислим g
            for i=1:n
                if(i ~= k)
                    g = g * (x(k) - x(i));
                end
            end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:05:50.997

如果您想要（返回维度的行向量，而不是标量）中的元素数量，则该行`n = size(x);`没有意义。试试吧。`n``size``n=numel(x);`

**稍后编辑：**我还看到您像这样分配输出数据：`out_l = zeros(n);`，但您应该知道它会创建一个 nxn 矩阵，而不是您可能期望的数组。尝试`out_l = zeros(1,n);`改变。

还有另一个建议：如有疑问，请尽可能多地使用 F1 键。:-) Matlab 集成帮助非常擅长解释 Matlab 的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T15:30:04.070

Matlab 具有执行插值的嵌入式函数，例如[interp1](http://www.mathworks.it/it/help/matlab/ref/interp1.html)；（我可以在您的公式中识别拉格朗日插值函数）。

如果您想拥有自己的代码来评估拉格朗日插值函数，您应该考虑使用向量并避免循环，以使您的代码更快。

考虑以下：

```
x_n = 0:.3:1; % # interpolation nodes

k = 3;        % # we want for instance the function which is equal to 1 at 3rd node  

z = .5;       % # we want to evaluate the interpolant at z=.5

x_n_l = x_n;
x_n_l(k) = [];   % # we need all the nodes but the k-th

l_k = prod( z - x_n_l )/prod( x_n(k) - x_n_l ) % # this is your value 
```

当然，您可以将代码包装在一个不错的函数中。

# rdbms - 如何从我的数据库中临时删除记录？

> ID：16000440
> 
> 赞同：0
> 
> 时间：2013-04-14T14:59:41.573
> 
> 标签：rdbms

我如何设计我的数据库（使用 DDL 和 DML 语句），其中我在表“A”中有一些记录，我想删除一条记录，此外，我想将删除的记录恢复到同一个表“A”中。 （从表“A”中删除该记录后，该记录不应以任何方式出现在表“A”中）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:03:55.777

我遵循的模式是在表中添加一个名为“is_deleted”的列，并将默认值设置为 0。然后当您执行初始删除时，只需使用 1 更新该列。

然后，稍后您可以查询所有 is_deleted = 1 的行，并执行您的最终删除逻辑。

此外，请确保您的初始查询过滤掉“标记为已删除”(is_deleted = 0) 记录。

# javascript - 如何使图像成为鼠标悬停的嵌入式视频？

> ID：16000443
> 
> 赞同：0
> 
> 时间：2013-04-14T15:00:00.920
> 
> 标签：javascript, html, css

所以今天我学习了如何在鼠标悬停时将图像更改为不同的图像。

不过我想知道，我可以在鼠标悬停时将图像更改为 youtube 视频吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:02:15.930

当然，您可以替换任何您想要的 HTML 内容。为了更容易处理事件处理程序（鼠标悬停在您的情况下），我建议您查看一些现有的 Javascript 库，例如[jQuery](http://jquery.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T15:20:26.107

使用 jQuery 和一些 CSS：

演示：http: [//jsfiddle.net/3SQtS/](http://jsfiddle.net/3SQtS/)

```
<!-- HTML -->
<div class="replacement">
    <img class="top-img" src="http://placekitten.com/560/315" alt="Kitten">
    <iframe class="video" width="560" height="315" src="http://www.youtube.com/embed/H93n-k3SkiQ" frameborder="0" allowfullscreen></iframe>
</div> 
```

* * *

```
/* CSS */
.replacement {
    position: relative;
}
.top-img {
    position: absolute;
} 
```

* * *

```
// jQuery
jQuery(document).ready(function($) {
    $('.replacement .top-img').on('mouseenter', function () {
        $(this).fadeOut(500);
    });
}); 
```

# java - 来自非静态的静态 BufferedImage

> ID：16000450
> 
> 赞同：0
> 
> 时间：2013-04-14T15:00:34.203
> 
> 标签：java, static, jar, bufferedimage, non-static

好的，这是我在创建可执行 JAR 文件时尝试遇到的一个大问题的一小部分。我需要移动我的图像，以便它们可以放在另一个包中，以便可以在任何地方找到它们。我正在使用以下方法加载我的 BufferedImage：

```
private static BufferedImage loadRefDigits() {
    try {
        return ImageIO.read(new File("src/package/references.png"));

    } catch (IOException e) {
        throw new RuntimeException(" Error reading reference digits", e);
    }
} 
```

但是，在 jar 中找不到此图像，因此我尝试使用：

```
URL imageURL = this.getClass().getResource("/Images/references.png"); 
```

但这是一种非静态方法，我一直试图弄清楚如何使用此方法获取 BufferedImage 对象。

任何帮助都会非常有用，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:02:56.543

只需对 jar 文件中的任何类使用静态引用：

```
URL url = SomeClass.class.getResource("/Images/references.png"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-17T14:57:26.637

我相信这会让你朝着正确的方向前进。

```
public static BufferedImage getClasspathImage(String name) {
    Objects.requireNonNull(name);

    URL url = Images.class.getClassLoader().getResource(name);
    if (url == null) {
        String fmt = "cannot find resource [%s]";
        throw new IllegalStateException(String.format(fmt, name));
    }

    try (InputStream stream = url.openStream()) {
        return ImageIO.read(stream);
    }
    catch (IOException e) {
        String fmt = "cannot read resource [%s] at [%s]";
        String err = String.format(fmt, name, url);
        throw new IllegalStateException(err, e);
    }
} 
```

# nginx - Nginx 将子域的内容显示为根域

> ID：16000451
> 
> 赞同：1
> 
> 时间：2013-04-14T15:00:42.653
> 
> 标签：nginx, subdomain, gitlab

我正在使用 Nginx 在我的服务器上运行 Gitlab，它在 git.mysite.com 上运行良好。但是，当我访问根域时，不是在 /usr/share/nginx/www 中显示 index.html 文件，而是在 /home/gitlab/gitlab 中显示 Gitlab。

我怎样才能解决这个问题？

默认（/etc/nginx/sites-available/default）

```
server {
    listen   80; ## listen for ipv4; this line is default and implied
    #listen   [::]:80 default ipv6only=on; ## listen for ipv6

    root /usr/share/nginx/www;
    index index.php index.html index.htm;

    server_name mysite.com;

    location / {
        try_files $uri $uri/ /index.html;
    }

    location /doc/ {
        alias /usr/share/doc/;
        autoindex on;
        allow 127.0.0.1;
        deny all;
    }

    error_page 500 502 503 504 /50x.html;
    location = /50x.html {
        root /usr/share/nginx/www;
    }

    location ~ \.php$ {
        fastcgi_pass 127.0.0.1:9000;
        fastcgi_index index.php;
        include fastcgi_params;
    }
    location ~ /\.ht {
        deny all;
    }
} 
```

gitlab (/etc/nginx/sites-available/gitlab)

```
upstream gitlab {
  server unix:/home/git/gitlab/tmp/sockets/gitlab.socket;
}

server {
  listen 198.199.70.76:80 default_server;
  server_name git.mysite.com;
  root /home/git/gitlab/public;

  # individual nginx logs for this gitlab vhost
  access_log  /var/log/nginx/gitlab_access.log;
  error_log   /var/log/nginx/gitlab_error.log;

  location / {
    # serve static files from defined root folder;.
    # @gitlab is a named location for the upstream fallback, see below
    try_files $uri $uri/index.html $uri.html @gitlab;
  }

  # if a file, which is not found in the root folder is requested,
  # then the proxy pass the request to the upsteam (gitlab unicorn)
  location @gitlab {
    proxy_read_timeout 300; # https://github.com/gitlabhq/gitlabhq/issues/694
    proxy_connect_timeout 300; # https://github.com/gitlabhq/gitlabhq/issues/694
    proxy_redirect     off;

    proxy_set_header   X-Forwarded-Proto $scheme;
    proxy_set_header   Host              $http_host;
    proxy_set_header   X-Real-IP         $remote_addr;

    proxy_pass http://gitlab;
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T17:18:02.237

您想更改您的子域以侦听端口 80，而不是 default_server。尝试使用这一行：

```
listen 80; 
```

代替：

```
listen 198.199.70.76:80 default_server; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T15:24:02.793

两个配置都在端口 80 上侦听，并且 gitlab 一个（直接来自[Gitlab recipe](https://github.com/gitlabhq/gitlab-recipes/blob/master/web-server/nginx/README.md)，已移至主 gitlab repo: [`gitlab.com/gitlab-org/gitlab-ce/lib/support/nginx/gitlab`](https://gitlab.com/gitlab-org/gitlab-ce/blob/master/lib/support/nginx/gitlab)）用于从“/”访问 GitLab 服务器：`http://198.199.70.76:80/`确实返回 GitLab。

只有无法解析的查询`198.199.70.76`才会使用第一个配置 ( `index.html`)。
例如，如果在服务器上执行， a`http://localhost/`会起作用。

# jquery - 使用 Jquery 计算和枚举 LI

> ID：16000452
> 
> 赞同：0
> 
> 时间：2013-04-14T15:00:42.983
> 
> 标签：jquery

我有这个 Ul 和一些由 Wordpress 生成的 Li。如果我使用`<?php the_ID(); ?>`它会变得一团糟，帖子ID不按顺序排列。我需要做的是让 jquery 计数并在我的简陋列表中写入数字 1、2、3 和 4。
这是我的 Ul
循环将获得 4 个帖子，因此，4`<li>'s`

```
<div id="controle">  
    <ul>
<?php
while ( $loop->have_posts() ) : $loop->the_post();
?>

  <li>
<a href="<?php the_ID(); ?>">1 <--! see? here is where the count goes :D --> </a>
  </li>

<?php endwhile; ?>
    </ul>
        </div> 
```

我想了一些东西

```
$('#controle li').each(function(e){

} 
```

会做的伎俩，但不知道如何继续这个:(

谢谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:07:31.753

尝试这个：

```
$( "#controle li" ).each(function( index ) {
  $(this).find("a").text(index + 1);
}); 
```

[**在这里演示**](http://jsfiddle.net/KcfWL/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T15:07:52.123

使用你的`each`循环，`each`回调的第一个参数是`index`

```
$('#controle li a').each(function(index){
    $(this).prepend('<span class="myNumberClass">'+ (index+1) +'</span>')
}) 
```

# xcode - Xcode：如何在一行代码中设置断点？

> ID：16000455
> 
> 赞同：1
> 
> 时间：2013-04-14T15:01:04.720
> 
> 标签：xcode, debugging, gdb, lldb

假设我有一段这样的代码：

```
x -= func(); 
```

有什么方法可以在`func()`不添加临时变量或检查的情况下知道结果`x`吗？此外，`func()`它在一个二进制库中，所以我没有它的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:11:46.020

根据优化，这可能是不可能的。您可以检查`eax`寄存器，但这取决于调用约定以及函数是否内联。如果不使用，返回值可能会被完全丢弃。你最好的选择是使用临时的。事实上，使用临时的将适合调试目的（如您的情况），也可能更具可读性并且不应该影响性能。

# asp.net - 尝试将单个 C#.NET 方法应用于多个目标

> ID：16000457
> 
> 赞同：0
> 
> 时间：2013-04-14T15:01:22.203
> 
> 标签：asp.net, c#-4.0

我有一个需要帮助修改的 C#.NET 方法。该方法的代码当前如下所示：

```
 Model1.Items.Clear();

        Color1.Items.Clear();

        Voltage1.Items.Clear();

        Model1.DataSource = modelList;

        Color1.DataSource = colorList;

        Voltage1.DataSource = voltagelist;

        Model1.DataBind();

        Color1.DataBind();

        Voltage1.DataBind(); 
```

Model1、Color1 和 Voltage1 都是下拉菜单的 ID，它们根据用户输入填充选项，并在其他地方处理。我的问题是，根据用户想要输入的数据量，每个菜单最多可以有十五个单独的实例。

这些菜单的 ID 将递增（Model1、Model2 ... Color1、Color2 ... 等），并且为了方便起见，它们都将被硬编码到应用程序中，而不是在运行时创建。

每组这些 DDL 都有自己的输入框，因此在 userInput5 中输入输入将触发 Model5、Color5 和 Voltage5 的填充。我的想法是我包含一个变量，我可以将集合的数量应用于该变量，并将此方法更改为看起来像“Model[number].Items.Clear();” 等等，但我不知道如何实现这一点。

很抱歉这个低级问题，但任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T22:38:08.873

根据我对您的问题的理解，您可以创建一个接受 DropDownLists 以及源的方法，并在需要时调用此方法，并传递适当的控件：

```
public void BindDropDowns(DropDownList ddlModel, DropDownList ddlColor, DropDownList ddlVoltage,
                          List<Model> modelList, List<Color> colorList, List<Voltage> voltagelist)
{
    ddlModel.Items.Clear();
    ddlColor.Items.Clear();
    ddlVoltage.Items.Clear();

    ddlModel.DataSource = modelList;
    ddlColor.DataSource = colorList;
    ddlVoltage.DataSource = voltagelist;

    ddlModel.DataBind();
    ddlColor.DataBind();
    ddlVoltage.DataBind();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T01:03:27.630

让我建议您使用中继器来实现此目的的一种方法。为简单起见，无需创建用户控件。抱歉，我在 VB 中编写代码，下面是我的示例。希望你能理解逻辑。

这是转发器的 ItemTemplate 的标记：

```
<asp:Repeater ID="Repeater1" runat="server">
  <ItemTemplate>
    <!-- your ddl's and any other controls -->
    <asp:DropDownList ID="ddlModel" runat="server" />
    <asp:DropDownList ID="ddlColor" runat="server" />
    <asp:DropDownList ID="ddlVolt" runat="server" />
  </ItemTemplate>
</asp:Repeater> 
```

1.  您不需要有一个实际的数据源就可以让中继器工作。您可以将转发器绑定到：

    ```
    Dim a As New ArrayList() From {1, 2, 3, 4, ..., n}
    Repeater1.DataSource = a
    Repeater1.DataBind() 
    ```

2.  您可以通过设置数组中的项目数来控制（`{1, 2, 3, 4, ..., n}`其中“n”最多显示要显示的集合数）

3.  要从中继器外部访问任何下拉菜单：

    ```
    Dim itm As RepeaterItem = Repeater1.Items(1) ' to get 2nd item in the repeater
    Dim ddlModel As DropDownList = DirectCast(itm.FindControl("ddlModel"), DropDownList)
    Dim ddlColor As DropDownList = DirectCast(itm.FindControl("ddlColor"), DropDownList)
    Dim ddlVolt As DropDownList = DirectCast(itm.FindControl("ddlVolt"), DropDownList) 
    ```

4.  要从中继器的项目中访问，除第一行外与上述相同：

    ```
    Dim itm As RepeaterItem = sender.NamingContainer 
    ```

    或者，在 ItemDataBound 内

    ```
    Dim itm As RepeaterItem = e.Item 
    ```

# c++ - 如何在c ++中将前面的函数参数设置为其默认值？

> ID：16000462
> 
> 赞同：3
> 
> 时间：2013-04-14T15:01:53.707
> 
> 标签：c++, function, parameters, default

如果这个基本问题已经得到回答，我们深表歉意。我会在括号内放什么，`print()`以便将第一个参数保留为默认值，但为以下参数赋予新值 1 和 2？我知道我可以从字面上把 0 放在那里，但有没有办法让它默认？

```
#include<iostream>

using namespace std;

void printer(int a=0, int b=0, int c=0){
 cout << a << endl;
 cout << b << endl;
 cout << c << endl;
}

int main(){

//leave a=0 and replace both b and c 
printer(/*?*/,1,2);

 return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T15:02:57.873

你不能这样做，这是不允许的。只有最右边的参数可以省略。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T15:05:18.823

默认参数列表是右关联的。所以不可能省略第一个参数列表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-14T15:06:11.567

第一个默认值之后的所有参数都是默认值。在这种特殊情况下，您可以通过更改顺序获得所需的内容：

```
void printer(int b=0, int c=0,int a=0){
 cout << a << endl;
 cout << b << endl;
 cout << c << endl;
}

//leave a=0 and replace both b and c 
printer(1,2); 
```

> 输出：
> 
> 0
> 
> 1
> 
> 2

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-14T15:06:31.800

用于[`std::placeholders::N`](http://en.cppreference.com/w/cpp/utility/functional/placeholders)将要指定的参数委托给从[`std::bind`](http://en.cppreference.com/w/cpp/utility/functional/bind).

```
int main()
{
   auto f = std::bind(printer, 0, std::placeholders::_1, std::placeholders::_2);

   f(4, 5);
} 
```

[***现场演示***](http://liveworkspace.org/code/4yc7Hy%243975)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-14T15:05:53.540

您可以利用**函数重载**来实现您想要的：

```
void printer(int a, int b, int c) {
  cout << a << endl;
  cout << b << endl;
  cout << c << endl;
}

void printer() {
  printer(0, 0, 0);
}

void printer(int b = 0, int c = 0) {
  printer(0, b, c);
}

int main(){
  // leave a = 0 and replace both b and c 
  printer(1, 2);

  return 0;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-14T15:15:27.080

您不能完全做到这一点，但解决此问题的一种方法是使用您的参数传递一个结构：

```
struct PrinterParams {
  int a,b,c;
  PrinterParams() : a(0), b(0), c(0) { }
};

void printer(int a, int b, int c) {
 cout << a << endl;
 cout << b << endl;
 cout << c << endl;
}

void printer(const PrinterParams &params) {
  printer(params.a,params.b,params.c);
}

int main(){
  PrinterParams params;

  params.b = 1;
  params.c = 2;
  printer(params);

 return 0;
} 
```

# zend-framework2 - 如何在 Zend Framework 2 中包含第三方库

> ID：16000465
> 
> 赞同：0
> 
> 时间：2013-04-14T15:02:08.537
> 
> 标签：zend-framework2, autoload

我正在将应用程序从 ZF1 迁移到 ZF2。我有一个控制器依赖于第三方库“日光浴室”。

```
namespace Stock\Controller;
class BaseController extends AbstractActionController
{
    protected function indexAction()
    {
        require_once('Solarium/Autoloader.php');
        Solarium_Autoloader::register(); 
```

'日光浴室'存在于'供应商'下，在'init_autoloader.php'中我有：

```
set_include_path(implode(PATH_SEPARATOR, array(
    realpath('vendor')
))); 
```

但是，当我查看页面时，出现错误：

```
Fatal error: Class 'Stock\Controller\Solarium_Autoloader' not found in ... 
```

* * *

我试图在“StandardAutoloader.php”中添加跟踪，发现 StandardAutoloader.autoload('Stock\Controller\Solarium_Autoloader') 在运行时被调用。

我想知道这是如何发生的以及如何解决它。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T16:20:24.773

正如 Aydin Hassan 在他的评论中所写，完成这项工作的最简单方法是使用 Composer。首先，`composer.json`在项目的根目录中编辑文件，使其看起来像这样：

```
"require": {
    "php": ">=5.3.3",
    "zendframework/zendframework": "2.*",
    "solarium/solarium": ">=2.4.0"
} 
```

如果您正在使用[Zend Skeleton Application](https://github.com/zendframework/ZendSkeletonApplication)，那么您还将在项目的根目录 ( `composer.phar`) 中拥有 Composer 本身。在这种情况下，您可以这样做：

`cd /path/to/project && php composer.phar install solarium/solarium`

或者

`cd /path/to/project && php composer.phar install`

否则，只需在命令行中随处使用 Composer。通过执行上述操作，Composer 将为您处理自动加载。在你的控制器中，你不应该担心包含文件，因为这会自动为你发生`spl_autoload_register`。你只需要使用命名空间。您可以使用以下两种方法之一：

```
namespace Stock\Controller;

use Solarium\Autoloader;

class BaseController extends AbstractActionController
{
    protected function indexAction()
    {
        Autoloader::register();
    }
} 
```

或者

```
namespace Stock\Controller;

class BaseController extends AbstractActionController
{
    protected function indexAction()
    {
        \Solarium\Autoloader::register();
    }
} 
```

# wordpress - 突出显示自定义帖子类型的当前菜单

> ID：16000466
> 
> 赞同：0
> 
> 时间：2013-04-14T15:02:10.823
> 
> 标签：wordpress, custom-post-type

我创建了一个自定义帖子类型，而不是使用默认列表，添加和编辑我自己创建的菜单，如下所示：

```
add_action('admin_menu','wp_rss_multi_importer_menu');

function wp_rss_multi_importer_menu () {

    add_menu_page(__('Overview'), __('RSS Multi Importer'), 'manage_options', 'wprssmi', 'wp_rss_multi_importer_intro_page', '', '150'); 

    add_submenu_page('wprssmi', 'Instructions', 'Instructions','manage_options', 'wprssmi', 'wp_rss_multi_importer_intro_page', '', '');

    add_submenu_page( 'wprssmi', 'Feed List', 'Feed List', 'manage_options', 'edit.php?post_type=rssmi_feed', '' );

    add_submenu_page( 'wprssmi', 'Add a Feed', 'Add a Feed', 'edit_posts', 'post-new.php?post_type=rssmi_feed', '' );

} 
```

这工作正常，除非我编辑一个条目，因为菜单没有保持打开状态，如此处所示

[http://www.screencast.com/t/vHLeeu0H](http://www.screencast.com/t/vHLeeu0H)

有没有办法让我点击编辑条目时菜单保持打开状态（就像您编辑常规帖子时一样）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T19:52:37.857

好的...这是如何完成的

```
global $parent_file;
$parent_file = 'wprssmi'; 
```

# graph - neo4j cypher：菱形关系

> ID：16000481
> 
> 赞同：1
> 
> 时间：2013-04-14T15:03:36.243
> 
> 标签：graph, neo4j, cypher

我有以下图表

![](https://docs.google.com/drawings/d/1XXFqnE5Jrj01OpPfSxV02Ayq6tfwmXH-dQEESjBGVVA/pub?w=480&h=360)

我想编写一个查询，返回 doc 节点，其中`complex`节点可能`[COMPOSED_OF]`与类型节点有 2 个或更多关系`keyword`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T02:41:57.773

假设您从类别开始，您可以尝试

```
START cat=<lookup category node>
MATCH (cat)-->()-[r:COMPOSED_OF]->()-[:FOUND_IN]->(doc)
with count(r) as composedCount, doc
WHERE composedCount>2
return doc 
```

[请注意，我还没有真正执行此操作]

# iphone - 基于单选按钮的 iOS pickerview 值更改

> ID：16000485
> 
> 赞同：0
> 
> 时间：2013-04-14T15:03:52.790
> 
> 标签：iphone, ios, objective-c

我希望能够基于选择器视图和一组单选按钮为标签生成特定值。有没有比这种方式更简单的方法来为 iOS 完成此任务？我将提供一个值并使用单选按钮进行一些转换选择。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T19:52:49.840

不是真正的编程或代码审查问题，但两个文本字段下面都有一个选择器视图怎么样？文本字段显示数量，选择器选择单位。双向运行转换，记住哪个文本字段最近是第一响应者并计算另一个的值。

# wordpress - 带有 URL 参数的 wordpress 插件中的权限

> ID：16000487
> 
> 赞同：0
> 
> 时间：2013-04-14T15:03:58.223
> 
> 标签：wordpress

我正在尝试为 wordpress 开发一个插件。一切正常，但是当我通过 URL 传递参数时说：

```
You do not have sufficient permissions to access this page. 
```

这是我的代码：

```
<?php add_action('admin_menu', 'theme_options_add_pages');

function theme_options_add_pages() {
    add_menu_page('Theme Options', 'Theme Options', 1, __FILE__, 'main_page');
}

function main_page() { ?>

<div id="theme-options-container">
    <form>
    <div id="theme-options-header">
        <img id="theme-options-logo" src="../wp-content/plugins/theme-options/images/wordpress-logo-hoz-rgb.png" alt="Your logo here"/>
    </div>
    <div id="theme-options-clear">
        <div id="theme-options-sidebar">
            <div class="shadow"></div>
            <ul role="navigation">
                <li id="theme-option-general">
                    <a href="#"><div class="theme-option-image"></div>General Settings</a>
                </li>
                <li id="theme-option-styles">
                    <a href="#"><div class="theme-option-image"></div>Styling Options</a>
                </li> 
            </ul>
        </div>
        <div id="theme-options-content"></div>
    </div>
</form>
</div>
<?php } 
```

有谁知道我为什么会收到这个错误？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T16:04:24.213

您需要指定一个功能和一个 slug：

`add_menu_page( 'Theme Options', 'Theme Options', 'manage_options', 'my-theme-options', 'main_page' );`

[http://codex.wordpress.org/Function_Reference/add_menu_page](http://codex.wordpress.org/Function_Reference/add_menu_page)

# .net - 企业库的工作单元

> ID：16000489
> 
> 赞同：1
> 
> 时间：2013-04-14T15:04:02.980
> 
> 标签：.net, design-patterns, enterprise-library

如何仅使用企业图书馆数据访问来应用工作单元模式？我正在使用一个接口（IRepository），其中包含存储库必须实现的所有默认方法。但是我怎样才能通过企业库实现 UoW 呢？很多例子都在使用 EntityFramework 和 NHibernate。

谢谢。

# ruby-on-rails - Rails：如何从视图助手和控制器中获取匹配方法选项？

> ID：16000491
> 
> 赞同：0
> 
> 时间：2013-04-14T15:04:18.863
> 
> 标签：ruby-on-rails, rails-routing

Rails 中有一个[match](http://api.rubyonrails.org/classes/ActionDispatch/Routing/Mapper/Base.html#method-i-match)方法专门用于设置路由。它有几个选项：`:controller`、`:action`、`:via`等。其中之一是`:as`选项。

> ：作为
> 
> 用于生成路由助手的名称。

比如我有这样一个路由设置：

```
match("user/hello' => "users#show",
      via: 'get',
      :as => :user_hello,
    ) 
```

此`:as`选项允许我在`html.erb`模板中执行此操作：

```
<%= link_to("User Hello", user_hello_path()) %> 
```

我在渲染的页面中得到了这个：

```
<a href="user/hello">User Hello</a> 
```

但我想改变这个助手的默认行为。我想为生成的 url 添加一些前缀，让它像这样：

```
<a href="myprefix/user/hello">User Hello</a> 
```

问题是，如何`:as`在我的帮助模块文件中获取该变量：

```
# File: C:\MyApp\app\helpers\users_helper.rb
module UsersHelper

    # I explicitly redefine the default helper
    # but can't get :as option here
    def user_hello_path
        "myprefix/" + :as.to_s  # <-- how to get the ":as" option here
    end
end 
```

另外如何`match`在控制器中获取所有这些方法选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:06:21.850

你可以使用这样的东西`namespace` ，例如

```
namespace :yourprefix do
#your route here
end 
```

这将返回你`"yourprefix/your_route"`

关于您的方法-您可以将路径传递给您的方法

```
def user_hello_path(user_path)
        "myprefix/" + user_path.to_s  # <-- how to get the ":as" option here
end 
```

在视图的某个地方

```
user_hello_path(user_hello(@user)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T15:13:20.973

该`:as`选项与路线名称无关。你可以完美地拥有这个：

```
get "myprefix/user/hello' => "users#show", as: 'user_hello' 
```

但是，如果你想做一些事情，比如在自定义前缀下对一定数量的路由进行分组，你应该对命名空间做一些事情，这在 @Avdept 的回答中进行了解释。

# php - 没有数据库的 PHP 用户（登录注册）.. 只是文件

> ID：16000495
> 
> 赞同：2
> 
> 时间：2013-04-14T15:04:48.420
> 
> 标签：php, security, encryption

五个月前，我创建了一个带有“登录/注册”系统的网站，但我对 MYSQL 的了解不够。包含序列化数组的文件，在该数组中包含成员 ID、用户名、密码和电子邮件。我的转储不足以在没有加密的情况下做到这一点，所以我这样做了

```
 ID : reversible manual encryption that uses search and replace to encrypt and decrypt
    Username : sha1 with salt
    Password : crypt
    email :manual encryption that uses search and replace to encrypt and decrypt 
```

我的网站现在运行正常，我没有遇到任何与此相关的问题

那么我可能会遇到任何可能的安全问题吗？因为接下来的三个月我很忙，我不想把时间浪费在一些不需要的事情上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:13:02.057

如果您使用 bcrypt 方法，那可能是密码的最佳选择。然而，主要的不是你的加密，而是包含所有这些用户数据的文件是否可以通过网络浏览器下载，如果它位于你的网络服务器的 docroot 或其子目录中的某个地方，则很可能是这种情况，除非你已经使用适当的 .htaccess 指令锁定了该子目录。

因此，请检查您是否可以通过 Web 浏览器以任何方式访问序列化数据。由于您知道文件名和位置，因此对您来说应该很容易。仅仅因为其他人不这样做，并不意味着他们不会。

除此之外，将内容保存在数据库中而不是序列化文件中的决定通常不是（仅）为了安全，而是为了方便、性能和灵活性。

如果您可以使用序列化文件，那么请务必使用它。只要其他人无法访问它，您就应该没问题，事实上您可以免受其他攻击媒介的影响，例如 SQL 注入。

# android - 在没有 EditText 的情况下接受 Android 中的文本输入

> ID：16000499
> 
> 赞同：1
> 
> 时间：2013-04-14T15:05:19.137
> 
> 标签：android

我想在不使用 EditText 的情况下接受 android 中的文本输入。无论如何，我正在尝试创建一个绘图应用程序（排序），我需要在我创建的可缩放视图上接受文本输入。然后我想在用户指示的地方显示文本。显示文本不是问题，只是接受输入。我想出了如何显示软键盘，但 okKey 和 okKeydown 的东西似乎没有做我需要的东西，而且似乎与处理物理键盘更相关。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T16:51:21.163

几个想法。

*   创建自定义键盘视图并从 onClick 读取值。您可以获得很多键盘示例（您只需要键盘布局视图在每次点击时接受输入）。
*   软键盘在找到可编辑字段时出现。如果您设法将其启动，例如通过创建一个不可见的输入字段或虚拟可编辑字段，那么您可能必须使用相同的字段来读取将由键盘反馈的值。

希望能帮助到你。

# android - 在 Android 上使用 OpenGL ES 2.0 进行 Jerky sprite (2d) 运动

> ID：16000500
> 
> 赞同：0
> 
> 时间：2013-04-14T15:05:22.360
> 
> 标签：android, performance, memory, sprite, spritebatch

编辑 2\. 添加了 logcat 的截图。如果我将精灵的数量减少到 1，我仍然会得到这种间歇性的“停止/启动”——所以我不认为这是我的代码，因为使用 1 个精灵，我的帧速率徘徊在 85-90 fps 左右。我猜这是电话上的东西，logcat 记录了很多东西，所以我假设很多东西在后台运行。有没有办法让我的应用程序在运行时优先于其他服务？

**编辑 1\. 请参阅问题末尾的编辑详细信息**

我创建了一个精灵测试，我在其中渲染了大约 290 个精灵。

1 个精灵的每秒帧数约为 80，而 288 帧仍为 30 左右，问题是精灵时不时停止和启动，这显然不是帧速率，所以有人知道可能是什么原因这个？（要明确的是，它不是减速，而是平稳运动一段时间，然后一切都停止了几分之一秒，然后又恢复平稳）。

这也发生在屏幕上的一个精灵上 - 但只是间歇性地，每 5 秒左右 - 我添加的精灵越多，它发生的越多，但帧速率永远不会低于 30 fps，（我知道这应该没问题平滑运动），所以我只是想了解这可能是什么。

我的精灵是从一个自定义类创建的，但只创建了 3 个实际对象（背景，一个在屏幕上移动的精灵（所以我可以测量平滑度），然后是 288 个精灵（实际上是重复使用的同一个对象） ) 以 6 个为一组进行渲染。

谢谢你的帮助。

硬件是三星 Galaxy Ace 手机。

**编辑**好的，所以我通过批处理例程进行了更改，现在我每次调用渲染 24 个精灵（14 个调用 = 336 个四边形 + 移动精灵 + 背景 = 338 个四边形）并且大约 47 FPS，所以我想知道可能导致除了 GC 之外，这种“生涩”的运动还是帧率下降太多？

![在此处输入图像描述](https://i.stack.imgur.com/fHGH0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T16:20:52.760

听起来像垃圾收集器正在运行。要验证这一点，只需查看 logcat ... 生涩时刻是否与标记为“dalvikvm”并以“GC_”开头的行相关？

# javascript - 你能找到错误吗？

> ID：16000502
> 
> 赞同：0
> 
> 时间：2013-04-14T15:05:26.860
> 
> 标签：javascript, function

从昨天开始，我正在写一个乒乓球游戏。现在我遇到了一个我找不到的错误，希望你能帮助我。我唯一的想法是我没有在某个地方正确关闭函数，但我没有看到它......

您可以在此处阅读脚本和所有内容：

[http://paste2.org/1EMV5Abb](http://paste2.org/1EMV5Abb)
[http://jsfiddle.net/DerekL/hQB6V/](http://jsfiddle.net/DerekL/hQB6V/)

提前致谢 ：）

脚本的一部分，所以我可以发布：

```
function main() {
    if(runsGame == 1) {
        // Drawing game elements
        clear();
        drawPlayer(xPlayer, yPlayer);
        drawBall(xBall, yBall);
        xBall += xBallSpeed;
        yBall += yBallSpeed;
        // Ball hits bottom
        if(yBall > 590) {
            yBallSpeed = -2;
        }
        // Ball hits right
        if(xBall > 790) {
            xBallSpeed = -2;
        }
        // Ball hits top
        if(yBall < 0) {
            yBallSpeed = 2;
        }
        // Ball hits Player 
        if(xBall <= xPlayer + 10 && yBall >= yPlayer && yBall <= yPlayer + 80) {
            xBallSpeed = 2;
        }
        // Ball hits "Out"
        if(xBall < 0) {
            resetO();
            drawPlayer(xPlayer, yPlayer);
            drawBall(xBall, yBall);
            clearInterval(runningGame);
            runsGame = 0;
            var button = document.getElementById("start");
            button.value = "Start";
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:09:21.970

您同时拥有标签`src`中的属性和`script`标签内的脚本。这意味着浏览器将加载指定的文件，并忽略标签内的代码。

将`src`属性放在`script`没有内容的标签中，并将代码放在另一个`script`没有任何`src`属性的标签中：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>

  // code goes here

</script> 
```

# matlab - 下标索引必须是正整数或逻辑数

> ID：16000505
> 
> 赞同：0
> 
> 时间：2013-04-14T15:05:30.330
> 
> 标签：matlab, octave, spline

我知道这种类型的问题之前已经被问过很多次了，但我无法理解我的代码的问题。我也是 Octave 的绝对初学者。

```
function Z=nat_spline(n, T, Y)
  for i=0:n-1
    H(i) = T(i+1) - T(i);
    B(i) = 6*(Y(i+1) - Y(i))/H(i);
  end
  U(1) = 2*(H(0)+H(1));
  V(1) = B(1) - B(0);
  for i=2:n-1
    U(i) = 2 * (H(i) + H(i-1)) - ( (H(i-1))^2 / U(i-1) );
    V(i) = B(i) - B(i-1) - H(i-1)*V(i-1)/U(i-1);
  end
  Z(n) = 0
  for i=n-1:1
    Z(i) = (V(i)-H(i)*Z(i+1))/U(i);
  end
  Z(0) = 0;
end 
```

它的代码很短，所以我想很容易发现任何错误。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T15:08:40.833

数组的索引在 matlab 中以 1 开头:) 你的 H(i) 和 B(i) 在循环的第一次迭代中将是 H(0) B(0) ，这会给你一个错误所以`for i=1:n`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T15:10:16.833

好吧，标题告诉它：如果不是逻辑的话。下标必须是严格的正整数值。喜欢`H(0)`或`Z(0)`不起作用的事情，因为严格的正整数值以 1 开头。

# struts2 - Struts 2 参数名称长度现在受到限制

> ID：16000509
> 
> 赞同：2
> 
> 时间：2013-04-14T15:05:50.667
> 
> 标签：struts2

我正在使用 Struts 2 版本 2.3.4，我将升级到最新版本，但我发现 Struts 2 (2.3.4.1) 中的修复有两个内部更改，其中一个影响我当前的系统无法运行，即“[参数名称长度现在受到限制](http://struts.apache.org/development/2.x/docs/version-notes-2341.html)”。这是因为我的一些文本字段名称超过 100 个字符。例如： -

```
<s:textfield theme="simple" name="model.verylonglistname[%{#status.index}].somemodelname.someobject" /> 
```

由于我系统中的某些文本字段的名称超过 100 个字符。

有什么办法可以解决上述问题吗？由于我目前的系统已经开发了一段时间，很多文本字段名称都超过了 100 个字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T19:43:30.057

[该文档包含](http://struts.apache.org/development/2.x/docs/parameters-interceptor.html#ParametersInterceptor-Parameters)您问题的答案。

定义您自己的默认堆栈，将“参数”拦截器的`paramNameMaxLength`参数设置为愚蠢且更长的参数。

# slf4j - slf4j logback 替代Logger

> ID：16000514
> 
> 赞同：6
> 
> 时间：2013-04-14T15:06:12.943
> 
> 标签：slf4j, logback

我无法再使用 gradle 任务 `jettyRuǹ 启动我的记录器。多个绑定的第一个问题不是问题。但是现在（我猜在升级到 gradle 1.4 之后）我的记录器没有启动。slf4j 文档说以编程方式重置上下文，但我更愿意通过配置来完成，因为 jettyRun 仅用于开发。

```
$ gradle jettyRun
:compileJava UP-TO-DATE
:processResources UP-TO-DATE
:classes UP-TO-DATE
:jettyRun
SLF4J: Class path contains multiple SLF4J bindings.
SLF4J: Found binding in [jar:file:/opt/gradle-1.4/lib/logback-classic-1.0.9.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/home/bertrand/.gradle/caches/artifacts-23/filestore/ch.qos.logback/logback-classic/1.0.9/jar/258c3d8f956e7c8723f13fdea6b81e3d74201f68/logback-classic-1.0.9.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.
SLF4J: Actual binding is of type [ch.qos.logback.classic.util.ContextSelectorStaticBinder]
SLF4J: The following loggers will not work because they were created
SLF4J: during the default configuration phase of the underlying logging system.
SLF4J: See also http://www.slf4j.org/codes.html#substituteLogger
SLF4J: org.yajug.users.api.MembershipController
SLF4J: org.yajug.users.json.Serializer
SLF4J: org.yajug.users.api.MemberController
SLF4J: org.yajug.users.service.MemberServiceImpl
SLF4J: org.yajug.users.persistence.MongoConnector 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T10:37:25.483

最后我发现了问题所在：

*   记录上下文在第一次调用记录器时被延迟初始化。
*   在我的 Web 应用程序（仅执行异步调用的单页 Web 应用程序）的上下文中，第一页调用了 2 个异步请求
*   每个请求都有一个记录器并且初始化是同时进行的，这就是为什么我的一些记录器实现被 nop impl 取代的原因。
*   通过在应用程序启动时添加记录器调用，上下文被正确初始化

# excel - excel“汇总”代码的细微调整

> ID：16000515
> 
> 赞同：0
> 
> 时间：2013-04-14T15:06:12.893
> 
> 标签：excel, rollup, vba

我有来自这里的代码：http: [//msdn.microsoft.com/en-us/libr...ice.12%29.aspx](http://msdn.microsoft.com/en-us/libr...ice.12%29.aspx)

用于制作汇总（将多个工作簿中的数据合并到 Excel 中的摘要工作簿中）效果很好，但我需要一些帮助来调整它。

我需要目标文件（汇总文件）从第二行开始，现在它从第一行开始。

我在第一行有列标题，它们被覆盖了。

这是一段很长的代码，但注释很好，我已经尝试了几个小时来获得我想要的东西，但没有运气。

我怀疑这是需要更改的部分

```
 ' Set the destination range.
      Set destrange = BaseWks.Range("B" & rnum)

       ' Copy the values from the source range
       ' to the destination range.
        With sourceRange
             Set destrange = destrange. _
                                       Resize(.Rows.Count, .Columns.Count)
                 End With
                 destrange.Value = sourceRange.Value

                 rnum = rnum + SourceRcount
                End If 
```

谢谢

```
Sub MergeAllWorkbooks()
 Dim MyPath As String, FilesInPath As String
 Dim MyFiles() As String
 Dim SourceRcount As Long, FNum As Long
 Dim mybook As Workbook, BaseWks As Worksheet
 Dim sourceRange As Range, destrange As Range
 Dim rnum As Long, CalcMode As Long

 ' Change this to the path\folder location of your files.
 MyPath = "C:\Users\Ron\test"

 ' Add a slash at the end of the path if needed.
 If Right(MyPath, 1) <> "\" Then
    MyPath = MyPath & "\"
 End If

 ' If there are no Excel files in the folder, exit.
 FilesInPath = Dir(MyPath & "*.xl*")
 If FilesInPath = "" Then
    MsgBox "No files found"
    Exit Sub
 End If

 ' Fill the myFiles array with the list of Excel files
 ' in the search folder.
 FNum = 0
 Do While FilesInPath <> ""
    FNum = FNum + 1
    ReDim Preserve MyFiles(1 To FNum)
    MyFiles(FNum) = FilesInPath
    FilesInPath = Dir()
 Loop

 ' Set various application properties.
 With Application
    CalcMode = .Calculation
    .Calculation = xlCalculationManual
    .ScreenUpdating = False
    .EnableEvents = False
 End With

 ' Add a new workbook with one sheet.
 Set BaseWks = Workbooks.Add(xlWBATWorksheet).Worksheets(1)
 rnum = 1

 ' Loop through all files in the myFiles array.
 If FNum > 0 Then
    For FNum = LBound(MyFiles) To UBound(MyFiles)
        Set mybook = Nothing
        On Error Resume Next
        Set mybook = Workbooks.Open(MyPath & MyFiles(FNum))
        On Error GoTo 0

        If Not mybook Is Nothing Then
            On Error Resume Next

            ' Change this range to fit your own needs.
            With mybook.Worksheets(1)
                Set sourceRange = .Range("A1:C1")
            End With

            If Err.Number > 0 Then
                Err.Clear
                Set sourceRange = Nothing
            Else
                ' If source range uses all columns then 
                ' skip this file.
                If sourceRange.Columns.Count >= BaseWks.Columns.Count Then
                    Set sourceRange = Nothing
                End If
            End If
            On Error GoTo 0

            If Not sourceRange Is Nothing Then

                SourceRcount = sourceRange.Rows.Count

                If rnum + SourceRcount >= BaseWks.Rows.Count Then
                    MsgBox "There are not enough rows in the target worksheet."
                    BaseWks.Columns.AutoFit
                    mybook.Close savechanges:=False
                    GoTo ExitTheSub
                Else

                    ' Copy the file name in column A.
                    With sourceRange
                        BaseWks.Cells(rnum, "A"). _
                                Resize(.Rows.Count).Value = MyFiles(FNum)
                    End With

                    ' Set the destination range.
                    Set destrange = BaseWks.Range("B" & rnum)

                    ' Copy the values from the source range
                    ' to the destination range.
                    With sourceRange
                        Set destrange = destrange. _
                                        Resize(.Rows.Count, .Columns.Count)
                    End With
                    destrange.Value = sourceRange.Value

                    rnum = rnum + SourceRcount
                End If
            End If
            mybook.Close savechanges:=False
        End If

    Next FNum
    BaseWks.Columns.AutoFit
 End If

ExitTheSub:
 ' Restore the application properties.
 With Application
    .ScreenUpdating = True
    .EnableEvents = True
    .Calculation = CalcMode
 End With
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T16:28:19.660

These changes will start your data on row 2 and add headers to sheet1 of your newly created workbook:

First, add this to your variable declarations:

```
Dim Headers As Variant
Dim i As Long 
```

And modify your code below to:

```
' Add a new workbook with one sheet.
Set BaseWks = Workbooks.Add(xlWBATWorksheet).Worksheets(1)
rnum = 2
Headers = Array("Workbook", "header2", "header3")
For i = LBound(Headers) To UBound(Headers)
    BaseWks.Cells(1, i + 1) = Headers(i)
Next i 
```

You need, of course, to change the number and text of headers to suit your case.

# java - 如何从 HTTP 基本身份验证中获取密码

> ID：16000517
> 
> 赞同：42
> 
> 时间：2013-04-14T15:06:22.190
> 
> 标签：java, servlets, jms, basic-authentication

我正在使用带有 Java 的 HTTP BASIC 身份验证。

我的 Servlet 发送一条 JMS 消息，但我需要在创建连接时提供用户和密码来验证自己：

```
javax.jms.ConnectionFactory.createConnection(String username, String password) 
```

我可以从 HttpServletRequest.getUserPrincipal() 中检索用户名。但似乎没有办法找回密码。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2013-04-14T15:38:57.270

您所指的密码很可能与用户在登录时提供的密码不同。虽然问题中的用例不清楚，但您似乎正在尝试使用外部用户提供的用户名/密码来创建与 JMS 连接工厂的连接。这对我来说在架构上听起来并不安全。您应该只使用一个凭据连接到需要保护的 ConnectionFactory（将其视为数据库连接）。更好的是使用 JNDI 来查找 ConnectionFactory 并绕过用户名/密码管理的东西。

但是，如果您必须使用该技术，可以使用以下代码块。我从 Gitblit 项目中复制它，因为它在我的 Eclipse 中打开

使用 Java8 Base64 类：

```
final String authorization = httpRequest.getHeader("Authorization");
if (authorization != null && authorization.toLowerCase().startsWith("basic")) {
    // Authorization: Basic base64credentials
    String base64Credentials = authorization.substring("Basic".length()).trim();
    byte[] credDecoded = Base64.getDecoder().decode(base64Credentials);
    String credentials = new String(credDecoded, StandardCharsets.UTF_8);
    // credentials = username:password
    final String[] values = credentials.split(":", 2);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T17:09:15.687

用户名和密码最初是在 HTTP`Authorization`标头（base64 编码）中发送的，因此您可以使用它；但如果用户使用 cookie 维护会话，则他们不一定每次都发送该标头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-30T09:29:05.863

那些在很久以前就问过问题的人正在寻找答案，这是我的解决方案..

```
 private void authenticate(HttpServletRequest request){
    String upd=request.getHeader("authorization");
    String pair=new String(Base64.decodeBase64(upd.substring(6)));
    String userName=pair.split(":")[0];
    String password=pair.split(":")[1];    
} 
```

Base64 是从 - org.apache.commons.codec.binary.Base64 导入的；

# lisp - 将项目放置在 2D 矩阵列中的第一个 nil 元素处

> ID：16000522
> 
> 赞同：2
> 
> 时间：2013-04-14T15:07:03.313
> 
> 标签：lisp

所以我正在使用 Lisp 制作一个相对简单的游戏。

我创建了一个具有所有 NIL 元素的指定大小的板：

```
(defun make-board(rows columns) 
  (cond ((= rows 1) (list (make-list columns)))
        (t ( append (list (make-list columns)) (make-board (1- rows) columns))))) 
```

现在我正在研究 place 函数，它将在 2D 列表的列中的第一个 NIL 元素处放置一个值：

```
(defun place(player column matrix)
    ;need some help here

    ;I can get the specified column, is there a better way?!
    (let (col)(get-column column matrix))
) 
```

我可以检索指定的列：

```
; return the given column
(defun get-column 
   (colnum matrix)
   (mapcar (lambda (row) (nth colnum row)) matrix)) 
```

我觉得这很简单，但不幸的是 Lisp 不能很好地与我合作。我也更喜欢这种没有迭代的实现，因为这是执行 Lisp 的“正确”方式。

编辑：

为澄清起见，make-board 将返回如下内容：

```
(make-board 5 5)
((NIL NIL NIL NIL NIL) 
 (NIL NIL NIL NIL NIL) 
 (NIL NIL NIL NIL NIL) 
 (NIL NIL NIL NIL NIL)
 (NIL NIL NIL NIL NIL)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:21:53.353

我不知道为什么递归应该是在 Lisp 中编程的“正确”方式。循环宏非常有用，使用它可以轻松实现您想要实现的功能。

```
(defun make-board(rows columns)
  (loop repeat rows collect
    (loop repeat columns collect nil))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T17:48:19.327

我相信为您的电路板使用二维数组会更方便：

```
(defun make-board (rows columns)
  (make-array (list rows columns)
              :initial-element nil)) 
```

为了找到一列的第一个空单元格，循环该列：

```
(defun find-null-cell-index (column board)
  "Returns the row index of the first cell in the given column of the board
that contains nil."
  (loop :for i :below (array-dimension board 0)
        :when (null (aref board i column))
        :do (return-from find-null-cell-index i))) 
```

# iphone - 如何在 iOS 的 UIWebView 中操作 DOM

> ID：16000523
> 
> 赞同：3
> 
> 时间：2013-04-14T15:07:12.883
> 
> 标签：iphone, ios, uiwebview

我在我的应用程序中使用 UIWebView。当用户单击 UIWebView 中网站中的链接时，我想调用一个 Objective-C 函数。有没有办法做到这一点？UIWebView 是否允许更改它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-14T16:52:33.407

先上钩。`[yourwebview setDelegate:self]`

使用以下委托方法

```
webView:shouldStartLoadWithRequest:navigationType 
```

喜欢：

```
- (BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType {
    NSURL *url = request.URL;
    NSString *urlString = url.absoluteString;
    //put your logic here, like 
    if (![url.scheme isEqual:@"yourscheme"]) {// or query contains or [url absolutestring] contains etc
        return NO;
    }
    return YES;
} 
```

如果你想操作 DOM 或者调用 UIWebView 的任何函数，那么使用：

```
[yourwebView stringByEvaluatingJavaScriptFromString:@"alert('hello')"];
[yourwebView stringByEvaluatingJavaScriptFromString:@"$('#domid').hide();"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T03:23:42.943

正如其他答案中所述，您应该使用 webview 委托的

```
webView:shouldStartLoadWithRequest:navigationType 
```

从 WebView 中走私一些数据的方法。您可以在此处阅读我关于此主题的详细回答：[如何在 uiwebview 中使用 javascript 来获取单击的按钮 ID？](https://stackoverflow.com/questions/4900137/how-to-use-javascript-in-uiwebview-to-get-the-clicked-button-id/16126953#16126953)

# layout - Windows Phone - 在方向更改时更改布局

> ID：16000529
> 
> 赞同：3
> 
> 时间：2013-04-14T15:07:41.367
> 
> 标签：layout, windows-phone-8, screen-orientation

我正在构建一个 Windows Phone 8 应用程序，该应用程序使用 Pivot 控件为不同用户显示给定日期的数据。每个 PivotItem 拥有不同的用户。

目前我的应用程序只支持纵向，但我也想支持横向。这样做时，我希望每个 PivotItem 不再只显示一个日期的数据，而是显示一整周的数据，从而显着改变布局。

我的第一种方法是导航到具有新布局的新页面，但是在对此进行一些研究期间，我了解到也许正确/最佳的方法是更改​​ DataTemplate。我认为应该在 Pivot 控件 ItemTemplate 上。

然而，这让我无法思考并开始工作。因此，我的问题是当方向改变时改变布局的最佳方法是什么——导航到新页面或改变 DataTemplate——如果是改变 Pivot 控件的模板，应该怎么做？

编辑 - 当前枢轴控制的代码

```
<phone:Pivot x:Name="PivotPlatform" Title="DEMO" ItemsSource="{Binding PivotItems}" FontSize="13.333" >
   <phone:Pivot.HeaderTemplate>
       <DataTemplate>
           <TextBlock Text="{Binding Title}"/>
       </DataTemplate>
   </phone:Pivot.HeaderTemplate>
   <phone:Pivot.ItemTemplate>
       <DataTemplate>
           <!-- Controls omitted -->
       </DataTemplate>
   </phone:Pivot.ItemTemplate>
</phone:Pivot><?xml version="1.0" encoding="utf-8"?> 
```

我认为我需要做的就是使用省略的控件提取 DataTemplate，然后根据方向“仅”指定所需的 DataTemplate。但是，我似乎可以找到正确的语法

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T17:53:30.000

在页面资源中定义两个模板

```
<phone:PhoneApplicationPage.Resources>
    <DataTemplate x:Key="DataTemplate1">
        <!--DEFINE TEMPLATE HERE-->
    </DataTemplate>
    <DataTemplate x:Key="DataTemplate2">
        <!--DEFINE TEMPLATE HERE-->
    </DataTemplate>
</phone:PhoneApplicationPage.Resources> 
```

然后像这样定义 Pivot：

```
 <phone:Pivot x:Name="PivotPlatform"
                 Title="DEMO"
                 FontSize="13.333"
                 ItemsSource="{Binding PivotItems}">
        <phone:Pivot.HeaderTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding Title}" />
            </DataTemplate>
        </phone:Pivot.HeaderTemplate>
    </phone:Pivot> 
```

处理方向改变事件

```
<phone:PhoneApplicationPage ....
                        OrientationChanged="PhoneApplicationPage_OrientationChanged"
                        ....> 
```

通过以编程方式设置数据模板

```
private void PhoneApplicationPage_OrientationChanged(object sender, OrientationChangedEventArgs e)
{
    if (e.Orientation == PageOrientation.PortraitDown || e.Orientation == PageOrientation.PortraitUp)
    {
        PivotPlatform.ItemTemplate = this.Resources["DataTemplate1"] as DataTemplate;
    }
    else
    {
        PivotPlatform.ItemTemplate = this.Resources["DataTemplate2"] as DataTemplate;
    }
} 
```

那应该工作！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T15:22:15.187

您可以在页面资源中为 Pivot 项目创建新模板，然后处理 layoutchange 事件：

```
void MainPage_OrientationChanged(object sender, OrientationChangedEventArgs e){if (e.Orientation == PageOrientation.LandscapeLeft || e.Orientation == PageOrientation.LandscapeRight)
{
}
else 
{
}} 
```

# mysql - 错误 LNK2031、LNK2028、LNK2019、LNK2001

> ID：16000530
> 
> 赞同：-2
> 
> 时间：2013-04-14T15:07:48.540
> 
> 标签：mysql, visual-c++, mysql-connector

因此，我能够使用命令提示符成功地在 Visual C++ 中构建程序。这是一个从数据库读取然后根据一些变量写入数据库的简单程序。所以我决定让它更花哨并添加一个按钮。我像以前一样将所有内容链接起来，发布了没有 cout 和 cin 的相同代码，但我收到了这段代码

> 1>stdafx.obj : 错误 LNK2028: 未解析的令牌 (0A00000D) "public: __clrcall sql::SQLString::~SQLString(void)" (??1SQLString@sql@@$$FQAM@XZ) 在函数 "public:虚拟__clrcall sql::mysql::MySQL_Savepoint::~MySQL_Savepoint(void)" (??1MySQL_Savepoint@mysql@sql@@$$FUAM@XZ)
> 
> 1>新测试mysql.obj：错误LNK2028：未解析的令牌（0A00001E）“公共：__clrcall sql::SQLString::~SQLString（void）”（??1SQLString@sql@@$$FQAM@XZ）在函数中引用“私人： void __clrcall newtestmysql::Form1::mysqltest(void)" (?mysqltest@Form1@newtestmysql@@$$FA$AAMXXZ)
> 
> 1>stdafx.obj : 错误 LNK2001: 无法解析的外部符号 "public: __clrcall sql::SQLString::~SQLString(void)" (??1SQLString@sql@@$$FQAM@XZ)
> 
> 1>新测试mysql.obj：错误LNK2019：未解析的外部符号“public：__clrcall sql::SQLString::SQLString(char const * const)”(??0SQLString@sql@@$$FQAM@QBD@Z) 中引用函数“私有：void __clrcall newtestmysql::Form1::mysqltest(void)”(?mysqltest@Form1@newtestmysql@@$$FA$AAMXXZ)

错误发生了大约 3 次
这是代码

```
 void mysqltest(){    
        try {    
  sql::Driver *driver;    
  sql::Connection *con;    
  sql::Statement *stmt;    
  sql::ResultSet *res;    
  sql::PreparedStatement *pstmt;    

  /* Create a connection */    
  driver = get_driver_instance();    
  con = driver->connect("tcp://127.0.0.1:3306", "root", "");    
  /* Connect to the MySQL test database */    
  con->setSchema("awesome");    

  stmt = con->createStatement();    
  stmt->execute("DROP TABLE IF EXISTS test");    
  stmt->execute("CREATE TABLE test(id INT)");    
  delete stmt;    

  /* '?' is the supported placeholder syntax */    
  pstmt = con->prepareStatement("INSERT INTO test(id) VALUES (?)");    
  for (int i = 1; i <= 10; i++) {    
    pstmt->setInt(1, i);    
    pstmt->executeUpdate();    
  }    
  delete pstmt;    

  /* Select in ascending order */    
  pstmt = con->prepareStatement("SELECT id FROM test ORDER BY id ASC");    
  res = pstmt->executeQuery();    

  /* Fetch in reverse = descending order! */    
  res->afterLast();    
  while (res->previous())    
  delete res;    

 delete pstmt;    
  delete con;    

}     
 catch (sql::SQLException &e) {    
}    
    } 
```

任何和所有的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:54:42.180

前三个错误是指`destructor`无法找到的错误。这就是[LNK2028](http://msdn.microsoft.com/en-us/library/ms235590%28v=vs.110%29.aspx)所说的：

```
"exported_function" (decorated_name) referenced in function 
"function_containing_function_call" (decorated_name) 
```

尝试将本机函数导入纯映像时，请记住本机编译和纯编译之间的隐式调用约定不同

[LNK2001](http://msdn.microsoft.com/en-us/library/f6xx1b1z.aspx)说

```
unresolved external symbol "symbol" 
```

代码引用了链接器在库和目标文件中找不到的东西（例如函数、变量或标签）。

-> 你是否为这个类实现了析构函数？

最后是[LNK2019](http://msdn.microsoft.com/en-us/library/799kze2z.aspx)所说的

```
unresolved external symbol 'symbol' referenced in function 'function' 
```

在函数中发现未定义的外部符号（符号）。要解决此错误，请提供符号定义或删除引用它的代码。

我的猜测是，你的析构函数不见了。请参阅链接以供参考。

# jquery - 从 jquery MultiSelect 中检索选定的项目

> ID：16000534
> 
> 赞同：0
> 
> 时间：2013-04-14T15:07:56.153
> 
> 标签：jquery, multi-select

简单的问题，但我就是找不到答案。我正在使用“一个漂亮的网站”jquery multiSelect 下拉选择插件<[链接](http://labs.abeautifulsite.net/archived/jquery-multiSelect/demo/)>。一切似乎都可以使用：

```
$(document).ready(function() {
    $("#contact).multiSelect(); 
}); 
```

然后在体内：

```
<select id="contact" name="contact_list[]" multiple="multiple" size="5"> 
  <option value=""></option>
  <option value="Alekseev">Alekseev</option>
  <option value="Bettis">Bettis</option>
  <option value="Chlachula">Chlachula</option>
  <option value="Kohfeld">Kohfeld</option>
  <option value="Maher">Maher</option>
  <option value="Muhs">Muhs</option>
</select> 
```

简单的问题是：如何检索与简单非 jquery 等效的选定值的 JavaScript 数组：

```
var contactName = document.getElementById('contact').value; 
```

感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:13:57.557

尝试这个：

```
var arr = $("#contact").val();
console.log(arr);  // ["Bettis", "Chlachula"] 
```

# facebook - 如何在我的 Facebook 页面上创建链接以重定向到我的域？

> ID：16000535
> 
> 赞同：0
> 
> 时间：2013-04-14T15:07:59.480
> 
> 标签：facebook, hyperlink, dns

如何在我的 Facebook 页面上创建链接以重定向到我的域？我在这里看到了一个可能的示例：[例如](https://es-es.facebook.com/thehiptee?v=app_2373072738&filter=2)，如果您单击按钮或显示“在线购物”的应用程序，它将重定向到域。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:12:45.987

# ruby-on-rails - 如何在 Haml 中乘以 Ruby 代码行？

> ID：16000536
> 
> 赞同：2
> 
> 时间：2013-04-14T15:08:02.650
> 
> 标签：ruby-on-rails, ruby, haml

我想从 Haml 代码中的 Ruby 块返回一个 HTML 字符串值：

```
!= my_helper_method 'some_div_id' do
     #{
          <<-HTML
                %div
                  %b
                    some data:
                  %span#some_id123
                %div
                  %b
                    some data2:
                  %span#some_id123224
            HTML
        } 
```

请注意，中间的字符串`#{ ... }`可能很长。此代码抛出一个“ `Illegal nesting: nesting within plain text is illegal`。” 例外。

我尝试了不同的方法，但没有运气。

你的意见？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T15:29:06.113

如果我了解您在这里尝试做什么，则需要使用[`capture_haml`helper method](http://haml.info/docs/yardoc/Haml/Helpers.html#capture_haml-instance_method)。

像这样的东西：

```
!= my_helper_method 'some_div_id' do
  - capture_haml do
    %div
      %b
        some data:
      %span#some_id123
    %div
      %b
        some data2:
      %span#some_id123224 
```

`capture_haml`评估 Haml，但不会像往常一样将生成的 HTML 写入输出缓冲区，而是将其作为字符串返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T15:22:27.533

退房[`haml_tag`](http://haml.info/docs/yardoc/Haml/Helpers.html#haml_tag-instance_method)。

这就是我一直使用复杂助手的方式，这些助手会产生很多 Haml。将它与`haml_concat`您的多行 Ruby 代码结合使用。

# c# - 如何打印屏幕上未显示的内容

> ID：16000537
> 
> 赞同：2
> 
> 时间：2013-04-14T15:08:12.150
> 
> 标签：c#, wpf, winforms, printing

我现在在打印文档时一直在苦苦挣扎，文档有页眉页脚和正文，正文（这是一个网格）对于每个不同的文档都有不同的大小。根据网格的行数，文档可能具有 2 种尺寸（A5、A4）之一

我最初使用 ReportViewer 控件，但它有一些问题，主要是打印 2 篇论文，无论文档大小如何，经过 10 周的研究我放弃了，没有任何意义。

然后我尝试打印一个表格，它的所有内容（这并不容易）再次出现问题，其中一个屏幕分辨率不同，更糟糕的是，如果正文有很多行，表格将不适合屏幕，那么它就不会打印。

**我的问题是：**
word 如何打印页面的所有内容？机制是什么？我只需要一个先机，如何打印屏幕上未显示的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T08:34:45.883

我不确定这是否是你想要的，但是，

您要做的是创建一个虚拟表单，该表单与您要打印的控件的大小相同，然后将控件添加到虚拟表单并显示表单并在虚拟表单上打印控件。

我是这样做的：

```
private void printDocument1_PrintPage(object sender, System.Drawing.Printing.PrintPageEventArgs e)
{
    //Create bitmap
    Bitmap image = new Bitmap(dataGridView1.Width, dataGridView1.Height);
    //Create form
    Form f = new Form();
    //add datagridview to the form
    f.Controls.Add(dataGridView1);
    //set the size of the form to the size of the datagridview
    f.Size = dataGridView1.Size;
    //draw the datagridview to the bitmap
    dataGridView1.DrawToBitmap(image, new Rectangle(0, 0, dataGridView1.Width, dataGridView1.Height));
    //dispose the form
    f.Dispose();
    //print
    e.Graphics.DrawImage(image, 0, 0);
} 
```

这将打印 dataGridView1，即使它在表单上看不到。

# java - 如何忽略特定字符集之间的所有字符？

> ID：16000538
> 
> 赞同：0
> 
> 时间：2013-04-14T15:08:20.837
> 
> 标签：java, regex

我制定了以下我想转换为代码的正则表达式。但是遇到了一些麻烦：

“至少匹配一个`=`，并忽略直到特殊字符集的所有内容，无论这些特殊字符多久出现一次。”

特殊设置可能是：`()|&!`

例如，对于以下内容，我想忽略和之间的所有`in`内容`out`：

```
(in == 1'b1) | !out & (sig==1'b0) 
```

以下正则表达式将例如为组创建一个 plit: `==`, `) | !`:

```
\s*[=][&()!|=\s]* 
```

但是我怎样才能匹配`1'b1`in 和 out 之间，这将是某种“匹配一个`=`到一个或多个特殊字符之后的任何内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T16:19:45.770

如果它不必是一个正则表达式，那么您可以尝试这种方式

```
String data = "(in1 == 1'b1) |(in == 1'b1) | !out & (sig==1'b0) | !1out2 & (sig==1'b0)";
// I will try to split on every special character and space
String[] allTokens = data.split("[=()&|!\\s]+");
// but this will produce
// [, in1, 1'b1, in, 1'b1, out, sig, 1'b0, 1out2, sig, 1'b0]

// so I will try to filter tokens that are not only digits and letters
// with at least one letter
List<String> correctTokens = new ArrayList<>();

Pattern p = Pattern.compile("(?=.*[a-zA-Z])[a-zA-Z0-9]");
//(?=.*[a-zA-Z]) will return true if data will contain at least one letter
//and will contain only letters a-zA-Z and digits 0-9
for (String s : allTokens) {
    Matcher m = p.matcher(s);
    if (m.matches()) {
        correctTokens.add(s);
    }
}
System.out.println(correctTokens); 
```

输出：

```
[in1, in, out, sig, 1out2, sig] 
```

# php - 如何选择 Magento 顶级链接

> ID：16000541
> 
> 赞同：0
> 
> 时间：2013-04-14T15:08:26.880
> 
> 标签：php, html, css, xml, magento

我正在寻找正确的 CSS 选择器来选择在 links.phtml 中找到的这个无序列表：

```
<ul class="links"<?php if($this->getName()): ?> id="<?php echo $this->getName() ?>"<?php endif;?>>
    <?php foreach($_links as $_link): ?>
        <?php if ($_link instanceof Mage_Core_Block_Abstract):?>
            <?php echo $_link->toHtml() ?>
        <?php else: ?>
            <li<?php if($_link->getIsFirst()||$_link->getIsLast()): ?> class="<?php if($_link->getIsFirst()): ?>first<?php endif; ?><?php if($_link->getIsLast()): ?> last<?php endif; ?>"<?php endif; ?> <?php echo $_link->getLiParams() ?>><?php echo $_link->getBeforeText() ?><a href="<?php echo $_link->getUrl() ?>" title="<?php echo $_link->getTitle() ?>" <?php echo $_link->getAParams() ?>><?php echo $_link->getLabel() ?></a><?php echo $_link->getAfterText() ?></li>
        <?php endif;?>
    <?php endforeach; ?>
</ul> 
```

我假设这样的事情会起作用：

```
ul.links li {
    display: inline;
} 
```

然而事实并非如此。使用 Chrome 的开发人员工具进行检查时，我可以让一些列表项内联显示，但不是全部显示，或者使用一个简单的选择器。

任何想法将不胜感激！

如果有帮助，可以在 www.kokorugs.com/magento 查看问题

# ruby - 正则表达式具有积极的后视效果，直到插值并与其他表达式结合

> ID：16000546
> 
> 赞同：0
> 
> 时间：2013-04-14T15:08:44.717
> 
> 标签：ruby, regex, oniguruma

使用积极的向后看，各个正则表达式匹配它们各自的字符串。结合起来，它们不会。当通过删除积极的后视来更改它时，它匹配。我不明白为什么并且想知道以便我可以修复它，因为我不希望比赛被取消。

```
value = /  # match a digit or something wrapped in quotes
        (?<value>
          \d+         # Match a digit
            |         # or
          (?:         # Match something wrapped in double quotes
            (?<=")  # <- this is the point of contention
            [^"]+     # captures anything not a "   
            (?=")
          )
            |         # or
          (?:         # Match something wrapped in single quotes
            (?<=')  # <- or this one
            [^']+     # captures anything not a '
            (?=')
          )
        )
      /x

value.match %q!'filename.rb'!
# => #<MatchData "filename.rb" value:"filename.rb">
value.match %q!"filename.rb"!
# => #<MatchData "filename.rb" value:"filename.rb">
value.match %q!66!
# => #<MatchData "66" value:"66"> 
```

所以它匹配任何数字或任何包含在匹配引号中的东西。

```
long_option = /
        (?<long_option>
          (?<!
            (?:\-\-no\-)   # don't match --no-long
              |
            (?:\-\-\-)     # don't match ---long
          )
          (?<=\-\-)        # it must begin with --
          (?<key_name>
            [a-zA-Z]\w+    # capture the key name
          )
          \b
          (?!
            \-             # make sure it's not part of a longer key
          )
        )
      /x

long_option.match "--long"
# => #<MatchData "long" long_option:"long" key_name:"long">
long_option.match "---long"
# => nil
long_option.match "--long-"
# => nil
long_option.match "--no-long"
# => nil 
```

这也很好地匹配。

现在结合起来，问题开始了：

```
/#{long_option} #{value}/.match "--long 'filename.rb'"
# => nil 
```

但是如果`value`在没有对第一个引号进行肯定的情况下重新定义，它匹配：

```
value2 = /
        (?<value>
          \d+
            |
          (?:
            "       # <- no positive lookbehind
            [^"]+
            (?=")
          )
            |
          (?:
            '       # <- for single quote too
            [^']+
            (?=')
          )
        )
      /x

/#{long_option} #{value2}/.match "--long 'filename.rb'"
# => #<MatchData
 "long 'filename.rb"
 long_option:"long"
 key_name:"long"
 value:"'filename.rb"> 
```

我已经尝试将`long_option`与更简单的匹配结合起来并且它有效，所以我倾向于认为它不是问题的*明显*根源，因此我的问题是，例如

```
/#{long_option} abc/.match "--long abc"
# => #<MatchData "long abc" long_option:"long" key_name:"long"> 
```

我已经在脑海中完成了比赛，反复试验，模式略有不同，我真的被卡住了。任何帮助或见解将不胜感激。

Ruby 版本是 1.9。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:50:06.580

`/#{long_option} #{value}/`不会像您预期的那样匹配双引号或单引号中的字符串，因为正向后视出现在 的开头`value`，当它前面的字符是双引号或单引号时，匹配成功。但是在 中`/#{long_option} #{value}/`，前面的字符`value`是空格，并且由于空格字符不能同时是双引号或单引号，因此该替代匹配永远不会成功。

# android - 模拟器中的 Google Play 服务，实现 Google Plus 登录按钮等

> ID：16000548
> 
> 赞同：17
> 
> 时间：2013-04-14T15:09:01.683
> 
> 标签：android, google-plus, google-play, google-play-services

在 Android 应用程序中集成 Google Plus 登录按钮时，我发现按钮在实际设备和模拟器中的显示方式存在一些差异。我知道 Google Plus 服务 APK 未安装在模拟器中，但这可以通过从设备中提取 APK 并使用 APK 将它们安装到模拟器中来解决。

我当前的“实现”只是在布局中包含登录按钮，通过使用以下 XML 代码引用按钮：

```
<com.google.android.gms.common.SignInButton
    android:id="@+id/sign_in_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" /> 
```

当我在设备上测试我的应用程序时，根据此处提到的指南[https://developers.google.com/+/mobile/android/sign-in](https://developers.google.com/+/mobile/android/sign-in) ，该按钮显示为红色和闪亮。但是在模拟器上运行时，它只是一个普通按钮（带有黑色文本的灰色背景），上面写着“使用 Google 登录”。

知道为什么结果不同吗？我已经确定我正在运行相同的 API 级别，并且资源似乎也被正确地拉入了模拟器，因为它显示了实际的登录按钮（但外观不同）。

**更新：**在logcat中找到线索；消息“未找到登录按钮，请改用占位符。” 几乎可以解释为什么我在模拟器上看到灰色沉闷的按钮。仍然需要弄清楚原因；可能是“从设备复制 google plus apk”黑客无法正常工作。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-06-21T22:39:36.807

Google Play 服务适用于 4.2.2 版本的 Android 模拟器，并且如[Android 文档中所述得到官方支持：设置 Google Play 服务](http://developer.android.com/google/play-services/setup.html)。

**更新**

您现在可以将 Intel/x86 映像（HAXM 兼容）用于 API 19 和更新版本，对于 ARM，Google Play 服务可用于大多数映像。

**设置图像**

要为您的虚拟设备管理器获取正确的映像：

*   打开 Android SDK 管理器
*   打开群组 Android 4.2.2 (API 17)
*   检查 Google API
*   检查 ARM EABI v7a 系统映像

![在此处输入图像描述](https://i.stack.imgur.com/Yv4Tw.png)

创建虚拟设备：

*   打开 Android 虚拟设备管理器
*   创建新设备
*   输入 AVD 名称
*   将目标设置为*Google API (Google Inc.) - API 级别 17*
*   保存您的虚拟设备并启动它...

**注意** *CPU/ABI 将固定为 ARM*

![在此处输入图像描述](https://i.stack.imgur.com/x6zI2.png)

现在您应该可以在模拟器中使用 Google Play 服务了。值得注意的是，您需要在您的 Android 项目中将目标适当地设置为 Google API，以便 Google Play 服务正常工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-14T21:26:59.010

我尝试了运行模拟器的大多数组合，但有无谷歌 API，这意味着我在 x86 和 arm 模式下都进行了测试。我发现无法从我的 Galaxy Nexus 手机中提取 apk 以在模拟器上正确运行。

猜测这与让 Play 商店启动和运行有点相关，我决定也尝试一下，看看我是否有更多的运气。我没有; 也无法正常工作。Play 商店图标出现并且可以启动，但它会立即自行关闭。

然而，起作用的是在此处下载并安装页面底部的 apk：

[http://umut.tekguc.info/en/content/google-android-map-v2-step-step](http://umut.tekguc.info/en/content/google-android-map-v2-step-step)

安装完 vending 和 gms 包后，登录按钮就出现在模拟器下面了。由于我还没有真正实现实际的登录功能，我不能确定它是否真的可以工作，但至少按钮现在在我的设备上的应用程序和模拟器中看起来是相同的。

您还需要下载 Google Play Services 软件（在 Android SDK 管理器中的“Extras”下查看），并在您的项目中安装库 google-play-services_lib（File-Import-Android-Existing Android Code Into Workspace，然后浏览到例如 /opt/adt-bundle-linux/sdk/extras/google/google_play_services/libproject 并选择 google-play-services_lib）。

另一个有趣的消息是，这仅适用于“纯”Android 模拟器设置，不适用于“Google API”设置。后者似乎已经在模拟器中安装了这些应用程序的某些部分（不可见且无法正常工作），并且我还没有设法删除现有版本以安装如上所述工作的自定义 apk 文件。我测试了 adb remove、adb install、adb install -r，甚至从 /data 中删除目录也失败了。看起来很像谷歌试图让这变得困难。

我很失望谷歌让这件事变得如此艰难。谷歌可能有一些奇怪的许可理由将这些东西排除在模拟器之外，但如果他们真的希望人们在他们的 Android 应用程序中使用他们的服务，他们需要让这些服务在模拟器中可用。强迫人们总是在设备上开发（有其他优秀的模拟器可用）或让人们跳过箍（大量谷歌搜索，安装非官方/黑客版本的 apk 等）只是邪恶的。

接受我的回答之前的最后更新；尽管现在模拟器中显示了具有正确样式的正确按钮，但我仍然无法让“选择帐户”对话框出现在模拟器中。当/如果我这样做，我将在这里分享正确的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T15:51:33.240

检查 ldpi、mdpi、hdpi 等文件夹以获取不同的按钮图形。您的模拟器几乎肯定是与您的设备不同的 DPI。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-29T17:55:42.853

[![实现了 google API 的 Android 图像](https://i.stack.imgur.com/ePdtq.png)](https://i.stack.imgur.com/ePdtq.png)我注意到从 API 21 开始，有 ARM 和 x86 图像实现了谷歌 API，如果你使用 android 5 模拟没有问题，它可以在不提取 APK 的情况下工作

# jquery - jquery将变量分配给输入值最大值

> ID：16000553
> 
> 赞同：0
> 
> 时间：2013-04-14T15:09:22.550
> 
> 标签：jquery, variables, input

我有一个输入表单，我想为最大字段值分配一个变量。

这个变量是容器的宽度。

这是我未输入的html代码：

```
<input type="range" max="variable" step="1%" value="0"/> 
```

我怎么能用jquery做到这一点。获取容器的宽度，然后在输入表单的最大值中分配它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:34:17.077

这是一种方法（有一个额外的输入文本框来显示范围的值）。

[jsfiddle 演示](http://jsfiddle.net/sQk8a/1/)

HTML：

```
<div id="container">
    <input type="range" max="variable" step="1%" value="0"/>
    <input type="text" />
    <span></span>
</div> 
```

jQuery：

```
// cache re-usable jQuery elements
var $container = $('#container'),
    $range = $('[type="range"]'),
    $rangeValue = $('[type="text"]');

// initialize values:

// set range max to container width
$range.attr('max', $container.width());
// set rangeValue to range's value
$rangeValue.val($range.val());
// display container's width
$container.find('span').text('container width: ' + $container.width());

// events:

// set the rangeValue on range change
$range.change(function() {
    $rangeValue.val($range.val());
});

// set the range on rangeValue change
$rangeValue.change(function() {
    $range.val($rangeValue.val());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T15:17:52.583

```
// Get the max attr
var arr = $("input").attr('max');
console.log(arr);  // variable 

// Set the max attr
$("input").attr('max', 100);

arr = $("input").attr('max');
console.log(arr);  // 100 

// Get the width of container and set the max attr
var width = $("#containerID").width()
$("input").attr('max', width); 
```

# android - 与客户端共享我的 Android 密钥库

> ID：16000554
> 
> 赞同：7
> 
> 时间：2013-04-14T15:09:29.657
> 
> 标签：android, android-keystore

我为不同的客户开发了应用程序，但我一直在所有这些应用程序中使用相同的密钥库。我的一个客户想要更新 Playstore 上的应用程序，他想自己做。所以，他要求我分享我的密钥库。这是因为他不想丢失与应用相关的评级等。

由于我在所有应用程序中都有相同的密钥库，因此我有点不愿意这样做。有人可以建议我一个对我们双方都有效的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T15:12:22.520

个人建议：**不要与任何*人*共享您的密钥库**

除此之外，您可以让客户将 apk 发送给您，对其进行签名，然后将其发回给他。如果您不想这样做，则必须共享密钥库才能达成友好的解决方案。

您可以尝试向客户解释它带来的安全风险，并查看他们是否同意在更多评级和下载发生之前重新发布该应用程序。

此外，您应该始终为每个单独的客户端（甚至单独的应用程序）创建一个新的密钥库。

# actionscript-3 - 1021：我的动作脚本中的重复函数定义

> ID：16000556
> 
> 赞同：1
> 
> 时间：2013-04-14T15:09:36.933
> 
> 标签：actionscript-3, flash, actionscript, flash-cs5, flash-cs4

[这是我之前的问题（ Problems Scripting Multiple Buttons(nearlyly same) in a single Action Script](https://stackoverflow.com/questions/15994739/problems-scripting-multiple-buttonsnearly-identical-in-a-single-action-script)）的后续问题

我正在制作一个交互式 Flash 项目......它有 17 个独立的场景......

*   介绍场景
*   “主序列”
*   15个单独的标题歌曲页面....

我的第一个问题是“主序列”有 15 个按钮，我需要将它们链接到 15 个单独的场景......我正在使用以下代码......

```
 TD_g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
    s_g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
    ats_g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
    iyk_g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
    hms_g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
    tf_g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
    hd_g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
    ld_g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
    ll_g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
    ts_g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
    ipsy_g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
    ysm_g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
    ihm_g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
    iss_g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
    tl_g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
    function mouseDownHandler(event:MouseEvent):void {
   var nameOfButton:String=event.currentTarget.name;
   if (nameOfButton=="TD_g") {
    gotoAndStop(1, "Tweedlee_Dee");
} else if (nameOfButton=="s_g") {
    gotoAndStop(1, "Sincerely");
} else if (nameOfButton=="ats_g") {
    gotoAndStop(1, "Ain’_that_a_shame");
} else if (nameOfButton=="iyk_g") {
    gotoAndStop(1, "I_hear_you_knocking");
} else if (nameOfButton=="hms_g") {
    gotoAndStop(1, "Hearts_made_of_stone");
} else if (nameOfButton=="tf_g") {
    gotoAndStop(1, "Tutti_fruiti");
} else if (nameOfButton=="hd_g") {
    gotoAndStop(1, "Hound_Dog");
} else if (nameOfButton=="ld_g") {
    gotoAndStop(1, "Little_darlin");
} else if (nameOfButton=="ll_g") {
    gotoAndStop(1, "Louie_Louie");
} else if (nameOfButton=="ts_g") {
    gotoAndStop(1, "Twist_and_shout");
} else if (nameOfButton=="ipsy_g") {
    gotoAndStop(1, "I_put_a_spell_on_you");
} else if (nameOfButton=="ysm_g") {
    gotoAndStop(1, "You_shook_me");

} else if (nameOfButton=="ihm_g") {
    gotoAndStop(1, "I_can_hear_music");

} else if (nameOfButton=="iss_g") {
    gotoAndStop(1, "I_shot_the_sheriff");

} else if (nameOfButton=="tl_g") {
    gotoAndStop(1, "Tainted_love");
}
    } 
```

当我运行序列时，出现以下 15 个错误`1021: Duplicate function definition. Source : function mouseDownHandler(event:MouseEvent):void {`

我尝试将其更改为`..._g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);`在每个 DownHandler ex) 中包含一个唯一的#next) `TD_g.addEventListener12(MouseEvent.MOUSE_DOWN, mouseDownHandler1);`..我仍然收到 15 个错误...

谢谢 ！

PS ...我还希望`stop();`在该动作脚本中插入某个位置，以便在为该场景播放动画后，人们有机会导航并单击按钮，而不是“跳转”到下一个场景！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T18:30:59.197

我个人更喜欢使用哈希映射/字典来处理这样的名称/值对。所以你的代码可以写成：

```
var buttonMap:Dictionary = new Dictionary();
buttonMap["TD_g"] = "Tweedlee_Dee";
buttonMap["s_g"] = "Sincerely";
buttonMap["ats_g"] = "Ain’_that_a_shame";
buttonMap["iyk_g"] = "I_hear_you_knocking";
buttonMap["hms_g"] = "Hearts_made_of_stone";
buttonMap["tf_g"] = "Tutti_fruiti";
buttonMap["hd_g"] = "Hound_Dog";
buttonMap["ld_g"] = "Little_darlin";
buttonMap["ll_g"] = "Louie_Louie";
buttonMap["ts_g"] = "Twist_and_shout";
buttonMap["ipsy_g"] = "I_put_a_spell_on_you";
buttonMap["ysm_g"] = "You_shook_me";
buttonMap["ihm_g"] = "I_can_hear_music";
buttonMap["iss_g"] = "I_shot_the_sheriff";
buttonMap["tl_g"] = "Tainted_love";

TD_g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
s_g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
ats_g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
iyk_g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
hms_g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
tf_g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
hd_g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
ld_g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
ll_g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
ts_g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
ipsy_g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
ysm_g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
ihm_g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
iss_g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
tl_g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);

function mouseDownHandler(event:MouseEvent):void {
    gotoAndStop(1, buttonMap[event.currentTarget.name]);
} 
```

仍然不能解决你的问题。该错误表明您已`function mouseDownHandler`在代码中的其他位置定义。单击编译器错误中带有错误的行并找到重复的代码。暂时评论它，然后弄清楚为什么它首先被复制/粘贴并改进/修复它。高温高压

# inheritance - Modelica - 在扩展模型中更改默认介质 (Dymola)

> ID：16000558
> 
> 赞同：1
> 
> 时间：2013-04-14T15:09:50.590
> 
> 标签：inheritance, documentation, modelica, dymola

我想更改扩展模型中的默认介质，以便新值显示在“文档”选项卡中。例如：

```
partial model A
  replaceable package Medium = Modelica.Media.Interfaces.PartialMedium;
  ...
end A;

model B
  extends A;
  ...
end B;

model C
  extends B(
    redeclare replaceable package Medium = Modelica.Media.Water.StandardWater);
  ...
end C; 
```

不幸的是，我无法弄清楚为什么模型 C 的文档仍然说 Medium 的默认值是 PartialMedium 或者我如何改变这种行为！当我尝试重新定义模型时，也会发生同样的事情。

（一个例子是继承自 Modelica.Fluid.Pipes.DynamicPipe 的类，它为 Medium 包或 HeatTransfer 和 FlowModel 模型设置不同的默认值）

我需要在模型 (C) 中定义这些值，因为我正在尝试用约 80 根管道对加热回路进行建模，并且不想一遍又一遍地定义这些值。

是否可以以某种方式清理文档？

提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:46:27.457

您没有提到该工具正在使用，但由于您将 Dymola 标签放在问题上，我将假设它是 Dymola。

这确实是 Dymola 支持台的一个问题。我对 Dymola 的内部运作没有任何深刻的见解，这会给我一个关于如何让它识别你想要的默认值的线索。但是，您可以在模型中尝试这种方法（未经测试）：

```
model C
  replaceable package MyMedium = Modelica.Media.Water.StandardWater
  extends B(
    redeclare package Medium = MyMedium);
  ...
end C; 
```

这建立了一个新的类（和默认值）。也许这对你来说就足够了？

你也可以尝试这样的事情（建立一个新的约束类型）：

```
model C
  extends B(
    redeclare replaceable package Medium =
        Modelica.Media.Water.StandardWater constrainedby
        Modelica.Media.Water.StandardWater);
  ...
end C; 
```

（再次，未经测试）

# javascript - 淘汰js'with'绑定，如果数组为空则隐藏

> ID：16000559
> 
> 赞同：8
> 
> 时间：2013-04-14T15:09:58.350
> 
> 标签：javascript, knockout.js, knockout-2.0

我有一个控制子类别下拉列表的类别下拉列表。如果所选类别的子类别数组为空，我想隐藏子类别下拉列表。

下面的示例代码：

```
<script>

    self.categories = ko.observableArray([
            {"name": "top 1", "subcategories":[
                                              {"name": "sub 1"},
                                              {"name": "sub 2"}
                                              ]},
            {"name": "top 2", "subcategories":[]}
    ]);

    self.selected_category = ko.observable();
    self.selected_sub_category = ko.obserable();

</script>

<div>
    <select data-bind="options: categories, optionsText: "name", optionsCaption: "Select", value: selected_category"></select>
</div>  
<div data-bind="with:selected_category">
    <select data-bind="options: subcategories, optionsText: "name", optionsCaption: "Select", value: selected_sub_category"></select>
</div> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-14T15:46:51.783

您需要将`with`绑定与`if`（或`visible`）绑定结合起来，您可以在其中指定您的条件：

```
<div data-bind="with: selected_category">
    <!-- ko if: subcategories.length > 0 -->
    <select data-bind="options: subcategories, optionsText: 'name', 
        optionsCaption: 'Select', value: $parent.selected_sub_category"></select>
    <!-- /ko -->
</div> 
```

演示[JSFiddle。](http://jsfiddle.net/Vvuxd/1/)

`$parent`请注意 中的用法`value: $parent.selected_sub_category`，您需要它来访问“父”对象，因为它`with`创建了一个子上下文。

如果您不想`div`在子集合为空时呈现整体，那么您需要将`with`and移到`if`您的外部`div`，因为 KO 不允许在同一元素上使用多个控制流绑定。

因此，在这种情况下，您的 HTML 将如下所示：

```
<!-- ko with:selected_category -->
    <!-- ko if: subcategories.length > 0 -->
        <div class="mydiv">    
            <select data-bind="options: subcategories, optionsText: 'name', 
                    optionsCaption: 'Select', 
                    value: $parent.selected_sub_category">
            </select>    
        </div> 
    <!-- /ko -->
<!-- /ko --> 
```

演示[JSFiddle。](http://jsfiddle.net/Vvuxd/2/)

# sql-server - 如何从具有自动编号 ID 的表中导出寄存器？

> ID：16000560
> 
> 赞同：0
> 
> 时间：2013-04-14T15:09:59.640
> 
> 标签：sql-server, database-design, autonumber

我有一个数据库，其中所有表的 ID 都是自动数字字段。我认为这是最好的选择，但是如果我需要将数据从一个数据库导出到另一个数据库，我该怎么做呢？因为我可以在自动数字字段中插入一个值。

自动数字是一个不错的选择，还是只会带来更多的问题而不是好处？如果一般情况下我设置ID更好，那么确定ID的好方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T16:01:25.180

将身份数据从一个数据库移动到另一个数据库并不是什么大问题。您可以编写插入语句（包括 IDENTITY 列）的脚本，然后为每个目标表问题编写脚本：

```
SET IDENTITY_INSERT dbo.tablename ON;

-- ... inserts here

SET IDENTITY_INSERT dbo.tablename OFF; 
```

一些第 3 方工具会为您自动执行此操作，因此您不必担心。

# c# - DropDownList 不会回发 SelectedIndex 已更改

> ID：16000565
> 
> 赞同：0
> 
> 时间：2013-04-14T15:10:32.153
> 
> 标签：c#

当所选项目发生更改时，我试图将 DropDownList 设置为 AutoPostBack。对于为什么这不起作用，我会有点疯狂。

有没有人有任何快速的想法？请帮助

这是代码： -

```
 <asp:DropDownList ID="ddl_username" runat="server"
     AutoPostBack="True" 
     onselectedindexchanged="ddl_username_SelectedIndexChanged" 
     DataTextField="Shortname" DataValueField="ID">
     </asp:DropDownList>`

 protected void Page_Load(object sender, EventArgs e)
 {
    if (!IsPostBack)
    {
      Bind_Users();
    }
 }

 private DataSet Bind_Users()
{
DataSet ds;
ds = cs.BindUsers();
if (ds.Tables[0] != null)
{
    if (ds.Tables[0].Rows.Count > 0)
    {
        ddl_username.DataSource = ds.Tables[0];
        ddl_username.DataTextField = "Shortname";
        ddl_username.DataValueField = "ID";
        ddl_username.DataBind();
        ListItem li = new ListItem();
        li.Text = "Select";
        li.Value = "-1";
        ddl_username.Items.Insert(0, li);
        ddl_username.SelectedIndex = 0;
    }
    //ddl_username.SelectedIndex = 0;
    //ddl_username.Text = "-----Select-----";
}
return ds;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:17:52.220

如果您想打电话，请在回发时`Bind_Users()`删除：

```
if (!IsPostBack)
{
  Bind_Users();
} 
```

# jquery - Jquery 文件上传插件浏览两次

> ID：16000566
> 
> 赞同：1
> 
> 时间：2013-04-14T15:10:33.493
> 
> 标签：jquery, plugins, file-upload

我使用 jquery 文件上传插件，当我浏览一些文件并将它们添加到列表时一切顺利。之后，当我浏览更多文件并提交时，插件会发送两个 ajax 请求。因为我浏览了两次。
有什么选项可以设置吗？
我也设置了参数`singleFileUploads:false`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-01T22:29:04.967

尝试取消绑定点击：

```
unbind("click") 
```

**示例代码：**

```
add: function (e, data) {
    $('#btnSave').unbind("click").click(function () {
        $('<li/>').text("click : btnSave").appendTo('#history');
        data.submit();
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T15:23:26.833

能够一次性发送文件的唯一方法是使用 html5 FormData。它可能没有使用它。

您必须了解 ajax 文件上传的工作原理才能回答您的问题。每次点击浏览时，都会有隐藏的文件输入填充您选择的文件。如果它是单个文件输入，您将覆盖之前的选择。

你唯一的希望是 html5 文件上传 api，但它在大多数 IE 上不可用，所以它可能没有被这个插件使用

# html - CSS 元素和文本不透明度

> ID：16000567
> 
> 赞同：1
> 
> 时间：2013-04-14T15:10:33.517
> 
> 标签：html, css

是否有任何选项可以将元素的不透明度（在我的情况下为下拉菜单）设置为零，但该元素中的文本不透明度设置为 100 ？我想这样做，因为不透明度为 0 我可以隐藏箭头，但文本也隐藏了，所以我需要一个解决方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T15:14:02.893

不，没有办法做到这一点，因为子级`opacity`从父级继承属性（这是无法更改的），并且`<option>`元素不能存在于`<select>`元素之外。

换句话说，如果将`<select>`元素设置`opacity`为`0`，则实际上是隐藏了该元素及其子元素。

如果您不使用`<select>`元素，我会说您可以使用`position: relative;`或`position: absolute`使用 z-index 将文本覆盖在`opacity`已设置为零的父元素上。

我确实记得当我第一次开始潜入 Web 开发的美妙世界时，我自己研究过这个问题。这种情况是 w3schools 如何提供不良信息的完美示例，因为他们的示例看起来可以做到这一点。

如果你*真的*需要一个解决方案，那么我建议你在没有现有工具的情况下做我们都喜欢做的事情：发明一个。制作您自己的`<select>`元素版本，并使用 JavaScript 使其工作。您甚至可以制作自己的 XML 标记并使用 JavaScript 告诉它如何呈现和操作。或者，您可以只使用`<div>`s、`<span>`s（当然还有其他）以及 CSS 和 JavaScript 来实现这一点。

祝你好运！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T15:14:55.240

不，不透明度适用于整个元素（包括后代）。但是，您可以使用具有透明度的颜色作为背景（假设它是纯色）

```
div {
    background-color: rgba(0, 0, 0, 0.5); /* black with 50% opacity */
    color: black; /* text is black with 100% opacity */
} 
```

演示在[http://jsfiddle.net/ESzTT/1/](http://jsfiddle.net/ESzTT/1/)

### 编辑

就像 Zachary Kniebel 在他的回答中所说的那样，这对`<select>`元素`<option>`不起作用。您可以使用包含其他元素的下拉菜单，或者如果这是针对表单字段的，则可以使用 javascript 库替换 DOM 元素以使其具有样式。

# javascript - AngularJS中的多个独立部分

> ID：16000568
> 
> 赞同：7
> 
> 时间：2013-04-14T15:10:34.460
> 
> 标签：javascript, model-view-controller, angularjs

我一直在编写我现在想要扩展的 Angular.js 教程。这是一个简单的 CRUD 应用程序，它有一个模板列表：list.html（只是在一个带有标题和内容的数据库中记录）、一个创建表单：new.html 和一个编辑表单：edit.html。

刚才 list.html 从我的 REST 应用程序加载了一组模板并将它们显示在表格中。有一个搜索表单和一些排序功能。

New.html 有一个用于创建新模板的表单。

这两个 .html 文件是通过不同的路径加载的。`#/`和`#/new`

我现在要做的是有一个文件**index.html**将 list.html 加载到一个 div 中，然后将 new.html 加载到另一个 div 中。这个想法是记录列表将始终显示在左侧，然后其他部分将加载到右侧的区域中。因此，单击列表中的模板将在列表旁边的区域中打开它，但列表保持不变。然后，如果我单击新模板按钮，新模板表单将重新出现在内容区域中，但列表将保持不变。

这是我的代码：

应用程序.js

```
var MailStash = angular.module("MailStash", ["ngResource"]).
    config(function($routeProvider){
        $routeProvider.
            when('/', {controller: ListCtrl, templateUrl: '/js/partials/list.html'}).
            when('/new', {controller: CreateCtrl, templateUrl: '/js/partials/new.html'}).
            when('/edit/:editId', {controller: EditCtrl, templateUrl: '/js/partials/edit.html'})
    });

MailStash.factory('Template', function($resource){
    return $resource('/api/v1/template/:id', {id: '@id'}, { update: { method: 'PUT' } });
});

var EditCtrl = function($scope, $location, $routeParams, Template) {
    $scope.action = "Update";

    var id = $routeParams.editId;
    $scope.template = Template.get({id: id});

    $scope.save = function () {
        Template.update({id: id}, $scope.template, function () {
            $location.path('/');
        });
    };
}

var CreateCtrl = function($scope, $location, Template) {
    $scope.save = function() {
        Template.save($scope.template, function(){
            $location.path('/');
        });
    }
}

var ListCtrl = function($scope, $location, Template) {
    $scope.search = function() {
        Template.query({
            q: $scope.query,
            sort_order: $scope.sort_order, 
            is_desc: $scope.is_desc,
            offset: $scope.offset,
            limit: $scope.limit
            },
            function(data){
                $scope.more = data.length === 20;
                $scope.templates = $scope.templates.concat(data);
            });
    }

    $scope.sort = function(col) {
        if($scope.sort_order === col) {
            $scope.is_desc = !$scope.is_desc;
        } else {
            $scope.sort_order = col;
            $scope.is_desc = false;
        }

        $scope.reset();
    };

    $scope.showMore = function(){
        $scope.offset += $scope.limit;
        $scope.search();
    };

    $scope.hasMore = function(){
        return $scope.more;
    }

    $scope.reset = function() {
        $scope.limit = 10;
        $scope.offset = 0;
        $scope.templates = [];
        $scope.more = true;

        $scope.search();
    }

    $scope.delete = function() {
        var id = this.template.id;
        Template.delete({id: id}, function(){
            $('#template_'+id).fadeOut();
        });
    }

    $scope.sort_order = "title";
    $scope.is_desc = false;

    $scope.reset();
}; 
```

列表.html：

```
<form class="form-search">
    <div class="input-append">
        <input type="text" ng-model="query" class="input-medium search-query" placeholder="Search">
        <button ng-click="reset()" type="submit" class="btn"><i class="icon-search"></i></button>
    </div>
    <button ng-click="query=''; reset()" ng-disabled="!query" type="submit" class="btn">Reset</button>
</form>
<p class="sort">
    Sort: 
    <a ng-click="sort('title')">Title</a>
    <span ng-show="sort_order=='title' && is_desc==true"><i class="icon icon-arrow-down"> </i></span>
    <span ng-show="sort_order=='title' && is_desc==false"><i class="icon icon-arrow-up"> </i></span>
    &nbsp;|&nbsp;
    <a ng-click="sort('created_at')">Date Created</a>
    <span ng-show="sort_order=='created_at' && is_desc==true"><i class="icon icon-arrow-down"> </i></span>
    <span ng-show="sort_order=='created_at' && is_desc==false"><i class="icon icon-arrow-up"> </i></span>
</p>
<table class="table">
    <tbody>
        <tr ng-repeat="template in templates" id="template_{{template.id}}">
            <td>{{template.title}}</td>
        </tr>
    </tbody>
</table>
<a ng-show="hasMore()" ng-click="showMore()">Show more</a>
<hr>
<a href="/#/new" class="btn"><i class="icon icon-plus"> </i> New Template</a> 
```

新建.html

```
<h2>New Template</h2>
<form name="new_template">
    <div class="control-group" ng-class="{error: form.title.$invalid}">
        <div class="controls">
            <input type="text" class="span6" ng-model="template.title" name="title" id="title" value="" placeholder="Template name" />
        </div>
    </div>

    <div class="control-group" ng-class="{errors: form.content.$invalid}">
        <div class="controls">
            <textarea name="content" ng-model="template.content" id="content" class="template-content span12" rows="15"></textarea>
        </div>
    </div>
    <div class="form-actions">
        <button ng-click="save()" class="btn btn-primary save-template">Save Template</button>
    </div>
</form> 
```

我的布局文件：

```
<!DOCTYPE html>
<html ng-app="MailStash" xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://ogp.me/ns/fb#">
    <head>
        <title>MailStash</title>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Billy Jones - http://theninthnode.com">
        {{ Html::style('css/bootstrap.cerulean.min.css') }}
        @yield('css')
        {{ Html::style('css/style.css') }}
    </head>
    <body class="preview" data-spy="scroll" data-target=".subnav" data-offset="80">
        <div class="container-fluid">
            @include('common.header-fluid')
        </div>
        <div class="container-fluid main">
            <div ng-view></div>
            @include('common.footer')
        </div>

        {{ HTML::script('js/jquery.min.js') }}
        {{ HTML::script('js/bootstrap.min.js') }}
        {{ HTML::script('js/angular.min.js') }}
        {{ HTML::script('js/angular-resource.min.js') }}
        {{ HTML::script('js/jquery.dataTables.min.js') }}
        @yield('scripts')
        {{ HTML::script('js/app.js') }}
        {{ HTML::script('js/main.js') }}
    </body>
</html> 
```

我尝试使用：

```
<div class="row-fluid">
    <div class="span3">
        <div ng-include="'/js/partials/list.html'"></div>
    </div>
    <div class="span9">
        <div ng-include="'/js/partials/new.html'"></div>
    </div>
</div> 
```

但是我失去了这些部分的功能。即搜索表单停止工作，新模板表单停止工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T15:27:25.033

我认为您要说的是您将`<div ng-view></div>`2 替换为最后一个块`ng-include`。

如果是这样，您可能不需要`controller`在路由配置中定义并需要向`ng-controller`html 添加属性

# c - 尝试验证其存在后，换行符删除不起作用

> ID：16000569
> 
> 赞同：2
> 
> 时间：2013-04-14T15:10:43.740
> 
> 标签：c, arrays, string, newline

我正在编写代码来解析一些输入数据并将其以特殊格式写入文件。我正在从每个字符串标记中删除一个换行符，如下所示：

```
token[strlen(token)-2] ='\0' 
```

这是`-2`因为最后一个元素是`\0`. 这很管用。但是，输入数据的最后一个元素没有换行符，因此仅使用它最终会从最后一个输入集中删除倒数第二个字符。

```
original input: 0.38
after running it through the removal: 0.3 
```

显而易见的解决方案是在删除之前检查换行符是否存在。我这样做：

```
if(token[strlen(token)-2] =='\n') token[strlen(token)-2] ='\0'; 
```

但是，添加 if 子句后，换行符不再删除！我究竟做错了什么？整个代码的片段：

```
 while((token = strsep(&line, ",")) != NULL){
        if(x++ == 1){
            fwrite("    <item>\n", 11, 1, fw);
            fwrite("        <name>", 14, 1, fw);
            fwrite(token, strlen(token), 1, fw);
            fwrite("</name>\n", 8, 1, fw);
        }
        else if(isdigit(token[0])) {
            if(token[strlen(token)-2] =='\n') token[strlen(token)-2] ='\0';
            fwrite("        <SPC>", 13, 1, fw);
            fwrite(token, strlen(token), 1, fw);
            fwrite("</SPC>\n", 7, 1, fw);
            fwrite("    </item>\n", 12, 1, fw);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T15:14:37.737

您的换行符应该是 at `line[strlen(line)-1]`，但您可以在 Windows 下工作，其中换行符实际上由一个回车符和一个换行符组成。这可以解释为什么`line[strlen(line)-2]='\0'`成功删除行尾，但测试失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T15:16:36.810

我认为您的问题是使用`-2`而不是`-1`，使用此函数从字符串的右侧删除空格：

```
#include <ctype.h> 
/* remove whitespace from the right */ 
void rtrim(char *s) {
    char *p;
    for (p = s + strlen(s) - 1; p >= s && isspace(p[0]); p--);
    p[1] = 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-14T15:29:53.280

为了灵活性（没有字符计数，没有字符文字），我会这样做：

```
#include <string.h>

...

char * rtrim(char * str, const char * del)
{
  if (str)
  {
    char * pc;
    while (pc = strpbrk(str, del))
    {
      *pc = 0;
    }
  }

  return str;
}

...

char * line;

... /* let line point to some string */

/* to remove any kind of line end, call it like this: */
line = rtrim(line, "\n\r"); 
```

此解决方案涵盖 *IX、ms 和 mac 行结束，并且还可以在以下情况下生存：

```
#define char wchar_t 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-14T15:19:07.413

```
size_t len;
for(len=strlen(token); len && (token[len-1] == '\r' || token[len-1] == '\n'); len--) {
   token[len] = 0;
   } 
```

或者，您可以使用 strcspn()：

```
size_t len;
len = strcspn(token, "\r\n" );
token[len] = 0; 
```

或者，作为单行：

```
token [ token + strcspn(token, "\r\n" )] = 0; 
```

请注意，第一个片段仅删除*尾随*的 '\r's 和 '\n's; srcspn() 片段从他们遇到的*第一个*'\r' 或 '\n' 中删除所有内容。

# c# - 无法从实体框架中删除电影

> ID：16000570
> 
> 赞同：1
> 
> 时间：2013-04-14T15:10:45.043
> 
> 标签：c#, entity-framework, asp.net-mvc-4

我似乎在从我的数据库中删除电影时遇到了问题。我使用它的 FilmId 来定位电影，但是，当我尝试删除时，系统会提示我以下错误消息。

DELETE 语句与 REFERENCE 约束“FK_dbo.Genres_dbo.Films_Film_FilmId”冲突

我假设这是因为我的流派表通过 FilmId 与电影表有关系。

这是我的 DeleteFilm 方法

```
public ActionResult DeleteFilm(int id)
{
    Film film = db.Films.Find(id);
    db.Films.Remove(film);
    db.SaveChanges();
    return RedirectToAction("MyFilms");
} 
```

这是调用此方法的操作链接

```
@using (Html.BeginForm())
{
    @Html.ActionLink("Remove Movie", "DeleteFilm", new { id = Model.FilmId });
} 
```

我将如何删除关系以便我删除电影。任何帮助将不胜感激。

这是我的电影课

```
public class Film
{
    [Key]
    public int FilmId { get; set; }
    public string FilmTitle { get; set; }
    public int FilmReleaseYear { get; set; }
    public string FilmDirector { get; set; }
    public string FilmRating { get; set; }
    public string FilmImageUrl { get; set; }
    public string FilmImdbUrl { get; set; }
    public virtual ICollection<Genre> FilmGenres { get; set; }
    public virtual ICollection<FilmCastMember> FilmCastList { get; set; }
    public virtual ICollection<FilmReview> FilmReviews { get; set; }

    public Film()
    {
        FilmGenres = new List<Genre>();
        FilmCastList = new List<FilmCastMember>();
        FilmReviews = new List<FilmReview>();
    }
} 
```

这是我的流派类型

```
public class Genre
{   
    [Key]
    public int GenreId { get; set; }
    public string GenreType { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:21:20.433

我猜你需要在你的数据库中进行级联删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T15:21:54.957

您是否有一张位于电影和流派之间的表格来定义它们之间的关系？您可能需要在该表中查询您要删除的具有 FilmID 的所有记录，并将这些记录与实际的 Film 记录一起删除。

对于实体框架代码，您首先需要覆盖 DbContext 上的 OnModelCreating 方法。然后您需要调用 WillCascadeOnDelete 方法并将其传递给 true。

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Entity<Film>()
        .HasOptional(e => e.FilmGenres)
        .WithMany()
        .WillCascadeOnDelete(true);
} 
```

你可能会发现你需要做一个迁移来添加它。

或者，您可以调用 film.FilmGenres.Clear() 从集合中删除流派，但这会在一段时间后变得乏味。

```
using (var db = new FilmContext())
{
    Film film = db.Films.First(each => each.FilmTitle == "Some Title");
    film.FilmGenres.Clear();
    db.Films.Remove(film);
    db.SaveChanges();
} 
```

# python - 用 numpy 打破平局

> ID：16000574
> 
> 赞同：10
> 
> 时间：2013-04-14T15:11:22.520
> 
> 标签：python, numpy, scipy, rounding

标准的 numpy 圆形平局打破遵循 IEEE 754 约定，将一半舍入到最接近的偶数。有没有办法指定不同的舍入行为，例如朝零舍入或朝-inf 舍入？我不是在谈论天花板或地板，我只是需要不同的平局。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-14T15:35:43.960

NumPy 不对内部舍入模式进行任何控制。这里有两种选择：

1.  使用`gmpy2`，如[本答案](https://stackoverflow.com/a/15104444/1204143)中所述。这使您可以完全控制舍入模式，但使用`gmpy2`简单的浮点数学可能比 NumPy 慢。
2.  使用`fesetround`via`ctypes`手动设置舍入模式。这是特定于系统的，因为常量可能因平台而异；检查`fenv.h`平台上的常量值。在我的机器上（Mac OS X）：

    ```
    import numpy as np
    import ctypes
    FE_TONEAREST = 0x0000
    FE_DOWNWARD = 0x0400
    FE_UPWARD = 0x0800
    FE_TOWARDZERO = 0x0c00
    libc = ctypes.CDLL('libc.dylib')

    v = 1\. / (1<<23)
    print repr(np.float32(1+v) - np.float32(v/2)) # prints 1.0
    libc.fesetround(FE_UPWARD)
    print repr(np.float32(1+v) - np.float32(v/2)) # prints 1.0000002 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-28T12:55:12.420

# 使用开源软件 SWIG

要完成 nneonneo 的回答，如果您不想下载像 gmpy2 这样的大包，也不想使用带有 ctypes 的系统特定代码，您可以使用 C 与 SWIG 的绑定（假设您的计算机上已经有它）。

这是您需要做的（分四个步骤）：

1）首先编写一个名为 rounding.i 的文件：

```
%module rounding
%{
/* Put header files here or function declarations like below */

 void rnd_arr();
 void rnd_zero();
 void rnd_plinf();
 void rnd_moinf();
 void rnd_switch();
%}

extern  void rnd_arr();
extern  void rnd_zero();
extern  void rnd_plinf();
extern  void rnd_moinf();
extern  void rnd_switch(); 
```

2) 然后，一个文件 rnd_C.cpp

```
#include <stdio.h>
#include <stdlib.h>
#include <fenv.h>

void rnd_arr()
{
  fesetround(FE_TONEAREST);
}

void rnd_zero()
{
  fesetround(FE_TOWARDZERO);
}

void rnd_plinf()
{
  fesetround(FE_UPWARD);
}

void rnd_moinf()
{
  fesetround(FE_DOWNWARD);
}

void rnd_switch()
{
  int r=fegetround();

  if (r==FE_UPWARD)
    r=FE_DOWNWARD;
  else 
    if (r==FE_DOWNWARD)
      r=FE_UPWARD;
    else fprintf(stderr,"ERROR ROUDING MODE \n");
  fesetround(r);
} 
```

3）在您的终端中（如果您使用的不是python2.7版本，请在第二行替换python2.7）：

```
swig -c++ -python -o rounding_wrap.cpp rounding.i
g++ -fPIC -c rounding_wrap.cpp rnd_C.cpp -I/usr/include/python2.7
g++ -shared rounding_wrap.o rnd_C.o -o _rounding.so 
```

4）导入库 _rounding.so 你刚刚通过在你的 python 文件的开头录音创建：

```
from your_path_to_rounding.so import rounding 
```

# android - 从 Google Play 安装未发布的 Android 应用程序

> ID：16000579
> 
> 赞同：3
> 
> 时间：2013-04-14T15:11:42.730
> 
> 标签：android, testing, google-play

我刚刚将一个应用程序上传到 Play 商店。它现在处于草稿模式。是否可以通过访问 Play 商店在移动设备上进行测试？

我的意思是在发布之前，是否可以获得 Play 商店链接，以便我可以从 Play 商店下载并在移动设备上进行测试，从我添加到测试用户列表中的帐户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:13:25.553

在应用程序发布之前，您无法访问 Google Play 上的应用程序页面（即使这样也需要几个小时才能打开）。

除此之外，Google Play 链接始终采用以下格式：

```
https://play.google.com/store/apps/details?id=<your package name> 
```

您可以侧载（从 adb 安装，或直接从 apk 而不是 Google Play 安装）草稿 apk，如果签名正确，您可以使用它来测试 In App Billing 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T16:08:14.420

如果您需要测试草稿应用程序，请在您的设备上运行已签名的 apk。使用的密钥库应该与谷歌上传的 apk 相同。如果要调试应用程序，可以将 eclipse 的默认密钥库更改为自定义密钥库：

[按照此处](http://blog.blundell-apps.com/tut-change-alias-passwords-of-your-android-keystore/#comment-2408)的说明更改密钥库密码/密钥密码和密钥别名

然后更改 Eclipse 的 Preferences -> Android -> Build -> Custom keystore 并给出新的自定义 keystore 的路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T19:51:24.523

只需运行您在手机上创建的 apk，进行必要的更改，然后导出一个新的 apk，或者如果您想使用您拥有的相同列表，请更新其版本号，并使用您之前创建的相同密钥对其进行签名。

# node.js - 节点升级后 NPM 包不可用

> ID：16000583
> 
> 赞同：0
> 
> 时间：2013-04-14T15:12:13.610
> 
> 标签：node.js, npm

我最近将 NodeJS 从 0.8.X 升级到 0.10.X，现在我无法访问我之前安装的 npm 包。例如我经常使用 jshint 并且

```
jshint /path/to/file.js 
```

只是寄回`command not found`。我正在使用 NVM，所以如果我通过切换回来，`nvm use 0.8.X`我可以再次使用这些模块。

假设我需要重新注册 npm 或其他东西，但我只是好奇是否有更直接的东西我错过了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:28:02.790

使用 nvm 升级后，您需要重新安装全局包。使用 nvm 安装的每个节点版本都有一个单独的全局 node_modules 文件夹

## 例子

0.8 jshint`~/.nvm/v0.8.23/lib/node_modules/jshint`

0.10 jshint`~/.nvm/v0.10.4/lib/node_modules/jshint`

# c - 使用日期创建文件及其名称

> ID：16000588
> 
> 赞同：-3
> 
> 时间：2013-04-14T15:12:27.650
> 
> 标签：c

我想知道，我们是否可以使用当前日期创建一个文件，以便每天打开一个新文件，例如

如果日期是**2013 年 4 月 14 日**，那么文件应该是**140413pay.txt**

这在C中可能吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:28:39.210

像这样的东西应该工作：

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <string.h>

int main ()
{
    time_t t = time(NULL);
    struct tm* t1 = localtime(&t);
    char filename[16];
    strftime (filename,9,"%d%m%Y",t1);
    strcat(filename, "pay");
    strcat(filename,".txt");
    FILE* file=fopen(filename,"a+");
    //do stuff
    fclose(file);
    return 0;
} 
```

# javascript - 从属性获取 href 路径并使用 JavaScript 传递到下一个 html 页面

> ID：16000590
> 
> 赞同：0
> 
> 时间：2013-04-14T15:12:32.733
> 
> 标签：javascript, html, href

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:15:44.240

将链接引用传递给`getPDFpath`函数。

```
<a href="PDFJS/pdfFile/DA_Chap02_v3.pdf"  onClick="getPDFpath(this)">DA_Chap02_v3</a> 
```

您现在可以访问`href`元素的属性。

```
function getPDFpath(link){
    //navigate to another page by passing the href as the `pdflink` query param.
    location.href = 'my_other_page.html?pdflink=' + encodeURIComponent(link.href);
} 
```

但是，您不必使用任何 javascript 代码来执行此操作：

```
<a href="my_other_page.html?pdflink=PDFJS/pdfFile/DA_Chap02_v3.pdf">DA_Chap02_v3</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T15:35:35.803

以下是设置和获取 cookie 的功能。

```
function setCookie(key, value, exdays) {
    var exdate = new Date();
    exdate.setDate(exdate.getDate() + exdays);
    value = escape(value) + ((exdays === undefined) ? "" : "; expires=" + exdate.toUTCString());
    document.cookie = key + "=" + value + '; path=/';
}

function getCookie(key) {
    var i, x, y,
        ARRcookies = document.cookie.split(";");

    for (i = 0; i < ARRcookies.length; i++) {
        x = ARRcookies[i].substr(0, ARRcookies[i].indexOf("="));
        y = ARRcookies[i].substr(ARRcookies[i].indexOf("=") + 1);
        x = x.replace(/^\s+|\s+$/g,"");
        if (x == key) {
            return unescape(y);
        }
    }
} 
```

# linux - 在单独的系统用户上安装 Django-CMS

> ID：16000601
> 
> 赞同：0
> 
> 时间：2013-04-14T15:13:47.457
> 
> 标签：linux, django, postgresql, ubuntu, django-cms

我是 Django CMS 和 Ubuntu 的新手。我想在 Ubuntu 上的一个单独的系统用户上安装 Django-CMS，这样我专用于 Django-CMS 的 python 环境就不会与我在系统上执行的其他 python 开发工作发生冲突。另外，它应该让我更容易从我的机器上轻松摆脱（卸载）我的 Django-CMS 环境。有没有人知道这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T15:36:17.773

您可能正在寻找[virtualenv](http://www.virtualenv.org/en/latest/)而不是设置单独的用户帐户。

# c# - C# 在应用程序中截取 .net 控件的屏幕截图并附加到 Outlook 电子邮件

> ID：16000603
> 
> 赞同：7
> 
> 时间：2013-04-14T15:13:52.140
> 
> 标签：c#, .net, winforms, controls, screenshot

有谁知道如何使用 C# 截取屏幕截图并将其限制为拍摄应用程序的特定容器/部分的图片。我不想要应用程序的整个屏幕或整个窗口。

我的面板简称为：panel1 用户将单击“按钮”并截取 panel1 的屏幕截图并附加到电子邮件中。

我想只截取该部分的屏幕截图，然后在本地保存到 C:\ 驱动器和/或附加或嵌入到 Outlook 电子邮件中。

我在互联网上阅读了其他各种内容，但其中大多数都必须处理创建复杂的更改，以截取我不想要的 Web 浏览器控件的屏幕截图。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-14T15:25:25.563

如果只想`Panel's`截图，可以使用内置的[DrawToBitmap](http://msdn.microsoft.com/en-gb/library/system.windows.forms.control.drawtobitmap.aspx)方法。

```
Bitmap bmp = new Bitmap(myPanel.Width, myPanel.Height);
myPanel.DrawToBitmap(bmp, new Rectangle(0, 0, bmp.Width, bmp.Height));
bmp.Save(@"C:\MyPanelImage.bmp"); 
```

请注意，某些控件可能不适用于此功能，例如`WebBrowser`和`RichTextBox`控件，但它应该适用于大多数其他控件（文本框、标签等）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-14T15:21:43.603

我使用类似的东西来做到这一点

```
public static void TakeCroppedScreenShot(
    string fileName, int x, int y, int width, int height, ImageFormat format)
{
    Rectangle r = new Rectangle(x, y, width, height);
    Bitmap bmp = new Bitmap(r.Width, r.Height, PixelFormat.Format32bppArgb);
    Graphics g = Graphics.FromImage(bmp);
    g.CopyFromScreen(r.Left, r.Top, 0, 0, bmp.Size, CopyPixelOperation.SourceCopy);
    bmp.Save(fileName, format);
} 
```

我希望这有帮助

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-28T09:57:58.847

对 Asif 答案的改进：

```
public static Bitmap takeComponentScreenShot(Control control)
{
    // find absolute position of the control in the screen.
    Rectangle rect=control.RectangleToScreen(control.Bounds);

    Bitmap bmp = new Bitmap(rect.Width, rect.Height, PixelFormat.Format32bppArgb);
    Graphics g = Graphics.FromImage(bmp);

    g.CopyFromScreen(rect.Left, rect.Top, 0, 0, bmp.Size, CopyPixelOperation.SourceCopy);

    return bmp;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-07T10:41:56.147

[Killercam 的回答稍作](https://stackoverflow.com/a/16000691/2782865)修改：

```
 public static Bitmap takeComponentScreenShot(Control control)
    {
        // find absolute position of the control in the screen.
        Control ctrl  = control;
        Rectangle rect = new Rectangle(Point.Empty, ctrl.Size);
        do
        {
            rect.Offset(ctrl.Location);
            ctrl = ctrl.Parent;
        }
        while (ctrl != null);

        Bitmap bmp = new Bitmap(rect.Width, rect.Height, PixelFormat.Format32bppArgb);
        Graphics g = Graphics.FromImage(bmp);

        g.CopyFromScreen(rect.Left, rect.Top, 0, 0, bmp.Size, CopyPixelOperation.SourceCopy);

        return bmp;
    } 
```

此方法将*立即*截屏。例如，如果您在调用此函数之前更改面板中按钮的可见性，则位图将包含该按钮。如果不需要，请使用[keyboardP 的答案](https://stackoverflow.com/a/16000735/2782865)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-14T15:32:01.010

我发现这可以将控件保存为位图：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }
    private void Button1_Click(object sender, EventArgs e)
    {
        SaveAsBitmap(panel1,"C:\\path\\to\\your\\outputfile.bmp");
    }

    public void SaveAsBitmap(Control control, string fileName)
    {   
        //get the instance of the graphics from the control
        Graphics g = control.CreateGraphics();

        //new bitmap object to save the image
        Bitmap bmp = new Bitmap(control.Width, control.Height);

        //Drawing control to the bitmap
        control.DrawToBitmap(bmp, new Rectangle(0, 0, control.Width, control.Height));

        bmp.Save(fileName);
        bmp.Dispose();

    }
} 
```

我在[这里](http://msdn.microsoft.com/en-us/library/ms268870%28v=vs.80%29.aspx)找到了一些关于 Outlook 的信息，但我无法对其进行测试，因为我的 PC 上没有安装 Outlook。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-08-22T18:36:12.380

修改[KeyboardP 的](https://stackoverflow.com/users/187697/keyboardp)答案。修改为静态方法，因此可以用作助手。

```
public static Bitmap ScreenShotaControl(Control aControl)
        {
            try
            {
                Bitmap bmp = new Bitmap(aControl.Width, aControl.Height);
                aControl.DrawToBitmap(bmp, new Rectangle(0, 0, bmp.Width, bmp.Height));
                return bmp;
            }
            catch (Exception)
            {

                throw;
            }
        } 
```

示例用法如下：

```
Bitmap bmp = ScreenShotaControl(aControl);
    Clipboard.SetImage(bmp); //to copy to clipboard

Bitmap bmp = ScreenShotaControl(aControl);
    bmp.Save(@"C:\MyPanelImage.bmp"); //save to specified path

Bitmap bmp = ScreenShotaControl(aControl);
    MemoryStream ms= new MemoryStream();
    bmp.Save(ms, ImageFormat.Jpeg); 
    ContentType ct= new ContentType(); 
    ct.MediaType = MediaTypeNames.Image.Jpeg; 

    MailMessage mail = new MailMessage(); 
    mail.Attachments.Add(new Attachment(ms, ct));  //attach to email 
```

# janus - 第一个单元格在 Janus GridEx for Winforms 中是可写的，即使网格是只读的

> ID：16000607
> 
> 赞同：0
> 
> 时间：2013-04-14T15:14:10.900
> 
> 标签：janus, gridex

我对 Winforms 有一个奇怪的问题`Janus GridEx`，希望使用它并可能遇到类似问题的人可以帮助我。

我有一个只读网格，其中包含一组通知实体，并且网格本身包含在一个窗口内，每当有特定客户端的新通知到达时，该窗口就会弹出。

加载窗口时，焦点设置在网格上，当我在键盘上键入内容时，它会在第一行和第一列的第一个单元格中显示文本，即使所有网格都是只读的。

只有当我单击另一个窗口或其他行时，它才会停止接收我的击键。我尝试了所有我能想到的方法，包括以编程方式将焦点移到另一个控件，并将其移回网格的第一行，在窗口上发送左键单击消息等等。没有任何效果，如果我在捕获网格上的击键的事件中设置断点，程序不会在此断点处停止。

有人遇到过与网格类似的事情吗？

我知道它的信息太少了，我不能在这里提供一些代码，因为项目在一个单独的网络中，我也不能指出一些导致奇怪行为的具体方法并将其复制到这个消息中。

PS我用C#写的。

如果有人能提供帮助，我会很高兴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-03T03:10:53.360

尝试将 GridEx 的`AllowAddNew`,`AllowEdit`和`AllowDelete`属性设置为以下内容：

```
grdEx.AllowAddNew = Janus.Windows.GridEX.InheritableBoolean.False;
grdEx.AllowEdit = Janus.Windows.GridEX.InheritableBoolean.False;
grdEx.AllowDelete = Janus.Windows.GridEX.InheritableBoolean.False; 
```

# tsql - 如何在层次结构表中设置项目的“顺序”？

> ID：16000618
> 
> 赞同：0
> 
> 时间：2013-04-14T15:14:42.637
> 
> 标签：tsql, cursor, common-table-expression

CTE 的结果存储在变量表名@tbl 中。

我想通过 MenuItemID、ParentID (PID) 和 MenuID 设置 MenuItems 的 Order (SO)。为此，我尝试使用光标，但它太复杂了，我无法弄清楚。

**编辑：** 事实上，样本数据的 SO（顺序）不是**按顺序排列**的，因为它们应该是连续的。我想按照层次结构和当前的 SO 重新设置它们的顺序：

当前 SO（不连续）：

```
1   5   2   9   10  6   7 
```

更正：

```
1   2   1   2   3   3   4

> 1
> 2
    > 1
    > 2
    > 3
> 3
> 4 
```

@tbl 内容：

```
MenuItemID                              ParentID                                MenuID                                  SO   Level
D3B92D1B-7AFA-4E11-AF01-9F6A00B1B2A9    C0489C0C-18C7-4D9A-8FC2-A19A00CDB99E    C0489C0C-18C7-4D9A-8FC2-A19A00CDB99E    1    0
F5833F72-A739-47D6-B30C-A19600F03E91    C0489C0C-18C7-4D9A-8FC2-A19A00CDB99E    C0489C0C-18C7-4D9A-8FC2-A19A00CDB99E    5    0
5C2AC1F8-DEE0-448B-B538-A19600F0839B    C0489C0C-18C7-4D9A-8FC2-A19A00CDB99E    C0489C0C-18C7-4D9A-8FC2-A19A00CDB99E    6    0
3A1096E7-5FD2-4F77-9729-A19600973BDF    C0489C0C-18C7-4D9A-8FC2-A19A00CDB99E    C0489C0C-18C7-4D9A-8FC2-A19A00CDB99E    7    0
EBB5FFF0-4407-436B-BCE8-A1A0010A1A88    F5833F72-A739-47D6-B30C-A19600F03E91    C0489C0C-18C7-4D9A-8FC2-A19A00CDB99E    2    1
45077C15-3A47-43E2-92A1-A19C013C2D9C    F5833F72-A739-47D6-B30C-A19600F03E91    C0489C0C-18C7-4D9A-8FC2-A19A00CDB99E    9    1
9DDB77B9-C9E8-48AF-8F1E-A1960097329A    F5833F72-A739-47D6-B30C-A19600F03E91    C0489C0C-18C7-4D9A-8FC2-A19A00CDB99E    10   1 
```

我想要的结果是这样的：

（菜单项应按级别排序，SO（排序顺序））

```
MenuItemID                              ParentID                                MenuID                                  SO   Level
D3B92D1B-7AFA-4E11-AF01-9F6A00B1B2A9    C0489C0C-18C7-4D9A-8FC2-A19A00CDB99E    C0489C0C-18C7-4D9A-8FC2-A19A00CDB99E    1    0
F5833F72-A739-47D6-B30C-A19600F03E91    C0489C0C-18C7-4D9A-8FC2-A19A00CDB99E    C0489C0C-18C7-4D9A-8FC2-A19A00CDB99E    2    0
EBB5FFF0-4407-436B-BCE8-A1A0010A1A88    F5833F72-A739-47D6-B30C-A19600F03E91    C0489C0C-18C7-4D9A-8FC2-A19A00CDB99E    1    1
45077C15-3A47-43E2-92A1-A19C013C2D9C    F5833F72-A739-47D6-B30C-A19600F03E91    C0489C0C-18C7-4D9A-8FC2-A19A00CDB99E    2    1
9DDB77B9-C9E8-48AF-8F1E-A1960097329A    F5833F72-A739-47D6-B30C-A19600F03E91    C0489C0C-18C7-4D9A-8FC2-A19A00CDB99E    3    1
5C2AC1F8-DEE0-448B-B538-A19600F0839B    C0489C0C-18C7-4D9A-8FC2-A19A00CDB99E    C0489C0C-18C7-4D9A-8FC2-A19A00CDB99E    3    0
3A1096E7-5FD2-4F77-9729-A19600973BDF    C0489C0C-18C7-4D9A-8FC2-A19A00CDB99E    C0489C0C-18C7-4D9A-8FC2-A19A00CDB99E    4    0 
```

我要使用的光标是这样的，但我不知道如何处理它：

```
declare @id uniqueidentifier
declare cur CURSOR LOCAL for
    SELECT MenuItemID FROM @tbl order by lvl
open cur
    fetch next from cur into @id
    while @@FETCH_STATUS = 0 BEGIN
        ???
    fetch next from cur into @id
    end
close cur
deallocate cur 
```

这是表（@tbl）结构：

```
declare @tbl table (MenuItemID uniqueidentifier, PID uniqueidentifier, MenuID uniqueidentifier, SO tinyint, lvl tinyint) 
```

如果有人帮助我，我将不胜感激。

提前致谢，

卡多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T16:39:33.013

使用递归 CTE，而不是游标：

```
with hier as
(select l0.*, convert(varchar(max),right('000'+convert(varchar(3),SO),3)) FullSO 
 from tbl l0 where lvl=0
 union all
 select ln.*, lp.FullSO+','+right('000'+convert(varchar(3),ln.SO),3) FullSO
 from tbl ln
 join hier lp on ln.PID = lp.MenuItemID)
select MenuItemID, 
       PID, 
       MenuID,
       rank() over (partition by PID order by SO) SO,
       lvl
from hier
order by FullSO, SO 
```

SQLFiddle[在这里](http://sqlfiddle.com/#!3/af885/17)。

# shell - 如何在 Fish 中将启动目录重置为我的 HOME？

> ID：16000622
> 
> 赞同：7
> 
> 时间：2013-04-14T15:15:00.330
> 
> 标签：shell, fish

在我的桌面管理器中，我绑定`fish`了一个键盘快捷键`Ctrl`+ `~`。启动时，`fish`打开目录`/usr/lib/lightdm/lightdm`。这很烦人，因为我与 lightdm 没有业务往来，而且我通常在我的`$HOME`目录中处理代码。

如何更改鱼开始的目录？我想简单地将启动目录更改为`~/`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-18T03:45:35.373

我发现`config.fish`在启动时运行的文件一直在更改我的默认工作目录。

错误地尝试在我的`PATH`左侧设置目录列表`config.fish`，其中第一个是`/usr/lib/lightdm/lightdm`. Fish 自动假定没有命令的目录应该被`cd``d 进入，所以我的 shell`cd`在启动时被 `ing 进入该目录。

我删除了杂散线，一切都很好。

**要更改您的 fish 启动目录：** 添加`cd /path/to/new/startup/directory`到您的`~/.config/fish/config.fish`文件，或者如果它不存在则创建它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-04-17T15:12:45.893

正如@nathaniel-waisbrot 在[this answer](https://stackoverflow.com/a/47624544/7232773)中所说，您`cd`只能在交互式运行fish时（shell而不是脚本）：

```
# ~/.config/fish/config.fish

if status is-interactive
  cd $HOME
end 
```

使用鱼的`status`命令

如果那不适合您，那可能是您的鱼主题。我使用具有[书签功能的](https://github.com/oh-my-fish/theme-dangerous#bookmarks)[危险主题](https://github.com/oh-my-fish/theme-dangerous)。从我的启动目录中删除书签为我解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-30T15:23:51.873

*虽然与 OP 的问题没有直接关系，但它足够接近，以至于我的搜索出现了这个线程。所以我正在为其他搜索者分享这个答案。*

iTerm 将在其“排列”选项卡下存储路径（连同选项卡、选项卡标题和窗口布局）。显然，当我设置默认排列时，我打开了一个选项卡`/`。

`cd`通过进入我的主目录并更改我的默认窗口排列，我可以将其更改为我想要的任何内容。

我想如果您没有默认安排，“重用前一个会话的目录”选项将适用于新会话，但不适用于恢复的安排。

# python - Popen 的 Python shell 脚本错误

> ID：16000623
> 
> 赞同：0
> 
> 时间：2013-04-14T15:15:13.913
> 
> 标签：python, sockets, shell, version, subprocess

我的外壳脚本：

```
#!/usr/bin/python

import subprocess, socket

HOST = 'localhost'
PORT = 4444

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

s.connect((HOST, PORT))

while 1:
    data = s.recv(1024)
    if data == "quit": break
    proc = subprocess.Popen(data, shell=True, stdout=subprocess.PIPE,     stderr=subprocess.PIPE, stdin=subprocess.PIPE)

    stdoutput = proc.stdout.read() + proc.stderr.read()

    s.send(stdoutput)

s.close() 
```

我正在使用 netcat 监听端口 4444。所以我运行`netcat`它并且它正在监听。然后我运行这个脚本，但是如果我在 shell 中输入`ipconfig`或输入什么东西，`netcat`我会得到这个错误：

```
Traceback (most recent call last):
  File "C:\Users\Myname\Documents\shell.py", line 16, in <module>
    proc = subprocess.Popen(data, shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE, stdin=subprocess.PIPE)
  File "C:\Python33\lib\subprocess.py", line 818, in __init__
    restore_signals, start_new_session)
  File "C:\Python33\lib\subprocess.py", line 1049, in _execute_child
    args = list2cmdline(args)
  File "C:\Python33\lib\subprocess.py", line 627, in list2cmdline
    needquote = (" " in arg) or ("\t" in arg) or not arg
TypeError: argument of type 'int' is not iterable 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:55:58.690

您的代码与 Python 2.7 完美配合。但这会导致 Python3 出现所示错误。因为在 Python 2.X 中，data = s.recv(1024) 的返回值是字符串，而在 Python 3.X 中是字节。您应该在使用 subprocess.Popen() 执行它之前对其进行解码，如下所示：

```
#!/usr/bin/python

import subprocess, socket

HOST = 'localhost'
PORT = 4444

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect((HOST, PORT))

while True:
    data = s.recv(1024).decode()
    if data == "quit\n": break
    proc = subprocess.Popen(data, shell=True, stdout=subprocess.PIPE,     stderr=subprocess.PIPE, stdin=subprocess.PIPE)
    stdoutput = proc.stdout.read() + proc.stderr.read()
    s.send(stdoutput)

s.close() 
```

解码字节时，取决于编码集，如果不是 ASCII。

两个建议：

1.  在无限循环中，我们最好使用 while True 而不是 while 1 来增强可读性。

2.  如果您使用 netcat 发送命令，收到的字符串将以“\n”结尾。所以 data == "quit" 永远是假的。

# python - 如何从父对象创建对象？

> ID：16000625
> 
> 赞同：2
> 
> 时间：2013-04-14T15:15:21.720
> 
> 标签：python, oop, constructor

我有一堂课：

```
class Foo():
    def __init__(self):
        self.a = 1 
```

它是孩子：

```
class Bar(Foo):
    def __init__(self, foo, string):
        Foo.__init__(self)
        self.b = string 
```

我需要从 Bar()-object 创建一个 Foo()-object 我该怎么做？

IE：

```
a = Foo()
a.a = 2
print a.a

b = Bar(a, 'ololo')

print b.a
print b.b 
```

我打印了这个：

```
2
1
ololo 
```

并期待这个：

```
2
2
ololo 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T16:03:13.923

当您设置 aa = 2 时，您仅在 Foo 类的单个实例中设置变量，而不是更改类“蓝图”本身中的变量。因此，当使用 Foo 类作为父类时，会保留原来的 self.a 变量：a = 1。

这意味着子类 Bar 继承了变量 self.a = 1，这就是它在您的示例中打印的原因。

除此之外，我不确定您要达到的目标，抱歉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T15:24:27.387

我认为您谈论的是复制构造函数。在这里，您可以找到一种如何在 python 中创建它的方法 -[这是否相当于 Python 中的复制构造函数？](https://stackoverflow.com/questions/9132200/is-this-the-equivalent-of-a-copy-constructor-in-python)

```
import copy
class Bar(Foo):
    def __init__(self, foo, string):
        if foo:
            self.__dict__ = copy.deepcopy(foo.__dict__)
        else:
            Foo.__init__(self)

        self.b = string 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-14T16:50:46.873

要使用“Foo”的实例来设置“Bar”实例的一些变量，您不需要遗产。因为你需要的不是 Foo 类，实际上你只需要一个 Foo 实例：

```
class Bar:
    def __init__(self,foo,string):
        self.b=string
        if isinstance(foo,Foo):
            self.a=foo.a 
```

# javascript - 使用 javascript 通过 iframe 播放音频

> ID：16000627
> 
> 赞同：0
> 
> 时间：2013-04-14T15:15:23.453
> 
> 标签：javascript, iframe, frame

我有以下代码`abc.jsp`

```
 <% 
 out.write("<script type=\"text/javascript\" src=\"scripts/test.js\"></script>");
 out.write("Here is filename"+sfl);
 out.write(""
        + "<input type=\"button\" id=\"playBt\" value=\"Play Now\" onClick=\"playSound()\" >"
        + "<audio id=\"sound\" preload=\"auto\">"
        + "<source src=\"music.ogg\" type=\"audio/ogg\" />"
        + "<source src=\"music.mp3\" type=\"audio/mpeg\" />"
        + "Your browser does not support the audio element."
        + "</audio>"
      );
out.write("");
%> 
```

然后将上面的内容带入一个框架中`index.jsp`

```
 <iframe id='bgframe' style='display:compact;' src='abc.jsp' width="400" height="200"></iframe> 
```

现在使用这个 JavaScript 函数 -`test.js`

```
function playSound() {  
  var frameRef = document.getElementById('bgframe');
  var sound = frameRef.contentWindow.document.getElementById'sound');
  //var sound = frameRef.contentDocument.document.getElementById('sound');
  sound.play();
} 
```

问题是，当我点击播放按钮时，声音没有播放。在 JavaScript 控制台上，系统将 null 作为 的值返回`frameRef`。此外，我收到以下错误，具体取决于我使用的是`contentDocument`还是`contentWindow`.

> `Uncaught TypeError: Cannot read property 'contentDocument'`
> `Uncaught TypeError: Cannot read property 'contentWindow'`

我已经实现了不同的解决方案，但未捕获的 typedef 错误仍然存​​在。

请问我在这里做错了什么，我该如何解决？为什么我不能访问 frame 上的元素`id=bgframe`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T16:13:07.303

您正在包括您的`test.js`in `abc.jsp`，**而不是**in`index.jsp`所以您不需要引用 iframe，因为脚本已经在其中运行。您只需要对`playSound()`功能进行一些更改：

```
function playSound() {  
  var sound = document.getElementById('sound');
  //do your stuff here
  //line below should make your script alert 'auto' in your case
  alert(sound.preload); 
} 
```

# mysql - 如何从具有需要匹配临时表的条件的表中进行选择？

> ID：16000632
> 
> 赞同：1
> 
> 时间：2013-04-14T15:15:48.603
> 
> 标签：mysql, select, temp-tables

我有两张桌子。一个包含文章，另一个包含报价。如果两个表中的尺寸匹配，我正在尝试`[EAN]`从文章表和报价表中进行选择。`price`

这是我正在玩的例子：

```
DROP TEMPORARY TABLE IF EXISTS haha;
CREATE TEMPORARY TABLE haha (
    tmp_kto VARCHAR(7) DEFAULT ''
    , tmp_kz VARCHAR(3) DEFAULT ''
    , tmp_preisliste VARCHAR(1) DEFAULT ''
    , tmp_eg VARCHAR(3) DEFAULT ''
    , tmp_length VARCHAR(3) DEFAULT ''
    , tmp_width VARCHAR(3) DEFAULT ''
    , tmp_price DECIMAL(10,2) DEFAULT 0.00
    ) ENGINE=MEMORY;

INSERT INTO haha (
    tmp_kz, tmp_kto, tmp_preisliste, tmp_eg, tmp_length, tmp_width, tmp_price
    ) VALUES (
    "000","4316134","I","520","150","200","14.95"
    );
INSERT INTO haha (
    tmp_kz, tmp_kto, tmp_preisliste, tmp_eg, tmp_length, tmp_width, tmp_price
    ) VALUES (
    "001","112233","L","520","150","200","17.95"
    ); 
```

匹配标准应该是`[EG]`和`[size]`。因为`size`我需要从字段中提取相关大小（我认为没有其他方法 - 格式是例如 050x250cm）。

```
SELECT ean, preis 
    FROM (
    SELECT  a.ean AS ean
           , h.tmp_price AS preis
    FROM articles AS a
    LEFT JOIN haha AS h
        ON h.tmp_eg = a.eg
        AND h.tmp_kz = "000"
        AND h.tmp_kto = "0000000"
        AND h.tmp_preisliste = "I"
        AND h.tmp_length = SUBSTRING(a.size,1,3)
        AND h.tmp_width = SUBSTRING(a.size,4,3)
) AS temp; 
```

哪个不起作用。

**问题：**
我需要进行哪些更改才能使其正常工作？

**编辑**
第二张表如下所示：

```
CREATE TABLE `articles` (
    `id` INT(11) NOT NULL AUTO_INCREMENT,
    `ean` VARCHAR(35) NULL DEFAULT NULL,
    `size` VARCHAR(35) NULL DEFAULT NULL,
    `eg` VARCHAR(35) NULL DEFAULT NULL,
PRIMARY KEY (`id`),
)
COLLATE='latin1_swedish_ci'
ENGINE=InnoDB
AUTO_INCREMENT=1;

INSERT INTO articles (
    ean, size, eg
    ) VALUES (
    "1111111111111","150x200cm","520"
    );

INSERT INTO articles (
    ean, size, eg
    ) VALUES (
    "2222222222222","150x220cm","520"
    ); 
```

感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:22:25.033

你为什么不这么简单地使用？

```
SELECT a.ean, h.tmp_price AS preis 
FROM articles AS a
LEFT JOIN haha AS h
    ON h.tmp_eg = a.eg
WHERE h.tmp_kz = "000"
    AND h.tmp_kto = "0000000"
    AND h.tmp_preisliste = "I"
    AND h.tmp_length = SUBSTRING(a.size,1,3)
    AND h.tmp_width = SUBSTRING(a.size,4,3) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T15:32:15.550

比想象的容易：

```
 SELECT a.ean AS ean,
           h.tmp_price AS preis
    FROM articles AS a
    LEFT JOIN haha AS h
    ON h.tmp_eg = a.eg

    WHERE a.iln = "some_id"
    AND h.tmp_kz = "000"
    AND h.tmp_kto = "0000000"
    AND h.tmp_preisliste = "I"
    AND h.tmp_length = SUBSTRING(a.groesse,1,3)
    AND h.tmp_width = SUBSTRING(a.groesse,5,3) 
```

# codeigniter - 唯一的电子邮件地址注册码未按预期工作 | 编码解码问题？

> ID：16000636
> 
> 赞同：1
> 
> 时间：2013-04-14T15:16:44.447
> 
> 标签：codeigniter, validation, utf-8, callback, php

我正在处理用户注册表单。我正在尝试使用户必须拥有尚未在系统中注册的电子邮件地址。

我认为该`is_unique`功能不起作用，因为所有电子邮件地址数据都以 Base64 编码格式存储，并且查询以未编码格式提交。

我已经尝试在我的控制器和模型中调整它看起来合适的东西，但我最终遇到了错误。

这是我的**控制器的功能：**

```
function check_physician_email($physician_email){

    $physician_email_check=$this->model_site->get_single_record( 'physicians', 'email', $physician_email );

    if($physician_email_check){
        $this->form_validation->set_message('check_physician_email', 'The %s is already taken!');
        return FALSE;
    }
    else {
        return TRUE;
    }
} 
```

使用这个**模型：**

```
function get_single_record( $table_name, $primary_key_name, $primary_key_val ) {  //get a record with a given condition from table

    $query = $this->db->get_where($table_name, array( $primary_key_name => $primary_key_val));

    if( $query->num_rows() > 0 ) {
        return $query->row_array();
    }
    else {
        return false;
    }

} //end get_single_record 
```

当那不起作用时，我开始指向它`get_email_record`并在我的**模型中尝试了以下几种变体：**

```
function get_email_record( $table_name, $primary_key_name, $primary_key_val ) {  //get a record with a given condition from table

    $query = $this->db->get_where('physicians', array( encode_decode($_REQUEST['email'], 'decode') => $primary_key_val));

    if( $query->num_rows() > 0 ) {
        return $query->row_array();
    }
    else {
        return false;
    }

} //end get_email_record 
```

这只会导致**`encode_decode error`**：

```
Error Number: 1300  
Invalid utf8 character string: '\xB2\xB6\xACr\x19\xDA\xB5\xB8\xA8r\x8A\xE9r\x89'
SELECT * FROM (`physicians`) WHERE `²¶¬rÚµ¸¨rŠér‰` = 'user@email.com'
Filename: /usr/sites/phototherapydoctor.com/www/html/models/model_site.php
Line Number: 92 
```

如果我在我的**模型中这样做：**

```
function get_email_record( $table_name, $primary_key_name, $primary_key_val ) {  //get a record with a given condition from table

    $query = $this->db->get_where('physicians', array( 'email' => encode_decode($_REQUEST[$primary_key_val],'encode')));

    if( $query->num_rows() > 0 ) {
        return $query->row_array();
    }
    else {
        return false;
    }

} //end get_email_record 
```

我明白了**`Undefined index error`**：

```
A PHP Error was encountered
Severity: Notice
Message: Undefined index: user@email.com
Filename: models/model_site.php
Line Number: 92 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:24:14.110

你没有设置我可以看到的回调？您需要在表单验证规则中使用它。

```
$this->form_validation->set_rules('email','Email','callback_physician_email_check'); 
```

# python - python数组的高效移动、稳健的尺度估计

> ID：16000637
> 
> 赞同：4
> 
> 时间：2013-04-14T15:16:48.317
> 
> 标签：python, numpy, scipy

我正在寻找一种快速有效的方法来计算一组数据的稳健、移动比例估计。我正在使用通常包含 3-400k 个元素的一维数组。直到最近我一直在处理模拟数据（没有灾难性的异常值），优秀的 Bottleneck 包中的 move_std 函数对我很有帮助。但是，当我过渡到嘈杂的数据时，std 不再表现得足够好，无法使用。

过去，我逐个元素地使用了一个非常简单的二重中间方差代码来处理表现不佳的分布问题：

```
def bwmv(data_array):
    cent = np.median(data_array)
    MAD = np.median(np.abs(data_array-cent))
    u = (data_array-cent) / 9\. / MAD
    uu = u*u
    I = np.asarray((uu <= 1.), dtype=int)
    return np.sqrt(len(data_array) * np.sum((data_array-cent)**2 * (1.-uu)**4 * I)\
            /(np.sum((1.-uu) * (1.-5*uu) * I)**2)) 
```

但是我现在使用的数组足够大，以至于速度非常慢。有谁知道提供这种估算器的软件包，或者对如何以快速有效的方式解决这个问题有任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T18:21:09.497

我在类似情况下使用了一个简单的低通滤波器。

从概念上讲，您可以通过 获得均值的移动估计`fac = 0.99; filtered[k] = fac*filtered[k-1] + (1-fac)*data[k]`，这在实现上非常有效（在 C 中）。一个比这个更花哨的 IIR 滤波器，即巴特沃斯低通滤波器，很容易在 scipy 中设置：

```
b, a = scipy.signal.butter(2, 0.1)
filtered = scipy.signal.lfilter(b, a, data) 
```

要获得“规模”的估计值，您可以从数据中减去这个“平均估计值”。这实际上将低通滤波器变成了高通滤波器。取它的 abs() 并通过另一个低通滤波器运行它。

结果可能如下所示：

![脚本输出](https://i.stack.imgur.com/NS157.png)

完整脚本：

```
from pylab import *
from scipy.signal import lfilter, butter

data = randn(1000)
data[300:] += 1.0
data[600:] *= 3.0
b, a = butter(2, 0.03)
mean_estimate = lfilter(b, a, data)
scale_estimate = lfilter(b, a, abs(data-mean_estimate))

plot(data, '.')
plot(mean_estimate)
plot(mean_estimate + scale_estimate, color='k')
plot(mean_estimate - scale_estimate, color='k')

show() 
```

显然， butter() 参数需要针对您的问题进行调整。如果您将 order 设置为 1 而不是 2，您将得到我首先描述的简单过滤器。

免责声明：这是工程师对这个问题的看法。这种方法可能在任何统计或数学方面都不可靠。另外，我不确定它是否真的解决了您的问题（如果没有，请更好地解释），但别担心，无论哪种方式，我都玩得很开心；-)

# qt - Qt OpenGL 错误

> ID：16000638
> 
> 赞同：0
> 
> 时间：2013-04-14T15:16:58.227
> 
> 标签：qt

我正在学习一个简单的 OpenGL 和 Qt 教程，但我遇到了障碍。这是教程的链接： [链接](http://www.cs.tufts.edu/comp/175/support/Tutorial.pdf)

在本教程中，您将容器小部件添加到窗口并将其提升为继承 QGLWidget 的类。当我第一次运行该项目时，我在这一行遇到了错误：

```
MyPanelOpenGL::MyPanelOpenGL(QObject *parent) :
QGLWidget(parent)
 {
    sides = 3;
    radius = 1.0;
  } 
```

该错误表明它可以将 QObject 转换为 QWidget。这段代码是 QGLWidget 的构造函数。我将参数更改为 QWidget，但这次在我的 ui.h 文件中出现了另一个错误。错误如下：

```
/home/computer/build-OpenGLTest-Desktop_Qt_5_0_2_GCC_64bit-Debug/ui_mainwindow.h:64: error: undefined reference to `MyPanelOpenGL::MyPanelOpenGL(QObject*)' 
```

当我更改面板的.h 文件中的实现时，我更改了声明。这是 MyPanelOpenGL.h 文件：

```
#include <QGLWidget>

 class MyPanelOpenGL : public QGLWidget
 {
Q_OBJECT
 public:
   explicit MyPanelOpenGL(QWidget *parent = 0);
 protected:
void initializeGL();
void resizeGL(int w, int h);
void paintGL();
  private:
  int sides;
double radius;
 public slots:
void changeSides(int s);
void changeRadius(double r);

 }; 
```

有谁知道发生了什么？谢谢！

# java - 按下多个按钮时如何在屏幕上显示文本

> ID：16000639
> 
> 赞同：0
> 
> 时间：2013-04-14T15:17:02.867
> 
> 标签：java, swing

我使用 JButtons 创建了一个现场键盘。我想知道是否有一种方法可以在每次按下按钮时显示文本。当按下不同的按钮时，我不希望文本被覆盖。例如三个按钮：'A' 'B' 'C' 当所有按钮都被按下时，“ABC”显示在文本框中。然后我将使用文本框中的文本并检查它是否与某个字符串匹配。我考虑过使用 setText(); 但这会在按下新按钮时覆盖文本框中的文本。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:19:32.517

```
field.setText(field.getText() + newText); 
```

# mysql - MySQL StoredProcedure 变量从选择中设置，以参数为条件

> ID：16000642
> 
> 赞同：0
> 
> 时间：2013-04-14T15:17:08.440
> 
> 标签：mysql, variables, stored-procedures

因此，我正在尝试使用我的 select 语句中传入的 FName 和 LName 参数来设置变量，从我之前在存储过程中添加到数据库中的患者那里获取 PatientID（主键，非空，自动增量），但我收到语法错误。因此，我们将不胜感激有关语法失败原因的任何帮助。

下面是相关代码，pFName和pLName是传入存储过程的参数。

```
DECLARE pPolicyHolder INT;
SET pPolicyHolder = (SELECT PatientID FROM Patient WHERE Fname = pFName AND LName = pLName); 
```

这是整个过程。我意识到这可能不是最好/最干净的方法，但是设置表格的方式是需要在添加患者之前添加 MedicalHistory，并且必须在添加 PatientInsurance 之前添加患者，因为外键约束。

```
DELIMITER //
CREATE PROCEDURE AddNewPatient(
    IN pAllergies TEXT, IN pMedications TEXT, IN pExistingConditions TEXT, IN pMisc       
    TEXT, IN pFName VARCHAR(30), IN pLName VARCHAR(45), IN pGender CHAR(1), IN pDOB 
    DATE, IN pSSN DOUBLE, IN pMedicalHistory INT, IN pPrimaryPhysician INT, IN 
    pInsuranceCompany INT, IN pCoPay INT)
BEGIN
    START TRANSACTION;
         INSERT INTO MedicalHistory(Allergies, Medications, ExistingConditions, Misc) 
         VALUES(pAllergies, pMedications, pExistingConditions, pMisc);
    COMMIT;
        START TRANSACTION;
              INSERT INTO Patient(FName, LName, Gender, DOB, SSN, 
              MedicalHistory,PrimaryPhysician) VALUES(pFName, 
              LName,pGender,pDOB,pSSN,pMedicalHistory,pPrimaryPhysician);
        COMMIT;

       DECLARE pPolicyHolder INT;
       SET pPolicyHolder = (SELECT PatientID FROM Patient WHERE Fname = pFName AND 
                            LName = pLName);
    START TRANSACTION;
       INSERT INTO PatientInsurance(PolicyHolder, InsuranceCompany, CoPay) 
       VALUES(pPolicyHolder, pInsuranceCompany, pCoPay);
    COMMIT;
    END //
DELIMITER ; 
```

错误：

```
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'DECLARE pPolicyHolder INT;
   SELECT PatientID into pPolicyHolder FROM Patient W' at line 15 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T15:19:22.547

您需要在过程开始时声明变量，而不是在中间。

```
CREATE PROCEDURE AddNewPatient(...)
BEGIN
   DECLARE pPolicyHolder INT;  <------declare here

   START TRANSACTION;
   ...
   COMMIT;

   SET pPolicyHolder = (SELECT PatientID FROM Patient WHERE Fname = pFName AND 
                        LName = pLName);
   ... 
```

# racket - mixin：方法在定义中被引用，但不在任何 from 接口中

> ID：16000643
> 
> 赞同：1
> 
> 时间：2013-04-14T15:17:17.323
> 
> 标签：racket, mixins, parameterized

我已阅读 Racket 指南 13.7.3 Parameterized Mixins

我使用参数化 Mixins`good-eat-fish%`从`fish%`

```
(define fish-interface
  (interface () eat get-size))

(define fish%
  (class* object% (fish-interface)
    (init size)
    (super-new)
    (define current-size size)
    (define/public (get-size) current-size)
    (define/public (eat other)
      (set! current-size (+ current-size (send other get-size))))))

(define (good-eat-mixin member-name)
  (define eat member-name)
  (mixin () ()
    (inherit eat)
    (define/public (good-eat y)
      (eat y) (eat y))))

(define good-eat-fish%
  ((good-eat-mixin (member-name-key eat)) fish%)) 
```

当我运行代码时，会引发以下错误：

```
"mixin: method was referenced in definition, but is not in any of the from-interfaces
  method name: eat
  from-interfaces:" 
```

此错误消息是否表明没有`eat`方法？

如果我将代码更改为

```
(define (good-eat-mixin member-name)
  (define eat member-name)
  (mixin (interface () eat) (interface () eat good-eat)
    (inherit eat)
    (define/public (good-eat y)
      (eat y) (eat y)))) 
```

我收到此错误：

```
interface: bad syntax in: interface 
```

不幸的是，我不知道为什么

```
interface () eat) 
```

语法不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:48:35.730

对于第一个问题：mixin 会强制执行一些误用检查，而您会遇到它们。例如，如果你只是这样做：

```
(mixin () ()
  (inherit eat)
  (define/public (good-eat y)
    (eat y) (eat y))) 
```

然后系统检测到代码正试图依赖一个`eat`不属于 mixin 声明的接口的方法。您的第二次尝试更接近，但您需要额外的括号。例如，从

```
(mixin (interface () eat) (interface () eat good-eat)
  (inherit eat)
  (define/public (good-eat y)
    (eat y) (eat y))) 
```

到：

```
(mixin ((interface () eat)) ((interface () eat good-eat))
  (inherit eat)
  (define/public (good-eat y)
    (eat y) (eat y))) 
```

为接口命名，以便更容易看到：

```
(define eater<%> (interface () eat))
(define good-eater<%> (interface () good-eat))
...
(mixin (eater<%>) (good-eater<%>)
  ...) 
```

这是一个例子：

```
#lang racket

(define eater<%> (interface () eat))
(define good-eater<%> (interface () good-eat))

(define fish%
  (class* object% (eater<%>)
    (init size)
    (super-new)
    (define current-size size)
    (define/public (get-size) current-size)
    (define/public (eat other)
      (set! current-size (+ current-size (send other get-size))))))

(define fish-interface
  (interface () eat get-size))

(define good-eat-mixin
  (mixin (eater<%>) (good-eater<%>)
    (inherit eat)
    (super-new)
    (define/public (good-eat y)
      (eat y) (eat y))))

(define good-eat-fish%
  (good-eat-mixin fish%))

(define f1 (new good-eat-fish% [size 42]))
(define f2 (new good-eat-fish% [size 16]))
(send f1 eat f2)
(send f1 good-eat f2)
(send f1 get-size) 
```

（我从你的例子中去掉了成员键的东西，只是为了简化。）

我相信里面的阶级制度`racket/class`是名义上的而不是结构上的。

# c++ - strcpy c++ 无法从字符串 char* 转换参数 1

> ID：16000649
> 
> 赞同：4
> 
> 时间：2013-04-14T15:17:42.967
> 
> 标签：c++, strcpy

我正在尝试将 txt 文件*中的单词放入字符串数组中。但是 strcpy() 有一个错误。它说：'strcpy'：无法将参数 1 从 'std::string' 转换为 'char *'。这是为什么？不能在 C++ 中创建这样的字符串数组吗？

```
#include <iostream>
#include <fstream>
#include <string>
using namespace std;

void ArrayFillingStopWords(string *p);

int main()
{
   string p[319];//lekseis sto stopwords
   ArrayFillingStopWords(p);
   for(int i=0; i<319; i++)
   {
       cout << p[i];
   }
   return 0;
}

void ArrayFillingStopWords(string *p)
{
    char c;
    int i=0;
    string word="";
    ifstream stopwords;
    stopwords.open("stopWords.txt");
    if( stopwords.is_open() )
    {
       while( stopwords.good() )
       {
           c = (char)stopwords.get();
           if(isalpha(c))
           {
               word = word + c;
           }
           else
           {
               strcpy (p[i], word);//<---
               word = "";
               i++;
           }
       }
   }
   else
   {
       cout << "error opening file";
   }
   stopwords.close();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T15:34:35.870

建议`strcpy (p[i], word);`改成`p[i] = word;`. 这是 C++ 的做事方式，并利用了`std::string`赋值运算符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T15:38:22.590

你不需要`strcpy`这里。一个简单的任务就可以做到：`p[i] = word;`. `strcpy`用于 C 风格的字符串，它们是以 null 结尾的字符数组：

```
const char text[] = "abcd";
char target[5];
strcpy(target, text); 
```

使用`std::string`意味着您不必担心数组的大小是否正确，或者调用诸如`strcpy`.

# qt - 线程拒绝退出

> ID：16000659
> 
> 赞同：0
> 
> 时间：2013-04-14T15:18:04.850
> 
> 标签：qt

来源：[https ://mega.co.nz/#!xUMiSRYC!Y8Sxz2fEFb6yEIrnKiGx9n2zeK4YTUwUrCByaAkcOPI](https://mega.co.nz/#!xUMiSRYC!Y8Sxz2fEFb6yEIrnKiGx9n2zeK4YTUwUrCByaAkcOPI)

我遇到了 QThread::currentThread()->quit(); 的问题

如果您打开 myobject.cpp 并转到第 13 行，则应该退出 quit() 调用。但似乎 quit() 调用不起作用，它只是跳过它。看不出问题。:(

主.cpp：

```
#include "mainwindow.h"
#include <QApplication>

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    MainWindow w;
    w.show();

    QObject::connect(&a, SIGNAL(aboutToQuit()),
                     &w, SLOT(cleanUp()));

    return a.exec();
} 
```

主窗口.cpp：

```
#include "mainwindow.h"
#include "ui_mainwindow.h"
#include "myobject.h"
#include <QMessageBox>

MyObject* cObject;

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);
    this->setFixedSize(this->size());

    cThread = new QThread(this);
    cObject = new MyObject();
    cObject->moveToThread(cThread);

    QObject::connect(ui->pushButton_2, SIGNAL(clicked()),
                     this, SLOT(close()));

    QObject::connect(cThread, SIGNAL(started()),
                     cObject, SLOT(doWork()));

    QObject::connect(ui->pushButton, SIGNAL(clicked()),
                     this, SLOT(runThreadSlot()));

    QObject::connect(cThread, SIGNAL(finished()),
                     cThread, SLOT(deleteLater()));

    QObject::connect(cThread, SIGNAL(finished()),
                     cObject, SLOT(deleteLater()));

    QObject::connect(cObject, SIGNAL(setStatusBarSignal(QString)),
                     this, SLOT(setStatusBarSlot(QString)));

    ui->lineEdit->setValidator(new QIntValidator(this));
    ui->lineEdit->setFocus(Qt::OtherFocusReason);
    ui->statusBar->showMessage("Waiting for input...");
}

MainWindow::~MainWindow()
{
    delete ui;
}

void MainWindow::runThreadSlot()
{
    cThread->start();
    // I've trimmed some code here.
}

void MainWindow::setStatusBarSlot(QString text)
{
    ui->statusBar->showMessage(text);
}

void MainWindow::cleanUp()
{
    qDebug() << "Cleaning up!";
    cObject->stage = 0;
    cThread->wait();
} 
```

我的对象.cpp：

```
#include "myobject.h"
#include <QPixmap>
#include <opencv2/highgui/highgui.hpp>
#include <opencv2/imgproc/imgproc.hpp>

MyObject::MyObject(QObject *parent) :
    QObject(parent)
{
}

void MyObject::doWork()
{
    QThread::currentThread()->quit(); // It doesn't stop here. This is my issue.
    // I've trimmed the code here.
} 
```

主窗口.h：

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>

namespace Ui {
class MainWindow;
}

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();

private slots:
    void runThreadSlot();
    void setStatusBarSlot(QString);
    void cleanUp();

private:
    Ui::MainWindow *ui;
    QThread* cThread;
};

#endif // MAINWINDOW_H 
```

我的对象.h：

```
#ifndef MYOBJECT_H
#define MYOBJECT_H

#include <QtCore>

class MyObject : public QObject
{
    Q_OBJECT
public:
    explicit MyObject(QObject *parent = 0);
    QFile path;
    qint32 waitSecs;
    int stage;

signals:
    void setStatusBarSignal(QString);

public slots:
    void doWork();

};

#endif // MYOBJECT_H 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T16:14:13.953

`QThread::quit()`是异步的。`QThread::currentThread()->wait()`您应该在退出后立即添加。

# sql-server - 在 SQL 中删除数据

> ID：16000661
> 
> 赞同：0
> 
> 时间：2013-04-14T15:18:42.270
> 
> 标签：sql-server

我的问题是关于删除数据库中的数据。我的数据库有 4 个表：

*   类别
*   话题
*   副主题
*   物品

*   该表有一个引用该表`Topic`的外键 ( )`CategoryID``Category`

*   该表有一个引用该表`Subtopic`的外键 ( )`TopicID``Topic`
*   该表有一个引用该表`Item`的外键 ( )`SubtopicID``Subtopic`

我想知道什么时候我想删除一个类别我应该怎么做？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:23:40.430

如果要删除相关表中的所有依赖行，可以进行级联删除。级联删除将从父表以及子表中删除该行。如果您需要自动删除多级的所有关系，请为您的数据库风格搜索“cascade all”语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T15:23:51.913

如果您有`on delete cascade`，如果您删除一个类别，它将删除所有引用该类别的主题，反过来，所有引用已删除主题的子主题都将被删除。与物品相同。

如果您`on delete restrict`在其中一个表上，您将收到一条错误消息，指出由于引用约束而无法删除该类别。

您可以使用适当的 sql 语句或从您的 dbms UI 更改级联的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T15:25:02.300

如果我没看错（破碎的、不清楚的英语），您将不得不删除 , 中的数据`ITEM`，`SUBTOPIC`以及`TOPIC`最终指向您的表的引用的`CATEGORY`表。或者，您必须删除参考。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T15:25:24.953

`Cascade`当您删除 table 上的某些内容时将起作用`Category`。引用表 Category 的 child 上的任何记录也将被删除。

这是定义它的简单示例

```
ALTER TABLE Courses
ADD FOREIGN KEY (CategoryId)
REFERENCES Categories(CategoryPK)
ON DELETE CASCADE; 
```

# css - webkit 转换不起作用

> ID：16000664
> 
> 赞同：0
> 
> 时间：2013-04-14T15:19:15.853
> 
> 标签：css, hover, css-transitions

[http://jsfiddle.net/cJrgB/](http://jsfiddle.net/cJrgB/)

中的超链接`#shortcut-bar`已给出`-webkit-transition: background .25s ease-in-out`。但它不起作用。我也试过`all .25s ease-in-out`

与我的问题相对应的代码行如下：

`/* vvvvvvvvvvvvvvvvvvvvv here vvvvvvvvvvvvvvvvvvvvv */`

PS：请解释一下`ease-in-out` `ease-in` `ease-out` `ease`etc是什么意思

`:hover`PS2：另外，在伪类或其一般区域中，哪个地方的过渡属性更好，没有的地方`:hover`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:23:10.337

广告主要问题：我认为过渡不适用于渐变。

广告 PS：见[CSS3 过渡](http://css3.bradshawenterprises.com/transitions/)

广告 PSS：如果你添加过渡，`:hover`它只会在 上激活`:hover`，所以当你“悬停”时，根本不会有过渡。

# c# - HTTP 请求未找到错误 windows phone

> ID：16000667
> 
> 赞同：1
> 
> 时间：2013-04-14T15:19:25.253
> 
> 标签：c#, asp.net, .net, windows-phone-7

我有一个托管在本地 Apache 服务器上的 HTML 页面，我正在尝试使用以下代码向该页面发出 HTTP Web 请求。代码遇到了一个 web 异常，并且也抛出了一个异常`invalid argument exception`。这发生在用于从代码的 catch 部分中的流中获取数据的代码中：

```
 private void b1_Click_1(object sender, RoutedEventArgs e)
    {

        System.Uri targetUri = new System.Uri(@"http://192.168.1.4/san/index1.html");
        HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(targetUri);
        request.BeginGetResponse(new AsyncCallback(ReadWebRequestCallback), request); 

    }

    private void ReadWebRequestCallback(IAsyncResult callbackResult)
    {
        HttpWebRequest myRequest = (HttpWebRequest)callbackResult.AsyncState;

        try
        {
            HttpWebResponse myResponse = (HttpWebResponse)myRequest.EndGetResponse(callbackResult);
            using (StreamReader httpwebStreamReader = new StreamReader(myResponse.GetResponseStream()))
            {
                string results = httpwebStreamReader.ReadToEnd();
                //TextBlockResults.Text = results; //-- on another thread!
                // Dispatcher.BeginInvoke(() => TextBlockResults.Text = results);

            }
            myResponse.Close();

        }
        catch (WebException ex)
        {
            using (StreamReader reader = new StreamReader(ex.Response.GetResponseStream()))
            {
                Debug.WriteLine(reader.ReadToEnd());
            }

        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T17:28:23.340

您是否尝试从模拟器或设备访问该页面？如果是设备，则需要确保可以从辅助设备访问网页。也就是说 - 确保端口 80 对 LAN 访问开放。

# asp.net - C# Web.Optimization Bundles 和 HTML5 缓存清单

> ID：16000676
> 
> 赞同：0
> 
> 时间：2013-04-14T15:20:00.207
> 
> 标签：asp.net, cache-manifest, system.web.optimization

我正在使用 ASP.NET 优化包来缩小和捆绑脚本和 CSS 文件。我还在为使用 HTML5 缓存清单的 ASP.NET 应用程序开发移动 UI。

当文件发生变化和应用缓存被回收时，优化包会更新动态捆绑 URL 的版本。

我希望能够在发生这种情况时更新我的​​清单版本，并在清单中包含优化包提供的动态 URL。

如何读取当前版本（“v”参数）或其他任何内容来触发清单更新？

```
/_assets/bundles/global?v=fmbQlO0mGjXyliVEBImQIr5yoMX0Tw0tlMK45jlwHZ81 
```

示例代码：

```
 string version= "2.6";
    StringBuilder output = new StringBuilder();
    output.AppendLine("CACHE MANIFEST");
    output.AppendLine(string.Format("# v{0}", ??????));

    output.AppendLine("CACHE:");
    output.AppendLine(Scripts.Url("~/bundles/global").ToString());
    ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-16T09:08:38.307

如果应用程序清单发生更改，它将自动触发更新。

对于静态资产，人们通常会更改评论中的版本号，以便文件发生更改并触发更新，即使 CACHE、NETWORK 和 FALLBACK 部分下的内容未更改。

当您使用 System.Web.Optimization 生成的 URL 时，该 URL 将在捆绑包中的任何 CSS 或 JavaScript 文件的内容发生更改时更改。这意味着清单文件将自动与文件的先前版本不同，并将触发更新。

无需通过更新版本注释来强制文件不同。

# jquery - JQuery：具有 3 级自动选择子级或父级的复选框

> ID：16000677
> 
> 赞同：0
> 
> 时间：2013-04-14T15:20:03.663
> 
> 标签：jquery, checkbox

我有一个看起来像这样的表：

```
<table border="1">

 <tr>
   <td>Parent</td>
   <td>Child</td>
 </tr>
 <tr>
   <td><input type="checkbox" level="parent" name="someparent1" value="1">Parent 1</td>
   <td>
     <li style="list-style-type:none;"><input type="checkbox" level="child"  name="somename1" value"1"> Child 1</li>
     <li style="list-style-type:none;"><input type="checkbox" level="child"  name="somename2" value"2"> Child 2</li>
     <li style="list-style-type:none;">&nbsp;&nbsp;&nbsp;&nbsp;<input type="checkbox" level="subchild" name="somename1" value="3">Sub Child 1</li>
     <li style="list-style-type:none;">&nbsp;&nbsp;&nbsp;&nbsp;<input type="checkbox" level="subchild" name="somename2" value="3">Sub Child 2</li>
     <li style="list-style-type:none;"><input type="checkbox" level="child"  name="somename3" value"3"> Child 3</li>
   </td>
 </tr>
 <tr>
   <td><input type="checkbox" level="parent" name="someparent1" value="1">Parent 2</td>
   <td>
     <li style="list-style-type:none;"><input type="checkbox" level="child"  name="somename1" value"1"> Child 1</li>
     <li style="list-style-type:none;">&nbsp;&nbsp;&nbsp;&nbsp;<input type="checkbox" level="subchild" name="somename1" value="3">Sub Child 1</li>
     <li style="list-style-type:none;">&nbsp;&nbsp;&nbsp;&nbsp;<input type="checkbox" level="subchild" name="somename2" value="3">Sub Child 2</li>
     <li style="list-style-type:none;">&nbsp;&nbsp;&nbsp;&nbsp;<input type="checkbox" level="subchild" name="somename3" value="3">Sub Child 3</li>
     <li style="list-style-type:none;">&nbsp;&nbsp;&nbsp;&nbsp;<input type="checkbox" level="subchild" name="somename4" value="3">Sub Child 4</li>   
     <li style="list-style-type:none;"><input type="checkbox" level="child"  name="somename2" value"2"> Child 2</li>
     <li style="list-style-type:none;"><input type="checkbox" level="child"  name="somename3" value"3"> Child 3</li>    
   </td>
 </tr>
 <tr>
   <td><input type="checkbox" level="parent" name="someparent1" value="1">Parent 3</td>
   <td>
     <li style="list-style-type:none;"><input type="checkbox" level="child"  name="somename1" value"1"> Child 1</li>
     <li style="list-style-type:none;"><input type="checkbox" level="child"  name="somename2" value"2"> Child 2</li>
     <li style="list-style-type:none;"><input type="checkbox" level="child"  name="somename3" value"3"> Child 3</li>
     <li style="list-style-type:none;">&nbsp;&nbsp;&nbsp;&nbsp;Others Reason: <input type="text" level="subchild" size="50" name="other" ></li>      
   </td>
 </tr>   

</table> 
```

和这样的jquery代码：

```
$('input[@type=checkbox][level$="child"]').click(function(event) {
    var checked = $(this).is(':checked');

    if (checked) {
        $('input[@type=checkbox][level$="parent"]').attr('checked', true);
    }
});

$('input[@type=checkbox][level$="subchild"]').click(function(event) {
    var checked = $(this).is(':checked');

    if (checked) {
        $('input[@type=checkbox][level$="child"]').attr('checked', true);        
        $('input[@type=checkbox][level$="parent"]').attr('checked', true);        
    }
}); 
```

1）单击子复选框时，如何仅检查父复选框的当前行？

2）单击子复选框时，如何仅检查父复选框+子复选框的当前行？

- 当前问题是当您检查 1 个子子项时，它将选择那里的所有复选框。

- 示例（父 1 行）：如果我选择**子子 1**或**子子 2**，则代码应自动选择**子 2**和**父 1**

-JSFiddle 这里：http: [//jsfiddle.net/YDgHN/2/](http://jsfiddle.net/YDgHN/2/)

任何帮助都会很棒。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T15:31:57.477

对于问题 #1 ，您可以尝试以下操作：

```
$('input[@type=checkbox][level$="child"]').click(function(event) {
    var checked = $(this).is(':checked');

    if (checked) {
        $(this).parent().parent().parent('tr').find('td:first input[@type=checkbox][level$="parent"]').attr('checked', true);
    }
}); 
```

这是解决问题一的更好代码

```
$('input[@type=checkbox][level$="child"]').click(function (event) {

    var checked = $(this).is(':checked');
    $(this).parent().parent().parent('tr').find('td:first input[@type=checkbox][level$="parent"]').attr('checked', checked);

}); 
```

看，当你选择孩子时，父母也会被选择，反之亦然。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T16:55:26.007

对于问题一：

```
$('input[@type=checkbox][level="child"]').click(function (event) {
        var checked = $(this).is(':checked');
        if (checked) {
            $(this).closest('td').parent().children('td').first('td').children('input[@type=checkbox][level="parent"]').attr('checked', true);
        }
    }); 
```

对于问题二：

```
 $('input[@type=checkbox][level="subchild"]').click(function (event) {
            var checked = $(this).is(':checked');

            if (checked) {
   // Two select Parent element   
         $(this).closest('td').parent().children('td').first('td').children('input[@type=checkbox][level="parent"]').attr('checked', true);

   // Two select Child element. You will have to loop through all the li elements to //find the appropriate child element 

                $(this).parent().prevAll('li').each(function () {
                    var found = $(this).children('input[@type=checkbox]').attr('level') == 'child';
                    if (found) {
                        $(this).children('input[@type=checkbox][level="child"]').attr('checked', true);
                        return false;
                    }
                });
            }
        }); 
```

# c# - 有没有办法强制 C#.NET 在睡觉前完成一行代码的执行？

> ID：16000681
> 
> 赞同：0
> 
> 时间：2013-04-14T15:20:35.000
> 
> 标签：c#, .net, sleep

我希望我的程序做的事情是这样的：

```
for (int i = 0; i < btns.Length; i++)
{
    //Flash red
    btns[i].BackColor = Color.Red;
    System.Threading.Thread.Sleep(500);
    //Change to green
    btns[i].BackColor = Color.Green;
} 
```

`btns`改变颜色的按钮集合在哪里。

但是当我的代码执行时，它会休眠 2.5 秒（因为有 5 个按钮），然后它们会立即将颜色变为绿色，而不会闪烁红色。我的猜测是，这是因为完成颜色更改所需的时间比达到`Sleep`功能所需的时间更长，这会使一切都停止。

我试过使用定时器，它有自己的问题。为此，我宁愿改变>等待>改变。有没有办法我可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T15:24:32.437

> 我的猜测是，这是因为完成颜色更改所需的时间比达到睡眠功能所需的时间更长，这会使一切都停止。

不，问题是负责进行实际绘图的线程是您已经进入睡眠状态的线程。阻塞 UI 线程*从来都不*是一个好主意。

> 我试过使用定时器，它有自己的问题。

尽管如此，它们很可能是 C# 5 之前最简单的方法。基本上你想改变颜色，然后让 UI 线程继续它想要的任何东西，然后在半秒后再次改变颜色，等等。计时器会让你这样做。

不过，使用 C# 5 确实更容易。你可以写一个`async`这样的方法：

```
public async Task FlashButtons()
{
    foreach (Button button in buttons) // No need for a for loop here
    {
        button.BackColor = Color.Red;
        await Task.Delay(500);
        button.BackColor = Color.Green;
    }
} 
```

`await`结合使用会`Task.Delay`“暂停”您的异步方法，但不会实际阻塞 UI 线程。我现在没有时间详细说明 async/await 是如何工作的，但是网上有很多资源，比如[这个 MSDN 页面](http://msdn.microsoft.com/en-gb/library/vstudio/hh191443.aspx)。

# clojure - lein 应用程序和库的 lein repl 命名空间的区别？

> ID：16000683
> 
> 赞同：1
> 
> 时间：2013-04-14T15:21:01.103
> 
> 标签：clojure, leiningen

当我`lein repl`创建一个`lein new app ...`. `lein repl`但是当我只是通过创建库项目时，我似乎无法调用函数`lein new ...`。详情如下：

当我创建一个 lein 应用程序时，比如说`lein new app my-app`，然后，从项目目录（包含 的目录`project.clj`），我做`lein repl`. repl 将我留在命名空间中`my-app.core`

```
my-app.core=> 
```

我现在可以调用 repl 中的函数，甚至可以调用边文件中定义的函数。

```
my-app.core=> (-main)
; Hello, world!
my-app.core=> (my-app.anotherfile/foo)
; Hey, there; this is foo from anotherfile 
```

只要我`:require [my-app.anotherfile]`在 ns 宏中`core.clj`。

好，很好; 现在我想对 lein 库做类似的事情。所以我`lein new my-lib`，然后`lein repl`，我在`user`命名空间中：

```
user=> 
```

嗯？好的，我的 lib 包含一个我想调用的函数（这只是 leiningen 默认创建的函数）

```
(ns my-lib.core)

(defn foo
  "I don't do a whole lot."
  [x]
  (println x "Hello, World!")) 
```

我试试

```
user=> (in-ns 'my-lib.core)
my-lib.core=> (foo 42)
; CompilerException java.lang.RuntimeException: Unable to resolve symbol: foo in this context, compiling:(NO_SOURCE_PATH:1:1) 
```

不。这个怎么样？

```
user=> (my-lib.core/foo 42)
; ClassNotFoundException two-files-lib.core  java.net.URLClassLoader$1.run (URLClassLoader.java:202 
```

啊哈！不同的错误，但仍然无法治愈。`lein compile`并且`lein javac`似乎也没有做任何事情。

我无法在文档或在线上找到或推断出正确的咒语，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T16:27:47.177

在默认`lein new`项目中，您需要`require`明确使用的命名空间 - `(require 'my-lib.core)`。`in-ns`如果它尚不存在，只需创建一个给定名称的新空命名空间，它不会从类路径加载任何代码。

应用程序项目会自动执行此操作并切换到 REPL 任务中的主命名空间，因为它们默认有一个`:main foo.core`条目。`project.clj`可以为库执行此操作，但您不应该这样做 - 作为副作用，它会导致主命名空间的 AOT 编译，这通常是不可取的。

相反，在 lein2 中，您可以使用`:repl-options {:init-ns my-lib.core}`.

# java - 我可以将 Guice 中的 @Transactional 与 Google App Engine 的数据存储区一起使用吗？

> ID：16000685
> 
> 赞同：2
> 
> 时间：2013-04-14T15:21:07.220
> 
> 标签：java, google-app-engine, transactions, google-cloud-datastore, guice

我可以做这样的事情吗？即使我没有使用`ds.get(tx, key)`and ，它仍然是交易`ds.put(tx, key)`吗？

```
public class MyClass {

    private final DatastoreService ds;

    @Inject
    public MyClass(DatastoreService ds) {
        this.ds = ds;
    }

    @Transactional
    public void plusOne() {
        Key someKey;
        Entity thing = ds.get(someKey);
        int newValue = thing.getProperty("prop") + 1;
        thing.setProperty("prop", newValue);
        ds.put(thing);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-18T10:00:32.430

我不习惯 Guice，但像任何其他依赖注入框架一样，我猜你必须在模块配置中声明某种 TransactionManager ？在这种情况下，它不存在，或者至少没有被 Google 宣传。也许你会在社区中找到你需要的东西，看看 GitHub……但我再次高度怀疑 Guice 是否支持开箱即用的低级数据存储。不过，您可能在 Guice 中有一些 JPA 支持？

或者您可以开发自己的事务管理器...我已经使用 Spring 开发了自己的 @DatastoreTransactional 注释，但不幸的是在生产运行时使用 Spring AOP 失败，请参阅： [在 App Engine 上使用 Spring AOP 导致 StackOverflowError](https://stackoverflow.com/questions/20615378/using-spring-aop-on-app-engine-causes-stackoverflowerror)

# javascript - 让 Math.round 向上舍入到下一分钟，即使超过一秒

> ID：16000692
> 
> 赞同：2
> 
> 时间：2013-04-14T15:21:48.360
> 
> 标签：javascript, math, xhtml, rounding

与我之前的问题相关，[javascript math.round 和 math.floor 在 IE 和 Opera 中运行良好，但在 Chrome、Safari 或 Firefox 中运行良好。获取 NaN](https://stackoverflow.com/questions/15866752/javascript-math-round-and-math-floor-work-fine-in-ie-and-opera-but-not-chrome-s)

我在这里更新了小提琴[http://jsfiddle.net/8VmPm/](http://jsfiddle.net/8VmPm/)

这个脚本背后的原因可能看起来有点模糊，所以我会尝试解释一下。来自某个网​​络运营商的 CDR（呼叫详细记录）以秒为单位提供语音记录和数据记录的字节。我正在编写一个“计算器”来将秒转换为分钟，将字节转换为兆字节。

我还更进一步，并在其中添加了一些示例计划来检查是否超额。

我的问题（这只是装饰性的，但我就是这样的强迫症）在第一次计算中`(Math.round(minusage / 60))`（第 22 行和第 23 行在小提琴中）。**即使在“使用情况**”字段中输入的值超过 1 秒，我也需要将其四舍五入到下一分钟。

例子：

1.  一分钟内**哪个计划？**下拉菜单，选择*A 计划*（500 分钟）
2.  在**Usage Used**字段中，输入*30001*（即 500 分 1 秒）
3.  点击**计算**按钮

**“使用情况摘要**”字段中的结果将是：

*使用了 500 分钟。-1 剩余 500 分钟*

**目前，在Usage Used**字段中输入的值是 30030 或更大（对于计划 A）之前，它不会说“已*使用 501 分钟”*

 **即使超过 1 秒，我也**需要它进入下一分钟（否则它会混淆将使用它的非技术人员）**

任何有关此事的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T15:23:47.073

看看`Math.ceil(...)`。它是一种向上舍入到最接近整数的 JavaScript 方法。这是[MDN 页面](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/ceil)的链接。**

# java - 如何在插入时使用typeHandler在mybatis中映射枚举类型

> ID：16000709
> 
> 赞同：13
> 
> 时间：2013-04-14T15:23:32.007
> 
> 标签：java, mysql, enums, mybatis, typehandler

我已经与 enum 斗争了一段时间，但它不会如我所愿。有没有人可以给我提示？我正在尝试在 MySql 中使用 Enum 类型，并且在我的代码中也使用了 Enum 类。

由于现在的代码它将插入星期一，但它也会尝试在工作日 ID 上插入星期一...我没有得到工作日 ID。我相信我必须以某种方式处理 DAY_TYPE ......也许定义一个 typeHandler ？但我试过了，但它不起作用，或者因为我做不到正确？

我也尝试了 org.apache.ibatis.type.EnumTypeHandler 但没有成功，就像这样

```
 #{DAY_TYPE,typeHandler=org.apache.ibatis.type.EnumTypeHandler} 
```

DAY_TYPE.java

```
 package tut.model;
    import java.io.Serializable;
    public enum DAY_TYPE implements Serializable{
        MONDAY(1),TUESDAY(2),WEDNESDAY(3),THURSDAY(4),FRIDAY(5),SATURDAY(6),SUNDAY(7);
        private int id; private int workdayID;

        private DAY_TYPE(int id) { this.id = id; }

        public int getId() { return id;    }
        public void setId(int id) {  this.id = id;    }

        public int getWorkdayID() { return workdayID;    }
        public void setWorkdayID(int workdayID) {this.workdayID = workdayID;}
    } 
```

DAY_TYPE_Mapper.xml

```
 <insert id="insert" parameterType="DAY_TYPE" useGeneratedKeys="true" keyProperty="iddaytaype">
        INSERT INTO daytaype (DAY_TYPE, workdayID)
        VALUES (#{DAY_TYPE},#{workdayID})
        <selectKey keyProperty="iddaytaype" resultType="long" order="AFTER">
            SELECT LAST_INSERT_ID();
        </selectKey>
    </insert>

<!-- <insert id="insert" parameterMap="insert-params" useGeneratedKeys="true" keyProperty="iddaytaype"> -->
    <parameterMap id="insert-params"   type="DAY_TYPE">
        <parameter property="DAY_TYPE" javaType="DAY_TYPE" typeHandler="mappings.XenumTypeHandler"  />
        <parameter property="workdayID" javaType="int" />
    </parameterMap> 
```

我的数据库表

```
 CREATE TABLE `daytaype` (
      `iddaytaype` int(11) NOT NULL AUTO_INCREMENT,
      `DAY_TYPE` enum('MONDAY','TUESDAY','WEDNESDAY','THURSDAY','FRIDAY','SATURDAY','SUNDAY') NOT NULL,
      `workdayID` int(11) unsigned DEFAULT NULL,
      PRIMARY KEY (`iddaytaype`),
      KEY `fk_workDayID_idWorkDay` (`workdayID`)
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;=InnoDB DEFAULT CHARSET=utf8; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T00:19:06.213

工作日就这样存在

```
 public class Workday implements Serializable{
        private long idWorkDay;
        private Date start;
        private Date end;
        private List<Workbreak> workBreaks;
        private DAY_TYPE DAY_TYPE;
        private long workweekID;
        getter setter.... 
```

正确的解决方案当然是在工作日表中添加枚举......我相信它会减少数据库占用。

```
 <insert id="insert" parameterType="workday" useGeneratedKeys="true" keyProperty="idWorkDay">
      INSERT INTO workday 
        ( start , end , workweekID , DAY_TYPE )
      VALUES (
        #{start},
        #{end},
        #{workweekID},
        #{DAY_TYPE, typeHandler=org.apache.ibatis.type.EnumTypeHandler}
      )
        <selectKey keyProperty="idWorkDay" resultType="long" order="AFTER">
            SELECT LAST_INSERT_ID();
        </selectKey>
    </insert> 
```

现在删除 daytaype 表并直接在工作日表中添加枚举。

```
 CREATE TABLE `workday` (
      `idworkday` int(11) NOT NULL AUTO_INCREMENT,
      `start` time DEFAULT '08:00:00',
      `end` time DEFAULT '17:00:00',
      `workweekID` int(11) DEFAULT NULL,
      `DAY_TYPE` enum('MONDAY','TUESDAY','WEDNESDAY','THURSDAY','FRIDAY','SATURDAY','SUNDAY') DEFAULT NULL,
      PRIMARY KEY (`idworkday`),
      KEY `fk_workweek_workweekID` (`workweekID`),
      CONSTRAINT `fk_workweek_workweekID` FOREIGN KEY (`workweekID`) REFERENCES `workweek` (`idworkweek`) ON DELETE CASCADE ON UPDATE NO ACTION
    ) ENGINE=InnoDB AUTO_INCREMENT=139 DEFAULT CHARSET=utf8 ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-13T03:07:05.570

覆盖getter setter。我是这样的：

```
@Column(name = "type")
private MailType type;

public String getType(){
    return type.name();
}
public void setType(String type){
    this.type = MailType.valueOf(type);
}
public MailType getTypeEnum(){
    return type;
}
public void setTypeEnum(MailType type){
    this.type = type;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-12T07:26:15.297

在您的情况下，DAY_TYPE 包含一个成员 ID。现在，如果您将 ENUM 作为 id 存储在数据库中，您始终可以使用 CustomEnumTypeHandler 来为您处理 DAY_TYPE，即使您没有将 ENUM 与数据库同步。

# java - 带框架的 JAVA SocketServer

> ID：16000713
> 
> 赞同：0
> 
> 时间：2013-04-14T15:23:49.723
> 
> 标签：java, multithreading, swing, frame, serversocket

我正在尝试制作具有框架的 Java 套接字服务器，其中显示消息。

但是当我从框架构造函数运行服务器时，框架不会变得可见。

我的代码有一部分：

调用框架：

```
 public static void main(String[] args) {

    java.awt.EventQueue.invokeLater(new Runnable() {
        @Override
        public void run() {
            try {
                new ServerForm().setVisible(true);
            } catch (IOException ex) {
                Logger.getLogger(Ship_Server.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
    }); 
```

创建服务器：

```
 public ServerForm() throws IOException {
    initComponents();

    hipServer Server = new hipServer();

} 
```

服务器构造函数：

```
 public ShipServer() throws IOException {
    ServerSocket listener = new ServerSocket(8901);
    System.out.println("Server is Running");
    try {
        while (true) {

          ...
         }
    } finally {
        listener.close();
    }
} 
```

你能提出一些建议，运行服务器和实时活动框架吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:29:08.843

避免在 EDT 中包含进程密集型代码，例如无限`while`循环。

看看使用[SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)。它不会`EDT`在等待网络连接时阻塞。该`ServerSocket`功能可以在[doInBackground](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html#doInBackground%28%29)中进行管理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T15:28:21.053

您还需要为服务器创建一个线程，因为...

```
while(true) 
```

...“永不”结束

或者

在创建服务器之前显示表单（确保它是可见的）。

# json - 使用外部js的主干

> ID：16000715
> 
> 赞同：0
> 
> 时间：2013-04-14T15:23:52.933
> 
> 标签：json, backbone.js

大家好，我有一个用 cakephp 开发的网站，我想在上面集成骨干网。
对于我的范围，我会使用外部 js 作为主干来重用代码。
我已经写了一些行，但我不能在我的元素上附加结果。
我试图在这种模式下打印“el”：

```
console.log($(this.el));
console.log(this.el);
console.log(this.$el); 
```

但是没有什么我不能进入 el 来做一个简单的追加！
容器#search-results 已经存在
这是我的主要观点：

```
<script type="text/javascript">

var search = {};
search.product = {};
search.product.template = "#results-product-template";
search.product.container = "#search-results";
search.product.defaults = {
    id:0,
    type:"product",
};

$(function(){
    var ProductList = new Search.Collections.Products();

    var ProductView = new Search.Views.Product({
        // new Search.Collections.Products();
        collection:ProductList
        ,el:$("#search-results")
    });

    function parseResults () {
                var json = {
                //my data
                }
        for (var i = json.products.length - 1; i >= 0; i--) {
            ProductList.add([new Search.Models.Product(json.products[i])]);
        };

        updateResults();
    }

    function updateResults () {
        console.log('updateResults: Ritorno il risultato quando hunter riceve una risposta dal server');
        if ($('#search-results').length == 0) {
            $('div.main > section:first-child').before('<section id="search-results"> <ul id="product-results"> <li>Contenuto</li> </ul> </section>');
        }
        ProductView.render();
    }

    // search
    $('#search-results .close').on('click', function () {
        $('#search-results').animate({height:0}, 500, function () {
            $(this).remove();   
        })
    });

});
</script> 
```

这是我的带骨干的外部 js

```
var Search = {
    Models: {},
    Collections: {},
    Views: {},
    Templates:{}
}

Search.Models.Product = Backbone.Model.extend({
    defaults: search.product.defaults || {},
    toUrl:function (url) {
        return url.replace(" ", "-").toLowerCase();
    },
    initialize:function () {
        console.log("initialize Search.Models.Product");
        this.on("change", function (){
            console.log("chiamato evento change del Model Search.Models.Product");
        });
        this.on("change:text", function () {
            console.log("chiamato evento change:text del Model Search.Models.Product");
        });
    }
});

Search.Collections.Products = Backbone.Collection.extend({
    model: Search.Models.Product,
    initialize:function () {
        console.log("initialize Search.Collections.Products");
        console.log(this);
        console.log(this.length);
        console.log(this.models);
    }
});

Search.Views.Product = Backbone.View.extend({
    initialize:function () {
        console.log("initialize Search.Views.Product");
        console.log($(search.product.template).html());

    },
    template:function (data) {
        if (data == null) {
            data = this.collection.toJSON(); 
        }
        var template = Handlebars.compile($(search.product.template).html());
        template(data);
    },
    render:function () {
        console.log($(this.el));
            $(this.el.append("TEST"));
            //HERE IS THE PROBLEM
            // I have tried this.$el.append("TEST");
        return this;
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T02:22:49.413

这有什么改变吗？

```
var ProductView = new Search.Views.Product({
    // new Search.Collections.Products();
    collection:ProductList,
    el:$("#search-results")[0]
}); 
```

我认为主干可以接受 jQuery 包装或未包装的对象并且很好，但我不知道你使用的是什么主干版本，看看这是否有效

编辑：从主干 1.0 的来源来看，主干确实可以采用 jQuery 包装的对象或常规的 dom 元素，它应该仍然可以工作

```
this.$el = element instanceof Backbone.$ ? element : Backbone.$(element); 
```

你在网上有什么东西吗（JSFiddle？）我很乐意看看，但`this.$el`应该可以`$("#search-results")`快速浏览一下你的代码。

您是否尝试过使用`ProductView.setElement($("#search-results"))`？它应该是相同的，但也值得一试。

# svn - 是否可以在本地设置 SVN 服务器，然后从任何地方访问它？

> ID：16000719
> 
> 赞同：0
> 
> 时间：2013-04-14T15:24:25.083
> 
> 标签：svn, tortoisesvn, repository

我想在本地设置 svn 服务器，但它应该可以从任何地方访问。目前我们可以在网络内访问它。换句话说，我们如何使系统可以从任何地方通过 IP 访问？如何将其转换为服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T16:49:23.400

如果您使用`svnserve`或`httpd`作为服务器（而不是通过 访问它`file://`，您可以从全世界任何地方访问它。

假如：

1.  您的路由器没有阻止访问。
2.  您的系统没有阻止该端口。

不幸的是，这可能是两个非常大的如果——尤其是第 1 点。如果您有 Windows 并且正在使用`svnserve`，则需要将 Windows 防火墙设置为取消阻止端口 3690。其他 PC 可能必须这样做。一旦完成，您网段上的每个人都应该能够访问您系统上的存储库。要获得更广泛的访问权限，您必须配置路由器，或者在公司网络中要求 IT 部门在其路由器上打开该端口。

而且，我不会责怪公司 IT 管理员拒绝您的请求。他们会坚持这必须放在服务器上，而不是用户机器上，他们还会坚持这应该通过 VPN 完成。他们应该坚持要求你有一个备用计划和各种其他文书工作。

如果您不介意让您的代码在全球范围内可见，您可以将您的代码放在许多使用 Subversion 作为服务器的开源站点上。哎呀，即使是 Github 也允许您使用 Subversion 访问您的存储库。

如果您是唯一一个访问代码的人，您可以将您的存储库目录放在[Dropbox](http://dropbox.com)目录中。最主要的是，您一次不能从多个地方访问此存储库。曾经。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T21:29:23.917

如果您可以从外部通过 ssh 访问服务器，并且服务器上也安装了 svn，那么您就可以开始了！只需使用 svn+ssh:// 协议，剩下的交给现有的用户管理即可。

# c - 无法在 C 中使用 gets() 获取字符串

> ID：16000722
> 
> 赞同：-1
> 
> 时间：2013-04-14T15:24:37.983
> 
> 标签：c, string, gets

我想编写一个程序来检查哪个字符串的长度更大，而不使用字符串函数。我试图将这两个字符串作为输入使用`gets()`，但我的程序不断崩溃。请帮忙！谢谢！

这是我的代码：

```
#include <stdio.h>
int l1,l2;
char *st1,*st2;
void accept()
{
    gets(st1);
    gets(st2);
}
void length()
{
    int i = 0;
    while (st1[i] != '\0')
    {
        l1++; i++;
    }
    i = 0;
    while (st2[i] != '\0')
    {
        l1++; i++;
    }

}
int main()
{
    accept();
    length();
    if (l1 > l2)
        printf("String #1 is greater in length.\n");
    else
        printf("String #2 is greater in length.\n");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T15:27:51.920

你没有分配空间，`st1`也`st2`没有初始化它们......所以它们都指向内存中的某个未知位置。尝试...

```
char st1[1024];
char st2[1024]; 
```

也就是说，意识到这`gets`本质上是不安全的，因为它会受到缓冲区溢出攻击；没有什么可以阻止某人输入超过 1024 的字符串并导致程序崩溃。

您还可以大大简化 length() 函数，如下所示...

```
void length()
{
    for (l1 = 0; st1[l1] != '\0'; l1++ );
    for (l2 = 0; st2[l2] != '\0'; l2++ );
} 
```

扩展这个和你关于什么是替代品的问题`gets()`，答案是使用类似的东西`fgets()`- 例如......

```
int main( int argc, char** argv )
{
    if( fgets( st1, sizeof( st1 ), stdin ) != NULL )
    {
        if( fgets( st2, sizeof( st2 ), stdin ) != NULL )
        {
            length();

            if (l1 > l2) printf("String #1 is greater in length.\n");
            else if (l2 > l1) printf("String #2 is greater in length.\n");
            else printf( "Both strings are the same length.\n" );
        }
        else printf( "could not read second string\n" );
    }
    else printf( "could not read first string\n" );

    return( 0 );
} 
```

在这种情况下，`fgets()`将不允许用户溢出`st1`或`st2`确保它们始终为空终止字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T15:26:29.373

`l2`在第二个`while`循环中 使用，

```
 l1=0;
    while (st1[l1] != '\0')
    {
        l1++;
    }
    l2 = 0;
    while (st2[l2] != '\0')
    {
        l2++;
    } 
```

# c# - 如何在列表视图中获取文本框的值？

> ID：16000727
> 
> 赞同：0
> 
> 时间：2013-04-14T15:25:09.157
> 
> 标签：c#, asp.net

```
 <asp:ListView runat="server" ID="lvAttachments" ItemPlaceholderID="ph" OnItemDataBound="lvAttachments_ItemDataBound">
                <LayoutTemplate>
                    <asp:PlaceHolder ID="ph" runat="server"></asp:PlaceHolder>
                </LayoutTemplate>
                <ItemTemplate>
                                <asp:LinkButton runat="server" ID="btnReject" OnClick="btnReject_Click"></asp:LinkButton>
                                <asp:TextBox runat="server" ID="tbReason" CssClass="textbox" TextMode="MultiLine"></asp:TextBox>
                </ItemTemplate>
            </asp:ListView> 
```

我的问题是：如何从文本框中获取文本，而 btnReject 点击操作？

```
protected void btnReject_Click(object sender, EventArgs e)
{
    LinkButton btnReject = (LinkButton)sender;
    // how to get tbReason.Text from this item?

} 
```

问候

编辑：

问题解决了！我们只需要添加 Page_Load 代码来防止重新加载列表视图和清除文本框:)

[http://forums.asp.net/t/1712482.aspx/1](http://forums.asp.net/t/1712482.aspx/1)

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        lvAttachments.DataSource = tAttachmentBO.getAttachmentsToAccept();
        lvAttachments.DataBind();
    } 
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:34:30.150

像这样的东西应该工作

我在 ipad 上，如有错误请见谅

```
TextBox txt = (TextBox)btnReject.Parent.FindControl("tbReason") 
```

# android - 尽管我选择了网络摄像头作为来源，但 Android 虚拟设备摄像头仍无法正常工作

> ID：16000728
> 
> 赞同：6
> 
> 时间：2013-04-14T15:25:12.840
> 
> 标签：android, android-camera, avd

我有 Acer Aspire V3-571G，其中集成了网络摄像头。它正在工作，我检查了它。

1.在 AVD 设置中，我选择了 Webcam0 作为源。

2.当启动模拟器时，它要求我选择源，我选择了 hdWebCam。

3.当在模拟器中启动相机时，我仍然会看到奇怪的模拟（？）屏幕。如何解决？

**以下图片按正确顺序排列。**

![在此处输入图像描述](https://i.stack.imgur.com/zGNkC.png)

![在此处输入图像描述](https://i.stack.imgur.com/YQuoI.png)

![在此处输入图像描述](https://i.stack.imgur.com/TjBvw.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T16:51:52.253

在我将处理器类型从 MIPS 更改为 Intel 之前，我得到的结果与您相同。我的网络摄像头打开了几秒钟，但随后相机应用程序在模拟器中崩溃了。我正在使用 Mac。您应该尝试更改处理器类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-24T17:15:25.983

尝试更改此选项的 VM heap in memory 选项的值。像这样：

> 虚拟机堆：32

# macos - 如何创建多个随机数据文件？

> ID：16000732
> 
> 赞同：2
> 
> 时间：2013-04-14T15:25:18.390
> 
> 标签：macos, file, random

我一直在使用`dd if=/dev/random of=<file_name> bs=XX count=XX`创建随机数据的单个文件。但我想知道如何一次创建多个文件。说 5、10 或 80,000。我需要做一些带宽测试并且需要独特的数据。上面的代码适用于 1 或 2 个文件。我的编程（Python）和终端技能仍然很低。

任何帮助都是极好的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T15:41:18.413

男人分裂。

[Split](http://unixhelp.ed.ac.uk/CGI/man-cgi?split)根据文件大小或行数将文件或标准输入拆分为多个文件。它不会“一次”或同时发生。

`dd if=/dev/random bs=1 count=10 | split -b 2`生成 5 个文件 xaa,xab..xae，每个文件由 2 个字节组成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-19T12:01:41.263

我会用`GNU Parallel`这个。命令行语法非常直观和简洁，它可以并行完成所有工作，即 FAST，并使用 Mac 中所有可爱的 CPU 内核。

因此，要并行创建 8 个文件，每个文件 100MB，您可以在终端中键入：

```
$ parallel dd if=/dev/random of=random-{} bs=1000000 count=100 ::: {0..7} 
```

您将在 60 秒后得到这 8 个文件：

```
$ ls -l random-*

-rw-r--r--@ 1 mark  staff  100000000 19 Dec 11:52 random-0
-rw-r--r--@ 1 mark  staff  100000000 19 Dec 11:52 random-1
-rw-r--r--@ 1 mark  staff  100000000 19 Dec 11:52 random-2
-rw-r--r--@ 1 mark  staff  100000000 19 Dec 11:52 random-3
-rw-r--r--@ 1 mark  staff  100000000 19 Dec 11:52 random-4
-rw-r--r--@ 1 mark  staff  100000000 19 Dec 11:52 random-5
-rw-r--r--@ 1 mark  staff  100000000 19 Dec 11:52 random-6
-rw-r--r--@ 1 mark  staff  100000000 19 Dec 11:52 random-7 
```

或者，如果您想要一个 1kB 的文件、两个 64kB 的文件、一个 32kB 的文件和一个 128kB 的文件，您可以这样做：

```
$ parallel dd if=/dev/random of=random-{%} bs=1024 count={1} ::: 1 64 64 32 128 
```

这会给你这个：

```
-rw-r--r--   1 mark  staff  131072 19 Dec 12:10 random-5
-rw-r--r--   1 mark  staff   32768 19 Dec 12:10 random-4
-rw-r--r--   1 mark  staff   65536 19 Dec 12:10 random-3
-rw-r--r--   1 mark  staff   65536 19 Dec 12:10 random-2
-rw-r--r--   1 mark  staff    1024 19 Dec 12:10 random-1 
```

在我看来，`parallel`在 OSX 上安装最简单的方法是`homebrew`从[homebrew website](http://brew.sh)获取，然后你要做的就是：

```
brew install parallel 
```

# javascript - jQuery删除 来自成功 fn 的标签

> ID：16000733
> 
> 赞同：0
> 
> 时间：2013-04-14T15:25:20.307
> 
> 标签：javascript, jquery

我在我的 ajax 成功 fn 中得到响应。我的数据变量给了我 `<p>hello</p>`.

如何从我的数据变量中删除`<p>`和？`</p>`

我用过`.remove()`，但它不工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:41:35.807

尝试这个：

```
var data = '<p>hello</p>'
var text = $(data).text();
console.log(text); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T15:28:03.303

`.remove()`从 DOM 中移除元素，而不是从字符串中移除。

如果要删除，`<p>`可以将结果作为隐藏添加到 DOM，然后删除，`<p>`然后才显示它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T15:32:03.283

你也可以试试[这个例子](http://jsbin.com/enijoq/1/edit)。无需删除 P 标签。

```
var content = $(ajaxResponseString); //content = $("<p>Data</p>");
var html = content.html(); 
```

这种方法的优点：-

*   它比使用正则表达式更简单。
*   如果您的回复为`<p id='paraId'> data </p>`. 它仍然会运行。
*   以这种情况为例`<p > data </p>`，这种方法将运行良好，而正则表达式可能/可能不取决于您的正则表达式的清洁程度。
*   如果您的响应明天发生变化，并且您还期望任何其他 HTML 标记，那么您需要更新您的正则表达式，这可能会非常复杂。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T16:43:32.607

## 试试这个：- [http://jsfiddle.net/adiioo7/b5bG8/](http://jsfiddle.net/adiioo7/b5bG8/)

JS：-

```
var html = "<p>Some HTML</p>";
var div = document.createElement("div");
div.innerHTML = html;
var text = div.textContent || div.innerText || "";
alert(text); 
```

# sharepoint-2010 - Sharepoint 2010 客户端对象模型 - 将列表数据分配给网格视图

> ID：16000742
> 
> 赞同：0
> 
> 时间：2013-04-14T15:26:11.570
> 
> 标签：sharepoint-2010

在 SharePoint 2010 中，我需要从列表中获取列表项并将其绑定到 DataView Web 部件或页面上的 SPGridView 控件。我需要使用客户端对象模型（jquery）来做到这一点。我熟悉使用客户端对象模型检索列表数据。不确定如何将数据绑定到 DataView Web 部件或 GridView。任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:08:01.020

您需要异步调用该方法吗？我想知道为什么你需要使用 jQuery/javascript。

无论如何，您可以做的是将 and 附加到网格视图中。例如，

//获取数据的代码

```
for(var i = 0; i < data.length; i++) {
   $("#NamesGridView").append("<tr><td>" + data.d[i].FirstName + "</td><td>" + data.d[i].Age + "</td></tr>");
   }
} 
```

//你的代码会

```
<asp:GridView ID="NamesGridView" runat="server" ShowHeaderWhenEmpty="True">
</asp:GridView> 
```

你可以看看这篇文章（[http://weblogs.asp.net/ahmedmoosa/archive/2010/10/30/bind-gridview-using-jquery.aspx](http://weblogs.asp.net/ahmedmoosa/archive/2010/10/30/bind-gridview-using-jquery.aspx)）

我希望这可以帮助你！

# java - 加载外部类

> ID：16000743
> 
> 赞同：0
> 
> 时间：2013-04-14T15:26:14.983
> 
> 标签：java, reflection

我正在尝试从我指定的目录加载一个类。我做了一些研究并做了这个：

```
ArrayList<Object> plugins = new ArrayList<Object>();
ClassLoader loader = Reflection.class.getClassLoader();

public Reflection()
{
    load();
}

public void load()
{

    File f = new File(Full directary);

    ClassLoader loader = null;
    try
    {
        loader = new URLClassLoader(new URL[]
        { f.toURI().toURL() }, getClass().getClassLoader());
    }
    catch (MalformedURLException e)
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    for (File classFile : f.listFiles(new FilenameFilter()
    {
        public boolean accept(File dir, String name)
        {
            return name.endsWith(".class");
        }
    }))
    // Start for loop.
    {
        try
        {
            String filename = classFile.getName();
            System.out.println(filename);
            Class<?> cls = loader.loadClass(filename.replace(".class", ""));
            System.out.println(cls.getSuperclass().getName());
        }
        catch (Exception ex)
        {
            ex.printStackTrace();
        }
    }
} 
```

我收到一个`NoClassDefFoundError`错误：

线程“主”java.lang.NoClassDefFoundError 中的异常：mTest123g（错误名称：net/xcaliber/reflection/Test）

它发现该类很好，但随后无法加载它。我做了一个基本的界面：

```
String getName(); 
```

这就是它的全部内容；这是我正在加载的类：

```
public Test()
{
    // TODO Auto-generated constructor stub
}

@Override
public String getName()
{
    return "Test";
} 
```

这确实实现了接口。让我知道它的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:38:21.283

显然你搞砸了类名和文件名。

```
Exception in thread "main" java.lang.NoClassDefFoundError: mTest123g (wrong name: net/xcaliber/reflection/Test) 
```

因此，您将其加载为 java mTest123g。类加载器期望 mTest123g.class 不是某个 net.xcaliber.reflection 包中的 Test 类。

# c# - 动态确定需要的类

> ID：16000745
> 
> 赞同：1
> 
> 时间：2013-04-14T15:26:38.983
> 
> 标签：c#, .net

我有几个可以通过通用 API 进行通信的外部设备。

```
string busIdentifier = "BUS:0:1";
var dev = new CommonDeviceDriver(busIdentifier); 
```

现在我可以查询设备：

```
string identifier = dev.QueryIdentifier(); 
```

现在我有几个具体的驱动程序，例如`ConcreteDeviceA`，`ConcreteDeviceB`和`ConcreteDeviceC`。每个设备驱动程序都应该有一个“标识符”。

现在我想为这个先前查询的标识符加载正确的设备驱动程序。

怎么进去`C#`？

来自 `python`我会做这样的事情：

```
# Have a dictionary where key is identifier and value is the class
supported_devices = {ConcreteDeviceA.identifer : ConcreteDeviceA,
                     ConcreteDeviceB.identifer : ConcreteDeviceB,
                     ConcreteDeviceC.identifer : ConcreteDeviceC}
busIdentifier = "BUS:0:1"
dev = CommonDeviceDriver(busIdentifier)
identifier = dev.QueryIdentifier()
concrete_device = supported_devices[identifier](dev) # Get class and call constructor 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T15:39:05.813

最简单的方法是[工厂方法](http://c2.com/cgi/wiki?FactoryMethodPattern)。如果您在编译时知道可用的类型，那么您可以简单地在代码中枚举它们。

```
public static DriverBase CreateDriver(string identifier, object device) {
    switch (identifier) {
    case IDENTIFIER_A: return new ConcreteDeviceA(device);
    // etc
    }
} 
```

如果您在编译时不知道所有类型（或者您真的反对上述用法），那么您可以使用反射。然后你基本上可以有一个字典映射标识符来输入（就像你在 Python 中一样），并使用`Activator.CreateInstance`或通过自己查找它的构造函数来实例化对象。在这种情况下，您必须将返回对象强制转换为基本类型。

# ruby-on-rails - Rails / RSpec 为什么我不能在 Rails 模型关联中使用缩短的“its(:attribute)”？

> ID：16000746
> 
> 赞同：3
> 
> 时间：2013-04-14T15:26:46.337
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, unit-testing, rspec

在 rspec-rails 中，我有一个名为“Customer”的 activerecord 模型。客户有_许多“互动”。我最近花了很多时间调试一些东西。我让它工作了，但我想出的答案对我来说真的没有意义。

以下代码（利用 RSpec 的“主题属性”）不起作用：

```
its(:interactions) { should_receive(:create) } 
```

但这有效：

```
it "should call the 'create' method on interactions" do
  subject.interactions.should_receive(:create)
end 
```

谁能解释为什么会这样？也许我误解了缩短方法语法的工作原理。我查看了文档，但没有提出任何充分的理由。

这是完整的代码：

```
describe Customer do

    ...other code ...

    describe "#migrate_interactions" do
      context "when a customer successfully migrates interactions from a lead" do

        subject { FactoryGirl.create(:customer) }
        let(:lead) { mock_model(Lead) }

        before :each do

          @lead_interaction = { :user_id            => 1, 
                                :interaction_type   => 'phone', 
                                :notes              => 'test',
                                :created_at         => Time.now
                              }

          lead.should_receive(:interactions).and_return([stub(@lead_interaction)])
        end

        its(:interactions) { should_receive(:create) }
        its(:interactions) { should_receive(:create).with(hash_including(@lead_interaction)) }

        after { subject.migrate_interactions lead }

      end
    end
end 
```

Customer.rb 中的模型方法：

```
def migrate_interactions lead
  raise ArgumentError unless lead.respond_to? :interactions

  lead.interactions.each do |interaction|
    self.interactions.create({ :user_id          => interaction.user_id,
                               :interaction_type => interaction.interaction_type,
                               :notes            => interaction.notes,
                               :created_at       => interaction.created_at })
  end
end 
```

谢谢！

- - - - - 编辑 - - - - -

我忘记包含使用 its(:interactions) { ... } 语法时出现的错误。这是错误：

```
1) Customer#migrate_interactions when a customer migrates interactions from a lead interactions 
 Failure/Error: its(:interactions) { should_receive(:create) }
   (#<RSpec::Core::ExampleGroup::Nested_2::Nested_6::Nested_3::Nested_1:0x0000000af10e78>).create(any args)
       expected: 1 times
       received: 0 times
 # ./spec/models/customer_spec.rb:100:in `block (4 levels) in <top (required)>' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T13:06:12.467

你试图做的事情是行不通的，因为 RSpec 的单行语法（例如`it { should do_something }`）支持`should`但不支持`should_receive`. 这是我从未想过要添加的东西，因为它与我对消息期望的方法不一致，而且我认为它从未出现在功能请求中。

开发中有一个新的语法替代方案`expect(object).to receive(message)`，它*可能会*打开通往 的大门`it { should receive(message) }`，但我不确定（我不再运行该项目，也没有详细查看该代码）。如果您有兴趣，请查看（并加入对话）[https://github.com/rspec/rspec-mocks/issues/153](https://github.com/rspec/rspec-mocks/issues/153)。

HTH，大卫

# php - MySQL/PHP 数组到 Javascript

> ID：16000747
> 
> 赞同：1
> 
> 时间：2013-04-14T15:26:54.153
> 
> 标签：php, mysql, arrays, json

所以我想将我所有的 MySQL 结果存储在一个可以用 javascript/jQuery 操作的数组中。

这是我当前的代码：

```
<?php
    $sql = "SELECT * FROM potentials";
    $result = mysql_query($sql) or die(mysql_error());
    $potential = mysql_fetch_array($result);
    echo json_encode($potential);
?> 
```

还有我的 Javascript：

```
<script type="text/javascript">
    $(document).ready(function(){
        var myArray = "<?php print(json_encode($potential)); ?>";
        console.log(myArray)
    )};
</script> 
```

我不断收到“意外的号码”或“意外的标识符”。这是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T15:32:10.757

`json_encode()`使用 JSON 表示法返回一个对象。奇怪的是，你用引号包围了它。尝试删除它们：

```
<script type="text/javascript">
$(document).ready(function(){
    var myArray = <?php print(json_encode($potential)); ?>;
    console.log(myArray);
});
</script> 
```

（它不是一个数组，它是一个对象，所以你可能想重命名你的变量；））

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T15:29:23.427

你使用`json_encode()`了两次，但是如果你想使用它，你需要解析它。在 jQuery 中，这可以通过`jQuery.parseJSON`这样的方式完成

```
var myArray = jQuery.parseJSON('<?php print json_encode($potential); ?>'); 
```

此外，如果您想要所有结果，则需要循环查询（例如 with `while`），然后将其保存到数组中

```
$array = array();
while ($row = mysql_fetch_array( mysql_query( $query ) )
{
    $array[] = $row;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T15:31:25.200

```
<script>
    var data = '<?php echo $data; ?>';
    var json = JSON.parse(data);
    console.log(json[0]); //etc
</script> 
```

请注意， var data = ... 是单引号，因此您将 php 的回声作为字符串捕获

# java - Android音频记录和处理

> ID：16000751
> 
> 赞同：1
> 
> 时间：2013-04-14T15:27:23.717
> 
> 标签：java, android, audio, signal-processing

我想在android上编写一个关于音频信号处理的应用程序。首先，我应该使用移动应用程序录制声音。然后我想获取原始数据（我认为是一个数组列表）并对其进行 FFT。对于频域的数据，我想做一些处理，主要是一种叫做“光谱减法”的降噪方法，然后做IFFT。最后将数据写入 .wav 文件。我是 Android 新手，不知道哪个 API 适合我的愿望，也不知道在哪里可以找到 FFT 代码。所以我正在寻求帮助，非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:32:58.520

AudioRecord 类是一个很好的起点：http: [//developer.android.com/reference/android/media/AudioRecord.html](http://developer.android.com/reference/android/media/AudioRecord.html)

# jquery - 重新缩放浏览器上的“调整大小”按钮

> ID：16000757
> 
> 赞同：0
> 
> 时间：2013-04-14T15:27:37.233
> 
> 标签：jquery, html, resize

我正在尝试重新调整 div / span 的高度和宽度，这个 div / span 代表一个按钮。现在我使用固定的高度和宽度，我想要调整大小的元素是一个按钮，所以它应该按比例调整大小。

## HTML 按钮

```
<li class="large-4 large-offset-1 columns bigButton bigButtonColor">
<span class="large6">
<a class="showBanner" href="http://delchambre-decoratie.be/ADHD/animatoren-informatie?active=kamp">
<span class="animatoren iconBigbuttons kamp"></span>
</a>
</span>
</li> 
```

## CSS

```
.bigButtonColor{
        height: 150px;
}

.animatoren{
    max-width: 300px;
    width: 100%;
} 
```

宽度由基础自动决定。我知道我需要 jquery 来完成此操作，但找不到正确的文档。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:56:43.680

我想你正在寻找这样的东西。你是？

```
$("#div1").width($(window).width());

$(window).resize(function(){
    $("#div1").width($(window).width());
}); 
```

# c++ - 长函数调用的可读性

> ID：16000759
> 
> 赞同：2
> 
> 时间：2013-04-14T15:27:51.600
> 
> 标签：c++, readability

我一直在编写使用非常长且通常超过 80 个字符的函数调用的代码。通常我会像这样拆分这些函数调用：

```
LongFunctionName(first_argument,
                 another_argument,
                 finally_last_argument); 
```

但是，当我尝试将其放入 if 语句时，它看起来很奇怪，主要是因为不太清楚它与什么值进行比较：

```
if(LongFunctionName(first_argument,
                    another_argument,
                    finally_last_argument) != value_compared_to)
{
    // stuff to be called
} 
```

您将如何格式化此语句以使其更具可读性并适合 80 个字符？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-14T15:29:56.340

我会考虑将函数调用放在自己的行上：

```
const auto value = LongFunctionName(first_argument,
                              another_argument,
                              finally_last_argument);
if (value != value_compared_to) {
  // ...
} 
```

您甚至可以给`value`变量起一个很好的描述性名称，以帮助理解代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T15:31:59.693

将返回值存储在变量中是 imo 的最佳解决方案。但你可以做其他事情：

```
if (value_compared_to != LongFunctionName(first_argument,
                                          another_argument,
                                          finally_last_argument)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T15:30:39.833

你有两个选择：

1)

接受它看起来是这样的

或者

2)

在单独的语句中评估函数调用的返回值（伪代码）

```
retval = LongFunctioName(first_argument, second_argument, third_argument);
if(retval != desired_val) { ... } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T15:31:01.420

不要让我们开始那个，我会做的

```
if
(       LongFunctionName
        (       first_argument
        ,       another_argument
        ,       finally_last_argument
        ) != value_compared_to
)
{
        // stuff to be called
} 
```

# paypal - 无法在贝宝开发者网站上导入测试帐户

> ID：16000772
> 
> 赞同：0
> 
> 时间：2013-04-14T15:29:02.827
> 
> 标签：paypal, paypal-sandbox

我面临导入旧测试帐户的问题，当我尝试使用旧的贝宝开发者帐户导入数据时，它给了我无效电子邮件 ID 的错误。我确信电子邮件 ID 和密码是正确的，并且使用的是旧的开发人员帐户。请注意，我也无法使用创建帐户选项创建新的沙盒测试帐户。我是非美国开发人员。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:06:51.643

在导航到 developer.paypal.com 页面并登录之前，请尝试清除 cookie 和缓存。如果您当前使用的是 Internet Explorer，请尝试使用 Firefox 或 Chrome，因为这两种浏览器的问题较少。清除 cookie 和缓存后，请尝试登录并创建新帐户或导入旧帐户。

# linux - 通过命令提示符读取参数（以“-”开头）

> ID：16000773
> 
> 赞同：0
> 
> 时间：2013-04-14T15:29:04.083
> 
> 标签：linux, shell, unix

我在 shell 脚本中从命令提示符读取输入时遇到问题。我的脚本名称是 status.ksh，我必须从命令提示符获取参数。此脚本接受 2 个参数。第一个是“-e”，第二个是“server_name”。

当我像这样运行脚本时，

status.ksh -e server_name

```
echo $@ 
```

仅给出输出“server_name”，预期输出应为“-e server_name”

并将`echo $1` 输出设为 NULL，其中预期的输出应为“-e”。

请指导我，如何阅读获取第一个参数，即 "-e" 。

感谢和问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:21:03.310

问题是由`-e`. 这是 的标志`echo`。

```
 -e     enable interpretation of backslash escapes 
```

大多数 unix 命令允许`--`用于分隔标志和其余参数，但`echo`不支持这一点，因此您需要另一个命令：

```
printf "%s\n" "$1" 
```

如果您需要复杂的命令行参数解析，请务必`getopts`按照 Joe 的建议进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T15:40:17.693

你读过这个参考吗？[http://www.lehman.cuny.edu/cgi-bin/man-cgi?getopts+1](http://www.lehman.cuny.edu/cgi-bin/man-cgi?getopts+1)

您不应该使用 $1、$2、$@ 等来解析选项。有内置程序可以为您处理这个问题。

```
 Example 2 Processing Arguments for a Command with Options

 The following fragment of  a  shell  program  processes  the
 arguments  for a command that can take the options -a or -b.
 It also processes the option -o, which requires  an  option-
 argument:

   while getopts abo: c
   do
         case $c in
        a | b)   FLAG=$c;;
        o)       OARG=$OPTARG;;
        \?)      echo $USAGE
           exit 2;;
        esac
   done
   shift `expr $OPTIND - 1` 
```

更多示例：

[http://linux-training.be/files/books/html/fun/ch21s05.html](http://linux-training.be/files/books/html/fun/ch21s05.html)

[http://publib.boulder.ibm.com/infocenter/pseries/v5r3/index.jsp?topic=/com.ibm.aix.cmds/doc/aixcmds2/getopts.htm](http://publib.boulder.ibm.com/infocenter/pseries/v5r3/index.jsp?topic=/com.ibm.aix.cmds/doc/aixcmds2/getopts.htm)

[http://www.livefirelabs.com/unix_tip_trick_shell_script/may_2003/05262003.htm](http://www.livefirelabs.com/unix_tip_trick_shell_script/may_2003/05262003.htm)

# javascript - 即时更改背景图像

> ID：16000777
> 
> 赞同：1
> 
> 时间：2013-04-14T15:29:15.720
> 
> 标签：javascript

然而，有人问了这个问题，并不是特别想达到我想要完成的效果......

我刚刚完成了 Javascript 课程，并为我的网站编写了一个小脚本。它使用 Gantry 框架，并且在移动设备上运行得非常好。

如果您使用手机，并且将手机水平放置，它会调整该页面的大小，如果您将手机转为垂直，它会再次调整页面的大小。

所以我写了这个

```
var cWIDTH = window.innerWidth;
if (cWIDTH < 640 ){
    document.getElementById("swapme").style.backgroundImage = "url('/images/backgrounds/top-image2.jpg')";
} 
```

但是，它不会即时更改，例如..如果我转动手机，除非我刷新页面，否则它不会改变背景。我一直在我网站上的文件中查找似乎对这种更改做出反应的 Ajax/jQuery/JSON 代码，因此我可以插入一个函数触发器。

但是，一旦页面加载，在您刷新页面之前是否已经设置了变量？

如何即时获取变量，并即时更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T15:44:22.717

如前所述，您最好使用 CSS 媒体查询。
尝试这样的事情：

```
@media screen and (min-width: 641px) {
  #swapme {
    background-image: url('/images/backgrounds/top-image1.jpg');
  }
}

@media screen and (max-width: 640px) {
  #swapme {
    background-image: url('/images/backgrounds/top-image2.jpg');
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T15:38:43.003

您需要将您编写的代码挂钩到 window.onresize 事件，并包含一个 else 子句，用于何时切换回窗口大小。

话虽如此，在没有 JS 的情况下使用媒体查询更容易实现结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T15:43:58.767

下面是我使用 phonegap 更改布局的一些示例代码。它利用了 css 3 的媒体查询。

```
 /* Ipad landscape mode */
    @media screen and (min-width: 760px) and (max-width: 1024px) and (orientation: landscape) {
        article {
            float:left;
            padding-left: 55px;
        }
    }

/* Ipad portrait mode */
@media screen and (min-width: 760px) and (max-width: 1024px) and (orientation: portrait) {
    article {
        float: left;
        width: 340px;
        padding-left: 15px; 
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T15:39:27.243

有一个事件可以检测设备方向何时发生变化。

```
window.onorientationchange = function(e) {
    switch(e.orientation) {
        case 0:
            //...
            break;
        case -90:
            //...
            break;
        case 90:
            //...
            break;
        default:
            break; 
    }
} 
```

# filtering - 查询中的 Cypher WITH 聚合

> ID：16000780
> 
> 赞同：1
> 
> 时间：2013-04-14T15:29:25.053
> 
> 标签：filtering, neo4j, aggregation, cypher

我有一个与过滤机制实现相关的 Cypher Query 问题。

假设我们正在对**PROFILE**节点执行过滤器。为简单起见，过滤器有两种类型**F1**，**F2**。
每个过滤器都需要在查询中使用单独的**MATCH**子句。

我需要检索**PROFILES** where ( **F1** or **F2** ) = true 按日期排序。
所以一开始我想到了以下类似的东西：

```
START(node) match (Applying F1 filter)->profile WITH profile,node
            match (Applying F2 filter)->profile2 
```

但是现在我需要使用 order by .. 应用 return 子句

有没有办法从以前的比赛中汇总配置文件而不覆盖它们？就像是..

```
START(node) match (Applying F1 filter)->profile WITH profile,node
            match (Applying F2 filter)->profile return profile order by profile.date 
```

帮助将不胜感激
谢谢

# c# - Rhino Mock，接口的Mock列表

> ID：16000782
> 
> 赞同：0
> 
> 时间：2013-04-14T15:29:45.700
> 
> 标签：c#, unit-testing, mocking

我如何在 for 循环中模拟对象列表

这是代码：`

```
 public class SearchResult<T>
    {

        private readonly ISearcher<T> _searcher;
        private readonly IList<ISearchConfigurator> _configurators; 

        public SearchResult(ISearcher<T> searcher, IList<ISearchConfigurator> configurators)
        {
            _searcher = searcher;
            _configurators = configurators;
        }

        public DomainSearchResult<T> FindInAllDomains()
        {
            DomainSearchResult domainSearchResults = new DomainSearchResult<T>();
            foreach (var configurator in _configurators)
            {
                IList<T> results = _searcher.SearchAll(configurator);
                domainSearchResults.Results.Add(_configurator.DomainName, results);
            }
            return domainSearchResults;
        }
    }` 
```

属性结果在 DomainSearchResult 类中声明：

```
IDictionary<string,IList<T>> Results { get; set; } 
```

然后我尝试了以下方法：

```
 [Test]
    public void FindInAllDomains_ReturnsAllRecord()
    {
        //Arrange
        var configuratorMock = MockRepository.GenerateStub<IList<ISearchConfigurator>>();
        var searchMock = MockRepository.GenerateMock<ISearcher<NativeDs>>();
        var searchRestul = new SearchResult<NativeDs>(searchMock, configuratorMock);

        //Act
        searchRestul.FindInAllDomains(); // calling test fail here

        //Assert
        searchMock.AssertWasCalled(x => x.SearchAll(null), opt => opt.IgnoreArguments());
    } 
```

错误是：System.NullReferenceException：对象引用未设置为对象的实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T18:30:58.593

尝试这个...

```
var list = new List<ISearchConfigurator>
          (from x in Enumerable.Range(1, 100)
           select MockRepository.GenerateMock<ISearchConfigurator>()
          ); 
```

# ruby-on-rails-3 - Rails twitter gem 导致错误缺少必需的参数：状态

> ID：16000786
> 
> 赞同：1
> 
> 时间：2013-04-14T15:29:58.487
> 
> 标签：ruby-on-rails-3, twitter, gem, twitter-gem

我正在使用带有 rails 的[twitter gem](https://github.com/sferik/twitter)来检索用户时间线并发布更新：

```
 def index
    @tweets = Twitter.home_timeline
  end

  def tweet
    text = params[:text]
    Twitter.update(text) unless text = nil
  end 
```

通过 jquery/ajax 发送请求的视图：

```
<input type="text" class="tweet-box" placeholder="tweet something" />
<input type="submit" class="tweet-button" value="tweet" />

<script type="text/javascript">
    $(".tweet-button").on('click',function(e){
        e.preventDefault();
        $.post('/twitters/tweet', { text: $(".tweet-box").val() });
    });
</script> 
```

最后是路线：

```
get "twitters/index"
post "twitters/tweet" 
```

获取时间线工作正常，但是在尝试发送更新时，我收到此错误：

> 缺少必需参数：状态

问题是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:50:27.540

“除非文本 = 零”

这是*将*文本设置为零，因此没有文本被传递到 update()

一个好习惯是始终将文字放在左侧：

无 == 文本

这样，如果您 for get == 和 do = 它将失败，因为您无法分配给文字。

尝试“除非 text == nil”或“除非 text.nil？”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T03:23:34.350

在我的情况下，有相同的错误消息，结果证明我的文本变量等价物是一个空字符串。你检查零？尝试检查是否为空？

# python - Python tarfile 和排除

> ID：16000794
> 
> 赞同：7
> 
> 时间：2013-04-14T15:30:28.430
> 
> 标签：python, tarfile

这是 Python 文档的摘录：

> 如果给出了 exclude，它必须是一个接受一个文件名参数并返回一个布尔值的函数。根据这个值，相应的文件要么被排除（真），要么被添加（假）。

我必须承认我不知道这意味着什么。

此外：

> 2.7 版后已弃用： exclude 参数已弃用，请改用 filter 参数。为了获得最大的可移植性，filter 应该用作关键字参数而不是位置参数，以便最终删除 exclude 时代码不会受到影响。

好的......以及“过滤器”的定义：

> 如果指定了过滤器，它必须是一个接受 TarInfo 对象参数并返回更改后的 TarInfo 对象的函数。如果它返回 None，则 TarInfo 对象将从存档中排除。

... 回到原点 ：）

我真正需要的是一种将排除的数组（或“：”分隔的字符串）传递给 tarfile.add 的方法。

如果您尝试解释 PyDocs 中的那些段落，我不介意。

PS：

这只是我的想法：

*   制作源目录内容列表的数组
*   弹出排除
*   对剩下的单个数组成员执行 tar.add

但是，我希望以更有文化的方式完成

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-14T15:46:34.473

> 如果给出了 exclude，它必须是一个接受一个文件名参数并返回一个布尔值的函数。根据这个值，相应的文件要么被排除（真），要么被添加（假）。

例如，如果您想排除所有以字母“a”开头的文件名，您可以执行类似...

```
def exclude_function(filename):
    if filename.startswith('a'):
        return True
    else:
        return False

mytarfile.add(..., exclude=exclude_function) 
```

对于您的情况，您需要类似...

```
EXCLUDE_FILES = ['README', 'INSTALL', '.cvsignore']

def exclude_function(filename):
    if filename in EXCLUDE_FILES:
        return True
    else:
        return False

mytarfile.add(..., exclude=exclude_function) 
```

...可以简化为...

```
EXCLUDE_FILES = ['README', 'INSTALL', '.cvsignore']

mytarfile.add(..., exclude=lambda x: x in EXCLUDE_FILES) 
```

**更新**

TBH，我不会太担心弃用警告，但如果你想使用新`filter`参数，你需要类似...

```
EXCLUDE_FILES = ['README', 'INSTALL', '.cvsignore']

def filter_function(tarinfo):
    if tarinfo.name in EXCLUDE_FILES:
        return None
    else:
        return tarinfo

mytarfile.add(..., filter=filter_function) 
```

...可以简化为...

```
EXCLUDE_FILES = ['README', 'INSTALL', '.cvsignore']

mytarfile.add(..., filter=lambda x: None if x.name in EXCLUDE_FILES else x) 
```

# ios - 无法让 CALayer 更新其 drawLayer：在边界动画期间

> ID：16000798
> 
> 赞同：5
> 
> 时间：2013-04-14T15:30:55.487
> 
> 标签：ios, objective-c, animation, core-animation, core-graphics

我正在尝试为自定义 UIView 的边界设置动画，同时保持其图层与其父视图的大小相同。为此，我试图在其父视图旁边为图层边界设置动画。我需要图层调用 drawLayer:withContext 作为其动画，因此我的自定义绘图将与边界一起正确更改大小。

在我开始动画之前，drawLayer 被正确调用并正确绘制。但是我无法让图层在边界动画的每个步骤上调用其 drawLayer 方法。相反，它只调用一次，立即跳转到动画最后一帧的“结束边界”。

```
// self.bg is a property pointing to my custom UIView
self.bg.layer.needsDisplayOnBoundsChange = YES;
self.bg.layer.mask.needsDisplayOnBoundsChange = YES;

[UIView animateWithDuration:2 delay:0 options:UIViewAnimationOptionCurveEaseOut|UIViewAnimationOptionAutoreverse|UIViewAnimationOptionRepeat animations:^{

    [CATransaction begin];
    self.bg.layer.bounds = bounds;
    self.bg.layer.mask.bounds = bounds;
    [CATransaction commit];

    self.bg.bounds = bounds;
} completion:nil]; 
```

为什么边界不报告其动画的变化（不仅仅是最后一帧）？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T18:36:52.167

这可能会或可能不会有帮助......

许多人不知道 Core Animation 有一个超酷的功能，它允许您以可以动画的方式定义自己的图层属性。我使用的一个例子是给一个 CALayer 子类一个`thickness`属性。当我用 Core Animation 为它制作动画时......

```
CABasicAnimation* ba = [CABasicAnimation animationWithKeyPath:@"thickness"];
ba.toValue = @10.0f;
ba.autoreverses = YES;
[lay addAnimation:ba forKey:nil]; 
```

...效果是`drawInContext:`或者`drawLayer:...`在整个动画中被重复调用，允许我根据每个时刻的*当前属性值（动画过程中的中间值）重复更改图层的绘制方式。* `thickness`

在我看来，这*可能*是你所追求的那种东西。如果是这样，您可以在此处找到一个可下载的工作示例：

[https://github.com/mattneub/Programming-iOS-Book-Examples/tree/master/ch17p498customAnimatableProperty](https://github.com/mattneub/Programming-iOS-Book-Examples/tree/master/ch17p498customAnimatableProperty)

讨论（来自我的书）在这里：

[http://www.aeth.com/iOSBook/ch17.html#_making_a_property_animatable](http://www.apeth.com/iOSBook/ch17.html#_making_a_property_animatable)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T18:25:25.473

首先，层支持（或托管）视图的层总是调整大小以适应其父视图的边界。如果您将视图设置为图层委托，则视图将在每一帧接收到 drawLayer:inContext:。当然，您必须确保如果您的图层具有`needsDisplayOnBoundsChange == YES`.

这是一个调整窗口大小的示例（在 Mac 上），然后会更改底层的路径。

```
// My Nib contains one view and one button. 
// The view has a MPView class and the button action is resizeWindow:

@interface MPView() {
    CAShapeLayer     *_hostLayer;
    CALayer          *_outerLayer;
    CAShapeLayer     *_innerLayer;
}
@end

@implementation MPView

- (void)awakeFromNib
{
    [CATransaction begin];
    [CATransaction setDisableActions:YES];

    _hostLayer = [CAShapeLayer layer];
    _hostLayer.backgroundColor = [NSColor blackColor].CGColor;
    _hostLayer.borderColor = [NSColor redColor].CGColor;
    _hostLayer.borderWidth = 2;
    _hostLayer.needsDisplayOnBoundsChange = YES;
    _hostLayer.delegate = self;
    _hostLayer.lineWidth = 4;
    _hostLayer.strokeColor = [NSColor greenColor].CGColor;
    _hostLayer.needsDisplayOnBoundsChange = YES;

    self.layer = _hostLayer;
    self.wantsLayer = YES;

    [CATransaction commit];

    [self.window setFrame:CGRectMake(100, 100, 200, 200) display:YES animate:NO];
}

- (void) drawLayer:(CALayer *)layer inContext:(CGContextRef)ctx
{
    if (layer == _hostLayer) {

        CGSize size = layer.bounds.size;
        CGMutablePathRef path = CGPathCreateMutable();

        CGPathMoveToPoint(path, NULL, 0, 0);
        CGPathAddLineToPoint(path, NULL, size.width, size.height);

        _hostLayer.path = path;

        CGPathRelease(path);
    }
}

- (IBAction)resizeWindow:(id)sender
{
    [self.window setFrame:CGRectMake(100, 100, 1200, 800) display:YES animate:YES];
}

@end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T17:06:02.317

这是因为您正在绘制的图层与屏幕上显示的图层不同。

当您为图层属性设置动画时，它将立即在模型层中设置为其最终值（如您所见），并且实际动画在表示层中完成。

您可以访问表示层并查看动画属性的实际值：

```
CALayer *presentationLayer = (CALayer *)[self.bg.layer presentationLayer];
... 
```

由于您没有提供您的`drawLayer:withContext`方法，因此不清楚您想在动画期间绘制什么，但如果您想为自定义属性设置动画，[这里有一个很好的教程](http://www.nomadplanet.fr/2010/11/animate-calayer-custom-properties-with-coreanimation/)。

# json - 安全异常未处理

> ID：16000801
> 
> 赞同：0
> 
> 时间：2013-04-14T15:31:09.680
> 
> 标签：json, windows-phone-7, windows-phone-8, json.net, foursquare

我只是尝试使用foursquare场地API解析json并在我的windowphone应用程序的列表框中显示某些位置，但是当我运行这行代码时，我不断收到错误securityexception is unhandled。

var providerResult = (Venues.RootObject)dataContractJsonSerializer.ReadObject(stream);

在

```
 private void client_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e) {
        if (e.Error == null) {

            using (MemoryStream stream = new MemoryStream(Encoding.UTF8.GetBytes(e.Result))) {
                DataContractJsonSerializer dataContractJsonSerializer = new DataContractJsonSerializer(typeof(Venues.RootObject));
                var providerResult = (Venues.RootObject)dataContractJsonSerializer.ReadObject(stream);

                if (providerResult == null) {
                    MessageBox.Show("No location were found");
                }
                else {
                    locations.ItemsSource = providerResult.response.venues;
                }
            }
        }
        else {
            MessageBox.Show(e.Error.Message);
        }
    } 
```

# jquery - 加载动画直到 ajax 调用完成后才会显示

> ID：16000803
> 
> 赞同：6
> 
> 时间：2013-04-14T15:31:20.257
> 
> 标签：jquery, ajax

可能重复：[同样的问题（未解决）](https://stackoverflow.com/questions/3535373/loading-animation-doesnt-show-up-until-after-ajax-call-completes-in-safari-chro)

我在 Ajax 调用之前和 Ajax 调用之后显示加载 DOM，我将其隐藏。由于某种原因，加载图像仅在 ajax 调用完成后出现。结果是加载图像甚至不会出现，除非我把`delay(#).hide(0)`代码如下：

```
$("#loading-popup").show();
$.ajax({
// ajax here
});
$("#loading-popup").hide(0); 
```

我已经在我的网站上测试了其他 Ajax 调用，并且出现了同样的问题。有没有人解决这个问题？我正在使用 Chrome 26。

编辑：我忘了指定我正在使用**同步**ajax 调用。( `async: false`)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-14T16:48:40.957

这取决于ajax调用是同步的还是异步的。

对于**异步**ajax 调用，以下工作：

```
$("#loading-popup").show();
$.ajax({
type: 'POST',
// other parameters
success: function(yourdata)
{
    $("#loading-popup").hide();
} 
```

对于**同步**ajax 调用，它**不会**。Ajax 首先执行，所有其他进程都被阻塞/排队。

一种解决方法是像这样使用 setTimeOut：

```
setTimeout(function () {
$("#loading-popup").show();
$.ajax({
type: 'POST',
async: false,
// other parameters
//
// other codes
});
$("#loading-popup").hide();
}, 10); 
```

但是因为它是同步的，所以加载的 GIF 不会动画，只会变成静态图像（至少对于 Chrome 来说是这样）

我想只有两个解决方案：
1）使用异步ajax调用
2）使用静态加载图像

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-01T03:50:18.617

这可能是另一种方式。

```
var $ani = $('#loading-popup').hide();
$(document)
  .ajaxStart(function () {
    $ani.show();
  })
  .ajaxStop(function () {
    $ani.hide();
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-28T11:17:20.063

我知道我在这方面有点晚了，但如果你想要一个加载动画并使用同步 ajax 调用并让它在 chrome 中动画，为了将来参考，你可以使用这个第三方 ajax 脚本：[http:// fgnass.github.io/spin.js/#](http://fgnass.github.io/spin.js/#)！

> Spin.js 动态创建旋转活动指示器，可用作 AJAX 加载 GIF 的与分辨率无关的替代品。

我广泛使用它，它非常适合我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-20T03:41:45.340

我不确定这个问题是否已经解决，但试试这个：

```
$("#loading-popup").show();
$.ajax({
// ajax here
success: function(data) {
  $("#loading-popup").hide();
}
}); 
```

让我知道这个是否奏效..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-14T15:32:46.320

[ajax()](http://api.jquery.com/jQuery.ajax/)是函数，它下面`async`的语句可能会在[ajax](http://api.jquery.com/jQuery.ajax/)调用完成之前执行。你必须隐藏`success`或`done`发挥作用。

```
$("#loading-popup").show();
$.ajax({
// ajax here
}).success(data){
   $("#loading-popup").hide(0);
}) 
```

# python-3.x - Python3.2 - ImportError：没有名为 setuptools 的模块

> ID：16000807
> 
> 赞同：0
> 
> 时间：2013-04-14T15:31:32.317
> 
> 标签：python-3.x, setuptools

当我运行“sudo python3.2 setup.py install”时，我反复收到以下错误

```
Traceback (most recent call last):                                                         
File "setup.py", line 3, in module                                                     
from setuptools import setup                                                                
ImportError: No module named setuptools 
```

我已经使用 apt-get 安装了 setuptools，将其删除，然后通过执行以下操作手动安装：

```
wget http://pypi.python.org/packages/source/s/setuptools/setuptools-0.x.tar.gz           
tar zxvf setuptools-0.x.tar.gz                                                           
cd setuptools-0.x                                                                        
python setup.py build                                                                       
python setup.py install 
```

我无法弄清楚为什么在重复安装后仍然出现错误？

# java - 刷新我的 Android 应用程序

> ID：16000808
> 
> 赞同：0
> 
> 时间：2013-04-14T15:31:32.500
> 
> 标签：java, android, multithreading, refresh

嗨，我想刷新我的 android 应用程序。每次我遇到异常时都很奇怪，我的应用程序一直在爆炸……有这么难吗？这是我的代码：

```
public void refreshIt(long interv)
{
    thr = new Thread();
    try
    {
        thr.start();
        while(refreshing)
        {

            writeToMe("refresh....");//my method writing msgs to textview, don't mind it
            thr.sleep(1000);
        }

    }
    catch(Exception e){writeToMe(e.getMessage());}
} 
```

# winapi - 跟踪 LoadLibrary 或 LdrLoadDll

> ID：16000809
> 
> 赞同：1
> 
> 时间：2013-04-14T15:31:52.257
> 
> 标签：winapi, dll

我需要在加载 DLL 时获取目录搜索路径。因此，我需要跟踪`LoadLibrary`or`LdrLoadDll`函数调用以获取其参数所遵循的路径。是否有任何工具可以跟踪它或任何工具来获取加载 DLL 时遵循的目录搜索顺序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-16T11:06:05.083

使用[APIMonitor](http://www.rohitab.com/apimonitor)并跟踪`LdrLoadDll`函数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-10T14:25:12.573

文章“ [Debugging LoadLibrary Failures”](http://blogs.msdn.com/b/junfeng/archive/2006/11/20/debugging-loadlibrary-failures.aspx)描述了官方解决方案，并且开箱即用。

# actionscript-3 - AS3 无法识别 MovieClip - 1046：类型未找到或不是编译时常量：MP_00

> ID：16000811
> 
> 赞同：0
> 
> 时间：2013-04-14T15:31:58.957
> 
> 标签：actionscript-3, flash-cs6

所以我是 AS3 的新手，试图为智能手机制作一个简单的视频游戏。在我遇到这个问题之前，一切都很顺利。我在时间轴上使用和操作对象没有问题，而且突然间无论我尝试什么，我都得到了 1046。

这是一些出现错误的代码：

```
mp = new MP_00(); 
```

在顶部我有这个：

```
import flash.display.MovieClip;
var mp:Movieclip; 
```

最后是：

```
function mapMove(){
mp.y = mp.y - playerSpeed;
} 
```

我一直在寻找解决方案，但似乎没有人遇到同样的问题。我确实将 AS 链接设置为 MP_00 并且我尝试放入的任何对象，它都不起作用。虽然以前以相同的方式放置物体，但它们可以工作。

例如我有这个

```
var player:MovieClip;

player = new Player(); 
```

将 AS Linkage 设置为 Player，并且可以正常工作。

这一切都在 Flash Professional cs6 中完成

编辑 1 完整代码 请记住，很多东西是占位符或只是未完成的代码。

在此代码上，我为同一个对象两次收到错误

```
Scene 1 1046: Type was not found or was not a compile-time constant:
MP_00\. 
Scene 1, Layer 'Actions', Frame 1, Line 165 1046: Type was not
found or was not a compile-time constant: MP_00. 
```

这就是错误。

```
import flash.display.MovieClip;
import flash.events.MouseEvent;
import flash.text.engine.SpaceJustifier;
import flashx.textLayout.operations.MoveChildrenOperation;

/*----------------------------Main VARs-----------------------------*/
var STATE_START:String="STATE_START";
var STATE_START_PLAYER:String="STATE_START_PLAYER";
var STATE_PLAY:String="STATE_PLAY";
var STATE_END:String="STATE_END";
var gameState:String;

var player:MovieClip;
var playerSpeed:Number;
var map:Array;
var bullets:Array;
//holds civil vehicles
var civil:Array; 
//holds enemy vehicles
var enemy:Array; 
var explosions:Array;

var BBullet:MovieClip;

//maps
var mp:MovieClip;
/*
var MP_01:MovieClip;
var MP_02:MovieClip;
var MP_03:MovieClip; 
*/

//sets the bullet type and properties
var BType = "BBasic";
var BProp:Array;

//bullet preperties by type

var BBasic:Array = new Array(1, 1, 100, 50, 0, new BBasicA());

/**
ARRAY SETTING
0 = bullet position (middle , back, sides etc...)
    1-middle front
    2-left side front
    3-right side front
    4-left and right side middle
    5-back
    7-left and right side wheels

1 = bullet direction
    1-forward
    2-back
    3-sides

2 = fire speed (in millisecounds so 1000 = 1sec)

3 = speed of movement

4 = damage 10-100

5 = name of the firing animation in library

6 = name of launch animation in library

7 = name of impact animation in library 
**/

var level:Number;

//BCivil speed and randomness
var BCSpeed:Number = 3;
var BCRand:Number = 120;

/*------------------------------Setup-------------------------------*/

introScreen.visible = false;
loadingScreen.visible = false;
gameScreen.visible = false;
endScreen.visible = false;

//map visibility
//MpRSimple.visible = false;

/*---------------------------Intro screen--------------------------*/

/*-----------------------------mainScreen---------------------------*/

mainScreen.play_btn.addEventListener(MouseEvent.CLICK, clickAway);
function clickAway(event:MouseEvent):void
{
    gameStart();
    }

function gameStart():void
{
    //Move main screen from stage
    mainScreen.visible = false;

    //Begin loading the game
    loadingScreen.visible = true;
    gameState = STATE_START;
    trace (gameState);
    addEventListener(Event.ENTER_FRAME, gameLoop);
    }

/*----------------------------gameLoop-----------------------------*/

function gameLoop(e:Event):void
{
    switch(gameState)
    {
        case STATE_START:
            startGame();
            break;

        case STATE_START_PLAYER:
            startPlayer();
            break;

        case STATE_PLAY:
            playGame();
            break;

        case STATE_END:
            endGame();
            break;

        }
    }
/*-_________________________-Game STATES-_________________________-*/

/*---------------------------STATE_START---------------------------*/

function startGame():void
{

    level = 1; //setting level for enemies

    //Graphics
        //player icon
    player = new Player(); 
        //add bullet holder
    bullets = new Array();
        //basicCivil icon
    civil = new Array(); 
        //basicEnemy icon
    enemy = new Array(); 
        //holds explosions
    explosions = new Array(); 

    //map
    //mp = new MP_00();
    //var mp:MP_00 = new MP_00();

    //Load map parts

    //End startGame
    gameState = STATE_START_PLAYER;
    trace(gameState);
    }

/*------------------------STATE_START_PLAYER-----------------------*/

function startPlayer():void
{
    //start the player

    //set possition of player
    player.y = stage.stageHeight - player.height;
    addChild(player);
    addEventListener(Event.ENTER_FRAME, movePlayer);

    //changing screens
    gameScreen.visible = true;

    //start game
    gameState = STATE_PLAY;
    trace(gameState);

    }

//player controll
function movePlayer(e:Event):void 
{

    //gameScreen.visible = true;

    //mouse\touch recognition
    player.x = stage.mouseX;
    player.y = stage.mouseY;

    //player does not move out of the stage
    if (player.x < 0)
    {
        player.x = 0;
    }
    else if (player.x > (stage.stageWidth - player.width))
    {
        player.x = stage.stageWidth + player.width;
    }

    }

//setting bullet type
if (BType == "BBasic")
{
        BProp = BBasic;
    /*case BMissile;
        BProp = BMissile;
        break; */
    }
//creating bullets

//gameScreen.fire_btn.addEventListener(MouseEvent.CLICK, fireHandler());

/*
function fireHandler():void
{
    var bulletTimer:Timer = new Timer (500);
    bulletTimer.addEventListener(TimerEvent.TIMER, timerListener);
    bulletTimer.start();
    trace("nja");
    }

function timerListener(e:TimerEvent):void
{
    //need and if statement to determine the bullet speed and travel depended on type of bullet
    var tempBullet:MovieClip = /*BProp[5] new BBasicA();
    //shoots bullets in the middle
    tempBullet.x = player.x +(player.width/2); 
    tempBullet.y = player.y;
    //shooting speed
    tempBullet.speed = 10; 
    bullets.push(tempBullet);
    addChild(tempBullet);
    //bullets movement forward
    for(var i=bullets.length-1; i>=0; i--)
    {
        tempBullet = bullets[i];
        tempBullet.y -= tempBullet.speed;
        }
    }
*/

/*----------------------------STATE_PLAY---------------------------*/

function playGame():void
{
    //gameplay
    //speedUp();
    mapMove();
    //fire();
    makeBCivil();
    makeBEnemy();
    moveBCivil();
    moveBEnemy();
    vhDrops();
    testCollision();
    testForEnd();
    removeExEplosions();
    }

function mapMove(){
    mp.y = mp.y - playerSpeed;
    }

/*
function speedUp():void
{
    var f:Number;
    for (f<10; f++;)
    {
        var playerSpeed = playerSpeed + 1;
        f = 0;
        //mapMove();
        MpRSimple = new MP_RS();
        MpRSimple.y = MpRSimple.y - playerSpeed;
        trace ("speed reset");
        }
    trace (f);
    }
*/

function makeBCivil():void
{
    //random chance
    var chance:Number = Math.floor(Math.random()*BCRand);
    if (chance <= 1 + level) 
    {
        var tempBCivil:MovieClip;
        //generate enemies
        tempBCivil = new BCivil();
        tempBCivil.speed = BCSpeed;
        tempBCivil.x = Math.round(Math.random()*800);

        addChild(tempBCivil);
        civil.push(tempBCivil);
        }
    }

function moveBCivil():void
{
    //move enemies
    var tempBCivil:MovieClip;
    for(var i:int = civil.length-1; i>=0; i--)
    {
        tempBCivil = civil[i];
        tempBCivil.y += tempBCivil.speed
        }

    //testion colision with the player and screen out
    if (tempBCivil.y > stage.stageHeight /* || tempBCivil.hitTestObject(player) */)
    {
        trace("ds hit");
        //makeExplosion (player.x, player.y);
        removeCivil(i);
        //gameState = STATE_END;
        }
    }

//Test bullet colision
function testCollision():void
{
    var tempBCivil:MovieClip;
    var tempBEnemy:MovieClip;
    var tempBullet:MovieClip;

    //civil/bullet colision
    civils:for(var i:int=civil.length-1; i>=0; i--)
    {
        tempBCivil = civil[i];
        for (var j:int=bullets.length-1; j>=0; j--)
        {
            tempBullet = bullets[j];
            if (tempBCivil.hitTestObject(tempBullet))
            {
                trace("laser hit the civil");
                makeExplosion (tempBCivil.x, tempBCivil.y);
                removeCivil(i);
                removeBullet(j);
                break civils;
                }
            }
        }

    //enemy/bullet colision
    enemy:for(var k:int=enemy.length-1; k>=0; k--)
    {
        tempBEnemy = enemy[k];
        for (var l:int=bullets.length-1; l>=0; l--)
        {
            tempBullet = bullets[l];
            if (tempBEnemy.hitTestObject(tempBullet))
            {
                trace("bullet hit the Enemy");
                makeExplosion (tempBEnemy.x, tempBEnemy.y);
                removeEnemy(k);
                removeBullet(l);
                break enemy;
                }
            }
        }
    }

function makeExplosion(ex:Number, ey:Number):void
{
    var tempExplosion:MovieClip;
    tempExplosion = new boom();
    tempExplosion.x = ex;
    tempExplosion.y = ey;
    addChild(tempExplosion)
    explosions.push(tempExplosion);
    }

function makeBEnemy():void
{
    //random chance
    var chance:Number = Math.floor(Math.random()*BCRand);
    if (chance <= 1 + level) 
    {
        var tempBEnemy:MovieClip;
        //generate enemies
        tempBEnemy = new BEnemy();
        tempBEnemy.speed = BCSpeed;
        tempBEnemy.x = Math.round(Math.random()*800);

        addChild(tempBEnemy);
        enemy.push(tempBEnemy);
        }

    }

function moveBEnemy():void
{
    //move enemies
    var tempBEnemy:MovieClip;
    for(var i:int = enemy.length-1; i>=0; i--)
    {
        tempBEnemy = enemy[i];
        tempBEnemy.y += tempBEnemy.speed
        }

    //testion colision with the player and screen out
    if (tempBEnemy.y > stage.stageHeight /* || tempBCivil.hitTestObject(player) */)
    {
        trace("enemy");
        //makeExplosion (player.x, player.y);
        removeEnemy(i);
        //gameState = STATE_END;
        }
    }

function vhDrops():void
{}

function testForEnd():void
{
    //check damage

    //end game
    //gameState = STATE_END;
    trace(gameState);
    }

/*--------------------REMOVING BS FROM STAGE-----------------------*/
//removing civils
function removeCivil(idx:int):void 
{
    if(idx >= 0)
    {
        removeChild(civil[idx]);
        civil.splice(idx, 1);
        }
    }

//removing enemies
function removeEnemy(idx:int):void 
{
    if(idx >= 0)
    {
        removeChild(enemy[idx]);
        enemy.splice(idx, 1);
        }
    }

//removing civils
function removeBullet(idx:int):void 
{
    if(idx >= 0)
    {
        removeChild(bullets[idx]);
        bullets.splice(idx, 1);
        }
    }

//removing expired explosions
function removeExEplosions():void 
{
    var tempExplosion:MovieClip;
    for(var i=explosions.length-1; i>=0; i--)
    {
        tempExplosion = explosions[i];
        if (tempExplosion.currentFrame >= tempExplosion.totalFrames)
        {
            removeExplosion(i);
            }
        }
    }

//removing civils
function removeExplosion(idx:int):void 
{
    if(idx >= 0)
    {
        removeChild(explosions[idx]);
        explosions.splice(idx, 1);
        }
    }

/*--------------------------STATE_END------------------------------*/

function endGame():void
{

    }

/*gameScreen*/

/*endScreen*/ 
```

而且我确定这里还有其他一些错误的代码，但这并不重要。

设置为 AS 和 AS 链接的导出：http: [//i.stack.imgur.com/UvMAt.png](http://i.stack.imgur.com/UvMAt.png)

编辑：删除了第二个 var 声明，仍然得到同样的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T17:52:26.133

如果您提供更多代码和解释，那就太好了，但是在这里我发现了 1046 ：“您会收到此错误的一个原因是，如果您在舞台上有一个与您的库中的对象同名的对象。”

看看：[http ://curtismorley.com/2007/06/20/flash-cs3-flex-2-as3-error-1046/](http://curtismorley.com/2007/06/20/flash-cs3-flex-2-as3-error-1046/)

您是否在网上搜索过代码 1046 的任何解释？你检查过这个吗？

我看到你有两个`var mp`声明。尝试删除第一个，`var mp:MovieClip;`. 如果它不起作用，请仔细检查您的 Flash 库，确保该`MP_00`名称可用。如果它是一个影片剪辑，请检查它是否为 ActionScript 导出。如果是实例名称，请检查它是否没有被使用过两次。

编辑。

我的建议是：

1-将所有引用更改`mp`为`mp1`。可能与实例“...舞台上的对象与库中的对象同名”存在冲突。

2-`var mp1:MP_00;`而不是`var mp:MovieClip;`在声明部分。

3- 把`mp1 = new MP_00();`后面放在 startGame() 函数中

4-确保您的新`mp1`变量无处不在，并且您没有更多的参考。为`mp`变量。

如果……还是不行。我建议：更改您的 MovieClip 链接的名称，like`TestA`或其他。是的，我知道，对一切都有疑问，但没有魔法，测试一切肯定会显示问题。

编辑。

对于`mapMove()`功能...

首先：确保该`speedUp()`函数可用，而不是在注释中，并在您的`playGame()`函数中调用它。您的`playerSpeed`变量必须有一个值，因此请更改 : `var playerSpeed = playerSpeed + 1;`for `playerSpeed = playerSpeed + 1;`。不要`var`对同一个变量使用两次声明。（见`var playerSpeed:Number;`头文件。）

此外...您必须知道`MP_00`舞台上的剪辑是否是您的`mp1`剪辑。（我假设您发布了您拥有的所有代码。）

案例 A ：`MP_00`在您开始剪辑时在舞台上。

如果你真的`MP_00`在屏幕上看到你的，那意味着你不必做`mp1 = new MP_00();`and `addchild(mp1);`。它已经为您完成了（从库中拖动一个剪辑并给出一个名称实例，与执行`new`and相同`addchild`）。

找到实例名称（或给出一个）。您应该获取您的实例名称并移动您的对象（这里的实例名称是`mp1`）：

```
mp1.y = mp1.y - playerSpeed; 
```

案例 B：`MP_00`当您开始剪辑时不在舞台上。

做：1-您的声明：`var mp1:MP_00;` 2-分配内存：`mp1 = new MP_00();` 3-添加到显示列表：`addchild(mp1);` 4-“摇动它 bb”：`mp1.y = mp1.y - playerSpeed;`或`mp1.y -= playerSpeed;`

我不知道你的知识水平到底是多少，所以我试着把所有的东西都放进去。对不起，如果它太多了。

# arrays - 另一种比较数组的简单方法

> ID：16000816
> 
> 赞同：0
> 
> 时间：2013-04-14T15:32:03.993
> 
> 标签：arrays, powershell, compare

我想比较两个数组，我想知道是否有另一种方法可以比我更简单地做到这一点？

这是我的代码：

```
$array1 = @()
$array1 += "TEST1 LAPTOP DSGF65"
$array1 += "TEST2 LAPTOP DJDJD"
$array1 += "TEST3 LAPTOP DJDJD"
$array1 += "TEST4 LAPTOP DJDJD"

$array2 = @()
$array2 += "xxxxx"
$array2 += "test3"
$array2 += "xxxxx"
$array2 += "xxxxx"
$array2 += "test1"
$array2 += "xxxxx"
$array2 += "xxxxx"
$array2 += "test2"
$array2 += "test4"

$z = 0

for ($i = 0; $i -lt $array2.count; $i++)

{

  for ($j = 0; $j -lt $array1.count; $j++)

  {

    if ($array1[$j].Substring(0,5).ToLower() -eq $array2[$i])
    {
      $z++
    }
  }

}

Write-Host $z "elements" 
```

write-Host $z 返回 4

感谢您的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T16:07:57.533

我建议：

```
$z = 0
$array2 |
 foreach {$z += ($array1 -match $_).count}

 $z 
```

# javascript - JavaScript 播放/暂停音频按钮，更改类并创建自动循环

> ID：16000821
> 
> 赞同：0
> 
> 时间：2013-04-14T15:32:40.950
> 
> 标签：javascript, playback

我的代码是这样工作的：当我单击播放时，“播放”类更改为“暂停”类，但是当我单击暂停时，它不会更改为“播放”类。

第二个问题是如何为音频制作自动循环。

我的代码：

HTML：

```
<a class="playback">
                <span id="toggle" class="play"></span>
            </a> 
            <audio>
             <source src="<?php bloginfo('template_directory') ?>/venga.ogg" type="audio/ogg" />
                <source src="<?php bloginfo('template_directory') ?>/venga.mp3" type="audio/mpeg" />
                Your browser does not support HTML5 audio.
            </audio> 
```

CSS：

```
.play {
        background: url('img/play.png') no-repeat;
        width: 32px;
        height: 32px;
        padding: 24px 45px 3px 0px;
        margin: 0 0 0 5px;
    }
    .pause {
        background: url('img/pause.png') no-repeat;
        width: 32px;
        height: 32px;
        padding: 24px 45px 3px 0px;
        margin: 0 0 0 5px;
    } 
```

JS：

```
<script>
$(function() {
    $(".playback").click(function(e) {
        e.preventDefault();
        var song = $(this).next('audio').get(0);
        if (song.paused)
            song.play();
        else
            song.pause();
    });
});
</script>
 <script type="text/javascript">
$(document).ready(function() {
    $('#toggle').bind("click", function() {
        if ($(this).attr("class") == "play")
            $(this).attr("class", "pause");
        else
            $(this).attr("class", "play");
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:41:16.587

Thank you for giving inspiration for a beginner like me.. the script seems work in my html page, with iOS simulator.

perhaps you include 2 jquery version? i'm not sure where's the problem with your code..

# c++ - 英特尔 TBB 中的任务延续

> ID：16000827
> 
> 赞同：4
> 
> 时间：2013-04-14T15:33:15.137
> 
> 标签：c++, c++11, tbb, ppl

有没有类似 PPL 在 TBB 中的任务延续？`tbb::task`我知道手动分配s 和手动分配延续任务并为它们手动管理引用计数的低级 TBB 方法：

```
struct FibContinuation: public task {
    long* const sum;
    long x, y;
    FibContinuation( long* sum_ ) : sum(sum_) {}
    task* execute() {
        *sum = x+y;
        return NULL;
    }
};

struct FibTask: public task {
    const long n;
    long* const sum;
    FibTask( long n_, long* sum_ ) :
        n(n_), sum(sum_)
    {}
    task* execute() {
        if( n<CutOff ) {
            *sum = SerialFib(n);
            return NULL;
        } else {
            // long x, y; This line removed 
            FibContinuation& c = 
                *new( allocate_continuation() ) FibContinuation(sum);
            FibTask& a = *new( c.allocate_child() ) FibTask(n-2,&c.x);
            FibTask& b = *new( c.allocate_child() ) FibTask(n-1,&c.y);
            // Set ref_count to "two children plus one for the wait".
            c.set_ref_count(2);
            spawn( b );
            spawn( a );
        // *sum = x+y; This line removed
            return NULL;
        }
    }
}; 
```

这简直太可怕了。您必须提前知道将产生多少子任务，并适当地手动设置引用计数。这是非常脆弱的编码...

PPL 指定延续的方式非常简单：

```
create_task([]()->bool
{
  // compute something then return a bool result
  return true
}).then([](bool aComputedResult)
{
  // do something with aComputedResult
}); 
```

您如何在 TBB 中实现这一目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-23T15:29:43.947

是的，您可以在[http://www.threadingbuildingblocks.org/docs/help/reference/task_scheduler/catalog_of_recommended_task_patterns.htm](http://www.threadingbuildingblocks.org/docs/help/reference/task_scheduler/catalog_of_recommended_task_patterns.htm)阅读到几种推荐的 TBB 延续样式。但是，根据 TBB 库的设计，它们都没有像您的 PPL 示例那样使用 C++11 结构。

如果您的问题真的是“TBB 是否有用于任务继续的 C++11 接口”，那么答案是“否”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T16:18:51.383

[没有任何直接的东西，我很久以前在我的博客here](http://parallelroads.wordpress.com/2010/01/22/continuations-and-directed-graphs-part-1-implementing-with-the-parallel-pattern-library/)上发布了一个如何使用 task_group（在 tbb 中）执行此操作的示例。

语法相似但不是 100% 相同，因为它是在任务存在之前发布的。

```
void SimpleContinuation()
{
    auto task1 = run_task([](){ContinueableTask(1);});
    //task 2 depends on task 1
    auto task2 = run_when(task1, [](){ContinueableTask(2);});
    wait_for_all(task1, task2);
} 
```

# flash - startDrag() flash 移动所有父对象，而不是仅仅移动它分配给的对象

> ID：16000829
> 
> 赞同：0
> 
> 时间：2013-04-14T15:33:24.720
> 
> 标签：flash, actionscript

所以我对 Actionscript 还很陌生，但是我在函数和事件侦听器方面做得很好，所以我想知道是否有人可以告诉我解决我的项目正在发生的事情。

所以我有一个基本的拖放功能，但是当我运行这个代码时，它会移动舞台上的所有东西，从所有不同的图层和框架中，我不希望这种情况发生，我只想拖动各种对象

```
answer1_word.addEventListener(MouseEvent.MOUSE_DOWN, answer1_drag)
function answer1_drag(event:MouseEvent):void {
startDrag();
}

answer1_word.addEventListener(MouseEvent.MOUSE_UP, answer1_drop)
function answer1_drop(event:MouseEvent):void {
stopDrag();
} 
```

我想不出代码有什么问题，但我将不胜感激，谢谢大家！

编辑：议案建议

```
if(answer1_word.hitTestObject(word_select_box)){
trace("Hello");
} 
```

这是我的命中测试对象代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T16:07:53.653

您正在“根”级容器上调用 startDrag() 和 stopDrag()。那就是“舞台”。您需要从要移动的实例调用 startDrag() 和 stopDrag()。

```
answer1_word.addEventListener(MouseEvent.MOUSE_DOWN, answer1_drag)
function answer1_drag(event:MouseEvent):void {
 answer1_word.startDrag();
}

answer1_word.addEventListener(MouseEvent.MOUSE_UP, answer1_drop)
function answer1_drop(event:MouseEvent):void {
 answer1_word.stopDrag();
} 
```

老实说，如果您计划拥有多个 Draggle 对象，我会使用 event.target 进行抽象

```
answer1_word.addEventListener(MouseEvent.MOUSE_DOWN, onDrag)
answer1_word.addEventListener(MouseEvent.MOUSE_UP, onDrop)

function onDrag(event:MouseEvent):void {
 event.target.startDrag();
}

function onDrop(event:MouseEvent):void {
 event.target.stopDrag();
} 
```

# asp.net - 带有 asp.net 4.5 的实体框架

> ID：16000830
> 
> 赞同：-1
> 
> 时间：2013-04-14T15:33:32.277
> 
> 标签：asp.net, entity-framework-5

我的 EF 使用存储库 + unti od 工作模式有一个奇怪的行为。

问题是，当我创建一个用户并为他分配一个角色时，重定向到目标页面需要一个特定的角色，所以在我的 RoleProvider 中我覆盖了 GetRolesForUser ：

```
public override string[] GetRolesForUser(string username)
{

    string[] listRoles = unitOfWork.RoleRepository.Find(r => r.Utilisateurs.Any(u => u.Login == username)).ToList().Select(r => r.Nom).ToArray<string>();

    return listRoles;
} 
```

此时数据库中的用户已经创建，但他没有出现在他的角色中。

我将我的代码更改为这个新版本：

```
public override string[] GetRolesForUser(string username)
{
    string[] listRoles;

    Utilisateur user = unitOfWork.UtilisateurRepository.Find(u => u.Login == username).FirstOrDefault();

    if (user != null)
        listRoles = user.Roles.Select(r => r.Nom).ToList().ToArray();
    else
    {
        listRoles = new string[1];
        listRoles[0] = "";
    }

    return listRoles;
} 
```

对于信息，我根据请求使用一个工作单元。

在 MembershipProvider 和 RoleProvider 类中，我使用：

```
private IUnitOfWork unitOfWork = new UnitOfWork(); 
```

在我的 DAl 中，我使用了一个通用存储库：

```
public class GenericRepository<T> : IRepository<T> where T : class
{
    internal DVEntities context;
    internal IDbSet<T> dbset;

    public GenericRepository(DVEntities context)
    {
        this.context = context;
        this.dbset = context.Set<T>();
    }
    public IUnitOfWork UnitOfWork
    {
        get;
        set;
    }

    public IQueryable<T> All()
    {
        return dbset.AsQueryable();
    }

    //public IQueryable<T> Find(Func<T, bool> expression)
    public IQueryable<T> Find(Func<T, bool> expression)
    {
        return dbset.Where(expression).AsQueryable();
    }

    public void Add(T entity)
    {
        dbset.Add(entity);
    }

    public void Attach(T entity)
    {
        dbset.Attach(entity);
    }

    public void Detach(T entity)
    {
        ((IObjectContextAdapter)context).ObjectContext.Detach(entity);            
    }

    public void Delete(T entity)
    {
        if (context.Entry(entity).State == EntityState.Detached)
        {
            dbset.Attach(entity);
        }
        dbset.Remove(entity);
    }

    public void Update(T entityToUpdate)
    {
        dbset.Attach(entityToUpdate);
        //dbset.Add(entityToUpdate);

        context.Entry(entityToUpdate).State = EntityState.Modified;
    }

    public void Save()
    {
        context.SaveChanges();
    }
} 
```

谁能解释一下这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T00:40:58.927

您的存储库应采用`Expression<Func<T, bool>>`as 参数，而不是`Func<T, bool>`：

```
public IQueryable<T> Find(Expresssion<Func<T, bool>> expression) 
```

然后你的第一个版本使用...

```
public override string[] GetRolesForUser(string username)
{
    string[] listRoles = unitOfWork.RoleRepository
        .Find(r => r.Utilisateurs.Any(u => u.Login == username))
        .Select(r => r.Nom)
        .ToArray();

    return listRoles;
} 
```

... 应该管用。

# r - 没有中间二分图的二分投影

> ID：16000839
> 
> 赞同：3
> 
> 时间：2013-04-14T15:34:37.497
> 
> 标签：r, igraph, bipartite

我有一个`data.frame`描述具有非常大（数百万）和相当小（数百）独立集的二部图。

我想在较小的独立集上获得图的二分投影，但无需先创建大二分图，尤其是对较大独立集的巨大二分投影。此限制的原因是[`igraph`段错误](https://bugs.launchpad.net/bugs/1168894)和 RAM 限制（我只有 8GB RAM）。

例如，给定

```
data.frame(beg=c("a","a","b","b","c","c"),
           end=c("1","2","1","2","1","2"),
           weight=1:6) 
```

我想要数据框

```
data.frame(beg=c("a","a","b"),
           end=c("b","c","c"),
           weight=c(1+3+2+4,1+5+2+6,3+5+4+6)) 
```

边的权重加起来。

（在本例中，`abc`是“较小”的集合，`12`是“较大”的集合）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T13:26:24.533

这似乎可以满足我的需要（关键是[`data.table`](https://cran.r-project.org/web/packages/data.table/vignettes/datatable-intro.html)用于快速加入）：

```
> library(igraph)
> library(data.table)
data.table 1.8.8  For help type: help("data.table")
> f <- data.frame(beg=c("a","a","b","b","c","c"),
                  end=c("1","2","1","2","1","2"),
                  count=1:6)
> f
   beg end count
1:   a   1     1
2:   b   1     3
3:   c   1     5
4:   a   2     2
5:   b   2     4
6:   c   2     6
> m <- f[f,allow.cartesian=TRUE]

> m
    end beg weight beg.1 weight.1
 1:   1   a      1     a        1
 2:   1   b      3     a        1
 3:   1   c      5     a        1
 4:   1   a      1     b        3
 5:   1   b      3     b        3
 6:   1   c      5     b        3
 7:   1   a      1     c        5
 8:   1   b      3     c        5
 9:   1   c      5     c        5
10:   2   a      2     a        2
11:   2   b      4     a        2
12:   2   c      6     a        2
13:   2   a      2     b        4
14:   2   b      4     b        4
15:   2   c      6     b        4
16:   2   a      2     c        6
17:   2   b      4     c        6
18:   2   c      6     c        6
> v <- m$beg == m$beg.1
> m <- f[f,allow.cartesian=TRUE]
> v <- m$beg == m$beg.1
> m$end <- NULL
> m$weight <- (m$count + m$count.1)/2
> m$count <- NULL
> m$count.1 <- NULL
> m
    beg beg.1 weight
 1:   a     a      1
 2:   b     a      2
 3:   c     a      3
 4:   a     b      2
 5:   b     b      3
 6:   c     b      4
 7:   a     c      3
 8:   b     c      4
 9:   c     c      5
10:   a     a      2
11:   b     a      3
12:   c     a      4
13:   a     b      3
14:   b     b      4
15:   c     b      5
16:   a     c      4
17:   b     c      5
18:   c     c      6
> ve <- data.table(vertex=m$beg[v], weight=m$weight[v], key="vertex")
> ve <- ve[, list(count = .N, weight = sum(weight)), by = "vertex"]
> ve
   vertex count weight
1:      a     2      3
2:      b     2      7
3:      c     2     11
> g1 <- graph.data.frame(m[!v,], vertices=ve, directed=FALSE)
> g1 <- simplify(g1, edge.attr.comb="sum")
> V(g1)$weight
[1]  3  7 11
> E(g1)$weight
[1] 10 14 18 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T23:30:34.933

所以这就是我的做法（假设你的边缘在 df 中，并且“小”集在边缘的开头）

对于小集合中的每一对节点，我将使用以下内容：

```
do.pair = function(x,y) {
     tmp = intersect(df$end[df$beg==x],df$end[df$beg==y])
     res = sum(df$weight[(df$beg %in% c(x,y)) & (df$end %in% tmp)])
     return(res)
} 
```

现在，我会以你喜欢的方式创建对的列表（你可以使用 exapnd.grid 或 external），然后使用上面的相关 apply 函数，这里我只是做一个简单的嵌套循环，效率不是很高但很简单读。

```
g.small = unique(df$beg)
n = length(g.small)
res = list()
cnt=0
for (i in 1:(n-1)) {
    for (j in (i+1):n) {
       cnt = cnt+1
       res[[cnt]] = list(beg=g.small[i],end=g.small[j],weight=do.pair(g.small[i],g.small[j]))
    }
}

do.call(rbind,res) 
```

# java - 使用 Java 在 hdfs 中写入文件

> ID：16000840
> 
> 赞同：58
> 
> 时间：2013-04-14T15:34:52.163
> 
> 标签：java, hadoop, hdfs

我想在 HDFS 中创建一个文件并在其中写入数据。我使用了这段代码：

```
Configuration config = new Configuration();     
FileSystem fs = FileSystem.get(config); 
Path filenamePath = new Path("input.txt");  
try {
    if (fs.exists(filenamePath)) {
        fs.delete(filenamePath, true);
    }

    FSDataOutputStream fin = fs.create(filenamePath);
    fin.writeUTF("hello");
    fin.close();
} 
```

它会创建文件，但不会在其中写入任何内容。我搜索了很多，但没有找到任何东西。我的问题是什么？我需要任何权限才能在 HDFS 中写入吗？

谢谢。

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-07-23T19:41:40.070

@Tariq 的替代方法，您可以在获取文件系统时传递 URI

```
import org.apache.hadoop.fs.FileSystem
import org.apache.hadoop.conf.Configuration
import java.net.URI
import org.apache.hadoop.fs.Path
import org.apache.hadoop.util.Progressable
import java.io.BufferedWriter
import java.io.OutputStreamWriter

Configuration configuration = new Configuration();
FileSystem hdfs = FileSystem.get( new URI( "hdfs://localhost:54310" ), configuration );
Path file = new Path("hdfs://localhost:54310/s2013/batch/table.html");
if ( hdfs.exists( file )) { hdfs.delete( file, true ); } 
OutputStream os = hdfs.create( file,
    new Progressable() {
        public void progress() {
            out.println("...bytes written: [ "+bytesWritten+" ]");
        } });
BufferedWriter br = new BufferedWriter( new OutputStreamWriter( os, "UTF-8" ) );
br.write("Hello World");
br.close();
hdfs.close(); 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-04-14T22:50:14.877

将环境变量定义`HADOOP_CONF_DIR`到 Hadoop 配置文件夹或在代码中添加以下 2 行：

```
config.addResource(new Path("/HADOOP_HOME/conf/core-site.xml"));
config.addResource(new Path("/HADOOP_HOME/conf/hdfs-site.xml")); 
```

如果不添加，客户端将尝试写入本地 FS，从而导致权限被拒绝异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-09T09:59:40.597

这应该可以解决问题

```
import org.apache.commons.io.IOUtils;
import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.fs.FSDataOutputStream;
import org.apache.hadoop.fs.FileSystem;
import org.apache.hadoop.fs.Path;

import java.io.*;
import java.nio.charset.StandardCharsets;

public static void writeFileToHDFS() throws IOException {
        Configuration configuration = new Configuration();
        configuration.set("fs.defaultFS", "hdfs://localhost:9000");
        configuration.addResource(new Path("/HADOOP_HOME/conf/core-site.xml"));
        configuration.addResource(new Path("/HADOOP_HOME/conf/hdfs-site.xml"));
        FileSystem fileSystem = FileSystem.get(configuration);
        //Create a path
        String fileName = "input.txt";
        Path hdfsWritePath = new Path("/user/yourdesiredpath/" + fileName);
        FSDataOutputStream fsDataOutputStream = fileSystem.create(hdfsWritePath,true);

        BufferedWriter bufferedWriter = new BufferedWriter(new OutputStreamWriter(fsDataOutputStream,StandardCharsets.UTF_8));
        bufferedWriter.write("Java API to write data in HDFS");
        bufferedWriter.close();
        fileSystem.close();
    } 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-14T16:33:45.663

请尝试以下方法。

```
FileSystem fs = path.getFileSystem(conf);
SequenceFile.Writer inputWriter = new SequenceFile.Writer(fs, conf, path, LongWritable.class, MyWritable.class);
inputWriter.append(new LongWritable(uniqueId++), new MyWritable(data));
inputWriter.close(); 
```

# c - 在 C 中读取结构时 fscanf 崩溃

> ID：16000843
> 
> 赞同：-1
> 
> 时间：2013-04-14T15:35:02.373
> 
> 标签：c, crash, scanf

我正在为我的家庭作业开发一些 C 应用程序，但我正面临着恼人的崩溃。这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>

//Constants
//Available user choices
enum commands {READ_LIST = 1, QUIT};

struct student {
    char* surname;
    char* name;
    char* group;
};

typedef struct student Student;
typedef Student * studentPtr;

//Globals
int studentCount = 0;

//Function declarations
void displayCommands();
void readList();

//Main function
int main() {

    char enteredValue[999];
    int thisCommand;
    int running = 1;

    while(running) {
        displayCommands();
        scanf("%s", enteredValue);
        thisCommand = atoi(enteredValue);
        puts("\n----------------------------------------------");
        switch(thisCommand) {
            case READ_LIST:
                readList();
                break;
            case QUIT:
                running = 0;
                break;
            default:
                puts("Wrong command!");
                break;
        }
    }
    system("pause");
    return 0;
}

void displayCommands() {
    puts("\n---------------------------------------------");
    puts("Enter a command number:");
    printf("%d - Read students from file.\n", READ_LIST);
    printf("%d - Quit.\n", QUIT);
    puts("----------------------------------------------");
}

void readList() {
    FILE *fp = NULL;

    fp = fopen("studs.txt", "r");

    studentPtr newStudentPtr = malloc(sizeof(Student));

    if(fp != NULL) {
        fscanf(fp, "%d", &studentCount);

        if(newStudentPtr != NULL) {
            fscanf(fp, "%s %s %s", newStudentPtr->surname,
                   newStudentPtr->name, newStudentPtr->group);
        }
        fclose(fp);
    } else {
        puts("Unable to open file for reading!");
    }
} 
```

我基本上尝试将整数蚂蚁三个字符串读入一个结构。程序在尝试读取文件的最后一行时崩溃。

请问有什么帮助吗？我犯了什么错误？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T15:37:16.077

您不能读入任意内存地址。为学生结构分配内存后，您还需要为每个字符串分配内存。粗略地说：

```
 if(newStudentPtr != NULL) {
        char buffer[3][256];
        fscanf(fp, "%s %s %s", buffer[0], buffer[1], buffer[2]);
        newStudentPtr->surname = malloc(strlen(buffer[0])+1);
        strcpy(newStudentPtr->surname, buffer[0]);
        newStudentPtr->name = /* similar ... */;
        newStudentPtr->group = /* similar ... */;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T15:43:17.877

您可以更改您`struct student`的包含字符数组（代替字符指针）；

```
struct student {
    char surname[100];
    char name[100];
    char group[100];
}; 
```

# c# - File.Open 的默认目录是什么？

> ID：16000848
> 
> 赞同：5
> 
> 时间：2013-04-14T15:35:34.583
> 
> 标签：c#, file, asp.net-4.0

我有这个代码：

```
Stream f = File.Open("data.majid", FileMode.OpenOrCreate, FileAccess.ReadWrite); 
```

文件将在哪里创建？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T15:36:42.393

从[MSDN 文档](http://msdn.microsoft.com/en-us/library/b9skfh7s.aspx)[：`File.Open`](http://msdn.microsoft.com/en-us/library/b9skfh7s.aspx)

> *path*参数允许指定相对或绝对路径信息。相对路径信息被解释为相对于当前工作目录。要获取当前工作目录，请参阅[GetCurrentDirectory](http://msdn.microsoft.com/en-us/library/system.io.directory.getcurrentdirectory.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T15:36:54.620

通常是启动进程的目录。这是当前的工作目录。

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.io.directory.getcurrentdirectory%28v=vs.110%29.aspx)

当前目录与原始目录不同，原始目录是启动进程的目录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T15:38:11.583

从*[`MSDN`](http://msdn.microsoft.com/en-us/library/b9skfh7s.aspx)*;

> path 参数允许指定相对或绝对路径信息。相对路径信息被解释为相对于当前工作目录。要获取当前工作目录，请参阅**GetCurrentDirectory**。

查看[`Directory.GetCurrentDirectory`](http://msdn.microsoft.com/en-us/library/system.io.directory.getcurrentdirectory.aspx)

> 当前目录与原始目录不同，原始目录是启动进程的目录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T07:59:04.913

它将存储在当前目录中。您的应用程序将运行

例如：

如果您调用`Directory.GetCurrentDirectory();`它将返回：

> "C:\Program Files\Common Files\Microsoft Shared\DevServer\10.0"

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-05T14:08:05.850

此外：

*   可以在 VisualStudio 项目设置中更改工作目录 属性 | 调试

*   如果您为用户创建应用程序的快捷方式，您可以指定“开始于”属性

# php - 分组并显示所有行

> ID：16000850
> 
> 赞同：0
> 
> 时间：2013-04-14T15:35:42.047
> 
> 标签：php, mysql, group-by

我有一张叫做付款的桌子。其中有`payid`, `date`, `productid`, `customerid`, `Name`, `type`, `colour`, `quantity`, `total`.

可以将具有相同时间戳的多个项目输入到表中。

我正在尝试按日期对数据进行分组。我已经使用 count 仅显示一次日期，但它只会显示第一个带有时间戳的项目。

```
<?php
include("db_connect.php");

//echo "1"; 
$get_orders_date = mysql_query("SELECT date, name, COUNT( DISTINCT date) FROM payment GROUP BY date");

//echo "2"; 

while($get_date = mysql_fetch_array($get_orders_date)) 
{   
    //echo "3"; 

    $date = $get_date['date'];  
    echo "" .$date. "<br/><br/>";
    $name = $get_date['name'];  
    echo "" .$name. "<br/><br/>";
}

?> 
```

这将显示该项目的付款日期和时间，但仅显示其中一项。

谢谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:41:38.990

按名称和日期分组。

另请记住，MySQL 执行此查询违反了标准。如果使用分组，则所有未分组的列都应应用聚合函数。

# batch-file - ADB logcat 批处理永远不会结束

> ID：16000852
> 
> 赞同：1
> 
> 时间：2013-04-14T15:35:59.113
> 
> 标签：batch-file, adb, android-logcat

我正在尝试创建一个批处理文件，该文件将执行我每天使用的一些 ADB 命令。我被 adb logcat 困住了，因为 logcat 永远不会结束。有没有办法在这么多秒后结束它？目前我有

```
:logcat
adb logcat
pause>nul|set /p "=Press any key to return to the menu"<nul&echo(
cls
goto start 
```

当我从日志中获取所需内容时，认为暂停将允许我手动结束它。

有没有办法结束命令？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T07:16:12.773

你可以使用

`timeout DURATION adb logcat`

在 DURATION 后停止 logcat（默认以秒为单位）。

另一种使用 adb 的方法是：

```
adb logcat -d 
```

这将获取日志并立即终止命令。

我不知道几秒钟后停止 logcat 的任何其他方法，除了 CTRL+C。

# html - 需要光标停留在下拉菜单的主要元素上

> ID：16000853
> 
> 赞同：0
> 
> 时间：2013-04-14T15:36:08.463
> 
> 标签：html, css

我已经发布了我的垂直下拉菜单的代码。一切都很好，除了当我从一个导航按钮到下一个导航按钮时。当您向下移动菜单并将鼠标悬停在按钮上时，会出现一个下拉菜单。你可以通过这个菜单向下移动就好了。当我转到下一个主按钮时，我的问题就来了。旧菜单弹出，然后新菜单弹出，鼠标位于新下拉菜单的中间。我希望它与下拉菜单的主按钮保持一致，直到用户再次移动它。这是我的代码，它可以复制和粘贴，并且可以很好地举例说明我在说什么

谢谢

```
<!DOCTYPE html>

<html lang="en">
<head>
<title>Page Title</title>
<meta charset="utf-8">

<style type="text/css">
    body
    {
        background: grey;
    }
    .menu 
    {
        width: 120%;
        display: block;
        float: right;
    }

    .menu ul
    {
        list-style: none;
    }

    .menu a
    {
        color: #000000;
        display: block;
        cursor: pointer;
        background: #808080;
        border: 1px solid #000000;
        padding: 6px 2px 6px 2px;
        font-size: small;
        text-align: center;
        text-decoration:none;
        font-weight: bold;
        width: 80%;
        margin: auto; 

        -webkit-border-radius: 4px 4px 4px 4px;
        -moz-border-radius: 4px 4px 4px 4px;
        border-radius: 4px 4px 4px 4px;

        -webkit-box-shadow: inset -2px -2px 2px 2px #181818;
        -moz-box-shadow: inset -2px -2px 2px 2px #181818;
        box-shadow: inset -2px -2px 2px 2px #181818;
    }

    .menu a:hover
    {
        color: #ffffff;
    }

    .menu a:active
    {
        -webkit-box-shadow: inset 1px 1px 1px 1px #181818;
        -moz-box-shadow: inset 1px 1px 1px 1px #181818;
        box-shadow: inset 1px 1px 1px 1px #181818;
    }

    .subMenu a
    {
        color: #ffffff;
        cursor: pointer;
        background: none;
        border: none;
        font-size: .80em;
        text-align: left;

        text-decoration:none;
        font-weight: normal;
        width: 100%;
        margin-left: -20px;

        border-radius: 0px 0px 0px 0px;
        box-shadow: 0px 0px 0px 0px;

        /*
        border-bottom: 1px solid #000000;
        border-left: 1px solid #000000;
        */

    }

    .subMenu a:hover
    {
        color: #ffffff;
        background: #000000;
        font-size: .90em;
    }

    .menu ul ul li
    {
        display:none;
    }

    .menu li:hover ul li
    {
        display:block;
    }
</style>

 </head>

<body>
<div style="width: 300px">
    <div class="menu">
        <ul>
             <li><a href="index.htm" style="color: #ffffff">Home</a>
                 <div class="subMenu">
                     <ul>
                         <li><a href=index.htm#zombie>What is a Zombie</a></li>
                         <li><a href=index.htm#zombieApoc>What is the Zombie Apacolyspe</a></li>
                     </ul>
                     <br>
                 </div>
             </li>

             <li><a href="surviveFirstNight.htm">Surviving First Night</a>
                 <div class="subMenu">
                     <ul>
                         <li><a href=surviveFirstNight.htm#firstNight>What is First Night</a></li>
                         <li><a href=surviveFirstNight.htm#prepared>Prepare/Planning</a></li>
                         <li><a href=surviveFirstNight.htm#survivalKit>Zombie Survival Kit</a></li>
                         <li><a href=surviveFirstNight.htm#group>Form a Group</a></li>
                     </ul>
                     <br>
                 </div>
             </li>
             <li><a href="extendedSurvival.htm">Extended Survival</a>
                 <div class="subMenu">
                     <ul>
                         <li><a href=index.htm#zombie>What is a Zombie</a></li>
                         <li><a href=index.htm#zombieApoc>What is the Zombie Apacolyspe</a></li>
                     </ul>
                     <br>
                 </div>
             </li>

             <li><a href="weapons.htm">Weapons</a>
                 <div class="subMenu">
                     <ul>
                         <li><a href=weapons.htm#meele>Meele Weapons</a></li>
                         <li><a href=weapons.htm#firearms>Firearms</a></li>
                         <li><a href=weapons.htm#projectile>Projectile Weapons</a></li>
                         <!--<li><a href=weapons.htm#explosives>Explosives</a></li> -->
                     </ul>
                     <br>
                 </div>
             </li>
             <li><a href="humanElement.htm">Human Element</a>
                 <div class="subMenu">
                     <ul>
                         <li><a href=index.htm#zombie>What is a Zombie</a></li>
                         <li><a href=index.htm#zombieApoc>What is the Zombie Apacolyspe</a></li>
                     </ul>
                     <br>
                 </div>
             </li>
             <li><a href="refMaterial.htm">Reference Material</a>
                 <div class="subMenu">
                     <ul>
                         <li><a href=index.htm#zombie>What is a Zombie</a></li>
                         <li><a href=index.htm#zombieApoc>What is the Zombie Apacolyspe</a></li>
                     </ul>
                     <br>
                 </div>
             </li>
        </ul>    
    </div>  
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T16:38:05.820

我认为这里真正的问题是子菜单突然出现并推动其他菜单项的方式。从可用性的角度来看，不建议使用您的方法。我建议在悬停时将子菜单向右移动。见小提琴：

[http://jsfiddle.net/David_Knowles/yUyhG/1/](http://jsfiddle.net/David_Knowles/yUyhG/1/)

以下是主要变化：

```
 .menu ul li
    {
        position:relative;
    }

    .menu ul ul
    {
        display:none;
        padding:10px;
        background-color:#919191;
        -webkit-border-radius: 4px 4px 4px 4px;
        -moz-border-radius: 4px 4px 4px 4px;
        border-radius: 4px 4px 4px 4px;
    }

     .menu li:hover ul
    {
        display:block;
        position:absolute;
        top:0;
        left:100%;
        width:180px;
    } 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T16:32:06.690

也许你想要这样的东西：http: [//jsfiddle.net/duweP/1/](http://jsfiddle.net/duweP/1/)

```
jQuery(document).ready(function ($) {
    $('.menu > ul > li').on('mouseenter', function () {
        $("div.subMenu").slideUp();
        $(this).find("div.subMenu").slideDown();
    });
}); 
```

以为我建议`.subMenu`点击显示。像这样：http: [//jsfiddle.net/duweP/2/](http://jsfiddle.net/duweP/2/)

# sql - 如何从现有表创建新表？

> ID：16000854
> 
> 赞同：1
> 
> 时间：2013-04-14T15:36:11.330
> 
> 标签：sql, sql-server, sql-server-2005

```
dbo.Profile_Updated
  (
     BusinessName VARCHAR,
     ContactName  VARCHAR,
     Address      VARCHAR,
     City         VARCHAR,
     State        VARCHAR,
     Postalcode   INT PRIMARY KEY,
     Phonenumber  VARCHAR
  ) 
```

这是我当前的表，但现在我想从现有`Profile_Updated`表列创建新表，我的意思是新表 ( `PostalDB`) 需要包含`City, State, Postalcode`基于`Profile_Updated`表的列。

谁能帮我？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T16:04:04.893

我假设你的意思是`SELECT INTO`：

```
SELECT City, State, Postalcode
  INTO dbo.PostalDB
  FROM dbo.Profile_Updated;

CREATE UNIQUE CLUSTERED INDEX p ON dbo.PostalDB(PostalCode);
CREATE INDEX ... -- you'll need to fill in these details 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T16:05:47.877

你做事的顺序不对。您应该首先创建并填充 PostalDB 表，并将 PostalDBId 之类的名称作为主键。PostalDBId 实际上应该没有意义。它不应该是邮政编码或类似的东西。

然后，您的 Profile_Updated 需要一个不同的主键，这与 PostalDB 表无关。您还需要另一个字段，它是 PostalDb 表的外键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T16:04:45.217

也许这会起作用：

```
SELECT DISTINCT City, State, Postalcode
INTO dbo.PostalDB
FROM dbo.Profile_Updated 
```

该`INTO`子句将使用源中的属性创建一个新表。A little web search 将揭示许多其他可能的解决方案。

# mysql - 准备 SQL 查询

> ID：16000855
> 
> 赞同：-1
> 
> 时间：2013-04-14T15:36:17.587
> 
> 标签：mysql, sql, sql-injection, parameterization

在我的 PHP 文档中，我得到一个如下所示的 SQL 查询：

```
if(isset($_GET['id']))
{
    $id = $_GET['id'];
    $q = "SELECT * FROM `objekt_t` WHERE `id`='" . $id . "'";
    $row = mysqli_query($con, $q) or die(mysqli_error($con));
    while($r = mysqli_fetch_assoc($row))
    {
        $objekt = $r;
    }
} 
```

我意识到这是关于 SQL 注入等非常不安全的做法，所以我一直在研究准备好的 SQL 查询，使用绑定参数。查看[bobby-tables.com](http://bobby-tables.com/php.html)我看到了这个示例查询：

```
$stmt = $db->prepare('update people set name = ? where id = ?');
$stmt->bind_param('si',$name,$id);
$stmt->execute(); 
```

我不明白我应该如何修改我当前的查询以匹配使用绑定参数的更安全的查询。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:42:37.300

准备好的语句将原始数据传输到查询，因此无法进行 SQL 注入。无需转义 for`real_escape_String`或任何其他格式化功能，因为它会为您完成。

例子：

```
$db = new mysqli ("host","user","password","database");
$statement = $db->prepare("SELECT test FROM test WHERE Username=?");
$statement->bind_param('s',$_POST['Username']);
$statement->execute();
$statement->bind_result($resultCol);
$statement->fetch();
$statement->close(); 
```

我基本上将我的 $_POST 数据直接绑定到查询，因为数据是作为原始数据发送的，所以即使查询包含注入形式，如 $_POST['username']; 查询将正常运行。

* * *

就过程和 OOP 风格而言，这取决于偏好，我个人更喜欢 OOP 风格而不是其他选项，因为它更具可读性。

处理数字：

```
$ID= 5;
$db = new mysqli ("host","user","password","database");
$statement = $db->prepare("SELECT test FROM test WHERE ID=?");
$statement->bind_param('i',$ID);
$statement->execute();
$statement->bind_result($resultCol);
$statement->fetch();
$statement->close(); 
```

或者您可以直接在语句中使用精确值：

```
$db = new mysqli ("host","user","password","database");
$statement = $db->prepare("SELECT test FROM test WHERE ID='5'");
$statement->execute();
$statement->bind_result($resultCol);
$statement->fetch();
$statement->close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T15:43:24.100

一样的方式

```
$mysqli = new mysqli("localhost", "my_user", "my_password", "db");

if(isset($_GET['id']))
{
    $id = $_GET['id'];
    $q = "SELECT some_field FROM `objekt_t` WHERE `id`= ?";

    if ($stmt = $mysqli->prepare($q)) {    
        $stmt->bind_param("i", $id);
        $stmt->execute();
        $stmt->bind_result($result);
        $stmt->fetch();
    }
} 
```

现在 $result 变量包含查询的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T15:49:42.880

你可以这样做：

```
$stmt = $mysqli->prepare('SELECT * FROM objekt_t WHERE id = ?');
$stmt->bind_param('i', $id);
$stmt->execute();

$result = $stmt->get_result();

while ($row = $result->fetch_assoc()) {
    // $row is an associative array
} 
```

# javascript - document.write 导致 Google Chrome 出现奇怪的行为

> ID：16000859
> 
> 赞同：1
> 
> 时间：2013-04-14T15:36:44.110
> 
> 标签：javascript, google-chrome

**[问题]**

与以下 JS 在同一页面上消失其他 JS 内容（facebook Like 按钮）。（仅限谷歌浏览器）此错误是由以下 JS 引起的。

**[问题]**

为什么会出现错误？而这个解决方案是对的吗？如果你有任何想法，你能告诉我吗？

我试图使“文本”具有没有 document.open() 和 document.close() 的 document.write() 部分。但是，它并没有导致其他 JS 内容消失。

**[目标代码]**

这个 javascript 在 iframe 中执行。然后，iframe 将在 iframe 中输出。

```
View.prototype.make_iframe = function(id, text) {
  var doc, iframe, isIE;
  iframe = document.createElement("iframe");
  iframe.width = 0;
  iframe.height = 0;
  iframe.id = id;
  document.body.appendChild(iframe);
  doc = iframe.contentWindow.document;
  /* Problem part start */
  doc.write("<html><head></head><body>");
  doc.write(text);
  doc.write("</body></html>");
  /* Problem part end */
};

 View.prototype.get_tag_files = function(dir, fname, data, make_iframe) {
  var xmlObj;
  xmlObj = null;
  if (window.ActiveXObject) {
    xmlObj = new ActiveXObject("Msxml2.XMLHTTP");
  } else {
    xmlObj = new XMLHttpRequest();
  }
  xmlObj.onreadystatechange = function() {
    var i, item, tag, text, _i, _len;
    if (xmlObj.readyState === 4 && xmlObj.status === 200) {
      text = xmlObj.responseText;
      tag = new Tag(data, text);
      tag.replace();
      return make_iframe(fname, tag.get_tag());
    }
  };
  xmlObj.open("GET", dir + fname, true);
  return xmlObj.send(null);
}; 
```

**[解决方案]**

```
 /* target part */
  doc.write("<html><head></head><body>");
  doc.write(text);
  doc.write("</body></html>");

  ==>

  /* replaced target part */
  isIE = /MSIE/.test(window.navigator.userAgent);
  if (!isIE) {
    doc.clear();
    doc.open;
  }
  doc.write("<html><head></head><body>");
  doc.write(text);
  doc.write("</body></html>");
  if (!isIE) {
    return doc.close();
  } else {
    return;
  } 
```

* * *

**致：第一位评论者**

谢谢您的答复。

我尝试使用 appendChild 函数。但是，它不起作用。“文本”变量有一些 HTML 和 JS 标记，可以从其他服务器获取数据。当我使用 appendChild 而不是 document.write 函数时，标签无法通过网络与其他服务器通信。我不知道原因。

此代码由咖啡脚本编译器生成。并且咖啡脚本代码有视图类，所以代码有原型。原始代码（咖啡脚本）如下。

```
Tag = require("../src/tag").Tag

class View
    constructor: (data) ->
        @validated = data
        @viewid = "product"

    make_iframe: (id,text) ->
        iframe = document.createElement("iframe")
        iframe.width = 0
        iframe.height = 0
        iframe.id = id
        document.body.appendChild(iframe)
        doc = iframe.contentWindow.document
        isIE = /MSIE/.test(window.navigator.userAgent)

        if !isIE
            doc.clear()
            doc.open
        doc.write("<html><head></head><body>")
        doc.write(text)
        doc.write("</body></html>")
        if !isIE
            return doc.close()
        else
            return

    get_tag_files: (dir,fname,data,make_iframe) ->
        xmlObj = null
        if window.ActiveXObject
            xmlObj = new ActiveXObject("Msxml2.XMLHTTP")
        else
            xmlObj = new XMLHttpRequest()
            xmlObj.onreadystatechange = ->
            if xmlObj.readyState == 4 && xmlObj.status == 200
                text = xmlObj.responseText
                tag = new Tag(data, text)
                tag.replace()
                make_iframe(fname,tag.get_tag())
            xmlObj.open("GET", dir+fname, true)
            xmlObj.send(null)

    output_tags: (tags, path) ->
        for tag in tags
            @get_tag_files(path, tag, @validated, @make_iframe)

        return """
               """

exports.View = View 
```

# batch-file - 重命名 5 个文件夹的批处理文件（替换）

> ID：16000862
> 
> 赞同：0
> 
> 时间：2013-04-14T15:37:00.913
> 
> 标签：batch-file

我想：

*   有 5 个文件夹 = 00、11、22、33、44（00 充当虚拟对象）

*   和 4 个批处理文件 = BF11、BF22、BF33、BF44

我启动 BF11 并将文件夹 11 变为 00，文件夹 00 变为 x11。

假设此时我启动 BF44 - 这需要：

*   将当前的 00 重命名回原来的 (11) [通过找到 x11 的存在？]

*   将 44 重命名为 00 并将 x11 重命名为 x44 [00 现在是 x44]

现在假设我启动 BF33，这需要：

*   将当前的 00 重命名为原来的 (44) [通过查找 x44 的存在？]

*   将 33 重命名为 00 并将 x44 重命名为 x33 [00 现在是 x33]

4 种组合中的每一种，依此类推。

我希望这是有道理的。这对批处理文件有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T16:42:37.923

The first part (renaming `00` appropriately) is straightforward: just use the appropriate `ren` command in each batch file.

You should be able to use this for the second part:

```
IF [NOT] EXIST filename command 
```

e.g.

```
IF EXISTS x11 rename x11 xXX
IF EXISTS x22 rename x22 xXX
... 
```

(where `xXX` depends on the batch file you're in, and you omit the line that would rename `xXX` to itself each time)

However, this all feels a little fragile and I wonder if there isn't a more robust solution to your underlying problem by using either a configuration management system or soft links.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T16:49:39.923

```
@ECHO OFF
SETLOCAL
cd /d "whereveryouwant"
FOR %%i IN (00 11 22 33 44) DO IF .%1==.%%i GOTO swap
ECHO invalid parameter&pause&GOTO :eof
:swap
FOR %%i IN (11 22 33 44) DO IF EXIST x%%i (
 REN 00 %%i
 IF %1==00 REN x%%i 00&GOTO :EOF 
 REN %1 00
 REN x%%i x%1
 GOTO :eof
)
IF %1==00 GOTO :EOF 
REN 00 x%1
REN %1 00
GOTO :EOF 
```

为了使它更容易，这里有一个批处理文件。编辑为 00, 11 等的父目录名后直接运行`thisbatch 11`（或`22`等）即可。`"whereveryouwant"`

它所做的第一件事是检查提供的参数是否有效，并回显错误消息，如果无效则暂停。

然后它寻找 x11..x44。如果它找到 say `x33`，它

*   更改`00`为`33`
*   改变（比方说`11`）`00`
*   将`x33`（假人）更改为`x11`
*   退出

如果找不到`x33`

*   改变`00`为（说）`x11`
*   更改`11`为`00`
*   出口

扭结用于`00`. 如果`00`作为参数提供，则它会查找 x11..x44。如果它找到 say `x33`，它

*   更改`00`为`33`
*   将`x33`（假人）更改为`00`
*   退出

但如果没有找到“x”目录，它什么也不做。

因此，输入“00”将恢复原始目录集 -`00`作为虚拟。

我一直使用“ `GOTO :EOF`” - 这是退出批次的正常方法。在您的情况下，您可能需要更改其中的每一个`EXIT`以关闭`CMD`窗口。

* * *

修订以允许用户输入

```
@ECHO OFF
SETLOCAL
CD /d "c:\wherever\your\directories\are"
SET selection=%1
IF DEFINED selection GOTO validate
:getfromuser
SET "selection="
SET /p selection="Please enter selection 11..44 : "
IF NOT DEFINED selection GOTO :eof
:validate
FOR %%i IN (00 11 22 33 44) DO IF .%selection%==.%%i GOTO swap
ECHO invalid selection %selection%&GOTO getfromuser
:swap
FOR %%i IN (11 22 33 44) DO IF EXIST x%%i (
 REN 00 %%i
 IF %selection%==00 REN x%%i 00&GOTO :EOF 
 REN %selection% 00
 REN x%%i x%selection%
 GOTO :eof
)
IF %selection%==00 GOTO :EOF 
REN 00 x%selection%
REN %selection% 00
GOTO :EOF 
```

本质上是相同的程序，除了如果未提供选择或提供了无效选择，将提示用户进行新选择。只需按回车键响应此提示将终止程序。

如果这是从快捷方式运行的，则将所有`GOTO :EOF`命令替换为`EXIT`

# windows-8 - WinRT C# - HttpRequestException：错误 500

> ID：16000863
> 
> 赞同：2
> 
> 时间：2013-04-14T15:37:01.033
> 
> 标签：windows-8, windows-runtime, dotnet-httpclient

我正在尝试将我的 WP8 应用程序移植到 Windows Store 应用程序，并且在执行 HttpClient 的 getStringAsync 时收到 HttpRequestException。

这是给我问题的代码片段：

```
HttpClient client = new HttpClient();
            Stream stream = await client.GetStreamAsync(new Uri("http://www.psnapi.com.ar/ps3/api/psn.asmx/getPSNID?sPSNID=philippemexes", UriKind.Absolute)); 
```

这是完整的异常消息：

> HttpRequestException：响应状态码不表示成功：500（内部服务器错误）。我不得不说，指定的 URL 可以在浏览器中运行，并且完全相同的代码也可以在 Windows Phone 项目中正常运行。

有谁知道将所需的 xml 转换为字符串的可能解决方案以及为什么这适用于 Windows Phone 而不适用于 WinRT 应用程序？

非常感谢斯特凡诺

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T02:27:46.827

[提琴手](http://fiddler2.com/home)是你的朋友！

当请求标头中没有传递用户代理字符串时，似乎服务不太高兴被调用。尝试添加：

```
client.DefaultRequestHeaders.Add("user-agent", "blah blah blah"); 
```

在你的两行代码之间。这部分没有什么神奇之处`blah blah blah`:)，它似乎适用于您的服务，但谁知道该服务对 UA 字符串的解释（如果有的话）。

# algorithm - 使用 m.file 的词搜索算法

> ID：16000868
> 
> 赞同：0
> 
> 时间：2013-04-14T15:37:55.983
> 
> 标签：algorithm, matlab, wordsearch

我已经在 Matlab 上使用多个字符串的单元格实现了我的算法，但我似乎无法通过读取文件来做到这一点。

在 Matlab 上，我为每一行创建字符串单元格，我们称它们为行。

所以我得到

```
 line= 'string1' 'string2' etc
     line= 'string 5' 'string7'...
     line=... 
```

等等。我有超过 100 行要阅读。

我想要做的是将第一行的单词与自身进行比较。然后将第一行和第二行合并，并将第二行中的单词与合并的单元格进行比较。我累积读取的每个单元格，并与读取的最后一个单元格进行比较。

这是我的代码

对于每一行 = a,b,c,d,...

```
for(i=1:length(a))
for(j=1:length(a))
  AA=ismember(a,a)
  end

  combine=[a,b]
  [unC,i]=unique(combine, 'first')
  sorted=combine(sort(i))

  for(i=1:length(sorted))
for(j=1:length(b))
  AB=ismember(sorted,b)
 end
 end

 combine1=[a,b,c] 
```

.....当我阅读我的文件时，我创建了一个while循环，它读取整个脚本直到结束，那么如果我的所有字符串单元格都具有相同的名称，我该如何实现我的算法？

```
 while~feof(fid)
    out=fgetl(fid)
    if isempty(out)||strncmp(out, '%', 1)||~ischar(out)
    continue
    end
    line=regexp(line, ' ', 'split') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:47:09.307

假设你的数据文件被调用`data.txt`并且它的内容是：

```
string1 string2 string3 string4
string2 string3 
string4 string5 string6 
```

仅保留第一个唯一事件的一种非常简单的方法是：

```
% Parse everything in one go
fid = fopen('C:\Users\ok1011\Desktop\data.txt');
out = textscan(fid,'%s');
fclose(fid);

unique(out{1})
ans = 
    'string1'
    'string2'
    'string3'
    'string4'
    'string5'
    'string6' 
```

如前所述，如果出现以下情况，此方法可能不起作用：

*   您的数据文件有违规行为
*   你实际上需要比较指数

**编辑：性能解决方案**

```
% Parse in bulk and split (assuming you don't know maximum 
%number of strings in a line, otherwise you can use textscan alone)

fid = fopen('C:\Users\ok1011\Desktop\data.txt');
out = textscan(fid,'%s','Delimiter','\n');
out = regexp(out{1},' ','split');
fclose(fid);

% Preallocate unique comb
comb = unique([out{:}]); % you might need to remove empty strings from here

% preallocate idx
m   = size(out,1);
idx = false(m,size(comb,2));

% Loop for number of lines (rows)
for ii = 1:m
    idx(ii,:) = ismember(comb,out{ii});
end 
```

请注意，结果`idx`是：

```
idx =
     1     1     1     1     0     0
     0     1     1     0     0     0
     0     0     0     1     1     1 
```

保持这种形式的好处是可以节省单元数组的空间（每个单元会产生 112 字节的开销）。您还可以将其存储为稀疏数组，以潜在地提高存储成本。

另一件需要注意的是，即使逻辑数组比索引的双数组长，只要超出的元素为假，您仍然可以使用它（并且通过上述问题的构造，idx 满足此要求） . 一个例子来澄清：

```
A = 1:3;
A([true false true false false]) 
```

# c# - C# MySql 强制阻塞模式

> ID：16000871
> 
> 赞同：0
> 
> 时间：2013-04-14T15:38:07.497
> 
> 标签：c#, mysql

我有以下代码：

```
static void InsertRes(string Data)
        {
            string query = "INSERT INTO results (gamenum,result) " + Data;
            query += ";";
            //open connection
            if (OpenConnection() == true)
            {
                //create command and assign the query and connection from the constructor
                MySqlCommand cmd = new MySqlCommand(query, connection);

                //Execute command
                cmd.ExecuteNonQuery();

                //close connection
                CloseConnection();
            }
        } 
```

我知道这不是最佳实践，但我在我的应用程序中生成数据，如何强制此函数阻塞，直到查询已在 mysql 数据库上成功执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:43:28.927

它会自动执行此操作。

`cmd.ExecuteNonQuery();`插入完成**后将**返回。

这是标准的编程行为。同时执行多项任务是很棘手的地方。一件一件地做一件又一件的事情是很正常的。只有在前一行完成时，您的程序才会继续执行下一行。

# c# - 如何使一个控件显示 C# 中任何派生类的属性？

> ID：16000879
> 
> 赞同：0
> 
> 时间：2013-04-14T15:39:04.707
> 
> 标签：c#, inheritance

这可能是一个简单的问题，但我正在努力解决这个问题。

我有两个派生自基类的类

```
class Base
{
  public int BaseProperty;
  ...
}

class A: Base
{
public int Property_derived;
...
}

Class B: Base
{
public int Property_derived;
...
} 
```

现在我有一个 UI 表单，它有一个文本框，应该显示派生类的属性（我保证所有派生类的属性的数量和数据类型都是相同的）我做了类似的事情：

```
textbox1.text = objectA.Property_derived; 
```

如何更改它以使其更通用，例如：

```
textbox1.text = objecttypedoesntmatter.Property_derived; 
```

这样我应该能够对任何派生类使用相同的用户界面。非常感谢任何帮助。非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T15:45:33.707

您需要做的是在基类中定义您的 Property_derived，从而将其作为所有派生类的共享契约的一部分。多态性是继承的属性，将调用派生的、覆盖的属性。但是请注意，这将适用于*属性*，而不是字段：

```
class Base
{
   public virtual int MyProperty {get { return 1;} }   
}

class A: Base
{
   public override int MyProperty { get { return 5; } }
}

class B: Base
{
   public override int MyProperty { get { retun 7; } }
} 
```

# jquery - wordpress 网站首页突然停止工作

> ID：16000885
> 
> 赞同：1
> 
> 时间：2013-04-14T15:39:47.880
> 
> 标签：jquery, plugins, slider, wordpress

我在 wordpress 网站上使用 minimatica 主题。它的首页幻灯片突然停止滑动。在控制台中，它给出错误“ReferenceError: jQuery is not defined”，文件“ [http://shuttersphotos.com/wp-includes/js/jquery/jquery.js?ver=1.8.3](http://shuttersphotos.com/wp-includes/js/jquery/jquery.js?ver=1.8.3) ”缺失/未找到错误。我通过替换相同的路径目录一次又一次地放置此文件，但仍然给出相同的控制台错误。我在本地服务器中尝试了相同的路径文件，文件打开。但在 wordpress 网站上，路径显示找不到页面。我被卡住了，无法找到解决方案。

我也尝试过停用所有已安装和激活的插件，但没有任何效果。:(

# php - 将带有数字和字母的排序字符串打印到文件中，寻找 preg_match 解决方案

> ID：16000894
> 
> 赞同：0
> 
> 时间：2013-04-14T15:40:20.997
> 
> 标签：php

好的，所以我有一个包含学生编号和相应姓名的文本文件。我想获取所有这些数据，正确格式化它们（大写，适当数量的空格等）并将它们放在另一个文件中。原文格式有点像这样：

```
20111101613 XXXXXXXX  , XXXX
20111121235 xxXXXX, xxxxxx
20111134234   XXXX, XxxX
20111104142 XXXXXxxxX, XXXX
20111131231 XX , XXXXXX 
```

示例：输入文件内容是这样的：

```
20111112346 Zoomba, Samthing
20111122953 Acosta, Arbyn
20110111241 Smith, John
20111412445 Over, Flow Stack
20111112345 foo, BAR 
```

并且输出文件内容应该是这样的：

```
20111122953 ACOSTA, ARBYN
20111112345 FOO, BAR
20111412445 OVER, FLOW STACK
20110111241 SMITH, JOHN
20111112346 ZOOMBA, SAMTHING 
```

编辑：有人可以给我一个提示或解决方案如何使用正则表达式制作这个函数吗？

```
function sortslist($infile, $outfile)
{
    // open the input file named conversion.txt
    $inptr = fopen($infile, "r");
    if (!$inptr)
    {
        trigger_error("File cannot be opened: $infile", E_USER_ERROR);
    }

    // initialize student number to zero
    $snum = 0;

    // number of letters in the name string
    $n = 0;

    // initialize the name string to be empty
    $name = "";

    // iteratively scan the input file
    $done = false;
    while (!$done)
    {
        // get each character in the file
        $c = fgetc($inptr);

        // if the character is a digit, add it to the student number
        if (ctype_digit($c))
        {
            $snum = (($snum * 10) + ($c - '0'));
        }

        // else, add to name string including commas and space. Input file might have tabs
        else if (ctype_alpha($c) || ($n > 0 && ($c == " " || $c == "\t")) || $c == ",")
        {
            // append the new character to name string
            $name .= $c;

            // add a space after the comma
            if ($c == ",")
            {
                $name .= " ";
                $n++;
            }

            // increment the number of letters
            $n++;
        }

        // end of the line
        else if ($c == "\n" || !$c)
        {
            // 0 is added to student numbers when newline is detected so neglect them
            if ($snum != 0 && $name != "\n")
            {
                // replace consecutive spaces with one space only
                $name = preg_replace(['/\s\s+/', '/\s,/', '/(\s*)(?>$)/'], [' ', ',', ''], $name);

                // record student number and name
                $info['snum'][] = $snum;
                $info['name'][] = strtoupper($name);
            }

            // reset the values needed
            $snum = 0;
            $n = 0;
            $name = "";

            // if we hit the end of the file then it is done
            if (!$c)
            {
                $done = true;
            }
        }
    }

    // sort the students names alphabetically
    array_multisort($info['name'], $info['snum']);

    // combine the name strings and there corresponding student number
    $i = 0;
    $students = [];
    $last_student = end($info['snum']);
    foreach ($info['snum'] as $snum)
    {
        $students[$snum] = $snum . " " . $info['name'][$i++];

        // update input file too
        fwrite($inptr, $students[$snum]);

        // don't add a newline to the end of the file
        if ($snum != $last_student)
        {
            $students[$snum] .= "\n";
        }
    }

    // put it into a new file called slist.txt
    file_put_contents($outfile, $students, LOCK_EX);

    // close the input file
    fclose($inptr);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T16:17:12.260

您的问题在于`$hashtable`字符串中的值首先与学生 ID 一起存储。`asort()`将始终查看值的开头，并根据该值进行排序。因此，为了按姓名排序，您必须将学生 ID 和姓名分成两个单独的数组，然后使用`array_multisort()`.

代替：

```
$hashtable[$snum] = $snum . " " . strtoupper($name) . "\n"; 
```

和：

```
$snums[] = $snum;
$names[] = strtoupper($name);

array_multisort($names, $snums);

$j = 0;
while ($names) {
    $hashtable[$snum] = $snums[$j]. " ". $names[$j]. "\n";
    $j++;
} 
```

# ios - 当委托设置时，ASIHTTPRequest 不保存 pdf 文件

> ID：16000897
> 
> 赞同：0
> 
> 时间：2013-04-14T15:40:38.133
> 
> 标签：ios, pdf, delegates, asihttprequest

我尝试从服务器下载 pdf，这是我的代码

```
ASIHTTPRequest *req = [ASIHTTPRequest requestWithURL:[NSURL URLWithString:[GlobalMethod convertURL:[NSString stringWithFormat:@"%@%@",SITE_IMAGE_URL,pview.nameLable.text]]]];
    NSString *documentDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
    // Add your filename to the directory to create your saved pdf location
    NSString *pdfLocation = [documentDirectory stringByAppendingPathComponent:@"test.pdf"];

    // TEMPORARY PDF PATH
    // Get the Caches directory
    NSString *cachesDirectory = [NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) lastObject];
    // Add your filename to the directory to create your temp pdf location
    NSString *tempPdfLocation = [cachesDirectory stringByAppendingPathComponent:@"test.pdf"];

    req.shouldContinueWhenAppEntersBackground = YES;
    req.delegate = self;
    req.downloadProgressDelegate = pview.progressView;
    [req setDidFinishSelector:@selector(requestDone:)];
    [req setDidFailSelector:@selector(requestWentWrong:)];
    [req setUserInfo:[NSDictionary dictionaryWithObjectsAndKeys:pview.nameLable.text,REQ_FILE_NAME, nil]];
    [req setTemporaryFileDownloadPath:tempPdfLocation];
    [req setDownloadDestinationPath:pdfLocation];
    [req startAsynchronous]; 
```

当委托设置为 self 时，它没有将文件保存到目标路径，但是当我评论此行时它可以正常工作

```
req.delegate = self; 
```

我真的需要设置代表我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T07:16:08.290

我发现了问题并解决了。这一切都是因为一个简单的if else。在

> ASIHTTPRequest.m

在

> -(void)handleBytesAvailable

方法你有这个代码

```
// Does the delegate want to handle the data manually?
        if (dataWillBeHandledExternally) {

            NSData *data = nil;
            if ([self isResponseCompressed] && ![self shouldWaitToInflateCompressedResponses]) {
                data = inflatedData;
            } else {
                data = [NSData dataWithBytes:buffer length:bytesRead];
            }
            [self performSelectorOnMainThread:@selector(passOnReceivedData:) withObject:data waitUntilDone:[NSThread isMainThread]];

        // Are we downloading to a file?
        }else if ([self downloadDestinationPath]) {
            BOOL append = NO;
            if (![self fileDownloadOutputStream]) {
                if (![self temporaryFileDownloadPath]) {
                    [self setTemporaryFileDownloadPath:[NSTemporaryDirectory() stringByAppendingPathComponent:[[NSProcessInfo processInfo] globallyUniqueString]]];
                } else if ([self allowResumeForFileDownloads] && [[self requestHeaders] objectForKey:@"Range"]) { 
```

当您在第二个 if 之前删除 else 并将其更改为

```
// Does the delegate want to handle the data manually?
            if (dataWillBeHandledExternally) {

                NSData *data = nil;
                if ([self isResponseCompressed] && ![self shouldWaitToInflateCompressedResponses]) {
                    data = inflatedData;
                } else {
                    data = [NSData dataWithBytes:buffer length:bytesRead];
                }
                [self performSelectorOnMainThread:@selector(passOnReceivedData:) withObject:data waitUntilDone:[NSThread isMainThread]];

            // Are we downloading to a file?
            }if ([self downloadDestinationPath]) {
                BOOL append = NO;
                if (![self fileDownloadOutputStream]) {
                    if (![self temporaryFileDownloadPath]) {
                        [self setTemporaryFileDownloadPath:[NSTemporaryDirectory() stringByAppendingPathComponent:[[NSProcessInfo processInfo] globallyUniqueString]]];
                    } else if ([self allowResumeForFileDownloads] && [[self requestHeaders] objectForKey:@"Range"]) { 
```

它与委托正常工作，也保存到这个

# android - 杀死其他应用程序

> ID：16000914
> 
> 赞同：-1
> 
> 时间：2013-04-14T15:42:00.607
> 
> 标签：android

我想在它打开时杀死短信应用程序。为此，我编写了一项服务。检查是否打开了短信应用程序。如果是，那么它会杀死它。我正在使用`ActivityManager`类。这是我的代码，但是当我启动短信应用程序时，它永远不会结束。为什么？可能吗 ？如果是，请提供帮助。

```
package com.example.activitymanager;

import java.util.List;

import android.app.ActivityManager;
import android.app.IntentService;
import android.content.Intent;
import android.os.Handler;
import android.util.Log;

public class Servicee extends IntentService {
    ActivityManager am;
    Handler handler = new Handler();
    Runnable r = new Runnable() {

        @Override
        public void run() {
            List<ActivityManager.RunningTaskInfo> list = am
                    .getRunningTasks(Integer.MAX_VALUE);
            for (ActivityManager.RunningTaskInfo task : list) {
                if (task.baseActivity.getPackageName()
                        .equals("com.android.mms")) {
                    am.restartPackage(task.baseActivity.getPackageName());
                }
            }
            handler.postDelayed(this, 5000);
        }
    };

    public Servicee() {
        super("");
    }

    @Override
    protected void onHandleIntent(Intent arg0) {
        am = (ActivityManager) getSystemService(ACTIVITY_SERVICE);
        handler.postDelayed(r, 2000);

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T17:11:24.877

我同意 Usman Riaz 的评论，但请记住，进程 ID 可能会因设备而异。我想监控特定应用程序的 tpc 流量，但 id 最终没有成功。您将杀死其他一些应用程序或使系统崩溃。

# linux - 控制台模式下 InstallAnywhere 的交互式 shell 脚本

> ID：16000915
> 
> 赞同：0
> 
> 时间：2013-04-14T15:42:04.043
> 
> 标签：linux, console, installanywhere

我在 Linux 的控制台模式下使用 InstallAnywhere 进行安装，并希望在完成安装后运行一些交互式 shell 脚本。“交互式”是指脚本应该提出一些问题并接收用户输入。

我尝试使用“执行目标文件”操作运行它，但脚本不会向控制台打印任何内容（它肯定会执行，因为将调试信息打印到输出文件）。我还尝试使用“fg %1”（这是 InstallAnywhere 中的最后一个命令）将脚本置于前台，但它也不起作用。

有没有办法在控制台模式下通过 InstallAnywhere 执行交互式脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T00:30:01.403

与其使用 shell 脚本进行用户交互，不如利用 IA 收集您需要的答案，将它们填充到 IA 变量中，然后在一个或多个“执行脚本/批处理文件”操作中使用这些变量来完成安装后的工作。

假设您想收集名字、姓氏和电话，然后将它们写入安装目录中的文件（我知道这是人为的，但希望是示范性的）。

1.  添加跳转标签并将其命名为“获取用户信息”
2.  添加控制台操作“获取用户输入”以读取名字。将结果分配给`$FIRST_NAME$`。
3.  添加控制台操作“获取用户输入”以读取姓氏。将结果分配给`$LAST_NAME$`。
4.  添加控制台操作“获取用户输入”以读取电话号码。将结果分配给`$PHONE_NUMBER$`。
5.  添加“跳转到目标”动作和“获取用户信息”的下一个跳转动作（#1，上面）。添加规则以验证这三个变量，以便`TRUE`结果将执行跳转到“获取用户信息”。换句话说，一个 BAD first name 或 BAD last name 或 BAD phone number 应该评估为`TRUE`。这会将用户发送回“获取用户信息”目标标签。三个有效值应评估为假，从而不执行跳转。我知道。有点奇怪。
6.  最后，根据需要为每个目标安装平台添加尽可能多的“执行脚本/批处理文件”操作。对于这些操作中的每一个，添加一条规则，将该操作的执行限制到特定平台。对于 Unix/Linux 操作，请务必选中“不要替换未知变量”复选框，否则 IA 会将您的脚本变量替换为空白。（注意事项：使用完整的变量名形式`${MY_VARIABLE_NAME}`来帮助 IA 将您的变量与其自己的变量区分开来）。

Unix/Linux 版本可能如下所示：

```
#!/bin/sh
echo <<EOF
Name: $FIRST_NAME$ $LAST_NAME$
Phone: $PHONE_NUMBER$
EOF > $USER_INSTALL_FOLDER$$/$userName.txt 
```

Windows 版本类似：

```
echo "Name: $FIRST_NAME$ $LAST_NAME$" > $USER_INSTALL_FOLDER$$/$userName.txt
echo "Phone: $PHONE_NUMBER$" >> $USER_INSTALL_FOLDER$$/$userName.txt 
```

请注意使用`$/$`哪个 IA 转换为当前平台的适当路径分隔符。

在“执行脚本/批处理文件”操作之后，您可以添加评估脚本/批处理文件是否成功的步骤。在“跳转到目标”操作上添加规则以评估`$EXECUTE_EXITCODE$`. `$EXECUTE_EXITCODE$`是“执行脚本/批处理文件”操作存储进程退出代码的默认变量。

现实生活中的安装脚本可能比这更复杂。您可以收集任意数量的变量并在任意数量的安装后脚本中使用它们。这些脚本然后专注于完成工作，而不是与用户交谈。那应该是IA的工作。

两个分手的想法：

首先，同样的技术也可以用于 GUI 安装程序。事实上，在同一个项目中混合 GUI 和控制台输入操作会将您的安装程序扩展到图形和控制台目标平台。无论您如何收集输入，安装后脚本都保持不变。

最后，您应该在预安装期间提出您的问题（如果可能）。这样，如果他们不能或不会回答问题，用户可以决定放弃安装。如果用户不愿意或无法提供您需要的信息，则在安装后提出问题可能会使安装挂起，或迫使用户回滚。

# windows-phone-7 - 绑定在 Windows Phone 7 中的自定义 UserControl 上不起作用

> ID：16000916
> 
> 赞同：0
> 
> 时间：2013-04-14T15:42:09.747
> 
> 标签：windows-phone-7, xaml, binding, user-controls

我有一个 XAML `UserControl`，它定义了一个相当基本的按钮 - 我想定义一个 Bindable 属性，该属性将在为 false`HasMeasurements`时显示覆盖图像。`HasMeasurements`但是，当我将它包含在我的项目中并将其绑定到 ViewModel 时，它不会持续更新。

我确信 ViewModel 正确地通知绑定，因为我同时将相同的 ViewModel 属性绑定到另一个单独的元素，并且它按预期更新。当我更新模拟数据时，它也适用于 Blend。

我已经尝试过[这个解决方案](https://stackoverflow.com/questions/6808670/windows-phone-7-silverlight-user-control-data-binding-not-working-on-custom-pro)，它定义了一个回调，我以编程方式更改可见性，但是每次 ViewModel 属性更改时都不会调用此回调，只是有时。我还尝试使用[此解决方案](https://stackoverflow.com/questions/5774995/windows-phone-7-xaml-getting-a-binding-to-work-with-the-container-of-my-objec)和一个也不起作用的非依赖属性绑定 XAML 中的可见性。我也尝试过`NotifyPropertyChanged`绝望地实施，但那里也没有运气......

这是我的 XAML，

```
<UserControl x:Class="MyApp.View.Controls.ConversionBtn"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:toolkit="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit"
    mc:Ignorable="d"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"
    d:DesignHeight="480" d:DesignWidth="480">

    <Grid x:Name="LayoutRoot" Background="{StaticResource PhoneChromeBrush}">

        <Grid x:Name="btnGrid" toolkit:TiltEffect.IsTiltEnabled="True" Height="115">
            <Border Background="{StaticResource ImgOverlayColor}" BorderThickness="0" Padding="0" VerticalAlignment="Top"  >
                <TextBlock x:Name="titleTxtBlock" FontSize="{StaticResource PhoneFontSizeMedium}" Foreground="{StaticResource TileTxtColor}" Margin="6,0,0,0"/>
            </Border>
            <Image x:Name="notAvailableImg" Source="/Images/ConversionNotAvailableOverlay.png" HorizontalAlignment="Center" VerticalAlignment="Center" Stretch="None" />
        </Grid>

    </Grid>
</UserControl> 
```

这是后面的代码，

```
// usings here ...

namespace MyApp.View.Controls
{
    public partial class ConversionBtn : UserControl
    {
        public ConversionBtn()
        {
            InitializeComponent();

            if (!TiltEffect.TiltableItems.Contains(typeof(ConversionBtn)))
                TiltEffect.TiltableItems.Add(typeof(ConversionBtn));

            //this.DataContext = this;
        }    

        public string Title
        {
            get { return this.titleTxtBlock.Text; }
            set { this.titleTxtBlock.Text = value; }
        }

        public static readonly DependencyProperty HasMeasurementsProperty =
            DependencyProperty.Register("HasMeasurements", typeof(bool), typeof(ConversionBtn),
            new PropertyMetadata(false, new PropertyChangedCallback(HasMeasurementsPropertyChanged)));

        private static void HasMeasurementsPropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            ConversionBtn cBtn = (ConversionBtn)d;
            bool val = (bool)e.NewValue;
            if (val)
            {
                cBtn.notAvailableImg.Visibility = Visibility.Collapsed;
            }
            else
            {
                cBtn.notAvailableImg.Visibility = Visibility.Visible;
            }
            cBtn.HasMeasurements = val;

        }

        public bool HasMeasurements
        {
            get { return (bool)GetValue(HasMeasurementsProperty); }
            set { SetValue(HasMeasurementsProperty, value); }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T16:45:50.237

您有一个回调，在`HasMeasurment`属性更改后调用。

并在回调中再次更改它。所以，你有一个逻辑错误。

如果您需要使用此值执行某些操作 - 只需将其保存在私有字段中。

```
 private static void HasMeasurementsPropertyChanged(DependencyObject d, 
DependencyPropertyChangedEventArgs e)
                {
                    ConversionBtncBtn = (ConversionBtn)d;
                    bool val = (bool)e.NewValue;
                    if (val)
                    {
                        cBtn.notAvailableImg.Visibility = Visibility.Collapsed;
                    }
                    else
                    {
                        cBtn.notAvailableImg.Visibility = Visibility.Visible;
                    }
                    cBtn.SetMeasurments(val); 

                }

            private bool measurmentsState;
            public void SetMeasurments(bool value)
            {
                measurmentsState = value;
            } 
```

[在这里](http://www.charlespetzold.com/phone/)，您可以获取 Charls Petzold 撰写的关于 Windows Phone 开发的免费电子书，其中有一章很好地介绍了 Dependency Properties。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T17:34:23.510

啊该死，这是安东的回答和我没有将我的图像设置为“内容”这一事实的结合，因此它在 Blend 中加载但在部署的应用程序中不存在。

# ios - 检测手指拖动 UIButton 何时与 UIImageView 重叠

> ID：16000918
> 
> 赞同：1
> 
> 时间：2013-04-14T15:42:28.517
> 
> 标签：ios, objective-c, uigesturerecognizer, uipangesturerecognizer

我正在使用在屏幕上`UIPanGestureRecognizer`拖动 a 。`UIButton`这个想法是用户可以将其拖到文件夹上以将其插入文件夹中（如 iOS 图标）。如果我想检测按钮何时与图像重叠，我发现这段代码可以正常工作：

```
-(void) touchesEnded:(NSSet *) touches {
if(CGRectIntersectsRect([imageViewA frame], [imageViewB frame]) {
  NSLog(@"Do something.");
}
  } 
```

但是由于按钮很大，并且有更多的图像并排放置，因此按钮可能会与它们重叠。因此，我想检测握住图像的实际用户手指何时`UIButton`与图像重叠以触发正确的动作。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T15:52:08.873

`UIGestureRecognizer`将识别平移，当它结束时，您可以使用[`locationInView:`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIGestureRecognizer_Class/Reference/Reference.html#//apple_ref/occ/instm/UIGestureRecognizer/locationInView%3a)在按钮的超级视图中查找手指的位置。然后您可以查看它们是否与 重叠[`CGRectContainsPoint(frame, point)`](https://developer.apple.com/library/mac/documentation/graphicsimaging/reference/CGGeometry/Reference/reference.html#//apple_ref/c/func/CGRectContainsPoint)：

```
- (void)handlePanGesture:(UIPanGestureRecognizer*)recognizer {
    if ([recognizer state] == UIGestureRecognizerStateEnded) {
        CGPoint fingerPoint = [recognizer locationInView:someImageView.superview];

        if (CGRectContainsPoint(someImageView.frame, fingerPoint)) {
              NSLog(@"Do something");
        }
    }
} 
```

# database - 以编程方式删除数据库表

> ID：16000922
> 
> 赞同：0
> 
> 时间：2013-04-14T15:42:58.387
> 
> 标签：database, jpa, eclipselink

我的应用程序使用 JPA 创建了数据库表。我想使用 JPA 和/或 EclipseLink API（不使用`DROP TABLE`命令）以编程方式删除这些表。删除 JPA 框架创建的数据库表的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:38:34.450

如果您能够使用 JPA 2.1，您可以指定提供程序写入或读取脚本以删除表，从而允许您控制执行的内容。不幸的是，除非您可以动态编写自己的放置表脚本，否则它不会给您提供精细的控制。

在不使用提供者特定代码的情况下，删除特定表的唯一其他方法是本机 SQL。

在 EclipseLink 中，您将从 EntityManager 获取会话并创建一个新的 SchemaManager(session)。有了它，您可以调用 dropDefaultTables() 删除持久性单元中的所有表，或使用 dropObject(DatabaseObjectDefinition) 删除用于表示表、存储过程等的单个 DatabaseObjectDefinition 对象。您可以使用 getDefaultTableCreator(boolean generateFKConstraints) 来获取PU 的默认表创建者。有了它，您可以使用 getTableDefinitions() 来获取代表 PU 中表的所有 DatabaseObjectDefinition 对象，因此您可以选择一个来删除。

[http://wiki.eclipse.org/EclipseLink/FAQ/JPA#How_to_access_table.2C_column_and_schema_information_at_runtime.3F](http://wiki.eclipse.org/EclipseLink/FAQ/JPA#How_to_access_table.2C_column_and_schema_information_at_runtime.3F) 展示了如何打开 EM 以获取会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-28T18:52:07.423

这对我有用（`EclipseLink JPA 2.1`）：

```
EntityManagerFactory emf = Persistence.createEntityManagerFactory("you persistence unit"); 
EntityManager em = emf.createEntityManager();
SchemaManager sm = new SchemaManager(em.unwrap(DatabaseSession.class));
sm.dropTable("table name"); 
```

# c# - 结构：字段必须完全分配编译器错误

> ID：16000925
> 
> 赞同：0
> 
> 时间：2013-04-14T15:43:07.227
> 
> 标签：c#, constructor, struct

我已经声明了以下结构：

```
struct StartPositions
{
    public Vector2 pacman;
    public Vector2[] ghosts;

    // Constructor accepts a Vector2, and an array of Vector2's.
    public StartPositions(Vector2 pacmanPosIn, Vector2[] ghostsPosIn)
    {
        pacman = pacmanPosIn;
        for(int a=0;a<ghostsPosIn.Length;a++)
        {
            ghosts[a] = ghostsPosIn[a];
        }
    }
} 
```

但是，我收到一个编译器错误，提示必须完全分配 ghosts 字段。我想要做的是在创建 StartPositions 对象时传入一个 Vector2 和一个 Vector2 数组 - 制作该数组的副本。

我怎样才能正确地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T15:45:34.030

您没有初始化`ghosts`数组。您需要添加对 的调用`new`。

```
public StartPositions(Vector2 pacmanPosIn, Vector2[] ghostsPosIn)
{
    pacman = pacmanPosIn;
    ghosts = new Vector2[ghostsPosIn.Length];
    ....
} 
```

您可以通过将`for`循环替换为对`Array.Copy()`.

```
Array.Copy(ghostsPosIn, ghosts, ghosts.Length); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T15:44:58.733

你必须先初始化你的`ghosts`数组：

```
struct StartPositions
{
    public Vector2 pacman;
    public Vector2[] ghosts;

    // Constructor accepts a Vector2, and an array of Vector2's.
    public StartPositions(Vector2 pacmanPosIn, Vector2[] ghostsPosIn)
    {
        pacman = pacmanPosIn;
        ghosts = new Vector2[ghostsPosIn.Length];
        for(int a=0;a<ghostsPosIn.Length;a++)
        {
            ghosts[a] = ghostsPosIn[a];
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T15:46:21.703

你没有初始化`ghosts`数组。

```
public StartPositions(Vector2 pacmanPosIn, Vector2[] ghostsPosIn)
{
    ...
    ghosts = new Vector2[ghostsPosIn.Length];
    ...
} 
```

来自[*C# 语言规范*](http://msdn.microsoft.com/en-us/library/vstudio/ms228593.aspx)；

> 实际的数组实例是在运行时使用 **new**运算符动态创建的。新操作指定**新数组实例的长度，** 然后在实例的生命周期内固定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T16:39:43.563

One annoying quirk in .net is that unless one is using "unsafe" code the concept of a value-type array does not exist. The struct as shown contains a position for the "pacman" and a reference to a mutable array that holds the positions of the ghosts. This is an evil combination, since the struct may appear to encapsulate the positions of the ghosts, but it does not. Thus, if one were to say:

```
StartPositions p1 = whatever();
... do some stuff
StartPositions p2 = p1;
p2.pacman.X += 3;
p2.ghosts[0].X += 3; 
```

the code would add three to `p2.pacman` and `p2.ghosts[0]`; it would not affect `p1.pacman.X` but *would* add three to `p1.ghosts[0]`. Such behavior would likely cause confusion.

If your intention is that `StartPositions` will be read-only, it should probably never expose the `ghosts` array directly; instead, `ghosts` should be a property of type `IList<Vector2>`, and your constructor should set it to something like a new `ReadOnlyList<Vector2>` initialized with a copy of the passed-in positions. If it does that, then `ghosts` can simply be a read-only property that returns such positions.

# php - php - 日志记录：在多个类中使用相同的对象

> ID：16000926
> 
> 赞同：0
> 
> 时间：2013-04-14T15:43:09.013
> 
> 标签：php, oop, inheritance, parent

我已经坐了很多年了，无法找到让我满意的方法。

我的问题：我有一个父类和各种子类。在父级的构造函数中，创建了一个新对象（除其他外）。这个对象来自我的日志文件类。它存储在受保护的变量中。

在父类中，日志保存不是问题，一切都按计划进行。

如果我想在子类中使用该对象，我无法让它工作。我只是无法访问它。我在父类中尝试了一个函数以返回对象，这也不起作用。

我在这里不知所措。

这是父级的构造函数：

```
function __construct() {
...   
 $this->reg_log_file = new log_file(bef_registration::REG_LOG_NAME, bef_registration::REG_LOG_KEEPING);
...
} 
```

为了创建新条目，在父类中，以下内容就足够了：

```
$this->reg_log_file->entry('start log'); 
```

在子类中，这将导致错误：

> 在非对象上调用成员函数 entry()

在谷歌搜索和阅读几个小时之后，我仍然没有想出一个正确的方法来做到这一点。

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:50:15.800

您应该`parent::__construct();`在每个子构造函数的主体中运行，并且日志对象将被实例化并在所有继承的子类中可见。

# java - 多个 JList 选定的索引相互破坏

> ID：16000933
> 
> 赞同：-1
> 
> 时间：2013-04-14T15:43:39.737
> 
> 标签：java, swing, user-interface, jlist, selectedindexchanged

我有一个简单的界面，旨在选择剧院中的一个或多个座位并为自己保留。

我有三列：区域/行/座位。您选择第一个填充第二个，选择第二个填充第三个。

当我第一次选择它们时没有问题。

![第一次在所有三列中选择了一个项目](https://i.stack.imgur.com/5UbXG.png)

如果我更改第二排，第三排会重新填充（在这种情况下，所有排都有相同数量的座位）它不会中断！

![在第二列中选择了一个新项目](https://i.stack.imgur.com/oq7yq.png)

但是，如果我更改第一行，一切都会中断！

![在第一列中选​​择了一个新项目](https://i.stack.imgur.com/OENpZ.png)

现在原因很清楚，但我不明白为什么会这样。

这是第一个列表事件触发器：

```
List_Zona.addListSelectionListener(new ListSelectionListener() {
            public void valueChanged(ListSelectionEvent arg0) {
                if (! arg0.getValueIsAdjusting()){

                    RowListModel.clear(); // second list
                    SeatListModel.clear(); // third list
                    List_Rand.clearSelection(); // second list
                    List_Scaun.clearSelection(); // third list

                    int[] rows = self.repository.getRowsForZone(
                              List_Zona.getSelectedValue().toString()
                    );
                    int index = 0;
                    while (rows[index]!=0) {
                          RowListModel.addElement(String.valueOf(rows[index]));
                          index++;
                    }
                }
            }
        }); 
```

它应该清除其他列选择，因此它不应该干扰下一个触发器（第二列），但显然它确实如此，或者发生了一些我没有得到的事情：

```
List_Rand.addListSelectionListener(new ListSelectionListener() {
            public void valueChanged(ListSelectionEvent arg0) {
                if (! arg0.getValueIsAdjusting()){

                    SeatListModel.clear();

                    int[] seats = self.repository.getSeatByZoneAndRow(
                          List_Zona.getSelectedValue().toString(),
                          Integer.parseInt(List_Rand.getSelectedValue().toString())//HERE
                    );
                    int index = 0;
                    while (seats[index]!=0) {
                        SeatListModel.addElement(String.valueOf(seats[index]));
                        index++;
                    }
                }
            }
        }); 
```

它无法解析整数，因为第二列应该被清除，但不是吗？但即使它不是......它是？

我想说的是：第二列应该清楚（不是），但如果不是，那么错误就不应该发生，但确实如此。

我希望这有点道理！

谁能发现问题？我应该提供更多代码吗？

错误是第二列的 NullPointerException，因为那里发生了一些可疑的事情（再次：在整数解析中）。

**在我看来**，当我单击第一列中的一个项目时，第二列`valueChanged`根本不应该触发。它应该只是清除其他两个，就是这样。为什么我错了？

**PS** First Code 片段负责破坏程序的第二个代码片段。

**也许我还应该改写这个问题**，当我重新选择一个新的“区域”（Zona）时，如何安全地清除所有内容 - 第一列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T16:11:30.963

第一个侦听器清除 的选择`List_Rand`。这使得选择发生了变化：它从“选择了索引 i”变为“未选择索引”，因此调用了第二个侦听器。在第二个侦听器中，您尝试对 . 的选定值调用方法`List_Rand`。由于您刚刚清除了选择，因此不再有选择的值，因此出现 NullPointerException。

旁注：您的代码很难阅读，因为它不遵守 Java 命名约定。变量以小写字母开头，并且是驼峰式（名称中没有下划线）。

另一边注：打电话有什么意义`parseInt(selectedValue.toString())`？如果列表包含 Integer 实例，则将值直接转换为 Integer。如果它包含字符串，那么为什么不存储整数，因为这是您希望列表包含的内容？

# javascript - 需要获取我的页面的 ID 标签并显示它们以用于 Chrome 扩展

> ID：16000935
> 
> 赞同：0
> 
> 时间：2013-04-14T15:43:51.897
> 
> 标签：javascript, google-chrome

我找不到任何与我类似的问题，所以我决定问，我如何从我自己的网站上获取一些图片，它们都有 id 标签`post_p`。

我假设我必须使用：

```
XMLHttpRequest 
```

但是我是通过客户端还是通过我的网站获取我的页面内容？我在这里有点不知所措。帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:48:51.640

要通过它的 ID 获取元素，请执行以下操作：

```
document.getElementById("id"); 
```

或作为一个函数：

```
var ge = function(id){
    return document.getElementById(id);
}

var element1 = ge("element1"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T15:52:32.963

Chrome 扩展程序在本地（即客户端）运行，因此研究服务器端获取 id 的方法是毫无意义的。如果你想获取 DOM 中所有图像的 id，这可以很容易地完成，如下所示：

```
var allIds = [],
allImgs = document.getElementsByTagName('img');//returns a array-like object, referencing all img elements

for (var i=0;i<allImgs.length;i++)
{
    allIds.push(allImgs[i].id);
} 
```

如果您不需要扫描整个 DOM，您可以选择要查看的特定（块）元素：

```
var allImgs = document.getElementById('container').getElementsByTagName('img');
//the rest is the same... 
```

只是个人说明：不确定在掌握 JS 基础知识之前陷入 AJAX 调用和 chrome 扩展是否是最好的想法，不过……但还是祝你好运

# python - 你好世界！在 Python + Glade 2

> ID：16000938
> 
> 赞同：0
> 
> 时间：2013-04-14T15:44:08.213
> 
> 标签：python, glade

gui.glade：

```
<?xml version="1.0" encoding="UTF-8"?>
<interface>
  <!-- interface-requires gtk+ 3.0 -->
  <object class="GtkWindow" id="window">
    <property name="can_focus">False</property>
    <signal name="destroy" handler="on_window_destroy" swapped="no"/>
    <child>
      <object class="GtkLabel" id="label">
        <property name="width_request">250</property>
        <property name="height_request">100</property>
        <property name="visible">True</property>
        <property name="can_focus">False</property>
        <property name="label" translatable="yes">Hello, World!</property>
      </object>
    </child>
  </object>
</interface> 
```

gui.py：

```
#!/usr/bin/env python

import sys
try:
    import pygtk
    pygtk.require("2.0")
except:
    pass
try:
    import gtk
    import gtk.glade
except:
    sys.exit(1)

class GTKWindow:
    def __init__(self):
        self.wTree = gtk.glade.XML("gui.glade")
        self.window = self.wTree.get_widget("window")

        if (self.window):
            self.window.connect("on_window_destroy", gtk.main_quit)

        gtk.main()

if __name__ == "__main__":
    window = GTKWindow() 
```

终端错误：

```
(gui.py:4504): libglade-WARNING **: Expected <glade-interface>.  Got <interface>.

(gui.py:4504): libglade-WARNING **: did not finish in PARSER_FINISH state
Traceback (most recent call last):
  File "gui.py", line 26, in <module>
    window = GTKWindow()
  File "gui.py", line 17, in __init__
    self.wTree = gtk.glade.XML("gui.glade")
RuntimeError: could not create GladeXML object 
```

我确保将 glade 文件保存在 Libglade 下，但是我无法让项目运行（请参阅上面终端中的错误）。我已经尝试使用 gtk.Builder 并且即使我将 glade 文件保存在 GtkBuilder 文件下也没有任何反应。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:40:24.167

我对您的代码进行了一些更改。我希望对你有所帮助。

**桂格莱德**

```
 <?xml version="1.0" encoding="UTF-8"?> <glade-interface>   <!--
 interface-requires gtk+ 2.24 -->   <!-- interface-naming-policy
 project-wide -->   <widget class="GtkWindow" id="window">
     <property name="visible">True</property>
     <property name="can_focus">False</property>
     <signal name="destroy" handler="on_window_destroy" after="yes" swapped="no"/>
     <child>
       <widget class="GtkLabel" id="label1">
         <property name="visible">True</property>
         <property name="can_focus">False</property>
         <property name="label" translatable="yes">Hello, World!</property>
       </widget>
     </child>   </widget> </glade-interface> 
```

**gui.py**

```
import sys
try:
    import pygtk
    pygtk.require("2.0")
except:
    pass
try:
    import gtk
    import gtk.glade
except:
    sys.exit(1)

class GTKWindow():
    def __init__(self):
        self.wTree = gtk.glade.XML("gui.glade")        
        dict = {
          "on_window1_destroy": self.destroy,                   
          }   
        self.wTree.signal_autoconnect(dict)
    def destroy(self,*args):
        gtk.main_quit()

#    def    
if __name__ == "__main__":
    window = GTKWindow()
gtk.main() 
```

# java - 检查字符串是否符合正则表达式要求

> ID：16000939
> 
> 赞同：0
> 
> 时间：2013-04-14T15:44:21.870
> 
> 标签：java, regex

您好我正在尝试检查输入字符串是否已更正但是我遇到了一些问题

```
 String pattern = "[a-zA-z\\s]+";
 String string="Richard Lin";
 System.out.println(string.matches(pattern)); 
```

这将打印出 true 但是如果我的字符串是 string="Richard Lin" （更多空格）它仍然返回 true。有没有办法检测到这个？？？我不想检查其中是否有数字并且我的字符串包含超过 2 个元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T15:47:09.547

您可以匹配单个单词：

```
String pattern = "\\p{Alpha}{3,} \\p{Alpha}{3,}"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T15:51:56.897

如果你想接受字符串之类`"a Bcd"` `"Ab dcE f"`的，你可以使用

```
[a-zA-Z]+(\\s[a-zA-Z]+)+ 
```

*   `[a-zA-Z]+`将匹配诸如`"a"` `"xYZ"` `"something"`
*   `\\s[a-zA-Z]+`将匹配前面有空格的单词
*   `(\\s[a-zA-Z]+)+`将匹配前面有空格的连续单词，例如`" one"`, `" one two"`, `" some sentence with lot of words that have space at start"`.

# php - PHP 通过 Internet 检查文件大小

> ID：16000941
> 
> 赞同：0
> 
> 时间：2013-04-14T15:44:24.143
> 
> 标签：php

如何通过互联网检查文件大小？下面的示例是我的代码不起作用

```
echo filesize('http://localhost/wordpress-3.1.2.zip');
echo filesize('http://www.wordpress.com/wordpress-3.1.2.zip'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T15:48:23.980

filesize 函数用于获取本地存储文件的大小。* 对于远程文件，您必须找到其他解决方案，例如：

```
<?php
function getSizeFile($url) {
    if (substr($url,0,4)=='http') {
        $x = array_change_key_case(get_headers($url, 1),CASE_LOWER);
        if ( strcasecmp($x[0], 'HTTP/1.1 200 OK') != 0 ) { $x = $x['content-length'][1]; }
        else { $x = $x['content-length']; }
    }
    else { $x = @filesize($url); }

    return $x;
}
?> 
```

来源：请参阅下面链接中的第一个帖子评论

[http://php.net/manual/en/function.filesize.php](http://php.net/manual/en/function.filesize.php)

*好吧，老实说，自从 PHP 5 以来，有一些文件函数的包装器，请参见此处：

[http://www.php.net/manual/en/wrappers.php](http://www.php.net/manual/en/wrappers.php)

你可以找到更多的例子，甚至在这里，这应该满足你的需求：[PHP：远程文件大小，无需下载文件](https://stackoverflow.com/questions/2602612/php-remote-file-size-without-downloading-file)

**下次提问前尝试使用搜索功能！**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T15:46:34.920

试试这个功能

```
<?php
    function remotefsize($url) {
        $sch = parse_url($url, PHP_URL_SCHEME);
        if (($sch != "http") && ($sch != "https") && ($sch != "ftp") && ($sch != "ftps")) {
            return false;
        }
        if (($sch == "http") || ($sch == "https")) {
            $headers = get_headers($url, 1);
            if ((!array_key_exists("Content-Length", $headers))) { return false; }
            return $headers["Content-Length"];
        }
        if (($sch == "ftp") || ($sch == "ftps")) {
            $server = parse_url($url, PHP_URL_HOST);
            $port = parse_url($url, PHP_URL_PORT);
            $path = parse_url($url, PHP_URL_PATH);
            $user = parse_url($url, PHP_URL_USER);
            $pass = parse_url($url, PHP_URL_PASS);
            if ((!$server) || (!$path)) { return false; }
            if (!$port) { $port = 21; }
            if (!$user) { $user = "anonymous"; }
            if (!$pass) { $pass = "phpos@"; }
            switch ($sch) {
                case "ftp":
                    $ftpid = ftp_connect($server, $port);
                    break;
                case "ftps":
                    $ftpid = ftp_ssl_connect($server, $port);
                    break;
            }
            if (!$ftpid) { return false; }
            $login = ftp_login($ftpid, $user, $pass);
            if (!$login) { return false; }
            $ftpsize = ftp_size($ftpid, $path);
            ftp_close($ftpid);
            if ($ftpsize == -1) { return false; }
            return $ftpsize;
        }
    }
?> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-14T15:46:47.707

我认为这可能是不可能的。最好的方法是通过下载文件`file_get_contents`，然后在文件上使用`filesize`。您以后也可以删除该文件！

# android - 如何在 Android 上获得 3D 手风琴效果

> ID：16000943
> 
> 赞同：1
> 
> 时间：2013-04-14T15:44:30.997
> 
> 标签：android, canvas, matrix, 3d, accordion

我计划将在 iOS ( [https://github.com/xyfeng/XYOrigami](https://github.com/xyfeng/XYOrigami) ) 上发现的出色 3D 手风琴效果移植到 Android 上。

到目前为止，我有一些非常接近的东西，这是一个带有“pinch-to-fold”折叠视图的屏幕截图：http: [//imageshack.us/photo/my-images/822/3daccordion.png](http://imageshack.us/photo/my-images/822/3daccordion.png)

如您所见，它仍然是两个相对“面板”之间的空间。过程很简单：

1.  取主布局的画布
2.  创建一个自定义表面视图，它将替换布局的所有视图
3.  将拍摄的画布设置为背景图像
4.  将此画布切割成 X 个面板（此处为 16 个）
5.  使用计算矩阵重绘所有“面板”的表面视图
6.  捏合时重新计算矩阵以产生“折叠效果”

这是变换矩阵：

```
private Matrix getFoldingMatrix(int angle, int startFrom,int position) {
    int move = (int) (
        (mWidth - (Math.cos(angle * Math.PI / 180) * mWidth)) * position
    ) +1*position; //overlap of 1px the panels and not get space between panels

    final Camera camera = new Camera();
    final Matrix matrix = new Matrix();
    camera.save();

    camera.rotateY(angle);
    camera.getMatrix(matrix);

    if(position%2==1){
        move += (int) (
            (mWidth - (Math.cos(angle * Math.PI / 180) * mWidth))
        ) ;
        matrix.preTranslate(-mWidth, -mHeight/2);
        matrix.postTranslate(startFrom+mWidth-move, mHeight/2);
    } else {
        matrix.preTranslate(0f, -mHeight/2);
        matrix.postTranslate(startFrom-move, mHeight/2);
    }
    camera.restore();

    return matrix;
} 
```

我做错了什么？为什么相对的“面板”之间仍然存在这些空间？

# r - R中的plotCI为数千个点

> ID：16000951
> 
> 赞同：0
> 
> 时间：2013-04-14T15:45:35.577
> 
> 标签：r, plot, ggplot2

我想知道是否有人对如何在 R 中为数千个点绘制 CI 有很好的建议。我想为每个点绘制 CI，然后在顶部（模拟数据）上绘制 TRUE 值，以检查我的预测在预测 CI 内的次数。

我认为这个情节：[Plotting Confidence Intervals](https://stackoverflow.com/questions/14069629/plotting-confidence-intervals/14069837#14069837)可能会提供一个好的开始，但我也必须在其中添加 TRUE 值。

欢迎提出想法。

谢谢！

# java - Z3：检查模型是否唯一

> ID：16000953
> 
> 赞同：4
> 
> 时间：2013-04-14T15:45:45.817
> 
> 标签：java, z3, assertions, smt, quantifiers

Z3 中是否有办法证明/显示给定模型是唯一的并且不存在其他解决方案？

一个小例子来演示

```
(declare-const a1 Int)
(declare-const a2 Int)
(declare-const a3 Int)
(declare-const b1 Int)
(declare-const b2 Int)
(declare-const b3 Int)
(declare-const c1 Int)
(declare-const c2 Int)
(declare-const c3 Int)
(declare-const ra Int)
(declare-const rb Int)
(declare-const rc Int)
(declare-const r1 Int)
(declare-const r2 Int)
(declare-const r3 Int)
(assert (>= a1 0))
(assert (>= a2 0))
(assert (>= a3 0))
(assert (>= b1 0))
(assert (>= b2 0))
(assert (>= b3 0))
(assert (>= c1 0))
(assert (>= c2 0))
(assert (>= c3 0))
(assert (<= a1 9))
(assert (<= a2 9))
(assert (<= a3 9))
(assert (<= b1 9))
(assert (<= b2 9))
(assert (<= b3 9))
(assert (<= c1 9))
(assert (<= c2 9))
(assert (<= c3 9))
(assert (= ra 38))
(assert (= rb 1))
(assert (= rc 27))
(assert (= r1 55))
(assert (= r2 72))
(assert (= r3 6))
(assert (= ra (- (* a1 a2) a3)))
(assert (= rb (- (- b1 b2) b3)))
(assert (= rc (* (* c1 c2) c3)))
(assert (= r1 (- (* a1 b1) c1)))
(assert (= r2 (* (+ a2 b2) c2)))
(assert (= r3 (- (+ a3 b3) c3)))
(check-sat)
(get-model) 
```

我知道以下模型是独一无二的，但我可以使用一些 Z3 选项或添加断言来确保这一点吗？

```
(model 
  (define-fun c3 () Int
    3)
  (define-fun c2 () Int
    9)
  (define-fun c1 () Int
    1)
  (define-fun b3 () Int
    5)
  (define-fun b2 () Int
    2)
  (define-fun b1 () Int
    8)
  (define-fun a3 () Int
    4)
  (define-fun a2 () Int
    6)
  (define-fun a1 () Int
    7)
  (define-fun r3 () Int
    6)
  (define-fun r2 () Int
    72)
  (define-fun r1 () Int
    55)
  (define-fun rc () Int
    27)
  (define-fun rb () Int
    1)
  (define-fun ra () Int
    38)
) 
```

为了澄清起见，我通过 de JAVA API 使用 Z3

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T16:17:26.247

是的：想法是断言找到的模型分配的值是唯一可能的分配，因此它是唯一的。这可以通过添加一个断言来完成，该断言声明所有常量都不等于它们分配的模型值。

对于您的示例，这将是：

```
(assert (not (and
  (= c3 3)
  (= c2 9)
  (= c1 1)
  (= b3 5)
  (= b2 2)
  (= b1 8)
  (= a3 4)
  (= a2 6)
  (= a1 7)
  (= r3 6)
  (= r2 72)
  (= r1 55)
  (= rc 27)
  (= rb 1)
  (= ra 38))))
(check-sat) ; unsat => no other model exists 
```

如果您尝试更改任何值（例如，将 c3 = 3 更改为 c3 = 4），这将再次变得令人满意。这是您完整示例的rise@fun 链接：[http ://rise4fun.com/Z3/nD5n](http://rise4fun.com/Z3/nD5n)

有关如何使用 API 以编程方式执行此操作的更多详细信息，请参阅以下问题和答案：

[Z3：找到所有满意的模型](https://stackoverflow.com/questions/13395391/z3-finding-all-satisfying-models)

[(Z3Py) 检查方程的所有解](https://stackoverflow.com/questions/11867611/z3py-checking-all-solutions-for-equation)

请注意，根据第二个链接答案中的评论，您不能仅使用 SMT-lib 前端以编程方式执行此操作，如果您想自动执行此过程，则必须使用 API 遍历找到的模型。

# php - 在 PayPal 付款后保持会话活跃

> ID：16000954
> 
> 赞同：0
> 
> 时间：2013-04-14T15:45:50.240
> 
> 标签：php, mysql, session

我创建 PHP 会话以将用户电子邮件存储在“submit.php”中，在重定向到贝宝之前，我使用 MySQL 将该用户信息注册到数据库中。这是在“submit.php”中创建会话的代码：

```
session_start();
$_SESSION['user-email']=$email; 
```

所以现在用户在 PayPal 成功支付并转到“thankyou.php”，我想更新我的数据库，说用户支付并调用 PHP 会话：

```
session_start();
    $email = $_SESSION['user-email'];
    $con = mysql_connect("host.host.com","root","password");
    if (!$con) { die('Could not connect: ' . mysql_error()); }
    mysql_select_db("somedatabase", $con);

    $sql="UPDATE myTable SET status=1 WHERE email='$email'";
    if (!mysql_query($sql,$con)) { die('Error: ' . mysql_error()); }
    mysql_close($con); 
```

是 $_SESSION['user-email']; 这个时候还活着吗？我有什么错误吗？为什么你认为我的代码不能正常工作？

提前致谢

# ajax - 为什么不能在ajax中动态创建图标？

> ID：16000956
> 
> 赞同：0
> 
> 时间：2013-04-14T15:46:08.573
> 
> 标签：ajax, dynamic, getjson, popover, dynamic-content

通常，当我写以下内容时：

```
 <a id="sta_numberOfIcons" class="icon-user" rel="popover"></a> 
```

和js：

```
 $("a[rel=popover]").each(function(){

    $(this).popover({
        trigger: 'hover',
        placement: 'top',
        html: true,
        title:"Passenger Info",
        content: "content "+$(this).attr('id') 
    })
    .click(function(e) {
        e.preventDefault()
    });

  }); 
```

它可以工作，我可以看到图标的弹出框。但是当我编写以下代码时，动态创建图标，但我无法显示新创建的图标的弹出框。

html部分：

```
Stations:
 <select name="selectStation" id="selectStation" onchange="sta_callStation(this);"></select>

      <a id="sta_numberOfIcons" class="icon-user" rel="popover"></a>
      <div id="infoOfPassengers"></div>
      <div id="distType"></div>
      <div id="distParams"></div> 
```

在 Stations 组合框中，选项在页面加载时填充。它们正常填充。

js函数用于从php获取乘客数量，并相应地创建图标：

```
function sta_callStation(sel){
 $('#noOfPassengers, #infoOfPassengers, #distType,#distParams').empty();
   $('#sta_numberOfIcons').empty();
      $.getJSON('Stations.php', function(station){

        $.each(station, function(sta_key, sta_value) {

        if(sel.value==sta_key)
        {
          $.each(sta_value.passengers, function(j,passengers) 
        {

         var pas_icon = document.createElement("a");

          pas_icon.className ='icon-user';
          pas_icon.id='id_'+j;

          pas_icon.setAttribute('href', '#');
          pas_icon.setAttribute('rel', 'popover');
          //alert('id_'+(j));
          var empty=document.createElement("a");
          empty.appendChild(document.createTextNode(" "));
          document.getElementById('sta_numberOfIcons').appendChild(pas_icon);

          document.getElementById('sta_numberOfIcons').appendChild(empty);

      });
        }

  });

  });
  } 
```

图标出现在组合框下的页面中。我只是尝试，我不知道如何将新创建的图标插入标签。我只是将新创建的图标附加到标签。这里有什么问题？为什么我不能为创建的图标显示弹出框？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T16:11:30.823

在您动态添加图标**后**`popover`，您拥有的成功连接for 元素的 JS 代码`$("a[rel=popover]")`需要执行。

 **您可以将这些行粘贴到逻辑的末尾，`sta_callStation()`但最好将它们放入自己的函数中并从`sta_callStation()`.

就像是：

```
function bindMyPopovers() {
    $("a[rel=popover]").each(function(){
    $(this).popover({
        trigger: 'hover',
        placement: 'top',
        html: true,
        title:"Passenger Info",
        content: "content "+$(this).attr('id') 
    })
    .click(function(e) {
        e.preventDefault()
    });

  });

} 
```**

# clearcase - ClearCase 中的配置规范

> ID：16000958
> 
> 赞同：3
> 
> 时间：2013-04-14T15:46:11.933
> 
> 标签：clearcase, config, cleartool, specifications

我对 ClearCase 有一点疑问。请帮帮我！配置规范什么时候开始起作用？当我单击 CHECK OUT 或 CHECK IN 时？我有`test.c`并且我有配置规范

```
element * CHECKEDOUT
element * .../branch_1/LATEST
element * /main/LATEST -mkbranch branch_1 
```

然后我修改`test.c`，然后我更改配置规范：

```
element * CHECKEDOUT
element * .../branch_2/LATEST
element * /main/LATEST -mkbranch branch_2 
```

然后我签入`test.c`，我有： created `/main/branch_1/1`。但为什么？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T15:55:57.753

配置规范将在每次更新、结帐和签入时应用规则（但不是您想象的那样）。

签入时，新版本将在已签出的分支中创建（此处**`branch_1`**）。
新配置规范可能不会*选择*该新版本，但已签出它的分支不会被所述新配置规范更改。

`branch1`在已经*签*出 (in )`branch2`时更改不会改变任何内容。它将被签入。`test.c`*`branch1``branch_1`*

 *现在您将`branch1`在签入时创建一个版本`test.c`（即使使用您的第二个配置规范），您需要意识到所有未来的签出/签入都将在相同的分支上进行`test.c`，因为：

*   该规则`element * branch_1/LATEST`将在该分支上保留新版本
*   该规则`element * /main/LATEST -mkbranch branch_2`仅对从 main 签出的版本有效（并且 test.c 不再启用，`/main`它已启用`branch1`：）`/main/branch1`

此配置规范将确保所有新版本（在第一次签入`test.c`on之后`branch1`）都在以下时间完成`branch2`：

```
element * CHECKEDOUT
element * .../branch_2/LATEST
element * ../branch_1/LATEST  -mkbranch branch_2
element * /main/LATEST -mkbranch branch_2 
```

规则的*顺序*很重要，因为可以应用的第一个“获胜”（即忽略其他规则）。[请参阅“配置规范以显示来自 2 个分支的标记文件](https://stackoverflow.com/a/8735144/6309)
”中的配置规范的具体示例。

* * *

请注意，在第一次签入后`test.c`，您将获得一个在 上创建的新版本`branch1`，如前所述。

然而，您的第二个配置规范将选择`/main/1`，而不是`/main/branch1/1`.

这是因为您的第二个配置规范中的规则不正确：

```
element * branch_1/LATEST 
```

这将选择正确的版本：

```
element * .../branch_1/LATEST 
```

但是，如果您的第二个配置规范没有关于 的规则`branch1`，`test.c`仍将被选为`/main/1`：没有在 上创建版本`branch2`，因此`element * /main/LATEST`是*唯一*可以应用的规则。*

# c# - 将继承与泛型一起使用

> ID：16000959
> 
> 赞同：0
> 
> 时间：2013-04-14T15:46:17.817
> 
> 标签：c#, generics, inheritance, interface

假设我有一个基类

```
class Document
{
//some properties
} 
```

和两个派生类：

```
public class Order:Document
    {
    //some properties   
    }
public class Request:Document
{
    //some properties   
} 
```

现在我想制作一个具有服务层的分层应用程序。我也想要一个基础服务层接口，例如：

```
public interface IBaseService<T> where T:Document
{
    IList<T> GetAll();
} 
```

我的层服务类实现它：

```
public SaleService:IBaseService<Document>; 
```

所以我必须定义`IList<Document> GetAll()`实现基本服务，但我希望我的 SaleService 有`IList<Order> GetAll()`和`IList<Request> GetAll()`方法，而不是`IList<Document> GetAll()`。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T15:54:58.717

您将需要`IBaseService<T>`使用不同的泛型参数显式实现：

```
public class SalesService : IBaseService<Order>, IBaseService<Request>
{
    IList<Order> IBaseService<Order>.GetAll()
    {
        //return orders
    }

    IList<Request> IBaseService<Request>.GetAll()
    {
        //return requests
    }
} 
```

实现的方法仅通过接口可见，因此您必须强制转换才能调用它们，例如

```
IBaseService<Request> service = new SalesService();
IList<Request> request = service.GetAll(); 
```

您的客户端代码应该只依赖于`IBaseService<T>`接口，因此您不需要经常这样做。

# mysql - Solr 索引 My SQL 时间戳或日期时间字段

> ID：16000962
> 
> 赞同：4
> 
> 时间：2013-04-14T15:46:27.630
> 
> 标签：mysql, datetime, solr, dataimporthandler

要在 Solr 中索引日期，日期应为 ISO 格式。我们可以在不修改 SQL Select 语句的情况下索引 MySQL 时间戳或日期时间字段吗？

我用过

```
 <fieldType name="tdate" class="solr.TrieDateField" omitNorms="true" precisionStep="6"     positionIncrementGap="0"/>

 <field name="CreatedDate" type="tdate" indexed="true" stored="true" />

 CreatedDate is of Type Date Time in MySQL 
```

我收到以下异常

```
 11:23:39,117 WARN  [org.apache.solr.handler.dataimport.DateFormatTransformer] (Thread-  72) Could not parse a Date field : java.text.ParseException: Unparseable date: "2013-04-14 11:22:48.0" 
```

非常感谢解决此问题的任何帮助

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-15T05:40:43.773

检查 SOLR 中日期时间字段的默认性质

[日期字段SOLR](http://lucene.apache.org/solr/4_6_0/solr-core/org/apache/solr/schema/DateField.html)

使用以下 mysql 函数转换您的日期时间值

```
SELECT id,DATE_FORMAT(created_at,'%Y-%m-%dT%TZ') as created_at,... from table 
```

# android - 在map v2项目中引用google play服务的jar文件

> ID：16000968
> 
> 赞同：0
> 
> 时间：2013-04-14T15:46:50.937
> 
> 标签：android, map

我正在尝试引用 google-play-service-lib 的 jar 文件，但每次我从属性窗口引用它时，它都会在 lib 旁边给我一个红十字。我尝试从 SDK 服务中卸载 google play 服务并重新安装它。它也没有工作。

好的，现在我已经更改了导入到我保存项目的同一驱动器的路径，并且感谢上帝它工作......但现在地图打开时显示一个白色的空白页。

以及 logcat 中写的内容：无法加载谷歌地图

你能帮我解决这个问题吗:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T02:08:55.240

**导入“google-play-services_lib”。**
选择 File-->Import
Select Android-->Existing Android Code into Workspace
浏览并选择 \sdk\extras\google\google_play_services\libproject
选择“google-play-services_lib”并完成。

有关详细步骤，请查看我的博客：[http ://umut.tekguc.info/en/content/google-android-map-v2-step-step](http://umut.tekguc.info/en/content/google-android-map-v2-step-step)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T10:32:10.343

问题是工作区路径，必须将谷歌播放服务库复制到您的工作区而不是其他路径。

# r - R中的图形表示：2作为轴，1作为体积

> ID：16000972
> 
> 赞同：0
> 
> 时间：2013-04-14T15:47:10.233
> 
> 标签：r, graphics, data-representation

大家。

我写这个问题是因为我需要你的帮助才能在 R 中进行图形表示。我想将图形作为坐标系（两个变量）和另一个表示点的体积（大小）的变量。

你可以看一个例子：[pxfolioplotbcgmatrix](http://i.stack.imgur.com/uhn9J.png)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:59:43.040

试用`?symbols`功能

```
x <- 1:5
y <- 5:1
r <- seq(2, 10, 2)

symbols(x, y, circles=r, fg="white", bg="red") 
```

![在此处输入图像描述](https://i.stack.imgur.com/yuriH.png)

# google-chrome - 为什么这种悬停过渡在 Chrome 中不起作用？

> ID：16000975
> 
> 赞同：0
> 
> 时间：2013-04-14T15:47:35.573
> 
> 标签：google-chrome, css, css-transitions

过去几天我一直在考虑**[这个问题](https://bitbucket.org/GloverDonovan/vivid-imagination/issue/2/tint-transition-effect-not-working-in)**，但我无法弄清楚究竟是什么问题。

考虑以下来自**[style.css](https://bitbucket.org/GloverDonovan/vivid-imagination/src/4e4a7e614fe14936bd58b95b567df42c88bfba8e/style.css)**的片段：

```
.tint:before {
        -moz-transition: all .3s linear;
     -webkit-transition: all .3s linear;
         -ms-transition: all .3s linear;
          -o-transition: all .3s linear;
             transition: all .3s linear;
}
.tint:hover:before {background:rgba(159,182,205,0.1);} 
```

正如您从上面的代码中看到的那样，在图像悬停时，应该发生“色调”过渡，以使用户想要单击该图像。但是，此功能在 Chrome 中不起作用。

为什么悬停过渡在 Chrome 中不起作用，但在 Firefox 中却完全正常？

这是预期的行为吗？还是 Chrome 不能正确呈现这些过渡？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T16:13:47.900

该问题与 :before 伪类有关。似乎没有在该类上触发悬停。如果你删除它，它工作得很好。

```
.tint {
 -moz-transition: all .3s linear;
 -webkit-transition: all .3s linear;
 -ms-transition: all .3s linear;
 -o-transition: all .3s linear;
 transition: all .3s linear;
}
.tint:hover{background:rgba(159,182,205,0.1);} 
```

这是 jsFiddle - [http://jsfiddle.net/qGAn9/](http://jsfiddle.net/qGAn9/)

**更新：**

如果需要 :before 伪元素，则可以触发悬停在父元素上。我还必须添加一些额外的样式以使伪元素出现在顶部。

```
.tint:before {
     -moz-transition: all .3s linear;
     -webkit-transition: all .3s linear;
     -ms-transition: all .3s linear;
     -o-transition: all .3s linear;
     transition: all .3s linear;

    content: "";
    width: 100%;
    height: 100%;
    position: absolute;
}

.tint:hover:before{background:rgba(159,182,205,0.5);} 
```

jsFiddle在这里-http: [//jsfiddle.net/qGAn9/2/](http://jsfiddle.net/qGAn9/2/)

# javascript - d3 转换错误

> ID：16000977
> 
> 赞同：1
> 
> 时间：2013-04-14T15:47:49.520
> 
> 标签：javascript, d3.js, transition

我可能在这里犯了一个菜鸟 D3 错误，但我正在尝试使用 D3 对现有 HTML 元素进行动画更改。

所以假设我有以下 HTML

```
<div id="label">Hello</div> 
```

然后我试图用动画 D3 来改变它，如下所示：

```
d3.select("#label").transition().duration(1000).html("World"); 
```

我收到以下错误

```
"Object [object Array] has no method 'html'" 
```

当我省略过渡时，一切正常：

```
d3.select("#label").html("world"); 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T16:25:20.733

如果你想做一些像淡出“你好”然后淡入“世界”的事情，你可以做这样的事情：

```
var $label = d3.select("#label");
$label.transition().duration(1000).style('opacity', 0);
$label.transition().delay(1000).duration(1000).text("World").style('opacity', 1); 
```

但是，请注意，该`text`方法在第二个转换开始时立即应用，并且仅适用于纯文本，而不适用于 html。

# angularjs - 仅在 angular.js 中的表单输入更改时显示按钮

> ID：16000985
> 
> 赞同：3
> 
> 时间：2013-04-14T15:49:26.597
> 
> 标签：angularjs

HTML：

```
<ul>
    <li><a><i class="icon-white icon-save"></i></a></li>
</ul>

<form>
     <input type="text" value="{{ selectedUser.firstname }}" ng-model="selectedUser.firstname">
     <input type="text" value="{{ selectedUser.lastname }}" ng-model="selectedUser.lastname">
</form> 
```

我正在处理从我的 REST API 获取的用户对象。所以基本上有一个用户列表。点击上面的表格就会显示出来。

```
function UserController($scope, User){
    $scope.users = User.query();

    $scope.selectedUser = null;

    $scope.select = function(user){
        $scope.selectedUser = user;
    }
} 
```

我只想在表单值发生更改时显示保存链接。任何想法如何用 angular.js 做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-06-03T06:24:57.727

为您的表单命名，例如：

```
<form name="dataForm">
  <input type="text" name="firstname" ng-model="data.firstname" />
  <input type="text" name="lastname" ng-model="data.lastname" />
</form> 
```

表单现在将成为您范围内的命名模型，您可以根据表单是否原始来隐藏/显示保存按钮：

```
<ul ng-hide="dataForm.$pristine">
  <li><a><i class="icon-white icon-save"></i></a></li>
</ul> 
```

*如果您更改表单内的任何*表单元素，这种方法的优点是显示保存按钮，而缺点是不检查输入值与原始值，只是它们已被编辑的事实。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T15:55:50.860

这是一个仅在两个字段都有数据时才显示元素的示例：

```
<div ng-controller="TestCtrl" ng-app>
    <ul ng-show="enableSave(data)">
        <li><a><i class="icon-white icon-save"></i></a></li>
    </ul>

    <form>
        <input type="text" name="firstname" ng-model="data.firstname" />
        <input type="text" name="lastname" ng-model="data.lastname" />
    </form>
</div> 
```

这是你的控制器：

```
function TestCtrl($scope) {
    $scope.data = {firstname: "", lastname: ""};

    $scope.enableSave = function(data) {
         return data.firstname.length > 1 && data.lastname.length > 1;   
    };    
} 
```

您可以将任何您想要的逻辑放入`enableSave`. 我选择要求他们都至少有两个字符......你可以做任何你需要的事情。

这是一个说明它的 jsFiddle：http: [//jsfiddle.net/nDCXY/1/](http://jsfiddle.net/nDCXY/1/)

**由 OP 编辑​​：我的解决方案**

```
$scope.enableSave = function(user) {
    if(!angular.equals(user, oldUser)){
        return true
    }else{
        return false;
    }
}; 
```

# jquery - Spring Data / REST - Javascript（jquery，backbone）restful调用最终得到404响应

> ID：16000986
> 
> 赞同：1
> 
> 时间：2013-04-14T15:49:28.130
> 
> 标签：jquery, backbone.js, spring-data, spring-data-jpa, spring-data-rest

我有一个示例应用程序：[https](https://github.com/LateralThoughts/orsyp-frontend-training/tree/master/zupr_trackr) ://github.com/LateralThoughts/orsyp-frontend-training/tree/master/zupr_trackr 。它通过 Spring DATA/REST 处理的 REST 资源公开了 3 个 JPA 实体（[Company](https://github.com/LateralThoughts/orsyp-frontend-training/blob/master/zupr_trackr/src/main/java/com/github/lateralthoughts/domain/Company.java)、[Employee](https://github.com/LateralThoughts/orsyp-frontend-training/blob/master/zupr_trackr/src/main/java/com/github/lateralthoughts/domain/Employee.java)、[Activity ）。](https://github.com/LateralThoughts/orsyp-frontend-training/blob/master/zupr_trackr/src/main/java/com/github/lateralthoughts/domain/Activity.java)

例如，虽然我可以通过浏览器 REST 插件成功查询 REST API，但以下查询（在同一域或另一个域上）总是返回 404：

```
$.getJSON("http://localhost:8080/api/companies/")
    .success(function() { alert("success"); })
    .fail(function(event, jqxhr, exception) {
        console.log(jqxhr, exception);
    })
    .complete(function() { alert("Done"); }
); 
```

在比较生成的 HTTP 请求（通过 REST 插件）和 jquery 驱动的请求时，我们注意到的唯一区别是在第一种情况下没有“Referer”，而在最后一种情况下它存在。

使用 REST 附加接口添加此标头将导致请求失败，如前所述。

欢迎任何想法，提前谢谢

罗尔夫

PS：对于 GET/POST 和其他动词也是如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T06:54:58.780

Spring Data REST 不喜欢`Accept`jQuery 发送的标头。

jQuery 发送这些标头：

```
Accept:application/json, text/javascript, */*; q=0.01 
```

如果您尝试这样的查询：

```
curl -v -XGET -H "Accept:application/json, text/javascript, */*; q=0.01" http://localhost:8080/api/employees/ 
```

它将作为 404 失败，但如果您通过删除`text/javascript`部件来更改它：

```
curl -v -XGET -H "Accept:application/json, */*; q=0.01" http://localhost:8080/api/employees/ 
```

这个有效。

`Accept`您可以使用该方法覆盖 jQuery 使用的默认标头`$.ajaxSetup`，或者您可以在查询 API 时简单地覆盖这些设置。

```
$.ajax({
    url : "http://localhost:8080/api/employees", 
    accepts: {json:'application/json'}
}) 
```

现在关于**为什么**，我认为这里的 Spring Data REST 存在问题：

[https://github.com/SpringSource/spring-data-rest/blob/master/spring-data-rest-webmvc/src/main/java/org/springframework/data/rest/webmvc/RepositoryRestHandlerMapping.java#L46](https://github.com/SpringSource/spring-data-rest/blob/master/spring-data-rest-webmvc/src/main/java/org/springframework/data/rest/webmvc/RepositoryRestHandlerMapping.java#L46)

标头匹配的位置，我认为这可能是由于SpringData REST 不存在`Accept`的事实。`text/javascript`

# jsf - jsf primefaces如何导航到向上文件夹中的页面

> ID：16000993
> 
> 赞同：1
> 
> 时间：2013-04-14T15:50:47.337
> 
> 标签：jsf, primefaces

我不知道如何导航到位于上层目录中的页面。有可能吗？这是我的项目结构：

![在此处输入图像描述](https://i.stack.imgur.com/SGtaT.png)

问题：在要包含的文件夹**main_pages**`<ui:composition template="web2/web/index.xhtml">`的任何页面的代码中，行应该如何以及如何从**images**文件夹中插入 ie 图像（我无法获得正确的路径，io.exception 仍然）：onas.xhtml**`index.xhtml`**

 ****```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      >
    <h:body>

        <ui:composition template="web2/web/index.xhtml">

            <ui:define name="centerContent">
                    <h:form>
                        <p:growl id="msg" showDetail="true" sticky="true" />
                        <p:panelGrid styleClass="myPanel">
                            <p:row>
                                <p:column>
                        <ui:param name="mainTag" value="Z chęcią odpowiemy" />
                <h2>Zapytaj</h2>
                        <h4>#{mainTag}</h4></p:column>
                            </p:row>
                            <p:row>
                                <p:column><p:inputTextarea styleClass="myTextArea" autoResize="true" value="#{mySendBean.mailContent}"/></p:column>
                                <p:column>
                        <h:commandButton actionListener="#{mySendBean.sendMail2()}" value="Wyślij" update="msg">
            </h:commandButton>
                                    </p:column>
                            </p:row>
                        </p:panelGrid>
                    </h:form>
            </ui:define>

        </ui:composition>

    </h:body>

</html> 
```

当我将组成更改为：

```
<ui:composition template="#{request.contextPath}/index.xhtml"> 
```

我得到错误：

```
/onas.xhtml @11,74 <ui:composition template="#{request.contextPath}/index.xhtml"> Invalid path : /web2/faces/index.xhtml 
```

或者如果我添加 /faces/：

```
/onas.xhtml @11,74 <ui:composition template="#{request.contextPath}/faces/index.xhtml"> Invalid path : /web2/faces/index.xhtml 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T17:51:47.377

组件中的所有路径`<ui:xxx>`都是 webcontent 根目录的绝对路径，即“Web Pages”文件夹。此外，您应该更喜欢使用以开头的绝对路径`/`而不是相对路径。

所以，这应该这样做：

```
<ui:composition template="/index.xhtml"> 
```

仅当`#{request.contextPath}`您要手动创建 URL（为最终用户）时才需要。`/faces`仅当您要在其上调用 JSF 映射时才需要。

### 也可以看看：

*   [如何使用 JSF 2.0 Facelets 在 XHTML 中包含另一个 XHTML？](https://stackoverflow.com/questions/4792862/how-to-include-another-xhtml-in-xhtml-using-jsf-2-0-facelets/4793959#4793959)

* * *

**与具体问题无关**，建议将模板文件放在`/WEB-INF`文件夹中，防止直接访问。

### 也可以看看：

*   [我需要将哪些 XHTML 文件放入 /WEB-INF 而哪些不需要？](https://stackoverflow.com/questions/9031811/which-xhtml-files-do-i-need-to-put-in-web-inf-and-which-not)****

# php - Stripe PHP API 方法响应的结构是什么？

> ID：16000994
> 
> 赞同：5
> 
> 时间：2013-04-14T15:50:50.267
> 
> 标签：php, api, payment, stripe-payments

我正在研究 Stripe 集成，我对从 PHP API 得到的实际响应感到困惑。我开始相信 API 参考是准确的，并且响应将是一个 JSON 字符串，如每个方法所示。我很快发现了显着的差异。大多数情况下，JSON 响应中缺少 id 字段。此外，响应似乎同时是一个字符串、一个对象，也许还有其他一些结构。

这是我的调试代码。我正在使用最新的 Stripe PHP 库，版本 1.7.15。

```
function var_dump_ret($mixed=null)
{
  ob_start();
  var_dump($mixed);
  $content=ob_get_contents();
  ob_end_clean();
  return($content);
}

$token=$_POST['stripeToken'];
$customer=Stripe_Customer::create(array(
  "card"=>$token,
  "plan"=>"agency")
);

$custVarDump=var_dump_ret($customer);
$cDecoded=json_decode($customer);
$Debug="Invidual attributes of JSON decoded customer object:"._EOL;
$Debug.="object:".$cDecoded->object._EOL;
$Debug.="created:".$cDecoded->created._EOL;
$Debug.="id:".$cDecoded->id._EOL;
$Debug.="livemode:".$cDecoded->livemode._EOL;
$Debug.="description:".$cDecoded->description._EOL;
$Debug.="active_card.object:".$cDecoded->active_card->object._EOL;
$Debug.="active_card.last4:".$cDecoded->active_card->last4._EOL;
$Debug.="active_card.type:".$cDecoded->active_card->type._EOL;
$Debug.="active_card.exp_month:".$cDecoded->active_card->exp_month._EOL;
$Debug.="active_card.exp_year:".$cDecoded->active_card->exp_year._EOL;
$Debug.="active_card.fingerprint:".$cDecoded->active_card->fingerprint._EOL;
$Debug.="active_card.country:".$cDecoded->active_card->country._EOL;
$Debug.="active_card.name:".$cDecoded->active_card->name._EOL;
$Debug.="active_card.address_line1:".$cDecoded->active_card->address_line1._EOL;
$Debug.="active_card.address_line2:".$cDecoded->active_card->address_line2._EOL;
$Debug.="active_card.address_city:".$cDecoded->active_card->address_city._EOL;
$Debug.="active_card.address_state:".$cDecoded->active_card->address_state._EOL;
$Debug.="active_card.address_zip:".$cDecoded->active_card->address_zip._EOL;
$Debug.="active_card.address_country:".$cDecoded->active_card->address_country._EOL;
$Debug.="active_card.cvc_check:".$cDecoded->active_card->cvc_check._EOL;
$Debug.="active_card.address_line1_check:".$cDecoded->active_card->address_line1_check._EOL;
$Debug.="active_card.address_zip_check:".$cDecoded->active_card->address_zip_check._EOL;
$Debug.="email:".$cDecoded->email._EOL;
$Debug.="delinquent:".$cDecoded->delinquent._EOL;
//$Debug.="subscription:".$cDecoded->subscription._EOL;
$Debug.="discount:".$cDecoded->discount._EOL;
$Debug.="account_balance:".$cDecoded->account_balance._EOL;
$Debug.="unaltered response from Stripe_Customer::create:"._EOL.$customer._EOL.
    "var dump of response:"._EOL.$custVarDump._EOL.
    "print_r of json_decode of response:"._EOL.print_r($cDecoded,true)._EOL;

file_put_contents(_LOGFILE,$Debug,FILE_APPEND); 
```

下面是我的调试文件的内容，用于 JSON 解码的客户对象的个人属性。执行时，代码会发布一条通知。

注意：未定义的属性：第 51 行的 stripe/subscription.php 中的 stdClass::$id

另请注意，由于有关 stdClass 的致命错误，我不得不注释掉在调试字符串中添加“订阅”的行。

```
object:customer
created:1365951909
id:
livemode:
description:
active_card.object:card
active_card.last4:4242
active_card.type:Visa
active_card.exp_month:7
active_card.exp_year:2013
active_card.fingerprint:WTXPLgKDCXyp9xpD
active_card.country:US
active_card.name:charlie
active_card.address_line1:
active_card.address_line2:
active_card.address_city:
active_card.address_state:
active_card.address_zip:
active_card.address_country:
active_card.cvc_check:pass
active_card.address_line1_check:
active_card.address_zip_check:
email:
delinquent:
discount:
account_balance:0 
```

最明显的缺失是客户 ID。它在 JSON 响应中不存在。但是，正如在一些 Stripe 示例程序中所见，可以使用 $customer->id 访问它。此外，var_dump 输出表明我无法弄清楚的结构中存在更多属性。整个调试文件位于[http://www.helioza.com/stripe/debug.txt](http://www.helioza.com/stripe/debug.txt)。我只展示了客户创建方法，但我遇到了类似的发票问题，并且在 Stripe_Invoice::all 或 Stripe_Invoice::upcoming 响应中的任何地方都找不到发票 ID。

问题

1) Stripe_Customer::create 返回的值如何同时是字符串和对象？

2) 我在哪里可以找到描述 API 方法返回值的文档，包括如何访问每个属性？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T16:49:18.120

尽管 Stripe 的 API 在 HTTP 级别返回 JSON（即实际通过网络发送的内容），但 Stripe PHP 库已经处理了对 JSON 响应的解码并将其转换为 PHP 对象。

应该没有必要将返回值从`Stripe_Customer::create`to传递`json_decode`——事实上，鉴于它已经是一个对象，我理解`json_decode`得不够好，无法理解为什么这不仅仅是错误。

在任何情况下，您都应该直接与返回的客户对象进行交互，例如`$customer->description`或`$customer->active_card->cvc_check`。例如，您可以在[Stripe 教程](https://stripe.com/docs/tutorials/charges#saving-credit-card-details-for-later)中看到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T15:35:37.947

在埃文的帮助下，我想出了第二个问题的完整答案。正如 Evan 所说，关键是将 Stripe PHP 库返回的结构视为一个对象。根据原始方法响应的 JSON 结构中隐含的规则引用元素。

由于我无法阅读复杂的 JSON，特别是随着缩进深度的增加，我编写了一个脚本，将 JSON 结构的每个元素转换为完整的 PHP 引用，例如 $obj->arr[index]->obj2 等等。在[www.helioza.com/decoders/explain-json.php](http://www.helioza.com/decoders/explain-json.php)，您可以粘贴 JSON 字符串，如 Stripe API 参考中的示例，并获取引用每个元素的 PHP 代码的完整列表。

2014 年 5 月 27 日更新

看着各种评论，在我看来，这里有几个隐藏的上下文在起作用。大多数都在我的脑海中，所以要清楚我做什么和不知道什么，这是我解释 Stripe API 文档的方式。

查看创建新客户的示例，PHP 代码选项。以下是 API 调用响应的一部分。

```
EXAMPLE RESPONSE
{
  "object": "customer",
  "created": 1401219085,
  "id": "cus_474RjipEtz2ff7",
  "livemode": false,
  "description": "payinguser@example.com",
  "email": null,
  "delinquent": false,
  "metadata": {
  },
  "subscriptions": {
    "object": "list",
    "total_count": 0,
    "has_more": false,
    "url": "/v1/customers/cus_474RjipEtz2ff7/subscriptions",
    "data": [

    ]
  }, 
```

现在，根据我的经验，每个 Web API 响应都是 HTTP 响应。Stripe 文档在某处说它是 POST。所以我查看了上面的响应，我看到了与 HTTP 兼容的 JSON。文档页面实际上并未将响应标识为 JSON 或其他任何内容。如果这不是 JSON，请识别它并告诉我你是如何知道的。称它为 StdClass 并没有帮助，因为 PHP 手册在该主题上相当迟钝，并且没有定义类的结构。

这确实是我最初问题的本质。Stripe 所记录的响应的性质是什么？当然看起来像通过 HTTP 传递的 JSON。我想接受教育。

是的，通过将 Stripe 库返回的内容视为对象，我得到了我想要的结果。但是食谱解决方案不会进一步加深任何人的知识。关于 SO 最有价值的答案是解释性的。

# xcode - 应用程序中推文中的 iTunes URL

> ID：16000995
> 
> 赞同：0
> 
> 时间：2013-04-14T15:51:05.273
> 
> 标签：xcode

在我的应用程序中，我有一个用于 facebook 和 twitter 等的分享按钮。我希望人们可以发推文并发布我的应用程序的链接，但该应用程序尚未在应用程序商店中可用，所以我无法拥有链接到应用程序。

如果您正在撰写推文，在某些应用程序中会有指向该应用程序的链接，他们是如何做到的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:11:55.203

正如 H2CO3 指出的那样，从您控制的服务器交付 AppStore URL 可能是您更喜欢的东西。自然，首先想到的问题是“为什么我必须使用服务器？我不能直接将它编码到我的应用程序中吗？

简而言之，您*不需要*使用服务器，但您可能会发现它为您提供的好处和灵活性是以更多的网络代码和应用程​​序的复杂性为代价的。让我们稍微扩展一下，想象我们生活在一个完美的世界中，我们 100% 准确地知道 AppStore URL 将是什么并且永远不会改变。我们可以直接将该 URL 编码到我们的应用程序中，并且我们再也不需要考虑我们应用程序的那部分 - 它总是会推特正确的 URL，用户会很高兴，而您作为开发人员可以将您的关注更重要的事情。

不幸的是，事情通常不能完美运行，作为软件开发人员，我们必须考虑现实的丑陋边缘并编写代码来优雅地处理它们。以下是硬编码 URL 的一些潜在问题：

1.  我们*实际上并不*知道完整的 AppStore URL。
2.  Apple 可能会决定更改 AppStore URL 格式并使旧 URL 无效。
3.  尽管我们尽最大努力在代码中仔细输入 URL，但我们犯了一个错误，现在我们必须发布更新并等待我们的应用程序被审查以修复一个简单的错字 - 哎呀！

H2CO3 使用服务器构建的建议可能源于编写软件的经验以及开发人员固有的风险管理驱动的思维过程——如果我可以做些什么来让我的软件更优雅地处理这些丑陋的边缘并让我的软件更可靠，它花额外的时间以不同的方式实现我的功能以保护它免受未来可能为我的应用程序存储的模糊未知数可能是有意义的。

为了平衡反对将 URL 放在服务器上的论点：

1.  如果您的用户所在的小区或 wifi 覆盖不均，他们可能无法连接到您的服务器以从您的服务器获取 AppStore URL
2.  您的服务器可能无法正常工作，因此无法在请求时向您的应用提供信息。
3.  添加这样的网络请求可以很容易做到，但也引入了自己需要考虑的风险（编写软件不是很好吗？）

如上所述，您*不需要*让您的应用程序从您控制的服务器中获取 URL，但您*可能*希望它这样做。只有您，作为应用程序的开发人员，才能确定您愿意接受的风险程度，以及您研究、发明或以其他方式获得的哪些可用选项似乎最适合您的特定需求。

由于我不知道你的背景，我将保持相对较高的水平，并在一些方向上再给你一些提示，你可以去做一些额外的研究：

关于“设置服务器”的想法——您可以从 Internet 上的许多托管服务提供商处购买托管帐户，或者如果这是一个学校或工作项目，您可以与您的 IT 人员交谈以申请网站空间. 完成该设置后，您可以在该空间上放置一个带有占位符 URL 的文件，并在您的应用程序中编写一些代码以连接到您的服务器并读取您的文件（其中包含您的假 URL！），然后将其放入您的推文. 一旦您的应用程序获得批准，您可以将服务器上的虚假 URL 更改为真实 URL，您的应用程序将按照您的意愿运行。对于 App 部分，您可能会查看一些简单的 +stringWithContentsOfURL: NSString 上的方法（尽管请记住考虑诸如如果 Internet 出现故障会发生什么，或者如果您没有从服务器返回任何内容， ETC。！）

关于“将 URL 硬编码到应用程序中”的想法——Apple 甚至在开发人员发布应用程序之前就为他们提供了一些营销资源。结帐 ( [https://developer.apple.com/appstore/resources/marketing/index.html](https://developer.apple.com/appstore/resources/marketing/index.html) )，重点是短链接部分，还结帐技​​术问答 1633 ( [https://developer.apple.com/library/ios /#qa/qa1633/_index.html](https://developer.apple.com/library/ios/#qa/qa1633/_index.html)）。这两个链接都为您提供了有关如何在 AppStore 上直接建立链接的信息，只需提供他们的名称即可。像以前一样，请记住考虑如果您决定重命名您的应用程序会发生什么，或者链接到其他地方（或者可能无处！）会更有意义。

希望这将帮助您更多地思考您实际想要实现的目标，并让您了解其他开发人员在面临像您在这里提出的决定时的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T08:46:04.327

虽然我同意 Bryan 的观点，但我总是避免将服务器用于基本事务。使用 ios 5+，您可以从应用程序内部发送推文（并且您可以添加默认推文（即到应用程序的链接）

您的问题可以通过这种方式轻松解决：使用指向应用商店的链接创建一个短链接（指向应用商店的链接格式如下：`https://itunes.apple.com/app/id <app id>`，应用 id 位于 Apple ID 下的 itunnesconnect 中）

例如，您可以制作这样的默认推文：“查看这个很棒的应用程序！！goo.gl/buya”，然后用户可以根据需要对其进行编辑。

另外..Apple 极不可能更改其链接的格式...太多用户依赖这种格式来做...很多事情

# objective-c - 关闭窗口后如何使窗口可见？

> ID：16000998
> 
> 赞同：0
> 
> 时间：2013-04-14T15:51:20.090
> 
> 标签：objective-c, macos, cocoa, nswindow

我的应用程序是菜单状态栏应用程序，我的意思是该应用程序包含菜单状态栏中的图标和一个窗口。停靠栏中的图标被隐藏。我需要实现的是，在用户单击状态栏图标后，会显示应用程序窗口，但我不知道如何通过编程使窗口可见。可能我必须使用类似的代码

```
[self.window show] 
```

在我的应用程序委托中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:54:44.717

尝试

```
[self.window makeKeyAndOrderFront:sender]; 
```

如果您从任何操作中调用，请使用`sender`.

在您的情况下`nil`，代替`sender`.

# iphone - 获取已购买产品列表，inApp 购买 iPhone

> ID：16000999
> 
> 赞同：0
> 
> 时间：2013-04-14T15:51:23.597
> 
> 标签：iphone, ios, in-app-purchase, restore

我正在为我的 iOS 应用程序购买应用程序。Apple 拒绝了我的二进制文件，因为我没有恢复购买的产品。在我的应用程序中，一旦用户点击产品图标，如果项目被锁定，他/她将定向到应用内购买过程，否则产品将打开。没有视觉购买按钮。现在苹果说要提供恢复按钮？谁能告诉我如何处理这个？我努力了

```
- (void) checkPurchasedItems
{
    [[SKPaymentQueue defaultQueue] restoreCompletedTransactions];
}// Call This Function

//Then this delegate Function Will be fired
- (void) paymentQueueRestoreCompletedTransactionsFinished:(SKPaymentQueue *)queue
{
    alreadyPurchasedItems = [[NSMutableArray alloc] init];

    NSLog(@"received restored transactions: %i", queue.transactions.count);
    for (SKPaymentTransaction *transaction in queue.transactions)
    {
        NSString *ID = transaction.payment.productIdentifier;
        [alreadyPurchasedItems addObject:ID];
    }

} 
```

在应用程序启动时，但从不调用 paymentQueueRestoreCompletedTransactionsFinished 方法，以便我可以获取已购买项目的列表，然后直接通知用户他/她是否已经购买。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T16:02:53.267

你如何设置的代表`[SKPaymentQueue defaultQueue]`？我猜你已经喜欢了：

```
[[SKPaymentQueue defaultQueue] addTransactionObserver:self]; 
```

之后`[[SKPaymentQueue defaultQueue] restoreCompletedTransactions];`应该会导致以下方法被解雇。所以 SKPaymentTransactionStateRestored 是你实现它的地方：

```
-(void) paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions
{
    for (SKPaymentTransaction * transaction in transactions) {
        switch (transaction.transactionState)
        {
            case SKPaymentTransactionStatePurchased:                
                ...
                [[SKPaymentQueue defaultQueue] finishTransaction:transaction];
                break;
            case SKPaymentTransactionStateFailed:                
                ...
                [[SKPaymentQueue defaultQueue] finishTransaction:transaction];
                break;
            case SKPaymentTransactionStateRestored:                
                ...
                [[SKPaymentQueue defaultQueue] finishTransaction:transaction];
            default:
                break;
        }
    };
} 
```

你可以看看这个教程，在它的最后更详细地解释了恢复。 [http://www.raywenderlich.com/21081/introduction-to-in-app-purchases-in-ios-6-tutorial](http://www.raywenderlich.com/21081/introduction-to-in-app-purchases-in-ios-6-tutorial)