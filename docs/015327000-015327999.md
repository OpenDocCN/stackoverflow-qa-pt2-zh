# StackOverflow 问答 15327000-15327999

# sprite - libgdx sprite 淡出

> ID：15327000
> 
> 赞同：8
> 
> 时间：2013-03-10T20:10:29.583
> 
> 标签：sprite, libgdx, fadeout

我正在开发 LibGdx 中的 2D 射击游戏。我不得不提一下，我是 LibGdx 的新手，我正在努力理解它是如何工作的。我有几年的Java和Android编程经验，所以我了解游戏概念。

我很感兴趣有没有办法淡出精灵对象。

我在屏幕上有敌人，当敌人死了我想从我的列表中删除 Enemy 对象并在计算和交集逻辑中忽略它。

但我想让敌人的精灵在屏幕上停留更长时间并慢慢淡出。

LibGdx 中是否有一个很好的方法来处理这个......或者我必须绘制一些额外的“淡出”帧......并在动画中处理它......

是否有支持这种东西的内置功能？

很多！在我开始头脑风暴并在绘制精灵方面失去生命之前，我需要有人帮我解决这个问题。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-11T16:37:50.097

你应该能够通过随着时间的推移减少他们的“alpha”来淡出你死去的敌人精灵。我认为最简单的方法是使用批处理`setColor()`：

```
batch.setColor(1.0f, 1.0f, 1.0f, fadeTimeAlpha);
batch.draw(deadEnemySprite, ...); 
```

您必须计算`fadeTimeAlpha`（随着时间的推移将其从 1.0f 变为 0.0f）。
这些[`Color.lerp()`方法](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/graphics/Color.html#lerp%28com.badlogic.gdx.graphics.Color,%20float%29%29)可能会有所帮助。

我不确定为每个精灵设置颜色是否会导致批次刷新（我怀疑它会），因此这可能会产生相对较高的性能成本（假设您的批次精灵绘图事先表现良好）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-07-20T13:02:08.147

使用 Sprite，您可以使用 .setAlpha：

```
alpha += (1f / 60f) / 2;
icon.setAlpha(alpha); 
```

首先，alpha 系统：您提供一个介于 0.0 和 1.0 之间的数字（不是 0 和 255）

在上面的代码片段中，`alpha`是一个浮点值并且`icon`是一个 Sprite。在这种情况下，Alpha（最初）为 0。

计算：

```
(1f / 60f) / 2; 
```

1f 是最大 alpha

60f 是 FPS

和 2 是因为我希望它超过 2 秒。

（LibGDX 的新手，所以我还没有弄清楚如何获得 FPS，因为它不一定是 60）。

更改除以（并更改相关的 FPS）会更改从 alpha 中添加（或删除）的量，以及动画将持续多长时间

# php - 不使用 CMS 的简单博客发布

> ID：15327001
> 
> 赞同：0
> 
> 时间：2013-03-10T20:10:36.667
> 
> 标签：php, forms, textarea, rich-text-editor

我的网站上有我的博客页面。我真的不需要安装 CMS，因为我不会使用所有功能。我只需要在我的“发布新闻”的后端有一个富文本编辑器，并在其中填写有关我将要做什么的最新消息。在博客页面（这只是一个从数据库中获取数据的 PHP 页面）中，我有一个很好的格式，其中包含我发布的所有新闻。

我尝试在 textarea 字段顶部使用一些富文本编辑器，但在我的数据库中，它将其保存为一行，没有任何中断或粗体等。

我知道数据必须保存在数据库中：

```
"Hello,<br>I want to inform you all that today is my <b>BirthDay</b><br>..." 
```

但是，当我提交表单时，是否有任何富文本编辑器会使用 html 标签提交我的 textarea 数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:18:08.603

最简单的解决方案是 - 在您的应用程序中集成 CKEditor。

这是一个有用的链接 -

[如何在 php 页面中添加或嵌入 CKEditor](https://stackoverflow.com/questions/8151889/how-to-add-or-embed-ckeditor-in-php-page)

CKEditor 在网络上有更多文档和示例，用于解决文档模板更改和其他已知错误等复杂问题，并且在过去 7-8 年中已经证明了自己。

# html - xml文件中的新行

> ID：15327003
> 
> 赞同：1
> 
> 时间：2013-03-10T20:10:54.160
> 
> 标签：html, xml, jsp

我正在尝试使用 jsp 文件打开一个 xml 文件。我可以打开文件，但由于某种原因，我看不到显示的文本之间的中断。我尝试使用
、 [[CDATA]] 、歌词、<br> 和所有来自网络的东西，但文本仍然出现在一行中而没有中断。我点击了这个链接： [XML 中的换行符？](https://stackoverflow.com/questions/2986297/line-break-in-xml)
以及其中的所有建议，但我仍然无法修复它。我的 jsp 代码中可能有问题，而不是 xml 文件中的问题，但我只是不知道它是什么我在这里添加了我的 xml 文件和 jsp：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <?xml-stylesheet type="text/css" href="cd_catalog.css"?>
    <quiz>
    <question type="multichoice"  >
<name>
    <text>Name of question </text> 
</name>
<questiontext format="html">
    <text>What is the answer to this question?</text>
</questiontext>
<answer fraction="100">
    <text>The correct answer</text>
    <feedback><text>Correct!</text></feedback>
</answer>
<answer fraction="0">
    <text>A distractor</text>
    <feedback><text>Ooops!</text></feedback>
</answer>
    <answer fraction="0">
    <text>Another distractor</text>
    <feedback><text>Ooops!</text></feedback>
    </answer>
    <shuffleanswers>1</shuffleanswers>
    <single>true</single>
    <answernumbering>abc</answernumbering>
    </question>
    </quiz> 
```

这是jsp文件：

```
 <%@ page contentType="text/xml"
    %><%@ page import="java.io.*"
    %><%
    //dump out the file
    BufferedReader in = new BufferedReader(new FileReader("questions.xml"));
    String line;
    while((line = in.readLine())!=null){
    out.print(line);
    }
    in.close();
    %> 
```

有人可以帮助我吗？多谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T20:17:34.793

将内容类型更改为 text/html 并使用 CDATA 和 BR 换行

# php - 我在 PHP 中的 Update 语句不更新数据库

> ID：15327013
> 
> 赞同：0
> 
> 时间：2013-03-10T20:11:27.947
> 
> 标签：php

当我回显输出时，将显示所需的更新值。但是当传递相同的值来更新数据库时，更新语句什么也不做。

代码部分是

```
if (empty($_POST) === false)
{
    $fname= $_POST['fname'];
    $srno=  $_POST['SRNO'];
    echo $fname.' and'. $srno;

    mysql_query('update names set fname="$fname" where SRNO="$srno"');          
} 
```

完整的代码是

```
<!DOCTYPE html>
<html>
    <head>
        <title>List of users</title>
    </head>
<body>
    <?php
        mysql_connect("localhost","root","") or die (mysql_error());
        mysql_select_db("list") or die (mysql_error());

        if (empty($_POST) === false)
        {
            $fname= $_POST['fname'];
            $srno=  $_POST['SRNO'];
            echo $fname.' and'. $srno;

            mysql_query('update names set fname="$fname" where SRNO="$srno"');          
        }

        if(isset($_GET['edit']))
        {
            $getedit=mysql_query('SELECT SRNO, fname, lname, phone, email from names where SRNO='.mysql_real_escape_string((int)$_GET['edit']));
            while ($get_row=mysql_fetch_assoc($getedit))
                {
                    echo '<form method="POST" action="">';
                    echo 'Sr. No: '.$get_row['SRNO'].'<br />';
                    echo 'Sr.No:<input type="text" value='.$get_row['SRNO'].' name="SRNO" readonly="readonly">';
                    echo 'First Name: <input type="text" value='.$get_row['fname'].' name="fname"><br />';
                    echo '<input type="submit" name="submit" value="save">';
                    echo '</form>';                                 
                }   

        }

        $get=mysql_query('SELECT  SRNO, fname, lname, email, phone, address, comments from names ORDER BY SRNO ASC');

        if (mysql_num_rows($get)==0)
        {
            echo 'There are no entries';
        }
            else
        {
            echo '<table border=0>';
            echo'<tr><th>Sr. No</th><th>First Name</th><th>Last Name</th><th>Phone No</th><th>E-mail</th><th>Modify</th></tr>';     
            while($get_row=mysql_fetch_assoc($get))
                {
                    echo '<tr><td>'.$get_row['SRNO'].'</td><td>'.$get_row['fname'].'</td><td>'.$get_row['lname'].'</td><td>'.$get_row['phone'].'</td><td>'.$get_row['email'].'</td><td><a href="index.php?edit='.$get_row['SRNO'].'">Edit</a></td></tr>';

                }
            echo '</table>';
        }       
    ?>

</body> 
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T20:15:04.773

单引号内的变量名不会用它们的值替换。尝试这个：

```
update names set fname="'.$fname.'" where SRNO="'.$srno.'" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T20:19:20.463

试试这个可能对你有帮助

```
<!DOCTYPE html>
<html>
 <head>
    <title>List of users</title>
</head>
<body>
<?php
    mysql_connect("localhost","root","") or die (mysql_error());
    mysql_select_db("list") or die (mysql_error());

    if (isset($_POST['fname']))
    {
        $fname= $_POST['fname'];
        $srno=  $_POST['SRNO'];
        echo $fname.' and'. $srno;

        mysql_query("update `names` set fname='$fname' where SRNO='$srno'");          
    }

    if(isset($_GET['edit']))
    {
        $getedit=mysql_query('SELECT SRNO, fname, lname, phone, email from names where     SRNO='.mysql_real_escape_string((int)$_GET['edit']));
        while ($get_row=mysql_fetch_assoc($getedit))
            {
                echo '<form method="POST" action="">';
                echo 'Sr. No: '.$get_row['SRNO'].'<br />';
                echo 'Sr.No:<input type="text" value='.$get_row['SRNO'].' name="SRNO" readonly="readonly">';
                echo 'First Name: <input type="text" value='.$get_row['fname'].' name="fname"><br />';
                echo '<input type="submit" name="submit" value="save">';
                echo '</form>';                                 
            }   

    }

    $get=mysql_query('SELECT  SRNO, fname, lname, email, phone, address, comments from names ORDER BY SRNO ASC');

    if (mysql_num_rows($get)==0)
    {
        echo 'There are no entries';
    }
        else
    {
        echo '<table border=0>';
        echo'<tr><th>Sr. No</th><th>First Name</th><th>Last Name</th><th>Phone No</th><th>E-mail</th>   <th>Modify</th></tr>';     
        while($get_row=mysql_fetch_assoc($get))
            {
                echo '<tr><td>'.$get_row['SRNO'].'</td><td>'.$get_row['fname'].'</td><td>'.$get_row['lname'].'</td><td>'.$get_row['phone'].'</td><td>'.$get_row['email'].'</td><td><a href="index.php?edit='.$get_row['SRNO'].'">Edit</a></td></tr>';

            }
        echo '</table>';
    }       
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T20:19:24.960

我建议您在遇到问题时回显查询，以便您可以将其复制/粘贴到 mysql 客户端并测试错误。

尝试将其更改为：

```
$query = "update names set fname='$fname' where SRNO='$srno'";
echo $query;
mysql_query($query); 
```

我也建议在您的查询中使用单引号（如我上面的示例）。我不确定 MySQL 处理双引号的效果如何，或者根本不知道。我一直养成使用单引号的习惯。也许这只是个人喜好。

# java - KeyEvent 没有识别出按下了 shift

> ID：15327016
> 
> 赞同：3
> 
> 时间：2013-03-10T20:11:38.747
> 
> 标签：java, keylistener, keyevent

我有以下问题，我试图限制用户只输入字母值。任何其他非字母的值（按下的键）都会引发错误。但是有 3 个例外，其中两个工作正常。
exception1：Del Key
exception2：Back Key
exception3：Shift <- 这个无法识别，我不知道为什么

```
SurnameSearch.addKeyListener(new KeyAdapter(){
        public void keyPressed(KeyEvent e){
            char ch = e.getKeyChar();
                if(Character.isAlphabetic(ch)|| (ch == KeyEvent.VK_BACK_SPACE) || (ch == KeyEvent.VK_DELETE) || (ch == KeyEvent.VK_SHIFT)){/*null*/}
                  else{
                    JOptionPane.showMessageDialog(null, "Only letters are allowed!");
                    SurnameSearch.setText(" ");
            }
        }
    }); 
```

提示赞赏:)

* * *

@疯狂程序员

例如，要求用户输入他的姓氏、名字、中间名和移动电话号码 && 家庭电话号码。所以显然我们不想要字母字段中的数值，反之亦然:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T20:30:14.757

不要将关键字符与关键代码进行比较。它们通常是不同的东西。

键码是一个虚拟概念，用于允许不同的键盘类型和输入法。

相反，使用类似`e.getKeyCode() == KeyEvent.VK_SHIFT`.

如果您试图将输入限制为任何类型的文本组件，`KeyListener`则不是您想要的界面。您将希望改用[DocumentFilter](http://docs.oracle.com/javase/tutorial/uiswing/components/generaltext.html)。这将允许 y 在输入到字段文档时过滤文本。

出于多种原因，这是一种更好的方法。第一个是，您无法控制`KeyListeners`通知的顺序，这意味着击键可能在到达您的侦听器之前已经提交给文本组件。其次，如果用户将文本粘贴到您的字段中，它将`KeyListener`完全绕过。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T20:18:10.983

那是因为`Shift`密钥没有 Unicode 密钥字符。它可能正在返回`KeyEvent.VK_UNDEFINED`。相反，该`Shift`键修改了其他按键（即，通常将它们大写）。

从[Javadoc](http://docs.oracle.com/javase/7/docs/api/java/awt/event/KeyEvent.html#getKeyChar%28%29)，`getKeyChar`：

> 返回与此事件中的键关联的字符。例如，shift + "a" 的 KEY_TYPED 事件返回 "A" 的值。

而不是使用`getKeyChar`，尝试`getKeyCode`，

> 返回与此事件中的键关联的整数 keyCode。

您可能还必须使用`getKeyChar`您的`isAlphabetic`印刷机（如果这些对您很重要）。

* * *

**编辑：**这是一个工作示例：

```
public static void main(String[] args) {
    JFrame f = new JFrame();
    JButton button = new JButton("Press keys");
    button.addKeyListener(new KeyAdapter() {

        @Override
        public void keyPressed(KeyEvent ke) {
            if (ke.getKeyCode() == KeyEvent.VK_SHIFT) {
                System.out.println("You pressed Shift");
            } else {
                System.out.println("You pressed a non-Shift key");
                // [ more logic ]
            }
        }

    });
    f.add(button, BorderLayout.CENTER);
    f.pack();
    f.setVisible(true);
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
} 
```

# django - 从 django 查询集中的单个字段派生多个值

> ID：15327017
> 
> 赞同：2
> 
> 时间：2013-03-10T20:11:45.937
> 
> 标签：django, django-queryset

我有一个看起来有点像这样的模型：

```
class InvoiceEntry(models.Model):
    ...
    username = models.CharField(max_length=20)  <-- the users name
    billtime = models.DecimalField()            <-- how much time has been spent
    billable = models.CharField(max_length=1)   <-- is this work billable? (Y or N)
... 
```

这些字段无法更改 - 它们是已包含 200k+ 行的表的一部分。

我需要创建一个返回的查询集：

*   用户名
*   计费时间总和（每个用户）
*   不可计费时间的总和（每个用户）

...比如说，过去 7 天（这很容易）。

最简洁的方法是什么？

在此先感谢 - 帕特里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T20:28:09.157

如果您将 billable 设置为 BooleanFIeld（请参阅：[https](https://docs.djangoproject.com/en/dev/ref/models/fields/#booleanfield) ://docs.djangoproject.com/en/dev/ref/models/fields/#booleanfield），将会更容易（并且对您来说更好）。对于 CharField，默认表单是文本输入框，对于 bool 字段，它是复选标记 - 对用户更有意义！而不是向人们解释他们必须使用 Y 或 N。

此外，您的模型没有主键。将来您可能需要它用于每个用户的视图定义。`userid = models.AutoField(primary_key=True)`可以为您省去很多麻烦。

如果您有主键，您也可以避免将来与重复的用户名混淆。例如，如果有两个不同的用户同名，我下面的解决方案会将 john.smith 计为一个用户（您的模型目前允许这样做，除非您添加 unique = True）。

例如。

```
 class InvoiceEntry(models.Model):
        username = models.CharField(max_length=20)  <-- the users name
        billtime = models.DecimalField()            <-- how much time has been spent
        billable = models.BooleanField()   # Now you just use consistent True or False 
```

就个人而言，对于这样的任务，我只是生成自己的字典。使用您的原始模型。

```
q = InvoiceEntry.objects.all() # only call it once
results = []
users = q.values_list('username',flat=True)
for user in users
    dict = { 
        "user": user,
        "unbillable":sum(q.filter(username = user,billable="N").values_list('billtime',flat=True)),
        "billable":sum(q.filter(username = user,billable="Y").values_list('billable',flat=True)),
        }
    results.append(dict) 
```

我建议将字段更改为布尔值：

```
q = InvoiceEntry.objects.all() # only call it once
results = []
users = q.values_list('username',flat=True)
for user in users
    dict = { 
        "user": user,
        "unbillable":sum(q.filter(username = user,billable=False).values_list('billtime',flat=True)),
        "billable":sum(q.filter(username = user,billable=True).values_list('billtime',flat=True)),
        }
    results.append(dict) 
```

所以现在，如果您在视图中使用 render_to_reponse 或类似的东西，您的模板将如下所示：

```
{% for result in results %}
{{ result.user }}
{{ result.unbillable }} 
{{ result.billable }}
{% endfor %} 
```

# java - 403 Forbidden: Jsoup 无法正确处理会话cookie？

> ID：15327018
> 
> 赞同：1
> 
> 时间：2013-03-10T20:12:04.377
> 
> 标签：java, jsoup, session-cookies

我正在尝试从 url 列表中下载 .html 中的网页，但是其中一些网站使用会话 cookie，当我尝试 Jsoup.connect("url") 时，我得到了 403。
所以，我使用了 Map / HashMap至于[如何使用 Jsoup 管理 cookie，使用 Jsoup](https://stackoverflow.com/questions/9069288/how-to-manage-cookies-with-jsoup)[维护 cookie 和会话，](https://stackoverflow.com/questions/7728447/how-to-maintain-variable-cookies-and-sessions-with-jsoup)[检索 cookie..，](https://stackoverflow.com/questions/12533310/how-to-retrieve-cookies-on-a-https-connection?rq=1)但仍然是 403。

真正让我惊讶的是，像 Mac Automator 这样一个非常简单的应用程序可以完成这项工作，实际上只保存文本而不是 html，但是仍然......

有谁知道如何克服这个cookie挫折？使用此页面的示例会很棒。[http://pubs.acs.org/doi/full/10.1021/ja312087x](http://pubs.acs.org/doi/full/10.1021/ja312087x)

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T22:18:38.930

看看这个答案[https://stackoverflow.com/a/15369631/516167](https://stackoverflow.com/a/15369631/516167)

您需要打开页面，然后发送表单数据（登录名、密码）、cookie 和 POST 所需的其他参数。

# ruby-on-rails - Rails：初始化器中的翻译

> ID：15327019
> 
> 赞同：5
> 
> 时间：2013-03-10T20:12:22.187
> 
> 标签：ruby-on-rails, translation, initializer

我有几个翻译隐藏在初始化器中，如下所示：

```
GROUP_GOVERNANCE_STYLES = [
  [I18n.t("constants.group_governance_styles.collective"), 1],
  [I18n.t("constants.group_governance_styles.electoral_democracy"), 2],
  [I18n.t("constants.group_governance_styles.dictatorship"), 3]
] 
```

在我的 en.yml 文件中，我有：

```
en:
  constants:
    group_governance_styles:
      collective: "collective"
      electoral_democracy: "electoral democracy"
      dictatorship: "dictatorship" 
```

不幸的是，当我尝试在视图中呈现这些翻译时，出现以下错误：

```
translation missing: en.constants.group_governance_styles.collective
translation missing: en.constants.group_governance_styles.electoral_democracy
translation missing: en.constants.group_governance_styles.dictatorship 
```

我也试过删除范围，但翻译仍然缺失。还有另一种方法可以解决这个问题吗？也许有一个我不知道的初始化程序的默认范围？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T20:57:35.200

AFAIK，翻译在初始化程序之后加载。尝试将其放入 environment.rb

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-12-25T00:26:17.347

如果您希望能够在其他初始化程序文件中使用您的翻译文件，您可以添加`I18n`初始化程序。

*配置/初始化程序/i18n.rb*

```
# Load application custom translations in order to use them in other initializers
I18n.load_path += Dir[Rails.root.join('config', 'locales', '*.{rb,yml}').to_s] 
```

# image - AS2 测验图像

> ID：15327020
> 
> 赞同：0
> 
> 时间：2013-03-10T20:12:36.917
> 
> 标签：image, actionscript, actionscript-2, movieclip

这是我构建的一个测验引擎（请随意使用）。我想通过添加图像来扩展它，除了变量之外我从来没有真正做过任何事情并且不知道如何工作，我认为这会起作用：

```
 onEnterFrame = function ()
{
    **pic._currentframe = (index1 + 1);**
}; 
```

有一个名为“pic”的影片剪辑；它充满了暗示答案的位图。当索引发生时，“pic”不会改变，它只是......什么都不做。

```
answer = new Array();
    answer[0] = ["okey dokey"];
    answer[1] = ["sample", "sample1"]
    question = new Array();
    question[0] = "Type 'Okey Dokey'";
    question[1] = "Sample?";
    index1 = 0;

    onEnterFrame = function ()
    {
        **pic._currentframe = (index1 + 1;**
    };

    onEnterFrame = function ()
    {
        question_txt.text = question[index1];
    };

    enter1.onRelease = function()
    {
        question_txt.text = question[index1];
        var correct = false;
        for (var i = 0; i < answer[index1].length; i++)
        {
            if (answer_input.text.indexOf(prevEntry) == -1)
            {
                if (answer_input.text.toLowerCase().indexOf(answer[index1][i]) >= 0)
                {
                    correct = true;

                }
            }
            if (answer_input.text == "admin")
            {
                correct = true;
            }
        }

        if (correct)
        {
            index1++;
            prevEntry = answer_input.text;
            answer_input.text = "";
        }
        else
        {
            answer_input.text = "incorrect";
        }
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T20:56:18.680

什么都没有发生，因为`_currentFrame`它是一个只读属性。改为使用[`gotoAndStop(index1 + 1)`](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00001274.html)。

此外，您应该重写

```
onEnterFrame = function ()
{
    **pic._currentframe = (index1 + 1;**
};

onEnterFrame = function ()
{
    question_txt.text = question[index1];
}; 
```

到

```
onEnterFrame = function ()
{
    pic.gotoAndStop(index1 + 1);
    question_txt.text = question[index1];
}; 
```

因为第二个 onEnterFrame 部分覆盖了第一个

# android - 没有错误但强制关闭

> ID：15327027
> 
> 赞同：-2
> 
> 时间：2013-03-10T20:13:24.920
> 
> 标签：android, forceclose

我是安卓新手。我正在编写简单的代码来根据带有按钮的 EditText 更改 TextView。我的代码没有错误。但是当我从一个设备执行它时，我会被强制关闭。

这是我的代码：

```
public class MainActivity extends Activity {

    //EditText et = (EditText)findViewById(R.id.editText1); << Error if uncomment
    //TextView tv = (TextView)findViewById(R.id.textView1); << Error if uncomment

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T20:17:20.637

您不能使用`findViewById()`就地初始化类变量

```
public class MainActivity extends Activity {

    EditText  et;
    TextView  tv;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // move these here
        et = (EditText)findViewById(R.id.editText1);
        tv = (TextView)findViewById(R.id.textView1);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }
} 
```

如果您考虑一下，布局只会在调用之后初始化，`setContentView`因此您甚至无法在该布局中找到元素，甚至在它被初始化甚至设置为活动的布局之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T20:20:43.260

请记住**始终**查看`LogCat`内容并发布您的问题

试试这个：

```
public class MainActivity extends Activity {

    // You can use findViewById only once the activity has finished creating, so move the initialization to onCreate function
    EditText  et;
    TextView  tv;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        et = (EditText)findViewById(R.id.editText1);
        tv = (TextView)findViewById(R.id.textView1);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }
} 
```

* * *

### 编辑：

你可以打开`LogCat`like：点击圆圈标记的按钮（在Eclipse的右下角）

![在此处输入图像描述](../Images/1ed98d69991e526c9ccb8c713b0b0497.png)

如果你没有它，你可以像下面这样调出它：

![在此处输入图像描述](../Images/a4c29fe85d1d49b3e97ce4599ba8974d.png)

PS：我使用的是mac，但其他操作系统应该是一样的

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-10T20:35:08.173

记住一件事。`findViewById`在你打电话后 总是打电话给，`setContent`否则它会给出这样的错误。

# javascript - jquery - 使用动态名称禁用按钮和输入

> ID：15327029
> 
> 赞同：0
> 
> 时间：2013-03-10T20:13:52.763
> 
> 标签：javascript, jquery, asp.net

我有一个与此类似的表结构，但上面和下面还有很多其他嵌套的东西。我需要禁用按钮和链接（或者可能更改按钮的可见性，而不是禁用它？）。

按钮 ID 和锚点名称是动态的（下面的值为 10），我已经尝试了所有我能想到的从表格中获取这些元素并禁用的方法，但似乎没有任何效果：

```
<tr>
<td class="t-last">
<button id="btnEdit10" class="ui-state-active ui-corner-all button-outer"    
onclick="ClientValues(10);">Edit</button>
<a name="lnkDelete10" class="cursor_hand" onclick="DeleteIt(10,200);">
<u>Delete</u>
</a>
</td>
<tr>
<td class="t-last">
<button id="btnEdit17" class="ui-state-active ui-corner-all button-outer"    
onclick="ClientValues(17);">Edit</button>
<a name="lnkDelete17" class="cursor_hand" onclick="DeleteIt(17,200);">
<u>Delete</u>
</a>
</td> 
```

我猜正则表达式将是我最好的选择，但我仍然没有让它工作。这是我试图用来禁用按钮，但我无法访问它：

```
$('btnEdit10').attr("disabled", true); //after looping to the control 
```

任何帮助将不胜感激！

编辑：我的问题不是很清楚。我正在尝试禁用以“btnEdit”开头的每个按钮以及以“lnkDelete”开头的每个链接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T20:19:31.090

如果我理解得很好，就像这样

```
 $('#btnEdit' + dynamic_part).attr("disabled", disable); 
```

更新：

`btnEdit`您可以选择所有以这样开头的 id

```
 $("[id^=btnEdit]").attr("disabled", disable); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T20:36:40.077

要禁用以“btnEdit”开头的所有内容，请使用“attributes started with”选择器：

```
$('[id^="btnEdit"]').prop("disabled", true); 
```

或两者兼而有之：

```
$('[id^="btnEdit"], [id^="lnkDelete"]').prop("disabled", true); 
```

**编辑：**

或许：

```
$('[id^="btnEdit"]').prop("disabled", true);
$('[id^="lnkDelete"]').attr("onclick", ""); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T20:23:53.593

如果您只想禁用特定按钮，那么您可以执行以下操作...

```
$('#btnEdit10').attr("disabled", disable); 
```

否则，如果您想控制一组按钮以禁用，您可以执行 InTry 提到的操作并在选择器名称旁边设置一个变量...

```
$('#btnEdit' + my_number).attr("disabled", disable); 
```

并通过一些简单的编码将适当的数字值存储到该变量（my_number）中。

# javascript - 添加向上滚动到动画面板

> ID：15327030
> 
> 赞同：1
> 
> 时间：2013-03-10T20:13:53.357
> 
> 标签：javascript, scroll, jquery-animate

我创建了一个面板，使用以下方式单击动画：

```
 <script>
function toggleSlider() {
    if ($("#panelThatSlides").is(":visible")) {
        $("#contentThatFades").animate(
            {
                opacity: "0"
            },
            600,
            function(){
                $("#panelThatSlides").slideUp();
            }
        );
    }
    else {
        $("#panelThatSlides").slideDown(600, function(){
            $("#contentThatFades").animate(
                {

                 opacity: "1",
                },
                600
            );
        });
    }   
}
</script> 
```

这很好用，但是当它针对某些屏幕尺寸进行动画处理时，您看不到内容（它位于浏览器底部边缘下方）。我需要做的是同时让页面向上滚动 - 有什么想法吗？yhx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T20:55:14.263

您需要的基本功能是：

```
$('html,body').animate({ 
  scrollTop: $('#panelThatSlides').offset().top 
}, 600); 
```

> **更新：**

只需将 id [ `id="sliderbtn"`] 添加到您的锚点并删除`onclick`事件。

```
 <a href="#" onclick="toggleSlider();"><img alt="" src="/images/css/blind.jpg" /></a> 
```

用这个更新你的javascript：

```
$(document).ready(function() {
$("#sliderbtn").click(function () {
if ($("#panelThatSlides").is(":visible")) {
    $("#contentThatFades").animate(
        {
            opacity: "0"
        },
        600,
        function(){
            $("#panelThatSlides").slideUp();
        }
    );
}
else {
    $("#panelThatSlides").slideDown(600, function(){
        $("#contentThatFades").animate(
            {
                opacity: "1"
            },
            600
        );
        $('html,body').animate({ 
         scrollTop: $('#panelThatSlides').offset().top 
        }, 600);
    });
}  
});
}); 
```

看看这是不是你想要的。:)

# php - 通过 PHP 在 MySQL 中保存“文本”类型的内容

> ID：15327032
> 
> 赞同：0
> 
> 时间：2013-03-10T20:14:07.433
> 
> 标签：php, html, mysql

我正在尝试使用 PHP 创建一个讨论论坛。我已经为不同的帖子声明了一个帖子表，其中包含 id 和内容等属性（列）。

内容类型为“LONGTEXT”，排序规则“latin1_swedish_ci”

这是在数据库部分。

现在PHP编码如下

```
if(!$_SESSION['signed_in'])
{
    echo 'You must be signed in to post a reply.';
}
else
{
    //a real user posted a real reply
    $sql = "INSERT INTO 
                posts(post_content,
                      post_date,
                      post_topic,
                      post_by) 
            VALUES ('" . $_POST['reply-content'] . "',
                    NOW(),
                    " . Mysql_real_escape_string($_GET['id']) . ",
                    " . $_SESSION['user_id'] . ")";

    $result = mysql_query($sql);

    if(!$result)
    {
        echo 'Your reply has not been saved, please try again later.';
    }
    else
    {
        echo 'Your reply has been saved, check out <a href="topic.php?id=' . Htmlentities($_GET['id']) . '">the topic</a>.';
    }
} 
```

现在是问题部分。对于大多数帖子，我收到此错误：

> 您的回复尚未保存，请稍后再试。

当我的帖子内容很大（长度方面）时，肯定会出现此消息。但是这个错误也可能随机出现。

查询没有按照我的猜测执行。我使用的是“longtext”，所以长度不应该是问题。

任何人都可以找到真正的错误吗？

# java - MediaPlayer 暂停和播放错误

> ID：15327050
> 
> 赞同：1
> 
> 时间：2013-03-10T20:15:08.443
> 
> 标签：java, android, xml, if-statement, media-player

我正在使用 Java 和 XML 为 Android 构建一个应用程序。应用程序的用户必须能够听一首曲子并暂停它。所以我做了一个按钮，你可以用它来播放和暂停曲子。我做了一个必须改变`src`的函数。但是 Eclipse 在和`ImageView`处给了我一个错误，上面写着：*"mp cannot be resolved"*。`mp.start()``mp.pause()`

 *我不知道我现在做错了什么，我希望有人能帮助我。

Java代码：

```
import android.media.MediaPlayer;
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageView;

public class Level01vraag01 extends Activity implements OnClickListener {

    int playknopvariable = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.vraaglayout);
        setupButtonClickListeners();
        final MediaPlayer mp = MediaPlayer.create(Level01vraag01.this, R.raw.mcdonalds);
    }

    private void setupButtonClickListeners() {
        ImageView playsoundButton = (ImageView) findViewById(R.id.playsoundbutton);
        playsoundButton.setOnClickListener(this);
    }

    private void klikopplaybutton() {
        if (playknopvariable == 0) {
            mp.start();
            playknopvariable = 1;
            playsoundButton.setImageResource(R.drawable.playsoundbutton);
        } else {
            mp.pause();
            playknopvariable = 0;
            playsoundButton.setImageResource(R.drawable.pause);
        }
    }

    public void onClick(View v) {
        switch (v.getId()) {
        case R.id.playsoundbutton:
            klikopplaybutton();
            break;
        } 
```

XML 代码：

```
<ImageView
    android:id="@+id/playsoundbutton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/guessbutton"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="33dp"
    android:src="@drawable/playsoundbutton" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T20:20:58.917

那是因为我认为您已经在 onCreate 方法上声明并实例化了 mp ，并且在 klikopplaybutton() 方法中无法访问它。

尝试这样的事情。

```
public class Level01vraag01 extends Activity implements OnClickListener {

    int playknopvariable = 0;
    MediaPlayer mp;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.vraaglayout);
        setupButtonClickListeners();
        mp = MediaPlayer.create(Level01vraag01.this, R.raw.mcdonalds);

    }

private void setupButtonClickListeners()
{
    ImageView playsoundButton = (ImageView) findViewById(R.id.playsoundbutton);
    playsoundButton.setOnClickListener(this);
} 
```

**更新**您的 ImageView 上的错误。

您在 playsoundButton ImageView 对象中遇到错误，因为您再次声明它并在 setupButtonClickListeners 方法中执行了 findViewById，并且在 klikopplaybutton 方法中无法访问它。

试试这个。

```
public class Level01vraag01 extends Activity implements OnClickListener {

    int playknopvariable = 0;
    MediaPlayer mp;
    ImageView playsoundButton;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.vraaglayout);
        setupButtonClickListeners();
        mp = MediaPlayer.create(Level01vraag01.this, R.raw.mcdonalds);

    }

    private void setupButtonClickListeners(){
        playsoundButton = (ImageView) findViewById(R.id.playsoundbutton);
        playsoundButton.setOnClickListener(this);
    }

    private void klikopplaybutton(){

        if (playknopvariable == 0){
           mp.start();
           playknopvariable = 1;
           playsoundButton.setImageResource(R.drawable.playsoundbutton);
       }else{
           mp.pause();
           playknopvariable = 0;
           playsoundButton.setImageResource(R.drawable.pause);
   }

   public void onClick(View v) {

        switch(v.getId()){
        case R.id.playsoundbutton:
            klikopplaybutton();
        break;
   }

} 
```*

# c# - 通过外部应用程序的窗口类名获取句柄并检查gui中是否存在某些控件

> ID：15327054
> 
> 赞同：1
> 
> 时间：2013-03-10T20:15:27.277
> 
> 标签：c#

正如标题所说：

有没有办法通过使用窗口 ClassName 来获取非托管应用程序的句柄，然后在应用程序的 GUI 中检查是否存在具有特定名称的控件？

例如，假设有一个名为的应用程序`"Math.exe"`包含一个控件：名为`"value1.text"`的文本框和窗口 ClassName 是`"math"`；

`"math"`因此，我将使用在我的情况下的类的名称来获取应用程序的句柄，如果有一个名为`"value1.text"`.

为了完成这项任务，我需要什么？

我**不是**要求代码只是对我应该做什么的基本解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T23:47:20.390

您将不得不深入研究 Windows API 的世界。如果我没记错的话，您必须枚举所有顶级窗口才能找到您所追求的应用程序，然后通过其子窗口向下查找控件。

对于初学者，请查看[http://pinvoke.net/default.aspx/user32/EnumWindows.html 。](http://pinvoke.net/default.aspx/user32/EnumWindows.html)

# ruby-on-rails-3 - Capistrano EC2 - 无法连接

> ID：15327058
> 
> 赞同：0
> 
> 时间：2013-03-10T20:16:04.277
> 
> 标签：ruby-on-rails-3, deployment, amazon-ec2, capistrano

我是 ssh 新手，并使用 capistrano 将 rails 应用程序部署到 EC2。我已经使用 CloudFormation 设置了一个 rails 环境。我在 EC2 管理界面中生成了一个密钥对并下载了它。我可以使用 ec2-user@xxxamazonaws.com SSH 到我的 EC2 实例。当我运行 cap deploy:setup 时，终端提示输入密码。我不确定此密码的用途或我的 deploy.rb 中应该包含什么才能连接。在过去的 8 个小时里，我已经阅读了我能找到的每一篇博文，但这对我来说没有多大意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T04:58:38.363

您需要告诉 capistrano 您希望连接的用户，以及您的 ssh 密钥在 deploy.rb 文件中的位置。例如。

```
set :user, "ec2-user"
ssh_options[:keys] = %w(~/.ec2/my-secret.pem) 
```

将以下选项放入其中也非常有用，以便您在尝试从您的 ec2 实例连接到 3rd 方站点（如 Github）时可以利用 ssh 密钥转发。

```
ssh_options[:forward_agent] = true
default_run_options[:pty] = true 
```

# java - 数据库文件结构和索引及实现

> ID：15327059
> 
> 赞同：0
> 
> 时间：2013-03-10T20:16:05.787
> 
> 标签：java, c, database, tree, indexing

我一直在阅读有关如何实现数据库索引以及如何从 Silberschatz 组织数据库文件的信息。
该描述是关于直接指向磁盘块的树，并描述这些树如何最小化块访问。
但我不明白这个描述。我的意思是树（B 或 B+）是用某种应用程序语言实现的，例如 C/C++（可能是 Java）对吧？
那么这样的树形结构怎么能引用磁盘块呢？任何人都可以帮助清除这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T20:23:00.183

说树（的叶子）直接指向磁盘块似乎有点误导。我希望这意味着“块索引”存储在树的叶子中 - 然后可能是文件中特定块（某种大小）的索引，而不是磁盘。

# java - Parse 没有给我正确的日期格式

> ID：15327060
> 
> 赞同：0
> 
> 时间：2013-03-10T20:16:10.660
> 
> 标签：java, parsing, date, simpledateformat, jdatechooser

```
public LigneReservation(Date dateArrivee, Date dateDepart,
        String categorie, int quantite) {
    super();

    SimpleDateFormat form = new SimpleDateFormat("yyyy-MM-dd");
    try {
        this.dateArrivee = form.parse(form.format(dateArrivee));
        this.dateDepart = form.parse(form.format(dateDepart));
        String s = form.format(dateArrivee);

        System.out.print(form.parse(s));
    } catch (ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    this.categorie = categorie;
    this.quantite = quantite;
} 
```

这就是我调用该方法的方式：

```
ctrlRes.setLigneCourante(ctrlRes.creerLigne(dateArrivee.getDate(),
    dateDepart.getDate(), (String)listeCatCh.getSelectedItem(),
    Integer.parseInt(champQteCh.getText()))); 
```

所以我首先从字段中提取日期`JDateChooser`，然后将它们传递给构造函数`LigneReservation`，字符串`S`向我显示了我想要的正确格式“yyyy-mm-dd”但是当我将它解析为日期时，它给了我这样的日期：`Wed Mar 13 00:00:00 EDT 2013`. 我该如何纠正它？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T20:22:11.713

> 但是当我将它解析为一个日期时，它给了我这样的日期： Wed Mar 13 00:00:00 EDT 2013。

当你解析它时，你会得到一个`Date`. 使用*总是*给你相同的格式。[`Date.toString()`](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html#toString%28%29)

 *> 将此 Date 对象转换为以下形式的字符串：
> 
> ```
> dow mon dd hh:mm:ss zzz yyyy 
> ```

如果您想将 a 格式化`Date`为特定格式，请`SimpleDateFormat`改用。

（或者，使用[Joda Time](http://joda-time.sf.net)及其解析/格式化工具，它们通常更好——就像 API 的其余部分一样。）*

# regex - Perl 正则表达式捕获垃圾邮件模式“ÿþ<”？

> ID：15327061
> 
> 赞同：0
> 
> 时间：2013-03-10T20:16:14.710
> 
> 标签：regex, perl

我的论坛被一些在其帖子中包含字符“ÿþ<”（使用 iso-8859-1 解码时）的机器人发送垃圾邮件。没有链接，只有包含这些字符的随机文本。这是一个例子：

> AZ夫妇减少工作的事情我们他们你ÿþ<服务很忙，一得到男士获取ÿþ<评估只需购买数据信息他们的持续时间ÿþ<他们关于她重新参与的结果。业务有ÿþ<用户运行确保数据街道安全凤凰

它似乎是小于之前的字节 FF 和 FE。

**我想开发一个 Perl 正则表达式来捕捉这些字符，但我不太清楚该怎么做。任何人都可以就正则表达式提供建议吗？** 他们发布此内容的目的可能是什么？我知道 xruner 会探测网站的漏洞，但这与我见过的任何论坛链接快捷方式都不一样。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T21:06:56.037

使用 UTF-16le 编码时，U+FEFF 变为 FF FE。

在文本的开头，U+FEFF 是 UTF-16le BOM。在其他地方，它是一个零宽度的不间断空间（也就是说一个不可见的、无功能的字符）。

我能想到两种攻击性用途。两者都涉及在 HTML 被另一个程序使用之前由一个程序检查恶意内容的情况。

*   如果检查器在遇到时被愚弄切换到 UTF-16le `FF FE`（因为它错误地认为它是 BOM），则以下内容`<`将显示为与它不同的东西`<`，从而绕过对`<`. 这将允许`\xFF\xFE<script>...</script>`（例如）绕过对这些标签的检查。

*   检查器可以正确确定`<\x{FEFF}script`（从 UTF-16le 解码）不是 HTML 元素，并允许`<\x{FEFF}script>...</script>`通过过滤掉所有 U+FEFF 实例的错误浏览器。这个浏览器会看到`<script>...</script>`哪里没有。

* * *

您可能计划删除字符，但这是个坏主意。删除会引入我上面提到的第二个安全问题。相反，您应该保留它们或将它们更改为[U+FFFD](http://www.fileformat.info/info/unicode/char/fffd/index.htm)。

```
s/[\xFE\xFF]/\x{FFFD}/g 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T20:21:04.343

以下正则表达式应适用于多字节字符：

```
$string =~ m/\x{00FF}/; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-10T20:26:46.653

这个怎么样？

```
#!/usr/bin/env perl

use strict;
use warnings;

{
    use bytes;
    /\xff\xfe\x3c/ and print "found\n" while <>;
} 
```

见[物料清单](http://en.wikipedia.org/wiki/Byte_order_mark#UTF-16)：

> UTF-16 (LE) FF FE 255 254 ÿþ

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-10T20:26:54.900

此 RegEx 将匹配这些多字节字符：`\xFF\xFE<`

# android - 获得额外的意图和 onCreate 方法？

> ID：15327062
> 
> 赞同：8
> 
> 时间：2013-03-10T20:16:24.197
> 
> 标签：android, android-intent, oncreate

我有 A、B 和 C 类。A 类向 B 发送意图，B 运行 C，C 返回到 B .....但是在 B 类的 onCreate 内部，它想要 A 类的意图。但是因为它来自 C 类它没有得到它，但我仍然需要 A 类的意图

关于如何解决这个问题的任何想法？我想一种解决方案可能是将 extra.getString 存储在数据库或类似数据库中？

```
Bundle extras = getIntent().getExtras();
 newString = extras.getString("ID"); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T20:48:41.203

由于我不完全了解您的活动流程，因此这是一种解决方案，但可能不是合适的解决方案。

当你开始新的活动时，多放一个

```
intent.putExtra("ID_FROM_A", value); // except for ActivityA value = mIdFromA
startActivity(intent); 
```

关于接收活动

```
onCreate()
{
    mIdFromA = getIntent().getStringExtra("ID_FROM_A");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T09:15:34.733

所以，如果我做对了：

活动一：

*   创建 intentAtoB
*   开始活动 B

活动 B

*   接收intentAtoB
*   创建intentBtoC
*   开始活动 C

活动 C

*   接收intentBtoC
*   做某事

现在： 活动 C：

1.  使用finish()返回活动B，或者

2.  重新开始活动 B？

如果为 1，当您返回 Activity B 时，它仍然会保留您在首次创建时设置的所有内容。因此，您需要从 B 的 onCreate 中的意图中提取所有内容。

如果是 2，您只需将信息传递到用于启动每个活动的意图中。

如果您可以 (a) 确认 if 的顺序和 (b) 阐明上述内容为何行不通的原因，我相信我们可以继续前进。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-04T18:53:48.563

您可以通过额外的证明“它是 A 类”从 A 类获取意图，然后将其设置为本地意图；

```
extras = getIntent().getExtras();
String a = extras.get("KEY");

if (a.equlas("A_CLASS") {
    class_a_extras = getIntent();
} 
```

# c - 指针对齐问题的原因是什么？

> ID：15327063
> 
> 赞同：0
> 
> 时间：2013-03-10T20:16:25.413
> 
> 标签：c, arrays, double-pointer

我的程序从文件中读取单词，并将它们作为多个单词存储在动态分配的数组中。

我的问题是当我打印数组时在 while 循环中，它似乎指向正确的单词。在代码通过 while 循环后，当我打印所有索引时，'ice' 是最后一个词，我试图找出原因。

```
FILE *fileptr=fopen("file.txt","r");

char** DataArray;
int num_of_words=0;

char str[10];

while(fscanf(fileptr,"%s",&str)!=-1)
{
    num_of_words++;
}

DataArray=(char**)malloc(num_of_words*sizeof(char*));

rewind(fileptr);

int i=0;

while(fscanf(fileptr,"%s",&str)!=-1)
{
    printf("%s",str);
    int len=strlen(str);
    printf("\t%d",len);

    DataArray[i]=(char*)malloc(len*sizeof(char));
    DataArray[i]=str;
    printf("\t%s\n",DataArray[i]);
    i++;
}

printf("\n");
//printf("%s\n",*(DataArray+2));
printf("%s\n",DataArray[0]);
printf("%s\n",DataArray[1]);
printf("%s\n",DataArray[2]);

fclose(fileptr); 
```

输出：

```
apple  5   apple
mango  5   mango
ice  3   ice

ice
ice
ice 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T20:30:38.643

分配一个指针是不够的。特别是当 str 每次通过循环都取一个新值时。

```
DataArray[i]=(char*)malloc(len*sizeof(char));
DataArray[i]=str;
printf("\t%s\n",DataArray[i]);
i++; 
```

你必须使用`strcpy`你编写这个程序的方式，因为你已经使用 malloc 分配了空间。您也可以使用 strdup，但这会为您创建动态存储。如果由我决定，我会按照您的方式编写，首先使用 malloc，然后

`strcpy(DataArray[i], str);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T20:24:17.850

`DataArray[i] = malloc(len);`在此表达式中，malloc 分配`len`字节并返回指向这些字节的指针。该指针被分配给`DataArray[i]`.

`DataArray[i] = str;`此表达式将指向 str 的第一个字节的指针分配给`DataArray[i]`，这不是您期望它执行的操作。还记得你从中得到的那个指针`malloc`吗？它去哪儿了？

我建议使用该`strcpy`函数，因为它旨在将字符串从一个数组复制到另一个数组：

```
DataArray[i] = malloc(len + 1); // remember to allow space for a '\0' terminator!
strcpy(DataArray[i], str); 
```

附言。不要强制转换 malloc 的返回值，也不要乘以`sizeof (char)`. 除了使您的代码更难阅读之外，这些都没有意义。这是一个常见的问题，大多数书籍都回答了这个问题。你在看哪本书？

# java - 休眠基础

> ID：15327069
> 
> 赞同：0
> 
> 时间：2013-03-10T20:17:07.037
> 
> 标签：java, hibernate, design-patterns

我正在使用hibernate和spring mvc并使用注释..如果存在子实体，我希望不删除任何父实体。现在我可以通过代码明确地做到这一点，但它可以直接通过休眠来完成，我的意思是通过配置？

其次，在春天我得到 sessionFactory 以及何时（在每个 dao 中）。要获得会话，我使用

> sessionFactory.getCurrentSession()

我应该在单个类中获取 session/sessionFactory 并在任何地方使用它吗？

我正在使用

> sessionFactory.getCurrentSession().save(batch);
> 
> sessionFactory.getCurrentSession().delete(batch);

那么我不需要担心关闭和开始会话，因为它是自动完成的。是正确的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T22:38:53.673

1.  这是由您应该在数据库中拥有的外键约束来保证的。如果子项对其父项具有外键，并且您尝试删除父项，则数据库将拒绝删除并且您将收到异常。

2.  是的，Spring 为您打开一个会话并将其关联到当前事务，并在事务结束时自动关闭它。您不应该关心打开和关闭会话。将会话工厂注入您的 DAO，并在每次需要时从该工厂获取当前会话。

# c# - 如何比较会话的价值？网

> ID：15327071
> 
> 赞同：-3
> 
> 时间：2013-03-10T20:17:24.473
> 
> 标签：c#, asp.net

我找不到如何比较会话值的方法。

查询数据库：

```
 conexion.Open();
        SqlCommand comando = new SqlCommand("SELECT id_cliente,alias,area FROM tbleuser WHERE usuario=@username AND pass=@thepassword",conexion);
        comando.Parameters.AddWithValue("@username",user.Text);
        comando.Parameters.AddWithValue("@thepassword", pas.Text);
        SqlDataReader r = comando.ExecuteReader();

        while(r.Read())
        {

            Session["UsuarioId"] = r["id_cliente"].ToString();
            Session["AreaUsuario"] = r["area"].ToString();
            Session["AliasUsuario"] = r["alias"].ToString();
           checkUser();
        } 
```

checkUser 方法应该将什么样的用户与 Alias 字段进行比较，这是我使用的选项。

# 1

```
if(Session["AliasUsuario"].ToString() == "Doctors")
{
//not working
} 
```

# 2

```
if(Convert.ToString(Session["AliasUsuario"]) == "Doctors")
{
//not working
} 
```

# 3

```
if(Convert.ToString(Session["AliasUsuario"]).Equals("Doctors"))
{
//not working
} 
```

# 4

```
if(Session["AliasUsuario"].ToString().Equals("Doctors"))
{
//not working
} 
```

有什么建议么？在继续之前，我需要知道登录的用户类型。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T21:11:24.127

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.read.aspx)：

> 返回值
> 类型：System.Boolean如果有更多行则为
> **真；**否则**为假**。

现在，如果您的命令返回多于一行，则可能会设置预期之外的值。这是需要注意的。

从您的评论看来，您可能正在尝试在设置会话变量之前对其进行读取。

此外，很可能值`Doctors`已通过空白字符 ( `\r`, `\n`, `\r\n`, `space`) 滑入数据库，这些字符在 SQL Server 管理工作室等数据库工具中通常不可见。要检查是否是这种情况，您可以使用以下内容：

```
if(Session["AliasUsuario"] != null)
{
    if (Session["AliasUsuario"].ToString().ToLower().Contains("doctors"))
    {
        // that's the case
    }
} 
```

还可以尝试检查循环`Session["AliasUsuario"]`后的值是多少。`while`一个简单的断点就可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T20:26:47.007

如果`SqlDataReader r = comando.ExecuteReader();`不返回任何行，则您没有为会话设置任何内容，因此您无法阅读任何
我会使用的内容，例如：

```
if (r.HasRows)
{
    while(r.Read())
    {
        Session["UsuarioId"] = r["id_cliente"].ToString();
        Session["AreaUsuario"] = r["area"].ToString();
        Session["AliasUsuario"] = r["alias"].ToString();
        checkUser();
    }   
}
else
{
        Session["UsuarioId"] = "none";
        Session["AreaUsuario"] = "none";
        Session["AliasUsuario"] = "none";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T20:26:54.883

看起来可能忽略了一个简单的错误：字符串比较区分大小写（除非您另外指定）。

另外，也许您正在比较单数和复数（`Doctor`vs `Doctors`）？

第三，配置文件中的键也区分大小写。所以`AliasUsuario`不一样`Aliasusuario`。

# php - 从 $_SESSION 变量中只获取一个数组

> ID：15327073
> 
> 赞同：0
> 
> 时间：2013-03-10T20:17:36.293
> 
> 标签：php, session, session-variables

我有一个存储在会话变量中的数组。但是，我只想将 SESSION 变量中数组的一部分发送到另一个页面，具体取决于单击了哪个按钮。

按钮的代码

```
foreach($name as  $bookname => $name){
        echo "<div class='control-group' align='center'><h4>$bookname</h4><a href='/handler' class='btn btn-large btn-block btn-primary' type='button'>follow $name</a></ul></div>";    
        $_SESSION['name'] = $name;
        $_SESSION['bookname'] = $bookname
        print_r($_SESSION['name']);

        } 
```

print_r 给了我数组中的每一个，我想要做的是当单击按钮时，只有该按钮的 $name 设置为 $_SESSION。我现在拥有它的方式只为数组的最后一部分设置了 SESSION。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:22:11.383

它仅适用于最后一部分，因为循环会覆盖每个前面的值。

如果要在单击后设置 SESSION 中的值，则必须将请求发送到不同的页面（HTTP GET 或 POST 请求）或 AJAX 请求来设置值。

# c++ - 如何在 osx 上使用 waf 链接 opengl 和 glut？

> ID：15327074
> 
> 赞同：4
> 
> 时间：2013-03-10T20:17:46.253
> 
> 标签：c++, macos, opengl, glut, waf

我正在尝试使用 waf 在 osx 上构建一个 C++ opengl 程序，但无法让它工作。

通常，当我编译一个 opengl 程序时，我会在终端中使用它：

```
g++ main.cpp -framework GLUT -framework OpenGL 
```

我使用以下 wscript：

```
top = '.'
out = 'build'

def options(opt):
    opt.load('compiler_cxx')

def configure(conf):
    conf.load('compiler_cxx')
    # conf.env.append_value('LINKFLAGS', '-framework GLUT -framework OpenGL')

def build(bld):
    bld.program(
      source       = 'main.cpp', 
      target       = 'a',
      linkflags    = ["-framework GLUT", "-framework OpenGL"], 
  ) 
```

但是当我构建它时出现链接错误：

```
$ waf configure
Setting top to                           : /Users/tt/Documents/class/labs/Lab 3 fixed/src 
Setting out to                           : /Users/tt/Documents/class/labs/Lab 3 fixed/src/build 
Checking for 'g++' (c++ compiler)        : /usr/bin/g++ 
'configure' finished successfully (0.040s)
$ waf
Waf: Entering directory `/Users/tt/Documents/class/labs/Lab 3 fixed/src/build'
[2/2] cxxprogram: build/main.cpp.1.o -> build/a
Undefined symbols for architecture x86_64:
"_glViewport", referenced from:
  resize(int, int)in main.cpp.1.o
"_glMatrixMode", referenced from:
  resize(int, int)in main.cpp.1.o
  Camera::show()     in main.cpp.1.o
"_glLoadIdentity", referenced from:
  resize(int, int)in main.cpp.1.o
  Camera::show()     in main.cpp.1.o
"_gluPerspective", referenced from:
  resize(int, int)in main.cpp.1.o
"_glutPostRedisplay", referenced from:
  resize(int, int)in main.cpp.1.o
  idle()    in main.cpp.1.o
"_gluLookAt", referenced from:
  Camera::show()     in main.cpp.1.o
"_glRotatef", referenced from:
  Camera::show()     in main.cpp.1.o
"_glTranslatef", referenced from:
  Camera::show()     in main.cpp.1.o
"_glEnableClientState", referenced from:
  Mesh::render()     in main.cpp.1.o
"_glUseProgram", referenced from:
  Mesh::render()     in main.cpp.1.o
"_glGetAttribLocation", referenced from:
  Mesh::render()     in main.cpp.1.o
"_glEnableVertexAttribArray", referenced from:
  Mesh::render()     in main.cpp.1.o
"_glBindBuffer", referenced from:
  Mesh::render()     in main.cpp.1.o
  Mesh::Mesh(char*)in main.cpp.1.o
"_glVertexPointer", referenced from:
  Mesh::render()     in main.cpp.1.o
"_glVertexAttribPointer", referenced from:
  Mesh::render()     in main.cpp.1.o
"_glNormalPointer", referenced from:
  Mesh::render()     in main.cpp.1.o
"_glDrawElements", referenced from:
  Mesh::render()     in main.cpp.1.o
"_glDisableClientState", referenced from:
  Mesh::render()     in main.cpp.1.o
"_glEnable", referenced from:
  display()    in main.cpp.1.o
"_glClearColor", referenced from:
  display()    in main.cpp.1.o
"_glClear", referenced from:
  display()    in main.cpp.1.o
"_glutSwapBuffers", referenced from:
  display()    in main.cpp.1.o
"_glCreateProgram", referenced from:
  setupGLSL(char*)in main.cpp.1.o
"_glCreateShader", referenced from:
  setupGLSL(char*)in main.cpp.1.o
"_glShaderSource", referenced from:
  setupGLSL(char*)in main.cpp.1.o
"_glCompileShader", referenced from:
  setupGLSL(char*)in main.cpp.1.o
"_glGetShaderiv", referenced from:
  setupGLSL(char*)in main.cpp.1.o
"_glGetShaderInfoLog", referenced from:
  setupGLSL(char*)in main.cpp.1.o
"_glAttachShader", referenced from:
  setupGLSL(char*)in main.cpp.1.o
"_glLinkProgram", referenced from:
  setupGLSL(char*)in main.cpp.1.o
"_glGenBuffers", referenced from:
  Mesh::Mesh(char*)in main.cpp.1.o
"_glBufferData", referenced from:
  Mesh::Mesh(char*)in main.cpp.1.o
"_glutInit", referenced from:
  _main in main.cpp.1.o
"_glutInitDisplayMode", referenced from:
  _main in main.cpp.1.o
"_glutInitWindowSize", referenced from:
  _main in main.cpp.1.o
"_glutCreateWindow", referenced from:
  _main in main.cpp.1.o
"_glutDisplayFunc", referenced from:
  _main in main.cpp.1.o
"_glutIdleFunc", referenced from:
  _main in main.cpp.1.o
"_glutReshapeFunc", referenced from:
  _main in main.cpp.1.o
"_glutKeyboardFunc", referenced from:
  _main in main.cpp.1.o
"_glutKeyboardUpFunc", referenced from:
  _main in main.cpp.1.o
"_glutSpecialFunc", referenced from:
  _main in main.cpp.1.o
"_glutMouseFunc", referenced from:
  _main in main.cpp.1.o
"_glutMotionFunc", referenced from:
  _main in main.cpp.1.o
"_glutMainLoop", referenced from:
  _main in main.cpp.1.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status
Waf: Leaving directory `/Users/n7down/Documents/class/spring 2013/5542 (Real Time Rendering)/labs/Lab 3 fixed/src/build'
Build failed
-> task in 'a' failed (exit status 1): 
{task 4537197904: cxxprogram main.cpp.1.o -> a}
['/usr/bin/g++', '-framework GLUT', '-framework OpenGL', 'main.cpp.1.o', '-o', '/Users/tt/Documents/class/labs/Lab 3 fixed/src/build/a'] 
```

有没有办法可以修复/做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T10:41:43.300

好吧，您的问题似乎是直接使用`LINKFLAGS`“-framework X”之类的参数。它将被python错误地解释。直接使用**WAF**`framework`提供的参数：

 **```
top = '.'
out = 'build'

def options(opt):
    opt.load('compiler_cxx')

def configure(conf):
    conf.load('compiler_cxx')

def build(bld):
    bld.program(
        source       = 'main.cpp', 
        target       = 'a',
        framework    = ["GLUT", "OpenGL"], 
    ) 
```**

# java - 合并时如何避免hsqldb中的OOM？

> ID：15327075
> 
> 赞同：1
> 
> 时间：2013-03-10T20:17:46.457
> 
> 标签：java, sql, merge, hsqldb

我有两个表，其中第一个非常大（> 50M 行）：

```
CREATE CACHED TABLE Alldistances (
    word1 VARCHAR(70), 
    word2 VARCHAR(70), 
    distance INTEGER, 
    distcount INTEGER
); 
```

第二个也可以很大（> 5M 行）：

```
CREATE CACHED TABLE tempcach (
    word1 VARCHAR(70), 
    word2 VARCHAR(70), 
    distance INTEGER, 
    distcount INTEGER
); 
```

两个表都有索引：

```
CREATE INDEX mulalldis ON Alldistances (word1, word2, distance);
CREATE INDEX multem ON tempcach (word1, word2, distance); 
```

在我的 java 程序中，我使用准备好的语句来填充/预组织 tempcach 表中的数据，然后将表合并到 alldistances：

```
MERGE INTO Alldistances alld USING ( 

    SELECT word1, 
           word2, 
           distance, 
           distcount FROM tempcach 

    ) AS src (

        newword1, 
        newword2, 
        newdistance, 
        newcount

    ) ON (

            alld.word1 = src.newword1 
        AND alld.word2 = src.newword2 
        AND alld.distance = src.newdistance 

    ) WHEN MATCHED THEN 

        UPDATE SET alld.distcount = alld.distcount+src.newcount 

    WHEN NOT MATCHED THEN 

        INSERT (

            word1, 
            word2, 
            distance, 
            distcount

        ) VALUES (

            newword1, 
            newword2, 
            newdistance, 
            newcount
        ); 
```

然后删除或截断 tempchach 表并用新数据填充。在合并期间，我得到了 OOM，我猜这是因为整个表在合并期间被加载到内存中。所以我将不得不分批合并，但我可以在 SQL 中执行此操作还是在我的 java 程序中执行此操作。或者有没有一种聪明的方法可以在合并时避免OOM？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:50:53.093

可以在 SQL 中以块（批次）的形式合并。你需要

*   限制每个块中临时表的行数
*   删除那些相同的行
*   重复

SELECT 语句应该使用 ORDER BY 和 LIMIT

```
SELECT word1, 
       word2, 
       distance, 
       distcount FROM tempcach
       ORDER BY primary key or unique columns 
       LIMIT 1000

) AS src ( 
```

合并后，delete语句会选择相同的行进行删除

```
DELETE FROM tempcach WHERE primary key or unique columns IN
      (SELECT primary key or unique columns FROM tempcach 
       ORDER BY primary key or unique columns LIMIT 1000) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T20:55:39.607

首先，就因为这种事情让我很烦，你为什么要在一个子选择中选择临时表的所有字段？为什么不使用更简单的 SQL：

```
MERGE INTO Alldistances alld USING tempcach AS src (
    newword1, 
    newword2, 
    newdistance, 
    newcount
) ON (
        alld.word1 = src.newword1 
    AND alld.word2 = src.newword2 
    AND alld.distance = src.newdistance 
) WHEN MATCHED THEN 
    UPDATE SET alld.distcount = alld.distcount+src.newcount 
WHEN NOT MATCHED THEN 
    INSERT (
        word1, 
        word2, 
        distance, 
        distcount
    ) VALUES (
        newword1, 
        newword2, 
        newdistance, 
        newcount
    ); 
```

要让数据库避免将整个表加载到内存中，您需要在两个表上建立索引。

```
CREATE INDEX all_data ON Alldistances (word1, word2, distance);
CREATE INDEX tempcach_data ON tempcach (word1, word2, distance); 
```

# c# - 外部类中的 Mappath 和 FileStream 在服务器上无法正常工作

> ID：15327077
> 
> 赞同：-1
> 
> 时间：2013-03-10T20:17:53.757
> 
> 标签：c#, asp.net

这是我在主目录的子文件夹中的类中编写的代码：

```
string c = global.RandomCode(32) + "." + ext;
using (FileStream fs = new FileStream(HttpContext.Current.Server.MapPath(@"..\adimgs\"+c),FileMode.CreateNew,FileAccess.Write))
{
    byte[] a = Convert.FromBase64String(img);
    fs.Write(a, 0, a.Length);
} 
```

这在 localhost 中效果很好，但在服务器端却不行。当我使用 jquery 和一个包含大量发布数据的页面调用此类中的函数时，我没有看到用于识别问题的错误。

我编写了一个代码，将 HttpContext.Current.Server.MapPath(@"..\adimgs\"+c) 保存在数据库中，结果符合预期。文件流（在本地主机中工作）一定有问题，可能是一些访问授权问题。谁能告诉我这段代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T21:02:07.383

我给了IIS用户写权限，问题就解决了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T20:30:14.043

使用波浪号语法正确映射：

~/

是应用程序（或网站）的根

HttpContext.Current.Server.MapPath("~/path/subpath/file.ext");

# javascript - 返回值如何保存？

> ID：15327078
> 
> 赞同：1
> 
> 时间：2013-03-10T20:17:55.833
> 
> 标签：javascript, function, return

方法/函数的调用语句是否保持其返回值类似于变量名称保持值的方式？

例如：

```
function Jump(height) {
    return height * 2;
}
Jump(3);       //Is the call statement 'Jump(3)' equal the return value of 6 similar to

var x = 3;  //how the variable 'x' is equal to the value of 3? 
```

* * *

编辑：我通过将变量和函数命名为相同的名称而给人留下了错误的印象。我纯粹是使用该变量作为比较来了解如何保存返回值。下次我会更好地措辞/组织我的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T20:20:18.070

函数和变量共享同一个命名空间。您定义了函数`Jump`然后调用它（但实际上并没有分配函数的结果（返回的内容）），所以它返回 6 但您实际上并没有将它存储在任何地方。然后，您通过将函数重新定义为具有相同名称的变量来覆盖您的函数，并将其赋值为 3

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T21:11:43.037

**一点关于表达式**

在您进行编辑之后，您似乎在询问`expressions`.

An`expression`基本上是一个具有`value`. 在您的示例中，`Jump(3)`和`var x = 3`都是表达式，因为两者都有一个值。换句话说，`Jump(3)`是一个带有值的表达式`6`，`(x=3)`实际上是一个计算结果为 的表达式`3`。

两者之间的唯一区别是第一个表达式也用`assignment operator`(ie `=`) 赋值，而第二个表达式“只是”一个值。就此而言，在您的示例中，变量`x`也是一个计算结果为的表达式`3`。

有关此主题的更多信息，请参阅[MDN - Javascript 中的表达式和运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Expressions_and_Operators#Assignment_operators)

**更重要的是**

这意味着当您将参数传递给函数[by-value](https://stackoverflow.com/questions/6605640/javascript-by-reference-vs-by-value)时，您实际上是在传递表达式的值。因此，在您的示例中`Jump(x)`，`Jump(3)`,`Jump((x=3))`和`Jump(Jump(1.5))`都将评估为`6`。

自然地，将常用操作的值存储在一个将作为表达式快速计算的变量中，比每次计算表达式时都进行计算的成本要低得多。

# c - “ar_ptr = arena_for_chunk(p);”是什么意思？意思是？

> ID：15327087
> 
> 赞同：0
> 
> 时间：2013-03-10T20:18:41.520
> 
> 标签：c

我正在通过 gdb 运行一个程序。它运行“free(buffer);”行 然后我收到此消息：程序收到信号 SIGSEGV，分段错误。

```
 0xb7e97103 in __GI___libc_free (mem=0xbffff11e) at malloc.c:2987
 2987     ar_ptr = arena_for_chunk(p); 
```

程序中的下一行是“fclose(inptr);” 我该如何开始解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T20:21:06.437

您的变量`buffer`为 null 或指向无法释放（或已被释放）的内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T20:45:10.880

您的问题的实际答案是，它`ar_ptr = arena_for_chunk(p);`是一个内部数据结构，它确定应该将内存释放到哪里。但是，如果你愿意，你可以继续在那里挖掘，直到你找到为什么`p`几乎可以肯定是`buffer`你传入的或者与它密切相关的某个值是“不正确的”——但这有点像在路灯下寻找你掉下来的钥匙因为你可以在那里看得更清楚，而不是试图在你丢弃它们的地方找到它们。

当标准库中的代码崩溃时，尤其是每次运行任何琐碎程序时都会调用的代码，那么 99.9% 的时间是由“错误输入”引起的——去查看调用函数的代码，而不是函数内部（尽管值得回顾一下出了什么问题，以确定是哪个输入参数导致了问题）。

实际的问题是您的代码`free()`使用错误的参数进行调用，这使得`arena_for_chunk`做错事 - 鉴于`mem = 0xbffff11e`上面一行中的值，我希望这`buffer`实际上是堆栈上的一个值，不应该被释放。

# java - Java构造函数问题

> ID：15327088
> 
> 赞同：5
> 
> 时间：2013-03-10T20:01:20.393
> 
> 标签：java, class

我创建了一个类文件和一个测试器文件。当我尝试使用构造函数创建对象时，它不会编译。

它说“PassTheClassTester.java:5：错误：PassTheClass 类中的构造函数 PassTheClass 不能应用于给定类型；”

请帮忙。这是我的代码：

```
 public class PassTheClass
{  
    private String myName = " ";
    private int myGrade;
    private String myEmotion = " ";

    public PassTheClass (String xMyName, String xMyEmotion)
    {myName = xMyName;
    myGrade = 0;
    myEmotion = xMyEmotion;}

    public String getMyName()
    {return myName;}

    public int getMyGrade()
    {return myGrade;}

    public String getMyEmotion()
    {return myEmotion;}

    public void setMyName (String yMyName)
    {myName = yMyName;}

    public void setMyGrade (int yMyGrade)
    {myGrade = yMyGrade;}

    public void setMyEmotion (String yMyEmotion)
    {myEmotion = yMyEmotion;}

}

    public class PassTheClassTester
{  
   public static void main(String[] args)
   {  
      PassTheClass demo = new PassTheClass("Squidward",94,"proud");

        System.out.println(student.getMyName());

   }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-10T20:23:14.217

您的构造函数接受`String, String`，但您正在传递`String, int, String`。

将参数添加`int`到构造函数，或`int`从调用中删除。

我的建议是添加一个 int 参数，即将构造函数更改为：

```
public PassTheClass (String xMyName, int xMyGrade, String xMyEmotion) {
    myName = xMyName;
    myGrade = xMyGrade;
    myEmotion = xMyEmotion;
} 
```

如果您仍然需要`String, String`构造函数，请将其更改为调用 3-arg 构造函数并传入您当前编码的初始值：

```
 public PassTheClass (String xMyName, String xMyEmotion) {
     this(xMyName, 0, xMyEmotion);
 } 
```

* * *

尽管在参数前加上“x”以将它们与字段名称区分开来并没有什么“错误”，但我从未见过这样的事情。java中的约定是参数名与字段名同名，`this.`赋值时使用，像这样

```
public PassTheClass (String myName, int myGrade, String myEmotion) {
    this.myName = myName;
    this.myGrade = myGrade;
    this.myEmotion = myEmotion;
} 
```

* * *

作为进一步的“风格”改进，不要在字段名称前加上“my”。*每个*领域都是隐含的“我”的东西；只需简单地命名它们，`name`即`grade`和`emotion`。

* * *

好的代码都是为了*清晰*：最好避免使用前缀，因为它们只会使代码混乱并降低可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T20:27:16.943

`public PassTheClass (String xMyName, String xMyEmotion)`您的构造函数需要 2 个参数，您在此处传递 3 个参数：

```
PassTheClass demo = new PassTheClass("Squidward",94,"proud"); 
```

编译器说“bleh？”

您可能需要另一个如下所示的构造函数：

```
public PassTheClass (String xMyName, int grade, String xMyEmotion)
    {myName = xMyName;
    myGrade = grade;
    myEmotion = xMyEmotion;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T20:26:05.773

你正在调用一个带有三个参数的构造函数，但你没有像那样声明一个。要使代码正常工作，您可以添加如下构造函数：

```
public PassTheClass (String myName, int myGrade, String myEmotion)
{
    this.myName = myName;
    this.myGrade = myGrade;
    this.myEmotion = myEmotion;
} 
```

或者：

```
public PassTheClass(String myName, int myGrade, String myEmotion) {
    this(myName, myEmotion);
    this.myGrade = myGrade;
} 
```

或者对于第三种选择，保留上面的第一个构造函数并将您拥有的 2 参数构造函数替换为：

```
public PassTheClass(String myName, String myEmotion) {
    this(myName, 0, myEmotion);
} 
```

第三种方法允许您拥有一个初始化所有内容的核心构造函数，以及各种接受某些事物的默认值并将所有内容传递给核心构造函数的便利构造函数。这最大限度地减少了复制和粘贴的数量，因为作业只发生在一个地方。

`this`将实例变量与构造函数参数区分开来，因此您无需诉诸名称的变化。Using`this`是绝大多数 Java 代码使用的标准约定，遵循约定使您的代码更具可读性。

# arduino - Arduino 以太网屏蔽：dhcpaddressprinter 错误

> ID：15327089
> 
> 赞同：0
> 
> 时间：2013-03-10T20:18:50.300
> 
> 标签：arduino

我是 Ethernet [shield](http://www.arduino.cc/en/Main/ArduinoShields)的新手，我尝试使用给出的 DhcpAddressPrinter 示例。但我无法让程序正常运行。

下面是草图：

```
#include <SPI.h>
#include <Ethernet.h>

// Enter a MAC address for your controller below.
// Newer Ethernet shields have a MAC address printed on a sticker on the shield
byte mac[] = { 0x00, 0xAA, 0xBB, 0xCC, 0xDE, 0x02 };

// Initialize the Ethernet client library
// with the IP address and port of the server
// that you want to connect to (port 80 is default for HTTP):
EthernetClient client;

void setup() {
    // Open serial communications and wait for port to open:
    Serial.begin(9600);

    // This check is only needed on the Leonardo:
    while (!Serial) {
    ; // Wait for serial port to connect. Needed for Leonardo only.
}

// Start the Ethernet connection:
if (Ethernet.begin(mac) == 0) {
    Serial.println("Failed to configure Ethernet using DHCP");

    // No point in carrying on, so do nothing forevermore:
    for(;;)
        ;
    }

    // Print your local IP address:
    Serial.print("My IP address: ");
    for (byte thisByte = 0; thisByte < 4; thisByte++) {
        // print the value of each byte of the IP address:
        Serial.print(Ethernet.localIP()[thisByte], DEC);
        Serial.print(".");
    }
    Serial.println();
}

void loop() {

} 
```

在我打开串口监视器后，我在很长一段时间后收到“使用 DHCP 配置以太网失败”的消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T02:40:00.197

听起来您的网络没有配置[DHCP](http://en.wikipedia.org/wiki/Dynamic_Host_Configuration_Protocol)。这通常在大多数家庭网络的路由器上设置。

尝试像这样给 Ardunio 一个静态[IP 地址](http://en.wikipedia.org/wiki/IP_address)

```
byte MAC_address[] = { 0xDE, 0xAD, 0xBE, 0xEF, 0xFE, 0xED };
IPAddress ipAddress(192,168,1,1152); 
EthernetClient client;
Ethernet.begin(MAC_address, ipAddress); 
```

如果这不起作用，你如何连接你的 Arduino？是连接到计算机、路由器还是调制解调器？

# node.js - nginx 负载均衡器到 node.js

> ID：15327091
> 
> 赞同：2
> 
> 时间：2013-03-10T20:19:00.610
> 
> 标签：node.js, nginx, webserver, load-balancing

我对 node.js 和 nginx 世界很陌生。我正在尝试安排一个简单的设置，它有 2 个节点服务器（只是一个简单的 hello world）和 nginx 作为负载均衡器。我正在使用上游来指定我的节点服务器，然后告诉代理（nginx）将请求传递给组中的任一服务器。

问题是当我尝试下面的配置去 localhost:81 时，当我应该从节点获得“hello world”消息时，我会收到欢迎来到 nginx 页面。

有什么我想念的吗？我正在使用 Windows 进行设置。这应该是一个问题吗？

下面我包括节点服务器和 nginx.conf

```
var http = require('http');
http.createServer(function (req, res) {
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.end('Hello World port 1337\n');
}).listen(1337);
console.log('Server running at http://127.0.0.1:1337/'); 
```

这是我的第二个节点示例

```
var http = require('http');
http.createServer(function (req, res) {
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.end('Message from Node running on port 1665\n');
}).listen(1665);
console.log('Server running at http://127.0.0.1:1665/'); 
```

`upstream`这是 nginx 配置文件.. 除了部分和`location`部分外，我与默认设置没有太大变化

```
#user  nobody;
worker_processes  1;

#error_log  logs/error.log;
#error_log  logs/error.log  notice;
#error_log  logs/error.log  info;

#pid        logs/nginx.pid;

events {
    worker_connections  1024;
}

http {
    include       mime.types;
    default_type  application/octet-stream;

    #log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
    #                  '$status $body_bytes_sent "$http_referer" '
    #                  '"$http_user_agent" "$http_x_forwarded_for"';

    #access_log  logs/access.log  main;

    sendfile        on;
    #tcp_nopush     on;

    #keepalive_timeout  0;
    keepalive_timeout  65;

    #gzip  on;

    upstream backend_servers{
        server 127.0.0.1:1337;
        server 127.0.0.1:1665;
    }

    server {
        listen       127.0.0.1:81;
        server_name  localhost;

        #charset koi8-r;

        #access_log  logs/host.access.log  main;

        location / {
            proxy_pass http://backend_servers;            
        }

        #error_page  404              /404.html;

        # redirect server error pages to the static page /50x.html
        #
        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
            root   html;
        }

        # proxy the PHP scripts to Apache listening on 127.0.0.1:80
        #
        #location ~ \.php$ {
        #    proxy_pass   http://127.0.0.1;
        #}

        # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
        #
        #location ~ \.php$ {
        #    root           html;
        #    fastcgi_pass   127.0.0.1:9000;
        #    fastcgi_index  index.php;
        #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;
        #    include        fastcgi_params;
        #}

        # deny access to .htaccess files, if Apache's document root
        # concurs with nginx's one
        #
        #location ~ /\.ht {
        #    deny  all;
        #}
    }

    # another virtual host using mix of IP-, name-, and port-based configuration
    #
    #server {
    #    listen       8000;
    #    listen       somename:8080;
    #    server_name  somename  alias  another.alias;

    #    location / {
    #        root   html;
    #        index  index.html index.htm;
    #    }
    #}

    # HTTPS server
    #
    #server {
    #    listen       443;
    #    server_name  localhost;

    #    ssl                  on;
    #    ssl_certificate      cert.pem;
    #    ssl_certificate_key  cert.key;

    #    ssl_session_timeout  5m;

    #    ssl_protocols  SSLv2 SSLv3 TLSv1;
    #    ssl_ciphers  HIGH:!aNULL:!MD5;
    #    ssl_prefer_server_ciphers   on;

    #    location / {
    #        root   html;
    #        index  index.html index.htm;
    #    }
    #}

} 
```

# javascript - 禁用在其他元素中选择的所有选项

> ID：15327093
> 
> 赞同：0
> 
> 时间：2013-03-10T20:19:22.893
> 
> 标签：javascript, option

如果已在任何其他选择元素中选择了某个选项，我将尝试禁用该选项，如果未选中则重新启用它。

当我预选选项时，此功能无法正常工作`(selected="selected")`，并且一次仅适用于所有选择元素中的一个选项。如何修改它以使用预选选项以及所有元素中的所有选项？

我在这里发布了一个没有任何预选选项的函数的小提琴：http: [//jsfiddle.net/dZqEu/927/](http://jsfiddle.net/dZqEu/927/)

JS

```
$('.rank_options').change(function() { 
    $('#priority1, #priority2, #priority3, #priority4, #priority5').not(this)
    .children('option[value=' + this.value + ']')
    .attr('disabled', true)
    .siblings().removeAttr('disabled');    
}); 
```

HTML

```
<tr >        
<td><select name=priority1 id="priority1" class="rank_options" >
    <option selected="selected" value="Test 1">Test 1</option> 
    <option value="Test 2">Test 2</option> 
    <option value="Test 3">Test 3</option> 
    <option value="Test 4">Test 4</option> 
    <option value="Test 5">Test 5</option></select> 
</td>
<td ><select name=priority2 id="priority2" class="rank_options" >
    <option value="Test 1">Test 1</option> 
    <option selected="selected" value="Test 2">Test 2</option> 
    <option value="Test 3">Test 3</option> 
    <option value="Test 4">Test 4</option> 
    <option value="Test 5">Test 5</option></select>  
</td>
<td><select name=priority3 id="priority3" class="rank_options" >
    <option value="Test 1">Test 1</option> 
    <option value="Test 2">Test 2</option> 
    <option selected="selected" value="Test 3">Test 3</option> 
    <option value="Test 4">Test 4</option> 
    <option value="Test 5">Test 5</option></select> 
</td>
<td><select name=priority4 id="priority4" class="rank_options" >
    <option value="Test 1">Test 1</option> 
    <option value="Test 2">Test 2</option> 
    <option value="Test 3">Test 3</option> 
    <option selected="selected" value="Test 4">Test 4</option> 
    <option value="Test 5">Test 5</option></select>                          
</td>
<td><select name=priority5 id="priority5" class="rank_options" >
    <option value="Test 1">Test 1</option> 
    <option value="Test 2">Test 2</option> 
    <option value="Test 3">Test 3</option> 
    <option value="Test 4">Test 4</option> 
    <option selected="selected" value="Test 5">Test 5</option></select> 
</td>       
</tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:42:15.003

像这样的东西？

```
$(document).ready(function(){
$('select option[value="Test 1"]').attr('disabled',true);
});
$('.rank_options').change(function () {
  $('#priority1, #priority2, #priority3, #priority4, #priority5').
  find('option:selected').each(function(){
   $("#priority1, #priority2, #priority3, #priority4, #priority5").find("option[value="+this.value+"]").attr('disabled', true);
   });
}); 
```

[演示视图](http://jsfiddle.net/dZqEu/933/)

# python - django静态文件错误

> ID：15327097
> 
> 赞同：3
> 
> 时间：2013-03-10T20:19:40.570
> 
> 标签：python, django

为什么我的静态文件不提供服务？或者只有其中一些我不知道。我几乎什么都试过了。而且我不知道问题出在哪里。我需要支持让我的静态文件在开发和生产期间工作。但请先帮我开发

我正在尝试让我的静态文件正常工作，但我收到了这个错误

```
Django version 1.4.3, using settings 'menu.settings'
Development server is running at http://127.0.0.1:8000/
Quit the server with CONTROL-C.
[10/Mar/2013 15:12:37] "GET / HTTP/1.1" 200 1868
Traceback (most recent call last):
  File "/usr/lib/python2.7/wsgiref/handlers.py", line 85, in run
    self.result = application(self.environ, self.start_response)
  File "/home/talisman/virt_env/menu/local/lib/python2.7/site-packages/staticfiles/handlers.py", line 68, in __call__
    start_response)
  File "/home/talisman/virt_env/menu/local/lib/python2.7/site-packages/Django-1.4.3-py2.7.egg/django/core/handlers/wsgi.py", line 241, in __call__
    response = self.get_response(request)
  File "/home/talisman/virt_env/menu/local/lib/python2.7/site-packages/staticfiles/handlers.py", line 57, in get_response
    return self.serve(request)
  File "/home/talisman/virt_env/menu/local/lib/python2.7/site-packages/staticfiles/handlers.py", line 50, in serve
    return serve(request, self.file_path(request.path), insecure=True)
  File "/home/talisman/virt_env/menu/local/lib/python2.7/site-packages/staticfiles/views.py", line 36, in serve
    absolute_path = finders.find(normalized_path)
  File "/home/talisman/virt_env/menu/local/lib/python2.7/site-packages/staticfiles/finders.py", line 238, in find
    for finder in get_finders():
  File "/home/talisman/virt_env/menu/local/lib/python2.7/site-packages/staticfiles/finders.py", line 256, in get_finders
    yield get_finder(finder_path)
  File "/home/talisman/virt_env/menu/local/lib/python2.7/site-packages/Django-1.4.3-py2.7.egg/django/utils/functional.py", line 27, in wrapper
    result = func(*args)
  File "/home/talisman/virt_env/menu/local/lib/python2.7/site-packages/staticfiles/finders.py", line 277, in _get_finder
    (Finder, BaseFinder))
ImproperlyConfigured: Finder "<class 'django.contrib.staticfiles.finders.FileSystemFinder'>" is not a subclass of "<class 'staticfiles.finders.BaseFinder'>"
[10/Mar/2013 15:12:37] "GET /static/css/screen.css HTTP/1.1" 500 59
Traceback (most recent call last):
  File "/usr/lib/python2.7/wsgiref/handlers.py", line 85, in run
    self.result = application(self.environ, self.start_response)
  File "/home/talisman/virt_env/menu/local/lib/python2.7/site-packages/staticfiles/handlers.py", line 68, in __call__
    start_response)
  File "/home/talisman/virt_env/menu/local/lib/python2.7/site-packages/Django-1.4.3-py2.7.egg/django/core/handlers/wsgi.py", line 241, in __call__
    response = self.get_response(request)
  File "/home/talisman/virt_env/menu/local/lib/python2.7/site-packages/staticfiles/handlers.py", line 57, in get_response
    return self.serve(request)
  File "/home/talisman/virt_env/menu/local/lib/python2.7/site-packages/staticfiles/handlers.py", line 50, in serve
    return serve(request, self.file_path(request.path), insecure=True)
  File "/home/talisman/virt_env/menu/local/lib/python2.7/site-packages/staticfiles/views.py", line 36, in serve
    absolute_path = finders.find(normalized_path)
  File "/home/talisman/virt_env/menu/local/lib/python2.7/site-packages/staticfiles/finders.py", line 238, in find
    for finder in get_finders():
  File "/home/talisman/virt_env/menu/local/lib/python2.7/site-packages/staticfiles/finders.py", line 256, in get_finders
    yield get_finder(finder_path)
  File "/home/talisman/virt_env/menu/local/lib/python2.7/site-packages/Django-1.4.3-py2.7.egg/django/utils/functional.py", line 27, in wrapper
    result = func(*args)
  File "/home/talisman/virt_env/menu/local/lib/python2.7/site-packages/staticfiles/finders.py", line 277, in _get_finder
    (Finder, BaseFinder))
ImproperlyConfigured: Finder "<class 'django.contrib.staticfiles.finders.FileSystemFinder'>" is not a subclass of "<class 'staticfiles.finders.BaseFinder'>"
[10/Mar/2013 15:12:37] "GET /static/css/print.css HTTP/1.1" 500 59 
```

这是我的 settings.py

```
if socket.gethostname() == 'Pangolin': #Brian's Development Laptop
    DEBUG = TEMPLATE_DEBUG = True
    TEMPLATE_DIRS = ('/home/talisman/projects/menu/templates',)
    SQL_LITE_NAME = '/home/talisman/projects/menu/db4.db'
    STATIC_ROOT = '/home/talisman/projects/menu/static/'
    STATICFILES_DIRS = (
        # Put strings here, like "/home/html/static" or "C:/www/django/static".
        # Always use forward slashes, even on Windows.
        # Don't forget to use absolute paths, not relative paths.
        '/home/talisman/projects/menu/staticfiles/',
        ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T20:29:54.397

您可能在设置中错误配置了静态文件？

```
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
) 
```

确保你有上下文处理器：

```
TEMPLATE_CONTEXT_PROCESSORS = [
    ...
    'django.core.context_processors.static',
    ...
] 
```

也不要使用这样的路径，用于提供绝对路径......

```
from os.path import join, dirname, normpath

LOCAL_PATH = normpath(join(dirname(__file__), '..')) 
```

那么你可以做...

```
# Additional locations of static files
STATICFILES_DIRS = (
    LOCAL_PATH + '/public/common/',
) 
```

=========

这是我如何设置的示例

```
MEDIA_ROOT = ''
MEDIA_URL = ''

STATIC_ROOT = '/uploaded/'
STATIC_URL = '/static/'

# Additional locations of static files
STATICFILES_DIRS = (
    LOCAL_PATH + '/public/common/',
)

    # List of finder classes that know how to find static files in
# various locations.
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
) 
```

在我安装的应用程序中，我确保我有

```
'django.contrib.staticfiles', 
```

# python - 在 MAC 10.7.5 上安装 QSTK 时遇到问题，可能是因为 python-dateutils 和/或 pandas 0.7.3 的问题

> ID：15327098
> 
> 赞同：0
> 
> 时间：2013-03-10T20:19:49.750
> 
> 标签：python, terminal, quantitative-finance, qstk

我正在尝试在 Mac 上安装 QSTK ( [http://wiki.quantsoftware.org/index.php?title=QSToolKit_Installation_Guide_Mac](http://wiki.quantsoftware.org/index.php?title=QSToolKit_Installation_Guide_Mac) ) 并且遇到了麻烦。长话短说，我从我的 mac（2.5、2.6、2.7、3.3）和多个模块（beautifulsoup、requests 等）上的多个版本的 python 开始。在尝试启动和运行 QSTK 数小时后，我感到沮丧，我删除了所有与 python 相关的内容并试图重新开始。我按照 QSTK 安装 wiki 上的说明（上面的链接），当我到第 7 步时，即运行它：

`python QSTK-0.2.5/Examples/Validation.py`

在命令行上查看安装是否正常，我从终端收到以下反馈：

```
Numpy is installed and the version used is :  1.7.0
Please make sure you're using version >= 1.6.1

Matplotlib is installed and version is :  1.2.0
Please make sure you're using version >= 1.1.0

Please install python-dateutil via easy_install or some method!
Error : Please install Pandas 0.7.3
Error : Pandas can not be imported or not installed. 
```

我发现我需要`python-dateutil`版本`1.5`而不是`2.0`（这是最新的），所以我尝试降级它，仍然没有运气。我不知道该怎么做。请帮忙！

注意：我是初学者程序员。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-28T16:30:30.437

*尝试使用 Homebrew 进行安装。我假设您使用的是macports。*

我在安装 QSTK 时遇到了同样的问题。

**卸载 macports，然后安装 brew。**

# numpy - 处理具有数字属性的标称值的策略

> ID：15327099
> 
> 赞同：0
> 
> 时间：2013-03-10T20:19:49.777
> 
> 标签：numpy, machine-learning, pandas, scikit-learn, feature-selection

我正在使用一个数据集，该数据集主要包含来自 SFDC 的名义值（例如 EE 名称、职务、角色、潜在客户来源、客户名称等），并试图将这些特征与销售线索是否是布尔类相关联转换为销售联系人。

我想通过一些基本的特征选择算法来运行这些数据，但大多数只需要数值。我可以使用布尔映射方案将每个独特的分类映射到一个新的字段（特征），但是我会生成大量的新特征，我不确定这是否会产生有意义的输出。诚然，最好的解决方案可能是通过决策树运行数据，但想看看社区中其他人是否提出了其他策略来处理已在现实世界中成功使用的大多数名义数据的数据集应用程序。

我正在使用 python 和 scipy/numpy/pandas/scikit-learn 进行分析。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:05:43.370

我会首先尝试使用[sklearn.feature_extraction.DictVectorizer](http://scikit-learn.org/stable/modules/feature_extraction.html#loading-features-from-dicts)，然后尝试可以处理稀疏数据表示的 Chi2 单变量特征选择。例如，在 scikit-learn 中有一个对稀疏文本数据进行 chi2 特征选择的应用：http: [//scikit-learn.org/dev/auto_examples/document_classification_20newsgroups.html](http://scikit-learn.org/dev/auto_examples/document_classification_20newsgroups.html)

不幸的是，scikit-learn 的决策树和集成尚不适用于稀疏表示。

# linux - 如何将一个目录中文件的前 300 行复制到另一个目录？

> ID：15327101
> 
> 赞同：-2
> 
> 时间：2013-03-10T20:19:52.473
> 
> 标签：linux

好的，这是一个作业问题

```
sample_dir
    |-- admin
    |-- cambridge
    |   |-- cafeteria
    |   |-- library
    |   -- security
    |       |-- annex
    |       |-- building
    |       -- parking
    |-- faculty
    |-- history.exe
    |-- markham
    |   |-- annex
    |   |-- building1
    |   -- parking
    -- stenton
        |-- gen_ed
        |   |-- Holidays
        |   -- cars2
        -- lib_arts
            |-- english.txt
            -- match.doc 
```

11 个目录，11 个文件

您当前的目录是 stenton。将文件 ~bto120/phones 的前 300 行复制到 stenton 中名为 phone_directory 的新文件中。此文件包含电话号码和位置信息，按姓氏排序，姓氏是每条记录中的第一个字段。

我不断收到“请再试一次”

我用过

cp head -n 300 ~bto120/phones > phone_directory 或 cp head -n 300 ~bto120/phones >> phone_directory

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T20:21:48.437

`cp`并且`head`是两个不同的程序。跑吧`head -300 oldfile >newdir/newfile`；离开`cp`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-16T15:23:57.913

它应该是 head -300 ~bto120/phones > phone_directory

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-23T15:47:47.717

给你： sed -n '1,10p' file1 > file2

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T20:24:40.673

尝试这个：

```
head -n 300 \~bto120/phones | sort > phone_directory 
```

# google-apps-script - PNG覆盖脚本（谷歌驱动器）

> ID：15327105
> 
> 赞同：0
> 
> 时间：2013-03-10T20:20:13.923
> 
> 标签：google-apps-script

我需要能够将 .PNG 文件水印添加到添加到谷歌驱动器文件夹的任何 JPG 图像中，并将结果保存在新的谷歌驱动器文件夹中。

任何人都可以推荐一个脚本或程序来完成这个吗？

注意：PNG 覆盖图像将保存在 google 驱动器文件夹中。我尝试了 Wappwolf “标记徽标”，但似乎无法使其正常工作。如果可以的话，我更喜欢自动化脚本。

另外：为了简单起见，我会让 PNG 水印与 JPG 图像大小相同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T01:48:58.653

无法使用 Apps 脚本直接修改图像内容。您最好的选择是使用第三方工具。

# java - 如何计算满足条件的元素

> ID：15327111
> 
> 赞同：-1
> 
> 时间：2013-03-10T20:20:30.837
> 
> 标签：java, vector, count

只要满足条件，我想计算一次元素 v[i] 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T20:22:59.513

在开始循环之前创建一个计数器变量，并在条件满足后对其进行递增：

```
int count = 0;
for(int i = 0; i < m; i++){
    if((v[i] - p) < 3 ){
        count++;
        p = i;
    }  
} 
```

# html - 增加点击反应时间 WP8 HTML5？

> ID：15327114
> 
> 赞同：1
> 
> 时间：2013-03-10T20:20:47.177
> 
> 标签：html, windows-phone-8

我正在开发一个 HTML5 游戏，并为它创建了一个 Windows Phone 8 HTML5 容器。我遇到的唯一问题是触摸。

首先，我点击的地方会出现一个小圆圈。

其次，有没有办法提高检测到触摸的速度？

最后有什么方法可以禁用 Web 浏览器视图中的滚动？

# c++ - 您可以关闭 C++ 中的默认复制构造吗？

> ID：15327124
> 
> 赞同：3
> 
> 时间：2013-03-10T20:21:29.293
> 
> 标签：c++, compiler-construction, constructor

我不喜欢复制结构。写了很多遍

```
void MyFunc(MyClass val) 
```

代替

```
void MyFunc(const MyClass& val) 
```

并且不得不花费数小时调试已在按值传递克隆的析构函数中删除的指针周围的错误，或者发现减速，因为我每次调用 MyFunc 时都在复制 MyClass 的每个成员。

所以我不想允许复制构造函数。

我知道你可以按班级禁止他们

```
private:
    MyClass(const MyClass&) 
```

但我不想在每一堂课上都这样做。

是否有编译器开关默认关闭复制构造？我是否有理由允许对内置类型和指针以外的任何内容进行复制构造？（同样的问题也适用于复制作业）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-10T20:26:15.313

> 是否有编译器开关默认关闭复制构造？

**不**，我真的希望没有。幸运的是，据我所知，情况确实如此。

> 我是否有理由允许对内置类型和指针以外的任何内容进行复制构造？

**当然**。例如，为您的类型提供*值语义*并将您的类的不同实例视为相同的概念实体。在这种情况下，创建副本是一件非常方便的事情。

另一方面，如果您想要一个不可复制的类（有此用例），您可以将复制构造函数声明为`private`（如您自己建议的那样），或者在 C++11 中，将其标记为*已删除*：

```
struct X
{
    X(X const&) = delete;
}; 
```

关于你写的：

> 太多次，我已经写`void MyFunc(MyClass val)`而不是`void MyFunc(const MyClass& val)`并且不得不花费数小时调试错误

我知道你可能会犯错误，但你必须从中吸取教训。您还可以编写一个普通函数，`foo()`如下所示：

```
void foo(int x) { x++; } 
```

并且发誓要弄清楚为什么，当你将它作为参数传递一个`3`值为 的变量时，调用返回后该变量的值不是`4`。哦，你忘了添加参考符号：

```
void foo(int& x) { x++; }
//          ^ 
```

现在这是需要一个编译器选项的原因吗？它可以使传递引用成为默认值？并不真地。这将是改变语言规则的一种选择。

想象一下，如果你的编译器真的有这样一个你想要的开关，有一天你会把你的程序发送给没有使用那个开关的其他人：*他们*会花多少小时调试它来找出问题所在?

我的建议是从经验中学习并尝试使您的阅读和写作技能适应标准语言，而不是相反。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T20:25:13.437

没有神奇的开关。你只是犯了编程错误并希望改变语言。如果您在堆上分配内存，*则必须*（或至少*应该*）覆盖默认的复制构造函数并处理该动态内存。或者，您可以使用一些现成的类，例如 std::vector 或`std::auto_ptr`（`std::unique_ptr`在 C++11 中）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-10T20:34:16.787

What I do is declare the copy ctor in the class but never define it anywhere. If I write code that uses the copy ctor, then I get an undefined symbol from the linker.

# javascript - jQuery 代码在测试中工作但不在现场

> ID：15327131
> 
> 赞同：1
> 
> 时间：2013-03-10T20:22:02.910
> 
> 标签：javascript, jquery, html, wordpress

所以我有以下代码。

```
<script src="http://jamesleist.com/wp-content/uploads/2013/01/js/jquery-1.7.2.min.js" type="text/javascript"></script>
<script>
    $(document).ready(function() {
        $('.me').hide();
        $('.clickme').click(function() {
            $(this).next('.me').animate({
                height: 'toggle'
            }, 500);
        });
    });
</script>    

<div class="clickme" style="background-color: #333333; color: #FFFFFF; padding: 10px; width: 200px; cursor:pointer;">
  Click here to toggle me in and out =)
</div>
<img class="me" src="http://www.randomsnippets.com/wp-content/uploads/2011/04/2.png" alt="It&#039;s me....ah!!!" title="Allen Liu" width="100" height="77" class="alignnone size-full wp-image-552" style="border: none;" />

<div class="clickme" style="background-color: #333333; color: #FFFFFF; padding: 10px; width: 200px; cursor:pointer;">
  Click here to toggle me in and out =)
</div>
<img class="me" src="http://www.randomsnippets.com/wp-content/uploads/2011/04/2.png" alt="It&#039;s me....ah!!!" title="Allen Liu" width="100" height="77" class="alignnone size-full wp-image-552" style="border: none;" /> 
```

它在单独运行时工作正常，但是当我将它实施到主站点时它不起作用。

您可以在以下 URL 中查看我尝试实现它的位置。

> [http://jamesleist.com/portfolio](http://jamesleist.com/portfolio)

这真的让我很困惑 :-( 顺便说一句，我使用的是 Wordpress，而 jQuery 链接到 header.php 文件中。

我假设这是 Wordpress 的问题？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T20:27:42.977

`.me`不是下一个元素，下一个元素是包含图像的段落？

```
$(document).ready(function() {
    $('.me').hide();
    $('.clickme').on('click', function() {
        $(this).next('p').find('.me').animate({
            height: 'toggle'
        }, 500);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T20:26:34.407

您的`img`标签`class`定义了两个属性。我不确定这是否是 100% 的原因，但这绝对应该得到解决。

像这样：

```
<img class="me alignnone size-full wp-image-552" src="http://www.randomsnippets.com/wp-content/uploads/2011/04/2.png" alt="It&#039;s me....ah!!!" title="Allen Liu" width="100" height="77" style="border: none;" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T20:32:13.007

您的图像已定义了两次“类”，您不能这样做。您需要在一个由空格分隔的类声明中包含所有类，包括“me”类。通过[验证器](http://validator.w3.org/check?uri=http://jamesleist.com/portfolio/&charset=%28detect%20automatically%29&doctype=Inline&group=0)的简单运行非常清楚地显示了错误。

我还会考虑将内部和外部脚本移动到页面底部，这样 dom 就不会等待它们加载。将所有内联样式移动到样式表中也是一个好主意，这样您的代码就更易于阅读和调试。

# rubymine - 使用 RubyMine 5 调试 Rails 服务器：哪个服务器？

> ID：15327136
> 
> 赞同：1
> 
> 时间：2013-03-10T20:22:34.753
> 
> 标签：rubymine

对于哪个服务器最适合用于 RubyMine 调试有什么建议吗？

*   Webrick 工作正常，但启动缓慢。
*   Unicorn 启动很快，但调试器无法工作，因为会话很快超时。better_errors gem 不能很好地与独角兽配合使用。

还有其他可以尝试的吗？

更新

*   薄似乎工作得很好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T20:24:55.113

完全免责声明，我今天安装了 ruby​​mine，但对此知之甚少……*但是，*我刚刚读到了有关 ruby​​mine、独角兽和超时的文章，这可能会有所帮助：[运行/调试配置：Rails](http://www.jetbrains.com/ruby/webhelp/run-debug-configuration-rails.html)

tl;博士：

```
if ENV['IDE_PROCESS_DISPATCHER']
    timeout 30 * 60 * 60 * 24
end 
```

# html - 项目相互推开

> ID：15327143
> 
> 赞同：0
> 
> 时间：2013-03-10T20:23:05.903
> 
> 标签：html, css

所以我正在做一个带有各个部分的水平网站，效果很好，但是现在我添加了我的菜单，我遇到了麻烦，它只是破坏了我的整个内容区域和背景。我尝试过使用 z-index，它没有任何效果......并且在它之前放置项目也只是将其推出。

我的 CSS 导航栏

```
 #Navigation
{
margin: 0px;
padding: 20px 0px 0px 700px;
font-family: 'american_captainregular', Helvetica, Arial, sans-serif;
font-size: 55px;
float:left;
} 

#Navigation ul, #Navigation li
{
margin: 0;
padding: 0;
display: inline;
list-style-type: none;
}

#Navigation a:link, #Navigation a:visited
{
float: left;
line-height: 14px;
margin: 0 10px 4px 10px;
text-decoration: none;
color: #999;
}
#Navigation a:hover { color: #000; } 
```

我的 CSS 图像

```
#HomeText{
background-repeat: no-repeat;
background-image: url(Images/HomeText.png);
float:left;
height:158px;
width:450px;
margin-left:461px;
margin-top:126px;

} 
```

的HTML

```
<div id="Content">
<div class="Tabs TabOne" id="HomeTab">

<ul class="MyNav" id="Navigation">
<li><a href="#" class="home">Home</a></li>
<li><a href="#AboutTab" class="about">About</a></li>
<li><a href="#PortfolioTab" class="portfolio">Portfolio</a></li>
</ul>
    <div id="HomeText"></div>
</div> 
```

以防万一，我的部分的 CSS

```
 .Tabs{
    margin:0px;
    bottom:0px;
    float:left;
    width:3500px;

}

.TabOne{
background: url(Images/BG1.jpg) no-repeat;
} 
```

我从来没有遇到过这种元素被向下推到页面上的问题

[http://jsfiddle.net/BoneStarr/AGfwn/](http://jsfiddle.net/BoneStarr/AGfwn/)

# css - wordpress 字体 css 在 Firefox 中不起作用

> ID：15327152
> 
> 赞同：0
> 
> 时间：2013-03-10T20:24:02.000
> 
> 标签：css, wordpress, firefox, fonts

我在基于 wordpress 的网站中添加了自定义字体。主题中有字体文件。

到目前为止，在 chrome、IE 和 safari 中测试新字体有效，但在 Firefox 中无效。

我试过玩我的css文件但没有运气

任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:38:56.320

这是一个有用的工具，可以为您的字体添加每个扩展名：[font2web.com](http://www.font2web.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T20:36:12.283

我认为问题在于 Internet Explorer 只接受 EOT 字体，而 Firefox 只支持 OTF 和 TTF 字体，等等。
请尝试插入所有这些字体扩展之王

我希望这对你有帮助。

# c# - 如何在 Asp.Net MVC 3 应用程序上使用关系属性？

> ID：15327154
> 
> 赞同：0
> 
> 时间：2013-03-10T20:24:08.113
> 
> 标签：c#, asp.net-mvc-3, razor

谁能帮我弄清楚在我的视图上显示模型查找属性的标准方法是什么？

假设我有以下模型：

```
public class ProfileModel()
{
  public int Id { get; set; }
  public string Description { get; set; }
}

public class UserModel()
{
  public int Id { get; set; }
  public string Login { get; set; }
  public string Password { get; set; }
  public ProfileModel Profile { get; set; }
} 
```

我的 UserController 有以下操作：

```
[HttpGet]
public ActionResult Create()
{
  return View(new UserModel());
}

[HttpPost]
public ActionResult Create(UserModel model)
{
  //Do something
} 
```

我的视图应该如何？我正在发送一个空的 UserModel。我想让用户在选择列表中选择一个配置文件。

使用视图包将带有配置文件选项的列表发送到选择列表是复杂和大型应用程序的标准吗？

我应该为 ProfileModel 创建自定义编辑器吗？

我其实知道我有很多选择。但我想找出大型应用程序的最佳解决方案。我很难弄清楚的一件事是，我需要一种方法来显示选择列表，但仍然允许模型绑定器在我发布数据时创建 Profile 的实例，以便我可以将其保存到数据库。

我很感激任何指导！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T23:54:15.860

这些是实体框架模型吗？如果他们然后添加一个forgien key id属性，那么您可以根据下拉列表中的值轻松设置Id。

可能想看看 MVC 脚手架[http://blog.stevensanderson.com/2011/01/13/scaffold-your-aspnet-mvc-3-project-with-the-mvcscaffolding-package/](http://blog.stevensanderson.com/2011/01/13/scaffold-your-aspnet-mvc-3-project-with-the-mvcscaffolding-package/)。它可以为您自动生成视图等，并提供下拉列表来选择外键。它所做的只是在视图包中存储外键属性并制作一个选择列表。

# c# - 按提交时间戳查询对象

> ID：15327156
> 
> 赞同：0
> 
> 时间：2013-03-10T20:24:24.823
> 
> 标签：c#, db4o

在[db4o](http://en.wikipedia.org/wiki/Db4o)中是否可以使用内部提交时间戳（因为 8.0 版 db4o 允许生成提交时间戳）查询自某个特定时间以来已更改的对象？

我知道它可能是这样的：

```
long last = DateTime.Now.Ticks;
var objectsChanged = from obj in GetAllObjectsInDatabase(session)
                     where session.Ext().GetObjectInfo(obj).GetCommitTimestamp() > last
                     select obj; 
```

但是对于 1000 万个对象，遍历所有对象需要很长时间（以获得 3 个对象作为结果） - 在每个对象上创建我自己的提交时间戳并将其编入索引会快得多。

从某个时刻开始，有没有更快的方法来获取数据库的变化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:28:56.563

嗯，不是正式的。但是 dRS 需要为复制（[源](http://source.db4o.com/db4o/trunk/drs/src/core/com/db4o/drs/db4o/Db4oEmbeddedReplicationProvider.java)）执行此操作。所以它是内部支持的。我没有正确检查。它是从复制代码中提取出来的。

爪哇：

```
Query query = container.query();
query.descend(VirtualField.COMMIT_TIMESTAMP)
    .constrain(lastCommitTimestamp).greater();
List<Object> result = query.execute(); 
```

所以在 C# 中它应该是：

```
IQuery query = container.Query();
query.Descend(VirtualField.COMMIT_TIMESTAMP)
   .Constrain(lastCommitTimestamp).Greater();
IList result = query.execute(); 
```

无论如何，没有受助者。它不被视为公共 API。但我认为非常接近你所需要的。

# jquery - 从 jquery 获取 mql 错误，但在查询编辑器中没有

> ID：15327159
> 
> 赞同：1
> 
> 时间：2013-03-10T20:24:44.543
> 
> 标签：jquery, freebase

我有一个[在查询编辑器中正常工作的查询，但在加载](http://tinyurl.com/a6qg8lg)[页面](http://will.tip.dhappy.org/lib/mimis/html)时失败（[这里是脚本](http://will.tip.dhappy.org/lib/mimis/freebase/jquery)）。我收到错误“唯一查询可能最多有一个结果。得到 2”。我用空数组替换了查询中的空值，但它没有修复它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T21:16:40.487

它也会在查询编辑器中给出错误，但它也会返回结果，这可能会导致您忽略错误代码。

问题是查询的顶层。您需要那里的数组，因为它返回多个结果。尝试将整个查询包装在 []

# haskell - Haskell合并多个列表

> ID：15327160
> 
> 赞同：4
> 
> 时间：2013-03-10T20:24:59.440
> 
> 标签：haskell, merge, functional-programming

我想编写一个合并函数，该函数采用多个 x 排序列表并将它们按增量值（从最小到最大）合并到一个排序列表中。我想我可以做两个列表并组合成一个，但无法弄清楚多个列表的基本情况并组合成一个排序。

```
merge :: [[a]] -> [a] 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-10T21:05:09.657

也许更快的实现：

```
mergeTwo :: Ord a => [a] -> [a] -> [a]
mergeTwo x [] = x
mergeTwo [] x = x
mergeTwo (x:xs) (y:ys) = if x < y
                          then x:(mergeTwo xs (y:ys))
                          else y:(mergeTwo (x:xs) ys)

mergePairs :: Ord a => [[a]] -> [[a]]
mergePairs [] = []
mergePairs (x:[]) = [x]
mergePairs (x:y:tail) = mergePairs ((mergeTwo x y):(mergePairs tail))

mergeAll :: Ord a => [[a]] -> [a]
mergeAll [] = []
mergeAll x = head $ mergePairs x 
```

mergeTwo 只是合并两个列表。mergeAll 只是运行 mergePairs 并返回 head 如果有的话。魔术发生在 mergePairs 中，它采用列表列表并合并对，而不是再次这样做等等，而至少有两个列表。

它可能会更快，想象你正在跑步

```
merge = foldl merge2 [] 
```

它需要一个长列表并合并和合并。如果你在 [[1,2,3],[4,5,6],[7,8,9],[10,11,12]] 运行它，它会合并：

[] 与 [1,2,3]

[1,2,3] 与 [4,5,6]

[1,2,3,4,5,6] 与 [7,8,9]

[1,2,3,4,5,6,7,8,9] 与 [10,11,12]

但是您想保留大约相同长度的列表。所以你想合并：

[1,2,3] 与 [4,5,6]

[7,8,9] 与 [10,11,12]

[1,2,3,4,5,6] 与 [7,8,9,10,11,12]

您还可以考虑合并对的并行实现，它在多核处理器上可能很有用。但我没有这方面的经验：/

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-10T20:30:47.270

如果您可以为两个列表定义函数，那么您可以通过简单地遍历每个子列表并将其与当前结果合并，直到您合并所有列表，将其推广到任意多个列表。这可以表示为这样的折叠：

```
merge = foldr merge2 [] 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-10T21:01:57.803

@sepp2k 的答案很好，但它只适用于有限多个输入列表。如果你给它无限多的列表，它将永远试图找到最小的起始元素。

我们可以通过要求输入列表已经通过增加第一个元素来排序来解决这个问题。然后我们知道我们可以产生“左上”元素（第一个列表的第一个元素），因为它将是所有内容的下限，这为我们提供了足够的信息来递归使用并产生完整的合并。

```
merge :: (Ord a) => [[a]] -> [a]
merge [] = []
merge ([]:xss) = merge xss
merge ((x:xs):xss) = x : merge2 xs (merge xss) 
```

写作`merge2`仍然留给读者作为练习:-)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-10T22:49:34.817

如果您先将列表与 合并，则要容易`concat`得多`sort`。

```
import Data.List(sort)

mergeSort = sort . concat 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-11-11T11:09:45.403

这是 mergeSort 或 timSort 算法的基本部分，但遗憾的是在这个主题下没有正确的答案。我的意思是一个有效率的。

让我们假设一个包含块的`chunks`列表，`k = 9`例如块在`[as,bs,cs,ds,es,fs,gs,hs,is]`哪里`as..is`。

```
foldl merger [] chunks 
```

将产生以下操作

```
merge as bs -> abs
merge abs cs -> abcs
merge abcs ds -> abcds
merge abcds es -> abcdes
merge abcdes fs -> abcdefs
merge abcdefs gs -> abcdefgs
merge abchefgs hs -> abcdefghs
merge abcdefghs is -> abcdefghis 
```

在哪里操作 8 次，`as`操作7 ..操作 1 次。总共是 k(k+1)/2 = 44 次操作。如果您有 100,000 个块，将进行 5,000,050,000 次操作。复杂度为 O(n^2)。`bs``cs``is`

@kyticka 似乎已经注意到了这一事实，并在他的回答中提到了它的重要性，但未能正确实施（由于双重递归，这有时具有欺骗性）。他的方法仅在第一阶段消除了多余的操作，并将块放在排序的对中，然后像幼稚的方法一样继续进行，只是从右折叠如下；

```
let mt = mergeTwo
    mp = mergePairs

mp (mt as bs : mp [cs,ds,es,fs,gs,hs,is]))
mp (mt as bs : mp (mt cs ds : mp [es,fs,gs,hs,is]))
mp (mt as bs : mp (mt cs ds : mp (mt es fs : mp [gs,hs,is])))
mp (mt as bs : mp (mt cs ds : mp (mt es fs : mp (mt gs hs : mp [is])))
mp (mt as bs : mp (mt cs ds : mp (mt es fs : mp [ghs,is])))
mp (mt as bs : mp (mt cs ds : mp (mt es fs : mp (mt ghs is : mp []))))
mp (mt as bs : mp (mt cs ds : mp (mt es fs : mp [ghis])))
mp (mt as bs : mp (mt cs ds : mp [efs, ghis]))
mp (mt as bs : mp (mt cs ds : mp (mt efs ghis : mp [])))
mp (mt as bs : mp (mt cs ds : mp [efghis]))
mp (mt as bs : mp [cds, efghis])
mp (mt as bs : mp (mt cds efghis : mp []))
mp (mt as bs : mp [cdefghis])
mp [abs, cdefghis]
mp (mt abs cdefghis : mp [])
mp [abcdefghis]
[abcdefghis] 
```

所以 chunks 的合并操作计数如下

*   作为 = 2 ( `mt as bs`- `mt abs cdefghis`)
*   bs = 2 ( `mt as bs`- `mt abs cdefghis`)
*   cs = 3 ( `mt cs ds`- `mt cds efghis`- `mt abs cdefghis`)
*   ds = 3 ( `mt cs ds`- `mt cds efghis`- `mt abs cdefghis`)
*   es = 4 ( `mt es fs`- `mt efs ghis`- `mt cds efghis`- `mt cds efghis`)
*   fs = 4 与 es 相同
*   gs = 5 ...
*   hs = 5 与 gs 相同
*   是 = 5

操作总数为 33。我猜这可能类似于 k(k+1)/2 - k..？与天真的解决方案相比，它不会产生任何显着差异，`foldl`因为它仍然是 O(n^2)。

这是一个 O(nLog(n)) 的尝试。

```
mergeChunks :: Ord a => [a] -> [a] -> [a]
mergeChunks xs [] = xs
mergeChunks [] ys = ys
mergeChunks p@(x:xs) q@(y:ys) | x <= y    = x : mergeChunks xs q
                              | otherwise = y : mergeChunks p ys

mergePairs :: Ord a => [[a]] -> [[a]]
mergePairs []         = []
mergePairs (ps:[])    = [ps]
mergePairs (ps:qs:rs) = mergeChunks ps qs : mergePairs rs

mergeAll :: Ord a => [[a]] -> [a]
mergeAll []     = []
mergeAll [c]    = c
mergeAll cs     = mergeAll (mergePairs cs) 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2013-03-10T21:32:08.713

```
import Data.List ( sort )

sortLists :: (Ord a) => [[a]] -> [a]
sortLists cs = concatMap sort cs

test = [ [3,1,2],
         [5,4],
         [6,8,9,7] ]

main = print $ sortLists test 
```

要真正享受 haskell，请仔细查看并牢记`Prelude`and `Data.List`。它们是每个 Haskell 程序员的生计。

# jquery - 如何从登陆页面重定向到主页？

> ID：15327161
> 
> 赞同：-3
> 
> 时间：2013-03-10T20:25:07.510
> 
> 标签：jquery, css, xhtml

我做了一个`landingpage.html`and `index.html`，但是如何从登陆页面打开主页。我遇到的问题是，我将代码设置为 as 并且在如何使用它时遇到了麻烦。是否有任何简单的用于重定向页面的短代码？

```
function redirect_index{
  $("#fold").toggle("fold");
  setTimeout("redirect_index2()", 600);
}

function redirect_index2(){
  document.location_href = "index.html";
}

$(document).ready(function(){
  $("#enter_here").click(function(){
    $("#fold").toggle("fold", {}, 1000);
    setTimeout("redirect_index2()", 700);
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:29:23.870

您的函数`redirect_index`未正确声明：`function redirect_index{`应该是`function redirect_index(){`，并且您的代码存在许多语法错误 - 使用 JSLint 检查错误并修复它们。

例如：`setTimeout("redirect_index2()", 600);`and`setTimeout("redirect_index2()", 700);`无效，而`$("#fold").toggle("fold", {}, 1000);`.

让两个不同的函数调用同一个`redirect_index2()`函数有什么意义？您应该坚持使用后者，即包含在文档就绪功能中的那个。您必须等待 DOM 中的所有内容首先加载，然后触发动画和重定向脚本。

# c++ - 使用函数对象在 C++03 中保持模板推理的方法？

> ID：15327163
> 
> 赞同：0
> 
> 时间：2013-03-10T20:25:18.683
> 
> 标签：c++, templates, functional-programming

我想提供一个（模板化）函数，将（除其他外）具有给定返回类型的函数对象作为参数，理想情况下，我希望能够在没有显式模板参数的情况下调用该函数。

到目前为止，我尝试过：

```
template<A, B, F>
B some(A a, F f) { return f(a); }

template<A, B>
B some(A a, B (*f)(A)) { return some<A, B, B (*)(A)>(a, f); } 
```

我有重载以使模板 args 完全可推断，至少对于函数指针而言。现在看来我无法将模板特化为`std::unary_function`，因为它不包含`operator()`成员，所以它不适合作为`F`.

此外，对于函子似乎没有任何解决方案，因为我无法通知编译器我希望 F 拥有`B operator()(A)`. 或者这种鸭子打字可能以某种方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:32:41.200

`std::unary_function`只是应该提供的其他类的基础`operator()`。根本没有实例`unary_function`，所以我看不到问题 - 第一个采用 3 个模板参数的函数是此类问题的官方解决方案。

编辑：如果您想在没有显式模板参数的情况下调用该函数，请使用`std::result_of`(C++11) 或`boost::result_of`.

# c# - 获得最近的时间

> ID：15327164
> 
> 赞同：1
> 
> 时间：2013-03-10T20:25:36.023
> 
> 标签：c#, .net

我有一个对象列表，每个对象都有一个 TimeSpan 属性代表一天中的时间。我需要得到一个时间最接近输入值的对象。

应该是这样的。。

```
List<MyClass> list = new List<MyClass>
{
   new MyClass() {Name="midnight", time= new TimeSpan(0,0,0)},
   new MyClass() {Name="noon", time= new TimeSpan(12,0,0)},
};

var testOne = GetClosest(new TimeSpan(2, 0, 0),list); // returns midnight
var testTwo = GetClosest(new TimeSpan(8, 0, 0),list); // returns noon
var testThree = GetClosest(new TimeSpan(13, 0, 0),list); // returns noon
var testFour = GetClosest(new TimeSpan(22, 0, 0),list); // returns midnight (that's the tricky one) 
```

有没有一些优雅的方式来做到这一点？

**编辑：**当然应该通过列表，抱歉。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T20:27:40.223

我假设您实际上也会传递列表？它的效率并不高，但基本上你想通过尝试现有时间和“下一次的同一时间”将每一对（从原始时间和“目标”时间）映射到 0 到 12 小时的范围内天”。例如：

```
public static TimeSpan GetClosest(TimeSpan time, IEnumerable<TimeSpan> targets)
{
    return targets.OrderBy(x => BestFit(x, time))).First();
}

private static long BestFit(TimeSpan x, TimeSpan y)
{
    return Math.Min(Math.Abs((x - y).TotalTicks,
                    Math.Abs((x + TimeSpan.FromDays(1) - y).TotalTicks));
} 
```

或者使用[MoreLINQ](http://morelinq.googlecode.com)来避免完整排序但保持简单（甚至更简单）的代码：

```
public static TimeSpan GetClosest(TimeSpan time, IEnumerable<TimeSpan> targets)
{
    return targets.MinBy(x => BestFit(x, time));
}

// BestFit as before 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T20:47:54.293

您不妨创建一个中间列表（直接或间接）以提高速度：

```
public static string GetFirstEqualOrHigher(TimeSpan time, IEnumerable<MyClass> targets)
{
    return list.First(x => time >= x.time).Name;
}

IList<MyClass> list = new List<MyClass>
{
    new MyClass() { Name="midnight", time = new TimeSpan(18, 0, 0) }
    new MyClass() { Name="noon", time = new TimeSpan(6, 0, 0) },
    new MyClass() { Name="midnight", time = new TimeSpan(0, 0, 0) },
};

var testOne = GetFirstEqualOrHigher(new TimeSpan(2, 0, 0), list); // returns midnight
var testTwo = GetFirstEqualOrHigher(new TimeSpan(8, 0, 0), list); // returns noon
var testThree = GetFirstEqualOrHigher(new TimeSpan(13, 0, 0), list); // returns noon
var testFour = GetFirstEqualOrHigher(new TimeSpan(22, 0, 0), list); // returns midnight (that's the tricky one 
```

# c# - 限制特定角色对站点的访问

> ID：15327166
> 
> 赞同：0
> 
> 时间：2013-03-10T20:25:38.590
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4, simplemembership

我有 3 个角色：`Registered Users, Approved Users, and Admins.`
该站点的访问权限仅适用于`Approved users`和`Admins.`

为了限制匿名访问，我添加了一个过滤器，`FilterConfig`如下所示：

```
filters.Add(new System.Web.Mvc.AuthorizeAttribute()); 
```

现在，对于注册用户，我希望他们重定向到登录页面：

> 请联系其中一位管理员以批准您。

我不确定这样做的正确方法是什么。
我可以在每个控制器上设置授权属性，但我不确定这是否是一个好方法。
另外，我不确定我应该在哪里根据角色指定默认重定向操作。
我知道我可以指定默认重定向操作，`RouteConfig.cs`但不确定在哪里指定角色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T03:19:06.273

StanK 是正确的，具有`[Authorize]`属性会将所有未登录的用户重定向到登录页面。那是你困境的一半。

从那里你需要改变你的`logon`方法来检查一个新登录的用户是否有正确的角色（例如`ConfirmedUser`）。这很棘手，因为在您的方法`User.IsInRole("ConfirmedUser")`中总是错误的。`logon`这是因为该`User`对象由 http 对象填充，直到下一次重新循环才会重新填充。幸运的是，您可以使用`Roles.IsUserInRole(userName, "ConfirmedUser")`来检查用户是否具有正确的角色。

因此，在您的登录方法中，在验证用户身份后，将用户注销并将他们重定向到`[AllowAnonymous]`通知他们尚未确认的方法。

```
if (Roles.IsUserInRole(userName, "ConfirmedUser")
{
                FormsAuthentication.SignOut();
                return RedirectToAction("WarningMsg", "Home");

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T22:39:35.697

您应该能够为此使用`[Authorize]`属性。

受限页面的控制器或操作将使用 装饰`[Authorize(Roles="Approved User,Admin")]`，注册用户的“登录页面”将使用`[Authorize(Roles="Registered User,Approved User,Admin")]`，登录操作将使用`[AllowAnonymous]`。

如果用户未获得授权，他们将被重定向到`Account/Login`. 您需要在此操作中构建一些逻辑，将已登录的“注册用户”重定向到您的登录页面。其他人应该只看到标准登录页面。

**编辑**

将“注册用户”从登录页面重定向到登录页面的逻辑如下所示

```
[AllowAnonymous]
public ActionResult Login(string returnUrl)
{

    if (User.Identity.IsAuthenticated && Roles.IsUserInRole("Registered User"))
        return RedirectToAction("LandingPage");

    ViewBag.ReturnUrl = returnUrl;
    return View();
} 
```

# java - 使用按位运算符对两个数字求和

> ID：15327169
> 
> 赞同：6
> 
> 时间：2013-03-10T20:26:16.617
> 
> 标签：java, bit-manipulation

我正在粘贴代码以使用按位运算符查找两个数字的总和。请建议是否可以优化。谢谢...

```
public static int getSum(int p, int q)
{
int carry=0, result =0;
for(int i=0; i<32; i++)
{
    int n1 = (p & (1<<(i)))>>(i); //find the nth bit of p
    int n2 = (q & (1<<(i)))>>(i); //find the nth bit of q

    int s = n1 ^ n2 ^ carry; //sum of bits
    carry = (carry==0) ? (n1&n2): (n1 | n2); //calculate the carry for next step
    result = result | (s<<(i)); //calculate resultant bit
}

return result;
} 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-16T14:15:02.217

整体思考：

```
public static int getSum(int p, int q)
{
    int result = p ^ q; // + without carry 0+0=0, 0+1=1+0=1, 1+1=0
    int carry = (p & q) << 1; // 1+1=2
    if (carry != 0) {
        return getSum(result, carry);
    }
    return result;
} 
```

此递归结束，因为进位在右侧连续有更多位 0（最多 32 次迭代）。

可以很容易地把它写成一个循环`p = result; q = carry;`。

算法探索的另一个特点是在区分案例方面不会走得太远。上面你也可以采取条件：`if ((result & carry) != 0)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T20:29:10.410

我认为优化应该在可读性领域，而不是性能（可能由编译器处理）。

### 使用 for 循环而不是 while

如果您事先知道迭代次数，则该习惯用法`for (int i=0; i<32; i++)`比 while 循环更具可读性。

### 将数字除以二

将数字除以二并获得模数：

```
n1 = p % 2;
p  /= 2; 
```

可能比以下更具可读性：

```
(p & (1<<(i-1)))>>(i-1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-21T05:13:56.613

我认为下面的soln很容易理解和简单，

```
public static void sumOfTwoNumberUsingBinaryOperation(int a,int b)
{
    int c = a&b;
    int r = a|b;
    while(c!=0)
    {
        r =r <<1;
        c = c >>1;      
    }
    System.out.println("Result:\t" + r);    
} 
```

# javascript - Javascript 函数参考最佳实践

> ID：15327174
> 
> 赞同：0
> 
> 时间：2013-03-10T20:26:42.313
> 
> 标签：javascript, prototype, javascript-objects

```
function name( elements ){

    init( elements );

    var ret = {
        add : function( more ){
            $.extend(elements, more);
            init( more );
        }
    }

    function init( el ){
        $.each(el,function(name, selector){
            //some stuff....
        });
    }

    return ret;
} 
```

我非常使用这种结构（我自己创建的）......在不使用对象的情况下做这样的想法非常简单和好：

```
var reference = name({ one : $('#one'), two : $('#two') });

//and in a second moment...
reverence.add({ three : $('#tree') }); 
```

这是一个好习惯还是不是？使用物体和距离更好吗？为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T20:56:26.150

在我看来，构造函数和原型（JavaScript 相当于传统的类）导致代码更具可读性和可维护性。我必须将您的示例阅读三遍才能弄清楚它在做什么（基本上，使用“添加”方法创建字典结构）。

原型更加 javascript-y，并使用一种常见且众所周知的范式——对其他人或两年后的你来说更容易回顾和理解。

考虑一下下面的内容是多么容易阅读：

```
/** @constructor */
function Name(elememts) {
    this.elements = this._init(elements)
}

Name.prototype.add = function(more) {
    $.extend(this.elements, this._init(more));
}

Name.prototype._init = function(elements) {
    // some stuff...
} 
```

您的方法确实具有隐藏私有函数的优势。对于传统的原型继承，没有“private”关键字，因此您要记住不要从对象本身外部调用私有方法。（Google 的 Closure Compiler 确实有一个 @private 注释，它会帮助您执行它，但它并不是一个完美的系统。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T20:57:13.200

我建议你使用闭包......它们在 javascript 中很强大...... :)

```
var status = function (status) {
return {
get_status: function ( ) {
return status;
}
};
};

// Make an instance of status.
    var myStatus = status("amazed");
    document.writeln(myStatus.get_status( )); 
```

# javascript - 如何从现有对象创建新对象？

> ID：15327182
> 
> 赞同：0
> 
> 时间：2013-03-10T20:26:56.857
> 
> 标签：javascript

这不起作用，我不知道如何解决它

```
function bar() {...}

function foo() {
    this = new bar();

    this.newfunction = function() {...};
    this.newvalue = "foobar";
}

var foobar = new foo(); 
```

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T20:29:16.497

不要`this`用来表示另一个对象。

```
function bar() {...}

function foo() {
    var bar = new bar();

    bar.newfunction = function() {...};
    bar.newvalue = "foobar";
}

var foobar = new foo(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T20:32:48.100

你想继承自`bar`吗？`call`然后你可以使用（或）借用它的构造函数和它自己的所有属性`apply`：

```
function bar() {...}

function foo() {
    bar.call(this);
    this.newfunction = function() {...};
    this.newvalue = "foobar";
}

var foobar = new foo(); 
```

# python - 连接四个 Python 打印问题

> ID：15327185
> 
> 赞同：0
> 
> 时间：2013-03-10T20:27:20.047
> 
> 标签：python

我已经为游戏连接 4 制作了一个初始化的棋盘，我现在想跟踪每个回合的位置和游戏，这样如果我这样做：

```
b = ConnectFour()
b.play_turn(1, 3)
b.play_turn(1, 3)
b.play_turn(1, 4)
b.print_board() 
```

该板应打印出：

```
-----------------------------
| 0 | 1 | 2 | 3 | 4 | 5 | 6 |
-----------------------------
|   |   |   |   |   |   |   |
|   |   |   |   |   |   |   |
|   |   |   |   |   |   |   |
|   |   |   |   |   |   |   |
|   |   |   | x |   |   |   |
|   |   |   | x | x |   |   |
----------------------------- 
```

更新：

```
#initializes board

class ConnectFour(object):
        def __init__(self):
            self.board = [[0 for i in range(7)] for j in range(8)]

def get_position(self, row, column):
  """ Returns either None or an integer 1 or 2 depending 
  on which player is occupying the given row or column.  
  Row is an integer between 0 and 5 and column is an integer between 0 and 6\. """
assert row >= 0 and row < 6 and column >= 0 and column < 7
return self.board[row][column]

def play_turn(self, player, column):
    """ Updates the board so that player plays in the given column.

    player: either 1 or 2
    column: an integer between 0 and 6
    """
    assert player == 1 or player == 2
    assert column >= 0 and column < 7

    for row in range(6):
        if self.board[row][column] == None:
            self.board[row][column] = player
            return

def print_board(self):
    print "-" * 29
    print "| 0 | 1 | 2 | 3 | 4 | 5 | 6 |"
    print "-" * 29
    for row in range(5,-1,-1):
        s = "|"
        for col in range(7):
            p = self.get_position(row, col)
            if p == None:
                s += "   |"
            elif p == 1:
                s += " x |"
            elif p == 2:
                s += " o |"
            else:                     
                s += " ! |"
        print s
print "-" * 29 
```

解决：

这是当前输出：

```
-----------------------------
| 0 | 1 | 2 | 3 | 4 | 5 | 6 |
-----------------------------
|   |   |   |   |   |   |   |
|   |   |   |   |   |   |   |
|   |   |   |   |   |   |   |
|   |   |   |   |   |   |   |
|   |   |   | x |   |   |   |
|   |   |   | x | x |   |   |
----------------------------- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T22:35:44.537

我看到的问题是你的 self.get_position 没有做你想做的事。

```
def get_position(self, row, column):
    assert row >= 0 and row < 6 and column >= 0 and column < 7
    if self.get_position == 1: # the type of self.get_position is a function, and it will never be equal to 1, or 2, so it always goes to None
            return 1
        elif self.get_position == 2:
            return 2
        else:
            return None 
```

另一个问题是您从未使用过板，并且您从未将数据存储在任何地方。
如果我是你，我会首先考虑如何存储数据。
一个明显的选择是二维数组。

```
self.board = [[0 for i in range(6)] for j in range(7)] 
```

当您调用 play_turn 时，尝试更新列，例如，您已经在第 3 列上有 [0,0,0,0,2,1]，您将尝试获取第一个不为 0 的元素的索引。然后放之前元素上的新玩家索引，因此它转到 [0,0,0,1,2,1]（如果该作品属于玩家 1）。

然后，实际上使用列号和行号，您想要检查板上的内容。不管是0还是1还是2。
你最好叫它get_player_num之类的。您不会获得位置，而是该位置的棋子的玩家编号。

一个例子。如果我在一个类中有一个 2 * 2 数组：

```
class CF(object):
    def __init__(self):
        board = [[0, 0], [0, 0]] 
```

这代表一个 2 * 2 的字段，现在它们都是空的。
0 0
0 0

我可以设计一个更新方法：

```
def update(self, col, row, newVal):
    self.board[col - 1][row - 1] = newVal 
```

如果做：

```
game = CF()
game.update(1, 2, 1) 
```

然后棋盘变成
0 0
1 0

在阅读棋盘时，我知道在第 1 列，第 2 行是玩家 1 的一块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T22:32:02.803

您的代码`get_position`不正确。您需要检查`self.board`，而不是查看`self.get_position`（这是方法本身，而不是任何值）。

由于您目前没有在任何地方使用 self.board，我不确定您希望它具有什么格式（它是打算成为单个列表还是列表列表？）。

这是我认为您需要添加的内容：

1.  更好地初始化电路板`__init__`。我建议制作`self.board`一个重复 7*6 次的列表`0`或`None`（无论您想表示“空”）。或者，您可以将其设为列表列表（可能是六个列表，每个列表包含七个值）。

2.  检查板中的值`get_position`。如果你正在做一个列表，你应该检查`self.board[row*7+column]`.

3.  该`play_turn`方法需要检查棋盘以找出当将棋子放入指定列时落在哪一行。该部分将位于该列的空的最低行，因此需要一个循环。找到精确位置后，您可以在 中设置值`self.board`。

您的`print_board`功能应该可以正常工作，一旦`get_position`修复。

# asp.net - 在 IIS 上运行 ASP.net 应用程序 - 超时错误

> ID：15327188
> 
> 赞同：0
> 
> 时间：2013-03-10T20:27:37.297
> 
> 标签：asp.net, iis

我在 Visual Studio 的内部 IIS 中的 localhost 上运行我的 asp.net 应用程序，出于测试目的，我试图在家里的 LAN 上托管我的网站。我显然不得不切换到使用自定义 IIS Web 服务器。我按照所有步骤执行此操作，即我从控制面板中的 Windows 功能打开 IIS，并将我的 Web 应用程序添加到 IIS 并配置 VS 设置以使用该服务器并为其提供启动 URL。

但是，当我运行我的项目时，我收到一条错误消息：

> 无法在 Web 服务器上开始调试。Web 服务器没有及时响应。这可能是因为另一个调试器已附加到 Web 服务器。

此错误的原因是什么，我该如何解决？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:34:53.027

一种解决方法是制作一个空页面，然后从中调用调试器

```
System.Diagnostics.Debugger.Launch(); 
```

为了解决这个问题并使从 VS 启动调试器成为可能，您必须配置启动页面以在项目的属性中查看本地 IIS。我还注意到，如果您没有默认浏览器，IE 也可能会失败。所以对我来说，继续前进，从页面调用调试器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-27T13:38:01.543

[我有同样的问题，我通过从cmd](http://www.aspdotnet-suresh.com/2011/12/visual-studio-unable-to-start-debugging.html) => " `iisreset`"重置 iis 解决了它

# android - 为什么我在尝试启动模拟器时收到“PANIC：无法打开”？

> ID：15327195
> 
> 赞同：0
> 
> 时间：2013-03-10T20:28:16.543
> 
> 标签：android, eclipse, android-emulator, adt, eclipse-adt

我在这个主题上看到了一些类似的问题，例如[this](https://stackoverflow.com/questions/9009872/android-eclipse-panic-could-not-open)和[this](https://stackoverflow.com/questions/6641498/android-emulator-cant-start-cause-of-wrong-folder)，但是虽然这两个问题处理的是不正确的路径，但我根本没有得到路径。

![](../Images/c92dd49b7fb4e01ac5b1d92edfe3b3cf.png)

我错过了什么吗？我所做的只是按照[本教程](http://developer.android.com/training/basics/firstapp/running-app.html)创建一个虚拟 Android 设备，然后遇到了这个错误。

查看虚拟设备的详细信息，它的路径是`D:\.android\avd\VirtualDeviceNexus.avd`，它**确实**存在于我的系统中。

![在此处输入图像描述](../Images/11e66c99d339344317ace9bd96ce3e13.png)

有任何想法吗？（或者这只是相同的错误，但外观不同，一年后的 Android 进步？）

# android - listview onItemClick 未触发

> ID：15327201
> 
> 赞同：0
> 
> 时间：2013-03-10T20:28:52.160
> 
> 标签：android, listview

我在一项活动中有两个列表视图。我为每个设置了适配器。

这就是我所拥有的：

```
 lv.setAdapter(new ArrayAdapter<String>(this, 
            R.layout.custom_list_item_1, classesBradycardia));
            specialist.setAdapter(new ArrayAdapter<String>(this, 
                    R.layout.custom_list_item_1, specialistBradycardia));
            lv.setOnItemClickListener(this);

  public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
 // TODO Auto-generated method stub
    String selectedVal = //((TextView) v).getText().toString();
            lv.getItemAtPosition(position).toString();
    Log.d(selectedVal, "it's in " + selectedVal);
    final int result = 1;
    Bundle extras = new Bundle();
    switch(v.getId()){
    case R.id.lvSpecificTest:
        if(selectedVal.equals("Electrocardiogram")){
            Intent ecg = new Intent(this, ViewTest.class);
            extras.putString("viewtest", "Electrocardiogram");
            ecg.putExtras(extras);
            startActivityForResult(ecg, result); 
```

我把登录放在里面。它正在显示所选项目，但不会进入下一个活动。我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:34:06.390

> 它只有一个 textview = @android:id/text1

您的 switch 语句将永远不会运行，因为 id 不匹配......

```
switch(v.getId()){
case R.id.lvSpecificTest:  // Does not equal android.R.id.text1 
```

* * *

**添加**

> 在我的主要布局中，我有 2 个列表视图，其中一个名为 lvSpecificTest？

第二个参数`v`指的是行，即`R.layout.custom_list_item_1`不是ListView。第一个参数`parent`是指ListView。尝试：

```
switch(parent.getId()){
case R.id.lvSpecificTest: 
```

# css - 在字体中添加国际字符？

> ID：15327204
> 
> 赞同：0
> 
> 时间：2013-03-10T20:29:13.147
> 
> 标签：css, fonts

如何在字体中添加国际字符？我正在设计一个字体很棒的网站，但它不支持Č，Ć，Š等......

我可以创建并添加它吗？

字体是 BebasNeue。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T20:31:00.717

假设字体是这个[http://www.dafont.com/bebas-neue.font](http://www.dafont.com/bebas-neue.font)它似乎不包括你需要的字符，所以唯一的方法（保存自己实现它）是选择一个不同的字体。

# android - 单击时如何显示/隐藏操作栏

> ID：15327208
> 
> 赞同：4
> 
> 时间：2013-03-10T20:29:35.433
> 
> 标签：android, android-actionbar, show-hide

当用户单击屏幕上的任意位置时，我希望操作栏隐藏，再次按下时它应该重新出现。

我知道有一个东西叫做 actionbar.hide(); 并展示，但你能帮我如何实现它吗？:)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-10T20:32:16.743

只是[隐藏（）](http://developer.android.com/reference/android/app/ActionBar.html#hide%28%29)：

```
getActionBar().hide(); 
```

当你想隐藏它，并使用[show()](http://developer.android.com/reference/android/app/ActionBar.html#show%28%29)：

```
getActionBar().show() 
```

当你想展示它。就是这样。

请记住，如果您使用[View.SYSTEM_UI_FLAG_FULLSCREEN](http://developer.android.com/reference/android/view/View.html#SYSTEM_UI_FLAG_FULLSCREEN)，这将无法正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T20:40:49.640

试试这个。您可以根据您的建议调用 hide 或 show 方法

```
public class AbstractActivity Activity {

   private boolean showActions = false;

   @Override
   protected void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);

      ActionBar bar = getSupportActionBar();
      if (bar != null) {
         bar.setHomeButtonEnabled(true);
         bar.setDisplayShowHomeEnabled(true);
      }
   }

   @Override
   public boolean onCreateOptionsMenu(Menu menu) {
      return super.onCreateOptionsMenu(menu);
   }

   @Override
   public boolean onOptionsItemSelected(MenuItem item) {
      int id = item.getItemId();
      switch (id) {
      case android.R.id.home:

         return true;
      default:
         // Nothing to do here
         return super.onOptionsItemSelected(item);
      }
   }

   private void handleActionBarTitle(boolean show) {
      ActionBar actionBar = getSupportActionBar();
      if (actionBar == null) {
         return;
      }
      actionBar.setDisplayShowTitleEnabled(show);
   }

   protected void disableActions() {
      this.showActions = false;
   }

   protected void enableActions() {
      this.showActions = true;
   }

   protected void hideActionBarTitle() {
      handleActionBarTitle(false);
   }

   protected boolean showActions() {
      return showActions;
   }

   protected void showActionTitle() {
      handleActionBarTitle(true);
   } 
```

您的活动只需要扩展此 AbstractActivity

# java - 将二维矩阵转换为列的字符串数组（java）

> ID：15327209
> 
> 赞同：1
> 
> 时间：2013-03-10T20:29:46.207
> 
> 标签：java

我对java中的ArrayLists了解不多。我需要解决以下问题：如何制作二维矩阵列的数组[]。输入文件是：

VGV VV GVVV
EFV VF EVEV
VVV VV VVVV
AAV VA GVAD
VDV VD EVVV
AVV VV VVAV

Stringarray 所需的格式`liner`（见下文）是：

{"VEVAVA","GFVADV","VVVVVV","VVVFVVVAVDVV","GEVGEV","VVVVVV","VEVAVA","VVVDVV"}

我的代码是：

```
 ArrayList<String[]> mat = new ArrayList<String[]>();

Scanner scan = new Scanner(new File("internal2"));
String[] liner = new String[m];
while (scan.hasNextLine()) {

    Scanner colReader2 = new Scanner(scan.nextLine());
    while(colReader2.hasNext())
    {
        for(int i = 0; i<m; i++) {
            liner[i] = colReader2.next();
//System.out.println(liner[i]);
            mat.add(liner);
            }

    }
//        scan.nextLine();
} 
```

这样做的目的是我想在`liner`. 现在程序似乎只给出`liner`这样的： {"A","V","V","VV","V","V","A","V"} 这是最后一行输入文件。我希望你能帮助我。

**编辑**

我的代码继续：

```
Pattern pattern = Pattern.compile("[A-G]+");
Pattern pattern2 = Pattern.compile("[V]+");

String[][] matrix4 = mat.toArray(new String[n][m]);

for (int i = 0; i < m; i++) {

    StringBuffer sf = new StringBuffer();
    for (int j = 0; j < n; j++) {
        sf.append(matrix4[j][i]);

    }

    Matcher matcher = pattern.matcher(sf.toString());
    Matcher matcher2 = pattern2.matcher(sf.toString());

    if (matcher.find()) {
        System.out.println("R");
    } else if (matcher2.matches()) {
        System.out.println("Q");
    }

} 
```

因此，对于`liner`包含至少 1次`A-G`出现的列字符串，`R`必须打印。对于仅包含`V`'s 的列字符串，它必须打印`Q`。那么输出应该是：

```
R
R
Q
R
R
Q
R
R 
```

但这不是我得到的。你们有谁知道我做错了什么？

**解决了：**

我不得不`null`通过使用 s 从衬垫中取出`Arrays.fill(liner, "");`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:39:29.723

`Scanner.next()` only scans characters until the next whitespace. If you want to scan a whole line use `Scanner.nextLine()`, which should give you `"V G V VV G V V V"`. To remove the whitespace between the characters use `String.replaceAll("\s", "")` on that.

**Update:** sorry, I misunderstood your question.

To get your desired output, change `liner[i] = colReader2.next()` to `liner[i] += colReader2.next()`

That should append a character to the array entry instead of replacing it.

**Update #2:** I tested your code snippets and found some problems.

*   `liner[i]` isn't initialized with an empty String which leads to the output `nullVEVAVA` and so on ... I didn't check for that, sorry.
*   you don't need to use two Scanners, one is enough.
*   `mat.add(liner)` only adds the reference to your array, so if you change that array, these changes will also be visible in the ArrayList
*   in general, it would be better to first parse your input file and *then* create an array, because you don't have to know the dimensions
*   assuming you want an ArrayList of an Array of Strings holding the columns of the (I assume that it's not jagged) input, this should do it (well, at least it gives me the desired output):

    ```
    ArrayList<String[]> input = new ArrayList<String[]>();

    Scanner sc = new Scanner(new File("input"));

    // read the input
    while (sc.hasNextLine()) {
        input.add(sc.nextLine().split("\\s"));
    }

    sc.close();

    // this only works if your input isn't jagged!
    String[][] mat = new String[input.get(0).length][];

    // transform your matrix from [line][column] to [column][line]
    for (int i = 0; i < input.size(); i++) {
        for (int j = 0; j < input.get(i).length; j++) {
            if (mat[j] == null) {
                mat[j] = new String[input.size()];
            }
            if (mat[j][i] == null) {
                mat[j][i] = "";
            }
            mat[j][i] += input.get(i)[j];
        }
    }

    Pattern pattern = Pattern.compile("[A-G]+");
    Pattern pattern2 = Pattern.compile("[V]+");

    for (int i = 0; i < mat.length; i++) {
        StringBuilder sb = new StringBuilder();
        for (int j = 0; j < mat[i].length; j++) {
            sb.append(mat[i][j]);
        }

        Matcher matcher = pattern.matcher(sb.toString());
        Matcher matcher2 = pattern2.matcher(sb.toString());

        if (matcher.find()) {
            System.out.println("R");
        } else if (matcher2.matches()) {
            System.out.println("Q");
        }
    } 
    ```

If this still doesn't help, I'm sorry, but my time is as precious as yours and I'm sure you can solve many problems by doing some decent research. However, if you get *really* stuck, just come back and ask another question and we will willingly help you out ;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T20:48:58.543

Use a StringBuilder in the array list and append to it. I guess the size of the matrix is known before you start accepting values? Not sure what you are expecting from the

```
List<StringBuilder[]> mat = new ArrayList<StringBuilder[]>();//better to declare as list, array list is 1 implementation

Scanner scan = new Scanner(new File("internal2"));
int col = 0;    
while (scan.hasNextLine()) {
    col = 0;
    Scanner colReader2 = new Scanner(scan.nextLine());
    while(colReader2.hasNext())
    {

        if(mat.size() < (col + 1)){
            mat.add(new StringBuilder());
        }
        //mat.get(col).substring(mat.get(col).length() - 1);
        mat.get(col).append(colReader2.next())
        }

}
//        scan.nextLine(); 
```

}

# javascript - 附加项目时，如何使轮播上的点击功能起作用？

> ID：15327210
> 
> 赞同：1
> 
> 时间：2013-03-10T20:29:49.393
> 
> 标签：javascript, jquery, append, carousel

[我在http://belmontfeed.com/site/](http://belmontfeed.com/site/)有一个（非常原始的）测试站点，我试图让右侧的垂直旋转木马控制左侧的照片。

上一个/下一个按钮可以正常工作，通常单击轮播项目会加载与其关联的照片，但每当我在轮播上使用 allowWrap 时，单击不再起作用。

我相信这是因为附加/前置混淆了单击功能所基于的计数，但我对 jQuery 相当陌生，不知道该转向哪里。

完整的代码应该可以在上面的网站上看到。任何帮助将非常感激！

```
if ( opts.allowWrap !== false ) {
  // prepend and append extra slides so we don't see any empty space when we
  // near the end of the carousel.  for fluid containers, add even more clones
  // so there is plenty to fill the screen
  // @todo: optimize this based on slide sizes
  opts.slides.slice(0, opts.slideCount).clone().css( slideCSS ).appendTo( wrap );
  if ( opts.carouselVisible === undefined )
     opts.slides.slice(0, opts.slideCount).clone().css( slideCSS ).appendTo( wrap );
  opts.slides.slice(0, opts.slideCount).clone().css( slideCSS ).prependTo( wrap );
  if ( opts.carouselVisible === undefined )
     opts.slides.slice(0, opts.slideCount).clone().css( slideCSS ).prependTo( wrap );

  wrap.find('.cycle-slide-active').removeClass('cycle-slide-active');
  opts.slides.eq(opts.startingSlide).addClass('cycle-slide-active');
} 
```

**UPDATE：**最直接的点击功能代码如下：

```
$('#cycle-2 .cycle-slide').click(function(){ 
    var index = ($('#cycle-2').data('cycle.API').getSlideIndex(this)-8);   
    slideshows.cycle('goto', index); 
}); 
```

我添加了一个 ghetto 修复，只需将计数减去 8（因为这是前置的数量），但一旦达到数字 8，它就会停止运行，直到它自动旋转回 1。一个更可持续的修复将是可爱的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T20:46:16.857

使用 jquery 的新规范，您可以调用

```
$(document).on('click', '.cycle-carousel-wrap > div', function(e) {...}); 
```

这样，jquery 每次都会找到对象，而不管它是否被修改/附加/等。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T01:21:52.650

修复！通过快速修复并将运算符从“-”切换到“%”，我能够达到我想要的结果。要将其设置为动态数字，我只需将八个换成一个表示循环帖子数量的变量。

```
$('#cycle-2 .cycle-slide').click(function(){ 
    var index = ($('#cycle-2').data('cycle.API').getSlideIndex(this)%8);   
    slideshows.cycle('goto', index); 
}); 
```

# c++ - 如何创建可以独立于其依赖项使用的 C++ 库？

> ID：15327212
> 
> 赞同：0
> 
> 时间：2013-03-10T20:29:53.507
> 
> 标签：c++, visual-studio-2010, visual-c++, dll, linker

基本上，我编写了一个具有许多依赖项的 C++ 库。他们是：

*   适用于 Windows 的 GNU 科学库
*   GLEW
*   STD（std::vector，这甚至是依赖项吗？）

我希望能够使用 Visual Studio 2010 从此代码生成一个库。我希望能够创建一个新的 Win32 控制台应用程序，引用该库并使用它。我不想让这个新的控制台应用程序也引用库的依赖项。

我不确定我所追求的是否可能。我应该创建动态库还是静态库？我应该如何链接到它？这些是我想到的子问题，但我认为我在这里错过了大局。

因此我的问题是：如何创建一个可以独立于其依赖项使用的 C++ 库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T20:32:59.760

创建引用这些库的包装函数和类？此外，这些其他库必须是静态链接的，或者如果它们是动态链接的，则必须将 DLL 与您的应用程序一起部署！

如果一切都失败了，使用UPX？:-) 创建单个二进制文件。

# file - 尝试输出两个文件的所有可能组合

> ID：15327213
> 
> 赞同：1
> 
> 时间：2013-03-10T20:29:54.200
> 
> 标签：file, compare

您好，我正在尝试制作一个 perl 脚本，该脚本将采用 2 个文件（包含单词）并将它们加入到每个可能的组合中。

例如。

文件 1 包含：

```
 make 
  move 
```

文件 2 包含：

```
 on
   out 
```

输出文件应为：

```
 makeon
   makeout
   moveon
   moveout 
```

理想情况下，最好将文件的顺序颠倒 IE

onmove outmove onmake outmake

以下是我尝试过的一些事情，但我是初学者，永远无法正确输出

```
! /usr/bin/perl

open (OUT, '> output.txt');

use strict;

use warnings;

use Data::Dump qw(dump);

my @in = qw(aaa bbb ccc ddd);

my @list;

while(my $first = shift @in) {

        last unless @in;
        my $rest = join'\n', @in;
        push @list, glob("{$first}{$rest}");
}
        dump @list;

# Some other attempts

my @karray;

my @sarray;

my @testarr = (@sarray)+@karray;

my $stemplate = "test1.txt";

my $ktemplate = "test2.txt";

my $outtemplate = "output.txt";

sub pushf2a {

  open(IN, "<$_[0]") || die;

  while (<IN>) {

    if ($_[0] eq $stemplate) {

      push (@sarray,@karray,$_);

    } else {

      push (@karray,@sarray,$_);
    }

  }

  close(IN) || die  $!;

}

&pushf2a($stemplate, @sarray);

&pushf2a($ktemplate, @karray);

print OUT @sarray, @karray;

print OUT @list;

close (OUT); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:42:50.697

可能有更巧妙的方法可以做到这一点，但这很简单：

```
#!/usr/bin/env perl
use Tie::File;
use strict;
use warnings;

tie my @a, 'Tie::File', $ARGV[0] or die "$ARGV[0]: $!\n";
tie my @b, 'Tie::File', $ARGV[1] or die "$ARGV[1]: $!\n";
foreach my $w( @b ) { print "$w$_\n" foreach( @a )} 
```

使用您的两个输入文件作为参数调用此脚本。例如，如果您将上述内容放在名为“combine”的文件中并使其可执行：

```
./combine file1.txt file2.txt 
```

# css - 如果字体存在，CSS 可以设置适当的属性吗？

> ID：15327215
> 
> 赞同：4
> 
> 时间：2013-03-10T20:30:05.723
> 
> 标签：css, fonts, exists

我想在我的 Web 应用程序中使用不同的字体。由于它们的大小不相等，我想在 CSS 中做一些类似这样的伪代码：

```
if (exists(font1))
{
   font-size: 9pt; font-family: font1;
}
else
{
   font-size: 12pt; font-family: font2;
} 
```

是否可以？什么是最好和正确的解决方案？如何为某种字体定义字体大小并为下一个字体定义另一个字体大小？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T21:07:28.947

CSS一般没有条件或其他动态结构。

您的问题是通过使用所谓的“字体堆栈”解决的。您`font-family`使用逗号分隔的字体名称列表进行声明。客户端浏览器现在从他可用的列表中选择字体。这就是为什么创建好的字体堆栈是一项棘手的任务（因为它们应该看起来相似或至少具有相似的字母间距/行高）。如果你在谷歌上搜索 Web 字体堆栈，你会从专业的字体专家那里得到一些关于该主题的好文章，他们已经为你创建了漂亮的字体堆栈。

现在的另一种选择是通过`@font-face`声明提供您想要的字体作为可下载字体。但是请记住：

*   您需要多种格式来支持所有浏览器
*   他们为可能与手机相关的页面加载增加了额外的权重
*   您需要使用该字体或使用免费字体的权利（Google 提供了一项服务，您可以从各种免费字体中进行选择）

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-10T20:46:46.663

您可以为此使用 javascript 语句。或者您可以为您的文本分配不同的 id。例如：-

```
<div id="font1"><p>Some Text</p></div> 
```

然后在你的css文件中： -

```
#font1 p{
   font-family:sans-serif;
   font-size:10px;
} 
```

这样您就可以很好地为 Web 应用程序中的不同文本分配不同的字体...

# android - Wifi Direct 组记忆

> ID：15327217
> 
> 赞同：4
> 
> 时间：2013-03-10T20:30:13.110
> 
> 标签：android, wifi-direct

如何删除 Wifi Direct 记忆的群组？

如果可能，允许删除组的功能是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-03T07:17:44.900

唯一的方法是使用自省删除组：

```
Method deletePersistentGroupMethod = WifiP2pManager.class.getMethod("deletePersistentGroup", WifiP2pManager.Channel.class, int.class, WifiP2pManager.ActionListener.class);

for (int netid = 0; netid < 32; netid++) {
    deletePersistentGroupMethod.invoke(this.manager, this.channel, netid, null);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:34:12.993

据我所知，Wi-Fi Direct Persistent 组尚未实现（在 Android API 级别 17 中）。因此，您不必费心删除记忆的组，因为它们不存在（尚）。

# java - Fill rectangle with pattern in Java Swing

> ID：15327220
> 
> 赞同：11
> 
> 时间：2013-03-10T20:30:15.680
> 
> 标签：java, swing, graphics, 2d, design-patterns

I know how to fill a rectangle in Swing with a solid color:

```
Graphics2D g2d = bi.createGraphics();
g2d.setColor(Color.RED);
g2d.fillRect(0,0,100,100); 
```

I know how to fill it with an image:

```
BufferedImage bi;
Graphics2D g2d = bi.createGraphics();
g2d.setPaint (new Color(r, g, b));
g2d.fillRect (0, 0, bi.getWidth(), bi.getHeight()); 
```

But how to fill rectangle of size 950x950 with some tiled pattern of size 100x100?

*(pattern image should be used 100 times)*

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-10T20:37:59.687

You're on the right track with `setPaint`. However, instead of setting it to a color, you want to set it to a [`TexturePaint`](http://docs.oracle.com/javase/7/docs/api/java/awt/TexturePaint.html) object.

From [the Java tutorial](https://docs.oracle.com/javase/tutorial/2d/geometry/strokeandfill.html):

> The pattern for a TexturePaint class is defined by a BufferedImage class. To create a TexturePaint object, you specify the image that contains the pattern and a rectangle that is used to replicate and anchor the pattern. The following image represents this feature: ![example image](../Images/f0c2bbb95d3e8c2b2408b2a9898efa82.png)

If you have a `BufferedImage` for the texture, create a `TexturePaint` like so:

```
TexturePaint tp = new TexturePaint(myImage, new Rectangle(0, 0, 16, 16)); 
```

where the given rectangle represents the area of the source image you want to tile.

The constructor JavaDoc is [here](http://docs.oracle.com/javase/7/docs/api/java/awt/TexturePaint.html#TexturePaint%28java.awt.image.BufferedImage,%20java.awt.geom.Rectangle2D%29).

Then, run

```
g2d.setPaint(tp); 
```

and you're good to go.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-20T21:24:54.713

As @wchargin said, you can use `TexturePaint`. Here is an example:

```
public class TexturePanel extends JPanel {

    private TexturePaint paint;

    public TexturePanel(BufferedImage bi) {
        super();
        this.paint = new TexturePaint(bi, new Rectangle(0, 0, bi.getWidth(), bi.getHeight()));
    }

    @Override
    protected void paintComponent(Graphics g) {
        Graphics2D g2 = (Graphics2D) g;
        g2.setPaint(paint);
        g2.fill(new Rectangle(0, 0, getWidth(), getHeight()));
    }
} 
```

# arduino - XBee 发送给所有人

> ID：15327225
> 
> 赞同：3
> 
> 时间：2013-03-10T20:30:49.097
> 
> 标签：arduino, xbee, zigbee

我有一个简单的 xbee 网络运行，其中有一堆从属远程操作，并且都与一个连接到服务器计算机的主通信。这没问题。

奴隶都将他们的 ID 作为数据包的一部分发送，我想让主人在延迟后故意发送一个确认。我试图弄清楚如何有效地做到这一点，似乎唯一合理的方法不涉及在每个 Ack 之前重新编程主机是向所有从机发送 Ack 并让他们忽略该数据包，如果它不是为了他们。

该解决方案没问题 - 我只是无法弄清楚用于执行此操作的命令。是否有某种 Serial sendAll 命令？所有设备都在同一个 ATID 上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T00:40:59.557

通常在这种情况下，您会在 API 模式下配置主设备，这样您将获得带有源寻址信息的“接收显式”帧，并可以使用“传输显式”帧类型发送，并在帧中包含寻址信息。

如果您使用 AT 模式（透明串行模式），那么每次您想更改发送给谁时，您都必须更改协调器上的 DH 和 DL 参数。您应该避免使用广播数据包，因为每个都会导致大量网络流量（IIRC，每个路由器将发送广播数据包 3 次）。

我不知道 Arduino 上有一个好的 XBee 库，但可以将 Digi 的开源[ANSI C XBee 主机库](https://github.com/digidotcom/xbee_ansic_library)移植到该平台。

# wpf - DataGrid 绑定命令到行选择

> ID：15327227
> 
> 赞同：18
> 
> 时间：2013-03-10T20:30:57.367
> 
> 标签：wpf, select, data-binding, datagrid, command

当用户在 DataGrid 中选择一行时，我想执行一个命令。

我看到可以将单元格内容包装在按钮中（尽管我不想要按钮样式） - 但我不想在单元格级别这样做。

我还看到可以使用行为将命令链接到事件。但最好我不应该为了这样一个共同的任务而诉诸行为。

是否可以通过普通的旧命令数据绑定来做到这一点？

所以：1）用户单击 DataGrid 行 2）视图模型上的命令被触发。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-03-10T21:07:56.457

您应该使用“交互性”程序集和`SelectionChanged`事件。

```
<DataGrid AutoGenerateColumns="False" ItemsSource="{Binding People}">
    <DataGrid.Columns>
        <DataGridTextColumn Header="ID" Binding="{Binding ID}" />
        <DataGridTextColumn Header="Name" Binding="{Binding Name}" />
    </DataGrid.Columns>
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="SelectionChanged">
            <i:InvokeCommandAction Command="{Binding MyCommand}" />
        </i:EventTrigger>
    </i:Interaction.Triggers>
</DataGrid> 
```

其中“i”是命名空间：

```
xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity" 
```

您还可以编写`SelectedItem`对 DataGrid 属性的绑定，并在 set 访问器中调用您的命令，但我在上面介绍的第一个解决方案更好。

如果您想从主视图模型调用命令并从中传递`SelectedItem`，`DataGrid`您可以使用`CommadParameter`：

```
<i:Interaction.Triggers>
    <i:EventTrigger EventName="SelectionChanged">
        <i:InvokeCommandAction Command="{Binding MyCommand}" 
        CommandParameter="{Binding Path=SelectedItem, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=DataGrid}}" />
    </i:EventTrigger>
</i:Interaction.Triggers> 
```

当 items 有自己的命令时，您可以使用以下代码：

```
<i:Interaction.Triggers>
    <i:EventTrigger EventName="SelectionChanged">
        <i:InvokeCommandAction Command="{Binding Path=SelectedItem.MyCommand, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=DataGrid}}" />
    </i:EventTrigger>
</i:Interaction.Triggers> 
```

或者，如果元素具有分配给它的自己的视图模型，则`DataContext`可以使用以下代码：

```
 <i:Interaction.Triggers>
    <i:EventTrigger EventName="SelectionChanged">
        <i:InvokeCommandAction Command="{Binding Path=SelectedItem.DataContext.MyCommand, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=DataGrid}}" />
    </i:EventTrigger>
</i:Interaction.Triggers> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-11-16T03:32:38.953

请注意，@kmatyaszek 的答案在 .NET 5.0 及更高版本中已过时，我们应该使用`Microsoft.Xaml.Behaviors`而不是`Microsoft.Expression.Interactions`.

所以`i`命名空间中的应该是：

```
xmlns:i="http://schemas.microsoft.com/xaml/behaviors" 
```

有关详细信息，请参见[此处](https://devblogs.microsoft.com/dotnet/open-sourcing-xaml-behaviors-for-wpf/)。

# php - 使用 jqplot 在 Javascript 中的 PHP

> ID：15327231
> 
> 赞同：0
> 
> 时间：2013-03-10T20:31:18.367
> 
> 标签：php, arrays, jqplot

这个问题已经在这里问过几次了，但不幸的是，答案并不能解决我的问题。

该网站目前可在[http://www.crosstrendanalysis.co.uk/jqplot_test.php实时查看](http://www.crosstrendanalysis.co.uk/jqplot_test.php)

相关代码在下面，但问题的症结在于下面的代码；

```
var line1 = "<?php echo $outputString; ?>"; 
```

当我使用 $outputString 的输出（通过复制和粘贴）而不是使用 php 时，它可以完美地创建一个图形，但是当我尝试使用 php 时它不起作用。

我正在尝试将 JQPlot 与从 MySql 数据库获得的数组一起使用。使用以下代码创建数组

```
$weeknumbers = array();
$completedquestionnaires = array();

$output = array();
while($row=mysqli_fetch_assoc($resultQuestionnaireCount)){
//  $completedquestionnaires[] = $row['VolumeOfAnswers'];
//  $weeknumbers[] = $row['WeekNumber'];
$temp1 = array();
$temp2 = array();
$temp1[] = "".$row['WeekNumber']."";
$temp2[] = "".$row['VolumeOfAnswers']."";

$output[] = '[' . json_encode(implode(", ", $temp1)) . ', ' . implode(", ", $temp2) . ']';
//$output[] = $temp1;
}
//$outputTemp = implode(',\n',$output);
$outputString = '['.print_r(implode(",\n",$output),1).']';
$output = json_encode($output); 
```

JQPlot 代码是：

```
<script type="text/javascript">
$(document).ready(function(){
    var line1 = "<?php echo $outputString; ?>";
  var plot1 = $.jqplot('chart1', [line1], {
    title: 'Volume of questionnaires completed',
    series:[{renderer:$.jqplot.BarRenderer}],
    axesDefaults: {
        tickRenderer: $.jqplot.CanvasAxisTickRenderer ,
        tickOptions: {
          angle: -30,
          fontSize: '10pt'
        }
    },
    axes: {
      xaxis: {
        renderer: $.jqplot.CategoryAxisRenderer
      }
    }
  });
});
</script>

<div id="chart1" style="height:300px; width:500px;"></div>
<?php echo "<h3>";
echo  $output;
    echo "<br>";
    echo $outputString;
    echo "</h3>";?> 
```

我已经为此苦苦挣扎了很长一段时间，所以如果有人能解决这个问题，我将不胜感激。

谢谢莫迪丝

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T20:36:16.083

当您输出 PHP 时，最好右键单击浏览器并查看源代码。在这种情况下，你有这样的事情：

```
var line1 = "[.....],
[.....],
[.....]"; 
```

这是无效的，您的控制台应该告诉您未终止的​​字符串常量。

您应该始终使用`json_encode`将 PHP 变量输出到 JavaScript。在这种情况下，您的代码应该这样重写：

```
$weeknumbers = array();
$completedquestionnaires = array();

$output = array();
while($row=mysqli_fetch_assoc($resultQuestionnaireCount)){
    $temp1[] = "".$row['WeekNumber']."";
    $temp2[] = "".$row['VolumeOfAnswers']."";

    $output[] = array($row['WeekNumber'], $row['VolumeOfAnswers']);
}
$outputString = json_encode($output); 
```

然后在你的 JavaScript 中：

```
var line1 = <?php echo $outputString; ?>; 
```

# c# - 允许退格按钮在经过验证的 TextBox 中工作

> ID：15327232
> 
> 赞同：3
> 
> 时间：2013-03-10T20:31:22.080
> 
> 标签：c#, .net, winforms

我有以下代码只允许文本框中的字母：

```
private void TextBox1_KeyPress(object sender, KeyPressEventArgs e)
{
  Char pressedKey = e.KeyChar;
  if (Char.IsLetter(pressedKey))
 {
// Allow input.
e.Handled = false
}
  else
e.Handled = true;
}
} 
```

我怎样才能让退格键起作用，因为它不允许我在输入后删除字符

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T20:38:58.770

您可以使用 来检查按下的键是否是控制字符`Char.IsControl(...)`，如下所示：

```
private void TextBox1_KeyPress(object sender, KeyPressEventArgs e)
{
    if (!Char.IsLetter(e.KeyChar) && !Char.IsControl(e.KeyChar))
        e.Handled = true;
} 
```

如果您特别需要*仅*检查chars + Delete，请使用以下命令：

```
private void TextBox1_KeyPress(object sender, KeyPressEventArgs e)
{
    if (!Char.IsLetter(e.KeyChar) && e.KeyChar != (char)Keys.Back)
        e.Handled = true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-23T20:31:52.390

这是为那些使用 VB.net 的人准备的。有一个奇怪的转换我从来没有遇到过，我花了一段时间才弄清楚。

这**仅**允许数字、字母、退格和空格。

```
Private Sub TextBox1_KeyPress(sender As Object, e As KeyPressEventArgs) Handles TextBox1.KeyPress
    e.Handled = e.KeyChar <> ChrW(Keys.Back) And Not Char.IsLetter(e.KeyChar) And Not Char.IsDigit(e.KeyChar) And Not Char.IsSeparator(e.KeyChar)
End Sub 
```

# asp.net - 用于发出 Azure blob 内容的 ASPX 处理程序

> ID：15327233
> 
> 赞同：0
> 
> 时间：2013-03-10T20:31:27.080
> 
> 标签：asp.net, azure, azure-blob-storage

我生成 HTML 内容并存储在一个 blob 上，然后我需要将其显示在 IFrame 中。这个 HTML 一直是静态 HTML，但现在我的页面使用了一些由第三方生成的 JavaScript（它只作用于页面本身）。使用 IE，此 JavaScript 在 IFrame 中被阻止（这在 Chrome 中不是问题） - 因此我需要找到一个解决方案，以便 IFrame 中的内容不会被阻止。

我考虑的一种方法是使用 CustomHandler 来解决这个问题。因此，我的处理程序可以处理以“/blob”开头的请求，然后从 blob 下载内容（HTML 页面或图像）并将其服务器化，以便浏览器看起来它来自同一服务器。这是在这里采取的好方法吗？

如果是，那么 ProcessRequest 是否应该简单地下载（HTML 或图像）并将其保存到 context.Response.OutputStream（相应地设置 ContentType）。从 blob 获取数据并提供数据的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:42:38.560

不要将 iframe 用于您自己的内容。如果您想要一个可滚动的区域，请使用 CSS：

```
.containerContentScroll {  overflow: auto;  height: 500px;  scrollbar-base-color: #963; } 
```

此外，所有 Azure blob 内容都可以通过 URL 引用，您可以这样做：

```
<iframe src="http://myblob.blob.core.windows.net/.../image.png /> 
```

最后，如果您需要 iFrame 和跨域脚本，请参阅[这篇 SO 帖子](https://stackoverflow.com/questions/6290053/setting-access-control-allow-origin-in-asp-net-mvc-simplest-possible-method)了解如何在 MVC 中启用它以及[这篇关于 XDomainRequest 对象的文章](http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx)。

**更新**- 刚刚[通过 Access-Control-Allow-Origin 标头发现跨域资源共享 (CORS) 是 Azure 存储的计划功能 - 在这里投票](http://www.mygreatwindowsazureidea.com/forums/34192-windows-azure-feature-voting/suggestions/2850796-support-cross-origin-resource-sharing-cors-via-a)。

# amazon-ec2 - 创建 AMI 后，如何使用相同的配置启动它？

> ID：15327239
> 
> 赞同：0
> 
> 时间：2013-03-10T20:32:16.987
> 
> 标签：amazon-ec2, amazon-ami

我根据自己的喜好设置了我的实例，从中创建了一个映像 (AMI)，然后停止了该实例。我现在想将该实例的 AMI 更改为新的 AMI，然后重新启动该实例。我该怎么做呢？

澄清一下，我不需要*从*管理控制台的 AMI 列表中单击“启动” 。这会创建一个新实例，让我在只需要相同配置时再次通过向导，它会为新实例提供不同的 IP 地址，依此类推。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:02:36.050

我认为您对 AMI 的工作方式存在误解。AMI 只是用于启动具有特定配置的实例的模板。

您从（大概）一个准系统分发 AMI（例如 ami-11111）创建了您的原始实例，对其进行了修改，并创建了您自己的 AMI（例如 ami-22222）。

您现在可以使用 ami-22222 启动实例，该实例将按照您想要的方式进行配置，但它不再与 ami-11111 有任何连接。*“将 AMI [...] 更改为新的 AMI* ”没有任何意义。

如果您停止一个实例，它将在重新启动时始终获得一个新的 IP 地址。您可以通过以下方式获得永久 IP 地址：

*   分配弹性 IP。
*   启动您想要的实例（在本例中为 ami-22222）
*   将弹性 IP 分配给该实例。

然后可以通过弹性 IP 地址访问该实例。

如果您将来修改实例并创建它的新映像（例如 ami-33333），您可以：

*   启动基于 ami-33333 的实例。
*   将您的弹性 IP 分配给 ami-33333（从而断开 ami-22222 与该 IP 的连接）。
*   一旦新实例处于活动状态，就终止 ami-22222。

请注意，转换到新 AMI 可能需要一分钟左右，在此期间服务器将无响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T21:44:40.423

您不能将现有实例更改为新 ami，而是从该 ami 启动新实例。当您启动实例时，它会在您使用的任何存储类型（实例或 ebs）中创建 ami 的副本。

# ios - 将 5 秒的视频间隔上传到服务器

> ID：15327240
> 
> 赞同：1
> 
> 时间：2013-03-10T20:32:18.030
> 
> 标签：ios, avfoundation, http-live-streaming, avassetwriter

我已经将 Apple`RosyWriter`示例代码转换为符合`ARC`现代目标 C。我一直在阅读人们如何使用该`captureOutput:didOutputSampleBuffer:fromConnection`方法将 5-10 秒的剪辑上传到服务器，但我不确定在......从我的`RosyWriter`混合动力车：

```
-(void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection {
CMFormatDescriptionRef formatDescription = CMSampleBufferGetFormatDescription(sampleBuffer);

if (connection == _videoConnection) {
    CMTime timeStamp = CMSampleBufferGetPresentationTimeStamp(sampleBuffer);
    [self calculateFramerateAtTimestamp:timeStamp];

    if (_videoDimensions.height == 0 && _videoDimensions.width == 0) 
        _videoDimensions = CMVideoFormatDescriptionGetDimensions(formatDescription);

    if (_videoType == 0) 
        _videoType = CMFormatDescriptionGetMediaSubType(formatDescription);
}

CFRetain(sampleBuffer);
CFRetain(formatDescription);

dispatch_async(movieWritingQueue, ^{
    if (_assetWriter) {
        BOOL wasReadyToRecord = (_readyToRecordAudio && _readyToRecordVideo);

        if (connection == _videoConnection) {
            if (!_readyToRecordVideo)
                _readyToRecordVideo = [self setupAssetWriterVideoInput:formatDescription];

            if (_readyToRecordAudio && _readyToRecordVideo)
                [self writeSampleBuffer:sampleBuffer ofType:AVMediaTypeVideo];

        }else if (connection == _audioConnection) {
            if (!_readyToRecordAudio)
                _readyToRecordAudio = [self setupAssetWriterAudioInput:formatDescription];

            if (_readyToRecordVideo && _readyToRecordAudio)
                [self writeSampleBuffer:sampleBuffer ofType:AVMediaTypeAudio];

        }

        BOOL isReadyToRecord = (_readyToRecordAudio && _readyToRecordVideo);

        if (!wasReadyToRecord && isReadyToRecord) {
            _recordingWillBeStarted = NO;
            _recording = YES;
            [_delegate recordingDidStart];
        }
    }

    CFRelease(sampleBuffer);
    CFRelease(formatDescription);
});
} 
```

然后像这样写入样本缓冲区：

```
-(void)writeSampleBuffer:(CMSampleBufferRef)sampleBuffer ofType:(NSString*)mediaType {
if (_assetWriter.status == AVAssetWriterStatusUnknown) {
    if ([_assetWriter startWriting]) {
        [_assetWriter startSessionAtSourceTime:CMSampleBufferGetPresentationTimeStamp(sampleBuffer)];
    }else {
        [self showError:[_assetWriter error] source:@"Write sample buffer"];
    }
}

if (_assetWriter.status == AVAssetWriterStatusWriting) {
    if (mediaType == AVMediaTypeVideo) {
        if (_videoInput.readyForMoreMediaData) {
            if (![_videoInput appendSampleBuffer:sampleBuffer]) {
                [self showError:[_assetWriter error] source:@"set up video asset writer"];
            }
        }
    }else if (mediaType == AVMediaTypeAudio) {
        if (_audioInput.readyForMoreMediaData) {
            if (![_audioInput appendSampleBuffer:sampleBuffer]) {
                [self showError:[_assetWriter error] source:@"set up audio asset writer"];
            }
        }
    }
}
} 
```

现在我的问题是......我应该在or方法中创建和交换`assetWriter`'s吗？从我在[ffmpeg-ios](http://github.com/chrisballinger/FFmpeg-iOS-Encoder)中可以看到，它实现了一个类，该类在单独的类上具有自定义方法，其中一个是每 5 秒分段编码器......但是如何将此上传到服务器？`captureOutput:didOutputSampleBuffer:fromConnection:``writeSampleBuffer:ofType:``writeSampleBuffer:ofType``assetWriter`

# recursion - 帕斯卡。递归函数计算序列中奇数的数量

> ID：15327243
> 
> 赞同：0
> 
> 时间：2013-03-10T20:32:37.803
> 
> 标签：recursion, freepascal

我需要编写递归函数来计算序列中奇数的数量

这是我的初始代码：

```
program OddNumbers;

{$APPTYPE CONSOLE}

uses
  SysUtils;

function GetOddNumbersAmount(const x: array of integer; count,i:integer):integer;
begin
   if((x[i] <> 0) and (x[i] mod 2=0)) then
   begin
     count:= count + 1;
     GetOddNumbersAmount:=count;
   end;

   i:=i+1;
   GetOddNumbersAmount:=GetOddNumbersAmount(x, count, i);
end;

var X: array[1..10] of integer;
    i,amount: integer;

begin
  writeln('Enter your sequence:');

  for i:=1 to 10 do
    read(X[i]);

  amount:= GetOddNumbersAmount(X, 0, 1);
  writeln('Amount of odd numbers: ', amount);

  readln;
  readln;
end. 
```

当我输入序列并按“输入”时，程序关闭且没有任何错误，我看不到结果。

另外，我认为我的功能不正确。有人可以帮助处理该代码吗？

**升级版：**

```
function GetOddNumbersAmount(const x: array of integer; count,i:integer):integer;
begin
   if((x[i] <> 0) and (x[i] mod 2<>0)) then
     count:= count + 1;

   if(i = 10) then
     GetOddNumbersAmount:=count
   else
     GetOddNumbersAmount:=GetOddNumbersAmount(x, count, i+1);
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T20:41:28.843

您不提供递归的结束，即您总是`GetOddNumbersAmount`再次调用您的函数，并且您的程序永远不会终止。因此，您会收到数组索引错误（或堆栈溢出）并且您的程序崩溃。

请注意，每个递归都需要一个终止的情况，即不*调用*自身。在您的情况下，如果数组中没有元素，它应该返回。

此外，您计算的是偶数，而不是奇数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-23T18:23:11.643

您将静态数组传递给动态数组，因此索引会混淆：使用 SetLength(X,10) 分配数组会分配一个由 10 个整数组成的数组，索引为 0 到 9。

动态数组总是整数索引，总是从 0 开始！

```
 SetLength(X,10)
  for it:=0 to 9 do begin
    X[it]:= random(100); 
```

其次，如果您知道循环的长度有更多优势：

```
function GetEvenNumbersAmount(const x: array of integer; count,i:integer):integer;
begin
  for i:= 0 to length(X)-1 do 
    if((x[i] <> 0) and (x[i] mod 2=0)) then begin
    inc(count);
   //write(inttostr(X[i-1])+ ' ')  :debug
   end;
 result:=count; 
```

结尾;

# assert - 合金断言检查

> ID：15327246
> 
> 赞同：1
> 
> 时间：2013-03-10T20:32:45.290
> 
> 标签：assert, alloy

我正在尝试编写一个断言语句，大意是一旦为任何学生输入了一个分数，那么该学生总是对该课程有一个分数（尽管分数可能会改变）。我已经知道如何检查学生是否有分数，但是如果学生没有任何分数，我不知道该怎么做。另外，我怎样才能为这个断言语句写一个检查语句？

```
sig Student, Tutor, Mark {} 

sig Course { 
  reg : set Student, 
  alloc : Student -> Tutor, 
  result : Student -> Mark 
} 
```

**这是我试过的**

```
assert chekmark
  {all c:Course | let c' = CO/next[c] |
     some Student.(c.Result) => some Student.(c.Result)}

check checkmark for 3 
```

但不知何故，它说：这个表达式没有经过类型检查。我是对还是错，如果我是对的，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:29:27.050

问题是 Courses 的排序并不能解决您的问题。使用 ordering 模块只需对所有课程进行总排序（因此 CO/next[c] 只返回紧跟在 c 之后的课程），而您可能希望为每个 (Course, Student) 对设置一系列标记.

也许是这样的

```
sig Student, Tutor, Mark {}

sig Course {
  reg : set Student,
  alloc : Student -> Tutor,
  result : set Grade
}

sig Grade {
  student: one Student,
  marks: seq Mark
} 
```

使用 Alloy 序列会自动为您提供所需的属性，也就是说，如果该`marks`字段是非空的，那么它将包含一系列标记，因此中间不可能出现空值。

使用此模型，您可能希望添加一个事实，即每门课程每个学生最多执行一个等级。

```
fact oneGradePerStudentPerCourse {
  all c: Course {
    all s: c.reg |   
      lone {g: c.result | g.student = s}
  }
} 
```

# php - 无法从 codeigniter 发送电子邮件

> ID：15327248
> 
> 赞同：0
> 
> 时间：2013-03-10T20:32:49.300
> 
> 标签：php, codeigniter, email

我的申请在线。

我已经编写了以下代码，用于将电子邮件发送到指定的电子邮件地址。

我收到 Flash 消息“电子邮件发送成功”，但我无法接收电子邮件。可能是什么原因。请帮我！

控制器.php：

```
 if ($this->form_validation->run() === TRUE)
      {   $this->load->library('email');
          $name=$this->input->post('fullname');
          $sendersemail=$this->input->post('email');
          $fromcountry=$this->input->post('countryname');
          $message=$this->input->post('contactdetails'); 
          $this->email->from($sendersemail, $name.'From'.$fromcountry);
          $this->email->to('a@gmail.com'); 
          $this->email->cc('b@yahoo.com'); 
          $this->email->bcc('c@gmail.com');  
          $this->email->subject('New Customer Contact from thmywebsite.com');
          $this->email->message($message);  
          $this->email->send(); 
          $this->session->set_flashdata('msg', 'Thankyou for contacting us .We will shortly  reply back on this ('.$this->input->post('email').') email ');
           redirect(current_url());
      } 
```

**更新：**保留调试器后：我得到这样的输出

```
 Your message has been successfully sent using the following protocol: mail
    From: 
    Return-Path: 
    Cc: thbestbookfinder@yahoo.com
    Bcc: thebestbookfinder@gmail.com
    Reply-To: "lovesangprince@yahoo.com" 
    X-Sender: lovesangprince@yahoo.com
    X-Mailer: CodeIgniter
    X-Priority: 3 (Normal)
    Message-ID: <513e08c9def93@yahoo.com>
    Mime-Version: 1.0
    Content-Type: multipart/alternative; boundary="B_ALT_513e08c9defa1"

    =?utf-8?Q?New_Customer_Contact_from_thebestbookfinder.com?=
    This is a multi-part message in MIME format.
    Your email application may not support this format.

    --B_ALT_513e08c9defa1
    Content-Type: text/plain; charset=utf-8
    Content-Transfer-Encoding: 8bit

    asd fsfsfs d hjfsdjf dsakasd fsfsfs d hjfsdjf dsakasd fsfsfs d hjfsdjf
    dsakasd fsfsfs d hjfsdjf dsakasd fsfsfs d hjfsdjf dsakasd fsfsfs d hjfsdjf
    dsakasd fsfsfs d hjfsdjf dsakasd fsfsfs d hjfsdjf dsakasd fsfsfs d hjfsdjf
    dsakasd fsfsfs d hjfsdjf dsakasd fsfsfs d hjfsdjf dsakasd fsfsfs d hjfsdjf
    dsakasd fsfsfs d hjfsdjf dsakasd fsfsfs d hjfsdjf dsak

    --B_ALT_513e08c9defa1
    Content-Type: text/html; charset=utf-8
    Content-Transfer-Encoding: quoted-printable

    asd fsfsfs d hjfsdjf dsakasd fsfsfs d hjfsdjf dsakasd fsfsfs d hjfsdjf dsak=
    asd fsfsfs d hjfsdjf dsakasd fsfsfs d hjfsdjf dsakasd fsfsfs d hjfsdjf dsak=
    asd fsfsfs d hjfsdjf dsakasd fsfsfs d hjfsdjf dsakasd fsfsfs d hjfsdjf dsak=
    asd fsfsfs d hjfsdjf dsakasd fsfsfs d hjfsdjf dsakasd fsfsfs d hjfsdjf dsak=
    asd fsfsfs d hjfsdjf dsakasd fsfsfs d hjfsdjf dsak

    --B_ALT_513e08c9defa1-- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T04:13:20.090

尝试将此代码放在 $this->send->email 下面

```
echo $this->email->print_debugger(); 
```

如果电子邮件发送到那里，请检查您的垃圾邮件

# neo4j - 密码查询以根据关系类型排除结果

> ID：15327251
> 
> 赞同：0
> 
> 时间：2013-03-10T20:33:10.793
> 
> 标签：neo4j, cypher

我是 Cypher 的新手，正在尝试弄清楚在某些情况下如何从查询中排除节点。

该图由朋友 ( me-[friend]-person ) 和朋友的朋友关系 ( me-[fof]-person ) 组成

我需要找到所有朋友的朋友关系（很容易），但排除那些也是“朋友”的朋友的朋友

我以为我可以这样做：

```
START me=node(0)           
MATCH me-[r:fof]->fof, me-[f?:friend]->fof           
WHERE f is null and NOT(r is null)
and ... [other filters] 
```

但这似乎是获取不是朋友的朋友的错误方法。

建议？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-10T21:38:13.957

您可以根据子句中的现有关系进行过滤`WHERE`，当然您可以`NOT`用来否定任何条件：

```
START me=node(0)           
MATCH me-[r:fof]->fof
WHERE NOT(me-[:friend]->fof)
and ... [other filters] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T04:00:09.167

为什么要使用两种关系类型：friend 和 fof？您可以使用一个关系（即朋友）对整个朋友图进行建模，然后按 MATCH (me)-[:friend*2..]->(friend) 之类的深度过滤，这是任何深度的朋友的朋友或 MATCH (me)- [:friend*2..2]->(friend) 仅适用于朋友的朋友

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T08:15:33.937

这只是一个信息答案，因为@ean5533 已经提供了答案。

如果速度真的很重要，你可以尝试`fof2`为所有情况创建一个新的关系类型，在这种情况下你真的是朋友的朋友，但不是直接的朋友：

```
start n=node(*) 
match n-[:fof]-friend
where not(n-[:friend]-friend)
create unique n-[:fof2]-friend; 
```

比查询朋友的真正陌生朋友更快：

```
start n=node(0)
match p=n-[:fof2]-friend
return p; 
```

# android - 如何确保使用 saveEventually() 保存 ParseObject 和 ParseRelation

> ID：15327255
> 
> 赞同：2
> 
> 时间：2013-03-10T20:33:42.807
> 
> 标签：android, parse-platform

我最近开始为 Android 应用程序使用 Parse 库。我想使用 saveEventually 存储用户联系人，然后使用 ParseRelation 将其与用户相关联。由于有多个联系人映射到用户，我使用下面的代码来处理我的保存功能。

```
ParseRelation relation = ParseUser.getCurrentUser().getRelation(relationshipName);

for(int entityIndex = 0; entityIndex < entities.length;entityIndex++) { 
... 
  entity[entityIndex].saveEventually(); relation.add(entity[entityIndex]); 
...    
}

ParseUser.getCurrentUser().saveEventually(); 
```

在这里，我对每个有效实体（ParseObject）使用 saveEventually()，然后将其添加到关系中。稍后，一旦将所有对象添加到 ParseRelation，最后我会为 ParseUser 调用 saveEventually() 来存储与 Parse 的所有关系。

这种方法对吗？我在 relationship.add(entity[entityIndex]);

**关系中的所有对象都必须具有对象 ID。**

这似乎表明存在一些网络连接问题，并且 ParseRelation 没有为每个 ParseObject 获取唯一的 objectId，但我假设这个 saveEventuall() 将使用 ParseRelation 很好地处理这种情况

请建议。我正在使用 Parse 库版本 1.1.11

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T01:04:12.237

*必须*首先保存添加到 ParseRelation 的任何对象。saveEventually 调用是非阻塞的，因此当对象被添加到 ParseRelation 时，当执行到达下一行时，该对象不太可能已经保存。

由于您需要确保首先保存对象，因此您应该使用 saveInBackground 而不是 saveEventually。然后确保从 saveInBackground 的 SaveCallback 中将保存的对象添加到关系中。这将确保对象在添加到关系之前已保存。

# graphics - 将一组额外的 UV 坐标解包/打包到 32 位 RGBA 字段中

> ID：15327257
> 
> 赞同：1
> 
> 时间：2013-03-10T20:34:06.303
> 
> 标签：graphics, shader, blender, hlsl, directx-9

我正在修改一款名为 Mount&Blade 的游戏，目前正在尝试通过自定义着色器实现光照贴图。

由于游戏中的格式不允许每个模型超过一个 UV 贴图，并且我需要在某处携带第二个非重叠参数化的信息，因此我的字段为四个`uints`（RGBA，用于每个顶点着色）唯一的可能。

起初考虑只是使用`U,V=R,G`，但精度不够好。现在我正在尝试以可用的最大精度对它们进行编码，每个坐标使用两个字段（16 位）。我的 Python 导出器的片段：

```
def decompose(a):
  a=int(a*0xffff)     #fill the entire range to get the maximum precision
  aa  =(a&0xff00)>>8  #decompose the first half and save it as an 8bit uint
  ab  =(a&0x00ff)     #decompose the second half
  return aa,ab

def compose(na,nb):
    return (na<<8|nb)/0xffff 
```

我想知道如何在 HLSL（DX9，着色器模型 2.0）中执行第二部分（组合或解包）。这是我的尝试，关闭，但不起作用：

```
 //compose UV from n=(na<<8|nb)/0xffff
  float2 thingie = float2(
      float( ((In.Color.r*255.f)*256.f)+
               (In.Color.g*255.f)        )/65535.f,
      float( ((In.Color.b*255.f)*256.f)+
               (In.Color.w*255.f)        )/65535.f
  );
  //sample the lightmap at that position
  Output.RGBColor = tex2D(MeshTextureSamplerHQ, thingie); 
```

欢迎任何建议或巧妙的替代方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T10:58:36.303

请记住在分解 a 之后对 aa 和 ab 进行归一化。像这样的东西：

```
(u1, u2) = decompose(u)
(v1, v2) = decompose(v)
color.r = float(u1) / 255.f
color.g = float(u2) / 255.f
color.b = float(v1) / 255.f
color.a = float(v2) / 255.f 
```

像素着色器：

```
float2 texc;
texc.x = (In.Color.r * 256.f + In.Color.g) / 257.f;
texc.y = (In.Color.b * 256.f + In.Color.a) / 257.f; 
```

# matlab - 将矩阵传递给函数句柄（MATLAB）

> ID：15327259
> 
> 赞同：1
> 
> 时间：2013-03-10T20:34:08.580
> 
> 标签：matlab

如果我有一组函数

`f = @(x1,x2) ([x1 + x2; x1^2 + x2^2])`

我有第二个矩阵

`b = [x1,x2]`

我如何评价`f([b])`？我知道的唯一方法是说`f(b(1),b(2))`，但我不知道如何自动化，因为变量的数量可能高达 n。我还想知道是否有比单独使用并插入它们更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T20:59:52.263

您可以重写函数以将向量作为输入。

```
f = @(b)[b(1) + b(2); b(1)^2 + b(2)^2] 
```

然后，例如，`b=[2 3]`呼叫`f(b)`给出`[2+3; 2^2+3^2]=[5; 13]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T21:09:27.970

convertToAcceptArray.m：

```
function f = convertToAcceptArray(old_f)
    function r = new_f(X)
        X = num2cell(X);
        r = old_f(X{:});
    end
    f = @new_f
end 
```

用法.m：

```
f = @(x1,x2) ([x1 + x2; x1^2 + x2^2])
f2 = convertToAcceptArray(f);
f2([1 5]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T21:54:10.160

假设这`b`是一个 N×2 矩阵，您可以`f`为每对值调用`b`如下：

```
cell2mat(arrayfun(f, b(:, 1), b(:, 2), 'UniformOutput', 0)')' 
```

结果也将是一个 N×2 矩阵。

或者，如果您被允许修改`f`，您可以重新定义它以接受一个向量作为输入，这样您就可以通过简单地调用来获得整个结果`f(b)`：

```
f = @(x)[sum(x, 2), sum(x .^ 2, 2)] 
```

# javascript - 如何通过ajax检索数据？

> ID：15327262
> 
> 赞同：1
> 
> 时间：2013-03-10T20:34:51.233
> 
> 标签：javascript, jquery, ajax

我希望用户输入一个国家，然后它将输出其人口。我的 javascript 假设在单击按钮时查找用户输入的国家/地区，然后通过 PHP 文件获取该国家/地区的人口。

我的 HTML 是：

```
 <label>
    Country:
      <input name="country" type="text" id="country"></label>
      <input type="button" value="Find population" id="findPop">
  <p id="output"></p 
```

和 javascript：

```
var countryFound = function(data) {
    var theCountry = $("#country").val();
    var population = data["country"];
    if (data["country"])
    {
        $("#output").html(theCountry + " population is " + population);
    }
    else {
        $("#output").html(theCountry + " is not found");
    }
};

$("#findPop").click(function(){
    var theCountry = $("#country").val();
    $("#output").html("Loading...");
    $.getJSON("countrylookup.php", "country="+theCountry , countryFound);  
}); 
```

我的 PHP 代码是：

```
if (isset($_GET['country'])) { // get the parameters country
    $column = 'country';
    $value = $_GET['country'];
else {
    print -1; // an error code
    return; 
}

$data = array( 'country'=>'Peru', 'capital'=>'Lima', 'area'=>'1285220', 'population'=>'29907003', 'continent'=>'South America' ),
array( 'country'=>'Philippines', 'capital'=>'Manila', 'area'=>'300000', 'population'=>'99900177', 'continent'=>'Asia' );
function findData ( $whichColumn, $data, $searchValue)
{
    $result = array();
    foreach ($data as $row) {
        if ($row[$whichColumn] == $searchValue)
            $result[] = $row;
    }
    return $result;
}

print json_encode ( findData($column, $data, $value) ); 
```

但由于某种原因，当我输入秘鲁作为国家时，它说`Peru is not found`。我没有从 php 中检索正确的数据还是什么？我很确定我的 php 代码是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:14:16.193

这是我的做法：

```
$(function() {
  $("#findPop").on('click', function(){
    var theCountry = $("#country").val();
    $("#output").html("Loading...");
    $.getJSON("countrylookup.php", {country: theCountry}, function(data) {
       var population = data[0] != "false" ? data.population : false,
           msg = population ? (" population is " + population) : " is not found";
       $("#output").html(theCountry + msg);
    });
  });
}); 
```

PHP

```
$value = isset($_GET['country']) ? strtolower(trim($_GET['country'])) : false;
$result = false;

if ($value) {
    $data = array(
          'peru' => array(
                          'capital'=>'Lima',
                          'area'=>'1285220',
                          'population'=>'29907003',
                          'continent'=>
                          'South America'
                    ),
    'philippines' => array(
                          'capital'=>'Manila',
                          'area'=>'300000',
                          'population'=>'99900177',
                          'continent'=>'Asia'
                    )
    );
    if (array_key_exists($value, $data)) $result = $data[$value];
}
echo json_encode($result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T20:35:57.167

对于 jQuery 方面，我建议使用[.get() 函数](http://api.jquery.com/jQuery.get/)。

```
$("#findPop").click(function(){
    var theCountry = $("#country").val();
    $("#output").html("Loading...");
    $.get("countrylookup.php", function(data) {
        if(data) {
            // Do whatever you want to do with the data, e.g.:
            var population = data.population,
                theCountry = $("#country").val();

            // Do more magic
            $("#output").html(theCountry = " population is " + population)
        } else {
            // Error handling
        }
    });  
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T21:34:40.823

在 PHP 代码的第四行中，else 之前缺少一个 }。

# c++ - 结构在单独的头文件中导致 C++ 中的问题

> ID：15327266
> 
> 赞同：4
> 
> 时间：2013-03-10T20:35:36.153
> 
> 标签：c++, struct, enums, function-declaration

我有一个`struct Tree`在里面定义的`Class Parser`。我有其中定义的方法`Parser`作为`Tree`输入。

```
void Parser::InputTree(const Tree& input) {
//uses data from Tree
} 
```

一切似乎都运行良好。但是后来我需要`Tree`在课外使用。所以我决定`struct Tree`在一个单独的标题中定义。我在头文件中包含了这个头文件`Parser`。虽然我在 Parser 的头文件中没有看到任何错误，但源文件在我的 Eclipse 上显示错误。说找不到指向方法的成员声明`InputTree`。

我的问题是，首先这是在单独的标头中定义结构的正确策略吗？第二，我做错了什么？第三，我还有一些`enum`我想跨类使用的类型。我在哪里定义它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T21:10:09.713

我通常遵循的一个简单的经验法则是，如果自定义数据类型（即结构、枚举等）仅在类中使用，我最终会在类的定义中定义此数据类型。

但是，如果需要在 2 个或多个类中使用相同的类型（没有任何父子关系），我最终会在另一个头文件中定义类型，通常在命名空间中（当类型或以某种方式相关时） .

是的，如果您觉得需要区分它们，您可以在多个头文件中使用多个这样的命名空间（对相关类型进行分组），但我只是展示了一个使用单个命名空间的更简单示例：

> /* MyNamespace.h */

```
#ifndef MY_NAMESPACE_H
#define MY_NAMESPACE_H

namespace MyNamespace {
    struct Tree {
        int a;
        char b;
    };

    enum SomeEnum {
        VALUE_0 = 0,
        VALUE_1 = 1,
        VALUE_2 = 2
    };
}

#endif 
```

> /* 解析器.h */

```
#ifndef PARSER_H
#define PARSER_H

#include "MyNamespace.h"

class Parser
{
public:
    void InputTree(const MyNamespace::Tree& input);
};

#endif 
```

> /* 解析器.cpp */

```
#include "Parser.h"

void Parser::InputTree(const MyNamespace::Tree& input)
{

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T20:40:51.387

正确的结构：

> 解析器.h

```
#ifndef _PARSER_H_
#define _PARSER_H_
#include "tree.h"
class Parser {
   void InputTree(const Tree& input);
};

#endif /*_PARSER_H_*/ 
```

* * *

> 解析器.cpp

```
#include "parser.h"
void Parser::InputTree(const Tree& input){
 // use data from Tree
} 
```

* * *

> 树.h

```
#ifndef _TREE_H_
#define _TREE_H_

struct Tree {
   //nodes
};
#endif /*_TREE_H_*/ 
```

包括`parser.h`包含`tree.h`，因此`struct Tree`在主编译单元中可用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-10T20:43:33.770

是的，在单独的头文件中定义结构是正确的策略。

如果没有更多输入，很难说你做错了什么——但它可能与包含、包含保护或命名空间不匹配有关。

最后，您应该在另一个头文件中声明枚举，并使用适当的包含保护。

# django - 在共享托管环境中为 Django 1.5 提供静态管理文件

> ID：15327267
> 
> 赞同：4
> 
> 时间：2013-03-10T20:35:38.087
> 
> 标签：django, shared-hosting, django-staticfiles

我正在尝试在 Apache-Server 上运行全新的 Django 1.5 安装。WebServer 位于一个名为 uberspace.de 的共享托管平台上，这意味着我无法访问 Apache 配置本身，但是如果有任何帮助，我可以编写 .htaccess 文件。Django 是通过 fast-cgi 部署的，它按预期工作。

但是，无法访问服务器上的静态文件，例如 .css 文件和 Django 管理界面的图形。如[官方文档](https://docs.djangoproject.com/en/1.5/howto/static-files/)中所述，我使用以下命令将静态文件复制到我的 ~/html/static 目录中。

> manage.py 收集静态

这些是我的 settings.py 中的值：

```
STATIC_ROOT = '/home/bier/html/static/'
STATIC_URL = '/static/' 
```

当我尝试访问这些文件中的任何一个时，我得到的只是臭名昭著的 django 404 页面。我还严格按照我的 Webhosters 网站上的[“如何安装和部署 Django”指南进行操作。](https://uberspace.de/dokuwiki/cool%3adjango)（抱歉，我相信它只有德语版本）我已经联系了网络托管服务商支持，但他们不知道出了什么问题。

到目前为止，我提出的所有解决方案都建议在 Apache 配置中设置某种别名。这是我做不到的。

我很感谢你可能有的任何想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T20:42:29.717

请尝试使用完整地址。

```
STATIC_ROOT = '/home/bier/html/static/'
STATIC_URL = 'http://www.mysite.com/static/' 
```

编辑：也许您可以要求您的主机在您的 Apache 配置中设置 /static/ ：

`sudo nano /etc/apache2/sites-enabled/mysite.com`并添加：

```
Alias /static/ /home/bier/html/static/ 
```

由于高度限制的主机（权限），我不得不手动上传 /static/ 文件之前，我遇到过这种情况。也许您需要将 django 的副本下载到您的桌面，然后手动将静态管理文件集上传到您的 /static/ 目录中？

最后，您是否将静态文件添加到您的网址中？

```
url(r'^static/(?P<path>.*)$','django.views.static.serve',{'document_root': '/home/bier/html/static'}), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-03T07:07:45.613

我有更简单的解决方案。您需要在“public_html”或服务器默认提供文件的类似位置创建一个名为“x”的目录。

然后上传目录 x 中的所有静态文件。（这可以通过在本地运行 collectstatic 然后将目录 STATIC_ROOT 的所有内容上传到 x 来完成）

然后，如下更改您的 STATIC_URL 和 STATIC_ROOT：

```
STATIC_URL = '/x/'
STATIC_ROOT = os.path.join(BASE_DIR, '../public_html/x') # Path to folder 
```

# c# - 列表 ? 作为方法参数

> ID：15327268
> 
> 赞同：1
> 
> 时间：2013-03-10T20:35:43.570
> 
> 标签：c#, .net, list, nullable

错误消息不能有不可为空的参数

我怎样才能通过列表？到一个方法？

```
public int RegexAutoCode(int sID, List<Int16>? valueIDs, string text, SqlCommand cmd) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T20:36:48.320

无论元素类型如何，都没有`List<>?`-`List`是引用类型，因此已经可以为空：

```
// This is absolutely fine
List<Int16> list = null; 
```

如果你想要一个可以`List`为空的`Int16`值（所以每个*元素*都可以是 null 或 an `Int16`），那么你需要一个像这样的参数：

```
List<Int16?> valueIDs 
```

为了[`Nullable<T>`](http://msdn.microsoft.com/en-gb/library/b3h38hb0.aspx)有效，`T`必须是不可为空的值类型。这就是`T : struct`约束所表明的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T20:36:43.913

采用`List<Int16?>`

你`?`在不正确的地方。

# android - 更新 Android 应用程序时，APK 是否需要与原始应用程序命名相同？

> ID：15327269
> 
> 赞同：4
> 
> 时间：2013-03-10T20:35:43.900
> 
> 标签：android, apk, google-play

我正在更新我的应用程序，我只是想知道该 apk 是否需要与我上传的原始应用程序命名相同。我很确定答案是“否”，但只是想检查一下，因为我在任何地方都找不到明确的答案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T20:45:13.763

唯一*必须*与原始应用程序匹配的是包名称和签名密钥库。除此之外，您可以更改任何您想要的内容，包括 apk 文件的名称（Google Play 无论如何都会在其服务器上重命名它）。

您还需要增加版本代码（版本名称可能保持不变）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T20:38:57.007

据我所知，清单中的密钥和包名称对于每个更新都应该相同，apk 名称应该无关紧要。

# php - 使用正则表达式匹配

> ID：15327270
> 
> 赞同：0
> 
> 时间：2013-03-10T20:35:53.463
> 
> 标签：php, regex

我还在学习 PHP 正则表达式。我需要从下面提供的字符串中立即返回匹配项的帮助。我需要一个日期（括号之间）和状态（已注册/可访问）：

```
[Feb 28 13:22:37] VERBOSE[1111] chan_sip.c:     -- Registered SIP \'1001\' at 127.0.0.1:8080
[Feb 28 13:22:37] NOTICE[1111] chan_sip.c: Peer '1001' is now Reachable. (471ms / 2000ms) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T20:46:00.290

你可以使用这个：

```
/^\[([^\]]+)\].*(Registered|Reachable)/ 
```

第 1 组和第 3 组有您的日期和状态。

# iphone - cocos2d版本升级后精灵闪烁神器

> ID：15327277
> 
> 赞同：4
> 
> 时间：2013-03-10T20:36:38.303
> 
> 标签：iphone, cocos2d-iphone, kobold2d, ccparticlesystem

我使用 Kobold2D，并且刚刚从 2.0.3 版本升级到 2.1.0 版本（这意味着我已经从 cocos2d-iphone v2.0 升级到 cocos2d-iphone v2.1）。

在升级之前，我的项目在我的 iPhone 5 上运行并且看起来很棒。

升级后，当我在 iPhone 上运行项目时，出现了这些神秘的、闪烁的、闪烁的、棱角分明的伪影。它们非常普遍，但有趣的是，当我在模拟器中运行项目时，没有出现这样的工件。

似乎与工件和我对 cocos CCParticleSystem 动画对象的使用有关。换句话说，伪影似乎在粒子动画的持续时间内存在，并且似乎在粒子动画的“寿命”完成后消失。

这是一个屏幕截图。在这种情况下，伪影显示为蓝色的“楔形”，但它们会四处移动，有时会呈现其他颜色和形状。

有人知道我能做些什么来消除这些烦人的伪影吗？

![截屏](../Images/9d3d16259b175361fef54257c627b2d8.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T12:58:10.320

是一个已知的错误： [http ://www.cocos2d-iphone.org/forum/topic/208630?replies=6#post-376569](http://www.cocos2d-iphone.org/forum/topic/208630?replies=6#post-376569)

修复（或修补 :)，修改 CCParticleSystemQuad.m。在 postSetp 方法中注释选项 1 并取消注释选项 3。

这对我和 DropDKeith 有用（用户论坛 cocos2d）

```
-(void) postStep
{
    glBindBuffer(GL_ARRAY_BUFFER, _buffersVBO[0] );

    // Option 1: Sub Data
//  glBufferSubData(GL_ARRAY_BUFFER, 0, sizeof(_quads[0])*_particleCount, _quads);

    // Option 2: Data
//  glBufferData(GL_ARRAY_BUFFER, sizeof(_quads[0]) * _particleCount, _quads, GL_DYNAMIC_DRAW);

    // Option 3: Orphaning + glMapBuffer
    glBufferData(GL_ARRAY_BUFFER, sizeof(_quads[0])*_totalParticles, nil, GL_STREAM_DRAW);
    void *buf = glMapBuffer(GL_ARRAY_BUFFER, GL_WRITE_ONLY);
    memcpy(buf, _quads, sizeof(_quads[0])*_particleCount);
    glUnmapBuffer(GL_ARRAY_BUFFER);

    glBindBuffer(GL_ARRAY_BUFFER, 0);

    CHECK_GL_ERROR_DEBUG();
} 
```

# cocos2d-iphone - Box2D 和 Cocos2d-x 寻找身体的未来位置

> ID：15327279
> 
> 赞同：2
> 
> 时间：2013-03-10T20:36:41.563
> 
> 标签：cocos2d-iphone, box2d, sprite

我正在制作手机游戏，无法预测身体/精灵对的未来位置。我用来执行此操作的方法如下。

1 --futureX 作为 cocos2d 精灵的位置传入，使用 CCSprite.getPosition().x 找到

2 -- 我使用 b2Body 值来表示加速度和速度，所以我必须通过将 futureX 坐标除以 PTM_RATIO（在别处定义）来校正它

3 -- 该函数求解b2Body 到达futureX 位置所需的时间（基于其x 方向加速度和速度），然后使用该时间确定body 的futureY 位置应该在哪里。我最后乘以 PTM_RATIO 因为坐标是用来创建另一个精灵的。

4 - 在求解时间时，我有两种情况：一种是 x 加速度！= 0，另一种是 x 加速度 == 0。

5 -- 我正在使用二次公式和运动学方程来求解我的方程。

不幸的是，我正在创建的精灵不是我期望的。它最终位于正确的 x 位置，但是，Y 位置总是太大。知道为什么会这样吗？请让我知道这里还有哪些有用的信息，或者是否有更简单的方法来解决这个问题！

```
float Sprite::getFutureY(float futureX)
{
    b2Vec2 vel = this->p_body->GetLinearVelocity();
    b2Vec2 accel = p_world->GetGravity();

    //we need to solve a quadratic equation:
    // --> 0 = 1/2(accel.x)*(time^2) + vel.x(time) - deltaX

    float a = accel.x/2;
    float b = vel.x;
    float c = this->p_body->GetPosition().x - futureX/PTM_RATIO;

    float t1;
    float t2;

    //if Acceleration.x is not 0, solve quadratically
    if(a != 0 ){
        t1 = (-b + sqrt( b * b - 4 * a * c )) / (2 * a);
        t2 = (-b - sqrt( b * b - 4 * a * c )) / (2 * a);
    //otherwise, solve linearly
    }else{
        t2 = -1;
        t1 = (c/b)*(-1);
    }

    //now that we know how long it takes to get to posX, we can tell the y location on the sprites path    
    float time;
    if(t1 >= 0){
        time = t1;
    }else{
        time = t2;
    }
    float posY = this->p_body->GetPosition().y;
    float futureY = (posY + (vel.y)*time + (1/2)*accel.y*(time*time))*PTM_RATIO;

    return futureY;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T01:09:23.230

解决了：

问题出在这一行：

```
float futureY = (posY + (vel.y)*time + (1/2)*accel.y*(time*time))*PTM_RATIO; 
```

我需要明确地将 (1/2) 转换为浮点数。我用这个修复了它：

```
float futureY = (posY + (vel.y)*time + (float).5*accel.y*(time*time))*PTM_RATIO; 
```

请注意，否则，加速度项被评估为零。

# java - Java：何时不使用`private`

> ID：15327280
> 
> 赞同：4
> 
> 时间：2013-03-10T20:36:43.760
> 
> 标签：java, oop, encapsulation

既然在一个类中拥有公共变量被认为是不好的 OO 实践（而是使用 getter 和 setter），那么为什么不在`private`所有**变量**上使用呢？`public`如果这是不好的做法，为什么 Java 甚至允许使用？

（这显然不适用于函数）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-10T20:37:58.407

例如，`public static final`变量是一个很好的理由。像一个常数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-10T20:41:55.143

拥有`public`or`private`字段是一个设计决策。该语言本身应该*使*程序员能够做出自己的设计决策，而不是*强制执行*开发人员或团队可能不一定想要实现的设计。

语言越灵活，它就越强大。由项目经理、团队或个人开发人员确定访问字段的最合适方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-10T20:41:36.270

变量字段的访问控制不是唯一的问题。

考虑*简单*。Java 对所有类型的访问控制都有一个默认值。这比为不同类型设置不同的访问规则更容易学习。

考虑新用户的*可用性*。如果默认情况下所有内容都是私有的，那么新用户可能会对为什么无法访问某些内容感到困惑。

最后，请注意“getter 和 setter”并不总是公共字段的适当替代方案。有些字段不应该被修改，甚至不应该在类外访问。

**[编辑]**选择背后还有一个*历史*原因。Java 的最早版本（当时称为“Oak” **）没有私有访问权限**。默认和最受限制的访问是包保护的。（参考：this [2002 Java newsletter](http://www.javaspecialists.eu/archive/Issue055.html)，引用[Oak 0.2 手册](http://www.javaspecialists.eu/archive/files/OakSpec0.2.ps)。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T20:47:39.480

这是关于您要在何处*发布*该字段。

对于`public`字段，您可以安全地为`final`字段执行此操作，例如常量：

```
public static final ... 
```

和`final`领域：

```
public final ... 
```

就像`length`java数组中的字段一样。尽管约定是提供访问器方法（getter）而不是公开字段。

`protected`当您要将字段发布到子类时，请使用字段。

当您想将字段发布到同一包中的其他类时，请使用默认可见性（即未指定）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-10T20:50:17.913

我认为有这种可能性（不包括`static final`常量）很好，因为您可以使用它来快速解决一些问题（而不是定义 getter 和 setter），您只需要在这里小心打破封装规则即可。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-10T20:42:06.190

这是管理复杂性的问题。

可以`public`从类外部访问成员，出于实际考虑，这意味着“可能在任何地方”。如果某个`public`字段出现问题，罪魁祸首可能在任何地方，因此为了追踪错误，您可能需要查看大量代码。

一个`private`成员只能从同一个类内部访问，所以如果出现问题，通常只有一个源文件可供查看。如果您的项目中有 100 万行代码，但您的类很小，这可以大大减少您的错误跟踪工作。

另一个优点与[耦合](https://en.wikipedia.org/wiki/Coupling_%28computer_programming%29)的概念有关。有些答案忘了提到这一点。

我会说`private`默认设置所有内容，然后只公开那些绝对必须的部分`public`（或者只使用 getter 和 setter）。你能做`private`的越多越好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-10T20:43:45.947

我想很大一部分原因是“C++ 就是这样做的”。不同的语言在这个问题上存在分歧，所以这显然不是唯一明智的选择。例如，Python 将所有内容都公开并信任您遵循库的文档，而 Ruby 只有私有字段。

# c# - 设置我的 DataGrid 的分组后没有显示任何数据行

> ID：15327282
> 
> 赞同：1
> 
> 时间：2013-03-10T20:36:44.367
> 
> 标签：c#, wpf, xaml, datagrid

我正在创建一个程序，它将显示由某个资源制作的应用程序。我计划在数据网格中显示所有应用程序，并根据分配应用程序的月份和年份进行分组。我收集并尝试了可能的代码，但我只是设法显示了分组标题，但内容没有显示出来。

这是我的代码：

```
<Window.Resources>
    <Style x:Key="GroupHeaderStyle" TargetType="{x:Type GroupItem}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type GroupItem}">
                    <Expander x:Name="EXPAND" IsExpanded="False"
                              Background="White"
                              Foreground="Black">
                    <Expander.Header>
                         <TextBlock Text="{Binding Name}"/>
                         </Expander.Header>
                    </Expander>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
     </Style>
</Window.Resources> 
```

```
 <DataGrid.Columns>
                        <DataGridTextColumn Binding="{Binding Path=AppID}" Header="App ID" Width="Auto" />
                        <DataGridTextColumn Binding="{Binding Path=ApplicationName}" Header="App Name" Width="0.30*" />
                        <DataGridTextColumn Binding="{Binding Path=Status}" Header="Status" Width="0.10*" />
                        <DataGridTextColumn Binding="{Binding Path=Category}" Header="Category" Width="Auto" />
                        <DataGridTextColumn Binding="{Binding Path=PackageType}" Header="Package Type" Width="0.10*" />
                    </DataGrid.Columns>

                    <DataGrid.GroupStyle>
                        <GroupStyle ContainerStyle="{StaticResource GroupHeaderStyle}">
                            <GroupStyle.Panel>
                                <ItemsPanelTemplate>
                                    <DataGridRowsPresenter/>
                                </ItemsPanelTemplate>
                            </GroupStyle.Panel>
                        </GroupStyle>
                    </DataGrid.GroupStyle>

                </DataGrid> 
```

代码背后：

```
private void LoadTracker()
        {
            myMSIPID.procGetMSITrackByPID(dsApp.procGetMSITrackByPID,PID);

            ICollectionView cView = CollectionViewSource.GetDefaultView(dsApp.procGetMSITrackByPID);

            cView.GroupDescriptions.Add(new PropertyGroupDescription("MonthYear"));

            dgAppTracker.DataContext = dsApp.procGetMSITrackByPID;
            dgAppTracker.ItemsSource = cView;

        } 
```

谁能告诉我为什么我的程序中没有任何行？谢谢你。

# wordpress - 如何获取指定类别名称中的所有子类别名称？

> ID：15327285
> 
> 赞同：1
> 
> 时间：2013-03-10T20:36:50.683
> 
> 标签：wordpress

现在，假设指定的类别名称是“产品”。其中有三层子类。结构如下：

```
product one
  - product two
   - - product three
    - - - product four 
```

现在我想在我的主题的 sidebar.php 中输出所有子类别名称。我该怎么办？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T22:30:08.857

[codex 上的](http://codex.wordpress.org/Function_Reference/get_categories)此页面解释了如何使用“child_of”参数中的父类别 ID 执行此操作。应该是你想要的。

# .htaccess - Mod重写删除尾部斜杠但保留目录

> ID：15327288
> 
> 赞同：0
> 
> 时间：2013-03-10T20:37:00.000
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

到目前为止我`.htaccess`是这样的：

```
 RewriteEngine On
  RewriteBase /
  RewriteCond %{HTTP_HOST} !^www\..+$ [NC] 
  RewriteRule ^ http://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L] 
  <FilesMatch "\.(htm|php|js|css|htc|png|gif|jpe?g|ico|xml|csv|txt|swf|flv|eot|woff|svg|ttf|pdf|gz)$">
    RewriteEngine Off
  </FilesMatch>
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule .* index.php [L]
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteRule .*\.html$ index.php [L] 
```

我希望将带有斜杠的网址重定向到没有的网址。但是应该保留目录的斜线。

任何帮助将不胜感激！

更新：经过更多的谷歌研究，我为我组装了一些可行的解决方案。删除尾部斜杠的重写和 www 的重定向都有效。

```
 RewriteRule ^(.+)/$ http://%{HTTP_HOST}/$1 [L,R=301]
  RewriteCond %{HTTP_HOST} ^rudolfapotheke.de$ [NC]
  RewriteRule ^(.*) http://www.%{HTTP_HOST}/$1 [L,R=301] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:21:37.090

首先，我会将您更改`FilesMatch`为`RewriteCond`

```
RewriteCond %{REQUEST_FILENAME} !\.(?:htm|php|js|css|htc|png|gif|jpe?g|ico|xml|csv|txt|swf|flv|eot|woff|svg|ttf|pdf|gz)$
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php [L] 
```

并简化下一个模式`RewriteRule`

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule \.html$ index.php [L] 
```

或将两条规则放在一起并测试

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php [L] 
```

最后是删除斜杠的规则

```
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)/$ $1 [R,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T20:52:06.840

要重定向带有斜杠的那些，您需要检查路径是否是带有 a 的目录，然后如果文件名匹配`RewriteCond`则包含 a`RewriteRule``/$`

所以它看起来像这样：

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)/$ $1 [R=permanent,L] 
```

# json - 如何将 Json 对象从视图返回到控制器 MVC4。

> ID：15327290
> 
> 赞同：1
> 
> 时间：2013-03-10T20:37:04.763
> 
> 标签：json

我有这个脚本来提取表单数据并序列化为 Json 对象：

```
form = document.forms[0];
        $.fn.serializeObject = function () {
            var o = {};
            var a = this.serializeArray();
            $.each(a, function () {
                if (o[this.name] !== undefined) {
                    if (!o[this.name].push) {
                        o[this.name] = [o[this.name]];
                    }
                    o[this.name].push(this.value || '');
                } else {
                    o[this.name] = this.value || '';
                }
            });
            return o;
        };

        $(function () {
            form.submit(function () {
                result.append(JSON.stringify(form.serializeObject()));
                return false;
            });
        }); 
```

我想把它放在一个 html 按钮上，然后将对象发送到控制器中。但是如何？该操作将是 JSONResult() 吗？我怎么能做到这一切？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:42:07.260

在按钮上附加 onclick 事件。使用 jquery ajax 调用将 json 发布到控制器中的操作将操作结果作为 json 对象返回。在 jquery ajax 调用过程的成功事件上做任何你想做的事情。

详情咨询谷歌！

# wix - 将文件类型关联到 WiX 中的外部程序

> ID：15327294
> 
> 赞同：2
> 
> 时间：2013-03-10T20:37:16.800
> 
> 标签：wix

有没有办法在我的 WiX 设置中将文件扩展名关联到外部程序？

例如，我的应用程序使用 .xyz 文件，但我使用第三方程序来编辑它们，例如 Notepad++。我会在安装过程中包含 Notepad++ 或引导它的安装程序。有没有办法仅使用 WiX 将 Notepad++ 与我的 .xyz 文件相关联？

我看过`ProgId`元素，但我认为它不能做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T00:10:55.753

不幸的是，强类型元素现在不能用于引用安装之外的可执行文件。但是，您可以自己编写注册表项。就像是：

```
<RegistryValue Root="HKCR" Key=".xyz" Value="xyz-progid" Type="string" />
<RegistryKey Root="HCKR" Key="xyz-progid>
   <RegistryValue Key="shell\Open\command" Value="[NOTEPADPLUSPLUSPATH]" Type="string" />
   <RegistryValue Key="DefaultIcon" Value="[!NOTEPADPLUSPLUSPATH]" Type="string" />
</RegistryKey> 
```

为此，您需要在机器上找到 Notepad++。我不知道该怎么做，但是假设有一个注册表项告诉您：

```
<Property Id="NOTEPADPLUSPLUSPATH">
    <RegistrySearch Id="FindNotepadPlusPlus" Root="HKLM" Key="Software\NotepadPlusPlus"
                    Name="InstallPath" Type="raw" />
</Property> 
```

# android - Android 加速度计问题

> ID：15327295
> 
> 赞同：1
> 
> 时间：2013-03-10T20:37:19.247
> 
> 标签：android, callback, scope, accelerometer

我正在开发一款涉及使用加速度计来控制角色的游戏。我的问题是：我需要在 OnSensorChanged() 内部无法访问的类和方法中使用传感器接收到的值。我相信我需要从 OnSensorChanged 内部实现回调，但我不知道该怎么做。谁能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:57:34.767

我相信这篇文章中的答案（[如何在 Android 中定义回调？](https://stackoverflow.com/questions/3398363/how-to-define-callbacks-in-android)）会帮助你。

总结一下，创建回调接口：

```
// The callback interface
interface MyCallback {
    void callbackCall(SensorEvent event);
} 
```

在应该进行计算的类中实现回调接口：

```
class Callback implements MyCallback {
    void callbackCall(SensorEvent event) {
       // callback code goes here
    }
} 
```

从您拥有 onSensoreChanged() 的 Activity 中拨打电话：

```
// The class that takes the callback
class Worker extends Activity implements SensorEventListener {
    MyCallback callback;

    public void onSensorChanged(SensorEvent event) {

      callback.callbackCall(event);
   }
} 
```

我希望这有帮助。

**更新：**

我假设您已经了解进程和线程（如果不了解，请查看有关[Processes and Threads](http://developer.android.com/guide/components/processes-and-threads.html)的 Android 文档）。

onSensorChanged 方法是一个 I/O，最好在单独的线程（而不是主 UI 线程）中执行 I/O 操作。

调用回调方法后，您可以将事件存储在另一个变量中并在该类中使用这些局部变量。

由于您正在编写游戏，因此您的应用程序不太可能需要每个事件。因此，当应用程序忙于为您的游戏计算数据时，可以删除其他事件。您可以通过设置“忙碌”标志（布尔值）并在此 if 块中包含计算代码来做到这一点。

```
 void callbackCall(SensorEvent event) {
        if (!busy) {
            // Set the busy flag to block other event changes
            busy = true;
            // callback code goes here

            // Once finished, reset the busy flag to allow other events to come in
            busy = false;
        }
    } 
```

# mysql - 有效地将表 2 中的值合并到表 1

> ID：15327296
> 
> 赞同：2
> 
> 时间：2013-03-10T20:37:21.620
> 
> 标签：mysql

查看以下 SQLFiddle 以供参考：[http ://sqlfiddle.com/#!2/f02ca/1](http://sqlfiddle.com/#!2/f02ca/1)

我有两张几乎一模一样的桌子。我想确定表数据之间的差异，用另一个表中的不同数据更新一个表。

```
table1
|| *id* || *some_id* || *timestamp* ||
||    1 ||         A ||       01:00 ||
||    2 ||         B ||       02:00 ||
||    3 ||         B ||       01:00 ||
||    4 ||         A ||       02:00 ||
||    5 ||         A ||       03:00 ||

table2
|| *id* || *some_id* ||
||    1 ||         B ||  <-- some_id is different than table1
||    2 ||         B ||
||    3 ||         B ||
||    4 ||         A ||
||    5 ||         B ||  <-- some_id is different than table1 
```

所以我想用`some_id`table2 中的 new 更新 table1。我可以很容易地找到两个表之间的差异：

```
SELECT t2.id
FROM table2 t2
LEFT JOIN table1 t1 ON t1.id = t2.id
WHERE t2.some_id != t1.some_id 
```

结果：

```
1, 5 (the id's of the table2 rows that have a different some_id). 
```

我想我可以做这种类型的查询：

```
UPDATE table1
SET some_id = 
    (SELECT some_id FROM table2 WHERE id IN 
        (SELECT t2.id 
        FROM table2 t2
        LEFT JOIN table1 t1 ON t1.id = t2.id 
        WHERE t2.some_id != t1.some_id )) 
```

我认为该查询将`table1`使用 new更新`some_id`，`table2`但仅适用`some_ids`于它们之间不同的行。但我收到以下错误：

```
SQL Error (1093): You can't specify target table 'table1' for update in FROM clause 
```

我在正确的轨道上吗？如果是这样，我该如何解决这个问题？有没有更好或更有效的方法来实现这一点？

几点注意事项：

1.  重要的是，我不只是更新或将所有内容插入`table2`到`table1`中，因为该`timestamp`列。当行更新时，该列将自行更新。我想要更新的唯一`table1`行`some_id`是`table2`. 所以本质上，该`timestamp`列用于显示该行上次更改的时间。
2.  重要的是要在尽可能少的查询中完成此操作，并且要高效地完成。在我的简单示例中，每个表只有 5 行，但实际上我的表有数千行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:26:44.837

您可能需要一个带有 JOIN 的 UPDATE：

```
UPDATE     table1 AS t1
INNER JOIN table2 AS t2
ON         t1.id = t2.id
SET        t1.some_id = t2.some_id
WHERE      t1.some_id != t2.some_id
; 
```

联接与您的 SELECT 语句中的基本相同，只是它不需要是外部联接，因为据我了解，您只想更新`id`s 匹配的行。

这是此查询的 SQL Fiddle 演示：[http](http://sqlfiddle.com/#!2/58eb8/1) ://sqlfiddle.com/#!2/58eb8/1 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T20:51:07.897

恐怕没有。在 MySQL 中，不能修改执行 SELECT 的同一个表。

检查这些：[http ://dev.mysql.com/doc/refman/5.6/en/update.html](http://dev.mysql.com/doc/refman/5.6/en/update.html)

> 目前，您无法在子查询中更新表并从同一个表中进行选择。

# php - 用php为blob创建缩略图

> ID：15327297
> 
> 赞同：1
> 
> 时间：2013-03-10T20:37:39.733
> 
> 标签：php, image, blob

将缩略图创建为文件非常容易，但我不知道如何使用 PHP 图像函数来创建图像并将数据存储在一个变量中，我可以用它来将数据存储在数据库表中。

我是图像功能的新手，我不了解它们的工作原理。它们是面向目录的吗？所以我必须为缩略图制作者创建一个类似 tmp 地图的东西，然后只使用 file_get_content 然后删除图像。

或者我可以在这个过程中如何存储图像的数据。我不知道！

如果我需要将缩略图保存为文件，这就是我创建缩略图的方式：

```
//found at stackoverflow
function tumbmaker($updir, $img,$MaxWe=100,$MaxHe=150){
    $arr_image_details = getimagesize($img); 
    $width = $arr_image_details[0];
    $height = $arr_image_details[1];

    $percent = 100;
    if($width > $MaxWe) $percent = floor(($MaxWe * 100) / $width);

    if(floor(($height * $percent)/100)>$MaxHe)  
    $percent = (($MaxHe * 100) / $height);

    if($width > $height) {
        $newWidth=$MaxWe;
        $newHeight=round(($height*$percent)/100);
    }else{
        $newWidth=round(($width*$percent)/100);
        $newHeight=$MaxHe;
    }

    if ($arr_image_details[2] == 1) {
        $imgt = "ImageGIF";
        $imgcreatefrom = "ImageCreateFromGIF";
    }
    if ($arr_image_details[2] == 2) {
        $imgt = "ImageJPEG";
        $imgcreatefrom = "ImageCreateFromJPEG";
    }
    if ($arr_image_details[2] == 3) {
        $imgt = "ImagePNG";
        $imgcreatefrom = "ImageCreateFromPNG";
    }

    if ($imgt) {
        $old_image = $imgcreatefrom($img);
        $new_image = imagecreatetruecolor($newWidth, $newHeight);
        imagecopyresized($new_image, $old_image, 0, 0, 0, 0, $newWidth, $newHeight, $width, $height);

       $imgt($new_image, $updir."_t.jpg");
        return;    
    }
} 
```

我用这段代码做到了：

```
function tumbmaker($img_source,$MaxWe=100,$MaxHe=150){
        $arr_image_details = getimagesize($img_source); 
        $width = $arr_image_details[0];
        $height = $arr_image_details[1];

        $percent = 100;
        if($width > $MaxWe) $percent = floor(($MaxWe * 100) / $width);

        if(floor(($height * $percent)/100)>$MaxHe)  
        $percent = (($MaxHe * 100) / $height);

        if($width > $height) {
            $newWidth=$MaxWe;
            $newHeight=round(($height*$percent)/100);
        }else{
            $newWidth=round(($width*$percent)/100);
            $newHeight=$MaxHe;
        }

        if ($arr_image_details[2] == 1) {
            $imgt = "ImageGIF";
            $imgcreatefrom = "ImageCreateFromGIF";
        }
        if ($arr_image_details[2] == 2) {
            $imgt = "ImageJPEG";
            $imgcreatefrom = "ImageCreateFromJPEG";
        }
        if ($arr_image_details[2] == 3) {
            $imgt = "ImagePNG";
            $imgcreatefrom = "ImageCreateFromPNG";
        }

        if ($imgt) {
            $old_image = $imgcreatefrom($img_source);
            $new_image = imagecreatetruecolor($newWidth, $newHeight);
            imagecopyresized($new_image, $old_image, 0, 0, 0, 0, $newWidth, $newHeight, $width, $height);
            $imgt($new_image, $updir."_t.jpg");
            ob_start();
            $imgt($new_image);
            $imgData = ob_get_clean();
            return $imgData;
        }
} 
```

阅读答案以获取更多信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T22:14:55.977

如果您没有为图像创建函数提供文件名，它们只会将图像数据写入 PHP 的输出缓冲区。

这意味着您可以像这样截取图像数据：

```
ob_start();
$imgt($new_image);
$imgData = ob_get_clean(); 
```

查看[PHP GD 手册](http://php.net/gd)。

# java - 通过 Class.forName() 动态返回在方法调用期间确定的类型的类

> ID：15327299
> 
> 赞同：0
> 
> 时间：2013-03-10T20:37:49.597
> 
> 标签：java

我知道我可以通过传入一个类然后将该类声明为返回类型来动态确定方法的返回类型，如下例所示：

```
public static <returnType> returnClass dynamicConstructor (Class<returnType> returnClass){
    //Dynamically construct an object using a zero parameter constructor
    return (returnClass) object;
} 
```

将被调用的代码是：

```
DynamicConstructor.construct(constructedClass); 
```

这段代码很好，因为当你在代码中调用方法时，它很简单并且被封装了。但是，我想更进一步，将参数设为包含完整类名的字符串，然后让方法通过`Class.forName(className)`. 这样做的问题是我无法弄清楚如何返回稍后确定的类型。使用方法重载，我的代码是：

```
public static ?????? dynamicConstructor (String className){
    try {
        return dynamicConstructor(Class.forName(className));
    } catch (ClassNotFoundException e) {
        System.out.println("Could not find class at path " + classPath);
        e.printStackTrace();
        return null;
    }
} 
```

问题是我不知道在标记的部分中放什么`??????`。我希望能够以某种方式引用由`Class.forName(className)`. 这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:41:45.143

当然可以从类名*创建*类的实例（只要你有一个零参数的构造函数），但是如果类名的唯一存储位置是字符串，那么就无法确定类型返回。所以你的方法签名将是

```
public static Object dynamicConstructor(String) 
```

这可能不是很有用或您想要的。

所以简短的回答是，**不，这是不可能的**。

# asp.net - ObjectDataSource 是专业（n 层）应用程序的好选择吗？

> ID：15327300
> 
> 赞同：1
> 
> 时间：2013-03-10T20:37:54.447
> 
> 标签：asp.net, sql-server, database, gridview, objectdatasource

我问这个问题是因为有很多方法可以填充数据控件（例如`GridView`and `FormsView`），并且对于新开发人员来说可能会让人不知所措。

最好的方法是什么？

是否应该完全避免数据源控件（如`SqlDataSource`和）？`ObjectDataSource`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T20:41:39.097

我想说`SqlDataSource`它不是很适合 n 层应用程序（n = 1 除外），因为它直接与 sql server 对话。

另一方面，`ObjectDataSource`这是一个完全可以接受的选项，因为它允许您从 Web 层可以访问的任何层上的类中调用方法。它根本不会限制您的层架构。

# android - 群主WIFI DIRECT的Mac地址？

> ID：15327304
> 
> 赞同：1
> 
> 时间：2013-03-10T20:38:06.603
> 
> 标签：android, networking, wifi, android-wifi, wifi-direct

我可以在android平台的WIFI DIRECT中为群主请求Mac地址吗？

如果这正确的话，我会受伤吗？？

首先请求`WifiP2pManager.GroupInfoListener`
然后返回`WifiP2pGroup`信息。从这里有`getOwner()`所有者信息，以获取`deviceAddress`来自的mac地址`WifiP2pDevice`。

我可以按照上面的方式获取MAC地址吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:29:38.223

答案是肯定的。不能多说，你已经完成了所有的工作，你只需要尝试。但是稍后您可能应该费心获取组所有者的 IP 地址而不是 MAC 地址。

# java - 无法以特定格式写入文件

> ID：15327315
> 
> 赞同：0
> 
> 时间：2013-03-10T20:39:41.657
> 
> 标签：java, file, netbeans, while-loop, bufferedwriter

我正在尝试以如下特定格式写入文件*Days2.dat ：*

```
Sunday
Advanced Open Water Dive Certificate
Sailing
Generation Next

Monday
Helping Hands
Beach Touch Rugby
Running Club
Yoga Club
Tennis Lessons

Tuesday
Recycling Club
Best Buddies
Crochet Club
Movie Club
Shooting Club

Wednesday
Table Tennis
Modern Dance
Contemporary Dance
Gavel Club

Thursday
Cooking
Gym Training 
```

单击按钮时，执行的操作应：

*   从文件*Activities.dat*中读取并确定活动的日期和名称

*   以上述格式写入*Days2.dat文件，* **Activities.dat**格式如下：

天

活动名称

主管姓名

地点

有薪酬的？

例如

```
Sunday
Advanced Open Water Dive Certificate
Mr.Jones
N/A
Yes

Sunday
Sailing
Mr. Jackson
N/A
Yes

Sunday
Generation Next
Ms.Steele
N/A
Yes

Monday
Helping Hands
Ms.Wafa
ANX0
No

Monday
Beach Touch Rugby
Mr.Jones
N/A
No 
```

**当前**要写入*Days2.dat的代码*

```
File f1 = new File("Days2.dat");
File f2 = new File("Activities.dat");

f1.delete();

try{
    BufferedWriter writer = new BufferedWriter(new FileWriter(f1, true));
    BufferedReader reader = new BufferedReader(new FileReader(f2));

    while(reader.ready())
    {
        String CDay = reader.readLine();
        String CActivityName = reader.readLine();
        String CSupervisor = reader.readLine();
        String CLocation = reader.readLine();
        String CPaid = reader.readLine();
        String nothing = reader.readLine();

        writer.write("Sunday" + "\n");
        if(CDay.equals("Sunday"))
        {
            writer.write(CActivityName + "\n");
        }

        writer.write("Monday" + "\n");            
        if(CDay.equals("Monday"))
        {
            writer.newLine();
            writer.write(CActivityName + "\n");
        }            

        writer.write("Tuesday" + "\n");
        if(CDay.equals("Tuesday"))
        {
            writer.newLine();
            writer.write(CActivityName + "\n");
        }

        writer.write("Wednesday" + "\n");
        if(CDay.equals("Wednesday"))
        {
            writer.newLine();
            writer.write(CActivityName + "\n");
        }

        writer.write("Thursday" + "\n");
        if(CDay.equals("Thursday"))
        {
            writer.newLine();
            writer.write(CActivityName + "\n");
        }
    }
    writer.flush();
    writer.close();
    reader.close();

} 
catch (IOException ex) {
    Logger.getLogger(StartUpFrame.class.getName()).log(Level.SEVERE, null, ex);
} 
```

然而，**当前的输出**是这样的（有点长，抱歉） - 错误很明显：

```
Sunday
Advanced Open Water Dive Certificate
Monday
Tuesday
Wednesday
Thursday
Sunday
Sailing
Monday
Tuesday
Wednesday
Thursday
Sunday
Generation Next
Monday
Tuesday
Wednesday
Thursday
Sunday
Monday

Helping Hands
Tuesday
Wednesday
Thursday
Sunday
Monday

Beach Touch Rugby
Tuesday
Wednesday
Thursday
Sunday
Monday

Running Club
Tuesday
Wednesday
Thursday
Sunday
Monday

Yoga Club
Tuesday
Wednesday
Thursday
Sunday
Monday

Tennis Lessons
Tuesday
Wednesday
Thursday
Sunday
Monday
Tuesday

Recycling Club
Wednesday
Thursday
Sunday
Monday
Tuesday

Best Buddies
Wednesday
Thursday
Sunday
Monday
Tuesday

Crochet Club
Wednesday
Thursday
Sunday
Monday
Tuesday

Movie Club
Wednesday
Thursday
Sunday
Monday
Tuesday

Shooting Club
Wednesday
Thursday
Sunday
Monday
Tuesday
Wednesday

Table Tennis
Thursday
Sunday
Monday
Tuesday
Wednesday

Modern Dance
Thursday
Sunday
Monday
Tuesday
Wednesday

Contemporary Dance
Thursday
Sunday
Monday
Tuesday
Wednesday

Gavel Club
Thursday
Sunday
Monday
Tuesday
Wednesday
Thursday

Cooking
Sunday
Monday
Tuesday
Wednesday
Thursday

Gym Training 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T20:54:27.317

无论我们实际处理哪一天，您当前每次都在编写星期几，这并不完全正确。

由于您的文件中有一周中的多天，我会尝试如下操作：

*   为一周中的每一天创建一个`List`（或其他对象）。如果您不想创建这么多对象，则地图可能在这里更有用，例如`Map<String, List<String>>`
*   使用您的 CDay 变量确定我们正在处理一周中的哪一天（就像您当前所做的那样）。
*   如果匹配，则将活动添加到列表中。
*   读取文件后，将列表的内容写入一周中每一天的新文件中。

# ajax - 为生物分类群命名 Web 服务？

> ID：15327316
> 
> 赞同：0
> 
> 时间：2013-03-10T20:39:43.350
> 
> 标签：ajax, autocomplete

有一次我在互联网上找到了一个生物分类群的名称网络服务（忘记给它添加书签），现在找不到了。我非常难过和困惑！如果有人知道，请分享链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:43:00.790

无需更具体，唯一可以作为起点的东西可能是 [http://www.ebi.ac.uk/services](http://www.ebi.ac.uk/services) (?)

# ruby - 为每个 ruby 版本重新安装每个 gem？

> ID：15327319
> 
> 赞同：24
> 
> 时间：2013-03-10T20:40:00.137
> 
> 标签：ruby, rbenv

我刚刚使用 rbenv 安装了 Ruby 2.0.0 并将其设置为我系统的全局 ruby​​ 版本。由于 2.0 与 1.9.3 兼容，我尝试用它启动一个 Rails 项目，但出现以下错误。我是`rbenv rehash`在安装 2.0 后做的

```
The `rails' command exists in these Ruby versions:
  1.9.3-p327 
```

这是否意味着如果我希望将它与 2.0 一起使用，我必须重新安装我在系统上安装的 1.9.3 的每个 gem？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-03-10T20:51:07.663

[如此处](https://github.com/sstephenson/rbenv/issues/285)所示：

您需要为您使用的每个版本的 Ruby 重新安装 bundler。请参阅安装它的 Ruby 版本：

```
rbenv whence bundle 
```

查看您当前的版本：

```
rbenv version 
```

为该版本安装捆绑器（如果缺少）：

```
gem install bundler 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-10T20:48:10.303

是的。Rbenv（和 RVM）对于每个已安装的 Ruby 版本都有单独的“gem home”目录。可能有一些方法可以对某些目录进行符号链接以使它们共享，但这可能会导致问题，特别是对于包含本机 C 扩展的 gem，它们可能会或可能不会在多个版本中干净地编译和运行。

如果你有一个 Gemfile，最简单的方法是`bundle install`再次为 Ruby 2.0 提供许多 gem 的副本以及任何本机 gem 的 Ruby-2.0 编译版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-07T16:16:46.800

另一个解决方案是将之前版本的 gem 复制（或重新安装）到新安装的版本。[这个问题](https://stackoverflow.com/questions/13649241/copying-gems-from-previous-version-of-ruby-in-rbenv/38250444#38250444)详细回答了如何做到这一点，它有两个脚本——一个[从本地缓存安装](https://stackoverflow.com/a/14616511/4417766)，一个[从互联网重新安装](https://gist.github.com/purp/0f96a9689ad0cf92fc24ee5bd90f0b47)（我的）。

# multithreading - 快生产者和慢消费者

> ID：15327322
> 
> 赞同：4
> 
> 时间：2013-03-10T20:40:36.380
> 
> 标签：multithreading, concurrency, pthreads, producer-consumer

我有一个用例，其中快速生产者将数据插入队列，而慢速消费者使用数据。我面临的问题是队列大小随着时间的推移不断增加。我有一个类实现，其中 std::queue 受互斥锁和条件变量保护，用于并发读写。

这如何适应生产者在达到 MAX_THRESHOLD 直到停止将数据插入队列并且消费者已经消耗了一定量的数据信号生产者将数据插入队列的情况。

有人可以提供一个示例实现吗？

在不改变类实现的情况下，是否可以通过在生产者和消费者中添加另一层同步来解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T21:40:39.613

任何一个：

a) 如果队列大小达到 MAX_THRESHOLD，则使用有界队列类阻止生产者。这意味着更改您可能不想要的队列类。

b) 使用“池队列”——另一个无界阻塞队列，在启动时用 MAX_THRESHOLD 个对象填充。生产者从池中获取其对象，加载它们，排队到生产者。生产者从消费者那里获取对象，“消费”它们并将它们返回到池中。这有点要求使用您可能不想要的指针或引用。

c) 使用以 MAX_THRESHOLD 计数初始化的信号量以与 (b) 类似的方式表示消息令牌 - 生产者必须在排队之前获取一个单元，消费者在完成消息对象后发布一个单元。

我倾向于使用（b）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T10:30:31.220

带有 pthread 的“有界队列”的代码片段：

```
#include <queue>
#include <pthread.h>

template <class T, size_t UpperLimit>
class BoundedQueue {
  std::queue<T> q_;
  pthread_mutex_t mtx_;
  pthread_cond_t cv_not_empry_;
  pthread_cond_t cv_not_full_;

  // lock/unlock helper
  struct auto_locker {
    auto_locker(pthread_mutex_t* pm) : pm_(pm)
      { pthread_mutex_lock(pm_); }
    ~auto_locker()
      { pthread_mutex_unlock(pm_);}
    pthread_mutex_t *pm_;
  };

public:
  BoundedQueue() { /* initialize member... */ }
  ~BoundedQueue() { /* uninitialize member...*/ }
  // for Producer
  void push(T x) {
    auto_locker lk(&mtx_);
    while (UpperLimit <= q_.size()) {
      pthread_cond_wait(&cv_not_full_, &mtx_);
    }
    q_.push(x);
    pthread_cond_broadcast(&cv_not_empry_);
    return ret;
  }
  // for Consumer
  T pop() {
    auto_locker lk(&mtx_);
    while (q_.empty()) {
      pthread_cond_wait(&cv_not_empry_, &mtx_);
    }
    T ret = q_.front();
    q_.pop();
    pthread_cond_broadcast(&cv_not_full_);
    return ret;
  }
} 
```

# iphone - iphone开发：表视图返回空表

> ID：15327324
> 
> 赞同：0
> 
> 时间：2013-03-10T20:40:41.683
> 
> 标签：iphone, ios, objective-c, xcode, uitableview

我是iOS开发的新手，在这里或谷歌上找不到解决方案，所以我绝望地问。

我有一个类“ViewController”，它是 UIViewController 的子类。在这里，我有：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([self.bookTitle.text length] > 0)
        self.entries = [self.bookLibrary searchForBook:self.bookTitle.text];

    if ([segue.identifier isEqualToString: @"BookList"]) {
        TableViewController *controller = (TableViewController *)segue.destinationViewController;
        controller.itemCounter = [self.entries count];
        controller.bookLibrary = [self.entries allValues];
    }
} 
```

Storyboard 上的视图与我拖放到网格上的 Table View Controller 有一个连接。我点击底部的“Table View Controller”，在自定义类输入框中设置了我的自定义类“TableViewController”。

现在，据我了解，上面的方法是将所有数据正确传递给 TableViewController。

这是我在 TableViewController 中的一种方法

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *simpleTableIdentifier = @"BookCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:simpleTableIdentifier];
    }

    Book* book =  [self.bookLibrary objectAtIndex:indexPath.row];

    cell.textLabel.text = book.title;
    NSLog(@"%@", book.title);
    return cell; 
```

}

NSLog 条目将所有书名打印到控制台，所以我知道数据正在传递。但是，当我运行程序并单击按钮拉出表格视图时，它只是一个空表格。有什么提示吗？我可以上传我的整个项目。在这里待了几个小时，有点沮丧。请帮忙 ：（

编辑：响应建议我查看表方法中数据变量的状态。它表明他们的状态不是我认为的那样，我应该使用 NSLog 打印出他们的值。我就是这样做的，我可以看到所有打印出来的值。我不明白......他们确实有分配给他们的价值。问题不在于数据丢失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T21:01:13.077

确保您使用 UITableViewController 子类作为您的 VC（如果您使用托盘中的 UITableViewController ui 对象），或者您正确地将 UITableView 的委托和数据源属性连接到您的 VC（如果您是使用普通的 UIViewController 对象和子类）。

（见问题评论）。

尝试这个：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSLog(@"bookLibrary.count %d", bookLibrary.count);
    return [bookLibrary count];
} 
```

你会发现事情并不是你想象的那样......添加一个实现`viewDidLoad`并`viewWillAppear`随之添加，每个都有自己的“我在这里”NSLog 语句，并跟踪出现的第二个视图控制器的流程。同样，您会发现您遇到了一些排序问题，其中流程与您可能假设的方式不太一样。

* * *

添加评论：

最终，您的问题的根源是您的“发送”控制器准备 segue 方法中的这一行：

```
controller.bookLibrary = [self.entries allValues]; 
```

这是在做什么？它调用`allValues`Dictionary 对象。该方法会生成一个包含这些值的新数组 (!)。您不会将该新的 Array 对象存储在任何永久存储中。您只需使用它来设置：

```
controller.bookLibrary = ... 
```

因此，在该语句执行后，您将拥有：

*   您的 prepareForSegue 方法（代码正在执行的地方）中的一个 Array 对象，您只存储在一个变量/持有者中，即：
*   在目标视图控制器（TableViewController）中指向该对象的*弱指针*

该方法结束。

返回的 Array`[... allValues]`没有被 Source 视图控制器中的任何东西保留，因此唯一阻止它被垃圾收集的是 Destination view 控制器中指向它的指针。

但是那个指针是一个*弱*指针。根据定义，如果这是指向对象的唯一指针，则指针将设置为 nil 并释放对象以进行垃圾回收。*噗！* 没有更多的数组对象，你只剩下一个 nil 指针。

正如您所发现的，将“接收器”设置为*strong*可以让它保留该 Array 对象，即使在其他代码退出并且它是唯一指向 Array 的指针之后也是如此。

（而且，您的代码不会被调用两次。如果您仔细查看日志记录 - 或者更好的是在 table get-row-count 方法中设置断点 - 您会看到它只被调用一次。较早的“我有 8 个对象”的日志记录发生在其他代码中，而不是在您的 TableViewController 中。）

# c++ - SFML 2.0 循环显示不止一次的精灵

> ID：15327332
> 
> 赞同：1
> 
> 时间：2013-03-10T20:41:18.390
> 
> 标签：c++, sfml, sprite-sheet

我过去曾问过类似的问题，但我仍然无法理解这个问题。我正在做一个基于 SFML 2.0 的入侵者游戏。到目前为止，我有一张使用我的时钟运行的精灵表。这部分工作得很好：

```
#include <SFML/Window.hpp>
#include <SFML/Graphics.hpp>
#include <SFML/Audio.hpp>
#include <iostream>
#include <string>

int spriteWalkSpeed = 10;
int DownspriteWalkSpeed = 5;
int up=-spriteWalkSpeed, down=DownspriteWalkSpeed, left=-spriteWalkSpeed, right=spriteWalkSpeed;

int xVelocity =0, yVelocity=0;

const int SC_WIDTH=800;
const int  SC_HEIGHT= 600;
const float  REFRESH_RATE =0.01f; //how often we draw the frame in seconds

const double delay=0.1;
const int SPRITEROWS=1; //number of ROWS OF SPRITES
const int SPRITECOLS=2;//number of COLS OF SPRITES

std::string gameOver = "Game Over";

int main()
{
    // Create the main window
    sf::RenderWindow App (sf::VideoMode(SC_WIDTH, SC_HEIGHT, 32), "Space Invaders!",sf::Style::Close );

    // Create a clock for measuring time elapsed
    sf::Clock Clock;

    //background texture
    sf::Texture backGround;
    backGround.loadFromFile("images/background.jpg");

    sf::Sprite back;
    back.setTexture(backGround);

    //load the invaders images
    sf::Texture invaderTexture;
    invaderTexture.loadFromFile("images/invaders.png");
    sf::Sprite invadersSprite(invaderTexture);
    std::vector<sf::Sprite> invaderSprites(10, sf::Sprite(invaderTexture));

    int invadersWidth=invaderTexture.getSize().x;
    int invadersHeight=invaderTexture.getSize().y;

    int spaceWidth=invadersWidth/SPRITECOLS;
    int spaceheight=invadersHeight/SPRITEROWS;
    //Sprites

    sf::IntRect area(0,0,spaceWidth,spaceheight);

    invadersSprite.setTextureRect(area);
    invadersSprite.setPosition(30, NULL);

    App.setKeyRepeatEnabled(false);
    //Collision detection

    // Start game loop  
    while (App.isOpen())
    {
        // Process events
        sf::Event Event;
        while (App.pollEvent(Event))
        {
            // Close window : exit
            if (Event.type == sf::Event::Closed)
                App.close();
        }
        // Create an array of 10 sprites (cannot initialise them with textures here)
        for (int i = 0; i < 10; i++) 
        {
            invaderSprites[i].setPosition(30,0);

        if(Clock.getElapsedTime().asSeconds()>REFRESH_RATE)
        {
            //carry out updating tasks
            static float spriteTimer=0.0;  //keep track of sprite time
            spriteTimer+=Clock.getElapsedTime().asSeconds();

            static int count=0; //keep track of where the sub rect is
            if(spriteTimer>delay)
            {
                invaderSprites[i].setTextureRect(area);
                ++count;
                invaderSprites[i].move(xVelocity, yVelocity);   
                if(count==SPRITECOLS) //WE HAVE MOVED OFF THE RIGHT OF THE IMAGE
                {
                    area.left=0;            //reset texture rect at left

                    count=0;                //reset count
                }
                else
                {
                    area.left+=spaceWidth; //move texture rect right
                }

                spriteTimer=0; //we have made one move in the sprite tile - start timing for the next move
            }
            Clock.restart();
        }
        App.draw(back);
            App.draw(invaderSprites[i]);

        // Finally, display the rendered frame on screen
        App.display();
        }
    }

    return EXIT_SUCCESS;
} 
```

我遇到的问题是精灵只显示一次，而不是 10 次（作为 for 循环状态）

```
std::vector<sf::Sprite> invaderSprites(10, sf::Sprite(invaderTexture));

    // Loop over the elements of the vector of sprites
    for (int i = 0; i < invaderSprites.size(); i++) 
    {
        invaderSprites[i].setPosition(30, NULL);
    }
    // Create an array of 10 sprites (cannot initialise them with textures here)
    sf::Sprite invaderSprites[10]; // Loop over each sprite, setting their textures
    for (int i = 0; i < 10; i++) 
    {
        invaderSprites[i].setTexture(invaderTexture);
    } 
```

我很确定它与应用程序绘图`invadersSprite`有关，而循环设置为`invaderSprites`. 即使只是对出了什么问题有一点了解也会有很大的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T20:54:15.100

> 我很确定它与应用程序绘制入侵者精灵有关，而循环是为入侵者精灵设置的。

是的，这肯定与它有关。您需要调用`App.draw(...)`要绘制的每个精灵。您没有为矢量中的任何精灵调用它。为此，您需要一个循环：

```
for (int i=0; i<invaderSprites.size(); ++i)
    App.draw(invaderSprites[i]); 
```

不过还有其他问题。例如`invaderSprites`，当你已经有一个同名的精灵向量时，为什么要声明一个名为 的精灵数组？后者一旦被声明就隐藏前者。

另一件事是您将所有精灵设置到相同的位置，因此即使您设法将它们全部绘制出来，它们也会都在同一个位置，因此它们不会显示为单独的对象。

# vb.net-to-c# - 任何人都可以将此 vb.net 代码转换为 C# 吗？

> ID：15327333
> 
> 赞同：0
> 
> 时间：2013-03-10T20:41:24.757
> 
> 标签：vb.net-to-c#, sharpffmpeg

我在将此代码（***用于使用此[FFmpeg Wrapper](http://vbffmpegwrapper.codeplex.com/)***）转换为 C# 时遇到了麻烦，因为它是我项目的主要语言。

我试过[http://www.developerfusion.com/tools/convert/vb-to-csharp/](http://www.developerfusion.com/tools/convert/vb-to-csharp/) 但结果代码对我不起作用:(

我知道这是一个新手请求，对不起；

编码 ：

```
 Public WithEvents MediaConverter As New FFLib.Encoder

    Private Sub ConOut(ByVal prog As String, ByVal tl As String) Handles MediaConverter.Progress
        OperationPrgrss.Value = prog
        Application.DoEvents()
    End Sub

    Private Sub stat(ByVal status) Handles MediaConverter.Status
        StatusLbl.Text = status
        Application.DoEvents()
    End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T20:59:28.110

C# 没有严格等效的`Handles`关键字；您需要做的是自己在构造函数中添加事件处理程序。

```
public Form1() {
    ...

    // wire up events
    MediaConverter.Progress += ConOut;
    MediaConverter.Status += stat;
} 
```

您不需要等效的 for `WithEvents`，因为它只是告诉 VB 有要连接的事件，而在 C# 中您可以自己完成。

其余的是一个非常简单的翻译。A`Sub`基本上是一个有`void`返回类型的函数`ByVal`，`Handles`子句可以走开，关键字是小写的，剩下的就是分号和大括号。

例如，

```
private void ConOut(String prog, String tl) {
    OperationPrgrss.Value = prog;
    Application.DoEvents();
} 
```

# bash - Bash：如何控制迭代流/循环？

> ID：15327342
> 
> 赞同：0
> 
> 时间：2013-03-10T20:41:53.343
> 
> 标签：bash, file, recursion, iteration

为了检查一些恢复的数据，我正在编写一个脚本，该脚本递归地遍历文件夹和文件并最终在它们上运行文件，以检查它们是否可能从某个备份中完全恢复。（恢复的文件播放，并被识别为 mp3 或其他音频，非工作文件为 ASCII-Text）

现在我只要让它检查我的测试文件夹结构，打印所有文件夹和相应的文件就很满意了。（打印它们主要是为了测试，也因为我想记录脚本当前在哪里以及它到底走了多远，以验证已经处理了什么）

我尝试使用 2 个 for 循环，一个用于文件夹，一个用于文件。（因此理想情况下它需要 1 个文件夹，然后列出其中的文件（或可能深入到子文件夹），并且在每个文件夹下面只给出该子文件夹中的文件，然后继续下一个。例如：

```
Folder1  
- File 1  
- File 2  
    -- Subfolder  
    -- File3  
    -- File4  
Folder2  
- File5 
```

但是，这似乎不适用于通常建议的方式（例如 for 循环）。我尽可能使用“find . -type d”作为目录和“find .-type f”或“find * -type f”（这样它就不会进入子目录）但是，当只是打印路径/文件以检查它是否按照我的意愿运行，很明显这不起作用。

它似乎总是首先打印所有目录（第一个循环），然后是所有文件（第二个循环）。为了跟踪它正在做什么并更容易知道检查/恢复了什么，我想以更有序的方式执行此操作，如上所述。那么是我做错了什么，还是这可能是 bash 中 for 循环的一般限制？

另一个可能相关的问题：虽然将 find 的输出分配给数组似乎可行，但它不能作为数组访问......

> 循环示例：
> for folder in '$(find . -type d)' ; 做
> echo $folder
> 让文件夹计数器 ++
> 完成
> 
> Arrays:folders=("$(find . -type d)")
> #据我所知，这应该将输出分配为数组
> #但是，它并没有以某种方式正确分配为
> echo "$folders[1]"
> #不起作用（空格所需的引号）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:31:11.467

@H.-Dirk Schmitt 所指的`find ... -exec ...`解决方案可能类似于：

```
find . -type f -exec sh -c '
    case $(file "$1") in
    *Audio file*)
        echo "$1 is an audio file"
        ;;
    *ASCII text*)
        echo "$1 is an ascii text file"
        ;;
    esac
' _ {} ';' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T21:24:22.220

> 为了检查一些恢复的数据，我正在编写一个脚本，该脚本递归地遍历文件夹和文件并最终在它们上运行文件，以检查它们是否可能从某个备份中完全恢复。（恢复的文件播放，并被识别为 mp3 或其他音频，非工作文件为 ASCII-Text）

如果你想`file`在当前目录中的每个文件和目录上运行，包括它的子目录等等，你不需要使用 Bash `for`-loop，因为你可以告诉`find`运行`file`：

```
find -exec file '{}' ';' 
```

（该`-exec ... ';'`选项`...`在每个匹配的文件或目录上运行命令，将参数替换为`{}`文件的路径。）

如果您只想`file`在常规文件（而不是目录）上运行，您可以指定`-type f`：

```
find -type f -exec file '{}' ';' 
```

如果您（例如）只想打印目录的名称，但在常规文件上运行上述内容，则可以使用`-or`运算符连接一个使用的指令`-type d`和一个使用的指令`-type f`：

```
find -type d -print -or -type f -exec file '{}' ';' 
```

* * *

**编辑补充：**如果需要，可以在纯Bash中（`file`当然是加上命令），通过编写递归shell函数来实现上述命令的效果。例如：

```
function foo () {
    local file
    for file in "$1"/* ; do
        if [[ -d "$file" ]] ; then
            echo "$file"
            foo "$file"
        else
            file "$file"
        fi
    done
}
foo . 
```

这与`find`命令的不同之处在于它将更一致地对文件进行排序，并且可能在诸如处理点文件和符号链接之类的坚韧细节上，但大致相同，因此可以用作进一步调整的起点。

# asp.net - 实体框架连接字符串对角色提供者无效？

> ID：15327348
> 
> 赞同：2
> 
> 时间：2013-03-10T20:42:09.260
> 
> 标签：asp.net, asp.net-mvc, asp.net-membership

我一直在尝试让角色参与我的 MVC 4.0 项目。我可以使用我的实体框架连接字符串查询和更新我的数据库。

```
<add name="DataContext" 
     connectionString="metadata=res://*/Models.Model.csdl|res://*/Models.Model.ssdl|res://*/Models.Model.msl;
                       provider=System.Data.SqlClient;
                       provider connection string='data source=.\SQLEXPRESS;
                       initial catalog=Phase 2;
                       integrated security=True;
                       multipleactiveresultsets=True;
                       application name=EntityFramework'" 
     providerName="System.Data.EntityClient" /> 
```

这非常有效。问题是当我尝试设置我的角色管理器时，它告诉我我的连接字符串无效

```
<roleManager enabled="true">
  <providers>
    <clear />
    <add name="AspNetSqlRoleProvider" 
         type="System.Web.Security.SqlRoleProvider" 
         connectionStringName="DataContext" 
         applicationName="/" />
  </providers>
</roleManager> 
```

这会引发错误并告诉我我的连接字符串错误。经过显然研究后，我必须为我的提供商使用单独的连接字符串。我不知道如何将两个连接字符串指向相同的上下文。

这就是我目前命名上下文的方式。

```
public DataContext()
        : base("name=DataContext")
        {
        } 
```

有没有办法动态设置名称，或者我应该寻找另一种方法来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T20:47:13.607

角色提供者需要有一个直接的、直接的 ADO.NET 连接字符串——而不是 EF 连接字符串；ADO.NET 成员资格和角色提供程序系统不使用实体框架来访问其表。

所以使用这样的东西：

```
<connectionStrings>
   <add name="RoleProviderConnection" 
        connectionString="data source=.\SQLEXPRESS;initial catalog=Phase 2;integrated security=True;"
        providerName="System.Data.SqlClient" /> 
```

并为您的成员资格和角色提供者使用该直接 ADO.NET 连接字符串：

```
<roleManager enabled="true">
  <providers>
    <clear />
    <add name="AspNetSqlRoleProvider" 
         type="System.Web.Security.SqlRoleProvider" 
         connectionStringName="RoleProviderConnection" 
         applicationName="/" />
  </providers>
</roleManager> 
```

# javascript - 如何从 Angular $scope 中获取数据。

> ID：15327353
> 
> 赞同：0
> 
> 时间：2013-03-10T20:42:16.087
> 
> 标签：javascript, angularjs

以此为起点：

[http://plnkr.co/edit/CncDWCktXTuBQdDVfuVv?p=preview](http://plnkr.co/edit/CncDWCktXTuBQdDVfuVv?p=preview)

当一个人点击一个项目时：`selectedItems: $scope.mySelections,`被一个项目填充。selectedItem 的输出如何从 ng-model 传递到另一个 js 函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T20:58:36.917

我不确定我是否完全理解您的问题，但是如果您想在选择更改时运行一些代码，最简单的方法是添加[watch](http://docs.angularjs.org/api/ng.%24rootScope.Scope#%24watch)。

```
$scope.$watch('mySelections', function (value) {
    // Triggered every time mySelections is changed.
}); 
```

（如果我完全误解了你的问题，我深表歉意。）

**更新示例**

[这是一个使用$http](http://docs.angularjs.org/api/ng.%24http)服务的简单示例。手表将在每次`$scope.mySelections`更改时触发，`value`参数将反映其值。

```
$scope.$watch('mySelections', function (value) {
    $http.post('/path/', { selectedItems: value })
       .success(function (result) {
            alert('Saved!');
        }).error(function (err) {
            alert(err);
    });
}, true); 
```

注意带有 value 的第三个参数`true`。angular 需要那个来注意到数组中的变化。[（更多关于这里](http://docs.angularjs.org/api/ng.%24rootScope.Scope#%24watch)的第三个参数。）

# php - JavaScript 和 jQuery 变量传递

> ID：15327363
> 
> 赞同：0
> 
> 时间：2013-03-10T20:43:40.057
> 
> 标签：php, javascript, jquery

我试图将两个变量传递给 jQuery 的“POST”函数，但它们似乎没有进入我的 PHP。

```
<script>
var starting = 0;
var ending = 3;
$(document).ready(function(){               
           $.post("test.php", {start: starting, end: ending}, 
                   function(){});
  });
</script> 
```

我的理解是，我应该能够使用 $_POST["start"] 和 $_POST["end"] 访问“开始”和“结束”，但它似乎不起作用。我是否错误地传递了这些变量？这是我的 PHP 的开始。如果我对限制的测试值进行硬编码，则该脚本可以正常工作。

```
$starting = intval($_POST["start"]);
$ending = intval($_POST["end"]);
$query = "SELECT formation_name FROM formations LIMIT '$starting','$ending'"; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T20:46:51.487

MySQL`LIMIT`子句采用两个整数，而不是字符串。删除您周围的引号。

# algorithm - 在平均 n + log n 比较中找到最大和第二大的 n 个数字

> ID：15327369
> 
> 赞同：1
> 
> 时间：2013-03-10T20:43:58.077
> 
> 标签：algorithm, list, numbers, comparison, runtime

我们知道找到列表的最小数字的简单方法是进行 n 次比较，如果我们想要第二小的数字，我们可以再次遍历它，或者在第一次迭代期间跟踪另一个变量。无论哪种方式，这都需要 2n 次比较才能找到这两个数字。

所以假设我有一个包含 n 个不同元素的列表，我想找到最小的和第二小的。是的，最优算法最多需要 n + ceiling(lg n) - 2 次比较。（虽然对最佳方式不感兴趣）

但是假设您被迫使用简单算法，即进行 2n 次比较的算法。在最坏的情况下，需要进行 2n 次比较。但是平均值呢？使用简单的蛮力算法找到最小的和第二小的平均比较次数是多少？

编辑：它必须小于 2n——（从我下面的评论中复制并粘贴）我将我所在的索引与 tmp2 变量进行比较，以跟踪第二个最小的变量。除非我当前索引处的值小于 tmp2，否则我不需要对 tmp1 变量进行另一个比较来跟踪最小值。因此，您可以从 2n 减少比较次数。尽管如此，它仍然需要超过 n 。是的，在最坏的情况下，这仍然需要 2n 次比较。但平均而言，如果所有东西都是随机放入的......

我猜这将是 n + something 比较，但我无法弄清楚第二部分。我想会有某种方式以某种方式涉及 log n ，但是关于如何证明这一点的任何想法？

（同事在午餐时问我这个问题，我被难住了。抱歉）再一次，我对最优算法不感兴趣，因为那是一种常识。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T21:33:21.390

正如您在评论中指出的那样，如果迭代中的当前元素大于迄今为止找到的第二小的元素，则无需进行第二次比较。如果我们查看第 k 个元素，第二次比较的概率是多少？

我认为这可以改写为“第 k 个元素在包含前 k 个元素的 2 个最小元素的子集中的概率是多少？” 对于均匀分布的元素，这应该是 2/k，因为如果我们将前 k 个元素视为一个有序列表，那么每个位置对于第 k 个元素具有相等的概率 1/k，但只有两个，最小和第二小的位置，引起第二次比较。所以第二次比较的次数应该是 sum_k=1^n (2/k) = 2 H_n （第n次谐波数）。这实际上是计算第二次比较的期望值，其中随机数表示必须进行第二次比较的事件，如果必须进行第二次比较则为 1，如果必须进行一次比较则为 0 .

If this is correct, the overall number of comparisons in the average case is C(n) = n + 2 H_n and afaik H_n = theta(log(n)), C(n) = theta(n + log(n)) = theta(n)

# android - 将从相机拍摄的图像转换为字节数组，然后传递给下一个活动？

> ID：15327374
> 
> 赞同：0
> 
> 时间：2013-03-10T20:44:36.680
> 
> 标签：android, android-intent, camera

我正在尝试用相机拍照，然后将其转换为字节数组并传递给下一个活动。我不知道该怎么做。这是拍摄照片的活动的代码：

```
import java.io.ByteArrayOutputStream;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.provider.MediaStore;
import android.widget.ImageView;

public class TakePictureActivity extends Activity {

    public final static int CAMERA_REQUEST = 1888;

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        TakePicture();
    }

    public void TakePicture() {
        Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        startActivityForResult(takePictureIntent, CAMERA_REQUEST);
    }

    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // I don't know what to do here
    }

} 
```

我已经设置了下一个活动，因此它可以接收字节数组并对其进行解码，所以我需要的只是这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:09:55.447

正如 Squonk 指出的那样，我应该只是将相机意图和 OnActivityResult 移动到下一个活动而不是它自己的活动中。现在可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T20:48:18.253

试试这个

```
byte[] inputData=null;
protected void onActivityResult(int requestCode, int resultCode, Intent intent){
    Uri uri = intent.getData();
    InputStream iStream =   getContentResolver().openInputStream(uri);
    inputData = getBytes(iStream);
} 
```

getBytes 方法

```
public byte[] getBytes(InputStream inputStream) throws IOException {
      ByteArrayOutputStream byteBuffer = new ByteArrayOutputStream();
      int bufferSize = 1024;
      byte[] buffer = new byte[bufferSize];

      int len = 0;
      while ((len = inputStream.read(buffer)) != -1) {
        byteBuffer.write(buffer, 0, len);
      }
      return byteBuffer.toByteArray();
    } 
```

# java - 数独求解器的算法复杂度 (Big-O)

> ID：15327376
> 
> 赞同：11
> 
> 时间：2013-03-10T20:44:52.747
> 
> 标签：java, recursion, multidimensional-array, sudoku

我正在寻找“你是如何找到它的”，因为我不知道如何找到我的程序的算法复杂性。

我使用 java 编写了一个数独求解器，但没有考虑到效率（我想尝试让它递归地工作，我成功了！）

一些背景：

我的策略采用回溯来确定，对于给定的数独谜题，该谜题是否只有一个唯一的解决方案。所以我基本上读了一个给定的谜题，然后解决它。一旦我找到了一个解决方案，我不一定完成，需要继续探索进一步的解决方案。最后，会出现以下三种可能结果之一：拼图根本无法解决，拼图有唯一的解决方案，或者拼图有多个解决方案。

我的程序从一个文件中读取拼图坐标，该文件的每个给定数字都有一行，由行、列和数字组成。按照我自己的约定，7的左上角写成007。

执行：

我从文件中加载值，并将它们存储在二维数组中我沿着数组向下移动，直到找到一个空白（未填充的值），并将其设置为 1。并检查是否有任何冲突（我的值是否输入是否有效）。如果是，我转到下一个值。如果不是，我将值增加 1，直到找到一个有效的数字，或者如果它们都不起作用（1 到 9），我返回 1 步到我调整的最后一个值并增加那个值（使用递归）。当所有 81 个元素都被填充时，我完成了解决，没有冲突。如果找到任何解决方案，我会将它们打印到终端。否则，如果我尝试在最初修改的第一个元素上“返回一步”，则意味着没有解决方案。

我的程序算法复杂度如何？我认为它可能是线性的 [O(n)]，但我多次访问该数组，所以我不确定:(

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-10T21:02:49.317

O( *n* ^ *m* ) 其中*n*是每个方块的可能性数（即经典数独中的 9 个），*m*是空白的空格数。

这可以通过仅从单个空白向后工作来看出。如果只有一个空白，那么在最坏的情况下，您有*n 个*必须解决的可能性。如果有两个空白，那么对于第一个空白的每个可能性，您必须为第一个空白处理*n*个可能性，为第二个空白处理*n 个可能性。*如果有三个空白，那么您必须为第一个空白处理*n种可能性。*这些可能性中的每一个都会产生一个包含两个空格的谜题，其中有*n* ^2 个可能性。

该算法通过可能的解决方案执行深度优先搜索。图表的每个级别代表单个正方形的选择。图的深度是需要填充的正方形的数量。在分支因子为*n*且深度为*m*的情况下，在图中找到解决方案的最坏情况性能为 O( *n* ^ *m* )。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-28T22:20:34.450

在很多数独游戏中，都会有几个数字，稍微想一想就可以直接放出来。通过在第一个空单元格中放置一个数字，您放弃了很多减少可能性的机会。如果前十个空单元格有很多可能性，你就会得到指数增长。我会问这些问题：

第一行中的数字 1 可以放在哪里？

第一行中的数字 2 可以放在哪里？

...

数字 9 在最后一行的哪个位置？

相同但有九列？

一样，但有九个盒子？

哪个数字可以进入第一个单元格？

哪个号码可以进入第 81 格？

那是324个问题。如果任何问题只有一个答案，你就选择那个答案。如果任何问题根本没有答案，你就回溯。如果每个问题都有两个或更多答案，则选择答案数量最少的问题。

您*可能会*获得指数级增长，但仅限于非常困难的问题。

# google-app-engine - GWT + JDO = ClassCastException

> ID：15327381
> 
> 赞同：1
> 
> 时间：2013-03-10T20:45:46.193
> 
> 标签：google-app-engine, google-cloud-datastore, jdo, gwt-rpc

我正在使用 GWT + Google App Engine 和 JDO 将对象存储在 App Engine 数据存储区中。

我通过 Web 界面在客户端创建下面的对象，并通过 RemoteProcedureCall 将其传递到服务器，并将其存储到 Google App Engine 数据存储中。当对象成功传输到服务器时，RPC 工作正常。但是当我在服务器上调用 pm.makePersistent(myCustomObject) 时，它会崩溃并显示以下错误日志：

> java.lang.ClassCastException：org.datanucleus.identity.IdentityReference 不能转换为 org.datanucleus.identity.OID

**要存储的对象：**

```
package at.fhooe.mc.shared;

import java.util.ArrayList;
import java.util.List;

import javax.jdo.annotations.EmbeddedOnly;
import javax.jdo.annotations.Extension;
import javax.jdo.annotations.IdGeneratorStrategy;
import javax.jdo.annotations.PersistenceCapable;
import javax.jdo.annotations.Persistent;
import javax.jdo.annotations.PrimaryKey;

import com.google.gwt.user.client.rpc.IsSerializable;

@PersistenceCapable
public class Questionnaire implements IsSerializable {

// ************************************
// * MEMBER VARIABLES
// ************************************

/**
 * Unique identifier of the questionnaire. This Id is used as primary key in
 * the datastore.
 */
@PrimaryKey
@Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
@Extension(vendorName = "datanucleus", key = "gae.encoded-pk", value = "true")
String key;

/**
 * Title of the questionnaire.
 */
private String m_title;

/**
 * List of the actual questions in the questionnaire.
 */
@Persistent
private List<Question> m_questions;

// ************************************
// * CONSTRUCTOR
// ************************************

/**
 * Constructor.
 */
public Questionnaire() {
    m_questions = new ArrayList<Question>();
}

/**
 * Constructor.
 * 
 * @param _title
 *            Title of the questionnaire.
 */
public Questionnaire(String _title) {
    m_title = _title;
    m_questions = new ArrayList<Question>();
}

// ************************************
// * GETTERS / SETTERS
// ************************************

/**
 * Gets the Id of the question. This Id is also used as primary key in the
 * datastore.
 * 
 * @return Id the questionnaire.
 */
public String getId() {
    return key;
}

/**
 * Gets the title of the questionnaire.
 * 
 * @return Title of the questionnaire as string.
 */
public String getTitle() {
    return m_title;
}

/**
 * Sets the title of the questionnaire.
 * 
 * @param _title
 *            Title of the questionnaire.
 */
public void setTitle(String _title) {
    m_title = _title;
}

/**
 * Gets all available questions of the questionnaire.
 * 
 * @return All available questions of the questionnaire.
 */
public List<Question> getQuestions() {
    return m_questions;
}

/**
 * Adds a question to the questionnaire.
 * 
 * @param _question
 *            The question to be added.
 */
public void addQuestion(Question _question) {

    m_questions.add(_question);

}

// ************************************
// * INNER CLASS
// ************************************

/**
 * This class represents a single question of a questionnaire. It consists
 * of the actual question-text and the answer-type.
 */
@PersistenceCapable
@EmbeddedOnly
public static class Question implements IsSerializable {

    /**
     * Defines the answer-type of the question (e.g.: yes-or-no,
     * likert-scale, etc).
     */
    public enum AnswerType {

        YES_OR_NO("yes_or_no"), LIKERT("likert");

        private String stringValue;

        private AnswerType(String _stringValue) {
            stringValue = _stringValue;
        }

        @Override
        public String toString() {
            return stringValue;
        }
    }

    public Question() {

    }

    /**
     * Constructor.
     * 
     * @param _text
     *            The actual question as String.
     * @param _answerType
     *            The answertype as enum.
     * @param _answer
     *            The user-answer.
     */
    public Question(String _text, AnswerType _answerType, int _answer) {
        m_text = _text;
        m_answerType = _answerType;
        m_answer = _answer;
    }

    /**
     * The selected answer-type of the question.
     */
    @Persistent
    private AnswerType m_answerType;

    /**
     * The actual question as string.
     */
    @Persistent
    private String m_text;

    /**
     * The actual answer to the question.
     */
    @Persistent
    private int m_answer;

}

} 
```

**结果堆栈跟踪：**

```
javax.servlet.ServletContext log: Exception while dispatching incoming RPC call
com.google.gwt.user.server.rpc.UnexpectedException: Service method 'public abstract void at.fhooe.mc.client.PushMessageService.sendMessages(at.fhooe.mc.shared.Questionnaire)' threw an unexpected exception: java.lang.ClassCastException: org.datanucleus.identity.IdentityReference cannot be cast to org.datanucleus.identity.OID
at com.google.gwt.user.server.rpc.RPC.encodeResponseForFailure(RPC.java:389)
at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:579)
at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:123)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:61)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:409)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:326)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)
at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755)
at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
Caused by: java.lang.ClassCastException: org.datanucleus.identity.IdentityReference cannot be cast to org.datanucleus.identity.OID
at com.google.appengine.datanucleus.EntityUtils.extractChildKey(EntityUtils.java:915)
at com.google.appengine.datanucleus.StoreFieldManager.getDatastoreObjectForCollection(StoreFieldManager.java:983)
at com.google.appengine.datanucleus.StoreFieldManager.storeRelations(StoreFieldManager.java:877)
at com.google.appengine.datanucleus.DatastorePersistenceHandler.insertObjectsInternal(DatastorePersistenceHandler.java:367)
at com.google.appengine.datanucleus.DatastorePersistenceHandler.insertObject(DatastorePersistenceHandler.java:218)
at org.datanucleus.state.JDOStateManager.internalMakePersistent(JDOStateManager.java:2381)
at org.datanucleus.state.JDOStateManager.makePersistent(JDOStateManager.java:2357)
at org.datanucleus.ObjectManagerImpl.persistObjectInternal(ObjectManagerImpl.java:1896)
at org.datanucleus.ObjectManagerImpl.persistObjectWork(ObjectManagerImpl.java:1745)
at org.datanucleus.ObjectManagerImpl.persistObject(ObjectManagerImpl.java:1602)
at org.datanucleus.api.jdo.JDOPersistenceManager.jdoMakePersistent(JDOPersistenceManager.java:731)
at org.datanucleus.api.jdo.JDOPersistenceManager.makePersistent(JDOPersistenceManager.java:756)
at at.fhooe.mc.server.PushMessageServiceImpl.sendMessages(PushMessageServiceImpl.java:38)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.google.appengine.tools.development.agent.runtime.Runtime.invoke(Runtime.java:115)
at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:561)
... 38 more 
```

期待看到您的有用答案！

提前致谢！

# c - C语言cygwin编译器，不知道为什么会这样

> ID：15327400
> 
> 赞同：0
> 
> 时间：2013-03-10T20:47:44.343
> 
> 标签：c, compiler-errors, nested-loops

我的工作是使用 c 证明费马理论不正确。所以我所做的是嵌套循环，它很容易阅读。

这是代码：

```
#include <stdio.h>
#include <math.h>

quadtest(unsigned long long int a, unsigned long long int b, unsigned long long int c, unsigned        int n)
{
if ((pow(a,n)+pow(b,n))==pow(c,n))
    return 1;
else
    return 0;

}    

main()
{
unsigned long long int a;
unsigned long long int b;
unsigned long long int c;
unsigned int n;

//a=1;  b=1;    c=1;    n=1;
for(n=2; n<100; n++)
{
printf("\nn=%d",n);
    for(c=1; c<500; c++)
    {
        printf("\ntrying now c=%d and n=%d",c,n);       
        for(b=1; b<500; b++)
        {
            if (quadtest(a,b,c,n)) break;
            //printf("\nb=%d, n=%d",b,n);

        }
        for(a=1; a<500; a++)
        {
            if (quadtest(a,b,c,n)) break;
            //printf("\na=%d, n=%d",a,n);   
        }
    }
    printf("\nthe right values to prove fermats theory wrong are n=%d,c=%d,b=%d,a=%d",n,c,b,a);
}       

} 
```

编译后，我得到“尝试c =随机数，n = 0。n由于某种原因总是等于0，即使它从来不应该是0。

我也得到类似“证明费马理论错误的正确值是n = 99，c = 500，b = 0，a = 500”

再一次，a、b、c 或 n 都不应该为 0。不确定问题出在哪里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:28:38.317

您的代码有两个明显的问题：

您定义了几个变量，每个变量都被初始化，除了`a`. `a`您使用未初始化的调用函数。这是未定义的行为，可以解释您的问题。

其次，您在`printf`. `%d`用于`int`；`%llu`是为`unsigned long long`。使用错误的说明符会导致输出不正确的值。

# java - 使用 Java 数组获取最小值和最大值

> ID：15327401
> 
> 赞同：1
> 
> 时间：2013-03-10T20:47:48.333
> 
> 标签：java, arrays, max, min

感谢您的帮助。

这是作业：

> 计算机技术讲师有一个 10 名学生的小班。教师通过管理 2 次期中考试和期末考试来评估学生在课堂上的表现。编写一个程序，提示教师输入期中 1 的 10 个等级，并将这些数字存储在一个数组中。接下来提示 10 年级的期中 2 并将这些数字存储在不同的数组中。接下来提示期末考试的 10 个等级，并将它们存储在不同的数组中。接下来将 midterm1 到 midterm2 添加到 Final 并将总数存储在不同的数组中。 **接下来，扫描具有总计的数组并确定最低成绩和最高成绩。将最低等级和最高等级告知教师。**

这两个粗体短语是我遇到问题的地方。除了最低等级和最高等级外，一切正常。这是它告诉我的，在我只输入了 65 到 100 之间的数字之后：

> 最高考试成绩为：276 最低考试成绩为：249

这是我的代码：

```
import java.util.Scanner;

public class Arrays {
    public static void main(String[] args) {
        // Create a scanner
        Scanner input = new Scanner(System.in);
// Prompt for the 1st mid term
    int [] midTerm1 = new int[10];
    int [] midTerm2 = new int[10];
    int [] finalExam = new int[10];
    int [] grades = new int[10];

    for (int i = 0; i < midTerm1.length; i++){
        System.out.println("Enter the 10 Mid Term 1 grades: ");
        midTerm1[i] = input.nextInt();
    }

    // Prompt for the 2nd mid term

    for (int i = 0; i < midTerm2.length; i++){
        System.out.println("Enter the 10 Mid Term 2 grades: ");
        midTerm2[i] = input.nextInt();
    }

    // Prompt for Final grades

    for (int i = 0; i < finalExam.length; i++){
        System.out.println("Please enter a Final Exam grade: ");
        finalExam[i] = input.nextInt();
    }

    for (int i = 0; i < grades.length; i++){
        grades[i] = (midTerm1[i] + midTerm2[i] + finalExam[i]);
    }

    int minGrade = grades[0];
    int maxGrade = grades[0];

    for (int i = 0; i < grades.length; i++)

    {
    if (minGrade > grades[i])
      minGrade = grades[i];
    if (maxGrade < grades[i])
      maxGrade = grades[i];

    }

    System.out.print("The highest test score is: " + maxGrade);
    System.out.print("The lowest test score is: " + minGrade);

}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T20:49:19.503

编辑：

```
grades[i] = (midTerm1[i] + midTerm2[i] + finalExam[i]); 
```

您的代码实际上可能是正确的。由于您将三个测试分数相加，因此期望分数不会介于 65 和 100 之间，而是介于 195 和 300 之间。

如果您想要一个介于 65 和 100 之间的数字，则需要除以 3：

```
grades[i] = (midTerm1[i] + midTerm2[i] + finalExam[i]) / 3; 
```

或者找到其他方法来*规范*成绩。例如，如果期末考试是成绩的 50%，那么您可以：

```
grades[i] = (25 * midTerm1[i] + 25 * midTerm2[i] + 50 * finalExam[i]) / 100; 
```

但是，您当前的解决方案实际上可能是正确的解决方案。

# tween - 关于如何在 CreateJS 中使用 Ticker 控制补间的示例

> ID：15327403
> 
> 赞同：0
> 
> 时间：2013-03-10T20:47:56.657
> 
> 标签：tween, easeljs, ticker, createjs

我正在使用[CreateJS](http://www.createjs.com/#!/CreateJS)，想知道这里是否有人有使用 Ticker 对象控制补间的示例。我试图让精灵遵循由航点定义的路径，但我不想按时间控制每个补间（在航点之间）。我想在 Ticker 对象控制的每个航点之间平稳移动。我尝试了这个似乎根本不起作用的代码。

```
var index = 0;

function move(){
    index++;
    if (index < path.length) {
        createjs.Tween.get(person)
        .to({x:gridSize * path[index][0] - pathOffset,y:gridSize * path[index][1] - pathOffset})
        .call(move);
    }
}
move();

createjs.Ticker.setFPS(30);
createjs.Ticker.addEventListener("tick", function(event){
    createjs.Tween.tick(1);
    stage.update();
}); 
```

这段代码似乎只在航路点之间跳转，根本没有补间。任何想法我可能做错了什么或任何可能有帮助的代码/教程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T00:12:03.817

您需要在补间中添加一个持续时间（以毫秒为单位），否则它将默认为 0，这将导致“跳跃”，例如：`500`半秒

```
instead of: .to({x:..., y:...})
use:        .to({x:..., y:...},500) 
```

第二件事：你不需要调用`createjs.Tween.tick(1);`它通常由 Tween 类自动调用。

这里有一些帮助和一些小例子：[http ://www.createjs.com/Docs/TweenJS/classes/Tween.html](http://www.createjs.com/Docs/TweenJS/classes/Tween.html)

高级示例： [https ://github.com/CreateJS/TweenJS/tree/master/examples](https://github.com/CreateJS/TweenJS/tree/master/examples)

# css - 轮廓和边框左右移动

> ID：15327407
> 
> 赞同：1
> 
> 时间：2013-03-10T20:48:12.317
> 
> 标签：css, border

由于某种原因，我的轮廓和边框似乎向下和向左移动。我用代码做了一个 JSFiddle，这样你就可以看到哪里出了问题。

***( [http://jsfiddle.net/FHB4j/](http://jsfiddle.net/FHB4j/) )***

这张图片就是它应该看起来的样子。我在我的设计中制作了另一个相同的元素，并且它的工作原理。虽然在这里使用相同的 EXACT 方法时它不起作用？它不会犯，因为我一定犯了一个愚蠢的错误。

**非常感谢提前！**

![在此处输入图像描述](../Images/368c19fce613e54cafa7233ab234e204.png)

> *我的 CSS*

```
 .standard-content-module {
    width: 414px;
    overflow:hidden;
  }
  .standard-content-module header {
    width: 414px;
    height: 48px;
    background: #cc9900;
  }
  .standard-content-module p {}
  .standard-content-module-content_container {
    background: #cccccc;
    border: 5px #ffcc00 solid;
    outline: 10px #cccccc solid;
    width: 384px;
    height: 100px;
    margin-top: 17px;
  }
  .standard-content-module-content_container p {} 
```

> *我的 HTML*

```
<div class="standard-content-module">
    <header><p>Module Title</p></header>
    <div class="standard-content-module-content_container">
        <p>123</p>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T20:51:59.030

设置 .standard-content-module 溢出可见（或将其删除）

```
.standard-content-module {
      width: 414px;
      overflow:visible;
  } 
```

[演示视图](http://jsfiddle.net/FHB4j/1/)

# java - 詹金斯插件的类路径

> ID：15327409
> 
> 赞同：4
> 
> 时间：2013-03-10T20:48:29.817
> 
> 标签：java, jenkins

我有一个安装了 openid 插件的詹金斯。我尝试通过 openid 进行身份验证，但收到一个抱怨`java.lang.NoClassDefFoundError: org/openid4java/util/OpenID4JavaDOMParser`.

缺少的类包含在位于“plugins/openid/WEB-INF/lib/”的 jar 中。

为什么 Jenkins 无法加载该类？

任何想法如何调试？（除了 NoClassDefFoundError 之外，日志文件没有提供更多信息。）

更新：将 jar 符号链接到“war/WEB-INF/lib”后，jenkins 能够访问该类。似乎插件中的 jar 被简单地忽略了，但根据[文档](https://wiki.jenkins-ci.org/display/JENKINS/Plugin+Structure)，它们应该是可访问的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-26T17:57:53.583

这取决于试图加载类的类加载器，如果它被某个库初始化或发现它可能使用 Thread 类加载器而不是你的插件类加载器，这通常是一个`ClassicPluginStrategy$AntClassLoader2`.

您可以选择传递类加载器或直接创建实例。我对 jax-rs 有同样的问题，并以这种方式修复了它。

[https://github.com/carlossg/KubernetesAPIJavaClient/blob/c6082e3/src/main/java/com/github/kubernetes/java/client/v2/RestFactory.java#L66](https://github.com/carlossg/KubernetesAPIJavaClient/blob/c6082e3/src/main/java/com/github/kubernetes/java/client/v2/RestFactory.java#L66)

# gtk - GTK ListView 有多个对象？

> ID：15327411
> 
> 赞同：1
> 
> 时间：2013-03-10T20:48:39.630
> 
> 标签：gtk, pygtk

如何在 GTK 中创建包含其他对象（如图像、链接等）的列表视图？我的意思是，就像这些 Android ListViews：

[http://www.vogella.com/articles/AndroidListView/images/listview_contextual10.png](http://www.vogella.com/articles/AndroidListView/images/listview_contextual10.png)

我想要的是：

[http://pic002.cnblogs.com/images/2012/372551/2012021011374176.jpg](http://pic002.cnblogs.com/images/2012/372551/2012021011374176.jpg)

我怎样才能在 GTK 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T01:20:18.367

最简单的方法是创建一个自定义小部件，以您想要的方式布置文本和图像，然后将其放入 a`GtkVBox`并将其`GtkVBox`放入`GtkScrolledWindow`

这真的不是一个简单的方法`GtkTreeView`

# java - 从Java中的构造函数调用抽象方法可以吗？

> ID：15327417
> 
> 赞同：26
> 
> 时间：2013-03-10T20:48:52.377
> 
> 标签：java, methods, constructor, virtual, abstract

假设我有一个实现 Runnable 接口的抽象基类。

```
public abstract class Base implements Runnable {

  protected int param;

  public Base(final int param) {
      System.out.println("Base constructor");
      this.param = param;
      // I'm using this param here
      new Thread(this).start();
      System.out.println("Derivative thread created with param " + param);
  }

  @Override
  abstract public void run();
} 
```

这是少数派生类之一。

```
public class Derivative extends Base {

  public Derivative(final int param) {
      super(param);
  }

  @Override
  public void run() {
      System.out.println("Derivative is running with param " + param);
  }

  public static void main(String[] args) {
      Derivative thread = new Derivative(1);
  }

} 
```

关键是我希望我的 Base 类做一些一般的事情，而不是每次都复制它。实际上，它运行良好，输出始终相同：

基础构造函数 使用参数 1 创建的衍生线程 衍生线程使用参数 1 运行

但是在 JAVA 中启动一个线程调用构造函数中的抽象方法是否安全？因为，据我所知，在大多数情况下，在 C++ 和 C# 中它是不安全的。谢谢！

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-10T21:07:57.770

这段代码演示了为什么你不应该*从*构造函数中调用抽象方法或任何其他可覆盖的方法：

```
abstract class Super {
    Super() {
        doSubStuff();
    }
    abstract void doSubStuff();
}

class Sub extends Super {
    String s = "Hello world";

    void doSubStuff() {
        System.out.println(s);
    }
}

public static void main(String[] args) {
    new Sub();
} 
```

运行时，将打印`null`. 这意味着构造函数中唯一的“安全”方法是私有和/或最终方法。

另一方面，您的代码实际上并没有从构造函数中调用抽象方法。相反，您将未初始化的对象传递给另一个线程进行处理，这更糟糕，因为您正在启动的线程可能被赋予优先级并在您`Base`完成初始化之前执行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T20:59:31.500

这不是一个好主意，因为在调用 run() 时，可能尚未初始化 Derivative 对象。如果 run() 依赖于 Derivative 中的任何状态，它可能会失败。

在您的简单情况下，它可以工作。但是子类没有意义。你可以简单地

```
public Base(final int param, Runnable action) {

  new Thread(action).start(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-10T20:59:22.793

从构造函数调用抽象方法是一种非常糟糕的做法。从构造函数调用的方法应该始终是私有的或最终的，以防止被覆盖。

[在此处](https://stackoverflow.com/questions/3404301/whats-wrong-with-overridable-method-calls-in-constructors)查看此问题的链接

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-10T23:18:58.563

传递`this`出构造函数被称为“让`this`构造函数逃脱”，并且会导致一些特别讨厌和奇怪的错误，因为对象可能处于不一致的状态。

当`this`传递给另一个线程时尤其如此，如本例所示。由于 JVM 有权在线程中重新排序语句，您可能会发生未定义的行为/状态。

# c - 当传递给没有参数声明的函数时，参数在哪里

> ID：15327418
> 
> 赞同：1
> 
> 时间：2013-03-10T20:48:55.850
> 
> 标签：c

代码 ：

```
foo()
{
}
int main()
{
   int a=20;
   a = foo(20);
   printf("\n\n\t A : %d",a); // will print zero.
} 
```

问题 ：

1.  您可能会注意到 foo() 没有返回类型。它被认为是'int'，为什么？为什么这个“隐式 int”规则？为什么 C 的设计者如此喜欢'int'？

2.  foo() 没有参数声明，它表示它可以接受可变数量的参数。那么传递的参数到哪里去了？例如 foo(20) 20 去哪儿了？

3.  在上面的例子中 printf 打印为零，为什么？

* * *

现在，考虑：

```
foo()
{
}
int main()
{
   int a=20;
   a = foo(a);
   printf("\n\n\t A : %d",a); // It'll print 20\. 
} 
```

*   现在 printf 打印 20 为什么不像之前那样打印 0 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T20:55:25.003

1.  据我了解，这是原始 C 规范中的历史事件。它仍然在规范中，如果你不声明返回类型，那么它就是`int`. 这并不意味着你应该利用它。在我的书中，这种风格很糟糕。

2.  阅读本文：[使用 C void 参数“void foo(void)”还是不使用“void foo()”更好？](https://stackoverflow.com/questions/693788/c-void-arguments)

3.  您正在观察的是未定义的行为，这是您将返回值用于不返回任何内容的函数时所得到的。

# android - 从 android 配置中读取 gradle.properties 值

> ID：15327421
> 
> 赞同：1
> 
> 时间：2013-03-10T20:49:22.217
> 
> 标签：android, gradle

我正在使用下面的代码将 Jenkins BUILD_NUMBER 放入 Build Config 对象中。

我希望能够从 gradle.properties 中默认这个值，但我一直遇到困难。从文档来看，变量似乎只是相互覆盖，但是从这个android conext内部我无法访问任何变量......所以我必须使用System.getenv（）......

```
 android{
             ....

    defaultConfig{
        ext.env = System.getenv()
        ext.buildNumber = env.BUILD_NUMBER?.toInteger()
        ext.buildId = env.BUILD_ID
        println "Build Number: $buildNumber"
        println "Build Id: $buildId"
        buildConfig "public final static int BUILD_NUMBER = $buildNumber;"
        buildConfig 'public final static String BUILD_ID = "' + ext.buildId + '";'
    }
       } 
```

更新：在玩了更多之后，我意识到在 android{} 中我可以访问在 build.gradle 中定义的变量，但不能从 gradle.properties 访问。

也许有一个技巧可以达到这个范围，但我还没有找到它。

例如：如果我的 gradle.properties "foo=bar" 中有一个变量，这是我的 build.gradle

```
def foo2="bar2"

println foo2 // works
println foo // works

android{

     println foo2 // works
     println foo // works

     productFlavors {

          println foo2 // works
          println foo // works
          tablet{
              println foo2 // works
              println foo // blows up 

          }
     }

} 
```

# c# - C#中的结构，队列，带有x，y，时间值的列表？计算它们的平均速度

> ID：15327422
> 
> 赞同：0
> 
> 时间：2013-03-10T20:49:25.383
> 
> 标签：c#, data-structures

我最初有一个结构来在 C# 中存储 x、y 和时间坐标，例如

```
 struct handCoordinate {
         internal double x; 
         internal double y; 
         internal double time; 
  } 
```

并计划使用队列来存储这些数据。我需要计算该数据的平均速度并将下一项与上一项进行比较。使用队列来比较每个 handCoordinate 项目然后使用列表是否有意义？这是一个例子：

```
 handCoordinate(4.0, 0.01, 1.3)
 handCoordinate(-3.0, 0.02, 1.8) 
```

换句话说，什么数据结构最适合访问这些元素？谢谢！（如果需要，我可以澄清更多）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:52:02.060

[SortedList比](http://msdn.microsoft.com/en-us/library/ms132319.aspx)[Queue](http://msdn.microsoft.com/en-us/library/7977ey2c.aspx)更有意义，因为您将对其进行迭代以计算平均值。使用队列，您只能保证项目以与推送时相同的顺序弹出。使用时间作为键的排序列表将保持项目按时间顺序排列，而不管它们是按什么顺序插入的。排序列表也不需要您删除项目以使用它们，如果需要其他计算而不需要额外的数据结构，则可以更轻松地重用这些项目。

```
public struct HandCoordinate
{
     public HandCoordinate(double x, double y, double time)
     {
         this.X = x;
         this.Y = y;
         this.Time= time;
     }

     public readonly double X;
     public readonly double Y;
     public readonly double Time;
}

...

private static double Velocity(HandCoordinate p1, HandCoordinate p2)
{
     var time = p2.Time - p1.Time;
     if (time <= 0)
     {
         throw new ArgumentException("Duplicate measurement");
     }

     var dx = p2.X - p1.X;
     var dy = p2.Y - p1.Y;
     var distance = Math.Sqrt(dx*dx + dy*dy);

     // note the possibility for overflow if your times are very close together.
     // You might need to use logarithms for the calculation.
     return distance/time; 
}

...

var points = new SortedList<double,HandCoordinate>();
points.Add(1.0, new HandCoordinate(1.0, 1.0, 1.0));
points.Add(1.1, new HandCoordinate(1.0, 2.0, 1.1));
..

var velocities = points.Values
                       .Skip(1)
                       // note: because of the skip i in the following is the offset
                       // from the second element and can be used directly to refer
                       // to the previous element
                       .Select((p,i) => Velocity(points.Values[i],p))
                       .ToList(); 
```

# python - Python 凯撒密码

> ID：15327423
> 
> 赞同：1
> 
> 时间：2013-03-10T20:49:33.903
> 
> 标签：python, dictionary

我正在尝试制作一个可以将凯撒密码应用于一封信的字典。我需要将它放在一个上下的字典中，但无法弄清楚如何将两者都放入一个字典中。

```
import string

def Coder(shift):

    alpha = string.ascii_lowercase
    ALPHA = string.ascii_uppercase
    if shift in range(0,26):

        return dict(zip(ALPHA, ALPHA[shift:] + ALPHA[0:shift])), dict(zip(alpha, alpha[shift:] + alpha[0:shift])) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T20:57:56.180

如果您是编程新手，请避免尝试“在一条线上完成所有操作”。

string.index( substring ) 查找子字符串在字符串中的位置。

a % b 取 a 除以 b 的余数。

string.upper() 返回字符串的大写版本。

知道了这一点，你应该能够理解这个程序中的每一行：

```
import string
translation = {}
shift = 5
alphabet = string.ascii_lowercase
for letter in alphabet:
    position = alphabet.index( letter )
    new_position = (position + shift) % len( alphabet )
    translation[ letter ] = alphabet[ new_position ]
    translation[ letter.upper() ] = alphabet[ new_position ].upper() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T21:04:34.157

您可以使用`dict.update()`：

首先创建一个大写字母字典，然后用一个小写字母字典更新该字典：

```
In [8]: from string import *

In [9]: al=ascii_lowercase

In [10]: au=ascii_uppercase

In [11]: for shift in range(2):
    dic1=dict(zip(au, au[shift:] + au[0:shift]))
    dic1.update(dict(zip(al, al[shift:] + al[0:shift])))
    print dic1
   ....:     
{'A': 'A', 'C': 'C', 'B': 'B', 'E': 'E', 'D': 'D', 'G': 'G', 'F': 'F', 'I': 'I', 'H': 'H', 'K': 'K', 'J': 'J', 'M': 'M', 'L': 'L', 'O': 'O', 'N': 'N', 'Q': 'Q', 'P': 'P', 'S': 'S', 'R': 'R', 'U': 'U', 'T': 'T', 'W': 'W', 'V': 'V', 'Y': 'Y', 'X': 'X', 'Z': 'Z', 'a': 'a', 'c': 'c', 'b': 'b', 'e': 'e', 'd': 'd', 'g': 'g', 'f': 'f', 'i': 'i', 'h': 'h', 'k': 'k', 'j': 'j', 'm': 'm', 'l': 'l', 'o': 'o', 'n': 'n', 'q': 'q', 'p': 'p', 's': 's', 'r': 'r', 'u': 'u', 't': 't', 'w': 'w', 'v': 'v', 'y': 'y', 'x': 'x', 'z': 'z'}
{'A': 'B', 'C': 'D', 'B': 'C', 'E': 'F', 'D': 'E', 'G': 'H', 'F': 'G', 'I': 'J', 'H': 'I', 'K': 'L', 'J': 'K', 'M': 'N', 'L': 'M', 'O': 'P', 'N': 'O', 'Q': 'R', 'P': 'Q', 'S': 'T', 'R': 'S', 'U': 'V', 'T': 'U', 'W': 'X', 'V': 'W', 'Y': 'Z', 'X': 'Y', 'Z': 'A', 'a': 'b', 'c': 'd', 'b': 'c', 'e': 'f', 'd': 'e', 'g': 'h', 'f': 'g', 'i': 'j', 'h': 'i', 'k': 'l', 'j': 'k', 'm': 'n', 'l': 'm', 'o': 'p', 'n': 'o', 'q': 'r', 'p': 'q', 's': 't', 'r': 's', 'u': 'v', 't': 'u', 'w': 'x', 'v': 'w', 'y': 'z', 'x': 'y', 'z': 'a'} 
```

或者你也可以`str.translate()`使用`string.maketrans`：

```
for shift in xrange(4):
    t=maketrans(au+al,au[shift:]+au[:shift]+al[shift:]+al[:shift])
    print "abcxyzABCXYZ".translate(t)
   ....:     
abcxyzABCXYZ
bcdyzaBCDYZA
cdezabCDEZAB
defabcDEFABC 
```

> S.translate(table [,deletechars]) -> 字符串
> 
> 返回字符串 S 的副本，其中删除可选参数 deletechars 中出现的所有字符，其余字符已通过给定转换表映射，该转换表必须是长度为 256 或 None 的字符串。如果 table 参数为 None，则不应用任何转换，并且该操作只是删除 deletechars 中的字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T22:13:16.920

像这样的东西：

```
import string

def Coder(shift):
    alpha = string.ascii_lowercase
    ALPHA = string.ascii_uppercase
    if 0 <= shift < 26:
        unshifted_letters = ALPHA + alpha
        shifted_letters = ALPHA[shift:] + ALPHA[:shift] + alpha[shift:] + alpha[:shift]
        return dict(zip(unshifted_letters, shifted_letters)) 
```

但正如其他人所说，更好的解决方案是[`encode('rot13')`](http://docs.python.org/2/library/codecs.html)和[`string.maketrans`](http://docs.python.org/2/library/string.html#string.maketrans)。特别是：“rot_13 rot13 Unicode string 返回操作数的凯撒密码加密”。

# c# - 使用 C# 将 Excel 工作表导入 SQL Server

> ID：15327429
> 
> 赞同：2
> 
> 时间：2013-03-10T20:49:56.213
> 
> 标签：c#, sql-server

我正在编写一个简单的程序来将 Excel 工作表导入我的数据库，但我遇到了以下错误：

> *找不到可安装的 ISAM*

我不确定这意味着什么，经过数小时的搜索，我转向了这么多不同的主题。有很多关于 Jet 和 ACE 的讨论，我不确定它们有什么区别，但这里是概要：我有一个名为 test 或 test1 的 excel 文件，我只想导入文件中的第一张表。到目前为止，这是我的源代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using System.Data.OleDb;
using System.Data.Common;
using System.Data.SqlClient;

namespace WindowsFormsApplication2
{

    public partial class Form1 : Form
    {
        string filePath = null;
        public Form1()
        {
            InitializeComponent();
        }

        //Method to check database connection
        private void button1_Click(object sender, EventArgs e)
        {
            string connetionString = null;
            SqlConnection cnn;
            connetionString = "Data Source=Zach-PC;Initial Catalog=master;Integrated Security=SSPI;";
            cnn = new SqlConnection(connetionString);
            try
            {
                cnn.Open();
                MessageBox.Show("Connection Open ! ");
                cnn.Close();
            }
            catch (Exception ex)
            {
                MessageBox.Show("Can not open connection ! ");
            }
        }

        //Method to select a file
        private void button2_Click(object sender, EventArgs e)
        {
            string excelConnectionString = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:/Users/Zach/Documents/test1.xls;Extended Properties=Excel 12.0,HDR=Yes;IMEX=1";

            // Create Connection to Excel Workbook
            using (OleDbConnection connection =
                         new OleDbConnection(excelConnectionString))
            {
                OleDbCommand command = new OleDbCommand
                        ("Select * FROM [Sheet1$]", connection);

                connection.Open(); //HERE IS WHERE THE ERROR IS

                // Create DbDataReader to Data Worksheet
                using (DbDataReader dr = command.ExecuteReader())
                {
                    // SQL Server Connection String
                    string sqlConnectionString = "Data Source=Zach-PC;Initial Catalog=master;Integrated Security=True";

                    // Bulk Copy to SQL Server
                    using (SqlBulkCopy bulkCopy =
                               new SqlBulkCopy(sqlConnectionString))
                    {
                        bulkCopy.DestinationTableName = "Table";
                        bulkCopy.WriteToServer(dr);
                        MessageBox.Show("Data Exoprted To Sql Server Succefully");
                    }
                }

            }
        }
    }
} 
```

我在正确的庄园里接近这个吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T22:26:21.120

您需要将`Extended Properties`部分连接字符串用引号括起来：

```
//                                                                                                                                 here                     and here
//  -->                                                                                                                              v                          v
string excelConnectionString = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:/Users/Zach/Documents/test1.xls;Extended Properties=""Excel 12.0,HDR=Yes;IMEX=1"""; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T21:27:23.197

您的计算机上可能未安装 Office oledb 驱动程序。你应该从[微软网站](http://www.google.be/url?sa=t&rct=j&q=microsoft%20ole%20db%20provider%20excel%202010&source=web&cd=1&ved=0CDUQFjAA&url=http%3A%2F%2Fwww.microsoft.com%2Fen-us%2Fdownload%2Fdetails.aspx%3Fid%3D13255&ei=ePg8Ue3xO9SM7AaciYGACg&usg=AFQjCNFbrcuQDL4NFEfjaFztP_Fi8RGgVA&sig2=JWac69OYszPy05wqkT4yvA&bvm=bv.43287494,d.ZGU)下载它。安装后，您的代码应该运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T22:11:16.230

如果您正在阅读 office 2007（或更新版本）的 excel 文件，那么我建议使用开源库 Epplus 来阅读 excel 文件。它是纯粹的 .NET 库，您不会依赖 oledb 驱动程序。

[epplus](http://epplus.codeplex.com/)

EPPlus 是一个 .net 库，它使用 Open Office Xml 格式 (xlsx) 读取和写入 Excel 2007/2010 文件。

您可以使用此库轻松地将 excel 文件读入数据表。看看这个线程

[如何将流excel文件转换为数据表C#？](https://stackoverflow.com/questions/11239805/how-convert-stream-excel-file-to-datatable-c)

# c - 编写一个基本的多线程程序

> ID：15327430
> 
> 赞同：1
> 
> 时间：2013-03-10T20:49:58.287
> 
> 标签：c, multithreading, pthreads

我想创建 2 个线程，一个做最大值，一个给出在命令行中输入的数字列表的平均值。

```
#include <stdio.h>
#include <pthread.h>
#include <stdlib.h>
#include <limits.h>

void * thread1(int length, int array[] )
{

int ii = 0;
int smallest_value = INT_MAX;
        for (; ii < length; ++ii)
        {
                if (array[ii] < smallest_value)
                {
                        smallest_value = array[ii];
                }
        }
 printf("smallest is: %d\n", smallest_value);

}

void * thread2()
{

  printf("\n");

}

int main()
{
  int average;
  int min;
  int max;

  int how_many;
  int i;
  int status;
  pthread_t tid1,tid2;

  printf("How many numbers?: ");
  scanf("%d",&how_many);
  int ar[how_many];
  printf("Enter the list of numbers: ");
  for (i=0;i<how_many;i++){
  scanf("%d",&ar[i]);
  }

//for(i=0;i<how_many;i++)
//printf("%d\n",ar[i]);

        pthread_create(&tid1,NULL,thread1(how_many,ar),NULL);
        pthread_create(&tid2,NULL,thread2,NULL);
        pthread_join(tid1,NULL);
        pthread_join(tid2,NULL);
        return 0;
  exit(0);
} 
```

我刚刚做了第一个线程，即打印出最小值。编号，但编译时出现以下错误：

```
How many numbers?: 3
Enter the list of numbers: 1
2
3
Smallest: 1
Segmentation fault 
```

我应该如何继续并修复该段。过错？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:22:25.400

您不能像在 pthread_create 中那样传递参数。

创建如下结构：

```
struct args_t
{
  int length;
  int * array;
}; 
```

然后用你的数组和长度初始化一个结构。

```
args_t *a = (args_t*)malloc(sizeof(args_t));
//initialize the array directly from your inputs 
```

然后做

```
pthread_create(&tid1,NULL,thread1,(void*)a); 
```

然后只需将参数转换回 args_t。

希望有帮助。

# java - 如何在 Android 主从应用程序中绘制图像？

> ID：15327432
> 
> 赞同：-3
> 
> 时间：2013-03-10T20:50:12.763
> 
> 标签：java, android

我是android新手，所以请耐心等待。昨天我启动了一个 Android Master Detail 项目（默认设置），并开始环顾四周。我在 com.myname.appname.ItemDetailFragment 旁边找到了几行代码，它们看起来像是在更改辅助窗口中的文本。相关代码是

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
        View rootView = inflater.inflate(R.layout.fragment_item_detail,
                container, false);

        // Show the dummy content as text in a TextView.
        if (mItem != null) {
            ((TextView) rootView.findViewById(R.id.item_detail))
                    .setText(mItem.descrip);
        }
        return rootView;
    } 
```

我想更改此代码，以便在辅助活动上绘制图像而不是显示文本。有什么建议么

此外，由于我是 android 新手，任何关于主从应用程序编程、活动、绘图图像或简单 Android 的好的教程都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:09:44.853

您需要在 Layout 中声明 ImageView 视图，然后使用 setImageDrawable 或 setImageBitmap 方法在该视图上设置 Image。

使用 ImageView 的教程可以在这里找到： [http ://www.mkyong.com/android/android-imageview-example/](http://www.mkyong.com/android/android-imageview-example/)

实际上，本教程解释了如何使用 ImageView 类。

特别针对您的情况，您需要在“R.layout.fragment_item_detail”xml 文件下找到 TextView。声明 ImageView 的最佳位置可能是 TextView 所在的位置，因此您可以将 TextView 替换为 ImageView。

然后在您的代码中，您将不得不像 TextView 一样膨胀您的 ImageView。

所以它应该看起来像这样：

```
 ImageView iv = ((ImageView) rootView.findViewById(R.id.item_image))//you will have to use item_image as the id in your xml 
```

使用适当的方法在 ImageView 对象上设置图像/图标。这将在教程中解释。

# algorithm - 递归算法中的气压计操作

> ID：15327434
> 
> 赞同：2
> 
> 时间：2013-03-10T20:50:25.120
> 
> 标签：algorithm, complexity-theory, time-complexity

我必须使用称为气压计操作的方法找到合并排序的指令计数。

**什么是气压计操作？**

*   选择了“气压计指令”
*   计数 = 气压计指令执行的次数。
*   搜索算法：气压计指令（x == L[j]？）。
*   排序算法：气压计指令（L[i] <= L[j]?）。

例如：-

```
 for(int i=0;i < n;i++)
       A[i] = i + 1 
```

**气压计操作 = +**在循环体中

**计数（+）= n**

所以现在合并排序的问题是它是递归算法，我不知道如何选择一个特定的指令，以便我可以计算特定指令执行的次数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:41:40.863

感谢**@aphex**和**@SGM1**向我展示了正确的方向。我想问题的解决方案如下：

我使用了与**aphex**相同的代码。但解决方案的唯一问题是**aphex**忘记在最坏的情况下维护它。所以根据我的气压计操作/说明必须是

`first(left) <= first(right)`

因为这是进行实际比较的地方。晴雨表运算符将是“<=”进行实际比较的地方。并且该运算符通过两种划分列表的方法递归调用 (n/2) 次，然后主合并操作恰好发生 (n-1) 次。因此在求解求和方程后，它给出 (nlog(n)+c)

来自 Wiki 的代码，**aphex稍作修改**

```
function merge_sort(list m, var count)
    if(length(m))>0
        count++;

// if list size is 0 (empty) or 1, consider it sorted and return it
// (using less than or equal prevents infinite recursion for a zero length m)
if length(m) <= 1
    return m

// else list size is > 1, so split the list into two sublists
var list left, right
var integer middle = length(m) / 2
for each x in m before middle
     add x to left
for each x in m after or equal middle
     add x to right
// recursively call merge_sort() to further split each sublist
// until sublist size is 1
left = merge_sort(left,count)
right = merge_sort(right,count)
// merge the sublists returned from prior calls to merge_sort()
// and return the resulting merged sublist
return merge(left, right)

function merge(left, right)
var list result
while length(left) > 0 or length(right) > 0
    if length(left) > 0 and length(right) > 0
        if first(left) <= first(right) // My Barometer Operation
            append first(left) to result
            left = rest(left)
        else
            append first(right) to result
            right = rest(right)
    else if length(left) > 0
        append first(left) to result
        left = rest(left)
    else if length(right) > 0
        append first(right) to result
        right = rest(right)
end while
return result 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T22:00:38.257

让我们使用来自[Wikipedia](http://en.wikipedia.org/wiki/Merge_sort)的代码。您需要依靠拆分部分。拆分是在`merge_sort(list m)`.. 中进行的。您需要将计数器添加为输入参数（`var count`），见下文。计数器必须是`count=0`。每次调用方法和 list`lenght>0`时，都会将计数器增加 1。

```
function merge_sort(list m, var count)
      // Count here
    if(length(m))>0
            count++;

    // if list size is 0 (empty) or 1, consider it sorted and return it
    // (using less than or equal prevents infinite recursion for a zero length m)
    if length(m) <= 1
        return m

    // else list size is > 1, so split the list into two sublists
    var list left, right
    var integer middle = length(m) / 2
    for each x in m before middle
         add x to left
    for each x in m after or equal middle
         add x to right
    // recursively call merge_sort() to further split each sublist
    // until sublist size is 1
    left = merge_sort(left,count)
    right = merge_sort(right,count)
    // merge the sublists returned from prior calls to merge_sort()
    // and return the resulting merged sublist
    return merge(left, right)

function merge(left, right)
    var list result
    while length(left) > 0 or length(right) > 0
        if length(left) > 0 and length(right) > 0
            if first(left) <= first(right)
                append first(left) to result
                left = rest(left)
            else
                append first(right) to result
                right = rest(right)
        else if length(left) > 0
            append first(left) to result
            left = rest(left)
        else if length(right) > 0
            append first(right) to result
            right = rest(right)
    end while
    return result 
```

对于 wikipedia 示例，您需要像这样调用伪代码`merge_sort([38,27,43,3,9,82,10], 0)`。

# c# - 有什么方法可以将 MS Office Smooth Typing 集成到 C# 应用程序中？

> ID：15327435
> 
> 赞同：10
> 
> 时间：2013-03-10T20:50:28.080
> 
> 标签：c#, .net, ms-office, text-cursor

在我看来，MS Office Smooth Typing 是 Office 套件中一个非常创新的功能，我想知道 .NET Framework 中的程序员是否可以使用此功能，特别是 C# 语言。

如果是这样，您能否在答案中发布**使用示例**并**链接到文档**？

谢谢。

通过“流畅的打字”，我指的是打字动画，它使光标在打字过程中滑动。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-30T12:12:11.660

我没有 Office，所以我无法查看该功能，但我需要在不久前摆弄 RichTextBoxes 中的插入符号并决定不值得付出努力。基本上你是靠自己的。.NET 没有辅助函数，但一切都由支持的 Win32 控件处理。您将很难击败已经发生的事情。并且可能最终拦截窗口消息和许多丑陋的代码。

所以我的基本建议是：不要这样做。至少对于像 TextBox 或 RichTextBox 这样的基本表单控件。尝试从 .NET 中远程访问正在运行的办公室可能会更幸运，但这是完全不同的蠕虫。

如果您真的坚持使用 SetCaretPos - 路线，这里有一些代码可以让您启动并运行基本版本，您可以在其中改进：

```
// import the functions (which are part of Win32 API - not .NET)
[DllImport("user32.dll")] static extern bool SetCaretPos(int x, int y);
[DllImport("user32.dll")] static extern Point GetCaretPos(out Point point);

public Form1()
{
    InitializeComponent();

    // target position to animate towards
    Point targetCaretPos; GetCaretPos(out targetCaretPos);

    // richTextBox1 is some RichTextBox that I dragged on the form in the Designer
    richTextBox1.TextChanged += (s, e) =>
        {
            // we need to capture the new position and restore to the old one
            Point temp;
            GetCaretPos(out temp);
            SetCaretPos(targetCaretPos.X, targetCaretPos.Y);
            targetCaretPos = temp;
        };

    // Spawn a new thread that animates toward the new target position.
    Thread t = new Thread(() => 
    {
        Point current = targetCaretPos; // current is the actual position within the current animation
        while (true)
        {
            if (current != targetCaretPos)
            {
                // The "30" is just some number to have a boundary when not animating
                // (e.g. when pressing enter). You can experiment with your own distances..
                if (Math.Abs(current.X - targetCaretPos.X) + Math.Abs(current.Y - targetCaretPos.Y) > 30)
                    current = targetCaretPos; // target too far. Just move there immediately
                else
                {
                    current.X += Math.Sign(targetCaretPos.X - current.X);
                    current.Y += Math.Sign(targetCaretPos.Y - current.Y);
                }

                // you need to invoke SetCaretPos on the thread which created the control!
                richTextBox1.Invoke((Action)(() => SetCaretPos(current.X, current.Y)));
            }
            // 7 is just some number I liked. The more, the slower.
            Thread.Sleep(7);
        }
    });
    t.IsBackground = true; // The animation thread won't prevent the application from exiting.
    t.Start();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T20:34:09.357

将 SetCaretPos 与您自己的动画计时功能一起使用。创建一个新线程，根据先前的位置和新的所需位置插入插入符号的位置。

# python - 了解祖先路径 Google App Engine

> ID：15327437
> 
> 赞同：0
> 
> 时间：2013-03-10T20:50:51.190
> 
> 标签：python, google-app-engine

我正在查看一些 Python 代码并尝试使用我认为的祖先路径。

```
def parent_key(name = 'default'):
    return ndb.Key('MyEntity', name) 
```

我们所拥有的任何地方

```
 MyEntity.get_by_id(someId, parent = parent_key()) 
```

我试图找到文档或解释为什么这样做，因为这些实体在关系意义上没有真正的“父”。

我已经阅读了一些关于 GAE 文档的内容，但仍然不清楚何时以及何时不这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:14:01.307

通过使实体具有相同的父级，您可以使它们成为同一*实体组*的一部分，这可用于使查询保持一致。通常，数据存储不保证实体可以在保存后直接获取。它*最终*会出现，但这可能需要几秒钟。

*但是，当您执行祖先查询*时，它确实保证了强一致性，这就是为什么文档中的大多数介绍性示例代码都会创建具有相同父级的所有实体。这使得在保存数据后立即获取数据变得更加容易，但它确实将对该实体组的更改限制为大约每秒一次写入。

[文档中的Structuring Data for Strong Consistency](https://developers.google.com/appengine/docs/python/datastore/structuring_for_strong_consistency)一章有更多详细信息。

# c++ - C++ 中的幂变量

> ID：15327439
> 
> 赞同：-1
> 
> 时间：2013-03-10T20:50:53.063
> 
> 标签：c++

我目前正在用 C++ 制作一个二项式分布计算器。目前数学有问题，

```
cout << pow(p,x);  //working (Prints probably to the power of x) 
```

例如，我试过`0.2^5`了，它打印出来`0.00032`的是正确的。

然而：

```
pToN=pow(p,x); 

cout << pToN; 
```

对于它返回的相同功率`0`。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T21:05:12.470

`pow`函数返回`float`or ，`double`所以`pToN`应该声明为`float`or`double`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T20:55:40.783

`pToN`应该是一个浮点数，以便它可以容纳非整数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T20:56:50.650

如果`pToN`是`int`，它将被截断。`pow`返回`double`。所以将声明更改`pToN`为`double pToN;`（或`float`）

# ios - iOS -- 在 codeSense 中为自动合成的属性出现“添加”方法

> ID：15327444
> 
> 赞同：9
> 
> 时间：2013-03-10T20:51:25.457
> 
> 标签：ios, xcode, properties, automatic-properties

我刚刚创建了一个具有以下属性的 iOS 类：

```
@property (nonatomic, strong) NSString* foo;
@property (nonatomic, strong) NSObject* bar;
@property (nonatomic) CGRect fubar; 
```

我没有为这些属性添加任何 @synthesize 或显式 ivars。然后我进入实现文件并开始创建一个方法，如下所示：

```
-(void) add 
```

我将光标留在了“添加”一词的末尾。然后在代码意义上弹出以下方法名称：

```
addBar: (NSSet*) objects
addBarObject: (objectType *) object
addFoo: (NSSet*) objects
addFooObject: (objectType *) object
addFubar: (NSSet*) objects
addFubarObject: (objectType *) object 
```

这些方法是什么？有他们的文档吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T21:29:03.293

这是一个类可以实现的访问器方法，以支持可变对多关系的键值编码，请参阅“键值编码编程指南”中的[可变无序访问器：](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/AccessorConventions.html#//apple_ref/doc/uid/20002174-SW5)

> 为了成为可变无序对多关系的键值编码投诉，您必须实现以下方法：
> 
> `-add<Key>Object:`或`-add<Key>:`。必须至少实施其中一种方法。这些都是类似的`NSMutableSet`方法 `addObject:`。

其他 Key-Value 编码访问器方法也会发生相同的“奇怪”自动完成，例如：

```
- (void)remove...
- (void)intersect...
- (NSUInteger)countOf... 
```

# javascript - Glassbox.js javascript 插件在 JQuery 中不起作用

> ID：15327446
> 
> 赞同：0
> 
> 时间：2013-03-10T20:51:46.210
> 
> 标签：javascript, jquery, html, prototypejs

所以我有以下代码，从 JQuery 上下文调用时 glassLoad() 不起作用。我已将问题隔离到一个特定的行，`myBox.apos('170px', '150px');`这似乎阻止了整个函数的运行，但仅在从 JQuery 调用时。如果我使用标准`onclick="glassLoad();"`，它会完美地运行该函数，但如果我在 JQuery 中包含该函数，它将停止整个 JQuery 函数的运行：

```
 @model IEnumerable<OneEightyWebApp.Models.PropertyDB>
<link href="../../Content/Site.css" rel="stylesheet" type="text/css" media="screen" />
<script src="../../Content/javascripts/glassbox/glassbox.js" type="text/javascript"></script>

<head>

    <title></title>

    <script type="text/javascript">

        function populate() {
            var select = document.getElementById("centres");
            for (var i = 1; i <= 10; i++) {
                var option = document.createElement("option");
                option.value = i;
                option.text = i;
                select.appendChild(option);
            }
        }

        function divGenerator() {
            var div;
            for (var i = 1; i <= document.getElementById("revisions").value; i++) {

                div = document.createElement("div");
                div.className = "class1";
                div.innerHTML = "Space " + i;
                div.style.width = "100px";
                div.style.height = "100px";
                div.style.float = "left";
                document.getElementById("container2").appendChild(div);
            }
        }

        function glassLoad() {

            path_to_root_dir = "../../Content/";
            var myBox = new GlassBox();
            myBox.init('myBox', '128px', '62px', 'hidden');
            myBox.apos('170px', '150px');
        }

    </script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"> </script>
    <script type="text/javascript">
        $(document).ready(function () {
            $("body").on("click", ".class1", function () {
                glassLoad();
                alert("div clicked");
            });
        });

    </script>

</head>

<body>
    <!--
<a href="javascript:myFunc();">popup</a>
-->
    <div id="container1" style="width: auto; height: 50px;">

        <button style="margin: auto; vertical-align: top; float: left; font-size: 16px;" type="button" onclick="divGenerator();">Generate</button>
        @Html.DropDownList("revisions", (List<SelectListItem>)ViewData["revisions"])
    </div>
    <div id="container2" style="margin: 10px; float: left;"></div>

    <div id="myBox">Hello!</div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T22:45:52.683

[Glassbox.js](http://www.glassbox-js.com/#home)似乎不支持 jQuery。它是为与[Prototype](http://prototypejs.org/)一起使用而构建的，Prototype是一个替代框架。因此，您必须改用 Prototype 或找到替代插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T02:53:02.943

使用 PrototypeJS 使其运行

```
<script src="//ajax.googleapis.com/ajax/libs/prototype/1.7.1.0/prototype.js"> </script>
<script type="text/javascript">
    document.observe('dom:loaded',function(){
        $$("body")[0].on('click', ".class1", function () {
            glassLoad();
            alert("div clicked");
        });
    });
</script> 
```

这将在 DOM 加载并使用 CSS 选择器方法`$$()`并选择返回的列表中的第一个元素时触发，然后附加到该元素的 click 事件。

您的 javascript 的其余部分看起来并不依赖于 jQuery 或 Prototype，因此您应该能够将此代码片段交换到您的代码中。

# javascript - 加载时大型 CSS 背景图像会阻止 Javascript

> ID：15327447
> 
> 赞同：5
> 
> 时间：2013-03-10T20:51:52.560
> 
> 标签：javascript, jquery, css, xhtml, facebook-javascript-sdk

从我能够找到的所有内容中，大型 CSS`background-image`不应该阻止 javascript 执行。不幸的是，在 Firefox 和 Chrome 上似乎确实如此。

如果我在 Chrome 上进行硬刷新，我可以看到后台缓慢加载（在慢速连接上），然后一旦完成，我的 JavaScript 就会执行，显示页面的其余内容。

当 DOM 和 Facebook SDK 准备就绪时，我正在使用 jQuery`$(document).ready`和 Facebook 的`window.fbAsyncInit`方法来运行 JavaScript。

我不确定它是否相关，但背景是在 CSS 中设置的：

```
body {
    background: black url(...) no-repeat top center fixed;
    -webkit-background-size: cover;
    background-size: cover;
    background-position: 50% 50%;
} 
```

我已经在使用 CSS 媒体查询来为更小的屏幕分辨率加载更小的图像，并且使背景图像更小并不能解决问题；它只会隐藏症状。

我还应该做些什么来确保背景图像不会阻止 JavaScript 执行？

我的想法是加载一个虚拟背景图像，然后让 JavaScript 附加另一个带有真实背景图像的样式表（以及针对较小屏幕的媒体查询），但这似乎很棘手。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T21:12:06.717

加载背景图像不会阻止 Javascript 运行。原因很可能是加载图像会阻止脚本首先被加载。

浏览器对它们同时针对每个域运行的请求数量有限制，同样，Web 服务器也对它同时处理来自同一用户的请求数量有限制。有时限制低至同时下载一两个。

如果您希望脚本在图像之前加载，请使用脚本在 CSS 中设置背景图像。这样你就知道脚本在图像开始加载之前已经加载：

```
$(document.body).css('background-image', 'url(...)'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T21:01:23.277

因为您正在使用该`$(document).ready()`功能，所以 jQuery 是故意的，等待所有图像等都加载完毕。这是为了防止出现一些问题，例如如果我要调用：

```
$('#div-with-background-image').css('background') 
```

...然后 jQuery 想知道图像是否已加载。

要延迟加载图像，请添加一个`body`类，并且仅在添加该类后才显示图像。这可以像这样完成：

在js中： $(document).ready(function() { $('body').addClass('loaded'); } 在css中： .loaded #div-with-background-image { background-image: url ('...'); }

或者，您可以使用该`$(window).load(function() {...})`方法而不是`$(document).ready`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T21:01:40.640

a) 有一些方法可以减少图像的文件大小，而用户不会注意到图像细节中的任何内容，只需寻找一些可以做到的库或软件。

b）我真的不认为 CSS 是这里的主要问题，我认为你的 javascript 太重了（检查你的开发工具或萤火虫中的执行时间）。

c) 使用 Facebook 等社交媒体连接需要大量工作量时间，您应该考虑不要在头部加载 facebook sdk，而是在正文中加载。

d) 这是 facebook 开发人员关于如何优化社交插件性能的帖子：http: [//developers.facebook.com/blog/post/530/](http://developers.facebook.com/blog/post/530/)

e) 检查一下：[现代浏览器中的非阻塞 javascript 和 css。还需要吗？](https://stackoverflow.com/questions/8197072/non-blocking-javascript-and-css-in-modern-browsers-is-it-still-needed)

# asp.net-mvc - 具有多个表的 ViewModel

> ID：15327449
> 
> 赞同：0
> 
> 时间：2013-03-10T20:52:01.283
> 
> 标签：asp.net-mvc, visual-studio-2010, viewmodel

我是初学者，我想用控制器为我的应用程序做一个视图模型：

```
public class catalogue_produit
{
    [Key]
    public int PdtID { get; set; }

    public string PdtCode { get; set; }
    public string PdtNomCourt { get; set; }
    public string PdtNomLong { get; set; }
    public string PdtTexte { get; set; }
    public int PdtColisage { get; set; }
    public string PdtGencod { get; set; }
    public float PdtTva { get; set; }
    public float PdtTgap { get; set; }
    public string PdtRemplacerPar { get; set; }
    public bool PdtActif { get; set; }
    public bool PdtPau { get; set; }

    [Required]
    public int FournisseurID { get; set; }
    [ForeignKey("FournisseurID")]
        public virtual catalogue_fournisseur catalogue_fournisseur { get; set; }

    [Required]
    public int FamilleID { get; set; }
    [ForeignKey("FamilleID")]
        public virtual catalogue_famille catalogue_famille { get; set; }

    [Required]
    public int CategorieID { get; set; }
    [ForeignKey("CategorieID")]
        public virtual catalogue_categorie catalogue_categorie { get; set; }
}

//Classe gérant les fiches techniques
public class catalogue_fichetechnique
{
    [Key]
    public int FtID { get; set; }

    [Required]
    public int PdtID { get; set; }
    [ForeignKey("PdtID")]
        public virtual catalogue_produit catalogue_produit { get; set; }

    public string FtUrl { get; set; }
    public DateTime FtDate { get; set; }
} 
```

所以我做了一个视图模型：

```
public class ProduitViewModel
{
    public catalogue_produit catalogue_produit { get; set; }
    public catalogue_fichetechnique catalogue_fichetechnique { get; set; }
} 
```

我的控制器：

```
public class ProduitController : Controller
{
    //
    // GET: /Produit/
    public ActionResult Index()
    {
        ProduitViewModel product = new ProduitViewModel();
        return View(product);
    } 
```

索引执行的错误消息：

```
L'élément de modèle passé dans le dictionnaire est de type 'WEBPHSMVC.ViewModels.ProduitViewModel', mais ce dictionnaire requiert un élément de modèle de type 'System.Collections.Generic.IEnumerable`1[WEBPHSMVC.ViewModels.ProduitViewModel]'. 
Description : Une exception non gérée s'est produite au moment de l'exécution de la requête Web actuelle. Contrôlez la trace de la pile pour plus d'informations sur l'erreur et son origine dans le code. 

Détails de l'exception: System.InvalidOperationException: L'élément de modèle passé dans le dictionnaire est de type 'WEBPHSMVC.ViewModels.ProduitViewModel', mais ce dictionnaire requiert un élément de modèle de type 'System.Collections.Generic.IEnumerable`1[WEBPHSMVC.ViewModels.ProduitViewModel]'.

Erreur source: 

Une exception non gérée s'est produite lors de l'exécution de la requête Web actuelle. Les informations relatives à l'origine et l'emplacement de l'exception peuvent être identifiées en utilisant la trace de la pile d'exception ci-dessous.

Trace de la pile: 

[InvalidOperationException: L'élément de modèle passé dans le dictionnaire est de type 'WEBPHSMVC.ViewModels.ProduitViewModel', mais ce dictionnaire requiert un élément de modèle de type 'System.Collections.Generic.IEnumerable`1[WEBPHSMVC.ViewModels.ProduitViewModel]'.]
   System.Web.Mvc.ViewDataDictionary`1.SetModel(Object value) +509563
   System.Web.Mvc.ViewDataDictionary..ctor(ViewDataDictionary dictionary) +371
   System.Web.Mvc.WebViewPage`1.SetViewData(ViewDataDictionary viewData) +48
   System.Web.Mvc.RazorView.RenderView(ViewContext viewContext, TextWriter writer, Object instance) +99
   System.Web.Mvc.BuildManagerCompiledView.Render(ViewContext viewContext, TextWriter writer) +115
   System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context) +295
   System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult) +13
   System.Web.Mvc.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19() +23
   System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation) +242
   System.Web.Mvc.<>c__DisplayClass1e.<InvokeActionResultWithFilters>b__1b() +21
   System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult) +177
   System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +324
   System.Web.Mvc.Controller.ExecuteCore() +106
   System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +91
   System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +10
   System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__5() +34
   System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +19
   System.Web.Mvc.Async.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _) +10
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
   System.Web.Mvc.<>c__DisplayClasse.<EndProcessRequest>b__d() +48
   System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) +7
   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22
   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +60
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +9629296
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +155 
```

但我不确定，我的控制器不起作用:(我希望在我的 ProduitViewModel 上使用 CRUD。

请帮我 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T21:04:27.740

您`ViewModel`包含`catalogue_produit`模型本身，这通常不是您想要的。

的要点之一`ViewModel`是，`View`将能够在不依赖`Models/Entities`通常不适合`View`需求的情况下呈现自己。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:50:33.663

好吧，只需阅读错误消息会有所帮助：

您查看的模型是`IEnumerable<ProduitViewModel>`，类似于

```
@model IEnumerable<ProduitViewModel> 
```

然后你传递给它一个实例`ProduitViewModel`

所以要么将视图的模型更改为

```
@model ProduitViewModel 
```

或发送它一个`IEnumerable`，而不是单个实例。

# reflection - Guice 是否使用反射，如果使用，它会影响性能吗？

> ID：15327452
> 
> 赞同：3
> 
> 时间：2013-03-10T20:52:12.373
> 
> 标签：reflection, guice

如果我有一个高吞吐量的系统，我应该避免使用 Guice 来注入频繁创建的对象吗？有人问反射如何影响性能，这似乎很糟糕：[Java Reflection Performance](https://stackoverflow.com/questions/435553/java-reflection-performance)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T00:09:49.330

Guice 大量使用反射。

桌面/服务器 JVM 上的反射非常高效，即使是非常大的 Guice 应用程序也不存在与 Guice 相关的性能问题。

在 Android 上的反射效率要低得多，尤其是在较旧的 Gingerbread 和 Froyo 设备上。[Dagger](http://square.github.com/dagger/)是一个开源的 Guice 替代品，旨在在 Android 上高效运行。

# python - 如何调用嵌套函数？

> ID：15327457
> 
> 赞同：1
> 
> 时间：2013-03-10T20:52:47.380
> 
> 标签：python, python-3.x

关于如何修复我的代码的指针？此代码要求用户输入售出的门票数量，并返回使用函数产生的收入

我不确定如何调用每个函数

```
secA = 20
secB = 15
secC = 10

def main():
    print("The income generated from all sections is: ", total)
def getTickets(A,B,C):
    sectionA = int(input("Please enter the number of tickets sold in section A: ")
    sectionB = int(input("Please enter the number of tickets sold in section B: ")
    sectionC = int(input("Please enter the number of tickets sold in section C: ")

    def ticketsValid():
        while sectionA > 300:
                print("ERROR: Section A has a limit of 300 seats")
        while sectionB > 500:
                print("ERROR: Section B has a limit of 500 seats")
        while sectionC > 200:
                print("ERROR: Section C has a limit of 200 seats")

    def calcIncome():
        total = secA * sectionA + secB * sectionB + secC * sectionC
        print("The income generated is $", format(total, '.2f'))   
main() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T21:37:00.873

要回答您的第一个问题：调用所有函数，您需要将函数名称放入`main()`函数中。但是，您还有其他几个错误，因此我决定逐步引导您完成该程序。

首先，我们设定价格：

```
secA = 20
secB = 15
secC = 10 
```

这是第一个功能，`getTickets()`

```
def getTickets():

    global A
    A = int(input("Please enter the number of tickets sold in section A: "))

    global B
    B =int(input("Please enter the number of tickets sold in section B: "))

    global C
    C =int(input("Please enter the number of tickets sold in section C: ")) 
```

`global`在我使用变量之前注意这个词。这告诉计算机这个变量可以在任何地方使用。接下来，注意双括号——因为`int()`和`input()`都是函数，所以我们需要通过这样做来证明这一点。

我修复了你的`ticketsValid()`函数代码。通常，嵌套函数不是一个好主意，所以这与上面的代码处于相同的缩进级别。

```
def ticketsValid(A,B,C):
    while A > 300 or A < 0:
        print("ERROR: Section A has a limit of 300 seats\n")
        A = int(input("Please enter the number of tickets sold in section A: "))
    while B > 500 or B < 0:
        print("ERROR: Section B has a limit of 500 seats")
        B =int(input("Please enter the number of tickets sold in section B: "))
    while C > 200 or C < 0:
        print("ERROR: Section C has a limit of 200 seats")
        C =int(input("Please enter the number of tickets sold in section C: ")) 
```

这从上面获取变量，并检查它们是否有效。请注意，我添加了一张负数支票——您不能出售负数票。

然后我们来`calcIncome(A,B,C)`：

```
def calcIncome(A, B, C):
    total = A * secA + B * secB + C * secC
    print ("The income generated is $%d" % (total)) 
```

首先，我们将部分乘以设定价格来计算总数。然后，我们打印它。

最后，我们需要调用函数。我将您的想法用于*main()*函数，该函数使用其他函数。它看起来像这样。

```
def main():
    getTickets()
    ticketsValid(A,B,C)
    calcIncome(A, B, C) 
```

它只是在运行时以正确的顺序调用其他函数。

最后，我们`main()`通过键入以下内容调用该函数：

```
main() 
```

我希望这回答了你的问题。如果没有，请随时发表评论。如果是这样，请检查我的答案旁边的绿色复选标记。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T21:57:11.933

如果您只想知道如何使用嵌套函数：

```
def f():
    def g(): #this defines a function but does not call it
        print "run g"
    g() # this calls g. 
```

通常，嵌套函数不应该在其父函数之外可用。由于使用嵌套函数的目的是该函数仅帮助其父函数做事。如果您想在外面使用，请考虑将其定义为新功能。

在您的情况下，您需要考虑如何将代码分成几部分。
如果我是你，我会使用 getTickets() 来获取门票。
ticketValid 很好，但我会让它返回一个布尔值。calcIncome 将返回总收入。所以一般的设计是这样的：

```
def main():
    (A, B, C) = getTickets()
    if(ticketsValid(A, B, C)):
        income = calcIncome(A, B, C)
        print("The income generated from all sections is: ", income)

def getTickets():......
def ticketsValid(A, B, C):......
def calcIncome(A, B, C):...... 
```

我认为这将是一个更好的设计。

# angularjs - 如何将参数传递到 Angular $resource 工厂？

> ID：15327460
> 
> 赞同：0
> 
> 时间：2013-03-10T20:53:27.473
> 
> 标签：angularjs, coffeescript

我试图在我的 $resource Venue 对象中使用 $scope.lat 和 $scope.lng，这样 REST 通信将始终在某个位置的上下文中。在 HenriettaCtrl 中定义它们之前，我无法判断它们是否在 $rootScope 下被传递，或者它们是否甚至被传递：

```
henriettaApp = angular.module('henriettaApp', ["ngResource"])

henriettaApp.factory "Venue", ["$resource", "$rootScope", ($resource, $rootScope) ->
  console.log($rootScope.lat)
  console.log($rootScope.lng)
  $resource("/venuesNear/:id",{lat:$rootScope.lat,lng:$rootScope.lng,id:"@id"}, {update: {method:"PUT"}})
]

@HenriettaCtrl = ["$scope", "Venue", ($scope, Venue) ->
  saveLocation = (position) ->
    $scope.lat = position.coords.latitude
    $scope.lng = position.coords.longitude
    console.log($scope.lat)
    $scope.streams = Venue.query()
  navigator.geolocation.getCurrentPosition saveLocation
] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:28:38.930

$rootScope 将向下传播到 $scope，但在 $scope 上设置的属性不会传播到 $rootScope。

你可能需要使用事件来获得你想要的结果，比如这个问题的公认答案：[AngularJS multiple uses of Controller and rootScope](https://stackoverflow.com/questions/13180293/angularjs-multiple-uses-of-controller-and-rootscope)

# c# - 从 Web 应用程序打印到收据打印机

> ID：15327461
> 
> 赞同：3
> 
> 时间：2013-03-10T20:53:31.620
> 
> 标签：c#, asp.net, printing, point-of-sale

如果我采取“错误的道路”来完成任务，这更像是一个问题。

我需要从 Web 应用程序将数据打印到收据打印机。

根据我从网上各种帖子中了解到的情况，似乎最好的选择是创建类似打印服务器的东西（不确定名称）。这将是作为服务运行的 C# 桌面应用程序。我计划将消息放入队列和打印服务器以从队列中提取消息并将其打印到重新配置的 LAN 打印机。我将使用 POS.NET 连接到 POS 设备。

额外的好处（使用 Javascript/pdf 解决方案）是我可以增强相同的“打印服务器”以将信息发送到显示系统。消息系统可以解耦到云端，以便在不同的地理区域打印，例如仓库。如果我针对该服务使用 Framework 3.5，我可以摆脱 Framework 4.0 plus 版本的 POS.NET 问题。

我是在重新发明 .Net 或可能是开源应用程序中已有的东西吗？

我发现了这些类似的问题

*   [如何从 Web 应用程序打印到收据打印机？](https://stackoverflow.com/questions/2192502/how-to-print-from-web-application-to-receipt-printer)
*   [配置 POS 打印机以进行远程打印](https://stackoverflow.com/questions/11042501/configuring-a-pos-printer-for-remote-printing)

这很有帮助，但没有完全回答我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-26T16:40:53.977

我必须这样做，经过几个小时的搜索，我找不到任何东西。我通过安装 Thunderbird（任何电子邮件客户端都可以）并通过电子邮件将收据发送到与该客户端关联的帐户来实现这一点，然后我在电子邮件客户端上设置了一条规则以打印出它收到的任何内容。

# php - 使一条 SQL 记录从同一张表中的一条或多条记录中继承值

> ID：15327462
> 
> 赞同：0
> 
> 时间：2013-03-10T20:53:31.780
> 
> 标签：php, mysql, sql, mysqli

背景

我有一个 MySQL 表，其中每条记录代表一个项目的区域和/或平台特定版本。对于任何给定的项目，都会有几个版本；没有主键，主要是索引列。

我从全球记录开始，每个平台版本的项目都有一个。然后我为任何特定于地区的值添加记录，然后为任何特定于国家的值添加记录。问题是我只打算添加该地区或国家独有的价值；换句话说，所有记录都将具有空值，因为我不想输入重复值，所以我希望记录从其他记录继承值。

```
item | platform | region | country | date       | price | [...]
1    | 1        | [WW]   | null    | 2013-04-01 | 100   |
1    | 2        | [WW]   | null    | 2013-04-01 | 100   |
1    | null     | [EU]   | null    | 2013-04-20 | 80    |
1    | null     | [UK]   | null    | null       | 70    | 
```

我计划使用 PHP 来显示给定国家的相关记录。问题是，我希望能够从该国家的地区记录和全球记录中组合/继承值。因此，英国将有两条记录：每条都从记录中继承一个`platform`值`[WW]`，都从记录中继承`date`值`[EU]`，并且都从记录中继承`price`值`[UK]`。

```
1 | 1 | [UK] | 2013-04-20 | 70
1 | 2 | [UK] | 2013-04-20 | 70 
```

我想知道的问题是仅在 MySQL 中有解决方案/程序/方法吗？还是唯一的方法是通过 PHP 编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:23:24.133

**你所要求的**

请注意，这不是一个真正的答案。它只输出您在问题中提出的问题，但这里的逻辑几乎没有任何意义，因此它极不可能适用于真正的数据库。

```
SELECT a.item, b.platform, a.region, a.country, c.date, a.price FROM
    (SELECT item, region, country, price FROM table WHERE platform IS NULL AND date IS NULL GROUP BY item) AS a
    LEFT JOIN 
        (SELECT platform FROM table WHERE platform IS NOT NULL) AS b 
    ON a.item = b.item 
    LEFT JOIN 
        (SELECT date FROM table WHERE PLATFORM IS NULL AND date IS NOT NULL) AS c 
    ON a.item = c.item 
```

**更好的答案在这里**

一种更有条理且可能更简单的方法（如果您不超过 2 层父母，仍然有效）将是：

```
 id | parent_id | item | platform | region | country | date       | price | [...]
 1  | null      | 1    | 1        | [WW]   | null    | 2013-04-01 | 100   |
 2  | null      | 1    | 2        | [WW]   | null    | 2013-04-01 | 100   |
 3  | 1         | 1    | null     | [EU]   | null    | 2013-04-20 | 80    |
 4  | 2         | 1    | null     | [UK]   | null    | null       | 70    |

SELECT items.*, 
parent_items.platform AS pa_platform, parent_items.region AS pa_region, parent_items.country AS pa_country, parent_items.date AS pa_date, parent_items.price AS pa_price,  
grandparent_items.platform AS gpa_platform, grandparent_items.region AS gpa_region,  parent_items.country AS gpa_country, parent_items.date AS gpa_date, parent_items.price AS gpa_price
FROM items
LEFT JOIN 
    items AS parent_items
ON items.parent_id = parent_items.id
LEFT JOIN 
    items AS grandparent_items
ON parent_items.parent_id = grandparent_items.id 
```

然后您可以选择使用应用程序级别的逻辑来显示最接近的非空值：

```
$region = $result['region'] ? $result['region'] : ($result['pa_region'] ? $result['pa_region'] : $result['gpa_region']); 
```

或者你可以修改上面的 SQL 来选择第一个非空值：

```
SELECT COALESCE(items.region, parent_items.region, grandparent.region) AS region, COALESCE(items.platform, parent_items.platform, grandparent.platform) AS platform, ... 
```

**现在...如果您实际上要添加具有依赖项的行**

为什么不简单地制作不同的桌子？

假设您有每个地区、每个平台、每个国家/地区的价格，并且您知道优先顺序（例如，地区 > 国家 > 平台）：

为什么不使用字段 id/item/platform/date/price 制作基表 (tbl_platform)

然后是带有字段 id/platform_id/date/price 的国家/地区表 (tbl_country)

然后是带有字段 id/country_id/date/price 的区域表 (tbl_region)

如果你想要基地信息，直接从基地表中获取，如果你想要地区信息，将地区加入国家，然后加入基地。

# objective-c - Cocos2d-iPhone 与 Box2D：CCPhysicsSprite EXC_BAD_ACCESS

> ID：15327463
> 
> 赞同：1
> 
> 时间：2013-03-10T20:53:34.167
> 
> 标签：objective-c, cocos2d-iphone, box2d, objective-c++

我最近才开始搞乱 cocos2d 的 Box2D 集成，虽然大部分过程都很简单直接，但在使用 CCPhysicsSprite（将 b2body 与 sprite 集成的 CCSprite 子类）时，我一直遇到 EXC_BAD_ACCESS 错误。我正在使用的代码是：

```
- (void)spawnBallAtPoint:(CGPoint)point
{
    count++;

    CCPhysicsSprite *sprite = [CCPhysicsSprite spriteWithFile:@"ball.png" rect:CGRectMake(0, 0, 52, 52)];
    sprite.position = point;
    [self addChild:sprite];

    b2BodyDef bodyDef;
    bodyDef.type = b2_dynamicBody;
    bodyDef.position.Set(point.x / PTM_RATIO, point.y / PTM_RATIO);
    bodyDef.userData = sprite;
    b2Body *body = world->CreateBody(&bodyDef);

    b2CircleShape circleShape;
    circleShape.m_radius = (26.0 / PTM_RATIO);

    b2FixtureDef fixtureDef;
    fixtureDef.shape = &circleShape;
    fixtureDef.density = 1.0f;
    fixtureDef.friction = 0.2f;
    fixtureDef.restitution = 0.8f;
    body->CreateFixture(&fixtureDef);

    sprite.b2Body = body;
} 
```

此代码触发 EXC_BAD_ACCESS，我知道它是 CCPhysicsSprite，因为将 CCPhysicsSprite 更改为 CCSprite 会引发零错误：

```
- (void)spawnBallAtPoint:(CGPoint)point
{
    count++;

    CCSprite *sprite = [CCSprite spriteWithFile:@"ball.png" rect:CGRectMake(0, 0, 52, 52)];
    sprite.position = point;
    [self addChild:sprite];

    b2BodyDef bodyDef;
    bodyDef.type = b2_dynamicBody;
    bodyDef.position.Set(point.x / PTM_RATIO, point.y / PTM_RATIO);
    bodyDef.userData = sprite;
    b2Body *body = world->CreateBody(&bodyDef);

    b2CircleShape circleShape;
    circleShape.m_radius = (26.0 / PTM_RATIO);

    b2FixtureDef fixtureDef;
    fixtureDef.shape = &circleShape;
    fixtureDef.density = 1.0f;
    fixtureDef.friction = 0.2f;
    fixtureDef.restitution = 0.8f;
    body->CreateFixture(&fixtureDef);
} 
```

我一直在环顾四周，找不到真正的答案（因为所有示例代码都以这种方式使用 CCPhysicsSprite 没有错误）。我确定我犯了一个愚蠢的错误，但我想在学习新东西时这是可以预料的：P

先谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T07:21:26.267

在`CCPhysicsSprite`设置精灵的位置之前，您必须设置身体。我假设这条线是发生崩溃的地方：

```
sprite.position = point; 
```

如果您查看`CCPhysicsSprite`它会覆盖 position/setPosition 以始终使用包含`b2body`对象的值。所以它真的访问了它的 b2body 属性，也就是`nil`那个时候 → Crash。通常，在创建 CCPhysicsSprite 后，您希望尽快设置其 .b2body - 可能会出现更多类似问题的情况，因为您需要先设置 .b2body 属性。

所以，移到`sprite.position = point;`下面`sprite.b2Body = body;`。

# ruby - 给setter方法起别名

> ID：15327464
> 
> 赞同：1
> 
> 时间：2013-03-10T20:53:43.077
> 
> 标签：ruby

```
class Test
  attr_accessor :something
end

class Test
  alias :old_something= :something=
  def something=(a)
    a += 2              # do something with the argument
    old_something=(a)   # then pass it on
  end
end 
```

我希望如果我说

```
t = Test.new
t.something = 3
puts t.something 
```

它会打印出来`5`。但它打印`nil`。为什么这不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T21:05:10.607

表格

```
foo = bar 
```

赋值给一个局部变量。您需要明确表示要调用方法：

```
self.foo = bar 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T21:04:05.013

**编辑：@Jörg 的答案可能是真正的问题，但我在下面的原始答案也可能会有所帮助。从我的旧答案中编辑了一些误导性的细节。**

如果你`def something=`完全放弃，你会得到一个`something`有别名的setter `old_something`：

```
class Test
  attr_accessor :something
end

class Test
  alias :old_something= :something=
end

1.9.3p327 :001 > require "./test.rb"
=> true
1.9.3p327 :002 > t = Test.new
=> #<Test:0x000000018eb740>
1.9.3p327 :003 > t.something = "blah"
=> "blah"
1.9.3p327 :004 > t.something
=> "blah"
1.9.3p327 :005 > t.old_something = "moo"
=> "moo"
1.9.3p327 :006 > t.something
=> "moo" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T21:10:13.690

原因是 @something 从未分配给任何东西。

此代码将执行您尝试执行的操作：

```
class Test
  attr_accessor :something
end

class Test
  alias :old_something= :something=
  def something=(a)
    @something = a += 2 # do something with the argument
    old_something=(a)   # then pass it on
  end
end

t = Test.new
t.something=( 3)
puts t.something 
```

不同之处在于将实例变量 @something 分配给一个值，然后允许您的代码`a`通过传入的变量递增它。

# javascript - jQuery：提取数组

> ID：15327466
> 
> 赞同：-4
> 
> 时间：2013-03-10T20:53:48.103
> 
> 标签：javascript, jquery

我有一个`var`包含：

`var flags = {USA, Brazil, Germany, Canada};`

我可以得到每个键的数量的值

[http://jsfiddle.net/YQSHr/](http://jsfiddle.net/YQSHr/)

如何获取数字 {1, 2, 3} 而不将它们设置在`var`并从 1 开始

`var flags = {USA, Canada, Germany};`

编辑2：
我还有另一个`var`没有`,`
`var flags = 'USA Brazil Germany Canada';`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T20:56:27.220

采用

```
var flags = ['USA','Brazil','Germany','Canada']; 
```

然后你可以迭代它

```
$.each(flags, function(key, value){
    var yourkey = key + 1; // Because you want 1 indexed
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T20:56:42.190

如果你想要一个字符串数组，你需要[使用方括号](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals#Array_literals)：

```
var flags = ["USA", "Canada", "Germany"];
/* or
var flags = 'USA Brazil Germany Canada'.split(' ');
*/ 
```

然而，为了从索引中获取数字，您需要添加 1，因为数组索引是[从零开始的](http://en.wikipedia.org/wiki/Zero-based_numbering)：

```
$.each(flags, function(index, value){
    $('#flags').append('<span>' + value + (index+1) + '</span> ')
}); 
```

输出：

```
USA1
Canada2
Germany3 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-10T20:57:13.187

```
var flags = ['USA', 'Canada', 'Germany'];

$.each(flags, function(i, country){
    $('#flags').append('<span>' + country + (i += 1) + '</span> ')
}); 
```

[http://jsfiddle.net/ethagnawl/YQSHr/3/](http://jsfiddle.net/ethagnawl/YQSHr/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T20:58:25.087

```
var flags = ['USA', 'Canada', 'Germany'];

$.each(flags, function(key, value){
   $('#flags').append('<span>' + (key+1) + ' '+ value + '</span> ')
}); 
```

用字符串设置数组

[演示视图](http://jsfiddle.net/YQSHr/4/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-10T21:13:28.437

您的代码无效。

```
var flags = {USA, Brazil, Germany, Canada};//error 
```

请查看如何使用对象或数组并选择一个而不是混合。这将解决您遇到的问题。正如其他人在答案中指出的那样，您将能够使用字符串数组来匹配索引，或者使用对象中的索引来匹配字符串。

这基本上意味着将标志更改为

```
var flags = ["USA","Brazil","Germany","Canada"]; 
```

[http://jsfiddle.net/YQSHr/6/](http://jsfiddle.net/YQSHr/6/)

* * *

但是，根据您使用的标志数量，您可能希望使用数据结构。

```
var flagHolder = (function(){
 var flags = [];
 var flagIndex = 0;
 function addFlag(name){
  var flag = {};
  flag.name = name;
  flag.index = flagIndex++;
  flags.push(flag);
  return flag.index;
 }
 function getFlag(index){
  return flags[index];
 }
 function getAllFlags(){
  return flags;
 }
 return { 
  getAllFlags: getAllFlags,
  getFlag: getFlag,
  addFlag: addFlag
 };
})(); 
```

可以这样使用：

```
var USA = flagHolder.addFlag("USA");
var Canada = flagHolder.addFlag("Canada");
var Germany = flagHolder.addFlag("Germany");
var Brazil = flagHolder.addFlag("Brazil");
//Get Single
$("#flag").html(flagHolder.getFlag(USA).name);
//Get All
$.each(flagHolder.getAllFlags(), function(key,value){
 $('#flags').append('<span>' + (key+1) + '</span> ');
}); 
```

这是一个演示：http: [//jsfiddle.net/YQSHr/7/](http://jsfiddle.net/YQSHr/7/)

# java - 从 jspx 视图中的 html 链接到实体方法。全部由 Roo 生成

> ID：15327467
> 
> 赞同：0
> 
> 时间：2013-03-10T20:54:01.857
> 
> 标签：java, spring, model-view-controller, spring-roo

Roo 生成的所有文件。从 jspx 视图中的 html 链接到实体方法。但是这种方法不是由 Roo 生成的，我是自己编写的（不是 Roo），它们不是来自查找器列表。

什么或可能是如何？哦，我认为 Roo 不能为我做到这一点。请给我一些关于编写代码的最佳实践的链接。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T08:23:11.920

您必须正确编写方法签名并将 @RequestMapping 属性设置为正确。请分享您的示例代码，我可以对此发表评论。

# c - 在c中将数组作为参数传递时出现分段错误

> ID：15327476
> 
> 赞同：0
> 
> 时间：2013-03-10T20:55:30.840
> 
> 标签：c, segmentation-fault

作为一项任务，我必须实现归并排序。当我将数组作为参数传递时，我遇到了分段错误。一切似乎都是正确的。我附上代码。
`arr`是`int arr[1000]`，我将它传递给`mergesort`as
`mergesort(arr, 0, n);`

其余代码如下。

```
void merge(int a[], int l, int m, int r)
{
    int temp[r -l];
    int templ = l;
    int tempm = m;
    register int k; 
    for(k=0; k<(r-l); k++)
    {
    if((tempm >= r)||(templ < m)&&(a[templ] <= a[tempm]))
    {   /*if number from left subarray is smaller*/
    temp[k] = a[templ];
    templ++;
    }
    else
    {   /*number from right subarray is smaller*/
    temp[k] = a[tempm];
    tempm++;
    }
    }
    for(k= l; k< r; k++)
    {   /*copy results back to the array to be returned*/
    a[k] = temp[k - l];
    }
}

void mergesort(int ar[], int left, int right)
{
    int mid;    
    if(left < right)
    {
    mid= (left + right)/2;
    mergesort(&ar[0], left, mid - 1);
    mergesort(&ar[0], mid, right);
    merge(&ar[0], left, mid, right);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:38:45.817

一旦你有`left == 0`and `right == 1`in `mergesort`，你将有一个无限递归：

```
void mergesort(int ar[], int left, int right) // IF LEFT IS 0 AND RIGHT IS 1 HERE...
{
    int mid;    
    if(left < right) // ...THEN LEFT IS LESS THAN RIGHT AND...
    {
    mid= (left + right)/2;
    mergesort(&ar[0], left, mid - 1);
    mergesort(&ar[0], mid, right); // ...HERE WE HAVE A CALL THAT IS
    // IDENTICAL TO THE ONE THAT GOT US HERE, INFINITE RECURSION 
```

# interface - C++/CLI：无法显式实现具有不同返回类型的接口成员

> ID：15327477
> 
> 赞同：2
> 
> 时间：2013-03-10T20:55:31.487
> 
> 标签：interface, c++-cli, explicit

假设我们有两个 C++/CLI 接口声明具有不同返回类型的 Foo() 成员。

```
public interface class InterfaceA
{
    bool Foo();
};

public interface class InterfaceB
{
    int Foo();
}; 
```

我们在这里要做的是有一个类，实例化一个可以通过上述接口访问的对象。因此，直接的方法是：

```
public ref class Class : InterfaceA, InterfaceB
{
    virtual bool Foo() = InterfaceA::Foo { return true; }
    virtual int Foo() = InterfaceB::Foo { return 10; }
}; 
```

不幸的是，这给了我们编译器错误“重载的函数仅因返回类型不同而不同”。这个 C++/CLI 限制有什么解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T21:27:38.253

不，您必须重命名该方法。例如：

```
public ref class Class : InterfaceA, InterfaceB
{
public:
    virtual bool Foo() { return true; }
    virtual int Foo2() = InterfaceB::Foo { return 10; }
}; 
```

请注意，这绝不是一个真正的问题。如果代码出于某种原因引用了 Class 而不是接口，那么它总是可以使用强制转换调用 InterfaceB::Foo()：

```
Class^ obj = gcnew Class;
safe_cast<InterfaceB^>(obj)->Foo(); 
```

# javascript - jqplot 传递数组未捕获异常：无数据

> ID：15327478
> 
> 赞同：0
> 
> 时间：2013-03-10T20:55:34.357
> 
> 标签：javascript, jquery, jqplot

我正在尝试将数组的内容传递给 jplot 函数，但我没有得到任何数据。该数组已在 php 中进行了 json 编码，它是一个关联数组。

```
 $.ajax({
             type: "POST",
             url: "actions/myphp.php",
             data: PassArray,
             dataType: 'json',
             beforeSend: function (html) { // this happens before actual call
             //    alert(html);
             },
 success: function (html) { // this happens after we get results
                 // $("#loginoutcome").text(html);
                // alert(html);
                 var obj  =html ;
                // Now the two will work
                 $.each(obj, function(key, value) {
                       alert(key + ' ' + value);
                 });

                 var s1 = obj;
                       var plot8 = $.jqplot('pie8', [s1], {
                           grid: {
                               drawBorder: false,
                               drawGridlines: false,
                               background: '#ffffff',
                               shadow: false
                           },
                           axesDefaults: {},
                           seriesDefaults: {
                               renderer: $.jqplot.PieRenderer,
                               rendererOptions: {
                                   showDataLabels: true
                               }
                           },
                           legend: {
                               show: true,
                               rendererOptions: {
                                   numberRows: 1
                               },
                               location: 's'
                           }
                       }); 
```

我也尝试过使用它，`var s1 = [obj];`但这也不起作用......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T22:22:10.923

这现在有效我没有正确使用数组

```
 success: function (html) { // this happens after we get results

                // alert(html);
                 var obj  =html ;
                // Now the two will work
                 $.each(obj, function(key, value) {
                       alert(key + ' ' + value);
                      myArr.push([key, value]);
                 });

                  s1 = myArr;
                       var plot8 = $.jqplot('pie8', [s1], {

                           seriesColors: [ "#EB0712", "#12C456", "#EAA228", "#579575", "#839557", "#958c12",
                                           "#953579", "#4b5de4", "#d8b83f", "#ff5800", "#0085cc"], 
                           grid: {
                               drawBorder: false,
                               drawGridlines: false,
                               background: '#ffffff',
                               shadow: false

                           },
                           axesDefaults: {},
                           seriesDefaults: {
                               renderer: $.jqplot.PieRenderer,
                               rendererOptions: {
                                   showDataLabels: true
                               }
                           },
                           legend: {
                               show: true,
                               rendererOptions: {
                                   numberRows: 1
                               },
                               location: 's'
                           }
                       });

             }, 
```

# html - Twitter意图推文添加正斜杠

> ID：15327479
> 
> 赞同：2
> 
> 时间：2013-03-10T20:55:36.020
> 
> 标签：html, url, twitter

我正在按照 API 指南发布推文：

`http://twitter.com/intent/tweet?text=Don%27t+hide+your+incessant+curiosity%2E+Exclaim+it%2E+%23quote+http://itechthereforeiam.com+via+@mjbrender`

但它一直在末尾附加一个“/”：

> 不要隐藏你不断的好奇心。惊呼它。#quote [http://itechthereforeiam.com](http://itechthereforeiam.com)通过@mjbrender/

我发现一些对话朝着这个方向发展，但没有回答这个问题。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-14T15:50:44.397

不知道你是否曾经让这个工作，但我将 via 声明移到“前面”，它摆脱了斜线。

例如：

```
https://twitter.com/intent/tweet?via=UserName&amp;url=http://MyURL.com&amp;text=Share your Story and Win!&amp;hashtags=myHashTag&amp; 
```

我之前在末尾有 via 标签，它会产生斜线。使用此代码，via 仍然出现在消息的末尾，而不是消息的开头，只是没有尾部正斜杠。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-22T09:07:21.400

这是因为您没有对 MyURL 进行 URL 编码。尝试这个 ：

```
https://twitter.com/intent/tweet?text=Don%27t+hide+your+incessant+curiosity.+Exclaim+it.+%23quote+http%3A//itechthereforeiam.com+via+@mjbrender 
```

# javascript - pdf 文件大小 javascript 或 html5

> ID：15327483
> 
> 赞同：1
> 
> 时间：2013-03-10T20:55:47.733
> 
> 标签：javascript, jquery, html, pdf

有没有一种方法可以在不单击输入框中的按钮的情况下获取 PDF 的文件大小。基本上我有一排 5 个指向 pdf 文件的链接，我想将每个 pdf 的文件大小附加到链接的末尾：

```
<a href="www.pdf.com/pdf">PDF Name - 4MB</a>
<a href="www.pdf.com/pdf">PDF Name - 4MB</a> 
```

谢谢

理查德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-09T07:21:41.183

```
 // File size counter function 
    function readablizeFilesize(bytes) {
    var s = ['bytes', 'kb', 'MB', 'GB', 'TB', 'PB'];
    var e = Math.floor(Math.log(bytes)/Math.log(1024));
    return (bytes/Math.pow(1024, Math.floor(e))).toFixed(2)+" "+s[e];
    }
    var length = request.getResponseHeader("Content-Length");
    if (!isNaN(parseInt(length))) {
    var fileSize = readablizeFilesize(length);
    var anchor = '<a href="www.pdf.com/pdf">PDF Name - ' + fileSize + '</a>'
    console.log(anchor);

    }
Plese Try with this 
```

# javascript - 当文本输入仅包含特定字符时执行 javascript

> ID：15327490
> 
> 赞同：0
> 
> 时间：2013-03-10T20:56:27.030
> 
> 标签：javascript

我想要做的是模拟用户在提示符下输入内容并按回车键。

实时页面位于[http://www.certified-computer-service.com](http://www.certified-computer-service.com)

我目前拥有的代码如下所示：

```
<script type="text/javascript">
function buttons(e){
    var unicode=e.keyCode? e.keyCode : e.charCode;
    switch(unicode){
        case 49:
            window.alert("1");
            break;
        case 50:
            window.alert("2");
            break;
        case 51:
            window.alert("3");
            break;
        case 52:
            window.alert("4");
            break;
        case 53:
            window.alert("5");
            break;
        case 97:
            window.alert("1");
            break;
        case 98:
            window.alert("2");
            break;
        case 99:
            window.alert("3");
            break;
        case 100:
            window.alert("4");
            break;
        case 101:
            window.alert("5");
            break;
    }
}
</script>

blah blah

<input type="text" name="selection" id="selection" onkeydown="buttons(event); this.select()" style="border: none; background-color: #C0C0C0;"> 
```

如何解决此问题以使其按预期工作？虽然下面的代码不起作用，也不是真正用一种语言编写的，但它代表了我的想法：

```
inputbox.onKeyup(theKey){
    if theKey == "enter" && inputbox.value == "1" { //respond to key 1 }
    if theKey == "enter" && inputbox.value == "2" { //respond to key 2 } 
```

可以通过查看上述网站的底部来进一步澄清我的意图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T21:09:32.903

像这样的东西怎么样：

```
 var code = (e.keyCode ? e.keyCode : e.which);
 if(code == 13) { //Enter keycode
 //get the text from the div with jQuery or document.getElementById
 var input = jQuery('#selection').val()
 //you can use a json to map your results or the switch as you described.
 //json example: 
 var json = {1: 'hello', 2: 'world'}
 json['1']
 } 
```

# drupal-7 - 当匿名用户无法查看已发布的页面时，如何在 Drupal7 中创建不同的注册表单？

> ID：15327493
> 
> 赞同：0
> 
> 时间：2013-03-10T20:56:42.157
> 
> 标签：drupal-7

为了自己解决这个问题，我从安装 Profile2 和 Profile2 注册开始。在任何时候，我都无法根据用户名（例如，`{domain}/private/register`）生成页面。我认为它没有出现 b/c 我检查了匿名用户看不到已发布的页面（这是网站要求）。但是，我可能做错了什么，但我多次查看说明，我认为我没有做错。任何的意见都将会有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T21:31:17.757

我认为您可能必须创建一个新的内容类型，类似于正常的故事或文章类型，并将受限制的内容发布为新的页面类型。将访问限制应用于此内容类型，并保留默认内容类型。

# java - 彩票程序 Java 比较两个数字

> ID：15327496
> 
> 赞同：0
> 
> 时间：2013-03-10T20:57:01.580
> 
> 标签：java, numbers, compare, treeset

所以基本上我正在编写一个彩票程序，使用两个树集，每个树集有 6 个整数，一个用户输入，另一个随机生成。我必须将数字相互比较才能输出奖品，例如，如果两个数字匹配，那么您将赢得 100 美元。我在如何创建这样的方法时遇到了麻烦。任何帮助都会非常感谢！

这是我的主要内容，

```
public static void main(String[] args)
{
    Set<Integer>s1 = createWinningNumber();
    Set<Integer>s2 = getUserNumber();

    System.out.println("Your ticket was: "+s2);
    System.out.println("Winning numbers: "+s1);

}//End of main
public static Set<Integer> getUserNumber()
{
    int set = 0;
    Set<Integer> number = new TreeSet<Integer>();
    Scanner keyboard = new Scanner(System.in);
    System.out.println("Pick your Lucky Lotto Numbers");
    System.out.print("Type 6 lotto numbers: ");
    for(int i = 0; i< 6;i++)
    {
        System.out.print("");
        set = keyboard.nextInt();
        number.add(set);
    }
    return number;  
}//End of getUserNumber

public static Set<Integer> createWinningNumber()
{
    Set<Integer> winning = new TreeSet<Integer>();
    Random generator = new Random();
    for(int i = 0;i<6;i++)
    {
        winning.add(generator.nextInt(40));
    }
    return winning;
}//End of createWinningNumber 
```

到目前为止的输出

```
Pick your Lucky Lotto Numbers
Type 6 lotto numbers: 4 12 7 35 20 1
Your ticket was: [1, 4, 7, 12, 20, 35]
Winning numbers: [5, 8, 19, 24, 32] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T21:01:28.760

`Set`s是要走的路。好的选择。

您正在寻找的操作是两组的交集*。*在 Java 中，这被实现为：

```
s1.retainAll(s2); 
```

`s1`现在将只包含*也在*.`s2`

然后，您可以使用`s1.size()`来计算常见数字的数量：

```
public static void main(String[] args)
{
    Set<Integer>s1 = createWinningNumber();
    Set<Integer>s2 = getUserNumber();

    System.out.println("Your ticket was: "+s2);
    System.out.println("Winning numbers: "+s1);

    s1.retainAll(s2); // s1 contains the intersection of previous s1 and s2
    System.out.println("You had " + s1.size() +
      " numbers in common with the winning number.");
} 
```

**编辑：**如果你想保留原始集，试试这个：

```
Set<Integer> s3 = new Set<Integer>(s1); // copy s1
s3.retainAll(s2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T21:06:42.017

您可以使用`Set.containsAll(Collection)` [指向 API 的链接](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html#containsAll%28java.util.Collection%29)来检查一组是否包含在另一组中。然后你可以检查大小匹配，如果是，你有一个赢家：

```
s1.containsAll(s2) && s2.size().equals(s1.size()) 
```

或者你可以这样做：

```
s1.containsAll(s2) && s2.containsAll(s1) 
```

检查这两个集合是否是彼此的子集（因此仅包含相同的元素）。如果您需要知道有多少匹配项是共同的，那么您可以按照 WChargin 的说明进行操作。我可能会通过执行以下操作来创建一个包含公共数字的新集合：

```
Set<Integer> commonNumbers = new TreeSet<Integer>(s1);
commonNumbers.retainAll(s2); 
```

这样我就不会修改原始`s1`集合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T21:09:20.390

这是一个便宜的解决方案

```
public static void main(String[] args) {
        Set<Integer> wins = new HashSet<Integer>();

        Set<Integer> winners = createWinningNumber();
        Set<Integer> numbers = getUserNumber();

        for(Integer winner : winners) {
            for(Integer number : numbers) {
                if(winner == number) {
                    wins.add(number);
                }
            }
        }

        System.out.println("Your ticket was: " + numbers);
        System.out.println("Winning numbers: " + winners);
        System.out.println("Your Winning numbers: " + wins);

    } 
```

# django - 识别和修改 Django 模型中的单个字段

> ID：15327499
> 
> 赞同：0
> 
> 时间：2013-03-10T20:57:13.200
> 
> 标签：django, post, model

我正在使用 Django 构建一个小型系统来控制学生咖啡馆借给学生的一些东西的借贷。 **我在提交表单后无法识别对象**，我想将该对象标记为“不可用”（disponible 表示可用，因此我想将其设置为 False），因此下次有人来询问该对象时，它将没有出现在“贷款”表格中。

*我所需要的只是一个关于如何实现它的提示，我一直在浏览 Django 文档和这个网站，但没有成功。提前感谢您的提示！*

**模型.py**

```
class Mate(models.Model):
color = models.CharField(max_length=2,
    choices=COLOR_CHOICES, default=u'RO')
disponible = models.BooleanField(default=True)

def __unicode__(self):
    return self.color

class Prestamo(models.Model):
cliente = models.ForeignKey(Usuario, null=False, blank=False)
mate = models.ForeignKey(Mate, null=False, blank=False)
termo = models.ForeignKey(Termo, null=False, blank=False)
bombilla = models.ForeignKey(Bombilla, null=False, blank=False)
fecha = models.DateTimeField(null=False, blank=False)
devuelto = models.BooleanField(default=False)
fecha_devolucion = models.DateTimeField(null=True, blank=True)

def __unicode__(self):
    return str(self.pk) 
```

**视图.py**

```
@login_required
# Add_prestamo means 'Add lending' this basically deals with prestamo model, but i want to alter 'mate' objects here too.
def add_prestamo(request):
if request.method == 'POST':
    form = PrestamoForm(request.POST,
            auto_id=False, error_class=DivErrorList)

    if form.is_valid():
        prestamo = form.save(commit=False)

        if request.POST.get('usuarios'):
            miuser = request.POST.get('usuarios', '')
        else:
            miuser = ''
        prestamo.cliente = Usuario.objects.get(nombre__exact=miuser)

        # I KINDA NEED SOMETHING RIGHT HERE

        prestamo.fecha = timezone.now()
        prestamo.devuelto = False
        prestamo.save()
        return HttpResponseRedirect(reverse('list-prestamos'))
else:
    form = PrestamoForm()
return TemplateResponse(request,
         'gester/add_prestamo.html', {'form': form, }) 
```

**add_prestamo.html**

```
<form action="" method="post">
    {% csrf_token %}
        <table>
            <tr>
            <td>
                <div class="ui-widget">
                  <label for="usuarios">Usuario: </label></td><td>
                  <input id="usuarios" name="usuarios">
                </div>
                </td>
            </tr>
            {{ form.as_table }}
        </table>
    <input class="btn" type="submit" value="Crear" />
</form> 
```

在模板中，我使用 {{ form.as_table }} 显示表单，它显示一个选择，但其中许多（伙伴）具有相同的颜色，所以当我在视图中通过 POST 时，如何识别确切的对象改变'disponible'字段值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T03:13:53.577

我真的不明白你的代码，但因为你提到了 disponible，我希望这就是你的意思。

```
prestamo.fecha = timezone.now()
prestamo.devuelto = False

//Because Prestamo model has a foreignkey for Mate model. 
//The Mate model contains the disponible field which you want to access 
//     (to set it to False or unavailable)?
//This is how to access and update it.
prestamo.mate.disponible = False
prestamo.mate.save()

prestamo.save() 
```

# mongodb - MongoDB非常慢的删除

> ID：15327504
> 
> 赞同：6
> 
> 时间：2013-03-10T20:57:42.553
> 
> 标签：mongodb, mongodb-query

我有一个由三个 mongod 服务器组成的小型副本集（每个 16GB RAM，至少 4 个 CPU 内核和真正的 HDD）和一个专用仲裁器。复制的数据目前大约有 100,000,000 条记录。几乎所有这些数据都在一个带有索引的集合中`_id`（自动生成的 Mongo ID）和`date`，这是一个原生的 Mongo 日期字段。我定期使用日期索引从该集合中删除旧记录，如下所示（来自 mongo shell）：

```
db.repo.remove({"date" : {"$lt" : new Date(1362096000000)}}) 
```

这确实有效，但运行非常非常缓慢。我的一个节点的 I/O 比其他两个节点慢，只有一个 SATA 驱动器。当此节点为主节点时，删除以大约 5-10 个文档/秒的速度运行。通过使用 rs.stepDown()，我将这个较慢的主节点降级，并强制进行选举以获得具有更好 I/O 的主节点。在该服务器上，我得到大约 100 文档/秒。

我的主要问题是，我应该担心吗？我没有引入复制之前的数字，但我知道删除速度要快得多。我想知道副本集同步是否导致 I/O 等待，或者是否有其他原因。在删除语句完成之前，我对暂时禁用同步和索引更新非常满意，但我目前不知道有什么方法可以做到这一点。出于某种原因，当我禁用三个节点中的两个，只留下一个节点和仲裁器时，剩余的节点被降级并且无法写入（仲裁器不是应该解决这个问题吗？）。

为了让您了解一般性能，如果我删除并重新创建日期索引，扫描所有 100M 文档大约需要 15 分钟。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-10T21:04:48.727

这种情况正在发生，因为即使

```
db.repo.remove({"date" : {"$lt" : new Date(1362096000000)}}) 
```

看起来像一个命令，它实际上在许多文档上运行——只要满足这个查询。

当您使用复制时，每个更改操作都必须写入`local`数据库中的一个特殊集合，简称`oplog.rs`为 oplog。

oplog 必须为每个删除的文档都有一个条目，并且这些条目中的每一个都需要应用于每个辅助节点上的 oplog，然后它也可以删除相同的记录。

我可以建议您考虑的一件事是[TTL 索引](http://docs.mongodb.org/manual/tutorial/expire-data/)-它们将根据您设置的到期日期/值“自动”删除文档-这样您就不会进行大规模删除，而是能够随着时间的推移更多地分散负载.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-06T15:58:36.313

另一个可能不适合您的建议，但对我来说是最佳解决方案：

1.  从集合中删除索引
2.  遍历集合的所有条目并将记录的 id 存储到内存数组中删除
3.  每次数组足够大（对我来说是 10K 记录），我通过 ids 删除了这些记录
4.  重建指数

这是最快的方法，但它需要停止系统，这对我来说很合适。

# sql - 在表 sql 练习中找到链接

> ID：15327505
> 
> 赞同：0
> 
> 时间：2013-03-10T20:57:48.230
> 
> 标签：sql, oracle11g

所以我被困在这个问题上，它说：

编写一个查询以按字母顺序检索所有部门的列表，其中包含列 DEPARTMENT_ID 、 DEPARTMENT_NAME 、 LAST_NAME 、 FIRST_NAME 其中 last_name 和 first_name 是部门经理的名称，只要有一个。

我有使用部门的人力资源数据库，员工表我到目前为止写的是：

```
select department_id, department_name, e.last_name, e.first_name
from departments d, employees e
where e.department_id=d.department_id
and d.department_id=e.department_id
and d.manager_id=e.manager_id
having department_name = '%Manager%'; 
```

但我无法弄清楚，任何提示都会有所帮助，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:01:55.173

have 子句与 group by 相关。如果你没有分组依据，那么有子句就没有意义。

您只需要加入即可在员工表中为经理获取记录。

```
select department_id, department_name, e.last_name, e.first_name
from departments d, employees e
where d.manager_id=e.id 
```

更好的是使用较新的连接语法，

```
select dept.department_id, dept.department_name, emp.last_name, emp.first_name
from departments dept
  inner join employees emp on dept.manager_id = emp.id 
```

您不需要 e.department_id=d.department_id 和 d.department_id=e.department_id 的条件，（一方面这些是多余的，因此如果需要，您只需要一个），因为 employees.department_id 字段是指员工所在的部门，您想要的是该部门的经理员工记录。部门的经理员工记录表示为员工表主键的外键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T06:32:19.253

这可能会帮助你...

```
`select e.first_name,e.last_name,d.department_id ,d.department_name from employees e,departmets d where d.manager_id=e.employee_id order by d.department_name;` 
```

# r - R Shiny：如何将输入数据保存到服务器或全局访问输入变量？

> ID：15327506
> 
> 赞同：22
> 
> 时间：2013-03-10T20:57:54.457
> 
> 标签：r, rstudio, shiny, sendmailr

我正在制作一个向用户询问一些基本调查问题的应用程序。完成后，他们被要求通过滑动条提供数字输入，按继续，然后生成一个绘图，再次要求用户输入，更新绘图等。第一个输入应该是绘图上的 y1，第二个输入输入应该是图上的 y2 等。但另外我想保存用户输入的数据，以便我可以在我的 R 脚本中全局访问它，以便可以使用 sendmailR 将它发送给我，或者它可以作为文本文件下载到我的计算机上. 但我无法弄清楚如何做到这一点。这是我到目前为止所拥有的。

```
n=10 #number of times to ask the user for input which will be stored in harv[i]
Time = seq(n)
harv = rep(0,n) #initializing vector for storage of user input at time 1 through n

############### define server logic

shinyServer(function(input, output){

  # Compute the forumla text in a reactive expression since it is 
  # shared by the output$caption and output$mpgPlot expressions
  for(i in Time){

  # generate a plot
  output$yieldplot <- renderPlot({
   harv[i] = input$harvest
   plot(Time, harv, type='p', ylim=c(0,1))
  })

 }#for

}) 
```

这是 ui.R 文件

```
###########################################
#####   User Interface  ###################
###########################################

library(shiny)

#Define UI for app
shinyUI(pageWithSidebar(

  #title  
  headerPanel("Game"),
  mainPanel(   selectInput("workexp", "Have you ever been employed:",
                            list("No"="no", "Yes" = "yes")),    
               sliderInput("push", "Choose a number", 
                           min = 0, max = 1, value = 0.5, step= 0.01),
               submitButton("Enter"),
               plotOutput("yieldplot")                                                  
  )#mainpanel

))#shinyUI 
```

此外，我的 for 循环尝试一遍又一遍地生成情节将不起作用，我假设我需要做一些反应性的事情，但我需要找出一种方法来绘制所有存储在 harv 中的过去用户定义的条目。我查看了 downloadHanlder 但这会在用户的计算机上下载数据和绘图。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-14T21:12:23.210

答案是在 shinyServer 函数之外定义一个变量。然后通过使用`<<-`代替`<-`或在反应函数中进行全局分配`=`。然后你可以在反应函数之外访问它。但是，您只能在应用程序运行时访问它，但这对于通过电子邮件发送输入或将输入写入文本文件不是问题。

# php - 为什么 count(false) 返回 1？

> ID：15327508
> 
> 赞同：19
> 
> 时间：2013-03-10T20:57:58.450
> 
> 标签：php, count

你知道为什么`<?= count(false) ?>`退货`1`吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-10T20:59:44.957

这是指定的行为：

> 如果 var 不是数组或实现了 Countable 接口的对象，则返回 1。

根据[http://php.net/manual/en/function.count.php](http://php.net/manual/en/function.count.php)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-10T20:59:33.630

因为`false`也是一个值，如果 count() 没有得到数组而是一个有效的变量，它返回`true`的是`1`.

```
$result = count(null);
// $result == 0

$result = count(false);
// $result == 1 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-06T08:40:21.730

记住这一点的好方法：

*   count(false) 与以下基本相同：
*   计数（“一个布尔值”），因此结果是“一个”布尔值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-28T20:19:38.027

在我看来，PHP 正在阻止人们使用它`count()`来确定元素是数组还是对象。他们为此 ( `is_array()`, `is_object()`) 提供了专用函数，并且可能很容易天真地使用`count()`和检查`false`条件来确定数组或对象。相反，PHP 使非对象、非数组返回`1`（这是真实的），因此不能以这种方式天真地使用此方法（因为`0`对于空数组/对象是有效的、虚假的结果）。

这可能是在您描述的情况下选择函数返回的值的原因。

# android - 小部件未显示在小部件列表中 (Android 2.3)

> ID：15327512
> 
> 赞同：3
> 
> 时间：2013-03-10T20:58:30.227
> 
> 标签：android, widget, homescreen

每个人。我正在使用“WidgetQuotes Sample”在 Android 手机（Android 2.3）的主屏幕上显示一些报价。但是小部件没有出现或显示。我不知道为什么。

看看这些代码：

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.codeskraps.quotes"
  android:versionCode="1"
  android:versionName="1.0">
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="8"/>

<application android:icon="@drawable/icon" android:label="@string/app_name">

    <receiver android:name=".WidgetQuotes" android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
        </intent-filter>
        <meta-data 
            android:name="android.appwidget.provider"
            android:resource="@xml/widget_quotes_info" />
    </receiver>

    <service android:name=".UpdateWidgetService"></service>
     <activity
android:name="com.codeskraps.quotes.Main"
android:label="@string/app_name">
<intent-filter>
<action android:name="android.intent.action.MAIN" />

<category android:name="android.intent.category.LAUNCHER" />
<action android:name="com.codeskraps.quotes.ACTION_WIDGET_CONFIGURE"/>
</intent-filter>
</activity>
</application>
</manifest> 
```

WidgetQuotes.Java

```
 package com.codeskraps.quotes;

  import android.app.PendingIntent;
  import android.appwidget.AppWidgetManager;
  import android.appwidget.AppWidgetProvider;
  import android.content.Context;
  import android.content.Intent;
  import android.widget.RemoteViews;

  public class WidgetQuotes extends AppWidgetProvider {

    @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
    super.onUpdate(context, appWidgetManager, appWidgetIds);

    // Build the intent to call the service
    RemoteViews remoteViews = new RemoteViews(context.getPackageName(), R.layout.widget);
    Intent intent = new Intent(context.getApplicationContext(), UpdateWidgetService.class);
    intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, appWidgetIds);

    // To react to a click we have to use a pending intent as the
    // onClickListener is
    // excecuted by the homescreen application
    PendingIntent pendingIntent = PendingIntent.getService(
            context.getApplicationContext(), 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);

    remoteViews.setOnClickPendingIntent(R.id.widget_textview, pendingIntent);

    // Finally update all widgets with the information about the click
    // listener
    appWidgetManager.updateAppWidget(appWidgetIds, remoteViews);

    // Update the widgets via the service
    context.startService(intent);
}

     @Override
     public void onReceive(Context context, Intent intent) {
    super.onReceive(context, intent);
    }
     } 
```

更新小部件服务.Java

```
 package com.codeskraps.quotes;

 import java.util.ArrayList;
 import java.util.List;
 import java.util.Random;

 import android.app.Service;
 import android.appwidget.AppWidgetManager;
 import android.content.Intent;
 import android.os.IBinder;
 import android.util.Log;
 import android.widget.RemoteViews;

 public class UpdateWidgetService extends Service {
private static final String TAG = UpdateWidgetService.class.getSimpleName();

    @Override
   public IBinder onBind(Intent arg0) {
    return null;
    }

     @Override
    public void onStart(Intent intent, int startId) {
    super.onStart(intent, startId);

    Log.d(TAG, "onStart started");

    // Create some random data
    Random random = new Random();

    AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(this.getApplicationContext());

    int[] appWidgetIds = intent.getIntArrayExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS);

    if (appWidgetIds.length > 0) {

        for (int widgetId : appWidgetIds) {
            List<String> qList = getQuotes();
            int nextInt = random.nextInt(qList.size());

            RemoteViews remoteViews = new RemoteViews(getPackageName(), R.layout.widget);
            remoteViews.setTextViewText(R.id.widget_textview, qList.get(nextInt));
            appWidgetManager.updateAppWidget(widgetId, remoteViews);
        }
        stopSelf();
    }
    super.onStart(intent, startId);
}

public List<String> getQuotes(){
    List<String> qList = new ArrayList<String>();
    qList.add("When Life Gives You Questions, Google has Answers");
    qList.add("1f u c4n r34d th1s u r34lly n33d t0 g37 l41d ");
    qList.add("Microsoft: \"You've got questions. We've got dancing paperclips.\"");
    qList.add("If at first you don't succeed; call it version 1.0 ");
    qList.add("There are 10 types of people in the world: those who understand binary, and those who don't.");
    qList.add("I'm not anti-social; I'm just not user friendly");
    qList.add("The glass is neither half-full nor half-empty: it's twice as big as it needs to be.");
    qList.add("I would love to change the world, but they won't give me the source code");
    qList.add("A Life? Cool! Where can I download one of those?");
    qList.add("Artificial Intelligence is no match for Natural Stupidity.");
    qList.add("Windows has detected you do not have a keyboard. Press 'F9\" to continue.");
    qList.add("In a world without fences and walls, who needs Gates and Windows?");
    qList.add("MICROSOFT = Most Intelligent Customers Realize Our Software Only Fools Teenagers");
    qList.add("\"Concept: On the keyboard of life, always keep one finger on the escape button.\"");
    qList.add("My software never has bugs. It just develops random features.");
    qList.add("The box said 'Requires Windows 95 or better'. So I installed LINUX.");
    qList.add("Never make fun of the geeks, one day they will be your boss.");
    qList.add("Girls are like internet domain names, the ones I like are already taken.");
    qList.add("Better to be a geek than an idiot.");
    qList.add("Failure is not an option -- it comes bundled with Windows.");
    return qList;
   }
 } 
```

widget_quotes_info.xml

```
 <appwidget-provider
xmlns:android="http://schemas.android.com/apk/res/android"
android:minWidth="294dp"
android:minHeight="72dp"
android:updatePeriodMillis="180000"
android:initialLayout="@layout/widget" /> 
```

主.Java

```
 public class Main extends Activity {
    @Override
     protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
       sendBroadcast(new Intent(Intent.ACTION_MAIN)
       .addCategory(Intent.CATEGORY_HOME));
       setContentView(R.layout.main);
     }
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T05:12:26.470

尝试重新启动设备（模拟器）。或清除主屏幕的缓存。

我在 HTC (Android 2.3.7) 上遇到了类似的问题。通过清除 HTC Sense 缓存解决（HTC 替换标准 Android 主屏幕...）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-02T03:05:47.937

该应用程序无法安装到 sdcard，进入设备的设置->管理应用程序->找到该应用程序，然后单击“移动到手机”按钮（假设它实际上在 sdcard 上）..

# c - C编译器是否区分用户代码和库代码中定义的类型？

> ID：15327514
> 
> 赞同：4
> 
> 时间：2013-03-10T20:58:43.470
> 
> 标签：c, systypes.h

```
#include <sys/types.h>
//Line 2: typedef unsigned int uint;
//Line 3: typedef unsigned int uint;
int main() {
    uint a;
    return 0;
} 
```

给定上面的 C 代码，它编译成功，因为 uint 定义在`<sys/types.h>`. 即使它不是标准化的，它也是为了 Sys V 兼容性而添加的，并在代码中进行了注释。

取消注释上述代码的第二行仍然可以成功编译。据我了解，不允许重新定义一种类型，通过取消注释第二行和第三行来确认，这将导致一个编译错误。

为什么编译器足够聪明，可以知道 uint 是在标准库或用户代码中定义的？gcc 和 clang 都给出了一致的行为。

编辑：在这种情况下，链接不是游戏的一部分。该错误仅通过编译重现，即（-c 选项）。

添加行号以减少混淆。

编辑：

> 取消注释上述代码的第二行仍然可以成功编译。据我了解，不允许重新定义一种类型，通过取消注释第二行和第三行来确认，这将导致一个编译错误。

我不知道我为什么写这个。显然，取消注释第 2 行和第 3 行不会导致 gcc 的编译错误。Clang 给出的错误默认编译选项要严格得多，可以通过传递一些参数来调整。

[这里](https://stackoverflow.com/questions/8594954/repeated-typedefs-invalid-in-c-but-valid-in-c)描述了是否允许使用多个 typedef，结果是相当复杂的。无论如何只是尽量避免重复的typedef。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T16:29:48.113

重复声明在 C 中是完全有效的，因此如果您在描述时取消注释这两行，您将不会看到任何错误，这与您所说的相反。

有两个*不同*的名称声明将是一个错误。

重复*定义*也是一个错误，但是 typedef 不是定义（尽管有`def`），它是一个声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T21:03:01.063

标准库也是用户代码，通常由另一个用户编写。

> 取消注释上述代码的第二行仍然可以成功编译。据我了解，不允许重新定义一种类型，通过取消注释第二行和第三行来确认，这将导致一个编译错误。

在我的 gcc 上没有。（版本 4.5.3）

> 为什么编译器足够聪明，可以知道 uint 是在标准库或用户代码中定义的？gcc 和 clang 都给出了一致的行为。

编译器不知道用户代码和标准库中的代码之间的区别。虽然编译器可以区分标准库文件和用户代码，但我真的看不出有任何理由这样做。它所看到的只是它可以 lex/parse/codegen 的文本数据。

# mysql - MySQL 同时对同一张表执行 2 个查询

> ID：15327516
> 
> 赞同：4
> 
> 时间：2013-03-10T20:58:46.367
> 
> 标签：mysql, sql, database

新值整天都被添加到 MySQL 数据库中。此表中有超过 800 万行。因为有很多旧值，我想在不停止插入值的 Java 程序的情况下清理它们。

我将此查询发送到 MySQL：

```
DELETE FROM `tablename`
WHERE `from` <= (date_add(now(), interval -20 DAY)) 
```

但发生的情况是 Java 程序停止向表中添加新值。有什么方法可以在不编辑 Java 程序的情况下处理这个问题？我愿意每天将查询作为 cronjob 运行一次。

我也尝试过使用参数 LOW_PRIORITY，但它没有任何区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T22:40:17.177

看来您正在使用旧的 MyISAM 数据库引擎。

不幸的是 MyISAM 使用表级锁定。当插入、更新或删除一行时，对该表的所有其他更改都会暂停，直到该请求完成。在您的情况下，长时间运行会`DELETE`阻止任何`INSERT`s 进入该表。

您可以通过将表引擎更改为 InnoDB 来改进它，如下所示：

```
ALTER TABLE mytable ENGINE = innodb; 
```

InnoDB 引擎是完全事务性的，不会在`INSERT`,`UPDATE`或期间锁定整个表`DELETE`，因此您的问题应该会消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T22:49:48.607

我想你需要改变你的存储引擎。使用 .执行此操作`ALTER TABLE tbl ENGINE = innodb`，但请注意[MyISAM 和 Innodb 之间的差异](http://www.mysqlperformanceblog.com/2009/01/12/should-you-move-from-myisam-to-innodb/)。

# sql - 哪个约束确保一列输入了一些值？

> ID：15327517
> 
> 赞同：1
> 
> 时间：2013-03-10T20:58:46.657
> 
> 标签：sql, sql-server, sql-server-2008

哪个约束确保一列输入了一些值？我在主键和非空约束之间感到困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T21:00:53.410

一个`NOT NULL`约束。

参与 PK 的所有列也必须不允许`NULL`，但 PK 约束保证了更多的唯一性，即表中的任何两行都不能具有相同的主键值。

在 SQL Server 中，即使在语法上您可以`NOT NULL`在 DDL 中命名一个约束，但它与其他约束的不同之处在于，实际上没有为约束本身存储元数据（甚至包括名称）。

```
CREATE TABLE T
(
X INT CONSTRAINT NotNull NOT NULL
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T21:45:57.553

我没有看到的另一点是：`NULL`空字符串是两个非常不同的东西，但它们通常被社区的大部分人认为是可以互换的。

您可以将`varchar`列声明为，`NOT NULL`但您仍然可以这样做：

```
DECLARE @x TABLE(y VARCHAR(32) NOT NULL);

INSERT @x(y) VALUES(''); 
```

因此，如果您的目标是确保有一个既不是零长度字符串`NULL` *也不*是零长度字符串的有效值，您还可以添加一个检查约束，例如

```
DECLARE @x TABLE(y VARCHAR(32) NOT NULL CHECK (DATALENGTH(LTRIM(y)) > 0)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T21:10:43.823

```
NOT NULL 
```

是字段具有值的条件。您可以强制字段始终为插入或更新的每条记录输入一个值，从而使表定义中的字段为 NOT NULL。

主键必须满足以下三个条件：

1.  该字段的值不是 NULL。
2.  价值观是独一无二的。
3.  这些值是不可变的。

数据库可以使用唯一索引（以及字段上的非空条件）强制执行前两个条件。

第三个条件通常不会由数据库强制执行。数据库通常允许更改主键字段，因此 DBA 可以“修复”它们。所以第三个条件更具哲学性，因为您同意使用密钥进行识别，而不是编写更改值的应用程序，除非旨在让管理员修复密钥。

我这里一直使用字段，但是主键可以是复合主键，由满足条件的字段的任意组合组成。与前 2 个或所有 3 个条件匹配的任何字段组合称为候选键。

只有一个候选键可以用作主键。哪一个只是一个随意的选择。

# css - 带有图像的阴影线作为垂直分隔符 btw DIV - 如何放置顶部和底部图像？

> ID：15327518
> 
> 赞同：0
> 
> 时间：2013-03-10T20:58:51.437
> 
> 标签：css

我想在我的 DIV 之间有一条细的“阴影”线，作为分隔符。由于我希望阴影线更细且顶部和底部的不透明度更高，因此我创建了 3 个图像：中间阴影、顶部阴影和底部阴影。问题：我不知道如何将“顶部阴影”图像放置在“中间阴影”顶部和底部“底部”阴影（没有多个 DIV）。我附上了在烟花中完成的图像，您可以在其中看到阴影线的示例。许多 tks![在此处输入图像描述](../Images/508fe5fdd10229aca259f89f50fe0eb1.png)

```
div#content-center {
    overflow: hidden;
    background: khaki;
    background: transparent url('images/middle_shadow.png') repeat-y top left;
    padding: 0px 0px 0px 50px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:15:37.983

您也可以使用`:before`和`:after`psedo 元素来执行此操作。 如果您不熟悉，请[在此处阅读它们。](http://coding.smashingmagazine.com/2011/07/13/learning-to-use-the-before-and-after-pseudo-elements-in-css/)

```
#content-center{
    background:  url('images/shadow_repeat.png') center right repeat-y;
}

#content-center:before,
#content-center:after{
    content:'';
    display:inline-block;
    position: absolute;
    background-repeat: none;

    /*size these to be what you need*/
    height:100px;
    width:100px;
}

#content-center:before{
    top:0;
    background-image: url('images/shadow_top.png');
}

#content-center:after{
    bottom:0;
    background-image:url('images/shadow_bottom.png');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T21:06:38.177

给出多个背景：

```
background:  url('images/middle_shadow.png') top left, url('images/middle_shadow2.png') center left,url('images/middle_shadow3.png') repeat-y bottom left; 
```

# iphone - iOS Safari - 将元素放置在视口之外

> ID：15327519
> 
> 赞同：2
> 
> 时间：2013-03-10T20:58:53.613
> 
> 标签：iphone, ios, css, ios6

我想知道是否可以`position: absolute;`在 iOS6 的视口之外定位元素。

即使当我使用`<meta name="viewport" content="width=640, maximum-scale=0.5, initial-scale=0.5, minimum-scale=0.5" />`它时，如果一个元素被定位为类似`right: 0; margin-right: -100px;`（视口外 100 像素），它也会使视口具有更大的宽度。

iOS 试图在视口中包含这个元素，这不是我想要的。我想让它部分可见和部分隐藏。iOS 添加了水平滚动条并包含了应该隐藏的元素部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:08:01.797

是的，如果您使用包装器**`overflow: hidden`**

此示例显示了一个 100x100px 的红色矩形，它位于视口右侧 50px 的位置，但视口不包括它。

创建一个**`#limit`**与视口右侧对齐的容器。通过设置溢出防止内容放大视口。

```
<!DOCTYPE html>
<html>
    <head>
        <style type="text/css">
            #limit {
                position: absolute;
                top: 0px;
                right: 0px;
                width: 100px;
                height: 100px;
                overflow: hidden;
            }

            #offset {
                position: absolute;
                top: 0px;
                right: -50px;
                width: 100px;
                height: 100px;
                background: #f00;
            }
        </style>
    </head>
    <body>
        <div id="limit">
            <div id="offset">
                Hello
            </div>
        </div>
    </body>
</html> 
```

# asp.net - 表单身份验证和身份验证票 cookie 域

> ID：15327520
> 
> 赞同：3
> 
> 时间：2013-03-10T20:59:12.090
> 
> 标签：asp.net, cookies, forms-authentication, subdomain

我正在尝试将 DEV 环境配置为支持在子域之间共享身份验证和会话的子域。

目前，我在 DEV 机器上配置了 IIS 和 hosts 文件来处理对 mydomain、sd1.mydomain、sd2.mydomain、sd3.mydomain 的请求。Web 应用程序本身按预期工作，我可以浏览所有子域上的所有页面，但需要身份验证的页面除外。当我尝试登录时，服务器端的一切看起来都很完美（用户找到了，cookie 创建并添加到响应中），但是 cookie 没有到达浏览器（我尝试了 Chrome 和 IE）。

我有一个创建和存储身份验证票证的代码，我在 web.config 的 authentication.forms 中设置了 domain=".mydomain" ：

```
var now = DateTime.UtcNow.ToLocalTime();

var ticket = new FormsAuthenticationTicket(
 1 /*version*/, _user.Username, now, now.Add(FormsAuthentication.Timeout),
isPersistentCookie, _user.Username, FormsAuthentication.FormsCookiePath);

var encryptedTicket = FormsAuthentication.Encrypt(ticket);

var cookie = new HttpCookie(FormsAuthentication.FormsCookieName, encryptedTicket);
cookie.HttpOnly = true;
if (ticket.IsPersistent)
{
     cookie.Expires = ticket.Expiration;
}
cookie.Secure = FormsAuthentication.RequireSSL;
cookie.Path = FormsAuthentication.FormsCookiePath;
if (FormsAuthentication.CookieDomain != null)
{
     cookie.Domain = FormsAuthentication.CookieDomain;
}

_httpContext.Response.Cookies.Add(cookie); 
```

当我调试时，上面的代码工作正常，用户是正确的，并且具有正确域的 cookie 被添加到响应中。

如果我从 web.config 中删除 domain=".mydomain"，则身份验证有效，但仅适用于 mydomain 而不是子域。

我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T21:15:01.633

从 中删除开头的点`domain=`，您必须`domain=".mydomain.com"`像此处所述的第一个点一样拥有它[http://www.w3.org/Protocols/rfc2109/rfc2109](http://www.w3.org/Protocols/rfc2109/rfc2109)（第 7 页），感谢@AlbatrossCafe 的评论

此设置适用于 cookie 和身份验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T21:01:17.780

没有什么不对。如果 cookie 上未提供域，则 cookie 应该仅用于发布域。

# php - PHP不会向mysql发送数据！？（未定义的变量错误）

> ID：15327522
> 
> 赞同：0
> 
> 时间：2013-03-10T20:59:23.233
> 
> 标签：php, mysql, actionscript-3

我有一些从 adobe flash AS3 接收的数据，PHP 文件接收到它，但我似乎无法将数据发送到 mySQL...

这是我的PHP代码：

```
<?php

if(isset($_POST['userFirstName'])){ $userFirstName = $_POST['userFirstName']; }
if(isset($_POST['userLastName'])){ $userLastName = $_POST['userLastName']; }
if(isset($_POST['userEmail'])){ $userEmail = $_POST['userEmail']; }
if(isset($_POST['userNumber'])){ $userNumber = $_POST['userNumber']; }
if(isset($_POST['userMsg'])){ $userMsg = $_POST['userMsg']; }

$username="******";
$password="*******";
$database="b-elite-fitness";

mysql_connect("localhost","$username","$password") or die (mysql_error());
mysql_select_db("$database") or die (mysql_error());

mysql_query("INSERT INTO formdp 
(ID ,firstname, lastname, email, number, message) 
VALUES('','$userFirstName[firstname]','$userLastName[lastname]','$userEmail[email]','$userNumber[number]','$userMsg[message]')")
or die (mysql_error());
echo "foo=bar&checking=ok";
mysql_close();
?> 
```

我得到这个php文件的错误......

```
( ! ) Notice: Undefined variable: userFirstName in C:\wamp\www\NewtestForm\form.php on line 18 Call Stack
#   Time    Memory  Function    Location 1  
0.0094  253176  {main}( )   ..\form.php:0

( ! ) Notice: Undefined variable: userLastName in C:\wamp\www\NewtestForm\form.php on line 18 Call Stack
#   Time    Memory  Function    Location 1  
0.0094  253176  {main}( )   ..\form.php:0

( ! ) Notice: Undefined variable: userEmail in C:\wamp\www\NewtestForm\form.php on line 18 Call Stack
#   Time    Memory  Function    Location 1  
0.0094  253176  {main}( )   ..\form.php:0

( ! ) Notice: Undefined variable: userNumber in C:\wamp\www\NewtestForm\form.php on line 18 Call Stack
#   Time    Memory  Function    Location 1  
0.0094  253176  {main}( )   ..\form.php:0

( ! ) Notice: Undefined variable: userMsg in C:\wamp\www\NewtestForm\form.php on line 18 Call Stack
#   Time    Memory  Function    Location 1  
0.0094  253176  {main}( )   ..\form.php:0 
```

谁能帮帮我这几天我一直在解决这个问题......

我是 PHP 新手，所以也可以解释一下...

编辑更新....我更改了编码，但是仍然遇到相同的错误...这是我的新编码...。

```
<?php

if(isset($_POST['userFirstName'])){ $userFirstName = $_POST['userFirstName']; }
if(isset($_POST['userLastName'])){ $userLastName = $_POST['userLastName']; }
if(isset($_POST['userEmail'])){ $userEmail = $_POST['userEmail']; }
if(isset($_POST['userNumber'])){ $userNumber = $_POST['userNumber']; }
if(isset($_POST['userMsg'])){ $userMsg = $_POST['userMsg']; }

$username="root";
$password="dp10aap";
$database="b-elite-fitness";

mysql_connect("localhost","$username","$password") or die (mysql_error());
mysql_select_db("$database") or die (mysql_error());

mysql_query("INSERT INTO formdp 
    (id ,firstname, lastname, email, number, message) 
    VALUES('NULL','$userFirstName','$userLastName','$userEmail','$userNumber','$userMsg')") 
or die (mysql_error());
mysql_close();
?> 
```

这是我的错误...

( ! ) 注意：未定义的变量：C:\wamp\www\NewtestForm\form.php 中的 userFirstName 第 18 行调用堆栈

# 时间记忆功能位置

1 0.0112 252456 {main}( ) ..\form.php:0

( ! ) 注意：未定义变量：C:\wamp\www\NewtestForm\form.php 第 18 行调用堆栈中的 userLastName

# 时间记忆功能位置

1 0.0112 252456 {main}( ) ..\form.php:0

( ! ) 注意：未定义变量：C:\wamp\www\NewtestForm\form.php 中的 userEmail 第 18 行调用堆栈

# 时间记忆功能位置

1 0.0112 252456 {main}( ) ..\form.php:0

( ! ) 注意：未定义变量：C:\wamp\www\NewtestForm\form.php 中第 18 行调用堆栈中的 userNumber

# 时间记忆功能位置

1 0.0112 252456 {main}( ) ..\form.php:0

( ! ) 注意：未定义的变量：C:\wamp\www\NewtestForm\form.php 中的 userMsg 第 18 行调用堆栈

# 时间记忆功能位置

1 0.0112 252456 {main}( ) ..\form.php:0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:02:05.953

这是不正确的：`$userFirstName[firstname]`

我假设这`$_POST['userFirstName']`是一个字符串，在这种情况下，您只会使用它`$userFirstName`来访问变量。如果它是一个数组，则缺少引号来访问数组索引：`$userFirstName['firstname']`。

其余变量也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T21:05:22.683

您通过添加变量来制作自己的变量关联数组`['identifier']`。这使它们与最初的不同，然后您尝试使用它们，就好像您在其中添加了一些价值一样，这就是您得到错误的原因。只需按原样使用它们。像这样

```
mysql_query("INSERT INTO formdp (ID ,firstname, lastname, email, number, message) 
VALUES('','$userFirstName','$userLastName','$userEmail','$userNumber','$userMsg')")
or die (mysql_error()); 
```

请记住清理用户的输入，并注意不推荐使用`PHP`'扩展名。`mysql`考虑`mysqli`或`PDO`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T01:51:33.000

您的 php 代码没有收到您的 POST 数据。您是否对 $_POST 进行了 vardump 以查看它到底持有什么？

# sed - sed windows 替换包含空格的字符串

> ID：15327537
> 
> 赞同：0
> 
> 时间：2013-03-10T21:00:03.267
> 
> 标签：sed

我正在尝试通过 windows cmd shell 使用 sed for windows`AUD A0-FX.20`替换字符串。`AUD/USD.20`

我认为 Windows shell 不能很好地处理字符串中的空格。这是我正在运行的 -

```
SED -e s{AUD A0-FX.20{AUD/USD.20{  "C:\sed\bin\text.txt" > "C:\sed\bin\text1.txt" 
```

但我得到一个错误`SED: -e expression #1, char 5: unterminated`的命令`

我`{`用作分隔符是因为我已经`/`在替换字符串中有一个。任何帮助，将不胜感激。我正在使用来自[http://gnuwin32.sourceforge.net/packages/sed.htm](http://gnuwin32.sourceforge.net/packages/sed.htm)`sed`的 windows

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T21:05:50.830

我不知道这是否会解决您的问题，因为无法在 Windows 中进行测试，但我会给出两个建议：

1.  `.`是特殊的`sed`并且匹配任何字符。逃避它喜欢`\.`
2.  用单引号或双引号引用您的`sed`说明，例如`"s{...{...{"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T21:07:38.853

尝试：

```
sed "s|AUD A0-FX\.20|AUD/USD.20|" 
```

# c++ - 为什么从 std::placeholders::_1 而不是 _0 开始？

> ID：15327538
> 
> 赞同：13
> 
> 时间：2013-03-10T21:00:10.380
> 
> 标签：c++, c++11, placeholder, stdbind

c++ 中的大多数内容都是 0，而不是基于 1。只是出于好奇，为什么占位符 1 基于？意思是 _1 是第一个参数，而不是 _0。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-10T21:11:02.930

因为它就是这样`boost::bind`做的，Boost.Bind 作者编写了将其添加到 TR1 的提案，并被复制到标准中。

至于为什么 Boost.Bind 这样做，我不知道，但我会冒险猜测它可能`std::bind1st`与`std::bind2nd`来自 STL 的 1998 年标准相匹配。在那种情况下，“第一个”即“第一个”是正确的（即使在从零开始的索引系统中，索引零处的项目也是第*一个*，而不是第*零*个项目。）

所以也许占位符应该是`_1st`, `_2nd`,等`_3rd`，`_4th`但对于不知道[序数](http://en.wikipedia.org/wiki/Ordinal_number_%28linguistics%29)不一致后缀的非英语使用者来说，它可能更容易记住`_1`等`_2`。

不过只是一个疯狂的猜测。我从来没有想过这个问题，所以现在我也很好奇:-)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-10T21:08:42.357

该约定可能是从前身 Boost.bind 继承而来的。

至于为什么 Boost 库选择从 1 开始：作为 C++03 一部分的绑定器使用 first_argument 和 second_argument 作为类型名称。

C++ 标准库具有`bind1st()`and `bind2nd()`，因此对 n 元函数的自然概括是“bind 3rd”、“bind 4th”等等。

这些都不是真正的原因，但提供了一个可能的解释。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-07-08T02:13:55.390

这样做的一个优点是`std::is_placeholder`. 结果不仅仅是真或假，它是占位符本身的值。

```
std::is_placeholder<_1>::value == 1
std::is_placeholder<_2>::value == 2
std::is_placeholder<_7>::value == 7 
```

但任何不是占位符的东西都会评估为`0`（当然，这是错误的）。如果占位符从`_0`这里开始就行不通了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T22:50:52.910

boost 绑定库的设计者是 MSDOS 批处理语法的粉丝。

在批处理语法中，`%1`指的是第一个参数、`%2`第二个、`%3`第三个等。但由于`%`不是有效的 C++ 标识符，他们将其替换为`_`.

在 MSDOS 批处理语法中，`%0`是指批处理文件的名称。在这种情况下，`_0`将绑定到您调用的函数`_1`,`_2`等`_3`。

实际上，不，不是。

# objective-c - Objective-c OSX 类继承

> ID：15327539
> 
> 赞同：-1
> 
> 时间：2013-03-10T21:00:13.840
> 
> 标签：objective-c

我在“导航”类中有一个方法“ShowPop:nil”——它显示一个弹出框。

我从 AppDelegate.h 继承了 Navigation 类。当我从 AppDelegate.m 调用 [Self ShowPop:nill] 时，弹出框不会弹出，但该方法会运行。

请注意，我知道 popover 方法有效，因为它完全从同一方法的 IB 按钮连接中弹出。

下面的示例代码。

```
@interface Navigation_Main : NSObject
{
}
    @property (weak) IBOutlet NSPopover *popover_AddStuff;
    - (IBAction)ShowPop:(id)sender;

- (IBAction)ShowPop:(id)sender;
{
    [_popover_AddStuff showRelativeToRect:[sender bounds] ofView:sender preferredEdge:NSMaxYEdge];
} 
```

.

```
**#import "Navigation_Main.h"**
@interface AppDelegate : Navigation_Main <NSApplicationDelegate,NSTextFieldDelegate>
{
    - (IBAction)showPopup:(id)sender;
}

- (IBAction)showPopup:(id)sender {
    //[self ShowPop:nil]; ---No pop
    [super ShowPop:nil];  ---No pop
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T21:23:24.953

当定位视图为 nil 时，NSPopover 会抛出异常，并且（因此）不会显示弹出框。确保您传递一个视图以显示弹出框，而不是 nil。

# android - 使用edittext更改mac地址android蓝牙应用程序

> ID：15327544
> 
> 赞同：0
> 
> 时间：2013-03-10T21:00:33.023
> 
> 标签：android, variables, android-intent, bluetooth, android-edittext

我有一个关于在 android 中使用 edittext 函数的问题。

我的应用程序的主要活动中有以下代码：

```
 private static String address = "00:00:00:00:00:00";
  //Then I have the on create below this 
```

在该行中，每次都必须手动编辑和重新编译 MAC 地址。我如何在另一个活动中使用edittext并获取用户输入的值并替换mac地址。

为了阐明第二个活动，它有一个用于用户输入的编辑文本区域，然后它有一个供用户确认信息的按钮。我希望活动做的是当用户单击按钮时，它将 MAC 地址发送到主要活动 [上图]。

此外，我在主要活动中设置了各种按钮来发送各种蓝牙信号。例如，按钮 fwd.id 通过蓝牙发送信号“Front”：

```
 public void onClick(View v) {
    sendData("Front"); 
```

我想知道如果在同一页面上[第二个配置活动]，我可以创建另一个编辑文本来更改正在发送的信号[在这种情况下为“前”]。例如，如果用户想要发送信号，8 而不是 'front' 他们会将其输入到编辑文本中，单击与上面相同的按钮以确认 mac 地址，信号将更改为他们输入的任何内容。

如果有人可以请帮助我，那就太好了。先感谢您。如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T21:22:19.877

可以有多种方法来实现这一点：

1.  您的地址变量已经被声明为静态的，您需要做的就是将其声明为公共的。从 EditText 字段中获取文本并将字符串地址设置为所需值。例如，如果您的主要活动称为 MainActivity，那么在第二个活动中您将执行以下操作：

    ```
    MainActivity.address = newAddress // newAddress will be a string coming in from value entered in the EditText field. 
    ```

2.  启动包含 EditText 字段的第二个 Activity 以获取结果。这意味着当第二个 Activity 完成时，将调用 MainActivity 的 onActivityResult 方法，因为这将是启动第二个 Activity 的 Activity。

然后，您可以将 EditText 中的结果传递给您的主 Activity，并在方法 onActivityResult 方法中更新您的字符串地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T21:39:59.043

据我了解您的问题，您可以使用 intent.putExtra() 方法从编辑文本中传递地址。这应该是这样的：

```
public void onClick(View v) {
Intent i = new Intent(CurrentActivity.this, AnotherActivity.class);
i.putExtra("macaddress", editText.getText().toString());
startActivity(i); 
```

现在在另一个活动中，您可以将 mac 地址的值设置为此意图携带的值

```
String address=getIntent().getExtras().getString("macaddress"); 
```

希望它有帮助！

# php - 将数组值加入字符串

> ID：15327546
> 
> 赞同：0
> 
> 时间：2013-03-10T21:00:41.550
> 
> 标签：php

我有一个包含多个对象的 PHP 数组。我正在尝试将某个键中的值连接到一个用逗号分隔的字符串中。var_dump 的输出：

```
Array
(
    [0] => stdClass Object
        (
            [tag_id] => 111
            [tag_name] => thing 1
            [tag_link] => url_1
        )

    [1] => stdClass Object
        (
            [tag_id] => 663
            [tag_name] => thing 2
            [tag_link] => url_2
        )

) 
```

字符串必须是 $string = 'thing 1,thing 2'。我尝试使用 foreach 循环，但我完全卡住了。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T21:07:40.543

上面的答案有点轻，也许可以将其作为`foreach`循环运行。

```
$names = array();
foreach ($array as $k => $v) {
    $names[] = $v->tag_name;
}
$string = implode(',', $names); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T21:03:18.107

试试这样

```
$string = $array[0]->tag_name.','.$array[1]->tag_name; 
```

对于其他元素

```
 $string = '';
 foreach($array as $object) $string.=$object->tag_name.',';
 $string = substr($string,0,-1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T21:07:58.420

```
$output = '';
foreach($test as $t){
    $output .= $t->tag_name . ',';
}
$output = substr($output, 0, -1);
echo $output; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T14:28:23.433

使用这样的东西：

```
implode(',', array_map(function ($el) {
    return $el->tag_name;
}, $array)); 
```

# c++ - 如何删除类内的实例类

> ID：15327549
> 
> 赞同：0
> 
> 时间：2013-03-10T21:00:52.957
> 
> 标签：c++, class

考虑这个代码片段：

```
#include <iostream>

using namespace std;

class X {
  public:
    class Z {
      public:
        void f() {
          cout << "Z().f()" << endl;
        }
    };

    class Y {
      public:
        int A;
        Y(int x) {
          A = x;
        }

        int c() {
          return A;
        }
    };

    public:
      Z* z;

      // How to free Y instance ?
      Y* a(int x) {
        Y* y = new Y(x);
        return y;
      }

    public:
      X() {
        z = new Z();
      }

      ~X() {
        delete z;
      }
};

int main(void) {
  int a;
  X* x = new X();
  cout << "input :" << endl;
  cin >> a;
  cout << "result : " << x->a(a)->c() << endl;
  x->z->f();
  delete x;
  return 0;
} 
```

虽然 Z 对象可以在 ~X() 上轻松释放，但我很好奇如何释放 Y 对象？因为我没有分配任何变量来保存它的内存地址。

顺便说一句，这样的术语是什么？x->a(a)->c()

谢谢你。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T21:05:25.007

```
// How to free Y instance ?
Y* a(int x) {
  Y* y = new Y(x);
  return y;
} 
```

好吧，问题是从函数原型中并不清楚*谁*负责删除实例。但是由于只有调用者拥有实例的句柄，所以删除应该是被调用者的责任。这应该有据可查。但最好的方法是使用具有正确所有权语义的[智能指针。](http://en.wikipedia.org/wiki/Smart_pointer)在这种情况下，`std::unique_ptr<Y>`似乎是一个合适的匹配，并且仅使用它的事实就清楚地表明了意图，消除了对有关所有权的文档的需要：

```
std::unique_ptr<Y> a(int x)
{
  return std::unique_ptr<Y>( new Y(x) );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T21:08:42.390

您正在从函数中返回内存，因此由调用者来删除它：

```
X x;

Y *ptr = x.a(5);

delete ptr; 
```

希望你永远不必做这样的事情。如果必须，那么建议您使用智能指针，如 a`shared_ptr`或`unique_ptr`。

```
std::unique_ptr<Y> a(int x) {
  return std::unique_ptr<Y>(new Y(x));
} 
```

有了这个，你永远不必担心删除实例，因为指针类的析构函数承担了这个责任。

# python - 创建单词索引

> ID：15327559
> 
> 赞同：0
> 
> 时间：2013-03-10T21:01:28.207
> 
> 标签：python

我目前正在尝试创建单词索引，从文本文件中读取每一行并检查单词是否在该行中。如果是这样，它会打印出数字行并继续检查。在打印每个单词和行号时，我已经让它按我想要的方式工作，但我不确定我可以使用什么存储系统来包含每个数字。

代码示例：

```
def index(filename, wordList):
    'string, list(string) ==> string & int, returns an index of words with the line number\
    each word occurs in'
    indexDict = {}
    res = []
    infile = open(filename, 'r')
    count = 0
    line = infile.readline()
    while line != '':
        count += 1
        for word in wordList:
            if word in line:
                #indexDict[word] = [count]
                print(word, count)
        line = infile.readline()
    #return indexDict 
```

这会打印单词以及当时的计数（行号），但我要做的是存储数字，以便稍后我可以打印出来

```
word linenumber

word2 linenumber, linenumber 
```

等等。如果我将每个行号放在一个列表中，我觉得字典可以解决这个问题，这样每个键可以包含多个值，但我得到的最接近的是：

```
{'mortal': [30], 'dying': [9], 'ghastly': [82], 'ghost': [9], 'raven': [120], 'evil': [106], 'demon': [122]} 
```

当我希望它显示为：

```
{'mortal': [30], 'dying': [9], 'ghastly': [82], 'ghost': [9], 'raven': [44, 53, 55, 64, 78, 97, 104, 111, 118, 120], 'evil': [99, 106], 'demon': [122]} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T21:17:02.367

尝试这样的事情：

```
import collections
def index(filename, wordList):
    indexDict = collections.defaultdict(list)
    with open(filename) as infile:
        for (i, line) in enumerate(infile.readlines()):
            for word in wordList:
                if word in line:
                    indexDict[word].append(i+1)
    return indexDict 
```

这会产生与您的示例完全相同的结果（使用 Poe's Raven）。

或者，您可以考虑使用 normal`dict`而不是 a`defaultdict`并使用列表中的所有单词对其进行初始化；确保`indexDict`即使对于不在文本中的单词也包含条目。

另外，请注意`enumerate`. 这个内置函数对于迭代某个列表的索引和该索引处的项目（如文件中的行）非常有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T21:19:27.887

可能有一种更 Pythonic 的方式来编写它，但只是为了便于阅读，你可以试试这个（一个简单的例子）：

```
dict = {1: [], 2: [], 3: []}

list = [1,2,2,2,3,3]

for k in dict.keys():
    for i in list:
        if i == k:
            dict[k].append(i)

In [7]: dict
Out[7]: {1: [1], 2: [2, 2, 2], 3: [3, 3]} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-10T21:20:56.283

您正在用这一行替换旧值

```
indexDict[word] = [count] 
```

将其更改为

```
indexDict[word] = indexDict.setdefault(word, []) + [count] 
```

Will yield the answer you want. It'll get the current value of indexDict[word] and append the new count to it, if there is no indexDict[word], it creates a new empty list and append count to it.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-10T21:20:04.740

如果列表已经存在，您需要将下一个项目附加到列表中。

即使是第一次找到一个单词，让列表已经存在的最简单方法是使用[`collections.defaultdict`该类](http://docs.python.org/2/library/collections.html#collections.defaultdict)来跟踪您的单词到行的映射：

```
from collections import defaultdict

def index(filename, wordList):
    indexDict = defaultdict(list)
    with open(filename, 'r') as infile:
        for i, line in enumerate(infile):
            for word in wordList:
                if word in line:
                    indexDict[word].append(i)
                    print(word, i)

    return indexDict 
```

我使用最佳实践稍微简化了您的代码；作为上下文管理器打开文件，这样它会在完成后自动关闭，并`enumerate()`用于动态创建行号。

`set(line.split())`如果你将你的行变成一组单词（也许，但这不会删除标点符号），你可以进一步加快速度（并使其更准确） ，因为那时你可以使用集合交集测试来对抗`wordList`（也是set)，这样可以更快地找到匹配的单词。

# django - Django Rest Framework：序列化对象？

> ID：15327561
> 
> 赞同：3
> 
> 时间：2013-03-10T21:01:34.597
> 
> 标签：django, django-rest-framework

我想从 django-taggit 序列化我的标签，而不是模型。我可以通过 Tag.objects.all() 获取对象，如何序列化对象而不是模型？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T22:07:09.530

解决了它，这与我应该使用 APIView 而不是 generics.ListCreateAPIView 的事实有关：

```
class TagList(APIView):
    """
    All tags in use on this system
    """
    def get(self, request, format=None):
        data = [tag.name for tag in Tag.objects.all()]
        return Response(data) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-06T18:34:14.743

这可能是一个非常晚的答案并且不再相关，但是对于正在寻找在 Django Rest Framework 中解析和返回标签的良好解决方案的人可以看看这里：

[https://github.com/glemmaPaul/django-taggit-serializer](https://github.com/glemmaPaul/django-taggit-serializer)

# java - 如何将所选项目从一个默认列表移动到另一个默认列表

> ID：15327570
> 
> 赞同：-1
> 
> 时间：2013-03-10T21:02:10.697
> 
> 标签：java, swing

这是代码，我到目前为止，所以我想将选定的项目从一个列表移动到另一个，即使我不知道，就像在第二个列表中一样，我需要 getElement 或 addelement ...请帮助我..you可以通过举个例子向我解释一下，我该怎么做才能将一个元素从列表移动到另一个元素

```
 //this is the code, just to the set the position  
GridBagConstraints gridConstraints;  
citiesLabel.setText("Destination City");
gridConstraints = new GridBagConstraints();
gridConstraints.gridx = 0;
gridConstraints.gridy = 0;

// below code is also set the position of the list

gridConstraints.insets = new Insets(10, 0, 0, 0);
getContentPane().add(citiesLabel, gridConstraints);
citiesScrollPane.setPreferredSize(new Dimension(150, 100));
citiesScrollPane.setViewportView(citiesList);
gridConstraints = new GridBagConstraints();
gridConstraints.gridx = 0;
gridConstraints.gridy = 1;
gridConstraints.insets = new Insets(10, 10, 10, 10);
getContentPane().add(citiesScrollPane, gridConstraints);

**This is my first list , which have all the values , that i want to move**

 final DefaultListModel citiesListModel = new DefaultListModel();
citiesListModel.addElement("San Diego");
citiesListModel.addElement("Los Angeles");
citiesListModel.addElement("Orange County");
citiesListModel.addElement("Ontario");
citiesListModel.addElement("Bakersfield");
citiesListModel.addElement("Oakland");
citiesListModel.addElement("Sacramento");
citiesListModel.addElement("San Jose");
citiesListModel.addElement("San Francisco");
citiesListModel.addElement("Eureka");
citiesListModel.addElement("Eugene");
citiesListModel.addElement("Portland");
citiesListModel.addElement("Spokane");
citiesListModel.addElement("Seattle");
citiesList.setModel(citiesListModel);
citiesList.setSelectedIndex(0); 
```

// 此代码设置所选列表的位置

```
 SecondLabel.setText("Selected Cities");
gridConstraints = new GridBagConstraints();
gridConstraints.gridx = 1;
gridConstraints.gridy = 0;

gridConstraints.insets = new Insets(10, 0, 0, 0);
getContentPane().add(SecondLabel, gridConstraints);
SecondScrollPane.setPreferredSize(new Dimension(150, 100));
SecondScrollPane.setViewportView(SecondList);
gridConstraints = new GridBagConstraints();
gridConstraints.gridx = 1;
gridConstraints.gridy = 1;
gridConstraints.insets = new Insets(10, 10, 10, 10);
getContentPane().add(SecondScrollPane, gridConstraints);

**This is my second list, which is empty, where i want to the moved value..**

DefaultListModel citiesListModel1 = new DefaultListModel();
citiesListModel1.addElement("aa");
citiesListModel1.addElement("");
citiesListModel1.addElement("");
citiesListModel1.addElement("");
citiesListModel1.addElement("");
citiesListModel1.addElement("");
citiesListModel1.addElement("");
citiesListModel1.addElement("");
citiesListModel1.addElement("");
citiesListModel1.addElement("");
citiesListModel1.addElement("");
citiesListModel1.addElement("");
citiesListModel1.addElement("");
citiesListModel1.addElement("");
SecondList.setModel(citiesListModel1);
SecondList.setSelectedIndex(0);

    **This is  the button,for help me move selected city, from first list**
AssignButton.setText("Add Cities");
gridConstraints = new GridBagConstraints();
gridConstraints.gridx = 0;
gridConstraints.gridy = 2;
gridConstraints.insets = new Insets(0, 0, 10, 0);
getContentPane().add(AssignButton, gridConstraints);
AssignButton.addActionListener(new ActionListener() 
{
  public void actionPerformed(ActionEvent e) 
  {
  }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T21:09:18.703

首先，您的第二个模型不需要一堆空元素（除非您打算允许使用将项目移动到特定位置）。

在您分配动作侦听器时，您将需要检查选择了哪些元素，然后简单地将其添加到您的第二个列表模型中。

使用[JList#getSelectedValuesList](http://docs.oracle.com/javase/7/docs/api/javax/swing/JList.html#getSelectedValuesList%28%29)`List`从第一个列表中获取一个选定的值。只需遍历列表并将每个元素添加到第二个列表。

根据您的需要，您可以从第一个列表中删除所选项目或提供检查以确定项目是否已存在于第二个列表中

# assembly - 试图理解 x86 汇编中的有效寻址

> ID：15327577
> 
> 赞同：0
> 
> 时间：2013-03-10T21:03:01.470
> 
> 标签：assembly, x86, cpu-registers

我被问到以下问题，但我看不出它如何有足够的信息来回答。

“如果`EAX`contains `00000200H`，`EBX`contains `00000003H`，并且数据段包含`1000H`，那么这条指令生成的有效地址是什么？”

```
MOV ECX,[ESI][EDI] 
```

**我怎么知道`ESI`和`EDI`寄存器中包含哪些值？** 我知道`ESI`and`EDI`寄存器通常用于字符串操作......

我也知道创建有效地址的一般格式是：

1) 左移`DS`四位。

2) 将移位`DS`值与偏移值相加。

在上面的代码片段中`[ESI][EDI]`，我认为偏移量与`[ESI + EDI]`. 我`[ESI][EDI]`用英语解释为以下内容：

“偏移量等于寄存器中包含`ESI`的值加上寄存器中包含的值`EDI`。”

这是我在为期 8 周的 x86 微处理器课程中的第一周，因此我很感谢您的反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:35:50.163

的有效地址`ds:eax+ebx`可以这样计算：

```
ds =  0x1000 (4096 in decimal)
eax = 0x200  (512 in decimal)
ebx = 3

ds:eax+ebx = 0x10 * 0x1000 + 0x200 + 3

ds:eax+ebx = 0x10203 (66051 decimal) 
```

但是基于 和 的值和`esi`的值不能说什么，因为寄存器是完全独立的，所以也不能计算 的有效地址。`edi``ds``eax``ebx``ds:esi+edi`

# c# - 何时在 C# 中无约束地使用泛型方法？

> ID：15327587
> 
> 赞同：1
> 
> 时间：2013-03-10T21:04:16.853
> 
> 标签：c#

为什么你会想在 c# 中使用泛型方法而不至少对参数施加一些约束？我真的想不出一种方法可以做任何可以传递任何类型的有用的事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T21:05:46.190

每当您使用它时，例如`IEnumerable<T>`扩展方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-10T21:07:40.263

一个简单的例子：

```
void Swap<T>(ref T a, ref T b)
{
    T temp = a;
    a = b;
    b = temp;
} 
```

不要忘记每个类型都`T`派生自`System.Object`an 因此继承了几个有用的方法。好吧，严格来说不是每种类型。例如，接口不会继承自，`object`但实现它们的类型会继承。因此，即使`T`是接口类型，C# 也允许您访问继承自`object`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T21:18:06.437

当您需要该方法时...通用。

我有一个我在另一个答案中发布的例子。它是一种称为 ExecuteTimedAction 的方法。它接受一个动作，几个参数，对动作进行计时，执行它，然后返回结果。它在一个公共库中用于我需要记录其执行时间的任何内容。

此方法不关心类型 T。它只是执行另一个方法（委托）并返回该方法的返回类型。不需要约束，因为方法中没有需要约束的依赖项。

我认为这是一个很好的候选人，当然不是唯一的例子，而是我脑海中浮现的例子。这是方法，来自[这个](https://stackoverflow.com/questions/15227215/how-to-improve-console-application-entry-point/15227612#15227612)答案：

```
 /// <summary>
    /// Generic method for performing an operation and tracking the time it takes to complete (returns a value)
    /// </summary>
    /// <typeparam name="T">Generic parameter which can be any Type</typeparam>
    /// <param name="actionText">Title for the log entry</param>
    /// <param name="func">The action (delegate method) to execute</param>
    /// <returns>The generic Type returned from the operation's execution</returns>

    public static T ExecuteTimedAction<T>(string actionText, Func<T> executeFunc, Action<string> logAction)
    {
        string beginText = string.Format("Begin Execute Timed Action: {0}", actionText);

        if (null != logAction)
        {
            logAction(beginText);
        }
        else
        {
            LogUtil.Log(beginText);
        }

        Stopwatch stopWatch = Stopwatch.StartNew();
        T t = executeFunc(); // Execute the action
        stopWatch.Stop();

        string endText = string.Format("End Execute Timed Action: {0}", actionText);
        string durationText = string.Format("Total Execution Time (for {0}): {1}", actionText, stopWatch.Elapsed);

        if (null != logAction)
        {
            logAction(endText);
            logAction(durationText);                
        }
        else
        {
            LogUtil.Log(endText);
            LogUtil.Log(durationText);
        }

        return t;
    } 
```

# serialization - 具有私有构造函数的类型的 JsonSerializationException

> ID：15327589
> 
> 赞同：1
> 
> 时间：2013-03-10T21:04:22.200
> 
> 标签：serialization, json.net, ravendb, nlog

我正在`NLog`将日志记录语句持久化到我的`RavenDb`数据库中。表示日志语句的`LogEventInfo`类有一个属性 ,`LogLevel`和一个私有构造函数。`LogLevel`（Info、Warn 等）的实例是通过调用私有构造函数的静态只读属性创建的。

问题是我希望从数据库中读取消息并查询它们会引发`Json.Net`序列化错误：

> 找不到用于 NLog.LogLevel 类型的构造函数。一个类应该有一个默认构造函数、一个带参数的构造函数或一个标有 JsonConstructor 属性的构造函数。路径'Level.Name'。

我怎样才能绕过错误？可以在这里创建某种 Raven 索引帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T22:37:12.873

我认为最简单的方法是创建一个自定义类来保存所有日志信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-11T12:10:26.580

它像这样和我一起工作

[创建一个 CustomCreationConverter](https://www.newtonsoft.com/json/help/html/CustomCreationConverter.htm)并将其与对象的反序列化一起使用

```
public class EventInfoConverter : CustomCreationConverter<LogEventInfo>
    {
        private string _level { get; set; }
        public EventInfoConverter(string s)
        {
            JToken eventinfo = JObject.Parse(s);
            var childs = eventinfo.Children();
            foreach (var item in childs)
            {
                if (((Newtonsoft.Json.Linq.JProperty)item).Name == "Level")
                {
                    var m = ((Newtonsoft.Json.Linq.JProperty)item).Value.Children();
                    foreach (var item1 in m)
                    {
                        _level = ((Newtonsoft.Json.Linq.JProperty)item1).Value.ToString();
                        break;
                    }

                    break;
                }
            }
        }

        public override LogEventInfo Create(Type objectType)
        {
            LogEventInfo eventInfo = new LogEventInfo();
            switch (_level)
            {
                case "Info":
                         eventInfo = new LogEventInfo(LogLevel.Info, "", "");
                    break;
                case "Debug":
                    eventInfo = new LogEventInfo(LogLevel.Debug, "", "");
                    break;
                case "Error":
                    eventInfo = new LogEventInfo(LogLevel.Error, "", "");
                    break;
                case "Warn":
                    eventInfo = new LogEventInfo(LogLevel.Warn, "", "");
                    break;
                default:
                    break;
            }
            return eventInfo;
        }
    } 
```

*   在您的反序列化中：

    ```
    NLog.Logger _logger = NLog.LogManager.GetCurrentClassLogger();
    _logger.Log(Newtonsoft.Json.JsonConvert.DeserializeObject<LogEventInfo>(eventInfo, new EventInfoConverter(eventInfo))); 
    ```

# node.js - bower 命令不返回任何内容

> ID：15327595
> 
> 赞同：39
> 
> 时间：2013-03-10T21:05:07.473
> 
> 标签：node.js, ubuntu, bower

我一直在尝试安装凉亭，但我一定遗漏了一些东西，因为命令凉亭根本没有返回任何东西！

我像这样安装了凉亭：

```
sudo npm install bower -g 
```

这是输出：

```
npm http GET https://registry.npmjs.org/bower
npm http 304 https://registry.npmjs.org/bower
npm http GET https://registry.npmjs.org/tmp
...
...  # Many requests here n_n
npm http GET https://registry.npmjs.org/traverse
npm http 304 https://registry.npmjs.org/traverse
/usr/bin/bower -> /usr/lib/node_modules/bower/bin/bower
bower@0.8.5 /usr/lib/node_modules/bower
├── stable@0.1.3
├── archy@0.0.2
├── colors@0.6.0-1
├── tmp@0.0.16
├── async@0.2.6
├── mkdirp@0.3.5
├── semver@1.1.4
├── request@2.11.4
├── hogan.js@2.0.0
├── lodash@1.0.1
├── rimraf@2.0.3 (graceful-fs@1.1.14)
├── nopt@2.0.0 (abbrev@1.0.4)
├── fstream@0.1.22 (inherits@1.0.0, graceful-fs@1.2.0)
├── promptly@0.1.0 (read@1.0.4)
├── tar@0.1.16 (inherits@1.0.0, block-stream@0.0.6)
├── read-package-json@0.1.13 (graceful-fs@1.2.0, lru-cache@2.0.4, slide@1.1.3, npmlog@0.0.2)
├── rc@0.0.8 (config-chain@0.3.3, optimist@0.3.5)
├── glob@3.1.21 (inherits@1.0.0, graceful-fs@1.2.0, minimatch@0.2.11)
└── unzip@0.1.4 (buffers@0.1.1, over@0.0.5, pullstream@0.1.0, setimmediate@1.0.1, readable-stream@0.2.0, binary@0.3.0) 
```

好像还可以。。

但后来我做`bower --help`了，没有任何反应，它没有显示任何东西..我什至尝试过`sudo bower --help`

我的 nodejs 版本是 v0.8.22 ，Ubuntu 12.10 上的 npm 版本是 1.2.14

有任何想法吗？？提前致谢

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2013-03-14T00:03:41.110

行！！！

我发现了问题......这太愚蠢了，让我发笑（即使我为此失去了我的夜晚）

似乎还有另一个软件叫做“ [node](http://packages.ubuntu.com/trusty/node) ”（业余分组无线电节点程序）。我删除了那个软件`sudo apt-get remove node`，重新安装了nodeJS，然后`sudo npm install bower -g`瞧！！！

所以看起来业余分组无线电的人不与网络开发人员相处......太糟糕了

希望这对其他人有帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T15:49:01.970

你在代理后面工作吗？似乎 bower 不会像 npm 那样自动获取代理设置。

如果您设置 HTTP_PROXY 和 HTTPS_PROXY 环境变量，那么 bower 应该可以工作。

[https://github.com/twitter/bower/issues/208](https://github.com/twitter/bower/issues/208)

注意，它们必须是大写的。

真皮

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-16T23:48:56.577

有同样的问题。

我所做的只是编辑凉亭源代码并更改第一行。

启动你的终端并把它卡一下：

```
sudo nano `which bower` 
```

编辑第一行，上面写着：

`#!/usr/bin/env node`

并将其更改为：

`#!/usr/bin/env nodejs`

确保未安装节点（业余分组无线电节点程序）。

中提琴就是这样。适用于**薄荷**和**ubuntu**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-28T12:35:10.010

还要确保您使用的是“**稳定**”版本的 nodejs；我也有这个问题，原来是由安装/使用最新的**不稳定**版本引起的。不知道是节点问题还是 npm 问题（似乎 npm 更新与节点一起打包）。

（顺便说一句，使用 'n' - [https://github.com/visionmedia/n](https://github.com/visionmedia/n) - 管理您的节点版本......更不用说 PITA 了；））

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-11T13:20:21.387

我在 mac 上遇到了类似的问题，最后更新我的 npm 路径似乎有效：

```
export PATH=$PATH:/usr/local/share/npm/bin 
```

# c - Pthreads，尝试使用信号量从多个线程中打印出数字部分

> ID：15327604
> 
> 赞同：0
> 
> 时间：2013-03-10T21:05:38.977
> 
> 标签：c, multithreading, pthreads, semaphore

我遇到的问题是：我的“父母”经历了一个从 0 到 4 的 for 循环。在每次迭代中，我有 3 个线程要打印出它们的 12 个数字的“段”（0 到11）。

例如，当父循环为 0 时，线程 0 会打印出 0，线程 1 会打印出 4，线程 2 会打印出 8。

当父循环为 1 时，线程 0 会打印出 1，线程 1 会打印出 5，线程 2 会打印出 9。

所以理想的输出是 0 1 2 3 4 5 6 7 8 9 10 11 。我知道您无法确定线程何时运行，因此不会完全按照该顺序运行，但我至少希望在线程打印 3 4 或 5 之前打印 0 1 和 2。

这就是我遇到的问题。似乎一个或另一个线程被留在尘土中并且没有打印出它的片段，或者没有完全打印出它的片段以及其他线程。这是我正在尝试完全理解信号量的问题。

我有两个信号量，一个在线程工作时阻塞父级（生产者？），另一个阻塞每个线程，直到生产者增加到下一个索引。我认为通过这种方式我可以强迫他们在继续之前等待对方完成，但由于某种原因我遇到了问题。

这是我的代码：

```
#include <semaphore.h>
#include <stdio.h>
#include <pthread.h>

#define maxNum 12

sem_t parentSem;
sem_t threadSem;
int finishedThreads;
int done = 0;
int stuff[12];
int i;

void* threadFunction(int m){
    int printNum;
    int baseNum;
    //Determine the value the thread should start at
    baseNum = (double)(maxNum/3) * m;
    while(!done){ //ensure thread doesn't exit before parent is done with whole loop
        //wait for parent to increment
        sem_wait(&threadSem);
        printNum = baseNum + i;

            //keep track of how many threads are finished to let parent continue
        finishedThreads++;
        if(finishedThreads == 3){
                    //let parent continue if all threads are finished
            sem_post(&parentSem);
        }
    }

}

int main(int argc, char** argv[]){

    sem_init(&parentSem, 0, 1);
    sem_init(&threadSem, 0, 0);
    int rc;
    pthread_t threads[3];
    int l; 
    for(l = 0; l < 12; l++){
        stuff[l] = l;
    }
    int j;
    for(j = 0; j < 3; j++){
        rc = pthread_create(&threads[i], NULL, threadFunction, (void*) j);

    }
    int k;
    for(i = 0; i < 4; i++){
        sem_wait(&parentSem); //wait for children here (initially sem set to 1)
        finishedThreads = 0; //set finished thread counter to 0
        for(k = 0; k < 3; k++){
            //increment thread semaphore to 3 so each thread can run
            sem_post(&threadSem);
        }
    }
    for(i = 1; i < 3; i++){
        pthread_join(threads[i], NULL);
    }

} 
```

如何确保所有线程在父级递增之前运行？如何确保所有线程每“轮”运行一次而没有任何卡在后面？有时同一个线程运行两次而不是每个线程运行一次.....帮助？

非常感谢大家的帮助。

编辑：新代码状态：（线程函数）

```
while(!done){

    printf("Thread %d not done yet...\n", m);
    if(m == 0){
        sem_wait(&threadSem0);
    }else if(m == 1){
        sem_wait(&threadSem1);
    }else if(m == 2){
        sem_wait(&threadSem2);
    }
    printNum = baseNum + i;
    printf("Thread %d past waiting, number segment: %d\n", m, printNum);

    finishedThreads++;
    if(finishedThreads == 3){
        sem_post(&parentSem);
    }
} 
```

父部分：

```
for(i = 0; i < 4; i++){
    printf("In parent for loop, counter: %d\n", i);
    printf("Parent past wait semaphore\n");
    finishedThreads = 0;
    if(i == 3) done = 1;
    sem_post(&threadSem0);
    sem_post(&threadSem1);
    sem_post(&threadSem2);
    sem_wait(&parentSem);
}
for(i = 1; i < 3; i++){
    pthread_join(threads[i], NULL);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T22:04:20.543

您需要访问`finishedThreads`atomic 以避免每个线程仅使用缓存副本。您的程序在没有优化（*）的情况下编译是否可以工作？

在 C++ 中执行此操作的正确方法是使用`std::atomic`. 请参阅[此问题](https://stackoverflow.com/questions/15329234/stdthread-c-more-threads-same-data)的彻底答案。

## 更新：

如果线程快速循环（如您的情况），则对所有子线程使用一个信号量可能会产生问题。您必须为每个子线程使用一个信号量来解决这个问题。

```
sem_t threadSem[3];

// ...

sem_wait(&threadSem+m);

// ...

for (i = 0; i < 3; i++)
    sem_init(threadSem+i, 0, 0);

// ...

    for(k = 0; k < 3; k++){
        //increment each thread semaphore so each thread can run
        sem_post(threadSem+k);
    } 
```

还有一些我早期没有发现的东西：

您使用变量`i`在 中进行增量`threadFunction`。这行不通。正确的公式应该只取决于`m`。由于每个线程都有自己的`baseNum`and副本`printNum`，因此您可以毫无问题地使用它们：

```
baseNum = (double)(maxNum/3) * m;
while(!done){ //ensure thread doesn't exit before parent is done with whole loop
    //wait for parent to increment
    sem_wait(&threadSem);
    printNum++;
    // .... 
```

您的代码中有很多东西取决于子线程的数量，我建议为此使用一个常量（就像您为 所做的那样`maxNum`）。

您没有设置变量`done`来指示子线程的工作结束。

```
volatile int done;

// in threadFunction

 // wait for start
sem_wait(threadSem+m)
while(!done){ 
    // thread work here
    // ...
    //wait for parent to increment at the end of the loop
    sem_wait(threadSem+m);
}

// in main

for(k = 0; k < 3; k++){
    //increment each thread semaphore so each thread can run
    if (i == 4) done = 1;
    sem_post(threadSem+k);
} 
```

当然`done`还必须遵循“`volatile`或互斥”规则。

您最后不会加入所有线程：

```
for(i = 0; i < 3; i++){
    pthread_join(threads[i], NULL);
} 
```

* * *

(*) 如果您使用 gcc，我的意思是使用参数`-O0`，甚至使用`-g`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T05:40:05.183

你需要一个屏障，特别是一个可重复使用的屏障。[查看 Allen Downey 的信号量小书，第 3.6.7 节，在此处](http://www.cs.ucr.edu/~kishore/papers/semaphores.pdf)复制(PDF)可能很有用。代码是用 Python 编写的，但它的要点很清楚。它需要一个互斥锁和两个计数信号量，在您的情况下，您有 4 个参与者在屏障中。

您可以通过设置线程优先级来控制哪个线程首先被唤醒，以便第一个线程是最重要的，依此类推。

# google-chrome - 无法在浏览器 (Chrome) 中进行实时编辑/打开以在 Webstorm 6 中工作

> ID：15327608
> 
> 赞同：2
> 
> 时间：2013-03-10T21:05:59.813
> 
> 标签：google-chrome, live, edit, webstorm

我对 Webstorm 6 很陌生，但我已经广泛搜索了如何解决这个问题。我检查了 Live Edit 并启用了 Chrome 扩展程序。我相信我的问题可能与我如何设置项目有关。我从之前使用 Notepad++ 构建的现有文件创建了一个新项目。当我在 Webstorm 中创建项目时，我将正确的目录指定为根目录。

当我尝试使用“在浏览器中打开”时，文件会加载，但我的所有链接都已损坏。我附上了截图，正如你所见，Webstorm 也无法加载我的资源。我究竟做错了什么？当我从 NetBeans 7 尝试相同的功能时，它运行良好。

从截图可以看出，索引文件的路径是：file:///C:/Users/Dankoni/Desktop/Dev/Websites/Dankoni.com_Webstorm/index.html

但是，如果我获得其中一张图像的路径，它会显示为：file:///C:/images/dankoni_ouroboros_default.jpg

我敢肯定 Webstorm 在相对路径方面没有那么大的问题，对吧？那么，我的菜鸟做错了什么？如果我重新制作项目并将其连接到我的站点的 ftp，我会遇到同样的问题吗？请帮忙！

感谢您花时间阅读本文 =)

我还不能发布图片，因为我没有 10 个代表点，所以你可以在这里查看： ![](../Images/e511fb4122a905f6fe90771a6ee432d8.png)

# android - 将 Android 应用程序集成到 WordPress 中

> ID：15327609
> 
> 赞同：0
> 
> 时间：2013-03-10T21:06:09.303
> 
> 标签：android, iphone, wordpress

我正在寻找一种方法（如果可能的话）以某种方式将 iPhone 和 Android 应用程序集成到 WordPress 网站中。即使我使用 iframe 这样做。

老实说，我不知道从哪里开始，因为我搜索的所有内容都是 WordPress>App 而不是 App>WordPress。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T21:11:53.393

我认为在 PHP 解释 Java 或 Objective-C 代码之前是不可能的。

# javascript - Javascript：传递“this”值

> ID：15327613
> 
> 赞同：1
> 
> 时间：2013-03-10T21:06:27.910
> 
> 标签：javascript, oop, event-listener

我有以下代码：

```
function Selector()
{
 ...
 this.items = new Array();
 // i load here the items with dom-s
 this.setActiveItem = function(item)
 {
  this.items[item].className = "selector-item-active";
  ...
 }
 var _this = this;
 for (var i=0; i<itemsName.length; i++)
  this.items[i].addEventListener("mouseup",function(){_this.setActiveItem(i)});
} 
```

问题是，当侦听器调用**setActiveItem**函数时，我在控制台中收到以下消息：

*无法设置未定义的属性“类名”*

所以监听器不能传递**这个**值。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:09:02.523

事件侦听器不保留其`this`所属对象的范围。您还需要使用闭包将项目索引封装到回调中。而是尝试使用`_this`（如您定义的那样）引用变量，如下所示：

```
this.setActiveItem = function(item)
{
    return function (evt) {
        _this.items[item] = _this.items[item] || {};
        _this.items[item].className = "selector-item-active";
        ...
    }
}

...

for (var i=0; i<itemsName.length; i++)
    this.items[i].addEventListener("mouseup", this.setActiveItem(i)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T21:10:03.833

`itemsName.length`每当执行 mouseup 事件时， i 的值将等于 at。使用匿名函数来保存 i；

修改后的代码：

```
.......
 var _this = this;
 for (var i=0; i<itemsName.length; i++){
  (function(j){
           _this.items[j].addEventListener("mouseup",
                        function(){
                              _this.setActiveItem(j);
                        }
                 );
            })(i);// preserve i for each for loop iterations
 }
} 
```

# caching - 缓存集和标签

> ID：15327615
> 
> 赞同：3
> 
> 时间：2013-03-10T21:06:32.580
> 
> 标签：caching, memory, x86-64, mmu

在一个常见的缓存地址中，我有三个字段：

```
Tag | Set | Offset 
```

将虚拟地址解析为缓存条目的过程应该是确定哪个集合包含我们正在搜索的数据，然后使用标签（虚拟地址的一部分）来消除多路缓存的歧义（每个集合可能包含多个条目)

我的问题是：如何确定一个集合？谁向我们保证，通过仅使用虚拟地址的一部分作为标签，我们可以唯一地确定两个相似值之间的缓存命中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T21:29:48.673

地址中的位分为 3 组：

```
 tag  | set index | Block offset
t bits |   s bits  |    b bits 
```

如果缓存中块的大小是`B`字节，那么您需要`b = (log2 B) bits`指定块偏移量。

如果高速缓存有 S 个集合，则将`s = (log2 S)`位用于集合索引。如果缓存是完全关联的，则只有一个集合，即`S = 1`和`s = 0`，这意味着不会将任何位用于集合索引。

剩余位用于标签`t`可以使用计算`t = NUM_BITS - s - b`

这将保证任何地址都可以映射到相应的缓存行，并且只需查看`valid bit`缓存行的 ，就可以确认我们是否在缓存中有地址。请注意，高速缓存行大小通常大于字大小，以利用程序中空间数据局部性的增益。

当在缓存中找不到请求的地址时，我们需要计算将被带入缓存的数据块的起始地址。

范围的大小总是等于缓存块的大小。起始地址是通过将地址的块偏移位清零来计算的。结束地址是通过使用所有地址`1s`的块偏移位来计算的。

根据缓存关联性和逐出方案 ( `LRU`vs `LFU`)，决定并填充集合中将存储新数据块的行。

# javascript - 单击链接时更改内部锚标记 css

> ID：15327620
> 
> 赞同：0
> 
> 时间：2013-03-10T21:07:00.203
> 
> 标签：javascript, jquery, css, navigation

我有一个导航栏，其中包含链接到页面某些部分的标签列表。

我想知道是否可以通过**javascript**或**css**在单击链接并显示内容时更改链接的不透明度，当单击下一个列表项将更改为活动不透明度并且旧链接将更改恢复正常。

这是页面和底部导航栏的工作测试： [http ://www.luvly.co.nz/space/process.html](http://www.luvly.co.nz/space/process.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:16:04.747

你可以通过像这样使用伪类来做到`:active`这`:hover`一点

```
#Navigation a:active
{
    opacity: 0.9;
}
#Navigation a:hover 
{ 
    opacity:0.4
} 
```

这是一个示例，因此请根据您的代码放置这些类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T21:19:03.697

在您的**js/process-slider.js 中**添加以下行：

```
$('a.panel').click(function () {

    $('.selected').css('opacity','1'); /* this one - the normal state*/
    $('a.panel').removeClass('selected');
    $(this).addClass('selected');

    current = $(this);

    $('#wrapper').scrollTo($(this).attr('href'), 800);
    $('.selected').css('opacity','0.5'); /* and this one - the clicked state*/      

    return false;
}); 
```

注意：将 0.5 更改为您想要的任何数字 (0 < x < 1)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T21:25:10.047

通过 CSS，您可以执行类似的操作，只需将下面的不透明度值更改为您想要的值，因为您尚未提及任何特定的不透明度设置......

```
#process-nav-bar .panel:active {
opacity: 0.5;
}

#process-nav-bar .panel:hover {
opacity: 0.4;
}

#process-nav-bar .panel {
opacity:0.3; 
} 
```

# javascript - 使用 PhoneGap 将文件从 www 复制到“文档”

> ID：15327623
> 
> 赞同：4
> 
> 时间：2013-03-10T21:07:23.197
> 
> 标签：javascript, ios, cordova

我正在尝试将存储在 phonegap 文件夹（www/default_files/file.txt）中的文件复制到 iOS 中的文档文件夹中，到目前为止我得到的是：

```
window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, function(fileSys)
{
  fileSys.root.getFile("file.txt", null, function(theFile){ // file exist don't do anything},
    function(error)
    {
      // file does not exist, so copy it
      fileSys.copyTo(fileSys.root.fullPath, "www/default_files/file.txt",
        function success(entry)
        {
          console.log("Success: " + entry);
        },
          function error(entry)
        {
          console.log(entry);
        });
  });
}, fileError); 
```

fileSys.root.fullPath 包含正确的文档路径，问题是如何访问 www 文件夹...

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-31T10:08:53.143

此代码适用于我在 iOS 上。该函数实现了将数据库文件从 /www 文件夹复制到 /Documents 文件夹。

```
function copyBase(){
    var wwwPath = window.location.pathname;
    var basePath = 'file://'+ wwwPath.substring(0,wwwPath.length-10);
    window.resolveLocalFileSystemURL(basePath+'myDB.db', 
        function(fileDB){
            console.log('success! database was found')  
            window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, onSuccess, null);

                function onSuccess(fileSystem) {
                    var documentsPath = fileSystem.root;
                    fileDB.copyTo(documentsPath, 'myDB.db',
                    function(){
                        console.log('copying was successful')
                    }, 
                    function(){
                        console.log('unsuccessful copying')
                    });
                }
        }, 
        function(){
            console.log('failure! database was not found')
        });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T07:55:37.333

您可以访问 www 文件夹如下
**/var/mobile/Applications/35----------------9087/yourapp.app/www/yourfolder/yourfilename.ext**

**编辑**
使用`alert(window.location.pathname);`以查找应用程序的路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-07T10:29:51.737

使用[cordova-plugin-file](https://cordova.apache.org/docs/en/latest/reference/cordova-plugin-file/)。然后，您可以使用字符串访问 www 文件夹：cordova.file.applicationDirectory+“www/”，使用字符串访问 Documents 文件夹：cordova.file.documentsDirectory。

# javascript - JavaScript - for 循环内的 setTimeout 函数导致代码在 for 循环完成之前执行

> ID：15327629
> 
> 赞同：3
> 
> 时间：2013-03-10T21:07:53.237
> 
> 标签：javascript, for-loop, settimeout, delay

我有一个 for 循环，我需要在其中延迟每次重复以用于动画目的。如果我删除 setTimeOut 函数，则以下代码会正确循环，并且变量会通过循环正确递增，然后执行底线。但是使用 setTimeoout 函数，底线先执行，然后 for 循环执行 7 次（应该是 6 次），每次都告诉我 x = 6。显然我做错了什么。有任何想法吗？

```
for ( x = 0; x <= 5; x++) {
    setTimeout(function() {
        alert("For loop iteration #" + x);
    }, 500 * x);
}
alert("Code to be executed after completed for loop"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T21:21:01.587

您需要一个闭包来`x`在闭包上下文中保存当前值。

```
 for (var x = 0; x <= 5; x++) {
    (function(x) {
        setTimeout(function(){
            alert("For loop iteration #" + x);
            if (x == 5) {
                setTimeout(function(){
                    alert("Code to be executed after completed for loop");
                });
            }
        }, 5 * x);

    })(x);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T21:21:27.640

这是一个常见的概念错误。

1.  Javascript 是非阻塞的
2.  传递了对变量的引用，而不是实际值

您必须记住，变量`x`是动态的。引用`x`传递给`alert("For loop iteration #" + x);`非值。因此，当`alert`finally 被执行`x`时将具有它在执行点而不是在`setTimeout`启动点的值！

本质上它是这样的：
处理你的循环，创建 6 个超时，然后立即显示你的`alert("Code to be executed after completed for loop");`. 然后在一段时间后，您的超时将被执行，然后在循环完成后将所有显示变量 x 的状态 - `6`。

您需要一个闭包，以便将值`x`传递给警报，而不是对变量`x`本身的引用。

```
for (var x = 0; x <= 5; x++) {
    (function(z) {
        setTimeout(function() {
            alert("For loop iteration #" + z);
        }, 5 * z);
    })(x);
} 
```

编辑：

要解决第二个问题，您需要使用回调函数。CB 函数是您的代码的逻辑延续，但不应立即执行，而是需要暂停到某个点（您的最后一个警报已发生）。你会像这样实现它：

```
for (var x = 0; x <= 5; x++) {
    (function(z) {
        setTimeout(function() {
            alert("For loop iteration #" + z);
            if (z===5){ continue_code() }
        }, 5 * z);
    })(x);
}

function continue_code(){
    alert("Code to be executed after completed for loop");
    // Here comes all your code
    // which has to wait for the timeouts from your for loop
} 
```

在最后一个 setTimeout 中，您调用继续执行代码的函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T21:19:00.150

x 是一个全局变量。在第一个警报发生时，您已将其增加到 6。如果您不希望这种情况发生，请改用类似的方法，它在每 500 毫秒调用一次的函数内部递增：

```
var x = 0;
var interval = setInterval(function() {
    alert("Loop iteration #" + x++);
    if(x==5) {
        clearInterval(interval);
        alert("Code to be executed after completing loop");
    }
}, 500); 
```

# javascript - 防止在密码字段上重新激活 javascript 盲效

> ID：15327636
> 
> 赞同：0
> 
> 时间：2013-03-10T21:08:28.223
> 
> 标签：javascript, jquery, web

我有这个项目正在进行中，当每个都获得焦点时，我有两个密码字段，它使用 jquery 显示盲目效果；在密码字段下方显示密码强度 div。然后，当它失去焦点时，它会隐藏密码强度 div。当我在两个密码字段之间切换时，我希望密码强度保持打开状态。

```
$('input[type=password]').focus(function() {
$('#pswd_info').show("blind", { direction: "vertical" }, 1000);
    }).blur(function() {
       $('#pswd_info').hide("blind", { direction: "vertical" }, 1000);
    }); 
```

***编辑：***

所以我花了一些时间试图解决这个问题，但我有。这是我的解决方案，感谢罗伯特。这是我的解决方案。

```
$('input[type=password]').focus(function() {
            $('#pswd_info').show("blind", { direction: "vertical" }, 300);
        });

 $("input[type=password]").blur(function() {
            window.setTimeout(function(){
                if($(":focus").attr("type") != "password"){
                    $('#pswd_info').hide("blind", { direction: "vertical" }, 300);
                }
            },100);
        }); 
```

感谢大家的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T21:18:22.793

检查`document.ActiveElement`并查看它是否是您的两个密码字段之一。如果不是，您可以允许该`.hide`函数执行。

更多信息：[JavaScript（或 jQuery）中是否有“焦点”？](https://stackoverflow.com/questions/2683742/is-there-a-has-focus-in-javascript-or-jquery)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T02:13:04.887

你试过这样吗……这只是一个建议……

```
$('input[type=password]').live('keyup',function() {
$('#pswd_info').show("blind", { direction: "vertical" }, 1000);
    }).blur(function() {
       $('#pswd_info').hide("blind", { direction: "vertical" }, 1000);
    }); 
```

# java - JPA 实体的 BeanPropertyRowMapper 替代方案

> ID：15327637
> 
> 赞同：4
> 
> 时间：2013-03-10T21:08:30.940
> 
> 标签：java, spring

Spring 有一个出色的[org.springframework.jdbc.core.BeanPropertyRowMapper](https://github.com/SpringSource/spring-framework/blob/3.2.x/spring-jdbc/src/main/java/org/springframework/jdbc/core/BeanPropertyRowMapper.java)，它有助于使用 jdbctemplate 进行查询。此类将数据库列映射到 bean 字段，非常有效。

我的项目中有 jpa 实体，该字段的列注释不同，例如：

```
@Column(name = "DESCRIPTION", nullable = true, length = 255)
private String desc; 
```

当使用 BeanPropertyRowMapper 时，它会寻找一个列字段“desc”来匹配。如果该字段存在注释，如何实现这一点，使用给定的列名（在这种情况下为“描述”），如果不存在则回退到字段名？

关于这个主题的任何线索？

# javascript - 带有索引、键和值的地图上的每个 jquery

> ID：15327641
> 
> 赞同：3
> 
> 时间：2013-03-10T21:08:48.303
> 
> 标签：javascript, jquery, arrays, hashmap

如果我有看起来像这样的数据：

```
x = {"key1":"val1", "key2":"val2", "key3", "val3"}; 
```

是否有任何标准方法可以使用返回键、值和索引的函数对它们执行每个操作？

我会这样做的方法是定义一个键数组并使用索引来访问它，但是有没有更简单的方法？

就像是：

```
$.each(x, function(i, k, v) {
    //... do something here
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T21:11:42.730

`Object.keys()`[^(与链接)](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys)一起`Array.prototype.forEach`[^(链接)](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)：

*概要*

```
Object.keys( object ).forEach(function( element, index, array ) {
}); 
```

`Object.keys()`将所有自己的键作为*数组*返回，并`.forEach()`在数组上循环，如上所示。因为我们从中得到一个*数组*`Object.keys()`，我们当然也可以应用`Array.prototype.sort()`它，并以我们喜欢的任何顺序访问键。例如

```
Object.keys( object ).sort(function( a, b ) {
    return a.localeCompare( b );
}).forEach(function( element, index, array ) {
    console.log( object[ element ] );
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T21:11:54.930

如果愿意，您可以创建自己的“索引”

```
var i =0;
$.each(...... {
    /* code */
    i++;
}); 
```

# android - Android上系统生成的“预览窗口”中的动画加载图标

> ID：15327648
> 
> 赞同：1
> 
> 时间：2013-03-10T21:09:28.090
> 
> 标签：android, android-animation

众所周知，在 Android 中，应用程序的“预览窗口”是由系统根据应用程序/活动的样式（[http://android.cyrilmottier.com/?p=873](http://android.cyrilmottier.com/?p=873)）生成的。

有没有办法在这个“预览窗口”中获得一个旋转的等待图标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T21:31:37.267

不，没有办法。您只能应用样式属性，不能应用实际的布局或视图。

# mvvm - 如何将数据（选定项目）传递给 Durandal 组合详细视图？

> ID：15327653
> 
> 赞同：9
> 
> 时间：2013-03-10T21:09:44.783
> 
> 标签：mvvm, viewmodel, parent-child, single-page-application, durandal

我已经开始使用（从几个小时前开始）[Durandal](http://durandaljs.com)，希望能够管理视图并允许在单个页面中进行组合 - 以前的方法（也使用 Knockout）变得过于笨拙，无法在胖 HTML 文件中维护。

我已经安装/设置了 Durandal，并且可以创建视图和视图模型 - 但是，我不知道如何将数据*导入*视图模型以用作新视图模型的*基础*。

例如，我有一个用于选择项目的“左侧导航栏”——当一个项目被选中时，它会更新当前模型中可观察到的“选定项目”，但它也应该*在*右侧加载正确的“详细视图”：因为部分尝试 Durandal 分离组件/视图的原因，这应该来自单独的视图/视图模型。

我已经阅读了包括[Composition](http://durandaljs.com/documentation/Composition.html)和[Using Composition](http://durandaljs.com/documentation/Using-Composition.html)的文档，但是关于*如何*将数据传递给 viewmodel 的方法对我来说并不清楚。似乎我可以使用具有现有模型的视图（在当前视图/范围内），但我真的很想只使用一些当前模型数据（即 id）来获取“真实”模型数据风景。

因此，我的问题；

*   如何将初始数据（例如“选定项目”）传递给视图模型？我更喜欢使用声明性的“compose：”绑定，因为这就是 KO .. KO 的原因。

*   这种拥有/传递初始数据的概念在这里是正确的方式，还是有更好的选择？我已经看到模糊地提到了“activeItem”，但细节/用途却让我印象深刻。

* * *

更新 1：我发现[了 How do we share the data between views/Pass the data view to view](https://groups.google.com/forum/#!topic/durandaljs/kGZSqT-4GBU)，但在实际实现中缺乏响应。我真的不想在父子之间共享视图模型（不同的视图/视图模型对），我想使用声明性方法（无事件）。父母不需要知道孩子，但孩子需要从父母那里得到数据。

* * *

更新2：虽然上面我暗示只需要“id”，但我想要一种适用于*任何*基础对象的方法，路由器不一定适合。在这种情况下，深度链接不是问题。但是，如果您认为路由器是解决此*问题的方法*，请发布此类（带有详细信息）的论点作为答案，我至少会给它一个赞成票..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T11:19:58.320

如果您查看微风源代码，您可以看到一个主从方法的示例。

他们正在使用激活器来组成子视图。

[https://github.com/IdeaBlade/Breeze/blob/master/Samples/TempHire/TempHire/App/viewmodels/resourcemgt.js](https://github.com/IdeaBlade/Breeze/blob/master/Samples/TempHire/TempHire/App/viewmodels/resourcemgt.js)

我不知道您是否正在使用微风，但该方法与您如何获取数据无关。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-04T06:10:28.687

Eric Panorel 在这里有一篇关于如何使用 John Papa 的 Visual Studio SPA 模板执行此操作的精彩文章：http: [//ericpanorel.net/blog/hot-towel-spa-master-detail-scenario](http://ericpanorel.net/blog/hot-towel-spa-master-detail-scenario)。

简而言之，您可以利用 Durandal 中的路由，它会是这样的：

`master.js`将公开一组项目：

```
define(function() {
  var self = this;

  this.items = ko.observableArray([]);

  var activate = function() {
     // ... get your items
     self.items([ { id: 0, name: 'Item 1' }, { id: 1, name: 'Item 2' }]);
  }

  return {
    // some properties and ...
    activate: activate
  }
}); 
```

`master.html`将绑定它们并链接到详细信息视图：

```
<section data-bind="foreach: items">
   <a data-bind="text: name, attr: { href: '#/item/' + id() }"></a>
</section> 
```

现在，剩下的就是使用路由数据参数在详细视图模型中提取 ID `detail.js`，：

```
define(function() {
  var self = this;

  this.name = ko.observable();

  var activate = function(routeData) {
     var itemId = routeData.id;

     // ... get your item details
     // var details = ...

     self.name(details.name);
  }

  return {
    // some properties and ...
    activate: activate
  }
}); 
```

最后，您需要在您的`main.js`:

```
define(['durandal/app', 'durandal/viewLocator', 'durandal/system', 'durandal/plugins/router'],
function(app, viewLocator, system, router) {

    //>>excludeStart("build", true);
    system.debug(true);
    //>>excludeEnd("build");

    app.title = 'Durandal app';
    app.start().then(function() {
        toastr.options.positionClass = 'toast-bottom-right';
        toastr.options.backgroundpositionClass = 'toast-bottom-right';

        //Replace 'viewmodels' in the moduleId with 'views' to locate the view.
        //Look for partial views in a 'views' folder in the root.
        viewLocator.useConvention();

        //configure routing
        router.useConvention();
        router.mapRoute('item/:id', 'viewmodels/item', 'Item', false);

        app.adaptToDevice();

        //Show the app by setting the root view model for our application with a transition.
        app.setRoot('viewmodels/shell', 'entrance');
    });
}); 
```

你去吧！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-10T00:02:59.800

我认为可以像使用模态调用一样传递任何基础对象。`ko.compose`是被动的；使用 durandal 路由器，您可以将数据传输到您喜欢的地方。看看我[在这个答案中的解决](https://stackoverflow.com/a/16472791/2198331)方法并帮助执行。

# jquery - AJAX 登录 - 从操作文件中获取错误但在提交时提交？

> ID：15327657
> 
> 赞同：0
> 
> 时间：2013-03-10T21:10:10.197
> 
> 标签：jquery, ajax, json, post, login

我正在处理简单的 Ajax 登录表单。

只有两个字段，登录名和密码：

```
<form id="login-form" action="/login.php" method="post">
   <input type="text" name="username" placeholder="Username" />
   <input type="password" name="password" placeholder="Password" />
   <input type="submit" name="login" id="login" value="Log in" />
</form> 
```

然后我将它们设置为 login.php 文件中的变量：

```
 $username = $_POST['username'];
   $password = $_POST['password'];

   if(!username_exists_in_my_database()) 
     // HOWTO: ajax displays 'Username doesn't exist next to username field
   if(username_exists_and_password_is_ok) 
     // HOWTO: NO AJAX, just send the form so my custom function logs the user
     // login($username); 
```

如何为我的表单显示来自 AJAX 的错误并在没有 ajax 的情况下正常提交？JSON 是否足够安全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:22:01.617

好吧，您可以毫无问题地发送带有错误的 json，并在成功登录时重定向用户（并存储他的 SESSION/COOKIE）。

```
if(!username_exists_in_my_database()) 
     {
         header("Content-type: application/json");
         echo json_encode(array('error'=>'no such user'));
         die();
     } 

   if(username_exists_and_password_is_ok) 
     login($username);

function login($name){
   // store session etc
   header('Location: /index.php'); // redirect on succesful login
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T21:22:22.377

我经常做的一个好方法是返回一个`JSON`包含 a`success`和 a的对象`errors`。

`JSON`看起来像这样：

```
{
    "success": false
    "errors": ["Username doesn't exist next to username field"]
} 
```

然后在成功提交的表单上，在jQuery中可以检查`success`参数，如果不成功，显示`error`消息。

在 php 中：

```
$errors = [];
$success = false;
$username = $_POST['username'];
$password = $_POST['password'];

if(!username_exists_in_my_database()) 
    $errors[] = "Username doesn't exist next to username field";
    $success = false;

header('Content-type: application/json');
return json_encode(array("errors" => $errors, "success" => $success)); 
```

要显示错误，下面的 jQuery 应该很方便：

```
$form = $(this);
$.ajax({
    url: ...
    success: function(result) {
        if (!result.success) {
            if ($form.find('error').size() == 0) {
                $error_msg = $('<div class="error"></div>');
                $form.prepend($error_msg;
            }
            $error_msg.html(result.error).show();
        } else {
            $form.find('error').hide().remove();
        }
    }
}); 
```

# java - Google App Engine 中使用 java.net.URL 的简单 RESTful Java 客户端

> ID：15327666
> 
> 赞同：0
> 
> 时间：2013-03-10T21:10:50.747
> 
> 标签：java, google-app-engine, rest

我正在使用外部**RESTful**服务的**Google App Engine中创建网络应用程序。**经过一番研究，我选择只使用**java.net.URL**类，而不是任何 JAX-RS API，例如**Jersey**，因为这些 API 与 GAE 存在一些兼容性问题，或者它们仅与某些版本兼容，所以关于...而且我不太喜欢这个问题。

 ******按照[**本教程**](http://www.mkyong.com/webservices/jax-rs/restfull-java-client-with-java-net-url/)，调用我所做的 REST 服务：

```
URL url = new URL("rest-service-url");
HttpURLConnection conn = (HttpURLConnection) url.openConnection();
conn.setRequestMethod("GET");
conn.setRequestProperty("Accept", "application/json");
BufferedReader br = new BufferedReader(new InputStreamReader(conn.getInputStream()));
//process the response... 
```

[**然后我使用Google 的 GSON**](http://code.google.com/p/google-gson/)处理 JSON 响应，它也与 GAE 完全兼容。

首先，您认为这是一个不错的选择吗？

然后，我想以某种方式集中这些代码，因为我的应用程序中有许多不同的服务调用，那么我该怎么做呢？我想用这样的方法创建一些类：

```
public BufferedReader sendRESTRequest (URL url)
    //previous code here...        
} 
```

但我不确定......这个方法应该是静态的吗？同步？我应该在方法内还是在类中创建一个 HttpURLConnection 对象？ETC...

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T21:58:34.740

如果您被允许在您的项目中使用 Apache 库，请查看[此处。](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/index.html)为什么要重新发明轮子

有点意思

```
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
private String poolTimeOutMillSecStr = System.getProperty("CONN_TIME_OUT_MILLSEC", "60000");

    private String maxTotalConnStr = System.getProperty("MAX_TOTAL_CONN", "400");

    private String maxConnPerRouteStr = System.getProperty("MAX_CONN_PER_ROUTE", "200");

    HttpUtility httpUtilty;

    private String baseUrl = System.getProperty("BASE_URL", "http://localhost:8888");

    private String userName;

    private String password;

    @Override
    protected void setUp() throws Exception {
        super.setUp();
        int poolTimeOutMillSec = Integer.parseInt(poolTimeOutMillSecStr);
        int maxTotalConn = Integer.parseInt(maxTotalConnStr);
        int maxConnPerRoute = Integer.parseInt(maxConnPerRouteStr);
        httpUtilty = new HttpUtility(poolTimeOutMillSec, maxTotalConn, maxConnPerRoute);
        httpUtilty.initialize(baseUrl);
        userName = "admin";
        password = "admin";

    }
} 
```

并像使用它一样

```
HttpResponse response = httpUtilty.postRequest(path, null, ins, null);
HttpEntity resEntity = response.getEntity(); 
```******

# arrays - 使用新 ID 重复批处理文件

> ID：15327668
> 
> 赞同：0
> 
> 时间：2013-03-10T21:10:57.997
> 
> 标签：arrays, batch-file, automation

我有一个看起来像这样的批处理文件，它拍摄网页的图片并对其进行裁剪：

```
cd C:\users\***\Downloads\IECapt-2008-06-10
IECapt --delay=10000 --url=http://test.com/picture.swf?id=1 --out="C:\users\***\My Documents\picture.png"
cd C:\users\***\My Documents
convert picture.png -trim picture.png

ftp -s:place_picture.txt 
```

但是，我有很多 URL 可以使用。每个 URL 都相同，但“id”部分不同。例如：

```
http://test.com/picture.swf?id=1
http://test.com/picture.swf?id=324 
```

我的问题是我有一堆 URL，替换 URL 并为一个图像再次运行脚本需要很长时间。所以我想知道，是否有一种方法可以让这个脚本更有效，只需添加一个 ID 列表，脚本就可以自动替换 id 部分并拍摄我列出的所有 URL ID 的图像。

我还需要为每张输出单独名称的图片提供单独的名称。

这是“place_picture.txt”文件：

```
open test.com
username
pass
hash
bin
lcd c:\users\***\My Documents
cd public_html/test.com/test
put picture.png
bye 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T22:50:13.880

不幸的是，我无法访问 Windows 计算机，但是这个片段应该演示如何实现它......

```
@echo off
set map=5.87.123.76.098
for /f "tokens=1,2,3,4,5 delims=." %%a in ("%map%") do (
    set token_a=%%a
    set token_b=%%b
    set token_c=%%c
    set token_d=%%d
    set token_e=%%e
)
set token 
```

暂停>无

当我使用 Windows 计算机时，我会尝试并提供更多帮助。

# android - 如何在画布中为位图设置动画（Android）

> ID：15327675
> 
> 赞同：1
> 
> 时间：2013-03-10T21:11:39.613
> 
> 标签：android, canvas, bitmap, translate-animation

我正在使用一个使用 onDraw(Canvas canvas) 方法在不同位置绘制一个或多个位图的类。如果我想在事件（ onTouchEvent ）之后为这些位图之一设置动画，并且如果我知道所有位图的位置，如何我可以将选定的位图翻译到另一个位置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:18:53.673

您不能更改绘制位图的位置。更改位图位置后，您必须使用 invalidate() 方法重新绘制它。

# javascript - 使用 d3.js 的强制有向图

> ID：15327680
> 
> 赞同：2
> 
> 时间：2013-03-10T21:11:56.123
> 
> 标签：javascript, json, graph, d3.js, force-layout

我已经开始使用 d3.js 库来制作强制有向图。有人能告诉我为什么这个[网站](http://bl.ocks.org/mbostock/4062045)中也提到的这段代码不起作用吗？

**索引.html**

```
.node {
  stroke: #fff;
  stroke-width: 1.5px;
}

.link {
  stroke: #999;
  stroke-opacity: .6;
}

</style>
<body>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script>

var width = 960,
    height = 500;

var color = d3.scale.category20();

var force = d3.layout.force()
    .charge(-120)
    .linkDistance(30)
    .size([width, height]);

var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height);

d3.json("miserables.json", function(error, graph) {
  force
      .nodes(graph.nodes)
      .links(graph.links)
      .start();

  var link = svg.selectAll(".link")
      .data(graph.links)
    .enter().append("line")
      .attr("class", "link")
      .style("stroke-width", function(d) { return Math.sqrt(d.value); });

  var node = svg.selectAll(".node")
      .data(graph.nodes)
    .enter().append("circle")
      .attr("class", "node")
      .attr("r", 5)
      .style("fill", function(d) { return color(d.group); })
      .call(force.drag);

  node.append("title")
      .text(function(d) { return d.name; });

  force.on("tick", function() {
    link.attr("x1", function(d) { return d.source.x; })
        .attr("y1", function(d) { return d.source.y; })
        .attr("x2", function(d) { return d.target.x; })
        .attr("y2", function(d) { return d.target.y; });

    node.attr("cx", function(d) { return d.x; })
        .attr("cy", function(d) { return d.y; });
  });
});

</script> 
```

**悲惨的.json**

```
{
  "nodes":[
    {"name":"Myriel","group":1},
    {"name":"Napoleon","group":1},
    {"name":"Mlle.Baptistine","group":1},
    {"name":"Mme.Magloire","group":1},
    {"name":"CountessdeLo","group":1},
    {"name":"Geborand","group":1},
    {"name":"Champtercier","group":1},
    {"name":"Cravatte","group":1},
    {"name":"Count","group":1},
    {"name":"OldMan","group":1},
    {"name":"Labarre","group":2},
    {"name":"Valjean","group":2},
    {"name":"Marguerite","group":3},
    {"name":"Mme.deR","group":2},
    {"name":"Isabeau","group":2},
    {"name":"Gervais","group":2},
    {"name":"Tholomyes","group":3},
    {"name":"Listolier","group":3},
    {"name":"Fameuil","group":3},
    {"name":"Blacheville","group":3},
    {"name":"Favourite","group":3},
    {"name":"Dahlia","group":3},
    {"name":"Zephine","group":3},
    {"name":"Fantine","group":3},
    {"name":"Mme.Thenardier","group":4},
    {"name":"Thenardier","group":4},
    {"name":"Cosette","group":5},
    {"name":"Javert","group":4},
    {"name":"Fauchelevent","group":0},
    {"name":"Bamatabois","group":2},
    {"name":"Perpetue","group":3},
    {"name":"Simplice","group":2},
    {"name":"Scaufflaire","group":2},
    {"name":"Woman1","group":2},
    {"name":"Judge","group":2},
    {"name":"Champmathieu","group":2},
    {"name":"Brevet","group":2},
    {"name":"Chenildieu","group":2},
    {"name":"Cochepaille","group":2},
    {"name":"Pontmercy","group":4},
    {"name":"Boulatruelle","group":6},
    {"name":"Eponine","group":4},
    {"name":"Anzelma","group":4},
    {"name":"Woman2","group":5},
    {"name":"MotherInnocent","group":0},
    {"name":"Gribier","group":0},
    {"name":"Jondrette","group":7},
    {"name":"Mme.Burgon","group":7},
    {"name":"Gavroche","group":8},
    {"name":"Gillenormand","group":5},
    {"name":"Magnon","group":5},
    {"name":"Mlle.Gillenormand","group":5},
    {"name":"Mme.Pontmercy","group":5},
    {"name":"Mlle.Vaubois","group":5},
    {"name":"Lt.Gillenormand","group":5},
    {"name":"Marius","group":8},
    {"name":"BaronessT","group":5},
    {"name":"Mabeuf","group":8},
    {"name":"Enjolras","group":8},
    {"name":"Combeferre","group":8},
    {"name":"Prouvaire","group":8},
    {"name":"Feuilly","group":8},
    {"name":"Courfeyrac","group":8},
    {"name":"Bahorel","group":8},
    {"name":"Bossuet","group":8},
    {"name":"Joly","group":8},
    {"name":"Grantaire","group":8},
    {"name":"MotherPlutarch","group":9},
    {"name":"Gueulemer","group":4},
    {"name":"Babet","group":4},
    {"name":"Claquesous","group":4},
    {"name":"Montparnasse","group":4},
    {"name":"Toussaint","group":5},
    {"name":"Child1","group":10},
    {"name":"Child2","group":10},
    {"name":"Brujon","group":4},
    {"name":"Mme.Hucheloup","group":8}
  ],
  "links":[
    {"source":1,"target":0,"value":1},
    {"source":2,"target":0,"value":8},
    {"source":3,"target":0,"value":10},
    {"source":3,"target":2,"value":6},
    {"source":4,"target":0,"value":1},
    {"source":5,"target":0,"value":1},
    {"source":6,"target":0,"value":1},
    {"source":7,"target":0,"value":1},
    {"source":8,"target":0,"value":2},
    {"source":9,"target":0,"value":1},
    {"source":11,"target":10,"value":1},
    {"source":11,"target":3,"value":3},
    {"source":11,"target":2,"value":3},
    {"source":11,"target":0,"value":5},
    {"source":12,"target":11,"value":1},
    {"source":13,"target":11,"value":1},
    {"source":14,"target":11,"value":1},
    {"source":15,"target":11,"value":1},
    {"source":17,"target":16,"value":4},
    {"source":18,"target":16,"value":4},
    {"source":18,"target":17,"value":4},
    {"source":19,"target":16,"value":4},
    {"source":19,"target":17,"value":4},
    {"source":19,"target":18,"value":4},
    {"source":20,"target":16,"value":3},
    {"source":20,"target":17,"value":3},
    {"source":20,"target":18,"value":3},
    {"source":20,"target":19,"value":4},
    {"source":21,"target":16,"value":3},
    {"source":21,"target":17,"value":3},
    {"source":21,"target":18,"value":3},
    {"source":21,"target":19,"value":3},
    {"source":21,"target":20,"value":5},
    {"source":22,"target":16,"value":3},
    {"source":22,"target":17,"value":3},
    {"source":22,"target":18,"value":3},
    {"source":22,"target":19,"value":3},
    {"source":22,"target":20,"value":4},
    {"source":22,"target":21,"value":4},
    {"source":23,"target":16,"value":3},
    {"source":23,"target":17,"value":3},
    {"source":23,"target":18,"value":3},
    {"source":23,"target":19,"value":3},
    {"source":23,"target":20,"value":4},
    {"source":23,"target":21,"value":4},
    {"source":23,"target":22,"value":4},
    {"source":23,"target":12,"value":2},
    {"source":23,"target":11,"value":9},
    {"source":24,"target":23,"value":2},
    {"source":24,"target":11,"value":7},
    {"source":25,"target":24,"value":13},
    {"source":25,"target":23,"value":1},
    {"source":25,"target":11,"value":12},
    {"source":26,"target":24,"value":4},
    {"source":26,"target":11,"value":31},
    {"source":26,"target":16,"value":1},
    {"source":26,"target":25,"value":1},
    {"source":27,"target":11,"value":17},
    {"source":27,"target":23,"value":5},
    {"source":27,"target":25,"value":5},
    {"source":27,"target":24,"value":1},
    {"source":27,"target":26,"value":1},
    {"source":28,"target":11,"value":8},
    {"source":28,"target":27,"value":1},
    {"source":29,"target":23,"value":1},
    {"source":29,"target":27,"value":1},
    {"source":29,"target":11,"value":2},
    {"source":30,"target":23,"value":1},
    {"source":31,"target":30,"value":2},
    {"source":31,"target":11,"value":3},
    {"source":31,"target":23,"value":2},
    {"source":31,"target":27,"value":1},
    {"source":32,"target":11,"value":1},
    {"source":33,"target":11,"value":2},
    {"source":33,"target":27,"value":1},
    {"source":34,"target":11,"value":3},
    {"source":34,"target":29,"value":2},
    {"source":35,"target":11,"value":3},
    {"source":35,"target":34,"value":3},
    {"source":35,"target":29,"value":2},
    {"source":36,"target":34,"value":2},
    {"source":36,"target":35,"value":2},
    {"source":36,"target":11,"value":2},
    {"source":36,"target":29,"value":1},
    {"source":37,"target":34,"value":2},
    {"source":37,"target":35,"value":2},
    {"source":37,"target":36,"value":2},
    {"source":37,"target":11,"value":2},
    {"source":37,"target":29,"value":1},
    {"source":38,"target":34,"value":2},
    {"source":38,"target":35,"value":2},
    {"source":38,"target":36,"value":2},
    {"source":38,"target":37,"value":2},
    {"source":38,"target":11,"value":2},
    {"source":38,"target":29,"value":1},
    {"source":39,"target":25,"value":1},
    {"source":40,"target":25,"value":1},
    {"source":41,"target":24,"value":2},
    {"source":41,"target":25,"value":3},
    {"source":42,"target":41,"value":2},
    {"source":42,"target":25,"value":2},
    {"source":42,"target":24,"value":1},
    {"source":43,"target":11,"value":3},
    {"source":43,"target":26,"value":1},
    {"source":43,"target":27,"value":1},
    {"source":44,"target":28,"value":3},
    {"source":44,"target":11,"value":1},
    {"source":45,"target":28,"value":2},
    {"source":47,"target":46,"value":1},
    {"source":48,"target":47,"value":2},
    {"source":48,"target":25,"value":1},
    {"source":48,"target":27,"value":1},
    {"source":48,"target":11,"value":1},
    {"source":49,"target":26,"value":3},
    {"source":49,"target":11,"value":2},
    {"source":50,"target":49,"value":1},
    {"source":50,"target":24,"value":1},
    {"source":51,"target":49,"value":9},
    {"source":51,"target":26,"value":2},
    {"source":51,"target":11,"value":2},
    {"source":52,"target":51,"value":1},
    {"source":52,"target":39,"value":1},
    {"source":53,"target":51,"value":1},
    {"source":54,"target":51,"value":2},
    {"source":54,"target":49,"value":1},
    {"source":54,"target":26,"value":1},
    {"source":55,"target":51,"value":6},
    {"source":55,"target":49,"value":12},
    {"source":55,"target":39,"value":1},
    {"source":55,"target":54,"value":1},
    {"source":55,"target":26,"value":21},
    {"source":55,"target":11,"value":19},
    {"source":55,"target":16,"value":1},
    {"source":55,"target":25,"value":2},
    {"source":55,"target":41,"value":5},
    {"source":55,"target":48,"value":4},
    {"source":56,"target":49,"value":1},
    {"source":56,"target":55,"value":1},
    {"source":57,"target":55,"value":1},
    {"source":57,"target":41,"value":1},
    {"source":57,"target":48,"value":1},
    {"source":58,"target":55,"value":7},
    {"source":58,"target":48,"value":7},
    {"source":58,"target":27,"value":6},
    {"source":58,"target":57,"value":1},
    {"source":58,"target":11,"value":4},
    {"source":59,"target":58,"value":15},
    {"source":59,"target":55,"value":5},
    {"source":59,"target":48,"value":6},
    {"source":59,"target":57,"value":2},
    {"source":60,"target":48,"value":1},
    {"source":60,"target":58,"value":4},
    {"source":60,"target":59,"value":2},
    {"source":61,"target":48,"value":2},
    {"source":61,"target":58,"value":6},
    {"source":61,"target":60,"value":2},
    {"source":61,"target":59,"value":5},
    {"source":61,"target":57,"value":1},
    {"source":61,"target":55,"value":1},
    {"source":62,"target":55,"value":9},
    {"source":62,"target":58,"value":17},
    {"source":62,"target":59,"value":13},
    {"source":62,"target":48,"value":7},
    {"source":62,"target":57,"value":2},
    {"source":62,"target":41,"value":1},
    {"source":62,"target":61,"value":6},
    {"source":62,"target":60,"value":3},
    {"source":63,"target":59,"value":5},
    {"source":63,"target":48,"value":5},
    {"source":63,"target":62,"value":6},
    {"source":63,"target":57,"value":2},
    {"source":63,"target":58,"value":4},
    {"source":63,"target":61,"value":3},
    {"source":63,"target":60,"value":2},
    {"source":63,"target":55,"value":1},
    {"source":64,"target":55,"value":5},
    {"source":64,"target":62,"value":12},
    {"source":64,"target":48,"value":5},
    {"source":64,"target":63,"value":4},
    {"source":64,"target":58,"value":10},
    {"source":64,"target":61,"value":6},
    {"source":64,"target":60,"value":2},
    {"source":64,"target":59,"value":9},
    {"source":64,"target":57,"value":1},
    {"source":64,"target":11,"value":1},
    {"source":65,"target":63,"value":5},
    {"source":65,"target":64,"value":7},
    {"source":65,"target":48,"value":3},
    {"source":65,"target":62,"value":5},
    {"source":65,"target":58,"value":5},
    {"source":65,"target":61,"value":5},
    {"source":65,"target":60,"value":2},
    {"source":65,"target":59,"value":5},
    {"source":65,"target":57,"value":1},
    {"source":65,"target":55,"value":2},
    {"source":66,"target":64,"value":3},
    {"source":66,"target":58,"value":3},
    {"source":66,"target":59,"value":1},
    {"source":66,"target":62,"value":2},
    {"source":66,"target":65,"value":2},
    {"source":66,"target":48,"value":1},
    {"source":66,"target":63,"value":1},
    {"source":66,"target":61,"value":1},
    {"source":66,"target":60,"value":1},
    {"source":67,"target":57,"value":3},
    {"source":68,"target":25,"value":5},
    {"source":68,"target":11,"value":1},
    {"source":68,"target":24,"value":1},
    {"source":68,"target":27,"value":1},
    {"source":68,"target":48,"value":1},
    {"source":68,"target":41,"value":1},
    {"source":69,"target":25,"value":6},
    {"source":69,"target":68,"value":6},
    {"source":69,"target":11,"value":1},
    {"source":69,"target":24,"value":1},
    {"source":69,"target":27,"value":2},
    {"source":69,"target":48,"value":1},
    {"source":69,"target":41,"value":1},
    {"source":70,"target":25,"value":4},
    {"source":70,"target":69,"value":4},
    {"source":70,"target":68,"value":4},
    {"source":70,"target":11,"value":1},
    {"source":70,"target":24,"value":1},
    {"source":70,"target":27,"value":1},
    {"source":70,"target":41,"value":1},
    {"source":70,"target":58,"value":1},
    {"source":71,"target":27,"value":1},
    {"source":71,"target":69,"value":2},
    {"source":71,"target":68,"value":2},
    {"source":71,"target":70,"value":2},
    {"source":71,"target":11,"value":1},
    {"source":71,"target":48,"value":1},
    {"source":71,"target":41,"value":1},
    {"source":71,"target":25,"value":1},
    {"source":72,"target":26,"value":2},
    {"source":72,"target":27,"value":1},
    {"source":72,"target":11,"value":1},
    {"source":73,"target":48,"value":2},
    {"source":74,"target":48,"value":2},
    {"source":74,"target":73,"value":3},
    {"source":75,"target":69,"value":3},
    {"source":75,"target":68,"value":3},
    {"source":75,"target":25,"value":3},
    {"source":75,"target":48,"value":1},
    {"source":75,"target":41,"value":1},
    {"source":75,"target":70,"value":1},
    {"source":75,"target":71,"value":1},
    {"source":76,"target":64,"value":1},
    {"source":76,"target":65,"value":1},
    {"source":76,"target":66,"value":1},
    {"source":76,"target":63,"value":1},
    {"source":76,"target":62,"value":1},
    {"source":76,"target":48,"value":1},
    {"source":76,"target":58,"value":1}
  ]
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T21:50:32.263

您提供的代码有效，您可以在此[jsFiddle](http://jsfiddle.net/chrisJamesC/g6Ujg/)上看到。唯一的区别是我没有使用该`d3.json`函数来加载json文件。

您遇到的问题当然是您想在本地运行它，并且没有加载 json。您需要在计算机上运行服务器才能使其正常工作。这是一个也可以提供帮助的问题：[d3.json:"Uncaught TypeError: Cannot read property 'children' of undefined"](https://stackoverflow.com/questions/13715891/d3-json-uncaught-typeerror-cannot-read-property-children-of-undefined)

拥有本地 Web 服务器的最简单方法是在您拥有源代码的目录中运行此命令，如下所述[：](https://github.com/mbostock/d3/wiki)

```
python -m SimpleHTTPServer 8888 & 
```

然后只需加载页面`http://localhost:8888`

# java - 在 Java EE 中创建 Netty 侦听器

> ID：15327683
> 
> 赞同：2
> 
> 时间：2013-03-10T21:12:06.897
> 
> 标签：java, java-ee-6, netty

我们目前正在开发一个小型应用程序，它需要通过专有的 tcp 协议与机器接口进行通信。

对于这种低级通信的东西，我们使用 Netty 来实现必要的编码器和解码器。由于我们还需要一些 Java EE 的东西，例如 WebService、JPA 等，我们考虑将 netty 服务器集成到 Java EE 6 应用程序中。因此，我们将使用 ApplicationScoped 托管 CDI bean，其中在 PostConstruct 方法中触发引导，并在 PreDestroy 回调中完成取消注册。

所以主要问题是：

这会导致问题吗，因为据我所知，技术上不允许在 Java EE 环境中启动线程（我认为 Netty 在这里启动了一些线程）？

如果是，有哪些问题？由于我们不需要集群，我们只需要使用像 GlassFish 这样的标准 Java EE 6 应用服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T15:51:50.620

大多数人会反对它，因为不正确的终止和资源锁定会导致灾难性的结果。但是，如果您知道自己在做什么，就没有理由不这样做。

也就是说，根据您的需要，我建议您首先研究 Java 连接器架构。它已经为连接、交易、安全、生命周期、工作等管理提供了既定的合同。因此，您有更好的机会编写一个好的实现并将线程管理转移到容器。看到[这个](http://docs.oracle.com/javaee/6/tutorial/doc/gipgl.html)和[这个](http://en.wikipedia.org/wiki/Java_EE_Connector_Architecture)让你开始。

# html - 如何在这个 html 中设置宽度 100%？

> ID：15327685
> 
> 赞同：1
> 
> 时间：2013-03-10T21:12:13.817
> 
> 标签：html, width

我如何让它显示为空间的整个宽度？宽度 100% 在这里是不正确的。谢谢

```
<a style="background-color: #236b8e; font: Georgia; font-size: 15px; color: #ffffff; font-    weight: bold; padding: 10px; width: 100%; text-decoration: none;" href="http://mysite.com/">Go There Now</a> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T21:15:02.867

`<a>`默认情况下是一个[内联元素](http://www.webdesignfromscratch.com/html-css/css-block-and-inline/)，因此会根据其内容调整大小。添加`display: block`样式以将其更改为阻止样式，这将允许宽度调整工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T21:15:16.463

使用`width`不适用于内联元素。如果将其设为块元素，则它可以具有特定的宽度。

添加`display:block;`样式以使其成为块元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T21:19:20.110

请把你的问题说清楚。该文本是网页中唯一的元素吗？如果是，则将其添加到 CSS 中...希望它有所帮助。

编辑：嗯，我想这就是你要找的..

```
 <a style="background-color: #236b8e; font: Georgia; font-size: 15px; color: #ffffff; font-    weight: bold; 

padding: 10px;  display: block; text-decoration: none;" href="http://mysite.com/">Go There Now</a> 
```

# ruby-on-rails - Rails - 如何创建一个复选框，在不刷新的情况下检查时呈现不同的表单？

> ID：15327686
> 
> 赞同：0
> 
> 时间：2013-03-10T21:12:34.987
> 
> 标签：ruby-on-rails, checkbox

正如标题所示，我想知道如何在视图上创建一个复选框，该复选框将在不刷新页面的情况下更改呈现的表单。

在我的`app/views/home/`文件夹中，我有`_form_1.html.erb`和`_form_2.html.erb`。

我想默认`<%= render 'form_1' %>`为未选中该框的时间，并更改为`<%= render 'form_2' %>`选中该框的时间。

我试图查找如何执行此操作，但是诸如`.is(":checked")`并且`check_box_tag`似乎对我不起作用，或者我使用错误。

任何帮助表示赞赏！

编辑：我正在使用 Rails 3.2.12 和 Ruby 1.9.3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T21:16:57.130

我这样做的方法是从另一个视图呈现两个表单部分，并将它们中的每一个放在一个 div 中。默认的表单 div 应该是可见的，而可选的表单 div 应该是隐藏的。然后，您可以通过单击复选框来切换 div 的显示。

根据表单中的内容以及它们与控制器的交互方式，处理过程中可能涉及很多其他工作，但为了切换显示的表单，上述方法是一种选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T21:20:51.590

如果您想在不刷新的情况下执行此操作，则必须使用 javascript。您要做的是将每个表单呈现为`hidden`. 下一部分使用 jquery 非常简单。When a checkobox is selected you'd just do something like `$('#form1').show()`, and conversely`$('#form2').hide()`

# testing - 如何使用浏览器同时测试 WebApps 的多个角色

> ID：15327687
> 
> 赞同：0
> 
> 时间：2013-03-10T21:12:36.533
> 
> 标签：testing, web-applications, browser, session-cookies

我正在寻找一种方法来使用浏览器测试应用程序的多个角色。对于这个问题，我需要交互操作的解决方案，**假设用户正在登录**。

目标操作系统**主要是 OS X**，但也请提供**Windows 解决方案**。

我知道的所有浏览器都**将 cookie 集中存储在浏览器**中。如果我使用角色 A 登录到 Web 应用程序，然后以角色 B 身份登录，则角色 A 将被隐藏 - 因为大多数**Web 应用程序共享一个会话令牌**，它标识用户的角色。

**是否存在在浏览器中并行**测试两个角色的解决方案？具有不同*身份*的浏览器？

由于某些原因，不能打开两个不同的浏览器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:51:16.187

由于您使用的是 Mac，因此您可以使用`open -n /Applications/BrowserName.app`任何您想要的浏览器（尽管较新版本的 Firefox 显然需要更多的工作：[https ://superuser.com/questions/396434/how-to-open-a-new-带有终端的 Firefox 窗口](https://superuser.com/questions/396434/how-to-open-a-new-firefox-window-with-terminal)）。此命令将在您每次运行时打开一个全新的浏览器实例。

根据您的测试方式，您可能希望在浏览器关闭时清除 cookie，但 cookie 不应在浏览器运行时干扰。（未测试。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T21:30:37.553

刚发现这个：

Firefox 有一个名为[Profiles](http://kb.mozillazine.org/Command_line_arguments)的功能。使用[Firefox 的命令行参数](http://kb.mozillazine.org/Command_line_arguments)，可以创建多个单独的配置文件：

![Firefox 的配置文件管理器](../Images/2fd9bab0970aa51f1c16ee35862addd5.png)

例如，在 OS X 上，Firefox 的配置文件管理器使用以下命令打开：

```
/Applications/Firefox.app/Contents/MacOS/firefox-bin -ProfileManager 
```

要在 OS X 上使用不同的配置文件运行两个不同的 Firefox 实例，需要创建 Firefox 应用程序的副本。

不过，我很乐意了解**其他浏览器的解决方案**。或集成解决方案，它**不会强迫我复制浏览器应用程序**。

# c++ - 关于声明语义的几个问题

> ID：15327689
> 
> 赞同：-1
> 
> 时间：2013-03-10T21:12:44.010
> 
> 标签：c++, semantics

哪一个更正确，使用更广泛？实际问题是最后一个问题，我认为行为发生了变化。

```
int *test; //for this, it is probably both?
int* test;

int& test;
int &test; 
```

**实际问题：**

```
const int test;
int const test;

const int* test;
int* const test; //<-- I guess this also have a different meaning if I consider the last one?

const int& test;
int const& test; //also, considering last one, any difference?

const int*& test;
int* const& test; //<-- this is the correct one for stating "I won't modify the passed object, but I may modify the one pointed"? I have had problems with the other one sometimes, does the other one has some other meaning?
const int* const& test; //<-- another meaning? 
```

如果您能指出您是否知道该主题中的任何视觉*“歧义”* ，我也会很高兴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T21:19:58.390

除了这些之外，您的所有示例都为每一行提供了相同的语义：

```
//test is a pointer to a const int.
//test may be modified, but the int
//that it points to may not (through this
//access path).
const int* test;

//test is a const pointer to int.
//test may not be modified, but the
//int that it points to may.
int* const test;

//test is a reference to a pointer to a const int.
//The referenced pointer may be modified, but
//the int that that pointer points to may not be.
const int*& test;
//test is a reference to a const pointer to 
//int. The referenced pointer may not be modified
//but the int may be.
int* const& test; //<-- this is the correct one for stating
                  //    "I won't modify the passed object,
                  //     but I may modify the one pointed"?
                  //       Yes
                  //    I have had problems with the other one sometimes,
                  //    does the other one has some other meaning?
                  //       Yes
//test is a reference to a const pointer to const int.
//The referenced pointer may not be modified, nor may
//the int that it points to.
const int* const& test; //<-- another meaning? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T21:20:17.080

首先，空格在技术上无关紧要，除了它分隔符号的程度。

也就是说，您不会通过分析现有声明来尝试理解事物。

您应该从*构造*声明开始。

在这些结构中，放置`const`在它适用的任何地方之后。

不幸的是，C 的一般思想保留在 C++ 中，声明就像用法一样。所以，比如说，表达式`*p`应该产生一个`int`，那么 的声明`p`就是`int *p`。现在假设表达式`*p`应该产生一个`int const`，那么声明将是`int const *p`。

在 C++ 中，重点是类型，因此 C++ 程序员可能会将其写为

```
int const* p; 
```

将类型事物与声明的任何名称分开。

*但请记住，空间在技术上*并不重要。

通过这种从预期用途的外观构造声明的方式，您可以轻松地使用 C++ 编译器来*测试*您的声明是否有效，它是否可以编译。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T21:21:49.370

将空间放置在`&`或周围的位置`*`（或者实际上，如果一侧或两侧有一个或多个空间）绝对没有区别。的位置`const`确实有所作为；

```
const int *test; 
```

意味着什么`test`指向没有被改变。所以：

```
int b = 42;
*test = 42;
test = &b; 
```

这`*test = 42;`将是非法的，但将测试分配给新地址是有效的。

```
int * const test; 
```

意味着`test`不能改变它的价值，但它所指向的可以：

```
int b = 42;
*test = 42;
test = &b; 
```

现在`test = &b;`是无效的。

```
const int& test;
int const& test; //also, considering last one, any difference? 
```

两者都一样。const 和 int 是`&`.

这个：

```
const int*& test; 
```

意味着我们引用了一个`int *`值不能改变的地方。完全有效，我们可以使用以下内容：

```
test = &b; 
```

这两个：

```
int* const& test
const int* const& test; 
```

`int *`分别是对和的引用`const int *`，我们不能更改指针本身 - 所以通过引用传递它没有意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T21:25:58.727

`int *x`并被`int &x`认为更好。为什么？ `int* x, y`看起来像是两个指向 int 的指针，但这是一个指针和一个 int。 `int *x, *y`语法稍微好一点 - 你可以更好地看到这是两个指针。

我知道我没有涵盖您问题的第二部分；）

# php - 从 Xenforo 用户信息数组中抓取数组项

> ID：15327692
> 
> 赞同：0
> 
> 时间：2013-03-10T21:13:11.450
> 
> 标签：php, arrays

我有一个主页 + xenforo 论坛。如果他登录，我想在主页上显示用户信息。

我发现了这个很棒的代码：

```
<?php
define('XF_ROOT', 'forums/'); // set this (absolute path)!
define('TIMENOW', time());
define('SESSION_BYPASS', false); // if true: logged in user info and sessions are not needed

require_once(XF_ROOT . '/library/XenForo/Autoloader.php');

XenForo_Autoloader::getInstance()->setupAutoloader(XF_ROOT . '/library');

XenForo_Application::initialize(XF_ROOT . '/library', XF_ROOT);
XenForo_Application::set('page_start_time', TIMENOW);
XenForo_Application::disablePhpErrorHandler();
XenForo_Application::setDebugMode(false);

if (!SESSION_BYPASS)
{
    XenForo_Session::startPublicSession();

    $visitor = XenForo_Visitor::getInstance();

    if ($visitor->getUserId())
    {
        $userModel = XenForo_Model::create('XenForo_Model_User');
        $userinfo = $userModel->getFullUserById($visitor->getUserId());
    }
}

restore_error_handler();
restore_exception_handler();
?> 
```

这对我来说是这样的。然后我做了

var_dump($userinfo);

它给了我这个大数组：

```
array(61) { ["user_id"]=> int(1) ["username"]=> string(4) "Jony" ["email"]=> string(20) "artemkller@gmail.com" ["gender"]=> string(0) "" ["custom_title"]=> string(0) "" ["language_id"]=> int(1) ["style_id"]=> int(0) ["timezone"]=> string(13) "Europe/London" ["visible"]=> int(1) ["user_group_id"]=> int(2) ["secondary_group_ids"]=> string(3) "3,4" ["display_style_group_id"]=> int(3) ["permission_combination_id"]=> int(7) ["message_count"]=> int(0) ["conversations_unread"]=> int(0) ["register_date"]=> int(1362857171) ["last_activity"]=> int(1362949375) ["trophy_points"]=> int(1) ["alerts_unread"]=> int(0) ["avatar_date"]=> int(0) ["avatar_width"]=> int(0) ["avatar_height"]=> int(0) ["gravatar"]=> string(0) "" ["user_state"]=> string(5) "valid" ["is_moderator"]=> int(1) ["is_admin"]=> int(1) ["is_banned"]=> int(0) ["like_count"]=> int(0) ["warning_points"]=> int(0) ["dob_day"]=> int(0) ["dob_month"]=> int(0) ["dob_year"]=> int(0) ["status"]=> string(0) "" ["status_date"]=> int(0) ["status_profile_post_id"]=> int(0) ["signature"]=> string(0) "" ["homepage"]=> string(0) "" ["location"]=> string(0) "" ["occupation"]=> string(0) "" ["following"]=> string(0) "" ["ignored"]=> string(0) "" ["csrf_token"]=> string(40) "9fe480c5ed5a27d3a888a1ec6e1f4fa2c0109db4" ["avatar_crop_x"]=> int(0) ["avatar_crop_y"]=> int(0) ["about"]=> string(0) "" ["facebook_auth_id"]=> int(0) ["custom_fields"]=> string(0) "" ["show_dob_year"]=> int(1) ["show_dob_date"]=> int(1) ["content_show_signature"]=> int(1) ["receive_admin_email"]=> int(1) ["email_on_conversation"]=> int(1) ["is_discouraged"]=> int(0) ["default_watch_state"]=> string(0) "" ["alert_optout"]=> string(0) "" ["enable_rte"]=> int(1) ["allow_view_profile"]=> string(8) "everyone" ["allow_post_profile"]=> string(8) "everyone" ["allow_send_personal_conversation"]=> string(8) "everyone" ["allow_view_identities"]=> string(8) "everyone" ["allow_receive_news_feed"]=> string(8) "everyone" } 
```

我的问题：

假设我想从数组中获取“用户名”

```
["username"]=> string(4) "Jony" 
```

我该怎么做？我从来没有在 PHP 中使用过数组，我很新。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T21:15:33.893

数组是 PHP 中的一个基本概念，因此最好立即学习它们。

```
$username = $userinfo['username'];
echo $username; 
```

# jquery - jQuery - 响应式面板

> ID：15327694
> 
> 赞同：4
> 
> 时间：2013-03-10T21:13:32.787
> 
> 标签：jquery, html, jquery-mobile, panel

我想在页面加载时在我的页面上显示一个面板。我已经用脚本得到了这个。

但是当网站加载时，面板会显示整个页面 -> 我页面的另一侧正在向右滚动，所以我看不到整个内容。

所以我在我的页面包装器中添加了“class="ui-responsive-panel"”。

现在我有同样的问题，直到我点击一个链接到我的面板的按钮。此按钮在第一次单击时隐藏面板，第二次显示我的面板，右侧内容正在缩小他的宽度（这是我的目标）。

我要补充什么，这已经在页面加载完成了？

谢谢

编辑：我的代码

```
<!-- Page -->
<div data-role="page" id="page" class="ui-responsive-panel">

<!-- Panel -->
<div data-role="panel" id="Panel" data-display="reveal" data-position-fixed="true" data-swipe-close="false" data-dismissible="false" data-theme="none">
Content here
</div>

<div data-role="header" data-theme="b" data-position="fixed">
        <h1>Title</h1>
    </div>
    <div data-role="content">

Here my Content which I want to auto scale on page load

<!-- Panel shown on page load -->
<script>$(document).on('pagebeforeshow', '#Page', function(){       
    $( "#Panel" ).panel( "open");
});</script>

</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T04:55:21.187

你在这里有很多选择。首先，我建议查看[twitter bootstrap](http://twitter.github.io/bootstrap/)。他们做了很多造型，所以你不必这样做。

此外，您可以在每个 div 上设置一定的百分比宽度。只需使用宽度：'value'%;。

您可以做的另一件事是使用@media 标签：

```
@media (min-width 300 && max-width: 480px) {
    #panel {
            width: 96px;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-03T22:01:04.820

我知道这有点晚了，但以防万一有人仍在试图找到这个问题的答案。我遇到了同样的问题并通过以下方式修复它：

```
 $(document).on("pagechange", function (event, data) {
        $('#Panel').panel("open");
    }) 
```

现在面板的html代码如下：

```
<div  id="Panel" 
      data-role="panel" 
      data-display="push" 
      data-animate="false"
      data-dismissible="false" >
      <!-- /panel content -->
</div> 
```

其中 data-dismissible="false" 是可选的，以防您想保持面板可见，而 data-animate="false" 是可选的，以防您想摆脱页面加载时的动画。

# c# - 我可以以某种方式禁用 mdi 父表单中的“滞后”吗？

> ID：15327697
> 
> 赞同：0
> 
> 时间：2013-03-10T21:14:01.290
> 
> 标签：c#, forms, mdi

我有以下问题：我为父表单设置了背景图像。每次我打开一个孩子并将它移动到某个地方时，父母都会重新绘制 bgimage，或者重新加载它，因为它看起来像滞后。我可以以某种方式禁用此效果吗？

# spring - 如何将 Spring Data 用于 Redis 序列化程序？

> ID：15327699
> 
> 赞同：3
> 
> 时间：2013-03-10T21:14:07.260
> 
> 标签：spring, redis, spring-data, spring-data-redis

我正在研究 Redis 的 Spring Data，但直到现在我还没有找到任何关于如何使用该项目支持的序列化程序的示例？

我已经阅读了项目参考文档的第 4.6 节（[http://static.springsource.org/spring-data/data-redis/docs/current/reference/html/redis.html#redis:serializer](http://static.springsource.org/spring-data/data-redis/docs/current/reference/html/redis.html#redis:serializer)）但是它基本上只说它存在。而已。如何使用此功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T21:49:04.247

序列化程序在代码库中的一些地方使用，最显着的是在 RedisTemplate 中，用于将存储在 Redis 中作为键/值的原始字节转换为您的自定义数据类型（反之亦然）。这在文档的第 4.4 节中有所提及。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-31T04:23:04.167

> 在你的**弹簧配置中**

```
<bean id="stringSerializer" class="org.springframework.data.redis.serializer.StringRedisSerializer"/>

<bean id="redisTemplate" class="org.springframework.data.redis.core.RedisTemplate" 
    p:connection-factory-ref="jedisConnectionFactory">
    <property name="keySerializer" ref="stringSerializer"/>
    <property name="valueSerializer" ref="stringSerializer"/>
</bean>

<bean id="jedisConnectionFactory" class="org.springframework.data.redis.connection.jedis.JedisConnectionFactory" 
    p:host-name="myhostname" p:port="6379"/> 
```

> 或者如果你想在**Java中设置它**

```
// inject the actual template 
      @Autowired
      private RedisTemplate<String, Object> template;
...
...
template.setKeySerializer(new StringRedisSerializer());
template.setValueSerializer(new StringRedisSerializer()); 
```

# ios - 拍摄 UIWebView 的快照缺少 UIWebViews

> ID：15327700
> 
> 赞同：0
> 
> 时间：2013-03-10T21:14:10.717
> 
> 标签：ios, objective-c, uiwebview, uikit

我已经成功地拍摄了我在本地存储的 htmls 数组的快照。问题是，如果 html 很小，只有一串文本，那么这个过程很可能`webViewDidFinishLoad`会太快，并且会加载下一个 html 而不会对其进行快照。在继续下一个 html 之前，如何确保每个 html 都被快照？

```
[_tempWebView loadHTMLString:msg baseURL:nil]; //starting the process of the `webViewDidFinishLoad` loop 
```

...

```
 - (void)webViewDidFinishLoad:(UIWebView *)webView 
{
        [self captureScreen:webView];
}

-(void)captureScreen:(UIView*) viewToCapture
{
    UIGraphicsBeginImageContext(viewToCapture.bounds.size);
    [viewToCapture.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    [_snapshot addObject:viewImage];
} 
```

# java - 如何使用同步 trove 收集？

> ID：15327703
> 
> 赞同：1
> 
> 时间：2013-03-10T21:14:18.500
> 
> 标签：java, web-applications, collections, thread-safety, trove4j

我正在用 Java 编写动态 Web 项目，并尝试在我的一个 servlet 中使用 Trove Collection。我看到问题出现在集合创建行中，之后我的项目堆栈。我发现 Trove 集合不是线程安全的（这可能是 Web 项目服务器端的问题），但即使我尝试了这一行：

```
 TIntObjectMap m = TCollections.synchronizedMap( new TIntObjectHashMap()); 
```

该项目无法通过这条线（顺便说一句，在常规的java项目中这条线有效）。

我可以在 Web 项目服务器端使用 Trove 集合吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T15:29:53.513

是的，您可以，但正如您所指出的，这些集合不是线程安全的。但是，我不明白为什么您引用的代码可以独立工作，但不能在 servlet 中工作。你能发布代码和你得到的错误吗？

# c++ - C++ 货币输出

> ID：15327706
> 
> 赞同：4
> 
> 时间：2013-03-10T21:14:52.413
> 
> 标签：c++, floating-point, iostream, currency

我现在正在学习 C++ 课程并完成了我的期末作业。然而，有一件事情让我很烦恼：

虽然我对特定输出的测试有正确的输出，但`basepay`应该是`133.20`并且它显示为`133.2`. 有没有办法让这个显示额外的 0 而不是关闭它？

任何人都知道这是否可能以及如何做到这一点？先感谢您

我的代码如下：

```
cout<< "Base Pay .................. = " << basepay << endl;
cout<< "Hours in Overtime ......... = " << overtime_hours << endl;
cout<< "Overtime Pay Amount........ = " << overtime_extra << endl;
cout<< "Total Pay ................. = " << iIndividualSalary << endl;
cout<< endl;

cout<< "%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%" <<endl;
cout<< "%%%% EMPLOYEE SUMMARY DATA%%%%%%%%%%%%%%%%%%%%%%%" <<endl;
cout<< "%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%" <<endl;
cout<< "%%%% Total Employee Salaries ..... = " << iTotal_salaries <<endl;
cout<< "%%%% Total Employee Hours ........ = " << iTotal_hours <<endl;
cout<< "%%%% Total Overtime Hours......... = " << iTotal_OvertimeHours <<endl;
cout<< "%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%" << endl;
cout<< "%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%" << endl; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-11T11:07:51.910

如果您想以 C++ 方式进行，**并且**可以使用 C++11 标志进行编译，则可以使用标准库：

```
// Note: the value in cents!
const int basepay = 10000;

// Create a stream and imbue it with the local configuration.
std::stringstream ss;
ss.imbue(std::locale(""));

// The stream contains $100.00 (assuming a en_US locale config)
ss << std::showbase << std::put_money(basepay); 
```

[这里](http://ideone.com/ayY5CM)的例子。

这种方法有什么优点？

*   它使用本地配置，因此输出在任何机器上都是一致的，即使对于小数分隔符、千位分隔符、货币符号和小数精度（如果需要）也是如此。
*   所有的格式化工作都已经由 std 库完成了，要做的工作更少！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-10T21:18:05.580

使用[cout.precision](http://www.cplusplus.com/reference/iomanip/setprecision/)设置精度，并使用[fixed](http://www.cplusplus.com/reference/ios/fixed/)切换定点模式：

```
cout.precision(2);
cout<< "Base Pay .................. = " << fixed << basepay << endl; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-10T21:20:02.040

是的，这可以使用[流操作符](http://en.cppreference.com/w/cpp/io/manip)来实现。例如，将输出设置为固定浮点表示法，定义精度（在您的情况下为 2）并将填充字符定义为“0”：

```
#include <iostream>
#include <iomanip>

int main()
{
    double px = 133.20;
    std::cout << "Price: "
              << std::fixed << std::setprecision(2) << std::setfill('0')
              << px << std::endl;
} 
```

如果您更喜欢 C 风格的格式，这里是一个使用`printf()`来实现相同的示例：

```
#include <cstdio>

int main()
{
    double px = 133.20;
    std::printf("Price: %.02f\n", px);
} 
```

希望能帮助到你。祝你好运！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-10T21:19:41.867

您可以更改`cout`属性：

```
cout.setf(ios::fixed);
cout.precision(2);` 
```

现在`cout << 133.2;`将打印`133.20`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-10T21:19:59.327

看一下这个：

```
int main()
{
    double a = 133.2;

    cout << fixed << setprecision(2) << a << endl;
} 
```

输出

> 133.20

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-10T21:23:56.440

你需要看看[precision](http://en.cppreference.com/w/cpp/io/manip/fixed)和[fixed](http://en.cppreference.com/w/cpp/io/manip/fixed)。

```
#include <iostream>

int main()
{
    double f = 133.20;

    // default
    std::cout << f << std::endl;

    // precision and fixed-point specified
    std::cout.precision(2);
    std::cout << std::fixed << f << std::endl;

    return 0;
} 
```

# iphone - NSDateFormatter 在凌晨 2 点返回 nil

> ID：15327711
> 
> 赞同：9
> 
> 时间：2013-03-10T21:15:07.443
> 
> 标签：iphone, ios, nsdateformatter, dst

我正在尝试使用以下代码将字符串转换为 NSDate：

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setTimeZone:[NSTimeZone localTimeZone]];
[dateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss"];
NSDate *date= [dateFormatter dateFromString:@"2013-03-10T02:00:00"]; 
```

除了上面显示的 02:00:00，它在所有时间都可以正常工作，它返回 nil。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:24:55.177

这是因为 2013 年 3 月 10 日在美国实行**夏令时**

系统时间直接从凌晨 1:59 跳到凌晨 3:00..
你损失了 11 月 DST 生效时获得的一个小时

# java - 当我在 Timer 上调用 isRunning() 方法时，图像不会显示

> ID：15327713
> 
> 赞同：0
> 
> 时间：2013-03-10T21:15:15.597
> 
> 标签：java, swing, timer

这是我第一次来这个论坛。我的 java timer 有问题。我的程序在不同的时间显示图像。这是我的代码

```
//TIMER
    //creo timer per il tempo di visualizzazione di ogni singola immagine
    timerDisplay = new Timer(this.timeOfImage * MILLE, this);
    timerDisplay.setRepeats(false);
    timerDisplay.setActionCommand("blackScreen");

    //timer tra le immagini
    timerBetweenImages = new Timer(this.timeBetwImage * MILLE,this);
    timerBetweenImages.setRepeats(false);
    timerBetweenImages.setActionCommand("image");
    //timer prima della scelta
    timerBeforeChoice = new Timer(this.timeBeforeChoice * MILLE,this);
    timerBeforeChoice.setRepeats(false);
    timerBeforeChoice.setActionCommand("Choice");
    //tempo di scelta
    timerChoice = new Timer(this.timeOfChoice * MILLE,this);
    timerChoice.setRepeats(false);
    timerChoice.setActionCommand("End");

   public void actionPerformed(ActionEvent e) {
    // tempo tra immagini consecutive
    if (e.getActionCommand().equals("blackScreen")) {

        label.setIcon(null);
        if (index != numOfImages) {
        timerBetweenImages.start();

        } else {

            label.setIcon(null);
            timerBeforeChoice.start();
        }
    //to see the images
    } else if (index < numOfImages && e.getActionCommand().equals("image")){ 

        label.setIcon(image[index]);

        index++;
        //visualizza

        timerDisplay.start();

        state();

    } else if (e.getActionCommand().equals("Choice")) {

        contentPane.remove(label);
        //modifico il layout per inserire tanti pannelli quanto sono le immagini
        contentPane.setLayout(new GridLayout(1, this.numOfImages));
        repaint();
        validate();
        //creo tanti pannelli quante sono le immagini da visualizzare

           //creo pannello
           JPanel panel1 = new JPanel();
           panel1.setBackground(Color.BLACK);
           panel1.setLayout(new GridLayout(2,1));
           //aggiungo immagine e checkbox al pannello
           JLabel lblNewLabel_1 = new JLabel("");
           lblNewLabel_1.setBackground(Color.BLACK);
           lblNewLabel_1.setHorizontalAlignment(SwingConstants.CENTER);
           lblNewLabel_1.setIcon(image[i]);
           panel1.add(lblNewLabel_1);
           i++;
           chckbxNewCheckBox = new JCheckBox("Immagine " + 1);
           chckbxNewCheckBox.setBackground(Color.BLACK);
           chckbxNewCheckBox.setForeground(Color.WHITE);
           chckbxNewCheckBox.setHorizontalAlignment(SwingConstants.CENTER);
           chckbxNewCheckBox.setFont(new Font("Tahoma", Font.BOLD, 14));
           panel1.add(chckbxNewCheckBox);
          contentPane.add(panel1);  
        //creo pannello
           JPanel panel2 = new JPanel();
           panel2.setBackground(Color.BLACK);
           panel2.setLayout(new GridLayout(2,1));
           //aggiungo immagine e checkbox al pannello
           JLabel lblNewLabel_2 = new JLabel("");
           lblNewLabel_2.setBackground(Color.BLACK);
           lblNewLabel_2.setHorizontalAlignment(SwingConstants.CENTER);
           lblNewLabel_2.setIcon(image[i]);
           panel2.add(lblNewLabel_2);
           i++;
           chckbxNewCheckBox2 = new JCheckBox("Immagine " + 2);
           chckbxNewCheckBox2.setBackground(Color.BLACK);
           chckbxNewCheckBox2.setForeground(Color.WHITE);
           chckbxNewCheckBox2.setHorizontalAlignment(SwingConstants.CENTER);
           chckbxNewCheckBox2.setFont(new Font("Tahoma", Font.BOLD, 14));
           panel2.add(chckbxNewCheckBox2);
           //i++;
           //aggiungo pannello al contentPane
          contentPane.add(panel2);  
           repaint();
           validate();
            chckbxNewCheckBox2.addItemListener(this);
         chckbxNewCheckBox.addItemListener(this);
         state();

     } else if (e.getActionCommand().equals("End")) {

         contentPane.removeAll();
         repaint();
         validate();
         index = this.numOfImages;
         //System.out.println(index);
         this.numOfImages = this.numOfImages + number;
         //System.out.println(numOfImages);
         contentPane.setLayout(new GridLayout(1, 1));
         contentPane.add(label);
         if (numOfImages <= image.length) {
             timerDisplay.start();
         } else {
             //CHIUDI CONNESSIONE
             Edk.INSTANCE.EE_EmoStateFree(eState);
             Edk.INSTANCE.EE_EmoEngineEventFree(eEvent);
             Edk.INSTANCE.EE_EngineDisconnect();
             dispose();
         }

     } 
```

然后我有这个方法：

```
public void state(){
    while(timerDisplay.isRunning()){

    state = Edk.INSTANCE.EE_EngineGetNextEvent(eEvent);
    // New event needs to be handled

    if (state == EdkErrorCode.EDK_OK.ToInt()) {

        int eventType = Edk.INSTANCE.EE_EmoEngineEventGetType(eEvent);
        Edk.INSTANCE.EE_EmoEngineEventGetUserId(eEvent, userID);

        // Log the EmoState if it has been updated
        if (eventType == Edk.EE_Event_t.EE_EmoStateUpdated.ToInt()) {

            Edk.INSTANCE.EE_EmoEngineEventGetEmoState(eEvent, eState);
            //tempo
            float timestamp = EmoState.INSTANCE.ES_GetTimeFromStart(eState);
            //user ID
            int user =  userID.getValue();

            //valori emotional
            float shortExcitement = EmoState.INSTANCE.ES_AffectivGetExcitementShortTermScore(eState);
            float longExcitement = EmoState.INSTANCE.ES_AffectivGetExcitementLongTermScore(eState);
            float egagement = EmoState.INSTANCE.ES_AffectivGetEngagementBoredomScore(eState);
            float frustation = EmoState.INSTANCE.ES_AffectivGetFrustrationScore(eState);
            float meditation = EmoState.INSTANCE.ES_AffectivGetMeditationScore(eState);
            if(option == 1){
                output.println(timestamp + ";" + user + ";" + shortExcitement + ";"  +
                         longExcitement + ";" + egagement + ";" + frustation + ";" + meditation + ";");
            } else if (option == 2){
                output.println(timestamp + ";" + user + ";" + shortExcitement + ";"  +
                         longExcitement + ";" + egagement + ";" + frustation + ";" + meditation + ";");
            }

        }

    }
    else if (state != EdkErrorCode.EDK_NO_EVENT.ToInt()) {
        output.println("Internal error in Emotiv Engine!");
        //messaggio di errore
        String message2 = "Internal error in Emotiv Engine!";
           JOptionPane.showMessageDialog(new JFrame(), message2, "Dialog",
           JOptionPane.ERROR_MESSAGE);
    }
    }
} 
```

问题出在我的`state()`方法中，当我调用`timerDisplay.isRunning()`程序时无法显示图像。事实上，我想`state()`一直跑到`timerDisplay`完成。对不起，我的英语不好... ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T22:14:08.253

您的`state`方法似乎阻止了事件调度线程。这可以防止处理任何事件（包括绘制和计时器事件），使其看起来好像您的应用程序已停止。

这是因为 Swing 是单线程环境。这意味着与 UI 的所有交互都必须在事件调度线程的上下文中执行。这也意味着您应该在另一个线程上执行所有阻塞或耗时的处理。

看看[`SwingWorker`](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)。这将允许您在后台线程中处理“状态”事件，而且还具有易于使用的方法来重新同步 UI/EDT 的任何更新。

还可以阅读[Swing 中的并发以](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)获取更多信息

# c# - 算法进度回调

> ID：15327717
> 
> 赞同：3
> 
> 时间：2013-03-10T21:15:38.037
> 
> 标签：c#, wpf, callback

我必须通过大量迭代、矩阵运算等来实现非常复杂的算法。傅里叶级数逼近有两个主要循环。我想知道实现进度回调的最佳方法是什么。我将来想在 WPF 应用程序中使用这个算法，我想实现进度条。如何准备算法以使将来的进度条实现变得容易？

我正在考虑这样的事情：

```
static void Main(string[] args)
{
    Console.Write("Progres...  ");
    Alg((i) => UpdateProgress(i));            
}

public static void UpdateProgress(int iteration)
{
    string anim = @"|/-\-";            
    Console.SetCursorPosition(Console.CursorLeft - 1, Console.CursorTop);
    Console.Write(anim[iteration%5]);                        
}

public static void Alg(Action<int> progressCallback)
{
    for (int i = 0; i < 100; i++)
    {
        Thread.Sleep(50);
        progressCallback(i);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:39:23.960

如果您更喜欢使用`TPL`，为什么不坚持使用呢？您可以使用“IProgress” [http://msdn.microsoft.com/pl-pl/library/hh193692.aspx](http://msdn.microsoft.com/pl-pl/library/hh193692.aspx)。

```
class Program
{
    static void Main(string[] args)
    {
        Console.Write("Progres...  ");

        Progress<int> progress = new Progress<int>();

        var task = Alg(progress);            

        progress.ProgressChanged += (s, i) => { UpdateProgress(i); };

        task.Start();
        task.Wait();
    }

    public static void UpdateProgress(int iteration)
    {
        string anim = @"|/-\-";
        Console.SetCursorPosition(Console.CursorLeft - 1, Console.CursorTop);
        Console.Write(anim[iteration % anim.Count()]);
    }

    public static Task Alg(IProgress<int> progress)
    {
        Task t = new Task
        (
            () =>
            {
                for (int i = 0; i < 100; i++)
                {
                    Thread.Sleep(50);
                    ((IProgress<int>)progress).Report(i);
                }
            }
        );
        return t;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T21:37:37.380

您需要实现接口[INotifyPropertChanged](http://msdn.microsoft.com/en-us/library/windows/apps/BR209899)的​​对象。此对象表示进度状态的属性将绑定到可视化该进度状态 (Progressbar) 的 XAML 元素。在您的算法中，您只需将此属性设置为适当的值。您的算法可以将此对象作为参数。或者您可以在提供给您算法的委托中设置此属性。如果您使用多个线程，WPF 会负责将属性更改传递给 UI 线程。

# amazon-web-services - 弹性IP更改IP不关联实例

> ID：15327719
> 
> 赞同：0
> 
> 时间：2013-03-10T21:16:01.377
> 
> 标签：amazon-web-services

我创建了一个弹性 IP。列出的 IP 地址似乎是稳定的。它与一个实例相关联。但是，我得到了这种奇怪的行为：

*   为该 IP 列出的公共 DNS 包含与文字 IP 地址不同的地址。
*   公共 DNS 不*解析*为弹性 IP；它解析为 DNS 名称所暗示的 IP。
*   停止和启动实例会更改 IP 地址。

我尝试创建一个新的弹性 IP 地址和一个新实例并将它们关联起来，但我遇到了同样的错误。这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:29:13.173

是的，公共弹性 IP 地址是稳定的（当然，这就是它们存在的原因）。

您是指 DNS 名称将解析为不同的 IP 地址，具体取决于您是在 AWS 内部还是外部解析？

如果是这样，这是一个功能而不是“错误”。

如果您从 AWS 外部查找主机名，您将获得*公共*IP。如果您从 EC2 实例的命令行中查找相同的名称，您将获得*私有*IP（通常为 10.0.0.0 地址）。

这意味着您可以通过单个名称引用实例，但内部流量会自动通过本地网络路由，而不是通过（计费）公共接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T21:58:14.187

我假设您正在查看 AWS 控制台，而不是直接使用 API 的程序的输出。

您在控制台中看到的“公共 DNS”是实例的公共 DNS，而不是弹性 IP 地址。如果实例与 ElasticIP 关联，则其公共 DNS 应在其中包含 ElasticIP 并解析为 ElasticIP。由于不是，我怀疑 AWS 控制台中存在错误。我注意到当 ElasticIP 地址关联或取消关联时，它显示地址有很多滞后。要确认这一点，您可以尝试完全清除浏览器历史记录和 cookie 并重新连接到控制台，以查看现在显示是否正确。或者您可以使用浏览器的隐身或隐私浏览模式。

如果您创建明显的公共 DNS 以匹配您的 ElasticIP 地址，我敢打赌它会正确解析。

# java - 带有重定向的 URL 编码（变音符号）（302 临时移动）

> ID：15327721
> 
> 赞同：2
> 
> 时间：2013-03-10T21:16:05.103
> 
> 标签：java, http, servlets, redirect

我正在开发一个将唯一标识符作为输入的 servlet，如果可以在另一台服务器上找到文档，则返回文档或发送 302 Moved Temporarily 重定向。另一台服务器是一个带有 apache 的 linux 机器，并通过 webdav 公开文件。我无法控制这台服务器。

只要 URL 中没有特殊字符（德语变音符号），重定向就可以正常工作。

有问题的资源如下所示`http://webfolder.company.com/projekt/übersicht.pdf` 当我将此 URL 复制并粘贴到我的浏览器 (Chrome) 中时，我可以毫无问题地打开文件（变音符号保留在 URL 中）。

但是，当我从服务器端发送重定向时，URL 会被编码`http://webfolder.company.com/projekt/%C3%BCbersicht.pdf`，并且由于某些我不明白的原因，这会导致 404 - Not Found。

我的 servlet 实现从数据库（MySQL、UTF-8）获取 URL 并使用 HttpServletResponse.sendRedirect 方法。

```
response.sendRedirect(remoteRessource); 
```

（remoteRessource 是一个字符串）。使用`curl`我可以看到已设置 Location 标头，但 Chrome（和 Firefox）将 URL 编码为`http://webfolder.company.com/projekt/%C3%BCbersicht.pdf`，这会导致 404 错误。

```
< HTTP/1.1 302 Moved Temporarily
< Date: Wed, 06 Mar 2013 20:50:16 GMT
< Server: Apache-Coyote/1.1
< Location: http://webfolder.company.com/projekt/übersicht.pdf
< Content-Type: text/html;charset=UTF-8
< Content-Length: 0
< Set-Cookie: JSESSIONID=FA670C0DDA55593368A3285F54894153; Path=/; HttpOnly
< Vary: Accept-Encoding 
```

将重定向 URL 按原样提供给未以任何方式编码的浏览器的正确方法是什么？谢谢。

## 使固定

感谢 Julian Reschke 的回答，我发现了两台服务器使用的不同编码。我现在让 Java/URI 类处理编码并且一切正常。

```
URI uri = new URI(schema, host, path, null);
String location = uri.toASCIIString();
response.sendRedirect(location); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T08:30:42.880

一个可能的原因是运行 Apache+WebDAV 的服务器需要不同于 UTF.8 的编码。ISO-8859-1 可能吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T21:36:31.870

您必须使用 i18n 包进行字符国际化，而不是发送本地化字符 [在这种情况下为德语变音符号]

看看[http://docs.oracle.com/javase/1.5.0/docs/api/java/net/URLEncoder.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/URLEncoder.html) 这就是你的情况

并浏览[此处](http://www.w3.org/International/URLUTF8Encoder.java)进行编码和[此处](http://www.w3.org/International/unescape.java)进行解码

# java - Seam 和 Mock 有什么区别？

> ID：15327724
> 
> 赞同：15
> 
> 时间：2013-03-10T21:16:17.410
> 
> 标签：java, unit-testing, tdd, code-coverage, legacy

自从我使用 Java 遗留代码以来已经有几个月了，这是我正在处理的一些事情：

*   0% 的测试覆盖率。
*   有时我什至看到一些超过 300 行代码的巨大函数。
*   很多私有方法，有时还有静态方法。
*   高度紧耦合的代码。

一开始我很困惑，我发现在 legacy 中很难使用 TDD。在做了几周的 katas 并练习了我的单元测试和模拟技能之后，我的恐惧减少了，我感觉更有信心了。最近我发现了一本书，叫做：[有效地处理遗留](http://www.amazon.co.uk/Working-Effectively-Legacy-Robert-Martin/dp/0131177052/ref=sr_1_sc_1?ie=UTF8&qid=1362948336&sr=8-1-spell)问题，我没有读它，我只是看了一下目录，我发现了一些对我来说很新的东西，The Seams。显然，这在处理遗留问题时非常重要。

我认为这个 Seams 可以帮助我打破依赖关系并使我的代码可测试，这样我就可以增加代码覆盖率并使我的单元测试更加精确。

但我有很多疑问：

*   有人可以解释一下接缝和模拟之间的区别吗？
*   在测试之前，Seams 在不接触生产代码方面是否违反了 TDD 规则？
*   你能给我看一些比较Seam和Mock的简单例子吗？

下面我想粘贴一个我今天做的例子，我试图打破依赖关系，目的是使代码可测试并最终增加测试覆盖率。如果您看到一些错误，如果您能发表评论，我将不胜感激？

这是遗留代码一开始的样子：

```
public class ABitOfLegacy
{
    private String sampleTitle;
    String output; 

    public void doSomeProcessing(HttpServletRequest request) {
    String [] values = request.getParameterValues(sampleTitle);
        if (values != null && values.length > 0)
        {
            output = sampleTitle + new Date().toString() + values[0];
        }

    }   
} 
```

如果我只是添加一个调用该方法并断言该变量输出的单元测试，在调用后具有一定的值，那么我会犯错误，因为我不是单元测试，我会做集成测试。所以我需要做的是摆脱我在参数中的依赖。为此，我将参数替换为接口：

```
public class ABitOfLegacy
{
    private String sampleTitle;
    String output; 

    public void doSomeProcessing(ParameterSource request) {
    String [] values = request.getParameters(sampleTitle);
        if (values != null && values.length > 0)
        {
            output = sampleTitle + new Date().toString() + values[0];
        }
    }

} 
```

这是界面的样子：

```
public interface ParameterSource {
    String[] getParameters(String name);
} 
```

接下来我要做的是创建我自己的接口实现，但我将 HttpServletRequest 作为全局变量包含在内，并使用 HttpServletRequest 的方法实现接口的方法：

```
public class HttpServletRequestParameterSource implements ParameterSource {

    private HttpServletRequest request;

    public HttpServletRequestParameterSource(HttpServletRequest request) {
        this.request = request;
    }

    public String[] getParameters(String name) {
        return request.getParameterValues(name);
    }

} 
```

到目前为止，我认为对生产代码的所有修改都是安全的。现在我在我的测试包中创建 Seam。如果我理解得很好，现在我可以安全地更改 Seam 的行为。我就是这样做的：

```
public class FakeParameterSource implements ParameterSource {

    public String[] values = {"ParamA","ParamB","ParamC"};

    public String[] getParameters(String name) {
        return values;
    }
} 
```

最后一步，将获得 Seam 的支持，以测试该方法的原始行为。

```
import org.junit.Before;
import org.junit.Test;
import static org.junit.Assert.*;
import static org.mockito.Mockito.*;
import code.ABitOfLegacyRefactored;
import static org.hamcrest.Matchers.*;

public class ABitOfLegacySpecification {

    private ABitOfLegacy aBitOfLegacy;
    private String EMPTY = null;

    @Before
    public void initialize() {
        aBitOfLegacy = new ABitOfLegacy();
    }

    @Test
    public void
    the_output_gets_populated_when_the_request_is_not_empty
    () {
        FakeParameterSource fakeParameterSource = new FakeParameterSource();
        aBitOfLegacy.doSomeProcessing(fakeParameterSource);
        assertThat(aBitOfLegacy.output,not(EMPTY));
    }

    @Test(expected=NullPointerException.class)
    public void
    should_throw_an_exception_if_the_request_is_null
    () {
        aBitOfLegacy.doSomeProcessing(null);
    }   
} 
```

这将为我提供 100% 的测试覆盖率。我很欣赏你的想法：

*   我是否正确打破了依赖关系？
*   单元测试是否遗漏了什么？
*   有什么可以做得更好？
*   这个例子是否足以帮助我理解 Seam 和 Mock 之间的区别？
*   如果我不使用 Seam，模拟如何帮助我？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-11T13:59:29.820

接缝是代码中可以插入行为修改的地方。您在设置依赖项注入时创建了一个接缝。

利用接缝的一种方法是插入某种假货。假货可以像您的示例中那样手动滚动，也可以使用 Mockito 之类的工具创建。

因此，mock 是一种假货，假货通常通过利用 Seam 来使用。

至于你的测试和你打破依赖的方式，这几乎就是我会做的。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-11T10:23:05.573

**接缝**

[接缝](http://www.informit.com/articles/article.aspx?p=359417&seqNum=3)是允许您在不修改代码的情况下修改行为的地方。

在您的示例中，以下是对象接缝的示例（如果我没记错的话）。它允许您传入不同的对象而无需更改代码。因此它是一种接缝。

```
public void doSomeProcessing(ParameterSource request) {..} 
```

通过使参数成为抽象类型（而不是具体类），您引入了一个接缝。现在，接缝允许您在不编辑其代码的情况下修改方法的行为——即在调用的地方，我可以传入一个不同的对象并使该方法执行其他操作。

**模拟**

现在，您可以使用 Mock 框架来执行类似这样的操作，而不是创建自定义的 fake（创建接口的子类型）

Mocks 还支持断言是否调用了特定方法、参数匹配和其他要被测试使用的漂亮功能。需要维护的测试代码更少。模拟主要用于断言正在对依赖项进行特定调用。在您的示例中，您似乎需要一个存根，您只想返回一个固定值。

请原谅我生锈的 JMock..

```
 @Test
    public void
    the_output_does_not_get_populated_when_the_request_is_empty
    () {
        Mockery context = new Mockery();
        final ParameterSource mockSource = context.mock(ParameterSource.class)

context.checking(new Expectations(){{
    oneOf(mockSource).getParameters(); 
            will(returnValue(new string[]{"ParamA","ParamB","ParamC"} );
}});
        aBitOfLegacy.populate(mockSource);
        assertThat(aBitOfLegacy.output,not(EMPTY));
    } 
```

在.Net

```
var mockSource = new Mock<ParameterSource>();
mockSource.Setup(src => src.GetParameters())
          .Returns(new []{"ParamA","ParamB","ParamC"}); 
```

# php - 如何根据国家/地区更改日期格式

> ID：15327726
> 
> 赞同：2
> 
> 时间：2013-03-10T21:16:20.993
> 
> 标签：php, javascript, jquery, jquery-plugins

我需要根据用户国家/地区更改 DD/MM/YYYY 标签的顺序。

[http://en.wikipedia.org/wiki/Date_format_by_country](http://en.wikipedia.org/wiki/Date_format_by_country)

我想这样做的方法是创建一个国家/日期格式表，并根据国家选择使用 jquery 移动字段。

有没有一种现有的方法可以在 php 甚至 js 或更好的方法中完成？我也在寻找一个国家/日期格式表，而不是手动插入所有值，但我找不到任何东西......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T21:20:08.873

对于 PHP，这应该是一个好的开始： http: [//php.net/manual/en/function.setlocale.php](http://php.net/manual/en/function.setlocale.php)

对于 JavaScript：[以用户的语言环境格式和时间偏移显示日期/时间](https://stackoverflow.com/questions/85116/how-do-i-display-a-date-time-in-the-users-locale-format-and-time-offset)

总而言之，大多数现代语言都很好地内置了语言环境支持。您不必自己实现此功能。这将是令人厌烦和错误的（本地化很难）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-01T17:42:28.433

如果您使用 PHP，那么 IntlDateFormatter() 可以帮助您：

```
$d = new DateTime();

$fmt = new IntlDateFormatter('en-US', IntlDateFormatter::SHORT, IntlDateFormatter::NONE);
echo "US: ".$fmt->format($d)."<br/>";

$fmt = new IntlDateFormatter('en-GB', IntlDateFormatter::SHORT, IntlDateFormatter::NONE);
echo "GB: ".$fmt->format($d)."<br/>";

$fmt = new IntlDateFormatter('en-AU', IntlDateFormatter::SHORT, IntlDateFormatter::NONE);
echo "AU: ".$fmt->format($d)."<br/>";

$fmt = new IntlDateFormatter('de-DE', IntlDateFormatter::SHORT, IntlDateFormatter::NONE);
echo "DE: ".$fmt->format($d)."<br/>"; 
```

输出：

```
US: 2/1/18
GB: 01/02/2018
AU: 1/2/18
DE: 01.02.18 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T21:20:34.290

如果要在客户端更改日期的格式，可以尝试 JavaScript 中 Date 对象的[toLocaleString](http://www.w3schools.com/jsref/jsref_tolocalestring.asp)函数。toLocaleString 将根据客户端操作系统对其位置的设置更改格式。您也不需要具有国家和日期格式的表格。

这可以在不需要 jQuery 或任何其他插件的情况下完成。

# java - 执行插入语句后，如何获取带有 id 值的语句？

> ID：15327731
> 
> 赞同：2
> 
> 时间：2013-03-10T21:16:35.220
> 
> 标签：java, sql, jdbc

所以我有一个 JDBC 调用来将数据插入数据库。

我希望能够将语句作为一个整体来查看（所以，你知道，“插入 some_table (colA, colB) 值 (1,2)”）。

但我*也*希望看到该声明的*真实面目*——也就是说，

```
insert into some_table (id, colA, colB) values (8,1,2) 
```

其中 id 是主键（或任何其他 auto_increment 字段），其中 sql thingy 将确定自动递增的值！

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T21:24:06.853

声明不变。如果您`ID`的表中有一个自动递增键 ( )，它永远不会出现在语句中，而是在执行语句时由数据库引擎添加。

所以不可能看到带有 ID 列的语句，但是根据您的 DBMS，有不同的技术可以确定自动生成的值是什么。

IE。在 SQL Server 中，您可以使用[SCOPE_IDENTITY()](http://msdn.microsoft.com/en-us/library/ms190315.aspx)。在 Oracle 上，您可以使用[RETURNING INTO](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/returninginto_clause.htm)。对于 Postgres，您可以查看[Can I use return value of INSERT...RETURNING in another INSERT?](https://stackoverflow.com/questions/6560447/can-i-use-return-value-of-insert-returning-in-in-another-insert)

# mysql - 有没有办法在重复项发生时创建密钥并删除它们？

> ID：15327734
> 
> 赞同：0
> 
> 时间：2013-03-10T21:16:44.287
> 
> 标签：mysql, mysqldump

我想在站点和 ASIN 上创建一个唯一的组合键，并在创建时删除重复项

到目前为止，我有 ALTER TABLE Products ADD UNIQUE (Site,ASIN) 我认为需要有一个“On Duplicate”，但我无法在[http://dev.mysql.com/doc/refman/5.0中找到正确的操作/en/alter-table.html](http://dev.mysql.com/doc/refman/5.0/en/alter-table.html) .. 有人有建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T05:37:14.960

我不认为`ON DUPLICATE`添加`UNIQUE KEY`. 因此，您需要找到解决方法。这是一个建议：

1-识别重复行并将值存储在临时表中。

```
CREATE TEMPORARY TABLE Duplicates 
  (SELECT
     Site, ASIN
   FROM
     Products
   GROUP BY
     Site, ASIN
   HAVING
     COUNT(*) > 1
   ); 
```

2-将临时表与原始表连接并删除不再需要的重复行。（从评论中我认为您想删除带有 SKU IS NULL 的评论）

```
DELETE p 
FROM 
  Products AS p 
INNER JOIN 
  Duplicates AS d 
ON 
  d.Site = p.Site and d.ASIN = p.ASIN
WHERE
  p.SKU IS NULL; 
```

3-创建您的唯一密钥：

```
ALTER TABLE Products ADD UNIQUE KEY (Site, ASIN); 
```

这是我创建的[小提琴。](http://sqlfiddle.com/#!2/8bb7c/1/0)

# node.js - 如何防止nodejs聊天应用程序中的同一用户多次登录？

> ID：15327735
> 
> 赞同：0
> 
> 时间：2013-03-10T21:16:46.237
> 
> 标签：node.js, express, socket.io

我正在使用`Socket.io`并`Express`制作一个聊天应用程序。

聊天是匿名的，我不想在任何数据库中保存任何内容。我可以考虑检查用户的 IP 地址并防止从同一 IP 地址再次登录，但我认为这不是一个好主意，因为人们使用共享 IP 地址在线。另一件事是会话 ID，但即使用户从浏览器中的不同选项卡登录，它也会发生变化。有没有不使用任何数据库的简单方法来做到这一点？最好不安装任何其他包/库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T21:29:52.640

express.session 中间件使用基于 cookie 的会话，默认情况下只存储在内存中而不是数据库中。如果用户打开新标签，基于 cookie 的会话不会改变。[这篇文章](http://www.danielbaulig.de/socket-ioexpress/)在 SO 的其他地方被提到，作为使用 socket.io 的快速会话的一个很好的参考。通常，您只需在 socket.io ( `sio.set('authorization', authCallback)`) 中授权时检查会话，然后您的应用程序可以使用户连接到正确的房间。

**更新：（**更具体地说明如何使用 cookie 阻止用户）

```
// Var to save if the user is connected or not
var connectedUsers = [];

sio.authorization(function(data, next){
  var cookie = data.headers.cookie && data.headers.cookie.match(/auth=([^;]+)/);
  cookie = cookie && cookie[1] || null;

  if (cookie && connectedUsers.indexOf(cookie)){
    next(null, false);
  }
  else {
    connectedUsers.push(cookie);
    next(null, cookie);
  }
});

// Somewhere else
socket.on('disconnect', function (data) {
  var cookie = data.headers.cookie && data.headers.cookie.match(/auth=([^;]+)/);
  cookie = cookie && cookie[1] || null;

  if(cookie) {
    connectedUsers.splice(connectedUsers.indexOf(cookie), 1);
  }
}); 
```

这是获取 cookie 值的一种非常基本的方法，但它对我有用。请注意，我没有时间尝试此解决方案，但原理应该有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T22:58:20.557

这就是我所做的和为我工作的。这与安德烈亚斯的回答没有太大区别：

```
var MemoryStore = express.session.MemoryStore;
var sessionStore = new MemoryStore();
app.configure(function() {
    //app.use(express.logger());
    app.use(express.cookieParser());
    app.use(express.bodyParser());
    app.use(express.methodOverride());
    app.use(express.session({ 
            store: sessionStore, 
            secret: 'someSecret',
            key: 'cookie.sid', maxAge: null }));
            });

var sessionID;
var sessionArray = new Array();
var sessionIDs = new Array(); 
```

在我的“登录”功能中，我有：

```
sessionArray = socket.handshake.headers.cookie.split(" ");
sessionID = sessionArray[0].split("express.sid=").pop();

if(sessionIDs.indexOf(sessionID) > -1) {
   io.sockets.socket(socket.id).emit('preventlogin', true);
}
else {
   sessionIDs.push(sessionID);
   // and do the rest
} 
```

在“断开连接”时，我会：

```
var ind = sessionIDs.indexOf(sessionID);
sessionIDs.splice(ind, 1); 
```

# spring - Spring Data for Redis：处理值时，是否仅适用于 StringRedisTemplate？

> ID：15327744
> 
> 赞同：0
> 
> 时间：2013-03-10T21:18:33.837
> 
> 标签：spring, redis, spring-data, spring-data-redis

在使用 Spring Data for Redis 处理字符串时，我注意到以下行为：

鉴于以下代码：

```
template.opsForValue().set("person", "value"); 
```

它仅在我使用 StringRedisTemplate 实例时有效，而不是在我使用 RedisTemplate 实例时有效。它不应该与 RedisTemplate 一起使用，因为它聚合了所有 Redis 数据类型的所有操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:38:57.340

StringRedisTemplate 只是 RedisTemplate 的一个特化，所以如果你愿意，你应该可以直接使用 RedisTemplate，只要你像在 StringRedisTemplate 的构造函数中那样设置所有的键/值序列化器。

也许您可以提供有关您的配置以及遇到什么错误的更多信息？另外，为什么 StringRedisTemplate 不是您的用例的理想选择？

# php - 好的 PHP Rest Api 库

> ID：15327745
> 
> 赞同：16
> 
> 时间：2013-03-10T21:18:42.167
> 
> 标签：php, rest, open-source

我正在开发一个跨平台系统，我需要制作一个休息 API 来将它们联系在一起。我在 PHP 方面有很长的经验，我想将它用于这项服务。

我可以 100% 手动开发 API，但我希望有一些很棒的库可以简化我的开发。

有没有人有这样的图书馆经验？你有什么可以推荐的吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-05-16T22:02:36.720

我得到了`Popular question`这个问题的徽章，所以我觉得是时候详细说明我是如何完成我的 REST 解决方案的了。

对于这个 REST Api，我确实查看了 Laravel、Sympfony2 和 Codeigniter。他们都有一些我喜欢的元素和一些我不喜欢的元素。我主要关心的是如何进行身份验证，因为我有一个相当复杂的算法，我的用户可以使用谷歌或 Facebook 提供的应用程序的 access_token 或 access_tokens 登录。我也更喜欢完全控制我的框架，并且上面提到的框架有一些我觉得不必要且难以解决的元素。因此，我决定制作自己的 REST 解决方案。这并不像人们想象的那么难，它可以通过多种方式完成。我这样做的方式需要一些关于 OOP 编程的知识。

好的，所以开始创建一个名为 REST 的基类。这个类负责处理每个呼叫的所有共同点。像身份验证，解析请求的方法路径，检查`access_token`等。

此类中的核心内容之一是请求的路径以及如何将其转换为方法。我在 Laravel 的启发下做了这个。我有一个带有`key`=>的数组，`value`其中键是它应该匹配的 url，值是要调用的实际方法。我还包括了 Lavavel 在 URL 中解析变量的方式，如下所示：

```
'/user/(:id)' => 'user_id', 
```

这将匹配任何 /user/[number]。它还会检查这是什么类型的请求，所以如果这是一个简单的 get 方法，它会尝试调用`get_user_id`. 在调用该方法时，任何被解析的东西`(:id)`都将用作参数（因此它实际上是在调用`get_user_id($id)`）。

身份验证后，实际的方法调用被评估。我不想要`get_user_id`REST 类本身中的所有方法（如 ），所以我将它们分解为扩展 REST 类的不同控制器。这是通过查看请求的 url 来完成的。如果是`/user/(:id)`，脚本将检查是否有一个名为`userController.php`. 如果存在，检查我们要调用的方法是否存在。如果是，请检查参数的数量是否与我们所拥有的相匹配。如果一切正常，则执行该方法，否则返回错误消息。在制作这样的 API 时，结构和错误消息非常重要。

在不同的控制器中，我调用 REST 类的构造函数来获取身份验证、解析 url 等问题。这里棘手的部分是我不想这样做：

```
$controller = new MyController();
$controller->printResponse(); 
```

在每个控制器的底部。所以我做了一个小技巧和一个名为的脚本`run.php`，它为每个控制器类动态地执行此操作。在我包含之前，我`run.php`通过简单地保存控制器的路径`$path = explode('/',__FILE__);`。这在运行脚本中使用。运行脚本如下所示：

```
// Splitting the file-name, removing the extension
$name = explode('.',$path[count($path)-1]);

// Uppercasing the first letter to be nice and OOP-ish
$classToCall = ucfirst($name[0]);

// Creating a new instance
$controller = new $classToCall();

// Logging
$controller->doLog();

// Printing the final response
$controller->printResponse(); 
```

我发现这是我想要构建 API 的完美解决方案。我可以通过在将 url 解析为方法的数组中提供新方法来轻松添加新方法，并且我可以在拆分良好的控制器中添加新方法以实现最大的清洁度。

有些人可能会认为这工作量太大，但实际上我只花了几个小时就可以启动并运行它。我也称这是高度动态的，因为我可以添加新的控制器，如果它们是有效的 url 模式，系统就会识别它们。

* * *

**一些友好的建议。**

如果您决定采用类似于此解决方案的方法，这些可能是一些不错的提示。在每个控制器中，执行以下操作：

```
public function __construct() {
    // Loading the class-name, setting it in the REST-class, so we can check if it holds the method being called
    $this->className = get_class($this);

    // Calling RESTs constructor
    parent::__construct();
} 
```

我们将需要存储我们当前正在使用的类。这将是`UserController`或类似的东西。

在 REST 类中，我可以使用这个变量来检查被调用的实际方法是否存在于这个控制器中。我是这样做的：

```
// Checking if the method exists
if (method_exists($this->className,$method_name)) {
    // Check to see if we have the required number of arguments represented
    $ReflectionClass = new ReflectionClass($this->className);

    if ($ReflectionClass->getMethod($method_name)->getNumberOfParameters() == count($this->methodUrl['args'])) {
        $this->response['response'] = call_user_func_array(array($this, $method_name), $this->methodUrl['args']); 
```

我希望这能让你们都前进。

*快乐的编码*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T10:41:31.470

三个月前我也有同样的问题。我花了很多时间研究要使用的最佳 PHP 框架。最后我选择了[Laravel](http://laravel.com)。

开箱即用，它带有 RESTful 路由和控制器，以及易于使用的身份验证。我在大约一天内启动并运行了一个简单的 REST API

[http://laravel.com/docs/routing#the-basics](http://laravel.com/docs/routing#the-basics)

[http://laravel.com/docs/controllers#restful-controllers](http://laravel.com/docs/controllers#restful-controllers)

它还带有一个很棒的 ORM，这使得设置资源变得超级容易

[http://laravel.com/docs/database/eloquent](http://laravel.com/docs/database/eloquent)

我正在使用 3.2 版，它的工作原理很吸引人并且很稳定。版本 4 仍处于测试阶段，但确实具有更多面向 REST 的功能（我认为其中之一是它可以更轻松地从控制器中创建资源）

很棒的教程在这里[http://net.tutsplus.com/tutorials/php/laravel-4-a-start-at-a-restful-api/](http://net.tutsplus.com/tutorials/php/laravel-4-a-start-at-a-restful-api/)

# c# - 在 Lambda 表达式中检查 Null 的干净方法

> ID：15327752
> 
> 赞同：8
> 
> 时间：2013-03-10T21:19:14.953
> 
> 标签：c#, lambda

我已经看到了很多关于此的问题，但无法找到一个干净的解决方案：

我有以下 lambda 表达式：

```
var result = Store.FirstOrDefault(x.Products.Coupon[0] == 100); 
```

我想检查 Coupon 集合的 null 以检查它是否不为 null，然后将第一个优惠券与值 100 进行比较。在 lambda 中检查 Coupon 的 NULL 的干净方法是什么？我不想使用扩展方法来检查 null。我想做内联检查。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-10T21:22:03.263

```
var result = Store.FirstOrDefault(x => x.Products.Coupon != null && x.Products.Coupon.Any() && x.Products.Coupon[0] == 100); 
```

# ruby - 以月为单位的日期差异

> ID：15327755
> 
> 赞同：0
> 
> 时间：2013-03-10T21:19:30.187
> 
> 标签：ruby

我需要计算数组中每对连续日期的月日期差，以便按日期的频率对其进行分类，例如每月、每季度、每年。

这涉及将字符串数组解析为日期数组

```
array_of_dates = Array.new
array_of_strings.each do |str|
  array_of_dates << Date.strpdate str, "%Y%m%d"
end 
```

并计算每对连续日期的日期差

```
diffs = Array.new  
array.of.dates.each_cons(2) do |a,b|
  diffs << b - a
end 
```

这将返回一个比率数组，例如：

```
=> [(31/1), (29/1), (31/1), (30/1), (31/1)] 
```

然而，月份的长度并不相同。有没有办法在几个月内恢复这种差异？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T21:45:45.677

获取两个日期之间月数的最简单方法是执行以下操作：

```
 months_between = finish.month - start.month + 12 * (finish.year - start.year) 
```

此外，使用循环创建数组`Array.new`并用循环填充它们并不是非常惯用的 Ruby。通常，您只需使用以下命令直接从源数组创建目标数组`map`：

```
array_of_dates = array_of_strings.map { |s| Date.strptime s, "%Y%m%d" }

diffs = array_of_dates.each_cons(2).map { 
  |a, b| b.month - a.month + 12 * (b.year - a.year) 
} 
```

如果您不需要日期数组来做其他事情，您甚至可以一步完成所有操作：

```
diffs = array_of_strings.map {|s| Date.strptime s, "%Y%m%d" }.each_cons(2).map {
  |a, b|
  b.month - a.month + 12 * (b.year - a.year)
} 
```

# javascript - Node.js在其他模块中使用require时获取未定义的属性

> ID：15327757
> 
> 赞同：1
> 
> 时间：2013-03-10T21:19:40.127
> 
> 标签：javascript, node.js, socket.io

这就是我的 app.js 的样子

```
var app = require('http').createServer(handler),
    io = require('socket.io').listen(app),
    static = require('node-static'); // for serving files
var game = require('./game.js').createGame();

// This will make all the files in the current folder
// accessible from the web
var fileServer = new static.Server('./');

// This is the port for our web server.
// you will need to go to http://localhost:8080 to see it
app.listen(8080);

// Listen for incoming connections from clients
io.sockets.on('connection', function (socket) {
    handle Events ... 
});

exports.io = io;
exports.game = game; 
```

当我尝试访问创建的 socket.io 列表器或游戏实例时，我收到错误消息说它未定义。这就是我试图在技巧中访问它的方式，js

```
var game = require('./app.js').game;
var socketio = require('./app.js').io;
var PlayerMove = require('./playerMove.js'); 
```

这可能是因为 trick.js 实际上是在 app.js 之前执行的（我放置了调试点并在那里得到了确认）。我该如何避免这种情况？有没有更好的方法在 node.js 中公开对象实例，我可能应该使用一些模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:42:30.593

声明变量不会导出它。如果你需要为你的模块导出一些东西，你应该使用exports.myVariable = myValue。

第一次需要您的 app.js 文件将运行它。因此，一旦您退出 require() 调用，您导出的所有内容都将可用

# php - 删除 PHP 代码中最后输入的逗号

> ID：15327761
> 
> 赞同：0
> 
> 时间：2013-03-10T21:19:57.237
> 
> 标签：php, internet-explorer-8, cross-browser, highcharts

由于我在使用 IE 8 时遇到的一个问题，它没有使用 Highcharts 渲染一些图表我正在使用下面的代码从数据库中提取我的数据的问题

**PHP代码返回以下**

```
series: [{
            type: 'pie',

            data: [

            ['FirstRowItem',21],['SecondRowItem',10],['ThirdRowItem',6],                ]
        }] 
```

**和数据库请求如下**

```
series: [{
            type: 'pie',

            data: [ <?php

while($row = mysql_fetch_array($getitemscount)){
echo "['";
echo $row['items'];
echo "',";
echo $row['item countt'];
echo "],";`}

?>
            ]
        }] 
```

它在 IE9、chrome、Firefox 上运行良好。但在 IE8 上**，由于****['ThirdRowItem',6]**的结尾，它不起作用，因为它说未定义的变量。

我在想是否有任何代码可以删除最后一个逗号（懒惰的方式）或任何其他方式来获取没有它的数据库数据？

先感谢您。

*********** 编辑 ****************

一个更好的方法在[这里](https://stackoverflow.com/questions/3413629/emulate-ie7-for-ie8-but-not-for-ie9-using-x-ua-compatible)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T21:22:07.857

不要手动连接，而是使用[`json_encode()`](http://php.net/json_encode)：

```
$data = array();
while($row = mysql_fetch_array($GetCallDriversResultPie)) {
    $data[] = array($row['CallDriver'], (int)$row['Calls count']);
}

echo json_encode($data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T21:22:16.407

一种方法是将数据添加到变量中，并在处理来自 MySQL 的结果集后，使用 substr() 修剪到所需的长度（-1 个字符，最后一个逗号）。

```
series: [{
            type: 'pie',

            data: [ <?php

$result = '';
while($row = mysql_fetch_array($GetCallDriversResultPie))`{
    $results .= "['" . $row['CallDriver'] . "'," . $row['Calls count'] . "]," ;
}

echo ( substr( $results, 0, -1 ) ); // echo all of $results, except the last character

?>
            ]
        }] 
```

# java - 无法定义地理编码器构造函数

> ID：15327766
> 
> 赞同：0
> 
> 时间：2013-03-10T21:20:08.500
> 
> 标签：java, android, google-geocoder

希望这是一个简单的家伙。我试图创建一个地理编码器对象实例。我收到一个错误，该类的构造函数未定义。我不明白为什么我要提供上下文和 default.ENGLISH。

我有导入，我已经尝试将上下文简单地称为“this”和“context.this”。

```
import com.google.android.maps.GeoPoint; 
```

这是我方法中的代码：

```
 public String convertGpToLoc(double lat, double longg)
    {

        Geocoder gc = new Geocoder(CityClickListener.this, Locale.US);

        List<Address> addresses = gc.getFromLocation(lat, longg, 1);
        StringBuilder sb = new StringBuilder();
        if (addresses.size() > 0) {
        Address address = addresses.get(0);
        for (int i = 0; i < address.getMaxAddressLineIndex(); i++)
        sb.append(address.getAddressLine(i)).append("\n");
        sb.append(address.getLocality()).append("\n");
        sb.append(address.getPostalCode()).append("\n");
        sb.append(address.getCountryName());

        return sb.toString();

        }

        return null;

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T21:34:27.147

第一个参数的类型应该是`Context`

因此，根据您的代码，请尝试以下操作：

```
Geocoder gc = new Geocoder(ctx, Locale.US); 
```

# python - 如何在启动时在 python 2.7 IDLE 中加载 .bashrc 环境变量

> ID：15327769
> 
> 赞同：0
> 
> 时间：2013-03-10T21:20:19.903
> 
> 标签：python, ubuntu

我想让我在 .bashrc 中定义的环境变量在从 ubuntu 启动器启动时加载到 python 2.7 IDLE 中。

当我从命令行启动 IDLE 时，这些环境变量会正确加载。

一种解决方案[http://ubuntuforums.org/showthread.php?t=253555&p=1484153#post1484153](http://ubuntuforums.org/showthread.php?t=253555&p=1484153#post1484153)修改 /usr/bin/idle-python2.7 以在空闲启动时包含一个环境变量。

我不确定如何对所有环境变量执行此操作，而无需在 python 中解析 .bashrc 文件。

具体来说，我想在我的 .bashrc 中导出一个变量

```
export FOO="BAR" 
```

我希望从 ubuntu 启动器打开 idle-python2.7 并输入：

```
>>> import os
>>> print os.environ['FOO']
BAR 
```

**软件详情：**

```
OS: Ubuntu 12.04 64 bit
python version: 2.7 
```

如果您需要我提供的其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T23:26:30.160

[手册](http://docs.python.org/2/library/idle.html#startup)中的两个想法。

1.  更改 ubuntu 启动器以运行并设置指向包含 python 命令的文件`idle.py -s`的环境变量以设置您的环境。`IDLESTARTUP`

2.  创建一个执行相同操作的`.Idle.py`in文件（但由 触发）`~/``Tkinter`

这些都不会执行`.bashrc`所以另一个想法

*   创建一个自定义 ubuntu 启动器，该启动器获取您的资源`.bashrc`然后启动`IDLE`

和我最喜欢的

*   只是从外壳使用`ipython`或常规，不是很好:)`python``IDLE`

# python - Python/Django - 避免在源代码中保存密码

> ID：15327776
> 
> 赞同：40
> 
> 时间：2013-03-10T21:20:55.767
> 
> 标签：python, django, security, version-control, django-settings

我使用 Python 和 Django 创建 Web 应用程序，我们将其存储在源代码管理中。通常设置 Django 的方式，密码在 settings.py 文件中是纯文本的。

以纯文本形式存储我的密码会给我带来许多安全问题，特别是因为这是一个开源项目，我的源代码将受到版本控制（通过 git，在 Github 上，全世界都可以看到！）

问题是，在 Django/Python 开发环境中安全地编写 settings.py 文件的最佳实践是什么？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-03-10T21:20:55.767

尽管我无法在 stackoverflow 上遇到任何特定于 Python 的内容，但我确实找到了一个[很有帮助的网站](http://opensourcehacker.com/2012/12/13/configuring-your-python-application-using-environment-variables/)，并认为我会与社区的其他人分享解决方案。

解决方案：环境变量。

注意：尽管 Linux/Unix/OS X 和 Windows 世界中的环境变量相似，但我还没有在 Windows 机器上测试过这段代码。请让我知道它是否有效。

在您的 bash/sh shell 中，键入：

```
export MYAPP_DB_USER='myapp'
export MYAPP_DB_PASSWORD='testing123' 
```

在你的 Django settings.py 文件中：

```
DATABASE_USER = os.environ.get("MYAPP_DB_USER", '')
DATABASE_PASSWORD = os.environ.get("MYAPP_DB_PASSWORD", '') 
```

在这种情况下，如果环境变量不存在，用户名和密码将默认为空字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-08T15:27:51.533

虽然环境变量方便了很多配置，但是**[把](https://superuser.com/a/708389/241970)****密码放在环境变量里面是[不安全](https://stackoverflow.com/a/12461944/235908)** 的。替代方案是常规版本控制之外的配置文件，这里有一些不同的缺点：

*   环境变量可能会意外泄漏（通过可能通过纯文本传输到最终用户或文件系统中的意外位置（如 ~/.*sh_history）的调试通道）。

*   配置文件可能会意外添加到版本控制中，并最终进入没有部署权限的人可以访问的存储库中。

阅读博客文章[Environment Variables Considered Harmful for Your Secrets](http://movingfast.io/articles/environment-variables-considered-harmful/)以获得更多论据：环境可供整个进程访问，继承给子（可能还有第 3 方）进程，并且外部开发人员没有明确的假设来处理环境变量作为机密。

Python 中最简单的配置文件格式就是[一个 Python 模块](https://stackoverflow.com/a/5056829/235908)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-07T17:31:30.587

这是一个老问题，问我的人肯定已经找到了解决这个问题的方法，但我自己正在查找这个问题并认为因为这里的答案并不是我正在寻找的解决方案我可能会添加什么我为任何其他可能问同样问题的人做过。

我所做的是使用 getpass() 让设置文件在启动时要求输入密码。

```
from getpass import getpass

#[...]

    DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql', #or whatever DB you use
        'NAME': 'mydb',
        'USER': 'myuser',
        'PASSWORD': getpass(),
        'HOST': '',
        'PORT': '',
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-21T15:08:42.493

在你的 settings.py 中有这样的东西：

`db_user = 'my_db_user' db_password = 'my_db_password'`

在您的代码中硬编码有价值的信息，并且确实会带来安全风险。另一种方法是将有价值的信息（Api 密钥、数据库密码等）作为环境变量存储在本地计算机上。例如，在 linux 上，您可以添加：

`export DB_USER = "my_db_user" export DB_PASS = "my_db_password"`

到您的 .bash_profile。或者，您的托管服务提供商通常可以选择设置环境变量，例如使用 AWS 弹性 beanstalk，您可以在控制台的配置下添加环境变量。

然后检索您的信息导入操作系统：

`import os db_user = os.environ.get['DB_USER'] db_password = os.environ.get['DB_PASS']`

# c++ - 返回的堆栈变量

> ID：15327780
> 
> 赞同：0
> 
> 时间：2013-03-10T21:21:00.030
> 
> 标签：c++

我正在阅读以下问题：

[如何在 C++ 中“返回一个对象”？](https://stackoverflow.com/questions/3350385/how-to-return-an-object-in-c)

（询问有关在 C++ 中返回对象的问题）

特别是以下答案：

[https://stackoverflow.com/a/3350418/997112](https://stackoverflow.com/a/3350418/997112)

```
Thing calculateThing() {
    Thing thing;
    // do calculations and modify thing
     return thing;
} 
```

这个答案肯定不会起作用，因为定义的变量将不再存在，因为它在堆栈上并且仅在函数持续时间内的范围内？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:22:10.477

它会起作用，因为（至少在语义上），您将变量的*副本返回给调用者。*现在，实际的副本可能会通过[返回值优化](http://en.wikipedia.org/wiki/Return_value_optimization)被省略，所以在这种表达式中

```
Thing t = calculateThing(); 
```

来自函数体的`thing`the 通常会被构造到`t`. 但`t`实际上是一个副本，`thing`因为它具有相同的价值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T21:23:34.873

该`thing`函数的内部将在返回后销毁，但它会被复制到`Thing`调用方的另一个对象。

```
Thing new_thing = calculateThing(); 
```

`new_thing``thing`具有从中返回的内容`calculateThing`。

*注意：有一个棘手的问题，我假设有明确定义的复制构造函数或赋值运算符`new`，`delete` 以防`Thing`.*

**更新：** 正如 juanchopanza 评论的那样，[RVO](http://en.wikipedia.org/wiki/Return_value_optimization)将避免`thing`在该函数内创建。实际上`new_thing`将被`thing`隐式替换，并且不会完成额外的副本。显然不会发生破坏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T21:22:45.063

这是有效的，因为`thing`它被复制/移入返回值（返回值是不同的对象，`thing`除非发生复制省略，在这种情况下，生命周期`thing`会延长到返回值的生命周期）。

```
//Here there may be up to three Thing objects.
//- `thing` in the function body
//- the unnamed temporary that is the value of `calculateThing()`
//  (the return value)
//- t
Thing t(calculateThing()); 
```

如果发生复制省略，所有三个对象可能是同一个对象。

# javascript - 使用 Google Maps API 在点击地图时启用滚轮缩放

> ID：15327783
> 
> 赞同：14
> 
> 时间：2013-03-10T21:21:12.263
> 
> 标签：javascript, google-maps, dom-events

我正在使用[Google Maps API](https://developers.google.com/maps/documentation/javascript/tutorial)，并且希望能够在移动设备上滚动过去地图，并且在使用滚轮向下滚动网页时没有地图缩放。

这是我的代码：

```
var mapOptions = {
  center: new google.maps.LatLng(51.605139, -2.918567),
  zoom: 15,
  scrollwheel: false,
  draggable: false,
  mapTypeId: google.maps.MapTypeId.ROADMAP
}; 
```

这很好，但我想要实现的是**仅在单击地图时启用滚轮缩放**。

（所以在网页上，当我点击地图时，我可以放大它，或者在移动设备上，当我点击屏幕时，我可以捏和缩放/拖动地图。）

我可以添加一个事件侦听器以仅在双击或单击时激活可拖动？
是否可以使用API​​？

* * *

编辑

我已经尝试了以下代码，但它似乎不起作用：

```
google.maps.event.addListener(map, 'click', function (event) {
  var mapOptions = {
    draggable: true,

  };
}); 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-10T22:02:14.780

这应该有效：

```
 google.maps.event.addListener(map, 'click', function(event){
          this.setOptions({scrollwheel:true});
        }); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-03-25T22:25:33.290

```
google.maps.event.addListener(map, 'mouseout', function(event){
 this.setOptions({scrollwheel:false});  
}); 
```

除了 Dr.Molle 的回答之外，这是一个方便的小考虑。

正如它所显示的那样，当鼠标离开地图时，这将重新禁用滚轮缩放。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-06-02T18:09:15.747

这是我通常做的：

> 用户与地图交互（mousedown）-> 设置可缩放
> 鼠标在地图上停留超过 1 秒-> 设置可缩放
> 鼠标离开地图-> 设置不可缩放

这通常可以完成工作。当用户处于滚动页面的心态时，地图随之而来。当用户想要放大/缩小时，他们需要与之交互或将指针放在那里一小会儿。

源代码：

```
 google.maps.event.addListener(map, 'mousedown', function(event){
    this.setOptions({scrollwheel:true});
  });
  google.maps.event.addListener(map, 'mouseover', function(event){
    self = this;
    timer = setTimeout(function() {
      self.setOptions({scrollwheel:true});
    }, 1000);
  });
  google.maps.event.addListener(map, 'mouseout', function(event){
    this.setOptions({scrollwheel:false});
    clearTimeout(timer);
  }); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-11-18T14:00:21.017

我找到了一个解决方案并收集了完整的代码，用于在加载时禁用滚动并在单击时启用滚动缩放。

加载时禁用滚动：scrollwheel：false，监听地图上的点击事件并启用scrollwheel：true，

```
map.addListener('click', function() {
    map.set('scrollwheel', true);
}); 
```

请在我的博客中找到代码：http: [//anasthecoder.blogspot.ae/](http://anasthecoder.blogspot.ae/2015/11/maps-enable-scroll-after-first-click-on.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-23T23:15:07.660

这将设置地图，单击地图时，如果滚轮值为假，则为真，如果为真，则为假。

```
function initMap() {

      var florida = {
        lat: 27.5814346,
        lng: -81.0534459
      };

      var map = new google.maps.Map(document.getElementById('map'), {
        zoom: 6,
        center: florida,
        scrollwheel: false
      });

      google.maps.event.addListener(map, 'click', function(event) {
        if (this.scrollwheel == false) {
          this.setOptions({
            scrollwheel: true
          });
        } else {
          this.setOptions({
            scrollwheel: false
          });
        }
      });

    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-08T13:02:07.260

这是我的例子，它对我有用。当页面加载时，谷歌地图（滚轮滚动）关闭，当您点击地图（滚轮滚动）时开启。

```
var map = new google.maps.Map(document.getElementById('map-id'), {
            scrollwheel: false,
        });
        google.maps.event.addListener(map, 'mouseout', function(){
            this.setOptions({scrollwheel:false});
        });
        map.addListener('click', function() {
            map.set('scrollwheel', true);
        }); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-14T08:11:34.003

根据官方 google 文档，要使其在移动设备和网站上完美运行，请使用以下命令：

```
var map = new google.maps.Map(document.getElementById(mapid), {
        gestureHandling: 'greedy',
}); 
```

# iis - 在 azure 网站上出现偶尔的 503 错误

> ID：15327786
> 
> 赞同：2
> 
> 时间：2013-03-10T21:21:21.570
> 
> 标签：iis, azure

我在我们的网站上偶尔会遇到 503 错误。它通常发生在一段时间没有访问该网站之后。整个页面可能返回 503 或者只是一些资源，如 css 或 js 文件。

在您浏览该网站一段时间并访问我们所有的服务器后，它似乎消失了。

Elmah 没有显示任何错误。

我已经查看了我们每台服务器上的日志（Azure 上的三个中型 Web 角色），但找不到任何问题。

我们的部署自 12 月以来一直在进行，没有更改代码，我们已经遇到这个问题大约一周了。

需要注意的一件事是，当这种情况发生时，网站不会关闭。我认为如果 IIS 崩溃并重新启动（即使使用三台服务器）也会发生这种情况。

有谁知道如何诊断或解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T22:15:44.547

虽然这*可能*与代码相关，但我假设您已经通过日志尽可能多地探索了这条路线（并且因为您还没有部署新代码）。话说回来：

您的问题是否与过去几天[Azure 仪表板中显示的计算服务降级事件一致？](http://www.windowsazure.com/en-us/support/service-dashboard/)查看历史视图，您会发现一些有关计算的问题。根据您的数据中心，这可能是相关的吗？

![在此处输入图像描述](../Images/b7f570da9efd15c43c785f75a5013d30.png)

# python - 在执行时读取子进程的 stderr

> ID：15327790
> 
> 赞同：7
> 
> 时间：2013-03-10T21:21:41.447
> 
> 标签：python, buffer, subprocess, stderr

我想阅读子进程在执行时写入 stderr 的内容。

但是，当我使用我编写的这个脚本时，在子进程退出之前，stderr 似乎没有任何内容可供我阅读。

```
#!/usr/bin/env python2

import sys
from subprocess import Popen, PIPE, STDOUT

if len(sys.argv) < 2:
    print "Please provide a command"
    sys.exit(1)

sub = Popen(sys.argv[1:], stdout=PIPE, stderr=STDOUT)

for i, line in enumerate(sub.stdout):
    sys.stdout.write("%d: %s" % (i, line)) 
```

**编辑：**

好的，我现在已经接近了。如果我指定要读取的字节数，它将克服缓冲。

```
#!/usr/bin/env python2

import sys 
from subprocess import Popen, PIPE, STDOUT

if len(sys.argv) < 2:
    print "Please provide a command"
    sys.exit(1)

sub = Popen(sys.argv[1:], stdout=PIPE, stderr=STDOUT)

i = 0 
while sub.poll() is None:
    line = sub.stdout.read(64)
    line.strip("\b")
    sys.stdout.write("%d: %s\n" % (i, line))
    i += 1 
```

输出片段：

```
58:  86 q=21.0 size= 4541841kB time=00:00:22.08 bitrate=1685014.2kbi
frame=  567 fps= 86 q=22.0 size= 4543667kB time=00:00:2
frame=  621 fps= 87 q=20.0 sizs/s    
frame= 4545352kB time=00:00:26.11 bitrate=1425939.2kbits/s    
62: =  686 fps= 90 q=12.0 size= 4546970kB time=00:00:28.89 bitrate=1
frame=  758 fps= 93 q=25.0 size= 4548534kB t
frame=  794 fps= 92 bitrate=1168185.5kbits/s    
65:  q=27.0 size= 4550901kB time=00:00:33.40 bitrate=1115897.0kbits/
frame=  827 fps= 91 q=27.0 size= 4552324kB time=00:00:34.7
frame=  857 fps= 89 q=26.0 size=  
frame=  254kB time=00:00:36.12 bitrate=1032874.9kbits/s    
69: 892 fps= 88 q=25.0 size= 4556598kB time=00:00:37.36 bitrate=9988
frame=  948 fps= 89 q=19.0 size= 4558565kB time=
frame= 1006 fps= 90 q=19937320.4kbits/s    
72: .0 size= 4560139kB time=00:00:42.16 bitrate=885880.0kbits/s    
73: frame= 1060 fps= 91 q=19.0 size= 4561958kB time=00:00:44.49 bitr
frame= 1122 fps= 93 q=18.0 size= 4563460
frame= 1173 fps=0:47.08 bitrate=793898.4kbits/s 
```

现在看来我的问题是 ffmpeg 正在使用退格字符或类似于混淆标准输出。不知道这里发生了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T21:45:20.620

我建议使用[sh](https://pypi.python.org/pypi/sh)模块。这是一款非常棒的软件，它在 python 中封装了子进程，并为你提供了你会喜欢的 Pythonic、漂亮的界面。查看[文档](http://amoffat.github.com/sh/)。

如果您真的不想要`sh`模块，请使用[通信](http://docs.python.org/2/library/subprocess.html#subprocess.Popen.communicate)方法`Popen`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T22:19:42.740

如果子进程[不使用块缓冲](https://stackoverflow.com/questions/89228/calling-an-external-command-in-python#comment18358805_95246)，那么您可以尝试：

```
for i, line in enumerate(iter(sub.stdout.readline, b"")):
    print i, line, 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T21:58:25.090

您应该同时使用 PIPE，还需要调用`communicate()`：

```
sub = Popen(sys.argv[1:], stdout=PIPE, stderr=PIPE)
output, error_output = sub.communicate()

print 'OUTPUT:'
print output

print 'ERROR:'
print error_output 
```

# jquery - jQuery在简单警报中为父母选择器返回未定义

> ID：15327794
> 
> 赞同：0
> 
> 时间：2013-03-10T21:22:00.827
> 
> 标签：jquery

我正在尝试访问 DOM 树中单击项的父项，但由于某种原因，它没有任何项。

这是我的 jQuery：

```
$('.video-icon').click(function() {
    alert($(this).closest('.video-space').html())
}); 
```

还有我的html：

```
<div class="video">
    <div class="video-space">
        <img src="img/video-1.jpg" alt="" class="video-img">
    </div>
    <div class="video-info">
        <div class="video-icon">
            <img src="img/video.svg" alt="" class="video-icon-img">
        </div>
        <h3 class="video-text">Watch video</h3>
        <h3 class="video-title" data-video="http://www.youtube.com/watch?v=xxxxxxxxx">Toy Story Trailer</h3>
    </div>
</div> 
```

任何关于让它工作的建议都很棒！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T21:23:50.797

`.video-space`不是*的*祖先`.video-icon`。[`closest`](http://api.jquery.com/closest)寻找与选择器匹配的第一个祖先元素，这就是它不起作用的原因。

你需要类似的东西：

```
$('.video-icon').click(function() {
    alert($(this).closest('.video').find('.video-space').html())
}); 
```

**示例：http:** [//jsfiddle.net/6zAN7/14/](http://jsfiddle.net/6zAN7/14/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T21:24:15.113

我没有看到任何 .video-icon 在您的 HTML 代码中的 .video-space 内。因此，当单击 .video-icon 时，它会尝试在其父级中查找 .video-space ，但没​​有，因此它不会输出任何内容。

也许您正在尝试查找兄弟姐妹，因此请使用`sibling('.video-space')`而不是 parent()。

# java - 尝试使用按钮更改 JTextField

> ID：15327802
> 
> 赞同：0
> 
> 时间：2013-03-10T21:22:20.463
> 
> 标签：java, swing

在点击下一个按钮后，我试图在 JTextFields 中显示下一组值。我是编程新手，所以我不确定我错过了什么。我想要发生的是，当窗口显示下一组值现在将显示在适当的 JTextFields 中时，当我点击下一个按钮时，不幸的是最终发生的事情什么都没有。我已经尝试了几种不同的方法来让它工作，但到目前为止没有。我知道它不是按钮本身，因为如果我将 actionPerformed 更改为 setTitle(“5000”) ，它将更改窗口内的标题。任何帮助表示赞赏。

```
import java.awt.FlowLayout;
import java.awt.GridLayout;
import java.awt.event.*;
import java.util.Arrays;
import javax.swing.*;
import java.awt.*;

public class GUI extends JFrame implements ActionListener {
    JButton next;
    JButton previous;
    JButton first;
    JButton last;

    private JLabel itmNum = new JLabel("Item Number: ", SwingConstants.RIGHT);
    private JTextField itemNumber;
    private JLabel proNm = new JLabel ("Product Name: ", SwingConstants.RIGHT);
    private JTextField prodName;
    private JLabel yr = new JLabel("Year Made: ", SwingConstants.RIGHT);
    private JTextField year;
    private JLabel unNum = new JLabel("Unit Number: ", SwingConstants.RIGHT);
    private JTextField unitNumber;
    private JLabel prodPrice = new JLabel("Product Price: ", SwingConstants.RIGHT);
    private JTextField price;
    private JLabel restkFee = new JLabel("Restocking Fee", SwingConstants.RIGHT);
    private JTextField rsFee;
    private JLabel prodInValue = new JLabel("Product Inventory Value",   SwingConstants.RIGHT);
    private JTextField prodValue;
    private JLabel totalValue = new JLabel("Total Value of All Products", SwingConstants.RIGHT);
    private JTextField tValue;
    private double toValue;

    int nb = 0;
    char x = 'y';
    public GUI() 
    {

        super ("Inventory Program Part 5");
        setSize(800,800);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLookAndFeel();

        first = new JButton("First");
        previous = new JButton("Previous");
        next = new JButton("Next");
        last = new JButton("Last");
        first.addActionListener(this);
        previous.addActionListener(this);
        next.addActionListener(this);
        last.addActionListener(this);

        Movies[] titles = new Movies[9];

        titles [0] = new Movies(10001, "King Arthur", 25 , 9.99, 2004, .05);

        titles [1] = new Movies(10002,"Tron", 25, 7.99, 1982, .05);

        titles [2] = new Movies(10003, "Tron: Legacy",25,24.99,2010,.05);

        titles [3] = new Movies(10004,"Braveheart", 25,2.50,1995,.05);

        titles [4] = new Movies(10005,"Gladiator",25,2.50,2000,.05);

        titles [5] = new Movies(10006,"CaddyShack SE",25,19.99,1980,.05);

        titles [6] = new Movies (10007,"Hackers",25,12.50,1995,.05);

        titles [7] = new Movies (10008,"Die Hard Trilogy",25,19.99,1988,.05);

        titles [8] = new Movies (10009,"Terminator",25,4.99,1984,.05);

        Arrays.sort (titles, DVD.prodNameComparator);

                        itemNumber.setText(Double.toString(titles[nb].getitemNum()));
                        prodName.setText(titles[nb].getprodName());
                        year.setText(Integer.toString(titles[nb].getYear()));
                        unitNumber.setText(Integer.toString(titles[nb].getunitNum()));
                        price.setText(Float.toString(titles[nb].getprice()));
                        rsFee.setText(Double.toString(titles[nb].getRestkFee()));
                        prodValue.setText(Double.toString(titles[nb].getprodValue()));
                        tValue.setText("2636");

        setLayout(new GridLayout(8,4));
        add(itmNum);
        add(itemNumber);
        add(proNm);
        add(prodName);
        add(yr);
        add(year);
        add(unNum);
        add(unitNumber);
        add(prodPrice);
        add(price);
        add(restkFee);
        add(rsFee);
        add(prodInValue);
        add(prodValue);
        add(totalValue);
        add(tValue);
        add(first);
        add(previous);
        add(next);
        add(last);
        setLookAndFeel();
        setVisible(true);

    }

    public void updateFields()
    {
        itemNumber.getText();
        prodName.getText();
        year.getText();
        unitNumber.getText();
        price.getText();
        rsFee.getText();
        prodValue.getText();
        tValue.getText();
    }

    public void actionPerformed(ActionEvent evt){
        Object source = evt.getSource();
        if (source == next) 
        {
            nb++;

        }

    }

    private void setLookAndFeel()
    {
        try{
            UIManager.setLookAndFeel("com.sun.java.swing.plaf.nimbus.NimbusLookAndFeel");
                        SwingUtilities.updateComponentTreeUI(this);
            } catch (Exception e) {
                System.err.println("couln't use the system"+ "look and feel: " + e);
            }

    }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T21:35:23.083

你`ActionListener`只有一项任务

```
nb = 1; 
```

和一个`repaint`。这不会使用您的数组`JTextFields`中的值更新。您需要明确地执行此操作。`Movies``titles`

```
itemNumber.setText(Double.toString(titles[nb].getItemNum()));
... 
```

为了使这成为可能，您需要使您的`Movies` `titles`数组成为类成员变量，以便可以从您的`ActionListener`.

此外，您永远不会真正*更改*. 因为它是一个“下一步”按钮，你可能想要增加它：`nb``ActionListener`

```
nb++; 
```

*旁注：*

*   Java 使用*驼峰*式来制作方法`getitemNum` `getItemNum`。
*   An`ArrayList`将为您在大小固定的数组上添加电影标题提供更大的灵活性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T21:37:53.663

我认为改变 JTextFields 的逻辑在 GUI 类的构造函数中。因此，除非您正在创建 GUI 类的另一个对象，否则我可以看到它没有被创建。您的 JTextFields 将不会更新。

所以基本上要解决这个问题，您必须将更改 JTextFields 的逻辑移到另一种方法中，例如

```
 public void updateFields(){

   //place your logic code here 

 } 
```

然后从 actionPerformed 方法调用这个 updateFields() 方法

```
public void actionPerformed(ActionEvent evt){
    Object source = evt.getSource();
    if (source == next) 
    {
        nb =1;
    }
     updateFields();
    ///repaint();   /// you don't need the repaint method 
} 
```

根据您在评论中的问题，据我所知，将您的标题数组放在构造函数之外，并进行以下更改，使其看起来像这样：

```
private JTextField tValue;
private double toValue;
int nb = 0;   //note initialize this to 0
Movies[] titles = new Movies[9];//this is the line that comes out of the Constructor
public GUI() 
{

///inside the constructor do the following changes

            for (int i = 0; i < titles.length; i ++)
            {

                toValue += (titles[i].gettotalVal());
            }

    //note I will be accessing the 0th position of the array assuming you need the contents of the first objects to be displayed
    itemNumber = new JTextField(Double.toString(titles[0].getitemNum()));
    prodName = new JTextField(titles[0].getprodName());
    year = new JTextField(Integer.toString(titles[0].getYear()));
    unitNumber = new JTextField (Integer.toString(titles[0].getunitNum()));
    price = new JTextField (Float.toString(titles[0].getprice()));
    rsFee = new JTextField (Double.toString(titles[0].getRestkFee()));
    prodValue = new JTextField(Double.toString(titles[0].getprodValue()));
    tValue = new JTextField ("2636");
    nb = 0;
    //if (nb == 0) you don't need a if statement
    //{

    next.addActionListener(this);

    //} 
```

///现在为 updateFields() 方法

```
 public updateFields(){
    nb++;
    itemNumber.setText(Double.toString(titles[nb].getitemNum());
    prodName.setText(titles[nb].getprodName());
    year.setText(Integer.toString(titles[nb].getYear()));
    unitNumber.setText(Integer.toString(titles[nb].getunitNum()));
    price.setText(titles[nb].getprice()));
    rsFee.setText(Double.toString(titles[nb].getRestkFee()));
    prodValue.setText(Double.toString(titles[nb].getprodValue()));
    } 
```

# php - 具有多个 tbody 和多个具有相同名称的隐藏字段的表单仅发送表单中的最后一个隐藏字段

> ID：15327805
> 
> 赞同：0
> 
> 时间：2013-03-10T21:22:43.580
> 
> 标签：php, html

这种形式在一个形式中有多个 tbody。每个 tbody 都包含具有“唯一”值的“隐藏”字段。但是，发送此表单时，它只发送最后一个“pouzivatel_id”值。

例如

我想执行“pouzivatel_id”=4，但表单发送“pouzivatel_id”=“1”

**如果不使用多个表单，我将如何解决这个问题？**

```
<form method="post" action="lib/action/admin.post.php">
<table>
    <thead>
        <tr>
            <th>Osobné číslo</th>
            <th>Prezývka</th>
            <th>Meno</th>
            <th>Priezvisko</th>
            <th>Operácie</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>00000000004</td>
            <td>user4</td>
            <td>user</td>
            <td>user</td>
            <td>
                <input type="hidden" name="pouzivatel_id" value="4"/>
                <button type="submit" name="ziadatel-schvalit" class="tlacidlo zelena">Schváliť</button>
                <button type="submit" name="ziadatel-zmazat" class="tlacidlo cervena">Zamietnuť</button>
            </td>
        </tr>
    </tbody>
    <tbody>
        <tr>
            <td>00000000003</td>
            <td>user3</td>
            <td>user</td>
            <td>user</td>
            <td>
                <input type="hidden" name="pouzivatel_id" value="3"/>
                <button type="submit" name="ziadatel-schvalit" class="tlacidlo zelena">Schváliť</button>
                <button type="submit" name="ziadatel-zmazat" class="tlacidlo cervena">Zamietnuť</button>
            </td>
        </tr>
    </tbody>
    <tbody>
        <tr>
            <td>00000000002</td>
            <td>user2</td>
            <td>user</td>
            <td>user</td>
            <td>
                <input type="hidden" name="pouzivatel_id" value="2"/>
                <button type="submit" name="ziadatel-schvalit" class="tlacidlo zelena">Schváliť</button>
                <button type="submit" name="ziadatel-zmazat" class="tlacidlo cervena">Zamietnuť</button>
            </td>
        </tr>
    </tbody>
    <tbody>
        <tr>
            <td>00000000001</td>
            <td>user1</td>
            <td>user</td>
            <td>user</td>
            <td>
                <input type="hidden" name="pouzivatel_id" value="1"/>
                <button type="submit" name="ziadatel-schvalit" class="tlacidlo zelena">Schváliť</button>
                <button type="submit" name="ziadatel-zmazat" class="tlacidlo cervena">Zamietnuť</button>
            </td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:41:34.840

您可以为每个提交按钮使用不同的名称。如果按下提交按钮，则只有这个提交按钮会发送到您的 PHP 脚本。在您的 PHP 脚本中，您检查按下了哪个按钮。

示例 HTML 代码：

```
<input type="hidden" name="pouzivatel_id[]" value="2"/>
<button type="submit" name="ziadatel-schvalit_2" class="tlacidlo zelena">Schváliť</button>
<button type="submit" name="ziadatel-zmazat_2" class="tlacidlo cervena">Zamietnuť</button>
<input type="hidden" name="pouzivatel_id[]" value="1"/>
<button type="submit" name="ziadatel-schvalit_1" class="tlacidlo zelena">Schváliť</button>
<button type="submit" name="ziadatel-zmazat_1" class="tlacidlo cervena">Zamietnuť</button> 
```

示例 PHP 代码：

```
<?PHP
foreach($_POST['pouzivatel_id'] as $id)
{
    if(isset($_POST['ziadatel-schvalit_' . $id]))
    {
        //Schváliť
    }
    elseif(isset($_POST['ziadatel-zmazat_' . $id]))
    {
        //Zamietnuť
    }
}
?> 
```

# macos - 为什么我的应用有这么多页面错误？

> ID：15327809
> 
> 赞同：2
> 
> 时间：2013-03-10T21:22:56.183
> 
> 标签：macos, cocoa, unix, memory-management

我有一个在后台永久运行的 mac/cocoa 应用程序（它在桌面上放置了一个非交互式小部件）。

在运行了很长一段时间（几天）后，该`top`命令说它已经发生了超过 6 亿次故障（并且这个数字正在缓慢但不断地增长）。将此与只有 700 万个故障且已运行大约两倍的坞站进行比较。

它只使用大约 10MB 的 RAM，并且没有任何内存泄漏（我正在使用 ARC btw）。有一个简单的动画不断运行。

这是否表明我的代码存在问题？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-27T12:31:58.613

您可以尝试`fs_usage`使用实时显示与文件系统活动相关的系统调用和页面错误的工具。例如：

```
sudo fs_usage cmd_or_PID 
```

或者使用`dtruss`（作为 root 使用`-fp PID`or `-fn cmd`）来检查您的进程。

# node.js - Node.js net.createConnection 通过 Promixo

> ID：15327814
> 
> 赞同：0
> 
> 时间：2013-03-10T21:23:11.793
> 
> 标签：node.js, static-ip-address, proximo

`net`我正在通过我的 Node.js 应用程序中的模块创建连接：

```
this.stream = net.createConnection(25, host, this._onConnect); 
```

哪个工作得很好，但是我需要通过[Proximo](https://devcenter.heroku.com/articles/proximo)发送这个流量，因为我的连接需要一个静态 IP。我不熟悉该`net`模块，因此任何帮助都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:29:09.927

您不需要绑定任何东西或对您的代码进行任何修改。据我所知，前提是您已绑定到 proximo 为您提供的 IP 地址：

```
$ heroku addons:add proximo:development
Adding proximo to sharp-mountain-4005â¦ done, v18 ($5/mo)
Your static IP address is 127.0.0.1 
```

您的程序将包装在 proximo 二进制文件中，该二进制文件通过代理路由所有 TCP 数据包。[但是，您可以使用https://devcenter.heroku.com/articles/proximo#configuring-the-proximo-wrapper](https://devcenter.heroku.com/articles/proximo#configuring-the-proximo-wrapper)限制流量。

根据我的经验，所有 proximo 设置都在 heroku 的命令行上。

# .net - 如何通过 Visual Studio 插件跟踪项目项的属性更改

> ID：15327819
> 
> 赞同：2
> 
> 时间：2013-03-10T21:23:44.593
> 
> 标签：.net, visual-studio-2010, add-in

我正在开发一个 Visual Studio 2010 加载项，此时我被困住了。我想收到有关特定项目项目属性更改的通知。例如，我需要知道是否在我的项目中添加了新表单（winform）。

在 Visual Studio 2010 中将表单添加到项目中有 2 种可能性：

1.  您可以通过上下文菜单简单地添加一个新的表单项。在这种情况下，IDE 会引发*ProjectItemAdded事件。*问题是，当时新表单被识别为*eFileTypeCppHeader*而不是*eFileTypeCppForm*。

2.  第二个选项是通过属性选项卡将 Header 文件的 FileType 属性更改为“ *C++ Form ”。*没有通知加载项有关此属性更改的事件。

那么，我的加载项如何知道 ProjectItem 的属性已更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T12:07:00.497

最后我发现了如何绑定到项目属性更改事件。需要实现*IVsHierarchy*接口，然后实现*OnPropertyChanged*事件。还需要枚举打开的项目，并一一绑定到它们的属性变化。请参见下面的示例。

```
public ref class Hierarchy: public IVsHierarchyEvents
{
private:
    IVsHierarchy^ TargetHierarchy;
    unsigned int TargetHierarchyCookie;

public:
    Hierarchy(IVsHierarchy^ THierarchy)
    {
        TargetHierarchy = THierarchy;
        TargetHierarchy->AdviseHierarchyEvents(this, TargetHierarchyCookie);
    }

    virtual int OnPropertyChanged(unsigned int itemid, int propid, unsigned int flags)
    {
        // your code here
    }

    ...
};

public ref class Connect : public IDTExtensibility2, public IDTCommandTarget
{
private:
    List<Hierarchy^>^ Hierarchies;

    ...

public:
    virtual void OnConnection(...)
    {
        appObject = dynamic_cast<DTE2^>(Application);
        addInInstance = dynamic_cast<AddIn^>(AddInInst);

        ...

        // obtain the service provider
        OLE::Interop::IServiceProvider^ SProvider = safe_cast<OLE::Interop::IServiceProvider^>(appObject);
        Guid Sol_GuidService = (Guid)(SVsSolution::typeid)->GUID;
        Guid Sol_riid = (Guid)(SVsSolution::typeid)->GUID;
        IntPtr Sol_ppvObject;

        // obtain the solution object
        if (SProvider->QueryService(Sol_GuidService, Sol_riid, Sol_ppvObject)==VSConstants::S_OK && IntPtr::Zero!=Sol_ppvObject)
        {
            IVsSolution^ Sol = safe_cast<IVsSolution^>(Marshal::GetObjectForIUnknown(Sol_ppvObject));
            IEnumHierarchies^ EnumHierarchies = nullptr;
            Guid ProjectGUID = Guid("{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}");

            // enumerate through the projects and bind the project changed events
            if (Sol->GetProjectEnum((unsigned int)(__VSENUMPROJFLAGS::EPF_MATCHTYPE | __VSENUMPROJFLAGS::EPF_ALLPROJECTS), ProjectGUID, EnumHierarchies)==VSConstants::S_OK && EnumHierarchies!=nullptr)
            {
                UInt32 pceltFetched;
                array<IVsHierarchy^>^ rgelt = gcnew array<IVsHierarchy^>(1){nullptr};
                for (EnumHierarchies->Reset(); EnumHierarchies->Next(1, rgelt, pceltFetched)==VSConstants::S_OK && pceltFetched==1; )
                {
                    Hierarchy^ NewHierarchy = gcnew Hierarchy(rgelt[0]);
                    Hierarchies->Add(NewHierarchy);                         
                }
            }
        }           
    }

    ...
}; 
```

# php - PHP 获取数据库数据到 HTML 表中

> ID：15327820
> 
> 赞同：0
> 
> 时间：2013-03-10T21:23:44.897
> 
> 标签：php, html

我想将我的数据库数据放入 HTML 表中，这并不像看起来那么容易，请查看我的照片和代码以更好地了解我的问题是什么

我的结果：

![在此处输入图像描述](../Images/324b22ea733aafc55dfbdba224a4d022.png)

期望的结果：

![在此处输入图像描述](../Images/b8059632555108af6823dd64913d4f5f.png)

基本上我想将结果分开，如红线所示，因此每个项目都分开。

PHP代码：

```
$sql = mysql_query("SELECT * FROM products"); ?>

<table id='display'>

    <?php
        while($rows = mysql_fetch_array($sql))
            {
    ?>
        <tr><td><?php echo "<img src=$rows[$product_image] height='200px' width='200px'>" ?></td></tr>

        <tr>
        <td><b><?php echo "$rows[$product_name]" ?></td>
        <td><b><?php echo "Avalible: $rows[$product_qua]" ?></td>
        <td><b><?php echo "Price: £ $rows[$product_price]" ?></td>
        <td><b><?php echo "Description: $rows[$product_des]" ?></td>
        </tr>
        <tr>
        <td><strong><p>Please Login To purchase this item </p></strong><a href="login.php">Login</a></td>
        </tr>

        <?php
            }
        ?>

</table> 
```

CSS 代码：

```
table#display{
    float:left;
    border: 5px solid black;
    margin-top:50px;
    margin-left:10px;

}
table#display td{
    border: 1px solid black;
    padding:0 8px;

}
table#display tr{
    border: 1px solid black;
    padding:0 8px;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:30:58.287

我的解决方案： PHP 代码：

```
$sql = mysql_query("SELECT * FROM products"); ?>

<?php
    while($rows = mysql_fetch_array($sql))
        {
?>
<table class='display'>
    <tr><td><?php echo "<img src=$rows[$product_image] height='200px' width='200px'>" ?></td></tr>

    <tr>
    <td><b><?php echo "$rows[$product_name]" ?></td>
    <td><b><?php echo "Avalible: $rows[$product_qua]" ?></td>
    <td><b><?php echo "Price: £ $rows[$product_price]" ?></td>
    <td><b><?php echo "Description: $rows[$product_des]" ?></td>
    </tr>
    <tr>
    <td><strong><p>Please Login To purchase this item </p></strong><a href="login.php">Login</a></td>
    </tr>
    </table>

    <?php
        }
    ?> 
```

CSS：

```
table.display{
    float:left;
    border: 5px solid black;
    margin-top:50px;
    margin-left:10px;
    margin-bottom: 10px;    
} 
```

# c++ - unsigned long long 不会存储大数字

> ID：15327823
> 
> 赞同：3
> 
> 时间：2013-03-10T21:23:57.057
> 
> 标签：c++

我对 C/C++`unsigned long long`类型感到困惑，因为理论上它应该存储多达 2^64-1，这是一个 19 位十进制数字，但以下代码：

```
unsigned int x = 1000000u; //(One million)
unsigned long long k = (x*x);
cout << k << endl; 
```

打印出 3567587328，这是不正确的。现在 1,000,000^2 结果为 1,000,000,000,000 - 12 位十进制数字，远低于 even 的限制`signed long long`。这怎么可能发生？它与我正在运行的系统有什么关系吗？（32 位 Ubuntu）

如果我需要 64 位系统来实现 64 位操作，那么就会出现另一个问题：大多数编译器使用线性同余生成器来生成随机数，如下所示：

```
x(t) = (a*x(t-1) + c) mod m. 
```

`a`并且`c`通常是一个32位的大数，m是`2^32-1` 所以`a*x(t-1)`在进行模运算之前很有可能导致一个64位的数。

如果需要 64 位系统，那么自 1990 年代以来 gcc 如何在 16-32 位机器上生成随机数？

太感谢了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-10T21:25:47.623

当然`k`是`unsigned long long`，但是`x`是`unsigned int`，因此也是`x*x`。您的表达式被计算为`unsigned int`，当超过无符号类型的限制时，这会导致通常的环绕。损坏完成后，将其转换为`unsigned long long`.

可能的修复：

*   做`x`一个`unsigned long long`
*   `unsigned long long k = ((unsigned long long)x*(unsigned long long)x);`
*   `unsigned long long k = (1ULL*x*x);`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-10T21:39:13.913

`x`是`unsigned int`-->`x*x`也是`unsigned int`。如果乘法的结果超过 的最大值`unsigned int`，则会发生回绕。**只有在这些**操作之后，才会将结果分配给接收变量 ( `k`)。如果您希望结果是`unsigned long long`您需要将至少一个操作数提升为这种类型，例如：`unsigned long long k = (unsigned long long)x * x;`.

关于您的第二个问题：编译器通常不会生成数字，这是在运行时完成的。我不知道你从哪里得到的公式`x(t) = (a*x(t-1) + c) mod m`。假设这确实是公式，则有一些方法可以使中间结果有界：模运算可以应用于任何操作数或中间结果而不改变结果。因此`x(t) = (a*x(t-1) + c) mod m = (a mod m) * (x(t-1) mod m) + c mod m`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-10T21:28:52.080

当您将右侧`unsigned int`的 an 与 an相乘时，结果为. 因此，它与被相乘的两个数字具有相同的限制，无论该值随后分配给.`unsigned int``unsigned int``unsigned long long`

但是，如果将`unsigned int`变量转换为`unsigned long long`，则结果将是 an`unsigned long long`并且值将不限于 an 的大小`unsigned int`。

```
unsigned long long k = (((unsigned long long)x)*((unsigned long long)x)); 
```

那应该会给您想要的结果。

# c++ - 检查 STL 向量中是否存在（设置）某个位置的元素

> ID：15327827
> 
> 赞同：0
> 
> 时间：2013-03-10T21:24:21.790
> 
> 标签：c++, vector, stl

我正在编写一个将随机字符串作为输入的算法。我需要输出遇到的最大长度以及有多少单词具有该特定长度。是的，我知道我可以使用不同的方法，但我想将每个字符串存储在 av[it's length] 中，如果有多个长度相同的字符串，那么我会增加 u[same length]，然后只输出这些值。如何检查 v[length] 是否已设置？

抱歉，可能英语不好。

```
#include <iostream>
#include <vector>
#include <string>

using namespace std;

typedef unsigned short us;
typedef vector<string> vstr;
typedef vector<us> vus;

int main()
{
    string str;
    vstr v;
    vus u(50, 1);
    us len;

    while (cin >> str && str != "0")
    {
        len = str.length();

        //if there is an element set at v[len] then ++u[len] otherwise v[len] = str;
    }

    //bunch of other code

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T21:28:58.363

除非您事先知道任何可能字符串的最大长度，否则这将不起作用。让我们将此最大值称为 X。然后您可以构造一个由 X 个整数组成的向量，初始化为 0，然后使用下标运算符递增您需要的那个。

```
std::vector<int> counts(X, 0); // X ints, initialized to 0
for (const string str : v) {
    int length = str.size();
    try {
        counts.at(length)++;
    } catch (const std::out_of_range& oor) {
        // Your professor lied to you!
    }
} 
```

我解决这个问题的方法是使用`map`. 然后，您可以执行以下操作：

```
std::map<int, int> counts;
for (const string str : v) {
    int length = str.size();
    ++counts[length];
} 
```

如果元素不存在，counts[length] 将在 [length] 处创建元素，如果它已经存在，则将其递增。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T21:38:46.920

> 是的，我知道我可以使用不同的方法

老实说，我真的相信你最好采用不同的方法。

您根本不需要长度向量，也不需要地图，也不需要字符串向量，除非您也想显示这些字符串（在这里，我假设您确实需要它）。最后，您甚至不需要知道这些字符串的最大长度：

```
#include <iostream>
#include <vector>
#include <string>

int main()
{
    std::vector<std::string> words;

    std::string::size_type maxLength = 0;
    std::string str;
    while (std::cin >> str)
    {
        auto len = str.length();
        if (len == maxLength)
        {
            words.push_back(str);
        }
        else if (len > maxLength)
        {
            maxLength = len;

            words.clear();
            words.push_back(str);
        }
    }

    std::cout << "Max length: " << maxLength << std::endl;
    std::cout << "# of words with max length: " << words.size() << std::endl;
    std::cout << "Words with max length: " << std::endl;
    for (auto const& s : words) { std::cout << s << std::endl; }

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T21:37:36.287

A`std::vector v`的长度由 给出`v.size()`，并且范围内的所有元素都`[0,v.size())`存在。

所以一个元素存在于`v[n]`if`v.size() > n`

您可以通过检查向量的长度或访问元素来测试它，`v.at(n)`而不是`v[n]`因为`at()`如果元素不存在（即，如果长度不是至少`n`）该函数将引发异常

事实上 a`std::vector`在每个索引处都包含一个元素，直到它的长度意味着它不是[稀疏数组](http://en.wikipedia.org/wiki/Sparse_array)的有效表示要使用标准容器之一表示稀疏数组，最好使用`std::map`它，因为它不需要元素具有连续性键。

# javascript - 如何使用javascript查找最大用户浏览器窗口宽度和当前

> ID：15327829
> 
> 赞同：6
> 
> 时间：2013-03-10T21:24:31.673
> 
> 标签：javascript

我正在寻找一种使用 javascript 查找访问者浏览器窗口宽度和高度的方法，但我还想找到最大窗口大小，因此如果用户使窗口变小或变大，某些元素会自动更改位置或大小，例如 facebook 聊天。有什么建议么 ？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-10T21:29:09.937

最大浏览器尺寸宽度将是屏幕的宽度和高度：

```
screen.height;
screen.width; 
```

但我会使用 CSS 媒体查询来完成你想要做的事情：

[http://css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/)

如果窗口宽度小于 500px，这样的事情会使页面背景变黑：

```
@media only screen and (max-width: 500px) {
  body {
    background: #000;
  }
} 
```

更新：

哦，你会想要一个用于不支持媒体查询的旧浏览器的 polyfill：

[https://github.com/scottjehl/Respond](https://github.com/scottjehl/Respond)

这将使您的媒体查询一直通过 IE6！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-12T17:56:32.073

最大窗口高度为

```
window.screen.availHeight - (window.outerHeight - window.innerHeight) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T21:30:59.063

如果您可以使用 jQuery，那么以跨浏览器的方式设置侦听器非常容易：

```
$(window).resize(function() {
  alert($(window).width()) //window width
  alert($(window).height()) //window height
}).trigger("resize") //to ensure that you do whatever you're going to do when the window is first loaded; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T21:28:23.983

您可以使用`window.innerWidth`和 `window.innerHeight`

您可以使用 css position 'fixed' 或 absolute 相对于窗口定位任何 dom 元素，以便在调整窗口大小时会重新调整自身。

您可以使用`window.onresize`来监听窗口调整大小事件

等效的 jQuery

`$(window).width(); $(window).height()`和`$(window).resize(function(){});`

# python - 如何用 Python/Pandas 减去 2 列未对齐的数据？

> ID：15327831
> 
> 赞同：1
> 
> 时间：2013-03-10T21:24:55.463
> 
> 标签：python, numpy, pandas

我有两个数据框

```
df1=

   x  y1
0  0   0
1  1   1
2  2   2
3  4   3

df2=

     x  y2
0  0.0   0
1  0.5   1
2  1.5   2
3  3.0   3
4  4.0   4 
```

我需要计算 y2-y1（对于相同的 x 值）（以便查看 2 个图表之间的差异）

如您所见，它们之间有些值是共同的……有些则不是

我想我需要重新采样我的数据......但我不知道怎么做！我需要对齐数据以便为 2 个数据框提供相同的“x”列。

在 2 点之间，应进行线性插值以获得给定 x 处的 y 值。

在这种情况下，使用 x_step=0.5 重新采样数据会很好

我做了这个...

```
import pandas as pd
import matplotlib.pylab as plt

df1 = pd.DataFrame([[0.0,0.0],[1.0,1.0],[2.0,2.0],[4.0,3.0]],columns=['x','y1'])
df2 = pd.DataFrame([[0.0,0.0],[0.5,1.9],[1.5,2.0],[3.0,3.0],[4.0,4.0]],columns=['x','y2'])

print(df1)
print("="*10)
print(df1['x'])
print("="*10)
print(df1['y1'])
print("="*10)

fig = plt.figure()

fig.subplots_adjust(bottom=0.1)
ax = fig.add_subplot(111)

plt.title("{y} = f({x})".format(x='x', y='y'))
p1, = plt.plot(df1['x'], df1['y1'], color='b', marker='.')
p2, = plt.plot(df2['x'], df2['y2'], color='r', marker='.')

plt.legend([p1, p2], ["y1", "y2"]) 

plt.show() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T22:55:35.657

```
import pandas as pd
import pylab as pl

df1 = pd.DataFrame([[0.0,0.0],[1.0,1.0],[2.0,2.0],[4.0,3.0]],columns=['x','y1'])
df2 = pd.DataFrame([[0.0,0.0],[0.5,1.9],[1.5,2.0],[3.0,3.0],[4.0,4.0]],columns=['x','y2'])
x = np.union1d(df1.x, df2.x)
y1 = np.interp(x, df1.x, df1.y1)
y2 = np.interp(x, df2.x, df2.y2)
pl.plot(x, y1, "-o")
pl.plot(x, y2, "-o") 
```

![在此处输入图像描述](../Images/8688f2f7d1698b567c301aa670448f09.png)

# php - 睡眠（）超时

> ID：15327832
> 
> 赞同：1
> 
> 时间：2013-03-10T21:25:07.953
> 
> 标签：php

我的主机设置在超时方面存在问题，但实际上我不知道究竟是哪一个负责。当我在 php 页面中运行此代码时：

`<?PHP sleep(30); echo "Done"; ?>`

它给了我`"tcp error operation timeout"`。

但是当我把它改成`sleep(20)`它运行成功时。所以请帮我找出我的 php ini 文件中的哪个项目导致了这个超时。但是我尝试用谷歌搜索它并且已经尝试了很多建议但没有运气，最后我被困在这一点上让我的 php 脚本上线。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T21:35:13.083

根据错误消息，我怀疑这不是 PHP 超时，而是实际的 Web 服务器“拔掉插头”（尽管 30 秒是一个非常短的时间限制）。

这肯定不是正常的 PHP 错误消息，并且您不应该使用 诱导 PHP 超时`sleep`，因为这不会占用实际的 CPU 时间。

在不知道您在哪种主机下运行（Apache？Nginx？IIS？共享主机？VPS？等）的情况下，很难知道在哪里，即使你可以改变它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T21:28:38.100

查看配置中的时间限制。

您可以使用这行代码修改脚本的时间限制：

```
set_time_limit(60); 
```

默认值 id `30s`。如果你使用 set_time_limit() 内部没有参数，它只会重置计数器，并且可用的总时间将增加 30s。

查看文档[set_time_limit 文档](http://php.net/manual/fr/function.set-time-limit.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T21:50:21.703

30 秒是默认的 php 超时，如果你需要`sleep(30)`你必须增加超时，有两种方法可以改变它，从 php 脚本。

`set_time_limit ( int $seconds );`

或者

`ini_set('max_execution_time', int $seconds);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T12:45:43.483

我想与所有正在寻找类似问题的人分享这个答案。在花了几个小时寻找根本原因之后，我终于在没有更改任何代码的情况下发现了该`Network Error (tcp_error) A communication error occurred: "Operation timed out"`错误**`disappeared when i ran my script on another machine`**，因此**`the issue was with either my machine or my internet speed`**我真的不知道。无论如何，错误可能不仅仅在代码中被发现。

# function - Actionscript 3：函数变量中的类构造函数？

> ID：15327836
> 
> 赞同：1
> 
> 时间：2013-03-10T21:25:26.150
> 
> 标签：function, variables, actionscript, constructor

我想让一个变量保存一个类构造函数，但它给出了这个错误：

```
var myFunction:Function
function someFunction() {}

myFunction = someFunction //works
myFunction = MovieClip    //doesn't work - 1067: Implicit coercion of a value of type Class to an unrelated type Function. 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T21:47:24.477

举行班级的正确类型是[`Class`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Class.html)，不是`Function`。

```
var myClass:Class = MovieClip; 
```

# javascript - 我想改变这个跨度类的显示属性

> ID：15327843
> 
> 赞同：-4
> 
> 时间：2013-03-10T21:26:18.423
> 
> 标签：javascript, css

当我将鼠标悬停在跨度类上时，我想更改此工具提示的显示属性**这**

是用户将**悬停的****跨度**

 **```
<span class="video-title"></span> 
```

这是将显示的工具提示

```
<span class="toolTip">Top 10 Latest</span> 
```

这是**css风格**

```
.toolTip{
    position:absolute;
    top:-34px;
    left:47px;
    z-index:100;
    display:none;
    padding:5px 6px 5px 6px;
    -webkit-border-radius:4px;
    -moz-border-radius:4px;
    border-radius:4px;
    background-color:#000;
    text-align:center;
    text-decoration:none;
    text-shadow:black 0 1px 0;
    white-space:nowrap;
    font-style:normal;
    font-size:11px;
    font-family:Helvetica,Arial,sans-serif;
    line-height:1
} 
```

**问题是哪个最适合显示更改？Javascript 或 Css
，我将如何做到这一点？** 
干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T22:04:23.683

你可以很容易地在 CSS 中做到这一点。如果将工具提示`span`放在视频标题`span`中，则可以将其设置为`display:none`并更改为`display: block`视频标题悬停时。

```
<span class="video-title">
    Title text here
    <span class="tooltip">Tooltip text here</span>
</span>

.video-title {position: relative}
.tooltip {display: none;}
.video-title:hover .tooltip {display: block; position: absolute;} 
```

显然，您会在其中添加自己的样式和定位。理想情况下，工具提示应绝对定位，以免干扰页面布局。将其设置为父级以`position: relative`确保工具提示相对于其父级在页面上的位置进行定位。**

# ruby-on-rails - Before_destroy 过滤器现在调用给定的方法

> ID：15327846
> 
> 赞同：0
> 
> 时间：2013-03-10T21:26:27.853
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我的用户每个人都分配了一个组。如果管理员删除了他们所在的组，我需要将它们移至无法删除的最基本的组“成员”。

现在我知道该方法有效并且路由和控制器但是因为起初我按顺序从控制器调用方法 moveUsers：

```
user = User.find(id)  
user.moveUsers
user.delete 
```

但是，我想将其分开并保持控制器的简约，即：Rails3 方式？

控制器方法：

```
 def destroy
    group = Group.find(params[:id])

    if group.delete
      redirect_to groups_url, :notice => "Group deleted."
    else
      redirect_to :back, :notice => "Cannot delete group."
    end

  end 
```

模型：

```
class Group < ActiveRecord::Base
    before_destroy :moveUsers

    validates :title, :presence => :true, :uniqueness => true
    has_many :user

    # Get the number of users associated with the group & title
    def getUserCount
        return User.where(:group_id => self.id).length
    end

    # If group is deleted move all of its users
    # to core group: Members (id = 1)
    private
    def moveUsers
        users = User.where(:group_id => self.id)

        users.each do |user|
            user.group_id = 1
            user.save
        end
    end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T21:30:18.953

删除方法忽略回调方法

您需要使用 group.destroy 来触发 before_destroy 回调

[http://guides.rubyonrails.org/active_record_validations_callbacks.html#skipping-callbacks](http://guides.rubyonrails.org/active_record_validations_callbacks.html#skipping-callbacks)

# c# - 创建连接字符串的性能

> ID：15327859
> 
> 赞同：7
> 
> 时间：2013-03-10T21:27:16.263
> 
> 标签：c#, string, performance

哪种创建字符串的方式在运行时效率更高`C#`

**1号：**

```
bool value = true;
int channel = 1;
String s = String.Format(":Channel{0}:Display {1}", channel, value ? "ON" : "OFF"); 
```

**2号：**

```
bool value = true;
String channel = "1";
string  s = ":Channel" + channel + ":Display " + value ? "ON" : "OFF"; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T22:03:57.840

我现在要添加一个示例来说明编译器如何处理这两者，因为在其他一些答案中似乎存在***很多***混淆（编辑：请注意，这些混淆中的大部分现在已被删除/编辑掉） ：

```
bool value = true;
int channel = 1;
String s = String.Format(":Channel{0}:Display {1}", channel,
    value ? "ON" : "OFF"); 
```

最后一行编译为：

```
String s = String.Format(":Channel{0}:Display {1}",
    new object[2] {(object)channel, value ? "ON" : "OFF")}; 
```

有趣的是，创建了一个数组和一个“盒子” ，当然还有查找/`int channel`所需的额外解析。`{0}``{1}`

现在2号：

```
bool value = true;
String channel = "1";
string  s = ":Channel" + channel + ":Display " + (value ? "ON" : "OFF"); 
```

最后一行编译为：

```
string s = string.Concat(":Channel", channel, ":Display ", value ? "ON" : "OFF"); 
```

这里没有数组，没有盒子（`channel`现在是一个字符串），也没有解析。过载是[`public static string string.Concat(string,string,string,string)`](http://msdn.microsoft.com/en-gb/library/0eafbze3.aspx); `string.Concat`非常有效地实现，预先分配一个正确大小的字符串然后覆盖，等等。

在大多数代码中，两者都可以。第二个版本在技术上更有效（没有盒子，没有数组，没有解析），但是如果你以后想国际化，那就是一个主要的痛苦。在大多数应用程序中，您不会注意到两者之间有任何区别。解析速度很快，并且盒子/数组作为 gen-zero 对象被廉价地收集。但便宜不是免费的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-10T21:43:15.337

这可以帮助您自己测试。这是使用 .net v4.0.30319 运行时执行的。

```
sw = new System.Diagnostics.Stopwatch();

// Number 1
bool value = true;
int channel = 1;
sw.Start();
for (int i = 0; i <= 100000; i++)
{
    String s = String.Format(":Channel{0}:Display {1}", channel, value ? "ON" : "OFF");
}
sw.Stop();

sw.Reset();

// Number 2
sw.Start();
for (int i = 0; i <= 100000; i++)
{
    string s = "Channel" + channel + ":Display " + (value ? "ON" : "OFF");
}
sw.Stop(); 
```

我的结果是：

> **数字 1：136 毫秒**
> 
> **数字 2：91 毫秒**

所以第二个选项有更好的性能。第一个选项使用额外的方法调用 ( `string.Format()`) 和替换参数（正如 Marc 所说）的事实是不同的。

如果我不使用 100.000 次迭代，而是使用 1.000.000，这就是我得到的

> **1号：1308ms**
> 
> **2号：923ms**

基本上，同样的结论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-28T14:18:55.377

关于 Marc Gravell 的回答：您可以通过传递 channel.ToString() 来避免装箱操作。我已经根据经验验证了这对#1 和#2 都有轻微的性能改进。

*   在案例 #1 中，您避免了装箱操作。
*   在情况 #2 中，您避免调用隐式转换运算符。

但是在试图反驳你的理论之后，（使用更长的连接和随机字符串）我必须承认 #2 比 #1 快。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-03-10T21:47:36.430

1号是最有效的。

String.Format() 函数在内部使用 System.Text.StringBuilder 类型来连接字符串。

StringBuilder 用于表示可变（又名可编辑）字符串，它是连接字符串的最有效方式。[http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx)。

# python - 确保 parsedatetime 不会解析无效的日期/时间字符串

> ID：15327861
> 
> 赞同：1
> 
> 时间：2013-03-10T21:27:26.203
> 
> 标签：python, parsing, date, time

在 Ubuntu 12.04 上的 Python 2.7 上使用 Bear 的 parsedatetime 库。当传入一个包含字符但没有有效日期（或时间）的字符串时，parse() 函数有时会返回一个有效的日期/时间。

提交第 48 期后，看起来 parsedatetime 真的不想要一个没有日期/时间的字符串。

那么，关于预处理器确定字符串是否包含有效日期的布尔值的想法？

参考链接： [https ://github.com/bear/parsedatetime/](https://github.com/bear/parsedatetime/) [https://code.google.com/p/parsedatetime/issues/detail?id=48](https://code.google.com/p/parsedatetime/issues/detail?id=48)

注意：在第 48 期中，我不恰当地调用了 parseDateText()。我已经确认 parse() 存在相同的操作。

非常感谢任何帮助。

编辑：示例代码。

```
Python 2.7.3 (default, Apr 20 2012, 22:39:59)
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import parsedatetime as pdt
>>> c = pdt.Constants()
>>> c.BirthdayEpoc = 80
>>> p = pdt.Calendar(c)
>>> print p.parse("Mary had a little lamb.")
((2014, 3, 1, 20, 53, 56, 6, 69, 1), 1)
>>> print p.parse("foo bar")
(time.struct_time(tm_year=2013, tm_mon=3, tm_mday=10, tm_hour=20, tm_min=54, tm_sec=6, tm_wday=6, tm_yday=69, tm_isdst=1), 0)
>>> print p.parse("March 12th, 2013")
((2013, 3, 12, 20, 54, 34, 6, 69, 1), 1)
>>> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T01:15:15.530

正如 JF 所提到的，正确调用使用的是 parse() 方法。parse 方法还具有返回包含两项的元组的值：一项是确定的日期/时间值，另一个是显示是否找到任何日期/时间值的标志...

以下是返回标志值的细分：

*   0 = 根本不解析
*   1 = 解析为日期
*   2 = 解析为时间
*   3 = 解析为日期时间

如果您从测试中得到的不是 0，那么您发现了一个错误：/

# jquery-ui - 使用 json 的 JQUERYUI 自动完成功能不起作用

> ID：15327863
> 
> 赞同：0
> 
> 时间：2013-03-10T21:27:50.967
> 
> 标签：jquery-ui, autocomplete

我使用 jqueryui 有以下代码，在自动完成框中我看到了列表，但它没有显示内容。该列表的高度为 0。

数据是一个 json，我可以在绑定之前看到数据。不知道我在这里缺少什么。

```
 $("#Stock").autocomplete({
             dataType: "json",
             source: data,
             autoFill: true,
             minLength: 1,

             position: { my: "left to[", at: "left bottom", collision: "none" },
             select: function (event, ui) {
                 alert(ui.item.Symbol)
             },

             open: function (e, ui) {
                 console.log($(".ui-autocomplete li").size());
             },
             search: function (e, ui) {
                 console.log("search returned: " + $(".ui-autocomplete li").size());

             },
             close: function (e, ui) {
                 console.log("on close" + $(".ui-autocomplete li").size());
                 $("#Stock").val("");
             }

         }); 
```

我已经添加了我在这里面临的问题..任何帮助都非常感谢..

[http://jsfiddle.net/BJGLf/](http://jsfiddle.net/BJGLf/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T21:40:42.413

目前您正在通过`[{Symbol: 'value'}]`并且自动完成功能正在等待`['value','value']`或`[{ label: 'label', value: 'value' }, { label: 'label2', value: 'value2' }]`. 有关源格式，请参阅[API](http://api.jqueryui.com/autocomplete/#option-source)。

# adfs2.0 - Adfs 2.0 - . Net 4.0 应用程序查询参数

> ID：15327864
> 
> 赞同：0
> 
> 时间：2013-03-10T21:27:59.487
> 
> 标签：adfs2.0, adfs

我有一个联合到 ADFS 2.0 服务器的 .net 4.0 MVC 4 应用程序。我使用“添加 STS 参考”选项进行了设置。现在，每次我点击带有 [authorize] 属性的控制器时，它都会将我带到 adfs 登录页面（第一次）。我的问题是

1.  如何在我的应用程序中为 adfs 标记额外的查询参数
2.  如何在 adfs 中读取这些查询参数，以便我可以根据调用它的依赖方设置表单登录页面的样式。

我希望这是有道理的。如果不是，请告诉我，以便我更好地解释

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T13:08:10.803

回答 2：您可以请求 Server.RawUrl 并从中提取“returnUrl”（浏览器在登录后重定向的位置）或 RelyingParty。根据 URL 中的值，您可以施展魔法......

# c++ - '*' 标记之前的预期构造函数、析构函数或类型转换

> ID：15327865
> 
> 赞同：0
> 
> 时间：2013-03-10T21:28:07.710
> 
> 标签：c++, inner-classes

编译器说

```
error: expected constructor, destructor, or type conversion before ‘*’ token" 
```

并指向 .cpp 中的这一行：

```
Node * Tree::buildTree(Node *myNode, int h) { 
```

我猜这可能是关于`typedef`但不是很确定。问题可能是什么？

.h 文件：

```
#ifndef TREE_H
#define TREE_H

class Tree {
    public:
    Tree();
    Tree(Tree const & other);
    ~Tree();
    Tree const & operator=(Tree const & other);

    private:
    class Node {
        public:
        Node() {
            data = 0;
        };
        Node(Node const & other) {
            _copy(other);
        };
        ~Node() {};
        Node const & operator=(Node const & other) {
            if (this != &other) 
                _copy(other);
            return *this;
        };

        Node *left;
        Node *right;
        int data;

        private:
        void _copy(Node const & other) {
            data = other.data;
            left = other.left;
            right = other.right;
        };
    };

    Node *root;

    Node * buildTree(Node *myNode, int h);
}; 
```

.cpp 文件：

```
...

Node * Tree::buildTree(Node *myNode, int h) {
    if (h == 0)
        return NULL;
    myNode = new Node();
    myNode->left = buildTree(myNode->left, h - 1);
    myNode->right = buildTree(myNode->right, h - 1);
    return myNode;
}

... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T21:38:47.307

`Node`在内部声明`Tree`，所以你需要

```
Tree::Node * Tree::buildTree(Node *myNode, int h) 
```

# visual-studio-2012 - 多项目解决方案模板

> ID：15327866
> 
> 赞同：5
> 
> 时间：2013-03-10T21:28:08.333
> 
> 标签：visual-studio-2012, visual-studio-extensions, vsix, project-template, multi-project

我正在创建具有 Web 应用程序、桌面、少数类库和单元测试项目的多项目解决方案模板。

我构建了基本容器并将其打包为 VSIX 容器。当我安装 VSIX 容器时，我可以将我的解决方案模板的 .zip 文件放在以下物理路径中

%AppData%\Local\Microsoft\VisualStudio\11.0\Extensions\tbxs0hui.w2e\ProjectTemplates\CSharp\1033\myprojecttemplate.zip，所以一切都很好。

但是当我启动 Visual Studio 2012 时，我无法在 New Project -> Visual C# 下看到我的解决方案模板。

我什么时候出错了？有什么建议么？

这是 Multisolution RootTemplate.vstemplate 内容：

```
<?xml version="1.0" encoding="utf-8"?>
<VSTemplate Version="3.0.0" Type="ProjectGroup" xmlns="http://schemas.microsoft.com/developer/vstemplate/2005" xmlns:sdk="http://schemas.microsoft.com/developer/vstemplate-sdkextension/2010">
<TemplateData>
<Name>MultiProject</Name>
<Description>MultiProject</Description>
<Icon>MultiProject.ico</Icon>
<ProjectType>CSharp</ProjectType>
<RequiredFrameworkVersion>2.0</RequiredFrameworkVersion>
<SortOrder>1000</SortOrder>
<TemplateID>bbd7217a-8572-4edc-80ce-488cb9a347df</TemplateID>
<CreateNewFolder>true</CreateNewFolder>
<DefaultName>MultiProject</DefaultName>
<ProvideDefaultName>true</ProvideDefaultName>
</TemplateData>
<TemplateContent>    
<ProjectCollection>
<SolutionFolder Name="FolderName1">
  <SolutionFolder Name="FolderName2">
    <ProjectTemplateLink ProjectName="xxxxx">Children\Application1\Application1.vstemplate</ProjectTemplateLink>
    <ProjectTemplateLink ProjectName="yyyy">Children\Application1\Application2.vstemplate</ProjectTemplateLink>        
  </SolutionFolder>
  <SolutionFolder Name="Folder3">
    <ProjectTemplateLink ProjectName="zzzzzz">Children\Application3\Application3.vstemplate</ProjectTemplateLink>
  </SolutionFolder>
  <SolutionFolder Name="Web">
    <ProjectTemplateLink ProjectName="Web">Children\Web\Web.vstemplate</ProjectTemplateLink>
  </SolutionFolder>
</SolutionFolder>    
<SolutionFolder Name="Tests">      
    <ProjectTemplateLink ProjectName="xxxxxTest">Children\ApplicationxxxxUnitTest\ApplicationxxxxUnitTest.vstemplate</ProjectTemplateLink>
<ProjectTemplateLink ProjectName="yyyyyTest">Children\ApplicationyyyyUnitTest\ApplicationyyyyUnitTest.vstemplate</ProjectTemplateLink>
<ProjectTemplateLink ProjectName="zzzzzTest">Children\ApplicationzzzzUnitTest\ApplicationzzzzUnitTest.vstemplate</ProjectTemplateLink>
<ProjectTemplateLink ProjectName="WebTest">Children\ApplicationWebUnitTest\ApplicationWebUnitTest.vstemplate</ProjectTemplateLink>
</SolutionFolder>   
</ProjectCollection>
</TemplateContent>
</VSTemplate> 
```

安装VSIX后，我可以在VS2012中看到一个名为“MultiProject”的新项目。当我创建一个新项目时，四个测试项目没有在Tests文件夹下创建。我尝试用vstemplate中Tests文件夹下的类库替换它们，它工作正常，只有具有 ProjectTypeGuid {3AC096D0-A1C2-E12C-1390-A8335801FDAB};{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC} 的单元测试项目不会在测试文件夹下创建。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T08:01:18.783

我有同样的问题，

你是如何创建模板的？有两种创建模板的方法：

1.  文件 --> 导出模板.. 如果你这样做，将**无法**在 VS2012 中使用 VSIX 包
2.  使用 C# 项目模板直接创建您的模板（在可扩展性下）

第二种方法对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T13:10:00.337

尝试运行`devenv /setup`，以便 Visual Studio 识别您已在其中放置了一个新模板。

无论如何，对于自定义模板，我宁愿建议您将 .zip 文件放入

> %DOCUMENTS%\Visual Studio 2012\Templates\ProjectTemplates\Visual C#

因为 VS 本身从这里获取模板，所以您不必显式运行 devenv /setup。

# simple.data - Simple.Data 插入对象 - 列表初始化程序必须至少包含一个初始化程序

> ID：15327867
> 
> 赞同：1
> 
> 时间：2013-03-10T21:28:13.433
> 
> 标签：simple.data

当我运行以下代码时：

```
 var db = Database.Open();
        var contact = new Contact() {FirstName = "Mark", LastName = "Rendle"} ;
        db.Contacts.Insert(contact); 
```

我收到一个错误：

*列表初始化器必须至少包含一个初始化器*

堆栈跟踪：在 System.Linq.Expressions.Expression.ListInit(NewExpression newExpression, IEnumerable `1 initializers) at Simple.Data.Extensions.ObjectEx.MakeToDictionaryFunc(Type type) at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func `2 valueFactory) at Simple.Data.Extensions.ObjectEx.ObjectToDictionary(Object obj) at Simple.Data.Commands.InsertCommand.InsertEntity(Object entity, DataStrategy dataStrategy, String tableName, ErrorCallback onError, Boolean resultRequired) at Simple.Data.Commands.InsertCommand.DoInsert(InvokeMemberBinder binder, Object[] args, DataStrategy dataStrategy, String tableName) at Simple.Data.Commands.InsertCommand.Execute(DataStrategy dataStrategy, DynamicTable table, InvokeMemberBinder binder, Object[] args) at Simple.Data.DynamicTable.TryInvokeMember(InvokeMemberBinder binder, Object[] args, Object& result) at Simple.Data.ObjectReference.TryInvokeMember(InvokeMemberBinder binder, Object[] args, Object& result) at CallSite.Target(Closure , CallSite , Object , Object ) at System.Dynamic.UpdateDelegates.UpdateAndExecuteVoid2[T0,T1](CallSite site, T0 arg0, T1 arg1) at ProjectXBaseDataImporter.DataSaver.PersistContacts(IEnumerable`1 contactsx) 在 c:\Code\XXX\ProjectXBaseDataImporter\ProjectXBaseDataImporter\CSVImporter.cs：ProjectXBaseDataImporter 的第 54 行。 c:\Code\XXX\ProjectXBaseDataImporter\ProjectXBaseDataImporter\CSVImporter.cs 中的 DataImporter.Import[T](String filePath)：c:\Code\XXX\ProjectXBaseDataImporter\ProjectXBaseDataImporter\CSVImporter_Test 中 ProjectXBaseDataImporter.DataImporter_Test.Import() 的第 77 行。 CS：第 32 行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T00:36:01.040

我的错误。

我正在使用的另一个库要求类具有与属性相反的字段。
我正在针对字段而不是属性进行编码。

# javascript - 平滑滚动到顶部并隐藏 点击后

> ID：15327869
> 
> 赞同：0
> 
> 时间：2013-03-10T21:28:19.530
> 
> 标签：javascript, jquery

因此，当您单击“返回顶部”箭头时，它可以完美地工作，它隐藏了菜单，但除此之外，我只希望它在单击时平滑滚动到页面顶部。[您可以在http://rac.site44.com](http://rac.site44.com)上测试我目前拥有的内容，只需重新调整宽度，以便您处于移动视图（其响应式）中，然后单击右上角的“菜单”图标以查看箭头。

这是HTML

```
<div class="col_4 no-padding">
  <a href="/">
    <img class="logo" src="img/clear.gif" alt="RAC-Engineering - Structural Engineer Buffalo NY">
  </a>
  <a class="nav-toggle"><span class="mobile-nav-toggle mobile-only"></span></a>
  <a class="nav-toggle2 hidden"><span class="mobile-nav-toggle mobile-only"></span></a>
</div>
<div class="col_8 no-padding last">
  <nav id="nav" class="nav mobile-hide">
    <ul>
      <li><a href="#" class="active">Projects</a></li>
      <li><a href="#">About</a></li>
      <li><a href="#">Contact</a></li>
      <li><a href="#">Links</a></li>
      <li><a href="#">Estimate</a></li>
      <li class="top mobile-only"><a href="#"></a></li>
    </ul>
  </nav>
</div> 
```

和 JS ：（显然我假设你只需要一行代码告诉它在之后滚动到顶部，`$("li.top").click(function(e) {`但我似乎无法弄清楚）

```
$(function() {
  $("li.top").click(function(e) {
    $("#nav").addClass('mobile-hide');
    $(".nav-toggle").removeClass('hidden');
    $(".nav-toggle2").addClass('hidden');
    e.preventDefault();
  });
}); 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T21:45:12.510

我刚刚在您的网站上对此进行了测试：

```
$("html, body").animate({ scrollTop: "0px" }); 
```

你可以在这里阅读：http `.animate()`: [//api.jquery.com/animate/](http://api.jquery.com/animate/)

# html - 如何将html div放在页面中，以便页面上没有空间

> ID：15327873
> 
> 赞同：0
> 
> 时间：2013-03-10T21:28:51.093
> 
> 标签：html, web, spacing

我正在创建一个 html 页面，其中 body 由多个 div 框组成。每个盒子都有下面给出的样式，宽度是固定的，400px 是我屏幕的 1/3，但高度不固定。所以我的屏幕可以水平容纳三个这样的盒子。我还使用了 float : left ，这样如果有一些空间，盒子总是在右边填充空间。但它仍然不能满足我想要的。

我正在使用 php 脚本动态创建 div 框。当最右边的 div 框说 B 比最左边的 div 框说 A 在同一行中的高度大时，那么包含的下一个 div 说 C 进入 A 的底部，其顶层低于 B 的底层，所以一个巨大的A和C之间留有空间。那么如何删除该空间？

我应该使用什么 css 以便所有 div 相应地放置它们，以便页面上没有空间。

```
.respost {
    margin-left: 10px;;
    width: 400px;
    float: left;
    border-bottom: solid blue;
    border-top: solid blue;
    border-left: solid blue;
    border-right: solid blue;
    margin-top: 30px;
    word-wrap: break-word;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T21:44:31.820

目前，有几种方法可以做到这一点。首先，您可以在 HTML 中使用单独的列。这可能很尴尬，因为您只想附加 div，就像使用 for 循环一样。

在该场景中，您将在 html 中包含三列，如下所示：

```
<div class="column_wrapper">
  <div class="column column1">
    ...
  </div>
  <div class="column column2">
    ...
  </div>
  <div class="column column3">
    ...
  </div>
</div> 
```

那么column1、2、3的css可以是：

```
.column {
    width: 400px;
    float: left;
} 
```

您可以在 PHP 中将转发附加到其中一列：

```
$count = 0;
$columns = array(0=> [], 1=> [], 2=> []);
foreach ($items as $item) {
    $columns[$count++ % 3][] = $item;
} 
```

如果您不介意将 jQuery 添加到页面，更好的选择是使用[jQuery Masonry](http://masonry.desandro.com/)。

# ruby-on-rails-3.2 - 带有 wicked_pdf 的 Rails 3 - 生成 pdf 并在浏览器中显示它可以工作，但只创建一个文件不会

> ID：15327880
> 
> 赞同：0
> 
> 时间：2013-03-10T21:29:22.230
> 
> 标签：ruby-on-rails-3.2, wicked-pdf

我可以创建 PDF 并在浏览器中查看。我什至可以在发生这种情况时制作文件。

在我正在使用的渲染调用中

```
render :template  => 'admin/idreport.pdf.erb',
       :pdf => "ID.pdf",
       :save_to_file => Rails.root.join('../Documents', "ID.pdf") 
```

当我尝试添加问题时

```
 :save_only    => true 
```

一旦我这样做，我就会收到这个错误

模板丢失

缺少模板 admin/index、application/index with {:locale=>[:en], :formats=>[:pdf], :handlers=>[:erb, :builder, :coffee]}。在以下位置搜索：*“/home/rails2/rails/foodshelf/app/views”

看起来它想要一个不同的管理员/索引，但没有 save_only 就没有错误。

任何帮助将不胜感激..这在 Rails 2 中要容易得多：>

不确定是否需要，但这里是 idreport.pdf.erb

```
<h3 style="text-align:center">Oxford Ecumenical Food Shelf ID Report</h3>
<%= wicked_pdf_stylesheet_link_tag 'application' %>
<table>
   <tr><td>   </td></tr>
   <%= render :partial=>"id_report.erb", :collection => @id %>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T02:05:14.827

当您指定 :save_only 时，渲染结果不会发送到客户端，因此 rails 会尝试查找与您的操作名称匹配的模板。也许您应该在保存 pdf 后重定向到另一个页面？还是发给客户？

# java - 将序列化数据从android发送到java

> ID：15327881
> 
> 赞同：0
> 
> 时间：2013-03-10T21:29:26.987
> 
> 标签：java, android, serialization, xml-serialization, xmlserializer

我想将类变量从 android 设备发送到服务器。

在我的服务器 java 程序中接收带有套接字连接的请求

我想使用 xml 序列化程序。我找不到任何同时支持 java 平台 jre 和 android 的 xml 序列化程序。

我可以在 android 和 java 中使用不同的 xml 序列化程序库。但我担心两个不同的序列化程序库无法读取彼此的序列化数据。

只是我想在android中序列化类，并通过tcp连接发送到服务器应用程序java，然后将接收到的数据反序列化到java中的类。

我可以在 android 和 java 中使用哪些库？或者任何其他方式将数据从 android 发送到 java 应用程序？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:34:09.653

查看： http: [//www.jsoup.org/](http://www.jsoup.org/) 您也可以尝试： [http ://www.ibm.com/developerworks/opensource/library/x-android/index.html#list11](http://www.ibm.com/developerworks/opensource/library/x-android/index.html#list11)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T21:32:30.397

我成功使用了[google 协议缓冲区库](https://code.google.com/p/protobuf/)。它有一个编译器，可以为包括 java 和 python 在内的多种语言生成代码，他们声称它比 xml / json 序列化更快。我最近阅读了一篇文章，建议在 android 中使用[j2me 实现](https://code.google.com/p/protobuf-javame/)，因为它减小了大小。

# excel - 将列添加到excel中的数据透视表

> ID：15327884
> 
> 赞同：0
> 
> 时间：2013-03-10T21:29:51.103
> 
> 标签：excel

如果我的问题含糊不清或之前被问过，我深表歉意。我在电子表格中有下表

```
地区 下一个服务日期 持续时间类型 持续时间 频率
纽约 2013 年 12 月 4 日 第一年

```

电子表格有 4 列，我想做的是创建一个数据透视表，并以某种方式在数据透视表上投影未来 24 个月的服务持续时间，因此输出如下所示

> 单元序列号列标签计数持续 3 月 13 日 24 个月...
> 纽约地区 服务计数

基本上，我需要在不编辑数据透视表的数据源选项卡的情况下显示未来 24 个月的服务计数。

据我所知，您不能将列添加到数据透视表。

如果有人告诉我如何根据持续时间和持续时间频率将列添加到数据透视表，那将是一个很好的起点。

感谢大家的反馈，对格式错误的表格表示歉意

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:11:21.647

使用这个公式

在 Sheet2 的单元格 A1 中

```
=Sheet1!A1 
```

根据需要复制和粘贴，您现在拥有数据表的副本，“无需编辑数据源”。

在 Sheet2 上为投影信息创建公式，并使用 Sheet2 作为数据透视表的源。

请注意，许多公式可能会使 Excel 陷入困境，因此如果可能的话，我会将您的投影信息公式放在 datsource 选项卡（Sheet1）上并隐藏它们。隐藏时，您仍然可以在数据透视表中使用它们。

# c# - 我得到：调用的目标抛出了异常

> ID：15327885
> 
> 赞同：2
> 
> 时间：2013-03-10T21:29:51.580
> 
> 标签：c#, iis, handler

当我尝试打开我的页面时出现异常：

> *发生未处理的异常，进程终止。*
> 
> 应用程序 ID：/LM/W3SVC/6/ROOT/ROXY/es
> 
> 进程 ID：2972
> 
> 异常：System.InvalidOperationException
> 
> 消息：句柄未初始化。
> 
> StackTrace：
> 在 System.WeakReference.set_Target(Object value)
> 在 System.Data.ProviderBase.DbConnectionInternal.CloseConnection(DbConnection owningObject, DbConnectionFactory connectionFactory)
> 在 System.Data.Odbc.OdbcConnection.Close()
> 在 DsNet.CUIHandler.CloseConn()
> 在DsNet.CUIHandler.Finalize()

在页面中我收到错误：

> *消息：调用的目标已引发异常。*

任何的想法？

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T21:37:12.637

页面中的错误听起来无关紧要，应该通过捕获并记录它来进行调查。如果您最终捕获了*，*`TargetInvocationException`那么您可以通过.*`.InnerException`*

 *关于另一个问题：什么是 DsNet？那是你的代码吗？还是您正在使用的图书馆？无论哪种方式，听起来它在终结器中有一个错误（在终结器中触摸托管对象是一个*非常*糟糕的主意）。我希望您可以通过使用`using`DsNet 来减少这种脾气暴躁，这样它就可以在常规代码中*处理*，而不是在 GC 扫描中*最终确定。*我在谷歌获得的唯一“命中”`DsNet.CUIHandler`是*这个问题*- 所以我*猜*那是你的代码。如果是这样：不要接触终结器中的其他托管对象。*

# sql - SQL 如何定位字符串的特定部分

> ID：15327890
> 
> 赞同：2
> 
> 时间：2013-03-10T21:30:07.757
> 
> 标签：sql, sql-like

我有一个 varchar(11) 表，它的所有条目看起来都像这样。

```
Table
123456-7890
101112-1314 
```

我需要找到所有有

```
??12??-???? 
```

（？作为任何角色）我该怎么做？

编辑：谢谢账单！！

```
SELECT * FROM myTable WHERE myfield LIKE '__12%' 
```

是我要找的:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T21:32:25.677

```
WHERE YourColumn LIKE '__12__-____' 
```

意思是“`_`匹配任何单个字符”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T21:35:24.510

假设您使用的是 ANSI SQL，您正在寻找的是 '_'：

```
SELECT * FROM myTable WHERE myField LIKE '__12__-____' 
```

对于大多数 Microsoft 产品，您使用的问号是正确的。

# python - ValueError：无法配置过滤器'require_debug_false'：无法解析'django.utils.log.RequireDebugFalse'：没有名为RequireDebugFalse的模块

> ID：15327894
> 
> 赞同：4
> 
> 时间：2013-03-10T21:30:33.713
> 
> 标签：python, mysql, database, django

我正在尝试将 MySQL 数据库连接到 Django。我看过很多表格，但我无法解决我的问题。以下是我做的时候得到的`python manage.py syncdb`：

```
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
execute_from_command_line(sys.argv)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py", line 429, in execute_from_command_line
utility.execute()
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py", line 379, in execute
self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py", line 252, in fetch_command
app_name = get_commands()[subcommand]
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py", line 101, in get_commands
apps = settings.INSTALLED_APPS
  File "/usr/local/lib/python2.7/dist-packages/django/utils/functional.py", line 276, in __getattr__
self._setup()
  File "/usr/local/lib/python2.7/dist-packages/django/conf/__init__.py", line 42, in _setup
self._wrapped = Settings(settings_module)
  File "/usr/local/lib/python2.7/dist-packages/django/conf/__init__.py", line 139, in __init__
logging_config_func(self.LOGGING)
  File "/usr/lib/python2.7/logging/config.py", line 777, in dictConfig
dictConfigClass(config).configure()
  File "/usr/lib/python2.7/logging/config.py", line 562, in configure
'filter %r: %s' % (name, e))
  ValueError: Unable to configure filter 'require_debug_false': Cannot resolve 'django.utils.log.RequireDebugFalse': No module named RequireDebugFalse 
```

我在 Ubuntu 上使用 virtualenv。

记录信息 ::

```
 LOGGING = {
   'version': 1,
   'disable_existing_loggers': False,
   'filters': {
    'require_debug_false': {
        '()': 'django.utils.log.RequireDebugFalse'
    }
},
'handlers': {
    'mail_admins': {
        'level': 'ERROR',
        'filters': ['require_debug_false'],
        'class': 'django.utils.log.AdminEmailHandler'
    }
},
'loggers': {
    'django.request': {
        'handlers': ['mail_admins'],
        'level': 'ERROR',
        'propagate': True,
    },
} 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T22:05:01.563

从回溯中可以清楚地看出，您*没有*使用安装在虚拟环境中的 Django 版本；它正在使用安装的版本`/usr/local/lib/python2.7/dist-packages/django/`。

该配置适用于 Django 1.4，但您使用的 Ubuntu 安装运行的是 Django 1.3 或更早版本。

您需要确保使用配置为在*没有*站点包的情况下运行的 virtualenv。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T12:52:45.787

我有同样的问题并在终端上用这个命令解决了

```
user@computer:~$ source /your_django_directory/bin/activate 
```

在你这样做之后，终端变成了这样

```
(your_django_directory)user@computer:~$ source /your_django_directory/bin/activate 
```

比再次尝试syncdb。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-05T19:25:30.413

在我的系统（Debian Wheezy）上，python-django 包安装了“/usr/bin/django-admin”。

请注意名称中缺少“.py”。要从 virtualenv 运行 django-admin，要么给出完整路径，要么给出以 .py 结尾的名称（django-admin.py）。或两者。

```
(TRIAL)bjb@bjb-pc:~/projects/python/django$ which django-admin
/usr/bin/django-admin
(TRIAL)bjb@bjb-pc:~/projects/python/django$ which django-admin.py
/usr/local/pythonenv/TRIAL/bin/django-admin.py
(TRIAL)bjb@bjb-pc:~/projects/python/django$ echo $PATH
/usr/local/pythonenv/TRIAL/bin:/home/bjb/bin:/usr/bin/mh:/bin:/usr/bin:/usr/local/bin:/usr/games:/opt/arm-2009q1/bin 
```

因此，尽管 virtualenv bin 目录具有优先权，但由于 bin 中没有“django-admin”文件，因此 /usr/bin/django-admin 会被选中。

关键是，如果您的项目是使用错误的 django-admin 创建的，那么当您尝试 syncdb 或执行其他使用 virtualenv 中的可执行文件的操作时，您将遇到此错误——就像我刚才发生的那样。

# php - 使用 cURL、PHP 进行多线程图像下载

> ID：15327897
> 
> 赞同：2
> 
> 时间：2013-03-10T21:30:53.430
> 
> 标签：php, image, curl, download

我正在尝试使用 cURL 从具有多个连接的 URL 下载图像以加快该过程。

这是我的代码：

```
function multiRequest($data, $options = array()) {

// array of curl handles
$curly = array();
// data to be returned
$result = array();

// multi handle
$mh = curl_multi_init();

// loop through $data and create curl handles
// then add them to the multi-handle
foreach ($data as $id => $d) {

    $path = 'image_'.$id.'.png';
    if(file_exists($path)) { unlink($path); }
    $fp = fopen($path, 'x');

    $url = $d;
    $curly[$id] = curl_init($url);
    curl_setopt($curly[$id], CURLOPT_HEADER, 0);
    curl_setopt($curly[$id], CURLOPT_FILE, $fp);

    fclose($fp);

    curl_multi_add_handle($mh, $curly[$id]);
}

// execute the handles
$running = null;
do {
    curl_multi_exec($mh, $running);
} while($running > 0);

// get content and remove handles
foreach($curly as $id => $c) {
    curl_multi_remove_handle($mh, $c);
}

// all done
curl_multi_close($mh);
} 
```

并执行：

```
$data = array(
    'http://example.com/img1.png',
    'http://example.com/img2.png',
    'http://example.com/img3.png'
);

$r = multiRequest($data); 
```

所以它并没有真正起作用。它创建了 3 个文件，但字节为零（空），并给我以下错误（3 次），它正在打印原始 .PNG 的某种内容：

```
Warning: curl_multi_exec(): CURLOPT_FILE resource has gone away, resetting to default in /Applications/MAMP/htdocs/test.php on line 34 
```

那么请问，你能告诉我如何解决吗？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:47:37.380

您正在做的是创建一个文件句柄，然后在循环结束之前将其关闭。这将导致 curl 没有任何文件可写入。尝试这样的事情：

```
//$fp = fopen($path, 'x'); Remove

$url = $d;
$curly[$id] = curl_init($url);
curl_setopt($curly[$id], CURLOPT_HEADER, 0);
curl_setopt($curly[$id], CURLOPT_FILE, fopen($path, 'x'));

//fclose($fp); Remove 
```

# html - 通过 HTML 表单传递对象的数组列表

> ID：15327901
> 
> 赞同：-1
> 
> 时间：2013-03-10T21:31:10.373
> 
> 标签：html, jsp, object, servlets, arraylist

所以我有一个 Java ArrayList < myObject > arr 我想使用 HTML 表单从 jsp 文件传递​​到 java servlet。传递它的语法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:49:44.207

只需使用 JSP 隐式对象应用程序、会话或请求将您的数组列表作为上下文、会话或请求的属性，然后在您的 servlet 中从您在 JSP 中使用的范围中获取属性，即如果您将其放入请求中然后在您的 servlet 中，您将键入`request.getAttribute("Your_Object_Name")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T21:34:54.693

传统上：

```
<input type="hidden" name="myObject" value="value_of_index_0">
<input type="hidden" name="myObject" value="value_of_index_1">
<input type="hidden" name="myObject" value="value_of_index_2">
<!-- etc --> 
```

或者，您可以序列化为 JSON 并将其作为单个隐藏输入的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T16:59:20.133

`enter code here`使用此方法将您的对象序列化为字符串：

```
private static String toString( Serializable o ) throws IOException {
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    ObjectOutputStream oos = new ObjectOutputStream( baos );
    oos.writeObject( o );
    oos.close();
    return new String( Base64Coder.encode( baos.toByteArray() ) );
} 
```

然后把这个字符串放在一个 inputHidden html 标记中，以便在 HTML 表单中传递。

现在在 Servlet 中，使用此方法将您的字符串反序列化为对象：

```
 private static Object fromString( String s ) throws IOException ,                                                       ClassNotFoundException {
    byte [] data = Base64Coder.decode( s );
    ObjectInputStream ois = new ObjectInputStream( 
                                    new ByteArrayInputStream(  data ) );
    Object o  = ois.readObject();
    ois.close();
    return o;
} 
```

# typo3 - TYPO3: Add meta header noindex from extension php code

> ID：15327905
> 
> 赞同：2
> 
> 时间：2013-03-10T21:31:12.230
> 
> 标签：typo3

TYPO3 vers. 4.5 Doing an extension. Based on a condition in my extension class I need to add a noindex header.

This should work - but does not:

```
header('X-Robots-Tag: noindex,nofollow'); 
```

How can I make TYPO3 accept custom headers?

BR. Anders

**UPDATE:** These lines work much just fine. Case closed:

```
// MAY BE DUBLICATE CONTENT - DO NOT LET GOOGLE INDEX
$GLOBALS['TSFE']->additionalHeaderData['tx_myext'] = '<meta name="robots" content="noindex, nofollow">'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:25:32.550

It just has to be added the TYPO3-way:

```
//print 'MAY BE DUBLICATE CONTENT - DO NOT LET GOOGLE INDEX';
$GLOBALS['TSFE']->additionalHeaderData['tx_myext'] = '<meta name="robots" content="noindex, nofollow">'; 
```

# html - 空白时如何不显示换行符？

> ID：15327906
> 
> 赞同：0
> 
> 时间：2013-03-10T21:31:16.537
> 
> 标签：html, ruby, ruby-on-rails-3, line-breaks

在我的 Ruby 应用程序中，我在视图中使用了以下代码：

```
<% if post.image.present? %>
  <%= image_tag post.image_url(:thumb).to_s %>
<% else %>
  <%= "" %>
<% end %> 
```

如果没有图像，则显示空白，可以正常工作。

问题是我不想显示换行符。而不是`<%= "" %>`，有什么我可以用来做的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T21:33:15.850

我会这样做。不要使用大量的`if`/`else`语句，而是使用 Ruby 单行代码，不要添加空字符串，如果它为 null，则不要添加任何内容：

```
<%= image_tag post.image_url(:thumb).to_s if post.image.present? %> 
```

注意：如果它仍在添加换行符，那很可能是您的 CSS 中的某些内容。这段代码的任何内容都不应该给你一个换行符。

# vector - Vector projection in game development

> ID：15327910
> 
> 赞同：1
> 
> 时间：2013-03-10T21:31:28.173
> 
> 标签：vector

Where would you use a vector projection in game development. I know that it projects one vector to another, but I don't know where would I use that.

Regards

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T22:59:08.643

Here are a few examples:

Vector projection is common in computer graphics, which many games depend on.

In 3D games, during the rendering process the renderer has access to the 3D coordinates of every vertex of every mesh in the game world. These vertices need to be mapped onto a 2D rectangle that's the same shape as your screen. A projection matrix coincidentally called the [Projection](http://www.glprogramming.com/red/chapter03.html#name3) [Matrix](http://msdn.microsoft.com/en-us/library/windows/desktop/ee418867%28v=vs.85%29.aspx) does this.

Sometimes projection matrices are used make objects [cast shadows](http://cg.informatik.uni-freiburg.de/course_notes/graphics_07_shadows.pdf) onto the surfaces of other objects.

Or suppose you're making a homing missile with a 60-degree field of view. You could say that the missile sees the world through a circular screen, and it loses track of its target if its target goes off the screen. You could use a projection matrix to map the 3D position of the target onto the homing missile's screen, and then decide whether the missile can see the target.

# r - R导入json并绘制时间序列

> ID：15327920
> 
> 赞同：0
> 
> 时间：2013-03-10T21:32:48.977
> 
> 标签：r, list, plot, time-series

我试图将 json 导入 R 并将其绘制为时间序列..

```
> json_file = "/Users/stpn/documents/statuses.json"
> json_data <- fromJSON(paste(readLines(json_file), collapse=""))
> json_data[1]
    $`2013-03-10 00:00:52 UTC`
    [1] 1 
```

我是 R 新手，所以有点不知道从这里去哪里。我只想用日期为 X 和数字为 Y 来绘制它。我想我需要先将此列表转换为其他内容，然后将字符串转换为日期。我知道我能做到

```
> strptime(names(json_data), format="%Y-%m-%d  %H:%M:%S") 
```

但不知道如何从这里到达情节..

此外，如果有一种方法可以将 UTC 转换为 ET，那就太好了

# objective-c - 我编写的版本的机器代码中出现错误

> ID：15327926
> 
> 赞同：0
> 
> 时间：2013-03-10T21:33:17.550
> 
> 标签：objective-c

[CFNumber release]：消息发送到已释放实例 0x1fdb96c0

在这个阶段我没有发布任何 NSNumber 对象，所以我不确定这还会从哪里来。任何帮助是极大的赞赏。

我知道没有太多信息可以继续，但我测试了这段代码，它有效，我今天回来了，现在它没有。我不记得改变了什么。如果有更多信息可能对您有所帮助，请告诉我。

## 僵尸的断点

希望这对如何解决这个问题有更多的了解。

```
0x33e4c446:  bl     0x33e1ffe8                ; __CFRecordAllocationEvent
0x33e4c44a:  mov    r0, r8
0x33e4c44c:  blx    0x33e88f8c                ; symbol stub for: -[__NSFileSecurity dealloc]
0x33e4c450:  movw   r1, #45522
0x33e4c454:  add.w  r2, r11, #10
0x33e4c458:  movt   r1, #2104
0x33e4c45c:  mov    r3, r0
0x33e4c45e:  add    r1, pc
0x33e4c460:  movs   r0, #3
0x33e4c462:  str    r5, [sp]
0x33e4c464:  bl     0x33e38318                ; CFLog
0x33e4c468:  trap   <--- ....break when zombies are enabled occurs here....
0x33e4c46a:  blx    0x33e89a4c                ; symbol stub for: -[NSOrderedSet intersectsSet:]
0x33e4c46e:  movs   r1, #9
0x33e4c470:  blx    0x33e89b1c                ; symbol stub for: __61-[NSOrderedSet sortedArrayFromRange:options:usingComparator:]_block_invoke_0
0x33e4c474:  movs   r0, #0
0x33e4c476:  b      0x33e4c684                ; ___forwarding___ + 732
0x33e4c478:  movw   r0, #52812
0x33e4c47c:  movt   r0, #2103
0x33e4c480:  add    r0, pc
0x33e4c482:  ldr    r6, [r0]
0x33e4c484:  mov    r0, r4
0x33e4c486:  mov    r1, r6
0x33e4c488:  blx    0x33e88d4c                ; symbol stub for: -[NSCache countLimit]
0x33e4c48c:  ldr.w  r10, [sp, #12]
0x33e4c490:  tst.w  r0, #255
0x33e4c494:  bne    0x33e4c4d2                ; ___forwarding___ + 298
0x33e4c496:  mov    r0, r4
0x33e4c498:  blx    0x33e88d2c                ; symbol stub for: __NSCheckReentrancy
0x33e4c49c:  mov    r6, r0
0x33e4c49e:  mov    r0, r5
0x33e4c4a0:  blx    0x33e88f4c                ; symbol stub for: -[NSMutableOrderedSet setObject:]
0x33e4c4a4:  mov    r4, r0
0x33e4c4a6:  cbnz   r6, 0x33e4c4bc            ; ___forwarding___ + 276
0x33e4c4a8:  mov    r0, r5
0x33e4c4aa:  blx    0x33e88f4c                ; symbol stub for: -[NSMutableOrderedSet setObject:] 
```

# ruby - 签署Ruby gem：生成gem时会删除gemspec中的s.signing_key吗？

> ID：15327934
> 
> 赞同：5
> 
> 时间：2013-03-10T21:34:09.850
> 
> 标签：ruby, gem

我想签署一个 Ruby gem，并按照[http://docs.rubygems.org/read/chapter/21](http://docs.rubygems.org/read/chapter/21)中的说明进行操作，上面 写着“隐藏你的私钥”。但是为了对 gem 进行签名，我们必须在 gemfile 中放入“s.signing_key = '/mnt/floppy/gem-private_key.pem'”。如果生成 gem 后没有删除该行，则每个人都可以在从 RubyGems.org 安装 gem 后看到它。（并不是说他们可以轻松访问我的计算机，但仍然如此。）生成 gem 时，该行会自动从 gemspec 中删除吗？

我通常通过 Bundler 的“rake release”来构建 gem。所以这次我尝试了“gem build mygem.gemspec”。但它导致了一些 OpenSSL 错误。所以我无法检查生成的宝石。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-26T18:55:24.543

不，`signing_key`不会删除 gemspec 中的条目。它将是公开的，因此人们将能够看到您的签名密钥的文件位置。

正如您所提到的，这并不意味着人们可以访问它，但如果他们可以访问您的系统，他们会知道它会在哪里。

[您可以使用gem unpack](http://docs.rubygems.org/read/chapter/10#page39)命令导出已安装 gem 的内容，从而准确检查 gemspec 中发布的内容以及 gem：

```
gem unpack GEMNAME 
```

希望这可以帮助！

# android - 在 FragmentTransaction.commit() 之后运行 FragmentTransaction.commit() 内部的 AsyncTask

> ID：15327946
> 
> 赞同：0
> 
> 时间：2013-03-10T21:35:16.447
> 
> 标签：android, android-asynctask, android-fragments

我`FragmentTransaction`在活动中有一个，我希望 AsyncTask 在之后的片段中运行`fragmentTransaction.commit()`。我该如何`AsyncTask`追赶`commit`？因为`AsyncTask`在提交之前和之后运行了 2 次。任何人都可以帮忙吗？

*注意：AsyncTask 使用我使用 FragmentTransaction 发送的活动字符串运行

活动 ：

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_menudisplay);
        Bundle extras = getIntent().getExtras();
        language = extras.getString("language");
        lang_id = extras.getInt("id");

        MyListFragment mylist = new MyListFragment();

        FragmentTransaction fragmentTrans = getFragmentManager()
                .beginTransaction();

        mylist.language = language;
        fragmentTrans.add(mylist, "language");

        fragmentTrans.commit();
        Log.d("tes", "data loaded");

    } 
```

片段：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        view = inflater.inflate(R.layout.fragment_menulist_overview, container,
                false);
            System.out.println("tes="+language+" sama ini = "+asdf);
        onActivityCreated(inflater, container, savedInstanceState);

        return view;

    }
    public void onActivityCreated(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onActivityCreated(savedInstanceState);
        run();

    }

    public void run(){
        Log.d("Test","How many called?");
        if(language != null)
        new loadcat().execute();

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:41:59.887

我没有收到您写的注释，但是您可以通过`AsyncTask`在`.commit()`执行您想要的片段内创建一个公共方法并从代码中的所需点`AsyncTask`调用它来简单地运行事务。`Activity`

因此，例如，如果您在以下内容中创建此方法`Fragment`：

```
public void executeAsyncTask(String language, int lang_id)
{
     ...
     asyncTask.execute(language, lang_id);
} 
```

而在Activity中，你可以调用这个方法：

```
...
fragmentTrans.commit();
Log.d("tes", "data loaded");
mylist.executeAsyncTask(language,lang_id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T23:30:43.437

据我所知，`commit`执行回调没有公开（甚至可能不存在）。

所以问题是 - 你想什么时候执行你的`AsyncTask`？

如果您希望它在片段创建时执行一次，那么您的代码是正确的，除非您应该像这样删除显式`onActivityCreated()`调用`onCreateView`：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    view = inflater.inflate(R.layout.fragment_menulist_overview, container,
            false);
        System.out.println("tes="+language+" sama ini = "+asdf);
    onActivityCreated(inflater, container, savedInstanceState); // REMOVE THIS LINE

    return view;

} 
```

`onActivityCreated`是一个回调。显式调用它会导致任务的双重执行

# javascript - 从base64 PNG获取高度和宽度尺寸

> ID：15327959
> 
> 赞同：17
> 
> 时间：2013-03-10T21:36:07.737
> 
> 标签：javascript, jquery

我有这个

```
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOcAAABnCAYAAAD7RFX4AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAAUNJREFUeNrs2sEJwkAQhtF/xAa8WZrYgODBEoS04MkKPFqXXax3IZhL2BXfq2AZ8mVC2Mp0b+FTJUm7nkyCbjZGAOIExAniBMQJ4gTECYgTxAmIE8QJiBMQJ4gTECeIExAniBMQJyBOECcgThAnIE5AnCBOQJwgTkCcIE5AnIA4QZyAOEGcgDgBcYI4AXGCOAFxgjgBcQLiBHEC4gRxAuIExAniBMQJ4gTECYgTxAmIE8QJiBPECYgTECeIExAniBMQJyBOECcgThAnsL5tkjIGGDNOZhxve0Ogm2qtjfetPZ2HOMdh9/SEYHPO6PXmqAHOwJ/zQwjECYgTxAmIE8QJiBMQJ/wa1/e+c/cYmxOwORd5XF6GgM0JiBPECYgTxAmIE8QJiBMQJ4gTECeIExAnIE4QJyBOECcgTiBvAAAA//8DALxSDtah/q5yAAAAAElFTkSuQmCC 
```

我想使用 JavaScript 从这个字符串中获取高度和宽度。我该怎么做？甚至可能吗？

您可以假设访问 jQuery、window.btoa 和 window.atob。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-10T21:38:52.993

我确信可以以某种方式从 PNG 中解析出来，但是假设数据 URI 支持（因为我们可以假设`atob`），您可以创建一个图像并等待它加载（这适用于任何格式）：

```
var image = document.createElement('img');

image.addEventListener('load', function() {
    // image.width × image.height
});

image.src = 'data:image/png;base64,…'; 
```

[这是一个演示。](http://jsfiddle.net/minitech/KDdyJ/)

* * *

好的，显然您想手动提取此信息。PNG 文件以 bytes 开头`89 50 4E 47 0D 01 1A 0A`，然后是包含宽度和高度的 IHDR 块，并且必须是第一个块。（耶，更简单！）一个块有一个 4 字节的长度，一个 4 字节的类型，然后是一个*长度*字节的内容。IHDR 的内容以 4 字节宽度和 4 字节高度开始，因此 PNG 的宽度和高度始终为 16-24 字节！如果您愿意，这一切都可以检查，但是对于假设 PNG 有效的简单方法：

```
function toInt32(bytes) {
    return (bytes[0] << 24) | (bytes[1] << 16) | (bytes[2] << 8) | bytes[3];
}

function getDimensions(data) {
    return {
        width: toInt32(data.slice(16, 20)),
        height: toInt32(data.slice(20, 24))
    };
}

var base64Characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';

function base64Decode(data) {
    var result = [];
    var current = 0;

    for(var i = 0, c; c = data.charAt(i); i++) {
        if(c === '=') {
            if(i !== data.length - 1 && (i !== data.length - 2 || data.charAt(i + 1) !== '=')) {
                throw new SyntaxError('Unexpected padding character.');
            }

            break;
        }

        var index = base64Characters.indexOf(c);

        if(index === -1) {
            throw new SyntaxError('Invalid Base64 character.');
        }

        current = (current << 6) | index;

        if(i % 4 === 3) {
            result.push(current >> 16, (current & 0xff00) >> 8, current & 0xff);
            current = 0;
        }
    }

    if(i % 4 === 1) {
        throw new SyntaxError('Invalid length for a Base64 string.');
    }

    if(i % 4 === 2) {
        result.push(current >> 4);
    } else if(i % 4 === 3) {
        current <<= 6;
        result.push(current >> 16, (current & 0xff00) >> 8);
    }

    return result;
}

function getPngDimensions(dataUri) {
    if (dataUri.substring(0, 22) !== 'data:image/png;base64,') {
        throw new Error('Unsupported data URI format');
    }

    // 32 base64 characters encode the necessary 24 bytes
    return getDimensions(base64Decode(dataUri.substr(22, 32)));
}

var dimensions = getPngDimensions('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOcAAABnCAYAAAD7RFX4AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAAUNJREFUeNrs2sEJwkAQhtF/xAa8WZrYgODBEoS04MkKPFqXXax3IZhL2BXfq2AZ8mVC2Mp0b+FTJUm7nkyCbjZGAOIExAniBMQJ4gTECYgTxAmIE8QJiBMQJ4gTECeIExAniBMQJyBOECcgThAnIE5AnCBOQJwgTkCcIE5AnIA4QZyAOEGcgDgBcYI4AXGCOAFxgjgBcQLiBHEC4gRxAuIExAniBMQJ4gTECYgTxAmIE8QJiBPECYgTECeIExAniBMQJyBOECcgThAnsL5tkjIGGDNOZhxve0Ogm2qtjfetPZ2HOMdh9/SEYHPO6PXmqAHOwJ/zQwjECYgTxAmIE8QJiBMQJ/wa1/e+c/cYmxOwORd5XF6GgM0JiBPECYgTxAmIE8QJiBMQJ4gTECeIExAnIE4QJyBOECcgTiBvAAAA//8DALxSDtah/q5yAAAAAElFTkSuQmCC');

console.log(dimensions.width + ' × ' + dimensions.height);
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2016-12-14T21:19:25.603

这是 3 年后新更新的 es6 版本，在同步的类型化数组的帮助下，您无需将孔图像加载到内存中即可解决。所以它更快:)

也不需要任何 DOM，因此它可以在 Workers 内部工作

```
function getPngDimensions(base64) {
  const header = atob(base64.slice(0, 50)).slice(16,24)
  const uint8 = Uint8Array.from(header, c => c.charCodeAt(0))
  const dataView = new DataView(uint8.buffer)

  return {
    width: dataView.getInt32(0),
    height: dataView.getInt32(4)
  }
}

// Just to get some base64 png example
const canvas = document.createElement('canvas')
const base64 = canvas.toDataURL().split(',')[1]

const dimensions = getPngDimensions(base64)
console.log(dimensions)
```

* * *

编辑：我的建议也是你应该尽可能使用类型化数组而不是 base64 和 blobs 而不是类型化数组，base64 是更糟糕的容器并使用更多内存。

因此，对于已经拥有 blob 的您，这里有一个解决方案：

```
document.createElement('canvas').toBlob(async blob => {
  // blob.arrayBuffer() is the new way to read stuff
  // may not work in all browser
  let dv = new DataView(await blob.slice(16, 24).arrayBuffer())

  console.log({
    width: dv.getInt32(0),
    height: dv.getInt32(4)
  })
})

// you could also try out the new experimental createImageBitmap
// don't use image or canvas but this also works in web workers
// and it also works for more than just png's
// could expect this is more havier/slower than just reading bytes 16-24
document.createElement('canvas').toBlob(async blob => {
  const bitmap = await createImageBitmap(blob)
  const { width, height } = bitmap
  bitmap.close() // GC
  console.log({ width, height })
})
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-10T21:48:08.073

**[现场演示](http://jsbin.com/uhigib/1/edit)**

```
var imgData = 'data:image/png;base64,iVBORw0.........';    
var img = new Image();       
img.onload = function(){
  alert(img.width +' '+ img.height );
};
img.src = imgData; 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-03-10T21:38:45.743

使用 jQuery：

```
var width, height;
$('<img/>').load(function(){
    width = $(this).width();
    height = $(this).height();
    // Call whatever function here that requires the width/height
}).attr('src', datauri) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-04-03T13:14:14.157

** 在 node.js 中

```
function getPNGSize (buffer) {
  if (buffer.toString('ascii', 12, 16) === 'CgBI') {
    return {
      'width': buffer.readUInt32BE(32),
      'height': buffer.readUInt32BE(36)
    };
  }
  return {
    'width': buffer.readUInt32BE(16),
    'height': buffer.readUInt32BE(20)
  };
}
getPNGSize(buffer) 
```

# algorithm - BFS 搜索最短路径的性能

> ID：15327960
> 
> 赞同：1
> 
> 时间：2013-03-10T21:36:21.107
> 
> 标签：algorithm, search, graph, complexity-theory, breadth-first-search

有一个最多包含**10 000 个节点**的图，每个节点最多可以有**4 个相邻节点**。图是**未加权**且**无向的。**任务是找到从节点A到节点B的**最短路径**。路径长度是路径中访问的节点数。BFS 算法能否在不到**一秒**的时间内找到该路径并使用少于**64mB**的内存？

最初的问题是网格（最大 100*100）和可以访问的地方、开始地点、结束地点和无法访问的地方。我的第一个猜测是使用 BFS 搜索将其减少为在未加权图中找到最短路径。但是，我不确定带有大图的解决方案的速度和内存使用情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T22:41:26.427

**空间复杂度**

所以你有 10 000 个节点，每个节点最多可以连接 4 个其他节点。最大顶点数为 40 000。在[邻接列表中](http://en.wikipedia.org/wiki/Adjacency_list)，它需要`O(|V|+|E|)=50 000`内存空间。每个变量都需要 32 位才能在列表中表示它。最大内存量为`40000*32/(1000*1000*8)=0.16`MB。如果使用[相邻矩阵](http://en.wikipedia.org/wiki/Adjacency_matrix)，则需要`O(|V|^2)=40000*40000/(1000*1000*8)=200`Mbytes。

**时间复杂度**

维基百科：

> 时间复杂度可以表示为 O(|V|+|E|)，因为在最坏的情况下将探索每个顶点和每条边。注意：O(|E|) 可能在 O(|V|) 和 O(|V|^2) 之间变化，具体取决于输入图的稀疏程度（假设图是连接的）。

所以在最坏的情况下，时间复杂度将是`O(|V|+|E|) = 40 000 + 10 000 = 50 000`。使用现代计算机，在 1 秒内计算不会成为问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T22:40:49.110

1s 是好的（在现代计算机上更像 0.001s -- 10^9 操作/秒）。

内存——你需要邻接表表示数组 int[10000][4] + 一些东西来记住关闭/使用/看不见的节点 >= 10000*4*6 = 240000 = 0.24MB。所以如果我的数学没问题应该没问题。

# c - Build a strend function with pointers

> ID：15327967
> 
> 赞同：0
> 
> 时间：2013-03-10T21:37:17.857
> 
> 标签：c, function, pointers

As the title says,I must build a strend function with pointers.The function will check if the second string appears at the end of the first string and return 1 if it does or 0 if it doesnt.Here is my code,it is not compiling and its giving an non lvalue in assigment error.Any ideas?

```
#include <stdio.h>
#define MAX 100
int strend (char *s1,char *s2);
int main()
{
    char string1[MAX]="Check Mate";
    char string2[MAX]="Mate";
    printf("The Result is :\n");
    printf("%d",strend(string1,string2));
    return 0;
}
int strend (char *s1,char *s2)
{
    for(;*s1!='\0';s1++)
                        { for(;*s2!='\0' && *s1!='\0' && *s1==*s2;s1++,s2++)
                                       ;
                                       }
    if(*s1='\0' && *s2='\0')
                return 1;
    else 
                return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T21:40:03.390

The error shown by the compiler indicates that you are trying to assign to something which is not an `LVALUE`. In simple terms `LVALUE` refers to the terms which can appear on the left hand side of an assignment, (in reality it is much more complex than that ;) )

You need to use `==` for the equality comparison instead of `=`

```
if (*s1 == '\0' && *s2 == '\0')
    return 1;
else 
    return 0; 
```

Also note that the compiler was showing the error at `*s2 = '\0'` and was not complaining about the first assignment `*s1 = '\0'` (even though it is logically incorrect to your program requirement).

In other words the compiler would not have shown the LVALUE error with just this statement:

```
if (*s1 = '\0') 
```

Only when you had an `&& *s2 = '\0'`, it showed the error.

And as teppic pointed out in the comments below, it is because of the expression being evaluated equivalent to `if(*s1 = ('\0' && *s2) = '\0')` (because of operator precedence) which made the compiler show the LVALUE error, since you cannot have `0 = 0` in an expression.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T21:46:18.830

I needed to add `*s2!='\0'` to the first For condition.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T04:02:12.720

Check out this snippet .

```
char str1[50]="Check Mate";
char str2[50]="Mate";
int flag,i,l1,l2;

l1=strlen(str1);
l2=strlen(str2);
/*
 * Place a pointer to the end of strings 1 and strings 2 . 
 */
char *ptrend1 = (str1+l1-1);
char *ptrend2 = (str2+l2-1);

flag = 1; 
for(i=l2;i>0;i--)
{
    /*
     * Keep traversing such that in case the last charachters of the stings
     * dont match break out . 
     */
    if(*ptrend2 != *ptrend1){
        flag = 0 ;
        break;
    }
    /*
     * Decrement both the end pointers 
     */
    ptrend1--;
    ptrend2--;
}
if(flag)
    printf("String 2 is contained at the end of string 1");
else 
    printf("String 2 is NOT contained at the end of string 1");
return 0; 
```

# c++ - cin 无法获得输入

> ID：15327969
> 
> 赞同：1
> 
> 时间：2013-03-10T21:37:20.133
> 
> 标签：c++, cout, cin

我希望能够阅读以下内容：

```
myvar = { 1 2 3 5 } 
```

所以我所做的是

```
string input;
int intInput;

cin >> input; //take in the varname, do stuff
cin >> input; // check to make sure it's "="
if (input != "=") {
    //stuff
}

cin >> input; //check to make sure it's "{"
if (input != "{") {
    //stuff
}

while (cin >> intInput) {
   //stuff
   cout << intInput << endl;
} 
```

至此，我的理解是“}”这个char已经存入了intInput，结束了while循环。我想确保它以“}”结尾。

```
c.unget();
cin >> input;
if (input != "}") {
    //stuff
} 
```

我以为 c.unget(); 会给我最后一个字符，在这种情况下是“}”，但是当我计算输入值时，输入仍然是“{”。

如何确保集合以“}”字符结尾？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T21:53:38.373

如果您 cout 输入，您将得到一个“{”，因为它是它在此处读取的最后一个字符串：

```
cin >> input; //check to make sure it's "{" 
```

然后你将你的数字放入 intInput。您可以一直使用字符串读取输入，如果不等于“}”，则将其转换为整数

```
#include <cstdlib>
while (cin >> input) {
    if(input == "}")
        break;
    else
       intInput = atoi(input.c_str()); //or whatever means you prefer to convert a string to int
    cout << intInput << endl;
} 
```

如果读取了“}”，它就会跳出你的循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T21:56:17.573

```
#include <iostream>
#include <sstream>
using namespace std;
int main() {
    string name, buf;
    cin >> name;
    cin >> buf; // =
    cin >> buf; // {
    while(1) {
        if(cin >> buf) {
            if(buf == "}") break;
            stringstream ss(buf);
            int i;
            ss >> i;
            if(ss.fail()) {
                cout << "fail" << endl;
                            //conversion error
            } else {
                cout << i << endl;
            }
        } else {
            cout << "no }" << endl;
                    break;
            //only if cin is reading from file, or wating for CTRL+D from terminal emulator
        }

    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T21:57:23.743

看一下这个：

```
#include <iostream>
#include <string>
#include <sstream>
using namespace std;
int main()
{
    int i;
    string input;
    while (cin >> input)
    {
        if (input == "}")
            break;
        else
            stringstream(input) >> i;

        cout << i << endl;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T21:53:47.930

我会读到 std::string 并检查它是数字还是“}”符号

```
while (cin >> stringInput) {
    if (stringInput = "}") {
        break;
    }
    if (sscanf(stringInput.c_str(), "%d", &intInput) == 0) {
         //stuff
    }
} 
```

不过，使用/编写词法分析器可能会更好

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-10T22:06:55.307

如果不是数字，缓冲区仍将包含用户输入的字符。它只会设置失败标志。只需再次作为字符串读取：

```
string input;
int intInput;

cin >> input; //take in the varname, do stuff
cin >> input; // check to make sure it's "="
if (input != "=") {
    //stuff
}

cin >> input; //check to make sure it's "{"
if (input != "{") {
    //stuff
}

do {
   cin >> int;
   if (!cin) {
       cin.clear();    // clear error flags
       cin >> input;   // read again as string
       if (input != "}") {
           // handle error
       }
   }
   else
       cout << intInput << endl;
} while (input != "}"); 
```

# ruby-on-rails - 尝试限制部署时出错：使用导轨进行迁移

> ID：15327970
> 
> 赞同：0
> 
> 时间：2013-03-10T21:37:20.813
> 
> 标签：ruby-on-rails, capistrano

尝试将 rails 应用程序部署到远程服务器。

我不断收到此错误，无法理解如何解决此问题。

这是控制台日志：

```
D:\>cap deploy:migrations
  * ←[32m2013-03-11 01:15:33 executing `deploy:migrations'←[0m
  * ←[32m2013-03-11 01:15:33 executing `deploy:update_code'←[0m
    updating the cached checkout on all servers
    ←[33mexecuting locally: "git ls-remote root@NNN.NNN.131.4:myAppName.git mast
er"←[0m
root@NNN.NNN.131.4's password:
    ←[2;37mcommand finished in 11708ms←[0m
  * ←[33mexecuting "if [ -d /home/root/myAppName/shared/cached-copy ]; then cd /
home/root/myAppName/shared/cached-copy && git fetch  origin && git fetch --tags
 origin && git reset  --hard eba696f2195d19adba5fc7730828a69e7bfc3e9d && git cle
an  -d -x -f; else git clone root@NNN.NNN.131.4:myAppName.git /home/root/2antica
fe/shared/cached-copy && cd /home/root/myAppName/shared/cached-copy && git check
out -b deploy eba696f2195d19adba5fc7730828a69e7bfc3e9d; fi"←[0m
    servers: ["NNN.NNN.131.4"]
Password:
    [NNN.NNN.131.4] executing command
 ** [NNN.NNN.131.4 :: out] Cloning into '/home/root/myAppName/shared/cached-copy
'...
 ** [NNN.NNN.131.4 :: err] Host key verification failed.
 ** [NNN.NNN.131.4 :: err] fatal: The remote end hung up unexpectedly
    ←[2;37mcommand finished in 1171ms←[0m
failed: "sh -c 'if [ -d /home/root/myAppName/shared/cached-copy ]; then cd /home
/root/myAppName/shared/cached-copy && git fetch  origin && git fetch --tags  ori
gin && git reset  --hard eba696f2195d19adba5fc7730828a69e7bfc3e9d && git clean
-d -x -f; else git clone root@NNN.NNN.131.4:myAppName.git /home/root/myAppName/s
hared/cached-copy && cd /home/root/myAppName/shared/cached-copy && git checkout
-b deploy eba696f2195d19adba5fc7730828a69e7bfc3e9d; fi'" on NNN.NNN.131.4 
```

这是我的 deploy.rb：

```
require 'bundler/capistrano'
set :user, 'root'
set :domain, 'NNN.NNN.131.4'
set :application, 'myAppName'

set :repository,  "#{user}@#{domain}:#{application}.git"
set :deploy_to, "/home/#{user}/myAppName"

role :app, domain
role :web, domain
role :db, domain, :primary => true

set :deploy_via, :remote_cache
set :scm, 'git'
set :branch, 'master'
set :scm_verbose, true
set :use_sudo, false
set :rails_env, :production

namespace :deploy do
  desc "cause Passenger to initiate a restart"
  task :restart do
    run "touch #{current_path}/tmp/restart.txt"
  end
  desc "reload the database with seed data"
  task :seed do
    run "cd #{current_path}; rake db:seed RAILS_ENV=#{rails_env}"
  end
end 
```

考虑到在 cap deploy:migrations 期间引发了错误，也许这是一个 db 错误？有什么问题？部署数据库是 mysql 5.5，在 database.yml 中正确提及。

编辑1：手动将存储库克隆到服务器。排除输出以节省空间。

编辑2：

将此添加到 deploy.rb：

```
default_run_options[:pty] = true 
```

有一点帮助。该命令仍然失败，但留下更长的日志：

```
D:\>cap deploy:migrations
  * ←[32m2013-03-11 02:24:54 executing `deploy:migrations'←[0m
  * ←[32m2013-03-11 02:24:54 executing `deploy:update_code'←[0m
    updating the cached checkout on all servers
    ←[33mexecuting locally: "git ls-remote root@NNN.NNN.131.4:myAppName.git mast
er"←[0m
root@NNN.NNN.131.4's password:
    ←[2;37mcommand finished in 12717ms←[0m
  * ←[33mexecuting "if [ -d /home/root/myAppName/shared/cached-copy ]; then cd /
home/root/myAppName/shared/cached-copy && git fetch  origin && git fetch --tags
 origin && git reset  --hard 8b6824f3750031076be93783d7d9f66f53b0b429 && git cle
an  -d -x -f; else git clone root@NNN.NNN.131.4:myAppName.git /home/root/2antica
fe/shared/cached-copy && cd /home/root/myAppName/shared/cached-copy && git check
out -b deploy 8b6824f3750031076be93783d7d9f66f53b0b429; fi"←[0m
    servers: ["NNN.NNN.131.4"]
Password:
    [NNN.NNN.131.4] executing command
 ** [NNN.NNN.131.4 :: out] root@NNN.NNN.131.4's password:
Password:
 ** [NNN.NNN.131.4 :: out]
 ** [NNN.NNN.131.4 :: out] root@NNN.NNN.131.4's password:
Password:
 ** [NNN.NNN.131.4 :: out]
 ** [NNN.NNN.131.4 :: out] HEAD is now at 8b6824f capping capistrano
    ←[2;37mcommand finished in 23741ms←[0m
    copying the cached version to /home/root/myAppName/releases/20130310222546
  * ←[33mexecuting "cp -RPp /home/root/myAppName/shared/cached-copy /home/root/2
anticafe/releases/20130310222546 && (echo 8b6824f3750031076be93783d7d9f66f53b0b4
29 > /home/root/myAppName/releases/20130310222546/REVISION)"←[0m
    servers: ["NNN.NNN.131.4"]
    [NNN.NNN.131.4] executing command
    ←[2;37mcommand finished in 772ms←[0m
  * ←[32m2013-03-11 02:25:47 executing `deploy:finalize_update'←[0m
  * ←[33mexecuting "chmod -R -- g+w /home/root/myAppName/releases/20130310222546
 && rm -rf -- /home/root/myAppName/releases/20130310222546/public/system && mkdi
r -p -- /home/root/myAppName/releases/20130310222546/public/ && ln -s -- /home/r
oot/myAppName/shared/system /home/root/myAppName/releases/20130310222546/public/
system && rm -rf -- /home/root/myAppName/releases/20130310222546/log && ln -s --
 /home/root/myAppName/shared/log /home/root/myAppName/releases/20130310222546/lo
g && rm -rf -- /home/root/myAppName/releases/20130310222546/tmp/pids && mkdir -p
 -- /home/root/myAppName/releases/20130310222546/tmp/ && ln -s -- /home/root/2an
ticafe/shared/pids /home/root/myAppName/releases/20130310222546/tmp/pids"←[0m
    servers: ["NNN.NNN.131.4"]
    [NNN.NNN.131.4] executing command
    ←[2;37mcommand finished in 791ms←[0m
  * ←[33mexecuting "find /home/root/myAppName/releases/20130310222546/public/ima
ges /home/root/myAppName/releases/20130310222546/public/stylesheets /home/root/2
anticafe/releases/20130310222546/public/javascripts -exec touch -t 201303102225.
48 -- {} ';'; true"←[0m
    servers: ["NNN.NNN.131.4"]
    [NNN.NNN.131.4] executing command
 ** [out :: NNN.NNN.131.4] find: `/home/root/myAppName/releases/20130310222546/p
ublic/images'
 ** [out :: NNN.NNN.131.4] : No such file or directory
 ** [out :: NNN.NNN.131.4] find: `/home/root/myAppName/releases/20130310222546/p
ublic/stylesheets'
 ** [out :: NNN.NNN.131.4] : No such file or directory
 ** [out :: NNN.NNN.131.4] find:
 ** [out :: NNN.NNN.131.4] `/home/root/myAppName/releases/20130310222546/public/
javascripts'
 ** [out :: NNN.NNN.131.4] : No such file or directory
    ←[2;37mcommand finished in 756ms←[0m
    triggering after callbacks for `deploy:finalize_update'
  * ←[32m2013-03-11 02:25:49 executing `bundle:install'←[0m
  * ←[33mexecuting "ls -x /home/root/myAppName/releases"←[0m
    servers: ["NNN.NNN.131.4"]
    [NNN.NNN.131.4] executing command
    ←[2;37mcommand finished in 721ms←[0m
  * ←[33mexecuting "cd /home/root/myAppName/releases/20130310222546 && bundle in
stall --gemfile /home/root/myAppName/releases/20130310222546/Gemfile --path /hom
e/root/myAppName/shared/bundle --deployment --quiet --without development test"←
[0m
    servers: ["NNN.NNN.131.4"]
    [NNN.NNN.131.4] executing command
 ** [out :: NNN.NNN.131.4] Cannot write a changed lockfile while frozen.
    ←[2;37mcommand finished in 10392ms←[0m
  * ←[32m2013-03-11 02:26:00 executing `deploy:migrate'←[0m
  * ←[33mexecuting "cd /home/root/myAppName/releases/20130310222546 && bundle ex
ec rake RAILS_ENV=production  db:migrate"←[0m
    servers: ["NNN.NNN.131.4"]
    [NNN.NNN.131.4] executing command
 ** [out :: NNN.NNN.131.4] rake aborted!
 ** [out :: NNN.NNN.131.4] Please install the mysql2 adapter: `gem install activ
erecord-mysql2-adapter` (mysql2 is not part of the bundle. Add it to Gemfile.)
 ** [out :: NNN.NNN.131.4] /var/lib/gems/1.9.1/gems/bundler-1.3.0/lib/bundler/ru
bygems_integration.rb:205:in `block in replace_gem'
 ** [out :: NNN.NNN.131.4] /home/root/myAppName/shared/bundle/ruby/1.9.1/gems/ac
tiverecord-3.2.1/lib/active_record/connection_adapters/mysql2_adapter.rb:3:in `<
top (required)>'
 ** [out :: NNN.NNN.131.4] /home/root/myAppName/shared/bundle/ruby/1.9.1/gems/ac
tivesupport-3.2.1/lib/active_support/dependencies.rb:251:in `require'
 ** [out :: NNN.NNN.131.4] /home/root/myAppName/shared/bundle/ruby/1.9.1/gems/ac
tivesupport-3.2.1/lib/active_support/dependencies.rb:251:in `block in require'
 ** [out :: NNN.NNN.131.4] /home/root/myAppName/shared/bundle/ruby/1.9.1/gems/ac
tivesupport-3.2.1/lib/active_support/dependencies.rb:236:in `load_dependency'
 ** [out :: NNN.NNN.131.4] /home/root/myAppName/shared/bundle/ruby/1.9.1/gems/ac
tivesupport-3.2.1/lib/active_support/dependencies.rb:251:in `require'
 ** [out :: NNN.NNN.131.4]
 ** [out :: NNN.NNN.131.4] /home/root/myAppName/shared/bundle/ruby/1.9.1/gems/ac
tiverecord-3.2.1/lib/active_record/connection_adapters/abstract/connection_speci
fication.rb:48:in `resolve_hash_connection'
 ** [out :: NNN.NNN.131.4] /home/root/myAppName/shared/bundle/ruby/1.9.1/gems/ac
tiverecord-3.2.1/lib/active_record/connection_adapters/abstract/connection_speci
fication.rb:39:in `resolve_string_connection'
 ** [out :: NNN.NNN.131.4] /home/root/myAppName/shared/bundle/ruby/1.9.1/gems/ac
tiverecord-3.2.1/lib/active_record/connection_adapters/abstract/connection_speci
fication.rb:23:in `spec'
 ** [out :: NNN.NNN.131.4] /home/root/myAppName/shared/bundle/ruby/1.9.1/gems/ac
tiverecord-3.2.1/lib/active_record/connection_adapters/abstract/connection_speci
fication.rb:127:in `establish_connection'
 ** [out :: NNN.NNN.131.4] /home/root/myAppName/shared/bundle/ruby/1.9.1/gems/ac
tiverecord-3.2.1/lib/active_record/railtie.rb:76:in `block (2 levels) in <class:
Railtie>'
 ** [out :: NNN.NNN.131.4]
 ** [out :: NNN.NNN.131.4] /home/root/myAppName/shared/bundle/ruby/1.9.1/gems/ac
tivesupport-3.2.1/lib/active_support/lazy_load_hooks.rb:36:in `instance_eval'
 ** [out :: NNN.NNN.131.4] /home/root/myAppName/shared/bundle/ruby/1.9.1/gems/ac
tivesupport-3.2.1/lib/active_support/lazy_load_hooks.rb:36:in `execute_hook'
 ** [out :: NNN.NNN.131.4] /home/root/myAppName/shared/bundle/ruby/1.9.1/gems/ac
tivesupport-3.2.1/lib/active_support/lazy_load_hooks.rb:26:in `on_load'
 ** [out :: NNN.NNN.131.4] /home/root/myAppName/shared/bundle/ruby/1.9.1/gems/ac
tiverecord-3.2.1/lib/active_record/railtie.rb:74:in `block in <class:Railtie>'
 ** [out :: NNN.NNN.131.4] /home/root/myAppName/shared/bundle/ruby/1.9.1/gems/ra
ilties-3.2.1/lib/rails/initializable.rb:30:in `instance_exec'
 ** [out :: NNN.NNN.131.4] /home/root/myAppName/shared/bundle/ruby/1.9.1/gems/ra
ilties-3.2.1/lib/rails/initializable.rb:30:in `run'
 ** [out :: NNN.NNN.131.4] /home/root/myAppName/shared/bundle/ruby/1.9.1/gems/ra
ilties-3.2.1/lib/rails/initializable.rb:55:in `block in run_initializers'
 ** [out :: NNN.NNN.131.4] /home/root/myAppName/shared/bundle/ruby/1.9.1/gems/ra
ilties-3.2.1/lib/rails/initializable.rb:54:in `each'
 ** [out :: NNN.NNN.131.4] /home/root/myAppName/shared/bundle/ruby/1.9.1/gems/ra
ilties-3.2.1/lib/rails/initializable.rb:54:in `run_initializers'
 ** [out :: NNN.NNN.131.4] /home/root/myAppName/shared/bundle/ruby/1.9.1/gems/ra
ilties-3.2.1/lib/rails/application.rb:136:in `initialize!'
 ** [out :: NNN.NNN.131.4] /home/root/myAppName/shared/bundle/ruby/1.9.1/gems/ra
ilties-3.2.1/lib/rails/railtie/configurable.rb:30:in `method_missing'
 ** [out :: NNN.NNN.131.4]
 ** [out :: NNN.NNN.131.4] /home/root/myAppName/releases/20130310222546/config/e
nvironment.rb:5:in `<top (required)>'
 ** [out :: NNN.NNN.131.4] /home/root/myAppName/shared/bundle/ruby/1.9.1/gems/ac
tivesupport-3.2.1/lib/active_support/dependencies.rb:251:in `require'
 ** [out :: NNN.NNN.131.4] /home/root/myAppName/shared/bundle/ruby/1.9.1/gems/ac
tivesupport-3.2.1/lib/active_support/dependencies.rb:251:in `block in require'
 ** [out :: NNN.NNN.131.4] /home/root/myAppName/shared/bundle/ruby/1.9.1/gems/ac
tivesupport-3.2.1/lib/active_support/dependencies.rb:236:in `load_dependency'
 ** [out :: NNN.NNN.131.4] /home/root/myAppName/shared/bundle/ruby/1.9.1/gems/ac
tivesupport-3.2.1/lib/active_support/dependencies.rb:251:in `require'
 ** [out :: NNN.NNN.131.4] /home/root/myAppName/shared/bundle/ruby/1.9.1/gems/ra
ilties-3.2.1/lib/rails/application.rb:103:in `require_environment!'
 ** [out :: NNN.NNN.131.4] /home/root/myAppName/shared/bundle/ruby/1.9.1/gems/ra
ilties-3.2.1/lib/rails/application.rb:292:in `block (2 levels) in initialize_tas
ks'
 ** [out :: NNN.NNN.131.4]
 ** [out :: NNN.NNN.131.4] Tasks: TOP => db:migrate => environment
 ** [out :: NNN.NNN.131.4] (See full trace by running task with --trace)
    ←[2;37mcommand finished in 6856ms←[0m
failed: "sh -c 'cd /home/root/myAppName/releases/20130310222546 && bundle exec r
ake RAILS_ENV=production  db:migrate'" on NNN.NNN.131.4 
```

capistrano、mysql2 和 activerecord-mysql2-adapter 都在 gemfile 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T05:06:49.280

通过在 deploy.rb 中包含以下内容来启用 SSH 密钥转发

```
ssh_options[:forward_agent] = true
default_run_options[:pty] = true 
```

但要使其工作，您必须使用 SSH 密钥连接到您的部署目标，而不是您现在正在做的密码。将您的私有 SSH 密钥的位置放在您的 deploy.rb 中。例如。

```
ssh_options[:keys] = %w(~/.keys/my-secret.pem) 
```

此外，您需要执行 cap deploy:setup 至少一次，然后才能执行其他 cap 任务。日志中指示应用程序目录不存在的错误可能意味着您需要运行：

```
cap deploy:setup 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T05:44:53.590

问题原来是这样的：

该服务器预装了 Mysql 5.5 + Percona。我尝试使用它，但经验不足，我可能没有正确配置所有内容。我最终清理了服务器，在上面安装了空白的 Ubuntu，然后安装了一个基本的 PostgreSQL。现在一切正常。感谢大家帮助我！

# variables - 批处理文件中的用户输入

> ID：15327972
> 
> 赞同：1
> 
> 时间：2013-03-10T21:37:29.850
> 
> 标签：variables, batch-file, user-input

我有一个看起来像这样的批处理文件，它拍摄网页的图片并对其进行裁剪：

```
cd C:\users\***\Downloads\IECapt-2008-06-10
IECapt --delay=10000 --url=http://test.com/picture.swf?id=1 --out="C:\users\***\My Documents\picture.png"
cd C:\users\***\My Documents
convert picture.png -trim picture.png

ftp -s:place_img.txt 
```

我想知道是否有一种方法可以更改此脚本以接受用户输入以用用户输入的内容替换 URL 和文件名。例如，用户会输入一个 URL 和一个文件名，它会替换这些东西：

```
cd C:\users\***\Downloads\IECapt-2008-06-10
IECapt --delay=10000 --url=(((http://test.com/picture.swf?id=1))) --out="C:\users\***\My Documents\((picture)).png"
cd C:\users\***\My Documents
convert ((picture)).png -trim ((picture)).png

ftp -s:place_img.txt 
```

(((被替换的网址)))

((被替换的文件名))

**这是“place_picture.txt”文件：**

```
open test.com
username
pass
hash
bin
lcd c:\users\***\My Documents
cd public_html/test.com/test
put picture.png
bye 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T22:45:31.497

您可以批量提出问题，并且答案将存储在“环境变量”中，可以在进一步的命令中使用。

```
set /p picno=Picture number?
IECapt --delay=10000 --url=http://test.com/picture.swf?id=%picno% --out="C:\users\***\My Documents\pic%picno%.png" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T22:55:07.617

您可以使用 访问批处理文件中的参数`%1 %2 etc`。例如，如果您有`myBatch.bat`并且运行过`myBatch Hello World`，则 %1 将是“Hello”，而 %2 将是“World”。

至于更新您的 FTP 脚本，我不确定。我唯一能想到的就是`MPUT`目录中的所有 png 文件，然后在处理后移动/删除文件，这样它们就不会被再次拾取。

# linux - 嵌套的 if/then/elseif 如何在 bash 中工作？

> ID：15327973
> 
> 赞同：33
> 
> 时间：2013-03-10T21:37:35.703
> 
> 标签：linux, bash, nested, if-statement

语法在 bash 中是如何工作的？这是我的 C 风格 if else 语句的伪代码。例如：

```
If (condition)
    then
    echo "do this stuff"

elseif (condition)
    echo "do this stuff"

elseif (condition)
    echo "do this stuff"

    if(condition)
        then
        echo "this is nested inside"
    else
        echo "this is nested inside"

else
    echo "not nested" 
```

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-03-10T21:42:55.693

我猜你的问题是关于许多语法中包含的悬而未决的[歧义；](https://en.wikipedia.org/wiki/Dangling_else)在 bash 中没有这样的事情。每个都必须由标记 if 块末尾的`if`同伴分隔。`fi`

鉴于这一事实（除了其他语法错误），您会注意到您的示例不是有效的 bash 脚本。试图修复一些错误，你可能会得到这样的东西

```
if condition
    then
    echo "do this stuff"

elif condition
    then
    echo "do this stuff"

elif condition
    then
    echo "do this stuff"
    if condition
        then
        echo "this is nested inside"
    # this else _without_ any ambiguity binds to the if directly above as there was
    # no fi closing the inner block
    else
        echo "this is nested inside"

    #   else
    #       echo "not nested"
    #  as given in your example is syntactically not correct !
    #  We have to close the  last if block first as there's only one else allowed in any block.
   fi
# now we can add your else ..
else
   echo "not nested"
# ... which should be followed by another fi
fi 
```

# php - Wordpress -> 如果角色订阅者显示图像？

> ID：15327982
> 
> 赞同：4
> 
> 时间：2013-03-10T21:38:34.170
> 
> 标签：php, wordpress, bbpress, amember

所以这是交易..我将 Wordpress + bbPress 与会员软件 (aMember) 集成在一起。

在我的 bbPress 论坛上，在人们的用户名下，我想显示每个成员的 Wordpress 角色（不是 bbpress 角色）以及取决于每个成员角色的图像。

例如，

如果用户角色是订阅者 -> 在 bbpress 中的用户名下显示角色 -> 还显示下面的图像。

我想显示 Wordpress 角色（而不是 bbpress 角色）的原因是我的会员软件（amember）允许我根据用户的订阅设置不同的 wordpress 角色。我的网站上有 2 种不同的会员计划（一种免费的和付费的），我想根据他们的计划在我的 bbpress 论坛中显示不同的图像。

我浏览了 bbPress 模板，发现了这段代码（在 loop-single-reply.php 中）：

```
<?php bbp_reply_author_link( array( 'sep' => '<br />', 'show_role' => true ) ); ?> // this shows the bbpress role
<?php echo 'Points: '.cp_getPoints(bbp_get_reply_author_id()); ?> // this shows the member points below the username - I use a points plugin) 
```

现在我如何用显示每个用户的 Wordpress 角色（不是 bbpress）的代码替换此代码，并根据它的角色在其下显示图像。例如：

如果是角色“订阅者”-> 在其下显示角色 + 图像

如果是角色“贡献者”-> 在其下显示角色 + 图像

如果是角色“管理员”-> 在其下显示角色 + 图像

我不是程序员，所以我不知道如何做到这一点。请帮忙。我发现了一些我认为可以用来完成这项工作的相关代码：

```
<?php if ( current_user_can('contributor') ) : ?>
Content
<?php endif; ?> 
```

现在我失败的尝试看起来像这样：

```
<?php 

$user_roles = $current_user->roles;
$current_user = $bbp_get_reply_author_id; // i think this is wrong :P
$user_role = array_shift($user_roles);
?>
<?php if ($user_role == 'administrator') : ?>

Show Role  
Show Image

<?php elseif ($user_role == 'editor') : ?>

Show Role
Show Editor Image

<?php elseif ($user_role == 'author') : ?>

Show Role
Show Author Image

<?php elseif ($user_role == 'contributor') : ?>

Show Role
Show Contributor Image

<?php elseif ($user_role == 'subscriber') : ?>

Show Role
Show Subscriber Image

<?php else : ?> 

Show Role

<?php endif ?> 
```

我不知道我在做什么......上面的代码是我在谷歌上找到的。

任何人都可以帮忙吗？

我真的很感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-11T01:44:11.013

测试用户是否是订阅者看起来像这样。

```
<?php
global $current_user; 
get_currentuserinfo(); 
if ( user_can( $current_user, "subscriber" ) ){ 
// Show Role
// Show Subscriber Image
} 
```

在你的情况下，如果你想进行多个用户检查，我会使用这样的 switch 语句

```
global $current_user; 
get_currentuserinfo();
switch (true)  {
 case ( user_can( $current_user, "subscriber") ):
   // Show Role
   // Show Subscriber Image
 break;
 case ( user_can( $current_user, "contributor") ):
   // Show Role
   // Show Contributor Image
 break;
 case ( user_can( $current_user, "administrator") ):
   // Show Role
   // Show Administrator Image
 break;
} 
```

您可以使用更多用户角色继续 switch 语句。

**已编辑**

```
global $current_user; 
get_currentuserinfo();
switch (true)  {
 case ( user_can( $current_user, "subscriber") ):
   echo '<img src="http:www.impho.com/images/001.jpg">';
 break;
 case ( user_can( $current_user, "contributor") ):
   echo '<img src="http:www.impho.com/images/002.jpg">';
 break;
 case ( user_can( $current_user, "administrator") ):
  echo '<img src="http:www.impho.com/images/003.jpg">';
 break;
} 
```

### 根据用户要求编辑

好的，应该这样做，使用以下代码替换您获取用户名、头像、积分和图像的所有代码。

**在你的函数中放置这个**

```
function userLooping($role, $img)
{
$user_query = new WP_User_Query( array( 'role' => $role ) );

// User Loop
if ( !empty( $user_query->results ) ):
    foreach ( $user_query->results as $user ):
        echo '<p>'. $user->display_name.'</p>'; // display user name
        echo '<p>'.get_avatar($user->ID).'</p>'; // display user avatar
        //echo '<p>Points: '.cp_getPoints(bbp_get_reply_author_id()).'</p>';
        echo '<p>'.$img.'</p>'; //display image based on role
    endforeach;
endif;
} 
```

去掉上面`//`前面的`echo`

**将以下内容放入您的模板中**

```
<?php 
$args = array( array('role' => 'administrator', 'img' => '<img src="http://placeape.com/100/100">'),array('role' => 'subscriber', 'img' => '<img src="http://placekitten.com/100/100">'));
foreach ($args as $arg):
 userLooping($arg['role'],$arg['img']);
endforeach;
?> 
```

要添加更多角色和图像，只需在订阅者之后添加一个新数组

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T16:34:39.943

**我找到了一个更简单的解决方案：**

```
<?php
global $forumuser; 
$forumuser = bbp_get_reply_author_id();
switch (true)  {
case ( user_can( $forumuser, "author") ):
echo '<img src="http://www.impho.com/images/image1.png">';
break;
case ( user_can( $forumuser, "premium") ):
echo '<img src="http://www.impho.com/images/image2.png">';
break;
case ( user_can( $forumuser, "starter") ):
echo '<img src="http://www.impho.com/images/image3.png">';
break;
case ( user_can( $forumuser, "subscriber") ):
echo '<img src="http://www.impho.com/images/image4.png">';
break;
}
?> 
```

初学者和高级角色是我使用用户角色编辑器插件创建的自定义角色。

现在一切似乎都运行良好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-29T13:40:33.550

我知道这有点晚了，但这是我认为是最短和最有效的解决方案：

```
$current_user = new WP_User(wp_get_current_user()->id);
$user_roles = $current_user->roles; 
foreach ($user_roles as $role) {

   if  ($role == 'subscriber' ){
     //code here for subscribers
   }

   if  ($role == 'editor' ){
     //code here for editors
   }

} 
```

# haskell - Snaplet 到 SnapletLens（snaplet 初始化）

> ID：15327983
> 
> 赞同：2
> 
> 时间：2013-03-10T21:38:45.163
> 
> 标签：haskell, haskell-snap-framework

在功能`app :: SnapletInit App App`中，我尝试了具有几个字段的 snaplet：

```
m <- nestSnaplet "mys" mys $ myexInit  -- Data Myex = Myex {_foo :: Text, ...} 
```

稍后在相同的功能中：

```
let txt1 = myFun  m    -- myFun :: Myex -> Text 
```

编译器说：

```
Couldn't match expected type `SnapletLens a0 b0'
            with actual type `Snaplet Myex' 
```

我试图`SnapletLens`用

```
class MyLens b where
  myLens :: SnapletLens b Myex 
```

但问题是，这是获取或设置 myex-snaplet 内容的方法吗？以及如何引用myex的字段？我尝试了几件事，比如

```
let txt = (foo . myLens) m 
```

但是它们在 app 方法中不起作用。所以问题是，如何访问 Snaplet 的字段`Myex`？镜头的`myFun`使用很简单，或者至少一切都可以编译。

我刚刚看到另一个看起来非常相似的答案。 [在 snaplet 初始化期间使用 subsnaplet？](https://stackoverflow.com/questions/11308326/how-to-use-subsnaplet-during-snaplet-initialization?rq=1)

但是，如果我更换

```
let txt1 = myFun  m    -- myFun :: Myex -> Text 
```

和

```
let txt1 = foo  m 
```

编译器现在说：

```
Couldn't match expected type `T.Text -> f0 T.Text'
            with actual type `Snaplet Myex' 
```

我假设在上面的链接中`pgPool`是一个镜头`pgs`。

br gsp

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:32:13.597

有两种方法可以`Myex`从`Snaplet Myex`. Snaplet类型有一个[Comonad](http://hackage.haskell.org/packages/archive/comonad/3.0.1.1/doc/html/Control-Comonad.html#t%3aComonad)[实例](http://hackage.haskell.org/packages/archive/snap/0.11.2/doc/html/Snap-Snaplet.html#t%3aSnaplet)，这意味着您可以使用[提取](http://hackage.haskell.org/packages/archive/comonad/3.0.1.1/doc/html/Control-Comonad.html#v%3aextract)函数。或者，如果您不想导入 Control.Comonad，则可以使用[snapletValue](http://hackage.haskell.org/packages/archive/snap/0.11.2/doc/html/Snap-Snaplet.html#v%3asnapletValue)镜头。

```
m :: Snaplet Myex
view snapletValue m :: Myex 
```

# css - 使用纯 CSS（无 javascript）生成随机颜色？

> ID：15327990
> 
> 赞同：39
> 
> 时间：2013-03-10T21:39:13.110
> 
> 标签：css, random, colors

是否可以使用纯 CSS 而不使用 javascript 生成随机颜色？这可能是不可能的，但我仍然很好奇。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-11-15T20:08:03.487

这在纯 CSS 中是不可能的。

[但是，使用像 SASS ( example](http://pankajparashar.com/posts/random-colors-sass/) ) 或 LESS ( [example](https://gist.github.com/juanbrujo/7e4e17428dc8881d0e7e) )这样的预处理器可以为您生成随机颜色，因为它们是使用脚本语言构建的。请记住，对于每个用户或访问，此值不是随机的，除非为每个用户或单独访问生成 CSS 文件（这种情况不太常见）。

* * *

一方面是使用[CSS 变量](https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_variables)的可能性。我们可以通过以下方式声明一个 CSS 变量：

```
html {
  --main-bg-color: brown;
} 
```

并像这样使用它：

```
html {
  background-color: var(--main-bg-color);
} 
```

现在我们可以使用 JS 来改变它：

```
// From http://stackoverflow.com/a/5365036/2065702
const randomColor = "#"+((1<<24)*Math.random()|0).toString(16); 

document.documentElement.style.setProperty('--main-bg-color', randomColor); 
```

请注意，您还可以为特定元素创建 CSS 变量，而不仅仅是根文档元素。

或者您可以使用完全不同的方式来选择随机颜色（如用户输入）。这允许像主题化这样的可能性。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-10T21:45:41.697

我在这里为你找到了一些东西[，](http://sonspring.com/journal/easy-random-css-backgrounds)但它使用 PHP。我认为使用纯 CSS 是不可能的。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-12-29T20:22:52.307

```
<body style='background-color:<?php printf( "#%06X\n", mt_rand( 0, 0x222222 )); ?>'> 
```

使用 PHP

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-10T22:09:13.990

并不真地。动态性只能在脚本的支持下实现。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-09-07T14:26:09.493

不完全随机，但使用 CSS：

步骤 1 - 选择查询的背景，按顺序排列并调整频率

```
 @keyframes bgrandom {
    0% { background: linear-gradient(90deg, rgba(255,255,255,0.98) 50%, rgba(255,255,255,0.96) 0%); }
    50% { background: linear-gradient(90deg, rgba(255,255,255,0.98) 50%, rgba(255,255,255,0.96) 0%); }

    55% { background: linear-gradient(90deg,  rgba(255,255,255,0.96) 50%, rgba(255,255,255,0.98) 0%); }
    80% { background: linear-gradient(90deg, rgba(255,255,255,0.96)  50%, rgba(255,255,255,0.98) 0%); }

    85% { background: linear-gradient(90deg, rgba(255,255,255,0.96) 50%, rgba(255,255,255,0.94) 0%); }
    100% { background: linear-gradient(90deg, rgba(255,255,255,0.96) 50%, rgba(255,255,255,0.94) 0%); }
    } 
```

第 2 步 - 启动动画（长度动画名称重复模式）

```
 #element{  animation: 1.2s bgrandom infinite; } 
```

易于使用、自定义并且效果很好。类似的技术可用于滑块、微调器等。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-06-08T06:26:25.203

根据这个网站， [http://blog.codepen.io/2013/08/26/random-function-in-sass/](http://blog.codepen.io/2013/08/26/random-function-in-sass/) 它可能但不是纯css

# c# - 在代码优先实体框架中定义多对多关系

> ID：15327992
> 
> 赞同：5
> 
> 时间：2013-03-10T21:39:21.723
> 
> 标签：c#, entity-framework, ef-code-first, entity-framework-migrations

我的模型中有 3 个类，如下所示。

```
[Table("UserProfile")]
public class UserProfile
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int Id { get; set; }

    public string UserName { get; set; }

    public ICollection<MartialArtUserProfile> MartialArtUserProfiles { get; set; }
}

[Table("MartialArt")]
public class MartialArt
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int Id { get; set; }

    public string Name { get; set; }

    public string Description { get; set; }

    public string IconPath { get; set; }

    public string ImagePath { get; set; }

    public ICollection<MartialArtUserProfile> MartialArtUserProfiles { get; set; }
}

public class MartialArtUserProfile
{
    public int UserProfileId { get; set; }
    public UserProfile UserProfile { get; set; }

    public int MartialArtId { get; set; }
    public MartialArt MartialArt { get; set; }
} 
```

我有一个用于多对多关系的配置类，如下所示：

```
public class MartialArtUserProfileConfiguration : EntityTypeConfiguration<MartialArtUserProfile>
{
    public MartialArtUserProfileConfiguration()
    {
        HasKey(a => new { a.MartialArtId, a.UserProfileId });

        HasRequired(a => a.MartialArt)
            .WithMany(s => s.MartialArtUserProfiles)
            .HasForeignKey(a => a.MartialArtId)
            .WillCascadeOnDelete(false);

        HasRequired(a => a.UserProfile)
            .WithMany(p => p.MartialArtUserProfiles)
            .HasForeignKey(a => a.UserProfileId)
            .WillCascadeOnDelete(false);
    }
} 
```

在我尝试在**Package Manager Console中运行****Update-Database**时定义我的实体关系后，它说：

 **> 在模型生成期间检测到一个或多个验证错误：
> 
> \tSystem.Data.Entity.Edm.EdmEntityType: : EntityType 'MartialArtUserProfile' 没有定义键。定义此 EntityType 的键。\tSystem.Data.Entity.Edm.EdmEntitySet: EntityType: EntitySet 'MartialArtUserProfiles' 基于没有定义键的类型'MartialArtUserProfile'。

我究竟做错了什么？

提前致谢，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-25T14:44:58.710

如果我理解你只是想用一个传递表创建一个多对多。如果是这样，这是解决此问题的另一种方法。使用 Fluent API 映射如下。您可以将 更改`UserProfileToMartialArt`为您想要的表名。`MartialArtUserProfile`让 EF 为您创建中间地带，而不是创建模型。这还指定了您的密钥，这些密钥应该可以帮助您解决错误。

```
modelBuilder.Entity<UserProfile>()
    .HasMany(b => b.MartialArts)
    .WithMany(a => a.UserProfiles)
    .Map(m => m.MapLeftKey("MartialArtId")
        .MapRightKey("UserProfileId")
        .ToTable("UserProfileToMartialArt")); 
```

在武术模型放

```
public IList<UserProfile> UserProfiles { get; set; } 
```

在 UserProfile 模型中放置

```
public IList<MartialArt> MartialArts { get; set; } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-10T21:44:27.257

尝试这样做：

```
[Table("UserProfile")]
public class UserProfile
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int Id { get; set; }

    public string UserName { get; set; }

    [InverseProperty("UserProfiles")]
    public IList<MartialArt> MartialArts { get; set; }
}

[Table("MartialArt")]
public class MartialArt
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int Id { get; set; }

    public string Name { get; set; }

    public string Description { get; set; }

    public string IconPath { get; set; }

    public string ImagePath { get; set; }

    [InverseProperty("MartialArts")]
    public IList<UserProfile> UserProfiles { get; set; }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-08-29T15:38:39.070

在 EntityFramework 6.1 中，您不需要执行任何操作 - 只需将这两种类型的集合添加到每个类中，一切就到位了。

```
public class UserProfile {
    public int Id { get; set; }
    public string UserName { get; set; }
    public virtual ICollection<MartialArt> MartialArts { get; set; }

    public UserProfile() {
        MartialArts = new List<MartialArt>();
    }
}

public class MartialArt {
    public int Id { get; set; }
    public string Name { get; set; }
    // *snip*
    public virtual ICollection<UserProfile> UserProfiles { get; set; }

    public MartialArt() {
        UserProfiles = new List<UserProfile>();
    }
} 
```**

# sqlite - Windows Phone 8 SQLite 异步操作无限期挂起

> ID：15327993
> 
> 赞同：0
> 
> 时间：2013-03-10T21:39:46.590
> 
> 标签：sqlite, windows-phone-8

我有一个使用 SQLite 的 Windows Phone 8 应用程序。

我有一个问题，一些异步 SQLite 操作无限期挂起（大概是因为它们正在等待？）

这是一种这样的操作：

```
SQLiteAsyncConnection conn = new SQLiteAsyncConnection("myDatabase");
var query = conn.Table<MyTable>().Where(x => x.Name == "name");
var result = await query.ToListAsync();

foreach (var item in result)
{
// breakpoint in the code here is never reached
} 
```

这是在一个异步方法中，它返回一个 Task<string>

这个方法是从主页代码中提前调用的。主页从未真正构建，因为应用程序挂在此方法上（屏幕只是无限期地显示“正在加载...”，直到我停止）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T03:33:08.013

我猜你的调用堆栈（例如，在你的主页代码中）更进一步，你正在`Result`调用`Task<T>`. 这将使您的程序陷入僵局。[我在我的异步编程最佳实践](http://msdn.microsoft.com/en-us/magazine/jj991977.aspx)文章和[不要阻塞异步代码](http://blog.stephencleary.com/2012/07/dont-block-on-async-code.html)博文中详细解释了这一点。

总结一下：当你`await`是 uncompleted`Task`时，默认情况下当前上下文被捕获并用于`async`在完成后恢复方法的其余部分`Task`。在您的情况下，捕获的上下文是一个 UI 上下文，它只在指定的线程（UI 线程）上运行。

因此，您的主页代码调用您的操作`async`方法（捕获 UI 上下文）。您的代码返回一个未完成的调用它的主页代码。将（同步）阻塞直到完成。操作完成后，它会尝试在捕获的 (UI) 上下文中执行其余的方法。但是UI线程很忙；它被阻止等待完成。于是，陷入僵局。`await``ToListAsync``async``Task``Result``Result``Task``ToListAsync``async``Task`

# php - 从具有变量变量的现有数组创建多维数组

> ID：15327996
> 
> 赞同：0
> 
> 时间：2013-03-10T21:40:09.373
> 
> 标签：php, mysql, arrays, multidimensional-array

我正在创建一个类函数，它接受一个 mysql 查询结果并返回一个多维数组，其中第一个数组指针是表列，第二个指针是它在 MySQL 数据中位置的数字指示符。

例如，该表具有以下列：

```
Groupname
Groupid
Groupurl 
```

我想这样称呼它的方式是：

```
$arrayname[groupname][1]; 
```

我已经形成了 2 个数组，它们是：

`$colnames`其中包含来自特定 mysql 查询的所有列和

`$$colname`它是列名的变量变量，包含每列中的所有数据。例如：`$groupurl`是一个包含该列中所有数据的数组。

我似乎无法获得一个循环来将数组作为多维对象加入，虽然我可以为特定表手动执行此操作，但它是一个类函数，可变变量部分让我崩溃=\

================感谢IMSoP给了我这个想法，解决方案是==================

函数中的 $result 是对表的成功 MySQL 查询。

```
function tableAsMatrix($result)
{
    //declare $results as array for use in loop
    $results = array();

    //this gets all the col names and sets them as $colnames[]
    while( $cols = $result->fetch_field() )
    {
        $colnames[] = $cols->name;
    }

    //this loops through and assigns all cols as multidimensional $results[colname][id]
    foreach ($colnames as $fields)
    {
        while ($row = $result->fetch_array(MYSQLI_ASSOC))
        {
           foreach($colnames as $field)
           {
               $results[$field][] = $row[$field];
           }
        }
    }

    //return to object
    return $results;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:16:43.957

我使用的功能是：

```
function tableAsMatrix($result)
{
    //declare $results as array for use in loop
    $results = array();

    //this gets all the col names and sets them as $colnames[]
    while( $cols = $result->fetch_field() )
    {
        $colnames[] = $cols->name;
    }

    //this loops through and assigns all cols as multidimensional $results[colname][id]
    foreach ($colnames as $fields)
    {
        while ($row = $result->fetch_array(MYSQLI_ASSOC))
        {
           foreach($colnames as $field)
           {
               $results[$field][] = $row[$field];
           }
        }
    }

    //return to object
    return $results;

} 
```