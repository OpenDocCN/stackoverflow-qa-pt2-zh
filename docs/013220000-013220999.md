# StackOverflow 问答 13220000-13220999

# model-view-controller - 静态外部流数据源 MVC

> ID：13220001
> 
> 赞同：-1
> 
> 时间：2012-11-04T15:36:00.243
> 
> 标签：model-view-controller, web-applications

我是 MVC 的新手，据我所知，每个 Web 请求都是独立的，在控制器中，您通常会创建一个新的 Model 对象并从某个数据源加载它。当您使用数据库并加载所需的模型对象时，这非常棒。

但是，如果我的数据源是实时流数据，并且当用户单击按钮时，我需要向他提供我从流中获得的最后数据怎么办？

### 我能想到的最简单的例子是股票数据：

> 假设我有一个连接到交易所并订阅实时股票价格的数据源对象，并且当客户点击“获取最后报价”按钮时，我需要返回我得到的最新价格（*注意：*我不需要将数据流式传输到客户端，仅在他单击时或每 5 秒返回一个快照等）。

所以我要做的是，当应用程序开始创建我的静态数据源对象时，将其连接到交易所并开始收听提要，在每次价格变化时将其存储在某个局部变量中，并在我的控制器中我需要做的就是调用我的静态数据源并询问最后一个刻度（它将返回局部变量的值）。

希望我的问题很清楚。我知道，这可能很简单，但我只是不知道，MVC 中的正确模式是什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T23:44:38.923

我将从 4 个部分创建它：

*   后台进程/守护进程，不断将股票数据推送到 NoSQL 数据库
*   服务于网站的主应用程序
*   javascript 驱动程序前端应用程序，每隔几秒侦听打开的套接字或请求数据
*   数据提供者，它从 NoSQL 中提取信息并处理前端请求

在主应用程序和前端使用一些受 MVC 启发的模式是有意义的（是的，两个 MVC 三元组）。但其余的只是美化的交易脚本。

# css - 带文本缩进的内联文本的背景颜色填充

> ID：13220007
> 
> 赞同：1
> 
> 时间：2012-11-04T15:37:08.523
> 
> 标签：css, background, padding, text-indent

我基本上是在尝试使用包含文本缩进的段落来执行[此](https://stackoverflow.com/questions/4994653/add-padding-at-the-beginning-and-end-of-each-line-of-text/4995866#4995866)操作，但无法获得它，因为 display:inline 不允许文本缩进。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T15:47:41.197

## 使用伪元素

我创建了一个[JSFiddle 示例](http://jsfiddle.net/Jmk4D/2)，该示例使用`span`元素，然后`inline`添加伪元素以在每个突出显示的文本块的前面和末尾添加额外的间距。`before``after`

如果您需要`font-size`在这些伪元素中调整该空间的数量，那么您应该很高兴。

诀窍就是：

```
.highlight {
    font-family: Helvetica, Sans-serif;
    font-size: 48pt;
    font-weight: bold;
    text-transform: uppercase;
}
    .highlight:before,
    .highlight:after {
        /* no-breaking-space (nbsp) entity */
        content: "\00a0";
    } 
```

## 控制空间量

`:before`在和伪元素中使用适当的字符，`:after`实际上可以控制添加到单个像素的间距量。

最好的方法是`thin space`在印刷术语中使用 em 的 1/5 或有时 1/6。如果我们`font-size`将这两个伪元素设置为 6 像素，那么无论尺寸差异如何，薄空间都应始终接近 1 像素宽度。

```
.highlight:before,
.highlight:after {
    content: "\2009";
    font-size: 6px;
} 
```

上部样式定义将在每侧添加 1 个像素的空间。如果我们[在 content 中放置 5 个细空间](http://jsfiddle.net/Jmk4D/3/)，我们将得到 5 个像素空间......

或者使用一个薄的空间并为其添加填充并以这种方式控制其宽度。甚至取消任何内容，只使用填充：

```
.highlight:before,
.highlight:after {
    content: "";
    padding: 0 5px; /* will give 10px space */
} 
```

但是，可以将空间量控制到像素粒度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-24T13:13:23.810

没有 br 标签：这里的演示：http: [//jsfiddle.net/korigan/jzm3qu1q/1/](http://jsfiddle.net/korigan/jzm3qu1q/1/)

HTML

```
 <div class="wrap">
     <p class="highlight">
        <span class="text">Amet assumenda atque eos excepturi harum ipsa</span>
     </p>
 </div> 
```

CSS

```
.wrap {
    width: 150px;
}
.highlight {
    color: #fff;
    display: inline;
    background: blue;
    font-size: 25px;
    font-weight: normal;
    line-height: 1.2;
}
.highlight .text {
        padding: 4px;
        box-shadow: 4px 0 0 blue, -4px 0 0 blue;
        background-color: blue;
        box-decoration-break: clone; /* For Firefox */
} 
```

# jquery - jQuery手机iPhone点击调用servlet 6次

> ID：13220015
> 
> 赞同：2
> 
> 时间：2012-11-04T15:37:46.350
> 
> 标签：jquery, iphone, servlets, mobile, click

我在使用 JQuery Mobile 调用 servlet 时遇到问题。使用 iPhone，我注意到 servlet SendMp3Servlet 在列表条目上单击一次被调用 6 次。使用 Chrome 的桌面版本，servlet 只被正确调用一次。有人可以帮我找到问题吗？

这是代码：

```
<!DOCTYPE html> 
<html> 
<head> 
    <title>Canzoni</title> 
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
    <script src="popola_liste.js"></script>
</head> 
<body>
    <script >

    </script>
    <div data-role="page">

        <div data-role="header" >
            <a href="Album.html" data-rel="back">back</a>
            <h1>Project ML</h1>
        </div>

        <div data-role="content">   
            <ul id="listviewSong" data-role="listview" data-inset="true" data-filter="true">
                <script>$.getJSON("GestoreCanzoni?idAlbum="+sessionStorage.getItem("idAlbum"), function(data){
                    var output = '';

                    $.each(data, function(index, value){
                        output += '<li><a href="#" onclick="sessionStorage.setItem(\'idCanzone\',\''+value.id+'\');"> ' + value.nome + '</li>';
                    });

                    $('#listviewSong').append(output).listview('refresh');

                    var event = (navigator.userAgent.match(/iPhone|iPad/i)) ? 'touchstart' : 'click';
                    $('#listviewSong').unbind(event).bind(event,function(e){
                        alert("c");
                        update_player();
                    });

                });</script> 
            </ul>       
        </div><!-- /content -->

        <div data-role="footer" data-position="fixed" data-id="player">
            <audio id="player_audio" controls="controls">
                <source id="src_player" src="sessionStorage.getItem('request_mp3')" type="audio/mpeg" />
            </audio>
        </div>

    </div>

</div><!-- /page -->

</body>
</html> 
```

这是点击时调用的js函数：

```
 function update_player(){
        lastIdCanzone=sessionStorage.getItem("idCanzone");
        var id=sessionStorage.getItem('idCanzone');
        sessionStorage.setItem('request_mp3','/Libreria_musicale_server/SendMp3Servlet?idCanzone='+id);
        document.getElementById("src_player").src="/Libreria_musicale_server/SendMp3Servlet?idCanzone="+id;
        document.getElementById("player_audio").load();
        document.getElementById("player_audio").play();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T06:39:30.567

Jquery mobile 有点棘手...首先，您为什么不使用 jquery mobile 事件，例如：(tap,click ....) 而不是 javascript onclick 事件。

另一件事是iphone上的jquery mobile有时会触发两次点击事件，因此请尝试使用tap。

# html - 如何在 HTML5 中播放 3gp 视频？

> ID：13220019
> 
> 赞同：3
> 
> 时间：2012-11-04T15:38:18.293
> 
> 标签：html, html5-video, 3gp

无法使用 HTML5 播放 3gp 文件。我有 Firefox 16 和 Chromium 版本 22，我得到的结果如下：

> 未找到支持格式和 MIME 类型的视频。

这是我使用的代码：

```
<video controls="controls">
<source src="rtsp://v2.cache2.c.youtube.com/CiQLENy73wIaGwlkcZfgin6szRMYDSANFEgGUghzdGFuZGFyZAw=/0/0/0/video.3gp" type="video/3gpp">
Your browser does not support the video tag.
</video> 
```

# vim - Vim 不接受 Leader 键 - 超时设置，重新映射为 ","，但只有哔哔声

> ID：13220020
> 
> 赞同：1
> 
> 时间：2012-11-04T15:38:28.820
> 
> 标签：vim, leader

我是 Vim 新手，目前在新安装的 OSX 10.7 上的 MacVim 中遇到我的 Leader 密钥问题。

我尝试将 Leader 键重新映射到“，”，使用

> 让 mapleader=","

（在我的 .vimrc 文件中，在它的最顶部），增加了超时（到 10000 毫秒）。我也激活了

> 设置显示命令

看看它是否会着火——但它不会。

> ：详细地图，

有趣的是，报告“没有找到映射”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-04T09:55:24.680

问题已解决 - 这是我全新安装的所有内容，只是停用了文件类型插件。因此，根本没有映射。

我通过添加重新激活了文件类型插件

```
filetype plugin on 
```

到我的`.vimrc`档案。

# email - 将 HTML 转换为 PDF，然后从 portlet 发送电子邮件

> ID：13220029
> 
> 赞同：0
> 
> 时间：2012-11-04T15:39:52.257
> 
> 标签：email, pdf, liferay, portlet, email-attachments

我设计了一个具有 HTML 表单的 portlet，因此在处理完表单后会显示值。一切都是在 JSP 页面中设计和计算的。

现在我需要一种方法将显示的结果转换为 PDF 文件并将其通过电子邮件发送给用户。

我正在使用与 Tomcat 7.0 捆绑的 Liferay 6.1 版本。

有人可以建议我怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:39:27.570

这是代码。

```
MailMessage message = new MailMessage(from, to, "title of the content ", template, true); 
```

MailServiceUtil.sendEmail(消息);

假设您知道如何配置发件人、收件人地址以及作为邮件正文的模板。如果不知道，请回复。

# c# - 使用枚举器在数组中显示结构

> ID：13220032
> 
> 赞同：1
> 
> 时间：2012-11-04T15:40:12.997
> 
> 标签：c#, arrays, oop, struct, iterator

在一个对象中，我有：

```
public IEnumerable<voiture> recup_voitures()
{
    foreach (voiture v in _arrVCollection)
    {
        yield return (v);
    }
} 
```

`voiture`是一个结构并且`_arrVCollection`是一个包含一些结构体的数组。

在我的主要课程中，我有：

```
 foreach (CarCollection.voiture o in collection.recup_voitures())
 {
     //some code to display the content of each struct
 } 
```

发生的事情是，如果我有一个长度为 5 的数组并且其中只有 1 个 struct voiture，它将显示代码 5 次而不是仅 1 次。我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T15:47:24.803

如果您正在创建长度为 5 的结构数组，这意味着数组将包含使用默认构造函数构造的 5 个结构。

```
voiture[] arr = new voiture[5];
arr[0] = some_non-default_voiture; 
```

在这种情况下，您的数组将包含一个非默认`voiture`实例和四个默认实例。

要仅获取一个`voiture`实例，您可以创建长度为 1 的数组，或使用`List<T>`：

```
List<voiture> = new List<voiture> { new voiture() }; 
```

如果您确实需要处理长度为 5 的数组，请考虑使用可空类型：

```
voiture?[] _arrVCollection = new voiture?[5];
_arrVCollection[0] = new voiture(); 
```

并像这样枚举：

```
public IEnumerable<voiture> recup_voitures()
{
    foreach (voiture? v in _arrVCollection)
    {   if (v.HasValue)
            yield return v.Value;
    }
} 
```

**编辑：**

正如 Servy 提到的，方法`recup_voitures()`可以用 linq 重写：

```
public IEnumerable<voiture> recup_voitures()
{
    return _arrVCollection.Where(x => x.HasValue).Select(x => x.Value);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T15:51:34.567

在您当前的代码中，您会遇到异常。

如果将是类，您可以在`recup_voitures`方法中更改代码：`voiture`

```
 public static IEnumerable<voiture> recup_voitures()
        {
            foreach (voiture v in _arrVCollection)
            {
                if (v != null)
                    yield return (v);
            }
        } 
```

# memory - 如何同时在多个精灵上运行动作

> ID：13220037
> 
> 赞同：3
> 
> 时间：2012-11-04T15:40:28.857
> 
> 标签：memory, cocos2d-iphone, action, sprite

我是 cocos2d 的新手。我正在编写我的第一个应用程序。但是我有一个问题我无法解决。问题是当我移动多个精灵时，除了最后一个之外，其他精灵都可以。我希望我的精灵同时运行动作。但我不知道如何解决它。关于推广我的代码的任何想法或建议。谢谢。

这是我的代码。

```
-(void) setHeadFace:(Face *)headFace moveFrom:(CGPoint)startPosition moveTo:(CGPoint)endPosition`

{

        CCMoveTo *moveOut = [CCMoveTo actionWithDuration:0.2f position:startPosition];
        CCScaleTo *scaleTo = [CCScaleTo actionWithDuration:0.2f scale:0.0f];
        CCSpawn *moveFrom = [CCSpawn actions:moveOut,scaleTo,nil];

        CCMoveTo *moveTo = [CCMoveTo actionWithDuration:0.0f position:endPosition];

        CCSequence *headAction = [CCSequence actions:moveFrom,moveTo,nil];
        [headFace.faceSprite runAction:headAction];
}

-(void) setMidlFace:(Face *)curtFace moveTo:(CGPoint)movePosition nextFace:(Face *)nextFace

{

        CCMoveTo *moveTo = [CCMoveTo actionWithDuration:0.2f position:movePosition];

        CCSequence *moveAction = [CCSequence actions:moveTo,nil];
        [curtFace.faceSprite runAction:moveAction];

        nextFace.faceSprite = curtFace.faceSprite;
        nextFace.faceType = curtFace.faceType;
        [nextFace.faceSprite setPosition:movePosition];
}

-(void) setTailFace:(Face *)tailFace moveTo:(CGPoint)movePosition 
                            byGuardSprite:(CCSprite *)guardSprite`
{

        CCDelayTime *delay = [CCDelayTime actionWithDuration:0.2f];
        CCMoveTo *moveIn = [CCMoveTo actionWithDuration:0.2f position:movePosition];
        CCScaleTo *scaleTo = [CCScaleTo actionWithDuration:0.2f scale:1.0f];
        CCSpawn *moveTo = [CCSpawn actions:moveIn,scaleTo,nil];

        CCCallBlock *touchBlock =[CCCallBlock actionWithBlock:^{
                tailFace.faceSprite = guardSprite;
                tailFace.faceType = guardSprite.tag;
                tailFace.faceSprite.tag = -1;

                isTouch = YES;
        }];

        CCSequence *tailAction=[CCSequence actions:delay,moveTo,touchBlock,nil];
        [guardSprite runAction:tailAction];
}

-(void) moveFaces:(Face *)face direction:(int)direction`

{

        CCSprite *guardSprite = nil;

        CGPoint movePosition;
        CGPoint curtPosition;
        CGPoint startPosition;
        CGPoint endPosition;

        int x = face.cdX;
        int y = face.cdY;

        CGFloat width = faceGrid[x][0].position.x;
        CGFloat height = faceGrid[0][y].position.y;

        switch (direction) {
        case MOVE_DOWN:            
            CCLOG(@"move down:direction %d", direction);

            movePosition = CGPointMake(width,faceGrid[x][0].position.y);

            //move the first face out of the grid
            startPosition = CGPointMake(width,faceGrid[x][0].position.y-GRID_OFFSET.y/2);
            endPosition = CGPointMake(width,faceGrid[x][GRID_HEIGHT-1].position.y+GRID_OFFSET.y/2);

            [self setHeadFace:faceGrid[x][0] moveFrom:startPosition moveTo:endPosition];

            guardSprite = faceGrid[x][0].faceSprite;
            guardSprite.tag = faceGrid[x][0].faceType;

            for (int j=1; j<GRID_HEIGHT; j++)
            {
                curtPosition=CGPointMake(width,faceGrid[x][j].position.y);

                //move the middle face to the next face
                [self setMidlFace:faceGrid[x][j] moveTo:movePosition nextFace:faceGrid[x][j-1]];

                movePosition = curtPosition;
            }

            //use the guard face to set the last face's move action
            [self setTailFace:faceGrid[x][GRID_HEIGHT-1] moveTo:movePosition byGuardSprite:guardSprite];

            break;
            ......
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T16:05:02.700

我出于同样的目的使用了刻度功能。

```
-(void)onEnter
{
    [super onEnter];

    self.isTouchEnabled = true;

    [self schedule: @selector(tick:)];
}

-(void) tick: (ccTime) dt
{    
    CGPoint pos = head.position ; 

    head.position = ccp(pos.x+gameSpeed, pos.y);

    pos = tail.position ;
    tail.position = ccp(pos.x+gameSpeed, pos.y);

} 
```

# shell - play框架，为什么安装脚本会报python语法错误？

> ID：13220039
> 
> 赞同：-1
> 
> 时间：2012-11-04T15:40:52.083
> 
> 标签：shell, playframework, syntax-error

我正在尝试按照说明安装播放框架，[但是](http://www.playframework.org/documentation/2.0.4/Installing) 我没有成功执行作为安装文件的播放脚本。

到目前为止我做了什么：

1.  安装了 open java，所以现在 java -version 和 jaac -version 都可以工作
2.  `chmod a+x ./play`确实赋予了脚本的权利，我什至做了`chmod a+x play-2.0.4`整个目录
3.  没有成功后，我发现播放脚本可以用这个来执行：python ./play

但是我收到此错误：

```
 File "./play", line 4
    while [ -h "$PRG" ] ; do
                    ^
SyntaxError: invalid syntax 
```

所以我的问题是：为什么会发生这种语法错误，脚本似乎不可能有语法错误？

仅供参考，这是整个脚本：

```
done
dir=`dirname $PRG`

if [ -f conf/application.conf ]; then
  if test "$1" = "clean-all"; then
    rm -rf target
    rm -rf tmp
    rm -rf logs
    rm -rf dist
    rm -rf project/project
    rm -rf project/target
    if [ $# -ne 1 ]
    then  
     shift
    else
      echo "[info] Done!"
      exit 0
    fi
  fi
  if test "$1" = "stop"; then
    if [ -f RUNNING_PID ]; then
      echo "[info] Stopping application (with PID `cat RUNNING_PID`)..."
      kill `cat RUNNING_PID`

      RESULT=$?

      if test "$RESULT" = 0; then
        echo "[info] Done!"
        exit 0
      else
        echo "[\033[31merror\033[0m] Failed ($RESULT)"
        exit $RESULT
      fi
    else
      echo "[\033[31merror\033[0m] No RUNNING_PID file. Is this application running?"
      exit 1
    fi
  fi

  if test "$1" = "debug"; then
    JPDA_PORT="9999"
    shift      
  fi

  if [ -n "$1" ]; then
    JPDA_PORT="${JPDA_PORT}" $dir/framework/build "$@"
  else
    JPDA_PORT="${JPDA_PORT}" $dir/framework/build play
  fi

else
  java -Dsbt.ivy.home=$dir/repository -Dplay.home=$dir/framework -Dsbt.boot.properties=$dir/framework/sbt/play.boot.properties -jar $dir/framework/sbt/sbt-launch.jar "$@"
fi 
```

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T15:54:07.703

您正在尝试使用 Python 运行 shell 脚本，这将永远无法工作。

尽管 Play 版本 1 使用了 Python，但版本 2 已改为使用 shell 脚本。

# html - 更改字体颜色

> ID：13220040
> 
> 赞同：0
> 
> 时间：2012-11-04T15:40:59.437
> 
> 标签：html, css, fonts, colors

我使用其他人的编码创建了一个联系表。在这里查看 - [http://orchardhillsdesigns.com/contact_form/contactform.php](http://orchardhillsdesigns.com/contact_form/contactform.php)。我遇到的一个小问题是“点击刷新”的字体颜色。我对Javascript一无所知。我写信给开发者，但邮件被退回，他的版权是 2008 年，所以我认为他已经走了。

我偏执地触摸脚本并将其搞砸。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T15:46:09.643

为此，您不需要 JavaScript。它只是简单明了的 CSS。

```
a {color: #333;}
a:hover {color: #f0f0f0;}
a:active {color: #ccc;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T17:28:05.683

Jezen 已经回答了您，但您似乎不确定如何处理 CSS。

好的，让我们一步一步来。这是显示“单击以刷新”的锚点的选择器

```
.short_explanation a {color: #ccc;}
.short_explanation a:hover {color: #f0f0f0;}
.short_explanation a:active {color: #ccc;} 
```

现在把这个放在哪里？我猜该联系表单有一个名为contact.css 的文件，打开该文件进行编辑并将CSS 粘贴到文件中其他CSS 规则的下方或上方。

# javascript - HTML 如何处理 Esc 键与其他键

> ID：13220043
> 
> 赞同：0
> 
> 时间：2012-11-04T15:41:07.903
> 
> 标签：javascript, html

在这行代码中，ACCESSKEY 属性产生了预期的结果：

```
<input type="button" value="Cancel" id="bDism" name="bDism" onclick="MyProc()" ACCESSKEY=&#97> 
```

（除了作品之外的其他小写字母 - 还没有全部尝试过！）。当您按 ALT 时，将调用一个 MyProc。

现在这个不行

```
<input type="button" value="Cancel" id="bDism" name="bDism" onclick="MyPro()" ACCESSKEY=&#27> 
```

有人可以解释为什么吗？（在相同的形式中，我还有一个带有 ACCESSKEY= 的 OK 按钮——它是 LF，即 Enter，尽管 LF 和 ESC 一样是一个控制字符，但它仍然有效）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T15:55:09.267

规范没有定义哪些字符可以作为`accesskey`属性值出现以及确切的功能是什么。实际上，浏览器以不同的方式支持一组有限的值，通常是字母和数字；见[MDN 上`accesskey`](https://developer.mozilla.org/en-US/docs/HTML/Global_attributes)。

最初旨在促进可访问性，该`accesskey`属性通常已成为问题而不是解决方案的一部分，部分原因是不兼容的实现以及由于它与键盘快捷键的其他用途的干扰。[参见例如关于键盘辅助功能](http://webaim.org/techniques/keyboard/accesskey)的 WebAIM 页面。

如果您对 HTML 中的键盘命令有一些特殊需求，那么使用 JavaScript 处理键盘事件可能是一种更成功的方法。

# javascript - jquery“如果”某事和“其他”某事

> ID：13220045
> 
> 赞同：0
> 
> 时间：2012-11-04T15:41:12.847
> 
> 标签：javascript, jquery, onclick

我只是好奇有人会怎么做这个。我试图在缺乏知识的情况下弄清楚，当然我做不到。

所以它会像......

如果在 jquery 中声明了 onClick 函数，例如“firstGateway”和“secondGateway”，我该如何添加如果有第一个，如果有第二个怎么办。

我什至不能很好地解释。

但是让我试试。

```
<a onClick="firstGateway">YES FIRST!</a> 
```

那将是 html 片段，jquery 需要运行以下内容：

```
<script type="text/javascript" src="http://fileice.net/gateway/mygate.php?id=492b542f45684b42"></script>
onClick=startGateway('123456'); 
```

如果它是这样的html：

```
<a onClick="secondGateway">YES SECOND!</a> 
```

然后jquery会运行如下：

```
<script type="text/javascript" src="http://fileice.net/gateway/mygate.php?id=4465766c4278366467523838"></script>
onClick=startGateway('654321'); 
```

希望你能理解我。我仍然会努力让它发挥作用，但我认为我不会成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T15:43:32.110

```
$('a').click(function(e){
    if (e.target.innerHTML == "something")
        //fooo
    else
        // Bar
}); 
```

您可以在回调中检查您想要的任何内容。`e.target`是被点击的锚点。

```
if (e.target.id == "someId")
if ($(e.target).hasClass('fooClass')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T16:07:41.520

使用您当前的代码，如果有人单击该链接，则不会发生任何事情。让我们首先解决这个问题：

这：

```
<a onClick="firstGateway">YES FIRST!</a> 
```

应该是这样的：

```
<a onClick="firstGateway()">YES FIRST!</a> 
```

如果您想`firstGateway()`在用户单击该链接时执行该功能。但是，这仍然不是最好的方法，我将在下面向您展示更好的方法。（请注意，我的最终解决方案也需要这种更好的方法）。

现在我们把它变成：

```
<a id='gateway1'>YES FIRST!</a> 
```

我们不再在 HTML 中定义事件，而是使用 jQuery 在 javascript 中定义：

```
$(document).ready(function ()
{
    $('a#gateway1').click = firstGateway; // Do note: this time around there are 
                                          // no brackets
} 
```

使用它，您现在可以做几件事。首先，您可以这样做：

```
$('a#gateway1').click(); 
```

它模拟点击链接，我相信它会做你想做的事情。

但是，为了编写代码，您必须确保知道您在 javascript 中连接到的函数是什么，因此您甚至可能不再需要这样的解决方案，因为您应该能够做到这一点：

```
$(document).ready(function ()
{
    $('a#gateway1').click = firstGateway; // Do note: this time around there are 
                                          // no brackets

    firstGateway();
} 
```

# regex - JavaTokenParser Parser 在我创建的两种类型之间感到困惑

> ID：13220047
> 
> 赞同：0
> 
> 时间：2012-11-04T15:41:31.177
> 
> 标签：regex, parsing, scala, token

这是针对一堂课的，所以我更喜欢阅读提示或其他内容，而不仅仅是答案，除非它只是一个明显的错误。解析器在 DATE 和 VARCHAR 之间感到困惑我相信这是因为它们都以刻度线 (') 开头并以刻度线结尾。我不能改变它需要保持这种方式的语法

```
def atype: Parser[Any] =  "(?i)INTEGER".r | "(?i)REAL".r | "(?i)BOOLEAN".r | "(?i)VARCHAR".r  | "(?i)DATE".r 

def typeDate: Parser[Value] = "'" ~ dayOrMonth ~"/"~dayOrMonth~"/"~year ~ "'" ^^
        {case _ ~ a ~ _ ~ b ~ _ ~ c ~ _ => new typeDate(a,b,c)}

def dayOrMonth: Parser[String]= "([0-9][0-9])".r 

def year:Parser[String] = "([0-9][0-9][0-9][0-9])".r

def stringExpression: Parser[Value] = "'" ~> string <~ "'"  ^^
        {case a => new stringExpression(a)}
def string: Parser[Any] = letters

def letters: Parser[Any] =  """([a-zA-Z])+""" r 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T15:56:24.087

我发现我的问题字符串应该定义为

`def string: Parser[Any] = """([a-zA-Z0-9])+""" r`

# java - 在 IntelliJ IDEA 中更改 VM 设置：VM 初始化期间发生错误

> ID：13220048
> 
> 赞同：2
> 
> 时间：2012-11-04T15:41:50.007
> 
> 标签：java, maven, intellij-idea, jvm, size

试图在 IntelliJ IDEA 中使用 maven 安装模块。这样做会引发以下错误

```
Error occurred during initialization of VM
Could not reserve enough space for object heap
Could not create the Java virtual machine.
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] There are test failures. 
```

我的问题是：

1.  这是由于idea/bin/vmoptions 文件中的VM 大小设置造成的吗？增加它会有什么不同吗？
2.  如果是这样，我该怎么做？由于我没有编辑文件的必要权限，是否有其他选项可以从 IntelliJ 更改它而不是编辑文件？
3.  如果不可能，是否真的值得请求管理员权限来更改它？

编辑：当前 vmoptions 文件内容（使用**Intellij IDEA 8.1.4**）

```
-Xms32m
-Xmx256m
-XX:MaxPermSize=150m
-ea 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-04T17:34:05.007

这有两个方面。

*   如果您使用的是 32 位 JVM 并且有 4GB 或更多内存，那么您可能会遇到[Java 内存不连续的问题。](https://stackoverflow.com/a/497757/1079354) 解决方案是切换到 64 位 JVM。

*   如果您已经在使用 64 位 JVM，则增加运行应用程序时使用的内存量。以下是一些数字：

    ```
    -Xms128m
    -Xmx512m
    -XX:MaxPermSize=300m
    -ea 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-09T21:59:18.843

Intellij安装目录idea.exe.vmoptions和idea64.exe.vmoptions有两个文件。我在一段时间内更改了错误的文件以增加内存，但无法使其正常工作。打开相应的文件并按照上一个答案中提到的增加内存来解决这个问题。

# c - POSIX 文件锁是可重入的吗？

> ID：13220054
> 
> 赞同：5
> 
> 时间：2012-11-04T15:42:34.447
> 
> 标签：c, unix, locking, posix, fcntl

我~~通过~~`fcntl`. _ 我想知道这些锁是否是可重入的，即。进程可以获取它已经拥有的锁吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T16:03:41.663

建议锁定`fcntl`是基于每个进程的，并且只是在给定进程的文件上累积锁定间隔。也就是说，由应用程序来跟踪间隔，并且任何对间隔的解锁调用都将解锁它，而不管对该间隔进行了多少次锁定调用。

更糟糕的是，关闭文件的任何文件描述符都会取消文件上的所有锁定：

> 除了通过显式 F_UNLCK 删除之外，记录锁在进程终止或关闭任何引用持有锁的文件的文件描述符时会自动释放。这很糟糕：这意味着当库函数出于某种原因决定打开、读取和关闭文件时，进程可能会失去对 /etc/passwd 或 /etc/mtab 等文件的锁定。

# c# - 如何重新打开或重置 WebBrowser 控件？

> ID：13220055
> 
> 赞同：2
> 
> 时间：2012-11-04T15:42:40.287
> 
> 标签：c#, winforms, webbrowser-control, sessionid

我正在使用`WebBrowser`控件编写 Windows 窗体应用程序，我需要`Session ID`在 Web 服务器上进行更改。我该怎么做？有什么方法可以重启或重新打开浏览器吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T15:48:30.000

要清除会话（例如 HttpOnly cookie），您可以使用 wininet.dll 中的 InternetSetOption()。

```
private const int INTERNET_OPTION_END_BROWSER_SESSION = 42;

[DllImport("wininet.dll", SetLastError = true)]
private static extern bool InternetSetOption(IntPtr hInternet, int dwOption, IntPtr lpBuffer, int lpdwBufferLength); 
```

并在需要清除会话时使用此方法。

```
InternetSetOption(IntPtr.Zero, INTERNET_OPTION_END_BROWSER_SESSION, IntPtr.Zero, 0);
webBrowser1.Document.Window.Navigate(url); 
```

# javascript - 连接元件

> ID：13220057
> 
> 赞同：0
> 
> 时间：2012-11-04T15:42:46.183
> 
> 标签：javascript

```
<script>
document.getElementsByClassName("student")[0].onclick = addStudent("new element",text here ",document.getElementsByClassName("Class")[0]);
function addStudent(name,text,hendle)
{
var div=document.createElement("div");
var dt=document.createElement("dt");
var strong=document.createElement("strong").innerHTML = name;
var dd=document.createElement("dd").innerHTML = text;
dt.appendChild(strong);
div.appendChild(dt);
div.appendChild(dd);

div.setAttribute("class","student");
hendle.appendChild(div);
}
</script>` 
```

---> 当我运行脚本时，萤火虫出现错误：

```
NS_ERROR_XPC_BAD_CONVERT_JS: Could not convert JavaScript argument arg 0         [nsIDOMHTMLElement.appendChild]
[Break On This Error] 
```

dt.appendChild（强）；

---> 而且这个脚本也不起作用..脚本位置在页面的末尾。如何解决？（我才开始学习 javascript）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T15:45:48.513

此语句不执行您的代码假定的操作：

```
var strong=document.createElement("strong").innerHTML = name; 
```

这会将 DOM 元素的变量“strong”和“innerHTML”属性设置为“name”的值。我想你想要这个：

```
var strong = document.createElement("strong");
strong.innerHTML = name; 
```

`<dd>`您创建的也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T15:45:24.523

有了这些，您就可以将分配给变量的值分配给`innerHTML` 变量。

```
var strong=document.createElement("strong").innerHTML = name;
var dd=document.createElement("dd").innerHTML = text; 
```

您需要将元素存储在变量中，然后应用`.innerHTML`

```
var strong=document.createElement("strong");
strong.innerHTML = name;
var dd=document.createElement("dd");
dd.innerHTML = text; 
```

* * *

FWIW，我会像这样重写这段代码：

```
function addStudent(name, text, hendle) {
    var div = hendle.appendChild(document.createElement("div"));

    div.classname = "student";

    div.appendChild(document.createElement("dt"))
       .appendChild(document.createElement("strong")).innerHTML = name;

    div.appendChild(document.createElement("dd")).innerHTML = text;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T15:47:28.713

`strong`不是`string`元素

如果你想在点击时调用一个方法，你应该提供函数参考。

```
document.getElementsByClassName("student")[0].onclick = function(){

      addStudent("new element",text here ",document.getElementsByClassName("Class")[0]);
     } 
```

# python - scipy.odeint 奇怪的行为

> ID：13220058
> 
> 赞同：0
> 
> 时间：2012-11-04T15:42:51.213
> 
> 标签：python, scipy

这是我求解微分方程 dy / dt = 2 / sqrt(pi) * exp(-x * x) 以绘制 erf(x) 的代码。

```
import matplotlib.pyplot as plt
from scipy.integrate import odeint
import numpy as np
import math

def euler(df, f0, x):
    h = x[1] - x[0]
    y = [f0]
    for i in xrange(len(x) - 1):
        y.append(y[i] + h * df(y[i], x[i]))
    return y

def i(df, f0, x):
    h = x[1] - x[0]
    y = [f0]
    y.append(y[0] + h * df(y[0], x[0]))
    for i in xrange(1, len(x) - 1):
        fn = df(y[i], x[i])
        fn1 = df(y[i - 1], x[i - 1])
        y.append(y[i] + (3 * fn - fn1) * h / 2)
    return y

if __name__ == "__main__":
    df = lambda y, x: 2.0 / math.sqrt(math.pi) * math.exp(-x * x)
    f0 = 0.0
    x = np.linspace(-10.0, 10.0, 10000)

    y1 = euler(df, f0, x)
    y2 = i(df, f0, x)
    y3 = odeint(df, f0, x)

    plt.plot(x, y1, x, y2, x, y3)
    plt.legend(["euler", "modified", "odeint"], loc='best')
    plt.grid(True)
    plt.show() 
```

这是一个情节：

![阴谋](../Images/c25003c42f87051c73e28e6160ea4f89.png)

我是否以错误的方式使用 odeint 或者它是一个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T16:18:49.050

请注意，如果您更改`x`为`x = np.linspace(-5.0, 5.0, 10000)`，那么您的代码将有效。因此，我怀疑问题与非常小或非常大`exp(-x*x)`时太小有关。`x`[总推测：也许 odeint (lsoda) 算法根据周围采样的值调整其步长，`x = -10`并以这样的方式增加步长，从而`x = 0`错过周围的值？]

可以通过使用`tcrit`参数来修复代码，该参数告诉`odeint`要特别注意某些关键点。

所以，通过设置

```
y3 = integrate.odeint(df, f0, x, tcrit = [0]) 
```

我们告诉`odeint`在 0 附近更仔细地采样。

```
import matplotlib.pyplot as plt
import scipy.integrate as integrate
import numpy as np
import math

def euler(df, f0, x):
    h = x[1] - x[0]
    y = [f0]
    for i in xrange(len(x) - 1):
        y.append(y[i] + h * df(y[i], x[i]))
    return y

def i(df, f0, x):
    h = x[1] - x[0]
    y = [f0]
    y.append(y[0] + h * df(y[0], x[0]))
    for i in xrange(1, len(x) - 1):
        fn = df(y[i], x[i])
        fn1 = df(y[i - 1], x[i - 1])
        y.append(y[i] + (3 * fn - fn1) * h / 2)
    return y

def df(y, x):
   return 2.0 / np.sqrt(np.pi) * np.exp(-x * x)

if __name__ == "__main__":
    f0 = 0.0
    x = np.linspace(-10.0, 10.0, 10000)

    y1 = euler(df, f0, x)
    y2 = i(df, f0, x)
    y3 = integrate.odeint(df, f0, x, tcrit = [0])

    plt.plot(x, y1)
    plt.plot(x, y2)
    plt.plot(x, y3)
    plt.legend(["euler", "modified", "odeint"], loc='best')
    plt.grid(True)
    plt.show() 
```

# android - 错误 - 此应用程序未配置为 Android 推送。- 安卓 - 城市飞艇

> ID：13220059
> 
> 赞同：0
> 
> 时间：2012-11-04T15:42:49.493
> 
> 标签：android, urbanairship.com

我已按照以下步骤设置城市飞艇来测试推送通知。

[第 1 步：在https://go.urbanairship.com](https://go.urbanairship.com)中创建免费试用帐户

第 2 步：使用 Google API 控制台创建 API 密钥和项目 ID 我按照[https://docs.urbanairship.com/display/DOCS/Getting+Started%3A+Android%3A+GCM+Push中的步骤操作](https://docs.urbanairship.com/display/DOCS/Getting+Started%3A+Android%3A+GCM+Push)

第 3 步：从 urbanairship.com/resources 下载客户端库 jar

但现在，

第四步：我去市区飞艇网站，点击“创建应用程序”，提示“GCM支持现在可用。联系支持请求访问。”

我单击“测试推送通知”，但它显示“此应用程序未配置为 Android 推送”

我尝试了大部分事情，但做不到。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T17:50:22.240

它只是在您提供的文档中说您需要联系支持以启用 GCM 支持。
澄清一下，android 曾经有另一种方式来处理现在已弃用的推送通知，您甚至无法再签名使用它。
因此，只需联系支持人员，看看他们是否为您的应用启用 GCM 支持。

# vim - vim：突出显示quickfix选定的行，颜色不同于“搜索”

> ID：13220073
> 
> 赞同：6
> 
> 时间：2012-11-04T15:45:11.477
> 
> 标签：vim

快速修复窗口中当前选定行的突出显示组是什么？

快速修复窗口中的选定行`Search`用于突出显示。我想继续使用黄色`Search`突出显示，但使用蓝色快速修复选定的行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-09-16T07:58:42.930

Ingo Karkat 的回答是正确的。它确实是用 vim 代码硬编码的。我为 vim8 创建了一个补丁 - [QuickFixCurrentLine.patch](https://gist.github.com/anishsane/5125b87ea4cddb43985496abd26a43e7#file-quickfixcurrentline-patch)。

补丁足够长，可以在这里发布。另外，它混合了制表符和空格。因此，提供仅链接答案。

编辑：补丁已在最新的 vim 代码中更新。
高亮的名称已更改为 quickfixline 而不是 quickfixcurrentline。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T08:16:38.197

当前选择的快速修复项目被硬编码为`Search`. 您必须更改 Vim 源代码并重新编译才能更改。

我只看到使用 Vimscript 解决这个问题的有限方法。您可以尝试通过`:match`/覆盖当前行的突出显示`matchadd()`（它具有更高的优先级），但它只会覆盖文本的长度，而不是原始突出显示的整行。另外，我认为当前选择的项目不能轻易地从 Vim 查询，所以你必须挂钩到 quickfix-local`<CR>`映射来更新它，并停止使用`:cnext`等来移动到不同的错误。

```
:highlight BlueLine guibg=Blue
:autocmd BufReadPost quickfix match BlueLine /\%1l/
:autocmd BufReadPost quickfix nnoremap <buffer> <CR> :execute 'match BlueLine /\%' . line('.') . 'l/'<CR><CR> 
```

# stata - stata中的##是什么意思？

> ID：13220077
> 
> 赞同：2
> 
> 时间：2012-11-04T15:45:25.643
> 
> 标签：stata

我遇到了包含`##`或其中的stata代码`#`。我用谷歌搜索但找不到。请让我在stata中是什么意思？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-04T15:53:00.617

您可以在两个变量之间放置一个# 来为变量类别的每个组合创建一个交互作用指标。您可以使用## 来指定变量的全阶乘——每个变量的主效应和交互作用。

检查 [http://www.stata.com/capabilities/overview/factor-variables/](http://www.stata.com/capabilities/overview/factor-variables/)

# object - OCL 要求：对于可能的属性值范围保持不变

> ID：13220078
> 
> 赞同：0
> 
> 时间：2012-11-04T15:45:25.887
> 
> 标签：object, uml, requirements, invariants, ocl

所以我有以下对象结构：

```
Class Node
RSSI: int 
```

我需要编写一个 OCL 不变量来满足所有 Node 对象的 RSSI 值相差不超过 2 的要求。我尝试使用迭代表达式来解决它，但是因为您不能真正使用 OCL 中的变量来存储当前最大值和最小值（或者至少我不知道该怎么做）我不知道该怎么做。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T13:23:08.873

您可以使用`allInstances`：

```
context: Node
inv: Node->allInstances()
         ->forAll(n1, n2| -2 <= n1.RSSI-n2.RSSI and n1.RSSI-n2.RSSI <= 2) 
```

# .net - 如何在 SQL Server Express 中存储长文本以及如何在 .NET 中使用它？

> ID：13220079
> 
> 赞同：1
> 
> 时间：2012-11-04T15:45:27.843
> 
> 标签：.net, sql-server-express, sqldatatypes

我需要将电子邮件消息存储在我的 SQL Server Express 数据库实例中。考虑到这可能是一个很长的字符串，我决定`Text`在数据库中使用数据类型。但是，在 .NET 中没有与此等价的功能。存储这种类型的对象是一个不错的选择吗？

我发现`text`它将被弃用，开发人员应该使用它`varchar(max)`。`max`那我必须设置什么值？

我应该在我的 WPF 应用程序中使用什么来获取这些对象？默认情况下，Visual Studio`string`在实体数据模型生成的代码中使用，但这是否足够？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T18:42:44.590

您可能应该使用 String 和 Varchar。在`Varchar(max)`中，max 只指定可能的最大长度，并且不会将其分配给表中的每一行。字符串也一样。

您可以使用您希望应用程序处理的最大合理值（低于 2gb）。

# c++ - 如何释放 CvMat 指针向量的内存？

> ID：13220080
> 
> 赞同：0
> 
> 时间：2012-11-04T15:45:30.407
> 
> 标签：c++, opencv

我创建了一个 CvMat 指针向量，如下所示：

```
vector<CvMat*> items;
for(int i = 0;i<5;i++){
  CvMat* mat = cvCreateMat(5,1,CV_32FC1);
  // assign values to mat
  items.push_back(mat);
} 
```

然后我尝试按如下方式释放内存：

```
for(int i = 0;i<5;i++){
  cvReleaseMat(&items[i]);
}
vector<CvMat*>().swap(items); 
```

但是，我认为这不会影响任务管理器中的内存使用。

对我有什么想法吗？

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T15:50:44.647

内存不返回给系统。

在大多数运行时环境中，从操作系统分配给应用程序的内存保留在应用程序中，并且很少返回给操作系统。释放内存块允许您在应用程序内重用该块，但不会将其释放到操作系统以使其可用于其他应用程序。

升级版：

所以无论如何任务管理器都不能成为控制内存分配和释放的可靠工具。如果您想保证您的应用程序没有内存泄漏，您可能需要使用诸如 valgrind（如果您在 Linux 上）或来自 google 的 drMemory 或其他几个工具（google 用于“内存泄漏检测”）。在这种情况下，您将获得有关分配、释放、泄漏、内存访问违规等的最精确信息。

# javascript - javascript,ajax控制shell

> ID：13220082
> 
> 赞同：0
> 
> 时间：2012-11-04T15:45:40.567
> 
> 标签：javascript, ajax, apache, shell

我想编写一个嵌入 youtube 视频并具有 javascript 脚本的 html 页面。在脚本中，我将使用 youtube api 并嵌入一个 youtube 视频，youtube api 将测试视频是否已完全下载

我在本地机器上用mysql和php搭建了一个apache服务器，把html页面放到apache服务器中

我将使用 shell 脚本打开带有这个 html 页面的 firefox，并使用 ps -ef|grep "firefox" 来获取它的进程 ID，例如

```
firefox http://localhost/test.html 
```

当 youtube api 检测到视频已完全下载时，我希望它可以向 shell 发送信号并终止 firefox 进程，所以我认为 javascript 不可能在客户端向 shell 发送信号，但由于客户端和服务器在同一台机器上，当 youtube api 检测到视频已完全下载时，ajax 可以通知服务器，比如在服务器上写入文件或 mysql 数据库。

但我不知道如何将 ajax 链接到向 shell 发送信号

有人对此有想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T16:00:44.737

给出一个完整的答案... 成功下载视频后，向执行 Shell 命令的 PHP 脚本触发 Ajax 请求。又快又脏 它可能看起来像这样

jQuery

```
$.get("/runshellcommand.php"); 
```

运行shellcommand.php

```
<?php system("kill -QUIT 123456"); ?> 
```

...在此示例中，“123456”是 Firefox 的 PID ;-)

# c - 条件表达式中的指针/整数类型不匹配

> ID：13220087
> 
> 赞同：3
> 
> 时间：2012-11-04T15:46:12.683
> 
> 标签：c, ternary-operator

```
gcc 4.7.2 c89 
```

你好，

我收到以下警告：

```
pointer/integer type mismatch in conditional expression 
```

我正在编译以下内容`CFLAGS -Wall -Wextra`

```
fprintf(stderr, "'Failed to open file' Error [ %s ]\n",
        (errno == 0) ? "None" : strerror(errno)); 
```

程序运行正常，但我看不到警告的全部内容。"None" 和 strerror(errno) 都返回一个字符串而不是整数值。我正在将 errno 数与零进行比较。

非常感谢您的任何建议，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T15:49:48.073

检查您是否已包含`<string.h>`标题。如果不是，则 的返回值`strerror`可以被认为是一个整数值。它将解释程序运行正常的原因（链接器可以找到一个名为 的匹配函数`strerror`，因为 C 标准库是默认链接的），而编译器会报告警告。

# xml - 在网页中显示 Openmath

> ID：13220089
> 
> 赞同：4
> 
> 时间：2012-11-04T15:46:22.960
> 
> 标签：xml, math, canvas, stylesheet, mathml

我很惊讶我找不到这个问题的答案。如果它已被覆盖，请告诉我。

我目前正在使用 MathDox 公式编辑器（[此处](http://mathdox.org/formulaeditor/)）来允许用户直接操作网页上的方程。编辑器通过允许与画布进行交互来工作，然后将方程以 OpenMath xml 格式存储到文本区域。然后我将 OpenMath xml 存储到我的数据库中。

我想使用我存储的 OpenMath 并将其作为非交互式显示打开，供用户查看自己或他人的工作。我认为 MathML 通常是方程式的存储介质，它更容易被 Firefox 处理，但编辑器的 MathML 转换引擎没有完全调试，所以如果可能我宁愿使用 OpenMath。我见过人们将 xml 样式表用于 MathML 显示，并且似乎可能有用于将 xml 转换为画布的插件。

我正确地接近这个吗？我应该使用什么样的显示方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T23:55:51.353

如果您从 OpenMath 转到画布，则必须实现整个数学布局引擎，这是一项艰巨的工作。几乎所有 Web 上的 OpenMath 都转换为 Presentation MathML 进行渲染。MathML 是 html5 的标准部分，并在 Firefox Safari 开发版本的 chome 和有限的 Opera 中支持，它也可以在 IE 中与 MathPlayer 一起使用。基于浏览器的 XSLT 可在 openmath 站点上免费获得以进行此转换，您可以在任何 OpenMath CD 中看到效果，例如

[http://www.openmath.org/cd/arith1.xhtml](http://www.openmath.org/cd/arith1.xhtml)

# android - 回到活动时如何运行代码

> ID：13220091
> 
> 赞同：4
> 
> 时间：2012-11-04T15:46:33.123
> 
> 标签：android, android-activity, android-lifecycle

在我的应用程序中，我有 3 个活动。第一个 - 我开始活动 #2 的主要内容。从#2 我开始#3，同时我完成#2。当我完成#3 时，我会自动回到#1。问题：从 3 回到 1 时如何添加/运行代码？

不确定这是否有意义。但我想要做的是，当结束#3 并回到#1 时，我想检查文件 xyz 是否存在并基于它来更改活动#1 中的 UI。

#1 中的 OnResume 不会运行，永远不会。（可能系统不会为第一个活动运行 onpause）

如果只有活动 #1 和 2，我可以使用 startActivityForResult。但是两项活动并不能满足我的需要...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-05T08:59:59.957

请参见下面的示例。

你的活动#1 代码是这样的

```
public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

}

@Override
protected void onRestart() {
// TODO Auto-generated method stub
super.onRestart();

          //Do your code here
}
} 
```

您的活动#3 代码是这样的

```
public class Activity3 extends Activity{

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity3); 
}
@Override
public void onBackPressed() {
    // TODO Auto-generated method stub
    super.onBackPressed();
    finish();
}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T15:54:51.140

从活动 #1 开始，不要开始活动 #2。相反，启动活动#3，在意图中传递一个标志来告诉活动#3 开始活动#2。`startActivity`如果活动#3从内部调用`onCreate`，则不会出现屏幕闪烁。这样，活动#1 可以使用`startActivityForResult`活动#3 并从活动#3 中获取结果。

这有点杂乱无章，但效果很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T16:42:35.843

有多个方面需要考虑：

1.  为什么在#1 onPause()/onResume() 中没有被调用？你确定吗？这是非常不可能的。Android 文档说[onPause()](http://developer.android.com/reference/android/app/Activity.html#onPause%28%29)：

    > (...) 当活动 B 在活动 A 之前启动时，将在 A 上调用此回调。在 A 的 onPause() 返回之前不会创建 B，(...)

2.  在我看来，您应该考虑考虑使用[片段](http://developer.android.com/reference/android/app/Fragment.html)而不是多个活动。

3.  快速修复可能是在完成 #3 时为 #1 调用 startActivity。您只需确保 #1 的[启动模式](http://developer.android.com/guide/topics/manifest/activity-element.html#lmode)设置为 singleTop。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-24T15:59:44.433

在您的活动 1 上创建一个方法：

```
public void changeViewsMethod(){
    textView.setText("demo");
} 
```

现在在您的活动 2 上执行此操作：

```
@Override
public void onBackPressed() {
    super.onBackPressed();
    ((YOU_ACTIVITY1) getApplicationContext()).changeViewsMethod();
} 
```

希望它会奏效。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-04T15:51:37.473

您可以在 Activity #3 的 OnPause 中编写一个首选项变量（类似于 Activity3Finished=true） 现在您可以检查每个 Activity 是否 Activity #3 已完成。

不要忘记在#3 的 OnCreate 中重置变量。

# dynamics-crm - 什么样的Dynamics CRM 2011 Online身份验证需要使用部署在godaddy共享服务器中

> ID：13220093
> 
> 赞同：2
> 
> 时间：2012-11-04T15:46:41.793
> 
> 标签：dynamics-crm, dynamics-crm-2011, dynamic-data, microsoft-dynamics, dynamics-crm-online

当我尝试在 godaddy 共享服务器中部署与 Dynamics CRM 2011 在线通信的应用程序时遇到问题。我在本地运行时没有任何问题，我使用 sdk\samplecode\cs\wsdlbasedproxies\online 中提供的 wsdlbaseproxies 在线代码来验证动态 CRM。此过程正在本地系统中创建 LiveDeviceID.xml，但未能在 godaddy 共享托管服务器中创建相同的。

此应用程序是在 .net 中开发的，它可以在线捕获潜在客户、机会并在 CRM 2011 中/从 CRM 2011 中保存/检索相同的内容。

我非常感谢您对此的帮助和意见。

**更新错误消息：**

> 数据保护操作不成功。这可能是由于没有为当前线程的用户上下文加载用户配置文件，这可能是线程模拟时的情况。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

**异常详情：**

> System.Security.Cryptography.CryptographicException：数据保护操作不成功。这可能是由于没有为当前线程的用户上下文加载用户配置文件，这可能是线程模拟时的情况。

**源错误：**

> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

**堆栈跟踪：**

```
[CryptographicException: The data protection operation was unsuccessful. This may have been caused by not having the user profile loaded for the current thread's user context, which may be the case when the thread is impersonating.]
   System.Security.Cryptography.ProtectedData.Protect(Byte[] userData, Byte[] optionalEntropy, DataProtectionScope scope) +522
   Microsoft.Crm.Services.Utility.DeviceUserName.Encrypt(String value) in C:\Users\Aashritha\Documents\Visual Studio 2010\Projects\hcrm\hcrm\Models\DeviceidManager.cs:970
   Microsoft.Crm.Services.Utility.DeviceUserName.UpdateCredentials(String encryptedValue, String decryptedValue) in C:\Users\Aashritha\Documents\Visual Studio 2010\Projects\hcrm\hcrm\Models\DeviceidManager.cs:941
   Microsoft.Crm.Services.Utility.DeviceUserName.set_DecryptedPassword(String value) in C:\Users\Aashritha\Documents\Visual Studio 2010\Projects\hcrm\hcrm\Models\DeviceidManager.cs:897
   Microsoft.Crm.Services.Utility.DeviceIdManager.GenerateDeviceUserName() in C:\Users\Aashritha\Documents\Visual Studio 2010\Projects\hcrm\hcrm\Models\DeviceidManager.cs:462
   Microsoft.Crm.Services.Utility.DeviceIdManager.GenerateDevice(String deviceName, String devicePassword) in C:\Users\Aashritha\Documents\Visual Studio 2010\Projects\hcrm\hcrm\Models\DeviceidManager.cs:377
   Microsoft.Crm.Services.Utility.DeviceIdManager.RegisterDevice(Guid applicationId, Uri issuerUri, String deviceName, String devicePassword) in C:\Users\Aashritha\Documents\Visual Studio 2010\Projects\hcrm\hcrm\Models\DeviceidManager.cs:189
   Microsoft.Crm.Services.Utility.DeviceIdManager.LoadOrRegisterDevice(Uri issuerUri, String deviceName, String devicePassword) in C:\Users\Aashritha\Documents\Visual Studio 2010\Projects\hcrm\hcrm\Models\DeviceidManager.cs:116
   Microsoft.Crm.Services.Utility.DeviceIdManager.LoadOrRegisterDevice(Uri issuerUri) in C:\Users\Aashritha\Documents\Visual Studio 2010\Projects\hcrm\hcrm\Models\DeviceidManager.cs:99
   Microsoft.Crm.Sdk.Samples.WsdlTokenManager.Authenticate(ClientCredentials credentials, String appliesTo, String policy, Uri issuerUri) in C:\Users\Aashritha\Documents\Visual Studio 2010\Projects\hcrm\hcrm\Models\WsdlTokenManager.cs:141
   CRMDynamicsService.CRMDynamicsOnline.Authenticate(LiveIdAuthenticationPolicy policy, String userName, String password) in C:\Users\Aashritha\Documents\Visual Studio 2010\Projects\hcrm\hcrm\Models\CRMDynamicsService.cs:262
   CRMDynamicsService.CRMDynamicsOnline.GetLeads() in C:\Users\Aashritha\Documents\Visual Studio 2010\Projects\hcrm\hcrm\Models\CRMDynamicsService.cs:420
   hcrm.Controllers.LeadsController.Leads() in C:\Users\Aashritha\Documents\Visual Studio 2010\Projects\hcrm\hcrm\Controllers\LeadsController.cs:20
   lambda_method(Closure , ControllerBase , Object[] ) +62
   System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters) +17
   System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) +208
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +27
   System.Web.Mvc.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12() +55
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) +263
   System.Web.Mvc.<>c__DisplayClass17.<InvokeActionMethodWithFilters>b__14() +19
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +191
   System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +343
   System.Web.Mvc.Controller.ExecuteCore() +116
   System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +97
   System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +10
   System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__5() +37
   System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +21
   System.Web.Mvc.Async.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _) +12
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
   System.Web.Mvc.<>c__DisplayClasse.<EndProcessRequest>b__d() +50
   System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) +7
   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22
   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +60
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8970061
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184 
```

# c# - 我的 while 循环遇到问题

> ID：13220094
> 
> 赞同：0
> 
> 时间：2012-11-04T15:46:57.077
> 
> 标签：c#

我想就我在这里出错的地方提出一些建议。控制台应用程序显示菜单选项并要求用户输入有效的菜单选项。

现在它可以工作了，如果输入的数字是 1、2 或 3，它会显示“您已选择选项 x”，然后“按任意键关闭”，但程序不会显示“您已选择选项 x”然后“按任意键关闭”。如果数字小于 1 或大于 3，它会起作用，说“菜单选择不在 1-3 之间”然后“请重新输入”。我哪里错了？

我已经很久没有做编程了，如果这次我能纠正我的错误，我知道未来。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace _4._6
{
    class Program
{
    static void Main(string[] args)
    {
        int iChoice = 0;

        Console.WriteLine("1: Add two numbers");
        Console.WriteLine("2: Multiply two numbers");
        Console.WriteLine("3: Exit the program");

        Console.WriteLine("Enter your choice: ");
        iChoice = Convert.ToInt32(Console.ReadLine());

        while (iChoice < 1 || iChoice > 3)
        {
            Console.WriteLine("Menu choice not between 1-3: ");
            Console.Write("Please re-enter: ");
            iChoice = Convert.ToInt32(Console.ReadLine());
            Console.ReadKey();

            if  (iChoice > 1 || iChoice < 3)
            {
                Console.WriteLine("You have chosen option " + iChoice);
                iChoice = Convert.ToInt32(Console.ReadLine());
                Console.ReadKey();

            }

        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T15:50:49.937

您的内部 if 永远无法输入，因为它与外部 if 的条件相矛盾：

改成这样

```
 while (iChoice < 1 || iChoice > 3)
    {
        Console.WriteLine("Menu choice not between 1-3: ");
        Console.Write("Please re-enter: ");
        iChoice = Convert.ToInt32(Console.ReadLine());
        Console.ReadKey();

    }

    Console.WriteLine("You have chosen option " + iChoice); 
```

另请注意，您的代码中第二个 if 的条件是错误的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T16:15:01.163

您在代码中的两个位置分配给`iChoice`。也许说起来不那么令人困惑：

```
 Console.WriteLine("1: Add two numbers");
    Console.WriteLine("2: Multiply two numbers");
    Console.WriteLine("3: Exit the program");

    Console.WriteLine("Enter your choice:");

    int iChoice;
    while (true)
    {
      int.TryParse(Console.ReadLine(), out iChoice);
      if (iChoice >= 1 && iChoice <=3)
        break; // choice is OK

      Console.WriteLine("Menu choice not between 1-3.");
      Console.Write("Please re-enter:");
    }

    Console.WriteLine("You have chosen option " + iChoice);
    // ... 
```

注意：我刚`Convert.ToInt32`改成`int.TryParse`. 优点是，如果用户键入的不是数字，例如“sdfih”，它只会使`iChoice`应用程序变为零，而不是使应用程序崩溃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T15:51:49.697

if 块应该在 while 块之外。因为如果条件为假，您的 while 块将不会运行您的 if 块。这意味着你不允许你的 if 块检查它的条件

# xml - 删除 appendChild 添加的不需要的（空的）xmlns 属性

> ID：13220095
> 
> 赞同：24
> 
> 时间：2012-11-04T15:47:05.167
> 
> 标签：xml, dom, powershell, appendchild

我有这个代码：

```
function setupProject($projectFile) {
  [xml]$root = Get-Content $projectFile;

  $project = $root.Project;

  $beforeBuild = $root.CreateElement("Target", "");
  $beforeBuild.SetAttribute("name", "BeforeBuild");
  $beforeBuild.RemoveAttribute("xmlns");
  $project.AppendChild($beforeBuild);

  $root.Save($projectFile);
} 
```

它**应该**`<Target name="BeforeBuild" />`向 XML 文档添加一个新的。

`xmlns=""`但它也添加了一个我不想要的空属性。（实际上是 Visual Studio 不喜欢这个属性！）

```
<Target name="BeforeBuild" xmlns="" /> 
```

我已经尝试过这段代码：

```
$beforeBuild.RemoveAttribute("xmlns");
$project.AppendChild($beforeBuild);
$beforeBuild.RemoveAttribute("xmlns"); 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-05T09:21:20.300

已`xmlns=""`添加命名空间 (un) 声明，因为您的父元素在命名空间中，而您的子元素不在。

如果您不希望添加此命名空间声明，则意味着您希望子元素与其父元素位于同一命名空间中，答案是在创建元素时将其放入此命名空间中。也就是说，更改调用`CreateElement("Target", "")`以指定正确的命名空间。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-02-15T10:58:33.763

正如[**Michael Kay**](https://stackoverflow.com/a/13229110/45375)[所回答的](https://stackoverflow.com/a/13229110/45375)**，删除这个不需要的命名空间的最佳方法是在与其父元素相同的命名空间中创建新的子元素：**

 **```
function setupProject($projectFile) {
  [xml]$root = Get-Content $projectFile;

  $project = $root.Project;

  # UPDATE THIS LINE $beforeBuild = $root.CreateElement("Target", "");
  $beforeBuild = $root.CreateElement("Target", $project.NamespaceURI);
  $beforeBuild.SetAttribute("name", "BeforeBuild");
  $beforeBuild.RemoveAttribute("xmlns");
  $project.AppendChild($beforeBuild);

  $root.Save($projectFile);
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-11-04T15:50:12.887

检查这些以获取可能的解决方案：

[Powershell 和 csproj](http://social.technet.microsoft.com/Forums/en-US/winserverpowershell/thread/39af0a88-fedd-46d5-baea-12f8b2cfdacd/)

[Xml 命名空间和 C# csproj](https://stackoverflow.com/questions/10308598/xml-namespace-and-c-sharp-csproj)

这是适用于 OP 的第二种解决方案的解决方法：

```
$content = [xml] $content.OuterXml.Replace(" xmlns=`"`"", "")
$content.Save($_.FullName); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-19T19:45:38.380

**使用 Javascript**

如果您使用 JS 创建 XML 文档，并且`xmlns="XXXX"`在父节点上声明后在子节点上获得空白 xmlns 属性，请使用 JS`createElementNS(namespace, nodeName)`而不是`createElement(nodeName)`.

**这是假设您希望您的子节点与父节点共享相同的命名空间。在以下情况下，'v1'、'v2' 等将共享 'data' 的 NS**

它看起来像这样：

```
let data = someArray;
let nameSpace = 'XXX';
let doc = "<?xml version='1.0' encoding='utf-8' ?><data xmlns='XXXX'></data>";
let parser = new DOMParser();
let xml = parser.parseFromString(doc, "text/xml");

for (let i = 0; i < data.length; i++) {
    let node = xml.createElementNS(nameSpace , "v" + (i + 1));
    $(node).text(data[i]);
    let elements = xml.getElementsByTagName("data");
    elements[0].appendChild(node);
 } 
```

正确的结果如下所示：

```
<?xml version='1.0' encoding='utf-8' ?>
<data xmlns='XXXX'>
    <v1></v1>
    <v2></v2>
</data> 
```

与坏结果：

```
<?xml version='1.0' encoding='utf-8' ?>
<data xmlns='XXXX'>
    <v1 xmlns=""></v1>
    <v2 xmlns=""></v2>
</data> 
```

使用此解决方案，您还可以为您的子节点声明单独的命名空间。只需将`nameSpace`变量替换为不同的命名空间 uri 字符串或另一个设置变量。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-05-03T18:13:17.080

命名空间是每个节点名称的固有部分。删除命名空间意味着需要重新创建节点。这是代码，您可以在其中创建没有 Namespace 属性的子节点。

这意味着如果您的主标记包含命名空间属性而您的子节点没有。因此，子节点将从父节点继承默认的命名空间属性。删除命名空间属性的最佳方法是

```
[xml]$oXMLDocument = (Get-Content "D:\myXml.xml")
# Assuming Project is the parent node with a namespace
$project = $oXMLDocument.Project
$childNode = $oXMLDocument.CreateElement("test",$project.NamespaceURI)
# (Optional) Add any attributes to the element
$childNode.SetAttribute("name", "value")
$oXMLDocument.DocumentElement.AppendChild($childNode)
# Save the document
$oXMLDocument.Save("D:\myXml2.xml") 
```

基本上，这不会从子注释中删除命名空间属性。事实上你不能。这会将属性隐藏为默认值

如果您需要在子节点下创建子子节点，则遵循相同的样式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-03T17:11:18.840

命名空间是每个节点名称的固有部分。删除命名空间意味着需要重新创建节点。这是代码，您可以在其中创建没有 Namespace 属性的子节点。

```
[xml]$oXmlDocume = [xml] (Get-Content  D:\myXml.xml)
// Assuming Project is the parent node
$project = $oXMLDocument.Project
$childNode = $oXMLDocument.CreateElement("Child",$project.NamespaceURI)
$0XMLDocument.AppendChild($ChildNode) 
```

如果您需要在子节点下创建子子节点，则遵循相同的样式。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-18T12:38:21.100

我在 VBA 中构建网站地图时遇到了这个问题，但 @Neolisk 让我走上了正确的道路。这解决了我的问题：

```
'replace the empty attribute with nothing and load it back into the XML source
myTree.LoadXML Replace(myTree.XML, " xmlns=""""", "")

'Write that XML to a file
myTree.Save xmlFileName 
```

感谢您的帮助，@Neolisk！**

# java - 多态棘手情况

> ID：13220098
> 
> 赞同：-1
> 
> 时间：2012-11-04T15:47:24.587
> 
> 标签：java, inheritance, overriding

这是Java语言的代码：

```
class A{
   A() {  print();   }
   void print() { System.out.println("A"); }
}
class B extends A{
   int i =   Math.round(3.5f);
   public static void main(String[] args){
      A a = new B();
      a.print();
   }
   void print() { System.out.println(i); }
} 
```

它打印**0, 4**。但是为什么从构造函数中的超类 A 调用子类 print 方法呢？我看到 print 方法被覆盖了，但实际上已经从超类中调用了 'print' 方法......那是为了准备 Java 认证的练习。最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T15:50:33.983

对象类型（不是引用类型）确定在运行时使用哪个覆盖方法/

```
A a = new B();
a.print();// this would always call B's print() in case of overriden methods 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T15:53:06.137

一件事是您用来访问对象的引用，另一件事是对象的实际类型。这是基本的[亚型多态性](http://en.wikipedia.org/wiki/Subtype_polymorphism)。

您的对象属于 B 类型，因为那是您创建的（即 new B()）。现在，您碰巧通过类型 A 的引用访问您的对象，这是可能的，因为 B*是*A（B 扩展 A）。

当您通过引用调用方法*print*时，运行时类型系统知道即使引用是 A 类型，引用指向的实际对象也是 B 类型，因此它首先在 B 中查找方法*print*。那就是当时被调用的那个，它解释了你看到的输出。

您的*print*方法就是他们所说的[虚拟方法](http://en.wikipedia.org/wiki/Virtual_method)。这意味着运行时系统仅根据运行时调用的目标对象的性质来确定将调用方法的所有实现的哪个实现。

现在，清楚地知道，您在 B 中的覆盖实现就是被调用的内容。*被覆盖的实现不会自动触发父类中的实现*。这与构造函数中的行为有些不同（不能被继承但可以被链接）。

所以，这基本上意味着，如果你想从你的重写方法访问父级的行为，你必须让你的超类去做（即 super.print()）

因此，如果您正在处理构造函数，例如以下情况

```
class A {
   public A() { System.out.println("A"); }
}

class B extends A{
  public B() { System.out.println("B"); }
} 
```

如果您创建 B 的实例，您应该看到 A B 的输出。因为构造函数是自动链接的，并且 B 中的构造函数调用 A 中的构造函数。

但在虚拟方法的情况下，您需要*显式*链接执行（如果这是您想要的），如下所示：

```
class A {
   public A() { System.out.println("A"); }
   //virtual method
   public void print(){ System.out.println("A"); }
}

class B extends {
  public B() { System.out.println("B"); }
   //virtual method overriden
   @Override
   public void print(){ 
      super.print(); //invokes A.print
      System.out.println("B"); 
   }
} 
```

...为了查看输出 A B。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T15:54:36.180

不要`print`在. *_* _ `A`这是它打印的地方`0`，因为`B`显然的实例还没有完全初始化，而`B.i`显然仍然的值是`0`。

的**隐式构造函数**是`B`：

```
public B() {
   super(); // invokes B.print!
   this.i = Math.round(3.5f);
} 
```

如您所见， print 在`i`初始化之前执行。然而，你已经覆盖`print`了，旧的打印永远不会被执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T15:49:44.517

当你调用一个对象的方法时，它总是使用对象实际类型的实现，即使它是从超类中调用的。

# class - AVAudioPlayer 没有响应停止命令？

> ID：13220104
> 
> 赞同：0
> 
> 时间：2012-11-04T15:47:52.927
> 
> 标签：class, ios5, xcode4.2, avaudioplayer

我目前正在尝试为 AVAudioPlayer 使用自定义类，并且所有这些都非常适合播放音频文件，但是在停止所述文件时，它只是跳过停止命令并在当前文件的顶部播放另一个，

如果有人对为什么会发生这种情况有任何想法，我将非常感谢您的帮助。

下面是我的 AudioPlayer1.h 文件：

```
#import <Foundation/Foundation.h>
#import "AVFoundation/AVAudioPlayer.h"
#import <AVFoundation/AVFoundation.h>

@interface AudioPlayer1 : NSObject <AVAudioPlayerDelegate> {

    AVAudioPlayer   *player;

    BOOL playing;
    NSTimeInterval duration;        
}

@property (nonatomic, assign) AVAudioPlayer *player;
@property(readonly, getter=isPlaying) BOOL playing;
@property (readonly) NSTimeInterval duration;

-(void)GetSoundFileDuration:(NSString *) sound_file_name;
-(void)play;
-(void)stop;

-(void)setVolume:(float) volume;

- (void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag;
- (void)PlaySoundFile:(NSString *) sound_file_name;

- (void)notPlaying;

@end 
```

下面是 AudioPlayer1.m 文件的内容：

```
#import "AudioPlayer1.h"

@implementation AudioPlayer1

@synthesize player;
@synthesize duration;
@synthesize playing;

- (id)init
{
self = [super init];
if (self != nil)
{
    player = [[AVAudioPlayer alloc] init];
    [player initWithContentsOfURL:nil error:nil];
    player.delegate = self;
}
return self;
}

- (void) setVolume:(float)volume
{
[player setVolume:volume];
}

- (void)PlaySoundFile:(NSString *) sound_file_name
{
[player stop];
NSURL *sound_file = [[NSURL alloc] initFileURLWithPath: [[NSBundle mainBundle] pathForResource:sound_file_name ofType:@"mp3"]];

[player initWithContentsOfURL:sound_file error:nil];
[player prepareToPlay];
playing = YES;
[sound_file release];
}

- (void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag
{
NSLog(@"audioPlayerDidFinishPlaying");
playing = NO;
}

- (void) play
{
NSLog(@"Play Called");
[player setVolume:0.1];
[player play];
playing = YES;
}

- (void) stop
{
NSLog(@"Stop Called");
[player setVolume:0.0];
[player stop];
playing = NO;
}

-(void)GetSoundFileDuration:(NSString *) sound_file_name
{
NSLog(@"%@",duration);
}

-(void) notPlaying
{
playing = NO;
}

@end 
```

下面是启动音频的代码：

```
- (IBAction)WPNaritive01:(id)sender
{
AudioPlayer1 * player = [[AudioPlayer1 alloc] init ];

if (player.playing == YES) 
{
    [player stop];
}

if (player.playing == NO)
{
    [player PlaySoundFile:@"1"];
    [player setVolume:0.1];
    [player play];
}
} 
```

由于我仍在学习，我对代码的奇怪布局表示歉意。我现在才从阅读另一个问题中偶然发现有关制作这些课程的信息。哈哈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T22:32:20.673

好的，我已经想通了。

与其像我在上面的代码中那样一遍又一遍地创建对象，我应该在 viewdidload 中分配和初始化播放器，而不是像我那样在 IBAction 中进行。

这就是我所做的，以防其他人遇到同样的问题：

锁定位置.h

```
@interface LockOnLocation : UIViewController {

AudioPlayer1 *player;
... 
```

锁定位置.m

```
- (void)viewDidLoad
player = [[AudioPlayer1 alloc] init ];
... 
```

我使用与上面相同的代码来播放音频，所以这是正确的。

如果有人对我或任何其他成员有任何其他建议，我很想听听你的意见......

# c# - 如何最好在不将其加载到 Lua VM 的情况下解析任何常量 Lua 表？

> ID：13220110
> 
> 赞同：6
> 
> 时间：2012-11-04T15:48:50.050
> 
> 标签：c#, parsing, dynamic, lua

我有一堆 Lua 表形式的数据，我想将这些数据解析为 C# 中的可用结构。

Lua 表的问题在于有可选字段，表是非常动态的，而不仅仅是一个字典，键为一种类型，值为一种类型。可以有一个 Lua 表，其中包含字符串和整数键，以及整数、字符串*甚至*表类型的值。

可悲的是，我正在解析的数据利用了语言的动态特性，并没有以任何直接的方式进行结构化。这需要数据的动态表示，例如使用`Dictionary<object, dynamic>`.

数据的格式是例如（来自[http://ideone.com/9nzXvt](http://ideone.com/9nzXvt)）

```
local mainNode =
{
    [0] = 
        {
            Name = "First element",
            Comments = "I have comments!",
            Data = { {123, 456}; foo = { "bar" } }
        },
    [1337] =
        {
            Name = "Another element",
            Data = { {0}; foo = nil }
        }
} 
```

有没有图书馆可以做到这一点？有没有办法在不逐字符解析数据的情况下实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T15:50:56.557

您可以使用[luainterface](http://code.google.com/p/luainterface/)库

这里有一些[示例代码](http://luainterface.googlecode.com/svn-history/r6/trunk/luainterface/src/TestLuaInterface/TestLuaInterface.cs)。

您将需要使用`DoFile`（加载文件）和`GetTable`将表读入一个[`LuaTable`](http://code.google.com/p/luainterface/source/browse/trunk/luainterface/src/LuaInterface/LuaTable.cs)对象的组合，您可以使用 c# 的结果。`LuaTable`暴露一个`IDictionaryEnumerator`through 。`GetEnumerator`

编辑：

如果你有这个表构造函数：

```
local t = { os.time() }
print(t[1]); 
```

需要执行构造函数中的函数来初始化数据。

对于常量文字，您可以使用如下字符串常量：

```
local a = [==[
  hello
  there""\"]==] 
```

具有不同级别的等号

数字文字可以具有以下形式：

```
0X1.921FB54442D18P+1 
```

以 P 作为二进制指数。

在不使用轻量级 lua VM 的情况下忠实地再现常量文字的 lua 语法将需要重新实现大量 lua 语言规范。重新发明轮子并没有多大好处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-22T06:56:26.313

我知道这是一个旧帖子，但这对于在此帖子之后到达这里的人可能很有用......

您还可以查看 Xanathar 的 MoonSharp (Moon#) 项目；我刚刚开始尝试它，它似乎可以很好地包装动态表、嵌套表等。你只需给解释器一个脚本，它就会在解释器上下文中解析和保存解析的对象。

链接：

*   [http://www.moonsharp.org](http://www.moonsharp.org)
*   [https://github.com/xanathar/moonsharp/](https://github.com/xanathar/moonsharp/)

例子：

```
[TestMethod]
    public void Test_GetProperty_ForValidTypeAndKey_ReturnsValue()
    {
        // Arrange
        String luaScript = MockLuaScripts.TEST_OBJECT_WITH_STRING;
        Script context = new Script();
        String expectedResult = MockLuaScripts.ValidValue1;

        // Act
        /* Run the script */
        context.DoString(luaScript);

        /* Get the object */
        DynValue resultObject = context.Globals.Get(MockLuaScripts.ObjectInstance1);

        /* Get the property */
        DynValue tableValue = instance.Table.Get((MockLuaScripts.ValidKey1);
        String actualResult = tableValue.String();

        /* Or you can use..
            String actualResult = tableValue.ToObject<String>();
        */

        // Assert 
        Assert.AreEqual(expectedResult, actualResult);
    } 
```

如果上面的代码不完全正确，我们深表歉意，因为它取自我的一个测试类并转换为在此处发布。请原谅包装好的模拟数据常量，但它们本质上是 Lua 脚本和预期值。

当尝试通过不正确的键访问 Lua 表中的条目时，DynValue 的 DataType 为“Nil”，因此很容易通过条件检查来处理。

更多关于 Xanathar 的 Moonsharp 使用示例可以在 Xanathar 的网站和他的 git hub repo 上找到。（见下面的链接）。他似乎对您可能遇到的任何问题或疑问都非常有帮助。

链接：

*   [http://www.moonsharp.org](http://www.moonsharp.org)
*   [https://github.com/xanathar/moonsharp/](https://github.com/xanathar/moonsharp/)

我已经开始编写一些具有单元测试的扩展，这些扩展在我的一个存储库中显示了进一步的用法（请参见下面的链接）

链接：

*   [https://github.com/dibley1973/MoonsharpExtensions](https://github.com/dibley1973/MoonsharpExtensions)

# core-data - coredata 覆盖关系的设置值

> ID：13220111
> 
> 赞同：0
> 
> 时间：2012-11-04T15:48:53.747
> 
> 标签：core-data

我在 coredata 中有一个具有两个实体的工作模型： - 客户 - 发票

客户具有“发票”属性（1 对多），发票具有“客户”属性（1 对 1）。一切正常，直到我覆盖 Invoice 类的“setCustomer”方法。我写这段代码

```
-(void)setCustomer:(Customer *)customer {
    [self willChangeValueForKey:@"Customer"];
    [self setPrimitiveValue:customer forKey:@"Customer"];
    [self didChangeValueForKey:@"Customer"];
    [self recalulatePriceAndDiscounts];
} 
```

其中“recalculatePriceAndDiscount”是我自己选择不同客户时需要调用的方法。

当我使用此代码时，反向关系（客户->发票）不是立即可用的，我需要关闭并重新打开我的应用程序以查看客户的发票。

我需要调用其他一些方法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T16:10:02.890

如果该属性称为“客户”（带有小写“c”），那么您必须使用它作为键，例如

```
[self willChangeValueForKey:@"customer"];
// ... etc. 
```

# delphi - D5 中的 TFlowPanel 类似

> ID：13220112
> 
> 赞同：6
> 
> 时间：2012-11-04T15:49:01.783
> 
> 标签：delphi, delphi-5

我正在寻找适用`TFlowPanel`于 D5 的（或类似的）实现。
基本上我需要`TFlowPanel`在 a 内工作`TScrollBox`（带有垂直滚动条），因此控件将根据 that 的 Width 进行换行`TScrollBox`。

这些图像基本上显示了我需要的东西：

![在此处输入图像描述](../Images/387e177b5c26a018a749a79c2d46842e.png)

调整大小后，控件会自动重新定位：

![在此处输入图像描述](../Images/1f150980f9741fff0395888b580f9aef.png)

使用垂直滚动条：

![在此处输入图像描述](../Images/26e1cb159c7f2360f95b7435acab32b2.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-04T17:38:08.783

只是一个概念。没有各种 FlowType，也不可能改变控件的顺序。我认为，您仍然可以通过更改 DFM 中的顺序或重置父级来移动它们。

面板大小垂直以适合所有控件。这意味着，当您将其放入滚动框时，它将自动工作。

```
unit uAlignPanel;

interface

uses
  Windows, SysUtils, Classes, Controls, ExtCtrls;

type
  TAlignPanel = class(TPanel)
  protected
    procedure SetChildOrder(Child: TComponent; Order: Integer); overload; override;
    procedure SetZOrder(TopMost: Boolean); override;
  public
    procedure AlignControls(AControl: TControl; var Rect: TRect); override;
    procedure Insert(AControl: TControl);
    procedure Append(AControl: TControl);
    function GetChildOrder(Child: TControl): Integer;
    procedure SetChildOrder(Child: TControl; Order: Integer); reintroduce; overload; virtual;
    procedure MoveChildBefore(Child: TControl; Sibling: TControl); virtual;
  end;

procedure Register;

implementation

procedure Register;
begin
  RegisterComponents('StackOverflow', [TAlignPanel]);
end;

{ TAlignPanel }

procedure TAlignPanel.AlignControls(AControl: TControl; var Rect: TRect);
var
  i: Integer;
  x, y: Integer;
  LineHeight: Integer;
begin
  x := 0; y := 0;
  LineHeight := 0;
  for i := 0 to ControlCount - 1 do
  begin
    if x + Controls[i].Width > ClientWidth then
    begin
      x := 0;
      y := y + LineHeight;
      LineHeight := 0;
    end;
    Controls[i].Top := y;
    Controls[i].Left := x;
    x := x + Controls[i].Width;
    if Controls[i].Height > LineHeight then
      LineHeight := Controls[i].Height;
  end;

  // Height + 1\. Not only looks nices, but also prevents a small redrawing
  // problem of the bottom line of the panel when adding controls.
  ClientHeight := y + LineHeight + 1;

end;

procedure TAlignPanel.Append(AControl: TControl);
begin
  AControl.Parent := Self;
  AControl.BringToFront;
  Realign;
end;

function TAlignPanel.GetChildOrder(Child: TControl): Integer;
begin
  for Result := 0 to ControlCount - 1 do
    if Controls[Result] = Child then
      Exit;
  Result := -1;
end;

procedure TAlignPanel.Insert(AControl: TControl);
begin
  AControl.Parent := Self;
  AControl.SendToBack;
  Realign;
end;

procedure TAlignPanel.MoveChildBefore(Child, Sibling: TControl);
var
  CurrentIndex: Integer;
  NewIndex: Integer;
begin
  if Child = Sibling then
    raise Exception.Create('Child and sibling cannot be the same');

  CurrentIndex := GetChildOrder(Child);
  if CurrentIndex = -1 then
    raise Exception.CreateFmt( 'Control ''%s'' is not a child of panel ''%s''',
                               [Sibling.Name, Name]);

  if Sibling <> nil then
  begin
    NewIndex := GetChildOrder(Sibling);
    if NewIndex = -1 then
      raise Exception.CreateFmt( 'Sibling ''%s'' is not a child of panel ''%s''',
                                 [Sibling.Name, Name]);
    if CurrentIndex < NewIndex then
      Dec(NewIndex);
  end
  else
    NewIndex := ControlCount;

  SetChildOrder(Child, NewIndex);
end;

procedure TAlignPanel.SetChildOrder(Child: TComponent; Order: Integer);
begin
  inherited;
  Realign;
end;

procedure TAlignPanel.SetChildOrder(Child: TControl; Order: Integer);
begin
  SetChildOrder(TComponent(Child), Order);
end;

procedure TAlignPanel.SetZOrder(TopMost: Boolean);
begin
  inherited;
  Realign;
end;

end. 
```

# python - Python x-www-form-urlencoded POSTing：找不到属性

> ID：13220114
> 
> 赞同：0
> 
> 时间：2012-11-04T15:49:22.560
> 
> 标签：python, forms, urllib2, mechanize

最近我遇到了一个似乎无法通过 python 发出 POST 请求的页面，因为我在源代码的任何地方都找不到某些属性。

所以基本上这里是手动 POST 到该页面时来自 Live Http Header 的内容：

```
Content-Type: application/x-www-form-urlencoded 

Content-Length: 616 

form_key=VeBg0awGeGySaRYzBZc8jMwH0&secure_form_key=%21331352042042%7CsYH2EQfAK7nTIakC55PK8SQv78&blahblahblah 
```

如您所见，在仔细检查源页面后，我可以轻松找到`form_key`但无法找到任何地方。`secure_form_key`它可能隐藏在哪里？我应该如何找到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T17:08:01.517

如果您尝试与 tumblr 交互，为什么不使用官方 API 而不是尝试破解普通网站上的表单？

可从：[http ://code.google.com/p/python-tumblr/](http://code.google.com/p/python-tumblr/)

# javascript - document.activeElement 返回 [object HTMLInputElement]，但 HTMLInputElement 的实例等于 false？

> ID：13220116
> 
> 赞同：2
> 
> 时间：2012-11-04T15:49:46.320
> 
> 标签：javascript

我正在测试以查看当前焦点元素是否是使用 document.activeElement 的输入。当它返回 [object HTMLInputElement] 时，我假设我可以使用下面的逻辑来测试它，但它总是返回 false？

```
document.activeElement instanceof HTMLInputElement 
```

任何人都知道我做错了什么，因为在谷歌上的快速搜索表明这个逻辑是完全有效的？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T16:05:44.043

使用 hasfocus 方法。

**activeElement**返回对当前指定为文档中活动元素的对象的引用。

文档中一次只能激活一个元素。活动元素不一定具有焦点，但具有焦点的元素始终是文档中的活动元素。例如，不是前景窗口的窗口中的活动元素没有焦点。

# javascript - 当 HTML 下拉列表选择选项时需要隐藏 div

> ID：13220120
> 
> 赞同：-1
> 
> 时间：2012-11-04T15:50:15.697
> 
> 标签：javascript, jquery, html

目前，我有一个客户输入工作数据的页面。可以选择说明他们的客户是否同意工作表数据：

```
<div id="modalwindow">
    <div class="leftcolumn">
        <?php 
            echo $this->Form->create('Jobsheet', array(
                'class' => 'form-horizontal',
                'id' => 'addquickJobsheet'
            ));

            echo $this->Form->input('jobnum', array(
                'type' => 'text',
                'lable' => 'Job ID',
                'class' => 'span5',
                'placeholder' => 'Enter the job ID here'
            ));
            echo $this->Form->input('jobdate', array(
                'type' => 'text',
                'label' => 'Date',
                'class' => 'span5',
                'placeholder' => 'YYYY/MM/DD'
            ));
            echo $this->Form->input('siteaddress', array(
                'type' => 'hidden',
                'value' => $sites['Siteaddress']['id']
            ));
            echo $this->Form->input('bins', array(
                'label' => 'Bins',
                'class' => 'span5',
                'placeholder' => 'Enter the number of bins here'
            ));
            echo $this->Form->input('company', array(
                'value' => $companyid,
                'type' => 'hidden',
                'label' => 'Company',
                'class' => 'span5'
            ));
            echo $this->Form->input('driverid', array(
                'options' => $driverselect,
                'empty' => 'Select Driver',
                'label' => 'Driver',
                'class' => 'span5'
            ));
            echo $this->Form->input('vehicleid', array(
                'options' => $vehicleselect,
                'empty' => 'Select Vehicle',
                'label' => 'Vehicle',
                'class' => 'span5'
            ));
            echo $this->Form->input('contract', array(
                'value' => $contractid,
                'type' => 'hidden',
                'label' => 'Contract',
                'class' => 'span5'
            ));
        ?>
    </div>
    <div class="rightcolumn">
        <?php
            echo $this->Form->input('skipsize', array(
                'options' => $skipsizes,
                'empty' => 'Select Skip Size',
                'label' => 'Skip Size',
                'class' => 'span5'
            ));
            $ao = array('1' => 'Yes', '0' => 'No');
            echo $this->Form->input('recweight', array(
                'label' => 'Weight Of Skip',
                'class' => 'span5',
                'placeholder' => 'Enter the weight here'
            ));
            $agval = array('1' => 'Yes', '0' => 'No');
            echo $this->Form->input('agreed', array(
                'label' => 'Agreed?',
                'options' => $agval,
                'class' => 'span5',
                'value' => '1'
            ));
        ?>
        <div id="agreedby">
        <?php
            echo $this->Form->input('agreedby', array(
                'label' => 'Agreed By',
                'class' => 'span5',
                'placeholder' => 'Enter who agreed this job sheet here'
            ));
        ?>
        </div>
        <?php
            echo $this->Form->input('deleted', array(
                'type' => 'hidden',
                'value' => '0'
            ));
            echo $this->Form->submit('Next', array(
                'class' => 'btn btn-primary'
            ));
            echo $this->Form->end();
        ?>
    </div>
</div> 
```

目前，如果工作表尚未达成一致，我有应该隐藏“agreedby”字段的 Javscript：

```
<script type="text/javascript">
$(document).ready(function(){
    $("#JobsheetAgreed").change(function() {
        ($(this).val() == "0") ({
            $("#agreedby").hide();  
        });
        ($(this).val() == "1") ({
            $("#agreedby").show();
        });
    });
});
</script> 
```

但这似乎没有任何作用。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T16:24:01.300

我不确定`#JobsheetAgreed`HTML 在哪里，它甚至存在吗？您也可以尝试检查您的 HTML 和 ID。

无论如何，如果选择器正确，我认为这段代码应该可以工作。

```
$(document).ready(function(){
    $("#JobsheetAgreed").change(function() {
    var agrdby = $(this).val();
       if (agrdby == "0") {
       $("#agreedby").hide();
       }
       else {
       $("#agreedby").show();
       } 
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T15:56:22.230

试试这个：

```
$('#agreedby, [name="agreedby"]').hide(); 
```

代替

```
$("#agreedby").hide(); 
```

这可能是因为您使用的 PHP 框架不包含表单字段的 ID 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T15:57:07.437

我没有发现您在任何输入元素中定义 id “JobsheetAgreed”，如果您不只是跳过代码的某些片段，这很可能是原因。

假设这是部分：

```
echo $this->Form->input('agreed', array(
            'label' => 'Agreed?',
            'options' => $agval,
            'class' => 'span5',
            'value' => '1'
        )); 
```

`'id' => 'JobsheetAgreed'`就我可以阅读您的代码而言，其中必须有一个。

# mysql - SQL ，计算每列中的等效值

> ID：13220121
> 
> 赞同：0
> 
> 时间：2012-11-04T15:50:28.433
> 
> 标签：mysql, sql, visitor-statistic

我正在使用 PHP 和 MYSQL 开发一个 URL 缩短器项目，该项目跟踪每个 url 的访问。我提供了一个主要由以下属性组成的访问表：

```
time_in_second | country | referrer |  os   | browser | device | url_id
#####################################################################
1348128639     |    US   |   direct |  win  | chrome  | mobile | 3404  
1348128654     |    US   |   google | linux | chrome  | desktop| 3404  
1348124567     |    UK   |   twitter| mac   | mozila  | desktop| 3404  
1348127653     |    IND  |   direct | win   | IE      | desktop| 3465 
```

现在我想对该表进行查询。例如，我想用 . 获取 url 的访问数据`url_id=3404`。因为我应该*提供统计数据并绘制图表*，所以对于这个 url，我需要这些数据：

*   此 URL 的每种操作系统的数量，例如 20 个 windows，15 个 linux，...
*   每个所需时间段内的访问次数，例如过去 24 小时内每 10 分钟的访问次数
*   每个国家的访问次数
*   ...

如您所见，某些数据（例如国家/地区）可能会接受许多不同的值。

我可以想象的一个好主意是进行查询，该查询输出每列中每个唯一值的数量，例如在上面给出的数据的国家情况下，列上为`num_US`，一个为`num_UK`，一个为`num_IND`。

现在的问题是如何在 sql (MYSQL) 中实现这样一个高性能的查询？

此外，如果您认为这不是对性能的有效查询，您的建议是什么？

任何帮助将不胜感激。

**更新：**看看这个问题：[SQL；只计算每列中指定的值](https://stackoverflow.com/questions/915260/sql-only-count-the-values-specified-in-each-column)。我认为这个问题与我的类似，但不同之处在于每列可能有多种值（因为可能有很多值`country property`），这使得查询更加复杂。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T16:13:40.720

您要绘制的这些图表中的每一个都代表一个单独的关系，因此我的即兴响应是，您无法构建一个查询来准确地为您提供要绘制的每个图表所需的数据。

从这一点来看，您的选择是：

1.  对不同的图表使用不同的查询
2.  向客户端发送一堆数据，让它进行所需的后处理，以创建不同图表所需的确切数据集
3.  把它全部交给谷歌分析（a la @wahab-mirjan）

如果您使用选项 2，您可以通过计算每（10 分钟、操作系统、浏览器、设备、url_id）元组的命中来最小化发送的数据量。这基本上删除了所有重复的行并给你一个计数。客户端软件将采用这些数字并按国家（或其他）进一步减少它们以获得图表所需的数字。不过老实说，我认为您正在为自己购买额外的复杂性而没有太多收获。

如果您坚持自己执行此操作（而不是使用服务），则对每种图形使用不同的查询。从几个合理的索引开始（url_id 和 time_in_second 是明显的起点）。使用该`explain`语句（或您的数据库提供的任何内容）来了解每个查询是如何执行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T16:01:34.990

看起来您需要执行多个查询。您可能可以编写一个具有不同参数的查询，但这会使它变得复杂且难以维护。我会将其视为多个小查询。因此，对于每个要求，我都会进行查询并单独或单独调用它们。例如，如果您想要您提到的国家/地区查询，您可以执行以下操作

```
SELECT country, count (*) FROM <TABLE_NAME> WHERE url_id = 3404 GROUP BY Country 
```

**顺便说一句，我没有测试过这个查询，所以它可能不准确，但这只是给你一个想法。我希望这有帮助。**

另外，另一个建议是使用谷歌分析，调查一下，他们确实有很多你已经在实施的东西，也许这也有帮助。

干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T21:10:29.763

抱歉，我是 Stack Overflow 的新手，评论格式有问题。这是我的回答，希望它现在有效：

不知道它的性能如何。我的想法是你最终会得到一个如下所示的表格：

```
country | count 
################# 
     US | 304 
     UK | 123 
     UK | 23 
```

因此，当您按国家/地区分组并计数时，这将是一个查询。我认为这会让你朝着正确的方向前进。无论如何，这只是一种意见，所以如果你找到另一种方法，我也有兴趣了解它。

对上面的评论混乱表示歉意..

干杯

# cocoa - 核心数据：观察嵌套属性

> ID：13220123
> 
> 赞同：2
> 
> 时间：2012-11-04T15:50:38.600
> 
> 标签：cocoa, core-data, key-value-observing

我的核心数据模型中有一个实体类别。类别与文章有一对多的关系。文章有一个属性 read，它是一个布尔值。

我想观察未读文章的数量（所以我可以在标题中显示）。

第一种方法是这样的：

```
 [self.category addObserver:self forKeyPath:@"articles.@sum.read" options:NSKeyValueObservingOptionNew context:nil]; 
```

但这不起作用。我可以观察文章集合以查看是否添加了某些内容，并单独观察所有元素。我可以让这个工作，但我想知道是否有更简单的方法。有什么提示吗？

（这可能是[Using KVO to observe changes to a property on a collection in Objective-C](https://stackoverflow.com/questions/5691621/using-kvo-to-observe-changes-to-a-property-on-an-object-inside-a-collection-in-o)的副本，但我仍然认为应该有更好的方法）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T23:09:26.907

您需要多*精确地知道发生了什么变化以及何时发生变化？*如果您的要求很简单，您可以收听`NSManagedObjectContextObjectsDidChangeNotification`通知并检查`userInfo`for `NSUpdatedObjectsKey`。这些对象将通过它们的`-changedValues`方法返回更改。

东西是如何添加到`articles`收藏中的？简单地直接挂在那里而不是使用 KVO 可能是最简单的。

# c++ - C++ 中的文件通道

> ID：13220132
> 
> 赞同：2
> 
> 时间：2012-11-04T15:51:26.913
> 
> 标签：c++, c, io, filechannel

在 java 中，有[FileChannel](http://docs.oracle.com/javase/7/docs/api/java/nio/channels/FileChannel.html)可以从文件通道中读取。我还可以在频道中设置我想开始阅读的位置。

C ++ / C中有类似的功能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-04T15:56:02.967

请查看 C++`ifstream::seekg()`和`ifstream::tellg()`. 同样在 C:`ftell()`和`fseek()`函数中`<stdio.h>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T16:00:41.473

如果你想要一个编程解决`C`方案

如果你想从位置读取，`X`那么你可以使用`fread()`up to`(X-1)`然后重用`fread()`or `fgets()`or`fgetc()`来读取位置`X`

[如何在C中读取文本文件到某个位置？](https://stackoverflow.com/questions/1252543/how-to-read-a-text-file-upto-certain-position-in-c)

# javascript - SVG 动态调整大小

> ID：13220136
> 
> 赞同：9
> 
> 时间：2012-11-04T15:51:40.430
> 
> 标签：javascript, html, svg

有谁知道我可以动态调整 svg 图像的大小，使其适合容器？我发现我的图像溢出了。我想要的是一种调整它的大小使其不会溢出的方法。任何回应表示赞赏。我也尝试将宽度和高度设置为 100%

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-04T16:03:58.450

好的，所以做动态宽度最简单的方法就是为`width`or/and提供一个百分比值`height`。你可以在这里找到我的例子[http://jsfiddle.net/VDKwy/](http://jsfiddle.net/VDKwy/)

所以关键部分要么省略 svg 元素的`width`and`height`属性，要么

```
<svg width="100%" height="100%"></svg> 
```

然后对内部元素使用百分比值，如下所示：

```
<rect x="10%" y="10%" width="80%" height="80%" style="fill:blue;stroke-width:5; stroke:black" /> 
```

# java - 创建多用户客户端-服务器应用程序的合适架构是什么？

> ID：13220140
> 
> 赞同：5
> 
> 时间：2012-11-04T15:51:59.510
> 
> 标签：java, sockets, serversocket

我正在开发一个需要单个服务器和大量客户端的应用程序。我正在利用 Java 套接字编程 API 来完成这项任务。目前，我正在考虑重组我的应用程序的整个设计，因为我根本不认为它是以最有效的方式构建的，并且希望获得一些关于最佳路径的指导。

## 当前实施

我有一个`ServerSocket`位于端口 5000 上，包含套接字的线程只是连续运行并接受任何连接。然后它启动一个新的服务器线程（基于可用端口的同步表）来处理与该客户端的通信，然后`ServerSocket.accept()`再次阻塞。

从这个主线程产生的线程也包含一个`ServerSocket`并被用作一次处理多个连接的一种方式。

现在，客户端线程简单地连接到端口 5000，接收下一个可用端口作为回复，然后断开与端口 5000 的连接（通过调用`Socket.close()`），并重新连接到服务器表示可用的端口。

## 我的问题

这是在单个服务器上处理多个客户端的最佳方式（或者更好，甚至合理吗？）？或者我应该简单地`ServerSocket`在所有可用端口上打开 's 并不断收听？也许是我还没有考虑过的事情？

## 附录

我试图从大型客户端-服务器应用程序（例如 MMORPG 或某些聊天应用程序）的角度来思考，以了解我的实现的可行性。例如，我试着问自己：“虽然这可能行得通，但如果这个应用程序有一个庞大的用户群，它会是一个好的解决方案吗？”。话虽如此，如果我能看到解决方案如何大规模地工作，比如数百万用户，我会更容易理解解决方案的最佳性质。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-04T16:02:12.067

我不明白为什么每次主服务器接受连接时都需要使用新的 ServerSocket。为什么不简单地使用`accept()`（如[Java 教程](http://docs.oracle.com/javase/tutorial/networking/sockets/clientServer.html)中所述）返回的套接字？

此外，您应该使用线程池，而不是为每个客户端启动一个新线程。这将避免不断创建新线程，并避免启动过多线程并使您的服务器瘫痪。

但是，这种架构并不是处理大量用户的最佳架构。如果您真的需要这样的可扩展性，使用异步 IO 可能是一个更好的解决方案，但我对此没有太多经验。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-04T17:18:32.010

在考虑服务器架构时，第一个问题是估计单个连接需要多少内存和进动能力。第二个是同时连接的数量。乘法后，我们可以决定是单机足够还是需要集群。

然后我们决定是否可以为连接提供一个线程（大约 128..512 KB）。如果可以，那么经典的每个连接单线程就可以了。如果我们不能，那么基于 NIO 或 NIO2 的异步架构更合适。

基本决策完成后，我们可以选择合适的库和框架。从头开始做所有事情更有趣，但是会花费很多时间，以至于在完成的那一刻结果可能对任何人都不感兴趣。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T15:59:34.243

我同意您的以下建议，因为端口 5000 上的单个服务器是一个瓶颈：

> 还是我应该简单地在所有可用端口上打开 ServerSocket 并不断收听？

我更喜欢serversocket的池。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-04T16:07:17.000

使用[JMS（在我的例子中是它的 ActiveMq）](http://activemq.apache.org/cms/getting-started.html)实现你的目标。您可以轻松进行负载平衡和故障转移

# ios - 无法获取用户的性别：在“NSDictionary”类型的对象上找不到属性“性别” *'

> ID：13220141
> 
> 赞同：0
> 
> 时间：2012-11-04T15:52:16.637
> 
> 标签：ios, ios6, facebook-ios-sdk, fb-graph

这是我获取代表用户图的整个字典的代码：

```
 if (FBSession.activeSession.isOpen) {
        [[FBRequest requestForMe] startWithCompletionHandler:
         ^(FBRequestConnection *connection,
           NSDictionary<FBGraphUser> *user,
           NSError *error) {
             if (!error) {
                 NSLog(@"%@",user);//Displayed with the gender
                 NSLog(@"%@",user.name);//Name only displayed
                 NSLog(@"%@",user.gender);//Build error
             }
         }];
    } 
```

我很想知道性别数据有什么问题，以及为什么在字典中找不到它，实际上，我得到了一个构建错误：

```
property 'gender' not found on object of type 'NSDictionary<FBGraphUser> *' 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-25T12:03:23.790

您可以使用`[user objectForKey:@"gender"];`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-04T17:17:29.770

Facebook 不会发送性别来响应“requestForMe”。为了获得这样的性别发送请求：

```
NSDictionary* params = [NSDictionary dictionaryWithObject:@"id,gender,name, whatever you like" forKey:@"fields"];

[[FBRequest requestWithGraphPath:[NSString stringWithFormat:"%d",myUserId] parameters:params HTTPMethod:nil] startWithCompletionHandler:... 
```

我不确定，但我认为您也可以将图形路径设置为 @"me" 而不是用户的 ID。

# arrays - AS3“每个”数组问题

> ID：13220145
> 
> 赞同：0
> 
> 时间：2012-11-04T15:52:58.537
> 
> 标签：arrays, actionscript-3

我正在尝试创建一个显示您按下的按钮名称的系统。按钮名称被放入一个数组中，但是它只识别最后一个输入到数组中的项目。帮助将不胜感激。

```
var items:Array = [a, b, c]; //The name of each button

for each(var index in items) 
{
    index.addEventListener(MouseEvent.CLICK, mouseClickHandler);
}

function mouseClickHandler(event:MouseEvent):void
{
    trace(index.name); //Should display the name of any of the buttons clicked.

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T03:07:11.240

您应该跟踪`currentTarget`名称：

```
var items:Array = [a, b, c]; //The name of each button

for each(var index in items) {
    index.addEventListener(MouseEvent.CLICK, mouseClickHandler);
}

function mouseClickHandler(event:MouseEvent):void {
    trace(event.currentTarget.name); //Should display the name of any of the buttons clicked.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T16:13:59.780

这里只`index`创建了一个变量——`mouseClickHandler`很明显，函数只使用它的当前值。如果您需要参考特定值（在每个循环步骤中给出），您需要以一种或另一种方式对它们进行本地化：

```
function generateClickHandler(index:someType) {
  return function(event:MouseEvent):void { trace(index.name); }
}

...    
for each(var index in items) 
{
    index.addEventListener(MouseEvent.CLICK, generateClickHandler(index);
} 
```

我建议也检查这个[线程](https://stackoverflow.com/questions/422784/how-to-fix-closure-problem-in-actionscript-3-as3)。

# spring - 角色和权限如何转化为 Spring Security？

> ID：13220149
> 
> 赞同：1
> 
> 时间：2012-11-04T15:53:16.927
> 
> 标签：spring, security, roles, rights, authority

在我的应用程序中，我通常为访问管理创建三个表。角色、权限以及在角色和权限之间映射的关联表。

我正在尝试将这种方法转换为 Spring 安全性，在阅读了 [这篇文章][1] 之后，我认为我走在了正确的轨道上。我创建了一个自定义 AuthenticationProvider 并实现了`authenticate()`这样的方法：

```
@Override
public Authentication authenticate(Authentication authentication) throws AuthenticationException {
    UserProfile profile = userProfileService.findByEmail(authentication.getPrincipal().toString());

    if(profile == null){
        throw new UsernameNotFoundException(String.format("Invalid credentials", authentication.getPrincipal()));
    }

    String suppliedPasswordHash = DigestUtils.shaHex(authentication.getCredentials().toString());

    if(!profile.getPasswordHash().equals(suppliedPasswordHash)){
        throw new BadCredentialsException("Invalid credentials");
    }

    UsernamePasswordAuthenticationToken token = new UsernamePasswordAuthenticationToken(profile, null, profile.getAuthorities());

    return token;
} 
```

该`profile.getAuthorities()`方法创建一个权限列表（权限包含在我自己的 GrantedAuthority 实现中）。因此，使用此列表创建了 UsernamePasswordAuthenticationToken 对象。这是处理此问题的 UserProfile.getGrantedAuthorities() 方法：

```
public Collection<? extends GrantedAuthority> getAuthorities() {
    Set<ProduxAuthority> authorities = new HashSet<ProduxAuthority>();
    for (Role role : roles) {
        for (Right right : role.getRights()) {
            ProduxAuthority produxAuthority = new ProduxAuthority(right.getName());
            authorities.add(produxAuthority);
        }
    }
    return authorities;
} 
```

我的问题是这是否是正确的方法。我的印象是我应该将角色填充到 GrantedAuthorities 而不是权限，但我想使用权限来保护方法和 url，因为它让我对授权有更细粒度的控制。我将如何做到这一点？Spring中的ROLE和PERMISSION有什么区别？权限是否映射到权限，我可以使用 hasPermission() 来保护基于权限而不是角色的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T19:06:19.110

我将再次回答我自己的问题：

Spring不知道hasPermission方法使用的权限和权限只适用于Spring安全中相对复杂的Domain Object Security/ACL。Spring 的简单安全只知道角色和角色或更通用的“权限”（一般意义上，不要与域对象安全/ACL 中的权限混淆），例如 IS_AUTHENTICATED_ANONYMOUSLY 在身份验证的第三个构造函数参数中传递给 Spring对象的。

我总结了我自己网站上的所有内容，并创建了一个示例实现，将权限填充到角色中，并且以这种方式仍然非常灵活。

[http://en.tekstenuitleg.net/blog/spring-security-with-roles-and-rights](http://en.tekstenuitleg.net/blog/spring-security-with-roles-and-rights)

# c# - 从网页收集信息的最佳方式

> ID：13220150
> 
> 赞同：1
> 
> 时间：2012-11-04T15:53:30.240
> 
> 标签：c#, excel, web-scraping

我需要从几个网站获取信息。例如[这个站点](http://tel.directory.gov.hk/index_ENG.html?accept_disclaimer=yes) 什么是从页面中获取所有链接以便提取信息的最佳方式。有时需要单击一个链接以获取其中的其他链接。我尝试了 Watin，并尝试在 Excel 2007 中使用 Web Data 选项执行相同的操作。您能否建议一些我不知道的更好的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T16:06:28.230

看看[WGet](http://www.gnu.org/software/wget/manual/)。它是一个非常强大的工具，用于挖掘单个页面或整个网站的内容。可用的选项允许您根据链接指定要遵循的深度级别、如何处理图像等静态资源、如何处理相关链接等。它还可以很好地挖掘动态生成的页面，例如由 CGI 或 ASP 提供的服务。

它在 'nix 世界中已经存在多年，但[为 Windows 编译的可执行文件](http://gnuwin32.sourceforge.net/packages/wget.htm)很容易获得。

您需要使用 Process.Start 从 .NET 启动它，但是您可以将结果通过管道传输到多个文件（模仿原始网站结构）、单个文件或通过捕获标准输出到内存中。然后您可以进行后续分析，例如提取 HREF HTML 元素（如果它只是您感兴趣的链接）或抓取您在问题中提供的链接中明显的表格数据类型。

我意识到这不是一个“纯粹的”.NET 解决方案，但在我看来，WGET 提供的强大功能足以弥补这一点。我过去曾以这种方式自己使用过它，这正是我认为您正在尝试做的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T15:33:54.347

[Ncrawler](http://ncrawler.codeplex.com/wikipage?title=Getting%20Started&referringTitle=Documentation)可能对深层爬行非常有用。您还可以设置**MaxCrawlDepth**以指定相同的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T19:20:35.157

我建议使用[http://watin.org/](http://watin.org/)。这比 wget 简单得多:-)

# android - 如何重用使用 startForeground 创建的通知中的顶级活动？

> ID：13220154
> 
> 赞同：3
> 
> 时间：2012-11-04T15:54:17.227
> 
> 标签：android, android-intent, android-service, android-notifications

[我有一项服务，当用户执行某个操作时，它会使用Service.startForeground(..)](http://developer.android.com/reference/android/app/Service.html#startForeground%28int,%20android.app.Notification%29)更改为在前台运行，因为杀死它会对用户造成干扰。

我使用以下代码构建了一个通知来创建其挂起的意图：

```
Intent topActivityIntent = new Intent(this, topActivityClass);
// Rebuild the task stack
TaskStackBuilder stackBuilder = TaskStackBuilder.create(this);
// Adds the back stack
stackBuilder.addParentStack(topActivityClass);
stackBuilder.addNextIntent(topActivityIntent);
for (int i = 0; i < stackBuilder.getIntentCount(); i++) {
    Intent currentIntent = stackBuilder.editIntentAt(i);
    // Set flags to tell that we want to re-use the existing
    // topActivity if possible
    currentIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | 
        Intent.FLAG_ACTIVITY_SINGLE_TOP | 
        Intent.FLAG_ACTIVITY_NEW_TASK);
}
// Adds the Intent to the top of the stack
// Gets a PendingIntent containing the entire back stack
PendingIntent pendingIntent = stackBuilder.getPendingIntent(0,
    PendingIntent.FLAG_UPDATE_CURRENT); 
```

`topActivityClass`是用户当前看到的活动，因为我希望他/她回到相同的活动。

这里的问题是，当用户点击通知时，`Activity`会创建一个新通知，而不是使用任务堆栈中的通知。

我尝试将标志设置为标志的`topActivityIntent`和几个组合。

我应该使用哪些标志来避免创建新活动？是否可以重用堆栈中的活动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-25T14:07:26.023

只需`FLAG_ACTIVITY_NEW_TASK`从意图中删除，它将重用现有任务

# ruby-on-rails - Eager loading of rails lib

> ID：13220165
> 
> 赞同：7
> 
> 时间：2012-11-04T15:55:33.043
> 
> 标签：ruby-on-rails, ruby

It looks like this issue will be solved in Rails 4: [http://blog.plataformatec.com.br/2012/08/eager-loading-for-greater-good/](http://blog.plataformatec.com.br/2012/08/eager-loading-for-greater-good/) but until then, I'm wondering how to eager-load modules/classes in my `/lib`.

In IRB it appears that they are loaded on-demand the first time I try to access:

```
Foo::Bar.constants
=> []

Foo::Bar::Service
=> Foo::Bar::Service

Foo::Bar.constants
=> [:ServiceBase, :Service] 
```

I have several other classes in that module, and my code depends on being able to look them up using `Foo::Bar.const_defined?` at runtime - how do I ensure all `Foo::Bar`'s classes get loaded at startup?

I'm already using `config.autoload_paths += %W(#{config.root}/lib)` in `application.rb`.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-04T16:00:07.637

Putting this in `root/config/initializers/eager.rb` should load all .rb files in that folder:

```
Dir["#{Rails.root}/lib/*.rb"].each {|file| load file} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-03-08T05:56:30.777

For me putting this in application.rb solved the problem

```
config.eager_load_paths += Dir["#{config.root}/lib/**/"] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-01T05:06:08.620

Use `eager_load_paths` combined with `ActiveSupport::Reloader`'s `to_prepare` hook inside `development.rb`:

```
config.eager_load_paths += Dir["app/models/stimodel/**/*.rb"]  
ActiveSupport::Reloader.to_prepare do  
  Dir["app/models/stimodel/**/*.rb"].each { |f| require_dependency("#{Dir.pwd}/#{f}") }
end 
```

Adding your paths to `eager_load_paths` make sure that Rails loads them when it starts up. To make sure that Rails reloads our models if we do any changes or add new files, we also need to hook into the Reloader's `to_prepare` hook and manually require the dependency there.

# java - 从 byteArray 到 bigInteger

> ID：13220168
> 
> 赞同：5
> 
> 时间：2012-11-04T15:56:02.710
> 
> 标签：java, integer

如何将 byteArray 转换为 bigInteger？重要的是要说我的 bytearray 不是普通的 byte[].. 它是我项目中的一个类。基本上我有一个 256 字节的数组，我需要将它表示为 BigInteger 才能执行计算。

代码如下所示：

//这就是我在 byteArray 中获取信息的方式

```
 ByteArray modulus = (ByteArray)inParamsList.getParameterType("modulus"); 
```

//这是我得到异常的行。发生这种情况是因为“toString”实际上并没有将其转换为字符串

```
 BigInteger modulusInBig = new BigInteger(modulus.toString()); 
```

我很乐意得到一些答案！我已经在网上找遍了……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T16:03:34.913

修改您的`ByteArray`类以提供一个`toArrayByte()`方法，`byte[]`然后返回：

```
BigInteger modulusInBig = new BigInteger(modulus.toArrayByte()); 
```

# grails - 当子实体包含无效数据时，Grails 无法处理一对一关系

> ID：13220176
> 
> 赞同：1
> 
> 时间：2012-11-04T15:56:41.317
> 
> 标签：grails, grails-orm

我有一个父表 Parent 和一个子表 Child。关系是这样的：

```
class Parent {
   ...
   Child child

   static mapping = {
      child lazy: false, cascade: 'all'
   }
   static constraints = { ... }
}

class Child {
   String name

   static constraints = {
      name unique: true
   }
} 
```

我创建了一些代码来将孩子添加到现有的父母。它看起来像这样：

```
def parent = Parent.get(id)
parent.child = new Child(name: (name))
parent.save() 
```

此代码包含在事务服务方法中。

当孩子无效时它不起作用 - 没有验证发生。我得到一个著名的休眠错误：

> 对象引用未保存的瞬态实例 - 在刷新之前保存瞬态实例。

可以很容易地解释：child 没有经过验证，当 GORM 保存对象时，它会尝试保存 child，然后它应该由于失败而停止，但它会继续并尝试使用未保存的 child 字段保存 parent。

当孩子无效时，我该如何解决？我需要将有关错误的信息传播到视图表单。

我已经尝试手动验证子级 - 它的错误字段包含 1 个错误，但父级仍然有效。我尝试将错误插入到父错误字段 - 父级无效，但 GORM 仍然尝试保存它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T23:01:15.217

您在 Child 和 Parent 之间的关系中是否定义了**belongsTo （例如静态 belongsTo = [Parent]）？**如果不这样做，Grails 将不会将保存/更新从父级级联到子级，因为它不“拥有”子级 - 因此，如果子级上没有发生任何保存，则永远不会调用验证。所以尝试添加

```
static belongsTo = [Parent] 
```

在 Child 类中并再次保存，如果您仍然没有看到 Child 验证发生，也可能使用[deepValidate:true 。](http://grails.org/doc/latest/ref/Domain%20Classes/validate.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-08-12T06:51:39.850

感谢您提供这个不错的答案，由于您的帖子，我遇到了同样的问题，我解决了问题

```
def val = (params.company).toInteger()
def parent = Company.get(val)
        .addToJobs(new Job(
            experience:params.months,
            jobdescription:params.desc,
            joblocation:params.companyloc,
            jobskills:params.skills,
            jobtype:params.emp,
            salary:params.jobsalary,
            jobtitle:params.jobtitle))
        .save() 
```

# extjs - 在打开的文件夹上动态加载树的子节点

> ID：13220179
> 
> 赞同：4
> 
> 时间：2012-11-04T15:57:09.810
> 
> 标签：extjs, extjs4

我是 extjs 的新手，我正在尝试处理树视图。

我正在构建一个“API Explorer”，并且节点太多，无法作为单个 json 对象（几百万个节点）发送。我想做的是最初将第一层类别作为 json 发送，然后在展开时执行 ajax 请求以获取该类别的所有子项。

我不确定如何执行此操作或是否可能。谁能带领我朝着正确的方向前进？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T16:47:15.380

实际上，这是文档建议的“正常”方式。查看任何[Tree 示例](http://docs.sencha.com/ext-js/4-1/#!/example/tree/reorder.html)。

您基本上使用代理设置了[Ext.data.TreeStore](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.TreeStore)，例如[Ext.data.proxy.Ajax](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.proxy.Ajax)：

```
xtype: 'treepanel',
loadMask: {msg: 'Loading...'},
store: Ext.create('Ext.data.TreeStore', {
    proxy: {
        type: 'ajax',
        url: 'get-nodes.php'
    }
}) 
```

每次用户展开其中一个节点时，URL 将被设置为展开节点的*id的参数**节点*命中，并且应该返回该节点的子节点的数组。这些孩子自己不能有*孩子*属性，否则他们将被认为已经*加载*并且不会在扩展时加载。

# wordpress - 如何更改 Wordpress 中的默认帖子网址？

> ID：13220184
> 
> 赞同：0
> 
> 时间：2012-11-04T15:57:50.570
> 
> 标签：wordpress, url, post, domain-name

不知道如何解决这个问题。无论如何，我正在写一个 WP 博客[http://athenasweb.com](http://athenasweb.com)

但是我发的每篇文章的url都不是athenasweb，而是1and1在域名切换前的默认url：http: [//s433108212.onlinehome.us/](http://s433108212.onlinehome.us/)

这真的很烦人，尤其是在链接到新帖子时，无论如何要在 wordpress 中更改它？

例如：[http ://s433108212.onlinehome.us/aspectarian-nov-2nd-nov-8th-2012/](http://s433108212.onlinehome.us/aspectarian-nov-2nd-nov-8th-2012/)

应该是[http://athenasweb.com/aspectarian-nov-2nd-nov-8th-2012/](http://athenasweb.com/aspectarian-nov-2nd-nov-8th-2012/)

![在此处输入图像描述](../Images/b9d2b8149b3d0fcd8699adc41cee4602.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T02:38:31.880

转到常规设置并确保 wordpress 地址和站点地址与您想要的匹配。

# assembly - 请帮我解决我的十进制到十六进制涡轮装配程序

> ID：13220188
> 
> 赞同：1
> 
> 时间：2012-11-04T15:58:27.347
> 
> 标签：assembly, hex, decimal

我正在使用我的程序，它应该将十进制数字从 0 到 65535 转换为十六进制。问题是我的程序不会打印 4 位十六进制数字。例如，它将打印 5FF 而不是 FFFF 或 711 而不是 1111，我找不到错误。请帮忙。

继承人的代码：

```
;***************************************************************
; decimal to hexadecimal
;***************************************************************

.model small

bufSize EQU 121

.stack 100h

.data

    bufSize DB  bufSize     
    read DB  ?              ;how many symbols
    buf  DB  bufSize dup (?)    

    msg  DB  'Please, enter decimal digit: $'
    enterr  DB  13, 10, '$'
    errormsg DB  'wrong input $'
    form     DB  'answer is: $'

.code

begin:
    MOV ax, @data       
    MOV ds, ax          

;****reads line****
    MOV ah, 9
    MOV dx, offset msg
    INT 21h         

    MOV ah, 0Ah
    MOV dx, offset bufSize
    INT 21h         

    MOV ah, 9
    MOV dx, offset enterr
    INT 21h         

;****algorythm****
    XOR ax, ax          
    MOV cl, read        ;how many symbols

    MOV bx, offset buf  ;first symbol to bx

check: 
    CMP cl, 0
    MOV ah, 9
    JNE loop0
    MOV dx, offset errormsg
    INT 21h         ;spausdiname rezultato žinutę
    JE ending

errorr:
    MOV ah, 9
    MOV dx, offset errormsg
    INT 21h         ;spausdiname rezultato žinutę
    JMP ending
loop0:
    PUSH ax
    PUSH dx
    XOR ax,ax
    XOR dx,dx
    JMP loop1

loop1:
    MOV dh,0Ah
    MUL dh
    MOV dl,[bx] 
    cmp dl, '0'
    JB errorr
    cmp dl, '9'
    JA errorr

    SUB dl,30h
    ADD al,dl

loop2:  
    INC bx          

    DEC cl          
    CMP cl, 0           
    JNE loop1           

    MOV cx, 16
    PUSH '$$'

Division:
    MOV dx, 0       
    DIV cx      ;[DX,AX]:10 = AX(remainder DX)
    PUSH dx     
    CMP ax, 0       
    JA  Division        

    ;printing
    MOV ah, 9
    MOV dx, offset form
    INT 21h         
    MOV ah, 2       
Print:
    POP dx      
    CMP dx, "$$"    
    JE  ending      
    CMP dx, 9
    JNBE above
less:
    ADD dl, '0'     
    INT 21h     
    JMP Print   
above:
    ADD dl, '7'     
    INT 21h 
    JMP Print   

    pop dx
    pop ax

ending:
    MOV ah, 4Ch
    MOV al, 0           
    INT 21h         

END begin 
```

谢谢您的回答。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T16:49:24.887

问题出在第一个循环中的乘法步骤中：

```
MUL dh 
```

这种形式的`MUL`指令采用 8 位寄存器或内存操作数（此处`DH`为 ），将其与 8 位`AL`寄存器相乘，并将 16 位结果存储在`AX`. 因为这只允许 8 位操作数，所以它只能对最大为 255 的输入值正确工作。如果您希望它对最大为 65535 的值工作，您将需要使用将两个 16 位值相乘的形式来产生一个32 位结果`DX:AX`（并忽略该结果的高 16 位，放入`DX`），例如：

```
MUL dx 
```

但这将需要对您的寄存器进行改组，因为您当前已经在使用`DL`来保存当前数字，并且正如我所说，`DX`将设置为 32 位结果的高 16 位。在这种情况下，最好使用带`IMUL`符号的乘法指令，这很方便，因为它最多可以使用 3 个参数（在 x86 中不常见）：

```
MOV dx,0Ah;
IMUL ax,ax,0Ah 
```

这将设置`AX`为结果的底部 16 位并丢弃顶部 16 位。乘法是有符号的这一事实在这里没有任何区别，因为在这两种情况下，底部的 16 位都是相同的。

# regex - 如何使用 grep 匹配空格或换行符

> ID：13220192
> 
> 赞同：19
> 
> 时间：2012-11-04T15:58:57.483
> 
> 标签：regex, shell, grep

我想用一个单词 grep 一个文件，比如“AAA”，它以空格或换行符结尾。我知道如何单独编写它，如下所示，但是在组合它们时遇到问题（从某种意义上说，它同时输出`VVV AAA`和`AAA VVV`）。

```
$echo -e "AAA VVV \nVVV AAA\nBBB" | grep "AAA$" 
>VVV AAA
$echo -e "AAA VVV \nVVV AAA\nBBB" | grep "AAA[[:space:]]" 
>AAA VVV 
```

我试过使用`[]`，但没有成功..

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-04T16:00:40.430

如果您要`AAA`在字符串中的任何位置或行尾查找单词后跟空格，请使用

```
grep -P "AAA( |$)" 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-04T20:46:48.567

您可以使用`-e`grep 的选项来选择多种模式：

```
grep -e "AAA$" -e "AAA[[:space:]]" 
```

来自 grep 人：

```
-e PATTERN, --regexp=PATTERN
      Use  PATTERN  as  the  pattern.   This  can  be  used to specify
      multiple search patterns, or to protect a pattern beginning with
      a hyphen (-).  (-e is specified by POSIX.) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-04T16:05:30.647

如果`"AAA\b"`也可以匹配 AAA 后跟任何其他非字母数字字符，则使用此选项。根据[grep man pages](http://unixhelp.ed.ac.uk/CGI/man-cgi?grep)，`\b`匹配单词边缘的空字符串。

```
$ echo -e "AAA VVV \nVVV AAA\nBBB" | grep "AAA\b"
AAA VVV
VVV AAA 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-19T19:42:39.727

我认为我们也可以将默认 grep 与 OR(\|) 一起使用

```
echo -e "AAA VVV \nVVV AAA\nBBB" | grep "AAA$\|AAA " 
```

# emacs - 基于环境变量值的elisp代码的条件执行

> ID：13220194
> 
> 赞同：4
> 
> 时间：2012-11-04T15:59:06.403
> 
> 标签：emacs, terminal, elisp

在我的`.emacs`配置文件中，我有以下条目：

```
(custom-set-variables
  (custom-set-faces
    '(font-lock-comment-face ((((class color)
                                (min-colors 8)
                                (background dark))
                                (:foreground "red")))))) 
```

`TERM`这会在环境变量设置为时修复字体颜色，但在设置为`screen`时会破坏它。有没有办法读取变量的值并仅在其值为时才执行该代码？我发现[这个问题](https://stackoverflow.com/questions/7549978/elisp-conditional-based-on-hostname)有点帮助，但我仍然不知道如何在 elisp 中读取环境变量的值。`TERM``xterm``TERM``TERM``screen`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-04T16:17:10.260

首先我会回答你问的问题，下面我会回答你真正应该问的问题；）

我得到你使用函数的环境变量的值`getenv`。例如：

```
(getenv "TERM")   ->  "xterm-color" 
```

但是，这是检查 Emacs 是否在终端中运行的一种相对笨拙的方法。相反，您可以使用以下内容：

```
(display-graphic-p &optional DISPLAY)

Return non-nil if DISPLAY is a graphic display.
Graphical displays are those which are capable of displaying several
frames and several different fonts at once.  This is true for displays
that use a window system such as X, and false for text-only terminals.
DISPLAY can be a display name, a frame, or nil (meaning the selected
frame's display). 
```

一个较旧的、已弃用的版本是检查变量`window-system`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-04T16:16:59.620

```
(when (string= (getenv "TERM") "screen")
    .... your code
) 
```

# php - Facebook - 如何区分我的选项卡应用程序中的页面管理员角色？

> ID：13220197
> 
> 赞同：0
> 
> 时间：2012-11-04T15:59:30.030
> 
> 标签：php, javascript, facebook

1.  我创建了一个 Facebook 应用程序，并将其安装在我的页面中。
2.  使用 signed_request 我可以查看特定用户是否是页面管理员。

问：如何获得管理员用户角色？

```
Manager
Content Creator
Moderator
Advertiser
Insights Analyst 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T16:46:51.387

你不能，只是他们有一个 - 如果你需要知道你需要他们使用`manage_pages` [权限](https://developers.facebook.com/docs/authentication/permissions/)授权你的应用程序的特定角色，然后你可以通过 Pages API 检查

# jquery - 带 jQuery 的异步 ajax 请求冻结 Chrome

> ID：13220200
> 
> 赞同：2
> 
> 时间：2012-11-04T15:59:47.360
> 
> 标签：jquery, ajax, google-chrome, request

所以我正在做一个非常基本的ajax请求，但我不能让它在chrome中成为非阻塞的。这个请求有什么问题吗？IE 处理得很好，但 chrome 完全冻结了几秒钟。chrome 停止冻结后会触发 timeout 事件。

```
 setTimeout(this.onExtendedSaveTimeCallback, 1000);

    this.isSaving = true;
    this.request = $.ajax({
        url:      'http://same-origin.com',
        type:     'POST',
        dataType: 'html',
        data:      data,
        async:     true,
    });

    this.request.done(function(response) {
        self.isSaving = false;
        self.$rootElement.find('.save').removeClass('saving');
        if(response != "SUCCESS")
        {
            // The input did not pass validation
            // Show the error message
            self.$rootElement.find('.edit-mode-content').prepend(response);
            self.$rootElement.find('.error').slideDown(200);
            self.$rootElement.find('.save').html('Spara');
            self.unblockRowInput();
        }
        else
            self.close(true);
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T16:59:39.143

我不认为它的ajax调用。在创建 ajax 数据参数时，我看到过类似的情况，浏览器阻塞，成本很高。根据您进行循环/dom 遍历的方式，跨浏览器的性能可能会有很大差异。要进行验证，请尝试提交 ajax 请求而不执行创建数据参数的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T17:01:36.443

后面加逗号`async: true,`……是故意的吗？

# python - 使用 __init__.py 导入库

> ID：13220202
> 
> 赞同：1
> 
> 时间：2012-11-04T16:00:02.053
> 
> 标签：python

当我使用 os.chdir() 从脚本获取包目录时，为什么我的命名空间导入不起作用？

例如这里是我的包结构来演示这个问题。

```
testpk/
testpk/bin
testpk/bin/runit.py
testpk/lib
testpk/lib/libcode.py
testpk/lib/__init__.py 
```

这是我的 lib 代码，它只打印我已导入

```
print "I've been imported" 
```

runit.py 的内容

```
#!/usr/bin/python
import  sys, os

if __name__ == "__main__":
    os.chdir('/home/moorepe/src/testpk')   
    print "working path = " , os.getcwd()
    import lib.libcode 
```

如果我运行 runit，我会收到此错误：

```
moorepe@halifax$ bin/runit.py 
Traceback (most recent call last):
  File "bin/runit.py", line 6, in <module>
    import lib.libcode 
ImportError: No module named lib.libcode 
```

然而，使用 python 命令行测试它可以按预期工作：

```
 cd testpk
    python -c "import lib.libcode
    I've been imported 
```

这适用于 bin 目录：

```
cd testpk/bin
python -c "import os; os.chdir('/home/moorepe/src/testpk') ; import lib.libcode"
I've been imported 
```

谁能解释出了什么问题？

所以这不起作用的原因是python使用当前目录作为除了PYTHONPATH之外的路径。

所以这段代码通过添加 sys.path.append(".") 来工作，因为我强制当前工作目录作为路径添加。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T17:24:14.820

如果将`'.'`当前目录的 a 添加到`sys.path`搜索文件夹列表中，则将`os.chdir()`生效并且`import lib.libcode`应该开始工作：

文件**`runit.py`**：

```
#!/usr/bin/python
import  sys, os

if __name__ == "__main__":
    sys.path[0:0] = ['.']  # prefix current directory to list
    os.chdir('/home/moorepe/src/testpk')
    print "working path =", os.getcwd()
    import lib.libcode 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-24T18:39:52.617

这是我发现的另一种解决方案：

```
import sys
import os.path
sys.path.insert(1, os.path.join(os.path.dirname(os.path.realpath(__file__)), 'lib') )

#from pprint import pprint as pp
#pp(sys.path)
import libcode 
```

这样，它看起来不像您的顶级库名称是`lib`，而是`libcode`.

## “官方”（*Pythonic*）方式

如果您正在创建一个 python 模块，您可能需要查看[官方文档](https://docs.python.org/2/tutorial/modules.html)。他们建议使用`__init__.py`与模块的 [组织结构](http://docs.python-guide.org/en/latest/writing/structure/)相匹配的目录结构（这似乎是*“Pythonic”*的做事方式）。尽管任何传统*的 Ruby-ish*或*Java-ish* `lib`目录结构都是可行的，只要您了解模块加载路径并适当设置它以使您的模块可加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T16:14:20.657

您应该确保 testpk/lib/ 在您的`PYTHONPATH`.

```
sys.path.append('/path/to/testpk/lib/') 
```

是确保您的包裹在您的`PYTHONPATH`.

这样做的“正确方法”是将您的`testpk`包及其所有子目录放在您的 Python`site-packages`目录中。

找出你的`site-packages`（应该在你的`PYTHONPATH`）在哪里。

```
GET_PYTHON_LIB_CMD="from distutils.sysconfig import get_python_lib; print (get_python_lib())"
python -c "$GET_PYTHON_LIB_CMD" 
```

会给你位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T16:42:36.577

从给定的脚本中，如果您想将库添加到相对于脚本本身的 sys.path 中，您可以添加库的位置，从脚本所在的位置计算其位置，如下所示：

```
#!/usr/bin/env python
# testpk/bin/runit.py
import os
import sys
_op = os.path
# if file is referred to by symlink, make __file__ point to it's actual location
__file__ = _op.realpath(__file__)
# add __file__'s directory's parent directory to the path
sys.path.append(_op.abspath(_op.join(_op.dirname(__file__), "..")))
import lib

def main():
    pass

if __name__ == "__main__":
    main() 
```

然后你可以从任何地方调用你的可执行文件：

```
% pwd
/tmp
% ./testpk/bin/runit.py 
I've been imported 
```

由于我在重新分配 时考虑了通过符号链接运行脚本`__file__`，所以我什至会这样做：

```
% pwd
/tmp
% ln -s ./testpk/bin/runit.py 
% ./runit.py 
I've been imported 
```

# c++ - 什么更快？两个整数或 __int64？

> ID：13220205
> 
> 赞同：-1
> 
> 时间：2012-11-04T16:00:27.317
> 
> 标签：c++, performance

什么更快：（性能）

```
__int64 x,y;
x=y; 
```

或者

```
int x,y,a,b;
x=a;
y=b; 
```

?

或者他们是平等的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T16:12:44.437

[`__int64`是一个非标准的编译器扩展](http://msdn.microsoft.com/en-us/library/29dh1w7z%28v=vs.80%29.aspx)，所以虽然它可能更快也可能不会更快，但如果你想要跨平台代码，你不想使用它。相反，您[应该考虑使用`#include <cstdint>`](https://stackoverflow.com/questions/6144682/should-i-use-cstdint)和使用`uint64_t`等。这些源自提供`stdint.h`和`inttypes.h`用于固定宽度整数运算的 C99 标准。

就性能而言，它取决于您所在的系统 -`x86_64`例如，在添加 32 位和 64 位整数时不应看到任何性能差异，因为该`add`指令可以处理 32 位或 64 位寄存器。

但是，如果您在 32 位平台上运行代码或为 32 位架构编译，则添加 64 位整数实际上需要添加两个 32 位寄存器，而不是一个。因此，如果您不需要额外的空间，分配它会很浪费。

我不知道编译器是否可以或确实在必要时将类型优化到更小的大小。我不希望，但我不是编译器工程师。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-04T16:13:43.767

我讨厌这类问题。

1）如果您不知道如何为自己衡量，那么您几乎可以肯定不需要知道答案。

2）在现代处理器上，很难预测基于单个指令的速度有多快，了解程序的缓存使用情况和整体性能比担心优化使用赋值的愚蠢的小代码片段更重要。让编译器担心这一点，并花时间改进所使用的算法或其他会产生更大影响的事情。

简而言之，您可能无法分辨，也可能无关紧要。这是一个愚蠢的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T17:40:50.673

编译器的优化器将删除您示例中的所有代码，因此没有区别。我想您想知道一次移动 32 位数据还是一次移动 64 位数据是否更快。如果您的数据对齐到 8 个字节并且您在 64 位机器上，那么一次移动 8 个字节的数据应该会更快。然而，有几个警告。您可能会发现您的编译器已经在为您进行此优化（您必须查看发出的汇编代码才能确定），在这种情况下您不会看到任何区别。此外，如果您要移动大量数据，请考虑使用 memcpy 而不是自己滚动。如果您正在考虑将 32 位整数数组转换为 64 位，以便更快地复制或执行一些其他操作（即指令数量的一半），请务必使用 Google[严格的别名规则](https://stackoverflow.com/questions/98650/what-is-the-strict-aliasing-rule)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T16:05:26.430

__int64 在大多数平台上应该更快，但要小心 - 有些架构需要对齐到 8 才能生效，如果不对齐，有些架构甚至会导致您的应用程序崩溃。

# visual-studio-2010 - 如何从“Form.h”外部更改文本标签？

> ID：13220210
> 
> 赞同：3
> 
> 时间：2012-11-04T16:01:06.280
> 
> 标签：visual-studio-2010, c++-cli

我是 C++-CLI 初学者，我必须熟悉一些简单的东西。我制作了一个带有 1 个标签和 1 个按钮的表单。我想通过单击按钮并通过另一个 cpp 类（changetext.cpp）中的 void 调用一些文本来更改标签的文本

结构：

**Form1.h //只是一个常规的表单代码，最后有 1 个标签和 1 个按钮处理程序**

```
#pragma once

namespace ms {

using namespace System;
using namespace System::ComponentModel;
using namespace System::Collections;
using namespace System::Windows::Forms;
using namespace System::Data;
using namespace System::Drawing;

/// <summary>
/// Summary for Form1
/// </summary>
public ref class Form1 : public System::Windows::Forms::Form
{
public:
    Form1(void)
    {
        InitializeComponent();
        //
        //TODO: Add the constructor code here
        //
    }

public:
    /// <summary>
    /// Clean up any resources being used.
    /// </summary>
    ~Form1()
    {
        if (components)
        {
            delete components;
        }
    }
public: System::Windows::Forms::Label^  label1;
private: System::Windows::Forms::Button^  button1;
public: 
public: 

public:
    /// <summary>
    /// Required designer variable.
    /// </summary>
    System::ComponentModel::Container ^components;

    #pragma region Windows Form Designer generated code
    /// <summary>
    /// Required method for Designer support - do not modify
    /// the contents of this method with the code editor.
    /// </summary>
    void InitializeComponent(void)
    {
        this->label1 = (gcnew System::Windows::Forms::Label());
        this->button1 = (gcnew System::Windows::Forms::Button());
        this->SuspendLayout();
        // 
        // label1
        // 
        this->label1->AutoSize = true;
        this->label1->Location = System::Drawing::Point(313, 140);
        this->label1->Name = L"label1";
        this->label1->Size = System::Drawing::Size(35, 13);
        this->label1->TabIndex = 0;
        this->label1->Text = L"label1";
        // 
        // button1
        // 
        this->button1->Location = System::Drawing::Point(101, 117);
        this->button1->Name = L"button1";
        this->button1->Size = System::Drawing::Size(100, 58);
        this->button1->TabIndex = 1;
        this->button1->Text = L"button1";
        this->button1->UseVisualStyleBackColor = true;
        this->button1->Click += gcnew System::EventHandler(this,               &Form1::button1_Click);
        // 
        // Form1
        // 
        this->AutoScaleDimensions = System::Drawing::SizeF(6, 13);
        this->AutoScaleMode = System::Windows::Forms::AutoScaleMode::Font;
        this->ClientSize = System::Drawing::Size(467, 262);
        this->Controls->Add(this->button1);
        this->Controls->Add(this->label1);
        this->Name = L"Form1";
        this->Text = L"Form1";
        this->Load += gcnew System::EventHandler(this, &Form1::Form1_Load);
        this->ResumeLayout(false);
        this->PerformLayout();

    }
    #pragma endregion
public: System::Void Form1_Load(System::Object^  sender, System::EventArgs^  e) {

         }
private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) {

             changetext my = new changetext();
             my.changeText();

         }
};
    } 
```

**ms.cpp (main) //只创建表单**

```
// ms.cpp : main project file.

#include "stdafx.h"
#include "Form1.h"

using namespace ms;

[STAThreadAttribute]
int main(array<System::String ^> ^args)
{
// Enabling Windows XP visual effects before any controls are created
Application::EnableVisualStyles();
Application::SetCompatibleTextRenderingDefault(false); 

// Create the main window and run it
Application::Run(gcnew Form1());
return 0;
} 
```

**更改文本.cpp**

```
#include "stdafx.h"
#include "Form1.h"

int number;

void changeText()
{
number = 5;
Form1.label1->Text=number;

} 
```

我在某处犯了一个小错误，我想这与头文件有关，我习惯于在 java 中编码，所以头文件还不是我的一杯茶。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T22:08:14.480

这是要做的：

在 changetext.cpp 中创建 getter

```
#include "stdafx.h"
#include "Form1.h"

int number = 5;

void getNumber()
{
return number;
} 
```

创建 header.h

```
#pragma once
void getNumber(); 
```

包含 header.h 并编辑 Form1.h

```
 #pragma once
#include header.h

namespace ms {

using namespace System;
using namespace System::ComponentModel;
using namespace System::Collections;
using namespace System::Windows::Forms;
using namespace System::Data;
using namespace System::Drawing;

/// <summary>
/// Summary for Form1
/// </summary>
public ref class Form1 : public System::Windows::Forms::Form
{
public:
    Form1(void)
    {
        InitializeComponent();
        //
        //TODO: Add the constructor code here
        //
    }

public:
    /// <summary>
    /// Clean up any resources being used.
    /// </summary>
    ~Form1()
    {
        if (components)
        {
            delete components;
        }
    }
public: System::Windows::Forms::Label^  label1;
private: System::Windows::Forms::Button^  button1;
public: 
public: 

public:
    /// <summary>
    /// Required designer variable.
    /// </summary>
    System::ComponentModel::Container ^components;

    #pragma region Windows Form Designer generated code
    /// <summary>
    /// Required method for Designer support - do not modify
    /// the contents of this method with the code editor.
    /// </summary>
    void InitializeComponent(void)
    {
        this->label1 = (gcnew System::Windows::Forms::Label());
        this->button1 = (gcnew System::Windows::Forms::Button());
        this->SuspendLayout();
        // 
        // label1
        // 
        this->label1->AutoSize = true;
        this->label1->Location = System::Drawing::Point(313, 140);
        this->label1->Name = L"label1";
        this->label1->Size = System::Drawing::Size(35, 13);
        this->label1->TabIndex = 0;
        this->label1->Text = L"label1";
        // 
        // button1
        // 
        this->button1->Location = System::Drawing::Point(101, 117);
        this->button1->Name = L"button1";
        this->button1->Size = System::Drawing::Size(100, 58);
        this->button1->TabIndex = 1;
        this->button1->Text = L"button1";
        this->button1->UseVisualStyleBackColor = true;
        this->button1->Click += gcnew System::EventHandler(this,&Form1::button1_Click); 
        // 
        // Form1
        // 
        this->AutoScaleDimensions = System::Drawing::SizeF(6, 13);
        this->AutoScaleMode = System::Windows::Forms::AutoScaleMode::Font;
        this->ClientSize = System::Drawing::Size(467, 262);
        this->Controls->Add(this->button1);
        this->Controls->Add(this->label1);
        this->Name = L"Form1";
        this->Text = L"Form1";
        this->Load += gcnew System::EventHandler(this, &Form1::Form1_Load);
        this->ResumeLayout(false);
        this->PerformLayout();

    }
#pragma endregion
public: System::Void Form1_Load(System::Object^  sender, System::EventArgs^  e) {

         }
private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) {

label1->Text=""+getNumber();

}
};
} 
```

# jquery - 如何使选定的文件名可见？

> ID：13220211
> 
> 赞同：0
> 
> 时间：2012-11-04T16:01:23.137
> 
> 标签：jquery, css, button, input, field

我需要一点帮助来完成我的自定义文件输入代码。所选文件名不可见。如何解决这个问题？这就是我想出的：

我的 CSS 代码：

**CSS**

```
div.upField {
    position: relative;
}

div.fakefile {
    position: absolute;
    top: 0px;
    left: 0px;
    z-index: 1;
}

.upField input,.fakefile input {
    border:1px solid #0E0E0E;
    color:#FEFEFE;
    font-family:Arial,Helvetica,sans-serif;
    font-size:22px;
    background:#2E2E2E;
    outline:none; /* Preventing the default Safari and Chrome text box highlight */
    /* CSS3 box shadow, used as an inner glow */
    -moz-box-shadow:0 0 20px #292929 inset;
    -webkit-box-shadow:0 0 20px #292929 inset;
    box-shadow:0 0 20px #292929 inset;
    -moz-border-radius:12px;
    -webkit-border-radius:12px;
    border-radius:12px;
}

.fakefile input {
    margin: -3px 0px;
}

input {
    width: 650px;
}

input.upFile {
    position: relative;
    text-align: right;
    -moz-opacity:0 ;
    filter:alpha(opacity: 0);
    opacity: 0;
    z-index: 2;
}

.button {
    -moz-box-shadow:inset 0px 1px 0px 0px #fff6af;
    -webkit-box-shadow:inset 0px 1px 0px 0px #fff6af;
    box-shadow:inset 0px 1px 0px 0px #fff6af;
    background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #ffec64), color-stop(1, #ffab23) );
    background:-moz-linear-gradient( center top, #ffec64 5%, #ffab23 100% );
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffec64', endColorstr='#ffab23');
    background-color:#ffec64;
    -moz-border-radius:12px;
    -webkit-border-radius:12px;
    border-radius:12px;
    border:1px solid #0E0E0E;
    display:inline-block;
    color:#333333;
    font-family:arial;
    font-size:22px;
    font-weight:bold;
    padding: 1px 6px 0px 6px;
    margin-left: -78px;
    text-decoration:none;
    text-shadow:1px 1px 0px #ffee66;
}

.button:hover {
    background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #ffab23), color-stop(1, #ffec64) );
    background:-moz-linear-gradient( center top, #ffab23 5%, #ffec64 100% );
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffab23', endColorstr='#ffec64');
    background-color:#ffab23;
}

.button:active {
    position:relative;
    top:1px;
} 
```

我的标头javascript代码：

**HTML（头部）**

```
document.create = document.createElement && function(s){
    var div;
    switch(s.charAt(0)){
        case    "#":
            div = document.createTextNode(s.substring(1));
            break;
        case    "<":
            div = document.createElement("div");
            div.innerHTML = s;
            div = div.removeChild(div.firstChild);
            break;
        default:
            div = document.createElement(s);
            for(var i = 1; i < arguments.length; i++)
                div.appendChild(document.create(arguments[i]));
            break;
    };
    return  div;
}; 
```

我的身体javascript代码：

**HTML（正文）**

```
if(document.create)
    onload = function(){
        document.body.appendChild(
            document.create("<div class='upField'><input type='file' class='upFile hidden' name='upFile' onkeypress='return handleKey(event)'><div class='fakefile'><input><a class='button'>Select</a></div></div>")
        );
    }; 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T21:52:42.890

将此为您的 javascript 添加到您的小提琴中

```
$(function() {
    $('input[name="upFile"]').change(function(e) { 
        $(".fakefile input").val($(this).val()); 
    });
}) 
```

但是，如果您希望它更具动态性，则可以一遍又一遍地重用该 html：

```
$(function() {
    $(".upField").each(function(e) {
        $(this).children('input[name="upFile"]').on("change", function(e) {
            var parent = $(this).parent(".upField");
            $(this).next("div").children("input").val($(this).val());
        })
            .next("div").children("input").val("Click/Push to Select");
    });
}); 
```

# iphone - 设计时特定于 iphone 4 的故事板

> ID：13220212
> 
> 赞同：0
> 
> 时间：2012-11-04T16:01:25.640
> 
> 标签：iphone, ios, xcode, storyboard

因此，我已经在故事板中设计了我的应用程序几个小时，并在测试时意识到故事板窗口的大小适用于 iphone 5。如何才能使它们只有 iphone 4 视图？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T16:03:40.960

如果情节提要看起来像一个长屏幕，底部会有一个图标。单击它，它会切换高度

# php - 数组节点可以有id吗？

> ID：13220215
> 
> 赞同：0
> 
> 时间：2012-11-04T16:01:44.497
> 
> 标签：php, arrays

我有一个包含 6 个类别的 XML 文件。我需要帮助将 XML 节点解析为 PHP，并为每个节点提供一个 id。

---目录.xml---

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<Catalog>
<Category><Name>CAT1</Name></Category>
<Category><Name>CAT2</Name></Category>
<Category><Name>CAT3</Name></Category>
<Category><Name>CAT4</Name></Category>
<Category><Name>CAT5</Name></Category>
<Category><Name>CAT6</Name></Category>
</Catalog> 
```

---目录.xml---

基于数组的第一个节点将是 id [0] 和随后的 [1]、[2]、[3]、[4]、[5]

当我浏览它应该仍然是 CAT1、CAT2、CAT3 ......但它们的 id 已经在编码中创建。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T07:19:42.530

没必要伪造它。只做艰难的路。

* * *

```
<?php
$catalog = simplexml_load_file("catalog.xml");

foreach ( $catalog->Category as $category )
{
echo '<table><tbody>';

foreach ( $category->Name as $name )
{
echo '<tr>';

$menu = (string)$name;
$arr0 = "arr0.php";
$arr1 = "arr1.php";
$arr2 = "arr2.php";
$arr3 = "arr3.php";
$arr4 = "arr4.php";
$arr5 = "arr5.php";

if ( $menu == "CAT1" )
{
echo '<td background="button.png" width="200" height="60">';
echo '<p align=center styles="vertical-align:middle">'."<a href=\"$arr0\"><font color=#FFFFFF><strong>$menu</strong></font></a>";
echo '</td>';
}
else if ( $menu == "CAT2" )
{
  echo '<td background="button.png" width="200" height="60">';
  echo '<p align=center styles="vertical-align:middle">'."<a href=\"$arr1\"><font color=#FFFFFF><strong>$menu</strong></font></a>";
  echo '</td>';
}
else if ( $menu == "CAT3" )
{
  echo '<td background="button.png" width="200" height="60">';
  echo '<p align=center styles="vertical-align:middle">'."<a href=\"$arr2\"><font color=#FFFFFF><strong>$menu</strong></font></a>";
  echo '</td>';
}
else if ( $menu == "CAT4" )
{
  echo '<td background="button.png" width="200" height="60">';
  echo '<p align=center styles="vertical-align:middle">'."<a href=\"$arr3\"><font color=#FFFFFF><strong>$menu</strong></font></a>";
  echo '</td>';
}
else if ( $menu == "CAT5" )
{
  echo '<td background="button.png" width="200" height="60">';
  echo '<p align=center styles="vertical-align:middle">'."<a href=\"$arr4\"><font color=#FFFFFF><strong>$menu</strong></font></a>";
  echo '</td>';
}
else if ( $menu == "CAT6" )
{
  echo '<td background="button.png" width="200" height="60">';
  echo '<p align=center styles="vertical-align:middle">'."<a href=\"$arr5\"><font color=#FFFFFF><strong>$menu</strong></font></a>";
  echo '</td>';
}
echo '</tr>';
}
 echo '</table>';

}
?> 
```

# c - 如何使用 gdb 在 for 循环中获取特定的计数器值？

> ID：13220216
> 
> 赞同：1
> 
> 时间：2012-11-04T16:01:48.490
> 
> 标签：c, gdb

我有一个大约 100 个奇数值的 for 循环。我想要一个断点，我可以在其中为迭代器变量设置一些值，然后直接进入该程序执行状态。

例如

```
for(int i=0;i<500;i++)
{ 
  doSomething();
} 
```

在这里，我想设置一个断点`i=100;`并一次性遍历从 0 到 99 的所有值。这可能`gdb`吗？我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-04T16:14:57.273

您可以在`gdb`断点上设置条件。

```
break line if i == 100 
```

其中“line”是适当的行号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T16:07:39.530

可能有更好的方法，但我从做这样的事情中获得了很多里程：

```
if (i == 100) {
    int breakpoint = 10;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T16:18:17.343

条件断点是仅在某个条件为真时才将控制权转移到 gdb 的断点。

当您在循环 10 次迭代后只想要 gdb 控制时，这可能很有用。

要`condition`在断点上设置 a，请使用`condition`带有断点编号的命令，后跟触发断点的条件。

这是一个设置条件断点的示例，该断点仅
在“条件 (i >= 10) 为真”时触发：

```
(gdb) break 28                                  # set breakpoint at line 28
(gdb) info break                                # list breakpoint information
  Num Type           Disp Enb Address    What
   1   breakpoint     keep y   0x080588a3 in loopit at loops.c:28

(gdb) condition 1 (i >= 10)                # set condition on breakpoint 1
(gdb) run   (or write `continue` if already running) 
```

# c - 关于 C 和 eclipse - scanf

> ID：13220217
> 
> 赞同：0
> 
> 时间：2012-11-04T16:01:51.780
> 
> 标签：c, eclipse, scanf

当我尝试使用`scanf`

```
int main() {

    int x1,x2,x3,y1,y2,y3;

    printf("Enter 3 pairs of positive integers separated by spaces:\n");

    scanf("%u %u %u %u %u %u", &x1, &y1, &x2, &y2, &x3, &y3); 
```

我让程序运行，就像输入一样。然后我输入了输入，但它打印了“输入 3 对......”并且什么也不做

这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T16:05:03.653

也许您必须输入值；这是 的目标`scanf`。

顺便说一句，您的程序包含未定义的行为：与指针`%u`不匹配。`int`在. `%d`_ `%i`_ `printf`另一种解决方案是将变量声明为`unsigned int`类型，以匹配`printf`格式。此外，您的源代码的一部分丢失了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T16:06:26.767

`%u`是无符号整数。`%d`或者`%i`是有符号整数。请注意这些`quirks`和`gotchas`C 中的内容。请注意纠正格式说明符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T16:10:55.097

您可能会发现使用它`fgets`而不是`scanf`. eclipse 终端有点时髦。

参考这篇[文章](https://stackoverflow.com/questions/1897227/problem-with-scanf-in-eclipse-minigw)

# ruby-on-rails-3 - 回形针通过设计处理sign_out

> ID：13220218
> 
> 赞同：1
> 
> 时间：2012-11-04T16:01:59.873
> 
> 标签：ruby-on-rails-3, devise, paperclip

我最近添加了回形针来为用户添加头像。

当用户注销（使用设计）时，我在日志中看到了这一点

```
Started DELETE "/signout" for 127.0.0.1 at 2012-11-04 17:23:15 +0200
Processing by Devise::SessionsController#destroy as HTML   Parameters:
{"authenticity_token"=>"rHNBynyk546DcWTpGuARt2bdbSTtKPbw2ls+nDaihO8="}
User Load (1.0ms)  SELECT "users".* FROM "users" WHERE "users"."id" =
18 LIMIT 1    (0.0ms)  BEGIN [paperclip] Saving attachments.   
(0.0ms)  COMMIT Redirected to http://localhost:3000/ 
```

我的回形针真的很基础..

这在 user.rb

```
has_attached_file :avatar,
    :storage => :s3,
    :bucket => ENV['BUCKET'],
    :s3_credentials => {
      :access_key_id => ENV['ACCESS_KEY'],
      :secret_access_key => ENV['SECRET_KEY']
    } 
```

在用户/_form.html.erb 上

```
<%= f.file_field :avatar %> 
```

在 users/show.html.erb 上

```
<%= image_tag @user.avatar.url %> 
```

回形针在那里做什么？有没有办法调试这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:13:23.850

看到这个答案：[https ://stackoverflow.com/a/4462445/432977](https://stackoverflow.com/a/4462445/432977)

基本上，每次更新模型时，回形针都会在每个附件上调用“保存”方法。但是，如果没有文件排队等待删除或写入，则不会发生任何事情。

# tfs - 在 tfsbuild 期间增加 versioninfo 中的版本号

> ID：13220219
> 
> 赞同：3
> 
> 时间：2012-11-04T16:02:01.403
> 
> 标签：tfs, visual-studio-2012, tfsbuild, tfs-alerts

我目前正在[TFS Build 2010 中配置我的](http://en.wikipedia.org/wiki/Team_Foundation_Server)[.NET](http://en.wikipedia.org/wiki/.NET_Framework) 4.5 解决方案。我正在使用 Visual Studio。

我有一个 versioninfo.cs 文件作为我的解决方案的一部分。如何设置它以在构建过程中增加其中的版本号？为此，我需要对构建定义进行哪些更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T04:42:08.110

您的实现中的 versioninfo.cs 是什么？

我通常进行自动版本控制的方式是使用社区 TFS 构建扩展 TfsVersion 活动：[http ://tfsbuildextensions.codeplex.com/wikipage?title=How%20to%20integrate%20the%20TfsVersion%20build%20activity&referringTitle=Documentation](http://tfsbuildextensions.codeplex.com/wikipage?title=How%20to%20integrate%20the%20TfsVersion%20build%20activity&referringTitle=Documentation)

我通常使用以下格式：Major.Minor.YYMM.DDRR，其中 Major/Minor 作为参数通过 Build 定义传递并手动递增。YY/MM/DD/RR 是年-月-日-修订，它允许我知道哪个特定的构建/源用于创建一个组件，因为它的版本#。

如果您有多个分支/构建，您想仅根据程序集版本进行区分，您可能需要稍微调整版本编号方案以包含某种分支标识符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T19:16:14.123

尝试[对 Stack Overflow 问题*Working automatic build increment Visual Studio addin*](https://stackoverflow.com/a/15733269/505539)的回答。

[这是一个名为ProjectBuildCounter](http://build.codeplex.com)的免费独立独立工具，我希望它是您正在寻找的。

# javascript - 如何从输入框中回显值（ ) 到输入框 ()

> ID：13220223
> 
> 赞同：2
> 
> 时间：2012-11-04T16:03:31.820
> 
> 标签：javascript, input, echo

如何将输入框 ( ) 中的值回显`form name="form1"`到输入框 ( `form name="form2"`)

我想出了如何在第一种形式中回显输入..以及在 div 中..但我不知道如何将输入从第一种形式的输入框 ( `form1`).. 传递到输入框中在第二种形式 ( `form2`) 中。

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script type="text/javascript">
function FillBilling(f) {
    f.billingname.value = f.shippingname.value;
    f.billingcity.value = f.shippingcity.value;
}
function changeRadius1(){
    var name_input = document.getElementById('name_input').value;
    document.getElementById('radius1').innerHTML = name_input;
}
function changeRadius2(){
    var city_input = document.getElementById('city_input').value;
    document.getElementById('radius2').innerHTML = city_input;
}
</script> 

</head>
<body>
<b>Mailing Address FORM1</b><br><br>
<form name="form1">
Name:<input type="text" name="shippingname" onkeyup="FillBilling(form1); changeRadius1()">
<br>City:<input type="text" name="shippingcity" onkeyup="FillBilling(form1); changeRadius2()">
<br><br>
Name:<input type="text" id="name_input" class="name_input" name="billingname" onkeyup="FillBilling(form2)"><br>
City:<input type="text" id="city_input" class="city_input" name="billingcity" onkeyup="FillBilling(form2)">
</form>
<br>
<P>
<b>Billing Address FORM2</b><br><br>
<form name="form2">
Name:<input type="text" id="name_input" class="name_input" name="billingname"><br>
City:<input type="text" id="city_input" class="city_input" name="billingcity">
</form>

<br><b>Billing Address TEXT</b><br><br>
<div class="yourcode">Name: <span id="radius1"></span></div>
<div class="yourcode">City: <span id="radius2"></span></div>

</body>
</html> 
```

我希望这不是一个愚蠢的问题.. 答案应该很明显.. 但我在 JS 的开头.. 所以谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T16:29:29.490

I'm not entirely sure what you're trying to accomplish, but I think I can help you:

When you make the function calls in your 2nd set of fields in form1, FillBilling(form2), you are calling your FillBilling function with "f" being a reference to form2\. form2 does not have inputs with the names "shippingname" and "shippingcity". These are returning undefined.

You need to rewrite your function so that it is accessing the forms you want to modify more specifically.

You should also try not to reuse HTML names and IDs for the sake of the HTML's validity and clarity when you're programming. These things happen as a result.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T20:11:58.520

这是一个将字段值从一个表单复制到另一个表单的示例函数。`text`如果两者都是类型输入并且具有相同的输入名称，它只会复制字段。

```
function copyForm(srcForm, destForm) {
  var srcFields = srcForm.elements, destFields = destForm.elements, i, j;
  for (i = 0; i < srcFields.length; i++) {
    var srcField = srcFields[i];
    if (srcField.type && (srcField.type.toLowerCase() === 'text')) {
      for (j = 0; j < destFields.length; i++) {
        var destField = destFields[j];
        if (destField.type && (destField.type.toLowerCase() === 'text') && (destField.name === srcField.name)) {
          destField.value = srcField.value;
          break;
        }
      }
    }
  }
} 
```

这是一个基于提供的 HTML 代码复制`form1`到的示例用法。`form2`它会将`billingname`和的`billingcity`字段复制`form1`到 上的字段`form2`。和of不会被复制，`shippingname`因为.`shippingcity``form``form2`

```
var src, dest;
src = document.getElementsByName('form1');
if (src.length) {
  dest = document.getElementsByName('form2');
  if (dest.length) {
    copyForm(src, dest);
  }
} 
```

# ios - 如何在 iOS 应用程序中从 WordPress 获取帖子？

> ID：13220229
> 
> 赞同：0
> 
> 时间：2012-11-04T16:04:18.540
> 
> 标签：ios, wordpress, api

我想为 iOS 编写一个应用程序，它将从 WordPress 网站获取帖子。我应该在哪里使用 API 以及如何使用它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T16:16:03.443

您可以使用 Wordpress 内置的 RSS Feed。您可以在[此处](http://codex.wordpress.org/WordPress_Feeds)仔细查看文档。然后您可以使用[KissXML](https://github.com/robbiehanson/KissXML)或[任何其他 XML Parser](http://www.raywenderlich.com/553/how-to-chose-the-best-xml-parser-for-your-iphone-project)并将结果输入您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T02:25:54.977

正如 btype 所提到的，您可以使用内置的 RSS 提要。[WordPressSyncer](https://github.com/NextfazeSD/WordPressSyncer)是一个库，它将获取提要并将其保存到核心数据中。

另一种选择可能是使用[WPoniOS 之](https://github.com/vincentsaluzzo/WPoniOS---REST-API)类的 wordpress 插件，它为博客提供 REST API。

# assembly - 为什么 MASM 在装配时会崩溃？

> ID：13220230
> 
> 赞同：1
> 
> 时间：2012-11-04T16:04:21.687
> 
> 标签：assembly, compilation, linker, masm, ml

我正在做一个课堂项目，教授希望我们使用 MASM 而不是任何其他汇编程序。（我知道那很愚蠢，不要和我说话。）当我运行 ML.exe 来编译我的代码时，它崩溃了。不是我正在编写的程序，而是汇编程序本身。什么可能导致这种情况？它在运行之前已经运行了很长时间，所以它可能是某种无限循环。

这是我的代码：

```
.386
.MODEL FLAT

PUBLIC  compute_b_proc

points          EQU     [ebp + 16]
bs              EQU     [ebp + 12]
n               EQU     [ebp + 10]
m               EQU     [ebp + 8]

.CODE
compute_b_proc  PROC NEAR32

    push    ebpi
    mov     ebp, esp

    mov     ax, n
    cmp     ax, m
    je      base_case

    mov     ax, m
    inc     ax
    pushd   points
    push    n
    push    m
    call    compute_b_proc
    push    eax
    fld     DWORD PTR [esp + 8]
    pop     eax

    mov     ax, n
    dec     ax
    pushd   points
    push    n
    push    m
    call    compute_b_proc
    push    eax
    fld     DWORD PTR [esp + 4]
    pop     eax

    fsubp

    lea     eax, points
    mov     ebx, n
    shr     ebx, 3
    add     eax, ebx
    fild    REAL4 PTR [eax + 4]

    lea     eax, points
    mov     ebx, m
    shr     ebx, 3
    add     ebx, 4
    add     eax, ebx
    fild    REAL4 PTR [eax]

    fsubp
    fdivp
    pushd   0
    fstp    DWORD PTR [eax + 4]
    pop     eax

    mov     esp, ebp
    pop     ebp
    ret     12

    lea     eax, points
    mov     ebx, n
    shl     ebx, 3
    add     eax, ebx
    mov     eax, DWORD PTR[eax]

    mov     esp, ebp
    pop     ebp
    ret     12

compute_b_proc  ENDP
END 
```

MASM 可以很好地编译其他文件。错误消息只是“ML.exe 已停止工作”，仅此而已。我应该注意到我使用的是 MASM 6.11 版。这是教授提供的。

似乎是浮点指令使它崩溃。我重新安装了 MASM，但它仍然在所有浮点上崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T00:07:06.290

我想通了……有点。我的浮点指令不正确。fsubp 应该是 fsub，fmulp 应该是 fmul 等。为什么编译器会崩溃，我不知道，但更改解决了问题。

# c# - 水晶报表日期至今查询结果

> ID：13220231
> 
> 赞同：1
> 
> 时间：2012-11-04T16:04:55.033
> 
> 标签：c#, crystal-reports-2008

我在sql server中运行它时查询它给了我正确的结果，但是我输入我的代码结果改变了？

这是我的查询

```
String data = "SELECT [dat] ,[product_id] FROM [market].[dbo].[product] where dat>='2012-11-1' and dat='2012-11-1' 
```

这是我的代码

```
SqlConnection con=new SqlConnection (@"Data Source=.\Ahmed;Initial Catalog=Market;Integrated Security=True");
String data = "SELECT [dat] ,[product_id]FROM [market].[dbo].[product] where dat>='2012-11-1' and dat<='2012-11-31'";
con.Open();
SqlDataAdapter ad1 = new SqlDataAdapter(data, con);
DataSet ds1 = new DataSet();
ad1.Fill(ds1);
ReportDocument cr  = new ReportDocument();
cr.Load(@"C:\Users\Ahmed\Documents\VisualStudio2010\Projects\WindowsFormsApplication9\WindowsFormsApplication9\CrystalReport4.rpt");
cr.SetDataSource(ds1.Tables["product"]);
crystalReportViewer1.ReportSource = cr; 
```

结果在 sql server Product_id dat 101 2012-11-1 102 2012-11-1

在 C# 中是这样的：

product_id 日期 100 2012-10-10 101 2012-11-1 102

# ember.js - 检查 Ember.js：获取对象（类）的类型？

> ID：13220238
> 
> 赞同：37
> 
> 时间：2012-11-04T16:05:29.897
> 
> 标签：ember.js

我经常使用`console.log()`，尤其是与`Ember.inspect()`. 但我想念一件事：

如何找出对象（类）的类型？

例如：`<Sandbox.ApplicationController:ember288>`在检查时得到类似的东西`Ember.get("controller")`？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-11-15T17:02:12.653

如果您只想要型号名称（例如`app/models/comment.js`具有型号名称`comment`），您可以使用`thing.constructor.modelName`.

例如：

```
var aComment = this.get('store').createRecord('comment');
aComment.get('constructor.modelName') // => 'comment' 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-04-26T05:01:10.623

我了解您正在寻找用于调试目的的字符串，但我最初来到这个问题是想具体了解如何获取对象的类型，而不是描述对象的字符串。

使用内置的 Javascript 属性构造函数将产生用于构造实例的类。例如你可以这样做：

```
person = App.Person.create();
person.constructor // returns App.Person
person.constructor.toString() // return "App.Person" 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-11-04T17:23:07.390

如果你得到`Class`，你通常可以调用`toString()`（或作为快捷方式连接一个空字符串`+ ''`）来获得类似的东西`<Sandbox.ApplicationController:ember288>`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-22T11:15:13.467

另一个有用的功能（在 chrome 中）是`dir`命令。

```
dir(App.User) 
```

这将为您提供完整的对象信息，而不仅仅是名称。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-27T20:46:28.247

请注意，此处建议的其中一些答案仅适用于**开发**。一旦您的代码投入**生产**，这些方法/类名中的大部分都会被*缩小*。

```
import Model from '@ember-data/model';

export default class Animal extends Model {
  // ...
} 
```

所以在**开发**中：

```
const model = this.store.createRecord('animal');
model.constructor.name // returns Animal 
```

在**生产**中：

```
const model = this.store.createRecord('animal');
model.constructor.name // returns 'i' (or any other single letter). 
```

为避免这种情况，请使用`constructor.toString()`

```
const model = this.store.createRecord('animal');
model.constructor.toString() // returns 'model:animal' 
```

# css - CSS - 如何覆盖类的宽度大小

> ID：13220239
> 
> 赞同：0
> 
> 时间：2012-11-04T16:05:33.147
> 
> 标签：css

代码：

```
<div id="pagewrap">
   <div id="test">
      asdf asdf asdf
   </div>
</div> 
```

假设'pagewrap' id 的固定宽度为 980px css，但我希望`test`id 具有大于 980px 的屏幕全宽。通过使用CSS，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T16:12:41.797

你也可以给`#test`an`position:absolute`并制作它`width:100%`

做了一个小jsfiddle来演示：http: [//jsfiddle.net/MAAaD/](http://jsfiddle.net/MAAaD/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T16:12:01.200

用于`position: absolute;`使您的孩子 div 为 100%；

[**演示**](http://jsfiddle.net/3V3Z9/1/)

CSS

```
#pagewrap {
    width: 980px;
    background-color: #ff0000;
}

#test {
    width: 100%;
    background-color: #00ff00;
    position:absolute;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T16:13:12.837

有几个解决方案，从最好到最差列出。

1.  给它`position: absolute`和`width: 100%`。（很像亚历克斯先生在我之前说过的）。
2.  将其从其父 div 中拉出，然后使用`width: 100%`. （这可能会妨碍语义，但如果您想将其用作对话或其他内容，则效果很好）。
3.  使用 JavaScript。（仅当您有充分的理由不使用上述任何一个答案时）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-04T16:10:46.263

尝试这个：

```
#pagewrap #test {
   width: 1000px !important;
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-11-04T16:12:46.273

尝试使用 100% 的宽度。覆盖父标签的完整大小。

```
width:100% 
```

# wxpython - 如何使用 wxPython 演示

> ID：13220243
> 
> 赞同：2
> 
> 时间：2012-11-04T16:06:02.733
> 
> 标签：wxpython

我是 Python 的新手。最近在学习Python GUI，我从网站上下载了wxPython的demo，我可以在demo floder中很好地运行这些demo，但是当我将这个我想单独使用的demo复制到另一个floder时，它运行错误，只是dos一闪而过，那是什么问题呢？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T14:31:26.967

演示代码下面有一些包装材料，这使得自己运行演示有点棘手。幸运的是，让它工作并不需要太多。大多数时候，您只需要复制代码并删除日志信息。我在这里写了一个关于这个过程的wiki页面：[http ://wiki.wxpython.org/Using%20wxPython%20Demo%20Code](http://wiki.wxpython.org/Using%20wxPython%20Demo%20Code)

# php - 在 php 中的 for 循环中爆炸

> ID：13220246
> 
> 赞同：0
> 
> 时间：2012-11-04T16:06:35.487
> 
> 标签：php, explode

```
<?php
$list    = file_get_contents('sitelist.txt');
$explode = explode("http://", $list);
$i       = 1;
for ($i = 1; $i < count($explode); $i++) {
    $filename = 'tost.txt';
    $fp       = fopen($filename, "a+");
    $write    = fputs($fp, $explode[$i] . "\n");
    fclose($fp);
}
echo "ok";
?> 
```

它不是在 tost.txt 中写入或放入任何内容。这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T16:29:56.393

您向我们展示的代码没有任何问题。（好吧，除了跳过数组中的第一个条目之外，数组中可能不会有多个条目。）我已经在我的服务器上运行了您的代码，它确实输出到`tost.txt`.

因此，问题必须在于代码之外的因素，例如文件权限是否正确以及服务器上是否禁用文件访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T16:46:03.573

我发现您的代码存在一些问题

```
for ($i = 1; $i < count($explode); $i++) {
    $filename = 'tost.txt';     <-------------------+
    $fp       = fopen($filename, "a+");-------------| All this should not be 
    $write    = fputs($fp, $explode[$i] . "\n");<---| in a loop
    fclose($fp); <----------------------------------+
} 
```

您要做的就是与这两条线相同

```
$list = file_get_contents('sitelist.txt');
file_put_contents('tost.txt', implode("\n", explode("http://", $list))); 
```

观察

仍然不确定您为什么决定使用以下代码

```
 explode("http://", $list) 
```

这个会

*   忽略新行
*   返回无效的网址等

你需要添加你的`var_dump($list)`，`expected output`如果你真的有一个可行的解决方案

# ruby - 访问 div 元素数组中 div 元素的属性

> ID：13220248
> 
> 赞同：4
> 
> 时间：2012-11-04T16:06:42.153
> 
> 标签：ruby, web-scraping, watir

在这个问题的答案中[访问 li 元素数组中的 div 元素](https://stackoverflow.com/questions/10397787/accessing-a-div-element-in-an-array-of-li-elements?rq=1) ，当我在这里查看时[http://wiki.openqa.org/display/WTR/Collections+of+HTML+Elements](http://wiki.openqa.org/display/WTR/Collections+of+HTML+Elements)

我看不到或不明白我需要做什么

我想做的是用我的公会 player_name、player_id 和 player_lvl 制作一个电子表格。

这是有公会成员的页面。 [她的公会页面](http://game.ageofchampions.com/aoc/?cmd%5B0%5D=112&guild_id=138668) 是 html 的一些示例

```
<div class="guild_board">

<div class="item_box_guild" data-playerid="1256824509">
   <a onclick="doCmd(81,{'player_id':'1256824509'})"><div class="tile_50">
 <div class="avatar_container_50">
 <div class="avatar_image" style="background-image:url(//assets.ageofchampions.com/avatar/09/45/82/56/12/avatar_1351896996145.png);">
 </div>
</div>
 <div class="over">
   <img src="http://profile.ak.fbcdn.net/hprofile-ak-ash4/187582_1256824509_1172546357_q.jpg">
 </div>
<div class="lock"></div>
 </div>
</a>
 <div class="content">
  <div class="stat" style="width:225px;">
    <a onclick="doCmd(81,{'player_id':'1256824509'})">~|SR|~ Kariselle</a> |
        Level 348 <hr>
          Battle Score: 23,951,169 
```

此代码用于获取第一个成员，我可以执行 (=>index (2)) 来获取下一个成员，依此类推。目前我们只有 10 名成员，但它可能会变得更大。如果我不需要，我不想为每个成员写这个。

```
require 'rubygems'
require 'watir-webdriver'
require 'google_drive'
b = Watir::Browser.new
b.goto 'http://game.ageofchampions.com/aoc/?cmd%5B0%5D=112&guild_id=138668'
b.text_field(:id => 'email').set 'email'
b.text_field(:id => 'pass').set 'psswd'
b.button(:name => 'login').click
session = GoogleDrive.login('username', 'pass')
ws=session.spreadsheet_by_key('spreadsheethe').worksheets[0]
b.goto 'game.ageofchampions.com/aoc/?cmd%5B0%5D=112&guild_id=138668'
#b.divs(:class => 'item_box_guild').each do |div|
playerid_1 = b.div(:class => 'item_box_guild').attribute_value(:'data-playerid')
#playerid_1a = puts attribute_value(:'data-playerid')
#end
playername_1 = b.div(:class => 'item_box_guild').div(:class => 'stat').a.text
#playerlvl_1 = b.div(:class => 'item_box_guild').div(:class => 'stat').text
#layerlvl_1a = playerlvl_1\s+id="0"\s+value="(.+?)"
# Gets content of A2 cell.
p ws[2, 1]  #==> "hoge"

# Changes content of cells.
# Changes are not sent to the server until you call ws.save().
ws[1, 1] = "PLAYER ID"
ws[1, 2] = "CHAMPIONS NAME"
ws[1, 3] = "LEVEL"
ws[2, 1] = playerid_1
ws[2, 2] = playername_1
ws[2, 3] = "still working on lvl"
ws[3, 1] = "does this"
ws[3, 2] = "still"
ws[3, 3] = "work"

ws.save()

# Dumps all cells.
for row in 1..ws.num_rows
for col in 1..ws.num_cols
p ws[row, col]
end
end

# Yet another way to do so.
#p ws.rows  #==> [["fuga", ""], ["foo", "bar]]

# Reloads the worksheet to get changes by other clients.
ws.reload() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T17:56:39.040

当您这样做时，您希望获得玩家的集合：

```
b.divs(:class => 'item_box_guild') 
```

当您遍历每个：

```
b.divs(:class => 'item_box_guild').each do |div| 
```

该变量`div`将是集合中的一个 div。在迭代内部，您希望引用`div`而不是`b.div(:class => 'item_box_guild')`获取每个玩家。

尝试这样做：

```
b.divs(:class => 'item_box_guild').each do |plaher_div|
  playerid = player_div.attribute_value(:'data-playerid')
  puts playerid
  #=> This will be 'player1' during the first iteration, 'player2' during the second, etc.
end 
```

# cordova - phonegap / cordova 选择多张照片

> ID：13220251
> 
> 赞同：2
> 
> 时间：2012-11-04T16:07:07.517
> 
> 标签：cordova, phonegap-plugins

有谁知道是否可以使用 phonegap/cordova 从相册中选择多张照片？

使用文档创建一个选择一张照片的应用程序相当容易，但没有记录如何选择多张照片？？？

也许我需要一些插件（iOS/Android）？还是解决方法？这个问题对我来说真的是一个阻碍，所以一个体面的解决方案会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T17:43:12.423

目前该功能在核心 API 中不可用。然而，有一个增强请求打开。在这一点上，你最好的选择是编写一个插件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-25T14:40:36.540

对于多项选择，我使用了文件插件，它递归地遍历所有目录并找到图像。它忽略隐藏文件

```
var numDirs = 0;
var numFiles = 0;
var ImageFilePath = new Array();

function GetAllImageFromSD() {
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, onFileSystemSuccess, fail);

}

function onFileSystemSuccess(fileSystem) {
    fileSystem.root.getDirectory("/sdcard", { create: false, exclusive: false }, getDirSuccess, fail);
}

function getDirSuccess(dirEntry) {
    var directoryReader = dirEntry.createReader();

    // Get a list of all the entries in the directory
    directoryReader.readEntries(readerSuccess, fail);
}

var readerTimeout = null, millisecondsBetweenReadSuccess = 1000;

function readerSuccess(entries) {
    String.prototype.startsWith = function (str)
    { return (this.match("^" + str) == str) }

    var i = 0, len = entries.length;
    for (; i < len; i++) {
        if (entries[i].isFile) {
            if ((entries[i].name.indexOf(".jpeg") != -1) || (entries[i].name.indexOf(".png") != -1) || (entries[i].name.indexOf(".jpg") != -1)) {
                var fileName = entries[i].name;
                if (!fileName.startsWith(".")) {
                    numFiles++;
                    ImageFilePath.push(entries[i].fullPath)
                    //  console.log("file "+entries[i].fullPath)
                }
            }

        } else if (entries[i].isDirectory) {
            numDirs++;
            // console.log("directory "+entries[i].name)
            var dirName = entries[i].name;
            if (!dirName.startsWith(".")) {
                getDirSuccess(entries[i]);
            }
        }
        if (readerTimeout) {
            window.clearTimeout(readerTimeout);
        }
    }
    if (readerTimeout) {
        window.clearTimeout(readerTimeout);
    }
    readerTimeout = window.setTimeout(weAreDone, millisecondsBetweenReadSuccess);
}

function weAreDone() {

console.log("numDirs " + numDirs);
console.log("numFiles " + numFiles);

var a = "";

var GalleryImageTag = "";
GalleryImageTag = "<div class='spacingbox'></div> ";

for (var j = 0; j < ImageFilePath.length; j++) {
    GalleryImageTag += "<div class='divgallery divcolor'>"
    var ChkId = "chk" + j;
    GalleryImageTag += "<img class='imggallery' id='" + j + "' src=' " + ImageFilePath[j] + "'alt=''/>";
    GalleryImageTag += "<input id='" + ChkId + "' name='" + ChkId + "' type='checkbox' value='" + ImageFilePath[j] + "' class='allignchk'>";
    GalleryImageTag += "</div>";

}
$('#ImageContainer').html('');
$('#ImageContainer').append(GalleryImageTag);
$('#GalleryView').popup("open");
numDirs = 0;
numFiles = 0;

ImageFilePath = [];
console.log(GalleryImageTag);
} 
```

如果有很多图像，此代码可能需要一些时间才能完成。

# php - & xhtml URL：获取参数

> ID：13220256
> 
> 赞同：0
> 
> 时间：2012-11-04T16:07:44.133
> 
> 标签：php, url

这个问题可能已经被问过好几次了，但我没有找到解决方案。如果我想要一个带有 & 的 URL

```
http://www.mydomain.de?val1=test1&amp;val2=test1 
```

如何使用 PHP 获取这些参数？

$_GET[] 不起作用，因为它需要一个普通的 & 作为分隔符。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T16:53:57.187

您需要运行`html_entity_decode`转换`&amp;`为`&`或任何类似的字符

**通过网址**

```
$_SERVER['QUERY_STRING'] = html_entity_decode($_SERVER['QUERY_STRING']);
parse_str($_SERVER['QUERY_STRING'],$_GET);
var_dump($_GET); 
```

**简单字符串**

```
$url = "http://www.mydomain.de?val1=test1&amp;val2=test1";
$url = html_entity_decode(parse_url($url,PHP_URL_QUERY));
parse_str($url,$parts);
var_dump($parts); 
```

输出

```
array
  'val1' => string 'test1' (length=5)
  'val2' => string 'test1' (length=5) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T16:09:23.307

看看`$_SERVER['QUERY_STRING']`。

# javascript - 如果一个事件触发了随机次数，我如何在 Javascript/Jquery 中捕获最后一个？

> ID：13220257
> 
> 赞同：1
> 
> 时间：2012-11-04T16:07:52.633
> 
> 标签：javascript, jquery, events, jquery-mobile, event-handling

我有一个功能，可以调整页面上的元素宽度/高度。此功能由自定义`dimensionchange`事件触发。

我是

```
$(window).trigger("dimensionchange") 
```

每当我通过 AJAX 加载内容或更改页面时（我正在使用`jquery mobile`）。

我的问题是在某些页面上，触发了一堆 Ajax 请求（例如搜索页面，它 ajax 加载条件和初始结果），所以我最终得到了几个`"dimensionchange"`事件，它们都触发了我的布局更新功能。这会大大减慢页面速度并且没有必要，因为我只需要捕获最后一个`dimensionchange`然后更新布局。

**问题**：
有没有办法在事件触发随机次数时捕获事件的最后一次发生？我唯一能想到的就是在每个事件发生时设置一个超时，如果在...... 500ms 内没有进一步的事件......触发页面更新。但这似乎很尴尬，所以我很想知道是否有更好的方法？

感谢帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T16:21:51.887

您想使用 jQuery 的**[全局 Ajax 事件处理程序](http://api.jquery.com/category/ajax/global-ajax-event-handlers/)** `ajaxStart()`和`ajaxStop()`方法。

最近还有一篇关于使用**[AjaxStop 和 AjaxStart](https://stackoverflow.com/questions/13166176/jquery-submit-a-form-only-if-no-ajax-is-currently-running-on-the-page)**的文章。您需要知道的主要事情是，您可以在第一个 ajax 查询开始时以及最后一个查询结束时收到通知。你可以像这样设置一个标志：

```
$(document).ready(function() {
    var ajaxBusy = false;

    $(document).ajaxStart( function() { 
        ajaxBusy = true; 
    }).ajaxStop( function() {
        ajaxBusy = false;
    });
}); 
```

# android - Android：透明图标栏？

> ID：13220258
> 
> 赞同：0
> 
> 时间：2012-11-04T16:07:55.150
> 
> 标签：android, android-layout, transparent

我想使用这些透明图标栏，如本页截图[所示](https://play.google.com/store/apps/details?id=com.google.android.apps.maps&hl=en)。有人知道这是哪个组件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T21:29:28.813

谷歌地图`ActionBar`与`FEATURE_ACTION_BAR_OVERLAY`集合一起使用。在手机中，它们还启用了拆分 ActionBar。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T16:08:58.873

它们大概是`LinearLayout`具有半透明背景的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T01:12:38.427

将背景设置为具有中等 alpha 的某种颜色。

这个是黑色的，alpha 为 180。前 2 个字符是十六进制的 alpha，其他 6 个是十六进制的 rgb。

```
android:background="#B4000000" 
```

# content-management-system - 没有表/数据库扩散的果园多租户

> ID：13220266
> 
> 赞同：3
> 
> 时间：2012-11-04T16:09:10.773
> 
> 标签：content-management-system, orchardcms, multi-tenant

我正在考虑使用 Orchard CMS 为我的 SaaS 应用程序实施多租户门户解决方案。我很高兴多租户似乎是一流的功能，但看起来为了实现它，我必须要么 a) 为每个租户创建一组带有表前缀的表，要么 b) 拥有每个租户的单独数据库。

我正在尝试为 10,000 多个客户构建一个解决方案，因此任何需要我对每个租户进行物理数据架构更改的东西都无法扩展。在我们的 SaaS 应用程序中，我们在所有表上使用了一个tenantID 列，再加上使用 nHibernate 过滤器和大量索引来允许我们进行扩展。

我想在果园做同样的事情。因此，我想要一组具有tenantID 的表，而不是每个租户的表，然后使用数据访问层（NHib）中的过滤器来始终提取正确的数据。

问题：

1）这可能吗？2）有人做过吗？3）对最好的方法有什么想法吗？我打算直接修改 MultiTenancy/NHiberate 模块源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T23:51:47.427

这是可能的，但很难做到。

这也很可能不是 Orchard 多租户的场景，但没有任何进一步的细节我无法确定。

此功能最适合您需要拥有完全独立的应用程序并且（几乎）不应该在它们之间共享任何内容的情况 - 例如在共享主机中。主要缺点是内存开销，因为每个租户都有自己的整个内部对象基础架构的副本。

一种更简单的方法是使用单租户并从头开始在您自己的单独模块中实施您想要的多租户方案，而不是尝试将方形钉子放入调整多租户的圆孔中。你可以例如。有一个“租户”内容类型并围绕它构建你的模块。

# iphone - 从核心数据加载日期

> ID：13220267
> 
> 赞同：1
> 
> 时间：2012-11-04T16:09:20.697
> 
> 标签：iphone, ios, core-data, nsdate

我有一个带有很多标签的视图，每个标签对应于工作日和一种任务。我想从核心数据中加载信息并使用该信息来设置每个标签的文本。

```
#import "WeekViewController.h"

@implementation WeekViewController

- (void) viewDidLoad {

    gregorian = [[[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar] autorelease];
    [gregorian setFirstWeekday:2];

    mondayMeetings = 0;
    mondayPhoneCalls = 0;
    mondayToDos = 0;

    tuesdayMeetings = 0;
    tuesdayPhoneCalls = 0;
    tuesdayToDos = 0;

    wednesdayMeetings = 0;
    wednesdayPhoneCalls = 0;
    wednesdayToDos = 0;

    thursdayMeetings = 0;
    thursdayPhoneCalls = 0;
    thursdayToDos = 0;

    fridayMeetings = 0;
    fridayPhoneCalls = 0;
    fridayToDos = 0;

    saturdayMeetings = 0;
    saturdayPhoneCalls = 0;
    saturdayToDos = 0;

    sundayMeetings = 0;
    sundayPhoneCalls = 0;
    sundayToDos = 0;

    [self loadInfo:[NSDate date]];

}

- (void) loadInfo:(NSDate *)date {

    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(Date >= %@) AND (Date <= %@)", [self dateByMovingToBeginningOfWeek:self.selectedDate], [self dateByMovingToEndOfWeek:self.selectedDate]];

    request = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Task" inManagedObjectContext:managedObjectContext];
    [request setEntity:entity];
    [request setPredicate:predicate];

    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"Date" ascending:NO];
    NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];
    [request setSortDescriptors:sortDescriptors];
    [sortDescriptors release];
    [sortDescriptor release];

    NSError *error = nil;

    mutableFetchResults = [[managedObjectContext executeFetchRequest:request error:&error] mutableCopy];
    if (mutableFetchResults == nil) {

    }

    for (int i = 0; i < [mutableFetchResults count]; i++) {

        Task *aTask = (Task *)[mutableFetchResults objectAtIndex:i];

        NSDateComponents *comps = [gregorian components:NSWeekdayCalendarUnit fromDate:aTask.Date];

        int weekday = [comps weekday];

        if (weekday == 1  && [aTask.Type isEqualToString:@"PhoneCall"]) {

            mondayPhoneCalls ++;

        }

    }

    NSLog(@"%d", mondayPhoneCalls);

    for (UILabel *go in [self.view subviews]) {

        if (go.tag == 1) {

            go.text = [NSString stringWithFormat:@"%i", mondayPhoneCalls];

        }

    }

}

- (NSDate *) dateByMovingToEndOfWeek:(NSDate *)date {
    unsigned int flags = NSYearCalendarUnit | NSMonthCalendarUnit | NSWeekdayCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit;

    NSDateComponents *parts = [gregorian components:flags fromDate:date];

    [parts setWeekday:7];
    [parts setHour:23];
    [parts setMinute:59];
    [parts setSecond:59];

    return [gregorian dateFromComponents:parts];

}

- (NSDate *) dateByMovingToBeginningOfWeek:(NSDate *)date {

    unsigned int flags = NSYearCalendarUnit | NSMonthCalendarUnit | NSWeekdayCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit;

    NSDateComponents *parts = [gregorian components:flags fromDate:date];

    [parts setWeekday:0];
    [parts setHour:0];
    [parts setMinute:0];
    [parts setSecond:0];

    return [gregorian dateFromComponents:parts];

}

@end 
```

但它只在日期是当前日期（顺便说一下星期天）时才注册任务。任何人都可以想出一种更有效的方法来设置每个标签的文本，而不是为每个标签设置一个插座，或者循环浏览所有视图的子视图并检查它们的标签吗？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T22:41:33.423

您的谓词现在说“日期为今天或更晚且日期为今天或更早的对象”。唯一满足该要求的对象是带有今天日期的对象。

对于您的其他问题，您可以查看 IBOutletCollection。它们用于类似对象的集合（在您的情况下为 UILabel）。它基本上是 IB 对象的 NSArray，您可以对其进行循环并轻松设置它们的值。

# javascript - 从 JQUERY Keydown 事件中注销

> ID：13220269
> 
> 赞同：4
> 
> 时间：2012-11-04T16:09:22.593
> 
> 标签：javascript, jquery, html

我正在尝试删除使用以下代码创建的 keydown 事件：

```
$(document).keydown(function(e) {
    alert("Key Down");
}); 
```

当我使用以下代码时：

```
$(document).off('keydown'); 
```

它引发以下错误：

```
Uncaught TypeError: Object [object Object] has no method 'off' 
```

有人可以指出我从`keydown`活动中取消注册的正确方法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-04T16:11:25.287

取消绑定所有`keydown`处理程序`document`：

```
$(document).unbind('keydown'); 
```

或者确保您只取消绑定该特定处理程序：

```
function myHandler(e) {
    alert("Key Down");
}

$(document).keydown(myHandler);
// later
$(document).unbind('keydown', myHandler); 
```

[http://api.jquery.com/unbind](http://api.jquery.com/unbind)

# assembly - 在 NASM 中声明常量绝对 64 位地址

> ID：13220270
> 
> 赞同：5
> 
> 时间：2012-11-04T16:09:41.787
> 
> 标签：assembly, 64-bit, 32bit-64bit, x86-64, nasm

我需要在自修改程序的代码中声明一个虚拟绝对地址。该指针的工作方式类似于链接器的重定位 - 它仅在指令中保留适当的空间，并在稍后在运行时使用有效地址进行更新。这在 x86-32 上对我来说效果很好：

```
movups xmm0, [0xDEADBEEF] 
```

这会在运行时按预期组装和工作。但是，当我尝试在 x86-64 代码中执行此操作时：

```
movups xmm0, [0xDEADC0DEDEADBEEF] 
```

它装配有以下警告：

```
warning: dword data exceeds bounds 
```

并且在运行时立即崩溃，因为下一条指令被地址的其余部分覆盖，这恰好是垃圾指令。

任何超过 32 位的地址都无法在没有警告的情况下进行汇编，即使是至少长于 32 位的地址：

```
movups xmm0, [0xADEADBEEF] ; 36-bit address 
```

我应该如何声明一个恒定的、绝对的 64 位指针？还是没有办法解决它，我需要在其中放置一个相对于 RIP 的 32 位指针？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T16:18:53.687

我可能是错的，因为我很长时间没有做过 NASM，但我认为您不能将 64 位立即数与 . 以外的任何寄存器一起使用`AL, AX, EAX, RAX`。您的 64 位地址必须声明为`QWORD`.

解决方案：

```
mov rax , 0xDEADCODEDEADBEEF
movups xmm0, [rax] 
```

请参阅下面的评论以获取解释。

本参考资料：[NASM 手册](http://www.nasm.us/doc/nasmdo11.html)

# java - 获取 jbutton 上 imageIcon 的描述

> ID：13220271
> 
> 赞同：1
> 
> 时间：2012-11-04T16:09:41.723
> 
> 标签：java, swing, jbutton, imageicon

我有一个 JButton，可以根据情况选择 2 个不同的 imageIcons 设置。

```
image1Url = getClass().getResource(filename1);
image2Url = getClass().getResource(filename2);
ImageIcon image1 = new ImageIcon( image1Url , "image1")
ImageIcon image2 = new ImageIcon( image2Url , "image2")

JButton button = new JButton;

//Either image1 or image2 is set to this button depending 
//on whether the user clicks this button or whether the 
//computer sets an image there. The point is that the programme 
//then needs to respond depending upon what the image on the button is.
//I tried using...

if(button.getIcon() ==image1)
{
    //respond appropriately.
} 
```

然而这并没有奏效。有人可以向我解释为什么这不起作用以及是否有其他方法可以解决这个问题？我想我也许可以使用图像描述，但不知道如何实现这一点。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T16:14:16.517

我不建议您使用`==`，因为您正在比较参考资料。当然，除非那是你想要做的。

我想说最简单的方法是设置一个值（例如 a `boolean`）来确定`ImageIcon`当前使用的内容，然后与之进行比较。

**编辑** 对不起，我实际上误解了这个问题。如果您想使用描述进行比较，只需执行以下操作：

```
String desc = ((ImageIcon)button.getIcon()).getDescription();
if(desc.equals(image1.getDescription())
{
    //descriptions are the same
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T16:21:16.427

*   对我有用，一定还有另一个问题，

*   确保该图标必须是 ImageIcon 的实例，必须在您的代码中进行测试

例子

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.util.Random;
import javax.swing.*;

public class JButtonAndIcon {

    private static JButton label = new JButton();
    private static Random random = new Random();
    private static ImageIcon image1; // returns null don't worry about
    private static ImageIcon image2; // returns null don't worry about
    private static Timer backTtimer;
    private static int HEIGHT = 300, WEIGHT = 200;

    public static void main(String[] args) throws IOException {
        label.setPreferredSize(new Dimension(HEIGHT, WEIGHT));
        final JButton button = new JButton("Push");
        label.setBorderPainted(false);
        label.setBorder(null);
        label.setFocusable(false);
        label.setMargin(new Insets(0, 0, 0, 0));
        label.setContentAreaFilled(false);
        //button.setLayout(new BorderLayout());
        //button.add(label);
        button.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                if (label.getIcon() == image1) {
                    label.setIcon(image2);
                } else {
                    label.setIcon(image1);
                }
            }
        });
        JFrame frame = new JFrame("Test");
        frame.add(label);
        frame.add(button, BorderLayout.NORTH);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        startBackground();
        frame.setVisible(true);
    }

    private static void startBackground() {
        backTtimer = new javax.swing.Timer(2000, updateBackground());
        backTtimer.start();
        backTtimer.setRepeats(true);
    }

    private static Action updateBackground() {
        return new AbstractAction("Background action") {

            private static final long serialVersionUID = 1L;

            @Override
            public void actionPerformed(ActionEvent e) {
                image1 = new ImageIcon(getImage());
                label.setIcon(image1);
            }
        };
    }

    public static BufferedImage getImage() {
        int w = label.getWidth();
        int h = label.getHeight();
        GradientPaint gp = new GradientPaint(0f, 0f, new Color(
                127 + random.nextInt(128),
                127 + random.nextInt(128),
                127 + random.nextInt(128)),
                w, w,
                new Color(random.nextInt(128), 
                random.nextInt(128), random.nextInt(128)));
        BufferedImage bi = new BufferedImage(w, h, BufferedImage.TYPE_INT_RGB);
        Graphics2D g2d = bi.createGraphics();
        g2d.setPaint(gp);
        g2d.fillRect(0, 0, w, h);
        g2d.setColor(Color.BLACK);
        g2d.dispose(); // thanks notified by @trashgod
        return bi;
    }
} 
```

# php - 如何在脚本中间结束 PHP 脚本但显示页面的其余部分

> ID：13220278
> 
> 赞同：0
> 
> 时间：2012-11-04T16:10:36.313
> 
> 标签：php

我有一个很长的 PHP 脚本，最后有一些 JavaScript。在脚本中间，如果“if”语句为真，那么它们就是一种停止 PHP 脚本其余部分并输出页面 HTML 部分其余部分的方法。这是一个小片段：

```
... more code ...
        case 2:
            $e=$_POST['email'];
            $n=$_POST['name'];
            mysql_connect($dbloc,$dbuser,$dbpass);
            mysql_select_db($dbname)or die(mysql_error());
                $query="SELECT * FROM users WHERE email='$e'";
            $re=mysql_query($query);
            $numm=mysql_numrows($re);
            if($numm>=1){
                $js="alert('Sorry but your email is currently in use. Please try again with a different email address.');";
                $url="./";
                exit();
            }
            else{
                $_SESSION['rEmail']=$e;
                $_SESSION['rName']=$n;
            }
        break;
... more code...

<html goes here /> 
```

我原本以为`exit()`只结束 PHP 部分，但仍归还页面的其余部分，但似乎并非如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T16:17:50.223

`exit()`正在执行它是女仆做的。它正在从调用它的位置退出您的 PHP 代码。

您认为它将打印剩余的 HTML 的概念是错误的。整个 PHP 代码被视为一个 PHP 脚本，所有的逻辑/PHP 函数都被标记在里面`<?php`，`?>`外面的文本就像文档一样，并按原样输出。

使用语句中的退出`if`，它之后的代码/文本根本不会被处理。我建议您改用`break`语句。

# c# - 比较两个 Int 变量与空间/边距的错误

> ID：13220279
> 
> 赞同：2
> 
> 时间：2012-11-04T16:10:42.657
> 
> 标签：c#, java, int, compare

```
public void checkForCollision () {

  int headX = cells[0].x; 
  int headY = cells[0].y;
  int noOfParts = nPoints;

  for(int i = 1; i <noOfParts;i++)
  {
     int tempX = cells[i].x;
     int tempY = cells[i].y;

      if(tempX == headX && tempY == headY){
          JOptionPane.showMessageDialog(null,"Head hit body");
          //EndGameCollectScore etc.
        }
  }

} 
```

编辑：'Cells[]' 是 Point 类型的数组，noOfParts 是蛇有多少段

### 主要问题

使用上面的代码，我试图将 tempX 与 headX 进行比较，但我希望有一定的误差余量，例如 +-5 但我不确定如何实现这一点，我的理由是我在想可能是 x 和Y 变量可能相差几位数，所以如果我有蛇的一段的半径（下面备用中“蛇”的解释），那么如果我是对的并且值有点偏离它应该仍然会出现回正。

## **或者**

### 选择

如果有人可以提出更好的方法来做到这一点？基本上它是针对蛇游戏的，headX 和 headY 是蛇的头部，而 Cells 中剩余的 X 和 Y 变量是身体，我试图比较头部是否撞到身体。

我测试了它，它似乎可以工作，但是在我再次测试它之后，它似乎只会在我让蛇在自己身上翻倍几个方格时才会发生碰撞。例如，如果我垂直穿过身体，它将不会检测到碰撞。

我也相当肯定，在蛇移动的每个块之后都会调用此方法。

干杯，谢恩。

**PS 睡眠很少，血液中的糖分过多，如果您需要进一步澄清，因为上述内容没有多大意义，请告诉我。**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-04T16:13:20.843

```
int eps = 5;
if (Math.abs(tempX - headX) <= eps && Math.abs(tempY - headY) <= eps) { 
    // ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-04T16:16:06.830

要检查两个点是否在`delta`彼此的范围内，请计算它们之间的距离。您可以通过使用正方形来避免进入平方根领域，如下所示：

```
int distSq = (tempX-headX)*(tempX-headX) + (tempY-headY)*(tempY-headY);
int minDist = 5;
if (distSq < minDist*minDist) {
    // too close
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T16:30:39.853

I don't know how your snake looks, but if it has a complex shape, looking for a hit can be expensive in terms of speed. You can speed up collision detection if you can do a quick test, to see if a collision is possible at all. You can do this by using a bounding box. You would have to keep track of minimum and maximum x and y positions of the snake body. Only if a coordinate lies within these boundaries you would take account of the exact shape of the snake. How this has to be done depends on how the snake is represented. Check for each tile or each pixel the snake is made of or possibly check if the coordinate is within a polygon, if the snake outline is defined by a polygon. (I'm not going to explain how this works here, but you will find algorithms if you google a bit.)

If you need to calculate the distance to another point (the snake head), you can use different metrics for this. If only horizontal and vertical movements are possible within the game, the so called Manhattan or taxi distance can be used: `d = |x1-x0| + |y1-y0|`. It consists of adding the x and y distances, or you can use the maximum of both distances: `d = Max(|x1-x0|, |y1-y0|)` (correponds to 2kay's approach).

If you need the exact distance, apply the Pythagorean formula. In order to compare the distance with the error margin, you don't need to calculate the square root. Instead compare the square of the distance with the square of the error margin. This saves time. `(x1-x0)^2 + (y1-y0)^2 < error_margin^2`.

# html - 我们可以只使用 CSS 为图像添加标题吗？

> ID：13220284
> 
> 赞同：-2
> 
> 时间：2012-11-04T16:11:13.747
> 
> 标签：html, css, image, caption

我想为图像添加标题。我发现有两种选择。

1.  通过 jQuery
2.  仅通过 CSS

我认为第二个是很酷的方式

我认为airnb是第二种方式。

但我无法使用`firebug`.

你能给我一个简单的例子或任何有用的博客链接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T16:17:06.950

有选项 3）通过 HTML（和 CSS）。为什么不在 HTML 中添加标题？

但是要回答你的问题，如果你想用 CSS 来做，你可以使用这样的东西：

```
img {
  margin-bottom: 50px; /* Make room */
}

img:after {
  content: 'The caption of the image';
  display: block;
  position: absolute;
  top: 100%;
} 
```

您仍然需要一个容器才能进行定位。而且我可以想象标题文本实际上不应该在 CSS 中，因此纯 CSS 解决方案并不理想。

# java - 老虎机动画（最好用 Java/SVG 编写）

> ID：13220288
> 
> 赞同：2
> 
> 时间：2012-11-04T16:11:37.307
> 
> 标签：java, graphics, svg

我正在寻找一个程序来显示老虎机动画（最好用 Java/SVG 编写）。我有兴趣展示带有我自己选择的图像的旋转轮子。

我找到了 [http://www.doit.org/java/slot/SlotMachine.java](http://www.doit.org/java/slot/SlotMachine.java)

这是Applet的源代码。

*   [http://www.cs.columbia.edu/~sh553/teaching/w3134-s07/review/SlotMachine.java](http://www.cs.columbia.edu/~sh553/teaching/w3134-s07/review/SlotMachine.java)
*   [基本老虎机](https://stackoverflow.com/questions/4981647/basic-slot-machine)

没有图形支持。我希望可能有更好的/其他解决方案可用于在网页上显示。

[http://www.treebuilder.de/default.asp?file=163540.xml](http://www.treebuilder.de/default.asp?file=163540.xml)

显示了一个 SVG 解决方案 - 这可能是迄今为止我正在寻找的最接近的解决方案。

到目前为止，我可以通过制作一个独立的 Java 应用程序来测试上面的小程序。它适用于图形部分 - 音频问题在

[如何将小程序作为应用程序运行？](https://stackoverflow.com/questions/6174541/how-can-i-run-an-applet-as-an-application/13220880#13220880)：

我现在至少可以尝试其他图形，而无需在网页中定义小程序参数。我宁愿有一个独立的解决方案，例如一个宁静的 Java 应用程序。

请看， [Jernej Vicic](http://osebje.famnit.upr.si/~jernej/)[`Wheel`](http://osebje.famnit.upr.si/~jernej/slotmachine/SlotMachine.java)的一个更大[项目](http://osebje.famnit.upr.si/~jernej/slotmachine/)的一部分，以及后来的[变体](http://www.doit.org/java/slot/SlotMachine.java)，并入了Mark [Boyns的](http://www.doit.org/)[项目](http://www.doit.org/java/slot/)中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T16:47:42.360

看起来您有老虎机*模型*的示例。对于*视图*，您可能会查看这个建议使用 Unicode 字形或实现接口的[答案。](https://stackoverflow.com/a/3552370/230513)`Icon`另外，请考虑这个 MVC[示例](https://stackoverflow.com/questions/3072979)和说明[渲染](https://stackoverflow.com/a/4151403/230513)`BufferedImage`.

为可见面设置动画很简单，但相邻面的伪透视需要[梯形变换](https://stackoverflow.com/q/12749301/230513)，可在 JAI 中使用。

附录：*如何将小程序作为应用程序运行？*

[这里](https://stackoverflow.com/a/12449949/230513)引用了几个*混合*方法的例子。请注意，小程序也必须在[事件分派线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)上构建和操作。还可以考虑使用[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)进行部署。

# c# - 正则表达式解析命令行

> ID：13220289
> 
> 赞同：2
> 
> 时间：2012-11-04T16:11:47.973
> 
> 标签：c#, regex

我需要一个正则表达式来解析命令，例如：

> C:\Program Files\Internet Explorer\iexplore.exe https:\www.google.com
> C:\Program Files\Internet Explorer\iexplore.exe http:\www.google.com
> C:\Program Files\Internet Explorer\iexplore .exe www.google.com
> iexplore.exe https:\www.google.com
> 复制 C:\test.txt D:\

关键是我想将第一部分作为命令，将其他部分作为参数。命令可以是任何东西，包括,`.bat`等。`.vbs``.exe`

如果命令中没有空格，则找到一个正常工作的正则表达式。

```
string str = @"C:\xcopy D:\test.txt D:\Test";

string pattern = @"^(?:""([^""]*)""\s*|([^""\s]+)\s*)+";        
Regex parseDir = new Regex(pattern, RegexOptions.IgnoreCase);
if(parseDir.IsMatch(str))
{
    Match dir = parseDir.Match(str);
    var captures = dir.Groups[1].Captures.Cast<Capture>().Concat(
       dir.Groups[2].Captures.Cast<Capture>()).
       OrderBy(x => x.Index).
       ToArray();
    string cmd = captures[0].Value;
    string arguments = string.Empty;
    for (int i = 1; i < captures.Length; i++)
    {
        arguments += captures[i].Value + " ";    
    }
    Console.WriteLine(cmd);
    Console.WriteLine(arguments);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T16:29:44.330

From your question, I'm assuming you are looking for a way to pass batch commands in a text on the Windows OS. The only way I can think of for you to do this successfully is if you have a list of all the commands or if your program can extract all the .exe files in the system, that way you can successfully check where the first exe file *which is the target program of the command* is and assume the others as arguments.

This way, you can do your extraction like this (Non-regex method):

```
var cmd = "copy this.txt C:\t.txt"
var program = getTargetProgram(cmd);
var args = cmd.Substring(cmd.IndexOf(program) + program.length).trim().split(' '); 
```

your `getTargetProgram()` could go like this:

```
private string getTargetProgram(string cmd)
{
    //first test if it's a normal executable
    if(File.Exists(cmd.Substring(0, cmd.IndexOf(".exe") + 4)) //return this extract;
    foreach(string s in winProgramList)
    {
       if(cmd.StartsWith(s)){
             //voila, we can return the target
       }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T16:19:06.783

如果您使用的是标准控制台应用程序，则主入口点 args[] 已经为您解析了这个。这里有一个警告，因为您提供的示例由于其中的空格 (C:\Program Files) 而不起作用，但是如果您用引号将它们括起来 ("C:\Program Files\Internet ...\iexplorer .exe") 你会发现它可以正常工作。

此[链接将引导您完成创建控制台应用程序](http://msdn.microsoft.com/en-us/library/0wc2kk78%28v=vs.90%29.aspx)

**更新：**

那么，如果它不是控制台应用程序，但您想准确模拟控制台应用程序启动例程为您提供的功能，我可以向您介绍唯一的*CommandLineToArgvW*本机方法。

```
 [DllImport("shell32.dll", SetLastError = true)]
    static extern IntPtr CommandLineToArgvW(
        [MarshalAs(UnmanagedType.LPWStr)] string lpCmdLine, 
        out int pNumArgs); 
```

这个非常简单的方法接受任何字符串并将其转换为数组。这是一个实用程序类，可用于将文本输入转换为格式良好的数组。

```
 /// <summary>
/// Wrapper class for Win32 API calls
/// </summary>
public class NativeMethods
{

    [DllImport("shell32.dll", SetLastError = true)]
    static extern IntPtr CommandLineToArgvW(
        [MarshalAs(UnmanagedType.LPWStr)] string lpCmdLine, out int pNumArgs);

    /// <summary>
    /// Parse a string into an array, including items in quotes
    /// </summary>
    /// <param name="commandLine"></param>
    /// <returns></returns>
    public static string[] CommandLineToArgs(string commandLine)
    {
        if (String.IsNullOrEmpty(commandLine))
            return new string[] {};

        int argc;
        var argv = CommandLineToArgvW(commandLine, out argc);
        if (argv == IntPtr.Zero)
            throw new System.ComponentModel.Win32Exception();
        try
        {
            var args = new string[argc];
            for (var i = 0; i < args.Length; i++)
            {
                var p = Marshal.ReadIntPtr(argv, i * IntPtr.Size);
                args[i] = Marshal.PtrToStringUni(p);
            }

            return args;
        }
        finally
        {
            Marshal.FreeHGlobal(argv);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T17:00:38.093

您要么需要在程序路径/名称周围加上引号（如果其中有空格），要么编写一些额外的代码来找出它的程序部分。

想到的一种方法是从第一个捕获开始（对于您的`iexplorer.exe`示例，它将是`C:\Program`），检查它是否是有效的程序。如果不是，请使用空格添加下一个捕获（例如，`C:\Program`+ `Files\Internet`=> `C:\Program Files\Internet`）并重复检查。重复直到你用完捕获或找到一个有效的程序，然后将其余的正常视为参数。

正如另一个答案所建议的那样，没有理由手动进行解析。正则表达式仍然有效。

# javascript - WebDriver 如何在不使用 javascript 中的 Select Class 的情况下从 ComboBox 中获取选定的值

> ID：13220290
> 
> 赞同：0
> 
> 时间：2012-11-04T16:11:50.957
> 
> 标签：javascript, webdriver, selenium-webdriver, ui-automation

我正在使用 Java 开发 webdriver。如果不使用 Webdriver 的 Select 类，如何从组合框中获取选定的值？

我正在处理的标记是——

```
<select name="cmbStateName">
<option value="MH">Maharashtra</option>
<option value="HR">Harayana</option>
<option value="MP">Madhya Pradesh</option>
</select> 
```

我无法对标记进行任何更改。我不想使用 Select 类的原因是我想用纯 Java 驱动测试并与 Mark Up 交互。我不想使用 Java Script 获得价值，但我想通过 Core Java 获得价值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T22:19:38.210

试试这个（java代码）

```
driver.findelement(By.name("cmbStateName")).findelement(By.xpath(".//option[@selected='selected']")).getText(); 
```

如果不起作用，则获取选定的选项值（即 MH 或 HR 或 MP）并转换回显示文本

```
driver.findelement(By.name("cmbStateName")).findelement(By.xpath(".//option[@selected='selected']")).getAttribute("value"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T10:41:42.740

如果您想获得选定的值，请尝试以下操作：

C#代码：

```
using OpenQA.Selenium.Support.UI;

var select = new SelectElement(Driver.FindElementByName("cmbStateName"));
return select.SelectedOption.Text; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-06T13:25:42.773

试试这个： C# 代码（可以使用 OpenQA.Selenium.Support.UI 来使用 Select Class） Select select = new Select(driver.findElement(By.xpath("//path_to_drop_down"))); select.deselectAll(); select.selectByVisibleText("Value1");

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-03-10T19:38:45.910

选择尺寸 50LB20KG6.23KG2/25LB20LB12/1LB 此处输入代码

# zigbee - API 模式下的 Xbee 64 位地址

> ID：13220293
> 
> 赞同：1
> 
> 时间：2012-11-04T16:12:00.897
> 
> 标签：zigbee, xbee

我目前正在开展一个项目，在该项目中我使用 xbee XBee 2mW Wire Antenna - Series 2 (ZigBee Mesh) 等天线。如何获取我的天线 64 位地址，以便我可以使用我的软件自动设置它？我可以向天线发送 zigbee 消息，以便它返回包含其天线地址的消息，然后我解码消息并知道我的天线地址。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:29:51.873

如果您想要一种简单的方法，您可以从路由器/终端设备向您的 ZigBee 网络中的协调器发送一条消息。您可以使用特殊的 16 位网络地址 0x0000 来寻址协调器。

此消息应包含 16 位网络地址（或 64 位地址），以便稍后协调器可以使用此地址与此节点进行通信。如果您使用 AT 模式，这就是您可以做到的。如果您使用 API 模式，“接收数据包”已经包含发件人的地址，因此您无需将其显式添加到您的消息中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-08T15:58:32.827

当您按下一次委托按钮时：模块发送一个节点识别广播传输。

因此，我假设您使用的是 API 模式，因此您可以从 Coordinator API（软件端）发送**Remote AT Command Request**，在*broadcast*中，将**CB**（commission button）设置为**1**。这与几乎一次按下佣金按钮相同。这是数据包：

7E 00 10 **17** 00 00 00 00 00 00 00 FF FF FF FE 00 **43 42 01** 67

**然后，当您的所有设备收到此数据包时，它们应使用节点标识指示符**向协调器回复，其中包含它们的 16 位和 64 位地址。这样，您可以在软件上自动设置网络。

# c# - 一段时间后停止代码

> ID：13220294
> 
> 赞同：1
> 
> 时间：2012-11-04T16:12:01.120
> 
> 标签：c#, sockets, datetime, loops

> **可能重复：**
> [15 秒后停止运行代码](https://stackoverflow.com/questions/13218933/stop-running-the-code-after-15-seconds)

我正在处理数据包嗅探器的代码，我只想对其进行一些修改。现在我正在尝试编辑它，以便一旦我启动程序，它只会捕获 15 秒的数据包。下面是拦截数据包的代码部分，如您所见，我正在处理 Try/Catch/Throw，它的工作原理就像一个循环。

```
 public void Start() {
            if (m_Monitor == null)
            {

                try
                {

                    m_Monitor = new Socket(AddressFamily.InterNetwork, SocketType.Raw, ProtocolType.IP);
                    m_Monitor.Bind(new IPEndPoint(IP, 0));
                    m_Monitor.IOControl(SIO_RCVALL, BitConverter.GetBytes((int)1), null);
                    m_Monitor.BeginReceive(m_Buffer, 0, m_Buffer.Length, SocketFlags.None, new AsyncCallback(this.OnReceive), null);
                }
                catch
                {
                    m_Monitor = null;
                    throw new SocketException();
                }
            }
    }
    /// <summary>
    /// Stops listening on the specified interface.
    /// </summary>
    public void Stop() {
        if (m_Monitor != null) {
            m_Monitor.Close();
            m_Monitor = null;
        }
    }
    /// <summary>
    /// Called when the socket intercepts an IP packet.
    /// </summary>
    /// <param name="ar">The asynchronous result.</param>
    /// 
    private void OnReceive(IAsyncResult ar) {
            try
            {
                int received = m_Monitor.EndReceive(ar);
                try
                {
                    if (m_Monitor != null)
                    {
                        byte[] packet = new byte[received];
                        Array.Copy(Buffer, 0, packet, 0, received);
                        OnNewPacket(new Packet(packet));
                    }
                }
                catch { } // invalid packet; ignore
                m_Monitor.BeginReceive(Buffer, 0, Buffer.Length, SocketFlags.None, new AsyncCallback(this.OnReceive), null);
            }
            catch
            {
                Stop();
            }
    } 
```

您认为我可以如何修改此代码，以便它在 15 秒后启动后停止？我曾尝试使用 DateTime 但它没有成功，我无法打破这个所谓的循环。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T16:29:25.940

I think you need to measure time and stop the code after particular time say "15 seconds" ,`StopWatch` class can help you out.

```
// Create new stopwatch instance
Stopwatch stopwatch = new Stopwatch();
// start stopwatch
stopwatch.Start();
// Stop the stopwatch
stopwatch.Stop();
// Write result
Console.WriteLine("Time elapsed: {0}",stopwatch.Elapsed);
// you can check for Elapsed property when its greater than 15 seconds 
//then stop the code 
```

Elapsed property [returns TimeSpan](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.elapsed.aspx) instance you would do something like this.

```
TimeSpan timeGone = stopwatch.Elapsed; 
```

To fit your scenario you can do something like this

```
Stopwatch stopwatch = new Stopwatch();
TimeSpan timeGone;
// Use TimeSpan constructor to specify:
// ... Days, hours, minutes, seconds, milliseconds.
// ... The TimeSpan returned has those values.
TimeSpan RequiredTimeLine = new TimeSpan(0, 0, 0, 15, 0);//set to 15 sec

While ( timeGone.Seconds < RequiredTimeLine.Seconds )
{
    stopwatch.Start();
    Start();
    timeGone = stopwatch.Elapsed;
}
Stop();//your method which will stop listening 
```

**Some useful links**
[MSDN StopWatch](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)

**Note:**
Im' sure that i have given enough pointers that anyone can sort his problem through these basic approach ,kindly also check my comments for another approach.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T16:30:30.167

You could use

```
System.Threading.Thread.Sleep(15000); 
```

and put the code after it. the code will be executed after the defined delay.

Good Luck

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T17:04:40.560

鉴于您的代码使用单独的线程来完成实际工作，您可以使用相当少量的代码来设置它：

```
using System;
using System.Threading;

namespace ConsoleApplication1
{
    class Program
    {
        static YourSnifferClass sniffer = new YourSnifferClass();
        static AutoResetEvent done_event = new AutoResetEvent(false);

        static void Main(string[] args)
        {           
            sniffer.Start();

            // Wait for 15 seconds or until the handle is set (if you had a
            // Stopped event on your sniffer, you could set this wait handle
            // there: done_event.Set()
            done_event.WaitOne(TimeSpan.FromSeconds(15));

            // stop the sniffer
            sniffer.Stop();
        }
    }
} 
```

希望有帮助。

# google-app-engine - 如何在 App Engine 上为 PIL ImageFont 加载替代字体？

> ID：13220295
> 
> 赞同：3
> 
> 时间：2012-11-04T16:12:01.590
> 
> 标签：google-app-engine

我已成功将一些 Python 代码移植到使用 PIL 的 ImageFont 和 ImageDraw 生成动态图像的 App Engine。唯一剩下的问题是原始代码使用如下调用加载 TrueType 字体：

```
titlefont = ImageFont.truetype("Verdana Bold.ttf", titlefontsize) 
```

我不能只上传字体文件并直接在 GAE 中访问它（至少我不认为我可以？！）。我想可能有可能以某种方式将字体数据转储到数据存储 blob 中，加载并将其输入 PIL，但这似乎不够优雅，如果每个使用 PIL 生成图像的人都做同样的事情，这将是非常浪费的。目前我被困住了`ImageFont.load_default()`，这给出了非常可怕的结果。

在 GAE PIL 中是否有一些巧妙的方法可以使用替代字体？我缺少的一些额外的 API 会返回可用的字体对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T16:37:34.083

部署应用程序时，应用程序目录中的任何文件都将与应用程序一起上传。

所以是的，您应该能够“仅”访问您需要的任何文件，方法是将其保存在您的应用程序目录中或下，必要时将其移动到那里。

如果您想提供这些文件，那就另当别论了。[https://developers.google.com/appengine/docs/python/gettingstarted/staticfiles](https://developers.google.com/appengine/docs/python/gettingstarted/staticfiles)

但是请尝试将您的 .ttf 文件包含在您的应用程序可以找到它的位置，并且它应该可以正常工作。

# objective-c - 谓词将对象与同一集合中的其他对象进行比较

> ID：13220298
> 
> 赞同：0
> 
> 时间：2012-11-04T16:12:34.227
> 
> 标签：objective-c, ios, core-data, nspredicate

我有一个`NSArray`日历周期，其中包含`NSManagedObjects`并建模，如此屏幕截图所示：

![核心数据模型](../Images/a76b207678feb94928c9f2933c6bf3f6.png)

具有以下示例内容：

```
endMonth = 9;
endYear = 2012;
length = 3;
... 
```

**我正在尝试做的事情：**

我正在尝试构建一个谓词，该谓词仅返回存在一年前等效期间的那些日历期间。示例：仅当数组中`2012, 9, 3`有周期时，才返回周期（年、月、长度）作为结果。`2011, 9, 3`谓词需要将每个日历周期与数组中的每个日历周期进行比较。

这是我尝试过的谓词：

```
predicate = [NSPredicate predicateWithFormat:
       @"SUBQUERY(SELF, $x, $x.endYear == endYear - 1 "
        "AND $x.endMonth == endMonth AND $x.length = length).@count > 0"]; 
```

**问题：**

但是，使用此谓词运行我的应用程序会导致运行时崩溃并显示错误消息： **NSInternalInconsistencyException'，原因：'无法使用非集合对象执行集合评估。'**

我的谓词有什么问题，我需要如何正确指定它？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T21:28:48.530

首先，解决您看到的错误。这是你的谓词：

```
[NSPredicate predicateWithFormat:@"SUBQUERY(SELF, $x, $x.endYear == endYear - 1 "
    "AND $x.endMonth == endMonth AND $x.length = length).@count > 0"] 
```

表达式的第一个参数是将迭代`SUBQUERY`的集合。`SUBQUERY`因此，您期望`SELF`评估为 an`NSArray`或 an `NSSet`。但是，您在子查询谓词中使用 keypaths `endYear`、`endMonth`和`length`似乎表明您希望`SELF`评估为`CalendarPeriod`. 因此，要么`SELF`是一个集合（并且`endYear`,`endMonth`和`length`是集合的无效键路径），要么`SELF`是一个`CalendarPeriod`（因此不能用作`SUBQUERY`' 的集合。根据您的错误，它似乎是后者。

如果我们要写出你的问题（不使用`NSPredicate`），我们可能会得到这样的结果：

```
NSArray *calendarPeriods = ...;
for (CalendarPeriod *period in calendarPeriods) {
  for (CalendarPeriod *otherPeriod in calendarPeriods) {
    if ([otherPeriod endYear] == [period endYear] - 1 && [otherPeriod endMonth] == [period endMonth] && [otherPeriod length] == [period length]) {
      return YES;
    }
  }
}
return NO; 
```

那么，如何复制这个...

您最初的尝试似乎相当不错。我认为唯一需要做的改变是，你应该使用 , 而不是`SELF`作为 的第一个参数，而`SUBQUERY`应该使用, 和集合`%@`中的替代品。`calendarPeriods`或者，如果您将 this 作为 a 的谓词执行`NSFetchRequest`，您可以尝试使用`FETCH()`表达式来获取每个`CalendarPeriod`对象。

顺便说一句，如果你走这条路，你会看到非常糟糕的表现。这是一个有保证的 O(N ² )，你可以做得更好。例如，如果您将 every 提取`CalendarPeriod`到内存中，然后将它们插入到由、 和`NSDictionary`的组合键控中`endYear`，那么您可以将其减少到 O(N) 时间。`endMonth``length`

# xaml - 如何在 XAML 中表达负无穷大？

> ID：13220299
> 
> 赞同：1
> 
> 时间：2012-11-04T16:12:34.607
> 
> 标签：xaml

我可以通过编写将属性值设置为正无穷大`Property="Infinity"`，但是当我尝试通过编写将其设置为负无穷大时，`Property="-Infinity"`或者 `Property="NegativeInfinity"`我收到错误消息：“输入字符串的格式不正确。”

如何在 XAML 中表达负无穷大？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-10T19:36:37.710

我知道，差不多 5 年后，但是...

您可以执行以下操作：

```
Minimum="{Binding Source={x:Static sys:Decimal.MinValue}}"
<!--sys is the System alias--> 
```

您可以`const`通过简单绑定访问被识别为该类型最小值的 。

# javascript - 如何将变量从javascript传递给表单？

> ID：13220309
> 
> 赞同：1
> 
> 时间：2012-11-04T16:13:32.550
> 
> 标签：javascript, jquery, ruby-on-rails, google-maps

在我的应用程序中，我使用自动完成从谷歌地图 API 获取带有地点详细信息的 json

```
var place = autocomplete.getPlace(); 
```

我可以通过`place.name` 在同一页面上获取该地点的名称，我有一个表单，可以从用户那里获取其他详细信息。`place.name`问题是当表单被提交时我如何将它传递给我的 Rails 控制器？在 js 中，我尝试更改表单的 HTML

```
<form...>
<div id="hidden_fields"></div>
</form> 
```

使用

```
$("#hidden_fields").append("<input name='name' type='hidden' value='"+place.name+"' />"); 
```

但显然它不起作用。我应该学习 AJAX 来做这些事情还是有其他方法？提前感谢您的任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T16:30:22.710

Please ensure you are creating the hidden fields after the autocomplete finished. check the viewsource if the hidden variables has appended before submitting. As long as the control available with in the form tag before submit, your controller able to get it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T00:28:42.957

谢谢你们！问题已解决。我学到的重要的东西是

1.  View/Source 不会显示动态添加的内容，但 Firebug 会。
2.  Rails 修改表单字段名称：它转

<%=form_for @place do |f| ...

<%= f.password_field :password , :class =>"form-field", :id =>"passwordField"

进入

`<input class="form-field" id="passwordField" name="place[password]" type="password" />`

这意味着我必须以相同的方式从 js 传递值：

`$text.append('<input name="place[name]" type="hidden" value="'+place.name+'"/>');`

希望它对其他人有帮助。

# python-3.x - 为什么我的字典打印不正确？

> ID：13220326
> 
> 赞同：0
> 
> 时间：2012-11-04T16:15:17.270
> 
> 标签：python-3.x

我不知道为什么，但是这个函数末尾的 dict 不会完全打印出来。它最多只能打印四个键+值，它们只是前四个。奇怪的是，第三和第四出现在相反的位置。

`genelist = ['ABC', 'abc', 'Abc', 'aBC', 'ABc', 'abC', 'AbC', 'aBc']`

```
def recombAB(x):

    rec_total = 0
    primlistAB = []
    for item in x:
        split = list(item)
        del split[2]
        primlistAB = primlistAB + split

    listAB = [primlistAB[0] + primlistAB[1], primlistAB[2] + primlistAB[3], primlistAB[4] + primlistAB[5], primlistAB[6] + primlistAB[7], primlistAB[8] + primlistAB[9], primlistAB[10] + primlistAB[11], primlistAB[12] + primlistAB[13], primlistAB[14] + primlistAB[15]]

    print(listAB)

    dictAB = {listAB[0] : freq1, listAB[1] : freq2, listAB[2] : freq3, listAB[3] : freq4, listAB[4] : freq5, listAB[5] : freq6, listAB[6] : freq7, listAB[7] : freq8}

    print(dictAB) 
```

`recombAB(genelist)`

这给了我 listAB = ['AB', 'ab', 'Ab', 'aB', 'AB', 'ab', 'Ab', 'aB']

和 dictAB = {'AB': 9, 'ab': 9, 'aB': 1, 'Ab': 1}

当我正在寻找的是 {'AB':479, 'ab':473, 'Ab':15, 'aB':13, 'AB':9, 'ab':9, 'Ab':1 , 'aB': 1 }

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T16:45:00.080

当我部分运行您的代码时，通过调用函数`genelist`作为其参数，我得到以下输出`listAB`：

```
['AB', 'ab', 'Ab', 'aB', 'AB', 'ab', 'Ab', 'aB'] 
```

如果你仔细观察，你会发现那里有重复的值，而且基本上只有 4 个不同的值。

因此，当您构建字典时，您将多个值分配给相同的键，从而覆盖以前的值。

> 当我正在寻找的是`{'AB':479, 'ab':473, 'Ab':15, 'aB':13, 'AB':9, 'ab':9, 'Ab':1, 'aB': 1 }`

字典是从键到值的一对一映射。这意味着每个键唯一地标识字典中的单个元素。但是在您想要的字典输出中，您将有单个键映射到多个不同的值（例如`AB`to`479`和`9`）。这是不可能的。

如果您不需要 map-property 但只想存储成对的值，则可以使用元组列表代替：

```
[('AB', 479), ('ab', 473), ('Ab', 15), ('aB', 13), ('AB', 9), ('ab', 9), ('Ab', 1), ('aB', 1)] 
```

或者，如果您确实需要能够从它们的“键”中查找值，您可以通过映射到值列表来创建一个多值字典：

```
{'AB': [479, 9], 'ab': [473, 9], 'Ab': [15, 1], 'aB': [13, 1]} 
```

# php - 使用 PHP smartReadFile 流式传输音频 - 不显示持续时间或在 iOS Safari 上搜索

> ID：13220327
> 
> 赞同：2
> 
> 时间：2012-11-04T16:15:32.253
> 
> 标签：php, html, jplayer

我正在使用`smartReadFile`我在网上找到的这种 PHP 方法将音频流式传输到 jQuery `jPlayer`。虽然这在从浏览器播放时效果很好，但我可以搜索曲目并显示持续时间，但是当我在 iOS Safari 上尝试时，持续时间是未知的，我无法搜索，但它确实可以播放。有什么想法吗？非常感激。

```
function _smartReadFile($location, $filename, $mimeType = 'application/octet-stream')
    {
        if (!file_exists($location))
        {
            header ("HTTP/1.1 404 Not Found");
            return;
        }

        $size   = filesize($location);
        $time   = date('r', filemtime($location));

        $fm     = @fopen($location, 'rb');
        if (!$fm)
        {
            header ("HTTP/1.1 505 Internal server error");
            return;
        }

        $begin  = 0;
        $end    = $size - 1;

        if (isset($_SERVER['HTTP_RANGE']))
        {
            if (preg_match('/bytes=\h*(\d+)-(\d*)[\D.*]?/i', $_SERVER['HTTP_RANGE'], $matches))
            {
                $begin  = intval($matches[1]);
                if (!empty($matches[2]))
                {
                    $end    = intval($matches[2]);
                }
            }
        }

        if (isset($_SERVER['HTTP_RANGE']))
        {
            header('HTTP/1.1 206 Partial Content');
        }
        else
        {
            header('HTTP/1.1 200 OK');
        }

        header("Content-Type: $mimeType"); 
        header('Cache-Control: public, must-revalidate, max-age=0');
        header('Pragma: no-cache');  
        header('Accept-Ranges: bytes');
        header('Content-Length:' . (($end - $begin) + 1));
        if (isset($_SERVER['HTTP_RANGE']))
        {
            header("Content-Range: bytes $begin-$end/$size");
        }
        header("Content-Disposition: inline; filename=$filename");
        header("Content-Transfer-Encoding: binary");
        header("Last-Modified: $time");

        $cur    = $begin;
        fseek($fm, $begin, 0);

        while(!feof($fm) && $cur <= $end && (connection_status() == 0))
        {
            print fread($fm, min(1024 * 16, ($end - $cur) + 1));
            $cur += 1024 * 16;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T06:04:48.607

瓦西姆，

您是否对所有文件类型都存在此问题？

也许将 mimetype 设置为更接近文件类型会有所帮助。

例子：

```
$file = '/music/song.mp3';
// Add the mimeTypes for mp3
_smartReadFile($file, basename($file), 'audio/mpeg, audio/x-mpeg, audio/x-mpeg-3, audio/mpeg3'); 
```

希望它有所帮助。

# ruby-on-rails-3 - 在当前捆绑包中找不到 gem 'uglifier'

> ID：13220329
> 
> 赞同：1
> 
> 时间：2012-11-04T16:15:55.853
> 
> 标签：ruby-on-rails-3, gem, bluehost

我的简单网络应用程序在 Windows 7 上运行正常。现在我将其移至 bluehost。

启动应用程序时出现此错误：

```
ActionView::Template::Error (cannot load such file -- uglifier 
```

试图解决它，我运行了“gem install uglifier”，似乎大部分都有效：

```
SSH# gem install uglifier
Successfully installed uglifier-1.3.0
1 gem installed
Installing ri documentation for uglifier-1.3.0...
unable to convert "\xC2" to UTF-8 in conversion from ASCII-8BIT to UTF-8 to US-ASCII  for README.md, skipping
Installing RDoc documentation for uglifier-1.3.0...
unable to convert "\xC2" to UTF-8 in conversion from ASCII-8BIT to UTF-8 to US-ASCII for README.md, skipping 
```

但是当我尝试找到宝石时，找不到它：

```
bundle show uglifier 
```

产量：在当前捆绑包中找不到 gem 'uglifier'

Gemfile 包括以下内容：

```
group :assets do
  gem 'therubyracer'
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end 
```

Gemfile.lock 显示安装了 uglifier gem：

```
uglifier (1.3.0) 
```

$PATH 信息：

```
/usr/local/jdk/bin:/home4/mychairs/perl5/bin:/usr/lib64/qt-3.3/bin:/home4/mychairs/perl5/bin:/ramdisk/bin:/usr/bin:/bin:/usr/local/sbin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11R6/bin:/home4/mychairs/ruby/gems/bin:/home4/mychairs/ruby/gems:/home4/mychairs/bin 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T19:09:53.277

对于初学者，您需要将 gem 添加到您的 Rails 应用程序根目录下的 Gemfile 中。请参阅[捆绑器](http://gembundler.com/)。

只需在 Gemfile 的资产组中的某处包含 uglifier gem：

**宝石文件**

```
group :assets do
  gem 'uglifier'
end 
```

然后运行`bundle install`命令来安装所有必需的 gem。通过查看 Gemfile.lock 文件，您可以准确确认安装了哪些 gem，包括版本信息。

如果您还没有资产组，请创建一个。我强烈建议阅读捆绑器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T16:43:33.363

在应用程序目录中尝试以下操作

```
#first
bundle
#then
bundle install 
```

# android - 确认删除行的对话框

> ID：13220349
> 
> 赞同：0
> 
> 时间：2012-11-04T16:18:02.547
> 
> 标签：android, dialog

我正在尝试添加一个对话框，当用户选择将删除指定行的删除按钮时，该对话框将弹出。但是我似乎无法获得程序编译的适当语法。错误发生在这一行；

```
MODULEDATABASE.deleteRow(rowId);
Intent intent = new Intent(this, MyCourses.class); 
```

任何建议将不胜感激。

```
public class ViewCourse extends Activity implements OnClickListener{
Cursor cursor;
database MODULEDATABASE;
String rowId;
Button deleteModule;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_view_course);

        Intent intent = getIntent();
        rowId = intent.getStringExtra(MyCourses.TEST);
        MODULEDATABASE = new database(ViewCourse.this);
        MODULEDATABASE.openToRead(ViewCourse.this);
        cursor = MODULEDATABASE.getRow(rowId);

        TextView text_modulecode = (TextView)findViewById(R.id.viewModuleCode);
        TextView text_modulename = (TextView)findViewById(R.id.viewModuleName);

        text_modulecode.setText(cursor.getString(cursor.getColumnIndex(database.KEY_MODULECODE)));
        text_modulename.setText(cursor.getString(cursor.getColumnIndex(database.KEY_MODULENAME)));

        deleteModule = (Button)findViewById(R.id.deleteButton);
        deleteModule.setOnClickListener(this);
    }

    public void onClick (View deleteModule) 
    {
         Dialog(rowId);

    }

    public void Dialog (String rowId) {
        // Use the Builder class for convenient dialog construction
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setMessage(R.string.confirmDelete)
               .setPositiveButton(R.string.confirmDelete, new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                     MODULEDATABASE = new database(ViewCourse.this);
                     MODULEDATABASE.deleteRow(rowId);
                     Intent intent = new Intent(this, MyCourses.class);
                     startActivity(intent);

                   }
               })
               .setNegativeButton(R.string.confirmDelete, new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {

                   }
               });
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T16:20:55.873

你没有说错误是什么，但我怀疑你需要改变这一行：

```
Intent intent = new Intent(this, MyCourses.class); 
```

到：

```
Intent intent = new Intent(ViewCourse.this, MyCourses.class); 
```

（问题是在代码中的那个点，`this`指的是匿名`OnClickListener`类。）

**编辑**-`rowId`将方法的参数声明为`final`：

```
public void Dialog (final String rowId) {
    . . . 
```

# php - Mysql 查询获取记录

> ID：13220351
> 
> 赞同：-2
> 
> 时间：2012-11-04T16:18:28.603
> 
> 标签：php, mysql, phpmyadmin, joomla1.5

我有一个表结构，如下所示![在此处输入图像描述](../Images/3e8340fefed63d6965823cc1b28ef127.png)

在上表中，我`team_id`需要*max*。`win+runs_scored`

 *我知道该任务可以通过 PHP 代码完成，但是如果有任何查询可能对我来说会更容易，而且主要是在真实表中包含超过*15000 行*所以请如果有人可以为我提供更好的解决方案那就太好了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T16:21:20.643

```
select t.team_id 
from YourTable t
order by t.win + t.run_scored desc
limit 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T16:27:34.257

```
select max(t.win + t.run_scored) ,t.team_id 
from YourTable t
group by t.team_id 
Limit 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T16:39:59.283

```
SELECT  teamid FROM 
(  
SELECT max(win+run_scored),teamid FROM YOUR_TABLE GROUP BY teamid 
ORDER BY max(win+run_scored) desc
)
WHERE rownum <= 1 
```*

# html - HTML 脚本评估

> ID：13220353
> 
> 赞同：0
> 
> 时间：2012-11-04T16:18:35.207
> 
> 标签：html, ruby-on-rails

免责声明：总的来说，我对 Web 开发还是很陌生，所以如果这是一个可怕的问题，我很抱歉。

为什么 HTML 中的所有内容都是逐行评估的？我注意到我投入到 HTML 中的任何代码（脚本？）都要求我在每一行都将其转换为它的语言，如下所示：

```
<div class = "row">
    <div class = "span6 offset3">
        <%= form_for(@user) do |f| %>

            <%= f.label :name %>
            <%= f.text_field :name %>

            <%= f.label :email %>
            <%= f.text_field :email %>

            <%= f.label :password %>
            <%= f.text_field :password %>

            <%= f.label :password_confirmation, "Confirmation" %>
            <%= f.text_field :password_confirmation %>

            <%= f.submit "Create My Account", :class => "btn btn-large btn-primary" %>

        <% end %>
    </div>
</div> 
```

但是为什么它不能像这样评估脚本：

```
<div class = "row">
    <div class = "span6 offset3">
        <%= form_for(@user) do |f|

            f.label :name
            f.text_field :name

            f.label :email
            f.text_field :email

            f.label :password
            f.text_field :password

            f.label :password_confirmation, "Confirmation"
            f.text_field :password_confirmation

            f.submit "Create My Account", :class => "btn btn-large btn-primary"

        end %>
    </div>
</div> 
```

允许这样做不会使开发变得如此简单吗？对我来说，这更有意义，但它不是这样做的，可能是有充分理由的。如果我正在编写相当多的代码（在本例中为 Ruby），我并不喜欢在开始和结束时强制转换每一行。

我知道我让 HTML 通过转换它来评估每一行作为一个 HTML 对象，但是不可能让它假设每一行（或其他一些语法 - 可能实际上使用分号）都是一个新的部分要评估的脚本？

我想我要问的是为什么要以这种方式评估代码块，为什么没有提高效率？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-04T16:24:25.000

你可以，但你必须做`<%= %>`标签所做的一切。

我不确定Ruby中的语法，但基本上是这样的标签：

```
<%= f.label :name %> 
```

确实输出到页面，即：

```
<% response.write(f.label :name) %> 
```

因此，如果您添加用于执行输出的命令，您可以在单个脚本标记中执行此操作：

```
<%= form_for(@user) do |f|

  response.write(f.label :name)
  response.write(f.text_field :name)
  et.c... 
```

# iphone - 度数的主要风向？

> ID：13220367
> 
> 赞同：3
> 
> 时间：2012-11-04T16:20:35.780
> 
> 标签：iphone, objective-c, weather

有没有人在目标 C 中有一些示例代码，其中风度（即 180 度变成 S（代表南方））转换为主要风向（N、NNE、SSE、SE 等）？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-04T16:55:38.593

关于什么

```
- (NSString *)windDirectionFromDegrees:(float)degrees
{
    static NSArray *directions;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        // Initialize array on first call.
        directions = @[@"N", @"NNE", @"NE", @"ENE", @"E", @"ESE", @"SE", @"SSE",
                       @"S", @"SSW", @"SW", @"WSW", @"W", @"WNW", @"NW", @"NNW"];
    });

    int i = (degrees + 11.25)/22.5;
    return directions[i % 16];
} 
```

（我假设这`degrees`不是负面的。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-04-11T18:21:05.053

**斯威夫特 4**

更新 Martin R 的回答：

```
 func windDirectionFromDegrees(degrees : Float) -> String {

    let directions = ["N", "NNE", "NE", "ENE", "E", "ESE", "SE", "SSE", "S", "SSW", "SW", "WSW", "W", "WNW", "NW", "NNW"]
    let i: Int = Int((degrees + 11.25)/22.5)
    return directions[i % 16]
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-04T16:20:35.780

这是一个例子：

```
 - (NSString*)windDirectionFromDegrees:(float)degrees {
    NSString *hour1WindDirection;
    if (348.75 <= Degrees && Degrees <= 360) {
        hour1WindDirection = @"N";
    } else if (0 <= Degrees && Degrees <= 11.25) {
        hour1WindDirection = @"N";
    } else if (11.25 < Degrees && Degrees <= 33.75) {
        hour1WindDirection = @"NNE";
    } else if (33.75 < Degree && Degrees <= 56.25) {
        hour1WindDirection = @"NE";
    } else if (56.25 < Degrees && Degrees <= 78.75) {
        hour1WindDirection = @"ENE";
    } else if (78.75 < Degrees && Degrees <= 101.25) {
        hour1WindDirection = @"E";
    } else if (101.25 < Degrees && Degrees <= 123.75) {
        hour1WindDirection = @"ESE";
    } else if (123.75 < Degrees && Degrees <= 146.25) {
        hour1WindDirection = @"SE";
    } else if (146.25 < Degrees && Degrees <= 168.75) {
        hour1WindDirection = @"SSE";
    } else if (168.75 < Degrees && Degrees <= 191.25) {
        hour1WindDirection = @"S";
    } else if (191.25 < Degrees && Degrees <= 213.75) {
        hour1WindDirection = @"SSW";
    } else if (213.75 < Degrees && Degrees <= 236.25) {
        hour1WindDirection = @"SW";
    } else if (236.25 < Degrees && Degrees <= 258.75) {
        hour1WindDirection = @"WSW";
    } else if (258.75 < Degrees && Degrees <= 281.25) {
        hour1WindDirection = @"W";
    } else if (281.25 < Degrees && Degrees <= 303.75) {
        hour1WindDirection = @"WNW";
    } else if (303.75 < Degrees && Degrees <= 326.25) {
        hour1WindDirection = @"NW";
    } else if (326.25 < Degrees && Degrees < 348.75) {
        hour1WindDirection = @"NNW";
    } else {
        hour1WindDirection = nil;
    }
    return hour1WindDirection;
} 
```

并通过此方法键入：

```
 NSString *hour1WindDirection = [self windDirectionFromDegrees:hour1WindD]; //hour1WindD is a integer! 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-04T16:58:10.717

我会这样做：

```
static NSString *windDirectionForDegrees(double degrees) {
    static NSString *const Directions[] = {
        @"N", @"NNE",  @"NE", @"ENE", @"E", @"ESE", @"SE", @"SSE",
        @"S", @"SSW", @"SW", @"WSW", @"W", @"WNW", @"NW", @"NNW"
    };
    static const int DirectionsCount = sizeof Directions / sizeof *Directions;

    int wind = remainder(round((degrees / 360) * DirectionsCount), DirectionsCount);
    if (wind < 0) wind += DirectionsCount;
    return Directions[wind];
} 
```

如果您决定只需要[主风](http://en.wikipedia.org/wiki/Boxing_the_compass)（S、NE、E、SE、S、SW、W 和 NW），则可以删除三个字母的方向，而无需更改函数的任何其他部分。

同样，如果您决定要[全部 32 个风](http://en.wikipedia.org/wiki/Boxing_the_compass)，则可以插入四分之一风（NbE、NEbE 等），而无需更改函数的任何其他部分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-25T14:14:07.137

这是 Swift 4 的示例

```
if 348.75 <= degrees, degrees <= 360 {
  windDirection = "N"
} else if 0 <= degrees,degrees <= 11.25 {
  windDirection = "N"
} else if 11.25 < degrees, degrees <= 33.75 {
  windDirection = "NNE"
} else if 33.75 < degrees, degrees <= 56.25 {
  windDirection = "NE"
} else if 56.25 < degrees, degrees <= 78.75 {
  windDirection = "ENE"
} else if 78.75 < degrees, degrees <= 101.25 {
  windDirection = "E"
} else if 101.25 < degrees, degrees <= 123.75 {
  windDirection = "ESE"
} else if 123.75 < degrees, degrees <= 146.25 {
  windDirection = "SE"
} else if 146.25 < degrees, degrees <= 168.75 {
  windDirection = "SSE"
} else if 168.75 < degrees, degrees <= 191.25 {
  windDirection = "S"
} else if 191.25 < degrees, degrees <= 213.75 {
  windDirection = "SSW"
} else if 213.75 < degrees, degrees <= 236.25 {
  windDirection = "SW"
} else if 236.25 < degrees, degrees <= 258.75 {
  windDirection = "WSW"
} else if 258.75 < degrees, degrees <= 281.25 {
  windDirection = "W"
} else if 281.25 < degrees, degrees <= 303.75 {
  windDirection = "WNW"
} else if 303.75 < degrees, degrees <= 326.25 {
  windDirection = "NW"
} else if 326.25 < degrees, degrees < 348.75 {
  windDirection = "NNW"
} 
```

# dependency-injection - SimpleInjector 和 System.Web.Mvc.Async 线程

> ID：13220373
> 
> 赞同：1
> 
> 时间：2012-11-04T16:21:09.823
> 
> 标签：dependency-injection, inversion-of-control, simple-injector

我在这里[问了一个问题](https://stackoverflow.com/questions/13147509/simpleinjector-mixed-lifestyle-for-per-thread-and-per-webrequest)，我读了这个关于多线程的问题/答案，我知道这些解决方案。但是今天我遇到了一个新问题。当我们使用命令（或者我们可以访问原始代码来管理和修改它的地方）时，上面答案中建议的 async-decorator 工作。但是当 MVC 自己创建一个新线程时，我们能做什么呢？例如，我有一个自定义角色提供者（与 一起使用`DbContext`），我收到此错误：

> 操作无法完成，因为 DbContext 已被释放。

这是堆栈跟踪：

> [InvalidOperationException：操作无法完成，因为 DbContext 已被释放。]
> 
> System.Data.Entity.Internal.InternalContext.CheckContextNotDisposed() +67
> 
> System.Data.Entity.Internal.LazyInternalContext.InitializeContext() +34
> 
> System.Data.Entity.Internal.Linq.DbQueryProvider.Execute（表达式表达式）+22
> 
> System.Linq.Queryable.Any(IQueryable `1 source, Expression`1 谓词) +265
> 
> ***MyProject.MyRoleProvider.IsUserInRole(String username, String roleName) in ...***
> 
> System.Web.Security.Roles.IsUserInRole（字符串用户名，字符串角色名称）+263
> 
> MyProject.MyPrincipal.IsInRole（字符串角色）在...
> 
> System.Linq.Enumerable.Any（IEnumerable `1 source, Func`2 谓词）+146
> 
> System.Web.Mvc.AuthorizeAttribute.AuthorizeCore(HttpContextBase httpContext) +200
> 
> System.Web.Mvc.AuthorizeAttribute.OnAuthorization(AuthorizationContext filterContext) +159
> 
> System.Web.Mvc.ControllerActionInvoker.InvokeAuthorizationFilters（ControllerContext controllerContext，IList`1过滤器，ActionDescriptor actionDescriptor）+96
> 
> System.Web.Mvc.Async。***<>c__DisplayClass25.b__1e*** (AsyncCallback asyncCallback, Object asyncState) +446
> 
> System.Web.Mvc.Async。***WrappedAsyncResult`1.Begin***（AsyncCallback 回调，对象状态，Int32 超时）+130
> 
> System.Web.Mvc.Async。***AsyncControllerActionInvoker.BeginInvokeAction*** (ControllerContext controllerContext, String actionName, AsyncCallback callback, Object state) +302
> 
> 系统.Web.Mvc。***<>c__DisplayClass1d.b__17*** (AsyncCallback asyncCallback, Object asyncState) +30
> 
> System.Web.Mvc.Async。***WrappedAsyncResult`1.Begin***（AsyncCallback 回调，对象状态，Int32 超时）+130
> 
> 系统.Web.Mvc。***Controller.BeginExecuteCore***（AsyncCallback 回调，对象状态）+382
> 
> System.Web.Mvc.Async。***WrappedAsyncResult`1.Begin***（AsyncCallback 回调，对象状态，Int32 超时）+130
> 
> 系统.Web.Mvc。***Controller.BeginExecute***（RequestContext requestContext，AsyncCallback 回调，对象状态）+317
> 
> System.Web.Mvc.Controller.System.Web.Mvc.Async。***IAsyncController.BeginExecute***（RequestContext requestContext，AsyncCallback 回调，对象状态）+15
> 
> 系统.Web.Mvc。***<>c__DisplayClass8.b__2*** (AsyncCallback asyncCallback, Object asyncState) +71
> 
> System.Web.Mvc.Async。***WrappedAsyncResult`1.Begin***（AsyncCallback 回调，对象状态，Int32 超时）+130
> 
> 系统.Web.Mvc。***MvcHandler.BeginProcessRequest***（HttpContextBase httpContext，AsyncCallback 回调，对象状态）+249
> 
> 系统.Web.Mvc。***MvcHandler.BeginProcessRequest*** (HttpContext httpContext, AsyncCallback 回调, 对象状态) +50
> 
> System.Web.Mvc.MvcHandler.System.Web。***IHttpAsyncHandler.BeginProcessRequest***（HttpContext上下文，AsyncCallback cb，对象extraData）+16
> 
> System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +301
> 
> System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +155

如您所见，`MyProject.MyRoleProvider.IsUserInRole`异步调用，我没有启动它，它由 MVC 本身调用异步。所以我对此没有任何控制权。我的提供者 ctor 是：

公共 MyRoleProvider() { _context = MyIoCWrapper.GetService(); }

好像`MyRoleProvider`实例化`HttpContext`的时候不为null，`IsInRole`调用的时候好像`HttpContext`为null。如果我想开始一个新的生命范围，它只会被使用一次，如果 MVC 开始一个新线程，我也会有一个新的`DbContext`。我很困惑找不到解决方案。你有吗？如何为所有后台线程开始一个新的生命范围 - 我启动它们还是 MVC 启动它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T18:28:51.830

您的问题实际上与异步运行控制器无关，而是控制对象生命周期的一般问题。

您可能`MyRoleProvider`在应用程序的 web.config 中注册了您的，或者可能通过代码注册了它。无论哪种方式，`MyRoleProvider`都是一个单例，在应用程序的生命周期中只有该类的一个实例。

然而，这`MyRoleProvider`取决于`DbContext`生活方式较短（在您的情况下为每个 Web 请求或混合），这意味着您不能`DbContext`在您的生命周期内缓存它`MyRoleProver`，因为这会将其生活方式“提升”`DbContext`为单身好。该`_context = MyIoCWrapper.GetService();`行似乎表明您正在缓存该`DbContext`.

在这种情况下，您必须`DbContext`在每个方法调用上解析实例。因此，您`IsUserInRole`将看起来像这样：

```
public bool IsUserInRole(String username, String roleName)
{
    var context = MyIoCWrapper.GetService();
    return context.Roles
        .Any(r => r.Name == roleName && r.User.Name == username);
} 
```

# php - 在 Symfony 1.4 中从教义构建内部连接

> ID：13220374
> 
> 赞同：0
> 
> 时间：2012-11-04T16:21:13.630
> 
> 标签：php, doctrine, symfony-1.4

我有一个这样定义的 schema.yml 文件：

```
email:
  actAs: { Timestampable: ~ }
  columns:
    id: { type: integer, notnull: true, unique: true, primary: true }
    correo: { type: string(255), notnull: true }
    nombre: { type: string(255), notnull: true }
    apellido: { type: string(255), notnull: true }

lista:
  actAs: { Timestampable: ~ }
  columns:  
    id: { type: integer, notnull: true, unique: true, primary: true }
    nombre: { type: string(255), notnull: true }
    descripcion: { type: string(255), notnull: false }

email_lista:
  actAs: { Timestampable: ~ }
  columns:
    email_id: { type: integer }
    lista_id: { type: integer }
  relations:
    email: { onDelete: CASCADE, local: email_id, foreign: id, foreignAlias: emailrelation }
    lista: { onDelete: CASCADE, local: lista_id, foreign: id, foreignAlias: listarelation } 
```

然后，我尝试从*电子邮件*模型中获取所有不属于 lista 且 lista_id 等于 1 的记录。

这是 emailTable.php 类的方法：

```
 public function getEmailsNotBlacklist()
    {
   $q = $this->createQuery('c')        
       ->leftJoin('c.email_lista m')
       ->Where('m.lista_id != ?',1);
       ->orderBy('m.lista_id ASC');       

   return $q->execute();
     } 
```

结果是一个错误：

![错误](../Images/454e8453f917b59ef6bf8b3a19b7c7b1.png)

这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T17:19:16.067

这是不会出现错误的代码：

```
 public function getEmailsNotBlacklist()
       {
    $q = Doctrine_Query::create()        
       ->from('email sr')
       ->innerJoin('sr.emailrelation m' )
       ->Where('m.lista_id <> ?',1);
       //->orderBy('m.lista_id ASC');        

  return $q->execute();
} 
```

我错了，foreignAlias 是要在连接中引用的，而不是模型的名称。

# image - 为什么 PPM6 文件比 PPM3 文件小？

> ID：13220380
> 
> 赞同：0
> 
> 时间：2012-11-04T16:21:42.767
> 
> 标签：image, graphics, ppm, image-formats

也许这是一个奇怪的问题，但我有点困惑为什么 PPM6 小于 PPM3。根据[wiki](http://en.wikipedia.org/wiki/Netpbm_format)，在 PPM3 中，每个像素表示为 3 个字节

```
P3
# The P3 means colors are in ASCII, then 3 columns and 2 rows,
# then 255 for max color, then RGB triplets
3 2
255
255   0   0     0 255   0     0   0 255
255 255   0   255 255 255     0   0   0 
```

他们进一步说，同一图像的 P6 二进制格式用一个字节表示每个像素的每个颜色分量（因此**每个像素三个字节**）。该文件较小，但人类无法读取颜色信息。

如果在这两种情况下每个像素都用 3 个字节表示，我不明白为什么 P6 更小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T10:34:30.690

不要将源数据与实际写入文件的数据混淆。

PPM3 不是由每个像素 3 个字节表示的。好吧，不是存储形式。您将它们存储为文本文件。存储为文本的 3 位数字（例如 255）是 3 个字节（每个字符一个字节）。不是 1\. 我什至不关心那里的空白。

PPM6 以二进制形式存储，每个像素确实有 3 个字节。因此它总是更小。

# php - MySql 到 PHP 到 XML RSS 提要 - 省略号字符

> ID：13220382
> 
> 赞同：1
> 
> 时间：2012-11-04T16:21:52.163
> 
> 标签：php, mysql, xml

我正在使用 PHP 和 MySQL 生成一个 RSS 提要，并且我遇到了一个问题，即我的数据库中的“详细信息”字段（与获取的任何其他字段相比，包含更多的文本和更多的特殊字符）存在问题。我已经搜索并更改了很多东西，包括以 UTF-8 字符编码获取 dB 和输出到 XML 匹配。

但是，我可以看到我的提要中有一两个项目没有获取“详细信息”文本。这是提要：[http ://www.laystar.co.uk/feeds/rssmagazine.php](http://www.laystar.co.uk/feeds/rssmagazine.php)

向下滚动到 Crazy Drivers，您可以看到 Description 字段只有有限的细节（不包括 dB 中的单词）。

当用户上传文章时，他们会为他们的文章添加一个简介。这是正在获取的简介。但是，在它们可能输入三个点/句点“...”以形成省略号的情况下，我可以看到在 dB 中，点被转换/转换为一个省略号字符（我的 PHP 除了带斜杠之外没有做任何事情）。如果我删除了 dB 中的省略号字符，那么一切都很好，并且 XML 输出正确 - 如文章中的约克郡一瞥，该文章一直有效，直到我删除了省略号字符。

这让我现在发疯了，所以任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T17:42:59.323

您不能在 xml 文件中使用省略号的原因很可能是您的 xml 编码和省略号编码不匹配。

您的数据库表上的编码是什么？确保将其设置为使用 utf-8。

更多信息：[http ://www.w3schools.com/XML/xml_encoding.asp](http://www.w3schools.com/XML/xml_encoding.asp)

# nhibernate - Fluent nHibernate - 查询缓存不适用于“session.Query”和 Cacheable()

> ID：13220385
> 
> 赞同：2
> 
> 时间：2012-11-04T16:22:29.383
> 
> 标签：nhibernate, caching, fluent

没有得到任何 QueryCacheHitCount。源代码看起来像：nHibernate 3.3.1.4000，FluentnHibernate 1.3.0.733

配置：

```
Factory = Fluently.Configure()
    .ExposeConfiguration(c =>
        c.SetProperty(NHibernate.Cfg.Environment.GenerateStatistics, "true"))
    .Database(
    MsSqlConfiguration.MsSql2008.ConnectionString(c => c.Is("DATA SOURCE=localhost;PERSIST SECURITY INFO=True;USER ID=AAA;Password=AAA"))
            .ShowSql()
    )
    .Mappings(x => x.FluentMappings.AddFromAssemblyOf<Localization.NHibernate.Article>())
    .ExposeConfiguration(BuildDatabase)
    .Cache(
        x => x.UseSecondLevelCache()
                .UseQueryCache()                         
                .ProviderClass<NHibernate.Cache.HashtableCacheProvider>())
    .BuildSessionFactory(); 
```

执行：

```
using (var tx = session.BeginTransaction())
{
    Factory.Statistics.Clear();

    for (int i = 0; i < 10; i++)
    {
        Article s = session.Query<Article>().Cacheable().Where(x => x.Name == "O").SingleOrDefault();
    }

    Console.WriteLine(Factory.Statistics.QueryCacheHitCount);
    Console.WriteLine(Factory.Statistics.SecondLevelCacheHitCount);
    Console.WriteLine(Factory.Statistics.QueryExecutionCount);
} 
```

* * *

仅当我更改缓存配置并添加我的私有时才`QueryCacheFactory`有效`.QueryCacheFactory<CacheFactory>()`（但我忽略了`IsUpToDate`检查）

```
public class CacheFactory : NHibernate.Cache.IQueryCacheFactory
{
    public NHibernate.Cache.IQueryCache GetQueryCache(string regionName, NHibernate.Cache.UpdateTimestampsCache updateTimestampsCache, Settings settings, IDictionary<string, string> props)
    {
        return new MyStandardQueryCache(settings, props, updateTimestampsCache, regionName);
    }

    private class MyStandardQueryCache : NHibernate.Cache.StandardQueryCache
    {
        public MyStandardQueryCache(Settings settings, IDictionary<string, string> props, NHibernate.Cache.UpdateTimestampsCache updateTimestampsCache, string regionName)
            : base(settings, props, updateTimestampsCache, regionName) { }

        protected override bool IsUpToDate(Iesi.Collections.Generic.ISet<string> spaces, long timestamp)
        {
            return true; // SET TO TRUE than it's hitting the cache
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:11:31.647

我有一个类似的问题，据我记得，查询的结果是使用会话或事务的创建时间缓存的。尝试对第一个查询使用一个会话，并为以下查询使用不同的会话，这样做您应该会收到缓存命中。

# sql - SQL DB 中调度应用程序的表结构

> ID：13220386
> 
> 赞同：5
> 
> 时间：2012-11-04T16:22:35.260
> 
> 标签：sql, database-design, calendar, relational-database, database-schema

我正在开发一个数据库来保存待命时间表的信息。目前我有一个看起来像这样的结构：

```
Table - Person: (key)ID, LName, FName, Phone, Email
Table - PersonTeam: (from Person)ID, (from Team)ID
Table - Team: (key)ID, TeamName
Table - Calendar: (key dateTime)dt, year, month, day, etc...
Table - Schedule: (from Calendar)dt, (id of Person)OnCall_NY, (id of Person)OnCall_MA, (id of Person)OnCall_CA 
```

我的问题是：对于**Schedule**表，我应该*将其*保持原样，其中 dt 是唯一键，还是应该*重新排列它*以使 dt 不唯一并且表如下所示：

```
Table - Schedule: (from Calendar)dt, (from Team)ID, (from Person)ID 
```

并且每天有多个条目，**或者**只使用：

```
Table - Schedule: (from Calendar)dt, (from PersonTeam)KeyID - [make a key ID on each of the person/team pairings] 
```

一个团队总是会有人随叫随到，但一个人一次可以为多个团队随叫随到（如果他们在多个团队中）。

如果完全不同的设置会更好，请告诉我！

谢谢你的帮助！如果我的问题不清楚，我深表歉意。我学得很快，但每天使用 SQL 还是相当新的，所以我想确保我在学习时使用最佳实践，这样我就不会养成坏习惯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T17:49:35.843

*   当前版本，每个团队一栏，可能不是一个好主意。由于您将团队表示为表格（而不是枚举或等效项），这意味着您希望随着时间的推移添加/删除团队。这将迫使您向表中添加/删除列，这总是比添加/删除几行更大的任务。

*   第二个选项是此类问题的通常解决方案。一个安全的选择。您始终可以从 Schedule(teamID, personID) 到 PersonTeam 定义一个额外的外键约束，以确保您不会错误地将计划职责分配给不属于团队的人员。

*   第 3 个选项几乎等同于第 2 个选项，只是您将 PersonTeam 的复合自然键交换为代理简单键。由于所述复合键的两个组件已经是代理项，因此添加这个额外的组件没有任何优势（在不变性等方面）。此外，它会将大多数数据库管理器/ORM 可以很好地处理的非常简单的 NM 关系（PersonTeam）变成一个需要自行管理的更复杂的对象。

根据奥卡姆剃刀，我会取消额外的代理键并使用您的第二个选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T17:34:40.063

在我看来，答案可能取决于团队的数量是否固定*且*相当少。当然，团队的*名称*是否固定也可能很重要，但这可能更多地与列命名有关。

更具体地说，我的观点是：

如果业务需求是始终有少量且固定数量的人员（例如三个）待命，那么在 中分配三列可能会更方便`Schedule`，每个团队一个用于保存指定人员的 ID，即就像你现在的结构：

```
dt   OnCall_NY  OnCall_MA  OnCall_CA
---  ---------  ---------  --------- 
```

以`dt`作为主键。

如果团队的数量（在`Team`表格中）也是固定的，您可以像现在一样在列名称中包含团队的名称/代号，但如果团队的数量超过三个并且它只是团队的*数量`Schedule`*仅限于三个，那么您可以只使用`OnCallID1`, `OnCallID2`,之类的名称`OnCallID3`。

但即使这个要求是固定的，它也可能只是在*今天*得到固定，明天你的老板说，“我们不再与固定数量的团队合作（待命）”，或者“我们需要扩大支持的团队数量到四个，我们将来可能需要进一步扩展”。因此，一种更通用的方法是您正在考虑在您的问题中切换到的方法，即

```
dt   Team  Person
---  ----  ------ 
```

主键现在在哪里`dt, Team`。

这样，您可以轻松地扩展/减少数据库级别的待命人数，而无需更改架构中的任何内容。

* * *

**更新**

我忘记在我的原始答案中解决您的第三个选项（对不起）。开始。

您的第一个选项（目前实际实施的选项）似乎暗示每个团队只能由（不超过）一个人呈现。如果您将代理 ID 分配给 Person/Team 对并使用这些键`Schedule`而不是单独的 ID 用于`Person`and `Team`，您可能无法强制执行提到的“计划中每个团队一个人”要求（或者，至少，这可能证明有点麻烦）在数据库级别，而使用单独的键，设置`Team`为复合键的一部分就足够了`(dt, Team)`，你就完成了，现在每天不超过一个团队。

此外，如果一个人在团队中的存在以这种方式固定，即参考个人/团队对，您可能难以让一个人随着时间的推移*改变团队。*`Schedule`您可能必须更改`PersonTeam`表中的团队参考，这会导致历史信息的错误陈述：查看某天回电的人员时，显示的人员的团队将是他们*现在*所属的团队，而不是那个团队他们当时做到了。

另一方面，在 中为人员和团队使用单独的 ID `Schedule`，可以让人们自由地更改团队，当然*前提*是您**不**`(Schedule.Team, Schedule.Person)`引用`(PersonTeam.Team, PersonTeam.Person)`。

# c# - 绑定到 Objective C 库（VFR 阅读器）

> ID：13220389
> 
> 赞同：1
> 
> 时间：2012-11-04T16:22:41.237
> 
> 标签：c#, objective-c, xamarin.ios, monodevelop

我是 MonoTouch 开发的新手，我想在我的应用程序中嵌入一些 PDF 查看功能。我已经找到了一些资源来做到这一点，但是，我也看到了关于所有其他实现的足够多的评论，以使其稳定和快速。

我现在看到有一个很好的 ObjectiveC 库，它已经实现了很多功能（CATiledLayer、多线程、页面滚动、缩略图、设备旋转......）：[https ://github.com/vfr/Reader](https://github.com/vfr/Reader)

最近几天，在阅读了 monotoch 绑定文档后，我试图在 MonoTouch 中绑定它，但没有成功。我能够将其导出到库 (.a) 文件中，并且创建了绑定 API。

```
 //@interface ReaderDocument : NSObject <NSObject, NSCoding>
    [BaseType (typeof (NSObject))]
    interface ReaderDocument {

    //- (id)initWithFilePath:(NSString *)fullFilePath password:(NSString *)phrase;
    [Export("initWithFilePath:password")]
    IntPtr Constructor (string path, string phrase);

    //Properties
    [Export("guid")]
    string Guid { get;}

    [Export("fileDate")]
    NSDate FileDate { get;}

    [Export("lastOpen")]
    NSDate LastOpen { get;set;}

    [Export("fileSize")]
    NSNumber FileSize{ get;}

    [Export("pageCount")]
    NSNumber PageCount { get;}

    [Export("pageNumber")]
    NSNumber PageNumber { get;set;}

    [Export("bookmarks")]
    NSMutableIndexSet Bookmarks { get;}

    [Export("fileName")]
    string FileName { get;}

    [Export("password")]
    string Password { get;}

    [Export("fileURL")]
    NSUrl FileURL { get;}

    //Methods

    //+ (ReaderDocument *)withDocumentFilePath:(NSString *)filename password:(NSString *)phrase;
    [Static, Export("withDocumentFilePath:password")]
    ReaderDocument WithDocumentFilePath(string filename, string phrase);

    //+ (ReaderDocument *)unarchiveFromFileName:(NSString *)filename password:(NSString *)phrase;
    [Static, Export("unarchiveFromFileName:password")]
    ReaderDocument UnarchiveFromFileName(string filename, string phrase);

    //- (void)saveReaderDocument;
    [Export("saveReaderDocument")]
    void SaveReaderDocument();

    //- (void)updateProperties;
    [Export("updateProperties")]
    void updateProperties();
} 
```

我非常不确定以下行顺便说一句：

```
//@interface ReaderDocument : NSObject <NSObject, NSCoding>
    [BaseType (typeof (NSObject))]
    interface ReaderDocument 
```

不确定我是否必须对“”做点什么？

我现在可以在 MonoTouch 中创建以下代码

```
ReaderDocument doc =  ReaderDocument.withDocumentFilePath("Tamarin.pdf",""); 
```

或者

```
ReaderDocument doc = new ReaderDocument("Tamarin.pdf","yrt"); 
```

两者都导致“无法识别的选择器”错误

```
 2012-11-04 22:15:05.731 PFDTest1[4149:1507] +[ReaderDocument withDocumentFilePath:password]: unrecognized selector sent to class 0x2f7738

[ERROR] FATAL UNHANDLED EXCEPTION: MonoTouch.Foundation.MonoTouchException: Objective-C     exception thrown.  Name: NSInvalidArgumentException Reason: +[ReaderDocument   withDocumentFilePath:password]: unrecognized selector sent to class 0x2f7738
at (wrapper managed-to-native)   MonoTouch.ObjCRuntime.Messaging:IntPtr_objc_msgSend_IntPtr_IntPtr   (intptr,intptr,intptr,intptr)
at VFRBinding4.ReaderDocument.withDocumentFilePath (System.String filename,  System.String phrase) [0x00000] in <filename unknown>:0 
at PFDTest1.AppDelegate.FinishedLaunching (MonoTouch.UIKit.UIApplication app, MonoTouch.Foundation.NSDictionary options) [0x00030] in /Users/matthiasvalcke/Projects/PFDTest1/PFDTest1/AppDelegate.cs:39 
at (wrapper managed-to-native) MonoTouch.UIKit.UIApplication:UIApplicationMain (int,string[],intptr,intptr)
at MonoTouch.UIKit.UIApplication.Main (System.String[] args, System.String principalClassName, System.String delegateClassName) [0x0004c] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:38 
at PFDTest1.Application.Main (System.String[] args) [0x00000] in  /Users/matthiasvalcke/Projects/PFDTest1/PFDTest1/Main.cs:17 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T16:27:57.150

可能还有其他问题，但构造函数的绑定是错误的，即

```
//- (id)initWithFilePath:(NSString *)fullFilePath password:(NSString *)phrase;
[Export("initWithFilePath:password")]
void InitWithFilePath(string path, string password); 
```

ObjectiveC`init*`选择器应该绑定为 C# 构造函数。例如

```
[Export("initWithFilePath:password")]
IntPtr Constructor (string path, string password); 
```

这应该是你用来创建实例的东西，例如

```
ReaderDocument doc = new ReaderDocument ("sample.pdf", "");
// ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T13:49:04.977

我可能完全错了，但我认为你的选择器是错误的：

例如“withDocumentFilePath:password”应该是“withDocumentFilePath:password:”

# xpages - XPage 中的多个数据源

> ID：13220390
> 
> 赞同：0
> 
> 时间：2012-11-04T16:22:48.967
> 
> 标签：xpages

我有 2 个交互页面。第一个用作主页，允许用户创建一个新文档并填写一些基本的标题信息。创建新文档的按钮，`sessionScope`使用`NoteID`. 然后它保存 document1 并使用另一个 xpage 打开同一个文档。

第二个 xpages 绑定到 document1，并使用`sessionScope`来编辑文档。此 xpages 包含和 editPanel 绑定到 document2。我想为 document2 创建一个子文档。这可行，但会发生 document1 也保存为冲突。它也被保存为第二个主文档。

我根本不想保存 document1，但似乎无法阻止它。创建 document2 的按钮使用简单动作保存文档，并指定 document2。

帮助，我已经尝试了一切，并且已经坚持了 2 天。

谢谢！史蒂夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T16:34:12.303

要绑定到多个数据源，请在 XPage 上的 Properties 下展开 Data 并将“Ignore Request Params”设置为 TRUE

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T16:41:05.507

如果您将按钮的类型更改为简单按钮而不是提交按钮，并`doc.save()`自己处理应该可以解决您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T12:52:21.950

保存文档简单操作接受要保存为字符串参数的数据源名称。如果提供，它将仅保存该特定数据源。

# regex - 如何获得模式的第一个匹配项？

> ID：13220394
> 
> 赞同：1
> 
> 时间：2012-11-04T16:23:17.953
> 
> 标签：regex, perl

如何从下面的字符串中获取 c999752_ABC_PAT？

```
$file = q(M:\c999752_ABC_PAT\Informatica_AVOB\ABC_infa\dummy\TestDeliver.txt); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T16:26:18.360

你可以使用这个正则表达式

```
^.*?\\(.*?)\\.*$
|   |   |     |->matches till the end
|   |   |->your content matched till the first occurance of \
|   |->match lazily till the first \
|->start of the text 
```

`Group1`捕获您的数据

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T16:30:45.723

Or use what Eammon suggested:

```
my $firstPart = ( split /\\/, $file )[1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T18:22:23.393

```
use File::Spec::Win32;

my $file = q(M:\c999752_ABC_PAT\Informatica_AVOB\ABC_infa\dummy\TestDeliver.txt);
my ($volume, $directories) = File::Spec::Win32->splitpath($file);
my @directories = File::Spec::Win32->splitdir($directories);

print $directories[1], "\n"; 
```

# r - 如何使用长格式的 R 数据帧的子集进行操作？

> ID：13220395
> 
> 赞同：5
> 
> 时间：2012-11-04T16:23:19.893
> 
> 标签：r, dataframe, data.table, plyr

我有一个包含 3 组和 3 天的数据框：

```
set.seed(10)
dat <- data.frame(group=rep(c("g1","g2","g3"),each=3), day=rep(c(0,2,4),3), value=runif(9))
#   group day    value
# 1    g1   0 0.507478
# 2    g1   2 0.306769
# 3    g1   4 0.426908
# 4    g2   0 0.693102
# 5    g2   2 0.085136
# 6    g2   4 0.225437
# 7    g3   0 0.274531
# 8    g3   2 0.272305
# 9    g3   4 0.615829 
```

我想取 log2 并将每个值除以每组中的第 0 天值。我现在这样做的方式是在中间步骤中计算每一天的组：

```
day_0 <- dat[dat$day==0, "value"]
day_2 <- dat[dat$day==2, "value"]
day_4 <- dat[dat$day==4, "value"]
res <- cbind(0, log2(day_2/day_0), log2(day_4/day_0))
rownames(res) <- c("g1","g2","g3")
colnames(res) <- c("day_0","log_ratio_day_2_day_0","log_ratio_day_4_day_0")
#    day_0 log_ratio_day_2_day_0 log_ratio_day_4_day_0
# g1     0            -0.7261955             -0.249422
# g2     0            -3.0252272             -1.620346
# g3     0            -0.0117427              1.165564 
```

`res`没有中间步骤的正确计算方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T22:34:26.290

`data.table`编码优雅和内存效率的解决方案

```
library(data.table)

DT <- data.table(dat)

# assign within DT by reference

DT[, new_value := log2(value / value[day == 0]), by = group] 
```

或者你可以使用`joins`and `keys`and`by-without-by`

```
DTb <- data.table(dat)

setkey(DTb, group)

# val0 contains just those records for day 0
val0 <- DTb[day==0]

 # the i.value refers to value from the i argument 
 # which is in this case `val0` and thus the value for 
 # day = 0 
 DTb[val0, value := log2(value / i.value)] 
```

这两种解决方案*都不*需要您进行排序 `day`以确保`value`将是第一个（或任何特定）元素。

* * *

# 编辑

`i.`语法文档

> ```
>  **********************************************
>     **                                          **
>     **   CHANGES IN DATA.TABLE VERSION 1.7.10   **
>     **                                          **
>     **********************************************
>      NEW FEATURES
> 
> o   New function setcolorder() reorders the columns by name
>     or by number, by reference with no copy. This is (almost)
>     infinitely faster than DT[,neworder,with=FALSE].
>     
> o   The prefix i. can now be used in j to refer to join inherited
>     columns of i that are otherwise masked by columns in x with
>     the same name. 
> ```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-04T16:32:29.483

您的朋友`ddply`来自`plyr`包裹：

```
require(plyr)
> ddply(dat, .(group), mutate, new_value = log2(value / value[1]))
  group day      value   new_value
1    g1   0 0.50747820  0.00000000
2    g1   2 0.30676851 -0.72619548
3    g1   4 0.42690767 -0.24942179
4    g2   0 0.69310208  0.00000000
5    g2   2 0.08513597 -3.02522716
6    g2   4 0.22543662 -1.62034599
7    g3   0 0.27453052  0.00000000
8    g3   2 0.27230507 -0.01174274
9    g3   4 0.61582931  1.16556397 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-04T20:57:26.267

基础解决方案：

```
> res <- do.call(rbind,by(dat,dat$group,function(x) log2(x$value/x$value[x$day==0])))
> res

   [,1]       [,2]       [,3]
g1    0 -1.6496538 -2.3673937
g2    0  0.3549090  0.4537402
g3    0 -0.9423506  1.4603706

> colnames(res) <- c("day_0","log_ratio_day_2_day_0","log_ratio_day_4_day_0")
> res

   day_0 log_ratio_day_2_day_0 log_ratio_day_4_day_0
g1     0            -1.6496538            -2.3673937
g2     0             0.3549090             0.4537402
g3     0            -0.9423506             1.4603706 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T12:42:10.843

这`ave`在 R 的核心中使用：

```
transform(dat, value0 = ave(value, group, FUN = function(x) log2(x / x[1]))) 
```

# wpf - 无法发布，因为项目无法构建并且找不到文件 'obj\x86\Debug\MyApplication.exe' 错误

> ID：13220396
> 
> 赞同：1
> 
> 时间：2012-11-04T16:23:21.307
> 
> 标签：wpf, visual-studio-2010, deployment, clickonce

我正在努力寻找问题的根源，但没有运气。在发布项目时，我确实检查了几乎所有解决此问题的建议（使用右键单击发布，检查了 DevExpress 未安装）。

-关于 DevExpress 应用程序有一些它的程序集。
**- 无法发布，因为项目失败
- 找不到文件 'obj\x86\Debug\MyApplication.exe'**

我确实将发布诊断发送到了输出并得到了这个：

```
Task "GenerateApplicationManifest" (TaskId:158)
C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(2580,9): error MSB3113: Could not find file 'obj\x86\Debug\MyApplication.exe'.
Done executing task "GenerateApplicationManifest" -- FAILED. (TaskId:158)
Done building target "GenerateApplicationManifest" in project "MyApplication.csproj" -- FAILED.: (TargetId:194) 
```

有人可以列出我必须检查以解决此问题的所有内容吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:28:44.070

我今天刚遇到这个问题。在我的特殊情况下，它是由这个[Microsoft Windows Update](http://technet.microsoft.com/en-us/security/advisory/2661254)引起的。

我卸载了该更新并发布开始像往常一样工作。这只是一个临时解决方法，意味着您可能应该重新生成您的密钥/证书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-20T06:01:59.640

1.  右键单击您的**项目**
2.  点击**发布**
3.  转到**设置**选项卡
4.  单击**文件发布选项**
5.  检查选项卡中的所有选项（如附图所示）

[![在此处输入图像描述](../Images/82b6a9102856fe52de0f9b171b53f85c.png)](https://i.stack.imgur.com/COfyE.png)

# java - 没有 Spring MVC 的自动数据绑定 Java 对象

> ID：13220405
> 
> 赞同：0
> 
> 时间：2012-11-04T16:24:32.557
> 
> 标签：java, data-binding, spring-mvc

我正在开发一个 Java web 项目，而不是应用 Spring MVC，Spring web-flow （因为它很简单）。将值从 HTTP 请求附加到 Java 对象时，我遇到了一个小问题。是否有任何独立的库或实用程序支持我们在不使用 Spring 的情况下自动将来自客户端请求的数据绑定到服务器对象（由属性名称匹配）？假设客户端请求中的参数已经构建到地图中。
当我使用 Grails（Groovy 的一个 Web 框架）时，它有一种非常棒的方法来使用：将请求参数中的数据填充到对象`object.properties=parameters`，但我不知道在 Java 中，我们是否有类似的机制来实现它？
非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T16:51:17.467

Apache Commons 可能对[BeanUtilsBean](http://commons.apache.org/beanutils/apidocs/org/apache/commons/beanutils/BeanUtilsBean.html)有所帮助。它有很酷的方法，例如`getProperty()`and `setProperty()`，如果您想尝试使用反射手动编写代码，这可能会有所帮助。还有`populate(Object bean, Map properties)`一种方法，我相信它最接近你想要的。

[Dozer](http://dozer.sourceforge.net/)是一个 java 库，专门用于将东西从一个结构映射到另一个结构。它可能会有所帮助。

[这个人](http://www.coderanch.com/t/512508/java/java/Fill-bean-data-HashMap-Reflection)在 coderanch 上发布了一个类似的问题，经过一番讨论，他想出了以下内容：

```
public static <T extends Object> T setFromMap(Class<T> beanClazz, HashMap<String, String> propValues) throws Exception  
{  
    T bean = (T) beanClazz.newInstance();  
    Object obj = new Object();  
    PropertyDescriptor[] pdescriptors = null;  
    BeanInfo beanInfo = Introspector.getBeanInfo(beanClazz);  
    pdescriptors = beanInfo.getPropertyDescriptors();  
    for(int i=0; i<pdescriptors.length; i++)  
    {  
        String descriptorName = pdescriptors[i].getName();  
        if(!(descriptorName.equals("class")))  
        {  
            String propName = descriptorName;  
            String value = (String) propValues.get(propName);  
            if(value != null)  
            {  
                Object[] objArray = new Object[1];  
                objArray[0] = value;  
                Method writeMethod = pdescriptors[i].getWriteMethod();  
                writeMethod.invoke(bean, objArray);  
            }  
        }  
    }
    return bean;
} 
```

# regex - Perl 正则表达式替换不适用于全局修饰符

> ID：13220406
> 
> 赞同：0
> 
> 时间：2012-11-04T16:24:40.467
> 
> 标签：regex, perl, cygwin

我的代码如下所示：

```
s/(["\'])(?:\\?+.)*?\1/(my $x = $&) =~ s|^(["\'])(.*src=)([\'"])\/|$1$2$3$1.\\$baseUrl.$1\/|g;$x/ge 
```

忽略最后一点（只留下出现问题的部分），代码变为：

```
s/(["\'])(?:\\?+.)*?\1/replace-text-here/g 
```

我已经尝试使用两者，但我仍然遇到同样的问题，即即使我使用 g 修饰符，这个正则表达式只匹配并替换第一次出现。如果这是一个 Perl 错误，我不知道，但我使用的正则表达式匹配两个引号之间的所有内容，并且还处理转义引号，我正在关注[这篇博文](http://blog.stevenlevithan.com/archives/match-quoted-string)。在我看来，该正则表达式应该匹配两个引号之间的所有内容，然后替换它，然后尝试找到该模式的另一个实例，因为 g 修饰符。

对于一些背景信息，我没有使用和版本声明，并且打开了严格和警告，但没有出现任何警告。我的脚本将整个文件读入一个标量（包括换行符），然后正则表达式直接在该标量上运行。它似乎确实在每一行上单独工作 - 只是不是在一行上多次。Perl 版本 5.14.2，在 Cygwin 64 位上运行。可能是 Cygwin（或 Perl 端口）搞砸了，但我对此表示怀疑。

我还尝试了该博客文章中的另一个示例，将原子组和所有格量词替换为等效代码但没有这些功能，但这个问题仍然困扰着我。

例子：

```
<?php echo ($watched_dir->getExistsFlag())?"":"<span class='ui-icon-alert'><img src='/css/images/warning-icon.png'></span>"?>
Should become (with the shortened regex):
<?php echo ($watched_dir->getExistsFlag())?replace-text-here:replace-text-here?>
Yet it only becomes:
<?php echo ($watched_dir->getExistsFlag())?replace-text-here:"<span class='ui-icon-alert'><img src='/css/images/warning-icon.png'></span>"?>

<?php echo ($sub->getTarget() != "")?"target=\"".$sub->getTarget()."\"":""; ?>
Should become:
<?php echo ($sub->getTarget() != replace-text-here)?replace-text-here.$sub->getTarget().replace-text-here:replace-text-here; ?>
And as above, only the first occurrence is changed. 
```

（是的，我确实意识到这会引发某种 - 不要使用正则表达式来解析 HTML/PHP。但在这种情况下，我认为正则表达式更合适，因为我不是在寻找上下文，我正在寻找对于字符串（引号内的任何内容）并对该字符串执行操作 - 这是正则表达式。）

只是一个注释 - 这些正则表达式在 eval 函数中运行，实际的正则表达式被编码在一个单引号字符串中（这就是单引号被转义的原因）。我将直接尝试任何提出的解决方案，以排除我糟糕的编程。

编辑：根据要求，提出问题的简短脚本：

```
#!/usr/bin/perl -w

use strict;

my $data = "this is the first line, where nothing much happens
but on the second line \"we suddenly have some double quotes\"
and on the third line there are 'single quotes'
but the fourth line has \"double quotes\" AND 'single quotes', but also another \"double quote\"
the fifth line has the interesting one - \"double quoted string 'with embedded singles' AND \\\"escaped doubles\\\"\"
and the sixth is just to say - we need a new line at the end to simulate a properly structured file
";
my $regex = 's/(["\'])(?:\\?+.)*?\1/replaced!/g';
my $regex2 = 's/([\'"]).*?\1/replaced2!/g';

print $data."\n";
$_ = $data; # to make the regex operate on $_, as per the original script
eval($regex);
print $_."\n";
$_ = $data;
eval($regex2);
print $_; # just an example of an eval, but without the fancy possessive quantifiers 
```

这为我产生了以下输出：

```
this is the first line, where nothing much happens
but on the second line "we suddenly have some double quotes"
and on the third line there are 'single quotes'
but the fourth line has "double quotes" AND 'single quotes', but also another "double quote"
the fifth line has the interesting one - "double quoted string 'with embedded singles' AND \"escaped doubles\""
and the sixth is just to say - we need a new line at the end to simulate a properly structured file

this is the first line, where nothing much happens
but on the second line "we suddenly have some double quotes"
and on the third line there are 'single quotes'
but the fourth line has "double quotes" AND 'single quotes', but also another "double quote"
the fifth line has the interesting one - "double quoted string 'with embedded singles' AND \"escaped doubles\replaced!
and the sixth is just to say - we need a new line at the end to simulate a properly structured file

this is the first line, where nothing much happens
but on the second line replaced2!
and on the third line there are replaced2!
but the fourth line has replaced2! AND replaced2!, but also another replaced2!
the fifth line has the interesting one - replaced2!escaped doubles\replaced2!
and the sixth is just to say - we need a new line at the end to simulate a properly structured file 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T18:05:25.570

更新：这个：

```
my $regex = 's/(["\'])(?:\\?+.)*?\1/replaced!/g'; 
```

应该：

```
my $regex = 's/(["\'])(?:\\\\?+.)*?\1/replaced!/g'; 
```

因为作业中的那些单引号变成`\\`了`\`，并且您希望正则表达式以`\\`.

请将您的问题归结为一个演示问题的简短脚本（包括输入、错误输出、评估和所有）。采取你所做的并尝试它：

```
use strict;
use warnings;
my $input = <<'END';
<?php echo ($watched_dir->getExistsFlag())?"":"<span class='ui-icon-alert'><img src='/css/images/warning-icon.png'></span>"?>
END

(my $output = $input) =~ s/(["\'])(?:\\?+.)*?\1/replace-text-here/g;
print $input,"becomes\n",$output; 
```

为我生产：

```
<?php echo ($watched_dir->getExistsFlag())?"":"<span class='ui-icon-alert'><img src='/css/images/warning-icon.png'></span>"?>
becomes
<?php echo ($watched_dir->getExistsFlag())?replace-text-here:replace-text-here?> 
```

正如我所料。它对你有什么作用？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T18:30:01.300

即使在单引号内，也会`\\`被处理为`\`，所以：

```
my $regex = 's/(["\'])(?:\\?+.)*?\1/replaced!/g'; 
```

设置`$regex`为：

```
s/(["'])(?:\?+.)*?\1/replaced!/g 
```

这要求引用字符串中的每个字符前面都有一个或多个文字问号 ( `\?+`)。由于您没有很多问号，这实际上意味着您要求字符串为空，要么`""`要么`''`。

最小的修复是添加更多的反斜杠：

```
my $regex = 's/(["\'])(?:\\\\?+.)*?\\1/replaced!/g'; 
```

但你真的可能想重新考虑你的方法。您真的需要将整个 regex-replacement 命令保存为字符串并通过 运行它`eval`吗？

# java - 如何选择最大连接池大小？

> ID：13220409
> 
> 赞同：3
> 
> 时间：2012-11-04T16:24:59.607
> 
> 标签：java, hibernate, connection-pooling, c3p0

```
<property name="hibernateProperties">
  <props>           
    <prop key="hibernate.c3p0.max_size">?</prop>
  </props>
</property> 
```

这只是一个随机数猜测吗？或者是否有任何研究建议将特定范围用于特定用例？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T03:35:43.517

好吧，假设您正在谈论生产系统，那么“随机数猜测”绝对不是答案。实际上，“随机数猜测”永远不是生产环境中任何类型配置的答案。“只接受产品的默认值”也是如此。

连接池属性（例如`max_size`）取决于几个因素：

*   *预期用途*。例如，如果您期望 10 个并发用户的典型使用模式，偶尔会出现 20 个用户，那么将数字 50 设置为最大大小没有什么意义，即使您认为您的机器可以处理它。虽然乍一看似乎无害，但您必须记住，数据库连接是一种昂贵的资源，有时您可能希望实际限制使用量以符合您的期望，如果只是为了测试您自己的假设并了解真实的，类似生产的系统使用模式，并防止您的应用程序成为资源占用，从而可能影响其他应用程序。

*   *可用资源*。如果您知道（并且很容易验证）您的数据库一次只能接受 30 个连接，那么无论应用程序的使用模式如何，设置大于 30 的数字都是没有意义的。

*   *应用程序设计*。您的应用程序将主要使用短期连接吗？长期连接？您是否为 JDBC 调用设置了超时，因此您的 JDBC 调用一开始是有时间限制的？例如，当您*知道*将每个操作的超时设置为 30 秒时，您将如何配置连接池与知道您将超时设置为 2 分钟时如何定义该池相比，存在差异。

*   *具体产品注意事项*。我不确定`c3p0`，但某些提供连接池机制的容器将它们自己的因素纳入等式。如果您正在使用容器提供的连接池功能，您应该阅读该容器的文档，以了解容器的供应商是否对配置他们提供的连接池机制有一定的了解。

...只是不要猜测一个数字。

...并且不要只假设产品的默认值。

# adb - xubuntu中的adb严重错误

> ID：13220412
> 
> 赞同：1
> 
> 时间：2012-11-04T16:25:14.157
> 
> 标签：adb, xubuntu

好的，我看到这已被问过几次，但似乎都是针对 Windows 的。我正在尝试用我的 xubuntu 机器学习一些 android 开发。但我也不是 linux 专家......在按照教程设置 Eclipse 和 Android SDK-linux 之后，我试图让我的第一个 hello world 运行，我得到了这个：

```
 [2012-11-04 09:42:22 - xdasdka] ------------------------------
[2012-11-04 09:42:22 - xdasdka] Android Launch!
[2012-11-04 09:42:22 - xdasdka] The connection to adb is down, and a severe error has occured.
[2012-11-04 09:42:22 - xdasdka] You must restart adb and Eclipse.
[2012-11-04 09:42:22 - xdasdka] Please ensure that adb is correctly located at '/home/orange/code/android-sdk-linux/platform-tools/adb' and can be executed. 
```

我在列出的路径中有 adb。我也有 cd 到目录和 adb kill-server 但它返回 adb command not found。只是为了确保我也 chmod +x adb 并且它仍然不起作用。

我差点忘了补充我在 64 位机器上。

有任何想法吗？

# graphics - 硬件镶嵌有多重？

> ID：13220417
> 
> 赞同：-1
> 
> 时间：2012-11-04T16:25:35.830
> 
> 标签：graphics, shader, directx-11, tessellation

如果镶嵌比仅使用高多边形模型有好处，那么为什么现代 2012 游戏仍然使用占用大量硬盘空间的巨大模型，而不是全部镶嵌，只是调整镶嵌因子以取决于与相机的距离，创造一个很好的细节水平。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T16:42:31.883

您无法通过最初不存在的镶嵌来恢复细节。这只是意味着这些模型在没有可用的情况下会更大。

> 在其最基本的形式中，镶嵌是一种将多边形分解成更精细部分的方法。例如，如果您取一个正方形并将其沿对角线切割，则您已将该正方形“镶嵌”为两个三角形。就其本身而言，曲面细分对提高真实感几乎没有作用。例如，在游戏中，将一个正方形渲染为两个三角形还是两千个三角形并不重要——只有将新三角形用于描绘新信息时，镶嵌才能提高真实感。
> 
> 当置换贴图（左）应用于平面时，生成的表面（右）表示在置换贴图中编码的高度信息。使用新三角形的最简单和最流行的方法是一种称为置换贴图的技术。置换贴图是存储高度信息的纹理。当应用于表面时，它允许表面上的顶点根据高度信息向上或向下移动。例如，图形艺术家可以取一块大理石并移动顶点以形成雕刻。另一种流行的技术是在地形上应用置换贴图来雕刻陨石坑、峡谷和山峰

[http://www.nvidia.com/object/tessellation.html](http://www.nvidia.com/object/tessellation.html)

![在此处输入图像描述](../Images/ddde0e4bfe6cf99f31dd9e02e396601c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:38:18.467

我认为没有人在游戏中使用硬件镶嵌的原因是，ca。60%的游戏玩家是主机玩家，只要主机不支持shadermodel5，就没有理由做使用硬件镶嵌的游戏。即使他们这样做了，他们也可能不得不在 dx9 和 dx11 中做游戏，因为它的向下兼容性不是很好……但也许还有其他原因！

随着今年新游戏机的推出，HW Tessellation 可能会发生其他变化；）

# ios - 模拟器/设备 UI 与情节提要不同

> ID：13220420
> 
> 赞同：1
> 
> 时间：2012-11-04T16:25:40.057
> 
> 标签：ios, xcode, uiviewcontroller, storyboard, ios-simulator

我正在使用 Xcode 4.5.1 创建一个非常简单的单视图 iPhone 应用程序。正如您在 IB 图像中看到的那样，我已经布置了视图。( `UIViewController`, `UIView`, `UIButton`, `UITextView`)。

当我在模拟器（或我的手机）中运行应用程序时，它看起来像第二个屏幕截图。

我不明白为什么模拟器 UI 看起来不像我在 IB 中创建的那个。

我错过了什么？

谢谢！

![界面构建器](../Images/495be51bc6f19aa20bab22c4c7de06b7.png) ![模拟器](../Images/1568bf408acb2d0f1bd19e2522459527.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-04T16:41:44.327

如果您看起来您在故事板文件中使用 iPhone 5 尺寸布局。在 iPhone 5 布局和标准 iPhone 尺寸之间更改尺寸

单击故事板右下角的图标：

![在此处输入图像描述](../Images/afcb8b1907ec5c9ac22e8e0d2566d854.png)

或者，如果您想在 iPhone 5 模拟器中查看布局。在 iOS 模拟器中，转到硬件 > 设备 > iPhone（视网膜 4 英寸）。这是 iPhone 5 的布局。但是，如果您没有视网膜显示的计算机。iPhone 将看起来像一个非常大的 iPad。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-04T16:30:04.740

看起来你在 Xcode 中有一个 iPhone 5 大小的布局，在模拟器中有一个 iphone 4。检查深灰色与底部视图的约束，并确保它们会调整您想要的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-09T16:29:15.260

嘿，这是另一种方法。

我的问题： 1.我的故事板显示了一个看起来不像 iPhone 的胖矩形。然后，当我运行模拟器时，所有元素都被切断并且不在正确的位置。2.模拟器占据了整个屏幕。

解决方案： 1\. 确保您的 Storyboard 已打开并显示，单击框架使其具有蓝色突出显示的边框。然后在实用程序管理器（右侧）上单击“显示属性菜单”。第一项应该是模拟指标。选择最适合您的屏幕/需求的尺寸。

2.按照调整XCode [iPhone模拟器的比例和尺寸](https://stackoverflow.com/questions/18606926/adjusting-the-xcode-iphone-simulator-scale-and-size)我把它缩小到33%

最好的，内特

# ios - 在核心图形中传递 CGFloat 数组

> ID：13220421
> 
> 赞同：1
> 
> 时间：2012-11-04T16:25:53.267
> 
> 标签：ios, core-graphics

核心图形中有许多采用指针的函数，即。**CGContextSetFillColor(context, colors)**等数组的指针 ；. 我必须每次都为数组颜色创建值，然后将指针传递给函数；

```
CGFloat colors[] = {1.0, 0.0, 0., 1.0};
CGContextSetFillColor(context, colors); 
```

但是，如果我可以将值直接传递到函数中会容易得多；

```
CGContextSetFillColor(context, {1.0, 0.0, 0., 1.0}); 
```

上面的语法不正确，编译器抱怨它，我对指针在 C 中的工作方式的理解非常有限。所以我想问一下在同一行中直接传递值的正确方法是什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-04T16:34:33.603

根据[this answer](https://stackoverflow.com/a/6771284/892696) on [this question](https://stackoverflow.com/questions/6771263/how-to-declare-good-old-c-array-in-objective-c-inline)的信息，您可以这样做：

```
CGContextSetFillColor(context, (CGFloat[]){1.0, 0.0, 0., 1.0}); 
```

# android - 如何在 android 中使用 md5 使用密钥和秘密进行休息通话？

> ID：13220426
> 
> 赞同：0
> 
> 时间：2012-11-04T16:26:23.890
> 
> 标签：android

我正在尝试使用 md5 实现带有密钥和秘密的休息调用。我尝试了一种方法，但它给了我一个错误，

{“状态”：“错误”，“消息”：“签名不匹配”}。

请帮助我，它非常紧急！

# 这是我的 md5 方法，

```
private static final String md5(final String parem) {
    try {
        // Create MD5 Hash
        MessageDigest digest = java.security.MessageDigest
                .getInstance("MD5");
        digest.update(parem.getBytes());
        byte messageDigest[] = digest.digest();

        // Create Hex String
        StringBuffer hexString = new StringBuffer();
        for (int i = 0; i < messageDigest.length; i++) {
            String h = Integer.toHexString(0xFF & messageDigest[i]);
            while (h.length() < 2)
                h = "0" + h;
            hexString.append(h);
        }
        return hexString.toString();
    } catch (NoSuchAlgorithmException e) {
        e.printStackTrace();
    }
    return "";
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T17:02:04.463

我确实尝试过我的一门课，但发现只有一个区别：

你的：输入：测试输出：`098f6bcd4621d373cade4e832627b4f6`

我的：输入：测试输出：`098F6BCD4621D373CADE4E832627B4F6`

所以只有一个差异，大写....

如果那不能解决它，我会说看看你是否散列了正确的数据。

# c# - 将 6 位数字解析为 6 int 数组

> ID：13220427
> 
> 赞同：1
> 
> 时间：2012-11-04T16:26:25.820
> 
> 标签：c#, java, parsing, int

我希望能够解析一个六位数字并将每个字符放入一个数组中，例如：`"738593" -> d[1] = 7, d[2] = 3\. d[3] = 8`....etc

```
private void button2_Click(object sender, EventArgs e)
{
    int[] d = new int[10];
    d1 = Integer.parseInt(String.valueOf(s.charAt(0)));
    d3 = Integer.parseInt(String.valueOf(s.charAt(1)));
    d2 = Integer.parseInt(String.valueOf(s.charAt(2))); //JAVA LINE
    ...
} 
```

我从 Java 中找到了一条完全符合我要求的行，但我一直在寻找 C# 等价物。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T16:37:21.990

尝试：

```
int[] d = s.Select(c => (int)c - (int)'0').ToArray(); 
```

您在这里所做的是迭代字符串中的每个字符，将它们转换为整数流 ( `IEnumerable<int>`)，然后将该流转换为数组。这需要 C# 3.0 和 LINQ。

或者，您可以尝试：

```
int[] d = s.Select(c => int.Parse(c.ToString()).ToArray(); 
```

如果传入的字符串不是数字字符串，这将引发异常，但可能会产生一些性能损失，因为字符串中的每个字符都会生成另一个字符串。

这两种方法都适用于任何大小的数字字符串*。

^(*当然可以存储在内存中。)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T16:37:49.773

在 c# 中，这将是：

```
private void button2_Click(object sender, EventArgs e)
{
    int[] d = new int[10];
    d1 = int.Parse(s[0].ToString());
    d3 = int.Parse(s[1].ToString());
    d2 = int.Parse(s[2].ToString());
    ...
} 
```

没有它可能会起作用，`.ToString()`但我不确定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T16:32:09.777

我能想到的最简单的事情是将其转换为字符数组：

```
char[] val = s.toCharArray(); 
```

由于 char 数据类型只是整数，这应该不是问题，而且我认为您可以这样做：

```
int[] val = s.toCharArray(); 
```

但我对此并不完全确定，所以没有关于那个的承诺:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-04T16:34:36.793

试试这个。

```
int x=654321;
string[] stringarray=x.toString().split(''); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-04T16:39:39.623

```
int[] d = new int[6];
for(int i=0; i<6; i++){
    d[i] = Int32.Parse(s[i]);
} 
```

这就是您在 c# 中将字符串解析为整数的方式

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-04T16:49:00.347

可能如果您直接转换，您可能会得到 asii 值，请尝试以下操作：

```
char[] val = 738593.ToString().ToCharArray().ToArray(); 
```

其中 to 字符串可能会避免将每个数字转换为 asii 值。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-04T17:11:13.577

```
static public int[] StringToIntArray(string input)
{
    List<int> tempList = new List<int>();
    foreach (char c in input)
    {
        if (c >= '0' && c <= '9')
        {
            tempList.Add(c - '0');
        }
    }
    return tempList.ToArray();
} 
```

请注意，这将完全忽略任何非数字。因此，如果您的输入是`"867ASDF5309"`，则 int 数组将显示为`{ 8, 6, 7, 5, 3, 0, 9 }`

# asp.net - 使用线程优化一组 20 个 web 请求

> ID：13220432
> 
> 赞同：0
> 
> 时间：2012-11-04T16:27:07.863
> 
> 标签：asp.net, multithreading

这适用于 ASP.NET。我想改进运行我的功能所花费的时间，今天大约需要 20-30 秒，但更多的是 30 秒而不是 20 秒。它在一个线程上运行，发出 20 个网络请求。

我正在考虑执行所有 20 个 webreqeusts 的线程，以便快速找到结果或只是浏览数据（IE 执行所有 20 个请求，但没有找到任何东西）。

**这是它的工作原理。**
1\. 我正在使用 html 敏捷包来获取 htmldocuments。
2\. 然后我解析它们以获取信息
3\. 最后我将该信息添加到字典中，**或者**我继续下一个 webrequest，直到达到 20 个请求。

我最多发出 20 个 webRequest，至少 1 个。我已将功能设置为在找到我正在搜索的信息时结束。有时信息不存在，因此有 20 个网络请求（它遍历所有数据）。

每个 webrequest 都会在字典中添加 5-20 个条目。然后将其与我发送给它的信息进行比较，如果它在列表中，我将返回密钥，否则返回 201。如果找到，则将其添加到数据库中。

**问题**

*A:*如果我想用线程来做这个，我应该创建多少？20 每个请求一个，让他们都松手去做这项工作？或者我应该创建 4 个，每个最多 5 个请求？

*B：*如果两个线程同时完成并想向目录中添加信息，是否可以锁定整个站点（我使用的是ASP.NET），或者它会尝试从线程A添加一个然后添加一个线程 B 的结果？我今天已经有一个检查，在添加之前检查密钥是否存在。

**C：最快的方法是什么？**

这是我的代码，描述了只显示 20 个请求的循环？

```
public void FetchAndParseAllPages()
    {

        int _maxSearchDepth = 200;
        int _searchIncrement = 10;

        PageFetcher fetcher = new PageFetcher();
        for (int i = 0; i < _maxSearchDepth; i += _searchIncrement)
        {
            string keywordNsearch = _keyword + i;
            ParseHtmldocuments(fetcher.GetWebpage(keywordNsearch));

            if (GetPostion() != 201)
            {   //ADD DATA TO DATABASE
                InsertRankingData(DocParser.GetSearchResults(), _theSearchedKeyword);
                return;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T16:45:15.257

1.  .NET 只允许同时打开 2 个请求。如果你想要更多，你需要在 web.config 中配置它。看这里：http: [//msdn.microsoft.com/en-us/library/aa480507.aspx](http://msdn.microsoft.com/en-us/library/aa480507.aspx)

2.  您可以使用`Parallel.For`非常简单的方法并为您处理“多少线程”。当然你可以调整它来设置你想要多少线程（或任务）`ParallelOptions`。看这里：http: [//msdn.microsoft.com/en-us/library/dd781401.aspx](http://msdn.microsoft.com/en-us/library/dd781401.aspx)

3.  要制作线程安全字典，您可以使用`ConcurrentDictionary`. 看这里：http: [//msdn.microsoft.com/en-us/library/dd287191.aspx](http://msdn.microsoft.com/en-us/library/dd287191.aspx)

# .net - TCP覆盖超时？

> ID：13220434
> 
> 赞同：0
> 
> 时间：2012-11-04T16:27:22.810
> 
> 标签：.net, sockets, networking, tcp

简短版：我写了 .ReadTimeout = 10mins 但超时似乎是 30sec-1min。我可以覆盖系统/用户超时或什么？

我给了一个客户一个连接到我们服务器的应用程序。看来，如果连接空闲 30 秒或一分钟，他们的 tcp 连接超时。客户端应用程序是用 .NET 编写的

有没有办法覆盖超时？我还没有在我们的任何计算机上看到这个问题。如果我不需要，我不想要求客户更改他们的设置。我如何覆盖超时？

我写了 NetworkStream (from TcpClient) .ReadTimeout = 10mins 但显然它等待的时间要少得多，所以我猜它的系统超时？我不能覆盖那些我可以吗？

# sparql - SPARQL - 获取大量可选数据并组合行

> ID：13220435
> 
> 赞同：2
> 
> 时间：2012-11-04T16:27:25.693
> 
> 标签：sparql

我想询问场地中的房间数量：这是我得到的：

```
ah:room     <http://data.artsholland.com/venue/04df157e-fc47-4448-83ed-d0a8c577d7dd/room/3>     -
ah:room     <http://data.artsholland.com/venue/04df157e-fc47-4448-83ed-d0a8c577d7dd/room/ajax-foyer>    -
ah:room     <http://data.artsholland.com/venue/04df157e-fc47-4448-83ed-d0a8c577d7dd/room/ajaxbalkon>    -
ah:room     <http://data.artsholland.com/venue/04df157e-fc47-4448-83ed-d0a8c577d7dd/room/bovenzaal>     -
ah:room     <http://data.artsholland.com/venue/04df157e-fc47-4448-83ed-d0a8c577d7dd/room/foyer>     -
ah:room     <http://data.artsholland.com/venue/04df157e-fc47-4448-83ed-d0a8c577d7dd/room/grote-repetitielokaal> 
```

接下来，我想获得多行回报。

```
ah:attachment   <http://data.artsholland.com/venue/04df157e-fc47-4448-83ed-d0a8c577d7dd/attachment/1>   -
ah:attachment   <http://data.artsholland.com/venue/04df157e-fc47-4448-83ed-d0a8c577d7dd/attachment/2> 
```

我已经搜索到实现这一点。找到了 group_concat 解决方案，但我想不通。

[我在 sparql 浏览器中使用的查询](http://api.artsholland.com/sparql?query=SELECT+DISTINCT+%3Fvenue+%3Fgeometry+%3FopeningHours+%3FhomePage+%3FshortDescription+%3Ftitle+%3FvenueType+%3Flat+%3Flong+%3FpublicTransportInformation++%3Ftelephone+%3Femail+%3Fattachment+%3Froom%0D%0AWHERE+%7B%0D%0A%09%3Fvenue+a+%3Chttp%3A%2F%2Fpurl.org%2Fartsholland%2F1.0%2FVenue%3E+.%0D%0A%09OPTIONAL+%7B%7B%0D%0A%09%3Fvenue+ah%3AopeningHours+%3FopeningHours+.%0D%0A%09%09%7D%7D%0D%0A%09OPTIONAL+%7B%7B%0D%0A%09+%3Fvenue+foaf%3Ahomepage+%3FhomePage+.+%0D%0A%09%09%7D%7D%0D%0A%0D%0A%0D%0A%09%0D%0A%09OPTIONAL+%7B%7B%0D%0A%09%3Fvenue+ah%3AshortDescription+%3FshortDescription+.+%0D%0A%09%7D%7D%0D%0A%09OPTIONAL+%7B%7B%0D%0A%09%3Fvenue+ah%3AvenueType+%3FvenueType+.+%0D%0A%09%7D%7D%0D%0A%09OPTIONAL+%7B%7B%0D%0A%09%3Fvenue+%09dc%3Atitle+%3Ftitle.%0D%0A%09%09%7D%7D%0D%0A%09OPTIONAL+%7B%7B%0D%0A%09%3Fvenue+geo%3Alat%09%3Flat+.+%0D%0A%09%09%7D%7D%0D%0A%09OPTIONAL+%7B%7B%0D%0A%09%3Fvenue+geo%3Along%09%3Flong+.+%0D%0A%09%09%7D%7D%0D%0A%09%09%09OPTIONAL+%7B%7B%0D%0A%09%3Fvenue+ah%3ApublicTransportInformation+%3FpublicTransportInformation+.%0D%0A%09%09%7D%7D%0D%0A%09%09OPTIONAL+%7B%7B%0D%0A%09%3Fvenue+ah%3Atelephone+%3Ftelephone+.+%09%0D%0A%09%09%7D%7D%0D%0A%09%09%09OPTIONAL+%7B%7B%0D%0A%09%3Fvenue+ah%3Aemail+%3Femail+.+%09%0D%0A%09%09%7D%7D%0D%0A%09OPTIONAL%7B%7B%0D%0A%09%09%3Fvenue+ah%3Aattachment+%3Fattachment.%0D%0A%09%09%7D%7D%0D%0A%09OPTIONAL%7B%7B%0D%0A%09%09%3Fvenue+ah%3Aroom+%3Froom.%0D%0A%09%09%7D%7D%0D%0A%09%09%0D%0A%09%09%3Fvenue+geo%3Ageometry+%3Fgeometry+.++%0D%0AFILTER+%28search%3Adistance%28%3Fgeometry%2C+%22POINT%284.890+52.3764%29%22%5E%5E%3Chttp%3A%2F%2Frdf.opensahara.com%2Ftype%2Fgeo%2Fwkt%3E%29+%3C+2000+%2a+0.00000898315284%29+.%0D%0A%23+UTC%21+Dus+tijdsverschil+met+Nederlandse+tijd%21%21%21+%0D%0A%23+Daar+moet+je+dus+even+rekening+mee+houden+MARTIJN%21%0D%0A%0D%0A+%7D+ORDER+BY+%3Fvenue+&api_key=9cbce178ed121b61a0797500d62cd440&selectoutput=browse)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T07:22:27.873

要获取房间数量，请使用`COUNT`运算符。您应该将此与`GROUP BY`子句结合使用，这会告诉操作员哪些结果要聚合在一起。例如：

```
SELECT ?venue (COUNT(?room) as ?nrOfRooms)
WHERE { 
        ?venue a ah:Venue ;
               ah:room ?room . 
}
GROUP BY ?venue 
```

`GROUP_CONCAT`作品实际上非常相似。我没有详细查看您的查询，因此这可能与实际数据的样子不太相符，但大致而言，您所做的如下：

```
SELECT ?venue (GROUP_CONCAT(?attach) as ?attachments)
WHERE { 
        ?venue a ah:Venue ;
               ah:room ?room ;
               ah:attachment ?attach . 
}
GROUP BY ?venue 
```

至于聚合 OPTIONAL 子句中的变量，那应该没有区别。

# c# - 将位图转换为 WebP 图像？

> ID：13220436
> 
> 赞同：3
> 
> 时间：2012-11-04T16:27:29.860
> 
> 标签：c#, bitmap, image-conversion, webp

任何人都知道是否可以使用 C# 将 a 转换为图像 `Bitmap`？`WebP`

一直在谷歌搜索，但找不到 C# 的任何内容。我发现了这个： [mc-kay/libwebp-sharp · GitHub](https://github.com/mc-kay/libwebp-sharp)，但它似乎没有将位图转换为`WebP`格式。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T16:40:34.820

加载 WebP 图像

```
using (Bitmap image = WebPFormat.LoadFromStream(new FileStream("image.webp", FileMode.Open, FileAccess.Read)))
{
    image.Save("image.png", ImageFormat.Png);
} 
```

保存 WebP 图像

```
using (Image image = Image.FromFile("image.jpg"))
{
    Bitmap bitmap = new Bitmap(image);
    WebPFormat.SaveToFile("image.webp", bitmap);
} 
```

有关更多信息，请查看此处***[webp](http://webp.codeplex.com/)***

# asp.net - 从 ASP.Net 的递归函数返回 Arraylist

> ID：13220438
> 
> 赞同：0
> 
> 时间：2012-11-04T16:27:34.247
> 
> 标签：asp.net

![复选框数组](../Images/46f9ba8d7e307545bd07f8a093f6436d.png)请参考随附的屏幕截图。我有一个复选框数组和一个用于在 ASP.Net 页面中返回的按钮。我编写了如下函数来确定在按钮单击事件上选中了哪些复选框： 以下代码是从 ASP.Net 调用的业务组件的一部分。请让我知道如何将 actionArray 返回到在 ASP.Net 页面中调用函数。

```
 public void checkBoxValidation(Control parent, string strKey)
    {
        XmlDocument getCyleXML = new XmlDocument();
        string strChkID="", strActionXPath = "",strAction="";
        ArrayList actionArray = new ArrayList();

        // Loop through all the controls on the page  
        foreach (Control c in parent.Controls)
        {
            // Check and see if it's a checkbox. 
            if ((c.GetType() == typeof(CheckBox)))
            {
                // Since its a checkbox, see if this is checked.     
                if (((CheckBox)(c)).Checked == true)
                {
                    // Find the ID of the checkbox
                    strChkID = ((CheckBox)(c)).ID.ToString();
                    getCyleXML = CycleXML(strKey);
                    strActionXPath = "/Actions/Action[checkbox='" + strChkID + "']/*[self::Name]";
                    strAction = getCyleXML.SelectSingleNode(strActionXPath).ToString();
                    actionArray.Add(strAction);
                }
            }
            // Now we need to call itself (recursion) because all items (Panel, GroupBox, etc) is a container so we need to check 
            // all containers for any checkboxes.
            if (c.HasControls())
            {
                checkBoxValidation(c, strKey);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T16:34:57.487

代码应该是这样的：

```
public ArrayList checkBoxValidation(Control parent, string strKey, ArrayList actionArray)
{
    XmlDocument getCyleXML = new XmlDocument();
    string strChkID="", strActionXPath = "",strAction="";
    if(actionArray == null) { actionArray = new ArrayList(); }

    // Loop through all the controls on the page  
    foreach (Control c in parent.Controls)
    {
        // Check and see if it's a checkbox. 
        if ((c.GetType() == typeof(CheckBox)))
        {
            // Since its a checkbox, see if this is checked.     
            if (((CheckBox)(c)).Checked == true)
            {
                // Find the ID of the checkbox
                strChkID = ((CheckBox)(c)).ID.ToString();
                getCyleXML = CycleXML(strKey);
                strActionXPath = "/Actions/Action[checkbox='" + strChkID + "']/*self::Name]";
                strAction = getCyleXML.SelectSingleNode(strActionXPath).ToString();
                actionArray.Add(strAction);
            }
        }
        // Now we need to call itself (recursion) because all items (Panel, GroupBox, etc) is a container so we need to check 
        // all containers for any checkboxes.
        if (c.HasControls())
        {
            checkBoxValidation(c, strKey, actionArray);
        }
    }

    return actionArray;
} 
```

# c - 使用指针在c中交换字符串

> ID：13220439
> 
> 赞同：1
> 
> 时间：2012-11-04T16:27:46.770
> 
> 标签：c, string, pointers, char

需要帮忙

这是我的代码

```
void swapstringfun()
{
   int i=0,j=0;
   char *str=(char *)malloc(sizeof(char)*15);
   char *mystr=(char *)malloc(sizeof(char)*15);
   system("cls");
   printf("Please enter first string :\t");
   scanf("%s",str);
   printf("Please enter second string :\t");
   scanf("%s",mystr);
   while(*(str+i)!='\0' && *(mystr+i)!='\0')
   {
     *(str+i) ^=*(mystr+i);
     *(mystr+i) ^=*(str+i);
     *(str+i) ^=*(mystr+i);
     i++;
   }
   printf("%s swapped to %s",str,mystr);
   getch();
   main();
} 
```

我编写了上面的代码来使用 XOR 运算符交换字符串。这段代码的问题是。当我的输入是让我们说.. **RAJESH**和**ASHISH**。然后，它显示输出**ASHISH**和**RAJESH**。而且，这是意料之中的。

但是，当输入说.. **ABHISHEK**和**CODER**时，输出是**CODERHEK**和**ABHIS**。但是，预期的输出是**CODER**和**ABHISHEK**。任何人都可以帮我解决这个问题。我会感激的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T16:31:39.463

You iterate and swap until you reach the end of the shorter string

```
while(*(str+i)!='\0' && *(mystr+i)!='\0') 
```

(or both, if the lengths are equal). To iterate until you reach the end of the longer string, you need an `||` instead of the `&&` **and be sure that 1\. both pointers point to large enough memory blocks, and 2\. the shorter string ends with enough 0 bytes**. So you should `calloc` the memory, not `malloc`.

However, you should swap the pointers, really,

```
char *tmp = str;
str = mystr;
mystr = tmp; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T16:32:00.070

You also need to swap the terminating 0, as its part of what is called a string in C.

The 0 is the stopper element in the character array, describing the string.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T16:33:11.217

You need to XOR the entire length of both strings. Since in your second example, the strings are different lengths, your algorithm won't work.

This is the statement you'll have to reconsider:

```
while(*(str+i)!='\0' && *(mystr+i)!='\0') 
```

# php - Compare Image with a Photo of the Image

> ID：13220445
> 
> 赞同：4
> 
> 时间：2012-11-04T16:28:34.323
> 
> 标签：php, image, compare

I've a Problem to solve, but couldn't find a solution.

I need to compare a original image with a photo of the same image, and the function should return true if the photos are equal or false if the photos are not equal.

The photo can also have another size as the original image, and also if the photo contains only a part of the original it should detect the original.

Can I use normal face detection library's or do you have a better solution to solve this problem?

Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T16:40:18.013

有几种方法可以解决这个问题。如果您要查看图像是否完全相同。你可以去找文件。使用 md5 比较，您可以帮助确定它是否是完全相同的文件。现在这对于实际比较它们不起作用。

如果您想实际比较您拥有的图片的内容，我建议您查看 PHP 的 gd 库。

经过一番谷歌搜索后，我在[这里](http://www.intelliot.com/2008/03/sorted-directory-listing-image-resizing-comparison-and-similarity-in-php/)找到了一篇关于比较图像相似度的不错的博客文章。这是一个很好的阅读。

将照片与 GD 进行比较时，一个很好的方法是使图像大小相同。尺寸应该是合理的，所以我会说大约 16x16。然后，您应该考虑 RGB 值、形状等。

我应该指出的其他一些库是 libpuzzle 和 imagemagick。这两者都使得在 PHP 中比较图像变得非常容易。文档虽然很糟糕，但可能需要更多的谷歌搜索和实际测试。祝你好运！

# html - table rowspan and colspan issues

> ID：13220448
> 
> 赞同：0
> 
> 时间：2012-11-04T16:29:22.813
> 
> 标签：html

While looking at table structure with rowspan and colspan, I stubbled upon two instances which were interesting.

View [jsfiddle](http://jsfiddle.net/hPBds/)

The first table should have three rows, but the last row stays in the second row. While I understand that this is fixed if I change the bottom rowspan to 1, instead of 2, why doesn't it work this way?

```
<table border="1">
    <tr>
        <td rowspan="3">3</td>
        <td>1</td>
        <td>1</td>
        <td>1</td>
    </tr>
    <tr>
        <td rowspan="2">2</td>
        <td rowspan="2">2</td>
        <td rowspan="2">2</td>
    </tr>
    <tr>
        <td colspan="4">bottom</td>
    </tr>
</table> 
```

The second table should have a bottom border, but does not show one. Again, I realize the bottom row and the left box would work with a rowspan of 2 for the left side, and a rowspan of 1 for the bottom row, but I was wondering why it doesn't work the way I showed in jsfiddle.

```
<table border="1">
    <tr>
        <td rowspan="3">3</td>
        <td>1</td>
        <td>1</td>
        <td>1</td>
    </tr>
    <tr>
        <td rowspan="2">2</td>
        <td rowspan="2">2</td>
        <td rowspan="2">2</td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T16:39:25.347

第一个表格式错误，因为上面的所有列的行跨度都大于 1。第三行没有可添加单元格的列，但您有 colspan=4。

第二个表格式错误，因为第二行中的所有列的行跨度 > 1，因此没有最后一行，也没有底部边框。

# localization - RadGrid pager localization

> ID：13220454
> 
> 赞同：0
> 
> 时间：2012-11-04T16:29:45.553
> 
> 标签：localization, telerik, telerik-grid, radgrid, pager

In RadGrid i couldn't find the localization settings for the `GO` and `Change` buttons when the `RadGrid pager` is set to `Advanced mode`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:46:29.580

您必须修改控件`App_GlobalResources`使用的文件`RadGrid`。

1.  在解决方案资源管理器中，文件夹下应该有一个名为`RadGrid.Main.xx-XX.resx`的`App_GlobalResources`文件，其中`xx-XX`是您的语言 (de-DE)。

    1b。如果该`RadGrid.Main.xx-XX.resx`文件不存在，请复制命名的文件`RadGrid.Main.resx`并按照步骤 1 重命名该副本。

    1c。如果`RadGrid.Main.resx`您的项目中还没有，请将其添加到`App_GlobalResources`文件夹中。该文件应该在您`Telerik`安装的文件中（例如：）`C:\Program Files (x86)\Telerik\RadControls for ASP.NET AJAX Q3 2012\App_GlobalResources`。

2.  打开该文件并修改键`GoToPageLinkButtonText`和`ChangePageSizeLinkButtonText`.

3.  不要忘记将`Localization`您的属性设置`RadGrid`为正确的文化 ( `xx-XX`)。

# python - 使用 pymongo 将数据保存到 mongodb

> ID：13220455
> 
> 赞同：2
> 
> 时间：2012-11-04T16:29:45.693
> 
> 标签：python, mongodb, pymongo

我在尝试将数据保存到 MongoDB 时遇到问题。

我首先运行这个 python 程序：

```
import pymongo
import sys

def main():
    connection = pymongo.Connection("mongodb://localhost", safe = True) 

    db = connection.m101
    people = db.people

    person = {'name':'Barack Obama', 'role':'president'}
    people.insert(person) 
```

但是，当我尝试从 mongoshell 检索数据时：

```
> use m101 
```

切换到 db m101

```
 > db.people.find() 
```

什么都不返回！我不确定发生了什么。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T16:39:38.600

您的代码不起作用，因为`main()`从未调用过。

添加

```
if __name__ == '__main__':
    main() 
```

执行时将执行您定义的`main`函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T16:46:11.407

您没有执行您的`main()`功能，因此没有执行任何操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-06T14:50:00.683

> 简单的解决方案

```
from flask import Flask
from flask_pymongo import PyMongo
import json
import datetime
import urllib, json
from flask import jsonify
from bson.json_util import dumps

@app.route("/saveBookings", methods=['POST'])
def saveBookings():
    posts = mongo.db.bookings

    post = {"meetingRoom_name": "kriti_jio",
          "personName": "honey",
         "meetingRoom_location": "kannauj",
         "book_start_time": datetime.datetime.utcnow()}
    post_id = posts.insert_one(post).inserted_id
    return  jsonify(status="done",id=dumps(post_id),action="Data saved Succesfully",error="false"); 
```

# android - Latest ADT and sdk tools installed but still asking for latest sdk tools

> ID：13220460
> 
> 赞同：9
> 
> 时间：2012-11-04T16:30:06.087
> 
> 标签：android

I have just installed Eclipse Juno and installed the ADT plugin 20.0.3 but I am still getting this message on every eclipse launch saying "This version of ADT requires android sdk tools in revision 20.0.0 or above.current revision is 18.0.0.Please upgrade your sdk to latest version".The sdk tools I pointed to in preferences are up to date because tomorrow I was working on Eclipse Indigo(Which also had ADT 20.0.3 installed) and had all the sdk tools updated.I just pointed the same sdk folder in Juno.Please help thank you

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-12-19T10:57:05.890

实际上，该解决方案不涉及删除或下载整个安装程序。更新 Eclipse ADT 后，您只需更新 SDK 管理器中的 SDK 工具。诀窍是打开 SDK manager -> Packages menu -> Reload。然后最新版本将可供更新。就这么简单，但起初实际上很烦人。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-25T19:52:45.030

我也遇到了这个问题，除了我为 ADT 21 得到它，消息如下：

“此版本的 ADT 需要 Android SDK 工具修订版 21.0.0 rc9 或更高版本”。

我无法使用 SDK 管理器更新到 SDK 工具 21.0.0 rc9。我发现我必须通过下载[installer_r1-windows.exe重新安装适用于 Windows 的 SDK 工具](http://dl.google.com/android/installer_r21-windows.exe)

[我在获取 Android SDK](http://developer.android.com/sdk/index.html)页面上找到了这个链接。

安装后，我的 SDK 管理器显示 SDK Tools 21 已安装，并让我选择下载 Android 4.2 平台。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T09:59:03.087

尽管我在 Eclipse 网络设置中设置了代理设置，但 SDK 管理器并未使用它们。SDK 管理器在“工具 --> 选项”下有自己的。如果它可以在未来的版本中使用默认的 Eclipse 代理设置来避免这个问题，那就太好了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T04:10:06.080

我遇到过同样的问题，

转到 C:// -> 程序文件 -> Android

那里应该只有一个文件夹，我有不止一个（来自以前的 SDK 下载）。

Eclipse 很困惑，并且使用了错误的。删除过时的文件夹，保留最新的 SDK 下载。

重新启动 Eclipse，它应该会弹出一个错误，说它找不到您的 SDK 文件夹。它会在该错误中为您提供一个标有“首选项”的按钮。转到首选项并调整程序文件中找到的唯一文件夹的路径 - > android。

# build - Cloudbees 上的 Redis 版本过时了？

> ID：13220469
> 
> 赞同：0
> 
> 时间：2012-11-04T16:30:55.037
> 
> 标签：build, jenkins, redis, cloudbees

我正在 Cloudbees 中设置 OSS 构建，并将`/usr/sbin/redis-server`其作为构建任务之一启动：

```
+ /usr/sbin/redis-server
[204] 04 Nov 03:52:58 # Warning: no config file specified, using the default config. In order to specify a config file use 'redis-server /path/to/redis.conf'
[204] 04 Nov 03:52:58 * Server started, Redis version 2.0.3 
```

（Redis 站点）[http://redis.io/download] 显示 2.6.2 是当前版本，而 2.4.17 是“旧版”。在扩展下载页面上，不推荐使用版本 2.0.3。

我是在启动错误的服务器可执行文件，还是计划支持更新版本的 Redis？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:58:48.133

我们需要升级构建机器，以便升级这样的包。我们很快就会这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T20:22:46.610

CloudBees 现在使用我们的附加系统构建并提供了最新版本的 Redis（2.6.4、2.4.17、2.2.12）。这使我们能够提供比操作系统包支持的更新版本的包。

您可以在我们的 Redis 页面上找到更多信息 - [https://developer.cloudbees.com/bin/view/DEV/Redis](https://developer.cloudbees.com/bin/view/DEV/Redis)

# java - Sync desktop application with android application

> ID：13220470
> 
> 赞同：0
> 
> 时间：2012-11-04T16:31:23.333
> 
> 标签：java, android, sync

I want to raise an event from my Android application to my desktop application which is in Java. Can I do so? If yes, which API to use? Any examples or code snippets?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T16:39:50.823

android 和桌面应用程序都是客户端。两个客户端可以通过服务器相互交谈，或者至少通过在预定义位置（IP 地址）上运行的服务器初始化它们的连接。因此，您需要一些允许执行此操作的服务器。

您可能可以为此使用（或滥用）一些第 3 方服务器。例如，如果您的桌面应用程序“知道”电话号码，它可以通过一种可用的 Web 服务发送 SMS。android 应用程序将捕获 SMS 并从其文本中获取信息。您也可以使用计算机上安装的 Skype 或电子邮件在应用程序之间发送消息。但更好的方法是开发自己的服务器，公开 RESTful API 并将其用于协商。

# android - black line around the text

> ID：13220471
> 
> 赞同：2
> 
> 时间：2012-11-04T16:31:37.167
> 
> 标签：android, text

how to make a black line around the text for my textView? example on above image

![enter image description here](../Images/2ab8e34a7ecfb48535de568d88ee8d71.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T16:55:54.007

扩展 TextView 类。然后在onDraw中，先用黑色画文字，然后再画，稍微小一点，用白色。要获得额外的“正确性”，请向 XML 添加自定义属性以设置“线周围”颜色。

```
public class myTextView extends TextView{

    public myTextView (Context context) {
        this(context, null);    
    }

    public myTextView (Context context, AttributeSet attrs) {
        this(context, attrs, 0);            

    }

    public myTextView (Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);        
        // do extra initialisation and get attributes here
    }

    @Override
    protected void onDraw(Canvas canvas) {

        // draw first in black
        Paint paint = new Paint();
        paint.setColor(Color.BLACK);
        paint.setTextSize(20);                // text size
        paint.setStyle(Paint.Style.STROKE);
        paint.setTextAlign(Paint.Align.CENTER);

        canvas.drawText("My text", 50, 50, paint);

        // draw again in white, slightly smaller
        paint.setColor(Color.WHITE);
        paint.setTextSize(18);                // text size

        canvas.drawText("My text", 50, 50, paint);

    }

} 
```

代码不完整，因为它对颜色、大小和位置进行了硬编码，但我希望它足以让您使用。您可以通过构造函数中的 attrs 从 XML 中获取文本大小和文本颜色，并将线条颜色和宽度添加为自定义属性（在此处搜索或 Google）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-04T17:00:59.203

我会使用已经有轮廓的字体，例如[http://www.dafont.com/steelfish.font](http://www.dafont.com/steelfish.font)

如此处所述[Android - 使用自定义字体](https://stackoverflow.com/questions/3651086/android-using-custom-font?rq=1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-12T08:19:27.727

将此添加到您的 xml 文件中：

```
android:shadowColor="#000000"
android:shadowDx="1.5"
android:shadowDy="1.3"
android:shadowRadius="1.6"
android:text="YOUR TEXT"
android:textColor="@color/white" 
```

# android - 在 ActionBar 中禁用 ShareActionProvider

> ID：13220477
> 
> 赞同：3
> 
> 时间：2012-11-04T16:32:18.927
> 
> 标签：android, android-actionbar, actionbarsherlock

我要禁用`ShareActionProvider`在 ActionBar 的操作模式中显示的功能。但

```
menu.findItem(R.id.myShareItem).setEnabled(false) 
```

不会禁用它。我错过了什么或者它不能被禁用？

更新：

在 Jelly Bean 上进行测试，这个独立的 Activity 类演示了这个问题：

```
package com.example;

import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.MenuItem;
import android.webkit.MimeTypeMap;
import android.widget.ShareActionProvider;
import android.widget.Toast;

public class MyActivity extends Activity {

    private MenuItem mShareItem;

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        ShareActionProvider sap = new ShareActionProvider(this);

        Intent shareIntent = new Intent(Intent.ACTION_SEND);
        shareIntent.setType(MimeTypeMap.getSingleton().getMimeTypeFromExtension("jpg"));
        sap.setShareIntent(shareIntent);

        mShareItem = menu.add("Share");
        mShareItem.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
        mShareItem.setActionProvider(sap);

        MenuItem toggleItem = menu.add("Toggle");
        toggleItem.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);

        return super.onCreateOptionsMenu(menu);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {

        //---shouldn't this work ? -----
        mShareItem.setEnabled(!mShareItem.isEnabled());

        Toast.makeText(this,mShareItem + " enabled: " + mShareItem.isEnabled(),Toast.LENGTH_SHORT).show();

        return super.onOptionsItemSelected(item);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T07:23:57.960

这是一个可能的错误，[在此处报告](http://code.google.com/p/android/issues/detail?id=39290)。

当前解决方法：`setShareIntent(null)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-20T19:38:40.327

您可以尝试以下方法：

```
setShareIntent(new Intent()); 
```

这应该可以解决问题。

# javascript - 通过 Yahoo Pipes 枚举使用 jQuery 生成的 JSON 失败

> ID：13220481
> 
> 赞同：0
> 
> 时间：2012-11-04T16:32:35.500
> 
> 标签：javascript, jquery, json

我试图通过使用 Yahoo Pipes 和 jQuery 来使用来自不同域的即将发生的事件来更新表来减少手动更新工作。我创建了[这个管道](http://pipes.yahoo.com/pipes/pipe.info?_id=57aa32bf3481c8dca0c07afcf9b9dc29)来收集数据，它*似乎*工作。

现在我正在使用[本教程](http://www.jquery4u.com/json/ajaxjquery-getjson-simple/)中的以下 jQuery 脚本读取 JSON 文件：

```
$.ajax({
 type: "GET",
 url: "http://pipes.yahoo.com/pipes/pipe.run?_id=57aa32bf3481c8dca0c07afcf9b9dc29&_render=json",
 async: false,
 beforeSend: function(x) {
  if(x && x.overrideMimeType) {
   x.overrideMimeType("application/j-son;charset=UTF-8");
  }
 },
  dataType: "json",
  success: function(data){
  $('body').append(data.query.results.a.content);
 }
}); 
```

jQuery 追加失败，我猜是因为 'data.query.results.a.content' 与管道创建的 JSON 结构没有很好的关系。

我已经尝试以多种方式更改管道和附加，但还没有放弃，非常感谢您的输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T17:18:06.133

认为您正在错误地解析 json 结果。

在此处查看 json 对象[http://jsonviewer.stack.hu/](http://jsonviewer.stack.hu/)

您将观察到每个**项目的****内容**节点位于 **`value.items[0].a.content`**

 **即尝试这样的事情：

```
$('body').append(data.value.items[0].a.content); 
```

您将需要像这样迭代 items 数组

```
$.each(data.value.items, function(index,element) {
    $('body').append(element.a.content);
}); 
```

在小提琴上试试：http: [//jsfiddle.net/EFvJf/](http://jsfiddle.net/EFvJf/)**

# c++ - How to access to a file in System directory C++?

> ID：13220482
> 
> 赞同：-1
> 
> 时间：2012-11-04T16:32:50.790
> 
> 标签：c++, directory

How can access a file in the System directory, knowing the main directory, it's extension. But not knowing the name of the file and the nodes in between ( = Subderectories ) ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T16:36:26.407

如何查找目录的内容，从而找出该文件的名称，因操作系统而异。在 Linux 上，您将使用`diropen`，而在 Windows 上使用其他东西。但是，[boost::filesystem](http://www.boost.org/doc/libs/1_51_0/libs/filesystem/doc/index.htm)库允许您以独立于平台的方式执行此操作。

如果我理解你所说的正确，你正在寻找一个文件“/System/foo/bar/baz.dat”，但你不知道“foo”、“bar”或“baz”是什么。在这种情况下，您将需要遍历“/System”下每个目录中的每个文件，直到找到具有所需扩展名的文件。

有关此类迭代的示例，请参阅[此问题](https://stackoverflow.com/questions/67273/how-do-you-iterate-through-every-file-directory-recursively-in-standard-c)的最佳答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T16:36:54.027

您可以从系统目录开始搜索具有该扩展名的所有文件。根据“系统目录”，我猜这是在 Windows 上，在这种情况下，您通常用于该搜索的功能将是`FindFirstFile`,`FindNextFile`和`FindClose`. 您也可以使用`SetCurrentDirectory`遍历起点下的子目录。

根据您所说的（到目前为止），如果您找到多个具有该扩展名的文件，很难猜测您可能想要做什么。

# android - Android SDK 从 EditText 保存换行符

> ID：13220487
> 
> 赞同：0
> 
> 时间：2012-11-04T16:33:31.400
> 
> 标签：android, android-edittext, fileoutputstream

我有一个多行 EditText，但是当我尝试将文本保存到文件时，打开它时看不到换行符。我`EditText` `inputType`的是`TextMultiLine`。

这是我的代码

```
try {
    FileOutputStream fos = openFileOutput(cat + ".planit", Context.MODE_PRIVATE);
    EditText note = (EditText) findViewById(R.id.note);
    String content = data + "date=" + date + "&---&SPLIT&---&color=" + color
            + "&---&SPLIT&---&note=" + note.getText() + "&---&SPLIT&---&"
            + "PLANIT-STRINGSPLIT";
    fos.write(content.getBytes());
    fos.close();
} catch (FileNotFoundException e) {
    MainActivity.Error(AddTaskActivity.this);
} catch (IOException e) {
    MainActivity.Error(AddTaskActivity.this);
} 
```

并在 TextView 中显示：

```
ScrollView sV = new ScrollView(this);
RelativeLayout rL = new RelativeLayout(this);
RelativeLayout rLay = (RelativeLayout) findViewById(R.id.items);
TextView note = new TextView(this);
rL.addView(note);
sV.addView(rL);
rLay.addView(sV); 
```

# python - 我可以将迭代器存储在以后可以读取的文件中吗？这会减少空间消耗吗？

> ID：13220488
> 
> 赞同：-3
> 
> 时间：2012-11-04T16:33:41.517
> 
> 标签：python, file, compression, iterable

假设我有一个非常大的整数，大约为 10**200。现在将整数存储在文件中会占用一些空间。

如果我使用 将它转换为迭代器`yield`，我可以将迭代器存储在文件中吗？这会节省任何资源吗？

迭代器可以像这样生成：

```
def rec():
  for i in range(0,10**200):
    yield i

iterable = rec() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T16:38:53.233

我假设这是你想做的：

```
def f():
    yield 10**200 
```

然后保存`f()`在一个文件中。答案是否定的，那是行不通的。除非您将其转换为具有特殊用途的酸洗支持的自定义迭代器，否则像`f()`（注意：这是生成器，不可迭代）这样的生成器不能被酸洗或以其他方式序列化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T16:39:00.233

您可以使用[`Shelve`](http://docs.python.org/2/library/shelve.html)模块来存储它。

> “架子”是一个持久的、类似字典的对象。与“dbm”数据库的区别在于架子中的值（不是键！）本质上可以是任意的 Python 对象——pickle 模块可以处理的任何东西。

[以下类型可以腌制](http://docs.python.org/2/library/pickle.html#what-can-be-pickled-and-unpickled)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T16:54:48.690

基于[larsmans](https://stackoverflow.com/a/13220540/257111)的回答，可以构建一个自定义迭代器来执行此操作：

```
class my_large_num(object):

    def __init__(self):
        self.num_iterations = 0

    def __iter__(self):
        return self

    def next(self):
        if self.num_iterations < 1:
            self.num_iterations += 1
            return 10**200
        else:
            raise StopIteration() 
```

然后您可以：

```
import pickle
pickled_repr = pickle.dumps(my_large_num())
restored_object = pickle.loads(pickled_repr)
sum(restored_object) 
```

这是有效的，因为在下面，可迭代对象有一个在完成时`next()`引发的函数`StopIteration`。我们所做的只是创建一个实现此功能的类。

在这种特定情况下，无论您是否将类存储在文件中，您仍然需要执行迭代并因此存储`10**200`在内存中，因此除了按需生成数字外，您没有任何功能，您无需序列化即可完成物体。

您可能正在考虑[mmap](http://docs.python.org/2/library/mmap.html)样式的空间节省。这会将内存映射到文件 - 请注意，但这仍然会影响程序的可用内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T16:35:41.247

值 10**200 的整数不会占用大量空间。以 10 基 ASCII 编码，只需要 201 个字符。如果您愿意以二进制形式存储数据，那么您只会看到 85ish

* * *

如果您的意思是“可迭代”，那也没有多大意义-可迭代本质上是一个函数，并且您已经保存了该函数-*它在源文件*中。

# php - 方法压倒一切和严格的标准

> ID：13220489
> 
> 赞同：5
> 
> 时间：2012-11-04T16:33:46.033
> 
> 标签：php, standards-compliance

所以我有这个父类：

```
class GenericHTMLElement
{
    public function addElement(GenericHTMLElement $element) {}
} 
```

由这两个类扩展

```
class ListViewItem extends GenericHTMLElement
{

}

class ListView extends GenericHTMLElement
{
    /**
     * @param ListViewItem $element
     * @throws WrongTypeException
     */
    public function addElement(GenericHTMLElement $element)
    {
        if (!$element instanceof ListViewItem)
        {
             throw new WrongTypeException("ListViewItem", $element);
        }
        parent::addElement($element);
    }
} 
```

这很好用。问题在于，`ListView::addElement()`仅接受 ListViewItem 对象作为参数还不是很清楚。

此外，在生成文档时，它假定即使带有该 javadoc 注释也`$element`应该是类型。`GenericHTMLElement`

但是，更改 typehint 会触发 StrictStandards 警告。

* * *

编辑：稍微改变了问题......

**问：为什么更改方法中的参数会违反严格标准？** 你可以用其他编程语言来做到这一点。而在 PHP 中，您可以在构造函数中执行此操作

**问：在这种情况下，违反严格标准的后果是什么？** 据我了解，严格的警告似乎是在警告程序员，有人可能会读取父类的签名并假设其子类的行为方式相同。这可能会导致运行时错误并停止执行。但这正是我想要达到的目标。

* * *

编辑：

由于在评论中被问到，有关此的更多详细信息...

这是移动 Web 应用程序模板引擎的一部分，其核心使用 JQuery Mobile。

JQuery mobile 对如何构建“页面”有特定的要求。jQueryMobile 还使用特定的属性，例如 data-theme 或 data-position。

为了操作页面的 DOM，您必须强制执行该结构。

GenericHTMLElement 表示 HTML 的“通用”块（一个 div、一个表格等）。ListView 是 ul 或 ol 的 jQueryMobile 等价物。ListView 只能有一个 ListViewItem (li) 作为子项。例如，listView 有一个名为 data-filter 的属性，可以启用或禁用搜索过滤器。

更多信息在[http://jquerymobile.com/test/docs/api/data-attributes.html](http://jquerymobile.com/test/docs/api/data-attributes.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T16:59:27.423

您已经定义了该`addElement`方法必须接受的具体类型。

如果您现在从该类型扩展并创建一个*更*具体的子类型 - 或者更好地说：*不同*- ，那么您就违反了该合同。

PHP 通过严格的标准警告来警告您。

listview 元素要么是*通用*的，然后它也必须接受任何*通用*的东西。或者它是*不同*的东西，但它不能在它自己的*界面中是**通用*的。

 *因此，您不应*禁用*严格警告，而应三思而后行。

看起来您希望与此处的 HTML DTD 保持一致，它只允许其他元素中的某些元素。例如，不允许在`<a>`标签内放置`<a>`标签。但是，如果您尝试将其分解为单个类型和子类型，我发现它的效率非常低。你不会完成你的模型——即使它可以用 PHP 正确表达。但是，您应该先与自己讨论。

也许标准 DOMDocument 对如何表示 HTML 有所了解。*

# qt - 在 Ubuntu 12 上编译 Qt 4.8.3 失败

> ID：13220499
> 
> 赞同：6
> 
> 时间：2012-11-04T16:34:58.483
> 
> 标签：qt, ubuntu, build

我是 Ubuntu 新手，在 Ubuntu 12 上构建 Qt 4.8.3 时收到一条消息：

> 基本 XLib 功能测试失败！您可能需要通过在 /home/majidmax/qt-everywhere-opensource-src-4.8.3/mkspecs/linux-g++ 中编辑 QMAKE_INCDIR_X11 和 QMAKE_LIBDIR_X11 来修改包含和库搜索路径。

在 Ubuntu 上构建 Qt 的正确步骤是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T09:07:09.867

[http://qt-project.org/doc/qt-4.8/requirements-x11.html](http://qt-project.org/doc/qt-4.8/requirements-x11.html)

该网站提供必须安装的软件包列表

试试看~

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T09:34:53.277

怎么样`sudo apt-get build-dep qt4-qmake`？

尝试在编译 Qt 之前运行该命令（在类似 Debian 的发行版上）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-03T01:07:26.583

这些是您需要安装的软件包，一切顺利。我只是遇到了同样的问题，这对我有用。这些来自 Garlic Tseng 在接受的答案中提供的链接。为了方便，我把这些放在这里：

```
libfontconfig1-dev
libfreetype6-dev
libx11-dev
libxcursor-dev
libxext-dev
libxfixes-dev
libxft-dev
libxi-dev
libxrandr-dev
libxrender-dev 
```

一个（复制粘贴）命令安装所有：

```
sudo apt-get install libfontconfig1-dev libfreetype6-dev libx11-dev libxcursor-dev libxext-dev libxfixes-dev libxft-dev libxi-dev libxrandr-dev libxrender-dev 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-27T05:23:39.677

我在 Qt-4.8.3 的 fedora20（64 位）中遇到了同样的问题

1)- yum 安装 libXext-devel

（应该有互联网连接来检查依赖项并安装所有依赖项）。

2)- ./配置

3)- 制作

4)- 进行安装

5)- 安装成功完成。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-10T02:23:13.357

错误消息没有提供很多关于 XLib 失败的实际问题的信息。

要获取有关导致它失败的错误的更多信息，您可以“制作”xlib 测试：

```
$ cd <Qt_Source_Directory>/config.tests/x11/xlib/
$ make
g++ -Wl,-O1 -o xlib xlib.o    -L/usr/X11R6/lib -ltcg -lXext -lX11 -lm
/usr/bin/ld: cannot find -ltcg
collect2: error: ld returned 1 exit status
make: *** [xlib] Error 1 
```

在我上面的例子中，我使用的是 -ltcg，它被解释为要包含的显式库。我正在使用此选项，因为它在[qt 4.8 配置选项](http://doc.qt.io/qt-4.8/configure-options.html)中列出为：

> 使用链接时间码生成

当我查看配置选项时，`./configure --help`我注意到没有列出此选项。从我的配置行中删除选项解决了我的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-29T09:25:26.343

`what the proper steps to build Qt on Ubuntu?`

1.  检查[Qt 支持的平台](http://doc.qt.digia.com/main-snapshot/supported-platforms.html)。

2.  检查[Qt 的 X11 要求](http://doc.qt.digia.com/main-snapshot/requirements-x11.html)。

    3a。检查[在 X11 平台上安装 Qt 的步骤（连同构建）](http://doc.qt.digia.com/main-snapshot/install-x11.html)。

    或者

    3b。检查[构建静态 Qt 的步骤](http://www.qtcentre.org/wiki/index.php?title=Building_static_Qt_on_Linux)。

# iphone - 表盘旋转跳跃

> ID：13220500
> 
> 赞同：0
> 
> 时间：2012-11-04T16:35:00.607
> 
> 标签：iphone, objective-c

我正在研究一个当用户触摸它并拖动它时会旋转的表盘。到目前为止一切顺利，但是当刻度盘超过 360 度时，该值又回到 0，使动画围绕刻度盘向后跳，而不是继续。

```
dialRotation = (atan2(event->localY()-circleCenterY, event->localX()-circleCenterX) * (180/M_PI)); 
```

有谁知道如何阻止它跳？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T17:04:51.350

您可以使用现有值来确定是否应该超过 360。也许是这样的：

```
currentValue = dialRotation;
dialRotation = (atan2(event->localY()-circleCenterY, event->localX()-circleCenterX) * (180/M_PI));
dialRotation = 360.0 * floor(fmod(currentValue, 360.0)) + dialRotation; 
```

我认为这也会在负面的方向上起作用，尽管我有时会对`fmod()`s 对负数的行为感到困惑，所以一定要检查一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T23:17:12.423

另一种方法是获取先前值和当前值之间的增量（更改），然后将其添加到您已有的值中。只要差异不大于 180 度，这可能会更好。像这样的东西：

```
// In your class declaration:
float normalizedRotation; // Always between 0 and 360 degrees
float previousNormalizedRotation;
float dialRotation; // current value, can be any valid value from -inf to +inf

// In your method:
normalizedRotation = (atan2(event->localY()-circleCenterY, event->localX()-circleCenterX) * (180/M_PI));
if (normalizedRotation < 0.0) normalizedRotation += 360.0;
float delta = normalizedRotation - previousNormalizedRotation;
previousNormalizedRotation = normalizedRotation;
dialRotation += delta; 
```

让我知道这是否有效。

# c++ - 指针非类型模板参数的用途？

> ID：13220502
> 
> 赞同：18
> 
> 时间：2012-11-04T16:35:21.023
> 
> 标签：c++, templates

有没有人使用过指针/引用/指向成员（非类型）模板参数？
我不知道应该将 C++ 功能用作最佳实践的任何（理智/真实世界）场景。

功能演示（用于指针）：

```
template <int* Pointer> struct SomeStruct {};
int someGlobal = 5;
SomeStruct<&someGlobal> someStruct; // legal c++ code, what's the use? 
```

任何启示将不胜感激！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-04T17:40:48.920

**指向函数的指针**：

指向成员函数的指针和指向函数的非类型参数对某些委托非常有用。它使您可以制作非常快速的代表。

前任：

```
#include <iostream>
struct CallIntDelegate
{
    virtual void operator()(int i) const = 0;
};

template<typename O, void (O::*func)(int)>
struct IntCaller : public CallIntDelegate
{
    IntCaller(O* obj) : object(obj) {}
    void operator()(int i) const
    {
        // This line can easily optimized by the compiler
        // in object->func(i) (= normal function call, not pointer-to-member call)
        // Pointer-to-member calls are slower than regular function calls
        (object->*func)(i);
    }
private:
    O* object;
};

void set(const CallIntDelegate& setValue)
{
    setValue(42);
}

class test
{
public:
    void printAnswer(int i)
    {
        std::cout << "The answer is " << 2 * i << "\n";
    }
};

int main()
{
    test obj;
    set(IntCaller<test,&test::printAnswer>(&obj));
} 
```

[现场示例在这里](http://ideone.com/IrRzeD)。

**指向数据的指针**：

您可以使用此类非类型参数来扩展变量的可见性。

例如，如果您正在编写一个反射库（这可能对脚本非常有用），使用宏让用户为库声明他的类，您可能希望将所有数据存储在一个复杂的结构中（这可能会随着时间而改变） )，并且想要一些句柄来使用它。

例子：

```
#include <iostream>
#include <memory>

struct complex_struct
{
    void (*doSmth)();
};

struct complex_struct_handle
{
    // functions
    virtual void doSmth() = 0;
};

template<complex_struct* S>
struct csh_imp : public complex_struct_handle
{
    // implement function using S
    void doSmth()
    {
        // Optimization: simple pointer-to-member call,
        // instead of:
        // retrieve pointer-to-member, then call it.
        // And I think it can even be more optimized by the compiler.
        S->doSmth();
    }
};

class test
{
    public:
        /* This function is generated by some macros
           The static variable is not made at class scope
           because the initialization of static class variables
           have to be done at namespace scope.

           IE:
               class blah
               {
                   SOME_MACRO(params)
               };
           instead of:
               class blah
               {
                   SOME_MACRO1(params)
               };
               SOME_MACRO2(blah,other_params);

           The pointer-to-data template parameter allows the variable
           to be used outside of the function.
        */
        std::auto_ptr<complex_struct_handle> getHandle() const
        {
            static complex_struct myStruct = { &test::print };
            return std::auto_ptr<complex_struct_handle>(new csh_imp<&myStruct>());
        }
        static void print()
        {
            std::cout << "print 42!\n";
        }
};

int main()
{
    test obj;
    obj.getHandle()->doSmth();
} 
```

抱歉，在`auto_ptr`Codepad`shared_ptr`和 Ideone 上均不可用。 [活生生的例子](http://ideone.com/r4yIyI)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-04T17:49:12.457

指向成员的指针的情况与指向数据或引用的指针有很大不同。

如果您想指定要调用的成员函数（或要访问的数据成员）但不想将对象放在特定的层次结构中（否则虚拟方法通常就足够了），则指向成员的指针作为模板参数会很有用.

例如：

```
#include <stdio.h>

struct Button
{
    virtual ~Button() {}
    virtual void click() = 0;
};

template<class Receiver, void (Receiver::*action)()>
struct GuiButton : Button
{
    Receiver *receiver;
    GuiButton(Receiver *receiver) : receiver(receiver) { }
    void click() { (receiver->*action)(); }
};

// Note that Foo knows nothing about the gui library    
struct Foo
{
    void Action1() { puts("Action 1\n"); }
};

int main()
{
    Foo foo;
    Button *btn = new GuiButton<Foo, &Foo::Action1>(&foo);
    btn->click();
    return 0;
} 
```

如果您不想为访问支付额外的运行时价格，则指向全局对象的指针或引用可能很有用，因为模板实例化将使用常量（加载时解析）地址访问指定的对象，而不是像它这样的间接访问将使用常规指针或引用发生。然而，付出的代价是每个对象的新模板实例化，实际上很难想到这可能有用的现实世界案例。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-04T17:41:55.493

[Performance TR](http://www.open-std.org/JTC1/SC22/WG21/docs/TR18015.pdf)有几个例子，其中使用非类型模板来抽象如何访问硬件（硬件内容从第 90 页开始；指针作为模板参数的使用例如在第 113 页）。例如，注册的内存映射 I/O 将使用指向硬件区域的固定指针。尽管我自己从未使用过它（我只向 Jan Kristofferson 展示了如何使用它），但我很确定它用于开发一些嵌入式设备。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-06-17T09:37:46.420

It is common to use pointer template arguments to leverage SFINAE. This is especially useful if you have two similar overloads which you couldn't use `std::enable_if` default arguments for, as they would cause a redefinition error.

This code would cause a redefinition error:

```
template <typename T, typename = std::enable_if_t<std::is_integral<T>::value>>
void foo (T x)
{
    cout << "integral"; 
}

template <typename T, typename = std::enable_if_t<std::is_floating_point<T>::value>>
void foo (T x)
{
    cout << "floating";
} 
```

But this code, which utilises the fact that valid `std::enable_if_t` constructs collapse to `void` by default, is fine:

```
 // This will become void* = nullptr
template <typename T, std::enable_if_t<std::is_integral<T>::value>* = nullptr>
void foo (T x)
{
    cout << "integral"; 
}

template <typename T, std::enable_if_t<std::is_floating_point<T>::value>* = nullptr>
void foo (T x)
{
    cout << "floating";
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-04T18:27:43.140

有时您需要提供一个具有特定签名的回调函数作为函数指针（例如`void (*)(int)`），但是您要提供的函数采用不同的（尽管兼容）参数（例如`double my_callback(double x)`），因此您不能直接传递它的地址。此外，您可能希望在调用函数之前和之后做一些工作。

编写一个隐藏函数指针的类模板很容易，然后从其`operator()()`或其他成员函数内部调用它，但这并没有提供提取常规函数指针的方法，因为被调用的实体仍然需要`this`找到回调函数的指针。

您可以通过构建一个适配器以优雅和类型安全的方式解决这个问题，给定一个输入函数，生成一个自定义的*静态*成员函数（与常规函数不同，与非静态成员函数不同，它可以获取其地址并用于函数指针）。 **需要一个函数指针模板参数来将回调函数的知识嵌入到静态成员函数中。** [此处演示了该技术。](https://stackoverflow.com/a/1133319/47984)

# php - Mysqli php当未知服务器主机时我想要一个自定义错误消息

> ID：13220503
> 
> 赞同：0
> 
> 时间：2012-11-04T16:35:23.480
> 
> 标签：php, error-handling, mysqli, warnings, config

我正在编写一个脚本来在 php 中安装应用程序的数据库。它工作正常，但是当我尝试安装一个不存在的数据库时，我只想要我自己的错误消息，但我一直收到默认警告：警告：mysqli::mysqli() [mysqli.mysqli]: (HY000/2005): Unknown MySQL 服务器主机“kasdasd”。

所以我知道主机错了，我希望它是这样，只有我自己的错误消息。如何摆脱此消息？

我的带有参数 DBConfig $config 的连接类：

```
 $this->mysqli = new mysqli($config->m_host,
                                $config->m_user,
                                $config->m_passw,
                                $config->m_db);

    if ($this->mysqli->connect_error) {
        return false;
    }

    $this->mysqli->set_charset("utf8");

    return true; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T17:14:45.407

一个简单的解决方案是查看是否可以使用 fsockopen 打开主机名并抑制错误：

```
$port = 80;

if($fp = @fsockopen($config->m_host,$port)){
    $db = new mysqli($config->m_host,$config->m_user,$config->m_passw,$config->m_db);
}else{
    echo 'hostname not recognized';
}
@fclose($fp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T16:52:40.793

编辑：

您可以使用

```
if ($mysqli->connect_error) {
    /** handle your error here **/
    // Throw a custom exception if you like! (see below)
    // or just echo "There was an error";
} 
```

您可以进一步使用`mysqli_connect_errno()`来找出发生的事情并相应地处理它。

**编辑：mysqli 不会抛出错误，所以下面是不正确的。**

将您的代码包装在 try-catch 中，然后您可以抛出您喜欢的任何类型的错误：

```
try {
  /** your code here **/
} catch (Exception $e) {
  /** your handling here **/
  // i.e.
  throw new BadHostNameException($config->m_host);
  // or
  echo "Could not connect!":
} 
```

注意：您应该用`Exception $e`坏主机抛出的特定类型的异常替换`catch(MysqlBadHostnameException $e)`（错误类型将在您之前尝试的错误日志中，或者您可以`get_class($e)`在上面的示例中执行。

// 使用自定义异常：将其添加到您的类之外..

```
class BadHostNameException extends Exception {} 
```

# vba - 检查/显示实体的声明类型（变量、表达式...）

> ID：13220504
> 
> 赞同：0
> 
> 时间：2012-11-04T16:35:26.553
> 
> 标签：vba, types, vb6, vbscript

我正在研究 VB 中的类型，尤其是 VBA 中的类型。通常，给定一个实体有两种类型：`Effective value type`我猜，在规范`value types`的[这一部分中定义](http://msdn.microsoft.com/en-us/library/ee177324%28prot.20%29.aspx)；[在规范的这一部分中](http://msdn.microsoft.com/en-us/library/ee199764%28prot.20%29.aspx)`Declared Type`定义。

要进行测试，我需要使用一些函数来检查类型。有[TypeName](http://msdn.microsoft.com/en-us/library/gg278698.aspx)和[VarType](http://msdn.microsoft.com/en-us/library/office/gg278470.aspx)。我认为它们用于检查`effective value type`实体，因为`TypeName`可以返回`DBNull`,`Decimal`和`Nothing`; 可以`VarType`返回`vbNull`,`vbEmpty`和`vbError`. `vbDecimal`这些类型存在于 的表中`effective value types`，但不存在于 的表中`declared type`。

所以现在，我的问题是，有谁知道如何检查/显示`declared type`一个实体（变量、表达式......）？

**编辑1：**可能对于一个变量，它`declared type`只是变量声明指定的类型。我想坚持一点，VBA 似乎有`declared type`表达式。例如，在此[链接](http://msdn.microsoft.com/en-us/library/ee177477%28prot.20%29.aspx)`Operator Declared Type`中提到。我认为那是指操作的结果。这意味着像, , ... 这样的实体可以有一个. 我想知道如何显示他们声明的类型。`declared type``-i``i+5``i>6``declared type`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T08:00:54.053

如果，

```
Dim i as integer
i = 6/3 
```

然后你这样做， `TypeName(i>3)` 它返回**布尔值**，它是表达式的*类型*，基于它所持有的结果值的类型，而不是操作数的声明类型。它符合[msdn 2.2 Entities and Declared Types](http://msdn.microsoft.com/en-us/library/ee199764%28prot.20%29.aspx)链接中给出的规范。

或者您是否正在寻找可以将 DType(i>3) 作为操作数 (i) 类型的整数返回的语法/函数（例如 DType、富有想象力的函数）？或者更确切地说，当您在某个表达式中有多个变量时，它会更有用，这样您就可以一次找到它们的所有类型？ *例如，一些字符串在一个表达式中组合了各种不同的类型变量。*

只是想**了解它何时以及如何**对您有用，以及您正在寻找的最终结果是什么。似乎这更像是语言根定义。

*PS：我没有代表点评论。所以我添加了一个答案。*

# windows-8 - 当包含在具有 ScrollViewer（如 FlipView）的控件中时，被 VKB 遮蔽的 Windows 8 自动滚动焦点文本框被禁用

> ID：13220506
> 
> 赞同：3
> 
> 时间：2012-11-04T16:35:48.557
> 
> 标签：windows-8, windows-runtime, winrt-xaml, windows-store-apps

我创建了一个简单的测试应用程序来复制我看到但无法找到解决方案的问题。我有一个基本的 Windows 应用商店应用程序，其中包含一个包含在 ItemsControl 中的文本框的平面列表。该列表足够长，当底部文本框具有焦点时，它会被虚拟键盘遮挡，整个视图将自动向上滚动以确保文本框在使用键盘时可见。

但是，如果 ItemsControl 托管在 FlipView 或 GridView 而不是如下所示的简单 Grid 中，则不会发生自动垂直滚动，并且底部元素仍然被虚拟键盘遮挡。这似乎是因为 Parent 控件包含一个 ScrollViewer，它似乎完全覆盖了默认的有用视图滚动行为。

问题是如何重新启用此行为？我曾尝试以我自己的风格移除 ScrollViewer，这很有效，但也意味着 FlipView 不再用作 FlipView。

```
<Grid>
        <ItemsControl Width="200">
            <TextBox Text="Test"></TextBox>
            <TextBox Text="Test"></TextBox>
            <TextBox Text="Test"></TextBox>
            <TextBox Text="Test"></TextBox>
            <TextBox Text="Test"></TextBox>
            <TextBox Text="Test"></TextBox>
            <TextBox Text="Test"></TextBox>
            <TextBox Text="Test"></TextBox>
            <TextBox Text="Test"></TextBox>
            <TextBox Text="Test"></TextBox>
            <TextBox Text="Test"></TextBox>
            <TextBox Text="Test"></TextBox>
            <TextBox Text="Test"></TextBox>
            <TextBox Text="Test"></TextBox>
            <TextBox Text="Test"></TextBox>
            <TextBox Text="Test"></TextBox>                
            <TextBox Text="Hidden by VKD"></TextBox>            
        </ItemsControl>       
</Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-15T22:03:07.360

我遇到了同样的问题，并找到了导致问题的元素：它`VirtualizingStackPanel`在许多`ItemsControls`中用作默认项目面板。如果将其更改为 normal `StackPanel`，则在弹出虚拟键盘时会正确转换相应的输入控件。

详情可以看这里：[为什么我的FlipView中包含的文本框在弹出时被软键盘遮住了？](https://stackoverflow.com/questions/29632002/why-is-my-text-box-contained-in-a-flipview-obscured-by-the-soft-keyboard-when-it/29637610#29637610)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-05T04:09:42.940

当键盘出现时，也许你可以自己移动你的文本框？这个样本看起来很有希望：

[响应屏幕键盘示例的外观](http://code.msdn.microsoft.com/windowsapps/Keyboard-Events-Sample-866ba41c)

# matlab - Matlab将矩阵中心化为均值

> ID：13220508
> 
> 赞同：1
> 
> 时间：2012-11-04T16:36:15.290
> 
> 标签：matlab, matrix

我想将矩阵中心化到它的平均值，

```
A[i][j] = A[i][j]-mean(A,j) 
```

所以我从每个点减去相应列的平均值。我找不到使数据居中的功能，而且创建自己的功能也不是很简单

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-04T16:49:56.947

```
>> A=[1 4 7;2 5 8;3 6 9]

A =

     1     4     7
     2     5     8
     3     6     9

>> A-repmat(mean(A),size(A,1),1)

ans =

    -1    -1    -1
     0     0     0
     1     1     1 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-04T16:46:50.787

```
A = bsxfun(@minus,A,mean(A)); 
```

例如：

```
A = magic(5);
A = bsxfun(@minus, A, mean(A))
A =

     4    11   -12    -5     2
    10    -8    -6     1     3
    -9    -7     0     7     9
    -3    -1     6     8   -10
    -2     5    12   -11    -4 
```

# apache-flex - 应用程序意外停止：如何调试 flash builder

> ID：13220509
> 
> 赞同：1
> 
> 时间：2012-11-04T16:36:18.490
> 
> 标签：apache-flex

我需要使用移动调试模式，但每次我运行调试模式。flex 在我的手机上安装了一个应用程序，然后我的手机显示“应用程序已停止”。消息。flex 跳出调试模式，我什至无法打开已安装的应用程序。该应用程序甚至没有附加数据服务，也没有任何 UIobject 期望基本的。任何原因？？

我的代码很简单

```
<?xml version="1.0" encoding="utf-8"?>
<s:TabbedViewNavigatorApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                                  xmlns:s="library://ns.adobe.com/flex/spark" applicationDPI="160">
    <s:ViewNavigator label="Bidding" width="100%" height="100%" firstView="views.BiddingView"/>
    <s:ViewNavigator label="Reuse" width="100%" height="100%" firstView="views.ReuseView"/>
    <s:ViewNavigator label="Account" width="100%" height="100%" firstView="views.AccountView"/>
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
</s:TabbedViewNavigatorApplication> 
```

像这样。

视图的代码都是这样的。

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark" title="Account">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
</s:View> 
```

我使用的是 Flex 4.6，这个应用程序是为 Android 开发的。

# c# - 如何将 http 标头值传递给 WCF 休息服务操作？

> ID：13220511
> 
> 赞同：3
> 
> 时间：2012-11-04T16:36:27.273
> 
> 标签：c#, wcf, rest

有什么方法可以提取 http 标头值并将其传递给全局扩展点的 WCF 休息服务操作，例如自定义 IParameterInspector？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T17:06:55.863

通过您的 WCF 服务[WebOperationContext](http://msdn.microsoft.com/en-us/library/system.servicemodel.web.weboperationcontext.aspx)您可以访问当前请求的 http 标头，如下所示：

```
var request = WebOperationContext.Current.IncomingRequest;
string header = request.Headers[HttpRequestHeader.Cookie]; 
```

# c++ - C++ 错误：无法在初始化中将 'char (*)[63]' 转换为 'char*'

> ID：13220512
> 
> 赞同：2
> 
> 时间：2012-11-04T16:36:30.123
> 
> 标签：c++, c, pointers, char, char-pointer

在 C++ 中，我似乎比我最初想象的更菜鸟。就我对 C/C++ 的了解而言，这应该可行。我定义了一个字符数组，然后尝试分配一个指向开头的指针......我做错了什么？

```
// Create character array
char str[] = "t xtd 02 1CF00400 08 11 22 33 44 55 66 77 88 0   0 1234.567890";
// Assign pointer to beginning of array
char* p = &str; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-04T16:38:32.833

的类型`str`是`char[63]`。作为参考，请注意字符串文字本身的类型是`const char[63]`，而不是`const char *`。你取那个地址，它给你一个指向`char[63]`, 或的指针`char (*)[63]`。然后，您尝试将其分配给`char *`.

您应该做的不是获取地址，而是让数组衰减为指针：

```
char *p = str; 
```

但是，您真正应该做的是使用`std::string`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-04T16:37:58.900

您可以简单地省略地址运算符，

```
char *p = str; 
```

工作时，数组会自动衰减为指向该上下文中第一个元素的指针。或者，如果您愿意，可以明确地强制转换，但那将是可憎的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T16:40:36.413

```
 char* p = str; 
```

& 号是多余的。一个普通的数组名称只是表示它的开始地址。

# ruby-on-rails - 如何从存储在 Ruby 数据库中的对象中获取 id？

> ID：13220514
> 
> 赞同：0
> 
> 时间：2012-11-04T16:36:49.653
> 
> 标签：ruby-on-rails, ruby, activerecord, controller

我是 Ruby on Rails 的新手，我想创建一个非常简单的网站，我可以在其中保存一些引用。我有几个表：Citation 和 Autor，这里是对应的模型。

```
class Citation < ActiveRecord::Base
  belongs_to :autor
  attr_accessible :text, :autor_id
end

class Autor < ActiveRecord::Base
  has_many :citations
  attr_accessible :name
end 
```

我希望当用户创建一个新的引文以向新的作者发出新的引用时，必须自动创建该作者。

这是我的 citations_controller 的一部分：

```
def create
    # Here I check if the autor already exist or not, if not, I create him (The user gave me his name)
    if !(Autor.exists?(:name => params[:citation][:autor_id]))
      Autor.create(:name => params[:citation][:autor_id])
    end

    #As I only have the name of the autor, I try to retrieve his Id
    params[:autor_id] = Autor.where(:name => params[:citation][:autor_id]).first.id

    @citation = Citation.new(params[:citation])

  end 
```

关键是，当我创建一个新引文时，字段 autor_id 填充为 0 而不是正确的作者 ID。我认为错误是当我尝试从名称中检索 Id 时，但我不知道如何修复它，也许有一个更简单的解决方案！

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T16:46:49.127

在创建新的 Autor 时将其保存在变量中，然后使用此变量获取 id 您可以将其用作

```
autor = (temp = Autor.where(:name => params[:citation][:autor_id]).first ? temp : Autor.create(:name => params[:citation][:autor_id]) 
```

您还可以使用与上述相同的 rails 的 find_or_create 方法。

之后，如果您想创建引文，您还可以执行以下操作：

```
autor.citations.create(params[:citation]) 
```

这将创建一个带有 autor id 和 params[:citation] 作为其属性的引文

# graphviz - 在graphviz中将边缘权重减少为零

> ID：13220517
> 
> 赞同：2
> 
> 时间：2012-11-04T16:36:59.293
> 
> 标签：graphviz, dot

我已经使用我非常满意的 graphviz 创建了一个图表，我需要再添加一个边缘。我目前有这个：

![当前图表](../Images/e8b06c86d9f9d9bf24e9348abedfc0e1.png)

（以下点中的来源）

我需要添加一条从 T 到 S 的边（绿色！），但是当我这样做时，图形的所有其余部分都会乱七八糟。我知道我的意思是让 graphviz 处理布局，但是这个图形成了一个序列，我希望它们至少看起来很相似。我已经尝试了各种使用图形集群的方法，并使用权重使所有其他边的权重非常高，新边的权重非常低，但似乎没有任何帮助。如何添加从 T 到 S 的边，而不用担心该边必须很长。

我所拥有的点源是

```
digraph G {
  rankdir=LR
  subgraph clusterD3 {
  vSource [label="S*"]
    subgraph clusterD2 {
      color=white
      S
      T
      subgraph clusterD1 {
        color=white
        {rank=same; B A}
        {rank=same; D C}
        A->C 
        B->D  
        A->D 
        C->D 
        B->A 
        }   
        S->A 
        S->B 
        C->T 
        D->T 
     }
  vSink [label="T*"]
  vSource->A [color=red]
  vSource->B [color=red]
  vSource->C [color=red]
  vSource->D [color=red]
  vSource->T [color=red]
  A->vSink   [color=blue]
  B->vSink   [color=blue]
  C->vSink   [color=blue]
  D->vSink   [color=blue]
  S->vSink   [color=blue]
  }  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T17:04:52.147

添加

```
{rank=same;vSource;S} 
```

解决问题：

```
digraph G {
  rankdir=LR
  subgraph clusterD3 {
  vSource [label="S*"]
    subgraph clusterD2 {
      color=white
      S
      T
      {rank=same;vSource;S}
      subgraph clusterD1 {
        color=white
        {rank=same; B A}
        {rank=same; D C}
        A->C 
        B->D  
        A->D 
        C->D 
        B->A 
        }   
        S->A 
        S->B 
        C->T 
        D->T 
     }
  vSink [label="T*"]
  vSource->A [color=red]
  vSource->B [color=red]
  vSource->C [color=red]
  vSource->D [color=red]
  vSource->T [color=red]
  A->vSink   [color=blue]
  B->vSink   [color=blue]
  C->vSink   [color=blue]
  D->vSink   [color=blue]
  S->vSink   [color=blue]
  T -> S     [color=green]
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-10-14T10:01:25.023

constraint=false 也有效：

> T -> S [颜色=绿色，约束=假]

# jquery - 仅在加载时显示模态一次

> ID：13220519
> 
> 赞同：1
> 
> 时间：2012-11-04T16:37:06.980
> 
> 标签：jquery

我有一个显示模式对话框 onload 的页面。在模式被解除之前，用户需要检查并提交一个复选框（想想使用条款）。一旦发生这种情况，页面可以再次重新加载，但对话框永远不会回来。最初我想使用 PHP 会话，但我想用 JS (jQuery) 关闭对话框而不重新加载页面。什么是替代方案？我可以在会话期间使用 cookie 吗？

我当前的代码如下所示：

JS：

```
$(document).delegate('#myButton', 'click', function() {

     if ($('input[name="myCheckbox"]').is(':checked')) {
        $('#myDialog').remove();
    }
}); 
```

HTML：

```
<div id="myDialog">
   text
   <input type="checkbox" name="myCheckbox"> <input id="myButton" type="button" value="click me">
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T16:40:07.867

您可以永久使用 localStorage 或 sessionStorage 仅用于一个会话

```
 localStorage.setItem('showModal',true);
 localStorage.getItem('showModal'); 
```

它是纯javascript。无需在服务器端执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-10-21T16:21:52.020

```
$(window).on('load',function(){
  if (document.cookie.indexOf('visited=true') == -1){

    $('#myModal').modal({show:true});
    var year = 1000*60*60*24*365;
    var expires = new Date((new Date()).valueOf() + year);
    document.cookie = "visited=true;expires=" + expires.toUTCString();
  }
}); 
```

# javascript - Javascript替换子/循环问题

> ID：13220520
> 
> 赞同：6
> 
> 时间：2012-11-04T16:37:18.370
> 
> 标签：javascript, for-loop, parent-child

我有一个非常奇怪的问题，我有一个forloop，它应该用“原始”类替换所有div，用“新”类替换文本输入。当我运行循环时，它只用输入替换所有其他 div，但如果我运行循环只是替换 div 的类而不将标签更改为输入，它会执行每个 div，并且不仅做其他的。

这是我的循环代码，以及现场版本的链接：[现场版本在这里](http://r3dux.com/css/div.html)

```
function divChange()    {
    var divs = document.getElementsByTagName("div");
    for (var i=0; i<divs.length; i++) {
        if (divs[i].className == 'original') {
            var textInput = document.createElement('input');
            textInput.className = 'new';
            textInput.type = 'text';
            textInput.value = divs[i].innerHTML;
            var parent = divs[i].parentNode;
            parent.replaceChild(textInput, divs[i]);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-04T16:47:35.463

因为`divs`当它的元素之一从 DOM 中删除时集合会更新`div`，所以您最终会跳过 div，因为您`i`没有随着集合的重新索引而更新。

一个常见的解决方案是反向迭代。

```
function divChange()    {
    var divs = document.getElementsByTagName("div");
    for (var i=divs.length - 1; i > -1; i--) {
        if (divs[i].className == 'original') {
            var textInput = document.createElement('input');
            textInput.className = 'new';
            textInput.type = 'text';
            textInput.value = divs[i].innerHTML;
            divs[i].parentNode.replaceChild(textInput, divs[i]);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T16:57:39.460

您可以使用的另一个解决方案是将实时 HTMLCollection 复制到惰性数组，并使用您的原始逻辑：

```
function divChange() {
    var divs = document.getElementsByTagName("div");
    divs = Array.prototype.slice.call( divs ); //convert to array
    for (var i = 0; i < divs.length; i++) {
        if (divs[i].className == 'original') {
            var textInput = document.createElement('input');
            textInput.className = 'new';
            textInput.type = 'text';
            textInput.value = divs[i].innerHTML;
            var parent = divs[i].parentNode;
            parent.replaceChild(textInput, divs[i]);
        }
    }
}

divChange(); 
```

[http://jsfiddle.net/2UCZa/1/](http://jsfiddle.net/2UCZa/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-08T11:46:34.970

我不知道为什么，但这似乎最终起作用了：

```
ModalBody.insertAdjacentHTML('afterbegin', loader.outerHTML); 
```

我的 loader 基本上只是一个新的 div，但是在 div 里面有这个加载符号，在加载内容时会出现。

```
var loader = document.createElement('div');
loader.classList.add('loader');
loader.classList.add('is-loading');
loader.classList.add('mt-5'); 
```

所以只有这条线

```
ModalBody.insertAdjacentHTML('afterbegin', loader); 
```

...当内容被加载时，很快就会显示 [object HTMLDivElement]，3 秒后或多或少会出现正确的内容。一旦我添加了这个“.outerHTML”，事情就变得正确了。我仍然是一个超级初学者。那么，也许有人也可以解释为什么这有效？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-23T19:33:40.477

另一种解决方案是从一个类似数组的对象创建一个数组，并对其进行迭代。例如：

```
var divs = document.getElementsByTagName("div");

Array.from(divs).forEach(function(el) {
  if (el.className == 'original') {
        var textInput = document.createElement('input');
        textInput.className = 'new';
        textInput.type = 'text';
        textInput.value = el.innerHTML;
        var parent = el.parentNode;
        parent.replaceChild(textInput, el);
    }
}); 
```

我最喜欢这个，因为它产生的代码最少，而且非常清晰！

# html - 当滚动条可见时，固定宽度的 div 会破坏布局

> ID：13220522
> 
> 赞同：0
> 
> 时间：2012-11-04T16:37:31.023
> 
> 标签：html, css

我正在尝试垂直堆叠一些具有“红色”背景的 div，这些 div 占据了页面的 100%。在这些 div 中，我制作了 960px 居中的 div。发生的事情很奇怪：如果我将窗口的大小调整为小于 960 像素（以使滚动条出现） - 每个堆叠 div 的右侧都有一个间隙。您可以在此处查看实时示例：http: [//jsfiddle.net/GLE7A/](http://jsfiddle.net/GLE7A/)

基本代码：

```
<style type="text/css">
    * { padding: 0; margin: 0; border: 0; }
    .wmain { background: red; }
    .w960 { margin: 0 auto; width: 960px; }
</style>

<div class="wmain">
    <div class="w960">
    test
    </div>
</div>

<div class="wmain">
    <div class="w960">
    test
    </div>
</div> 
```

**解决方案很简单：只需添加 min-width:960px; 到 .wmain div 来解决问题**

**问题**：为什么首先会发生这种奇怪的行为？固定宽度的孩子是否会以某种方式逃脱正常流程，例如绝对定位的 div 或 smth。？

谢谢你的想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T19:48:11.047

发生这种情况是因为您没有为 wmain div 定义任何宽度，这会使浏览器感到困惑。

# c++ - 将初始化变量转换为声明变量

> ID：13220525
> 
> 赞同：0
> 
> 时间：2012-11-04T16:37:37.007
> 
> 标签：c++, fstream

我正在重组我的代码，并且我有一长串初始化变量：

```
int i = 3; 
```

等等

将其转换为声明列表的简单方法是什么？这些将是：

```
int i; 
```

等等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T19:36:07.217

您可以为此任务使用任何自动文本处理工具。一个特别贴切和知名的是`sed`. 只需通过它管道您的源代码：

```
sed -e 's/\(\s*\)\([a-zA-Z_][a-zA-Z0-9_]*\) \([a-zA-Z_][a-zA-Z0-9_]*\) =.*/\1\2 \3;/' code/src/*.{cc,cpp,c} 
```

上面的正则表达式`[a-zA-Z_][a-zA-Z0-9_]`用于表示 C 标识符。（根据您的编码风格的一致性，您可能必须更聪明地处理一些空白。）

添加开关`-i`以进行就地更换。这会改变你的文件目录，所以要小心。

# jquery - JQuery 自动完成给出了意想不到的结果

> ID：13220527
> 
> 赞同：1
> 
> 时间：2012-11-04T16:37:45.250
> 
> 标签：jquery, zend-framework, autocomplete

希望可以有人帮帮我。我在让 JQuery Autocomplete 小部件在 Zend Framework 中正常工作时遇到了很多问题。当我开始输入时，我已经设法让自动完成显示并弹出一个项目列表，但是当我从弹出列表中选择一个选项时，自动完成的值不会更改为我选择的项目，而是更改为我实际从键盘输入的文本。我确定我可能在做一些愚蠢的事情，但我似乎无法弄清楚。任何帮助将不胜感激。

自动完成以如下形式创建

```
 $partner_name = new ZendX_JQuery_Form_Element_AutoComplete('unit_name', array(
        'label'     => 'Partner Name:',
        'required'  => true,
    ));      
    $partner_name->setRequired(true)
         ->addValidator("NotEmpty", true, 
                 array('messages'=>'The Partner Name field cannot be empty'));
    $partner_name->setJQueryParam('data',  array_values($partner_options));

    $partner_name->setDecorators(array('UiWidgetElement', 'Errors'));
    $this->addElement($partner_name); 
```

使用 $partner_options 一个学说结果集，然后将表单显示在 viewscript 装饰器中。这很好用，正如我所说，当我开始输入值时会显示列表。在我看来，我有一些在自动完成元素的更改事件上执行的 dojo javascript，如下所示：

```
<script type="text/javascript" src="<?= $this->baseUrl('/js/dojo-release-1.7.2/dojo/dojo.js')?>"
          data-dojo-config="async: true, parseOnLoad:true"></script>
  <script>
    require(["dijit/registry", "dijit/Dialog"], function (registry, dom)
    {

        dojo.connect(dojo.byId('unit_name'), "change", function(evt) {
            alert(dojo.byId('unit_name').value);
        });

    });
</script> 
```

如您所见，该脚本将更改事件连接到一个函数，该函数显示一个带有自动完成元素值的警报框。问题是它显示的值始终是我输入的字母，而不是我从列表中选择的值。

顺便说一句，当我使用 JQuery javascript 以及直接在我的视图中使用 JQuery UI 小部件时，也会发生同样的事情。

真的很迷茫。任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:13:46.487

您应该调查 Jquery 自动完成功能！

```
$( "#selector" ).bind( "autocompletechange", function(event, ui) {
  ...Then perform all required actions
}); 
```

# android - Android Widget (AppWidgetProvider) > 'two state' button like a toggle button.. 和 WindowManager

> ID：13220528
> 
> 赞同：0
> 
> 时间：2012-11-04T16:37:45.953
> 
> 标签：android, widget, togglebutton, brightness, appwidgetprovider

我终于设法用一个按钮创建了一个简单的小部件（1x1 单元格）。在我的情况下（现在）祝酒。这实际上很难做到。小部件的工作方式与普通应用程序不同。

到目前为止，我的所有重要文件的代码：http:
[//paste2.org/p/2427468](http://paste2.org/p/2427468)

问题1：

我有一个普通的按钮，有背景。我在那个按钮上有一个@drawable/...xml，它定义了正常和按下状态的不同图像。这很好用。由于小部件不支持切换按钮，我不得不使用“按钮”，但我想要切换按钮的效果。因此，在单击按钮后，按下状态必须固定/冻结！再次单击后，我应该修复/冻结正常状态。你怎么做到这一点？

问题 2：

如果问题 1 有效：我需要对正常状态和按下状态采取不同的操作。我想降低/提高屏幕的亮度。

在我创建的应用程序中，这很有效：

```
 WindowManager.LayoutParams lp = getWindow().getAttributes();
    Toast.makeText(getBaseContext(),"Low brightness",Toast.LENGTH_LONG).show();
    lp.screenBrightness = 0.004F;
    float BackLightValue = lp.screenBrightness;
    int SysBackLightValue = (int)(BackLightValue * 255);
    android.provider.Settings.System.putInt(getContentResolver(),android.provider.Settings.System.SCREEN_BRIGHTNESS,SysBackLightValue);             
    getWindow().setAttributes(lp); 
```

如何在小部件中实现这一点？

我相信我几乎完成了这个小部件，但需要解决这两个问题。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T06:40:12.857

不明白你的第一个问题，但对于第二个问题，你可以创建一个没有 UI 的活动并编写上面的代码来设置亮度。使用意图调用此活动并在它们之间共享数据。

# objective-c - 如何检查浮点数是否有两个有效数字？

> ID：13220531
> 
> 赞同：0
> 
> 时间：2012-11-04T16:38:15.407
> 
> 标签：objective-c, cocoa-touch, unit-testing, floating-point, nsstring

我正在编写一个单元测试来确定字符串值是否以 2 个有效数字出现，即。“NN”

```
 strokeValue = [NSString stringWithFormat:@"%.2f",someFloatValue]; 
```

如何编写一个断言，我的字符串总是有 2 位小数的测试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T17:18:57.977

由于您使用`%.2f`格式说明符格式化浮点值，因此根据定义，生成的字符串将始终有两位小数。如果`someFloatValue`是 5，您将获得 5.00。如果`someFloatValue`是 3.1415926，您将得到 3.14。

无需测试。对于给定的格式说明符，它总是正确的。

编辑：在我看来，您实际上可能想确认您使用的是正确的格式说明符。检查结果字符串的一种方法是：

```
NSRange range = [strokeValue rangeOfString:@"."];
assert(range.location != NSNotFound && range.location == strokeValue.length - 3, @"String doesn't have two decimals places"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T16:53:34.463

```
NSRegularExpression *regex = [NSRegularExpression  regularExpressionWithPattern:@"\.[0-9]{2}$" options:0 error:nil];
if([regex numberOfMatchesInString:strokeValue options:0 range:NSMakeRange(0, [strokeValue length])]) {
    // Passed
} else {
    // failed
} 
```

（未经测试）

# javascript - 从 .html() 中排除元素

> ID：13220538
> 
> 赞同：0
> 
> 时间：2012-11-04T16:38:48.783
> 
> 标签：javascript, jquery, html, api

我必须从 jquery 的 .html() 中删除特定元素（带有#add_phone 的按钮）。

事情就是这样。一开始有field(phone number) + select(phone type) + button(#add_phone)，三者都作为容器封装在div中。当我单击按钮时，它将通过 .html() 重新创建。JS如下：

```
$('#add_phone').click(function() {
    $('div.multiple_number:last').after('<div id="phone_div_id' + phone_div_id + '" class="multiple_number">'+ $('div.multiple_number').html() +'</div>');
    ...
    //append a remove [-] button, etc...     
}); 
```

这是html：

```
<div class="multiple_number" id="phone_div_id0">
    <label>Phone Number(s):</label>
    <input name="phone" id="phone[]" placeholder="Phone Number"/>
    <select name="phone_type[]" id="phone_type">
        <option value="1">Mobile</option>
        <option value="2">Home</option>
        <option Value="3">Office</option>
        <option Value="3">Fax</option>          
    </select>
    <input type="button" name="add_phone" class="add_phone_class" id="add_phone" value="ADD MORE" />
</div> 
```

所以实际上，我正在为一个表单创建多个电话号码。但是，这就是问题所在。里面是一个输入类型=“按钮”（`#add_phone`按钮）。我想将它从.html() 中排除。

**我试过了：**

```
$('div.multiple_number:not(#add_phone)').html()
$('div.multiple_number:not(input#add_phone)').html()
$('div.multiple_number:not(#add_phone)').not(#add_phone).html()
$('div.multiple_number:not(#add_phone)').not(input#add_phone).html() 
```

和类名对应，而不是使用id名。出于美学原因，我也不想将#add_phone 按钮放在 div 之外。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T18:48:51.090

我对您要查找的内容有点不清楚，但我假设`#add_phone`单击按钮时，您希望表单被复制并添加到其下方，但`#add_phone`按钮本身除外。

解决这个假设，以下应该有效

```
$('#add_phone').click(function() {
    var numberForms = $('div.multiple_number');
    var newNumberForm = numberForms.eq(0).clone(true);
    newNumberForm.find('#add_phone').remove();
    newNumberForm.attr('id', 'phone_div_id' + numberForms.length);
    numberForms.last().after(newNumberForm);
}); 
```

这是一个[现场 jsfiddle 演示](http://jsfiddle.net/F67Ap/)来展示它的工作原理。

由于某些原因，您最初的尝试没有奏效。主要的是`:not()`selector 和`.not`() 方法只对被选择的元素进行操作。它不会根据子元素进行过滤。`<div class="multiple_number" />`仅当您选择的元素也具有 ID时，这些方法才有效`add_phone`。

此外，不建议将其`.html()`用作克隆方法。使用字符串操作作为直接 DOM 操作的替代方法可能会在以后导致问题。使用`.html()`将迫使您必须将事件处理程序重新绑定到新创建的 DOM 元素。我在上面提供的策略应该更具前瞻性，因为它还将为任何被复制的元素克隆事件处理程序。在某些情况下，某些浏览器在调用 时不会完全复制原始元素`.html()`，这是避免它的另一个原因，除非您有特定原因将 DOM 元素序列化为字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T16:46:57.190

试试这个：

```
var innerHTML = $("div.multiple_number").html()
                .replace($("div.multiple_number input#add_phone").html(), ""); 
```

祝你好运

# windows-phone-7 - 同时播放多个 mp3/aac 文件？

> ID：13220539
> 
> 赞同：1
> 
> 时间：2012-11-04T16:38:49.697
> 
> 标签：windows-phone-7, windows-phone-8

在 Windows Phone 8 中，似乎有[四种不同的](https://stackoverflow.com/questions/12798393/wp7-play-audio-classes)方式来播放音频。我玩过这些类，似乎不可能同时播放两个 mp3 文件。

*   `MediaPlayer`支持mp3，但一次只能播放一个文件。
*   `SoundEffect`可以播放多个文件，但只支持wav。

必须有一种方法可以混合多个 mp3 文件。`Android`完美地做到了这一点。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T19:51:13.037

> 必须有一种方法可以混合多个 mp3 文件。

您需要将 mp3 文件组合成一个单独的输出流，因为 Windows Phone 只允许 3rd 方应用程序同时访问一个声道（不能同时访问）。

这对于各种原生库是可行的（现在大多数情况下，您可以在 WP8 上使用），但它必然会占用大量 CPU 并消耗大量电池。

# java - 无限while循环，.nextLine() 用户输入

> ID：13220542
> 
> 赞同：1
> 
> 时间：2012-11-04T16:39:01.893
> 
> 标签：java, string, user-input, infinite-loop

嗨，我有一个关于 .nextLine 的使用以及为什么它在无限循环期间第二次跳过用户输入的问题。.next 函数（字母输入）仍然每次都要求用户输入，但 .nextLine 函数（短语输入）不会。谢谢。

```
 import java.util.Scanner;

    public class Lab6 {
      public static void main (String [] args) {
        Scanner in = new Scanner(System.in);
        String phrase, l;
        char letter;

        while (true) {
          System.out.println("Enter a phrase. Enter 'quit' to quit.");
          phrase = in.nextLine();

          if (phrase.startsWith("quit")) {
            break;
          }

          System.out.println("Enter a letter");
          l = in.next();
          letter = l.charAt(0);

          System.out.println("Phrase entered is: " + phrase);
          System.out.println("Letter entered is: " + letter);

          int i = 0;
          int count = 0;
          while (i < phrase.length()) {
            if (phrase.charAt(i) == letter) {
              count++;
            }
            i++;
          }
          System.out.println(count);
        }
      }    
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-04T16:45:33.790

原因是`Scanner.next()`不消耗系统输入的换行符，所以输入会被传递给语句：

```
phrase = in.nextLine(); 
```

现在*不会*阻止已收到输入。

# drupal - 将 AJAX 附加到 Drupal Forms API 日期字段

> ID：13220543
> 
> 赞同：0
> 
> 时间：2012-11-04T16:39:04.987
> 
> 标签：drupal, drupal-7, drupal-forms

我正在开发一个包含日期字段的 Drupal 表单。

我在这个表单上有许多 AJAX 回调，效果很好，但现在我想根据用户的年龄更改一些表单元素，所以当日期更改时，其他字段会被替换。不幸的是，“#ajax”元素在日期字段上不可用（大概是因为该字段有三个选择，而不是一个选择）。

还有另一种方法可以实现 AJAX 回调吗？

我正在考虑将日期字段分成 3 个选择，每个选择都可能有一个 AJAX 元素，但这会失去日期字段的所有好处，所以我不想这样做，除非我必须这样做。

谢谢你的帮助，

詹姆士

# jquery - 如何调整页面大小？

> ID：13220548
> 
> 赞同：0
> 
> 时间：2012-11-04T16:39:41.020
> 
> 标签：jquery, html, css, xhtml

我正在设计一个网站，但我遇到了屏幕分辨率问题。我想缩放我的页面，但我做不到。

它是我的网站和 21.5 inc mac 屏幕：（完成，没问题） ![在此处输入图像描述](../Images/cb042d5875d3bab7ba2888701e982ccc.png)

它是我的笔记本电脑屏幕，分辨率为 1366 x 768 像素； ![在此处输入图像描述](../Images/ce9e220def85a07e0a17bbf251679fa1.png)

我在css上试过这个；

```
body, html {height:100%;} 
```

这在 html 上；

```
<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, maximum-scale=1">
  <link rel="stylesheet" href="css/style.css" type="text/css" media="all" /> 
```

文档类型是：XHTML 1.0 过渡

但不起作用。我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T17:00:39.553

基本上，你不能以一种简单、容易的方式。

视口标签和所有仅适用于移动设备（当前）的标签，因为它们以与桌面浏览器不同的方式加载整个页面并在其周围平移。

大多数网站都设计为垂直滚动，所以 CSS 非常适合水平拉伸，但对于垂直做同样的事情却非常非常糟糕。

一种方法是设计各种不同的版本，然后使用媒体查询来更改不同高度的属性。

在您的 CSS 中，这看起来像：

```
#box {
    width:100px;
    height:100px;
    background-color:red;
}

@media all and (max-height: 400px) and (min-height: 200px) {
    #box {
        background-color:green;
    }
} 
```

除非屏幕高在 200px 到 400px 之间，否则这将生成一个红色的框。当屏幕尺寸不同时，您可以使用该技术做不同的事情。这几天得到了很好的支持。（http://caniuse.com/#feat=css-mediaqueries - 基本上无处不在，但 IE8 及以下版本除外）。

另一种方法是使用视口单位（`vh`而不是`px`or `em`），其中`1vh`= 浏览器高度的 1%。现在支持非常糟糕（http://caniuse.com/#feat=viewport-units - 没有 firefox，没有 Opera，IE9 及更高版本）。

除此之外，您正在考虑使用 javascript 来调整圆形菜单的高度以使其缩放。如果您还没有搞清楚 JS，那么 jQuery 是值得一看的。

简而言之，为了让事情变得简单：

*   设计垂直滚动的网站
*   设计不能仔细滚动的网站，并为 600px、768px、720px 和 1080px 高屏幕定义不同的行为（记得在这里减去浏览器 chrome 的高度，我猜你可以估计在 100-300px 之间）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T17:18:58.230

您将 html 和 body 的高度设置为 100%，但是 body 内元素的高度和宽度呢？为了使它们流畅并适合所有屏幕尺寸，您必须以百分比形式给出几乎每个元素的高度和宽度以及填充和边距。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-04T16:46:20.970

您是否尝试过使用元标记视口？

```
 <meta name="viewport" content="width=320"> 
```

# java - NullPointerException 与 Servlet

> ID：13220553
> 
> 赞同：1
> 
> 时间：2012-11-04T16:40:07.360
> 
> 标签：java, servlets, nullpointerexception, requestdispatcher

我正在`Servlet`使用它的 URL 地址调用一个。这是我输入的 URL

```
http://localhost:7001/ryan/olympics?action=selectCatalog&id=1 
```

这肯定是 Servlet 的 URL；如果我改变我得到的地址

```
page not found 
```

这是 Servlet 的代码。

```
public class Servlet extends javax.servlet.http.HttpServlet
        implements javax.servlet.Servlet {

private static final long serialVersionUID = 1L;

public Servlet() {
    super();
}

public void init(ServletConfig config) throws ServletException {
    System.out.println("*** initializing controller servlet.");
    super.init(config);
}

protected void doPost(HttpServletRequest request,
  HttpServletResponse response) throws ServletException, IOException {

String action = request.getParameter("action");

if (action.equals("selectCatalog")) {
      String categoryId = request.getParameter("id");

      ProductModelDAO dao4 = new ProductModelDAOImpl("jpac");
      if (categoryId != null && !categoryId.trim().equals("")) {
          CategoryDAO dao1 = new CategoryDAOImpl("jpac");

    try {
        Category category = dao1.getCategoryName(categoryId);
        request.setAttribute("category", category);
        } catch (Exception e) {
        e.printStackTrace();
        }
    }

    try {
        @SuppressWarnings("unchecked")
        List<Product> products = dao4
            .getProductsByCategory(categoryId);
        request.setAttribute("products", products);
    } catch (Exception e) {
        e.printStackTrace();
    }

    url = "SelectCatalog.jsp";

 RequestDispatcher requestDispatcher =
  getServletContext().getRequestDispatcher(url);
requestDispatcher.forward(request, response); 
```

我得到`NullPointerException`指向`RequestDispatcher`'线。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T16:51:06.733

尝试更改`"SelectCatalog.jsp"`为`"/SelectCatalog.jsp"`，因为据我了解，您想使用`absolute path`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T17:25:53.870

如果要使用相对路径，则必须使用：

```
request.getRequestDispatcher(url); 
```

代替：

```
getServletContext().getRequestDispatcher(url); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-12T05:48:26.567

request.getParameter("action");

代码是用 doPost 方法编写的。你是从调用 servlet 的 doPost 方法调用这个 servlet 吗？doPost 方法不会使用 URL 参数。

# java - sharedPreference：写一些东西并保存它，一切都消失了

> ID：13220560
> 
> 赞同：1
> 
> 时间：2012-11-04T16:40:43.897
> 
> 标签：java, android

我正在开发这个应用程序，我有一个`EditText`字段，您可以在其中编写一些内容，然后将其保存并添加到列表（`TextView`）中。`EditText`我以这种方式保存的内容：

```
saved += "*" + editTextFelt.getText().toString() + ". \n"; 
```

`saved`是一个`String`。一切正常，我什至可以重新加载应用程序，它仍然显示在`TextView`. 为什么？

代码：初始化方法（）

```
sp = getSharedPreferences(fileName, 0);
betaView = (TextView)findViewById(R.id.betaTextView); 
```

我有一个发送文本的按钮，就像：

```
public void onClick(View v) {
        switch(v.getId()){
        case R.id.btnSend:
            saved += "*" + editTextFelt.getText().toString() + ". \n";
            SharedPreferences.Editor editor = sp.edit();
            editor.putString("SAVED", saved);
            editor.commit();

            betaView.setText(sp.getString("SAVED", "Empty")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T16:55:30.840

你是怎么保存的？因为当您针对变量保存文本时，它会替换前一个文本。

因此，您需要获取前一个，然后附加新的，然后再次将其保存到`SharedPreferences`，如下所示：

```
SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
String saved = sp.getString("YourVariable", "");
saved += "*" + editTextFelt.getText().toString() + ". \n"; //appending previous
//Editor to edit
SharedPreferences.Editor editor = preferences.edit();
editor.putString("YourVariable",saved);
editor.commit(); //don't forget to commit. 
```

现在将此附加文本设置为您的`TextView`如下：

```
betaView.setText(saved); 
```

# objective-c - 推特 OAuth iOS6

> ID：13220562
> 
> 赞同：1
> 
> 时间：2012-11-04T16:40:56.640
> 
> 标签：objective-c, ios6, twitter-oauth

如何在 6 的新 iOS 应用中使用 OAuth？访问令牌，访问秘密令牌。并显示为 App 的标识符，例如[http://ilearntutorials.files.wordpress.com/2012/11/captura-de-tela-2012-11-04-c3a0s-14-34-39.png](http://ilearntutorials.files.wordpress.com/2012/11/captura-de-tela-2012-11-04-c3a0s-14-34-39.png)

# c++ - CRT 删除 IGNORE_BLOCK 导致 ASSERT_FAULT

> ID：13220563
> 
> 赞同：2
> 
> 时间：2012-11-04T16:40:57.203
> 
> 标签：c++, crt

我使用一个由外包商开发的库。它有内存泄漏。为了调试我的应用程序，我总是必须知道新的更改不会导致新的内存泄漏。

我所做的是在他们的库中选择的所有块都具有 IGNORED_BLOCK 状态。

但是当我尝试这个时，Visual Studio 失败并出现 AssertFault：

```
#include <crtdbg.h>
#include <assert.h>

void main( )
{
  delete new(_IGNORE_BLOCK, __FILE__, __LINE__) int;
} 
```

# node.js - 来自 Node.js 的“管道中未处理的流错误”

> ID：13220565
> 
> 赞同：7
> 
> 时间：2012-11-04T16:41:20.013
> 
> 标签：node.js, sockets, express

我的应用：Node.js、Express、一些中间件，包括 connect-assets 和 express.static。

全部在本地机器（OSX，Node 0.8）上以开发模式运行（因此是 express.static）。

*可能是重要的细节：我最近通过 HTTPS 使整个应用程序工作（必要时从 HTTP 重定向）*，并且在开发时我使用自签名证书（当然在我的浏览器中启用）。

现在，该应用程序经常会因为这样的堆栈跟踪而失败：

(1)

```
stream.js:81
  throw er; // Unhandled stream error in pipe.
        ^
Error: write EPIPE
    at errnoException (net.js:769:11)
    at Object.afterWrite (net.js:593:19) 
```

(2)

```
stream.js:81
  throw er; // Unhandled stream error in pipe.
        ^
Error: socket hang up
    at SecurePair.error (tls.js:948:15)
    at EncryptedStream.CryptoStream._done (tls.js:432:17)
    at EncryptedStream.CryptoStream._pull (tls.js:577:12)
    at SecurePair.cycle (tls.js:866:20)
    at EncryptedStream.CryptoStream.end (tls.js:405:13)
    at Socket.onend (stream.js:66:10)
    at Socket.EventEmitter.emit (events.js:126:20)
    at TCP.onread (net.js:417:51) 
```

(3)

```
stream.js:81
  throw er; // Unhandled stream error in pipe.
        ^
Error: socket hang up
    at createHangUpError (http.js:1264:15)
    at CleartextStream.socketCloseListener (http.js:1315:23)
    at CleartextStream.EventEmitter.emit (events.js:126:20)
    at SecurePair.destroy (tls.js:938:22)
    at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

重要提示：这种情况经常发生，但不是每次都发生，所以我认为这不是我的代码中的错误。

我发现这可能是由于 express.static 和打开文件的限制，所以我跑了`ulimit -n 10000`- 不幸的是没有效果。

有任何想法吗？这开始非常令人沮丧。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T20:36:24.120

好的，看起来我找到了答案（至少我发现了一个类似的问题，尝试了他们的修复并且它停止下降）：

**`express.static`中间件必须是链中的最后一个**

# linux - 没有root权限的Linux原始输入？

> ID：13220566
> 
> 赞同：8
> 
> 时间：2012-11-04T16:41:35.767
> 
> 标签：linux, events, input

在 linux 程序上，在控制台上（如没有 xorg 等），我使用 /dev/input/event* 来读取键盘和鼠标，但是我需要成为 root 才能读取它们。是否有另一种形式可以在不需要 root 权限的情况下读取这些内容（无需更改权限和配置文件等）？

我理解为什么默认情况下会这样做，无需解释。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-04T16:44:48.957

是的，可以通过创建 udev 规则，请参阅此[HowTo](http://sourceforge.net/apps/mediawiki/gizmod/index.php?title=HOWTO_-_Setting_Input_Device_Permissions_-_Creating_a_udev_Rule)

> 例如，以 root 身份创建文件 /etc/udev/rules.d/99-input.rules：
> 
> 内核==“事件*”，名称=“输入/%k”，模式=“660”，组=“输入”

注意：您可能需要先创建组“输入”。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-04T16:48:21.700

检查设备文件属于哪个组。例如，在这里我得到：

```
$ ls -l /dev/输入/
...
crw-rw---- 1 root plugdev 13, 64 Nov 4 18:01 event0
crw-rw---- 1 root plugdev 13, 65 Nov 4 18:01 event1
crw-rw---- 1 root plugdev 13, 66 Nov 4 18:01 event2
crw-rw---- 1 root plugdev 13, 67 Nov 4 18:01 event3
crw-rw---- 1 root plugdev 13, 68 Nov 4 18:01 event4
...

```

执行您的程序的用户需要在此系统上的 plugdev 组中。您的系统上可能存在类似的情况。

如果您正在寻求一种规避方法（在不加入组的情况下读取或写入设备），那么不会。这显然会破坏用户组的安全目的。

直接读取事件设备的替代方法是使用适当的用户空间 API。例如，要读取键盘，您将使用 ncurses，而要读取鼠标，您将使用 GPM。

# objective-c - 在 NSSearchField 子类的 drawRect 中设置背景颜色

> ID：13220567
> 
> 赞同：2
> 
> 时间：2012-11-04T16:41:40.097
> 
> 标签：objective-c, cocoa, nsview, nstextfield, nssearchfield

我有一个自定义子类`NSSearchField`，我想设置它的背景颜色。

```
@interface CustomNSSearchField : NSSearchField
@end 
```

到目前为止，我已经尝试过：

**尝试#1**

```
@implementation CustomNSSearchField

- (void)drawRect:(NSRect)rect
{
    [super drawRect:rect];

    [self setDrawsBackground:YES];
    [self setBackgroundColor:[NSColor redColor]];
} 
```

这导致根本没有视觉变化：

![尝试 1](../Images/78aebcde20b40b8565a80921b4aeeecb.png)

然后我按照[这里](https://stackoverflow.com/questions/2962790/best-way-to-change-the-background-color-for-an-nsview)的建议并尝试了：

**尝试#2**

```
- (void)drawRect:(NSRect)rect
{
    [super drawRect:rect];

    [[NSColor redColor] setFill];
    NSRectFill(rect);
} 
```

结果是：

![尝试 2](../Images/2e66efa0f7294e33758ee5d094538f40.png)

如何在边界内和搜索字段文本后面设置背景*颜色*？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T23:20:05.813

你必须重新绘制整个东西。没有属性可以专门更改 NSSearchField 的背景颜色。看看这个例子：

[自定义 NSSearchField](https://www.cocoacontrols.com/controls/snrhudkit)

编辑：

还有什么值得指出的。您永远不应该覆盖控件的 drawRect 方法。您应该创建[NSSearchFieldCell](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSSearchFieldCell_Class/Reference/Reference.html)的子类。

# c++ - C++设计，如何用对象表示协议的不同阶段

> ID：13220569
> 
> 赞同：13
> 
> 时间：2012-11-04T16:41:39.793
> 
> 标签：c++, design-patterns

这不是一个技术问题，而是一个 c++ 设计问题。

通常，我似乎必须设计必须管理一些具有某种连接、解析阶段和抽象视图的协议的程序。通常，我会尝试在设计程序时将关注点分离放在首位。

我一直以对象的“堆栈”结束，系统位于解析器之上，而解析器又位于连接之上（通常有更多层）。然后这些对象使用成员函数调用来调用它下面的层（Tx），并使用回调（`std::function`通常）来捕获来自其他方向的信息（Rx）。

这种设计看起来真的很差，因为它增加了复杂性，而且每一层都必须有一个逐渐变大的构造函数等等。此外，由于连接通常使用 ASIO 之类的东西，回调通常在不同的线程上，因此很难推断线程安全性。

是否有更好地代表这种结构/功能的设计模式或习语？

## 编辑

一个简单的例子

```
class basic_connection {
     basic_connection(std::string address);

     void send(std::string);
     std::function<void(std::string)> on_receive;
}; 
```

我有几个像这样的类，它们保存该层的状态，并通过它们的公共成员函数和回调粘合在一起。

在此之上的层，接收网络的命令数据处理并调用`basic_connection::send`. `basic_connection`并从未经处理的上层获取原始数据并将其转换为命令。

## 编辑2：

我忘记提到的另一个问题是，您最终会通过堆栈转发某些接口，例如，顶层仍然需要知道连接状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T18:11:36.783

听起来您正在尝试做的就是通常所说的“构建管道”。

这是连接两层的一种简单方法：

```
class I
{
    virtual void a() = 0;
    virtual void b() = 0;
}

class X
{
    I& m_i;

    X(I& i) : m_i(i) {}

    void onRecv(const char* data, size_t len)
    {
        for (size_t p = 0; p < len; p++)
            switch (data[p])
            {
            case 'a': m_i.a(); break;
            case 'b': m_i.b(); break;
            }
    }
}

class Y : public I
{
    void a() { ... }
    void b() { ... }
}

int main()
{
    X x;
    Y y(x);

    while (...)
        x.onRecv(data,len);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T16:49:05.200

如果没有一组要求，很难推荐任何东西。但是，从您问题中的高级描述看来，您可能想要使用模型-视图-控制器模式，可能与其他模式一起使用。请记住，设计模式是您的朋友，您是决定使用是否合适以及使用程度的人。设计模式很容易被滥用，并且一直在发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T17:03:47.983

在我看来，您需要的是额外的抽象。我将首先设计一个通用类型来描述一个层实际上是什么，并（如果合适的话）为每个特定层改进它，而不考虑这些层的具体协议。因此，您可以说 layer-k 协议需要 layer-(k-1) 类型的对象。

根据您的描述，我假设您的较高层正在构建它们的直接较低层，这使得构造函数膨胀。只需为构造函数中的下一个较低层请求一个引用（可能最好由 a `shared_ptr`or实现`unique_ptr`），并让接口用户为它的实例化而烦恼。
由于您定义了一个抽象接口，您仍然可以多态地使用下层，而不必担心它是如何实现的以及使用什么特定的下层协议。

对于接收，您通常需要可以以相同方式实现的回调。您甚至可以将它们*安装*在更高层对象的构造函数中，并在析构函数中删除它们。

* * *

**如果您在设计时知道**哪个协议将与哪个其他协议一起使用，您还可以通过使您的协议实现成为接收其较低协议的模板来替换多态调用，如下所示：`Tcp<Ip<Ethernet<Device>>>`.

# ios6 - UICollectionViews 选择 2 个图像，一个在另一个之上

> ID：13220572
> 
> 赞同：0
> 
> 时间：2012-11-04T16:42:08.873
> 
> 标签：ios6, uicollectionview

当我从我的 CollectionView 中选择一个单元格（在 popOver 中）时，我的 mainView 显示了一个图像（使用 Storyboards 和 imageViews 和 CollectionViews）。

如何创建另一个（包含 UiCollectionView 的弹出窗口）让我选择一个图像并将第二个图像放在我已经显示的图像之上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T10:16:19.627

```
#pragma mark - UICollectionViewDataSource

- (NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView
{
    // Return the number of sections.
   // return [_carImages count] / 2;
    return 1;
}

- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return [_carImages count];
}

- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{

  //  CellTasteCollectionView *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"Cell" forIndexPath:indexPath];
   // image = [[UIImage imageNamed:[_carImages objectAtIndex:indexPath.row]];
  //  cell.imageView.image = image;

   // return cell;

    NSLog(@"INDEX PATH roe %@",[_carImages objectAtIndex:indexPath.row]);

    UICollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"Cell" forIndexPath:indexPath];
/*

 UIImageView *brickAnim = [[UIImageView alloc] initWithImage:[UIImage imageWithContentsOfFile: imageFilePath]];
 brickAnim.frame = CGRectMake(0, 0, 62, 57);
 [cell.contentView addSubview:brickAnim];
 cell.layer.borderColor=[UIColor whiteColor].CGColor;
 cell.layer.borderWidth=2.0;
  */  cell.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:[_carImages objectAtIndex:indexPath.row]]];
    return cell;

   /* MyCollectionViewCell *myCell = [collectionView
                                    dequeueReusableCellWithReuseIdentifier:@"MyCell"
                                    forIndexPath:indexPath];

    UIImage *image;
    int row = [indexPath row];

    image = [UIImage imageNamed:_carImages[row]];

    myCell.imageView.image = image;

    return myCell;*/
}

- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath {
  //  UIImage *image =[UIImage imageNamed: [_carImages objectAtIndex:indexPath.row]];
    return CGSizeMake(40, 40);
}

- (UIEdgeInsets)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout insetForSectionAtIndex:(NSInteger)section {
   return UIEdgeInsetsMake(20, 20, 20, 20);
}

#pragma mark -
#pragma mark UICollectionViewFlowLayoutDelegate

/*-(CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout *)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath
{
    UIImage *image;
    int row = [indexPath row];

    image = [UIImage imageNamed:_carImages[row]];

    return image.size;
}*/

- (void)selectItemAtIndexPath:(NSIndexPath *)indexPath animated:(BOOL)animated scrollPosition:(UICollectionViewScrollPosition)scrollPosition{

} 
```

# sql - 冒险作品解说

> ID：13220573
> 
> 赞同：12
> 
> 时间：2012-11-04T16:42:28.823
> 
> 标签：sql, sql-server, tsql, adventureworks

我一直在查看 Microsoft 的 Adventure Works 2012 数据库。如果有任何信息解释为什么要按原样创建表，我会非常感兴趣。我猜是某种架构概述。

例如：

为什么他们选择创建一个`BusinessEntity`表作为 Person、Employee 等的一种基类。

大多数数据都是标准化的，所以为什么他们选择将`CountryRegionCode`字段放入`StateProvince`表中，而不是将 ID 放入单独的表中。

无论如何，我非常有兴趣了解更多有关数据库设计决策的信息。任何人都知道进入这种事情的资源？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-04T19:39:06.290

我不知道 AdventureWorks 的任何官方设计文档，但我曾经是一名培训师，并且在演示和实验室中广泛使用 AdventureWorks 数据库，所以我非常熟悉它。

BusinessEntity 表是 SuperType/SubType 设计的经典案例，它减少了数据冗余，因为客户也可以成为供应商，员工可以成为客户，以及其他所有组合。此外，这意味着您不会在单独的表中重复存储与所有实体相关的详细信息，从而最大限度地减少代码更改时的工作量。

CountryRegionCode 我不赞成，但我怀疑以下三个原因之一：

1.  没有足够的不同组合来保证以报告性能为代价的附加表（这可以通过一些简单的 COUNT(*) GROUP BY 语句来验证）
2.  他们希望它在同一个表中，以便将来他们可以灵活地使用 hierarchyID 对层次结构进行建模（这是最不可能的选项）
3.  这是一个标准化错误！（我的钱在这个选项上！）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-04-20T15:31:50.280

这张图片帮助了我，尽管它在技术上是 2008 年的。

[![](../Images/c718d0455a0a2ab902cae6cd9f2decfb.png)](https://moidulhassan.files.wordpress.com/2014/07/adventureworks2008_schema.gif)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-19T08:41:51.880

这是一个在背景上填写一点的链接：

[https://technet.microsoft.com/en-us/library/ms124825(v=sql.100).aspx](https://technet.microsoft.com/en-us/library/ms124825(v=sql.100).aspx)

# xbee - API 模式下的 XBee 睡眠 模式

> ID：13220579
> 
> 赞同：2
> 
> 时间：2012-11-04T16:42:58.337
> 
> 标签：xbee

我目前正在开展一个项目，在该项目中我使用 XBee 2 mW Wire Antenna - Series 2 ( [ZigBee](http://en.wikipedia.org/wiki/ZigBee) Mesh) 等天线。

如何使用 API 模式下的软件（不使用[XCTU](http://www.digi.com/products/wireless-wired-embedded-solutions/zigbee-rf-modules/xctu)）将天线配置为进入睡眠模式？

我应该如何唤醒天线？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:35:32.187

有很多方法可以让您的设备进入睡眠状态。如果您无法访问 X-CTU，您可以通过另一根天线（通常是在任何微控制器的帮助下协调）

根据您分配的值，您可以配置 4 种睡眠类型 (SM)

*   0 - 不睡觉
*   1 - PIN HIBERNATE //我相信只有当 Sleep_Rq，模块引脚 9，从高状态转换到低状态时，这个才会唤醒设备。关于这种模式的文档不多
*   4 - Cyclic SLEEP //此模式取决于 SP 和 SN 参数。SP（20 到 AF0）是以毫秒为单位的睡眠周期，SN（0000 到 FFFF）是唤醒前的睡眠周期数
*   5 - 带引脚唤醒的循环休眠 //与以前相同，但您也可以在 Sleep_Rq（模块引脚 9）从高状态转换为低状态时唤醒设备。

这是一条典型的 api 消息，用于将您的终端设备配置为睡眠模式 4

```
7E //start delimiter 
00 0F //length 
17 //frame type identifier (remote AT message)
01 //frame ID 
00 7D 33 A2 00 40 5C 42 //64bit END-DEVICE address 
0C FF //16bit destination network address 
02 //command options 
83 77 //command name ( SM in ASCII ) 
04 //command data 
** //checksum 
```

一般来说，X.CTU 可以为您节省大量时间，如果由于某种原因您不能使用它，请查看这个有效的替代[Zigbee 运算符](http://www.zigbeeoperator.com/)

# puppet - 我的 Vagrant VM 可以在没有 Puppet master 的情况下使用带有 storeconfigs 的清单吗？

> ID：13220582
> 
> 赞同：17
> 
> 时间：2012-11-04T16:43:27.113
> 
> 标签：puppet, vagrant, openstack

我正在尝试建立一个多 VM Vagrant 环境，该环境启动一个[OpenStack](http://openstack.org)控制器和几个 OpenStack 计算节点，然后在计算节点上配置一两个 VM。

是的，我说的是在虚拟机上运行的虚拟机。听起来有点疯狂，但是这个多虚拟机 Vagrant 环境已经在[https://github.com/lorin/openstack-ansible](https://github.com/lorin/openstack-ansible)上创建并且它运行良好，正如我在[http://wiki.greptilian.com/中描述的那样开放堆栈](http://wiki.greptilian.com/openstack)

但是，我只能从 GitHub 存储库及其相应的[技术讲座](http://lorinhochstein.wordpress.com/2012/08/12/ansible-vagrant-and-openstack/)中汲取灵感，因为它使用 Ansible 作为 Vagrant 配置器，而我需要使用 Puppet。

我想在[https://github.com/puppetlabs/puppetlabs-openstack](https://github.com/puppetlabs/puppetlabs-openstack)上为 OpenStack 使用官方 Puppet Labs 模块，但它使用 storeconfigs，所以我收到这样的错误，因为我的 Vagrantfile 不包含作为木偶大师：

`warning: You cannot collect exported resources without storeconfigs being set; the collection will be ignored on line 142 in file /tmp/vagrant-puppet/modules-0/nova/manifests/init.pp`

`Resource type anchor doesn't exist at /tmp/vagrant-puppet/modules-0/nova/manifests/db/mysql.pp:18 on node controller.example.com.`

我想我可以调整我的 Vagrantfile 以启动 Puppet master 以及 OpenStack 主机，但我不确定我会如何做到这一点，而且它似乎给 Vagrant 环境引入了额外的复杂性。

我想知道是否可以用“masterless” Puppet 来代替。[http://semicomplete.com/presentations/puppet-at-loggly/puppet-at-loggly.pdf.html](http://semicomplete.com/presentations/puppet-at-loggly/puppet-at-loggly.pdf.html)上的一篇文章表明这​​是可能的，说，“ `puppet –environment prerun manifests/prerun.pp`......使 storeconfigs 工作`puppet –storeconfigs manifests/site.pp`......这是主木偶运行”，但我对实现细节感到困惑。

谁能指出我运行“masterless”Puppet 但使用 storeconfigs 的 Vagrant 存储库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-09T19:05:42.877

您需要使用所有 vagrant VM 都可以访问的数据库配置您的 storeconfigs。Loggly 使用 AmazonRDS，但您可以使用其他数据库作为[puppet docs show](http://projects.puppetlabs.com/projects/1/wiki/using_stored_configuration)。假设您有一个所有虚拟机都可以访问的数据库，并且您使用 storeconfigs 选项运行 puppet，并且您在 puppet 中配置了正确的数据库连接信息，那么您应该很好。

# google-maps-api-3 - api google 中的 Esri 基本地图

> ID：13220583
> 
> 赞同：2
> 
> 时间：2012-11-04T16:43:32.030
> 
> 标签：google-maps-api-3, arcgis, esri

我想在 google 的 api 中引入一个 Esri 底图作为图层。是否可以？

我需要帮助，在网络上没有足够的关于这个主题的信息，但是这是一个使用 Arcgis 技术作为底图的网络：

[http://www.mapsofall.com/arenas-38866185.htm](http://www.mapsofall.com/arenas-38866185.htm)

非常感谢，

阿尔弗雷德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-30T23:30:59.463

您可以使用**arcgislink （ArcGIS Server Link for Google Maps API V3），** [github](https://github.com/googlemaps/v3-utility-library/tree/master/archive/arcgislink)上 GMaps v3-utility-library 的子项目。

你想要的例子在[这里](https://github.com/googlemaps/v3-utility-library/blob/master/archive/arcgislink/src/arcgislink.js)。

用于 Google 地图的 arcgislink 上的[ArcGISOnline 服务](https://htmlpreview.github.io/?https://raw.githubusercontent.com/googlemaps/v3-utility-library/master/archive/arcgislink/docs/examples.html#ArcGISOnline)

# ruby-on-rails - 在 Spree 结账流程中添加一个步骤

> ID：13220589
> 
> 赞同：12
> 
> 时间：2012-11-04T16:44:00.130
> 
> 标签：ruby-on-rails, spree

我正在尝试向我的 Spree 1.2 商店添加一个额外的步骤，这将允许客户创建订阅。我已经插入了步骤，并呈现了正确的视图，但是当用户单击“保存并继续”时，会呈现下一步，但实际上没有保存任何内容。

我知道我需要添加一个 state_callback，但我不确定如何执行此操作，并且 Spree 文档对此非常缺乏（大概是因为它很新）

目前我的扩展中有以下内容：

模型/狂欢/order_decorator.rb

```
Spree::Order.class_eval do
  belongs_to :subscription

  accepts_nested_attributes_for :subscription

  # This doesn't appear to be called
  Spree::Order.state_machine.after_transition :from => :subscription,
                                              :do => :valid_subs?

  checkout_flow do
    go_to_state :address
    go_to_state :subscription
    go_to_state :payment, :if => lambda { |order| order.payment_required? }
    go_to_state :confirm, :if => lambda { |order| order.confirmation_required? }
    go_to_state :complete
    remove_transition :from => :delivery, :to => :confirm
  end
end 
```

不完全确定accepts_nested_attributes 是必要的，但我的开发方法到目前为止一直在反复试验，所以它最终留在那里。

在模型/订阅.rb

```
class Subscription < ActiveRecord::Base

  attr_accessible :start_date, :frequency

  belongs_to :user 
  has_many :orders
  has_many :products

  validates :start_date, :frequency, :presence => true

  def schedule
    ...code that returns a list of dates rendered on FE...
  end

  private #----

  ... some methods used in schedule ...

  def valid_subs?
    binding.pry # never called
  end

  def after_subscription
    binding.pry # never called either...
  end
end 
```

意见/狂欢/结帐/_subscription.html.erb

```
<h1><%= t(:"subscription.title") %></h1>

<div class="columns alpha six" data-hook="subscription_calendar_fieldset_wrapper">
  <fieldset id="subscription_calendar" data-hook>
    <%= form.fields_for :subscription_picker do |subscription_picker| %>
      <legend><%= t(:"subscription.first_delivery") %></legend>
      <%= render :partial => 'subscription/picker' %>
    <% end %>
  </fieldset>
</div>

<div class="columns omega six" data-hook="subscription_dates_fieldset_wrapper">
  <fieldset id="subscription_dates" data-hook>
    <legend align="center"><%= t(:"subscription.next_deliveries") %></legend>
    <div class='dates'></div>
  </fieldset>
</div>

<div class="form-buttons" data-hook="buttons" style='clear:both;'>
  <%= submit_tag t(:save_and_continue), :class => 'continue button primary' %>
</div> 
```

意见/订阅/_picker.html.erb

```
<div class='row'>
  <label for="subscription_frequency">Occurs every:</label>
  <% frequency_options = [["2 Weeks", 14], ["3 Weeks", 21], ["Month", 30], ["2 Months", 60], ["3 Months", 90]] %>
  <%= select(:subscription, :frequency, options_for_select(frequency_options, 30), {}) %>
</div>
<div id="start-date-picker" class="calendar"></div>
<%= hidden_field(:subscription, :start_date, {value: (DateTime.now + 14).to_date.iso8601}) %>

... JS that creates the calendar ... 
```

单击“保存并继续”时，我看到发送了以下参数：

```
{
                  "utf8" => "✓",
               "_method" => "put",
    "authenticity_token" => "...BLAH...",
          "subscription" => {
         "frequency" => "30",
        "start_date" => "2012-11-17"
    },
                "commit" => "Save and Continue",
            "controller" => "spree/checkout",
                "action" => "update",
                 "state" => "subscription"
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T03:11:53.833

你有两个问题。您的回调没有触发，因为对 checkout_flow 的调用会擦除当前状态机并替换它。在调用 checkout_flow 之后将此代码移至：

```
Spree::Order.state_machine.after_transition :from => :subscription,
                                          :do => :valid_subs? 
```

其次，您的订​​阅信息没有保存，因为参数需要作为订单的一部分传递。参数应该像这样嵌套显示：

```
"order" => {    
    "subscription" => {
        "frequency" => "30",
        "start_date" => "2012-11-17"
    }
} 
```

您可以通过将对 select 和 hidden_​​field 的调用附加到适当的表单“subscription_picker”来做到这一点：

```
<%= subscription_picker.select(:frequency, options_for_select(frequency_options, 30), {}) %> 
```

和

```
<%= subscription_picker.hidden_field(:start_date, {value: (DateTime.now + 14).to_date.iso8601}) %> 
```

您可能应该将表单对象作为样式和可理解性的显式参数传递给您的部分。

干杯。

# r - PerformanceAnalytics 在 xts 上打破 rollaply ......奇怪

> ID：13220590
> 
> 赞同：0
> 
> 时间：2012-11-04T16:44:29.360
> 
> 标签：r, xts, finance, performanceanalytics

我正在尝试在某些 xts 对象上滚动计算某些函数。在我加载 PerformanceAnalytics 包后，在许多情况下使用 xts 这样做似乎存在问题......请参见下面的示例。我究竟做错了什么？这对我来说非常重要，因为它阻止了我正在执行的许多计算（很好，现在仍然是周末）。几个小时前我已经重建了所有主要的软件包。请在下面查看我的 sessionInfo。编辑：看看这个 PerformanceAnalytics 的东西，我想现在有更多的东西坏了。例如：

> table.DownsideRisk(ret)

```
Error: could not find function "sd.xts" 
```

这是我原来的例子：

```
require(quantmod)

# Get SP500 Index
getSymbols("^GSPC")

# This does not work
tail(rollapply(Cl(GSPC), 20, FUN=sd, fill=NA), 5)

# Hm, something with xts maybe?
z <- zoo(1:1500, as.Date(1:1500))
tail(rollapply(z, 20, mean, fill=NA), 5)
tail(rollapply(z, 20, sd, fill=NA), 5)

z <- as.xts(z)
tail(rollapply(z, 20, mean, fill=NA), 5)
tail(rollapply(z, 20, sd, fill=NA), 5)

require(PerformanceAnalytics)
# This does not work anymore
tail(rollapply(z, 20, sd, fill=NA), 5)
# This does not work anymore
tail(rollapply(Cl(GSPC), 20, FUN=sd, fill=NA), 5)
# Well, it looks like xts or PerformanceAnalytics problem... When I load PerformanceAnalytics, problems...

> require(quantmod)
Loading required package: quantmod
Loading required package: Defaults
Loading required package: xts
Loading required package: zoo

Attaching package: ‘zoo’

The following object(s) are masked from ‘package:base’:

    as.Date, as.Date.numeric

Loading required package: TTR
> 
> # Get SP500 Index
> getSymbols("^GSPC")
[1] "GSPC"
> 
> # This does not work
> tail(rollapply(Cl(GSPC), 20, FUN=sd, fill=NA), 5)
           GSPC.Close
2012-10-25         NA
2012-10-26         NA
2012-10-31         NA
2012-11-01         NA
2012-11-02         NA
> 
> # Hm, something with xts maybe?
> z <- zoo(1:1500, as.Date(1:1500))
> tail(rollapply(z, 20, mean, fill=NA), 5)
1974-02-05 1974-02-06 1974-02-07 1974-02-08 1974-02-09 
        NA         NA         NA         NA         NA 
> tail(rollapply(z, 20, sd, fill=NA), 5)
1974-02-05 1974-02-06 1974-02-07 1974-02-08 1974-02-09 
        NA         NA         NA         NA         NA 
> 
> z <- as.xts(z)
> tail(rollapply(z, 20, mean, fill=NA), 5)
           [,1]
1974-02-05   NA
1974-02-06   NA
1974-02-07   NA
1974-02-08   NA
1974-02-09   NA
> tail(rollapply(z, 20, sd, fill=NA), 5)

1974-02-05 NA
1974-02-06 NA
1974-02-07 NA
1974-02-08 NA
1974-02-09 NA
> 
> require(PerformanceAnalytics)
Loading required package: PerformanceAnalytics

Package PerformanceAnalytics (1.0.5.1) loaded.
Econometric tools for performance and risk analysis.
(c) 2004-2012 Peter Carl, Brian G. Peterson. License: GPL
http://r-forge.r-project.org/projects/returnanalytics/

Attaching package: ‘PerformanceAnalytics’

The following object(s) are masked from ‘package:graphics’:

    legend

> # This does not work anymore
> tail(rollapply(z, 20, sd, fill=NA), 5)
Error in FUN(.subset_xts(data, (i - width + 1):i), ...) : 
  unused argument(s) (fill = NA)
> # This does not work anymore
> tail(rollapply(Cl(GSPC), 20, FUN=sd, fill=NA), 5)
Error in FUN(.subset_xts(data, (i - width + 1):i), ...) : 
  unused argument(s) (fill = NA)
> # Well, it looks like xts or PerformanceAnalytics problem... When I load PerformanceAnalytics, problems...
> sessionInfo()
R version 2.15.2 (2012-10-26)
Platform: x86_64-pc-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8          LC_NUMERIC=C                 
 [3] LC_TIME=en_US.UTF-8           LC_COLLATE=en_US.UTF-8       
 [5] LC_MONETARY=en_US.UTF-8       LC_MESSAGES=en_US.UTF-8      
 [7] LC_PAPER=en_US.UTF-8          LC_NAME=en_US.UTF-8          
 [9] LC_ADDRESS=en_US.UTF-8        LC_TELEPHONE=en_US.UTF-8     
[11] LC_MEASUREMENT=en_US.UTF-8    LC_IDENTIFICATION=en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] PerformanceAnalytics_1.0.5.1 quantmod_0.3-21             
[3] TTR_0.21-1                   xts_0.8-8                   
[5] zoo_1.7-9                    Defaults_1.1-1              
[7] rj_1.1.0-4                  

loaded via a namespace (and not attached):
[1] grid_2.15.2    lattice_0.20-0 tools_2.15.2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T17:01:15.653

**PerformanceAnalytics**注册了一个`rollapply.xts`显然存在一些问题的方法。

您可以`as.zoo`在您的对象上使用`rollapply.zoo`来代替。

尝试`tail(rollapply(as.zoo(z), 20, sd, fill=NA, align='right'), 5)`

我不知道您在使用 PerformanceAnalytics 时会遇到哪些其他问题`sd.xts`（这不是一种方法）和`mean.xts`（现在在**xts**中）——充其量，这取决于您使用的版本。

* * *

这可能会使您的计算机爆炸，但在运行您的“大量代码”之前尝试采购它

```
rollapply.xts <- function(data, width, FUN, ...) {
  xdata <- xcoredata(data)
  out <- zoo:::rollapply.zoo(data=data, width=width, FUN=FUN, ...)
  xcoredata(out) <- xdata
  out
} 
```

* * *

```
R> suppressPackageStartupMessages(library(PerformanceAnalytics))
R> tail(rollapply(Cl(GSPC), 20, FUN=sd, fill=NA), 20)
           GSPC.Close
2012-10-04   10.80165
2012-10-05   10.80888
2012-10-08   10.82280
2012-10-09   12.94614
2012-10-10   14.96816
2012-10-11   16.27298
2012-10-12   17.48353
2012-10-15   18.42794
2012-10-16   18.44652
2012-10-17   18.76495
2012-10-18         NA
2012-10-19         NA
2012-10-22         NA
2012-10-23         NA
2012-10-24         NA
2012-10-25         NA
2012-10-26         NA
2012-10-31         NA
2012-11-01         NA
2012-11-02         NA 
```

# json - 解析 JSON 字符串 - ios sdk

> ID：13220594
> 
> 赞同：0
> 
> 时间：2012-11-04T16:44:56.227
> 
> 标签：json, ios

```
{"aps":{
        "alert":"New Test For The Win",
        "sound":"default"
        },
  "fk_device":"1513"
} 
```

我有这个 JSON NSString。如何解析这个 JSON 字符串并获取 fk_device 值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T17:07:45.743

你可以试试这个库[JSONKit](https://github.com/johnezang/JSONKit)。要获取字符串，您可以执行以下操作：

```
NSDictionary *deserializedData = [jsonString objectFromJSONString];
NSString *string = [deserializedData objectForKey:@"fk_device"]; 
```

# haskell - 在haskell中查找列表1是否是列表2的序列

> ID：13220598
> 
> 赞同：2
> 
> 时间：2012-11-04T16:45:14.963
> 
> 标签：haskell

我试图检查给定列表是否是另一个列表的子序列：

以下是给出 true 的列表示例：

```
subseq "" "w"
subseq "w" "w"
subseq "ab" "cab"
subseq "cb" "cab"
subseq "aa" "xaxa"
not (subseq "aa" "xax")
not (subseq "ab" "ba") 
```

我刚来，但在某些情况下它给出了错误的结果

```
subseq :: Eq a => [a] -> [a] -> Bool
subseq [] [] = True
subseq [] ys = True
subseq xs [] = False
subseq (x:xs) (y:ys) = x == y || subseq xs ( 1 `drop` ys ) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-04T16:57:33.533

两件事，一高一低。先说高水平：

您的递归案例不正确。在英语中，您已经写过一个非空列表是另一个非空列表的子序列，如果它们的第一个字符匹配，或者如果列表 1 中除第一个字符之外的每个字符都是第二个列表中除前两个字符之外的每个字符的子序列。这显然是不正确的，因为例如“aaa”不是“abc”的子序列，即使它们的第一个字符匹配，并且“db”不是“cab”的子序列，即使“b”是“b”的子序列.

对于最后一种情况，更好的方法是用英语将其表达为：“一个非空列表是另一个非空列表的子序列，如果： 1\. 它们的第一个字符匹配并且列表一的剩余字符是剩余字符的子序列列表 2 或 2。它们的第一个字符*不*匹配，列表 1 是列表 2 中除第一个之外的所有字符的子序列。”

由于这看起来像家庭作业，我将把它留给您将其翻译成 Haskell 代码。

低级：代码片段

```
subseq (x:xs) (y:ys) = x == y || subseq xs ( 1 `drop` ys ) 
```

不做你认为它做的事。`ys`已经是第二个列表中除第一个之外的所有元素；您不需要从中删除更多元素。此外，第一种情况 ( `subseq [] [] = True`) 是不必要的，因为它会被第二种情况捕获，但这没什么大不了的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T18:13:03.643

对于任何只是在寻找简单的线性时间实现的人，这里有一个。

```
subseq :: Eq a => [a] -> [a] -> Bool
[]     `subseq` _      = True
(_:_ ) `subseq` []     = False
(a:as) `subseq` (b:bs) = (if a == b then as else a:as) `subseq` bs 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T09:01:47.843

这样做：

```
import Control.Monad

subseq a b = elem a . filterM (\x-> [True,False]) $ b 
```

（[为此感谢 SO / sacundim](https://stackoverflow.com/a/12713201/849891)！）。

从 jacobm 的[回答](https://stackoverflow.com/a/13220710/849891)中得到建议，你会得到

```
subseq [] ys = True
subseq xs [] = False
subseq (x:xs) (y:ys) = x == y && (....) 
                    || x /= y && subseq (....) (....) 
```

用警卫写得更好，

```
subseq (x:xs) (y:ys) 
             | x == y    = (....) 
             | otherwise = subseq (....) (....) 
```

* * *

第一个代码最好被视为*规范*，而不是代码，它非常低效。为了改进它，我们可以尝试*融合* `elem`和`filterM`- 这可能已经实现为

```
filterM p xs = liftM concat $ sequence [ do {t<-p x; return [x|t]} | x<-xs] 
```

以便

```
elem xs $ filterM (\x-> [True,False]) ys                               ==
elem xs $ map concat $ sequence [ [[y|t] | t<-[True,False]] | y<-ys]   ==
elem xs $ map concat $ sequence [ [[y],[]] | y<-ys]                    ==

not.null $ filter (match [[x]|x<-xs]) $ sequence [ [[y],[]] | y<-ys]
  where
    match [] _ = True
    match _ [] = False
    match ([x]:t) ([y]:s) | x==y = match t s
    match q       (_:s)          = match q s                           == 

not.null $ [()|r<-sequence [ [[y],[]] | y<-ys], match [[x]|x<-xs] r]   ==

match2 xs ys
  where
    match2 [] _ = True
    match2 _ [] = False
    match2 (x:t) (y:s) | x==y = match2 t s
    match2 q     (_:s)        = match2 q s 
```

# android - 从 twitter 应用程序获取推文

> ID：13220599
> 
> 赞同：1
> 
> 时间：2012-11-04T16:45:16.780
> 
> 标签：android, twitter

我正在为 Android 开发一个社交媒体中心，计划从已安装的应用程序中获取推文等。这样做的好处应该是它本身不需要登录。该应用程序只会为我的自定义 rom 结合所有社交媒体/消息服务。

我的问题是，我如何从用户那里获取最近的时间线到我的应用程序中（从手机上的 twitter 应用程序中获取）

在此先感谢，djpbx。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T16:55:06.150

欢迎您联系每个 Android 版 Twitter 客户端的作者，看看他们是否提供支持此功能的 API。我怀疑他们都没有，希望他们没有任何安全漏洞，可以让脚本小子获取这些私人信息。

> 我正在为 Android 开发一个社交媒体中心，计划从已安装的应用程序中获取推文等。

这只有在应用程序与您合作时才有效。同样，这不太可能。

# javascript - EpicEditor 文本显示为而不是空格

> ID：13220615
> 
> 赞同：3
> 
> 时间：2012-11-04T16:47:29.170
> 
> 标签：javascript, html, web.py, mako, epiceditor

不确定这本身是否是一个实际问题，但我正在使用[Epic Editor](http://oscargodson.github.com/EpicEditor/)在我的 GAE 应用程序中输入和保存 markdown（使用[mako](http://www.webpy.org)作为模板引擎的 webpy）[。](http://www.makotemplates.org)

我在表单中有一个隐藏的输入元素，当我提交表单时，它会被 EpicEditor 的内容填充，但所有空格都被替换为`&nbsp;`. 这是预期的功能吗？如果我在 EpicEditor 网站上检查相同的代码，它显然会返回空格而不是我的`&nbsp;`有什么不同？

```
<form>
<!-- form elements -->
<input id="content" name="content" type="hidden" value></input>
<div id="epiceditor"></div>
<button type="submit" name="submit" id="submit">submit</button>
</form>

<script type="text/javascript">
    $('button#submit').click(function(){
        var content = editor.getElement('editor').body.innerHTML; //all the spaces are returned as &nbsp; and breaks are <br>
        $('input#content').html(content);
    });
</script> 
```

注意：我想将我的内容作为 Markdown 保存在我的数据存储的 TextProperty 字段中，并在使用marked.js 检索它时生成html标签

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T05:29:39.163

我是 EpicEditor 的创建者。你不应该得到innerHTML。在您编写时，EpicEditor 对 innerHTML 没有任何作用。您看到的文本和代码在所有浏览器之间都会有所不同，这就是`contenteditable`字段的工作方式。例如，某些浏览器会为空格插入 UTF-8 字符 some `&nbsp`。

EpicEditor 为您提供了标准化文本的方法。您不应该尝试手动解析文本。

```
$('button#submit').click(function(){
    var content = editor.exportFile();
    $('input#content').html(content);
}); 
```

更多详情`exportFile`：[http ://epiceditor.com/#exportfilefilenametype](http://epiceditor.com/#exportfilefilenametype)

PS你不需要做输入#内容。这与#content 相同:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T20:55:44.290

如果您不知道原因，您可以这样做：

```
<script type="text/javascript">
    $('button#submit').click(function(){
        var content = editor.getElement('editor').body.innerHTML; 
        content = content.replace("&nbsp;", " ");
        $('input#content').html(content);
    });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T12:00:32.870

[编辑：已解决] 我不应该使用`innerHTML`，`innerText`而是。

* * *

我发现 Epic Editor`&nbsp;`在第一个空间之前的所有空间上都使用了。这是一个功能，大概。

然而，这不是问题。所有的空间都被转换为`&nbsp;`，最终，我意识到它发生在 Epic Editor 加载自动保存的内容时`localStorage`。

我现在每次都从后端加载内容，而不是自动保存。不是最优的，但可以解决它。

# python - 用于表单处理的最佳可重用 django 应用程序是什么？

> ID：13220619
> 
> 赞同：0
> 
> 时间：2012-11-04T16:47:45.230
> 
> 标签：python, django, windows, pinax

在我的应用程序中，我想处理一些表单数据并稍后在不同的页面上显示。

我的问题是：你能推荐任何 django 应用程序来快速设置这样的系统吗？

我很感谢你的回答！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T17:48:10.460

Django 允许您在没有任何应用程序的情况下超级轻松地做到这一点。我强烈建议您阅读其基本的表单处理功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T16:54:16.100

也许您可以在 django 中使用适用于一般功能的通用视图。

[基于通用表单的视图的](https://docs.djangoproject.com/en/dev/topics/class-based-views/generic-editing/)参考，更多关于[基于类的视图](https://docs.djangoproject.com/en/dev/topics/class-based-views/generic-display/)

对于渲染，您可以使用[twitter bootstrap CSS](http://twitter.github.com/bootstrap/)或 @Calvin Cheng 提到[的 django-crispy forms](https://github.com/maraujop/django-crispy-forms)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T16:53:49.983

你的意思是像 django-crispy-forms ？ [https://github.com/maraujop/django-crispy-forms](https://github.com/maraujop/django-crispy-forms)

它建立在已经有能力的 django 表单框架之上 - [https://docs.djangoproject.com/en/dev/topics/forms/](https://docs.djangoproject.com/en/dev/topics/forms/)

Django cripsy forms 帮助您组织表单布局和配置`forms.py`，从而使您的模板`{{ form }}`上下文变量保持简单明了；不会失去`forms.py`配置中的可定制性。

# ios - UIBarButtonItem 的日历图标

> ID：13220625
> 
> 赞同：0
> 
> 时间：2012-11-04T16:48:38.620
> 
> 标签：ios, uibarbuttonitem

有谁知道我在哪里可以获得像 Mac 提醒中的日历模板图标？还是我必须自己创建一个……=（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T17:02:00.550

如果您想使用图标，有很多网站可以获取用于商业或非商业用途的图标。如：

[http://www.iconfinder.com/](http://www.iconfinder.com/)

[http://www.findicons.com/](http://www.findicons.com/)

# gridview - 处理项目点击事件时停止 selectionChanged 事件

> ID：13220628
> 
> 赞同：2
> 
> 时间：2012-11-04T16:48:59.860
> 
> 标签：gridview, windows-8, winrt-xaml

我试图在点击项目时停止选择 gridview 项目。每次我点击一个项目时，它都会选择它并调出应用栏。

问题是，我需要独立处理被点击的项目和项目滑动选择事件。

我希望项目点击事件绑定页面上的另一个列表视图..而我希望项目滑动选择或右键单击以选择项目并调出应用栏。

我有 selectionChanged 动作工作..但它工作得太好了。每次我点击一个项目时它都会触发。所以我将属性添加到网格项 IsTapEnabled="False"。我已将我的项目点击事件处理程序的位置从网格项目更改为网格视图，但仍然会触发 selectionChanged 事件。

有没有办法阻止 gridview 的 selectionChanged 事件在处理其项目的项目点击事件时被触发？

谢谢！

网格视图 XAML：

```
 <GridView x:Name="GridViewName" Grid.Column="1" Margin="0, 75, 0, 0"
                      CanReorderItems="True" CanDragItems="True" 
                      SelectionChanged="GridViewTasks_SelectionChanged_1" 
                      IsTapEnabled="False" Tapped="Grid_Tapped_1">
                <GridView.ItemTemplate>
                    <DataTemplate>
                        <Grid Style="{Binding Style}" HorizontalAlignment="Left" 
                              Width="250" Height="150" 
                              Drop="VariableSizedWrapGrid_Drop_1" AllowDrop="True" >
                         ...
                        </Grid>
                    </DataTemplate>
                </GridView.ItemTemplate>
            </GridView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T19:22:16.097

您需要以下代码`GridView`

```
IsSwipeEnabled="True" IsItemClickEnabled="True" ItemClick="ItemClick" 
```

# javascript - 通过 id 获取 iframe

> ID：13220635
> 
> 赞同：1
> 
> 时间：2012-11-04T16:49:23.367
> 
> 标签：javascript, iframe

我想访问 ifram，目前我使用了以下代码并且它可以工作：

```
window.frames[0].document.body.style.setProperty('direction', 'rtl') 
```

但我想通过其 id ( `tinymce_ifr`) 获取 iframe。我尝试了以下但没有奏效：

```
document.getElementById('tinymce_ifr').document.body.style.setProperty('direction', 'rtl') 
```

做这项工作的正确方法是什么？

# c# - 带有选项的确认对话框

> ID：13220636
> 
> 赞同：0
> 
> 时间：2012-11-04T16:49:24.053
> 
> 标签：c#, winforms, dialog

我需要一些关于执行此操作的最佳方法的说明，我有一些伪代码。

```
/*form needs to be a drop down as below*/
//    -------------------------------
//   |                          X   |
//    -------------------------------
//   |     "chose your option"      |
//   |                              |
//   |       [choice 1 [v]]         |
//   |                              |
//   |   [ok]         [cancel]      |
//    -------------------------------

int optionchosen = confirmoptionbox();
if (optionchosen==1){
    //do something
}
if (optionchosen==2){
    // do something else
}
if (optionchosen==3){
    // third way
}
//etc etc 
```

现在，我知道如何使用新表单（等等）来做到这一点，但我真的想知道是否有一个更“优雅”的选项不涉及大量的东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T17:53:46.823

真诚地，我看不出自己编写表格的问题出在哪里。但是，您编写的伪代码几乎是完美的，实际上这是最好的方法。尽管我要写的时候你的伪代码可以改进。说到表单，您可以以这种方式构造它以使其*可重用*：

```
class myForm : Form{
    public int Result;

    private Label lblText;
    private Button btnOk, btnCancel;
    private CheckBox[] checkboxes;     

    public myForm(string text, params string[] choicesText){
        //set up components
        lblText = new Label(){
           Text = text,
           AutoSize = true,
           Location = new Point(10, 10)
           //...
        };

        checkboxes = new CheckBox[choicesText.Length];
        int locationY = 30;
        for(int i = 0; i < checkboxes.Length; i++){
           checkboxes[i] = new CheckBox(){
               Text = choicesText[i],
               Location = new Point(10, locationY),
               Name = (i + 1).ToString(),
               AutoSize = true,
               Checked = false
               //...
           };

           locationY += 10;
        }

        btnOk = new Button(){
           Text = "OK",
           AutoSize = true,
           Location = new Point(20, locationY + 20)
           //...
        };

        btnOk += new EventHandler(btnOk_Click);
        //and so on 

        this.Controls.AddRange(checkboxes);
        this.Controls.AddRange(new Control[]{ lblText, btnOk, btnCancel /*...*/ });
    }

    private void btnOk_Click(object sender, EventArgs e){
        Result = checkboxes.Where(x => x.Checked == true).Select(x => Convert.ToInt32(x.Name)).FirstOrDefault();
        this.Close();
    }      
} 
```

然后在主窗体中：

```
using(myForm form = new myForm("Select a choice", "choice 1", "choice 2")){
   form.ShowDialog();
   int result = form.Result;
   switch(result){
     case 1: MessageBox.Show("You checked choice 1") ; break;
     case 2: MessageBox.Show("You checked choice 2") ; break;
     default: MessageBox.Show("Invalid choice"); break;
   }
} 
```

**PS：**

在这里我使用了复选框，但您可以更改它并添加具有下拉样式的组合框，然后您将拥有所需的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T17:00:54.617

设计一个表单。将其作为模式窗口打开并从 NewForm 中获取价值

```
NewForm nf=new NewForm();

nf.ShowDialog(); 
```

# jdbc - 与多个参与者的 JTA 交易

> ID：13220641
> 
> 赞同：2
> 
> 时间：2012-11-04T16:49:47.610
> 
> 标签：jdbc, jms, jta, xa

我很难找到一个跨越多个资源（例如两个数据库、一个数据库和一个 JMS 队列等）的 JTA 事务的简单示例

我花了很多时间阅读这方面的内容，并且有使用 JMS 队列执行 JTA 事务以及通过 JDBC 数据库驱动程序执行 JTA 事务的工作示例。我似乎找不到任何关于使 JMS 队列和 JDBC 数据库成为同一个 JTA 事务的一部分。

任何人都可以提供一个简短的示例或链接来演示如何为此目的使用 JTA API 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T02:54:47.100

为了让 JTA 事务在 JMS 和 JDBC 资源之间进行协调，需要以下内容：

1.  **XAConnectionFactory** - JNDI 中必须有一个符合 JMS XA 标准的连接工厂；具体使用哪一种取决于您的应用程序服务器/容器。
2.  **兼容 XA 的 JDBC 驱动程序**- 驱动程序必须是 XA，大多数数据库都提供一个，并且连接必须支持`READ_COMMITTED`隔离级别，没有什么是不够的。

除此之外，如果您使用的是应用服务器，如果您使用消息驱动的 bean 和符合 XA 的驱动程序，容器将自动处理事务。

检查这些链接以获取示例：
[http ://blog.inflinx.com/2010/04/08/spring-jta-jpa-jms/](http://blog.inflinx.com/2010/04/08/spring-jta-jpa-jms/)
[http://www.oracle.com/technetwork/java/faq-140431.html# relship_transac](http://www.oracle.com/technetwork/java/faq-140431.html#relship_transac)

# php - 从 $_POST 值创建数组

> ID：13220645
> 
> 赞同：2
> 
> 时间：2012-11-04T16:50:19.130
> 
> 标签：php, arrays, forms

让我们开始告诉我，我正在通过表单中的 post 传递 x 数量的变量。
让我们将它们命名为`menu_category_1`, `menu_category_2`, ..., `menu_category_x`, 可能还有 menu_category_new （我使用 if empty 来检查最后一个变量）。

为了使事情更容易，我还发送了参数`$key`（从 0 开始的变量数量）。
现在我需要将它们设置为一个新变量`$menu_category`（数组），该变量将被内爆，然后更新我的数据库。

如何将该新`$menu_category`变量设置为包含开头命名的所有变量的数组？
我正在考虑使用 for 循环，但我想不出有用的东西。谢谢！！！

* * *

我最终采用了昆汀的方式，只需将 [] 添加到键中。我之所以选择这个只是因为它立即起作用。但是，我将深入研究 janenz00 的建议，我个人认为这是要走的路。感谢所有花时间经历这一切的人！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T16:55:46.243

您将表单元素（所有相同类型的元素）命名为`menu_category[]`（而不是`menu_category_N`）。

当你提交表单时，PHP 会自动将它们排列成一个数组！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T16:57:55.213

在表单中使用`[]`语法是首选。

但是，如果您出于某种原因不想这样做，您可以这样做：

```
for ($x = 0; $x <= $_POST['key']; $x++) {
   $menu_category[] = $_POST["menu_category_$x"];
}
$menu_category[] = $_POST['menu_category_new']; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T17:00:53.433

最好的方法是，当您发布信息时，像这样构造它。

```
<input type="text" name="cat_names[]" />
<input type="text" name="cat_names[]" />
<input type="text" name="cat_names[]" /> 
```

现在，当您发布数据时，变量 $_POST['cat_names'] 将包含 3 个元素。如果您有 4 个输入框，它将是一个 4 元素数组。

例子：

```
<input type="text" name="cat_names[]" value="a" />
<input type="text" name="cat_names[]" value="b" />
<input type="text" name="cat_names[]" value="echo" />
<input type="text" name="cat_names[]" value="kitten" /> 
```

发布数据

```
$_POST['cat_names'] = array('a', 'b', 'echo', 'kitten'); 
```

虽然没有说顺序会保持这样，但'b'可能在'a'之前。

但这取决于您是使用输入还是通过 JavaScript 进行。如果您使用 JS，您也可以发送其他信息，或者使用 JSON。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-04T17:05:30.523

正如上面每个人所建议的那样，最好的方法是将表单本身的所有内容作为数组传递。如果您因任何原因无法修改当前代码，这就是您在当前场景中处理它的方式。

```
 $menu_category = array();
    for ($i = 1; $i <= $_POST['key']; $i++) {
        if (!empty($_POST['menu_category_'.$i]))
           $menu_category[] = $_POST['menu_category_'.$i];

    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-04T16:55:22.380

> 让我们为它们命名`menu_category_1`，`menu_category_2`

您正在使用 PHP，所以让我们将它们命名为`menu_category[0]`、`menu_category[1]`等（或`menu_category[]`、`menu_category[]`等）。

然后`$_POST['menu_category']`or`$_GET['menu_category']`将是一个数组。

> 它将被内爆然后更新我的数据库

规范化您的数据库。使用外键和第二个表来表达您的一对多关系，而不是通过存储 CSV 数据。

# ebay-api - eBay API 在 AddItem 请求中使用 ExcludeShipToLocation 排除国家/地区

> ID：13220647
> 
> 赞同：1
> 
> 时间：2012-11-04T16:50:23.973
> 
> 标签：ebay-api

我正在尝试在沙盒环境中`AddItem`使用请求中定义从发货中排除的国家/地区列表。`ExcludeShipToLocation`请求通过，项目已列出，但在运输选项中看不到国家/地区的排除项。

我试过

```
<ShipToRegistrationCountry>true</ShipToRegistrationCountry> 
```

和

```
<ExcludeShipToLocation>[two letter country code]</ExcludeShipToLocation> 
```

正如文档中指出的那样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T09:27:42.810

从您的代码中，我无论如何都看不到您使用的哪个字段，我可以告诉您运输系统的简单规则是什么。您必须选择运送地点 -> ShipToLocation

并设置类似 ShipToLocation -> EuropeanUnion

现在通过使用 ExcludeShipToLocation 将世界其他地区设置为您不想发货的欧洲任何一个地方，例如：

```
$extra_exclude = "<ExcludeShipToLocation>Asia</ExcludeShipToLocation>";
$extra_exclude .= "<ExcludeShipToLocation>Central America and Caribbean</ExcludeShipToLocation>";
$extra_exclude .= "<ExcludeShipToLocation>Middle East</ExcludeShipToLocation>";
$extra_exclude .= "<ExcludeShipToLocation>North America</ExcludeShipToLocation>";
$extra_exclude .= "<ExcludeShipToLocation>Oceania</ExcludeShipToLocation>";
$extra_exclude .= "<ExcludeShipToLocation>Southeast Asia</ExcludeShipToLocation>";
$extra_exclude .= "<ExcludeShipToLocation>South America</ExcludeShipToLocation>";
$extra_exclude .= "<ExcludeShipToLocation>AL</ExcludeShipToLocation>";
$extra_exclude .= "<ExcludeShipToLocation>AD</ExcludeShipToLocation>";
<!-- And so on --> 
```

这实际上对我来说就像一个魅力，我仍然添加具有长排除列表的项目。我不得不发疯才能让它工作，但现在它很完美。

# local-storage - HTML5 离线图像大小存储限制

> ID：13220649
> 
> 赞同：2
> 
> 时间：2012-11-04T16:50:56.743
> 
> 标签：local-storage, offline-caching, html5-appcache

我目前正在用 HTML5 开发一个应用程序，目的是为用户提供离线访问信息。为此，使用技术 manifest appcache（文件）和 localStorage（数据），在 PHP + MySQL 中与我的应用程序执行数据同步

在我的场景中，有一个包含图像列表的寄存器，我创建了一个例程来生成 manifest.appcache（通过 PHP）以及需要在离线模式下显示的图像列表。
**问题是：这些图像的大小总和从 60mb 开始。**
通过 Chrome（桌面），此离线应用程序可以完美运行，但通过 Firefox、Android 和 iPhone 智能手机无法通过缓存清单的空间限制设备/浏览器运行。

**主要问题是：**
现在有可能开发 HTML5 解决方案来满足这些需求吗？我想知道为 Android 和 iPhone 开发特定应用程序的可能性，但目标是拥有一个独立于平台的解决方案。

* * *

**更新：**
在我的智能手机上使用 Cyanogemmod 7.1 Defy MB525 不起作用（Firefox 和默认浏览器）。
但是在我的朋友的 Galaxy S3 上，Android 4.0 运行良好（默认浏览器和 Chrome）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T14:08:10.997

作为我的测试和调查，不幸的是，有一种方法可以使这个应用程序在 HTML5 中运行，不受设备和浏览器的限制。

我发现以下页面详细说明了各种设备和浏览器的限制： [http ://www.browserscope.org/user/tests/table/agt1YS1wcm9maWxlcnINCxIEVGVzdBjwwK0RDA?v=3&layout=simple](http://www.browserscope.org/user/tests/table/agt1YS1wcm9maWxlcnINCxIEVGVzdBjwwK0RDA?v=3&layout=simple)

在同一页面上还有一个有趣的链接，您可以在其中测试存储限制： http: [//www.der-schepp.de/appcache-default-size/](http://www.der-schepp.de/appcache-default-size/)

# php - 无法让`get_image_tag`挂钩工作

> ID：13220655
> 
> 赞同：1
> 
> 时间：2012-11-04T16:51:47.337
> 
> 标签：php, wordpress

我很困惑，有人能告诉我为什么这没有做任何事情吗？我已经把它放在functions.php 文件中，但无论我尝试什么钩子，它都不起作用。我已经花了将近 2 天的时间在这上面，我没有任何想法。

```
function lightbox_image( $html, $id, $alt, $title, $align, $size ) {
    return $html."<span>The function is working</span>";
}
add_filter('get_image_tag', 'lightbox_image', 10, 6); 
```

任何帮助将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:36:49.153

我发现了问题，它工作正常，但是当您在文本编辑器中包含图像时会运行此功能。在页面加载时它不会被调用。

# android - Android GridView 按钮点击处理程序

> ID：13220657
> 
> 赞同：6
> 
> 时间：2012-11-04T16:51:58.567
> 
> 标签：android, android-gridview

我有一个`GridView`带有`ImageView`,`TextView`和两个`Button's`. Grid 看起来不错，但我发现很难在`GridView`. 我是安卓新手。

任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-04T17:07:17.767

如果您希望按钮（和其他任何东西）在您的布局中具有独特的点击操作，您需要编写一个自定义适配器并覆盖`getView()`：

```
public MyAdapter(Context context, List<T> objects) {
    ...
    inflater = (LayoutInflater) context.getSystemService(LAYOUT_INFLATER_SERVICE);
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder;
    if(convertView == null) {
        // Inflate and initialize your layout
        convertView = inflater.inflate(R.layout.grid_item, parent, false);
        holder = new ViewHolder();
        holder.btnOne = (Button) convertView.findViewById(R.id.btnOne);
        holder.btnOne.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                // Do something
            }
        });
        // etc, etc...
        convertView.setTag(holder);
    }
    else
        holder = (ViewHolder) convertView.getTag();

    // Do things that change for every grid item here, like
    holder.textOne.setText(getItem(position));          
    return convertView;
}

class ViewHolder {
    Button btnOne;
    TextView textOne;
} 
```

多年来，这个概念已经在各种 Google Talks 中得到了很好的解释，[这里有一个](http://www.google.com/events/io/2009/sessions/TurboChargeUiAndroidFast.html)。

* * *

**添加**

> 我试图在单击 GridView 内的按钮时在 GridView 列内设置 TextView 的文本。

您应该能够`onClick()`通过询问视图的父级然后获取 ViewHolder 来访问布局中的任何视图：

```
public void onClick(View v) {
    ViewHolder holder = (ViewHolder) ((View) v.getParent()).getTag();
    // Do something with holder.textOne now
} 
```

（这假设您的布局没有任何嵌套的 ViewGroup，因此请进行相应调整。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-25T09:09:15.240

在适配器内设置 OnClick 侦听器并侦听相同的单击，如[以下博客中所述](http://www.migapro.com/click-events-listview-gridview/)

**内部适配器**

```
 holder.okay_button.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            ((GridView)parent).performItemClick(v,position,0);

        }
    });
 holder.cancel_button.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            ((GridView)parent).performItemClick(v,position,0);

        }
    }); 
```

在java文件中。

```
gridView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int        position, long id) {
           switch(view.getId)
        {
         case R.id.okay_button:
           //do your stuff
           break; 
         case R.id.cancel_button:
           //do your stuff 
            break;
            }
    }); 
```

注意：如果您使用多个子项单击侦听器，请使用 switch case 检查在 SetOnItemClickListener 中单击了哪个项。因为使用 if else 会触发您在适配器中拥有的所有单击侦听器。如果有任何好的解决方案，请告诉我。谢谢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-02T17:05:40.873

```
 gridView = root.findViewById(R.id.gridview);
    CustomAdapter customAdapter = new CustomAdapter();
    gridView.setAdapter(customAdapter);
    gridView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> adapterView, View view, int i, long l) 
        {
            if(view.getId() == R.id.buyButton) {
                Intent intent = new Intent(getActivity(), OrderSummary.class);
                intent.putExtra("name", canWaterName[i]);
                intent.putExtra("price", canWaterPrice[i]);
                intent.putExtra("image", canWaterImage[i]);
                startActivity(intent);
            }
        }
    }); 
```

在扩展基本适配器的自定义适配器内部

```
 @Override
    public View getView(final int position, View convertView, final ViewGroup parent) {
        View view1 = getLayoutInflater().inflate(R.layout.row_data,null);
        //getting view in row_data
        final TextView name = view1.findViewById(R.id.canwaterName);
        final TextView price = view1.findViewById(R.id.canwaterPrice);
        final ImageView image = view1.findViewById(R.id.images);
        name.setText(canWaterName[position]);
        price.setText(canWaterPrice[position]);
        image.setImageResource(canWaterImage[position]);
        final Button buy = view1.findViewById(R.id.buyButton);
        buy.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                ((GridView)parent).performItemClick(v,position,0);
            }
        });
        return view1;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T17:01:16.407

您必须使用 onItemClickListener

```
 gridview.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v, int position, 
                long row) {
 } 
```

位置应该告诉你点击的元素。但我认为 gridview 在处理带有 clicklisteners 的对象（如按钮）时遇到问题。也许会更好地改变其他容器的gridview。如果您需要 gridview，您可以使用 setOnTouchListener 在屏幕中捕获位置并创建手动 onitemclicklistener。

# windows-phone-7 - 在 WP7 中，设置 App.Current.RootVisual 将部分 UI 隐藏在系统托盘后面

> ID：13220659
> 
> 赞同：0
> 
> 时间：2012-11-04T16:52:02.777
> 
> 标签：windows-phone-7

在我的 SilverLight 应用程序中，显示加载屏幕后，我使用

```
App.Current.RootVisual = new MyPage(); 
```

新页面的部分 UI 隐藏在系统托盘下。

![UI 部分隐藏](../Images/022df2aff773d7ac3a8857d350e3cd52.png)

我怎样才能防止这种情况？

PS：如果我使用它就不会发生

```
Uri destination = new Uri("/MyPage.xaml", UriKind.Relative);
((App)Application.Current).RootFrame.Navigate(destination); 
```

但随后用户可以通过按后退按钮返回加载屏幕。

# java - 实践中的并发性 - volatile ++

> ID：13220664
> 
> 赞同：6
> 
> 时间：2012-11-04T16:52:48.857
> 
> 标签：java, concurrency

在*Concurrency in Practice 中*，它说您可以使用 volatile 变量，如果

> 对变量的写入不依赖于其当前值。

所以，如果你有一个共享的、可变的变量`a`，并且所有线程对它做的都是 go `a++`（他们没有得到值，他们只是`++`）。

`volatile`然后根据报价，即使`a++`不是原子的，您也应该能够做到，对吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-04T16:56:30.997

不，`++`在`volatile`变量上使用*不是*线程安全的，因为

```
a++ 
```

相当于：

```
int temp = a;
temp = temp + 1;
a = temp; 
```

所以写回`a`可能发生*在*另一个线程修改后`a`，因为你的线程读取它，所以`a++`，即使`a`是易失的，*也不*是线程安全的。

您可以使用[`AtomicInteger`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/AtomicInteger.html)，它实现了线程安全的原子增量。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-04T16:57:03.210

a++ 读取 a 的值，因为它等价于

*   读一个
*   增加读取值
*   将新值分配给 a

所以不，在这种情况下你不能安全地使用 volatile 变量。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-04T17:48:52.397

**- 易失性做以下事情：**

*   标记的字段`volatile`将立即将其**值写入内存**，并**在退休期间**从内存中读取其**值**。

*   **防止在 Thread 中缓存**值****。****

 ****例如：**

`a++` **可以解释如下：**

**-**读取名为 a 的内存位置的值。

**-**增加值。

**-**将新增加的值写入名为 a 的内存位置。

现在上面的整个过程都是`not` **线程安全的，**`++` Java中的（增量运算符）不是**原子语句。**

**-**最好使用`synchronized`关键字，或者如果您不喜欢使用它，请使用`AtomicInteger`Class。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-04T17:43:01.413

a++ 不是原子的，它等价于

*   检索一个
*   加 1
*   将结果存储回

因此，如果另一个线程妨碍您，您仍然可以“错过更新” - volatile 并非旨在防止这种情况，这就是“同步块”和“锁”的用途。

a 易失性的事实仅影响其在线程中的可见性，因为 a 不存储在本地缓存中，因此不同的线程（在不同的内核或处理器上运行）可以立即“看到”它的新值。**

# java - 将线性链表打印到表格中

> ID：13220668
> 
> 赞同：0
> 
> 时间：2012-11-04T16:53:12.673
> 
> 标签：java, printing, linked-list

我正在尝试将我存储到 LLL 中的一些值打印到可读表中。我存储的数据如下：

```
DEBBIE     STARR           F 3 W 1000.00
JOAN       JACOBUS         F 9 W  925.00
DAVID      RENN            M 3 H    4.75
ALBERT     CAHANA          M 3 H   18.75
DOUGLAS    SHEER           M 5 W  250.00
SHARI      BUCHMAN         F 9 W  325.00
SARA       JONES           F 1 H    7.50
RICKY      MOFSEN          M 6 H   12.50
JEAN       BRENNAN         F 6 H    5.40
JAMIE      MICHAELS        F 8 W  150.00 
```

我已将每个名字、姓氏、性别、任期、工资率和薪水存储到他们自己的列表中。并且希望能够以与在我从中读取它们的文本文件中查看它们的格式相同的格式打印出来。我弄乱了一些允许我遍历和打印列表的方法，但我最终得到了丑陋的输出。. .

这是我存储文本文件的代码和我想打印的格式：

```
public class Payroll
{
  private LineWriter lw;
  private ObjectList output;
  ListNode input;
  private ObjectList firstname, lastname, gender, tenure, rate, salary;

  public Payroll(LineWriter lw)
  {
      this.lw = lw;
      this.firstname = new ObjectList();
      this.lastname = new ObjectList();
      this.gender = new ObjectList();
      this.tenure = new ObjectList();
      this.rate = new ObjectList();
      this.salary = new ObjectList();
      this.output = new ObjectList();
      this.input = new ListNode();
  } 
   public void readfile()
   {
       File file = new File("payfile.txt");
       try{
           Scanner scanner = new Scanner(file);
           while(scanner.hasNextLine())
           {
               String line = scanner.nextLine();
               Scanner lineScanner = new Scanner(line);
               lineScanner.useDelimiter("\\s+");
               while(lineScanner.hasNext())
               {
                   firstname.insert1(lineScanner.next());
                   lastname.insert1(lineScanner.next());
                   gender.insert1(lineScanner.next());
                   tenure.insert1(lineScanner.next());
                   rate.insert1(lineScanner.next());
                   salary.insert1(lineScanner.next());
                }
            }
        }catch(FileNotFoundException e)
        {e.printStackTrace();}
    }

   public void printer(LineWriter lw)
   {
       String msg = " FirstName " + " LastName " + " Gender " + " Tenure " +
                    " Pay Rate " + " Salary "; 
             output.insert1(msg);
             System.out.println(output.getFirst());
             System.out.println(" " + firstname.getFirst() + "      " + lastname.getFirst() + "\t" + gender.getFirst() +
            "\t" + tenure.getFirst() + "\t" + rate.getFirst() + "\t" + salary.getFirst());

     }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T17:10:29.297

您可以使用[C-style format specifiers](http://docs.oracle.com/javase/6/docs/api/java/util/Formatter.html#syntax)[`System.out.printf()`](http://docs.oracle.com/javase/6/docs/api/java/io/PrintStream.html#printf%28java.lang.String,%20java.lang.Object...%29)将字符串和整数打印到固定宽度的位置（对齐）的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T16:57:29.427

你试过这个吗

```
 String msg = " FirstName " + " LastName \t" + " Gender \t" + " Tenure \t" +
                " Pay Rate \t" + " Salary \t"; 
```

# haskell - 如何设置 haskell-mode 来生成标签？

> ID：13220672
> 
> 赞同：6
> 
> 时间：2012-11-04T16:53:39.507
> 
> 标签：haskell, emacs, haskell-mode

我正在尝试为 haskell 设置 emacs。我用 el-get 下载了 haskell-mode 并且某些部分正在工作（如缩进、启动 ghci 等），但我无法让[标签生成](http://www.haskell.org/haskellwiki/Emacs/Project_navigation) 工作。

Hasktags 已安装，并 `(load "~/.emacs.d/el-get/haskell-mode/haskell-site-file")`添加到我的初始化文件中。

hasktags 是否需要在某个目录中？（我将目录添加到`PATH`，没有成功。）

该`haskell-process-generate-tags`功能不适用于`M-x`。当我`(load "~/.emacs.d/el-get/haskell-mode/haskell-process.el")`手动添加到初始化文件时，该功能可用，但没有生成 TAGS 文件。

（PS：我正在使用带有 linux 的 emacs 24.1）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T17:43:51.793

`hasktags`应该是 in `PATH`，但你确定在 Emacs 中和在 shell`PATH`中是一样的吗？`PATH`我只是尝试过，并且`haskell-process-generate-tags`为我工作没有问题。尝试`PATH`从 Emacs 设置：

```
(setenv "PATH" (concat (getenv "PATH") ":directory_with_hasktags")) 
```

您还可以按照中所述绑定`C-x C-s`到- 在这种情况下，您可以将变量设置为，并且将在每次保存您的 haskell 文件时调用。`haskell-mode-save-buffer``examples/init.el``haskell-tags-on-save``t``hasktags`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-14T11:50:24.787

`haskell-process-generate-tags`自 2016-03-14 起已过时。

改为使用`haskell-mode-generate-tags`。

如何自己找出答案：

```
M-x describe-function
Describe function: haskell-process-generate-tags
.... 
```

# elasticsearch - 使用 ElasticSearch 过滤构面会产生嵌套元素

> ID：13220673
> 
> 赞同：1
> 
> 时间：2012-11-04T16:53:47.900
> 
> 标签：elasticsearch

我有这个映射：

```
products: {
    product: {
        properties: {
            id: {
                type: "long"
            },
            name: {
                type: "string"
            },
            tags: {
                dynamic: "true",
                properties: {
                    tagId: {
                        type: "long"
                    },
                    tagType: {
                        type: "long"
                    }
                }
            }
        }
    }
} 
```

我想在标签 ID 上创建一个方面，但使用标签类型过滤。我需要过滤器只应用于方面而不是查询结果。所以这是我的要求：

```
{
"from": 0,
"size": 10,
"facets": {
    "tags": {
        "terms": {
            "field": "tags.tagId",
            "size": 10
        },
        "facet_filter": {
            "terms": {
                "tags.tagType": [
                    "11",
                    "19"
                ]
            }
        }
    }
},
"query": {
    "match_all": {}
} 
```

}

分面过滤似乎不会影响分面。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:55:20.207

过滤器应用于文档，即您的示例中的父实体。这意味着您正在过滤您制作刻面的文档`tags.tagType`。因此，所有具有特定`tags.tagType`价值的文档都用于构建方面，这不是我想要的。

这是[嵌套](http://www.elasticsearch.org/guide/reference/mapping/nested-type.html)文档的用例。你也可以看看[这篇不错的文章](http://www.spacevatican.org/2012/6/3/fun-with-elasticsearch-s-children-and-nested-documents/)。

# javascript - 如何使用Javascript（jQuery）按顺序淡入div？

> ID：13220675
> 
> 赞同：1
> 
> 时间：2012-11-04T16:53:48.850
> 
> 标签：javascript, jquery, animation, sequence, fadein

我想要的是通过添加一个类在页面加载时淡入我的侧边栏框。

我尝试了以下方法：

```
var a = $(".sidebar-box"), delayTime = 2000;

for(var i = 0; i < a.length; i++) {
    setTimeout(function(
        var ai = $(a[i]);
        ai.addClass("fade in");
        console.log(ai);
    ), delayTime);

    console.log(delayTime);
    delayTime += 2000;
} 
```

问题是，当第一次添加类时，`i`已经是`4`，所以类只添加到最后一个框，而实际上它应该添加到第一个框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T17:00:04.073

如果你可以使用 jQuery 的`fadeIn()`方法，而不是通过 CSS 添加一个类和动画，你可以像这样：

```
var a = $(".sidebar-box"), delayTime = 2000, i = 0;

function animateSideBar() {
    if(i >= a.length) return;

    // call fadeIn, and pass this function itself as the completion callback
    $(a[i]).fadeIn(delayTime, animateSideBar);

    i++;
}

animateSideBar(); // start it 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T16:55:39.373

您需要创建一个单独的函数，以便`i`每次都复制变量：

```
var a = $(".sidebar-box"), delayTime = 2000;

var func = function(i)
{
    setTimeout(function() {
        var ai = $(a[i]);
        ai.addClass("fade in");
    }, delayTime);
}

for(var i = 0; i < a.length; i++) {
    func(i);
    delayTime += 2000;
} 
```

# visual-studio-2010 - 自定义 Web 测试验证规则中的枚举

> ID：13220677
> 
> 赞同：1
> 
> 时间：2012-11-04T16:54:08.997
> 
> 标签：visual-studio-2010, webtest, validationrules

我正在使用 Microsoft VS2010 构建 Web 测试。
我使用了 MSDN 上的解释：[How to: Create a Custom Validation Rule for a Web Performance Test](http://msdn.microsoft.com/en-us/library/ms182556.aspx)。
在示例中，当我将此验证规则添加到我的测试时 ，使用`string`和作为具有公共“get”和“set”的私有成员在 UI 中编辑这些参数有效。`int`

我想要一个带有 3 个选项的 Enum，当我将验证规则添加到 UI 时，我可以从中进行选择。

有没有办法添加一个在 UI 中也有效的 Enum 变量？
是否有任何其他可以使用的类型在 UI 中有效？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T04:34:34.597

不幸的是，UI 仅在用户创建的规则/插件中显示**String**和**原始类型属性。**然而，一些内置规则/插件使用**枚举**......这怎么可能？由于反汇编程序的魔力和一些侦探工作，我们发现它只接受程序集名称包含字符串“Microsoft.VisualStudio.QualityTools.WebTestFramework”的枚举。

因此，如果您将枚举（或者实际上是整个项目）编译成一个名为“MyEnums.Microsoft.VisualStudio.QualityTools.WebTestFramework”的程序集，BOOM 你的枚举类型的属性将很高兴地出现在编辑器用户界面。

# c# - 将参数传递给用户控件的javascript函数

> ID：13220682
> 
> 赞同：1
> 
> 时间：2012-11-04T16:54:53.110
> 
> 标签：c#, javascript, asp.net

我在我的页面上动态添加用户控件。

**`MyPage.aspx`：**

```
MyControl cntl = (MyControl)Page.LoadControl("MyControl.ascx"); 
```

**有`MyControl.ascx`一个javascript函数：**

```
function myfun(a, b)
{
    ....
} 
```

我可以将参数传递给`myfun`后面的代码`MyControl.ascx`：

```
string script2 = String.Format("myfun({0},{1})", param1, param2);
this.Page.ClientScript.RegisterStartupScript(this.GetType(), "initialize control", script2, true); 
```

是否可以从中调用此 javascript 函数`MyPage.aspx`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T22:35:55.180

是的，您可以从 mypage.aspx 调用 javascript 函数，例如使用按钮

```
<asp:Button id="yourid" runat="server" OnClientClick="yourJavaScriptFunction("+a+","+b+")" /> 
```

或 mypage.aspx.cs 文件中的任何位置

```
Response.Write("<script>yourJavaScriptFunction("+a+","+b+")</script>"); 
```

# php - Gettext 不能通过 php-cli 工作，但可以在 php-apache 中工作

> ID：13220683
> 
> 赞同：9
> 
> 时间：2012-11-04T16:54:55.730
> 
> 标签：php, apache, internationalization, locale, gettext

我运行的代码如下所示：

```
...
$this->locale = da_DK;
...
putenv("LC_ALL=".$this->locale);
putenv('LANG='.$this->locale);
$res = setlocale(LC_ALL, $this->locale);
if($res != $this->locale){
    throw new Exception("The language could not be set.");
}
bindtextdomain("domain", "./locale");
textdomain("domain");

 echo setlocale(LC_MESSAGES, 0 );
 echo ' ';
 echo __('description'); 
```

通过 apache2 运行它的结果是：

```
da_DK Beskrivelse 
```

这是我们想要的。

通过 cli 运行它：

```
da_DK Description 
```

如果我们使用英语，那将是正确的。'd' 在英文翻译中是大写的，而在源中是小写的（从上下文看来有点奇怪）

所以 gettext 工作，因为它可以翻译字符串，但不知何故，它忽略了我在脚本中更改了语言环境并从英语目录中选择了 .po 文件。

如果您想知道为什么我需要 cli 脚本上的语言环境：该脚本用于通过电子邮件发送发票。

我使用：Ubuntu 12.10、PHP 5.4.6-1ubuntu1、apache 2.2.22 和 gettext 0.18.1。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-28T15:11:00.850

您必须重置环境变量 LANGUAGE：

putenv("语言=");

我花了一段时间才知道。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T17:19:33.683

您需要检查 bindtextdomain() 是否从 php-cli 和 php-apache 指向相同的资源文件。我建议，

1.  回显 bindtextdomain() 的返回值并查看它们。
2.  尝试将“./locale”替换为绝对路径（例如“/var/www/yourproject/locale”）并查看它是否有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-14T05:25:15.857

我不知道这有多少相关性，但是……</p>

我刚刚找到了**相反**问题的解决方案：Gettext not working through **php-apache**，但工作在**php-cli**。

还担心，**strftime**本地化不是通过**php-apache**工作，而是在**php-cli**（在 Linux Debian buster 系统上）工作。

LANGUAGE 环境变量没有帮助，因为我没有这样的环境变量。

奇怪的是，我只是禁用了Apache 中的**perl**模块，问题就消失了。

所以也许任何 Apache 模块中的一些错误都可能引发这种问题……</p>

# php - 不会连接到数据库

> ID：13220684
> 
> 赞同：0
> 
> 时间：2012-11-04T16:55:00.267
> 
> 标签：php, mysql, database-connection

我很困惑......我在不同的文档中使用相同的代码，在那里连接到数据库不是问题。

但是在新文档中它只是不工作......（密码，用户名，数据库名称......所有都检查并正确）：-/

```
<?php

define ("DB_HOST", "db1234567.db.hello.com"); // set database host
define ("DB_USER", "db1234567"); // set database user
define ("DB_PASS","password123"); // set database password
define ("DB_NAME","db1234567"); // set database name

$link = mysql_connect(DB_HOST, DB_USER, DB_PASS) or die("Couldn't make connection.");
$db = mysql_select_db(DB_NAME, $link) or die("Couldn't select database");

?> 
```

在浏览器中我得到这个：“警告：mysql_connect（）[function.mysql-connect]：在/homepages/12/1234567/test/test中用户'db1234567'@'123.123.12.12（使用密码：YES）的访问被拒绝第 8 行的 .php 无法建立连接。”

如果有人可以帮助我会很酷:)我没有看到任何错误...

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T16:57:38.897

我愿意。“拒绝访问”是一个非常明显的错误。凭据不正确或用户被阻止。MySQL 正在响应，所以问题出在用户名/密码上。

# iphone - 如何使用核心运动在后台获取加速度计数据？

> ID：13220686
> 
> 赞同：8
> 
> 时间：2012-11-04T16:55:06.500
> 
> 标签：iphone, objective-c, ios, core-motion

我在应用程序中的要求是我必须检测从应用程序计数的步骤，即使应用程序在后台运行，这也应该继续。我研究过这个；通常苹果不允许在后台使用加速度计数据，但我想使用 Core Motion 我们可以实现它。

这是我的代码：

```
- (void)applicationWillResignActive:(UIApplication *)application
{
    /*
     Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.
     Use this method to pause ongoing tasks, disable timers, and throttle down OpenGL ES frame rates. Games should use this method to pause the game.*/

    if ([[UIDevice currentDevice] respondsToSelector:@selector(isMultitaskingSupported)]) { //Check if our iOS version supports multitasking I.E iOS 4

        if ([[UIDevice currentDevice] isMultitaskingSupported]) { //Check if device supports mulitasking

            backgroundSupported = [UIDevice currentDevice].multitaskingSupported;

            UIApplication *application = [UIApplication sharedApplication];//Get the shared application instance

            __block UIBackgroundTaskIdentifier background_task; //Create a task object
            background_task = [application beginBackgroundTaskWithExpirationHandler: ^ {

                NSAssert(background_task == UIBackgroundTaskInvalid, nil);

                [application endBackgroundTask: background_task]; //Tell the system that we are done with the tasks
                background_task = UIBackgroundTaskInvalid; //Set the task to be invalid
                //System will be shutting down the app at any point in time now

            }];

            //Background tasks require you to use asyncrous tasks
            dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

                //Perform your tasks that your application requires

                dispatch_async(dispatch_get_main_queue(), ^{
                    if (background_task != UIBackgroundTaskInvalid)
                    {
                        [application endBackgroundTask:background_task];
                        background_task = UIBackgroundTaskInvalid;
                    }
                });
                locationManager.delegate = self;//or whatever class you have for managing location
                [locationManager startMonitoringSignificantLocationChanges];
                [locationManager startUpdatingLocation];
                NSLog(@"\n\nRunning in the background!\n\n");
               // [application endBackgroundTask: background_task]; //End the task so the system knows that you are done with what you need to perform
               // background_task = UIBackgroundTaskInvalid; //Invalidate the background_task

            });
        }
    }
}
- (void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations
{

         CLLocation *loc = [locations lastObject];
         float latitudeMe = loc.coordinate.latitude;
         float longitudeMe = loc.coordinate.longitude;

         NSOperationQueue *theQueue = [[NSOperationQueue alloc] init];

         CMAccelerometerData *_returnedData = [[CMAccelerometerData alloc] init];
         CMMotionManager  *_motionManager = [[CMMotionManager alloc] init];

        [_motionManager startAccelerometerUpdatesToQueue:theQueue withHandler:^(CMAccelerometerData *accelerometerData, NSError *error) {

            int x = _motionManager.accelerometerData.acceleration.x;
            int y = _motionManager.accelerometerData.acceleration.y;
            int z = _motionManager.accelerometerData.acceleration.z;

            NSLog(@"X: %i, Y: %i, z: %i", x, y,z);

            //[self changeFilter:[HighpassFilter class]];
            //[filter addAcceleration:acceleration];
            const float violence = 1.70;
            float magnitudeOfAcceleration = sqrt (x*x + y*y + z*z);

            //float magnitudeOfAcceleration = sqrt (filter.x*filter.x + filter.y * filter.y + filter.z * filter.z);
            BOOL shake = magnitudeOfAcceleration > violence;
            if (shake)
            {
                step++;
            }
             NSUserDefaults *defalut = [NSUserDefaults standardUserDefaults];
            [defalut setObject:[NSString stringWithFormat:@"%i",step] forKey:@"Stepscounting"];

        }];

} 
```

任何人都可以在我错的地方帮助我吗？

**我已经在 plist 文件中添加了“必需的后台模式-> 并在第 0 项选择应用程序注册以进行位置更新”。**

# c++ - 指针指针：std:vector vs. Array

> ID：13220687
> 
> 赞同：0
> 
> 时间：2012-11-04T16:55:11.020
> 
> 标签：c++, arrays, pointers, vector

快速提问：

在说

```
#include <vector>
vector<Object*>* arr = new vector<Object*>(); 
```

并行版本/类似/等

```
Object** arr = new Object*[100]; //I guess any size can do since vector maximum size changes all the time. 
```

?

如果我错了，有人可以纠正我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T16:59:27.873

我认为你需要的是：

```
vector<Object*> arr; 
```

这将是一个指针“数组”。（当您离开声明它的范围时，该数组将被自动销毁）。

当然，你*可以*有`vector<Object*>*`，但它更类似于

```
Object*** arr = new Object**;
*arr = new Object*[100]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T17:01:58.800

实际上，您正在寻找的“并行性”介于以下两个定义之间：

```
vector<Object*> arr;
Object** arr = new Object*[100]; 
```

这些是彼此“并行版本”的唯一方式是它们都提供某种指向`Object`. 从某种意义上说，它们都是指向指针的“数组”，`Object`您可以`x`像`arr[0]->x`使用两者一样访问对象的成员。但是，两者都不是*真正*的 type `array of pointer to Object`。

特别是，使您的第一个定义与第二个定义不同的是您有一个指向`vector`. 在这种情况下，您将访问成员`x`like `(*arr)[0]->x`，必须首先取消引用指针。

但是，这两个定义`arr`在很多方面彼此非常不同，所以我永远不会认为它们是相似的。第一个是更惯用的 C++，因为向量会为您整理指针的分配和释放。对于第二个，您需要记住`delete[]`稍后再打电话。还为您提供`vector`了一个动态大小的容器和许多其他很棒的特性，这些特性是`vector`.

然而，就编写干净和惯用的 C++ 而言，两者都不是最佳选择。无论您做出哪种选择，您仍然必须分配（使用）您要存储指针`new`的实际s，然后记住它们。您最好的选择是只使用. 如果出于某种原因，您确实需要存储指向对象的指针，那么最好使用某种智能指针，例如 in . 如果您的容器将具有固定大小（如示例中大小为 100 的数组），那么您可能更喜欢使用.`Object``delete``vector<Object> arr``vector<shared_ptr<Object>> arr``array<Object, 100>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T16:59:48.403

这之间有更多的相似之处

```
#include <vector>

vector<Object*> arr(100); 
```

和这个

```
Object** arr = new Object*[100]; 
```

为什么人们总是觉得需要更新一切？我认为因为它很复杂，所以它一定很好，对吧？其实错了。

# eclipse - 为 Eclipse 创建自定义代码完成

> ID：13220691
> 
> 赞同：1
> 
> 时间：2012-11-04T16:55:29.100
> 
> 标签：eclipse, eclipse-plugin, code-completion

我正在尝试为 Eclipse 制作一个插件，以在代码完成窗口中添加更多结果。为此，我需要[获取对 Java 编辑器的引用，以覆盖编辑器 SourceViewerConfiguration 的 getContentAssistant 方法](http://wiki.eclipse.org/FAQ_How_do_I_add_Content_Assist_to_my_editor%3F)。

那么，我怎样才能得到那个参考呢？谢谢

PS。随时提供任何有用的建议或链接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:17:49.090

实现[javaCompletionProposalComputer](http://help.eclipse.org/indigo/topic/org.eclipse.jdt.doc.isv/reference/extension-points/org_eclipse_jdt_ui_javaCompletionProposalComputer.html)。您提供的链接没有用，因为这仅适用于实现语言编辑器的人，但 Java 编辑器已经存在。

# objective-c - 处理 UITabBarController.moreNavigationController 中“更多”UINavigationController 的设备旋转

> ID：13220693
> 
> 赞同：2
> 
> 时间：2012-11-04T16:55:35.720
> 
> 标签：objective-c, ios, cocoa-touch

我有一个应用程序必须同时在纵向和横向上工作，并且 UITabBar 应该调整到当前方向（它具有自定义背景和选定项目）。所以，对于其余的视图，我只是重写了该`- (void) didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation`方法，它可以完美地工作。

我该怎么`.moreNavigationController`做`UITabBarController`？我尝试添加一个观察者（选择器是 UITabBarController 的扩展）：

```
[[NSNotificationCenter defaultCenter] addObserver:self
selector:@selector(didRotate:)
name:UIApplicationDidChangeStatusBarOrientationNotification
object:self.moreNavigationController]; 
```

但它永远不会被调用。我是否遗漏了什么或者处理这种情况的最佳方法是什么？

**解决方案**：为什么`UIDeviceOrientation`没有正确发射，所以更好用`statusBarOrientation`，作为一种魅力。

工作的最终代码是这样的：在 main`UITabBarController`中`viewDidLoad`：

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(didRotate:)
                                             name:UIApplicationDidChangeStatusBarOrientationNotification
                                           object:nil]; 
```

选择`didRotate`器方法：

```
- (void) didRotate:(NSNotification *)notification{
    UIInterfaceOrientation orientation = [UIApplication sharedApplication].statusBarOrientation;
    if(UIInterfaceOrientationIsPortrait(orientation)) {
        // Portrait
    } else {
        // Landscape
    }
} 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T17:54:07.253

您正在注册`UITabBarController`一个永远不会发布的通知。查看该方法的文档[NSNotificationCenter Reference](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html)`addObserver:selector:name:object`

```
- (void)addObserver:(id)notificationObserver selector:(SEL)notificationSelector name:(NSString *)notificationName object:(id)notificationSender 
```

> **`notificationSender`：** 观察者想要接收其通知的对象；也就是说，只有这个发送者发送的通知才会传递给观察者。如果你传递 nil，通知中心不会使用通知的发送者来决定是否将它传递给观察者。

因此，如果您将 指定`. moreNavigationController`为发件人，您将不会收到这些通知，因为它从不发布此类通知。而是通过`nil`忽略发件人并收听状态栏的更改，而不管是谁发送的。

顺便说一句，在这个[SO Answer](https://stackoverflow.com/a/2652828/719656)中总结了如何应对方向变化。

最后。如果还是不行，可以试试这个：

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];

[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(didRotate:)
                                             name:UIDeviceOrientationDidChangeNotification
                                           object:nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T18:52:54.613

是的，您忘记发布通知，这将调用您自己的通知：

```
[[NSNotificationCenter defaultCenter] postNotificationName: UIApplicationDidChangeStatusBarOrientationNotification object:self]; 
```

或者如果你不想发送任何东西，只需将对象设置为 nil：

```
[[NSNotificationCenter defaultCenter] postNotificationName: UIApplicationDidChangeStatusBarOrientationNotification object:nil]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-19T04:23:55.407

实现相同的最佳方法是首先 addObserver 然后删除观察者以避免崩溃：-

```
-(void)viewDidLoad{
    [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(didRotate:)
                                                 name:@"UIDeviceOrientationDidChangeNotification" object:nil];
}

//Now Remove Observer
-(void)viewDidDisappear:(BOOL)animated
{
[[NSNotificationCenter defaultCenter] removeObserver:self @"UIDeviceOrientationDidChangeNotification" object:nil];
} 
```

# ios - 使用 iOS 异步 http 请求，如何将接收到的数据连接到请求中？

> ID：13220698
> 
> 赞同：0
> 
> 时间：2012-11-04T16:55:58.333
> 
> 标签：ios, http, asynchronous

我正在从某个服务器异步加载某些图像。我使用 NSURLConnection connectionWithRequest 方法一次触发多个请求，并使用 NSURLConnectionDelegate didReceiveData 接收数据。

在 didReceiveData 中，我如何知道该数据与哪个请求匹配？在 didReceiveResponse 我可以使用作为参数给出的响应的 URL 方法，但在 didReceiveData 我只有接收到的数据。

似乎完美的答案是使用 NSURLConnection sendAsynchronousRequest，因为完成处理程序具有所有必需的参数：(NSURLResponse*, NSData*, NSError*)。我可以使用 [response URL] 来匹配原始请求...除了一种情况：并非我尝试下载的所有图像都存在。在这种情况下，请求被重定向到通用错误页面，并且接收到该通用页面的 URL，因此我无法将响应与我提出的请求相匹配。这个我可以用connectionWithRequest处理，但我不能两全其美。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T18:18:49.047

在

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data 
```

您可以使用

```
NSURLRequest *request = [connection originalRequest]; 
```

获取开始连接的请求。

（此方法从 iOS 5.0 开始可用，但我在 Xcode iOS 5.1 库中找不到它。您可以在 iOS 6 库中的头文件*NSURLConnection.h*或此处找到它：http: [//developer.apple.com /library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html#//apple_ref/occ/instm/NSURLConnection/originalRequest](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html#//apple_ref/occ/instm/NSURLConnection/originalRequest)）。

更多管理多个连接的方法可以在这个线程中找到：[管理多个异步 NSURLConnection 连接](https://stackoverflow.com/questions/332276/managing-multiple-asynchronous-nsurlconnection-connections)。

如果你使用`sendAsynchronousRequest:queue:completionHandler:`那么你可以只使用`request`完成块中的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T18:24:55.573

At connection:didReceiveData: the first parameter is the NSURLConnection instance. So I don't understand where the problem is. You create a connection, then you send a request to that connection and the delegate receive the connection:didReceiveData with the connection value.

If you are using the same delegate for all the request you have to check the connection so you can say which request is associated to.

Perhaps you have to maintain a table of connection/request pairs.

# machine-learning - 用scikit学习随机森林的概率分布？

> ID：13220699
> 
> 赞同：0
> 
> 时间：2012-11-04T16:56:27.933
> 
> 标签：machine-learning, probability, scikit-learn, random-forest

我有一个状态->动作对（s，a）的数据集，其中每个 s 定义了 a 的可能选择的概率分布，并且每个 a 都是从该概率分布中采样的。我想为这个数据集训练一个分类器，而不是学习预测最大似然，它预测分布 a 是从中采样的。

例如，如果您正在玩一个迭代的石头剪刀布，您的状态可能只是您之前做出的动作和 ∈ { Rock, Paper, Scissors }，其中之前的状态降低了再次选择该动作的概率。我的数据集将如下所示：

```
PreviousAction,Chosen
Rock,Paper
Paper,Rock
Rock,Scissors
Scissors,Paper
Paper,Paper
... 
```

是否可以在 scikit-learn 中使用随机森林学习标签上的概率分布？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:40:30.663

是的。训练一个[`RandomForestClassifier`](http://scikit-learn.org/stable/modules/generated/sklearn.ensemble.RandomForestClassifier.html#sklearn.ensemble.RandomForestClassifier)using `fit`（它期望标签，而不是概率分布，作为它的`y`参数），然后预测 using `predict_proba`。

# html - Html5中的一个光滑圆圈

> ID：13220701
> 
> 赞同：1
> 
> 时间：2012-11-04T16:56:39.597
> 
> 标签：html, canvas

我正在尝试用 HTML5 中的画布绘制一个圆圈。我使用了 w3schools 的示例，但结果很丑陋，不流畅。有可能有一个光滑的圆圈吗？（我用 Chrome 和 IE9 试过这个）

我使用的代码：

```
var c=document.getElementById("myCanvas");
var ctx=c.getContext("2d");
ctx.beginPath();
ctx.arc(125,120,100,0,2*Math.PI);
ctx.stroke(); 
```

=> [http://www.w3schools.com/html/tryit.asp?filename=tryhtml5_canvas_tut_path2](http://www.w3schools.com/html/tryit.asp?filename=tryhtml5_canvas_tut_path2)：原始示例 => [http://jsfiddle.net/jPeKk/](http://jsfiddle.net/jPeKk/)：我的尝试，更大

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T17:12:45.730

在 chrome 上，这是一个已在此处讨论的已知问题 -[我可以在 HTML <canvas> 元素上关闭抗锯齿功能吗？](https://stackoverflow.com/questions/195262/can-i-turn-off-antialiasing-on-an-html-canvas-element)

和这里 -[如何在 Chrome Windows 下的 html5 画布中消除锯齿 clip() 边缘？](https://stackoverflow.com/questions/9536257/how-to-anti-alias-clip-edges-in-html5-canvas-under-chrome-windows)

尝试

```
ctx.webkitImageSmoothingEnabled=true; 
```

让你的线条更流畅。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-20T16:19:33.300

另一个对我有用的解决方案（尽管我认为这更像是一种技巧而不是正确的解决方案）是用相同的颜色在圆圈周围画一条线。出于某种原因，这将非常顺利。

```
var canvas = document.getElementById('canvas');
var context = canvas.getContext('2d');

context.beginPath();
context.arc(100, 100, 60, 0, 2 * Math.PI, false);
context.fillStyle = '#775599';
context.fill();

context.beginPath();
context.arc(200, 200, 60, 0, 2 * Math.PI, false);
context.fillStyle = '#775599';
context.fill();
context.lineWidth = 2;
context.strokeStyle = '#775599';
context.stroke(); 
```

# opencv - SiftFeatureDetector() 和 Ptr 之间的区别

> ID：13220707
> 
> 赞同：0
> 
> 时间：2012-11-04T16:57:14.243
> 
> 标签：opencv, sift, feature-detection, surf

SiftFeatureDetector() 和 Ptr 有什么区别？它们显然具有相同的功能。[opencv 教程](http://docs.opencv.org/doc/tutorials/features2d/feature_detection/feature_detection.html#feature-detection)使用 SiftFeatureDetector，但是当点击[官方文档](http://docs.opencv.org/modules/features2d/doc/common_interfaces_of_feature_detectors.html?highlight=surffeaturedetector#featuredetector)时，他们使用 Ptr 并且没有提及 SiftFeatureDetector()，所以我无法阅读它。正如他们在教程中使用的那样：`int minHessian = 400; SurfFeatureDetector detector( minHessian );`而且我不知道 minHessian 应该做什么。

另外我在同一张图片上尝试了它们，它们都有相同的结果，那为什么它们不同呢？

```
int _tmain(int argc, _TCHAR* argv[])
{
//initModule_nonfree();
Mat img;

img = imread("c:\\box.png", 0);

//cvtColor( img, gry, CV_BGR2GRAY );

 //SiftFeatureDetector detector;
//vector<KeyPoint> keypoints;
//detector.detect(img, keypoints);

Ptr<FeatureDetector> feature_detector = FeatureDetector::create("SIFT");
vector<KeyPoint> keypoints;

feature_detector->detect(img, keypoints);

Mat output;

drawKeypoints(img, keypoints, output, Scalar::all(-1));

namedWindow("meh", CV_WINDOW_AUTOSIZE);
imshow("meh", output);
waitKey(0);

return 0; 
```

}

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T17:15:27.707

**编辑：在下面的评论中查看@gantzer89 的更正。** （为了清晰起见，保留我的原文。）

* * *

根据我的一般经验，使用 FeatureDetector::create() 语法（在您引用的“官方文档”中讨论[）](http://docs.opencv.org/modules/features2d/doc/common_interfaces_of_feature_detectors.html?highlight=surffeaturedetector#featuredetector-create)允许在运行时通过参数文件灵活地指定算法，而更具体的类，例如 SiftFeatureDetector，提供更多的定制机会。

create() 方法以一组默认的特定于算法的参数开始，而特定于算法的类允许在构造时自定义这些参数。因此，create() 方法为 minHessian 分配了一个默认值，而 SiftFeatureDetector 构造函数提供了选择 minHessian 值的机会。

根据经验，如果您想快速尝试使用*哪种*算法，请使用 create() 语法，如果您想尝试微调特定算法，请使用特定于算法的类构造函数。

# google-chrome - Chrome 独立应用程序的平台兼容性

> ID：13220708
> 
> 赞同：1
> 
> 时间：2012-11-04T16:57:23.960
> 
> 标签：google-chrome, google-chrome-extension, google-chrome-app

我正在阅读 Google Chrome 独立应用程序，我发现它们像 Chrome 扩展一样分发，而且无论如何，它们似乎就像 Chrome 扩展一样工作，所以我假设它们将在运行 Chrome 的主要平台上运行，比如 Linux、Mac 和 Win。但是，我在支持的平台上没有看到任何官方说法，有这样的参考点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T13:57:53.523

Chrome 打包应用可在 ChromeOS、Linux、Mac 和 Windows 中使用。您是对的，我们的在线文档中没有关于它的明确信息，但这是无意的。

实际上，您已经可以在上述所有平台上运行 Chrome 打包应用程序。它们的启动方式——通过 Chrome 新标签——将发生变化，并且将更像原生应用程序。当前的启动方法仅适用于开发者预览版。

# php - 客户端与服务器端

> ID：13220714
> 
> 赞同：0
> 
> 时间：2012-11-04T16:57:46.567
> 
> 标签：php, javascript, database

一般来说，是否应该进行一种设计以便将处理负载放在客户端？

更具体地说，定位订户信息的搜索引擎需要大量的解析（要排序和格式化的多个电话号码、一天中的小时、时区、用户信息的可能替换比较等）。

同样，一般来说，最好让客户端来做这项工作吗？

在我看来，在每分钟会有数千次点击的情况下是“是”。

使用 php 进行快速数据库查询...处理检索到的数据客户端。

是的……不是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T17:01:14.480

不，我认为一个网站应该能够在没有 Javascript 的情况下运行。客户端脚本用于添加额外的可用性和图形功能。

对于针对特定用户组的 Web 应用程序是不同的情况，但对于通用网站，不要在客户端上做这些事情，或者为两者都实现，所以当客户端做不到时，它会由服务器完成.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T17:07:34.807

GolezTrol 的回答很棒。我只想再补充一件事——安全原因。设计安全网站的一个原则是永远不要将底层数据结构暴露给用户。

因此，如果您将原始数据提供给客户端，任何具有一定技术技能的用户都可以看到您的确切数据结构，并且可以更好地了解您的网站如何工作，从而更好地破解您的网站。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T17:03:52.473

好吧，有很多变数在起作用。如果你想要有保证的结果，你会想要它全部在服务器端。

您永远不知道是否有人会在文本浏览器 (lynx) 中查看您的网站，或者没有打开 JS。

更好的答案是尽可能缓存页面或页面片段，以防止在每个请求上重新构建整个内容。当然，在可能的情况下优化您的代码。

# php - 去除 youtube 缩略图上的黑色边框 4:3

> ID：13220715
> 
> 赞同：58
> 
> 时间：2012-11-04T16:57:50.550
> 
> 标签：php, javascript, jquery, youtube-api

例如我有一个链接

```
http://img.youtube.com/vi/aOPGepdbfpo/0.jpg 
```

对于 youtube 视频缩略图：

![在此处输入图像描述](../Images/5dc2d49993c102ae274421669707392e.png)

我想删除黑色的顶部和底部边框，所以我得到这样的图片：

![在此处输入图像描述](../Images/c75fa4d5e6248a758852f8c2b47ef2cd.png)

是否可以使用 PHP 函数 javascript/jQuery 或 youtube api 本身来完成？

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2013-09-24T10:18:26.237

YouTube 提供的图像没有 4:3 比例的黑条。要获得没有黑条的 16:9 视频缩略图，请尝试以下方法之一：

```
http://img.youtube.com/vi/<insert-youtube-video-id-here>/mqdefault.jpg
http://img.youtube.com/vi/<insert-youtube-video-id-here>/maxresdefault.jpg 
```

第一个`mqdefault`是 320x180 像素的图像。

第二张`maxresdefault`是 1500x900 像素的图像，因此需要调整大小才能用作缩略图。这是一个很好的图像，但它并不总是可用。如果视频质量低（我想不到 720p，不确定），则此“maxresdefault”将不可用。所以永远不要依赖它。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-11-04T17:03:27.743

将其用作背景图像，将其居中并更改高度。

[http://dabblet.com/gist/4012604](http://dabblet.com/gist/4012604)

```
.youtubePreview {
    background:url('http://img.youtube.com/vi/aOPGepdbfpo/0.jpg') center no-repeat;
    height:204px;
    width:480px;
} 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2016-07-21T14:52:35.323

如果您希望它具有灵活的宽度，请使用以下命令：

**HTML**

```
<div class="thumb">
    <img src="...">
</div> 
```

**CSS**

```
.thumb {
    overflow: hidden;
}
.thumb img {
    margin: -10% 0;
    width: 100%;
} 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2017-02-20T07:17:46.630

要从 中删除 ，`black borders`我们`Youtube thumbnail`不必写 a`seperate code`或`CSS`。只需使用`ytimg.com`代表 的站点，`YouTube image`其中`fetches`的图像来自`YouTube`、喜欢`thumbnails`和`icons`根据需要来自该域。

**示例如下 -**

***原始图像***[带边框]

[http://img.youtube.com/vi/JQ7a_8psCn0/hqdefault.jpg](http://img.youtube.com/vi/JQ7a_8psCn0/hqdefault.jpg)

***没有边界/条***

1.  [http://img.youtube.com/vi/JQ7a_8psCn0/mqdefault.jpg](http://img.youtube.com/vi/JQ7a_8psCn0/mqdefault.jpg)

或者

2.  [http://i.ytimg.com/vi/JQ7a_8psCn0/mqdefault.jpg](http://i.ytimg.com/vi/JQ7a_8psCn0/mqdefault.jpg)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-04T07:46:48.297

这是我为类似问题提供的答案，但它将完全解决您的问题，只需使用包装器 div 从视频中剪切掉您不想显示的所有内容，这是通过 html 和 css 完成的。

在网上搜索了一段时间以解决此问题后，我一无所获，我想我已经尝试了一切，但没有解决我的问题。然后在我的逻辑驱动下，我只是将嵌入式 youtube 视频的 iframe 包装在一个 div 集溢出：隐藏；到这个 div 并使其高度比 iframe 高度小 2px（在我的视频中，底部有黑色边框）。所以包装器 div 比 iframe 小，并且通过将其定位在视频上，您可以隐藏您不想要的黑色边框。我认为这是迄今为止我尝试过的所有方法中最好的解决方案。

在下面的这个例子中，尝试只嵌入 iframe，你会在底部看到小的黑色边框，当你将 iframe 包裹在 div 中时，边框消失了，因为 div 与 iframe 重叠并且它比视频小，而且它has overflow: hidden 所以所有超出 div 维度的东西都被隐藏了。

```
<div id="video_cont" style="width: 560px;
                            height: 313px;
                            overflow: hidden;">

    <iframe id="the-video" class="extplayer" width="560" height="315" src="https://www.youtube.com/embed/EErx017kDHQ?&amp;autoplay=0&amp;rel=0&amp;fs=0&amp;showinfo=0&amp;controls=0&amp;hd=1&amp;wmode=transparent&amp;version=2;yt:quality=high;"   frameborder="0" allowfullscreen></iframe>

</div> 
```

在我的情况下，边框的高度约为 2px，因此我将包装器 div 的高度缩小了 2px 以隐藏边框，在您的场景中，如果边框位于视频的顶部或侧面和/或具有不同的尺寸，您必须为包装器 div 制作不同的尺寸并将其定位好，以便它与边框所在的视频重叠并且溢出：隐藏；边界是隐藏的。

希望这会有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-12T19:28:42.283

优酷是怎么做到的。图片网址中有很多参数。

```
https://i.ytimg.com/vi/XkOpbLBzPsY/hqdefault.jpg?custom=true&w=196&h=110&stc=true&jpg444=true&jpgq=90&sp=68&sigh=Gv-oyTIgA39e7UG01pZ2RiGbwSo 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-11-16T13:42:40.383

我不是专家，我正在寻找一种解决方案来删除 youtube 视频缩略图的黑条，找到了一些解决方案，但对我没有用。开始尝试我找到的解决方案并想出了这个。

```
https://jsfiddle.net/1fL2ubwy/ 
```

```
.row, .col, [class*="col-"] {
    margin-left: 0;
    margin-right: 0;
    padding-left: 0;
    padding-right: 0;
}
.row {
  background: #f8f9fa;
  margin-top: 20px;
}

.col {
  border: solid 1px #6c757d;
  padding: 10px;
}
.yt-thumb {
    width: 100%;
    height: 74%;
    overflow: hidden;
}
.yt-thumb > img {
    margin: -10% 0;
}
```

```
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap-theme.min.css">

<div class="container">
  <div class="row">
    <div class="col-md-6 col-sm-6 col-6 card vd-block mb-3">
      <a class="yt-thumb" href="https://www.youtube.com/embed/wb49-oV0F78" data-rel="lightcase">
        <img class="aligncenter" src="https://img.youtube.com/vi/wb49-oV0F78/hqdefault.jpg" alt="thumbnail" width="100%" height="auto">
      </a>
    </div>

    <div class="col-md-6 col-sm-6 col-6 card vd-block mb-3">
      <a href="https://www.youtube.com/embed/wb49-oV0F78" data-rel="lightcase">
        <img class="aligncenter" src="https://img.youtube.com/vi/wb49-oV0F78/hqdefault.jpg" alt="thumbnail" width="100%" height="auto">
       </a>
    </div>
  </div>  
</div>
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-26T14:53:01.263

我需要一种响应式的方式来做这件事，所以让我们考虑一下这段代码是在`window.addEventListener("resize");`

我们基本上想把 4:3 的比例转换成 16:9

```
<div id="video-item">
    <img src="https://i.ytimg.com/vi/{videoId}/hqdefault.jpg" />
</div> 
```

```
const videoItem = document.getElementById("video-item");
const img = videoItem.querySelector("img"); 
```

```
resize()
{
    img.style.top = `${-(img.offsetHeight - (img.offsetWidth * 9 / 16)) / 2}px`;
    videoItem.style.height = `${9 / 16 * videoItem.offsetWidth}px`;
} 
```

```
#video-item
{
    position: relative;
    overflow: hidden;
}

#video-item img
{
    width: 100%;
    position: absolute;
} 
```

顺便说一句，您还可以回退到图像的计算高度*（以防图像未完全加载）*

```
img.style.top = `${-((img.offsetHeight || (3 / 4 * img.offsetWidth)) - (img.offsetWidth * 9 / 16)) / 2}px`; 
```

# assembly - 为什么循环在 asm(x87) 中失败

> ID：13220718
> 
> 赞同：0
> 
> 时间：2012-11-04T16:57:59.967
> 
> 标签：assembly, x87

我在循环中的 asm 中有一些计算，它必须在 Sum 为 3 之前，但循环一直工作并且永无止境。这是mu代码：

```
int main() {

    float Sum=0;
    int i=0;
    int A=5;
    int B=180;
    int C=3;

_asm{
   finit
m1:inc i
   fldpi
   fimul A  
   fimul i
   fidiv B
   fsin
   fadd Sum 
   fstp Sum
   fild Sum
   ficom C      
   fstsw AX     
   sahf         
   jg   m1
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T17:17:26.027

FPU 的条件标志与 EFLAGS 寄存器中的条件标志具有完全不同的含义。

如果`Sum`大于`C`，则将`ficom`FPU 条件标志设置为“C3=0, C2=0, C1=0”。当加载到 CPU 的 EFLAGS 寄存器（通过`fstsw`和`sahf`）时，它变为“ZF=0，PF=0，CF=0”。如果“ZF=0”和“SF=0”，该`jg`指令将分支——它根本不会测试 PF 标志或 CF 标志，但会测试不相关的 SF 标志。

鉴于您无论如何都在比较整数；你可能应该这样做：

```
mov eax,[Sum]
cmp [C],eax
jg m1 
```

另一种方法是直接测试 AX 中的标志。例如：

```
ficom C
fstsw AX
test AX,0x4500    ;Are C3, C2 and C0 clear?
je m1             ; yes, Sum must be greater than C 
```

# magento - Magento 重新索引不起作用

> ID：13220722
> 
> 赞同：0
> 
> 时间：2012-11-04T16:58:32.237
> 
> 标签：magento, reindex

我最近通过脚本创建了大约 700 个属性，所有属性在后端看起来都很好。但是当我重新索引时，我收到以下错误：

> 带有消息“SQLSTATE [42S22] 的异常“PDOException”：未找到列：1054 /lib/Zend/Db/Statement/Pdo.php:228 中“字段列表”中的未知列“e.additional_information_s”

注意：此属性存在于数据库（eav_attribtue）表中。

我非常感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-25T07:31:28.980

以下将重新索引每个索引。

```
for ($i = 1; $i <= 9; $i++) {
    $process = Mage::getModel('index/process')->load($i);
    $process->reindexAll();
} 
```

您还可以使用 Magento 集合模型来加载每个索引，而不是在 for 循环中对 id 进行硬编码。

```
/* @var $indexCollection Mage_Index_Model_Resource_Process_Collection */
$indexCollection = Mage::getModel('index/process')->getCollection();
foreach ($indexCollection as $index) {
    /* @var $index Mage_Index_Model_Process */
    $index->reindexAll();
} 
```

但是，如果您只想重新索引 id 为 2 的价格

```
$process = Mage::getModel('index/process')->load(2);
$process->reindexAll(); 
```

您还可以按如下方式调用函数 getProcessByCode：

```
$process = Mage::getModel('index/indexer')->getProcessByCode('catalog_product_price');
$process->reindexAll(); 
```

# google-chrome-extension - 如何使 chrome.tabs.update 与内容脚本一起使用

> ID：13220723
> 
> 赞同：1
> 
> 时间：2012-11-04T16:58:39.243
> 
> 标签：google-chrome-extension

我在谷歌浏览器上做一个小扩展，我想创建一个新标签，进入 url "sample"+i+".com"，在这个 url 上启动一个内容脚本，将当前标签更新为 "sample"+( i+1)+".com"，然后启动相同的脚本。我查看了 stackoverflow 上的问答，然后用谷歌搜索，但没有找到可行的解决方案。这是我实际的 background.js 代码（它有效），当我尝试执行 chrome.tabs.update Chrome 直接启动时，它会创建两个选项卡（i=21 和 i=22）并为每个 url 加载我的内容脚本i = 22 的选项卡（并且脚本只工作一次）：

```
function extraction(tab) {
for (var i =21; i<23;i++)
    {
        chrome.storage.sync.set({'extraction' : 1}, function() {}); //for my content script
        chrome.tabs.create({url: "http://example.com/"+i+".html"}, function() {});
    } 
}
chrome.browserAction.onClicked.addListener(function(tab) {extraction(tab);}); 
```

如果有人可以帮助我，内容脚本和 manifest.json 不是问题。我想做15000次，所以我不能这样做。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T17:17:32.310

我猜`chrome.tabs.create`是一个异步函数，所以你需要创建一个单独的函数，以便`i`每次都复制变量：

尝试这个：

```
var func = function(i)
{
        chrome.storage.sync.set({'extraction' : 1}, function() {}); //for my content script
        chrome.tabs.create({url: "http://example.com/"+i+".html"}, function() {});
}

function extraction(tab) {
for (var i =21; i<23;i++)
    {
      func(i);
    } 
}
chrome.browserAction.onClicked.addListener(function(tab) {extraction(tab);}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T16:04:23.647

在将选项卡更新到下一个 url 之前，您需要确保选项卡已完成加载，并且您的内容脚本已完成运行。实现此目的的一种方法是从内容脚本向后台页面发送消息。您可以在内容脚本中包含以下内容：

```
chrome.extension.sendMessage("finished"); 
```

在您的后台脚本中，您可以执行以下操作：

```
var current = 21, end = 23;
chrome.extension.onMessage.addListener(
  function(request, sender) {
    if( request == "finished" && current <= end ) {
      chrome.tabs.update( sender.tab.id,
                       {url: "http://example.com/"+current+".html"});
      current++;
    }
  }
);
chrome.tabs.create({url: "http://example.com/"+current+".html"}); 
```

# asp.net - ASP.NET MVC 如何在不显式传递的情况下将模型传递给视图

> ID：13220726
> 
> 赞同：2
> 
> 时间：2012-11-04T16:58:47.487
> 
> 标签：asp.net, asp.net-mvc

这是我见过的关于如何在 Controller 上进行验证的示例之一：

```
[HttpPost]
public ViewResult Create(MyModel response)
{
    if (ModelState.IsValid)
    {
        return View("Thanks");
    }
    else
    {
        return View();
    }
} 
```

如果存在验证错误，则在**没有任何参数**的情况下调用 return View() 方法。显然，您的视图中有 @Html.ValidationSummary() 并且模型具有所有必需的属性属性。

当视图与验证摘要一起呈现时，输入到表单中的数据被保留并再次显示。

我的问题：如何保存数据？因为它没有像

> 返回视图（响应）；

非常感谢。

真诚的，弗拉德

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T17:23:14.040

这是因为这些值已经绑定到模型状态，模型状态会被传递回视图。这是关于为什么不能更改模型值并再次返回视图的相同问题/问题。意思是，假设我的 Viewmodel 上有以下属性

```
public string Name {get;set;} 
```

使用下面的控制器，我无法在不清除 ModelState 或更新模型状态中的值的情况下更改 ViewModel 属性。尝试一下！

```
[HttpPost]
public ViewResult Create(MyModel response)
{
    response.Name = response.Name + "Some Random String"
    return View();
} 
```

name 属性将保持不变。本质上，一旦发生 ModelBinding，表单 (ViewModel) 中的值就会绑定到模型状态，这就是您不必将模型传递回视图的原因。

*作为旁注，我总是在我的调用中将模型传回给`return View();`，它看起来更正确并且更容易阅读*

# vim - vim中python文件的默认自动换行符

> ID：13220731
> 
> 赞同：0
> 
> 时间：2012-11-04T16:59:29.737
> 
> 标签：vim

当我在 vim 中编辑**python**`formatoptions`文件时，由于某种原因设置`tcq`为使其自动中断代码中的长行，这有时也可能会破坏代码。这与其他代码文件类型（例如**c**或**java** ）相反，其中自动换行符仅出现在注释中。我可以通过删除来禁用它，`t`但我想知道为什么**python**文件`formatoptions`的默认行为设置为此？

 **另外在哪里`formatoptions`设置了不同的文件类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T17:26:09.923

用于`:verbose set <option>`查看它的设置位置。

如果它在默认文件中：不要触摸它，只需在`~/.vimrc`.

如果它在某个第三方脚本中：看看它为什么这样设置，尝试所需的值，看看它是否破坏了任何东西。

***编辑***

我蠢得像块石头。你听到我了吗？*哑的。作为。A. 摇滚。*

`tcq`只是 的默认值`formatoptions`。我想`~/.vimrc`这是 Vim 这么说的一种（非直觉的）方式。

默认的 Python ftplugin 不会将其设置为其他值，因此您必须自己执行此操作。这是我所拥有的`~/.vim/after/ftplugin/python.vim`：

```
setlocal tabstop=4
setlocal shiftwidth=4
setlocal softtabstop=4
setlocal smartindent
setlocal formatoptions=croql
setlocal cinwords=if,elif,else,for,while,try,except,finally,def,class
setlocal omnifunc=pythoncomplete#Complete 
```**

# javascript - 在文本框焦点上使用函数？

> ID：13220741
> 
> 赞同：0
> 
> 时间：2012-11-04T17:00:47.490
> 
> 标签：javascript, jquery, autocomplete, focus

我想向一个站点添加一个自动完成功能，发现本指南使用了一些 js 代码，这对一个文本框非常有用：[http ://www.sks.com.np/article/9/ajax-autocomplete-using-php -mysql.html](http://www.sks.com.np/article/9/ajax-autocomplete-using-php-mysql.html)

但是，当尝试添加多个自动完成时，只有最后一个 tetbox 会起作用，因为它是最后一组。

这是为js脚本设置变量的函数

```
function setAutoComplete(field_id, results_id, get_url)
{

// initialize vars
acSearchId  = "#" + field_id;
acResultsId = "#" + results_id;
acURL       = get_url;

// create the results div
$("#auto").append('<div id="' + results_id + '"></div>');

// register mostly used vars
acSearchField   = $(acSearchId);
acResultsDiv    = $(acResultsId);

// reposition div
repositionResultsDiv();

// on blur listener
acSearchField.blur(function(){ setTimeout("clearAutoComplete()", 200) });

// on key up listener
acSearchField.keyup(function (e) {

    // get keyCode (window.event is for IE)
    var keyCode = e.keyCode || window.event.keyCode;
    var lastVal = acSearchField.val();

    // check an treat up and down arrows
    if(updownArrow(keyCode)){
        return;
    }

    // check for an ENTER or ESC
    if(keyCode == 13 || keyCode == 27){
        clearAutoComplete();
        return;
    }

    // if is text, call with delay
    setTimeout(function () {autoComplete(lastVal)}, acDelay);
});
} 
```

对于一个文本框，我可以像这样调用函数

```
$(function(){      
setAutoComplete("field", "fieldSuggest", "/functions/autocomplete.php?part=");
}); 
```

但是，当使用多个文本框时，我不确定我应该如何去做，这是我尝试过的，但没有奏效

```
$('#f1').focus(function (e) {   
    setAutoComplete("f1", "fSuggest1", "/functions/autocomplete.php?q1=");
}
$('#f2').focus(function (e) {   
    setAutoComplete("f2", "fSuggest2", "/functions/autocomplete.php?q2=");
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T17:10:09.250

您应该使用类来使您的函数在同一页面上的多个元素中工作。只需删除固定 ID 并执行 forEach 以针对该类的每个元素。

# sql - 使用此查询实现分页（跳过/获取）功能

> ID：13220743
> 
> 赞同：168
> 
> 时间：2012-11-04T17:00:54.207
> 
> 标签：sql, sql-server, join, pagination

我一直在尝试了解如何在 SQL 中实现自定义分页，例如阅读[这样的文章](https://stackoverflow.com/questions/548475/efficient-way-to-implement-paging)。

我有以下查询，效果很好。但我想用这个实现分页。

```
SELECT TOP x PostId FROM ( SELECT PostId, MAX (Datemade) as LastDate
 from dbForumEntry 
 group by PostId ) SubQueryAlias
 order by LastDate desc 
```

**我想要什么**

我有论坛帖子，以及相关条目。我想获取最新添加条目的帖子，所以我可以选择最近讨论过的帖子。

现在，我希望能够获得“前 10 到 20 个最近活跃的帖子”，而不是“前 10”。

**我试过什么**

我曾尝试将 ROW 功能实现为文章中的功能，但真的没有运气。

任何想法如何实现它？

* * *

## 回答 #1

> 赞同：348
> 
> 时间：2012-11-04T18:35:21.190

在**SQL Server 2012**中，这非常简单

```
SELECT col1, col2, ...
 FROM ...
 WHERE ... 
 ORDER BY -- this is a MUST there must be ORDER BY statement
-- the paging comes here
OFFSET     10 ROWS       -- skip 10 rows
FETCH NEXT 10 ROWS ONLY; -- take 10 rows 
```

如果我们想跳过 ORDER BY 我们可以使用

```
SELECT col1, col2, ...
  ...
 ORDER BY CURRENT_TIMESTAMP
OFFSET     10 ROWS       -- skip 10 rows
FETCH NEXT 10 ROWS ONLY; -- take 10 rows 
```

*（我宁愿将其标记为 hack - 但它已被使用，例如 NHibernate。使用明智的选择列作为 ORDER BY 是首选方式）*

回答这个问题：

```
--SQL SERVER 2012
SELECT PostId FROM 
        ( SELECT PostId, MAX (Datemade) as LastDate
            from dbForumEntry 
            group by PostId 
        ) SubQueryAlias
 order by LastDate desc
OFFSET 10 ROWS -- skip 10 rows
FETCH NEXT 10 ROWS ONLY; -- take 10 rows 
```

引入了新的关键字`offset`和`fetch next`（仅遵循 SQL 标准）。

*但我想，你没有使用**SQL Server 2012**，对吧*？在以前的版本中，它有点（一点点）困难。这是所有 SQL Server 版本的比较和示例：[这里](http://www.mssqltips.com/sqlservertip/2696/comparing-performance-for-different-sql-server-paging-methods/)

所以，这可以在**SQL Server 2008**中工作：

```
-- SQL SERVER 2008
DECLARE @Start INT
DECLARE @End INT
SELECT @Start = 10,@End = 20;

;WITH PostCTE AS 
 ( SELECT PostId, MAX (Datemade) as LastDate
   ,ROW_NUMBER() OVER (ORDER BY PostId) AS RowNumber
   from dbForumEntry 
   group by PostId 
 )
SELECT PostId, LastDate
FROM PostCTE
WHERE RowNumber > @Start AND RowNumber <= @End
ORDER BY PostId 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-09-19T14:11:36.043

为了在 SQL Server 中执行此操作，您必须按列对查询进行排序，以便您可以指定所需的行。

例子：

```
select * from table order by [some_column] 
offset 10 rows
FETCH NEXT 10 rows only 
```

并且在执行此操作时不能使用“TOP”关键字。

您可以在此处了解更多信息： [https ://technet.microsoft.com/pt-br/library/gg699618%28v=sql.110%29.aspx](https://technet.microsoft.com/pt-br/library/gg699618%28v=sql.110%29.aspx)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-06-21T11:21:32.347

**SQL 2008**

Radim Köhler 的回答有效，但这是一个较短的版本：

```
select top 20 * from
(
select *,
ROW_NUMBER() OVER (ORDER BY columnid) AS ROW_NUM
from tablename
) x
where ROW_NUM>10 
```

来源：[https ://forums.asp.net/post/4033909.aspx](https://forums.asp.net/post/4033909.aspx)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2017-05-03T17:57:03.983

```
OFFSET     10 ROWS       -- skip 10 rows
FETCH NEXT 10 ROWS ONLY; -- take 10 rows 
```

在选择语法的末尾使用它。=)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-21T22:43:55.420

修复方法是使用 XML 编辑器修改您的 EDMX 文件，并将**ProviderManifestToken**的值从**2012**更改为**2008**。我在我的 EDMX 文件的第 7 行发现了这一点。保存该更改后，将使用“旧”的 SQL Server 2008 兼容语法生成分页 SQL。

*我很抱歉在这个非常古老的线程上发布答案。为像我这样的人发布它，我今天解决了这个问题。*

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-02-22T11:55:54.517

您可以使用**嵌套查询**进行分页，如下所示：

从 4 Row 到 8 Row 分页，其中**CustomerId**是**主键**。

```
SELECT Top 5 * FROM Customers
WHERE Country='Germany' AND CustomerId Not in (SELECT Top 3 CustomerID FROM Customers
WHERE Country='Germany' order by city) 
order by city; 
```

# java - Maven - 项目构建期间的异常

> ID：13220747
> 
> 赞同：4
> 
> 时间：2012-11-04T17:01:07.017
> 
> 标签：java, maven

当我尝试构建项目时，出现异常：

> 下载： [http ://repo.maven.apache.org/maven2/log4j/log4j/1.2.14/log4j-1.2.14.jar](http://repo.maven.apache.org/maven2/log4j/log4j/1.2.14/log4j-1.2.14.jar) 2012 年 11 月 4 日下午 5:47:16 org.apache.maven.wagon.providers.http.httpclient.impl.client.DefaultRequestDirector tryExecute INFO：处理请求时捕获 I/O 异常 (java.net.SocketException)：连接重置2012 年 11 月 4 日下午 5:47:16 org.apache.maven.wagon.providers.http.httpclient.impl.client.DefaultRequestDirector tryExecute INFO：重试请求 2012 年 11 月 4 日下午 5:48:16 org.apache.maven。 wagon.providers.http.httpclient.impl.client.DefaultRequestDirector tryExecute INFO：处理请求时捕获 I/O 异常 (java.net.SocketException)：连接重置 2012 年 11 月 4 日下午 5:48:16 org.apache.maven。 wagon.providers.http.httpclient.impl.client.DefaultRequestDirector tryExecute 信息：重试请求 2012 年 11 月 4 日下午 5:49:17 org.apache.maven.wagon.providers.http.httpclient.impl.client.DefaultRequestDirector tryExecute 信息：处理请求时捕获的 I/O 异常 (java.net.SocketException)：Connection reset Nov 4, 2012 5:49:17 PM org.apache.maven.wagon.providers.http.httpclient.impl.client.DefaultRequestDirector tryExecute 信息：重试请求 [DEBUG] 写入分辨率跟踪文件 /root/.m2/repository/log4j/log4j/1.2.14/log4j-1.2.14.jar.lastUpdated [INFO] ------------- -------------------------------------------------- --------- [信息] 构建失败 [信息] --------------------------------- --------------------------------------- [INFO] 总时间：4:03.016s [ INFO] 完成于：Sun Nov 04 17:50:17 CET 2012 [INFO] Final Memory: 5M/15M [INFO] ------------------------ -------------------------------------------------- [错误] 无法在项目 jboss-ejb3-examples-ch04-firstejb 上执行目标：无法解析项目组织的依赖关系。jboss.ejb3.examples:jboss-ejb3-examples-ch04-firstejb:jar:1.0.0-cr-1：无法从/到中央传输工件 log4j:log4j:jar:1.2.14 (http://repo. maven.apache.org/maven2): Connection reset -> [Help 1] org.apache.maven.lifecycle.LifecycleExecutionException: 无法在项目 jboss-ejb3-examples-ch04-firstejb 上执行目标：无法解析项目 org 的依赖项.jboss.ejb3.examples:jboss-ejb3-examples-ch04-firstejb:jar:1.0.0-cr-1：无法从/到中央传输工件 log4j:log4j:jar:1.2.14 (http://repo .maven.apache.org/maven2)：在 org.apache.maven.lifecycle.internal.LifecycleDependencyResolver.resolveProjectDependencies(LifecycleDependencyResolver.爪哇：117) 在 org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:201) 在 org.apache.maven 的 org.apache.maven.lifecycle.internal.MojoExecutor.ensureDependenciesAreResolved(MojoExecutor.java:258) .lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153) 在 org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145) 在 org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:84) 在 org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59) 在 org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183) 在在 org.apache.maven.DefaultMaven 的 org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)。doExecute(DefaultMaven.java:320) 在 org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156) 在 org.apache.maven.cli.MavenCli.execute(MavenCli.java:537) 在 org.apache.maven .cli.MavenCli.doMain(MavenCli.java:196) 在 org.apache.maven.cli.MavenCli.main(MavenCli.java:141) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl .invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method.java:597) 在 org.codehaus.plexus.classworlds。 launcher.Launcher.launchEnhanced(Launcher.java:290) 在 org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230) 在 org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.爪哇：409) 在 org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352) 引起：org.apache.maven.project.DependencyResolutionException：无法解析项目 org.jboss.ejb3.examples 的依赖项： jboss-ejb3-examples-ch04-firstejb:jar:1.0.0-cr-1：无法从/到中央传输工件 log4j:log4j:jar:1.2.14 (http://repo.maven.apache.org/ maven2)：在 org.apache.maven.lifecycle.internal.LifecycleDependencyResolver.getDependencies(LifecycleDependencyResolver.java:185) 的 org.apache.maven.project.DefaultProjectDependenciesResolver.resolve(DefaultProjectDependenciesResolver.java:189) 处的连接重置 ... 22 更多引起：org.sonatype.aether.resolution.DependencyResolutionException：无法将工件log4j：log4j：jar：1.2.14从/到中央（http://repo.maven.apache.org/maven2）：在 org.apache.maven.project.DefaultProjectDependenciesResolver.resolve(DefaultProjectDependenciesResolver.java:183) 的 org.sonatype.aether.impl.internal.DefaultRepositorySystem.resolveDependencies(DefaultRepositorySystem.java:375) 处的连接重置 ... 23 更多原因： org.sonatype.aether.resolution.ArtifactResolutionException：无法将工件 log4j:log4j:jar:1.2.14 从/到中央传输（http://repo.maven.apache.org/maven2）：在 org.sonatype 处重置连接。 aether.impl.internal.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:538) 在 org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolveArtifacts(DefaultArtifactResolver.java:216) 在 org.sonatype.aether.impl.internal.DefaultRepositorySystem。 resolveDependencies(DefaultRepositorySystem.java:358) ... 24 更多原因：org.sonatype.aether.transfer.ArtifactTransferException：无法将工件 log4j:log4j:jar:1.2.14 从/到中央传输（http://repo.maven.apache.org/maven2）：在 org.sonatype.aether 处重置连接。 connector.wagon.WagonRepositoryConnector$4.wrap(WagonRepositoryConnector.java:951) at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$4.wrap(WagonRepositoryConnector.java:939) at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$ GetTask.run(WagonRepositoryConnector.java:669) at org.sonatype.aether.util.concurrency.RunnableErrorForwarder$1.run(RunnableErrorForwarder.java:60) at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886 ) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) 在 java.lang.Thread.run(Thread.java:662）原因：org.apache.maven.wagon.TransferFailedException：org.apache.maven.wagon.StreamWagon 的 org.apache.maven.wagon.shared.http4.AbstractHttpClientWagon.fillInputData(AbstractHttpClientWagon.java:799) 处的连接重置.getInputStream(StreamWagon.java:116) 在 org.apache.maven.wagon.StreamWagon.getIfNewer(StreamWagon.java:88) 在 org.apache.maven.wagon.StreamWagon.get(StreamWagon.java:61) 在 org. sonatype.aether.connector.wagon.WagonRepositoryConnector$GetTask.run(WagonRepositoryConnector.java:601) ... 4 更多原因：java.net.SocketException：java.net.SocketInputStream.read 处的连接重置（SocketInputStream.java:168 ) 在 org.apache.maven.wagon.providers.http 的 org.apache.maven.wagon.providers.http.httpclient.impl.io.AbstractSessionInputBuffer.fillBuffer(AbstractSessionInputBuffer.java:149)。httpclient.impl.io.SocketInputBuffer.fillBuffer(SocketInputBuffer.java:111) 在 org.apache.maven.wagon.providers.http.httpclient.impl.io.AbstractSessionInputBuffer.readLine(AbstractSessionInputBuffer.java:264) 在 org.apache。 maven.wagon.providers.http.httpclient.impl.conn.DefaultResponseParser.parseHead(DefaultResponseParser.java:98) at org.apache.maven.wagon.providers.http.httpclient.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java :252) 在 org.apache.maven.wagon.providers.http.httpclient.impl.AbstractHttpClientConnection.receiveResponseHeader(AbstractHttpClientConnection.java:282) 在 org.apache.maven.wagon.providers.http.httpclient.impl.conn.DefaultClientConnection .receiveResponseHeader(DefaultClientConnection.java:247) 在 org.apache.maven.wagon.providers.http.httpclient.impl.conn。AbstractClientConnAdapter.receiveResponseHeader(AbstractClientConnAdapter.java:219) at org.apache.maven.wagon.providers.http.httpclient.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:298) at org.apache.maven.wagon.providers.http。 httpclient.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:125) 在 org.apache.maven.wagon.providers.http.httpclient.impl.client.DefaultRequestDirector.tryExecute(DefaultRequestDirector.java:633) 在 org.apache.maven。 wagon.providers.http.httpclient.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:454) at org.apache.maven.wagon.providers.http.httpclient.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:820 ) 在 org.apache.maven.wagon.providers.http.httpclient.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:754) 在 org.apache.maven.wagon.shared.http4.AbstractHttpClientWagon.execute(AbstractHttpClientWagon.java:674) 在 org.apache.maven.wagon.shared.http4.AbstractHttpClientWagon.fillInputData(AbstractHttpClientWagon.java:793) ... 8 more [ERROR] [ERROR] [ERROR] 有关错误和可能解决方案的更多信息，请阅读以下文章： [ERROR] [Help 1] [http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException](http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException)

问题是什么？我认为 pom 和其他东西都可以，因为它是书中的例子，所以它应该构建。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-04T17:04:09.713

埋在那里你会看到：

```
http://repo.maven.apache.org/maven2: Connection reset 
```

你有网络问题。也许你正在使用 wifi 并受到干扰......谁知道呢。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-10-19T11:44:44.327

也许是 IPv4 与 IPv6 不兼容的问题。您可以尝试使用 mvn clean -Djava.net.preferIPv4Stack。如果是，您可以在网络适配器上设置为 MVN_OPTIONS 或禁用 IPv6。参考：[https ://coderanch.com/t/588928/java-net-SocketException-caught-connecting](https://coderanch.com/t/588928/java-net-SocketException-caught-connecting)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-03T16:42:41.807

我遇到了同样的问题 - 是我的防病毒软件阻止了后面的端口。禁用防病毒软件和/或更改防火墙设置，它应该可以工作...... :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T17:10:32.523

异常本身有解决方案检查异常最后一行中的链接。

```
[ERROR] [ERROR] [ERROR] For more information about the errors and possible solutions, please read the following articles: [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException 
```

检查它你可能有其中之一。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-16T10:41:41.030

我遇到了同样的问题 - 我的构建失败并显示“连接重置”消息，对于所有不同的依赖项，即使我的互联网连接对于其他站点来说似乎很好。

当我将 Maven 从 3.0.4 升级到 3.2.2 时，问题就消失了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-06T04:55:41.730

Adding a **web proxy** entry/declaration to Maven [settings.xml](/home/<user>/.m2/settings.xml) as described in their [documentation](https://maven.apache.org/guides/mini/guide-proxies.html) resolved the ERROR messages if the current system is behind a web proxy.

Hope it helps!

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-09-11T20:58:14.553

我有同样的问题，只是分享我的解决方案。检查后确定不是网络问题。错误是我当时配置了错误的 java 版本，我有 1.7，并且这个项目被配置为使用 1.8。改回来后，代码构建成功并下载了引用。

希望它可以帮助某人。

# jquery - 上传文件以访问网页？我的代码不好？

> ID：13220753
> 
> 赞同：0
> 
> 时间：2012-11-04T17:01:22.410
> 
> 标签：jquery, html, ajax

这个想法很简单，当您访问同一个网页时，您应该根据点击`<a>`元素上传不同的文件：曲目或集合。

但是我的代码不起作用，有什么想法吗？

网页中的html

```
<li id="sets"><a href="producciones.html" onclick="cargar('tracks.txt', '#p1')">Tracks</a></li>
<li id="sets"><a href="producciones.html" onclick="cargar('sets.txt', '#p1')">Sets</a></li> 
```

脚本js中的JQuery+AJAX。

```
function cargar(arch, id){
    $.ajax({
        url:arch,
        success:function(result){
            $(id).html(result);
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T17:31:17.597

在您的代码中，当按下链接时，`cargar()`会执行该函数，但也会重新加载页面。尝试添加`return false;`以阻止在浏览器窗口中打开页面。

```
<li id="sets"><a href="producciones.html" onclick="return cargar('tracks.txt', '#p1');">Tracks</a></li>
<li id="sets"><a href="producciones.html" onclick="return cargar('sets.txt', '#p1');">Sets</a></li> 
```

和：

```
function cargar(arch, id){
  $.ajax({url:arch,success:function(result){
    $(id).html(result);
  }});
  return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T17:33:45.380

可能是 href 和 inline JS 之间的问题`onclick`。

您可以添加更多 JQuery 以避免内联脚本并执行以下操作：

```
<li id="sets-1" target="p1" url="tracks.txt">Tracks</li>
<li id="sets-2" target="p1" url="sets.txt">Sets</li>

$('[id^="sets-"]').each(function(){
    $(this).click(function(){
        var url = $(this).attr('url');
        var target = $(this).attr('target');
        $.ajax({
            url:url,
            success:function(result){
                $('#' + target).html(result);
            }
        });
    }); 
}); 
```

# ios - armv7s 的 OpenCV 不包括合并或拆分方法？

> ID：13220756
> 
> 赞同：2
> 
> 时间：2012-11-04T17:01:44.833
> 
> 标签：ios, opencv, ios6

我为 armv7s 使用了 OpenCV 的编译版本，可以在这里找到：

[https://github.com/hammer498](https://github.com/hammer498)

我使用grabcut功能，它可以工作，就像其他一些功能一样

但是当我使用合并或拆分方法时，我在编译过程中出错

> 架构 armv7s 的未定义符号：
> “cv::merge(std::vector > const&, cv::_OutputArray const&)”，引用自：-[GrabcutVC startGrabcut] in GrabcutVC.o "cv::split(cv::Mat const& , std::vector >&)"，引用自：GrabcutVC.o ld 中的 -[GrabcutVC startGrabcut]：未找到架构 armv7s 的符号

我错过了什么 ？

这个帖子有点相关

[OpenCV.Framework 不能针对 armv7s 架构进行编译](https://stackoverflow.com/questions/12491046/opencv-framework-does-not-compile-for-the-armv7s-architecture)

我想发表评论，但我的声誉太低

锤子，希望你能看到这篇文章：）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T01:51:23.660

我遇到了同样的问题，并通过将“C++ 标准库”更改为`libc++`：

```
CLANG_CXX_LIBRARY = libc++ 
```

以前我将它设置为编译器默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T16:04:34.223

我不知道什么会导致你的问题。我的解决方案现在已经过时了，因为 opencv [2.4.3](http://code.opencv.org/projects/opencv/wiki/ChangeLog#243)支持 armv7s。我建议下载并使用它。

# c++ - 定义或声明中的成员初始化列表？

> ID：13220757
> 
> 赞同：7
> 
> 时间：2012-11-04T17:01:46.730
> 
> 标签：c++, constructor, initializer

我应该在构造函数声明中声明一个类的成员初始值设定项列表：

```
class A
{
public:
    A(int data) : theData(data);
}; 
```

或在构造函数定义中：

```
A::A(int data) : theData(data)
{
    // code...
}; 
```

还是没关系？如果你以某种方式做到这一点，为什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-04T17:02:47.790

您只能在构造函数的定义中包含成员初始值设定项列表。它是定义的一部分。

# mysql - 无法将我的本地 Wordpress 安装隧道传输到 appfog 上的 mysql 数据库

> ID：13220759
> 
> 赞同：1
> 
> 时间：2012-11-04T17:01:59.120
> 
> 标签：mysql, wordpress, mamp, appfog

我在 appfog 上设置了 wordpress 安装（使用 rackspace），并将安装克隆到我的本地机器进行开发。我知道安装工作（使用 MAMP），因为我创建了一个本地 mysql 数据库并将 wp-config.php 更改为指向它。但是，我想开发而不必每次提交时都更改 wp-config.php。在做了一些研究之后，似乎 Appfog 服务 Caldecott 让我可以使用`af tunnel`. 不幸的是，我在让它工作时遇到了问题。即使我将 MAMP mysql 端口更改为 8889 之类的东西，并通过端口 3306 隧道 mysql，它看起来已经连接，但在加载我的本地主机 Wordpress 时仍然出现“建立数据库连接时出错”。当我退出 mysql 监视器时（使用`ctrl+x, ctrl+c`)，我收到一条消息，指出“错误：'mysql' 执行失败；它在你的 $PATH 中吗？”。最初，不，它不是，但我已经在本地机器上修复了 PATH 变量，这样当我转到终端并输入`mysql`，它会加载。

所以我想我的问题是两个部分：

1.）我是否在我的本地机器上采用正确的方法进行 Wordpress 开发

和

2.）如果是这样，为什么隧道不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T05:24:03.380

解决此问题的一种方法是使用本地数据库设置模拟`VCAP_SERVICES`本地系统上的环境变量。这将允许您使用相同的自定义 AppFog [wp-config.php](https://github.com/appfog/af-php-wordpress/blob/master/wp-config.php)文件，该文件查看 VCAP_SERVICES 以获取其数据库凭据。

```
export VCAP_SERVICES='{"mysql-5.1": [{"credentials": {                      
    "hostname": "localhost",          
    "port": 3306,            
    "password": "root",            
    "name": "LOCAL_DATABASE_NAME",            
    "user": "root"}}]}' 
```

编辑：设置此环境变量后，您需要在 MAMP 中重新启动 Apache 服务器。（感谢德克斯）

这将消除将开发代码指向生产数据库的需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T16:02:47.580

只需测试 vcap_services 是否可用。如果是，请使用一个配置。如果它们不是，请使用不同的配置。

这是我的本地+ appfog开发网站配置文件的示例。

```
if(getenv("VCAP_SERVICES")){
    //if in webserver
    $services_json = json_decode(getenv("VCAP_SERVICES"),true);
    $mysql_config = $services_json["mysql-5.1"][0]["credentials"];
    $username = $mysql_config["username"];
    $password = $mysql_config["password"];
    $hostname = $mysql_config["hostname"];
    $port = $mysql_config["port"];
    $db = $mysql_config["name"];

    define("DB_SERVER", "$hostname");
    define("DB_USER", "$username");//enter your database username
    define("DB_PASS", "$password");//databse password
    define("DB_NAME", "$db");//database name
} else {
     //if in local development
     define("DB_SERVER", "localhost");
     define("DB_USER", "website");//enter your database username
     define("DB_PASS", "dfgdfgdf");//databse password
     define("DB_NAME", "fgdf_web");//database name
} 
```

此外，您可以使用与使用 .gitignore 相同的方式使用 .afignore 来忽略 af 更新功能中的某些文件。您可以使用适当的配置更新一次，然后添加 afignore，然后它将永远不会再次更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T23:03:07.223

这是一个快速且*非常*肮脏的脚本，可根据 Tim Santeford 的回答自动执行该过程。请务必更改 LOCAL_DATABASE_NAME

```
#!/bin/bash

export VCAP_SERVICES='{"mysql-5.1": [{"credentials": {"hostname": "localhost", "port": 8889, "password": "root", "name": "LOCAL_DATABASE_NAME", "user": "root"}}]}'

/Applications/MAMP/Library/bin/httpd -k stop

sleep 3

/Applications/MAMP/Library/bin/httpd -k start 
```

# python - 我可以得到 1 或 3 个“无”值，但不是 2

> ID：13220764
> 
> 赞同：0
> 
> 时间：2012-11-04T17:02:18.720
> 
> 标签：python, zip, itertools

这是我所拥有的：

```
item_dictionary = {'10350': 'Third-Age Full', '560':'Death Rune'}

filler = []
for i in range(0,365):
    filler.append(None)

filler1=[]
for i in range(0, 2):
    filler1.append(None)

filler2=[]
for i in range(0, 1):
    filler2.append(None)

names = item_dictionary.values()
names_filled = list(itertools.chain.from_iterable(zip(names, filler1 * len(names))))
#Returns ['Death Rune', None, 'Third-Age Full', None] 
```

和

```
names = item_dictionary.values()
names1 = list(itertools.chain.from_iterable(zip(names, filler2 * len(names))))
names_filled = list(itertools.chain.from_iterable(zip(names1, filler1 * len(names))))
#Returns ['Death Rune', None, None, None, 'Third-Age Full', None, None, None] 
```

我正在努力，`['Death Rune', None, None, 'Third-Age Full', None, None]`但我似乎做不到，有人可以帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T17:08:28.060

怎么样：

```
In [171]: item_dictionary = {'10350': 'Third-Age Full', '560':'Death Rune'}

In [172]: names = item_dictionary.values()

In [173]: [n for name in names for n in [name, None, None]]
Out[173]: ['Death Rune', None, None, 'Third-Age Full', None, None] 
```

或者如果您想轻松地将`None`s 的数量更改为其他值，

```
In [174]: [n for name in names for n in [name] + [None]*2]
Out[174]: ['Death Rune', None, None, 'Third-Age Full', None, None] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T17:14:08.460

首先，您可以更轻松地创建这些填充物：

```
filler = [None] * 365
filler1 = [None] * 2
filler2 = [None] 
```

要真正回答您的问题，您可以压缩两个以上的可迭代对象，因此您可以只压缩第三个填充物：

```
>>> list(itertools.chain.from_iterable(zip(names, [None] * len(names), [None] * len(names))))
['Third-Age Full', None, None, 'Death Rune', None, None] 
```

然后你也可以使用`itertools.zip_longest`它根本不需要你扩展那些填充迭代，而只是自动扩展它们（默认情况下`zip_longest`将`None`用作它的填充值）：

```
>>> list(itertools.chain.from_iterable(itertools.zip_longest(names, [], [])))
['Third-Age Full', None, None, 'Death Rune', None, None] 
```

或者，正如 unutbu 建议的那样，使用列表理解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T17:10:05.300

这不会做你想要的吗？

```
names_filled = list(itertools.chain.from_iterable([[n,None,None] for n in names]) 
```

# java - 为什么 id 字段不能用于 EclipseLink 的 where caluse

> ID：13220770
> 
> 赞同：0
> 
> 时间：2012-11-04T17:03:38.563
> 
> 标签：java, hibernate, jpa, orm, eclipselink

我正在将应用程序从 Hibernate 移动到 EclipseLink。我有以下命名查询：

```
delete from MyObject where id<=:LAST_ID 
```

该查询在 Hibernate 中运行良好，但在 EclipseLink 中失败并出现以下错误：

> 标识变量“id”不能与 <= 运算符一起使用。

是否允许在 JPA 的 where caluse 中使用 ID 字段？

任何解决方法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T17:21:20.923

对我有用的语法是：

```
delete from MyObject mo where mo.id <= :LAST_ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T17:06:44.107

AFAIK，您始终可以使用`Delete From MyObject Where MyObject <= :LAST_ID`相同的效果。无论如何，如果您发布实体定义，我们可能会更有帮助。

# python - 不要在 SQLAlchemy 中返回整行

> ID：13220774
> 
> 赞同：0
> 
> 时间：2012-11-04T17:03:54.817
> 
> 标签：python, sqlalchemy

我的 SQLAlchemy 代码：

```
used_emails = list(db.execute(halo4.select(halo4.c.email != ''))) 
```

返回：

`[(80940L, 'P7J4H-DFDMG-G6HMJ-W7PF9-MDTF1', '1', 'first.last@domain.com', datetime.datetime(2012, 11, 3, 3, 48, 58)), (80939L, 'GCTFY-QPK2Y-PX1CJ-W69QY-PHDGZ', '1', 'first.last@domain.com', datetime.datetime(2012, 11, 3, 15, 8, 15)), (80938L, 'R4XGV-PG461-RGXX7-9R47R-2RWYZ', '1', 'first.last@domain.com', datetime.datetime(2012, 11, 3, 15, 8, 27))]`

如何让 SQLAlchemy 只返回：

`[('first.last@domain.com', 'first.last@domain.com', 'first.last@domain.com')]`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T17:35:54.517

下面将给出`email`列值的列表：

```
from sqlalchemy.sql.expression import select

used_emails = [row.email for row
               in db.execute(select([halo4.c.email], halo4.c.email!='')] 
```

基本上你是在告诉函数只为列[`select()`](http://docs.sqlalchemy.org/en/rel_0_7/core/expression_api.html#sqlalchemy.sql.expression.select)生成一个语句。的结果将是 a所以[列表推导](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)的工作是从从 iterable 获得的单列行创建列字符串值列表。`SELECT``email``execute()`[`ResultProxy`](http://docs.sqlalchemy.org/en/rel_0_7/core/connections.html#sqlalchemy.engine.base.ResultProxy)`email`[`ResultProxy`](http://docs.sqlalchemy.org/en/rel_0_7/core/connections.html#sqlalchemy.engine.base.ResultProxy)

# objective-c - 目标 C：初始化 NSString

> ID：13220777
> 
> 赞同：0
> 
> 时间：2012-11-04T17:04:06.607
> 
> 标签：objective-c, nsstring

我有一个简单的代码块，需要将 NSString 设置为一件事或另一件事。在它的最基本形式中，它看起来像这样：

```
if (conditionMet){
   NSString *outputString=[NSString stringWithString:@"A"];
} else {
   NSString *outputString=[NSString stringWithString:@"B"];
}
return outputString; 
```

但是，我收到“使用未声明的标识符‘outputString’”错误。有什么更好的方法来做到这一点？

我知道这是一个非常基本的问题，所以任何关于如何做到这一点的快速指示都会很棒。谢谢阅读。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T17:06:44.633

关于什么 ？

```
NSString *outputString;
if (conditionMet){
   outputString=@"A";
} else {
   outputString=@"B";
}
return outputString; 
```

你需要了解[范围](http://en.wikipedia.org/wiki/Scope_%28computer_science%29)

较短的版本：

`return conditionMet ? @"A" : @"B" ;`

这叫做[三元条件](http://www.techotopia.com/index.php/Objective-C_Operators_and_Expressions#The_Ternary_Operator)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T17:08:32.527

这是因为您在 if else 块中声明和定义它。它们是本地的，ARC 将在块结束时释放它们。

这样做的方法是在 if-else 块之外声明它。您可以只定义其中的字符串，并且在其末尾仍然有一个有效的 NSString 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T17:09:35.893

```
NSString *outputString 
if (conditionMet){
  outputString=[NSString stringWithString:@"A"];
} else {
  outputString=[NSString stringWithString:@"B"];

}
return outputString; 
```

# nsmutablearray - 将 UILabel 的文本设置为数组中的随机对象

> ID：13220779
> 
> 赞同：0
> 
> 时间：2012-11-04T17:04:11.877
> 
> 标签：nsmutablearray, ios6, uilabel, xcode4.5

我正在尝试制作一个 xcode 项目，当用户点击 UIButton (IBAction) 时，它将 UILabel 的文本设置为NSMutable 数组中的**随机对象。**我不想使用案例和开关，因为我的情况需要很长时间。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T17:50:43.313

您分配字符串以保存数组，然后单击生成随机数（最大值是数组大小），然后分配给标签我认为它有效

# carousel - 在 shopify 网站中插入轮播应用程序

> ID：13220782
> 
> 赞同：1
> 
> 时间：2012-11-04T17:04:19.350
> 
> 标签：carousel, shopify

我有轮播应用程序，但不知道如何将其插入我的 shopify 网站。我不知道 html，并试图将其插入到我使用他们易于使用的软件创建的页面上。请帮忙。

# android - NPE同时在Android中动态初始化TableRows

> ID：13220783
> 
> 赞同：5
> 
> 时间：2012-11-04T17:04:21.117
> 
> 标签：android, tablerow

我是 Android 开发的新手，现在面临一个致命错误。我想用动态添加的 TableRows 创建一个表。在 makeNewRow() 的第二行，我得到一个 NullPointerException。在此处发布的其他问题中，我读到 ContentView 在初始化 TableRow 之前可能未设置，但我的 onCreate 方法工作正常。在我的手机上测试该应用程序时，我在应用程序崩溃之前在我的屏幕上看到已经包含一行的 TableLayout。但是我想我的“这个”有什么问题，但到目前为止我没有找到任何帮助......

理解代码的注意事项：AsyncTask JSONDownload 返回一个 JSONArray 并在其 postExecute() 方法中调用 makeNewRow()。JSONArray 已正确填充。

```
package com.***;

import org.json.JSONArray;
import org.json.JSONException;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.ViewGroup.LayoutParams;
import android.widget.TableLayout;
import android.widget.TableRow;
import android.widget.TextView;

public class Tabelle extends Activity {

url= "***";
JSONDownloader jdown;
TableLayout tl;

@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_tabelle);
    tl = (TableLayout) findViewById(R.id.tabelleLayout);
    new JSONDownloader().execute(url);
}

public void makeNewRow(JSONArray platzierung, int row) {
    row++;
    TableRow tr = new TableRow(this);
    tr.setId(100+row);
    tr.setLayoutParams(
            new LayoutParams(
                    LayoutParams.MATCH_PARENT,
                    LayoutParams.WRAP_CONTENT)
            );

    TextView platz = new TextView(this);
    platz.setId(200+row);
    platz.setText(row);
    platz.setLayoutParams(
            new TableRow.LayoutParams(
                    0,
                    LayoutParams.WRAP_CONTENT,
                    1f)
            );
    tr.addView(platz);

    /**other textviews **/

    tl.addView(tr);
}
  } 
```

日志猫：

```
11-04 17:26:59.859: E/AndroidRuntime(5389): FATAL EXCEPTION: main
11-04 17:26:59.859: E/AndroidRuntime(5389): java.lang.NullPointerException
11-04 17:26:59.859: E/AndroidRuntime(5389): at android.content.ContextWrapper.getResources(ContextWrapper.java:81)
11-04 17:26:59.859: E/AndroidRuntime(5389): at android.view.View.<init>(View.java:3228)
11-04 17:26:59.859: E/AndroidRuntime(5389): at android.view.ViewGroup.<init>(ViewGroup.java:416)
11-04 17:26:59.859: E/AndroidRuntime(5389): at android.widget.LinearLayout.<init>(LinearLayout.java:168)
11-04 17:26:59.859: E/AndroidRuntime(5389): at android.widget.TableRow.<init>(TableRow.java:61)
11-04 17:26:59.859: E/AndroidRuntime(5389): at com.***.Tabelle.makeNewRow(Tabelle.java:51)
11-04 17:26:59.859: E/AndroidRuntime(5389): at com.***.Tabelle.showTable(Tabelle.java:37)
11-04 17:26:59.859: E/AndroidRuntime(5389): at com.***.JSONDownloader.onPostExecute(JSONDownloader.java:79)
11-04 17:26:59.859: E/AndroidRuntime(5389): at com.***.JSONDownloader.onPostExecute(JSONDownloader.java:1)
11-04 17:26:59.859: E/AndroidRuntime(5389): at android.os.AsyncTask.finish(AsyncTask.java:631)
11-04 17:26:59.859: E/AndroidRuntime(5389): at android.os.AsyncTask.access$600(AsyncTask.java:177)
11-04 17:26:59.859: E/AndroidRuntime(5389): at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
11-04 17:26:59.859: E/AndroidRuntime(5389): at android.os.Handler.dispatchMessage(Handler.java:99)
11-04 17:26:59.859: E/AndroidRuntime(5389): at android.os.Looper.loop(Looper.java:137)
11-04 17:26:59.859: E/AndroidRuntime(5389): at android.app.ActivityThread.main(ActivityThread.java:4931)
11-04 17:26:59.859: E/AndroidRuntime(5389): at java.lang.reflect.Method.invokeNative(Native Method)
11-04 17:26:59.859: E/AndroidRuntime(5389): at java.lang.reflect.Method.invoke(Method.java:511)
11-04 17:26:59.859: E/AndroidRuntime(5389): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
11-04 17:26:59.859: E/AndroidRuntime(5389): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
11-04 17:26:59.859: E/AndroidRuntime(5389):     at dalvik.system.NativeStart.main(Native Method) 
```

希望可以有人帮帮我！:)

编辑：这是我的 onPostExecute() 代码：

```
@Override
protected void onPostExecute (JSONArray jarray){
   table=new Tabelle();
   table.showTable(jarray);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T20:16:55.883

我看到你添加了你的`onPostExecute()`方法，现在这个错误是有意义的。您正在尝试（错误地）创建一个新的 Activity 而不是使用现有的。试试这个：

```
@Override
protected void onPostExecute (JSONArray jarray){
    Tabelle.this.showTable(jarray);
} 
```

# c++ - 将圆旋转特定角度（openGL）

> ID：13220784
> 
> 赞同：0
> 
> 时间：2012-11-04T17:04:31.837
> 
> 标签：c++, opengl, glut

我喜欢转动这个类成员绘制的圆圈：

```
void Scene1::Circle(float x_, float y_, float z_, float r){
    xx=r*cos(359 * PI/180.0f);
    xy=r*sin(359 * PI/180.0f);
    glBegin(GL_QUADS);
    for(int j = 0; j < 360; j++)
    {
        glVertex3d(xx+x_,xy+y_,z_);
        glVertex3d(x_,y_,z_);
        xx= r * cos(j * PI/180.0f);
        xy= r * sin(j * PI/180.0f);
        glVertex3d(xx+x_,xy+y_,z_);
        glVertex3d(x_,y_,z_);
    }
    glEnd();
} 
```

通过特定的角度。如果我使用

```
glRotatef() 
```

它在某种程度上不起作用。我希望 Circle 始终向凸轮显示他的表面，我想将其用作某种 Comic-Sphere。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T22:34:52.180

您要实现的是所谓的广告牌。这最容易通过将模型视图矩阵的左上角 3×3 设置为标识来实现。

如果你坚持坚持使用OpenGL矩阵函数，使用`glGetFloatv(GL_MODELVIEW_MATRIX, m)`检索它，将左上角的3×3元素更改为恒等，然后使用`glLoadMatrix(m)`将其放回OpenGL。用 glPushMatrix、glPopMatrix 将其包围以保持局部效果。

# c# - 日期列上的 NHibernate LIKE 查询

> ID：13220787
> 
> 赞同：0
> 
> 时间：2012-11-04T17:04:47.800
> 
> 标签：c#, sql, datetime, nhibernate, sql-like

我正在使用以下代码来动态过滤数据（我使用 MySQL 作为数据库引擎）：

```
var filter = string.Empty;
if (!string.IsNullOrWhiteSpace(filterNumber))
{
    filter = "t.Number LIKE :filterNumber";
}
var query = string.Format("SELECT t FROM Table t WHERE 1=1 AND {0} ORDER BY {1} {2}", filter, orderBy, orderDirection);
var q = Session.CreateQuery(query);
if (!string.IsNullOrWhiteSpace(filterNumber))
{
    q.SetParameter<string>("filterNumber", "%" + filterNumber + "%");
}
q.SetFirstResult(offset);
q.SetMaxResults(limit);
return q.List<Table>(); 
```

（假设 , `filterNumber`, `orderBy`,`orderDirection`和`offset`是`limit`方法的参数并且`1=1`只是为了这个问题而添加的，所以查询总是有效的）

当 Number 是字符串（MySQL 中的 VARCHAR）列时它确实有效，但当它是日期时间或整数列时它不起作用。

对于 datetime 它会引发异常： `could not execute query […] Name:filterDate - Value:%2012%`并且内部异常是`Specified cast is not valid`.

对于整数/浮点列，异常是： `could not execute query […] Name:filterPrice - Value:%100%`内部异常是`Input string was not in a correct format`.

（`Date`并且`Price`是表中的另一列）

如何在日期/数字列上动态创建这样的 LIKE 查询？这种查询在 MySQL 中运行良好：

```
SELECT * FROM `Table` WHERE `Date` LIKE '%2012%' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T20:14:25.667

根据@usr 评论，我设法在 HQL 中进行了强制转换：

```
filter = "CAST(t.Date AS String) LIKE :filterDate"; 
```

它适用于日期和数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T18:04:57.700

如果可以避免的话，将 LIKE 与日期/数字一起使用可能不是一个好主意。如果打算在年份匹配，则应使用 year(alias.property) HQL 函数（无需将查询转换为 Criteria API，因为这是 HQL 语法）和常规等号运算符。或小于/大于。

我怀疑 SQL 通过自动转换为 varchar 来工作，但除非你真的需要模式匹配，否则我认为与使用日期提取或 BETWEEN 相比，它的性能要差得多。

如果确实需要模式匹配，则应将日期/数字转换为字符串。

# php - PHP查询-在第1、5、9条记录添加一个类

> ID：13220789
> 
> 赞同：0
> 
> 时间：2012-11-04T17:04:50.803
> 
> 标签：php, mysql, pdo

我想知道是否可以使用 PHP 向返回的 X 记录添加一个类。我知道我只能用 JS 来做到这一点，我希望它在返回记录时添加类。

我的 PHP 中有以下循环，根据我在谷歌中找到的内容，我需要添加一个计数器来执行此操作，但到目前为止我一直没有成功......

```
while ($row = $sth->fetch(PDO::FETCH_ASSOC)) {
        echo '<div class="entry span3"><span class="name">' . $row['First_Name'] . ' ' . $row['Surname'] . "</span>";
        echo '<img src="' . $row["picture_1"] . '" alt="' . $row['First_Name'] . ' ' . $row['Surname'] . ', text ' . $row['Date'] . ' ">';
        echo '<span class="from">seen in ' . ucwords($row["Location_County__Seen"]) . '</span><a href="/' . strtolower($row["Surname"]) . '/' . $row["ID"] . '">View Profile</a></div>';
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T17:11:01.683

在你的前面，添加`$c = 1`

在你的 while 循环结束之前，添加`$c++;`

然后，修改您的第一行：

`echo '<div class="entry span3"><span class="name">'`

到

```
echo '<div class="entry span3';
if (($c % 4) == 1) echo ' newclassname ';
echo '"><span class="name">' 
```

对于最终结果：

```
$c = 1;
while ($row = $sth->fetch(PDO::FETCH_ASSOC)) {
    echo '<div class="entry';
    if (($c % 4) == 1) echo ' newclassname ';
    echo ' span3"><span class="name">' . $row['First_Name'] . ' ' . $row['Surname'] . "</span>";
    echo '<img src="' . $row["picture_1"] . '" alt="' . $row['First_Name'] . ' ' . $row['Surname'] . ', text ' . $row['Date'] . ' ">';
    echo '<span class="from">seen in ' . ucwords($row["Location_County__Seen"]) . '</span><a href="/' . strtolower($row["Surname"]) . '/' . $row["ID"] . '">View Profile</a></div>';

    $c++;
} 
```

# iphone - 连接到 viewController 时 UITextField 没有键盘

> ID：13220791
> 
> 赞同：0
> 
> 时间：2012-11-04T17:05:01.617
> 
> 标签：iphone, objective-c, ios5

我有一个检查密码的视图控制器......这在程序启动时使用......以及更改旧密码时......

当应用程序启动时，我使用它来显示视图：

```
 NSUserDefaults *def = [NSUserDefaults standardUserDefaults];
BOOL needsPassCheck = [def boolForKey:kHasPassword];
if (needsPassCheck) {
    UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle: nil];

    VerifyPasswordViewController *passC = (VerifyPasswordViewController *)[mainStoryboard instantiateViewControllerWithIdentifier:@"passCheck"];
    passC.loginCheck = YES;
    self.window.rootViewController = passC;
} 
```

这很好用......在另一种情况下，我使用

```
[self performSegueWithIdentifier:@"segueID"]; 
```

这是问题所在...在第一种情况下，键盘按计划显示...但在第二种情况下，它根本不显示...即使点击文本字段也不...

```
 -(void)viewDidAppear:(BOOL)animated
{

    [self.passwordTextField performSelector:@selector(becomeFirstResponder) withObject:nil afterDelay:0.1f];

    [super viewDidAppear:animated];

} 
```

我毫不拖延地尝试了...没有变化...可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T18:28:20.923

您的 viewDidAppear 是否在第二种情况下被调用？如果是这样，我想它确实出现了，并被其他东西压制了？您的视图是否还实现了 UITextFieldDelegate 协议？

# javascript - DropDownList OnSelectedIndexChange 不触发

> ID：13220793
> 
> 赞同：0
> 
> 时间：2012-11-04T17:05:07.293
> 
> 标签：javascript, asp.net-ajax, webforms, autopostback

我有两个下拉列表，两个都带有 AutoPostBack="true"。第一个下拉列表有一个客户列表，第二个有一个员工列表。

截图：

![我的程序](../Images/35f7d704d1c3fd34cfd2df6693ba8a7d.png)

当我在第一个下拉列表（在 fildset 1“Dados”上）选择一个项目时，fildset 2“Cliente”必须填充空白（如姓名、邮政编码、地址、电话号码等）。

但什么也没发生！有 OnSelectedIndexChange 事件和 AutoPostBack="true" 但没有任何效果。但是当我更改第二个下拉列表“Tecnico”时，第一个下拉列表着火了！

这是我的代码：

```
<asp:UpdatePanel ID="upGeral" runat="server">
        <ContentTemplate>
            <div >
                <h1>Relatório de Atendimento</h1>
                <br />
                <div>
                    <fieldset style="width: 90%">
                        <legend>Dados</legend>
                        <table>
                            <tr>
                                <td>
                                    <asp:Label Text="Cliente" runat="server" ID="lblCliente"></asp:Label>&nbsp;
                                </td>
                                <td colspan="3">
                                    <asp:DropDownList ID="ddlClientes" runat="server" OnSelectedIndexChanged="ddlClientes_SelectedIndexChanged" AutoPostBack="true">
                                    </asp:DropDownList>
                                    <asp:Label ID="lblIdCliente" runat="server" Height="23px"></asp:Label>
                                </td>
                                <td>
                                    <asp:UpdateProgress ID="UpdateProgress1" runat="server">
                                        <ProgressTemplate>
                                            <img src="../Imagens/Icones/ajax-loader.gif" alt="Loading..." />
                                        </ProgressTemplate>
                                    </asp:UpdateProgress>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <asp:Label runat="server" Text="Responsável" ID="lblResponsavel"></asp:Label>
                                </td>
                                <td>
                                    <asp:TextBox runat="server" ID="txtResponsavel"></asp:TextBox>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <asp:Label runat="server" Text="Data Chegada" ID="lblDataChegada"></asp:Label>
                                </td>
                                <td>
                                    <asp:TextBox runat="server" ID="txtDataChegada" onkeyup="formataData(event);" MaxLength="10"></asp:TextBox>
                                </td>
                                <td class="style3">
                                    <asp:Label runat="server" Text="Hora Chegada" onkeyup="formataHora(event);" MaxLength="5"
                                        ID="lblHoraChegada"></asp:Label>
                                </td>
                                <td class="style4">
                                    <asp:TextBox runat="server" ID="txtHoraChegada" onkeyup="formataHora(event);" MaxLength="5"
                                        Style="margin-left: 0px"></asp:TextBox>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <asp:Label runat="server" Text="Data Saída" ID="lblDataSaida"></asp:Label>
                                </td>
                                <td>
                                    <asp:TextBox runat="server" ID="txtDataSaida" onkeyup="formataData(event);" MaxLength="10"></asp:TextBox>
                                </td>
                                <td class="style3">
                                    <asp:Label runat="server" Text="Hora Saída" ID="lblHoraSaida"></asp:Label>
                                </td>
                                <td class="style4">
                                    <asp:TextBox runat="server" ID="txtHoraSaida" onkeyup="formataHora(event);" MaxLength="5"></asp:TextBox>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <asp:Label ID="lblKM" runat="server" Text="KM"></asp:Label>
                                </td>
                                <td>
                                    <asp:TextBox ID="txtKM" runat="server" onkeyup="formataInteiro(event);"></asp:TextBox>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <asp:Label ID="lblTecnico" runat="server" Text="Técnico"></asp:Label>
                                </td>
                                <td>
                                    <asp:DropDownList ID="ddlTecnico" runat="server" AutoPostBack="true">
                                    </asp:DropDownList>
                                </td>
                            </tr>
                        </table>
                    </fieldset>
</ContentTemplate>
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="ddlClientes" />
        </Triggers>
    </asp:UpdatePanel> 
```

我不知道我能做些什么来修复它......有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:17:36.920

您可以尝试将“UpdateMode”updatePanel 属性设置为“Conditional”。

# javascript - 更改 CSS 文件中某些项目的 JS 函数

> ID：13220794
> 
> 赞同：1
> 
> 时间：2012-11-04T17:05:10.120
> 
> 标签：javascript, css

我正在尝试根据`mouseOver`状态（真/假）更改 HTML 元素的一些 CSS 参数

前任：

当`mouseOver=true`文本颜色应更改为蓝色时

当`mouseOver=false`文本颜色应该使用 CSS 文件中的值时

这里的问题是，我如何告诉函数查看 CSS 文件中的原始值，而不是通过函数手动传递原始值？

下面是我的代码。n=鼠标状态。我正在根据 n 值更改可见性值。

在 IF 语句中，如何告诉函数使用 CSS 文件中已有的原始值？

```
function showitem(n) {
    if (n==true) {
        document.getElementById('colorstest').style.visibility = 'visible';
    }
    if (n==false) {
        document.getElementById('colorstest').style.visibility = 'hidden';
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T17:09:31.667

将其设置为空字符串将强制它使用 CSS 中定义的值。原因是空字符串是无效值，浏览器将求助于使用定义的下一个可用有效值，即来自您的 CSS。

IE`document.getElementById('colorstest').style.visibility = '';`

此外，您不需要 2 个`if`语句，`else`就可以了。

```
if (n==true) {
    document.getElementById('colorstest').style.visibility = '';
}
else {
    document.getElementById('colorstest').style.visibility = 'hidden';
} 
```

# php - 你如何结合 2 个 php 迭代？

> ID：13220795
> 
> 赞同：-1
> 
> 时间：2012-11-04T17:05:17.857
> 
> 标签：php, iteration

有人可以帮我结合这两个迭代，让两个数组项都显示在我的网页上吗？我要做的是在我的网页中显示 videoURL 和相应的 GroupName。

**第一的：**

```
try
{
 $sql = 'SELECT URL from videoclip';
 $result = $pdo->query($sql);

}
catch (PDOException $e)

{
 $error ='Error fetching videos:'.$e->getMessage();
 include'error.html.php';
 exit();
}

while ($row = $result->fetch())
{
  $URLS[] = $row['URL'];
}

include 'index.html.php'; 
```

**第二：**

```
try
{
  $sql = 'SELECT GroupName from videoclip';
  $result = $pdo->query($sql);
}
catch(PDOException $e)
{
 $error ='unable to fecth data:'.$e->getMessage();
 include'error.html.php';
 exit();
}

while ($row = $result->fetch())
{
  $GroupNames[] = $row['GroupName'];
}
include 'index.html.php'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T17:09:59.683

只需组合您的查询，然后构建一个多维数组传递给`index.html.php`

```
try
{
  $sql = "SELECT URL, GroupName FROM videoclip";
  $result = $pdo->query($sql);
}
catch(PDOException $e)
{
  $error = 'unable to fetch data: '.$e->getMessage();
  include'error.html.php';
  exit();
}
$URLS = array();
while ($row = $result->fetch())
{
  $URLS[] = array('URL' => $row['URL'], 'GroupName' => $row['GroupName'] );
}

include 'index.html.php'; 
```

# java - Java 类设计 - if 条件太多

> ID：13220798
> 
> 赞同：4
> 
> 时间：2012-11-04T17:05:51.357
> 
> 标签：java

我的代码片段如下：

```
public void execute(Parameters params) {
    Long requestType = params.getRequestType();
    // Based on the requestType the name of the project would be different
    getName(requestType); 
    // Same as above
    getDescription(requestType) 
    // Project here is a collection of different requests
    Long projectId = createProject(name, description) 
    RequestContents requestContents = params.getRequestContents();
    for(RequestContent requestcontent : requestcontents) {
        Long requestId = createRequest(name, description, projectId);
        updateRequest(requestId, requestContent1);
    }
    // Based on the  requestType, mail content would differ 
    String mailContent = getMailContent(requestType, projectId) 
    sendMail(mailContent); 
} 
```

函数`sendMail`, `createProject`,的输出`createRequest`取决于`requestType`，因此这些函数最终会具有多个`if-else`条件。为此类建模以避免这种情况的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T17:12:20.880

一种方法是创建一个`AbstractRequest`具有抽象方法`sendMail`等的抽象类`createProject`，然后有几个具体的子类`RequestType1` `RequestType2`等，每个子类等都有不同的实现`sendMail` 等。我猜他们称之为策略模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T17:12:47.057

使用[双重调度](http://en.wikipedia.org/wiki/Double_dispatch)：

```
public class Sender {

    public void sendMail(RequestType1 requestType, String mailContent) {
        // some impl
    }
    public void sendMail(RequestType2 requestType, String mailContent) {
        // some impl
    }
    public void sendMail(RequestType3 requestType, String mailContent) {
        // some impl
    }
} 
```

然后

```
sender.sendMail(requestType, mailContent); 
```

实际调用的方法是在运行时根据`requestType`对象的类型确定的。看不到“如果”。

您可以简单地在本地实现这些方法，但这会令人困惑且难以阅读。最好将这个问题分成一个单独的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T17:14:06.560

如果 requestType 是一组有限的 String 值，您可以为其创建一个匹配的 Enum。

```
enum RequestType{
    type1,type2,...;
} 
```

然后，您可以将 if-else 转换为更紧凑的 switch-case：

```
switch (RequestType.valueOf(requestType)){
    case type1:
        ....
    break;
    case type2:
        ...
    break;
    ...
    default:
} 
```

从代码来看，requestType是一个long，可以直接开启：

```
switch (requestType){
    case type1:
        ....
    break;
    case type2:
        ...
    break;
    ...
    default:
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T17:14:35.753

为什么不将 if-else 条件放在 execute() 方法本身并基于该条件调用其他方法并传递相关参数。这样，您将创建 sendmail、createproject、createrequest 的通用函数。

# android - Box2d 和 Andengine 的物理教程

> ID：13220800
> 
> 赞同：2
> 
> 时间：2012-11-04T17:06:02.000
> 
> 标签：android, box2d, andengine, gravity

大家好，我正在尝试开发像 Jetpack 这样的游戏，所以我想设置一个通常向下推的重力，当用户点击屏幕时，重力会改变它向上推。我搜索了一周的教程来解释如何做到这一点，但我没有找到我搜索的内容。有人可以向我解释如何做到这一点或发布教程链接吗？

谢谢 ！！

```
 main = new Sprite(sX, sY, mainTextureRegion);
    main.setScale(1);
    main.setFlippedHorizontal(true);
    scene.attachChild(main);
    mPhysicsWorld = new PhysicsWorld(new Vector2(0, SensorManager.GRAVITY_EARTH), false);
    final FixtureDef objectFixtureDef = PhysicsFactory.createFixtureDef(1, 0.5f, 0.5f);
    final Body body = PhysicsFactory.createBoxBody(mPhysicsWorld, main, BodyType.DynamicBody, objectFixtureDef);
    mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(main, body, true, true));
    final Vector2 gravity = new Vector2(0, 5f);
    mPhysicsWorld.setGravity(gravity);

    scene.registerUpdateHandler(new IUpdateHandler() {
        @Override
        public void onUpdate(float pSecondsElapsed) {

      }

        @Override
        public void reset() {
            // TODO Auto-generated method stub

        }}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T17:17:37.783

当用户触摸屏幕时，你不应该改变重力，因为它不应该那样做。当他触摸屏幕时，只需应用LinearImpulse（检查它是否尚未达到最大速度）或类似的东西，使其上升。重力不应该改变，因为它应该总是吸引你所有的物理对象。如果你改变重力，你就会改变所有物体的行为，而不仅仅是玩家一个。

**编辑**

要让物理引擎工作，您必须在每次渲染时调用 PhysicsWorld 类的 step() 方法。Andengine 的问题在于您根本不直接访问 render() 方法，因为 Andengine 根本处理它。因此，您需要在 onLoadEngine() 方法中返回的 Engine 对象上注册一个 IUpdateHandler。这样，接口的 onUpdate() 方法将在每次渲染时被调用，在这里您可以调用 step() 方法来让物理部分工作。浮点值告诉您自上次渲染以来经过了多少秒，但您不必关心它。该方法每秒被调用多次。

希望能帮助到你。

**编辑 2**

我认为这应该有效：

```
//on the Scene object or on the Engine one
scene.registerUpdateHandler(new IUpdateHandler() {
    @Override
    public void onUpdate(float pSecondsElapsed) {
        mPhysicsWorld.onUpdate(pSecondsElapsed);
    }

    @Override
    public void reset() {}
}); 
```

# html - 100% 宽度的 HTML 输入右填充

> ID：13220801
> 
> 赞同：4
> 
> 时间：2012-11-04T17:06:01.897
> 
> 标签：html, css, margin, padding, styling

这是我一直遇到的问题。

以下 HTML：

```
<form id="sy_login">
    <ul class="form_column">
        <li>    
            <input id="sy_login_username" name="sy_login_username" placeholder="Username"></input>
        </li>
        <li>
            <input id="sy_login_passowrd" name="sy_login_password" placeholder="Password"></input>
        </li>
    </ul>
</form> 
```

后跟以下 CSS：

```
@CHARSET "ISO-8859-1";

body {
    background: #DDDDDD;
    padding:0px;
    margin:0px;
}

input[placeholder], [placeholder], *[placeholder] {
    font-style:italic;
}

.form_column {
    list-style-type: none;
    padding: 0px;
    margin: 10px 10px 10px 10px;
    width:100%;
}

.form_column input, .form_column textarea, .form_column select {
    width: 100%;
} 
```

产生以下结果：

![在此处输入图像描述](../Images/300ed81d234b11556b96d82090b28334.png)

这是对其中一个输入字段的萤火虫检查。

![在此处输入图像描述](../Images/f14de6a39b2f2d53f4f86d4c59aab935.png)

据我所知，由于边距而`ul`从父级中剪裁出来。`form`

![在此处输入图像描述](../Images/f952655b4d43d8883ca7d7e32270f6ac.png)

我需要`ul`包含一个边距，同时宽度为 100%，并且宽度`inputs`也为 100%。

更新：

我尝试用填充替换边距，因为这会产生相同的预期效果，但看起来完全一样。我真的想避免不得不在输入本身上使用静态宽度的情况。

另一个可能对回答有用的注意事项是，这只需要在 HTML5 中工作，跨标准解决方案会很好，但在技术上没有必要。

去除宽度后：100%

![在此处输入图像描述](../Images/3a9068529ce8b9d3fd0c677778ca3953.png)

现在看起来好多了。但是我已经强调了输入的问题，输入需要对文本进行填充，但是对于`ul`父表单来说，它的宽度必须是动态的，而它本身必须对窗口具有动态宽度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T17:32:19.143

从 UL 中删除边距。给 FORM 填充。（这为 ul 提供了自动边距）。

还请记住，当您将任何元素的宽度设置为 100% 时，它将占据其父元素的全部宽度，现在向该元素添加一些边距或填充超过了父元素的全部宽度，并且可能会破坏 UI。

即边距（=10px）+宽度（=100%）>父元素的宽度。

访问此链接以了解 CSS 盒模型。

[http://www.addedbytes.com/articles/for-beginners/the-box-model-for-beginners/](http://www.addedbytes.com/articles/for-beginners/the-box-model-for-beginners/)

谢谢你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T17:46:19.863

再来看一个完整版：红色边框属于表单，蓝色边框属于UL。如果需要，请将其删除。

```
body {
    background: #DDDDDD;
    padding:0px;
    margin:0px;
}

input[placeholder], [placeholder], *[placeholder] {
    font-style:italic;
}
#sy_login{
    border:solid 1px red;
}
.form_column {   
    border:solid 1px blue;
    margin: 0px;
    padding:5px;

}
.form_column ul,li{
    list-style-type: none;
    margin:0px;
    padding:0px;
    width:auto;
}
.form_column input, .form_column textarea, .form_column select {
    width:100%;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T17:16:36.623

尝试`width:100%`评论`form_column`

```
.form_column {
    list-style-type: none;
    padding: 0px;
    margin: 10px 10px 10px 10px;
    'width:100%;
} 
```

参考**[现场演示](http://jsfiddle.net/SivaCharan/RtHDf/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T17:36:24.220

```
.form_column {
    list-style-type: none;
    padding: 0px;
    margin:10px;    
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-04T17:36:52.130

尝试这样的事情：

```
.form_column {
    list-style-type: none;
    padding: 10px;
    margin: 0;
    width:100%;
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
} 
```

# ruby-on-rails - Rails：堆栈级别太深错误

> ID：13220807
> 
> 赞同：5
> 
> 时间：2012-11-04T17:06:54.690
> 
> 标签：ruby-on-rails, ruby, searchlogic

我的 Rails 应用程序有 3 个模型。足迹、区域和特征。我可以在我的 lib/tasks 目录中很好地与这些模型进行交互。我使用海葵来抓取和填充数据库。我对模型进行的调用示例：

```
Trail.find_or_initialize_by_title(detail_title) 
```

我现在正在尝试编写一个使用该模型的控制器。

```
class TrailController < ApplicationController
    def index
        render :json => Trail.all
    end
end 
```

现在，如果我打开 rails 控制台并尝试`app.get('trail/index')`获得 500 返回码，我会在我的`development.log`

> SystemStackError（堆栈级别太深）：
> app/controllers/trail_controller.rb:23:in `index'

所以我显然导致了一些无限递归。第 23 行对应于 index 方法的主体。我在我的应用程序中尝试了其他模型：Feature 和 Region，结果是一样的。有人可以告诉我我在这里做错了什么，或者我如何获得更多跟踪以找出究竟是什么无限递归？

我的模型非常简单：

```
class Feature < ActiveRecord::Base 
  attr_accessible :name 
  has_and_belongs_to_many :trails 
  validates :name, :presence => true
end 

class Region < ActiveRecord::Base 
  attr_accessible :hash_key, :name 
  has_many :trails 
  validates :hash_key, :name, :presence => true 
end 

class Trail < ActiveRecord::Base 
  # attr_accessible :title, :body 
  has_and_belongs_to_many :features 
  validates :title, :presence => true    
end 
```

看来这在某种程度上是由 searchlogic gem 引起的。我的 Gemfile 中有这个：

```
gem 'rd_searchlogic', :require => 'searchlogic', :git => 'git://github.com/railsdog/searchlogic.|~ 
```

当我注释掉该行时，运行 bundle install 并重试 app.get 一切正常。所以 searchlogic 以某种方式干扰了 Trail.all。为什么 Trail.all 不能在安装了 searchlogic 的情况下工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T06:09:33.773

rd_searchlogic gem 是问题的根源。[http://kiranb.scripts.mit.edu/blog/?p=247](http://kiranb.scripts.mit.edu/blog/?p=247)谈到了这个问题。“Searchlogic 创建的任何命名范围都是动态的，并且是通过 method_missing 创建的。而且由于 Rails 3.1 围绕 activerecord 进行了如此多的更改，Searchlogic 会在 activerecord 上调用缺失的方法，然后将其重新路由到 searchlogic。”

我决定切换到 meta_where，只是得知 Rails 3.1 以后不再支持它。我正在运行 Rails 3.2.8。Squeel 是替代品，在 Rails 3.2.8 上运行良好：[https ://github.com/ernie/squeel](https://github.com/ernie/squeel)

# android - 文本视图中的 Html，具有不同字体的粗体和斜体

> ID：13220811
> 
> 赞同：8
> 
> 时间：2012-11-04T17:07:27.227
> 
> 标签：android

我正在尝试在`TextView`. `TextView`文本设置为`textView1.setText(Html.fromHtml(htmlText));`

html 包含粗体和斜体跨度

现在。我购买了自定义字体。该字体带有 3 个不同的文件 (ttf)。一个用于常规，一个粗体和斜体。

如何将这三个字体文件应用到 textview？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:30:18.810

此链接将帮助您了解如何自定义 android 字体：http: [//mobile.tutsplus.com/tutorials/android/customize-android-fonts/](http://mobile.tutsplus.com/tutorials/android/customize-android-fonts/)

其中涉及如何将这些字体文件应用于文本视图，您需要先将它们集成到您的项目中：

```
Typeface tf = Typeface.createFromAsset(this.getAssets(),
        "fonts/xxx.TTF");
txt1.setTypeface(tf); 
```

ttf文件应该放在--> assets/fonts/xxx.TTF

所有需要的细节都在段落中：“使用自定义字体”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-28T19:22:30.603

对于 API 16+，现在最好的方法是定义一个字体资源文件，如果你使用 v26 以上的支持库或新的 AndroidX 库，基本上你在字体文件夹中添加你的普通和斜体 ttf 字体文件并创建一个字体资源 xml基本上让它看起来像

```
<?xml version="1.0" encoding="utf-8"?>
<font-family xmlns:app="http://schemas.android.com/apk/res-auto">
<font
    app:fontStyle="normal"
    app:fontWeight="400"
    app:font="@font/custom_regular_font" />
<font
    app:fontStyle="italic"
    app:fontWeight="400"
    app:font="@font/custom_italic_font" />
<font
    app:fontStyle="normal"
    app:fontWeight="700"
    app:font="@font/custom_bold_font" />
</font-family> 
```

最后一个是粗体字体，假设 custom_font_family.xml 将这个 xml 应用到你的 textview 为 android:fontFamily="@font/custom_font_family"，现在你使用 fromHtml 设置的任何 html 文本以及三种跨度类型中的任何一种都将使用正确的字体，在需要时，这甚至可以让您拥有一个自定义字体系列，混合完全不同的字体，而不必完全来自同一个系列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T13:02:04.397

我想您想对代码进行快速重构以合并资产。

我会扩展 TextView 并尝试解析 HTML 并在 onDraw 应用正确的字体。

覆盖`setText`并解析为字符和应使用的正确字体创建映射的参数。

然后，覆盖`onDraw`并在绘制之前，`super.getPaint()`根据您在上一步中创建的地图更改字体。

代码应该看起来像[如何在 TextView 的扩展类中正确绘制文本的](https://stackoverflow.com/questions/4342927/how-to-correctly-draw-text-in-an-extended-class-for-textview)`onDraw`方法中呈现的代码？，但是您将设置先前确定的字体而不是应用.`super.getTypeface()`

希望对你有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T13:03:56.253

您是否尝试将所有字体一一应用到相同的 textView 文本。我认为您可以将更多效果应用于相同的 TextView。

米洛斯的代码是正确的。另外，我已经提出了自己的解释。您可以将字体添加到资产文件夹a 中，然后您可以将该字体一一应用到 textView。

不确定，但可能对您有用。

我的代码：

```
Typeface font1 = Typeface.createFromAsset(getAssets(), "YOUR_FONT1.ttf");
Typeface font2 = Typeface.createFromAsset(getAssets(), "YOUR_FONT2.ttf");
Typeface font3 = Typeface.createFromAsset(getAssets(), "YOUR_FONT3.ttf");

chips_text.setTypeface(font1);
chips_text.setTypeface(font2);
chips_text.setTypeface(font3); 
```

随意评论和查询。

# raphael - RaphaelJS 调色板行为

> ID：13220812
> 
> 赞同：0
> 
> 时间：2012-11-04T17:07:30.100
> 
> 标签：raphael, palette

如何在 raphaelJS 中进行调色板行为（将元素从“调色板”拖放到“画布”）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T17:07:30.100

您必须将此 startFunction 添加到每个调色板元素：

```
//DragFunctions is the object that has all the 3 d&d methods, clearer in the complete file
paletteStart: function () {
    // keep the relative coords at the start of the drag
    this.ox = 0;
    this.oy = 0;

    // as we are dragging the palette element, we clone it to leave one in his place.
    var newPaletteObj = this.clone();

    //we give the new palette element the behaviour of a palette element
    DragFunctions.addDragAndDropCapabilityToPaletteOption(newPaletteObj);

    //nice animation
    this.animate({
        "opacity": 0.5
    }, 500);
} 
```

现在我们需要在拖动元素时使用该函数：

```
move: function (dx, dy) {
    // calculate translation coords
    var new_x = dx - this.ox;
    var new_y = dy - this.oy;

    // transforming coordinates
    this.transform('...T' + new_x + ',' + new_y);

    // save the new values for future drags
    this.ox = dx;
    this.oy = dy;
} 
```

最后，在完成删除时执行的函数：

```
paletteUp: function () {
    if (!DragFunctions.isInsideCanvas(this)) {
        this.remove();
        //notify the user as you want!
    } else {
        //Giving the new D&D behaviour
        this.undrag();
        //give the element the new d&d functionality!
        this.animate({
            "opacity": 1
        }, 500);
    }
} 
```

这里有两件事要评论，当元素被删除时，你将不得不删除调色板行为并给它另一个（一个普通的 d&d 功能），如果没有，它将继续克隆周围的元素。在这里，我给你一些很好的行为来给他们：

```
start: function () {
    // keep the relative coords at the start of the drag
    this.ox = 0;
    this.oy = 0;
    // animate attributes to a "being dragged" state
    this.animate({
        "opacity": 0.5
    }, 500);
},
//same move function
up: function () {
    if (!DragFunctions.isInsideCanvas(this)) {
        this.animate({
            transform: '...T' + (-this.ox) + ',' + (-this.oy)
        }, 1000, "bounce");
    }
    this.animate({
        "opacity": 1
    }, 500);
},

//and the method that gives the behaviour
addDragAndDropCapabilityToSet: function (compSet) {
    compSet.drag(this.move, this.start, this.up, compSet, compSet, compSet);
} 
```

您可能还看到，我们有一个验证器来查看元素是否在画布内，这是一个非常有用的功能，这里：

```
isInsideCanvas: function (obj) {
    var canvasBBox = //get your 'canvas'
    var objectBBox = obj.getBBox();
    var objectPartiallyOutside = !Raphael.isPointInsideBBox(canvasBBox, objectBBox.x, objectBBox.y) || !Raphael.isPointInsideBBox(canvasBBox, objectBBox.x, objectBBox.y2) || !Raphael.isPointInsideBBox(canvasBBox, objectBBox.x2, objectBBox.y) || !Raphael.isPointInsideBBox(canvasBBox, objectBBox.x2, objectBBox.y2);
    return !(objectPartiallyOutside);
} Finally,
the place to call to give the element all this behaviour:

//this works for elements and sets
addDragAndDropCapabilityToPaletteOption: function (compSet) {
    compSet.drag(this.move, this.paletteStart, this.paletteUp, compSet, compSet, compSet);
} 
```

我创建的一个与 raphael 一起玩的网站上有一个演示，名为 comoformamos.com。漏洞代码位于 github gist 或托管在 github 上，因此，如果您想更深入地了解代码，请随意进行。

在这个博客条目中解释得更漂亮：[devhike](http://devhike.blogspot.com.ar/2012/11/palette-behaviour-with-raphaeljs.html)，我是作者。

# objective-c - 在 Objective-C 中设置/获取全局变量

> ID：13220817
> 
> 赞同：0
> 
> 时间：2012-11-04T17:08:02.920
> 
> 标签：objective-c, global-variables

我正在编写一个应用程序，它是一种字典 - 它为用户提供一个术语列表，当点击时，会弹出一个包含定义的对话框。定义本身也可能包含术语，而用户又可以单击这些术语来启动另一个定义弹出窗口。

我的主应用程序存储在“myViewController.m”中。它调用一个自定义 UIView 类“CustomUIView.m”来显示定义（这是弹出的对话框）。这一切都很好。

然后来自 CustomUIView 的文本链接应该能够启动更多定义。在我的 CustomUIView 中点击文本时，它会启动另一个 CustomUIView。问题是，这个新的 CustomUIView 无法访问包含我的所有字典术语和定义的哈希映射；这仅适用于我的主应用程序“myViewController.m”。

不知何故，我需要使我的哈希映射*dictionaryHashMap对**CustomUIView*类的每个实例可见。*dictionaryHashMap在应用程序打开时在**myViewController.m*中创建，此后不会更改。

我不希望限制可以同时打开的 CustomUIView 的数量（我有这样做的理由！），因此将*dictionaryHashMap*的副本发送到自定义UIView。想必，解决的办法就是让*dictionaryHashMap*成为一个全局变量。

**我的一些代码：**

从 myViewController.m：

```
- (void)viewDidLoad
{
    self.dictionaryHashMap = [[NSMutableDictionary alloc] init]; // initialise the dictionary hash map
    //... {Code to populate dictionaryHashMap}
}

// Method to pop up a definition dialog
- (void)displayDefinition:(NSString *) term
{
    NSArray* definition = [self.dictionaryHashMap objectForKey:term]; // get the definition that corresponds to the term
    CustomUIView* definitionPopup = [[[CustomUIView alloc] init] autorelease]; // initialise a custom popup
    [definitionPopup setTitle: term];
    [definitionPopup setMessage: definition];
    [definitionPopup show];
}

// Delegation for sending URL presses in CustomUIView to popupDefinition
#pragma mark - CustomUIViewDelegate
+ (void)termTextClickedOn:(CustomUIView *)customView didSelectTerm:(NSString *)term
{
        myViewController *t = [[myViewController alloc] init]; // TODO: This instance has no idea what the NSDictionary is
        [t displayDefinition:term];
} 
```

来自 CustomUIView.m：

```
// Intercept clicks on links in UIWebView object
- (BOOL)webView: (UIWebView*)webView shouldStartLoadWithRequest: (NSURLRequest*)request navigationType: (UIWebViewNavigationType)navigationType {
    if ( navigationType == UIWebViewNavigationTypeLinkClicked ) {
        [myViewController termTextClickedOn:self didSelectTerm:request];
        return NO;
    } 
    return YES;
} 
```

任何有关如何使*DictionaryHashMap对**CustomUIView*可见的提示将不胜感激。

我尝试通过执行以下操作使*dictionaryHashMap成为全局：*

*   将“self.dictionaryHashMap”的所有实例更改为“dictionaryHashMap”
*   添加行'extern NSMutableDictionary *dictionaryHashMap;' 到*CustomUIView.h*
*   *在myViewController.m*的实现之外添加以下内容：'NSMutableDictionary *dictionaryHashMap = nil;'

但是，dictionaryHashMap 对 CustomUIView 仍然不可见。据我所知，它实际上仍然是*myViewController*本地的一个变量......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T17:17:25.590

将引用（指针）传递给`dictionaryHashMap`. 指向对象的指针只有 4 个字节。您可以将它从您的视图控制器传递到您的视图。

但我不知道为什么你甚至需要这样做。`termTextClickedOn:didSelectTerm:`当单击一个术语时，您的视图正在向视图控制器发送一条消息 ( )。并且视图控制器已经有了对字典的引用，所以它可以处理查找。为什么视图还需要引用字典？

无论如何，如果你想让字典成为一个全局的，在你的应用程序委托中初始化它会更合适，在`application:didFinishLaunchingWithOptions:`. 你甚至可以让字典成为你的应用程序委托的一个属性并懒惰地初始化它。

### 更新

`termTextClickedOn:didSelectTerm:`直到您的评论是类方法，我才注意到。我假设它是一个实例方法，因为`myViewController`以小写字母开头，而 iOS 编程中的约定是类以大写字母开头。（当您遵循约定时，您更容易获得良好的帮助！）

这是我推荐的。首先，重命名`myViewController`为`MyViewController`（或更好的，`DefinitionViewController`）。

给它一个引用字典的属性。任何代码创建一个新的实例`MyViewController`都负责设置这个属性。

给出`CustomUIView`一个目标和一个动作的属性：

```
@property (nonatomic, weak) id target;
@property (nonatomic) SEL action; 
```

创建视图时设置这些属性：

```
- (void)displayDefinition:(NSString *)term {
    NSArray* definition = [self.dictionaryHashMap objectForKey:term];
    CustomUIView* definitionPopup = [[[CustomUIView alloc] init] autorelease]; // initialise a custom popup
    definitionPopup.target = self;
    definitionPopup.action = @selector(termWasClicked:);
    ... 
```

在视图的`webView:shouldStartLoadWithRequest:`方法中，从 URL 请求中提取术语并将其发送到目标/操作：

```
- (BOOL)webView: (UIWebView*)webView shouldStartLoadWithRequest: (NSURLRequest*)request navigationType: (UIWebViewNavigationType)navigationType {
    if ( navigationType == UIWebViewNavigationTypeLinkClicked ) {
        NSString *term = termForURLRequest(request);
        [self.target performSelector:self.action withObject:term];
        return NO;
    } 
    return YES;
} 
```

在视图控制器的`termWasClicked:`方法中，创建新的视图控制器并设置它的字典属性：

```
- (void)termWasClicked:(NSString *)term {
    MyViewController *t = [[MyViewController alloc] init];
    t.dictionary = self.dictionary;
    [t displayDefinition:term];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T17:16:59.770

创建一个将用作单例的类。[例子](http://getsetgames.com/2009/08/30/the-objective-c-singleton/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T17:22:59.383

您应该始终按照 mvc 模式的建议将数据保存在单独的类中，这可以通过对所有字典术语使用单例类并在需要时从每个自定义视图中访问它们来实现。

# c++ - 如果 int *a = *b，a 会指向 b 引用的对象吗？

> ID：13220824
> 
> 赞同：-1
> 
> 时间：2012-11-04T17:08:39.857
> 
> 标签：c++, c

或者地址 a 是否等于 b 引用的整数？

还是会发生其他事情？

编辑：另外，如果 double *a = 3.0，是否指向 3.0？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T17:17:08.860

如果代码是，`int *a = *b;`那么`*b`是一个指向整数的指针（必须匹配 的类型`a`）。这意味着这`b`是一个指向整数的指针。`a`然后将包含指向的地址，`*b`而不是指向的地址`b`。

但是，如果代码是`int *a; *a = *b;`，那就不同了。在这种情况下，您正在将指向的对象复制到`b`指向的地址中`a`。该对象必须是整数，因此`a`将指向整数的副本（因此您可以更改`*b`并且`*a`不会更改）。顺便说一句，如果`a`未初始化，那将是未定义的行为（很可能是崩溃）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T17:17:15.327

您问题的第一部分没有任何意义，因为您没有提供有关`b`.

至于第二部分（关于`double *a = 3.0`）... C 和 C++ 语言都禁止使用非指针值初始化指针（空指针常量除外）。这立即意味着`double *a = 3.0`不是有效的 C 或 C++ 代码。它根本不会编译。再举一个例子，这同样适用于`int *a = 5`代码。

在 C 和 C++ 中，为了将非指针值转换为指针类型，您需要显式转换。这种转换的结果是实现定义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T17:12:50.347

`*a = *b`这意味着将带有地址的内存内容复制到带有地址`b`的内存中`a`

if (*a==*b) 这意味着：检查带有地址的内存`a`内容是否等于带有地址的内存内容`b`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T17:13:01.687

> 如果 int *a = *b，a 会指向 b 引用的对象吗？

这取决于是什么`b`。

> 编辑：另外，如果 double *a = 3.0，是否指向 3.0？

不，这是一个无效的声明。`a`您应使用地址进行初始化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-04T17:13:44.487

它必须给你警告......`int`在`int *`没有演员表的情况下转换它还取决于到底是什么`p`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-04T17:17:06.660

尝试以下操作：

```
#include <stdio.h>

int main(void)
{
    int val = 5;
    int *b = &val;
    int *a = *b;

    printf("&val = %p; b = %p, a = %p\n", &val, b, a);

    return 0;
} 
```

输出：

```
&val = 0xbfb652d4; b = 0xbfb652d4, a = 0x5 
```

（地址值可能会改变）

`a`实际上，将是一个具有指向的值的指针`b`。除非`b`本身是一个指向指针的指针，`a`否则可能会指向一个无效的位置。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-04T17:42:38.403

指针是任何变量的引用，并在其中存储其他变量的位置...您的示例应如下所示：

双a=3.0；诠释 b*=a;

所以指针 (B) 将引用值为 3.0 的变量 (A)

# c# - 为什么这不编译？

> ID：13220827
> 
> 赞同：2
> 
> 时间：2012-11-04T17:08:57.903
> 
> 标签：c#, generics, inheritance, polymorphism

来自 Java 或 Python，我习惯于制作这样的结构，通常它“正常工作”。最近发现了 C#，除了一些挫折之外，发现它使用起来非常愉快。

一种这样的挫败感是我必须通过多态构造（覆盖、虚拟等）来控制它。

这是一个这样的案例，我还没有找到如何“让工作”。

```
class Polymorphism
{
    public interface IPerson
    {
        String Name { get; set; }
    }

    public class Doctor : IPerson
    {
        public String Name { get; set; }
    }

    public class DoctorGroup
    {
        public IEnumerable<IPerson> Members
        {
            get
            {
                return DoctorMembers;
            }
        }

        public List<Doctor> DoctorMembers { get; set; }
        public DoctorGroup()
        {
            DoctorMembers = new List<Doctor>();
        }
    }
} 
```

这里`DoctorMembers`是s，因此当被要求提供of`IPerson`时，我应该能够只返回一份医生名单。 `IEnumerable``IPerson`

```
public IEnumerable<IPerson> Members
{
    get
    {
        return DoctorMembers;
    }
} 
```

然而......编译器抱怨......为什么？我错过了什么？这在语义上没有任何问题，到目前为止我使用过的大多数 OOP 语言都可以在没有句法 Pepto-Bismol 的情况下消化这一点。我是否缺少一个关键字以使其对编译器显而易见？

这里明显的捷径是将所有医生转换为 LINQ，`IPerson`但我不明白为什么这是必要的，甚至是可取的。

谁能点亮我的灯笼？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-04T17:13:51.437

此代码使用面向 .NET 4 的 C# 4 进行编译，但*不会*在 C# 3 中编译，因为 C# 3 没有[*泛型变量*](http://msdn.microsoft.com/en-us/library/dd233059.aspx)。

基本上你想要一个从`IEnumerable<Doctor>`to的隐式转换`IEnumerable<IPerson>`。这是安全的，因为您只能从`IEnumerable<T>`...中“取出”值，这就是为什么在 .NET 4 中，它被声明为`IEnumerable<out T>`.

阅读更多关于通用方差的详细信息，并记住这仅在 C# 4 及更高版本中可用。

(If you *have* to use C# 3 or .NET 3.5, you can use the solution shown by CSharpie... but ideally, upgrade to a more recent version :)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-04T17:13:22.040

试试这个：

```
public IEnumerable<IPerson> Members
{
    get
    {
        return DoctorMembers.Cast<IPerson>();
    }
} 
```

# c# - 带有搜索功能的 AutoCompleteBox 或 ComboBox？（Windows 应用商店应用）

> ID：13220828
> 
> 赞同：0
> 
> 时间：2012-11-04T17:09:02.377
> 
> 标签：c#, xaml, windows-8, microsoft-metro

我正在编写一个 Windows 应用商店应用程序，该应用程序将使用户能够从给定集合中选择职位和地区来搜索工作。显而易见的选择是有一个`Combobox`用于位置的组合框和另一个用于区域的组合框，但标准组合框是一个非常糟糕的组件。它以一种奇怪的方式扩展，但我想这可以通过样式来改变。问题是当组合框中有很多项目（在我的情况下是区域，位置）时，用户体验非常糟糕，需要通过输入进行搜索。

是否有一个`AutoCompleteBox`组件（我没有找到任何组件）或一种简单的方法来`ComboBox`在键入时搜索其项目？我想我不是唯一需要这种功能的人。

**编辑** 我尝试了`Combobox`'s`KeyUp`和`KeyDown`方法来捕捉按下的键并将 设置为`SelectedItem`我想要的项目并将 设置为 null，这会将项目带入视图并且不会使其被选中。问题是，在我设置了`SelectedItem`第一个键后，没有`KeyUp`再次`KeyDown`调用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:20:39.723

我已经编写了自己的 AutoCompleteBox，可在[https://github.com/igorkulman/AutoCompleteBox获得](https://github.com/igorkulman/AutoCompleteBox)

# c++ - C++ 在结构中存储函数和运算符

> ID：13220829
> 
> 赞同：0
> 
> 时间：2012-11-04T17:09:03.663
> 
> 标签：c++, function, model, structure

如何改进在算术解析器中存储函数的数据结构，从中缀转换为后缀表示法？

此时我正在使用一个 char 数组：

```
char *funct[] = { "sin", "cos", "tan"... }
char text[] = "tan"; 
```

如果我们测试 char 是一个函数，这个实现有点混乱并导致以下比较

```
if ( strcmp ( funct[0], text) == 0 ) || ( strcmp ( funct[1], "text ) == 0 ) || ( strcmp ( func[2], text) == 0 ))
{
  ... do something
} 
```

（或for循环版本）。

如果有很多函数（和很多比较），索引引用会导致错误并且不清楚。当我们删除/添加新功能时，也有必要更改索引....

如何改进这样的结构，使其易于阅读、易于维护和易于扩展？

我在想枚举

```
typedef enum
{
  Fsin=0,
  Fcos,
  Ftan
} TFunctions; 
```

结果是

```
if ( strcmp ( funct[Fsin], text) == 0 ) || ( strcmp ( funct[Fcos], "text ) == 0 ) || ( strcmp ( func[Ftan], text) == 0 ))
{
... 
```

但可能有更好的解决方案...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T17:19:26.067

您可以使用 std::map。

```
enum functions
{
    sin,
    cos,
    tan
};

std::map<std::string, unsigned char> func_map;
func_map["sin"] = sin;
func_map["cos"] = cos;
func_map["tan"] = tan;

// then:
std::string text = "cos";

std::map<char*, unsigned char>::iterator it;
it = func_map.find(text);

if(it != func_map.end())
{
    // ELEMENT FOUND
    unsigned char func_id = it->second;
}
else
{
    // NOT FOUND
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T17:39:15.957

对于最快的代码，您可能有某种映射如下：

```
typedef std::map<std::string, func_t> func_map;
func_map fm;
fm["sin"] = sin_func(); // get value of this entry from somewhere
fm["cos"] = cos_func(); // for example sin_func or cos_func

auto i = fm.find( "sin" );
if( i != fm.end() ) {
    func_t f = i->second; // value found, we may use it.
} 
```

此外，如果确实有很多物品，您可以使用`std::unordered_map`而不是`std::map`

# jquery - jQuery Slider 和 IE9 - 追加和可能的问题

> ID：13220831
> 
> 赞同：0
> 
> 时间：2012-11-04T17:09:04.660
> 
> 标签：jquery, wordpress, internet-explorer, slider

我在使用 IE 和我的 jQuery 时遇到了麻烦。

我在这个 WordPress 安装中使用了一个滑块插件，并且我正在加载以下代码来创建 2 个自定义上一个/下一个按钮：

```
jQuery(document).ready(function($) {

    var sliderInstance = $("#touchcarousel-1, #touchcarousel-2, #touchcarousel-3, #touchcarousel-4, #touchcarousel-5, #touchcarousel-6").data("touchCarousel");

    $("body").append('<a href="#" class="arrowleft"><img src="/wp-content/themes/revisor/images/left.png" /></a><a href="#" class="arrowright"><img src="/wp-content/themes/revisor/images/right.png" /></a>');

    var arrleft = $(".arrowleft")

        arrright = $(".arrowright");

    var wrapoffset = $("#wrap").offset();

    console.log(wrapoffset.left);

    arrleft.css("left" , wrapoffset.left-100);

    arrright.css("right" , wrapoffset.left-100);

    arrleft.click(function(e)

    {
        e.preventDefault();
        sliderInstance.prev();

    });

    arrright.click(function(e)

    {
        e.preventDefault();
        sliderInstance.next();

    });

    $(window).resize(function() {

        var wrapoffset = $("#wrap").offset();

        arrleft.css("left" , wrapoffset.left-100);

        arrright.css("right" , wrapoffset.left-100);

    });

}); 
```

在 FF 和 Chrome 中，这可以正常工作，但在 IE 中却不行（在 IE9 中测试）。

我很难过，因为按钮上的命令都不起作用——CSS 和事件都不起作用。

请参阅此处的页面：[http ://revisor-faellesskabet.dk/skat/](http://revisor-faellesskabet.dk/skat/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T17:25:10.907

删除`console.log`-- 它将在 IE 中中断，因为控制台仅在开发人员工具打开时可用

# actionscript-3 - ActionScript 3 中的圆形滑块

> ID：13220832
> 
> 赞同：4
> 
> 时间：2012-11-04T17:09:21.423
> 
> 标签：actionscript-3, flash, slider, geometry

我希望在 ActionScript 中加入一个圆形滑块，与[**此页面**](http://interface.eyecon.ro/demos/drag_vr.html)显示的内容非常相似：

![在此处输入图像描述](../Images/41bd2acd25bc231d56a5854c1a8525bd.png)

它最终会改变对象的色调（返回 CMY 值），但是如果它只是吐出我完全可以使用的程度。如果您知道任何具有此功能的资源、教程、伪代码或片段，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T21:19:17.570

以下是我对这个问题的解决方案。

值得注意的是，Flash 中的角度是以[弧度](http://en.wikipedia.org/wiki/Radian)而不是度数处理的，这就是为什么您会注意到代码中的转换方法的原因。就个人而言，我发现以度为单位设置角度更容易可视化和理解，这就是为什么*CircleSlider*构造函数接受以度为单位的值以及为什么*CircleSliderEvent*类同时调度度和弧度的原因。

**用例：**

```
var circleSlider:CircleSlider = new CircleSlider(100, 270);
circleSlider.x = stage.stageWidth / 2;
circleSlider.y = stage.stageHeight / 2;
circleSlider.addEventListener(CircleSliderEvent.CHANGE, circleSliderEventHandler);

addChild(circleSlider);

function circleSliderEventHandler(event:CircleSliderEvent):void
{
    trace(event.degrees, event.radians);
} 
```

**圆形滑块类：**

```
package
{
    //Imports
    import flash.display.Sprite;
    import flash.display.Shape;
    import flash.events.Event;
    import flash.events.MouseEvent;

    //Class
    public class CircleSlider extends Sprite
    {
        //Properties
        private var mRadius:uint;
        private var mAngle:Number;
        private var mThumb:Sprite;

        //Constructor
        public function CircleSlider(radius:uint, degrees:Number)
        {
            mRadius = radius;
            mAngle = degrees;

            init();
        }

        //Init
        private function init():void
        {
            createCircle();
            createThumb();
            positionThumb(degreesToRadians(mAngle));
        }

        //Create Circle
        private function createCircle():void
        {
            var circle:Shape = new Shape();
            circle.graphics.lineStyle(4.0, 0xFFDDDD, 1.0);
            circle.graphics.drawCircle(0, 0, mRadius);

            addChild(circle);
        }

        //Create Thumb
        private function createThumb():void
        {
            mThumb = new Sprite();
            mThumb.graphics.beginFill(0xFF2222, 1.0);
            mThumb.graphics.drawCircle(0, 0, 10);
            mThumb.graphics.endFill();

            mThumb.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownEventHandler);

            addChild(mThumb);
        }

        //Mouse Down Event Handler
        private function mouseDownEventHandler(event:MouseEvent):void
        {
            mThumb.addEventListener(Event.ENTER_FRAME, enterFrameEventHandler);

            stage.addEventListener(MouseEvent.MOUSE_UP, mouseUpEventHandler);
            stage.addEventListener(Event.MOUSE_LEAVE, mouseUpEventHandler);
        }

        //Enter Frame Event Handler
        private function enterFrameEventHandler(event:Event):void
        {
            positionThumb(Math.atan2(mouseY, mouseX));
        }

        //Mouse Up Event Handler
        private function mouseUpEventHandler(event:MouseEvent):void
        {
            mThumb.removeEventListener(Event.ENTER_FRAME, enterFrameEventHandler);

            stage.removeEventListener(MouseEvent.MOUSE_UP, mouseUpEventHandler);
            stage.removeEventListener(Event.MOUSE_LEAVE, mouseUpEventHandler);
        }

        //Position Thumb
        private function positionThumb(radians:Number):void
        {
            mThumb.x = Math.cos(radians) * mRadius;
            mThumb.y = Math.sin(radians) * mRadius;

            mAngle = radiansToDegrees(radians);

            dispatchEvent(new CircleSliderEvent(CircleSliderEvent.CHANGE, mAngle, radians));
        }

        //Degrees To Radians
        private function degreesToRadians(degrees:Number):Number
        {
            return degrees * Math.PI / 180;
        }

        //Radians To Degrees
        private function radiansToDegrees(radians:Number):Number
        {
            return radians * 180 / Math.PI;
        }

        //Set Angle
        public function set angle(degrees:Number):void
        {
            positionThumb(degreesToRadians(degrees));
        }

        //Get Angle
        public function get angle():Number
        {
            return mAngle;
        }
    }
} 
```

**CircleSliderEvent 类：**

```
package
{
    //Imports
    import flash.events.Event;

    //Class
    public class CircleSliderEvent extends Event
    {
        //Constants
        public static const CHANGE:String = "change";

        //Properties
        public var degrees:Number;
        public var radians:Number;

        //Constructor
        public function CircleSliderEvent (type:String, degrees:Number = NaN, radians:Number = NaN) 
        {
            super(type);

            this.degrees = degrees;
            this.radians = radians;
        }

        //Clone
        public override function clone():Event
        {
            return new CircleSliderEvent (type, degrees, radians);
        }

        //To String
        public override function toString():String
        {
            return formatToString("CircleSliderEvent", "type", "degrees", "radians");
        }
    }
} 
```

# css - 引导词缀问题

> ID：13220834
> 
> 赞同：1
> 
> 时间：2012-11-04T17:09:34.880
> 
> 标签：css, html, twitter-bootstrap

将导航贴在页面侧面时，内容在初始滚动后移动到导航下方，而不是保持在旁边，有什么想法可以解决这个问题吗？

使用：

```
data-spy="affix" 
```

[http://jsfiddle.net/cooltrooper/eJFaY/3/](http://jsfiddle.net/cooltrooper/eJFaY/3/)

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T18:07:12.037

我认为您通常必须将其指定给没有`span*`该类的元素。如果将其添加到以下内容，效果会更好`ul`：

```
<ul class="well nav nav-list" data-spy="affix" data-offset-top="100"> 
```

或者

```
<ul class="well nav nav-list affix"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-14T19:01:13.610

我通过添加在应用类后应用于元素的 CSS 克服了这个问题`"affix"`。

```
#your_element_id .affix {
top: (enter the pixel number where you want your element to stick);
} 
```

另一种选择是跳过`data-spy'affix'`. 附加`"affix"`类内联。

希望这能提供一些见解。

# c# - 在 Visual Studio 2012 中将整个文件夹添加到打包 Winrt

> ID：13220837
> 
> 赞同：0
> 
> 时间：2012-11-04T17:09:50.073
> 
> 标签：c#, .net, visual-studio, windows-8, windows-runtime

我有一个文件夹`Assets/source`。它有很多文件（.png，.xml ...），里面也有子文件夹。是否可以将它们全部复制到输出目录而无需手动设置它们？或在运行时将此文件夹复制到 `/LocalState`？ ![在此处输入图像描述](../Images/c3028cb8304a81f2f308be1bfa569f11.png)

我已经尝试将它添加到路径中，安装后我似乎无法在安装文件夹中找到它。感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T17:38:52.053

1.  将它们复制并粘贴到`Assets/...`
    （默认情况下，构建操作是内容，复制到输出是不复制。保持默认）

2.  在运行期间：
    `StorageFolder sourceFolder = await Windows.ApplicationModel.Package.Current.InstalledLocation.GetFolderAsync("Assests/...");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:20:50.177

在 Visual Studio 中，选择要复制到输出目录的所有文件，然后在“属性”窗口中，将“复制到输出目录”中的设置更改为“始终复制”。我不认为你可以对整个文件夹这样做。

# jquery - 如何使用 jQuery 将图像、标题和描述加载到 HTML 中的 DIVS

> ID：13220842
> 
> 赞同：1
> 
> 时间：2012-11-04T17:10:16.377
> 
> 标签：jquery, html, parsing, function, dynamic

我正在编写的功能是在最终用户单击缩略图时向下滑动面板。这个想法是面板将显示图像、标题和描述的更大版本。

这是我的 jQuery：

```
$(document).ready(function() {
var $feature = $('#feature')
.wrap('<div id="feature-outer"></div>');
$('.thumb').click(function() {
$feature.blindToggle('slow');
$feature.style.zIndex="-1"; 
$('#featuretitle').source=this.title;
$('#featureinfo').source=this.info;
$('#featureimage').source=this.image;  

});    
}); 
```

这是我的拇指 HTML：

```
<div class=thumb title="title here" info="description here" image="sunset.jpg"></div> 
```

这里是要加载信息的地方：

```
<div class=feature id="feature">
     <div class=featureimage id="featureimage"></div>
     <div class=featureinfo>
          <div class=featureinfotitle id="featuretitle">Title</div>
          <p id="featureinfo">info</p>
     </div> 
```

当我单击拇指时，面板向下滑动，但框中的信息保持默认。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T17:14:01.093

我想你想做更多这样的事情。`source`注意：在 Jquery 对象上没有 的属性。

```
$(function() {
  var $feature = $('#feature').wrap('<div id="feature-outer"></div>');
  $('.thumb').click(function() {
    $feature.blindToggle('slow');
    $feature.style.zIndex="-1"; 
    $('#featuretitle').html($(this).attr('title'));
    $('#featureinfo').html($(this).attr('info'));
    $('#featureimage').attr('src', $(this).attr('image'));  
  });    
}); 
```

# android - 卸载应用程序和 Google Play 时的包名称是什么

> ID：13220844
> 
> 赞同：0
> 
> 时间：2012-11-04T17:10:26.343
> 
> 标签：android, root

当第一个弹出窗口“您真的要卸载...”出现时，包名称/广播启动（如果有的话）是什么，它是`com.android.setting`什么？Google Play/Old Market 版本是否有不同的包名？

# android - 从android中的外部文件获取Web服务uri

> ID：13220848
> 
> 赞同：2
> 
> 时间：2012-11-04T17:10:34.197
> 
> 标签：android, xml, eclipse, rest

我正在开发一个调用 rest web 服务并将结果解析为 Json 对象的 android 应用程序，我想将 web 服务 URI 存储在一个单独的文件中，所以我在 strings.xml 文件中添加了基本 uri，如下所示：

```
<string name="BaseRestURL">http://192.168.1.2:8080/SensorRestService/webresources/</string> 
```

并使用 tha java 代码中的 url，我使用了这个：

```
 String read = parse.readFeed(R.string.BaseRestURL+"com.rest.entities.user"); 
```

这段代码的问题是“R.string.BaseRestURL”显示一个int代码而不是真正的字符串值，所以我无法使用这段代码访问资源，所以任何人都可以帮助我！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T17:12:41.877

尝试这个：

```
String read = parse.readFeed(getString(R.string.BaseRestURL)+"com.rest.entities.user"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T17:13:29.703

在您的活动电话中：

getString(R.string.BaseRestURL)

# javascript - 如何在 Aptana Studio 3 中快速移动到代码块的末尾

> ID：13220849
> 
> 赞同：5
> 
> 时间：2012-11-04T17:10:41.523
> 
> 标签：javascript, html, ide, keyboard-shortcuts, aptana

是否有按键组合可以快速将光标移动到代码块的末尾或结束标记（在 HTML 文档中）？例如，您已经完成了某些功能/类/标签的编辑或填充，而您只想快速导航而不使用箭头键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-02T17:52:34.867

要从左/右括号或括号导航到其伙伴，请选择左/右括号或括号并按 Ctrl+Shift+P。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T23:55:27.343

Aptana 是基于 Eclipse 构建的。他们经常共享相同的快捷方式。您似乎正在寻找的是 Home 和 End 键（如果您在 Windows 上）。

刚刚在箭头键上检查了 Mac 的 (Apple) Command + Left 或 Right。

更多信息在这里： [http ://www.shortcutworld.com/en/win/Eclipse.html](http://www.shortcutworld.com/en/win/Eclipse.html)

# java - 使用Jsoup获取表单中的所有名称-值对

> ID：13220854
> 
> 赞同：1
> 
> 时间：2012-11-04T17:11:04.907
> 
> 标签：java, web-scraping, jsoup

我想使用 Jsoup 和 HttpClient 自动发布许多 HTML 表单。这些表单中的大多数都具有隐藏字段（带有会话 ID 等）或具有我宁愿不理会的默认值。

单独编码每个表单提交——从页面中提取每个所述的隐藏值或默认值——非常乏味，所以我考虑编写一个通用方法来获取给定表单的 HTTP 参数列表。

不过，这不是一段微不足道的代码，因为输入标签和字段类型的多样性，每一个都可能需要特定的处理（例如文本区域、复选框、单选按钮、选择......）所以我想我会首先搜索/询问它是否已经存在。

注意： Jsoup 和 HttpClient 是给定的；我无法改变——所以请不要提供建议其他解决方案的答案：我有一个 Jsoup Document 对象，我需要构建一个 HttpClient HttpRequest。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T19:27:27.320

所以我最终写了它。我仍然更愿意换成经过现场测试的东西（并希望在其他地方维护），但以防它帮助任何人登陆这里......

未经彻底测试且不支持 multipar/form-data，但在我尝试过的几个示例中有效：

```
 public void submit(String formSelector, List<String> params) {
    if (params.size() % 2 != 0) {
      throw new Exception("There must be an even number of params.");
    }

    Element form= $(formSelector).first();

    Set<String> newParams= Sets.newHashSet();
    for (int i=0; i < params.size(); i+= 2) {
      newParams.add(params.get(i));
    }

    List<String> allParams= Lists.newArrayList(params);
    for (Element field: form.select("input, select, textarea")) {
      String name= field.attr("name");
      if (name == null || newParams.contains(name)) continue;
      String type= field.attr("type").toLowerCase();
      if ("checkbox".equals(type) || "radio".equals(type)) {
        if (field.attr("checked") != null) {
          allParams.add(field.attr("name"));
          allParams.add(field.attr("value"));
        }
      }
      else if (! fieldTypesToIgnore.contains(type)) {
        allParams.add(field.attr("name"));
        allParams.add(field.val());
      }
    }

    String action= form.attr("abs:action");
    String method= form.attr("method").toLowerCase();
    // String encType= form.attr("enctype"); -- TODO

    if ("post".equals(method)) {
      post(action, allParams);
    }
    else {
      get(action, allParams);
    }
  } 
```

（$、get 和 post 是我已经使用过的方法......你可以很容易地猜到它们在做什么）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-08T10:48:21.440

Jsoup has a `formData` method in the `FormElement` class; it works in simple cases, but it doesn't always do what I need, so I ended up writing some custom code too.

# c# - 如何在richtextbox中使用多色

> ID：13220856
> 
> 赞同：15
> 
> 时间：2012-11-04T17:11:26.810
> 
> 标签：c#, .net, richtextbox

我使用 C# windows 窗体，我有richtextbox，我想将一些文本涂成红色，一些用绿色和一些黑色。

怎么做？附图片。

![在此处输入图像描述](../Images/0fa5d3b762c19a6e3eec4811fcb1fc71.png)

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-04T17:21:09.887

`System.Windows.Forms.RichTextBox`有一个`Color`name 类型的属性，`SelectionColor`它获取或设置当前选择或插入点的文本颜色。您可以使用此属性`RichTextBox`用您指定的颜色标记您的特定字段。

**例子**

```
RichTextBox _RichTextBox = new RichTextBox(); //Initialize a new RichTextBox of name _RichTextBox
_RichTextBox.Select(0, 8); //Select text within 0 and 8
_RichTextBox.SelectionColor = Color.Red; //Set the selected text color to Red
_RichTextBox.Select(8, 16); //Select text within 8 and 16
_RichTextBox.SelectionColor = Color.Green; //Set the selected text color to Green
_RichTextBox.Select(0,0); //Select text within 0 and 0 
```

**请注意**：如果您想突出显示in 中的文本`RichTextBox.Find(string str)`，则可以通过使用 which 来避免计算`Object Browser``Lines``RichTextBox`

^(**例子**)

```
RichTextBox _RichTextBox = new RichTextBox(); //Initialize a new RichTextBox of name _RichTextBox
_RichTextBox.Find("Account 12345, deposit 100$, balance 200$"); //Find the text provided
_RichTextBox.SelectionColor = Color.Green; //Set the selected text color to Green 
```

谢谢，
我希望你觉得这有帮助:)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-20T19:10:09.920

我找到了这个扩展方法，它使您能够更改字符串的颜色以及插入换行符值：

```
 public static void AppendText(this RichTextBox box, string text, Color color, bool AddNewLine = false)
    {
        if (AddNewLine)
        {
            text += Environment.NewLine;
        }

        box.SelectionStart = box.TextLength;
        box.SelectionLength = 0;

        box.SelectionColor = color;
        box.AppendText(text);
        box.SelectionColor = box.ForeColor;
    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-11-26T12:42:10.840

您可以使用 Run 对象在运行时更改颜色

```
private Run GetForegroundColor(string strInformation, Brush color)
        {
            Run noramlRun = new Run(strInformation);
            noramlRun.Foreground = color;
            return noramlRun;
        } 
```

对于更复杂的场景，例如根据要求更改颜色，然后访问打击链接

[https://sites.google.com/site/greateindiaclub/mobil-apps/windows8/customwpfrichtextboxwithcolorchangeandhighlightfunctionality](https://sites.google.com/site/greateindiaclub/mobil-apps/windows8/customwpfrichtextboxwithcolorchangeandhighlightfunctionality)

# c++ - 复制构造函数奇怪的编译错误

> ID：13220857
> 
> 赞同：1
> 
> 时间：2012-11-04T17:12:06.650
> 
> 标签：c++

我有这个代码：

```
namespace js0n
{

struct json
{
  typedef int json_object;

  json(){}

  json(json_object const& other)
  {
  }

  json& operator=(json_object const& other)
  {
    return *this;
  }
};

typedef json::json_object json_object;

} 
```

该行`js0n::json json(js0n::json_object());`给出了编译错误。

```
int main()
{
  js0n::json json(js0n::json_object());

  return 0;
} 
```

请注意，我已经删除了大部分代码，因为它不对错误负责。我究竟做错了什么？

错误信息：

```
test.cpp: In function 'int main()':
test.cpp:9:8: error: request for member 'parse' in 'json', which is of non-class type     'js0n::json(js0n::json_object (*)()) {aka js0n::json(int (*)())}' 
```

赋值运算符 ie ( `json = json_object();`) 工作得很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T17:14:07.400

你还没有说编译错误是什么，但看起来你已经绊倒了[最令人头疼的 parse](http://arstechnica.com/civis/viewtopic.php?f=20&t=767929)：

```
js0n::json json(js0n::json_object()); 
```

这声明了一个函数。要声明一个局部变量，你需要更多的括号：

```
js0n::json json((js0n::json_object()));
                ^                   ^ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-04T17:17:02.670

> `js0n::json json(js0n::json_object());`

欢迎来到[最令人头疼的解析](https://stackoverflow.com/q/180172/500104)。这声明了一个返回`js0n::json`并接受`js0n::json_object`参数的函数。要消除歧义，请按照该问题的答案中的建议添加更多括号，或者（因为您最初标记了 this `[c++11]`），使用列表初始化：

```
js0n::json json{js0n::json_object()}; 
```

或者

```
js0n::json json(js0n::json_object{}); 
```

或者

```
js0n::json json{js0n::json_object{}}; 
```

:)

# python - 如何读写二进制文件？

> ID：13220858
> 
> 赞同：2
> 
> 时间：2012-11-04T17:12:17.170
> 
> 标签：python, numpy, binary, binaryfiles

在接下来的几天里，我无法使用 PC，但我无法忘记这个问题。我只是在玩压缩算法，为音频创建了我自己的一个，我被困在输出到文件的步骤中。所以这是我的问题，希望我能在回来之前找到答案，否则这会让我心烦意乱。

1）如果我有一个带有一些整数的 numpy X 数组（比如 int16），如果我打开一个文件对象并执行 file.write(X) 文件输出会是什么样子？数字？还是数字的ASCII？还是二进制？

2）根据上述答案，我如何将此文件读入numpy数组X？

基本上我的压缩做了一些小波和fft变换，在这里和那里做一些过滤并返回一个带有一些数字的数组，我知道这个数组的格式并且我已经在这里实现了很高的压缩百分比，下一步是首先转储这个数组转换成二进制文件。一旦我实现了这一点，我的下一个目标就是实现文件/向量的某种熵编码。

任何输入表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T17:25:26.860

1）写作：

```
In [1]: f = open('ints','wb')
In [2]: x = numpy.int16(array([1,2,3]))
Out[2]: array([1, 2, 3], dtype=int16)
In [3]: f.write(x)
In [4]: f.close() 
```

2）阅读：

```
In [5]: f = open('ints','wb')
In [6]: x = f.read()
In [7]: x
Out[7]: '\x01\x00\x02\x00\x03\x00'
In [8]: numpy.fromstring(x, dtype=np.uint16, count=3)
Out[8]: array([1, 2, 3], dtype=uint16) 
```

**更新：**

正如 JFSebastian 建议的那样，有更好的方法来做到这一点，比如使用：

*   [numpy.save](http://docs.scipy.org/doc/numpy/reference/generated/numpy.save.html)
*   [numpy.load](http://docs.scipy.org/doc/numpy/reference/generated/numpy.load.html)

或如 Janne Karila 建议的那样使用：

*   [numpy.ndarray.tofile](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.tofile.html)
*   [numpy.fromfile](http://docs.scipy.org/doc/numpy/reference/generated/numpy.fromfile.html)

# java - 如何在一条线上找到均匀分布的点？

> ID：13220862
> 
> 赞同：1
> 
> 时间：2012-11-04T17:12:40.097
> 
> 标签：java, line, point

这是为了找到位于特定线上的均匀分布的点（从起始位置，线上的 2 个点，以及与水平线的角度），然后经过第二个点，绘制一些东西，使其以固定的速率移动给定的方向。

我正在考虑计算一个斜率，这将使我垂直移动到水平移动。但是，我什至不知道如何确保它们在两条不同的生产线上具有相同的速度。例如，如果有两对不同的点，绘图在两者上移动相同的距离需要相同的时间。

我描述的是正确的想法吗？OpenGL中有什么方法可以帮助我吗？

![在此处输入图像描述](../Images/436390aa6d92d9d3584257d8a234ffa9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T17:21:08.910

你应该使用向量。从一个点开始，沿着向量的方向行进。例如：

```
typedef struct vec2 {
    float x;
    float y;
} vec2; 
```

这定义了一个基本的 2D 矢量类型。（这将在 3D 中工作，只需添加 az coord。）

要在给定方向上移动固定距离，只需取一些起点并添加按标量缩放的方向矢量。像这样：

```
typedef struct point2D {
    float x;
    float y;
} point2D; //Notice any similarities here?

point2D somePoint = { someX, someY };
vec2 someDirection = { someDirectionX, someDirectionY };
float someScale = 5.0;
point2D newPoint;

newPoint.x = somePoint.x + someScale * someDirection.x;
newPoint.y = somePoint.y + someScale * someDirection.y; 
```

将`newPoint`是 5 个单位的方向`someDirection`。请注意，您可能希望`someDirection`在以这种方式使用它之前进行标准化，因此它的长度为 1.0：

```
void normalize (vec2* vec)
{
    float mag = sqrt(vec->x * vec->x + vec->y * vec->y);
    // TODO: Deal with mag being 0
    vec->x /= mag;
    vec->y /= mag;
} 
```

# oracle - 如何获取字符串的最后一个字母？

> ID：13220874
> 
> 赞同：9
> 
> 时间：2012-11-04T17:13:56.120
> 
> 标签：oracle

如何获取字符串的最后一个字母并检查它是元音还是辅音？我正在使用oracle 10g。

这是我已经想出的：

```
SELECT last_name,
       Substr(last_name, -1, 1) "Last letter",
       Substr(last_name, 1, 1)  "First letter",
       CASE
         WHEN Substr(last_name, -1, 1) IN ( 'a', 'e', 'i', 'o', 'u' ) THEN
         'ends with a vowel'
         WHEN Substr(last_name, -1, 1) IN ( 'b', 'c', 'd', 'f',
                                            'g', 'h', 'j', 'k',
                                            'l', 'm', 'n', 'p',
                                            'q', 'r', 's', 't',
                                            'v', 'w', 'x', 'y', 'z' ) THEN
         'ends with a consonant'
       END                      "Last Letter Description",
       CASE
         WHEN Substr(last_name, 1, 1) IN ( 'a', 'e', 'i', 'o', 'u' ) THEN
         'starts with a consonant'
         WHEN Substr(last_name, 1, 1) IN ( 'b', 'c', 'd', 'f',
                                           'g', 'h', 'j', 'k',
                                           'l', 'm', 'n', 'p',
                                           'q', 'r', 's', 't',
                                           'v', 'w', 'x', 'y', 'z' ) THEN
         'starts with a consonant'
       END                      "First Letter Description"
FROM   employees
GROUP  BY first_name,
          last_name 
```

现在，当您在 oracle 10g 上执行此操作时，“首字母描述”为空！我的代码有什么问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-04T22:23:00.477

试试这个，不完整，但通过简单的调整，你可以让它按照你想要的方式工作：

```
 FUNCTION last_is_vowel (string_in VARCHAR2)
     RETURN BOOLEAN
 IS
 BEGIN
     RETURN CASE WHEN LOWER(SUBSTR(string_in, -1)) IN ('a', 'e', 'i', 'o', 'u')
                THEN TRUE
                ELSE FALSE
            END;
 END last_is_vowel; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-15T14:19:23.263

看看你的数据。可能是employees.last_name 中的第一个字符大写。请记住，Oracle 区分大小写。您可以使用 UPPER() 或 LOWER() 来帮助找到您的匹配项。

此外，按照 João 的建议，仅搜索元音并使用 else 语句查找排除项会更有效。

```
SELECT last_name,
       Substr(last_name, -1, 1) "Last character",
       Substr(last_name, 1, 1)  "First character",
       CASE
         WHEN lower(Substr(last_name, -1, 1)) IN ( 'a', 'e', 'i', 'o', 'u' ) THEN
         'ends with a vowel'
         ELSE
         'does not end with a vowel'
       END                      "Last Letter Description",
       CASE
         WHEN lower(Substr(last_name, 1, 1)) IN ( 'a', 'e', 'i', 'o', 'u' ) THEN
         'starts with a vowel'
         ELSE 
         'does not start with a vowel'
       END                      "First Letter Description"
FROM   employees
GROUP  BY first_name,
          last_name 
```

# android - android 编辑 sharedpreferences 现有变量名为 zipcode

> ID：13220882
> 
> 赞同：0
> 
> 时间：2012-11-04T17:14:27.630
> 
> 标签：android

我有我的代码：

```
final EditText input2 = new EditText(mActivity);

            AlertDialog.Builder builder = new AlertDialog.Builder(mActivity);
                    builder.setTitle("User Info Request:");
                    builder.setMessage("Enter Zip Code:");

                    final EditText input2 = new EditText(mActivity);

                   builder.setView(input2);

                   SharedPreferences.Editor editor = prefs.edit();
                   editor.putString("zipcode","input2");
                   editor.commit();

} 
```

如何获取用户输入的字符串/文本并将我的共享首选项值 'zipcode' 替换为值 Input2 ？我现在尝试的方式将“zipcode”共享首选项设置为“input2”，但我需要用户输入的结果来更改共享首选项中的现有值... =/

我在这方面做了几次尝试，但没有运气，帮助会很大。

机器人

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T17:38:23.143

采用

```
editor.putString("zipcode", input2.getText().toString()); 
```

您收到错误是因为，正如它所说，您不能将编辑文本放入 putString 方法；它必须是字符串类型。

另外，我看不到您的按钮在哪里。

试试这个：

```
buider.setPositiveButton("OK", new DialogInterface.OnClickListener(){
    public void onClick(DialogInterface dialog, int id){
        SharedPreferences.Editor editor = prefs.edit();
        editor.putString("zipcode", input2.getText().toString());
        editor.commit();
        dialog.cancel();
    }
}); 
```

这样，当用户完成输入并点击确定按钮时，它将获取用户输入的文本

# list - Prolog 中的进程列表

> ID：13220883
> 
> 赞同：0
> 
> 时间：2012-11-04T17:14:34.473
> 
> 标签：list, prolog, wumpus-world

我在 Prolog 中使用列表时遇到问题。我正在实现一个 Wumpus World 示例，并且需要在每次用户移动期间移动 wumpus。wumpus 的移动是在列表中预定义的，我不知道如何弹出列表的头部来设置 wumpus 的位置。Wumpus 列表将是：[left,right,up,down,...,right]。这是我到目前为止所拥有的，这显然是错误的。

我的代码并不需要确切的代码，只需要一个列表示例以及如何从列表中设置方向/值以及如何删除列表中弹出的头部将是理想的。

```
wumpusPath([left,up,down,right,left,down]).

moveWumpus :-
    wumpusDirection(wumpusPath),
    wumpusLocation(X,Y),
    newLocation(X,Y,wumpusDirection,X1,Y1),
    worldSize(CheckX,CheckY),
    X1 =< CheckX,
    X1 > 0,
    Y1 =< CheckY,
    Y1 > 0,
    !,
    retract(wumpusLocation(X,Y)),
    assert(wumpusLocation(X1,Y1)). 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T18:02:42.400

请记住，可以通过头尾访问列表：如果 L = [a, b,c] 并且 L = [H | T] 则 H 与 a 统一，T 与 [b, c] 统一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T09:32:07.363

```
wumpusPath([left,up,down,right,left,down]).

wumpusDirection([D|P],D,P).                   % see below ****

moveWumpus :-
    wumpusPath(Path),                         % retrieve the Path
    wumpusDirection(Path,Direction,NewPath),  % set Direction from it ****
    wumpusLocation(X,Y),
    newLocation(X,Y,Direction,X1,Y1),
    worldSize(CheckX,CheckY),
    X1 =< CheckX,
    X1 > 0,
    Y1 =< CheckY,
    Y1 > 0,
    !,
    retractall(wumpusLocation(X,Y)),          % remember NewPath somehow too
    asserta(wumpusLocation(X1,Y1)). 
```

但是，与其断言事实，不如让你的`move`谓词与参数一起工作：有些会*"in"*，有些会*"out"*：

```
moveWumpus(Path,X,Y, NewPath,X1,Y1) :-

    wumpusDirection(Path,Direction,NewPath), 

    newLocation(X,Y,Direction,X1,Y1),
    worldSize(CheckX,CheckY),
    X1 =< CheckX,
    X1 > 0,
    Y1 =< CheckY,
    Y1 > 0,
    !
    . 
```

# iphone - 模态对话框在 iOS 6 上不占用全屏

> ID：13220885
> 
> 赞同：0
> 
> 时间：2012-11-04T17:14:37.460
> 
> 标签：iphone, ios, ios6, ios-simulator

这是一个非常愚蠢的问题，但对于我的生活，我无法弄清楚这一点。正如您在屏幕截图中看到的那样，我的模态窗口在带有retina4 显示器的iOS6 模拟器上没有占据整个窗口高度。

[http://www.usareststops.com/images/ios6_screenshot.png](http://www.usareststops.com/images/ios6_screenshot.png)

我的部署目标是 iOS 5。我的控制器有一个“帮助”按钮，该按钮的操作设置为情节提要上的另一个控制器。它的 segue 具有“Modal”样式和“Cover Vertical”过渡。动画效果很好，但如您在照片中看到的那样过早停止。

除了这个对话框，iOS6 模拟器一切正常。该对话框在其他模拟器以及我的 iPhone4 上运行良好。任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T17:43:21.550

好吧，我知道这很愚蠢。我的工具栏和滚动视图的自动调整属性错误。工具栏设置了左侧、右侧和底部支柱。我将它更改为左、上和右，这将工具栏撞到了窗口的顶部。然后我必须将滚动视图设置为从上到下拉伸。现在一切正常。

# java - 查找两个候选字符串列表之间的交集

> ID：13220887
> 
> 赞同：1
> 
> 时间：2012-11-04T17:14:56.800
> 
> 标签：java

我编写了以下`Java`代码，以找到a in的 the`prefix`和 the之间的交集。`suffix``String``Java`

```
// you can also use imports, for example:
// import java.math.*;
import java.util.*;
class Solution {
    public int max_prefix_suffix(String S) {
        if (S.length() == 0) {
            return 1;
        }
        // prefix candidates
        Vector<String> prefix = new Vector<String>();
        // suffix candidates
        Vector<String> suffix = new Vector<String>();
        // will tell me the difference
        Set<String> set = new HashSet<String>();

        int size = S.length();
        for (int i = 0; i < size; i++) {
            String candidate = getPrefix(S, i);
            // System.out.println( candidate );
            prefix.add(candidate);
        }

        for (int i = size; i >= 0; i--) {
            String candidate = getSuffix(S, i);
            // System.out.println( candidate );
            suffix.add(candidate);
        }

        int p = prefix.size();
        int s = suffix.size();
        for (int i = 0; i < p; i++) {
            set.add(prefix.get(i));
        }
        for (int i = 0; i < s; i++) {
            set.add(suffix.get(i));
        }

        System.out.println("set: " + set.size());
        System.out.println("P: " + p + " S: " + s);
        int max = (p + s) - set.size();
        return max;
    }

    // codility
    // y t i l i d o c
    public String getSuffix(String S, int index) {
        String suffix = "";
        int size = S.length();
        for (int i = size - 1; i >= index; i--) {
            suffix += S.charAt(i);
        }

        return suffix;
    }

    public String getPrefix(String S, int index) {
        String prefix = "";
        for (int i = 0; i <= index; i++) {
            prefix += S.charAt(i);
        }

        return prefix;
    }

    public static void main(String[] args) {
        Solution sol = new Solution();
        String t1 = "";
        String t2 = "abbabba";
        String t3 = "codility";

        System.out.println(sol.max_prefix_suffix(t1));
        System.out.println(sol.max_prefix_suffix(t2));
        System.out.println(sol.max_prefix_suffix(t3));

        System.exit(0);
    }
} 
```

一些测试用例是：

```
String t1 = "";
String t2 = "abbabba";
String t3 = "codility"; 
```

预期值为：

```
1, 4, 0 
```

我的想法是产生`prefix`候选并将它们推入向量，然后找到`suffix`候选并将它们推入 a `vector`，最后将两者推`vectors`入 a`Set`然后计算差异。但是，我得到`1, 7, and 0`. 有人可以帮我弄清楚我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T17:34:54.670

我会写你的方法如下：

```
public int max_prefix_suffix(String s) {
    final int len = s.length();
    if (len == 0) {
        return 1; // there's some dispute about this in the comments to your post
    }
    int count = 0;
    for (int i = 1; i <= len; ++i) {
        final String prefix = s.substring(0, i);
        final String suffix = s.substring(len - i, len);
        if (prefix.equals(suffix)) {
            ++count;
        }
    }
    return count;
} 
```

如果您需要将前缀与后缀的*反向*进行比较，我会这样做：

```
final String suffix = new StringBuilder(s.substring(len - i, len))
    .reverse().toString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-27T23:02:25.467

@ravi.zombie 如果您需要 O(n) 中的长度，那么您只需要更改 Ted 的代码，如下所示：

```
int max =0;
for (int i = 1; i <= len-1; ++i) {
    final String prefix = s.substring(0, i);
    final String suffix = s.substring(len - i, len);
    if (prefix.equals(suffix) && max < i) {
        max =i;
}
    return max;
} 
```

我还省略了整个字符串比较以获得正确的前缀和后缀，因此对于输入字符串 abbabba，这应该返回 4 而不是 7。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-28T11:44:38.827

我看到@ted Hop 的代码很好。问题指定返回给定字符串的后缀和前缀中匹配字符的最大数量，这是一个适当的子集。因此，这个最大数量不考虑整个字符串。

前任。“abbabba”，前缀和后缀可以有 abba（前 4 个字符）- abba（后 4 个字符），因此长度为 4 codility,, prefix(c, co,cod,codi,co...),, sufix ( y、ty、ity、lity....），它们都不相同。因此这里的长度为0。

通过从这里修改计数

```
if (prefix.equals(suffix)) {
    ++count;
} 
```

和

```
if (prefix.equals(suffix)) {
    count = prefix.length();// or suffix.length()
} 
```

我们得到最大长度。但这可以在 O(n) 中完成吗？字符串 equals 的内置函数，我相信需要 O(n)，因此整体复杂度为 O(n2).....

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-24T13:26:46.200

我会使用这个代码。

```
public static int max_prefix_suffix(String S)
{
    if (S == null)
        return -1;
    Set<String> set = new HashSet<String>();
    int len = S.length();
    StringBuilder builder = new StringBuilder();
    for (int i = 0; i < len - 1; i++)
    {
        builder.append(S.charAt(i));
        set.add(builder.toString());
    }
    int max = 0;
    for (int i = 1; i < len; i++)
    {
        String suffix = S.substring(i, len);
        if (set.contains(suffix))
        {
            int suffLen = suffix.length();
            if (suffLen > max)
                max = suffLen;
        }
    }
    return max;
} 
```

# jsf-2 - 从 ap:dataTable 更新 ap:tabView 内部的组件

> ID：13220888
> 
> 赞同：0
> 
> 时间：2012-11-04T17:15:22.750
> 
> 标签：jsf-2, xhtml, primefaces, updating

我在引用 ajax 更新中的组件时遇到问题，因此它可以得到更新。这是场景。

![系统视图](../Images/7ca8c7248aa38612c8923826f25eb67c.png)

我有一个动态创建选项卡的**p:tabView 。**在那个 tabView 我有一个**p:panel**和一个**p:dataTable** [1](https://i.stack.imgur.com/T4Brw.jpg)。在面板中，我有一个需要更新的文本字段，称为*cached-articles-text*。当我使用 firebug 检查它的 id 时，我看到它是**"tabs:0:cached-articles-text"**。

我需要在 dataTable 分页上更新它。所以在dataTable里面我有以下代码：

```
<p:ajax event="page" update="something_goes_here"/> 
```

那应该更新文本字段。

如何更新该 textField 或包含该 textField 的面板？问题是，当我更改选项卡时，id 也会更改：

**“标签：0：缓存的文章文本”**

**“标签：1：缓存的文章文本”**

**“标签：2：缓存的文章文本”**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T17:39:43.470

有趣...我已将以下内容放入更新中，并且有效。

```
<p:ajax event="page" update=":tab-form:abas:cached-articles-text"/> 
```

但现在我有另一个问题。缓存文章的正确数量仅在我发出另一个请求时显示。这是为什么？

# c# - .Net：如果我的数据仅代表一周中的某些天，我如何显示一周中的完整 7 天？

> ID：13220889
> 
> 赞同：0
> 
> 时间：2012-11-04T17:15:22.617
> 
> 标签：c#, .net, list

我正在使用一个用 C# 编写的应用程序，它处理每天都可以有一些相关信息的议程。为简单起见，让我们定义一个 Day 对象，如下所示：

```
public class Day
{
    public DateTime date { get; set; }
    public List<string> info { get; set; }
} 
```

有一个函数，给定一个开始日期，将返回一个列表，其中包含下周的所有天数，其中包含一些信息。下周中 info.Count = 0 的天数不在返回的列表中。因此，我们可以期望获得一个大小为 7 或更小的 List 对象。现在，我有以下问题：

我想显示所有 7 天，无论它们是否在获取的列表中。

我想出的简单（但效率低下）的解决方案是编写一个函数，该函数获取获得的列表，读取它并将缺失的日期（如果有的话）添加到其中。这样我们总是有一个大小为 7 的列表，并且可以愉快地用它填充一个 asp:Repeater。但我认为有更好的方法来做到这一点：

预先知道系统必须显示从给定日期开始的接下来的连续 7 天。不必有完整的列表来显示数据。我的问题是，如何做到这一点？使用中继器执行此操作是否会进入错误的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T17:30:25.650

我不明白为什么添加缺失的日子特别低效。你说的是毫秒，如果那样的话。它简化了其余的代码。否则，您将不得不手动编写中继器的大部分功能。

在我看来，您应该继续将缺失的日期添加到列表中。

# swing - Scala swing GUI - 编译器指示我的反应块中的某些情况无法访问？

> ID：13220896
> 
> 赞同：0
> 
> 时间：2012-11-04T17:16:14.113
> 
> 标签：swing, scala, user-interface

这是一个更大的代码主体的摘录，为简洁起见，删除了不相关的代码。我已经自己测试了下面的代码（作为新项目中的单个类）并验证了相同的确切问题仍然存在。所以我知道问题是特定于此处包含的代码。

```
object HumanGUI extends SimpleGUIApplication with Logs {

  PropertyConfigurator.configure("log4j.properties")

  def top = new MainFrame {
    title = "BJ GUI"

  val PlayPanel = new BoxPanel(Orientation.Vertical) {
    val hitButton = new Button("Hit")
    val stayButton = new Button("Stay")
    val doubleButton = new Button("Double")
    val quitButton = new Button("Quit")

    contents += hitButton
    contents += stayButton
    contents += doubleButton
    contents += quitButton

    listenTo(hitButton, stayButton, doubleButton, quitButton)
    reactions += {
      case ButtonClicked(hitButton) =>
        debug("Clicked Hit!")
      case ButtonClicked(stayButton) =>
        debug("Clicked Stay!")
      case ButtonClicked(doubleButton) =>
        debug("Clicked Double!")
      case ButtonClicked(quitButton) =>
        debug("Clicked Quit!")
    }

    contents = new BoxPanel(Orientation.Vertical) {
      contents += playPanel
    }
  } 
```

具体来说，编译器告诉我此块中的最后 3 种情况无法访问：

```
 listenTo(hitButton, stayButton, doubleButton, quitButton)
    reactions += {
      case ButtonClicked(hitButton) =>
        debug("Clicked Hit!")
      case ButtonClicked(stayButton) =>
        debug("Clicked Stay!")
      case ButtonClicked(doubleButton) =>
        debug("Clicked Double!")
      case ButtonClicked(quitButton) =>
        debug("Clicked Quit!")
    } 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T17:23:19.867

当模式匹配时，所有小写变量都将绑定到在这种情况下匹配的内容，如果要匹配模式匹配之外的变量，则必须使用 `（反勾号）：

```
listenTo(hitButton, stayButton, doubleButton, quitButton)
    reactions += {
      case ButtonClicked(`hitButton`) =>
        debug("Clicked Hit!")
      case ButtonClicked(`stayButton`) =>
        debug("Clicked Stay!")
      case ButtonClicked(`doubleButton`) =>
        debug("Clicked Double!")
      case ButtonClicked(`quitButton`) =>
        debug("Clicked Quit!")
    } 
```

# php - 使用 PHP 和 spry 或类似的东西从 mysql 显示两个表

> ID：13220897
> 
> 赞同：0
> 
> 时间：2012-11-04T17:16:21.127
> 
> 标签：php, html, mysql, html-table, spry

我正在尝试使用 PHP 和 spry 之类的东西在 mysql 中显示来自两个不同表的数据。最初，我想使用 spry 选项卡式面板，但我不确定这是否可能。我希望从一个表中填充选项卡名称，并从另一个表中填充该选项卡的内容。这是基本的html...

```
<div id="TabbedPanels1" class="TabbedPanels">
  <ul class="TabbedPanelsTabGroup">
    <li class="TabbedPanelsTab" tabindex="0">NAME_1 POPULATED FROM FIRST TABLE</li>
    <li class="TabbedPanelsTab" tabindex="0">NAME_2 POPULATED FROM FIRST TABLE</li>
  </ul>
  <div class="TabbedPanelsContentGroup">
    <div class="TabbedPanelsContent">
    <table border="0" cellspacing="5" cellpadding="5">
        <tr>
<!-- CONTENT POPULATED FROM SECOND TABLE!-->
          <td width="450">&nbsp;</td>
          <td width="50">&nbsp;</td>
          <td width="50">&nbsp;</td>
          <td width="50">&nbsp;</td>
          <td width="50">&nbsp;</td>
        </tr>
      </table></div>
   </div>
</div>
</div> 
```

我想我会遇到的问题是我无法将选项卡与内容连接起来。由于选项卡首先在 html 中列出......然后是内容。我不知道这是否可能或是否有更好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:30:13.550

这在一定程度上取决于您想要获得的最终结果。例如：

如果您唯一需要的是从表中获取的选项卡列表及其从另一个数据库表中完成的内容，您只需要执行 2 个查询，每个表一个，并将结果保存在变量中。然后，您可以在变量中完成 HTML 结构，最后在最后执行此变量的回显。

```
// $result1 has the info of the tab names.
// $result2 has the contents of each tab.
$final_html='<div id="TabbedPanels1" class="TabbedPanels">
             <ul class="TabbedPanelsTabGroup">';

while($row1=$result1->mysqli_fetch_array()){
     $final_html.="<li class=\"TabbedPanelsTab\" tabindex=\"0\">$row1[0]</li>";
}

$final_html.='</ul><div class="TabbedPanelsContentGroup">
              <div class="TabbedPanelsContent">
              <table border="0" cellspacing="5" cellpadding="5">
              <tr>';

while($row2=$result2->mysqli_fetch_array()){
     $final_html.="<td width=\"450\">$row2[0]</td>";
}

$final_html.='</tr></table></div></div></div></div>';

echo $final_html; 
```

如果问题是如何使选项卡工作，我建议使用[Jquery](http://jquery.com/)。

主要思想是使用基于选项卡和选项卡内容中相同变量的 id。例如，一个选项卡可以命名为“tab1”，其内容可以命名为“tab1content”。

如果您想在 Jquery 部分中获得更多详细信息，请发布您的一些代码以查看您希望这些选项卡如何工作。

# android - Android：对话框没有响应

> ID：13220898
> 
> 赞同：1
> 
> 时间：2012-11-04T17:16:24.407
> 
> 标签：android, dialog

我正在尝试在单击“删除”按钮时弹出一个对话框选项。但是，当我单击按钮时，我没有得到任何响应。没有发生错误我想知道我是否完全错过了一些东西。

```
 deleteModule = (Button)findViewById(R.id.deleteButton);
        deleteModule.setOnClickListener(this);
    }

    public void onClick (View deleteModule) 
    {
         Dialog(rowId);

    }

    public void Dialog (final String rowId) {
        // Use the Builder class for convenient dialog construction
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setMessage(R.string.confirmDelete)
               .setPositiveButton(R.string.confirmDelete, new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                     MODULEDATABASE = new database(ViewCourse.this);
                     MODULEDATABASE.deleteRow(rowId);
                     Intent intent = new Intent(ViewCourse.this, MyCourses.class);
                     startActivity(intent);

                   }
               })
               .setNegativeButton(R.string.confirmDelete, new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                      dialog.cancel();
                   }

  }).create();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T17:20:39.967

我认为您需要添加：

```
builder.show() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T17:26:31.990

您必须调用`show()`构建器上的方法才能使对话框可见。以下是有关创建和显示对话框的更多信息：http: [//developer.android.com/guide/topics/ui/dialogs.html](http://developer.android.com/guide/topics/ui/dialogs.html)

我希望这有帮助。

# php - PHP 5.4 抛出异常 - 看不到带有 ISO-8859-1 编码字符串消息的消息

> ID：13220909
> 
> 赞同：10
> 
> 时间：2012-11-04T17:17:14.873
> 
> 标签：php, apache, exception, character-encoding

我最近从 apt-get 在我的 Ubuntu 12.10 上安装了 PHP 5.4。

PHP Info 显示：PHP 版本 5.4.6-1ubuntu1

我只是安装了所有常见的包，如 mysql、pgsql、curl 等，没有进行任何其他更改，但我遇到了问题。

我喜欢在我的文件和数据库中使用 ISO-8859-1/latin1 编码，因为这是我获得最佳工作流程的地方。现在我遇到了一个问题，因为 PHP 似乎无法处理消息以这种方式编码的异常。

好吧，为了更好地澄清它，我创建了一个这样的测试文件：

```
ini_set('display_errors', 1);
error_reporting(E_ALL);

throw new Exception('é'); 
```

如果上面的代码在一个 utf-8 文件中，那就没问题了，启用 Xdegub 我得到：

```
( ! ) Fatal error: Uncaught exception 'Exception' with message 'é' in /home/henrique/public/teste.php on line 5
( ! ) Exception: é in /home/henrique/public/teste.php on line 5
Call Stack
#   Time    Memory  Function    Location
1   0.0002  124212  {main}( )   ../teste.php:0 
```

如果文件在 ISO-8859-1 中，如果启用了 Xdebug，问题只是没有显示消息：

```
( ! ) Fatal error: in /home/henrique/public/teste.php on line 5
( ! ) Exception: in /home/henrique/public/teste.php on line 5
Call Stack
#   Time    Memory  Function    Location
1   0.0002  124436  {main}( )   ../teste.php:0 
```

但是，如果没有 Xdebug，我得到的只是这个“非常清楚”的消息：

```
Fatal error: in /home/henrique/public/teste.php on line 5 
```

也许这是 Apache 中的一个问题，因为当我使用命令行尝试相同的操作时，我得到：

```
Stack trace:
#0 {main}
  thrown in /home/henrique/public/teste.php on line 5

Fatal error: Uncaught exception 'Exception' with message '�' in /home/henrique/public/teste.php on line 5

Exception: � in /home/henrique/public/teste.php on line 5

Call Stack:
    0.0002     121256   1\. {main}() /home/henrique/public/teste.php:0 
```

该消息仍然存在，但是，难以辨认，但是是否存在...

## 编辑

我也尝试过使用 Lighttpd 1.4.28，结果是一样的。

## 编辑2：

尝试使用 PHP 5.4 内置服务器并在我的终端上得到了这个：

```
[Wed Jun  5 21:32:08 2013] PHP Fatal error:  Uncaught exception 'Exception' with message '�' in /var/www/test2.php:9
Stack trace:
#0 {main}
  thrown in /var/www/test2.php on line 9
[Wed Jun  5 21:32:08 2013] 127.0.0.1:55116 [200]: /test2.php - Uncaught exception 'Exception' with message '�' in /var/www/test2.php:9
Stack trace:
#0 {main}
  thrown in /var/www/test2.php on line 9 
```

**但是在浏览器中，还是同样的问题。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-18T11:00:48.007

PHP 中的异常消息是一个*字符串*，就像你没有消息一样。

PHP 中的字符串是二进制的。这实际上意味着 PHP 根本不关心其中的编码，PHP 中的字符串只保留任何可以用八位字节二进制数据表示的编码（即 8 位形成一个字节，然后是 PHP 字符串中的一个字符如果您使用子字符串访问（例如`$string[10]`访问第 11 个*字符*）。

因为所有这些都确保了无论您如何编写消息，它都会被传递到输出中。

所以唯一的区别是你如何显示输出。假设您在该异常消息字符串中获得了 Latin-1 编码，并通过您的 apache 服务器将其输出，然后您在浏览器中查看它，您的浏览器（到目前为止我们不关心原因）将其显示为UTF-8 你会看到问号-diagmond/水晶：�。

如果终端将其显示为 UTF-8，则同样适用于终端。

或者，如果您将输出保存到文件中，然后在编辑器中将该文件打开为 UTF-8 编码。

那么如何解决呢？对于您的浏览器，请查看您的浏览器文档，如何告诉您的浏览器您当前正在查看的网站应该以哪种编码显示。我知道的每个浏览器都有某种菜单，您可以在其中指定它。您使用的字符集很常见，因此即使是较旧的浏览器也有。

同样适用于终端。您可以设置 shell 的语言环境以及终端的编码。请查阅您正在使用的 shell 的文档。

对于文本文件，我敢打赌您现在已经知道如何处理它：检查您的编辑器提供的选项。

* * *

最后要注意的一点：如果您想正确分析服务器返回到包含异常消息输出的请求的内容，则需要使用浏览器的开发人员工具使服务器的响应标头可见。您*可能会*看到对先前配置的更改（错误地）说内容是 UTF-8 编码而编码是 latin-1。如果您不想手动更改浏览器中的编码，请修复该错误。为此，请查阅 PHP 文档和您的网络服务器的文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-04T14:46:30.990

ab@php.net 给出了一个解释：

[https://bugs.php.net/bug.php?id=63426&edit=2](https://bugs.php.net/bug.php?id=63426&edit=2)

> 无法修复的原因很复杂很简单。从 5.4 开始，PHP 的内部编码是 UTF-8，之前是 latin1。其他一切几乎没有变化。
> 
> 在 HTML 上下文中显示的每条错误消息都需要转换实体。为此，使用了与 htmlspecialchars() 中相同的功能。在 PHP 5.4 之前它被迫使用 latin1，现在它被迫使用 UTF8。每个设计都有。将 header() 与 content-type 或 default_charset 一起使用仅影响 content-type 标头的发送。
> 
> 因此，您在 latin1 中使用错误文本，但 UTF-8 将用于转换实体，并且会在第一个无效字符处消失。代码中的相关地方：http: [//lxr.php.net/xref/PHP_5_4/main/main.c#1083](http://lxr.php.net/xref/PHP_5_4/main/main.c#1083)，随后确定字符集（）将为转换字符集提供 UTF8。这就是您的口音字符被吞下的原因。这就是为什么 Hui 无法重现这一点的原因 - 如果您之前查看他的帖子，确实 latin1 是以 content-type 发送的，但显然使用的是 UTF-8 编码的 PHP 脚本，因此错误消息是“致命错误：未捕获异常 'Exception' 带有消息 'Ã©' in ..."。但是，当前条件并不强制您使用 UTF-8 编写脚本，在以拉丁文编码的脚本中，您仍然可以使用 utf8_encode('é') 引发异常。它与 CLI 一起工作的原因是因为不需要对 HTML 实体进行编码，因此字符按原样传递到输出。
> 
> 这一切实际上意味着这个问题一直存在，但它有利于使用默认 iso-8859-1 的用户。现在使用默认 UTF-8 的用户可以获利。查看代码来解决这个问题可能需要比这张票要求更多的全局入侵。
> 
> 对于 htmlspecialchars() 行为更改，另请参阅错误 #61354

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-30T12:07:44.200

您是否在其他服务器上尝试过此操作？

我认为是你的配置，我在我的服务器上创建了一个测试文件，你可以在这里查看它 [http://cai.tlacaelelrl.com/tests/test.php](http://cai.tlacaelelrl.com/tests/test.php)

内容是

```
 ini_set('display_errors', 1);
    error_reporting(E_ALL);
    print 'Character encoding is: '.mb_internal_encoding();
    throw new Exception('é'); 
```

字符集应用于文件，我也将字符集添加到 htaccess 文件中。

我不确定这是否是因为 xdebug 但我无法在启用它的情况下进行测试。

你可以尝试添加这个

```
 AddCharset ISO-8859-1 .php 
```

到您的 .htaccess 文件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-24T13:35:33.603

我有同样的问题，但没有找到好的解决方案（.htaccess 中的“AddCharset ISO-8859-1 .php”不起作用）。你可以使用这个：

> 抛出新异常（htmlentities（'é'，ENT_COMPAT，'ISO-8859-1'））；

但是 Xdebug 会显示：

> à ;

总比没有好

# java - 简单的 servlet 项目（HTTP 状态 404 错误）

> ID：13220913
> 
> 赞同：4
> 
> 时间：2012-11-04T17:17:30.387
> 
> 标签：java, tomcat, servlets, webserver

我想创建一个 servlet 项目。

我的 Java 类被称为`AzpanaServlet.java`，它包含一个内部类。（当我编译它时，我有 2 个类文件）。

我的项目是一个简单的应用程序，它接收字符串输入并用它做一些事情（不相关）。

当我按下`"submit"`按钮时，我收到以下错误：

```
HTTP Status 404 - /AzpanaServlet
Type Status report
Message /AzpanaServlet
Description The requested resource (/AzpanaServlet) is not available.
Apache Tomcat/6.0.18 
```

如果可以，请帮助我，我解决不了这么多时间。这是我的 Java 代码：

```
public class AzpanaServlet extends HttpServlet {
//
//Some functions 
//
//Inner class: public class oneChar{...}
//

    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        /*
        * Get the value of form parameter
        */
        String name = request.getParameter("name");
        /*
        * Set the content type(MIME Type) of the response.
        */
        response.setContentType("text/html");
        String str = "";
        PrintWriter out = response.getWriter();
        ArrayList<Integer> list = new ArrayList<Integer>();
        try {
            list = mainmanu(name); //not relevant function.
        } catch (Exception e) {
              str  = e.toString();

            e.printStackTrace();
        }
        /*
        * Write the HTML to the response
        */
        out.println("<html>");
        out.println("<head>");
        out.println("<title> this is your answers</title>");
        out.println("</head>");
        out.println("<body>");
        if(str != ""){
            out.println(str);
        }
        else{
        for(int i = 0;i<=40;i++){
            out.println(list.get(i));
            out.println("<br>");

        }
        }
        out.println("<a href='form.html'>"+"Click here to go back to input page "+"</a>");
        out.println("</body>");
        out.println("</html>");
        out.close();

        }

        public void destroy() {

        }
    } 
```

我的`web.xml`代码：

```
<web-app version="2.4"
xmlns="http://java.sun.com/xml/ns/j2ee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee
http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

    <servlet>
        <servlet-name>AzpanaServlet</servlet-name>
        <servlet-class>com.example.AzpanaServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>AzpanaServlet</servlet-name>
        <url-pattern>/AzpanaServlet</url-pattern>
    </servlet-mapping>
    <welcome-file-list>
        <welcome-file>/form.html</welcome-file>
    </welcome-file-list>
</web-app> 
```

我的`form.html`代码：

```
<html>
    <head>
    <title>Zeev's Project</title>
    </head>
    <body>
        <h1>Just Enter String</h1>
        <form method="POST" action="AzpanaServlet">
            <label for="name">Enter String</label>
            <input type="text" id="name" name="name"/><br><br>
            <input type="submit" value="Submit Form"/>
            <input type="reset" value="Reset Form"/>
        </form>
    </body>
</html> 
```

文件夹的层次结构如下：

```
ROOT[
    WEB-INF[
        web.xml
        classes[
               com[
               example[
                    AzpanaServlet.class
                AzpanaServlet$oneChar.class
                ]
              ]
               ]
        lib[
            AzpanaServlet.java
           ]
       ]
    META-INF[
        MANIFEST.MF
        ]
    form.html
    ] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T17:45:02.290

复制了您的确切代码，然后将 Servlet 代码注释掉

```
 protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        /*
        * Get the value of form parameter
        */
        String name = request.getParameter("name");

        System.out.println("Parameter name : "+name); 
```

奇迹般有效。

在我的服务器控制台中

```
Parameter name : helloo 
```

你的配置没有问题。您可能需要**清理浏览器缓存并重**试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T17:48:56.727

问题可能是您使用 IDE 运行 Tomcat 服务器并部署到根应用程序上下文。尝试在部署中为您的应用程序使用一些应用程序上下文。例如`/myapp`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-21T16:37:56.017

看看你的 IDE 控制台或你的 tomcat 日志，你的 web 应用程序是否成功启动过？
它可能由于某种原因没有启动。

# jquery - jquery 从现有的 html 和/或 rails 部分填充灯箱

> ID：13220917
> 
> 赞同：0
> 
> 时间：2012-11-04T17:18:10.247
> 
> 标签：jquery, lightbox

我有几个形状像盒子的 div，每个盒子里都有问题。当用户在一个盒子上移动时，简短的答案会显示一个链接，该链接应该用长答案填充一个灯箱。我想获得相应的长答案以填充到灯箱中，但似乎无法弄清楚。此外，我希望允许用户在灯箱中滚动浏览所有长答案。

我目前从 Rails 部分的 ruby​​ 循环生成所有 html。我现有工作的简化示例可在[此处的 jsfiddle中找到](http://jsfiddle.net/twinturbotom/JYP6S/)

现有的html：

```
<div id="about">

    <div class="wsBox what">
        <div class="wsQ">
            <h1>What</h1>
        </div>

        <div class="wsD" style="display: block; display:none">
            <p>what we do short description.  <a href="#" class="lightBoxOpen">Continue Reading...</a><span class="wsFD">This is a lenghty description of what we do.</span></p>
        </div>
    </div>

    <div class="wsBox who">
        <div class="wsQ" style="display: block; ">
            <h1>Who</h1>
        </div>

        <div class="wsD">
            <p>who we are short description.  <a href="#" class="lightBoxOpen">Continue Reading...</a><span class="wsFD">This is a lenghty description of who we are.</span></p>
        </div>
    </div>

    <div style="clear:both; display: block; height: 30px; margin-bottom: 25px"></div>

    <div id="lightBoxOverlay" class="initHide" style="display: none; ">
    <div id="lightBox">
        <a href="#" class="lightBoxClose">Close</a>
        <div id="lightBoxContent"></div>
    </div>
</div>

</div>​​​​​ 
```

JS：

```
$(document).ready(function(){
    $('#about .wsBox').hover(
        function(){
            $(this).find('.wsQ').fadeOut();
            $(this).find('.wsD').delay(200).fadeIn();

        },
        function(){
            $(this).find('.wsD').fadeOut();
            $(this).find('.wsQ').delay(200).fadeIn();
        }

    );

    $('a.lightBoxOpen').click(function(e){
        $('#lightBoxOverlay').fadeIn();
        $(this)

    });

    $('a.lightBoxClose').click(function(e){
        $('#lightBoxOverlay').fadeOut();
    });

}); 
```

​</p>

CSS：

```
#about{

}
.wsBox{
    padding: 5px;
    position: relative;
    border: 2px solid #669900;
    width: 200px;
    height: 150px;
    border-radius: 20px;
    float:right;
    margin: 2%;
      border-radius: 5%;
      box-shadow: 0px 3px 8px #aaa, inset 0px 2px 3px #fff;
}

.wsQ{
    color: green;
    text-align: center;
    line-height: 150px;

}
.wsD{
    height:150px;
    display:none;
    position: absolute;
    top: 50%;
    margin-top:-36px;
}
.wsD .wsFD{
    display: none;
}
.who .wsD{
    margin-top:-50px;    
}

#lightBoxOverlay{
    position: fixed;
    width: 100%;
    height: 100%;
    top: 0px;
    left: 0px;
    background: rgba(0,0,0,0.6);

}
#lightBox{
    position: absolute;
    width: 60%;
    height: 60%;
    top: 20%;
    left: 20%;
    background-color: #ffffff;
    padding: 5px;
    border: 2px solid #669900;
    border-radius: 20px;
    margin: 2%;
    border-radius: 5%;
    box-shadow: 0px 3px 8px #aaa, inset 0px 2px 3px #fff;
}
#lightBox a.lightBoxClose{
    float: right;
    font-size: .75em;
    margin-right: 10px;
} 
```

**编辑** 处理这样的事情，但内容是链接而不是框！

```
$('a.lightBoxOpen').click(function(e){
    $('#lightBoxOverlay').fadeIn();
    var content = $(this).html();

        $('#lightBoxContent').html(content);

}); 
```

​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T17:37:08.833

将链接父级的 html() 与：

```
var content = $(this).parent().html(); 
```

甚至更好： var content = $(this).closest('.wsBox').html();

# xml - Silverlight 打开相对 URI - 调试时有效，在 VS 外部运行时失败

> ID：13220918
> 
> 赞同：0
> 
> 时间：2012-11-04T17:18:18.117
> 
> 标签：xml, silverlight, silverlight-3.0

我的 Silverlight 项目使用`dane.xml`文件，该文件位于`ProjectName.Web/Client.Bin/dane.xml`

```
private void ReadXML()
{
    WebClient client1 = new WebClient();
    client1.DownloadStringCompleted += new DownloadStringCompletedEventHandler(client1_DownloadStringCompleted);
    link  = new Uri("dane.xml", UriKind.Relative);
    client1.DownloadStringAsync(filePath);
}

void client1_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
{
    if (e.Error != null)
    {
        MessageBox.Show(e.Error.ToString() + "\n\nURI=" + link.ToString());
        return;
    }
    // (...)
} 
```

当我从 Visual Studio 运行它时，一切正常（调试或不调试就开始）。但现在我想在 VS 之外启动它，所以我跑了`ProjectName.Web/ProjectNameTestPage.html`- 加载`dane.xml`文件失败，MessageBox 出现以下错误：

> 加载文件 dane.xml 时出错
> 
> System.Net.WebException：在 WebClient 请求期间发生异常。
> ---> System.NotSupportedException：无法识别 URI 前缀。
> 在 System.Net.WebRequest.Create(Uri requestUri)
> 在 System.Net.WebClient.GetWebRequest(Uri address)
> 在 System.Net.WebClient.DownloadStringAsync(Uri address, Object userToken)
> (...)
> 
> URI=dane.xml

我应该怎么做才能解决这个问题？

我已经尝试`dane.xml`在解决方案资源管理器中设置为 Resource 并创建`new Uri("ProjectName;component/dane.xml", UriKind.Relative);`，但在 Visual Studio 上运行时失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:01:48.543

问题解决了。我已将我的网站放在 apache 服务器上（复制`ProjectName.web`文件夹并运行`ProjectNameTestPage.html`），现在它可以工作了。

# java - Spring bean别名用法

> ID：13220919
> 
> 赞同：16
> 
> 时间：2012-11-04T17:18:21.983
> 
> 标签：java, spring

我知道 bean 别名在春天意味着什么。但我想知道使用别名的用例。为什么有人要使用别名而不是名称来引用 bean？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-04T17:27:42.430

我见过的一种用法如下：给定接口 ( `SomeBean`) 的两个实例：一个用于环境 A，一个用于环境 B。因此您定义了两个 bean：一个名为“someBeanForA”，另一个名为“一些BeanForB”。

必须注入此 SomeBean 的 bean 不知道它们必须使用哪一个：这取决于环境。所以他们使用别名：

```
@Autowired
@Qualifier("someBeanAlias")
private SomeBean someBean; 
```

部署到环境 A 时，XML 文件中的别名指向 someBeanA。部署到环境 B 时，XML 文件中的别名指向 someBeanB。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-04T17:27:43.643

我认为[参考文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#beans-beanname-alias)解释得很好：

> 在 bean 定义本身中，您可以为 bean 提供多个名称，方法是使用由 id 属性指定的最多一个名称和 name 属性中任意数量的其他名称的组合。这些名称可以是同一个 bean 的等效别名，并且在某些情况下很有用，例如允许应用程序中的每个组件通过使用特定于该组件本身的 bean 名称来引用公共依赖项。
> 
> 但是，指定实际定义 bean 的所有别名并不总是足够的。有时需要为在别处定义的 bean 引入别名。这在大型系统中很常见，其中配置在每个子系统之间进行拆分，每个子系统都有自己的一组对象定义。在基于 XML 的配置元数据中，您可以使用该元素来完成此操作。

一个特定的示例可能是您必须在单点登录模块中为多个应用程序定义身份验证入口点。您在单个 Spring Bean 定义中定义它，并在您的特定应用程序中为其设置别名以将其用作身份验证入口点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-16T08:59:20.633

We have used alias in our project and the reason why we used this is because

For an use case, the architecture is such that the bean ids are mentioned in an database master table column. So when the flow is invoked, it reads the table and loads the bean with the same name provided in the column. The bean definition is present in an applicationContext which is part of a jar and we cant change that.

Now for some instances, we had to change the bean name in the table column(to provide better naming convention) but since we cant change the context bean definition, we used aliases to map the new name to the older bean id.

This is also helps in the scenario of multiple environments. If aliases are present we don't have to run the script to update the column value in each environment.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-04T17:30:03.533

[springframework 文档](http://static.springsource.org/spring/docs/2.5.x/reference/beans.html#beans-beanname)本身有一个示例。

> 作为一个具体示例，考虑组件 A 在其 XML 片段中定义一个名为 componentA-dataSource 的 DataSource bean 的情况。然而，组件 B 希望在其 XML 片段中将 DataSource 称为 componentB-dataSource。主应用程序 MyApp 定义了自己的 XML 片段并从所有三个片段组装最终的应用程序上下文，并希望将 DataSource 称为 myApp-dataSource。

# c++ - 将整数或类型作为模板参数传递？

> ID：13220920
> 
> 赞同：4
> 
> 时间：2012-11-04T17:18:22.303
> 
> 标签：c++, templates, c++11, metaprogramming

这是我正在尝试做的一个示例（这是一个“测试”案例，只是为了说明问题）：

```
#include <iostream>
#include <type_traits>
#include <ratio>

template<int Int, typename Type> 
constexpr Type f(const Type x)
{
    return Int*x;
}

template<class Ratio, typename Type, 
         class = typename std::enable_if<Ratio::den != 0>::type>
constexpr Type f(const Type x)
{
    return (x*Ratio::num)/Ratio::den;
}

template</*An int OR a type*/ Something, typename Type>
constexpr Type g(const Type x)
{
    return f<Something, Type>(x);
}

int main()
{
    std::cout<<f<1>(42.)<<std::endl;
    std::cout<<f<std::kilo>(42.)<<std::endl;
} 
```

如您所见，该`f()`函数有两个版本：第一个将 an`int`作为模板参数，第二个将 a 作为模板参数`std::ratio`。问题如下：

我想“包装”这个函数，通过`g()`它可以将`int`OR a`std::ratio`作为第一个模板参数并调用`f()`.

如何在不编写两个`g()`函数的情况下做到这一点？换句话说，我必须写什么而不是`/*An int OR a type*/`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T18:01:14.553

我会这样做，但我稍微改变了你的界面：

```
#include <iostream>
#include <type_traits>
#include <ratio>

template <typename Type>
constexpr
Type
f(int Int, Type x)
{
    return Int*x;
}

template <std::intmax_t N, std::intmax_t D, typename Type>
constexpr
Type
f(std::ratio<N, D> r, Type x)
{
    // Note use of r.num and r.den instead of N and D leads to
    //   less probability of overflow.  For example if N == 8 
    //   and D == 12, then r.num == 2 and r.den == 3 because
    //   ratio reduces the fraction to lowest terms.
    return x*r.num/r.den;
}

template <class T, class U>
constexpr
typename std::remove_reference<U>::type
g(T&& t, U&& u)
{
    return f(static_cast<T&&>(t), static_cast<U&&>(u));
}

int main()
{
    constexpr auto h = g(1, 42.);
    constexpr auto i = g(std::kilo(), 42.);
    std::cout<< h << std::endl;
    std::cout<< i << std::endl;
}

42
42000 
```

笔记：

1.  我已经利用`constexpr`不*通过*模板参数传递编译时常量（这就是`constexpr`目的）。

2.  `g`现在只是一个完美的货运代理。但是我无法使用`std::forward`，因为它没有标记`constexpr`（可以说是 C++11 中的一个缺陷）。所以我放弃使用`static_cast<T&&>`。完美转发在这里有点矫枉过正。但是完全熟悉它是一个很好的成语。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T17:22:13.917

> 如何在不编写两个 g() 函数的情况下做到这一点？

你没有。在 C++ 中，除了通过重载之外，没有办法获取某种类型的类型或值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T17:27:46.850

模板参数不可能同时采用类型和非类型值。

**解决方案1：**

重载的功能。

**解决方案2：**

您可以将值存储在类型中。前任：

```
template<int n>
struct store_int
{
    static const int num = n;
    static const int den = 1;
};

template<class Ratio, typename Type, 
         class = typename std::enable_if<Ratio::den != 0>::type>
constexpr Type f(const Type x)
{
    return (x*Ratio::num)/Ratio::den;
}

template<typename Something, typename Type>
constexpr Type g(const Type x)
{
    return f<Something, Type>(x);
} 
```

但是使用此解决方案，您将不得不指定`g<store_int<42> >(...)`而不是`g<42>(...)`

如果函数很小，我建议你使用重载。

# android - 创建自定义 google now 卡片

> ID：13220923
> 
> 赞同：58
> 
> 时间：2012-11-04T17:18:37.573
> 
> 标签：android, google-now

[Google 为 Google Now ( http://www.google.com/landing/now/](http://www.google.com/landing/now/) )提供了多种“卡片” 。是否可以创建自己的卡片？该系统看起来非常模块化，但我还没有找到任何文档或说明。（我相信您需要提供卡片的内容，以及应该显示卡片时的某种信号方式。您可能只需要实现一些接口。）

如果没有记录在案的解决方案，那么黑客/未记录的方式也可以。我主要是好奇它是如何工作的。

编辑：具体来说，是否有人了解 Google Now 的内部结构，例如通过反编译 .apk？我所看到的表明它非常模块化，应该很容易将另一个类放入 .apk 中，或者使用[Cydia Substrate](http://www.cydiasubstrate.com/)注入代码。我知道（截至 2013 年 11 月）没有官方方法可以添加新卡。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-04T18:06:39.980

目前没有办法做到这一点。Google 制作自己的卡片，自定义应用程序无法注册任何卡片。但我希望将来有可能。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-02-03T15:59:14.217

实际上，谷歌上周宣布，开发者现在可以开发自定义谷歌即时卡：

[http://www.google.com/landing/now/integrations.html](http://www.google.com/landing/now/integrations.html)

但是，似乎还没有开发人员指南。

**编辑：** 在页面末尾，他们指出：

> 当我们能够加入更多合作伙伴时，我们会通知您

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-09-07T03:17:39.363

有一种变通方法可以让您在特定时间或特定位置在 Google Now 的流中放置卡片：使用 Google Keep ( [https://drive.google.com/keep/](https://drive.google.com/keep/) )

您可以在 Google Keep 上创建一张带有基于时间或基于位置的提醒的新卡片，具体取决于相关卡片将在 Google Now 中显示的内容。

由于 Google Keep 现在在云端硬盘中，预计该 API 很快就会可用（请在[http://discovery-check.appspot.com/](http://discovery-check.appspot.com/)上留意它）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-11-28T19:29:54.933

目前还没有办法自己做到这一点。如果您真的想这样做，您可以填写此表格：[https](https://services.google.com/fb/forms/nowintegrations/) ://services.google.com/fb/forms/nowintegrations/ 。您可以询问 Google 是否愿意合作创建 Google Now 卡片。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-02-03T22:38:39.033

Note quite an answer, as it is still not possible to create Google Now cards, but you can now hook into the Google Now search function (basically Android's Siri) and provide custom search results. For example you can say "show me the lyrics to..." and it opens a lyrics app.

Here is a [link to the project](http://forum.xda-developers.com/showthread.php?t=2554173) which is based on the [Xposed framework](http://forum.xda-developers.com/showthread.php?t=1574401).

Just guessing from my impression of the Google Search apk (which includes all the Google Now functionality and even the home screen on KitKat), it should be possible to use a similar technique to inject cards into the app - however since the app is huge and very complicated, it will be a lot of work. I'd keep my eyes open on the xda-developers forums, wouldn't be surprized if someone there solves this in the future.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-08-13T10:02:56.280

似乎有关于如何通过电子邮件推送 google now 信息的开发人员文档，例如。航班信息、餐厅预订等。

[https://developers.google.com/schemas/now/cards](https://developers.google.com/schemas/now/cards)

我还没有深入研究这个，但如果我发现任何重要的东西，可能会更新这个答案。

# linux - 如何计算位于小网格中的元素的频率？

> ID：13220928
> 
> 赞同：1
> 
> 时间：2012-11-04T17:18:57.763
> 
> 标签：linux, shell, count, awk, frequency

文件中有大量数据（3 列），例如：

```
longitude  latitude   count
20.12      50.45       1
35.78      24.26       1
20.48      50.16       2
...         ...       ... 
```

地图（经纬度）分割很多格子：0.5*0.5（大小），例如：

```
longitude: [0, 0.5), [0.5, 1.0), ... , [179.5, 180.0)
latitude : [-90, -89.5), [-89.5, -89.0), ... , [89.5, 90.0] 
```

网格在地图上的格式为 0.5*0.5。

例如：上面的第1条和第3条记录位于网格经度[20.0, 20.5)和纬度[50.0, 50.5)，所以counts=1+2=3。

那么，如何编程以使用 awk 或其他脚本从数据文件中获取位于每个网格中的计数？如何绘制结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T17:30:10.220

我认为这会做你想要的：

```
awk 'function floor(x){
    y=int(x); return y>x?y-1:y
}{
    ilon=floor($1/0.5)
    ilat=floor($2/0.5)
    hist[ilat,ilon]+=$3
}END{
    for(ilat=-180;ilat<=180;ilat++)
        for(ilon=-360;ilon<=360;ilon++){
            printf(" %4d", hist[ilat,ilon])
        printf("\n")
    }
}' 
```

注意：我硬编码了 lon [-180:180] 和 lat [-90:90] 的限制（包括步长）。更一般地说，您将根据当前步长（我想您可能想要使用不同的步长而不是一直使用 0.5）和纬度/经度范围来计算数组的整数限制。

注意 2：此处显示的缺少有用的预定义函数`awk`，我需要定义`floor`自己，所有的事情。我想知道为什么选择排除大多数`C`数学函数。

注意 3：如果不清楚，其输出将是每个单元格的命中计数的大矩阵，纬度每 0.5 步对应一行，经度每步对应一列。

# django - django 以编程方式将变量附加到模型

> ID：13220937
> 
> 赞同：0
> 
> 时间：2012-11-04T17:19:37.453
> 
> 标签：django, django-models

我有一个场景，每次我从模型中执行 objects.filter 时，我都必须在查询中指定语言。出于翻译目的，我必须将 request.LANGUAGE_CODE 作为必填字段发送。

在我的模型.py

```
class ModelA(models.Model):
  field_a   = models.CharField(max_length=1, choices=_statuses, default=_default_status)
  field_b   = models.ForeignKey(ModelLookup, )
  language  = None

  def i18n(self):
        return self.model.modellookupi18n_set.values_list('make_display', 'model_display', 'trim_display').get(language=self.language) 
```

例如，当我运行 ModelA.objects.filter() 时，有没有办法让我指定语言值，如果可能的话，我可以将它作为链式参数传递，否则类将无法运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T17:35:06.647

您可以通过[get_language() 方法从](https://docs.djangoproject.com/en/dev/ref/utils/#django.utils.translation.get_language)[django.utils.translations](https://docs.djangoproject.com/en/dev/ref/utils/#module-django.utils.translation)获取活动语言：

```
from django.utils.translations import get_language
currentLanguage = get_language() 
```

这是使用语言的正确方法。

# facebook - Facebook like box 深色配色方案在我的网站中不起作用

> ID：13220940
> 
> 赞同：0
> 
> 时间：2012-11-04T17:19:57.223
> 
> 标签：facebook, facebook-like

我刚刚为我的网站添加了新的 Facebook 类似框，但不幸的是，深色方案无法正常运行。

附上iframe代码：

```
<iframe style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; WIDTH: 250px; HEIGHT: 520px; OVERFLOW: hidden; BORDER-TOP: medium none; BORDER-RIGHT: medium none" src="//www.facebook.com/plugins/likebox.php?href=http%3A%2F%2Fwww.facebook.com%2Fifocussolutions.com.my&amp;width=250&amp;height=520&amp;colorscheme=dark&amp;show_faces=true&amp;border_color&amp;stream=true&amp;header=true&amp; " frameborder="0" scrolling="no"></iframe> 
```

它不允许我在 iframe 中添加 allowTransparency 代码。你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T17:49:40.003

facebook“灯箱”效果不是用 iframe 完成的。它是使用绝对定位的 div 完成的。有许多 JavaScript 库可以很容易地创建一个类似 facebook 的灯箱。Google for facebook lightbox 并选择一个你喜欢的。

# objective-c - Parse.com - 如何获得 PFQueryTableViewController ，分页与 UISearchDisplayController 一起工作？

> ID：13220944
> 
> 赞同：2
> 
> 时间：2012-11-04T17:20:47.240
> 
> 标签：objective-c, parse-platform, uisearchdisplaycontroller

我正在尝试将搜索添加到[Todo 演示](https://github.com/ParsePlatform/TodoTable.git)应用程序。到目前为止，我有以下代码，搜索工作。以下代码的问题是分页不再起作用。有关于[分页](https://stackoverflow.com/questions/10267445/pagination-isnt-working-after-i-added-a-search-bar)的类似问题，但是当“节中的行数 + 1”返回时，应用程序崩溃并出现 [__NSArrayM objectAtIndex:] 错误。如何让分页工作？

// MyTableController.h

```
#import <Parse/Parse.h>

@interface MyTableController : PFQueryTableViewController

@end 
```

// MyTableController.m

```
#import "MyTableController.h"

@interface MyTableController() <UISearchDisplayDelegate> {

}

@property (nonatomic, strong) UISearchBar *searchBar;
@property (nonatomic, strong) UISearchDisplayController *searchController;
@property (nonatomic, strong) NSMutableArray *searchResults;

@end

@implementation MyTableController

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {

        self.className = @"Todo";

        self.keyToDisplay = @"text";

        self.pullToRefreshEnabled = YES;

        self.paginationEnabled = YES;

        self.objectsPerPage = 5;
    }
    return self;
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.searchBar = [[UISearchBar alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, 44)];
    self.tableView.tableHeaderView = self.searchBar;

    self.searchController = [[UISearchDisplayController alloc] initWithSearchBar:self.searchBar
                                                              contentsController:self];
    self.searchController.searchResultsDataSource = self;
    self.searchController.searchResultsDelegate = self;
    self.searchController.delegate = self;

    CGPoint offset = CGPointMake(0, self.searchBar.frame.size.height);
    self.tableView.contentOffset = offset;

     self.searchResults = [NSMutableArray array];

}

- (void)viewDidUnload
{
    [super viewDidUnload];

}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{

    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (void)didReceiveMemoryWarning
{

    [super didReceiveMemoryWarning];

}

- (void)filterResults:(NSString *)searchTerm {
    [self.searchResults removeAllObjects];

     PFQuery *query = [PFQuery queryWithClassName: self.className];

    [query whereKey:@"text" containsString:searchTerm];

    NSArray *results  = [query findObjects];

    [self.searchResults addObjectsFromArray:results];
}

- (BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString {
    [self filterResults:searchString];
    return YES;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    if (tableView == self.tableView) {
        return self.objects.count;
    } else {
        return self.searchResults.count ;
    }
}

#pragma mark - Parse

- (void)objectsDidLoad:(NSError *)error {
    [super objectsDidLoad:error];
}

- (void)objectsWillLoad {
    [super objectsWillLoad];

}

- (PFQuery *)queryForTable {

    PFQuery *query = [PFQuery queryWithClassName:self.className];
    if ([self.objects count] == 0) {
        query.cachePolicy = kPFCachePolicyCacheThenNetwork;
    }

    [query orderByAscending:@"priority"];

    return query;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath object:(PFObject *)object {
 static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    cell.textLabel.text = [object objectForKey:@"text"];
    cell.detailTextLabel.text = [NSString stringWithFormat:@"Priority: %@", [object objectForKey:@"priority"]];

    return cell;
}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [super tableView:tableView didSelectRowAtIndexPath:indexPath];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:02:51.523

在您自己的实现中，`numberOfRowsInSection`您必须返回 numberOfRows + 1。但是考虑到您有比查询返回更多的单元格，您必须编写代码。查看您 `heightForRowAtIndexPath`和其他方法：可以调用 [self.objects objectAtIndex:self.objects.count]。我的意思是，如果`indexPath.row == self.objects.count`，它是一个“加载更多”单元格。如果您覆盖`willSelectRowAtIndexPath`or `didSelectRowAtIndexPath`，则必须在方法的顶部执行此操作

```
 [super tableView:tableView didSelectRowAtIndexPath:indexPath]; 
```

或添加这个（以前的案例是首选）

```
 if (indexPath.row == self.objects.count)
 {
     [self loadNextPage];
 } 
```

自定义加载更多单元放置在`-(PFTableViewCell *)tableView:(UITableView *)tableView cellForNextPageAtIndexPath:(NSIndexPath *)indexPath`

我使用 `-(PFTableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath` 而不是 `- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:`

# c# - 错误！mysql.data.mysqlclient.mysqlexception(0x80004005)

> ID：13220945
> 
> 赞同：0
> 
> 时间：2012-11-04T17:20:50.417
> 
> 标签：c#, mysql, visual-studio-2010

我想与 mysql 远程连接。我在本地主机中连接没有错误，但是当我想远程连接时出现此错误。

我授予权限并更改防火墙设置仍然不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T17:32:50.107

此错误编号显示：“超时已过期。” 那你怎么连接？你有公共IP还是在局域网上？如果不是，那是你的问题。你可以使用像hamachi这样的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T17:23:16.273

您确定您在尝试连接的远程主机上授予用户权限吗？

`Grant ALL on *.* to 'user'@'remote_host' identified by 'password';`

这将为用户提供带有密码的 remote_host 的所有权限。

# ruby-on-rails - Backbone.js 理解：用模板获取和展示

> ID：13220950
> 
> 赞同：1
> 
> 时间：2012-11-04T17:21:33.670
> 
> 标签：ruby-on-rails, backbone.js

我已经阅读了很多教程并在.net 上进行了搜索......但我仍然遇到了 Backbone.js 的问题。这是我的简单场景：

Rails 应用程序使用 JSON 对象集合响应 GET 请求。当 DOM 准备好时，我想用 Backbone 集合动态构建一个表行列表。这是让我感到困惑的代码：

**HTML部分：**

```
 <script type="text/template" id="tmplt-Page">
      <td>{{=title}}</td>
      <td>{{=description}}</td>
  </script> 
```

**Backbone 的脚本：**

```
$(function(){
    var Page = Backbone.Model.extend({});

    var Pages = Backbone.Collection.extend({
        model: Page,
        url: '/pages'
    });
    var pages = new Pages([
        {title: 'ProvA1', description: ''},
        {title: 'ProvA2', description: ''}
    ]);

    var PageView = Backbone.View.extend({
        tagName: 'tr',
        template: _.template($('#tmplt-Page').html()),

        render: function() {
            this.$el.append(this.template(this.model.toJSON()));
            return this;
        }

    });

    var AppView = Backbone.View.extend({
        el: $("#results"),

        initialize: function () {
            _.bindAll(this, 'render');
            pages.on('reset', this.render)
        },

        render: function() {
            this.$el.empty();
            pages.each( function( page ) {

                var view = new PageView({
                  model : page
                });

                this.$el.append(view.render().el);

            });

            return this;
        }

    });

    var appview = new AppView;

}); 
```

屏幕上没有呈现任何内容。

似乎有2个问题：

1) fetch() 是异步的，所以代码在 ajax 往返结束之前执行。

2）如果我手动将一些对象加载到集合中，这段代码“this.template(this.model.toJSON())”不会替代json属性

编辑 ：

为了使用胡子标签，我首先编写了这段代码：

![在此处输入图像描述](../Images/4f498f3a8e7e3508cdd1f00d568449ad.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T17:43:59.927

首先，正如您所说，`fetch()`它是异步的，但它在完成时会触发“重置”事件，因此您应该将其添加到`AppView.initialize`：

`pages.on('reset', this.render)`

其次，您永远不会在任何地方插入 PageView 的 HTML。将其添加到`AppView.render`：

`// at the beginning var self = this; // and in the forEach loop self.$el.append(view.el);`

第三，在开头`AppView.render`，你应该清楚的内容`this.$el`。

编辑：

你还有几个问题：

*   您正在使用带有小胡子标签 ( `{{ }}`-> `<%= %>`)的下划线模板
*   `self = this`渲染中缺少 var
*   你不叫`appview.render()`！:)

这是您在 jsfiddle 上工作的代码：http: [//jsfiddle.net/PkuqS/](http://jsfiddle.net/PkuqS/)

# mysql - MySql/PHP - 设计我的第一个数据库。需要评论

> ID：13220951
> 
> 赞同：-1
> 
> 时间：2012-11-04T17:21:33.733
> 
> 标签：mysql, database-design, database-schema, organization, project-organization

我正在设计我的第一个数据库并从头开始编写我的第一个 PHP 项目，我需要有人来审查数据库方案。

**PHP 脚本的目的：**当我在 Youtube、Myspace、Metacafe、Vimeo 等网站上发布宣传视频时，显示我网络中各个网站的流量统计。

**我打算如何组织它：**

1.  一个站点可以有多个类别，例如“吉他课”、“唱歌课”、“舞蹈课”。
2.  某些类别可以有子类别。就像“吉他课”可以拆分为“贝司”和“电音”
3.  在一个类别中可以是一个宣传视频。在下图中，视频被命名为***item***。
4.  一项（宣传视频）只能在一个类别中创建
5.  一个宣传视频可以提交到多个视频共享网站（Youtube、Vimeo 等）
6.  一个宣传视频可以有几个不同的元数据，比如“标题”和“描述”

**可能发生的场景：**

8.  也许有一天 Youtube 会删除我的一个宣传视频，在这种情况下，我会用可能不同的“标题”和“描述”重新上传它，但我想在统计中显示一些旧信息，比如删除前的观看次数。
9.  我现在想不出别的了。。

编辑： **我添加了表 itemStats** ![在此处输入图像描述](../Images/9eb3ed65148ef53a35c701c48e1a4bb0.png)

**EDIT2：我不确定我是否需要单独的 itemStats 表。我正在考虑与 itemMeta 一起加入它？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T17:41:23.070

您将主键链接到某些表上的主键（users:id 到 usersMeta:id），而不是主键到外键（sites:id 到 categories:siteid）。可能不会很好地工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T23:24:11.440

我建议您将**users**和**usersMeta**合并到*一个*表中。**usersMeta**中只有 5 个独特且有用的字段。如果需要，您将需要使用连接来获取所有数据，我认为这是不必要的。请记住，[规范化](https://stackoverflow.com/a/5773681/486233)是删除冗余并确保所有表都具有最少字段的过程……但这需要付出代价。在大多数情况下，成本是性能。

此外，将**用户**表组合起来最多只能有 9 个字段。那仍然是我认为非常小的桌子。我以前有过包含 20-30 个字段的表格。就我而言，将这些数据分开是没有意义的，因为它是表所独有的，并且没有其他表或系统的一部分无论如何都不会使用该数据。

# visual-studio-2012 - NI测量工作室2012 for VS 2012

> ID：13220955
> 
> 赞同：0
> 
> 时间：2012-11-04T17:21:59.410
> 
> 标签：visual-studio-2012, labview, measurement-studio

只是想确保测量工作室 2012 不适用于 VS 2012，并且不要浪费我的时间来安装它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T05:51:11.147

到目前为止，它适用于 2010、2008 和 2005，而不是 2012。

为 Visual Studio 2012 提供 Measurement Studio 支持需要一段时间。

[Measurement Studio 2012 功能列表](http://www.ni.com/mstudio/buy/ "Measurement Studio 2012 功能列表")

# networking - 为什么TCP在接收端缓冲数据

> ID：13220956
> 
> 赞同：10
> 
> 时间：2012-11-04T17:22:00.277
> 
> 标签：networking, tcp

在 TCP PUSH 功能的大部分描述中，都提到了 PUSH 功能不仅要求发送方立即发送数据（无需等待其缓冲区填满），还要求将数据推送到接收方上的接收应用程序侧，没有被缓冲。

我不明白的是，为什么 TCP 会在接收端缓冲数据？毕竟，TCP 数据段在 IP 数据报中传播，这些数据报被完整地处理（即，在对承载任何给定数据段的 IP 数据报的片段进行任何必要的重组之后，IP 层仅将整个数据段传递给 TCP 层）。那么，为什么接收 TCP 层要等待将这些数据传递给它的应用程序呢？一种情况可能是应用程序在该时间点没有读取数据。但是，如果是这种情况，那么强制将数据推送到应用程序无论如何都是不可能的。因此，我的问题是，为什么 PUSH 功能需要规定有关接收方行为的任何内容？假设应用程序在段到达时正在读取数据，那么无论如何该段都应该直接交付给应用程序。

任何人都可以帮助解决我的疑问吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-04T20:55:52.943

TCP*必须*缓冲接收到的数据，因为它不知道应用程序何时真正读取数据，并且它已经告诉发送者它愿意接收（可用的“窗口”）。所有这些数据都存储在“接收窗口”中，直到它被应用程序读出。

一旦应用程序读取了数据，它就会从接收窗口中删除数据，并增加它使用下一个 ACK​​ 报告给发送者的大小。如果这个窗口不存在，那么发送者将不得不推迟发送，直到接收者告诉它继续，直到应用程序发出读取它才能这样做。这会给每个读取调用增加一个完整的往返延迟延迟，如果不是更多的话。

大多数现代实现还利用此缓冲区来保持接收到的无序数据包，以便发送方可以仅重新传输丢失的数据包，而不是之后的所有数据包。

PSH 位通常不~~用于~~操作。是的，实现会发送它，但它通常不会改变接收端的行为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T16:45:53.457

请注意，尽管其他注释是正确的（在大多数实现中，PSH 位根本不会影响应用程序行为），但 TCP 仍然使用它来确定 ACK 行为。具体来说，当设置了 PSH 位时，接收 TCP 将立即 ACK，而不是使用延迟的 ACK。小细节；）

# c++ - 生成变量的名称

> ID：13220957
> 
> 赞同：1
> 
> 时间：2012-11-04T17:22:00.767
> 
> 标签：c++, variables

我想使用 for 命令生成一些变量。看下面的代码：

```
for (char ch='a'; ch<='z'; ch++)
      int ch=0; 
```

这只是一个例子，在运行上面的代码之后，我想要 int a, int b, int c ...

另一个例子：

```
for (int i=0; i<10; i++)
      int NewiEnd=0; 
```

例如，运行上面的代码后，我们将有 int New1End、int New2End 等。

希望我足够清楚，我怎么能在 C++ 中做这样的事情？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-04T17:25:57.903

不，不可能，不完全是。但是，这是可能的：

```
std::map<char,int> vars;    
for (char ch='a'; ch<='z'; ch++)
      vars[ch] = 0;

std::cout << vars['a'] << vars['b'] << vars['c']; 
```

你也可以拥有`std::map<std::string, int>`.

```
std::map<std::string,int> vars;
for (int i=0; i<10; i++)
    vars["New" + std::to_string(i) + "End"] = 0;
std::cout << vars["New5End"]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-04T17:23:49.510

您尝试做的事情在 C 或 C++ 中是不可能的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-04T17:26:11.103

您似乎想要的是以下类型的地图：

```
std::map<std::string, int> ints; 
```

这将允许您按名称调用“变量”：

```
ints["a"] = 0;
ints["myVariable"] = 10; 
```

或如您的示例中所示：

```
std::map<char, int> ints;
for (char ch='a'; ch<='z'; ch++)
   ints[ch] = 0; 
```

如果您即将使用 'a' - 'z' 您可以使用整数数组：

```
int ints['z' + 1];
ints['a'] = 0;
ints['z'] = 0; 
```

但这会为 'a' 下面的 ascii 字符分配不必要的空间。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-04T17:48:43.700

在 C/C++ 中，当代码编译和运行时，变量名已经“消失”了。您不能在运行时通过“反射”打印出现有变量的名称......更不用说创建新的命名变量了。寻找此功能的人发现，您可以做到这一点的唯一通用方法归结为使用预处理器：

[在 C++ 中打印出变量名的通用方法](https://stackoverflow.com/questions/6622962/generic-way-to-print-out-variable-name-in-c)

*理论上*，预处理器也可以应用于您的问题，但有一定的限制：

[在 C 预处理器中编写一个 while 循环](https://stackoverflow.com/questions/319328/writing-a-while-loop-in-the-c-preprocessor)

但是任何阅读您的代码的人都可能会在您的心中打下赌注，并且这样做是有道理的。星期天早上的懒惰和坚信这不是你（应该）想要的东西，都让我不想写一个有效的例子。:-)

*（对于好奇的，预处理器不是图灵完备的，虽然有一些[“有趣”的实验](https://stackoverflow.com/questions/3136686/is-the-c99-preprocessor-turing-complete)）*

C/C++ 的本质是让您根据需要构建命名表。默认情况下提供此功能的语言会让您为名称的运行时跟踪付费，无论您是否最终使用反射，这不符合这种特定编译语言的精神。其他人给你的答案更正确。

# latex - 如何仅在一张幻灯片中消除 Latex Beamer 页码顶部的导航栏？（不是整个文件）

> ID：13220958
> 
> 赞同：1
> 
> 时间：2012-11-04T17:22:04.980
> 
> 标签：latex, beamer

我想从我的演示文稿的一张幻灯片中删除导航栏（包含圆圈和其他内容）。

我在这个论坛上读到，通过在序言中添加“\beamertemplatenavigationsymbolsempty”。但这不是我想要的！我只想从一张特定的幻灯片中删除，而不是整个文档。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T23:48:15.550

也许您正在寻找这样的东西：

```
{
\usenavigationsymbolstemplate{}

%
% Place your slide code here
%

} 
```

# actionscript-3 - AS3 并行影片剪辑 + 链接

> ID：13220959
> 
> 赞同：1
> 
> 时间：2012-11-04T17:22:09.260
> 
> 标签：actionscript-3, flash

我是as3的初学者。我想制作一个盒子，在鼠标悬停时加载两个平行的影片剪辑，并在鼠标移出时倒带。我想添加指向电影剪辑的链接，但很长一段时间后我什么都没有。

代码如下所示：

```
import flash.events.MouseEvent;

for (var fl_ChildIndex:int = 0;
fl_ChildIndex < this.numChildren;
fl_ChildIndex++)
{
this.getChildAt(fl_ChildIndex).addEventListener(MouseEvent.MOUSE_OVER, nawierzch);
}

function nawierzch(event:MouseEvent):void
{
this.addChild(event.currentTarget as DisplayObject);
}
zlec.stop();

zlec.addEventListener(MouseEvent.MOUSE_OVER, onMouseOver);
zlec.addEventListener(MouseEvent.MOUSE_OUT, onMouseOut);
zlec.addEventListener(MouseEvent.CLICK, onClick);

zlec.buttonMode = true;
zlec.mouseChildren = true;

function onClick(event:MouseEvent):void
{
    trace("click")
var url:String = "http://www.motoopcja.pl";
var request:URLRequest = new URLRequest(url);
try {
       navigateToURL(request, '_blank');
    } catch (e:Error) {
        trace("Error occurred!");
    }

}

function onMouseOver(e:MouseEvent):void
{
var mc:MovieClip = MovieClip(e.currentTarget);

mc.removeEventListener(Event.ENTER_FRAME, rewind);

mc.play();
mc.addEventListener(Event.ENTER_FRAME, advance);
}

function onMouseOut(e:MouseEvent):void
{
var mc:MovieClip = MovieClip(e.currentTarget);

mc.removeEventListener(Event.ENTER_FRAME, advance);

mc.prevFrame();
mc.addEventListener(Event.ENTER_FRAME, rewind);
}

function advance(e:Event):void
{
var mc:MovieClip = MovieClip(e.currentTarget);

if (mc.currentFrame == mc.totalFrames)
{
    mc.stop();
    mc.removeEventListener(Event.ENTER_FRAME, advance);
}
}

function rewind(e:Event):void
{
var mc:MovieClip = MovieClip(e.currentTarget);

if (mc.currentFrame == 1)
{
    mc.stop();
    mc.removeEventListener(Event.ENTER_FRAME, rewind);
}
else
{
    mc.prevFrame();
}
}
wykonaj.stop();

wykonaj.addEventListener(MouseEvent.MOUSE_OVER, onMouseOver2);
wykonaj.addEventListener(MouseEvent.MOUSE_OUT, onMouseOut2);
wykonaj.addEventListener(MouseEvent.CLICK, onClick2);

wykonaj.buttonMode = true;
wykonaj.mouseChildren = true;

function onClick2(e:MouseEvent):void
{
trace("click")  
}

function onMouseOver2(e:MouseEvent):void
{
var mc:MovieClip = MovieClip(e.currentTarget);

mc.removeEventListener(Event.ENTER_FRAME, rewind);

mc.play();
mc.addEventListener(Event.ENTER_FRAME, advance);
}

function onMouseOut2(e:MouseEvent):void
{
var mc:MovieClip = MovieClip(e.currentTarget);

mc.removeEventListener(Event.ENTER_FRAME, advance);

mc.prevFrame();
mc.addEventListener(Event.ENTER_FRAME, rewind);
}

function advance2(e:Event):void
{
var mc:MovieClip = MovieClip(e.currentTarget);

if (mc.currentFrame == mc.totalFrames)
{
    mc.stop();
    mc.removeEventListener(Event.ENTER_FRAME, advance);
}
}

function rewind2(e:Event):void
{
var mc:MovieClip = MovieClip(e.currentTarget);

if (mc.currentFrame == 1)
{
    mc.stop();
    mc.removeEventListener(Event.ENTER_FRAME, rewind);
}
else
{
    mc.prevFrame();
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T11:31:12.817

问题可能是您没有导入所需的所有内容。您还必须小心不要删除不存在的事件侦听器。这在您的代码中经常发生。这是一个例子：

zlec 翻了个身。zlec 删除了倒带事件监听器（不存在）。

我不知道您是否有一些外部 AS3 阻止它，但它可能会引发错误。

这是一个更清洁的解决方案：

```
import flash.events.MouseEvent;
import flash.net.URLRequest;
import flash.net.navigateToURL;
import flash.events.Event;//imports

zlec.addEventListener(MouseEvent.ROLL_OVER,turnPar);
zlec.addEventListener(MouseEvent.ROLL_OUT,turnPar);
zlec.addEventListener(MouseEvent.CLICK,clickedBox);
zlec.buttonMode = true;//make the cursor change on roll over

for(var curChild:uint=0;curChild<this.numChildren) {
    this.getChildAt(curChild).addEventListener(Event.ENTER_FRAME,playPar);
}

var theState:String = "MouseEvent.ROLL_OUT";//by default rewind to frame 1
function turnPar(event:MouseEvent):void { theState = event.type; }

function clickedBox(event:MouseEvent):void {
    var url:String = "http://www.motoopcja.pl";//your website
    var req:URLRequest = new URLRequest(url);//as URLRequest
    navigateToURL(req,'_blank');//open in a new window
}

function playPar(event:Event):void {
    if("MouseEvent.ROLL_OUT" == theState && event.currentTarget.currentFrame > 1) { event.currentTarget.prevFrame(); }
    else if("MouseEvent.ROLL_OVER" == theState && event.currentTarget.currentFrame < event.currentTarget.totalFrames) { event.currentTarget.nextFrame(); }
} 
```

# windows - windows桌面应用程序和windows商店应用程序有什么区别

> ID：13220962
> 
> 赞同：9
> 
> 时间：2012-11-04T17:22:13.580
> 
> 标签：windows, windows-8

我在网上读了几篇文章，但我不明白它们之间有什么区别。有人可以澄清一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T01:11:37.543

这些答案中有很多是错误的。实际上，这个问题本身就有点错误。

这两种应用程序是桌面应用程序和现代 UI 应用程序（以前称为 Metro 应用程序）。这两种应用程序都可以进入商店。

桌面应用程序看起来像旧的那种。它们不是全屏的，它们在桌面区域运行，它们不必具有用户界面（因此服务是桌面应用程序）等等。

现代 UI 应用程序是新的类型。它们是全屏和快照，等等。

现代 UI 应用程序有很多新的要求。他们必须声明他们处理的文件类型。他们不允许保存为 *. 一些晦涩难懂的旧 API 已为它们关闭，这对于从旧语言进行反编译的人来说可能是个问题。不允许他们为文档文件夹声明安静读取标志。

但实际上，你不会看到两者之间有很大的区别，除非你在做一些奇怪的事情，除了全屏与窗口位。

非商业账户不允许使用桌面用户界面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T18:06:12.530

Windows 应用商店应用程序设计为在“Metro”界面中运行，可在 Windows RT（平板电脑和笔记本电脑）和 Windows 8 Pro 上运行。请参阅：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh974576.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh974576.aspx)。

Windows 桌面应用程序是我们迄今为止一直在构建的传统应用程序。此应用程序不适用于平板电脑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T18:27:54.823

**Windows 8 桌面应用程序：**这只是记事本、MS Word、AutoCad 等基本程序......用 C++、C#、VB 等已知语言编写......

**Windows 8 Store App**在这里，您可以在新的开始菜单中创建应用程序。单击开始菜单中的按钮以打开您自己的应用程序。在这里，您也可以使用 html5/javascript 或 c# 编写应用程序。

# playn - PlayN 无法编译 HTML

> ID：13220969
> 
> 赞同：1
> 
> 时间：2012-11-04T17:23:11.403
> 
> 标签：playn

Android 和 Java 版本运行良好，但是当我尝试编译 HTML 版本时，我只得到错误。我通过选择 maven build... 并在目标文本字段中输入 integration-test 来做到这一点（如入门指南中的建议）。但我只得到以下错误：

> ```
> SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
> SLF4J: Defaulting to no-operation (NOP) logger implementation
> SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.
> [INFO] Scanning for projects...
> [INFO]                                                                        
> [INFO] ------------------------------------------------------------------------
> [INFO] Building PlayN Hello HTML 1.0-SNAPSHOT
> [INFO] ------------------------------------------------------------------------
> [INFO]
> [INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ playn-hello-html ---
> [INFO]
> [INFO] --- maven-resources-plugin:2.5:resources (default-resources) @ playn-hello-html ---
> [debug] execute contextualize
> [INFO] Using 'UTF-8' encoding to copy filtered resources.
> [INFO] skip non existing resourceDirectory F:\Documents\Programmieren\PlayN\game\html\src\main\resources
> [INFO]
> [INFO] --- maven-compiler-plugin:2.3:compile (default-compile) @ playn-hello-html ---
> [INFO] Nothing to compile - all classes are up to date
> [INFO]
> [INFO] --- maven-resources-plugin:2.5:testResources (default-testResources) @ playn-hello-html ---
> [debug] execute contextualize
> [INFO] Using 'UTF-8' encoding to copy filtered resources.
> [INFO] skip non existing resourceDirectory F:\Documents\Programmieren\PlayN\game\html\src\test\resources
> [INFO]
> [INFO] --- maven-compiler-plugin:2.3:testCompile (default-testCompile) @ playn-hello-html ---
> [INFO] No sources to compile
> [INFO]
> [INFO] --- maven-surefire-plugin:2.10:test (default-test) @ playn-hello-html ---
> [INFO] Surefire report directory: F:\Documents\Programmieren\PlayN\game\html\target\surefire-reports 
> ```

```
-------------------------------------------------------
 T E S T S
-------------------------------------------------------

Results :

Tests run: 0, Failures: 0, Errors: 0, Skipped: 0

[INFO]
[INFO] --- gwt-maven-plugin:2.4.0:compile (default) @ playn-hello-html ---
[ERROR] Fehler: Hauptklasse com.google.gwt.dev.Compiler konnte nicht gefunden oder geladen werden
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 2.527s
[INFO] Finished at: Fri Nov 02 10:31:17 CET 2012
[INFO] Final Memory: 11M/28M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.codehaus.mojo:gwt-maven-plugin:2.4.0:compile (default) on project playn-hello-html: Command [[
[ERROR] C:\Program Files (x86)\Java\jre7\bin\java -Xmx256m -classpath F:\Documents\Programmieren\PlayN\game\html\src\main\java;F:\Documents\Programmieren\PlayN\game\html\src\main\resources;F:\Documents\Programmieren\PlayN\game\html\target\classes;C:\Users\\.m2\repository\com\googlecode\playn\playn-hello-core\1.0-SNAPSHOT\playn-hello-core-1.0-SNAPSHOT.jar;C:\Users\\.m2\repository\com\googlecode\playn\playn-core\1.4\playn-core-1.4.jar;C:\Users\\.m2\repository\com\samskivert\pythagoras\1.2\pythagoras-1.2.jar;C:\Users\
\.m2\repository\com\googlecode\playn\playn-html\1.4\playn-html-1.4.jar;C:\Users\\.m2\repository\com\googlecode\playn\playn-webgl\1.4\playn-webgl-1.4.jar;C:\Users\\.m2\repository\com\google\gwt\gwt-user\2.4.0\gwt-user-2.4.0.jar;C:\Users\\.m2\repository\javax\validation\validation-api\1.0.0.GA\validation-api-1.0.0.GA.jar;C:\Users\\.m2\repository\javax\validation\validation-api\1.0.0.GA\validation-api-1.0.0.GA-sources.jar;C:\Users\\.m2\repository\com\allen-sauer\gwt\voices\gwt-voices\2.1.8\gwt-voices-2.1.8.jar;C:\Users\\.m2\repository\com\google\gwt\gwt-user\2.4.0\gwt-user-2.4.0.jar;C:\Users\\.m2\repository\javax\validation\validation-api\1.0.0.GA\validation-api-1.0.0.GA.jar;C:\Users\\.m2\repository\javax\validation\validation-api\1.0.0.GA\validation-api-1.0.0.GA-sources.jar;C:\Users\\.m2\repository\com\google\gwt\gwt-dev\2.4.0\gwt-dev-2.4.0.jar com.google.gwt.dev.Compiler -gen F:\Documents\Programmieren\PlayN\game\html\target\.generated -logLevel INFO -style PRETTY -war F:\Documents\Programmieren\PlayN\game\html\target\playn-hello-html-1.0-SNAPSHOT -localWorkers 8 -XdisableClassMetadata -XdisableCastChecking -XdisableRunAsync playn.sample.hello.HelloGame
[ERROR] ]] failed with status 1
[ERROR] -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException 
```

当我尝试 Google -> GWT Compile（如 Stackoverflow 上的某处所述）时，它只说这不是 GWT 项目！

我该怎么做才能使 HTML 版本正常工作？

问候弗莱克达尔姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T01:10:18.050

试试这个：

`mvn clean -Phtml package`

# java - 如何拖动对象

> ID：13220971
> 
> 赞同：3
> 
> 时间：2012-11-04T17:23:14.013
> 
> 标签：java, applet, cursor, drag

我想拖动一个框，我希望我的鼠标光标位于我在拖动矩形时单击矩形的位置。我尝试了这段代码，当我尝试拖动时遇到了一堆错误。

```
import objectdraw.*;

import java.awt.*;

public class TouchWindow extends WindowController
{

    private FilledRect a;
    private boolean b;
    private Location c;
    private int x;
    private int y;
    public void begin()
    {
        b=false;
        a=new FilledRect(0,0,50,50,canvas);
    }
    public void onMouseClick(Location pt)
    {
        if(a.contains(pt))
        {
        b=true;
        pt=c;
        }
    }
    public void onMouseDrag(Location pt2)
    {
        if(b==true)
        {
        x=(int)c.getX()-(int)pt2.getX();
        y=(int)c.getY()-(int)pt2.getY();
        a.move(x,y);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-04T18:28:00.723

嗯，这里有一个例子，虽然不是小程序，但它可以非常简单地移植。

![在此处输入图像描述](../Images/c008e65ea4031c69511e0e4949fd63e6.png)

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Rectangle;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class ShapeMover {

    public ShapeMover() {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setTitle("Shape Mover");

        initComponents(frame);

        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String s[]) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new ShapeMover();
            }
        });

    }

    private void initComponents(JFrame frame) {
        frame.getContentPane().add(new DragPanel());
    }
}

class DragPanel extends JPanel {

    Rectangle rect = new Rectangle(0, 0, 100, 50);
    int preX, preY;
    boolean isFirstTime = true;
    Rectangle area;
    boolean pressOut = false;
    private Dimension dim = new Dimension(400, 300);

    public DragPanel() {
        setBackground(Color.white);
        addMouseMotionListener(new MyMouseAdapter());
        addMouseListener(new MyMouseAdapter());
    }

    @Override
    public Dimension getPreferredSize() {
        return dim;
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);

        Graphics2D g2d = (Graphics2D) g;
        if (isFirstTime) {
            area = new Rectangle(dim);
            rect.setLocation(50, 50);
            isFirstTime = false;
        }

        g2d.setColor(Color.black);
        g2d.fill(rect);
    }

    boolean checkRect() {
        if (area == null) {
            return false;
        }

        if (area.contains(rect.x, rect.y, rect.getWidth(), rect.getHeight())) {
            return true;
        }

        int new_x = rect.x;
        int new_y = rect.y;

        if ((rect.x + rect.getWidth()) > area.getWidth()) {
            new_x = (int) area.getWidth() - (int) (rect.getWidth() - 1);
        }
        if (rect.x < 0) {
            new_x = -1;
        }
        if ((rect.y + rect.getHeight()) > area.getHeight()) {
            new_y = (int) area.getHeight() - (int) (rect.getHeight() - 1);
        }
        if (rect.y < 0) {
            new_y = -1;
        }
        rect.setLocation(new_x, new_y);
        return false;
    }

    private class MyMouseAdapter extends MouseAdapter {

        @Override
        public void mousePressed(MouseEvent e) {
            preX = rect.x - e.getX();
            preY = rect.y - e.getY();

            if (rect.contains(e.getX(), e.getY())) {
                updateLocation(e);
            } else {
                pressOut = true;
            }
        }

        @Override
        public void mouseDragged(MouseEvent e) {
            if (!pressOut) {
                updateLocation(e);
            } else {
            }
        }

        @Override
        public void mouseReleased(MouseEvent e) {
            if (rect.contains(e.getX(), e.getY())) {
                updateLocation(e);
            } else {
                pressOut = false;
            }
        }

        public void updateLocation(MouseEvent e) {
            rect.setLocation(preX + e.getX(), preY + e.getY());
            checkRect();

            repaint();
        }
    }
} 
```

# python - 字符加扰的Levenshtein距离？

> ID：13220973
> 
> 赞同：3
> 
> 时间：2012-11-04T17:23:17.187
> 
> 标签：python, string, string-comparison, levenshtein-distance, fuzzy-comparison

我正在寻找一个字符串比较度量 ala Levenshtein，当字符串中的字符被打乱时，它也可以工作。有谁知道这样的指标？如果有一个 Python 模块可以计算这样的指标，那就太好了。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T17:30:31.660

您可以尝试该[`difflib`](http://docs.python.org/2/library/difflib.html)库，或者还有一个名为[pylevenshtein](http://code.google.com/p/pylevenshtein/)的外部库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T17:32:04.507

计算每种类型字符的数量（使用 HashMap 或等效项），然后减去结果值并取每个减法的绝对值。将所有这些加在一起，然后除以 2（因为您已经重复计算了每个差异）。

例子：

```
banana
batman

a - 3 , 2 -> |1| -> 1
b - 1 , 1 -> |0| -> 0
m - 0 , 1 -> |-1| -> 1
n - 2 , 1 -> |1| -> 1
t - 0 , 1 -> |-1| -> 1 
```

因此你有`1+1+1+1 = 4 -> 4/2 = 2`

检查：在`banana`中，将一个更改`n`为 a `t`，将一个更改`a`为一个`m`（2 个更改），您的字母在`batman`

如果字符串的长度不同，请计算字符串长度的差异，然后从差异计数中减去该数字（上图）。然后除以 2，然后将该数字加回去。

例子：

```
nab
banana

total difference count: 3
3 - 3 = 0 -> 0 / 2 = 0 -> 0 + 3 = 3 
```

此外，我根本不会在这里使用 Levenshtein，因为该问题的很多困难在于定位，而您并不关心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-16T08:09:14.340

可以简单地编辑 levenstien 距离的动态规划解决方案，以捕获例如德里、德里的成对加扰，并且与相应的替换或添加或删除相比，赋予这个较小的权重。

编辑：这个算法已经存在并被命名为[Damerau–Levenshtein distance](http://en.wikipedia.org/wiki/Damerau%E2%80%93Levenshtein_distance)。搜索这个算法会给你一个[Python 包](https://pypi.python.org/pypi/pyxDamerauLevenshtein)，你可以直接使用它。

# md5 - MD5 哈希和正则表达式

> ID：13220975
> 
> 赞同：-4
> 
> 时间：2012-11-04T17:23:40.520
> 
> 标签：md5

我收到了一个`MD5`哈希值和一个`Regular Expression`具有相同明文的哈希值。如何使用`Regular Expression`破解`MD5`哈希值并找到后面的文本`MD5`？

```
b89e49cab317f2681be60fb3d1c0f8f8
[(a|c|d)n-t\|]{8} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-02-27T22:41:00.403

这个想法是使用正则表达式作为模板并生成满足它的输入。

您可以搜索一个[正则表达式可视化](https://regexper.com/#%5B%28a%7Cc%7Cd%29n-t%5C%7C%5D%7B8%7D)器来查看这一点，但它所说的是任何字符`()acd|`或介于`n`和`t`（包括）之间的任何字符，以任何顺序重复八次。我在 hashcat 中对此进行了测试，尽管它看起来意味着别的东西，但正则表达式是正确的。更短的写法是`[acd|()n-t]{8}`.

因此，您开始使用这些值生成 8 个字符串并获取其中的 md5。您几乎可以使用任何编程语言来执行此操作，但 Python 是一个不错的选择。查找 hashlib 库，它有一个函数 md5。您将在其上调用函数 hexdigest 并将其与提供的哈希值进行比较。

```
>>> import hashlib
>>> hashlib.md5(b'cybering').hexdigest()
'61e4feebe66ad22349e292d1462afd3a' 
```

此外，如果您想使用破解软件，请查找 JohnTheRipper 或 hashcat。您应该能够为他们提供字典并让它尝试破坏散列。我能够在大约 5 秒内在我的 980ti 上使用 hashcat 解决这个问题。[本教程](https://www.4armed.com/blog/perform-mask-attack-hashcat/)帮助我设置了自定义字符集和掩码来执行攻击。

玩得开心！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-28T06:17:19.790

一种方法是生成正则表达式允许的 19 个字符的所有可能的 8 个字符组合（重复）。通过计算 md5 散列并将其与给定的散列进行比较来测试每个组合。

那将是 13^8 = 815,730,721 种可能的组合来检查。在检查所有这些之前可能会找到答案。

我能够在我的笔记本电脑上编写一个小 Node.js 程序，它在大约 4 分钟内找到了解决方案（我使用工作人员将问题分解以利用多个 CPU 内核）。

编辑：我认为正则表达式有`n-z`而不是`n-t`所以搜索空间实际上要小得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T17:25:44.110

您无法破解它使用单向散列算法的 md5 散列值。

# emacs - 怎么使用defimage？

> ID：13220978
> 
> 赞同：1
> 
> 时间：2012-11-04T17:23:57.647
> 
> 标签：emacs, elisp

我想我从字面上遵循了这个例子，但它不起作用。如果我使用`defimage`宏，则不会创建图像描述符，但是当我使用时，`create-image`它会使用所有相同的参数。以下是我尝试过的：

```
(defimage test ((:type png :file "/home/wvxvw/Projects/haxe-mode/trunk/ede/etc/images/interface.png")))
test                                    ; nil
(defimage test (:type png :file "/home/wvxvw/Projects/haxe-mode/trunk/ede/etc/images/interface.png"))
test                                    ; nil
(insert-image test)                     ; error
(setq test (create-image "/home/wvxvw/Projects/haxe-mode/trunk/ede/etc/images/interface.png" 'png nil))
(image :type png :file "/home/wvxvw/Projects/haxe-mode/trunk/ede/etc/images/interface.png")
(insert-image test)                     ; shows image 
```

有什么提示吗？

编辑：

虽然上面的代码应该说明问题，但我尝试运行的实际代码涉及更多。发布它以防万一：

```
(require 'cl)

(defvar haxe-images-dir
  (concat (file-name-directory load-file-name) "etc/images/"))

(defmacro haxe-define-images (images)
  (append
   '(progn)
   (loop for image in images
         collect
         `(defimage ,(intern (concat "haxe-" image "-icon"))
            ((:type png :file
                    (concat haxe-images-dir ,(concat image ".png"))))))))

(haxe-define-images
 ("private" "public" "static" "instance" "inline"
  "volatile" "variable" "class" "interface" "macro"
  "enum" "deftype" "function")) 
```

编辑2：

这就是它最终的工作方式。也许我编译了一些代码部分，因此从不同的地方加载了一些这样的谜团......

```
(require 'cl)
(require 'haxe-project)

(defmacro haxe-define-images (images)
  (append
   `(progn)
   (loop for image in images
         with images-root = (concat haxe-install-dir "etc/images/")
         collect
         `(defimage ,(intern (concat "haxe-" image "-icon"))
            ((:type png :file
                    ,(concat images-root image ".png")))))))

(haxe-define-images 
 ("private" "public" "static" "instance" "inline"
  "volatile" "variable" "class" "interface" "macro"
  "enum" "deftype" "function")) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T19:32:30.050

如果变量尚未设置，则它们仅设置变量，这是它们`defimage`和其他形式的一个特征。`def-`从[文档中`defvar`](http://www.gnu.org/software/emacs/emacs-lisp-intro/html_node/defvar.html)：

> `defvar`特殊形式类似于设置变量的`setq`值。它`setq`在两个方面有所不同：首先，如果变量还没有值，它只设置变量的值。如果变量已有值，`defvar`则不覆盖现有值。第二， [...]

所以我假设你已经为 分配了一些东西`test`，所以`defimage`表单什么都不做。如果您正在编辑代码，您可以`def-`通过在表单上放置点并使用命令[`eval-defun`](http://www.gnu.org/software/emacs/manual/html_node/emacs/Lisp-Eval.html)( `C-M-x`) 来强制评估表单。

请注意，您应该`defimage`仅用于声明全局变量。对于其他情况（您将在本地使用图像），请[`find-image`](http://www.gnu.org/software/emacs/manual/html_node/elisp/Defining-Images.html#index-find_002dimage-3834)改用。

* * *

在您更新的代码中，您的宏`haxe-define-images`无法评估表达式`(concat haxe-images-dir ...)`。您可以通过展开宏来看到这一点：

```
 ELISP> (print (macroexpand-all '(haxe-define-images ("foo"))))
 (progn (defvar haxe-address-icon (find-image (quote ((:type png :file (concat haxe-images-dir "address.png"))))) nil)) 
```

这是行不通的，因为它`concat`在里面`quote`，所以没有被评估。你需要写这样的东西：

```
(defmacro haxe-define-images (images)
  (append
   '(progn)
   (loop for image in images
         collect
         `(defimage ,(intern (concat "haxe-" image "-icon"))
            ((:type png :file
                    ,(concat haxe-images-dir image ".png"))))))) 
```

（如果你真的打算延迟评估，`haxe-images-dir`那么宏需要比这更复杂，但我相信你可以从这里弄清楚。）

# c# - 如何在鼠标悬停和可点击区域的图像上创建热点？

> ID：13220979
> 
> 赞同：0
> 
> 时间：2012-11-04T17:24:05.150
> 
> 标签：c#, javascript, asp.net, sql, vb.net

我有一个场景，我想在图像上创建热点。我想让图像上的热点由用户创建。假设用户想在图像上创建矩形，然后他只需要用鼠标左键单击并创建矩形和这个矩形应该显示为可点击区域（热点。）。我需要它，因为我需要创建一个页面，用户可以在其中选择特定区域并且将来应该是可点击的。任何人都可以建议我的方式。

这是示例图像。我现在可以在图像上画线，但我想创建应该可以用鼠标点击的矩形。 ![在此处输入图像描述](../Images/3c3fd9949eb73a97bfee26198b9a8df5.png)

背景是图像，蓝色细线是用鼠标绘制的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T17:59:09.613

首先，您需要将图像包装到`relative`定位的`DIV`. 然后为图像添加`mousedown`事件监听器。在此处理程序中存储单击坐标并`mouseup`为图像添加侦听器。在此`mouseUp()`存储 mouseup 坐标，删除所有以前的处理程序并`DIV`为文档创建一个新的。然后为新添加`click`和`mouseover`事件监听器`DIV`，设置位置样式`absolute`，实际位置和大小，您可以根据存储的坐标计算。最后将新创建的附加`DIV`到图像包装器中。

您可以在文档中包含一个空元素，然后为 this创建新元素，而不是使用 a`DIV`作为热点。`MAP``AREA``MAP`

**编辑**

我真的不确定你需要什么，但是...

创建一个`DIV`in `mouseUpHandler()`：

```
var clickableDiv = imgWrapper.appendChild(document.createElement('DIV'));
clickableDiv.style.position = 'absolute';
clickableDiv.style.top = calculatedY;
clickableDiv.style.left = calculatedX;
clickableDiv.style.width = calculatedWidth;
clickableDiv.style.height = calculatedHeight;
clickableDiv.style.backGround = '#fff';
clickableDiv.style.opacity = '0.5';
clickableDiv.addEventListener('click', doSomethingOnClick, false); 
```

您可以根据需要自由设置样式`clickableDiv`，但需要`backGround`和`opacity`（也可以为 0）才能使`DIV`可点击。`doSomethingOnClick`是一个函数名，它处理对`clickableDiv`.

# c++ - 奇怪的语义错误

> ID：13220980
> 
> 赞同：10
> 
> 时间：2012-11-04T17:24:12.710
> 
> 标签：c++, emacs, cedet, emacs-semantic

我在新的 linux 主机上重新安装了 emacs 24.2.50，并基于[magnars](https://github.com/magnars/.emacs.d) emacs 配置启动了新的 dotEmacs 配置。由于我在之前的工作流程中使用 CEDET 取得了一些成功，因此我开始对其进行配置。但是，每当我加载 C++ 源文件时，都会出现一些奇怪的行为。

**[这部分已解决]**
正如预期的那样，语义解析所有包含的文件（并且在初始设置期间解析由**语义添加系统包含**变量指定的所有文件），但它会打印出如下错误消息：

`WARNING: semantic-find-file-noselect called for /usr/include/c++/4.7/vector while in set-auto-mode for /usr/include/c++/4.7/vector. You should call the responsible function into 'mode-local-init-hook'.`

在上面的示例中，为 STL 向量打印了错误，但为我正在访问的文件和任何后续包含的每个文件都打印了相应的错误消息。结果它需要很长时间才能完成，不幸的是，这个过程会重复任何类型，我打开一个新的缓冲区。

**[这个问题也解决了]**
此外，当我将点放在非 c 原始类型（即不是 int、double、float 等）之上而不是在modeline 错误消息，例如

`Idle Service Error semantic-idle-local-symbol-highlight-idle-function: "#<buffer DEPFETResolutionAnalysis.cc> - Wrong type argument: stringp, (((0) \"IndexMap\"))" Idle Service Error semantic-idle-summary-idle-function: "#<buffer DEPFETResolutionAnalysis.cc> - Wrong type argument: stringp, ((\"fXBetween\" 0 nil nil))"`

其中*DEPFETResolutionAnalysis.cc*是我当前正在编辑的文件和缓冲区，*IndexMap*和*fXBetween*是在我正在编辑的文件/我正在编辑的文件中包含的文件中定义的类型。

我没有测试 CEDET/semantic 的任何其他功能，因为这个问题很烦人。我的 cedet 配置可以在[这里](http://pastebin.com/GNMkSbFV)找到。

**编辑：**在 Alex Ott 的帮助下，我解决了第一个问题。这是由于我可怕的 cedet 初始化。有关配置 CEDET 的正确方法，请参阅他的第一个答案！
仍然存在问题`Idle Service Error`（启用时`global-semantic-idle-local-symbol-highlight-mode`，它会永久发生，不仅在检查点的类型定义时）。
还有一个*新*问题是如何**禁用站点级初始化文件**。

**EDIT2：**我已经`semantic-debug-idle-function`在出现问题的缓冲区中执行，它产生了 ~700kb [原文如此！] 输出。看起来它正在对数据容器执行一些操作，从外观上看，它包含有关已解析文件中定义的所有符号的信息。因为我解析了一个相当大的包（~20Mb 源文件），所以这个表相当大。语义可以处理这么大的数据库还是这是不可能的以及我的问题的原因？

**EDIT3：**删除`~/.semanticdb`并重新解析所有包含的内容就可以了。我仍然需要禁用站点级初始化文件，但由于这与 CEDET 无关，我将关闭此问题（与站点级初始化文件相关的问题可以在[此处](https://stackoverflow.com/questions/13233285/howto-disable-the-emacs-site-start-files-permanently)找到）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-04T18:32:46.210

您需要更改您的 init 文件，以便它只执行一次 CEDET 加载，而不是在将为每个 .h/.hpp/.c/.cpp 文件调用的钩子中。您可以更改[此配置](https://gist.github.com/3930120)作为基础，并在[以下文章](http://alexott.net/en/writings/emacs-devenv/EmacsCedet.html)中阅读更多内容。

您遇到的问题是因为 Semantic 试图分析头文件，当它试图打开它们时，它的初始化例程被再次调用，一次又一次......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T13:34:58.497

[第一个问题是通过正确配置 Alex Ott主页](http://alexott.net/en/writings/emacs-devenv/EmacsCedet.html)上描述的 CEDET 解决的。他的回答解决了第一个问题。他的答案中指定的配置文件是一个不错的配置的良好开端；我已经使用相同的方法来配置 CEDET 以满足我的需要。

当我将 CEDET 从 1.1 更新到集市（存储库）版本后，第二个问题就消失了，这在[此处](http://cedet.sourceforge.net/bzr-repo.shtml)和 Alex 的文章中进行了解释。另外，必须删除目录的内容`~/.semanticdb`（其中包含语义数据库并且我猜它已损坏）。

我要感谢 Alex Ott 的帮助，并在我寻求解决方案的过程中一直陪伴着我 :)

# php - 在 PHP 类中使用数组

> ID：13220982
> 
> 赞同：1
> 
> 时间：2012-11-04T17:24:15.527
> 
> 标签：php, class

我正在练习一些 PHP OOP，因此我正在创建一个类来创建一个简单的导航菜单（将来会扩展）现在我已经构建了这个类，它有点工作.. 有 1 个菜单项很难.. 我不知道怎么做在我的类中使用数组来使用类

```
<?php
$menu = new Navigation("Test", "mainmenu");

$menu->setMenuItem("home", "test");
echo $menu->display();

?> 
```

如您所见，我应该能够为每个菜单项提供 setMenuItem(); 方法。但由于它目前不使用数组，我只得到第一个值

类本身如下：

```
<?php
class Navigation implements navigationInterface {

    public $menu = null;
    public $name = null;
    public $klasse = null;

    public function __construct($name, $klasse) {

        $this->name = $name;
        $this->klasse = $klasse;

    }

    public function getName() {
        return $this->name;
    }

    public function getClass() {
        return $this->klasse;
    }

    public function setMenuItem($items) {
        $this->menuItem = $items;
    }

    public function getMenuItem() {
        return $this->menuItem;
    }

    public function display() {

        $menu = '<nav class="' . $this->getName() . '">';
        $menu .= '<li><a class="' . $this->getClass() . '" href="index.php?page=' . $this->getMenuItem() . '.php">' . $this->getMenuItem() . '</a></li>';
        $menu .= '</nav>';

        return $menu;

    }
}
?> 
```

谁能告诉我如何结合使用类中的数组和循环来创建具有所有给定值的菜单？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-04T17:53:49.753

```
<?php
class Navigation{

    public $menu = null;
    public $name = null;
    public $klasse = null;

    public function __construct($name, $klasse) {

        $this->name = $name;
        $this->klasse = $klasse;

    }

    public function getName() {
        return $this->name;
    }

    public function getClass() {
        return $this->klasse;
    }

    public function setMenuItem($items) {

        $this->menuItem = $items;
    }

    public function getMenuItem($menu) {
        return $menu;
    }

    public function display() {

        $menu = '<nav class="' . $this->getName() . '">';
        if(is_array($this->menuItem))
        {
        foreach($this->menuItem as $val)
        {
        $menu .= '<li><a class="' . $this->getClass() . '" href="index.php?page=' . $this->getMenuItem($val) . '.php">' . $this->getMenuItem($val) . '</a></li>';
        }
        }
        else{
            $menu .= '<li><a class="' . $this->getClass() . '" href="index.php?page=' . $this->getMenuItem($this->menuItem) . '.php">' . $this->getMenuItem($this->menuItem) . '</a></li>';

        }

        $menu .= '</nav>';

        return $menu;

    }
}
?>

<?php
$menu = new Navigation("Test", "mainmenu");

$menu_items=array("home","test");
$menu->setMenuItem($menu_items);

echo $menu->display();

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T17:31:26.127

您实际上有两种类型，而不是一种：

1.  `MenuItemList`
2.  `MenuItem`

将`MenuItemList`负责管理列表。它*可以在**内部*使用一个数组。在先前的答案中可以找到非常相似的代码示例：[*Array Object In Php*](https://stackoverflow.com/a/9727054/367456)。

其次，该`display()`方法不属于两者。相反，您应该使您的模板敏锐地知道如何输出菜单列表：

```
echo '<ul>';
foreach ($menu as $item) {
   echo '<li class="menutitem ', $item->getClass(), '"><a href="index.php?page=', ...;
}
echo '</ul>'; 
```

这也将允许您保留一些程序知识，这些知识通常更直接地使用模板，同时知道您的菜单模型可以正常工作并且被正确封装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T17:44:43.367

这样做：

```
<?php
class Navigation implements navigationInterface {

    public $menu = array();
    public $name = null;
    public $klasse = null;

    public function __construct($name, $klasse) {

        $this->name = $name;
        $this->klasse = $klasse;

    }

    public function getName() {
        return $this->name;
    }

    public function getClass() {
        return $this->klasse;
    }

    public function setMenuItem($name , $value) {
        $this->menu[$name] = $value;
    }

    public function getMenuItem($name) {
        return $this->menu[$name];
    }

    public function display() {

        if(!empty($this->menu)){

            $menu .= "<ul>";

            foreach($this->menu as $key => $value){
                $menu .= "<li><a href='".$value."'>$key</a></li>";
            }

            $menu .= "</ul>";
        }
        return $menu;
    }
}
?> 
```

我认为这就是你需要的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T17:29:50.263

在您的班级中名列前茅

```
$menuItems = array(); 
```

然后在`setMenuItem()`

```
function setMenuItem($name, $value)
{
  $this->menuItems[] = array($name, $value);
} 
```

然后

```
function display()
{
  // Your other code here
  foreach($this->menuItems as $item)
  {
    echo '<li><a href="'.$item[1].'">'.$item[0].'</a></li>';
  }
  // Your other code here
} 
```

希望有帮助。

**编辑：** 您可以更改它们的存储方式，并通过使用导航“名称”作为存储它的键来防止重复，但为了便于理解，我保持简单。

这是一个更高级的示例

```
function setMenuItem($name, $value)
{
  if(!in_array(array_keys($this->menuItems)), $name) {
    $this->menuItems[$name] = $value;
  } else {
    echo "That's already been added!"; //Handle this properly though
  }
} 
```

然后

```
function display()
{
      // Your other code here
      foreach($this->menuItems as $name=>$value)
      {
        echo '<li><a href="'.$value.'">'.$name.'</a></li>';
      }
      // Your other code here
} 
```

# html - 如何解析 HTML 中的表格？

> ID：13220988
> 
> 赞同：0
> 
> 时间：2012-11-04T17:25:08.363
> 
> 标签：html, objective-c, xcode, parsing, hpple

我正在尝试解析一个包含很多表格的 HTML 页面。我在网上搜索了如何使用 Objective C 解析 HTML 并找到了 hpple。我会寻找一个引导我的教程：

[http://www.raywenderlich.com/14172/how-to-parse-html-on-ios](http://www.raywenderlich.com/14172/how-to-parse-html-on-ios)

通过本教程，我尝试解析一些论坛新闻，其中包含来自该站点（希伯来语）的大量表格：[新闻论坛](http://rotter.net/cgi-bin/listforum.pl)

我试图解析新闻标题，但我不知道在我的代码中写什么。每次我尝试到达我得到的路径时，“节点为零。”

我最近尝试的代码是：

```
 NSURL *contributorsUrl = [NSURL URLWithString:@"http://rotter.net/cgi-bin/listforum.pl"];
NSData *contributorsHtmlData = [NSData dataWithContentsOfURL:contributorsUrl];

// 2
TFHpple *contributorsParser = [TFHpple hppleWithHTMLData:contributorsHtmlData];

// 3
NSString *contributorsXpathQueryString = @"//body/div/center/center/table[@cellspacing=0]/tbody/tr/td/table[@cellspacing=1]/tbody/tr[@bgcolor='#FDFDFD']/td[@align='right']/font[@class='text15bn']/font[@face='Arial']/a/b";
NSArray *contributorsNodes = [contributorsParser searchWithXPathQuery:contributorsXpathQueryString];

// 4
NSMutableArray *newContributors = [[NSMutableArray alloc] initWithCapacity:0];
for (TFHppleElement *element in contributorsNodes) {
    // 5
    Contributor *contributor = [[Contributor alloc] init];
    [newContributors addObject:contributor];

    // 6 
```

有人可以指导我获得头衔吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T18:09:01.990

不确定这是否适合您，但如果所需的表具有唯一的 id，您可以使用一种混乱的方法：将该 html 加载到 UIWebView 并通过[– stringByEvaluatingJavaScriptFromString:](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html#//apple_ref/occ/instm/UIWebView/stringByEvaluatingJavaScriptFromString%3a)获取内容：如下所示：

```
// desired table container's id is "msg"
NSString* value = [webView stringByEvaluatingJavaScriptFromString:@"document.getElementById('msg').innerHTML"]; 
```

# delphi - 在 Delphi 7 中通过 Internet 发送图片

> ID：13220990
> 
> 赞同：-4
> 
> 时间：2012-11-04T17:25:12.647
> 
> 标签：delphi, delphi-7

**理念**

我和一个朋友想和另一个朋友开个玩笑，并制作一个 delphi 应用程序，它可以截取我们朋友的屏幕截图，然后将其发送到我的计算机。

**问题**

问题是我和我的朋友不知道如何将图像发送到我的电脑。知道怎么做吗？

**我已经尝试过 GolezTrol 所说的**

这是代码（从第 27 行开始）

```
 procedure TForm1.Button1Click(Sender: TObject);
 var
   Params:  TIMultipartFormDataStream;
   Response1: TStringStream;
 begin
  try
    Params := TIMultipartFormDataStream.create;
    Response1 := TStringStream.Create;
    try
      Params.AddFile('file', 'C:\temp\YourTempImageName.jpg', 'image/jpg');
      IdHTTP1.Post('http://localhost/uploadimage.php', Params, Response1);
    finally
      Params.Free;
      Response1.Free;
    end;
end; 
```

（我正忙着让它工作。）

**额外信息** 重新考虑后，我真的看不到有趣的一面了。顺便说一句，我不会强化我朋友的身份。在告诉他我们想做什么之后，他挑战我们尝试（他打赌我们做不到）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-04T19:05:32.330

通过 HTTP，您可以在 Multipart Formdata 发布请求中发送图像。这与通过 HTML 表单上传图像时的请求相同。服务器不会知道区别。:)

上传非常容易。您创建了一个 MultipartFormDataStream，它具有添加文件的方法。然后，您可以使用 TIdHTTP 发送它。您可以在运行时创建它，但如果您安装了 Indy 组件，您也可以将其放在表单上。我做到了，并将其保留为默认名称`IdHTTP1`。

在示例中，我从磁盘加载文件，但也可以直接从流加载它。我还没有尝试过，但我认为加载一个临时文件就可以了。

客户端的Delphi代码：

```
var
  Params: TIdMultipartFormDataStream;
  Response: TStringStream;
begin
  try
    Params := TIdMultipartFormDataStream.Create;
    Response := TStringStream.Create;
    try
      Params.AddFile('file', 'C:\temp\YourTempImageName.jpg', 'image/jpg');

      // Substiture real url below.
      IdHTTP1.Post('http://localhost/uploadimage.php', Params, Response);

      // For testing purposes, you may show the response.
      //Memo1.Text := Response.DataString;
    finally
      // Free resources. Important if you want your app to keep running
      // without being noticed.
      Params.Free;
      Response.Free;
    end;
  except
    // Log exception for testing. Don't let it show to the 'friend'.
    //on e: Exception d
    //  Memo1.Lines.Add(e.Message);
  end;
end; 
```

对于服务器，您可以使用任何允许保存文件的启用 PHP 的服务器。我在下面包含了最小的示例。当然你也可以用其他语言编写服务器软件，包括 Delphi。但是如果你用 Delphi 编写它，你将需要一个始终可用的 Windows 服务器。

服务器的示例 PHP 代码：

```
<?php
if (isset($_FILES['file']) && $_FILES['file']['error'] == UPLOAD_ERR_OK)
{
  // Choose your proper directory here.
  $target = 'C:\\ff\\uploads\\' . time();
  $result = move_uploaded_file($_FILES['file']['tmp_name'], $target);
  if (!$result) {
    echo 'Cannot copy'; // This response is sent to the client.
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T18:56:02.860

如果您有一些可通过 FTP 访问的网络空间，则可以使用 IdFTP 或 WinInet FTP 功能。（我在这里使用 ADSL 连接获得了 100MB 的免费网络空间。）

# node.js - 数据过滤的最佳方法

> ID：13220991
> 
> 赞同：0
> 
> 时间：2012-11-04T17:25:13.777
> 
> 标签：node.js, knockout.js

我正在构建一个小型图书馆应用程序，以拥有我的编程电子书的可视化目录。到目前为止，我已将一些电子书信息添加到 BooksViewModel.js 文件中的 ko.observableArray 中。稍后，我将使用保存在 MongooseDB 中的所有数据来实现 NodeJS 应用程序并从那里访问它们，但现在，我只是直接从 Knockout.js 进行试验。

默认情况下，我的图书馆显示我添加的所有书籍，杂乱无章，所以我期待按语言实现“类别”。每个书籍对象都包含一个语言属性。我想过滤按语言显示的书籍，但我对如何做到这一点的最佳方式有点困惑。

阵列上的书籍没有组织，它们都被丢弃在那里..一些关于javascript，其他C等的讨论。起初我想为每种语言创建一个单独的数组，然后在 ViewModel 中实现一个方法来选择您请求的语言的对应数组。

稍后，我将实现一个 NodeJS API，以通过语言获取它们，让我们说：

```
GET /languages/C // will get a json corresponding all the books that talks about C 
```

ViewModel 可以包含一个方法：

```
self.findByLanguage = function(lang) {
   self.books = // GET /languages/:lang
}; 
```

但这每次都会查询数据库。我想最好先加载整本书的json，将它们全部保存到客户端的一个数组中，然后过滤它们。这样只会提出一个请求。我可以有一个包含所有书籍的全局数组，然后使用 ko.utils.ArrayFilter 实现过滤器。

你们认为最好的方法是什么？也许有更好的方法。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T01:10:27.110

如果“我的编程电子书”意味着此应用程序仅供您使用，那么查询所有书籍和仅查询选定的少数书籍之间存在细微差别，因为在这两种情况下，数据库负载通常接近于零。书的数量可能是几百本。

但是等等，一次加载它们的实际好处是什么？

**在客户端存储整个列表的好处**

*   如果您一直在查看大多数类别，那么只需更改类别即可为您节省几毫秒的数据库负载和所有带宽。

**缺点**

*   带宽使用很糟糕，初始页面加载速度较慢，给您大量不需要或不需要的书籍。
*   您正在使用的数据库系统将速度作为重要的优化因素。`language`无论如何，添加索引和查询应该立即完成。在您使用数组作为数据源时，与“仅发送整个数组”相比，这可能不会显示。
*   在多个窗口/浏览器/多台电脑上打开页面需要您同步所有客户端的所有更改。如果您不这样做，您将拥有旧对象，直到您重新加载页面，如果拥有列表客户端，这正是您应该避免的。

如果您打算在本地计算机或本地网络中运行它，速度应该是一个小问题，那么为什么不让数据库来完成这项工作呢？如果您不是并且速度是一个问题，我个人会重视“我可以非常快地加载类别 X”而不是“初始页面加载很慢，但一旦加载所有内容就很快”。