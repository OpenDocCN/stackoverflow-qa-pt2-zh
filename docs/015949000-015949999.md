# StackOverflow 问答 15949000-15949999

# compiler-construction - SASS 或 LESS 包装

> ID：15949004
> 
> 赞同：1
> 
> 时间：2013-04-11T12:38:02.793
> 
> 标签：compiler-construction, sass, less

我希望能够从不同的目录导入我的 scss 或更少的文件（两种语言都无关紧要）。我的电脑上的目录是这样的：

```
apps/myapp/includes/css/ 
```

&

```
framework/2.3/lib/framework/2.3/css 
```

我试图避免 .scss 或 .less 文件中的相对路径来导入它们。我正在尝试找到一个程序或一种我猜想打包文件的方式，而不必`@import`在 scss 或 less 文件上使用相对路径引用。有类似的东西还是我需要考虑另一个文件结构？文件结构的重点是每个应用程序或网站都有一个库的参考点，而不是保留每个应用程序中的所有文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T15:41:48.470

Compass for Sass 提供了将库捆绑到*扩展*中以便于重用的能力。他们在他们的网站上有一个关于如何构建扩展的教程： http: [//compass-style.org/help/tutorials/extensions/](http://compass-style.org/help/tutorials/extensions/)

在项目中使用扩展比创建扩展要简单得多。

在项目的 config.rb 中添加对扩展的引用：

```
require 'myextension' 
```

如果您遵循推荐的 Sass 文件命名约定，则可以将它们导入任何 Sass 文件，如下所示：

```
@import 'myextension';
@import 'myextension/specific/file'; 
```

一些现有的指南针扩展：

*   [时髦的按钮](https://github.com/jhardy/Sassy-Buttons)
*   [配色师](https://github.com/Team-Sass/color-schemer)
*   [模块化规模](https://github.com/Team-Sass/modular-scale)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T15:15:33.390

[Codekit](http://incident57.com/codekit/) for Mac 有一个名为 Frameworks 的功能：

> 只需在您的驱动器上保留一份文件副本，即可在多个项目中轻松使用它，而无需担心文件路径。不再将文件复制到每个新站点。

但是，如果您使用 Compass（我相信即使使用 Codekit），您应该遵循 cimmanon 的建议并使用 Compass[扩展](http://compass-style.org/help/tutorials/extensions/)。这是我推荐的解决方案。

# c# - 用户控件内的自定义对话框

> ID：15949006
> 
> 赞同：1
> 
> 时间：2013-04-11T12:38:09.787
> 
> 标签：c#, wpf, silverlight, xaml

我们有一个自定义对话框（源自`ContentControl`），它往往位于`UserControl`. Dialog 本身具有可以关闭的功能。经检查，关闭功能似乎只关闭 Dialog 本身，而不是其父容器。

```
public void CloseDialog()
{
    Visibility = Visibility.Collapsed;
    if (null != DialogClosedEvent)
        DialogClosedEvent();
} 
```

我们的用户控件通常是这样创建的

```
<UserControl>
    <toolkit:OurDialog ... />
</UserControl> 
```

现在这意味着当我们关闭一个对话框时，我们会留下许多`UserControl`没有任何东西的 s。这一切都如您所料 - 就能够查看和关闭对话框而言 - 但这会影响性能而留下空的 UserControls 吗？如果是这样，这个问题的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:47:27.957

由于您稍后将再次“打开”这些对话框，因此有时您需要保持原样。我不希望您会看到任何真正的性能问题。我的意思是“关闭”它和“打开”它并没有真正为标记添加任何内容。你只是让它不可见。所以你并没有真正在运行时增殖它们。

简而言之，看看`Window`加载时的内存占用情况，如果你对此感到满意，那你就很好 - 通过使这些对话框可见与不可见，它不会改变。

# asp.net-mvc - Breeze.js 失败，无法加载文件或程序集 System.Web.Http.OData，版本 = 4.0.0.0

> ID：15949016
> 
> 赞同：5
> 
> 时间：2013-04-11T12:38:27.173
> 
> 标签：asp.net-mvc, asp.net-web-api, odata, breeze

我正在尝试 Breeze.Js 并且所有内容都可以编译，并且我有一个微风装饰的控制器，但是当我尝试访问数据时，我收到一个关于微风.js 引用的程序集的错误，但我在任何地方都找不到。

有问题的程序集是 System.Web.Http.OData, Version=4.0.0.0

我发现关于这个命名空间的唯一地方是[https://github.com/ASP-NET-MVC/aspnetwebstack/tree/master/src/System.Web.Http.OData](https://github.com/ASP-NET-MVC/aspnetwebstack/tree/master/src/System.Web.Http.OData)但我找不到任何 nuget 包它。

有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-11T14:32:01.040

[在http://nuget.org/packages/Microsoft.AspNet.WebApi.OData/](http://nuget.org/packages/Microsoft.AspNet.WebApi.OData/)查看 nuget 包。

或者从您的包管理器控制台执行此操作。

```
Install-Package Microsoft.AspNet.WebApi.OData 
```

# android - Android：从 ListView 中删除项目

> ID：15949017
> 
> 赞同：0
> 
> 时间：2013-04-11T12:38:28.330
> 
> 标签：android, listview, adapter

我从 ListView 中删除项目时遇到问题。

我正在使用 BaseExpandableListAdapter 的子类。

问题是当我删除一个项目时，我更改了基础数据，之后我调用了 notifyDataSetChanged。一切似乎都很好。但是 ListView 的刷新不会立即发生。因此，如果有人继续检查/取消检查我的某些项目，他们将指向适配器中不再存在的数据（但它们仍显示在 ListView 中）。

**示例**：

假设我有一个 ListView，适配器中有 3 个视图和 3 个项目（1、2、3）：

1.  我选择第 3 项并按删除。现在它们是适配器中的 3 个视图和 2 个项目

2.  调用 notifyDataSetChanged（注意 ListView 仍然有 3 个视图，因为它没有时间刷新）

3.  我继续选择第三个项目，它将向我的适配器查询不再存在的项目

我的问题是我该如何处理这种情况？这似乎是调用 notifyDataSetChanged 和刷新 ListView 之间的间隔，在该间隔内，我们需要检查适配器中收到的所有请求是否仍然有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:21:49.850

尝试删除您的列表项，例如。

```
filelist.remove("your selected item position".intValue()); 
```

这可能会解决您的问题。

# qt - 过滤鼠标移动事件并再次发送

> ID：15949018
> 
> 赞同：0
> 
> 时间：2013-04-11T12:38:35.147
> 
> 标签：qt, mouseevent, simulate

我的程序在 Qt 上运行，我有一个问题，网站上有免费的答案。我们的产品需要在用户移动鼠标的同时更新图像，但是更新图像非常耗时。如果用户快速移动鼠标，系统会产生大量的鼠标移动事件，最终导致后台进程阻塞。因此，我们需要过滤掉部分事件。我通过在 QApplication 中插入事件过滤器来过滤鼠标移动事件：

```
qApp->insertEventFilter(this) 
```

一旦我捕捉到鼠标事件，我将存储 QMouseEvent 和 QObject 的指针，以及活动的 QTimer。其他 mouseMouseEvent 将可以在超时之前覆盖它们。超时后，将发布最后一个事件。我不能使用：

```
QApplication::sendEvent(XX) or postEvent(xx) 
```

因为它会再次被我的事件过滤器捕获。我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:42:57.463

不要过滤事件。取而代之的是，更改负责生成数据的后台工作人员，以确保您不会将时间花在不需要的东西上。

# erlang - 添加新属性后，名册上的流程订阅变得混乱 Ejabbered

> ID：15949019
> 
> 赞同：1
> 
> 时间：2013-04-11T12:38:43.233
> 
> 标签：erlang, xmpp, ejabberd, instant-messaging

**向 mod_roster_odbc.erl 添加新属性后，订阅过程出现问题**

这显然需要我更改表 rosterusers 为记录添加一个新列，以及该模块的 odbc_queries 中的查询 get_roster (s)。然后在模块 mod_roster_odbc 中，我必须扩展诸如 process_iq（get 和 set(s)）方法和其他方法，例如 record_to_string、raw_to_record、process_item_attrs 和 get_subscription_lists，并在设置每个时对要初始化的新属性的挂起查询名册的元素

我已经测试了我对设置名册的每个元素并将其正确保存到数据库的更改，进入名册也是如此，并且新的属性/记录就像预期的那样添加。

现在，我的问题是我破坏了客户端的订阅部分。**客户端逻辑订阅名册的每个元素，在此更改之前，我能够在两个在线联系人之间自动订阅。据我了解，用户 A 在其名册中设置用户 B 并订阅，然后服务器通过此请求向用户 B 发送存在，以便用户 B 订阅回用户 A，用户最终将它们订阅为 "Both"**。这在我更改服务器后没有发生。

目前，用户 A 能够将用户 B 设置为其名册，但它确实显示为离线，我可以看到来自名册用户的订阅是“无”，基本上一个人在名册上，但他们没有设法订阅或看到每个其他在线。直到用户 A 向用户 B 发送消息订阅得到处理并且两者都相互订阅。

现在，我想避免提供我的代码更改，因为我确实要求提示以了解我可能在服务器端破坏了这个逻辑的地方。如此微小的变化会破坏存在的一部分......

# iphone - 如何在 iOS 应用中使用本地化？

> ID：15949022
> 
> 赞同：0
> 
> 时间：2013-04-11T12:38:52.563
> 
> 标签：iphone, objective-c, xcode

我正在创建一个 iOS 应用程序，用户可以在其中选择设置他们的首选语言。我必须根据用户选择的语言显示所有标签标题/文本等。到目前为止，我知道我们可以`Localizable.strings`通过添加多个语言文件来使用文件来做到这一点，并且应用程序将根据用户在 iPhone 的语言设置中选择的语言自动本地化。但是，我的要求是：我必须提供在应用程序中选择语言的选项。并且基于这种语言，我必须以该特定语言更改标签标题等，而不管用户在他/她的 iPhone 设置中选择了什么语言。任何人都可以给出一些想法如何实现这一目标？

谢谢。

# vba - 在任务栏中将 Excel 用户窗体显示为按钮

> ID：15949023
> 
> 赞同：6
> 
> 时间：2013-04-11T12:38:52.963
> 
> 标签：vba, excel

我想隐藏任务栏中的 Excel 按钮并为我的用户窗体显示一个单独的按钮，这样它就好像一个应用程序本身。我知道这已经涵盖了很多，但我遇到了一个特定问题：我的代码在我单步执行时工作正常，但如果我让它正常运行就不行。这是我放在 Userform1 的类模块中的代码：

```
Option Explicit

Private Declare Function GetWindowLong _
    Lib "user32" _
        Alias "GetWindowLongA" ( _
            ByVal hWnd As Long, _
            ByVal nIndex As Long) _
As Long

Private Declare Function SetWindowLong _
    Lib "user32" _
        Alias "SetWindowLongA" ( _
            ByVal hWnd As Long, _
            ByVal nIndex As Long, _
            ByVal dwNewLong As Long) _
As Long

Private Declare Function DrawMenuBar _
    Lib "user32" ( _
        ByVal hWnd As Long) _
As Long

Private Declare Function FindWindowA _
    Lib "user32" ( _
        ByVal lpClassName As String, _
        ByVal lpWindowName As String) _
As Long

Private Const GWL_EXSTYLE = (-20)
Private Const GWL_STYLE As Long = (-16)
Private Const WS_EX_APPWINDOW = &H40000
Private Const WS_SYSMENU As Long = &H80000
Private Const WS_MINIMIZEBOX As Long = &H20000
Private Const WS_MAXIMIZEBOX As Long = &H10000

Private Sub UserForm_Activate()

Dim lFrmWndHdl As Long
Dim lStyle As Long

lFrmWndHdl = FindWindowA(vbNullString, Me.Caption)
lStyle = GetWindowLong(lFrmWndHdl, GWL_STYLE)
lStyle = lStyle Or WS_SYSMENU
lStyle = lStyle Or WS_MINIMIZEBOX
lStyle = lStyle Or WS_MAXIMIZEBOX
SetWindowLong lFrmWndHdl, GWL_STYLE, (lStyle)
lStyle = GetWindowLong(lFrmWndHdl, GWL_EXSTYLE)
lStyle = lStyle Or WS_EX_APPWINDOW
SetWindowLong lFrmWndHdl, GWL_EXSTYLE, lStyle
DrawMenuBar lFrmWndHdl
AppActivate ("Microsoft Excel")
ThisWorkbook.Application.Visible = False

End Sub 
```

单步执行代码，当我进入倒数第二行 AppActivate 时，任务栏中会出现一个单独的按钮，最后一行隐藏了任务栏中 Excel 工作簿的原始按钮。然后我只剩下一个用户表单，可以像任何普通应用程序一样最大化或最小化到任务栏。问题是如果我通过代码加载用户表单，则用户表单的单独按钮不会出现在任务栏中，因此任务栏中不会显示 Excel 按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-16T09:43:29.490

回答我自己的问题：问题不在于我上面发布的代码，而在于加载用户表单的方式。它应该被加载为无模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-11T00:41:24.640

只需将以下代码放入您的主 UserForm_Initialize 子程序中，它将最小化 Excel 应用程序窗口，同时让您的表单在桌面上保持打开状态。

```
Private Sub minimizeWindow()
  With Application
    .WindowState = xlMinimized
  End With
End sub 
```

# java - 在 Java 中，何时为不同的工作编写单独的方法 - 最佳实践？

> ID：15949024
> 
> 赞同：0
> 
> 时间：2013-04-11T12:38:55.820
> 
> 标签：java

我写了一个小[程序](http://writtingplugin.blogspot.de/#!/2013/04/checking-ipv4-and-ipv6-addresses-with.html)来验证 IP 地址，尤其是。在将 IP 地址检查器传递给 IP 地址检查器之前，剥离一些元数据，例如 IP v4 地址的范围和网络掩码。

在剥离 IP 地址的网络掩码时，我需要生成的 IP 地址（我称其为基本 IP 地址）和单独变量中的网络掩码，以进行进一步验证。

我想知道我在 cutOffNetMask 方法中的做法是否可以，或者我是否应该拆分工作

1.  提取基础ip
2.  提取网络掩码

分成不同的方法？

我设置`private Integer netMask;`ìn the cutOffNetMask 方法的方式是最先进的还是优雅的方式看起来如何？

这是片段：

```
public class IPAddress {

     private String base;
     private Integer netMask;
     private boolean ipRangeValid;
     private boolean netMaskValid;

 public IPAddress(String value){
     ipAddress = value;
     base = ipAddress;
     base.replace(" ","");

     if(isIPv6Address(base) == false){

       if(hasNetMask(base) == true){
          base = cutOffNetMask(base);
       }

       if(hasIPRange(base) == true){
          base = stripOffIPRange(base);
          ipRangeValid = ipRangeValid(octet1, octet2, octet3, octet4);
       } else {
            ipRangeValid = true;
       }
     }
 }

 private static boolean hasNetMask(String base){
     return (base.indexOf("/") != -1);
 }

  private static String cutOffNetMask(String base){
      netMask = base.substring(base.indexOf("/") + 1);
      return base.replace(netMask, "");
  }

  private String stripOffIPRange(String base){
      String[] octets = base.split("\\.");
      base = "";

      octet1 = new IPOctet(octets[0]);
      base = base + (octet1.getBase() + ".");

      octet2 = new IPOctet(octets[1]);
      base = base + (octet2.getBase() + ".");

      octet3 = new IPOctet(octets[2]);
      base = base + (octet3.getBase() + ".");

      octet4 = new IPOctet(octets[3]);
      base = base + (octet4.getBase());

      return base;
  } 
```

# amazon-web-services - Amazon Web Service RDS-EC2 交互

> ID：15949033
> 
> 赞同：0
> 
> 时间：2013-04-11T12:39:42.597
> 
> 标签：amazon-web-services, amazon-ec2, amazon-rds

我对 AWS 很陌生。

我有一个在 Tomcat 上运行 Java Web 应用程序的 EC2 实例，我需要将它连接到一个 Oracle RDS 实例。这些实例位于同一区域。

*   与两个实例之间的通信相关的性能是什么？如果两个实例都在我的家庭局域网中运行，我会看到它们是否相同？
*   RDS 实例的安全性如何？如果我在安全组中打开 1521 端口（允许访问 EC2 实例），那么 db 实例会暴露在公共网络中吗？

您认为在这种情况下使用 VPC 会更好吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:44:57.767

具体的测量我没有做，但是RDS和EC2的连接速度应该很好。只需确保将机器设置在同一可用区中即可。

关于安全性，您还可以指定应该对特定 EC2 组开放对您的 RDS 机器的访问，因此通常该端口不会公开开放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:20:57.237

P1) 确保 EC2 和 RDS 在同一个 AZ

P2) 确保为它们之间的 NW 带宽使用更大的实例类型

P3) 如果您的应用需要性能，请将 PIOPS 添加到 RDS

# instagram - 来自媒体 ID 的 Instagram max_tag_id？

> ID：15949034
> 
> 赞同：1
> 
> 时间：2013-04-11T12:39:43.670
> 
> 标签：instagram

有没有办法从 Instagram Api 分页中的媒体 ID “计算” max_tag_id 而无需从 /media/recent 查询中获取？

或者任何人都可以更准确地解释 max_tag_id 是什么或它来自哪里？

/b

# java - 如何将项目从线程添加到列表并保持添加顺序？

> ID：15949035
> 
> 赞同：2
> 
> 时间：2013-04-11T12:39:44.807
> 
> 标签：java, android, multithreading

我正在尝试在列表中添加一些项目并保持添加顺序。问题是添加部分是在一个线程中完成的，因为我需要从数据库中获取一些详细信息，将它们放在一个
项目中并将其添加到列表中。

```
public void addNewItem(Step item){

    Thread t = new Thread(new Runnable(){
        public void run() {
            item.setDetails(db.getStepDetails(step.getId()));
            add(item);
        }
    });

    t.start();
} 
```

该`add`方法如下所示：

```
private void add(Step step){
    mitems.add(step);
} 
```

如果我做类似的事情

```
 addNewItem(stepA);
 addNewItem(stepB); 
```

如果第一次调用花费太多时间，第二项将首先添加到我的列表中。

您知道如何在继续在我的列表中添加任何其他项目之前等待操作完成吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:18:42.763

[线程#join](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#join%28%29)

等待这个线程死掉。

希望这会有所帮助，亚龙

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:56:25.487

您可以改用字典：

```
Dictionary mitems = new Hashtable(); 
```

和

```
mitems.put("1", item); 
```

那时的关键就是秩序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T12:47:45.307

您可以添加同步块或使用 ReentrantLock。

```
Thread t = new Thread(new Runnable(){
    public void run() {
        synchronized(someSafeVar) {
            item.setDetails(db.getStepDetails(step.getId()));
            add(item);
        }
    }
}); 
```

此外，如果只是“添加”方法需要时间，则只能同步该方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T12:48:04.003

如果您在设置详细信息**之前**将项目添加到列表中，则可以保留项目顺序。然后您可以等待所有以下操作，直到设置项目的初始化标志：

```
mitems.add(stepA);
mitems.add(stepB)

[...]

ThreadGroup group = new ThreadGroup("GetStepDetailsGroup");

for(Step step : mitems)
{
    Thread thread = new Thread(group, new Runnable(){
        public void run() {
            item.setDetails(db.getStepDetails(step.getId()));
        }
    });

    thread.start();
}

while(group.activeCount() > 0) {
    try {
        Thread.sleep(50);
    } catch(InteruptedExpection e) {
        // ignored
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T12:51:44.903

您可以创建一个工作线程，并从队列中提供它，因此您将有一个添加到 mitems 的线程。

在这种情况下，您需要创建两个列表，并同步它们。

例如。，

```
List<Step> processingList = new ArrayList<Step>();
List<Step> mitems = new ArrayList<Step>();
public void addNewItem(Step item)
{
  syncrhonized(processingList)
  {
    processingList.add(item);
  }
} 
```

工作线程从 processingList 的前面获取项目，对它们进行处理，并在它们准备好时将它们添加到 mitem。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-11T13:27:46.083

在您的示例中，看起来将步骤添加到列表完全独立于从数据库中检索信息并填写步骤。

因此，您可以只使用一个线程将所有步骤放在一个列表中。然后，您将使用 Runnables 获取 DB 信息，每个 Step 一个，并在 Executor 中使用任意数量的线程执行这些 Runnables（同时仍然从多线程中获得加速）。

# c++ - sig_atomic_t 和 std::atomic<> 可以互换吗？

> ID：15949036
> 
> 赞同：13
> 
> 时间：2013-04-11T12:39:45.017
> 
> 标签：c++, signals, atomic

按照标题。我可以`std::atomic<>`在信号处理程序中使用还是`sig_atomic_t`提供其他编译器功能？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-11T12:44:54.883

n3376 1.9/6

> 当抽象机的处理因接收到信号而中断时，既不是
> 
> — 类型为 volatile std::sig_atomic_t nor
> 
> — 无锁原子对象 (29.4)
> 
> 在信号处理程序执行期间未指定，并且处理程序修改的任何不在这两个类别中的任何一个对象的值都将变为未定义。

无锁 29.4/1,2

> ATOMIC_..._LOCK_FREE 宏指示相应原子类型的无锁属性，有符号和无符号变体组合在一起。这些属性也适用于原子模板的相应（部分）特化。值 0 表示这些类型从不无锁。值 1 表示这些类型有时是无锁的。值 2 表示类型始终是无锁的。
> 
> 函数**atomic_is_lock_free** (29.6) 指示对象是否是无锁的。在任何给定的程序执行中，无锁查询的结果对于所有相同类型的指针都应该是一致的。

# mysql - 错误代码：1406。列的数据太长 - MySQL

> ID：15949038
> 
> 赞同：28
> 
> 时间：2013-04-11T12:39:50.033
> 
> 标签：mysql, sql, sql-server

错误代码：1406。列的数据太长

```
CREATE  TABLE `TEST` 
(

  `idTEST` INT NOT NULL ,

  `TESTcol` VARCHAR(45) NULL ,

  PRIMARY KEY (`idTEST`) 
); 
```

现在`Insert`一些值

```
INSERT INTO TEST
VALUES
(
    1,
    'Vikas'
)

select 

SELECT * FROM TEST; 
```

插入记录多于`length`

```
INSERT INTO TEST
VALUES
(
    2,
    'Vikas Kumar Gupta Kratika Shukla Kritika Shukla'
) 
```

如果`select`我们`length`

```
SELECT LENGTH('Vikas Kumar Gupta Kratika Shukla Kritika Shukla')

 '47' 
```

它显示错误消息

**错误代码：1406。列的数据太长**

但我的期望是，我想在 Table 中插入至少前 45 个字符

如果问题不清楚，请告诉我。

我知道这个错误的原因。我正在尝试插入超过数据类型长度的值。

我想要 MySQL 中的解决方案，因为它可以在`MS SQL`. 所以我希望它也可以在**MySQL**中。

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-04-11T12:56:31.837

MySQL 将截断任何超过指定列宽的插入值。

要做到这一点而不会出错，请尝试将您切换`SQL mode`为不使用`STRICT`.

[Mysql参考手册](https://dev.mysql.com/doc/en/sql-mode.html)

* * *

## 编辑：

改变模式

这可以通过两种方式完成：

1.  打开MySQL 安装目录中的`my.ini`(Windows) 或(Unix) 文件，并查找文本“sql-mode”。`my.cnf`

寻找：

代码：

```
# Set the SQL mode to strict 
sql-mode="STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION" 
```

用。。。来代替：

代码：

```
# Set the SQL mode to strict 
sql-mode="NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION" 
```

或者

2.  您可以在数据库管理工具中运行 SQL 查询，例如 phpMyAdmin：

代码：

```
SET @@global.sql_mode= ''; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-04-22T09:58:10.967

这最近发生在我身上。我完全迁移到 MySQL 5.7，一切都在默认配置中。

之前的所有答案都已经很清楚了，我只想补充一些东西。

这个 1406 错误也可能发生在您的函数/过程中，而不仅仅是表的列长度。

就我而言，我使用 IN 参数 varchar(16) 触发了哪个调用过程，但收到了 32 个长度值。

我希望这可以帮助有类似问题的人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-27T12:23:46.743

我认为关闭 STRICT 模式不是一个好的选择，因为应用程序可能会开始丢失用户输入的数据。

如果您从应用程序接收到 TESTcol 的值，则可以添加模型验证，例如在 Rails 中

```
validates :TESTcol, length: { maximum: 45 } 
```

如果您使用 SQL 脚本中的值进行操作，您可以使用[SUBSTRING](http://www.w3resource.com/mysql/string-functions/mysql-substring-function.php)命令截断字符串

```
INSERT INTO TEST
VALUES
(
    1,
    SUBSTRING('Vikas Kumar Gupta Kratika Shukla Kritika Shukla', 0, 45)
); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-09-03T17:58:26.667

这是我在 ubuntu 中使用的一个步骤。它将允许您从输入中插入超过 45 个字符，但 MySQL 会将您的文本剪切为 45 个字符以插入数据库。

1.  运行命令

    > 须藤纳米/etc/mysql/my.cnf

2.  然后粘贴这段代码

    > [mysqld] sql-mode="NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION"

3.  重启 MySQL

    > sudo 服务 mysql 重启；

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-09-23T10:01:35.923

除了上面给出的答案之外，我只想补充一点，在导入带有不正确行终止字符的数据时也会发生此错误。

例如，我在 windows 中以 csv 格式保存转储文件。然后在导入时

```
LOAD DATA INFILE '/path_to_csv_folder/db.csv' INTO TABLE table1
 FIELDS TERMINATED BY ',' 
 ENCLOSED BY '"'
 ESCAPED BY '"'
 LINES TERMINATED BY '\n'
IGNORE 1 LINES; 
```

Windows 将行尾保存为 \r\n（即 CF LF），而我使用的是 \n。我变得疯狂为什么 phpMyAdmin 能够导入文件而我不能。只有当我在 notepadd++ 中打开文件并看到文件末尾时，我才意识到 mysql 无法找到任何行终止符号（我猜它认为所有行都是该字段的输入；让它抱怨。）

无论如何，从 \n 到 \r\n; 它就像一个魅力。

```
LOAD DATA INFILE '/path_to_csv_folder/db.csv' INTO TABLE table1
 FIELDS TERMINATED BY ',' 
 ENCLOSED BY '"'
 ESCAPED BY '"'
 LINES TERMINATED BY '\r\n'
IGNORE 1 LINES; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-12-14T13:33:21.883

由于这个问题优先考虑搜索结果，我会很快说您可以在使用**substr()保存之前****预先截断**数据；然后转到更严重的问题，即保存大数据导致**错误代码：1406\. Data too long for column**。

 ****我不同意所有建议**关闭**严格模式的答案和评论。假设是，必须保存需要保存的数据 - 不能在没有通知的情况下随意神秘消失。建议使用良好的表结构，但如果您必须保存任何**大**数据，您可以将列的容量更改为：

```
TEXT: 65,535 characters - 64 KB
MEDIUMTEXT: 16,777,215 - 16 MB
LONGTEXT: 4,294,967,295 characters - 4 GB 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-23T14:49:58.507

尝试检查 SQL 数据库的限制。也许您超出了该行的字段限制。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-07T14:42:24.267

在 Django 中使用 imagefield 时遇到了同样的错误。 `post_picture = models.ImageField(upload_to='home2/khamulat/mydomain.com/static/assets/images/uploads/blog/%Y/%m/%d', height_field=None, default=None, width_field=None, max_length=None)`

我刚刚删除了上面显示的多余代码， `post_picture = models.ImageField(upload_to='images/uploads/blog/%Y/%m/%d', height_field=None, default=None, width_field=None, max_length=None)` 错误消失了

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-03-03T21:34:52.067

我首先使用主键集创建表结构然后尝试上传 csv 文件后出现此错误。我的 CSV 文件在主键列中有信息。这是从另一个 sql server 导出的。无论我如何尝试导出和导入，它都行不通。

我为解决这个问题所做的是将我的主键列放在我的数据库和我的 csv 中，上传，然后添加我的主键列。

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2017-06-18T12:38:59.810

转到您的模型并检查，因为您可能已经截断了该特定列的一些单词，例如。最大长度=“150”。****

# install4j - Mac OS X 上的 install4j 错误

> ID：15949043
> 
> 赞同：1
> 
> 时间：2013-04-11T12:39:56.117
> 
> 标签：install4j

我正在使用 install4j 为我的软件的新版本创建 Window 和 Mac OSX 安装程序。自从我上次分发以来唯一改变的是我的应用程序。我没有更改 install4j 中的任何启动器或媒体文件选项。构建安装程序后，Windows 安装程序运行良好。Mac OSX 安装程序会在某些机器上显示错误消息。消息是“您至少需要安装 1.7 Java 虚拟机...”但是，用户报告说他们已经安装了 1.7，但仍然收到错误消息。有谁知道是什么导致了这个错误？install4j 需要 1.7 才能在 Mac 上运行吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:51:42.957

编辑 Mac OS X 安装程序的媒体文件并转到“JRE”步骤。如果选择“已安装 OpenJDK JRE”，则需要 Java 7 及更高版本。上面的消息表明没有安装这样的 JRE。另外，请确保更新到最新版本的 install4j。

# android - 在设备上保存 css 以在离线模式下加载它

> ID：15949045
> 
> 赞同：0
> 
> 时间：2013-04-11T12:40:02.480
> 
> 标签：android, css, caching, webview, offline

我的应用程序中有很多 webViews，并希望将它们缓存在设备上。现在我将内容作为字符串保存在 SQLite 数据库中，如果没有互联网连接，我会从那里加载文本。但是如果有人清理设备上的缓存，图片和 css 就不再存在了。

有没有一种简单的方法来缓存页面上链接的所有图片和css？

css 的链接在我缓存的字符串中，因此我必须在保存之前操作此链接？但是怎么做？那么图片呢？

```
public class MainActivity extends Activity
{
    public WebView webView;
    public Activity activity;
    public Context context;
    public String htmlData;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        activity = this;
        context = this;
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        webView = (WebView) findViewById(R.id.webview);
        if (isOnline())
        {
            new CacheData().execute("");
        } else
        {
            WebCacheDataHandler wcdh = new WebCacheDataHandler(context);
            wcdh.open();
            String cache = wcdh.getContent();
            wcdh.close();
            webView.loadData(cache, "text/html", "UTF-8");
        }
    }

    public String getUrlContent(String url) throws IOException
    {
        URL oracle = new URL(url);
        URLConnection yc = oracle.openConnection();
        BufferedReader in = new BufferedReader(new InputStreamReader(yc.getInputStream()));
        String inputLine;
        StringBuilder sb = new StringBuilder();
        while ((inputLine = in.readLine()) != null)
        {
            sb.append(inputLine + "\n");
        }
        return sb.toString();
    }

    public boolean isOnline()
    {
        ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo netInfo = cm.getActiveNetworkInfo();
        if (netInfo != null && netInfo.isConnectedOrConnecting())
        {
            return true;
        }
        return false;
    }

    public class CacheData extends AsyncTask<String, Void, Boolean>
    {
        @Override
        protected Boolean doInBackground(String... string)
        {
            try
            {
                htmlData = getUrlContent("http://www.dumdidum.de/");
            } catch (IOException e)
            {
                e.printStackTrace();
            }
            return true;
        }

        @Override
        protected void onPostExecute(Boolean isModified)
        {
            webView.loadData(htmlData, "text/html", "UTF-8");
            // write data in Database
            WebCacheDataHandler wcdh = new WebCacheDataHandler(context);
            wcdh.open();
            wcdh.insertCache(htmlData);
            wcdh.close();
        }
    }
} 
```

但我不想使用 AppCache/Manifest ;)

# image - 将画布图像保存到服务器

> ID：15949046
> 
> 赞同：0
> 
> 时间：2013-04-11T12:40:03.303
> 
> 标签：image, canvas, save

我正在尝试将画布图像保存到网页服务器，以便 php 脚本可以将其发布到 web api。我一直在环顾四周，我看到的只是将它保存在用户的网络浏览器中，对新手有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:43:00.057

[您可以使用toDataURL](https://developer.mozilla.org/en-US/docs/DOM/HTMLCanvasElement)方法将画布的内容提取为数据 url ，然后使用 AJAX POST 将其上传到您的服务器。

[这个问题](https://stackoverflow.com/questions/13198131/how-to-save-a-html5-canvas-as-image-on-a-server)的公认答案应该会给你一些帮助。

# c++ - 未解析的外部符号，C++

> ID：15949055
> 
> 赞同：2
> 
> 时间：2013-04-11T12:40:44.590
> 
> 标签：c++, unresolved-external

尝试构建有关未解决的外部符号的项目时出现错误，但是我无法找出问题所在，有人有任何想法吗？谢谢

tball.cpp

```
#include "Tball.h"
#include <Windows.h>
using namespace std;

Tball::Tball(){

 Position = TVector(70,0,70);
 Verlocity = TVector(1,0,1);

} 
```

球体.h

```
#ifndef Tball_h
#define Tball_h

#include <iostream>
#include "mathex.h"
#include "tvector.h"

class Tball
{

public:

static TVector Position;
static TVector Verlocity;

Tball();
static void DrawBall(float x, float y, float z);
static TVector MoveBall();
static void init();
static int loadbitmap(char *filename);
static void SurfaceNormalVector();
static double Tball::collision();
static void Tball::pointz();

};

#endif 
```

错误：

```
1>------ Build started: Project: Breakout Complete, Configuration: Debug Win32 ------
1>  Tball.cpp
1>  Generating Code...
1>g:\work\second year\c++ breakout complete\breakout complete\tball.cpp(59): warning     C4715: 'Tball::MoveBall' : not all control paths return a value
1>  Skipping... (no relevant changes detected)
1>  Tvector.cpp
1>  TdisplayImp.cpp
1>  TBricks.cpp
1>Tball.obj : error LNK2001: unresolved external symbol "public: static class     TVector     Tball::Verlocity" (?Verlocity@Tball@@2VTVector@@A)
1>Tball.obj : error LNK2001: unresolved external symbol "public: static class     TVector     Tball::Position" (?Position@Tball@@2VTVector@@A)
1>G:\Work\Second year\C++ Breakout Complete\Debug\Breakout Complete.exe : fatal error     LNK1120: 2 unresolved externals
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

我尝试过的任何东西似乎都对我有用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-11T12:45:28.567

把它放到你的 cpp 中：

```
TVector Tball::Position(/* contructor params */);
TVector Tball::Verlocity(/* contructor params */); 
```

这为这些成员静态变量创造了“空间”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T12:45:59.057

我没有看到的定义

```
static TVector Position;
static TVector Verlocity; 
```

这只是声明。您需要在一个 .ccp 文件中使用一些构造函数（可能是默认构造函数）来定义它。静态成员不是每个对象的一部分，需要在对象构造函数以外的地方创建。

在你的情况下：

tball.cpp

```
#include "Tball.h"
#include <Windows.h>  // Why?
//using namespace std;    Why??

TVector Tball::Position(70,0,70);
TVector Tball::Verlocity(1,0,1);

Tball::Tball(){} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T12:48:23.800

很可能（因为没有发布错误）您错过了

```
static TVector Position;
static TVector Verlocity; 
```

要修复此添加

```
Tball::Position(70,0,70);
Tball::Verlocity(1,0,1); 
```

到您的 .cpp，并从构造函数中删除其初始化。

# c# - 资源中的 addFontFile

> ID：15949057
> 
> 赞同：12
> 
> 时间：2013-04-11T12:40:55.207
> 
> 标签：c#, winforms, visual-studio

我使用以下代码添加了自定义字体：

```
PrivateFontCollection pfc = new PrivateFontCollection();
pfc.AddFontFile("C:\\Path To\\YourFont.ttf");
label1.Font = new System.Drawing.Font(pfc.Families[0], 16, FontStyle.Regular); 
```

我在资源中添加了字体文件。如何`addFontFile`从资源中添加？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-05-14T15:08:24.793

```
private static void AddFontFromResource(PrivateFontCollection privateFontCollection, string fontResourceName)
{
    var fontBytes = GetFontResourceBytes(typeof (App).Assembly, fontResourceName);
    var fontData = Marshal.AllocCoTaskMem(fontBytes.Length);
    Marshal.Copy(fontBytes, 0, fontData, fontBytes.Length);
    privateFontCollection.AddMemoryFont(fontData, fontBytes.Length);
    // Marshal.FreeCoTaskMem(fontData);  Nasty bug alert, read the comment
}

private static byte[] GetFontResourceBytes(Assembly assembly, string fontResourceName)
{
    var resourceStream = assembly.GetManifestResourceStream(fontResourceName);
    if (resourceStream == null)
        throw new Exception(string.Format("Unable to find font '{0}' in embedded resources.", fontResourceName));
    var fontBytes = new byte[resourceStream.Length];
    resourceStream.Read(fontBytes, 0, (int)resourceStream.Length);
    resourceStream.Close();
    return fontBytes;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-11T12:42:47.433

如果您在资源中包含您的字体

试试这个功能

```
private void AddFontFromMemory()
{
    Stream fontStream = this.GetType().Assembly.GetManifestResourceStream("yourfont.ttf");

    byte[] fontdata = new byte[fontStream.Length];
    fontStream.Read(fontdata,0,(int)fontStream.Length);
    fontStream.Close();

    unsafe
    {
        fixed(byte * pFontData = fontdata)
        {
            pfc.AddMemoryFont((System.IntPtr)pFontData,fontdata.Length);
        }
    }
} 
```

**已编辑**

如何从程序集中加载资源：（YourNamespace.file.ttf）

```
Stream fontStream = Assembly.GetExecutingAssembly()
 .GetManifestResourceStream("WindowsFormsApplication1.SBADR.TTF"); 
```

我的解决方案资源管理器：

![在此处输入图像描述](https://i.stack.imgur.com/KSiFt.jpg)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-11-27T06:06:04.890

我就是这样做的。

首先获取您的 Font.ttf 文件并使用 Visual Studio，将文件拖放到根文件夹或资源文件夹。

在解决方案资源管理器中，右键单击该文件，然后单击属性。选择`Build Action = Content`。这将在项目属性 > 发布 > 应用程序文件下的应用程序文件中显示该文件。您将看到现在可以选择该文件（默认情况下它会自动包含在内）。

ClickOnce 现在会将文件复制到`StartupPath`

要使用它，请遵循以下示例：

```
PrivateFontCollection pfc = new PrivateFontCollection();

pfc.AddFontFile(Path.Combine(Application.StartupPath, "font_name.ttf"));

textBox1.Font = new Font(pfc.Families[0], 18, FontStyle.Regular); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-02-23T00:31:25.837

一句警告：如果您重视自己的理智，并且可以通过从文件中加载此字体来避免这种情况，那么**不要将它们打包为资源。**我现在告诉你：这不值得。¹

# 答案

```
[DllImport("gdi32.dll")]
private static extern IntPtr AddFontMemResourceEx(IntPtr pbFont, uint cbFont, IntPtr pdv, [In] ref uint pcFonts);
private static PrivateFontCollection pfc = new PrivateFontCollection();
private static uint cFonts = 0;
private static void AddFont(byte[] fontdata)
{ 
    int fontLength;  System.IntPtr dataPointer;

    //We are going to need a pointer to the font data, so we are generating it here
    dataPointer = Marshal.AllocCoTaskMem(fontdata.Length);

    //Copying the fontdata into the memory designated by the pointer
    Marshal.Copy(fontdata, 0, dataPointer, (int)fontdata.Length);

    // Register the font with the system.
    AddFontMemResourceEx(dataPointer, (uint)fontdata.Length, IntPtr.Zero, ref cFonts);

    //Keep track of how many fonts we've added.
    cFonts += 1;

    //Finally, we can actually add the font to our collection
    pfc.AddMemoryFont(dataPointer, (int)fontdata.Length);
} 
```

好的，这里有很多东西要解压，但是对于那些寻找复制/粘贴的人来说，如果没有下面的代码行，你会很痛苦。它必须在创建第一个表单之前和加载第一个字体之前运行：²

```
Application.SetCompatibleTextRenderingDefault(true); 
```

您可以通过简单地调用上述函数来使用此代码，如下所示：

```
AddFont(Properties.Resources.Roboto_Light); 
```

现在，如果你遇到这个问题，你需要处理的是 `AddFontMemResourceEx`函数，因为它真的很难正确使用。基本上这个函数的作用是跟踪内存中的字体。似乎`pfc.AddMemoryFont`实际上并没有增加`cFonts`，这导致它在第一个字体之后默默地无法正确加载每个字体。每次添加唯一字体系列时，此计数器必须加一。已经添加的字体系列的斜体和粗体变体不算作新系列，`cFonts`因此不应为这些增加。

理论上，for的返回值`AddFontMemResourceEx`是一个指针，它引用当前存储在内存中的字体数量的位置。获得实际数字似乎也是不可能的，这就是为什么我通过递增手动跟踪`cFonts.`如果您未能正确递增`cFonts`，那么此方法将静默失败。判断它失败的唯一方法是查看字体没有正确加载。

# 概括

这个答案很长。这是我发现的唯一可行的方法，但是您需要跳过这么多圈才能从资源中添加字体这一事实是荒谬的。我不明白为什么 AddFromMemory 函数如此损坏，我确信我一定做错了什么或误读了某些东西，但就是这样。这是很多工作，即使是现在，当涉及到字体的粗体和斜体变体时，它也不是最稳定的解决方案。如果你能解释这里发生了什么以及为什么这很奇怪，我很想听听。目前，这是我知道的唯一方法。

# 脚注

1：另外，它会破坏 WindowsFormsDesigner。在 WindowsFormsDesigner 环境中无法将 compatibleTextRenderingDefault 设置为 true，因此您将不断收到错误并且文本无法正确呈现。我通过将字体加载放在 try{}catch{} 中解决了这个问题，然后尝试从我自己的硬盘驱动器上的硬编码路径加载捕获。由于从文件加载不需要任何这些混乱，这就像一个魅力。

2：这绝对是荒谬的。理论上，`SetCompatibleTextRenderingDefault()`设置控件使用的**默认**文本渲染技术。它确定他们应该使用传统的文本呈现技术还是更新的文本呈现技术。由于（至少在我的情况下）字体甚至在第一个控件生成之前就被加载了，我完全不知道为什么这会影响任何事情。而且我知道字体不是旧字体或任何东西，因为如果我从文件（可能包含相同的数据）加载它们，则此设置无关紧要。这没有任何意义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-23T09:19:36.620

这会将字体加载到私有字体集合中，并避免使用上面的示例可能会看到的任何对象引用和内存运行时错误。

出于性能原因，我们只想加载一次字体，并在调用之间为多次绘制操作保留对字体的引用。诀窍是确保如果您保留对您创建的对象`PrivateFontCollection`的引用，则不会超出范围。`Font`

添加一些静态（共享）变量

```
Private Shared _sharedFont As Font
Private Shared _sharedFontCollection As Text.PrivateFontCollection
Private Shared _sharedFontSize As Integer 
```

然后声明这些函数

```
Private Function LoadSharedFont(ByVal fontName As String, ByVal size As Integer, ByVal style As FontStyle) As Font
    'Check if font name or size has changed, then clear cache
    If size <> _sharedFontSize Then _sharedFont = Nothing

    If _sharedFont Is Nothing Then

        'Make this shared so this variable doesnt go out of scope and is garbage collected
        _sharedFontCollection = New Text.PrivateFontCollection()
        _sharedFont = LoadFont(fontName, size, style)
        _sharedFontSize = size
    End If

    Return _sharedFont
End Function 
```

和

```
Private Function LoadFont(ByVal fontName As String, ByVal size As Integer, ByVal style As FontStyle) As Font
    Dim executingAssembly As System.Reflection.Assembly = Reflection.Assembly.GetCallingAssembly()
    Dim myNamespace As String = executingAssembly.GetName().Name.ToString()

    Try
        Using fontstream = executingAssembly.GetManifestResourceStream(myNamespace + "." + fontName)
            Dim fontBytes(CInt(fontstream.Length)) As Byte
            fontstream.Read(fontBytes, 0, CInt(fontstream.Length))

            Dim fontData As System.IntPtr = Marshal.AllocCoTaskMem(fontBytes.Length)
            Marshal.Copy(fontBytes, 0, fontData, fontBytes.Length)
            _sharedFontCollection.AddMemoryFont(fontData, fontBytes.Length)
            Marshal.FreeCoTaskMem(fontData)
        End Using

        Return New Font(_sharedFontCollection.Families(0), size, style)

    Catch ex As Exception
        'An unexpected error has occurred so return a default Font just in case.
        Return New Drawing.Font("Arial", size, FontStyle.Regular)
    End Try

End Function 
```

使用如下：

```
Dim font = LoadSharedFont("OpenSans-CondBold.ttf", 12, FontStyle.Bold) 
```

# mysql - mysql select查询获取FIND_IN_SET

> ID：15949064
> 
> 赞同：0
> 
> 时间：2013-04-11T12:41:10.253
> 
> 标签：mysql

以下查询效果很好。

```
SELECT FIND_IN_SET('b','a,b,c,d');
// output -> 2 
```

我需要获取具有多个选项的记录。举个例子，

```
SELECT FIND_IN_SET('b,c','a,b,c,d');
// output -> ?????????? 
```

请问我如何在“a，b，c，d”中使用多选选项“b，c”获取记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:48:12.283

mysql 函数`find_in_set`只能在一组字符串中搜索一个字符串。

第二个不是字符串集中的字符串

看看[这里](https://stackoverflow.com/questions/5015403/mysql-find-in-set-with-multiple-search-string)

编辑：

改变模式

这可以通过两种方式完成......

1- 在 MySQL 安装目录中打开您的“my.ini”文件，并查找文本“sql-mode”。

寻找：

代码：

# 将 SQL 模式设置为严格 sql-mode="STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION"

用。。。来代替：

代码：

# 将 SQL 模式设置为严格 sql-mode="NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION"

或者

2- 您可以在数据库管理工具中运行 SQL 查询，例如 phpMyAdmin：

代码：

```
 SET @@global.sql_mode= ''; 
```

# linq - 更新 EF 4.0 中的单个值

> ID：15949066
> 
> 赞同：0
> 
> 时间：2013-04-11T12:41:16.793
> 
> 标签：linq, entity-framework, asp.net-mvc-4, entity-framework-4

我正在开发 MVC 应用程序并使用 Entity Framework 4.0 进行数据库连接。在编辑记录时，我想更新表中的一些字段。编辑代码是

```
 [HttpPost]
    public ActionResult Edit(ProjectActivityDetail projectactivitydetail, FormCollection formcollection)
    {
        if (ModelState.IsValid)
        {
            string value = Request["ChkIntBool"];
            if (value.Substring(0, 4) == "true") { projectactivitydetail.IsApproved = 1; } else { projectactivitydetail.IsApproved = 0; }
            projectactivitydetail.ProjectActivityDID = long.Parse(Session["ProjectActivityDID"].ToString());
            projectactivitydetail.UpatedBy = long.Parse(Session["UserID"].ToString());
            projectactivitydetail.UpdatedON = System.DateTime.Now;
            db.Entry(projectactivitydetail).State = EntityState.Modified;
            db.SaveChanges();
            return RedirectToAction("Index");
        }
        ViewBag.FK_ProjectActivityID = new SelectList(db.ProjectActivityMasters, "ProjectActivityID", "ActivityName", projectactivitydetail.FK_ProjectActivityID);
        return View(projectactivitydetail);
    } 
```

我只想更新这些字段，但是当这执行我的其他字段更新为 null 时，有什么办法可以保持这些值不变并更新数据库表中的这些值。请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:55:00.373

看起来传递给服务调用的实体不完整。我的建议是找到现有实体并对其进行更改，而不是附加传入的实体：

```
[HttpPost]
public ActionResult Edit(ProjectActivityDetail projectactivitydetail, FormCollection formcollection)
{
    if (ModelState.IsValid)
    {
        //I'm assuming the PK of the entity is id so adjust for that
        var entity = db.Set<ProjectActivityDetail>().Find(projectactivitydetail.id);
        string value = Request["ChkIntBool"];
        entity.IsApproved = value.Substring(0, 4) == "true" ? 1 : 0;
        entity.ProjectActivityDID = long.Parse(Session["ProjectActivityDID"].ToString());
        entity.UpatedBy = long.Parse(Session["UserID"].ToString());
        entity.UpdatedON = System.DateTime.Now;
        db.Entry(entity).State = EntityState.Modified;
        db.SaveChanges();
        return RedirectToAction("Index");
    }
    ViewBag.FK_ProjectActivityID = new SelectList(db.ProjectActivityMasters, "ProjectActivityID", "ActivityName", projectactivitydetail.FK_ProjectActivityID);
    return View(projectactivitydetail);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:58:37.813

是的，有办法。将隐藏字段添加到您的视图中，其中包含您想要保留在模型上的数据，在这种情况下`ProjectActivityDetail`，这样属性将`projectactivitydetail`在模型绑定阶段绑定到变量。

假设您有一个名为的属性`CreatedOn`被设置为 null，您将在视图中添加：

```
@Html.HiddenFor(model => model.CreatedOn) 
```

然后，当您提交表单时，最初的值`CreatedOn`将绑定到属性 at`projectactivitydetail`并且您的模型将被很好地保存。您的字段正在更新为 null，因为模型绑定没有为它们找到任何值。

祝你好运。

# javascript - 在 AJAX 中，变量值不更新

> ID：15949070
> 
> 赞同：0
> 
> 时间：2013-04-11T12:41:30.120
> 
> 标签：javascript, json, jquery, velocity

下面是我的 jquery 东西，调用 REST 服务和响应结果返回 AJAX 成功事件是正确的。

但是，每次执行时，它都不会更新变量“SelectedVal”（document.getElementById('Text1').value）并保持第一次设置的值相同。

看起来，事件是附加的，并且不会在每次点击时更新。如何解决？

```
jQuery(document).ready(function() {
var selectedVal = '';   
var date = new Date();
var d = date.getDate();
var m = date.getMonth();
var y = date.getFullYear();     

    var calendar = jQuery('#calendar').fullCalendar({
        header: {
            left: 'prev,next today',
            center: 'Plan Issues',
            right: 'month,agendaWeek,agendaDay'
        },
        selectable: true,
        selectHelper: true,
        select: function(start, end, allDay) {

               AJS.$(document).ready(function() {                       

                var dialog = new AJS.Dialog({
                width: 400, 
                height: 300, 
                id: "planissues-dialog", 
                closeOnOutsideClick: true
            });

            // PAGE 0 (first page)
            // adds header for first page
            dialog.addHeader("Plan Issues");

            // add panel 1
            dialog.addPanel("Issues Planning", "<table><tr><td>Enter issues ID (separated by comma):</td><td><input id='Text1' type='text' /></td></tr></table>", "panel-body");  //PROBLEM: "Text1" control is added here in dialog.

dialog.addButton("Submit", function (dialog)
{ 
selectedVal = document.getElementById('Text1').value; //PROBLEM:This returns every time same value even though, entering different value while dialog is popup. it preserve same value which was enter during first time and then after on each consequence , it remains same value.
if (selectedVal != '') { 
alert(selectedVal);     // PROBLEM: alert shows same value which set at first time.
var url = "http://localhost:2990/jira/rest/restresource/1.0/message/save/" + selectedVal;

jQuery.ajax({
            type: "POST",
            url: url,
            contentType: "application/json",
            dataType: "json",
            data:  "finaldatapassed",
            cache: false,   
            success: function (resp, status, xhr) {
                alert('in success JSON');                   
                alert(status); //success

            },
            error: function(resp, status, xhr){
                  alert('in error json');
                  alert("Error: " + resp.e); 
            }
        });
}                                                       
}); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:59:05.620

成功定义为

```
Type: Function( PlainObject data, String textStatus, jqXHR jqXHR ) 
```

尝试

```
success: function (data) {
             alert('in success JSON');                   
             alert(data); //success
         }, 
```

# iphone - 为什么 iPhone 中不存在退出全屏模式按钮？

> ID：15949071
> 
> 赞同：0
> 
> 时间：2013-04-11T12:41:30.163
> 
> 标签：iphone, ios, mpmovieplayercontroller, fullscreen

**背景：**

我有一个实时的 iPad 应用程序。在苹果商店。我现在正在开发 iPhone 版本。我在 Ipad 版本中使用了 MPMoviePlayerController。但是，我不得不使用 iPhone 版本的 MPMoviePlayer* *View* *Controller 来解决一些方向问题。

问题：在 iPad 版本中，当用户进入全屏时，他将拥有**完成**和**退出全屏**按钮。在 iPhone 版本中，退出全屏按钮不会出现。只有完成按钮出现。

**注意 1：** 使用 MPMoviePlayerController 而不是 ViewController 不会解决 iPhone 的问题。

**注意2：** 完成按钮将暂停电影，而退出按钮将使电影在我拥有的另一个视图中播放。

任何想法，请帮助。

# php - 如何从 processFrom 检索表单到其他操作？

> ID：15949074
> 
> 赞同：0
> 
> 时间：2013-04-11T12:41:46.300
> 
> 标签：php, forms, symfony1

我想将我的第一个表单中的数据检索到我的函数`executeAddDomaines`中，以将这些数据用于该函数调用的第二个表单，但是当我将 $form 参数提供给这个函数时，我遇到了这个错误：

> 可捕获的致命错误：传递给 domaineActions::executeAddDomaines() 的参数 2 必须是 sfForm 的实例，没有给出，在 /home/webs/extranet100p100.net/htdocs/lib/vendor/symfony/lib/action/sfActions.class 中调用.php 在第 60 行并在第 206 行的 /home/webs/extranet100p100.net/htdocs/apps/backend/modules/domaine/actions/actions.class.php 中定义

**这是我的代码：**

```
protected function processForm(sfWebRequest $request, sfForm $form)
{
$name = $form->getName();

$form->bind($request->getParameter($name), $request->getFiles($name));

if($form->isValid())
{

    if($form->isNew())
        {   
        $this->executeAddDomaines($request, $form);
        $this->redirect('@add_domaines');

         }
[...]
}

public function executeAddDomaines(sfWebRequest $request, sfForm $form)
{       

      $name = $form->getName();

      $params = $request->getParameter($name);

      $this->list_domaines = $params;

      $this->form = new AddDomainesForm();

      $this->setTemplate('listDomaines');
} 
```

那么我该怎么做呢？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T10:28:51.907

您可以尝试在会话中保存表单数据，然后在第二个操作中获取它。

试试这个（我没有测试）：

```
protected function processForm(sfWebRequest $request, sfForm $form)
    {
    $name = $form->getName();

    $form->bind($request->getParameter($name), $request->getFiles($name));

    if($form->isValid())
    {

        if($form->isNew())
            {   
            # Replaced
            $request->setAttribute("form", $form);
            $this->redirect('@add_domaines');

             }
    [...]
    }

    public function executeAddDomaines(sfWebRequest $request)
    {      
          # Added
          $form = $request->getAttribute("form");

          $name = $form->getName();

          $params = $request->getParameter($name);

          $this->list_domaines = $params;

          $this->form = new AddDomainesForm();

          $this->setTemplate('listDomaines');
    } 
```

使用后，您可以从请求中清除属性形式

# .htaccess - 屏蔽重定向 URL

> ID：15949075
> 
> 赞同：1
> 
> 时间：2013-04-11T12:41:47.277
> 
> 标签：.htaccess

我有一个重定向到另一个的 URL。（这两个网站都是我自己主持的）

如何屏蔽最终 URL 以显示第一个 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:45:28.870

简单的答案：你不能。浏览器（或访问该给定 URL 内容的任何脚本）向用户显示数据的来源——这就是重定向目标，因为那是数据的来源。

复杂的答案：你可以。然而，这需要相当多的工作。服务器内部必须获取重定向目标的数据并将其转发给客户端。但是严格来说，这不再是您可以使用 .htacess 配置执行的重定向。

# html - 如何使文本字段和提交按钮水平显示？

> ID：15949096
> 
> 赞同：-2
> 
> 时间：2013-04-11T12:43:04.193
> 
> 标签：html, css, styles

这是jsfiddle，问题的标题说明了一切：http: [//jsfiddle.net/aRsS9/](http://jsfiddle.net/aRsS9/)

html

```
<div id="container">
    <div id="top">
        <img src="http://upload.wikimedia.org/wikipedia/commons/2/2f/Hermes-product-image.png" alt="" width="180" align="right">
        <h2>Subscribe to Kuzhina Shqiptare</h2>
        <p>How this simple blogpost got 20k hits in only a few days!</p>

        <ul>
            <li>List Item 1</li>
            <li>List Item 2</li>
            <li>List Item 3</li>
        </ul>

    </div>

    <div id="bottom">
    <center><!-- Begin MailChimp Signup Form -->
<div id="mc_embed_signup">
<form action="http://poezishqip.us6.list-manage.com/subscribe/post?u=335e2f0f30201de23a990ce92&amp;id=3ffd9b18c3" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
<div class="mc-field-group">
    <input type="email" style="display: inline;" value="" name="EMAIL" class="required email" id="mce-EMAIL" placeholder="Enter your email address...">
</div>
    <div id="mce-responses" class="clear">
        <div class="response" id="mce-error-response" style="display:none"></div>
        <div class="response" id="mce-success-response" style="display:none"></div>
    </div>  <div class="clear"><input type="submit" value="Get instant access" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
</form>
</div>

<!--End mc_embed_signup--></center>
</div>
</div> 
```

css

```
body {
        margin: 0;
        padding: 0;
        font-family: sans-serif;

    }

    #container {
        width: 600px;
        background: #fff;
    }

    #top {
        padding: 2px 0 0 10px;
    }

    #top h2 {
        color: #b90000;
        font-family: sans-serif;
        line-height: 0;
    }

    #top p {
        font-size: 12px;
        color: gray;
    }

    #top ul {
        padding-bottom: 40px;
    }
    #top ul li {
        list-style-image:url('list.png');
        font-size: 14px;
        padding-bottom: 5px;
    }

    #top img {
        margin-top: 30px;
    }
    #mc_embed_signup {
        background: LightBlue;
    }

    #mc_embed_signup {
        margin: auto;
    }

    input[type=email] {
        width: 30%;
    }

    input[type=submit] {
        width: 30%;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:46:47.320

如果您想在同一行显示输入并提交

使用`float`CSS 选项

```
 input[type=email] {
        width: 30%;
        float:left; 

    }

    input[type=submit] {
        width: 30%;
        float:left; 
    } 
```

看一下这个

我希望它可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:47:08.663

```
#mc-embedded-subscribe-form>div {
display: inline;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T12:48:06.487

如果您使用`float:left;`它们，它们将并排放置

例如：

```
input {float:left;} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T12:59:54.430

考虑清理你的html。
我做了一些工作，添加`#mc-embedded-subscribe-form{display:inline;}`并删除了我认为对您的目标无用的内容。

现在您可以根据需要调整代码，重要的是将表单元素保持在一起并赋予表单`display:inline;`属性

[这是你更新的小提琴](http://jsfiddle.net/aRsS9/4/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T13:09:40.217

添加此 CSS，因为您已将文本字段和按钮放在两个 div 中

```
.mc-field-group {
       width: 30%;
        float:left;}
#mce-responses{
        width: 30%;
    flaot:left;} 
```

# sql - 如何使用 FireDac 组件在 ms sql server 上获取最后插入的 id？

> ID：15949098
> 
> 赞同：1
> 
> 时间：2013-04-11T12:43:05.250
> 
> 标签：sql, sql-server, delphi, anydac, firedac

使用 FireDac，如何在 ms sql 服务器上获取最后插入的 id？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T13:12:35.067

将该 id 设为标识列，然后通过 Using 获取它

```
SELECT SCOPE_IDENTITY() 
```

在插入语句之后

请参考以下链接

[http://msdn.microsoft.com/en-us/library/ms190315.aspx](http://msdn.microsoft.com/en-us/library/ms190315.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T12:49:32.690

使用自增字段类型

[http://www.da-soft.com/anydac/docu/Auto-Incremental_Fields.html](http://www.da-soft.com/anydac/docu/Auto-Incremental_Fields.html)

这将提供类似的代码

```
DataSet.Insert;
.... 
DataSet.Post; 
id := DataSet.FieldByName('ID').AsInteger; 
```

* * *

另一种方法可能是制作适当的 SQL 语句，如在

*   [http://en.wikipedia.org/wiki/Insert_(SQL)#Retrieving_the_key](http://en.wikipedia.org/wiki/Insert_(SQL)#Retrieving_the_key)
*   [SQL Server - 插入后的返回值](https://stackoverflow.com/questions/7917695)
*   [获取插入行标识的最佳方法？](https://stackoverflow.com/questions/42648/)

* * *

AnyDAC 作者还建议通过[http://docs.embarcadero.com/products/rad_studio/firedac/uADCompClient_TADCustomConnection_GetLastAutoGenValue@String.html获取特定于 DBMS 的工具的特殊方法](http://docs.embarcadero.com/products/rad_studio/firedac/uADCompClient_TADCustomConnection_GetLastAutoGenValue@String.html)

`SELECT @@identity`但是所有那些带有or的事后请求`SELECT SCOPE_IDENTITY`都是脆弱和危险的。当您将数据插入表 A 时，其触发器可能会将数据插入相关的表 B 和 C 中，并且标识会调用 C 的 autoinc，而不是您开始插入的表。

# vim - 如何递归地grep目录内的模式？

> ID：15949101
> 
> 赞同：3
> 
> 时间：2013-04-11T12:43:16.607
> 
> 标签：vim, grep, vimgrep

我想 grep 所有以以下开头的字符串模式： **student_** ，然后 **是任意数量的符号（字母和数字）并以****.tcl** 结尾

 *** * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-11T12:46:57.963

如果您使用的是 vim 7，它带有一个内置的 grep 函数，可以将结果放在一个快速列表窗口中。

尝试

```
:vimgrep /^student_/ **/*.tcl 
```

`**`递归地进行搜索

要仅在当前目录中搜索，请使用：

```
:vimgrep /^student_/ *.tcl 
```

阅读更多@ [vim.wikia.com](http://vim.wikia.com/wiki/Find_in_files_within_Vim)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T12:58:13.053

```
grep "student_[[:alnum:]]*\.tcl" * 
```**

# python - 通过机器学习寻找日常模式

> ID：15949103
> 
> 赞同：3
> 
> 时间：2013-04-11T12:43:20.953
> 
> 标签：python, machine-learning, pattern-matching, data-mining, statistics

我以 [timestamp, location] 格式创建了一个巨大的日常活动日志。例如

```
[{1365650747255, 'san francisco'},
 {1365650743354, 'san francisco'},
 {1365650741349, 'san mateo'},
 {1365650756324, 'mountain view'},
 ...
 {1365650813354, 'menlo park'}] 
```

我可以通过哪些方式挖掘这些信息以找到类似的模式

*   “周日晚上，我很可能在旧金山附近”
*   “周一下午我可能在门洛帕克附近”

问题是

*   数据集很大。
*   通过对时间戳值应用函数来判断日期/时间/日期似乎是不可能的（除非我们将时间戳解码为日期时间值）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T14:26:13.927

我在这里看不到你的问题。由于它是从纪元开始计算秒数的时间戳，因此您只需应用模运算符，其值为感兴趣的范围。如果你训练一个分类器，你应该能够预测每个即将到来的地方。主要问题不是性能，因为学习只是偶尔进行，而是如何更新学习的数据集。如前所述，您不必为此使用机器学习，但是如果您想使用机器学习来完成，这基本上可以使用一维数据集上的 k 最近邻来完成。

**[编辑]：** 混合语言但修复它：分类器是将进行统计分类的算法。

> *在机器学习和统计中，分类是根据包含已知类别成员的观察（或实例）的训练数据集来识别新观察属于一组类别（子群体）中的哪一个的问题。*[ [1](http://en.wikipedia.org/wiki/Statistical_classification) ]

由于我只使用 sklearn 来执行此类操作，因此以下是一个简约示例，说明如何使用 k-最近邻分类器 [ [2](http://scikit-learn.org/dev/modules/generated/sklearn.neighbors.KNeighborsClassifier.html) ]。为了能够进行分类，您必须将字符串更改为数字，然后在给定的测试数据集上训练您的分类器，然后您就可以预测新给定时间戳的位置。

```
import numpy as np
from sklearn.neighbors import KNeighborsClassifier

data = [[1365650747255, 'san francisco'],
        [1365650743354, 'san francisco'],
        [1365650741349, 'san mateo'],
        [1365650756324, 'mountain view'],
        ...
        [1365650813354, 'menlo park']]

# Map location strings to integers and replace
location_mapping = {}
location_index = 0
for index, (time, location) in enumerate(data):
    if(not location_mapping.has_key(location)):
        location_mapping[location] = location_index
        location_index += 1

    data[index][1] = location_mapping[location]

inverse_location_mapping = {value:key for key, value in location_mapping.items()}

data = np.array(data)
week = 60 * 60 * 24 * 7

# Setup classifier
classifier = KNeighborsClassifier(n_neighbors=10)

# Train classifier on given data
classifier.fit(data[:, 0] % week, data[:, 1]) 

# Predict desired location
prediction = classifier.predict([[1365444444444 % week]]))
print(inverse_location_mapping[prediction]) 
```

[ [1](http://en.wikipedia.org/wiki/Statistical_classification) ]：[http ://en.wikipedia.org/wiki/Statistical_classification](http://en.wikipedia.org/wiki/Statistical_classification)

[ [2](http://scikit-learn.org/dev/modules/generated/sklearn.neighbors.KNeighborsClassifier.html) ]：[http ://scikit-learn.org/dev/modules/generated/sklearn.neighbors.KNeighborsClassifier.html](http://scikit-learn.org/dev/modules/generated/sklearn.neighbors.KNeighborsClassifier.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T14:20:33.480

不确定这些问题需要机器学习，您可以使用常规统计数据。即建立一个概率分布图，`x`- 一天中的时间，`y`- 概率它是旧金山。`a`如果时间介于和`b`...之间，计算旧金山的概率

* * *

这是在 pandas DataFrame 中加载数据的方法：

```
from __future__ import print_function, division
import pandas as pd
import datetime

df = pd.read_csv("data.csv",
                 names=["timestamp","location"],
                 parse_dates=["timestamp"],
                 date_parser=lambda x:datetime.datetime.fromtimestamp(int(x) / 1000))
print(df.head()) 
```

输出：

```
 timestamp          location
0  2013-04-11 04:25:47.255000   "san francisco"
1  2013-04-11 04:25:43.354000   "san francisco"
2  2013-04-11 04:25:41.349000       "san mateo"
3  2013-04-11 04:25:56.324000   "mountain view"
4  2013-04-11 04:26:53.354000      "menlo park" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T13:03:15.303

该解决方案的性能取决于您对模式识别的要求有多精细。让我们假设您的要求是将一天分为 4 个部分： `Morning,Noon,Evening,Night`，让我们称它们为`time_slots`

现在让我们看看你的日常活动日志有多大，1 年、2 年、3 年？

让我们假设它是 1 年。

所以我们总共要监控 365 * 4 = 1460 个时隙。

现在，根据每个时间戳创建一个简单的地图`time_slot`。例如。它从 T1 开始并在 T2 结束（其中 T1 和 T2 是时间戳，例如 1365650813354 ）。

根据日志中的时间戳值，很容易找到它，`time_slot`即 1 月 28 日晚上或 1 月 30 日早上。

您必须将`time_slot`vs place_i_was 数据存储在具有适当架构的任何合适的数据库中。这取决于您想要的查询和分析类型。

这样您就不需要在数据集上运行公式，并且预定义的地图/数据库查找将满足您的目的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T22:31:08.320

将时间戳转换为标记：“星期天早上”。

然后进行关联规则挖掘，得到规则如

```
night => home
sunday morning => running in the park 
```

您只保留这些规则的地方，所需的位置出现在右侧。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T14:25:30.807

首先，将时间戳值转换为年-月-工作日。将时间戳列替换为对应于年、月和工作日的 3 列。

稍后，您可以简单地按日期值的特定范围进行分组，并计算每个位置的实例数。

# javascript - JS将变量与多级对象进行比较

> ID：15949106
> 
> 赞同：1
> 
> 时间：2013-04-11T12:43:37.670
> 
> 标签：javascript, jquery

看起来像这样的物体正在向我走来：

```
var data = {
 a0: {
  name: 'long name 0',
  var1_min: '10',
  var1_max: '99',
  select: ['alpha', 'gamma'],
  display: 'value0'
 },
 b12: {
  name: 'long name 1',
  var1_min: '1',
  var1_max: '999',
  select: ['beta'],
  display: 'value1'
 },
 d7: {
  name: 'long name 2',
  var1_min: '1000',
  var1_max: '0',
  select: ['alpha', 'beta', 'gamma'],
  display: 'value2'
 }
} 
```

我想比较一些变量`var1_min, var1_max, select`并保存`name, display`如果一个变量介于`var1_min, var1_max`和第二个变量之间`select`。

我做了这个用于测试：

```
<div style="text-align:center;" id="df">
 <div class="main">
  <form id="form" action="#">
   <fieldset>
    <label for="field1">field1
     <input type="text" name="field1" id="field1" />
    </label>
    <label for="field2">field2
     <select name="field2" id="field2">
      <option value="alpha">alpha</option>
      <option value="beta">beta</option>
      <option value="gamma">gamma</option>
     </select>
    </label>
   </fieldset>
   <br />
   <button type="submit">submit</button>
  </form>
  <span id="span"></span>
 </div>
</div> 
```

```
$('#form').submit(function () {
 $('#span').empty();
 var field1 = $('#field1').val();
 var field2 = $('#field2').val();
 for (var x in data) {
  if (data.hasOwnProperty(x)) {
   $('#span').append(x + '<br />');
   for (var y in data[x]) {
    if (data[x].hasOwnProperty(y)) {
     $('#span').append(y + " => " + data[x][y] + '<br />');
    }
   }
  }
  if (field1 >= data[x].var1_min) {
   $('#span').append('true' + '<br />');
  }
 }
 return false;
}); 
```

`if (field1 >= data[x].var1_min)`始终返回 true，即使 in 的值`field1`更小。

[http://jsfiddle.net/6UyPA/3/](http://jsfiddle.net/6UyPA/3/)

请把你的眼球借给我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:47:37.137

该对象包含一个字符串 for `var1_min`，并且也`val()`返回一个字符串。要按预期比较它们，请将它们解析为浮点数（或整数）：

```
if (parseFloat(field1) >= parseFloat(data[x].var1_min)); 
```

查看[更新的 jsFiddle](http://jsfiddle.net/6UyPA/4/)

# opengl - 为什么这个 GLSL 代码即使有语法错误也能编译和链接？

> ID：15949107
> 
> 赞同：2
> 
> 时间：2013-04-11T12:43:41.883
> 
> 标签：opengl, glsl

我有一个带有故意语法错误的 GLSL 片段着色器。

```
void main()
{
    // vec4 is ommitted
    gl_FragColor = (1,1,0,1);
} 
```

但我仍然可以毫无错误地编译和链接它。运行我的应用程序后，我在屏幕上什么也看不到。这是一种奇怪的行为还是别的什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T13:13:36.897

您已经使用了逗号运算符。

您的代码评估每个逗号分隔的数字并将它们全部丢弃，除了最后一个，因此它相当于编写

```
gl_FragColor = (1); 
```

其中括号仅用于分组，而不是函数调用，因此可以忽略。当您将单个值分配给向量时，它会将该值复制到所有组件，因此您的语句与编写相同 -

```
gl_FragColor = vec4(1,1,1,1); 
```

“背景”是白色的吗？在这种情况下，您什么也看不到。

# asp.net-mvc - 在 MVC 4 中注册自定义模型绑定器

> ID：15949109
> 
> 赞同：6
> 
> 时间：2013-04-11T12:43:53.313
> 
> 标签：asp.net-mvc, asp.net-mvc-4, model-binding

在 MVC 3 中，我通过创建一个已实现的新类来创建自定义模型绑定器`Systen.Web.Mvc.IModelBinder`，然后在内部`Global.asax.cs`和内部`Application_Start()`使用`ModelBinders.Binders.Add(typeof(sometype), new MyModelBinder());`

在 MVC 4 中，我知道您应该用来`System.Web.Http.ModelBinding.IModelBinder`实现模型绑定器。

所以我有两个问题：

1.  为什么我们应该使用模型绑定器 from`System.Web.Http.ModelBinding`而不是 from `Systen.Web.Mvc`？我没有看到它在任何地方都被列为弃用，那么旧的问题是什么？

2.  如果我从 中实现我的模型绑定器`System.Web.Http.ModelBinding.IModelBinder`，我如何在我的应用程序中注册它以便实际使用它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T13:04:00.173

您可以以相同的方式注册您的模型绑定器（在 Global.asax.cs 中），您也可以使用该`System.Web.Mvc.IModelBinder`界面。

但是，System.Web.Http 命名空间基本上是用于 ASP.NET MVC Web API（即用于构建 Web 服务）。

# cordova - 如何为phonegap + blackberry 10编写自定义插件？

> ID：15949110
> 
> 赞同：0
> 
> 时间：2013-04-11T12:44:00.797
> 
> 标签：cordova, plugins, blackberry-10

我设法在黑莓 10 模拟器中安装了我的 phonegap/cordova 应用程序，所以基本上我已经准备好开始 Web 应用程序开发了。

但是我想知道如何创建可以由网络应用程序通过 phonegap 访问的自定义 phonegap 插件？
我发现[http://docs.phonegap.com/en/2.6.0/guide_plugin-development_blackberry_index.md.html#Developing%20a%20Plugin%20on%20BlackBerry](http://docs.phonegap.com/en/2.6.0/guide_plugin-development_blackberry_index.md.html#Developing%20a%20Plugin%20on%20BlackBerry)，但对我来说，这些信息似乎已经过时或与旧版黑莓相关设备。

这个 java 类方法在黑莓 10 上仍然有效吗？如果是这样，我如何使用 java 插件类访问本机代码函数？
如果没有，我可以使用 C++ 代码编写插件（可能使用 JNEXT [https://developer.blackberry.com/html5/documentation/creating_extensions_for_bb10_apps.html](https://developer.blackberry.com/html5/documentation/creating_extensions_for_bb10_apps.html)），是否有任何关于此的 phonegap 文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:20:17.317

您将需要编写 C++ JNEXT 扩展，但首先检查 WebWorks 文档以确保您需要的功能尚不可用：

[https://developer.blackberry.com/html5/apis/](https://developer.blackberry.com/html5/apis/)

GitHub 上还托管了一系列社区扩展：

[https://github.com/blackberry/WebWorks-Community-APIs/tree/master/BB10](https://github.com/blackberry/WebWorks-Community-APIs/tree/master/BB10)

我们计划在今年晚些时候进行更新，这将使 WebWorks 扩展与 cordova 插件模型保持一致，但现在我建议遵循您链接到的文档来创建扩展。

# asp.net - 单击gridview中的编辑链接时删除链接会消失

> ID：15949111
> 
> 赞同：0
> 
> 时间：2013-04-11T12:44:03.177
> 
> 标签：asp.net, gridview, asplinkbutton

我有一个gridview，我显示itbutton 属性为false，showdeletebutton 属性为true。Edit 是一个链接按钮，单击它时会触发一个行命令事件。

现在，我的问题是，在 gridview 中，当我单击编辑链接时，删除链接会消失。我已经写了

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" PageSize="5" OnRowCommand="gv_RowCommand"
                        AllowPaging="true" DataKeyNames="ID" CssClass="mGrid"  BackColor="White" BorderColor="Silver" BorderStyle="Double"
                        BorderWidth="1px" CellPadding="4" >

         <RowStyle BackColor="White" Width="150%" ForeColor="#003399" />
            <Columns>
                <asp:TemplateField HeaderText="ID" Visible="false" >
                    <ItemTemplate>
                                    <asp:Label ID="lblID"  Text='<%#Bind("ID") %>' runat="server"></asp:Label>
                    </ItemTemplate>

                </asp:TemplateField>

                <asp:TemplateField  HeaderText="Version">
                    <ItemTemplate>
                                    <asp:Label ID="lblversion" Text='<%#Bind("version") %>' runat="server"></asp:Label>
                    </ItemTemplate>

                </asp:TemplateField>

                <asp:TemplateField HeaderText="Image ID">
                    <ItemTemplate>
                                    <asp:Label ID="lblimageid" runat="server" Text='<%#Bind("image_id") %>'></asp:Label>
                    </ItemTemplate>

                </asp:TemplateField>

                <asp:TemplateField HeaderText="Getty ID">
                    <ItemTemplate>
                                    <asp:Label ID="lblgettyid" runat="server" Text='<%#Bind("getty_id") %>'></asp:Label>
                    </ItemTemplate>

                </asp:TemplateField>

                <asp:TemplateField HeaderText="Pool Letter">
                    <ItemTemplate>
                                    <asp:Label ID="lblpoolletter" runat="server" Text='<%#Bind("pool_letter") %>'></asp:Label>
                    </ItemTemplate>

                </asp:TemplateField>

                <asp:TemplateField HeaderText="To Use">
                    <ItemTemplate>
                                    <asp:Label ID="lbltouse" runat="server" Text='<%#Bind("to_use") %>'></asp:Label>
                    </ItemTemplate>

                </asp:TemplateField>

                <asp:TemplateField HeaderText="Clue">
                    <ItemTemplate>
                                    <asp:Label ID="lblclue" runat="server" Text='<%#Bind("clue") %>'></asp:Label>
                    </ItemTemplate>

                </asp:TemplateField>

                <asp:TemplateField HeaderText="Range">
                    <ItemTemplate>
                                    <asp:Label ID="lblrange" runat="server" Text='<%#Bind("range") %>'></asp:Label>
                    </ItemTemplate>

                </asp:TemplateField>

                <asp:TemplateField HeaderText="last_updated">
                    <ItemTemplate>
                                    <asp:Label ID="lbllastupdated" runat="server" Text='<%#Bind("last_updated") %>'></asp:Label>
                    </ItemTemplate>
                                        </asp:TemplateField>

                <asp:TemplateField HeaderText="Status">
                    <ItemTemplate>
                                    <asp:Label ID="lblstatus" runat="server" Text='<%#Bind("status") %>'></asp:Label>
                    </ItemTemplate>

                </asp:TemplateField>

                <asp:TemplateField  HeaderText="First">
                    <ItemTemplate>
                                    <asp:Label ID="lblfirst" runat="server" Text='<%#Bind("first") %>'></asp:Label>
                    </ItemTemplate>

                </asp:TemplateField>

                <asp:TemplateField HeaderText="Middle">
                    <ItemTemplate>
                                    <asp:Label ID="lblmiddle" runat="server" Text='<%#Bind("middle") %>'></asp:Label>
                    </ItemTemplate>

                </asp:TemplateField>

                <asp:TemplateField HeaderText="Last">
                    <ItemTemplate>
                                    <asp:Label ID="lbllast" runat="server" Text='<%#Bind("last") %>'></asp:Label>
                    </ItemTemplate>

                </asp:TemplateField>
                 <asp:TemplateField >
                    <ItemTemplate>
                                    <asp:LinkButton ID="lnkbtnedit" Text="Edit" style="color:#003399;" CommandName="Edit" runat="server"></asp:LinkButton>
                    </ItemTemplate>

                </asp:TemplateField>

                 <asp:CommandField  ShowDeleteButton="true" CausesValidation="false" />

            </Columns>
              <PagerStyle BackColor="#006699" Font-Bold="True" ForeColor="White" HorizontalAlign="Center" />
                        <AlternatingRowStyle BackColor="#CCFFFF" />
                        <SelectedRowStyle BackColor="#009999" Font-Bold="True" ForeColor="#CCFF99" />
                        <HeaderStyle  BackColor="#006699" Font-Bold="True" ForeColor="White"  />
    </asp:GridView> 
```

我能得到任何帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:32:11.400

您可以在您的 : 中包含删除按钮`ItemTemplate`：

```
<asp:TemplateField>
    <ItemTemplate>
        <asp:LinkButton ID="lnkbtnedit" Text="Edit" style="color:#003399;" CommandName="Edit" runat="server"></asp:LinkButton>
        <asp:LinkButton ID="lnkbtndelete" Text="Delete" style="color:#003399;" CommandName="Delete" runat="server"></asp:LinkButton>
    </ItemTemplate>
</asp:TemplateField> 
```

然后只需删除`CommandField`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T04:23:35.170

替换您的以下代码

```
<asp:TemplateField >
      <ItemTemplate>
         <asp:LinkButton ID="lnkbtnedit" Text="Edit" style="color:#003399;"
           CommandName="Edit" runat="server"></asp:LinkButton>
      </ItemTemplate>

</asp:TemplateField>

<asp:CommandField  ShowDeleteButton="true" CausesValidation="false" /> 
```

使用此代码。

```
 <asp:TemplateField  ItemStyle-HorizontalAlign="Center"  ItemStyle-VerticalAlign="Top"
    HeaderStyle-Width="10%">
     <ItemTemplate>
         <asp:LinkButton ID="lnkbtnedit" runat="server" CommandName="Edit" Text="Edit" />
     </ItemTemplate>

     <EditItemTemplate>                               
       <asp:LinkButton ID="btndelete" runat="server" CommandName="Delete" Text="Delete"     
          CommandArgument="<%#((GridViewRow)Container).RowIndex%>"/>

     </EditItemTemplate>             

 </asp:TemplateField> 
```

# c# - c# 返回函数

> ID：15949114
> 
> 赞同：0
> 
> 时间：2013-04-11T12:44:13.863
> 
> 标签：c#, string, textbox, return

```
private void button3_Click_1(object sender, EventArgs e)
{
    textBox2.Text = "$" + (textBox1.Text = string.Format(System.Globalization.CultureInfo.GetCultureInfo("us-US"), "{0:#,##0.00}", double.Parse(textBox1.Text)));

    string digits, temp;
    long numberVal;

    string[] powers = new string[] { "Thousand ", "Million " };
    string[] ones = new string[] { "One", "Two", "Three", "Four", "Five", "Six", "Seven", "Eight", "Nine", "Ten", "Eleven", "Twelve", "Thirteen", "Fourteen", "Fifteen", "Sixteen", "Seventeen", "Eighteen", "Nineteen" };
    string[] tens = new string[] { "Twenty", "Thirty", "Forty", "Fifty", "Sixty", "Seventy", "Eighty", "Ninety" };
    string[] currency = new string[] { "Dollars" };
    string wordValue = "";

    if (numberVal == 0) 
        return "Nol";
    if (numberVal < 0)
    {
        wordValue = "negative ";
        numberVal = -numberVal;
    }

    long[] partStack = new long[] { 0, 0, 0, 0 };
    int partNdx = 0;

    while (numberVal > 0)
    {
        partStack[partNdx++] = numberVal % 1000;
        numberVal /= 1000;
    }

    for (int i = 3; i >= 0; i--)
    {
        long part = partStack[i];
        if (part >= 100)
        {
            wordValue += ones[part / 100 - 1] + " Ratus ";
            part %= 100;
        }

        if (part >= 20)
        {
            if ((part % 10) != 0) wordValue += tens[part / 10 - 2] +
               " " + ones[part % 10 - 1] + " ";
            else wordValue += tens[part / 10 - 2] + " ";
        }
        else if (part > 0) wordValue += ones[part - 1] + " ";

        if (part != 0 && i > 0) wordValue += powers[i - 1];
    }

    textBox3.Text = return wordValue;

} 
```

我正在尝试将 long 类型的数字转换为字符串单词。

为什么我的函数返回错误，是我使用不正确还是其他原因？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T12:45:52.660

在 C# 中，`return`关键字用于从函数返回值。在您的情况下，您没有返回任何内容，但您想为某个属性分配一个值，这是完全不同的。

删除`return`关键字。

**编辑**
似乎您在没有真正理解它的作用的情况下复制并粘贴了一些代码。您复制代码的函数将数字转换为其文本表示形式，并将该文本表示形式作为文本返回。

您现在尝试在事件处理程序中使用此代码，直接将结果分配给文本框。那行得通，如果您将任何`return "..."`语句替换为

```
{
    textbox3.Text = "...";
    return;
} 
```

最干净的解决方案是将代码复制到一个函数中并正确使用它。

* * *

**需要**`return`关键字的函数示例：

```
string SayHello(string user)
{
    return "Hello " + user;
} 
```

不返回值但可以使用以下方法中断的方法示例`return`：

```
void DoSomething()
{
    if (!myConditionIsMet)
        return;

    DoSomethingElse();
} 
```

**不能**使用`return`关键字的分配示例：

```
string name = "Brad";
name = name + " Pitt"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T12:46:50.837

```
textBox3.Text = return wordValue; 
```

不是有效的 C# 代码。

写一些类似的东西：

```
 textBox3.Text = wordValue; 
```

并且没有返回，根据函数定义：`void`，没有什么可以返回。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T12:46:31.897

尝试这个：

```
//textBox3.Text = return wordValue;
textBox3.Text = wordValue; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T12:50:58.947

这是不正确的 textBox3.Text = return wordValue;

使其如下

textBox3.Text = wordValue;

并且由于该函数是无效的，因此没有什么可以返回。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T12:51:14.650

您的方法 button_click 事件具有包含`void`返回类型的方法签名。

这意味着该方法不打算返回任何东西。

同样，该`return`语句不能作为赋值语句的一部分放置（不能将它放在“=”的右侧）。

**正如其他人所说，您只需删除`return`关键字即可获得所需的结果。在`return`检查`numberval == 0`**

需要返回的地方是其标头指示返回类型（除 之外的任何内容`void`）的方法。在这些方法中，您`return`在它自己的语句的开头使用它来返回它后面的值或对象。

例如：

```
/* In a method somewhere */
int foo = Bar();

/* The Bar method */
public int Bar()
{
    /* Whatever code runs */
    return 3; //return an object or value whose type matches the type the method signiture says you return
} 
```

# javascript - 如何在 JavaScript 中获取 RSS 提要的第一行

> ID：15949122
> 
> 赞同：0
> 
> 时间：2013-04-11T12:44:41.133
> 
> 标签：javascript, rss

好的，所以我想使用 javascript 获取 RSS 提要中的第一个条目。这是我的实际代码：

```
$.get('http://www.pebkac.fr/feed/rss/', function(data) {
var $xml = $(data);
$xml.find("item").each(function() {
    var $this = $(this),
        item = { title: $this.find("title").text() };

pbknbr = item.title.substr(8,4);
console.log(pbknbr);
    });
}); 
```

这段代码向我展示了该提要中标题的特定部分，这是我想要的，除了我只想要第一个标题。（它实际上向我展示了最后的 30 个条目）而且我不知道该怎么做。有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:56:52.293

这个片段很离谱，我会重构它，但要完成你的工作，只需添加 .first()

```
$xml.find("item").first().each(function() 
```

# jquery - 自动动画 Jquery

> ID：15949124
> 
> 赞同：1
> 
> 时间：2013-04-11T12:44:49.500
> 
> 标签：jquery, loops, fade

我有一个问题，假设我有一个对象并且我希望它持续发光，这可以通过 Jquery 实现吗？是否有自动动画功能可以循环淡入淡出注释？如果有，意味着我只需要两个图像并自动切换淡入淡出淡出，有没有办法实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:25:15.427

`**[LIVE DEMO](http://jsbin.com/evegih/1/edit)**`

假设您创建了一个`DIV`带有背景的图像，并在其中放置了`IMG`淡入淡出：

```
<div class="fade" style="width:100; height:100; background:url(img1.jpg);">
    <img src="img2.jpg" />
</div> 
```

比您可以使用`.fadeTo()`回调来循环图像的淡入淡出：

```
var opac=[1, 0.2], c=0;    
(function loop(){
      $('.fade img').fadeTo(400, opac[++c%2], loop);
})(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:59:17.387

`**[Demo](http://jsfiddle.net/J2KD9/)**`

您可以使用`setInterval`函数来制作循环。一个间隔必须等于`fadeOut`和`fadeIn`动画的总和。例如：

```
setInterval( function() {
    $( '#comment' ).fadeOut( 800 ).fadeIn( 200 );
}, 1000 ); 
```

# mysql - 如何连接两个相关的表，一个记录中的一个引用另一个中的两个记录？

> ID：15949127
> 
> 赞同：0
> 
> 时间：2013-04-11T12:44:55.703
> 
> 标签：mysql, sql, relational-database

我有一个带有 sender_id 和 receiver_id 字段的事务表，以及另一个带有 user_id first_name last_name 等的用户表...

我想从交易中查询数据并从用户那里加入详细信息，我需要为发送者和接收者带来名字和姓氏......

```
SELECT t.* u.*
FROM transactions t, users u
WHERE t.sender_id = u.user_id OR t.receiver_id = u.user_id 
```

这当然不是一个解决方案，因为我无法知道结果集中哪个是发送者/接收者，但它有助于说明问题

有任何想法吗？谢谢半开

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T12:47:01.337

您需要在 table`users`上连接 table 两次，`transactions`因为 transaction 中有两列依赖于 table `users`。

```
SELECT  a.*,
        b.firstName as SenderName,
        c.FirstName as RecieverName
FROM    transactions a
        INNER JOIN users b
            ON a.sender_ID = b.user_ID
        INNER JOIN users c
            ON a.reciever_id = c.user_ID 
```

# ruby-on-rails - Rails(ROR) 和 Salesforce

> ID：15949131
> 
> 赞同：0
> 
> 时间：2013-04-11T12:45:05.533
> 
> 标签：ruby-on-rails, rubygems, gem, salesforce

我需要从我的 ROR 应用程序更新 salesforce（CRUD 操作）。我尝试使用 databasedotcom。它适用于 client_ID 和 client_secret。我的情况是，我不会得到`client_ID`，`client_secret`但我会从用户那里得到用户 salesforce 凭证（用户名/密码+安全令牌）。如何在***没有*** `client_ID`and的情况下进行`client_secret`。让我知道是否***有其他宝石***适合我的场景。

***源代码***

```
@@client = Databasedotcom::Client.new("config/databasedotcom.yml")
@@client.authenticate :username => username, :password => password+securitytoken
@@client.sobject_module =SFDC_Models
@@client.materialize('User')
@user =SFDC_Models::User.all
@@client.create("Account",account_attr) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T06:39:16.833

**解决方案**

Salesforce-bulk gem 是解决方案。它使用用户名和密码凭证与销售人员进行交互。按照下面的链接

[https://github.com/jorgevaldivia/salesforce_bulk](https://github.com/jorgevaldivia/salesforce_bulk) [http://wiki.developerforce.com/page/Accessing_Salesforce_Data_From_Ruby](http://wiki.developerforce.com/page/Accessing_Salesforce_Data_From_Ruby)（部分：使用批量 API）

# c# - Windows - 如何通过 Windows API / .NET / C# / WMI 触发防病毒更新？

> ID：15949133
> 
> 赞同：0
> 
> 时间：2013-04-11T12:45:06.773
> 
> 标签：c#, wmi, antivirus

有没有办法不使用防病毒 API 来触发防病毒更新过程？我是否知道安全中心检测到杀毒软件但你如何检测和更新？

有很多关于如何使用 C#/WMI 在 Windows 上检测防病毒的帖子，但是我可以触发更新过程吗？请问有什么想法吗？

[使用 C# 在 Windows 上检测防病毒软件](https://stackoverflow.com/questions/1331887/detect-antivirus-on-windows-using-c-sharp)

先谢谢了，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:56:28.813

大多数程序允许您使用命令行提示符来执行更新等。

对于 Windows Defender，它带有一个命令行实用程序，可让您通过命令行运行更新、扫描等。请参阅[TN 从命令行运行（和自动化）Windows Defender](http://technet.microsoft.com/en-us/magazine/gg131918.aspx)

Windows Defender的：

```
MpCmdRun.exe -SignatureUpdate 
```

AVG（反垃圾邮件和程序/病毒数据库更新）：

```
avgmfapx.exe /AppMode=UPDANTISPAM 
avgmfapx.exe /AppMode=UPDATE 
```

一旦您知道命令行命令，您就可以[运行命令提示符命令](https://stackoverflow.com/a/1469790/1466627)来执行更新等。

# android - 我在 Android 中使用 Google Maps v2，但为什么会出现异常错误？

> ID：15949138
> 
> 赞同：0
> 
> 时间：2013-04-11T12:45:19.947
> 
> 标签：android, map

我没有显示任何图钉；我只是想显示一张地图，但是当我尝试开始一项活动时，它会被强制关闭并给出异常：

> 显示某种类型的片段类错误或二进制错误

清单文件是：

> Mani.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="in.wptrafficanalyzer.locationgooglemapv2demo"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <permission
          android:name="in.wptrafficanalyzer.LocationGoogleMapV2Demo.permission.MAPS_RECEIVE"
          android:protectionLevel="signature"/>

    <uses-permission android:name="in.wptrafficanalyzer.LocationGoogleMapV2Demo.permission.MAPS_RECEIVE"/>

    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

    <uses-feature
          android:glEsVersion="0x00020000"
          android:required="true"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="in.wptrafficanalyzer.locationgooglemapv2demo.MainActivity"
            android:label="@string/app_name" >

            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="AIzaSyAdupvz6Hpet0O5OxfAg8n-OrrFPK8_JZ4"/>
    </application>
</manifest> 
```

### 例外

```
04-11 18:07:42.476: E/AndroidRuntime(13119): FATAL EXCEPTION: main
04-11 18:07:42.476: E/AndroidRuntime(13119): java.lang.RuntimeException: Unable to start activity ComponentInfo{in.wptrafficanalyzer.locationgooglemapv2demo/in.wptrafficanalyzer.locationgooglemapv2demo.MainActivity}: android.view.InflateException: Binary XML file line #7: Error inflating class fragment
04-11 18:07:42.476: E/AndroidRuntime(13119):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097)
04-11 18:07:42.476: E/AndroidRuntime(13119):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2122)
04-11 18:07:42.476: E/AndroidRuntime(13119):     at android.app.ActivityThread.access$600(ActivityThread.java:140)
04-11 18:07:42.476: E/AndroidRuntime(13119):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1228)
04-11 18:07:42.476: E/AndroidRuntime(13119):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-11 18:07:42.476: E/AndroidRuntime(13119):     at android.os.Looper.loop(Looper.java:137)
04-11 18:07:42.476: E/AndroidRuntime(13119):     at android.app.ActivityThread.main(ActivityThread.java:4895)
04-11 18:07:42.476: E/AndroidRuntime(13119):     at java.lang.reflect.Method.invokeNative(Native Method)
04-11 18:07:42.476: E/AndroidRuntime(13119):     at java.lang.reflect.Method.invoke(Method.java:511)
04-11 18:07:42.476: E/AndroidRuntime(13119):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:994)
04-11 18:07:42.476: E/AndroidRuntime(13119):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:761)
04-11 18:07:42.476: E/AndroidRuntime(13119):     at dalvik.system.NativeStart.main(Native Method)
04-11 18:07:42.476: E/AndroidRuntime(13119): Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class fragment
04-11 18:07:42.476: E/AndroidRuntime(13119):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704)
04-11 18:07:42.476: E/AndroidRuntime(13119):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
04-11 18:07:42.476: E/AndroidRuntime(13119):     at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
04-11 18:07:42.476: E/AndroidRuntime(13119):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
04-11 18:07:42.476: E/AndroidRuntime(13119):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
04-11 18:07:42.476: E/AndroidRuntime(13119):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:306)
04-11 18:07:42.476: E/AndroidRuntime(13119):     at android.app.Activity.setContentView(Activity.java:1912)
04-11 18:07:42.476: E/AndroidRuntime(13119):     at in.wptrafficanalyzer.locationgooglemapv2demo.MainActivity.onCreate(MainActivity.java:12)
04-11 18:07:42.476: E/AndroidRuntime(13119):     at android.app.Activity.performCreate(Activity.java:5163)
04-11 18:07:42.476: E/AndroidRuntime(13119):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)
04-11 18:07:42.476: E/AndroidRuntime(13119):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2061)
04-11 18:07:42.476: E/AndroidRuntime(13119):     ... 11 more
04-11 18:07:42.476: E/AndroidRuntime(13119): Caused by: android.support.v4.app.Fragment$InstantiationException: Unable to instantiate fragment com.google.android.gms.maps.SupportMapFragment: make sure class name exists, is public, and has an empty constructor that is public
04-11 18:07:42.476: E/AndroidRuntime(13119):     at android.support.v4.app.Fragment.instantiate(Fragment.java:401)
04-11 18:07:42.476: E/AndroidRuntime(13119):     at android.support.v4.app.Fragment.instantiate(Fragment.java:369)
04-11 18:07:42.476: E/AndroidRuntime(13119):     at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:272)
04-11 18:07:42.476: E/AndroidRuntime(13119):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:676)
04-11 18:07:42.476: E/AndroidRuntime(13119):     ... 21 more
04-11 18:07:42.476: E/AndroidRuntime(13119): Caused by: java.lang.ClassNotFoundException: com.google.android.gms.maps.SupportMapFragment
04-11 18:07:42.476: E/AndroidRuntime(13119):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
04-11 18:07:42.476: E/AndroidRuntime(13119):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
04-11 18:07:42.476: E/AndroidRuntime(13119):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
04-11 18:07:42.476: E/AndroidRuntime(13119):     at android.support.v4.app.Fragment.instantiate(Fragment.java:391)
04-11 18:07:42.476: E/AndroidRuntime(13119):     ... 24 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T12:35:23.727

您的 mainfest 显示 minSDK=8，这意味着您必须使用 SupportMapFragment 而不是 Fragment：

```
SupportMapFragment fm = (SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map); 
```

请参阅下面的我的博客文章。我试图总结所有关于使用 Google Maps API V2 for Android 构建应用程序所需的内容。

1.  [Maps API V2 问题的解决方案（使用 google_play_services_lib）。](http://mzubair.com/solving-the-problemserrors-of-google-maps-api-v2/)
2.  [使用 Maps API V2 for minSDK=8 (Android 2.2 Froyo) 创建一个 Android 应用程序。](http://mzubair.com/creating-an-android-app-with-maps-api-v2/)
3.  [使用 Maps API V2 for minSDK=11 (Android 3.0 HoneyComb) 创建一个 Android 应用程序。](http://mzubair.com/creating-an-android-app-with-maps-api-v2-for-minsdk11-android-23-0-honeycomb/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-10T12:13:46.927

```
<meta-data
android:name="com.google.android.maps.v2.API_KEY"
android:value="AIzaSyCzlSw2fSYPx--CgFpk0LBp8Ofm23glhCs"/>
        <meta-data 
        android:name="com.google.android.gms.version"
        android:value="@integer/google_play_services_version" /> 
```

在清单文件中添加这些行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T13:08:32.033

要添加`SupportMapFragment`到您的项目中，您需要添加`google-support-v4`库和 Google 地图库。

检查 Stack Overflow 问题*[Google Maps Fragment doesn't load](https://stackoverflow.com/questions/15703245/google-maps-fragment-doesnt-load/15703453#15703453)*。

# vb.net - 根据工作日名称执行 IF 语句

> ID：15949140
> 
> 赞同：1
> 
> 时间：2013-04-11T12:45:20.970
> 
> 标签：vb.net, weekday

我有以下 VB.NET 代码：

```
Dim tomorrow = Now.Date.AddDays(1)
Dim weekdayname = CultureInfo.CurrentCulture.DateTimeFormat.GetDayName(tomorrow.DayOfWeek)
If weekdayname = "Thursday" Then
  something(happens)
Else
  something(happens)
End If 
```

这似乎不起作用，即今天是星期四，我希望​​第一件事发生，但它忽略了这一点并转到第二件事。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T12:48:43.943

你说今天是星期四，但你的代码不是今天使用，而是`tomorrow=Date.Now.AddDays(1)`.

而不是取决于当前文化的日期名称，我会使用[`DayOfWeek-enum`](http://msdn.microsoft.com/en-us/library/system.dayofweek.aspx)：

```
Dim today = Date.Today
If today.DayOfWeek = DayOfWeek.Thursday Then
    something(happens) 
Else
    something(happens)
End If 
```

# rabbitmq - 如何使用 Sockjs-Stomp 在 Rabbitmq 中创建自动删除队列

> ID：15949141
> 
> 赞同：2
> 
> 时间：2013-04-11T12:45:22.937
> 
> 标签：rabbitmq, stomp, sockjs

我无法通过 sockjs 创建自动删除队列，它会创建持久队列，但如果不使用，几分钟后不会删除队列。这个特性在 rabbitmq 中可用，但在 sockjs 中不支持。

请建议我如何通过 sockjs 创建自动删除队列

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-06T21:46:15.117

我已经设法通过为匹配给定模式的队列名称创建“自动删除”策略来做到这一点。

我在后端使用 Java/Spring/RabbitMQ，在客户端使用 SockJS/Stomp。rabbitmq 创建的所有队列都遵循相同的命名约定：suggestions-user* 所以一旦你在 Rabbit 中声明了策略，所有队列都将在 expiry 参数后被删除[检查出来](http://i.stack.imgur.com/V7lrz.png)

如果您想通过 UI 定义策略，请启用 Visualiser 插件，否则您也可以通过终端中的 rabbitmqctl 命令来实现。

# apache-flex - 嵌入字体不起作用

> ID：15949144
> 
> 赞同：0
> 
> 时间：2013-04-11T12:45:25.760
> 
> 标签：apache-flex, air, flex-spark

请参阅下面最简单的示例，它在 Windows 上作为 AIR 桌面运行。

```
<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                       xmlns:s="library://ns.adobe.com/flex/spark" 
                       xmlns:mx="library://ns.adobe.com/flex/mx">

    <fx:Style>
        @namespace s "library://ns.adobe.com/flex/spark";
        @namespace mx "library://ns.adobe.com/flex/mx";

        @font-face{
            src: url("C:/Windows/Fonts/AdobeGothicStd-Bold.otf");
            fontFamily: "AdobeGothic";
            fontWeight: bold;
            embedAsCFF: false;
        }

        s|Button{
            fontFamily: "AdobeGothic";
            fontSize: 20;
            color: #000000;
        }
    </fx:Style>
    <s:Button label="My Button" />

</s:WindowedApplication> 
```

未使用字体：![火花按钮](https://i.stack.imgur.com/fKvhX.png)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:56:03.230

如[文档中所述](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7f5f.html)：

> 如果将 embedAsCFF 的值设置为 false，则嵌入字体不支持 FTE，并且仅适用于 MX 文本组件。

此外，您正在尝试将粗体字体 ( `fontWeight: bold;`) 应用于非粗体标签。我不确定这可能会产生什么影响。您可能必须这样做：

```
<s:Button label="My Button" fontWeight="bold"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T23:24:37.647

另一种选择，`dot notation`在您的样式声明中使用。

```
.mySparkButton
{
   fontFamily: "AdobeGothic";
   fontSize: 20;
   color: #000000;
} 
```

然后设置你的按钮

```
 <s:Button label="My Button"  styleName = "mySparkButton" /> 
```

# html - 按钮未正确显示

> ID：15949149
> 
> 赞同：0
> 
> 时间：2013-04-11T12:45:33.120
> 
> 标签：html, facebook, button, facebook-login, facebook-authentication

我有一个 facebook 登录按钮，但它看起来像普通文本，我不知道为什么。[我根据我在这里](http://www.fbrell.com/fb.api/graph-me)找到的 facebook 处方编写了我的代码

```
<div id="fb-root"></div>
    <ul>
      <li><fb:login-button scope="user_likes" id="get_like" onclick="<?php getLikes(); ?>">Get Liked pages</fb:login-button>
</li></ul> 
```

测试时只显示文本“获得喜欢的页面”有
什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:18:05.893

您是否在页面上包含 JavaScript SDK 代码来呈现按钮？您还需要将 HTML 标记更改为：

`<html xmlns:fb="http://ogp.me/ns/fb#">`

请参阅[JavaScript SDK 文档](http://developers.facebook.com/docs/reference/javascript/#login)。

# android - 如何在android中停止处理程序

> ID：15949151
> 
> 赞同：1
> 
> 时间：2013-04-11T12:45:46.463
> 
> 标签：android, handler, android-handler

我已经创建了一个 android 应用程序，当单击一个按钮时，处理程序将在每 2 秒激活一个烤面包机。另一方面，我有一个停止按钮，我想在单击时停止正在运行的线程

这是我的代码

```
private final int  FIVE_SECONDS = 2000;

    public void scheduleSendLocation() {
        handler.postDelayed(new Runnable() {
            public void run() {
                sendLocation();          // this method will contain your almost-finished HTTP calls
                handler.postDelayed(this, FIVE_SECONDS);
            }
        }, FIVE_SECONDS);
    }

    protected void sendLocation() {
        Toast.makeText(getApplicationContext(), "Your Location is ", Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        btnShowLocation = (Button) findViewById(R.id.btnShowLocation);
        stop = (Button) findViewById(R.id.stop);

        btnShowLocation.setOnClickListener(new View.OnClickListener() {
            public void onClick(View arg0) {        
                scheduleSendLocation();

            }
        });

        stop.setOnClickListener(new View.OnClickListener() {
            public void onClick(View arg0) {        
        // what to write here
            }
        });

    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T12:49:40.847

尝试调用以下代码

```
 stop.setOnClickListener(new View.OnClickListener() {
        public void onClick(View arg0) {        
            handler.removeCallbacks(runnable);
        }
    }); 
```

`runnable`您在调用 postDelayed 时添加的可运行对象在哪里。消息队列中的任何待处理帖子都`runnable`将被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:49:21.187

尝试这个：

```
stop.setOnClickListener(new View.OnClickListener() {
        public void onClick(View arg0) {        
             myHandlerThread.interrupt();
             myHandlerThread = null;
        }
    }); 
```

# qt - CMake 错误：此项目中使用了以下变量，但它们设置为 NOTFOUND

> ID：15949153
> 
> 赞同：1
> 
> 时间：2013-04-11T12:45:47.637
> 
> 标签：qt, cmake

我正在为 CentOS 6 上的项目运行 CMake 构建脚本，但出现以下错误：

```
CMake Error: The following variables are used in this project, but they are set to NOTFOUND.
Please set them or make sure they are set and tested correctly in the CMake files:
QT_QTOPENGL_INCLUDE_DIR (ADVANCED)
  used as include directory in directory /home/auser/Documents/Projects/Framework/src/AFrameworkFolder
QT_QTWEBKIT_INCLUDE_DIR (ADVANCED)
  used as include directory in directory /home/auser/Documents/Projects/Framework/src/BFrameworkFolder 
```

我安装了 QT 4.8.4，并且使用的是 CMake 版本 2.8.10.2。我正在使用的构建脚本在 Mac OSX 10.8 上也可以正常工作。

谁能告诉我这里发生了什么？

对我来说，它似乎很难找到它需要的一些 QT 文件夹，而且我在 QT 中没有看到任何提到 OpenGL 或 Webkit 的文件夹。如果缺少这些，我将如何安装它们？如果这不是问题，有人可以指导我修复解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T19:40:54.580

结果发现 OpenGL 和 Webkit 的文件夹丢失了。我只需要重新下载一个干净的 QT 副本并按照此处的安装说明进行安装：http: [//qt-project.org/doc/qt-4.8/install-x11.html](http://qt-project.org/doc/qt-4.8/install-x11.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:07:24.027

很难在没有看到实际的情况下判断`CMakeLists.txt`，但请确保您正确找到了 QtOpenGL。也就是说，确保您的发现要求提供所需的 Qt 模块，如下所示：

```
set(QT_USE_QTOPENGL 1)
find_package(Qt4 REQUIRED) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-23T01:59:25.450

安装 qtwebkit-devel RPM 即可解决。

# c - 从 /dev/input 读取

> ID：15949163
> 
> 赞同：9
> 
> 时间：2013-04-11T12:46:09.023
> 
> 标签：c, linux

我有一个模拟键盘的 USB RFID 读卡器。因此，当我将卡放入其中时，我会在终端窗口上看到字符串-即`"0684a24bc1"`

但我想在我的 C 程序中阅读它。我使用时没有问题：`scanf("%s",buff);`

但是当我使用下面的代码时，我得到了很多（大约 500 字节）无法识别的数据。为什么？我想要非阻塞读取。

```
#include <stdio.h>
#include <string.h>
#include <unistd.h>
#include <fcntl.h>
#include <errno.h>
#include <termios.h>

int main(int argc, char ** argv) {
  int fd;
  char buf[256];

  fd = open("/dev/input/event3", O_RDWR | O_NOCTTY | O_NDELAY);
  if (fd == -1) {
    perror("open_port: Unable to open /dev/ttyAMA0 - ");
    return(-1);
  }

  // Turn off blocking for reads, use (fd, F_SETFL, FNDELAY) if you want that
  fcntl(fd, F_SETFL, 0);

  }

while(1){
  n = read(fd, (void*)buf, 255);
  if (n < 0) {
    perror("Read failed - ");
    return -1;
  } else if (n == 0) printf("No data on port\n");
  else {
    buf[n] = '\0';
    printf("%i bytes read : %s", n, buf);
  }
sleep(1);
printf("i'm still doing something");

}
  close(fd);
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-11T12:53:22.697

根据[Linux 输入文档](https://www.kernel.org/doc/Documentation/input/input.txt)第 5 节，/dev/input/eventX 设备返回数据如下：

> 您可以使用阻塞和非阻塞读取，也可以在 /dev/input/eventX 设备上使用 select()，并且您将始终在读取时获得整数个输入事件。他们的布局是：
> 
> ```
> struct input_event {
>       struct timeval time;
>       unsigned short type;
>       unsigned short code;
>       unsigned int value; }; 
> ```
> 
> 'time' 是时间戳，它返回事件发生的时间。类型例如 EV_REL 表示相对时间，EV_KEY 表示按键或释放。在 include/linux/input.h 中定义了更多类型。
> 
> 'code' 是事件代码，例如 REL_X 或 KEY_BACKSPACE，完整的列表在 include/linux/input.h 中。
> 
> “价值”是事件携带的价值。EV_REL 的相对变化，EV_ABS（操纵杆...）的绝对新值，或者 EV_KEY 的 0 用于释放，1 用于按键，2 用于自动重复。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-05-01T07:32:31.203

```
#include <fcntl.h>
#include <unistd.h>
#include <poll.h>

int main(int argc, char *argv[])
{
    int timeout_ms = 5000;
    char input_dev[] = "/dev/input/event17\0";
    int st;
    int ret;
    struct pollfd fds[1];

    fds[0].fd = open(input_dev, O_RDONLY|O_NONBLOCK);

    if(fds[0].fd<0)
    {
        printf("error unable open for reading '%s'\n",input_dev);
        return(0);
    }

    const int input_size = 4096;
    unsigned char input_data[input_size];
    memset(input_data,0,input_size);

    fds[0].events = POLLIN;

    int exit_on_key_press_count = 10;

    while(true)
    {
        ret = poll(fds, 1, timeout_ms);

        if(ret>0)
        {
            if(fds[0].revents)
            {
                ssize_t r = read(fds[0].fd,input_data,input_size);

                if(r<0)
                {
                    printf("error %d\n",(int)r);
                    break;
                }
                else
                {
                    printf("total bytes read %d/%d\n",(int)r,input_size);

                    for(int i = 0; i<r;i++)
                    {
                        printf("%02X ",(unsigned char)input_data[i]);
                    }
                    printf("\n");
                    memset(input_data,0,input_size);

                    exit_on_key_press_count--;
                    if(exit_on_key_press_count<1)
                        break;
                }
            }
            else
            {
                printf("error\n");
            }
        }
        else
        {
            printf("timeout\n");
        }
    }

    close(fds[0].fd);
    return 0;
} 
```

$ sudo ./keypressed

读取的总字节数 72/4096

35 49 C9 5C 00 00 00 00 38 27 0B 00 00 00 00 00 04 00 04 00 5A 00 07 00 35 49 C9 5C 00 00 00 00 38 27 0B 00 00 00 00 00 05 01 04 0 0 00 05 01 09 0 0 C9 5C 00 00 00 00 38 27 0B 00 00 00 00 00 00 00 00 00 00 00 00 00

这是原始数据，要转换为某个键，我需要阅读上面的“Linux 输入文档”链接...

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-11T12:54:27.440

您的代码在打开事件设备时显然是错误的`/dev/input/`。甚至您的错误消息也与选择相矛盾：

```
perror("open_port: Unable to open /dev/ttyAMA0 - "); 
```

从文件中读取会`/dev/input/eventN`返回带有事件描述（如指针移动或按钮按下）的二进制数据，而不是文本。您可能想要打开某种串行仿真设备。

* * *

*10年答题周年编辑*

考虑如何在 Unix.SE 上[调试来自输入设备 (/dev/input/event*)的输入。](https://unix.stackexchange.com/q/5218/3097)

有一个易于使用的内容**参考解码器**`/dev/input/eventN`。您可以使用它来验证和比较您的代码。

# html - 电子邮件模板的 Html 表中的背景图像

> ID：15949168
> 
> 赞同：3
> 
> 时间：2013-04-11T12:46:42.677
> 
> 标签：html, css, background-image, html-email, newsletter

我在 html 电子邮件模板中使用背景图像，问题是这样的

```
<table style="background:url('http://i1298.photobucket.com/albums/ag41/Sikander_Nawaz/images_zpsa0d64d23.jpg')  repeat;

background-size: 100%; 
```

但那是重复的背景，而不是一个完整的背景。如果我使用`no-repeat` 它并没有在表的第一行显示它在其他行中可见它不可见..请建议我如何添加它以使其显示为单一背景。

**像这样重复 **编辑图像**![在此处输入图像描述](https://i.stack.imgur.com/PWPrQ.png)**

 *** * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T13:26:54.897

那么，如何在 html 电子邮件中添加背景图像。假设您的文档类型是 html 4。

```
<table background="your-image.gif"> 
```

如果您定义html 电子邮件**的可访问性/可见性范围**，它将帮助其他人向您建议更好的解决方案。

如果您的电子邮件仅在网络浏览器上，那么您可以使用 .css。

对于所有这些客户端[[在 wikipedia 上列出]](http://en.wikipedia.org/wiki/Comparison_of_email_clients)，“HTML 支持”的概念并不意味着它们可以处理 Web 浏览器可以处理的所有 HTML。几乎所有的电子邮件阅读器都限制了 HTML 功能，要么是出于安全原因，要么是因为界面的性质。CSS 和 JavaScript 尤其成问题。许多文章描述了每个电子邮件客户端的这些限制。

*   [http://www.sitepoint.com/code-html-email-newsletters/](http://www.sitepoint.com/code-html-email-newsletters/)
*   [http://www.campaignmonitor.com/css/](http://www.campaignmonitor.com/css/)
*   [http://en.wikipedia.org/wiki/Comparison_of_email_clients#General_features](http://en.wikipedia.org/wiki/Comparison_of_email_clients#General_features)
*   [http://alistapart.com/article/cssemail](http://alistapart.com/article/cssemail) <-- 关于 html 电子邮件的好技巧和建议

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T13:08:25.813

试试下面的方法，它会在某种程度上帮助你......

小提琴示例：http: [//jsfiddle.net/RYh7U/127/](http://jsfiddle.net/RYh7U/127/)

**CSS：**

```
.tableBG { position: relative; }
.imgBG {
    position: absolute;
    z-index: -1;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    height: 100%;
} 
```

**HTML 表：**

```
<table class="tableBG" width="300px" height="200px" border="1">
    <tr><td><img class="imgBG" src="https://www.google.co.in/images/srpr/logo4w.png"/>fhdhd</td><td>dhd</td><td>ddhd</td></tr>
    <tr><td>fhdhd</td><td>dhd</td><td>ddhd</td></tr>
    <tr><td>fhdhd</td><td>dhd</td><td>ddhd</td></tr>
    <tr><td>fhdhd</td><td>dhd</td><td>ddhd</td></tr>
    <tr><td>fhdhd</td><td>dhd</td><td>ddhd</td></tr>
    <tr><td>fhdhd</td><td>dhd</td><td>ddhd</td></tr>
    <tr><td>fhdhd</td><td>dhd</td><td>ddhd</td></tr>
    <tr><td>fhdhd</td><td>dhd</td><td>ddhd</td></tr>
    <tr><td>fhdhd</td><td>dhd</td><td>ddhd</td></tr>
    <tr><td>fhdhd</td><td>dhd</td><td>ddhd</td></tr>
    <tr><td>fhdhd</td><td>dhd</td><td>ddhd</td></tr>
        <tr><td>fhdhd</td><td>dhd</td><td>ddhd</td></tr>
    <tr><td>fhdhd</td><td>dhd</td><td>ddhd</td></tr>
    <tr><td>fhdhd</td><td>dhd</td><td>ddhd</td></tr>
    <tr><td>fhdhd</td><td>dhd</td><td>ddhd</td></tr>    
</table> 
```

**输出 ：**

![在此处输入图像描述](https://i.stack.imgur.com/4tRFr.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T13:03:17.457

你不能真正无限期地拉伸背景图像，就像任何图像一样，[`background-size`也不能按照你想要的方式工作](http://www.w3schools.com/cssref/css3_pr_background-size.asp)。

设置`background-size: 100%`不是你要找的。`background-size: cover`如果您希望它完全适合父元素，请尝试。如果您的图像很小而您的桌子很大，请注意像素化。

或者，如果您只想在每行的开头放置图像，请将背景放在 TR 元素上。

我认为您可能遇到的问题是[电子邮件客户端中的 CSS 支持](http://www.campaignmonitor.com/css/)。我不确定哪些客户端（如果有）很好地支持 CSS 3。我敢肯定你对网络邮件客户端没问题，但我敢打赌你的电子邮件在 Outlook 中看起来很糟糕。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T13:05:34.843

您必须添加更多 CSS：

```
-webkit-background-size: cover; // Safari Chrome
-moz-background-size: cover; // Firefox
-o-background-size: cover; // Opera
background-size: cover; //newer Browser 
```**

# excel - 在 VBA Excel 2003 中迭代 800 行的 for 循环需要花费太多时间才能获得所需的输出？如何克服这个问题？

> ID：15949174
> 
> 赞同：1
> 
> 时间：2013-04-11T12:46:51.510
> 
> 标签：excel, vba

请建议在 Excel 2003 中迭代 800 行以隐藏和取消隐藏行的解决方案。

```
For i = 0 To WSTreatmentOutComes.Range("F14:F813").Rows.Count - 1

                If WSTreatmentOutComes.Range("F" & 14 + i).Value = "" Or WSTreatmentOutComes.Range("F" & 14 + i).Value = "0" Then
                    For j = 0 To 9
                        WSTreatmentOutComes.Range("F" & 14 + i + j).Rows.Hidden = True
                    Next j
                Else
                    For k = 0 To 9
                        If WSTreatmentOutComes.Range("G" & 14 + i + k).Value = "" Or WSTreatmentOutComes.Range("G" & 14 + i + k).Value = "0" Then
                        WSTreatmentOutComes.Range("F" & 14 + i + k).Rows.Hidden = True
                        End If
                    Next k
                End If
                i = i + 9
            Next i 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T13:26:38.727

在 A 列中进行如下公式测试：

`Range("A14:A813").formula="=IF(AND(F:F="""",G:G=0),NA(),"""")"`

然后使用这样的代码来隐藏或取消隐藏：

```
' first, unhide all rows:

WSTreatmentOutComes.rows.hidden=false
'
'now hide the ones where there is an NA# error from the formula:
WSTreatmentOutComes.Range("A14:A813").SpecialCells(xlCellTypeFormulas, xlErrors).EntireRow.Hidden = True 
```

最后，清理 A 列：

`Range("A14:A813").clearcontents`

你去那里，立即隐藏它们

StackOverFlow上有关此方法/技术的更多信息[：how-to-delete-multiple-rows-without-a-loop-in-excel-vba](https://stackoverflow.com/questions/15431801/how-to-delete-multiple-rows-without-a-loop-in-excel-vba)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T13:11:07.187

看来您应该能够通过一次性隐藏所有块来摆脱内部循环。接近这个的东西应该可以工作：

```
WSTreatmentOutComes.Range("F" & 14 + i & ":F" & 14 + i + 9).Rows.Hidden = True 
```

另外，没有看到代码的开头，您是否在开始时关闭 ScreenUpdating？

```
Application.ScreenUpdating = False
<your block of code here>
Application.ScreenUpdating = True 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T14:15:11.393

我会这样做：

```
Option Explicit

Public Sub MacroHider()
    Application.ScreenUpdating = False
    Application.Calculation = xlCalculationManual

    Dim i As Long, j As Long, k As Long
    Dim rng As Range, vals() As Variant
    Set rng = WSTreatmentOutComes.Range("F14:F813")
    'get all of the data in the range'
    ReDim vals(1 To 800, 1 To 1)
    vals = rng

    For i = 1 To UBound(vals, 1) Step 10

        If vals(i) = "" Or vals(i) = "0" Then
            For j = 0 To 9
                rng.Rows(i + j).Hidden = True
            Next j
        Else
            For k = 1 To 9  '(already checked the first row)'
                If vals(i + k) = "" Or vals(i + k) = "0" Then
                    rng.Rows(i + k).Hidden = True
                End If
            Next k
        End If

    Next i

    Application.ScreenUpdating = True
    Application.Calculation = xlCalculationAutomatic
End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T13:01:35.263

使用此代码，我隐藏 A 列为“1”的行：

```
Sub Test()
    For i = 1 To Sheet1.Range("A1:A50").Rows.Count    
        If Sheet1.Range("A" & i).Value = "1" Then
            Sheet1.Range("A" & i).Rows.Hidden = True
        End If
    Next
End Sub 
```

因此，如果您想在满足该行中的某个条件时隐藏行，您只需调整 If 条件和范围。

# c# - 从 doc 文件读取到 CKEditor

> ID：15949175
> 
> 赞同：0
> 
> 时间：2013-04-11T12:46:53.357
> 
> 标签：c#, asp.net, fonts, ms-word, ckeditor

我将 CKEditor 集成到我的 aspx 文件中以供客户使用。用户可以选择要上传的文件，然后点击“预览”按钮，在上传前查看文件的内容。然后内容将被读取并显示到 CKEditor 中。

从记事本文件读取时可以，但是从 docx 文件读取时，出现字体错误。它包含像“+�”_W��Z5���������l�G��g��Q��.�)��{?����ٴ�#���这样的字符 ��y5aX锶˚����,/YQX%Zg�f��jv�e:�x��m��”。

这是我使用的代码片段：

```
<%@ Register Assembly="CKEditor.NET" Namespace="CKEditor.NET" TagPrefix="CKEditor" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<script type="text/javascript" src="../ckeditor/ckeditor.js"></script>
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">
<div>
    <CKEditor:CKEditorControl ID="CKEditor1" runat="server" Width="100%" Height="400px">
                </CKEditor:CKEditorControl> 
    <asp:FileUpload ID="fileupload" runat="server" />
    <asp:Button ID="Button1" runat="server" Text="Preview"
                onclick="previewbutton_Click" />
</div>
</asp:Content> 
```

和后面的代码：

```
if (fileupload.PostedFile != null && fileupload.PostedFile.ContentLength > 0)
    {
        using (var reader = new StreamReader(fileupload.PostedFile.InputStream))
        {
            CKEditor1.Text = reader.ReadToEnd();
        }
    } 
```

有人请帮我吗？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:49:07.727

docx 文件不是文本文件。如果你想在 CKEditor 中显示它，你需要一个文本文件或一个 html 文件。您可以在客户端将 .docx 文件转换为 HTML 文件。

# javascript - 在 .NET 嵌入式浏览器中通过 AJAX 提交数据

> ID：15949182
> 
> 赞同：0
> 
> 时间：2013-04-11T12:47:06.697
> 
> 标签：javascript, jquery, html, .net, ajax

我们有一个设置，其中 .NET 嵌入式浏览器用于显示通过将 XSLT 文件应用于 XML 文件（使用 .NET）生成的 HTML 页面。`DocumentText`这会生成使用该属性在嵌入式浏览器中显示的 HTML 。

我想要实现的是在 .NET 上使用 AJAX 将一些数据发送到 .NET 组件`onmouseover`。问题是，.NET 应用程序声明 URL 是`about:blank`，这也是手册所说的关于使用该`DocumentText`属性的内容：

> 当您想要使用字符串处理工具来操作显示在 WebBrowser 控件中的 HTML 页面的内容时，请使用此属性。例如，您可以使用此属性从数据库加载页面或使用正则表达式分析页面。设置此属性时，WebBrowser 控件会在加载指定文本之前自动导航到 about:blank URL。这意味着在设置此属性时会发生 Navigating、Navigated 和 DocumentCompleted 事件，并且 Url 属性的值不再有意义。

那么如何在这个组件中使用 AJAX 呢？我没有要提交的网址...

有没有人做到这一点？顺便说一句，我只做 JS，我不编写 .NET。

我的代码不起作用：

```
 <script>

    function fnLog(action,rule){
        $.ajax({
          type: "POST",
//or: url:'about:blank',
//or: url: '',
//or url: 'localhost',
          data: "xmlToPost=<cr>"+
    " <guiActions>"+
        " <log>"+
           "  <action>"+action+"</action>"+
           "  <ruleId>"+rule+"</ruleId>"+
         "</log>"+
    " </guiActions>"+
 "</cr>"
        });
    }

    </script> 
```

编辑：我知道`window.external.Post`，但这仅适用于 IE，并且与其他代码不同。.NET 开发人员希望坚持一种将数据发送到 .NET 的方式，此时通过发布它来完成，只在每个上发布一个表单`mouseover`并不好，所以这就是我在看.NET 的原因`AJAX`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:52:14.453

您可以尝试导航到其他地方，例如`ajax://<cr><guiAction.....`，.NET 组件将收到通知，获取新 URL 并相应地解析它并防止重定向，因此页面实际上不会发生任何事情。

# ruby - Ruby 中每个与 reduce/inject 的内存效率

> ID：15949183
> 
> 赞同：4
> 
> 时间：2013-04-11T12:47:07.273
> 
> 标签：ruby, memory-management, each, reduce, inject

我有一个大数组（10+ 百万个对象），我想将它组合成一个对象（为简单起见，我们假设这里是一个字符串）并通过一些处理（由函数抽象）运行数组中的每个元素`do_stuff`。有两种自然的方法可以做到这一点：

```
memo = ""
big_array.each do |e|
  memo << do_stuff(e)
end
memo 
```

和

```
big_array.reduce("") do |memo, e|
  memo + do_stuff(e)
end 
```

reduce/inject 语法在美学上更具吸引力，但问题是哪个*内存*效率更高。我们已经知道[each 比 reduce 更节省时间](https://stackoverflow.com/questions/7679941/ruby-map-reduce-function-necessarily-efficient)，但是内存呢？

我也不清楚如何分析 Ruby 中的内存使用情况，尤其是仅通过一段代码，所以如果有人可以提供一些指向我也将不胜感激的指针。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-25T18:06:54.330

我很确定使用 map reduce （如您的示例中所写）您每次都在创建一个新字符串`+`）。

使用`<<`您正在修改原始字符串。这应该会更好，因为将触发更少的 GC 周期。

您提到您使用字符串作为示例；所以很难回答你真正的问题。

# javascript - phonegap, javascript, jquery

> ID：15949186
> 
> 赞同：0
> 
> 时间：2013-04-11T12:47:10.000
> 
> 标签：javascript, jquery, cordova

```
 xmlStObj.find("Control").each(function(){
            var value = $(this).find("value").text();
            $(this).find("value").text('New Value');    
        });
    }

alert($(xmlStObj));
alert(xmlStObj) 
```

都打印对象，对象

如何将此对象的值写入sqlite db？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:50:05.660

尝试这个

```
xmlStObj.find("Control").each(function(key,val){
        console.log("Key is "+key); 
        console.log("Value(s)");

        console.log(val); 

        //for example if you have key (text)
        console.log(val.text); 

    });
} 
```

我希望这是您正在寻找的，如果不是，我希望它可以提供帮助

# php - Doctrine2 无法通过关系加载具有命名空间的类

> ID：15949187
> 
> 赞同：1
> 
> 时间：2013-04-11T12:47:12.127
> 
> 标签：php, oop, namespaces, doctrine-orm

我有 2 个实体；BusinessContactInformation 和 ContactInformationTypes。BusinessContactInformation 的一个实体始终具有给定的 ContactInformationType。

但是，当我尝试加载 BusinessContactInformation 类型的实体时，我收到此错误：

> 致命错误：require()：打开失败需要'/var/tmp//_ *CG* _platformentitiesContactinformationtypes.php'

这些实体都在 \platform\entities 命名空间中，并且它们具有以下注释：

```
/**
 * Businesscontactinformation
 *
 * @Table(name="businessContactInformation")
 * @Entity
 */
(...)
/**
 * @var Contactinformationtypes
 *
 * @ManyToOne(targetEntity="Contactinformationtypes")
 * @JoinColumns({
 *   @JoinColumn(name="contactTypeId", referencedColumnName="id")
 * })
 */
private $contacttypeid; 
```

和联系信息类型：

```
 /**
  * Contactinformationtypes
  *
  * @Table(name="contactInformationTypes")
  * @Entity
  */ 
```

有没有人知道是什么原因造成的？我*所有*的关系都这样 - 一对多，多对一，...。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T00:44:52.970

我最终重新生成了我的实体和代理。它让我有一个适当的新开始，我不得不在 Setup::createAnnotationMetadataConfiguration 中将我的代理作为第三个参数。

# php - 带引号的PHP字符串，输出到html表格扭曲布局

> ID：15949189
> 
> 赞同：0
> 
> 时间：2013-04-11T12:47:19.180
> 
> 标签：php, html, database, string, html-table

我正在用 PHP 编写评论脚本。审阅者撰写的审阅文本连同其他值（例如审阅者给审阅的日期和标题）一起插入到数据库中。

我想在单独页面的表格上输出评论。我已经写过了，它工作得很好，除非审阅者写了“测试”之类的东西。因此，如果评论中有引号或语音标记，则表格会扭曲，并且评论会停留在一行并且不跟随宽度`<td>`

这是代码：

```
 <?php

        echo "<tr $class>";
        echo "<td width='400' class='style1' style='color: #069; font-size: 15px;'>".$rating." &nbsp;&nbsp;&ldquo;".$row['title']."&rdquo; &nbsp;</td>";
        echo "<td width='200' class='style1'><div align='left'>Reviewed ".date_format($timeCreate, 'j F Y ')."</div></td>";
        echo "</tr>";
        echo "<tr $class>";
        echo "<td width='200'>";

        // Prints pros, cons, and other thoughts fields
        if($row['comment'])
        {

                echo "<p class='style2'>".$row['comment']."</p><div id='usname'>by ".$row['name']."<br><br></div><div class='$g'><font size='2' color='black'>Was this review helpful?</font>&nbsp;<input type='submit' value='Yes' onClick = 'myCall()' style='background-color:#556B2F;color:white;padding:2px; cursor:pointer' name='help' id='$g' class='button' /></div></td><td><img src='Themes/images/glyphicons_072_bookmark.png' width='10' height='15'></div><font size='1' style='padding-bottom:10px;'>&nbsp;&nbsp;".$row['helpful']." found this helpful</font><div id='mybox'>

        </div></td>";
            echo '

    '; 
        }
        echo "</tr><tr><td colspan='2'><hr></td></tr>";

        echo "<tr $class>";

        $id = $row['id'];
        echo "</tr>";

    }

    echo ""; 
    echo "</table>";
}
else
{
    echo "<p class='red'>Error</p>";
    echo "<p>This person does not exist.</p>";
}
?> 
```

该表如下所示：

```
<table width='600' border='1' cellpadding='0' cellspacing='0'> 
```

上面还有更多代码输出评论标题等数据，但我没有包括在内，因为我认为这并不重要。

不仅仅是审阅脚本有这个问题，所有来自数据库的信息都被放入表中的表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:23:49.927

我在下面的代码片段中看到了问题

```
echo "<td width='200'>";
        // Prints pros, cons, and other thoughts fields
        if($row['comment'])
        {

                echo "<p class='style2'>".$row['comment']."</p><div id='usname'>by ".$row['name']."<br><br></div><div class='$g'><font size='2' color='black'>Was this review helpful?</font>&nbsp;<input type='submit' value='Yes' onClick = 'myCall()' style='background-color:#556B2F;color:white;padding:2px; cursor:pointer' name='help' id='$g' class='button' /></div></td><td><img src='Themes/images/glyphicons_072_bookmark.png' width='10' height='15'></div><font size='1' style='padding-bottom:10px;'>&nbsp;&nbsp;".$row['helpful']." found this helpful</font><div id='mybox'>

        </div></td>";
            echo '

    '; 
        }
        echo "</tr><tr><td colspan='2'><hr></td></tr>"; 
```

如果设置了评论，那么您将添加两列，但如果未设置评论，那么它将打开一个 TD，然后关闭 TR。这可能会导致未格式化的 HTML。您能否添加一个其他条件并检查，如下所示

```
echo "<td width='200'>";

        // Prints pros, cons, and other thoughts fields
        if($row['comment'])
        {

                echo "<p class='style2'>".$row['comment']."</p><div id='usname'>by ".$row['name']."<br><br></div><div class='$g'><font size='2' color='black'>Was this review helpful?</font>&nbsp;<input type='submit' value='Yes' onClick = 'myCall()' style='background-color:#556B2F;color:white;padding:2px; cursor:pointer' name='help' id='$g' class='button' /></div></td><td><img src='Themes/images/glyphicons_072_bookmark.png' width='10' height='15'></div><font size='1' style='padding-bottom:10px;'>&nbsp;&nbsp;".$row['helpful']." found this helpful</font><div id='mybox'>

        </div></td>";
            echo '

    '; 
        }
        else
        {
             echo "</td><td>&nbsp;</td>";
        }
        echo "</tr><tr><td colspan='2'><hr></td></tr>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:57:36.807

如果要显示文本，则需要将特殊字符转换为 html 实体。[http://php.net/manual/en/function.htmlentities.php](http://php.net/manual/en/function.htmlentities.php)

这会将 & 转换为`&amp;`和 " 到`&quot;`

如果您需要转换单引号，请使用 ENT_QUOTES 选项。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-04-11T12:51:16.743

也许你应该使用addslashes() [http://pl1.php.net/manual/en/function.addslashes.php](http://pl1.php.net/manual/en/function.addslashes.php)

稍后在显示它之前 stripcslashes()

# python - 通过 使用多处理模块反对不同的工人

> ID：15949191
> 
> 赞同：1
> 
> 时间：2013-04-11T12:47:19.987
> 
> 标签：python, multiprocessing

我有一棵非常大的树（>~1M），我需要随机访问它的一些元素并使用一些标准检索数据。问题是当我想在我的计算机内核之间并行化这个任务时。经过一些调试，我意识到问题是通过文件对象（f=ROOT.TFile("MergedTrees.root")) 在每个进程中运行。这是我应该在每个内核中运行的代码：

```
def worker(tree,f,func,table,features,indexes):
    print "starting:" , mp.current_process().name
    time.sleep(2)

    print tree.GetEntry(100) # *****returns -1,means I/O error************* 

    x=[]
    y=[]
    appendx=x.append
    appendy=y.append
    for ind in indexes[0]:
       # print type(ind)
       # print tree.GetEntry(100)
        tree.GetEntry(ind) #access event number "ind"
        appendx(func(tree,features)) #get data samples
        appendy(table[ind]) #store lable of current event

    return x,y 
```

这就是我调用函数的方式：

```
results=[pool.apply_async(worker,args=(self.Tree,self.f,self.func,self.table,features,(ch,))) for ch in parts]
        pool.close()
        pool.join() 
```

你对解决这个问题有什么建议吗？一个简单的方法是拥有我的根文件的多个副本，每个进程都打开特定的文件。但我不喜欢这个解决方案，而且看起来很傻。

例如，如果我`print f`在我的函数中尝试，我会收到此错误：

```
 *** Break *** segmentation violation

===========================================================
There was a crash.
This is the entire stack trace of all threads:
===========================================================
#0  0x00007f25bce4912d in waitpid () from /lib/x86_64-linux-gnu/libc.so.6
#1  0x00007f25bcddbe8e in ?? () from /lib/x86_64-linux-gnu/libc.so.6
#2  0x00007f25bcddc2a0 in system () from /lib/x86_64-linux-gnu/libc.so.6
#3  0x00007f25b008298e in TUnixSystem::StackTrace() () from /home/jadidi/Downloads/root/lib/libCore.so
#4  0x00007f25b0082223 in TUnixSystem::DispatchSignals(ESignals) () from /home/jadidi/Downloads/root/lib/libCore.so
#5  <signal handler called>
#6  0x00007f25b2b6d9e5 in TDirectoryFile::Get(char const*) () from /home/jadidi/Downloads/root/lib/libRIO.so
#7  0x00007f25b00cc485 in G__G__Base1_8_0_33(G__value*, char const*, G__param*, int) () from /home/jadidi/Downloads/root/lib/libCore.so
#8  0x00007f25af52112f in Cint::G__CallFunc::Execute(void*) () from /home/jadidi/Downloads/root/lib/libCint.so
#9  0x00007f25b2f446cb in PyROOT::TRootObjectExecutor::Execute(Cint::G__CallFunc*, void*) () from /home/jadidi/Downloads/root/lib/libPyROOT.so
#10 0x00007f25b2f4b08e in PyROOT::TMethodHolder<PyROOT::TScopeAdapter, PyROOT::TMemberAdapter>::CallSafe(void*) () from /home/jadidi/Downloads/root/lib/libPyROOT.so
#11 0x00007f25b2f4c1eb in PyROOT::TMethodHolder<PyROOT::TScopeAdapter, PyROOT::TMemberAdapter>::Execute(void*) () from /home/jadidi/Downloads/root/lib/libPyROOT.so
#12 0x00007f25b2f48b72 in PyROOT::TMethodHolder<PyROOT::TScopeAdapter, PyROOT::TMemberAdapter>::operator()(PyROOT::ObjectProxy*, _object*, _object*, long) () from /home/jadidi/Downloads/root/lib/libPyROOT.so
#13 0x00007f25b2f4e616 in PyROOT::(anonymous namespace)::mp_call(PyROOT::MethodProxy*, _object*, _object*) () from /home/jadidi/Downloads/root/lib/libPyROOT.so
#14 0x0000000000460462 in PyObject_CallFunctionObjArgs ()
#15 0x00000000004dd34b in ?? ()
#16 0x000000000048e36a in ?? ()
#17 0x000000000047d159 in PyObject_HasAttr ()
#18 0x00007f25b2f4ff54 in PyROOT::(anonymous namespace)::op_repr(PyROOT::ObjectProxy*) () from /home/jadidi/Downloads/root/lib/libPyROOT.so
#19 0x000000000047cb0c in _PyObject_Str ()
#20 0x000000000047cbea in PyObject_Str ()
#21 0x00000000004d644c in ?? ()
#22 0x00000000004cfe81 in PyFile_WriteObject ()
#23 0x000000000049bb2e in PyEval_EvalFrameEx ()
#24 0x000000000049fd55 in PyEval_EvalCodeEx ()
#25 0x00000000004c7608 in ?? ()
#26 0x000000000045fed4 in PyObject_Call ()
#27 0x000000000049af25 in PyEval_EvalFrameEx ()
#28 0x000000000049fd55 in PyEval_EvalCodeEx ()
#29 0x00000000004c7608 in ?? ()
#30 0x000000000045fed4 in PyObject_Call ()
#31 0x000000000049af25 in PyEval_EvalFrameEx ()
#32 0x000000000049982f in PyEval_EvalFrameEx ()
#33 0x000000000049982f in PyEval_EvalFrameEx ()
#34 0x000000000049fd55 in PyEval_EvalCodeEx ()
#35 0x00000000004c7436 in ?? ()
#36 0x000000000045fed4 in PyObject_Call ()
#37 0x0000000000461b0f in ?? ()
#38 0x000000000045fed4 in PyObject_Call ()
#39 0x000000000048dc2f in ?? ()
#40 0x000000000048bf6d in ?? ()
#41 0x000000000045fed4 in PyObject_Call ()
#42 0x00000000004996be in PyEval_EvalFrameEx ()
#43 0x000000000049982f in PyEval_EvalFrameEx ()
#44 0x000000000049982f in PyEval_EvalFrameEx ()
#45 0x000000000049fd55 in PyEval_EvalCodeEx ()
#46 0x00000000004c7436 in ?? ()
#47 0x000000000045fed4 in PyObject_Call ()
#48 0x0000000000461b0f in ?? ()
#49 0x000000000045fed4 in PyObject_Call ()
#50 0x000000000048dc2f in ?? ()
#51 0x000000000048bf6d in ?? ()
#52 0x000000000045fed4 in PyObject_Call ()
#53 0x00000000004996be in PyEval_EvalFrameEx ()
#54 0x000000000049fd55 in PyEval_EvalCodeEx ()
#55 0x0000000000499502 in PyEval_EvalFrameEx ()
#56 0x000000000049fd55 in PyEval_EvalCodeEx ()
#57 0x0000000000499502 in PyEval_EvalFrameEx ()
#58 0x000000000049fd55 in PyEval_EvalCodeEx ()
#59 0x00000000004eeb92 in PyEval_EvalCode ()
#60 0x000000000049c4d5 in PyEval_EvalFrameEx ()
#61 0x000000000049fd55 in PyEval_EvalCodeEx ()
#62 0x0000000000499502 in PyEval_EvalFrameEx ()
#63 0x000000000049fd55 in PyEval_EvalCodeEx ()
#64 0x0000000000499502 in PyEval_EvalFrameEx ()
#65 0x000000000049fd55 in PyEval_EvalCodeEx ()
#66 0x0000000000499502 in PyEval_EvalFrameEx ()
#67 0x000000000049fd55 in PyEval_EvalCodeEx ()
#68 0x0000000000499502 in PyEval_EvalFrameEx ()
#69 0x000000000049fd55 in PyEval_EvalCodeEx ()
#70 0x0000000000499502 in PyEval_EvalFrameEx ()
#71 0x000000000049fd55 in PyEval_EvalCodeEx ()
#72 0x0000000000499502 in PyEval_EvalFrameEx ()
#73 0x000000000049fd55 in PyEval_EvalCodeEx ()
#74 0x0000000000499502 in PyEval_EvalFrameEx ()
#75 0x000000000049fd55 in PyEval_EvalCodeEx ()
#76 0x00000000004eeb92 in PyEval_EvalCode ()
#77 0x00000000004ff7f4 in ?? ()
#78 0x000000000042cdd0 in PyRun_FileExFlags ()
#79 0x000000000042d798 in PyRun_SimpleFileExFlags ()
#80 0x0000000000418db5 in Py_Main ()
#81 0x00007f25bcdb7eff in __libc_start_main () from /lib/x86_64-linux-gnu/libc.so.6
#82 0x00000000004c91b1 in _start () 
```

我希望有人能把我引向正确的方向

PS：我刚开始使用多处理，所以在解释相关内容时请更具体一点。谢谢

# java - Java 中的 AtomicInteger 与同步的 int 变量：性能差异

> ID：15949192
> 
> 赞同：2
> 
> 时间：2013-04-11T12:47:23.830
> 
> 标签：java, atomic, synchronized, java.util.concurrent

在经历了以下问题之后， [同步块可以比 Atomics 更快吗？](https://stackoverflow.com/questions/11551963/can-synchronized-blocks-be-faster-than-atomics)，
我写了一个简单的程序来比较*AtomicInteger*和同步块的性能差异（在里面递增int）。每次我运行这个程序时，它给我的比率 > 100。我的笔记本电脑有 Intel Corei3，下面的行打印 4。

```
 System.out.println(Runtime.getRuntime().availableProcessors()) 
```

当我使用

```
 THREAD_COUNT = 1; 
```

这个比率是最低的。它在 100 左右变化。对于

```
 THREAD_COUNT = 10; 
```

比例在800左右。

**问题1**：你能告诉我这是测试*AtomicInteger* VS同步增量（）方法性能差异的正确方法吗？

**问题2**：如果我增加`THREAD_COUNT`，比率增加，为什么？我认为这是因为更多的线程在同步语句中被阻塞并且需要更多的 CPU 任务。请评论。

```
package concurrent.atomic;

import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.atomic.AtomicInteger;

public class Performance {

    private static final AtomicInteger atomicInt = new AtomicInteger(0);
    private static volatile int counter = 0;
    private static final Object LOCK = new Object();
    private static final int THREAD_COUNT = 10;

    public static void main(String[] args) {

        System.out.println(Runtime.getRuntime().availableProcessors()); 

        Runnable atomic = new Runnable() {
            @Override
            public void run() {
                while (!Thread.currentThread().isInterrupted()) {
                    int value = atomicInt.incrementAndGet();
                    //if (value % 1000 == 0)
                        //System.out.println("atomic value : "+value);
                }   
            }
        };
        //System.out.println("1");
        Runnable intCounter = new Runnable() {
            @Override
            public void run() {
                while (!Thread.currentThread().isInterrupted()) {
                    synchronized (LOCK) {
                        int value = ++counter;
                        //if (value % 1000 == 0)
                            //System.out.println("sync value "+value);
                    }
                }   
            }
        };

        final ExecutorService atomicExecutor = Executors.newCachedThreadPool();
        final ExecutorService primitiveExecutor = Executors.newCachedThreadPool();
        for (int i = 0; i < THREAD_COUNT ; ++i) {
            atomicExecutor.submit(atomic);
            primitiveExecutor.submit(intCounter);
        }

        while (true) {
            float ratio = (((float) (atomicInt.get() * 1.0) ) / counter) * 100;
            System.out.println("ratio : " + ratio);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-24T20:45:23.090

> 问题1：你能告诉我这是测试AtomicInteger VS同步增量（）方法性能差异的正确方法吗？

您的测试代码存在一些微妙的问题：

*   如果你正在同步，`LOCK`那么`counter`不应该是`volatile`. 否则，代码将`synchronized`支付锁*和*`volatile`.
*   如果`counter`不是`volatile`，那么您将需要在`LOCK`读取 的值时进行同步`counter`。
*   你不应该在你的主线程中旋转。这将极大地影响您的性能测试。至少`Thread.sleep(100);`在你的循环中放一个。`while`
*   事实证明，这`Thread.currentThread().isInterrupted()`在我的 Mac 上相当昂贵。不知道为什么。将其切换为 a`while(true)`更改了数字。

有了这个，你就可以更好地测试这两者了，尽管这种孤立的测试除了你正在测试的东西之外并没有真正告诉我们任何东西。连续执行一百万个中断与将 20 个中断混合到实际代码中是非常不同的。

> 问题 2：如果我增加 THREAD_COUNT，比率会增加，为什么？我认为这是因为更多的线程在同步语句中被阻塞并且需要更多的 CPU 任务。请评论。

工作通过`AtomicInteger.incrementAndGet()`旋转直到测试和设置成功。这与进行锁的获取、增量和释放非常不同。如果不知道精确的操作系统线程处理细节，很难解释这里发生了什么，我不确定这在所有情况下都是正确的。

在我的测试中，随着线程数量越来越多于我的处理器数量，该比率往往会出现相当大的波动。随着更多线程的添加，`synchronize`处理显然受到并发性增加的影响，尽管我不确定我还能从中得到什么。

# macos - Macbook Pro 13" XGA 显示器上可滚动的大型 NSDocument

> ID：15949196
> 
> 赞同：0
> 
> 时间：2013-04-11T12:47:28.003
> 
> 标签：macos, cocoa, scroll, nswindow, nsscrollview

我在理解如何`NSWindows`拥有比窗口范围更大的文档时遇到了各种麻烦。

不幸的是，布局和内容使我无法简单地缩小文档（而且我不想让那些屏幕较大的布局变得狭窄）。

学校需要在他们新的 13 英寸非视网膜 MacBook Pro 上运行这个应用程序。滚动对他们来说是可以接受的，但我不确定这种方法，我希望你能就处理这个问题的最佳方法提出建议避免在大屏幕上强制滚动。

我尝试设置`NSWindow`最小和最大大小并将文档嵌入到滚动视图中。但是即使您可以看到部分文档视图突出，也不会出现滚动条（我已将它们设置为**Always** in sys prefs）。

如果这是要走的路，我会很感激一个关于这个确切主题的教程的链接，因为我对所有的测量和选项有点迷失了。

如果不是，我想要一个从哪里开始以及阅读什么的指针。我对 Cocoa Touch 有经验，但对 Mac 开发来说是个相对较新的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:16:17.407

如果没有更多信息，听起来您已经嵌入了 a`NSScrollView`但没有正确设置弹簧和支柱以允许滚动视图在其父视图（假设它是窗口）调整大小时调整大小。

您可能需要查看**Interface Builder 帮助**文档中的“[指定视图的行为作为其容器调整大小”。](http://developer.apple.com/library/mac/#recipes/xcode_help-interface_builder/articles/Autosizing.html#//apple_ref/doc/uid/TP40009971-CH13-SW1)

# android - “完美”代码，无输出 Android (Eclipse) Sound Board

> ID：15949200
> 
> 赞同：-1
> 
> 时间：2013-04-11T12:47:45.763
> 
> 标签：android, eclipse, media-player

我正在尝试为我 3 岁的孩子创建一个简单的音板并且遇到了相当困难的情况，我以为我已经找到了最好的方法来编写音板但是在单击按钮时遇到了问题没有任何反应？

代码很干净，没有任何错误迹象，所以我束手无策。

非常感激你的帮助。

```
 public class Player extends Activity implements OnClickListener {

        MediaPlayer mp;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);

            Button Button1 = (Button)findViewById(R.id.Button1);
            Button1.setOnClickListener(this);
        }

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            mp = MediaPlayer.create(this, R.raw.splashsound);
            mp.start();
            while (mp.isPlaying()){

            };

            mp.release();
        }
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:00:28.093

您需要使用[setAudioStreamType()设置 AudioStream](http://developer.android.com/reference/android/media/MediaPlayer.html#setAudioStreamType%28int%29)

```
mp = MediaPlayer.create(this, R.raw.ursoundboardtrack);
mp.setAudioStreamType(AudioManager.USE_DEFAULT_STREAM_TYPE);
mp.prepare();
mp.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:40:54.863

你确定你的splashsound是一个***`.wav`***格式吗？

如果不是，那么此应用程序将永远无法工作，因为它需要采用 .wav 格式，而不是 .mp3 或 .wma 或任何其他类型的音频格式，它必须采用某种***`.wav`***格式。

如果您的 splashsound 是另一种音频格式，但是***`.wav`***您必须将其转换为 a***`.wav`***并将其导入回您的项目并删除旧的，希望它应该可以工作:)

# c++ - 访问模板中的变量，该模板是具有多个变量的自定义数据类型的向量

> ID：15949202
> 
> 赞同：-1
> 
> 时间：2013-04-11T12:47:53.210
> 
> 标签：c++, function, templates, vector, stl

如何访问变量`itemtype`和函数`total`内`increment`？我下面的代码给了我如下错误

Counter2.h：在成员函数'int Counter::increment(T)'中：

Counter2.h:28:31: 错误: 'itemtype' 未在此范围内声明

Counter2.h:36:22: 错误: 'itemtype' 未在此范围内声明

Counter2.h:36:39：错误：未在此范围内声明“总计”

我必须能够使用`Counter<T> counter;`T 可以是任何类型的命令，例如字符串和`counter.increment()`

```
#include<string>
//#include<cstdlib>
#include<vector>

using std::vector;
using std::string;

template<class T>
class Record{
   public:
      T itemtype;
      int total;   
};

template<class T>
class Counter{
      vector< Record<T> > data;
   public:
      int increment(T item);
      int count(T item);
      void printSummary();
};

template<class T>
int Counter <T> :: increment(T item){
   bool check = false;

   for(int i=0; i < data.size(itemtype); i++){
      if(data[i].itemtype == item){
         data[i].total++;
         bool check = true;
         break;
      }
   }
   if(check == false){
      data.push_back(itemtype = item, total = 1);
   }
}

int main(){

   Counter<string> counter;   

   counter.increment("orange");
   counter.increment("orange");

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:57:55.840

我不太确定我是否了解您在这里的目的，尽管首先您正在尝试访问 Record 类的私有成员。您可以记录一个结构（默认情况下为公共），或提供 getter/setter 或添加：

```
friend class Counter; 
```

记录以便 Counter 可以访问其私有成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:10:57.817

您可以`Record`在内部创建一个私有结构`Counter`。这不会暴露它的实现。您还需要更改访问方式`data`。它是一个`vector`，`Record`而不是一个`Record`。就像是：

```
template<class T>
class Counter
{
    struct Record{   T itemtype;    int total;      };
    vector< Record > data;
   public:
      int increment(const T& item);
      int count(const T& item);
      void printSummary();
};
template<class T>
int Counter <T> :: increment(const T& item)
{
   auto i=data.begin();
   i= find(i,data.end(),[&item](const Record& r)
                        {return item==r.itemtype;});
   if (i!=data.end())
       return ++(i->total);
   data.push_back({item, 1}); 
   return 1; 
 } 
```

如果你不喜欢 lambda 的乐趣：

```
template<class T>
int Counter <T> :: increment(const T& item)
{
    for(int i=0; i < data.size(); ++i)
      if(data[i].itemtype == item)
         return ++(data[i].total);
    data.push_back({item, 1}); 
    return 1;
} 
```

但我认为你真正需要的是一个`multiset`（如果你不关心订单）。像这样的东西：

```
template<class T>
class Counter
{
    std::multiset <T> data;
   public:
      int increment(T item);
      int count(T item);
      void printSummary();
};

template<class T>
int Counter <T> :: increment(T item)
{
   data.insert(item);
   return data.count(item);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T14:39:27.947

排队`for(int i=0; i < data.size(itemtype); i++){`

将会：`for(int i=0; i < data.size(); i++){`

并且`data.push_back(itemtype = item, total = 1);`可以是：

1.  `data.push_back({item, 1}); // by using initializer list ; C++11`

2.  或者，

    ```
    Record r; 
    r.itemtype = item; 
    r.total = 1;
    data.push_back(r); 
    ```

您可以查看：[http](http://www.cplusplus.com/reference/vector/vector/) ://www.cplusplus.com/reference/vector/vector/ 以了解 std::vector。

# wpf - 如何在 WPF 中应用 ResourceDictionary 中的嵌套样式？

> ID：15949205
> 
> 赞同：2
> 
> 时间：2013-04-11T12:47:57.513
> 
> 标签：wpf, wpf-controls, wpfdatagrid

我使用 DataGrid (WPF 4.0) 控件。它的样式放置在 ResourceDictionary 中并包含嵌套的 Style 元素：

```
<Style x:Key="MyDataGridStyle" TargetType="{x:Type controls:DataGrid}">
    <Setter Property="Background" Value="Black"/>
    <Setter Property="CellStyle">
        <Setter.Value>
            <Style TargetType="{x:Type DataGridCell}">
                <Setter Property="BorderThickness" Value="0" />
                <Setter Property="FocusVisualStyle" Value="{x:Null}" />
            </Style>
        </Setter.Value>
    </Setter>
</Style> 
```

此处仅应用背景样式。CellStyle 不是。

它仅在我直接在`DataGrid`元素内定义 CellStyle 时才有效：

```
<DataGrid Style="{StaticResource MyDataGridStyle}">
       <DataGrid.CellStyle>
            <Style TargetType="{x:Type DataGridCell}">
                <Setter Property="BorderThickness" Value="0" />
                <Setter Property="FocusVisualStyle" Value="{x:Null}" />
            </Style>
       </DataGrid.CellStyle>
</DataGrid> 
```

任何想法为什么？

**更新**

将样式与我在 ResourceDictionary 中引用的 PresentationFramework.Aero 主题混合时似乎存在问题。如果我删除参考它的工作原理！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:58:36.827

按照您建议的方式进行操作对我来说效果很好，我将粘贴用于测试您的样式的代码。（请注意，我添加了 background = red 所以我实际上可以查看是否正在应用样式）

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <Style x:Key="MyDataGridStyle" TargetType="{x:Type DataGrid}">
            <Setter Property="Background" Value="Black"/>
            <Setter Property="CellStyle">
                <Setter.Value>
                    <Style TargetType="{x:Type DataGridCell}">
                        <Setter Property="BorderThickness" Value="0" />
                        <Setter Property="Background" Value="Red"/>
                        <Setter Property="FocusVisualStyle" Value="{x:Null}" />
                    </Style>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    <DataGrid Style="{StaticResource MyDataGridStyle}">
        <DataGrid.Columns>
            <DataGridTextColumn Binding="{Binding Text}"/>
            <DataGridTextColumn Binding="{Binding Tag}"/>
        </DataGrid.Columns>
        <DataGrid.Items>
            <TextBlock Text="Item1" Tag="aa"/>
            <TextBlock Text="Item2" Tag="bb"/>
            <TextBlock Text="Item3" Tag="cc"/>
            <TextBlock Text="Item4" Tag="dd"/>
        </DataGrid.Items>
    </DataGrid>
</Window> 
```

结果是

![在此处输入图像描述](https://i.stack.imgur.com/4407Y.png)

# jsp - 加载时将一个jsp字段值设置为隐藏字段

> ID：15949208
> 
> 赞同：0
> 
> 时间：2013-04-11T12:48:05.233
> 
> 标签：jsp

我有 2 个 jsp 字段 duedate 和 oldduedate 。Duedate 在加载时具有值。我需要在隐藏字段 oldduedate 中设置相同的值...应该在隐藏标签中使用什么来从到期日获取值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:59:14.950

如果 JSP 页面中的字段值是由服务器生成的，例如 servlet。然后，您可以将隐藏字段 (oldduedate) 的值设置为您为到期日期字段设置的任何值。

# c# - SET TRANSACTION 错误，C#，Oracle

> ID：15949212
> 
> 赞同：1
> 
> 时间：2013-04-11T12:48:12.247
> 
> 标签：c#, oracle, transactions, commit, oracle-sqldeveloper

我的 C# 设备应用程序中有程序。这是它的外观：

```
private void stk_crane_start_movement()
    {
        conn.Open();
        OracleCommand cmd = new OracleCommand();
        OracleTransaction trans;
        trans = conn.BeginTransaction();
        cmd.Transaction = trans;
        cmd.Connection = conn;
        conn.AutoCommit = false;
        cmd.CommandTimeout = 0;
        cmd.CommandText = "dc.stk_crane_start_movement";
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.Add("pn_crane_opr_id_no", OracleDbType.Number).Value = empid.ToString();
        cmd.Parameters.Add("pn_crane_movement_id_no", OracleDbType.Number).Value = pn_crane_movement_id_no.ToString();
        cmd.Parameters.Add(new OracleParameter("pv_error", OracleDbType.VarChar));
        cmd.Parameters["pv_error"].Direction = ParameterDirection.Output;
        string pv_error;
        cmd.ExecuteNonQuery();
        pv_error = cmd.Parameters["pv_error"].Value.ToString();
        if (pv_error.ToString() == "")
        {
            trans.Commit();
            trans.Dispose();
            conn.Close();
            cmd.Dispose();
        }
        else
        {
            trans.Rollback();
            MessageBox.Show("" + pv_error, "Error");
        }
    } 
```

我`ORA-01453: SET TRANSACTION must be first statement of transaction` **开始** `trans = conn.BeginTransaction();`

有人可以向我解释我到底做错了什么吗？

我也试过这样：

```
private void stk_crane_start_movement()
    {
        conn.Open();
        OracleCommand cmd = conn.CreateCommand();
        OracleTransaction trans;
        trans = conn.BeginTransaction(IsolationLevel.ReadCommitted);
        cmd.Transaction = trans;
        try
        {
            cmd.CommandText = "dc.stk_crane_start_movement";
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.Parameters.Add("pn_crane_opr_id_no", OracleDbType.Number).Value = empid.ToString();
            cmd.Parameters.Add("pn_crane_movement_id_no", OracleDbType.Number).Value = pn_crane_movement_id_no.ToString();
            cmd.Parameters.Add(new OracleParameter("pv_error", OracleDbType.VarChar));
            cmd.Parameters["pv_error"].Direction = ParameterDirection.Output;
            cmd.ExecuteNonQuery();
            trans.Commit();
        }

        catch
        {
            pv_error = cmd.Parameters["pv_error"].Value.ToString();
            MessageBox.Show("" + pv_error, "Error");

            try
            {
                trans.Rollback();
            }
            catch (OracleException ex)
            {
                MessageBox.Show("Rollback failed" + ex, "Exception Error");
            }
        }
    } 
```

但是因为它不是我期望的异常错误，所以它不会通过 try catch 语句。我希望它在我的 pv_error 变量被填充时回滚。这就是我在第一个示例中包含 if 语句的原因。

此外，在此之前我没有任何其他交易..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:35:13.250

根据[MSDN docs](http://msdn.microsoft.com/en-us/library/system.data.oracleclient.oracletransaction.aspx)，您的第二个版本正确使用了事务。所以如果你把它和你的 if 语句结合起来，你应该没问题：

```
 private void stk_crane_start_movement()
    {
        conn.Open();
        OracleCommand cmd = conn.CreateCommand();
        OracleTransaction trans;
        trans = conn.BeginTransaction(IsolationLevel.ReadCommitted);
        cmd.Transaction = trans;
        try
        {
            cmd.CommandText = "dc.stk_crane_start_movement";
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.Parameters.Add("pn_crane_opr_id_no", OracleDbType.Number).Value = empid.ToString();
            cmd.Parameters.Add("pn_crane_movement_id_no", OracleDbType.Number).Value = pn_crane_movement_id_no.ToString();
            cmd.Parameters.Add(new OracleParameter("pv_error", OracleDbType.VarChar));
            cmd.Parameters["pv_error"].Direction = ParameterDirection.Output;
            cmd.ExecuteNonQuery();
            pv_error = cmd.Parameters["pv_error"].Value.ToString();                
            if (pv_error.ToString() == "")
            {
               trans.Commit();
               trans.Dispose();
               conn.Close();
               cmd.Dispose();
            }
            else
            {
              trans.Rollback();
              MessageBox.Show("" + pv_error, "Error");
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:30:10.190

[这里](http://www.techonthenet.com/oracle/errors/ora01453.php)有一个建议，如果您已经有一个未结交易，您可能会看到此错误。他们建议提交或回滚任何开放的东西。与 SQL Server 不同，我能够在 Oracle 中发出预防性的“COMMIT”语句，甚至不知道我是否有任何打开的东西。

[我在您的代码和此处的示例代码](http://msdn.microsoft.com/en-us/library/system.data.oracleclient.oracletransaction.aspx)之间看到的唯一区别是它们在将事务分配给它之前将命令对象绑定到连接：

```
OracleCommand command = connection.CreateCommand();
command.Transaction = transaction; 
```

您可能想尝试这种变化。您没有设置隔离级别，因此[低于 10.2 版的 oracle oci.dll](http://social.msdn.microsoft.com/Forums/en-US/adodotnetdataproviders/thread/86e72cff-8c35-4994-8774-03535c06a744/)的问题可能不适用于此处。

# c# - 从linq中的第n条记录中选择n条记录

> ID：15949217
> 
> 赞同：7
> 
> 时间：2013-04-11T12:48:25.500
> 
> 标签：c#, linq, list, entity, ienumerable

我正在寻找类似 LIMIT(10, 10) <- 这就是它在 php 中的工作方式

```
Products = Products.Take(10).ToList(); 
```

这不是我想要的，因为我想跳过前 10 条记录。

有人知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T12:49:52.727

使用[跳过](http://msdn.microsoft.com/en-us/library/bb358985.aspx)

```
Products = Products.Skip(10).Take(10).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T12:51:03.333

尝试这个：

```
 Products = Products.Skip(10).Take(10).ToList(); 
```

# javascript - 为什么此代码不起作用（以及如何修复它）？

> ID：15949219
> 
> 赞同：0
> 
> 时间：2013-04-11T12:48:33.557
> 
> 标签：javascript, jquery

这个问题是[我的另一个问题的](https://stackoverflow.com/questions/15871307/ultimate-solution-to-defer-javascript-and-jquery-after-page-is-loaded)结果。

代码是：

```
<script type='text/javascript'>
    var scripts = [ 
        "http://www.---.com/include/jquery-1.8.3.min.js",
        "http://www.---.com/include/functions.js",
        "http://www.---.com/include/myjs.js",
        "http://www.---.com/include/plugins/bxslider/bxslider.js" 
    ];
    function downloadJSAtOnload() { 
        for( var i=0; i<scripts.length; i++ ) {
            var element = document.createElement('script');
            element.src = scripts[i];
            document.body.appendChild(element);
        }
        $(document).ready(function(){
            $('#mainslide .bxslider').bxSlider({
                slideWidth: '960',
                mode: 'vertical',
                speed: '500',
                captions: false,
                pager: false,
                controls: false,
                nextText: 'Next',
                prevText: 'Prev',
                auto: true,
                autoHover: true,
                pause: 3000
            });
        });
    }
    if (window.addEventListener) window.addEventListener('load', downloadJSAtOnload, false);
    else if (window.attachEvent) window.attachEvent('onload', downloadJSAtOnload);
    else window.onload = downloadJSAtOnload;
</script> 
```

生成的错误是**"Uncaught ReferenceError: $ is not defined "**。

奇怪的是，在许多浏览器和版本中，一切都可以完美运行（幻灯片、灯箱……）。就在 IE8 和 Safari 4 中，会向用户显示警报。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:00:16.850

由于您将 JS 库动态添加到文档中，因此在加载脚本后需要一个回调函数来初始化 bxSlider。理想情况下，应该在 bxSlider 加载后调用回调。

```
element.setAttribute("type","text/javascript");
element.onload = callBackFunction;
document.body.appendChild(element);

var callBackFunction() {
            $('#mainslide .bxslider').bxSlider({
                slideWidth: '960',
                mode: 'vertical',
                speed: '500',
                captions: false,
                pager: false,
                controls: false,
                nextText: 'Next',
                prevText: 'Prev',
                auto: true,
                autoHover: true,
                pause: 3000
            });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T18:45:23.220

将您的函数从 document.ready() 中取出，并将其添加到 jQuery.js 文件的末尾。这样它只会在 jQuery 加载后运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T12:57:27.543

单独导入jquery示例

```
<script src="http://www.---.com/include/jquery-1.8.3.min.js"> </ script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T12:52:44.703

那些浏览器可能太慢而无法在`script`元素创建之后实际加载 jQuery 文件，`body`然后才能到达第一个`$`.

为什么不在文档的`script`标签中声明它们？`head`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T12:53:00.800

您将脚本添加到文档正文（它们实际上应该在头部），但不要等待它们被下载并执行，然后再访问 jQuery，`$(document).ready(...)`所以我希望这至少在某些时候会失败。`onready`您需要在不使用 jQuery的情况下附加到文档事件。

# c# - 当 C# WPF 应用程序从 Visual Studio 运行时打开 PowerPoint 文件，但不是从 ClickOnce 发布的版本

> ID：15949224
> 
> 赞同：2
> 
> 时间：2013-04-11T12:48:39.360
> 
> 标签：c#, wpf, clickonce, powerpoint-2010

我有一个 WPF/C# 应用程序。它有一个按钮，可以使用以下代码以幻灯片放映模式运行特定的 PowerPoint 演示文稿：

```
public bool OpenHelpFile()
{
    ProcessStartInfo processStartInfo = new ProcessStartInfo();
    processStartInfo.FileName = "powerpnt.exe";
    // the /S option starts PowerPoint in slide show mode
    processStartInfo.Arguments = "/S \"Resources\\Midas 3.pptx\"";
    try { Process.Start(processStartInfo); }
    catch { return false; }
    return true;
} 
```

当我在 Visual Studio (2010) 中调试时，甚至在使用“发布”解决方案配置运行（而不是调试）时，这都能完美运行。但是，使用 发布应用程序后`ClickOnce`，该按钮不再打开演示文稿。相反，我收到此警告：

![错误信息](https://i.stack.imgur.com/l57qc.png)

演示文件位于解决方案中名为“资源”的文件夹中，在其属性窗口中，它有一个`Build Action`of`None`并且`Copy To Output Directory`属性设置为`Copy Always`。我相信这些设置*可能*是问题所在，但我不确定要使用哪些选项。将 设置`Build Action`为`Resource`没有帮助，因为这会将文件嵌入到 PowerPoint 无法访问该文件的程序集中。

我还搜索了安装应用程序的隐藏`AppData`文件夹，但在那里`ClickOnce`找不到演示文件。问题*也可能*出在`ClickOnce`. 如果有人能对这个问题有所了解，我将不胜感激。

提前谢谢了。

更新>>>

在阅读了@Osama Javed 的**第二个**链接指向的页面后，我找到了一个解决方案……忽略第一个链接。

事实证明，我需要做的就是`Build Action`将文件更改为`Content`. 这会将文件添加到`Application Files`窗口（位于项目属性页面的发布选项卡中），它可以包含在部署文件列表中。

# qooxdoo - 如何将 Qooxdoo qx.ui.mobile.page.Page 添加到管理器

> ID：15949235
> 
> 赞同：0
> 
> 时间：2013-04-11T12:49:29.030
> 
> 标签：qooxdoo

Qooxdoo 可以给管理器添加一个 NavigationPage：

```
var manager = new qx.ui.mobile.page.Manager();
var page1 = new qx.ui.mobile.page.NavigationPage();
manager.addDetail(page1); 
```

现在我想创建一个 Page 并自己添加一个 NavigationBar。manager.addDetail 只接受 NavigationPages。如何添加qx.ui.mobile.page.Page？

```
var page2 = new qx.ui.mobile.page.Page();
var navigationbar = new qx.ui.mobile.navigationbar.NavigationBar();
page2.add(navigationbar);
//... Adding buttons in navigationbar
manager.addDetail(page2); //fails: !(page2 instanceof qx.ui.mobile.page.NavigationPage 
```

答案是：“使用 NavigationPage 对我没用 :)”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T22:30:37.580

你想用 qx.Mobile 页面做什么？是什么阻止您使用 NavigationPage？如果需要，您甚至可以隐藏 NavigationBar。

Manager 需要 NavigationBar、Buttons 和其他一些仅由 NavigationPage 提供的属性。

# php - 我的文件（PHP、图片、脚本）是否受到下载保护？

> ID：15949236
> 
> 赞同：0
> 
> 时间：2013-04-11T12:49:29.940
> 
> 标签：php, security

我现在正在本地主机上建立一个网站。我的文件在 www 文件夹中。直接在 www 里面，我有 index.php 和更多的 php 页面。

我还有一些像图片/这样的文件夹，其中包含用户提交的图片；css/ 包含所有 css 文件；js/ 宽度所有 js 文件并包含/ 和一些 PHP 文件

我的问题是，当我在浏览器 localhost/pictures 中输入时，我看到了我所有图片的列表。对于 localhost/css 、 localhsot/js 或 localhost/includes 也是一样的。你有我所有文件的清单。这意味着机器人可以很容易地下载我的所有文件，除了 PHP 文件（由于某种原因，这些文件没有正确下载：PHP 代码不可访问）。

![你可以通过输入 localhost/pictures 查看我所有的图片](https://i.stack.imgur.com/eLhkh.png)

有没有办法阻止用户访问主目录？我考虑在 www/pictures 中编写一个 index.php 文件，该文件重定向到 www 的 index.php。我对网站文件夹的结构/组织方面的最佳实践一无所知。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:55:38.413

当有人试图浏览您的索引时，您可以强制 Apache 显示一条禁止消息，`.htaccess`方法是在您希望阻止浏览的所有目录中放置一个文件。

在您的`.htaccess`中，添加以下内容：

```
# disable directory browsing
Options All -Indexes 
```

同样，您可以在 Web 根目录中创建一个`robots.txt`文件，并添加以下内容：

```
User-agent: *
Disallow: /pictures/
Disallow: /css/
Disallow: /js/
Disallow: /includes/ 
```

您当然应该了解阻止机器人访问您的图像对 SEO 的影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T12:54:06.400

**溶胶 1：**

*您可以在该文件夹中放置一个 .htaccess 文件，其中仅包含：*

```
deny from all 
```

这样您就无法从该文件夹中打开任何文件，但您可以将它们包含在 php 中而不会出现任何问题。

**溶胶 2：**

```
# disable directory browsing
Options All -Indexes 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T12:56:01.027

将以下代码添加到您的 .htaccess 到您的主项目文件夹

```
# disable directory browsing
Options All -Indexes 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T13:43:39.647

将用户特定数据放在 Web 根目录之外的文件夹中。

# reporting - 使用 max 函数的正确语法是什么

> ID：15949241
> 
> 赞同：2
> 
> 时间：2013-04-11T12:49:37.063
> 
> 标签：reporting, openerp

仍在使用该死的 OpenOffice Writer 来自定义我的 sale_order.rml 报告。

在我的销售订单中，我有 6 个订单行，有 6 个不同的交货时间。我需要显示六个值中的最大值。

经过多次尝试后，我放弃了使用 reduce 函数，因为它在大多数情况下工作不规律或根本不工作。我从来没有见过这样的事情。

所以我想我会尝试使用 max 封装一个循环，例如：

```
[[ max(repeatIn(so.order_line.delay,'d')) ]] 
```

我的最长交货时间是 20，我希望看到 20（是的，这太容易了，不是吗！）。

它返回

```
{'d': 20.0} 
```

至少它包含我所追求的价值。但; 如果我尝试操纵这个结果，它就会完全消失。我努力了：

```
int(re.findall(r'[0-9]+', max(repeatIn(so.order_line.delay,'d')))[0]) 
```

在 python 窗口中效果很好，但在 OpenERP 中绝对没有返回任何内容。

我从我的 sale_order.py 文件中导入 re，我已将其重新编译为 sale_order.pyo：

```
 import time
    import re
    from datetime import datetime, timedelta
    from report import report_sxw

    class order(report_sxw.rml_parse):
        def __init__(self, cr, uid, name, context=None):
            super(order, self).__init__(cr, uid, name, context=context)
            self.localcontext.update({
                'time': time,
                'datetime': datetime,
                'timedelta': timedelta,
                're': re,
            }) 
```

我当然已经多次重新启动服务器。我的测试安装在 Windows 上。

所以谁能告诉我我做错了什么，因为我可以用 Python 让它工作，但不能用 OpenOffice Writer！

谢谢你的帮助！

编辑1：

格式

```
 {'d': 20.0} 
```

根据python，是一本字典。仍然在 Python 中，要从字典中提取整数，可以这样做：

```
 >>> dict={'d': 20.0}
    >>> print(dict['d'])
    20.0 
```

但是我怎样才能把它转变成 OpenERP 作家？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T15:05:46.757

I have manage to get the result I wanted by importing functools and declaring the reduce function within the parameters of the sale_order.py file.

I then simply used a combination of reduce and max function and it works exactly as expected.

The correct syntax is as follow:

```
 repeatIn(objects,'o')
    reduce(lambda x, y: max(x, y.delay), o.order_line, 0) 
```

Nothing else is required.

Enjoy!

# sql - 仅获取带有 mac 值 Replace/SubStr 的列中的数字和点 - ORACLE

> ID：15949244
> 
> 赞同：1
> 
> 时间：2013-04-11T12:49:41.070
> 
> 标签：sql, regex, replace, oracle10g, substring

如果我在 table_1 中，在名为 mac value 的列中为 [10.10.10.10] 或 [10.200.1] 我如何只选择数字：10.10.10.10 或 10.200.1？

这是 substr 的东西，但我不知道如何使用它:(

```
 select ???? from tabel_1...?? 
```

请帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T12:57:47.270

你可以使用 REGEXP_REPLACE

删除 '[' 和 ']' 与所有字母后：

```
select REGEXP_REPLACE('[10.100.1.1]ASDA1D', '(\[)|(\]([[:alnum:]]*))', '') from dual 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T13:39:29.947

如果 [10.100.1.1] 不一定在字符串的开头，则可以使用它：

```
select regexp_replace('foo [10.100.1.1]whatever', '^.*?\[([0-9.]+)\].*$', '\1') from dual; 
```

如果是：

```
 select regexp_replace('[10.100.1.1] whatever', '^\[([0-9.]+)\].*$', '\1') from dual; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T12:57:44.380

考虑使用 Oracle 的[正则表达式函数](http://psoug.org/reference/regexp.html)进行模式匹配。这种模式将捕获任何长度之间的任何内容`[`，`]`无论长度如何。

```
select regexp_substr('[105.102.10.10]', '^\[(.*)\]$', 1, 1, null, 1) value
from dual; 
```

如果您不关心模式是否以开头`[`和结尾，`]`则删除`^`and`$`字符。

```
select regexp_substr('[105.102.10.10]', '\[(.*)\]', 1, 1, null, 1) value
from dual; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T13:50:46.947

如果你不想使用正则表达式，你也可以像这样使用`instr()`内置函数`substr()`：

```
SELECT substr('[10.10.10.10] asdf', 2, instr('[10.10.10.10] asdf', ']') - 2)
FROM dual 
```

搜索收盘的位置`]`并将该位置减少 2`[`和`]`

# sql - VB.net SQL 变量输入值对 select case 语句中的位置没有影响 - 将输出归零到列

> ID：15949245
> 
> 赞同：0
> 
> 时间：2013-04-11T12:49:42.097
> 
> 标签：sql, sql-server-2008, variables, case-statement

我在下面设置了一个案例语句，查看学生年（`stuyear`）（最终将由 asp.net 控件触发。该案例设置为在将结果输出到三列时将其包含在计算中。但是，如果我将`stuyear`within的值`maindata`从 11 更改为 10，如下面的输出列返回 0。该语句似乎只对前三种情况有效，然后最后六个它返回 0，就好像它们被忽略了一样。

我想要发生的是`stuyear`当`belowexpected`,`asexpected`和`aboveexpected`.

如果可以避免的话，我不想为第 9 年、第 10 年和第 11 年设置单独的列并触发它们在 VB.net 中的可见性。

`/*Progress*/`您可以在下面的示例中的注释下找到我所指的特定代码。

```
;with MainData as 
(
select surname, forename, stuyear, ks2en, result, case when ks2en='' then 5 else left(ks2en,1) end as ks2enlevel, value as ResultLevel, case when ks2en='' then 0 else 1 end as gotks2enlevel 
from student join subject on student.upn=subject.upn join gradelookup on subject.result=gradelookup.grade where datacollection='March 2013' and stuyear=10 and name = 'English'
),

calcproglevel as
(
Select surname, forename, stuyear, ks2en, result, ks2enlevel, ResultLevel, gotks2enlevel, ResultLevel-ks2enlevel as levelsofprogress from MainData
),

calcprogtotals as
(
select surname, forename, stuyear, ks2en, result, ks2enlevel, ResultLevel, gotks2enlevel, levelsofprogress,
case when ks2enlevel >=4 then 1 else 0 end as AStarCTar,
case when resultlevel >=7 then 1 else 0 end as AStarC

From calcproglevel
)

select surname, forename, stuyear, ks2en, result, ks2enlevel, ResultLevel, gotks2enlevel, AStarCTar, AStarC, levelsofprogress, 

/*Progress*/

/*Year 11 Levels of Porgress below, as and above expected*/
case when stuyear=11 and levelsofprogress < 3 then 1 else 0 end as belowexpected,
case when stuyear=11 and levelsofprogress >= 3 then 1 else 0 end as asexpected,
case when stuyear=11 and levelsofprogress >= 4 then 1 else 0 end as aboveexpected,

/*Year 10 Levels of Porgress below, as and above expected*/
case when stuyear=10 and levelsofprogress < 2 then 1 else 0 end as belowexpected,
case when stuyear=10 and levelsofprogress >= 2 then 1 else 0 end as asexpected,
case when stuyear=10 and levelsofprogress >= 3 then 1 else 0 end as aboveexpected,

/*Year 9 Levels of Porgress below, as and above expected*/
case when stuyear=9 and levelsofprogress < 1 then 1 else 0 end as belowexpected,
case when stuyear=9 and levelsofprogress >= 1 then 1 else 0 end as asexpected,
case when stuyear=9 and levelsofprogress >= 2 then 1 else 0 end as aboveexpected,

/*KS4 individual levels of progress from 0 or less through to 5 levels or greater */
case when (stuyear=9 or stuyear=10 or stuyear=11) and levelsofprogress <= 0 then 1 else 0 end as zeroorless,
case when (stuyear=9 or stuyear=10 or stuyear=11) and levelsofprogress = 1 then 1 else 0 end as onelevelprog,
case when (stuyear=9 or stuyear=10 or stuyear=11) and levelsofprogress = 2 then 1 else 0 end as twolevelprog,
case when (stuyear=9 or stuyear=10 or stuyear=11) and levelsofprogress = 3 then 1 else 0 end as threelevelprog,
case when (stuyear=9 or stuyear=10 or stuyear=11) and levelsofprogress = 4 then 1 else 0 end as fourlevelprog,
case when (stuyear=9 or stuyear=10 or stuyear=11) and levelsofprogress >= 5 then 1 else 0 end as fiveormore

From calcprogtotals 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:10:36.620

我已经整理好了。只需要重新排列和介绍或操作符如下：

```
case when (stuyear=11 and levelsofprogress < 3)

or

(stuyear=10 and levelsofprogress < 2)

or

(stuyear=9 and levelsofprogress < 1)

then 1 else 0 end as belowexpected, 
```

# ruby - 使用 ruby google-api-client 获取 youtube 视频数据

> ID：15949249
> 
> 赞同：3
> 
> 时间：2013-04-11T12:50:00.940
> 
> 标签：ruby, youtube-api, google-api-client

你好 ！

我见过很多类似的问题，但无法弄清楚为什么它们都没有给出明确的答案。

我正在尝试使用 google-api-client gem 连接到 youtube 数据 api，以从 youtube 视频链接中检索缩略图。我认为我不需要处理（对我来说晦涩难懂的）oAuth 身份验证。

*   第一步：我使用 google api 控制台创建项目，授权 Youtube Data API。在“API 访问”选项卡中，我选择“创建客户端 ID...”和“服务帐户”选项。

它给了我一个客户 ID、电子邮件地址和公钥指纹。

*   第二：我使用 google-api-client gem 创建了我的 ruby​​ 脚本。我只是复制/粘贴文档中的示例：

    需要“谷歌/api_client”

    客户端 = Google::APIClient.new

从我的客户端对象中，我想我可以直接调用 client.execute() 来获取包含所有视频信息的 atom 提要。但我只是知道如何去做。

也许我还必须获得 oAuth 授权？获得令牌？

我错过了什么？

非常感谢您的贡献。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T08:27:19.270

这并不难，我发现了如何做到这一点。

在这种情况下，您不需要处理 oAuth 身份验证。您将需要生成一个服务器 API 密钥并在每个请求中发送它。

以下代码段将帮助检索有关 API 提供的视频的所有信息。

```
require 'google/api_client'
require 'json'

client = Google::APIClient.new

youtube = client.discovered_api('youtube', 'v3')

client.authorization = nil

result = client.execute :key => "<YOUR_SERVER_API_KEY>", :api_method => youtube.videos.list, :parameters => {:id => '<YOUR_VIDEO_ID>', :part => 'snippet'}

result = JSON.parse(result.data.to_json) 
```

# python - Python-SQL更新操作；没有错误，但实际上并没有更新我的数据库

> ID：15949253
> 
> 赞同：0
> 
> 时间：2013-04-11T12:50:11.303
> 
> 标签：python, sql, sql-update

我使用 python 和 SQL 为客户帐户创建数据库。我正在尝试提供更新客户详细信息的选项。我已经完成了我认为会更新表格的操作，但是当我打印内容时，什么都没有改变。请你能告诉我哪里出错了吗？

```
def update_Customer(self):
    # create sqlite connection            
    conn = sqlite3.connect("lanyard.db", timeout=5)
    c = conn.cursor()
    # if texfield is empty
    if self.TextField1.get() !="":
        if self.TextField2.get() != "":
            nameChange1 = self.TextField2.get()
            CusNo = self.TextField1.get()
            c.execute("""
                UPDATE customer
                SET first_name = 'nameChange1'
                WHERE customer_id = 'CusNo'""")
            conn.commit()
        if self.TextField3.get() != "":
            nameChange2 = self.TextField3.get()
            CusNo = self.TextField1.get()
            c.execute("""
                UPDATE CUSTOMER
                SET second_name = 'nameChange2'
                WHERE customer_id = 'CusNo'""")
            conn.commit()
        if self.TextField4.get() == "":
            nameChange3 = self.TextField4.get()
            CusNo = self.TextField1.get()
            c.execute("""
                UPDATE CUSTOMER
                SET address = 'nameChange3'
                WHERE customer_id = 'CusNo'""")
            conn.commit()
    conn.commit()
    c.close()

    # clear input
    self.TextField1.delete(0, END)
    self.TextField2.delete(0, END)
    self.TextField3.delete(0, END)
    self.TextField4.delete(0, END) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:00:15.567

您忘记了[参数](http://docs.python.org/2/library/sqlite3.html)：

```
 nameChange1 = self.TextField2.get()
        CusNo = self.TextField1.get()
        c.execute("""
            UPDATE customer
            SET first_name = ?
            WHERE customer_id = ?""", (nameChange1, CusNo,) ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:00:01.453

代码不完整。我假设该类具有 CREATE TABLE 功能。另外，看看返回值

```
c.execute 
```

# cocoa-touch - 实现图像手势：UIImageView 模式与捏合手势冲突

> ID：15949257
> 
> 赞同：1
> 
> 时间：2013-04-11T12:50:19.950
> 
> 标签：cocoa-touch, uiscrollview, uiimageview, gestures

Pan 对我来说很好用，但是像这样使用识别器代码却不行：

```
- (void)pinchDetected:(UIPinchGestureRecognizer *)pinchRecognizer
{
    CGFloat scale = pinchRecognizer.scale;
    self.imageView.transform = CGAffineTransformScale(self.imageView.transform, scale, scale);
    pinchRecognizer.scale = 1.0;
} 
```

发生的情况是图像视图根据其“模式”不断重置图像，无论是中心，方面适合等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T22:43:22.470

我解决了我的问题：我正在制作我的第一个图像查看器，为了学习如何捏合和缩放，我天真地在谷歌上搜索了如何支持手势，这些手势不能通过简单地将图像视图添加到视图控制器来启用。

不幸的是，有很多关于这方面的“教程”，展示了如何使用手势识别器等进行编程。我花了几个小时不必要地沿着这条路线走下去。我继续前进，因为我觉得非常接近让事情正常进行：平移手势完美无缺，并且“只是”缩放被破坏了。

（附带的问题：当前的 iOS 6“最佳实践”是否有一些很棒的来源？）

事实证明，**这是错误的道路**，对于基本的手势识别来说是不必要的复杂。[所需要的只是将图像视图放在滚动视图中](https://stackoverflow.com/a/8898244/106906)。99% 的编程都得到了处理。（我确信一定是*这样*——我不敢相信这样的核心功能不会由可可触摸提供。）

# php - Htaccess 重定向问题？

> ID：15949260
> 
> 赞同：2
> 
> 时间：2013-04-11T12:50:27.300
> 
> 标签：php, .htaccess

我正在尝试重定向`www.mysite.com/movie/name`到`www.mysite.com/movie/?url=name` 为此我在电影/文件夹中添加了 htaccess，我添加的代码如下：

```
RewriteEngine On
RewriteBase /movie/
RewriteEngine On
RewriteRule ^([a-zA-Z0-9_-]+).html$ index.php?id=$1
RewriteRule ^([a-zA-Z0-9_-]+)/$ index.php?id=$1 
```

我无法重定向它，有人可以建议我正确的方法来完成这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:57:35.013

只是一个小小的改变，它应该可以工作..试试下面的代码，让我知道它是否适合你..

```
RewriteEngine On

RewriteRule ^([a-zA-Z0-9-/]+).html$ index.php?id=$1
RewriteRule ^([a-zA-Z0-9-/]+).html/$ index.php?id=$1 
```

希望能帮助到你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:00:49.270

首先，您只需要编写`RewriteEngine On`一次命令。

此外，将最后一条规则替换为

`RewriteRule ^([a-zA-Z0-9_-]+)$ index.php?id=$1`

错误在于最后一个反斜杠。

# java - AbstractTableModel - 不返回 getRowCount()

> ID：15949269
> 
> 赞同：2
> 
> 时间：2013-04-11T12:51:05.697
> 
> 标签：java, swing, jtable, abstracttablemodel

这是我将表模型添加到表中的代码：

```
table = new JTable(new TerminiTableModel());
scrollPane = new JScrollPane(table); 
```

然后我做了这个类TerminiTableModel（），这只是一个简单的生成代码，我想在其中获取列数和行数......列数工作得很好，并将3列添加到我的表中（“Termini”，“Ime i prezime ”和“纳波梅纳”）。当我在 getRowCount 中添加该行时，我得到错误，甚至无法编译它...这是代码...我对此进行了搜索，但无法弄清楚...：-/

```
public class TerminiTableModel extends AbstractTableModel implements TableModel {

    protected TableModel tableModel;

    private String[] columnNames = {"Termin", "Ime i prezime", "Napomena"};
    private String[] data = {"7:00", "8:00", "9:00" , "10:00" , "11:00" , "12:00" };

    @Override
    public void addTableModelListener(TableModelListener arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public Class<?> getColumnClass(int arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public int getColumnCount() {
        return columnNames.length;
    }

    @Override
    public int getRowCount() {
        return data.length;   //  <<----- this line is problem
    }

    @Override
    public String getColumnName(int col) {
        return columnNames[col];
    }

    @Override
    public Object getValueAt(int row, int col) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public boolean isCellEditable(int row, int col) {
        if (col > 0) {
            return true;
        } else
        return false;
    }

    @Override
    public void removeTableModelListener(TableModelListener arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void setValueAt(Object data, int row, int col) {
        // TODO Auto-generated method stub
    }
} 
```

解决方案可能很简单，但我需要一些帮助......提前谢谢你......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T13:03:01.633

编辑基于commnets

JTable 中的 rows 基于二维数组，那么

```
private String[] data = {"7:00", "8:00", "9:00" , "10:00" , "11:00" , "12:00" }; 
```

应该

```
private String[][] data = {{"7:00", null, null}, {"8:00", null, null}, 
            {"9:00", null, null}, {"10:00", null, null}, {"11:00", null, null}, 
            {"12:00", null, null}}; 
```

对于定义的列

![在此处输入图像描述](https://i.stack.imgur.com/wwqEy.jpg)

从代码

```
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.ScrollPaneConstants;
import javax.swing.event.TableModelListener;
import javax.swing.table.AbstractTableModel;

public class MyTable {

    private JFrame frame = new JFrame("TableDemo");
    private JScrollPane tableScroll = new JScrollPane();
    private MyTableModel tableModel = new MyTableModel();
    private JTable dialogTable = new JTable(tableModel);

    public MyTable() {
        dialogTable.setPreferredScrollableViewportSize(dialogTable.getPreferredSize());
        tableScroll = new JScrollPane(dialogTable, ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED,
                ScrollPaneConstants.HORIZONTAL_SCROLLBAR_AS_NEEDED);
        frame.add(tableScroll);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
        System.out.println(dialogTable.getRowCount());
        System.out.println(dialogTable.getColumnCount());
        System.out.println(tableModel.getRowCount());
        System.out.println(tableModel.getColumnCount());
    }

    private class MyTableModel extends AbstractTableModel {

        private String[] columnNames = {"Termin", "Ime i prezime", "Napomena"};
        private String[][] data = {{"7:00", null, null}, {"8:00", null, null}, 
            {"9:00", null, null}, {"10:00", null, null}, {"11:00", null, null}, 
            {"12:00", null, null}};

        @Override
        public void addTableModelListener(TableModelListener arg0) {
            // TODO Auto-generated method stub
        }

        @Override
        public Class<?> getColumnClass(int columnNames) {
            switch (columnNames) {
                case 0:
                    return String.class;//return Date.class;
                case 1:
                    return String.class;//return Double.class;
                case 2:
                    return String.class;//return Boolean.class;
                default:
                    return String.class;
            }
        }

        @Override
        public int getColumnCount() {
            return columnNames.length;
        }

        @Override
        public int getRowCount() {
            return data.length;   //  <<----- this line is problem
        }

        @Override
        public String getColumnName(int col) {
            return columnNames[col];
        }

        @Override
        public Object getValueAt(int row, int col) {
            // TODO Auto-generated method stub
            return null;
        }

        @Override
        public boolean isCellEditable(int row, int col) {
            if (col > 0) {
                return true;
            } else {
                return false;
            }
        }

        @Override
        public void removeTableModelListener(TableModelListener arg0) {
            // TODO Auto-generated method stub
        }

        @Override
        public void setValueAt(Object data, int row, int col) {
            // TODO Auto-generated method stub
        }
    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                MyTable myTable = new MyTable();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T13:03:07.940

造成的错误是这样的：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException 
```

这是由于未指定列类引起的：

```
@Override
public Class<?> getColumnClass(int arg0) {
   return String.class;
} 
```

也不`getValueAt`返回任何数据。您正在使用一维数组来存储数据，鉴于`JTable`数据以行和列表示，您需要使用二维数组。

# android - 如何获得相对于 Android 中另一个视图的视图位置？

> ID：15949275
> 
> 赞同：1
> 
> 时间：2013-04-11T12:51:20.993
> 
> 标签：android, android-imageview, android-view

我正在为 Android 制作一个应用程序，它使用 ImageView 在屏幕上显示相机图像（经过一些操作后），我想允许在屏幕上移动其他 ImageViews - 但只能在父 ImageView 内移动。

另外，我需要获取子视图相对于父 ImageView 坐标的坐标。ie - 这样 (0,0) 将不是整个屏幕，而是显示相机的 ImageView。

这有可能吗？如果是这样 - 如何？

非常感谢您的帮助！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:36:07.920

如果你想通过拖动来移动视图，这里有很多信息，例如[，带有触摸事件的移动图像](https://stackoverflow.com/questions/11790477/moving-image-with-touch-events)。

通过一些简单的减法来获得`minorView`相对于它的顶部和左侧怎么样也很简单。使用[View.getLocationInWindow()](http://developer.android.com/reference/android/view/View.html#getLocationInWindow%28int%5B%5D%29)获取这些绝对位置。`majorView``minorViewRelativeTop = minorViewTop - majorViewTop`

注意 这`View.getLocationInWindow()`通常在内部不起作用，`Activity.onCreate()`所以最好在延迟一段时间后调用它。对于测试它可能是这样的：

```
majorView.postDelayed(new Runnable() {
            @Override
            public void run() {
                int[] location = new int[2];
                majorView.getLocationInWindow(location);
                int majorViewLeft = location[0];
                int majorViewTop = location[1];
            }
        }, 1000); 
```

# java - 你能解释一下这种 Java Regex 情况的奇怪行为吗？

> ID：15949276
> 
> 赞同：1
> 
> 时间：2013-04-11T12:51:23.650
> 
> 标签：java, regex

我一直在使用下面的代码来尝试从我提供的文本中提取不同的部分。

它应该挑选出数字，然后将任何用`[`大括号或`"`引号括起来的部分放入组中。这是代码。

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class Launcher2 {

    /**
     * @param args
     */
    public static void main(String[] args) {
        PrintRegexes("100.000[$₮-45]");
    }
    public static void PrintRegexes(String textToMatch){
        Pattern p = Pattern.compile("(\\[.*?\\]|\".*?\")?.*?(\\d{1,3}(?:,\\d{3})*?(?:\\.\\d+)?).*?(\\[.*?\\]|\".*?\")",Pattern.CASE_INSENSITIVE | Pattern.DOTALL);
        Matcher m = p.matcher(textToMatch);
        if (m.find())
        {
            for(int groups =0;groups<m.groupCount();groups++){
                System.out.println("Group "+groups+" contains "+m.group(groups));
            }
            for(int groups =0;m.find(groups);groups++){ //this will error, but right now, it's the least of my concerns
                System.out.println("Group "+groups+" contains "+m.group(groups));
            }
        }

    }
}

Group 0 contains 100.000[$₮-45]
Group 1 contains null
Group 2 contains 100.000
Group 3 contains [$₮-45]
Group 0 contains 100.000[$₮-45]
Group 1 contains null
Group 2 contains 0.000
Group 3 contains [$₮-45]
Exception in thread "main" java.lang.IndexOutOfBoundsException: No group 4 //don't care about this, I've got bigger strings(fish) to regex(fry) at the moment!
    at java.util.regex.Matcher.group(Unknown Source)
    at Launcher2.PrintRegexes(Launcher2.java:21)
    at Launcher2.main(Launcher2.java:10) 
```

所有组都相同，除了`group 2`一个打印为`0.000`，一个打印为`100.000`。

**为什么是这样？**

如果我在数字前面和后面有一些东西，这种行为就会消失。

如果我只是在前面放一些东西，我会得到这个输出：

```
Group 0 contains [$₮-45]100.000
Group 1 contains [$₮-45]
Group 2 contains 100.000
Group 3 contains null
Group 0 contains [$₮-45]100.000
Group 1 contains null
Group 2 contains 45
Group 3 contains null 
```

甚至更奇怪！（对我来说）最奇怪的部分是它可以在 www.debuggex.com 上运行。

我写错了我的模式吗？还是 matcher 没有计算出这个方法何时`Matcher m = p.matcher(textToMatch);`构造它的组，这会影响它的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:04:38.813

我可以在这里看到两个问题。

首先，您`m.find()`多次调用该组作为参数，这并不像您认为的那样起作用。
如果您查看[find(int start) 的 JavaDoc](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#find%28int%29)，您会看到它重置了匹配器，然后从输入的指定字符开始重新开始搜索。这解释了在以后的迭代中匹配的较短的数字序列。

其次，您需要循环直到`groups <= m.groupCount()`获取所有组：

```
 Pattern p =
            Pattern.compile("(\\[.*?\\]|\".*?\")?.*?(\\d{1,3}(?:,\\d{3})*?(?:\\.\\d+)?).*?(\\[.*?\\]|\".*?\")",
                Pattern.CASE_INSENSITIVE | Pattern.DOTALL);
    Matcher m = p.matcher(textToMatch);
    if (m.find()) {
        for (int groups = 0; groups <= m.groupCount(); groups++) {
            System.out.println("Group " + groups + " contains " + m.group(groups));
        }
    } 
```

印刷

> 第 0 组包含 100.000[$₮-45]
> 第 1 组包含 null
> 第 2 组包含 100.000
> 第 3 组包含 [$₮-45]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:17:35.927

看起来问题出在这部分：`(?:,\\d{3})*?`

我想你需要`((?:,\\d{3})*)?`

# php - 如何在 php 中获取最后一个受影响的表

> ID：15949278
> 
> 赞同：0
> 
> 时间：2013-04-11T12:51:28.230
> 
> 标签：php, mysql

我想获得最后一个受影响的表名（插入后）。

我试过了，`mysql_insert_id()`但我只有`id`. 我也想要表名。

谁能给我关于我的问题的想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:42:44.867

这是一个伸展...但如果：

*   你正在运行 mysql 5.6.3 +
*   您仍然可以访问插入查询（假设它是 $query）
*   你确定这是一个插入查询（因为，嘿，你知道你想要last_insert_*，不是吗？）

你可以试试：

```
$row = mysql_fetch_assoc(mysql_query("explain $query"));
$table = $row['table']; 
```

从 mysql 5.6.3+ 开始，您可以结合`explain`查询`insert into`。我认为这应该只返回 1 行。我自己没有 mysql 5.6.3+ 来测试它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:06:55.257

您在评论中提到您正在使用一个通用函数来应用更改，从而阻止您“知道”您插入的最后一个表是什么。

如果是这样的话：**你的逻辑是有缺陷的**。

MySQL 不会告诉你最后一个表是在哪个表中插入的。你必须在你的函数中编写一个钩子，你最后知道你要更新哪个表。无论您使用什么函数，都**必须**在执行插入之前指定一个表名。您此时存储表名。

您可以通过多种方式做到这一点，具体取决于您的需要：

1.  将其存储在 mysql 表中（例如，last_updated_table 只有 1 列）
2.  将它存储在一个变量中（如果你只需要它在同一个请求中）
3.  将其存储在会话中（我不会选择这个）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T13:08:01.850

`information_schema`如果你有一个数据库，你可以使用：

```
SELECT TABLE_SCHEMA, TABLE_NAME, UPDATE_TIME 
FROM TABLES
ORDER BY UPDATE_TIME DESC 
LIMIT 0,1 
```

在查询后使用它，您将获得受影响的表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T13:11:40.813

您可以覆盖[本文](http://azgtech.wordpress.com/tag/override-mysql_query/)`mysql_query`中定义的函数，将上次调用表名称保存在全局变量或会话中，并为最后调用的插入完成祈祷。

```
// THIS JUST SAMPLE... use code from link below ^
function custom_mysql_query($query){
    if(strstr('INSERT',$query)){
        /*GET YOUR TABLE NAME WITH REGEX*/
    }

    basic_mysql_query($query);
} 
```

这对我来说是**非常非常非常糟糕的解决方案**。但理论上会起作用。

# vb.net - 我可以在查询表达式语法中指定 Queryable.GroupBy（而不是 Enumerable.GroupBy）吗

> ID：15949279
> 
> 赞同：2
> 
> 时间：2013-04-11T12:51:30.027
> 
> 标签：vb.net, linq, expression-trees, linq-query-syntax

当我编写`Group By`in 查询表达式语法时，编译器会自动选择`Enumerable.GroupBy`我想要的 tareget 方法，我得到一个`IEnumerable`back 而不是`IQueryable`. 这意味着后续`g.Sum`调用（在 my 内部`Select`）需要 a`Func(Of TSource, int)`而不是`Expression(Of Func(Of TSource, int))`. 有没有办法强制`Group By`使用它`Queryable.GroupBy`并给我一个`IQueryable`？

**人为的示例代码**

```
Dim myQuery = From x In DataSource.Items
              Group By x.Key Into g = Group
              Select New With {
                  .Key = Key,
                  .RedItems = g.Sum(ItemsOfColor(Colors.Red)) '<== invalid because g.Sum expects a lambda
              }

Private Function PurpleItems(color As Integer) As Expression(Of Func(Of Item, Integer))
    Return Function(item) If(item.Color = color, 1, 0)
End Function 
```

**我为什么要这样做？** 编译器会根据目标变量类型自动在 lambda 和表达式之间进行转换（即`Dim f As Func(Of String, Integer) = Function(x) x.Length()`和都是有效的），因此 an和`Dim e As Expression(Of Func(Of String, Integer)) = Function(x) x.Length()`之间的代码没有明显差异。`IEnumerable``IQueryable`

问题是，LINQ to Entities（我假设其他数据库支持的 LINQ 实现）依赖于表达式树来转换为 SQL。这意味着`IEnumerable`lambda 版本*不会*`IDbSet`像我在[这个](https://stackoverflow.com/q/11679553/794234)旧问题中发现的那样对抗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T21:50:56.270

问题是`Queryable.GroupBy()`返回`IQueryable<IGrouping<TKey, TSource>>`，在哪里`IGrouping<TKey, TSource>`实现`IEnumerable<TSource>`，但不是`IQueryable<TSource>`。

而且我相信您的代码无论如何都不会起作用，因为`ItemsOfColor()`实际上不会被调用。相反，EF 会得到一个调用`ItemsOfColor()`. 而且由于它不知道那个方法，它会抛出一个异常。

# julia - 朱莉娅：如何擦拭朱莉娅

> ID：15949295
> 
> 赞同：4
> 
> 时间：2013-04-11T12:52:27.530
> 
> 标签：julia

如何从我的系统中彻底清除（删除）Julia？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-11T19:49:54.083

除非您对包中的代码进行了更改，否则您可以在遇到麻烦时删除整个 .julia 目录。通过文件管理器，或者（在 Unix 系统上）通过命令行，

```
rm -rf ~/.julia 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-04-01T23:05:22.993

蒂姆的回答很好，但是你也可以更具体一点。我通常会执行以下操作（因为我使用的是 v0.5，所以路径有 v0.5，但是，这取决于您使用的版本）：

```
rm -rf ~/.julia/lib/v0.5 ~/.julia/v0.5/<packagename> 
```

删除 lib 子目录会删除任何预编译代码，这些代码也可能处于错误状态。

# c# - 确定整数溢出是否超过或低于界限

> ID：15949297
> 
> 赞同：1
> 
> 时间：2013-04-11T12:52:30.123
> 
> 标签：c#, .net, overflowexception

使用[C#](http://en.wikipedia.org/wiki/C_Sharp_%28programming_language%29)，我有一些自定义类，我需要能够检测整数溢出并返回默认的最小值或最大值，具体取决于溢出是由于结果超过最大值还是低于最小值。我似乎找不到关于如何检测任何地方发生的溢出“类型”的建议。

这些类分为两种一般类型：使用有符号值的类和使用无符号值的类。

例如，这是处理 Int32 值的类之一：

```
public class Stat32Tf : IStat32T<float>
{
    #region fields

    private int baseValue, baseAdjustment;
    private float baseMultiplier;

    #endregion

    #region ctors

    public Stat32Tf()
    {
        baseValue = 0;
        baseAdjustment = 0;
        baseMultiplier = 1f;
    }

    public Stat32Tf(int baseValue, int baseAdjustment = 0, float baseMultiplier = 1f)
    {
        this.baseValue = baseValue;
        this.baseAdjustment = baseAdjustment;
        this.baseMultiplier = baseMultiplier;
    }

    #endregion

    #region properties

    public int BaseValue
    {
        get 
        { 
            return baseValue; 
        }
        set 
        {
            baseValue = value; 
        }
    }

    public int BaseAdjustment
    {
        get 
        { 
            return baseAdjustment; 
        }
        set 
        { 
            baseAdjustment = value; 
        }
    }

    public float BaseMultiplier
    {
        get 
        { 
            return BaseMultiplier; 
        }
        set 
        { 
            baseMultiplier = value; 
        }
    }

    public int TruncValue
    {
        get 
        { 
            return (int)Value; 
        }
    }

    public float Value
    {
        get 
        { 
            return (baseValue + baseAdjustment) * baseMultiplier; 
        }
    }

    #endregion

} 
```

如您所见，该类的思想是保存一个基值、一个调整值和一个乘数值，并在 Value 属性中返回聚合值。（正如它所暗示的，TruncValue 属性只是返回截断的整个值，删除任何小数值）。

目标是处理 Value 属性的“get”访问器中的溢出，如果结果超过最大 int 值，则返回 int.MaxValue，如果低于最小值，则返回 int.MinValue，所有这些都不会抛出实际溢出错误。让我感到棘手的部分是调整值和乘数也可能是负值（根据设计要求）。

实现这一目标的安全方法是什么？我还没有找到任何资源来解决这种情况。我猜需要使用某种算术算法来确定结果是否超过或低于。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T13:07:51.933

只有少数情况下可能下溢：

*   如果 baseValue 和 baseAdjustment 都是负数 -> 如果 Int.MinValue - baseAdjustment > baseValue 那么你有一个下溢。

*   如果 baseValue + baseAjustment 为负且 baseMultiplier 为正 -> 如果引发溢出异常，则只能是下溢。

*   如果 baseValue + baseAdjustment 为正但 baseMultiplier 为负 -> 如果引发溢出异常，则只能是下溢。

如果您想避免引发/捕获异常，那么它可能会更复杂一些（您可能希望将结果转换为 long 并将其与 Int.MaxValue 进行比较；这样它只会在结果超过时引发异常长。最大值）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:04:23.967

花车挺大的。您是期望 get 值溢出还是期望强制转换为 int 溢出？如果只是演员表，则类似于以下代码的内容可能会起作用。

```
//This answer is wrong, see below.
public int TruncValue
{
    get
    {
        if (Value > (float)int.MaxValue)
        {
            return int.MaxValue
        }
        else if (Value < (float)int.MinValue)
        {
            return int.MinValue
        }
        else
        {
            return (int)Value;
        }
    }
} 
```

尽管您可能需要对边缘情况进行一些额外的处理。

编辑 - 我在一些代码中玩弄了这个，发现了一些我没想到的行为，但显然它在规范中。

例如，

```
var Value = int.MaxValue + int.MaxValue //Ends up returning -2 with no exception in debug mode.
var MaxCalculatedValue = (int.MaxValue + int.MaxValue) * float.MaxValue //Ends up returning something like -3.4... ^38. 
```

您确实可能需要将所有内容都转换为双精度，然后检查结果是否大于或小于 int。

所以它可能看起来像这样：

```
public float Value
{
    get
    {
        var result = ((double)baseValue + (double)baseAdjustment) * (double)baseMultiplier;
        if (result > (double)int.MaxValue)
        {
           return (float)int.MaxValue)
        }
        if (result < (double)int.MinValue)
        {
           return (float)int.MinValue)
        }
        return (float)result;
    }
} 
```

# r - 检测 R 中包之间的冲突

> ID：15949298
> 
> 赞同：11
> 
> 时间：2013-04-11T12:52:33.980
> 
> 标签：r, package, conflict

我最近发现错误可能是由于包之间的冲突引起的，也就是说，两个（或更多）包可能具有类似命名的函数。我知道代码`search ()`会生成按 R 读取它们的方式排序的包列表。还有`args`代码给出了R读取的函数。
我首先想知道的是如何检测是否由于包之间的冲突而产生错误，其次如何找出哪些包发生冲突？最后，在检测到冲突之后，我们如何强制 R 专门使用其中一个包中的功能？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T13:02:01.823

如果 R 加载一个新包，如果该新包包含工作环境中已经存在的任何功能，它将产生警告。所以如果你在包加载的时候注意一下，你可以看看有没有冲突。当存在冲突时，您可以强制 R 使用特定包中的函数，如下所示：

```
package_name::function_name 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-11T13:26:28.693

正如@Paul 所说，在附加（例如通过`library`函数）一个包时，您可能会得到：

```
> library("gdata", lib.loc="C:/Program Files/R/R-2.15.3/library")
gdata: read.xls support for 'XLS' (Excel 97-2004) files ENABLED.

gdata: read.xls support for 'XLSX' (Excel 2007+) files ENABLED.

Attaching package: ‘gdata’

The following object(s) are masked from ‘package:stats’:

    nobs

The following object(s) are masked from ‘package:utils’:

    object.size 
```

在我的示例中，当您收到“以下对象被屏蔽”时，意味着 R 会将对这些函数的调用视为对新包中函数的调用`gdata`。

您可以通过以下方式避免这种情况：

```
> nobs
function (object, ...) 
UseMethod("nobs")
<environment: namespace:gdata>
> stats::nobs
function (object, ...) 
UseMethod("nobs")
<bytecode: 0x0000000008a92790>
<environment: namespace:stats 
```

希望有帮助

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-11T13:42:58.517

我认为您正在寻找`getAnywhere`哪个会告诉您它的论点存在的所有地方。例如（在我当前的负载集中）：

```
Rgames> getAnywhere(logit)
2 differing objects matching ‘logit’ were found
in the following places
  package:boot
  package:pracma
  namespace:boot
  namespace:pracma
Use [] to view one of them 
```

# macos - 如何在不升级依赖项的情况下使用“端口安装”？

> ID：15949299
> 
> 赞同：4
> 
> 时间：2013-04-11T12:52:38.800
> 
> 标签：macos, installation, macports

随着越来越多的端口依赖于大量其他端口，并且这些端口经常升级，由于不必要的依赖升级，单个端口的安装可能需要很长时间。

我可以在安装新端口时以某种方式为我不想升级现有依赖端口的 macport 指定吗？

就像是

```
sudo port install --no-deps portname  #  but this does not work 
```

我检查了 macports 指南，尝试用谷歌搜索，我发现最相似的问题是[Debian：如何在不升级依赖项的情况下使用“apt-get install”？](https://serverfault.com/questions/316412/debian-how-to-use-apt-get-install-without-upgrading-dependencies?lq=1)我已经尝试了答案中的选项，但它不适用于 macports。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T13:36:41.640

感谢，马克！

我查看了端口选项，`man port`发现了以下非常简单的方法：

```
-n       don't upgrade dependencies (affects upgrade and install) 

-b       binary-only mode (build and install from binary archives, ignore
         source, abort if no archive available) 
```

所以`port -bn install someport`可以尝试作为最快的方法。

# windows-8 - 在 Windows 8 上的 WINdows Phone 8 模拟器中使用 Fiddler

> ID：15949300
> 
> 赞同：2
> 
> 时间：2013-04-11T12:52:43.600
> 
> 标签：windows-8, windows-phone

我正在开发一个 Windows Phone 8 应用程序。我正在 Windows 8 Pro 机器上开发这个应用程序。我的应用程序成功访问了我的后端服务器。我需要做一些调试。我打开 Fiddler 并注意到没有记录流量（尽管我知道应该记录一些流量。）然后我按照此处的说明进行操作：[http ://www.spikie.be/blog/post/2013/01 /04/Windows-Phone-8-and-Fiddler.aspx](http://www.spikie.be/blog/post/2013/01/04/Windows-Phone-8-and-Fiddler.aspx)。

不幸的是，仍然没有记录流量。我不确定在哪里可以解决这个错误。我可以看到我桌面上的网络浏览器中的流量正在被记录。但是，不会记录模拟器中的任何网络流量。我怎样才能解决这个问题？

我已确保选中“允许远程计算机连接”。我使用带有我的机器名称的 prefs set 命令。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T18:44:16.947

请参阅有关如何将 Fiddler 与 Windows Phone 8 模拟器一起使用的详细信息 [http://blogs.msdn.com/b/wsdevsol/archive/2013/06/05/configure-the-windows-phone-8-emulator-to-work -with-fiddler.aspx](http://blogs.msdn.com/b/wsdevsol/archive/2013/06/05/configure-the-windows-phone-8-emulator-to-work-with-fiddler.aspx)

# xml - 如何替换 XML 属性名称值

> ID：15949302
> 
> 赞同：2
> 
> 时间：2013-04-11T12:52:45.577
> 
> 标签：xml, perl, xml-twig

我有以下 XML：

```
<resources xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <resource id="kig" type="com.ac.resourcedata.xml" site="ki">
    <property name="name1">value1</property>
    <property name="name2">value2</property>
  </resource>
</resources> 
```

我需要将 value1 修改为其他内容，到目前为止，我可以编写以下 Perl 脚本：

```
use strict;
use XML::Twig;

my $file = $ARGV[0];
my $twig=XML::Twig->new(   
    twig_handlers => { 
        parameter  => sub {
            if ($_->att('name') eq 'name1') {
                ->set_att(new value) 
            }
        }
    },
    pretty_print => 'indented',
);

$twig->parsefile($file);

$twig->print(\*XMLOUT) or
die "Failed to write modified XML file:$!\n";

close XMLOUT;

$twig->flush(); 
```

但什么都没有改变！任何想法都非常感谢。

问候，贝扎德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:07:44.447

您的代码存在一些问题：

*   它不编译：`->set_att`不是一个有效的语句

*   使用`use warnings`会让你知道 XMLOUT 有问题，你会得到`print() on unopened filehandle XMLOUT`，如果你想输出到文件，使用`print_to_file`

*   你的处理程序是 on `parameter`，当你要更新的元素被调用`property`时，实际上你甚至可以指定你只想`property`在属性名称`name1`直接在处理程序触发器中时更新：`property[@name="name1"]`

*   看起来您想要的是更改属性的文本，而不是属性

修复所有这些后，您会得到

```
#!/usr/bin/perl

use strict;
use warnings;

use autodie qw( open);

use XML::Twig;

my $file = $ARGV[0];
my $twig=XML::Twig->new(   
    twig_handlers => { 
        'property[@name="name1"]'  => sub { $_->set_text('value') }
    },
    pretty_print => 'indented',
);

$twig->parsefile($file);
$twig->print_to_file( $file); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T13:19:09.847

您已经为元素设置了一个`XML::Twig`处理程序`parameter`，但您的数据中没有任何内容，因此没有任何内容被修改。

此外

*   `use strict`很好，但你也应该`use warnings`

*   `XMLOUT`您永远不会在句柄上打开文件。使用模块的`print_to_file`方法更简单，避免必须自己打开文件

我*认为*您想要做的是查找元素的`name`属性`property`并将它们设置为其他值，如果它们当前等于`name`.

这段代码将为您做到这一点。

```
use strict;
use warnings;

use XML::Twig;

my ($file) = @ARGV;

my $twig = XML::Twig->new(   
    twig_handlers => { 
        property => sub {
            if ($_->att('name') eq 'name1') {
                $_->set_att(name => 'something else');
            }
        }
    },
    pretty_print => 'indented',
);

$twig->parsefile($file);

$twig->print_to_file('xmlout.xml'); 
```

**输出**

```
<resources xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <resource id="kig" site="ki" type="com.ac.resourcedata.xml">
    <property name="something else">value1</property>
    <property name="name2">value2</property>
  </resource>
</resources> 
```

# php - 使用文件“php.ini”关闭显示错误

> ID：15949304
> 
> 赞同：43
> 
> 时间：2013-04-11T12:52:58.630
> 
> 标签：php

我正在尝试关闭我网站上的所有错误。我已经按照不同的教程来了解如何做到这一点，但我一直在阅读和打开错误消息。有什么我想念的吗？

我在我的*php.ini*文件中尝试了以下内容：

```
;Error display
display_startup_errors = Off
display_errors = Off
html_errors = Off
docref_root = 0
docref_ext = 0 
```

出于某种原因，当我对不存在的文件执行 fileopen() 调用时，仍然会显示错误。出于显而易见的原因，这对于实时网站来说是不安全的。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-11T12:59:40.627

我总是在配置文件中使用这样的东西：

```
// Toggle this to change the setting
define('DEBUG', true);

// You want all errors to be triggered
error_reporting(E_ALL);

if(DEBUG == true)
{
    // You're developing, so you want all errors to be shown
    display_errors(true);

    // Logging is usually overkill during development
    log_errors(false);
}
else
{
    // You don't want to display errors on a production environment
    display_errors(false);

    // You definitely want to log any occurring
    log_errors(true);
} 
```

这允许在调试设置之间轻松切换。您可以通过检查代码在哪个服务器上运行（开发、测试、验收和生产）来进一步改进这一点，并相应地更改您的设置。

请注意，如果 error_reporting 设置为 0，则不会记录任何错误，正如 Korri 巧妙地指出的那样。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2014-02-11T10:52:26.767

您应该考虑**不显示**错误消息！

在您的 PHP 代码中设置`ini_set('display_errors', 'Off');`（或直接在您的 ini 文件中，如果可能的话），并保留 error_reporting`E_ALL`或您希望在日志中找到的任何类型的消息。

这样您就可以在以后处理错误，而您的用户仍然看不到它们。

### 完整示例：

```
define('DEBUG', true);
error_reporting(E_ALL);

if (DEBUG)
{
    ini_set('display_errors', 'On');
}
else
{
    ini_set('display_errors', 'Off');
} 
```

### 或者简单地说（同样的效果）：

```
define('DEBUG', true);

error_reporting(E_ALL);
ini_set('display_errors', DEBUG ? 'On' : 'Off'); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-04-11T13:01:25.340

在`php.ini`中，注释掉：

```
error_reporting = E_ALL & ~E_NOTICE
error_reporting = E_ALL & ~E_NOTICE | E_STRICT
error_reporting = E_COMPILE_ERROR|E_RECOVERABLE_ERROR|E_ER… _ERROR
error_reporting = E_ALL & ~E_NOTICE 
```

`;`通过在它前面放置一个（即，like `;error_reporting = E_ALL & ~E_NOTICE`）

**要在单个文件中禁用**`error_reporting(0);`，请在打开`php`标签后放置。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-04-01T15:45:35.370

在文件*php.ini*中，您应该对所有错误尝试此操作：

```
error_reporting = off 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-07-30T01:16:00.057

让我快速总结一下以供参考：

*   [`error_reporting()`](http://php.net/error_reporting)调整默认错误处理程序的当前活动设置。

*   编辑[错误报告 ini 选项](http://php.net/manual/en/errorfunc.configuration.php)也会更改默认值。

    *   在这里，必须编辑*正确* `php.ini`的版本——它通常`/etc/php5/fpm/php.ini`在现代服务器上，`/etc/php5/mod_php/php.ini`或者；而 CLI 版本有一个不同的版本。

    *   或者，您可以根据 SAPI 使用：

        *   mod_php：`.htaccess`带`php_flag`选项
        *   FastCGI：通常是本地的`php.ini`
        *   并且 PHP 5.3 以上也是一个`.user.ini`

    *   像往常一样重新启动网络服务器。

如果您的代码笨拙，并且在运行时以某种方式在其他地方重置了这些选项，那么另一种快速的方法是定义一个自定义错误处理程序，它只会消除所有通知/警告/错误：

```
set_error_handler(function(){}); 
```

同样，这是不可取的，只是一种替代方法。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-03-10T04:26:18.177

在文件*php.ini*中，您应该对所有错误尝试此操作：

```
display_errors = On 
```

位置文件是：

*   Ubuntu 16.04：/etc/php/7.0/apache2
*   CentOS 7:/etc/php.ini

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-04-11T12:54:47.437

你也可以使用 PHP 的`error_reporting();`

```
// Disable it all for current call
error_reporting(0); 
```

如果你只想忽略一个函数的错误，你可以在前面加上一个`@`符号。

```
@any_function(); // Errors are ignored 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-04-11T13:00:28.353

如果关闭则关闭：

您可以在 fileopen() 前面使用[`error_reporting();`](http://php.net/manual/en/function.error-reporting.php)或[放置一个 @ 。](http://www.php.net/manual/en/language.operators.errorcontrol.php)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-03-10T04:33:01.043

我通常使用 PHP 内置的错误处理程序，它可以处理语法之外的所有可能错误，并且仍然呈现一个不错的“停机维护”页面，否则：

*[在生产服务器上格式化 PHP 错误](https://stackoverflow.com/questions/28928565/format-php-error-on-production-server/28928975#28928975)*

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-07-30T23:50:25.433

已经有一段时间了，我确信 OP 的答案已被清除。如果任何新用户仍在寻找答案并滚动到这里，那么就是这样。

## 检查 php.ini 文件中的更新信息

### 使用 Windows 资源管理器：

```
C/xampp/php/php.ini 
```

### 使用 XAMPP 控制面板

1.  单击“Apache”的配置按钮（停止 | 管理员 | 配置 | 日志）
2.  选择 PHP (php.ini)

### 我可以创建自己的 phpinfo() 吗？是的你可以

1.  直接在你的根目录或任何你想要的地方创建一个 phpinfo.php
2.  放置这个`<?php phpinfo(); ?>`
3.  保存文件。
4.  打开文件，您应该会看到所有详细信息。

### 如何在不使用 php.ini 的情况下在我自己的文件`display_errors`中设置`Off`

您可以使用`ini_set()`函数来执行此操作。在此处阅读有关 ini_set() 的更多信息（[https://www.php.net/manual/en/function.ini-set.php](https://www.php.net/manual/en/function.ini-set.php)）

1.  转到您的 header.php 或 index.php
2.  添加此代码`ini_set('display_errors', FALSE);`

### 在不访问 php.ini 文件的情况下检查输出

```
$displayErrors = (ini_get('display_errors') == 1) ? 'On' : 'Off';
$PHPCore = array(
    'Display error' => $displayErrors
    // add other details for more output
);
foreach ($PHPCore as $key => $value) {
    echo "$key: $value";
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-01-05T09:26:52.707

打开您的 php.ini 文件（如果您使用的是 Linux - sudo vim /etc/php5/apache2/php.ini）

将此行添加到该文件中

```
 error_reporting = E_ALL & ~E_WARNING 
```

（如果您需要禁用任何其他错误 -> error_reporting = **E_ALL & ~E_DEPRECATED & ~E_STRICT & ~E_NOTICE & ~E_WARNING**）

```
 display_errors = On 
```

最后你需要重启你的 APACHE 服务器。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-01-25T16:55:52.047

在 PHP fpm 的情况下是不够的。这是另一个可以启用的配置文件`display_error`。你应该找到**www.conf**。在我的情况下，它位于目录*/etc/php/7.1/fpm/pool.d/*

您应该找到`php_flag[display_errors] = on`并禁用它，`php_flag[display_errors] = off`. 这应该可以解决问题。

# c# - asp.net DropDownList c#

> ID：15949308
> 
> 赞同：2
> 
> 时间：2013-04-11T12:53:07.373
> 
> 标签：c#, asp.net, webforms

我需要知道如何从下拉列表中显示数据。例如：

下拉列表

**选择图片**
汽车
船
钓鱼

用户看到的第一件事是选择图像下拉菜单。用户将看到从选择图像下拉列表中显示的一些随机图片。

如果用户按下列表中的汽车图片，则会显示新图片，以此类推。

每张图片都会显示在 html 表格中，类似于我绘制的图片（下图）。假设每个列表有三张图片，那么这三张图片中的每一张都会显示在表格中（如下所示）。

![示例截图](https://i.stack.imgur.com/lLK9F.png)

这是我到目前为止编写的代码。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Configuration;
using System.Data;
using System.Data.SqlClient;
using System.Text;
using System.Collections;

namespace Prototype
{
    public partial class HomePage : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {
                FillddlPictuer();
            }
        }

        public void FillddlPictuer()
        {
            string cs = ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString;

            using (SqlConnection conn = new SqlConnection(cs))
            {
                SqlCommand cmd = new SqlCommand("SELECT * FROM pictuer", conn);

                try
                {
                    conn.Open();
                    SqlDataReader readeer = cmd.ExecuteReader();

                    ListItem newItem = new ListItem();
                    newItem.Text = "Select Image";
                    newItem.Value = "0";
                    ddlMovie.Items.Add(newItem);

                    while (readeer.Read())
                    {
                        newItem = new ListItem();
                        newItem.Text = readeer["name"].ToString();
                        newItem.Value = readeer["id"].ToString();
                        ddlMovie.Items.Add(newItem);
                    }
                    StringBuilder sb = new StringBuilder();

                }

                catch
                { 
                    //Handel any error
                    conn.Close();
                }

            } //Close the first using  
        }
    }
} 
```

主页代码

```
<%@ Page Title="" Language="C#" MasterPageFile="~/MasterPage.Master" AutoEventWireup="true" CodeBehind="HomePage.aspx.cs" Inherits="Prototype.HomePage" %>
<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolderMainSection" runat="server">
    <div id="ImageGalleryBorder"></div>
    <div id="ChampionBorder"></div>
    <div id="OtherStuffBorder">  
    </div>
</asp:Content>
<asp:Content ID="Content3" ContentPlaceHolderID="ContentPlaceHolderMainAside" runat="server">
    <h1>New videos</h1>
    <asp:DropDownList ID="ddlMovie" runat="server"
        CssClass="DropDownListAside">
    </asp:DropDownList>
    <asp:Label ID="lblOutput" runat="server" Text="Label" Visible="False"></asp:Label>
    <br />
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T13:53:57.193

1.  更改 SQL 中的图片表以包含**路径**列，这将用于存储服务器上图像的路径：
2.  将 Pictuer 表重命名为**Picture**

![在此处输入图像描述](https://i.stack.imgur.com/hlnCm.jpg)

**ASPX：**

```
<asp:ScriptManager ID="sm" runat="server" />
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <ContentTemplate>
        <asp:DropDownList ID="ddlMovie" runat="server" AutoPostBack="true" OnSelectedIndexChanged="MovieChanged" />
        <asp:PlaceHolder ID="pictures" runat="server" />
        <span id="error" runat="server" />
    </ContentTemplate>
</asp:UpdatePanel> 
```

**后面的代码：**

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        GetPictures();
        AddPicture(ddlMovie.SelectedItem.Value);
        ReDisplayPictures();
    }
}

private void ReDisplayPictures()
{
    List<string> imagePaths = ViewState["Images"] as List<string>;
    if (imagePaths != null)
    {
        foreach (string path in imagePaths)
        {
            var image = new Image{Width = 100,Height = 100,ImageUrl = path};
            pictures.Controls.Add(image);
        }
    }
}

private void AddPicture(string imageUrl)
{
    List<string> imagePaths = ViewState["Images"] as List<string>;
    if (imagePaths == null)
        imagePaths = new List<string>();

    imagePaths.Add(imageUrl);
    ViewState["Images"] = imagePaths;
}

protected void MovieChanged(object sender, EventArgs e)
{
    AddPicture(ddlMovie.SelectedItem.Value);
    ReDisplayPictures();
}

private void GetPictures()
{
    try
    {
        string cs = ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString;
        using (var conn = new SqlConnection(cs))
        {
            using (var command = new SqlCommand("SELECT * FROM Picture", conn))
            {
                conn.Open();
                SqlDataReader reader = command.ExecuteReader();
                while (reader.Read())
                {
                    string name = reader["name"].ToString();
                    string path = reader["path"].ToString();
                    var item = new ListItem { Text = name, Value = path };
                    ddlMovie.Items.Add(item);
                }
            }
            conn.Close();
        }
    }
    catch (Exception eX)
    {
        error.InnerHtml = String.Format("An error occured, description - {0}",
            eX.Message);
    }
} 
```

}

我为您创建了一个示例项目，您可以从 Google 驱动器[在此处](https://docs.google.com/file/d/0B0iPiW5jXDdPdTlTVTFCU3YzSGc/edit?usp=sharing)下载（只需单击文件->下载）

# performance - 通道工厂与服务代理

> ID：15949315
> 
> 赞同：1
> 
> 时间：2013-04-11T12:53:32.190
> 
> 标签：performance, wcf, wcf-binding

何时使用通道工厂，何时使用 WCF 中的服务代理？

我的绑定是 NetNamedPipeBinding。我打算使用双工连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:31:02.427

**何时使用代理？**

我们使用 svcutil.exe 创建代理。该工具的输出提供了一个代理类并对应用程序配置文件进行了相应的更改。如果您知道某个服务将被多个应用程序使用，或者其通用性足以在多个地方使用，那么您将希望继续使用生成的代理类。我们在 WCF 中使用代理来与客户端共享服务合同和实体。代理有几个限制，比如他们需要获取和设置，不能暴露构造函数，不能暴露服务契约以外的方法，重复代码，每次我们添加/修改服务契约/数据契约/消息契约时，我们需要为客户端重新生成代理。

**何时使用 ChannelFactory**

另一种选择是使用 ChannelFactory 类在客户端和服务之间构建一个通道，而不需要代理。在某些情况下，您可能拥有与客户端应用程序紧密绑定的服务。在这种情况下，直接引用接口 DLL 并使用 ChannelFactory 调用您的方法是有意义的。ChannelFactory 路由的一个显着优势是它使您可以访问如果您使用 svcutil.exe 则无法使用的方法。

**何时使用 ChannelFactory 与 Proxy 类？**

如果客户端代码在您的控制之下，并且您希望与客户端共享的不仅仅是服务合同——例如与实体关联的一些实用方法，并使客户端和服务代码更紧密地绑定，则 DLL 会很有帮助。如果您知道您的实体不会发生太大变化并且客户端代码更少，那么 DLL 将比代理更好地工作。如果您的服务的客户端在系统外部（例如 API），则使用代理是有意义的，因为通过提供代码文件而不是 DLL，它可以更轻松地共享合约。

**在 NetNamedPipeBinding 的情况下**

推荐使用 ChannelFactory 有以下两个原因：

1.  易于使用。
2.  避免代理层意味着额外的性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T13:06:33.053

通道工厂和服务代理是实现一个目标的相同功能 - 消耗您的服务。通常，如果您在客户端和服务器上都控制服务合同接口，则最好使用 ChannelFactory，因为它更易于管理。如果您只管理客户端部分 - 代理是一种方法，因为否则您将无法控制在服务器端进行的更改。此外 Proxy 为您提供了一个为您的服务生成异步方法的好工具 :)

# bash - 我是否可以使用现有的 SSH 连接并通过该隧道执行 SCP 而无需重新验证？

> ID：15949316
> 
> 赞同：7
> 
> 时间：2013-04-11T12:53:33.927
> 
> 标签：bash, ssh, sh, scp

我想知道我是否已经建立了 SSH 隧道，并且我想尽量减少对每个任务使用 ssh 服务器的重新身份验证，有没有办法使用现有隧道在本地使用 SCP 从 SSH 服务器中提取文件机器不重新认证？

我试图避免使用 ssh 密钥，我只想尽量减少需要为 bash 脚本输入密码的次数。

```
ssh -t user@build_server "*creates a build file...*" 
```

一旦该命令完成，build_server 上就会存在一个文件。所以如果上面的隧道仍然打开，有没有办法使用我的本地机器上的隧道来运行 SCP 并将文件带到本地机器桌面？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T13:16:31.877

是的，会话共享是可能的：并[在此处](http://blogs.perl.org/users/smylers/2011/08/ssh-productivity-tips.html)和[此处](https://en.wikibooks.org/wiki/OpenSSH/Cookbook/Multiplexing)`man ssh_config`搜索`ControlMaster`和/或检查。这是你想要的？

# ruby-on-rails - ruby on rails 如何在没有布局和其他头字段的情况下呈现页面

> ID：15949319
> 
> 赞同：32
> 
> 时间：2013-04-11T12:53:56.147
> 
> 标签：ruby-on-rails, ruby, render

```
else
  respond_to do |format|
    format.html { render "tabelle/show" }
  end
end 
```

我想渲染页面......只有该页面中的代码......而不是在rails上的ruby中添加`<head>`......布局和`<body>`字段。我只想在页面 tabelle/show.html.haml 中显示代码的结果

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-04-11T12:58:21.847

你可以这样做：

```
format.html { render "tabelle/show", :layout => false  } 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-07-27T18:28:51.503

控制器：

```
layout false, only: [:method_name] 
```

这在您使用 render_to_string 时非常有用

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-11T12:59:12.010

添加

```
:layout => false 
```

例子：

```
render "tabelle/show", :layout => false 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-01-29T23:35:04.267

### 如果您不想指定要使用的视图。

Rails 足够聪明，可以根据您所在的控制器操作知道要使用哪个视图模板。

例如，如果您正在执行 的`show`操作，则`TabellesController`不需要`render "tabelle/show"`在控制器操作中指定，因为 Rails 已经假设并会自动尝试将文件呈现为`app/views/tabelles/show.html.erb`.

因此，如果您坚持使用所有这些默认值，那么您可以使用以下内容进行渲染*，而无需*使用典型的布局模板：

```
def show
  # Other stuff in your Controller Action.

  render layout: false
end 
```

这将自动呈现`app/views/tabelles/show.html.erb`但没有布局模板。

噪音。

# eclipse-rcp - Eclipse RCP：我可以向编辑器部件添加工具栏吗？

> ID：15949320
> 
> 赞同：1
> 
> 时间：2013-04-11T12:53:56.737
> 
> 标签：eclipse-rcp, toolbar

通过将以下块添加到 org.eclipse.ui.menus 扩展点，我成功地将特定于视图的工具栏添加到我的 RCP 应用程序：

```
 <menuContribution
        allPopups="false"
        locationURI="toolbar:my.package.path.views.ClassOfMyView">
     <dynamic
           class="my.package.path.toolbars.ViewToolBar"
           id="MyViewToolbar">
     </dynamic>
  </menuContribution> 
```

但是，尝试对我的编辑器部分执行相同操作似乎不起作用：

```
 <menuContribution
        allPopups="false"
        locationURI="toolbar:my.package.path.views.ClassOfMyEditorPart">
     <dynamic
           class="my.package.path.toolbars.EditorPartToolBar"
           id="MyEditorpartToolbar">
     </dynamic>
  </menuContribution> 
```

是否有明显的我遗漏的东西，或者这在 RCP 中根本不支持？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T08:28:57.890

根据 Tonny Madsen 给出的关于 Presentation API 的提示，我想出了一个解决我的问题的方法。我的解决方案基于以下文章：

*   [Eclipse RCP - 隐藏编辑器和视图的最小化/最大化按钮](http://mindpipe.blogspot.ch/2011/04/eclipse-rcp-hide-minimize-maximize.html)（向我展示如何提供我自己的演示工厂）
*   [Eclipse 3.7 和 4.2 之间的不兼容性](http://www.eclipse.org/eclipse/development/porting/4.2/incompatibilities.php#window-advisor)（帮助我弄清楚为什么我的演示工厂没有被使用）
*   [带有视图标题的自定义 RCP 编辑器](http://www.opendebug.com/article/401111)（帮助我弄清楚如何确保正在使用我的演示工厂）

为了使我的解决方案有效，我最终对两个文件和一个新类进行了更改：

在 plugin.xml 文件中，我添加了以下扩展名：

```
<extension point="org.eclipse.ui.presentationFactories">
    <factory
        name="Extended Presentation Factory"
        class="org.eclipse.minicrm.ui.swt.custom.ExtendedPresentationFactory"
        id="org.eclipse.minicrm.ui.swt.custom.ExtendedPresentationFactory"
    />
</extension> 
```

Eclipse 4.x 似乎忽略了这一点，因此为了满足这些情况，我在 plugin_customisation.ini 文件中添加了以下行：

```
org.eclipse.ui/presentationFactoryId = org.eclipse.minicrm.ui.swt.custom.ExtendedPresentationFactory 
```

然后我创建了相应的类：

```
import org.eclipse.jface.action.Action;
import org.eclipse.jface.action.ToolBarManager;
import org.eclipse.jface.resource.ImageDescriptor;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.ToolBar;
import org.eclipse.ui.internal.presentations.util.TabbedStackPresentation;
import org.eclipse.ui.presentations.IStackPresentationSite;
import org.eclipse.ui.presentations.StackPresentation;
import org.eclipse.ui.presentations.WorkbenchPresentationFactory;

@SuppressWarnings("restriction")
public class ExtendedPresentationFactory extends WorkbenchPresentationFactory {
  private ToolBarManager m_toolBarManager = null;
  private ToolBar m_toolbar = null;

  @Override
  public StackPresentation createEditorPresentation(final Composite parent, final IStackPresentationSite site) {
    final TabbedStackPresentation presentation = (TabbedStackPresentation) super.createViewPresentation(parent, site);

    m_toolbar = new ToolBar(presentation.getTabFolder().getToolbarParent(), 0);
    m_toolBarManager = new ToolBarManager(m_toolbar);
    m_toolBarManager.add(new MyAction1());
    m_toolBarManager.add(new MyAction2());
    m_toolBarManager.add(new MyAction3());
    m_toolBarManager.update(true);
    presentation.getTabFolder().setToolbar(m_toolbar);

    return presentation;
  }
} 
```

这会在我的编辑器区域中添加一个带有三个按钮的工具栏。

我仍然需要摆弄一些更精细的点（放置等），但首先它满足了我对编辑器区域中工具栏的需求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T18:17:53.767

这些是编辑器和视图之间的一些重要的视觉差异：

*   编辑器为顶级菜单和工具栏提供额外的操作；意见不*
*   视图有独立的菜单栏和工具栏；编辑不
*   在一个透视图中最多有一个活动编辑器；可以有任意数量的活动视图
*   每个“类型”最多有一个视图；可以有任意数量的编辑器*
*   编辑器全部放置在“编辑器区”；视图被放置在许多“视图堆栈”中</li>

可以使用 RCP 平台的各种功能消除其中一些差异（上面标有 *）：

*   该界面`ISaveblePart`可以为视图提供与编辑器相同的生命周期。
*   当`menues`视图处于活动状态时，扩展点可以将项目添加到主菜单和工具栏。
*   `views`扩展点可用于允许同一类型的多个视图。

使用 Eclipse 4，您还可以在同一个堆栈或文件夹中组合编辑器和视图。

但是添加视图中的菜单或工具栏需要更多的工作！但它可以使用 Presentation API 来完成，其中大部分视觉差异都可以消除。

另一条评论：*不是* `toolbar:my.package.path.views.ClassOfMyView`但是`toolbar:id-of-the-view`。

# java - 删除两个不同 Arraylist 之间的公共元素

> ID：15949321
> 
> 赞同：1
> 
> 时间：2013-04-11T12:54:00.867
> 
> 标签：java, android, arraylist

我已经为此阅读了几篇文章，但没有得到我正在寻找的确切内容。我知道如何为此开发一个复杂的逻辑，这是针对 Android 的，由于可用资源有限，我们不能指望设备上有太多的处理。

我有一个包含五个字段的 bean 类对象的 ArrayList

Java Bean -- MyShares

1.  文件名
2.  文件路径
3.  文件大小
4.  是共享的
5.  创作者

我有另一个仅包含文件路径的字符串 ArrayList。现在我想要的是删除两个数组列表之间的所有公共元素意味着以秒为单位的文件路径数组列表和第一个数组列表对象中的文件路径相似然后我必须从两个数组列表中删除但我不想要一个新的数组列表其中包含不常见的元素。但我只想在没有共同元素的情况下获得我的两个数组列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:11:34.233

粗略的Java代码：

```
HashSet<String> commonKeys = new HashSet();
for (Share share : shares) {
    commonKeys.add(share.filePath);
}
commonKeys.retainAll(filePaths);
for (Iterator<Share> it = shares.iterator(); it.hasNext(); ) {
    Share share = it.next();
    if (commonKeys.contains(share.filePath)) {
        it.remove();
    }
}
filePaths.removeAll(commonKeys); 
```

这不会是`O(N)`因为`remove`on an`ArrayList`很贵。要获得`O(N)`行为，您需要创建新`ArrayList`实例，或者将不想删除的元素添加到临时列表中，然后`clear()`将它们添加回原始列表中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T13:14:42.967

您可以使用`Map`from`String`到您的对象类型（我用来`Obj`制作 SSCCE）。

假设我们得到一个 list`objects`和一个 list `strings`。

脚步：

1.  将所有变量放入`objects`a 中`map`，并将其`str`变量作为键
2.  使用获取所有这些`str`变量`map.keySet()`
3.  获取所有 in`objects`但不在`strings`by中的字符串`keys.removeAll(strings)`
4.  获取所有 in`strings`但不在`objects`by中的字符串`strings.removeAll(keys)`
5.  获取`objects`对应于剩余的`keys`

请注意，在步骤 3 和 4 中您需要小心，因为您需要备份其中一个集合。

```
import java.util.*;

public class Test { 
    public static void main(String[] args) throws Exception {
        new Test();
    }

    public Test() {
        List<Obj> objects = new ArrayList<>();
        objects.add(new Obj("a"));
        objects.add(new Obj("b"));
        objects.add(new Obj("c"));

        List<String> strings = new ArrayList<>();
        strings.add("a");
        strings.add("d");
        strings.add("e");

        remove(objects, strings);

        System.out.println(objects);
        System.out.println(strings);
    }

    public void remove(List<Obj> objects, List<String> strings) {
        Map<String, Obj> map = new HashMap<>();
        for (Obj object : objects) {
            map.put(object.str, object);
        }

        Set<String> keys = map.keySet();
        List<String> oldStrings = new ArrayList<>(strings);

        strings.removeAll(keys);
        keys.removeAll(oldStrings);

        objects.clear();
        for (String key: keys) {
            objects.add(map.get(key));
        }       
    }

    public class Obj {  
        public String str;
        public Obj(String str) {
            this.str = str;
        }
        @Override
        public String toString() {
            return str;
        }       
    }
} 
```

印刷：

```
[b, c]
[d, e] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T13:29:57.330

我会为你提供一些线索

假设您有**两个列表**，一个用于 bean 对象，即**myBeans**，另一个用于 filePaths，即**filePaths**

```
List<MyBean> beansToRemove = new ArrayList<MyBean>();
List<FilePath> filePathsToRemove = new ArrayList<FilePath>();

for(Bean myBean : myBeans) {
    for(FilePath filePath : filePaths) {
        if(myBean.getfilePath.equals(filePath.getFilePath())) {
            beansToRemove.add(myBean);
            filePathsToRemove.add(filePath);
        }
    }
}

//Now remove filePaths and beans if any

for(Bean myBean : beansToRemove) {
    myBeans.remove(myBean);
}

for(FilePath filePath : filePathsToRemove) {
    filePaths.remove(filePath);
} 
```

这只是让您清楚该做什么的流程；您可以根据自己的需要进一步定制它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T13:07:41.573

您可以使用外循环扫描 Bean 对象，使用内循环扫描文件路径。

伪代码：

```
for (Bean i in beans) {
    for (String p in paths) {
        if (i.path.equals(p)) {
            beansToRemove.add(i);
            pathsToRemove.add(p);
        }
    }
}
beans.removeAll(beansToRemove);
paths.removeAll(pathsToRemove); 
```

我不确定我的额外数组列表是否会跟踪已删除的数组列表是否违反您的问题，因为原始数组仍然存在。如果您对路径上的两个数组进行预排序并跟踪每个区域中的位置（不是详尽搜索），您可以将其从 n2 改进为 nlgn

# asp.net - 为基类中的 web 控件设置默认值

> ID：15949323
> 
> 赞同：2
> 
> 时间：2013-04-11T12:54:15.037
> 
> 标签：asp.net, webforms, telerik

我有一些处理 excel 文件的 web 表单，所以为了使这更容易，我有一个这样的基类：

```
public abstract class ExcelImporter : Page {
    public abstract RadAsyncUpload FileUpload { get; }

    protected override void OnInit(EventArgs e)
    {
        base.OnInit(e);
        if (FileUpload != null)
        {
            DefineRadAyncUpload();
        }
    }

    private void DefinirRadAyncUpload()
    {
        FileUpload.Skin = Skin;
        FileUpload.Culture = new System.Globalization.CultureInfo("pt-BR");
        FileUpload.TemporaryFolder = "~/temp";
        FileUpload.OnClientFileUploaded = "PostBackAsyncUploadComplete";
        FileUpload.AllowedFileExtensions = new[] { "xls", "xlsx" };
        FileUpload.MaxFileInputsCount = 1;
        FileUpload.FileUploaded += FileUploadOnFileUploaded;
    }

    protected abstract void FileUploadOnFileUploaded(object sender, FileUploadedEventArgs fileUploadedEventArgs);
} 
```

我在 Define 方法中设置的所有内容都可以正常工作，扩展过滤器除外。我究竟做错了什么？还有其他我应该设置这个属性的时刻吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T01:28:54.243

更新答案：

试一试：

```
FileUpload.FileFilters.Add(new FileFilter("Microsoft Excel (*.xls;*.xlsx)", new [] { "xls", "xlsx" })); 
```

从[文档](http://www.telerik.com/help/aspnet-ajax/asyncupload-file-filtering.html)：

“从 2011 年第一季度开始，RadAsyncUpload 支持文件过滤。文件过滤器是具有两个属性的对象 - 描述和扩展。扩展属性接受逗号分隔的扩展列表，选择文件对话框应在其上过滤。描述属性，顾名思义，描述了扩展集。”

还：

“请记住，当 RadAsyncUpload 使用其 IFrame 模块时（未安装 Flash 和 Silverlight 时）没有过滤功能可用。这是因为浏览器根本不提供本机文件过滤支持。可以应用尽可能多的过滤器他们想要。然后，用户可以通过“文件类型”组合框在不同的过滤器中进行选择。”

# jquery - Jquery设置单选按钮选中，使用id和类选择器

> ID：15949324
> 
> 赞同：58
> 
> 时间：2013-04-11T12:54:17.770
> 
> 标签：jquery, button, checked

是否可以使用 jquery 设置一个单选按钮来检查 - 通过一个类和一个 id？

例如：

```
$('input:radio[class=test1 id=test2]).attr('checked', true); 
```

我似乎只能通过 id OR class 来设置它，但不能同时通过两者来设置。

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2013-04-11T12:55:56.983

> *“......通过一个类和一个div。”*

我假设当您说“div”时，您的意思是“id”？尝试这个：

```
$('#test2.test1').prop('checked', true); 
```

无需为您的`[attributename=value]`样式选择器而烦恼，因为id 和[class](http://api.jquery.com/class-selector/)一样[具有自己的格式](http://api.jquery.com/id-selector/)，并且它们很容易组合，尽管鉴于 id 应该是唯一的，除非您的意思是“仅选择该元素”，否则它本身就足够了如果它当前具有指定的类”。

或更一般地，选择要指定[多属性选择器](http://api.jquery.com/multiple-attribute-selector/)的输入：

```
$('input:radio[class=test1][id=test2]').prop('checked', true); 
```

也就是说，用方括号列出每个属性。

请注意，除非您有相当旧的 jQuery 版本，否则您应该使用[`.prop()`](http://api.jquery.com/prop/)而不是`.attr()`用于此目的。

# javascript - 仅使用 jquery 或 javascript 的条件下拉列表

> ID：15949327
> 
> 赞同：0
> 
> 时间：2013-04-11T12:54:21.927
> 
> 标签：javascript, jquery, drop-down-menu

仅使用 jquery 或 javascript 的条件下拉列表

场景：我有一个主下拉列表列表，如果我在下拉列表中选择“dropdownmain1”，它将显示下拉列表对应的“dropdownmain1”值

```
<select name="dropdownmain" id="" title="">
    <option value="dropdownmain1">dropdownmain1</option>
    <option value="dropdownmain2">dropdownmain2</option>
    <option value="dropdownmain3">dropdownmain3</option>
    <option value="dropdownmain4">dropdownmain4</option>
</select>

//if selected dropdownmain1 this dropdown will display
<select name="dropdownmain1" id="" title="">
    <option value="dropdownmain1-submenu1">dropdownmain1-submenu1</option>
    <option value="dropdownmain1-submenu2">dropdownmain1-submenu2</option>
    <option value="dropdownmain1-submenu3">dropdownmain1-submenu3</option>
    <option value="dropdownmain1-submenu4">dropdownmain1-submenu4</option>
</select>

//if selected dropdownmain2 this dropdown will display
<select name="dropdownmain2" id="" title="">
    <option value="dropdownmain2-submenu1">dropdownmain2-submenu1</option>
    <option value="dropdownmain2-submenu2">dropdownmain2-submenu2</option>
    <option value="dropdownmain2-submenu3">dropdownmain2-submenu3</option>
    <option value="dropdownmain2-submenu4">dropdownmain2-submenu4</option>
</select>

//if selected dropdownmain3 this dropdown will display
<select name="dropdownmain3" id="" title="">
    <option value="dropdownmain3-submenu1">dropdownmain3-submenu1</option>
    <option value="dropdownmain3-submenu2">dropdownmain3-submenu2</option>
    <option value="dropdownmain3-submenu3">dropdownmain3-submenu3</option>
    <option value="dropdownmain3-submenu4">dropdownmain3-submenu4</option>
</select>

//if selected dropdownmain4 this dropdown will display
<select name="dropdownmain4" id="" title="">
    <option value="dropdownmain4-submenu1">dropdownmain4-submenu1</option>
    <option value="dropdownmain4-submenu2">dropdownmain4-submenu2</option>
    <option value="dropdownmain4-submenu3">dropdownmain4-submenu3</option>
    <option value="dropdownmain4-submenu4">dropdownmain4-submenu4</option>
</select> 
```

这可能仅使用 jquery 或 javascript 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T13:09:49.453

是的，您可以使用 jquery 轻松完成。

```
$('select[name!="dropdownmain"]').hide();
$('select[name="' + $('select[name="dropdownmain"]').val() + '"]').show();
$('select[name="dropdownmain"]').change(function(){
    $('select[name!="dropdownmain"]').hide();
    $('select[name="' + $(this).val() + '"]').show();
}); 
```

[http://jsfiddle.net/p7jyv/2/](http://jsfiddle.net/p7jyv/2/)

还有一种更易读的方法：

```
var $topSelect = $('select[name="dropdownmain"]');
var $nestedSelects = $('select[name!="dropdownmain"]');
showApplicableSelect();
$topSelect.change(showApplicableSelect);
function showApplicableSelect() {
    $nestedSelects.hide();
    $('select[name="' + $topSelect.val() + '"]').show();
} 
```

[http://jsfiddle.net/p7jyv/5/](http://jsfiddle.net/p7jyv/5/)

# jquery - 未找到发布错误 404 页面

> ID：15949334
> 
> 赞同：1
> 
> 时间：2013-04-11T12:54:43.663
> 
> 标签：jquery

下面的代码给了我找不到错误 404 页面（对 firebug 的响应），但相同的代码在 localhost 上完美运行。

```
function simplemaps_state_clicked(id, name) {
    $.post("home/get_metrix", {
        id: id
    }).done(function (data) {
        document.getElementById('simplemaps').innerHTML = data;
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:56:07.967

请替换这个：

```
$.post("home/get_metrix", { id: id }) 
```

和

```
$.post("/home/get_metrix", { id: id }) 
```

因为它得到了 url 的根

# postgresql - psql - 在行上循环的循环变量必须是记录或行变量或标量变量列表

> ID：15949337
> 
> 赞同：55
> 
> 时间：2013-04-11T12:54:54.603
> 
> 标签：postgresql, psql

这是我的简单匿名代码块：

```
do $$
  declare foo varchar(50) := '';
  begin
    for a in
      select a from (values('foo'), ('bar'), ('fooBar')) s(a)
    loop
      foo := a;
      print foo;
    end loop;
  end;
$$; 
```

当我运行它时：

```
psql -f test.sql 
```

我收到此错误：

```
psql:test.sql:11: ERROR:  loop variable of loop over rows must be a record or row variable or list of scalar variables
LINE 4:     for a in
            ^ 
```

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2013-04-11T13:17:15.713

自己解决了，呵呵。需要申报`arow record`。

```
do $$
  declare
    arow record;
    foo varchar(50);
  begin
    for arow in
      select a from (values('foo'), ('bar'), ('fooBar')) s(a)
    loop
      foo := arow.a;
      RAISE NOTICE 'Calling cs_create_job(%)', foo;
    end loop;
  end;
$$; 
```

# java - “+”和“-”键似乎可以切换 SWT 按钮，是否可以覆盖此行为？

> ID：15949342
> 
> 赞同：0
> 
> 时间：2013-04-11T12:55:05.400
> 
> 标签：java, swt

我正在开发一个使用 SWT 的 Eclipse 插件项目。

似乎“+”和“-”切换了选定的 SWT 按钮。

有没有办法覆盖这种行为，我尝试将该`Event.doit`字段设置为 false，但这不起作用。

```
button.addTraverseListener(new TraverseListener() {
    @Override
        public void keyTraversed(TraverseEvent e) {
            e.doit = false;
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:46:47.180

您可以使用以下代码禁用复选框`+`和单选按钮的键（在 Windows 7 上测试）：`-`

```
// disable '+' and '-' keys
button.addKeyListener(new KeyAdapter() {
    public void keyPressed(KeyEvent e) {
        if (e.character == '-' || e.character == '+') { 
            e.doit = false;
        }
    }
}); 
```

注意：用户还可以使用`space`来切换复选框，在我的示例中未禁用。

# c++ - 奇怪的解密输出

> ID：15949343
> 
> 赞同：1
> 
> 时间：2013-04-11T12:55:18.417
> 
> 标签：c++, encryption

我只是在尝试加密和解密，并制作了一个加密、解密和写入文件的函数......

```
void encrypt(const std::string& r){

std::string new_r = "Encrypted:\n";
for(int i = 0; i < r.length(); i++)
{
    new_r += ~r[i];
}

wtofe("/home/programming/Desktop/latin.txt", new_r); // Writes it to a file
decrypt(new_r);
}

void decrypt(const std::string& r){

std::string new_r = "Decrypted:\n";
for(int i = 0; i < r.length(); i++)
{
    new_r += ~(r[i]);
}

wtofd("/home/programming/Desktop/latin.txt", new_r); //Writes it to a file
} 
```

写入文件和加密工作。它也解密了它，但看看这个奇怪的输出：

![在此处输入图像描述](https://i.stack.imgur.com/hqVyv.jpg)

我写的输入是 Davlog，你可以看到它已经被添加到解密的末尾。但为什么？我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T12:59:21.560

试试这个：

```
void encrypt(const std::string& r){
  std::string new_r;
  for(int i = 0; i < r.length(); i++)
  {
      new_r += ~r[i];
  }

  wtofe("/home/programming/Desktop/latin.txt", new_r); // Writes it to a file
  decrypt(new_r);
}

void decrypt(const std::string& r){

  std::string new_r;
  for(int i = 0; i < r.length(); i++)
  {
      new_r += ~(r[i]);
  }

  wtofd("/home/programming/Desktop/latin.txt", new_r); //Writes it to a file
} 
```

在您的原始代码中，您正在编写`"Encrypted:[your encrypted msg]"`而不是仅仅写入`"[your encrypted msg]"`您的文件。因此解密步骤将解密“加密：”部分以及原始加密消息。

# c# - 将数据表问题导出到 CSV

> ID：15949346
> 
> 赞同：0
> 
> 时间：2013-04-11T12:55:22.860
> 
> 标签：c#, json, csv, ext.net

我使用了 ext.net 1.6 工具。我试图将数据数据表转换为 csv，但我收到错误状态代码：200 和状态文本：错误请求。

而且我还将数据从 ext.net gridpanel 导出到 csv，但现在我想直接将数据表导出到 csv。

我为数据表传递了 Jason 字符串，与为网格面板传递的相同，但网格面板数据完美导出，但数据表不使用相同的方法导出

你能建议我吗？

那到底是什么问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:56:19.107

也许以下示例可以提供帮助，请参阅

[http://examples.ext.net/#/GridPanel/Miscellaneous/Export_Data_Ajax/](http://examples.ext.net/#/GridPanel/Miscellaneous/Export_Data_Ajax/)

# c# - Razor MVC 3中变量的范围是什么

> ID：15949348
> 
> 赞同：3
> 
> 时间：2013-04-11T12:55:27.120
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, razor

`myClient`我的 Razor 代码中的变量范围存在问题。我确信解决方案很简单。基本上我在一个单独的`@{}`块中引用它，这可能会导致问题，但似乎除非我这样做，否则我会`if..{}`在 HTML 中获得代码。

```
@{
int i = 0;
foreach (var item in Model.Clients)
    {
        Int32 myId = Convert.ToInt32(item.DBID);
        var myClient = db.Client.Where(c => c.Id == myId).First();
    <td>
        <table class="inner">
        <tr><th>
            @string.Format(
                "{0} {1} {2}",
                myClient.Title,
                myClient.Initials,
                myClient.LastName)

                @{
                    if (myClient.Type!="Primary")
                    {
                        @Html.ActionLink(
                            "Delete", 
                            "Delete", 
                            "ClientBackground", 
                            new { id=item.ID }, null)
                    }
                 }
            </th></tr>
        }
        <table> 
```

我的代码无法引用`myClient.Type`。如果我删除周围`@{}`，那么我会在 HTML 中获得 c# 代码。

我知道一些简单的事情，但我没有看到它。

非常感谢任何帮助。

编辑：表关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:58:17.793

试试这个：

```
<table class="inner">
              @{int i = 0;}

              @foreach (var item in Model.Clients)
                  {
                      Int32 myId = Convert.ToInt32(item.DBID);
                      var myClient = db.Client.Where(c => c.Id == myId).First();

                            <tr><td>@string.Format("{0} {1} {2}",myClient.Title,myClient.Initials,myClient.LastName)
                                    @if (myClient.Type!="Primary")
                                        {
                                        @Html.ActionLink("Delete", "Delete","ClientBackground", new { id=item.ID },null)
                                }

                    </td></tr>
              }

</table> 
```

我对格式做了很多猜测。重要的是，我将您的 int 分配放入它自己的块中。我把开头和结尾`<tr>`的和`<td>`'s 匹配，并将它们放在可选之外`@if blocks`。但是这个版本会编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T12:59:49.830

这里有奇怪的语法：

```
@{if (myClient.Type!="Primary")
     {
          @Html.ActionLink("Delete", "Delete","ClientBackground", new { id=item.ID },null)
     }
 } 
```

为什么不：

```
@if (myClient.Type!="Primary")
{
   @Html.ActionLink("Delete", "Delete","ClientBackground", new { id=item.ID },null)
} 
```

**添加：**

您更新的代码包含无效的 html 标记，它应该类似于：

```
<table class="inner">
@{
int i = 0;
foreach (var item in Model.Clients)
{
    Int32 myId = Convert.ToInt32(item.DBID);
    var myClient = db.Client.Where(c => c.Id == myId).First();
    <tr><th>
        @string.Format("{0} {1} {2}", myClient.Title, myClient.Initials, myClient.LastName)
        @if (myClient.Type!="Primary")
        {
            @Html.ActionLink("Delete", "Delete", "ClientBackground", new { id=item.ID }, null)
        }
    </th></tr>
}
</table> 
```

表未关闭，您已打开`<td>`标签

# javascript - 从 Web 服务返回 JSON 中的单个 ID

> ID：15949352
> 
> 赞同：0
> 
> 时间：2013-04-11T12:55:42.803
> 
> 标签：javascript, ajax, vb.net, json, web-services

我对使用客户端编码还很陌生，并且想知道从 Web 服务中的简单插入返回单个 ID 的最佳方法是什么。

复制返回更复杂 JSON 对象的代码，我正在执行以下操作：

```
 Dim JaggedArray As String()() = New String(0)() {}
        Dim i As Integer = 0

        JaggedArray(i) = New String() {<insert stmt, returns integer>}

        Dim js As New JavaScriptSerializer()
        Dim strJSON As String = js.Serialize(JaggedArray)
        Return strJSON 
```

然后，我使用以下内容访问 Javascript 中的 ID（摘自 AJAX 调用）：

```
success: function(data) {
var c = eval(data.d);
var testID = c[0][0]; 
```

肯定有一种不那么笨重的方法，对吧？

这是一个愚蠢的问题，但是您可以（和/或应该）将代码放在 Success 回调之外，还是这是强制性的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:01:53.937

当然，您可以使用 jqXHR.done 成功回调选项的替代构造**.done()**，

欲了解更多信息，请访问[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

```
 $.ajax({
    //ajax stuff ..
  })
  .done(function(return){
    var output = "hello";
    return output;
  }); 
```

# solr - Solr 搜索分数始终为 0 .0

> ID：15949356
> 
> 赞同：1
> 
> 时间：2013-04-11T12:55:58.217
> 
> 标签：solr, scoring

我们正在尝试将 Solr 评估为一种搜索解决方案，并在检索分数方面面临问题。我们确实进行了爬网和索引，但所有分数都为 0.0，尽管根据我们的知识，我们没有更改任何与评分相关的配置。

如果有人可以复制并在这里告诉我们原因，那就太好了。会有很大的帮助。

Solr 版本是 4.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:48:34.350

```
 <schema name="nutch" version="1.5">
    <types>
    <fieldType name="text" class="solr.TextField" positionIncrementGap="100" autoGeneratePhraseQueries="true">
      <analyzer type="index">
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />        
        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="1" catenateNumbers="1" catenateAll="0" splitOnCaseChange="1"/>        
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.KeywordMarkerFilterFactory" protected="protwords.txt"/>
        <filter class="solr.RemoveDuplicatesTokenFilterFactory" />
        <filter class="solr.SnowballPorterFilterFactory" language="English" />
      </analyzer>
      <analyzer type="query">
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>       
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
        <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0" splitOnCaseChange="1"/>        
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.KeywordMarkerFilterFactory" protected="protwords.txt"/>
        <filter class="solr.RemoveDuplicatesTokenFilterFactory" />
        <filter class="solr.SnowballPorterFilterFactory" language="English" />
      </analyzer>
    </fieldType>
        <fieldType name="string" class="solr.StrField" sortMissingLast="true"
            omitNorms="true"/> 
        <fieldType name="long" class="solr.TrieLongField" precisionStep="0"
            omitNorms="true" positionIncrementGap="0"/>
    <fieldType name="int" class="solr.TrieIntField" precisionStep="0" omitNorms="true" positionIncrementGap="0"/>
        <fieldType name="float" class="solr.TrieFloatField" precisionStep="0"
            omitNorms="true" positionIncrementGap="0"/>
     <!-- boolean type: "true" or "false" -->
    <fieldType name="boolean" class="solr.BoolField" sortMissingLast="true" omitNorms="true"/>
    <!--Binary data type. The data should be sent/retrieved in as Base64 encoded Strings -->
    <fieldtype name="binary" class="solr.BinaryField"/>
    <fieldType name="double" class="solr.TrieDoubleField" precisionStep="0" omitNorms="true" positionIncrementGap="0"/>
    <fieldType name="tint" class="solr.TrieIntField" precisionStep="8" omitNorms="true" positionIncrementGap="0"/>
    <fieldType name="tfloat" class="solr.TrieFloatField" precisionStep="8" omitNorms="true" positionIncrementGap="0"/>
    <fieldType name="tlong" class="solr.TrieLongField" precisionStep="8" omitNorms="true" positionIncrementGap="0"/>
    <fieldType name="tdouble" class="solr.TrieDoubleField" precisionStep="8" omitNorms="true" positionIncrementGap="0"/>
    <fieldType name="tdate" class="solr.TrieDateField" omitNorms="true" precisionStep="6" positionIncrementGap="0"/>

    <!-- A general unstemmed text field - good if one does not know the language of the field -->
    <fieldType name="textgen" class="solr.TextField" positionIncrementGap="100">
      <analyzer type="index">
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="1" catenateNumbers="1" catenateAll="0" splitOnCaseChange="0"/>
        <filter class="solr.LowerCaseFilterFactory"/>
      </analyzer>
      <analyzer type="query">
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>        
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
        <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0" splitOnCaseChange="0"/>
        <filter class="solr.LowerCaseFilterFactory"/>
      </analyzer>
    </fieldType>

    <fieldType name="random" class="solr.RandomSortField" indexed="true" />   

        <fieldType name="date" class="solr.TrieDateField" precisionStep="0"
            omitNorms="true" positionIncrementGap="0"/>
<fieldType name="fullText" class="solr.TextField" positionIncrementGap="100" autoGeneratePhraseQueries="true">
      <analyzer type="index">
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />        
        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="1" catenateNumbers="1" catenateAll="0" splitOnCaseChange="1"/>
        <charFilter class="solr.MappingCharFilterFactory" mapping="mapping-FoldToASCII.txt"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.KeywordMarkerFilterFactory" protected="protwords.txt"/>
        <filter class="solr.RemoveDuplicatesTokenFilterFactory" />
        <filter class="solr.SnowballPorterFilterFactory" language="English" />
      </analyzer>
      <analyzer type="query">
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>        
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
        <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0" splitOnCaseChange="1"/>
        <charFilter class="solr.MappingCharFilterFactory" mapping="mapping-FoldToASCII.txt" />
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.KeywordMarkerFilterFactory" protected="protwords.txt"/>
        <filter class="solr.RemoveDuplicatesTokenFilterFactory" />
        <filter class="solr.SnowballPorterFilterFactory" language="English" />
      </analyzer>
    </fieldType>

  <!-- For Spellcheck -->
    <fieldType name="textSpell" class="solr.TextField" positionIncrementGap="100">
      <analyzer type="index">
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
      </analyzer>
      <analyzer type="query">
        <tokenizer class="solr.StandardTokenizerFactory"/>        
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />  
        <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
      </analyzer>
    </fieldType>  

   <!-- lowercases the entire field value, keeping it as a single token.  -->
    <fieldType name="lowercase" class="solr.TextField" positionIncrementGap="100">
      <analyzer>
        <tokenizer class="solr.KeywordTokenizerFactory"/>
        <filter class="solr.LowerCaseFilterFactory" />
      </analyzer>
    </fieldType>

   <fieldType name="url" class="solr.TextField"
            positionIncrementGap="100">
            <analyzer>
                <tokenizer class="solr.StandardTokenizerFactory"/>
                <filter class="solr.LowerCaseFilterFactory"/>
                <filter class="solr.WordDelimiterFilterFactory"
                    generateWordParts="1" generateNumberParts="1"/>
            </analyzer>
        </fieldType>
    </types>
    <fields>
        <field name="id" type="string" stored="true" indexed="true" required="true" multiValued="false" />
    <!-- Spellcheck field -->
        <field name="spell" type="textSpell" indexed="true" stored="false" required="false" multiValued="true" />
    <!-- For Sorting purpose -->
        <field name="titleSort" type="lowercase" indexed="true" stored="false" required="false"/>
        <!-- core fields -->
        <field name="segment" type="string" stored="true" indexed="false"/>
        <field name="digest" type="string" stored="true" indexed="false"/>
        <field name="boost" type="float" stored="true" indexed="false"/>

        <!-- fields for index-basic plugin -->
        <field name="host" type="url" stored="false" indexed="true"/>
        <field name="site" type="string" stored="false" indexed="true"/>
        <field name="url" type="url" stored="true" indexed="true"/>
        <field name="content" type="text" stored="true" indexed="true"/>
        <field name="title" type="text" stored="true" indexed="true"/>
        <field name="cache" type="string" stored="true" indexed="false"/>
        <field name="tstamp" type="date" stored="true" indexed="true"/>
    <field name="_version_" type="long" indexed="true" stored="true"/>
        <!-- fields for index-anchor plugin -->
        <field name="anchor" type="string" stored="true" indexed="true"
            multiValued="true"/>

        <!-- fields for index-more plugin -->
        <field name="type" type="string" stored="true" indexed="true"
            multiValued="true"/>
        <field name="contentLength" type="long" stored="true"
            indexed="false"/>
        <field name="lastModified" type="date" stored="true"
            indexed="false"/>
        <field name="date" type="date" stored="true" indexed="true"/>

        <!-- fields for languageidentifier plugin -->
        <field name="lang" type="string" stored="true" indexed="true"/>
<!-- KS -->
<field name="metatag.description" type="text" stored="true" indexed="true"/>
<field name="metatag.keywords" type="text" stored="true" indexed="true"/>

        <!-- fields for subcollection plugin -->
        <field name="subcollection" type="string" stored="true"
            indexed="true" multiValued="true"/>

        <!-- fields for feed plugin (tag is also used by microformats-reltag)-->
        <field name="author" type="string" stored="true" indexed="true"/>
        <field name="tag" type="string" stored="true" indexed="true" multiValued="true"/>
        <field name="feed" type="string" stored="true" indexed="true"/>
        <field name="publishedDate" type="date" stored="true"
            indexed="true"/>
        <field name="updatedDate" type="date" stored="true"
            indexed="true"/>
        <!-- fields for creativecommons plugin -->
        <field name="cc" type="string" stored="true" indexed="true"
            multiValued="true"/>

<!-- This field has been added to implement the default search configuration -->
        <field name="text" type="fullText" indexed="true" stored="false" required="false" multiValued="true" /> 

<!-- For Extract Handler -->

        <!-- copyField commands copy one field to another at the time a document
        is added to the index.  It's used either to index the same field differently,
        or to add multiple fields to the same field for easier/faster searching.  -->
                <copyField source="anchor" dest="text"/>
                <copyField source="title" dest="text"/>
                <copyField source="content" dest="text"/>
<!--                <copyField source="description" dest="text"/>-->
<!--                <copyField source="keywords" dest="text"/> -->

       <!-- For Spell Check -->
        <copyField source="anchor" dest="spell"/>
        <copyField source="title" dest="spell"/>
        <copyField source="content" dest="spell"/>
        <!-- For Sorting purpose -->
        <copyField source="title" dest="titleSort"/>

 <!-- Dynamic field definitions.  If a field name is not found, dynamicFields
        will be used if the name matches any of the patterns.
        RESTRICTION: the glob-like pattern in the name attribute must have
        a "*" only at the start or the end.
        EXAMPLE:  name="*_i" will match any field ending in _i (like myid_i, z_i)
        Longer patterns will be matched first.  if equal size patterns
        both match, the first appearing in the schema will be used.  -->
   <dynamicField name="*_i"  type="int"    indexed="true"  stored="true"/>
   <dynamicField name="*_s"  type="string"  indexed="true"  stored="true"/>
   <dynamicField name="*_l"  type="long"   indexed="true"  stored="true"/>
   <dynamicField name="*_t"  type="text"    indexed="true"  stored="true"/>
   <dynamicField name="*_b"  type="boolean" indexed="true"  stored="true"/>
   <dynamicField name="*_f"  type="float"  indexed="true"  stored="true"/>
   <dynamicField name="*_d"  type="double" indexed="true"  stored="true"/>
   <dynamicField name="*_dt" type="date"    indexed="true"  stored="true"/>

   <!-- some trie-coded dynamic fields for faster range queries -->
   <dynamicField name="*_ti" type="tint"    indexed="true"  stored="true"/>
   <dynamicField name="*_tl" type="tlong"   indexed="true"  stored="true"/>
   <dynamicField name="*_tf" type="tfloat"  indexed="true"  stored="true"/>
   <dynamicField name="*_td" type="tdouble" indexed="true"  stored="true"/>
   <dynamicField name="*_tdt" type="tdate"  indexed="true"  stored="true"/>
   <dynamicField name="attr_*" type="textgen" indexed="true" stored="true" multiValued="true"/>

   <dynamicField name="random_*" type="random" />

    </fields>
    <uniqueKey>id</uniqueKey>
    <defaultSearchField>text</defaultSearchField>
    <solrQueryParser defaultOperator="OR"/>
    <similarity class="org.apache.lucene.search.similarities.DefaultSimilarity"/>
    </schema> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:57:38.253

```
Query : select?q=Menu&wt=xml&indent=true&debug=true&fl=*,score

This XML file does not appear to have any style information associated with it. The document tree is shown below.

−
<response>
−
<lst name="responseHeader">
<int name="status">0</int>
<int name="QTime">3</int>
−
<lst name="params">
<str name="fl">id,title,score</str>
<str name="indent">true</str>
<str name="q">Menu</str>
<str name="debug">true</str>
<str name="wt">xml</str>
</lst>
</lst>
−
<result name="response" numFound="6" start="0" maxScore="0.0">
−
<doc>
<str name="title">English :: McDonalds.ca</str>
<str name="id">http://www.mcdonalds.ca/</str>
<float name="score">0.0</float>
</doc>
−
<doc>
<str name="title">Corporate Opportunities :: McDonalds.ca</str>
−
<str name="id">
http://www.mcdonalds.ca/ca/en/careers/corp_opp/corporate_opportunities.html
</str>
<float name="score">0.0</float>
</doc>
−
<doc>
<str name="title">People :: McDonalds.ca</str>
−
<str name="id">
http://www.mcdonalds.ca/ca/en/careers/rest_opp/people.html
</str>
<float name="score">0.0</float>
</doc>
−
<doc>
<str name="title">Training, Education and Benefits :: McDonalds.ca</str>
−
<str name="id">
http://www.mcdonalds.ca/ca/en/careers/rest_opp/training_education_and_benefits.html
</str>
<float name="score">0.0</float>
</doc>
−
<doc>
<str name="title">Working Here :: McDonalds.ca</str>
−
<str name="id">
http://www.mcdonalds.ca/ca/en/careers/rest_opp/working_here.html
</str>
<float name="score">0.0</float>
</doc>
−
<doc>
<str name="title">Environment :: McDonalds.ca</str>
−
<str name="id">
http://www.mcdonalds.ca/ca/en/communities/environment.html
</str>
<float name="score">0.0</float>
</doc>
</result>
−
<lst name="spellcheck">
<lst name="suggestions"/>
</lst>
−
<lst name="debug">
−
<lst name="queryBoosting">
<str name="q">menu</str>
<null name="match"/>
</lst>
<str name="rawquerystring">Menu</str>
<str name="querystring">Menu</str>
<str name="parsedquery">text:menu</str>
<str name="parsedquery_toString">text:menu</str>
−
<lst name="explain">
−
<str name="http://www.mcdonalds.ca/">

0.0 = (MATCH) weight(text:menu in 0) [DefaultSimilarity], result of:
  0.0 = fieldWeight in 0, product of:
    1.4142135 = tf(freq=2.0), with freq of:
      2.0 = termFreq=2.0
    0.84584934 = idf(docFreq=6, maxDocs=6)
    0.0 = fieldNorm(doc=0)
</str>
−
<str name="http://www.mcdonalds.ca/ca/en/careers/corp_opp/corporate_opportunities.html">

0.0 = (MATCH) weight(text:menu in 1) [DefaultSimilarity], result of:
  0.0 = fieldWeight in 1, product of:
    1.0 = tf(freq=1.0), with freq of:
      1.0 = termFreq=1.0
    0.84584934 = idf(docFreq=6, maxDocs=6)
    0.0 = fieldNorm(doc=1)
</str>
−
<str name="http://www.mcdonalds.ca/ca/en/careers/rest_opp/people.html">

0.0 = (MATCH) weight(text:menu in 2) [DefaultSimilarity], result of:
  0.0 = fieldWeight in 2, product of:
    1.0 = tf(freq=1.0), with freq of:
      1.0 = termFreq=1.0
    0.84584934 = idf(docFreq=6, maxDocs=6)
    0.0 = fieldNorm(doc=2)
</str>
−
<str name="http://www.mcdonalds.ca/ca/en/careers/rest_opp/training_education_and_benefits.html">

0.0 = (MATCH) weight(text:menu in 3) [DefaultSimilarity], result of:
  0.0 = fieldWeight in 3, product of:
    1.0 = tf(freq=1.0), with freq of:
      1.0 = termFreq=1.0
    0.84584934 = idf(docFreq=6, maxDocs=6)
    0.0 = fieldNorm(doc=3)
</str>
−
<str name="http://www.mcdonalds.ca/ca/en/careers/rest_opp/working_here.html">

0.0 = (MATCH) weight(text:menu in 4) [DefaultSimilarity], result of:
  0.0 = fieldWeight in 4, product of:
    1.0 = tf(freq=1.0), with freq of:
      1.0 = termFreq=1.0
    0.84584934 = idf(docFreq=6, maxDocs=6)
    0.0 = fieldNorm(doc=4)
</str>
−
<str name="http://www.mcdonalds.ca/ca/en/communities/environment.html">

0.0 = (MATCH) weight(text:menu in 5) [DefaultSimilarity], result of:
  0.0 = fieldWeight in 5, product of:
    1.0 = tf(freq=1.0), with freq of:
      1.0 = termFreq=1.0
    0.84584934 = idf(docFreq=6, maxDocs=6)
    0.0 = fieldNorm(doc=5)
</str>
</lst>
<str name="QParser">LuceneQParser</str>
−
<lst name="timing">
<double name="time">3.0</double>
−
<lst name="prepare">
<double name="time">1.0</double>
−
<lst name="query">
<double name="time">0.0</double>
</lst>
−
<lst name="facet">
<double name="time">0.0</double>
</lst>
−
<lst name="mlt">
<double name="time">0.0</double>
</lst>
−
<lst name="highlight">
<double name="time">0.0</double>
</lst>
−
<lst name="stats">
<double name="time">0.0</double>
</lst>
−
<lst name="spellcheck">
<double name="time">0.0</double>
</lst>
−
<lst name="elevator">
<double name="time">1.0</double>
</lst>
−
<lst name="debug">
<double name="time">0.0</double>
</lst>
</lst>
−
<lst name="process">
<double name="time">2.0</double>
−
<lst name="query">
<double name="time">0.0</double>
</lst>
−
<lst name="facet">
<double name="time">0.0</double>
</lst>
−
<lst name="mlt">
<double name="time">0.0</double>
</lst>
−
<lst name="highlight">
<double name="time">0.0</double>
</lst>
−
<lst name="stats">
<double name="time">0.0</double>
</lst>
−
<lst name="spellcheck">
<double name="time">0.0</double>
</lst>
−
<lst name="elevator">
<double name="time">0.0</double>
</lst>
−
<lst name="debug">
<double name="time">2.0</double>
</lst>
</lst>
</lst>
</lst>
</response> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T07:24:50.123

我的过滤器中有 www.mcdonalds.ca 域配置。由于这被重定向到 www.mcdonalds.ca.ca/en.html，因此任何 URL 都没有得分。

我修改了顶部 URL，而不是 www.mcdonalds.ca，我确实提到了 www.mcdonalds.ca/ca/en.html 并且它有效。

请通过以下网址了解更多详情 -

[http://grokbase.com/t/nutch/user/117cpvp70q/a-possible-solution-to-my-url-redirection-and-zero-scores-problem](http://grokbase.com/t/nutch/user/117cpvp70q/a-possible-solution-to-my-url-redirection-and-zero-scores-problem)

# php - Sphinx旋转索引终端命令不适用于php exec

> ID：15949363
> 
> 赞同：0
> 
> 时间：2013-04-11T12:56:12.813
> 
> 标签：php, centos, sphinx

以下 sphinx index rotate 命令在我的 centos 终端中运行。

```
echo "<password>" | sudo -S /usr/bin/indexer --config /etc/sphinx/sphinx.conf gplay --rotate 
```

但是当我尝试使用“exec” php 命令执行相同的操作时，它不起作用，

```
$output = exec('echo "S5evUna#" | sudo -S /usr/bin/indexer --config /etc/sphinx/sphinx.conf gplay --rotate', $output);

echo "<pre>";
print_r($output);
echo "</pre>"; 
```

这里的输出是空的。

请对此提出任何想法

# ios - 输入 PushChatKey.pem 的密码短语

> ID：15949368
> 
> 赞同：0
> 
> 时间：2013-04-11T12:56:28.633
> 
> 标签：ios, xcode

在为苹果推送通知创建 ssl 证书和私有证书时，我曾经遵循 raywenderlich.com 的步骤。为推送通知创建和配置证书的步骤做得很好，但我坚持使用“输入 PushKey.pem 的密码短语”的地方。用于输入我在上一步中为此密钥提供的密码短语。它总是说密码太小并且字符最少 4 到 1024，我输入了 5 个字符。但是在此步骤中不接受相同的密码短语...任何人都可以帮助我...我是 iOS 新手

```
openssl s_client -connect gateway.sandbox.push.apple.com:2195 -cert PushChatCert.pem -key PushChatKey1.pem
Enter pass phrase for PushChatKey1.pem:
575:error:28069065:lib(40):UI_set_result:result too small:/SourceCache/OpenSSL098/OpenSSL098-44/src/crypto/ui/ui_lib.c:850:You must type in 4 to 1023 characters 
```

谢谢

伊尼扬

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T08:55:24.067

When you finished create CSR file, if you go to the Keys section of Keychain Access, you will see that a new private key has appeared in your keychain. Right click it and choose Export.

Make sure that you used this p12 file to push notification.

You could create new CSR file if need!

TUT:[http://www.raywenderlich.com/32960/apple-push-notification-services-in-ios-6-tutorial-part-1](http://www.raywenderlich.com/32960/apple-push-notification-services-in-ios-6-tutorial-part-1)

Good luck!

# c# - 创建 Web 引用类时出现 NullReferenceException

> ID：15949369
> 
> 赞同：0
> 
> 时间：2013-04-11T12:56:28.800
> 
> 标签：c#, .net, nullreferenceexception, web-reference

我有一个引用 Web 服务的 C#/WPF 项目。但是，有时我`NullReferenceException`在创建代表它的自动生成类的实例时会得到一个：

```
var service = new SSO(); 
```

堆栈跟踪如下：

```
System.NullReferenceException: Object reference not set to an instance of an object.
    in System.Xml.Serialization.XmlSerializer.GetSerializersFromCache(XmlMapping[] mappings, Type type)
    in System.Xml.Serialization.XmlSerializer.FromMappings(XmlMapping[] mappings, Type type)
    in System.Web.Services.Protocols.SoapClientType..ctor(Type type)
    in System.Web.Services.Protocols.SoapHttpClientProtocol..ctor()
    in MyNamespace.SSO..ctor() 
```

有谁知道这里发生了什么？服务器可能会有短暂的停机时间，但这不是我希望在网络连接问题时看到的例外！

更新：自动生成的类的代码，`SSO`以防有人发现它相关：

```
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.Web.Services", "4.0.30319.17929")]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Web.Services.WebServiceBindingAttribute(Name="SSOSoap", Namespace="http://schemas.example.com/SSO")]
public partial class SSO : System.Web.Services.Protocols.SoapHttpClientProtocol
{
    public SSO()
    {
        this.Url = "http://example.com/SSO.asmx";
        if ((this.IsLocalFileSystemWebService(this.Url) == true))
        {
            this.UseDefaultCredentials = true;
            this.useDefaultCredentialsSetExplicitly = false;
        }
        else
        {
            this.useDefaultCredentialsSetExplicitly = true;
        }
    }

    // a lot of methods here
} 
```

# vb.net - 以编程方式在超网格单元格中执行单击

> ID：15949377
> 
> 赞同：1
> 
> 时间：2013-04-11T12:56:40.787
> 
> 标签：vb.net, click, ultrawingrid

我有`UltraGrid`几列看起来像这样：

```
------------------------
| Name | Year | Audit  |
------------------------
| John | 2012 |[Button]|
------------------------
| Bill | 2013 |[Button]|
------------------------ 
```

**我想在运行时使用键盘快捷键**单击所选行的 Audit 列按钮。那可能吗 ？像这样的东西（不存在）

```
myUltraGrid.ActiveRow.Cells("Audit").CellButton.PerformClick() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:31:26.807

点击一个单元格`Button Style`触发事件`ClickCellButton`。此事件接收`CellEventArgs`有关单击的单元格的包含信息。您可以轻松地重构代码以分离在此事件中执行的操作，并使该操作可从事件外部调用（无论何时需要执行该操作）

```
' Your clickCellButton will be refactored to extract in a separate method '
' the action for every cell button'
Private Sub grd_ClickCellButton(sender as object, e as CellEventArgs)
    Try
        if e.Cell.Column.Key == "Audit" Then
            ActionForCellAudit(e.Cell.Row)
        elseif (e.Cell.Column.Key == "key2" Then
            ActionForCellButton1()
        elseif (e.Cell.Column.Key == "key3" Then
            ActionForCellButton1()
    Catch(a As Exception)
        MessageBox.Show(x.Message)
    End Try
End Sub

Private Sub ActionForCellAudit(row As UltraGridRow)
     ' The action required if clicking the Audit cell button is here'
End Sub
...... 
```

现在，当您需要在其他地方执行相同的操作时，您可以提取有关的信息`ActiveRow`并调用`ActionForCellAudit`

```
Private Sub Form1_KeyDown(sender As Object, e As System.Windows.Forms.KeyEventArgs) _
                          Handles Form1.KeyDown
    ' Supposing the CTRL+F5 is the shortcut defined to execute the ActionForCellAudit
    If e.KeyCode = Keys.F5 AndAlso e.Control = True then
        if grd.ActiveRow IsNot Nothing AndAlso grd.ActiveRow.IsDataRow Then
            ActionForCellAudit(grd.ActiveRow)
        End If
    End If
End Sub 
```

# apache-flex - spark.components.List 的多行 itemRenderer - 带有测试用例和屏幕截图

> ID：15949378
> 
> 赞同：2
> 
> 时间：2013-04-11T12:56:41.343
> 
> 标签：apache-flex, flex4, itemrenderer, multiline, itemrenderers

在下面的简单 Flex 4 Web 应用程序中 -

![在此处输入图像描述](https://i.stack.imgur.com/C6qY5.png)

是否可以更改自定义项目渲染器`MyRenderer`，使其包裹太长的行？

**测试应用程序.mxml：**

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application 
    xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" 
    xmlns:mx="library://ns.adobe.com/flex/mx">

    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayList;

            private static const MONTHS:ArrayList = new ArrayList([
                "1 January is a beautyful month", 
                "2 February is a beautyful month", 
                "3 March is a beautyful month", 
                "4 April is a beautyful month", 
                "5 May is a beautyful month", 
                "6 June is a beautyful month", 
                "7 July is a beautyful month", 
                "8 August is a beautyful month", 
                "9 September is a beautyful month", 
                "10 October is a beautyful month", 
                "11 November is a beautyful month",
                "12 December is a beautyful month"
            ]);
        ]]>

    </fx:Script>

    <s:List id="myList"
            width="60"
            dataProvider="{MONTHS}"
            itemRenderer="MyRenderer" /> 
</s:Application> 
```

**MyRenderer.mxml：**

```
<?xml version="1.0" encoding="utf-8"?>
<s:ItemRenderer 
    xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:mx="library://ns.adobe.com/flex/mx" 
    xmlns:s="library://ns.adobe.com/flex/spark"
    autoDrawBackground="false">

    <fx:Script> 
        <![CDATA[    
            [Bindable]
            public var myColor:uint = 0xFFFFFF;

            override public function set label(value:String):void 
            { 
                super.label = value; 
                labelDisplay.text = label; 

            // var list:List = owner as List;
            // if (list)
                // labelDisplay.width = list.width;

                if (label.indexOf("June") >= 0)
                    myColor = 0xFF0000;
                else if (label.indexOf("July") >= 0)
                    myColor = 0x00FF00;
                else if (label.indexOf("August") >= 0)
                    myColor = 0x0000FF;
                else 
                    myColor = 0xFFFFFF;
            } 
        ]]> 
    </fx:Script>

    <s:Rect width="100%" height="100%">
        <s:fill>
            <s:SolidColor color="{myColor}" />
        </s:fill>
    </s:Rect>

    <s:Label id="labelDisplay" />
</s:ItemRenderer> 
```

**更新 2：**

我需要与[创建具有可变行高的多行列表行](http://blog.flexexamples.com/2007/10/27/creating-multi-line-list-rows-with-variable-row-heights/)博客中的相同 - 但对于不再具有该属性的[spark.components.List 。](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/List.html)`wordWrap`

**更新 3：**

实际上，在 RIAStar 回答了我的问题（谢谢！）之后，我的问题才刚刚开始——当我现在调用`myList.ensureIndexIsVisible(MONTHS.length - 1);`它时，它并没有真正滚动到底部。

我准备了一个新问题：[带有多行（自动换行）项目渲染器的列表 - 如何滚动到底部？带有测试用例和截图](https://stackoverflow.com/questions/16044811/list-with-multilined-word-wrapping-item-renderer-how-to-scroll-to-the-bottom)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:05:00.880

您可以为此使用[VerticalLayout](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/layouts/VerticalLayout.html)的[variableRowHeight](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/layouts/VerticalLayout.html#variableRowHeight)属性。像这样的东西：

```
<s:List id="myList" width="60" dataProvider="{MONTHS}" itemRenderer="MyRenderer">
    <s:layout>
        <s:VerticalLayout variableRowHeight="true" 
                          horizontalAlign="justify" 
                          requestedMinRowCount="5"/>
    </s:layout>
</s:List> 
```

此外，您的 ItemRenderer 中的 Label 可以占用它想要的所有水平空间。你应该限制它的`width`. 例如：

```
<s:Label width="100%"/> 
```

# jmeter - 最高线程数：Jmeter vs. WCat 6.3

> ID：15949379
> 
> 赞同：0
> 
> 时间：2013-04-11T12:56:43.463
> 
> 标签：jmeter, load-testing, wcat

我想在单台计算机上使用尽可能多的线程数。
我尝试了 JMeter，但对我来说还不够。我只有几台电脑可以使用。
WCat 生成的线程数量是否比 JMeter 可以合理地同时运行更多？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T12:29:55.907

如果您所说的“线程”实际上是指并发用户，那么[Gatling](http://gatling-tool.org)可能是一个不错的选择。例如，我昨天运行了一个有 10,000 个并发用户和 1000 次点击/秒的测试（被测试的应用程序不能再高了）。

然后，请注意，您能够从单个服务器生成的负载将取决于您的用例。在某些时候，您可能会达到 NIC 限制，然后您将不得不向外扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T09:30:34.873

如上所述，您的情况至少有一组其他选项，而不是 wcat 用法：

*   使用 Jmeter：
    *   尝试应用至少在 jmeter 的[wiki](http://wiki.apache.org/jmeter/)和[最佳实践](http://jmeter.apache.org/usermanual/best-practices.html#lean_mean)中可以找到的资源减少；
    *   尝试[分布式测试](http://jmeter.apache.org/usermanual/jmeter_distributed_testing_step_by_step.pdf)场景；
*   [加特林](http://gatling-tool.org/)
*   [宗](http://tsung.erlang-projects.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T21:40:28.177

你确定这两个工具可以比较： - 你能用 wcat 做复杂的脚本吗？- 可变数据？

如果您的目标是简单的 hit/s，那么 wcat 或 apache bench 可能就足够了。如果您正在尝试更复杂的场景，那么只要您遵循最佳实践，JMeter 就可以运行大量线程。

# sql - 使用另一个表 SQL Oracle 中的数据查询名称的第一个字母

> ID：15949380
> 
> 赞同：0
> 
> 时间：2013-04-11T12:56:50.427
> 
> 标签：sql, oracle

我真的希望有人能帮助我。到目前为止，这个问题已经打败了我。我有一张表格，其中包含每个人参加会议的次数。我需要使用出席人数最多的人的第一个字母来查询另一个表中以相同字母开头的姓名。我将不胜感激任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:23:20.733

如果您有一个包含总计列的员工姓名表，则可以执行以下操作：

```
select *
  from other_tab ot
       inner join (select substr(emp_name, 1, 1) first_letter, 
                          rank() over (order by attendences desc) rnk
                     from emp_meeting_count) mc 
               on ot.name like mc.first_letter ||  '%'
 where mc.rnk = 1; 
```

我使用`rank()`了，因为可能有两个或更多员工的出勤率最高

小提琴：[http ://sqlfiddle.com/#!4/2951d/1](http://sqlfiddle.com/#!4/2951d/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:21:26.783

你可以使用 Like 运算符来实现这个场景

SQL WILDCARDS 可用于在表中搜索数据。

SQL 通配符与 SQL LIKE 运算符一起使用。

```
Syntax

SELECT [* | column_list]

FROM <table_name> WHERE ( column_name)

LIKE <wildcards>; 
```

例子

```
SELECT cust_code,cust_name,cust_city,cust_country  
FROM customer  
WHERE cust_name LIKE 'S%'; 
```

请参阅以下链接以获取信息

[http://www.w3resource.com/sql/wildcards-like-operator/wildcards-like-operator.php](http://www.w3resource.com/sql/wildcards-like-operator/wildcards-like-operator.php)

[http://www.w3schools.com/sql/sql_like.asp](http://www.w3schools.com/sql/sql_like.asp)

[http://msdn.microsoft.com/en-us/library/ms179859.aspx](http://msdn.microsoft.com/en-us/library/ms179859.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T13:37:31.300

这样的事情会起作用吗？我写的是假设

table_abc 包含人员姓名和出席人数 table_xyz 是要检查的另一个表

```
select result_xyz.* from 
(select substr(name,1,1) valueA from table_abc 
where attendance_count=(select max(attendance_count) from table_abc)) result_abc, 
(select substr(name,1,1) valueB,name from table_xyz) result_xyz
where result_abc.valueA=result_xyz.valueB 
```

# javascript - 如何从剪贴板检索复制内容的源详细信息

> ID：15949381
> 
> 赞同：1
> 
> 时间：2013-04-11T12:56:51.787
> 
> 标签：javascript, clipboard

我正在尝试从剪贴板检索元数据，以使用 Javascript 跟踪复制粘贴的内容。我曾尝试使用 clipboardData 对象来获取数据，但除了复制的内容和内容类型之外，我无法获得任何东西。

如果从网页复制，是否可以获取任何类型的元数据以及复制的内容，例如源 URL，如果从 PDF 或 DOC 等复制，则可以获取文件名。

# amazon-web-services - Amazon Route 53 MX 和 Google Apps 如何

> ID：15949384
> 
> 赞同：3
> 
> 时间：2013-04-11T12:57:04.697
> 
> 标签：amazon-web-services, dns, host, amazon-route53, mx-record

我在 dreamhost.com 上托管了一个域，并将名称服务器更改为亚马逊的名称服务器，这样我就可以在路由器 53（整个域）上使用它。为了在 S3 上托管站点，我添加了一些记录。到目前为止，一切都很好。

下一步是设置 Google Apps 以使用该域，我注册并帐户并确认了该域。下一步是设置 MX 记录，我的问题是。我需要在dream host设置MX记录吗？在路由器 53 上？或两者兼而有之？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-11T15:06:56.667

Route 53 告诉您要在注册商 (dreamhost) 处设置的名称服务器。正确完成此操作后，您不再需要在注册商处进行任何 DNS 更改。您已经告诉 Dreamhost 告诉全世界所有 DNS 都在 Route 53 上进行控制和配置。

Goggle 应用程序会告诉您要在 Route 53 上设置的 DNS 条目。

# java - 为什么 HttpServletResponse 总是由 ServletContainer 创建而我们无法创建它

> ID：15949388
> 
> 赞同：-1
> 
> 时间：2013-04-11T12:57:24.113
> 
> 标签：java, jsp, jakarta-ee, servlets

Servlet API 将 doGet 定义为：

```
public void doGet ( HttpServletRequest req, HttpServletResponse res) 
```

为什么它没有被定义为（这对我来说看起来更直观）：

```
public HttpServletResponse doGet ( HttpServletRequest req ) 
```

我知道 ServletContainer 创建了一个 HttpServletResponse 实例并传递给我们的 doGet() 方法；但是为什么我们没有办法创建这个对象并返回它呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T13:10:08.180

你为什么要这样做？换句话说 -`HttpServletResponse`您创建的实例将如何实现比来自容器的实例更多？

无论如何，这里有几个原因：

*   有些方法有严格的约定（例如，在发送完所有标头后，您不能添加更多标头）。容器如何确保这是否正确实施？
*   一些方法需要大量的低级细节，例如`encodeUrl`。为什么要把这个负担交给用户？
*   `sendRedirect`和其他方法`sendError`需要立即执行容器操作。如果您`HttpServletResponse`自己创建，则此操作很有可能会不必要地延迟到您退出为止`doGet`。

# delphi - 使用 Delphi XE2 的 HTTP.post 与 downloadURL

> ID：15949390
> 
> 赞同：0
> 
> 时间：2013-04-11T12:57:28.920
> 
> 标签：delphi, curl, delphi-xe2, idhttp

我正在尝试对两种类型的下载使用相同的过程。两者都在工作。

我想在两者上都使用 TDownloadURL 或 HTTP.Post，但无法确定如何使用。哪种方法以及如何做到这一点？谢谢你。

第一次操作——

```
 procedure TfrmMain.get1Click(Sender: TObject);
 var
json: string;
lHTTP: TIdHTTP;
lParamList: TStringList;
result:string;
begin
  json := CRLF +
          '{' + CRLF +
          ' "resource_id": "391792b5-9c0a-48a1-918f-2ee63caa1c54",' + CRLF +
          ' "filters": {' + CRLF +
          '   "provider_id": 393303' + CRLF +
          ' }' + CRLF +
          '}';
  lParamList := TStringList.Create;
  try
    lParamList.Add('somename='+json);
    lHTTP := TIdHTTP.Create(nil);
    try
     Result := lHTTP.Post('http://hub.Healthdata.gov/api/action/datastore_search', lParamList);
    finally
      lHTTP.Free;
    end;
  finally
    lParamList.Free;
  end;
end; 
```

第二次操作——

```
procedure TfrmMain.get2Click(Sender: TObject); 
var
  dl: TDownloadURL;
  url:string;

begin
url:='http://api.census.gov/data/2010/sf1?key=KEY&get=P0010001,NAME&for=state:*';
 dl := TDownloadURL.Create(self);
  try
    dl.URL := url;
    dl.FileName := execpath+'api1.txt'; dl.ExecuteTarget(nil); dl.Free;
  except
    dl.Free;
  end;

end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T18:13:29.443

`TDownloadURL`使用 GET HTTP 方法。`TIdHTTP.Post`显然使用POST方法。一般来说，两者都不适合用来代替另一个。这就是为什么这两种方法首先存在的原因。

POST 请求可以包含 GET 请求所做的所有信息，以及更多信息，这使得它*看起来*应该能够完成 GET 可以*做*的所有事情，以及更多信息。但是，服务器不需要（也不应该期望）以与 GET 相同的方式处理 POST 请求。

作为编写 HTTP*客户端*的人，您并不能真正控制情况。*服务器*规定了它将遵循哪些方法。客户要么需要做他们期望的事情，要么被拒绝访问。

Indy 组件支持这两种方法，所以如果你只是想让你的 POST 代码和你的 GET 代码看起来*相似*，那么你可以`TDownloadURL`用`TIdHTTP.Get`.

# javascript - 带有css的javascript切换按钮

> ID：15949391
> 
> 赞同：0
> 
> 时间：2013-04-11T12:57:31.900
> 
> 标签：javascript, jquery

我有这个切换按钮，当我单击它时，按钮显示它处于活动状态并且 css 发生变化，因此它更暗。但是当我点击另一个按钮时，切换不会停用（开/关）我想改变它，以便在我点击它时它会打开，当我点击另一个按钮时它会关闭。

**纽扣**

```
<div class="btn-group float_right">
    <a id="gridBtn" onclick="$.views.stuff.ToggleView('gridView')" title="View as grid" class="btn" href="#"><i class="icon-th-large"></i></a>
    <a id="listBtn" onclick="$.views.stuff.ToggleView('listView')" title="View as list" class="btn" href="#"><i class="icon-th-list"></i></a>
</div> 
```

**javascript**

```
$(document).ready(function () {
        $('a#gridBtn').click(function () {
            $(this).toggleClass("down");
        });
        $('a#listBtn').click(function () {
            $(this).toggleClass("down");
        });
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T13:00:32.140

试试这个 CSS 技巧：

```
<div class="btn-group float_right">
    <label>
        <input type="radio" name="viewbuttons" />
        <a id="gridBtn" .....>...</a>
    </label>
    <label>
        <input type="radio" name="viewbuttons" />
        <a id="listBtn" .....>...</a>
    </label>
</div> 
```

然后添加这个 CSS：

```
.btn-group input {display:none}
.btn-group a { /* your "deselected" styles here */ }
.btn-group input+a { /* your "selected" styles here */ } 
```

这是非常有效的，因为您不需要任何 jQuery 来使其工作；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T13:21:39.447

您可以使用以下方法给您`#gridBtn`的`down`课程：

```
$('#gridBtn').addClass('down'); 
```

此外，不需要两个单独的点击处理程序：

```
 $('a#gridBtn, a#listBtn').click(function() {
    $(this).toggleClass('down').siblings().removeClass('down');
  }); 
```

### [演示](http://jsfiddle.net/54xfN/3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T12:59:33.120

需要同时设置其他按钮的状态吗？

```
$(document).ready(function () {
    $('a#gridBtn').click(function () {
        $(this).toggleClass("down");
        $('a#listBtn').attr('class', 'up');
    });
    $('a#listBtn').click(function () {
        $(this).toggleClass("down");
        $('a#gridBtn').attr('class', 'up');
    });
}); 
```

# python - 如何遍历包含列表的 dict 值并删除项目？

> ID：15949396
> 
> 赞同：2
> 
> 时间：2013-04-11T12:57:40.633
> 
> 标签：python, python-2.7

Python新手在这里。我有一个列表字典，如下所示：

```
d = {
  1: ['foo', 'foo(1)', 'bar', 'bar(1)'],
  2: ['foobaz', 'foobaz(1)', 'apple', 'apple(1)'],
  3: ['oz', 'oz(1)', 'boo', 'boo(1)']
} 
```

我试图弄清楚如何遍历字典的键和相应的列表值，并使用括号尾部删除每个列表中的所有字符串。到目前为止，这就是我所拥有的：

```
for key in keys:
    for word in d[key]...: # what else needs to go here?
        regex = re.compile('\w+\([0-9]\)')
        re.sub(regex, '', word)  # Should this be a ".pop()" from list instead? 
```

我想通过列表理解来做到这一点，但正如我所说，我找不到太多关于循环遍历 dict 键和列表的相应 dict 值的信息。设置它的最有效方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T13:02:00.883

您可以重新构建字典，只让不带括号的元素通过：

```
d = {k:[elem for elem in v if not elem.endswith(')')] for k,v in d.iteritems()} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T13:06:05.787

```
temp_dict = d
for key, value is temp_dict:
    for elem in value:
        if temp_dict[key][elem].find(")")!=-1:
            d[key].remove[elem] 
```

您在迭代列表时无法编辑列表，因此您将列表的副本创建为 temp_list ，如果在其中找到括号尾，则从原始列表中删除相应的元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T13:09:52.673

或者，您可以在不重建字典的情况下执行此操作，如果它很大，这可能会更好......

```
for k, v in d.iteritems():
   d[k] = filter(lambda x: not x.endswith(')'), v) 
```

# c# - 从 C# 组合框中检索值

> ID：15949398
> 
> 赞同：1
> 
> 时间：2013-04-11T12:57:41.647
> 
> 标签：c#, combobox

我目前很难从 C# 中的组合框中检索值。组合框项是从数据库中填充的。这就是我填写项目的方式：

```
while (reader.Read())

                {
                    ComboboxItem item = new ComboboxItem();
                    item.Text = (string)reader[0];
                    item.Value = (string)reader[1];
                    comboBox8.Items.Add(item);

                } 
```

此命令显示文本，但不显示值：

```
String s = comboBox8.SelectedItem.ToString(); 
```

并且此命令引发“System.NullReferenceException”

```
String s = comboBox8.SelectedValue.ToString(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T13:09:32.937

SelectedValue 属性用于将 ComboBox 链接到数据源并希望返回与显示内容不同的值。

例如，一种替代方法可能是创建一个 DataTable，将您的数据库读数放入其中，并在那里分配组合框选定的值和文本。例如;

```
DataTable dataTable = new DataTable();
//column 1 name, which will be display member
dataTable.Columns.Add(new DataColumn("nameOfYourTextField"); 
//column 2 name, which will be your value member
dataTable.Columns.Add(new DataColumn("nameOfYourValueField"); 

//assign your datasource (the datatable) to the combobox
comboBox8.DataSource = dataTable; 

//and finally assign your value member (the text you want returning)
comboBox8.ValueMember = "nameOfYourValueField";
//and your display member (the text visible in the combobox)
comboBox8.DisplayMember = "nameOfYourTextField"; 
```

然后在你的读者中；

```
while (reader.Read())

            { 
                //create a new row which matches the signature of your datatable
                DataRow row = dataTable.NewRow();
                //assign data to the rows, given a certain column name
                row["nameOfYourValueField"] = reader[1];
                row["nameOfYourTextField"] = reader[0];
                //and add the row to the datatable
                dataTable.Rows.Add(row);

            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:59:23.307

转换组合框的`SelectedItem`属性

```
var selectedItem =  comboBox8.SelectedItem  as ComboboxItem;
if (selectedItem != null)
{
    // Do something with the selectedItem.Value or selectedItem.Text
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T13:05:18.590

你也可以试试这个方法。

绑定组合框后，您必须设置：

```
 comboBox8.ValueMember = "DBFieldName1";
 comboBox8.DisplayMember = "DBFieldName2";

 if(comboBox8.SelectedItem != null)
 {
        string text=comboBox8.SelectedItem.ToString();
        string value=comboBox8.SelectedValue.ToString();
 } 
```

**注意：** -还要确保阅读器不返回任何空值或重复值。

希望这可以帮助 ：）

# jquery - jQuery 更改 .get 文件运行时

> ID：15949399
> 
> 赞同：1
> 
> 时间：2013-04-11T12:57:43.880
> 
> 标签：jquery, getjson

我使用以下代码在 jquery 中使用 xml 绘制图形：

```
var $xml_name = 'data.xml';
myfunction($xml_name);
function myfunction($xml_name) {
   $.get($xml_name, function (xml) {
        // (some code)
   });
}); 
```

我想在从下拉列表中更改选定值时更改 $xml_name 的值。为此，我使用了以下代码

```
$('#DropDown_Name').change(function () {
    $xml_name = $('newdata.xml');
    myfunction($xml_name); 
}) 
```

但是在更改下拉图表的值时不会刷新。你能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:51:37.420

在这里，您将字符串传递给您的函数：

```
var $xml_name = 'data.xml'; 
```

在您的下拉更改中，您传递 jquery 对象

```
$xml_name = $('newdata.xml'); 
```

我认为这不是正确的行为。

# java - java中的预处理语句

> ID：15949404
> 
> 赞同：1
> 
> 时间：2013-04-11T12:57:52.383
> 
> 标签：java, performance, jdbc, memcached

我有一个用例，我使用 memcache 缓存数据库中的某些结果。我使用查询本身作为键，值将是`CachedRowSetImpl`序列化结果集的类型。为了形成查询，我需要使用`PreparedStatement`which 反过来需要一个到数据库的连接对象。这违背了缓存的全部目的，因为一半以上的时间都花在了建立连接上。有什么解决方法吗？还是我必须使用另一种方法来缓存结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:10:13.837

为避免每次都建立连接，请使用连接池，例如[c3p0](http://www.mchange.com/projects/c3p0)。您将连接池配置为使用 Postgres、用户名 swaldman 和 passwordComboPooledDataSource

```
// in constructor
cpds = new ComboPooledDataSource();
cpds.setDriverClass( "org.postgresql.Driver" ); //loads the jdbc driver            
cpds.setJdbcUrl( "jdbc:postgresql://localhost/testdb" );
cpds.setUser("swaldman");                                  
cpds.setPassword("test-password"); 
```

当您需要 JDBC 连接时，只需使用：

```
Connection connection = cpds.getConnection(); 
```

还有其他连接池，例如[DBCP](http://commons.apache.org/dbcp)，它们的设置方式类似。

# c# - 随机数的行为很奇怪，不是完全随机的

> ID：15949417
> 
> 赞同：2
> 
> 时间：2013-04-11T12:58:23.237
> 
> 标签：c#, .net, visual-studio-2010

在我的 .NET 游戏中，我的 rand 函数确定了五个角色中的每个玩家应该受到多少伤害，但是第一个似乎总是在刻度的底部，最后一个在顶部。因此，在我看来`Character[0]`，伤害很少比最小兰特值多 1 多，并且对于每个`Character`较高指数的伤害，仅从较高的比例随机化。

```
public int GetDamage(int low, int high)
{
    Random r = new Random();
    int rand = r.Next(low, high);
    return rand;
} 
```

这是我使用的随机发生器。然后我像这样更新剩余的健康：

```
int Damage = GetDamage(3, 10);
Characters[Target].Health = Characters[Target].Health - Damage; 
```

在这个例子中，dmg 是这样划分的：

```
Number 1: 3-4
Number 2: 4-6
Number 3: 5-7
Number 4: 7-8
Number 5: 8-9 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T13:01:36.507

您必须重复使用相同的随机实例，否则您将不会获得真正的*随机*值，因为它是使用当前时间作为种子创建的。如果您调用`GetDamage`非常快（例如在循环中），您将始终获得相同的值。

因此，要么使用类中的字段/属性，`GetDamage`要么将随机实例传递给方法。

```
private Random _rnd = new Random();
public int GetDamage(int low, int high)
{
    int rand = _rnd.Next(low, high);
    return rand;
} 
```

[**MSDN**](http://msdn.microsoft.com/en-us/library/system.random.aspx)

> 随机数生成从种子值开始。如果重复使用相同的种子，则会生成相同的数字序列。产生不同序列的一种方法是使种子值与时间相关，从而为每个新的 Random 实例产生不同的序列。默认情况下，Random 类的无参构造函数使用系统时钟生成其种子值，而其有参构造函数可以根据当前时间的刻度数取一个 Int32 值。但是，由于时钟具有有限的分辨率，因此使用无参数构造函数来创建不同的 Random 对象以紧密连续地创建随机数生成器，这些生成器会生成相同的随机数序列。 **这个问题可以通过创建单个 Random 对象而不是多个对象来避免。**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T13:00:41.240

您需要使您的`Random`实例静态化，这将为其播种一次，然后您将获得一个看起来更随机的数字。

```
static Random r = new Random();

public int GetDamage(int low, int high)
{
    int rand = r.Next(low, high);
    return rand;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T13:00:33.600

您需要播种随机数生成器。

请参阅：[如何为随机类播种以避免获得重复的随机值](https://stackoverflow.com/questions/1785744/how-do-i-seed-a-random-class-to-avoid-getting-duplicate-random-values)

从字面上看，这里有数百个这个问题，看看周围。

# php - 赞助商标志二十一

> ID：15949419
> 
> 赞同：0
> 
> 时间：2013-04-11T12:58:29.667
> 
> 标签：php, wordpress, graphical-logo

我正在使用带有 21 个主题的 Wordpress。

目前我有一个体育俱乐部的标志与标题内联。我现在被要求在标头左侧添加赞助商徽标，使其与会徽对齐。有谁知道实现这一目标的简单方法？

这是代码：

```
<header id="branding" role="banner">
        <hgroup>
            <h1 id="site-title"><img  src="http://aberdeenshirecc.org.uk/phpHrX1SaAM.jpg"style="width:84px;height:100px; display:inline; vertical-align:center; img margin-top:200px; "<span><a href="<?php echo esc_url( home_url( '/' ) ); ?>" title="<?php echo esc_attr( get_bloginfo( 'name', 'display' ) ); ?>" rel="home"><?php bloginfo( 'name' ); ?></a></span></h1>

 Sponsored by:
<img  src="http://aberdeenshirecc.org.uk/Ace.jpg"style="width:200px;height:76px;    float:left; display:inline; vertical-align:left; ">
            <h2 id="site-description"><?php bloginfo( 'description' ); ?></h2>
        </hgroup> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:00:30.137

创建一个包含图像的 div 并使用 css 定位它：

CSS：

```
#imgdiv {
 position:absolute;
 top:20px;
 left:-40px;
} 
```

HTML：

```
<div class='imgdiv'><img src='myimage.jpg' /></div> 
```

注意：您需要调整 'top' 和 'left' 的值以使其出现在您需要的位置。

# design-patterns - 对 Akka Actor 与 Java 对象的混淆

> ID：15949422
> 
> 赞同：0
> 
> 时间：2013-04-11T12:58:35.897
> 
> 标签：design-patterns, akka, actor

我正在尝试让自己熟悉 Akka 和 Actors，但我认为我错过了一点。我的接收循环变得过大。例如：

```
class Node extends Actor {
  def receive {
    case "pause" => pause
    case "resume" => resume
    case "methodX" => methodX
    case "methodY" => methodY
    case "methodZ" => methodZ
  } 
} 
```

我是演员、Scala 和函数式编程的新手。我认为我在对象领域的经验正在泄漏到我的演员定义中，所以我的问题是寻找有关如何以“正确”方式定义演员 API 并避免这种无类型消息爆炸的指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:41:42.793

有多少消息都取决于您要封装的内容。一个好的规则是尽量让参与者专注于一项任务，然后让它将事情委托给其他参与者（从而使界面变小）。同样使参与者无状态并在您发送的消息中包含状态将有很大帮助。

保持消息不可变很重要，但这并不意味着它们必须是字符串。您可以定义您接受的消息，并使用案例类发送（以获得不变性），并让编译器为您做一些检查，如果您让它们扩展密封特征。这是一个示例，编译器会抱怨您的匹配并不详尽，因为您没有在接收中处理 FooMessage。

```
object MyActor {
  // these are the messages we accept
  sealed abstract trait Message
  case class FooMessage(foo: String) extends Message
  case class BarMessage(bar: Int) extends Message

  // these are the replies we send
  sealed abstract trait Reply
  case class BazMessage(foo: String) extends Reply
}

class MyActor extends Actor {
  import MyActor._
  def receive = {
    case message: Message ⇒ message match {
      case BarMessage(bar) => sender ! BazMessage("Got " + bar)
    }
  }
} 
```

您还应该尝试在火灾中考虑演员并同时做其他事情（火灾并忘记声音太刺耳）。那就是你应该使用告诉（！）而不是问（？）。不要将消息发送视为方法调用。这将使您的代码阻塞而不是扩展。

Actor 使用的一个常见示例是有一个 Actor 链，其中每个 Actor 执行一项任务，然后将转换后的消息转发给下一个 Actor。最后，您回复启动链的参与者，或者他说您应该回复的任何人，从而缩短了中间的所有参与者。消息无需向下传播，然后在链上进行备份。

希望这能给你一些想法。

# dojo - dijit 过滤选择最小长度

> ID：15949425
> 
> 赞同：4
> 
> 时间：2013-04-11T12:58:37.513
> 
> 标签：dojo

我似乎找不到要求过滤选择输入具有一定长度的方法。我试过这样：

```
new dijit.form.FilteringSelect({
    'name': 'bla',
    'store': jsonRestStore,
    'searchAttr': "name",
    'pattern': '.{3,}',
    'regExp': '.{3,}'
}); 
```

但它不会改变任何事情。如果输入了至少 3 个字符，我希望过滤选择仅查询商店。不可能是那种异国情调的要求，可以吗？该商店后面有数千件商品，因此仅使用 1 或 2 个字符进行查询很慢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T13:29:49.533

我进行了更多搜索，并在 dojo 邮件列表上找到[了这篇文章。](http://dojo-toolkit.33424.n3.nabble.com/FilteringSelect-delay-td3202213.html)总而言之，在 FilteringSelect 中没有办法为它提供原生支持，但它非常容易实现。

```
// custom min input character count to trigger search
minKeyCount: 3,

// override search method, count the input length
_startSearch: function (/*String*/key) {
    if (!key || key.length < this.minKeyCount) {
    this.closeDropDown();
    return;
    }
    this.inherited(arguments);
} 
```

同样在 [API Docs](http://dojotoolkit.org/api/dijit/form/FilteringSelect)中，有一个`searchDelay`属性可以帮助减少查询的数量。

```
searchDelay 
Delay in milliseconds between when user types something and we start searching based on that value 
```

# c# - 使用自定义数据源在 GridView 中启用多选

> ID：15949441
> 
> 赞同：0
> 
> 时间：2013-04-11T12:59:34.260
> 
> 标签：c#, asp.net, gridview, webforms

我有这个`GridView`使用自定义数据源：

```
<asp:ScriptManager ID="DateManager" runat="server" />

<asp:UpdatePanel ID="setDate" runat="server" 
    UpdateMode="Conditional" 
    ChildrenAsTriggers="true">
    <ContentTemplate>
        <asp:GridView ID="res" runat="server" 
            AutoGenerateColumns="False"
            CellPadding="4"
            ForeColor="#333333"
            GridLines="None"
            Width="600px" 
            AllowPaging="True">
            <AlternatingRowStyle BackColor="White" />

            <Columns>
                <asp:BoundField DataField="Ty" HeaderText="Type" />
                <asp:BoundField DataField="time" HeaderText="Time" />
                <asp:BoundField DataField="duration" HeaderText="Duration" />
                <asp:BoundField DataField="confirmed" HeaderText="Status" />
                <asp:CommandField SelectText="SelectIt" ShowSelectButton="True" />
            </Columns>

            <EditRowStyle BackColor="#2461BF" />
            <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
            <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
            <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
            <RowStyle BackColor="#EFF3FB" />
            <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />
            <SortedAscendingCellStyle BackColor="#F5F7FB" />
            <SortedAscendingHeaderStyle BackColor="#6D95E1" />
            <SortedDescendingCellStyle BackColor="#E9EBEF" />
            <SortedDescendingHeaderStyle BackColor="#4870BE" />
        </asp:GridView>
    </ContentTemplate>
</asp:UpdatePanel> 
```

如何启用多项选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:09:12.443

您可以`CheckBox`像下面的代码一样在每一行附近添加并选择多行。

```
<asp:TemplateField>
    <ItemTemplate>
        <asp:CheckBox runat="server" ID="RowLevelCheckBox" />
    </ItemTemplate>
</asp:TemplateField> 
```

有关详细信息，请查看以下文章：[Article1](http://aspnet.4guysfromrolla.com/articles/053106-1.aspx) [Article2](http://www.codeproject.com/Articles/202938/How-to-select-multiple-records-from-the-GridView-a)

# php - 以乱码显示的 Outlook 标头

> ID：15949442
> 
> 赞同：1
> 
> 时间：2013-04-11T12:59:35.433
> 
> 标签：php, mysql, email, character-encoding

我正在开发一次性邮件服务..

英语总是很好用。我修复了编码问题，现在每当从网络邮件服务发送邮件时，无论使用何种语言显示正确（使用 UTF-8 编码）。

唯一的问题是，每当从 MS Outlook 以英语以外的语言发送邮件时，它都会显示奇怪的标题：

> 主题：Ù„ÙˆØØ© Ø§Ù„Ù…ÙØ§ØªÙŠØ Ø§Ù„Ø¹Ø±Ø¨Ù​​ŠØ©</p>

或者

> 主题：×¢×›×©×™×• ×œ×™ ×–×” ×œ× ×¢×•×'</p>

消息显示如下：

> ��������

我尝试对此进行编码，但它不起作用。我确定它与 MySQL 有关，因为 webmail 客户端正确显示它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:48:22.977

您可能需要通过 php 的 htmlentities 和 htmlspecialchars 之类的东西运行外来文本，以将重读字符和非 html 字符转换为 ascii html 代码。

```
$subject = "especificações";
$subject = htmlspecialchars(htmlentities($subject), ENT_QUOTES, 'UTF-8');
var_dump($subject);
// returns string(36) "especifica&ccedil;&otilde;es" 
```

# javascript - 将字符串切片并将每个存储在新数组中

> ID：15949444
> 
> 赞同：0
> 
> 时间：2013-04-11T12:59:38.510
> 
> 标签：javascript, arrays, string

需要帮助。我有类似的字符串`["wt=WLw","V5=9jCs","7W=71X","rZ=HRP9"]`（无限数量的对）

我需要为整个字符串（或更简单的 index0、索引 1 等）创建一个数组，其中包含对`wT`（作为索引）和值，我正在尝试在 JavaScript 中执行此操作，但我无法弄清楚如何来完成这个任务。`WLw``wT``WLw`

非常感谢您的帮助！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T13:04:36.103

您不能将字符串作为数组中的索引，您想要的是一个对象。

您需要做的就是遍历您的数组，将每个值拆分为 2 个项目（键和值），然后将它们添加到一个对象中。

例子：

```
// output is an object
var output = {};
var source = ["wt=WLw","V5=9jCs","7W=71X","rZ=HRP9"];
for (var index = 0; index < source.length; index++) {
    var kvpair = source[index].split("=");
    output[kvpair[0]] = kvpair[1];
} 
```

如果你想要一个数组数组，那么它的过程大致相同，只是将每一对推到输出对象

```
// output is a multidimensional array
var output = [];
var source = ["wt=WLw","V5=9jCs","7W=71X","rZ=HRP9"];
for (var index = 0; index < source.length; index++) {
    output.push(source[index].split("="));
} 
```

**更新**如果你的源实际上是一个字符串而不是一个数组，那么你将不得不做更多的拆分才能让它工作

```
var output = {};
var sourceText = "[\"wt=WLw\",\"V5=9jCs\",\"7W=71X\",\"rZ=HRP9\"]";
// i have escaped the quotes in the above line purely to make my example work!
var source = sourceText.replace(/[\[\]]/g,"").split(",");
for (var index = 0; index < source.length; index++) {
    var kvpair = source[index].split("=");
    output[kvpair[0]] = kvpair[1];
} 
```

**更新 2**

如果您想要的输出是数组数组而不是包含键值对的对象，那么您将需要执行类似@limelights answer 的操作。

具有键值对的对象：`var myObject = { "key1": "value1", "key2": "value2" };`

使用上面的代码，您可以像这样访问“value1”`myObject["key1"]`或`myObject.key1`

数组数组：`var myArray = [ [ "key1", "value1"] ,[ "key2", "value2" ] ];`

使用此代码，您无法通过“键”访问数据（无需遍历整个批次以首先找到它）。在这种形式中，“key1”和“value1”实际上都是值。

要获得“value1”，您可以这样做，`myArray[0][1]`或者您可以使用中间数组来访问该对：

```
var pair = myArray[0];
> pair == ["key1", "value1"]
> pair[0] == "key1"
> pair[1] == "value1" 
```

您可以对两种类型的结果使用 for each 循环

```
// array of arrays
var data = [ [ "hello", "world"], ["goodbye", "world"]];

data.forEach(function(item) {
    console.log(item[0]+" "+item[1]);
});
> Hello World
> Goodbye World

// object (this one might not work very well though)
var data = { "hello": "world", "goodbye": "world" };

Object.keys(data).forEach(function(key) {
    console.log(key+" "+data[key]);
});
> Hello World
> Goodbye World 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T13:06:55.683

正常`for loop`在这里会做得很好！

```
var list = ["wt=WLw","V5=9jCs","7W=71X","rZ=HRP9"];
var pairs = [];
for(var i = 0; i < list.length; i++){
   pairs.push(list[i].split('='));
} 
```

这会给你一个数组对，我假设你想要。否则只需摆脱外部数组并执行`list[i].split('=');`

如果你想把它放入一个对象中，即。不是数组

```
var pairObject = {};
for(var i = 0; i < list.length; i++){
    var pair = list[i].split('=');   
    pairObject[pair[0]] = pair[1];
} 
```

# javascript - 使用参数中的两个值提交表单

> ID：15949455
> 
> 赞同：0
> 
> 时间：2013-04-11T13:00:06.543
> 
> 标签：javascript, html

我想在使用 javascript 提交表单时发送一个值。由于一些编程限制，我不能使用函数。那么我可以像这样在一个参数中给出两个值吗？

```
<form name="editDelete" ...>
<input type="hidden" name="theParam"/>
 ...

<a href="#" ... onclick="document.editDelete.theParam.value = 'the value'; document.editDelete.submit();">Test</a> 
```

或者有什么方法可以在`<a href>`标签本身中使用单个命令提交发送值的表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:04:11.233

试试这个最终解决方案；

```
<form id="editDelete" ...>
<input type="hidden" id="theParam" name="theParam"/>

<a href="#" onclick="document.getElementById('theParam').value = 'thee value'; document.getElementById('editDelete').submit();">Test</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:07:10.483

您可以在表单中使用 GET 方法吗？ [这是一个例子](http://www.htmlcodetutorial.com/forms/_FORM_METHOD_GET.html)

```
<A HREF="../form.html?value1=West&value2=East>2 values</A> 
```

# cocos2d-x - 将 CCString 的字符与其他 CCString 进行映射

> ID：15949459
> 
> 赞同：0
> 
> 时间：2013-04-11T13:00:13.377
> 
> 标签：cocos2d-x

如何将 CCString 的每个字符与 cocos2dx 中其他 CCString 的每个字符进行比较？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:06:36.330

Cocos2dx 是基于 CPP 的吧？只需将字符串获取到 char 数组，然后使用 strcmp 等普通字符串比较函数即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T09:35:12.967

我将您的“比较每个字符”视为“比较相等”。

例如：

```
CCString *pStrA, *pStrB;
string strA = pStrA->toStdString();
string strB = pStrB->toStdString();

if (strA == strB) {
// do something    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-20T06:45:11.823

CCString中有比较字符串的方法

例子

字符串1->比较（字符串2->getCString（））；（或任何正确命名的函数）该函数返回一个数字，我认为这是错误的第一个字母之间的区别，例如 ab = -1 或 bd = 2 ..我认为这是按字母顺序排序的东西.. . 如果没有，有人纠正我吗？

基本上如果你从中得到 0，那么字符串一直是相同的。所以：

```
CCString *string1 = CCString::create("Hi");
CCString *string2 = CCString::create("Hi");

if(string1->compare(string2->getCString()) == 0){
//they are the same
}else{
//different
} 
```

# java - 在 primeFaces 中禁用 rowEditor 的铅笔

> ID：15949463
> 
> 赞同：5
> 
> 时间：2013-04-11T13:00:18.067
> 
> 标签：java, jsf-2, primefaces

我需要在某些行中禁用行编辑器（因为它们的特定数据）我搜索太多但我找不到这样做的方法。

我有两种类型的行，状态为 A 的行和状态为 B 的行。

我想为 A 行启用铅笔并为 B 行禁用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T14:06:47.433

你可以：

```
 <p:column rendered="#{listvar.status != 'B'}">  
                    <p:rowEditor />  
 </p:column> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-18T09:56:26.563

Rong 的回答很好，但是您会注意到，如果您渲染列，您的表格会遗漏一些行......

只需将渲染放在 rowEditor 上即可避免此设计问题：

```
 <p:column >  
                    <p:rowEditor rendered="#{listvar.status != 'B'}" />        
</p:column> 
```

# firefox-addon - Makefile 不会创建和复制文件

> ID：15949464
> 
> 赞同：0
> 
> 时间：2013-04-11T13:00:22.013
> 
> 标签：firefox-addon, makefile, mozilla

我有下面的 Makefile 代码。如果我在命令行中运行“make”，它会创建 xpi 文件。但是当我运行“make install”命令时，它会显示“正在配置文件文件夹中安装。完成！” 但是找不到 .xpi ，而且路径中也没有我需要复制它的路径。

我昨天完成了这项工作，但今天我丢失了所有数据，需要从头开始，似乎我遗漏了一些东西。想不通是什么。

```
 # The name of the extension.
extension_name := helloworld@xulschool.com

# The UUID of the extension.
extension_uuid := helloworld@xulschool.com

# The name of the profile dir where the extension can be installed.
profile_dir := wiuxd07g.default

# The zip application to be used.
ZIP := zip

# The target location of the build and build files.
bin_dir := ../bin

# The target XPI file.
xpi_file := $(bin_dir)/$(extension_name).xpi

# The type of operating system this make command is running on.
os_type := $(patsubst darwin%,darwin,$(shell echo $(OSTYPE)))

# The location of the extension profile.
ifeq ($(os_type), darwin)
  profile_location := \
    ~/Library/Application\ Support/Firefox/Profiles/$(profile_dir)/extensions/\{$(extension_uuid)\}
else
  ifeq ($(os_type), linux-gnu)
    profile_location := \
      ~/.mozilla/firefox/$(profile_dir)/extensions/\{$(extension_uuid)\}
  else
    profile_location := \
      "$(subst \,\\,$(APPDATA))\\Mozilla\\Firefox\\Profiles\\$(profile_dir)\\extensions\\"
  endif
endif

# The temporary location where the extension tree will be copied and built.
build_dir := $(bin_dir)/build

# This builds the extension XPI file.
.PHONY: all
all: $(xpi_file)
    @echo
    @echo "Build finished successfully."
    @echo

# This cleans all temporary files and directories created by 'make'.
.PHONY: clean
clean:
    @rm -rf $(build_dir)
    @rm -f $(xpi_file)
    @echo "Cleanup is done."

# The sources for the XPI file.
xpi_built := install.rdf \
             chrome.manifest \
             $(wildcard content/*.js) \
             $(wildcard content/*.xul) \
             $(wildcard content/*.xml) \
             $(wildcard content/*.css) \
             $(wildcard skin/*.css) \
             $(wildcard skin/*.png) \
             $(wildcard locale/*/*.dtd) \
             $(wildcard locale/*/*.properties)

# This builds everything except for the actual XPI, and then it copies it to the
# specified profile directory, allowing a quick update that requires no install.
.PHONY: install
install: $(build_dir) $(xpi_built)
    @echo "Installing in profile folder: $(profile_location)"
    @cp -Rf ../bin/* $(profile_location)
    @echo "Installing in profile folder. Done!"
    @echo

$(xpi_file): $(build_dir) $(xpi_built)
    @echo "Creating XPI file."
    @$(ZIP) $(xpi_file) $(xpi_built)
    @echo "Creating XPI file. Done!"

$(build_dir)/%: %
    @cp -f $< $@

$(build_dir):
    @if [ ! -x $(build_dir) ]; \
  then \
    mkdir $(build_dir); \
  fi 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:56:45.580

*[你的愿望就是我的命令！]*

1.  在安装规则中使用`$(bin_dir)`而不是。`../bin`
2.  `@`当它不工作时，不要隐藏正在执行的内容。
3.  研究`cp`正在执行的命令是否是您认为应该执行的命令。如果是，请检查源目录 ( `../bin`) 是否包含您期望的文件。你`cp`有`-v`（详细）模式吗？如果是这样，请使用它。

> 所以`cp`命令有效。无论文件夹中的内容是什么，它都会复制到另一个路径。但是没有要复制的 xpi 文件，所以它什么也不做。在某处它不会创建 xpi 文件。

1.  从已执行的命令中删除更多`@`符号（您可以将它们留在`echo`命令上），以便您可以看到出了什么问题——为什么 xpi 文件没有按照您的预期构建。
2.  或用于`make -d`从 make 获取（丰富的）调试输出。您可能想要使用类似的东西：

    ```
    make -d install 2>&1 | tee make.log 
    ```

    所以你捕捉到 make 正在做什么。如果选项不是`-d`，请咨询您的`man make`或同等人员。

# java - Oracle 驱动程序异常 Tomcat 6.0

> ID：15949465
> 
> 赞同：0
> 
> 时间：2013-04-11T13:00:22.780
> 
> 标签：java, oracle, tomcat, encoding, utf-8

我有一个 Tomcat 6.0 应用程序服务器，它有一个非常简单的使用 oracle 连接的 Web 应用程序。连接本身在 server.xml 文件中定义为 JDBCRealm。

服务器的默认编码是 latin1。数据库编码为 UTF-8。通常一切正常，特殊字符按应有的方式插入数据库中，并以正确的编码检索。如果我没记错的话，这是因为 Oracle 驱动程序会自动解决任何编码不匹配的问题。

我在启动 AS 的 catalina.bat 文件中添加了以下位，以设置用于 Catalina 的编码：

```
-Dfile.encoding=UTF-8 
```

现在我仍然可以保存特殊字符`ŰÁÉÚŐÖÜÓ`如 类似的东西：`ĂĂĂĂĂĂĂĂ`。

所以我仍然可以插入，但是在添加该行后我无法以正确的格式获取数据。有谁知道如何解决这个问题？或者什么可能导致它？我需要此设置，因为我实际上是在尝试在另一个环境中重新创建错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T15:09:23.197

嗯，我有点弄清楚问题出在哪里了。我责怪 oracle 驱动程序没有正确进行转换。然而，servlet 一开始就以错误的格式传输值，并以更糟糕的方式显示它们。因此，实际的简单解决方案是使用引用常用编码过滤器的通用过滤器来扩展 was xml，该过滤器也存在于 tomcat 文件夹的 eaxmple webapps 中。我将此添加到 web.xml：

```
<filter>
    <filter-name>Set Character Encoding</filter-name>
    <filter-class>filters.SetCharacterEncodingFilter</filter-class>
    <init-param>
        <param-name>encoding</param-name>
        <param-value>UTF-8</param-value>
    </init-param>
</filter>
<filter-mapping>
    <filter-name>Set Character Encoding</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

一切都好起来了！从现在开始，这几乎是我添加到 web.xml 中的第一件事。无论如何，非常感谢，干杯！

# javascript - 更改事件上的列表框，带有一项

> ID：15949467
> 
> 赞同：1
> 
> 时间：2013-04-11T13:00:26.010
> 
> 标签：javascript, listbox, onchange

我正在使用asp.net listBox，属性rows=1。我希望当我在列表框中选择一个项目时，“onchange”方法将调用一个 javascript 函数。问题是如果我选择列表框中的第一项，“onchange”方法不会启动。我认为那是因为它是默认选中的。

你知道有什么解决办法吗？

谢谢

# javascript - 在jsp中动态包含来自另一个javascript文件的javascript文件

> ID：15949470
> 
> 赞同：0
> 
> 时间：2013-04-11T13:00:29.027
> 
> 标签：javascript, jsp

是否可以在 jsp dynamiacalyy 中包含 javascript 文件，即。在任何侦听器或当前javascript文件中的任何类似内容中。这是为了加快页面加载速度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:45:10.700

是的，有多种选择，例如 jQuery 有 $.getScript 方法。或者你可以使用[http://requirejs.org/](http://requirejs.org/)

# .net - 从 .Net 应用程序控制 Google Chrome

> ID：15949476
> 
> 赞同：0
> 
> 时间：2013-04-11T13:00:58.980
> 
> 标签：.net, google-chrome, webbrowser-control

我需要一种从 .net 代码（例如 IE 的 Web 浏览器）控制 Google Chrome 的方法。在我的代码中，我必须访问 Chrome 应用程序，因此标准解决方案不起作用。我已经尝试过 Awesomium 和 webkit .net。

如果在任何发展中的语言中有另一种方式，我也愿意尝试。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:05:13.857

看看 Selenium .Net - 它旨在帮助对 Web 应用程序进行单元测试，但您可以使用它在 .Net 中任意控制不同的浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:06:40.697

您可以尝试自动化 UI，例如，您可以使用 Inspect.exe 获取几乎每个窗口和子控件的每个句柄，例如按钮，请参见突出显示的矩形。

![在此处输入图像描述](https://i.stack.imgur.com/PecSs.png)

有了这些 UI [AutomationElement](http://msdn.microsoft.com/en-us/library/system.windows.automation.automationelement.aspx)句柄，您几乎可以以交互方式完成所有可以做的事情。

# dynamics-crm-2011 - 使用自定义工作流程从报价单创建订单

> ID：15949477
> 
> 赞同：0
> 
> 时间：2013-04-11T13:01:00.627
> 
> 标签：dynamics-crm-2011, dynamics-crm, crm, dynamics-crm-online

我正在创建一个自定义工作流，它将在 a 的状态`Quote`发生更改时触发，它将创建一个`Order`从该`Quote`记录中获取所有值的值。

现在创建一个`Order`是容易的部分，但从`Quote`记录中获取值对我来说不是。

你能建议我一个方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:23:44.613

您为什么要这样做，而不是简单地单击报价单上的“创建订单”按钮？这将为您吸收关系映射中的所有信息。和产品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:10:06.557

不确定您是否可以在没有客户工作流程活动的情况下做到这一点。您需要创建一个客户工作流活动。您可以从 PrimaryEntityId 中获取 id。获得 Id 后，您可以使用 C# SDK 查找所有属性，并使用该信息来填充和创建您的订单。

# c - 全局数组在while循环内不更新？

> ID：15949479
> 
> 赞同：1
> 
> 时间：2013-04-11T13:01:15.147
> 
> 标签：c, arrays, loops, while-loop

我有一个结构数组，在while循环中我向该数组添加了一些东西，但是当我打印出数组时，我得到了错误的输出？（最后添加的元素打印了 n 次，n 是我添加的东西的数量）

我用谷歌搜索了这个，我认为这是因为 Bash 中的 while 循环创建了一个子shell，不太确定。

任何帮助将不胜感激（请耐心等待，我只是一名学生！！）

使用 Mac OSX 山狮 Xcode 4 gcc

代码：

```
#include <stdio.h>
#include <limits.h>
#include <ctype.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <sys/types.h>

typedef struct{
    char* one;  
    char* two;
} Node;

Node nodes[100];
int count = 0;

void add(char *one,char*two){
    Node newNode = {one,two};
    nodes[count]= newNode;

    printf("one: %s\n",one); 
    printf("two: %s\n",two); 

    count++;
}

void print(){
    int x;
    for (x = 0; x < 10; x++)
        printf("%d : (%s, %s) \n",x,nodes[x].one, nodes[x].two);
}

void check(char **arg)
{
    if(strcmp(*arg, "Add") == 0)
        add(arg[1],arg[2]);
    else if(strcmp(*arg,"print") == 0)
        print();
    else
        printf("Error syntax Enter either: \n Add [item1][item2]\n OR \n print\n");
}

void readandParseInput(char *line,char **arg)
{ 
    if (fgets (line, 512, stdin)!= NULL) {  
        char * pch;
        pch = strtok (line," \n\t");
        int count = 0;
        arg[0] = pch;

        while (pch != NULL)
        {
            count++; 
            pch = strtok (NULL, " \n\t"); 
            arg[count] = pch;
        }
    }else{
        printf("\n");
        exit(0);
    }
}

int main() 
{
    int i;
    for(i = 0;i <100; i++){
        nodes[i].one = ".";
        nodes[i].two = ".";
    }

    char  line[512];             /* the input line                 */
    char  *arg[50];              /* the command line argument      */

    while (1) 
    { 
        readandParseInput(line,arg);
        if(arg[0] != NULL)
            check(arg);
    }
    return(0);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:06:16.917

[`strtok()`](http://en.cppreference.com/w/c/string/byte/strtok)返回指向最初传递的缓冲区中不同元素的指针。这意味着数组中的所有条目都将指向同一个缓冲区的不同元素，名为`line`. 您需要复制由返回的指针`strtok()`：

*   使用和。[`malloc()`](http://en.cppreference.com/w/c/memory/malloc)_ 或者，[`strlen()`](http://en.cppreference.com/w/c/string/byte/strlen)[`strcpy()`](http://en.cppreference.com/w/c/string/byte/strcpy)
*   使用非标准[`strdup()`](http://linux.die.net/man/3/strdup)

`free()`无论哪种情况，当不再需要时，内存必须为d。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:03:54.073

这是因为您对所有输入使用相同的缓冲区。

您需要复制放入结构中的字符串。通过对字符串使用数组并将`strcpy`其放入其中，或者通过使用`strdup`为字符串分配新内存并在一个函数中进行复制。

# javascript - 防止 MVC 4 中的页面自动滚动

> ID：15949489
> 
> 赞同：0
> 
> 时间：2013-04-11T13:01:39.753
> 
> 标签：javascript, jquery, html, asp.net-mvc-4

我有一个 MCV4 应用程序（在 Visual Studio 2012 中使用 C# 开发），每当我单击一个链接（注意我的链接的 90% 是 HTML.ActionLink）时，页面滚动位置会自动重置到页面顶部。这是非常令人沮丧的，因为页面的布局没有被重新加载，它只是渲染的视图。我试过了

```
$('a').click(function (e) {
            return false;
}); 
```

但这所做的只是阻止我的链接完全正常工作。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:15:09.993

你也许可以添加

```
e.preventDefault(); 
```

在你回来之前。

# c# - 使用自定义 DataRow 会给出错误“尝试将元素作为与数组不兼容的类型进行访问。”

> ID：15949490
> 
> 赞同：2
> 
> 时间：2013-04-11T13:01:44.727
> 
> 标签：c#, datatable, datarow

我正在尝试实现我自己的`DataRow`课程。和`DataRow`类`DataTable`如下所示：

```
public class GenericFormFieldDataTable : TypedTableBase<GenericFormFieldDataRow>
{
    public IEnumerable<ExtraInfo> Information { get; set; }

    public GenericFormFieldDataTable(IEnumerable<ExtraInfo> info)
    {
        Information = info;
    }

    public void AddGenericFormFieldRow(GenericFormFieldDataRow row)
    {
        Rows.Add(row);
    }
    public GenericFormFieldDataRow AddGenericFormFieldRow(LineData data)
    {
        //THE LINE BELOW CAUSES THE CRASH
        GenericFormFieldDataRow newRow = ((GenericFormFieldDataRow)(NewRow()));
        List<object> values = new List<object>();
        ...

        Here we do things with values, Information and eventually fill datarow.LineData

        ...
        newRow.ItemArray = values.ToArray();
        Rows.Add(newRow);
        return newRow;
    }

    protected new GenericFormFieldDataRow NewRowFromBuilder(DataRowBuilder builder)
    {
        return new GenericFormFieldDataRow(builder);
    }

    protected override Type GetRowType()
    {
        return typeof (GenericFormFieldDataRow);
    }

    public GenericFormFieldDataRow this[int index]
    {
        get
        {
            return ((GenericFormFieldDataRow)(this.Rows[index]));
        }
    }
}

public class GenericFormFieldDataRow : DataRow
{
    public LineData LineData { get; set; }

    protected internal GenericFormFieldDataRow(DataRowBuilder builder) : base(builder) {}
} 
```

问题是当我们调用`AddGenericFormFieldRow`我们得到错误：

```
Attempted to access an element as a type incompatible with the array.

Call stack:
System.Data.DataTable.NewRow(Int32 record) +60
   System.Data.DataTable.NewRow() +16
   GenericFormFieldDataTable.AddGenericFormFieldRow(LineData data) in GenericFormFieldDataTable.cs:37 
```

该代码基于数据集设计器生成的内容。我在这里错过了什么/做错了什么？

# javascript - 如何更改和跟踪对文本区域的更改

> ID：15949494
> 
> 赞同：0
> 
> 时间：2013-04-11T13:01:56.950
> 
> 标签：javascript, jquery

我发现很难为这个问题想出一个问题的标题，所以我很抱歉它相当神秘，但我会尝试在那里更好地解释。

基本上我正在开发的应用程序的一部分涉及将“占位符”放置在文本区域中，然后在文本区域之外修改这些占位符。

例如：

```
This is the <first> placeholder. This is the <second> placeholder.
This is the <first> placeholder again. 
```

基本上我有 JS 来检测这些占位符并创建输入框来保存文本。所以会有一个输入文本框**first**和一个**second**。

我想要实现的是，当我在文本框中输入一个值时，它会将文本区域中的占位符更改为正在输入到文本框中的内容。考虑一下用于 textarea 的 sublime 文本编辑器的片段。

我试图弄清楚如何跟踪文本区域中的占位符。例如，如果一个占位符是`<first_name>`并且我开始在占位符文本框中输入“比利”。我可以使用字符串替换功能轻松更改占位符。但是现在`<first_name>`文本区域中不存在占位符，所以现在我不能回去更改它。我需要有一种方法可以在这些占位符发生变化时跟踪它们。

我希望这是有道理的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:28:17.007

如果您没有绑定到`<textarea>`元素，则可以尝试使用带有属性的简单 div `contenteditable="true"`。这样您就可以使用 some`<span>`来标记所有占位符。

[我在 jsfiddle 上](http://jsfiddle.net/JeryT/)设置了一个演示，试试看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:11:33.547

对于该任务，使用带有的元素`contenteditable="true"`会更容易，因为您可以将占位符表示为`span`元素，然后您只需通过`id`或任何其他唯一的方式检索它们`attribute`即可更新其内容。

如果您**必须**使用 a`textarea`并且用户只能使用外部输入修改它的内容，那么您可能最初可以跟踪`index`每个占位符及其内容`length`，并在值更改时保持同步。

然后，您可以轻松替换`textarea`. 例如，如果占位符从 15 开始，长度为 13。

```
 var string = 'this is a test {placeholder} bla bla bla',
        placeHolderIndex = 15,
        placeHolderLength = 13;

    string = 
        string.substring(0, placeHolderIndex) 
        + 'new value' 
        + string.substring(placeHolderIndex + placeHolderLength);

//update indexes of every placeholders that comes after this 
//one and update the content length of this placeholder. 
```

显然，您不想对任何值进行硬编码，而是希望以动态方式处理此过程，但这只是一个示例。

*`textarea`注意：我猜如果您使用的是内容，用户可以修改内容。在这种情况下，它会使事情变得更复杂一些，因为您必须为`index`用户所做的每一次修改更新占位符的 ，并且您还必须阻止他们直接编辑占位符映射的文本。*

# spring - PowerMockito 的性能影响

> ID：15949498
> 
> 赞同：6
> 
> 时间：2013-04-11T13:02:06.307
> 
> 标签：spring, junit, powermock

我们有以下模式，它对测试执行时间产生了巨大的影响。

我想明白为什么。

```
@RunWith(PowerMockRunner.class)
@PrepareForTest(SomeSingleton.class)
public class SomeTest {

@Before
public void setUp() throws Exception {
    PowerMockito.mockStatic(SomeSingleton.class);
    Mockito.when(SomeSingleton.getInstance()).thenReturn(new SomeSingleton());
} 
```

SomeSingleton 类是非常传统的，并且（不是开玩笑）从 spring 容器中获取它的共享实例。

备注：我为实例添加了一个公共静态设置器（破坏了单例的想法）但为此赢得了 25 秒！

**问题：“PrepareForTest”和“mockStatic”究竟做了什么需要 25 秒？**

# java - 对数组进行排序并计算其元素

> ID：15949499
> 
> 赞同：1
> 
> 时间：2013-04-11T13:02:16.807
> 
> 标签：java

我试图对数组进行排序并计算数组元素，请帮我找出缺少的东西，已经调试了很多次。这是我的代码和我得到的输出。谢谢

```
package habeeb;

import java.util.*;

public class Habeeb {
    public static void main(String[] args) {
        Scanner input = new Scanner(System.in);
        int[] num = new int[30];
        int i, count=0;

        System.out.println("Enter the integers between 1 and 100" );

        for( i=0; i<num.length; i++){
            num[i]= input.nextInt();
            if(num[i]==0)
                break;
            count++;
        } 
```

在这里调用函数

```
 Sorting(num, i, count);
    }

    public static void Sorting(int[] sort, int a, int con){
        if (a<0) return;
 /*am sorting the array here*/
        Arrays.sort(sort); 
        int j, count=0;

        for(j=0; j<con; j++){
            if(sort[a]==sort[j])
                count++;
        }

        System.out.println(sort[a]+" occurs "+count+" times"); 
        Sorting(sort, a-1, con);
    }
} 
```

这是输出：

```
run:
Enter the integers between 1 and 100
2
5
4
8
1
6
0
0 occurs 6 times
0 occurs 6 times
0 occurs 6 times
0 occurs 6 times
0 occurs 6 times
0 occurs 6 times
0 occurs 6 times 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T13:06:40.173

您的问题是数组的大小为 30，当您对其进行排序时，您没有分配的所有值都等于 0，因此它们位于排序数组的前面。后来在前 6 个数字中都是 0，所以你的输出是正确的。

为了避免您面临的问题，我建议您使用`ArrayList`而不是简单的数组，以便您可以动态地向其中添加元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T13:07:34.213

你做的工作比必要的多。我会这样解决这个问题：

```
Map<Integer, Integer> countMap = new HashMap<Integer,Integer>();  

for( i=0; i<num.length; i++){
    int current = input.nextInt();  
    if(countMap.get(current) != null)  
    {  
        int incrementMe = countMap.get(current);  
        countMap.put(current,++incrementMe);  
    }  
     else  
     {  
         countMap.put(input.nextInt(),1);  
     }  
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T13:15:44.573

试试这个

计数方法

```
public int count(int[] values, int value)
{
    int count = 0;
    for (int current : values)
    {
        if (current == value)
            count++;
    }
    return count;
} 
```

然后使用

```
int[] sorted = Arrays.sort(num);
for (int value : sorted)
{
    System.out.println("" + value + " occurs " + count(sorted, value) + " times");
} 
```

这肯定有效。

# windows-8 - 我们在 Windows 8 中有提醒吗

> ID：15949501
> 
> 赞同：0
> 
> 时间：2013-04-11T13:02:21.600
> 
> 标签：windows-8, windows-store-apps

我想在我的应用程序中添加提醒，并且用户应该能够打开/关闭提醒。我是在 windows phone 中完成的，但在 windows 8 中找不到 Reminder 类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:35:40.593

我们在 Windows 8 应用程序中有 toast 通知，可用作提醒（无论您当前使用什么程序，都会出现在您机器右上角的一个矩形弹出窗口）。更多信息请访问：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh761493.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh761493.aspx)（有关操作方法信息，另请参阅下面的主题）。

最终用户可以全局（从所有应用程序）或仅从单个应用程序关闭通知。

# scala - 嵌入图像以 Eclipse 并用 scala 显示它

> ID：15949506
> 
> 赞同：0
> 
> 时间：2013-04-11T13:02:48.287
> 
> 标签：scala, playframework

我想问一下如何显示图像以及如何将其嵌入到eclipse中。

嵌入它后，我试图将其显示为

```
<img src=("/UbitMvc/riivo.jpg")/>
<img src="/UbitMvc/1.jpg">
<img src="/home/ilgun/play/UbitProject/Resources/1.jpg"> 
```

所以基本上我正在尝试所有可能的方式。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:35:52.583

至少玩！2.0 及更高版本，您需要在 /conf/routes 文件中添加 GET 才能访问您的图像。

```
GET /assets/*file controllers.Assets.at(path="/public", file) 
```

我也相信Play的标准！应用程序是将所有图像、javascript 和样式表放到 /public 目录中的相应文件夹中。

前任。/public/images/riivo.jpg

所以你的 img 电话最终应该是

```
<img src=@routes.Assets.at("/images/riivo.jpg")> 
```

# php - 在亚马逊产品 API 示例代码 (PHP) 中出现错误

> ID：15949507
> 
> 赞同：0
> 
> 时间：2013-04-11T13:02:56.690
> 
> 标签：php, amazon-web-services, amazon

我下载了**[Product Advertising PHP Soap Library](http://aws.amazon.com/code/Product%20Advertising%20API?_encoding=UTF8&jiveRedirect=1)**并浏览了示例代码。我在 sampleSettings.php 文件中配置了 'AWS_API_KEY'、'AWS_API_SECRET_KEY'、'AWS_ASSOCIATE_TAG'、'AWS_ANOTHER_ASSOCIATE_TAG' 的值。尝试访问“sampleItemSearch.php”时，我的浏览器中出现以下错误。

**SOAP 错误：解析 WSDL：无法从“ [http://webservices.amazon.com/AWSECommerceService/AWSECommerceService.wsdl](http://webservices.amazon.com/AWSECommerceService/AWSECommerceService.wsdl) ”加载：需要开始标记，未找到“<”**

我试图从链接获得帮助：[https](https://forums.aws.amazon.com/thread.jspa?messageID=270273) ://forums.aws.amazon.com/thread.jspa?messageID=270273但它没有用。

**注意：**我尝试在浏览器中运行以下 url 并得到以下输出：

`$request="http://webservices.amazon.com/onca/xml?Service=AWSECommerceService&AssociateTag=ASSOCIATETAG01-20&AWSAccessKeyId=MY_ACCESS_KEY_ID&Operation=ItemSearch&Version=2011-08-01&SearchIndex=Books&Keywords=harry%20potter&Timestamp=2013-04-10T12%3A44%3A42.000Z&Signature=ASasd5645AdSG878asdHsaHJ9YTefl1F6i0%3D";`

请建议我应该做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-27T05:46:13.957

我终于解决了。下面提到的代码工作正常。

```
 AWSAccessKeyId   = "*******************";
    $SecretAccessKey = "******************************";
    $AssociateTag    = "***************";

    $ItemId = '****'; //10 or 13 digit isbn
    $Timestamp = gmdate("Y-m-d\TH:i:s\Z");
    $Timestamp = str_replace(":", "%3A", $Timestamp);
    $ResponseGroup = "ItemAttributes,Images";
    $ResponseGroup = str_replace(",", "%2C", $ResponseGroup);

    $String = "AWSAccessKeyId=$AWSAccessKeyId&AssociateTag=$AssociateTag&IdType=ISBN&ItemId=$ItemId&Operation=ItemLookup&ResponseGroup=$ResponseGroup&SearchIndex=Books&Service=AWSECommerceService&Timestamp=$Timestamp&Version=2011-08-01";

    $String = str_replace("\n", "", $String);

    $Prepend = "GET\nwebservices.amazon.com\n/onca/xml\n";
    $PrependString = $Prepend . $String;

    $Signature = base64_encode(hash_hmac("sha256", $PrependString, $SecretAccessKey, True));

    $Signature = str_replace("+", "%2B", $Signature);
    $Signature = str_replace("=", "%3D", $Signature);

    $BaseUrl = "http://webservices.amazon.com/onca/xml?";
    $SignedRequest = $BaseUrl . $String . "&Signature=" . $Signature;

    $XML  = simplexml_load_file($SignedRequest);

    print_r($xml); // output 
```

# java - 在 Java EE 项目中使用 java.security.acl 的优缺点

> ID：15949513
> 
> 赞同：2
> 
> 时间：2013-04-11T13:03:12.787
> 
> 标签：java, security, jakarta-ee, acl

我将使用*java.security.acl实现**访问控制列表*，以在用户帐户页面中显示允许的项目。

 *例如，有一些用户和用户组，用户和组可以有一些权限。用户帐户页面中有一些链接，它们是添加、删除、编辑和查看。所有用户的用户帐户页面都相同，但链接（添加、删除、编辑和查看）将根据用户权限显示不同。

*我可以使用集合框架*来完成这项任务。我将在*ERP*（*企业应用程序*）的初始开发中使用*java.security.acl*来实现它。我想知道这个实现是否会有任何安全漏洞或某些东西（即使在将来）。我怀疑的原因是，[当我访问一个显示](http://docstore.mik.ua/orelly/java-ent/jnut/ch18_01.htm). **`The use of this package is not recommended`**

 **使用这个包而不是*集合框架*有什么好处吗？是否有任何情况需要在*Java EE*项目中实现此包？欢迎您的所有建议，建议和意见。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-20T06:53:29.697

我想现在提供答案可能为时已晚，但我遇到了这个问题，我刚刚在 ACL 上阅读了一些东西。

首先， 中的类已被包中`java.security.acl`的类所取代 如此处[所述](http://docs.oracle.com/javase/7/docs/api/java/security/acl/package-summary.html)。作为一般策略，在进行新开发时，我更喜欢只使用最新的 API。`java.security`

第二; 包中的类`java.security`可能仅用于保护系统资源，如`file I/O`和`network I/O`或打印机等。保护您的应用程序的域对象不是它们的本意，如此处最后一段[所述](http://docs.oracle.com/javase/7/docs/technotes/guides/security/spec/security-spec.doc2.html)。

为此，您可以查看[spring-security-acl ，或者推出自己的解决方案（正如您在问题中提到的那样）。](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/domain-acls.html)

**使用这个包而不是集合框架有什么好处吗？**

好吧，取决于您要达到的目标，但是，就您而言，这个问题不相关。

**是否有任何情况需要在 Java EE 项目中实现此包？**

不，不需要，除非您需要访问*客户端*上的资源，或者计划使用基于套接字的*自定义通信和 SSL/TLS。****

# jsf-2 - 托管 bean 转换器注入

> ID：15949520
> 
> 赞同：0
> 
> 时间：2013-04-11T13:03:38.977
> 
> 标签：jsf-2, cdi, managed-bean

大家好，我对 jsf 托管 bean 和 @PersistenceUnit 有疑问。我正在使用这个转换器

```
import javax.faces.bean.ManagedBean;
import javax.faces.bean.RequestScoped;
import javax.faces.component.UIComponent;
import javax.faces.context.FacesContext;
import javax.faces.convert.Converter;
import javax.faces.convert.ConverterException;
import javax.faces.convert.FacesConverter;
import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.PersistenceUnit;
import mn.bsoft.crasmonclient.model.Customer;

/**
 *
 * @author D
 */
@ManagedBean
@RequestScoped
@FacesConverter(value="convertToConverter")
public class ConvertToCustomer  implements Converter{
    @PersistenceUnit(unitName = "CrasmonClientPU")
    private EntityManagerFactory entityManagerFactory;
    private EntityManager em;

    @Override
    public Object getAsObject(FacesContext context, UIComponent component, String value) {
        try {
            em = entityManagerFactory.createEntityManager();
            Object ret = em.find(Customer.class, new Integer(value));
            return ret;
        } catch (ConverterException e) {
            System.out.println(e.getFacesMessage());
        }  
        return null;
    }

    @Override
    public String getAsString(FacesContext context, UIComponent component, Object value) {
        try {
            Customer pa = (Customer) value;
            return String.valueOf(pa.getCustomerId());

        } catch (Exception e) {
            System.out.println(e.getMessage());
        }
        return null;
    }

} 
```

我在 EntityManagerFactory 上得到了空指针异常。在我的 faces-config 文件中，我有：

```
<converter>
<converter-id>convertToCustomer</converter-id>
<converter-class>crasmonclient.converter.ConvertToCustomer</converter-class>
</converter> 
```

我错过了什么？我不明白为什么要获得空指针。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:27:24.083

确保在您的 WAR 项目中有一个`persistence.xml`文件。此外，不可能同时使用`@ManagedBean`和`@FacesConverter`。您需要删除`@FacesConverter`并`<converter>`避免混淆，并将转换器专门用作托管 bean，如下所示：

```
<h:inputText converter="#{convertToCustomer} /> 
```

此外，你为什么不`@PersistenceContext`直接注入：

```
@PersistenceContext
EntityManager em; 
```

# android - 是否可以在 IDEA Android UI 设计器中为视图显示虚拟文本？

> ID：15949522
> 
> 赞同：2
> 
> 时间：2013-04-11T13:03:40.963
> 
> 标签：android, intellij-idea

我最近从 eclipse 切换到 IntelliJ IDEA 进行 Android 开发。除了 eclipse 中相当有用的设计器预览之外，我没有遗漏任何功能。我在运行时在我的活动中填充了某些视图，相应的 XML 文件中没有定义文本。在eclipse中，它看起来像这样：

![在此处输入图像描述](https://i.stack.imgur.com/IF5nE.png)

它使用占位符文本填充空视图，这很适合在无需启动应用程序的情况下获得布局的粗略印象。但在 IDEA 中，设计器是这样的：

![在此处输入图像描述](https://i.stack.imgur.com/Tzd35.png)

视图是空的，如果不在组件树中选择它们，甚至很难看到它们。我在选项中没有找到任何内容，这是 IDEA 中缺少的还是我错过了一个选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:48:58.657

现在不可能，但如果有的话，我已经创建了一个新的功能请求，[请投票](http://youtrack.jetbrains.com/issue/IDEA-105162)。

# r - 如何在数学表达式中包含对对象的调用结果？

> ID：15949526
> 
> 赞同：3
> 
> 时间：2013-04-11T13:03:44.853
> 
> 标签：r

我很难使用`expression()`将文本添加到绘图的功能。具体来说，我一直无法在表达式中使用对对象的调用结果。这是一个例子：

### 例子

```
set.seed(1)
x <- 1:100
y <- 2*x + 3 + rnorm(length(x), sd=10)

fit <- lm(y~x)
plot(y~x)
abline(fit)
text(50,200, labels=expression(paste(alpha, "=", round(fit$coeff[1],3), "; ", beta, "=", round(fit$coeff[2],3), "; ", R^2, "=", round(summary(fit)$r.squared,2)))) 
```

![在此处输入图像描述](https://i.stack.imgur.com/tZMBN.jpg) 我希望文本看起来像图中用红色写的那样。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T13:09:37.467

试试`?bquote`，

```
text(50,200, label=bquote(alpha == .(fit$coeff[1]) ~ "; "~ beta == .(fit$coeff[2])~"; "~R^2 ==  .(summary(fit)$r.squared))) 
```

# python - 编码错误（csv文件+mysql）

> ID：15949532
> 
> 赞同：1
> 
> 时间：2013-04-11T13:04:04.977
> 
> 标签：python

我的编码有问题。

我的*csv 文件*（编码 UTF-8）：

> Id,Title,FullDescription
> 55408086,注塑产品设计师,• 模具经验是优势• 汽车经验是必须的

和我的*python代码*（简化）：

```
# -*- coding: utf-8 -*-
import csv
import codecs

with codecs.open('D:\\Downloads\\Train_rev2.csv', 'rb', encoding='utf-8') as csv_file:
    data = csv.reader(csv_file, delimiter=',')
    data.next()
    for row in data:
        print (row[0], row[1], row[2]) 
```

这打印：

> （'55408086', '注塑产品设计师', '\xe2\x80\xa2 模具经验是优势\xe2\x80\xa2 汽车经验是必须的'）

然后我将数据插入数据库（使用UTF-8 Unicode（utf8）编码的*MYSQL*），我得到的数据编码错误：

```
55408086,Injection Moulding Product Designer,â€¢ Tooling experience is an advantage â€¢ Automotive experience is as must 
```

# c# - 必须使用 http://1/？在 new Uri() 中以获取 NameValueCollection

> ID：15949543
> 
> 赞同：3
> 
> 时间：2013-04-10T00:55:36.357
> 
> 标签：c#, .net

我正在尝试解析`string Response`为`NameValueCollection`如下所示：

```
public static NameValueCollection Request()
{
    // Snipped irrelevant code, so here's the string I get:
    string Response = "someparam=abcdef&another=123456";

    return HttpUtility.ParseQueryString(
        new Uri("http://1/?" + Response)
    .Query);
}

NameValueCollection Request = SomeClass.Request();
string SomeParam = Request.Get("someparam");
string Another = Request.Get("another"); 
```

但是我必须指定似乎是“错误的” `http://1/?`（`UriFormatException`没有它就抛出a）。

我应该以不同的方式解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T08:53:10.013

你没有理由在`Uri`这里使用，只是`HttpUtility.ParseQueryString(Response)`应该这样做。

# javascript - onClick / onclick 在 HTML5 / JavaScript 中似乎没有按预期工作

> ID：15949546
> 
> 赞同：3
> 
> 时间：2013-04-11T13:04:49.407
> 
> 标签：javascript, html

我正在尝试做一些非常简单的事情-单击按钮时调用一个函数。我已经在网上查看了几个示例，例如 W3Schools 和（我相信）我正确使用了 onclick / onClick 它似乎没有运行。我尝试了几种不同的方法 - 我真的不确定我做错了什么。

**方法一**

HTML

```
<button id="buttonAdd" onclick="add()">Add</button> 
```

JavaScript

```
function add() {
    console.log("Test"); 
} 
```

结果：

> 测试

单击该按钮时，它会在 console.log 中以比我容易看到的速度更快地闪烁然后消失。

**方法二**

HTML

```
<button id="add">Add</button> 
```

JavaScript

```
window.onload = function() {
    document.getElementById("add").onclick = add; 
} 

function add() {
    console.log("Test"); 
} 
```

结果

> 测试

单击该按钮时，它会在 console.log 中以比我容易看到的速度更快地闪烁然后消失。

**方法三**

HTML

```
<button id="add">Add</button> 
```

JavaScript

```
window.onload = function() {
    document.getElementById("add").onclick = add(); 
} 

function add() {
    console.log("Test"); 
} 
```

结果

> 测试

这出现在控制台日志中并保留在那里，没有单击按钮。

**问题**

我通常感到困惑。据我所知，我正在做示例所建议的事情（我尝试过的不同方法反映了示例中的差异）。

谢谢。

**编辑**

所以看来问题是console.log闪烁的速度几乎比我看到的要快......有谁知道为什么会这样？页面似乎正在刷新，但我不知道为什么会这样......

**回答**

该按钮的形式会导致页面在单击时刷新。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T13:09:02.483

问题是你的函数的名称。它与元素的 id 相同。做一个测试尝试写这个`console.log(add)`。您将看到它记录 DOM 节点而不是函数。

你的按钮是表格吗？因为如果是这样，则提交表单，这就是页面刷新的原因。你可以在你的测试中发布一个 jsfiddle 吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T13:21:31.167

### 关于方法一：

我需要看到更多的 html 结构才能确定，但​​听起来像在方法 1 中，函数没有以范围内的方式正确声明。这可能与名称相同有关，正如[theBrain 提到](https://stackoverflow.com/a/15949644/259014)的那样，或者它可能是由其他问题引起的。

编辑：从您对 theBrain 的回复来看，如果您使用不同的名称，听起来您可以让方法 1 起作用。鉴于此，您还可以通过更改 onclick 以包含返回 false 值来阻止页面发布。以下任一方法都可以：

```
<button id="buttonAdd" onclick="add(); return false;">Add</button> 
```

或者

```
<button id="buttonAdd" onclick="return add();">Add</button> 
```

再加上`return false;`作为`add()`函数代码的最后一行。

### 关于方法2：

在任何一种情况下，方法 2 都是实现这一点的更好方法，因此我们可以忽略方法 1 失败背后的原因（尽管函数与按钮元素的名称明显不同肯定是一个好习惯；就我个人而言，我在前言我所有的按钮 id 都带有“btn_”）。

在这两种方法中超快速清除控制台的可能原因是您没有`type`为按钮声明。不同的浏览器在没有类型的情况下会做不同的事情（请参阅[W3Schools 按钮标签](http://www.w3schools.com/tags/tag_button.asp)上的提示），听起来您将其视为提交按钮，这意味着它在单击时返回到页面。您应该能够通过`type='button'`在按钮元素的属性中指定来防止这种行为。

### 关于方法3：

最后，方法 3 提供的行为是因为您的赋值语句也在执行对`add()`函数的调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T13:08:55.440

> 单击该按钮时，它会在 console.log 中以比我容易看到的速度更快地闪烁然后消失。

这是可疑的——控制台输出通常不会在没有用户交互的情况下被清除。

会不会是您的页面刚刚重新加载——因此控制台输出“消失”了？

* * *

一般来说，你不应该再使用这种“老派”事件处理（除非它是针对非常小规模的事情）。

看看流行的 JS 库，比如 jQuery 等——它们在很多方面简化了事件处理（除其他外）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-21T08:26:43.637

我的有点不同，尽管我从@TheBrain 的回答中得到了帮助。我的 javascript 方法的名称是`submit()`，它实际上是在提交我的表单。当我将方法的名称更改为 时`submitForm()`，它起作用了。

我认为早些时候`submit()`是在内部调用 Javascript而不是我`Form`的`submit()`javascript 方法。

邀请更正。

# vhdl - 什么是可以发送的以太网帧样本？

> ID：15949548
> 
> 赞同：0
> 
> 时间：2013-04-11T13:04:51.243
> 
> 标签：vhdl, fpga, crc32, raw-ethernet

我想将以太网帧从 FPGA 发送到我的 PC 以供 Wireshark 接收

我将有效负载传递给 CRC 生成器以获取 CRC 结果，但我猜是 CRC 错误，因为wireshark 没有收到任何我的有效负载

我有 2 个想法

```
1\. find a ethernet frame in hex code in internet and copy to VHDL to send in order to make sure no CRC error and check whether it send or not? could you post a correct ethernet frame in hex code here?

1b. any free CRC generator code in VHDL available in internet? and any free CRC generator code in C++ language or C# language or Java language for hard code CRC in ethernet frame?

2\. use layer 2 programming in ubuntu to send a ethernet frame to another computer,
whether i can send and display the ethernet frame which i send in ubuntu or i need to capture with wireshark in another computer? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:08:50.537

使用您的 FPGA 工具创建以太网内核。这通常也会为您创建一个测试平台。运行该测试台，记下生成的数据的值。

作为另一种选择，我过去曾使用一些 Python 库来创建以太网数据包。

[http://code.google.com/p/dpkt/source/browse/trunk/dpkt/ethernet.py](http://code.google.com/p/dpkt/source/browse/trunk/dpkt/ethernet.py)

我从未使用过它，但它看起来可能会有所帮助：

[http://packeth.sourceforge.net/packeth/Home.html](http://packeth.sourceforge.net/packeth/Home.html)

# jsf - 标记库支持命名空间：http://java.sun.com/jsf/html，但没有为名称定义标记：输入

> ID：15949550
> 
> 赞同：1
> 
> 时间：2013-04-11T13:05:01.410
> 
> 标签：jsf, primefaces

我正在尝试实现 jsf + primefaces + twitter bootstrap：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.prime.com.tr/ui"
>
<h:head>
    <title>IMPORT JSF SET ATTRIBUTES</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <meta name="author" content="" />

    <!-- Le styles -->
    <h:outputStylesheet name="css/bootstrap.css" />
    <h:outputStylesheet name="css/bootstrap.min.css" />
    <h:outputStylesheet name="css/override.css" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

    <!-- Le fav and touch icons
<link rel="shortcut icon" href="../assets/ico/favicon.ico">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
<link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">
-->
</h:head>
<h:body>
    <div class="navbar navbar-inverse navbar-static-top">
        <div class="navbar-inner navbar-large">
            <div class="container">
                <a class="brand" href="#">Name</a>
                <ul class="nav">
                    <li><a href="#buy">Link</a></li>
                    <li><a href="#about">Link</a></li>
                </ul>
                <form class="navbar-form pull-left">
                    <div class="input-append offset1">
                        <h:input class="span5" placeholder="put search terms here"
                            type="text" />
                        <button class="btn" type="submit">
                            <i class="icon-search"></i>
                        </button>
                    </div>
                </form>
                <ul class="nav pull-right">
                    <li class="dropdown"><a class="dropdown-toggle"
                        data-toggle="dropdown" href="#"> How to <b class="caret"></b>
                    </a>
                        <ul class="dropdown-menu">
                            <li class="nav-header">Link</li>
                            <li><a href="#">Link 1</a></li>
                            <li><a href="#">Link 2</a></li>
                            <li><a href="#">Link 3</a></li>
                            <li class="divider"></li>
                            <li class="nav-header">Link</li>
                            <li><a href="#">Link 1</a></li>
                            <li><a href="#">Link 2</a></li>
                            <li><a href="#">Link 3</a></li>
                        </ul></li>
                    <li><a href="#login">Login</a></li>
                    <li><a href="#register">Signup</a></li>
                </ul>
            </div>
        </div>
    </div>

    <div class="container">[Template content will be inserted here]</div>

    <footer>
    <ul class="inline text-center">
        <li>© 2013</li>
    </ul>
    </footer>
    <!--/.fluid-container-->

    <!-- Le javascript
================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <h:outputScript name="js/jquery-1.7.2.min.js" />
    <h:outputScript name="js/bootstrap.min.js" />
    <h:outputScript name="js/jquery.dataTables.min.js" />
    <h:outputScript name="js/bootstrap.js" />

</h:body>
</html> 
```

但是，我得到：

```
<h:input> Tag Library supports namespace: http://java.sun.com/jsf/html, but no tag was defined for name: input 
```

我真的很感谢你的回答！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T13:11:16.083

`h:input`标签在 JSF 中不存在。使用一些特定的输入标签，例如：`h:inputHidden`, `h:inputText`, `h:inputSecret`, `h:inputTextarea`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:10:24.573

我有一个问题，你确定你的意思是 h:input 而不是 h:inputtext？

抱歉-> 编辑：您正在执行以下操作：

 `````
 <form class="navbar-form pull-left">
                <div class="input-append offset1">
                    <h:input class="span5" placeholder="put search terms here"
                        type="text" />
                    <button class="btn" type="submit">
                        <i class="icon-search"></i>
                    </button>
                </div>
            </form> 
````  `那是普通的html，如果你想使用JSF的魔力，你必须做这样的事情：

 `````
 <h:form>
                    <h:inputText value="#{hereIsYourManagedBean.field}" />
                    <h:commandButton action="#{hereIsYourManagedbean.action}">
                         DoJsfAction
                    </h:commandButton >

            </h:form> 
````  `JSF-Servlet 将捕获您的操作，呈现输入表单，将其放入您的 ManagedBean 字段中，调用 ManagedBean 的方法，最后根据您的方法创建响应。主要是由您的 faces-config.xml 配置的另一个 xhtml 站点````

# ios - 隐藏 iOS 标准控件的子视图的风险

> ID：15949551
> 
> 赞同：2
> 
> 时间：2013-04-11T13:05:02.170
> 
> 标签：ios, objective-c, app-store

我想在一些 iOS 标准控件中隐藏特定的子视图。假设它是`MPMoviePlayerViewController`.

```
MPMoviePlayerViewController *standartPlayer = [[MPMoviePlayerViewController alloc] initWithContentURL:[NSURL URLWithString:@"..."]];

...

for (UIView *subView in standartPlayer.view.subviews) {
    if (subView.backgroundColor == [UIColor redColor])
        [subView setHidden:YES];
} 
```

再说一遍，我可以找到一些带有红色背景颜色的视图`MPMoviePlayerViewController`并将它们隐藏起来。

我没有使用私钥或私有类名来查找视图。如果Apple使用新版本更改某些内容，则此代码也不会导致崩溃

```
[[standartPlayer.view.subviews objectAtIndex:12] setHidden:YES]; 
```

我的问题是，这是否足够安全以通过 AppStore 的 Apple Review？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T13:15:06.447

在下面的原始答案中，我认为您在隐藏/显示子视图时正在征求有关最佳实践的信息。

回想起来，我收集到您正在尝试更改内置于现有 iOS 控件中的子视图。这让我觉得有点脆弱，高度依赖于控件的内部结构，Apple 可以自由地将其从一个 iOS 版本更改为另一个版本。就个人而言，我不会仅仅因为这个原因而倾向于追求这种技术。

关于 Apple 应用程序的审批流程，我不知道他们出于这个原因拒绝了应用程序，但如果他们这样做了也不会感到惊讶。[您的概念与应用审查指南](https://developer.apple.com/appstore/resources/approval/guidelines.html)第 10 节中的任何特定点都没有冲突，但也不完全符合第 10 节的精神。应用审查指南模棱两可，令人沮丧，并且可能会发生变化。你可能没问题，但不能保证。

* * *

关于隐藏/显示子视图时的最佳实践的一些观察：

1.  在苹果的应用审核过程中，这种事情不太可能导致拒绝。[如果您正在更改控件的内部子视图，您可能没问题，但我想这取决于您在该过程中的积极程度。]

2.  如果你发现自己总是隐藏/显示一堆子视图，有时将它们放在容器视图中更容易，然后隐藏/显示容器。

3.  我会劝阻您不要做诸如`objectAtIndex:12`选择特定子视图之类的事情。为您的子视图设置[`tag`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/occ/instp/UIView/tag)属性然后[`viewWithTag`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/occ/instm/UIView/viewWithTag%3a)在您想要选择一个时使用（例如隐藏/显示）会更安全。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T13:07:42.810

我想说的是，您没有使用任何私有 api 或与之相关的任何东西。我在 App Store 中收到了一些拒绝，但没有类似的情况。我会说这是安全的，您只是在隐藏子视图。

# php - 搜索字符串时使用 strpos 没有成功

> ID：15949553
> 
> 赞同：1
> 
> 时间：2013-04-11T13:05:11.110
> 
> 标签：php, string, strpos

我有以下代码/字符串： `$ids="#222#,#333#,#555#";`

当我使用以下方法搜索零件时：

```
if(strpos($ids,"#222#")) 
```

它不会找到它。但是当我在没有哈希的情况下搜索时，它可以使用：

```
if(strpos($ids,"222")) 
```

我已经尝试过使用`strval`搜索参数，但这也不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T13:07:33.353

`strpos`从 0 开始计数，如果没有找到则返回 false。你需要`===`像这样检查它是否是假的......

```
if (strpos($ids, '#222#') === false) // not found 
```

或者`!==`，如果您想要相反的测试，请使用...

```
if (strpos($ids, '#222#') !== false) // found 
```

有关更多信息，请参阅[PHP 手册条目](http://uk3.php.net/manual/en/function.strpos.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T13:07:43.683

使用 strpos 时，您没有明确测试 FALSE。像这样使用它：

```
if(strpos($string, '#222#') !== FALSE) {
    // found
} else {
    // not found
} 
```

* * *

说明：您正在这样使用它：

```
if(strpos($string, '#222#')) {
    // found
} 
```

这有什么问题？答案：`strpos()`将返回在字符串中找到子字符串的位置。在您的情况下`0`，它位于字符串的开头。但是除非您使用 or`0`发出明确的检查，否则 PHP 会将其视为错误。`===``!==`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T13:07:39.707

它按预期工作。`strpos()`返回 0，因为您要搜索的字符串位于单词的开头。您需要进行相等搜索：

更新您的`if()`声明如下：

```
if(strpos($ids, '#222') !== false)
{
    // string was found!
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T13:09:30.133

试试这个：

```
$ids="#222#,#333#,#555#";
if(strpos($ids,"#222#") !== false)
{
    echo "found";
} 
```

你应该使用 `!==`，因为位置`'#222#'`是`0th (first)`字符。

# javascript - jQuery表单提交，防止第一次提交后多次发送

> ID：15949557
> 
> 赞同：6
> 
> 时间：2013-04-11T13:05:18.687
> 
> 标签：javascript, jquery, submit, delay

我正在制作一个使用 jquery 提交来请求一些数据的 web 应用程序，但我不希望人们在第一次提交后多次提交表单。所以我希望在提交后，下一个提交几秒钟内什么都不做。

```
$("#updatestock_form").submit(function(e){

    // requesting my data..

}); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T13:08:21.963

> *“所以我希望在提交后，下一个提交几秒钟内什么都不做。”*

如果您的意思是希望用户的第二次和后续提交尝试被忽略，直到经过一定的秒数，您可以通过多种方式做到这一点。这是第一个想到的：

```
var allowSubmit = true;
$("#updatestock_form").submit(function(e){
    if (!allowSubmit) return false;
    allowSubmit = false;
    setTimeout(function(){ allowSubmit = true; }, 5000);

    // your existing submit code here
    // requesting my data..
}); 
```

也就是说，有一个标志，指示当前是否允许提交。在提交事件上，如果该标志为假，则`false`立即返回以取消提交事件。否则（如果当前是`true`）将标志设置为`false`，设置超时以在 5 秒后将标志改回，然后继续使用现有的提交代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T13:06:56.547

```
$("#updatestock_form").submit(function(e){
    $(this).unbind("submit")
    $("#submitButton").attr("disabled", "disabled")
}); 
```

很简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T13:07:51.993

你正在做一个ajax请求提交吗？因此，创建一些锁定变量`var locked;`并将其设置为`locked = true;`提交时并将其重置为`false`ajax 调用完成时。（成功条件）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T13:09:36.690

在按钮的 onclick 事件上禁用按钮

```
$("#buttonId").bind('click', function() { $(this).attr("disabled", "disabled"); }); 
```

并在成功操作后删除禁用属性

# spring - Spring JPA 存储库自动装配问题

> ID：15949565
> 
> 赞同：3
> 
> 时间：2013-04-11T13:05:37.440
> 
> 标签：spring, jpa, repository, autowired

我按照 youtube 视频教程设置 Spring JPA 项目，但我的 Spring JPA 项目仍然存在问题，希望有人能提供帮助。

[http://www.youtube.com/watch?v=kM7Gr3XTzIg](http://www.youtube.com/watch?v=kM7Gr3XTzIg)

主要问题似乎是自动装配我的 JPARepository。我已经测试了我的 entityManager / 持久性单元通过以下测试代码工作（它拉回了预期的记录）。

```
public class CheckEntityManagerWorksTest {
    private static Logger logger = Logger.getLogger(CheckEntityManagerWorksTest.class.getName());

    private static EntityManagerFactory emFactory;

    private static EntityManager em;

    @BeforeClass
    public static void setUp() throws Exception {
        try {
            logger.info("Building JPA EntityManager for unit tests");
            emFactory = Persistence.createEntityManagerFactory("pu");
            em = emFactory.createEntityManager();
        } catch (Exception ex) {
            ex.printStackTrace();
            fail("Exception during JPA EntityManager instanciation.");
        }
    }

    @AfterClass
    public static void tearDown() throws Exception {
        logger.info("Shuting down Hibernate JPA layer.");
        if (em != null) {
            em.close();
        }
        if (emFactory != null) {
            emFactory.close();
        }
    }

    @Test
    public void testPersistence() {
        try {

            em.getTransaction().begin();

            Integer id = 51;
            Accounts account = em.find(Accounts.class, id);
            assertNotNull(account);

            System.out.println("Account username: " + account.getUsername());

            em.getTransaction().commit();

        } catch (Exception ex) {
            em.getTransaction().rollback();
            ex.printStackTrace();
            fail("Exception during testPersistence");
        }
    }
} 
```

正如我所说，测试适用于连接到数据库等，但下面的测试失败并出现自动装配异常（页面底部的堆栈跟踪）：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("**/applicationContext.xml")
public class AccountsRepositoryTest {

    @Autowired
    AccountsRepository repo;

    @Test
    public void testAccountsRepository() {
        assertNotNull(repo.findOne(51));
    }
} 
```

下面是我的设置。

持久性.xml

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://java.sun.com/xml/ns/persistence     http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
             version="2.0">
    <persistence-unit name="pu">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <properties>
            <property name="hibernate.connection.url" value="jdbc:derby://localhost:1527/craigtest"/>
            <property name="hibernate.connection.password" value="craigtest"/>
            <property name="hibernate.connection.driver_class" value="org.apache.derby.jdbc.ClientDriver"/>
            <property name="hibernate.connection.username" value="craigtest"/>
            <property name="hibernate.dialect" value="org.hibernate.dialect.DerbyDialect" />
            <property name="hibernate.show_sql" value="true" />
        </properties>
    </persistence-unit>
</persistence> 
```

应用程序上下文.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:jpa="http://www.springframework.org/schema/data/jpa"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
 http://www.springframework.org/schema/beans/spring-beans.xsd
 http://www.springframework.org/schema/data/jpa
 http://www.springframework.org/schema/data/jpa/spring-jpa.xsd">

    <bean id="myEmf" class="org.springframework.orm.jpa.LocalEntityManagerFactoryBean">
        <property name="persistenceUnitName" value="pu"/>
    </bean>

    <bean id="myTxManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="myEmf"/>
    </bean>

    <jpa:repositories base-package="com.mycompany.jpaspring.repositories" />
</beans> 
```

我的仓库：

```
package com.mycompany.jpaspring.repositories;

import com.mycompany.jpaspring.entity.Accounts;
import org.springframework.data.jpa.repository.JpaRepository;

public interface AccountsRepository extends JpaRepository<Accounts, Integer>{

} 
```

我的实体：

```
package com.mycompany.jpaspring.entity;

import java.io.Serializable;
import javax.persistence.Basic;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.NamedQueries;
import javax.persistence.NamedQuery;
import javax.persistence.Table;
import javax.xml.bind.annotation.XmlRootElement;
@Entity
@Table(name = "ACCOUNTS")
@XmlRootElement
@NamedQueries({
    @NamedQuery(name = "Accounts.findAll", query = "SELECT a FROM Accounts a"),
    @NamedQuery(name = "Accounts.findById", query = "SELECT a FROM Accounts a WHERE a.id = :id"),
    @NamedQuery(name = "Accounts.findByUsername", query = "SELECT a FROM Accounts a WHERE a.username = :username"),
    @NamedQuery(name = "Accounts.findByFirstname", query = "SELECT a FROM Accounts a WHERE a.firstname = :firstname"),
    @NamedQuery(name = "Accounts.findByLastname", query = "SELECT a FROM Accounts a WHERE a.lastname = :lastname")})
public class Accounts implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @Basic(optional = false)
    @Column(name = "ID")
    private Integer id;
    @Basic(optional = false)
    @Column(name = "USERNAME")
    private String username;
    @Column(name = "FIRSTNAME")
    private String firstname;
    @Column(name = "LASTNAME")
    private String lastname;

    public Accounts() {
    }

    public Accounts(Integer id) {
        this.id = id;
    }

    public Accounts(Integer id, String username) {
        this.id = id;
        this.username = username;
    }

    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String getFirstname() {
        return firstname;
    }

    public void setFirstname(String firstname) {
        this.firstname = firstname;
    }

    public String getLastname() {
        return lastname;
    }

    public void setLastname(String lastname) {
        this.lastname = lastname;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (id != null ? id.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof Accounts)) {
            return false;
        }
        Accounts other = (Accounts) object;
        if ((this.id == null && other.id != null) || (this.id != null && !this.id.equals(other.id))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "com.mycompany.jpaspring.entity.Accounts[ id=" + id + " ]";
    }

} 
```

堆栈跟踪：

```
-------------------------------------------------------------------------------
Test set: com.mycompany.jpaspring.AccountsRepositoryTest
-------------------------------------------------------------------------------
Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.797 sec <<< FAILURE!
testAccountsRepository(com.mycompany.jpaspring.AccountsRepositoryTest)  Time elapsed: 0.507 sec  <<< ERROR!
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'com.mycompany.jpaspring.AccountsRepositoryTest': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: com.mycompany.jpaspring.repositories.AccountsRepository com.mycompany.jpaspring.AccountsRepositoryTest.repo; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [com.mycompany.jpaspring.repositories.AccountsRepository] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireBeanProperties(AbstractAutowireCapableBeanFactory.java:374)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:110)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:312)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:288)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:284)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:88)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:53)
    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:123)
    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:104)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164)
    at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110)
    at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:175)
    at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcessWhenForked(SurefireStarter.java:107)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:68)
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: com.mycompany.jpaspring.repositories.AccountsRepository com.mycompany.jpaspring.AccountsRepositoryTest.repo; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [com.mycompany.jpaspring.repositories.AccountsRepository] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:513)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:92)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
    ... 32 more
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [com.mycompany.jpaspring.repositories.AccountsRepository] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:947)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:816)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:730)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:485)
    ... 34 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:27:42.723

对我来说一切似乎都很好，除了这一行：

```
@ContextConfiguration("**/applicationContext.xml") 
```

你真的需要导入多个xml文件吗？具体在哪个文件夹`applicationContext.xml`？您可以尝试用完整路径参考替换上述内容吗？像这样的东西：

```
@ContextConfiguration("classpath:/com/.../application-context.xml") 
```

# c# - 在 Windows 窗体应用程序中使用 Esent 数据库时出现 EsentTooManyInstancesException

> ID：15949568
> 
> 赞同：0
> 
> 时间：2013-04-11T13:05:45.517
> 
> 标签：c#, .net, winforms, memory, esent

我们正在尝试使用 Esent 数据库作为一个巨大的内存列表的替代品，以在执行应用程序时释放内存。但是由于创建了很多 ESENTDbWrapper（我们对 Esent.Interop 的自定义包装器）的实例，因此*在*某些时候它会抛出**EsentTooManyInstancesException**。

那么，最大数量是多少。可以初始化的同时实例数？或者，我们是否缺少任何与配置相关的东西？？？任何形式的建议表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:31:58.677

实例数量的限制是 1024。听起来好像您正在泄漏实例。

但是创建实例相对昂贵。您应该共享同一个实例，而是为您的访问创建多个会话。

该实例与日志文件流相关联，并且通常以独占方式打开日志文件和数据库，因此您会收到 ACCESS_DENIED 错误。我猜您正在对您的实例进行只读访问，并且只读实例将以只读方式打开文件，并“允许其他读者”访问这些文件。

希望有帮助，

-马丁

# java - java中的StringTokenizer。为什么又增加了一个空间

> ID：15949570
> 
> 赞同：1
> 
> 时间：2013-04-11T13:05:50.910
> 
> 标签：java

我正在使用 jdk 1.6（它较旧但还可以）。我有这样的功能：

```
public static ArrayList gettokens(String input, String delim)
  {
    ArrayList tokenArray = new ArrayList();
    StringTokenizer tokens = new StringTokenizer(input, delim);
    while (tokens.hasMoreTokens())
    {
      tokenArray.add(tokens.nextToken());
    }
    return tokenArray;
  } 
```

我最初的意图是使用令牌来清除重复电子邮件的输入字符串（即初始）。

假设我有

```
input = ", email-1@email.com, email-2@email.com, email-3@email.com"; //yes with , at the beginning
delim = ";,"; 
```

当我运行上面的函数时，结果是：

```
[email-1@email.com,  email-2@email.com,  email-3@email.com] 
```

`space`这很好，但是在 and之间`,`又增加了一个`email`。

这是为什么？以及如何解决？

**编辑：**

这是打印输出的函数：

```
List<String> tokens = StringUtility.gettokens(email, ";,");
Set<String> emailSet = new LinkedHashSet<String>(tokens);

emails = StringUtils.join(emailSet, ", "); 
```

呵呵，现在我看到了答案。

**编辑 2 - 根本原因：**

问题的根本原因是那一行代码：

```
emails = StringUtils.join(emailSet, ", "); 
```

`", "`加入令牌时添加了一个额外的。从上面的示例中，一个令牌看起来像这样`" email-1@email.com"`，当`join`应用它时，它将在令牌之前添加`comma`和`space`。因此*，如果一个标记在字符串的开头有一个空格，那么它将在 comma 和 space 之间有两个空格*。

例子：

`", "`+ `" email-1@email.com"`=`",<space><space>email-1@email.com"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:11:24.133

您的字符串中有空格，并且`ArrayList`' 的实现`toString`在每个元素之前添加了一个空格。这个想法是你有一个和的列表`"x"`，输出应该是而不是`"y"``"z"``"[x, y, z]"``"[x,y,z]"`

您真正的问题可能是您在令牌中保留了空格。使固定：

```
public static List<String> gettokens(String input, String delim)
  {
    ArrayList<String> tokenArray = new ArrayList<String>();
    StringTokenizer tokens = new StringTokenizer(input, delim);
    while (tokens.hasMoreTokens())
    {
      tokenArray.add(tokens.nextToken().trim());
    }
    return tokenArray;
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T13:09:01.550

我认为使用String 的[split](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String,%20int%29)方法会更好，因为它会更短。您需要做的就是：

```
 String[] values = input.split(delim); 
```

它将返回一个数组而不是一个列表。

您的空间的原因是因为您将其添加到您的打印方法中。

```
List<String> tokens = StringUtility.gettokens(email, ";,");
Set<String> emailSet = new LinkedHashSet<String>(tokens);

emails = StringUtils.join(emailSet, ", ");  //adds a space after a comma 
```

所以`StringTokenizer`按预期工作。

在您的情况下，无需太多修改代码，您可以在删除重复项之前使用 trim 函数清除空格，然后使用分隔符“，”加入，如下所示：

```
 tokenArray.add(tokens.nextToken().trim()); 
```

你会得到没有两个空格的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T13:09:07.940

您可以更改分隔符以包含`", "`sapce，然后它将不会包含在标记元素中。

更简单的是使用返回字符串数组的[split() 方法](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split%28java.lang.String%29)，所以基本上该方法看起来像：

```
public static ArrayList gettokens(String input, string delim)
{
   return Arrays.asList(input.split(delim));   
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T13:09:33.093

打印数组列表时，它会打印所有以逗号和空格分隔的对象。您的输入在每个逗号之前也有一个空格，因此会导致两个。

您可以使用：

```
tokenArray.add(tokens.nextToken().trim()); 
```

从您的输入中删除不需要的空格。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T13:09:13.083

中间没有空格或逗号。

尝试将您的 ArrayList 打印为：

```
for(Object obj: tokenArray )
    System.out.println(obj); 
```

# python - 将字符串的长度与列表中具有相同长度的字符串匹配

> ID：15949571
> 
> 赞同：0
> 
> 时间：2013-04-11T13:05:52.323
> 
> 标签：python, string, match

所以如果我有这个：

`a = "hi"
b = ["hello there", "goodbye", "nice to meet you"]`

所以如果 len(a) 是 2 那么是否有可能在 b 中找到一个长度相同的字符串？在这种情况下是“你好”

对于“hi”，我在数字符，但对于“hello there”，我在数单词。

我尝试拆分字符串： `b = [["hello", "there"], "goodbye", "nice to meet you"]` 但我只能找到一种方法将它们一一拆分

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T13:08:10.830

如果您的意思是元素中**的单词数**`b`应与中**的字符数**相同`a`：

```
a = "hi"
b = ["hello there", "goodbye", "nice to meet you"]

next(w for w in b if len(w.split()) == len(a))
# returns 'hello there'

[w for w in b if len(w.split()) == len(a)]
# returns ['hello there'] 
```

# c++ - 将 2 个基本字符串连接在一起

> ID：15949577
> 
> 赞同：-2
> 
> 时间：2013-04-11T13:06:15.270
> 
> 标签：c++, string, string-concatenation

我有两个字符串：

```
string word;
string alphabet; 
```

`word`有一些我传递给的输入；比方说`"XYZ"`。

`alphabet`有字母 except `XYZ`，所以它是`"ABCDEFGHIJKLMNOPQRSTUVW"`

当我试图用“+=”连接它们时，我得到的只是`word`（即`"XYZ"`）。我想让它看起来像这样：

```
XYZABCDEFGHIJKLMNOPQRSTUVW 
```

我究竟做错了什么？代码基本就是这个vvvv

============================encryption.cpp==================== ==============================

```
#include <cstdlib>
#include <iostream>
#include "encryption.h"
#include <string>

encryption::encryption()
{
alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";

}

string encryption::removeletter(string word,char letter)
{
    //remove letter
    string temp;
    int indis=0;
    for(int i = 0; word[i] != '\0'; i++)
    {
        if(word[i] != letter)
            {
                temp[indis]=word[i] ;
                indis++;
            }

    }

    word=temp;

    return word;
}

This is the function i have proplems with :

    void encryption::encrypt(string word)//main.cpp is just calling this atm
    {
        string temp;
        int pos;
         //getting rid of the repeating letters
        for(int i = 0; i < word.length(); i++)
        {
            if( (pos = temp.find(kelime[i])) < 0)
                temp += word[i];
        }
        word=temp;//that ends here
        //taking words letters out of the alphabet
        for(int i = 0; i < word.length(); i++)
        {
            alfabet=removeletter(alfabet,word[i]);

        }
        for(int i = 0; i < word.length()-1; i++)
        {
            for(int j=0;alfabet[j] !='\0'; j++)
                if(alfabet[j+1] =='\0') alfabet[j]='\0';
        }

        /* I tried += here */
    } 
```

============================加密.h==================== =================================

```
#ifndef encryption_h
#define encryption_h
#include<string>

    class encryption

    {
    public:
        encryption();

        void encrypt(string word);
        string removeletter(string word,char letter);
        //some other functions,i deleted them atm

    public:
            string alphabet;
            string encryptedalphabet;
            //staff that not in use atm(deleted)

    };

#endif 
```

============================main.cpp==================== ====================================

```
#include <cstdlib>
#include <iostream>
#include "encryption.h"
#include <string>

string word;
encryption encrypted;
cin>>word;
encrypted.encrypt( word);

 /****************************************************************************
orginalcode

**cikarmasifresi.cpp
****************************************************************************/

#include <cstdlib>
#include <iostream>
#include "cikarmasifresi.h"
#include <string>

using namespace std;

cikarmasifresi::cikarmasifresi()
{
alfabe = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";

}

string cikarmasifresi::yazisifrele(string yazi)
{
    for(int j=0;yazi[j] != '\0'; j++)
    {
            for(int i = 0; alfabe[i] != '\0'; i++)
            {
                if(yazi[j]==alfabe[i])
                {
                    yazi[j]=sifrealfabesi[i];
                }

            }
    }

    return yazi;
}
string cikarmasifresi::sifrecoz(string sifreliyazi)
{
    for(int j=0;sifreliyazi[j] != '\0'; j++)
    {
            for(int i = 0; sifrealfabesi[i] != '\0'; i++)
            {
                if(sifreliyazi[j]==sifrealfabesi[i])
                {
                    sifreliyazi[j]=alfabe[i];
                }

            }
    }

    return sifreliyazi;
}
string cikarmasifresi::harfcikar(string kelime,char harf)
{
    //istenmiyen harfi cikar
    string temp;
    int indis=0;
    for(int i = 0; kelime[i] != '\0'; i++)
    {
        if(kelime[i] != harf)
            {
                temp[indis]=kelime[i] ;
                indis++;
            }

    }

    kelime=temp;

    return kelime;
}

void cikarmasifresi::sifrelialfabeolustur(string kelime)
{
    string temp,temp2;
    sifrekelimesi=kelime;

    int pos;
    for(int i = 0; i < kelime.length(); i++)
    {
        if( (pos = temp.find(kelime[i])) < 0)
            temp += kelime[i];
    }
    kelime=temp;

    for(int i = 0; i < kelime.length(); i++)
    {
        alfabe=harfcikar(alfabe,kelime[i]);

    }
    for(int i = 0; i < kelime.length()-1; i++)
    {
        for(int j=0;alfabe[j] !='\0'; j++)
            if(alfabe[j+1] =='\0')  alfabe[j]='\0';

    }

     sifrealfabesi=kelime+alfabe;

        cout<<sifrealfabesi;

    cout<<endl;
    cout<<endl;
        for(int i = 0; kelime[i] != '\0'; i++)
    {
        cout<<kelime[i];
    }

}

/****************************************************************************
** orginalcode

**cikarmasifresi.h
****************************************************************************/

#ifndef cikarmasifresi_h
#define cikarmasifresi_h
#include<string>

using namespace std;

class cikarmasifresi
{
public:
    cikarmasifresi();

    void sifrelialfabeolustur(string kelime);
    string yazisifrele(string yazi);
    string sifrecoz(string sifreliyazi);
    string harfcikar(string kelime,char harf);
public:
        string alfabe;
        string sifrealfabesi;
        string sifrekelimesi;

};

#endif

/****************************************************************************
 orginal code

**main.cpp
****************************************************************************/

#include <cstdlib>
#include <iostream>
#include "cikarmasifresi.h"
#include <string>

using namespace std;

int main()
{

        system("cls");
        string kelime,yazi,sifreli;
        cikarmasifresi sifrele;
        cout<<"********************************************************************************"<<endl;
        cout<<"sifre kelimesi gir :"<<endl;
        cin>>kelime;
        sifrele.sifrelialfabeolustur(kelime);/*
        cout<<"********************************************************************************"<<endl;
        cout<<"Alfabe  :"<<sifrele.alfabe<<endl;
        cout<<"********************************************************************************"<<endl;
        cout<<"Sifreli Alfabe :"<<sifrele.sifrealfabesi<<endl;
        cout<<"********************************************************************************"<<endl;
        cout<<"Cumle gir :"<<endl;
        cin>>yazi;

        cout<<"********************************************************************************"<<endl;
        cout<<"Sifre :"<< sifrele.yazisifrele(yazi)<<endl;
        cout<<"********************************************************************************"<<endl;
        cout<<"sifreli yazi gir :"<<endl;
        cin>>sifreli;
        cout<<"********************************************************************************"<<endl;
        cout<<"Sonuc :"<<sifrele.sifrecoz(sifreli)<<endl;

        */

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:37:53.427

这是错误的

```
string cikarmasifresi::harfcikar(string kelime,char harf)
{
    //istenmiyen harfi cikar
    string temp;
    int indis=0;
    for(int i = 0; kelime[i] != '\0'; i++)
    {
        if(kelime[i] != harf)
            {
                temp[indis]=kelime[i] ;
                indis++;
            }

    }

    kelime=temp;

    return kelime;
} 
```

应该

```
string cikarmasifresi::harfcikar(string kelime,char harf)
{
    //istenmiyen harfi cikar
    string temp;
    int indis=0;
    for(int i = 0; i < kelime.length(); i++)
    {
        if(kelime[i] != harf)
            {
                temp[indis]=kelime[i] ;
                indis++;
            }

    }

    kelime=temp;

    return kelime;
} 
```

kelime 是一个 std::string。它没有像 C 字符串那样的空终止符。

这些功能以完全相同的方式错误

```
string cikarmasifresi::sifrecoz(string sifreliyazi)

string cikarmasifresi::yazisifrele(string yazi) 
```

这是一个不同的错误

```
string cikarmasifresi::harfcikar(string kelime,char harf)
{
    //istenmiyen harfi cikar
    string temp;
    int indis=0;
    for(int i = 0; i < kelime.length(); i++)
    {
        if(kelime[i] != harf)
            {
                temp[indis]=kelime[i] ;
                indis++;
            }

    }
    kelime=temp;
    return kelime;
} 
```

`temp`是一个零长度的字符串，所以`temp[indis]`是一个错误。你可能是`temp += kelime[i]`这个意思

```
string cikarmasifresi::harfcikar(string kelime,char harf)
{
    //istenmiyen harfi cikar
    string temp;
    for(int i = 0; i < kelime.length(); i++)
    {
        if(kelime[i] != harf)
            {
                temp += kelime[i];
                indis++;
            }

    }
    kelime=temp;
    return kelime;
} 
```

这是第三个错误

```
for(int i = 0; i < kelime.length()-1; i++)
{
    for(int j=0;alfabe[j] !='\0'; j++)
        if(alfabe[j+1] =='\0')  alfabe[j]='\0';

} 
```

我真的不知道你想在这里做什么，所以我不能建议修复。也许您应该删除此代码。

# web-services - 限制 Web 服务请求本身在 5 分钟后重新提交

> ID：15949580
> 
> 赞同：0
> 
> 时间：2013-04-11T13:06:19.483
> 
> 标签：web-services, http, rest, timeout, submission

每隔 5 分钟，客户端/浏览器会再次从客户端/浏览器提交对我们的 Java REST 服务之一的 Web 服务请求，以防服务执行时间更长。我们可以限制它在花费足够长的时间后重新提交吗？

问候，

瓦布哈夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:27:00.257

恰好发生在我身上，唯一的区别是我的是简单的 HTTP Post 请求而不是 Web 服务请求。

您正在使用哪个应用程序服务器？在请求超时的情况下，由应用服务器重新提交请求。

你没看错，双触发的时间间隔正好是 5 分钟，这意味着你的 HTTP 服务器配置为 5 分钟后超时，你需要将超时设置为 -1（无限）或一些合理的更长的值，以便请求获胜不要超时并重新提交。

# html - Webkit-transform + Webkit-filter 导致不可见的 div

> ID：15949581
> 
> 赞同：1
> 
> 时间：2013-04-11T13:06:21.333
> 
> 标签：html, css, webkit, transform

我遇到了一个奇怪的问题，使 div 不可见。我的目标是从透视角度为 3D 对象创建阴影。

因为阴影是模糊的，我正在使用`-webkit-filter: blur(8px);`，但是当我尝试添加透视时`-webkit-transform: rotateX(45deg);`，并且度数超过 45，div 就消失了。

我的 Chrome 版本是 27.0.1453.47 Beta

查看[此小提琴](http://jsfiddle.net/PnCvX/)以自己重现问题。（仅限 Chrome。）

我希望你们更多地了解这个问题:)。

# c++ - 巨大的性能差异：调试与发布

> ID：15949582
> 
> 赞同：8
> 
> 时间：2013-04-11T13:06:19.417
> 
> 标签：c++, performance, visual-studio-2012

我有一个简单的算法，它将拜耳图像通道（BGGR、RGGB、GBRG、GRBG）转换为 rgb（去马赛克但没有邻居）。在我的实现中，我预先设置了偏移向量，可以帮助我将拜耳通道索引转换为其相应的 rgb 通道索引。唯一的问题是我在使用 MSVC11 的调试模式下性能很差。在发布时，对于 3264X2540 大小的输入，该函数在 ~60ms 内完成。对于调试中的相同输入，该函数在约 20,000 毫秒内完成。这不仅仅是 X300 的差异，而且由于一些开发人员正在调试我的应用程序，这是不可接受的。

我的代码：

```
void ConvertBayerToRgbImageDemosaic(int* BayerChannel, int* RgbChannel, int Width, int 

Height, ColorSpace ColorSpace)
{
    int rgbOffsets[4]; //translates color location in Bayer block to it's location in RGB block. So R->0, G->1, B->2
    std::vector<int> bayerToRgbOffsets[4]; //the offsets from every color in the Bayer block to (bayer) indices it will be copied to (R,B are copied to all indices, Gr to R and Gb to B).
    //calculate offsets according to color space
    switch (ColorSpace)
    {
    case ColorSpace::BGGR:
            /*
             B G
             G R
            */ 
        rgbOffsets[0] = 2; //B->0
        rgbOffsets[1] = 1; //G->1
        rgbOffsets[2] = 1; //G->1
        rgbOffsets[3] = 0; //R->0
        //B is copied to every pixel in it's block
        bayerToRgbOffsets[0].push_back(0);
        bayerToRgbOffsets[0].push_back(1);
        bayerToRgbOffsets[0].push_back(Width);
        bayerToRgbOffsets[0].push_back(Width + 1);
        //Gb is copied to it's neighbouring B
        bayerToRgbOffsets[1].push_back(-1);
        bayerToRgbOffsets[1].push_back(0);
        //GR is copied to it's neighbouring R
        bayerToRgbOffsets[2].push_back(0);
        bayerToRgbOffsets[2].push_back(1);
        //R is copied to every pixel in it's block
        bayerToRgbOffsets[3].push_back(-Width - 1);
        bayerToRgbOffsets[3].push_back(-Width);
        bayerToRgbOffsets[3].push_back(-1);
        bayerToRgbOffsets[3].push_back(0);
        break;
    ... other color spaces
    }

    for (auto row = 0; row < Height; row++)
    {
        for (auto col = 0, bayerIndex = row * Width; col < Width; col++, bayerIndex++)
        {
            auto colorIndex = (row%2)*2 + (col%2); //0...3, For example in BGGR: 0->B, 1->Gb, 2->Gr, 3->R
            //iteration over bayerToRgbOffsets is O(1) since it is either sized 2 or 4.
            std::for_each(bayerToRgbOffsets[colorIndex].begin(), bayerToRgbOffsets[colorIndex].end(), 
                [&](int colorOffset)
                {
                    auto rgbIndex = (bayerIndex + colorOffset) * 3 + rgbOffsets[offset];
                    RgbChannel[rgbIndex] = BayerChannel[bayerIndex];
                });
        }
    }
} 
```

我尝试过的：我尝试为调试版本启用优化 (/O2)，但没有显着差异。我尝试用普通的旧循环替换内部`for_each`语句，`for`但无济于事。我有一个非常相似的算法，它将拜耳转换为“绿色”rgb（不将数据复制到块中的相邻像素），其中我没有使用，`std::vector`并且在调试和发布之间存在预期的运行时差异（X2-X3 ）。那么，这可能`std::vector`是问题所在吗？如果是这样，我该如何克服它？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-11T13:08:45.897

在您使用`std::vector`时，它将有助于禁用迭代器调试。

[MSDN 展示了如何做到这一点。](http://msdn.microsoft.com/en-us/library/aa985939.aspx)

简单来说，`#define`在包含任何 STL 标头之前进行此操作：

```
#define _HAS_ITERATOR_DEBUGGING 0 
```

根据我的经验，这*极大*地提高了调试构建的性能，尽管您当然会失去一些调试功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:43:23.197

在 VS 中，您可以使用以下设置进行调试，禁用 (/Od)。选择其他选项之一（最小尺寸 (/O1)、最大速度 (/O2)、完全优化 (/Ox) 或自定义）。除了 Roger Rowland 提到的迭代器优化......

# html - 浏览器从字符串中省略空格，但在视图源中可见，我想在浏览器显示中保留该空间

> ID：15949583
> 
> 赞同：0
> 
> 时间：2013-04-11T13:06:25.207
> 
> 标签：html

我遇到了一个关于我的数据库字符串中的空格的问题 浏览器从字符串中省略了空格，但这在视图源中可见，我想在浏览器显示中保留该空间

在我的数据库中，字符串存储如下：“测试字符串测试字符串测试字符串”
（实际字符串前后有空格）

我希望该原始字符串显示在浏览器中，但它省略了字符串和结尾空格

谁能建议我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:10:50.013

您可以将前面和后面的空白替换为`&nbsp;`（不间断空格，否则 HTML 可能会忽略您的空白），或者使用`<pre>...</pre>`包裹在特定部分周围。这意味着将尊重空白，但这并不意味着您会*看到*它...为了轻松发现它，您可以考虑通过使用适当的 CSS 类的包装跨度来更改该不间断空间的背景颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:16:46.573

您需要做的是在从数据库中检索到文本*之后和显示**之前*转换文本。

正如菲利普所说，您可以将`' '`字符替换为`'&nbsp;'`

因此，如果您的数据库包含文本（“.test string test string.”），那么您可以使用 preg_replace 将其转换为`".&nbsp;&nbsp;test&nbsp;string&nbsp;&nbsp;test&nbsp;string&nbsp;&nbsp;."`

例如

```
$curStr = ".  test string  test string  .";
$curStrTransformed = preg_replace(" ", "&nbsp;", $curStr); 
```

// $curStr 现在 =`".&nbsp;&nbsp;test&nbsp;string&nbsp;&nbsp;test&nbsp;string&nbsp;&nbsp;."`

这显示为：“。测试字符串测试字符串。”

# java - CRC计算耗时过长

> ID：15949594
> 
> 赞同：0
> 
> 时间：2013-04-11T13:06:55.117
> 
> 标签：java, android, crc

在我正在开发的 Android 应用程序上，我可以通过其 CRC32、MD5 或 SHA1 识别文件（我有包含这些列表的 xml 文件）。

我读到CRC32的计算速度更快，所以我决定使用这个，但是计算一个4MB文件的CRC32大约需要3分钟，我需要在更短的时间内对更多甚至更大的文件进行计算。这是具有双 1.5GHz CPU 和 1GB RAM 的设备的常规时间吗？如果不是，可能是由于堆限制吗？如果我编译一个原生 C 来通过 shell 计算 CRC 会改进`Process.exec`吗？

**编辑代码：** 我添加了一个 BufferedInputStream，现在大约需要 7 秒。但是 35MB 文件需要 1 分钟。

```
InputStream fi = new BufferedInputStream(new FileInputStream(f));

int gByte = 0;
CRC32 gCRC = new CRC32();
while ((gByte = fi.read()) != -1) {
    gCRC.update(gByte);
}
fi.close(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T14:18:33.753

```
byte[] buf = new byte[1024*64];
while ((gByte = fi.read(buf)) > 0) {
    gCRC.update(buf, 0, gByte);
}
fi.close(); 
```

java nio 甚至可能对大文件有更多帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T16:07:55.007

一个体面的软件 CRC-32 实现应该能够在现代处理器上每秒处理超过 1 GB。我在 2 GHz i7 上获得 1.2 GB/s。

您需要向 CRC 算法提供大块。不要*一次*输入一个字节。

顺便说一句，我使用硬件 crc32 指令在 2 GHz i7 上获得 18 GB/s。

md5 和 sha1 均约为 0.35 GB/s。sha256 约为 0.18 GB/s。

# jquery - 使用 jquery.validate.js 和 jquery.form.js 检查条件

> ID：15949598
> 
> 赞同：0
> 
> 时间：2013-04-11T13:07:00.397
> 
> 标签：jquery, jquery-validate, jqueryform

在我的表格中，有很多字段，包括国家、州。

在国家下拉列表中列出的所有国家，当我选择美国时，它将在状态下拉列表中显示其状态（这里`stateid`是状态下拉列表的 ID）。

如果我选择其他国家，则会显示一个用于输入状态的文本框，并且下拉菜单将不显示（这里`statename`是状态文本框的 id）。

我还使用 jquery.validate.js 和 jquery.form.js 将验证放在此页面中。

```
$(document).ready(function ()
{
    $('#errorbox').hide();

    validator = $("#custom-form-validate").validate({
        errorContainer: "#errorbox",
        errorLabelContainer: "#errorbox ul",
        wrapper: "li",
        rules: {
            firstname: "required",
            lastname: "required",
            email: {
                required: true,
                email: true
            },
            credentialdegree: "required",
            address: "required",
            confirmemail: {
                required: true,
                equalTo: '#email'
            },
            telephone: {
            required: true,
            },
            city: "required",

            postcode: {
                required: true,
                digits: true
            },
            country_id: { valueNotEquals: "" },
            },
            messages: {
                credentialdegree: "Degree Field is Required.",
                email: {
                    required: "Please enter the Email ID.",
                    email: "Please enter a valid Email ID."
                },
                firstname: {
                    required: "Please enter the First Name."
                },
                lastname: {
                    required: "Please enter the Last Name."
                },
                address: {
                    required: "Please enter the Address."
                },
                confirmemail: {
                    required: "Please enter Confirm Email address.",
                    confirmemail: "Please enter a valid Confirm email address."
                },
                telephone: {
                    required: 'Please enter Phone Number.'
                },
                city: { required: "Please enter City" },
                postcode: {
                    required: 'Please enter the Postal Code.',
                    digits: 'Postal Code(Please Enter Numbers Only.)'
                },
                country_id: {
                    valueNotEquals: "Please select the Country. "
                }
            },
            invalidHandler: function (form, validator)
            {
                $("#errorbox").show();
            }
        });
    });

    $.validator.addMethod("valueNotEquals", function (value, element, arg)
    {
        return arg != value;
    }, "Value must not equal arg."); 
```

以上是我的验证码..

我想检查 stateid（如果国家是`US`并且`stateid`显示下拉菜单）是一个必填字段。并且想要检查 statename（如果没有显示国家`US`和`statename`文本框）是必填字段。

我怎样才能做到这一点？

## 编辑：

这是html：

```
<form enctype="multipart/form-data" id="custom-form-validate" method="POST" action="index.php">
        <ul class="form-list">
            <li>
                <label>First Name:<span>*</span></label>
                <input type="text" class="input-text" title="UserFirstname" value="" id="firstname" name="firstname">
            </li>
            <li>
                <label>Last name:<span>*</span></label>
                <input type="text" class="input-text" title="UserLastname" value="" id="lastname" name="lastname">
            </li>
            <li>
                <label>Credential/Degree (If applicable):<span>*</span></label>
                <input type="text" class="required-entry" title="Credential" value="" id="credentialdegree" name="credentialdegree">
            </li>
            <li>
                <label for="name">Company name:</label>
                <input type="text" class="input-text" title="Company" value="" id="company" name="company">
            </li>
             <li>
                <label class="required" for="name">Address:<span>*</span></label>
                <textarea id="address" name="address"></textarea>
            </li>
            <li>
                <label>Phone:<span>*</span></label>
                 <input type="text" class="input-text" title="Telephone" value="" id="telephone" name="telephone">
                <div class="clear"></div>
            </li>
            <li>
                <label>City:<span>*</span></label>
                <input type="text" class="input-text" title="City" value="" id="city" name="city">
           </li>  

<li>
<label>Country:<span>*</span></label>
<select name="country_id" id="country" class="validate-select" title="Country"><option value=""> </option><option value="AF">Afghanistan</option><option value="AL">Albania</option><option value="DZ">Algeria</option><option value="AS">American Samoa</option><option value="AD">Andorra</option><option value="AO">Angola</option><option value="AI">Anguilla</option><option value="AQ">Antarctica</option><option value="AG">Antigua and Barbuda</option><option value="AR">Argentina</option><option value="AM">Armenia</option><option value="AW">Aruba</option><option value="AU">Australia</option><option value="AT">Austria</option><option value="AZ">Azerbaijan</option><option value="BS">Bahamas</option><option value="BH">Bahrain</option><option value="BD">Bangladesh</option><option value="BB">Barbados</option><option value="BY">Belarus</option><option value="BE">Belgium</option><option value="BZ">Belize</option><option value="BJ">Benin</option><option value="BM">Bermuda</option><option value="BT">Bhutan</option><option value="BO">Bolivia</option><option value="BA">Bosnia and Herzegovina</option><option value="BW">Botswana</option><option value="BV">Bouvet Island</option><option value="BR">Brazil</option><option value="IO">British Indian Ocean Territory</option><option value="VG">British Virgin Islands</option><option value="BN">Brunei</option><option value="BG">Bulgaria</option><option value="BF">Burkina Faso</option><option value="BI">Burundi</option><option value="KH">Cambodia</option><option value="CM">Cameroon</option><option value="CA">Canada</option><option value="CV">Cape Verde</option><option value="KY">Cayman Islands</option><option value="CF">Central African Republic</option><option value="TD">Chad</option><option value="CL">Chile</option><option value="CN">China</option><option value="CX">Christmas Island</option><option value="CC">Cocos [Keeling] Islands</option><option value="CO">Colombia</option><option value="KM">Comoros</option><option value="CG">Congo - Brazzaville</option><option value="CD">Congo - Kinshasa</option><option value="CK">Cook Islands</option><option value="CR">Costa Rica</option><option value="HR">Croatia</option><option value="CU">Cuba</option><option value="CY">Cyprus</option><option value="CZ">Czech Republic</option><option value="CI">Côte d’Ivoire</option><option value="DK">Denmark</option><option value="DJ">Djibouti</option><option value="DM">Dominica</option><option value="DO">Dominican Republic</option><option value="EC">Ecuador</option><option value="EG">Egypt</option><option value="SV">El Salvador</option><option value="GQ">Equatorial Guinea</option><option value="ER">Eritrea</option><option value="EE">Estonia</option><option value="ET">Ethiopia</option><option value="FK">Falkland Islands</option><option value="FO">Faroe Islands</option><option value="FJ">Fiji</option><option value="FI">Finland</option><option value="FR">France</option><option value="GF">French Guiana</option><option value="PF">French Polynesia</option><option value="TF">French Southern Territories</option><option value="GA">Gabon</option><option value="GM">Gambia</option><option value="GE">Georgia</option><option value="DE">Germany</option><option value="GH">Ghana</option><option value="GI">Gibraltar</option><option value="GR">Greece</option><option value="GL">Greenland</option><option value="GD">Grenada</option><option value="GP">Guadeloupe</option><option value="GU">Guam</option><option value="GT">Guatemala</option><option value="GG">Guernsey</option><option value="GN">Guinea</option><option value="GW">Guinea-Bissau</option><option value="GY">Guyana</option><option value="HT">Haiti</option><option value="HM">Heard Island and McDonald Islands</option><option value="HN">Honduras</option><option value="HK">Hong Kong SAR China</option><option value="HU">Hungary</option><option value="IS">Iceland</option><option value="IN">India</option><option value="ID">Indonesia</option><option value="IR">Iran</option><option value="IQ">Iraq</option><option value="IE">Ireland</option><option value="IM">Isle of Man</option><option value="IL">Israel</option><option value="IT">Italy</option><option value="JM">Jamaica</option><option value="JP">Japan</option><option value="JE">Jersey</option><option value="JO">Jordan</option><option value="KZ">Kazakhstan</option><option value="KE">Kenya</option><option value="KI">Kiribati</option><option value="KW">Kuwait</option><option value="KG">Kyrgyzstan</option><option value="LA">Laos</option><option value="LV">Latvia</option><option value="LB">Lebanon</option><option value="LS">Lesotho</option><option value="LR">Liberia</option><option value="LY">Libya</option><option value="LI">Liechtenstein</option><option value="LT">Lithuania</option><option value="LU">Luxembourg</option><option value="MO">Macau SAR China</option><option value="MK">Macedonia</option><option value="MG">Madagascar</option><option value="MW">Malawi</option><option value="MY">Malaysia</option><option value="MV">Maldives</option><option value="ML">Mali</option><option value="MT">Malta</option><option value="MH">Marshall Islands</option><option value="MQ">Martinique</option><option value="MR">Mauritania</option><option value="MU">Mauritius</option><option value="YT">Mayotte</option><option value="MX">Mexico</option><option value="FM">Micronesia</option><option value="MD">Moldova</option><option value="MC">Monaco</option><option value="MN">Mongolia</option><option value="ME">Montenegro</option><option value="MS">Montserrat</option><option value="MA">Morocco</option><option value="MZ">Mozambique</option><option value="MM">Myanmar [Burma]</option><option value="NA">Namibia</option><option value="NR">Nauru</option><option value="NP">Nepal</option><option value="NL">Netherlands</option><option value="AN">Netherlands Antilles</option><option value="NC">New Caledonia</option><option value="NZ">New Zealand</option><option value="NI">Nicaragua</option><option value="NE">Niger</option><option value="NG">Nigeria</option><option value="NU">Niue</option><option value="NF">Norfolk Island</option><option value="KP">North Korea</option><option value="MP">Northern Mariana Islands</option><option value="NO">Norway</option><option value="OM">Oman</option><option value="PK">Pakistan</option><option value="PW">Palau</option><option value="PS">Palestinian Territories</option><option value="PA">Panama</option><option value="PG">Papua New Guinea</option><option value="PY">Paraguay</option><option value="PE">Peru</option><option value="PH">Philippines</option><option value="PN">Pitcairn Islands</option><option value="PL">Poland</option><option value="PT">Portugal</option><option value="PR">Puerto Rico</option><option value="QA">Qatar</option><option value="RO">Romania</option><option value="RU">Russia</option><option value="RW">Rwanda</option><option value="RE">Réunion</option><option value="BL">Saint Barthélemy</option><option value="SH">Saint Helena</option><option value="KN">Saint Kitts and Nevis</option><option value="LC">Saint Lucia</option><option value="MF">Saint Martin</option><option value="PM">Saint Pierre and Miquelon</option><option value="VC">Saint Vincent and the Grenadines</option><option value="WS">Samoa</option><option value="SM">San Marino</option><option value="SA">Saudi Arabia</option><option value="SN">Senegal</option><option value="RS">Serbia</option><option value="SC">Seychelles</option><option value="SL">Sierra Leone</option><option value="SG">Singapore</option><option value="SK">Slovakia</option><option value="SI">Slovenia</option><option value="SB">Solomon Islands</option><option value="SO">Somalia</option><option value="ZA">South Africa</option><option value="GS">South Georgia and the South Sandwich Islands</option><option value="KR">South Korea</option><option value="ES">Spain</option><option value="LK">Sri Lanka</option><option value="SD">Sudan</option><option value="SR">Suriname</option><option value="SJ">Svalbard and Jan Mayen</option><option value="SZ">Swaziland</option><option value="SE">Sweden</option><option value="CH">Switzerland</option><option value="SY">Syria</option><option value="ST">São Tomé and Príncipe</option><option value="TW">Taiwan</option><option value="TJ">Tajikistan</option><option value="TZ">Tanzania</option><option value="TH">Thailand</option><option value="TL">Timor-Leste</option><option value="TG">Togo</option><option value="TK">Tokelau</option><option value="TO">Tonga</option><option value="TT">Trinidad and Tobago</option><option value="TN">Tunisia</option><option value="TR">Turkey</option><option value="TM">Turkmenistan</option><option value="TC">Turks and Caicos Islands</option><option value="TV">Tuvalu</option><option value="UM">U.S. Minor Outlying Islands</option><option value="VI">U.S. Virgin Islands</option><option value="UG">Uganda</option><option value="UA">Ukraine</option><option value="AE">United Arab Emirates</option><option value="GB">United Kingdom</option><option value="US" selected="selected">United States</option><option value="UY">Uruguay</option><option value="UZ">Uzbekistan</option><option value="VU">Vanuatu</option><option value="VA">Vatican City</option><option value="VE">Venezuela</option><option value="VN">Vietnam</option><option value="WF">Wallis and Futuna</option><option value="EH">Western Sahara</option><option value="YE">Yemen</option><option value="ZM">Zambia</option><option value="ZW">Zimbabwe</option><option value="AX">Åland Islands</option></select>
</li>

<li> 
<label>State:<span>*</span></label>
<select class="required-entry validate-select" defaultvalue="US" id="region_id" name="region_id" title="State/Province" style="">
<option value="">Please select region, state or province</option>
<option title="Alabama" value="1">Alabama</option><option title="Alaska" value="2">Alaska</option><option title="American Samoa" value="3">American Samoa</option></select>
 <input type="text" style="display:none;" class="input-text" title="State" value="" name="region" id="region">
<div class="divAjaxLoaderRed"></div>
<div class="clear"></div></li>

             <li>
                 <label>Postal Code:<span>*</span></label>
                 <input type="text" class="input-text" title="Zip/Postal Code" value="" id="postcode" name="postcode">
                 <div class="clear"></div>
             </li>    
              <li>
                 <label>Email:<span>*</span></label>
                 <input type="text" class="input-text" title="Email" value="" id="email" name="email">
            </li>
            <li>
                 <label class="required" for="email">Confirm Email:<span>*</span></label>
                 <input type="text" class="input-text" title="Confirmemail" value="" id="confirmemail" name="confirmemail">
            </li>            
            </ul>
             <div class="clear"></div>
            <br clear="all">
            <ul style="margin-top:5px">
            <li>
            <label>Please enter any additional information or questions here:</label>
            <div>
              <textarea title="Additional Information" value="" id="additionalinfo" name="additionalinfo"></textarea>
            </div>
            </li>
            <li>
                <p class="margin-top-3 margin-bottom-2 defult">
                To help us prevent automated scripts from sending this form, please type the 2 words below.
To generate new words, simply click the blue 'recycle' button on the right.
                </p>
            </li>
            </ul>

            <div class="submit_div">
            <input type="hidden" name="password" value="123456" title="Password" class="input-text " id="password" readonly="readonly">
            <input type="hidden" name="confirmation" value="123456" title="Confirmation" class="input-text " id="confirmation" readonly="readonly">
            <input type="hidden" name="usertype" value="0" title="usertype" class="input-text " id="usertype" readonly="readonly">
            <input type="hidden" name="group_id" value="5" title="group_id" class="input-text " id="group_id" readonly="readonly">
            <input type="submit" id="send" value="Submit" class="submit margin-top-2">
            </div>
        </form>

 <script type="text/javascript">
 $(document).ready(function() {
     $("#country option[value='US']").attr("selected", "selected");

     $("#country").change(function (){
            if($(this).val() != "US"){
                    $("#region_id").hide();
                    $("#region").show();
                    $("#region_id").val("");
            } else {
                    $("#region").hide();
                    $("#region_id").show();
                    $("#region").val("");
            }
     });
 });

 </script> 
```

# php - 使用静态返回父变量

> ID：15949599
> 
> 赞同：1
> 
> 时间：2013-04-11T13:07:10.243
> 
> 标签：php

我的数据库连接在一个名为 Model 的父类中。

我正在设计一个实用程序类，我永远不会有一个实例，所以我使用 static 关键字。我只想访问我的应用程序周围的功能。

```
class Model {

    function __construct() {
        $this->db = new Database(DB_TYPE, DB_HOST, DB_NAME, DB_USER, DB_PASS);
    }

} 
```

这是我的家长班。

```
class Fav extends Model{

    public static function getFavourite($data){
        return $this->db->select('SELECT favouriteid FROM favourite WHERE type = :type AND linkid = :linkid 
                              AND userid = :userid', array('type' => $data['type'], 'linkid' => $data['linkid'],
                              'userid' => Session::get('userid')));
    }
} 
```

我在使用 $this 关键字时遇到问题，因为我没有该类的实例？

我知道 parent 和 self 关键字。

有人可以解决这个问题并告诉我如何在这里关联正确的关键字！

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:15:56.203

你在这里犯了一些设计缺陷。

1.  您提供有关数据库的模型知识。使某些东西管理您的模型，然后将其“推送/刷新”到您的数据库中。
2.  Fav::getFavourite() 在您的代码中可能看起来不错，但它没有意义。您不应该要求您的模型自行检索。

我建议您查看现有的 ORM，例如 Doctrine 或 Propel，看看它们如何解决您遇到的设计问题。

编辑：我将用于 Symfony2 的解决方案：

```
// I will have this registered under mybundle.favourites as service
class FavouritesService
{
  private $em;

  public function __construct(EntityManager $em)
  {
    $this->em = $em;
  }

  public function getFavourite($what, SomeUserObject $for)
  {
    // do some stuff with the manager here and retrieve my favourite.. based on $data
  }
}

// some random action in my controller
public function someAction()
{
  $favorite_car = $this->get('mybundle.favorites')->getFavourite('car', $this->get('session.user'));
  // some code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:13:16.070

除了这看起来不像真正的可靠代码之外，您可以使用以下内容扩展您的基类：

```
protected static function getDatabase()
{
    return new Database(DB_TYPE, DB_HOST, DB_NAME, DB_USER, DB_PASS);
} 
```

您现在可以通过调用来使用您的数据库类`self::getDatabase()->select("x");`

顺便说一句：确保你想用静态函数来做这件事。我不会这样做。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-11T13:17:20.087

在 OOPS 概念中，静态方法只能访问静态变量和方法，但 PHP 并不遵循所有 OOPS 概念。基本上，您应该遵循 Singleton 设计模式来获取数据库连接，以确保一次只初始化一个对象

```
class Model {
    public static $db;
    public static function getInstance () {
        if (!isset (self::$db))
             self::$db = new Database(DB_TYPE, DB_HOST, DB_NAME, DB_USER, DB_PASS);

        return self::$db;
    }
} 
```

你应该如下使用它

```
class Fav
{
     public static function getFavourite($data)
     {
        return Model::getInstance()->select('SELECT favouriteid FROM favourite WHERE type = :type AND linkid = :linkid 
                              AND userid = :userid', array('type' => $data['type'], 'linkid' => $data['linkid'],
                              'userid' => Session::get('userid')));
    }
} 
```

无需扩展模型类。

# python - 如何从递归结束时消除“无”

> ID：15949601
> 
> 赞同：1
> 
> 时间：2013-04-11T13:07:12.820
> 
> 标签：python, recursion, towers-of-hanoi

我有以下代码：

```
n=input('How many disks?')

def MoveTower(n, source='A', dest='C', store='B'):
    if n==1:
        print source + '->' + dest
    else:

        MoveTower(n-1, source, store, dest)
        MoveTower(1, source, dest, store)
        MoveTower(n-1, store, dest, source)

print MoveTower(n)
print str(2**n-1), 'moves total' 
```

以下代码返回解决具有 n 个磁盘的河内塔所需的移动，并计算成功需要多少磁盘，但在所有移动之后，有一个“无”我想摆脱这个 - 你能帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T13:08:29.150

删除`print`语句，只需调用`MoveTower(n)`而不打印它的返回值：

```
MoveTower(n)
print str(2**n-1), 'moves total' 
```

*所有*python 函数都返回*一些*值。如果您没有明确返回任何内容，则默认值为`None`. 调用`print MoveTower(n)`打印`None`返回的默认值`MoveTower()`。

# model-view-controller - 要传递的 ExtJS 菜单参数

> ID：15949602
> 
> 赞同：1
> 
> 时间：2013-04-11T13:07:23.267
> 
> 标签：model-view-controller, extjs, menu

我正在创建一个带有动态菜单的 ExtJS MVC 应用程序。我有几个菜单元素将调用同一个屏幕（在布局中设置活动卡），但每次都需要传递不同的值作为参数。因此，一张卡片可以根据将用作过滤器的参数显示不同的数据。

我的菜单元素有一个点击监听器：

```
listeners: {
    itemclick: function(view, record, item, index, e){
    Ext.getCmp('contentpanel').layout.setActiveItem(record.getId());
    }
} 
```

记录 ID 将是我设置为活动的卡。如何将参数传递给卡？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:53:08.643

如果需要，您可以向面板添加另一个属性。例如：

```
Ext.define('YourApp.view.YourCardPanel' ,{
  extend: 'Ext.panel.Panel',
  id: 'contentpanel',
  alias : 'widget.yourcardpanel',
  layout: 'card',
  newParam: null, // Just to know that this attribute exists but there is no need to declare it.
  items: [],
  changeLayout: function(){
     if (this.newParam == 'new value')  {
         // Do your stuff
     }
  }
}); 
```

然后您可以更改该参数的值。

```
listeners: {
  itemclick: function(view, record, item, index, e){
    var cardPanel = Ext.getCmp('contentpanel');
    cardPanel.newParam = 'new value';
    cardPanel.changeLayout();      
    cardPanel.layout.setActiveItem(record.getId());
  }
} 
```

# google-chrome-extension - 如何收听通知？

> ID：15949606
> 
> 赞同：4
> 
> 时间：2013-04-11T13:07:34.217
> 
> 标签：google-chrome-extension

扩展程序有没有办法向浏览器通知添加侦听器并访问它的内容？我正在尝试使用 Google 日历的通知来触发自定义功能。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-11T16:10:01.293

您可以挂钩该`webkitNotifications.createNotification`函数，以便在创建通知时运行某些特定代码。

1.  创建一个名为**notifhook.js**的文件：

    ```
     (function() {
         // save the original function
         var origCreateNotif = webkitNotifications.createNotification;

         // overwrite createNotification with a new function
         webkitNotifications.createNotification = function(img, title, body) {

             // call the original notification function
             var result = origCreateNotif.apply(this, arguments);

             // bind a listener for when the notification is displayed
             result.addEventListener("display", function() {
                 // do something when the notification is displayed
                 // use img, title, and body to read the notification
                 // YOUR TRIGGERED CODE HERE!
             });

             return result;
         }
     })(); 
    ```

2.  接下来，`notifhook.js`将清单包含在[**`web_accessible_resources`**清单](https://developer.chrome.com/docs/extensions/mv3/manifest/web_accessible_resources/)中。

3.  最后，在**内容脚本**中，将一个`<script>`元素注入到页面`notifhook.js`中`src`：

    ```
     var s = document.createElement("script");
     s.src = chrome.extension.getURL("notifhook.js");
     document.documentElement.appendChild(s); 
    ```

您可能很想仅将`notifhook.js`其用作内容脚本，但这行不通，因为内容脚本和网页具有[不同的执行环境](http://developer.chrome.com/extensions/content_scripts.html#execution-environment)。覆盖内容脚本的版本`webkitNotifications.createNotification`根本不会影响 Google 日历页面。因此，您需要通过`<script>`标签注入它，这将影响页面和内容脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-09T08:55:47.983

上面的代码已经很老了，不能再工作了。然而，作者采用的拦截方法仍然是相同且非常有用的技巧，可以应用于多个页面。

我有关于如何访问的更新：[如何捕获或收听浏览器通知？](https://stackoverflow.com/questions/43781555/how-to-capture-or-listen-to-browser-notifications/44453354#44453354)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T14:50:01.567

如果您想要的是发送通知的 Chrome 扩展程序，则不会捕获 Google 日历。如果我没记错的话，Google 的日历会发送邮件和短信通知。另外，我认为没有 API 函数可以要求您查看是否有待处理的通知。文档中唯一得到的是 Google+ 事件通知被发送到 Google+，并且可能对 API 的访问可以捕获。

# c# - Custom OrderBy Due to Hundreds of Columns

> ID：15949619
> 
> 赞同：1
> 
> 时间：2013-04-11T13:07:51.000
> 
> 标签：c#, .net, ado.net

I have a table which has hundreds of columns (like `FirstName` and `LastName`).

All this data is displayed as a `GridView` with listing. I've made use of the `SortCommand` event which has the `e.SortExpression`, but I can't fathom how to use it in an `OrderBy` function since after inputting a lambda expression. IntelliSense shows me all the hundreds of columns instead of the one I need - which I only have at run-time.

How do I use the `Func<TSource, TKey>` selector the `OrderBy` functions expects from me to let it know that the string `e.SortExpression` is the column that needs to be sorted?

Example of what I essentially mean:

```
private void dataGrid_SortCommand(object source, DataGridSortCommandEventArgs e)
{
    var users = new UsersEntities().UsersTable.OrderBy(x => "x."+e.SortExpression);
    FillDataGrid(users); 
} 
```

Update: I've come to understand that the way in which I'm looking to accomplish this is using Expression trees, and I'm hoping someone can provide the exact solution.

Update 2: I've found the solution [here](https://stackoverflow.com/questions/307512/how-do-i-apply-orderby-on-an-iqueryable-using-a-string-column-name-within-a-gene). Turns out my question was a duplicate and to add to that, badly worded. Thanks to everyone.

And I've also just noticed that ken's offered pretty damning evidence that I should use dynamic linq. I'll consider doing so in the future, but I couldn't help but notice how fun it is to experiment with Expression trees rather than rely on libraries to do them for me. At this stage, as I'm still new to Expression trees this is a perfect opportunity to utilize them.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:12:36.223

You can use [dynamic linq](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx) That would allow you to do an `OrderBy` based on a `string`.

**Edit**

See my comment. Using dynamic linq, your solution could be as easy as:

```
var users = new UsersEntities().UsersTable.OrderBy(e.SortExpression); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:15:56.840

You can dynamically create LINQ expressions easily as long as only logical ANDs are involved in where clauses. Simply repeat the `Where` clause!

```
// Filter
var query = new UsersEntities().UsersTable.Select(x => x);
if (!String.IsNullOrEmpty(nameFilter) {
    query = query.Where(x => x.Name == nameFilter);
}
if (!String.IsNullOrEmpty(zipFilter) {
    query = query.Where(x => x.Zip == zipFilter);
}

// Sorting
switch (sortField)
{
    case "Name":
        query = query.OrderBy(x => x.Name);
        break;
    case "Zip":
        query = query.OrderBy(x => x.Zip);
        break;
} 
```

* * *

You could also create an expression tree dynamically, but this is not very obvious.

# html - div变大而不是页面上的滚动条

> ID：15949622
> 
> 赞同：0
> 
> 时间：2013-04-11T13:07:52.007
> 
> 标签：html, scrollbar

我创建了一个内容宽度为 800 像素的网站。

但是，当我的用户上传一张宽度为 900 像素的图片时，网站完全出现故障。当图像对于网站来说太大时，有没有办法添加滑块或滚动条而不是 div 变大？如果没有，我想我必须调整上传图片的大小..

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:17:56.960

放在`style="overflow:auto;"`你的 div 上然后当图像大于你的空间时它会产生一个滚动条

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T13:22:14.797

我假设因为您在谈论宽度，所以您希望内容宽度保持在 800 像素，然后在内容（在本例中为图像）> 800 像素时默认滚动。

也许您可以利用**溢出-x：滚动；**CSS 中的属性只能水平滚动。**溢出：自动；**不需要时也可以添加垂直滚动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T13:16:23.000

您可能需要提供一些您正在使用的代码，以便我们找出问题所在，但您可以使用的是：

```
overflow: hidden; 
```

这将阻止任何比您的 800px 内容容器更宽的东西。

# c# - IE8在某些页面上下载文件不起作用

> ID：15949627
> 
> 赞同：0
> 
> 时间：2013-04-11T13:08:20.077
> 
> 标签：c#, asp.net, internet-explorer-8, download, f5

我正在开发一个应用程序，允许用户下载具有常规内容（不大于几 Mb）的 excel 文件。

在 IE9 上，文件可以完美下载，但在 IE8 上，某些允许下载的页面无法正常工作。

一个新页面会立即打开和关闭，而不显示下载栏。

缓存控制标头设置为私有。

我已经禁用了我所有的 IE8 添加的。

我已经将服务器的响应与允许保存文件的页面和不工作的页面进行了匹配，并且它们完全匹配（除了路径）

我不知道为什么在某些情况下文件可以完美下载，而在其他情况下却没有。

这是我用来下载文件的服务器端代码：

```
protected void GetExportedFile()
{
    string filename = Form("filename");

    if (string.IsNullOrEmpty(filename))
    {
        Logger.Instance.Write("GetExportedFile is missing the parameter filename");
        Response.Redirect("ErrorPage.aspx");
    }

    string filePath = Context.Server.MapPath("****/****/" + filename);

    Response.ClearHeaders();
    Response.ClearContent();
    SetContentType(ContentType.Excel);
    Response.AddHeader("Content-Disposition", string.Format("attachment; filename={0}", filename));
    Response.WriteFile(filePath);

    Response.Flush();

    try
    {
        File.Delete(filePath);
    }
    catch (Exception ex)
    {
        Logger.Instance.Write(
            "GetExportedFile failed to delete the file '" + filePath + 
            "', Error: " + ex.ToString(), "Error");
    }

    try
    {
        Response.End();
    }
    catch (ThreadAbortException ex)
    {
        //Don't add anything here.
        //because if you write here in Response.Write,
        //that text also will be added to your text file.
    }
} 
```

我不得不提一下，虽然我认为在 IE8 上不起作用的下载之前，我正在做一些 ajax 调用以获取通知，如果 excel 生成已经完成，而在有效的页面上我不这样做程序。

我还想补充一点，我的应用程序位于应用程序防火墙 (F5) 之后，当停用时，所有下载都可以在 IE8 上运行，问题是我没有看到响应中有任何变化。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T09:59:45.157

如果有人看到这篇文章，我已经找到了问题的原因。IE8 有一个安全策略，不允许直接从脚本请求调用文件下载。

由于我已经对服务器调用了一系列 ajax 调用来查询文件创建状态，并且当文件准备好时发出了下载调用，IE 已经取消了它。

要覆盖 IE8 策略，当文件创建完成后，我会在客户端弹出一个带有文件链接的窗口，当单击该链接时，文件已成功下载。

我希望有一天它对某人有所帮助...

# c# - 使用 Asp 中的 C# 数组在 javascript 中创建一个数组

> ID：15949628
> 
> 赞同：2
> 
> 时间：2013-04-11T13:08:21.197
> 
> 标签：c#, javascript, arrays, webforms

我正在尝试使用 JavaScript 访问在 aspx 文件后面的 C# 代码中初始化的数组。我的数组如下所示：

```
arr[0]="IE 7.0,IE 8.0";
arr[1]="chrome 23.0"; 
```

我想在javascript中访问这个数组，然后使用以下方法将每个数组转换`arr[0]`为一个新数组：

```
var Browsers=new Array();
Browsers=arr[0].split(','); 
```

任何人都可以帮助我这样做吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:19:48.047

像下面这样尝试它会帮助你...

**代码隐藏：** 在代码隐藏中声明一个公共变量，如下所示...

```
public partial class Default : System.Web.UI.Page
{
    public string[]  arr ={"IE 7.0,IE 8.0","chrome 23.0"}; 
```

**Javascript：**

```
 <script>
    var IEarray = '<%=arr[0] %>'.split(',');
    for (i = 0; i < IEarray.length; i++)
        alert(IEarray[i]);

    var Chromearray = '<%=arr[1] %>'.split(',');
    for (i = 0; i < Chromearray.length; i++)
        alert(Chromearray[i]);           
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:21:28.090

使用[JavaScriptSerializer](http://msdn.microsoft.com/ru-ru/library/system.web.script.serialization.javascriptserializer.aspx)从数组中获取 json 字符串；

```
string serial = new JavaScriptSerializer().Serialize(arr); 
```

然后使用任何首选技术将此字符串呈现给客户端；例如将它插入到 aspx 中：

```
<script type="text/javascript">
   var myclientarr = JSON.parse('<%= serial %>');
</script> 
```

其他选项是使用脚本管理器或创建将返回您的数据的 ashx，然后在页面中引用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T13:31:54.463

您可以将 C# 数组转换为 JavaScript 格式并在页面上分配值。

```
// C#
var arr = new string[]{ "IE 7.0,IE 8.0", "chrome 23.0" };
var serializer = new JavaScriptSerializer();
var jsArray =
    arr.Select(s => s.Split(','))
       .Select(serializer.Serialize);

<!-- JS -->
<script>
    var browsers = <%= jsArray[0] %>;

</script> 
```

# node.js - node.js 中客户端文件顶部的对象定义

> ID：15949632
> 
> 赞同：0
> 
> 时间：2013-04-11T13:08:29.487
> 
> 标签：node.js

我正在挑选这个 node.js 游戏框架[http://pomelo.netease.com/index.html](http://pomelo.netease.com/index.html)的演示代码。

此文件夹中的所有客户端 js 文件，

[https://github.com/NetEase/lordofpomelo/tree/master/web-server/public/js](https://github.com/NetEase/lordofpomelo/tree/master/web-server/public/js) ,

从与此类似的行开始

"__resources__["/app.js"] = {meta: {mimetype: "application/javascript"}, data: function(exports, require, module,__filename, __dirname) { ... " 。

他们中的许多人（甚至可能全部）都有“出口”。或“data”方法末尾的“module.exports”。我发现“__resources__”在数组中的 .jshintrc 文件中定义为“predef”属性。它与jshint有关吗？似乎无法搜索到任何关于此的具体内容。只是为我指明正确的方向将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T04:40:03.143

对于将来在这里徘徊的任何人。我收到了 Pomelo 开发人员的回复，他们说“这是我们的内部框架，名为 colorbox ......它是一个源自 cocos2d-javascript 的 node.js 风格的浏览器端模块系统”

# asp.net - 在另一个视图中使用控制器的返回文件（）的结果作为图像标签的 src

> ID：15949635
> 
> 赞同：0
> 
> 时间：2013-04-11T13:08:33.003
> 
> 标签：asp.net, asp.net-mvc-4

我有一个返回二进制文件的控制器 DisplayImage，我可以在它的视图中毫无问题地看到结果，但是我想在图像视图中使用这个控制器的结果作为部分视图，但是当我调用 html 时这是不可能的。 partial(_partialview) 传递给 partial 的模型，是索引模型

让我展示我的代码：

```
 public ActionResult DisplayImage(int id = 1)
    {
        Product product = db.Product.Find(id);
        return File(product.Blob, "image/png");

    } 
```

和

```
 public ActionResult Index()
    {
        return View(db.Product.ToList());
    } 
```

在索引视图中我写道：

```
 @Html.Partial("_DisplayImage") 
```

在部分观点中，我写道：

```
 <img style="width:60px" src="@Url.Action("DislpayImage", "Product", new { id="1" })"     alt="myimage" /> 
```

另外，如果我直接在索引视图中使用 img 标签仍然不起作用，结果是：

```
 <img alt="myimage" src="/Product/DislpayImage/1" style="width:60px"> 
```

没有任何图像，所以我该怎么解决这个问题

我希望把我的问题描述清楚如果没有，请询​​问！提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:33:58.533

您的操作名称中有错字。

> DislpayImage

不一样

> 显示图像

```
<img style="width:60px" src="@Url.Action("DisplayImage", "Product", new { id="1" })"     alt="myimage" /> 
```

# jboss7.x - 使用 MANIFEST.MF 部署战争 - 依赖项被忽略

> ID：15949648
> 
> 赞同：3
> 
> 时间：2013-04-11T13:09:13.867
> 
> 标签：jboss7.x, java-ee-6, jboss-arquillian

我正在使用 Arquillian 将战争部署到 JBoss 7.x 中进行测试，它依赖于 Apache Commons Collections。但是，它似乎并没有拾取模块依赖性。

清单文件

```
Dependencies: org.apache.commons.collectionss export 
```

Arquillian 部署

```
@Deployment
public static Archive<?> createDeployment() {
    WebArchive archive = ShrinkWrap.create(WebArchive.class);

    archive
        .addPackages(true, "com.example.package")
        .addAsResource("META-INF/MANIFEST.MF", "META-INF/MANIFEST.MF")

      // * Tried the following two options with no luck
      //.AddAsManifestResource("META-INF/MANIFEST.MF", "MANIFEST.MF")
      //.AddAsWebInfResource("META-INF/MANIFEST.MF", "META-INF/MANIFEST.MF")

      // * If I enable the following, it works fine. getLibrary just picks
      // * up the lib through maven.
      //.addAsLibraries(
      //         getLibrary("commons-collections:commons-collections:3.2.1"))
       ;

    return archive;
} 
```

我不想用，`jboss-deployment-structure.xml`因为感觉就像用大锤敲碎坚果。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-29T08:35:55.027

就我而言，我为 Arquillian`MANIFEST.MF`添加了一个 inside`src/test/resources`和`.addAsManifestResource("MANIFEST.MF")`

**清单文件**

```
Manifest-Version: 1.0
Built-By: me
Build-Jdk: 1.6.0_45 
Created-By: Maven Integration for Eclipse
Dependencies: org.infinispan export 
```

**阿奎里安**

```
@Deployment(testable = false)
public static WebArchive createDeployment() {
    MavenDependencyResolver mvnResolver = DependencyResolvers.use(MavenDependencyResolver.class).loadMetadataFromPom("pom.xml").goOffline();

    return ShrinkWrap
            .create(WebArchive.class, "example.war")
            .addPackages(true, Filters.exclude(".*Test.*"), "com/comapany/")
            .addAsManifestResource("MANIFEST.MF")
            .addAsWebInfResource(EmptyAsset.INSTANCE, "beans.xml");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-17T12:13:41.010

事实证明，我[再次](https://stackoverflow.com/questions/20404148/dependencies-in-manfest-mf-ignored-on-jboss-7 "MANIFEST.MF 中的依赖项在 JBoss 7 上被忽略")问了同样的问题（这次是关于 Jar Files），因为我完全忘记了这个问题。

此后也发现了解决方案：（与另一个问题相同）

整个事情变得简单了很多。

即使使用 .addAsManifestResource 或 .setManifest，MANIFEST.MF 也是由 Maven 自动生成的。

这已通过 pom.xml 中的以下部分解决，而不是使用自定义 MANIFEST.MF 和使用 .setManifest("META-INF/MANIFEST.MF"); MANIFEST.MF 是自动生成的，并且资源文件夹中没有自定义副本（为了避免混淆，因为无论如何它都被忽略了）

```
<build>
    <plugins>
     <plugin>
       <groupId>org.apache.maven.plugins</groupId>
       <artifactId>maven-war-plugin</artifactId>
       <configuration>
          <archive>
             <manifestEntries>
                <Dependencies>
                org.infinispan, 
                org.infinispan.infinispan-tree export,
                </Dependencies>
             </manifestEntries>
          </archive>
       </configuration>
     </plugin>
    </plugins>
</build> 
```

# jquery - jQuery - 让 .one 在类的任何一个元素上运行，而不是在每个元素上运行一次？

> ID：15949649
> 
> 赞同：2
> 
> 时间：2013-04-11T13:09:15.837
> 
> 标签：jquery, class

我试图让弹出窗口出现一次，当用户将鼠标悬停在图像库中的任何一个（`class="notice"`）上时触发。我试过`.one()`了，这很有帮助，但现在画廊中的每张图片都会出现一次消息。我希望它对所有图像只出现一次，无论用户碰巧首先将鼠标悬停在哪个图像上。

我尝试过的事情：

*   `*.first`和`.get(index)`，但是这些方法要求您只指定一个图像，我希望任何图像都可以工作
*   `.removeClass('.notice')`on `mouseleave`，但是 jQuery 正在查看旧的 DOM，所以这不起作用。

这是我的代码：

```
$(document).ready(function(){
    $('.notice').one('mouseenter', function() {
        $('.popup').fadeIn(1000); 
        $(this).addClass('faded');
    })
    .one('mouseleave', function() {
        $('.popup').fadeOut(1000); 
        $(this).removeClass('faded'); 
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:11:33.297

你可以自己解绑：

```
var $notice = $('.notice');

$notice.on('mouseenter', function() {
    $('.popup').fadeIn(1000); 
    $(this).addClass('faded');

    $notice.off('mouseenter');
}) 
```

# android - ADK 自动连接，无需确认

> ID：15949652
> 
> 赞同：0
> 
> 时间：2013-04-11T13:09:17.420
> 
> 标签：android, arduino, adk

我正在开发通过 USB 将 android 设备连接到 mega adk 2560 板的 android 应用程序。当我将我的 android 设备连接到 adk 板并打开我的应用程序时，它要求我在对话框中选择 adk 模式。我不想要那个对话框，而是希望它自动连接到电路板。![在此处输入图像描述](https://i.stack.imgur.com/zgLIs.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:27:12.350

我不确定您能否使用普通设备忽略此对话框

> 它的 android 设备策略在某些外部 USB 连接时通知用户。

它可能需要嵌入新的设备，该设备的编程喜欢不显示那种通知并且它通常是不寻常的

# ruby - Scale rails 3 oauth 2protected API

> ID：15949661
> 
> 赞同：1
> 
> 时间：2013-04-11T13:09:36.490
> 
> 标签：ruby, ruby-on-rails-3, rack

I need to protect my rails app`s rest API with OAuth 2 protocol. I have tried the Doorkeeper gem but it uses the same server for authentication, I don't think it's good for scaling. How can I config my rails app to use an external OAuth server?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:16:58.043

There are many ways you can go about this. You can create a new server to handle only Authentication and User Management.

This can even be achieved with the Doorkeeper gem because all you'd need to do is expose the API calls that Doorkeeper provides for you to authenticate and return the token for other authorizations. You would then need from your app server make sure you check with your OAuth server that the token the clients are passing in are valid.

Take a look at this explanation: [https://doorkeeper-provider.herokuapp.com/](https://doorkeeper-provider.herokuapp.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:38:48.927

Yeah, I find an answer. Leo thnx for your comments!

[http://blog.joshsoftware.com/2010/12/16/multiple-applications-with-devise-omniauth-and-single-sign-on/](http://blog.joshsoftware.com/2010/12/16/multiple-applications-with-devise-omniauth-and-single-sign-on/)

Resource Server: [https://github.com/joshsoftware/sso-devise-omniauth-client](https://github.com/joshsoftware/sso-devise-omniauth-client)

Auth Server: [https://github.com/joshsoftware/sso-devise-omniauth-provider](https://github.com/joshsoftware/sso-devise-omniauth-provider)

Doorkeeper can be used on AuthServer.

# jquery - jQuery 切换不同的按钮/链接

> ID：15949664
> 
> 赞同：1
> 
> 时间：2013-04-11T13:09:37.577
> 
> 标签：jquery, toggle

我正在使用这个简单的 jQuery 切换： [http](http://bit.ly/YoRRXc) ://bit.ly/YoRRXc （小提琴）

但我希望点击“Toggle2”时它的作用与点击“Toggle”相同。

例如：

*   单击“切换”-> 侧边栏滑开
*   单击“切换 2”-> 侧边栏进入

那可能吗？如何？

问候， 马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:34:38.600

```
 $('.toggle').click(function () {
    if($('#A').width()==0)
    {
        $('#A').animate({
            width: 200
        });
        $('#B').animate({
            left: 200
        });
    }
    else
    {
        $('#A').animate({
            width: 0
        });
        $('#B').animate({
            left: 0
        });

    }

}); 
```

[工作JS FIDDLE LINK](http://jsfiddle.net/rahularyansharma/6FMZY/669/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:39:44.503

**HTML：**

```
<div id='A'></div>
<div id='B'> 
    <a href='javascript:' class='toggle'>Toggle</a><br> 
    <a href='javascript:' class='toggle'>Toggle2</a>
</div> 
```

**jQuery：**

```
$('.toggle').click(function () {
    var leftVal = $('#B').offset().left;
    var setLeft = leftVal == '0' ? "200px" : "0";
    $('#A').animate({width:'toggle'});
    $('#B').animate({left: setLeft});
}); 
```

`**[Working Demo](http://jsfiddle.net/6FMZY/670/)**`

# spring - Spring自定义AuthenticationFailureHandler

> ID：15949665
> 
> 赞同：4
> 
> 时间：2013-04-11T13:09:38.600
> 
> 标签：spring, spring-mvc, spring-security

我已经尝试了一整天，让我的自定义身份验证失败处理程序与 Spring 3.1.3 一起使用。

我认为它配置正确

```
<http use-expressions="true" disable-url-rewriting="true">
    <intercept-url pattern="/rest/login" access="permitAll" />
    <intercept-url pattern="/rest/**" access="isAuthenticated()" />
    <intercept-url pattern="/index.html" access="permitAll" />
    <intercept-url pattern="/js/**" access="permitAll" />
    <intercept-url pattern="/**" access="denyAll" />
    <form-login username-parameter="user" password-parameter="pass" login-page="/rest/login"
        authentication-failure-handler-ref="authenticationFailureHandler"  />
</http>
<beans:bean id="authenticationFailureHandler" class="LoginFailureHandler" /> 
```

我的实现是这样的

```
public class LoginFailureHandler implements AuthenticationFailureHandler {
    private static final Logger log = LoggerFactory.getLogger(LoginFailureHandler.class);

    public LoginFailureHandler() {
        log.debug("I am");
    }

    @Autowired
    private ObjectMapper customObjectMapper;

    @Override
    public void onAuthenticationFailure(HttpServletRequest request, HttpServletResponse response,
            AuthenticationException exception) throws IOException, ServletException {
        log.debug("invalid login");
        User user = new User();
        user.setUsername("invalid");
        try (OutputStream out = response.getOutputStream()) {
            customObjectMapper.writeValue(out, user);
        }
    }

} 
```

在控制台中我看到

```
2013-04-11 14:52:29,478 DEBUG LoginFailureHandler - I am 
```

所以它被加载了。

使用错误的用户名或密码，当抛出 BadCredentialsException 时，我看不到无效登录。

永远不会调用方法 onAuthenticationFailure。

相反，该服务一次又一次地将浏览器重定向到 /rest/login ...

**编辑**

```
2013-04-11 15:47:26,411 DEBUG de.pentos.spring.LoginController - Incomming login chuck.norris, norris
2013-04-11 15:47:26,412 DEBUG o.s.s.a.ProviderManager - Authentication attempt using org.springframework.security.authentication.dao.DaoAuthenticationProvider
2013-04-11 15:47:26,415 DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authentication failed: password does not match stored value
2013-04-11 15:47:26,416 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolving exception from handler [public de.pentos.spring.User de.pentos.spring.LoginController.login(de.pentos.spring.User)]: org.springframework.security.authentication.BadCredentialsException: Bad credentials
2013-04-11 15:47:26,419 DEBUG o.s.w.s.m.a.ResponseStatusExceptionResolver - Resolving exception from handler [public de.pentos.spring.User de.pentos.spring.LoginController.login(de.pentos.spring.User)]: org.springframework.security.authentication.BadCredentialsException: Bad credentials
2013-04-11 15:47:26,419 DEBUG o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolving exception from handler [public de.pentos.spring.User de.pentos.spring.LoginController.login(de.pentos.spring.User)]: org.springframework.security.authentication.BadCredentialsException: Bad credentials
2013-04-11 15:47:26,426 DEBUG o.s.web.servlet.DispatcherServlet - Could not complete request
org.springframework.security.authentication.BadCredentialsException: Bad credentials 
```

这发生在调试模式下

我的错误在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T14:32:04.783

从您附加的日志来看，我认为您在实施登录过程时犯了一个错误。我不能绝对肯定，但我猜你打电话给`ProviderManager.authenticate()`你的`LoginController`. 该方法抛出一个`BadCredentialsException`导致 Spring MVC 的异常处理机制启动的方法，这当然不知道`AuthenticationFailureHandler`为 Spring Security 配置的内容。

在登录控制器中，您通常应该只提供一个简单的登录表单，使用`action="j_spring_security_check" method="post"`. 当用户提交该表单时，配置的安全过滤器（即`UsernamePasswordAuthenticationFilter`）会拦截该请求并处理身份验证。您不必自己在控制器方法中实现该逻辑。

* * *

### 回复您的评论：

您确实使用`ProviderManager`（它是自动装配`AuthenticationManager` 接口的实现）。您犯的错误是您尝试重写已在身份验证过滤器中实现和彻底测试的逻辑。这本身就是不好的，但即使这样做也是错误的。您从一个复杂的逻辑中只选择了几行，除此之外，您还忘记了其他一些事情，例如调用会话策略（以防止会话固定攻击和处理并发会话）。原始实现也调用了`AuthenticationFailureHandler` ，您在方法中也忘记了它，这就是您的原始问题所涉及的问题的原因。

因此，您最终会得到一个未经测试的脆弱解决方案，而不是与框架很好地集成以利用其健壮性和全部容量。正如我所说，您在答案中发布的配置是一个明确的改进，因为它使用框架提供的过滤器进行身份验证。保留该配置并删除`LoginController.login()`，发送到的请求无论如何都不会调用它`/rest/login`。

一个更基本的问题是，如果您实现 RESTful 服务，使用会话和基于表单的登录机制是否真的是一个很好的解决方案。（在基于表单的登录中，我的意思是客户端以任何格式发送其凭据*一次*，然后在后续请求中通过有状态会话进行身份验证。）使用 REST 服务，保持一切无状态并重新验证每个新请求更为普遍通过 http 标头携带的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T14:26:48.313

security-app-context.xml 中的顺序有问题。

如果我先定义我所有的 bean，然后再定义所有其他的，它就可以工作。我尝试了很多，所以不要怀疑，它现在看起来与问题中的有所不同

```
<beans:bean id="authenticationProcessingFilterEntryPoint" class="org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint">
    <beans:property name="loginFormUrl" value="/rest/login" />
</beans:bean>

<beans:bean id="authenticationFilter" class="org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter">
    <beans:property name="authenticationManager" ref="authenticationManager" />
    <beans:property name="filterProcessesUrl" value="/rest/login" />
    <beans:property name="authenticationSuccessHandler" ref="authenticationSuccessHandler" />
    <beans:property name="authenticationFailureHandler" ref="authenticationFailureHandler" />
</beans:bean>

<beans:bean id="authenticationSuccessHandler" class="de.pentos.spring.LoginSuccessHandler" />
<beans:bean id="authenticationFailureHandler" class="de.pentos.spring.LoginFailureHandler" />

<http use-expressions="true" disable-url-rewriting="true" entry-point-ref="authenticationProcessingFilterEntryPoint"
    create-session="ifRequired">
    <intercept-url pattern="/rest/login" access="permitAll" />
    <intercept-url pattern="/rest/**" access="isAuthenticated()" />
    <intercept-url pattern="/index.html" access="permitAll" />
    <intercept-url pattern="/js/**" access="permitAll" />
    <intercept-url pattern="/**" access="denyAll" />
    <custom-filter position="FORM_LOGIN_FILTER" ref="authenticationFilter" />
</http>

<authentication-manager alias="authenticationManager">
    <authentication-provider>
        <user-service>
            <user name="chuck.norris" password="cnorris" authorities="ROLE_ADMIN" />
            <user name="user" password="user" authorities="ROLE_USER" />
        </user-service>
    </authentication-provider>
</authentication-manager> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-06T11:39:02.843

（查看您的要求），您不需要自定义 AuthenticationFailureHandler 作为 Spring 的默认 SimpleUrlAuthenticationFailureHandler 并且正确实施 AuthenticationProvider 应该可以达到目的。

```
 <form-login login-page="/login" login-processing-url="/do/login" authentication-  failure-url ="/login?authfailed=true" authentication-success-handler-ref ="customAuthenticationSuccessHandler"/> 
```

如果您在 Authentication Provider 中很好地处理了异常：

示例逻辑：

```
 String loginUsername = (String) authentication.getPrincipal();
    if (loginUsername == null)
        throw new UsernameNotFoundException("User not found");

    String loginPassword = (String) authentication.getCredentials();

    User user = getUserByUsername(loginUsername);
    UserPassword password = getPassword(user.getId());

    if (!password.matches(loginPassword)) {
        throw new BadCredentialsException("Invalid password.");
    } 
```

如果我们希望抛出的异常反映在客户端界面上，请在响应**authentication-failure-url="/login?authfailed=true"的 JSP 上添加以下脚本**

```
 <%                      
                    Exception error = (Exception) request.getSession().getAttribute("SPRING_SECURITY_LAST_EXCEPTION");
                   if (error != null)
                    out.write(error.getMessage());
     %> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T13:34:15.320

在我看来并不坏。您是否尝试使用 IDE 的调试模式？

您是否在日志中看到类似的内容：

```
Authentication request failed: ...
Updated SecurityContextHolder to contain null Authentication
Delegating to authentication failure handler ... 
```

只有在身份验证过滤器之一中完成身份验证时，才会自动调用 AuthenticationFailureHandler ： UsernamePasswordAuthenticationFilter 通常在您的情况下。

# python - Pentaho 报告在 openerp 7 中不起作用

> ID：15949672
> 
> 赞同：0
> 
> 时间：2013-04-11T13:09:59.437
> 
> 标签：python, report, openerp, pentaho

我已经从 prd 设计器创建了一个简单的发票报告并保存。

现在我尝试从 openerp 打印报告。我为此报告创建了一个动作并打印。遇到这个错误：

```
Traceback (most recent call last):
  File "/home/monod/openerp/7/server/openerp/service/web_services.py", line 712, in go
    (result, format) = obj.create(cr, uid, ids, datas, context)
  File "/home/monod/openerp/7/addons/pentaho_reports/core.py", line 160, in create
    return report_instance.execute()
  File "/home/monod/openerp/7/addons/pentaho_reports/core.py", line 99, in execute
    return self.execute_report()
  File "/home/monod/openerp/7/addons/pentaho_reports/core.py", line 120, in execute_report
    proxy_parameter_info = proxy.report.getParameterInfo(proxy_argument)
  File "/usr/lib/python2.7/xmlrpclib.py", line 1224, in __call__
    return self.__send(self.__name, args)
  File "/usr/lib/python2.7/xmlrpclib.py", line 1578, in __request
    verbose=self.__verbose
  File "/usr/lib/python2.7/xmlrpclib.py", line 1264, in request
    return self.single_request(host, handler, request_body, verbose)
  File "/usr/lib/python2.7/xmlrpclib.py", line 1312, in single_request
    response.msg,
ProtocolError: <ProtocolError for localhost:8080/pentaho-reports-for-openerp: 404 Not Found> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:05:02.837

这意味着您的 openerp 参数中配置的 url 与服务器报告的 url 不匹配。该模块提供了一个小型报表服务器 - 由命令 ant 运行时执行。

# java - 从 android 联系人列表中检索到错误的联系人数据 - 如何更正？

> ID：15949673
> 
> 赞同：0
> 
> 时间：2013-04-11T13:10:00.843
> 
> 标签：java, android, android-contacts, contact, contactscontract

我的应用程序出现了一些不寻常的行为 - 我无法理解为什么，但是当用户从我的列表视图中选择一个联系人时，后来从手机中检索到的联系人不知何故不是用户选择的那个......

更新的新代码，仍然无法正常工作。

```
 public class nominateContactsActivity extends ListActivity {
public String strName;
public String strTelNo;
public static final String PREFS_NAME = "locationPrefs";
public static final ArrayList<NameValuePair> contactsArray = new ArrayList<NameValuePair>();
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
this.requestWindowFeature(Window.FEATURE_NO_TITLE);

setContentView(R.layout.nominatecontactsactivitytest);

this.getListView().setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
this.getListView().setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);

//String[] projection = new String[] { ContactsContract.PhoneLookup.NUMBER};
String selection = ContactsContract.Contacts.HAS_PHONE_NUMBER + " = '1'";
Cursor cursor = managedQuery(ContactsContract.Contacts.CONTENT_URI,null, selection, null, null);
startManagingCursor(cursor);
String[] columns = new String[] { 
        ContactsContract.Contacts.DISPLAY_NAME
        };

int[] to = new int[] { android.R.id.text1 };

SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, android.R.layout.simple_list_item_multiple_choice, cursor, columns, to);
this.setListAdapter(adapter);

Button finishButton = (Button) this.findViewById(R.id.finishButton);
finishButton.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {

        SimpleCursorAdapter adapter = (SimpleCursorAdapter) nominateContactsActivity.this.getListAdapter();
        ListView lv = nominateContactsActivity.this.getListView();
        SparseBooleanArray selectedItems = lv.getCheckedItemPositions();
        Cursor contactsCursor = adapter.getCursor();

        /*for (long id : lv.getCheckedItemIds()) {
            String selection = ContactsContract.CommonDataKinds.Phone.CONTACT_ID + " = ?";
            String[] args = new String[] { String.valueOf(contactId) };
            Cursor cursor=managedQuery(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, selection, args, null);
        }*/

        for (long id : lv.getCheckedItemIds()) {
            long contactId = contactsCursor.getInt(contactsCursor.getColumnIndex(BaseColumns._ID));
            String selection = ContactsContract.CommonDataKinds.Phone.CONTACT_ID + " = ?";
            String[] args = new String[] { String.valueOf(contactId) };
            Cursor cursor=managedQuery(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, selection, args, null);
            if (cursor.moveToFirst()) {
                strName=cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
                strTelNo = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));                                                      
            }
        ;}
            try {
                //Name not operationally useful - why bother storing it - keep this in case later implemented.
                //contactsArray.add(new BasicNameValuePair ("name", strName));
                contactsArray.add(new BasicNameValuePair("number", strTelNo));
            } catch(Exception e){
                e.printStackTrace();
            }

        try {
            storeContacts();
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    });
}

public void storeContacts() throws ClientProtocolException, IOException{
    SharedPreferences userPrefs = this.getSharedPreferences("PREFS_NAME", 0);
    Editor edit = userPrefs.edit();
    //edit.remove("contactsData").commit();
    String formattedString = contactsArray.toString()
            .replace("number=", "") //remove number name
            .replace(" ","")        //remove spaces
            .replace("[", "")       //remove the right bracket
            .replace("]", "");      //remove the left bracket
    edit.putString("contactsData", formattedString);
    edit.commit();
    String name = userPrefs.getString("Name", null);
    String test = userPrefs.getString("contactsData", null);
    Log.d("", formattedString);
    Log.d("test = ", test);
    Intent myIntent = new Intent(nominateContactsActivity.this, rootMenuActivity.class);
    startActivity(myIntent);
          String textSMS = "You have been nominated as a contact by " + name +". Check out www.mywebsite.com for info"; 
          String retrievedContacts = userPrefs.getString("contactsData", null);
          String textPhoneNo;
          textPhoneNo = retrievedContacts;
          //textSMS = "My current location is: " + currentLocation;
          String phoneNo = textPhoneNo;
          try {
                SmsManager smsManager = SmsManager.getDefault();
                smsManager.sendTextMessage(phoneNo, null, textSMS, null, null);
                Toast.makeText(getApplicationContext(), "SMS Sent!", Toast.LENGTH_LONG).show();
                Intent myIntent1 = new Intent(nominateContactsActivity.this, rootMenuActivity.class);
                startActivity(myIntent1);       
          } 
          catch (Exception e) {
                Toast.makeText(getApplicationContext(),
                "SMS failed, please try again later!",
                Toast.LENGTH_LONG).show();
                e.printStackTrace();
          } 
```

上面的代码工作正常，除了返回错误的联系人。这是一个滚动问题，复选框的 id 丢失了吗？请帮忙！！

谢谢

更新-堆栈跟踪

```
04-11 15:29:43.646: E/AndroidRuntime(3976): FATAL EXCEPTION: main
04-11 15:29:43.646: E/AndroidRuntime(3976): android.database.CursorIndexOutOfBoundsException: Index -1 requested, with a size of 1
04-11 15:29:43.646: E/AndroidRuntime(3976):     at android.database.AbstractCursor.checkPosition(AbstractCursor.java:424)
04-11 15:29:43.646: E/AndroidRuntime(3976):     at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:136)
04-11 15:29:43.646: E/AndroidRuntime(3976):     at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:50)
04-11 15:29:43.646: E/AndroidRuntime(3976):     at android.database.CursorWrapper.getString(CursorWrapper.java:114)
04-11 15:29:43.646: E/AndroidRuntime(3976):     at com.app.protect3d.nominateContactsActivity$1.onClick(nominateContactsActivity.java:123)
04-11 15:29:43.646: E/AndroidRuntime(3976):     at android.view.View.performClick(View.java:4204)
04-11 15:29:43.646: E/AndroidRuntime(3976):     at android.view.View$PerformClick.run(View.java:17355)
04-11 15:29:43.646: E/AndroidRuntime(3976):     at android.os.Handler.handleCallback(Handler.java:725)
04-11 15:29:43.646: E/AndroidRuntime(3976):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-11 15:29:43.646: E/AndroidRuntime(3976):     at android.os.Looper.loop(Looper.java:137)
04-11 15:29:43.646: E/AndroidRuntime(3976):     at android.app.ActivityThread.main(ActivityThread.java:5226)
04-11 15:29:43.646: E/AndroidRuntime(3976):     at java.lang.reflect.Method.invokeNative(Native Method)
04-11 15:29:43.646: E/AndroidRuntime(3976):     at java.lang.reflect.Method.invoke(Method.java:511)
04-11 15:29:43.646: E/AndroidRuntime(3976):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
04-11 15:29:43.646: E/AndroidRuntime(3976):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
04-11 15:29:43.646: E/AndroidRuntime(3976):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:37:39.267

在`onClick`，你有适配器。从中，您可以获得联系人的光标。

```
Cursor contactsCursor = adapter.getCursor(); 
```

在您的循环中，您可以获得联系人 ID：

```
contactsCursor.moveToPosition(selectedPosition);
long contactId = contactsCursor.get(contactsCursor.getColumnIndex(BaseColumn._ID)); 
```

从那里，您可以像这样搜索电话：

```
String selection = ContactsContract.CommonDataKinds.Phone.CONTACT_ID + " = ?";
String[] args = new String[] { String.valueOf(contactId) };
Cursor cursor=managedQuery(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, selection, args, null);
if (cursor.moveToFirst()) {
    // Get content here
} 
```

从那里您可以像以前一样使用获得的光标。

## 编辑——简化（重新编辑，id真的是contactId）

你可以简单地循环这个：

```
for (long contactId : lv.getCheckedItemIds()) {
    String selection = ContactsContract.CommonDataKinds.Phone.CONTACT_ID + " = ?";
    String[] args = new String[] { String.valueOf(contactId) };
    Cursor cursor=managedQuery(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, selection, args, null);
    if (cursor.moveToFirst()) {
        // Get content here
    }
} 
```

# gwt - 以编程方式设置 GWT 中标签的文本颜色

> ID：15949675
> 
> 赞同：4
> 
> 时间：2013-04-11T13:10:03.633
> 
> 标签：gwt

如何以编程方式设置标签中文本的颜色。这是我最近的尝试。

```
 public void setFontColour(String colour )
{
    label.getElement().getStyle().setFontStyle( Style.FontStyle.valueOf("bluetext") );
} 
```

我只想调用 setColour 方法，但我搜索的所有内容都试图通过 CSS 执行此操作。在这种情况下，我想通过 Java 设置它。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T13:19:50.080

尝试这样的事情：

```
label.getElement().getStyle().setColor("red"); 
```

# facebook - 没有 git 的 Heroku 克隆项目

> ID：15949683
> 
> 赞同：0
> 
> 时间：2013-04-11T13:10:30.807
> 
> 标签：facebook, heroku

我正在使用 heroku 来开发一个 facebook 应用程序。我在用 git 克隆我的项目时遇到了一些麻烦（它只在家里工作，而不是在工作中）（[从 gi​​t 获取代码的 Heroku 错误](http://facebook.stackoverflow.com/questions/15896385/heroku-error-for-getting-the-code-from-git?noredirect=1#comment22640721_15896385)）

我如何在没有 git 的情况下在 heroku 上下载代码存储？

（我发现如何在不使用 git 的情况下推送代码[在不使用 Git 的情况下将更改部署到 Heroku 上托管的应用程序](http://facebook.stackoverflow.com/questions/5806929/deploying-changes-to-an-app-hosted-on-heroku-without-using-git/15949181?noredirect=1#comment22727283_15949181)）

谢谢你 ;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T19:26:37.093

问题在于您的 SSH 密钥在您的工作机器上使用它，它应该可以工作；[）](https://devcenter.heroku.com/articles/keys)

# jquery - 如何仅在触摸屏设备上禁用 onmouse 和 onmouseout 功能

> ID：15949684
> 
> 赞同：0
> 
> 时间：2013-04-11T13:10:32.917
> 
> 标签：jquery, html, hover, onmouseover, onmouseout

我正在为一个服装品牌创建一个响应式购物网站，`onmouseover=""`并对 `onmouseout=""`我的`<img>`标签产生影响以显示产品的正面和背面，例如[http://www.blackmilkclothing.com](http://www.blackmilkclothing.com)

但是在触摸屏设备上查看网站时，悬停效果显然设置为点击功能。这使得它无法流畅地向下滚动

我将如何仅对触摸屏设备禁用此效果？这是我的图像代码

```
<div class="product">
   <a href="">
      <img src="pic.jpg"onmouseover="this.src='pic2.jpg'"onmouseout="this.src='pic.jpg'" />
   </a>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:26:41.703

[使用 Javascript 检测触摸屏设备](https://stackoverflow.com/questions/3974827/detecting-touch-screen-devices-with-javascript)- 如何检测触摸屏。对于您的代码：

```
var is_touch_device = 'ontouchstart' in document.documentElement;
    if (is_touch_device) {
    var elements = document.getElementsByTagName("img");
    for (var i=0;i<elements.length;i++) {
        elements[i].onmouseover = null;
        elements[i].onmouseout = null;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:22:29.217

我只能考虑[http://modernizr.com/](http://modernizr.com/)它可以让您知道查看器是否有触摸屏。

该插件将一个类添加到`<html>` `.touch`and`.no-touch`

现在你可以做类似的事情

```
if($('html').hasClass('no-touch')){
   $('img').mouseover(function(){ //change pic 
           }).mouseout(function(){ //change back 
           });
} 
```

这只会`mouseover`为没有触摸屏的设备添加事件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T13:25:07.563

我认为您应该在页面加载时测试用户代理并动态分配“onmouseover”和“onmouseout”事件（如果用户代理不是移动的），所有这些都使用 JQuery 或 Javascript。

# logging - 索引 Azure WAD 日志数据以提取导入到 splunk 的字段

> ID：15949688
> 
> 赞同：0
> 
> 时间：2013-04-11T13:10:46.660
> 
> 标签：logging, azure, splunk

我们有来自 Windows azure WADLogs 的数据，我导出逗号分隔并最终看起来像这样：

> `"0635010205200000000","d921c47290f944a69c3394373b5c5988___Pricing.Api___Pricing.Api_IN_0___0000000001652031516___WADLogsLocalQuery",2013-04-08T12:24:04.8000293Z,635010205409475113,"deploymentid","Role","Role_IN_0",5,2,608,3232,"TimeTaken::16043 ms to perform Action::'some action'; TraceSource 'PricingApiTrace' event"`

我想提取值为 16043 的名为 TimeTaken 的字段和值为“某些操作”的 Action。

我可以更改以“TimeTaken”开头的位的格式，如果这会使事情变得更容易，并且希望在阅读 :: 自动创建的字段后，使用上述格式将允许索引自动创建字段，但似乎事实并非如此。

任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:47:38.413

您可以创建两个[搜索时间字段提取](http://docs.splunk.com/Documentation/Splunk/5.0.2/Knowledge/Addfieldsatsearchtime)`TimeTaken`来为和创建字段`Action`。

您需要为每个字段定义一个正则表达式，考虑到您描述的格式，这应该很简单。

# jquery - Jquery datepicker 插件仅适用于第一个文本框，而不适用于第二个

> ID：15949691
> 
> 赞同：2
> 
> 时间：2013-04-11T13:10:57.123
> 
> 标签：jquery, html

我有 jquery datepicker 插件，它在第一个文本框上运行良好。您可以单击它，日历将弹出。现在我该如何在第二个文本框上执行此操作？这样当点击它时，它也会弹出弹出窗口？

jQuery函数：

```
 $(function() {
$("#datepicker").datepicker({dateFormat: 'dd/mm/yy'});
}); 
```

html输入框：

```
<input type="text" id="datepicker" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:13:04.157

创建一个如下所示的类

```
$(".test").datepicker({dateFormat: 'dd/mm/yy'}); }); 
```

只需添加一个类即可应用于输入文本。

```
<input type="text" id="datepicker" class="test"/>
<input type="text" id="datepicker2" class="test"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T13:12:47.397

您不能在页面中使用重复的 ID。给每个人一个不同的ID，然后像这样调用 -

```
$('#datepciker1, #datepicker2').datepicker(.... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T13:13:22.797

它不适用于第二个元素的原因可能是因为您为第二个输入提供了与第一个相同的 ID - [**ID 应该是唯一的**](http://webdesign.about.com/od/css/f/blfaqmultiIDs.htm)，请改用一个类：

```
$(function() {
  $(".datepicker").datepicker({dateFormat: 'dd/mm/yy'});
});

<input type="text" class="datepicker" />
<input type="text" class="datepicker" /> 
```

# c# - 我想要计算唯一性以及数组中的值？

> ID：15949693
> 
> 赞同：-6
> 
> 时间：2013-04-11T13:10:58.107
> 
> 标签：c#, arrays

我在数组中有 6 个数字。

```
string[] list = { "1", "1", "2","2","1","3" }; 
```

我想要这样的结果。请帮忙。

> “1” = 3
> “2” = 2
> “3” = 1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T13:12:45.700

```
var itemCounts = list.GroupBy(l => l)
                     .Select(g => new { key = g.Key, count = g.Count()}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T13:19:13.940

假设您在 SearchArray >0 中的数字。这是另一种方法

你也可以写一个函数 1) 找到 Max - One Loop

```
 for( int i=0;i<searchArray.length;i++){
    if (searchArray[i]>max) max=searchArray[i];
  } 
```

2) 初始化一个`Array[Max+1]= 0`

3）循环遍历每个项目并增加数组中的大小

```
 for( int i=0;i<searchArray.length;i++){

     Array[searchArray[i]]++;
  } 
```

# python - Python中的Unix文件名通配符？

> ID：15949694
> 
> 赞同：6
> 
> 时间：2013-04-11T13:10:59.913
> 
> 标签：python, unix, pattern-matching, wildcard

**Unix 文件名通配符**如何在**Python**中工作？

给定目录仅包含子目录，在每个子目录中（除其他外）有一个文件，其名称以已知字符串结尾，例如**`_ext`**. 文件名的第一部分总是变化的，所以我需要使用这种模式来获取文件。

我想这样做：

```
directory = "."
listofSubDirs = [x[0] for x in os.walk(directory)]
listofSubDirs = listofSubDirs[1:] #removing "."

for subDirectory in listofSubDirs:
    fileNameToPickle = subDirectory + "/*_ext" #only one such file exists
    fileToPickle = pickle.load(open(fileNameToPickle, "rb"))
    ... do stuff ... 
```

但是没有发生模式匹配。它在 Python 下是如何工作的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-11T13:13:14.637

Shell 通配符模式在 Python 中不起作用。请改用[`fnmatch`](http://docs.python.org/2/library/fnmatch.html)or[`glob`](http://docs.python.org/2/library/fnmatch.html)模块来解释通配符。`fnmatch`解释通配符并让您匹配字符串，在内部`glob`使用`fnmatch`，以及`os.listdir()`为您提供匹配文件名的列表。

在这种情况下，我会使用`fnmatch.filter()`：

```
import os
import fnmatch

for dirpath, dirnames, files in os.walk(directory):
    for filename in fnmatch.filter(files, '*_ext'):
        fileNameToPickle = os.path.join(dirpath, filename)
        fileToPickle = pickle.load(open(fileNameToPickle, "rb")) 
```

如果您的结构仅包含*一层*子目录，您还可以使用一种`glob()`模式来表达这一点；*表达式路径*`*/`中的扩展为匹配所有子目录：

 *```
import glob
import os

for filename in glob.glob(os.path.join(directory, '*/*_ext')):
    # loops over matching filenames in all subdirectories of `directory`. 
```*

# ios - 如何在 Xcode 模板中设置部署目标？

> ID：15949697
> 
> 赞同：3
> 
> 时间：2013-04-11T13:11:07.590
> 
> 标签：ios, xcode, xcode-template

我正在尝试为 Xcode 4.6.1 创建一个 iOS 项目 Xcode 模板。

是否可以在`TemplateInfo.plist`文件中设置部署目标？- 如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-10T14:48:01.397

我没有安装 Xcode 4.6.1，但这是我在 Xcode 8 中使用的键（在 TemplateInfo.plist 中）。

您的项目的关键是：

```
Project > SharedSettings > IPHONEOS_DEPLOYMENT_TARGET 
```

特定目标的键在此数组中：

```
Targets[i] > SharedSettings > IPHONEOS_DEPLOYMENT_TARGET 
```

# java - Google App Engine 数据存储建模

> ID：15949698
> 
> 赞同：0
> 
> 时间：2013-04-11T13:11:08.337
> 
> 标签：java, google-app-engine, nosql, google-cloud-datastore

有关如何为 Google App Engine 数据存储区建模的一般问题。我对实体组部分感到困惑。让我们以一个 Facebook 示例为例，其中有 3 个实体：用户、帖子和评论。

现在我将如何实现它就像一个传统的 RDBMS。每个 Post 都有一个 userId 属性，每个 Comment 都有一个 postId 属性和 userId 属性，我将通过查询相互链接。我不使用任何实体组。但是，我觉得这对于实体组来说是一个好地方，因为没有用户，帖子就无法生存，没有帖子，评论就无法生存。我会以帖子是用户的孩子的方式进行设置吗？和评论是帖子和用户的孩子？

再一次，为了清楚起见，我对何时使用实体组感到困惑。

**更新：我正在使用 Java

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:49:02.220

您应该知道，实体组在 High Replication 数据存储上的软限制为 1 次写入/秒。在创建建模选择时请记住这一点

使用实体组的一个很好的理由是进行一致的查询或以事务方式更新多个模型。如果您需要使用事务更新 1 个或多个模型，它们必须属于同一个实体组（尽管现在有一次最多支持 5 个不同组的跨组事务）。如果要执行强一致查询（默认情况下不是最终一致查询），则需要在查询中指定父级。[在此处](https://developers.google.com/appengine/docs/python/datastore/structuring_for_strong_consistency)阅读有关强一致性的更多信息

[您可以在此处](https://developers.google.com/appengine/docs/python/datastore/entities#Transactions_and_Entity_Groups)阅读有关实体组使用情况的信息

您可以按照您的描述建模关系，但您也可以使用[`ndb.KeyProperty`](https://developers.google.com/appengine/docs/python/ndb/properties#types)或[`db.ReferenceProperty`](https://developers.google.com/appengine/docs/python/datastore/datamodeling#References)从一个模型引用到另一个模型。

**JAVA 更新** 我上面所说的实体组对 JAVA 和 python 都是正确的，除了你会用来[`com.google.appengine.api.datastore.Key`](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/Key)在模型之间引用对象。

同样，对于 JAVA/Python，我相信单个实体组中的所有实体都可以更快地检索，因为数据保存在单个节点上（M/S 数据存储确实如此，不确定 HRD）。从[这里](https://developers.google.com/appengine/docs/java/datastore/transactions)：

> 实体组关系告诉 App Engine 将多个实体存储在分布式网络的同一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:39:55.830

我收集你正在使用python？如果您使用应该使用的 NDB，则可以将“外国 id”或键存储为键属性列表

```
message = ndb.KeyProperty(kind=Message, repeated=True) 
```

但是请阅读选项，因为有很多;）

[https://developers.google.com/appengine/docs/python/ndb/properties](https://developers.google.com/appengine/docs/python/ndb/properties)

# c# - 正则表达式如何根据行首匹配整行？

> ID：15949700
> 
> 赞同：-1
> 
> 时间：2013-04-11T13:11:10.553
> 
> 标签：c#, regex

所以我有 SQL 文件，我想找到 setvars。
该文件如下所示：

```
...  
:setvar DatabaseName "Database_1"  
...  
:setvar DefaultDataPath "" 
```

我在这种状态`"(?m)^:setvar " + variable`下的模式应该是例如“DatabasseName”或“DefaultDataPath”。但是行尾不在匹配的 Value 属性中。我也试过这个：`"(?m)^:setvar " + variable + ".+\"$"`但它甚至不匹配:)

感谢您的帮助，
彼得

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T13:26:34.797

尝试`:setvar\s+(?<variable>\w*)\s+"?(?<value>\w*)"?`- 这将解析每一行并为您提供一个包含变量和每个匹配项值的命名组。

分解它：

*   `:setvar`查找以 ":setvar" 开头后跟一个或多个空格的字符串部分。
*   `(?<variable>\w*)`采用“setvar”后面的非空白字符并将它们解析为命名组“变量”
*   `"?(?<value>\w*)"?`获取变量后面的非空白字符并将它们解析为命名组“值”。每边的 "? 使引号可选。
*   `\s+`（出现多次）允许一个或多个空格将 setvar 与变量和值分开。

所以使用这段代码：

```
var findSetvars = new Regex(@":setvar\s+(?<variable>\w*)\s+""?(?<value>\w*)""?");
var matches = findSetvars.matches(input); 
```

你会得到一个可以像这样枚举的`MatchCollection`in ：`matches`

```
foreach(Match match in matches)
{
   var variable = match.Groups["variable"];
   var value = match.Groups["value"];
   // now do whatever. 
} 
```

请注意，这`Regex.MatchCollection`是 .net 1.0 样式的对象集合之一，因此您必须告诉编译器它的每个成员都是一个`Match`对象。很烦人，希望他们能把它换成一个通用的匹配列表。的结果`match.Groups["groupname"]`将是该组捕获的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:31:12.927

试试这个模式。

```
(\:setvar)\s+(?<variable_name>\S+)\s+"?(?<variable_value>.*)"? 
```

有了这个输入

```
...  
:setvar DatabaseName "Database_1"  
...  
:setvar DefaultDataPath ""  
...
:setvar IntVariable 24 
```

# oracle - 在 DDL 操作期间，oracle 表空间是否被锁定？

> ID：15949710
> 
> 赞同：0
> 
> 时间：2013-04-11T13:11:32.703
> 
> 标签：oracle, timeout, tablespace

鉴于

有一个表空间指向一个文件，并且有许多模式指向该表空间，并且有许多同时使用这些模式执行繁重的 DDL 操作（删除数据库、删除索引、从头开始使用数据导入创建大型数据库）的作业，

表空间是否可能以某种方式锁定，以便使用这些模式的某些作业会超时？

# python - 如何将流线从 matplotlib 导入 ArcGIS？

> ID：15949717
> 
> 赞同：3
> 
> 时间：2013-04-11T13:11:49.667
> 
> 标签：python, matplotlib

我正在使用 streamplot.py 代码运行 matplotlib v1.2，以从 netcdf 文件中的数据绘制流线。绘图进展顺利，但我想查看 Arc 中的流线，所以我一直在尝试获取计算值。我对此比较陌生，昨天大部分时间都在网上寻找答案，但在任何论坛上都没有看到任何东西。据我所知，Streamplot 返回一个名为 stream_container 的容器对象，它是使用 StreamplotSet 类创建的。所以 stream_container 有两个属性（？）（线和箭头）。我认为这两个属性是我需要得到的。我已经用尽了我对 Python 的了解，以及我认识的另外两个对此一无所知的人。任何帮助或建议将不胜感激。最终，我试图将其放入 ArcGIS，但只要我能获得数字并操纵它们，我并不担心将其移至 Arc 部分。它是获取我遇到问题的容器对象中的值。

请原谅我的术语，我对编程世界比较陌生。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-02T21:28:34.103

你可以看看 PyShp——如果你想制作 shapefile。它是纯 Python，非常易于使用。但我不确定我是否理解你的问题（我没有足够高的声誉来发表评论）。您需要将流线的数据放入列表或纬度和经度的 numpy 数组中。“线条”和“箭头”听起来像是 Streamplot 的一些派生词（我不熟悉）。

[http://code.google.com/p/pyshp/](http://code.google.com/p/pyshp/)

# php - 模型中的 cakephp 力指数

> ID：15949720
> 
> 赞同：2
> 
> 时间：2013-04-11T13:12:24.307
> 
> 标签：php, cakephp, indexing, cakephp-1.3

我使用在模型中使用“FORCE INDEX”的查找方法。模型很好，但是当我对该 find 方法进行测试时，发生了 SQL 错误。我使用测试/夹具并定义数据库模式和数据。在测试/夹具中，我不知道如何定义索引。因此，用于测试的数据库没有索引。如果您能告诉我如何在测试/夹具中定义索引，那就太好了。

在模型...

```
$this->Model->find('all', array(
     'fields' => array('foo'),
     'conditions' => array('foo' => foo),
     'joins' => array('FORCE INDEX(foo)'),
); 
```

在测试/夹具中

```
var $fields = array(
    'id' => ....
    'foo' => ....
    'created' => ....
    'modified' => ....
 ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:23:28.547

我认为这会帮助你：

[http://cakephp.1045679.n5.nabble.com/Using-USE-INDEX-or-FORCE-INDEX-in-Model-gt-find-amp-relationships-td3281552.html#a3300205](http://cakephp.1045679.n5.nabble.com/Using-USE-INDEX-or-FORCE-INDEX-in-Model-gt-find-amp-relationships-td3281552.html#a3300205)

“1- 创建我自己的数据源——（在我的例子中扩展 DboMysql）数据源有两个任务：

它覆盖 read 方法并检查模型是否设置了 useIndex 字段

```
 if (!empty($model->useIndex)) { 
            $this->useIndex = $model->useIndex; 
    } 

    return parent::read($model, $queryData); 
```

它会覆盖 renderStatement 方法，如果设置了 $model->useIndex 字段，则在 select 语句中的表别名之后添加其值。

```
if (strtolower($type) == 'select' && !empty($this->useIndex)) { 
        $res = "SELECT {$fields} FROM {$table} {$alias} {$this->useIndex} {$joins} {$conditions} {$group} {$order} {$limit}"; 
} else { 
        $res = parent::renderStatement($type, $data); 
} 
$this->useIndex = null; 
return $res; 
```

2- 设置模型字段 whitch 包含使用索引、强制索引或忽略索引的 sql 部分

例如在控制器中：

```
$this->Task->useIndex = 'IGNORE INDEX(ind_usr_id)'; 
$this->paginate = array( 
        'fields' => array('Task.id', 'Task.name','User.id', 'User.name'), 
        'order' => 'Task.id', 
        'limit' => 10 
); 
$this->paginate('Task'); 
```

"

# javascript - Javascript：是什么意思？

> ID：15949724
> 
> 赞同：0
> 
> 时间：2013-04-11T13:12:38.080
> 
> 标签：javascript

```
window.onload = function () {
    'use strict'; 
```

这是什么意思？

```
var antwoord = function (tekst) {
    var berichtvenster = document.getElementById('berichtvenster');
    berichtvenster.innerHTML += "<p>" + tekst + "</p>\n"; 
```

上面的代码在做什么？一步步？我认为它是一个函数（antwood），而 var berichtvenster 从 HTML 中获取（berichtvenster ID）？`berichtvenster.innerHTML`在不同的文本行上打印出 tekst？我对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:16:48.293

```
window.onload = function () { 
```

这一行启动了一个匿名函数并将其附加到`window.onload`事件中，即函数中的代码将在页面及其所有资源加载到 DOM 时执行。

```
'use strict'; 
```

*这行代码表示将在严格*模式下执行后续代码，这意味着少数常见的陷阱和可疑代码将被视为错误。[在此处查看有关严格模式的更多信息](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/Strict_mode)。

```
var antwoord = function(tekst) { 
```

这一行启动了一个名为`antwoord`（不是真的：见注释）的函数，它接受一个参数 ( `tekst`)。

```
var berichtvenster = document.getElementById('berichtvenster'); 
```

此行查找 ID 为“berichtvenster”的元素，并将对该元素的引用（如果找到）分配给新创建的同名变量。

```
berichtvenster.innerHTML += "<p>" + tekst + "</p>\n"; 
```

这一行假定确实找到了这样的元素，并继续更新其`innerHTML`属性，即更改元素的 HTML 内容。它将内容更改为仅包含传递给`antwoord`函数的文本的段落。

# iphone - 如何使垂直滚动 iPhone 5 兼容

> ID：15949725
> 
> 赞同：1
> 
> 时间：2013-04-11T13:12:39.050
> 
> 标签：iphone, cocos2d-iphone

我反复从上到下垂直滚动。但是，在 iPhone5 上存在一些滞后问题。

如何让它在 iphone 5 上顺利运行

这是代码：

```
-(void)scrollBackground:(ccTime)dt
{
    CGSize s = [[CCDirector sharedDirector] winSize];

    CGPoint pos1 = mBG1.position;
    CGPoint pos2 = mBG2.position;

    pos1.y -= MM_BG_SPEED_DUR;
    pos2.y -= MM_BG_SPEED_DUR;

    if(pos1.y <=-((s.height*0.5f) ) )
    {
        pos1.y = (pos2.y + mBG2.contentSize.height)  ;
    }

    if(pos2.y <=-((s.height*0.5f) ) )
    {
        pos2.y = (pos1.y + mBG1.contentSize.height) ;
    }

    mBG1.position = pos1;
    mBG2.position = pos2;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:30:32.020

我会说你的 mBG1 和 mBG2 （我想背景精灵）是 iPhone4 屏幕的大小。所以代码行

```
if(pos1.y <=-((s.height*0.5f) ) ) 
```

&

```
if(pos2.y <=-((s.height*0.5f) ) ) 
```

只激活太晚（屏幕顶部已经是空的）。

您可以添加第三个 mBG3 以覆盖更多屏幕，将更大的精灵分配给 mBG1 和 mBG2（适合 iPhone5 屏幕），或者将 mBG1 复制为 mBG3，将 mBG2 复制为 mBG4，以增加覆盖的屏幕。如果您的 mBG1 使用与 mBG2 相同的精灵，添加额外的 mBG3 就足够了。最后一种情况的代码。

```
-(void)scrollBackground:(ccTime)dt
{
    CGSize s = [[CCDirector sharedDirector] winSize];

    CGPoint pos1 = mBG1.position;
    CGPoint pos2 = mBG2.position;
    CGPoint pos3 = mBG3.position;

    pos1.y -= MM_BG_SPEED_DUR;
    pos2.y -= MM_BG_SPEED_DUR;
    pos3.y -= MM_BG_SPEED_DUR;

    if(pos1.y <=-((s.height*0.5f) ) )
    {
        pos1.y = (pos2.y + mBG2.contentSize.height)  ;
    }

    if(pos2.y <=-((s.height*0.5f) ) )
    {
        pos2.y = (pos3.y + mBG1.contentSize.height) ;
    }
    if(pos3.y <=-((s.height*0.5f) ) )
    {
        pos3.y = (pos1.y + mBG3.contentSize.height) ;
    }

    mBG1.position = pos1;
    mBG2.position = pos2;
    mBG3.position = pos3;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:43:33.580

Cocos2d 2.0 本身不支持 iPhone5 分辨率。您需要手动处理。

```
#define IS_IPHONE5 (([[UIScreen mainScreen] bounds].size.height-568)?NO:YES)

#define TEX_GAME_BG   (IS_IPHONE5) ? ( @"bg-whd.png") : ( @"bg.png")

mBG1 = [CCSprite spriteWithFile:TEX_GAME_BG]; 
```

将这些图像放在文件夹中

```
bg.png         : 480x320
bg-hd.png      : 960x640
bg-whd.png     : 1136x640
bg-ipad.png    : 1024x768
bg-ipadhd.png  : 2048x1536 
```

# css - 使用 CSS 创建自定义形状

> ID：15949730
> 
> 赞同：1
> 
> 时间：2013-04-11T13:12:52.797
> 
> 标签：css

我正在尝试使用 CSS 创建自定义形状，但我无法完全创建我想要实现的目标。形状将代表主导航上的选定项目，如下所示：

如您所见，我`<a class="selected">`使用 CSS 属性设置了元素的样式，该属性`border-radius: 40px 40px 40px 40px;`显示了与药丸外观相似的形状。

然而，我想要实现的是一个具有直的顶部和底部边缘但具有圆形左右两侧的形状，如下图所示：是否有任何 CSS 属性我可以应用来实现这一点？

![在此处输入图像描述](https://i.stack.imgur.com/GkXtC.jpg)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-11T13:30:11.180

看看下面的css：

```
div{
    border-radius: 10px / 100%;
} 
```

这种鲜为人知的斜线表示法使您能够使用椭圆边界半径，正如您在[MDN 边界半径文档](https://developer.mozilla.org/en-US/docs/CSS/border-radius)的图像中看到的那样。

使用斜线表示法，您可以像这样定义垂直和水平边界半径：

```
border-radius: [up to 4 horizontal values] / [up to four vertical values]; 
```

这意味着您可以分别为每个角定义具有不同半径的椭圆（遵循定义多个值的常规规则）：

```
 /*           horizontal values | vertical values   */
    /*              ↓ top-left     |  ↓ top-left       */
    border-radius: 5px 6px 7px 8px / 10px 11px 12px 13px;
    /*             bottom-right ↑  |    bottom-right ↑ */ 
```

如果你足够强烈地扭曲椭圆，你可以达到你的情况所需的效果。

```
div{
    background:#bada55;
    color:white;
    font-size:30px;
    font-family:arial, sans-serif;
    padding:10px 20px;
    display:inline-block;
    margin:10px; 
    border-radius: 10px / 90%;
    text-shadow:1px 1px 1px #792;
    box-shadow:inset 1px 1px 1px rgba(70,90,10,.3);
}
```

```
<div>sponsorship</div>
```

[JSFiddle](http://jsfiddle.net/Lx6jP/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T13:17:52.413

您可以在 css3 中执行此操作。此链接包含您可以使用的各种形状[http://css-tricks.com/examples/ShapesOfCSS/](http://css-tricks.com/examples/ShapesOfCSS/)。我认为你会想要使用类似于“电视屏幕”的东西

```
#tv {
  position: relative;
  width: 200px;
  height: 150px;
  margin: 20px 0;
  background: red;
  border-radius: 50% / 10%;
  color: white;
  text-align: center;
  text-indent: .1em;
}
#tv:before {
  content: '';
  position: absolute;
  top: 10%;
  bottom: 10%;
  right: -5%;
  left: -5%;
  background: inherit;
  border-radius: 5% / 50%;
} 
```

# jquery - jQuery 使用每个函数分配粘性属性

> ID：15949731
> 
> 赞同：1
> 
> 时间：2013-04-11T13:12:53.633
> 
> 标签：jquery, image, variables, global-variables, each

我正在使用 jQuery 构建产品配置页面，当用户选择相应的颜色选项时，我需要能够更改产品的颜色，在本例中是鞋子。每只鞋都有四个可由用户指定的组成部分。例如。鞋面颜色、鞋底颜色和花边颜色和拼接颜色。我有各种颜色选项的鞋子照片，可以使用标准化的文件命名约定来调用它们，例如：
black-black-black-black.jpg 和 red-black-black-black.jpg black-red-red-red .jpg等

我需要产品照片来记住以前的选择，所以如果访问者选择红色鞋面，那么如果他们选择蓝色鞋底，就会记住这一点。所以最初我们称之为全黑鞋（black-black-black-black.jpg），然后我们在选择红色鞋面时更改该图像（red-black-black-black.jpg），然后再次（red-red- black-black.jpg) 选择红色鞋底时。

我的 jQuery 缩放脚本 (cloudzoom) 使用图像属性来分配大小图像大小。所以我需要用相关文件名替换每个用户选择的这一行，并使该选择具有粘性，直到下一个选项选择。

我已经看了好几天了，如果可能的话，我真的很感激一些帮助。谢谢你。

我的代码在下面，这里有一个工作演示 - [http://www.stepto.co.uk/view/product/](http://www.stepto.co.uk/view/product/)

```
 jQuery(document).ready(function() {

    jQuery('.options ul li a').each(myFunction);

    jQuery('.options ul li a').click(function(){ 
       jQuery('.options ul li a').each(myFunction2)
    });

});

function myFunction2() {
        var embel = jQuery(this).parent().attr("class").split(' ').pop();
    jQuery(this).each(function(){  

        var target = jQuery(this).parent().parent().attr("class");      
            if(target == "optionset1"){
            var base = jQuery(this).parent().attr("class").split(' ').pop();

            }

            if(target == "optionset3"){
            var sole = jQuery(this).parent().attr("class").split(' ').pop();

            }
            if(target == "optionset4"){
            var heel = jQuery(this).parent().attr("class").split(' ').pop();

            }

            var myattributes2 = "useZoom: '#zoom1', image: 'images/small/" + base + "-" + embel + "-" + sole + "-" + heel + ".jpg', zoomImage: 'images/large/" + base + "-" + embel + "-" + sole + "-" + heel + ".jpg'";
            jQuery(this).attr({"class": "cloudzoom-gallery", "href": "#",  "data-cloudzoom" : myattributes2});

    });

}

function myFunction() {

    jQuery(this).each(function(){  

            var base = "black";
            var embel = "black";
            var sole = "black";
            var heel = "black";

            var target = jQuery(this).parent().parent().attr("class");      
            if(target == "optionset1"){
            var base = jQuery(this).parent().attr("class").split(' ').pop();

            }
            if(target == "optionset2"){
            var embel = jQuery(this).parent().attr("class").split(' ').pop();

            }
            if(target == "optionset3"){
            var sole = jQuery(this).parent().attr("class").split(' ').pop();

            }
            if(target == "optionset4"){
            var heel = jQuery(this).parent().attr("class").split(' ').pop();

            }

            var myattributes2 = "useZoom: '#zoom1', image: 'images/small/" + base + "-" + embel + "-" + sole + "-" + heel + ".jpg', zoomImage: 'images/large/" + base + "-" + embel + "-" + sole + "-" + heel + ".jpg'";
            jQuery(this).attr({"class": "cloudzoom-gallery", "href": "#",  "data-cloudzoom" : myattributes2});

    });

}

    <div class="contents" style="width:70%; float:left;">
     <div class="theshoe">
        <img class="cloudzoom" src="images/small/black-black-black-black.jpg" id="zoom1" data-cloudzoom="zoomImage: 'images/large/black-black-black-black.jpg', zoomSizeMode: 'zoom', zoomOffsetX: 0, zoomOffsetY: 0, zoomFlyOut: false, zoomPosition:'inside'" />
    </div>

    </div> 

    <div class="theoptions"  style="width:30%; float:left;">

        <div class="options">
          <h2>Upper Colour</h2>
          <ul class="optionset1">
            <li class="suedeblack black"><a href="#" class="cloudzoom-gallery">black  <img src="images/blank.png"></a></li>
            <li class="suedepurple red"><a href="#" class="cloudzoom-gallery">red  <img src="images/blank.png"></a></li>

      </ul>
<h2>Laces</h2>
          <ul class="optionset2">
            <li class="studblack black"><a href="#" class="cloudzoom-gallery">black laces <img src="images/blank.png"></a></li>
            <li class="studgrey grey"><a href="#" class="cloudzoom-gallery">white laces<img src="images/blank.png"></a></li>

          </ul>
            <h2>Sole</h2>
            <ul class="optionset3">
            <li class="soleblack black"><a href="#" class="cloudzoom-gallery">black sole <img src="images/blank.png"></a></li>
            <li class="solegrey white"><a href="#" class="cloudzoom-gallery">white sole <img src="images/blank.png"></a></li>

          </ul>
            <h2>Stitching</h2>
            <ul class="optionset4">
            <li class="heelblack black"><a href="#" class="cloudzoom-gallery">black stitch <img src="images/blank.png"></a></li>
            <li class="heelgrey white"><a href="#" class="cloudzoom-gallery">white stitch <img src="images/blank.png"></a></li>

          </ul>

         </div>

      </div> 
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T01:39:24.580

我认为自己解决问题的部分问题是模式的混乱结构（我的意思是，如果代码组织得更好，你会发现问题对你来说更清楚了）。但是，无论这是否属实，这里是我将如何做到这一点的基础知识。

```
 // First a function that will set the image according to the required specs
 var myFunction=function(args){
    var defaults={
           base:'black',
           sole:'black',
           stitch:'black',
           laces:'black',
           imgPath:'images/large/',
           img:function(){
              return this.base + '-' + this.sole + '-' + this.stitch + '-' + this.laces + '.jpg'}
          }
     var options=$.extend({},defaults,args);
     //The above creates a new options object without overwriting the defaults

     $('#zoom1').attr('src',options.img());
    // I will explain this next line in a moment
     if(typeof $('#contents').data('base')==="undefined"){
               $('#contents').data({
                                 base:options.base,
                                 sole:options.sole,
                                 stitch:options.stitch,
                                 laces:options.laces
                                 })
      } 
```

有几种方法可以完成下一个部分。为了简单起见，我将数据分配给#contents 元素。您可以将此数据分配给适合您目的的任何元素。分配此数据的目的是为了有一个中心位置来组合选项，以便每个点击事件都可以引用。您也可以将其存储在全局变量或 LocalStorage 中。为此，我们将在页面加载时将默认值分配给#contents -> 这就是函数 myFunction 的最后一行所做的。如果未设置数据，则设置它。然后页面加载事件如下：

```
$(document).bind('load',myFunction}); 
```

对于每个 $('li a')，我们给它们一个 data-component 和 data-color 的数据属性。Data-component 将引用它们所引用的组件类型，即 base、sole 等，然后 color 将引用您希望设置的颜色。

然后对于每个链接：

```
$('.option li a').on('click',function(e){
      var component=$(this).data('component'),
          color=$(this).data('color');
       // This next line sets the contents data-component referenced to the right color,
       // for example: red laces

       $('#contents').data(component,color);

         var base=$('#contents').data('base'),
             sole=$('#contents').data('sole'),
             stitch=$('#contents').data('stitch'),
             laces=$('#contents').data('laces');
         return myFunction({"base":base,"stitch":stitch,"laces":laces});
    }) 
```

即使这个例子比它需要的更复杂，但它演示了利用 DOM 数据的功能。随着您对代码的使用越来越多，并且与您正在尝试做的事情有更深的关系，您可能需要修改代码以满足您的需要。您可以称其为伪模板。让我知道是否有任何不清楚的地方。

# spring - 多 Spring Security 3.1 中具有相同身份验证管理器的标签

> ID：15949734
> 
> 赞同：2
> 
> 时间：2013-04-11T13:12:57.227
> 
> 标签：spring, spring-security

我正在使用 Spring Security 3.1.2 这个版本允许多个“http”标签。

我有一个应用程序，它有两个单独的登录页面，一个用于用户，另一个用于管理员。他们都将使用相同的身份验证管理器。

我以以下方式构建了我的 spring-security.xml

```
<sec:http pattern="/loginForm.jsp" security="none"/>
            <sec:http pattern="/loginForm2.jsp" security="none"/>
            <sec:http auto-config="true">
                <sec:intercept-url pattern="/login1*" access="ROLE_USER" />
                <sec:form-login login-page="/loginForm.jsp" default-target-url="/login1"
                    authentication-failure-url="/loginForm.jsp?login_error=1" />
                <sec:logout logout-success-url="/loginForm.jsp" />
            </sec:http>

            <sec:http auto-config="true">
                <sec:intercept-url pattern="/login2*" access="ROLE_ADMIN" />
                <sec:form-login login-page="/loginForm2.jsp" default-target-url="/login2"
                    authentication-failure-url="/loginForm2.jsp?login_error=1" />
                <sec:logout logout-success-url="/loginForm2.jsp" />
            </sec:http>

<sec:authentication-manager>
               <sec:authentication-provider>
                   <sec:user-service>
                         <sec:user name="qwertyui" password="123456" authorities="ROLE_USER" />
                         <sec:user name="asdfghjk" password="123456" authorities="ROLE_USER" />
                   </sec:user-service>
               </sec:authentication-provider>

            </sec:authentication-manager> 
```

但我收到此错误“在过滤器链中的其他模式之前定义了通用匹配模式（'/**'），导致它们被忽略。请检查您的命名空间或 FilterChainProxy bean 配置中的排序”

如果我省略任何一个标签，它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-01T20:02:13.467

如果您没有在 http 元素上设置模式属性，那么您的 http 节将默认为 /**，这是一个通用匹配模式。

我自己犯了这个错误，因为我认为它只考虑了“intercept-url”元素，而我的intercept-url 元素都没有定义通用匹配模式。

确保所有 http 元素都定义了模式属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-16T13:17:07.577

http 标签创建安全过滤器链，默认为 /**，因为您有两个具有相同默认模式的，因此错误，有道理，spring 将如何构建过滤器链。它的副本。

# java - 将字符串写入文件中的特定位置

> ID：15949737
> 
> 赞同：0
> 
> 时间：2013-04-11T13:13:11.957
> 
> 标签：java, io, bufferedwriter

我正在使用`BufferedWriter`将字符串写入这样的文件：

```
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;

public class Test {

    public static void main(String[] args) throws IOException {
       String myname = "JOHN DOE MAXWELL";
       String myotherName = "MELCHIZEDEK NEBUCHARDINEZZAR";
       String mylocation = "SOUTH EAST";
       String myotherlocation = "SOUTH WEST";
       File f = new File("MyFile.txt");
       BufferedWriter bw  = new BufferedWriter(new FileWriter(f));
       bw.write(myname + "                       " + mylocation);
       bw.newLine();
       bw.write(myothername + "                  " + myotherlocation);
       bw.close();
    }
} 
```

我需要这样写`mylocation`，无论字符串的长度如何，都不会影响`myname`的开始位置。`mylocation`请协助。

我的输出应该是：

```
JOHN DOE MAXWELL          SOUTH EAST
MELCHIZEDEK NEBUCHARDI    SOUTH WEST 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T13:18:44.197

你可以做

```
bw.write(String.format("%-20s%s%n", myName, myLocation)); 
```

您可以使用 PrintWriter 来使用 printf() 两者兼而有之。

例如使用 PrintWriter

```
pw.printf("%-" + myNameWidth + "s%s%n", myName, myLocation); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T13:19:02.037

> 这样无论字符串 myname 的长度如何，mylocation 的开始位置都不会受到影响

我能想到的唯一情况是每个人都在一个新行中。

您必须指定最大允许长度，在此之后不再保证此顺序，格式化实际上应该发生在读取文件时，此时您可以确定 myname 的最长变量并根据它格式化输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T13:20:29.850

尝试这个

```
bw.write(myname + "                             ".substring(0, 30) + " " + mylocation); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T13:25:01.940

使用[谷歌番石榴](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Strings.html#padEnd%28java.lang.String,%20int,%20char%29)：

```
Strings.padEnd("JOHN DOE MAXWELL", 26, ' ').length() 
```

字符串的长度始终为 26 个字符。

# multithreading - 尝试多线程程序。C++/CLI

> ID：15949738
> 
> 赞同：1
> 
> 时间：2013-04-11T13:13:13.507
> 
> 标签：multithreading, c++-cli, createthread

嘿，我正在尝试在 c++/cli 中对我的程序进行多线程处理，但是在创建我使用的代码的线程时遇到了问题：

```
private: Void startThread() {
    MoveProj.Velocity = Variables.Velocity;
    MoveProj.ProjectilePos = Projectile1.ProjectilePos;
    Thread^ MotionThread1 = gcnew Thread(gcnew ParameterizedThreadStart(MoveProj, MotionThread::MoveProjectile));
    Thread^ MainThread = gcnew Thread(gcnew ThreadStart());
} 
```

但我得到了错误

```
Error   44  error C3350: 'System::Threading::ParameterizedThreadStart' : a delegate constructor expects 2 argument(s)   c:\users\gaz\documents\visual studio 2012\projects\projectilemotion\projectilemotion\Simulation.h   344
Error   89  error C3350: 'System::Threading::ParameterizedThreadStart' : a delegate constructor expects 2 argument(s)   c:\users\gaz\documents\visual studio 2012\projects\projectilemotion\projectilemotion\Simulation.h   344
Error   45  error C3350: 'System::Threading::ThreadStart' : a delegate constructor expects 2 argument(s)    c:\users\gaz\documents\visual studio 2012\projects\projectilemotion\projectilemotion\Simulation.h   345
Error   90  error C3350: 'System::Threading::ThreadStart' : a delegate constructor expects 2 argument(s)    c:\users\gaz\documents\visual studio 2012\projects\projectilemotion\projectilemotion\Simulation.h   345
Error   43  error C3867: 'MotionThread::MoveProjectile': function call missing argument list; use '&MotionThread::MoveProjectile' to create a pointer to member c:\users\gaz\documents\visual studio 2012\projects\projectilemotion\projectilemotion\Simulation.h   344
Error   88  error C3867: 'MotionThread::MoveProjectile': function call missing argument list; use '&MotionThread::MoveProjectile' to create a pointer to member c:\users\gaz\documents\visual studio 2012\projects\projectilemotion\projectilemotion\Simulation.h   344 
```

对此的任何帮助都会有很大帮助，因为它对我的大学（我认为是美国的英国大四）计算项目和我的导师希望它在相对较快的时间内完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T18:05:10.427

错误消息告诉您该怎么做：

```
函数调用缺少参数列表；
    使用 '&MotionThread::MoveProjectile' 创建指向成员的指针
         ^

```

因此，这是正确的语法：

```
Thread^ MotionThread1 = gcnew Thread(
    gcnew ParameterizedThreadStart(MoveProj, &MotionThread::MoveProjectile));
                                             ^ 
```

对于另一个，您当前正在尝试创建一个委托，但没有告诉它委托应该指向什么方法。尝试这样的事情：

```
Thread^ MainThread = gcnew Thread(gcnew ThreadStart(this, &MyClass::MainMethod));
                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^ 
```

* * *

## 编辑

我没有通读你的完整代码。如果您希望人们花时间帮助您，那么您需要花一些时间并花精力将其提炼成所需的东西。

但是，我会评论您遇到的错误。

```
错误 C2440：“正在初始化”：
    无法从“MotionThread”转换为“MotionThread ^”

```

您在某处有一个引用类型的变量，但您使用它时没有`^`. 这是有效的 C++/CLI，但没有一个托管 API 可以轻松使用它。将成员切换为 a`^`并使用`gcnew`。

```
错误 C3352：“浮动 Allformvariables::CalcCurrentVelocity(System::Object ^)”：
    指定的函数与委托类型“void (void)”不匹配

```

正如错误消息所说：您正在尝试构造一个不带任何参数并返回 void 的委托，而您传递的方法与该委托不匹配。修复方法或切换到不同的委托类型。

```
错误 C3754：委托构造函数：成员函数“MotionThread::MoveProjectile”
    不能在“MotionThread”类型的实例上调用

```

当您添加我上面提到的缺失时，我感觉这个会消失`^`。

# html - 全屏背景

> ID：15949750
> 
> 赞同：0
> 
> 时间：2013-04-11T13:13:39.283
> 
> 标签：html, css

我希望我的背景图像完全填充在浏览器窗口中。我试过css

```
body {background:url(bg.jpg) fixed no-repeat 100%} 
```

但它没有覆盖整个屏幕。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T13:16:10.657

```
css: 
background-size: cover; 
```

我想这就是你要找的东西。对于交叉 borswer 支持，试试这个：CSS：

```
 html { 
  background: url(images/bg.jpg) no-repeat center center fixed; 
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
} 
```

来源： [css技巧整页背景](http://css-tricks.com/perfect-full-page-background-image/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:15:06.483

我使用 backstretch.js 使背景适合窗口大小。显然，它是 jquery，但根据我的经验，它非常可靠。

[http://srobbin.com/jquery-plugins/backstretch/](http://srobbin.com/jquery-plugins/backstretch/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T13:15:54.770

为 img 标签和以下格式创建一个 id

```
#background {
position: absolute;
left: 0%;
top: 0%;
width: 100%;
height: 100%;
z-index: 1;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T13:16:09.350

CSS：

```
background: url(yourImage) no-repeat center center fixed;
background-size: cover; 
```

这固定（修复）图片并拉伸它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T13:28:25.170

如果你想跨浏览器包括 IE 试试这个方法：

```
 theWindow.resize(function() {
            resizeBg();
        }).trigger("resize"); 
```

[http://jsfiddle.net/Riskbreaker/A5ZNy/](http://jsfiddle.net/Riskbreaker/A5ZNy/)

csstricks 中也提到了这一点：

[http://css-tricks.com/examples/FullPageBackgroundImage/jquery.php](http://css-tricks.com/examples/FullPageBackgroundImage/jquery.php)

# php - Laravel 关系问题

> ID：15949757
> 
> 赞同：2
> 
> 时间：2013-04-11T13:14:19.463
> 
> 标签：php, mysql, laravel, eloquent, laravel-3

我有 4 张桌子：

![结构体](https://i.stack.imgur.com/CTIpA.jpg)

我的人际关系应该是这样的：

商品只能有一种尺寸、颜色和类别。

这应该有效，但实际上并非如此。生成的查询返回错误的结果。

这是我的模型文件：

```
<?php

class Shop_Item extends Eloquent
{
    public static $table = 'items';
    public static $timestamps = false;

    public function scategory() {
        return $this->has_one('Shop_Category','id');
    }

    public function ssize() {
        return $this->has_one('Shop_Size','id');
    }

    public function scolor() {
        return $this->has_one('Shop_Color','id');
    }
} 
```

其余表的其余模型文件相同（表名和模型名除外）。

```
<?php
class Shop_Category extends Eloquent
{
    public static $table = 'item_categories';
    public static $timestamps = false;
} 
```

因此，当我尝试访问额外的值（大小-> 名称、颜色-> 名称、类别-> 名称）时，我得到了错误的结果。

我的数据库中有两条测试记录：项目 1 和项目 2，颜色、大小和类别不同。项目 1 为蓝色，大小为 M，项目 2 为绿色，大小为 XL，但在返回的查询中没有。这告诉我，项目 2 是红色的，大小为 S。

控制器：

```
<?php

class Admin_Shop_Controller extends Base_Controller {

    public function action_index() {

        $items = Shop_item::order_by('name')->paginate(10,array('id','name','price','sex','visible','color','size','category'));
        return View::make('admin.shop.index')->with('items', $items);
    } 
```

看法：

```
@forelse($items->results as $i)
{{ $i->name }}
{{ $i->price }}
{{ $i->sex }}
{{ $i->scategory->name }}
{{ $i->scolor->name }}
{{ $i->ssize->name }}

<a href = "{{ URL::to('admin/shop/edit/'.$i->id) }}">Edit</a>
<a href = "#">Delete</a>

@empty
    There are no items in the shop.
@endforelse 
```

生成的查询：

```
0.23ms  
SELECT COUNT(`id`) AS `aggregate` FROM `items`
0.28ms  
SELECT `id`, `name`, `price`, `sex`, `visible`, `color`, `size`, `category` FROM `items` ORDER BY `name` ASC LIMIT 10 OFFSET 0
0.25ms  
SELECT * FROM `item_categories` WHERE `id` IN ('1', '2')
0.21ms  
SELECT * FROM `item_sizes` WHERE `id` IN ('1', '2')
0.36ms  
SELECT * FROM `item_colors` WHERE `id` IN ('1', '2') 
```

请注意，如果我像这样从另一个表中访问这些值，则在视图中：

```
{{ Shop_Color::find($i->color)->name }} 
```

它让我得到了正确的结果，但我真的不想因此查询数据库 n+3 次。任何建议我做错了什么？

**编辑：** *仍然没有运气。:( 我已经完成了您列出的更改，并对其进行了试验，但这仍然无法正常工作。当前错误是：*

```
SQLSTATE[42S22]: Column not found: 1054 Unknown column 'id' in 'where clause'
SQL: SELECT * FROM `item_colors` WHERE `id` IN (?)

Bindings: array (
  0 => 0,
) 
```

*我不知道它为什么要查找 id，我已经更改了对子表的所有引用并适当地重命名了列。:(*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:27:00.680

查询数！== 性能。在您的情况下，您正在执行近乎原子的查询（`where id in`所有都已完成与主索引，这将使它们快速 - 如果您排除返回结果处理时间，则与 JOIN 一样快）。如果你仍然想解决 n+1 查询问题，Eloquent 有一个解决方案：急切加载。

而不是这个：

```
Shop_item::order_by('name') 
```

用这个：

```
Shop_item::with(array("scategory", "ssize", "scolor"))->order_by('name') 
```

通过使用它，您应该只看到一个查询。此功能的文档位于： http: [//laravel.com/docs/database/eloquent#eager](http://laravel.com/docs/database/eloquent#eager)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T13:28:44.390

这里发生了很多事情。

1.  我会命名您的参考列`thing_id`......所以这是`color_id`,`size_id`和`category_id`. 这将允许您设置名为“颜色”、“尺寸”和“类别”的关系，而不是“东西”。

2.  你需要`belongs_to()`而不是`has_one()`. Laravel 假设 ID 是 like `thing_id`，所以如果你已经更新为上面的 1 ，那么你可以更新你的引用，比如`$this->belongs_to('Shop_Size')`。如果没有，那么您应该在此处使用参考列，例如`$this->belongs_to('Shop_Size', 'size')`.

3.  当您使用 Eloquent 模型时，最好不要限制列 - 您的模型中可能有依赖于它们都存在的逻辑。

4.  您可以使用预先加载来改进查询，但 Eloquent 的工作方式仍然需要每个关系的查询。看看这条线`action_index()`

    ```
    $items = Shop_Item::with(array('color', 'size', 'category'))
                      ->order_by('name')->paginate(10); 
    ```

在完成上述所有编辑之后，您将能够在您的视图中编写这样的代码......

```
@forelse ($items->results as $item)

    <p>Color: {{ $item->color->name }}</p>

@else
    <p class="no-results">There are no items in the shop.</p>
@endforelse 
```

大部分内容都在 Eloquent 文档中进行了介绍，尤其是[Relationships](http://laravel.com/docs/database/eloquent#relationships)和[Eager Loading](http://laravel.com/docs/database/eloquent#eager)。

# svn - 如何找到 svn 存储库的位置？

> ID：15949759
> 
> 赞同：8
> 
> 时间：2013-04-11T13:14:21.140
> 
> 标签：svn, working-copy, svn-repository

我的“本地”目录中有所有源文件。我分别从存储库下载`svn up`和`svn ci`上传代码。

现在我意识到存储库中有一个目录，我没有为其制作本地副本。所以，我需要做两件事：

1.  找出存储库的位置（我很确定它在文件系统中的某个位置，而不是 URL）。
2.  我需要创建此目录的本地副本。

如何做呢？目前我对第一步更感兴趣。我需要知道存储库的位置，因为我真的不知道我需要复制的子目录的名称是什么（但如果我看到我可能会猜到的名称）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-11T15:37:28.553

`svn info`在存储库中并检查“存储库根”字​​符串

# motorola - SCAN_SDT_UNKNOWN - 摩托罗拉 OPOS 扫描仪

> ID：15949760
> 
> 赞同：0
> 
> 时间：2013-04-11T13:14:22.917
> 
> 标签：motorola, opos

我的扫描仪集成收到一个奇怪的错误。我在我的程序中使用了 OPOS 扫描仪。当程序关闭时，我禁用、释放和关闭设备，但在我的程序运行后没有其他应用程序可以使用它。此外，如果我重新启动，任何应用程序都无法使用它。甚至我的应用程序都不会导致问题。我确实发现，如果我不认领该设备，问题就不会发生。我目前正在尝试获取 DLL 的新副本，以防发布方法以某种方式损坏？还有其他想法吗？

```
 public bool InitBarcode(bool overrideLGBarcode)
    {
        Util.LogMessage("Initializing barcode scanner!");
        if (_barcodeScanner == null)
        {
            Util.LogMessage("Barcode scanner was null. instantiating a new one");
            _barcodeScanner = new OPOSScanner();
            _barcodeScanner.AutoDisable = true;
            _barcodeScanner.DataEvent += BarcodeDataEventHandler;
            Util.LogMessage("Added event handler");
        }
        else
        {
            Util.LogMessage("Barcode scanner was not null");
        }

        if (_barcodeScanner.Open("STI_USBSCANNER") != 0)
        {
            Util.LogMessage("Barcode scanner \"STI_USBSCANNER\" could not be opened!");
            return false;
        }
        else
        {
            Util.LogMessage("STI_USBSCANNER was opened");
        }

        int result = _barcodeScanner.ClaimDevice(-1);
        Util.LogMessage("Claiming barcode scanner returned result: " + result);

        _barcodeScanner.DecodeData = true;
        _barcodeScanner.DeviceEnabled = true;
        _barcodeScanner.DataEventEnabled = true;

        return true;
    }

    public void CloseBarcode()
    {
        Util.LogMessage("Disabling, Releasing and Closing the barcode scanner!");
        _barcodeScanner.DataEvent -= BarcodeDataEventHandler;
        Util.LogMessage("Removed event handler");
        _barcodeScanner.AutoDisable = false;
        _barcodeScanner.DecodeData = false;
        _barcodeScanner.DataEventEnabled = false;
        _barcodeScanner.DeviceEnabled = false;

         if (_barcodeScanner.DeviceEnabled != false)
         {
             Util.LogMessage("Barcode scanner could not be disabled!");
         }
         else
         {
             Util.LogMessage("Barcode scanner was disabled!");
         }

        int result = _barcodeScanner.ReleaseDevice();
        Util.LogMessage("ReleseDevice() yielded result of: " + result);
        if (result != 0)
        {
            Util.LogMessage("Barcode scanner could not be released!");
        }
        else
        {
            Util.LogMessage("Barcode scanner was released!");
        }

        if (_barcodeScanner.Close() != 0)
        {
            Util.LogMessage("Barcode scanner could not be closed!");
        }
        else
        {
            Util.LogMessage("Barcode scanner was closed!");
        }
         _barcodeScanner = null;
    } 
```

# python - setuptools/distutils 中用于安装后验证的挂钩

> ID：15949761
> 
> 赞同：2
> 
> 时间：2013-04-11T13:14:27.223
> 
> 标签：python, distutils, setup.py

我有一个包，用于`swig`生成外部库的一些 C++ 接口，特别是`udunits-2`. 在某些系统上，即 CentOS，包会成功安装，但是当 python 尝试加载库时，会引发导入错误。

`ImportError: /usr/local/lib/libudunits2.so.0: undefined symbol:`

我通过重新安装解决了系统上的问题，`udunits-2`但是发现库在部署到系统后失败真的很乏味。

`setup`是否有约定或机制在安装软件包后尝试简单地测试导入分辨率？最终，我只需要尝试导入模块以查看导入是否成功，但真正好的是运行快速测试以确保所有类都可以实例化。

任何文档或线索都会很棒！

# angularjs - 我如何在 angular.js 中保持价值？

> ID：15949762
> 
> 赞同：1
> 
> 时间：2013-04-11T13:14:32.433
> 
> 标签：angularjs

**除非用户退出系统，否则我如何在 angularjs 中保留用户详细信息？**

我的标头使用一个名为 user 的变量，因此当用户成功登录时，我从 REST 响应设置用户属性。一旦设置用户，然后使用 ng:show 和 $scope.watch 我更改部分标头并显示欢迎'用户名'。当用户再次刷新页面时出现问题，在这种情况下，用户被重置并且用户看到登录页面标题。我该如何更正它？除非用户退出系统，否则我如何保持用户值？我应该设置用户rootScope 还是有其他更好的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:45:23.053

这是一个开放式问题，要真正回答它，我需要知道您的后端是什么样的以及您的安全要求是什么。

我可以看到两种前进的方式：

(1) 如果可以依赖和信任 cookie 来确保安全，您可以使用来自 cookie 的数据登录用户，就像您通过 REST 响应登录它们一样。很酷的一点是，对于用户来说，这将是即时的（下一个选项不会是）。

(2) 有一个单独的控制器来处理始终向服务器请求用户数据（登录或未登录）的标头。[SEN](http://store.sonyentertainmentnetwork.com)做了这样的事情（顺便说一句，它让我发疯）。我不知道您是否有 SEN 帐户，但如果有，您可以登录/注销并尝试一下。您会看到，当您最初点击页面时，您会看到一个加载屏幕，但即使在加载之后，标题甚至还有一个小的“正在登录...”加载小部件本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T11:05:23.803

您可以使用本地存储（键值对 HTML5 存储）来存储信息并在页面加载时检索它。如果您不想自己编写 javascript，有一个非常简单的库，称为[Lawnchair](http://brian.io/lawnchair/)。否则谷歌 html5 本地存储教程。

# c# - URL 中的日期时间错误

> ID：15949773
> 
> 赞同：0
> 
> 时间：2013-04-11T13:15:04.720
> 
> 标签：c#, asp.net

我正在开发一个应用程序，其中我在`inquiry.aspx`页面上传递一个 URL，该 URL 将向用户的电子邮件地址发送一条消息。

该网址如下所示：

```
mail.Body += string.Format("<a href=\"http://www.abc.co.in/Download.aspx?period="
                   + DateTime.Now.ToString("dd-MM-yyyy hh mm")
                   + "&ProductName=" + productName + "\">Demo Download</a>"); 
```

现在我将它检索到页面的页面加载事件`download.aspx`。我的代码是：

```
string PName = Request.QueryString["ProductName"] as string;
string myDate = Request.QueryString["period"] as string;

DateTime dt1 = Convert.ToDateTime(myDate);
DateTime dt2 = DateTime.Now;
int day1, day2;
day1 = dt1.Day;
day2 = dt2.Day;
TimeSpan variable = dt2 - dt1;
if (day1!=day2)
{
    //Response.Write("Download time is expired now");
    lblmsg.Visible = true;
    lblmsg.Text = "Download time is expired now";
}
else
{
    lblmsg.Visible = true;
    lblmsg.Text = "U can Still Download";
} 
```

我收到错误：

> 字符串未被识别为有效的 DateTime

用户从他的电子邮件 ID 中单击该链接后，我的输出 URL 如下所示：

```
http://www.abc.co.in/Download.aspx?period=11-04-2013%2006%2036&ProductName=Otja 
```

这里的日期时间用于条件，即在同一天之后意味着今天将邮件发送给用户，并且今天只有他可以下载。明天以后，它会显示您现在无法下载软件的消息。这就是在 URL 上传递日期时间的原因，但我遇到了错误。请有人帮助我，这是非常需要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T15:03:11.490

由于您`DateTime.ToString("dd-MM-yyyy hh mm")`在创建 URL 时使用，因此在解析时应使用相同的格式字符串：

```
DateTime dt1 = DateTime.ParseExact(myDate, "dd-MM-yyyy hh mm", System.Globalization.CultureInfo.InvariantCulture); 
```

最佳实践要求您在创建 URL 时也传递文化： `DateTime.ToString("dd-MM-yyyy hh mm", CultureInfo.InvariantCulture)`.

顺便说一句，您不应该在代码示例中传递 URL 中的日期。相反，您会将日期与令牌一起存储在数据库中，然后传递该令牌。或者，您可以加密日期。问题是收件人能够更改日期，从而覆盖您对下载可用性的检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:33:07.923

您可以尝试几件事。

首先将您的日期格式更改为通用日期格式，而不是区域。假设您使用的是 .net Web 应用程序，我已经看到客户端执行与服务器不同的问题。

```
yyyy-MM-dd 
```

其次，您的日期时间格式字符串不太正确，即小时和分钟之间缺少冒号。此外，如果您尝试使用上述格式，则必须指定您的 TT 或 24 小时。在说结束时，您的格式如下所示

```
yyyy-MM-dd hh:mm tt 
```

或者

```
yyyy-MM-dd HH:mm 
```

除了上面你可能想使用 date -compare

```
DateTime dt1 = Convert.ToDateTime(myDate).Date;
DateTime dt2 = DateTime.Now.Date;
if(dt1 != dt2)
{
//...
}
else
{
//...
} 
```

# java - Android 连接到 http 服务器：即使我声明了我的在线服务器，Eclipse 也会抛出关于 localhost 的异常？

> ID：15949776
> 
> 赞同：1
> 
> 时间：2013-04-11T13:15:06.620
> 
> 标签：java, android, mysql, url, connection

我正在eclipse中的一个android项目上工作，我有以下问题。

为什么下面的代码会抛出异常

```
W/System.err(5354): java.net.ConnectException: failed to connect to localhost/127.0.0.1 (port 80): connect failed: ECONNREFUSED (Connection refused) 
```

即使我的变量 AUTHENTICATION_SERVER_ADDRESS 不是 localhost 而是在线服务器地址，例如[http://myserver.com/folder/](http://myserver.com/folder/)。

应该连接到我的服务器的代码示例：

```
url = new URL(AUTHENTICATION_SERVER_ADDRESS);
HttpURLConnection connection;
connection = (HttpURLConnection) url.openConnection();
connection.setDoOutput(true);

PrintWriter out = new PrintWriter(connection.getOutputStream()); 
```

异常被抛出`PrintWriter`。我该如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:18:47.697

Dnt 使用 localhost，使用 IP 地址。

例如`String URL="http://127.0.0.1(thats your ip):1802(thats your port)/.."`

# android - 我们如何测量物体和安卓手机摄像头之间的距离

> ID：15949777
> 
> 赞同：11
> 
> 时间：2013-04-11T13:15:07.097
> 
> 标签：android, camera, accelerometer, android-sensors

我想计算相机和识别物体之间的距离。为此我尝试了很多方法，我尝试使用加速度计找到物体和相机之间的角度，然后使用

d = h * tan a

h 是距底座的高度，通常为 1.4

我试图通过使用获取方向方法来计算角度。请让我知道我在哪里做错了。我一直在努力满足这个要求已经超过 2 天了。我们研究了 Android Store 上提供的各种相机应用程序，并试图了解它们的功能，但没有任何成果。

```
 mSensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);
            accSensor = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
            magnetSensor = mSensorManager
                    .getDefaultSensor(Sensor.TYPE_MAGNETIC_FIELD);
    @Override
    public void onAccuracyChanged(Sensor sensor, int accuracy) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onSensorChanged(SensorEvent event) {
        // TODO Auto-generated method stub
        if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER)
            gravity = event.values;
        if (event.sensor.getType() == Sensor.TYPE_MAGNETIC_FIELD)
            geoMagnetic = event.values;
        if (gravity != null && geoMagnetic != null) {
            float R[] = new float[9];
            float I[] = new float[9];
            boolean success = SensorManager.getRotationMatrix(R, I, gravity,
                    geoMagnetic);
            if (success) {
                /* Orientation has azimuth, pitch and roll */
                float orientation[] = new float[3];
                //SensorManager.remapCoordinateSystem(R, 1, 3, orientation);
                SensorManager.getOrientation(R, orientation);
                azimut = 57.29578F * orientation[0];
                pitch = 57.29578F * orientation[1];
                roll = 57.29578F * orientation[2];
            }
        }
    }

        captureButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                // get an image from the camera

                double d = (Math.tan(Math.toRadians(Math.abs(pitch))) * sensorHeight);
                Toast.makeText(
                        getApplicationContext(),
                        "Distance = "
                                + String.valueOf(d)
                                        + "m  Angle = "
                                        + String.valueOf(Math.toRadians(Math.abs(pitch))),
                        Toast.LENGTH_LONG).show();

            }
        });

protected void onResume() {
        super.onResume();
        mSensorManager.registerListener(this, accSensor,
                SensorManager.SENSOR_DELAY_NORMAL);
        mSensorManager.registerListener(this, magnetSensor,
                SensorManager.SENSOR_DELAY_NORMAL);
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-20T17:04:35.007

您的 getRotationMatrix 可能返回错误！您应该将这些值复制到您自己的向量中，以免它们混淆！使用 clone() 方法来做到这一点！

```
 if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER)
        gravity = event.values.clone();
    if (event.sensor.getType() == Sensor.TYPE_MAGNETIC_FIELD)
        geoMagnetic = event.values.clone(); 
```

使用您的代码加上此更改，我能够获得方位角/俯仰角/滚动值，如果没有此更改，成功标志将返回 false：

```
Log.d("a", "orientation values: " + azimut + " / " + pitch + " / " + roll);
05-21 16:07:55.743: D/a(29429): orientation values: 77.71578 / 43.352722 / -152.39603
05-21 16:07:55.883: D/a(29429): orientation values: 175.26134 / 23.031355 / -148.72844
05-21 16:07:56.793: D/a(29429): orientation values: -146.3089 / 4.1098075 / -14.46417 
```

如果您以纵向模式握住手机，则应使用 PITCH 值，如果您以横向模式握住手机，则应使用 ROLL 值。

如果您将手机保持在 1.4 的高度，那么您将拥有：

```
float dist = Math.abs((float) (1.4f * Math.tan(pitch * Math.PI / 180))); 
```

请注意，您应该在 Math.tan 函数上使用 RADIANS 而不是 DEGREES。

我在这里测试过，这些值似乎是有效的！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-30T06:43:24.423

最终代码是

```
mSensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);
            accSensor = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
            magnetSensor = mSensorManager
                    .getDefaultSensor(Sensor.TYPE_MAGNETIC_FIELD);
    @Override
    public void onAccuracyChanged(Sensor sensor, int accuracy) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onSensorChanged(SensorEvent event) {
        // TODO Auto-generated method stub
        if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER)
            gravity = event.values;
        if (event.sensor.getType() == Sensor.TYPE_MAGNETIC_FIELD)
            geoMagnetic = event.values;
        if (gravity != null && geoMagnetic != null) {
            float R[] = new float[9];
            float I[] = new float[9];
            boolean success = SensorManager.getRotationMatrix(R, I, gravity,
                    geoMagnetic);
            if (success) {
                /* Orientation has azimuth, pitch and roll */
                float orientation[] = new float[3];
                //SensorManager.remapCoordinateSystem(R, 1, 3, orientation);
                SensorManager.getOrientation(R, orientation);
                azimut = 57.29578F * orientation[0];
                pitch = 57.29578F * orientation[1];
                roll = 57.29578F * orientation[2];
            }
        }
    }

        captureButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                // get an image from the camera

                float d = Math.abs((float) (1.4f * Math.tan(pitch * Math.PI / 180)));
                Toast.makeText(
                        getApplicationContext(),
                        "Distance = "
                                + String.valueOf(d)
                                        + "m  Angle = "
                                        + String.valueOf(Math.toRadians(Math.abs(pitch))),
                        Toast.LENGTH_LONG).show();

            }
        });

protected void onResume() {
        super.onResume();
        mSensorManager.registerListener(this, accSensor,
                SensorManager.SENSOR_DELAY_NORMAL);
        mSensorManager.registerListener(this, magnetSensor,
                SensorManager.SENSOR_DELAY_NORMAL);
    } 
```

# asp.net-mvc - Automapper在双重失败？财产

> ID：15949778
> 
> 赞同：1
> 
> 时间：2013-04-11T13:15:09.230
> 
> 标签：asp.net-mvc, asp.net-mvc-4, automapper, automapper-2

我正在使用 AutoMapper 将域对象映射到控制器中的 ViewModel 对象。一切正常，直到我**尝试添加双倍？**特性。我已经开始收到以下错误：

```
Missing type map configuration or unsupported mapping.

Mapping types:
Address -> AddressModel
Domain.Address -> Web.Models.AddressModel

Destination path:
AccountAddressModel.Address.Address

Source value:
Domain.Address 
```

我的 Address 类和 AddressModel 类都有两个属性，称为经度和纬度。这些属性（在两个类中）被定义为 double?。如果我注释掉这些属性，一切正常。如果我将所有这些属性简单地加倍，那么一切正常。只是双倍？这导致了问题。

我正在使用通过 NuGet 下载的**AutoMapper 2.2.1 。**

我在其他帖子中读到，这个 nullables 问题应该得到解决。这让我相信我可能会做一些不同的事情，所以我将发布我的代码，看看是否有人能看到可能是问题的东西：

**领域模型**

```
public class AccountAddress 
{
    public int Id { get; set; }
    public int AccountId { get; set; }
    public int AddressId { get; set; }
    public Address Address { get; set; }
    ...
}

public class Address : IUserTrackingEntity
{
    public int Id { get; set; }
    public string Addressee { get; set; }
    public string Street1 { get; set; }
    public string Street2 { get; set; }
    ...
    public double? Longitude { get; set; }
    public double? Latitutde { get; set; }
} 
```

**查看模型**

```
public class AccountAddressEditModel
{
    public string AccountName { get; set; }
    public AccountAddressModel Address { get; set; }
    public IList<Country> CountriesList { get; set; }
    ...
}

public class AccountAddressModel
{
    public AccountAddressModel()
    {
        Address = new AddressModel();
    }
    public int AccountId { get; set; }
    public int AddressId { get; set; }
    public int Id { get; set; }
    public AddressModel Address { get; set; }
}

public class AddressModel
{
    public int Id { get; set; }
    public string Addressee { get; set; }
    [Required(ErrorMessage="A street address is required.")]
    public string Street1 { get; set; }
    public string Street2 { get; set; }
    ...
    public double? Longitude { get; set; }
    public double? Latitude { get; set; }
} 
```

**在我的控制器中映射代码**

```
//Get an AccountAddress
address = _context.AccountAddresses.SingleOrDefault(ad => ad.Id == 12345);

model = new AccountAddressEditModel();

Mapper.CreateMap<AccountAddress, AccountAddressModel>();
Mapper.CreateMap<AccountAddress, AddressModel>();

Mapper.Map(address, model.AccountAddress); 
```

有没有其他人经历过这种情况或找到解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:20:18.823

线

```
 Mapper.CreateMap<AccountAddress, AddressModel>(); 
```

应该改为

```
Mapper.CreateMap<Address, AddressModel>(); 
```

这是因为您将类映射`Address`到`AddressModel`类。

# postgresql - PostgreSQL 正在使用 Puppet 与 SQL_ASCII 一起安装

> ID：15949783
> 
> 赞同：3
> 
> 时间：2013-04-11T13:15:15.020
> 
> 标签：postgresql, ubuntu, puppet

我正在尝试构建使用 Puppet 配置的 Vagrant 盒子。

[我使用来自http://files.vagrantup.com/precise64.box](http://files.vagrantup.com/precise64.box)的Ubuntu 12.04 LTS 盒子。

我还使用[http://forge.puppetlabs.com/puppetlabs/postgresql](http://forge.puppetlabs.com/puppetlabs/postgresql)模块来安装具有以下清单的 PostgreSQL：

```
class db {
  class { 'postgresql': version => '9.1' }
  class { 'postgresql::server': }
}
class { 'db': } 
```

它安装正确，但数据库是使用 SQL_ASCII 编码创建的：

```
$ psql -l -U postgres
                             List of databases
   Name    |  Owner   | Encoding  | Collate | Ctype |   Access privileges
-----------+----------+-----------+---------+-------+-----------------------
 postgres  | postgres | SQL_ASCII | C       | C     |
 template0 | postgres | SQL_ASCII | C       | C     | =c/postgres          +
           |          |           |         |       | postgres=CTc/postgres
 template1 | postgres | SQL_ASCII | C       | C     | =c/postgres          +
           |          |           |         |       | postgres=CTc/postgres 
```

谷歌搜索后，我认为这可能是一个语言环境问题，但对我来说它看起来是正确的：

```
$ locale
LANG=en_US.UTF-8
LANGUAGE=
LC_CTYPE=
LC_NUMERIC="en_US.UTF-8"
LC_TIME="en_US.UTF-8"
LC_COLLATE="en_US.UTF-8"
LC_MONETARY="en_US.UTF-8"
LC_MESSAGES="en_US.UTF-8"
LC_PAPER="en_US.UTF-8"
LC_NAME="en_US.UTF-8"
LC_ADDRESS="en_US.UTF-8"
LC_TELEPHONE="en_US.UTF-8"
LC_MEASUREMENT="en_US.UTF-8"
LC_IDENTIFICATION="en_US.UTF-8"
LC_ALL= 
```

你知道我应该怎么做才能安装默认为 UTF8 编码的 PostgreSQL 吗？能够为此使用 Puppet 也很好。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-12T18:04:01.047

显然，这是 Puppet 错误[http://projects.puppetlabs.com/issues/4695](http://projects.puppetlabs.com/issues/4695)。从问题注释中添加了以下代码作为解决方法：

```
# workaround for http://projects.puppetlabs.com/issues/4695
# when PostgreSQL is installed with SQL_ASCII encoding instead of UTF8
exec { 'utf8 postgres':
  command => 'pg_dropcluster --stop 9.1 main ; pg_createcluster --start --locale en_US.UTF-8 9.1 main',
  unless  => 'sudo -u postgres psql -t -c "\l" | grep template1 | grep -q UTF',
  require => Class['postgresql::server'],
  path    => ['/bin', '/sbin', '/usr/bin', '/usr/sbin'],
} 
```

# oracle - 使用 sql loader 使用单个控制文件将多个数据文件加载到多个表中

> ID：15949785
> 
> 赞同：0
> 
> 时间：2013-04-11T13:15:16.967
> 
> 标签：oracle, shell, sql-loader

我需要将数十亿条记录加载到 5 个不同的表中，这些表中的每一个都有不同的数据文件。这 5 个表将每天填充，并在第二天加载新数据之前被截断。

*   Que1：如何使用 1 个控制文件使用 5 个不同的数据文件将数据加载到 5 个不同的表中？
*   Que2：我是否需要 5 个不同的丢弃、日志和坏文件来跟踪这 5 个不同的负载？
*   Que3：每天加载数十亿条记录的更好和更有效的方法 - 使用 5 个不同的控制表、5 个丢弃、5 个日志文件或仅 1 个控制表将解决目的。
*   Que4：如果 5 个加载中的一个失败，那么我需要再次为所有 5 个表重新运行 sqloader 怎么办？

注意：到目前为止，我们正在将数据加载到一个表中，但加载需要 5-6 个小时，因此我们正在寻找更好的性能。我将从 shell 脚本运行 sqlldr。

有 4 个不同的数据文件包含 1 天、7 天、15 天的数据

```
LOAD DATA
replace
INTO TABLE T1_1DAY_STG
FIELDS TERMINATED BY X'05'
OPTIONALLY ENCLOSED BY '"'
TRAILING NULLCOLS
(
MM_INTERVAL,
STRATEGY_ID ,         
AGGREGATE_DATE           date "YYYY-MM-DD"
)
INTO TABLE T1_7DAY_STG
FIELDS TERMINATED BY X'05'
OPTIONALLY ENCLOSED BY '"'
TRAILING NULLCOLS
 (
 MM_INTERVAL,
 STRATEGY_ID ,         
 AGGREGATE_DATE           date "YYYY-MM-DD"
  ) 
```

我正在计划这样的shell脚本

```
echo "start SQL loader" >> ${LOG_FILE} 2>&1
DCTL=$( eval echo \${TX_SQLLDR_${i}_CTL_SP} )
DDATA=$( eval echo \${TX_${i}_DATA_FILE_SP} )
DLOG=$( eval echo \${TX_${i}_DATA_FILE_LOG_SP} )
DBAD=$( eval echo \${TX_${i}_DATA_FILE_BAD_SP} )
DDISCARD=$( eval echo \${TX_${i}_DATA_FILE_DISCARD_SP} )

${ORACLE_HOME}/bin/sqlldr ${ORACLE_USER}/${ORACLE_PASSWD}@${ORACLE_SID}   control=${CTL_DIR}/${DCTL} data=${DATA_DIR}/${DDATA} log=${LOG_DIR}/${DLOG}   bad=${LOG_DIR}/${DBAD} discard=${LOG_DIR}/${DDISCARD} errors=${ERRNUM} direct=true silent=FEEDBACK > ${TMP_LOG_FILE} 2>&1 
```

谢谢桑迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:50:29.253

我肯定会考虑使用外部表，因为它们对并行直接路径插入有更好的支持。如果您从多个文件加载并且文件中有一些数据元素允许您确定数据将被加载到哪个表中，那么您可以使用以下元素以获得最佳性能：

1.  NOLOGGING - 因为你每天都在重新加载
2.  直接路径——你已经在做
3.  并行读取数据文件——http: [//docs.oracle.com/cd/B28359_01/server.111/b28319/et_concepts.htm#i1007483](http://docs.oracle.com/cd/B28359_01/server.111/b28319/et_concepts.htm#i1007483)
4.  多表插入
5.  平行插入
6.  在加载的表上不收集统计信息——锁定表统计信息而不收集它们并依赖动态采样。

如果您绝对必须使用 SQL*Loader，请考虑将数据文件拆分为多个较小的文件并使用并行直接路径 sql*loader 会话，但请注意，这意味着运行多个 sql*loader 进程。

# android - Android - 拉动以刷新自定义适配器

> ID：15949787
> 
> 赞同：0
> 
> 时间：2013-04-11T13:15:24.653
> 
> 标签：android, android-listview, pull-to-refresh

我正在开发一个 Android 应用程序，并且我有一个自定义适配器用于我的`ListView`. 我想使用 Pull 来刷新库，例如[这个](https://github.com/chrisbanes/Android-PullToRefresh). 这适用于 ArrayAdapter，但不适用于自定义适配器。

如何让我的拉动刷新使用自定义适配器？

这是我的适配器代码：

```
public class AdvertListAdapter extends BaseAdapter {
private AdvertListActivity activity;
private int currentFirstVisibleItem=0;
private int currentLastVisibleItem=8;

public AdvertListAdapter(AdvertListActivity activity) {
    this.activity = activity;

}

public void setFirstVisibleItem(int currentFirstVisibleItem) {
    this.currentFirstVisibleItem=currentFirstVisibleItem;
}

public void setLastVisibleItem(int currentLastVisibleItem) {
    this.currentLastVisibleItem=currentLastVisibleItem;
}

@Override
public int getCount() {
    return activity.getAdvertList().size();
}

@Override
public Advert getItem(int pos) {
    return activity.getAdvertList().get(pos);
}

@Override
public long getItemId(int pos) {
    return activity.getAdvertList().get(pos).getId();
}

private class ViewHolder {
    public ImageView image;
    public TextView title;
    public TextView price;
    public TextView size;
    public TextView city;
}

public View getView(int position, View convertView, ViewGroup parent) {

    ViewHolder view;
    LayoutInflater inflator = activity.getLayoutInflater();

    if(convertView == null) {
        view = new ViewHolder();
        convertView = inflator.inflate(R.layout.listview_advertlist, null);

        view.image = (ImageView) convertView.findViewById(R.id.advertImage);
        view.title = (TextView) convertView.findViewById(R.id.advertTitleText);
        view.price = (TextView) convertView.findViewById(R.id.advertPriceText);
        view.size = (TextView) convertView.findViewById(R.id.advertSizeText);
        view.city = (TextView) convertView.findViewById(R.id.advertCityText);

        convertView.setTag(view);
    }else {
        view = (ViewHolder) convertView.getTag();
    }

    Advert advert = activity.getAdvertList().get(position);

    view.title.setText(advert.getTitle());
    view.price.setText(String.valueOf(advert.getPrice()+"€"));
    view.size.setText("Taille: "+advert.getSize());
    view.city.setText(advert.getCity());

    if(position <= currentFirstVisibleItem || position >= currentLastVisibleItem) {
        view.image.setImageResource(R.drawable.defaultadvertimage);
        ServiceHelper.loadAsyncImage(view.image, activity.getApplicationContext(), String.valueOf(advert.getId()+"-mini"), "advert");
    }

    return convertView;

}

} 
```

这是我的活动代码：

```
list = (PullToRefreshListView) findViewById(R.id.advertList);

    advertList = getAdvertList();

    ((PullToRefreshListView) list).setOnRefreshListener(new OnRefreshListener() {
        @Override
        public void onRefresh() {
            // Do work to refresh the list here.
            new GetDataTask().execute();
        }
    });

    list.setAdapter(adapter); 
```

# vb.net - Keydown 事件奇怪的行为

> ID：15949788
> 
> 赞同：1
> 
> 时间：2013-04-11T13:15:26.013
> 
> 标签：vb.net, events, keydown

我正在尝试捕捉快捷键。我需要解释如何`KeyDown Events`管理。让我们以此为例：

```
Private Sub SoldeOuvertFou_KeyDown(ByVal sender As System.Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles MyBase.KeyDown

    If e.Control And e.KeyCode = Keys.W Then
        MessageBox.Show("Ctrl+W")
        End If

    If e.Control And e.KeyCode = Keys.F5 Then
          MessageBox.Show("Ctrl+F5")
        End If

  End Sub 
```

完美运行。无论我先按哪个或按多少次，它们`MessageBox`都会弹出。现在，如果我只是更改 sub 内的顺序：

```
Private Sub SoldeOuvertFou_KeyDown(ByVal sender As System.Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles MyBase.KeyDown

    If e.Control And e.KeyCode = Keys.F5 Then
          MessageBox.Show("Ctrl+F5")
        End If

    If e.Control And e.KeyCode = Keys.W Then
        MessageBox.Show("Ctrl+W")
        End If

  End Sub 
```

用这种方法，只会`Ctrl+F5`弹出。没有办法`Ctrl+W`出现......知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:31:11.757

你可以简单地使用：

```
If e.Control Then

    If e.KeyCode = Keys.F5 Then
        MessageBox.Show("Ctrl+F5")
    Else
        If e.KeyCode = Keys.W Then
           MessageBox.Show("Ctrl+W")
        End If

    End If

End If 
```

# android - OpenGLRenderer，发现无效字形

> ID：15949791
> 
> 赞同：5
> 
> 时间：2013-04-11T13:15:41.563
> 
> 标签：android, listview

我正在尝试一个包含列表视图的 android 应用程序。在此列表视图中，仅列出图像。

我想知道，虽然应用程序运行良好，但当我单击列表视图中的某个项目时，有时会出现错误日志：“**发现无效字形**”。（我正在使用*Eclipse ADT Bundle*。）

有人知道吗？

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-07T02:37:25.303

该错误日志很可能来自 hwui/FontRenderer.cpp（[参见此处](https://code.google.com/p/cloa/source/browse/trunk/qrd_qs/frameworks/base/libs/hwui/FontRenderer.cpp?r=2)）。

好消息是它可能不应该被记录为错误，而是一个警告。它只是意味着角色在应该被渲染时没有被缓存。如果这是一个更大的问题，之后您会看到“仍然发现无效字形”错误。

# sharepoint - SharePoint 2013 自定义页面

> ID：15949794
> 
> 赞同：3
> 
> 时间：2013-04-11T13:15:51.880
> 
> 标签：sharepoint, sharepoint-2013

我使用 SPWebApplication.UpdateMappedPage 用我的自定义页面更新默认应用程序页面。这似乎适用于 Sharepoint 2010。但是，当我在任何 WebApplication 上使用 SharePoint 2013 中的相同代码时，它不会反映所做的更改。它默认返回特定的 SharePoint 页面（例如：15\layouts\accessdenied.aspx）并且不使用我的自定义页面（例如：15\layouts\custompages\accessdenied.aspx）。

当我使用此命令时： Get-SPCustomLayoutsPage -Identity "AccessDenied" -WebApplication MyWebApp

它表明 WebApplication 已使用新值进行了更新。

我已按照以下步骤操作：http: [//msdn.microsoft.com/en-us/library/microsoft.sharepoint.administration.spwebapplication.updatemappedpage.aspx](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.administration.spwebapplication.updatemappedpage.aspx)但不适用于 SharePoint 2013。

有什么我在这里想念的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-04T06:11:44.007

这是一个已确定的问题，有望在未来的修补程序中得到解决。这是我的发现： [http ://blog.randomdust.com/index.php/2013/07/custom-access-denied-page-in-sharepoint-2013/](http://blog.randomdust.com/index.php/2013/07/custom-access-denied-page-in-sharepoint-2013/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-15T09:56:05.190

# matlab - 如何在 Matlab 中读取 tiff 格式的大图像？

> ID：15949795
> 
> 赞同：0
> 
> 时间：2013-04-11T13:15:52.443
> 
> 标签：matlab, image-processing

如何在 Matlab 中读取 tiff 格式的大图像？

我正在尝试在 matab 中读取大小为 1.970.654 k 的图像，稍后我想将图像裁剪成图块。当我使用 imread 代码时，它给了我一个错误：

'记不清。键入 HELP MEMORY 作为您的选项。

如果某人能帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:23:40.550

你有足够的内存吗？如果你只有 2 GB 的内存，我怀疑是否有足够的内存分配给 Matlab 来做到这一点。

此外，一种解决方法可能只是使用另一个编辑器将图像拆分为单独的 TIFF 集，然后对每个集执行分析。

# python - 对 Python 字典中的值求和

> ID：15949803
> 
> 赞同：0
> 
> 时间：2013-04-11T13:16:03.450
> 
> 标签：python, dictionary

我正在使用 Python 对随机星光谱求和以增加它们的信噪比。这些光谱标题的关键字之一包含光谱的积分时间。当我对光谱求和时，我希望用我使用的每个光谱的积分时间总和来更新结果光谱的关键字。为此，我使用以下代码：

```
for kk in range(0,NumberOfSpectra):             # main cycle
       TotalIntegrationTime = 0.0
       for item in RandomSpectraList:                       # secondary cycle
           SpectrumHeader = SpectraFullList[item]['head']         #1
           TotalIntegrationTime += SpectrumHeader['EXPTIME']

       SpectrumHeader['EXPTIME'] = TotalIntegrationTime               #2

    SaveHeaderFunction(SpectrumHeader, kk) 
```

我遇到的问题是，当主循环循环时，`SpectrumHeader`当我在#1 中重新分配它并显示它在#2 中的值时，它不会被重置。关于为什么会发生这种情况以及如何解决它的任何想法？

`NumberOfSpectra`由用户提供，`RandomSpectraList`是按名称排列的随机光谱列表。`SpectraFullList`包含光谱并具有键“head”和“spec”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:38:38.353

您是否知道在第 2 行中，SpectrumHeader 仍然指向 SpectraFullList 的一个元素？它们实际上是同一个对象。因此，当执行第 2 行时，您实际上是在修改 SpectraFullList。我想这不是你想要的，它可能是你的问题的原因。

为了解决它，在 #2 之前插入以下行：

```
SpectrumHeader = SpectraFullList[item]['head'].copy() 
```

# c# - c#实现带有子类类型参数的接口方法

> ID：15949807
> 
> 赞同：5
> 
> 时间：2013-04-11T13:16:14.223
> 
> 标签：c#, class-hierarchy

我有这个想要的类层次结构：

```
interface IClass
{
    string print(IClass item);
}

class MyClass : IClass
{
    // invalid interface implementation
    // parameter type should be IClass not MyClass
    string print(MyClass item)
    { return item.ToString(); }
} 
```

我试图通过使用泛型类型来解决接口实现问题，但没有成功：

```
interface IClass
{
    string print<T>(T item) where T : IClass;
}

class MyClass : IClass
{
    string print<T>(T item) where T : MyClass
    { return item.ToString(); }
} 
```

我应该怎么办？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-11T13:19:25.517

使您的界面通用

```
interface IClass<T>  where T : IClass<T>
{
     string print(T item);
}

class MyClass : IClass<MyClass>
{
    public string print(MyClass item)
    { 
       return item.ToString(); 
    }
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-11T13:41:52.260

了解为什么这是非法的会很有帮助。您想要的功能是*形式参数类型协方差*，并且很少有语言提供它。（埃菲尔，我认为这是一个特性。）它在语言中并不常见，因为它不安全！让我用一个例子来说明：

```
class Animal {}
class Lion : Animal { public void Roar() { } }
class Giraffe : Animal { }
interface IFoo { void M(Animal a); }
class C : IFoo
{
    public void M(Lion lion) { lion.Roar(); }
}
class P
{
    public static void Main()
    {
        IFoo foo = new C();
        foo.M(new Giraffe()); 
    }
} 
```

我们刚刚发出了长颈鹿的吼声。

如果您查看所有这些类型转换，唯一可以合理地设为非法的是匹配`C.M(Giraffe)`到`IFoo.M(Animal)`.

现在，形参类型*逆变*是*类型安全*的，但它在 C# 中是不合法的，除非在一些非常有限的情况下。如果 C# 支持它，但它不支持，那么您可以安全地执行以下操作：

```
interface IBar { void M(Giraffe g); }
class D : IBar
{
    public void M(Animal animal) { ... }
}
class P
{
    public static void Main()
    {
        IBar bar = new D();
        bar.M(new Giraffe()); 
    }
} 
```

看看那里发生了什么？IFoo.M 说“我可以带一只长颈鹿”，而 CM 说“我可以接受任何长颈鹿，因为事实上我可以接受任何动物”。如果 C# 支持它，那将是类型安全的，但它仅以两种方式支持它：

*   逆变泛型委托和接口转换。
*   逆变方法组转换为委托类型。

第一个例子是类型表达式`IComparable<Animal>`可以通过相同的逻辑分配给类型变量`IComparable<Giraffe>`：在需要比较两只长颈鹿的方法时，可以使用比较两只动物的方法。这是在 C# 4 中添加的。

第二个例子是：

```
delegate void MyFunction(Giraffe g);
...
D d = new D();
MyFunction myfunc = d.M; 
```

同样，我们需要一个接受 Giraffe 的函数，我们提供一个接受任何 Animal 的函数。此功能是在 C# 2 中添加的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T13:26:39.757

您只需要将**IClass**作为参数传递给您的方法。

```
interface IClass
{
  string print(IClass item);
}

class MyClass : IClass
{
  public string print(IClass item)
  { return item.ToString(); }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-29T11:02:59.823

这是一个至少可以让您编译的解决方案：

```
interface IClass
{
    string print<T>(T item) where T : IClass;
}

class MyClass : IClass
{   
    string print(IClass item) => item is MyClass i ? i.ToString() : string.Empty;
} 
```

# javascript - 在元素外部单击的 JavaScript

> ID：15949812
> 
> 赞同：0
> 
> 时间：2013-04-11T13:16:29.233
> 
> 标签：javascript, html, events

我知道使用 jQuery 很容易查看用户是否在特定元素之外单击然后对其做出反应，就像在打开的下拉菜单之外单击会关闭它一样。

我正在尝试仅使用 JavaScript 而不是 jQuery 来实现类似的功能。这是我当前的代码：

```
window.onload = function() {
  var nav = document.querySelectorAll('ul li.current_page_item');
  var navList = nav[0].parentNode;

//Open the navigation menu list
  nav[0].onclick = function() {
    navList.className = 'open';
  }
} 
```

到目前为止，如果单击`open`其子元素，代码会将一个类应用于无序列表。`li.current_page_item`

如果用户在列表项之外单击，我想触发一个事件（以删除`open`类） 。`li.current_page_item`

**有人可以展示我如何监听然后对仅使用 JavaScript**执行类似操作的事件做出反应吗？

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:35:30.413

添加单击将关闭 div 的文档，并记住在`li`处理程序中停止传播，否则它也会传播到文档。

```
document.onclick = function(e) {
  navList.className = 'close';
}

nav[0].onclick = function(e) {
  navList.className = 'open';
  e.stopPropagation(); // <----
} 
```

# ruby - 在 ruby 中使用 Net::HTTP 将二进制数据流式传输到服务器

> ID：15949813
> 
> 赞同：0
> 
> 时间：2013-04-11T13:16:29.907
> 
> 标签：ruby, uri

使用 Ruby，我只是尝试将比特流文件解析到服务器，我遇到了 badrequst HTTP 的问题。任何人都可以帮助我使用 Net::HTTP 将数据发送到服务器。

```
 def addbitstream(url, path, file_bitstream)
  uri = URI.parse(url)
  http = Net::HTTP.new(uri.host, 443)
  http.use_ssl = true
  http.verify_mode = OpenSSL::SSL::VERIFY_NONE
  request = Net::HTTP::Post.new(path)

  f = File.new(file_bitstream)
  file = File.open(f)
  n = 6
  offset = 0
  request.body = ""

  while (offset < File.size(file))
    buffer = readfileAsbitstream(file, offset, n)
    request.body = buffer
    response = Net::HTTP.start(uri.host, 443) {|http| http.request(request) }

    offset += n
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T15:05:03.187

Although I have not done file streaming, the first problem you will have with this code is that `HTTP.start` closes the connection after executing a block, when it is passed one. Maybe changing the order of your nesting here will help.

I would recommend using a gem to wrap HTTP requests anyway such as [REST-client](https://github.com/rest-client/rest-client), which I think streams file uploads by default.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T15:45:35.467

以下是使用方法 `Net::HTTP`：

```
url ="www.yoururl.com"
uri = URI.parse(url)
http = Net::HTTP.new(uri.host, uri.port)
request = Net::HTTP::Post.new(uri.request_uri)
http.use_ssl = true 
http.verify_mode = OpenSSL::SSL::VERIFY_NONE
response = http.request(request) 
```

# python - 使用字符串变量 **kwargs 作为命名参数

> ID：15949816
> 
> 赞同：9
> 
> 时间：2013-04-11T13:16:45.563
> 
> 标签：python, command-line, python-2.7, keyword-argument

我试图找出一种方法来循环遍历 json 配置文件并使用键名作为使用 **kwargs 的方法的参数名称。我创建了一个 json 配置文件并使用键名作为方法。我只是将“set_”附加到键名来调用正确的方法。我将 json 转换为字典以遍历任何默认值。我想通过字符串变量将参数名称传递给 **kwargs。我试图通过字典，但它似乎不喜欢那样。

```
user_defaults = config['default_users'][user]

for option_name, option_value in user_defaults.iteritems():
    method = "set_" + option_name
    callable_method = getattr(self, method)
    callable_method(user = user, option_name = user_defaults[option_name]) 
```

调用上面的 callable_method 传递“option_name”作为 kwarg 的实际名称。我想传递它，以便当“shell”= option_name 它作为参数名称的字符串名称传递时。下面是一个例子。这样我就可以遍历配置中的任何键，而不必担心我在为完成某件事而编写的任何方法中要查找的内容。

```
def set_shell(self, **kwargs): 
    user  = kwargs['user']
    shell = kwargs['shell']

    ## Do things now with stuff 
```

感谢任何帮助我是python的新手，并且仍在学习如何以pythonic的方式做事。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-11T13:26:22.060

如果我正确理解您的要求，您可以使用`**`调用方的语法来传递一个转换为 kwargs 的 dict。

```
callable_method(user=user, **{option_name: user_defaults[option_name]}) 
```

# javascript - IE9：脚本仅在调试器中有效，但在不调试时无效

> ID：15949819
> 
> 赞同：5
> 
> 时间：2013-04-11T13:16:57.613
> 
> 标签：javascript, html, internet-explorer, browser, cross-browser

我在 Internet Explorer 的兼容性方面遇到了一些问题。我正在构建一个大量使用 HTML5 画布、CSS3 和 JavaScript 的在线工具。该程序在所有主流浏览器中都能正常工作，除了 Internet Explorer。

IE9切换到兼容模式，所以我设置

> ```
> <meta http-equiv="x-ua-compatible" content="IE=9"/> 
> ```

强制 IE 以 IE9 标准处理页面。IE 不再进入兼容模式，但脚本仍然无法正常工作。绘制或拖动对象的一些基本功能有效，但只有“一半”。

在这种情况下，程序员会做什么：他启动调试器。这就是魔法发生的地方。一旦我启动 IE9 开发者工具（也有 IE9 浏览器和文档模式），脚本就可以正常工作。但是我应该如何调试在调试条件下运行良好的脚本，并且在不调试时出现错误。

目前，我不知道该怎么做。也许有人可以给我一个提示？非常感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T13:32:07.557

IE9 不喜欢`console`调用，并且没有向我们显示任何代码，我们只能猜测问题所在。您可以`console.log`在调用任何代码之前删除任何消息或使用此代码段：

```
(!window.console) console = {log: function() {}}; 
```

# c# - SQL Server 2008 获取修改的详细信息

> ID：15949824
> 
> 赞同：0
> 
> 时间：2013-04-11T13:17:11.930
> 
> 标签：c#, asp.net, sql-server-2008, gridview

我有一个附加到 asp.net 中的 gridview 的表。

假设用户编辑一行并更新文本框中的文本。我需要能够知道他修改和突出显示的列（即加粗）。

此信息需要在 asp.net 会话之外保留，因此它需要来自数据库。

如何从数据库中提取这些信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:22:25.623

**在表中的updateTime**中再添加一列，并创建一个 afterUpdate 触发器，该触发器将在该列中插入更新的时间。现在您可以将最近更新的行与所有其他行区分开来。

# mysql - 修剪mysql查询的结果

> ID：15949828
> 
> 赞同：-1
> 
> 时间：2013-04-11T13:17:29.647
> 
> 标签：mysql

I have a email column in my users table that when the function on the user interface is selected to delete the user, it just updates the email address and adds the time to it.

基本上`me@me.com`变成`me@me.com.1234567`

现在我可以使用以下方法搜索更新的用户：

```
SELECT DISTINCT SUBSTRING_INDEX(email, '.', 2)
FROM users 
```

但我遇到的问题是在 @ 符号前显示 2 或 3 位小数的电子邮件显然没有正确显示。所以`user.lastname@me.com.1234567`显示`user.lastname@me`等等。

我如何确保我只删除最后一个 ' 后面的最后一部分。' 结果呢？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-11T13:24:29.583

更安全的方式，

```
SELECT TRIM(TRAILING CONCAT('.',REVERSE(SUBSTRING_INDEX(REVERSE(email), '.', 1))) FROM email) email
FROM   Users 
```

[http://www.sqlfiddle.com/#!2/0b02c/22](http://www.sqlfiddle.com/#!2/0b02c/22)

# qt - 在 Qt Creator 中切换 .ui 和 .cpp

> ID：15949829
> 
> 赞同：6
> 
> 时间：2013-04-11T13:17:31.963
> 
> 标签：qt, ide, qt-creator

在 Qt Creator 中，是否有一种简单的方法可以直接在设计视图和与表单关联的 .cpp 文件之间切换（反之亦然）？

当我从设计模式转到编辑模式 (Ctrl-2) 时，它烦人地向我显示 .ui 文件的 XML 代码，因此我必须手动选择 .cpp 文件。

当我在表单的 .cpp 文件中时，设计模式图标和快捷方式 (Ctrl-3) 被禁用，因此我必须手动选择 .ui 文件。

必须有更好的方式在ui <--> cpp 之间切换。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T13:25:06.107

埋在菜单里的，是`Tools -> Form Editor -> Switch Source / Form`命令。它有 Shift-F4 热键，完全符合我的要求。

F7 似乎没有绑定任何命令，所以我将 `FormEditor/FormSwitchSource`命令重新绑定为使用 F7 作为键盘快捷键。我现在可以通过一个按键在 ui <--> cpp 之间切换！

**编辑：**

Qt Creator存在一个已知[错误](https://bugreports.qt-project.org/browse/QTCREATORBUG-4264)，它不会保存`FormEditor/FormSwitchSource`命令的键盘快捷键。

# c++ - 如何跟踪相同/不同数据类型的静态变量

> ID：15949832
> 
> 赞同：0
> 
> 时间：2013-04-11T13:17:41.950
> 
> 标签：c++, templates, static

下面的Test类有一个静态变量count，在创建Test类的对象时会增加，

```
#include <iostream>

using namespace std;

template <class T> class Test
{  
private:
  T val; 
public:
  static int count;
  Test()
  {
    count++;
  }
  // some other stuff in class
};

template<class T>
int Test<T>::count = 0;

int main()
{
  Test<int> a;  
  Test<int> b;  
  Test<double> c;  
  cout << Test<int>::count   << endl;  // prints 2  
  cout << Test<double>::count << endl; //prints 1

  getchar();
  return 0;
} 
```

输出：2 1

我猜有两个实例测试和测试（同时调用测试和测试）。但是我想知道为什么int和double有两个实例，因为有两种不同的类型？如果是这样，如何针对不同的数据类型和相同的数据类型跟踪计数变量？这可能是一个简单的问题，但我只想知道它背后的基本过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:19:37.930

因为`Test<int>`和`Test<double>`是不同的类型。

> 类模板定义了一组无限制的相关类型的布局和操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:20:55.340

是的。有两种不同的类型 `Test`。一是基于`int`：`Test<int>`。另一个是基于`double`：`Test<double>`。

您可以**假设**有两个`Test`类：

```
class Test_int // Test<int>
{  
private:
  int val; 
//...

class Test_double // Test<double>
{  
private:
  double val; 
//... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T13:22:40.520

你有2个不同的班级。

每个指定的类模板都是不同的类类型。与 不同的类类型的类名也是
如此。`Test<int>``Test<double>`

编译器为这些类中的每一个生成单独的代码，并因此生成 2 个不同的静态变量。

还有更多，它将为每个包含头文件的编译单元创建代码（因为代码将被“注入”到需要的地方）。

因此，如果您将在 2 个不同的 .cpp 文件中的 2 个不同的类中打印它，您会看到每个编译单元都有一个不同的计数器，即使对于相同的模板类类型也是如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T13:23:20.923

是的，您会得到一个实例：

```
template<class T>
int Test<T>::count = 0; 
```

对于每种类型的`T`. 当然还有一个实例化的

```
 Test()
  {
    count++;
  } 
```

想象一下，您添加了：

```
 Test()
  {
    val = 0;
    count++;
  } 
```

您会立即明白为什么必须为每种类型提供另一个功能。并且`Test<int>`是一个不同的类`Test<double>`。

`count`每个变量的全名是：

```
Test<int>::count
Test<double>::count 
```

编译器将分别按照`count_Test$i_i`和`count_Test$D_i`

# c++ - c++中复数的使用

> ID：15949833
> 
> 赞同：1
> 
> 时间：2013-04-11T13:17:42.367
> 
> 标签：c++, fftw

我在使用 fftw (3.3) 时遇到问题。

我要做的是首先制定一个计划：

```
int n = 100;
vector<double> f,step;
vector<complex<double> > F;
fftw_plan p;

f.resize(n);
F.resize(n);
p = fftw_plan_dft_r2c_1d(n,&f[0], &F[0],FFTW_ESTIMATE); 
```

然后我得到的是错误：

```
main.cpp:19:58: error: cannot convert ‘std::complex<double>*’ to ‘double (*)[2]’ for argument ‘3’ to ‘fftw_plan_s* fftw_plan_dft_r2c_1d(int, double*, double (*)[2], unsigned int)’ 
```

据我了解，可以使用标准复合体而不是 fftw_complex 和向量。

我确定我在这里错过了一个简单的点。所以每一个帮助将不胜感激。

马古_

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T06:16:32.250

@filmor 的方法奏效了。为了完整起见，正确的代码行是：

```
 p = fftw_plan_dft_r2c_1d(n, &f[0], reinterpret_cast<fftw_complex*>(&F[0]), FFTW_ESTIMATE); 
```

[这里](http://bytes.com/topic/c/answers/608597-reinterpret_cast-complex-double-double)更一般地描述。

# cocoa - NSToolbarItemGroup - 不起作用？

> ID：15949835
> 
> 赞同：2
> 
> 时间：2013-04-11T13:17:50.397
> 
> 标签：cocoa, appkit, nstoolbar, nstoolbaritem

NSToolbarItemGroup 记录[在这里](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSToolbarItemGroup_Class/Introduction/Introduction.html#//apple_ref/doc/uid/TP40005335-CH3-DontLinkElementID_1)。我找不到更多关于它的信息！

我正在尝试使用它，看看它的外观。我的代码基本上是直接从文档中提取的。但是，我从未在工具栏中看到“组”。代码运行，项目被添加到工具栏，但它只是不可见？！

有没有人成功使用过这个？环境是 10.8.3，带有最新的 XCode。

```
- (NSArray *)toolbarAllowedItemIdentifiers:(NSToolbar *)toolbar
{
    return [NSArray arrayWithObject:@"GroupItem"];
}

- (NSArray *)toolbarDefaultItemIdentifiers:(NSToolbar *)toolbar
{
    return [NSArray arrayWithObject:@"GroupItem"];
}

- (NSToolbarItem *)toolbar:(NSToolbar *)toolbar itemForItemIdentifier:(NSString *)itemIdentifier willBeInsertedIntoToolbar:(BOOL)flag
{
    NSToolbarItem *item1 = [[NSToolbarItem alloc] initWithItemIdentifier:@"Item1"];
    NSToolbarItem *item2 = [[NSToolbarItem alloc] initWithItemIdentifier:@"Item2"];
    [item1 setImage:[NSImage imageNamed:NSImageNameQuickLookTemplate]];
    [item2 setImage:[NSImage imageNamed:NSImageNameQuickLookTemplate]];
    [item1 setLabel:@"Prev"];
    [item2 setLabel:@"Next"];

    NSToolbarItemGroup *group = [[NSToolbarItemGroup alloc] initWithItemIdentifier:@"GroupItem"];
    [group setSubitems:[NSArray arrayWithObjects:item1, item2, nil]];

    [group setLabel:@"Navigate"];

    return group;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-18T12:32:47.673

我也遇到了这个。这很烦人。我的问题是我需要明确设置每个项目和包含组的 and `minSize`。`maxSize`也许这会起作用：

```
- (NSToolbarItem *)toolbar:(NSToolbar *)toolbar itemForItemIdentifier:(NSString *)itemIdentifier willBeInsertedIntoToolbar:(BOOL)flag
{
    NSToolbarItem* retVal = nil;

    if ([@"GroupItem" isEqual: itemIdentifier])
    {
        NSToolbarItem *item1 = [[NSToolbarItem alloc] initWithItemIdentifier:@"Item1"];
        NSToolbarItem *item2 = [[NSToolbarItem alloc] initWithItemIdentifier:@"Item2"];

        NSToolbarItemGroup *group = [[NSToolbarItemGroup alloc] initWithItemIdentifier:@"GroupItem"];
        [group setSubitems:[NSArray arrayWithObjects:item1, item2, nil]];

        item1.image = [NSImage imageNamed:NSImageNameQuickLookTemplate];
        item1.minSize = item1.image.size;
        item1.maxSize = item1.image.size;
        item1.label = @"Prev";

        item2.image = [NSImage imageNamed:NSImageNameQuickLookTemplate];
        item2.minSize = item2.image.size;
        item2.maxSize = item2.image.size;
        item2.label = @"Next";

        group.label = @"Navigate";
        NSSize minSize = NSZeroSize;
        NSSize maxSize = NSZeroSize;
        for (NSToolbarItem* item in group.subitems)
        {
            minSize.width += item.minSize.width;
            minSize.height = MAX(minSize.height, item.minSize.height);
            maxSize.width += item.maxSize.width;
            maxSize.height = MAX(maxSize.height, item.maxSize.height);
        }
        group.minSize = minSize;
        group.maxSize = maxSize;

        retVal = group;
    }
    return retVal;
} 
```

对我来说这不是默认行为似乎很愚蠢，但这并没有阻止我浪费半个小时来弄清楚它。此外，请注意订购 - 如果您在将子项放入组的子项集合*之前设置了子项的最小和最大尺寸，则该组会将您的尺寸***重置**为 32x32。嗯。

# android - Android：将空视图设置为列表视图

> ID：15949839
> 
> 赞同：17
> 
> 时间：2013-04-11T13:18:03.333
> 
> 标签：android, android-listview, empty-list

```
 <TextView
            android:id="@android:id/empty"
            style="@style/FacebookFont"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal"
            android:text="@string/no_result_found"
            android:textColor="@color/white" /> 
```

这是空视图的 xml 代码。我设置空视图如下：

```
 list.setAdapter(adapter);
    list.setEmptyView(findViewById(android.R.id.empty)); 
```

即使在填充列表视图之前，我也有列表视图中的项目，显示空视图。当列表视图包含某些项目时，我不希望显示该空视图。

请帮忙。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-11T13:26:59.580

如果您正在使用，`ListActivity`则无需手动设置空视图。`list.setEmptyView(findViewById(android.R.id.empty));`从您的代码中删除。

更改您的布局，如下所示，`EmptyView`如果列表没有项目，它会自动添加：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:paddingLeft="8dp"
        android:paddingRight="8dp">

    <ListView android:id="@android:id/list"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="#00FF00"
            android:layout_weight="1"
            android:drawSelectorOnTop="false"/>

     <TextView android:id="@android:id/empty"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="#FF0000"
            android:text="No data"/>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-09-27T06:24:47.957

如果您`MainActivity`没有扩展，则必须在设置适配器之前设置空视图`ListActivity`。

尝试这个

```
list.setEmptyView(findViewById(android.R.id.empty));
list.setAdapter(adapter); 
```

抱歉回复晚了！

替代方法：使您的活动从 ListActivity 扩展。`textview`并使用 id添加到您的列表布局`android.R.id.empty`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-04-23T21:10:18.933

有一些正确的答案，但是，我认为这是我找到的最好的方法：

```
View emptyView = getLayoutInflater().inflate(R.layout.empty_list_cart, null);
addContentView(emptyView, listView.getLayoutParams()); // You're using the same params as listView
listView.setEmptyView(emptyView);
listView.setAdapter(adapter); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-02-14T16:27:04.690

尝试这个

```
 View view = getLayoutInflater() .inflate(<resource id of the empty view>, null);
    ViewGroup viewGroup= ( ViewGroup)list.getParent();
    viewGroup.addView(view);
    list.setEmptyView(view); 
    list.setAdapter(adapter); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-02T10:26:33.293

无论@dhawalSodhaParmar 解释什么都是正确的。但是，当您查看答案的方式时会感到困惑。

```
 <?xml version="1.0" encoding="utf-8"?>

<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".SampleActivity">

    <ListView
        android:id="@+id/list"
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:paddingBottom="@dimen/activity_vertical_margin"
        android:paddingLeft="@dimen/activity_horizontal_margin"
        android:paddingRight="@dimen/activity_horizontal_margin"
        android:paddingTop="@dimen/activity_vertical_margin"
        android:divider="@null"
        android:dividerHeight="0dp" />

    <!-- Empty view is only visible when the list has no items. -->
    <TextView
        android:id="@+id/empty_text_view"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:text="NO DOCUMENTS AVAILABLE!"
        android:textColor="#525252"
        android:textAppearance="?android:textAppearanceMedium"
        android:visibility="gone"/>

</RelativeLayout> 
```

假设您已经有一个列表视图和适配器支持相同的数据。假设一切正常，任何想要实现这个空列表视图屏幕的人都必须像下面这样开始： 第 1 步：使用我在这里使用的列表视图修改现有的 Activity XML 文件。您可以使用线性布局或相对布局，但最好使用相对布局，因为它具有灵活性。还有一个像我写过的 textView。

第 2 步：转到您的 Activity Java 文件，并在您的 setContentView 之后

```
ListView emptyListView = (ListView) findViewById(R.id.list);
// set your adapter here
// set your click listener here
// or whatever else
emptyListView.setEmptyView(findViewById(R.id.empty_text_view)); 
```

就是这样，现在运行，你准备好了！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-03T15:18:20.373

```
// first of all create a global variable of Text view 
// which is displayed when the list is empty

private TextView mEmptyStateTextView;

//then in onCreate(Bundle savedInstanceState)
/Setting empty text view

mEmptyStateTextView=(TextView) findViewById(R.id.emptyview);

view.setEmptyView(mEmptyStateTextView);  

//then in onLoadfinished method

mEmptyStateTextView.setText(R.string.no_earthquakes); 
```

# java - Android蓝牙java.io.IOException：连接被拒绝

> ID：15949840
> 
> 赞同：1
> 
> 时间：2013-04-11T13:18:04.107
> 
> 标签：java, android, sockets, exception, bluetooth

我对 android 套接字有疑问。我正在将我 PC 上的 USB 加密狗连接到 Android 手机三星 Galaxy Note II。我正在使用标准蓝牙套接字创建带有 createRfcommSocketToServiceRecord 的套接字。

```
btSocket = device.createRfcommSocketToServiceRecord(MY_UUID); 
```

服务器正在使用 listenUsingRfcommWithServiceRecord 进行侦听。

```
tmp = mBluetoothAdapter.listenUsingRfcommWithServiceRecord(NAME_SECURE,MY_UUID); 
```

客户端和服务器之间的配对很好。我曾尝试将 PC 作为服务器，将手机作为客户端，反之亦然。在这两种情况下，我都会遇到相同的异常。logcat 粘贴在下面。

```
04-12 06:14:58.229: D/THINBTCLIENT(2613): ON CREATE got remote device6C:F3:73:47:5B:39

04-12 06:14:58.229: D/THINBTCLIENT(2613): ON CREATE Socket created.

04-12 06:15:01.229: E/THINBTCLIENT(2613): socket connect threw an exception.

04-12 06:15:01.229: E/THINBTCLIENT(2613): java.io.IOException: Connection refused

04-12 06:15:01.229: E/THINBTCLIENT(2613):   at android.bluetooth.BluetoothSocket.connectNative(Native Method)

04-12 06:15:01.229: E/THINBTCLIENT(2613):   at android.bluetooth.BluetoothSocket.connect(BluetoothSocket.java:204)

04-12 06:15:01.229: E/THINBTCLIENT(2613):   at com.example.myfirstapp.taskScreen$7.onClick(taskScreen.java:245) 
```

我用谷歌搜索，有人说取消配对和再次配对有帮助。我也试过了，但异常仍然存在。如果有人有任何想法，将不胜感激。

# url - 重定向链接

> ID：15949845
> 
> 赞同：0
> 
> 时间：2013-04-11T13:18:31.310
> 
> 标签：url, redirect, hyperlink

我知道使用 url 重新重定向的概念，以便 2 个 url 映射到同一页面。有没有办法让网址在外观上保持不变？换句话说，用户去：

[http://www.sitename.com/pagename.php](http://www.sitename.com/pagename.php)

但他们被重定向到：

[http://www.anothersite.com/pagename.php](http://www.anothersite.com/pagename.php)

用户仍然可以在其窗口中看到的位置：

[http://www.sitename.com/pagename.php](http://www.sitename.com/pagename.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:34:53.200

查看这篇文章[Redirect Subdomain Using htaccess and Keep URL](https://stackoverflow.com/questions/11959853/redirect-subdomain-using-htaccess-and-keep-url)

您要调查的是 .htaccess 和 mod_proxy()

您还可以使用 PHP 复制内容

file_get_contents(" [http://www.anothersite.com/pagename.php](http://www.anothersite.com/pagename.php) ");

并在 sitename.com 上打印出来

# jquery - Jquery - - 我如何简化代码

> ID：15949851
> 
> 赞同：1
> 
> 时间：2013-04-11T13:18:39.310
> 
> 标签：jquery, html

目前正在获取用户在文本框中输入的值，使用下面的代码下拉。

```
var test = new Object();
test.attribute = $("#Attribute_0").val();
test.operand = $("#Operand_0").val();
test.value = $("#Value_0").val();

var test = new Object();
test.attribute = $("#Attribute_1").val();
test.operand = $("#Operand_1").val();
test.value = $("#Value_1").val(); 
```

但是随着列表的增加，我认为会有其他更好的方法来做到这一点，所以我来到了这里。

我的 HTML 代码如下所示

```
<div>
    <input id="Attribute_0" name="Attribute_1" type="text">
    <select id="Operand_0">
    <input id="Value_0" type="text">
</div>

<div>
    <input id="Attribute_1" name="Attribute_1" type="text">
    <select id="Operand_1">
    <input id="Value_1" type="text">
</div> 
```

我可以用一些 foreach 或任何其他更好的方法来简化我的代码吗？

请建议

# 更新

是的，我的代码在重复。

假设如果我有 10 个这样的列表属性，那么手动获取每个 DIV 的值是没有意义的。

我如何在不重写代码的情况下轻松做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T13:23:07.357

为了有效，最好在每个包含的类上都有一个类`<div>`并`$.each`在这个类上执行，但是使用您当前的代码，您可以执行以下操作：

```
$.each($('div'), function(i, v) {
  var test = new Object();
  test.attribute = $("#Attribute_" + i).val();
  test.operand = $("#Operand_" + i).val();
  test.value = $("#Value_" + i).val();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T13:24:12.160

你可以使用`map`方法。

```
var data = $('div.classname').map(function() {
    var $elems = $(this).children();
    return {
        attribute: $elems.eq(0).val(),
        operand: $elems.eq(1).val(),
        value: $elems.eq(2).val()
    }
}).get(); 
```

现在`data`变量是一个对象数组，您还可以将类添加到表单元素并通过它们的类名而不是使用`.eq`方法来选择它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T13:24:03.547

如果您愿意更改您的 html，您可以执行以下操作：

```
<div class="item">
    <input class="Attribute" name="Attribute_0" type="text">
    <select class="Operand">
    <input class="Value" type="text">
</div>

<div class="item">
    <input class="Attribute" name="Attribute_1" type="text">
    <select class="Operand">
    <input class="Value" type="text">
</div> 
```

这将允许你这样做：

```
$(".item").each(function(){
    var $item = $(this);

    var test = new Object();
    test.attribute = $item.find(".Attribute").val();
    test.operand = $item.find(".Operand").val();
    test.value = $item.find(".Value").val();

    // do stuff with test
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T13:25:30.423

您可以为标签名称组织 foreach 循环。像这样的东西：

```
for(int i=0;i<maxvalue; i++){
var test = new Object();
test.attribute = $("#Attribute_" + i).val();
test.operand = $("#Operand_"+ i).val();
test.value = $("#Value_"+ i).val();
} 
```

# angularjs - AngularJS 删除属性

> ID：15949855
> 
> 赞同：18
> 
> 时间：2013-04-11T13:18:47.780
> 
> 标签：angularjs, angularjs-directive

我有一个指令用一些常规的 HTML 替换我的自定义标记。我想删除一些属性。例如，给定语法

```
<ui mybutton width="30"></mybutton> 
```

我的指令将其转换为

```
<div width="30" class="btn">bla bla </div> 
```

我想删除它`"width=30"`并添加`style="width:{{old width value here}}"`

我一直在尝试编译和链接功能。我应该在编译还是在链接函数中这样做？

我以为我必须在 compile 函数中执行此操作，因为我想在模板中进行修改。

[在http://jsfiddle.net/WptGC/2/](http://jsfiddle.net/WptGC/2/) 中查看它**警告：您的浏览器可能会挂起！** 安全地观看它[http://jsfiddle.net/WptGC/3/](http://jsfiddle.net/WptGC/3/)使一切崩溃的代码已被注释。

```
.directive('mybutton', function($compile) {
return {
    restrict: 'A',
    //transclude: true,
    template: '<div class="this is my subscreen div" style="width:{{width}}"></div>',
    replace: false,
    /*scope: {
        width: '@',
        height: '@',
        x: '@',
        y: '@'
    },*/

    compile: function($tElement, $tAttrs) {
        console.log("subscreen template attrs:");
        console.log($tAttrs);
        var el = $tElement[0];
         //el.getAttribute('width');
        var stylewidth = el.getAttribute('width'); 
        el.removeAttribute('width');

         return function(scope) {
            $compile(el)(scope);
         }
    }
}
}) 
```

我只是得到一个奇怪的循环（console.log 显示了几千次）

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-11T13:32:08.383

除非我遗漏了其他一些要求，否则您应该能够使用隔离范围和模板，例如：

[http://jsfiddle.net/WptGC/6/](http://jsfiddle.net/WptGC/6/)

```
app.directive('backbutton',function(){
  return {
    restrict: 'A',
    replace:true,
    scope: {
        x: '@',
        y: '@'
    },
    template:'<button style="width: {{x}}px; height: {{y}}px">A back-button template</button>',
    link: function (scope, element, attrs) {
      element.removeAttr('x').removeAttr('y');
    }
  }
}); 
```

# c# - 使用 json 传递关联数组：控制器中期望哪种类型？

> ID：15949857
> 
> 赞同：6
> 
> 时间：2013-04-11T13:18:49.013
> 
> 标签：c#, asp.net-mvc, json

在客户端，我有一个关联数组，其中存储“Guid”-“int”对。我使用 json 将数组传递给服务器：

```
 $.ajax({
      url: methodUrl,
      type: 'POST',
      async: false,
      data: { values: items },
      dataType: 'json',
      success: function (data) {
          //...
      }
  }); 
```

我尝试传递的对象如下所示（取自 Chrome 调试器）：

```
 items: Object
  44f871e0-daee-4e1b-94c3-76d633a87634: 1
  698ce237-3e05-4f80-bb0d-de948c39cd96: 1 
```

在控制器中我有一个方法

```
 public ActionResult Method(Dictionary<Guid, int> values)
  {

  } 
```

但是，属性值仍然为空。只有客户端的 Guid 列表和控制器中的 List 一切正常。我怀疑我应该为控制器中的值选择另一种类型，而不是字典。我还尝试在 ajax 请求中添加“traditional: true”，但没有成功。

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T13:40:56.900

这是我在使用 POST 命令时所做的：

```
var data = {
   values: items
}

var obj = $.toJSON(data);

$.ajax({
      url: methodUrl,
      type: 'POST',
      async: false,
      data: obj,
      dataType: 'json',
      success: function (data) {
          //...
      }
  }); 
```

这应该正确发送到您的控制器，并且您不必使用 Dictionary 对象，您应该将对象从客户端匹配到服务器端。我会使用一个自定义对象，其中包含 a`Guid`和 a`int`作为属性，并使用它 - .NET 将匹配这两者。话虽如此，使用字典是完全合理的，但这是个人喜好。

IE

```
public CustomObject 
{
    public Guid MyGuid { get; set; }
    public int MyNumber { get; set; }
}

public ActionResult Method(List<CustomObject> values)
{

} 
```

有多个参数：

```
items.SecondNumber = yourVariable; 
// In reality, you'd have a loop around your items and set this SecondNumber.

var data = {
    values: items
}

var obj = $.toJSON(data);

public CustomObject 
{
     public Guid MyGuid { get; set; }
     public int MyNumber { get; set; }
     public int SecondNumber { get; set; } // This is why we use CustomObject
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T12:06:10.937

尽管我选择了 thedixon 的答案作为解决方案，但我最终还是设法避免使用任何其他类。

最重要的部分是发送到服务器的集合的类型应该是具有键值类型的javascript数组。例如，这是我在发送到服务器之前在 js 中创建的对象：

```
items : Array[2]
0: Object
key: "ddac666f-310f-4022-a22c-c542355b765e"
value: 1
1: Object
key: "ce9ae5a6-e6a6-4bb6-b61c-b1cc324be049"
value: 1 
```

在此之后，有必要对其进行字符串化，然后发送到服务器。

```
 var obj = JSON.stringify(items);
    $.ajax({
        url: teilnahmen.AddNewTeilnahmenUrl,
        type: 'POST',
        traditional: true,
        dataType: 'json',
        data: obj,
        contentType: "application/json",
        success: function (data) {
            //...
        }
    }); 
```

在服务器端：

```
 public ActionResult AddNewTeilnahmen(Dictionary<Guid, int> values)
    { ... } 
```

我仍然相信这个解决方案更好，因为它不需要创建很可能永远不会被重用并且已经存在于 .NET 中的类。但正如 thedixon 正确提到的，这是一个品味问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-07T12:55:06.563

除了Anelook最后的评论，这里是javascript数组的创建：

```
var items = [];
$(something).each(function (index, element) {
   var item = { "key": element.guid, "value": element.number };
   items.push(item);
}); 
```

# java - 如何减少android中的图像像素而不是尺寸？

> ID：15949860
> 
> 赞同：0
> 
> 时间：2013-04-11T13:18:58.700
> 
> 标签：java, android

通过从默认相机开始捕获图像后`Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE)`，我想降低图像的分辨率（像素）。我知道图像质量会受到干扰，但我不用担心。

在 JAVA 中搜索时，我们可以使用 JAI ( `JAVA ADVANCED IMAGING API`) 库来完成所需的工作。其实我不知道使用这个库。基本上我想存储、发送和处理该图像，这就是为什么我想减少图像中的像素。

任何建议家伙.. 宝贵的帮助表示赞赏...

# python - 循环遍历 Plone 中的损坏对象

> ID：15949881
> 
> 赞同：1
> 
> 时间：2013-04-11T13:20:14.090
> 
> 标签：python, plone, zope, zodb

我有几个损坏的对象，我希望在 python 脚本中循环。我的用例如下：我已将我的自定义产品从 重命名`my.oldproduct`为`my.newproduct`。这导致先前保存的对象`my.oldproduct`被破坏，因此无法访问。这里有一个详细的解决方法：[更新损坏的对象](https://stackoverflow.com/questions/9570902/renaming-my-packages-to-my-package)

现在我想做的是在 ZMI 中创建一个 python 脚本来循环所有损坏的内容，更改/更新它们，从而使用 my.newproduct 保存它们。

我一直无法获取旧对象，因为它们未列出。查看我的 python 脚本示例以列出站点中的所有内容，但它们仍然没有显示：

```
from Products.CMFCore.utils import getToolByName

app = context.restrictedTraverse('/')
sm = app.plone.getSiteManager()

catalog = getToolByName(context, 'portal_catalog')
results = catalog.searchResults()

count = 0
for obj in results:
    print obj.meta_type
    count += 1

print str("Found " + str(count) + " matching objects")

return printed 
```

我怎样才能让破碎的物体`my.oldproduct`被列出来？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T15:12:00.617

恐怕您需要手动遍历整个 ZODB。如果这些对象是内容对象，您应该能够使用标准的 OFS 方法：

```
from collections import deque
from datetime import datetime

import transaction
from zope.app.component.hooks import setSite
from Testing.makerequest import makerequest
from AccessControl.SecurityManagement import newSecurityManager

from my.newproduct.types import ArchetypesContentType

site_id = 'Plone'     # adjust to match your Plone site object id.
admin_user = 'admin'  # usually 'admin', probably won't need adjusting
app = makerequest(app)
site = app[site_id]
setSite(site)
user = app.acl_users.getUser(admin_user).__of__(site.acl_users)
newSecurityManager(None, user)

def treeWalker(root):
    # stack holds (parent, id, obj) tuples
    stack = deque([(None, None, root)])
    while stack:
        parent, id, next = stack.popleft()
        try:
            stack.extend((next, id, child) for id, child in next.objectItems())
        except AttributeError:
            # No objectItems method
            pass
        yield parent, id, next

count = 0
for parent, id, obj in treeWalker(site):
    if isinstance(obj, ArchetypesContentType):
        print 'Found content type object {} at {}'.format(id, '/'.join(object.getPhysicalPath()))
        obj._p_changed = True  # mark it as changed, force a commit
        count += 1
        if count % 100 == 0:
            # flush changes so far to disk to minimize memory usage
            transaction.savepoint(True)
            print '{} - Processed {} items'.format(datetime.now(), count)

transaction.commit() 
```

这假设您*已经*包含了您链接到的解决方法；尝试对`ZODB.broken.Broken`对象进行上述操作没有什么意义。

上面的脚本作为一个`bin/instance run`脚本，这样运行它：

```
bin/instance run path/to/this/script.py 
```

您将处理站点中的*所有内容*，这是一个相当繁重的过程，将涉及大量缓存流失，并且可能涉及具有潜在冲突的大量提交。您真的不想将其作为通过网络脚本运行。

# java - 使用 Google GSON 的 Lotus Domino Java 安全问题

> ID：15949887
> 
> 赞同：2
> 
> 时间：2013-04-11T13:20:28.093
> 
> 标签：java, xpages, gson, lotus-domino

尝试在通过 Xpage 启动的 java 方法中使用[Google GSON 库](https://code.google.com/p/google-gson/)。

我可以毫无问题地创建 gson 对象，但是在尝试调用时`gson.toJson(jsonObj)`出现以下错误：

> HTTP JVM：java.lang.SecurityException：不允许访问类 java.util.HashMap 中的成员
> 
> HTTP JVM：在 lotus.notes.AgentSecurityManager.checkMemberAccess（未知来源）
> 
> HTTP JVM：在 java.lang.Class.checkMemberAccess(Class.java:112)
> 
> HTTP JVM：在 java.lang.Class.getDeclaredConstructor(Class.java:419)

编码：

```
HashMap<String, Object> jsonObj = new HashMap<String, Object>();
jsonObj.put("apiStatus", apiStatus);

Gson gson = new Gson();
String json = gson.toJson(jsonObj);  // Exception thrown on this line 
```

我在[这里看到过类似](https://stackoverflow.com/questions/15088051/security-issue-while-implementing-java-google-drive-api-with-domino-xpages)的东西，但我已经实施了两个建议的政策更改，但似乎都没有任何效果：

> 授予 { 权限 java.lang.reflect.ReflectPermission "suppressAccessChecks"; };
> 
> 授予 codeBase "xspnsf://server:0/path/to/your/db.nsf/-" { 权限 java.security.AllPermission; };

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:51:55.670

如果您不喜欢更新服务器文件系统上的安全文件，您可以避免使用 gson 并将其替换为 xpages 自己的 JSON 序列化程序，请参阅我的博客文章：

[http://blog.tcl-digitrade.com/blogs/tcl-digitrade-blog.nsf/dx/28.01.2013090943DMABL6.htm](http://blog.tcl-digitrade.com/blogs/tcl-digitrade-blog.nsf/dx/28.01.2013090943DMABL6.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:05:01.103

这是几乎相同的例外：

[Domino XPage 上 Jackson 的 Java 权限](https://stackoverflow.com/questions/15759633/java-permission-for-jackson-on-domino-xpage)

利用

```
grant { permission java.security.AllPermission; }; 
```

它应该与它一起工作。如果您不想让它保持打开状态，请检查您的语法`grant codeBase`：

> 在此设置中，您必须更改数据库的路径（仅通过替换 /path/to/your/db.nsf/**而不是 server:0**）。

# php - jQuery 前置 php 代码块

> ID：15949888
> 
> 赞同：0
> 
> 时间：2013-04-11T13:20:29.410
> 
> 标签：php, jquery, wordpress

我正在尝试将我在 wordpress 中的 php 模板添加到我的 wordpress 登录表单中。

我可以在 wordpess 登录正文中编辑标记的唯一方法是通过 jquery 预先设置。

这是我的 php 模板加载：`<?php load_template_part('menu'); ?>`

这是我的加载模板过滤器，用于过滤`get_template_part();`...

```
// LOAD TEMPLATE PART
function load_template_part($template_name, $part_name=null) {
    ob_start();
    get_template_part($template_name, $part_name);
    $var = preg_replace('/\s\s+/', "", ob_get_contents());
    ob_end_clean();
    return $var;
} 
```

在这个过滤器中，我使用这个删除元素之间的所有空格......`preg_replace('/\s\s+/', "", ob_get_contents());`

然后，我尝试使用此 jquery 附加此模板部分...

```
var menu = '<?php echo load_template_part('menu'); ?>';

$("body").prepend(menu); 
```

但是由于我的 php load_template_part 字符串中的换行符，它会出现 javascript 语法错误。

任何人都可以帮助我从 php 字符串中删除换行符，或者建议另一种将我的 php 块安全地放入我体内的方法。

[输出来源： https](https://gist.github.com/jcranny/5363379) ://gist.github.com/jcranny/5363379

谢谢乔什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:31:59.967

如果您只是用空格替换所有换行符怎么办？

```
var menu = '<?php echo preg_replace('/[\r\n]+/',' ',load_template_part('menu')); ?>'; 
```

这可能更可靠，虽然我没有测试过（借自[这个答案](https://stackoverflow.com/a/6269254/901048)）：

```
var menu = '<?php echo json_encode(load_template_part('menu')); ?>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:31:46.980

我以前遇到过这个问题，如果那个“模板”包含单引号，你就会遇到问题。我使用的解决方法是对从返回的 html 进行 base64_encode

```
load_template_part() 
```

然后从 phpjs.org 获取 base64_decode 库。这将确保字符串不包含可能导致 JS 语法错误的非法字符。

例如：

```
// With Base64 object from phpjs.org
var menu = Base64.decode('<?php echo base64_encode(load_template_part('menu')); ?>'); 
```

试一试，对我来说总是很有吸引力。

# iphone - 更改 TTTAttributedLabel 中的链接文本大小

> ID：15949897
> 
> 赞同：1
> 
> 时间：2013-04-11T13:20:46.857
> 
> 标签：iphone, ios, objective-c

我正在使用 TTTAttributedLabel 在标签中显示链接。现在我只想更改链接的字体大小。任何指南

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T13:43:48.397

`TTTAttributedLabel`有一个属性`linkAttributes`，它将应用于每个链接：

```
TTTAttributedLabel *someLabel;

NSMutableDictionary *baseAttributes = [NSMutableDictionary dictionary];
UIFont *baseFont = [UIFont systemFontOfSize:14.0];
CTFontRef baseFontRef = CTFontCreateWithName((__bridge CFStringRef)baseFont.fontName, baseFont.pointSize, NULL);

baseAttributes[(__bridge NSString *)kCTFontAttributeName] = (__bridge id)baseFontRef;
CFRelease(baseFontRef);

someLabel.linkAttributes = baseAttributes; 
```

# java.util.scanner - 使用扫描器类读取文件

> ID：15949899
> 
> 赞同：1
> 
> 时间：2013-04-11T13:20:51.763
> 
> 标签：java.util.scanner, readfile

我试图用扫描仪类读取一个名为“test.txt”的文本文件。在 txt 文件中，它只是一个句子，例如：“这是一个 txt 文件”。这句话是我试图写出来的。但是当我使用命令时，我得到的只是 txt 文件的名称：java UDPClient test.txt localhost。

任何人都可以在代码中看到一些错误，以便我可以正确处理吗？我有两个可能的代码。

```
Import java.net.*;
Import java.io.*;
Import java.util.*;

public class Test_scanner { 

     public String readFile(String fileName) throws IOException {

         File file = new File("test.txt");
         StringBuilder fileContents = new StringBuilder((int)file.length());
         Scanner s = new Scanner(file);
         String lineSeparator = System.getProperty("line.separator");

     try {
       while (s.hasNextLine()) {
           fileContents.append(s.nextLine() + lineSeparator);
       }
           return fileContents.toString(); 
       } finally {
           s.close();
            }
    }
} 
```

我也有这个代码：

```
import java.net.*;
import java.io.*;
import java.util.*;

public class Test_scanner {

    public static void readFile(String fileName) {
        try {
           File file = new File(fileName);
           Scanner scanner = new Scanner(file);
            while (scanner.hasNextLine()) {
                    System.out.println(scanner.nextLine());
            }
                     scanner.close();
            } catch (FileNotFoundException e) {
                    e.printStackTrace();
            }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-05T01:33:43.960

导入语句中的“导入”不应大写，因此您的第二个代码块正确。我在这两个代码中都没有看到 main() 方法；你需要一个 main() 方法来运行你的程序。假设您使用命令行输入文件名，您可以使用如下内容：

```
import.java.io.*;
import.java.util.*;

public class TestScanner{

   public static void main(String[] args) {
      String sFileName = "";
      //checks if user enters a file name
      if(args.length == 0) {
         System.out.println("Please enter a file name in command line.");
         //terminates program
         System.exit(0);
      }
      else {
         sFileName = args[0];
      }

      File myFile = new File(sFileName);
      //scanner object which reads from file
      Scanner fileReader = null;

      try {
         //links scanner object to file.
         fileReader = new Scanner(myFile);
      }
      catch (FileNotFoundException fnf) {
         System.out.println("ERROR: File not found for " + sFileName);
         //terminates program
         System.exit(1);
      }

      System.out.println("Reading from file: " + sFileName + "\n");

      //fileReader reads each line from file.
      while(fileReader.hasNextLine()) {
         //stores each line from file trimmed
         System.out.println(fileReader.nextLine());
      }   
   }//end main() method
}//end TestScanner class 
```

# powershell - 找不到类型 [Microsoft.TeamFoundation.Build.Workflow.WorkflowHelpers]

> ID：15949903
> 
> 赞同：3
> 
> 时间：2013-04-11T13:21:05.980
> 
> 标签：powershell, tfs

我正在尝试从指定进程参数的 Powershell 对构建进行排队。我收到以下错误...任何想法我做错了什么？

无法找到类型`[Microsoft.TeamFoundation.Build.Workflow.WorkflowHelpers]`：确保已加载包含此类型的程序集。

`At line:19 char:1`
+ $paramValues = [Microsoft.TeamFoundation.Build.Workflow.WorkflowHelpers]::Deseri ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～ ~~ + CategoryInfo : InvalidOperation: (Microsoft.TeamF...WorkflowHelpers:TypeName) [], RuntimeException
+ FullyQualifiedErrorId : TypeNotFound`

```
 function Get-BuildServer
        {
        param($serverName = $(throw 'please specify a TFS server name'))
        [void][System.Reflection.Assembly]::LoadWithPartialName("Microsoft.TeamFoundation.Client")
        [void][System.Reflection.Assembly]::LoadWithPartialName("Microsoft.TeamFoundation.Build.Client")
        $tfs = [Microsoft.TeamFoundation.Client.TeamFoundationServerFactory]::GetServer($serverName)

        return $tfs.GetService([Microsoft.TeamFoundation.Build.Client.IBuildServer])
        }

    # SAS: Get the Build Server
    $buildserver = Get-BuildServer "http://tfsserver:8080/tfs/My%20Project%20Collection"

    # SAS: Set the parameters (Team Project and Build Definition)
    $teamProject = "MyProject"
    $buildDefinition = "MyBuildDefinition"

    # SAS: Get the build definition
    $definition = $buildserver.GetBuildDefinition($teamProject, $buildDefinition)

    # SAS: Create the build request
    $request = $definition.CreateBuildRequest()

    # SAS: Deserialise the Process Parameter for the Build Definition
    [System.Reflection.Assembly]::LoadWithPartialName("Microsoft.TeamFoundation.Build.Workflow")
    $paramValues = [Microsoft.TeamFoundation.Build.Workflow.WorkflowHelpers]::DeserializeProcessParameters($request.ProcessParameters)

    # SAS: Set the parameter(s)
    $paramValues.Item("asdf") = "new value"

    # SAS: Serialise the Process Parameter for the Build Definition
    $request.ProcessParameters = [Microsoft.TeamFoundation.Build.Workflow.WorkflowHelpers]::SerializeProcessParameters($paramValues)

    # SAS: Queue the build
    $buildserver.QueueBuild($request, "None") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-19T18:06:07.597

不在 GAC 中！您需要将 dll 添加到 GAC 或试试这个

```
add-type -Path 'C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\ReferenceAssemblies\v2.0\Microsoft.TeamFoundation.Build.Workflow.dll' 
```

# android - 无法从命令行运行 android ui 测试

> ID：15949907
> 
> 赞同：1
> 
> 时间：2013-04-11T13:21:20.287
> 
> 标签：android, testing, android-emulator, android-testing, android-uiautomator

按照本教程，我为 android 应用程序创建了一个简单的 ui 测试：

[http://developer.android.com/tools/testing/testing_ui.html](http://developer.android.com/tools/testing/testing_ui.html)

现在我已经构建了我的项目并将`TestProject.jar`文件上传到虚拟设备中，使用：

```
adb push <path_to_output_jar>/TestProject.jar /data/local/tmp/ 
```

但是当我运行命令来运行我的测试时

> adb shell uiautomator runtest TestProject.jar -c com.uia.example.my.Test

我收到这个错误

> 错误：/data/local/tmp/TestProject.jar 不存在

为什么？jar 被上传到虚拟设备。我在这里错过了什么吗？

* * *

此外，使用真实设备我什至无法上传它：

> uiautomator：权限被拒绝

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:35:44.837

您能否确认`adb push`实际传输文件是否正确？有几种方法可以检查这一点：

1.  检查`adb push`命令的输出，例如`adb push bin/UIAutomatorExample.jar /data/local/tmp/`在我的例子中，输出是`1011 KB/s (5854 bytes in 0.005s)`（证据是传输的字节数。这里我们知道*某些东西*已成功传输*到某处*）。
2.  用于`adb shell`检查文件在预期位置是否可用：`adb shell ls -l /data/local/tmp/*.jar`这是我的示例的输出 `-rw-rw-rw- shell shell 5854 2013-04-11 01:36 UIAutomatorExample.jar`注意：文件大小（以字节为单位）与第一个命令输出中的数字相匹配，5854 字节。

一旦我们知道 jar 文件已成功部署到正确的位置，运行命令应该可以工作，前提是目标设备正在运行 16 版或更高版本的 Android API。（尽管实际上 17 是 UIAutomator 似乎可以可靠运行的 Android 的第一个版本。）

`adb shell uiautomator runtest LaunchSettings.jar -c com.uia.example.my.LaunchSettings`

当然你需要替换`LaunchSettings.jar`为`TestProject.jar`:)

# asp.net - Jquery Ui 选项卡加载到 asp.net 中的页面

> ID：15949909
> 
> 赞同：1
> 
> 时间：2013-04-11T13:21:24.587
> 
> 标签：asp.net, forms, gridview, jquery-ui-tabs

我在我的应用程序中使用 jquery Ui 选项卡

在此我正在加载三个不同的选项卡，每个选项卡上都有一个 asp 表单。我们知道 asp 页面必须只有一个表单，所以我从其他两个页面加载了这些内容，如下所示。

```
<li><a href="#tabs-1">Home</a></li>
<li><a href="user_info.aspx">My Uploads</a></li>
<li><a href="Enquiry.aspx">Enquiry</a></li> 
```

在 user_info.aspx 页面中，我有一个 GridView

```
 <form runat="server">
   <asp:GridView ID="GridView1" runat="server" OnRowDataBound="GridView1_RowDataBound" ></asp:GridView>     
 </form> 
```

我在我的网格视图中添加了一个分页，在更改页面时会加载该 user_info.aspx 页面。当我更改网格视图的分页页面时，有没有办法在之后加载它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:05:29.567

**编辑**：经过大量研究，我得出的结论是，这不能按照您尝试的方式完成。原因是当您将页面加载到`user_info.aspx`页面中时，您的页面`Default.aspx`中有 2 个带有 id`form1`的表单。因此，当`__doPostBack()`在 GridViews 页面中单击调用该函数时，您会得到一个 Javascript 异常，因为`__doPostBack()`被调用的是来自`Default.aspx`. 由于您从`user_info.aspx`( `GridView1`) 传递参数，因此您会收到错误消息。如果您更改页面中表单的其中一个 id，然后单击 GridView 的页面，您将得到一个 asp.net 异常，因为 ViewState 将无效（如果您还更改了表单的操作，默认.aspx）。

并非一切都是坏消息，您有一些解决方案：

**解决方案 1**：只需添加`GridView`到您的选项卡。

**解决方案 2**：添加`IFrame`指向`user_info.aspx`. 如果您真的必须将 GridView 放在不同的页面中，我会选择这个解决方案。

**示例**：

**标记**：

```
<div id="tabs-2">
    <iframe src="user_info.aspx" id="myFrame" frameborder="0"></iframe>
</div> 
```

**jQuery** :

```
$('#myFrame').load(function () {
    $(this).height($(this).contents().height());
    $(this).width($(this).contents().width());
}); 
```

这个 jQuery`IFrame`适合它的内容。它确实看起来确实属于那里（它也是无边界的），如果您更改页面，它会保留在同一个选项卡中。

**截图**：

![在此处输入图像描述](https://i.stack.imgur.com/1YKJ9.png)

# python - 在sqlite 3（python）中的表内创建表

> ID：15949917
> 
> 赞同：2
> 
> 时间：2013-04-11T13:21:50.667
> 
> 标签：python, sqlite, python-2.7

我正在尝试为食谱存储程序创建一个 sqlite 数据库，该数据库保存在食谱表中，包括人数、成分、烹饪温度和烹饪时间。我打算在成分部分创建另一个表，以存储“id”（它将自动递增）；质量数（例如，200）；质量类型（例如 g）和食物类型（例如面粉）。

我正在使用此代码来尝试获取变量并存储它们：

```
 def setIngredientsInRecipe(recipeName):
        cursor.execute("""INSERT INTO %s(ingredients) CREATE TABLE\
                    (ID INT PRIMARY KEY AUTO_INCREMENT, MassNumber VARCHAR(10), MassType VARCHAR(50) FoodType VARCHAR(50))""" % (recipeName))
        print ""
        massNoInput = raw_input("Please enter your first ingredient mass(just the number): ")
        massTypeInput = raw_input("Now please input the mass type (grams etc): ")
        foodInput = raw_input("Please enter your first ingredient type: ")

        cursor.execute("""INSERT INTO %s(ingredients(MassNumber)) VALUES('%s')""" % (recipeName,massNoInput))
        cursor.execute("""INSERT INTO %s(ingredients(MassType)) VALUES('%s')""" % (recipeName,massTypeInput))
        cursor.execute("""INSERT INTO %s(ingredients(FoodType)) VALUES('%s')""" % (recipeName,foodInput))

        return recipeName 
```

显然，我稍后会添加一些数字检查，以首先查看输入是否有效。

它在第一个 cursor.execute 行崩溃，说这是一个语法错误......

如果有人可以向我解释如何解决这个问题，我将不胜感激，我已经研究这段代码很久了！

谢谢，瑞恩:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:15:32.700

使用两张表，一张用于食谱，一张用于配料，并为每种配料记录其所属食谱的 ID：

```
CREATE TABLE recipe(ID, People, CookingTime);
CREATE TABLE ingredient(ID, RecipeID, MassNumber, MassType, FoodType); 
```

要将一种成分添加到配方中，只需在该表中插入一条记录（这里，42 是配方的 ID）：

```
INSERT INTO ingredient(RecipeID, MassNumber, MassType, FoodType) VALUES (42, ...) 
```

# java - 如何使用运行时？

> ID：15949918
> 
> 赞同：0
> 
> 时间：2013-04-11T13:21:52.743
> 
> 标签：java, shell, runtime

我想在 java 中使用下面给出的命令。我使用了运行时。但是对于 RunTime，我的结果一直是 null。

```
$ cut -d. -f2,3 <<< com.tata.titi.toto
tata.titi 
```

java中使用的方法：

```
public  void tataName() {

    try {
        Process process = Runtime.getRuntime().exec(
                new String[] { "/bin/sh", "cut -d. -f2,3 <<< com.tata.titi.toto " });
        process.waitFor();
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                process.getInputStream()));
        File f = new File(path+ "/taname.txt");
        PrintWriter writer = new PrintWriter(f, "UTF-8");
        String line = reader.readLine();
        while ((line != null)) {
            System.out.println(line);
            writer.println(line);
            line = reader.readLine();

        }

        writer.close();

    } catch (IOException | InterruptedException e1) {

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:26:50.020

删除`process.waitFor();`. 您正在运行进程，等待其终止，然后在为时已晚时尝试读取其输出。

如果删除此行，您将执行该过程并读取其输出。我希望这能帮到您。

顺便说一句，你为什么要这样做？您可以逐行读取文件并在java中拆分每一行。这*更*容易且跨平台。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:55:06.667

[http://www.rgagnon.com/javadetails/java-0014.html](http://www.rgagnon.com/javadetails/java-0014.html)但在单独的线程中进行错误流处理为什么 - 请参阅 javadoc [http://docs.oracle.com/javase/1.5.0/docs/api /java/lang/Process.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Process.html)

> 由于部分原生平台只为标准输入输出流提供有限的缓冲区大小，未能及时写入子进程的输入流或读取输出流可能会导致子进程阻塞，甚至死锁。

```
package utl;

import java.io.BufferedReader;
import java.io.FileInputStream;
import java.io.FileReader;    

public class ReadStreamAsync extends Thread {

    private BufferedReader is = null;
    private int toOut = 0;//0 none, 1 out, 2 err
    private boolean toSB = false;
    private StringBuffer sb = null;
    public ReadStreamAsync(BufferedReader is, int toOut, boolean toSB){
        if(is == null)throw new NullPointerException("stream is null");
        this.is = is;
        this.toSB = toSB;
        this.toOut = toOut;
        if(toSB)sb = new StringBuffer();
        start();
    }

    public void run(){
        try{
            int i;
            while((i = is.read()) > -1){
                if(toOut == 1){
                    System.out.print((char)i);
                }else if(toOut ==2){
                    System.err.print((char)i);
                }
                if(toSB)sb.append((char)i);
            }
        }catch(Exception e){
            e.printStackTrace();
        }finally{
                    try{
                            is.close();
                    }catch(Exception e){
                            e.printStackTrace();
                    }
                }
    }

    public String getRead(){
        return sb.toString();
    }

    /**
         * test code
     * @param args
     */
    public static void main(String[] args) {
        try{
            BufferedReader fis = new BufferedReader(new FileReader("c:/tmp/sample1.txt"));
            ReadStreamAsync t = new ReadStreamAsync(fis, 1, false);
            t.join(1000);
            System.out.println("\nAll :");
            fis = new BufferedReader(new FileReader("c:/tmp/sample1.txt"));
             t = new ReadStreamAsync(fis, 0, true);
            t.join(1000);
            System.out.println(t.getRead());

        }catch(Exception e){
            e.printStackTrace();
        }

    }

} 
```

这就是你可以使用它的方式

```
 Process proc = procBldr.start();
        //props is a java.util.properties that was previosly loaded from some stream
        System.out.println(" Cmd start f :" + cmdStartFolder);
        System.out.println(" Cmd  :" + lstCmds);
        BufferedReader isO = new BufferedReader (new InputStreamReader(proc.getInputStream()));
        BufferedReader isE = new BufferedReader (new InputStreamReader(proc.getErrorStream()));
        asynO = new com.enstage.commonutil.file.ReadStreamAsync(isO, 1, true);
        asynE = new com.enstage.commonutil.file.ReadStreamAsync(isE, 1, true);
        if("1".equals(props.getProperty("waitFor")){
            proc.waitFor();//maybe parameterize this not required everywhere only good for short processes 
        }
        String sleepAfterWait = props.getProperty("sleepAfterWait");
        try {
            Thread.sleep(500);//some sleep after telling windows to do things with files is good
            if(sleepAfterWait != null){
                int i = Integer.parseInt(sleepAfterWait);
                Thread.sleep(i);
            }
        } catch (Exception e) {
            System.out.println("sleep err :" + e );
            e.printStackTrace();
        }
        asynE.join();
        asynO.join();
        String checkString = props.getProperty("checkString");
        System.out.println("\n done " );
        //asynE.getRead();//if you want error out as a string
        if(checkString != null){
            System.out.println("checkString :" + checkString );
            String out = asynO.getRead();
            if(out.indexOf(checkString) > -1){
                System.out.println(" Check string found!" );
            }else{
                System.err.println(" *** Check string not found ***!" );
            }
        } 
```

已经使用它成功地在 .bat 和其他进程中调用 xcopy

# css - CSS Webkit 外观覆盖？

> ID：15949921
> 
> 赞同：4
> 
> 时间：2013-04-11T13:22:06.710
> 
> 标签：css, webkit

我正在尝试覆盖 -webkit 特定的 CSS 以显示表单元素。这可能吗？

```
-webkit-appearance: none; 
```

有谁知道您是否可以...显示或阻止或显示或其他什么？

```
-webkit-appearance: show; 

-webkit-appearance: block; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T13:26:59.460

[css-infos.net](http://css-infos.net/property/-webkit-appearance)列出的值如下：

```
caps-lock-indicator The indicator that appears in a password field when Caps Lock is active. Available in Safari 4.0 and later. Available in iOS 2.0 and later.
button  
button-bevel    
caret   
checkbox    
default-button  
listbox 
listitem    
media-fullscreen-button 
media-mute-button   
media-play-button   
media-seek-back-button  
media-seek-forward-button   
media-slider    
media-sliderthumb   
menulist    
menulist-button 
menulist-text   
menulist-textfield  
none    
push-button 
radio   
searchfield 
searchfield-cancel-button   
searchfield-decoration  
searchfield-results-button  
searchfield-results-decoration  
slider-horizontal, slider-vertical  
sliderthumb-horizontal  
sliderthumb-vertical    
square-button   
textarea    
textfield   
scrollbarbutton-down    Unsupported in Safari 4.0
scrollbarbutton-left    Unsupported in Safari 4.0
scrollbarbutton-right   Unsupported in Safari 4.0
scrollbarbutton-up  Unsupported in Safari 4.0
scrollbargripper-horizontal Unsupported in Safari 4.0
scrollbargripper-vertical   Unsupported in Safari 4.0
scrollbarthumb-horizontal   Unsupported in Safari 4.0
scrollbarthumb-vertical Unsupported in Safari 4.0
scrollbartrack-horizontal   Unsupported in Safari 4.0
scrollbartrack-vertical Unsupported in Safari 4.0 
```

# c++ - C++ - 作为指针的类成员，即使它可以作为值类型？

> ID：15949924
> 
> 赞同：0
> 
> 时间：2013-04-11T13:22:14.343
> 
> 标签：c++

使用前向声明时，这些类型的类成员需要是指针。您如何看待将所有类成员声明为指针，即使头文件中已包含这些类的头文件？这看起来非常一致，没有混淆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:27:47.653

这是个坏主意。指针引入了一定程度的间接性，使事情变得繁琐、不安全（至少在您不使用智能指针的情况下）并且对性能有害。

一般来说，你应该正确地包含标题，这样你就不会遇到这个问题，除非有其他原因需要使用指针（在相互依赖的情况下，有这个需要，所以使用它们是不可避免的作为成员，因此显然是“好的”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:40:54.210

假设你有一个 A 类，像这样：

```
class    A
{
    public:
        B      my_b_member;
}; 
```

需要这个B类：

```
class    B
{
    public:
        int    my_integer;
}; 
```

当然，类 A 将需要 B 的整个定义，至少描述 B 的构造函数的部分。为什么 ？当您声明您的 A 类时，它的成员之一（即 B）也将被实例化，使用其默认构造函数（不带参数）。因此，项目中需要 A 类的每个类或文件之前也必须包含 B 类定义。

拥有这样的 A 类的最大优势是：

```
class    A
{
    public:
        B*      my_b_member;
}; 
```

是您只需要声明一个**B 类**存在，其中：

`class B;`

在 A 的定义之前。

唯一需要 B 的完整定义的文件是包含 B 的类实例化的文件，例如：

```
int main(void)
{
       A    a;

       a.my_b_member = new B;
       return 0;
} 
```

所以这取决于你的项目，你想要实现的目标等等。我不会说每个类成员**都**必须是指针，因为必须通过分配它们来实例化你的类包含的每个成员意味着这些成员将被分配堆，而不是堆栈。在某些情况下，您不希望这种情况发生：

当您操作网络块时，发送指针是不可能的。

# sql-server-2008 - 如何从选择查询中获取逗号分隔值

> ID：15949927
> 
> 赞同：-2
> 
> 时间：2013-04-11T13:22:16.557
> 
> 标签：sql-server-2008

我想从 SQL Server 2008 中的选择查询数据中获取逗号分隔的 ID 列表。您对此有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:29:20.067

您可以在 Management Studio 中设置结果格式：

```
tools>option>query results>sql server>results to test>output format 
```

# php - 表单和 DOM 操作上的 PHP 安全性

> ID：15949931
> 
> 赞同：5
> 
> 时间：2013-04-11T13:22:35.263
> 
> 标签：php

我正在与一位同事就 PHP 的安全性进行有趣的讨论。

假设一个人有一个使用标准 HTML 表单运行的 PHP 站点。被攻击者决定使用 Chrome 开发者工具并添加 DOM`enctype="multipart/form-data"`和`file input`.

攻击者上传一个文件，如果它是病毒，它可能不会执行，但此时它仍在使用带宽/存储。`/tmp`文件是否会通过这样做进入 PHP目录？由于用户可以上传任何形式的文件，这不会使每个表单都有些不安全吗？

在更大的范围内，如果 100,000 人将其添加到 DOM 并上传一个随机的千兆字节文件会怎样？这不会暂时使他们达到他们的带宽和/或存储标记吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T13:31:52.820

无论如何，上传本身都会发生。该文件存储在上传临时目录中，然后启动 PHP 脚本。如果脚本不处理上传的文件，则在脚本执行完毕后，该文件会自动从临时目录中删除。

当超过最大大小时，服务器是否会中止请求，这是一个配置问题。

# c# - asp.net中的文件上传有限制吗？

> ID：15949932
> 
> 赞同：1
> 
> 时间：2013-04-11T13:22:36.137
> 
> 标签：c#, .net

我正在服务器上上传大型视频文件并使用 500 MB 文件进行测试。

但我想知道在 asp.net 中与文件大小相关的文件上传是否有任何限制。

我用过以下帖子

[如何使用api进行多部分视频上传](https://stackoverflow.com/questions/14830257/how-to-do-multi-part-video-upload-using-api)

并修改为一次读取和写入 32 KB，而不是读取内存中的完整文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:25:46.010

ASP.NET 规定的默认最大值为 4MB。但是，您可以通过[在 web config 中](http://msdn.microsoft.com/en-us/library/e1f13641%28VS.80%29.aspx)[设置`maxRequestLength`](http://msdn.microsoft.com/en-us/library/e1f13641%28VS.80%29.aspx)来更改它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:31:25.490

如果您编辑 web.config 并更改 httpRuntime 中的 maxRequestLength 属性，则它是 System.Int32，因此它的最大值为 2,147,483,647（约 2gb）。

# c# - 使用带有sharpSvn的.Switch命令不是有效的路径c#

> ID：15949933
> 
> 赞同：0
> 
> 时间：2013-04-11T13:22:36.567
> 
> 标签：c#, sharpsvn

我正在使用sharpsvn库，我想做一个切换，但它一直给我以下错误：

> *“此参数不是有效路径。指定了 Uri。”*

我检查了路径是否正常并且路径是否良好任何想法有什么问题？

```
var configpath2 = "http://website.com/svn/CMS/trunk/Configuration";

teststring = localpath + @"\trunk\Configuration\CMS";
svnClient.Switch(new Uri(teststring).ToString(), new SvnUriTarget(new Uri(configpath2))); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:55:11.823

一些相关链接：

1.  [http://docs.sharpsvn.net/current/html/M_SharpSvn_SvnClient_Switch_1.htm](http://docs.sharpsvn.net/current/html/M_SharpSvn_SvnClient_Switch_1.htm)
2.  [http://docs.sharpsvn.net/current/html/Overload_SharpSvn_SvnClient_Switch.htm](http://docs.sharpsvn.net/current/html/Overload_SharpSvn_SvnClient_Switch.htm)

正如我通过阅读上述页面所了解的那样，您必须`string`将`Switch`. 试试这个：

```
svnClient.Switch(teststring, new SvnUriTarget(new Uri(configpath2))); 
```

# module - 在 joomla 2.5.8 中安装客户模块时出错

> ID：15949934
> 
> 赞同：0
> 
> 时间：2013-04-11T13:22:37.043
> 
> 标签：module, joomla2.5

我正在尝试根据 joomla 2.5 的文档学习为 joomla 2.5.8 创建模块，但无法正确安装。当我安装模块时..它显示错误

**错误**

Jfolder::Create: 无法创建目录

警告：无法移动文件。

我用来学习创建模块的来源是

[http://docs.joomla.org/Creating_a_Module_for_Joomla_2.5](http://docs.joomla.org/Creating_a_Module_for_Joomla_2.5)

而且我没有从我这边进行任何更改...我只是按照站点说明进行操作。即使我把整个代码放在受尊重的文件中，也像在站点说明中那样为文件命名。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:04:00.677

似乎您在文件夹上设置了不正确的权限。登录到管理面板，然后选择站点 -> 系统信息 -> 目录权限并检查它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T09:46:02.190

在 Dmitry Rekun 的宝贵帮助下，我得到了我的问题的解决方案。我曾尝试以两种方式使该目录可写，但我仍然面临一个问题，即目录 LOG 和 TMP 的权限仍显示为不可写。所以最后我检查了 config.php 文件（配置文件）并且我发现了代码的变化......这是保留目录权限不可写的原因的代码是

![在此处输入图像描述](https://i.stack.imgur.com/a4iXT.png)

在做出此代码注释后，我将代码更改如下，错误得到解决。

![在此处输入图像描述](https://i.stack.imgur.com/SLW7Z.png)

因此，如果您仍然因为目录不可写而出现错误，请检查 configuration.php 文件。:)

# java - 在 java 和 .net 之间转换日期 - 休息 2 天

> ID：15949938
> 
> 赞同：3
> 
> 时间：2013-04-11T13:22:41.070
> 
> 标签：java, .net, datetime, calendar, gregorian-calendar

我需要将 .NET`DateTime`转换为等效的 Java`Calendar`表示。

.NET`DateTime`使用`Ticks`自*0001 年 1 月 1 日*（.NET 纪元）以来的底层表示。

*自1970 年 1 月 1 日*（Java（或 Unix）时代）以来，Java`GregorianCalendar`使用毫秒。正如预期的那样，对于 Java 纪元之前的日期，该值为负数。

 *`DateTime`自*Java*时代以来，我在这里以毫秒为单位转换表示形式：

```
var dt = new DateTime(1,2,3);  //way, way back.
var javaEpoch = new DateTime(1970, 1, 1);

var javaMillis = (dt - javaEpoch).Ticks / TimeSpan.TicksPerMillisecond;

dt.ToString("MM/dd/yyyy").Dump();          // .Dump() is provided by LinqPad. 
javaMillis.Dump();                         // Use Console.WriteLine(...)
                                           // for a regular console app. 
```

这输出：

> 02/ **03** /0001
> -62132745600000

现在复制粘贴此 Java 代码片段中的毫秒值：

```
java.util.Calendar cal = new java.util.GregorianCalendar();
cal.setTimeInMillis(-62132745600000L);
java.text.SimpleDateFormat df = new java.text.SimpleDateFormat();
df.applyPattern("MM/dd/yyyy");
System.out.println(df.format(cal.getTime())); 
```

这输出：

> 02/ **05** /0001

我想我的问题是：我应该如何从 DateTime 中获取有效的毫秒值，从中我可以正确地构造 Java 日历？

...带有隐含的子问题“这里到底发生了什么？”

编辑：我在从儒略历到公历的缺失日期范围内使用 DateTimeValues（1582 年 10 月 4 日“紧随”1582 年 10 月 15 日）。

对于 1582 年 10 月 15 日之后的日期，转换似乎工作正常。

...但是在缺失的范围内， DateTime 开始（或者更确切地说，*不*开始）表现得有趣：

```
var timespan = new DateTime(1582, 10, 15) - new DateTime(1582, 10, 4); 
```

返回`TimeSpan`11 天的 a，因此 DateTime 运算符不考虑该漏洞。是什么赋予了？我认为底层实现是基于`System.Globalization.GregorianCalendar`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-12T04:07:08.777

令人惊讶的是，没有人真正回答过为什么在 1582 年 10 月 4 日至 1582 年 10 月 15 日之间公历中存在一个“洞”的问题。有趣的答案是在 1582 年采用公历作为改革的历史中到儒略历。有关详细信息，请参阅[Wikipedia 关于公历的文章](http://en.wikipedia.org/wiki/Gregorian_calendar)。历史中的最后一段：格里高利改革段落指出

> *   格雷戈里（教皇格雷戈里十三世）减少了 10 天，以使日历恢复与季节同步。因此，当新历法投入使用时，自尼西亚会议以来 13 世纪以来积累的错误被删去十天来纠正。1582 年 10 月 4 日星期四是儒略历日，随后是 1582 年 10 月 15 日星期五的公历第一天（工作日周期不受影响）。 *

实际上，公历中不存在从 1582 年 10 月 5 日到 1582 年 10 月 14 日的日期。我怀疑 .Net 框架使用了一个通用公式，并且在处理 1582 年 10 月 15 日之前的日期时没有考虑到差异，而 Java 库确实考虑了这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T15:04:11.190

从[Java 文档](http://docs.oracle.com/javase/6/docs/api/java/util/GregorianCalendar.html)：

> [...] 使用获得的日期`GregorianCalendar`仅在公元 4 年 3 月 1 日之后在历史上是准确的，当时采用现代儒略历规则

考虑到你的`DateTime`减法，这只是一个`Ticks`区别，这里绝对没有特定日历的概念。实现基本是`return new TimeSpan(x.Ticks - y.Ticks)`.

您可能更擅长简单地输出然后解析没有歧义的[ISO-8061](http://en.wikipedia.org/wiki/ISO_8601)日期/时间`0001-02-03T00:00:00Z`，而不是依赖于内部表示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T17:41:15.447

回答“为什么”：

来自（反编译 - 感谢 dotPeek！）.NET 4 源代码（评论是我的）：

```
public static DateTime operator -(DateTime d, TimeSpan t)
{
  //range checks
  long internalTicks = d.InternalTicks;
  long num = t._ticks;
  if (internalTicks < num || internalTicks - 3155378975999999999L > num)
    throw new ArgumentOutOfRangeException("t", 
            Environment.GetResourceString("ArgumentOutOfRange_DateArithmetic"));

    else

    //plain arithmetic using the Ticks property of the two dates.
    return new DateTime((ulong) (internalTicks - num) | d.InternalKind);
} 
```

所以，是的，对于 DateTime 运算符，绝对没有特殊的“公历”处理。

关于“如何修复”：

我最终使用了这些方面的东西：（伪Java）

```
Calendar cal = new GregorianCalendar();
cal.set(dt.Year, dt.Month - 1 /*it's 0-based*/, dt.Day, dt.Hour, dt.Minute, dt.Second);
cal.set(Calendar.MILLISECOND, dt.Millisecond); 
```*

# apache - 国际网站（英语和德语），URL 中包含 GETTEXT 和 VIRTUAL 子目录

> ID：15949939
> 
> 赞同：1
> 
> 时间：2013-04-11T13:22:42.920
> 
> 标签：apache, internationalization, gettext, multilingual, subdirectory

我有一个使用两种语言的网站：英语和德语。目前，我们使用一个 cookie 来存储用户的首选语言 (en/de) 并`GETTEXT()`相应地设置语言：

```
example.com/about-us.php 
```

根据 Cookie 从我们的服务器页面“local-path-webspace/about-us.php”加载英文或德文。

但是，谷歌无法抓取我们的德语页面，因为他们的抓取工具没有设置 cookie。

我们想要实现的是，用户现在可以使用他们喜欢的语言键入带有虚拟子目录的 URL：

```
example.com/en/about-us.php 
```

对于英语和

```
example.com/de/about-us.php 
```

为德语。

上面的两个页面都应该在我们的服务器上加载同一个文件`local-path-webspace/about-us.php`，即文件夹`/en`，并且`/de`是 VIRTUAL （在现实中应该不存在以避免代码冗余）。

在文件内部`about-us.php`，我们应该能够知道调用了哪个虚拟文件夹（`/en`或`/de`），以便能够定义将定义 GETTEXT 语言的会话变量。理想情况下使用`$SERVER["REQUEST URI"]`PHP 的一些全局变量。

我们尝试使用`ALIAS_MOD in APACHE`替换但没有成功。这是正确的方法吗？

任何帮助将非常感激！

# php - jQuery获取选择表单项的值

> ID：15949941
> 
> 赞同：0
> 
> 时间：2013-04-11T13:22:55.040
> 
> 标签：php, javascript, jquery, html

对，所以我在一个页面上有多个这样的表单（编辑，因为不清楚这是在 PHP 中使用的，我在 PHP 和 echo 标签中添加了）：

```
 <?PHP
 echo "<form action="" method="post" id="form$field2">";
 echo "<select id="popup" name="state" >";
 echo "<option class="apple-hidden" value="$statitem1">$statitem1</option>";
 echo "<option class="apple-hidden" value="$statitem2">$statitem2</option>";
 echo "<option class="apple-hidden" value="$statitem3">$statitem3</option>";
 echo "<option class="apple-hidden" value="$statitem4">$statitem4</option>";
 echo "<option class="apple-hidden" value="$statitem5">$statitem5</option>";
 echo "<option class="apple-hidden" value="$statitem6">$statitem6</option>";
 echo "<option class="apple-hidden" value="$statitem7">$statitem7</option>";
 echo "<option class="apple-hidden" value="$statitem8">$statitem8</option>";
 echo "<option class="apple-hidden" value="$statitem9">$statitem9</option>";
 echo "</select>";
 echo "<input type="hidden" name="bnum" value="$field2,$user">";
 echo "</form>";
 ?> 
```

并且我有一些 javascript，因此每当更改表单时，它都会使用 AJAX 提交 POST 数据并将表格单元格变为绿色。

```
<script type="text/javascript">
    var bnum;
    bnum = '$formname',

    $('form').change(function() {
        console.log(bnum);      

        $.ajax("http://myApp.example.org/alert?title=Test%20from%20AJAX&message=this%20is%20a%20message%20from%20an%20AJAX%20request");
        $(this).closest("td").css("background", "#01DF01");

        $.ajax({ 
            type: 'post',
            url: 'process.php?item1=$urlvar3',
            data: $(this).serialize(),
            success: function() {
            }
        });
        return false;
    });  
</script> 
```

现在我要做的是获取下拉列表的新值并将其打印到控制台。我试过了：

```
 console.log($("#popup").val()); 
```

这有效，但仅适用于页面上的第一个表单。我想要做的是从我提交的表单中获取数据，所以我尝试了：

```
 console.log($(this).val()); 
```

但这会返回 NULL。

一如既往地感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:24:09.960

尝试更换

```
$('form').change(function() 
```

和

```
$('#popup').change(function() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:25:54.843

尝试这个：

```
console.log($(this).find("#popup").val()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T13:27:56.433

`id`应该在文档中是唯一的。

更好的访问器将是

```
$('#popup',this) 
```

或没有重复`id`（并假设只有一个选择）

```
$('select',this) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T13:28:27.650

听起来您在页面上多次使用相同的 ID，这是无效的。ID 应该是唯一的。相反，只需完全摆脱 ID 属性并按名称搜索它：

```
console.log($(this).find('select[name="popup"]').val()); 
```

# delphi - 带有 Free Pascal 的 TIdHTTPServer 的 UTF-8 响应

> ID：15949945
> 
> 赞同：2
> 
> 时间：2013-04-11T13:23:02.273
> 
> 标签：delphi, http, indy, freepascal, indy10

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T17:59:03.277

FreePascal 字符串不像在 Delphi 2009+ 中那样采用 UTF-16 编码。在 FreePascal 和 Delphi 2007 及更早版本中，您的代码需要考虑实际的字符串编码。这就是 Indy 为这些平台公开其他基于 Ansi 的参数/属性的原因。

当`TIdHTTPServer`写出`ContentText`using`TIdIOHandler.Write()`时，该`ASrcEncoding`参数不会在非 Unicode 平台上使用，因此您将不得不使用该`TIdIOHandler.DefAnsiEncoding`属性来`Write()`告知 the 的编码`ContentText`是什么，例如：

```
procedure TMyServer.DoCommandGet(AContext: TIdContext;
  ARequestInfo: TIdHTTPRequestInfo; AResponseInfo: TIdHTTPResponseInfo);
const
  UNI: WideString = '中文';
begin
  AResponseInfo.ContentText := UTF8Encode('<html>' + UNI + '</html>');
  AResponseInfo.ContentType := 'text/html';

  // this tells TIdHTTPServer what to encode bytes to during socket transmission
  AResponseInfo.CharSet := 'utf-8';

  // this tells TIdHTTPServer what encoding the ContentText is using
  // so it can be decoded to Unicode prior to then being charset-encoded
  // for output. If the input and output encodings are the same, the
  // Ansi string data gets transmitted as-is without decoding/reencoding...
  AContext.Connection.IOHandler.DefAnsiEncoding := IndyUTF8Encoding;
end; 
```

或者，更一般地说：

```
{$I IdCompilerDefines.inc}

procedure TMyServer.DoCommandGet(AContext: TIdContext;
  ARequestInfo: TIdHTTPRequestInfo; AResponseInfo: TIdHTTPResponseInfo);
const
  UNI{$IFNDEF STRING_IS_UNICODE}: WideString{$ENDIF} = '中文';
begin
  {$IFDEF STRING_IS_UNICODE}
  AResponseInfo.ContentText := '<html>' + UNI + '</html>';
  {$ELSE}
  AResponseInfo.ContentText := UTF8Encode('<html>' + UNI + '</html>');
  {$ENDIF}
  AResponseInfo.ContentType := 'text/html';
  AResponseInfo.CharSet := 'utf-8';
  {$IFNDEF STRING_IS_UNICODE}
  AContext.Connection.IOHandler.DefAnsiEncoding := IndyUTF8Encoding;
  {$ENDIF}
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:36:22.363

在现代 FreePascal 中，字符串默认为 UTF-8，除非您调整了编译器选项。

因此，它`iif(ASrcEncoding, FDefAnsiEncoding, encOSDefault);`的值似乎`encOSDefault`是错误的。如果您愿意，您可以在 INDY 源中修复它的检测，或者我猜最好设置`DefAnsiEncoding := 'utf-8';`（RFC AFAIR 的小写）

为了安全起见，您可以在程序开始时检查 UTF-8 模式。设置一些非拉丁语常量（比如那个中文的东西，或者希腊语或西里尔字母 - 随便）并检查它是否是 UTF8： http: [//compaspascal.blogspot.ru/2009/03/utf-8-automatic-detection。 html](http://compaspascal.blogspot.ru/2009/03/utf-8-automatic-detection.html)

但是总的来说，我认为您可能会尝试找到一些比 Indy 更关心 FPC 和 Linux 的库。在我看来，Indy 似乎停滞不前，甚至在 Delphi 上也几乎被抛弃。也许（查找 DataSnap 性能测试文章）可以帮助您或发行版`Synopse mORMot`附带的一些库。`CodeTyphon`

# java - Programmatically access Jenkins URL?

> ID：15949946
> 
> 赞同：3
> 
> 时间：2013-04-11T13:23:03.717
> 
> 标签：java, url, jenkins, jenkins-plugins

How can I programmatically access Jenkins URL field that is configured through Manage Jenkins > Configure System > Jenkins Location?

I tried `Computer.currentComputer().getUrl()` but returns only `computer/(master)/`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T13:55:30.313

这是我用来做的方式：

```
JenkinsLocationConfiguration globalConfig = new JenkinsLocationConfiguration();
globalConfig.getUrl() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T19:02:05.153

除了其他答案的[JenkinsLocationConfiguration 类](http://javadoc.jenkins-ci.org/jenkins/model/JenkinsLocationConfiguration.html)，[Jenkins.getInstance.getRootUrl()](http://javadoc.jenkins-ci.org/jenkins/model/Jenkins.html#getRootUrl%28%29)返回配置的url。

还要检查[Jenkins.getInstance.getRootUrlFromRequest()](http://javadoc.jenkins-ci.org/jenkins/model/Jenkins.html#getRootUrlFromRequest%28%29)，它返回正在使用的真实 url，但仅在处理请求时。

# c# - WebRequest 响应在多线程环境中混合

> ID：15949949
> 
> 赞同：0
> 
> 时间：2013-04-11T13:23:11.720
> 
> 标签：c#, multithreading, httpwebrequest, webrequest

我正面临一个混杂在一起的网络请求响应。

我正在移动设备（Pocket PC 2003）上开发一个 C# 项目。

**这是上下文**

我的软件每 5 秒运行一个线程来 ping 服务器、发送其状态并检索一些服务器信息：函数`ping()`

根据用户界面，我联系同一个服务器来声明一个新的用户操作：函数`sendNewEvent()`

这两个动作使用以下函数`request()`联系服务器，等待其响应并返回服务器响应。

它正在工作，但在某些情况下，服务器响应是混淆的：该`ping()`函数接收该函数的响应`sendNewEvent()`，即使这些函数没有同时播放。

我不明白它是如何以及为什么可能的。有没有人尝试过同样的问题？

`request()`函数中是否存在非线程安全的内容（HttpWebResponse、WebRequest、...） ？

**更新**

我确信服务器会按请求发送正确的数据。所有请求和服务器响应都记录到数据库表中。

我尝试了这个解决方案，但在我的情况下它不起作用：[在多个线程中使用时，HttpWebResponse 会混淆](https://stackoverflow.com/questions/3045449/httpwebresponse-get-mixed-up-when-used-inside-multiple-threads)

```
 public string request(string xUrl)
    {
        try
        {
            // authentication
            CredentialCache cc = new CredentialCache();
            cc.Add(new Uri(xUrl), "Basic", new NetworkCredential(PropertiesFile.getWSUser(), PropertiesFile.getWSPwd()));                

            // Create a request for the URL.        
            WebRequest request = WebRequest.Create(xUrl);
            request.Timeout = 5000;
            //request.KeepAlive = true;
            request.Credentials = cc;
            // Get the response.
            HttpWebResponse response = (HttpWebResponse)request.GetResponse();
            // Get the stream containing content returned by the server.
            Stream dataStream = response.GetResponseStream();
            // Open the stream using a StreamReader for easy access.
            StreamReader reader = new StreamReader(dataStream);
            // Read the content.
            string responseFromServer = reader.ReadToEnd();
            // Cleanup the streams and the response.
            reader.Close();
            dataStream.Close();
            response.Close();

            return responseFromServer;
        }
        catch(Exception e)
        {
            if (PropertiesFile.getShowDebugMessageBox())
                MessageBox.Show("WebCalls request exception : " + e.Message);

            return null;
        }
    } 
```

# php - 如何在 heredoc 中传递 $_POST 变量

> ID：15949955
> 
> 赞同：-2
> 
> 时间：2013-04-11T13:23:25.763
> 
> 标签：php, heredoc

我正在创建一些代码，这些代码将生成一个带有配置类的新页面。我像下面这样使用[了heredoc 。](https://en.wikipedia.org/wiki/Here_document#PHP)所以我想将 $_POST['hostname'] 变量传递到heredoc。我尝试了很多东西，但没有运气。我该怎么做？

```
<?php
    if(isset($_POST['hostname'])) {
        $HOSTNAME = $_POST['hostname'];
    }

    if(isset($_POST['database'])) {
        $DATABASE = $_POST['database'];
    }

    if(isset($_POST['dbuser'])) {
        $USER = $_POST['dbuser'];
    }

    if(isset($_POST['dbuserpassword'])) {
        $PASSWORD = $_POST['dbuserpassword'];
    }

    $pardConfig = new PDO('mysql:host='.$HOSTNAME.';'.'dbname='.$DATABASE, $USER, $PASSWORD, array(
        PDO::ATTR_PERSISTENT => true
    ));

    if(isset($pardConfig)) {
        echo "connected";
    }

    $SQL =<<<'EOD'
    CREATE TABLE IF NOT EXISTS pard_host (
        host varchar(255) NOT NULL,
        db varchar(255),
        db_user varchar(255) NOT NULL,
        db_pass varchar(255)
    )
    EOD;

    $sq = $pardConfig->query($SQL);

    if ($sq) {
        echo 'created';
    }

    $stmt = $pardConfig->prepare("INSERT INTO pard_host (host, db, db_user, db_pass) VALUES (?, ?, ?, ?)");
    $stmt->bindParam(1, $HOSTNAME);
    $stmt->bindParam(2, $DATABASE);
    $stmt->bindParam(3, $USER);
    $stmt->bindParam(4, $PASSWORD);
    $stmt->execute();

    $PARD_CONFIGURATION_CLASS = <<<'EOT'

    class pardConfig {
        public $HOSTNAME = echo $DATABASE;;
        public $DATABASE = echo $DATABASE;
        public $USER      = echo $USER;
        public $PASSWORD = echo $PASSWORD;
    }
    EOT;

    $PARD_FILE_OPEN = fopen("configuration.php", "w+");
    fwrite($PARD_FILE_OPEN,$PARD_CONFIGURATION_CLASS );

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:34:06.380

删除 heredoc 标识符周围的引号。

```
$PARD_CONFIGURATION_CLASS = <<<EOT 
```

如果您保留引号，则称为 nowdoc。[PHP 文档](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.nowdoc)是这样说的：

> Nowdocs 是单引号字符串，就像 heredocs 是双引号字符串。nowdoc 的指定与heredoc 类似，但在nowdoc 内部不进行解析

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:44:55.923

你是这个意思吗：

```
$variable = "Test"; //Can be any variable; may be $_POST['name']
//Using '{' and '}' special characters in PHP strings.
$string = <<<HEREDOC
{$variable}
HEREDOC;

echo $string ; 
```

# azure - CMD 文件作为启动任务和通过 RDP 手动执行的反应不同

> ID：15949962
> 
> 赞同：1
> 
> 时间：2013-04-11T13:23:50.073
> 
> 标签：azure, cmd, role

我想在 azure 中建立一个负载测试台。我为 2 个角色创建了 2 个项目，并让实例下载并设置了 TestAgent 和 TestController。这对测试代理非常有用！

但它不适用于控制器设置：我创建了一个运行 .cmd 文件的启动任务，该文件下载并安装了 TestController。奇怪的是：执行了 cmd 文件（通过登录到 outfile 来证明），但它没有安装 TestController。现在，当实例上的 ich RDP 并手动启动 cmd 文件时，一切正常！

这是我的启动任务定义：

```
 <WorkerRole name="TestController" vmsize="ExtraSmall">
    <Startup>
      <Task executionContext="elevated" taskType="simple" commandLine="setupController.cmd"></Task> 
```

我也尝试了 taskType 背景，没有什么不同。

这是我的命令文件：

```
powershell $command = "set-executionpolicy Unrestricted"
powershell $command = ".\setupController.ps1" -NonInteractive >; out.txt
echo Setup TestController >> out.txt
.\testcontroller.exe /full /q >> out.txt
echo Setup was executed! >> out.txt
net user vstestagent password! /add
net localgroup Administrators vstestagent /add
REM Create a task that will run with full network privileges.
net start Schedule
schtasks /CREATE /TN "Configure Test Controller Service" /SC ONCE /SD 01/01/2020 /ST 00:00:00 /RL HIGHEST /RU vstestagent /RP password! /TR e:\approot\configcontroller.cmd /F
schtasks /RUN /TN "Configure Test Controller Service" 
```

有谁知道这个问题？我认为这可能是一个权限问题，但 executionContext="elevated" 具有管理权限...

最好的问候塞巴斯蒂安

编辑：我搜索了 Windows 事件日志，发现我的 CMD 已执行，但没有安装 testcontroller.rexe。

![图1](https://i.stack.imgur.com/7F9Uu.png) ![图2](https://i.stack.imgur.com/R6LCn.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:05:28.860

基于上面我可以想到一个问题是，当你的批处理文件被执行时，testcontroller.exe 不在正确的路径中，所以它没有被执行。设置提升选项后，您的应用程序应该可以准确运行。

我只是整理了一个快速测试场景来启动一个控制台应用程序，它只返回一个字符串，可以通过重定向保存并从启动任务启动。

第 1 步：创建一个简单的 ConsoleApp，如下所示：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApp
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("Todays date & time is {0}", DateTime.Now);
        }
    }
} 
```

第 2 步：创建一个启动文件夹来放置 ConsoleApp.exe 和 Startup.cmd，如下所示。我还将文件属性设置为“始终复制”，因此它们是包的一部分。

![在此处输入图像描述](https://i.stack.imgur.com/HWKJP.png)

第 3 步：这是我的 Statup.cmd：

```
 @ECHO ON
 @ECHO "Launcher"
 md C:\temp
 Startup\ConsoleApp.exe  >> C:\temp\out.log
 exit /b 0 
```

第 4 步：现在，当我将应用程序和远程部署到我的机器中时，我可以看到在我的驱动器 C: 中创建了一个**临时**文件夹，并且里面有 out.log 以及文件创建时的时间戳。

您可以尝试完全相同，看看您的控制台应用程序 TestController 是否首先执行，然后修改您的批处理文件以获得更多功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T09:42:17.860

我仍然不知道为什么会这样，但是如果您通过计划任务进行安装，安装就可以了。

因为我认为唯一的区别可能是安装软件的帐户，所以我首先尝试通过 runas 命令安装测试控制器，但我无法将密码与命令一起传递。因此，我创建了一个用于安装测试控制器的计划任务，并且能够将用户凭据与命令一起传递。现在我的 setupController.cmd 看起来像这样：

```
powershell $command = "set-executionpolicy Unrestricted"
powershell $command = ".\setupController.ps1" -NonInteractive >; out.txt
echo Setup TestController >> %~dp0out.txt
cd E:\approot
echo Setup has been executed! >> %~dp0out.txt
net user vstestagent MyPassword! /add
net localgroup Administrators vstestagent /add
REM Create a task that will run with full network privileges.
net start Schedule
schtasks /CREATE /TN "Install Test Controller Service" /SC ONCE /SD 01/01/2020 /ST 00:00:00 /RL HIGHEST /RU vstestagent /RP MyPassword! /TR "E:\approot\testcontroller.exe /full /q /Log %~dp0install.log" /F
schtasks /RUN /TN "Install Test Controller Service"
timeout /T 120
schtasks /CREATE /TN "Configure Test Controller Service" /SC ONCE /SD 01/01/2020 /ST 00:00:00 /RL HIGHEST /RU vstestagent /RP MyPassword! /TR e:\approot\configcontroller.cmd /F
schtasks /RUN /TN "Configure Test Controller Service" 
```

希望它也对其他人有所帮助。

# android - How could I setText in my activity of a textView in common layout for a ViewPager in Android?

> ID：15949964
> 
> 赞同：0
> 
> 时间：2013-04-11T13:24:00.123
> 
> 标签：android, android-fragments, nullpointerexception, android-viewpager, settext

Update of the code: my problem is a nullPointerExeption on the line :

```
test.setText("try"); 
```

because the line

```
test=(TextView)myPager.findViewById(R.id.txtPagerDate); 
```

return a null view

My code:

MainMeteo.java :

```
public class MainMeteo extends FragmentActivity {

    ViewPager myPager;
    ViewPagerAdapterBis myPagerAdapter;
    TextView test;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_meteo);
        myPagerAdapter = new ViewPagerAdapterBis(getSupportFragmentManager());
        myPager=(ViewPager)findViewById(R.id.panelpager);
        myPager.setAdapter(myPagerAdapter);

        test=(TextView)myPager.findViewById(R.id.txtPagerDate);
        test.setText("try");

    }

} 
```

ViewAdapterBis.java:

```
 public class ViewPagerAdapterBis extends FragmentStatePagerAdapter {
    public ViewPagerAdapterBis(FragmentManager fm) {
        super(fm);
        // TODO Auto-generated constructor stub
    }
    @Override
    public Fragment getItem(int i) {
        Fragment fragment = new ViewPagerAdapterObject();
        Bundle args = new Bundle();
        // Our object is just an integer :-P
        args.putInt(ViewPagerAdapterObject.ARG_OBJECT, i + 1);
        fragment.setArguments(args);
        return fragment;
    }

    @Override
    public int getCount() {
        return 15;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        return "OBJECT " + (position + 1);
    }

} 
```

ViewPagerAdapterObject.java

```
public class ViewPagerAdapterObject extends Fragment {

    public static final String ARG_OBJECT = "object";

    @Override
    public View onCreateView(LayoutInflater inflater,
            ViewGroup container, Bundle savedInstanceState) {
        // The last two arguments ensure LayoutParams are inflated
        // properly.
        View rootView = inflater.inflate(R.layout.meteo_pager, container, false);
        return rootView;
    }
} 
```

And my two xml layout:

meteo_pager.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/txtPagerDate"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="4dp"
        android:text="Date az zaza"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/txtPagerMaxMin"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/txtPagerDate"
        android:layout_marginBottom="1dp"
        android:layout_marginTop="1dp"
        android:text="Max | Min"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/txtPagerPrecipitations"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/txtPagerMaxMin"
        android:layout_marginBottom="1dp"
        android:layout_marginTop="1dp"
        android:text="Précipitations"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/txtPagerVent"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/txtPagerPrecipitations"
        android:layout_marginBottom="1dp"
        android:layout_marginTop="1dp"
        android:text="Vent"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/txtPagerNeige"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/txtPagerVent"
        android:layout_marginBottom="1dp"
        android:layout_marginTop="1dp"
        android:text="Neige"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/txtPagerDate"
        android:src="@android:drawable/spinner_background" />

</RelativeLayout> 
```

main_meteo.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    tools:context=".MainMeteo" >

    <TextView
        android:id="@+id/txtPays"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/txtVille"
        android:layout_centerHorizontal="true"
        android:layout_margin="3dp"
        android:text="Pays"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <TextView
        android:id="@+id/txtPagerDate"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/txtPays"
        android:layout_marginBottom="5dp"
        android:layout_marginTop="5dp"
        android:text="Actuellement" />

    <TextView
        android:id="@+id/txtPagerVent"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/txtPagerDate"
        android:layout_below="@+id/txtPagerDate"
        android:layout_margin="2dp"
        android:text="Vent" />

    <TextView
        android:id="@+id/txtHumidite"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/txtPagerVent"
        android:layout_margin="2dp"
        android:text="Humidité" />

    <TextView
        android:id="@+id/txtMoyenneTemps"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/txtVisibilite"
        android:layout_margin="2dp"
        android:text="Mostly" />

    <TextView
        android:id="@+id/txtVisibilite"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/txtcouvNuage"
        android:layout_margin="2dp"
        android:text="Visibilité" />

    <TextView
        android:id="@+id/txtcouvNuage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/txtPrecipitation"
        android:layout_margin="2dp"
        android:text="Couv. nuage" />

    <TextView
        android:id="@+id/txtTemperature"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignTop="@+id/txtPagerVent"
        android:text="x°"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/txtRessentie"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/txtTemperature"
        android:text="Ressentie"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/txtPrecipitation"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/txtHumidite"
        android:layout_margin="2dp"
        android:text="Precipitation" />

    <TextView
        android:id="@+id/txtVille"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="2dp"
        android:text="Ville"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/txtPagerMaxMin"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/txtMoyenneTemps"
        android:layout_marginBottom="5dp"
        android:layout_marginTop="5dp"
        android:text="15 prochains jours" />

    <android.support.v4.view.ViewPager
        android:id="@+id/panelpager"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/txtPagerMaxMin" >

    </android.support.v4.view.ViewPager>

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/txtPagerMaxMin"
        android:layout_alignLeft="@+id/txtRessentie"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/txtRessentie"
        android:src="@android:drawable/progress_indeterminate_horizontal" />

</RelativeLayout> 
```

If you need more information, just ask me.

the first question before update :

[http://www.sendspace.com/file/npf0q8](http://www.sendspace.com/file/npf0q8)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:21:42.097

问题是您试图获取在不是设置的 contentView (activity_main) 的布局中声明的视图。

您可以尝试为您的 page_test 增加 View 并以这种方式获取您的 textview，如下所示：

```
LayoutInflater inflater =(LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View v = inflater.inflate(R.layout.meteo_pager, null);
test = (TextView)v.findViewById(R.id.txtPagerDate);
test.setText("try"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:41:39.143

视图都使用相同的布局应该不是问题。如果您使用的是，`ViewPager`您应该能够获得`View`正在显示的内容（或您想要的内容），然后修改对该特定视图的`TextView`调用值。`findViewById`例如，要更改`TextView`当前正在显示的视图中的 a：

获取具有要更改的 TextView 的视图

```
View v = MainActivity.myPager.getChildAt(position) //position = index of view in pager 
```

在该视图中找到所需的 TextView

```
TextView nameToChange = (TextView) v.findViewById(R.id.name); 
```

然后你应该能够使用更改文本

```
nameToChange.setText(newName); 
```

# c# - 如何使工作“不要复制” app.config 到输出目录？

> ID：15949968
> 
> 赞同：2
> 
> 时间：2013-04-11T13:24:07.193
> 
> 标签：c#, .net, visual-studio-2010, build

我在做什么：

1.  创建新的 WPF 应用程序项目
2.  将 App.config 添加到项目中
3.  构建项目
4.  打开 App.config 属性并将“复制到输出目录”参数设置为“不复制”
5.  *对App.config*进行一些更改
**   转到`bin\Debug`文件夹并将只读属性设置为文件*WpfApplication1.exe.config**   重建项目*

 *结果：

```
Error   2   Unable to copy file "App.config" to "bin\Debug\WpfApplication1.exe.config". Access to the path 'bin\Debug\WpfApplication1.exe.config' is denied.    WpfApplication1 
```

为什么VS仍然试图复制文件，以及如何强制它停止这样做？

PS 我正在几台远程计算机上调试我的应用程序（根据需要在它们之间切换），每台计算机都应该有自己的配置。这就是为什么我不希望 VS 覆盖每个构建的配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:06:16.587

App.config 的默认值为“不复制”，并且在该构建过程的那部分中不会复制。如果您想要不同版本的构建（ Debug_1, Debug_2,... ）制作预构建事件脚本以根据构建类型将 App.config.debug_1 或 App.config.debug_2,... 复制到 App.config。

我认为您无法更改 Visual Studio 复制 app.config 的方式。但我认为这可能是你的解决方案。把它放在程序的开头。

```
#if DEBUG_1
    AppDomain.CurrentDomain.SetData("APP_CONFIG_FILE", "debug_1.config");
#endif
#if DEBUG_2
    AppDomain.CurrentDomain.SetData("APP_CONFIG_FILE", "debug_2.config");
#endif
... 
```

这样配置文件将被复制，但不会被使用。只需复制该配置并进行所需的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:31:02.020

如果您真的需要强制停止 VS 更改您的配置，最简单的方法可能是编写简单的脚本来保护配置：

将脚本 backup-config 的执行添加到 pre-build 和 restore-config 到 after-build。备份配置应该将配置复制到安全的地方，并且在 VS 更改它之后，恢复应该将其复制回来。*

# jquery - get youtube oembed json with ajax

> ID：15949969
> 
> 赞同：2
> 
> 时间：2013-04-11T13:24:08.093
> 
> 标签：jquery, ajax, json, youtube, oembed

I am try to get oembed code of youtube link with ajax but it returns always error I am using ajax with Jquery

```
 $.ajax({
        method: 'GET',
        dataType :'json',
        url:'http://www.youtube.com/oembed?url=http://www.youtube.com/watch?v=wbp-3BJWsU8&format=json',
        success:function(data){
            alert(data);
        },
        error: function(error) {
            alert(error);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:27:12.440

尝试以下

```
 $.ajax({
            url: 'http://query.yahooapis.com/v1/public/yql',
                data: {
                    q: "select * from json where url ='http://www.youtube.com/oembed?url=http://www.youtube.com/watch?v=wbp-3BJWsU8&format=json'",
                    format: "json"
                },
                dataType: "jsonp",
            success: function (data) {

                alert(JSON.stringify(data));

            },
            error: function (result) {
                alert("Sorry no data found.");
            }
        }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T13:33:04.997

尝试这个 ：-

现场演示：-

[http://jsfiddle.net/YFtvU/8/](http://jsfiddle.net/YFtvU/8/)

```
$.ajax({
            url: 'http://query.yahooapis.com/v1/public/yql',
                data: {
                    q: "select * from json where url ='http://www.youtube.com/oembed?url=http://www.youtube.com/watch?v=wbp-3BJWsU8&format=json'",
                    format: "json"
                },
                dataType: "jsonp",
            success: function (data) {

                alert(JSON.stringify(data));

            },
            error: function (result) {
                alert("Sorry no data found.");
            }
        }); 
```

# java - 对两个元素使用 GridBagConstraint.anchor = NORTH

> ID：15949976
> 
> 赞同：0
> 
> 时间：2013-04-11T13:24:20.983
> 
> 标签：java, swing, gridbaglayout

我想在一个 GridBagLayout 中设置两个元素，它们都应该在布局的顶部（第二个元素应该从第一个元素的底部开始）。

此外，第二个元素应将空间填充到底部。

第一个元素的`gbc.anchor = GridBagConstraint.NORTH`作品，但第二个元素不会粘在可用空间的顶部。相反，它会停留在布局后半部分的顶部。

![截屏](https://i.stack.imgur.com/sNlhi.png)

那是我的代码：

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;

import javax.swing.BorderFactory;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class TestFrame extends JFrame{

    public TestFrame(){
        this.setDefaultCloseOperation(EXIT_ON_CLOSE);

        this.setLayout(new GridBagLayout());
        GridBagConstraints gbc = new GridBagConstraints();

        gbc.anchor = GridBagConstraints.NORTH;
        gbc.weighty = 1.0;

        JPanel one = new JPanel();
        one.setPreferredSize(new Dimension(200,200));
        one.setBorder(BorderFactory.createLineBorder(Color.BLACK));

        JPanel two = new JPanel();
        two.setPreferredSize(new Dimension(200,200));
        two.setBorder(BorderFactory.createLineBorder(Color.BLACK));

        this.add(one, gbc);

        gbc.gridy = 1;
        gbc.fill = GridBagConstraints.VERTICAL;

        this.add(two, gbc);

        this.pack();
        this.setVisible(true);
    }

    public static void main(String[] args){
        new TestFrame();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:32:02.073

我刚刚找到了一个解决方案：如果我将`wheighty`第一个元素设置为`0.0`并且仅将`weighty`第二个元素设置为`1.0`它按计划工作。

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;

import javax.swing.BorderFactory;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class TestFrame extends JFrame{

    public TestFrame(){
        this.setDefaultCloseOperation(EXIT_ON_CLOSE);

        this.setLayout(new GridBagLayout());
        GridBagConstraints gbc = new GridBagConstraints();

        gbc.anchor = GridBagConstraints.NORTH;
        gbc.weighty = 0.0;

        JPanel one = new JPanel();
        one.setPreferredSize(new Dimension(200,200));
        one.setBorder(BorderFactory.createLineBorder(Color.BLACK));

        JPanel two = new JPanel();
        two.setPreferredSize(new Dimension(200,200));
        two.setBorder(BorderFactory.createLineBorder(Color.BLACK));

        this.add(one, gbc);

        gbc.gridy = 1;
        gbc.weighty = 0.0;
        gbc.fill = GridBagConstraints.VERTICAL;

        this.add(two, gbc);

        this.pack();
        this.setVisible(true);
    }

    public static void main(String[] args){
        new TestFrame();
    }
} 
```

# java - Maven 在 Test-Jar 中找不到包

> ID：15949977
> 
> 赞同：1
> 
> 时间：2013-04-11T13:24:23.267
> 
> 标签：java, eclipse, maven, testing

我正在尝试在测试期间在另一个 maven 模块中使用 test-jar 依赖项。因此，就像在这个问题（[多模块项目](https://stackoverflow.com/questions/1725476/maven-test-dependency-in-multi-module-project)中的 Maven 测试依赖项）和 maven 指南中一样，我在模块 A 中放置了一个 test-jar 目标，并将依赖项放在模块 B 中，我想在其中使用 A 中的一些类在我的测试中。Eclipse 可以正确识别我的所有类，当我从项目根目录运行全新安装，然后`mvn dependency:tree`在模块 B 中运行时，我看到模块 A。

但是，当我运行时`mvn clean install`，maven 抱怨说

```
... package 'my.package.in.module.A' does not exist 
```

我的项目结构是

```
reactor
--module A
--module B 
```

波姆一个：

```
 ...
  <plugin>
   <groupId>org.apache.maven.plugins</groupId>
   <artifactId>maven-jar-plugin</artifactId>
   <version>2.2</version>
   <executions>
     <execution>
       <goals>
         <goal>test-jar</goal>
       </goals>
     </execution>
   </executions>
  </plugin>
</plugins>
... 
```

波姆乙：

```
 ...
<dependency>
  <groupId>com.company.moduleA</groupId>
  <artifactId>module-A</artifactId>
  <version>moduleA-version</version>
  <type>test-jar</type>
  <scope>test</scope>
</dependency> 
```

出于隐私考虑，我省略了版本/工件/等，但它们匹配正确。

我错过了什么吗？

编辑：这可能不是这个问题的正确解决方案，但我只是删除`<type>test-jar</type>`了它并让它在不使用它的情况下工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-03-08T09:00:46.917

有一种解决方法。使用 -DskipTests 代替 maven.test.skip。第二个也跳过了测试的编译，因此不会创建测试罐。

见[http://maven.apache.org/plugins/maven-surefire-plugin/examples/skipping-test.html](http://maven.apache.org/plugins/maven-surefire-plugin/examples/skipping-test.html)

# php - WordPress 登录页面显示空白

> ID：15949978
> 
> 赞同：0
> 
> 时间：2013-04-11T13:24:23.923
> 
> 标签：php, wordpress, wordpress-theming

我正在开发一个 wordpress 自定义主题。它工作正常。但是突然出现了一个问题。登录页面显示为空白，我无法访问我的仪表板。该网站是：[http ://shoulderdoctor.in](http://shoulderdoctor.in)

有趣的是，在将我的文件上传到这个主机之前，我正在使用另一个网址，即[http://damiracle.net/abheekkardemo/](http://damiracle.net/abheekkardemo/)

在第二个 url 中显示登录页面，但在实际站点 url 中，登录页面显示为空白屏幕。我已经用谷歌搜索了解决方案并在这个论坛中进行了搜索。按照重命名插件文件夹、主题文件夹等说明进行操作。但问题仍然存在。

所以很沮丧，我正在向你寻求帮助。请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:11:35.650

首先，上面的两个链接都可以正常工作，如前侧和仪表板侧。

请检查你的结局。

此链接是开放管理员 [http://dmiracle.net/abheekkardemo/wp-admin/](http://damiracle.net/abheekkardemo/wp-admin/)

此链接也打开管理员 [http://shoulderdoctor.in/wp-admin/](http://shoulderdoctor.in/wp-admin/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:30:47.883

[http://shoulderdoctor.in/wp-login.php](http://shoulderdoctor.in/wp-login.php)

尽管您删除了 php.ini 中的登录小部件，但它看起来很简单。不过，此页面应该允许您访问仪表板。

# c++ - 什么是“删除”“新”数据/对象的安全方法？

> ID：15949982
> 
> 赞同：1
> 
> 时间：2013-04-11T13:24:31.287
> 
> 标签：c++

例如，如果我创建一个类对象的“新”实例，然后“删除”该实例，是否会清除（如释放）该实例使用的所有内存？如果实例创建了其他对象的“新”实例怎么办？他们也会受到影响吗？

“删除”究竟是如何工作的？是否有任何关于如何删除的安全规则/提示？如果我真的想保留某些东西并在那种情况下删除其他所有东西怎么办？

编辑：关于“智能指针”，如果我需要在特定时刻删除它，我还能这样做吗？如果是这样，那和“新”有什么区别？（除非应用程序意外关闭时删除智能指针？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:27:24.533

使用`smart_pointers`而不是原始指针。

> “删除”究竟是如何工作的？

调用对象的析构函数，然后调用`::operator delete`函数，释放内存。

对于 2 首先你的问题：

由于关键字 delete 调用对象的析构函数 - 您应该在析构函数中手动释放内存（如果使用某些资源，则需要释放）。简单的例子

```
class A {};

class B
{
public:
    A() : a(new A()) {}
   ~A() { delete a; /* free a's memory */ }
private:
    A* a;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T13:28:42.853

`new`规则 1.除非你有充分的理由，否则不要使用。

规则 2\. 如果你确实使用`new`，那么你必须有一个对应的呼叫到`delete`某个地方。

至于做什么`delete`：它调用对象的析构函数（如果有的话），然后释放内存。如果“清除”是指“将使用的内存设置为零或其他值”，那么通常不会。但是，如果您的意思是“使其可用于其他事物”，那么是的，这正是`delete`它的作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T15:39:02.070

可悲的是，除非借助智能指针技巧等，否则没有这种安全的方法可以完成此操作。您可以自由使用“新建”和“删除”，因此您负责内存管理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T14:01:12.280

常规删除实际上做了两件事：

1.  调用指针指向的对象的析构函数。
2.  释放对象本身的内存，即 sizeof(object)

在这两个步骤之间，将调用任何类成员的析构函数（以及任何基类析构函数）。

请注意，这一步，即类成员被删除，仅适用于成员对象。如果成员是指针，它不会自动对它们调用“删除”。因此，您的班级的析构函数需要处理好这一点。

智能指针实现了这一点。A`unique_ptr`将始终删除它自己销毁的指针。A`shared_ptr`将减少指针上的引用计数（在许多共享指针之间共享），并且只有在引用计数下降到 0 时才会删除指针。

因此，通常最好使用对象而不是指针，因为您不需要调用 delete。

在函数的范围内，这一点尤为重要，因为可能会在您到达清理阶段之前引发异常，这会使您提前退出函数。但是对于自动对象，即使以这种方式退出其范围也会调用其析构函数。（这就是为什么你必须强制执行析构函数不能抛出的策略，以防万一发生这种情况）。

在类的范围内，它不太重要，因为您可以将逻辑放入析构函数中。但是，如果您的类被复制或分配，您必须更加注意何时发生，以及如果您的构造函数抛出（因此不会调用析构函数）会发生什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T13:27:37.120

不，`delete`不会以任何方式“清除”内存或对象。它*确实*调用了对象析构函数，您应该在其中释放对象分配的资源。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-11T13:28:26.980

使用 创建对象时`new`，会为所有成员分配内存获取，并调用一个*构造函数*获取（取决于您指定的）。您可以使用它在那里创建引用，例如：

```
public Foo()
{
    m_bar = new Bar();  // Bar* m_bar;
} 
```

但是，这不会影响对象的大小。指针 ( `m_bar`)**总是**需要 4 个字节（在 32 位架构上）的内存，因此对象的大小大约为 8 个字节（至少 - 4 个`m_bar`字节用于指向构造函数的指针，4 个字节用于指向构造函数的指针）¹。

完全相反的是*析构函数*，它在使用时被调用`delete`。您可以使用它来释放所有引用：

```
public ~Foo()
{
    if (m_bar)  // If the pointer is not NULL, thus pointing anywhere.
        delete m_bar;  // Calls destructor of "Bar" and free it's memory.
} 
```

所以调用`delete`，调用析构函数并释放对象占用的内存，但不会自动释放内存引用的对象（如此`m_bar`处）使用。您必须小心，这些对象将在析构函数中被删除。如果您忘记调用 delete `m_bar`，它可能会以我们所说的*内存泄漏*而告终。

使用`new`and`delete`适用于您需要尽可能多的性能的场景（例如实时场景），但通常您应该更喜欢使用[智能指针](http://en.wikipedia.org/wiki/Smart_pointer)。

¹[^(请注意，您无法真正说明物体的实际大小。这取决于编译器如何翻译它。)]

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-11T13:30:54.177

> 是否有任何关于如何删除的安全规则/提示？

是的，著名的 RAII（资源分配是初始化）就是解决方案。它声明，一个类分配的所有内存都应该在构造函数中释放。C++ 保证即使抛出异常，也会调用析构函数，并且析构函数是释放的安全港。

> 如果实例创建了其他对象的“新”实例怎么办？

您也应该跟踪它们，您可以将它们保留为类的成员并在析构函数中删除它们，否则您可能需要复杂的过程来跟踪它们。

# c++ - 我应该做所有不应该改变 const 的东西吗？

> ID：15949987
> 
> 赞同：3
> 
> 时间：2013-04-11T13:24:53.450
> 
> 标签：c++, constants, constraints

我这样做。即使使用值类型的函数参数和局部变量。似乎是个好主意。但是，我团队的领导称其为*'const spam'*。他反对声明原始类型，例如`const`. 即使他们应该是。我只是在想我应该如何努力说服他这`const`是好的。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-11T13:28:14.147

很难。他错了。C++一开始就应该设计成`const`默认的，大方应用也*没有错。*`const`这是*一件好事*（不像你的团队的领导者）。

例如：

```
void foo()
{
    const int x = some_function();
    // ^ Now this can't be changed. Good.

    // do stuff with `x`
} 
```

相似地：

```
void foo(const int x) // <-- x can't be changed. Good.
{
   // do stuff with `x`
}

void bar()
{
   foo(5);
} 
```

您*不需要*做的是通过引用接受内置类型的对象`const`，因为那是毫无意义的。

（当然，有时您*希望*能够更改某些对象的值。在这些情况下，显然不要使用`const`.）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T13:29:00.920

它当然不会伤害任何东西，它会向稍后阅读代码的人发出一个明确的信号，即这个变量“不会改变”，在修改代码时知道这一点非常重要。

# xcode - 精灵动画

> ID：15949988
> 
> 赞同：0
> 
> 时间：2013-04-11T13:24:55.053
> 
> 标签：xcode, animation, cocos2d-iphone, 2d-games

我正在使用这段代码来动画这个精灵：

```
_ship = [[GameObject alloc] initWithSpriteFrameName:@"SpaceFlier_sm_1.png" world:_world shapeName:@"SpaceFlier_sm_1" maxHp:10 healthBarType:HealthBarTypeGreen];

     CCSpriteFrameCache * cache =
    [CCSpriteFrameCache sharedSpriteFrameCache];

    CCAnimation *animation = [CCAnimation animation];
    [animation addSpriteFrame:
     [cache spriteFrameByName:@"SpaceFlier_s_2.png"]];
    [animation addSpriteFrame:
     [cache spriteFrameByName:@"SpaceFlier_s_3.png"]];
    [animation addSpriteFrame:
     [cache spriteFrameByName:@"SpaceFlier_s_4.png"]];
    [animation addSpriteFrame:
     [cache spriteFrameByName:@"SpaceFlier_s_5.png"]];
    [animation addSpriteFrame:
     [cache spriteFrameByName:@"SpaceFlier_s_6.png"]];
    [animation addSpriteFrame:
     [cache spriteFrameByName:@"SpaceFlier_s_7.png"]];
    [animation addSpriteFrame:
     [cache spriteFrameByName:@"SpaceFlier_s_8.png"]];
    [animation addSpriteFrame:
     [cache spriteFrameByName:@"SpaceFlier_s_2.png"]];

    animation.delayPerUnit = 0.05;

    [_ship runAction:
     [CCRepeatForever actionWithAction:
      [CCAnimate actionWithAnimation:animation]]]; 
```

它工作得很好。然后，当我尝试使用此代码为另一个精灵设置动画时，它不起作用。

这样：

```
if ((self = [super initWithSpriteFrameName:@"dragon.png" world:world shapeName:@"Boss_ship" maxHp:50 healthBarType:HealthBarTypeRed])) {
    _layer = layer;

    CCSpriteFrameCache * cache =
    [CCSpriteFrameCache sharedSpriteFrameCache];

    CCAnimation *animation = [CCAnimation animation];
    [animation addSpriteFrame:
     [cache spriteFrameByName:@"dragon2.png"]];
    [animation addSpriteFrame:
     [cache spriteFrameByName:@"dragon.png"]];

    animation.delayPerUnit = 0.05;

    [self runAction:
     [CCRepeatForever actionWithAction:
      [CCAnimate actionWithAnimation:animation]]]; 
```

我只能看到dragon2.png，它不会改变dragon，png ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:07:57.163

检查它`dragon.png`是否在您的精灵图集或捆绑资源中。此外，请仔细检查文件名中的大小写是否与您的字符串完全匹配。

# html - 锚标记定位

> ID：15949991
> 
> 赞同：0
> 
> 时间：2013-04-11T13:25:02.187
> 
> 标签：html, css

有谁知道设计锚标签的方法，这样当您单击指向锚标签的链接时，当锚标签内没有任何内容时，它会将您带到相对于锚标签的位置。

例如，

我的页面顶部有一个指向锚标记的链接，如果我在锚标记中滑动文本，我可以相对定位链接到页面上任何位置的位置。但是，如果我取出文本，锚标记仍然有效，但我无法定位链接所在的位置。

除了将锚放在不同的元素上之外，还有什么好的方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:08:36.747

如果我理解正确，您想根据某些条件移动到不同的锚点。你可以用javascript来做到这一点。将 javascript 函数附加到链接的点击事件。在此函数中检查您的条件（例如，如果某些 div 或其他元素为空），然后将**window.location.hash**属性设置为您想要的锚点。

更多信息： [http ://www.ezineasp.net/post/Javascript-Location-Hash-with-Example.aspx](http://www.ezineasp.net/post/Javascript-Location-Hash-with-Example.aspx)

# html - 在没有包装或失真的情况下，在 css 中裁剪 img 的解决方案是什么？

> ID：15949994
> 
> 赞同：-1
> 
> 时间：2013-04-11T13:25:07.863
> 
> 标签：html, css, image, crop

在[这个问题](https://stackoverflow.com/questions/13582051/using-just-css-crop-img-keeping-aspect-without-distortion)之后，我想知道是否有任何新的解决方案可以`<img>`在不扭曲它的情况下裁剪 css，同时保持其纵横比（不添加包装器）。

例如：假设我们有一个`<img src="#">`. 是否可以在到达时裁剪此图像`min-height:200px;`，而不水平拉伸它，同时保持它`width:100%;`？

这可以在没有包装器和javascript的情况下在纯css中完成吗？

* * *

*   我在另一个问题中读到，唯一的选择是负边距，但该解决方案只是暗示而不是实际解释。
*   此外，另一种可能的解决方案是使用`clip`，但这会将元素从文档流中取出，这意味着任何使用的解决方案`clip`还必须将元素重新定位到其原始位置（同时将其他内容推开）。
*   链接问题中的另一个答案暗示使用生成的内容，但据我所知，我不知道这将如何工作，因为生成的内容无法插入 html（仅文本）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:48:55.467

我认为唯一（也是最简单）的方法是将图像作为 div 或 img 的背景。

假设我们有[这张](http://casafamilyday.org/familyday/files/media/Family%20of%204%20outside_new%20homepage%20photo.jpg)图片，我们想裁剪右边那个人的脸。

我们可以这样做：

HTML：

```
<div class="img"></div>  
<!-- OR -->
<img class="img"/> 
```

CSS：

```
.img{
    width:250px;
    height:250px;
    background-image:url(http://casafamilyday.org/familyday/files/media/Family%20of%204%20outside_new%20homepage%20photo.jpg);
    background-position:300px 0;
} 
```

[FIDDLE 在这里](http://jsfiddle.net/F3Du4/1/)
，您可以使用 html 上的一个元素轻松裁剪图像，并且通过将`background-image`属性替换为 javascript 很容易以动态方式导入图像。

# geolocation - GeoNames 是否允许将街道数据下载为文件，而不是通过 Web 服务？

> ID：15949995
> 
> 赞同：1
> 
> 时间：2013-04-11T13:25:14.167
> 
> 标签：geolocation, geocoding, reverse-geocoding

我发现，GeoNames 允许下载数据以进行反向地理编码（[http://download.geonames.org/export/dump/readme.txt](http://download.geonames.org/export/dump/readme.txt)），但看起来在这些文件中没有街道/街道号码信息，是吗遗漏了什么或者他们只通过网络服务（有请求限制）提供街道信息？

如果 GeoNames 不提供此类信息，是否有任何基于知识共享的数据可用于下载街道信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T23:23:36.327

OpenStreetMap 提供街道和门牌号的数据。在 Geonames 上，我只找到了基于点的数据，一个地理名称的坐标

# twitter - 是否可以使用 fiddler 附加到 Twitter 流 API？

> ID：15949999
> 
> 赞同：0
> 
> 时间：2013-04-11T13:25:16.470
> 
> 标签：twitter, fiddler

是否可以使用 fiddler 附加到 Twitter 流 API？如果可能的话，有人可以告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T17:11:52.707

Twitter 的流 API 通过 HTTP 运行，因此它的流量被 Fiddler 捕获。但是，流量是“流式传输的”，因此您必须使用 Fiddler 的**COMETPeek**来观察进程内响应。

1.  在 Fiddler 工具栏上启用流式传输。
2.  定期右键单击流的会话并在会话的上下文菜单上选择 COMETPeek。

这将使用迄今为止从服务器接收到的流量填充响应检查器。