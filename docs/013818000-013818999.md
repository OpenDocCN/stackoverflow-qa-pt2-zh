# StackOverflow 问答 13818000-13818999

# android - 如何为 Web 视图应用主题条件

> ID：13818000
> 
> 赞同：1
> 
> 时间：2012-12-11T10:12:47.593
> 
> 标签：android

我在我的应用程序 themeA 和 themeB 中创建了两个主题，我想检查正在使用哪个主题，类似于以下代码：

```
if( themeA ...)
{
    webview.setBackgroundcolor(color.black);
    String str1 = "<font color='white'>" + getDescription + "</font>";
}
else
{
    webview.setBackgroundcolor(color.white);
    String str1="<font color='black '>" + getDescription + "</font>";
} 
```

是否可以检查`Theme`当前正在使用哪个？

# windows-8 - Win8 应用认证失败：3.10 - 如果您的应用包含 ARM 或 Neutral 包，则它必须支持 Microsoft Direct3D 功能级别 9_1

> ID：13818005
> 
> 赞同：4
> 
> 时间：2012-12-11T10:13:16.407
> 
> 标签：windows-8, directx

我的 C# 应用程序使用我编写的 C++ WinRT 组件来获取使用 Direct X 的系统字体列表。

这是基于这个例子： http: [//msdn.microsoft.com/en-us/library/dd756582 (v=VS.85).aspx](http://msdn.microsoft.com/en-us/library/dd756582(v=VS.85).aspx)

我的应用程序已在商店中发布，但我的最新更新未能通过第 3.10 点的商店审查流程，抱怨我使用 Direct 3D 以及它可能无法在 ARM 平板电脑上运行。据我所知，我没有使用 Direct 3D，我使用的唯一 Direct X 功能是 GetSystemFontCollection。

如何确保我不会满足此要求，我是否需要删除我的组件中对 Direct3D 的一些恶意引用？

另外，为什么我现在失败了，以前通过了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:42:34.167

您是否针对所有三个平台或在您的版本中选择了任何 CPU？

此页面是否有帮助：http: [//msdn.microsoft.com/en-gb/library/windows/apps/hh994923.aspx](http://msdn.microsoft.com/en-gb/library/windows/apps/hh994923.aspx)

看起来您可能无意中请求了更高级别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:45:36.540

我再次提交并向测试人员附上了一条说明，说明我的应用程序没有使用任何 Direct 3D 功能，并告诉他们我确实使用了确切的 DirectX 功能。

我还是失败了，但 Direct3D 的原因不再是原因之一。

显然我的应用程序崩溃了，这是第一次失败的另一个原因，但我认为这一定与 Direct3D 问题有关。我无法重现崩溃，但至少我现在知道我可以停止查看我对 DirectX 的使用。这是一条红鲱鱼。

# c# - EF，获取实体树

> ID：13818009
> 
> 赞同：0
> 
> 时间：2012-12-11T10:13:32.573
> 
> 标签：c#, .net, entity-framework, entity-framework-4

我有 EF 模型，我想获取与父实体有某种关联的实体名称列表。

可以说我有这个模型。 [![](../Images/a13820e60f6efcd61f005c6211836f86.png)](https://i.stack.imgur.com/uX3Jf.png)

如果我选择实体“订单”，我应该得到 Orders、Customers、Order_Details 和 CustomerDemographics 的结果。

有办法做到这一点吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T14:59:04.510

可以通过这种方式获取实体名称而无需反射：

```
using (var context = new ModelContainer())
{
    var container =     context.MetadataWorkspace.GetEntityContainer(context.DefaultContainerName, DataSpace.CSpace);
    var entitySet =     container.BaseEntitySets[someEntityName];
    var navProperties = set.ElementType.Members.Where(member => member.BuiltInTypeKind == BuiltInTypeKind.NavigationProperty).Select(member => member.Name).ToList();
} 
```

# callback - 如何在 Devexpress CallbackPanel 中运行在回调中加载的脚本

> ID：13818011
> 
> 赞同：1
> 
> 时间：2012-12-11T10:13:34.833
> 
> 标签：callback, devexpress

在我的页面上，我使用 Devexpress CallbackPanel 动态加载其内容，包括 javascript 块。由于 DX 不（默认情况下）在回调端运行这些脚本，我找到了一种解决方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:13:34.833

您唯一需要做的就是指定以前缀“dxss_”开头的脚本块的 id，然后魔术就起作用了。

```
<script type="text/javascript" id="dxss_AnyTextHere">
  //some script here
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T21:11:58.253

您可以使用“ClientSideEvents-EndCallback”指定的 ASPxCallback 客户端事件，您可以在其中指定 javascript 函数。从此函数中，您可以调用在回调期间添加的任何脚本。

# c# - 我不明白的关于 .NET 继承/转换的东西？

> ID：13818018
> 
> 赞同：18
> 
> 时间：2012-12-11T10:13:56.207
> 
> 标签：c#, .net, inheritance, interface, casting

请参阅以下简单的转换示例：

```
int i = 1000;
object o = (object)i; // cast

i.CompareTo(1000);
o.CompareTo(1000); // error 
```

我明白为什么最后一行会产生错误。与整数不同，对象不实现`IComparable`，因此不公开`CompareTo`方法。以下也会产生错误：

```
string s = (string)i; // cast error 
```

由于整数和字符串之间没有继承关系，因此强制转换在这里不起作用。现在，看看这个：

```
AudioRender a = new AudioRender();
IBaseFilter b = (IBaseFilter)a; // cast

a.Run(1000); // error
b.Run(1000); 
```

（*这些类来自[DirectShowNet 库](http://directshownet.sourceforge.net/)。*）

我不明白这一点。强制转换不会产生错误并且在运行时不会抛出异常，所以我假设 AudioRender 实现了 IBaseFilter。但是AudioRender没有暴露任何IBaseFilter的方法，说明我上面的假设是错误的……

如果`a`implements `b`，为什么不`a`公开 的方法`b`？
否则，如果`a`不执行`b`，为什么会`a`被强制转换为`b`？
另外，我可以在不使用 DirectShowNet 的情况下重现此行为吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-11T10:17:50.757

~~AudioRender 很可能实现了[Conversion Operator](http://msdn.microsoft.com/en-us/library/85w54y0a.aspx)。~~

但是，查看代码后，AudioRender 和 IBaseFilter 似乎都是 Com Imports：

```
[ComImport, Guid("e30629d1-27e5-11ce-875d-00608cb78066")]
public class AudioRender { }

[ComImport, ("56a86895-0ad4-11ce-b03a-0020af0ba770"),
InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
public interface IBaseFilter { .. } 
```

如您所见，AudioRender 导入类未实现 IBaseFilter，因此您不会在智能感知中看到它，但很可能底层 COM 对象实现了它，因此您可以强制转换。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-11T10:18:17.413

It is difficult to tell without access to the documentation of the `AudioRender` class, but a reasonable guess would be that the implementation of `Run` on it is a [explicit interface implementation](http://msdn.microsoft.com/en-us/library/vstudio/ms173157.aspx).

```
public AudioRender : IBaseFilter
{
  IBaseFilter.Run(...) {...}
} 
```

That means you can only access the `Run` method when you access it through a `IBaseFilter` reference.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-11T10:17:07.477

没有看到类型的源代码，我认为[显式地](https://stackoverflow.com/questions/143405/c-interfaces-implicit-and-explicit-implementation)`AudioRender`实现了接口，所以你不会在 IntelliSense 上看到接口的方法。`IBaseFilter` `AudioRender`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-11T10:37:41.270

> 如果a实现了b，为什么a不公开b的方法？

这可以通过[显式实现接口来实现](http://msdn.microsoft.com/en-us/library/vstudio/ms173157.aspx)

> 否则，如果 a 没有实现 b，为什么 a 可以强制转换为 b？

因为确实`a`实现了`b`。

> 另外，我可以在不使用 DirectShowNet 的情况下重现此行为吗？

是的，你可以，从上面的链接中看到这个例子（`obj.Paint()`是编译器错误）：

```
 interface IControl
    {
        void Paint();
    }

    public class SampleClass : IControl
    {
        void IControl.Paint()
        {
            System.Console.WriteLine("IControl.Paint");
        }
    }

void doit(){
    SampleClass obj = new SampleClass();
    //obj.Paint();  // Compiler error.

    IControl c = (IControl)obj;
    c.Paint();  // Calls IControl.Paint on SampleClass.
} 
```

# internet-explorer - IE(9) 中的 Dojo 树折叠/展开错误

> ID：13818023
> 
> 赞同：1
> 
> 时间：2012-12-11T10:14:07.197
> 
> 标签：internet-explorer, tree, dojo

我有一个带有复选框的道场树，它在 FF 和 Chrome 中运行良好，但在 IE(9) 中却不行。在大多数 IE 案例中，我可以找到一些解决方法，但这只是很奇怪。每当我尝试折叠或展开树节点时都会发生这种情况，无论它是通过用户输入 - 按下 +/- 展开按钮还是以编程方式 - 调用 TREE._collapseNode(NODE);

这是树的创建方式：

```
 this._tocTreeControl = new dijit.Tree({
                    model: this._treeModel,
                    showRoot: false,
                    autoExpand: true,
                    branchIcons: false,
                    nodeIcons: false,
                    "class": "IdentifyFilterTreeRoot",
                    _createTreeNode: function (args) {
                        var tnode = new dijit._TreeNode(args);
                        dojo.attr(tnode.labelNode, "innerHTML", args.label);
                        return tnode;
                    }
                }); 
```

它在 dojo 文件“dojo/dijit/tree.js”中引发错误

```
this.expandoNodeText.innerHTML=_2e[idx]; 
```

或者在未压缩的版本中，我相信是

```
this.expandoNodeText.innerHTML = _a11yStates[idx]; 
```

this.expandoNodeText.innerHTML 是“-”或“+”，_2e 是数组 [*,-,+,*]，idx 是 1 或 2。看起来像正常操作的东西在 IE(9) 中抛出错误“无效的目标元素对于这个操作。”。我正在考虑选择捕获方法“_onExpandoClick”并手动隐藏/显示节点，但在 IE 中它没有到达该事件并在此之前引发错误。

任何人都知道为什么会发生这种情况，有什么办法可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T00:48:43.907

> 经过一些额外的搜索发现IE不支持在标签内设置innerHTML。所有的问题是这棵树在 dojo.DropDownMenu（它是表）中，所以我只是将它更改为 dojo.ContentPane，现在一切正常。

# jakarta-ee - 将 ear 转换为 war 文件的最佳实践

> ID：13818027
> 
> 赞同：2
> 
> 时间：2012-12-11T10:14:23.337
> 
> 标签：jakarta-ee, tomcat, ejb, war, ear

我们是一个 IVR 团队，我们的应用程序部署在 tomcat 服务器中。我们需要与支付网关集成。

我们有一个应用程序企业网络存档（ear），其中包含 jar 文件和少量其他配置文件，该应用程序与第三方支付网关通信。此应用程序由供应商提供，由于 tomcat 不支持 ear 文件，

我们想知道将ear文件转换为war并部署在tomcat中是否好。提供给我们的ear应用程序就像一个黑盒应用程序。

我们正在尝试访问存档在耳中的 EJB

如果将耳朵转变为战争是正确的，我想知道最佳实践，这样我们就不会在生产部署期间遇到问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:19:26.993

如果您有 EJB，则必须有 EAR。我不明白您如何可以简单地将 EAR 更改为 WAR 并期望访问 EJB。

Tomcat 是一个 servlet/JSP 引擎；它无法托管 EJB - 除非您添加类似[OpenEJB](http://openejb.apache.org/)的东西。

# email - 批处理文件压缩所有文件夹/文件并通过邮件发送

> ID：13818029
> 
> 赞同：-1
> 
> 时间：2012-12-11T10:14:26.597
> 
> 标签：email, batch-file, zip

我需要创建一个批处理文件来压缩和压缩文件夹中的所有文件和文件夹。压缩文件和文件夹后，`.zip`应通过**电子邮件**发送文件。

我正在使用**Windows 7**。

我对批处理脚本一无所知。请帮忙。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:17:22.910

答案取决于脚本将在哪个操作系统上运行，但您甚至没有提供。

您不会说您是否了解 C#、Java 或 Python 等任何语言，但我建议您使用类似的语言编写应用程序。有很多库可以帮助您处理压缩、线程等。如果您打开对语言的限制，您可能会发现它更容易。

但是，如果您必须这样做，这里有一个可能对您有所帮助的解决方案：

[https://superuser.com/questions/110991/can-you-zip-a-file-from-the-command-prompt-using-only-windows-built-in-capabili](https://superuser.com/questions/110991/can-you-zip-a-file-from-the-command-prompt-using-only-windows-built-in-capabili)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:21:47.290

您可以将[7zip](http://www.7-zip.org/)用于 zip 功能。使用它的[命令行选项](http://www.dotnetperls.com/7-zip-examples)，您可以创建一个批处理文件。

关于电子邮件，如果您真的需要批量处理，那么您将需要一个 3rd 方工具或命令行工具。

一个快速的谷歌揭示了[这个](http://www.exclamationsoft.com/exclamationsoft/netmailbot/help/examples/default.asp)网站，它甚至有批处理示例。

# ruby - Heroku、Nokogiri 和 Sidekiq 内存泄漏 - 如何调试？

> ID：13818047
> 
> 赞同：3
> 
> 时间：2012-12-11T10:15:29.110
> 
> 标签：ruby, heroku, nokogiri, sidekiq, httparty

我刚刚切换到在 Heroku 上使用 Sidekiq，但在我的工作运行一段时间后，我得到了以下信息：

```
2012-12-11T09:53:07+00:00 heroku[worker.1]: Process running mem=1037M(202.6%)
2012-12-11T09:53:07+00:00 heroku[worker.1]: Error R14 (Memory quota exceeded)
2012-12-11T09:53:28+00:00 heroku[worker.1]: Error R14 (Memory quota exceeded)
2012-12-11T09:53:28+00:00 heroku[worker.1]: Process running mem=1044M(203.9%) 
```

它一直这样增长。

对于这些工作，我使用 Nokogiri 和 HTTParty 来检索 URL 并解析它们。我尝试过更改一些代码，但我实际上并不确定我首先要寻找什么。我应该如何调试这个？

我尝试将 New Relic 添加到我的应用程序中，但不幸的是它还不支持 Sidekiq。

此外，在谷歌搜索之后，我试图切换到 SAX 解析器并查看它是否有效，但我被卡住了。这是我到目前为止所做的：

```
class LinkParser < Nokogiri::XML::SAX::Document
  def start_element(name, attrs = [])
    if name == 'a'
      puts Hash[attrs]['href']
    end
  end
end 
```

然后我尝试类似：

```
page = HTTParty.get("http://site.com")
parser = Nokogiri::XML::SAX::Parser.new(LinkParser.new) 
```

然后，我尝试对使用 HTTParty 检索到的数据使用以下方法，但无法使这些方法中的任何一个正常工作：

```
 parser.parse(File.read(ARGV[0], 'rb'))
 parser.parse_file(filename, encoding = 'UTF-8')
 parser.parse_memory(data, encoding = 'UTF-8') 
```

## 更新

我发现解析器不起作用，因为我正在调用`parser.parse(page)`而不是`parser.parse(page.body)` ~~但是我尝试使用上述脚本打印出各种网站的所有 html 标签，对于某些网站它打印出所有标签，而对于其他网站它只打印出几个标签。~~

~~如果我使用它`Nokogiri::HTML()`代替`parser.parse()`它工作正常。~~

我使用`Nokogiri::XML::SAX::Parser.new()`而不是`Nokogiri::HTML::SAX::Parser.new()`HTML 文档，这就是我遇到麻烦的原因。

## 代码更新

好的，我现在可以使用以下代码，但不知道如何将我得到的数据放入一个数组中，以便以后使用...

```
require 'nokogiri'

class LinkParser < Nokogiri::XML::SAX::Document
  attr_accessor :link

  def initialize
    @link = false
  end

  def start_element(name, attrs = [])
    url = Hash[attrs]
    if name == 'a' && url['href'] && url['href'].starts_with?("http")
      @link = true 
      puts url['href']
      puts url['rel']
    end
  end

  def characters(anchor)
    puts anchor if @link
  end

  def end_element(name)
    @link = false
  end

  def self.starts_with?(prefix)
    prefix.respond_to?(:to_str) && self[0, prefix.length] == prefix
  end
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T04:43:13.040

最后，我发现内存泄漏是由于[“Typhoeus”gem](https://github.com/blatyo/page_rankr/issues/20)造成的，它是我在部分代码中使用的“PageRankr”gem 的依赖项。

我通过在本地运行代码并使用 监控内存使用情况来发现这一点`watch "ps u -C ruby"`，然后测试代码的不同部分，直到我可以查明内存泄漏的来源。

我将此标记为已接受的答案，因为在原始问题中我不知道如何调试内存泄漏，但有人告诉我执行上述操作并且它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-04T06:17:27.137

以防万一您无法解决 gems 内存泄漏问题：

您可以在分叉中运行 sidekiq 作业，如答案[https://stackoverflow.com/a/1076445/3675705中所述](https://stackoverflow.com/a/1076445/3675705)

只需添加应用程序助手“do_in_child”，然后在您的工作人员中

```
 def perform
   do_in_child do
     # some polluted task
   end
 end 
```

是的，我知道这是一种肮脏的解决方案，因为 Sidekiq 应该在线程中工作，但在我的情况下，它是唯一一个用于生产的快速解决方案，因为我在通过 nokogiri 解析大型 XML 文件时工作速度很慢。

“快速”线程功能不会带来任何优势，但在 10 分钟的工作后，内存泄漏给了我一个 2GB+ 的主要 sidekiq 进程。一天后，sidekiq 虚拟内存增长到 11GB（我服务器上所有可用的虚拟内存），所有任务都变得非常缓慢。

# javascript - html 元素无法使用 jQuery 正确移动

> ID：13818048
> 
> 赞同：1
> 
> 时间：2012-12-11T10:15:34.263
> 
> 标签：javascript, jquery, jquery-animate, position

我必须修复[http://rhemapress.pl/www_wopr/](http://rhemapress.pl/www_wopr/)上的底部滑块。如果您在单击右箭头两次时看到，则动画将重新开始并再次动画。在这里，当我在右箭头上单击一个时，这应该被阻止并且无法第二次单击。

向右移动的次数由 checkWidth() 动态创建；

```
 function checkWidth() {

        var elements = $('.items').children().length;

        var width = Math.ceil(elements / 5) * 820;

        return width;
    } 
```

这个 return realWidth 女巫有点像偏移限制。变量偏移在开始时设置为 0。因此，如果我单击右键，则在方法 moveRight() 中检查元素是否可以移动并且它正在移动。最后偏移量增加了 820px（滑块的一页），所以如果我们有 2 页，则不能调用下一步。但它是，这是问题！：/

我的代码

```
<script type="text/javascript">
$(document).ready(function() {
    $('a.prev').bind('click',moveLeft);
    $('a.next').bind('click',moveRight);

    var realWidth = checkWidth(); 
    realWidth -= 820;

    var offset = 0;

    function moveLeft(e) {

        var position = $('.items').position();
        var elements = $('.items').children().length;

        if ((elements > 5) && ((offset - 820) >= 0) ) {
            $('.items').animate({
            'left': (position.left + 820)
            }, 300, function() {
                offset -= 820;
            });

        }
    }

    function moveRight(e) {

        var position = $('.items').position();
        var elements = $('.items').children().length;

        if ((elements > 5) && ((offset + 820) <= realWidth)) {        

            $('.items').animate({
            'left': (position.left - 820)
            }, 300, function() {
                offset += 820;
            });
        }
    }

    function checkWidth() {

        var elements = $('.items').children().length;

        var width = Math.ceil(elements / 5) * 820;

        return width;
    }
});
</script> 
```

我怎样才能正确地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:25:23.207

似乎您想阻止在当前动画完成之前触发 click 事件。如果元素当前正在动画，您可以通过阻止函数的其余部分执行来做到这一点：

```
function moveLeft(e) {
   if ($(this).is(":animated")) {
      return false;
   } 
```

# c# - 如何在不克隆的情况下列出远程存储库中的文件？

> ID：13818049
> 
> 赞同：2
> 
> 时间：2012-12-11T10:15:39.220
> 
> 标签：c#, .net, libgit2sharp

有没有办法使用[LibGit2Sharp](http://github.com/libgit2/libgit2sharp)获取**远程存储库**中的文件列表，但无需在本地**克隆存储库？**

我想**列出文件**，也**想得到文件的内容**。

```
var files = GetGithubFiles(); // TODO: Implement
foreach(var file in files)
{
    Console.WriteLine(file.Title);
    Console.WriteLine(file.Content);
    Console.WriteLine();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:47:08.917

> 有没有办法使用 LibGit2Sharp 获取远程存储库中的文件列表，但无需在本地克隆存储库？

目前没有执行此类任务的内置机制。

除了检索存储库每个负责人的提交文件列表之外，克隆还会获取整个历史记录。这可能确实需要一些时间。

但是，下面有一些替代方法可以帮助您转发：

*   立即利用**[GitHub API](http://developer.github.com/v3/)**
*   等待**[浅克隆](https://github.com/libgit2/libgit2sharp/issues/229)**的未来支持，这应该允许您检索历史的较短版本，执行您的分析并最终丢弃临时存储库。

# c# - 从 Web 服务返回到 android 文本视图的数组打印 anyTpe{String 而不是仅打印值

> ID：13818054
> 
> 赞同：1
> 
> 时间：2012-12-11T10:16:02.183
> 
> 标签：c#, android, web-services, ksoap2

我想将从 Web 服务返回的数组打印到 android 文本视图。但是当它打印数组时，它会将结果显示为“anyType{string=Shean;string=Ya;string=Hey;} 而不是将其打印为 Shean Ya Hey.. 知道我做错了什么吗？

安卓代码如下：

```
package com.example.fp1_webservicedropdown;

    import android.app.Activity;
    import android.os.Bundle;
    import android.widget.Spinner;
    import android.widget.TextView;
    import org.ksoap2.*;
    import org.ksoap2.serialization.SoapObject;
    import org.ksoap2.serialization.SoapSerializationEnvelope;
    import org.ksoap2.transport.*;

    public class MainActivity extends Activity {
        TextView result;
        Spinner spinnerC;

        @Override
        public void onCreate(Bundle savedInstanceState) {

            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
            spinnerC = (Spinner) findViewById(R.id.spinner1);
            result = (TextView) findViewById(R.id.textView2);

            final String NAMESPACE = "http://sample.com/";
            final String METHOD_NAME = "GetCustomerList";
            final String SOAP_ACTION = "http://sample.com/GetCustomerList";
            final String URL = "http://10.113.28.241/HelloWorldNew/Service1.asmx";

            SoapObject Request = new SoapObject(NAMESPACE, METHOD_NAME);
            // Request.addProperty("a", "32");
            // Request.addProperty("b", "12");

            SoapSerializationEnvelope soapEnvelope = new SoapSerializationEnvelope(
                    SoapEnvelope.VER11);
            soapEnvelope.dotNet = true;
            soapEnvelope.setOutputSoapObject(Request);
            AndroidHttpTransport aht = new AndroidHttpTransport(URL);

            try {
                aht.call(SOAP_ACTION, soapEnvelope);
                SoapObject response = (SoapObject) soapEnvelope.bodyIn;
                int intPropertyCount = response.getPropertyCount();

                for (int i = 0; i < intPropertyCount; i++) {
                    SoapObject responseChild = (SoapObject) response.getProperty(i);
                    result.setText(responseChild.toString());
                    // You can add all strings in a list and give
                    // ArrayAdapter<String> for Spinner
                }

                /*
                 * result.setText("The web service returned " +
                 * resultString.toString());
                 */
                // ---------- result To Spinner Code -----------------------//
                /*
                 * String[] toSpinner = new String[] { resultString.toString() };
                 * ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                 * android.R.layout.simple_spinner_item, toSpinner);
                 * adapter.setDropDownViewResource
                 * (android.R.layout.simple_spinner_dropdown_item);
                 * spinnerC.setAdapter(adapter);
                 */
                // ---------- result To Spinner Code ends here -----------------//

            } catch (Exception e) {

                e.printStackTrace();

            }
        }
    } 
```

网页方法如下：

```
 [WebMethod]
        public string[] GetCustomerList()
        {
            //substitute code to actually populate the array with the dataset data
            string[] personIds = { "Shean", "Ya", "Hey" };
            return personIds;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:31:22.990

这行得通吗？

```
for (int i = 0; i < intPropertyCount; i++) {
    SoapObject responseChild = (SoapObject) response.getProperty(i);
    for (int j = 0; j < lengthOfResponseChild; j++)
        result[j].setText(responseChild[j].toString());
    }
} 
```

这只是粗略的代码。您可能需要清理以获得正确的函数和变量。

# axapta - 实时服务在 AX 2012 R2 中不起作用

> ID：13818055
> 
> 赞同：1
> 
> 时间：2012-12-11T10:16:04.867
> 
> 标签：axapta, dynamics-ax-2012

我正在尝试配置 AX 2012 R2，实时服务（不是 Web 服务），但在来自 POS 的库存查找请求期间，它在 POS 处出现错误

错误号：13010 无法连接到交易服务，

我检查了事件日志，其中显示了以下详细信息：

LSRetailPosis.TransactionServices.InvokeMethod：System.ServiceModel.ProtocolException：您试图创建一个不支持.Net 框架的服务的通道。---> System.IO.InvalidDataException：预期的记录类型“PreambleAck”，找到“46”。

以下是我的零售总部设置：

```
 1\. Firewall is completely off.

            2\. RTS conguration:

                            Server:AX12-Test

                            Port:1239

                            Protocol:net.tcp

                            Passphrase: i have tried all possbile passphrases.

                            language: en-us

                            Realtime service  version:  AX 2012 R2

            3\. Service is listening on the 1239 port number.

            4\. As soon as i click inventory lookup atp pos error appears:  error number: 13010 could not connect to the transaction service,

            5\. then i looked into the eventlog which showed the following error: 
```

1.  下面是事务服务配置文件设置：

```
<add key="Port" value="1239" />

<add key="UseAX" value="1" />

<!--AOSINSTANCE@AOSSERVER:AOSPORT-->

<add key="ObjectServer" value="MicrosoftDynamicsAX@AX12-Test:2712" />

<!-- When both IPV4 and IPV6 are available, set to true to use IPV6\. Default value is false. -->

<add key="PreferIPV6" value="false" />

<add key="RetailTransactionServiceAX61" value="RetailTransactionServiceAX61" />

<add key="ClientSettingsProvider.ServiceUri" value="" /> 
```

```
<supportedRuntime version="v4.0" /> 
```

```
<sources>

  <!-- this registers the listener with traces from a specific source -->

  <source name="TransactionServiceTracer" switchValue="Error">

    <listeners>

      <add name="xmlListener" type="TransactionServicesLib.EnvironmentVariableXmlTraceListener, TransactionServicesLib, Version=6.2.0.0, Culture=neutral, processorArchitecture=MSIL" initializeData="%AppData%\RetailTransactionService.svclog" traceOutputOptions="ProcessId, ThreadId, Timestamp" />

      <remove name="Default" />

    </listeners>

  </source>

</sources> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T08:51:38.703

`AX 2012 Feature pack`对于您的查询，答案是 -在交易服务配置文件中设置实时服务版本。

* * *

使用功能包 Commerce 数据交换实时服务（正式交易服务）的步骤，而不是 R2 提供的通过 Web 服务公开的服务。

```
 Step 1: Check following service is installed and running.
     - Microsoft Dynamics AX Commerce Data Exchange: Real-time Service 6.1

 Step 2: Configure key="ObjectServer" value="AOSINSTANCE@AOSSERVER:AOSPORT" settings at following file
     - C:\Program Files (x86)\Microsoft Dynamics AX\60\Commerce Data Exchange\Real-time Services\6.1\Bin\RetailTransactionService.exe.config

 Step 3: In AX go to retail->setup->channel integration ->real time service profiles 
```

设置以下参数：

```
Server : "ServerNameHostingThis Service"
Port : "1239"
Protocol: "net.tcp"
PassPhrase : "PassPhrase"
Real time service version to "AX 2012 Feature pack" 
```

# java - 从 java 访问 char 设备文件

> ID：13818056
> 
> 赞同：1
> 
> 时间：2012-12-11T10:16:12.293
> 
> 标签：java, linux, file, file-io, io

当我`ls`在 linux 中为文件执行操作时，我看到： `crw-rw----`这`c`意味着什么？
我的意思是我读的`c`是字符设备，但是对于`Java`我将使用哪些 API I/O 方法（例如`BufferedWriter`等）或**不得**使用有什么影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:36:36.913

我认为[这](http://staff.aist.go.jp/hirano-s/mikael/Notes/java-device-driver.htm)应该提供足够的建议。`FileInputStream`并且`FileOutputStream`足以访问设备文件，该文件又与字符设备对话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T15:57:15.087

这个[维基百科](http://en.wikipedia.org/wiki/File_system_permissions#Symbolic_notation)解释了这个`c`字符的用法。

> crw-rw-r——一个字符特殊文件，它的用户和组类有读写权限，其他类只有读权限。

此`c`字符不会影响您读取此文件的能力，但是如果您不在正确的组中，您可能需要检查写入权限。有更好的方法来检查文件的读/写权限，而不是通过`ls`.

使用`File.canWrite()`和`File.canRead()`检查文件权限。有关这些方法的更多信息，请点击此处 - [File - JavaDoc](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#canWrite())。

# jquery - 如何使用 JQuery 就绪事件？

> ID：13818061
> 
> 赞同：1
> 
> 时间：2012-12-11T10:16:24.727
> 
> 标签：jquery, event-handling, document-ready

我刚刚学习了 Jquery，我的 javascript 在函数中使用了 onload 事件，而不是 anonimouse 函数：

```
window.onload = xFunction; 
```

问题是当我尝试使用准备好的 JQuery 时，我知道我可以获取 xFunction 的内容并将其插入到 anonimouse 函数中：

```
$("document").ready(function(){
//content of the xFunction.
}); 
```

但我想要做的只是提供函数名称作为 jquery 的事件处理程序，甚至：

```
$("document").ready(function(){
xFunction;
});

//Or

$("document").ready(xFunction); 
```

两个都没用，

**我的问题是：**

*   有没有办法做到这一点？

*   也许有，但这是一种不好的做法？*

*   还是没有？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:17:51.257

调用中的函数`$(document).ready`，更改`xFunction`为`xFunction()`

**[现场演示](http://jsfiddle.net/rajaadil/3r29U/2/)**

```
$(document).ready(function(){
  xFunction();
}); 
```

或者

**[现场演示](http://jsfiddle.net/rajaadil/3r29U/1/)**

```
$("document").ready(xFunction);

function xFunction()
{
    alert("Call on document.ready");
} 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T10:18:03.063

您不会将文档包装在里面`""`- 就像这样：

```
$(document).ready(function(){
    xFunction();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T10:18:14.657

您需要执行该功能（添加括号）：

```
$("document").ready(function(){
   xFunction();
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T10:18:16.057

您需要使用 调用该函数`()`。

```
$("document").ready(function(){
   xFunction();
});

function xFunction(){
  alert("here");
} 
```

示例：http: [//jsfiddle.net/vEARG/](http://jsfiddle.net/vEARG/)

# php - 检查 IP 地址是否为私有

> ID：13818064
> 
> 赞同：28
> 
> 时间：2012-12-11T10:16:32.380
> 
> 标签：php, ip, private

我喜欢检查 IP 地址是否在专用网络中。它不起作用。

**我的代码：**

```
<?php
$ip = $_SERVER['REMOTE_ADDR'];

function _isPrivate($ip) 
{
    $i = explode('.', $ip);

    if ($i[0] == 10) {
        return true;
    } else if ($i[0] == 172 && $i[1] > 15 && $i[1] < 32) {
        return true;
    } else if ($i[0] == 192 && $i[1] == 168) {
        return true;
    }
    return false;
}
?> 
```

另一个：

```
<?php
$ip = $_SERVER['REMOTE_ADDR'];

function _isPrivate($ip) 
{
    $ip = ip2long($ip);
    $net_a = ip2long('10.255.255.255') >> 24; 
    $net_b = ip2long('172.31.255.255') >> 20; 
    $net_c = ip2long('192.168.255.255') >> 16; 

    return $ip >> 24 === $net_a || $ip >> 20 === $net_b || $ip >> 16 === $net_c; 
}
?> 
```

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-12-11T10:48:25.953

我认为这应该可以解决问题。

如果 IP 地址是私有地址，则与以下[验证规则一起使用的](http://php.net/manual/en/filter.filters.validate.php)[filter_var将返回 false。](http://php.net/manual/en/function.filter-var.php)

```
$user_ip = '127.0.0.1';
filter_var(
    $user_ip, 
    FILTER_VALIDATE_IP, 
    FILTER_FLAG_IPV4 | FILTER_FLAG_NO_PRIV_RANGE |  FILTER_FLAG_NO_RES_RANGE
) 
```

检查上面的链接以获取 php 文档

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-12-11T10:19:42.003

```
function ip_is_private ($ip) {
    $pri_addrs = array (
                      '10.0.0.0|10.255.255.255', // single class A network
                      '172.16.0.0|172.31.255.255', // 16 contiguous class B network
                      '192.168.0.0|192.168.255.255', // 256 contiguous class C network
                      '169.254.0.0|169.254.255.255', // Link-local address also refered to as Automatic Private IP Addressing
                      '127.0.0.0|127.255.255.255' // localhost
                     );

    $long_ip = ip2long ($ip);
    if ($long_ip != -1) {

        foreach ($pri_addrs AS $pri_addr) {
            list ($start, $end) = explode('|', $pri_addr);

             // IF IS PRIVATE
             if ($long_ip >= ip2long ($start) && $long_ip <= ip2long ($end)) {
                 return true;
             }
        }
    }

    return false;
} 
```

见[http://mebsd.com/coding-snipits/check-private-ip-function-php.html](http://mebsd.com/coding-snipits/check-private-ip-function-php.html)

您可能还想在[此处查看私有地址空间](https://en.wikipedia.org/wiki/Private_network#Private_IPv4_address_spaces)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-03-31T16:56:39.340

好的，这是 7 岁的帖子。但我想我可以分享我的解决方案，这样也许某个地方的某个人可能会觉得它有帮助。

我的解决方案基于内置的 PHP filter_var() 函数。这意味着我不必每次需要验证给定值时都预先定义所有私有范围或保留范围。或循环遍历范围。相反，我让 PHP 为我担心。

```
class IP
{
    static public function is_ip($ip=NULL) : bool
    {
        return filter_var(
            $ip,
            FILTER_VALIDATE_IP,
            FILTER_FLAG_IPV4 | FILTER_FLAG_IPV6
        ) === $ip ? TRUE : FALSE;
    }

    static public function is_ipv4($ip=NULL) : bool
    {
        return filter_var(
            $ip,
            FILTER_VALIDATE_IP,
            FILTER_FLAG_IPV4
        ) === $ip ? TRUE : FALSE;
    }

    static public function is_ipv6($ip=NULL) : bool
    {
        return filter_var(
            $ip,
            FILTER_VALIDATE_IP,
            FILTER_FLAG_IPV6
        ) === $ip ? TRUE : FALSE;
    }

    static public function is_public_ip($ip=NULL) : bool
    {
        return filter_var(
            $ip,
            FILTER_VALIDATE_IP,
            FILTER_FLAG_IPV4 | FILTER_FLAG_IPV6 | FILTER_FLAG_NO_PRIV_RANGE | FILTER_FLAG_NO_RES_RANGE
        ) === $ip ? TRUE : FALSE;
    }

    static public function is_public_ipv4($ip=NULL) : bool
    {
        return filter_var(
            $ip,
            FILTER_VALIDATE_IP,
            FILTER_FLAG_IPV4 | FILTER_FLAG_NO_PRIV_RANGE | FILTER_FLAG_NO_RES_RANGE
        ) === $ip ? TRUE : FALSE;
    }

    static public function is_public_ipv6($ip=NULL) : bool
    {
        return filter_var(
            $ip,
            FILTER_VALIDATE_IP,
            FILTER_FLAG_IPV6 | FILTER_FLAG_NO_PRIV_RANGE | FILTER_FLAG_NO_RES_RANGE
        ) === $ip ? TRUE : FALSE;
    }

    static public function is_private_ip($ip=NULL) : bool
    {
        return self::is_ip($ip) && !self::is_public_ip($ip);
    }

    static public function is_private_ipv4($ip=NULL) : bool
    {
        return self::is_ipv4($ip) && !self::is_public_ipv4($ip);
    }

    static public function is_private_ipv6($ip=NULL) : bool
    {
        return self::is_ipv6($ip) && !self::is_public_ipv6($ip);
    }
} 
```

它允许您通常验证给定值是否是 IP。或者更具体一点。您可以验证以下类型：

*   知识产权
*   IPv4
*   IPv6
*   公共IP
*   公共 IPv4
*   公共 IPv6
*   私有IP
*   私有 IPv4
*   私有 IPv6

让我们测试一下：

```
$arr = array(
    '127.0.0.0', '127.0.0.1', '127.1.2.3', '127.1.2.255',

    '192.168.0.0', '192.168.0.1', '192.168.2.3', '192.168.2.255',

    '172.16.0.0', '172.16.0.1', '172.16.2.3', '172.16.2.255',
    '172.19.0.0', '172.19.0.1', '172.19.2.3', '172.19.2.255',

    '10.0.0.0', '10.0.0.1', '10.0.2.3', '10.0.2.255',
    '10.5.0.0', '10.5.0.1', '10.5.2.3', '10.5.2.255',

    '8.8.8.8', '8.8.4.4', '255.255.255',

    '182.168.1.300', '256.1.2.3', '0.500.0.0',
    'I am not an IP', NULL, '185.128.72.151'
);

foreach ($arr as $item) {
    echo "$item --> " . (IP::is_private_ip($item) === TRUE ? 'is private' : 'is NOT private or NOT an IP') . PHP_EOL;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-04-16T16:48:21.787

...我的 5 美分：

恕我直言，根本问题只是“如何检查 IP 地址是否属于网络？”。

答案是简单的二进制：IP_address AND network_mask EQUALS network_address。

例如，IP 地址 10.1.2.3 是否属于网络 10.0.0.0，网络掩码为 255.0.0.0？10.1.2.3 & 255.0.0.0 是 10.0.0.0，所以答案是：是的。

更容易在二进制中看到它：

```
 00001010 00000001 00000010 00000011 ( 10.1.2.3) ip address
& 11111111 00000000 00000000 00000000 (255.0.0.0) network mask
= 00001010 00000000 00000000 00000000 ( 10.0.0.0) network address 
```

只需检查您需要的网络（包括或不包括环回、链接本地等）：

```
function _isPrivate($long_ip) {
    return ( ($long_ip & 0xFF000000) === 0x0A000000 ) || //Private A network: 00001010 ....
           ( ($long_ip & 0xFFF00000) === 0xAC100000 ) || //Private B network: 10101100 0001....
           ( ($long_ip & 0xFFFF0000) === 0xC0A80000 ) || //Private C network: 11000000 10101000 ....
           //Link-local and loopback are NOT private range, so the function in the question yield right results to "is in private range?". Seems it was not the desired behaviour... Those cases can also be checked:
           ( ($long_ip & 0xFFFF0000) === 0xA9FE0000 ) || //Link-local       : 10101001 11111110 ....
           ( ($long_ip & 0xFFFF0000) === 0x7F000000 ) || //Loopback         : 01111111 ....
         //...and add all the fancy networks that you want...
           ( ($long_ip & 0xFFFFFF00) === 0xC0AF3000 ) || //Direct Delegation AS112 Service 192.175.48.0/24...
           ( ($long_ip & 0xF0000000) === 0xF0000000 ); //Reserved 240.0.0.0/4
} 
```

有趣的一点是返回值的否定。返回的值并不真正意味着给定的 IP 在专用网络中，但它的否定确实意味着给定的 IP 是“公共 IP 地址”（普通/普通 IP 地址），正如 user4880112 的解决方案所表明的那样。

**IPv6**

这同样适用于 IPv6。“专用网络”地址（正式名称为“Unique-Local”，RFC 4193）是“fc00::/7”。所以，ip_address & 0xFE00.. === 0xFC00.. 是“私有网络”

采用上述答案并包括来自 IANA 的最新信息......

[http://www.iana.org/assignments/iana-ipv6-special-registry/iana-ipv6-special-registry.xhtml](http://www.iana.org/assignments/iana-ipv6-special-registry/iana-ipv6-special-registry.xhtml) [http://www.iana.org/assignments/iana-ipv4-special-registry/iana -ipv4-special-registry.xhtml](http://www.iana.org/assignments/iana-ipv4-special-registry/iana-ipv4-special-registry.xhtml)

...我们可以像这样做一个更通用的函数：

```
function isPublicAddress($ip) {
  // returns false on failure.
  // negative if it's a private or special address (-4:IPv4, -16:IPv6)
  // positive if it's a common IP public address (4:IPv4, 16:IPv6)

  $networks = array(
    '4' => array('0.0.0.0/8',
      '10.0.0.0/8',
      '100.64.0.0/10',
      '127.0.0.0/8',
      '169.254.0.0/16',
      '172.16.0.0/12',
      '192.0.0.0/24',
      '192.0.0.0/29',
      '192.0.0.8/32',
      '192.0.0.9/32',
      '192.0.0.170/32',
      '192.0.0.170/32',
      '192.0.2.0/24',
      '192.31.196.0/24',
      '192.52.193.0/24',
      '192.88.99.0/24',
      '192.168.0.0/16',
      '192.175.48.0/24',
      '198.18.0.0/15',
      '198.51.100.0/24',
      '203.0.113.0/24',
      '240.0.0.0/4',
      '255.255.255.255/32')
    ,
    '16' => array('::1/128',
      '::/128',
      '::ffff:0:0/96',
      '64:ff9b::/96',
      '100::/64',
      '2001::/23',
      '2001::/32',
      '2001:1::1/128',
      '2001:2::/48',
      '2001:3::/32',
      '2001:4:112::/48',
      '2001:5::/32',
      '2001:10::/28',
      '2001:20::/28',
      '2001:db8::/32',
      '2002::/16',
      '2620:4f:8000::/48',
      'fc00::/7',
      'fe80::/10') 
    );

    $ip = inet_pton($ip);
    if( $ip === false ) return false;

    $space='16';
    if (strlen($ip) === 4) { 
      $space='4';
    }

    //Is the IP in a private or special range?
    foreach($networks[$space] as $network) {
      //split $network in address and mask
      $parts=explode('/',$network);
      $network_address = inet_pton($parts[0]);
      $network_mask    = inet_pton( _mask( $ip , $parts[1] ) );
      if (($ip & $network_mask) === $network_address){
        return -1*$space;
      }
    }
    //Success!
    return $space;
}

function _mask($ip,$nbits){
  $mask='';
  $nibble=array('0','8','C','E');
  $f_s= $nbits >> 2 ;
  if( $f_s > 0 ) $mask.=str_repeat('F',$f_s);
  if( $nbits % 4 ) $mask.= $nibble[$nbits % 4];
  if( strlen($ip) === 4 ){
    if( strlen($mask) < 8 ) $mask.=str_repeat('0', 8 - strlen($mask) );
    long2ip('0x'.$mask);
    $mask=long2ip('0x'.$mask);
  }else{
    if( strlen($mask) < 32 ) $mask.=str_repeat('0', 32 - strlen($mask) );
    $mask=rtrim(chunk_split($mask,4,':'),':');
  }
  return $mask;
} 
```

我现在想知道的是：“IPv4 映射地址”中的 IPv6 地址是 IPv6 中的“特殊”地址，即使它是 IPv4 中的“普通”IP 地址。我们是否应该考虑“私人使用” ::ffff:0:0/96 中匹配 IPv4 私人使用网络的子网？

编辑解释最后一条评论：

IPv6 网络 ::ffff:0:0/96 映射到每个 IPv4 地址的 IPv6 地址。这些 IPv6 地址在 IANA 注册中心（“特殊用途”）中的单个集合中，但映射的 IPv4 地址在 IPv4 中的所有类型的集合中（私有网络、环回、广播、公共......）“通用 IPv4地址”总是一个“特殊的 IPv6 地址”。如果我们使用与 IPv4 专用网络匹配的 ::ffff:0:0/96 范围内的 IPv6 地址设置网络...我们使用的是专用网络地址吗？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-09T17:43:32.237

使用 inet_pton 而不是 ip2long，并包括一些更晦涩的私有范围：

```
function isPublicAddress($ip) {

    //Private ranges...
    //http://www.iana.org/assignments/iana-ipv4-special-registry/
    $networks = array('10.0.0.0'        =>  '255.0.0.0',        //LAN.
                      '172.16.0.0'      =>  '255.240.0.0',      //LAN.
                      '192.168.0.0'     =>  '255.255.0.0',      //LAN.
                      '127.0.0.0'       =>  '255.0.0.0',        //Loopback.
                      '169.254.0.0'     =>  '255.255.0.0',      //Link-local.
                      '100.64.0.0'      =>  '255.192.0.0',      //Carrier.
                      '192.0.2.0'       =>  '255.255.255.0',    //Testing.
                      '198.18.0.0'      =>  '255.254.0.0',      //Testing.
                      '198.51.100.0'    =>  '255.255.255.0',    //Testing.
                      '203.0.113.0'     =>  '255.255.255.0',    //Testing.
                      '192.0.0.0'       =>  '255.255.255.0',    //Reserved.
                      '224.0.0.0'       =>  '224.0.0.0',        //Reserved.
                      '0.0.0.0'         =>  '255.0.0.0');       //Reserved.

    //inet_pton.
    $ip = @inet_pton($ip);
    if (strlen($ip) !== 4) { return false; }

    //Is the IP in a private range?
    foreach($networks as $network_address => $network_mask) {
         $network_address   = inet_pton($network_address);
         $network_mask      = inet_pton($network_mask);
         assert(strlen($network_address)    === 4);
         assert(strlen($network_mask)       === 4);
         if (($ip & $network_mask) === $network_address)
            return false;
    }

    //Success!
    return true;

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-08T07:44:51.437

基本上是@Mark Davidson 的答案，但有点数学。

```
function isPrivate($szAddr) {

   $nIP = ip2long($szAddr);

   $arLocal = [
      [ip2long('127.0.0.0'),   24],
      [ip2long('10.0.0.0'),    24],
      [ip2long('172.16.0.0'),  20],
      [ip2long('192.168.0.0'), 16],
      [ip2long('169.254.0.0'), 16],
   ];

   foreach( $arLocal as $arP ) {

      $maskLo = ~((1 << $arP[1]) - 1);  // CREATE BIT MASK FROM NUMBER

      if( ($nIP & $maskLo) === $arP[0] ) // BITWISE-AND, THEN COMPARE
         return true;
   }

   return false;
} 
```

# c++ - 如何在运行时使用 typeof 创建一个 void * 指针

> ID：13818066
> 
> 赞同：1
> 
> 时间：2012-12-11T10:16:42.433
> 
> 标签：c++

```
#define test(p) (typeof(*(*p)) *) 
```

`p`上面的宏在is`void **`而不是其他东西时失败。

它适用于c，但不适用于c++。在 c++ 中是否有任何迂回的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:26:16.290

在 C++(11) 中有[remove_pointer](http://en.cppreference.com/w/cpp/types/remove_pointer)，它返回输入类型参数指向的类型。

> 基本上，当 p 为 int ** 时，我使用该宏进行 int * 类型转换。但是当 p 为 void **.[...] 时它会失败并出现错误。不，我不能使用 typeof(*p)，因为这个宏还需要确保 p 是双指针。

如果您只需要演员表，那么一个简单的函数模板应该会有所帮助。

```
template<typename T>
T* remove_pointer_cast(T** p)
{
    return (T*)(p);
} 
```

# string - 在 csh 上自连接字符串

> ID：13818067
> 
> 赞同：4
> 
> 时间：2012-12-11T10:16:48.837
> 
> 标签：string, shell, concatenation, csh, argv

我需要将 argv 中的部分内容连接到我的变量之一。

我将向您展示我的代码：

```
#!/bin/csh

set stringList = ""
foreach param ($argv)
    if($param !~ TEST) then
        set stringList = $stringList " " $param
    endif
end

echo $stringList > /tmp/prova.txt 
```

当然，txt文件上没有打印任何内容。有什么解决办法吗？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T18:53:08.077

改变

```
 set stringList = $stringList " " $param 
```

至

```
 set stringList = "$stringList $param" 
```

# android - Android 服务到活动的高频通信：最佳选择？

> ID：13818071
> 
> 赞同：5
> 
> 时间：2012-12-11T10:17:00.530
> 
> 标签：android, android-activity, android-service

在 Android 应用程序（API 级别 14 和更高级别）中，具有由不同活动使用的服务（它们使用本地绑定调用其函数），该服务以 60 Hz 计算游戏元素的位置（坐标）。[我有充分的理由在服务中进行计算，而不仅仅是直接在活动中]。在服务（用于游戏逻辑检查）和游戏屏幕活动（用于绘图）中需要这些连续的位置更新。

我的问题是：在这种情况下，服务到活动通信的选项是什么？我想将服务计算新位置的时间点与 UI（活动）已知的时间点之间的毫秒延迟（充其量，几乎没有延迟）最小化。

您可以假设一切（活动、服务）都在一个过程中。

我正在考虑一个解决方案，其中每个活动，无论何时恢复，都会告诉服务它的存在（并且在 onPause() 活动告诉服务它们不可用），以便服务在计算新坐标时可以简单地检查一个activity是否可见，如果是，直接调用visibleActivity.someMethod()。据了解， .someMethod() 在内部将控制权交给了 UI 线程。

我建议这样做，因为我确信通过广播应该会降低性能。

让我知道你的想法！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T10:21:49.477

您的活动应该向服务注册在[AIDL](http://developer.android.com/guide/components/aidl.html)中实现的侦听器，并且服务应该在[RemoteCallbackList中维护它们](http://developer.android.com/reference/android/os/RemoteCallbackList.html)

您的服务应该有两个这样的方法，由您的活动在 onResume/onPause 中调用

```
public void registerListener(IYourListenerInterface listener) {
     callbackList.register(listener);
}

public void unregisterListener(IYourListenerInterface listener) {
     callbackList.unregister(listener);
} 
```

当您需要发送消息时：

```
int numOfListeners = callbackList.beginBroadcast();

for (int i = 0; i < numOfListeners; i++) {
    try {
        callbackList.getBroadcastItem(i).whatever();
    } catch (RemoteException e) {
        //ignore, listener probably gone
    }
}
callbackList.finishBroadcast(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T12:07:10.553

我会使用`LocalBroadcastManager`，或者可能是[Otto](http://square.github.com/otto/)。这些提供了比已经提出的解决方案（绑定和回调）更好的组件解耦。这很重要，因为活动可以根据用户操作（配置更改、返回按钮）来来去去。

> 我有充分的理由在服务中进行计算，而不仅仅是在活动中直接进行

老实说，我无法想象这些原因会是什么。

# c++ - &decltype(obj)::member 不工作

> ID：13818072
> 
> 赞同：4
> 
> 时间：2012-12-11T10:17:02.677
> 
> 标签：c++, c++11, member-function-pointers, decltype

为什么这不起作用（Visual C++ 2012 Update 1），修复它的正确方法是什么？

```
#include <boost/lambda/bind.hpp>
namespace bll = boost::lambda;

struct Adder
{
    int m;
    Adder(int m = 0) : m(m) { }
    int foo(int n) const { return m + n; }
};

#define bindm(obj, f, ...)  bind(&decltype(obj)::f, obj, __VA_ARGS__)

int main()
{
    return bll::bindm(Adder(5), foo, bll::_1)(5);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T11:28:33.430

`decltype` as a *nested-name-specifier* was added into C++11 at a relatively late stage; [n3049](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2010/n3049.pdf) as the resolution to [DR 743](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#743) (and [DR 950](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#950)). n3049 was published in March 2010, which is probably why it hasn't found its way into VC++ yet.

The workaround is to use the identity typefunction:

```
template<typename T> using id = T;
id<decltype(expression)>::member; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T10:59:49.510

一个编译器错误。

decltype *-specifier* (7.1.6.2 Simple type specifiers [dcl.type.simple]) 被明确地允许作为一个*nested-name-specifier* (5.1 Primary expressions [expr.prim] -> 5.1.1 General expr.prim.general] #8)

PS。在@ecatmur 的想法之后：

```
template<typename T> struct id { typedef T type; };

#define bindm(obj, f, ...)  bind(&id<decltype(obj)>::type::f, obj, __VA_ARGS__) 
```

# c# - 想在xml中查找特定节点

> ID：13818073
> 
> 赞同：1
> 
> 时间：2012-12-11T10:17:01.017
> 
> 标签：c#, xml

目前，我的xml如下：

```
<Node_Parent>

 <Column name="ColA" value="A" />
 <Column name="ColB" value="B" />
 <Column name="ColC" value="C" />
</Node_Parent> 
```

如何在 ColB 获得价值 B？我尝试使用`XmlDocument.SelectSingleNode("Node_Parent")`，但无法访问 ColB？

如果改成 `<ColB value="B" />`可以用`XmlDocument.SelectSingleNode("Node_Parent/ColB").Attributes["value"].Value`，但是xml格式不好看？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:24:01.443

您需要在以下位置编写 XPath 查询`SelectSingleNode`：

```
var value = doc.SelectSingleNode(
    "Node_Parent/Column[@name = 'ColB']"
    ).Attributes["value"].Value; 
```

有关 XPath 查询语言的更多信息，请参阅[http://www.w3schools.com/xpath](http://www.w3schools.com/xpath)。

祝你好运！

# git - git-stash 可以忽略对跟踪文件的修改吗

> ID：13818076
> 
> 赞同：1
> 
> 时间：2012-12-11T10:17:07.700
> 
> 标签：git, ignore, git-stash

我正在做一个有一些不寻常行为的项目：

源代码中的文件之一是包含重要代码的文件，但它可以自行编辑以包含一些配置。这是否是好的设计是一个不同的讨论，但为了能够测试我的项目，这个文件需要处于修改状态。

在我提交任何事情之前，我通常会对我的贡献前后的情况进行 AB 比较。我`git stash`用来在基本副本和脏工作副本之间切换。问题是在使用时`git stash`，它也会恢复我的配置。

我目前的解决方法很麻烦：我执行 a `git add path/to/settingsfile`and then `git stash --keep-index`，但我不喜欢这种解决方法。除非我另有说明，否则是否有更优雅的解决方案让 git 忽略对此文件的所有修改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:25:20.877

请参阅“[在分支签出之间保留 git --assume-unchanged 文件](https://stackoverflow.com/questions/9815416/preserve-git-assume-unchanged-files-between-branch-checkouts/9816844#9816844)”

```
 git update-index --skip-worktree -- path 
```

这不会从`git stash`.

* * *

原始答案

来自“[暂时忽略文件](http://gitready.com/intermediate/2009/02/18/temporarily-ignoring-files.html)”：

```
 git update-index --assume-unchanged <file> 
```

这将允许忽略对该特定文件的更改。*如果您想恢复代码更改同时*将配置更改保留在同一个文件中，
这将无济于事。

 *并且 git stash 仍然会恢复它：[如何防止 git stash 使用“假设不变”位删除对文件的更改？](https://stackoverflow.com/questions/5962456/how-to-prevent-git-stash-dropping-changes-to-files-with-the-assume-unchanged-b)

* * *

请注意，在 Git 2.25（2020 年第一季度）之前，“[`git stash`](https://git-scm.com/docs/git-stash)保存”在稀疏签出的工作树中错误地删除了感兴趣区域之外的路径。

请参阅[Johannes Schindelin ( ) 的](https://github.com/dscho)[提交 4a58c3d](https://github.com/git/git/commit/4a58c3d7f7a83ebcd4ede635871cab7be24f7f3f)和[提交 8dfb04a](https://github.com/git/git/commit/8dfb04ae964868dda758997e5e7da29edff6164b)（2019 年 10 月 30 日[）](https://github.com/dscho)。^(（由)^([Junio C Hamano 合并](https://github.com/gitster))^([——](https://github.com/gitster))^在^([提交 57b5301](https://github.com/git/git/commit/57b530125e022de79f5f0b208bc0a5ee67c18b77))^(中，2019 年 11 月 10 日）)[`dscho`](https://github.com/dscho)
^([`gitster`](https://github.com/gitster))

> ## [`stash`](https://github.com/git/git/commit/4a58c3d7f7a83ebcd4ede635871cab7be24f7f3f)：正确处理跳过工作树文件中的阶段性更改
> 
> ^(签字人：约翰内斯·辛德林)
> 
> `git stash`在为标记有该`skip-worktree`位的文件（例如，在稀疏检出中排除的文件）暂存更改时调用时，这些文件将被记录为*已删除*。
> 
> 原因是`git stash`试图通过将索引复制到临时索引然后更新工作树中的文件来构建反映工作树的树。
> 至关重要的是，它还要求`git diff-index`更新 HEAD 中但未在索引中暂存的那些文件。
> 
> 但是，当临时索引通过 更新时`git update-index --add --remove`，skip-worktree 条目会将文件标记为误删除。
> 
> 让我们使用新引入的`--ignore-skip-worktree-entries`选项`git update-index`来防止这种情况发生。
> 
> 请注意，回归测试用例故意避免复制上述场景，而是尝试仅重新创建症状。
> 
> 丹汤普森报道。*

# python - 十六进制正则表达式字符串匹配不起作用（python）

> ID：13818081
> 
> 赞同：2
> 
> 时间：2012-12-11T10:17:24.290
> 
> 标签：python, regex, hex

我有一个如下的十六进制字符串（例如）

```
'0x100x200x3f0x2d0x300x330xd0xa' 
```

我想提取标题之间的所有东西

```
'0x100x200x3f0x2d' 
```

和尾巴

```
'0xd0xa' 
```

在上面给出的示例中，我想使用正则表达式提取的表达式是

```
'0x300x33' 
```

通常，搜索的字符串可以由任意数量的两位十六进制数字组成。我试过以下

```
a = re.compile('0x100x200x3f0x2d([0x[0-9a-f]{2,2}]+)0xd0xa') 
```

这与我的示例字符串不匹配！我只需要`0x`后跟两个十六进制数字`0-9a-f`（总是小写，内部矩形括号），至少在字符串中出现一次（外部矩形括号`+`）。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:37:14.717

> 所以一个永远不应该有两个 [] 嵌套？

嵌套在`[`字符组中将使外部字符组包含该`[`字符。该角色`]`将关闭第一个角色组，使第二`]`个角色成为静态角色。

因此，您的正则表达式`([0x[0-9a-f]{2,2}]+)`将被解释为：

```
[0x[0-9a-f]{2,2}]+
^^^^^^^^^^^
character group with the characters: 0, x, [, 0-9, a-f
           ^^^^^
           two of those
                ^^
                followed by at least one ] 
```

例如，它会匹配以下奇怪的东西：

```
00]
00]]]]]]]]]
[[]
xx]
ff] 
```

相反，您不想要一个字符组，而是一个普通的匹配组（注意`{2,2}`缩短为 just `{2}`）：

```
((0x[0-9a-f]{2})+) 
```

这当然会在比赛结果中生成第二组（因为你有两个接球组）。您可以通过在其内容前加上前缀来使内部组成为非捕获组来更改它`?:`，`(?:...)`即将分组但不会在匹配中产生结果。

```
((?:0x[0-9a-f]{2})+) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T10:20:18.337

您正在尝试重复字符类`[]`而不是组。所以你基本上要求任意数量的`0x[0-9a-f]{2,2}`字符（所以 xxxx 也会匹配）。

这可能会更好：

```
a = re.compile('0x100x200x3f0x2d((0x[0-9a-f]{2})+)0xd0xa') 
```

# css - 在 DIV 中居中文本

> ID：13818082
> 
> 赞同：0
> 
> 时间：2012-12-11T10:17:27.717
> 
> 标签：css, alignment

我正在尝试将 DIV 中的文本居中，不仅水平居中而且垂直居中 - 我已经玩了很长时间的 CSS，但似乎无法让它工作 -

我的代码在这里：http: [//jsfiddle.net/K2sys/46/](http://jsfiddle.net/K2sys/46/)

```
h6 {
    font-size: 32px;
    color: #FFFFFF;
}

h6:hover {
    color: #000000;
}

.griditem {
    position: relative;
    display:inline-block;
    margin-right: 17px;
    margin-bottom: 17px;
    background-color: #777;
    width: 32%;
    height: 500px;
    max-width: 612px;
    min-width: 389px;
    text-align: left;
}

.titles {
    padding: 0px;
    bottom: 0px;
    position: absolute;
    left: -1px;
    right: -1px;
    top: -1px;
    -moz-border-radius: 1px 1px 0 0;
    border-radius: 1px 1px 0 0;
    text-align: center;
    display: none;
    background: rgba(0, 0, 0, 0.5);
    -moz-border-radius: 1px 1px 0 0;
    border-radius: 1px 1px 0 0;
    vertical-align: middle;
}

.griditem:hover > .titles {
    display:  block;

}
​

<a class="griditem" href="http://www.bbc.co.uk" style="background-image:url('http://news.bbcimg.co.uk/media/images/64623000/jpg/_64623471_clinton_pa.jpg'); background-size:100% 100%;\">
<div class="titles">
<h5>Title</h5><h6>Subtitle</h6>
</div></a> 
```

​</p>

谁能告诉我哪里出错了？

基本上我希望“标题”和“副标题”在翻转时位于“.griditem”框的中心。我敢肯定这真的很简单，但是我一直盯着这个看太久了，现在我忽略了显而易见的......任何帮助将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:19:10.053

you can center text horizontally with `text-align:center;` but to align it vertically you need to add the next 2 lines to the div

```
display:table-cell;
vertical-align:middle; 
```

# java - 什么是 JSP 上下文？

> ID：13818084
> 
> 赞同：8
> 
> 时间：2012-12-11T10:17:36.983
> 
> 标签：java, jsp, servlets, expression

我想知道这个 java 对象到底是什么，它的主要目的是什么。我看过java文档，但这让我更加困惑:(。

是否有会话、请求、应用等关系范围？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-06-28T17:02:52.250

## Jsp上下文

![在此处输入图像描述](../Images/34ee12711502554926ac5809a362f322.png)

![在此处输入图像描述](../Images/3b17f6705616c77b5cd7cf79ee051146.png)

![在此处输入图像描述](../Images/20b67d1b0ffdf9a471bce49beaaabe19.png)

JspContext 令人困惑，因为它似乎没有做任何 ServletContext 不能做的事情。你是对的，它没有。没有 JspContext 也可以。隐式变量可供您使用。

主要好处在于 JSP 技术不一定与 Java 绑定。是的。您没听错，JSP 被定位为跨平台兼容。

引用[API](http://docs.oracle.com/javaee/1.4/api/javax/servlet/jsp/JspContext.html)：

*JspContext 充当 PageContext 类的基类，并抽象出所有非特定于 servlet 的信息。这允许在请求/响应 Servlet 的上下文之外使用简单标记扩展。*

这种抽象允许 JSP 以与平台无关的方式收集有关其环境（请求、会话和应用程序范围）的信息。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-12-11T10:26:33.990

JSP 上下文对象 = 应用程序上下文 = ServletContext。

范围是应用程序。

希望这可以帮助。

# rabbitmq - AMQP 绑定和消息删除

> ID：13818089
> 
> 赞同：0
> 
> 时间：2012-12-11T10:17:52.693
> 
> 标签：rabbitmq, amqp

消息被消费后，如何在绑定配置中从队列中删除消息？

例子：

我有

topic.1、topic.2、topic.3、...等

我有两个绑定，比如 my_topic 绑定到 topic.1 和 all_topic 绑定到 topic.#

my_topic 为高优先级，消息正常消费，但仍保留在 topic.# 绑定中。那么我怎样才能将它们从主题中删除。# 所以它们不会被消耗两次？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:32:57.240

将您的主题拆分为更多队列。因此，不要让一个队列使用路由键“users.*”订阅消息，而是为每个路由键创建一个队列：“users.created”、“users.updated”、“users.deleted”。然后，当您在一种消息中有更多负载时，您可以创建新的消费者以动态绑定到此队列。

# perl - 使用 perl index() 函数的精确模式匹配

> ID：13818090
> 
> 赞同：0
> 
> 时间：2012-12-11T10:17:58.010
> 
> 标签：perl

我正在尝试使用 index() 函数，并且我想在字符串中找到单词的位置，只有当它完全匹配时。例如：

我的字符串是`STRING="CATALOG SCATTER CAT CATHARSIS"`

我的搜索字符串是`KEY=CAT`

我想说一些类似`index($STRING, $KEY)`并检查 CAT 的匹配，而不是 CATALOG。我该如何做到这一点？文件说

> index 函数在另一个字符串中搜索一个字符串，但没有完整正则表达式模式匹配的类似通配符的行为。

这让我觉得这可能不是那么直截了当，但我的 perl 技能是有限的 :)。有可能做我想做的事吗？

希望我能够很好地表达我的问题。在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T13:14:42.633

您需要了解Perl 中的[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)。Perl 并没有发明*正则表达式*，而是极大地扩展了这个概念。事实上，许多其他编程语言专门讨论使用*Perl 正则表达式*。

正则表达式匹配特定的单词模式。例如，`/cat/`匹配字符串中的序列*cat*。

```
if ( $string =~ /cat/ ) {
    print "String contains the letters 'cat' in a row\n";
} 
```

在许多方面，这与以下内容相同：

```
my $location = index ( $string, "cat" );
if ( $location =! -1 ) {  # index returns -1 when substring isn't found
    print "String contains the letters 'cat' in a row\n";
} 
```

但是，这两者都会匹配：

*   `"Don't let the cat out of the bag"`
*   `"The Sears catalog arrived in the mail"`

你不想匹配最后一个。所以，你可以这样做：

```
 my $location = index $string, " cat "; 
```

现在，`index $string, " cat "`不会匹配单词目录。结案！或者是吗？关于什么：

*   `"cat and dog it doth rain."`

如果句子以“ *cat* ”开头，也许您可​​以检查并说一切正常：

```
if ( (index ($string, " cat ") != -1) or (index ($string, "cat") = 0) ) {
    print "String contains the letters 'cat' in a row\n";
} 
```

但是，这些呢？

*   `"The word CAT in all uppercase"`
*   `"Stupid cat"`
*   `"Cat! Here Cat! Common Cat!"`：“猫”字后的标点符号
*   `"Don't let the 'cat' out of the 'bag'"`：“猫”周围的引号

可能需要几十行来指定这些条件中的每一个。

然而：

```
if ( $string =~ /\bcat\b/i ) {
    print "String contains the word 'cat' in it\n";
} 
```

指定每一个 - 然后是一些。说这`\b`是一个单词边界。这可以是空格、制表符、引号、行的开头或结尾。因此`/\bcat\b/`指定 this 应该是单词`cat`而不是`catalog`。最后`i`的 告诉您的正则表达式在匹配时忽略大小写，因此您会找到`Cat`, `cat`, `CAT`,`cAt`和所有其他可能的组合。

事实上，正是 Perl 的正则表达式使 Perl 成为如此流行的语言。

幸运的是，Perl 没有一个，而是两个关于正则表达式的教程：

*   [perlretut](http://perldoc.perl.org/perlretut.html) : Perl 正则表达式教程
*   [perlrequick](http://perldoc.perl.org/perlrequick.html)：Perl 正则表达式快速入门。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T12:17:32.247

怎么样：

```
my $str = "CATALOG SCATTER CAT CATHARSIS";
my $key = "CAT";
if ($str =~ /\b$key\b/) {
    say "match at char ",$-[0];;
} else {
    say "no match";
} 
```

**输出：**

```
match at char 16 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T12:29:39.977

这是这个问题的（部分）解决方案`index`：

```
use warnings;
use strict;

my $test = 'CATALOG SCATTER CAT CATHARSIS';
my $key = 'CAT';

my $k_length = length $key;
my $s_length = (length $test) - $k_length;

my $pos      = -1;
while (($pos = index $test, $key, $pos + 1) > -1) {
  if ($pos > 0) {
    my $prev_char = substr $test, $pos - 1, 1;
    ### print "Previous character: '$prev_char'\n";
    next if $prev_char ge 'A' && $prev_char le 'Z'
         || $prev_char ge 'a' && $prev_char le 'z';
  }
  if ($pos < $s_length) {
    my $next_char = substr $test, $pos + $k_length, 1;
    ### print "Next character: '$next_char'\n";
    next if $next_char ge 'A' && $next_char le 'Z'
         || $next_char ge 'a' && $next_char le 'z';
  }
  print "Word '$key' found at " . $pos + 1 . "th position.\n";
} 
```

如您所见，它有点罗嗦，因为它只使用基本的 Perl 字符串函数——`index`而且`substr`——。检查找到的子字符串是否确实是一个词是通过检查它的下一个和前一个字符（如果它们存在）来完成的：如果它们属于任何一个`A-Z`或`a-z`范围，它就不是一个词。

您可以通过尝试小写这些字符（使用 lc）来简化它，然后仅检查单个字符范围：

```
my $lc_prev_char = lc( substr $test, $pos - 1, 1 );
next if $lc_prev_char ge 'a' && $lc_prev_char le 'z'; 
```

...但话又说回来，这是一个很小的改进（如果有改进的话）。

现在考虑一下：

```
my $test = 'CATALOG SCATTER CAT CATHARSIS CAT';
my $key = 'CAT';
while ($test =~ /(?<![A-Za-z])$key(?![A-Za-z])/g) {
  print "Word '$key' found at " . ($-[0] + 1) . "th position.\n";
} 
```

……就是这样！该模式从字面上测试给定的字符串 ($test) 是否为给定的子字符串 ($key) 前面或后面没有 A-Za-z 范围的符号，并且支持 Perl 正则表达式魔法（特别是[这个变量](http://perldoc.perl.org/perlvar.html#@LAST_MATCH_START)）使得很容易得到这样的子串的起始位置。

底线：使用正则表达式来完成正则表达式的工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T12:16:41.767

正则表达式允许搜索包含单词边界以及不同的字符。尽管

```
my $string = "CATALOG SCATTER CAT CATHARSIS";
index($string, 'CAT'); 
```

`$string`如果包含字符，将返回零或更大`CAT`，正则表达式如

```
$string =~ /\bCAT\b/; 
```

将返回*false*，因为`$string`不包含`CAT`前后的单词边界。（*单词边界*是字符串的开头或结尾，或者介于单词字符和非单词字符之间。*单词字符*是任何字母数字字符或下划线。）

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-11T11:47:57.850

使用 \E 值。所以 ：

```
#!usr/bin/perl

my $string ="Little Tony";
my $check = "Ton";

if($string =~ m/$check\E/g)
{
print "match";
}
else 
{ 
die("No Match"); 
} 
```

# java - Why does my file not get read correctly when running through ANT

> ID：13818098
> 
> 赞同：3
> 
> 时间：2012-12-11T10:18:15.510
> 
> 标签：java, ant

I have a suite of unit tests I run in Eclipse which all work fine. They depend on data loaded from a very large > 20MB file. However, when I run the unit tests from ANT the tests fail because some of the data is not loaded. What happens is my file reading mechanism does not read the entire file, it just stops , without giving any error after reading about 10,000 of 900,000 lines

Here is my file reading code

```
 private static void initializeListWithFileContents(
        TreeMap<String, List<String>> treeMap, String fileName)
{
    File file = new File(fileName);
    Scanner scanner = null;
    int count = 0;
    try
    {

        scanner = new Scanner(file);
        while (scanner.hasNextLine())
        {
            String line = scanner.nextLine().toLowerCase().trim();      
            String[] tokens = line.split(" ");

            if (tokens.length == 3)
            {
                String key = tokens[0] + tokens[1];
                if (treeMap.containsKey(key))
                {
                    List<String> list = treeMap.get(key);
                    list.add(tokens[2]);
                }
                else
                {
                    List<String> list = new ArrayList<String>();
                    list.add(tokens[2]);
                    treeMap.put(key, list);
                }
                count++;
            }
        }           
        scanner.close();
    }

    catch (IOException ioe)
    {
        ioe.printStackTrace();
    }
    System.out.println(count + " rows added");
} 
```

This is part of a Web app. The web app also works fine, the entire file gets loaded to memory. If the data my Unit tests depends on are contained in the first 10,000 lines then unit tests pass ok with ANT. The only thing I can think of is it must be a memory issue but why then do I not get an exception thrown. I run my ANT target from within Eclipse. It is configured with the same JVM args as my Eclipse JUnit runner is , ie -Xms512m -Xmx1234m. I know it picks these up correctly because if ANT launches with the default JVM parameters then it will fail with Heap error. Any other ideas what I could check?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:04:12.643

该`Scanner`类型会吞下 I/O 错误。[您必须使用ioException()](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#ioException%28%29)方法显式检查错误。

如果问题是编码错误，您需要在实例化扫描仪时[显式传递文件的编码。](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#Scanner%28java.io.File,%20java.lang.String%29)

如果文件是损坏的文本文件，您可能需要提供[自己的阅读器](http://docs.oracle.com/javase/7/docs/api/java/io/InputStreamReader.html)来进行更多的容错解码。如果可能，应该避免这种情况，因为它不太正确。

# android - Actionbarsherlock tabs style in FragmentTabs

> ID：13818103
> 
> 赞同：1
> 
> 时间：2012-12-11T10:18:43.923
> 
> 标签：android, android-fragments, actionbarsherlock, android-tabhost

I'm currently using ActionbarSherlock example with tabs and fragments (FragmentTabs, without viewpager).

Tabs on 4.0+ devices looks pretty good:

![enter image description here](../Images/e9456ceaa895a96bb328da415b90394b.png)

And on pre 4.0 devices is not so good:

![enter image description here](../Images/f8bcf8cb6e12ae9aa3ec493437be3baf.png)

**How to make tabs on pre android 4 looks the same as on android 4+?** Maybe someone have already did it and could share the solution?

I had tried to use [Android Action Bar Style Generator](http://jgilfelt.github.com/android-actionbarstylegenerator/#name=example&compat=holo&theme=light&actionbarstyle=solid&backColor=E4E4E4,100&secondaryColor=D6D6D6,100&tertiaryColor=F2F2F2,100&accentColor=33B5E5,100), but the style didn't effect on this tabs. They looked the same.

Here is the [Fragment tabs layout](https://github.com/JakeWharton/ActionBarSherlock/blob/master/samples/fragments/res/layout/fragment_tabs.xml) and here is [FragmentTabs](https://github.com/JakeWharton/ActionBarSherlock/blob/master/samples/fragments/src/com/actionbarsherlock/sample/fragments/FragmentTabs.java).

# ubuntu - Memory-leaks when using libssh

> ID：13818105
> 
> 赞同：0
> 
> 时间：2012-12-11T10:18:46.280
> 
> 标签：ubuntu, memory-leaks, g++, valgrind, libssh

I am trying to use libssh in my application, but I keep getting memory leaks. The most simplistic code, I am trying, is:

```
#include <libssh/libssh.h>
#define SSH_NO_CPP_EXCEPTIONS
assert(0 == ssh_init());

ssh_session m_session;
assert(m_session = ssh_new());

int port = 22;
assert(0 == ssh_options_set(m_session, SSH_OPTIONS_HOST, "user1@computer1"));
assert(0 == ssh_options_set(m_session, SSH_OPTIONS_PORT, &port));
assert(SSH_OK == ssh_connect(m_session));

ssh_disconnect(m_session);
ssh_free(m_session);
assert(0 == ssh_finalize()); 
```

Works as expected, but Valgrind complaints about leaks (as if all memory allocated by ssh_connect was not freed):

```
==17385== HEAP SUMMARY:
==17385==     in use at exit: 300 bytes in 11 blocks
==17385==   total heap usage: 2,008 allocs, 1,997 frees, 5,529,273 bytes allocated
==17385== 
==17385== 300 (60 direct, 240 indirect) bytes in 1 blocks are definitely lost in loss record 11 of 11
==17385==    at 0x4C2B6CD: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==17385==    by 0x60ED594: nss_parse_service_list (nsswitch.c:678)
==17385==    by 0x60EE055: __nss_database_lookup (nsswitch.c:175)
==17385==    by 0x94AC623: ???
==17385==    by 0x60A6BFC: getpwuid_r@@GLIBC_2.2.5 (getXXbyYY_r.c:256)
==17385==    by 0x58B25F7: ssh_get_user_home_dir (misc.c:216)
==17385==    by 0x58B2F42: ssh_path_expand_tilde (misc.c:673)
==17385==    by 0x58B3F57: ssh_options_set (options.c:457)
==17385==    by 0x58B4702: ssh_options_apply (options.c:915)
==17385==    by 0x58A72CD: ssh_connect (client.c:652)
==17385==    by 0x421896: sshTest() (main.cpp:589)
==17385==    by 0x418F67: main (main.cpp:51)
==17385== 
==17385== LEAK SUMMARY:
==17385==    definitely lost: 60 bytes in 1 blocks
==17385==    indirectly lost: 240 bytes in 10 blocks
==17385==      possibly lost: 0 bytes in 0 blocks
==17385==    still reachable: 0 bytes in 0 blocks
==17385==         suppressed: 0 bytes in 0 blocks 
```

I am using:

*   Ubuntu 12.04 x64 LTS
*   libssh version *0.5.2-1ubuntu0.12.04.1* (latest available at the moment)
*   g++/gcc version 4.6.3 (Ubuntu/Linaro 4.6.3-1ubuntu5)
*   valgrind-3.7.0

What am I doing wrong? Any help would be greatly appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T18:32:40.587

你没有做错任何事。libssh 中没有内存泄漏，这是您的 libc :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T18:50:55.837

这是你的罪魁祸首

```
==17385==    by 0x60A6BFC: getpwuid_r@@GLIBC_2.2.5 (getXXbyYY_r.c:256) 
```

我以前追过这个，我只想告诉你，GLIBC getpw* 和 getgr* 函数分配少量的内存，这些内存永远不会被释放。开发人员表示他们不会修复它。我在某个地方的电子邮件线程中发现了这一点，但无法立即找到参考。

将此添加到您的抑制文件中并继续前进。

# javascript - Jquery .show Issue on IE

> ID：13818109
> 
> 赞同：0
> 
> 时间：2012-12-11T10:18:59.617
> 
> 标签：javascript, jquery, html, css, forms

I have a form, and when certain inputs are filled another div will display beneath the form. The following is the code:

```
<form>

<div class="fieldtitle">Full Name:* </div><input type="text" value="" name="fullname" id="fullname" />
<div class="fieldtitle">Email:* </div><input type="text" value="" name="email" id="emailfield" />
<div class="fieldtitle">Contact No:* </div><input type="text" value="" name="contact" id="contact" />

</form>

<div id="demo1" style="width:300px; display:none;"></div>

<script type="text/javascript">

$("#formarea").keyup(function(){
    if($(fullname).val() && $(emailfield).val() && $(contact).val() && $(quantity).val()) {
        $("#demo1").show();
        if($.browser.msie){
           $('#demo1').css({"visibility":"visible"});
        }
    } else {
        $("#demo1").hide();
    }

});

</script> 
```

It is working on all browsers, except for IE - any suggestions as how to solve this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:24:55.627

IE 不喜欢建议的 id 或名称选择器，你没有以正确的方式使用它。指定您要定位的选择器。

例如：替换

```
$(fullname) 
```

和

```
$('#fullname') 
```

等等...

顺便说一句，在您的示例代码中看不到任何 ID 为“formarea”的表单。并删除它：`if($.browser.msie){...}` 它没用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T10:29:24.377

html 缺少数量字段，这将导致 Javascript 出现逻辑问题。

```
<form>
    <div class="fieldtitle">Full Name:* </div><input type="text" value="" name="fullname" id="fullname" />
    <div class="fieldtitle">Email:* </div><input type="text" value="" name="email" id="emailfield" />
    <div class="fieldtitle">Contact No:* </div><input type="text" value="" name="contact" id="contact" />
    <div class="fieldtitle">Quantity:* </div><input type="text" value="" name="quantity" id="quantity" />
</form>

    <div id="demo1" style="width:300px; display:none;">Test</div> 
```

Javascript 将事件绑定到错误的元素。它应该绑定到`inputs`而不是表单。此外，为每个输入传入的选择器应该是使用 css id 选择器的字符串文字。

```
$("input").keyup(function(){
    if($("#fullname").val() && $("#emailfield").val() && $("#contact").val() && $("#quantity").val()) {
        $("#demo1").show();
    } else {
        $("#demo1").hide();
    }
}); 
```

也不需要 IE 条件。Jquery 的`show()/hide()`方法是跨浏览器兼容的。示例：http: [//jsfiddle.net/DEfVS/1/](http://jsfiddle.net/DEfVS/1/)

# java - Spring import runs hibernate persistence twice

> ID：13818115
> 
> 赞同：0
> 
> 时间：2012-12-11T10:19:15.703
> 
> 标签：java, spring, hibernate, servlets, spring-mvc

I have 2 spring configurations :

```
spring-servlet.xml
spring-security.xml 
```

needed to add this line to security:

```
<beans:import resource="spring-servlet.xml"/> 
```

Now hibernate is ran twice, this is log screenshot :

![enter image description here](../Images/a201eb5ae871c7a2f8127b649374f3a0.png)

my web.xml:

```
<servlet>
    <servlet-name>spring</servlet-name>
    <servlet-class>
        org.springframework.web.servlet.DispatcherServlet
    </servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

<listener>
    <listener-class>
        org.springframework.web.context.ContextLoaderListener
      </listener-class>
</listener>
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/spring-security.xml
    </param-value>
</context-param> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:28:04.033

删除`<beans:import resource="spring-servlet.xml"/>`,

并设置

```
<param-value>
    /WEB-INF/spring-security.xml;/WEB-INF/spring-servlet.xml 
</param-value> 
```

也许你两次定义 sessionFactory bean。删除其中之一。

编辑：

好的，两个上下文是正常的。一 - 应用程序上下文，由 加载`ContextLoaderListener`，应该包含 sessionFactory、dao、services 等的定义。通常它的名字是`applicationContext.xml`

DispatcherServlet 应该只包含 MVC 的 bean。您可以在参数中定义 conext 名称：

```
<init-param>
   <param-name>contextConfigLocation</param-name>
   <param-value>WEB-INF/spring-servlet.xml</param-value>
</init-param> 
```

# php - 使用安装脚本更改 magento 表

> ID：13818118
> 
> 赞同：0
> 
> 时间：2012-12-11T10:19:20.457
> 
> 标签：php, magento

如何使用自定义模块的安装脚本更改 Magento 的默认表？

我需要使用安装脚本更改“eav_attribute”表的“电话”列。我的意图是将该表中的“is_required”字段设置为 1...，以通过验证。

我对magento有点陌生，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:36:54.070

1）声明设置资源和模块版本以触发模块的设置工作流程：

```
<config>
    <Your_Module>
        <version>0.1.0</version> <!-- whatever -->
    </Your_Module>
    <global>
        <resources>
            <your_module_setup>
                <setup>
                    <module>Your_Module</module>
                </setup>
            </your_module_setup>
        </resources>
    </global>
</config> 
```

2）创建一个安装脚本*Your/Module/sql/your_module_setup/install-0.1.0.php*（作为风格问题）使用`customer/setup`该类：

```
$installer = Mage::getResourceModel('customer/setup','customer_setup');
/* @var $installer Mage_Customer_Model_Resource_Setup */
$installer->startSetup();

//Proposed edit is correct: entity is customer_address not customer
//$installer->updateAttribute('customer','telephone','is_required',false);
$installer->updateAttribute('customer_address','telephone','is_required',false);

$installer->endSetup(); 
```

清除配置缓存，点击任何页面，这应该会更新属性参数。

# python - Django: Issues with if condition in templates

> ID：13818120
> 
> 赞同：2
> 
> 时间：2012-12-11T10:19:25.750
> 
> 标签：python, django, templates, if-statement, lang

I want to print something on the basis of the current language code. For that I did something like this:

```
{% if request.LANGUAGE_CODE == en %}
    <h1>English</h1>
{% endif %} 
```

But this if condition does not compare the current language code. But if I print this `{{request.LANGUAGE_CODE}}` on the same page then it will print `en` as language code, but my if condition is not working and I don't know why ??

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T10:21:45.967

LANGUAGE_CODE 是一个字符串，因此您只需像这样引用您的比较值：

```
{% if request.LANGUAGE_CODE == 'en' %}
    <h1>English</h1>
{% endif %} 
```

还要检查[ifequal 标签](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#ifequal)

```
{% ifequal request.LANGUAGE_CODE 'en' %}
    ...
{% endifequal %} 
```

多一点：字符串上的 if 和 ifequal 区分大小写，因此您可能希望确保匹配正确的大小写（可能将 |lower 过滤器应用于两个参数）

# php - CodeIgniter HTTP 错误 500

> ID：13818122
> 
> 赞同：0
> 
> 时间：2012-12-11T10:19:25.977
> 
> 标签：php, codeigniter-2

当我尝试访问该网站时，我收到此错误：

> HTTP 错误 500（内部服务器错误）：服务器尝试完成请求时遇到意外情况

即使在完全删除 htaccess 文件后，该网站仍然无法正常工作。注意：在本地主机上它工作正常。

# 评论后编辑：

我想我还不够清楚，这是我的问题的详细信息：我有一个用 PHP5 编写的网站，没有框架或 cms 或任何东西，它工作正常。然后我开始管理部分，所以我使用 CodeIgniter 并重写了网站。现在我几乎完成了编程，所以我将测试版本上传到服务器**的子文件夹**中进行测试，但是出现了上面提到的 500 错误，我的第一个想法是这是一个 htaccess 文件问题，所以我尝试了其他 htaccess 文件并最终将其删除从服务器，但问题仍然存在。现在，我的本地服务器和远程服务器之间的唯一区别是我在本地运行的是 PHP 5.3.5，而远程运行的是 PHP 5.2.14。这就是我现在能想到的所有信息。

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:33:08.827

您可能缺少 PHP/Apache 模块，因此出现 500 错误。

1：检查根目录中的日志和运行脚本所在的目录，否则检查根目录/logs 上方的目录。

2：创建一个名为 phpinfo.php 的文件，在其中放入：

```
<?php phpinfo(); ?> 
```

并运行它。

3：然后将输出中显示的已安装扩展列表与您在本地安装的模块列表进行比较。

如果您使用 WAMP，请单击托盘图标，转到 PHP->extensions，您可以看到所有已安装的内容。阿帕奇也是如此。

博夫

此外：

一个好的开始是确保 CURL 和 MBSTRING 处于打开状态，但是我不使用 CAKE PHP....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-12T08:21:09.417

我遇到了同样的问题并在顶部添加了这一行

```
ini_set('display_errors', 1);
ini_set('display_startup_errors', 1);
error_reporting(E_ALL); 
```

# javascript - 访问 JavaScript 对象变量属性

> ID：13818128
> 
> 赞同：2
> 
> 时间：2012-12-11T10:19:46.830
> 
> 标签：javascript, json

> **可能重复：**
> [如何从 javascript 中的变量值创建对象属性？](https://stackoverflow.com/questions/2241875/how-to-create-object-property-from-variable-value-in-javascript)

如何访问存储在这样的变量中的属性名称？

```
var obj = {};

obj.foo = 'bar';
var propName = 'foo';

//I want something like this:
console.debug(obj.{propName}); 
```

不使用 eval() 是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:20:19.600

您可以访问对象属性，例如：

```
myObject['property_name'] 
```

尝试：

```
var obj = {};
obj.foo = 'bar';
var propName = 'foo';
console.log(obj[propName]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:22:40.520

当然，您可以：

```
​(function(){
    var obj = {};
    obj.foo = 'bar';

    var key = 'foo';

    document.write(obj[key]);
})()​ 
```

# java - How do I parse my simple XML file with Java and SAX?

> ID：13818129
> 
> 赞同：1
> 
> 时间：2012-12-11T10:19:47.593
> 
> 标签：java, xml, xml-parsing

I am trying to parse the file below. I want to print the id and name of each passenger. Can you give me code to parse it ?

```
<?xml version="1.0" encoding="utf-8"?>
<root xmlns:android="www.google.com">

<passenger id = "001">
<name>Tom Cruise</name>
</passenger>

<passenger id = "002">
<name>Tom Hanks</name>
</passenger>

</root> 
```

**UPDATE** This is what i had tried. Code, problems etc mentioned here - [Error in output of a simple SAX parser](https://stackoverflow.com/questions/13798038/error-in-output-of-a-simple-sax-parser)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T11:29:24.867

这是一个开始的工作示例，虽然我建议您改用 StAX，但您会发现 SAX 不是很方便

```
import java.io.File;
import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;
import org.xml.sax.Attributes;
import org.xml.sax.SAXException;
import org.xml.sax.helpers.DefaultHandler;

public class SAX2 {

    public static void main(String[] args) throws Exception {
        SAXParser parser = SAXParserFactory.newInstance().newSAXParser();
        parser.parse(new File("test.xml"), new DefaultHandler() {

            @Override
            public void startElement(String uri, String localName,
                    String qName, Attributes atts) throws SAXException {
                if (qName.equals("passenger")) {
                    System.out.println("id = " + atts.getValue(0));
                }
            }

            @Override
            public void endElement(String uri, String localName, String qName)
                    throws SAXException {
            }

            @Override
            public void characters(char[] ch, int start, int length)
                    throws SAXException {
                String text = new String(ch, start, length);
                if (!text.trim().isEmpty()) {
                    System.out.println("name " + text);
                }
            }
        });
    }
} 
```

输出

```
id = 001
name Tom Cruise
id = 002
name Tom Hanks 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T10:34:45.287

1.  创建一个[`DocumentBuilderFactory`](http://docs.oracle.com/javase/6/docs/api/javax/xml/parsers/DocumentBuilderFactory.html).
2.  [`DocumentBuilder`](http://docs.oracle.com/javase/6/docs/api/javax/xml/parsers/DocumentBuilder.html)从工厂获得一个。
3.  使用`parse()`构建器的一种方法来创建一个[`Document`](http://docs.oracle.com/javase/6/docs/api/org/w3c/dom/Document.html).
4.  一旦你有了 a ，你就可以用's方法`Document`得到乘客了。[`Element`](http://docs.oracle.com/javase/6/docs/api/org/w3c/dom/Element.html)`Document``getElementsByTagName()`

我相信你将能够解决剩下的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T11:14:38.047

```
SAXParserFactory factory = SAXParserFactory.newInstance();
try {

    InputStream    xmlInput  = new FileInputStream("theFile.xml");
    SAXParser      saxParser = factory.newSAXParser();

    DefaultHandler handler   = new SaxHandler();
    saxParser.parse(xmlInput, handler);

} catch (Throwable err) {
    err.printStackTrace ();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T11:36:39.583

```
String str = "<?xml version=\"1.0\" encoding=\"utf-8\"?> " + 
                         "<root xmlns:android=\"www.google.com\">" +
                            "<passenger id = \"001\">" +
                                "<name>Tom Cruise</name>" +
                            "</passenger>" +
                            "<passenger id = \"002\">" +
                                "<name>Tom Hanks</name>" +
                            "</passenger>" +
                         "</root>";
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance(); 
            DocumentBuilder db = dbf.newDocumentBuilder(); 
            InputSource is = new InputSource(new StringReader(str)); 

            final Document document = db.parse(is); 

            System.out.println("node Name " + document.getChildNodes().item(0).getChildNodes().item(1).getNodeName()); 
```

# android - 如何将图像从 Android 中的 Drawable 附加到彩信？

> ID：13818138
> 
> 赞同：3
> 
> 时间：2012-12-11T10:20:23.013
> 
> 标签：android, android-intent

我想将资源/可绘制文件夹中的图像附加到彩信。是否可以将可绘制文件夹中的图像附加到彩信。如果是，请在此处提供一些代码。我尝试了很多，也在这里找到了很多在谷歌上，但仍然无法获得正确的解决方案。请有人帮我解决这个问题。在此先感谢。我的代码如下：

```
Intent sendIntent = new Intent(Intent.ACTION_SEND);
        sendIntent.setType("image/png");
        sendIntent.putExtra("sms_body",
                getResources().getText(R.string.Message));

        File f = new File(Environment.getExternalStorageDirectory()
                .getAbsolutePath(), "koala.jpg");

        Uri uri = Uri.fromFile(f);
        sendIntent.putExtra(Intent.EXTRA_STREAM, uri);

        startActivity(Intent.createChooser(sendIntent, "")); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T10:37:38.603

您可以通过以下步骤实现此目的

首先从你的[drawable中获取图像的位图](https://stackoverflow.com/questions/3035692/how-to-convert-a-drawable-to-a-bitmap)

然后将该位图保存到[SD 卡](https://stackoverflow.com/questions/4263375/android-saving-created-bitmap-to-directory-on-sd-card)

然后给你那个sdCard文件路径`sendIntent`

# r - What is the meaning of the warning message about log(P) when calculating a polychoric correlation with 'hetcor'?

> ID：13818139
> 
> 赞同：2
> 
> 时间：2012-12-11T10:20:26.167
> 
> 标签：r

When calculating a polychoric correlation in R (`library(polycor)`, function `hetcor`) I get the warning message `In log(P) : NaNs produced`. I wasn't able to figure out what this warning message might constitute. I suppose it has to do with the calculation of the p-values for testing bivariate normality.

Thus my questions are:

*   **What characteristics of this dataset result in this warning?**
*   **What's the meaning of this warning?**
*   **Is this warning problematic in terms of using the polychoric correlation matrix for further analyses?**

Data subset:

```
foo <- structure(list(item1 = structure(c(4L, 4L, 4L, 2L, 2L, 2L, 
2L, 2L, 4L, 2L, 2L, 3L, 2L, 3L, 2L, 2L, 2L, 3L, 2L, 2L, 3L, 1L, 
2L, 2L, 3L, 3L, 3L, 2L, 2L, 1L, 1L, 2L, 3L, 2L, 2L, 3L, 2L, 3L, 
2L, 2L, 2L, 2L, 3L, 2L, 2L, 2L, 2L, 2L, 2L, 3L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 3L, 3L, 2L, 3L, 3L, 3L, 2L, 2L, 2L, 1L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 1L, 3L, 2L, 2L, 1L, 2L, 2L, 2L, 1L, 2L, 
1L, 2L, 2L, 4L, 2L, 4L, 2L, 2L, 3L, 1L, 2L, 1L, 2L, 2L, 2L, 1L, 
2L, 2L, 3L, 2L, 2L, 2L, 3L, 1L, 2L, 2L, 2L, 2L, 4L, 2L, 2L, 2L, 
2L, 2L, 2L, 4L, 2L, 2L, 1L, 2L, 2L, 2L, 1L, 2L, 1L, 2L, 3L, 3L, 
1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 3L, 2L, 3L, 3L, 3L
), .Label = c("0", "1", "2", "3"), class = c("ordered", "factor"
)), item2 = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 
1L, 2L, 2L, 1L, 1L, 1L, 1L, 2L, 3L, 2L, 1L, 3L, 2L, 1L, 1L, 3L, 
1L, 3L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 3L, 2L, 2L, 1L, 
3L, 2L, 1L, 2L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 3L, 1L, 1L, 
2L, 3L, 2L, 1L, 2L, 2L, 3L, 1L, 2L, 2L, 2L, 2L, 2L, 1L, 2L, 1L, 
1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 2L, 2L, 1L, 2L, 1L, 1L, 1L, 
2L, 2L, 3L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 2L, 
2L, 1L, 2L, 1L, 2L, 1L, 3L, 2L, 1L, 3L, 1L, 1L, 1L, 2L, 2L, 1L, 
2L, 1L, 3L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 4L, 1L, 1L, 1L, 
1L, 2L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 4L, 1L, 1L, 3L), .Label = c("0", 
"1", "2", "3"), class = c("ordered", "factor")), item3 = structure(c(4L, 
4L, 4L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 4L, 1L, 2L, 1L, 1L, 1L, 
1L, 2L, 1L, 4L, 2L, 2L, 1L, 3L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 2L, 2L, 2L, 2L, 1L, 1L, 2L, 3L, 1L, 1L, 1L, 2L, 1L, 1L, 
2L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 1L, 1L, 2L, 2L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 2L, 1L, 2L, 1L, 1L, 2L, 2L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 
1L, 3L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 2L, 1L, 2L, 2L, 1L, 2L, 3L, 
1L, 3L, 1L, 1L, 1L, 1L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 2L, 3L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
2L, 1L, 3L, 2L, 1L), .Label = c("0", "1", "2", "3"), class = c("ordered", 
"factor")), item4 = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 
2L, 1L, 1L, 1L, 3L, 1L, 2L, 1L, 1L, 1L, 2L, 2L, 1L, 3L, 2L, 1L, 
1L, 3L, 1L, 3L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 2L, 2L, 
2L, 1L, 2L, 2L, 1L, 2L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 2L, 
1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 3L, 1L, 2L, 3L, 2L, 1L, 1L, 1L, 
1L, 1L, 2L, 1L, 1L, 1L, 2L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 
1L, 2L, 1L, 2L, 3L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 
1L, 2L, 2L, 2L, 3L, 1L, 1L, 2L, 2L, 2L, 1L, 3L, 1L, 1L, 1L, 2L, 
2L, 1L, 1L, 1L, 2L, 1L, 3L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 4L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 4L, 1L, 2L, 3L), .Label = c("0", 
"1", "2", "3"), class = c("ordered", "factor")), item5 = structure(c(4L, 
4L, 4L, 1L, 1L, 1L, 1L, 2L, 3L, 2L, 2L, 4L, 2L, 3L, 2L, 1L, 1L, 
3L, 3L, 3L, 4L, 3L, 2L, 1L, 3L, 3L, 4L, 1L, 2L, 1L, 1L, 1L, 2L, 
2L, 2L, 3L, 3L, 3L, 3L, 1L, 1L, 3L, 4L, 2L, 1L, 2L, 2L, 2L, 2L, 
3L, 1L, 2L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 4L, 3L, 3L, 1L, 
2L, 1L, 1L, 3L, 1L, 2L, 2L, 1L, 3L, 2L, 1L, 2L, 2L, 1L, 1L, 2L, 
1L, 2L, 4L, 2L, 2L, 1L, 2L, 2L, 4L, 2L, 4L, 1L, 1L, 2L, 1L, 1L, 
1L, 2L, 2L, 2L, 2L, 3L, 2L, 3L, 2L, 1L, 3L, 2L, 1L, 1L, 3L, 3L, 
1L, 4L, 1L, 1L, 1L, 1L, 2L, 3L, 3L, 3L, 2L, 1L, 3L, 2L, 1L, 1L, 
1L, 1L, 2L, 3L, 4L, 1L, 1L, 1L, 1L, 2L, 1L, 2L, 1L, 1L, 3L, 1L, 
3L, 3L, 4L, 3L, 3L), .Label = c("0", "1", "2", "3"), class = c("ordered", 
"factor"))), .Names = c("item1", "item2", "item3", "item4", 
"item5")) 
```

Computation of correlation matrix:

```
hetcor(foo) 
```

Comment: the real dataset contains about 2500 rows (and more variables), but when evaluating the contingency tables a sparse matrix doesn't seem to be an issue.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-07-31T17:37:33.570

对一个非常古老的问题的简短（和迟到的）答案。该警告是因为变量交叉表中的某些单元格（例如，变量 1 和 2）在单元格中具有 0 值。这可能会导致估计问题。

如果将双变量正态（和连续）数据转换为分类（四分体为二分法，多分体为多分体）数据，多组（和四组）相关性是正常理论近似值。正态理论近似假设所有细胞都有一些价值。但是，可以使用 0 个单元格值找到相关性，但带有警告。得到的相关性是正确的，但不稳定，因为如果我们为连续性添加一个小的修正（即，将 0 单元格添加 0.1 或 0.5），值会发生很大变化。Gunther 和 Hofler 讨论了这个问题，用于四色相关的情况，他们将解决方案与连续性校正进行比较。

（参见 A. Gunther 和 M. Hofler 的文章。关于 mplus 和 stata-stata 中 tetrachorical 相关性的不同结果宣布修改程序。Int J Methods Psychiatr Res, 15(3):157-66, 2006\. 对此进行讨论四色相关性的问题。）

使用 psych 包中的 polychoric 函数，如果我们不应用连续性校正，我们会找到与 polycor 中的 hetcor 函数相同的答案，但如果我们对连续性进行校正，则值会有所不同。我建议更正。

有关此问题的更详细讨论，请参阅心理中的 polychoric 的帮助功能。

# java - Android location to string issue

> ID：13818143
> 
> 赞同：3
> 
> 时间：2012-12-11T10:20:35.590
> 
> 标签：java, android, android-location

Here is the code I use the put locations to strings:

```
public static String locationStringFromLocation(final Location location) {
    return String.format("%.3f %.3f", location.getLatitude(), location.getLongitude());
} 
```

And from some other devices, from time to time I get: `-7.2900002123788E-4 7.270000060088933E-4` as location string and not `-7.290 7.270` for example.

*   Does someone has clue on this?
*   How to improve my code?

**Edit**

Updated code. Will this fix the issue?

```
DecimalFormat decimalFormat = new DecimalFormat("#.###");
if (location != null) {
    final String latitude = decimalFormat.format(Float.valueOf(Location.convert(location.getLatitude(), Location.FORMAT_DEGREES)));
    final String longitude = decimalFormat.format(Float.valueOf(Location.convert(location.getLongitude(), Location.FORMAT_DEGREES)));
    return latitude + " " + longitude;
}
return decimalFormat.format(0.0F) + " " + decimalFormat.format(0.0F); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T10:38:06.057

您可以`public static String convert (double coordinate, int outputType)`从位置类使用。outputType 可以是`FORMAT_DEGREES`、`FORMAT_MINUTES`或之一`FORMAT_SECONDS`。

```
public static String locationStringFromLocation(final Location location) {
    return Location.convert(location.getLatitude(), Location.FORMAT_DEGREES) + " " + Location.convert(location.getLongitude(), Location.FORMAT_DEGREES);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-10T22:22:25.650

一行，一种方法，方便的解决方法：

```
String.substring(beginIndex,finalIndex) 
```

所以在你的情况下：

```
latInDecimal = lat.substring(0,5)
lngInDecimal = lng.substring(0,5) 
```

# sql - Drupal 7 多选连接语法

> ID：13818151
> 
> 赞同：0
> 
> 时间：2012-12-11T10:20:59.597
> 
> 标签：sql, database, drupal, join

很难让我的头脑围绕多个连接。谁能告诉我为什么这是错误的？

****编辑****

```
$query = db_select('node', 'n');
$query->join('file_usage', 'fu', 'fu.id = n.nid');
$query->join('field_data_field_featured_image', 'ffimage', 'ffimage.entity_id = n.nid');
$query->join('file_managed', 'fm', 'fm.fid = n.nid');

$query
->fields('fu', array('id'))
->fields('fm', array('filename'))
->fields('ffimage', array('field_featured_image_title'))
->fields('n', array('nid', 'title'))
->condition('n.type', 'work')
->orderby('n.nid', 'DESC')
->range(0, 20);

$result = $query->execute();
foreach ($result as $record) {
echo '<li>';    
echo '<div class="home_text"><h1>'.$record->title.'</h1></div>';
echo '<a href="...some_node/';
echo $record->id;
echo '">';
echo '<img src="...some_files/';
echo $record->filename;
echo '" width="960px" height="615px" />';
echo '</a>';
echo '</li>';   
} 
```

# eclipse - 在 Eclipse 中开发爆炸式战争

> ID：13818152
> 
> 赞同：1
> 
> 时间：2012-12-11T10:21:06.767
> 
> 标签：eclipse, war, gradle

我有一个标准 Maven 布局的项目：

```
src/main/java
src/main/webapp 
```

我想以这样的方式在 Eclipse 中开发这个项目，Eclipse 会将我的类编译到爆炸的 war 文件夹中，就像这样：

```
build/webapp/WEB-INF/classes 
```

而且我不使用maven作为构建工具，我使用gradle。它是一种配置 Eclipse 的方法，我的项目输出文件夹的结构是否适合爆炸战争？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-08-07T12:07:45.883

```
task explodedWar(type: Copy) {
    into "$buildDir/exploded"
    with war
}
war.dependsOn explodedWar 
```

在你的 web 模块 build.gradle 中使用这些代码行，你可以让你生成的战争爆炸

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T20:36:15.813

您可以通过将以下内容添加到 build.gradle 文件来更改此设置：

```
apply plugin: "eclipse"

eclipse {
  classpath {
    defaultOutputDir = file("${buildDir}/webapp/WEB-INF/classes")
  }
} 
```

这会将输出目录设置为正确的目录。另请查看[Gradle DSL 参考](http://gradle.org/docs/current/dsl/org.gradle.plugins.ide.eclipse.model.EclipseClasspath.html#org.gradle.plugins.ide.eclipse.model.EclipseClasspath%3adefaultOutputDir)

# java - 如何用spring在静态方法中注入依赖？

> ID：13818154
> 
> 赞同：2
> 
> 时间：2012-12-11T10:21:13.013
> 
> 标签：java, spring, dependency-injection, static-methods

> **可能重复：**
> [如何使弹簧将值注入静态字段](https://stackoverflow.com/questions/11324372/how-to-make-spring-inject-value-into-a-static-field)

我有以下代码

```
public class CustomerService {

  private static CustomerDAO customerDao;

  public static void getAllCustomers()
  {
    customerDao.getAllCustomers();// here i want 
  }

      public static CustomerDAO getCustomerDao() {
    return customerDao;
  }

  public static void setCustomerDao(CustomerDAO customerDao) {
    CustomerService.customerDao = customerDao;
  }
} 
```

现在我从我的 Action 对象调用 CustomerService.getAllCustomers()，其中 getAllCustomers 是类级别的方法。我希望在 CustomerService 类中由 spring 注入 customerDao 以便当我调用 getAllCustomers 依赖项时可用？

我正在使用spring decalarative依赖注入

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T10:33:05.087

您的设计与 Spring IoC 的基本前提正面冲突。一个`static`方法无非就是一个单例方法，而IoC容器的核心就是管理你的单例。您必须重新设计以使用实例方法和字段。

`static`方法进入图片的唯一方法是工厂方法，当需要一些复杂的逻辑来为容器贡献一个单例时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:26:49.387

不要声明 customerDao 字段`static`。然后将客户 dao 连接到您的服务类中，例如：

```
<bean id="customerDao" class="com.example.CustomerDao">
    <!-- whatever config you may need here -->
</bean>

<bean id="customerService" class="com.example.CustomerSerivce">
    <property name="" ref="customerDao"/>
</bean> 
```

# java - Eclipse 警告：未知的多面项目

> ID：13818155
> 
> 赞同：20
> 
> 时间：2012-12-11T10:21:13.693
> 
> 标签：java, eclipse, warnings, eclipse-juno, facet

我有一个包含一些模块的父 Maven 项目（使用 java facet 版本 1.7）。我从 Eclipse Juno SR1 收到以下警告：

```
找不到项目方面 java 的实现。
功能将受到限制（未知的多面项目问题）
```

我怎样才能摆脱这个错误？快速修复没有找到任何东西。有趣的是，我在项目属性对话框中没有 Project Facet 条目。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-11-18T21:08:27.970

当您升级 IDE 或将项目从旧 IDE 打开到新 IDE 时，就会发生这种情况。

要解决（删除不受支持的方面）：

1.  打开你的项目文件夹；
2.  转到 .settings 子文件夹
3.  编辑 org.eclipse.wst.common.project.facet.core.xml 文件
4.  删除引用您的错误的已安装方面
5.  如果它没有立即解决（如果您在 Eclipse 中直接编辑文件），请尝试关闭并重新打开项目或重新启动 Eclipse。

全部完成后，如果还没有完成，您可以将正确的方面标记为您的项目以便工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-02-17T02:52:56.943

只删除文件

```
org.eclipse.wst.common.project.facet.core.xml 
```

在`.settings`文件夹中。

它对我有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-10T09:06:55.667

我认为您可以检查您的项目属性。然后单击项目构面。然后显示对话框。在对话框中，您可以检查您的项目是否标记为 java。

在动态应用中，标记动态网页模块，java，javascript。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-17T01:06:26.807

我有这个问题。我发现 Eclipse 项目设置为使用 JDK1.5，而我只安装了 Java 1.6。将版本更改为 1.6 后，违规警告消失了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-10T21:04:50.797

在给出这个答案时，我尝试了所有其他答案，删除项目（而不是数据）并重新导入是为我解决问题的唯一方法。

# domain-driven-design - CQRS/事件溯源，如何获得一致的数据来应用业务规则？

> ID：13818160
> 
> 赞同：10
> 
> 时间：2012-12-11T10:21:40.520
> 
> 标签：domain-driven-design, cqrs, event-sourcing

有时我正在使用 CQRS 模式和事件溯源开发一个小项目。我有一个结构性问题，我不知道要采取哪种解决方案来解决它。

想象一下下面的例子：一个命令被发送，其中包含银行客户存了一些钱的信息（DepositCommand）。在命令处理程序/实体/聚合（对讨论不重要）中，必须应用业务规则；如果客户是前 10% 的客户之一，并且账户中有更多资金，则可以赢得一些奖金。

问题是我如何才能获得最新、一致的数据，以了解客户在存款后是否处于前 10%。

*   我无法使用事件存储，因为无法进行这样的查询；
*   我不确定我是否可以使用读取模型，因为不是 100% 确定它是最新的。

如果您需要数据库中的数据来应用业务规则，您会怎么做？如果我不关注最新数据，我可能会将奖品授予两个不同的客户

期待听到您的意见。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T15:12:37.630

聚合做出业务决策所需的任何信息都应存储为聚合状态的一部分。因此，当收到将钱存入客户账户的命令时，您应该已经拥有该客户的当前/更新状态，其中可以包含他们每个账户的当前余额。

我还建议聚合永远不应该去读取模型来提取信息。根据您要实现的目标，您可以使用读取模型中的其他详细信息来丰富命令（其中状态不是关键的），但聚合本身应该从它自己的已知状态中提取。

* * *

**编辑**

重新阅读问题后，我意识到您正在谈论跨多个聚合跟踪状态。这属于传奇的领域。您可以创建一个 saga 来跟踪进入前 10% 所需的阈值。因此，每当客户进行存款时，传奇都可以跟踪他们在排名中的位置。如果该客户端跨越线程，您可以从 saga 发布命令以指示它们满足所需的条件。

在您的情况下，您的 saga 可能会跟踪所有存款的总金额，因此当进行存款时，可以决定客户现在是否位于前 10%。您可能想问自己的其他问题……如果客户存入 X 美元，并立即将 Y 美元降回门槛以下；应该发生什么？等等。

* * *

非常粗糙的聚合/传奇处理方法......

```
public class Client : Aggregate
{
    public void Handle(DepositMoney command)
    {
        // What if the account is not known? Has insufficient funds? Is locked? etc...
        // Track the minimum amount of state required to make whatever choice is required.
        var account = State.Accounts[command.AccountId]; 

        // Balance here would reflect a point in time, and should not be directly persisted to the read model;
        // use an atomic update to increment the balance for the read-model in your denormalizer.
        Raise(new MoneyDeposited { Amount = command.Amount, Balance = account.Balance + command.Amount }); 
    }

    public void Handle(ElevateClientStatus command)
    {
        // you are now a VIP... raise event to update state accordingly...
    }
}

public class TopClientSaga : Saga
{
    public void Handle(MoneyDeposited e)
    {
        // Increment the total deposits... sagas need to be thread-safe (i.e., locked while state is changing).
        State.TotalDeposits += e.Amount;

        //TODO: Check if client is already a VIP; if yes, nothing needs to happen...

        // Depositing money itself changes the 10% threshold; what happens to clients that are no longer in the top 10%?
        if (e.Balance > State.TotalDeposits * 0.10)
        {
            // you are a top 10% client... publish some command to do whatever needs to be done.
            Publish(new ElevateClientStatus { ClientId = e.ClientId, ... });
        }
    }

    // handle withdrawls, money tranfers etc?
} 
```

# c# - 在 if 条件下检查空值的方法

> ID：13818175
> 
> 赞同：0
> 
> 时间：2012-12-11T10:22:22.183
> 
> 标签：c#

我有以下代码行，这给我带来了 NPE 的麻烦

```
 ServeUrl = ((NameValueCollection)ConfigurationManager.GetSection("Servers")).Get(ment); 
```

当我用以下方式写这个时，我不再得到 NPE

```
 if (ConfigurationManager.GetSection("Servers") != null && ((NameValueCollection)ConfigurationManager.GetSection("Servers")).Get(ment) != null)
                            {
                                ServeUrl = ((NameValueCollection)ConfigurationManager.GetSection("Servers")).Get(ment);
                            } 
```

Somwhow，上面的东西在我看来并不好看。我怎样才能以更好的方式写这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T10:24:13.300

我会提取一个临时变量：

```
var section = (NameValueCollection)ConfigurationManager.GetSection("Servers");
if (section != null && section.Get(ment) != null)
{
    ...
} 
```

甚至：

```
var section = (NameValueCollection)ConfigurationManager.GetSection("Servers");
if (section != null)
{
    var url = section.Get(ment);
    if (url != null)
    {
        ServeUrl = url;
    }
} 
```

如果`GetSection`返回 null 你会怎么做？*真的*可以继续吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T10:30:44.847

1.  `!=`手段`not equal to`和`==`手段`equal to`

2.  如果你不能使用`NULL`你可以使用`""`

用逻辑应用条件，然后即使它没有得到你想要的东西：

1.  条件将是`false`并且您还使用`AND`了逻辑运算符

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-14T15:09:51.280

我会使用这个（仅供参考，我没有在编译器中尝试过）：

```
 if (ConfigurationManager.GetSection("Servers")?.Get(ment) is NameValueCollection nvc)
                        {
                            ServeUrl = nvc;
                        } 
```

# jpa - JPA SortedMap 映射 - 避免两列有键

> ID：13818181
> 
> 赞同：2
> 
> 时间：2012-12-11T10:22:39.450
> 
> 标签：jpa, eclipselink, treemap

我有两个类，CalculatedValue 和 Price。价格有计算价值的地图。每个 CalculableValue 实例都有名称、值和几个其他字段。

这是我用来描述 Price 和 CV 之间依赖关系的映射：

```
@OneToMany(
        cascade = CascadeType.ALL,
        fetch = FetchType.EAGER
)
@JoinColumn(name = "priceId")
private Map<String, CalculatedValue> calculatedValues =
        new TreeMap<String, CalculatedValue>(); 
```

没有连接表，只是通过引用价格唯一 ID 的 priceId 列进行映射。

以下是生成的表的样子：

创建表 PUBLIC.CALCULATEDVALUE ( UNIQUEID BIGINT NOT NULL, KEY VARCHAR(2147483647) NOT NULL, PRICEID BIGINT, VALUE DOUBLE NOT NULL, **CALCULATEDVALUES_KEY** VARCHAR(2147483647), PRIMARY KEY (UNIQUEID));

ALTER TABLE PUBLIC.CALCULATEDVALUE 添加外键 (PRICEID) 参考 TEST.PUBLIC.PRICE (UNIQUEID);

一切正常，但我想知道是否有可能：

1.  避免自动创建“CALCULATEDVALUES_KEY”列。我已经将这个值存储在 KEY 列中，避免重复并以某种方式向 JPA 提供提示会很好。
2.  触发每个已删除价格的可计算值的级联删除（如果我正在运行 SQL 删除语句）
3.  如果我使用 Date 作为键，这样的映射会起作用吗？不是对于这个特定的领域，而是对于其他一些领域，它会很有用。假设相同的 OneToMany 关系。

先感谢您！

PS。我正在使用最新版本的 EclipseLink & H2 作为数据库。聚苯乙烯。不想将可计算的值存储在数组中，因为我需要经常在 Java 中找到它的购买键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:31:24.757

有关地图的信息，请参阅，

[http://en.wikibooks.org/wiki/Java_Persistence/OneToMany](http://en.wikibooks.org/wiki/Java_Persistence/OneToMany)

和，

[http://en.wikibooks.org/wiki/Java_Persistence/Relationships#Maps](http://en.wikibooks.org/wiki/Java_Persistence/Relationships#Maps)

和，

[http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_cascadeondelete.htm#CIABIIEB](http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_cascadeondelete.htm#CIABIIEB)

几个问题：

*   EclipseLink 默认使用 Hashtable 作为 Map，如果你想让它使用 TreeMap，你需要将字段定义为 TreeMap。
*   不要在@OneToMany 上提供@JoinColumn，这只支持高级单向@OneToMany，普通的@OneToMany 应该使用mappedBy 并且在目标实体中有一个反向的@ManyToOne。（这将解决您的重复外键问题）。
*   需要为地图指定@MapKey，否则默认为id，这里好像是整数，不是字符串。
*   您可以在 EclipseLink 中使用 @CascadeOnDelete 对数据库进行级联删除。

# jquery - 在谷歌图表中设置列宽

> ID：13818182
> 
> 赞同：0
> 
> 时间：2012-12-11T10:22:53.937
> 
> 标签：jquery, google-visualization

我制作 json 来制作谷歌图表，如下所示。

```
 var dataArray = '{
 "cols":[
     {"id":"name","label":"Name","type":"string","p":"{style: 'width: 200px;'}"},
     {"id":"date","label":"Date","type":"date","p":"{style: 'width: 200px;'}"}
 ],
 "rows":[..... 
```

这些行有一些价值。我尝试使用 p 来设置列的宽度。但这是行不通的。我指的是[https://developers.google.com/chart/interactive/docs/reference#dataparam](https://developers.google.com/chart/interactive/docs/reference#dataparam)

它显示语法错误。`SyntaxError: missing ; before statement`

如何更改谷歌图表中的列？请帮我。

[https://developers.google.com/chart/interactive/docs/reference#dataparam](https://developers.google.com/chart/interactive/docs/reference#dataparam)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:23:37.393

你`dataArray`被解释为一个字符串。删除开头的引号以定义您的对象：

```
var dataArray = {
    //...
}; 
```

# asp.net - 降低密码恢复密码 asp.net 的复杂性

> ID：13818185
> 
> 赞同：0
> 
> 时间：2012-12-11T10:22:58.853
> 
> 标签：asp.net, asp.net-membership, membership-provider

我想降低密码恢复密码 asp.net 的复杂性。例如，如果用户进行恢复，它只会发送带有数字的随机密码。不是复杂的字符！我的第二个问题是恢复密码可以再次将旧用户密码发送到他/她的电子邮件吗？谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:26:57.027

我建议进行设置，这样您就不会通过邮件向用户发送新密码。而是向生成的 URL 发送一个链接，该链接在用户可以设置新密码的特定时间有效。通过这种方式，您可以绕过许多将密码发送给邮件中的用户的安全问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:28:12.487

发送旧密码是非常糟糕的做法，也是系统中的一个巨大安全漏洞。用户通常会重复使用密码。如果有人访问您的数据库或按下用户密码恢复按钮，您的用户就会被盗用。因此，您必须将它们保存为带有盐的哈希。让用户更改密码的一种方法是发送一个 1 次可用的链接，他们可以在其中为您的系统键入新密码。

# javascript - 将 shell 通配符转换为正则表达式

> ID：13818186
> 
> 赞同：9
> 
> 时间：2012-12-11T10:23:13.833
> 
> 标签：javascript, regex, wildcard

我想在 js 中使用 shell 通配符（如 等）`*.js`搜索标题。`*.*.*`问题是我遍历一个标题列表，我需要使用 js 正则表达式测试过滤文件。如何以一种好的方式将 shell 通配符转换为正则表达式，或者是否有任何库已经这样做了？

注意：我想要一个从 shell 通配符到正则表达式的通用转换器。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-11T10:51:33.127

如果你想要一个通用的转换器功能，这应该工作：

```
function globStringToRegex(str) {
    return new RegExp(preg_quote(str).replace(/\\\*/g, '.*').replace(/\\\?/g, '.'), 'g');
}
function preg_quote (str, delimiter) {
    // http://kevin.vanzonneveld.net
    // +   original by: booeyOH
    // +   improved by: Ates Goral (http://magnetiq.com)
    // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
    // +   bugfixed by: Onno Marsman
    // +   improved by: Brett Zamir (http://brett-zamir.me)
    // *     example 1: preg_quote("$40");
    // *     returns 1: '\$40'
    // *     example 2: preg_quote("*RRRING* Hello?");
    // *     returns 2: '\*RRRING\* Hello\?'
    // *     example 3: preg_quote("\\.+*?[^]$(){}=!<>|:");
    // *     returns 3: '\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:'
    return (str + '').replace(new RegExp('[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\' + (delimiter || '') + '-]', 'g'), '\\$&');
} 
```

（这里的 preg_quote 函数：http://phpjs.org/functions/preg_quote/ [）](http://phpjs.org/functions/preg_quote/)。

利用：

```
var realRegex = globStringToRegex("2012-*-*.js"); //returns a RegExp object of /2012\-.*\-.*\.js/g 
```

这是它的一个JS小提琴：

[http://jsfiddle.net/d5sdw/2/](http://jsfiddle.net/d5sdw/2/)

然后，您可以使用 RegExp 对象进行匹配：

```
if (yourString.match(realRegex)) { //do something 
```

**更新**：支持`?`单个通配符。

基本上所有这些都是将整个字符串转换为非正则表达式，然后确保它`*`被映射到`.*`并被`?`映射到`.`，因为它们是等价的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T10:45:25.267

这应该非常接近。

```
yourVar.match(/.*\.js$/i) 
```

意义

*   字符串的开头是任何字符序列`.*`
*   其次`.js`是最后`\.js$`
*   不区分大小写`/i`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T10:52:01.713

如果正则表达式用于获取布尔结果（当您不需要匹配结果时），最好使用**测试**方法。

`/.*\.js$/i.test(yourVar)`

# android - 将高度排除在等式之外是否有助于增强现实应用程序

> ID：13818187
> 
> 赞同：0
> 
> 时间：2012-12-11T10:23:15.860
> 
> 标签：android, geolocation, augmented-reality, location-based-service

我正在 Android 上开发基于地理的 AR 应用程序，但对与地面无关显示的 POI 感到失望，因为我希望它始终显示在地面上（海拔 0）。您认为将海拔高度排除在 POI 和用户的等式之外是个好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:01:10.503

好吧，据我所见，这并不是真正的问题，主要是面对 POI。然后你可以担心海拔高度。

在某些情况下，您将在远处固定 POI，这意味着它们将一起显示在地平线上，这对用户来说不是很愉快。

如果你想实现高度，这取决于你。当我开始开发这种增强现实时，我想使用高度，但在我的例子中，我从服务器下载 POI 数据，并且没有提供高度，只有高度和经度。

我使用的技巧是在屏幕底部显示最近的 POI，在顶部显示最远的 POI，同时注意航向。此外，我缩放注释并分别为距离和航向添加一些透视图。

你可以在[这里](http://gigaom.com/mobile/old-lumias-get-nokias-new-city-lens-augmented-reality-app/)有一个插图，结果很好！

如您所见，将高度排除在外是没有问题的。

# javascript - 从消费应用程序 JavaScript 调用用户控制 JavaScript 函数

> ID：13818190
> 
> 赞同：0
> 
> 时间：2012-12-11T10:23:27.417
> 
> 标签：javascript, asp.net, webusercontrol

我有一个名为 UserControl.ascx 的 Web 用户控件，并且在该 ascx 页面中嵌入了一个用于返回某些值的 JavaScript 函数“GetValues()”。我已将 ascx 页面编译为 dll 并在另一个 Web 应用程序中使用它。但现在的问题是当我尝试从 Web 应用程序调用用户控制 JavaScript 函数时，显示“GetValues”的 JS 调试器是未定义的错误。有没有办法解决这个问题？

在 ASCX 文件中：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="ICEImage.ascx.cs" Inherits="ICEImage" %>
   <div>                 
         <asp:TextBox ID="txtValue" runat="server" BackColor="#FFFFC0" ReadOnly="True" Width="150px" 
   </div>
<script type="text/javascript">
function GetValue()
{
  return parseInt(document.getElementById('<%=txtValue.ClientID%>').value);
}
</script> 
```

ASPX 文件：

```
<%@ Page Language="C#" AutoEventWireup="true"  CodeFile="Default.aspx.cs" Inherits="_Default" %>
<%@ Register TagPrefix="ASP" Assembly="App_Web_iceimage.ascx.cdcab7d2" Namespace="ASP" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title>Sample Page</title>
</head>
<body style="background-color: #383838">
    <form id="form1" runat="server">
    <ASP:iceimage_ascx ID="ICEImage1" runat="server"></ASP:iceimage_ascx>  
    <button id="btnSave" style="width: 85px; height: 29px" type="button" onclick="GetValue()">Save</button>          
    </form>
</body>  
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:37:23.563

您可以像这样从服务器代码定义您的函数，并将其添加到 Page_PreRender 例如

```
if (!Page.ClientScript.IsClientScriptBlockRegistered("FunctionGetValue"))
        {
            string script = @"function GetValue() {
                   return parseInt(document.getElementById('"+txtValue.ClientID+"').value);
                   }";
            ScriptManager.RegisterClientScriptBlock(this.Page, this.Page.GetType(), "FunctionGetValue", script, true);

        } 
```

# jquery - 如何使用 jQuery UI 拖放来防止堆叠 div？

> ID：13818192
> 
> 赞同：3
> 
> 时间：2012-12-11T10:23:34.530
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable, jquery-ui-droppable

当所选位置已经有一个被丢弃的元素时，我被困在如何防止丢弃。

我有三个不同大小的 div 元素，我将它们拖到一个可放置的网格上。我完成代码的方式（参见下面的 jsFiddle），我想不出一种方法来检查那里是否已经有一个项目。

任何人都可以想办法，有什么想法吗？**JSFiddle：http:** [//jsfiddle.net/sExrV/1/](http://jsfiddle.net/sExrV/1/)

我认为代码会在“drop”事件中的某个地方，但我想不出一种方法来测试它：

```
$("#grid").droppable({
    accept: (".widget1, .widget2, .widget3"),
    drop: function(event, ui) {
    // test for existing element dropped here?? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:54:43.650

您是否尝试过在任何东西被丢弃时禁用可丢弃功能？

```
$("#grid").droppable({
    drop: function() { $( "#grid" ).droppable( "option", "disabled", true ); }
}); 
```

# javascript - 突出显示 XML 文件中的 JS 代码 (Eclipse)

> ID：13818193
> 
> 赞同：3
> 
> 时间：2012-12-11T10:23:38.230
> 
> 标签：javascript, html, xml, eclipse, syntax-highlighting

我正在使用 Eclipse Juno（面向 Web 开发人员的 Eclipse Java EE IDE）。我有 1 个 XML 文件，其中包含 XML、HTML 和 Javascript 代码。（按此顺序。）在 HTML 代码之前，有一个开始的 CDATA 标记。从这一点开始，不再有语法高亮。当我删除 CDATA 标记时，仅突出显示 HTML 标记。我希望此文件中的所有内容都具有语法突出显示（尤其是 JS 代码）。这有可能吗？

# sql - Firebird 截断表/删除所有行

> ID：13818194
> 
> 赞同：4
> 
> 时间：2012-12-11T10:23:38.463
> 
> 标签：sql, firebird, sql-delete, truncate

我正在使用 Firebird 2.5.1 Embedded。我已经按照惯例清空了将近 200k 行的表：

```
delete from SZAFKI 
```

这是输出，看它需要 16 秒，这是不可接受的。

```
Preparing query: delete from SZAFKI
Prepare time: 0.010s
PLAN (SZAFKI NATURAL)

Executing...
Done.
3973416 fetches, 1030917 marks, 116515 reads, 116434 writes.
0 inserts, 0 updates, 182658 deletes, 27 index, 182658 seq.
Delta memory: -19688 bytes.
SZAFKI: 182658 deletes. 
182658 rows affected directly.
Total execution time: 16.729s
Script execution finished. 
```

Firebird 没有 TRUNCATE 关键字。由于查询使用 PLAN NATURAL，我尝试手动计划查询，如下所示：

```
delete from szafki PLAN (SZAFKI INDEX (SZAFKI_PK)) 
```

但火鸟说“SZAFKI_PK 不能在指定的计划中使用”（它是一个主键）问题是我如何有效地清空表？无法删除和重新创建。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-15T09:17:49.057

*根据我的评论回答*

您可以尝试的一个技巧是使用`DELETE FROM SZAFKI WHERE ID > 0`（假设`ID`是 1 或更高）。这将强制 Firebird 使用主键索引查找行。

我最初的假设是这会比未索引的删除更糟糕。未索引的删除将对表的所有数据页进行顺序扫描并删除行（即：创建一个新的记录版本，它是已删除的存根记录）。当您使用索引时，它将按索引顺序查找行，这将导致随机遍历数据页（假设由于插入、删除和更新导致的大量记录版本导致数据中的高度碎片化）。我曾预计这会更慢，但可能会导致 Firebird 只需要读取相关数据页（具有与事务相关的记录版本）而不是表的所有数据页。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T16:25:22.390

不幸的是，没有快速的方法可以使用当前的 Firebird 版本对整个（大）表进行大规模删除。当“删除的内容”被垃圾收集时，您可能会期待更高的延迟（在提交删除后在表中运行 select *，您会看到）。您可以在删除之前尝试停用该表中的索引，看看是否有帮助。如果您将表用作某种临时存储，我建议您使用 GTT 功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-12T08:11:41.580

**在 FireBird表中**快速删除所有数据的****最快**也是唯一的方法-**删除**并再次**创建**表。至少对于目前的官方版本 2.5.X 。FireBird 3.0 的路线图中没有截断运算符，测试版已经出，所以很可能在 3.0 中也没有截断。**

 **此外，您可以使用运算符**RECREATE** - 与 create 相同的语法。如果表存在，RECRATE 删除它，然后创建新表。如果表不存在，则重新创建只是创建它。

```
 RECREATE TABLE Table1 (
   ID    INTEGER,
   NAME  VARCHAR(20),
   DATE  DATE,
   T     TIME
 ); 
```**

# scala - HtmlUnitDriver 和 WebDriver 属于哪个库？

> ID：13818199
> 
> 赞同：0
> 
> 时间：2012-12-11T10:23:43.800
> 
> 标签：scala, scalatest

使用下面的代码（取自[http://www.scalatest.org/user_guide/using_selenium](http://www.scalatest.org/user_guide/using_selenium)）

```
import org.scalatest.matchers.ShouldMatchers
import org.scalatest.selenium.WebBrowser
import org.scalatest.FlatSpec

class BlogSpec extends FlatSpec with ShouldMatchers with WebBrowser {

  implicit val webDriver: WebDriver = new HtmlUnitDriver

  "The blog app home page" should "have the correct title" in {
    go to (host + "index.html")
    title should be ("Awesome Blog")
  }
} 
```

我收到错误

```
 Multiple markers at this line
    - not found: type HtmlUnitDriver
    - not found: type WebDriver 
```

HtmlUnitDriver 和 WebDriver 库不是 scalatest 安装的一部分，我可以从哪里导入它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:39:44.667

我只需要 Selenium 依赖项（http://seleniumhq.org/download/maven.html）：

```
<dependency>
        <groupId>org.seleniumhq.selenium</groupId>
        <artifactId>selenium-java</artifactId>
        <version>2.24.1</version>
    </dependency> 
```

# css - flex 中 Scroller 组件的 VScrollbar CSS

> ID：13818201
> 
> 赞同：0
> 
> 时间：2012-12-11T10:23:52.253
> 
> 标签：css, actionscript-3, apache-flex, flex4, flash-builder

有没有办法在 Flex 的 Scroller 组件中自定义垂直滚动条的外观？我可以使用 CSS 自定义 Vscrollbar 组件的外观，但我没有看到 Scroller 组件的相同选项。例如，cornerRadius、fillAlphas 在 Scroller 组件中不可用。如何在 Scroller 组件中设置这些选项。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:17:28.617

是的，但你不能使用 CSS。在 FlashBuilder 中，您创建一个新的`MXML Skin`并设置一个宿主组件，`Scroller`并确保将其复制为`spark.skins.spark.ScrollerSkin`. 然后，您只需根据自己的喜好修改该皮肤即可。不像 CSS 那样简单，但它更强大，你可以做很多很多。我不确定您是否或如何在 Flash CS 或 FlashDevelop 中执行此操作，但在 FlashBuilder 中相当容易（并且是为所有 Flex 组件设置皮肤的正确方法）

# javascript - 是否有可能如果我当前页面的 url 太长 - 我在打开该页面内的链接时会遇到问题

> ID：13818207
> 
> 赞同：0
> 
> 时间：2012-12-11T10:24:15.250
> 
> 标签：javascript, html, browser, href

我的网页中有一个 iframe。iframe 的 URL 非常长，因为它传递了许多参数（让我们暂时忘记它应该更短更优雅）。

在那个 iframe 里面，我有一个像这样的简单链接：

```
<a target="_blank" href="http://www.internal.somegenericlink.com?p=1&d=2">link</a> 
```

当我单击链接时 - 有时我看不到新链接（我收到 413 错误） - 在我刷新新页面（使用新链接）后它确实有效。

这是一个奇怪的案例，我的问题是：

**是否有可能因为 iframe 的 URL 太长而看不到新页面？**

我试图弄清楚问题是否在我这边（网址太长？！）或者这是与我无关的新链接的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:36:35.820

是的，URL 可能太长。没有标准，2000以下应该是安全的。

通常，错误消息非常清楚地表明 URL:s 太长；413 Entity Too Large 就是这样一个错误。

[什么是 URL 的字符限制中的](https://stackoverflow.com/questions/1051485/what-is-the-character-limit-on-url)更多详细信息

# javascript - 检查是否将过渡应用于元素

> ID：13818209
> 
> 赞同：5
> 
> 时间：2012-12-11T10:24:19.843
> 
> 标签：javascript, css, css-transitions

我正在使用 CSS 过渡来动画从屏幕上移除元素。在 FireFox 中，我使用“transitionend”事件来检测转换何时完成，然后将其从 DOM 中删除。但是，这仅在实际发生转换时才有效。

我如何从 JavaScript 中判断属性的更改是否最终会导致发送“transitionend”事件？如果没有过渡，那么我必须直接删除该元素。

为了清楚起见，我想知道属性的更改是否会触发事件（FireFox 目前很好）。这是因为我需要在过渡结束时触发一个动作，如果没有过渡我需要立即触发它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:27:31.317

以下是`transitionend`主要供应商（支持转换）的等价物：

*   网络套件：`webkitTransitionEnd`
*   歌剧：`oTransitionEnd`
*   IE 和 Mozilla：`transitionend`

要确定属性是否正在动画，只需检查它是否立即达到目标值：

```
el = $('myElement');
el.css('top', '100px');
if(!el.css('top') == '100px'){
    alert('No transition');
} 
```

这是一个演示：http: [//jsfiddle.net/6Q9XC/](http://jsfiddle.net/6Q9XC/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T10:48:20.077

从[Modernizr docs](http://modernizr.com/docs/#hasevent)，我假设您可以：

```
Modernizr.hasEvent('transitionEnd', $element) 
```

# java - 如何使用 JPA 和 Hibernate 删除多对多表之间的关系

> ID：13818210
> 
> 赞同：2
> 
> 时间：2012-12-11T10:24:19.843
> 
> 标签：java, hibernate, jpa

我有两个表：配方表和帐户表。配方表存储了许多配方。account 表存储了一些用户帐号。一个用户可以与 0 个或多个配方相关联。当用户喜欢食谱时，该用户与该食谱相关联。为了记录这种关联，我创建了一个名为 LikedRecipe 的表。

这些是每个表的列：

*   配方：身份证，姓名。Id 是主键。
*   账号：邮箱、密码。电子邮件是主键。
*   LikedRecipe：身份证、姓名、电子邮件。id 是主键。

    ```
    @Entity
    @Table(name = "Recipe")
    public class Recipe {

    private Set<Account> account;

    private Long id;

    @ManyToMany(fetch = FetchType.LAZY)
    @JoinTable(name = "LikedRecipe", joinColumns = @JoinColumn(name = "recipeId"),     inverseJoinColumns = @JoinColumn(name = "email"))
    public Set<Account> getAccount() {
    return account;
    }

    public void setAccount(Set<Account> account) {
    this.account = account;
    }

    @Id
    @GeneratedValue(strategy = IDENTITY)
    @Column(name = "id")
    public Long getId() {
    return id;
    }

    public void setId(Long id) {
    this.id = id;
    }
    }

    @Entity
    @Table(name = "Account")
    public class Account implements Serializable {

    private Set<Recipe> likedRecipes = new HashSet<Recipe>();

    private String email;

    @ManyToMany(fetch = FetchType.LAZY, cascade = { CascadeType.ALL })
    @JoinTable(name = "LikedRecipe", joinColumns = @JoinColumn(name = "email"),  inverseJoinColumns = @JoinColumn(name = "recipeId"))
    public Set<Recipe> getLikedRecipes() {
    return likedRecipes;
    }

    public void setLikedRecipes(Set<Recipe> likedRecipes) {
    this.likedRecipes = likedRecipes;
    }

    @Column(name = "email")
    @Id
    public String getEmail() {
    return email;
    }

    public void setEmail(String email) {
    this.email = email;
    }
    } 
    ```

我写了一个方法来删除帐户和食谱之间的关联：

```
public void unlikeARecipe(String email, Long recipeId){
Query query = entityManager
    .createQuery("delete from LikedRecipe where recipeId = :recipeId and email  = :email");
query.setParameter("recipeId", recipeId);
query.setParameter("email", email);
query.executeUpdate();
} 
```

这个方法并没有从 LikedRecipe 表中删除记录，直到我在方法末尾添加了这行代码：

`entityManager.clear();`

根据 JPA API 文档，clear 方法清除持久性上下文，导致所有托管实体分离。

我的问题是分离是什么意思？而且，分离对象如何使上述方法从 LikedRecipe 表中删除记录？我是否以正确的方式使用 clear 方法？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:34:53.113

不应该更好地进行设计，例如：

并且不要在用户的配方中建立关系，它（在我看来）是无用的关系。在这种情况下，从用户（/帐户）到配方建立 OneToMany 关系就足够了，而在用户的配方中没有关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:00:06.993

分离实体是当前不受持久性上下文管理但其 id 存在于数据库中的实体。

我认为您不会删除 LikedRecipe 实体，因为您仍然从其他持久实体（帐户和食谱）引用它。事实上，当您清除持久性上下文时，它会起作用，分离所有“保持活动”的实体，您想要删除的 LikedRecipe。

如果您想保持多对多关系，则在您要删除 LikedRecipe 实体时也必须清除它们（即从 Account's 和 Recipe's 集合中删除对象）。

# visual-studio-2010 - Build是否意味着exe文件被覆盖

> ID：13818216
> 
> 赞同：0
> 
> 时间：2012-12-11T10:24:33.067
> 
> 标签：visual-studio-2010, visual-studio

仍然不确定所有`BUILD`选项。

如果我只想覆盖s目录`.exe`中的文件，我需要做的就是选择?`Solution``bin\Debug``Build`

`ReBuild`还有别的目的吗？

`Clean`我假设它是否在解决方案中产生问题的时候出现了问题？

我[在 MSDN 上引用了这个页面，](http://msdn.microsoft.com/en-us/library/vstudio/cyz1h6zd.aspx)但它没有引用解决方案中的特定目录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:27:08.217

**构建**- 进行增量构建（不打扰更新未更改的内容）

**重建**-先*清洁*然后再*构建*

**Clean** - 只清除所有中间构建文件（obj 和 bin 目录）

在这里查看更多信息：

[Visual Studio 中 Rebuild 和 Clean + Build 的区别](https://stackoverflow.com/questions/1247457/difference-between-rebuild-and-clean-build-in-visual-studio-2008)

那里的答案指出了一些微妙之处

# actionscript-3 - IOError 2032 有时会发生

> ID：13818218
> 
> 赞同：3
> 
> 时间：2012-12-11T10:24:45.093
> 
> 标签：actionscript-3, urlloader, ioerror

我的应用程序同时加载 60 个文件。我的意思是我创建了 60 个加载器（在一个数组中）并在一个循环中启动所有加载，我不会等待一个加载器完成后再开始下一个。我使用一个扩展 URLLoader 的类来加载 xml、bin、png、mp3 和 swf。

当用户收到 IOErrorEvent 时，我会记录，并且有时会发生错误 2032，但并不总是使用同一个文件，当我再次尝试时，加载完成。

你知道为什么我的 URLLoader 会出现随机 2032 错误吗？

编辑： URLLoader 是否适合一次加载多个文件？我应该更好地打开连接，请求所有文件，然后关闭连接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T22:02:22.870

`Loader`这可能是因为对事件和与之相关的数据处理不当。

您可以尝试使用：

[Arthur Debert 的 BulkLoader 类](http://www.stimuli.com.br/trane/2007/nov/25/loading-reloaded/)

他们在这方面做了一些可靠的工作。

# joomla - Joomla 2.5 特色文章和模块

> ID：13818221
> 
> 赞同：-2
> 
> 时间：2012-12-11T10:24:50.723
> 
> 标签：joomla, module, article, featured

使用 joomla 2.5 创建网页。这是我的网页：[http](http://tartusvk.eu) : //tartusvk.eu 您会看到滑动图片下有自定义 HTML 模块“信息”。当我点击“Eestimaa Spordiliit Jõud meistrivõistlused, Pärnu”时，全文打开。当全文打开时，我希望不会显示“信息”模块。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:48:55.767

这是一个长期存在的 Joomla 问题。有一个关于模块管理的 JED 部分 - 请参见[此处](http://extensions.joomla.org/extensions/style-a-design/modules-management)。大多数人使用的解决方案是 NoNumber 的 Advanced Module Manager（[此处](http://extensions.joomla.org/extensions/style-a-design/modules-management/10307)为 JED 链接）。

这应该为您解决问题！

# c# - 使用 QueryOver HQL 的 NHibernate 查询

> ID：13818232
> 
> 赞同：0
> 
> 时间：2012-12-11T10:25:25.563
> 
> 标签：c#, nhibernate

我正在编写以下内容作为 NHibernate 查询，但找不到使用 QueryOver 作为 HQL 的解决方案：-

```
IQuery query = SessionFactoryContext.GetCurrentSession()
    .CreateSQLQuery(
@"SELECT s.UserID,
    Username,
    Email,Password,
    FirstName,
    LastName,
    Address1,
    Address2,
    City,
    County,
    PostalCode,
    Country 
FROM [dbl].[dbo].[User] s 
    LEFT OUTER JOIN [dbl].[dbo].[groupmembership] g ON s.UserrID = g.UserrID 
WHERE g.UserID IS NULL 
    OR (g.GroupID NOT IN (" + groupID + ")  )")

    .SetResultTransformer(Transformers.AliasToBean(typeof(User)));

return (IList<Subscriber>)query.List<User>(); 
```

有没有办法可以将其写为 NHibernate 查询？

非常感谢您的帮助，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:52:41.103

```
.CreateSQLQuery(
    @"FROM User u left join u.GroupMembership g
    WHERE g.User is null
      OR g.GroupId not in (:groupids)"
.SetParameterList("groupids", groupIds)
.List<User>(); 
```

鉴于 GroupMembership 是 user 的属性，而 User 和 GroupId 是 GroupMembership 的属性。（如果GroupId为主键，可以简化）。

# wpf - WPF 最高效的图片加载方式

> ID：13818233
> 
> 赞同：4
> 
> 时间：2012-12-11T10:25:30.090
> 
> 标签：wpf, image, performance

可能这听起来很愚蠢，但是哪一种是最有效的加载图像的方法？

**一种**

```
BitmapImage bmp = new BitmapImage();
using(FileStream fileStream = new FileStream(source_path, FileMode.Open))
{
   bmp.BeginInit();
   bmp.CacheOption = BitmapCacheOption.OnLoad;
   bmp.StreamSource = fileStream;
   bmp.EndInit();
   if (bmp.CanFreeze)
      bmp.Freeze();

   images.source = bmp;
} 
```

**乙**

```
BitmapImage bmp = new BitmapImage();
bmp.BeginInit();
bmp.CacheOption = BitmapCacheOption.OnLoad;
bmp.CreateOptions = BitmapCreateOptions.IgnoreImageCache;
bmp.UriSource = new Uri(source_path);
bmp.EndInit();
if (bmp.CanFreeze)
   bmp.Freeze();

images.Source = bmp; 
```

我记得我在某处读到从流中加载完全禁用缓存。如果那是真的，这是否意味着从流中加载在内存管理方面更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T14:51:34.287

据我了解，当您通过设置`UriSource`属性加载 BitmapImage 时，图像总是被缓存。我不知道有什么办法可以避免这种情况。至少设置`BitmapCreateOptions.IgnoreImageCache`只保证不从缓存中检索图像，但不阻止图像存储在缓存中。

[BitmapCreateOptions](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapcreateoptions.aspx)中的“备注”说

> 选择 IgnoreImageCache 时，图像缓存中的任何现有条目都会被替换，即使它们共享相同的 Uri

我由此得出的结论是，仅当 Uri 加载图像*时才*执行缓存。换句话说，如果您真的需要禁止图像缓存，则必须通过其`StreamSource`属性加载图像。

但是，如果这真的“在内存管理方面更好”也许值得一试。您可以尝试这两种替代方案，看看是否发现内存消耗有任何显着差异。

# java - 如何在仅在 JSP 中使用 iText 生成的 PDF 中添加页眉和页脚

> ID：13818234
> 
> 赞同：0
> 
> 时间：2012-12-11T10:25:30.813
> 
> 标签：java, jsp, itext, jsp-tags

我浏览了很多帖子，但没有得到任何有用的信息，因为它们都是关于向现有 PDF 添加页眉和页脚。我想要的是我想在创建 PDF 时在运行时自动创建页眉和页脚。

我对java的了解不多，所以这些类和接口不在我的知识范围内

我试过的是

## Jsp页面

```
 <%

Phrase header;
PdfPTable footer;

try{

Document document = new Document(PageSize.A4, 36, 36, 54, 54);
// step 2
PdfWriter writer = PdfWriter.getInstance(document, new FileOutputStream("D:\\lata.pdf"));
HeaderFooter event = new HeaderFooter();
writer.setBoxSize("art", new Rectangle(36, 54, 559, 788));
writer.setPageEvent(event);//**problem: The constructor HeaderFooter() is undefined**
// step 3
document.open();
for(int i=0;i<1000;i++){
document.add(new Phrase("lata "));
}
document.close();
}catch(Exception e){
}%> 
```

是否可以通过将代码放入 JSP 页面或任何其他简单的解决方案来调用该函数或使用 iText 创建 PDF 文件？我想在每个 pdf 页面的末尾添加图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:50:26.970

***回答：是否可以通过将代码放入 JSP 页面或任何其他简单的解决方案来调用该函数或使用 iText 创建 PDF 文件？***

要开发这段代码，首先在一个简单的java应用程序中做，说里面

```
public static void main(String[] args) {
    ...
} 
```

这是最难的部分，尤其是对于 iText 而言。

当它工作时，

*   将代码移植到 JSP，
*   将内容类型设置为 PDF（“application/x-pdf”）。
*   并确保 和 之间没有额外的`%>`输出`<%`，
*   输出文件数据（写入`response.getOutputStream()`）。

或者不是立即输出 PDF：

*   重定向到 Web 目录中 PDF 的书面副本。

移植到 JSP：

1.  导入语句可以放在页面指令中。
2.  全局常量和方法/函数的声明可以放在`<%! ... %>`.
3.  添加所需的库 jar。

您将需要搜索示例。

* * *

我认为[这](https://stackoverflow.com/questions/6018299/itext5-1-0-set-header-and-footer-in-document)是你的来源。要创建内部类 TableHeader aka HeaderFooter：

```
<%!
class HeaderFooter extends PdfPageEventHelper {
...
}
%> 
```

# javascript - 有没有办法在设置字符之前对文本应用粗体字重，在它之后（或任何类型的 css，真的）没有手动格式化？

> ID：13818236
> 
> 赞同：1
> 
> 时间：2012-12-11T10:25:31.957
> 
> 标签：javascript, jquery, css, formatting, pseudo-class

我正在与 CMS 环境 (mybigcommerce.com) 中的电子商务客户端合作，并且标题可能需要进行大量清理以使它们更具可读性，例如：

5/16" x 12" ExcelMate 钻头和面板驱动器——用于安装 ExcelMate 驱动器等。

我带来了数十种甚至数百种产品，并想看看是否有一种方法可以设置产品的 h1 css 以自动格式化分数以及破折号前后的文本——所有这些都无需手动输入添加一堆跨度标签。我知道它对 css 的要求很高，但是是否有脚本可以做到这一点？

将每组样式规则分开的字符将是一致的 - 一个集合的破折号，分数样式的分数分隔符 - 但分隔符之前和之后的文本不是，所以 :before 和 :after 不能易于使用。

这是我可以在 InDesign 中使用打印样式来完成的事情，它为我节省了大量时间，而且如果有办法使用 jQuery 和 CSS 来实现它似乎会非常方便——我知道它会为我节省大量时间在这个项目上！

提前感谢您的任何想法。

更新：对不起，我忘了提到我想要动态执行此操作的第二个原因：一旦我完成，客户端将接管定期更新。客户不是编码员——让他在一个类中应用一个 h1 标签，甚至是一个简单的 h1 标签，这将是一个挑战，他在其中应用跨度将非常困难。实现这一点至少需要五个跨度，因此使用 .js 或 jQuery 动态应用标签不仅可以节省大量工作，而且可以确保在我完成后正确完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T10:30:11.663

单独使用 CSS 是不可能的。

CSS 可以应用于标签，或者它的子标签。应用的样式将应用于标签的所有内容。如果您需要分离，则需要修改 HTML 以包含某种标签，您可以在这些标签上应用 CSS。

你已经对如何拆分这个有了一个想法。您不必手动执行此操作，也许可以通过正则表达式或其他模式匹配来添加标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T10:34:18.557

一种方法是使用 a`:before{}`和`:after{}` 伪类。但我认为这不符合你的选择。

另一种方法可能是导入字体库并使用 javascript cufon 来执行此操作。例如，您可以过滤选择并让它们使用不同的样式。例如，标题和 li 在下面的示例中将具有不同的字体。

这只是一个例子。

```
<script type="text/javascript">
    Cufon.replace('h1, h2, h3, h4 , ul li', { fontFamily: 'Myriad Pro', textShadow: '#fff 1px 1px', hover:true,fontSize:'16px' });
</script> 
```

# android - AsyncTask 适用于 Android 2.3.3 但不适用于 ICS

> ID：13818239
> 
> 赞同：4
> 
> 时间：2012-12-11T10:25:41.507
> 
> 标签：android, android-asynctask

我有 TabActivity，每个选项卡都有 ActivityGroup。在 Forth 选项卡中，ForthActivityGroup 有一个 MyAsyncActivity 类。在 MyAsyncAcitivity 我有这个代码。我有这个 Android AsyncTask 代码。在 Android 2.3.3 上调用 doInBackground(String.. params) 并打印日志，但在 Android 4.0 上未打印。请有人给我想法我做什么？

```
public class getXML extends AsyncTask<String, Integer, String>{
        private final ProgressDialog dialog = new ProgressDialog(this);

        @Override
        protected void onPreExecute() {
            this.dialog.setMessage("Loading...");
            this.dialog.show();
        }

        @Override
        protected String doInBackground(String... params) {
            Log.d("Payment", "do background");

            return "result";
        }

        @Override
        protected void onPostExecute(String result) {
            if (this.dialog.isShowing()) {
                this.dialog.dismiss();
            }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-01T09:38:04.843

用这个：

```
AsyncTask task = new YourTask();
if (Build.VERSION.SDK_INT <= Build.VERSION_CODES.GINGERBREAD_MR1) {
   task.execute(params);
} else {
   task.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, params);
} 
```

# android - 在手机内存上安装APK会影响手机的性能吗？

> ID：13818240
> 
> 赞同：0
> 
> 时间：2012-12-11T10:25:48.070
> 
> 标签：android, performance

我正在研究`Android`. 默认情况下，主题安装在`Phone's internal`内存上。在安装许多主题时，主题占用的内存会增加。这是否会影响设备的性能或设备的 RAM。为避免这种情况，我正在考虑在 SD 卡上安装所有主题 APK，这对我有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:48:36.100

内存的占用程度，只要不是快满就不会影响手机的性能。如果您的主题不是很大，则没有理由将它们移动到 SD 卡上。

# php - 在类中声明变量并动态赋值

> ID：13818241
> 
> 赞同：1
> 
> 时间：2012-12-11T10:25:48.880
> 
> 标签：php

有人可以帮我解决这个问题：

```
class Helper_common
{
    public static $this_week_start_date = date**(**"Y-m-d", strtotime( "previous monday"));
} 
```

当我在类中定义变量时，它会在日期函数的开始括号上给出错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:29:00.340

免费的PHP代码不允许在类方法之外，只能写常量表达式。

在常规属性中，您可以简单地从构造函数或其他方法中执行此操作：

```
class Helper_common
{
    public $this_week_start_date;

    public function __construct()
    {
        $this->this_week_start_date = date("Y-m-d", strtotime( "previous monday"));
    }
} 
```

但是你有一个静态属性。除了在课外做之外，我想不出任何其他解决方案：

```
class Helper_common
{
    public static $this_week_start_date;
}
Helper_common::$this_week_start_date = date("Y-m-d", strtotime( "previous monday")); 
```

重新考虑您的设计可能会更好。

# iphone - 锁定 iPad 设备时 UIWebView 显示黑屏

> ID：13818243
> 
> 赞同：0
> 
> 时间：2012-12-11T10:26:06.960
> 
> 标签：iphone, objective-c, ios, ipad, uiwebview

我们的应用程序基于`UIWebView`. 当我在将 PDF 文档加载到`UIWebview`. 请让我知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:33:35.713

在你的

```
- (void)applicationWillResignActive:(UIApplication *)application 
```

您需要添加一些代码来重新加载 PDF（如果它当前正在显示 PDF），或者暂停加载。

# java - 在 Servlet 中设置初始化参数

> ID：13818244
> 
> 赞同：1
> 
> 时间：2012-12-11T10:26:08.793
> 
> 标签：java, servlets, initialization

我必须根据环境将初始化参数设置为 servlet，而不是通过 web.xml 而是通过代码，但我的 servlet 版本不是 3.0 ，所以我不能使用这个 [http://docs.oracle.com/javaee/6/api /javax/servlet/ServletContext.html#setInitParameter%28java.lang.String,%20java.lang.String%29](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#setInitParameter%28java.lang.String,%20java.lang.String%29)

我无权访问 servlet 代码，所以我正在编写一个扩展它的新 servlet，我想通过 java 代码添加初始化参数..有什么建议吗？

```
<servlet>
<servlet-name>abc</servlet-name>
<servlet-class>abc</servlet-class>
<init-param>
<param-name>abc</param-name>
<param-value>localhost:2001</param-value>
</init-param>
<load-on-startup>1</load-on-startup>
</servlet> 
```

有没有办法通过扩展 servlet abc 并将属性设置为 servlet 配置（覆盖 init()）来完成上述操作（添加 init-params）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T13:51:56.973

我覆盖了 GenericServlet 的 getInitParameter 方法，我能够解决我的问题..

```
@Override
public String getInitParameter(String name) {

//Get initparams here
    return "MyInitParams";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T11:36:11.347

看看下面的代码是否对你有帮助

```
import java.io.IOException;
import java.util.Properties;

import javax.servlet.ServletConfig;
import javax.servlet.ServletContext;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * Servlet implementation class HelloWorld
 */
public class HelloWorld extends HttpServlet {
    private static final long serialVersionUID = 1L;

    ServletContext context;

    /**
     * @see HttpServlet#HttpServlet()
     */
    public HelloWorld() {
        super();
        // TODO Auto-generated constructor stub
    }

    public void init(ServletConfig config) throws ServletException {
        // Do required initialization
        Properties prop = new Properties();
        try {
            prop.load(getServletContext().getResourceAsStream(
                    "/WEB-INF/properties/sample.properties"));
            context.setAttribute("abc", prop.getProperty("abc"));
        } catch (Exception e) {
            // TODO: handle exception
            System.out.println(e);
        }
    }

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse
     *      response)
     */
    protected void doGet(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
    }

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse
     *      response)
     */
    protected void doPost(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
    }

} 
```

# cross-domain - 调用 Javascript

> ID：13818245
> 
> 赞同：3
> 
> 时间：2012-12-11T10:26:12.443
> 
> 标签：cross-domain, httprequest

我想使用 javascript 在我的 html 网页中使用 http post/get 调用 web 服务。

链接如下所示， [http://www.webservicex.net/globalweather.asmx/GetCitiesByCountry?CountryName=Nepal](http://www.webservicex.net/globalweather.asmx/GetCitiesByCountry?CountryName=Nepal)

这是一个跨域调用，我想直接在我的网页上调用它，

我想使用 javascript 访问此链接的数据。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:29:38.917

如果您不控制该域，我猜您没有。您将需要创建一个可以充当代理并调用此 xml 代码服务器端的 Web 应用程序。（因为没有跨域限制）

然后，您可以通过前端的 AJAX 请求调用您自己的 Web 应用程序。

# django - 如何记录 django 应用程序发布的 SQL 请求？

> ID：13818247
> 
> 赞同：0
> 
> 时间：2012-12-11T10:26:13.673
> 
> 标签：django, postgresql, django-models, django-admin

我在 django 应用程序中有一个非常慢的管理界面，该应用程序受 apache2 和 PostgreSQL 支持。

我怀疑问题是未优化的 sql 请求，但我不明白是哪一个。我相信每行都发送一个请求，而不是所有行的请求。

是否可以记录实际发送到我的数据库的每个 sql 请求？

谢谢你的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:32:29.627

使用`log_min_duration`配置文件中的选项：

[http://www.postgresql.org/docs/current/static/runtime-config-logging.html#GUC-LOG-MIN-DURATION-STATEMENT](http://www.postgresql.org/docs/current/static/runtime-config-logging.html#GUC-LOG-MIN-DURATION-STATEMENT)

您可能还想安装自动解释模块，该模块还将慢速查询的执行计划转储到日志文件中。

更多细节在这里：[http ://www.postgresql.org/docs/current/static/auto-explain.html](http://www.postgresql.org/docs/current/static/auto-explain.html)

# javascript - 带有 javascript 的样式元素

> ID：13818249
> 
> 赞同：3
> 
> 时间：2012-12-11T10:26:20.340
> 
> 标签：javascript

我正在尝试使用 javascript（不是 jQuery）制作一个 gototop 按钮。我希望此按钮具有延迟效果，我可以通过以下方式实现：

```
 var timeOut;
    function scrollToTop() {
      if (document.body.scrollTop!=0 || document.documentElement.scrollTop!=0){
        window.scrollBy(0,-50);
        timeOut=setTimeout('scrollToTop()',10);
       }
      else clearTimeout(timeOut);
    } 
```

html很简单： `<div id="gototop"><a href="#header" onclick="scrollToTop();return false">Back to top</a></div>`

我无法根据滚动高度显示/隐藏按钮。据我所知，以下内容应该隐藏按钮，直到页面向下滚动 600px，但这不起作用：

```
 var posit = window.scrollTop();
    if (posit < 900) {
        document.getElementById("gototop").style.display = 'none';
    } 
```

为什么这个样式不生效？

我使用的完整代码是：

```
 var posit = window.scrollTop();
    if (posit < 900) {
        document.getElementById("gototop").style.display = 'none';
    }
    var timeOut;
    function scrollToTop() {
      if (document.body.scrollTop!=0 || document.documentElement.scrollTop!=0){
        window.scrollBy(0,-50);
        timeOut=setTimeout('scrollToTop()',10);
       }
       else clearTimeout(timeOut);
      } 
```

感谢您的关注，您好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:30:25.380

尝试将其放入 onscroll 事件处理程序中，例如：

为您的 gototop 元素添加样式，例如：

```
<div id="gototop" onclick="scrollToTop()" style="display:none;"> </div>     

window.onscroll = function(){
    if (window.scrollY < 900) {
        document.getElementById("gototop").style.display = 'none';
    else
        document.getElementById("gototop").style.display = 'block';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T06:44:24.523

这是返回顶部按钮的完整工作代码。

```
<style type="text/css">
#gototop{display:none;position:fixed;right:28px;bottom:10px;z-index:100;}
#gototop a{font-size:14px;font-weight:bold;display:block;padding:5px;text-decoration:none;color:#fff;background:#000;opacity:0.5;border:1px solid #aaa;}
#gototop a:hover{color: #000;text-decoration:underline;background-color:#fff;border: 2px solid #aaa;opacity:0.5;}
</style>

<script type="text/javascript" language="javascript">

// document.documentElement.scrollTop makes it work in Chrome and IE
// 400 is the point from which the button starts showing, you can change it to your needs

gototop = document.getElementById("gototop");

window.onscroll = function(){
    if (window.scrollY < 400 || document.documentElement.scrollTop < 400) {
        gototop.style.display = 'none';
}
    if (window.scrollY > 400 || document.documentElement.scrollTop > 400)
        gototop.style.display = 'block';
}

var timeOut;
function scrollToTop() {
    if (document.body.scrollTop!=0 || document.documentElement.scrollTop!=0){
        window.scrollBy(0,-50);
        timeOut=setTimeout('scrollToTop()',10);
    }
    else clearTimeout(timeOut);
}
</script>

<div id="gototop"><a href="#header" onclick="scrollToTop();return false">Back to Top</a></div> 
```

# c# - 更改 Gridview 的 Next 按钮不会触发 pageindexchange

> ID：13818250
> 
> 赞同：1
> 
> 时间：2012-12-11T10:26:25.270
> 
> 标签：c#, asp.net, aspxgridview, page-index-changed

我有一个具有分页属性的gridview。从后面的代码中，我正在使用带有以下代码的图像更改下一个文本。图像已成功加载而不是下一个文本，但是当我单击它时不会触发事件 PageIndexChanging ，但是如果我有寻呼机 Next 的默认文本，它会触发事件。有什么帮助吗？

```
grdQuestions.PagerSettings.NextPageImageUrl = "NewImages/next_bg.jpg"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T08:10:52.543

在页面加载事件中，您应该检查 IsPostBack 条件。像这样

`if(!IsPostBack) { //page load events }`

现在就试试

# c - 使用free(someUnrelatedPointer)之前的C静态主返回值0改变了吗？

> ID：13818253
> 
> 赞同：1
> 
> 时间：2012-12-11T10:26:33.033
> 
> 标签：c, windows, gcc, mingw

我正在学习 C 并且我这样做了（下面的代码，我不明白为什么我得到的程序返回值类似于 -1073740940 而它应该是 0

```
#include <stdio.h>
#include <stdlib.h> //For using malloc;

struct Vertex{
    int x;
    int y;
    int z;
};

int main(){
    int ret = 0;
    struct Vertex myVertex;
    struct Vertex *myVertexPtr = malloc(sizeof(*myVertexPtr));

    myVertexPtr = &myVertex;

    myVertex.x = 1;
    myVertex.y = 2;
    myVertex.z = 3;

    printf("%d\n", myVertexPtr->x);
    printf("%d\n", myVertexPtr->y);
    printf("%d\n", myVertexPtr->z);

    getchar();

    free(myVertexPtr); //When this line is included I get the strange program return    value (And, "This program has stopped working properly windows error")
                   //When this line is not included it returns fine, but I'm under the impression it is good practice to free pointers

    return 0;
} 
```

我正在使用 MinGW GCC 编译

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:27:42.303

这一行：

```
myVertexPtr = &myVertex; 
```

覆盖由 返回的指针`malloc()`，以便您传递`free()`导致错误的错误值。它还会导致内存泄漏，这在更长时间运行的程序中将是一个问题。不要这样做！

它应该被简单地删除，如果你想在堆上使用一个顶点，这样做：

```
myVertexPtr = malloc(sizeof *myVertexPtr);
myVertexPtr->x = 1;
myVertexPtr->y = 2;
myVertexPtr->z = 3; 
```

如果你想有一个单独的指针指向堆栈上的一个顶点，请删除`malloc()`：

```
myVertexPtr = &myVertex; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:29:29.993

```
myVertexPtr = &myVertex; 
```

这将为 myVertexPtr 分配 myVertex 的地址，该地址位于堆栈中。您稍后将尝试释放它。我很惊讶，你没有得到一个段错误。

free 应该只为 malloc/calloc 返回的地址调用。您的代码将导致未定义的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T11:01:31.940

myVertexPtr = &myVertex;

如上所示，如果你想为 myVertexPtr 和 myVertex 共享公共内存，你需要 mot 使用 malloc。

现在您的问题是，当您添加 free() 语句时，您会得到奇怪的返回值。那是因为已经通过分配 myVertexPtr = &myVertex; 更改了 myVertexPtr 的内存指针；

因此，当您添加 free() 语句时，它会尝试释放不在堆中的内存，这就是您得到奇怪返回值的原因。

删除 malloc 和 free 语句，您的程序应该可以正常工作。希望能帮助到你.....

# jquery - 使用 Jquery-Ajax 上传文件无法正常工作

> ID：13818256
> 
> 赞同：2
> 
> 时间：2012-12-11T10:26:47.703
> 
> 标签：jquery, file-upload

我在目录中有 3 个文件。

> 1- jquery-1.8.3.min.js
> 
> 2- index.html
> 
> 3- addFile.php

并且`jquery-1.8.3.min.js`是主要的jquery文件。
`index.html`代码是：

```
<html>
    <head>
         <script type="text/javascript" src="jquery-1.8.3.min.js"></script>
        <script type="text/javascript">
                $(document).ready(function () {
                    $("#uploadbutton").click(function () {
                        var filename = $("#tmppic").val();
                        $.ajax({
                            type: "POST",
                            url: "addFile.php",
                            enctype: 'multipart/form-data',
                            data: {
                                file: filename
                            },
                            success: function (result) {
                                alert(result);
                            }
                        });
                    });
                });
        </script>
    </head>
    <body>
        <div>
            <input type="file" name="tmppic" id="tmppic" />
            <input id="uploadbutton" type="button" value="Upload"/>
        </div>
    </body>
</html> 
```

和`addFile.php`代码是：

```
<?php
    //print_r($_FILES["tmppic"]);
    echo $_FILES["tmppic"]["type"];
    move_uploaded_file($_FILES["tmppic"]["tmp_name"], "uploads/" . $_FILES["tmppic"]["name"]);
?> 
```

但是这个上传文件不起作用。
感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:58:26.197

我建议使用 jQuery Form Plugin 进行 ajax 文件上传。

[http://www.malsup.com/jquery/form/](http://www.malsup.com/jquery/form/)

# selenium - 在 Selenium Capybara Rspec 测试中通过前端登录用户

> ID：13818258
> 
> 赞同：0
> 
> 时间：2012-12-11T10:26:50.900
> 
> 标签：selenium, rspec, capybara

我想在使用 javascript 的测试期间以用户身份登录，所以我想我应该有一个帮助方法，通过前端登录用户。然而有了帮手

```
 def log_user_in_via_frontend(user)
        visit root_path
        fill_in 'user_session_login', :with => user.login
        fill_in 'user_session_password', :with => user.password
        click_on('Login')
    end 
```

只要我不放在`:js => true`最后，我就可以登录并被重定向到正确的页面。我通过调用这个助手

```
 user = FactoryGirl.create(:user)
    log_user_in_via_frontend(user) 
```

之后访问 root_path 会产生`No route matches {:controller=>\"users\", :action=>\"show\", :id=>#<User id: nil, login: nil`...

在我的硒测试中登录用户的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T10:47:12.353

实际上，到目前为止，这对我有用。我不确定到底是什么，但我认为关键是停用过渡固定装置，并让数据库清理器进行清理。

# javascript - 当我将代码放在单独的文件中时，UserControl 中的 HiddenField 返回 null

> ID：13818260
> 
> 赞同：0
> 
> 时间：2012-12-11T10:27:00.833
> 
> 标签：javascript, asp.net, user-controls

我有一个用户控件，其中包含一个隐藏字段，其中`<asp:HiddenField runat="server" ID="hfTotalCharacters" />` 存储来自后面代码的值。还有一些读取该值的 Javascript。当我将脚本放入 ascx 文件时，一切正常，但是当我将脚本移动到 .js 文件中时，我得到一个空对象（第二行）：

```
 var hf = document.getElementById("<%=hfTotalCharacters.ClientID %>");
    alert(hf.value);
    var totalCharacters = hf.value 
```

我必须将脚本放在单独的文件中的原因是因为我想在同一页面中多次使用 userControl，但即使在 UC 的一个实例中移动也不起作用。页面中加载了JS文件，但是找不到元素！

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:34:06.103

如果要将js放在另一个文件中，请将clientIdMode设置为静态：

喜欢：

```
<asp:HiddenField runat="server" ID="hfTotalCharacters" ClientIDMode="static"/> 

var hf = document.getElementById("hfTotalCharacters");
alert(hf.value);
var totalCharacters = hf.value 
```

# excel - Excel单元格：提取字符串

> ID：13818264
> 
> 赞同：-1
> 
> 时间：2012-12-11T10:27:15.907
> 
> 标签：excel, excel-formula, excel-2010

我在 excel 中有一个包含文本的列：

*   **数据库片段“你好”。“印度”“第 1 部分”**
*   **外部来源“欢迎”。“老虎”“Part2”**
*   **内部柜台“旅行”。“医生”“Part3”**

我想从上面提取数据：

*   **“你好”。“印度”**
*   **“欢迎”。“老虎”**
*   **“旅行”、“医生”**

在列中

在第二列我想要：

*   **“第1部分”**
*   **“第2部分”**
*   **“第 3 部分”**

请帮我在excel中为此编写一个函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:49:13.770

第一部分 =MID(A1,FIND("""",A1),FIND(" ",A1,FIND("""",A1))-FIND("""",A1))
第二部分 =MID( A1,FIND(" ",A1,FIND(".",A1))+1,99)

第一个找到双引号的第一次出现并提取到下一个空格，第二个找到句号后的第一个空格并提取剩余部分（最多 99 个字符）。因此，它在很大程度上取决于源列的格式

# jquery - 在单击时添加到 jquery 函数

> ID：13818270
> 
> 赞同：0
> 
> 时间：2012-12-11T10:27:44.003
> 
> 标签：jquery

我正在努力理解的语法，`.on("click"`但就是无法理解。

如果我有这个代码：

```
<script>
    $(function() {
        $(".somediv").not(":contains('$someparam')").addClass("hidden");
    });
</script> 
```

我需要做什么才能`$someparam`在页面上显示为链接，单击此链接将激活此 jQuery 以隐藏 div？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:06:09.740

据我了解，这个问题是将隐藏的 css 类添加到 somediv css 类中，该类在单击时包含特定的 $someparam。

你可以在小提琴中找到它：

> **[http://jsfiddle.net/DwAAQ/](http://jsfiddle.net/DwAAQ/)**

这是`css`我使用的：

```
 .somediv{
        width:100%; 
        height:20px; 
        margin:0 0 10px 0; 
        border-bottom:solid 1px red;
       }
    .hidden{
       display:none;
      } 
```

这是`html`我使用的：

```
 <div class='somediv'>1 is</div>
    <div class='somediv'>2 not</div>
    <div class='somediv'>3 not</div>
    <div class='somediv'>4 is</div>

    <button class='someclass'>someClass</button> 
```

这是`jQuery i used with on click`处理程序：

```
 $(function(){
        var $someparam = 'is';

        $(document).on('click', '.someclass', function() {
            $(".somediv").not(":contains('" + $someparam + "')").addClass("hidden");
        });
    }); 
```

这是在做什么，首先它有一个`variable which contains a specific string`在这种情况下我`'is'`包含在 div 中。因此，当文档准备好时，我们需要`button here to click which executes the line in the jquery`添加`.hidden css class`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:36:34.380

基本上 .on 用于完全不同的东西。您只需要[单击](http://api.jquery.com/click/)鼠标事件：

```
.click( handler(eventObject) ) 
```

因此，对于您的具体示例，它将如下所示：

```
$('.someclass').click(function() {
    $(".somediv").not(":contains('$someparam')").addClass("hidden");
}); 
```

（顺便说一句，您可能想检查 '$someparam' 部分 - 用引号括起来真的没有意义）。

# javascript - 在 IE8 中显示内联 SVG

> ID：13818274
> 
> 赞同：1
> 
> 时间：2012-12-11T10:27:46.547
> 
> 标签：javascript, jquery, css, ajax, plugins

我正在尝试显示 SVG 内联图形并使其与 IE8 一起使用。

我在这里阅读了很多关于如何使其与 raphael.js、google svgweb 和 svg2vml 一起使用的问题。这些都不适用于我的 svg，我不知道发生了什么。

这就是我显示它的方式（它适用于除 IE8 之外的所有浏览器）：

```
<svg class="graph_svg" xmlns="http://www.w3.org/2000/svg">

<path style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); stroke-linejoin: round;" fill="none" stroke="#4da1dc" d="M42,212C42,212,56.58154127864968,178.90693259497436,67,
172C77.41845872135032,165.09306740502564,79.5,168,92,
168C104.5,168,106.19916961436985,178.29222241984883,117,
172C127.80083038563015,165.70777758015117,133.4183216333031,114.08871808400757,142,
105C150.5816783666969,95.91128191599243,157.87272431184198,102.54065796718027,167,
94C175.7621846606317,85.80096835150695,179.03606043337788,80.070403288402034,191,
80C203.4624370485647,80.968329907914544,210.99663342191394,110.54503064668913,216,
122C221.00336657808606,133.45496935331087,228.50577118340374,167.62020231894422,241,
168C253.49422881659626,168.37979768105578,255.06696898441479,134.05960665491182,266,
128C276.93303101558524,121.94039334508818,279.00302316511863,131.51034853302625,291,
128C302.99697683488137,124.48965146697377,305.02744887853777,117.98774764722916,316,
112C326.53364907660375,106.25176225866002,331.73815989512775,109.70298788241857,340,
101C348.60608344257525,100.93438762248067,352.5800686286496,100.58744744135072,365,
100C377.4199313713504,100.41255255864928,377.50034068226495,132.0922872719254,390,
132C402.49965931773505,132.9077127280746,402.5282295422324,90.83960803280808,415,
80C427.4717704577676,80.16039196719192,436.6882768782747,97.94668137129736,440,
110C443.3117231217253,122.05331862870264,452.5179069815616,132.3311548168279,465,
132C477.4820930184384,132.66884518317212,477.5053977819771,137.63269166443368,490,
138C501.994818129302,118.35261600214366,502.01756477464437,125.64903472184167,539,
92C551.4723045035353,91.16836283687255,559.1649335027082,151" stroke-width="1" stroke-linejoin="round">
</path>

<circle class="graph_circle" cx="42" cy="212" r="2" fill="#4da1dc" stroke="#4da1dc" stroke-width="2"></circle>
<circle class="graph_circle" cx="67" cy="172" r="2" fill="#4da1dc" stroke="#4da1dc" stroke-width="2"></circle>
<circle class="graph_circle" cx="92" cy="168" r="2" fill="#4da1dc" stroke="#4da1dc" stroke-width="2"></circle>
<circle class="graph_circle" cx="117" cy="172" r="2" fill="#4da1dc" stroke="#4da1dc" stroke-width="2"></circle>
<circle class="graph_circle" cx="142" cy="105" r="2" fill="#4da1dc" stroke="#4da1dc" stroke-width="2"></circle>
<circle class="graph_circle" cx="167" cy="94" r="2" fill="#4da1dc" stroke="#4da1dc" stroke-width="2"></circle>
<circle class="graph_circle" cx="191" cy="80" r="2" fill="#4da1dc" stroke="#4da1dc" stroke-width="2"></circle>
<circle class="graph_circle" cx="216" cy="122" r="2" fill="#4da1dc" stroke="#4da1dc" stroke-width="2"></circle>
<circle class="graph_circle" cx="241" cy="168" r="2" fill="#4da1dc" stroke="#4da1dc" stroke-width="2"></circle>
<circle class="graph_circle" cx="266" cy="128" r="2" fill="#4da1dc" stroke="#4da1dc" stroke-width="2"></circle>
<circle class="graph_circle" cx="291" cy="128" r="2" fill="#4da1dc" stroke="#4da1dc" stroke-width="2"></circle>
<circle class="graph_circle" cx="316" cy="112" r="2" fill="#4da1dc" stroke="#4da1dc" stroke-width="2"></circle>
<circle class="graph_circle" cx="340" cy="101" r="2" fill="#4da1dc" stroke="#4da1dc" stroke-width="2"></circle>
<circle class="graph_circle" cx="365" cy="100" r="2" fill="#4da1dc" stroke="#4da1dc" stroke-width="2"></circle>
<circle class="graph_circle" cx="390" cy="132" r="2" fill="#4da1dc" stroke="#4da1dc" stroke-width="2"></circle>
<circle class="graph_circle" cx="415" cy="80" r="2" fill="#4da1dc" stroke="#4da1dc" stroke-width="2"></circle>
<circle class="graph_circle" cx="440" cy="110" r="2" fill="#4da1dc" stroke="#4da1dc" stroke-width="2"></circle>
<circle class="graph_circle" cx="465" cy="132" r="2" fill="#4da1dc" stroke="#4da1dc" stroke-width="2"></circle>
<circle class="graph_circle" cx="490" cy="138" r="2" fill="#4da1dc" stroke="#4da1dc" stroke-width="2"></circle>
<circle class="graph_circle" cx="539" cy="92" r="2" fill="#4da1dc" stroke="#4da1dc" stroke-width="2"></circle>

</svg>
</div><!-- holder --> 
```

关于如何使它与 IE8 一起工作的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-04T11:16:25.897

IE8 根本无法做到这一点，您需要将 svg 设置为外部文件并提供`<object>`（例如）。

[http://caniuse.com/#feat=svg-html5](http://caniuse.com/#feat=svg-html5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:09:43.953

用于 ie8 的 svg 插件（来自 adobe）[http://www.iegallery.com/en-us/Addons/Details/444](http://www.iegallery.com/en-us/Addons/Details/444)

# ruby - Ruby正则表达式从字符串中删除/

> ID：13818275
> 
> 赞同：0
> 
> 时间：2012-12-11T10:27:54.577
> 
> 标签：ruby, regex

我目前有一个字符串可以从字符串中删除空格，但是我现在也需要从字符串中删除正斜杠。我对正则表达式不是很好，可以使用一些帮助谢谢。这是我拥有的当前正则表达式：`gsub(/\s+/, "")`如何修改它以删除 / ？我在控制台中玩过，似乎无法理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:37:01.617

您必须转义正斜杠，因为它是一个特殊字符。像这样的东西：

```
s = "This   is a line / string"
s.gsub(/[\s\/]/, '') # => "Thisisalinestring" 
```

# c++ - 将具有可变维度的二维数组作为函数参数传递

> ID：13818277
> 
> 赞同：5
> 
> 时间：2012-12-11T10:27:58.310
> 
> 标签：c++, c, arrays, multidimensional-array

我刚刚在codechef的成功提交中看到了以下代码。

[http://www.codechef.com/viewplaintext/1595846](http://www.codechef.com/viewplaintext/1595846)

我曾经认为

```
float max(int n,int arr[n][n])
{....} 
```

在 C++ 中是不允许的（因为 'n' 是一个变量）。我的带有 MinGW [gcc 4.4] 的 CodeBlocks（在 Windows 上）给出了编译时错误。那个“错误：数组绑定不是整数常量。

那么CodeChef的法官如何接受这样的解决方案。是否有任何特殊标志可以让我们在 C++ 中做到这一点？？？

编辑：显示状态为 AC（已接受）的链接：http: [//www.codechef.com/viewsolution/1595846](http://www.codechef.com/viewsolution/1595846)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T11:12:29.270

ISO C99 允许可变长度自动数组，作为扩展，GCC 在 C90 模式和 C++ 中接受它们。这些数组的声明与任何其他自动数组一样，但其长度不是常量表达式。

参考： http: [//gcc.gnu.org/onlinedocs/gcc/Variable-Length.html](http://gcc.gnu.org/onlinedocs/gcc/Variable-Length.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T10:49:27.580

我的立场是正确的：C99 确实允许 C 这样做，尽管许多编译器还没有实现它，有些可能永远不会（微软）。

**上一个答案**

要么将 arr 作为 int** 传递，要么使用类似的东西

```
template< int N >
float max(const int (&arr)[N][N])
{ ... } 
```

这当然需要 N 作为编译时间常数。最安全的解决方案是使用 std::vector 或其他了解其大小的容器。

总的来说，代码对我来说似乎很脆弱。

# machine-learning - 朴素贝叶斯，不是那么朴素吗？

> ID：13818278
> 
> 赞同：1
> 
> 时间：2012-12-11T10:28:00.133
> 
> 标签：machine-learning, neural-network, classification, weka, naivebayes

我有一个寻找大写字母的朴素贝叶斯分类器（用 WEKA 实现）。

```
contains_A
contains_B
...
contains_Z 
```

对于某个类别，LCD 一词几乎出现在训练数据的每个实例中。当我得到“LCD”属于该类的概率时，它类似于 0.988。赢。

当我得到“L”的概率时，我得到一个普通的 0，而对于“LC”，我得到 0.002。由于特征是幼稚的，L，C和D不应该独立地贡献整体概率，结果“L”有一些概率，“LC”更多，“LCD”更多吗？

同时，使用 MLP 进行相同的实验，而不是具有上述行为，它给出了 0.006、0.5 和 0.8 的百分比

所以 MLP 做了我期望朴素贝叶斯做的事情，反之亦然。我错过了什么，谁能解释这些结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:45:21.647

我不熟悉 WEKA 的内部结构 - 如果您认为我不正确，请纠正我。

当使用文本作为“特征”时，该文本将转换为二进制值向量。每个值对应一个具体的词。向量的长度等于字典的大小。

如果您的字典包含 4 个世界：LCD、VHS、HELLO、WORLD，那么例如文本 HELLO LCD 将转换为 [1,0,1,0]。

我不知道 WEKA 如何构建它的字典，但我认为它可能会遍历示例中出现的所有单词。除非字典中出现“L”（因此出现在示例中），否则它的概率在逻辑上为 0。实际上它甚至不应该被视为一个特征。

实际上，您无法对特征的概率进行推理-并且您不能将它们加在一起，我认为特征之间没有这种关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-28T19:36:56.313

请注意，在文本挖掘中，如果您使用任何类型的术语加权和规范化，例如 tf.idf，单词（在您的情况下为字母）可能会被赋予与其实际计数不同的权重。例如，在 tf.idf 的情况下，字符计数被转换为对数刻度，出现在每个实例中的字符也可以使用 idf 归一化来惩罚。

我不确定您使用哪些选项将数据转换为 Weka 功能，但您可以在此处看到 Weka 具有要为此类加权和标准化选项设置的参数

[http://weka.sourceforge.net/doc.dev/weka/filters/unsupervised/attribute/StringToWordVector.html](http://weka.sourceforge.net/doc.dev/weka/filters/unsupervised/attribute/StringToWordVector.html)

-T 将词频转换为 log(1+fij)，其中 fij 是第 j 个文档（实例）中词 i 的频率。

-I 将每个词的频率转换为：fij*log(文档数/包含单词 i 的文档数) 其中 fij 如果单词 i 在第 j 个文档中的频率(实例)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-11T00:19:00.650

我检查了`weka`文档，但没有看到支持将字母提取为特征。这意味着该`weka`函数可能需要一个空格或标点符号来将每个特征与相邻的特征分隔开。如果是这样，那么对“L”、“C”和“D”的搜索将被解释为三个单独的单字母词，并解释为什么找不到它们。

`\n`如果您认为是这样，您可以在摄取之前尝试将文本拆分为由 或 空格分隔的单个字符。

# ruby-on-rails - 同时设计 gem 跳过确认和通过电子邮件跳过确认

> ID：13818280
> 
> 赞同：14
> 
> 时间：2012-12-11T10:28:04.237
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, rubygems

我正在使用设计 gem，在创建用户时我想跳过确认！并跳过确认电子邮件，例如：

```
User.create(:first_name => "vidur", :last_name => "punj").confirm!.skip_confirmation! 
```

但它只跳过确认，不跳过发送确认电子邮件。任何人都可以给我一个跳过两者的想法。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-11T10:43:27.607

您需要致电skip_confirmation！在保存记录之前。

尝试

```
user = User.new(:first_name => "blah")
user.skip_confirmation!
user.save 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-11T10:43:56.860

您在 skip_confirmation! 之前调用 User.create，您需要稍后调用 User.new 和 user.save。

尝试

```
 user = User.new(:first_name => "vidur", :last_name => "punj")
  user.skip_confirmation!
  user.save! 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-11T10:56:24.353

```
Got the solution:
 @user=User.new(:first_name => "vidur", :last_name => "punj")
 @user.skip_confirmation!
 @user.confirm!
 @user.save 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-08-10T14:05:25.580

设置 confirm_at 字段

```
User.create!(confirmed_at: Time.now, email: 'test@example.com', ...) 
```

在种子中有用.rb

```
User.create_with(name: "Mr T", company: "Comp X", password: 'rubyrubyruby', password_confirmation: 'rubyrubyruby', confirmed_at: Time.now).find_or_create_by!( email: 'test@example.com') 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-04-17T09:44:19.177

如果您对`skip_confirmation!`在控制器中编写方法的位置感到困惑，因为您尚未生成设计控制器，那么：

把它写在你的**`User`**模型中

```
before_create :my_method

def my_method
 self.skip_confirmation!
end 
```

现在只需使用：

```
user = User.new(:first_name => "Gagan")
user.save 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-01-08T17:07:13.663

`after_create: :skip_confirmation_notification` -[在这里检查](https://github.com/plataformatec/devise/blob/8c9cc8d355825e2b7ae0b4dcdedee518831e3338/lib/devise/models/confirmable.rb)

如果您只想在某些条件下跳过确认通知，请使用 proc

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-12-11T10:44:42.247

如果您根本不需要确认，您可以删除`:confirmable`模型中的符号。

# php - PDOException 错误 - Drupal 7

> ID：13818285
> 
> 赞同：0
> 
> 时间：2012-12-11T10:28:13.487
> 
> 标签：php, mysql, drupal-7

当我创建图像内容类型并添加内容时，出现此错误：

```
DOException: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'base.12' in 'where clause': SELECT base.tid AS tid, base.vid AS vid, base.name AS name, base.description AS description, base.format AS format, base.weight AS weight, v.machine_name AS vocabulary_machine_name FROM {taxonomy_term_data} base INNER JOIN {taxonomy_vocabulary} v ON base.vid = v.vid WHERE (base.12 = :db_condition_placeholder_0) ; Array ( [:db_condition_placeholder_0] => 12 ) in DrupalDefaultEntityController->load() (line 196 of /Users/httdocs/includes/entity.inc). 
```

但我不使用分类术语、词汇等......我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:35:07.707

PGSQL 查询，如：-

```
 SELECT base.tid AS tid, base.vid AS vid, base.name AS name, base.description AS description, base.format AS format, base.weight AS weight, v.machine_name AS vocabulary_machine_name FROM taxonomy_term_data.base INNER JOIN taxonomy_vocabulary.v ON base.vid = v.vid WHERE (base.name = v.machine_name) ; 
```

在您通过base.12的查询中，没有名称为12的列。因此它显示错误

# matlab - “/”如何真正适用于两个行向量？

> ID：13818288
> 
> 赞同：2
> 
> 时间：2012-12-11T10:28:21.180
> 
> 标签：matlab

我有以下基本观察：

```
[1 2 3 4]/[2 4 6 8] % output: 0.5
[1 2 3 4]/[2 3 4 5] % output: 0.7407
([1 2 3 4]*[2 4 6 8] % error of course) 
```

它不会将我视为 A*inv(B) 类型的操作（如果我没记错的话，也不会像时间序列上的 mrdivide 那样工作，就像 [1 2 3 4]./[2 4 6 8] ）。

现在，我的问题是，“/”在两个长度相同的行向量上定义了什么操作？

* * *

更新：
@user1884905 给出了两个行向量上的 a/b 可能会最小化的想法`norm(b*x - a)`。到目前为止，它似乎适用于一些数字测试。如果是真的，请您在这背后提供一些官方参考吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T10:37:54.563

是的，看来我是对的。来自[MathWorks mrdivide](http://www.mathworks.se/help/matlab/ref/mrdivide.html)

“如果 A 是 m ~= n 的 m×n 矩形矩阵，并且 B 是具有 n 个元素的行向量或具有 n 列的矩阵，则 x = B/A 返回系统的最小二乘解方程 x*A = B。"

# ruby-on-rails - IRB 控制台中未定义的方法“更改”日期时间

> ID：13818294
> 
> 赞同：1
> 
> 时间：2012-12-11T10:28:58.497
> 
> 标签：ruby-on-rails, ruby, jruby

change(:hour => 1) 在 Rails 控制台中工作正常

```
irb(main):004:0> dt = DateTime.now
=> Mon, 10 Dec 2012 15:52:01 -0800
irb(main):005:0> _.change(:hour => 1)
=> Mon, 10 Dec 2012 01:00:00 -0800
irb(main):006:0>
irb(main):007:0> dt.class
=> DateTime
irb(main):008:0> 
```

但在 irb 中抛出“未定义的方法‘更改’”

```
irb(main):008:0> require 'active_record'
=> true
irb(main):009:0> dt = DateTime.now
=> #<DateTime: 2012-12-10T15:55:14-08:00 (10611097185737/4320000,-1/3,2299161)>
irb(main):010:0> dt.class
=> DateTime
irb(main):011:0> dt.change(:hour => 1)
NoMethodError: undefined method `change' for #<DateTime:0x53e20a9a>
        from (irb):11:in `evaluate'
        from org/jruby/RubyKernel.java:1070:in `eval'
        from org/jruby/RubyKernel.java:1395:in `loop'
        from org/jruby/RubyKernel.java:1178:in `catch'
        from org/jruby/RubyKernel.java:1178:in `catch'
        from C:\PF\jruby-1.7.0.preview2\bin\irb:13:in `(root)'
irb(main):012:0> 
```

任何建议如何使它工作？

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-11T10:41:27.133

要获得与日期时间相关的功能，只需`require 'active_support/time'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:35:44.460

[Change 是一种积极的支持方法](http://apidock.com/rails/DateTime/change)，因此要定义它，您首先必须要求该库：

```
>> require 'active_support/all'
=> true
>> dt = DateTime.now
=> Tue, 11 Dec 2012 11:34:54 +0100
>> dt.change(:hour => 1)
=> Tue, 11 Dec 2012 01:00:00 +0100 
```

# code-analysis - CA2000 微软可靠性

> ID：13818296
> 
> 赞同：0
> 
> 时间：2012-12-11T10:29:01.257
> 
> 标签：code-analysis

```
 Warning CA2000 : Microsoft.Reliability : In method 'ProtocolHelper<TClass, TClassType>.ProcessApplicanceData(object)', call System.IDisposable.Dispose on object '<>g__initLocal5' before all references to it are out of scope. 
```

下面是代码，上面是我得到的警告。

```
 public WCFServiceClient(Callback callback, WDaaSAuthMode authMode)
    : base()
{
    AuthMode = authMode;
    CallbackInstance = callback;
}
public T Client
{
    get
    {
        if (_client == null)
        {
            channelFactory = new DuplexChannelFactory<T>(CallbackInstance, EndPoint);

                return CreateClient();

        }
        return _client;
    }
}
public Callback CallbackInstance { get; set; } 
```

}

在很多情况下，我都收到了上述警告。我尝试了“使用”和“尝试，最后”，但没有解决我的问题。谁能帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T20:34:38.583

您是否确保不分析生成的代码？该变量名称听起来像是编译器生成的。

![在此处输入图像描述](../Images/a79eb256cd0c37855e8da2dffae751ad.png)

# java - HangMan RandomString 类

> ID：13818297
> 
> 赞同：-1
> 
> 时间：2012-12-11T10:29:04.580
> 
> 标签：java, eclipse

> **可能重复：**
> [Java RandomString 类](https://stackoverflow.com/questions/13817886/java-randomstring-class)

以下是方向：

创建一个`RandomString`类并实现以下内容：

1.  创建一个名为guess_phrases.txt 的文件，其中包含要在Hangman 游戏中猜测的短语。该文件每行有一个猜测短语。

2.  接收文件名以从中获取字符串值的构造函数。构造函数应该从文件中读入短语并将它们存储起来以备后用。

3.  从文件中返回随机字符串值的方法；在使用文件中的所有猜测短语之前，不应重复此值。

创建一个 main 方法，通过重复调用 next 并打印结果来测试 next 是否正常工作——您不应有任何重复，并且短语不应与文件中的顺序相同。

我用随机短语创建了一个名为*guess_phrases.txt的文件。*当我运行这个我得到一个错误，它也不是随机打印的，这是为什么？我怎样才能解决这个问题 ？

线程“main”java.lang.IllegalArgumentException 中的错误异常：n 必须为正

```
at java.util.Random.nextInt(Unknown Source)
at RandomString.next(RandomString.java:32)
at RandomString.main(RandomString.java:40) 
```

这就是我在 RandomString 类中所拥有的

```
public class RandomString {

    Random random = new Random();
    ArrayList<String> guessPhrases = new ArrayList<String>();
    Scanner fileScan;

    public RandomString(String guessPhrases) throws FileNotFoundException {

        // create a Scanner object to read from the file
        fileScan = new Scanner(new File("guess_phrases.txt"));

        // add all of the phrases from the file into the ArrayList
        while (fileScan.hasNext()) {

            String line = guessPhrases.nextLine(); // get input
            System.out.println(line); // print line
            guessPhrases.add(line); // add line to array list
        }
    }

    public String next() {
        int i = random.nextInt(guessPhrases.size());
        return guessPhrases.get(i);
    }

    public static void main(String[] args) {

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:33:58.050

从[**随机 API**](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html#nextInt%28%29)

你可以看到，如果你将一个负数或零传递给 nextInt(pos) 它将抛出一个**IllegalArgumentException**

        int i = random.nextInt(guessPhrases.size());

绝对`guessPhrases.size()`是**零**，因此是异常

# c# - 如何检查反射类型是否为数组

> ID：13818298
> 
> 赞同：3
> 
> 时间：2012-12-11T10:29:05.330
> 
> 标签：c#, arrays, reflection, typeof

我正在使用反射读取 xml 文件并不断遇到错误，告诉我我无法将字符串转换为字符串 []（我不想这样做！）我认为我的问题的原因是我'无法判断对象的类型是否为数组。下面是我目前正在使用的（不能正常工作），但我也尝试过使用`if(mi[i].GetType() == typeof(string[]))`它也不起作用..

```
MemberInfo[] mi = objType.GetProperties();
for (int i = 0; i < mi.Length; i++)
{
  if (mi[i].GetType().IsArray)
  {
  }
  else
  {
   //Code path is running through here
  } 
```

文件被正确读入..

编辑：我想我最好将结构添加到我的`objType`以便更好地解释..

`objType`是一个包含 string[] 变量的类，在这种情况下称为`mi[i]`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T10:33:38.380

您需要使用`PropertyType`而不是获取属性的基础类型`GetType()`。`MemberInfo`

```
var mi = objType.GetProperties();
for (int i = 0; i < mi.Length; i++)
{
    var type = mi[i].PropertyType;
    //Check for string array
    if (type.IsArray && type.GetElementType() == typeof(string))
    {
    }
} 
```

或者你可以做

```
if(type == typeof(string[]))
{
} 
```

# vim - 使用 VIM 制作首字母缩略词？

> ID：13818301
> 
> 赞同：3
> 
> 时间：2012-12-11T10:29:25.313
> 
> 标签：vim

我有一个包含很多全名的文件，例如 ....

```
Light Machine Gun
Statistical Analysis System
etc 
```

我想捕获一行中每个单词的第一个字符，并想制作一个首字母缩写词。例如轻机枪将是LMG等。我想在VI编辑器中将其记录为宏并在整个文件中运行它。如果有人可以帮助我，那会很棒吗？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T10:35:48.290

假设每行一个名称并且单词是空格分隔的，则以下工作：

```
%s/\(\w\)\w*\ */\1/g 
```

如果您还想将每个字母大写，请添加一个大写标志 ( `\u`)：

```
%s/\(\w\)\w* */\u\1/g 
```

“非常神奇”的版本（见`:help /magic`）：

```
%s/\v(\w)\w*\s*/\u\1/g 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T10:38:54.327

Vim 可以定义首字母缩写词，称为缩写，说你想要

```
Light Machine Gun Statistical Analysis System -> LMGSAS 
```

只需输入：

```
:ab LMGSAS Light Machine Gun Statistical Analysis System 
```

每当您键入 LMGSAS 时，它都会为您替换。

用于`:ab`列出所有缩写，取消缩写`una xxxxx`。最后`abc`清除一切。

编辑：我误解了你的问题，如果你想去的话 - > 缩写，那么`s/\(\w\)\w*\s*/\1/g`Thor 建议的正则表达式可以正常工作。

# java - ZK Listbox 中的纯 Java 绑定与 itemRenderer

> ID：13818305
> 
> 赞同：0
> 
> 时间：2012-12-11T10:29:35.737
> 
> 标签：java, binding, listbox, zk

我想在 Java 类中使用数据绑定而不是

> @绑定

**使用Listbox**中的每个**ListCell**。我试过这个例子

 **我的 ZUL 文件...

```
<zk>
  <window border="normal" title="hello" apply="org.zkoss.bind.BindComposer"
        viewModel="@id('vm') @init('com.test.binding.TestRenderer')" >
     <button label="ClickMe" id="retrieve"
                        onClick="@command('onOK')">
                    </button>
    <div height="800px">
      <listbox model="@load(vm.model)" itemRenderer="@load(vm.itemRenderer)" vflex="true" multiple="true"/>
    </div>
  </window>
</zk> 
```

我的 Java 类或 ViewController .....

```
package com.test.binding;

import java.util.ArrayList;
import java.util.Collection;
import java.util.List;

import org.zkoss.bind.annotation.AfterCompose;
import org.zkoss.bind.annotation.Command;
import org.zkoss.bind.annotation.ContextParam;
import org.zkoss.bind.annotation.ContextType;
import org.zkoss.zk.ui.Component;
import org.zkoss.zkplus.databind.AnnotateDataBinder;
import org.zkoss.zkplus.databind.Binding;
import org.zkoss.zkplus.databind.BindingListModelList;
import org.zkoss.zul.ListModel;
import org.zkoss.zul.ListModelList;
import org.zkoss.zul.Listcell;
import org.zkoss.zul.Listitem;
import org.zkoss.zul.ListitemRenderer;
import org.zkoss.zul.Textbox;

public class TestRenderer {

    ListModelList model = new ListModelList();
    private AnnotateDataBinder binder;

    @AfterCompose
    public void afterCompose(@ContextParam(ContextType.VIEW) Component view) {
        binder = new AnnotateDataBinder(view);
     List persons = new ArrayList();    
     model.add(new Person("David", "Coverdale"));
     model.add(new Person("Doug", "Aldrich"));
     model.add(new Person("Reb", "Beach"));
     model.add(new Person("Michael", "Devin"));
     model.add(new Person("Brian", "Tichy"));

        binder.loadAll(); 

    }

    public void setModel(ListModelList model) {
        this.model = model;
    }

    public ListModel getModel() {

        return model;
    }

    // method for ZK 6
    public ListitemRenderer getItemRenderer() {
        ListitemRenderer _rowRenderer = null;
        if (_rowRenderer == null) {

            _rowRenderer = new ListitemRenderer() {
                public void render(final Listitem item,   Object object,
                        int index) throws Exception {
                    final Person dataBean = (Person) object;

                    binder.bindBean(item.getId() , dataBean);

                    Listcell cell = new Listcell();
                    Textbox name = new Textbox();
                    name.setValue(dataBean.getFirstName());
                    System.out.println(item.getId()+ "------------------>"+item.getId() + ".name");
                    //binder.addBinding(name, "value", item.getId()+i + ".name", null, null, "both", null, null, null, null);
                    //binder.addBinding(name, "value",item.getId() + ".name", new String[] {}, "none", "both", null);
                    cell.appendChild(name);
                    //cell.addAnnotation(cell, "bind", null);
                    cell.setParent(item);

                }
            };
            binder.saveAll();
            binder.loadAll();
        }
        return _rowRenderer;
    }
    @Command
    public void onOK() {
        binder.saveAll(); //load Inputfields from Form, Constraints will be performed

        binder.loadAll(); 
       Collection<Binding> test =  binder.getAllBindings();
        System.out.println(model);
      }
    public class Person {
        private String firstName;
        private String lastName;

        public Person(String fn, String ln) {
            setFirstName(fn);
            setLastName(ln);
        }

        public String getFirstName() {
            return firstName;
        }
        public void setFirstName(String fn) {
            firstName = fn;
        }

        public String getLastName() {
            return lastName;
        }
        public void setLastName(String ln) {
            lastName = ln;
        }

    }

    @Command
     public void clickMe(){
        BindingListModelList blml =  (BindingListModelList) getModel();

        for (Object object : blml) {
          System.out.println(Integer.parseInt((String) object));
        }
    }
} 
```

任何人都可以给我演示示例绑定应该如何使用

> getItemRendered()

在**列表框中**

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T03:59:35.773

您正在尝试混合不同的范例。您想使用数据绑定，尤其是 MVVM 样式，但还要在此过程中引入您的自定义渲染器。即使这有效，我认为这是一个非常糟糕的做法。要么使用纯 MVVM 数据绑定，将视图与模型分开，只在视图中定义绑定，要么使用纯 MVC 并使用你自己的渲染器来渲染你想要的模型数据。

数据绑定的全部意义在于让 binder 根据数据绑定注释来处理渲染/更新组件状态。

在这里专门讨论您正在使用的示例代码`org.zkoss.bind.BindComposer`，它将自动初始化一个活页夹实例，然后您还显式地实例化一个单独`AnnotateDataBinder`的 in，`@AfterCompose`因此这两者之间会有冲突。

我的建议是通过在您的视图中引入纯 MVVM 数据绑定，`<template>`并让 MVVM 绑定器使用`@Bind`或`@Load`注释呈现此模板，或者使用纯 Java 样式的 MVVM 数据绑定，如“ [Java 中的 MVVM](http://books.zkoss.org/wiki/Small_Talks/2012/August/MVVM_In_Java) ”文章中所述

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T17:10:37.727

在我看来，将 ListitemRenderer 与 MVVM 一起使用并没有那么糟糕，有时它可以成为 zul 页面和 ViewModel 之间的“桥梁”，并且可以将其视为组件的一部分（因为一旦分配了模型，列表框将使用默认渲染器如果您不分配模板或自定义渲染器，则渲染项目）（请参阅[列表模型](http://books.zkoss.org/wiki/ZK_Developer%27s_Reference/MVC/Model/List_Model)）。如果默认渲染器只分配模型和渲染项目没有什么不好，那么将模型和自定义渲染器都分配给渲染项目也没什么不好。

让我们首先定义什么是“好”： -- zul 文件不需要知道 ViewModel 是如何工作的，只需根据需要询问数据和触发命令。-- ViewModel 不需要知道 zul 页面中的任何内容，只需提供数据并处理一些预定义的事件。

现在考虑一个简单的场景，就像官方文档中描述的那样： [Performing Actions on Events](http://books.zkoss.org/wiki/ZK%20Essentials/Displaying%20information%20using%20the%20Listbox%20and%20MVVM/Performing%20Actions%20on%20Events)

看到这条线

```
onClick="@command('deleteOrder', cartItem=cartItem)" 
```

这条线

```
public void deleteOrder(@BindingParam("cartItem") CartItem cartItem) 
```

在这种情况下，zul 页面需要知道在事件触发时将参数带到 deleteOrder 命令，甚至必须知道参数应该在 ViewModel 中分配名为 cartItem 的变量。另一方面，ViewModel 需要检索从 zul 页面传递的参数。

这显然不是“好”的情况。

使用 ListitemRenderer，比方说 ShoppingcartOrderlistItemRenderer，我们可以简单地将带有所需数据的事件发布到 Listbox（例如 onDeleteOrder），然后使其变为

```
<listbox onDeleteOrder="@command('deleteOrder')" ... 
```

和

```
public void deleteOrder(@ContextParam(ContextType.TRIGGER_EVENT) DeleteOrderEvent event) {
    getShoppingCart().remove(event.getProductId());
} 
```

依赖事件而不是依赖 zul 页面中定义的参数，我认为这更健壮。

最后，还是不得不说，只是个人意见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T06:42:56.243

@subodh

您也可以尝试在 ListitemRenderer 中添加 EventListener 并将一些带有所需数据的自定义事件传递给列表框，然后将该自定义事件绑定到 ViewModel，请参考 [github 上的示例项目](https://github.com/benbai123/ZK_Practice/tree/master/Pattern/MVVM/RendererWithMVVM)和[在线演示](http://screencast.com/t/XZNxVOzbs)

编辑：

我的博客上的相关帖子：[ZK Listbox: Event Processing with Renderer and MVVM](http://ben-bai.blogspot.tw/2012/12/zk-listbox-event-processing-with.html)**

# android - Android Phonegap 2.2 压缩图像时出错

> ID：13818313
> 
> 赞同：0
> 
> 时间：2012-12-11T10:29:52.917
> 
> 标签：android, cordova, camera

我正在使用 phonegap 2.2 (cordova-2.2.0.js) 开发一个应用程序。我正在尝试捕捉图像。当我按下上传按钮时，相机打开，我拍照，然后出现一个带有两个选项的屏幕，丢弃和保存。如果我单击保存，应用程序将返回到我的原始屏幕，并且我收到错误**错误压缩图像。**

我使用了 phonegap 文档中的代码：

[http://docs.phonegap.com/en/2.2.0/cordova_camera_camera.md.html#cameraOptions](http://docs.phonegap.com/en/2.2.0/cordova_camera_camera.md.html#cameraOptions)

```
document.addEventListener("deviceready", onDeviceReady, false);

function onDeviceReady() {
alert("device ready");

function onSuccess(imageData) {
    var image = document.getElementById('myImage');
    image.src = "data:image/jpeg;base64," + imageData;
}

function onFail(message) {
    alert('Failed because: ' + message);
}
var options = {
        quality : 100,
        destinationType : Camera.DestinationType.DATA_URL,
        sourceType : Camera.PictureSourceType.CAMERA, 
        encodingType: Camera.EncodingType.JPEG,
        saveToPhotoAlbum: true

}
$("#takePicture").click(function(){
    navigator.camera.getPicture(onSuccess, onFail, options); 

}) 
```

}

我尝试设置 destinationType 的选项：Camera.DestinationType.FILE_URI，

并且错误更改为**Error capture image**并且 logcat 显示

12-11 12:23:13.965: W/System.err(2419): java.io.FileNotFoundException: /mnt/sdcard/Android/data/ro.iss.my.package/cache/.Pic.jpg: 打开失败: ENOENT（没有这样的文件或目录）

在第一种情况下，logcat 没有显示任何错误。

```
12-11 12:27:13.990: D/DroidGap(3618): Paused the application!
12-11 12:27:13.990: D/CordovaWebView(3618): Handle the pause
12-11 12:27:14.930: W/IInputConnectionWrapper(3618): showStatusIcon on inactive InputConnection
12-11 12:27:22.105: I/System.out(3618): Not a DRM File, opening notmally
12-11 12:27:22.160: D/dalvikvm(3618): GC_EXPLICIT freed 7823K, 38% free 13168K/21191K, paused 3ms+2ms
12-11 12:27:22.160: W/CursorWrapperInner(3618): Cursor finalized without prior close()
12-11 12:27:22.160: D/DroidGap(3618): Resuming the App
12-11 12:27:22.195: W/CursorWrapperInner(3618): Cursor finalized without prior close()
12-11 12:27:22.195: W/CursorWrapperInner(3618): Cursor finalized without prior close() 
```

我正在两台设备上的 android 4.0.3 上对此进行测试。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:05:08.080

您的权限列表中缺少 WRITE_EXTERNAL_STORAGE。没有它，应用程序将无法写入 jpg 文件。

# html - 带有箭头的 html 框

> ID：13818320
> 
> 赞同：3
> 
> 时间：2012-12-11T10:30:21.800
> 
> 标签：html, css, css-shapes

一位客户请求在他的网站上显示如下所示的框

![盒子外观](../Images/fdf354544d9e18009860434a6a9fbd48.png)

如您所见，盒子左侧有一个形状独特的小箭头。

我已经尝试了一切并访问了很多链接，但我无法设计它。

问题是，这个盒子会有不同的大小，并且该图像应该始终位于盒子的中心并且应该隐藏一部分边框（如您所见）

请帮忙，我在这里没有选择。

谢谢你，亚瑟

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-11T10:41:52.467

在这里我为你做了小提琴：

```
<div class="box"></div>

.box{
    border:solid 1px black;
    position:relative;
    display:block;
    height:100px;
    width:100px;
    margin-left:5px;
}
.box:before{
    content:"";
    display:inline-block;
    position:absolute;
    border:10px solid black;
    border-color:transparent transparent transparent black;
    top:40px;
}
.box:after{
    content:"";
    display:inline-block;
    position:absolute;
    border:9px solid white;
    border-color:transparent transparent transparent white;
    top:41px;
    left:-1px;
} 
```

在这里[摆弄 http://jsfiddle.net/y5dZj/](http://jsfiddle.net/y5dZj/)

正如其他人所说`:after`和`:before`使用的那样

-edited：如果您想在旧浏览器中完全兼容，请不要使用转换。我的例子甚至可以在 IE8 中工作（不确定 7）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T10:37:21.057

习惯了这个

**CSS**

```
 div{
    position:relative;
      width:200px;
      height:200px;
      background:red;
    }
    div:after{
    content:'';
      position:absolute;
      left:-10px;
      top:50%;
      margin-top:-10px;
      width:20px;
      height:20px;
      background:#fff;
      transform: rotate(-45deg);
  -moz-transform: rotate(-45deg);
  -webkit-transform: rotate(-45deg);
    } 
```

**HTML**

```
<div></div> 
```

**[演示](http://tinkerbin.com/ZJtn8V3V)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T10:36:11.447

这是您可以做到的一种方法：http: [//jsfiddle.net/vKY3x/](http://jsfiddle.net/vKY3x/)

```
<div>
    <span></span>
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer luctus varius felis, sit amet malesuada urna euismod convallis. Donec at diam eros
</div>

div {
    position:relative;
    width:300px;
    padding:30px;
    border:1px solid #ccc;
}

div span {
    display:block;
    width:20px;
    height:20px;
    background:#666;
    position:absolute;
    left:-1px;
    top:50%;
    margin-top:-10px;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T10:52:17.210

**HTML**

```
<div></div>​ 
```

**CSS**

```
div {
    margin:20px;
    height: 120px;
    width: 250px;
    background-color: #ededed; 
    border:#ccc solid 1px;
    position:relative;
}
div:after{
    content:'';
    width:20px;
    height:20px;
    background:#fff;
    position:absolute;
    -moz-transform:rotate(45deg);
    -webkit-transform:rotate(45deg);
    transform:rotate(45deg);
    top:42%;
    left:-11px;
    border-right:#ccc solid 1px;
    border-top:#ccc solid 1px;
} ​ 
```

**[现场演示](http://jsfiddle.net/rLZkf/26/)**

# database - 高访问可扩展多媒体数据库

> ID：13818321
> 
> 赞同：0
> 
> 时间：2012-12-11T10:30:21.810
> 
> 标签：database, nosql, relational-database, multimedia

我想对为我的系统选择正确的数据库提出一些建议。我在这里处理多媒体数据（图像、视频、音频、动作......），并且应该有大量用户访问我的数据库，例如 50000 个用户。

数据是从其他存储设备实时收集的，应该是可扩展的，以及访问系统的用户数量。

最初的想法是使用非 SQL 数据库，例如 RIAK 或 Cassandra 以实现可扩展性，但我不确定在这种情况下使用多媒体数据库是否会更好。而且我实际上没有使用非 SQL 数据库的经验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:52:37.023

不确定是否存在“多媒体数据库”之类的东西。您可以将元数据存储在标准关系数据库中，并将 blob 存储在文件系统中。这是一个非常简单的方案，可以让你走得很远。

您可以使用分布式“NoSQL”风格的 blob 数据库而不是文件系统。这对于横向扩展和维护可能会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T18:55:34.037

请将您的媒体数据放在文件系统中或将其托管在 cdn 中。数据库没有进行多媒体交付所需的流优化。

不要对元数据使用 sql - 谁在什么轨道上，行为分析，成本，轨道播放次数。那样的话，它真的只是另一个数据库，所以选择满足你的 api 需求的数据库，并扩展能力。插件：我公司的数据库，aerospike，值得一看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T06:53:37.843

理想情况下，您需要一个可以横向扩展的解决方案。

要为不断增长的最终用户数量和不断增加的内容维护响应式解决方案，您希望能够在不使系统脱机的情况下添加系统并跨系统分配负载和内容。

分布式 nosql 解决方案应该运行良好。它可以保存有关内容的元数据。任何未针对查询进行搜索/比较的内容，例如音频、视频、图像等，都应该放在文件中。

Nosql 通常具有相对更好的查找性能。即给定一个键，查找值。如果您的应用程序具有不是简单查找的查询，那么 SQL 可能会更好。

# java - 附加到 FTP 中的文件

> ID：13818323
> 
> 赞同：-1
> 
> 时间：2012-12-11T10:30:30.133
> 
> 标签：java, ftp

我需要将数据附加到现有的 CSV 文件中。CSV 文件存在于 FTP 服务器上。我们有一个名为的类`FileWriter`，它帮助我们将数据附加到本地系统中的 CSV 文件中，但不在 FTP 服务器中的文件中。如何将数据附加到远程 FTP 服务器上的 CSV 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:48:06.097

最简单的方法是使用 FTP 客户端，例如[Commons Net](http://commons.apache.org/net/)中的客户端。一个有用的方法是`appendFileStream`在类[FTPClient](http://commons.apache.org/net/api-3.2/org/apache/commons/net/ftp/FTPClient.html)中。

# java - 在大型 CSV 中查找行的最简单、最快的方法

> ID：13818327
> 
> 赞同：2
> 
> 时间：2012-12-11T10:30:44.033
> 
> 标签：java, search, csv, filter

我有几个 CSV 文件，我需要加载它们并按列值搜索行。有人建议使用 OpenCSV 项目来加载 CSV。但我不知道这是否是最好的方法。OpenCSV 是否提供一些搜索/过滤实用程序？

有没有更好的方法来做我需要的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T10:33:43.123

您可以将 CSV 文件中的数据加载到您喜欢的 SQL 引擎中，例如 MySQL 或 SQLite，并使用 SQL 方便快捷地进行过滤。这是一项常见任务，因此数据库已经准备好使用工具从 CSV 文件中导入数据，这就是您在 SQLite 中可以做到的方式：[http ://www.sqlite.org/cvstrac/wiki?p=ImportingFiles](http://www.sqlite.org/cvstrac/wiki?p=ImportingFiles)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T13:41:25.747

如果您的 CSV 文件太大而无法保存在内存中，并且您不想先将所有内容存储在数据库中（这将是一个乏味的磁盘到内存到磁盘的操作），那么似乎没有人提到另一种方法：流媒体。

该方法包括从文件中读取一些行，对其进行处理，然后丢弃与您的搜索不匹配的行。例如，您可以使用 Apache commons FileUtils 来执行此操作。它可能是一些现有的 CSV API 提供的，我没有检查过。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T10:35:59.957

像[Apache Commons CSV](http://commons.apache.org/csv/apidocs/index.html)这样的东西只会给你一个二维字符串数组。我怀疑任何解决方案都会给你更多的东西（在 CVS 文件中没有类型/模式信息），我怀疑这些结果的精心设计的循环就是你所需要的。这将是*最简单*和*最快*的（根据要求）。

如果您想做更多事情，您可以在 JVM 中运行标准 Java 提供的[JavaDb 数据库](http://www.oracle.com/technetwork/java/javadb/index.html)，将结果加载到该数据库中，并在没有外部数据源/服务的情况下执行 SQL 查询。

请注意，如果您加载相当大的 CSV，内存可能会成为问题，但这些有多大？现在内存*很*便宜。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T10:34:03.820

使用嵌入式数据库，将 CSV 与搜索功能分开。

# php - 日期函数PHP中的阿拉伯月份

> ID：13818328
> 
> 赞同：1
> 
> 时间：2012-12-11T10:30:45.613
> 
> 标签：php, datetime, arabic

我有变量包含日期，我想用阿拉伯语打印这个日期。日期（阿拉伯语月份）我该怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-11T10:56:34.240

尝试这个：

```
$months = array(
    "Jan" => "يناير",
    "Feb" => "فبراير",
    "Mar" => "مارس",
    "Apr" => "أبريل",
    "May" => "مايو",
    "Jun" => "يونيو",
    "Jul" => "يوليو",
    "Aug" => "أغسطس",
    "Sep" => "سبتمبر",
    "Oct" => "أكتوبر",
    "Nov" => "نوفمبر",
    "Dec" => "ديسمبر"
);

$your_date = "2012-12-25"; // for example

$en_month = date("M", strtotime($your_date));

$ar_month = $months[$en_month];

echo $en_month . " = " . $ar_month; 
```

这将输出：`Dec = ديسمبر`它取决于`$your_date`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T10:36:00.547

添加这个：

```
setlocale (LC_ALL, "ar_AE"); 
```

然后打印你的日期。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T10:55:04.603

您可以这样安装和使用`IntlDateFormatter`：

```
$formatter = new IntlDateFormatter('ar_SA',IntlDateFormatter::FULL,IntlDateFormatter::FULL);
$date = new DateTime();//now;
echo $formater->formate($date);//will print you something in arabic with the order that is used localy instead of english order. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T10:33:12.373

为什么不检查英文月份，然后打印对应的阿拉伯文？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T10:51:38.623

```
header('Content-Type: text/html; charset=utf-8');
$standard = array("0","1","2","3","4","5","6","7","8","9");
$eastern_arabic_symbols = array("٠","١","٢","٣","٤","٥","٦","٧","٨","٩");
$current_date = date('d').'-'.date('m').'-'.date('Y');
$arabic_date = str_replace($standard , $eastern_arabic_symbols , $current_date); 
```

你可以试试`str_replace`功能

# asp.net-mvc - ASP.NET MVC - ViewModel 验证最佳实践

> ID：13818334
> 
> 赞同：1
> 
> 时间：2012-12-11T10:31:03.387
> 
> 标签：asp.net-mvc, entity-framework, viewmodel

假设我得到了以下实体框架“Ruimte”模型：

```
public class Ruimte
{
    #region Constructor

    public Ruimte()
    {
        Kenmerken = new List<Kenmerk>();
    }

    #endregion

    #region Properties

    [Key]
    public int Id
    {
        get;
        set;
    }

    [Required]
    public string Naam
    {
        get;
        set;
    }

    public List<Kenmerk> Kenmerken
    {
        get;
        set;
    }

    #endregion
} 
```

“Kenmerk”模型如下所示：

```
public class Kenmerk
{
    #region Properties

    [Key]
    public int Id { get; set; }

    public KenmerkOptie KenmerkOptie
    {
        get;
        set;
    }

    [Required]
    public int KenmerkOptieId
    {
        get;
        set;
    }

    [Required]
    public string Waarde
    {
        get;
        set;
    }

    [Required]
    public int RuimteId
    {
        get;
        set;
    }

    #endregion
} 
```

在我的 Ruimte/Create 视图中，有 2 个字段用于添加“Kenmerk”。现在，如果没有 KenmerkOptieId 或 Waarde，“Kenmerk”就无法进入数据库。因此，由于验证，每次我尝试发布表单时，视图都会拒绝提交。虽然我希望“Ruimte”拥有或不拥有“Kenmerk”。

因此，我采用的解决方案是拥有一个具有所需属性“名称”的“RuimteCreateViewModel”以及另一个名为“KenmerkCreateViewModel”的 coplex 类的列表。现在在最后一个视图模型中，不需要 KenmerkOptieId 和 Waarde，所以我终于可以提交表单了。

尽管我认为这不是“跳过”所需字段验证器的最佳解决方案。那么当数据库验证与视图验证不同时，您的“最佳实践”是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:46:10.260

我认为 xVal - ASP.NET MVC 的验证框架，请参阅[http://blog.stevensanderson.com/2009/01/10/xval-a-validation-framework-for-aspnet-mvc/](http://blog.stevensanderson.com/2009/01/10/xval-a-validation-framework-for-aspnet-mvc/)对实体非常有用您正在尝试开发的框架模型。特别是使用强制服务器端验证，它允许您选择在属性设置器期间验证简单的属性格式化规则。有关说明，请参阅[http://blog.stevensanderson.com/2008/09/08/thoughts-on-validation-in-aspnet-mvc-applications/](http://blog.stevensanderson.com/2008/09/08/thoughts-on-validation-in-aspnet-mvc-applications/)。

# javascript - 所需格式的javascript日期对象

> ID：13818345
> 
> 赞同：0
> 
> 时间：2012-12-11T10:31:39.300
> 
> 标签：javascript

在 javascript 中使用 toLocaleFormat 方法，是否可以将日期格式化为月名日、年时间，例如 2012 年 1 月 15 日 3:57？执行此任务的任何其他可能方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:46:00.217

我认为您可能必须使用库，或者如果您使用的是 jQuery UI，则 datepicker 具有内置的格式化工具。否则，您必须手动执行此操作：

```
var date = new Date();
$(element).append(parseDate(date));

function parseDate(d) {
    var monthNames = [ "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December" ],
        d2 = monthNames[d.getMonth()] +' '+ d.getDate() +', '+d.getFullYear() +' '+d.getHours() +':'+d.getMinutes();
    return d2;
} 
```

[**小提琴**](http://jsfiddle.net/rnnS8/6/)

我做了一个功能让它更容易，至于本地设置，你必须自己弄清楚，但 toLocaleFormat 是一种非标准方法，我的浏览器（chrome）不支持它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T10:51:39.520

~~使用 toLocaleFormat~~

 ~~```
var today=new Date();    
var date = today.toLocaleFormat("%B %e, %Y %M:%S"); 
```~~  ~~由于它是非标准的[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toLocaleFormat](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toLocaleFormat)，请尝试其他选项。

使用[moment.js](http://momentjs.com/)，您可以：

```
moment(new Date()).format('MMMM, YYYY h:mm') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T10:39:15.547

我将该`DateJS`库用于特定日期的操作，效果很好。

您的示例将转化为

```
var d = Date.parse('January 15, 2012 3:57');
alert(d.toString('MMMM d, yyyy')); 
```

图书馆主页[在这里](http://www.datejs.com/)~~

# c++ - Qt C++ 删除 QList 中的 float** 元素

> ID：13818351
> 
> 赞同：0
> 
> 时间：2012-12-11T10:31:56.133
> 
> 标签：c++, arrays, qt, delete-operator

我有一个`QList<float**>`. 我首先迭代元素以使用它们：

```
for( int i = 0 ; i < nb ; i++ )
{
    float** data1 = data_list.at( i ) ;
    float** data2 = data_list.at( i + 1 ) ;
    // do things with data1 and data2

} 
```

如果我`delete[]`以 C 风格的方式`data1`在`data2`这个循环中会发生什么？元素是否在位置`i`和被破坏（这样就不能再访问它们了）？`i+1``data_list``i`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:39:20.083

它是一个列表`float**`。他们指向的`float*`不在列表中。这意味着如果你使用`delete[]`，内存会被释放，但 `data_list`它本身不会改变。在此之后，它们将成为无效指针。

# javascript - 带有脚本标签的跨域cookie？

> ID：13818353
> 
> 赞同：5
> 
> 时间：2012-12-11T10:32:00.247
> 
> 标签：javascript, cookies, cross-domain

我正在使用 jsonP 从 cookie 发送数据，从域 A 到域 B。它运行良好，但我的问题不在这里。我才意识到，如果我只`script`在我的域 B 上放置一个指向我的域 A 的标记，那么我的域 A 的所有 cookie 都设置在我的域 B 上。

示例：我将此标签放在我的域 B 上：

```
<script src="http://mydomainA.com/"></script> 
```

只有这样，我的域 A 的所有 cookie 都设置在我的域 B 上。我的问题是，这正常吗？我认为 cookie 需要一些技巧才能跨域，但我认为这并不容易。

抱歉我的英语不好，如果我的问题很愚蠢或者以前有人问过，请道歉。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T11:00:54.547

Cookie 只是 HTTP 请求中的标头。当浏览器请求

```
GET /foo
Host: a.com 
```

它接收一个 HTML 文档，其中包含`<script>`托管在另一个域上的标签。所以它触发*了另一个*请求：

```
GET /script.js
Host: b.com
Cookie: foobarbaz 
```

`b.com`如果有的话，它当然可以为 domain 附加 cookie 。这意味着浏览器最后一次联系`b.com`时，HTTP 响应包含一个像

```
...
Set-Cookie: foobarbaz
... 
```

因此对同一域的后续请求将保持*会话*。当浏览器请求另一个资源时，`a.com`例如

```
GET /bar.jpeg
Host: a.com 
```

`foobarbaz`设置的 cookie`b.com` **不会**与请求一起发送，因此脚本`a.com`无法访问`b.com`.

# java - 如何在android中摇晃时调用谷歌地图？

> ID：13818356
> 
> 赞同：0
> 
> 时间：2012-12-11T10:32:12.547
> 
> 标签：java, android, google-maps, google-api

我只想制作一个关于谷歌地图的应用程序，当一些人摇动设备时，谷歌地图应用程序将调用并通过消息将当前位置发送给其他人......

我在我的应用程序中合并了谷歌地图

和

我正在寻找一些关于摇晃事件的实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T06:23:25.647

Android 平台支持三大类传感器：

**运动传感器** 这些传感器沿三个轴测量加速力和旋转力。此类别包括加速度计、重力传感器、陀螺仪和旋转矢量传感器。

**环境传感器** 这些传感器测量各种环境参数，例如环境空气温度和压力、光照和湿度。此类别包括气压计、光度计和温度计。

**位置传感器** 这些传感器测量设备的物理位置。此类别包括方向传感器和磁力计。 [请参阅 Android 文档](http://developer.android.com/guide/topics/sensors/sensors_overview.html)。

您可以从本[教程](http://www.slideshare.net/info_zybotech/android-accelerometer-sensor-tutorial)中获得更多有用的东西。

看看这个[示例项目](https://github.com/commonsguy/cw-advandroid/tree/master/Sensor/Shaker)。

# php - 我们可以在 mysql 表的列中运行循环吗？

> ID：13818358
> 
> 赞同：-2
> 
> 时间：2012-12-11T10:32:14.867
> 
> 标签：php, mysql, loops, facebook-login, login-control

通过 php，我必须输入用户名，然后在名为 mysql 表的用户名的列中搜索相同的用户名。

如果用户名匹配，它会寻找匹配同一行的密码，那么是否可以运行一个尝试匹配数据的循环？

如果是的话应该是什么样的？如果没有，请告诉我一些替代方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:36:16.680

您需要了解 SQL 查询，我真的无法回答比这更好的了。SQL 用于从数据库中选择数据，您可以使用如下命令：

```
Select employeeID from table where username = 'user' and password = 'password' 
```

如果您获得创纪录的回报，则表示匹配。本质上，如果您执行“给我与此查询匹配的数据”之类的查询，数据库服务器确实会遍历所有 dta 并尝试找到匹配的任何行。它已经遍历了所有数据，无需手动进行。

再次：请学习一些有关 SQL 的知识。通过您提出的问题，很明显您缺少一个非常基本的理解。这会浪费你的时间（尝试无用的事情）并可能伤害他人（如果你曾经让你的代码在公共场合运行）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:35:48.673

您可以编写如下 SQL 请求：

```
SELECT *
FROM Users
WHERE passwd = sr8stk23kel796ki345k54k2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T10:41:30.987

```
$query = "SELECT * FROM username WHERE `name` = '$variable_containing_name' AND `password` = '$password'" 
```

如果它返回行，则在哪里找到匹配项，`name`并且`password`是列名，您需要两个变量，其中包含要搜索的用户名和密码。你不需要循环 php sql 就可以完成这项工作

# android - android中的Kxml解析

> ID：13818363
> 
> 赞同：1
> 
> 时间：2012-12-11T10:32:37.693
> 
> 标签：android, parsing, kxml

嗨，我使用 kxml jar 来解析来自 Web 服务的数据。我以前在其他项目中使用过..但现在我在新项目中使用相同的，但我收到错误，我无法对其进行故障排除..

我的 xml 文件将如下所示：

```
<rss version="2.0">

<tttt>gsdsj</tttt>
<dddd>urkjrnf</dddd>
<item>
<title>ghsdsjhdsjdb</title>
<description>fgdhshbsdb</description>
</item>

<item>
<title>ghsdsjhdsjdb</title>
<description>fgdhshbsdb</description>
</item>

<item>
<title>ghsdsjhdsjdb</title>
<description>fgdhshbsdb</description>
</item>

</rss> 
```

我想得到那个头衔。

我的解析器文件是：

```
public class TaplistingParser 
{
    public TaplistingParser()
    {

    }

    public String getXmlFromUrl(String url)
    {
        String xml=null;
        DefaultHttpClient httpclient=new DefaultHttpClient();
        HttpPost httpPost=new HttpPost(url);
        try 
        {
            HttpResponse httpresponse = httpclient.execute(httpPost);
            HttpEntity httpentity=httpresponse.getEntity();
            xml=EntityUtils.toString(httpentity);
        } 
        catch (ClientProtocolException e) 
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
        catch (IOException e) 
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
//      System.out.println("xml="+xml);
        return xml;
    }

    public Document getDomElement(String xml)
    {
        Document doc=null;
        DocumentBuilderFactory dbf= DocumentBuilderFactory.newInstance();
        dbf.setCoalescing(true);
        try 
        {
            DocumentBuilder db= dbf.newDocumentBuilder();

            InputSource is= new InputSource();
            is.setCharacterStream(new StringReader(xml));
            try {
                doc=db.parse(is);
            } catch (SAXException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        } 
        catch (ParserConfigurationException e) 
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }       
        return doc;

    }

     public final String getElementValue( Node elem ) {
         Node child;
         if( elem != null){
             if (elem.hasChildNodes()){
                 for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
//                   if( child.getNodeType() == Node.TEXT_NODE  ){
                         return child.getNodeValue();
//                   }
                 }
             }
         }
         return "";
     }

     /**
      * Getting node value
      * @param Element node
      * @param key string
      * */
     public String getValue(Element item, String str) {     
            NodeList n = item.getElementsByTagName(str);        
            return this.getElementValue(n.item(0));
        }
} 
```

我的活动代码：

```
public void getelement()
    {

       TaplistingParser parser = new TaplistingParser();
       String xml= parser.getXmlFromUrl(URL);
       Document doc=parser.getDomElement(xml);        

       NodeList nl=doc.getElementsByTagName("item");
       title = new String[nl.getLength()];      

       for(int i=0; i < nl.getLength(); i++ )
       {

        Element e = (Element) nl.item(i);
        title[i]=parser.getValue(e, "title");                       
       }   

    } 
```

我的日志是：

```
12-11 15:58:42.962: W/System.err(551): org.xml.sax.SAXParseException: expected: /META read: HEAD (position:END_TAG </HEAD>@11:8 in java.io.StringReader@44c60e80) 
12-11 15:58:42.982: W/System.err(551):  at org.apache.harmony.xml.parsers.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:151)
12-11 15:58:42.992: W/System.err(551):  at parser.TaplistingParser.getDomElement(TaplistingParser.java:67)
12-11 15:58:42.992: W/System.err(551):  at your.com.font.FontActivity.getelement(FontActivity.java:42)
12-11 15:58:43.023: W/System.err(551):  at your.com.font.FontActivity.onCreate(FontActivity.java:25)
12-11 15:58:43.032: W/System.err(551):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-11 15:58:43.032: W/System.err(551):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
12-11 15:58:43.032: W/System.err(551):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
12-11 15:58:43.042: W/System.err(551):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
12-11 15:58:43.042: W/System.err(551):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
12-11 15:58:43.042: W/System.err(551):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-11 15:58:43.042: W/System.err(551):  at android.os.Looper.loop(Looper.java:123)
12-11 15:58:43.042: W/System.err(551):  at android.app.ActivityThread.main(ActivityThread.java:4363)
12-11 15:58:43.042: W/System.err(551):  at java.lang.reflect.Method.invokeNative(Native Method)
12-11 15:58:43.042: W/System.err(551):  at java.lang.reflect.Method.invoke(Method.java:521)
12-11 15:58:43.042: W/System.err(551):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
12-11 15:58:43.042: W/System.err(551):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
12-11 15:58:43.052: W/System.err(551):  at dalvik.system.NativeStart.main(Native Method)
12-11 15:58:43.052: D/AndroidRuntime(551): Shutting down VM
12-11 15:58:43.052: W/dalvikvm(551): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
12-11 15:58:43.062: E/AndroidRuntime(551): Uncaught handler: thread main exiting due to uncaught exception
12-11 15:58:43.072: E/AndroidRuntime(551): java.lang.RuntimeException: Unable to start activity ComponentInfo{your.com.font/your.com.font.FontActivity}: java.lang.NullPointerException
12-11 15:58:43.072: E/AndroidRuntime(551):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
12-11 15:58:43.072: E/AndroidRuntime(551):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
12-11 15:58:43.072: E/AndroidRuntime(551):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
12-11 15:58:43.072: E/AndroidRuntime(551):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
12-11 15:58:43.072: E/AndroidRuntime(551):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-11 15:58:43.072: E/AndroidRuntime(551):  at android.os.Looper.loop(Looper.java:123)
12-11 15:58:43.072: E/AndroidRuntime(551):  at android.app.ActivityThread.main(ActivityThread.java:4363)
12-11 15:58:43.072: E/AndroidRuntime(551):  at java.lang.reflect.Method.invokeNative(Native Method)
12-11 15:58:43.072: E/AndroidRuntime(551):  at java.lang.reflect.Method.invoke(Method.java:521)
12-11 15:58:43.072: E/AndroidRuntime(551):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
12-11 15:58:43.072: E/AndroidRuntime(551):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
12-11 15:58:43.072: E/AndroidRuntime(551):  at dalvik.system.NativeStart.main(Native Method)
12-11 15:58:43.072: E/AndroidRuntime(551): Caused by: java.lang.NullPointerException
12-11 15:58:43.072: E/AndroidRuntime(551):  at your.com.font.FontActivity.getelement(FontActivity.java:44)
12-11 15:58:43.072: E/AndroidRuntime(551):  at your.com.font.FontActivity.onCreate(FontActivity.java:25)
12-11 15:58:43.072: E/AndroidRuntime(551):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-11 15:58:43.072: E/AndroidRuntime(551):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
12-11 15:58:43.072: E/AndroidRuntime(551):  ... 11 more
12-11 15:58:43.102: I/dalvikvm(551): threadid=7: reacting to signal 3
12-11 15:58:43.202: I/dalvikvm(551): Wrote stack trace to '/data/anr/traces.txt' 
```

提前致谢..

# java - cocos2dx 中为 CCDictionary 设置对象失败

> ID：13818365
> 
> 赞同：0
> 
> 时间：2012-12-11T10:32:42.740
> 
> 标签：java, android, c++, java-native-interface, cocos2d-x

我正在尝试将一些数据（从 java 类获得）设置为 CCDictionary，然后将该字典对象添加到 c++ 类中的 CCArray 中，如下所示。addFriends(...) 是从本地方法调用的。

```
void RecJNICommunicator::addFriends(const char * nativeStringUserName, const char * nativeStringUserId) {
CCLog(" --- inside RecJNICommunicator::addFriends --- ");

  CCDictionary * cdictionary =  CCDictionary::create();

  CCString *str1 = CCString::create(nativeStringUserName);
  CCString *str2 = CCString::create(nativeStringUserId);

  cdictionary->setObject(str1, "name");
  cdictionary->setObject(str2, "id");

  if(!FacebookFriendListScreen::friendsList) {
      CCLog(" --- FacebookFriendListScreen::friendsList is NULL... creating new --- ");
      FacebookFriendListScreen::friendsList = new CCArray;
  } 
```

> // 将字典对象添加到 CCArray

```
 FacebookFriendListScreen::friendsList->addObject(cdictionary);

  CCLog(" --- added successfully --- ");
} 
```

第一次成功添加，但后来应用程序崩溃并出现以下堆栈跟踪

```
12-11 10:21:39.707: INFO/DEBUG(24299):          #00  pc 001363d2  

/data/data/com.humit/lib/libgame.so (_ZN7cocos2d12CCDictionary15setObjectUnSafeEPNS_8CCObjectERKSs)
12-11 10:21:39.707: INFO/DEBUG(24299):          #01  pc 00135258  /data/data/com.humit/lib/libgame.so (_ZN7cocos2d12CCDictionary9setObjectEPNS_8CCObjectERKSs)
12-11 10:21:39.707: INFO/DEBUG(24299):          #02  pc 000f2d9a  /data/data/com.humit/lib/libgame.so (_ZN18RecJNICommunicator10addFriendsEPKcS1_)
12-11 10:21:39.707: INFO/DEBUG(24299):          #03  pc 000f2c42  /data/data/com.humit/lib/libgame.so (Java_com_humit_android_HumIt_addFriends)
12-11 10:21:39.707: INFO/DEBUG(24299):          #04  pc 0001ed70  /system/lib/libdvm.so (dvmPlatformInvoke)
12-11 10:21:39.707: INFO/DEBUG(24299):          #05  pc 0005902c  /system/lib/libdvm.so (_Z16dvmCallJNIMethodPKjP6JValuePK6MethodP6Thread)
12-11 10:21:39.712: INFO/DEBUG(24299):          #06  pc 0005ad5c  /system/lib/libdvm.so (_Z22dvmResolveNativeMethodPKjP6JValuePK6MethodP6Thread)
12-11 10:21:39.712: INFO/DEBUG(24299):          #07  pc 00030bcc  /system/lib/libdvm.so
12-11 10:21:39.712: INFO/DEBUG(24299):          #08  pc 000343b0  /system/lib/libdvm.so (_Z12dvmInterpretP6ThreadPK6MethodP6JValue)
12-11 10:21:39.712: INFO/DEBUG(24299):          #09  pc 0006c8c6  /system/lib/libdvm.so (_Z15dvmInvokeMethodP6ObjectPK6MethodP11ArrayObjectS5_P11ClassObjectb)
12-11 10:21:39.712: INFO/DEBUG(24299):          #10  pc 00073eba  /system/lib/libdvm.so
12-11 10:21:39.712: INFO/DEBUG(24299):          #11  pc 00030bcc  /system/lib/libdvm.so
12-11 10:21:39.712: INFO/DEBUG(24299):          #12  pc 000343b0  /system/lib/libdvm.so (_Z12dvmInterpretP6ThreadPK6MethodP6JValue)
12-11 10:21:39.712: INFO/DEBUG(24299):          #13  pc 0006cb96  /system/lib/libdvm.so (_Z14dvmCallMethodVP6ThreadPK6MethodP6ObjectbP6JValueSt9__va_list)
12-11 10:21:39.712: INFO/DEBUG(24299):          #14  pc 00054ff6  /system/lib/libdvm.so
12-11 10:21:39.717: INFO/DEBUG(24299):          #15  pc 00049d8a  /system/lib/libandroid_runtime.so
12-11 10:21:39.717: INFO/DEBUG(24299):          #16  pc 0004b68e  /system/lib/libandroid_runtime.so (_ZN7android14AndroidRuntime5startEPKcS2_)
12-11 10:21:39.717: INFO/DEBUG(24299):          #17  pc 00008f0a  /system/bin/app_process
12-11 10:21:39.717: INFO/DEBUG(24299):          #18  pc 0001685c  /system/lib/libc.so (__libc_init) 
```

我对 C++ 编程很陌生，所以我做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:32:34.460

早些时候`CCDictionary`是自动释放调用，friendsList`CCArray`是静态的。可能是因为这些，内存没有被清除。现在我正在`CCDictionary`使用新的和删除的静态 FriendsList CCArray 创建并使用类对象访问它，如下所示。现在一切正常。

> 创造

```
 CCDictionary * cdictionary =  new CCDictionary();

  CCString *str1 = new CCString(nativeStringUserName);
  CCString *str2 = new CCString(nativeStringUserId);

  cdictionary->setObject(str1, "name");
  cdictionary->setObject(str2, "id");

  if(facebookFriendsListscreen->friendsList != NULL && facebookFriendsListscreen->friendsInstaledList != NULL) {
      facebookFriendsListscreen->friendsList->addObject(cdictionary);
      facebookFriendsListscreen->friendsInstaledList->addObject(cdictionary);
  } else {
      CCLog(" --- CCArrays are null in addInstalledFriends --- ");
  } 
```

> 用同样的方法释放

```
 cdictionary->release();
  str1->release();
  str2->release(); 
```

# c++ - std::remove 和 std::remove_if 设计的稳定性是否失败？

> ID：13818369
> 
> 赞同：14
> 
> 时间：2012-12-11T10:33:01.860
> 
> 标签：c++, stl, complexity-theory

最近（来自一个 SO 评论）我了解到这一点`std::remove`并且`std:remove_if`很稳定。我是否错误地认为这是一个糟糕的设计选择，因为它阻止了某些优化？

想象一下删除 1M 的第一个和第五个元素`std::vector`。因为稳定性，我们不能`remove`用swap来实现。相反，我们必须移动所有剩余的元素。:(

如果我们不受稳定性的限制，我们可以（对于 RA 和 BD 迭代器）实际上有 2 个迭代器，一个从前面，第二个从后面，然后使用交换来结束要移除的项目。我相信聪明的人可能会做得更好。我的问题是一般性的，而不是我正在谈论的特定优化。

**编辑：**`std::sort`请注意，C++ 宣传零开销原则，还有`std::stable_sort`排序算法。

**EDIT2：** 优化将类似于以下内容：

对于`remove_if`：

*   bad_iter 从头开始​​查找谓词返回 true 的那些元素。
*   good_iter 从末尾查找谓词返回 false 的那些元素。

当双方都找到了预期的东西时，他们交换了他们的元素。终止时间为`good_iter <= bad_iter`。

如果有帮助，请将其视为快速排序算法中的一个迭代器，但我们不会将它们与特殊元素进行比较，而是使用上述谓词。

**EDIT3：**我到处玩并试图找到最坏的情况（最坏的情况`remove_if`- 请注意谓词很少为真），我得到了这个：

```
#include <vector>
#include <string>
#include <iostream>
#include <map>
#include <algorithm>
#include <cassert>
#include <chrono>
#include <memory>
using namespace std;
int main()
{  
    vector<string> vsp;
    int n;
    cin >> n;
    for (int i =0; i < n; ++i)
    {   string s = "123456";
        s.push_back('a' + (rand() %26));
        vsp.push_back(s);
    }
    auto vsp2 = vsp;
    auto remove_start = std::chrono::high_resolution_clock::now();
    auto it=remove_if(begin(vsp),end(vsp), [](const string& s){ return s < "123456b";});
    vsp.erase(it,vsp.end());
    cout << vsp.size() << endl;
    auto remove_end = std::chrono::high_resolution_clock::now();
    cout << "erase-remove: " << chrono::duration_cast<std::chrono::milliseconds>(remove_end-remove_start).count() << " milliseconds\n";

    auto partition_start = std::chrono::high_resolution_clock::now();
    auto it2=partition(begin(vsp2),end(vsp2), [](const string& s){ return s >= "123456b";});
    vsp2.erase(it2,vsp2.end());
    cout << vsp2.size() << endl;
    auto partition_end = std::chrono::high_resolution_clock::now();
    cout << "partition-remove: " << chrono::duration_cast<std::chrono::milliseconds>(partition_end-partition_start).count() << " milliseconds\n";
}

C:\STL\MinGW>g++ test_int.cpp -O2 && a.exe
12345678
11870995
erase-remove: 1426 milliseconds
11870995
partition-remove: 658 milliseconds 
```

对于其他用途，分区更快，相同或更慢。让我不解。:D

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-11T10:47:32.023

我假设您询问的是当前的假设定义`stable_remove`，`remove`并且`remove`要实施，但是实施者认为最好以任何顺序给出正确的值。期望实现者能够在与`stable_remove`.

在实践中，库不能*轻易地*进行这种优化。这取决于数据，但在决定如何删除每个元素之前，您不希望花费太长时间来计算将删除多少元素。例如，您可以做一个额外的传递来计算它们，但是在很多情况下额外传递是低效的。仅仅因为在某些情况下不稳定的移除比稳定的移除更快，并不一定意味着在两者之间进行选择的自适应算法是一个不错的选择。

我认为 和 之间的区别在于`remove`，*众所周知*`sort`，排序是一个复杂的问题，有很多不同的解决方案以及权衡和调整。所有“简单”的排序算法*平均速度*都很慢。大多数标准算法都非常简单，并且是其中之一，但不是。因此，我认为将和定义为单独的标准函数没有多大意义。**`remove``sort``stable_remove``remove`**

 **编辑：您对我的调整进行的编辑（类似于`std::partition`但不需要保留右侧的值）对我来说似乎很合理。它需要一个双向迭代器，但在标准中有先例，算法在不同的迭代器类别上表现不同，例如`std::distance`. 因此，标准可以定义`unstable_remove`只*需要*一个前向迭代器，但如果它得到一个双向迭代器就可以了。该标准可能不会对算法进行布局，但它可能会有一个短语，例如“如果迭代器是双向的，则最多只在移除元素数量的`min(k, n-k)`地方移动`k`”，这实际上会强制它。但请注意，该标准目前并未说明有多少步`remove_if`确实如此，所以我认为将其固定下来并不是一个优先事项。

当然，没有什么能阻止您实施自己的`unstable_remove`.

如果我们接受标准不需要指定不稳定的删除，那么问题就归结为它定义的函数是否应该被调用`stable_remove`，预计未来`remove`对于双向迭代器的行为会有所不同，并且对于前向迭代器的行为可能会有所不同如果一些用于进行不稳定删除的聪明启发式方法变得足够众所周知，值得一个标准功能。我会说不是：如果标准函数的名称不完全正常，这不是一场灾难。从 STL 的`remove_if`. 那么问题就变成了，“为什么 STL 不叫它`stable_remove_if`”，对此我只能回答说，除了所有答案中的所有要点外，STL 设计过程比标准化过程更快。

`stable_remove`还会打开一罐关于其他标准功能的蠕虫，这些功能*理论上*可能有不稳定的版本。`copy`应该调用一个特别愚蠢的例子`stable_copy`，以防万一存在某些实现，在复制时反转元素的顺序明显更快？应该`copy`被调用`copy_forward`，以便实现可以根据哪个更快选择哪个`copy_backward`和`copy_forward`被调用？`copy`委员会的部分工作是在某处划清界限。

我认为实际上当前的标准是明智的，分开定义 a`stable_remove`和 a是明智的`remove_with_some_other_constraints`，但`remove_in_some_unspecified_way`只是没有提供同样的优化机会`sort_in_some_unspecified_way`。Introsort 是在 1997 年发明的，就像 C++ 正在标准化一样，但我不认为围绕它的研究工作`remove`完全是它过去和现在的样子`sort`。我可能错了，优化`remove`可能是下一件大事，如果是这样，那么委员会就错过了一个窍门。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T11:15:36.600

`std::remove`指定使用前向迭代器。

从头到尾使用一对迭代器的方法要么增加对迭代器的要求，从而降低函数的效用，要么违反/恶化渐近复杂性保证。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-27T19:49:56.297

> 3年后回答我自己的问题:)
是的，这是一个“失败”。

有一个提案[D0041R0](https://github.com/WG21-SG14/SG14/blob/master/Docs/Proposals/unstable_remove.html)将添加`unstable_remove`. 有人可能会争辩说，仅仅因为有一项提案要补充`std::unstable_remove`，并不意味着这`std::remove`是一个错误，但我不同意。:)**

# iphone - cfstring 长度消息发送到解除分配的实例？

> ID：13818371
> 
> 赞同：0
> 
> 时间：2012-12-11T10:33:07.110
> 
> 标签：iphone, xcode, autocomplete

我正在为 textField 做自动完成功能的概念，这样做我收到以下错误：“cfstring length message sent to deallocated instance”

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
   if( textField == txtcity)
    {

     autocompleteTableView.hidden = NO;

     NSString *substring = [NSString stringWithString:textField.text];
    substring = [substring stringByReplacingCharactersInRange:range withString:string];
    [self searchAutocompleteEntriesWithSubstring:substring];
    return YES;
    }
}

- (void)searchAutocompleteEntriesWithSubstring:(NSString *)substring {

    subString2=[NSString stringWithFormat:@"%@",substring];

    NSMutableData *data = [[NSMutableData alloc] init];
    self.receivedData = data;
    [data release];

    NSURL *jsonUrl =[NSURL URLWithString:[NSString stringWithFormat:@"http://210.90.32.122/services/AutoService.svc/GetCities/?p=%@&k=%@",substring,txtId.text]];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:jsonUrl];

    NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request
                                                                  delegate:self];
     self.connection = connection;
    [connection start];
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response

{
    [receivedData setLength:0];

}
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data

{
    [receivedData appendData:data];

}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    parser = [[NSXMLParser alloc] initWithData:receivedData];
    [parser setDelegate:self];
    [parser setShouldProcessNamespaces:NO];
    [parser setShouldReportNamespacePrefixes:NO];
    [parser setShouldResolveExternalEntities:NO];
    [parser parse];
    [parser release];
    NSLog(@"%@",arr2);
    if([arr2 count]!=0)
    {

        self.autocompleteUrls = [[NSMutableArray alloc] init];
        if(autocompleteTableView)
            [autocompleteTableView removeFromSuperview];
        autocompleteTableView = [[UITableView alloc] initWithFrame:CGRectMake(88, 428, 200,[arr2 count]*20) style:UITableViewStyleGrouped];
        autocompleteTableView.delegate = self;
        autocompleteTableView.dataSource = self;
        autocompleteTableView.scrollEnabled = YES;
        autocompleteTableView.rowHeight=20;

        [self.view addSubview:autocompleteTableView];
               for(int i=0;i<[arr2 count];i++)
        {
            NSString *curString = [[arr2 objectAtIndex:i] valueForKey:@"Name"];

            NSRange substringRange = [curString rangeOfString:subString2];  //error at this line 

            if (substringRange.location == 0)
                [autocompleteUrls addObject:curString];

        }
    }

    [autocompleteTableView reloadData];
    txtcity.text=subString2;
    [txtcity resignFirstResponder];

} 
```

我的 subString2 正在变为 null。但我在贴花时保留了它

@property(nonatomic,retain)NSString *subString2;

我哪里出错了。不明白它在哪里被释放了..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:41:45.967

你实际上并没有保留它。您正在设置对象变量 subString2 而不是属性，这就是原因。试试这个：

```
self.subString2 = [NSString stringWithFormat:@"%@",substring]; 
```

但是通过属性从对象中获取对象变量并不是很好的做法。有两种选择：

```
[subString2 release];
subString2 = [[NSString stringWithFormat:@"%@",substring] copy];

OR

[subString2 release];
subString2 = [[NSString stringWithFormat:@"%@",substring] retain]; 
```

# android - 安卓私钥问题

> ID：13818373
> 
> 赞同：0
> 
> 时间：2012-12-11T10:33:10.263
> 
> 标签：android, android-emulator

默认情况下，我在 adbkey 文件中有密钥，所以我应该需要生成自己的私钥。
当我在各种 android 手机上测试该应用程序时，它工作正常，而且我不必在 Google PLAY 中发布。
我已经测试了该应用程序在`Android 2.2`那里`4.1`的工作。

建议我该怎么办？？？

或者我应该去下面的 [链接](http://developer.android.com/tools/publishing/app-signing.html#secure-key)

[http://developer.android.com/tools/building/building-cmdline.html#DebugMode](http://developer.android.com/tools/building/building-cmdline.html#DebugMode)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:41:15.063

根据官方文档“您作为开发人员实体的声誉取决于您始终正确保护您的私钥，直到密钥过期。”。如果您不打算将您的应用放到 google play 上，您可以使用自动生成的密钥。

# c - 制作文件选项

> ID：13818376
> 
> 赞同：0
> 
> 时间：2012-12-11T10:33:13.163
> 
> 标签：c, compilation, makefile

如何在我的生成文件中使用选项`-std=c99`或`-std=gnu99`编译我的 C 代码？

```
-include ../../../Common/C/Make.cfg

### target ###

TARGET_NAME   = myRec

### Objects, sources ###

# C source files

CSRCS = \
    myRec.c

LDLIBS ?= -lNBiometrics -lNMedia -lNCore

include ../../../Common/C/Make.rules 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T10:37:14.637

您需要设置`CFLAGS` [makefile 变量](http://www.gnu.org/software/make/manual/html_node/Implicit-Variables.html#index-CFLAGS-905)。

# android - Android inset 透明drawable

> ID：13818377
> 
> 赞同：1
> 
> 时间：2012-12-11T10:33:16.627
> 
> 标签：android, android-drawable

所以我有一个如下所示的PNG。图像中的白色内部是透明的。

我的问题是该图像对于 Android 设备上的不同尺寸屏幕并不能真正扩展。

我想知道如何在代码中或者最好是 xml 中做到这一点。基本上我正在寻找一个带有透明圆形插图的灰色正方形。

此外，灰色的内边框也有很好的效果，这在代码中可能吗？

我知道如何做逆向（带圆角的位图），但我该怎么做呢？任何想法表示赞赏，谢谢。

![容器](../Images/8dcfa08fb139adcad763abb349a19177.png)

**编辑：**

所以，我唯一尝试过的是`android:scaleType="centerCrop"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:47:41.147

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:scaleType="fitCenter" 
            android:scaleX="0.7"/>
    </LinearLayout> 
```

你可以试试这个。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-11T10:46:38.530

从您的问题中不清楚为什么图像无法针对不同的屏幕尺寸正确缩放。

使用`NinePatch`PNG 格式，您可以完全控制图像的缩放方式。例如，如果这是您的问题，这使您可以强制仅扩展图像灰色区域，保持圆形格式。

文档可以在这里找到：[Draw 9-patch](http://developer.android.com/tools/help/draw9patch.html)

问候。

# asp.net - 通过 Ajax 和 Web Api 发送表数据

> ID：13818378
> 
> 赞同：0
> 
> 时间：2012-12-11T10:33:16.897
> 
> 标签：asp.net, ajax, json, asp.net-web-api

我在客户端有不同列数和行数的表作为 JSON，例如：

```
[
  ["", "Kia", "Nissan", "Toyota", "Honda"],
  ["2008", "-5", "11", "12", "13"],
  ["2009", "20", "-11", "14", "13"],
  ["2010", "30", "15", "-12", "readOnly"]
] 
```

我想通过 ajax 和 ASP.NET Web Api 将此表发送到服务器。做这个的最好方式是什么？

当我想以文本形式发布并以`[FromBody]string value`. 由于桌子大小不同，我不能使用班级？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:51:29.123

答案在 ajax 代码中。我没有正确的数据参数。正确的是：

```
$.ajax({
    url: '../webapi/Products',
    type: 'POST',
    dataType: "text", 
    data: "="+JSON.stringify( data ),
    success: function (test) {
            alert(test);
        },
        error: function (test) {
            alert("Error");
        } 
```

然后我可以使用 JSON.NET 中的 JArray 来解析值字符串。

# javascript - Javascript Click 功能在库脚本中损坏

> ID：13818383
> 
> 赞同：0
> 
> 时间：2012-12-11T10:33:37.130
> 
> 标签：javascript

我正在尝试用 JS 创建一个画廊脚本（我才学习了一周，所以如果我犯了任何荒谬的错误，请原谅！）。当我运行代码时，我得到一个错误`controlLeft.onclick = changeImage(--);`，说`(`是一个意外的令牌。

在我未经训练的眼里，一切都应该没问题，但显然不是。我在这里做错了什么：

```
//Javascript Image Changer

var currentImage = document.getElementById("currentImage");

var imageArray = ["img/1.jpg", "img/2.jpg", "img/3.jpg", "img/4.jpg"];

var imageIndex= 0;

function changeImage(param){
    currentImage.setAttribute("src", imageArray[imageIndex]);
    imageIndex[param];
    if (imageIndex >= imageArray.length){
        imageIndex = 0;
    }else if(imageIndex <= -1){
        imageIndex = imageArray.length + 1;
    }
}

var controlLeft = document.getElementById("left");
var controlRight = document.getElementById("right");

controlLeft.onclick = changeImage(--);
controlRight.onclick = changeImage(++); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:36:32.440

你不能像其他东西一样传递操作符。即使在具有高阶函数的编程语言中，同样的事情通常*也不*适用于运算符。

除此之外，还`onclick`需要一个函数——而不是函数调用的结果。

这是一个可能有效的片段：

```
function changeImage(mod){
    currentImage.setAttribute("src", imageArray[imageIndex]);
    imageIndex += mod;
    if (imageIndex >= imageArray.length){
        imageIndex = 0;
    }else if(imageIndex <= -1){
        imageIndex = imageArray.length + 1;
    }
}

var controlLeft = document.getElementById("left");
var controlRight = document.getElementById("right");

controlLeft.onclick = function() { changeImage(-1); };
controlRight.onclick function() { changeImage(1); }; 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-12-11T10:36:43.170

只需稍作修改：

```
controlLeft.onclick = function() {
    changeImage('back');
};

controlRight.onclick = function() {
    changeImage('forward');
}; 
```

# php - 按列对表中的数据进行排序

> ID：13818387
> 
> 赞同：0
> 
> 时间：2012-12-11T10:33:44.017
> 
> 标签：php, mysql

我想在 html 表的标题中对来自 mysql 数据库的数据进行排序。我写了这段代码：

```
$username = $_SESSION['username']; // gets the username

echo "<table class='normal_table'>";

$new_word = mysql_query("SELECT * FROM new_word WHERE username='$username'");
$new_word2 = mysql_query($new_word);

echo " 

<tr>
<th><a href='test.php?sort=cz'>Czech:</a></th>
<th><a href='test.php?sort=en'>English:</a></th>
<tr>";

if ($_GET['sort'] == 'cz')
{
 $new_word .= " ORDER BY cz";
}
elseif ($_GET['sort'] == 'en')
{
 $new_word .= " ORDER BY en";
}

while($new_word2 = mysql_fetch_array($new_word)){

echo "
<tr>
<td> ".$new_word2['cz']."</td>
<td>".$new_word2['en']."</td>
</tr>

"; }

echo "</table>"; 
```

但是屏幕上没有出现任何数据:(我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:37:02.100

您正在执行您的查询

```
$new_word = mysql_query("SELECT * FROM new_word WHERE username='$username'"); 
```

然后尝试在

```
$new_word .= " ORDER BY en"; 
```

您需要先构建查询字符串

所以

```
$sql =  "SELECT * FROM new_word WHERE username='$username'" 
```

附加你的`ORDER BY`

```
$sql .= " ORDER BY en"; 
```

然后执行

```
$new_word = mysql_query($sql); 
```

编辑：还删除`$new_word2 = mysql_query($new_word);`并更改您的使用时间，`$new_world`正如 Uttam Kadam 在他们的[回答中所说](https://stackoverflow.com/a/13818446/50866)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T10:36:30.647

```
$new_word2 = mysql_query($new_word); //$new_word wrong 
```

删除此行这是额外的。

# android - Android模拟器相机自定义图片

> ID：13818389
> 
> 赞同：51
> 
> 时间：2012-12-11T10:33:52.730
> 
> 标签：android, image, android-emulator, overriding, android-camera

有人知道模拟器相机启动时是否可以打开一些个人图片？

我有一个基于图像分析的应用程序，我希望当我单击相机的按钮时，相机会打开而不是默认的 Android 模拟器移动图像。我希望它打开一些我设置为默认图像的图像。因此，当我选择拍照时，它只会显示该图像，而当我拍照时，该图像将保存到图库，而不是 Android 默认图像。

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2019-04-18T15:50:47.993

在 下`Tools > AVD Manager`，选择“铅笔”进入“虚拟设备配置”。 `Show Advanced Settings > Camera`将为您提供使用模拟或设备的选项：

> 设备 - 使用主机网络摄像头或内置摄像头

[![虚拟设备摄像头配置](../Images/332246e4e4eedbdc171db17e62d2eac9.png)](https://i.stack.imgur.com/biPFN.jpg)

如果您只需要将静态图像放入相机，从 Android Studio 3.2 开始，您可以将静态图像放入虚拟场景中：

[![虚拟场景演示](../Images/94ea4fc5a549f53e4486dfcf23fa151d.png)](https://i.stack.imgur.com/r87WV.gif)

正如Android 开发者博客 的[这篇](https://android-developers.googleblog.com/2018/05/android-studio-3-2-canary.html)文章中所讨论的那样。**请注意，您需要将相机位置移动到餐厅才能看到您的图像**（转身并使用 Alt-w 向前移动）。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2020-11-20T00:49:51.483

最后！

1.  附加到文件 ~/Android/Sdk/emulator/resources/Toren1BD.posters

```
poster custom
size 2 2
position 0 0 -1.8
rotation 0 0 0
default custom.png 
```

2.  将“custom.png”放在 ~/Android/Sdk/emulator/resources/
3.  重新开始！`emulator @Phone -no-snapshot -no-boot-anim`（将“电话”替换为您的 avd 的名称！（参见：emulator -list-avds）
4.  利润！

现在你在相机默认位置前面有一个纹理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2022-03-02T08:33:20.457

**2022 年更新**

使用 OBS 的最佳方式。该项目创建了一个虚拟网络摄像头，您可以播放视频或显示图片。

**第 1 步：** 从该[站点](https://obsproject.com/)下载 OBS Studio并创建一个虚拟网络摄像头并添加一个视频以进行操作。

[![在此处输入图像描述](../Images/dde6db96e3554bcdf56d503169729fe6.png)](https://i.stack.imgur.com/6xXHw.jpg)

**第 2 步：** 更改 android AVD 中的配置。将前后摄像头更改为 webcom0。

[![在此处输入图像描述](../Images/d3b72262ddbe5035e10571126981605b.png)](https://i.stack.imgur.com/T8ACj.png)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-20T08:58:00.793

似乎唯一的解决方案是使用远程摄像头。

这是一种方法：[http ://www.tomgibara.com/android/camera-source](http://www.tomgibara.com/android/camera-source)

这不是我想要的东西，但我认为它可以用于测试。如果条形码正确放置在相机前面，甚至条形码扫描仪也可以使用。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-20T10:06:40.833

从以下 url 下载源代码。这是模拟器中的另一个画廊。在传递从相机捕获图像的意图时，选择此图库。这看起来像三星移动 3d 画廊.. 这将返回默认图像.. 在模拟器中。还有一件事，它只在 3.0 版本之后才能正常工作。

[https://github.com/c-jiang/Gallery3D-Mod](https://github.com/c-jiang/Gallery3D-Mod)

# r - 使用 R 循环访问网站链接

> ID：13818395
> 
> 赞同：1
> 
> 时间：2012-12-11T10:34:13.247
> 
> 标签：r, web, hyperlink

我希望在 R 中加入一个循环，该循环遍历 NFL 统计网站上的每场比赛的 boxscore 数据：http: [//www.pro-football-reference.com/years/2012/games.htm](http://www.pro-football-reference.com/years/2012/games.htm)

目前我不得不每周手动点击每场比赛的“boxscore”链接；有什么方法可以在 R 中实现自动化吗？我的代码适用于每个链接中的完整播放数据集；此刻我要花很长时间了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:01:55.170

网页抓取可能违反某些网站的使用条款。这些条款的可执行性尚不清楚。虽然在许多情况下完全复制原始表达是非法的，但在美国，法院在 Feist Publications v. Rural Telephone Service 案中裁定允许复制事实。

```
require(RCurl)
require(XML)
bdata<-getURL('http://www.pro-football-reference.com/years/2012/games.htm')
bdata<-htmlParse(bdata)
boxdata<-xpathSApply(bdata,'//a[contains(@href,"boxscore")]',xmlAttrs)[-1] 
```

以上将获得各种游戏的 boxscore 词干。

# jquery - jQuery：动态加载元素的大小/长度

> ID：13818412
> 
> 赞同：2
> 
> 时间：2012-12-11T10:35:12.627
> 
> 标签：jquery, dynamic

我有一个表单，我正在通过 jQuery 的加载函数向其中动态添加新的输入和选择元素。有时加载的元素故意为空，在这种情况下，我想隐藏容器 div，这样它就不会破坏样式。

问题是，我似乎无法计算加载的元素，因此不知道它是否应该隐藏。

例如我有这个：

```
<div id="param_container"></div> 
```

在一些下拉菜单更改中，我绑定了此功能：

```
alert($('#param_container').children().length);

// Returns and loads new element correctly. Can be empty.
$('#param_container').load('/get_params', {cat:category});

if ($('#param_container').children().length ) {
    $('#param_container').css('display', 'block');
} else {
    $('#param_container').css('display', 'none');
}

alert($('#param_container').children().length); 
```

即使添加了新的子元素，子元素的长度也始终为 0。

有什么想法吗？

编辑：

我的解决方案

```
$('#param_container').load('/get_params', {cat:category}, function(response) {
    if (response) {
        $('#param_container').css('display', 'block');
    } else {
        $('#param_container').css('display', 'none');
    }
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T10:38:18.210

原因是[`load`](http://api.jquery.com/load/)调用是*异步*的，它在你的函数返回后完成。

您可以使用成功回调，如下所示：

```
alert($('#param_container').children().length);

// Returns and loads new element correctly. Can be empty.
$('#param_container').load('/get_params', {cat:category}, function() {
    if ($('#param_container').children().length ) {
        $('#param_container').css('display', 'block');
    } else {
        $('#param_container').css('display', 'none');
    }

    alert($('#param_container').children().length);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T10:36:19.637

您需要从 div 的 id 中删除 # 即

你写了：

```
<div id="#param_container"></div> 
```

你需要：

```
<div id="param_container"></div> 
```

当您在 jQuery 中编写 $('#param_container') 时，这意味着您是一个元素，其中 id 等于没有“#”符号的字符串。所以你不需要将它包含在 html 代码中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T10:54:33.557

[您可以在此处](http://api.jquery.com/load/)尝试使用加载 API 提到的完整回调

如果提供了“完成”回调，则在执行后处理和 HTML 插入后执行。

```
$('#param_container').load('/get_params', {cat:category}, 
function() {
if ($('#param_container').children().length ) {
    $('#param_container').css('display', 'block');
} else {
    $('#param_container').css('display', 'none');
}
}
); 
```

# asp.net - 5位数字的正则表达式，不包括'00000'

> ID：13818414
> 
> 赞同：3
> 
> 时间：2012-12-11T10:35:20.590
> 
> 标签：asp.net, regex, validation

我需要有一个正则表达式，它接受至少 1 位数字和最大 5 位数字，如果用户以以下方式输入零，例如“00”、“000”、“0000”、“00000”，那么表达式应该拒绝这样的输入。目前，我正在使用 ^[0-9]{1,5}$。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T11:31:47.170

如果您确保用户的输入格式为带有前导零的 5 位数字，则以下正则表达式将起作用：

```
^[0-9]{5}(?<!00000)$ 
```

这使用负向后查找来确保输入的字符串不是 5 个零。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T04:33:05.843

```
^(?=.*[1-9].*)[0-9]{1,5}$ 
```

使用前瞻断言确保至少有一个非零数字。如果有一个，则表达式的其余部分仅在 1 到 5 位数字之间匹配。这两个条件都必须满足，否则表达式将不匹配。

不过，同意，如果您尝试匹配一个*数字*，而不是一串数字（如邮政编码），那么用数字进行比较可能比使用正则表达式更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T10:53:53.867

不好但工作：

从 1 到 99999：`[1-9][0-9]{0,4}`

从 01 到 09999：`0[1-9][0-9]{0,3}`

从 001 到 00999：`00[1-9][0-9]{0,2}`

从 0001 到 00099：`000[1-9][0-9]{0,1}`

从 00001 到 00009：`0000[1-9]`

然后把所有这些放在一起：

`^(0[1-9][0-9]{0,3}|00[1-9][0-9]{0,2}|000[1-9][0-9]{0,1}|0000[1-9]|[1-9][0-9]{0,4})$`

编辑：更新。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T11:17:08.383

它真的需要是一个正则表达式吗？为什么不检查 if `0 < value && value <=99999`？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T10:49:06.723

好的，我明白了，这里的解决方案：^[1-9][0-9]{0,4}$

取 1 到 99999 之间的所有数字

你为什么不使用 RangeValidator 它更简单。

```
<asp:RangeValidator ID="RangeValidator1" runat="server" ErrorMessage="Value must be greater than zero." ControlToValidate="tbQty" MinimumValue="1" MaximumValue="99999" Type="Integer"></asp:RangeValidator> 
```

# c++ - Node.js 插件类成员函数

> ID：13818416
> 
> 赞同：2
> 
> 时间：2012-12-11T10:35:37.157
> 
> 标签：c++, node.js

在 javascript 对象中公开 C++ 类的静态成员函数的代码如下所示

```
tpl->InstanceTemplate()->Set( String::NewSymbol("thefunc"), FunctionTemplate::New(myclass::myfunc)->GetFunction() ); 
```

映射到类的静态成员的`thefunc`javascript 可访问的函数名称在哪里。`myfunc``myclass`

由于该方法是静态的，我们必须通过一些实例指针访问所有类实例成员并编写一些样板代码来获取它。例如：

```
static Handle<Value> myclass::myfunc( const Arguments &args )
{
    myclass *instance = Unwrap<myclass>( args.This() );
    // now use 'instance' like 'this'
    return True();
} 
```

我想知道是否可以在接口中设置成员函数并将其绑定到类实例以避免带有样板的静态函数并将系统调用直接调用到我的非静态方法中，以便我可以使用“this”指针。

我可以想到一种丑陋的方式，它涉及`#define`扩展为包含代理函数的模板类，该代理函数解包“this”并将所有调用转发给成员函数，这将导致设置代码类似于以下内容：

```
DECLARE_MEMBER_FUNCTION( thefunc_handle, myclass, myfunc );
tpl->InstanceTemplate()->Set( String::NewSymbol("thefunc"), thefunc_handle ); 
```

但似乎 Node.js 已经支持这一点，或者有人设计了更好的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T16:02:28.840

通过引入静态函数模板，可以优雅地绑定成员方法：

```
class myclass : public node::ObjectWrap
{
    ...

    typedef v8::Handle<v8::Value> (myclass::*WrappedMethod)(const v8::Arguments& args);

    template<WrappedMethod m>
    static v8::Handle<v8::Value> Method(const v8::Arguments& args)
    {
        myclass* obj = ObjectWrap::Unwrap<myclass>(args.This());
        return (obj->*m)(args);
    }

    // Non-static member methods to be exported
    v8::Handle<v8::Value> func1(const v8::Arguments& args);
    v8::Handle<v8::Value> func2(const v8::Arguments& args);
    v8::Handle<v8::Value> func3(const v8::Arguments& args);
}; 
```

在你`myclass::Init(Handle<Object> exports):`

```
tpl->PrototypeTemplate()->Set(String::NewSymbol("func1"),
    FunctionTemplate::New(Method<&myclass::func1>)->GetFunction());
tpl->PrototypeTemplate()->Set(String::NewSymbol("func2"),
    FunctionTemplate::New(Method<&myclass::func2>)->GetFunction());
tpl->PrototypeTemplate()->Set(String::NewSymbol("func3"),
    FunctionTemplate::New(Method<&myclass::func3>)->GetFunction()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T16:45:09.607

在我看来，没有办法使用非静态方法代替静态方法。有两个事实可以作为这方面的论据：

*   您可以在 node.js 文档中找到的所有代码示例都提倡使用静态函数，因此开发人员并不暗示他们的库的其他用途（实际上我从未遇到过任何其他方法）

*   由于 node.js 回调函数是使用 'static' 修饰符声明的，因此您基本上需要一些类实例来调用任何实例方法。传统方法是从“参数”中获取实例。您也可以使用一些“静态”指针指向您传递给 js 代码的实例，但它仅适用于一个实例。如果您想创建更多，则在调用回调时将无法区分它们（当然，如果您不使用一些更复杂的技巧）。

总而言之，使用非静态函数是相当不可能的，因为没有简单和合法的技术来操作它们

# php - 如何在php中编辑html

> ID：13818417
> 
> 赞同：0
> 
> 时间：2012-12-11T10:35:37.517
> 
> 标签：php

我有一个字符串

```
 <p><img alt="twerk team" class="pyro-image" src="http://localhost/test/files/thumb/8/595" style="float: none;" /></p> 
```

以及我想在其中添加新字符串的内容

```
<p><img alt="twerk team" class="pyro-image" src="http://localhost/test/files/thumb/8/595/test_image.jpg" style="float: none;" /></p> 
```

我尝试过 DOMDocument 和 Simple HTML 解析器，但不能这样做。请看一看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:56:28.497

这将附加`/test_image.jpg`到`src`每个图像元素的`pyro-image`.

**[演示](http://codepad.org/0CexzyGr)**

```
$html = '<p><img alt="twerk team" class="pyro-image" src="http://localhost/test/files/thumb/8/595" style="float: none;" /></p>';

$d = new DOMDocument();
$d->loadHTML($html);

$xp = new DomXPath($d);
$class = 'pyro-image';
$nodes = $xp->query("//*[contains(concat(' ', normalize-space(@class), ' '), ' $class ')]");

foreach($nodes as $n)
{
    $n->setAttribute('src', (string)$n->getAttribute('src') . '/test_image.jpg');
    echo $d->saveXML($n->parentNode);

    // note - can use saveHTML() instead but only from PHP 5.3.6
} 
```

**输出**

```
<p><img alt="twerk team" class="pyro-image" src="http://localhost/test/files/thumb/8/595/test_image.jpg" style="float: none;"/></p> 
```

# javascript - Django模板 - 如果在另一个表单中选择了特定项目，则隐藏一个表单

> ID：13818418
> 
> 赞同：1
> 
> 时间：2012-12-11T10:35:38.500
> 
> 标签：javascript, html, django, forms, hide

我有两个这样的表格（每个都是一个下拉菜单），用于创建模型：

```
<label for="id_section" ><strong>text</strong></label> 

{{ form.section }}                

<label for="id_area" ><strong>text</strong></label>

{{ form.area }} 
```

如果选择了第一个表单中的特定项目，我想隐藏第二个表单。有一种方法可以使用 django 标签和过滤器以及 javascript 来实现这一点，而不仅仅是使用 javascript？

[编辑] js 解决方案：

```
var selectOne = document.getElementById("id_section");

selectOne.addEventListener("change", function() {
if (this.options[this.selectedIndex].value == 'value'){
    document.getElementById('id_area').style.display = "none";
} else {
    document.getElementById('id_area').style.display = "inline";
            }
        }, false); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:05:48.680

使用 jquery 可能是这样的：

```
$('#id_section').change(function() {
    $(this).val() == 'something') ? $('#id_area').hide() : $('#id_area').show();       
}); 
```

# epplus - EPPLUS - 获取单元格//范围的名称

> ID：13818420
> 
> 赞同：3
> 
> 时间：2012-12-11T10:35:42.673
> 
> 标签：epplus

我知道可以为单元格命名，如以下问题中所回答：

[EPPLUS - 重命名单元格](https://stackoverflow.com/questions/13724482/epplus-rename-cell/13764571?iemail=1#13764571)

您如何查看给定的单元格/范围是否有名称并检索该名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T05:48:45.960

有一个属性，即`IsName`可以确定范围是否有名称。但它似乎无法正常工作。我想你要查询命名的单元格集合，即`sheet.Names`或`book.Names`（它们包含工作表或书中的所有名称）。然后与`FullAddressAbsolute`给定的单元格进行比较以获得您想要的命名单元格。

```
var cell = sheet.Cells["C1"]; // cell you wanna find the name
ExcelNamedRange namedCell = null;
foreach (var item in book.Names)
{
    if (item.FullAddressAbsolute.Equals(cell.FullAddressAbsolute))
    {
        namedCell = item;
        break; // if you don't wanna find all
    }
}
// if (namedCell == null) --> NOT FOUND
// else
//      namedCell.Name : contains the name you wanna retrieve 
```

LINQ 也可以用来代替循环：

```
namedCell = book.Names.Where(item => item.FullAddressAbsolute.Equals(cell.FullAddressAbsolute)).FirstOrDefault(); 
```

# mysql - Drupal 7 db_select 嵌套选择查询

> ID：13818424
> 
> 赞同：4
> 
> 时间：2012-12-11T10:35:48.253
> 
> 标签：mysql, sql, drupal, drupal-7, drupal-modules

如何将嵌套选择查询转换为 Drual 7 db_select？以下是问题查询：

```
select 
    * 
from 
    tbl_word 
where 
    EngWord like '%apple%' or 
    WordID in (
        select 
            WordID 
        from 
            tbl_subword 
        where 
            EngWord like '%apple%'
    ); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T11:42:54.203

从语义上讲，它非常相似：

```
$term = 'apple';

$sub_query = db_select('tbl_subword')
  ->fields('tbl_subword', array('WordID'))
  ->condition('EngWord', '%' . db_like($term) . '%'), 'LIKE');

$query = db_select('tbl_word')
  ->fields('tbl_word')
  ->condition(db_or()
    ->condition('EngWord', '%' . db_like($term) . '%', 'LIKE')
    ->condition('WordID', $sub_query, 'IN')
  );

$results = $query->execute()->fetchAll(); 
```

# erlang - erlang中的Map Reduce查询

> ID：13818425
> 
> 赞同：1
> 
> 时间：2012-12-11T10:35:51.970
> 
> 标签：erlang, mapreduce, riak

我正在尝试在 erlang 中为 riak 编写一个 mapreduce 查询，但我无法理解它。有谁知道我在哪里可以找到一个 erlang mapreduce 查询的例子，或者可以写一个，它将执行相当于一个计数操作的 SQL？如果有人也可以逐行解释实际查询的作用，那也会很有帮助。我已经设法用 js 编写了一个，但是 erlang 完全不同。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:16:28.720

Riak 带有一组在 Erlang 中实现的预定义 mapreduce 函数，如果您尝试编写自己的函数，可以将其用作指南。提供的函数之一是 [reduce_count_inputs](https://github.com/basho/riak_kv/blob/master/src/riak_kv_mapreduce.erl)，它计算输入（只要输入不是整数）并且可能对您的场景有用。

我还创建了一个[用 Erlang 实现的映射阶段函数](https://github.com/whitenode/riak_mapreduce_utils)库，您可以查看。

虽然我相信[可以将 Erlang 函数作为 mapreduce 作业规范](http://lists.basho.com/pipermail/riak-users_lists.basho.com/2012-July/008795.html)的一部分以类似于发送匿名 JavaScript 函数的方式传递，但通常不建议这样做，我自己也没有这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T07:58:37.137

I always look into riak sources to find some good examples. Here module which implement standard mapreduce funs: [riak_kv_mapreduce](https://github.com/basho/riak_kv/blob/master/src/riak_kv_mapreduce.erl) [This](https://github.com/basho/riak_kv/blob/master/src/riak_kv_mapreduce.erl#L96) is a simples one, which just returns value of the object.

# javascript - foreach 块中的 knockout.js 绑定错误

> ID：13818431
> 
> 赞同：0
> 
> 时间：2012-12-11T10:36:02.517
> 
> 标签：javascript, knockout.js

我是 knockout.js 的新手，在**foreach**部分中绑定时遇到问题。我收到错误：

未捕获的错误：无法解析绑定。消息：ReferenceError：hideSearchElements 未定义；绑定值：点击：hideSearchElements

这是html的一个应用：

```
 <div id="searchResults" data-bind="visible: searchIsVisible">
  <label id = "lblSearchResults">select a template:</label>   
  <div data-bind="foreach: titles">
    <div data-bind="text: Title"></div>
    <div data-bind="click: hideSearchElements">hide</div>
 </div> 
```

并从 viewModel 中发挥作用：

```
var viewModel = function () {      
    this.searchIsVisible = ko.observable(true);               

    this.showSearchElements = function () {
       this.searchIsVisible(true);
    };

    this.hideSearchElements = function (
       this.searchIsVisible(false);                    }
    }

 return new viewModel(); 
```

我在 foreach 块之外的**showSearchElements**和**hideSearchElements**都可以正常工作，但是在里面时，我得到了错误。

如果我添加`$parent.hideSearchElements`，我可以绑定，但会收到错误消息：

Uncaught TypeError: Object # has no method 'searchIsVisible' 。

我可能有两个不同的问题，但认为细节可能会有所帮助:)

我很想知道这里发生了什么？有人可以帮忙吗？

文档中相关页面的链接也将非常有帮助 - 我现在正在阅读。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:40:30.107

使用时您是对的，`$parent.hideSearchElements`因为`hideSearchElements`函数位于父上下文中。你得到了异常，因为当`knockout`调用你的函数时`this`有另一个上下文。您必须使用闭包来存储`this`指针。更新您的视图模型如下：

```
var viewModel = function () {   
    var self = this;   
    self.searchIsVisible = ko.observable(true);               

    self.showSearchElements = function () {
       self.searchIsVisible(true);
    };

    self.hideSearchElements = function (
       self.searchIsVisible(false);                    }
    } 
```

# jquery - Google 可视化图例格式 Jquery ui 选项卡

> ID：13818433
> 
> 赞同：1
> 
> 时间：2012-12-11T10:36:08.750
> 
> 标签：jquery, jquery-ui-tabs, google-visualization

使用带有 Jquery ui 选项卡的 Google Visualization api 折线图时遇到问题。

我在两个选项卡上有两个图表。默认情况下可见的第一张图显示正常： ![在此处输入图像描述](../Images/ca59cb5e7a9d404596c1be5cd1d2219e.png)

隐藏选项卡上的第二个图表似乎弄乱了关键： ![在此处输入图像描述](../Images/a196d249068f49ec5b11282ef1a63a4d.png)

我已经尝试更改选项，但我所做的似乎没有任何区别。这是我的选择：

```
options = { 'title': title,
            titleTextStyle: { color: color, fontSize: 20 },
                'width': 950,
                'height': 400,
                hAxis: {
                    minorGridlines: {
                        count: x
                    }
                },
                chartArea:
                {
                    width: 880
                },
                legend: { position: 'bottom',
                    textStyle: { fontSize: 10 }
                }
            };
            // Instantiate and draw our chart, passing in some options.
            var chart = new google.visualization.LineChart(document.getElementById(divId));
            chart.draw(data, options);
$('#tabs').tabs(); 
```

关于造成这种情况以及如何预防的任何想法？

**编辑**

如果我删除`tabs()`呼叫，它会正确显示。根据@Vipul下面的答案，尝试将 div 设置为固定宽度，没有区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:43:41.117

你可以试试

1.  将固定宽度设置为选项卡 div(s)

2.  首先绘制图表，然后创建选项卡。

    setTimeout(function(){ /* 编写代码来创建标签 */},300);

# java - 是否可以从 eclipse.ini 文件中删除文件夹？

> ID：13818435
> 
> 赞同：3
> 
> 时间：2012-12-11T10:36:09.603
> 
> 标签：java, eclipse

我已经搜索了很多链接，任何人都可以告诉我是否可以通过在 eclipse.ini 文件中提及文件夹的位置来删除完整的文件夹？

我检查了这个链接，但找不到任何结论性的东西。

[http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/misc/runtime-options.html](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/misc/runtime-options.html)

示例：我可以做类似的事情吗

-launcher.deleteFolder C:/xyz/xxx

在 eclipse.ini 文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:12:57.653

你有几个选择。

*   在文件中插入`-clean`参数`eclipse.ini`*   将 shell 或批处理脚本挂接到`eclipse.exe`删除指定文件的*   在快捷方式上插入`-clean`参数`eclipse.exe`

    RCP 框架以两种方式存储配置详细信息：OR （不记得确切的文件名）。可以从源代码中清除这些文件。`"something".**prefs**``"something".**xml**`

    就个人而言，我会选择这个`batch`版本；但最干净、最时尚的方法是从源代码中清除。

    如果这些建议对您有任何帮助，请发表评论。

# android - ffmpeg 水印

> ID：13818436
> 
> 赞同：1
> 
> 时间：2012-12-11T10:36:14.130
> 
> 标签：android, ffmpeg, android-ffmpeg

我正在使用从 BAMBUSER 获得的 FFMPEG 静态编译库 for android。我现在面临的问题是从 BAMBUSER 获得的 FFMPEG 版本不支持水印。

```
ffmpeg -sameq -i mirror_watermark.mp4 -vf "movie=mirror_watermark.png [logo]; [in][logo] overlay=main_w-overlay_w:main_h-overlay_h [out]" output.mp4
No such filter: 'movie'

./configure --list-filters | grep movie
returns nothing 
```

所以我想我必须使用更新版本的 FFMPEG 但我不知道如何开始，因为使用 BAMBUSER 一切都已经设置好了，我只是在他们的脚本中添加了某些编码器和解码器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:18:47.713

我将其用作编译支持水印的较新 FFMPEG 版本的参考： [https ://github.com/guardianproject/android-ffmpeg](https://github.com/guardianproject/android-ffmpeg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-08T09:33:56.307

您可以使用**-overlay**。这将根据尺寸在图像或视频的特定位置添加您的水印。

使用以下命令：

```
-ffmpeg -i test.mp4 -i watermark.png -filter_complex "overlay=10:10" test1.mp4 
```

# php - 如果失败，则 codeigniter 表单验证将用户返回

> ID：13818438
> 
> 赞同：0
> 
> 时间：2012-12-11T10:36:16.480
> 
> 标签：php, codeigniter, codeigniter-2

我有这个控制器（visits.php），它使用 3 个模型来构建页面，然后将 4 个变量传递给视图。

此视图包含提交到另一个页面的表单 (add_user.php)

我的问题是，如果 for_validation 为假，我如何将用户发送回 visit.php？我是否必须再次重新加载visits.php？-浪费资源-或者我应该用js或php标头将他送回历史？你能告诉我一个你如何最好地处理form_validation的错误结果的例子吗？

请注意，当我用户

```
header('Location: ' . $_SERVER['HTTP_REFERER']); 
```

我无法回显validation_error() :(

感谢帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T10:57:02.933

您可以将validation_error() 存储在一段flash 数据中，然后您可以使用header(Location) - 或者您可以使用codeigniter redirect() 函数并在重定向页面中获取flashdata。

# ajax - 使用带有滑动效果的ajax在wordpress中加载页面

> ID：13818442
> 
> 赞同：0
> 
> 时间：2012-12-11T10:36:20.890
> 
> 标签：ajax, wordpress, slider

我有一个客户希望将他的 wix.com 网站转换为 wordpress。但是他想保持页面滑动效果。谁能告诉我如何使用带有滑动效果的ajax（从右到左）在wp中加载页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:18:36.033

我也有这个请求，我通过 ajax-page-loader 代码中的一些黑客攻击解决了这个请求。

在 ajax-page-loader.js 文件中，您可以找到 AAPL_loadPageInit() 函数。在这里，您可能想检查单击了哪个菜单项，然后像这样向右或向左推动#content 项。

```
$('#content').css('margin-left', '-1500px'); 
```

此函数触发 AAPL_loadPage() 函数。在第 160 行附近，#content 容器使用 fadeOut() 淡出，然后使用 fadeIn() 淡入 + 加载内容。

在 fadeIn 之前，您只需添加：

```
$('#content').css('margin-left', '0'); 
```

重置边距并将#content 容器放置到位。

为了使这一切看起来闪亮和酷，你将使用这样的 CSS 过渡：

```
#content { transition: margin 1s; } 
```

当然不要忘记给供应商添加前缀。希望这对您有所帮助，如果有任何不清楚或有任何疑问，请询问。

# php - 将我的标签链接到其他网站搜索

> ID：13818443
> 
> 赞同：-3
> 
> 时间：2012-12-11T10:36:21.580
> 
> 标签：php, search, hyperlink, tags

这是我的搜索代码

```
<div id="search">
    <form method="get" action="http://www.other-website.com/search">
        <input type="hidden" name="f" value="">
        <input type="text" placeholder="Temukan informasi, komunitas & produk yang kamu cari disini" accesskey="s" name="q">
        <input type="submit" value="Search">
    </form>
</div> 
```

这是标签代码（仅显示文本“不链接”）

```
<?php
$posttags = get_the_tags();
if ($posttags) {
  foreach($posttags as $tag) {
    echo $tag->name . ' ';
  }
}
?> 
```

该代码可以很好地应用于网站，但我必须在搜索中输入文本。我只想把我的标签放在那个搜索文本上

所以我的问题是如何使固定词（我的标签）自动放置在搜索中或我必须放置标签代码的位置，搜索结果是链接在@www.other-website.com/search 上的 mytag，因此用户不必输入? 我想在其他网站搜索中搜索我的标签

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:54:18.143

一个简单的方法是从输入搜索查询的文本框中获取值并使用`onsubmit()`创建 javascript 函数 `var searchkeyword=document.forms["formname"]["textboxname/id"].value;` `window.location("www.othersite.com/"+searchkeyword);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:49:17.807

经过一夜的尝试和错误，我想我已经找到了，这里是代码的详细信息：

```
<?php 
$posttags = get_the_tags(); 
if ($posttags) { 
    foreach($posttags as $tag) {
        $tag_link = 'http://xxx.orhersite.xxx';
        echo "<a href='$tag_link/$tag->name'>";
        echo "$tag->name";
    }
} ?> 
```

可以直接到其他网站搜索 xxx.othersite.xxx/search/my-tag 但现在其他问题表明，如果用户点击该链接，它会在同一页面打开。我试过了

```
echo "<a href onclick="window.open('');

<?php 
$posttags = get_the_tags(); 
if ($posttags) { 
    foreach($posttags as $tag) { 
        $tag_link = 'http://xxx.orhersite.xxx';
        echo "<a href onclick="window.open('$tag_link/$tag->name')">";
        echo "$tag->name";
    }
} ?> 
```

如何在该代码上使用 onClick 打开指向新选项卡的链接？

# android - Android：许多相同的按钮，onclick 肯定不起作用

> ID：13818454
> 
> 赞同：2
> 
> 时间：2012-12-11T10:36:42.967
> 
> 标签：android, button, onclick, android-linearlayout, onclicklistener

我有七个相等`Buttons`的`LinearLayout`

```
<?xml version="1.0" encoding="utf-8"?>    
   <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:weightSum="7" >

<Button
    android:id="@+id/btn_mon"
    android:layout_width="50dp"
    android:layout_height="50dp"
    android:layout_weight="1"
    android:background="@color/white"        
    android:text="0" />

<Button
    android:id="@+id/btn_tus"
    android:layout_width="50dp"
    android:layout_height="50dp"
    android:text="0"
    android:background="@color/white"        
    android:layout_weight="1"/>
<Button
    android:id="@+id/btn_wen"
    android:layout_width="50dp"
    android:layout_height="50dp"
    android:text="0"
    android:background="@color/white"        
    android:layout_weight="1"/>
<Button
    android:id="@+id/btn_thu"
    android:layout_width="50dp"
    android:layout_height="50dp"
    android:text="0"
    android:background="@color/white"        
    android:layout_weight="1"/>
<Button
    android:id="@+id/btn_fri"
    android:layout_width="50dp"
    android:layout_height="50dp"
    android:text="0"
    android:background="@color/white"        
    android:layout_weight="1"/>
<Button
    android:id="@+id/btn_sat"
    android:layout_width="50dp"
    android:layout_height="50dp"
    android:text="0"
    android:background="@color/white"        
    android:layout_weight="1"/>
<Button
    android:id="@+id/btn_sun"
    android:layout_width="50dp"
    android:layout_height="50dp"
    android:text="0"
    android:background="@color/white"       
    android:layout_weight="1"/>
</LinearLayout> 
```

他们的 OnClickListener 也相等（并且也在初始化）：

```
if (convertView == null) {
                LayoutInflater inflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                convertView = inflater.inflate(R.layout.calendar_row, null);
            }

final Button btn_mon = (Button)convertView.findViewById(R.id.btn_mon);
final Button btn_tus = (Button)convertView.findViewById(R.id.btn_tus);
final Button btn_wen = (Button)convertView.findViewById(R.id.btn_wen);
final Button btn_thu = (Button)convertView.findViewById(R.id.btn_thu);
final Button btn_fri = (Button)convertView.findViewById(R.id.btn_fri);
final Button btn_sat = (Button)convertView.findViewById(R.id.btn_sat);
final Button btn_sun = (Button)convertView.findViewById(R.id.btn_sun);

        btn_mon.setOnClickListener(new View.OnClickListener() {             
            public void onClick(View v) { onCalBtnClick(btn_mon, weekdays.get(0).data); }});
        btn_tus.setOnClickListener(new View.OnClickListener() {             
            public void onClick(View v) { onCalBtnClick(btn_tus, weekdays.get(1).data); }});
        btn_wen.setOnClickListener(new View.OnClickListener() {             
            public void onClick(View v) { onCalBtnClick(btn_wen, weekdays.get(2).data); }});
        btn_thu.setOnClickListener(new View.OnClickListener() {             
            public void onClick(View v) { onCalBtnClick(btn_thu, weekdays.get(3).data); }});
        btn_fri.setOnClickListener(new View.OnClickListener() {             
            public void onClick(View v) { onCalBtnClick(btn_fri, weekdays.get(4).data); }});
        btn_sat.setOnClickListener(new View.OnClickListener() {             
            public void onClick(View v) { onCalBtnClick(btn_sat, weekdays.get(5).data); }});
        btn_sun.setOnClickListener(new View.OnClickListener() {             
            public void onClick(View v) { onCalBtnClick(btn_sun, weekdays.get(6).data); }}); 
```

onCalBtnClick 方法：

```
private void onCalBtnClick(Button btn, int day){            

            Log.d("debug", String.valueOf(day));
            btn.setTextColor(mContext.getResources().getColor(R.color.orange));
            //selectedYear, month are global
            Intent intent = new Intent();
            intent.putExtra("year", selectedYear);
            intent.putExtra("month", month);
            intent.putExtra("day", day);
            setResult(RESULT_OK, intent);
            finish();
        } 
```

但是，如果我`Log.d`输入`onCalBtnClick`方法（从 each 调用它`clicklistener`），则只有中间的三个按钮起作用。左侧的两个按钮（*btn_mon*，*btn_tus*）和右侧的两个按钮（*btn_sat*，*btn_sun*）不会对用户单击做出反应。中间按钮工作正常。

这是类似的问题[Android LinearLayout make button doesn't work](https://stackoverflow.com/questions/11170248/android-linearlayout-make-button-doesnt-work)但我的布局文件与答案中的模式相对应，但按钮仍然不起作用

**更新**

当我删除布局文件中的固定按钮高度和宽度（从 50dp 到 wrap_content）时，所有按钮都开始工作了！

但是，现在它看起来并不需要。按钮上的文本之间需要空间。

主要问题：**为什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:00:58.133

如果您在布局中使用权重，您就是在告诉它应该填充一些具有某些比例的对象。它与“wrap_content”正好相反。使用权重外部布局定义内部视图的大小，而“wrap_content”表示外部布局大小由内部视图定义。请决定在这种情况下哪种方法更好 - 删除权重或固定内部视图大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:09:45.507

将您的线性布局的宽度和高度设置为 FILL_PARENT 。它肯定会工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T11:11:33.867

尝试为适配器类之外的按钮声明所有 setOnClickListener，并在初始化 weekdays 数组之后。

这将解决你的问题。

或者尝试为所有按钮设置这样的条件：

```
if (btn_mon != null && position < weekdays.size()) {
      btn_mon.setOnClickListener(new View.OnClickListener() {             
            public void onClick(View v) { onCalBtnClick(btn_mon, weekdays.get(0).data); }});
} 
```

# javascript - Devexpress 控件的奇怪更新面板问题

> ID：13818455
> 
> 赞同：0
> 
> 时间：2012-12-11T10:36:44.643
> 
> 标签：javascript, asp.net, ajax

我对更新面板有一些奇怪的问题。

我在我的一个应用程序中使用 Devexpress Controls、JQUERY AJAX。我使用了服务器端编码 + 客户端编码方法，即在一些存在 aspxgridview 的页面上使用 Jquery、JS 和 AJAX + 更新面板。

根据我遇到的问题，我正在通过示例情况创建一个场景：

1) 有一些用于egCounty、State 和City 的ASPxcomboBoxes。

2）在客户端选择的国家/地区索引更改时，我已通过 AJAX 获取数据并使用 JSON 绑定状态 ASPxComboBox 中的状态，并且对于状态的客户端索引更改的城市组合也是如此。

3）在城市组合的索引更改中，我已经绑定了一个带有一些相关数据的 ASPxGridView，并且 ASPxGridView 和城市组合被包装在更新面板中，因为我们无法通过 AJAX 绑定 ASPxGridView 以避免回发，我使用了更新面板并且它工作正常。

4）如果用户在提交点击时没有从网格中选择任何记录，那么它会提示用户选择任何一条记录，并且我已经在服务器端按钮的点击事件上保留了验证。

现在，问题是在提交和验证发生之后。该州的组合项目正在重复，例如初始项目是：--select--，美国，在提交验证后显示--select--，美国，--select--，美国。

**我没有将页面加载事件上的控件绑定为通过客户端绑定的控件。EnableSynchronisation 的属性为 True 以同步 aspxComboBox 的客户端和服务器项。**

当我点击提交时看到使用调试器。我在页面加载事件上快速观看了状态组合，其项目数为 4，因为 2 是重复项目。

**问题甚至出现在页面 Load 事件的第一行，当我将 Watch 添加到其中时，我得到的项目计数为 4，这意味着项目被错误地发布到服务器。**

**当我删除更新面板时，一切正常。**

我不知道为什么在服务器上发布了错误的项目/重复项目。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:34:02.667

解决了这个问题。

将更新面板包装到状态组合。

实际上不需要它，因为不需要通过服务器操作刷新状态组合，因为我使用 AJAX 在客户端上绑定它。

但是将更新面板包装到它确实解决了这个问题。

# c++ - 用模板方法覆盖虚方法

> ID：13818463
> 
> 赞同：9
> 
> 时间：2012-12-11T10:37:03.263
> 
> 标签：c++, templates, inheritance, virtual-functions

> **可能重复：**
> [成员函数模板可以是虚拟的吗？](https://stackoverflow.com/questions/2354210/can-a-member-function-template-be-virtual)

在基类中，函数`my_func`被定义为虚拟的。但是，在派生类中我想必须`my_func`是一个模板方法。这可能吗？

似乎不是。我收到错误*“无法分配抽象类型的对象”*，我认为这与编译器不承认`my_func`基类中虚拟的覆盖有关。这是否揭示了一个糟糕的设计？

非常感谢。

更新：感谢您的回答。你们中的一些人建议我应该发布一些代码，所以就在这里。在基类中：

```
virtual void Fill(EventInfo* info, EasyChain* tree, vector<Muon*>& muons, vector<Electron*>& electrons, vector<Jet*>& jets, LorentzM& met) = 0; 
```

但是在派生类中我想要：

```
template<typename _Jet> 
void Fill(EventInfo* info, EasyChain* tree, vector<Muon*>& muons_in, vector<Electron*>& electrons_in, vector<_Jet>& jets_in, LorentzM& met){ 
```

从您的回答中，我了解到该问题的解决方案是在派生类中定义另一个函数：

```
void Fill(EventInfo* info, EasyChain* tree, vector<Muon*>& muons, vector<Electron*>& electrons, vector<Jet*>& jets, LorentzM& met){
//
} 
```

但是，这个函数和模板函数在 be 的情况下是一样的`_Jet`，`Jet*`那不也是个问题吗？

有人在这里提出了一个设计问题，我想这是真的，我必须考虑如何解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T10:47:00.840

您的模板化方法*重载*了原始方法（名称相同但参数不同）。您仍然必须*覆盖*原始类，以使您的派生类非抽象。你可以做到这两个都没问题，所以你将在派生类中有两个版本的方法，只是要小心并意识到哪个会被调用......

然后，您可以制作方法的覆盖重载版本来调用新的模板重载版本。这可能会或可能不会做您想要实现的目标，具体取决于您想要实现的目标......

模板方法最好使用不同的名称，以避免混淆，因为无论如何您都不能直接调用它，除非您有派生类类型的指针。如果您有指向抽象基类的指针，则必须使用其中定义的参数调用该方法，即使它是虚拟方法并且实际调用的是派生类方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T10:42:31.170

问题是模板正在改变函数的签名，所以它不再覆盖基类中的虚函数，因此你的类仍然是抽象的。

模板化虚函数似乎破坏了基类中虚函数的多态性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T10:41:45.687

派生类中的函数需要具有相同的签名才能正确覆盖基类的函数（并消除抽象类型错误）。这意味着：

*   一样的名字
*   相同的参数编号和类型
*   相同的限定符（例如常量）
*   兼容的返回类型（即使这在技术上不是签名 iirc 的一部分）

所以确实，在这种情况下使用模板会导致这种错误。最好的办法是发布代码示例，以便人们更好地了解您的具体案例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T10:45:14.763

你不能这样做，因为`my_func`模板版本与基类不协变。顺便说一句，这是您在这里遇到的设计问题。

# c# - 基于类属性输出字符串的通用方法

> ID：13818464
> 
> 赞同：0
> 
> 时间：2012-12-11T10:37:04.217
> 
> 标签：c#

有这两个类：

```
class A
{
    public A()
    {
        strA1 = "A1";
        strA2 = "A2";
        strA3 = "A3";
    }

    public string strA1 { get; set; }
    public string strA2 { get; set; }
    public string strA3 { get; set; }
}

class B
{
    public B()
    {
        strB1 = "B1";
        strB2 = "B2";
    }

    public string strB1 { get; set; }
    public string strB2 { get; set; }
} 
```

我正在尝试找到一种方法来拥有一个**方法**（可能是 override `toString()`），该方法将根据这些类**中的属性数量生成信息。**

例如，结果将是：

```
for Class A: "{\""A1\"",\""A2\"",\""A3\""}";  // {"A1","A2","A3"}
for Class B: "{\""B1\"",\""B2\""}";           // {"B1","B2"} 
```

如何在不为每个类编写特定代码的情况下以通用方式完成？

可能基类是开始...请告知

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T10:46:27.310

您可以使用反射获取类型信息和公共属性值。这是一个扩展方法：

```
public static string ConvertToString(this object obj)
{
   Type type = obj.GetType();
   var properties = 
         type.GetProperties()
             .Where(p => p.GetGetMethod() != null)
             .Where(p => !p.GetIndexParameters().Any())
             .Select(p => p.GetValue(obj, null))
             .Select(x => String.Format("\"{0}\"", (x == null) ? "null" : x));

   return String.Format("{{{0}}}", String.Join(", ", properties));
} 
```

用法：

```
string info = new A().ConvertToString(); 
```

输出：

```
{"A1","A2","A3"} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T10:42:26.093

查看反射，动态读取对象的所有属性。您可以在基类中覆盖 ToString 并使用反射来输出所有道具。

```
public override string ToString()
{
    var props = GetType().GetProperties();
    foreach(var prop in props)
        ...
} 
```

（未经测试，只是为了给你一个大致的想法。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T10:44:20.567

您可以编写一个使用反射实现这种方法的基类。

```
Type t = this.GetType()
foreach (PropertyInfo Info in t.GetProperties())
{
    // Property Name: Info.Name
    // Property Value: t.GetProperty(Info.Name).GetValue(this);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T10:45:29.977

您可以使用 XML 序列化。

# sencha-touch - 如何在没有 phonegap 的情况下使用 Sencha Touch 上传照片图像

> ID：13818465
> 
> 赞同：2
> 
> 时间：2012-12-11T10:37:04.263
> 
> 标签：sencha-touch, sencha-touch-2

是否可以使用 Sencha Touch 上传手机创建的图像但不依赖 PhoneGap？基本上我的应用程序可以通过网络访问，而不是在设备上本地安装。我希望能够从手机存储中选择图像，然后能够将其上传到服务。我实际上想要与普通桌面浏览器上的文件上传控件相同的功能。

这可能吗，如果可以，怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T17:43:36.407

目前有一个处于起步阶段的解决方案，但它确实有效。我使用 Chrome 在我的 Nexus 7 上对其进行了测试。以下是兼容性列表：

*   Android（4.0 以上）浏览器支持常规
*   桌面版和移动版谷歌浏览器
*   iOS Safari 浏览器从 6.0 版开始支持（未在移动设备上测试）

[https://github.com/kostysh/File-uploading-component-for-Sencha-Touch](https://github.com/kostysh/File-uploading-component-for-Sencha-Touch)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T04:19:16.560

在很多情况下，桌面网络浏览器和移动浏览器是不同的。要访问文件上传选项，您需要访问仅使用 javascript 无法访问的 OS API。Phonegap 为我们提供了将 js 与设备 API 连接的选项。如果你能找到一种方法来做到这一点，而不使用 Phonegap，那么你可能可以修复，否则它是不可能的。

# apache-flex - 始终在辅助显示器和全屏模式下启动 Flash 播放器

> ID：13818466
> 
> 赞同：0
> 
> 时间：2012-12-11T10:37:08.587
> 
> 标签：apache-flex, adobe, flash, flashdevelop

我正在尝试将 Flash Player 启动位置的位置设置为使用 VGA 电缆连接的辅助显示器，并且我希望始终以全屏模式启动它。经过几次搜索，我找到了一个与该主题相关的链接： [http ://www.flashdevelop.org/community/viewtopic.php?f=7&t=6658](http://www.flashdevelop.org/community/viewtopic.php?f=7&t=6658)

但这似乎对我不起作用。当 Flash Player 作为新进程启动时，如何设置它的 x,y 坐标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T06:35:49.400

Adobe air 有一个 Screen 类来处理这个问题。为了帮助您，Google 代码上有一个开源项目，它封装了它并处理了一些基础知识：

[http://code.google.com/p/airscreenmanageras3/](http://code.google.com/p/airscreenmanageras3/)

# php - 如何在 joomla 2.5 中的特定时间后禁用菜单项？

> ID：13818469
> 
> 赞同：0
> 
> 时间：2012-12-11T10:37:12.123
> 
> 标签：php, mysql, joomla

假设我有一个“航空公司预订”的菜单项，它应该在 4 点钟后变得不活动，那么在 joomla 2.5 中应该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:05:40.447

你不需要在 joomla 上做任何事情。

在这种情况下，您需要做的正确事情是在结束时间之后需要关闭什么功能。单击菜单->在该页面中检查时间并阻止事物。这是最佳做法。

另一种方法是：

您可以通过使用 Javascript 来实现这一点。但这根本不是一个好习惯。获取用户的本地时间并将其与您的禁用时间（4 点钟）进行比较。这与时区有一些复杂性，但您可以使用 js 来完成。然后使用 jquery 删除该菜单的链接和 . 喜欢：

```
jQuery("#menu_id").attr('href','javascript:;'); 
```

没有基于时间的菜单项到期的概念，您可以为已注册、公共等菜单提供一些访问级别。

希望对你有帮助 ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T00:56:36.777

菜单没有 publish_up publish_down，但如果每天同一时间始终关闭它，您应该运行一个 cron 作业来取消发布它。

# sql - 根据多个条件的另一个表中的 SUM(values) 更新一个表

> ID：13818472
> 
> 赞同：13
> 
> 时间：2012-12-11T10:37:14.707
> 
> 标签：sql, tsql, sql-update

我似乎无法找到如何做到这一点，也不确定如何搜索它！

我有一张桌子`[MASTER]`：

```
ID varchar(6)
CCY varchar(3)
Val1 decimal(20,5)
Val2 decimal(20,5)
FOO decimal(20,5) 
```

和另一张桌子`[FOOS]`

```
ID varchar(6)
CCY varchar(3)
Val decimal(20,5) 
```

`MASTER`每个 ID/CCY 复合键包含一行（不确定这是否是正确的术语），例如

```
ABCDEF GBP 200.00 100.00 null
ABCDEF EUR 400.00 150.00 null
ZYXWVU GBP 300.00 200.00 null
ZYXWVU EUR 400.00 200.00 null 
```

`FOOS`包含多行并且不包含每个`MASTER`例如的行

```
ABCDEF GBP 50.00
ABCDEF GBP 51.00
ABCDEF GBP 150.00
ZYXWVU GBP 100.00
ZYXWVU EUR 200.00
ZYXWVU EUR 400.00 
```

我想运行一个查询来只更新匹配的`MASTER`行`SUM(FOOS.Val)`。例如

```
ABCDEF GBP 200.00 100.00 251.00
ABCDEF EUR 400.00 150.00 null
ZYXWVU GBP 300.00 200.00 100.00
ZYXWVU EUR 400.00 200.00 600.00 
```

...但是尽管我尝试了许多选项（`where exists`, `inner join`），但我似乎无法链接到单个选项`MASTER`或执行`SUM(...)`

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-11T10:39:58.260

试试这个解决方案：

```
UPDATE m
SET m.Foo = f.valsum
FROM [MASTER] m
INNER JOIN
(
  SELECT ID, CCY, SUM(val) valsum
  FROM Foos
  GROUP BY  ID, CCY 
) f ON m.ID = f.ID AND m.CCY  = f.CCY; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-03-01T05:31:48.850

使用 postgres，我必须调整解决方案才能为我工作：

```
UPDATE [MASTER] m
SET Foo = f.valsum
FROM 
(
  SELECT ID, CCY, SUM(val) valsum
  FROM Foos
  GROUP BY  ID, CCY 
) f
WHERE m.ID = f.ID AND m.CCY = f.CCY; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-02T22:11:17.487

更新帐户 SET (contact_last_name, contact_first_name) = (SELECT last_name, first_name FROM salesmen WHERE salesmen.id = accounts.sales_id);

update orders set amount = (select sum(item_quantity) from order_items where orders.id = order_items.order_id);

# c# - SHA1加密问题

> ID：13818482
> 
> 赞同：0
> 
> 时间：2012-12-11T10:37:56.823
> 
> 标签：c#, database, encryption

我的密码加密有问题。我想像图片中未突出显示的那样加密密码。

我编写了以下 c# 代码：

```
 SHA1CryptoServiceProvider x = new SHA1CryptoServiceProvider();

        //byte[] bs = System.Text.Encoding.Unicode.GetBytes(password);
        //byte[] bs = System.Text.Encoding.UTF32.GetBytes(password);
        byte[] bs = System.Text.Encoding.UTF8.GetBytes(password);
        bs = x.ComputeHash(bs);
        var s = new StringBuilder();
        foreach (byte b in bs)
        {
            s.Append(b.ToString("x2").ToLower());
        }

        new UserService().ChangeUserPassword(username, s.ToString()); 
```

以正确的方式加密密码，我使用以下我想要删除的 SQL 代码：

> `CAST(hashbytes('SHA1',@newuserpassword) as nvarchar)`

这是结果： ![在此处输入图像描述](../Images/83a62d2138ef9dae792a2e52a38c6b32.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:43:20.367

查看文档[`CONVERT`](http://msdn.microsoft.com/en-us/library/ms187928.aspx)，我怀疑您只是想要：

```
CONVERT(nvarchar, hashbytes('SHA1',@newuserpassword), 2) 
```

其中 2 是在没有前导 0x 的情况下转换为十六进制的样式。我建议你指定虽然的长度`nvarchar`，应该是 40（20 个字节，每个字节 2 个字符）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:49:50.637

我强烈建议您放弃以字符形式存储二进制数据。不过，如果您出于遗留原因需要保留它，这里是 SQL 语句的翻译：

```
byte[] bytes = ...; //your binary data here
var nastilyBrokenChars =
    Enumerable.Range(0, bytes.Length / 2)
    .Select(i => (char)BitConverter.GetInt16(bytes, i * 2))
    .ToArray();
string nastilyBrokenString = new string(nastilyBrokenChars); 
```

尽你所能，我在`bytes`每个`char`. 这本身就是一种无损转换。但我**不相信**将这些数据存储到 SQL Server（并稍后进行比较）是无损的。

# node.js - 简单网站如何用 Node.js 替换 IIS

> ID：13818483
> 
> 赞同：2
> 
> 时间：2012-12-11T10:37:56.903
> 
> 标签：node.js

我来自微软世界，所以请多多包涵。有人告诉我我可以安装 node.js 并将其用作 Web 服务器而不是 IIS。这是一个非常小的企业应用程序。在 IIS 中，我可以创建虚拟目录并指向网页的位置，一切正常。根据我阅读的很少，我几乎没有问题；

1.  是否可以将节点 js 作为 Windows 服务或任何其他形式运行以使其永远运行？我确实找到了`forever`我认为可以使用的包。
2.  在 IIS 中，我可以创建虚拟目录设置端口，仅此而已，我有自己的网站。

我没有看到任何示例可以在其中使用我有网页的目录，用 java 脚本编写并指向它作为网站运行。所有的例子都有一些类似 server.js 的东西，它运行和路由调用。托管网站并使用 node.js 作为快速 Web 服务器简单运行的另一种方法是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T15:27:18.513

> 有人告诉我我可以安装 node.js 并将其用作 Web 服务器而不是 IIS。

这是真的，但是正如您已经发现的那样，您负责提供 IIS 已经为您做的事情（例如，在重新启动或崩溃时自动重新启动，通过创建虚拟文件夹来托管多个站点等等。）

您确实可以在 Node.js 中解决所有这些问题，并且有几个库可以在每个领域提供帮助。这不是太难，但你需要做一些研究。

您还可以在 IIS 后面运行 Node.js。看看 iisnode [http://tomasz.janczuk.org/2011/08/hosting-nodejs-applications-in-iis-on.html](http://tomasz.janczuk.org/2011/08/hosting-nodejs-applications-in-iis-on.html)

> 是否可以将 node js 作为 Windows 服务或任何其他形式运行以使其永远运行？

库 Forever 负责在站点崩溃时重新启动站点……但我不知道您是否可以将其作为 Windows 服务运行。我没试过。

> 在 IIS 中，我可以创建虚拟目录设置端口，仅此而已，我有自己的网站。

我假设您正在谈论一个提供静态 HTML 文件的网站，对吧？如果是这种情况，那么 Node.js 很容易支持，要么编写自己的 Web 服务器，要么使用 Express.js 提供静态文件。

> 我没有看到任何示例可以在其中使用我有网页的目录，用 java 脚本编写并指向它作为网站运行。所有的例子都有一些类似 server.js 的东西，它运行和路由调用。

这是一个在 Node.js 中提供纯 HTML 文件的非常简单的示例[https://gist.github.com/2573391](https://gist.github.com/2573391)但是不要在生产中使用它。这只是一个示例，它没有任何类型的错误处理或安全性。

> 托管网站并使用 node.js 作为快速 Web 服务器简单运行的另一种方法是什么。

正如其他人所说，您应该查看 Express.js [http://expressjs.com/](http://expressjs.com/)它提供了一些您在构建传统网站时很可能需要的基础设施。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T10:53:43.290

您说您在 IIS 后面运行“非常小的业务应用程序”。除非它是为 Node.js（在 JavaScript 中）编写的，否则它不会工作。

没有指向目录并将其作为网站运行的示例，因为这不是 Node.js 中的工作方式。您编写一个 Node.js 应用程序并拉入一个网络服务器库。

简而言之，在 Node.js 中，您不会将应用程序嵌入到网络服务器中；您将网络服务器嵌入到应用程序中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T10:42:07.817

当我使用 node.js 时，我通过代理服务器 nginx 重定向 HTTP 请求。我不知道你是否可以直接将node.js 绑定为HTTP 服务器，但是对于它的价值，nginx 非常好！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T11:01:26.577

首先，请允许我分享一个介绍。恕我直言，您应该通过添加各种参数来做出这个决定（从 IIS 移动到 nodeJS）。我属于 Java 和 PHP 社区，但我使用 NodeJS 来实现极其具体的实现，其中 NodeJS 执行速度最快（快速 IO、AJAX-JSON 响应等）。由于您具有 Microsoft 背景，因此您应该使用不太舒服的解决方案。

是的，它可以将 NodeJs 作为 Windows 服务运行并且`Forever`会很好。

是的，您可以创建“虚拟目录”，但通过创建指向您的每个客户网站的符号链接。

我建议好好看看[bouncy](https://github.com/substack/bouncy) & [express](http://expressjs.com/)，如果你愿意采取这一步，那么这些包正是你所需要的。

干杯!

# objective-c - 重新加载 tableview 导致崩溃

> ID：13818484
> 
> 赞同：0
> 
> 时间：2012-12-11T10:37:58.710
> 
> 标签：objective-c, ios

大家好，我正在编写 ios 应用程序，当我从服务器进行搜索时获取带有数据和搜索栏的 tableview 然后我解析它然后我用新内容重新加载 tableview 然后它因这个错误而崩溃

```
Assertion failure in -[UITableView _endCellAnimationsWithContext:], /SourceCache/UIKit_Sim/UIKit-2372/UITableView.m:862
2012-12-11 11:52:54.108 Mazadqatr[15903:c07] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'attempt to delete row 0 from section 0 which only contains 0 rows before the update' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:44:29.350

你的`UITableView`第一个`section`是没有行，但你正试图在那里做一些删除。检查您`datasource`的.`UITableView``viewcontroller`

# r - R中的多维稀疏数组（3路张量）

> ID：13818490
> 
> 赞同：15
> 
> 时间：2012-12-11T10:38:15.513
> 
> 标签：r, tensor

使用`Matrix`包我可以创建一个二维稀疏矩阵。

有人可以建议一个允许我在 R 中创建多维（特别是 3 维）稀疏矩阵（数组，或者技术上是三向张量）的包吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-11T13:06:08.527

这个`slam`包有一个`simple_sparse_array`类： http: [//finzi.psych.upenn.edu/R/library/slam/html/array.html](http://finzi.psych.upenn.edu/R/library/slam/html/array.html)，虽然它只支持索引和强制（如果你想做张量操作，或者元素算术，无需转换回常规密集数组，您必须自己实现它们......）

我通过这样做找到了这个

```
library("sos")
findFn("{sparse array}") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-09T08:28:59.607

还有一个`tensorr`包，它看起来很有希望为稀疏张量提供支持，并且像 PARAFAC/CANDECOMP 等张量分解也在待办事项列表中： [https ://cran.r-project.org/web/packages/tensorr/自述文件.html](https://cran.r-project.org/web/packages/tensorr/README.html)

# php - IIS 7.5 上的 PHP - 大文件下载会阻止连接，直到下载完成

> ID：13818497
> 
> 赞同：1
> 
> 时间：2012-12-11T10:39:09.960
> 
> 标签：php, iis, download

我想允许用户下载大型视频文件。由于安全原因，这些文件位于公用文件夹之外。

我正在使用 fopen()、feof() 和 fread() 的组合来下载块中的文件。

下载工作正常。视频已下载，也可以正常工作。问题出在下载过程中。在下载文件之前，任何正在下载该文件的用户都无法继续浏览该站点。浏览器正在尝试建立连接，但在下载文件时挂起。下载完成后，立即建立连接。其他用户可以在下载过程中很好地浏览该站点，因此不会像整个服务器挂起或其他什么。

我正在使用安装在 IIS 服务器上的 PHP (CakePHP)。

一段代码：

```
$name = "filename.mp4";
$folder = "private/folder/";

$handle = fopen($folder.$name, "rb");

if(!$handle)
{
    echo "File not found";
}
else
{
    header("Content-length:".filesize($folder.$name));
    header("Content-Type: video/mp4");
    header("Content-Disposition: attachment; filename='filename.mp4'");
    header("Content-Transfer-Encoding: binary");

    session_write_close(); // this is the solution  

    while(!feof($handle))
    {
        $buffer = fread($handle, 1*(1024*1024));
        echo $buffer;
        ob_flush();
        flush();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T21:35:22.190

我终于解决了这个问题。如上所述，问题确实与会话有关。即使 session.auto_start 关闭，CakePHP 本身也在处理会话。因此，通过`session_write_close()`在 while 循环之前插入，问题就解决了。

# ruby-on-rails-3 - main:Object 的未定义方法“send_data”

> ID：13818498
> 
> 赞同：2
> 
> 时间：2012-12-11T10:39:11.533
> 
> 标签：ruby-on-rails-3, amazon-s3, paperclip, download

我正在尝试使用回形针和 aws-sdk gem 下载存储在亚马逊 s3 存储桶中的数据。对象可公开访问。

我的控制器中有一个方法，我打算直接下载数据。

```
def method_where_downloading_happens
  code for finding url from params
  send_file "ModelName.attached_file.url"
end 
```

`#Tried both with static and dynamic url.`

我收到以下错误

```
NoMethodError: undefined method `send_file for main:Object 
```

但是，如果我使用：-

```
send_file open(ModelName.attached_file.url) 
```

然后下载了一个文件，但它的格式是二进制的，即 windows 无法识别 file_type。

当这个人点击链接时，请帮助我如何提供直接下载。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T11:04:50.070

你可以试试这个：

```
#In your environment.rb require 'open-uri'
require 'open-uri'

#As send_data will work in controller, so in your controller
def index
  data = open(params[:file])
  send_data data, :filename => params[:name], ...
end 
```

# html - 是否可以将多个谷歌分析分别添加到单个页面

> ID：13818503
> 
> 赞同：2
> 
> 时间：2012-12-11T10:39:18.227
> 
> 标签：html, google-analytics, google-apps-script

我需要将两个谷歌分析添加到一个页面

脚本 1

```
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-xxxxxx-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script> 
```

脚本 2

> ```
> <script type="text/javascript">
> 
>   var _gaq = _gaq || [];
>   _gaq.push(['_setAccount', 'UA-xxxxxx-2']);
>   _gaq.push(['_trackPageview']);
> 
>   (function() {
>     var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
>     ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
>     var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
>   })();
> 
> </script> 
> ```

我可以将这两个脚本分别添加到我的 html 页面中吗？

我看到了组合 2 个脚本之类的方法

```
 <script type="text/javascript">
   var trackerA = _gat._getTracker("UA-XXXXXXX-X");
   trackerA._initData();
   trackerA._trackPageview();
   var trackerB = _gat._getTracker("UA-XXXXXXX-X");
   trackerB._initData();
   trackerB._trackPageview();
 </script> 
```

我担心的是，我们可以单独添加脚本吗？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:24:31.790

注意：`_initData()`已弃用。

您可以通过在 _gaq.push 调用中指定函数名称之前的名称来同时使用多个跟踪器：

```
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-xxxxxx-1']);
_gaq.push(['_trackPageview']);
_gaq.push(['b._setAccount', 'UA-xxxxxx-2']);
_gaq.push(['b._trackPageview']); 
```

# android - layout_margin 只影响顶部？

> ID：13818512
> 
> 赞同：0
> 
> 时间：2012-12-11T10:40:08.933
> 
> 标签：android, layout

`android:layout_margin`还是`android:padding`会影响所有四个方向？

看起来它设置了“顶部”和“左侧”。找不到要确认的文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:47:00.557

是的，它影响到各方。

`android:layout_margin` - 指定视图左侧、顶部、右侧和底部的额外空间。

`android:padding`- 设置所有四个边缘的填充（以像素为单位）。

`xml`我认为您的文件中有错误。

# c# - 如何使用 WPF 和 C#.net 将数字转换为货币格式

> ID：13818515
> 
> 赞同：0
> 
> 时间：2012-12-11T10:40:23.933
> 
> 标签：c#, wpf

> **可能重复：**
> [使用千位分隔符将字符串值转换为十进制？](https://stackoverflow.com/questions/13834265/convert-string-value-to-decimal-with-thousand-seperator)

这可能是一个非常简单的问题。

我想要一个将数字转换为货币格式。

双数 = 1000000.00；

转换成

字符串 Strnumber = 10,00,000.00;

任何想法？..................

但它只显示数字而不是货币名称

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:43:08.457

使用`C`货币的格式说明符。

```
Double number = 1000000.00;
String output = number.ToString("C2"); 
```

*   [货币（“C”）格式说明符](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx#CFormatString)

[**演示**](http://ideone.com/aBTmLI)

**编辑**：如果您不想要评论中的货币符号，您可以`ToString`使用`FormatProvider`. 然后传递一个[`NumberFormatInfo`](http://msdn.microsoft.com/en-us/library/system.globalization.numberformatinfo.aspx)没有符号的自定义：

```
var culture = CultureInfo.CurrentCulture;
var mutableNfi = (NumberFormatInfo) culture.NumberFormat.Clone();
mutableNfi.CurrencySymbol = "";
String output = number.ToString("C2", mutableNfi); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:43:10.907

```
decimal value = 16325.62m;
string specifier;

specifier = "N";
Console.WriteLine("{0}: {1}", specifier, value.ToString(specifier));
// Displays:    N: 16,325.62 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T10:52:17.517

从所需的输出来看，您似乎正在使用印度数字分组系统。

以下应为您提供以 Lakh/Crore 等格式形成的值。

```
Double number = 1000000.00;
Console.WriteLine(String.Format(new System.Globalization.CultureInfo("en-IN"), "{0:C2}", number)); 
```

它应该输出

```
10,00,000.00 
```

如果要显示不带货币符号的数字。您可以使用`N`通用数字说明符重新格式化数字。唯一要考虑的问题是您希望如何显示负数。例如，

```
Double number = 1000000.00;
Console.WriteLine(String.Format(new System.Globalization.CultureInfo("en-IN"), "{0:N2}", number)); 
```

或者，您可以替换数字格式说明符中的货币符号。例如，

```
System.Globalization.CultureInfo ci = new System.Globalization.CultureInfo("en-IN");
ci.NumberFormat.CurrencySymbol = "";
Console.WriteLine(String.Format(ci, "{0:N2}", number)); 
```

两者都应该输出

```
10,00,000.00 
```

# symfony - Symfony 2 - 访问映射的对象属性表单树枝

> ID：13818519
> 
> 赞同：1
> 
> 时间：2012-12-11T10:40:31.823
> 
> 标签：symfony, doctrine-orm, twig

我有一个具有以下飞行的实体：

```
/**
 * @ORM\ManyToOne(targetEntity="Document", inversedBy="posts")
 * @ORM\JoinColumn(name="document_id", referencedColumnName="id")
 */
protected $image; 
```

我用以下方法得到：

```
public function indexAction() {
    $posts = $this->getDoctrine()
            ->getRepository('airpaprcms2Bundle:Post')
            ->findByPageType(1);

    if (!$posts) {
        throw $this->createNotFoundException('No posts in Database!');
    }

    return $this->render('airpaprcms2Bundle:Default:index.html.twig', array('posts' => $posts));
} 
```

如何访问 twig 中映射对象表单的属性？我试过`post.image.file`（映射的实体 Document 有一个属性文件）

```
{% for post in posts %}
<div>
    <h1>
        <a href="{{ path('_view', {'slug': post.slug}) }}">{{ post.title }}</a>
    </h1>
    <p>{{ post.text }}</p>
    <img src="{{ post.image.name }}" alt="{{ post.title }}" />
</div>
{% endfor %} 
```

并收到以下错误消息：

```
Item "file" for "" does not exist in airpaprcms2Bundle:Default:index.html.twig at line 11 
```

访问映射文档属性的正确语法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T19:35:51.867

您可以使用以下树枝语法访问链接实体的属性：

```
{% for post in posts %}
{{ post.entityName.propertyName }}
{% endfor %} 
```

在你的情况下，这将是：

```
{% for post in posts %}
{{ post.image.propertyName }}
{% endfor %} 
```

请务必检查**所有**帖子实体是否都链接到图像对象。如果一个帖子实体没有指向图像的链接，则在尝试呈现页面时将收到属性未找到错误。

# eclipse - 文件被 TFS 无处不在的插件标记为 Ignored，但实际上它不是

> ID：13818522
> 
> 赞同：4
> 
> 时间：2012-12-11T10:40:41.490
> 
> 标签：eclipse, team-explorer, team-explorer-everywhere

第一次将文件添加到 TFS2012 时，其中一些建议被忽略（如 .dll、exe 等）

事实上，其中一些建议忽略我在 TFS 中需要的文件。所以我已经明确地将它们从忽略列表中删除并将它们添加到 TFS。

现在在 Visual Studio 中，我可以正常使用这些文件，但不能在 Eclipse 中使用！在 Eclipse 中，它们仍被标记为“已忽略”，并且所有团队功能都被禁用！:(

有没有办法解决这个问题？？

PS 当然，这些文件不在 .tfignore 中。

**添加：**

忽略似乎是根据文件扩展名 (.dll) 和文件夹名称 (\bin) 完成的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T17:20:31.223

默认情况下，Team Foundation Server 本地工作区中会[忽略](http://msdn.microsoft.com/en-us/library/tfs/ms245454%28v=vs.110%29.aspx#tfignore)某些文件（例如`DLL`s） 。

为了覆盖默认的忽略状态，您需要设置`.tfignore`一行来指定`DLL`不应忽略 s。从[文档](http://msdn.microsoft.com/en-us/library/tfs/ms245454%28v=vs.110%29.aspx#tfignore)中：

```
# Do not ignore .dll files in this folder nor in any of its sub-folders
!*.dll 
```

# python - Webapp2 会话在请求之间丢失

> ID：13818523
> 
> 赞同：6
> 
> 时间：2012-12-11T10:40:46.843
> 
> 标签：python, google-app-engine, session, webapp2

我正在使用 webapp2_extras 设置会话变量。如果我在设置变量后打印该变量，则该值是正确的。还进行了 save_sessions 调用。但是，当我再次发出请求时，变量没有设置。

大部分代码取自[webapp2 文档](http://webapp-improved.appspot.com/api/webapp2_extras/sessions.html)：

```
import webapp2
from webapp2_extras import sessions

class BaseHandler(webapp2.RequestHandler):
    def dispatch(self):
        self.session_store = sessions.get_store(request=self.request)
        try:
            webapp2.RequestHandler.dispatch(self)
        finally:
            self.session_store.save_sessions(self.response)
    @webapp2.cached_property
    def session(self):
        return self.session_store.get_session()

class MainHandler(BaseHandler):
    def get(self):
        foo = self.session.get('foo')
        print foo
        self.session['foo'] = 'bar'
        foo = self.session.get('foo')
        print foo
        self.response.write(BaseHandler)

config = {}
config["webapp2_extras.sessions"] = {
    "secret_key": "key",
}

app = webapp2.WSGIApplication([
    ('/', MainHandler)
], debug=True, config=config) 
```

这总是返回“None something”，但我希望它为第二个请求返回“something something”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-05T11:13:05.193

我知道这是一个相当古老的问题，但我遇到了同样的问题，这就是为我解决的问题。

我更改了 webapp2 配置对象以添加到 auth 参数中。

曾经是什么：

```
config = {}
config["webapp2_extras.sessions"] = {"secret_key": "key" }

app = webapp2.WSGIApplication([('/', MainHandler)], debug=True, config=config) 
```

现在应该是：

```
config = {}
config["webapp2_extras.sessions"] = {"secret_key": "key" }
config["webapp2_extras.auth"] = {'session_backend': 'securecookie'}

app = webapp2.WSGIApplication([('/', MainHandler)], debug=True, config=config) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-14T12:16:00.540

我有一个类似的问题。为我解决的问题是将后端设置为不同于默认值（securecookie）。将其设置为 memcache 似乎对我有用。

```
 @webapp2.cached_property
        def session(self):
        return self.session_store.get_session(backend="memcache") 
```

我还在`.auth`. 不确定这是否会覆盖`backend`参数`get_session`...

```
config["webapp2_extras.auth"] = {'session_backend': 'memcache'} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T11:06:51.213

查看我的配置，我有这个来设置会话存储的位置（对于应用引擎，配置与我理解的标准有点不同）

```
 @webapp2.cached_property
    def session(self):
      # Returns a session using the default cookie key.
        return self.session_store.get_session(name='mc_session',
        factory=sessions_memcache.MemcacheSessionFactory) 
```

试试看？否则，您的代码对我来说看起来不错，而无需实际运行它。

您还需要此导入：

```
from webapp2_extras import sessions_memcache 
```

[Webapp2 Memcache 会话](http://webapp-improved.appspot.com/api/webapp2_extras/appengine/sessions_memcache.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-03T08:36:09.623

假设您使用数据存储作为会话后端，这可能与最终一致性有关。如果您尝试将第二个请求推迟几秒钟，然后尝试该请求，您可能会看到会话数据，这就是证明。

切换到`securecookie`可能会有所帮助，尽管由于某种原因它对我不起作用......仍在研究它。

* * *

我的问题的很大一部分实际上是由于我对 cookie 标准的无知。这在[另一个 stackoverflow question](https://stackoverflow.com/questions/25225984/persisting-webapp2-sessions-on-gae/25228652#25228652)中有解释。

# sql - PostgreSQL 中基于时间戳的移动平均线

> ID：13818524
> 
> 赞同：22
> 
> 时间：2012-12-11T10:40:50.747
> 
> 标签：sql, postgresql, timestamp, moving-average

我想通过时间戳执行移动平均。我有两列：温度和时间戳（时间-日期），我想根据每 15 分钟的连续温度观测值执行移动平均值。换句话说，选择数据以基于 15 分钟的时间间隔执行平均。此外，对于不同的时间序列，可以有不同数量的观察。我的意思是所有窗口大小都相等（15 分钟），但每个窗口中可能有不同数量的观察值。例如：对于第一个窗口，我们必须计算 n 次观察的平均值，而对于第二个窗口，我们必须计算 n+5 次观察的平均值。

数据样本：

```
ID时间戳温度
1 2007-09-14 22:56:12 5.39
2 2007-09-14 22:58:12 5.34
3 2007-09-14 23:00:12 5.16
4 2007-09-14 23:02:12 5.54
5 2007-09-14 23:04:12 5.30
6 2007-09-14 23:06:12 5.20
7 2007-09-14 23:10:12 5.39
8 2007-09-14 23:12:12 5.34
9 2007-09-14 23:20:12 5.16
10 2007-09-14 23:24:12 5.54
11 2007-09-14 23:30:12 5.30
12 2007-09-14 23:33:12 5.20
13 2007-09-14 23:40:12 5.39
14 2007-09-14 23:42:12 5.34
15 2007-09-14 23:44:12 5.16
16 2007-09-14 23:50:12 5.54
17 2007-09-14 23:52:12 5.30
18 2007-09-14 23:57:12 5.20

```

主要挑战：

我如何学习代码以每 15 分钟进行一次区分，而由于采样频率不同而没有准确的 15 分钟时间间隔。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-11T11:00:25.017

您可以自己加入您的桌子：

```
select l1.id, avg( l2.Temperature )
from l l1
inner join l l2 
   on l2.id <= l1.id and
      l2.Timestamps + interval '15 minutes' > l1.Timestamps
group by l1.id
order by id
; 
```

[结果](http://sqlfiddle.com/#!1/018de/7/0)：

```
| ID |            AVG |
-----------------------
|  1 |           5.39 |
|  2 |          5.365 |
|  3 | 5.296666666667 |
|  4 |         5.3575 |
|  5 |          5.346 |
|  6 | 5.321666666667 |
|  7 | 5.331428571429 | 
```

注意：只做“努力工作”。您应该将结果与原始表连接或附加新列以进行查询。我不知道您需要的最终查询。调整此解决方案或寻求更多帮助。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-11T12:32:45.003

假设您想在每 15 分钟间隔后重新启动滚动平均值：

```
select id, 
       temp,
       avg(temp) over (partition by group_nr order by time_read) as rolling_avg
from (       
  select id, 
         temp,
         time_read, 
         interval_group,
         id - row_number() over (partition by interval_group order by time_read) as group_nr
  from (
    select id, 
           time_read, 
           'epoch'::timestamp + '900 seconds'::interval * (extract(epoch from time_read)::int4 / 900) as interval_group,
           temp
    from readings
  ) t1
) t2
order by time_read; 
```

它基于[Depesz 的](http://www.depesz.com/2010/10/22/grouping-data-into-time-ranges/)按“时间范围”分组的解决方案：

这是一个 SQLFiddle 示例：[http ://sqlfiddle.com/#!1/0f3f0/2](http://sqlfiddle.com/#!1/0f3f0/2)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-11T12:28:24.047

这是一种利用该工具将聚合函数用作窗口函数的方法。聚合函数将最后 15 分钟的观察值与当前运行总数一起保存在一个数组中。状态转换函数将落后于 15 分钟窗口的元素从数组中移出，并推送最新的观察结果。最后一个函数简单地计算阵列中的平均温度。

现在，至于这是否有好处……这取决于。它侧重于postgresql的plgpsql-execution部分而不是database-access部分，我自己的经验是plpgsql并不快。如果您可以轻松地对表进行查找以查找每个观察的前 15 分钟的行，那么自联接（如@danihp 答案）会做得很好。然而，这种方法可以处理来自一些更复杂的来源的观察，这些查找是不切实际的。与以往一样，在您自己的系统上试用和比较。

```
-- based on using this table definition
create table observation(id int primary key, timestamps timestamp not null unique,
                         temperature numeric(5,2) not null);

-- note that I'm reusing the table structure as a type for the state here
create type rollavg_state as (memory observation[], total numeric(5,2));

create function rollavg_func(state rollavg_state, next_in observation) returns rollavg_state immutable language plpgsql as $$
declare
  cutoff timestamp;
  i int;
  updated_memory observation[];
begin
  raise debug 'rollavg_func: state=%, next_in=%', state, next_in;
  cutoff := next_in.timestamps - '15 minutes'::interval;
  i := array_lower(state.memory, 1);
  raise debug 'cutoff is %', cutoff;
  while i <= array_upper(state.memory, 1) and state.memory[i].timestamps < cutoff loop
    raise debug 'shifting %', state.memory[i].timestamps;
    i := i + 1;
    state.total := state.total - state.memory[i].temperature;
  end loop;
  state.memory := array_append(state.memory[i:array_upper(state.memory, 1)], next_in);
  state.total := coalesce(state.total, 0) + next_in.temperature;
  return state;
end
$$;

create function rollavg_output(state rollavg_state) returns float8 immutable language plpgsql as $$
begin
  raise debug 'rollavg_output: state=% len=%', state, array_length(state.memory, 1);
  if array_length(state.memory, 1) > 0 then
    return state.total / array_length(state.memory, 1);
  else
    return null;
  end if;
end
$$;

create aggregate rollavg(observation) (sfunc = rollavg_func, finalfunc = rollavg_output, stype = rollavg_state);

-- referring to just a table name means a tuple value of the row as a whole, whose type is the table type
-- the aggregate relies on inputs arriving in ascending timestamp order
select rollavg(observation) over (order by timestamps) from observation; 
```

# zend-framework2 - 如何在 Zend Framework 2 中将 db 适配器设置为 Validator RecordExists

> ID：13818525
> 
> 赞同：3
> 
> 时间：2012-12-11T10:41:02.240
> 
> 标签：zend-framework2

我正在尝试将验证器 RecordExists 添加到我的表单中，但出现错误“没有 db 适配器存在”。如何将 db 适配器设置为此验证器？我使用骨架应用程序中的示例，我正在尝试做这样的事情（是的，我知道 $dbAdapter 是未定义的 :) 我正在寻找如何将此变量更改为 db 适配器资源的解决方案）：

```
namespace Album\Model;

use Zend\InputFilter\Factory as InputFactory;     // <-- Add this import
use Zend\InputFilter\InputFilter;                 // <-- Add this import
use Zend\InputFilter\InputFilterAwareInterface;   // <-- Add this import
use Zend\InputFilter\InputFilterInterface;        // <-- Add this import

class Album implements InputFilterAwareInterface
{
    public $id;
    public $artist;
    public $title;
    protected $inputFilter;                       // <-- Add this variable

public function exchangeArray($data)
{
    $this->id     = (isset($data['id']))     ? $data['id']     : null;
    $this->artist = (isset($data['artist'])) ? $data['artist'] : null;
    $this->title  = (isset($data['title']))  ? $data['title']  : null;
}

// Add content to this method:
public function setInputFilter(InputFilterInterface $inputFilter)
{
    throw new \Exception("Not used");
}

public function getInputFilter()
{
    if (!$this->inputFilter) {
        $inputFilter = new InputFilter();
        $factory     = new InputFactory();

        $inputFilter->add($factory->createInput(array(
            'name'     => 'id',
            'required' => true,
            'filters'  => array(
                array('name' => 'Int'),
            ),
            'validators' => array(
                array(
                    'name'    => 'Db\RecordExists',
                    'options' => array(
                        'table' => 'album',
                        'field' => 'title',
                        'adapter' => $dbAdapter
                    ),
                ),
            ),
        )));

        $this->inputFilter = $inputFilter;
    }

    return $this->inputFilter;
} 
```

}

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T22:09:11.427

您可以创建“专辑/模型/专辑”工厂并将 dbAdapter 注入专辑模型。

```
'service_manager' => array(
    'factories' => array(
        'Application/Model/Album' => function($sm){
            $dbAdapter = $sm->get('Zend\Db\Adapter\Adapter');
            $album = new \Application\Model\Album();
            $album->setDbAdapter($dbAdapter);
            return $album;
        },
    ),
), 
```

现在我们必须实现 setDbAdapter 和 getDbAdapter 方法：

```
namespace Application\Model;

class Album
{
    public $id;
    public $artist;
    public $title;

    private $_dbAdapter;

    public function exchangeArray($data)
    {
        $this->id     = (isset($data['id'])) ? $data['id'] : null;
        $this->artist = (isset($data['artist'])) ? $data['artist'] : null;
        $this->title  = (isset($data['title'])) ? $data['title'] : null;
    }

    public function setDbAdapter($dbAdapter) {
        $this->_dbAdapter = $dbAdapter;
    }

    public function getDbAdapter() {
        return $this->_dbAdapter;
   }
} 
```

您可以通过调用在输入过滤器中获取 dbAdapter`$this->getDbAdapter();`

请记住通过 ServiceLocator 在控制器中获取专辑模型，否则 dbAdapter 在您的模型中将不可用。

```
$album = $this->getServiceLocator()->get('Application/Model/Album'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-25T09:20:26.233

要验证“用户名是否已存在”，请执行以下简单的 Service Manager 配置设置方法，例如：

// 配置/自动加载/global.php

```
 return array(
       'db' => array(
       'driver'   => 'Pdo',
       'dsn'      => 'mysql:dbname=zf2tutorial;host=localhost',
    ),

     'service_manager' => array(
       'factories' => array(
         'Zend\Db\Adapter\Adapter' => function ($serviceManager) {
            $adapterFactory = new Zend\Db\Adapter\AdapterServiceFactory();
               $adapter = $adapterFactory->createService($serviceManager);

               \Zend\Db\TableGateway\Feature\GlobalAdapterFeature::setStaticAdapter($adapter);

               return $adapter;
         }
      ),
   ),
); 
```

这在您的控制器操作中首先设置静态数据库适配器（如果您之前没有使用过适配器）

```
public function myAction () {
    $this->getServiceLocator()->get('Zend\Db\Adapter\Adapter');
    ...
} 
```

并将以下数组添加到 getInputFilter() 中：

```
array(
  'table'   => 'users',
  'field'   => 'username',
  'adapter' => \Zend\Db\TableGateway\Feature\GlobalAdapterFeature::getStaticAdapter();
) 
```

我希望这对每个人都有帮助。干杯！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T02:42:32.060

@kierzniak 提供了一个注入 DbAdapter 的好方法，我的解决方案几乎相同，不仅注入 DbAdapter，而且注入完整的 ServiceLocator，通过注入 ServiceLocator，我们还可以获得系统配置，EventManagers，我认为它更灵活。这是解决方案：

第一步：使 Album\Model 实现 ServiceLocatorAwareInterface，这样服务定位器就可以注入到 Album\Model 中。

```
use Zend\ServiceManager\ServiceLocatorAwareInterface,
    Zend\ServiceManager\ServiceLocatorInterface;
class Album AbstractModel implements ServiceLocatorAwareInterface, InputFilterAwareInterface
{
    protected $serviceLocator;

    public function setServiceLocator(ServiceLocatorInterface $serviceLocator)
    {
        $this->serviceLocator = $serviceLocator;
        return $this;
    }

    public function getServiceLocator()
    {
        return $this->serviceLocator;
    }
} 
```

Step2，在config或Module.php中注册Album\Model作为服务

```
class Module
{
    public function getServiceConfig()
    {
        return array(
            'invokables' => array(
                'AlbumModel' => 'Album\Model\Album',
            ),
        );
    }
} 
```

Step3，通过服务而不是类调用AlbumModel：

```
public function addAction()
{
    if ($request->isPost()) {
        $album = $this->getServiceLocator()->get('AlbumModel');
    }
} 
```

Step4，现在你可以在 AlbumModel 中使用 DbAdapter：

```
'adapter' => $this->getServiceLocator()->get('Zend\Db\Adapter\Adapter'); 
```

通过以上步骤，您可以在任何地方共享任何服务，希望对您有所帮助。

# magento - Magento 中错过了所有商店视图选项

> ID：13818527
> 
> 赞同：0
> 
> 时间：2012-12-11T10:41:09.320
> 
> 标签：magento

我在 Magento EE-1.10.1.1 工作。在我的商店后端，现在错过了“所有商店视图”选项。昨天我在商店和商店视图中工作以测试一些东西。

任何人都知道如何在我的商店中恢复该选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:26:55.817

管理员的权限/角色已更改为仅单个商店。现在我更改并授予管理员完全访问权限。

但是这些更改是从 DB 完成的。

# c# - 从 asp.net 发送文件时出现类似错误的脚本

> ID：13818532
> 
> 赞同：1
> 
> 时间：2012-12-11T10:41:25.260
> 
> 标签：c#, asp.net, io, download, mime-types

当我尝试从我的 asp.net 页面发送文件时出现此错误：

**Microsoft JScript 运行时错误：Sys.WebForms.PageRequestManagerParserErrorException：无法解析从服务器接收到的消息。**

我的代码：

`linkButton`// 这由网格上的 a触发

```
 protected void Download(object sender, EventArgs e)
    {
        LinkButton lb = sender as LinkButton;

        // save file to temp
        Byte[] fileBytes = null;
        using (var db = new DbContext())
        {
            var id = Convert.ToInt32(lb.CommandArgument);
            fileBytes = db.Requests.Single(x => x.Id == id).File;
        }
        var filePath = Path.GetTempFileName();
        File.WriteAllBytes(filePath, fileBytes);

        // send
        FileInfo fi = new FileInfo(filePath);
        SendFile(fi);
    }

    private void SendFile(FileInfo file)
    {
        Response.ContentType = "application/zip";
        Response.WriteFile(file.FullName);
        Response.End();

// I also tried the code below I get the same error.

        //Response.Clear();
        //Response.ClearHeaders();
        //Response.ClearContent();
        //Response.AddHeader("Content-Disposition", "attachment; filename=PriceFile.zip");
        //Response.AddHeader("Content-Length", file.Length.ToString());
        //Response.ContentType = "application/zip";
        //Response.Flush();
        //Response.TransmitFile(file.FullName);
        //Response.End();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:52:21.790

我认为您正在更新面板中发送点击事件。如果您使用的是 ajax，请尝试在下载按钮单击事件上进行整页回发

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:54:46.207

您必须清除页面的所有html内容，并且只留下第一行（页面）

```
<%@ Page Language="VB" AutoEventWireup="false" CodeFile="download.aspx.vb" Inherits="download" %> 
```

# c - 如何软件中断C中正在运行的函数？

> ID：13818536
> 
> 赞同：-1
> 
> 时间：2012-12-11T10:41:39.620
> 
> 标签：c, windows-xp, x86, mingw, interrupt

我想在函数运行时产生一个中断，然后我想让 CPU 执行一些特定的 ISR，完成 ISR 后，函数将恢复执行。我正在使用 Windows XP 和 MinGW 编译器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:00:32.533

> 实际上没有硬件我想首先以某种方式生成中断并稍后处理它我将在实际硬件上进行

真正的硬件中断将切换 CPU 引脚之一并使其分派到 ISR。我想不出任何真正透明的方式来模仿它。

暂停当前​​正在运行的函数的一种方法可能是使用[SuspendThread 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686345(v=vs.85).aspx)，然后使用不同的线程来运行 ISR。

调查的另一种可能性可能是使用[Fibers](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682661(v=vs.85).aspx)。

* * *

**编辑**

正如[cxxl 的回答](https://stackoverflow.com/a/13819216/49942)所建议的那样，另一种可能性是使用实时优先级线程：

*   有两个线程，一个运行你的函数，另一个线程运行模拟的 ISR
*   在两个线程上使用“CPU 亲和性”功能，以确保它们都在同一个 CPU 上运行
*   将 ISR 线程的优先级设置为“实时”

然后，只要您允许 ISR 模拟线程运行，它就会抢占另一个线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T11:18:21.430

从此处获取 Windows 驱动程序工具包：http: [//msdn.microsoft.com/en-us/library/windows/hardware/gg487428.aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/gg487428.aspx)。它包含用于编写设备驱动程序的头文件和库。如果要处理中断，则需要编写设备驱动程序。

您可以编写设备驱动程序并使用 DPC，这是 ISR 的工作函数。这些 DPC 可以在软件中调用，并且仍然以比任何用户模式代码更高的优先级执行。ISR 本身通常很短，只处理中断、保存数据并将控制权交给 DPC。

我怀疑你可以在 MinGW 中做到这一点，但我猜你需要 MS Visual C，但是有一个免费的 Express Edition。见这里： http: [//www.microsoft.com/visualstudio/eng/products/visual-studio-express-products](http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-products)

你确定你**需要**中断？您可以在具有管理员权限和实时优先级的用户模式下做很多事情......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T11:10:22.923

正如其他人所说，这是一个非常模糊的问题。

一些 CPU 可以通过软件强制/伪造中断，您可以对此进行调查。（我不了解 x86，我是嵌入式开发人员）

在操作系统中，您可能/应该能够用另一个进程/线程中断一个进程/线程。再说一次，我不是 Win 程序员，所以不能这么说。

否则，根据具体情况，您可以运行一些主循环，从中调用您的子例程，并且每次循环它都会检查“中断条件”（无论可能是什么），然后分支或设置一个标志以指示发生了什么事/ 需要发生。

# android - 如何显示来自广播接收器的对话框

> ID：13818540
> 
> 赞同：0
> 
> 时间：2012-12-11T10:41:57.570
> 
> 标签：android

我在我的 android 清单文件中设置了一个广播接收器。但是，当某些情况发生时，我需要显示一个对话框。我意识到应用程序上下文不适用于对话框，我需要在活动上下文中显示它。但即使我这样做了，背景屏幕也会变黑并阻止当前活动。我不希望这种情况发生。我希望在现有屏幕上弹出 tp 覆盖。我试过的：

在我打电话的活动中`BroadcastReciever`：

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE);
getWindow().addFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL); 
```

活动清单：

```
android:windowBackground="@android:color/transparent"
android:windowIsTranslucent="true"
android:windowAnimationStyle="@android:style/Animation.Translucent" 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:47:36.160

```
startActivity() 
```

并申请`android:theme="@android:style/Theme.Dialog"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:45:21.710

您需要启动一个 Activity 才能执行此操作。当 onReceive 完成时，BroadcastReceivers 将立即退出。如果您使用以对话框为主题的 Activity，它将具有与对话框相同的外观。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T10:52:51.957

为此，您需要一个名为“全局”或“超级”对话框的东西

请查看[http://www.sherif.mobi/2011/08/creating-global-dialogs.html](http://www.sherif.mobi/2011/08/creating-global-dialogs.html)和此[视频](http://www.youtube.com/watch?v=CcKmuj9RNDU)

你也可以在[Github](https://github.com/sherifelkhatib/Super-Dialogs/)上获取源代码

希望这能解决您对对话的担忧

# vba - 从包含合并单元格的表格中删除范围

> ID：13818541
> 
> 赞同：4
> 
> 时间：2012-12-11T10:42:00.300
> 
> 标签：vba, ms-word

基本上，我想要完成的是：从表中删除所有行，从光标在表中的位置开始到表的末尾。

问题是这个表包含垂直合并的单元格，所以当我尝试做这样的事情时：

```
For i = Selection.Tables(1).Rows.Count To Selection.Cells(1).RowIndex Step -1
    Selection.Tables(1).Rows(i).Delete
Next 
```

它抱怨无法访问各个行，因为该表包含垂直合并的单元格。

我也尝试过先选择范围，然后删除选择。但我无法正确定义范围；它总是抱怨有一个不正确定义的参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T11:34:15.577

使用 VBA 合并表格单元格不只是一个痛苦吗？Word 似乎对列数和行数感到困惑。对于水平或垂直合并单元格的任何组合，以下似乎非常健壮。

```
Sub DeleteRows()

    Selection.MoveDown Unit:=wdLine, Count:=(Selection.Tables(1).Rows.Count - Selection.Cells(1).RowIndex), Extend:=wdExtend
    Selection.Rows.Delete

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-09T23:59:45.680

当我尝试 CubeChase 解决方案时，我想添加一个答案，但它不适用于我的表：

![表格截图](../Images/4e4740c28041c65fbf1af67d79c51e64.png)

请注意，我在第 1、2 和 5 列中垂直合并了行。当我`Selection.MoveDown`为了选择父“A3”行中的所有行而实现时，它无法识别第 3 列和第 4 列中的内部行。而是选择了父行“A4”、“A5”和“A6”行（格式与 A3 相同）而不选择任何内部行。

这是我最终要成功删除表中的父行和子行所要做的。我首先必须收集每行中第一个单元格的索引以删除到数组中。我颠倒了我的数组，以便自下而上地工作，以免在运行时更改索引。

然后我遍历我的反向数组，选择属于每个父行的单元格范围并删除与我的选择相关的行。

```
 table = ActiveDocument.Tables(1)
  For Each idx In ReverseArray
      cells_to_delete = ActiveDocument.Range(Start=table.Range.Cells(idx).Range.Start, End=table.Range.Cells(idx+*count_of_cells*).Range.End)
      cells_to_delete.Select
      Selection.Range.Rows.Delete
  Next idx 
```

不知道其他人是否遇到过类似的问题，但我想我会把答案放在这里以防万一。:)

# liferay-6 - 在liferay中获取在线用户数

> ID：13818542
> 
> 赞同：1
> 
> 时间：2012-12-11T10:42:05.313
> 
> 标签：liferay-6

我需要在网站上获取在线用户数。我该怎么做？我发现使用 liveusers api，但可以在我的 jsp 中导入。我使用的是 6.0.1 版本的 liferay。

谢谢

# python - OpenERP中的onchange函数，用于等于默认值的值

> ID：13818549
> 
> 赞同：3
> 
> 时间：2012-12-11T10:42:30.937
> 
> 标签：python, onchange, openerp

我已经看到[了这个](https://stackoverflow.com/questions/10256227/onchange-function-in-openerp)问题，并用它在 openerp 中实现了类似的目标。因此我的功能：

```
def onchange_warning(self, cr, uid, ids, result, lower, upper, context=None):
    res={}
    flag = False
    if result < lower or result > upper:
        flag = True
    res = {'warning': flag}
    return {'value': res} 
```

在我看来，我有：

```
<field name="result" on_change="onchange_warning(result, lower, upper)"/> 
```

其中**result**、**lower**和**upper**是浮点数，而**warning**是没有默认值的布尔值。在我的表单内的树中，我为**lower**和**upper**预定义了值，而**结果**为*null (0.00)*并设置为填充。

该功能运行良好，并完成了它应该做的事情。然而，我面临的结果**实际上等于 0.0**并且应该设置标志，而*onchange*函数（D'Oh！）无法执行，因为该字段值在技术上并未从其默认值 0.00 更改。该怎么办？

PS：对不起，标题太糟糕了，请随时改进：）

**编辑：**

如果有人需要查看函数如何变为：

> ```
> def onchange_warning(self, cr, uid, ids, result, lower, upper, context=None):
>     res={}
>     flag = False
>     if float(result) < lower or float(result) > upper:
>         flag = True
>     res = {'warning': flag}
>     return {'value': res} 
> ```

结果现在**是****fields.char**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:57:13.073

浮点字段的默认值始终为 0.0。仅当您更改值时才会调用 on_change。

如果您想在值为“0”时进行任何操作，那么您可以使用 char 字段而不是 float。调用 on_change 时，您必须将值从字符串转换为浮点数，然后您才能进一步进行操作。

您可以将类型转换代码放入 try except 并在执行 except 块时引发异常。

例如：尝试：

```
def on_change_float(self, cr, uid, ids, test1, context=None):
    val = float(test1)
    except Exception:
        raise osv.except_osv('Input Error ! ', 'Please enter numbers.')
    return {'value': {'test1': val}} 
```

# asp.net - 将值从 JSP 传递到 ASP.Net

> ID：13818554
> 
> 赞同：0
> 
> 时间：2012-12-11T10:42:37.710
> 
> 标签：asp.net, jsp

我想要/必须做的是从一个 JSP 应用程序给一个 ASP 应用程序的值（可能是两个值），但我不知道这是否可能。

我自己对 JSP 没有任何经验。我确实在大学里学过 Java，但仅此而已。所以我真的不知道我在这里有什么选择。

我认为真正的问题是如何处理线程，因为预计有 50 人同时使用该程序。所以我有点需要直接沟通。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:47:14.460

是的，但你的问题有点混乱。

首先：JSP 首先编译为 Java servlet，然后编译为 .class 文件，部署在 servlet/JSP 引擎中。Servlet 是 HTTP 请求的侦听器。您当然可以调用也侦听 HTTP 请求的 C# 对象。我建议学习一些关于 AJAX 和 jQuery 的知识，看看它是如何完成的。

至于线程，Java 容器会为您处理线程。您应该编写您的 servlet/JSP，就好像它们是单线程的一样。这意味着同步 servlet 中的共享状态并尽可能减少或消除它。

# c# - 如何修改/删除 AppConfig 文件的键

> ID：13818558
> 
> 赞同：2
> 
> 时间：2012-12-11T10:42:48.443
> 
> 标签：c#, app-config

我的问题是关于 AppConfig 文件。基本上我知道如何检索键和值，但这里的问题是如何在运行时删除键和值或修改值？

```
<appSettings>
  <add key="key1" value="value1" />
  <add key="key2" value="value2" />
  <add key="key3" value="value3" />
</appSettings> 
```

**那么如果我想修改怎么办：**

我想将值`key1`设置为`Test``<add key="key1" value="Test" />`

**如果我想删除怎么办；**

假设我要删除`key3`以将其从 appSettings 中删除，

欢迎任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T10:49:49.030

你可以使用这样的东西：

```
 m_Configuration = System.Configuration.ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
 m_Configuration.AppSettings.Settings.Remove(key);
 m_Configuration.AppSettings.Settings.Add(key, value);
 m_Configuration.Save(ConfigurationSaveMode.Modified); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T10:48:54.617

您可以添加 System.Configuration 程序集

然后做一些工作，比如

```
Configuration config =  ConfigurationManager.OpenExeConfiguration("currentApppath");
            AppSettingsSection section = config.GetSection("appsettings");
            section.Settings.Add ....... 
```

# qt - Qt new QWidget 打开新窗口

> ID：13818559
> 
> 赞同：1
> 
> 时间：2012-12-11T10:42:52.887
> 
> 标签：qt, qwidget

我正在创建一个新的子类`QWidget`with:`new TestView;` 当我调用该语句时，会打开一个新窗口。

此外，当我将此小部件添加到布局时，窗口会“关闭”，并且该小部件首先应显示在布局中。

如何确保小部件不显示为新窗口？

有谁能够帮我？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T10:53:36.037

> 如何确保小部件不显示为新窗口？

发生这种情况是因为您的小部件在您将其添加到布局之前是可见的。无论您是在对象上调用`show()`还是`raise()`在早期调用`TestView`，或者在父部件创建和添加到布局之间的那一刻，您都在父部件上执行相同的操作。

如果您在其构造函数中显示您的小部件，那是一个非常糟糕的主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-04-27T11:19:11.833

我有同样的问题，我发现我可以做这个小技巧，在将小部件添加到布局之前禁用它的可见性并在之后重新启用：

```
self.widget.setVisible(False)
self.tab.layout().addWidget(self.widget)
self.widget.setVisible(True) 
```

希望它至少对那里的人有用！

（这是用于 PySide2 顺便说一句）

# c++ - openSSL：PEM_write_RSAPublicKey 和 PEM_write_RSA_PUBKEY 之间的区别

> ID：13818567
> 
> 赞同：5
> 
> 时间：2012-12-11T10:43:24.997
> 
> 标签：c++, openssl, public-key

在 openssl 库中，我可以看到两种将公钥写入文件的方法：

```
int PEM_write_RSAPublicKey(FILE *fp, RSA *x);
int PEM_write_RSA_PUBKEY(FILE *fp, RSA *x); 
```

在文档中我可以看到：

> RSAPublicKey 函数使用 RSA 结构处理 RSA 公钥。公钥使用 PKCS#1 RSAPublicKey 结构进行编码。
> 
> RSA_PUBKEY 函数还使用 RSA 结构处理 RSA 公钥。但是，公钥是使用 SubjectPublicKeyInfo 结构编码的，如果公钥不是 RSA，则会发生错误

但我不明白什么是

> 主题公钥信息

这两种方法之间的根本区别是什么！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-21T08:13:26.860

SubjectPublicKeyInfo - rfc 3280（Internet X.509 公钥基础设施）中描述的公钥的 ASN1 结构。这种格式实际上包含公钥算法的 id 和公钥本身。在这种情况下，这个公钥是根据 pkcs1 标准格式化的。所以 X.509 格式是更高级的格式，它不仅描述了 RSA 公钥，而且描述了一般的公钥。

# sql - 在同一查询中使用 UNION 和 UNION ALL

> ID：13818573
> 
> 赞同：3
> 
> 时间：2012-12-11T10:43:48.287
> 
> 标签：sql, sql-server, union, union-all

我遇到了一些性能问题，我有一个查询如下：

```
SELECT * FROM Foo

UNION

SELECT * FROM Boo

UNION

SELECT * FROM Koo 
```

我确定这`Koo`不会返回任何重复项。我正在考虑`UNION ALL`在最后使用，因此可以节省`Koo`. 查询应如下所示：

```
SELECT * FROM Foo

UNION

SELECT * FROM Boo

UNION ALL

SELECT * FROM Koo 
```

这会有所帮助还是首先会受到影响`UNION`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T10:53:29.373

如果您知道不会有重复，请始终使用 UNION ALL。

这里有点灰，但仍然值得——尽管几乎是微不足道的。

如果它是直接的 UNION-UNION，SQL Server 可以对其进行优化以整理所有 3 个结果集并在两者上执行单一排序。由于排序主要是 O(n log n)，因此它与 [(A distinct B) add C] 之间的差异很小。

**更新**

Although it is possible to perform a single merge-sort, SQL Server doesn't seem to do it (at least not always) - so the wisdom of using UNION ALL is definitely worth it here. Compare the plans here: [SQLFiddle](http://sqlfiddle.com/#!3/20ebe/2/1) (click on the *"View Execution Plan"* links)

# opencv - 是否可以将在 opencv 中实现的 ViBe 算法用于没有 GPU 的系统？

> ID：13818574
> 
> 赞同：4
> 
> 时间：2012-12-11T10:43:54.813
> 
> 标签：opencv, motion-detection, background-subtraction, blobs

我想测试背景减法的 ViBe 算法。目前我正在使用 opencv 库。我在 opencv/samples/gpu/bgfg_segm.cpp 和 bgfg_vibe.cpp 文件中找到了一个示例实现。这些文件位于 gpu 模块下。现在我有一个没有 GPU 的系统。当我尝试运行代码时，它在第一帧的初始化时崩溃。谁能告诉我如何解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-24T06:21:55.370

伪代码很糟糕！这是非伪/编辑版本。结果？：只有尝试或不尝试

bgfg_vibe.hpp

```
#ifndef bgfg_vibe_hpp
#define bgfg_vibe_hpp
#include "opencv2/core/core.hpp"
#include "opencv2/imgproc/imgproc.hpp"
#include "opencv2/highgui/highgui.hpp"

struct Model {
    cv::Mat*** samples;
    cv::Mat** fgch;
    cv::Mat* fg;
};

class bgfg_vibe
{
#define rndSize 256
    unsigned char ri;
#define rdx ri++
public:
    bgfg_vibe();
    int N,R,noMin,phi;
    void init_model(cv::Mat& firstSample);
    void setphi(int phi);
    cv::Mat* fg(cv::Mat& frame);
private:
    bool initDone;
    cv::RNG rnd;
    Model* model;
    void init();
    void fg1ch(cv::Mat& frame,cv::Mat** samples,cv::Mat* fg);
    int rndp[rndSize],rndn[rndSize],rnd8[rndSize];
};

#endif 
```

bgfg_vibe.cpp

```
#include "bgfg_vibe.hpp"

bgfg_vibe::bgfg_vibe():R(20),N(20),noMin(2),phi(0)
{
    initDone=false;
    rnd=cv::theRNG();
    ri=0;
}
void bgfg_vibe::init()
{
    for(int i=0;i<rndSize;i++)
    {
        rndp[i]=rnd(phi);
        rndn[i]=rnd(N);
        rnd8[i]=rnd(8);
    }
}
void bgfg_vibe::setphi(int phi)
{
    this->phi=phi;
    for(int i=0;i<rndSize;i++)
    {
        rndp[i]=rnd(phi);
    }
}
void bgfg_vibe::init_model(cv::Mat& firstSample)
{
    std::vector<cv::Mat> channels;
    split(firstSample,channels);
    if(!initDone)
    {
        init();
        initDone=true;
    }
    model=new Model;
    model->fgch= new cv::Mat*[channels.size()];
    model->samples=new cv::Mat**[N];
    model->fg=new cv::Mat(cv::Size(firstSample.cols,firstSample.rows), CV_8UC1);
    for(size_t s=0;s<channels.size();s++)
    {       
        model->fgch[s]=new cv::Mat(cv::Size(firstSample.cols,firstSample.rows), CV_8UC1);
        cv::Mat** samples= new cv::Mat*[N];
        for(int i=0;i<N;i++)
        {
            samples[i]= new cv::Mat(cv::Size(firstSample.cols,firstSample.rows), CV_8UC1);
        }
        for(int i=0;i<channels[s].rows;i++)
        {
            int ioff=channels[s].step.p[0]*i;
            for(int j=0;j<channels[0].cols;j++)
            {
                for(int k=0;k<1;k++)
                {
                    (samples[k]->data + ioff)[j]=channels[s].at<uchar>(i,j);
                }
                (model->fgch[s]->data + ioff)[j]=0;

                if(s==0)(model->fg->data + ioff)[j]=0;
            }
        }
        model->samples[s]=samples;
    }
}
void bgfg_vibe::fg1ch(cv::Mat& frame,cv::Mat** samples,cv::Mat* fg)
{
    int step=frame.step.p[0];
    for(int i=1;i<frame.rows-1;i++)
    {
        int ioff= step*i;
        for(int j=1;j<frame.cols-1;j++)
        {
            int count =0,index=0;
            while((count<noMin) && (index<N))
            {
                int dist= (samples[index]->data + ioff)[j]-(frame.data + ioff)[j];
                if(dist<=R && dist>=-R)
                {
                    count++; 
                }
                index++;
            }
            if(count>=noMin)
            {
                ((fg->data + ioff))[j]=0;
                int rand= rndp[rdx];
                if(rand==0)
                {
                    rand= rndn[rdx];
                    (samples[rand]->data + ioff)[j]=(frame.data + ioff)[j];
                }
                rand= rndp[rdx];
                int nxoff=ioff;
                if(rand==0)
                {
                    int nx=i,ny=j;
                    int cases= rnd8[rdx];
                    switch(cases)
                    {
                    case 0:
                        //nx--;
                        nxoff=ioff-step;
                        ny--;
                        break;
                    case 1:
                        //nx--;
                        nxoff=ioff-step;
                        ny;
                        break;
                    case 2:
                        //nx--;
                        nxoff=ioff-step;
                        ny++;
                        break; 
                    case 3:
                        //nx++;
                        nxoff=ioff+step;
                        ny--;
                        break; 
                    case 4:
                        //nx++;
                        nxoff=ioff+step;
                        ny;
                        break; 
                    case 5:
                        //nx++;
                        nxoff=ioff+step;
                        ny++;
                        break; 
                    case 6:
                        //nx;
                        ny--;
                        break; 
                    case 7:
                        //nx;
                        ny++;
                        break; 
                    }
                    rand= rndn[rdx];
                    (samples[rand]->data + nxoff)[ny]=(frame.data + ioff)[j];
                }
            }else
            {
                ((fg->data + ioff))[j]=255;
            }
        }
    }
}
cv::Mat* bgfg_vibe::fg(cv::Mat& frame)
{
    std::vector<cv::Mat> channels;
    split(frame,channels);
    for(size_t i=0;i<channels.size();i++)
    {
        fg1ch(channels[i],model->samples[i],model->fgch[i]);        
        if(i>0 && i<2)
        {
            bitwise_or(*model->fgch[i-1],*model->fgch[i],*model->fg);
        }
        if(i>=2)
        {
            bitwise_or(*model->fg,*model->fgch[i],*model->fg);
        }
    }
    if(channels.size()==1) return model->fgch[0];
    return model->fg;
} 
```

主文件

```
#include "bgfg_vibe.hpp"
using namespace cv;

int main(int argc, char ** argv)
{
    Mat frame;
    bgfg_vibe bgfg;
    VideoCapture cap("c:/toprocess/frame_%04d.jpg");
    cap >> frame;
    bgfg.init_model(frame);
    for(;;)
    {
        cap>>frame; 
        Mat fg = *bgfg.fg(frame);
        imshow("fg",fg);
        waitKey(1);
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T06:23:01.387

我和你有同样的问题：想在 OpenCV 中使用没有 GPU 的 Vibe。不幸的是，当前版本的 OpenCV(2.4.3) 中没有非 gpu 实现。如果我错了，请告诉我。所以我根据论文中提供的伪代码自己实现了这种氛围。这并不像我想象的那么难。

到目前为止，我对这个算法很满意。总的来说很好，但我认为仍然需要一些进一步的工作来解决鬼问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-30T20:41:07.440

请注意，ViBE 已获得专利，其使用需要支付许可费。请访问 vibeinmotion.com 获取试用版和更多信息。我负责 ViBE 的业务发展，您可以直接与我联系以获取更多信息。问候。

# android - 如何将 xib 文件移植/使用到 cocos2dx

> ID：13818580
> 
> 赞同：-2
> 
> 时间：2012-12-11T10:44:35.687
> 
> 标签：android, iphone, ios, cocos2d-iphone, cocos2d-x

我在 iOS 上有一个游戏并使用 cocos2dx (c++) 将其导入到 android，有没有办法可以使用已经创建的 xib 文件？如果没有，有人可以告诉我如何进行吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:25:39.617

我们可以使用 CocosBuilder 并利用图层、菜单、文本和按钮，重新创建可在 cocos2dx 中使用的 UI

[cocosbuilder的链接](http://cocosbuilder.com/)

# javascript - 确定一个字符串是否包含另一个

> ID：13818583
> 
> 赞同：-9
> 
> 时间：2012-12-11T10:44:45.837
> 
> 标签：javascript, jquery

我有一个字符串，`'|lcol~-1|lcol~-1'`. 我需要确定字符串是否包含`'-1'`使用 JavaScript。在不使用该方法的情况下如何实现这一点`indexOf`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T10:46:19.360

好的，您*可以*通过其他方式进行操作，例如：

```
if (str.split("-1").length > 1) {
   // Yes, `str` has "-1" in it
} 
```

或者

```
if (/-1/.exec(str)) {
    // Yes, `str` has "-1" in it
} 
```

但`indexOf`真的是最直接、最直接、最可维护的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T10:48:10.480

您应该使用 indexOf()。但是你也可以试试这个：

```
if(mystring.replace('-1','') != mystring) {...} 
```

# javascript - javascript分割函数

> ID：13818585
> 
> 赞同：1
> 
> 时间：2012-12-11T10:44:49.777
> 
> 标签：javascript, split

我可以在 javascript 中为 split 函数提供多个参数以删除多个内容并将其放入数组中吗？例如：

```
 var str= "This is Javascript String Split Function example ";

 var wordArray=str.split(" "); 
```

这将分别给我每个单词

除了这个结果，我想从数组中删除 **“is”**和**“this”**，那么我可以在拆分函数中放入许多参数以从开头删除**“”**＆**“is”**＆**“this”**吗？还是我应该使用 **split()**以外的其他功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:54:36.717

有很多方法可以实现您想要的。基本上你要删除**的是**和**这个**

所以你可以这样做：

一个。如果您要删除的单词始终是第一个和第二个，那么

```
 var filteredArray = str.split(" ").splice(2); 
```

湾。如果要删除的单词可以在字符串中的任何位置

```
var  filteredArray = str.replace(/this|is/g, function(w){

        switch(w){
           case 'this':
                 return '' ;

              case 'is':
                   return '';
          }

    }).trim().split(' '); 
```

C。还有另一种蹩脚的方法可以做到这一点。

```
var str= "This is Javascript String Split Function example ";
var parts = str.split(' ');
var clean = [];
for (var i = 0; i < parts.length; i++) {
   var part = parts[i];
   if (part !== "This" && part !=="is")
      clean.push(part);
} 
```

d。使用简单的正则表达式替换多个单词

```
var str= "This is Javascript String Split Function example ";
   var words = ['This', 'is'];
   var text = str.replace(new RegExp('(' + words.join('|') + ')', 'g'), '').split(' '); 
```

根据您的需要，您可以选择其中任何一个。

参考：[这个](https://stackoverflow.com/questions/5300784/removing-string-using-javascript)，[这个](https://stackoverflow.com/questions/9932957/javascript-remove-character-from-a-string)和[这个](https://stackoverflow.com/questions/281264/remove-empty-elements-from-an-array-in-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:47:47.020

我不会尝试使用 split 从字符串中删除内容。您应该使用“替换”来删除它们，然后再拆分。

```
var wordArray = str.replace(/is|this/g, '').split(" "); 
```

那应该删除“is”和“this”，然后你可以从那里拆分它。

# 更新

稍微调整一下正则表达式。我忘了添加 ag 以使其摆脱所有这些。

如果您希望它不区分大小写（即匹配 This、Is 等），请在 g 之后添加 i 开关。

[小提琴](http://jsfiddle.net/qp4eA/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T10:50:38.047

`String.split`接受两个参数，一个分隔符和一个限制。所以基本上你可以从结果数组的末尾删除条目（限制数组），但不能从一开始。

在这里阅读更多：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)

但是，您可以将结果数组与其他数组原型链接，因此您可以轻松添加 a`Array.splice`来做您想做的事情：

```
var wordArray = str.split(" ").splice(2); 
```

如果要专门删除某些单词，请使用`Array.filter`：

```
var wordArray = str.split(' ').filter(function(word) {
    return !/(is|this)/i.test(word);
}); 
```

# file - Erlang：发送文件和文件名

> ID：13818587
> 
> 赞同：1
> 
> 时间：2012-12-11T10:45:00.593
> 
> 标签：file, sockets, erlang, gen-tcp

我很高兴发送一个文件，它是文件名。服务器选项：

```
-define(TCP_OPTIONS_SERVER, [binary, {packet, 0}, {active, false}]). 
```

那是接收器循环：

```
file_receiver_loop(Socket,Bs)->
case gen_tcp:recv(Socket, 0) of
    {ok, B} ->
        file_receiver_loop(Socket, [Bs, B]);
    {error, closed} ->
        io:format("~nReceived!~n ~p",[Bs]),
        save_file(Bs)
end. 
```

我发送文件：

```
file:sendfile(FilePath, Socket), 
```

当我发送文件和文件名时

```
gen_tcp:send(Socket,Filename),
file:sendfile(FilePath, Socket), 
```

二进制数据具有可变结构。

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T14:49:58.887

我制作这段代码来解决这个问题。
我发送 30 个字节作为文件名。
如果文件名<30，我使用白色字符填充。
当连接被接受时，我调用函数 file_name_receiver(Socket)，它接收文件名：

```
file_name_receiver(Socket)->
    {ok,FilenameBinaryPadding}=gen_tcp:recv(Socket,30),
    FilenamePadding=erlang:binary_to_list(FilenameBinaryPadding),
    Filename = string:strip(FilenamePadding,both,$ ),
    file_receiver_loop(Socket,Filename,[]). 
```

此函数提供二进制数据文件：

```
file_receiver_loop(Socket,Filename,Bs)->
    io:format("~nRicezione file in corso~n"),
    case gen_tcp:recv(Socket, 0) of
    {ok, B} ->
        file_receiver_loop(Socket, Filename,[Bs, B]);
    {error, closed} ->
        save_file(Filename,Bs)
end. 
```

最后，这个函数保存文件。

```
%%salva il file
save_file(Filename,Bs) ->
    io:format("~nFilename: ~p",[Filename]),
    {ok, Fd} = file:open("../script/"++Filename, write),
    file:write(Fd, Bs),
    file:close(Fd). 
```

发件人使用一个简单的功能：

```
%%Permette l'invio di un file specificando host,filename e path assoluto
send_file(Host,Filename,FilePath,Port)->
    {ok, Socket} = gen_tcp:connect(list_to_atom(Hostname), Port,          TCP_OPTIONS_CLIENT),
    FilenamePadding = string:left(Filename, 30, $ ), %%Padding with white space
    gen_tcp:send(Socket,FilenamePadding),
    Ret=file:sendfile(FilePath, Socket),
    ok = gen_tcp:close(Socket). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-16T14:48:30.553

我制作了两个函数，您可以在其中发送带有消息传递的二进制文件。

```
%Zip a file or a folder
send_zip(Pid, FolderName) ->
    %Name of you zip file
    FolderNameZip= FolderName++".zip",   
    %Zip the folder/file from the computer and name the zip file by FornderNameZip                    
    {ok, ZipFile} = zip:create(FolderNameZip, [FolderName]),
    %Put the Zipfile in a variable 
    {ok, ZipHandle} = file:read_file(ZipFile),
    %Send the zipfile to the other PID, sends the zipfile and his name to name it the same way.
    Pid ! {finish, ZipHandle, FolderNameZip}.

%save and unzip the in the computer 
register_zip_bash(Dir, ZipHandle, FolderNameZip) -> 
    file:write_file(FolderNameZip, ZipHandle),
    Cmd2 = io_lib:format("unzip -o -j ~p -d ~p/",[FolderNameZip, Dir]),
    _=os:cmd(Cmd2). 
```

FoldeName 可以是您计算机中文件或文件夹的名称。Pid 是您要发送消息的人。

当您收到 ZipHandle 和 FolderNameZip 时，使用 register_zip_bash(...) 函数将数据保存在您的计算机中。Dir 是您要保存数据的目录。ZipHandle 是您从 PID 函数接收的二进制文件。FolderNameZip 是 ZipHandle 将在计算机中保存的位置的名称。

如您所见， send_zip(...) 使用 erlang 函数，而 register_zip_bash(...) 使用 bash 命令。您不必压缩文件来发送数据。不要犹豫，更改代码以使其适合您。

希望这会有所帮助，干杯。

# joomla - 使用 Joomla 2.5

> ID：13818588
> 
> 赞同：-2
> 
> 时间：2012-12-11T10:45:05.267
> 
> 标签：joomla

在 Joomla 中，哪个扩展最适合显示横幅底部的横幅标题。意味着不在横幅之外的横幅中。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:56:06.957

如果您想要一个简单的修复来更好地控制横幅，我建议您使用自定义 HTML 模块并将其发布在与横幅相同的位置。

例如，如果您使用 Google Adsense，您会添加类似

```
 <script>
     Your Adsense Code Here
 </script>
 <h3>Your Bottom Title Here</h3> 
```

确保您禁用模块中的标题字段，横幅组件在 Joomla 中是可以的，但没有什么比使用自定义 HTML 完全控制更好的了。如果您发现自定义 HTML 模块正在过滤您的脚本等，请在 Joomla 扩展中搜索支持非过滤的自定义 HTML。我相信 Flexi 就是其中之一。

希望这可以帮助！

# jquery - clearInterval 没有按预期工作

> ID：13818589
> 
> 赞同：0
> 
> 时间：2012-12-11T10:45:07.863
> 
> 标签：jquery

我有以下代码用于使 div 嘎嘎作响。

我使用 clearInterval 来阻止嘎嘎声，但它似乎不起作用。

知道为什么吗？

```
squares = $('.' + square_class); 
var rattle; 

 rattle = setInterval(function() {
 squares.delay(2000).effect('shake', { times:4, distance: 5 }, 100);
 }, 2000);

clearInterval(rattle); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:52:29.177

这就是我看到这个设置的方式。如果不是，请告诉我们

```
<script>
var rattle;

window.onload=function () {

  rattle = setInterval(
    function() {
      squares.delay(2000).effect('shake', { times:4, distance: 5 }, 100); 
    }, 
  2000);

  setTimeout(function() { clearInterval(rattle); },10000);
}
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T10:52:31.743

您的代码中有一些错误..您应该像这样修复它：

```
var rattle = setInterval(function(){
    squares.delay(2000).effect('shake', { times:4, distance: 5 }, 100);
}, 1500); 
```

接着

```
clearInterval( rattle ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T11:00:04.980

如果您希望实际动画效果停止而不经过它的全部持续时间，请使用 jQuery`stop()`方法

```
clearInterval(rattle);
squares.stop(); 
```

API 参考：[http ://api.jquery.com/stop/](http://api.jquery.com/stop/)

# android - eclipse 设备视图未检测到我的 Galaxy Note

> ID：13818590
> 
> 赞同：-1
> 
> 时间：2012-12-11T10:45:13.473
> 
> 标签：android

eclipse 设备视图未检测到我的 Galaxy Note。我也可以从电脑打开手机的文件夹我已经从三星网站安装了USB驱动程序配音后仍然没有出现设备

请注意：-我已在手机中启用 USB 调试

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:14:29.783

要安装驱动程序，请下载 kies samsung（在 gooogle 上键入 kies samsung）安装它，然后尝试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T10:48:42.617

检查您的设备管理器，如果您在设备旁边看到黄色标记，请手动更新您的设备驱动程序。浏览您的计算机以查找驱动程序软件，然后从设备驱动程序列表中进行选择

# java - Java泛型：为什么不能从（内部）超接口实现内部接口？

> ID：13818592
> 
> 赞同：5
> 
> 时间：2012-12-11T10:45:20.413
> 
> 标签：java, generics, inheritance, interface

我有一个这样的界面：

```
public interface SuperInterface {
    public interface SubInterface {
        public void get();
    }
    //**More interfaces*/

} 
```

我的工具包中的这个方法，它检索作为某个类的实例的所有对象：

```
public static <T> ArrayList<T> getSome(ArrayList<Object> objects, Class<T> clazz) {
    ArrayList<T> result = new ArrayList<T>();
    for (Object o : objects) 
        if (clazz.isInstance(o)) 
            result.add(clazz.cast(o));
    return result;
} 
```

MyClass 并不是很有趣，它是一个从实现的空类`SuperInterface.SubInterface`

而这块主要是：

```
ArrayList<Object> mObjects = new ArrayList<Object>() {
    {
        add(new MyClass()); //SuperInterface.SubInterface
        add(Integer.valueOf(5));
        add(new String("Hello"));
        add(new Object());
    }
};
ArrayList<SuperInterface> mSuperInterfaces = Toolkit.getSome(mObjects, SuperInterface.class); //returns a zero-sized list.
ArrayList<SuperInterface.SubInterface> mSubInterfaces = Toolkit.getSome(mObjects, SuperInterface.SubInterface.class); //returns a one-sized list 
```

第一个方法调用不像我希望的那样工作，第二个方法调用。是否有可能使第一个工作而不显式地将子接口放在不同的文件中并实现超类？因为*显然子接口并不是真正的子接口*，所以我尝试制作这样的接口类：

```
public class ClassWithInterfaces {
  public interface Super { }
  public interface Sub implements Super { /**...*/ }
} 
```

但显然你不能`implements`在内部界面中使用。

我的问题是：**为什么会这样**，有没有办法完成我想要实现的目标（一个文件中的内部接口）？我不一定需要它，我只是想知道为什么不能在内部接口中实现（但可以扩展内部类）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T10:49:08.343

> 但显然你不能`implements`在内部界面中使用。

您正在寻找`extends`而不是`implements`：

```
public class ClassWithInterfaces {
  public interface Super { }
  public interface Sub extends Super { /**...*/ }
} 
```

这为我编译，我当然可以实现这两个接口。

由于在扩展与实施之间似乎存在一些混淆，也许以下内容将有助于澄清问题：

*   一个接口*扩展*了另一个接口。
*   一个类*实现*一个接口。
*   一个类*扩展*了另一个类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T10:48:59.157

根据 Java 语言规范：

*   [接口的所有成员（方法除外）都是隐式静态的](http://docs.oracle.com/javase/specs/jls/se7/html/jls-9.html#jls-9.5)
*   [根据定义，成员接口本身总是隐式静态的](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.5.1)

所以在这里你有两个原因为什么你不能拥有“真正的”内部接口

此外，正如 NPE 所写，一个接口永远不能实现另一个接口，它只能扩展它。类可以实现接口和/或扩展类，接口只能扩展接口。对我来说很有意义。

# encryption - 以自身为密钥（使用盐）加密秘密是否存在重大风险？

> ID：13818594
> 
> 赞同：0
> 
> 时间：2012-12-11T10:45:21.633
> 
> 标签：encryption, encryption-symmetric

我想将加密的用户密码存储在数据库中。我需要使用双向对称加密，例如。AES（在这种特殊情况下不能选择使用哈希）。

**第 1 部分**
使用我需要加密的字符串作为密钥是否会显着增加风险？如果这很重要，则将公共可用（同一行）盐添加到密钥中。

**第 2 部分**
同样的问题，但适用于以下场景：

*   A 用 B 作为密钥（包括盐）加密，并且
*   B 使用 A 作为密钥（包括盐）加密。

两个加密值都存储在同一数据库行中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:44:41.683

## 第1部分

只要您的字符串密码足够长并且您将字符串转换为密钥的功能是健壮的，那么以这种方式使用字符串密码就没有特殊的安全问题。

## 第2部分

为了防止涉及第一个块的重放攻击，您应该始终加盐。要么在 IV 中注入 nonce，要么在被加密的流的头部注入。

# javascript - 用法 - 使用 js 失去焦点事件后的文本字段

> ID：13818601
> 
> 赞同：-3
> 
> 时间：2012-12-11T10:46:02.023
> 
> 标签：javascript, jquery, html, textfield, jquery-textext

我正在创建一个表单调查表，我想要的是在文本字段的焦点丢失事件后在数据库中添加记录。

我想将用户在单击（回答）其他问题之前插入的内容保存在“使用”表中。如果他返回该文本字段，也保存新数据。

我可以为此使用 javascript/jquery 上的哪些简单事件/插件？我搜索并找到插件 TextExt：[http ://textextjs.com/](http://textextjs.com/)

但我没有找到任何关于它的例子，没有一个我很难使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:51:02.213

该事件通常称为模糊，我猜您是在标签中使用 jquery，所以是的.. jquery 有一个名为 blur 的事件，该事件基本上在文本字段失去焦点时触发

我相信它应该是这样的......

```
 $('textfield').blur(function(){
      //Code here
 }) 
```

# visual-studio-2010 - Visual Studio 中的多行字符串

> ID：13818603
> 
> 赞同：1
> 
> 时间：2012-12-11T10:46:11.040
> 
> 标签：visual-studio-2010, visual-studio

我如何在 VS2010 中使用 C# 在多行中创建字符串。我有一个作为字符串的 HTML 标记，它在设计器页面 (aspx) 中填写代码后面 (cs)。如何将它放在一行中，或者我必须将哪个字符放在行尾，以便字符串连接下一行。下面是字符串示例。

```
 string text="<table> <tr> <td> <table border=\"1\" cellpadding=\"0\"  style=\"mso-cellspacing: 1.5pt; mso-border-alt: outset black .75pt; mso-yfti-tbllook: 1184; 
        mso-padding-alt: 1.5pt 1.5pt 1.5pt 1.5pt; height: 264px; width: 100%;  font-size: 10.0pt; border: 1.0pt outset black; font-family: Times New Roman, serif; \"> 
            <tr style=\"mso-yfti-irow:0;mso-yfti-firstrow:yes\"> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T10:48:49.187

为此使用[逐字字符串文字](http://msdn.microsoft.com/en-us/library/362314fe.aspx)- 它们是通过`@`在字符串声明之前使用 a 来声明的。对那些的`"`逃避是`""`。

```
string text= @"<table> <tr> <td> <table border=""1"" cellpadding=""0""  style=""mso-cellspacing: 1.5pt; mso-border-alt: outset black .75pt; mso-yfti-tbllook: 1184; 
    mso-padding-alt: 1.5pt 1.5pt 1.5pt 1.5pt; height: 264px; width: 100%;  font-size: 10.0pt; border: 1.0pt outset black; font-family: Times New Roman, serif; ""> 
        <tr style=""mso-yfti-irow:0;mso-yfti-firstrow:yes"">"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:48:03.680

在第一个“前面加一个@”

像这样：string text = @"这是开启的

多行";

# c - 如何与 glibc 静态链接

> ID：13818609
> 
> 赞同：-1
> 
> 时间：2012-12-11T10:46:26.973
> 
> 标签：c, linux, gcc

因为我需要在另一个发行版上运行我编译的程序，并且没有静态链接，它只会给我一个错误，即`glibc`在该计算机上找不到版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:08:39.447

查看 GCC 链接器的[链接选项](http://gcc.gnu.org/onlinedocs/gcc/Link-Options.html "链接选项")。尤其是选项，请同时阅读这些选项`-static`的`-static-libgcc`注释，因为有时有理由不进行静态绑定，而是将共享库与程序一起部署。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:08:15.647

只需将[-static](http://gcc.gnu.org/onlinedocs/gcc/Link-Options.html#index-static-1040)选项传递给`gcc`

但我认为静态链接 Glibc 是个坏主意。

^(（您可以使用免费软件许可证以源代码形式分发您的程序；然后您可以将其打包用于多个发行版）)

# javascript - 带有 javascript 的 Ajax AutoCompleteExtender

> ID：13818610
> 
> 赞同：1
> 
> 时间：2012-12-11T10:46:34.067
> 
> 标签：javascript, asp.net, ajax, asp.net-ajax, autocompleteextender

我必须在 Web 表单中多次使用 Ajax AutoCompleteExtender，我试图根据其内容宽度设置 AutoCompleteExtender 列表的宽度。

```
 function onListPopulated() {
var completionList = $find("AutoCompleteEx").get_completionList();
completionList.style.width = 'auto';
} 
```

此方法适用于一个 behaviorID，但是当我尝试使用相同的函数 n 在方法中传递 AutoCompleteExtender ID 以便所有 AutoCompleteExtenders 仅使用一种方法时，什么都没有发生。我试图将 ID 作为参数传递，但没有奏效。可能是我错过了一些东西。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:20:59.723

如果您正在构建这样的方法：

```
function onListPopulated(id) {
  var completionList = $find(id).get_completionList();
  completionList.style.width = 'auto';
} 
```

那是对的; 确保您按如下方式传递 ID：

```
onListPopulated("<%= AutoCompleteEx.ClientID %>"); 
```

使用 ClientID 可确保使用正确的 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T10:33:43.870

我的问题是使用下面的代码解决的

```
//In the AutoCompleteExtender 
OnClientPopulated="onListPopulated" 
```

```
//and javascript 
 function onListPopulated(sender, e) {
     var completionList = sender.get_completionList();
      completionList.style.width = 'auto';
 } 
```

# asp.net-mvc-3 - MVC3从弹出窗口调用控制器方法

> ID：13818611
> 
> 赞同：0
> 
> 时间：2012-12-11T10:46:34.540
> 
> 标签：asp.net-mvc-3, razor

我有问题从视图调用方法到控制器。

**SendVotingPanel.cshtml**

```
@model EmailTemplete.Models.SendVotingEmail

@{
   ViewBag.Title = "SendVotingPanel";
}
 <h2>SendVotingPanel</h2>
  <meta charset="utf-8" />
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script type="text/javascript"` src="/resources/demos/external/jquery.bgiframe-2.1.2.js"></script>
<script type="text/javascript" src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
<link rel="stylesheet" href="/resources/demos/style.css" />

<script type="text/javascript">

    function Send() {
        $(function() {
            $("#dialog").dialog();
        });
    };
</script>

<input type="button" value="submit" id="openpopup" onclick="Send();"/>
@using (Html.BeginForm())
{
   <div style="display:none" id="dialog">

        <div class="editor-label">
            @Html.LabelFor(model => model.ContactEmail)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.ContactEmail)
            @Html.ValidationMessageFor(model => model.ContactEmail)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Subject)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Subject)
            @Html.ValidationMessageFor(model => model.Subject)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Message)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Message)
            @Html.ValidationMessageFor(model => model.Message)
        </div>
                   <br />
         <p>
            <input type="submit" value="Save"/>
        </p>
</div>
} 
```

**控制器**

```
 public ActionResult SendVotingPanel()
    {
        return View();
    }

    [HttpPost]
    public ActionResult SendVotingPanel(Models.SendVotingEmail model)
    {
        return View(model);
    } 
```

当我单击**openpopup**按钮时，会显示一个弹出窗口。当我用一些数据填充所有文本框并单击按钮时，我无法调用方法**SendVotingPanel**。我的代码是否还有任何更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:21:34.313

尝试改变：

```
@using (Html.BeginForm())
{
   <div style="display:none" id="dialog">
       ...
   </div>
} 
```

到：

```
<div style="display:none" id="dialog">
    @using (Html.BeginForm())
    {
       ...
    }
</div> 
```

# php - 使用 Cron 在 Yii 中刷新控制器动作

> ID：13818614
> 
> 赞同：0
> 
> 时间：2012-12-11T10:46:37.593
> 
> 标签：php, yii, console-application, yii-extensions

我想在 Yii 中实现刷新功能，每 5 分钟重复调用一个特定的动作。我试过控制台应用程序，但它的概念在这个特定的上下文中不清楚？我该如何实现这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:14:35.150

您可以在 crontab [检查 wiki中设置该操作 URL](http://www.yiiframework.com/wiki/91/implementing-cron-jobs-with-yii/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:59:05.983

*** 我想在 Yii 中实现刷新功能，每 5 分钟重复调用一个特定动作*** ??!!

为此，我认为您不需要老太婆或其他东西，只需使用`setInterval`或`setTimeout`

例如，`<div id="topResults"></div>`每 5 秒加载一次

```
setInterval(function()
    {
        $('#topResults').load('<?php echo Yii::app()->createAbsoluteUrl("controller/action"); ?>');
    },5000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T10:51:51.027

你可以用 cron 工作来做到这一点。

一些例子：[http ://www.thegeekstuff.com/2009/06/15-practical-crontab-examples/](http://www.thegeekstuff.com/2009/06/15-practical-crontab-examples/)

# android - 具有附加功能的 Android FTP 库

> ID：13818617
> 
> 赞同：0
> 
> 时间：2012-12-11T10:46:46.313
> 
> 标签：android, ftp, ftp-client, ftplib

我正在寻找一个适用于 android 的 java FTP 库，它可以从 FTP 服务器追加已创建的文件，而无需下载和上传相同的文件。

有谁知道这样的图书馆。

我听说过 ftp4j，但是在附加文件时很麻烦，正如[SO question 中提到的那样](https://stackoverflow.com/q/8269407/582571)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:52:36.370

[我相信Apache FTP 客户端](http://commons.apache.org/net/apidocs/org/apache/commons/net/ftp/FTPClient.html#appendFile%28java.lang.String,%20java.io.InputStream%29)可以在 Android 上运行，并提供您需要的附加功能：

# android - 使用traceview获取大量数据

> ID：13818619
> 
> 赞同：0
> 
> 时间：2012-12-11T10:46:50.903
> 
> 标签：android, buffer, buffer-overflow, android-traceview

我正在运行一些基准测试和一些溢出跟踪视图缓冲区，我已经在使用我可以使用的最大缓冲区大小（400MB）。我怎样才能得到这些数据？（我需要跟踪孔基准，不仅是基准的一些较小部分，每个部分都在不同的文件中）

是否可以在缓冲区已满时将其刷新到文件中？

是否可以将所有内容直接写入文件，而不是仅在跟踪停止时写入？

还有其他选择吗？

# c# - 访问一个字节的 LSB 并将其替换为一个值（1 或 0）

> ID：13818620
> 
> 赞同：0
> 
> 时间：2012-12-11T10:46:57.020
> 
> 标签：c#

这是场景，我有一个正数和负数的数字列表。还有另一个位列表（0 和 1）。我必须将这些位替换为第一个列表中每个数字的 LSB（即：数字）。

```
for (int k = 0; k< 8; k++)
{
    i1 = index[k, 0];
    i2 = index[k, 1];
    string str1 = Convert.ToString(d[i1,i2], 2);
    str1 = str1.Substring(Math.Max(str1.Length - 8, 0)).PadLeft(8, '0');
    str1[0] = Tnbinary[k];
} 
```

它不允许我修改 str[0] - 它说它只是可读的。我做错了什么，如何修改我的号码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T10:51:55.943

您可以使用位操作：

```
byte b = -3;
byte b0 = (byte)(b & 254);   // Make LSB 0
byte b1 = (byte)(b | 1);     // Make LSB 1 
```

如果您使用有符号字节，只需替换`byte`为`sbyte`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T10:51:55.760

如果这真的是一个字节，为什么你不做位算术，像这样：

```
new_byte = (old_byte & ~1) | new_bit 
```

# asp.net-mvc-4 - KendoUI Grid 过滤器重定向到另一个页面

> ID：13818624
> 
> 赞同：0
> 
> 时间：2012-12-11T10:47:02.337
> 
> 标签：asp.net-mvc-4, kendo-ui

当我使用 KendoUI Grid 的过滤器时，发生了一些非常奇怪的事情。我的网格很简单，定义是这样的：

> ```
>  var cols = [];
> 
>     cols[0] = { field: 'name', title: 'Nome', width: "65%" };
>     cols[1] = { field: 'eMail', title: 'eMail', width: "20%" };
>     cols[2] = { field: 'city', title: 'Cidade', width: "15%" };
> 
>     var cfgGrid = { dataSource: dsPersons, 
>                     batch: false, 
>                     change: onSelectedRow,
>                     selectable: "row", 
>                     resizable: true, 
>                     scrollable: true, 
>                     sortable: { mode: 'multiple', allowUnsort: true }, 
>                     filterable: true, 
>                     editable: false, 
>                     pageable: { numeric: false }, 
>                     columns: cols };
> 
>     gridPessoas = null;
>     gridPessoas = $("#gridElem").kendoGrid(cfgGrid).data("kendoGrid"); 
> ```

网格在 url 中正确显示：

> [http://myLocalhost.com:50409/#/personsView](http://myLocalhost.com:50409/#/personsView)

但是当我尝试过滤任何列时 kendoUI 重定向到一个页面：

> [http://myLocalhost.com:50409/undefined](http://myLocalhost.com:50409/undefined)？

网格没问题，只有在我定义过滤器值并单击过滤器按钮时才会出现错误。

这是一个 ASP.NET MVC 4 站点。我无法想象发生了什么。

你能帮助我吗 ？？？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:16:03.523

我发现了这个问题。

我正在使用 Sammy，这是一个允许我们定义路线的 JavaScript 框架，并且每次定义新位置时，Sammy 都会将 window.location 设置为新位置。

我刚开始和 Sammy 合作，所以我不能给你更多细节。但是当我选择一个 KendoUI 过滤器时，Sammy 的“setLocation”方法被调用，新位置等于“未定义？”。

我不知道为什么 KendoUI 会导致这种行为，但这是真正的问题。

# oop - 来自扩展的依赖注入

> ID：13818627
> 
> 赞同：1
> 
> 时间：2012-12-11T10:47:12.057
> 
> 标签：oop, design-patterns, dependency-injection

我正在为某个软件编写扩展程序。此扩展使用许多钩子来为该软件添加功能。有问题的软件完全使用全局状态，并且经常引入依赖关系，以及通过使用静态方法调用实现的紧密耦合。在我的钩子处理程序调用的代码中，我经常需要来自该软件的组件，因此似乎别无选择，只能将它们拉入。这些钩子都非常不同，在应用程序处理的各个步骤中传递不同的内容，并且在我的扩展代码中使用不同的处理组件。这基本上意味着我的扩展有很多入口点，排除了在某个主入口点创建应用程序对象并从那里进行依赖注入。关于在这种情况下尽可能采用 SOLID 代码的方法有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:23:48.070

我会考虑使用**Facade 设计模式**。它将帮助您隐藏当前系统的复杂性。使用外观模式，您的扩展和系统之间只能有一个通信点。在外观中，您只需公开扩展所需的入口点。它也将是唯一依赖于您当前系统组件的地方。

网络上有很多资源，所以只是开始：

*   [http://en.wikipedia.org/wiki/Facade_pattern](http://en.wikipedia.org/wiki/Facade_pattern)
*   [什么是外观设计模式？](https://stackoverflow.com/questions/5242429/what-is-facade-design-pattern)
*   [http://www.primos.com.au/primos/Default.aspx?PageContentID=26&tabid=65](http://www.primos.com.au/primos/Default.aspx?PageContentID=26&tabid=65)
*   [http://www.dofactory.com/Patterns/PatternFacade.aspx#_self1](http://www.dofactory.com/Patterns/PatternFacade.aspx#_self1)

# python - 理解 Python 的反斜杠转义字符

> ID：13818630
> 
> 赞同：3
> 
> 时间：2012-12-11T10:47:24.567
> 
> 标签：python

我的脚本通过将文件路径与文件类型后缀连接起来来创建要导出的文件。例如，

```
int = 3
print r"C:\Test\\" + str(int) + ".jpg" 
```

这返回`C:\Test\\3.jpg`

我认为因为我在开头包含了“r”，所以我不需要在结尾添加双反斜杠，因为它会被视为原始字符串。但以下不起作用：

```
int = 3
print r"C:\Test\" + str(int) + ".jpg" 
```

...大概是因为 Python 在结束引号之前看到了一个转义字符。那么'r'有什么意义呢？虽然我的文件在导出时保存在正确的位置，但我不喜欢打印命令在测试之后给我两个反斜杠（例如 C:\Test\3.jpg），而它只是在 C 之后给我一个反斜杠：

请问如何在文件路径中添加一个反斜杠？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T10:51:37.017

不要尝试使用字符串操作来构建文件路径。Python`os.path`为此提供了模块：

```
import os.path
i = 3
print os.path.join("C:\Test", str(i) + ".jpg") 
```

这将确保正确构建路径。

（另外，不要调用 integer `int`，因为它会影响内置`int()`函数。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-11T10:54:50.560

> 即使在原始字符串中，字符串引号也可以用反斜杠转义，但反斜杠保留在字符串中；例如，`r"\""`是由两个字符组成的有效字符串文字：反斜杠和双引号；`r"\"`不是有效的字符串文字（即使是原始字符串也不能以奇数个反斜杠结尾）。具体来说，*原始字符串不能以单个反斜杠结尾*（因为反斜杠会转义后面的引号字符）。另请注意，后跟换行符的单个反斜杠被解释为这两个字符作为字符串的一部分，*而不是*作为续行符。

[来源](http://docs.python.org/3/reference/lexical_analysis.html#string-and-bytes-literals)。

所以，它不会那样工作。如果您想使用原始字符串，但有一个尾随反斜杠，则需要在之后单独添加：

```
>>> r'C:\Test' + '\\'
'C:\\Test\\' 
```

或者，在您的情况下，您也可以只使用字符串格式来插入您的值：

```
>>> r'C:\Test\{0}.jpg'.format(i)
'C:\\Test\\1.jpg' 
```

或者，您用于`os.path.join`构建路径：

```
>>> os.path.join(r'C:\Test', str(i) +'.jpg')
'C:\\Test\\1.jpg' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T12:12:20.740

首先，不要调用整数 int，因为它会影响内置的 int() 函数。
**使用 os.path 是一个非常聪明的方法**：

```
import os.path
i = 3
print os.path.join("C:\Test", str(i) + ".jpg")
#C:\Test\3.jpg 
```

OR U**必须**使用字符串来操作来构建文件路径：

```
_prefix = 'C:\Test'
i = 3
print _prefix + '\\' + str(i) + '.jpg'
#C:\Test\3.jpg 
```

# iphone - 将不同的图像设置为 uitableview 单元格

> ID：13818631
> 
> 赞同：2
> 
> 时间：2012-12-11T10:47:25.440
> 
> 标签：iphone, objective-c, uitableview

我正在制作一个应用程序，其中一个视图有一个表格视图。Tableview 单元格有两个条件。根据条件，将在 uitableview 单元格上设置两个图像，即

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    NSString *que =[[userqueries objectAtIndex:indexPath.row]objectForKey:@"question"];
    NSString *ans =[[userqueries objectAtIndex:indexPath.row]objectForKey:@"answer"];
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil){
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle   reuseIdentifier:CellIdentifier] autorelease];
        cell.imageView.image=nil;

        if ((que.length!=0)&&(ans.length!=0)) {
            UIImageView* imag = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 320, 75)];
            imag.image = [UIImage imageNamed:@"ques.png"];
            [cell.contentView addSubview:imag];
            questext = [[UITextView alloc]initWithFrame:CGRectMake(10, 0, 300, 35)];
            questext.backgroundColor = [UIColor clearColor];
            questext.delegate = self;
            questext.tag = 101;
            questext.textAlignment = UITextAlignmentLeft;
            questext.editable = NO;
            questext.scrollEnabled = YES;
            [cell addSubview:questext];

            anstext = [[UITextView alloc]initWithFrame:CGRectMake(10, 37, 300, 35)];
            anstext.backgroundColor = [UIColor clearColor];
            anstext.delegate = self;
            anstext.tag = 102;
            anstext.scrollEnabled = YES;
            anstext.textAlignment = UITextAlignmentLeft;
            anstext.editable = NO;
            [cell addSubview:anstext];
        }
        else {
            UIImageView* imag = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 320, 40)];
            imag.image = [UIImage imageNamed:@"answ.png"];
            [cell.contentView addSubview:imag];

            onlyques = [[UITextView alloc]initWithFrame:CGRectMake(10, 0, 300, 35)];
            onlyques.backgroundColor= [UIColor clearColor];
            [onlyques setScrollEnabled:YES];
            onlyques.delegate = self;
            onlyques.tag = 103;
            onlyques.textAlignment = UITextAlignmentLeft;
            onlyques.editable = NO;
            onlyques.scrollEnabled = YES;
            [cell addSubview:onlyques];
         }
    }
    questext = (UITextView*)[cell viewWithTag:101];
    questext.text = que;

    anstext = (UITextView*)[cell viewWithTag:102];
    anstext.text = ans;

    onlyques = (UITextView*)[cell viewWithTag:103];
    onlyques.text = que;

    return cell;
} 
```

但图像显示不正确。当我上下滚动表格视图时，图像会自动更改。

请查看我的代码并帮助我找到错误。![在此处输入图像描述](../Images/7b13632b05adaacb56ced3a201b7b340.png)

![在此处输入图像描述](../Images/cf79f243b673b6706777d61b320cf99e.png)

第二张图片是当我向上和向下滚动表格视图时，第一张图片是在开始时。

请帮我。如果有人知道如何将不同的图像加载到 uitableview 单元格。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T11:17:45.107

尝试这个 ：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
   NSString *que =[[userqueries objectAtIndex:indexPath.row]objectForKey:@"question"];
   NSString *ans =[[userqueries objectAtIndex:indexPath.row]objectForKey:@"answer"];
   static NSString *CellIdentifier = @"Cell";
   UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

   if (cell == nil)
   {
      cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle   reuseIdentifier:CellIdentifier] autorelease];
      cell.imageView.image=nil;
   } 
   else
   {
      [cell.contentView.subviews makeObjectsPerformSelector:@selector(removeFromSuperview)];
   }

   if ((que.length!=0)&&(ans.length!=0)) 
   {
        UIImageView* imag = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 320, 75)];
        imag.image = [UIImage imageNamed:@"ques.png"];
        [cell.contentView addSubview:imag];
        questext = [[UITextView alloc]initWithFrame:CGRectMake(10, 0, 300, 35)];
        questext.backgroundColor = [UIColor clearColor];
        questext.delegate = self;
        questext.tag = 101;
        questext.textAlignment = UITextAlignmentLeft;
        questext.editable = NO;
        questext.scrollEnabled = YES;
        [cell addSubview:questext];

        anstext = [[UITextView alloc]initWithFrame:CGRectMake(10, 37, 300, 35)];
        anstext.backgroundColor = [UIColor clearColor];
        anstext.delegate = self;
        anstext.tag = 102;
        anstext.scrollEnabled = YES;
        anstext.textAlignment = UITextAlignmentLeft;
        anstext.editable = NO;
        [cell addSubview:anstext];
    }
    else 
    {
        UIImageView* imag = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 320, 40)];
        imag.image = [UIImage imageNamed:@"answ.png"];
        [cell.contentView addSubview:imag];

        onlyques = [[UITextView alloc]initWithFrame:CGRectMake(10, 0, 300, 35)];
        onlyques.backgroundColor= [UIColor clearColor];
        [onlyques setScrollEnabled:YES];
        onlyques.delegate = self;
        onlyques.tag = 103;
        onlyques.textAlignment = UITextAlignmentLeft;
        onlyques.editable = NO;
        onlyques.scrollEnabled = YES;
        [cell addSubview:onlyques];
     }

     questext = (UITextView*)[cell viewWithTag:101];
     questext.text = que;

     anstext = (UITextView*)[cell viewWithTag:102];
     anstext.text = ans;

     onlyques = (UITextView*)[cell viewWithTag:103];
     onlyques.text = que;

     return cell;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T11:02:00.693

首先`UITableViewCell`，如果您计划添加子视图，您应该真正使用 的子类（有关更多信息，请参阅[Apple 的文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewCell_Class/Reference/Reference.html)）。但是，我离题了...

有一种更简单的方法可以将图像添加到您的单元格（使用`UITableViewCellStyleDefault`）：

```
if (!cell)
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

if ((que.length!=0)&&(ans.length!=0)) {
    cell.imageView.image = [UIImage imageNamed:@"ques.png"];
    cell.imageView.frame = CGRectMake(0, 0, 320, 75);

    ...
}
else {

    cell.imageView.image = [UIImage imageNamed:@"answ.png"];
    cell.imageView.frame = CGRectMake(0, 0, 320, 40);

    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T10:56:53.663

试试这个，你必须在创建呼叫之前放置 }

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath   
      *)indexPath

       {
    NSString *que =[[userqueries objectAtIndex:indexPath.row]objectForKey:@"question"];
    NSString *ans =[[userqueries objectAtIndex:indexPath.row]objectForKey:@"answer"];
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle   
     reuseIdentifier:CellIdentifier] autorelease];
    }
        cell.imageView.image=nil;

        if ((que.length!=0)&&(ans.length!=0)) {
            UIImageView* imag = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 320, 75)];
            imag.image = [UIImage imageNamed:@"ques.png"];
            [cell.contentView addSubview:imag];
            questext = [[UITextView alloc]initWithFrame:CGRectMake(10, 0, 300, 35)];
            questext.backgroundColor = [UIColor clearColor];
            questext.delegate = self;
            questext.tag = 101;
            questext.textAlignment = UITextAlignmentLeft;
            questext.editable = NO;
            questext.scrollEnabled = YES;
            [cell addSubview:questext];

            anstext = [[UITextView alloc]initWithFrame:CGRectMake(10, 37, 300, 35)];
            anstext.backgroundColor = [UIColor clearColor];
            anstext.delegate = self;
            anstext.tag = 102;
            anstext.scrollEnabled = YES;
            anstext.textAlignment = UITextAlignmentLeft;
            anstext.editable = NO;
            [cell addSubview:anstext];
        }

        else
        {
            UIImageView* imag = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 320, 40)];
            imag.image = [UIImage imageNamed:@"answ.png"];
            [cell.contentView addSubview:imag];

            onlyques = [[UITextView alloc]initWithFrame:CGRectMake(10, 0, 300, 35)];
            onlyques.backgroundColor= [UIColor clearColor];
            [onlyques setScrollEnabled:YES];
            onlyques.delegate = self;
            onlyques.tag = 103;
            onlyques.textAlignment = UITextAlignmentLeft;
            onlyques.editable = NO;
            onlyques.scrollEnabled = YES;
            [cell addSubview:onlyques];
         }

    questext = (UITextView*)[cell viewWithTag:101];
    questext.text = que;

    anstext = (UITextView*)[cell viewWithTag:102];
    anstext.text = ans;

    onlyques = (UITextView*)[cell viewWithTag:103];
    onlyques.text = que;

    return cell;

} 
```

希望这可以帮助你..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T10:49:53.080

尝试这个

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath  *)indexPath{
NSString *que =[[userqueries objectAtIndex:indexPath.row]objectForKey:@"question"];
NSString *ans =[[userqueries objectAtIndex:indexPath.row]objectForKey:@"answer"];
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil)
{
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];

    cell.imageView.image=nil;
}
    if ((que.length!=0)&&(ans.length!=0)) {
        UIImageView* imag = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 320, 75)];
        imag.image = [UIImage imageNamed:@"ques.png"];
        [cell.contentView addSubview:imag];
        questext = [[UITextView alloc]initWithFrame:CGRectMake(10, 0, 300, 35)];
        questext.backgroundColor = [UIColor clearColor];
        questext.delegate = self;
        questext.tag = 101;
        questext.textAlignment = UITextAlignmentLeft;
        questext.editable = NO;
        questext.scrollEnabled = YES;
        [cell addSubview:questext];

        anstext = [[UITextView alloc]initWithFrame:CGRectMake(10, 37, 300, 35)];
        anstext.backgroundColor = [UIColor clearColor];
        anstext.delegate = self;
        anstext.tag = 102;
        anstext.scrollEnabled = YES;
        anstext.textAlignment = UITextAlignmentLeft;
        anstext.editable = NO;
        [cell addSubview:anstext];
    }

    else
    {
        UIImageView* imag = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 320, 40)];
        imag.image = [UIImage imageNamed:@"answ.png"];
        [cell.contentView addSubview:imag];

        onlyques = [[UITextView alloc]initWithFrame:CGRectMake(10, 0, 300, 35)];
        onlyques.backgroundColor= [UIColor clearColor];
        [onlyques setScrollEnabled:YES];
        onlyques.delegate = self;
        onlyques.tag = 103;
        onlyques.textAlignment = UITextAlignmentLeft;
        onlyques.editable = NO;
        onlyques.scrollEnabled = YES;
        [cell addSubview:onlyques];
     }

questext = (UITextView*)[cell viewWithTag:101];
questext.text = que;

anstext = (UITextView*)[cell viewWithTag:102];
anstext.text = ans;

onlyques = (UITextView*)[cell viewWithTag:103];
onlyques.text = que;

return cell;

} 
```

我在这里所做的是将您的图像更改条件放在外面

```
if(cell == nil){ } statement 
```

# jpa - 来自 EJB 的事务控制

> ID：13818633
> 
> 赞同：0
> 
> 时间：2012-12-11T10:47:31.997
> 
> 标签：jpa, jakarta-ee, transactions, ejb

我对 JavaEE/JPA 还很陌生，我在我的项目中遇到了以下需求，我已经搜索了一段时间如何实现的需求，但到目前为止还没有成功，所以我希望你们中的任何人都可以指出我的错误，希望也能告诉我正确的解决方案是如何工作的，让我学习而不是仅仅复制一段工作代码。

问题：

在我的 Bean 中，我有一个调用 3 个不同 JPA 持久方法（1 个持久方法和 2 个合并方法）的方法，但我必须确保，如果这些持久方法中的一个或多个失败，我可以回滚整个事务，以避免进一步问题。

这是我的 bean 的外观：

```
@Stateless(mappedName = "FuncionarioBean")
@Remote(FuncionarioBeanRemote.class)
@TransactionManagement(TransactionManagementType.BEAN)//Was instructed to put this annotation, but I don't know the real impact of it in my application if it was set as a CONTAINER.
public class FuncionarioBean implements FuncionarioBeanRemote {

    @PersistenceContext
    private EntityManager em;

    @Resource
    private UserTransaction utx;

    @Override
    public void updateFuncionario(FuncionarioEntity funcionarioEditado) {

        try{
            utx.begin();
            /* irrelevant code */
            callJPAMergeMethod1();
            /* irrelevant code */
            callJPAMergeMethod2();
            /* irrelevant code */
            callJPACreateMethod1();
            /* irrelevant code */
            utx.commit();
        } catch (Exception e) {
            utx.rollback();
        }
    }
} 
```

我正在将要更新/合并的元素之一设置为 null(column is NOT NULL) 以确保会有异常，但由于某些未知原因（至少对我而言），没有抛出异常并且其他方法继续存在执行。如果我删除 UserTransaction 方法并删除`@TransationManagement`注释，则会引发异常，但我无法回滚整个方法。

你们中的任何人都可以告诉我我在这里做错了什么吗？

提前感谢所有帮助。

此致，

恩里科·贝加莫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:09:15.027

`@TransactionManagement`不需要为此目的。

容器将在以下情况下回滚：

*   系统异常
*   （未）用@ApplicationException 注释的检查异常

只要您的 EE 容器有能力，就会被抛出。因为例如 NullPointerException 是一个未经检查的异常非系统异常，所以这里通常不提供回滚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:40:26.043

既不需要使用`UserTransaction`, 也不需要`@TransactionManagement`注解，也不需要抛出任何异常。

您所描述的行为是**默认的 JPA 行为**。如果一个或多个操作在事务提交时失败，整个事务——即在数据库事务中执行的所有操作——将被回滚。回滚由 JPA 提供程序自动执行，因此您不必“手动”执行任何操作。

但是，您应该注意一件事 - 如果您在方法中管理 JPA 关系 - 即空引用等，您将需要恢复它们或在事务回滚时重新加载实体。

# scala - 由 scaladin 覆盖原始 vaadin 类方法包装器

> ID：13818644
> 
> 赞同：1
> 
> 时间：2012-12-11T10:48:18.530
> 
> 标签：scala, vaadin

我将 vaadin 与 scaladin 附加组件一起使用并有一个类扩展[vaadin.scala.CustomComponent](https://github.com/henrikerola/scaladin/blob/2.2/addon/src/main/scala/vaadin/scala/CustomComponent.scala)

```
class CostPlanImport extends CustomComponent {
    var root: Panel = _
    // ..
} 
```

现在我想在我的类中覆盖[com.vaadin.ui.Component](https://vaadin.com/api/com/vaadin/ui/Component.html#attach%28%29)类的附加方法并在该方法中访问我的类属性（根，..）。

我该怎么办？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T11:41:22.647

正如您从[CustomComponent](https://github.com/henrikerola/scaladin/blob/2.2/addon/src/main/scala/vaadin/scala/CustomComponent.scala)源代码中看到的那样

```
class CustomComponent(override val p: com.vaadin.ui.CustomComponent with
    CustomComponentMixin = new com.vaadin.ui.CustomComponent with 
    CustomComponentMixin
) extends AbstractComponent(p) {
    ... inner code
} 
```

您将相应的 vaadin 组件作为构造函数参数`p`（通常代表“peer”）传递

也就是说，scaladin 组件是原始组件的包装器。

要覆盖对等组件的行为，您必须在将其传递给包装器构造函数时执行此操作。

你在这里有不同的选择

* * *

**带有匿名子类**

```
class CostPlanImport(override val p: com.vaadin.ui.CustomComponent with CustomComponentMixin =
    new com.vaadin.ui.CustomComponent {
        def attach() {
            //your code here
        } with CustomComponentMixin
) extends CustomComponent(p) 
```

* * *

**有特点**

```
trait AttachBehavior {
    self: com.vaadin.ui.Component =>
      def attach() {
         //your reusable code here
      }
}

class CostPlanImport(override val p: com.vaadin.ui.CustomComponent with CustomComponentMixin =
    new com.vaadin.ui.CustomComponent 
        with CustomComponentMixin
        with AttachBehavior
) extends CustomComponent(p) 
```

* * *

**有一个`CustomComponent`子类**

[未显示，而是前面两个示例的混合]

* * *

*注意：代码示例未经测试*

* * *

**更新**

如果您需要将“包装组件”构造函数中的参数传递给对等方的方法，您可以

```
class CostPlanImport(
    name: String,
    cost: Double,
) extends CustomComponent( p = 
    new com.vaadin.ui.CustomComponent {
        def attach() {
            //your code here
            //with "name" & "cost" visible
        } with CustomComponentMixin
) 
```

# android - 我想知道是否有一个 ANDROID API 允许呼叫者在另一个人拿起电话之前听不同的音调

> ID：13818648
> 
> 赞同：0
> 
> 时间：2012-12-11T10:48:29.500
> 
> 标签：android, api, ringtone, telephonymanager

我想知道是否有一个 ANDROID API 允许呼叫者在另一个人拿起电话之前听不同的音调？一个ANdroid API或一个用另一个替换音调的代码？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:51:09.593

简单的答案是“你不能那样做”。音调是由电话公司产生的，而不是由接收手机产生的。某些移动运营商（在某些国家/地区）将此服务作为附加服务出售给您的订阅：当有人拨打您的号码时，他们会听到您预先选择的提示音。因为在呼叫到达手机之前此音由实体控制，所以无法从手机、android 或其他方式更改此音。

# javascript - JavaScript 在 if 语句中重定向，可防止代码执行而不会产生错误

> ID：13818649
> 
> 赞同：1
> 
> 时间：2012-12-11T10:48:32.150
> 
> 标签：javascript

我可以在 if 语句中执行 JavaScript 重定向，以防止代码执行超过 if，而不必抛出或生成错误，也不必将不需要的代码放在 else 块中？

**在重定向之前产生错误的期望结果示例**

```
if (true) {
  window.location.href = window.location.toString();
  throw "";  // Yields error, but stops execution. return; also yields error.
}
alert("Undesired code has been executed"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:12:16.743

它对我来说如何`setTimeout(function(){throw "sss"},0)`在 chrome 中工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:50:23.540

您可以`else`在其余代码周围放置一个块。我猜一定有一些原因你不能这样做。

如果代码在函数中，当然可以使用`return;`

如果它在全球范围内，我认为你不会阻止它，除非导致错误。

# node.js - 将函数指针作为参数传递，node.js

> ID：13818652
> 
> 赞同：1
> 
> 时间：2012-12-11T10:48:36.300
> 
> 标签：node.js, function, pointers, arguments

我正在编写一个`http`服务器`node.js`。该`Server`对象有几个字段，应根据请求发送给客户端。这就是为什么我需要传递`status()`给`router.route()`- 所以它可以从内部调用（在解析请求之后）并返回更新变量值。问题是当`status()`被调用时它不会打印字段值，而是对象文字。

构造函数`Server`如下：

```
this.server = net.createServer(connectionHandler);  
    this.resourceMap = resourceMap;
    this.rootFolder = rootFolder;
    this.isStarted = false;
    this.startedDate = undefined;
    this.port = undefined;
    this.numOfCurrentRequests = 0;

function status() {
    return {
        "isStarted" : this.isStarted,
        "startedDate" : this.startedDate,
        "port" : this.port,
        "resourceMap" : this.resourceMap,
    };
}

function connectionHandler(socket) {
    console.log('server connected');
    console.log('CONNECTED: ' + socket.remoteAddress +':'+ socket.remotePort);
    socket.setEncoding('utf8');
    socket.on('data',function(data) {
            this.numOfCurrentRequests += 1;
            router.route(status,data,socket,handle,resourceMap,rootFolder);
            });
}

this.startServer = function(port) {
    this.port = port;
    this.isStarted = true;
    this.startedDate = new Date().toString();
    this.server.listen(port, function() {
            console.log('Server bound');
        });
}
} 
```

当从内部调用状态时，`router.route()`我得到

```
function status() {
        return {
            "isStarted" : this.isStarted,
            "startedDate" : this.startedDate,
            "port" : this.port,
            "resourceMap" : this.resourceMap,
        };
    } 
```

我理解它的方式函数是变量，因此按值传递。有什么办法可以解决我的问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:21:24.850

如果我已经清楚地联系到您，您不需要函数指针，但它是结果。所以`status`应该按如下方式传递：

`router.route(status(),data,socket,handle,resourceMap,rootFolder);`

最终将传递以下对象：

```
return {
        "isStarted" : this.isStarted,
        "startedDate" : this.startedDate,
        "port" : this.port,
        "resourceMap" : this.resourceMap,
    } 
```

如您要显示它们，在您的回调中使用以下代码

```
for(var s in status) {
    console.log(s+" : "+status[s]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-23T10:29:49.827

对于像我这样在 Google 搜索中实际上是指“函数指针”的人，这里有一个答案：

承认我们在 app.js 文件中需要一个外部文件：

```
var _commandLineInterface("./lib/CommandLine")();
var _httpServer = require("./lib/HttpServer")(_commandLineInterface); 
```

然后，在我们的 HttpServer.js 文件中，承认我们想要使用 _commandLineInterface 对象作为 _httpServer 构造函数的参数传递。我们会做：

```
function HttpServer(_cli){
    console.log(_cli);
}

module.exports = HttpServer; 
```

BZZZZZZZZT！错误。_cli 指针似乎未定义。结束了。一切都丢失了。

好的...这是诀窍：还记得我们的 CommandLine 对象吗？

```
function CommandLine(){
    ...

    return this;
}

module.exports = CommandLine; 
```

是的。当您不习惯 nodejs 行为时，这很奇怪。

您必须对您的对象说，它必须在构造完成后返回自身。对于习惯于前端 Javascript 行为的人来说，这是不正常的。

因此，当您添加小“返回技巧”时，您将能够从其他对象内部获取指针：

```
function HttpServer(_cli){
    console.log(_cli); // show -> {Object}
} 
```

希望它能帮助一些像我这样的nodejs新手。

# ember.js - 如何从 containerView 的不同 AJAX 请求中获取 childViews 的数据？

> ID：13818655
> 
> 赞同：1
> 
> 时间：2012-12-11T10:48:41.137
> 
> 标签：ember.js

我有一个 ContainerView 有超过 6 个动态子视图的应用程序。我发现 Ember 没有连接到各个 childViews 的控制器，我与这个 childViews 相关的数据目前正在 childViews 本身中检索。我什至尝试过使用 containerView 的控制器，但是 childView 的数据彼此非常独立，需要多个请求来获取数据。有没有更好的方法我可以做到这一点？这是我现在正在做的示例代码

```
 var App=Ember.Application.create();
App.TestView=Ember.ContainerView.create({

  init: function(){
    var childViews=this.get('childViews');
    childViews.pushObject(Ember.View.create({
      data:this.getData(), 
      getData : function() {
         //Ajax Call

      }

    }));

  }

});

App.TestController=Ember.Controller.create({
  content : []
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:12:13.540

也许您可以在容器视图的控制器中获取数据，并通过计算属性将它们共享给子视图。就像是：

```
App.TestController = Ember.Controller.extend({

  dataForChild1: function () {
    return $.getJSon().data; // make here the ajax call you need
  }.property()

  ...
});

App.TestView = Ember.ContainerView.extend({

  childViews: ['view1', 'view2'],

  view1: Ember.View.extend({
     dataBinding: 'controller.dataForChild1'
  })
}); 
```

# java - JPA 一对多在映射后给出空值

> ID：13818656
> 
> 赞同：1
> 
> 时间：2012-12-11T10:48:47.110
> 
> 标签：java, jakarta-ee, jpa, mapping, one-to-many

有人可以指出我做错了什么（对先前问题的跟进）吗？

我有三个类：仪表板、仪表板用户和用户。

仪表板工作正常，代码如下：

```
 @OneToMany(cascade= CascadeType.ALL, orphanRemoval = true, mappedBy="dashboard")
    private List<DashboardUser> dashboardUsers = new ArrayList<>(); 
```

DashboardUser 包含以下两个 JPA 声明：

```
 @Id
    @ManyToOne(fetch=FetchType.LAZY)
    @JoinColumn(name = "IDUser")
    private User user;

    @Id
    @ManyToOne(fetch=FetchType.LAZY)
    @JoinColumn(name = "IDDashboard")
    private Dashboard dashboard; 
```

问题在于 User.java：

```
@OneToMany(cascade= CascadeType.ALL, orphanRemoval = true, mappedBy="user")
    private List<DashboardUser> dashboardUsers; 
```

它看起来一样，但只有 Dashboard 类可以正常工作。执行我的代码后，我的仪表板在他的属性中有一个dashboardUser，但是用户对dashboardUser 有一个空值。

数据库中的表有两个字段：IDUser 和 IDDashboard（我确实使用了正确的 userID 和 dashboardID）。有人看到我的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:51:29.897

添加`@JoinColumn`注释到`User`

```
@OneToMany(cascade= CascadeType.ALL, orphanRemoval = true, mappedBy="user")
@JoinColumn(name="dashBoardUserId") //Replace with actual column name
private List<DashboardUser> dashboardUsers; 
```

我不得不猜测主键的名称，`DashboardUser`因此需要在实际代码中替换它。

在进一步查看代码后，我假设这`DashboardUser`是一个连接表`Dashboard`，`User`它映射了用户可以访问的仪表板。这种情况最好由`@ManyToMany`关系映射。一个用户可能有权访问多个仪表板，而一个仪表板可能有许多用户，因此是多对多关系。以下映射将在用户和仪表板之间创建多对多关系。

**用户.java**

```
public class User{

    @ManyToMany(cascade={CascadeType.ALL}, targetEntity=Dashboard.class)
        @JoinTable(name="DASHBOARD_USER", 
        joinColumns={@JoinColumn(name="IDUser", referencedColumnName="IDUser")},
        inverseJoinColumns={@JoinColumn(name="IDDashboard",       
        referencedColumnName="IDDashboard")})
     public List<Dashboard> dashboards = new ArrayList<Dashboard>();

     //Other fields/Getters/Setters 
} 
```

**仪表板.java**

```
@Entity
public class Dashboard{

     @ManyToMany(mappedBy="dashboards")
     private List<Users> users;

     //Other fields/Getters/Setters

} 
```

# ios - mapkit 中的 OSM 与 route-me OSM

> ID：13818659
> 
> 赞同：0
> 
> 时间：2012-12-11T10:48:53.930
> 
> 标签：ios, mapkit, openstreetmap, route-me, mapbox

我第一次尝试弄清楚 MapKit。

与在 route-me/mapbox 中使用 OSM 相比，iOS 6 MapKit 提供的地图有什么不同吗？

MapKit 提供的地图是苹果的瓦片服务器提供的吗？

是否可以将 route-me 与 Apple 的 tile 服务器一起使用？那会有什么不同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T12:43:57.090

这些本质上是两个不同的框架。MapKit 非常简单，允许您快速实现带有图钉、标注和其他可能需要显示的图层的地图视图。一个挫折是您将无法使用离线地图或拥有自定义样式的地图。

Route-me（通常与 mapbox 配对）在地图方面为您提供更大的灵活性（基于 OSM，您可以在理论上将它们自定义为看起来像苹果的地图）。您甚至可以下载一组图块以离线显示给用户。不过，使用此框架实现地图需要做更多的工作。

# php - 根据 WSDL 文件格式自定义 PHP SOAP 主体参数

> ID：13818666
> 
> 赞同：3
> 
> 时间：2012-12-11T10:49:01.387
> 
> 标签：php, web-services, soap, soap-client

我正在尝试将 SOAP 请求发送到远程服务器，并且需要发送以下请求消息。

```
<SOAP-ENV:Body>
<ns1:F1>
<id>2323</id>
</ns1:F1>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

但我的请求是这样的

```
<SOAP-ENV:Body>
<ns1:F1/>
<param1>2323</param1>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

我像这样使用来自 WAMP 服务器的通用 php soap_client 函数。

```
 $client = new SoapClient("name.wsdl",array(
    "trace"      => 1,
    "exceptions" => 0 );

  $result = $client->F1($value); 
```

如何将第二个输出转换为第一个。我需要更改参数名称是从 param1 更改为 F1 并正确关闭 Body 标记。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T16:28:35.333

你是如何构建价值的？如果 Web 服务正在寻找复杂类型，您可能需要将此变量创建为多维数组。如果有线索，您可以在 WSDL 文件中查找线索。

```
$value = array(
           'F1' = array(
                    'id' => 2323
                       )
               ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T15:24:55.830

首先，检查您的 WSDL URL 是否正确，因为 SoapClient 使用服务中的 WSDL 来了解如何命名您的参数。

您还可以逐字指定参数名称：

```
$response = $client->__soapCall('ns1:F1', array(new SoapParam('2323','id'))); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T05:47:36.277

尝试在 __soapCall 函数中使用参数，

```
$client = new SoapClient("name.wsdl");

$arrayname = array(
  XXXXXXXXX
);

$response = $client->__soapCall("F1", array($arrayname )); 
```

# bash - 如何将 bash/zsh 参数转发到另一个 shell

> ID：13818669
> 
> 赞同：1
> 
> 时间：2012-12-11T10:49:04.317
> 
> 标签：bash, quotes, zsh

我正在使用具有大量 tcsh 配置脚本的系统，要求我通过 tcsh 运行大多数程序。我试图通过将其添加到我的`~/.zshrc`：

```
# run command in tcsh
function t() {
    tcsh -c "$@"
} 
```

这适用于类似的东西`t ls`，但失败了`t ls -l`，这会给出错误`Unknown option: `-l' Usage: tcsh ...`，并且显然`-l`是作为参数传递给`tcsh`，而不是传递给`ls`。

如何引用传入的字符串`$@`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T18:50:44.517

Zsh 对此有一个特殊的选择（不是 bash）`${(q)}`：

```
tcsh -c "${(j. .)${(q)@}}" 
```

. 第一个 ( `${(q)@}`) 转义`$@`数组项中具有特殊含义的所有字符，第二个 ( `${(j. .)…}`) 将数组连接成一个字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T10:57:16.243

这似乎有效

```
function t {
  tcsh -c "$*"
} 
```

并且比您在其他答案中找到的要短得多；-)

[编辑：]

好的，如果您真的想用引号引起反常...放弃该功能并使用别名（无论如何这可能是一个更好的主意）

```
alias t='tcsh -c' 
```

[edit2:] 这是一个很好的和重点讨论在 Zsh [http://zshwiki.org/home/scripting/args中引用参数的不同方法](http://zshwiki.org/home/scripting/args)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T10:56:38.910

[这个答案](https://stackoverflow.com/a/8723305/102441)有我需要的：

```
# run command in tcsh
function t() {
    C=''
    for i in "$@"; do
        C="$C \"${i//\"/\\\"}\""
    done;
    tcsh -c "$C"
} 
```

# android - 使用 ProgressDialog 在 AsyncTask 中包装 NewsParser

> ID：13818673
> 
> 赞同：0
> 
> 时间：2012-12-11T10:49:17.543
> 
> 标签：android, android-asynctask

所以我设置了这个解析代码，我得到了 NetworkOnMainThreadException，所以我想把它包装在一个 AsyncTask 中，但我不知道该放什么以及放哪里..

我已经阅读了一些关于 AsyncTask 的教程，但它们都有些令人困惑，我想知道是否有人能指出我应该将我现在拥有的块放在哪里：

Noticias.java (MainActivity):

```
public class Noticias extends ListActivity {

static final String URL = "http://loc.grupolusofona.pt/index.php/?format=feed";

static final String KEY_ITEM = "item"; 
static final String KEY_TITLE = "title";
static final String KEY_DESC = "description";
static final String KEY_LINK = "link";
static final String KEY_PUBDATE = "pubDate";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_noticias);

    ArrayList<HashMap<String, Spanned>> menuItems = new ArrayList<HashMap<String, Spanned>>();

    XMLParser parser = new XMLParser(); 
    String xml = parser.getXmlFromUrl(URL);
    Document doc = parser.getDomElement(xml); 

    NodeList nl = doc.getElementsByTagName(KEY_ITEM);

    String data[] = new String[nl.getLength()];

    for (int i = 0; i < nl.getLength(); i++) {

        HashMap<String, Spanned> map = new HashMap<String, Spanned>();
        Element e = (Element) nl.item(i);

        //Date Conversion
        data[i] = getTagValue("pubDate", e);
        SimpleDateFormat sdf = new SimpleDateFormat("EE, dd MMM yyyy HH:mm:ss z", Locale.UK);
        Date date = null;

        try {
            date = sdf.parse(data[i]); 
            String timeOfDay = new SimpleDateFormat("HH:mm").format(date); 
            java.sql.Timestamp timeStampDate = new Timestamp(date.getTime());
            java.sql.Timestamp timeStampNow = new Timestamp((new java.util.Date()).getTime()); 

            long secondDiff = timeStampNow.getTime() / 1000 - timeStampDate.getTime() / 1000;
            int minuteDiff = (int) (secondDiff / 60);
            int hourDiff = (int) (secondDiff / 3600);
            int dayDiff = daysBetween(date, new Date()); 
            if (dayDiff > 0) {
                System.out.println("Há " + dayDiff + " dia(s), às " + timeOfDay); 
                data[i] = ("Há " + dayDiff + " dia(s), às " + timeOfDay);

            } else if (hourDiff > 0) {
                System.out.println("Há " + hourDiff + " hora(s), às " + timeOfDay);
                data[i] = ("Há " + hourDiff + " hora(s), às " + timeOfDay);

            } else if (minuteDiff > 0) {
                System.out.println("Há " + minuteDiff + " minuto(s), às " + timeOfDay);
                data[i] = ("Há " + minuteDiff + " minuto(s), às " + timeOfDay);

            } else if (secondDiff > 0) {
                System.out.println("Há " + secondDiff + " segundo(s), às " + timeOfDay);
                data[i] = ("Há " + secondDiff + " segundo(s), às " + timeOfDay);

            }
        } catch (ParseException e1) {
            e1.printStackTrace();
        } catch (java.text.ParseException e1) {
            e1.printStackTrace();
        }

        //Html.fromHtml to get <CDATA> Description          
        map.put(KEY_TITLE, Html.fromHtml(parser.getValue(e, KEY_TITLE)));
        map.put(KEY_DESC, Html.fromHtml(parser.getValue(e, KEY_DESC)));
        map.put(KEY_PUBDATE, Html.fromHtml(data[i]));
        map.put(KEY_LINK, Html.fromHtml(parser.getValue(e, KEY_LINK)));

        menuItems.add(map);

    } //endFOR

    //Using ListAdapter is enough for this, no need for Custom Adapter
    ListAdapter adapter = new SimpleAdapter(this, menuItems, R.layout.linhafeed, 
            new String[] { KEY_TITLE, KEY_DESC, KEY_PUBDATE, KEY_LINK },
            new int[] { R.id.title, R.id.desc, R.id.pub, R.id.link });

    setListAdapter(adapter);

    ListView lv = getListView();

    //Opening Link onClick
    lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

            String link = ((TextView) view.findViewById(R.id.link)).getText().toString();
            System.out.println("Link: " + link);
            Intent in = new Intent(Intent.ACTION_VIEW);
            in.setData(Uri.parse(link));
            startActivity(in);
        }
    });

}

private static String getTagValue(String sTag, Element e) { 
    NodeList nlList = e.getElementsByTagName(sTag).item(0).getChildNodes();
    Node nValue = (Node) nlList.item(0);
    return nValue.getNodeValue();
}

public static int daysBetween(Date startDate, Date endDate) { 

    int daysBetween = 0;
    while (startDate.before(endDate)) {
        startDate.setTime(startDate.getTime() + 86400000);
        daysBetween++;
    }
    return daysBetween;

}
} 
```

和 XMLParser.java：

```
public class XMLParser {

// constructor
public XMLParser() {

}

/**
 * Getting XML from URL making HTTP request
 * @param url string
 * */
public String getXmlFromUrl(String url) {
    String xml = null;

    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        xml = EntityUtils.toString(httpEntity);

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    // return XML
    return xml;
}

/**
 * Getting XML DOM element
 * @param XML string
 * */
public Document getDomElement(String xml){
    Document doc = null;
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    try {

        DocumentBuilder db = dbf.newDocumentBuilder();

        InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            doc = db.parse(is); 

        } catch (ParserConfigurationException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (SAXException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (IOException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        }

        return doc;
}

/** Getting node value
  * @param elem element
  */
 public final String getElementValue( Node elem ) {

     if( elem != null){
         return elem.getTextContent();
             }

     return "";
 }

 /**
  * Getting node value
  * @param Element node
  * @param key string
  * */
 public String getValue(Element item, String str) {     
        NodeList n = item.getElementsByTagName(str);        
        return this.getElementValue(n.item(0));
    }
} 
```

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:55:42.133

简单地说，您应该将进行连接的部分放在 中，`doInBackground`将修改 ui 的部分放在`onPostExecute`..

示例（需要仔细检查）：

```
private class DownloadFilesTask extends AsyncTask<URL, Integer, Long> {

  private Context context;

 public DownloadFilesTask(Context context) {
    this.context = context;
 }

 protected void onPreExecute() {
         progressDialog = ProgressDialog.show(context, "", "msg", true); 
 }
 protected Long doInBackground(URL... urls) {
     XMLParser parser = new XMLParser(); 
String xml = parser.getXmlFromUrl(URL);
Document doc = parser.getDomElement(xml); 

NodeList nl = doc.getElementsByTagName(KEY_ITEM);

String data[] = new String[nl.getLength()];

for (int i = 0; i < nl.getLength(); i++) {

    HashMap<String, Spanned> map = new HashMap<String, Spanned>();
    Element e = (Element) nl.item(i);

    //Date Conversion
    data[i] = getTagValue("pubDate", e);
    SimpleDateFormat sdf = new SimpleDateFormat("EE, dd MMM yyyy HH:mm:ss z", Locale.UK);
    Date date = null;

    try {
        date = sdf.parse(data[i]); 
        String timeOfDay = new SimpleDateFormat("HH:mm").format(date); 
        java.sql.Timestamp timeStampDate = new Timestamp(date.getTime());
        java.sql.Timestamp timeStampNow = new Timestamp((new java.util.Date()).getTime()); 

        long secondDiff = timeStampNow.getTime() / 1000 - timeStampDate.getTime() / 1000;
        int minuteDiff = (int) (secondDiff / 60);
        int hourDiff = (int) (secondDiff / 3600);
        int dayDiff = daysBetween(date, new Date()); 
        if (dayDiff > 0) {
            System.out.println("Há " + dayDiff + " dia(s), às " + timeOfDay); 
            data[i] = ("Há " + dayDiff + " dia(s), às " + timeOfDay);

        } else if (hourDiff > 0) {
            System.out.println("Há " + hourDiff + " hora(s), às " + timeOfDay);
            data[i] = ("Há " + hourDiff + " hora(s), às " + timeOfDay);

        } else if (minuteDiff > 0) {
            System.out.println("Há " + minuteDiff + " minuto(s), às " + timeOfDay);
            data[i] = ("Há " + minuteDiff + " minuto(s), às " + timeOfDay);

        } else if (secondDiff > 0) {
            System.out.println("Há " + secondDiff + " segundo(s), às " + timeOfDay);
            data[i] = ("Há " + secondDiff + " segundo(s), às " + timeOfDay);

        }
    } catch (ParseException e1) {
        e1.printStackTrace();
    } catch (java.text.ParseException e1) {
        e1.printStackTrace();
    }

    //Html.fromHtml to get <CDATA> Description          
    map.put(KEY_TITLE, Html.fromHtml(parser.getValue(e, KEY_TITLE)));
    map.put(KEY_DESC, Html.fromHtml(parser.getValue(e, KEY_DESC)));
    map.put(KEY_PUBDATE, Html.fromHtml(data[i]));
    map.put(KEY_LINK, Html.fromHtml(parser.getValue(e, KEY_LINK)));

    menuItems.add(map);

} //endFOR
 }

 protected void onPostExecute(Long result) {
     progressDialog.dismiss();  

     //Using ListAdapter is enough for this, no need for Custom Adapter
ListAdapter adapter = new SimpleAdapter(this, menuItems, R.layout.linhafeed, 
        new String[] { KEY_TITLE, KEY_DESC, KEY_PUBDATE, KEY_LINK },
        new int[] { R.id.title, R.id.desc, R.id.pub, R.id.link });

setListAdapter(adapter);
 }
} 
```

创建时：

```
public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.activity_noticias);

ArrayList<HashMap<String, Spanned>> menuItems = new ArrayList<HashMap<String, Spanned>>
();
   new DownloadFilesTask(this).execute();
} 
```

# xml - Magento XML 通讯问题

> ID：13818674
> 
> 赞同：1
> 
> 时间：2012-12-11T10:49:21.927
> 
> 标签：xml, magento, newsletter

我正在尝试将 xml 通讯块添加到页面上。因为模板设置为将块放在主页上，所以我创建了一个 cms 页面并更改了以下代码：

```
<reference name="left">
    <block type="newsletter/subscribe" name="left.newsletter"  template="newsletter/subscribe.phtml"/>
</reference> 
```

至：

```
<reference name="content">
    <block type="newsletter/subscribe" name="home.newsletter" template="newsletter/subscribe.phtml"/>
</reference> 
```

我检查了 Magento 中的设置，并且启用了时事通讯模块，但仍然没有出现在页面上。有谁知道这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T04:59:33.707

```
<reference name="content">
    <block type="newsletter/subscribe" name="home.newsletter" template="newsletter/subscribe.phtml"/> </reference> 
```

至

```
<reference name="root">
    <block type="newsletter/subscribe" name="home.newsletter" as="home.newsletter" template="newsletter/subscribe.phtml"/>
</reference> 
```

并在您的 cms 页面调用时事通讯

```
<?php echo $this->getChildHtml('home.newsletter') ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:57:44.683

**第 1 步：** 您创建一个 cms/block 并放置以下代码

```
{{block type="newsletter/subscribe" template="newsletter/subscribe.phtml"}} 
```

**第 2 步：**在这样的任何页面中调用该 cms/block。将以下代码放在您想要的模板文件中。

```
<?php echo $this->getLayout()->createBlock('cms/block')->setBlockId('YOUR IDENTIFIER')->toHtml() ?> 
```

# ios - 休息、核心数据和服务器端过滤

> ID：13818675
> 
> 赞同：1
> 
> 时间：2012-12-11T10:49:22.820
> 
> 标签：ios, core-data, restkit

我正在 iOS 上开发一个使用（大部分）RESTful 服务的应用程序。我应该使用不同的过滤器显示这些帖子，这些过滤器应用于服务器端：

*   [http://foo.com/posts?filter=recent](http://foo.com/posts?filter=recent)
*   [http://foo.com/posts?filter=popular](http://foo.com/posts?filter=popular)
*   [http://foo.com/posts?filter=special](http://foo.com/posts?filter=special)
*   ...

我正在考虑使用 Restkit (0.20) 来正确完成所有这些工作，使用 coredata 模块进行缓存，并且我正在运行一些 poc。

我的问题是，如何在本地使用相同的过滤器查询核心数据以取回我的实体？我可以添加一个特殊字段来“标记”帖子，然后对其进行过滤，但我不知道如何使用 RestKit 做到这一点。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:08:31.653

我找到了一个解决方案：

*   我已经向我的实体添加了一些属性
*   我将 RKManagedObjectRequestOperation 子类化以填充这些属性
*   我将 RKObjectManager 子类化以返回我的自定义 RKManagedObjectRequestOperation。

更多细节在[官方 Restkit 谷歌组](https://groups.google.com/forum/?fromgroups=#!topic/restkit/iDAUqKl55Ys)

干杯

# c# - 为工厂模式使用创建多个实体框架 EDMX 文件

> ID：13818676
> 
> 赞同：2
> 
> 时间：2012-12-11T10:49:26.110
> 
> 标签：c#, entity-framework, entity-framework-5

人们正在使用 Entity 框架做一些聪明的事情，但我认为我正在做一些非常简单的事情，而且似乎无法让它继续下去。

我有两个独立的数据库。数据库 A 和数据库 B。

我需要分别为这些数据库创建上下文，所以我想要一个工厂模式来为我实例化任一上下文。我正在尝试使用数据库优先方法。

我通过 Nuget 包管理器引用了实体框架，并使用 Visual Studio 创建了一个新项目。唯一可以选择的带有 EDMX 扩展的项目是“ADO.NET 实体数据模型”，所以我选择了数据库 A。

EDMX 文件已生成，我可以看到我的实体。当以编程方式访问它们时，实体已被转储到默认命名空间中。这意味着我可以通过转到 my.namespace.datasource.TableA 来获得实体的智能感知。

如果我现在在同一个区域创建另一个 EDMX 文件，相同的实体将被转储到同一个地方，我会遇到冲突。

我得到的错误示例是：

“‘my.namespace.datasource.Entities’类型已经包含‘TableA’的定义”

为什么是这样？为什么不为实体将驻留在其中的 EDMX 文件创建默认命名空间？如何让多个 EDMX 文件协调工作并在需要时提供单独的上下文？

任何帮助表示赞赏！

干杯，

卡尔。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T10:58:50.960

*   选项 1\. 在解决方案资源管理器中选择模型项目项目，转到项目属性，将属性“自定义工具命名空间”设置为首选值。您生成的代码将放在您设置的命名空间中。
*   选项 2\. 创建两个单独的文件夹并将一个模型放入第一个文件夹，并将一个模型放入第二个文件夹。
*   选项 3\. 将您的模型放入单独的项目中。

**注意**。如果您使用 VS2010 和任何 T4 生成器（例如，DbContext 生成器），您应该：

*   通过清除 EDMX 项目项的“自定义工具”属性来关闭默认代码生成；
*   `Model1.tt`为 T4 项目项（例如和`Model1.Context.tt`）设置“自定义工具命名空间” 。

# php - 使用数组数据填充页面

> ID：13818688
> 
> 赞同：2
> 
> 时间：2012-12-11T10:50:42.317
> 
> 标签：php, forms

我会尽量简明扼要。

我有一个 PHP 表单页面，它使用数组中的数据（杂志名称）填充一个下拉框，然后，如果发布，将其输出到另一个页面。

但是，我在表单中有第二个数组（包含订阅链接），我还需要将其发送到输出页面，具体取决于从下拉框中选择的内容。如果这是有道理的。

例如，如果`$arrayOne[7]`从下拉框中选择了 for 的值，我还需要自动将 over 的值 post_GET`$arrayTwo[7]`到输出页面。

任何人都可以帮忙吗？

**默认.php**：

```
$arrayOne[0] = "magazineA";
$arrayOne[1] = "magazineB";
etc...

$arrayTwo[0] = "subscriptionLinkA";
$arrayTwo[1] = "subscriptionLinkB";
etc...

<form action="index2.php" method="get">
<?php

echo '<select name="publication">';
foreach ($magazine as $publication)
{
    echo '<option name="publication" value="' . $publication . '">' . $publication . '</option>';
}
echo '</select>';

?>
<input type="submit">
</form> 
```

**index2.php**：

```
<p>
If you have subscribed to <?php echo $_GET["publication"]; ?>,
you will receive your hard-copy in due course. If you are not a current subscriber,
<a href="#">click here</a> to subscribe.
</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:06:04.937

由于 from 的值`$array2`完全取决于 的值`$array1`，`$_GET['a1']`因此可以作为对其他值的查找。即你根本不必通过`$a2`。

在 index2.php 上，你会有这样的东西：

```
$arr2= array( 'magazineA' => 'subscriptionLinkA',
              'magazineB' => 'subscriptionLinkB');

$pub= $_GET['a1']; //you'd want to sanitize this value of course
$link= $arr2[$pub];

echo  <<< EOT
<p>
If you have subscribed to $pub
you will receive your hard-copy in due course. If you are not a current subscriber,
<a href="$link">click here</a> to subscribe.
</p>
EOT; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:40:36.690

## 方法一

`<input type="hidden"...`您可以使用 Javascript 使用字段的选定选项填充隐藏的输入字段 ( )，此时`<select>`字段中的下拉选择`<select>`已更改。

**default.php**的一些代码：

```
<form action="index2.php" method="get">
<?php

echo '<select id="pubfield" name="publication">';
foreach ($magazine as $publication) {
    echo '<option name="publication" value="'.$publication.'">'.$publication.'</option>';
}
echo '</select>';

?>
    <input type="submit" value="SEND!">
    <input type="hidden" id="hid" name="arr2" value="" />

    <script type="text/javascript">

        // Using jQuery, include the js file with jQuery.
        $('select#pubfield').change(function() {
            var value = $("select#pubfield option:selected").text(); // Get the selected option from the select field.
            $('input#hid').value(value);
        });
        $('select#pubfield').change();

    </script>
</form> 
```

[JSFiddle](http://jsfiddle.net/MCEmperor/z8Gp3/11/)。_

**注意**：由于 Javascript 是客户端，我建议你不要相信 HTML 表单发送的值。始终对其执行服务器端检查。

# 更新：

## 方法二

您还可以将索引值设置为`<option value="">`并将它们与表单一起发送。

```
$magazines = array(
    "magazineA", // will be index 0
    "magazineB", // will be index 1
    ...
);
...
foreach ($i = 0; $i < count($magazines); $i++) {
    echo '<option value="'.$i. '">'.$magazines[$i].'</option>';
    // The 'value' attribute of the selected option will be posted.
}
... 
```

然后你甚至不需要隐藏的输入字段，而是将索引传递给`$_POST`变量。
例如，如果选择了“magazineB”，则值`1`将传递给`$_POST['publication']`。

# git - git pull 仅适用于 master 分支

> ID：13818689
> 
> 赞同：3
> 
> 时间：2012-12-11T10:50:42.680
> 
> 标签：git, git-branch, git-pull, gitorious

从 git 服务器 LAN 内的计算机中从任何存储库中提取任何分支都可以工作。
但是，在任何远程计算机上（与 git 服务器不在同一 LAN 上），从任何存储库中拉出 master 都可以，但**拉出任何其他分支会挂起**。

环境：
-Git 服务器在 ubuntu 上运行非常糟糕
-我正在使用 msysgit 和命令行或 tortoisegit 从 Windows 中提取
-使用的 url 格式为：`ssh://git@[my.domain]/[proj]/[repo.git]`

我知道[gitorious 不支持分支特定权限](https://stackoverflow.com/questions/9925173/gitorious-branch-permissions)。此外，在 LAN 内所有分支机构的工作都必须表明某些事情......这可能是什么？！

**更新：**
我怀疑我要拉的分支不存在，所以我尝试推它。结果如下：

```
git.exe push --progress  "origin" other_branch

To ssh://git@my.domain/proj/repo.git
! [rejected]        other_branch -> other_branch (non-fast-forward)
error: failed to push some refs to 'ssh://git@my.domain/proj/repo.git'
hint: Updates were rejected because the tip of your current branch is behind
hint: its remote counterpart. Merge the remote changes (e.g. 'git pull')
hint: before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details. 
```

有趣的是不挂...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:39:46.627

首先检查分支是否存在于 gitorious webview 或服务器的文件系统中。

如果存在，请 `$git pull --rebase origin other_branch`尝试 `$git push origin other_branch`

# matlab - 评估然后将矩阵的行提取到新矩阵中

> ID：13818692
> 
> 赞同：2
> 
> 时间：2012-12-11T10:51:07.003
> 
> 标签：matlab

我在 MATLAB 中找不到如何执行以下操作，不胜感激：

*   我有一个维度为 (mxn) 的矩阵 X，我想找出哪些行的第一个元素大于同一行的其余元素。然后将满足这一点的行放入一个新的矩阵 Y 中。

示例：如果 X 是

```
2  0  1
3  8  6
7  2  5 
```

Y 将是

```
2  0  1
7  2  5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:11:06.243

[`max`](http://www.mathworks.com/help/matlab/ref/max.html)函数适用于这样的矩阵：

> 如果 A 是矩阵，则 max(A) 将 A 的列视为向量，返回包含每列中最大元素的行向量。

这意味着您将需要使用 x 的转置。

```
x = [2 0 1;
     3 8 6; 
     7 2 5];
xt = x';
[maxVal, maxIdx] = max(xt); 
```

现在，如果您的`maxIdx`值为 1，则表示第一个值最大。

```
y = x(maxIdx == 1, :); 
```

会给你你的新矩阵。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T11:12:00.517

您正在寻找`bsxfun`和`all`：

```
X = [
    2  0  1
    3  8  6
    7  2  5];

Y = X( all(bsxfun(@gt, X(:,1), X(:,2:end)),2), :) 
```

# php - preg_match_all 问题

> ID：13818694
> 
> 赞同：-1
> 
> 时间：2012-12-11T10:51:08.533
> 
> 标签：php, html, preg-match-all

我正在与这个小的 php 问题作斗争，我正在尝试从页面中读取 url 部分。

php代码是这样的：

```
preg_match_all('!<a href="Jobbörse-reader\/items\/(.*?)" title=".+">(.*?)</a>!',$content,$ergebnisse); 
```

我的问题是`preg_match_all()`返回 0，如果我`var_dump`是`$ergebnisse`，我会得到这样的空数组：

```
array(3) { [0]=> array(0) { } [1]=> array(0) { } [2]=> array(0) { } } 
```

我正在阅读的页面代码是这样的：

```
<a href="Jobbörse-reader/items/somelink.html" title="some text">NAME</a> 
```

我需要 somelink.html 和 NAME，但很明显，它不能匹配它们，有人可以帮我吗？

顺便说一句：我正在成功阅读内容。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:59:46.173

工作得很好：

```
 <?php $content='<a href="Jobbörse-reader/items/somelink1.html" title="some text1">NAME1</a>

    <a href="Jobbörse-reader/items/somelink2.html" title="some text2">NAME2</a>

    <a href="Jobbörse-reader/items/somelink3.html" title="some text3">NAME3</a>';

    preg_match_all('!<a href="Jobbörse-reader\/items\/(.*?)" title=".+">(.*?)</a>!',$content,$ergebnisse);

    print_r($ergebnisse); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T11:01:00.600

我已经测试了你的代码

```
<?php
$content='<body>
<a href="Jobbörse-reader/items/somelink.html" title="some text">NAME</a>
</body>';
echo preg_match_all('!<a href="Jobbörse-reader\/items\/(.*?)" title=".+">(.*?)</a>!',$content,$ergebnisse);
echo "\n";
var_dump($ergebnisse); 
```

它完全有效：

```
$ php test.php 
1
array(3) {
  [0]=>
  array(1) {
    [0]=>
    string(73) "<a href="Jobbörse-reader/items/somelink.html" title="some text">NAME</a>"
  }
  [1]=>
  array(1) {
    [0]=>
    string(13) "somelink.html"
  }
  [2]=>
  array(1) {
    [0]=>
    string(4) "NAME"
  }
} 
```

# c# - 字符串转换为日期时间

> ID：13818697
> 
> 赞同：4
> 
> 时间：2012-12-11T10:51:16.800
> 
> 标签：c#, string, datetime

是否可以将以下日期字符串转换为`DateTime`对象？

> ```
> "Friday 31 August 2012";
> "26-Jul-2012"
> "190811" 
> ```

我尝试过这种形式：

```
DateTime.TryParse("Friday 31 August 2012"
                , CultureInfo.InvariantCulture.NumberFormat
                , DateTimeStyles.None
                , out tradeDate); 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T10:53:42.823

> 是否可以在正确的日期时间转换此字符串？“2012 年 8 月 31 日星期五”；“2012 年 7 月 26 日” “190811”

是的，当您以特定格式解析日期时，您应该使用[DateTime.TryParseExact](http://msdn.microsoft.com/en-us/library/system.datetime.tryparseexact.aspx)。`DateTime.TryParse`将在内部调用[DateTime.Parse](http://msdn.microsoft.com/en-us/library/1k1skd40.aspx)，它只会尝试使用一些预定义的格式来解析日期。从文档：

> DateTime.Parse(String) 方法尝试将日期和时间值的字符串表示形式转换为其等效的 DateTime。要解析的字符串可以采用以下任何一种形式：
> 
> *   带有日期和时间组件的字符串。
>     
>     
> *   带有日期但没有时间组件的字符串。
>     
>     
> *   带有时间但没有日期组件的字符串。
>     
>     
> *   包含时区信息并符合 ISO 8601 的字符串。例如，以下两个字符串中的第一个指定协调世界时 (UTC)；第二个指定比 UTC 早 7 小时的时区时间：
>     
>     
>     
>     `2008-11-01T19:35:00.0000000Z`
>     
>     
>     
>     `2008-11-01T19:35:00.0000000-07:00`
>     
>     
> *   包含 GMT 指示符并符合 RFC 1123 时间格式的字符串。例如：
>     
>     
>     
>     `Sat, 01 Nov 2008 19:35:00 GMT`
>     
>     
> *   包含日期和时间以及时区偏移信息的字符串。例如：
>     
>     
>     
>     `03/01/2009 05:42:00 -5:00`

重要的是要注意，当您不提供这些方法时，它会从当前线程中获取任何类型的文化信息，如果您没有明确设置，则往往是您机器的文化信息。因此，如果您尝试解析的日期属于该特定文化，那么它们通常会解析正常，例如两者`"Friday 31 August 2012"`/`"26-Jul-2012"`解析都`TryParse`适用于我，因为我的默认文化是 en-GB，但是，`"190811"`失败（我想适用于所有文化）因为它不是系统识别的日期格式。因此为什么`TryParseExact`更可靠。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T10:59:51.270

当您知道格式时，您应该使用`ParseExact`格式`DateTime`

因此，要解析“2012 年 8 月 31 日星期五”，请使用

```
DateTime tradeDate =
DateTime.ParseExact("Friday 31 August 2012", "dddd dd MMMM yyyy", CultureInfo.InvariantCulture); 
```

该格式还具有数组重载，因此您可以指定多个来代替`"dddd dd MMMM yyyy"`您的解析需求。

[相似的东西](https://stackoverflow.com/a/11686460/570150)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T10:59:57.617

您可以使用[`DateTime.TryParseExact`](http://msdn.microsoft.com/en-us/library/vstudio/w2sa9yss.aspx)正确的格式：

```
string[] dateStrings = new[] { "Friday 31 August 2012", "26-Jul-2012", "190811"};
DateTime date = DateTime.MinValue;
string[] formats = new[] { "dddd dd MMMM yyyy", "dd-MMM-yyyy", "ddMMyy" };
IEnumerable<DateTime> dates = dateStrings
    .Where(ds => DateTime.TryParseExact(ds
        , formats
        , CultureInfo.InvariantCulture
        , DateTimeStyles.None
        , out date))
    .Select(ds => date); 
```

[**自定义日期和时间格式字符串**](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

[**使用您的示例数据进行**演示****](http://ideone.com/oDBE7U)

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T10:58:56.163

使用`TryParseExact`并提供一组格式化字符串：

```
DateTime.TryParseExact("Friday 31 August 2012"
                , new string[] {"dddd dd MMMM yyyy", "dd-MMM-yyyy", "ddMMyy"}
                , CultureInfo.InvariantCulture.NumberFormat
                , DateTimeStyles.None
                , out tradeDate); 
```

我建议阅读 MSDN 上的[自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)。**

# java - MySQL 导入现有数据库

> ID：13818698
> 
> 赞同：1
> 
> 时间：2012-12-11T10:51:20.357
> 
> 标签：java, mysql, import, append

目前我正在将数据库转储文件导入`sample.sql`应用程序。我需要导入数据库并附加到现有表，因为数据库包含相同的表和字段。

我该如何解决这个问题？将导入的数据库附加到现有数据库的命令是什么？

**导入文件的代码**

```
try {

    String[] command = new String[]{"\""+this.m_MySqlPath+"mysql\"", Constants.DB_NAME, "-u" + Constants.DB_USER, "-p" + Constants.DB_PASSWORD, "-e", " source "+"\""+FileName+"\"" };
    Process runtimeProcess = Runtime.getRuntime().exec(command, null, new File(this.m_MySqlPath));
    int processComplete = runtimeProcess.waitFor();

    if (processComplete == 0)
    {
        System.out.println("DatabaseManager.restore: Restore Successfull");
    }
    else 
    {
        System.out.println("DatabaseManager.restore: Restore Failure!");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:19:23.030

假设您的脚本是“myscript.sql”并且它存储在“c:\”中，那么可以使用以下命令将该脚本导入到您的数据库中

```
c:\Program Files\MySQL\MySQL Server 5.1\bin\mysql.exe --host=127.0.0.1 --user=root --password=root < c:/myscript.sql 
```

相同的命令可用于`Runtime.getRuntime().exec`. 但是当我尝试时有一些简单的问题并且它无法正常工作。所以我使用了另一种方法。

在此之前，我假设您的数据库脚本包含的数据多于数据库中的数据。因此，即使我删除数据库然后使用数据库脚本导入数据库，我也不会丢失任何数据。我只是从您的数据库脚本文件中删除（删除）当前数据库并导入数据库。

为了解决上述问题`Runtime.getRuntime().exec`，我创建了一个名为“ba.bat”的批处理文件。并将该批处理文件作为“c:\bat.bat”存储在 c: 驱动器中。该批处理文件的内容如下

```
%1\mysql.exe --host=%2 --user=%3 --password=%4 < c:/myscript.sql
exit 
```

您可以使用以下语法调用`ba.bat arg1 arg2 arg3 arg4`

其中 arg1=mysql bin 文件夹的路径示例 =c:\Program Files\MySQL\MySQL Server 5.1\bin arg2=mysql 主机 IP 地址 arg3=mysql 用户名 arg4=mysql 密码

下面给出了最终的java程序

```
import java.sql.*;

public class NewClass {

    public static void main(String[] args) {
        Connection conn = null;
      String mysqlPath="c:/Program Files/MySQL/MySQL Server 5.1/bin";
        String url = "jdbc:mysql://192.168.100.86/";
        String databaseIp="192.168.100.86";
        String dbName = "databasename";
        java.sql.Statement stmt = null;
        String query = "";
        ResultSet result = null;
        String driver = "com.mysql.jdbc.Driver";
        String userName = "root";
        String password = "root";
        try {
            Class.forName(driver).newInstance();            
            conn = DriverManager.getConnection(url , userName, password);
            stmt = conn.createStatement();
            result = null;
            String test,input;
            stmt.execute("drop database if exists  "+dbName);
            String fullPathWithArgs ="C:/ba.bat \""+mysqlPath+"\" "+databaseIp+" "+userName+" "+password+"";
            Process runtimeProcess =Runtime.getRuntime().exec(fullPathWithArgs);
            int processComplete = runtimeProcess.waitFor();
            if (processComplete == 0)
                      {
                           System.out.println("DatabaseManager.restore: Restore Successfull");
                      }
            else
                  {
                     System.out.println("DatabaseManager.restore: Restore Failure!");
                  }

            conn.close();
        } catch (Exception e) {           
            System.out.println("exception: " + e.getMessage());
        }
    }
} 
```

在上面的 java 程序中，我正在删除数据库并从脚本中导入数据库。你必须`CREATE DATABASE IF NOT EXISTS`在你的脚本中使用。从你的问题来看，我觉得这就是你想要的。如果有任何问题或以上不是您预期的答案，请告诉我。

如果您想将数据附加到现有数据库，还有一件事请删除

```
stmt.execute("drop database if exists  "+dbName); 
```

来自java代码，并将数据库表中的所需列设置为“唯一”，即..为所需的表列创建唯一索引

# gcc - -shared 和 -bundle gcc 标志有什么区别

> ID：13818699
> 
> 赞同：4
> 
> 时间：2012-12-11T10:51:22.063
> 
> 标签：gcc, compiler-construction, darwin

我有一个名为 abc 的小型 C 程序，它在内部使用 dlopen 来动态加载和运行共享库 libabc。libabc 声明了一个在运行时动态加载和调用的函数 greeting。当我使用以下两种方法编译和运行时，结果是一样的。创建共享对象 (.so) C 库时，GCC 编译器上的 -shared 和 -bundle 标志有什么区别？

## 方法一

```
cc -c libabc.c -o libabc.o
cc **-shared** -o libabc.so libabc.o
cc -Wall -g abc.c -ldl -o abc
./abc ./libabc.so greeting "Hello World" 
```

## 方法二

```
cc -c libabc.c -o libabc.o
cc **-bundle** -o libabc.so libabc.o
cc -Wall -g abc.c -ldl -o abc
./abc ./libabc.so greeting "Hello World" 
```

使用达尔文 gcc 4.2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T13:16:44.337

如果你不使用`-bundle`，生成的共享对象在你 dlopen() 之后不能再用 dlclose() 卸载；它将在整个过程的生命周期中保留在内存中。`-bundle`生成 MH_BUNDLE 类型的文件。

顺便说一句，捆绑包的推荐（但不是强制性）扩展名是`.bundle`，而不是`.so`.

# android - 如何在android中按纬度和经度对Arraylisthashmap进行排序

> ID：13818700
> 
> 赞同：0
> 
> 时间：2012-12-11T10:51:20.840
> 
> 标签：android, json, sorting, android-asynctask, latitude-longitude

我正在使用 json 解析获取航班数组列表，现在我想按纬度和经度对这个数组列表进行排序，但是我该如何排序我知道简单的列表排序，但不知道数组列表

> 主页 Activity.java

```
@override
public class HomeActivity extends  Activity
{
    public void oncreate { 

     new FlightListBack.execute();

}

public class FlightListBack extends AsyncTask<String,ArrayList< HashMap<String,String>>, ArrayList<HashMap<String,String>>> 
{
    @Override
    protected ArrayList<HashMap<String,String>> doInBackground(
            String... params) {
    try
        {
        String spinnerstringfunction=jparser.getJSONFromUrl(airporturl);
        Log.e("SpinnerStringFunction","Count"+spinnerstringfunction);

        JSONObject jobject= new JSONObject(spinnerstringfunction); 

        // Airlines Array For Getting Airlines Name
        sjairport=jobject.getJSONArray(TAG_SAIRPORT);

        Log.e("Aysn sjairport","sss"+sjairport);
        for(int a=0;a<sjairport.length();a++)
        {

            HashMap<String, String> spinnermap = new HashMap<String, String>();
            String spinnerfs=sjairport.getJSONObject(a).get(TAG_SPINNERFS).toString(); 
            String spinnername=sjairport.getJSONObject(a).get(TAG_SPINNERNAME).toString();
            String  spinnercity=sjairport.getJSONObject(a).get(TAG_SPINNERCITY).toString();
            String slatitude=sjairport.getJSONObject(a).get(TAG_SPINNERLATITUDE).toString();
            String slongitude=sjairport.getJSONObject(a).get(TAG_SPINNERLONGITUDE).toString();

            spinnermap.put(TAG_SPINNERFS, spinnerfs);
            spinnermap.put(TAG_SPINNERNAME,spinnername);
            spinnermap.put(TAG_SPINNERCITY,spinnercity);
            spinnermap.put(TAG_SPINNERLATITUDE,slatitude);
            spinnermap.put(TAG_SPINNERLONGITUDE, slongitude);

            spinnerAirportList.add(spinnermap);  

        }

        Log.e("Spinner Airport List","spinner"+spinnerAirportList);

    }
    catch (Exception e)
    {
            e.printStackTrace();
    }

    return spinnerAirportList;

}
protected void onPostExecute(final ArrayList<HashMap<String, String>> result )
{
          other code for display listview

}
} 
```

# objective-c - 如何比较从 url 到 NSutf8stringencoding 的字符串返回 1 或 0 与普通字符串 @"1"

> ID：13818701
> 
> 赞同：2
> 
> 时间：2012-12-11T10:51:24.117
> 
> 标签：objective-c, xcode4.3

我需要比较来自 url 的字符串`NSutf8stringencoding`，以便返回 1 或 0，但即使字符串的值为 1，它也总是返回 0。

```
NSString *strURL = [NSString stringWithFormat:@"http://localhost/signup/login.php?username=%@&password=%@",username.text,password.text];

// to execute php code
NSData *dataURL = [NSData dataWithContentsOfURL:[NSURL URLWithString:strURL]];

// to receive the returend value
NSString *strResult = [[NSString alloc] initWithData:dataURL 
encoding:NSUTF8StringEncoding];

// print the data in strResult
NSLog(@"%@",strResult);

if ([strResult isEqualToString:@"1"])
{
    // I need to get the control for main navigation controller 
    login2ViewController *controller = [[login2ViewController alloc] initWithNibName:@"login2ViewController" bundle:nil];
    controller.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
    [self presentModalViewController:controller animated:YES ];

}else
{
    // invalid information
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"alert" message:@"Invalid Information" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
    [alert show];
    return;  
} 
```

但它总是显示无效的信息，即使里面的内容`strResult`是`1`。我打印了那个值`NSlog`。输出`NSLog`：

```
2012-12-11 16:06:08.156 friend finder[277:11603] 
1 
```

如何将该字符串与 进行比较`@"1"`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:06:28.993

尝试以下操作 - strResult 中可能有额外的空白字符（如回车）：

```
if ([strResult rangeOfString:@"1"].length > 0) {
    // Do something...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:08:05.177

字符串中可能还有其他字符。

采用

```
[strResult stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]]; 
```

# python - 使用 Pyramid、traversal 和 PyMongo 更改模板

> ID：13818705
> 
> 赞同：2
> 
> 时间：2012-12-11T10:51:33.023
> 
> 标签：python, themes, pyramid, traversal, template-engine

如果我想实现类似 WordPress 模板主题引擎的东西，我应该如何使用 Pyramid、遍历和使用 MongoDB 作为数据库来实现。

我试过在[Extending An Existing Pyramid Application](http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/extending.html)上查找它，但它根本没有任何意义......

* * *

基本上，在管理控制面板中，当所有者转到 时`www.mydomain.com/admin/template`，页面将显示位于 /static/themes/ 中的所有主题文件夹。

当管理员选择主题“mybluetheme”时，主题将存储在 MongoDB 中。因此，当我在 中查看它时`www.mydomain.com/`，它将使用“mybluetheme”显示主题。如果明天，管理员选择“mygreentheme”，该站点将呈现“mygreentheme”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T21:28:54.070

对 wordpress 模板主题引擎一无所知，我想向您展示如何根据某些条件交换基本模板：

```
from pyramid.renderers import get_renderer
from pyramid.security import authenticated_userid

class Theme(object):

    def __init__(self, context, request):
        self.context = context
        self.request = request

    @property
    def layout(self):
        if utils.likes_blue_color(authenticated_userid(self.request)):
            template_name = 'templates/blue_layout.pt'
        else:
            template_name = 'templates/green_layout.pt'
        return get_renderer(template_name).implementation()

@view_config(...)
def index(context, request):

    theme = Theme(context, request)

    return { 'context':context,
             'request': request,
             'theme':theme,
           } 
```

布局模板看起来像

```
<html ...
     metal:define-macro="master">
....
<metal:sidebar define-slot="sidebar">...</metal:sidebar>
<metal:body define-slot="main">...</metal:body>
</html> 
```

其余模板将按如下方式使用：

```
<html ...
    metal:use-macro="theme.layout.macros['master']">

<metal:main fill-slot="main">
    Hi there!
</metal:main>
</html> 
```

使用这种方法，您将能够根据某些参数（请求中的值、cookie、数据库中的用户设置等）交换基本模板

使用 Jinja2 模板，方法类似——您在视图函数中确定所需的*基本*模板，并将对基本模板对象*的引用或基本模板**的文件名*传递给您的函数。从[Jinja2 文档](http://jinja.pocoo.org/docs/templates/#template-inheritance)看来，`{% extends my_base_template_passed_from_the_view_function %}`语法可能有效。否则，您可能需要指定自定义模板加载器以根据某些条件加载不同的模板。

# java - PdfBox: PDFMergerUtility 如何重用对象？

> ID：13818706
> 
> 赞同：0
> 
> 时间：2012-12-11T10:51:34.483
> 
> 标签：java, pdfbox

```
/*PDFMergerUtility mergerUtility = new PDFMergerUtility();*/

 while(rs.next())
    {

        PDFMergerUtility mergerUtility = new PDFMergerUtility();

        try
           {
            in=resultset.getBinaryStream(1);
            mergerUtility.addSource(in);
            mergerUtility.setDestinationStream(bos);
            mergerUtility.mergeDocuments();

           }

    catch (Exception e) 
       { 

       }
        bos.reset();
       /*How to reset/clear mergeutility object?*/
   } 
```

如果不实例化，PDFMergerUtility mergeUtility = new PDFMergerUtility(); 在while循环内，给出文件结束错误..如何在不声明while循环的情况下重用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T20:27:22.143

在您的代码中，您没有合并。要修复，代码将是这样的

```
 PDFMergerUtility mergerUtility = new PDFMergerUtility();
    try  {
        while(rs.next())    {      
            in=resultset.getBinaryStream(1);
            mergerUtility.addSource(in);

        }       
        mergerUtility.setDestinationStream(bos);
        mergerUtility.mergeDocuments();

        bos.close();

   }
   catch (Exception e) { 

   } 
```

# java - 如何模拟 JdbcTemplate.queryForObject() 方法

> ID：13818712
> 
> 赞同：6
> 
> 时间：2012-12-11T10:51:47.990
> 
> 标签：java, mockito, jmock, jmockit, springmockito

我的方法如下所示：

```
public class Decompile extends JdbcDaoSupport
public void getRunner(){
String val = this.getJdbcTemplate().queryForObject(sql,String.class, new Object[]{1001});
}
} 
```

请建议我将如何嘲笑这一点。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-11T12:20:46.700

```
@Mock
JdbcTemplate jdbctemplate;

@Test
public void testRun(){
when(jdbctemplate.queryForObject(anyString(),eq(String.class),anyObject()).thenReturn("data");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T12:19:22.513

EasyMock-3.0 示例

```
 String sql = "select * from t1";
    Object[] params = new Object[] { 1001 };
    JdbcTemplate t = EasyMock.createMock(JdbcTemplate.class);
    EasyMock.expect(
            t.queryForObject(sql, String.class, params)).andReturn("res");
    EasyMock.replay(t); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T15:59:31.010

使用JMockit，代码会是这样的：

```
@Mocked
JdbcTemplate jdbcTemplate

new Expectations() {
    jdbcTemplate.queryForObject(sql,String.class, new Object[]{1001});
    result = "result you want";
} 
```

关于 JMockit 的更多信息在[这里](http://jmockit.googlecode.com/svn/trunk/www/tutorial/BehaviorBasedTesting.html)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-27T21:04:08.473

使用 Mockito，您还可以模拟 queryForObject(..) 方法，如下所示：

```
@Mock
JdbcTemplate jdbctemplate;

@Before
public void setUp() throws Exception {
    MockitoAnnotations.initMocks(this);
}

@Test
public void testRun(){
  when(jdbctemplate.queryForObject(eq("input string"), refEq(new Object[]{1001}), eq(String.class))).thenReturn("data");
} 
```

一些额外的信息来源 - [http://sourcesnippets.blogspot.com/2013/06/jdbc-dao-unit-test-using-mockito.html](http://sourcesnippets.blogspot.com/2013/06/jdbc-dao-unit-test-using-mockito.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-22T10:01:49.900

以下是我在测试类似方法时使用的工作代码

```
import static org.junit.jupiter.api.Assertions.assertEquals;
import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.mockito.InjectMocks;
import org.mockito.Mock;
import org.mockito.Mockito;
import org.mockito.MockitoAnnotations;
import org.mockito.junit.MockitoJUnitRunner;
import org.springframework.jdbc.core.JdbcTemplate;

@RunWith(MockitoJUnitRunner.class)
public class DecompileTest {

    @Mock/* works fine with autowired dependency too */
    JdbcTemplate jdbcTemplate;

    @InjectMocks/* for the claa that we are mocking */
    Decompile testclass;

    @Before
    public void setUp() throws Exception {
        MockitoAnnotations.initMocks(this);
    }

    @Test
    public void testgetRunner() {
        Mockito.lenient().when(jdbcTemplate.queryForObject("select * from .. ",String.class, new Object[] { 1001 } )).thenReturn("resultval");
        testclass.getRunner();
    }

} 
```

mvn 包使用如下（兼容 spring 版本 > 2 /* 测试 */ ）

```
<dependency> 
    <groupId>org.springframework.boot</groupId> 
    <artifactId>spring-boot-test</artifactId> 
    <scope>test</scope> 
</dependency> 

<dependency>
    <groupId>org.springframework.boot</groupId> 
    <artifactId>spring-boot-starter-test</artifactId> 
    <scope>test</scope> 
</dependency> 
```

# android - 哪个android应用目录保存数据比较好，External Files目录还是External cache目录

> ID：13818714
> 
> 赞同：1
> 
> 时间：2012-12-11T10:51:51.713
> 
> 标签：android, save, xamarin.android

我想在我的 android 应用程序中保存一些文件作为保存的搜索或保存的项目（一些二进制文件和图像），而且我希望通过卸载应用程序这些文件也从用户设备中删除。我正在使用 monondroid 开发应用程序并且已经理解即在每个应用程序的外部目录中，有两个目录。一个名称为“缓存”，另一个名称为“文件”。问题是我应该在女巫目录中保存我的文件。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:58:48.677

我认为这取决于您的应用程序，您需要什么。[选中此处](http://developer.android.com/guide/topics/data/data-storage.html#filesExternal)，您将清楚在哪里使用外部文件目录和外部缓存目录。

当您卸载应用程序时，外部缓存目录的文件将被删除，而外部文件目录的文件不会受到影响。

# backbone.js - 为什么通过 Backbone 获取后出现“未定义”？

> ID：13818715
> 
> 赞同：0
> 
> 时间：2012-12-11T10:51:54.700
> 
> 标签：backbone.js

我做了一个简单的实验来理解模型上的 fetch 和集合上的 fetch。但是，此代码为两者都提供了“未定义”：

```
 // Model and Collection
    var SingleItem = Backbone.Model.extend({
      urlRoot : '/data/item.json',
      parse: function(response) {
          console.log(response);
          return response;
      }
    });

    var ManyCollection = Backbone.Collection.extend({
      model: SingleItem,
      url: '/data/items.json',
    });

    var many = new ManyCollection();
    many.fetch();
    console.log(many);

    var single = new SingleItem();
    single.fetch({
      success: function(data) {
        console.log("OK"); 
        console.log(data.toJSON());
      },
      error: function(data){
        console.log("NOK");
      }
    });

    console.log(single.get('name')); 
```

演示也在这里：[https ://github.com/mulderp/backbone-model-fetch](https://github.com/mulderp/backbone-model-fetch)

为什么我会得到“未定义”？我错过了什么？

（开发控制台的输出：

![开发输出](../Images/0dcac0c2650ac673438f933691d8843d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T12:17:32.807

`fetch`是异步的：它将在获取数据之前立即返回。

将调试逻辑移到`success`处理程序内部应该可以解决问题。

# .net - 使用 AdoNetAppender 时 Log4net 对 System.Data.dll 的依赖

> ID：13818718
> 
> 赞同：2
> 
> 时间：2012-12-11T10:51:58.630
> 
> 标签：.net, sql-server, .net-4.0, log4net, system.data

我们在当前项目中设置了 log4net，以使用 AdoNetAppender 将日志条目写入 SQL Server 数据库。这一切都正常工作，但出于某种原因，为了让它工作，我们必须在 System.Data.dll 上将 Copy Local 设置为 true - 如果 bin 目录中不存在此 DLL，则 log4net 不会输出到 SQL Server并会抛出有关丢失 DLL 的错误。

这是 log4net 中的错误吗？我假设因为 System.Data.dll 是一个 .Net 框架组件，log4net 能够在 GAC 中找到它。

作为参考，我们使用 log4net 1.2.10.0 和 .Net 4.5

**编辑**- 如果其他人遇到此问题，为了更好的可读性，我使用的原始 XML 配置将 connectionType 定义为：

```
<connectionType value="System.Data.SqlClient.SqlConnection, System.Data" /> 
```

将其更改为以下解决了该问题。

```
<connectionType value="System.Data.SqlClient.SqlConnection, System.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" /> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-13T21:41:54.863

你能试试这个吗？我不确定 System.Data 的 .NET 4.5 版本是什么，但无论如何这应该可以工作：

```
<connectionType value="System.Data.SqlClient.SqlConnection, System.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" /> 
```

# java - CXF 的 Maven 依赖项

> ID：13818721
> 
> 赞同：0
> 
> 时间：2012-12-11T10:52:10.123
> 
> 标签：java, maven, cxf

我正在为我的 Java 项目使用 Maven 并收到此错误

```
java.lang.NoClassDefFoundError: org/apache/cxf/logging/FaultListener 
```

我想我需要包含上面的 maven 依赖项。我在下面的**pom.xml**中发布了代码片段。

```
 <properties>          
                  <cxf.version>2.5.2</cxf.version>          
          </properties>
          <dependency>
                <groupId>org.apache.cxf</groupId>
                <artifactId>cxf-rt-frontend-jaxws</artifactId>
                <version>${cxf.version}</version>
                <exclusions>
                    <exclusion>
                        <groupId>org.apache.geronimo.specs</groupId>
                        <artifactId>geronimo-javamail_1.4_spec</artifactId>
                    </exclusion>
                    <exclusion>
                        <groupId>org.apache.geronimo.specs</groupId>
                        <artifactId>geronimo-activation_1.1_spec</artifactId>
                    </exclusion>
                </exclusions>
            </dependency>
            <dependency>
                <groupId>org.apache.cxf</groupId>
                <artifactId>cxf-rt-transports-http</artifactId>
                <version>${cxf.version}</version>
            </dependency>
            <dependency>
                <groupId>org.apache.cxf</groupId>
                <artifactId>cxf-rt-frontend-jaxrs</artifactId>
                <version>${cxf.version}</version>
            </dependency>
            <dependency>
                <groupId>org.apache.cxf</groupId>
                <artifactId>cxf-rt-rs-security-xml</artifactId>
                <version>${cxf.version}</version>
            </dependency>
            <dependency>
                <groupId>org.apache.cxf</groupId>
                <artifactId>cxf-rt-ws-security</artifactId>
                <version>${cxf.version}</version>
            </dependency> 
```

我对 Maven 不太满意。有人可以帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:12:13.570

这门课在`org.apache.cxf:cxf-api`. 其他 cxf 工件（例如 cxf-rt-transports-http）将此作为依赖项，因此您*应该*已经拥有它。

构建项目时是否包含 cxf-api jar？

# android - 如何使 Slidingbar 的 SLIDING_CONTENT 在 ActionbarSherlock 中工作？

> ID：13818724
> 
> 赞同：0
> 
> 时间：2012-12-11T10:52:17.190
> 
> 标签：android, actionbarsherlock

SLIDING_CONTENT 参数表示只有Activity滑动时触摸的内容，标题栏停留。

当我导入 ActionbarSherlock 时，我发现它并没有很好地工作。

我看过源代码

这是类 SlidingMenu (attachToActivity) 中代码的一部分

```
 case SLIDING_CONTENT:
        // take the above view out of
        View content = activity.findViewById(android.R.id.content);
        ViewGroup contentParent = (ViewGroup) content.getParent();
        contentParent.removeView(content);
        contentParent.addView(this, new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
        setContent(content);
        // save people from having transparent backgrounds
        if (content.getBackground() == null)
            content.setBackgroundResource(background);
        break;
    } 
```

它适用于包含标题栏的活动，但您知道 abs 自定义标题栏.....

我怎样才能改变一些东西让 SLIDING_CONTENT 活着？多谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:10:35.760

我解决了这个问题，我有多快~:)

只创建一个新的构造函数

```
public void attachToActivity(Activity activity, int slideStyle,int id) 
```

添加一个新的参数 'id' id 代表主要活动布局 id。

然后改变

```
View content = activity.findViewById(android.R.id.content); 
```

至

```
View content  = activity.findViewById(id); 
```

并更改另一个调用旧 attachToActivity 的函数（这很容易）

如果您有任何问题，请给我发电子邮件[smallbeardict@163.com](http://mailto%3asmallbeardict@163.com)

# php - 如何跳过 Zend 外部请求的身份验证

> ID：13818725
> 
> 赞同：1
> 
> 时间：2012-12-11T10:52:19.313
> 
> 标签：php, zend-framework, authentication, file-get-contents

我正在构建一个邮件解析器脚本，它将从邮箱中获取内容并向 WebPage 后端（在 Zend_Framework 上）发送一些“更新”请求。

这个想法是让 mailChecker.php 文件独立并使用 Cron Job 调用它。

一切正常，直到我尝试调用更新网址：

```
file_get_content("http://mySite.com/update-item/id/1"); 
```

该框架将我的请求重定向到登录表单...

解决这个问题的最干净的方法是什么？我不会过多地编辑登录功能

有没有办法跳过特定请求的身份验证检查？（这里的安全性不是大问题）

或者在我调用更新之前为我的独立脚本创建会话的简单方法：file_get_content("http://mySite.com/easy-auth/admin/admin");

寻找一个简单/丑陋的解决方案，我不会过多地编辑当前的身份验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:07:26.843

为什么不在调用更新 url 之前像往常一样进行身份验证？如果有一个简单的基于会话的身份验证，您可以 curl 登录操作传递登录详细信息并启用 cookie jar。然后再次 curl 以从更新脚本中获取数据。

另一种解决方案，如果真的没有安全要求，只需禁用对来自本地主机的传入请求的身份验证检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:09:37.033

我知道您正在寻求快速而肮脏的解决方案，但这是糟糕的设计。您的 cron 作业应该运行 update-item 操作运行的任何代码（最好不要复制它）。向您自己的站点发出 Web 请求会减慢 cron 作业的速度，在您的服务器上增加不必要的负载，并导致与您现在遇到的完全一样的问题。

我建议将更新项逻辑移动到控制器调用的服务类中。然后，您可以从您的 cron 作业中调用相同的方法。这更清洁、更快、更容易进行单元测试。

# java - Java 中字节和短原始类型的用途

> ID：13818735
> 
> 赞同：2
> 
> 时间：2012-12-11T10:52:38.517
> 
> 标签：java

我想知道与 Java 中的原始类型相关的一个问题。当*short*和*byte*类型被 VM 编译成*int*原始类型时，那么使用这些类型的目的是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T10:54:56.770

它们表现为字节或短路，并被验证为字节或短路。

示例 1：

```
 byte b = 122;
    System.out.println((byte)(b*5)); // outputs 98 
```

示例 2：

```
 byte b = 1422; // doesn't compile 
```

从[规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.2.1)：

> 整数类型的值是以下范围内的整数：
> 
> 对于字节，从 -128 到 127（含）
> 
> 简而言之，从 -32768 到 32767，包括
> 
> 对于 int，从 -2147483648 到 2147483647，包括
> 
> 长期，从-9223372036854775808到9223372036854775807，包括
> 
> 对于 char，从 '\u0000' 到 '\uffff' 包括在内，即从 0 到 65535

[您可能对整数的数值运算总是导致 int 或 long](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.2.2)（即`a*b`were`a`和`b`are 类型`byte`为 an的结果）这一事实感到困惑`int`。或者由于内存可以对齐并浪费一些地方的事实。但是 a`byte`和 a`short`真的不会像 an`int`那样溢出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T11:05:56.363

字节和short确实被JVM提升为int，但只有当它们在方法中用作字节码中的局部变量时。但作为领域

```
private byte field1;
private short field2; 
```

它们将相应地占用 1 和 2 个字节。

字节在 Java 中非常重要，因为它们用于字节数组，首先用于输入/输出操作，如 java.io.InputStream.read(byte[] bytes)

简而言之，它很少使用，尽管它对于存储大量相对较小的数字可能很有用，以节省内存

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T10:57:57.567

对于**网络通信**和**图像处理**，您需要字节。并且它们被视为`bytes`. 如果他们不是，那将毫无意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T10:57:58.853

byte 和 short 不编译为 int，它们只是适合 int。即，您可以将一个字节值分配给一个 int 变量。

```
byte b=5;
int i = b; 
```

但不是相反，除非你明确地投射它

```
int i=4;
    byte b = i; //compiler error 

int i=4;
    byte b = (byte)i; 
```

# asp.net-mvc-3 - 设置模型以传递给视图的问题

> ID：13818737
> 
> 赞同：0
> 
> 时间：2012-12-11T10:52:43.327
> 
> 标签：asp.net-mvc-3, oop

我的控制器中有这个：

```
public ActionResult Article(int id, int? page)
{
  var news = ZincService.NewsService.GetNewsForId(id);
  var allNewsComments = ZincService.NewsService.GetAllNewsCommentsForId(id, page.GetValueOrDefault(1), 10);

  if (news == null || news.PublishingState != PublishingState.Live)
    return RedirectToAction("NotFound");

  var user = ZincService.GetUserForId(id);
  if (user == null || user.Customer.CustomerId != CurrentCustomer.CustomerId)
    return DataNotFound();

  List<NewsCommentsViewModel> newsItemsViewModel = new List<NewsCommentsViewModel>();

  foreach (var newsItem in allNewsComments.NewsComments)
  {
    NewsCommentsViewModel newsItemViewModel = new NewsCommentsViewModel();
    newsItemViewModel.Results = allNewsComments;
    newsItemViewModel.CurrentPage = page.GetValueOrDefault(1);
    newsItemViewModel.PageSize = 10;
    newsItemsViewModel.Add(newsItemViewModel);
  }

  ViewBag.Avatar = user.UserImage;
  ViewBag.UserName = user.Firstname + "   " + user.Surname;
  NewsCommentsViewModel model = (NewsCommentsViewModel)SetNewsArticleViewModel(news, newsItemsViewModel); 
  model.Results.NewsComments = allNewsComments.NewsComments;
  return View(model);
}

  [NonAction]
private NewsArticleViewModel SetNewsArticleViewModel(Entities.News.News news, NewsArticleViewModel viewModel)
{
  viewModel.News = news;
  viewModel.IsFavourite = ZincService.FavouriteService.IsFavouriteForUser(CurrentUser.UserId, news); 
  viewModel.DownloadAttachments = news.NewsAttachments.Where(x =>
    Core.FileFormat.FileFormatHelper.GetFileFormatType(x.FileExtension) == Core.FileFormat.FileFormatType.Excel ||
    Core.FileFormat.FileFormatHelper.GetFileFormatType(x.FileExtension) == Core.FileFormat.FileFormatType.PDF ||
    Core.FileFormat.FileFormatHelper.GetFileFormatType(x.FileExtension) == Core.FileFormat.FileFormatType.PowerPoint ||
    Core.FileFormat.FileFormatHelper.GetFileFormatType(x.FileExtension) == Core.FileFormat.FileFormatType.Word);

  viewModel.EmbedAttachments = news.NewsAttachments.Where(x =>
    Core.FileFormat.FileFormatHelper.GetFileFormatType(x.FileExtension) == Core.FileFormat.FileFormatType.Video);

  return viewModel;
}

public class NewsCommentsViewModel : NewsArticleViewModel
{
  public int CurrentPage { get; set; }
  public int PageSize { get; set; }
  public Models.News.NewsCommentsDataModelResults Results { get; set; }
}

public class NewsArticleViewModel
{
  public Entities.News.News News { get; set; }
  public bool IsFavourite { get; set; }
  public IEnumerable<Entities.News.NewsAttachment> DownloadAttachments { get; set; }
  public IEnumerable<Entities.News.NewsAttachment> EmbedAttachments { get; set; }    
} 
```

allNewsComments.NewsComments 包含我所有的新闻评论，但得到和错误然后说明：System.NullReferenceException：{“对象引用未设置为对象的实例。”}

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:22:28.827

我对其进行了排序：

```
public ActionResult Article(int id, int? page)
{
  var news = ZincService.NewsService.GetNewsForId(id);
  var allNewsComments = ZincService.NewsService.GetAllNewsCommentsForId(id, page.GetValueOrDefault(1), 10);

  if (news == null || news.PublishingState != PublishingState.Live)
    return RedirectToAction("NotFound");

  var user = ZincService.GetUserForId(id);
  if (user == null || user.Customer.CustomerId != CurrentCustomer.CustomerId)
    return DataNotFound();

  ViewBag.Avatar = user.UserImage;
  ViewBag.UserName = user.Firstname + "   " + user.Surname;
  NewsCommentsViewModel model =  (NewsCommentsViewModel)SetNewsArticleViewModel(news, new NewsCommentsViewModel());
  **foreach (var newsItem in allNewsComments.NewsComments)
  {
    model.Results = allNewsComments;
    model.PageSize = 10;
    model.CurrentPage = page.GetValueOrDefault(1);
  }**
  return View(model);
} 
```

# java - 使用计时器的多线程图形？

> ID：13818743
> 
> 赞同：0
> 
> 时间：2012-12-11T10:53:11.870
> 
> 标签：java, multithreading, swing, timer, java-2d

我的讲师给了我一个任务，要求我编写一个多线程图形程序，其中一个球在 jframe 周围反弹。他希望每个球都有自己的螺纹。标记后他告诉我计时器是多线程的，这是最好的方法。我为每个球使用了一个新线程，我知道这很昂贵，但他告诉我们为每个球使用一个线程。计时器类是多线程的吗？

使用计时器

```
Ball b = new Ball(x, y);
BallMover bm = new BallMover(b)//adds the ball to a new instance of an actionListner
theTimer.addActionListener(bm); 
```

使用线程

```
Ball b = new Ball(x,y);
BallMover bm = new BallMover(b);//adds the ball to a new instance of a Thread
bm.start(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:58:51.223

来自 Swing 的文档[`Timer`](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html)。

> 尽管所有线程都`Timers`使用单个共享线程（由第一个执行的`Timer`对象创建）来执行等待，但用于`Timers`在另一个线程上执行的动作事件处理程序——事件调度线程。这意味着操作处理程序`Timers`可以安全地对 Swing 组件执行操作。然而，这也意味着处理程序必须快速执行以保持 GUI 响应。

# python - matplotlib 运行时错误

> ID：13818744
> 
> 赞同：4
> 
> 时间：2012-12-11T10:53:16.867
> 
> 标签：python, matplotlib

我已经使用 python 2.7 在 Windows 上安装了 matplotlib。我正在尝试执行以下操作：

```
import matplotlib.pyplot as plot
plot.plot([1,2,3][1,2,3]) 
```

这会导致以下错误：

![在此处输入图像描述](../Images/43af5dd6b0569ee78a093518c46d074c.png)

![在此处输入图像描述](../Images/aec9812c232c8b752ba15c8bac21936c.png)

感谢您提供的任何帮助..

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:00:57.420

所以首先，你错过了一个逗号：

```
plot.plot([1,2,3],[1,2,3]) 
```

我的终止行为是不可重现的。如果我使用 spyder 和 python 2.7，它只会给我一个语法错误。因此，请多说一点有关该错误的信息。插入的 komma 是否仍然存在？

# php - 合并数组并修改或追加新元素

> ID：13818749
> 
> 赞同：0
> 
> 时间：2012-12-11T10:53:28.873
> 
> 标签：php, arrays, multidimensional-array

```
<?php 
$followed = Array(
    0=>array(
            'label' =>"label0",
            'id_poste'=>1,
            'id_part'=>11,
            'date'=>'9/12/21012'
    ),
    1=>array(
            'label' =>"label1",
            'id_poste'=>2,
            'id_part'=>12,
            'date'=>'10/13/21012'
            )
);

$unfollowed = Array(
    0=>array(
            'label' =>"New label",
            'id_poste'=>1,
            'id_part'=>11           
    )
); 
```

这样做可以合并两个数组。

```
$result = array_merge($followed, 
            array_udiff($unfollowed, $followed, 
                        function($a,$b){
                            return strcmp($a['label'],$b['label']);
                        }
           )
); 
```

我想要`result`

```
 Array
(
    [0] => Array
        (
            [label] => label0
            [id_poste] => 1
            [id_part] => 11
            [date] => 9/12/21012
        )

    [1] => Array
        (
            [label] => label1
            [id_poste] => 2
            [id_part] => 12
            [date] => 10/13/21012
        )

    [2] => Array
        (
            [label] =>(A)New label /*concatenate with (A)*/
            [id_poste] => 1
            [id_part] => 11,
            [date]=>'--/--/----' /* Append new element with that format*/
        )

)

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:21:31.213

只需添加以下代码..

```
for($i=0;$i<count($unfollowed);$i++)
{
    $unfollowed[$i]['label'] ='(A)'.$unfollowed[$i]['label'];  
    $unfollowed[$i]['date'] ='--/--/----';
}
$result = array_merge($followed, $unfollowed); 
```

# .net - 如何使用不是 SystemSecuredString 的密码创建新的 PSDrive？

> ID：13818751
> 
> 赞同：12
> 
> 时间：2012-12-11T10:53:32.690
> 
> 标签：.net, powershell

有没有办法通过使用非 SystemSecured 字符串的密码来创建 New-PSDrive？

如果密码是“FooBoo”，我想按原样使用它......

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-11T11:19:08.507

只需使用旧的 net use 命令

```
PS>net use z: \\server\share Fooboo /user:domain\user
PS>Get-PSDrive -Name Z

Name           Used (GB)     Free (GB) Provider      Root                                CurrentLoc
                                                                                              ation
----           ---------     --------- --------      ----                                ----------
Z                 150,36         49,64 FileSystem    Z:\ 
```

或者将您的纯文本密码转换为安全字符串：

```
PS>$pass="FooBoo"|ConvertTo-SecureString -AsPlainText -Force
PS>$Cred = New-Object System.Management.Automation.PsCredential('user@domain',$pass)
PS>New-PSDrive -name j -Root \\server\share -Credential $cred -PSProvider filesystem

Name           Used (GB)     Free (GB) Provider      Root
----           ---------     --------- --------      ----
j                                      FileSystem    \\server\share 
```

# java - MongoDB 和管理 UI

> ID：13818753
> 
> 赞同：0
> 
> 时间：2012-12-11T10:53:39.097
> 
> 标签：java, mongodb, mongodb-java

我想搜索一下`MongoDB`，`Java`它自己的网站很好。但是我想学很多东西`Admin UIs`，有什么书可以推荐给我吗？或任何其他好的博客？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:52:14.970

实际上免费的mongoDB在线课程昨天结束了。但是您可以注册下一个 mongoDB 课程或开始阅读 mongo 教程。

> 课程：[https ://education.10gen.com/courses](https://education.10gen.com/courses)

或者

> 教程： [http ://docs.mongodb.org/manual/tutorial/getting-started/](http://docs.mongodb.org/manual/tutorial/getting-started/)

这是很棒的课程，我真的建议您注册这门课程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:43:27.210

一旦开始使用它，您就可以探索 admi UI 我使用 mongoVUE for windows [http://www.mongovue.com/](http://www.mongovue.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T05:24:26.133

[http://code.google.com/p/greenmangoquery](http://code.google.com/p/greenmangoquery) http://greenmangoquery.blogspot.sg/ 它基于swing 的mongodb 客户端。非常简单且重量轻。

# silverlight - XAML - 如何检查 ComboBox 是否已填充.. 编写此代码的更好方法

> ID：13818757
> 
> 赞同：0
> 
> 时间：2012-12-11T10:53:47.473
> 
> 标签：silverlight, xaml

感觉应该有更优雅的方式来编写这段代码？

```
 try
 {
    if (InfrastructureComboBoxT32.Items[0] == null){}
 }
 catch
 {
    // Load data into the combobox
 } 
```

使用 Silverlight5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:27:10.080

那这个呢：

```
items != null && items.Count > 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T14:40:23.823

[ComboBox](http://msdn.microsoft.com/en-us/library/system.windows.controls.combobox%28v=vs.95%29.aspx)控件公开了一个HasItems[属性](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.hasitems%28v=vs.95%29.aspx)。然后：

```
if(!InfrastructureComboBoxT32.HasItems)
{
    // Load data into the combobox
} 
```

# css - 滚动外部 div 时保持内部 div 固定

> ID：13818770
> 
> 赞同：1
> 
> 时间：2012-12-11T10:54:48.300
> 
> 标签：css, html, background-image, css-position, parallax

我知道在处理 div 及其背景图像时如何实现这种效果：我只是为我的 div 分配一个背景图像并将其背景附件属性设置为固定。

例子

```
<div class="container mask">

</div>

.container {height:400px;width:100%;}
.mask {
       position:relative;
       background-image:url(http://goo.gl/YRHZq);
       background-repeat: no-repeat;
       background-attachment:fixed;
      } 
```

如果我想在谷歌地图 IFrame 上实现相同的（视差？）效果怎么办？

[这是我的 JSFiddle](http://jsfiddle.net/4uEWb/3/)

# jpa - JPA - 为参考生成的真实主键 ID

> ID：13818775
> 
> 赞同：0
> 
> 时间：2012-12-11T10:54:56.300
> 
> 标签：jpa, eclipselink, composite-primary-key

我有大约 10 个类，每个类都有复合键，由 2-4 个值组成。其中 1 个类是主要类（我们称其为“中心”），并且与其他类以一对一或一对多的方式相关。

考虑在 JPA 中描述这一点的正确方法，我认为我需要使用 @Embedded / @PrimaryKey 注释来描述所有主键。

***问题#1：*** 我担心的是——这是否意味着在数据库级别上，每个表中引用“中心”的附加列数等于“中心”PK 中的列数？

如果是，是否可以通过使用一些人为的唯一键进行引用来避免它？你能告诉我在这种情况下如何描述真实的PK和人工的PK吗？

*注意：*我想保留真正的 PK 而不仅仅是像 PK 那样使用唯一 id 的原因是 - 我的应用程序具有一些来自外部数据源的数据加载功能，有时它们可​​能会返回我已经在本地数据库中拥有的记录。如果将唯一 ID 用作 PK - 对于新记录，我将无法进行数据更新，因为唯一 ID 不适用于刚刚下载的记录。同时这是应用程序的正常情况，它只需要更新插入新记录，这取决于真正的复合主键是否匹配。

***问题 #2：*** 所有 10 个类都有公共字段“日期”，我在一个抽象类中对其进行了描述，每个类都扩展了该字段。“日期”本身从来都不是键，但它始终是每个类的组合键的一部分。每个类的复合键都不同。为了能够将此字段用作 PK 的一部分，我应该在每个类中描述它还是有什么方法可以按原样使用它？我尝试了@Embedded 和@PrimaryKey 注释，总是得到一个错误，即eclipselink 找不到抽象类中描述的字段。

先感谢您！

PS。我正在使用最新版本的 eclipselink & H2 数据库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T11:02:21.817

我的建议：忘记功能组合键：它们效率低下，而且使用起来简直就是一场噩梦。只需为所有实体使用单列自动生成的键。这也将具有使您的表格更短和更清洁（更少的列）的优势。

这并不妨碍您在一组列上创建唯一约束，以确保例如，对于列 col1、col2 和 col3，只有一条包含 a、b 和 c 的记录。

如果您想检查 a、b、c 的记录是否已经存在，只需创建一个查询：

```
select center from Center center 
where center.col1 = :col1 
and center.col2 = :col2
and center.col3 = :col3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T15:17:05.450

看，

[http://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing#Composite_Primary_Keys](http://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing#Composite_Primary_Keys)

有关复合键的信息。

通常使用单个生成的 id 更好，但如果您有旧数据，则可以使用复合键。

我不建议使用@EmbeddedId，而是使用@IdClass，它更简单。EclipseLink 不需要@IdClass，但如果您希望使用 find()，那么您需要一个来组合键值。

您应该能够使用 @MappedSuperclass 来定义其中一个 id 字段，确保您使用 @Id 注释每个关键字段。

EclipseLink 确实允许使用 @PrimaryKey 注释来简化指定复合键，您只需要提供列列表。您仍然必须将这些列映射到您的类中的属性。

# apache - 使用 htaccess 从 URL 中删除字符

> ID：13818776
> 
> 赞同：7
> 
> 时间：2012-12-11T10:54:58.780
> 
> 标签：apache, .htaccess, redirect, character, strip

希望有人能看到我做错了什么，但这是故事......

我当前的站点 URL 是由电子商务软件根据产品和类别名称自动生成的，因此，如果产品/类别名称包含非字母数字字符，则会在 URL 中进行编码，这很麻烦。例如：

```
mysite.com/Shop/Furniture-Set-Large-Table%2C-4-Chairs.html 
```

我正在转向一个新的电子商务解决方案，它还可以从产品名称中自动生成 URL，但它足够聪明，可以删除所有非字母数字字符。它还转换为小写，我设法找到了一个将大写重定向到小写的 htaccess 解决方案。它也没有 URL 的“商店”部分，我也设法通过 htaccess 解决了这个问题。例如：

```
mysite.com/furniture-set-large-table-4-chairs.html 
```

要删除“商店”部分：

```
RedirectMatch 301 ^/Shop/(.*)$ http://www.mysite.com/$1 
```

用小写替换大写以防止 404 错误：

```
RewriteCond %{REQUEST_URI} [A-Z]
RewriteCond %{REQUEST_FILENAME} !\.(?:png|gif|ico|swf|jpg|jpeg|js|css|php|pdf)$
RewriteRule (.*) ${lc:http://www.mysite.com/$1} [R=301,L] 
```

这些都完美地工作。

所以我需要一个 htaccess 规则，或者可能几个，从 URL 中删除这些编码字符。我不需要替换它们，只需删除它们，因为软件将 URL 创建为“Table%2C-4-Chairs” - 所以只需要删除 %2C。

我需要从 URL 中删除某些字符编码，例如：

逗号 (%2C)、撇号 (%27)、冒号 (%3A) 等。

任何人都可以为此建议一个合适的 htaccess 规则或规则吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T11:40:58.750

URI 在通过重写引擎发送之前经过 url 解码，因此您希望匹配实际字符而不是它们的编码对应物：

```
RewriteRule ^(.*),(.*)$ /$1$2 [L]
RewriteRule ^(.*):(.*)$ /$1$2 [L]
RewriteRule ^(.*)\'(.*)$ /$1$2 [L]
RewriteRule ^(.*)\"(.*)$ /$1$2 [L]
# etc...

RewriteCond %{ENV:REDIRECT_STATUS} 200
RewriteRule ^(.*)$ http://www.mysite.com/$1 [L,R=301] 
```

重定向状态让 mod rewrite 知道如果应用了上述任何规则（从而使内部重定向状态值 = 200），那么我们需要重定向，但在清除所有规则之前我们不会到达规则的那部分特殊字符检查。

您希望在任何重定向**之前**都使用这些规则，以便规则可以循环并删除任何这些字符的多个实例。然后，一旦没有更多的特殊字符，重写引擎就可以向下渗透到您的重定向所在的位置。

我建议您删除 mod_alias`RedirectMatch`指令并将其替换为重写规则。有时将这 2 个模块组合在一起并让它们都影响单个 URI 可能会导致意外结果。因此，在上述所有规则*之前*，您将拥有：

```
RewriteRule ^Shop/(.*)$ /$1 [L] 
```

`/Shop/`在特殊字符链中添加删除。然后你的最后一条规则将遵循：

```
RewriteCond %{REQUEST_URI} [A-Z]
RewriteCond %{REQUEST_FILENAME} !\.(?:png|gif|ico|swf|jpg|jpeg|js|css|php|pdf)$
RewriteRule (.*) ${lc:http://www.mysite.com/$1} [R=301,L] 
```

# python - 将一个非阻塞定时器变成多个非阻塞定时器

> ID：13818780
> 
> 赞同：0
> 
> 时间：2012-12-11T10:55:15.320
> 
> 标签：python, timer, nonblocking

我有这个非阻塞计时器：

```
import time
class Timer:
        def __init__(self):
        self.status = 0
    def update(self, data, tv):
        self.target = time.time() + data
        self.status = 1
    def set_status(self, state):
        self.status = state
    def get_status(self, tv):
        return self.status
    def get_left(self, tv):
        return int(self.target-time.time()) 
```

当我想要在主循环中使用计时器时，它非常有用，例如：

```
t = Timer()
while 1:
    #If timer is not active.
    if t.get_status() == 0:
        # Do some checks.
        # Start timer with 60 seconds.
        t.update(60)
    #If timer is active.
    if t.get_status() == 1:
         print "%s seconds left." % str(t.get_left())
         if t.get_left() <= 0:
             t.set_status(0)
             # Timer is done do some stuff.
time.sleep(1) 
```

我希望它能够在不执行线程的情况下处理多个计时器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:55:15.320

这是我自己的解决方案，如果有人有更好的想法，请告诉我。

```
import time
class Timer:
    def __init__(self):
        self.status = {}
        self.target = {}
    def update(self, tv, data):
        self.target[tv] = time.time() + data
        self.status[tv] = 1
    def set_status(self, tv, state):
        self.status[tv] = state
    def get_status(self, tv):
        return self.status[tv]
    def get_left(self, tv):
        return int(self.target[tv]-time.time())

t = Timer()
t.set_status('A', 0)
t.set_status('B', 0)
while 1:
    # Timer A checks
    if t.get_status('A') == 0:
        print "Timer A checks."
        # Start timer with 60 seconds.
        t.update('A', 60)
    if t.get_status('A') == 1:
         print "A has %s seconds left." % str(t.get_left('A'))
         if t.get_left('A') <= 0:
             t.set_status('A', 0)
             print "Timer A done."
    # Timer B checks
    if t.get_status('B') == 0:
        print "Timer B checks."
        # Start timer with 30 seconds
        t.update('B', 30)
    if t.get_status('B') == 1:
         print "B has %s seconds left." % str(t.get_left('B'))
         if t.get_left('B') <= 0:
             t.set_status('B', 0)
             print "Timer B done."
    time.sleep(1) 
```

# sql - SQL从单列到多列的多个日期

> ID：13818782
> 
> 赞同：2
> 
> 时间：2012-12-11T10:55:17.450
> 
> 标签：sql, sql-server, sql-server-2008, tsql, pivot

如何移动如下所示的日期列。

```
User              Date
====              ====
001               2012/12/01 09:00
001               2012/12/01 11:00
001               2012/12/01 12:00
001               2012/12/01 13:00
001..             ... 
```

并在下面列出它们。

```
User  date         time1   time2   time3  time4    time5  
001   2012/12/01   09:00   11:00   12:00  13:00    14:00 
```

感谢 Bluefeet 的解决方案。我测试了脚本并得到了以下结果。

```
2   2012/11/04  09:00:00.000    NULL    NULL    NULL    NULL    NULL    NULL
2   2012/11/08  NULL    09:00:00.000    18:00:00.000    NULL    NULL    NULL    NULL
2   2012/11/09  NULL    NULL    NULL    09:00:00.000    18:00:00.000    NULL    NULL
2   2012/11/10  NULL    NULL    NULL    NULL    NULL    09:00:00.000    18:00:00.000 
```

时间似乎跳到下一个日期同一用户的最后一个空列？有没有办法让我从第一列开始为同一用户安排下一个日期的顺序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T11:08:04.310

您没有指定您使用的是什么 RDBMS，但您之前使用 sql server 标记标记了问题，所以我假设那是数据库。

[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)您可以使用SQL Server 中的函数执行此操作。有两种方法可以做到这一点，一种是对所有值进行硬编码的静态方法，另一种是在运行时确定值的动态方法。

**静态枢轴：**

```
select *
from 
(
  select [user], convert(varchar(10), date, 111) date,
    right(convert(varchar(50), date, 121), 12) time
    , 'time'+cast(row_number() over(partition by [user], convert(varchar(10), date, 111) order by date) as varchar(10)) rn
  from yourtable
) src
pivot
(
  max(time)
  for rn in (time1, time2, time3, time4)
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/4974b/8)

**动态枢轴：**

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME('time'+cast(row_number() over(partition by [user], convert(varchar(10), date, 111) order by date) as varchar(10))) 
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT [user], date,' + @cols + ' from 
             (
                select [user], convert(varchar(10), date, 111) date,
                  right(convert(varchar(50), date, 121), 12) time
                  , ''time''+cast(row_number() over(partition by [user], convert(varchar(10), date, 111) order by date) as varchar(10)) rn
                from yourtable
            ) x
            pivot 
            (
                max(time)
                for rn in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/c4c0b/2)

**聚合/案例版本：**

如果由于某种原因您不想使用该`PIVOT`函数，那么您也可以使用带有`CASE`语句的聚合函数。

```
select [user], date,
  max(case when rn = 1 then time end) Time1,
  max(case when rn = 2 then time end) Time2,
  max(case when rn = 3 then time end) Time3,
  max(case when rn = 4 then time end) Time4
from
(
  select [user], convert(varchar(10), date, 111) date,
    right(convert(varchar(50), date, 121), 12) time
    , row_number() over(partition by [user], convert(varchar(10), date, 111) order by date)) rn
  from yourtable
) src
group by [user], date 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/c4c0b/5)

这三个产生相同的结果：

```
| USER |       DATE |        TIME1 |        TIME2 |        TIME3 |        TIME4 |
---------------------------------------------------------------------------------
|  001 | 2012/12/01 | 09:00:00.000 | 11:00:00.000 | 12:00:00.000 | 13:00:00.000 |
|  001 | 2012/12/02 | 09:00:00.000 | 11:00:00.000 | 12:00:00.000 | 13:00:00.000 | 
```

# django - 如何识别代理模型实例？

> ID：13818783
> 
> 赞同：0
> 
> 时间：2012-12-11T10:55:19.587
> 
> 标签：django, proxy

我需要创建几种具有不同权限的用户。

我正在尝试使用代理这样做，但我不确定如何识别结果实例。我知道使用代理模型在数据库中的同一个表中，但我需要能够识别它们。例如，`MyUser`在管理员的列表中，我拥有从`User`和`MyUser`模型创建的所有实例，我只想拥有`MyUser`实例。

我想我应该覆盖管理员中的`queryset`方法`MyUser`，但我不确定识别`MyUser`实例的最佳方法是什么，或者即使它是拥有多个具有不同权限的用户模型的正确方法。

有人可以帮忙吗？

**模型.py**

```
from django.db import models
from django.contrib.auth.models import User

class MyUser(User):
    class Meta:
        proxy = True 
```

**管理员.py**

```
class MyUserAdmin(admin.ModelAdmin):
    pass
admin.site.register(MyUser, MyUserAdmin) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:46:04.693

我创建了一个 group `myusers`，并在创建`MyUser`对象时将其添加到实例中，这样我就可以在查询集中将它们过滤掉`MyAdminUser`：

```
class MyUser(User):
    class Meta:
        proxy = True

    def save(self, *args, **kwargs):
        super(MyUser, self).save(*args, **kwargs)
        self.groups.add(Group.objects.get(name='myusers')) 
```

# sql - SQL 从具有两个子表的父表中查询行，如果不存在子行，则使用空白值

> ID：13818785
> 
> 赞同：0
> 
> 时间：2012-12-11T10:55:24.650
> 
> 标签：sql, join

我有三个表，一个父级和两个子级，两个子级使用 ID 列与父级有 FK 关系，每个父级行可能有 0 到 n 个子行。我需要生成一个查询，该查询将从所有三个表中生成一个数据结果集。

如果子行不存在，则该表的字段应为空白，否则，这些字段应具有适当的值。

```
Table A     Table B           Table C
--------    -------           -------
ID (PK)     A_ID (FK)         A_ID (FK)
DataA1       DataB1            DataC1
DataA2       DataB2            DataC2 
```

这个查询：

```
select * from A,B,C where A.ID = B.A_ID and A.ID = C.A_ID 
```

将仅返回 A 中同时存在子行 B 和 C 的行。我想从 A 返回行，其中 A.ID 存在子行 B 或子行 C。如果不存在 B 的行，则 B.DataB1 和 B.DataB2 应该为空或空白，如果不存在 C 的行，则类似。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:01:27.633

您应该使用外部联接。

```
select
    A.ID,
    A.DataA1,
    A.DataA2,
    B.A_ID,
    B.DataB1,
    B.DataB2,
    C.A_ID,
    C.DataC1,
    C.DataC2
from A 
left join B
on A.ID = B.A_ID
left join C
on A.ID = C.A_ID 
```

For a good explanation of SQL joins checkout: [http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

# java - 单击按钮时略有延迟

> ID：13818787
> 
> 赞同：4
> 
> 时间：2012-12-11T10:55:26.953
> 
> 标签：java, android, jodatime

我刚刚使用 JodaTime 库制作了简单的应用程序。它没有什么特别的，只计算时间差（24小时制）并将其输出到屏幕上。例如，21 小时和 03 小时之间的差异是 6 小时。没有什么特别的和应用程序的作品。

但我有一个问题。当我单击“计算”按钮时，我遇到了一些不寻常的延迟。就像当我单击按钮时，在模拟器上“计算”需要 3 秒钟。在我的手机上大约需要半秒。但是你可以看到计算不是即时的。但是当我想计算第二次时，它会立即没有问题。在实际的手机和模拟器上。有人可以告诉我可能出了什么问题吗？这是我的 onClick 代码（在活动中我只有对视图的引用）。据我所知，对象应该是问题..加载到内存中？因为当它们存在于内存中时，没有延迟。我怎样才能改进我的代码，这样就不会再有任何延迟了？

```
@Override
public void onClick(View ClickedView) {

    hour1 = Integer.parseInt(field_hour1.getText().toString());
    hour2 = Integer.parseInt(field_hour2.getText().toString());

    if(hour2 < hour1) {

        dt1 = new DateTime(2012, 10, 10, hour1, 00);
        dt2 = new DateTime(2012, 10, 10+1, hour2, 00);
        diff = Hours.hoursBetween(dt1, dt2);

    } else {
        dt1 = new DateTime(2012, 10, 10, hour1, 00);
        dt2 = new DateTime(2012, 10, 10, hour2, 00);
        diff = Hours.hoursBetween(dt1, dt2);

        }

    result.setText(""+diff.getHours());} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:24:36.650

你可以试试这个

```
public static int diff(int hour1, int hour2) {
    if(hour2 < hour1) {
        hour2 += 24;
    }
    return hour2 - hour1;
} 
```

# active-directory - 将 devise_ldap_authenticable 用于 AD 时，我可以将 ldap_use_admin_to_bind 设置为 false 吗？

> ID：13818788
> 
> 赞同：1
> 
> 时间：2012-12-11T10:55:29.017
> 
> 标签：active-directory, ldap

我正在使用 devise_ldap_authenticable 针对 Active Directory 对用户进行身份验证。身份验证成功。但是，有一个问题。目前，devise.rb 配置为使用 ldap_use_admin_to_bind = true，ldap.yml 配置为正确设置 admin_user 和 admin_password。

如果这 3 个设置中的任何一个被更改/删除，则用户身份验证失败。

我想知道如何省略这些字段，因为我不想将 AD 管理员密码保存到文件中。任何想法 ？

我认为用户提供的用户名和密码足以让 ldap 检查它是否可以绑定到 AD。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T10:49:06.033

与 database.yml 相同的技术：

*   不将其存储在 vcs 中
*   它假设在共享/配置中具有安全权限的服务器上
*   部署后创建链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-14T18:00:11.767

我有同样的问题。我发现在我的 ldap.yml 文件中将“属性：sAMAccountName”更改为“属性：cn”允许我在 devise.rb 中设置 config.ldap_use_admin_to_bind = false，并且用户身份验证可以工作（无需设置管理员 un/pw）。不确定这是否适合您。

# iphone - 在同一个 UIViewController 中多次使用 appDelegate

> ID：13818789
> 
> 赞同：2
> 
> 时间：2012-12-11T10:55:33.740
> 
> 标签：iphone, objective-c, pointers, nsinteger, appdelegate

我是 Objective-C 和可可的新手。

在我的 UIViewController 中，我需要以不同的方法多次访问 AppDelegate

A. 在每个方法中调用：

```
AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate]; 
```

消耗更多性能？

B. 我尝试在 UIViewController 中创建一个全局参数：

```
#import <UIKit/UIKit.h>
#import "AppDelegate.h"

@interface Login_ViewController : UIViewController<UITextFieldDelegate,UIImagePickerControllerDelegate>{
  AppDelegate *appDelegate;
} 
```

实现和使用：

```
- (void)viewDidLoad
{
     appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];  
     appDelegate.businessId = [businessId integerValue]; 
}

- (BOOL)credentialsValidated
{
     appDelegate.businessId = [[NSUserDefaults standardUserDefaults] integerForKey:BUSINESS_ID];
} 
```

但我收到警告（尽管代码有效）

```
Incompatible integer to pointer conversion assigning to 'NSInteger *' (aka 'int *') from 'NSInteger' (aka 'int'); 
```

appDelegate中businessId的声明为：

```
@interface AppDelegate : UIResponder <UIApplicationDelegate>
@property NSInteger *businessId; 
```

和实施：

```
@implementation AppDelegate
@synthesize businessId; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T11:12:38.627

`*`从应用委托中的声明中删除：

```
@property NSInteger (assign) businessId; 
```

`NSInteger`是原语，因此您不需要对象指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T11:12:48.927

答：除非您将其称为每秒 100000000，否则这不会造成任何性能损失。顺便说一句，从不假设——总是衡量。有一个名为 Time Profiler 的工具 - 使用它来查找所有瓶颈。

B. NSInteger 只是 int 的 typedef - 它是 POD 类型而不是 ObjC 对象，因此您不能向它发送消息。使用 NSInteger 而不是 NSInteger*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T05:35:52.190

您可以像这样定义 AppDelegate #define DELEGATE (AppDelegate *)[[UIApplication sharedApplication] delegate]; 现在您可以在需要的地方使用 DELEGATE ..

# iphone - 对某些类使用类别而不是完整代码

> ID：13818791
> 
> 赞同：0
> 
> 时间：2012-12-11T10:55:34.957
> 
> 标签：iphone, objective-c, ios, ios5, objective-c-category

我的`UINavigationBar`. 我想使用该类别来自定义我的导航栏，但不是用于该项目中的每个导航栏。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:58:27.147

在该类文件（.m）本身中定义该类别，而不是单独的文件。

# c - 内部循环不断增长的嵌套循环的复杂性

> ID：13818794
> 
> 赞同：2
> 
> 时间：2012-12-11T10:55:39.217
> 
> 标签：c, algorithm, complexity-theory, big-o

我对这段代码的时间复杂度和用于查找它的逻辑感到困惑。

```
void doit(int N) {
    for (int k = 1; k < N; k *= 2) { <----I am guessing this runs O(logN)
           for (int j = 1; j < k; j += 1) { <------I am not sure how this one works.
       }
    }
} 
```

我已经尝试过手写解决它。但是，我还是不明白。

感谢您的时间。

**编辑：**

添加另一个问题。相同的概念，不同的形式。

```
void doit(int N) {
    int j, k; //I ended up getting this answer to be O(n^(n/2)) But then I was stuck after that...is that even the right answer?
    for (k = 1; k < N / 2; k += 1) {
       for (j = k; j < 2 * k; j += 1) [
             x[j] = x[j-k] + x[j];//This doesn't really matter
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T11:00:13.733

总复杂度实际上是`O(N)`

**声明：**对于每个`k`你都有`k`内部循环迭代。（说服自己为什么它是正确的）

**用表示**总内循环迭代次数`T(N)`，并设外循环数为`h`。
这意味着我们有：

```
T(N) = 1 + 2 + 4 + ... + 2^h 
     < 2 * 2^h               (1)
     = 2^(h+1)     
     = 2^(logN + 1)          (2)
     = 2^(log(2N))   
     = 2N 
```

* * *

（1）从[总和或几何级数](http://en.wikipedia.org/wiki/Geometric_series#Sum)
（2）请注意，相等`2^(h+1) = 2^(logN + 1)`是因为`h = logN`，我们（如您所说）有`logN`外循环迭代。

# jquery-ui - jQuery UI MultiSelect 小部件 - noneSelectedText 用于多个选择标签

> ID：13818797
> 
> 赞同：0
> 
> 时间：2012-12-11T10:55:47.310
> 
> 标签：jquery-ui, jquery-plugins

我正在使用“ [jQuery UI MultiSelect Widget](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/) ”。我有一个包含超过 15 个标签的页面，在该页面上应用了这个插件。

我希望每个选择都有不同的文本。我们可以这样设置

```
 $('#school_language').multiselect({
         noneSelectedText: 'Language'
    });
    $('#school_curriculum').multiselect({
         noneSelectedText: 'Curriculum'
    });
    $('#second_language').multiselect({
         noneSelectedText: 'Second Language'
    });
    $('#priority').multiselect({
         noneSelectedText: 'Priority Categories'
    }); 
```

如何通过编写一个函数来更改所有 15 个文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:05:47.357

我可以建议你像这样使用它：

只有一个js定义：

```
$('select[multiple=multiple]').multiselect({
     noneSelectedText: $(this).data('selected-text')
}); 
```

然后为所有选择添加属性`multiple`和`data-selected-text`：

```
<select multiple="multiple" data-selected-text="Language">
   <!-- your options here -->
</select> 
```

# asp.net - FormView 图像控件

> ID：13818798
> 
> 赞同：1
> 
> 时间：2012-12-11T10:55:51.307
> 
> 标签：asp.net, repeater, formview

嗨，我目前正在使用 C# 语言在 Asp.net 中工作。

请任何人告诉我如何在 asp:image 控件中显示存储在服务器表（数据类型图像）中的图片。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:23:12.300

You'll have to save the image in some folder on your website, and use a URL to link to that image. Since this is going to be done for every request, I'm guessing you can understand this is ***not*** a best practice.

The correct way to do this is save all images in a single directory on your website, and in the DB only store the URL for that image.

# c++ - 二叉搜索树中的findNode

> ID：13818799
> 
> 赞同：0
> 
> 时间：2012-12-11T10:55:56.393
> 
> 标签：c++, find, binary-search-tree

这看起来对吗？我的意思是我正在尝试实现删除功能。

```
Node* BST::findNode(int tofind) {
    Node* node = new Node;    
    node = root;
    while (node != NULL) {
        if (node->val == tofind) {
            return node;
        } else if (tofind < node->val) {
            node = node->left;
        } else {
            node = node->right;
        }
    }
} 
```

这是删除，它甚至还没有接近完成，但是，

```
void BST::Delete(int todelete) {

    // bool found = false;

    Node* toDelete = new Node();
    toDelete=findNode(todelete);
    if(toDelete->val!=NULL) {
            cout << toDelete->val << endl;
    }
} 
```

这会导致仅运行该分段错误，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:58:15.577

哦，等等，因为在删除中我应该这样做：

```
if(toDelete!=NULL) {
  cout << toDelete->val << endl;
} 
```

之前

```
if(toDelete->val!=NULL) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:02:19.290

主要问题`findNode()`是您永远不会返回您找到的节点。这就是你得到段错误的原因。

另外，在`deleteNode()`你应该检查是否`findNode()`已经返回`NULL`。当然，您还需要编写其余的删除逻辑。

最后，这两个`new Node`分配是不必要的并且正在泄漏内存。

# java - 检查证书是否有效

> ID：13818800
> 
> 赞同：0
> 
> 时间：2012-12-11T10:55:57.297
> 
> 标签：java, security, ssl

我有这样的java代码：

```
 URL url = new URL(endPoint);
        String encoding = Base64.encodeBase64String(this.key.getBytes());

        connection = (HttpURLConnection) url.openConnection();
        connection.setRequestMethod("POST");
        connection.setDoOutput(true); 
```

这是打开一个 ssl 连接。假设`endPoint`确实使用自签名证书并充当原始网站。是否可以在 Java 代码中防止此类事情发生？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T11:40:15.903

默认情况下，Java 中的 SSL 实现会根据包含在 Java VM 中的受信任证书颁发机构列表进行检查。除非您扩展默认信任库、在运行时指定不同的信任库或提供您自己的 a `TrustManager`and/or实现，否则`HostnameVerifier`您将无法使用自签名证书与服务器建立 SSL 连接。

*如果您在建立连接后*出于某种原因需要访问服务器证书，您可以通过以下方式获取这些证书`HttpsURLConnection`：

```
URL url = new URL("https://www.google.com");
HttpsURLConnection conn = (HttpsURLConnection) url.openConnection();
conn.connect();

for(Certificate crt : conn.getServerCertificates()) {
    System.out.println(crt);
} 
```

# c++ - 在 C++ 中删除之前检查 NULL - 好的做法？

> ID：13818803
> 
> 赞同：6
> 
> 时间：2012-12-11T10:56:05.253
> 
> 标签：c++, delete-operator

> **可能重复：**
> [是否有任何理由在删除之前检查 NULL 指针？](https://stackoverflow.com/questions/615355/is-there-any-reason-to-check-for-a-null-pointer-before-deleting)

我知道[C++ 语言保证 delete p 如果 p 等于 NULL 什么都不做](http://www.parashift.com/c++-faq/delete-handles-null.html)。但是在不同的项目、文章、示例中，我经常看到它在删除之前检查 NULL。通常采用格式

```
 if(pObj)
       delete pObj; 
```

为什么会这样？一些历史原因？我对如何正确删除对象感到完全困惑。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-11T10:59:27.897

> 为什么会这样？

无知。有些人不知道那`delete(NULL);`是什么都不做。

您无法真正检查指针是否真的有效。如果您删除两次，您将调用未定义的行为。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-11T10:57:01.920

不，这完全没有意义。delete 不会删除已经设置为空的指针！所以删除你喜欢的空指针！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T11:00:55.873

`delete`是一个运算符，它调用一个析构函数。当使用删除运算符而`NULL`没有任何反应时，与所有答案一样，检查空值是没有意义的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T11:02:41.583

这样做的另一个原因是摆脱 valgrind 警告。

# html - 页脚实际上不会粘在底部

> ID：13818806
> 
> 赞同：0
> 
> 时间：2012-12-11T10:56:20.510
> 
> 标签：html, css

我正在那里的一个页面上工作：

我是新手，在那里学习了一个教程：[http ://ryanfait.com/resources/footer-stick-to-bottom-of-page/](http://ryanfait.com/resources/footer-stick-to-bottom-of-page/)

页脚在底部，但页面的高度似乎比它应该的大，而且我的浏览器上有一个滚动条，谁能告诉我为什么？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:08:51.317

有`<footer>`一个`padding-top`应该计入盒子模型中。所以包装器的实际边距底部应该计算页脚的高度和填充。查看 html 框模型以获取更多详细信息！肯定会很有趣 :) 而且，使用 Chrome 开发者工具或 Firefox firebug 来加速你的学习过程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:09:53.227

你的链接打不开。但也许你可以做类似的事情

```
body {
  height: 100%;
  position: relative;
}
.footer {
  position:absolute;
  left: 0;
  bottom: 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T11:10:16.837

额外的高度似乎来自 #footer-container 上的 padding-top、#footer 上的边框，以及最重要的是 #masthead-container 上的边距（将其更改为 #content-container 上的 padding 似乎可以解决它）。

摆脱所有这些，消除了滚动条。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T11:22:35.440

我对你写的风格做了一些改变。只需替换为#footer 编写的代码。

```
 #footer {
    background-color: white;
    border: 1px solid #D2CECE;
    border-radius: 5px 5px 0 0;
    box-shadow: 4px 5px 3px 1px rgba(0, 0, 0, 0.2);
    clear: both;
    height: 200px;
    margin-bottom: 0;
    margin-left: 193px;
    position: fixed;
    width: 960px;
 } 
```

我已将左边距设置为 193px，您需要调整。您应该添加一个主容器 div 以包含 . 喜欢

```
 <body>
       <div id="main">
           <!-- all the markup (HTML code) -->
       </div>
  </body> 
```

因此，通过将样式应用于“#main”，您可以使所有包含中心对齐，而无需提供左右边距以使其居中。

# objective-c - 内存没有被释放

> ID：13818809
> 
> 赞同：0
> 
> 时间：2012-12-11T10:56:27.287
> 
> 标签：objective-c, cocoa, memory-management, memory-leaks, nsmutablearray

当我运行以下程序时......即使在释放所有对象后，应用程序仍持有大约 5MB 的内存......当我不添加对象以列出一切工作正常......但我不确定为什么应用程序持有内存即使在公布名单之后。

我已阅读此链接“ [NSMutableArray big memory hog](http://www.cocoabuilder.com/archive/cocoa/29905-nsmutablearray-big-memory-hog.html)吗？” 甚至通过 mikeash [MACollections](https://github.com/mikeash/MACollections)尝试使用自定义可变数组——在所有情况下......如果我将对象添加到列表中，循环中分配的内存永远不会被释放。

请给我一些建议，以了解代码流中出了什么问题。感谢您宝贵的时间和帮助。

```
@interface TestData : NSObject 
{
    NSString *strData;
}
@property (nonatomic,retain)NSString* strData;

@end

@implementation TestData

@synthesize strData;

- (void)dealloc
{
    self.strData = nil;
    [super dealloc];
}

@end

int main(int argc, char *argv[])
{
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

    NSMutableArray *list = [[NSMutableArray alloc] init];
    TestData *_object = nil;
    NSString *val = nil;
    for (long i = 0; i < 100000; i++)
    {
        _object = [[TestData alloc] init];
        val = [[NSString alloc] initWithFormat:@"%lu",_object];
        _object.strData = val;
        [val release];

        [list addObject:_object];
        [_object release];
    }

    [list release];

    [pool release];

    return NSApplicationMain(argc, (const char **)argv);
} 
```

更新：我在终端中使用了“vmmap”命令......我可以看到这样的东西......

```
 VIRTUAL   RESIDENT      DIRTY ALLOCATION      BYTES MALLOC ZONE                             SIZE     SIZE       SIZE      COUNT  ALLOCATED  % FULL
===========                          =======  =========  =========  =========  =========  ======

DefaultMallocZone_0x100005000          37.0M      5868K      2692K     8548      1210K      3% 
DispatchContinuations_0x1000cc000      4096K   48K        48K          1         32      0% 

unnamed_zone_0x100037000  0K         0K         0K          0         0K

===========                          =======  =========  =========  =========  =========  ====== 
TOTAL                                  41.0M      5916K      2740K       8549      1210K      2% 
```

所以看起来虽然对象被释放了......它仍然是应用程序内存作为未使用的空间......不确定在这种情况下可以做什么。我不确定这是一个碎片问题......还是行为。

# java - Java 多线程。如何停止线程并释放启动器？

> ID：13818811
> 
> 赞同：1
> 
> 时间：2012-12-11T10:56:29.547
> 
> 标签：java, multithreading, spring-mvc, future, callable

我有这个使用：Spring MVC (Controller + Service + ThreadPoolTask​​Executor)、Callable 和 Future。

```
@Controller
  launch-method   [invokes Service:launch-method and get result with Future]
  stop-method     [invokes Service:stop-method]

@Service [to launch async Tasks]
  launch-method   [Loop with threadPoolTaskExecutor.submit(callable)]
  stop-method     [threadPoolTaskExecutor.shutdown()] 
```

我拥有的停止事件流是：

1.  用户单击停止按钮并调用**控制器：停止方法**
2.  **控制器：停止方法**调用服务**：停止方法**
3.  ¿? 服务：**停止方法**关闭并通知**控制器：启动方法**

我需要编写第 3 步，以通知**Controller:launch-method**该过程已完成。

我不知道为什么 threadPoolTask​​Executor.shutdown() 不释放**Controller: launch-method**，它正在等待：*result = future.get();* 并且没有引发异常。

```
try {
    for (Future<String> future : sentResult) {
       result = future.get();
       ...
    }
} catch (ExecutionException e) {...}
  catch (InterruptedException e) {...}
  catch (CancellationException e) {...}
  catch (Exception e) {...} 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:02:58.807

你可以设计`observer-observable`模式。控制器将在哪里`Observer`，服务将在哪里`Observable`。一旦服务停止，它将触发`setChanged(); and notifyObservers();`通知控制器它已完成。

# iphone - 如何识别多人游戏由自动匹配启动

> ID：13818812
> 
> 赞同：1
> 
> 时间：2012-12-11T10:56:31.000
> 
> 标签：iphone, ios, ipad, game-center

如何识别多人游戏是通过自动匹配还是邀请朋友发起的？

我在比赛开始时调用了这个方法：

```
- (void)matchmakerViewController:(GKMatchmakerViewController *)viewController didFindMatch:(GKMatch *)theMatch {

    [presentingViewController dismissModalViewControllerAnimated:YES];
    self.match = theMatch;
    match.delegate = self;
    if (!matchStarted && match.expectedPlayerCount == 0) {
        NSLog(@"Ready to start match!");
        [self lookupPlayers];
    }
} 
```

基本上我想要这个（请检查这个链接） -[如何在多人游戏中同步数据（游戏中心 ios）](https://stackoverflow.com/questions/13820097/how-to-sync-data-in-multiplayer-gamegame-center-ios)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T00:22:18.377

我检查本地玩家的 playerID 是否包含在比赛的参与者列表中。我发现如果他们被邀请或自动匹配，他们不会被列出。我相信这是因为他们还没有接受比赛。

```
+ (BOOL) isLocalPlayerActiveParticipantInMatch:(GKTurnBasedMatch *)aMatch
{
    for (GKTurnBasedParticipant *participant in aMatch.participants)
    {
        if ([participant.playerID isEqualToString:[GKLocalPlayer localPlayer].playerID])
            return YES;
    }

    return NO;
} 
```

如果付款人决定参加比赛，我称之为比赛：

```
GKTurnBasedMatch acceptInviteWithCompletionHandler 
```

如果他们拒绝，我称之为比赛：

```
GKTurnBasedMatch declineInviteWithCompletionHandler 
```

# mvvm - KendoUI：将视图模型绑定到数据源更改

> ID：13818813
> 
> 赞同：3
> 
> 时间：2012-12-11T10:56:31.530
> 
> 标签：mvvm, datasource, kendo-ui

我有一个可观察的对象，它定义了一个指向绑定到网格的数据源的指针，以及一个应该返回我在数据源中声明的聚合值的自定义字段。

我想将第二个字段（“totAmount”）绑定到自定义 HTML 元素。

我不明白如何更新它的值：当我调用数据源的“read()”方法时，绑定的值不应该在接口上更新吗？它仅适用于“原始”模型字段吗？

```
=== JAVASCRIPT ===
var vm = kendo.observable({
    gridDatasource: new kendo.data.DataSource({ ... }),

    totAmount: function() {
        var ds = this.get("gridDatasource");
        var value = (ds.aggregates()) ? ds.aggregates().totAmount : 0;
        return value;
    }
});

=== HTML ===
<span data-bind="text: totAmount"></span> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:30:40.963

我之前的回答并不完全正确：它将模型更新绑定到网格更改（在每一行选择上）。最好将其绑定到数据源的“更改”事件：

```
=== JAVASCRIPT ===
var vm = kendo.observable({
    gridDatasource: new kendo.data.DataSource({ ... }),
    totAmount: 0
});

vm.gridDatasource.bind("change", function(e) {
    vm.set("totAmount", this.aggregates().totAmount);
});

=== HTML ===
<span data-bind="text: totAmount"></span> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:46:26.183

到目前为止，我找到了一个类似于我之前的帖子的解决方案（[将 HTML 元素绑定到网格选定的行/数据项](https://stackoverflow.com/questions/13802068/kendo-bind-html-elements-to-grid-selected-row-dataitem/13810789#13810789)），在绑定到数据源的网格的“更改”事件中设置值：

```
=== JAVASCRIPT ===
var vm = kendo.observable({
    gridDatasource: new kendo.data.DataSource({ ... }),
    totAmount: 0
});

$("#grid").kendoGrid({
    change: function(e) {
        vm.set("totAmount", this.dataSource.aggregates().totAmount);
    }
});

=== HTML ===
<span data-bind="text: totAmount"></span> 
```

# java - 如何从 JavaFX2 中的 FileChooser 获取选定的文件扩展名？

> ID：13818817
> 
> 赞同：4
> 
> 时间：2012-12-11T10:56:37.717
> 
> 标签：java, user-interface, javafx-2

我意识到使用 Swing 和 JFileChooser，这是一个简单的使用案例，`getFileFilter`但我似乎在 JavaFX2 中找不到任何类似的选项，因为它是 FileChooser。

问题是，在保存文件时，如果用户没有明确键入文件扩展名，我希望文件在 FileChooser 下拉框中附加当前选定的文件扩展名。

例如，在下图中，我希望将此文件另存为 text.xml。

![](../Images/18b8de8780ef33dc1150ddf7be08bb6a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T13:35:18.647

此问题已在 jaavfx-jira 中报告。您可以在此处跟踪状态[无法使用选定的扩展名过滤器保存文件名。](http://javafx-jira.kenai.com/browse/RT-18836)

我在这里复制粘贴信息以供快速参考：

> 描述：创建一个简单的程序来启动 FileChooser SaveDialog，并添加几个扩展过滤器，例如：*.txt、*.java *、.* . 运行程序，当显示保存对话框时，从过滤器中选择*.txt，输入不带扩展名的文件名，然后单击“保存”。观察要保存的文件名，没有附加扩展名“.txt”，而且似乎没有FileChooser的方法来获取选择的过滤器扩展名。不确定这是否是预期的功能，但它不方便。
> 
> 类型：功能状态：开放优先级：中等 **分辨率**：**未解决**

# c# - 在 WinForms 中，如何在 DevExpress GridControl 中创建删除按钮？

> ID：13818818
> 
> 赞同：5
> 
> 时间：2012-12-11T10:56:40.237
> 
> 标签：c#, .net, winforms, devexpress

我正在尝试在 DevExpress GridControl 中每一行的右侧创建一个删除按钮，如下所示：

![在此处输入图像描述](../Images/b7c3aa012229157e30efcc7e12730b2c.png)

我所做的是添加另一列并将其 ColumnEdit 属性设置为 RepositoryItemButtonEdit 的实例。我处理 ButtonClick 事件，以删除一行。

我可以从这段代码中确定我在哪一行：

```
myGridView.GetRow(myGridView.FocusedRowHandle); 
```

因为我不想在我的按钮上使用文本编辑器，所以我将 TextEditStyle 设置为 HideTextEditor。

默认情况下，该按钮显示一个省略号。

为了删除省略号，我调整了 RepositoryItemButtonEdit 上的 Buttons 属性。我将种类设置为字形并将图像设置为我的 X 图标。

不幸的是，这似乎只是完全删除了按钮。

有谁知道这样做的更好方法，或者在每个网格行中显示带有图像的按钮的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T11:09:14.367

我发现实际上有一个删除按钮类型。所以，我按照问题中的方式做所有事情，但我没有选择那种 Glyph，而是选择了删除，我不需要选择图像。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T14:49:55.173

我总结了我在[DevExpress 论坛](http://community.devexpress.com/forums/p/72394/246853.aspx)中发现的内容：

使用`ButtonEdit` 控件并将`TextEditStyle`属性设置为`HideTextEditor`。Repository Item 有一个`Buttons`集合，您可以通过它添加标题、图像等。

在`Buttons`集合中，将“Kind”属性更改为“Glyph”。您可以使用该`CustomRowCellEdit`事件有条件地逐个单元格地应用编辑器。确保将 Button 的`Kind`属性设置为“字形”并将该`Caption`属性设置为您想要的任何文本：

```
DevExpress.XtraEditors.Repository.RepositoryItemButtonEdit buttonEdit = 
    new DevExpress.XtraEditors.Repository.RepositoryItemButtonEdit();
buttonEdit.Buttons[0].Kind = DevExpress.XtraEditors.Controls.ButtonPredefines.Glyph;
buttonEdit.Buttons[0].Caption = "X";
buttonEdit.TextEditStyle =             
    DevExpress.XtraEditors.Controls.TextEditStyles.HideTextEditor;
e.RepositoryItem = buttonEdit; 
```

您应该处理 GridView 的`CustomRowCellEdit`事件，构造一个新的`RepositoryItemButtonEdit`并将其分配给`e.RepositoryItem property`.

让我知道这是否有效。

# javascript - 如何为具有多个项目的类设置属性值

> ID：13818821
> 
> 赞同：-2
> 
> 时间：2012-12-11T10:56:45.947
> 
> 标签：javascript

虽然这可能很简单，但我在 Web 开发方面才几个月大，我被困在这里了。我有一个页面，其中将多个图像项设置为一个类。我的意思是下面的代码

```
<img src="http://img1.gif" id="GA2" class="CHAngeR" />    
<img src="http://img1.gif" id="GA2" class="CHAngeR" /> 
```

我想执行一个功能来编辑/附加图像的“src”属性。

我尝试使用相同的 ID，但我发现 w3c 的推测相反，我也尝试了以下代码但仍然无法正常工作，我该怎么做。

```
 <!DOCTYPE html>
    <html>
       <head>
          <title>DOWNLOAD PAGE</title>
          <input type="button" value="change image" id="iMgChAnGe" onclick="changeIMG()"/>
          <div class="changer">
               <img src="http://img1.gif" id="GA1" class="CHAngeR" />
               <img src="http://img2.gif" id="GA2" class="CHAngeR" />
               <img src="http://img3.gif" id="GA3" class="CHAngeR" />
               <img src="http://img4.gif" id="GA4" class="CHAngeR" />
               <img src="http://imgl.gif" id="GA5" class="CHAngeR" />
          </div>
          <script>
             function ChangeIMG(){
                 document.getElementByClassName(CHAngeR).setAttribute("src","http://google.com/img/images/static.gif");
             } 
          </script>
      </head>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:06:05.827

手动循环图像...

```
var imgs = document.getElementsByClassName("...");
for (var i = 0; i < imgs.length; i++)
    imgs[i].src = ...; 
```

或使用 jQuery：

```
$(".class").attr("src", ...); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:12:23.033

我不认为所有浏览器（IE）都支持getElementsByClassName。话虽如此，我建议使用 JQuery 解决方案。

如果您可以使用 JQuery，请转到[此处。](https://stackoverflow.com/questions/4735342/jquery-to-loop-through-elements-with-the-same-class)

如果出于某种原因不想使用 JQuery，请转到[此处。](https://stackoverflow.com/questions/3808808/how-to-get-element-by-class-in-javascript)

# javascript - d3.js 在调整大小事件中缩放圆环图

> ID：13818823
> 
> 赞同：0
> 
> 时间：2012-12-11T10:56:47.967
> 
> 标签：javascript, d3.js, data-visualization

我用两个维度绘制了窗口宽度的图表：

```
var width = (window.innerWidth < 1280) ? 400 : 600,
height = (window.innerWidth < 1280) ? 400 : 500,
radius = Math.min(width, height) / 2;

var arc = d3.svg.arc().innerRadius(radius).outerRadius(radius - 10),
arcFinal = d3.svg.arc().innerRadius(radius - 100).outerRadius(radius - 10),
arcHover = d3.svg.arc().innerRadius(radius - 100).outerRadius(radius);

var svg = d3.select("#chart").append("svg")
.attr("width", width)
.attr("height", height)
.append("g")
.attr("id", "pie")
.attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");} 
```

在调整大小事件中更新此功能的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T11:18:27.353

好的，我通过添加：

```
...
var svg = d3.select("#chart").append("svg")
.attr("width", width)
.attr("height", height)
.attr("viewBox", "0, 0, " + width + ", " + height)
.attr("preserveAspectRatio", "xMinYMin")
... 
```

然后我更新了 resize 事件的宽度和高度

# ruby - 有没有办法将 Ruby 对象的人类可读表示转换回这个对象

> ID：13818824
> 
> 赞同：1
> 
> 时间：2012-12-11T10:56:50.633
> 
> 标签：ruby, database, string, object

想象一下这样一种情况，我们所知道的关于 Ruby 对象的唯一信息是它是人类可读的格式：

```
#<User::Class::Element:0x2fef43 @field1 = 1, @field2 = two, @field3 = [1,2,3]> 
```

任务是编写一个方法，该方法可以将该表示转换为该表示所指向的类的对象（当然，可以访问所有适当的命名空间、模块、类和方法）。例如：

```
obj = humanReadableFormat2Obj("#<User::Class::Element:0x2fef43 @field1 = 1, @field2 = \"two\", @field3 = [1,2,3]>") 
puts obj.field1      #=> "1"
puts obj.field2      #=> "two"
p obj.field3         #=> [1, 2, 3]
puts obj.class.to_s  #=> User::Class::Element 
```

PS这个任务源于几个大型数据库的同步问题。无需以二进制格式（数百 MB）将对象从一个数据库传输到另一个数据库，您可以仅传输一个脚本（几个 KB）并在另一个数据库上执行它以创建适当的对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:02:34.797

[Ox](http://ohler.com/ox/)和[Oj](http://ohler.com/oj/) gem（分别是XML 和 JSON）可以序列化为*相对*人类可读的 Ruby 对象。这可能是一个更好的解决方案，因为该`inspect`方法并不总是返回 Ruby 对象的所有属性，正如 Sigurd 在评论中提到的那样。

来自 Ox 文档的示例：

```
require 'ox'

class Sample
  attr_accessor :a, :b, :c

  def initialize(a, b, c)
    @a = a
    @b = b
    @c = c
  end
end

# Create Object
obj = Sample.new(1, "bee", ['x', :y, 7.0])
# Now dump the Object to an XML String.
xml = Ox.dump(obj)
# Convert the object back into a Sample Object.
obj2 = Ox.parse_obj(xml) 
```

# javascript - 用 XSLT 替换 Javascript 内容

> ID：13818831
> 
> 赞同：1
> 
> 时间：2012-12-11T10:57:08.630
> 
> 标签：javascript, xslt, replace

我有一个带有一些 Javascript 的 HTML 页面，我正在尝试使用 XSLT 1.0 进行解析。我想修改 Javascript 中的 URL 以使路径成为绝对路径而不是相对路径。

Javascript 代码大致如下所示：

```
<html>
    <head>
        <script>
            function login() {
                window.location = '{@myBase}/myloginpage';
            }
        </script>
    </head>

    <body>
     ...
    </body>
</html> 
```

我希望将“{@myBase}”替换为我的域。我觉得我非常偏离了方向。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
   xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
   xmlns:proxy="java:senselogic.sitevision.portlet.proxy.web.ProxyFunctions" 
   extension-element-prefixes="proxy">

   <xsl:import href="template.xsl"/>

    <xsl:template match="//script/text()">
        <xsl:variable name="mypath">
          <xsl:call-template name="string-replace-all">
            <xsl:with-param name="text"><xsl:value-of select="{@myBase}"/></xsl:with-param>
            <xsl:with-param name="replace">{@myBase}</xsl:with-param>
            <xsl:with-param name="by">http://www.mydomain.com</xsl:with-param>
          </xsl:call-template>
        </xsl:variable>
    </xsl:template>    

    <xsl:template name="string-replace-all">
      <xsl:param name="text" />
      <xsl:param name="replace" />
      <xsl:param name="by" />
      <xsl:choose>
        <xsl:when test="contains($text, $replace)">
          <xsl:value-of select="substring-before($text,$replace)" />
          <xsl:value-of select="$by" />
          <xsl:call-template name="string-replace-all">
            <xsl:with-param name="text"
            select="substring-after($text,$replace)" />
            <xsl:with-param name="replace" select="$replace" />
            <xsl:with-param name="by" select="$by" />
          </xsl:call-template>
        </xsl:when>
        <xsl:otherwise>
          <xsl:value-of select="$text" />
        </xsl:otherwise>
      </xsl:choose>
    </xsl:template>    
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T11:07:32.987

其实，你离得不远了。

首先，您正在定义一个变量`<xsl:variable name="mypath">`来保存**调用模板**的结果，但实际上并未对其进行任何操作。我认为您根本不需要将其包装在变量声明中。

其次，您没有将正确的值传递给**text**参数。而不是这样做

```
<xsl:with-param name="text"><xsl:value-of select="{@myBase}"/></xsl:with-param> 
```

做这个

```
<xsl:with-param name="text"><xsl:value-of select="."/></xsl:with-param> 
```

或者更好的是，这个：

```
<xsl:with-param name="text" select="."/> 
```

试试这个 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:proxy="java:senselogic.sitevision.portlet.proxy.web.ProxyFunctions" extension-element-prefixes="proxy">
    <xsl:param name="domain" select="'http://www.mydomain.com'"/>

    <xsl:template match="//script/text()">
        <xsl:call-template name="string-replace-all">
            <xsl:with-param name="text" select="."/>
            <xsl:with-param name="replace" select="'{@myBase}'" />
            <xsl:with-param name="by" select="$domain"/>
        </xsl:call-template>
    </xsl:template>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template name="string-replace-all">
        <xsl:param name="text"/>
        <xsl:param name="replace"/>
        <xsl:param name="by"/>
        <xsl:choose>
            <xsl:when test="contains($text, $replace)">
                <xsl:value-of select="substring-before($text,$replace)"/>
                <xsl:value-of select="$by"/>
                <xsl:call-template name="string-replace-all">
                    <xsl:with-param name="text" select="substring-after($text,$replace)"/>
                    <xsl:with-param name="replace" select="$replace"/>
                    <xsl:with-param name="by" select="$by"/>
                </xsl:call-template>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="$text"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>
</xsl:stylesheet> 
```

（请注意，我还将您的域设置为参数）

当应用于您的 XHTML 时，将输出以下内容

```
<html>
<head>
<META http-equiv="Content-Type" content="text/html">
<script>
            function login() {
                window.location = 'http://www.mydomain.com/myloginpage';
            }
        </script></head>
<body>
     ...
    </body>
</html> 
```

# jquery - html 源代码是否可以像 jQuery 一样成为 YUI 中的选择器？通过 YUI 查找标题和元描述

> ID：13818835
> 
> 赞同：0
> 
> 时间：2012-12-11T10:57:14.887
> 
> 标签：jquery, yui

我是 YUI3 的新手，正在尝试一些类似于 jquery 的东西，我是一个 jQuery 人，不知道
如何在 YUI 中实现相同的效果，我在 jQuery 中正在做下面的事情，

```
<script language="javascript" src="http://code.jquery.com/jquery-latest.js" >
</script>
 <script language="javascript">
$(function(){
    var data = '<html xmlns="http://www.w3.org/1999/xhtml"><head>'+
               '<title>This is title</title> <meta name="description" content="This is description" /> </head><body></body></html>';
    var title=(/<title>(.*?)<\/title>/m).exec(data)[1];
    console.log(title); //output: This is title
    var dom_list = $(data).find("meta").prevObject;
    $.each(dom_list, function(i,v){
        var c = $(v).attr('content');
        var n = $(v).attr('name');
        if(n!=undefined){
            if(n.toLowerCase()=='description'){
                desc = c;
            }
        }
    }); 
    console.log(desc); // output : This is description
});
</script> 
```

问题：由于数据变量是 html 源代码，它是 jquery 中的选择器，我
可以在其中找到元标记，那么，我可以在 YUI 中使用相同的标记吗？

任何建议都将是可观的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:07:11.217

```
var data = '<html xmlns="http://www.w3.org/1999/xhtml"><head>' + '<title>This is title</title> <meta name="description" content="This is description" /> </head><body></body></html>';
var title = (/<title>(.*?)<\/title>/m).exec(data)[1];
console.log(title); //output: This is title

var metaList = Y.Node.create(data).all("meta");
metaList.each(function(node) {
    var c = node.get('content'),
        n = node.get('name');
    if (n !== null) {
        if (n.toLowerCase() === 'description') {
            desc = c;
        }
    }
});
console.log(desc); // output : This is description 
```

可以在这里查看一个可运行的例子：http: [//jsfiddle.net/brianjmiller/LTKs6/](http://jsfiddle.net/brianjmiller/LTKs6/)

您可能还对[http://jsrosettastone.com](http://jsrosettastone.com)感兴趣，它显示了 YUI 和 jQuery 之间的常见翻译。

# sql - 如何检查默认值约束是否存在？

> ID：13818837
> 
> 赞同：41
> 
> 时间：2012-12-11T10:57:23.340
> 
> 标签：sql, sql-server-2008

我正在使用 SQL Server 2008。我需要查找默认值约束是否不存在然后创建它。这是我尝试过的。

```
IF (NOT EXISTS(SELECT * FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS WHERE CONSTRAINT_NAME ='MyConstraint'))
BEGIN
    ALTER TABLE [XX] ADD  CONSTRAINT [MyConstraint]  DEFAULT ((-1)) FOR [XXXX]
END
GO 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-12-11T11:04:25.123

```
if not exists (
    select *
      from sys.all_columns c
      join sys.tables t on t.object_id = c.object_id
      join sys.schemas s on s.schema_id = t.schema_id
      join sys.default_constraints d on c.default_object_id = d.object_id
    where t.name = 'table'
      and c.name = 'column'
      and s.name = 'schema')
  .... 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2015-11-18T18:44:41.880

我发现这更容易：

```
IF OBJECT_ID('SchemaName.MyConstraint', 'D') IS NULL
BEGIN
    -- create it here
END 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-11-06T22:43:03.127

I was a bit puzzled as to why this simple task was so complicated. In my case, I don't have constraint names - only table and column names. I want to check if they already have a default before trying to add one.

After a bit more digging, I came up with this:

```
IF (SELECT Column_Default FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'MY_TABLE' AND COLUMN_NAME = 'MY_COLUMN') is NULL
BEGIN
    ALTER TABLE [dbo].[MY_TABLE]
    ADD DEFAULT ('') FOR [MY_COLUMN]
END
GO 
```

I have to implement this in a ginormous boilerplate script, so the shorter the better.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-03-14T09:46:11.377

```
if not exists(select 1 from sys.default_constraints where name = 'SchemaName.MyConstraint')
begin
  -- create it here
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-27T20:07:28.117

我知道我来晚了，但我是 OBJECTPROPERTY 的忠实粉丝。如果默认值尚不存在，以下是如何在列上设置默认值 1。

```
IF (OBJECTPROPERTY(OBJECT_ID('My_constraint_name'),'CnstIsColumn') IS NULL
ALTER TABLE Mytable ADD  CONSTRAINT [MY_constraint_name] DEFAULT ((1)) FOR [My_column_name] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-04T08:42:36.377

搜索存储数据库默认 costraints 的系统表，**不带架构名称**：

```
IF EXISTS(SELECT 1 FROM sys.default_constraints WHERE [name] = 'MyConstraint')
    print 'Costraint exists!';
ELSE
    print 'Costraint doesn''t exist!'; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-13T14:45:31.437

我过去使用过以下内容：

```
DECLARE @default sysname
SELECT @default = object_name( cdefault ) FROM syscolumns WHERE id = object_id( 'DBO.TABLE' ) AND name = 'COLUMN'
IF ( not @default is null )
BEGIN
  ...
END 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-12-27T11:18:10.950

以下适用于我在 SQL Server 2016 上。

假设我有一个名为 MY_TABLE 的表和一个列 MY_COLIUMN。我想在需要添加约束的 MY_COLIUMN 上添加一个约束（默认为 '-1' ）。

```
/* Test for the specific column */
IF EXISTS (select 1 from sys.all_columns c where c.object_id= OBJECT_ID(N'MY_TABLE') and c.name='MY_COLIUMN')
BEGIN
  /* Add default if not exits */
  IF NOT EXISTS (
      select 1 from sys.default_constraints c where c.object_id = 
      (
        select default_object_id from sys.all_columns c where c.object_id =  OBJECT_ID(N'MY_TABLE') and c.name='MY_COLIUMN'
        )
     )
  BEGIN
  ALTER TABLE MY_TABLE
    ADD DEFAULT '-1' FOR MY_COLIUMN;
  END
END
GO 
```

# jquery - Jquery动态按钮：如何按类绑定到现有的点击事件

> ID：13818839
> 
> 赞同：2
> 
> 时间：2012-12-11T10:57:24.017
> 
> 标签：jquery

我有一个由 jquery 就绪范围内的类选择器触发的单击事件：

```
 $(".testBtn").click(function()
    {
        alert("This Works");      
    }); 
```

这适用于静态按钮，但对于单击具有“addRowBtn”id 的按钮时添加的动态按钮却不起作用。我猜这与在注册事件后创建按钮有关，但新按钮仍然具有“testBtn”类，因此它应该可以工作是有道理的。知道我在做什么错以及如何使动态按钮注册到类选择器单击事件吗？

这是整个代码，您可以复制并粘贴到 html 中，单击“添加按钮”并尝试单击添加的按钮。你会看到什么都没有发生。

```
<html>
<head>
<script src='http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js'></script>
<script src='http://ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js'></script>
<script>
$(function()
{    
    $(".addRowBtn").click(function()
    {
        $("#mainTable tr:last").after("<tr><td><button class='testBtn'>NotWorking</button></td></tr>");           
    });

    $(".testBtn").click(function()
    {
        alert("This Works");      
    });
});
</script>
</head>
<body>

<table id="mainTable">
<button class="addRowBtn">Add button</button>
<tr><th>Testing</th></tr>
<tr><td><button class='testBtn'>Working</button></td></tr>
</table>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-11T11:00:53.847

这里的标准答案是*事件委托*。挂钩`click`所有这些按钮的父级，并要求 jQuery 仅在单击的实际元素与选择器匹配时通知您，如下所示[`delegate`](http://api.jquery.com/delegate/)：

```
$("#mainTable").delegate(".testBtn", "click", function(e) {
    // ...
}); 
```

...或者像这样在 jQuery 1.7+ 中使用超重载[`on`](http://api.jquery.com/on)：

```
$("#mainTable").on("click", ".testBtn", function(e) {
    // ...
}); 
```

注意参数顺序的不同。我更喜欢`delegate`它的明确性。

**[实例](http://jsbin.com/icayux/1)| [来源](http://jsbin.com/icayux/1/edit)**

在任何一种情况下，jQuery 都会挂钩`click`，`#mainTable`但是当点击发生时，只有`.testBtn`在被点击的元素和`#mainTable`. 它将调用处理程序，就好像它已与`.testBtn`元素挂钩一样。

请注意，`.addRowBtn`如果您愿意，也可以为您做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:01:41.160

使用 jquery 的委托函数将事件处理程序应用于现在和将来的所有实例 [http://api.jquery.com/delegate/](http://api.jquery.com/delegate/)

# php - php jquery在while fetch_array中选择特定的复选框

> ID：13818841
> 
> 赞同：0
> 
> 时间：2012-12-11T10:57:33.913
> 
> 标签：php, jquery, css, checkbox

我在选择特定复选框并将其 div 的高亮 css 放入 mysql_fetch_array 时遇到问题

这是我的代码

```
$count=1;
$query = mysql_query('SELECT * FROM thread');
while($row = mysql_fetch_array($query))
{
  echo "<div class='row".$count."'><input type='checkebox' class='chk_box".$count."'> ".$row['title']."</div>";
  $count++; 
}

<script>
 var count= "<?php echo $count?>";
 for(var y=1;y<=count;y++){ 
$('.chk_box'+y).click(function() {
  if(this.checked) {
    $('.row'+y).addClass('backcolor');
  }
  else{
    $('.row'+y).removeClass('backcolor');
  }
 });
        }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:02:22.017

修正了 som 拼写错误，添加了 DOM 就绪功能，并稍微更改了 jQuery，试试看？

```
$count=1;
$query = mysql_query('SELECT * FROM thread');
while($row = mysql_fetch_array($query)) {
   echo "<div class='row".$count."'><input type='checkbox' class='chk_box".$count."'> ".$row['title']."</div>";
   $count++; 
}

<script type="text/javascript">
$(function() {
    $('[class^="chk_box"]').on('click', function() {
        $(this).closest('div').toggleClass('backcolor', this.checked);
    });
});
</script>​​​​​​​​​​ 
```

作为旁注，在 for 循环中附加事件处理程序通常不是一个好主意。

# django - 使用主干解析本地主机休息

> ID：13818842
> 
> 赞同：1
> 
> 时间：2012-12-11T10:57:45.830
> 
> 标签：django, rest, backbone.js

我正在使用 Django Rest Framework 测试一个 Rest 服务器。通过遵循 Django Rest 网站的 tut，我成功生成了一个适当的 API。但是当我尝试使用backbone.js 与该服务器进行本地通信时，它似乎无法一起通信。

服务器放置在地址：`http://localhost:8080/users/` 客户端：`http://localhost/client`

这是客户端中的集合和视图

```
 var Users = Backbone.Collection.extend({
        url: 'http://localhost:8080/apis/',
    }); 
```

解析后的网络显示**状态：取消**和**类型：挂起**

我怀疑端口不同导致了错误。任何人都可以指出正确的方法吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T11:20:33.727

由于同源策略要求，浏览器不允许您从 to 发出 POST/PUT ajax`localhost(:80)`请求`localhost:8080`。为了让浏览器认为两个地址具有相同的来源，它们必须具有相同的协议 (http/https)、域名 (localhost) 和端口号。

您可以在 localhost:80 处配置 Web 服务器，以将请求代理到 localhost:8080。大多数 Web 服务器通过简单的配置更改即可支持此功能。例如，如果您使用 apache，请参阅[文档](http://httpd.apache.org/docs/2.2/vhosts/examples.html)。

示例 Apache 代理配置：

```
ProxyPass /api http://localhost:8080/
ProxyPassReverse /api http://localhost:8080/ 
```

`localhost:8080/users`在此之后，您可以通过以下方式访问地址`localhost/api/users`：

```
var Users = Backbone.Collection.extend({
    url: '/api/users',
}); 
```

# opencl - 在 OpenCL 内核中更改数组的大小

> ID：13818843
> 
> 赞同：0
> 
> 时间：2012-12-11T10:57:46.693
> 
> 标签：opencl

我希望有人可以帮助我。

我需要使用这样的方法将表示矩阵的长数组传递给 opencl 内核：

```
memObjects[2] = clCreateBuffer(context, CL_MEM_READ_WRITE | CL_MEM_COPY_HOST_PTR,
                               sizeof(double) * dets_numel, dets, NULL); 
```

在内核内部，我想根据某些条件删除矩阵的一些行，然后使用以下内容将其读回主机：

```
errNum = clEnqueueReadBuffer(commandQueue, memObjects[2], CL_TRUE, 0,
                             dims1[0] * dims1[1] * sizeof(double), dets,
                             0, NULL, NULL); 
```

有没有办法让程序的主机部分知道数组（矩阵）的确切大小，而无需执行另一个内核来计算大小并将结果从缓冲区读取回主机？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:06:28.167

也许有专门针对您的问题的解决方法，但总的来说 - 不。您要么隐式地找到新大小，要么回读显式值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-23T15:12:05.393

我认为您无法更改存储的设备内存的大小，但您可以只写入其中的一部分并将该部分读回主机：

*   对于第一部分，您应该根据需要在内核上进行一些不同的映射。
*   尝试使用`clEnqueueReadBufferRect()`第二部分的功能。

# excel - 循环遍历行和列以满足条件

> ID：13818844
> 
> 赞同：-2
> 
> 时间：2012-12-11T10:57:53.950
> 
> 标签：excel, vba

如果有人可以帮助我解决这个问题，我将非常感激......

我想要一个 excel 宏，如果在 sheet1 的单元格 b3 中满足展位条件，它将通过 sheet2 的第一行和第一列返回值。条件将在 sheet1 上指定；单元格 b1 将包含应搜索 sheet2 中的行的条件，单元格 b2 将包含应搜索 sheet2 中的列的条件。结果应复制到 sheet1 的单元格 b3 中。

提前致谢

添加..............

我有这个子程序，它遍历行并查找条件 1（strDate），但我只能设法做到这一点，列是固定的。我应该再添加一个计数器，它会通过列以满足条件 2（strProduct），但我没有

```
 Sub LookUpValuesRCC2()
'
Dim shtData     As Worksheet    ' Sheet containing data 
Dim shtOutput   As Worksheet    ' Output Sheet 
Dim strDate     As String       ' Date - condition 1
Dim strProduct  As String       ' Product - condition 2   
Dim i           As Integer      ' Counter in shtData Sheet
Dim j           As Integer      ' Counter in shtOutput Sheet
'
Set shtData = Worksheets("sheet2")
Set shtOutput = Worksheets("sheet1")
'
' Loop through "Data" Sheet Rows
For i = 1 To 1000

    strDate = shtData.Cells(i, 1)
    '
    ' Loop through dates in "Output" Sheet
    ' if date match then vrite values
    For j = 1 To shtOutput.Cells(Rows.Count, 14).End(xlUp).Row
        If shtOutput.Cells(j, 14) = strDate Then
            shtOutput.Cells(j, 2) = shtData.Cells(i, 18)

        End If
    Next j
Next i

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:08:52.940

首先欢迎来到SO。其次，不是 100% 清楚你的目标是什么，因为你的代码与你想要的描述不完全匹配，或者在我看来没有这样做。

我已经根据您的描述编写了以下代码，因为您拥有的代码没有得到您想要的，所以我假设它无论如何都需要修改。

如果这不满足您的要求，请发表评论。

```
Sub LookUpValuesRCC2()

Dim shtData     As Worksheet    ' Sheet containing data
Dim shtOutput   As Worksheet    ' Output Sheet
Dim strDate     As Date       ' Date - condition 1
Dim strProduct  As String       ' Product - condition 2
Dim strResult As String         'result to print

Dim rngFound As range, rngFoundAgain As range

Set shtData = Worksheets("sheet2")
Set shtOutput = Worksheets("sheet1")

strDate = shtOutput.range("B1").Value
strProduct = shtOutput.range("B2").Value

strResult = "Nothing Found"

With shData

    'first look down the first column for the date
    Set rngFound = .Columns(1).Find(strDate, lookat:=xlWhole)

    If Not rngFound Is Nothing Then

        'if that is found, look for the product in the row with the date
        Set rngFoundAgain = rngFound.EntireRow.Find(strProduct, lookat:=xlWhole)

        If Not rngFoundAgain Is Nothing Then strResult = rngFoundAgain.Value

    End If

End With

shtData.range("B3") = strResult

End Sub 
```

# sql - 清理 SQL 中的脏数据

> ID：13818845
> 
> 赞同：0
> 
> 时间：2012-12-11T10:57:55.330
> 
> 标签：sql, sql-server, date

在数据库中数据是脏的，“日期”是数据库保存为字符串并以不同的格式保存。

我想清理数据库并将其放入一个新数据库中，其中日期为 DATE sql 格式。

但问题是脏日期中的日期格式不同，例如

```
14 sept 2012
14 SEPTEMBER 2012
14th sept 2012
14th sept 12
14 sept 12
etc 
```

如何将每个日期转换为单个 sql DATE 格式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T12:25:15.397

假设所有`date are later than or year 2000`and `two digits for date`，`at least 3 letters for month`试试这个。[SQL小提琴在这里](http://sqlfiddle.com/#!3/007c4/15)

```
SELECT CONVERT (DATE, '20' + right(mydate,2)+
                      CASE substring(mydate,charindex(' ', mydate,0)+ 1,3)
                           when 'jan' then '01'
                           when 'feb' then '02'
                           when 'mar' then '03'
                           when 'apr' then '04'
                           when 'may' then '05'
                           when 'jun' then '06'
                           when 'jul' then '07'
                           when 'aug' then '08'
                           when 'sep' then '09'
                           when 'oct' then '10'
                           when 'nov' then '11'
                           when 'dec' then '12'
                           else 'error' end +
                      left(mydate,2))
FROM t 
```

**注意：**解决方案基于给定的数据样本

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T12:08:38.597

尝试这个：

```
create table tmp_date(col1 varchar(100));

insert into tmp_date
VALUES('14 sept 2012'),('14 SEPTEMBER 2012'),('14th sept 2012'),('14th sept 12'),('14 sept 12')

select convert(datetime,left(col1,2)+'-'+lower(SUBSTRING(col1,CHARINDEX(' ',col1,1)+1,3))+'-'+ltrim(rtrim(reverse(LEFT(REVERSE(col1),CHARINDEX(' ',REVERSE(col1),1)))))) from tmp_date 
```

# debugging - Visual Studio 2012 忽略符号位置

> ID：13818850
> 
> 赞同：11
> 
> 时间：2012-12-11T10:58:20.530
> 
> 标签：debugging, visual-studio-2012

我已禁用“Microsoft 符号服务器”并添加了从[http://referencesource.microsoft.com/](http://referencesource.microsoft.com/)`W:\Debug\RefSrc\Symbols`下载的 .NET 4.5 符号 ( ) 的路径。

不幸的是，当我强制加载符号时，例如在 mscorlib.dll 上，Visual Studio 会忽略此文件夹并继续从符号服务器下载符号文件。它们最终出现在 中`W:\Debug\SymbolsCache\MicrosoftPublicSymbols`，并且与 中的完全相同`RefSrc`。

有其他人看到这种行为吗？

我的调试设置：

```
[ ] Enable Just my code
[ ] Enable .NET framework source stepping
[ ] Enable source server support 
```

[因此](https://stackoverflow.com/questions/3817223/disable-vs-downloading-public-symbols)，我不得不禁用“.NET 框架源步进” 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T15:58:13.763

不知道你在 VS 2012 中是如何做到的，因为我从未尝试过，现在我没有 VS 2012，但我在 VS 2010 中的做法如下：

1.  调试 - 从主菜单
2.  选项和设置
3.  调试 -> 常规
4.  选中 Enable .NET Framework Source Stepping 并取消选中 Enable Just My Code
5.  转到调试-> 符号
6.  为“在此目录中缓存符号”选择一个位置
7.  检查 Microsoft 符号服务器
8.  好的
9.  在调试模式下启动您的应用程序
10.  转到 Debug 菜单项并选择 Windows->Modules
11.  按 F11 进入 Microsoft .NET Framework 代码（公开的，因为据我所知并非全部都是）

希望这对您有所帮助。我会禁用仅启用我的代码。另外，如果我没记错的话，可以在打开“模块”窗口时选择从何处加载符号，方法是右键单击要为其加载源的项目。如果 pdb 文件与二进制文件不对应，如果版本不同，它将不会加载符号。

# plugins - 在 CMake ( linux ) 中添加外部库

> ID：13818851
> 
> 赞同：2
> 
> 时间：2012-12-11T10:58:23.743
> 
> 标签：plugins, cmake, npapi, clutter

在 Cmake 中添加我的外部 .so 的简单过程是什么。我想知道需要添加的确切位置。以及包含目录路径。请提出最简单的方法。我是 CMake 的新手。

假设我的外部 .so 文件是 libclutter-1.0.so，它位于 bin/res 文件夹中。

请告诉我如何将它添加到 CMake 中？

# c# - Sharepoint 开发部署问题

> ID：13818853
> 
> 赞同：2
> 
> 时间：2012-12-11T10:58:26.787
> 
> 标签：c#, sharepoint, visual-studio-2012, sharepoint-2013

尝试部署 Visual Studio 生成的空白 Sharepoint 项目时出现以下错误。

> 错误 1 ​​部署步骤“撤回解决方案”中发生错误：无法连接到 SharePoint 网站：`http://srv-sharepoint:35018/`。确保这是一个有效的 URL，并且 SharePoint 网站正在本地计算机上运行。如果您将此项目移至新计算机，或者如果 SharePoint 网站的 URL 自您创建项目后发生更改，请更新项目的网站 URL 属性。

我设置了一个新应用程序，所以现在有这 3 个：（名称、URL、端口）

> 共享点 - 80 `http://srv-sharepoint/` 80
> 
> SharePoint 管理中心 v4 `http://srv-sharepoint:32152/` 32152
> 
> SharePoint - 测试 `http://srv-sharepoint:35018/` 35018

一切都在服务器上。我的项目网址是`http://srv-sharepoint:35018/`

当我将其更改为管理端口时，它“运行”但只是加载了管理面板。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-27T11:12:13.960

将当前用户添加到具有所有者角色（[更多](http://mushannak.blogspot.ru/2013/02/error-occurred-in-deployment-step.html#sthash.ODKzDKXi.dpuf)）的 Web 内容数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T15:44:23.733

您是否在网络的 DNS 或机器的主机文件中设置了主机名（“srv-sharepoint”）？

要将本地开发环境设置为使用“srv-sharepoint”主机名，您需要将主机名添加到开发机器的主机文件中。

该文件位于“C:\Windows\System32\drivers\etc\hosts”，您需要添加一个类似“127.0.0.1 srv-sharepoint”的条目。请注意，这需要管理权限。

您可能还必须禁用环回检查，老实说，我不记得是否有必要这样做。请参阅[此链接](http://blogs.technet.com/b/sharepoint_foxhole/archive/2010/06/21/disableloopbackcheck-lets-do-it-the-right-way.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-24T01:42:04.437

您的网站网址可能在解决方案中不正确，请按以下方式检查。1）选择项目，按f4，解决方案的属性将打开。2）检查项目属性中的部署url。3）根据本地网址更新网址。4) 保存、重建和部署。

它应该工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-09T11:48:27.720

1.检查解决方案属性中的网址是否有效。
（或）
2\. 确认**“Sharepoint 定时器服务”**的状态为激活/运行。
（或）
3\. 可能是由于之前部署同一解决方案的过程中出现的错误。所以去**中央管理员**->**系统设置**->**管理农场解决方案**。找出解决方案，打开它并手动收回解决方案。收回完成后，将其取出。然后再次尝试以管理员身份使用您的 IDE、visual studio 部署它。

# geolocation - 如何按国家/地区使用 twitter API 进行搜索？

> ID：13818856
> 
> 赞同：1
> 
> 时间：2012-12-11T10:58:31.297
> 
> 标签：geolocation, twitter

理想情况下，我希望能够按国家/地区搜索推文，但`search/tweets`端点仅支持格式`"latitude,longitude,radius"`与流式端点不同的地理编码，您可以设置边界框。

**您如何最好地按国家/地区搜索？**

作为一个简单的解决方案，我考虑过计算边界框的中心以及保持在边界框中的最小半径。

# php - 我如何在我的代码中使用 Ajax 和 Jquery

> ID：13818868
> 
> 赞同：0
> 
> 时间：2012-12-11T10:59:04.327
> 
> 标签：php, jquery, ajax, wordpress

我对 Ajax 和 jquery 很陌生。我已经在这里发布了我的问题

[我如何将 ajax 与 javascript 函数一起使用，](https://stackoverflow.com/questions/13814066/how-can-i-use-ajax-with-javascript-function/13814122#comment19012091_13814122) 但我不清楚，所以我粘贴了我的所有代码。

我正在使用以下 javascript 函数从列表中获取用户从列表中选择的值，并将此值传递给 sql 查询以显示产品。

我正在尝试仅重新加载产品。

但是每次重新加载页面时都使用此功能。我正在尝试使用这个函数来使用 ajax。我怎样才能使用这个需要语法的 ajax。

在这 3 件事中，重新加载我的整个页面是 1）搜索表单 2）按排序 3）在页面上查看（限制）

```
 <?php

/*

Template Name:Wheel

*/
?>
<?php get_header(); ?>
<script type="text/javascript" language="javascript">
function pagelim(index){
var page_lim=$('#page_num li').get(index).id; 
$("#main-content-wrap").load("<?php echo get_option('head'); ?>"+'?wheel&limit=' + page_lim);
}
</script>

<script type="text/javascript" language="javascript">
function dateby(index){
var date_by=$('#sort-by-date a').get(index).id; 
var cls=document.getElementById(date_by).className;
if(date_by=="ASC")
{
   date_by="DESC";

}
else
{
   date_by="ASC";
}
self.location="<?php echo get_option('head'); ?>"+'?wheel&sort=' + date_by ;
}
</script>

<script type="text/javascript" language="javascript">
        onLoad(){
            //search-option_form.removeClass('jqtransformdone');
        }
</script>

<?php
$sort_by=$_GET['sort'];
if($sort_by=="")
{
  $sort_by="ASC";
}
else
{
$sort_by=="DESC";
}
$page = (get_query_var('page')) ? get_query_var('page') : 1;

$lim=$_GET['limit'];
if($lim=="")
    $limit = 1;
else
    $limit =$lim;

$offset = ( $page - 1 ) * $limit;          
if(isset($_POST['searchsubmit']))
{   
    $i=1;
    $search_query="SELECT * FROM wp_products WHERE 1";
    if($_POST['rim_size']!=0)
    {$search_query=$search_query." AND rim='".$_POST['rim_size']."'"." ";}

    if($_POST['studs']!=0)
    {$search_query=$search_query." AND studs='".$_POST['studs']."'"." ";}

    if($_POST['miles']!=0)
    {
        $value=$_POST['miles']-5000;
        $search_query=$search_query." AND miles BETWEEN $value AND ". $_POST['miles']." ";
    }

    if(($_POST['min_price']!=0)&&($_POST['max_price']!=0))
    { 
        $search_query=$search_query." AND "."price BETWEEN ". $_POST['max_price']." AND ".$_POST['min_price']." ";
    }

    $search_query=$search_query." LIMIT $offset,$limit";
    $data=$wpdb->get_results($search_query);
}//if ends
else{$data = $wpdb->get_results("select * from wp_products order by product_id  $sort_by
                                          LIMIT $offset,$limit ");}
?>

    <div class="main noborder" >
    <div id="main-content-wrap">
      <!-- - - - - - - - - - - - - - - Container - - - - - - - - - - - - - -
                        - - -->
      <section class="container sbr clearfix left-section">
        <!-- - - - - - - - - - - - - - - Content - - - - - - - - - - - - - - -
                            - --> 
```

//这里是搜索框

```
 <div class="widget_custom_search">
          <h3 class="widget-title"><span>Search</span> Filters</h3>
         <form method="post" id="search-option-form" class="form-panel">
         <fieldset>
        <label>Rim Size</label>
        <select name="rim_size" class="width-190">
        <option value="0" >Select</option>
        <option value="15" <?php if($_POST['rim_size']=="15") { ?> selected="selected" <?php } ?>>15 Inch</option>
        <option value="16" <?php if($_POST['rim_size']=="16") { ?> selected="selected" <?php } ?>>16 Inch</option>
        <option value="17" <?php if($_POST['rim_size']=="17") { ?> selected="selected" <?php } ?>>17 Inch</option>
        <option value="18" <?php if($_POST['rim_size']=="18") { ?> selected="selected" <?php } ?>>18 Inch</option>
        <option value="19" <?php if($_POST['rim_size']=="19") { ?> selected="selected" <?php } ?>>19 Inch</option>
       </select>
        </fieldset>
        <fieldset>
        <label>No. of Studs</label>
        <select name="studs" class="width-190">
        <option value="0">Select</option>
        <option value="3" <?php if($_POST['studs']=="3") { ?> selected="selected" <?php } ?> >3</option>
        <option value="4" <?php if($_POST['studs']=="4") { ?> selected="selected" <?php } ?> >4</option>
                </select>
        </fieldset>
        <fieldset>
        <span  class="w110p floatLeft display-block">
        <label>Min Price</label>
        <select name="min_price"   class="floatLeft">
            <option value="0">Select</option>
            <option value="1000" <?php if($_POST['min_price']=="1000") { ?> selected="selected" <?php } ?> >1000</option>
            <option value="2000" <?php if($_POST['min_price']=="2000") { ?> selected="selected" <?php } ?>>2000</option>
            ['min_price']=="6000") { ?> selected="selected" <?php } ?>>6000</option>
        </select>
        </span> <span class="w110p floatLeft display-block">
        <label>Max Price</label>
        <select name="max_price" class="floatLeft">
            <option value="0">Select</option>
            <option value="1000" <?php if($_POST['max_price']=="1000") { ?> selected="selected" <?php } ?>>1000</option>
            <option value="2000" <?php if($_POST['max_price']=="2000") { ?> selected="selected" <?php } ?>>2000</option>
            <option value="3000" <?php if($_POST['max_price']=="3000") { ?> selected="selected" <?php } ?>>3000</option>
                               </select>
        </span>
        </fieldset>
        <fieldset>
       <label>Miles</label>
        <select name="miles"  class="width-190">
            <option value="0">Select</option>
            <option value="5000" <?php if($_POST['miles']=="5000") { ?> selected="selected" <?php } ?>>5000</option>
            <option value="10000" <?php if($_POST['miles']=="10000") { ?> selected="selected" <?php } ?>>10000</option>
                        <option value="60000" <?php if($_POST['miles']=="60000") { ?> selected="selected" <?php } ?>>60000</option>
            <option value="65000" <?php if($_POST['miles']=="65000") { ?> selected="selected" <?php } ?>>65000</option>
            <option value="70000" <?php if($_POST['miles']=="70000") { ?> selected="selected" <?php } ?>>70000</option>
                    </select>
        </fieldset>
        <fieldset class="top-padding-30">
         <button name="searchsubmit" type="submit" id="searchsubmit" class="common-button green-button-bg w90p floaL mLeft5">SEARCH</button>
        </fieldset>
      </form>
          <!--/ .form-panel-->
        </div>
      </section>
      <!--/.container -->
      <!-- - - - - - - - - - - - - end Container - - - - - - - - - - - - - -
                        - - -->
      <section class="container clearfix right-section">
        <div id="pagination-sort-lniks">
            <?php
           $total=$wpdb->get_results("select * from wp_products ");

            $pages = COUNT($total);
            $pages = ceil($pages / $limit);
            $querystring = "";
            foreach ($_GET as $key => $value) {
                if ($key != "page") $querystring .= "$key=$value&amp;";
            }

            // Pagination
            ?>
             <?php if($sort_by=="ASC")
                      $class="up-arrow";
                     else
                       $class="down-arrow"; 
```

//这里选择排序依据并在页面上查看？>

```
 <div class="sort-links"><span class="by-date" id="sort-by-date">Sort by: <a  href="#" id='<?php _e($sort_by)?>' class='<?php _e($class)?>' onclick="dateby($(this).index())" >Date</a>
          </span> 
           <span id="view-on-page">View on Page: <a href="#" class="down-arrow"><?php if($lim=="") { _e($limit); } else { _e($lim); }  ?></a>
          <ul id="page_num">
              <li id="5"  onclick="pagelim($(this).index())"><a href="#">5</a></li>
              <li id="10" onclick="pagelim($(this).index())"><a href="#">10</a></li>
              <li id="15" onclick="pagelim($(this).index())"><a href="#">15</a></li>
          </ul>
        </span> 
     </div>

          <div class="pagination">
           <?php
          if( $pages > 1)
          {
            $range=1;
            $showitems = ($range * 2)+1;  
            $page1=$page;
            $prev=$page1-1;
            if($page > 1)
            {
                echo "<a  class=\"page gradient\" ";
                echo "href=\"?{$querystring}page=$prev";
                echo "\">Previous</a> ";
            }
            for ($i = 1; $i <= $pages; $i++)
               {
                    if (1 != $pages &&( !($i >= $page+$range+1 || $i <= $page-$range-1) || $pages <= $showitems ))
                         {
                            if($i == $page) 
                            { 
                                echo  "<span class=\" page active\">".$i."</span>";
                            }
                            else
                            { 

                            echo "<a class=\"page gradient\"";
                            echo "href=\"?{$querystring}page=$i";
                            echo "\">$i</a> ";
                            }

                         }
                    }
                    if($page!=$pages)
                    {
                    if($showitems < $pages)
                        {
                            echo "..... ";
                        }
                        $page1=$page;
                        $next=$page1+1;
                        echo "<a " . ($i == $page ? "class=\"page active\" " : "class=\"page gradient\"");
                        echo "href=\"?{$querystring}page=$next";
                        echo "\">Next</a> ";
                    }
          }
            ?>                                         
            </div>
        </div>
         <?php 
             $tim_path = get_bloginfo('template_directory')."/scripts/timthumb.php?src=";
            if(count($data)>0)
            { 
                foreach($data as $row)
                 {
                         $userid = $row->dealer_id;
                         $metakey="addr1";

                        $prod_id = $row->product_id;

                $image=$wpdb->get_results("select DISTINCT(product_id),prod_image from wp_product_images where product_id=$prod_id LIMIT 1");
                foreach($image as $row1)
                {
                     $image_name = $row1->prod_image;
                }
                  ?>
           <?php $location=get_usermeta( $userid, $metakey ); ?> 
        <ul class="product-wrap" id="product-wrap">
            <li><a href="#" class="current details-link" ><img src="<?php _e($tim_path) ?><?php bloginfo('template_directory');?>/product_images/<?php _e($image_name."&w=140&h=105&zc=0&watermark=0") ?>" class="thumb" alt=""/> 
         <?php if($row->bestdeal==1)
         {?>
          <span class="best-deal-icon right100" ></span> <?php }?>
          </a>
            <div class="product-title clearfix">
              <h3 class="textBold"><?php _e($row->product_name) ?></h3>
              <span class="product-price bTextColor"><?php _e($row->price)?></span> </div>
            <div class="tech-details"> <span class="span1">Technical details : </span> <span class="span2"><?php _e($row->rim) ?>"</span> <span
                                        class="span3"><?php _e($row->studs) ?>Studs</span> <span class="span4"><?php _e($row->colour) ?></span> 
                                        <span class="span5"><?php _e($row->miles) ?>Mil</span> </div>
            <div class="location-details" style=""> <span class="location-display">Location : <?php _e($location) ?> </span> <span
                                        class="view-details"><a href="<?php _e(get_option('home'))?>/details/?prod=<?php _e(base64_encode($row->product_id)) ?>" class="readmore">View details</a> </span> </div>
          </li>
       </ul>
       <?php }
        }
        else
        {  
           echo '<div class="no_records">Sorry!!No Products Found You Can Search Another. </div>';
        }
       ?>

        <!--/ .adjective-->
        <div id="pagination-sort-lniks">
          <div class="pagination"> 
              <?php
          if( $pages > 1)
          {
            $range=1;
            $showitems = ($range * 2)+1;  
            $page1=$page;
            $prev=$page1-1;
            if($page > 1)
            {
                echo "<a  class=\"page gradient\" ";
                echo "href=\"?{$querystring}page=$prev";
                echo "\">Previous</a> ";
            }
            for ($i = 1; $i <= $pages; $i++)
               {
                    if (1 != $pages &&( !($i >= $page+$range+1 || $i <= $page-$range-1) || $pages <= $showitems ))
                         {
                            if($i == $page) 
                            { 
                                echo  "<span class=\" page active\">".$i."</span>";
                            }
                            else
                            { 

                            echo "<a class=\"page gradient\"";
                            echo "href=\"?{$querystring}page=$i";
                            echo "\">$i</a> ";
                            }

                         }
                    }
                    if($page!=$pages)
                    {
                        if($showitems < $pages)
                            {
                                echo "..... ";
                            }
                            $page1=$page;
                            $next=$page1+1;
                            echo "<a " . ($i == $page ? "class=\"page active\" " : "class=\"page gradient\"");
                            echo "href=\"?{$querystring}page=$next";
                            echo "\">Next</a> ";
                    }
          }
            ?>                                         
            </div>
        </div>
      </section>
    </div>
  </div>
  <!--/ .main-->
<?php get_footer();?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:14:57.650

使用 Jquery/Ajax 的执行流程是不同的，让我尝试解释一下：

PHP在服务器上执行，执行后的结果是纯HTML+CSS+javascript。然后将此结果发送到客户端，浏览器将在客户端显示它。

因此，您在这里所做的是多次调用同一个 PHP，并且根据您传递给它的变量，您会生成不同的 HTML+CSS+javascript 结果。

那么如果我们添加 Jquery/Ajax，这将如何工作呢？

您将调用您的 PHP 一次，生成的结果必须在标记中包含 Jquery/Ajax 代码`head`。（您需要将 jquery JS 文件添加为`script`标签）。当用户决定进行排序时，您不会再次调用整个 PHP 脚本。您应该调用第二个 PHP 脚本，专门用于仅返回您要刷新的 HTML 部分。这是一个例子：

```
$.post("returnhtml.php", {var1: var1, var2: var2}, function(data){
     // the var data contains everything "returnhtml.php" echoed
     $("#div_we_want_to_refresh_id").html(data);
}); 
```

希望这有帮助。

# git - 分布式错误跟踪的状态如何？

> ID：13818871
> 
> 赞同：16
> 
> 时间：2012-12-11T10:59:20.603
> 
> 标签：git, distributed, issue-tracking

几年前，这里有一些关于分布式错误跟踪系统的活动：

*   [分布式项目管理/错误跟踪](https://stackoverflow.com/questions/773818/distributed-projectmanagement-bug-tracking)
*   [分布式修订控制、Wiki 和 Bug-Tracking 合二为一](https://stackoverflow.com/questions/1170831/distributed-revision-control-wiki-and-bug-tracking-all-in-one)

存在一些似乎或多或少活跃的系统：

*   [Fossil](http://www.fossil-scm.org)（看起来很成熟，特别是因为它有一个图形用户界面，但引入了它自己的版本控制系统，我不想离开 Git）
*   [BugsEverywhere](http://bugseverywhere.org/)（似乎很活跃，但缺少图形 UI，除了它是 Tortoise 集成[BEurtle](http://www.nedprod.com/programs/Win32/BEurtle/)）
*   [此处](http://www.cs.unb.ca/~bremner/blog/posts/git-issue-trackers/)列出的其他一些（VCS 不可知的和特定的）

我想知道：**分布式错误跟踪的当前状态是什么？**它是否仍处于某种仅限黑客的阶段（这使得它对于普通的 GUI 开发者来说几乎无法使用）还是我错过了什么？

另外，虽然我觉得这个话题**很**有趣，因为它与分布式版本控制系统完美集成，但似乎大多数前一段时间开始的项目同时都死了。我的印象是真的吗？为什么这个领域没有活动？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T11:28:18.293

我对这个话题也很感兴趣，但不幸的是，它似乎真的让人失望。

[在我看来， Ditz](http://ditz.rubyforge.org/)是最有前途的项目之一，但自 2008 年以来它似乎没有太多活动。

我记得几年前在博客文章中有很多炒作，以及相同数量的项目，但由于某种原因，它们似乎都已经死亡/停滞不前。

我相信部分问题在于大多数开源项目都在使用第三方托管站点，并且还没有足够好的分布式问题跟踪器来提供可以轻松与此类托管站点集成的界面。

这无疑是开源世界中一个被忽视的部分，等待可以提高临界质量的杀手项目......

# database - 我的数据库的正确表设计和正确搜索查询是什么？

> ID：13818872
> 
> 赞同：1
> 
> 时间：2012-12-11T10:59:21.523
> 
> 标签：database, database-design

我尝试为以下目的设计 mysql 表。该站点是关于属于一个或多个主题的任何主题和项目 - 例如让我们以“蝙蝠侠”为主题。为此，有属于几个类别的项目 -*电影*、*书籍*、*视频游戏*和*汽车*(Batmobil)。类别数为 10-20。我的想法是制作这些表格：

```
Topic
-------
id
name

Item
-------
id
name
category_id
decscription and some other common columns

Movie (and other categories, like Car, VideoGame, Book,...)
-------
id
item_id 
specific columns for each category

Item_Topic (and other tables like Item_Category, Item_Movie, Item_Car, Item_Videogame, Item_Person...)
-------
item_id
topic_id (movie_id, car_id, person_id, ...)

Person
-------
item_id
name
role 
```

到目前为止，我认为这是一个很好的解决方案（或者我错了吗？）

但我的两个问题如下：

1.  我的表格设计中的电影演员和书籍作者不被视为项目。对于演员和作家，有一个表*Person*和*Item-Person* 表，用于将项目与人员连接起来。但是，如果主题是“斯蒂芬·金”呢？我应该如何搜索斯蒂芬·金为他写的场景的书籍和电影？我想到的唯一方法是改变桌子设计并将人也视为物品。这是个好主意吗？这个问题的表设计解决方案是什么？您能否告诉我，使用适当的表格设计匹配主题和项目的一般查询应该如何？

2.  我想在一页上显示属于一个主题的所有带有详细信息的项目（存储在*Movie*、*Book*、*VideoGame ......） - 我可以使用的最佳查询是什么？*

非常感谢您的任何回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:21:26.300

让我评论一下您设计的这一部分：

```
Movie (and other categories, like Car, VideoGame, Book,...)
-------
item_id 
specific columns for each category 
```

在使用关系模型时，这通常不是最好的方法。如果可能，最好有一个包含、、、等`Category`记录的表。这样可以更容易地根据需要添加新类别。`Movie``Car``VideoGame``Book`

如果项目数据根据类别变化很大，有一些技术可以处理它，但它并不漂亮（通常是项目属性表，然后你的项目表是属性到值的映射表）。

## 更新

感谢@RichardCZ 提醒我属性映射方法称为[EAV, Entity-attribute-value, model](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)。

# javascript - 如何在应用程序中获取响应文本并绑定到跨 ajax 调用中的标签

> ID：13818873
> 
> 赞同：0
> 
> 时间：2012-12-11T10:59:25.043
> 
> 标签：javascript, html, ajax

我正在使用 Ajax 调用从其他域调用 Web 服务，我想通过使用以下代码从我的应用程序中的服务器获取返回的响应，我在 firebug 中获得响应文本，但在我的 JavaScript 代码中没有。控件没有显示成功和错误响应，它直接熄灭。

我想在我的成功或错误部分做出回应，但两者都没有处理。
我正在尝试很多但没有找到任何解决方案请任何人帮助我。
我有麻烦了。我希望有人可以帮助我通过使用 Ajax 调用来调用跨域 Web 服务。我从 1 周开始尝试，但直到找到任何解决方案。我在浏览器上得到响应，但在我的实际代码中没有得到响应。我的 JavaScript 代码。

```
 crossdomain.async_load_javascript(jquery_path, function () {
              $(function () {
                  crossdomain.ajax({
                      type: "GET",
                     url: "http://192.168.15.188/Service/Service.svc/GetMachineInfo?serialNumber="+123,                
                      success: function (txt) {
                          $('#responseget').html(txt);
                          alert("hii get");
                      }
                  });

                  crossdomain.ajax({
                      type: "POST",
                      url: "http://192.168.15.188/Server/Service.svc/GetEvents/",
                     // data: "origin=" + escape(origin),
                      success: function (txt) {
                          $('#responsepost').html(txt);
                          alert("hii post");
                      }
                  });
              });
          });
        </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:13:23.477

您不能简单地忽略[Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy)。

只有三种解决方案可以从来自另一个域的 Web 服务中获取答案：

*   在服务器端进行（在您的服务器上）
*   通过在您的服务器上使用代理，让浏览器认为它来自同一个域
*   更改 Web 服务服务器，使其成为[JSONP](http://en.wikipedia.org/wiki/JSONP)或（今天更干净）通过添加[CORS 标头](https://developer.mozilla.org/en-US/docs/HTTP_access_control)

# sql-server - 如何查看 Visual Studio 2012 创建的用于存储 ASP.Net MVC 4 项目数据的 mdf 文件？

> ID：13818882
> 
> 赞同：2
> 
> 时间：2012-12-11T10:59:51.413
> 
> 标签：sql-server, asp.net-mvc, visual-studio, entity-framework, visual-studio-2012

我在 Visual Studio 2012 中创建了一个新的 ASP.Net MVC 4 项目，并发现它创建了一个带有`.mdf`扩展名的文件来存储数据。

我想查看数据库架构并能够像使用 SQL Server Management Studio 查询 SQL Server 数据库一样手动查询它。

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:31:34.910

`.mdf` **IS** SQL Server ...只需附加`.mdf`到您的 SQL Server 实例，您就可以使用 SQL Server Mgmt Studio 查看它。

这整个`AttachDbFileName=`功能都是废话 - 抱歉。我永远不会使用这种方法来摆弄`.mdf`文件。只需**将**文件附加到`.mdf`您的 SQL Server 实例，然后数据库将在服务器上（它所属的位置），您可以在那里看到它（并从那里使用它 - 更新您的连接字符串以连接到服务器和数据库服务器）。

# macos - applescript 在 cmd+tap keypress 上调用 alt 按键以切换到隐藏窗口，而无需物理按下 alt

> ID：13818889
> 
> 赞同：2
> 
> 时间：2012-12-11T11:00:17.727
> 
> 标签：macos, applescript

自从我切换到 MAC 后，我一直讨厌这样一个事实，即我必须使用 alt 键来 cmd+tab 来隐藏窗口。我知道有一些应用程序（如[witch](http://manytricks.com/witch/)）取代了 cmd+tab 功能，但我喜欢当前的界面，我不想改变它。除此之外，我只想为它构建苹果脚本:)

所以这就是我想要创建的：

当我按`cmd+tap`- > keydown`alt`

然后当我释放它时`cmd`，它应该释放`alt`密钥。

结果是我在切换到“隐藏”窗口时不必再次按下 alt 键。很像其他操作系统系统。

但在我看来，所有苹果脚本都以`tell application`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T17:22:05.097

在 applescript 中检测用户的按键是不可能的。不过，您可以通过编程方式按键。要解决按住键的问题，请使用“key down”命令并在需要释放它时发出“key up”命令。这将适用于任何应用程序。这是一个例子。

```
tell application "KeyboardViewer" to activate
tell application "System Events"
    try --don't even consider not using a try block because down keys can get stuck!
        key down control
        delay 1
        key down shift
        delay 1
        key down option
        delay 1
        key down command
        delay 1
        key up control
        delay 1
        key up shift
        delay 1
        key up option
        delay 1
        key up command
        delay 1
        key down {control, shift, option, command}
        delay 1
        key up {control, shift, option, command}
    on error --logging out is the only other way to unstick these
        key up {control, shift, option, command}
    end try
end tell
tell application "KeyboardViewer" to quit 
```

注意：如果您想按顺序按下和释放某些键，也可以使用“击键”命令。例如，要按 command-s，您可以执行以下操作：

```
tell application "System Events"
    keystroke "s" using command down
end tell 
```

# php - 负载平衡 - 如何正确设置？

> ID：13818890
> 
> 赞同：1
> 
> 时间：2012-12-11T11:00:18.090
> 
> 标签：php, mysql, ssl, nginx, load-balancing

这里有点复杂。我在过去的几个月里完成了一个更大的基于 Web 的项目，并且由于我试图保持低预算（并自己学习一些东西）我没有触及我以前从未接触过的问题：使用 NGINX 进行负载平衡，以及未来的可扩展性。

设置如下： 1 台 Web 服务器 1 台数据库服务器 1 台文件服务器（也用于存储备份）

在 fastCGI 上使用 PHP 5.4<

现在，所有这些服务器都应该是“可扩展的”——从某种意义上说，如果可用磁盘空间越来越低，我可以添加一个新的文件服务器，或者如果我需要处理比预期更多的请求，我可以添加一个新的 Web 服务器。

另一件事是：我想在一个域上做所有事情，这样前端就不会真正注意到对不同后端服务器的访问（一些后端服务器基本上是通过子域调用的 - 例如：文件服务器，通过 'http:// file.myserver.com/...' 仅在文件服务器之间发生负载平衡）

1.  我是否需要一个额外的、单独的服务器来进行负载平衡？或者我可以只使用其中一个 Web 服务器吗？如是：
    *   这样的负载平衡服务器需要多少功率（CPU / RAM）？它是否必须与网络服务器相同，或者拥有一个“更轻”的服务器就足够了？
    *   “负载平衡”服务器是否也必须具有可扩展性？如果请求太多，我需要多个吗？
2.  整个负载平衡到底是如何工作的？我的意思是说：
    *   我已经看到许多条目指出，负载平衡系统上存在会话处理/同步等问题。我可以找到 2 个可能适合我需求的解决方案：要么始终将用户定向到同一台机器，要么将数据存储在数据库中。但是对于第二个，我基本上必须重建 PHP 已经拥有的 $_SESSION 功能的一部分，对吗？（我怎么知道哪个用户得到了哪个会话，cookie 真的足够了吗？）
    *   除了不同步的会话，我会遇到什么问题？
3.  编写可扩展的代码——这是我经常阅读的一句话。但是以 PHP 为例，它的真正含义是什么？通常，一个用户的整个计算只发生在一台服务器上（NGINX 将用户重定向到的服务器） - 那么 PHP 本身如何可扩展，因为它实际上并没有被 NGINX 重定向？
4.  是否可以使用不同的“负载平衡”池？我的意思是，所有文件服务器都在一个“池”中，所有 Web 服务器都在一个“池”中，基本上，如果您在文件服务器上请求一个有太多事情要做的图像，它会重定向到一个不太繁忙的文件服务器
5.  SSL - 我只需要一个用于平衡加载服务器的证书，对吧？由于数据总是通过负载平衡服务器返回 - 或者它究竟是如何工作的？

我知道这是一个很大的问题 - 基本上，我真的只是在寻找一些建议/有点帮助，我对整个事情有点迷茫。我可以阅读部分回答上述问题的片段，但真正“做”它完全是另一回事。所以我已经知道不会有一个明确的、确定的答案，但也许是一些经验。

最终目标是在未来易于扩展，并且已经提前计划（甚至购买负载均衡器服务器之类的东西）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:08:03.317

您可以使用其中一台 Web 服务器进行负载平衡。但是在单独的机器上设置平衡会更可靠。如果您的 Web 服务器响应不是很快并且您收到很多请求，那么负载均衡器会将请求设置在队列中。对于大队列，您需要足够数量的 RAM。

您通常不需要扩展负载均衡器。

或者，您可以为您的域创建两个或多个 A（地址）记录，每个记录指向不同的 Web 服务器地址。它会给你一个**没有平衡服务器的“** [DNS 负载平衡](http://en.wikipedia.org/wiki/Round-robin_DNS)” 。考虑这个选项。

# elasticsearch - 类型的弹性搜索限制结果

> ID：13818892
> 
> 赞同：4
> 
> 时间：2012-12-11T11:00:22.257
> 
> 标签：elasticsearch

我有以下查询

```
$queryDefinition = [
        'query' => [
            'bool' => [
                'must' => [
                    [
                        'query_string' => [
                            'default_field' => '_all',
                            'query' => $term
                        ]
                    ]
                ],
                'must_not' => [],
                'should' => []
            ],
        ],
        //'filter' => [
        //    'limit' => ['value' => 3],
        //],
        'from' => 0,
        'size' => 50,
        'sort' => [],
        'facets' => [
            'types' => [
                    'terms' => ['field' => '_type']
                ]
            ]
    ]; 
```

在索引中，我们有 5 种类型，我只想显示每种类型的 3 个结果，用于自动完成。当我设置过滤器限制时，仅过滤第一种类型的结果，对于其他类型，我得到所有结果。

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-31T10:48:42.060

```
{
  "aggregations": {
    "types": {
      "terms": {
        "field": "_type"
      },
      "hits": {
        "top_hits": {
          "size": 3
        }
      }
    }
  }
} 
```

如果您使用的是 ElasticSearch 1.4.0，则可以在“_type”字段上使用[术语聚合并将](http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-aggregations-bucket-terms-aggregation.html)[热门点击聚合](http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-aggregations-metrics-top-hits-aggregation.html)用作子聚合并将其大小设置为 3（在您的情况下）。

希望有帮助。

# bash - 查找在指定月份内修改的文件

> ID：13818897
> 
> 赞同：0
> 
> 时间：2012-12-11T11:00:26.183
> 
> 标签：bash, find, xargs

我已经构建了这个小脚本来查找在指定月份修改的文件。

我的脚本在过去四年中运行良好，但从最近的更新，现在使用 bash V4，这将不再工作，我不明白为什么。

有脚本（`fmonth.sh`）：

```
#!/bin/sh

month=$1
shift

printf "now\n%s-01\n%s-01 00:00 +1 month\n" $month $month |
    date -f - +%s |
    xargs printf "n=%s/60-.5;s=%s/60;e=%s/60;n-s;if (n-e <0) 0 else n-e\n" |
    bc -l |
    xargs printf "find $@ -mmin -%.0f -mmin +%.0f -print0\n" |
    sh |
    xargs -0 /bin/ls -ltrd |
    less -S 
```

这可以按如下方式使用：

```
fmonth.sh 2012-09 /etc /home/user /root /var/lib 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:30:53.147

好的，我找到了答案：`$@`可以替换为`$*`：

```
#!/bin/sh

month=$1
shift

printf "now\n%s-01\n%s-01 00:00 +1 month\n" $month $month |
    date -f - +%s |
    xargs printf "n=%s/60-.5;s=%s/60;e=%s/60;n-s;if (n-e <0) 0 else n-e\n" |
    bc -l |
    xargs printf "find $* -mmin -%.0f -mmin +%.0f -print0\n" |
    sh |
    xargs -0 /bin/ls -ltrd |
    less -S 
```

现在工作正常！

我不确定是否真的明白为什么......现在......我稍后会寻找原因......

# pointers - 在 boost::python 中，如何包装一个可覆盖的函数，该函数接受一个指向 C++ 对象的指针容器并返回指向其中一个对象的指针？

> ID：13818903
> 
> 赞同：0
> 
> 时间：2012-12-11T11:00:49.537
> 
> 标签：pointers, wrapper, boost-python

我正在用 boost::python 包装一个 C++ 框架，我需要在 python 中创建一个可覆盖的 C++ 方法。这是一个钩子方法，框架需要它并且在 C++ 中有一个默认实现，它遍历一个列表（作为参数传递）并执行一个选择。出现问题是因为选择是通过返回一个指向所选元素的指针（实际上是一个迭代器）来说明的，但是我找不到一种方法来返回一个 C++ 指针作为 python 函数的结果。任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T06:03:19.087

```
// file: https://github.com/layzerar/box2d-py/blob/master/python/world.cpp
struct b2ContactFilter_W: b2ContactFilter, wrapper<b2ContactFilter>
{
    bool ShouldCollide(b2Fixture* fixtureA, b2Fixture* fixtureB)
    {
        override func = this->get_override("ShouldCollide");
        if (func)
        {
            return func(ref(fixtureA), ref(fixtureB)); //ref is boost::ref
        }
        return b2ContactFilter::ShouldCollide(fixtureA, fixtureB);
    }

    bool ShouldCollideDefault(b2Fixture* fixtureA, b2Fixture* fixtureB)
    {
        return b2ContactFilter::ShouldCollide(fixtureA, fixtureB);
    }
};

class_<b2ContactFilter_W, boost::noncopyable>("b2ContactFilter")
        .def("ShouldCollide", &b2ContactFilter::ShouldCollide, &b2ContactFilter_W::ShouldCollideDefault)
    ; 
```

这是你需要的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T05:05:18.943

这当然是可行的，但你真的没有足够的细节。您真正需要做的是创建一个 c++ 函数来调用您的 python 函数，处理 python 结果并返回一个 c++ 结果。解释一下（假设我有一个`object`名为 func 的 boost，它指向一些解析字符串并返回 int 的 python 函数）：

```
using boost::python;
A* test(const std::string &foo) {
    object module = import("mymodule");
    object func = module.attr("myfunc");
    // alternatively, you could set the function by passing it as an argument
    // to a c++ function that you have wrapped

    object result = func(foo);
    int val = extract<int>(result);
    return new A(val); // Assumes that you've wrapped A.
} 
```

# c# - 从 ASP.NET MVC 3 Razor 页面将值从按钮传回 C# 控制器

> ID：13818912
> 
> 赞同：1
> 
> 时间：2012-12-11T11:01:08.380
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor

我的 cshtml 页面上有两个按钮 -`Agree`并且`Disagree`- 我如何轻松地将那里的值传递回我的控制器，以便我可以决定将它们带到主页或将它们注销。

所以在我的cshtml页面上我有......

```
 <input type="button" name='Agree' value="I Agree"
                   onclick="location.href='@Url.Action("DoAccept", "Home")'" />
    <input type="button" name='Delete' value="I Disagree"
                   onclick="location.href='@Url.Action("DoAccept", "Home")'" /> 
```

所以在我的家庭控制器中，我有一个 DoAccept 方法，如下所示：

```
 public ActionResult DoAcceptTC()
    {
       //if( buttom clicked was Agree)
        return RedirectToAction(VIEW_HOMEPAGE);
       //else
      //return Logout page..  
    } 
```

所以我的问题是如何轻松地将值返回给控制器方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T11:06:49.663

在没有托管它们的 html 表单的情况下使用输入没有多大意义。您可以使用表单或简单的链接

```
//view
@using(Html.BeginForm("DoAccept"))
{
     <button name="decision" value="agree">I Agree</button>
     <button name="decision" value="disagree">I disagree</button>
}

//controller
public ActionResult DoAcceptTC(string decision)
{
    //decision == "agree"
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T05:25:52.083

您必须将参数与 Url.Action 一起发送到控制器，以便您能够轻松地执行您的操作。以下链接可能对您有所帮助。

[Url.Action 带参数](http://geekswithblogs.net/liammclennan/archive/2008/05/21/122298.aspx)

# c# - 使用标准一对多休眠

> ID：13818916
> 
> 赞同：1
> 
> 时间：2012-12-11T11:01:17.103
> 
> 标签：c#, .net, sql, nhibernate

我有一个包含相关对象列表的类。

我将其映射如下：

```
<class name="MyDto" table="`MyView`" mutable="false"  lazy="false">
    <id name="Id" column="ID" type="int">
        <generator class="assigned" />
    </id>

    <set name="Days" cascade="all-delete-orphan" lazy="false" >
          <key column="Id" />
          <one-to-many class="MyAssociatedObj"/>
    </set>
</class>

<class name="MyAssociatedObj" table="V_SC_NEED" mutable="false" lazy="false" >
    <id name="Id"  column="`ID2`" type="int">
        <generator class="assigned" />
    </id>

    <property type="DateTime" not-null="true" name="DayDate"  column="`Date`" />

    <component name="Audit">
        <property type="string" not-null="true" length="255" name="Username" column="`USERNAME`" />
        <property type="decimal" not-null="true" name="PreviousValue" column="`PrevVal`" />
    </component>
</class> 
```

我想要做的是获得一个 MyDto 对象列表，由我的关联对象 MyAssociatedObject 过滤。

这意味着，例如，如果我这样做：

```
UnitOfWork.Session.CreateCriteria<MyDto>().List<MyDto>() 
```

我得到一个 42 行的列表。现在，我想通过我的关联对象过滤它们，并限制它们之间。问题是当我这样做时：

```
UnitOfWork.Session.CreateCriteria<MyDto>().CreateAlias("Days", "days").Add(Restrictions.Between("days.DayDate", query.FromDate, query.ToDate)); 
```

我得到了，不知何故684行！（一些笛卡尔积或其他东西）。

有什么建议吗？非常感谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T11:49:16.980

您在第二个查询中获得了更多行，因为您正在与**JOINing**`MyAssociatedObj`，这似乎与您的班级存在*多对一的*关系`MyDTO`。
如果要过滤掉 的重复项`MyDTO`，可以使用 DistinctRootResultTransformer：

```
UnitOfWork.Session.CreateCriteria<MyDto>().CreateAlias("Days", "days")  
   .Add(Restrictions.Between("days.DayDate", query.FromDate, query.ToDate))  
   .SetResultTransformer(  
          new NHibernate.Transform.DistinctRootEntityResultTransformer()); 
```

希望能帮助到你。

# android - 如何在表格布局中添加滚动视图？显示所有文本视图也是如此

> ID：13818917
> 
> 赞同：-2
> 
> 时间：2012-12-11T11:01:17.823
> 
> 标签：android

我终于通过权重属性解决了我上一个帖子的问题，但是当我最后给出多行文本时出现了一个问题 Textview not show which in this url [http://imgur.com/ApL5c](https://imgur.com/ApL5c)

如何在我的代码中添加滚动视图？

```
<?xml version="1.0" encoding="utf-8"?>

<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent" 
  android:layout_height="wrap_content"
  android:stretchColumns="1" 
   android:weightSum="11"
  android:layout_margin="5dp">

   <TableRow>         
     <TextView 
        style="@style/StyleLabel"
        android:text="@string/name_lbl"/>
     <TextView 
        android:id="@+id/nameText" 
         android:layout_weight="2"

        style="@style/StyleText"/>         
  </TableRow>

  <TableRow>         
     <TextView 
        style="@style/StyleLabel"

        android:text="@string/cap_lbl"/>         
     <TextView 
        android:id="@+id/capText"

         android:layout_weight="2"
        style="@style/StyleText"/>         
  </TableRow>

  <TableRow>         
     <TextView 
        style="@style/StyleLabel"
        android:text="@string/code_lbl"/>         
     <TextView 
        android:id="@+id/codeText"

         android:layout_weight="1"
        style="@style/StyleText"/>         
  </TableRow>

    <TableRow>         
     <TextView 
        style="@style/StyleLabel"
        android:text="@string/DoneDate_lbl"/>         
     <TextView 
        android:id="@+id/Location_lbl"
         android:layout_weight="1"

        style="@style/StyleText"/>         
  </TableRow>

     <TableRow>         
     <TextView 

        style="@style/StyleLabel"
        android:text="@string/Notes_lbl"/>         
     <TextView 

        android:id="@+id/Notes_lbl"
         android:layout_weight="4"
        style="@style/StyleText"

        />         
  </TableRow>

   <TableRow>         
     <TextView 
        style="@style/StyleLabel"
        android:text="@string/person_lbl"/>         
     <TextView 
        android:id="@+id/Person_lbl"
         android:layout_weight="1"

        style="@style/StyleText"/>         
  </TableRow> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:24:25.317

只需将其包围在滚动视图中，如下所示 -

```
<ScrollView 
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    xmlns:android="http://schemas.android.com/apk/res/android" >

<TableLayout 
  android:layout_width="fill_parent" 
  android:layout_height="wrap_content"
  android:stretchColumns="1" 
   android:weightSum="11"
  android:layout_margin="5dp">
<TableRow>         
     <TextView 

        android:text="textview1"/>
     <TextView 
        android:id="@+id/nameText"
        android:text="tewgoijirtgujerioug"
        android:lines="15" //You can add lines to make your textview occupy the no of lines you want instead of weight. 
         android:layout_weight="2"

       />         
  </TableRow>
............
.............
</TableLayout>
</ScrollView> 
```

希望这可以帮助。

# c++ - 将静态库（不带 -fPIC）链接到 64 位操作系统上的共享库

> ID：13818921
> 
> 赞同：3
> 
> 时间：2012-12-11T11:01:32.703
> 
> 标签：c++, linux, java-native-interface, shared-libraries, static-libraries

我用 c++ 编写程序，从中将创建共享库 - 完成后它将被 JNI 使用。我有 3rd 方库（ libexample.a ），需要将其链接到共享库（ libshared.so ）。问题是，我在 64 位 CentOS 上工作，并且需要 -fPIC 来创建共享库，但是第 3 方库没有使用 -fPIC 编译。

直到建立我收到： `/usr/bin/ld: /home/tom/Project/src/libexample.a(SomeObject.o): relocation R_X86_64_32 against 'someData' can not be used when making a shared object; recompile with -fPIC`

在这种情况下是否可以制作共享库？（我没有 libexample.a 的源代码 ...）

有什么解决方法可以让它工作吗？甚至我必须编写其他应用程序的想法。

我希望我的问题不会重复（或多或少），因为我花了很长时间寻找可能性。谢谢，贝兹

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T23:02:39.150

没有办法解决任何问题。我不得不写信给第 3 方库开发人员以再次编译`-fPIC`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-11T03:06:49.477

试试这个：

`set_property(TARGET TheirLib PROPERTY POSITION_INDEPENDENT_CODE ON)`

这将在第 3 方项目上设置 fPIC 选项。

[此答案的来源](https://stackoverflow.com/questions/38296756/what-is-the-idiomatic-way-in-cmake-to-add-the-fpic-compiler-option)

# c# - 使用 watin 自动单击使用 Javascript 构建链接

> ID：13818927
> 
> 赞同：1
> 
> 时间：2012-12-11T11:02:01.020
> 
> 标签：c#, javascript, c#-4.0, watin, run-script

我试图能够自动化点击使用 watin 内置在 javascript 中的链接的过程。

在网页的源代码中，链接看起来像 href="#"，所以我认为这些链接适用于 Javascript。

Runscript 不适用于“link.click”之类的 Javascript 代码。当我使用“link.flash()”时，我可以看到链接闪烁，所以我确定脚本单击链接但没有效果（并且脚本不会崩溃）。

你有解决这个问题的想法吗？

**编辑：链接类是自动生成的**

这里是 HTML 代码：所有***都是自动生成的名称

```
<div class="******" id="ext-gen***">
    <ul class="**********" id="ext-gen***">
        <li class="******" id="***************">
           <a class"*****" href="#" id="ext-gen***">
              <em class="********">
                 <span class="*******">
                    <span class="*********"> LINK 1 </span>
                 </span>
              </em>
           </a>
        </li>
        <li class="******" id="***************">
           <a class"*****" href="#" id="ext-gen***">
              <em class="********">
                 <span class="*******">
                    <span class="*********"> LINK 2 </span>
                 </span>
              </em>
           </a>
        </li> 
```

ETC.....

是的，这太可怕了......，唯一的解决方案是通过 Text 选择到 div 中。

它在 Firefox 工具中的 slate javascript 中工作，但是当我将其插入带有 watin 的 Runscript 时，它不起作用。

这是带有 Runscript 的代码：

```
StringBuilder myScript = new StringBuilder();

myScript.AppendLine("javascript: ");
myScript.AppendLine(" var link = document.getElementsByTagName('a'), i;");
myScript.AppendLine(" for (i in link)");
myScript.AppendLine(" {");
myScript.AppendLine("    if ((' ' + link[i].text + ' ').indexOf(' ' + '" + name + "' + ' ') > -1) ");
myScript.AppendLine("    {");
myScript.AppendLine("       link[i].click();");
myScript.AppendLine("        break; ");
myScript.AppendLine("    }");
myScript.AppendLine(" }");
Thread.Sleep(100);
ie.RunScript(myScript.ToString()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T05:53:45.190

如果链接类是“linkClass”，只需触发 javascript 代码运行以下命令：

```
browser.Eval("$('.linkClass').click();") 
```

**编辑**：您是否需要在每次链接点击之间执行一些操作？

不要使用 RunScript 命令，我对它的体验很差。

你可以试试这个：

```
 var links = ie.Links;
   foreach (var link in links)
   {
       ie.Eval(string.Format("$('#{0}').click();", link.Id));
       //after click do your test (or not)...
   } 
```

# jquery - 这是否可以使用手风琴保持所有部分关闭，直到用户单击特定部分标题

> ID：13818931
> 
> 赞同：0
> 
> 时间：2012-12-11T11:02:19.800
> 
> 标签：jquery, html, css, jquery-ui

在用户单击特定部分标题之前，手风琴是否可以保持所有部分关闭。我尝试过，但默认情况下，手风琴始终保持一个部分打开。

提前致谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T11:03:52.113

是的，您可以[`active: false`](http://api.jqueryui.com/accordion/#option-active)在手风琴选项中指定。

[演示](http://jsfiddle.net/gRB94/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T11:05:49.407

你可以试试这个**[DEMO](http://jsfiddle.net/8N4ZQ/1/)**

```
$(document).ready(function () {
  $('#nav > li > a').click(function(){
    if ($(this).attr('class') != 'active'){
      $('#nav li ul').slideUp();
      $(this).next().slideToggle();
      $('#nav li a').removeClass('active');
      $(this).addClass('active');
    }
  });
});​ 
```

# mysql - 在 CentOS 6.2 中无法为 MySQL 服务器设置密码

> ID：13818932
> 
> 赞同：0
> 
> 时间：2012-12-11T11:02:20.083
> 
> 标签：mysql, linux, centos

我已经安装了mysql，然后安装了mysql-server。然后我启动 mysql 恶魔并按照以下步骤操作，

```
# chkconfig --level 2345 mysqld on

# mysqladmin -u root password testpassword 
```

但我无法设置密码，因为它给了我以下错误，

```
Access denied for user root@localhost (using password: no) 
```

我以 root 用户身份登录并执行这些步骤。我什至卸载了mysql服务器并重新安装，但发生了同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:09:30.810

尝试

```
mysqladmin -u root -p ping 
```

它会要求你在 tty 上输入密码

编辑：既然你想设置密码试试这个

```
#service mysqld stop
#mysqld_safe --skip-grant-tables &
#mysql -u root
update mysql.user set password=PASSWORD("password") where User='root';
flush privileges; exit;
#service mysqld stop
#service mysqld start 
```

现在您应该可以使用 mysqladmin 了，如上所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:19:53.853

启动服务器后，在提示符下输入：

`sudo /usr/bin/mysql_secure_installation`

并按照屏幕上的说明进行操作。那应该让你正确...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-14T15:30:47.573

跑`sudo mysql_secure_installation`

系统将提示您输入为 MySQL root 帐户设置的密码。然后它会询问您是否要更改密码。如果您对当前密码感到满意，请在提示符处键入“n”至“否”。

# asp.net-mvc - SOA 与 MVC - 何时使用

> ID：13818933
> 
> 赞同：23
> 
> 时间：2012-12-11T11:02:19.540
> 
> 标签：asp.net-mvc, model-view-controller, architecture, soa

我已经阅读[了这个](https://stackoverflow.com/questions/7879085/soa-and-asp-net-mvc)主题，但仍然没有完整的图片，我非常感谢您对下一个问题的回答：

*   对于什么类型的应用程序应该使用**SOA 方法**（从服务器端获取 JSON 并使用 javascript 框架在客户端生成 html，如淘汰 js、angular js 等），以及服务器端的**ASP.net MVC** - 类似替代方案架构方法（完全在服务器端生成页面并返回视图作为结果）。
    例如，对于最后一个具有丰富客户端逻辑的 SPA，wcf 服务 + 淘汰 js（客户端 MVVM）提供了很好的结果。但是哪种方法更适合 CRUD 应用程序（例如，用于添加、更新具有不同用户角色的数据的多个表）。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-12-14T19:42:39.347

SOA 不仅仅是将 JSON 发送到 Web 客户端。

想象一下，您的企业拥有一个数据库驱动的软件系统，用于销售、库存、报告等。大多数系统开始时都很小，只有一个客户端或 Web 应用程序直接与数据库对话……这没关系。

但是，随着系统的增长，您会发现有些东西不适合此模型：锁定应用程序或网页的长时间运行的批处理，不仅涉及数据库服务器的计划作业，涉及生活在外部来源中的数据的过程，或在运行时使您的数据库陷入困境的复杂报告。

此时，您需要考虑添加一个应用程序服务器来处理其中一些任务。应用程序服务器可以减轻您的客户端的部分工作负载。它还可以减轻此时可能是过度工作的数据库的某些负载，例如应用程序服务器请求或将原始数据移入和移出数据库，而面向用户的客户端请求/提交转换后的数据到和从应用服务器。

随着系统的进一步发展，您还会发现系统的不同部分在您维护事物时会在其他地方产生意想不到的副作用。即使是简单的增强功能也变得越来越难以完成。开发速度放缓，错误数量增加。应用程序服务器现在成为一个很好的地方，可以集中设计工作，以确保一个领域的变化在其他地方产生预期的后果（并且*只有*预期的后果）。

起初，SOA 的真正含义是采用该应用程序服务器（它可能碰巧使用 json over http，但也可能提供完全不同的接口，甚至在几种数据传输技术之间自动转换）并强制执行*all*，而不是只是一些，数据库访问通过这个应用服务器：服务层。

一旦强制执行此访问，并且不再与数据库直接对话（至少，没有特别说明的内容），该层也成为开始执行业务规则和系统逻辑的好地方。它允许您在这里编写传统的应用程序风格的代码，这些代码比 sql 更易于使用源代码控制，并且将自动在使用系统的任何应用程序之间共享。代码都在同一个地方，因此更容易通过系统对更改及其影响进行建模。

作为奖励，这一层通常很容易扩展到多个冗余服务器，尤其是与传统的关系数据库服务器相比。结果是扩展应用程序服务器可以成为改进和管理大型应用程序的性能和可靠性的一种方式。在后端，它还可以通过简化和集中使用 Redis 等数据库缓存工具的工作来提高性能，使专门的 DBA 更容易参与性能调整，并帮助您集中访问位于多个位置的数据。

此时，您的 MVC 网站只是一个连接到 SOA 系统中的应用程序服务器的应用程序。您可能还在某些桌面上安装了旧的客户端-服务器应用程序，或者您的 MVC 应用程序可能面向公开销售，而实际销售和支持代表使用完全不同的东西，计费使用不同的应用程序，订单履行或采购有另一个界面...但它们都与同一个服务层通信。这里的另一个优势是该服务层可以更轻松地从多个来源提取数据，因此如果您的制造系统需要来自外部系统的材料可用性信息，则服务层可以知道如何找到它而前端代码不需要不必知道这些数据来自任何特殊的地方。

所有这一切的重点是它不是非此即彼的情况。如果您有 SOA，您可以在系统的某一层使用 MVC，SOA 的服务层提供的接口将决定您的 MVC 模型的一些外观以及控制器的行为方式。如果您没有 SOA，MVC 在构建从数据库到表示的整个堆栈时恰好可以正常工作，并且实际上可以使模型成为更大服务层的缩影。

* * *

那么，何时使用 JSON 与何时使用 ASP.Net MVC 的问题呈现出一种新的形式。ASP.Net MVC 可以是 SOA 架构的一部分，提供 JSON 数据的服务框架通常使用客户端 MVC 库来实现。*你真的想知道什么时候在客户端做更多的事情比在服务器端做更多的事情更合适。*老实说，我认为这主要是个人喜好，但是您应该注意一些权衡。

做更多的工作客户端可以很好地提高性能和可伸缩性，因为它将应用程序的一些工作负载分散到用户的计算机系统中，并且可以减少通过往返 Web 服务器或应用程序服务器引入的延迟。

另一方面，在服务器端做更多的工作有利于避免通过较慢的公共互联网链接传输更大的数据集时的延迟，可以更容易满足美国残疾人法案可访问性要求等合规性要求，其中过多的 javascript 可能会导致可访问浏览器或将数据推送到客户端系统的问题可能会构成隐私或安全风险，并且当更多处理发生在同一层内时，可以更容易地开发、部署和维护新代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T08:30:55.850

就架构的 SOA 部分而言，客户端 MV*（MVC、MVP、MVVM 等）架构和服务器端 MV* 架构是相同的。

模型是您与服务通信并从各种服务获取数据的地方。客户端 MV* 和服务器端之间的选择是正交的。

# ios6 - 如何解决横向模式下 ImagePicker 控件视图的方向和纵向模式下整个应用程序的方向？

> ID：13818941
> 
> 赞同：1
> 
> 时间：2012-12-11T11:02:32.753
> 
> 标签：ios6, uiimagepickercontroller, xcode4.5, uiinterfaceorientation

我想要的是我的整个应用程序仅处于纵向模式。

它在 ios 6+ 中运行良好。目前唯一需要的支持。

但问题是我需要仅在横向模式下使用图像源类型的相机启动 UIImagePickerViewController。

我到目前为止尝试的是：

(1) 我尝试为 UIImagePickerController 创建一个类别以进行定位。

```
-(BOOL)shouldAutorotate
{
    return NO;
}

-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscape;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationLandscapeLeft;
} 
```

像这样。但是相机视图没有正确对齐。它只是以一些 +/- 90 的角度跟随设备的方向，但不是我需要的。

即使相机视图显示为相机控件的相机按钮也遵循相机视图，即。视图旋转到 90 度反时钟虎钳并保持不变。

我使用下面的代码来展示图像选择器视图控制器

```
[self presentViewController:imagePicker animated:YES completion:nil]; 
```

有什么方法可以使用正确对齐的相机吗？还是必须使用其他框架才能使用它？

# android - 安卓应用程序中的网站特定搜索

> ID：13818944
> 
> 赞同：-5
> 
> 时间：2012-12-11T11:02:46.123
> 
> 标签：android, eclipse

*有没有办法搜索我使用我的应用程序中的搜索框分配的特定网站。没有搜索网络并且没有用户更改要搜索的网站？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:05:21.113

取决于网站。例如，作为搜索请求的结果，允许开发人员获取 XML 响应的网站。

然后，您可以轻松解析 XML 并将其提供给您的应用程序。

# java - Spring - 如何让应用程序从属性文件中读取环境变量

> ID：13818946
> 
> 赞同：0
> 
> 时间：2012-12-11T11:02:48.023
> 
> 标签：java, xml, spring, web-config

我有几个基于 Spring 的应用程序 - Web、Web 服务

对于我的 Web 服务项目，在我的 ws-config.xml 文件中，我指定了 wsdl 的位置。过去已将其设置为 localhost，但如果可以的话，我现在需要将其作为属性文件中的可配置值。

```
<ws:dynamic-wsdl id="ServiceDefinition"
    portTypeName="Test" locationUri="http://localhost/Test/webservice">
    <ws:xsd location="/WEB-INF/schemas/my-test.xsd" />
</ws:dynamic-wsdl> 
```

我需要能够将 locationUri 引用为属性，但我不知道该怎么做？

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:04:38.387

查看[PropertyPlaceHolderConfigurer](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/beans/factory/config/PropertyPlaceholderConfigurer.html)。您可以使用它在 Spring 配置中指定属性，并指定从哪些属性源填充此属性。您可以指定源的层次结构，例如（例如）您有一个默认属性文件，然后是每个用户配置中的一些覆盖值。

这是一个[简单的例子](http://www.mkyong.com/spring/spring-propertyplaceholderconfigurer-example/)。

# java - 是否有任何java api方法将负值舍入为零

> ID：13818947
> 
> 赞同：-9
> 
> 时间：2012-12-11T11:02:52.563
> 
> 标签：java

我想将负值四舍五入为零。例如：-223.5 到 0.0。Java中是否有任何特定的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T11:04:23.360

```
int nonNegative =  Math.max(yourValue, 0);
double nonNegativeDouble =  Math.max(yourValueAsDouble, 0.0); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-11T11:05:04.677

三元运算符：

```
a = a<0 ? 0 : a; 
```

如果声明：

```
if (a<0) a = 0; 
```

不要仅仅为了它而使用方法或 API。我认为[“KISS”原则在这种情况下适用。](http://en.wikipedia.org/wiki/KISS_principle)

我个人对 API 的看法是，如果它使您的代码更具可读性、更易于维护、不要重新发明轮子和/或您不重复自己，那么您应该使用它们。

在这种情况下，我认为您想要做的事情可以通过一个简单的条件单行语句来实现，因此，您不会从使用 API 中受益。

但实际上，这也可以通过使用该`Math.max`函数的另一个答案中所述来实现：

```
a = Math.max(a, 0); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-11T11:04:10.430

而已：

```
float a = -223.5;
if(a < 0)
    a = 0.0; 
```

# session - 在多个 glassfish 服务器之间共享安全上下文

> ID：13818950
> 
> 赞同：1
> 
> 时间：2012-12-11T11:03:06.913
> 
> 标签：session, authentication, glassfish, single-sign-on, security-context

*   我的应用程序分布在多个组件（Web 应用程序）中。
*   这些组件部署在不同的 glassfish 服务器上。
*   每个 Glassfish 服务器都在不同的主机上运行。

我正在使用提供的安全领域进行身份验证。

有没有一种方法，已经在服务器 x 上通过身份验证的用户不需要在服务器 y 上再次进行身份验证（单点登录）？

我正在研究会话复制。但如果我正确理解集群，这意味着我必须将应用程序部署到整个集群（每个实例）。我需要的是一个物理分布式的解决方案。

我进行此设置的原因不是负载平衡或高可用性。这是客户的需求。

有什么想法或解决方法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:46:22.883

在这个领域，[Oracle Access Manager](http://www.oracle.com/us/products/middleware/identity-management/access-management/overview/index.html)等产品可用于跨多个服务的单点登录。Oracle GlassFish Server（包括[GlassFish Server Control 特性](http://www.oracle.com/us/products/middleware/application-server/glassfish-server-control-ds-072078.pdf)的商业产品）有一个用于 Oracle Access Manager 的 JSR 196 JAAS Provider。查看有关设置[的操作方法文档。](http://www.oracle.com/technetwork/middleware/glassfish/documentation/howto-170276.html)

希望这可以帮助。

# python - 关于如何在python中批量命名多个文件的一些技巧

> ID：13818951
> 
> 赞同：-1
> 
> 时间：2012-12-11T11:03:06.327
> 
> 标签：python, arrays

我正在处理文件，在处理它们之后，我需要按升序使用数字名称保存它们，例如 1.txt、2.txt 等。手动我会做如下：

```
Variable_1 = "C:\\1.txt"
Variable_2 = "C:\\2.txt" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:09:34.723

```
for i in range(10):
    filename = "C:\\%d.txt" % i
    with open(filename, 'a') as f:
        .... 
```

就这么简单，但您也可以使用生成器来创建文件名（由您决定）

# matlab - Matlab 2011a 中基于模型的校准工具箱 64

> ID：13818953
> 
> 赞同：1
> 
> 时间：2012-12-11T11:03:13.870
> 
> 标签：matlab

我正在使用 Matlab 2011a，64 位并寻找基于模型的校准工具箱，但我找不到。

在上一个版本（2009 年）中，我只是在命令行中输入：“mbcmodel”，然后我得到了工具箱。但是在这个版本中，我做不到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T11:22:54.803

您的新版本可能没有安装该产品。在 MATLAB 命令行中键入`ver`以查看您安装了哪些产品。如果您没有看到基于模型的校准工具箱，那就是问题所在。

# objective-c - MsgPack 无法对 NSData 对象进行消息打包

> ID：13818955
> 
> 赞同：0
> 
> 时间：2012-12-11T11:03:19.770
> 
> 标签：objective-c, ios, messagepack

尝试设置图像数据

```
NSData *thumbnailData = UIImageJPEGRepresentation(place.thumbnail, 0.8);
            [placeDict setObject:thumbnailData forKey:thumbnail]; 
```

并得到错误：

```
Could not messagepack object: External Data Reference: <self = 0xbba24f0 ; path = nil ; length = 557> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:14:36.783

您确定在这行代码之后收到此错误吗？使用此代码可以确定您的程序在这部分代码中有/没有错误：

```
NSLog((@"%s [Line %d] "), __PRETTY_FUNCTION__, __LINE__);
NSData *thumbnailData = UIImageJPEGRepresentation(place.thumbnail, 0.8);
NSLog((@"%s [Line %d] "), __PRETTY_FUNCTION__, __LINE__);
placeDict setObject:thumbnailData forKey:thumbnail];
NSLog((@"%s [Line %d] "), __PRETTY_FUNCTION__, __LINE__); 
```

# java - 只需编写程序名称即可在不同的编辑器中运行 txt 文件

> ID：13818958
> 
> 赞同：0
> 
> 时间：2012-12-11T11:03:28.743
> 
> 标签：java, runtime.exec

我有两个问题。Method`Runtime.getRuntime().exec()`获取资源的目录在哪里？

如果我打电话`Runtime.getRuntime().exec("notepad.exe")`，为什么它会启动 Windows 编辑器？java从哪里获取.exe源？

基于这个问题，我必须让用户选择，如果他想在编辑器中打开文件，他喜欢和想要使用哪些编辑器。`notepad.exe`他只写或类似的东西`ultraedit.exe`，选择的文件将在此处写下的编辑器中打开。目前，我正在用这个方法打开一个文件

```
public void open(String path) {
    try {
        if(new File(path).exists())
            Runtime.getRuntime().exec("notepad.exe " + path);
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

如您所见，每个文件都将在记事本中打开。但我需要有这样的东西：

```
public void open(String program, String path) {
    try {
        if(new File(path).exists())
            Runtime.getRuntime().exec(program + " " + path);
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

那么有没有可能通过调用他们的 .exe 文件在不同的编辑器中打开 txt 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:09:33.390

`Runtime.exec()`从 获取其信息`PATH`。在那里找到的任何程序都可以像你展示的那样执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T11:09:51.543

```
Where does java gets the .exe source from? 
```

它与Java无关。检查`PATH`操作系统中的环境变量。它具有所有 exe 文件的路径。试试这个

1）打开cmd

2) 类型`c:\> echo %PATH%`

第二个会告诉你 PATH 变量的值

```
So is there any possibility to open txt files in different editors, by just calling their .exe file? 
```

是的，编辑 PATH 变量以包含其他编辑器的 exe 文件的路径（使用分号，然后将路径附加到环境中，不要替换现有字符串），并且 java 程序保持不变

# c# - SharePoint 2010 工作流部署

> ID：13818959
> 
> 赞同：0
> 
> 时间：2012-12-11T11:03:29.053
> 
> 标签：c#, sharepoint, sharepoint-2010, workflow

所以我对 SharePoint 开发有点陌生。我在 VS2010 上开发了一个 Worfklow，这个在 localSharePoint Server 上工作。现在，当我尝试将此工作流添加到我的外部 SharePoint Server 时，将此工作流分配给列表是行不通的。

我如何部署：

我从\bin\debug 中获取“*.wsp”文件并通过Gallery->Solution 上传它。然后我激活了解决方案，但是我找不到这个工作流来将它分配给一个列表。

谢谢

马库斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:24:14.943

您需要部署您的 .wsp。

这个链接可以帮助你；

[http://technet.microsoft.com/en-us/library/cc262995(v=office.14).aspx](http://technet.microsoft.com/en-us/library/cc262995(v=office.14).aspx)

# c++ - 客户端断开连接后 C++ TCP 服务器仍在读取数据

> ID：13818960
> 
> 赞同：0
> 
> 时间：2012-12-11T11:03:32.817
> 
> 标签：c++, c, sockets, select

我创建了一个服务器，用于`select()`检查套接字描述符中是否有数据，但显然 select 标记了一个套接字，即使在客户端断开连接后也可以从中读取，并且我得到了垃圾值。

我发现这篇关于堆栈溢出的帖子：

> select（设置了读取掩码）将返回带有信号的句柄，但是当您使用 ioctl* 检查待读取的字节数时，它将为零。`

我的问题是什么是 ioctl* 以及如何使用它？一个例子会很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T13:20:52.577

如果`read()`对套接字（文件）描述符的调用返回`0`，则仅表示连接的另一端已关闭并关闭了连接。

注意：当传递给的 '之一表示的连接已关闭`select()`时，等待套接字（文件）描述符集上可能的“事件”也将返回。`fd_set``select()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T13:28:10.927

检查人们在使用时常犯的错误[`select(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/select.2.html)：

*   始终重新初始化`fd_set`您[`select(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/select.2.html)在每次迭代时提供的 s - 这些是系统调用为您修改的输入输出参数。
*   在每次迭代中重新计算`fd_max`第一个参数。
*   检查所有系统调用的错误，检查[`errno(3)`](http://www.kernel.org/doc/man-pages/online/pages/man3/errno.3.html).

而且，是的，[`read(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/read.2.html)当对方干净地关闭 TCP 连接时返回零，不再使用该套接字，就[`close(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/close.2.html)它。

# java - 运行时异常 - Datanucleus 和 GAE

> ID：13818962
> 
> 赞同：1
> 
> 时间：2012-12-11T11:03:37.713
> 
> 标签：java, eclipse, google-app-engine, datanucleus

我是谷歌应用引擎和数据核的新手。以下错误似乎是一些 jar 问题，但我不确定 Data nucleus 的哪些 jar 应该在我的 war/web-inf/classes 文件夹中，哪些 jar 应该在 app engine SDK 文件夹中。我正在使用 App 引擎 SDK 1.7.0。我在数据核增强方面没有问题。

```
Caused by: java.lang.NoSuchMethodError: org.datanucleus.plugin.PluginManager.<init>(Lorg/datanucleus/PersistenceConfiguration;Lorg/datanucleus/ClassLoaderResolver;)V
    at org.datanucleus.OMFContext.<init>(OMFContext.java:159)
    at org.datanucleus.OMFContext.<init>(OMFContext.java:141)
    at org.datanucleus.ObjectManagerFactoryImpl.initialiseOMFContext(ObjectManagerFactoryImpl.java:144)
    at org.datanucleus.jdo.JDOPersistenceManagerFactory.initialiseProperties(JDOPersistenceManagerFactory.java:316)
    at org.datanucleus.jdo.JDOPersistenceManagerFactory.<init>(JDOPersistenceManagerFactory.java:260)
    at org.datanucleus.store.appengine.jdo.DatastoreJDOPersistenceManagerFactory.<init>(DatastoreJDOPersistenceManagerFactory.java:71)
<continued in next message> 
```

在应用引擎 SDK 文件夹中还有其他各种文件夹，它们包含不同版本的相同数据核文件。

****编辑：**** 将 SDK 更新到 1.7.3 后，我注意到 appengine-java-sdk-1.7.3\lib\user\orm 文件夹中有以下 JARS，这些是那里存在的数据核 jar。

```
datanucleus-core-1.1.5
datanucleus-jpa-1.1.5
datanucleus-appengine-1.0.10.final
jdo2-api-2.3-eb 
```

我的 war/web-inf/lib 包含所有上述罐子和以下罐子：

```
appengine-api-1.0-sdk-1.7.3.jar 
```

我的例外已经改变，现在是：

```
 2012-12-12 12:49:17.397
org.datanucleus.plugin.NonManagedPluginRegistry resolveConstraints: Bundle "org.datanucleus.api.jdo" requires "org.datanucleus" version "3.1.1" but the resolved bundle has version "3.1.1" which is outside the expected range.
E 2012-12-12 12:49:17.534
org.datanucleus.api.ApiAdapterFactory getApiAdapter: Error : An error occurred trying to instantiate an instance of the adapter "org.datanucleus.api.jdo.JDOAdapter" : NUCLEUS_CONTEXT_LOADER
W 2012-12-12 12:49:18.182
org.datanucleus.OMFContext setApi: There is no available API adapter "JDO". Using existing adapter.
E 2012-12-12 12:49:18.182
org.datanucleus.api.ApiAdapterFactory getApiAdapter: Error : An error occurred trying to instantiate an instance of the adapter "org.datanucleus.api.jdo.JDOAdapter" : Could not initialize class org.datanucleus.api.jdo.JDOAdapter 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:55:30.133

Appengine JDO/JPA 插件 Wiki[很好地定义](http://code.google.com/p/datanucleus-appengine/wiki/Compatibility)了每个版本的插件需要哪些 DataNucleus jar

# jquery - $('form').submit() 在IE中如何处理

> ID：13818964
> 
> 赞同：0
> 
> 时间：2012-12-11T11:03:42.390
> 
> 标签：jquery, internet-explorer, submit

我没有使用按钮提交我的表单，而是使用以下标记

```
<a id="logmein" class="my_button">LOGIN</a> 
```

它位于表单外部或有时位于表单内部和以下jquery

```
$("#logmein").click(function(e) {
    e.preventDefault();
    $("#login").submit();
    return false;
}); 
```

我一直想知道为什么这在 IE 中不起作用。经过一番调查，我发现长话短说它在 IE 中不起作用，但实际上找到一个简单的解决方案要困难得多。我的网站上有将近 9300 亿个表单，我不想用一些烦人的 MS 友好代码重新编写测试它们来做这样的事情

[jquery的表单提交在IE中不起作用](https://stackoverflow.com/questions/3770324/jquerys-form-submit-not-working-in-ie)

有没有更优雅、更简单的方法来提交这些大坝表格……或者我应该将所有用户重新定向到互联网上的 300 个斯巴达大洞

谢谢收听....

# postgresql-9.1 - 如何制作在 9.0 和 9.1 中正确引入 hstore 的脚本？

> ID：13818972
> 
> 赞同：1
> 
> 时间：2012-12-11T11:04:04.377
> 
> 标签：postgresql-9.1, ddl, postgresql-9.0, hstore

我正在尝试将`hstore`类型引入我正在开发的项目的数据库中。但问题是我的开发机器上安装的 Postgres 服务器版本比生产机器上的版本稍新。虽然我可以简单地在`CREATE EXTENSION`本地执行该命令，但该命令在生产机器上不可用。

有没有办法创建一个同时安装`hstore`在 9.1 和 9.0 上的脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:02:16.257

对于 9.0，您可以使用这样的脚本（例如：create_hstore.sh）：

```
#!/bin/bash

DB=$1
ARGS="-U postgres -h localhost"
CONTRIB=/usr/pgsql-9.0/share/contrib

[ $# -lt 1 ] && exit 1

# Uncomment following lines if necessary
#createdb $ARGS $DB
#createlang $ARGS plpgsql $DB
psql $ARGS -f $CONTRIB/hstore.sql $DB 
```

然后调用它：

```
./create_hstore.sh <db_name> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T11:37:18.767

> ...如果有办法确定系统中当前安装了哪个 PG 版本。

询问 Postgres：

```
psql -c 'select version()' postgres 
```

或者，如果您确信 psql 的版本是同步的：

```
psql --version 
```

# symfony - capifony 身份验证失败

> ID：13818973
> 
> 赞同：3
> 
> 时间：2012-12-11T11:04:06.133
> 
> 标签：symfony, ssh, capistrano, capifony

我正在尝试基于 capifony 和 Symfony2 做一个 Symfony 2 项目部署 Web 应用程序。

它使用 Process 来触发我的“cap deploy”任务并在 Web 浏览器中显示我的输出。

在 shell 中，如果我以用户 www-data（与 Process 使用的相同）身份运行“cap deploy”，我的部署工作正常，因此我的部署任务和身份验证密钥都没有问题。但是，当我从我的网络应用程序调用我的任务时，capifony 告诉我它无法在远程服务器上进行身份验证。

```
triggering start callbacks for `deploy'

* executing `deploy:setdomain'
* executing `deploy'
* executing `deploy:update'
** transaction: start
* executing `deploy:update_code'

triggering before callbacks for `deploy:update_code'

[32m--> Updating code base with checkout strategy[0m

executing locally: "git ls-remote [ myrepo ]"

command finished in 2068ms

* executing "git clone -q -o [ remote server ] [ my repo ] 
/var/www/spinfony/releases/20121211100449 && cd /var/www/spinfony/releases/20121211100449 && git checkout -q -b deploy be53233e51a4c542c3bc8603b424e57f988898a4 && (echo be53233e51a4c542c3bc8603b424e57f988898a4 > /var/www/spinfony/releases/20121211100449/REVISION)"

servers: ["[ remote server ]"]
Password: stty: standard input: Invalid argument
stty: standard input: Invalid argument
stty: standard input: Invalid argument

*** [deploy:update_code] rolling back

* executing "rm -rf /var/www/spinfony/releases/20121211100449; true"

servers: ["[ remote server ]"]
** [deploy:update_code] exception while rolling back: Capistrano::ConnectionError, connection failed for: [ remote server ] (Net::SSH::AuthenticationFailed: [ user ])
connection failed for: [ remote server ] (Net::SSH::AuthenticationFailed: [ user ]) 
```

我试图弄清楚为什么 capifony 似乎期望一个我无法提供的密码，因为我没有从 shell 运行它，而当我从 shell 运行它时，它可以正常工作而无需询问我任何东西。

再一次，从同一个用户调用同一个文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:44:59.580

这是一个已知的“错误”

你需要告诉 capistrano 使用哪个键

尝试将此添加到您的 deploy.rb ：

```
ssh_options[:keys] = %w(/what/ever/.ssh/id_rsa) 
```

资料来源：[http ://adam.goucher.ca/?p=1253](http://adam.goucher.ca/?p=1253)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T20:37:32.440

当您从 Web 应用程序调用任务时，您需要告诉它使用哪个用户。

```
set :user, "www-data"
set :domain, "webserverdomainname.com" 
```

# php - 如何从观察者事件访问 magento 中产品的自定义选项

> ID：13818976
> 
> 赞同：2
> 
> 时间：2012-12-11T11:04:11.123
> 
> 标签：php, magento

我有 2 个自定义选项文本字段与名为 Location To 和 Location From 的产品相关联，

我已经使用称为 getLocationCoords 的方法设置了一个具有 Observer 的模块，`checkout_cart_add_product_complete`我将如何从传递给我的方法的事件对象访问这两个字段。

我需要这两个字段，所以我可以对它们进行反向地理编码，我认为我可以自己完成。

一旦我获得了 2 组坐标，我将如何将它们与产品一起存储，以便在订购时能够看到它们与产品相关联？

=======================编辑添加========================= ===

到目前为止我所尝试的

```
 public function getLocationCoords(Varien_Event_Observer $observer)
{
    // Retrieve the product being updated from the event observer
    $product = $observer->getEvent()->getProduct();

    // Write a new line to var/log/product-updates.log
    $name = $product->getName();
    $sku = $product->getSku();
    Mage::log(
        "{$name} ({$sku}) updated",
        null, 
        'product-updates.log'
    );
    foreach ($product->getOptions() as $o) {
        $type = "Custom Option TYPE: " . $o->getType();
        $title = "Custom Option TITLE: " . $o->getTitle();
         Mage::log(
            "{$type} ({$title}) custom option {$o}",
            null, 
            'product-updates.log'
        );
    }
} 
```

除了获取自定义选项的值之外，这一切都有效，我将尝试下面的答案，看看我在哪里

当我打印出选项对象的 var 转储时，这就是我得到的

```
2012-12-11T15:19:45+00:00 DEBUG (7): array (
  'option_id' => '1',
  'product_id' => '1',
  'type' => 'field',
  'is_require' => '1',
  'max_characters' => '0',
  'sort_order' => '0',
  'default_title' => 'Location To',
  'title' => 'Location To',
  'default_price' => '0.0000',
  'default_price_type' => 'fixed',
  'price' => '0.0000',
  'price_type' => 'fixed',
) 
```

对象没有价值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T13:27:45.903

还有这个活动

```
 $eventName = sprintf('catalog_product_type_prepare_%s_options', $processMode);
    Mage::dispatchEvent($eventName, array(
        'transport'   => $transport,
        'buy_request' => $buyRequest,
        'product' => $product
    )); 
```

使用完整或精简的 processMode。buy_request 应该有您的详细信息，然后您可以在产品上添加新选项

```
$product->addCustomOption('my_option','my_value'); 
```

未经测试，但请让我们知道您的进展情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T12:58:12.307

我相信，在发送该事件时，您将需要从购物车会话中访问销售报价对象，这对我来说很糟糕。尝试[`checkout_cart_product_add_after`[link]](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Checkout/Model/Cart.php#L296)事件并获得对报价项目的访问权限，如下所示：

```
public function geoConversion ($obs)
{
    $item = $obs->getQuoteItem();
    /* @var $item Mage_Sales_Model_Quote_Item */

    //I believe the custom options will be in here, not sure
    $buyRequest = $item->getBuyRequest();

    // your logic 
} 
```

我没有检查过这个，但它是一个更好的事件使用。但是，在自定义添加到购物车流程（例如管理员创建的订单和现有购物车项目的更新）时，有很多注意事项，所以测试、测试、测试。此外，还有另一个可能有用/更合适的事件：[`sales_quote_product_add_after`[link]](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Sales/Model/Quote.php#L957)。

此外，还可以通过为这些产品提供基于 - 或通过观察在 - 中调度的事件的自定义类型模型来实现此行为`Mage_Catalog_Model_Product_Type_Abstract`。

令人头晕目眩。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T00:10:55.233

我能够访问报价项目，并且从中我能够访问自定义属性的值。我有两个选项，经过一些调试后，我意识到我的选项被称为 option_1 和 option_2 ，从中我能够获取值并将它们设置为我的变量。

```
public function getLocationCoords(Varien_Event_Observer $observer)
{
    $item = $observer->getQuoteItem();

    $locationFrom = '';
    $locationTo = '';

    foreach ($item->getOptions() as $o) {   
        if($o['code'] == 'option_2'){
            $locationFrom = $o['value'];
        }
        if($o['code'] == 'option_1'){
            $locationTo = $o['value'];
        }

    }
     Mage::log("the location from = ".$locationFrom);
     Mage::log("the location to = ".$locationTo);

 } 
```

# mysql - 如果任何给定列与其他表上的相应列匹配，我需要加入 2 个表并获得结果

> ID：13818981
> 
> 赞同：0
> 
> 时间：2012-12-11T11:04:29.600
> 
> 标签：mysql, sql, query-optimization

我有 2 个 MySql 表有一些类似的列（存储相同类型的数据）

**例如** ，如果`tableA`有一些字段为`email`, `phone`, `cellphone`,`id` `tableB`也有`email`, `phone`, `mobile`,`id`等

我想从 tableA 中选择所有用户`where email = email or phone=phone or mobile=cellphone or id=id`

但是这两个表中的数据都太大了*> 100万条记录每个表*。

**我们能得到的最好的 Sql Query 是什么？**

我正在使用的是

```
SELECT LN.LEADS360ID ,LN.fundingDate,LN.closedDate  
FROM fsbcorploan.loan  LN inner JOIN fsbcorponline.leads360leads LD ON   
LD.RefId  = LN.LEADS360ID  OR  
LD.Email  = LN.borrower_email OR   
LD.CellPhone = LN.borrower_home_phone OR  
LD.CellPhone = LN.borrower_cell_phone OR  
LD.DayPhone = LN.borrower_home_phone OR  
LD.DayPhone = LN.borrower_cell_phone OR  
LD.EveningPhone = LN.borrower_home_phone OR  
LD.EveningPhone = LN.borrower_cell_phone  
WHERE  dateAdded between '11/01/2012 05:10:00' and '12/11/2012 05:10:00' 
```

**执行需要 13-15 秒**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T22:04:39.890

试试这是否更快......可能不是但值得一试。

```
SELECT LN.LEADS360ID ,LN.fundingDate,LN.closedDate  
FROM fsbcorploan.loan  LN 
where dateAdded between '11/01/2012 05:10:00' and '12/11/2012 05:10:00'
and exists (
  select 1 from fsbcorponline.leads360leads LD
  where LD.RefId  = LN.LEADS360ID
    OR LD.Email  = LN.borrower_email
    OR LD.CellPhone = LN.borrower_home_phone
    OR LD.CellPhone = LN.borrower_cell_phone 
    OR LD.DayPhone = LN.borrower_home_phone
    OR LD.DayPhone = LN.borrower_cell_phone
    OR LD.EveningPhone = LN.borrower_home_phone
    OR LD.EveningPhone = LN.borrower_cell_phone) 
```

如果真的没有办法解决它，您可以拥有某种可以预先计算的“找到匹配”计算列。您将如何执行此操作将取决于此数据更改的频率。

# android - 在 SQLite 数据库中存储单词

> ID：13818982
> 
> 赞同：0
> 
> 时间：2012-12-11T11:04:35.050
> 
> 标签：android, sqlite, android-sqlite, sql-limit

我正在 Android 中创建一个 SQLite 数据库，我必须在其中存储 40k 个单词。我正在从 q txt 文件中获取单词。

我首先将单词存储在列表中，然后从列表存储到数据库。但是当我将单词存储在表中并从中检索时，我只得到 20k 个单词。表的行数也是 20k，但我保存了 40k 字。

```
public void createTable(SQLiteDatabase db, ArrayList<String> words)
{
    int i=0;

        db.execSQL(DATABASE_CREATE);

        System.out.println("created table going further");

        for( i=0; i < words.size();i++)
        {
            String[] pair=words.get(i).split(",");

            insertWord(pair[0].trim(), Integer.parseInt(pair[1].trim()), db);
            System.out.println(i++);            
        }
        System.out.println("in database  "+i+" words are there in db");     
} 
```

我不知道这里发生了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T11:09:06.670

您正在递增`i` **两次**，一次在 for 中，一次在 print 语句中，将其更改为

```
for( i=0; i < words.size();i++)
    {
        String[] pair=words.get(i).split(",");

        insertWord(pair[0].trim(), Integer.parseInt(pair[1].trim()), db);
        System.out.println(i);            
    } 
```

# php - 在媒体 wiki 中查看流媒体视频

> ID：13818983
> 
> 赞同：3
> 
> 时间：2012-12-11T11:04:36.220
> 
> 标签：php, video, mediawiki

我必须查看媒体 wiki 页面中的视频。我已经尝试过一些扩展，比如嵌入式视频。但那些只允许我们查看来自某些服务提供商的视频。我想用我自己的 Flash 播放器查看 mediawiki 页面中的流媒体视频，而且它应该支持所有格式。媒体 wiki 扩展可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T23:16:06.870

我建议您使用[jwPlayer](http://www.longtailvideo.com/jw-player/)，它是一款非常出色的视频播放器，同时支持 flash 和 HTML5，我已经使用了一段时间了，我非常喜欢它，除了免费版本还包含付费版本的所有功能

有一个非常好的文档，他们的 API 包含你在控制媒体流（包括音频和视频）时可能需要的所有内容

关于视频格式支持，他们几乎拥有您可能想到的所有内容。

### 一些有用的链接：

*   [特征](http://www.longtailvideo.com/jw-player/features/)
*   [配置向导](http://www.longtailvideo.com/jw-player/wizard/)：用于自动代码生成
*   [媒体格式支持](http://www.longtailvideo.com/support/jw-player/28836/media-format-support/)

还有更多，他们有一些著名 CMS 的插件，如果没有现成可用的解决方案，您可以找到支持将其集成到您的媒体 wiki

我希望这会有所帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T20:51:42.967

使用[TimedMediaHandler](https://www.mediawiki.org/wiki/Extension:TimedMediaHandler)：它比依赖 Flash 的蹩脚播放器要好得多，因为它使用 HTML5 免费软件播放器。请参阅[有关其在 Wikimedia 项目中的使用的博客文章](https://blog.wikimedia.org/2012/11/08/introducing-wikipedias-new-html5-video-player/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T02:15:11.320

我相当肯定您可以为 MediaWikia 制作自定义标签。我设法找到了此链接，希望对您有所帮助。

> [http://www.mediawiki.org/wiki/Manual:Tag_extensions](http://www.mediawiki.org/wiki/Manual:Tag_extensions)

理论上，您可以创建自己的标签并将视频播放器编程到其中。

# git - 我是否应该将通过 alembic 生成的数据库迁移脚本置于版本控制之下

> ID：13818986
> 
> 赞同：12
> 
> 时间：2012-12-11T11:04:46.667
> 
> 标签：git, sqlalchemy, database-migration, alembic

我在我的实时站点上使用 SQLAlchemy 和 PostgreSQL。对于数据库迁移，我使用的是 alembic。我对执行此操作的最佳策略有一些疑问。

1.  我是否需要将我的数据库迁移脚本置于版本控制之下？

2.  我使用 Fabric 进行自动化部署。我应该手动运行迁移脚本还是让它自动化？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-11T21:25:52.713

如果您希望再次使用您的数据库迁移脚本——是的，请将它们置于版本控制之下。（它有时也有助于调试/取证。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T14:36:55.110

我同意 Mark 关于版本控制的观点：没有理由不包含您的迁移脚本。

至于 Fabric，我更喜欢将迁移排除在外，或者至少在其他任务未隐式调用的任务中。这样就不会错过错误。

# python - 在 Python 中附加到列表的美学方式？

> ID：13818992
> 
> 赞同：1
> 
> 时间：2012-12-11T11:05:19.820
> 
> 标签：python, list, syntax, append

将较长的语句附加到列表时，我觉得`append`阅读起来很尴尬。我想要一种适用于动态列表创建的方法（即不需要先用零初始化等），但我似乎无法想出另一种方法来做我想做的事。

**例子：**

```
import math
mylist = list()
phi = [1,2,3,4] # lets pretend this is of unknown/varying lengths
i, num, radius = 0, 4, 6

while i < num:
    mylist.append(2*math.pi*radius*math.cos(phi[i]))
    i = i + 1 
```

虽然`append`工作得很好，但我觉得它不太清楚：

```
mylist[i] = 2*math.pi*radius*math.cos(phi[i]) 
```

但这不起作用，因为该元素尚不存在于列表中，产生：

```
IndexError: list assignment index out of range 
```

我*可以*将结果值分配给临时变量，然后附加它，但这看起来很丑陋且效率低下。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-11T11:07:45.657

您不需要现有列表并稍后附加到它。只需使用列表理解

列表理解，

*   很快，
*   容易理解，
*   并且可以很容易地移植为生成器表达式

    ```
    >>> import math
    >>> phi = [1,2,3,4]
    >>> i, num, radius = 0, 4, 6
    >>> circum = 2*math.pi*radius
    >>> mylist = [circum * math.cos(p) for p in phi] 
    ```

查看您的代码，这里有一些通用建议

*   不要在迭代中计算已知常数

    ```
    while i < num:
        mylist.append(2*math.pi*radius*math.cos(phi[i]))
        i = i + 1 
    ```

应该写成

```
circum = 2*math.pi
while i < num:
    mylist.append(circum*math.cos(phi[i]))
    i = i + 1 
```

*   而不是`while`使用`for-each`构造

    ```
    for p in phi:
        mylist.append(circum*math.cos(p)) 
    ```

*   如果表达式不可读，则将其分解为多个语句，毕竟 Python 中的所有可读性都很重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T11:08:45.070

在这种特殊情况下，您可以使用列表推导：

```
mylist = [2*math.pi*radius*math.cos(phi[i]) for i in range(num)] 
```

或者，如果您经常进行此类计算，则可以放弃使用列表而改用[NumPy](http://numpy.scipy.org/)：

```
In [78]: import numpy as np

In [79]: phi = np.array([1, 2, 3, 4])

In [80]: radius = 6

In [81]: 2 * np.pi * radius * np.cos(phi)
Out[81]: array([ 20.36891706, -15.68836613, -37.32183785, -24.64178397]) 
```

我发现最后一个版本是最美观的。对于更长的时间`phi`，它也将比使用列表更高效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T11:09:25.543

```
mylist += [2*math.pi*radius*math.cos(phi[i])] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T11:10:59.443

[您可以使用列表连接，但根据此](https://stackoverflow.com/questions/725782/in-python-what-is-the-difference-between-append-and)追加速度是原来的两倍：

```
import math
mylist = list()
phi = [1,2,3,4] # lets pretend this is of unknown/varying lengths
i, num, radius = 0, 4, 6

while i < num:
    mylist += [(2*math.pi*radius*math.cos(phi[i]))]
    i = i + 1 
```

# c# - 正在使用的文件（不打开它）c#

> ID：13818994
> 
> 赞同：0
> 
> 时间：2012-12-11T11:05:21.847
> 
> 标签：c#, file

我在这个程序中遇到了一个奇怪的错误，它从互联网上下载了一张照片，然后我将它转换为 .jpeg，然后我删除了第一张照片（以 .png 格式）。但我收到一个错误：文件正在被另一个进程使用。为什么会这样？我没有打开文件，也没有人使用它。

```
string outFile;
outFile = Path.GetTempFileName();
try
{
    webClient.DownloadFile(foto, outFile);
    if (foto.Substring(foto.Length - 3) == "png")
    {
        System.Drawing.Image image1 = System.Drawing.Image.FromFile(outFile);
        foto = foto.Remove(foto.Length - 3) + "jpg";
        string outFile2 = Path.GetTempFileName();
        image1.Save(outFile2, System.Drawing.Imaging.ImageFormat.Jpeg);
        System.IO.File.Delete(outFile);                      
        outFile = outFile2;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T11:10:01.363

FromFile 保持文件打开，你必须使用这样的东西：

```
// Load image
FileStream filestream;
filestream = new FileStream("Filename",FileMode.Open, FileAccess.Read);
currentImage = System.Drawing.Image.FromStream(filestream);
filestream.Close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:21:04.587

system.Drawing.Image 保留文件，只需将 image1 包装在 using 语句中。

```
 string foto = "http://icons.iconarchive.com/icons/mazenl77/I-like-buttons/64/Style-Config-icon.png";
        string outFile = Path.GetTempFileName(); 
        WebClient webClient = new WebClient();
        try
        {
            webClient.DownloadFile(foto, outFile);
            if (Path.GetExtension(foto).ToUpper() == ".PNG")
            {
                string outFile2 = Path.GetTempFileName();
                using (System.Drawing.Image image1 = System.Drawing.Image.FromFile(outFile))
                {
                    image1.Save(outFile2, System.Drawing.Imaging.ImageFormat.Jpeg);
                }
                System.IO.File.Delete(outFile);
            }
        } 
```

# c# - 减去结果精度问题

> ID：13818995
> 
> 赞同：0
> 
> 时间：2012-12-11T11:05:27.323
> 
> 标签：c#

> **可能重复：**
> [除法返回零](https://stackoverflow.com/questions/9288904/division-returns-zero)

假设你有下面的代码。

```
double d=16/60; //I got d is 0.0 , but I expected d could be 0.27\. 
```

怎么做？谢谢。

**编辑以获得最佳答案:)**

```
double d=16/60f;
d= Math.Round(d, 2); //result being 0.27 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T11:06:42.840

这是由于[整数除法](http://mathworld.wolfram.com/IntegerDivision.html)。

至少有一个操作数需要是浮点类型（`float`或`double`）。

```
double d=16/60f;

double d=16f/60;

double d=16/60d;

double d=16d/60;

double d=16.0/60;

double d=16/60.0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T11:08:15.423

制作演员表

```
double d = (double)16 / (double)60 
```

或者：

```
double d = Convert.ToDecimal(16)/Convert.ToDecimal(60) 
```