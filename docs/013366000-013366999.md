# StackOverflow 问答 13366000-13366999

# c++ - 使用 std::cout 一次而不是多次显示相同数量的数据是否更有效？

> ID：13366002
> 
> 赞同：5
> 
> 时间：2012-11-13T17:53:39.047
> 
> 标签：c++, performance

例如，

像这样显示这些变量是否会更节省内存：

```
std::cout << "First char is " << char1 << " and second char is " << char2; 
```

而不是这个：

```
std::cout << "First char is " << char1;
std::cout << " and second char is " << char2; 
```

当然，我并不真正担心两行代码。但我正在努力学习更有效地编写代码

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T18:02:48.453

由于编译器可以更自由地重新排列参数评估的顺序，因此将其作为单个语句理论上可能会更快。但是，这是在谈论 0.00000000000001% 的差异，这是毫无意义的。不要在意这个——瓶颈在控制台本身。

无论如何，列对齐对可读性非常有帮助，所以试试这个：

```
std::cout <<       "First char is " << char1;
std::cout << " and second char is " << char2; 
```

或这个：

```
std::cout <<       "First char is " << char1
          << " and second char is " << char2; 
```

（我更喜欢第一个，因为我发现在我的文本编辑器中格式化更容易）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:56:48.287

与那么小的程序没有区别。折腾具有可读性。你想要它快速简单还是更易读？

# events - 如何在画布中的形状上触发 touchstart？

> ID：13366004
> 
> 赞同：1
> 
> 时间：2012-11-13T17:53:47.203
> 
> 标签：events, mobile, canvas, touch, shape

我有一个画布，里面有一些形状。所以，我正在做的功能是：按下一些形状，然后我创建一个看起来相同的 HTML 元素并将其放置在形状本身上，然后，当你开始移动鼠标时 - 不释放鼠标按钮 - 这个新的 HTML 元素开始拖动。（因为我不能直接从画布上拖动形状。）

但是 - 它必须在移动设备（主要是 iPAd）上工作，我不知道在那里触发这样的事件。绘制形状的同事使用了 EaselJS，当我检查一个形状时，它只有 onPress、onClick、onMouseOver、onMouseOut 和 onMouseMove 事件。

但是 onPress 不会在 iPad 上触发。我只有 onClick 那里，这对我没有帮助。如果我尝试使用 onTouchStart - 它永远不会触发:(

提前致谢 ;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:24:41.840

我设法解决了这种情况:)

因此，我在其中的画布元素上为 touchstart 和 touchmove 制作了处理程序，当 touchstart 触发时 - 然后我循环遍历画布中的形状并将每个形状的坐标与触摸事件的坐标进行比较。所以，这样我就知道用户触摸了哪个形状。

转储解决方案......实际上它更像是一个黑客......但它有效:)......

希望这对其他人有帮助；）

# jquery - 第一次使用 jQuery 时 Div 没有消失？

> ID：13366007
> 
> 赞同：0
> 
> 时间：2012-11-13T17:54:01.197
> 
> 标签：jquery, html

我想让一个 div 淡入`onClick`，并在单击 div 中的某些内容时再次淡出。但是，出于某种原因，我第一次尝试显示它刚刚出现的 div，但第一次隐藏它以及其他所有显示/隐藏时，它都会正确消失。这是我的淡入淡出功能：

```
<script>
    function show_eform() {
        document.getElementById('eform').style.visibility = 'visible';
        $('#eform').fadeIn('fast');
    }
    function hide_eform() {
        $('#eform').fadeOut('fast', function(){
            document.getElementById('eform').style.visibility = 'hidden';
        });
    }
</script> 
```

对于 div 的 CSS：

```
background: rgba(0, 0, 0, 0.5);
margin: auto;
position: absolute;
left: 0px;
top: 0px;
width: 100%;
height: 100%;
z-index: 50;
visibility: hidden; 
```

触发：

```
<a href="#" onclick="show_eform()"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T18:00:47.030

试试这个

```
function show_eform() {
    $('#eform').fadeIn('fast');
}

function hide_eform() {
    $('#eform').fadeOut('fast');
} 
```

并使用`display: none;`而不是`visibility: hidden;`喜欢：

```
background: rgba(0, 0, 0, 0.5);
margin: auto;
position: absolute;
left: 0px;
top: 0px;
width: 100%;
height: 100%;
z-index: 50;
display: none; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T18:05:49.340

这是一个可以帮助您理解淡入/淡出和切换功能的小提琴：http: [//jsfiddle.net/g9AU9/1/](http://jsfiddle.net/g9AU9/1/)

对于 fadeIn/fadeOut/toggle 类型的函数，您不必设置任何可见性状态，这些函数会为您处理。

HTML

```
<div id="eform" style="display:none;">This is an eform</div>
<div class="toggle_form">Toggle Eform</div>
<div class="hide_form">Hide Eform</div> 
```

CSS

```
#eform { background:orange; padding:10px; }
.toggle_form { background:yellow; padding:10px; cursor:pointer; }
.hide_form { background:lime; padding:10px; cursor:pointer; } 
```

JS

```
show_eform();

function show_eform(){
    $('#eform').fadeIn('fast');
}

function hide_eform() {
    $('#eform').fadeOut('fast');
    $(".toggle_form").hide();
}

$(".toggle_form").click(function() {
    $('#eform').slideToggle('fast');
});

$(".hide_form").click(function() {
    hide_eform();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T18:17:44.670

```
document.getElementById('eform').style.visibility = 'visible'; 
```

使用这一行，您可以直接显示 div，因此只需删除该行并仅使用淡入和淡出功能，您也不需要在动画结束时设置可见性。

# sas - SAS 是否有办法在 .net 中折叠 #region 之类的代码？

> ID：13366012
> 
> 赞同：0
> 
> 时间：2012-11-13T17:54:13.507
> 
> 标签：sas

我在 SAS 程序中有一些我希望能够折叠的注释代码。我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T18:36:53.240

如果您使用的是 Windows，则在增强程序编辑器中编写的任何代码都会自动执行此操作。也就是说，任何`data`or`proc`语句都会打开一个折叠区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T19:01:07.807

如果你想让你的代码更容易阅读，除了 itzy 的注释，你可以使用 %include 来包含来自其他文件的代码；就像 c# 或其他基于 c 的语言一样，您可以为非常小的代码部分编写单独的模块，并通过 %include 将它们引入。您甚至可以将它们作为宏引入以重复调用它们。

# ruby - 学习 Ruby Hard Way 前。48

> ID：13366016
> 
> 赞同：2
> 
> 时间：2012-11-13T17:54:19.707
> 
> 标签：ruby

我正在努力学习 Ruby，并且已经完成了 Zed Shaw 的 Learn Ruby the Hard Way 的大部分内容，但是这个最新的练习让我完全难过。这是一种反向练习，让您创建一个可以通过提供的代码进行测试的类 Lexicon。

您应该创建 Lexicon 以便它可以通过用户输入并从中获取各种数据。到目前为止，我所拥有的所有测试方向输入，例如：

```
class Lexicon

Pair = Struct.new(:qualifier, :value)
userinput = gets.chomp()
userwords = userinput.split()

for i in userwords
    if userwords[i].include?("north", "south", "east", "west")
        directions = Pair.new("direction", userwords[i])
    else
        i++
    end
end     
end 
```

对应的测试代码为：

```
require 'test/unit'
require_relative "../lib/lexicon"

class LexiconTests < Test::Unit::TestCase

Pair = Lexicon::Pair
@@lexicon = Lexicon.new()

def test_directions()
assert_equal([Pair.new(:direction, 'north')], @@lexicon.scan("north"))
result = @@lexicon.scan("north south east")
assert_equal(result, [Pair.new(:direction, 'north'),
             Pair.new(:direction, 'south'),
             Pair.new(:direction, 'east')])
end 
```

提前感谢大家的帮助。我知道我可能还很遥远，但我正在努力完成学习 Ruby 的艰难之路！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-03T05:16:52.760

您应该将 for 循环包装在 scan 方法中，因为这是测试用例所期望的。scan 方法还需要返回“Pairs”列表。

尝试这样的事情。

```
def scan(userwords)
  sentence = Array.new
  userwords.each { |word|
    if word.include?("north", "south", "east", "west")
      sentence.push(Pair.new(:direction, word))
  }
  sentence
end 
```

这应该可以帮助您朝着正确的方向开始。

# c# - 为 AppFabric 模拟缓存回调的测试用例

> ID：13366021
> 
> 赞同：1
> 
> 时间：2012-11-13T17:54:42.617
> 
> 标签：c#, testdriven.net, appfabric-cache

**在控制台应用程序中，如果从缓存中添加或删除项目，**我可以**成功地**从缓存集群中获得回调。

如何在测试驱动环境中执行相同的测试。**当我编写测试用例时，我没有触发 OnCacheChange ..**

请帮忙。

谢谢..

以下代码适用于控制台应用程序...

```
 static void Main(string[] args)
    {
        dtStart = DateTime.Now;
        dtEnd = DateTime.MinValue;

        string line;
        var factory = new DataCacheFactory();
        var key = "mycachekey1";
        var cache = factory.GetCache("default");
        var d = cache.AddCacheLevelCallback(DataCacheOperations.AddItem | DataCacheOperations.RemoveItem | DataCacheOperations.ReplaceItem, OnCacheChange);
        Console.WriteLine("Cache Name = {0} : DelegateId = {1}",d.CacheName,d.DelegateId);
        var obj = cache[key];
        if (obj == null)
        {
            Console.WriteLine("data was not cached.");
            Console.WriteLine("Enter your data to be cached.");
            line = Console.ReadLine();
            cache.Add(key, line);
        }

        Console.WriteLine("getting data from cache: {0}", cache[key]);

        Console.WriteLine("type yes to remove data for cache key {0} : ", key);
        line = Console.ReadLine();
        if (line.ToString().Length > 0)
        {
            cache.Remove(key);
            Console.WriteLine("cache removed");
            Console.ReadLine();
        }

    }

    static void OnCacheChange(string cacheName, string region, string key, DataCacheItemVersion itemVersion, DataCacheOperations operationId, DataCacheNotificationDescriptor notificationDescriptor)
    {
        dtEnd = DateTime.Now;
        TimeSpan timeSpan = dtEnd - dtStart;
        Console.WriteLine("Event to be fired in seconds = {0}", timeSpan.Seconds);

        Console.WriteLine("A cache-level notification has been triggered. Following are the details:");
        Console.WriteLine("Cache: " + cacheName);
        Console.WriteLine("Region: " + region);
        Console.WriteLine("Key: " + key);
        Console.WriteLine("Operation: " + operationId.ToString());
        Console.WriteLine("Notification Description: " + notificationDescriptor.DelegateId);
        Console.WriteLine("Finished executing the cache notification callback.");
    } 
```

**以下 TestMethod 无法触发 OnCacheChange 事件。**

```
 [TestMethod]
    public void CacheCallBackFunctionTest()
    {
        _eventFired = false;
        _startDateTime = DateTime.Now;

        var key = "mycachekey2";
        var cache = CachingManager.CacheFactory().GetCache("default");
        cache.AddCacheLevelCallback(DataCacheOperations.AddItem | DataCacheOperations.RemoveItem | DataCacheOperations.ReplaceItem, OnCacheChange);
        cache.Add(key, "my value 1");
        cache.Remove(key);
        System.Threading.Thread.Sleep(10000);
        Assert.IsTrue(_eventFired);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:07:00.467

从您的问题范围来看，尚不清楚测试回调实际上是感人的`_eventFired`。但是，这应该有效：

```
bool eventFired = false;
var reset = new System.Threading.ManualResetEvent(true);
cache.AddCacheLevelCallback(DataCacheOperations.AddItem | DataCacheOperations.RemoveItem,
    (cacheName, region, key, itemVersion, operationId, notificationDescriptor) => {
        eventFired = true;
        reset.Set();
    });

cache.Add(key, "my value 1");
if (!reset.WaitOne(TimeSpan.FromSeconds(10)))
{
    throw new Exception("Didn't receive cache callback after 10 seconds");
}
Assert.IsTrue(eventFired); 
```

上面我将回调内联编写为 lambda，以便清楚地`_eventFired`了解回调的更新。我还使用了`ManualResetEvent`, 以便在触发回调时继续测试线程，而不是等待硬编码的 10 秒。

# android - 应用程序在主页按钮后重新进入时崩溃。使用标签

> ID：13366022
> 
> 赞同：0
> 
> 时间：2012-11-13T17:54:45.120
> 
> 标签：android, android-tabhost

编辑：已解决。问题是 tabHost.ClearAllTabs()。在调用此函数之前，我必须将 currentActiveTab 设置为 0 - 零，如下所示：tabHost.setCurrentTab(0);

所以，对我来说，解决方案是：

```
tabHost.setCurrentTab(0);
tabHost.clearAllTabs(); 
```

如果我每次调用 onResume() 时都没有调用 clearAllTabs，那么除了那些已经存在创建大量标签的标签之外，还会创建四个新标签...

编辑结束。

我的申请有问题。它是一个库项目并使用 TabActivity，请参见下面的代码。所有选项卡处理都在 onResume() 中，因为用户可以“暂停”(onStop()) 应用程序、连接到 Internet 并重新进入应用程序。

如果应用程序使用后退按钮关闭，应用程序可以正常启动并重新启动。但是，如果用户使用主页按钮，在任何活动上“暂停”放置 ActivityOne，我在重新输入时会收到错误消息。错误是由我的代码中的第一个 tabHost.addTab(spec) 中的 NULLPOINTEREXCEPTION 引起的“无法恢复活动”（在 if 语句之前）。

图书馆项目 = com.tabsactivity.library

此应用程序使用的所有布局和类都在 libraryproject 中。

ActivityZero 在 AndroidManifest.XML 中是这样声明的

```
<activity 
    android:name="com.tabsactivity.library.ActivityZero"
    android:windowSoftInputMode="stateHidden">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity>
<activity
    android:name="com.tabsactivity.library.ActivityOne"
    android:windowSoftInputMode="stateHidden" >
</activity>
...
<activity
    android:name="com.tabsactivity.library.ActivityFour"
    android:windowSoftInputMode="stateHidden" >
</activity> 
```

ActivityZero.class

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    res = getResources();
    appPref =  getSharedPreferences("Prefs", MODE_PRIVATE);
    prefEditor = appPref.edit(); 
    if (getApplicationContext().getPackageName().trim().equals("com.app")) prefEditor.putBoolean("demo", false);
        else prefEditor.putBoolean("demo", true).commit();      
    }
    @Override
    protected void onResume() {
        super.onResume();       
        ConnectivityManager conMgr = ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo ni = conMgr.getActiveNetworkInfo();
        if (ni == null) prefEditor.putBoolean("connected_net", false).commit();
            else prefEditor.putBoolean("connected_net", true).commit();
    this.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);       

        tabHost = getTabHost();
        tabHost.clearAllTabs();

        intent = new Intent().setClass(this, com.tabsactivity.library.ActivityOne.class);               
        spec = tabHost.newTabSpec("One").setIndicator("One", res.getDrawable(R.drawable.ic_tab)).setContent(intent);
        tabHost.addTab(spec);

        if ( (appPref.getBoolean("connected_net", false) && appPref.getBoolean("demo", true)) || !appPref.getBoolean("demo", true)) {
            intent = new Intent().setClass(this, com.tabsactivity.library.ActivityTwo.class);
            spec = tabHost.newTabSpec("Two").setIndicator("Two", res.getDrawable(R.drawable.ic_tab)).setContent(intent);
            tabHost.addTab(spec);

            intent = new Intent().setClass(this, com.tabsactivity.library.ActivityThree.class);
            spec = tabHost.newTabSpec("Three").setIndicator("Three", res.getDrawable(R.drawable.ic_tab)).setContent(intent);
            tabHost.addTab(spec);

            intent = new Intent().setClass(this, com.tabsactivity.library.ActivityFour.class);
            spec = tabHost.newTabSpec("Four").setIndicator("Four", res.getDrawable(R.drawable.ic_tab)).setContent(intent);
            tabHost.addTab(spec);
        }   else {
                Toast.makeText(this, "Please make sure you have a working internetconnection!", Toast.LENGTH_LONG).show();
    }
    tabHost.setCurrentTab(0);
} 
```

错误日志：

```
11-13 20:16:36.377: W/dalvikvm(9337): threadid=1: thread exiting with uncaught exception (group=0x400259f8)
11-13 20:16:36.387: E/AndroidRuntime(9337): FATAL EXCEPTION: main
11-13 20:16:36.387: E/AndroidRuntime(9337): java.lang.RuntimeException: Unable to resume activity {com.app/com.tabsactivity.library.ActivityZero}: java.lang.NullPointerException
11-13 20:16:36.387: E/AndroidRuntime(9337):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:3347)
11-13 20:16:36.387: E/AndroidRuntime(9337):     at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:3362)
11-13 20:16:36.387: E/AndroidRuntime(9337):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2162)
11-13 20:16:36.387: E/AndroidRuntime(9337):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-13 20:16:36.387: E/AndroidRuntime(9337):     at android.os.Looper.loop(Looper.java:144)
11-13 20:16:36.387: E/AndroidRuntime(9337):     at android.app.ActivityThread.main(ActivityThread.java:4937)
11-13 20:16:36.387: E/AndroidRuntime(9337):     at java.lang.reflect.Method.invokeNative(Native Method)
11-13 20:16:36.387: E/AndroidRuntime(9337):     at java.lang.reflect.Method.invoke(Method.java:521)
11-13 20:16:36.387: E/AndroidRuntime(9337):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
11-13 20:16:36.387: E/AndroidRuntime(9337):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
11-13 20:16:36.387: E/AndroidRuntime(9337):     at dalvik.system.NativeStart.main(Native Method)
11-13 20:16:36.387: E/AndroidRuntime(9337): Caused by: java.lang.NullPointerException
11-13 20:16:36.387: E/AndroidRuntime(9337):     at android.widget.TabWidget.setCurrentTab(TabWidget.java:339)
11-13 20:16:36.387: E/AndroidRuntime(9337):     at android.widget.TabWidget.focusCurrentTab(TabWidget.java:363)
11-13 20:16:36.387: E/AndroidRuntime(9337):     at android.widget.TabHost.setCurrentTab(TabHost.java:320)
11-13 20:16:36.387: E/AndroidRuntime(9337):     at android.widget.TabHost.addTab(TabHost.java:213)
11-13 20:16:36.387: E/AndroidRuntime(9337):     at com.tabsactivity.library.ActivityZero.onResume(ActivityZero.java:209)
11-13 20:16:36.387: E/AndroidRuntime(9337):     at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1255)
11-13 20:16:36.387: E/AndroidRuntime(9337):     at android.app.Activity.performResume(Activity.java:3864)
11-13 20:16:36.387: E/AndroidRuntime(9337):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:3337)
11-13 20:16:36.387: E/AndroidRuntime(9337):     ... 10 more
11-13 20:16:36.437: D/dalvikvm(9337): GC_FOR_MALLOC freed 5320 objects / 572584 bytes in 48ms 
```

# php - 创建会话数据

> ID：13366023
> 
> 赞同：0
> 
> 时间：2012-11-13T17:54:51.290
> 
> 标签：php, codeigniter, codeigniter-2

这是我的功能。我正在尝试根据表单的输入创建一些新的会话数据。正在创建用户数据（即`user_url`），但是`$set_url`没有存储该值...

我究竟做错了什么？这是一个 ajax 函数，可以正常工作。但是，我需要`$data['web_url']`在成功视图中存储和打印（即）。

```
public function web_embed()
{
    $set_url = $this->input->post('web_address'); // grabs web URL entered in form - creates variable        
    $this->session->set_userdata('user_url', $set_url); // set user url session

    $data['web_url'] = $this->session->userdata('user_url'); // grab session                
    $data['iframe_content'] = 'partials/web_url_success'; // displays view

    if ($this->input->post('ajax')) { // is 'ajax' variable from jQuery function exists, load:   
        $this->load->view($data['iframe_content'], $data);           
    }
} 
```

**请注意**我已经做了一个`print_r($this->session->userdata);`并且`[user_url] =>`在那里......只是没有价值。我在成功视图上打印了这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T18:41:25.203

抱歉，上面的评论回答了我自己的问题……我忘了我是从 jQuery ajax 函数发布的，而不是表单本身。所以输入名称不同...

改变了 `$set_url = $this->input->post('web_address');`

到：

`$set_url = $this->input->post('url');`

它奏效了！！！

# python - pylzma 流（解）压缩缓冲区大小

> ID：13366024
> 
> 赞同：2
> 
> 时间：2012-11-13T17:55:08.567
> 
> 标签：python, lzma

在 github.com/fancycode/pylzma/blob/master/doc/usage.txt 有一个流（解）压缩的示例用法，但是，它总是读取 1 个字节，显然，这会变得相对较慢。

但是，以更大的大小（例如 65k）读取并按`obj.decompress()`原样执行大文件会成为问题，因为显然，结果 pylzma 将大部分数据存储在内部，然后将其全部解压缩到`obj.flush()`.

该`decompress`方法有一个`bufsize`参数（默认情况下似乎是 128k）。将其设置为超过 30*read_size（30 是近似压缩比）使解压缩按预期工作（并且非常快）；但是，这显然会中断，例如，几 GB 的零字节（因为压缩率会高得多）。

因此，问题是：如何使用 pylzma 正确（解）压缩文件（使用适当的缓冲区大小来提高速度）？

# text - 单击操作时，它无法在控件中显示

> ID：13366031
> 
> 赞同：1
> 
> 时间：2012-11-13T17:55:20.197
> 
> 标签：text, label

问题 = 无法将按钮操作（设置标签文本）反映到标签

* * *

- 说明背景 -

我定义了两个基本按钮（作为操作）并且我有一个标签（用作控件） - 见下文

* * *

```
@interface ViewController : UIViewController{

    IBOutlet UILabel *stopWatchLabel;

}
- (IBAction)onStartPressed:(id)sender;
- (IBAction)onStopPressed:(id)sender;
@end 
```

* * *

我已经在下面暗示了它，这样当我单击“开始”或“停止”按钮时，它应该反映在标签中——见下文——

```
- (IBAction)onStartPressed:(id)sender {
    stopWatchLabel.text = @"START PRESSED";
}

- (IBAction)onStopPressed:(id)sender {
 stopWatchLabel.text = @"STOP PRESSED";
} 
```

* * *

但是，当我单击 START 按钮或 STOP 按钮（当我运行程序时）时，什么也没有发生？

有人请告诉我我错过了什么

* * *

# c# - 我可以在我的 Windows 窗体上弹出一个帮助“语音气泡”吗？

> ID：13366037
> 
> 赞同：2
> 
> 时间：2012-11-13T17:55:47.620
> 
> 标签：c#, winforms

我有一个带有各种控件的 Windows 窗体，所有控件都使用`TableLayoutPanel`等定位。

当用户第一次使用我的表单时，我想弹出一个语音气泡类型的东西，其中包含有关如何使用表单的信息。我说气泡是因为我希望“尾巴”指向我正在解释的表格部分。这将出现在表单的一部分上（遮住一些控件）。

理想情况下，我希望这个语音气泡是椭圆形/圆形的，具有透明的角，这样它看起来更具视觉吸引力，而不是纯粹的矩形。

弹出窗口应该在很短的时间间隔后消失，或者如果用户与表单上的控件交互，则立即消失。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:09:14.187

只是为了提供一个答案，以便问题不会保持“未回答”，工具提示控件现在具有一个`IsBalloon`属性，可以使其以所需的样式显示。

请参阅[此链接](http://www.c-sharpcorner.com/uploadfile/mahesh/how-to-create-a-balloon-tooltip-in-C-Sharp-and-windows-forms/)以获取摘要。

# sql-server - 删除查询中的重复项

> ID：13366043
> 
> 赞同：0
> 
> 时间：2012-11-13T17:56:01.247
> 
> 标签：sql-server, sql-server-2005, duplicates, duplicate-removal

我有超过 20 列的视图。

我有以下情况：

**表十**

```
Column A | Column B | Column C

   CA1   |   CB2    |   CC7
   CA2   |   CB2    |   CC8
   CA3   |   CB3    |   CC5
   CA4   |   CB4    |   CC6 
```

如何进行以下查询？

*   仅显示 3 行（和） `CA1`，因为我需要通过以下条件删除该行：`CA3``CA4``CA2`

    1.  `CB2`被复制在`Column B`
    2.  `CC7`不同于`CC8`_`Column C`

选择也有超过 20 列，我不能（也许是我的错）做一个不同的或分组依据。

我试图将它与自身交叉但也不起作用，因为在第二个查询中加入了两次相同的记录。

请指教！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T18:11:34.560

尝试：

```
SELECT 
   mina.colB, 
   mina.min_a, 
   tblx.colC
FROM  tblx INNER JOIN
(SELECT 
    colB, 
    MIN(colA) AS min_a
    FROM  tblx
GROUP BY
    colB
) mina ON 
mina.min_a = tblx.colA AND 
mina.colB = tblx.colB 
```

或者您可以使用 max(colc) 而不是 min(colA)，如果您希望这样选择它们

# c# - 在 MVC 操作中使用基类作为重载，但收集所有数据

> ID：13366048
> 
> 赞同：2
> 
> 时间：2012-11-13T17:56:25.170
> 
> 标签：c#, javascript, asp.net-mvc, asp.net-mvc-3, overloading

我目前有 2 个继承基本 BaseGridRowModel 的类，例如：

*   人行模型
*   CityRowModel

我创建了一个控制器，它接受基础作为输入，并将其推送到缓存以供以后使用。

```
 [HttpPost]
   public ActionResult RowCheckedStatusChanged(BaseGridRowModel row)
   {
       try
       { 
```

然后我调用该方法，在 ajax 调用中将网格行推送到控制器。

```
 $.ajax({
           type: 'POST',
           url: "/Central/MyGrid/RowCheckedStatusChanged",
           data: rowData.toJSON(),
           cache: false, 
```

然而，所有额外的字段都丢失了，因为它们不是基础的一部分。这总是变为 null 并引发异常。

```
 var rowData = (row as PersonRowModel);
          if (rowData == null)
          {
             throw new Exception("Row must inherit BaseGridRowModel.");
          } 
```

我稍后需要这些字段来从缓存中取回。有什么办法可以拯救他们吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T18:03:38.387

问题是模型绑定器将您的数据绑定到 BaseGridRowModel。本质上，它是将发布的数据反序列化为 BaseGridRowModel。

所以模型绑定器不够聪明，无法识别额外的字段并神奇地确定有一个类继承自动作中的类并使用它。

如果您想要这些数据，您可能会认为您可以为各种类型创建重载，然后将其汇集到通用版本中，但我相信这也行不通。您可以创建自己的自定义模型绑定器，该绑定器将查找额外数据并创建正确的类型，然后有效地将其向上转换到 BaseGridRowModel

或者，您可以只查看 HttpContext.Current.Request.Form 以获取额外的字段。或者您可以将字段添加到方法中......即......

```
public ActionResult RowCheckedStatusChanged(BaseGridRowModel row, string otherdataItem1, string otherdataItem2) 
```

# codeigniter - CodeIgniter - 全局加载每个控制器的所有表

> ID：13366049
> 
> 赞同：0
> 
> 时间：2012-11-13T17:56:29.543
> 
> 标签：codeigniter

我需要为每个控制器加载大约 10 个表。现在我正在每个控制器中加载每一个。只需加载一次并在每个控制器中访问它们的最佳方法是什么。我尝试将它们放在 system/core/Controller.php 中`class CI_Controller`，它可以工作。但我确信这不是最好的方法。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:14:40.417

也许 MVC 可能是关键？

[http://ellislab.com/codeigniter/user_guide/general/models.html](http://ellislab.com/codeigniter/user_guide/general/models.html)

通常不会加载整个数据库表...我的意思是...您会将其加载到全局常量中吗？

老式的做事方式是在需要时加载所需的内容。当你需要它时，你加载它。如果你不需要它，为什么要加载它？

也许我不明白。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T18:16:19.553

如果您真的需要一次加载所有内容，您可以创建一个辅助方法，您将在每个控制器的构造函数中调用该方法。

链接到创建帮助器方法 - [CodeIgniter：创建新的帮助器？](https://stackoverflow.com/questions/804399/codeigniter-create-new-helper)

# javascript - Javascript：带有 document.activeElement 的变量

> ID：13366050
> 
> 赞同：1
> 
> 时间：2012-11-13T17:56:33.250
> 
> 标签：javascript, variables

我想创建一个变量以使我的代码更通用。这是我正在处理的代码：

```
eventHandler: function(event) {
    if (event.keyCode == KEY_DOWN) {
        if (this.hasNextSibling(document.activeElement.parentNode)) {
             this.setFocus(document.activeElement.parentNode.nextSibling.firstChild);
         } else {
              this.debug("out");
         }
    }
},
setFocus: function(item)
{
document.activeElement.tabIndex = "-1";
item.focus();
document.activeElement.tabIndex = "0";
},
... 
```

我有“document.activeElement.parentNode.nextSibling.firstChild”的部分是问题所在。为了能够重用代码，我首先要做的是设置一个像这样的变量：

```
var test = document.activeElement.parentNode.nextSibling.firstChild; /*CHANGE HERE*/
eventHandler: function(event) {
    if (event.keyCode == KEY_DOWN) {
        if (this.hasNextSibling(document.activeElement.parentNode)) {
             this.setFocus(test); /*CHANGE HERE*/
         } else {
              this.debug("out");
         }
    }
},
setFocus: function(item)
{
document.activeElement.tabIndex = "-1";
item.focus();
document.activeElement.tabIndex = "0";
},
... 
```

代码无法编译。我尝试了许多不同的方法，例如方法引用，但似乎没有任何效果。有人有想法吗？

多谢

编辑：这是我真正想要的：

```
var x = parentNode.nextSibling.firstChild;
eventHandler: function(event) {
    if (event.keyCode == KEY_DOWN) {
        if (this.hasNextSibling(parent)) {
             this.setFocus(document.activeElement.x);
         } else {
              this.debug("out");
         }
    }
},
setFocus: function(item)
{
document.activeElement.tabIndex = "-1";
item.focus();
document.activeElement.tabIndex = "0";
}, 
```

语义不正确。有没有办法我可以做到这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:08:30.470

问题是您试图在对象的主体中声明一个变量，其中只有键值对有效。尝试：

```
test : document.activeElement.parentNode.nextSibling.firstChild,
eventHandler: function(event) {
    if (event.keyCode == KEY_DOWN) {
        if (this.hasNextSibling(document.activeElement.parentNode)) {
             this.setFocus(this.test); /*CHANGE HERE*/
         } else {
              this.debug("out");
         }
    }
},
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T18:05:40.167

由于只要有按键，您的 activeElement 就不会相同，因此将其保留在函数之外是没有意义的。对于您编辑的答案，我能想到的唯一方法是您的代码应该是

```
var x = "parentNode.nextSibling.firstChild";//edited here
eventHandler: function(event) {
    if (event.keyCode == KEY_DOWN) {
        if (this.hasNextSibling(parent)) {
             this.setFocus(eval("document.activeElement." + x));//edited here
         } else {
              this.debug("out");
         }
    }
},
setFocus: function(item)
{
document.activeElement.tabIndex = "-1";
item.focus();
document.activeElement.tabIndex = "0";
}, 
```

# c++ - GNU C++ 编译器中的段错误

> ID：13366053
> 
> 赞同：2
> 
> 时间：2012-11-13T17:56:43.070
> 
> 标签：c++, arrays, templates, g++

我试图让这段代码在 GNU C++ 编译器 (g++) 中编译，但它似乎不起作用。我用过 Vis Studio 和 Code::Blocks，它工作得很好。我知道编译器在某些方面有所不同，并且想知道是否有人可以帮助我找到我的错误。

```
#include <iostream>
using namespace std;

template <class T>
class Array
{
    private:
        T *m_array;
        int m_size;
    public:
        Array();
        Array(Array& other);
        Array(int size);
        ~Array();
        void setValue(int index, T val);
        T getValue(int index);
        int getSize();
        Array &operator=(Array &other);
        Array &operator+(Array &other);
        Array &operator+(T val);
        inline friend ostream &operator<<(ostream &other, Array<T> arr)
        {
            for (int i = 0; i < arr.getSize(); i++)
            {
                other << arr.getValue(i) << " ";
            }
        }
};

template<class T>
Array<T>::Array()
{
    m_array =  NULL;
    m_size = 0;
}
template<class T>
Array<T>::Array(int size)
{
    m_size = size;
    m_array = new T[size];
}
template<class T>
Array<T>::Array(Array& other)
{
    *this = other;
}
template<class T>
Array<T>::~Array()
{
    delete[] m_array;
}
template<class T>
void Array<T>::setValue( int index, T val )
{
    m_array[index] = val;
}
template<class T>
T Array<T>::getValue( int index )
{
    return m_array[index];
}
template<class T>
Array<T> &Array<T>::operator=( Array& other )
{
    if (m_array != NULL)
        delete[] m_array;

    m_size = other.getSize();

    m_array = new T[m_size];

    for (int i = 0; i < other.getSize(); i++)
    {
        m_array[i] = other.getValue(i);
    }

    return *this;
}
template<class T>
Array<T> &Array<T>::operator+( Array &other )
{
    for (int i = 0; i < m_size; i++)
    {
        m_array[i] += other.getValue(i);
    }

    return *this;
}
template<class T>
Array<T> &Array<T>::operator+( T val )
{
    for (int i = 0; i < m_size; i++)
    {
        m_array[i] += val;
    }

    return *this;
}
template<class T>
int Array<T>::getSize()
{
    return m_size;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:02:40.000

1) 你应该真正了解 const-correctness

2) 这段代码看起来很可疑

```
template<class T>
Array<T> &Array<T>::operator+( Array &other )
{
    for (int i = 0; i < m_size; i++)
    {
        m_array[i] += other.getValue(i);
    }

    return *this;
} 
```

如果`other`Array 的元素较少怎么办？您将有未定义的行为（可能包括分段错误）

3）你为什么使用 `m_array[i] += other.getValue(i);`？因为`m_array`是私人的？请记住，访问是在类级别而不是对象级别定义的，因此`m_array[i] = other.m_arry[i]`也可以。

4) 我建议你应该阅读[一本好的 C++ 书籍](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)

**5) 只有在发布使用**数组类的代码时才能确定段错误的确切原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T18:06:52.167

我看到两个问题：

1.  使用`const &`，否则您的数组将被复制：

    内联好友 ostream &operator<<(ostream &other, const Array &arr)

2.  不要在没有初始化指针的情况下在构造函数中使用赋值运算符：

    Array::Array(Array& other) { *this = other; }

这至少应该是：

```
Array<T>::Array(const Array& other)
    : m_array(0)
{
    *this = other;
} 
```

我猜这就是它崩溃的地方：

```
template<class T>
Array<T> &Array<T>::operator=( Array& other )
{
    if (m_array != NULL)
        delete[] m_array; // In copy constructor, deletes uninitialized pointer!

    m_size = other.getSize();

    m_array = new T[m_size];

    for (int i = 0; i < other.getSize(); i++)
    {
        m_array[i] = other.getValue(i);
    }

    return *this;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T18:05:14.740

打开你的警告：

```
g++ -std=c++0x -pedantic -Wall -Werror -g    x.cc   -o x
cc1plus: warnings being treated as errors
x.cc: In function ‘std::ostream& operator<<(std::ostream&, Array<T>)’:
x.cc:27: error: no return statement in function returning non-void 
```

不正确的功能是：

```
inline friend ostream &operator<<(ostream &other, Array<T> arr) 
```

# php - PHP 变量被覆盖为 Null

> ID：13366055
> 
> 赞同：0
> 
> 时间：2012-11-13T17:56:48.070
> 
> 标签：php, session

我在维护会话中的变量时遇到问题。我已经确认相同的会话 ID 通过页面导航持续存在，并且我还使用`Print_r($_SESSION)`来监视变量。

我正在使用四页。

*   索引.php
*   客户信息.php
*   custbilling.php
*   确认.php

在第一页上，我使用表单将数据发送到下一页。

```
 <form name="prescreen" action="custinfo.php" method="post">
        <label>From DIA</label>
        <input name="startlocation" id="fromdia" type="radio" value="From DIA">
        <label>To DIA</label>
        <input name="startlocation" id="todia" type="radio" value="To DIA">
        <label>Choose Location:</label>
        City:<input name="city" id="city" type="text" />
        <span>or</span><br />
        Zipcode:<input name="zipcode" id="zipcode" type="text" />
    <h3>When do you need picked up?</h3>
        <label>Choose Date:</label>
        <input name="date" id="date" type="datetime-local" />
        <label>Choose Time:</label>
        <input name="time" id="time" type="time" />
    <input type="submit"  value="Get a Ride Now!" class="textbtn"></input>
    </form> 
```

在 custinfo.php 上，然后我在文档的头部使用它：

```
 <?php
    session_start();

    $_SESSION['testvar'] = 'THIS IS A TEST';
    $startlocation = $_POST["startlocation"];
    $city = $_POST["city"];
    $zipcode = $_POST["zipcode"];
    $date = $_POST["date"];
    $time = $_POST["time"];

    //Assign variables to the Session
    $_SESSION['startlocation'] = $startlocation;
    $_SESSION['city'] = $city;
    $_SESSION['zipcode'] = $zipcode;
    $_SESSION['date'] = $date;
    $_SESSION['time'] = $time;

?> 
```

变量被正确读入并存储在数组中。然后我在 custinfo.php 页面中使用这个表单：

```
 <form name="customerinfo" action="custbilling.php" method="post">
        <label>Contact Name</label>
        <input name="contactname" id="contactname" type="text">
        <label>Contact Email</label>
        <input name="contactemail" id="contactemail" type="text">
        <label>Contact Phone</label>
        <input name="contactphone" id="contactphone" type="text" />
        <?php
        if($_SESSION['startlocation'] == "From DIA")
        {
            echo '<hr />';
            echo '<label><b>To Location:</b></label>';
            echo 'Address1:<input name="toaddress1" id="toaddress1" type="text" />';
            echo 'Address2:<input name="toaddress2" id="toaddress2" type="text" />';
            echo 'City:<input name="tocity" id="tocity" type="text" />';
            echo 'Zip:<input name="tozip" id="tozip" type="text"  />';
            echo '<hr />';
        }
        else
        {
            echo '<hr />';
            echo '<label><b>From Location</b></label>';
            echo 'Address1:<input name="fromaddress1" id="fromaddress1" type="text" />';
            echo 'Address2:<input name="fromaddress2" id="fromaddress2" type="text" />';
            echo 'City:<input name="fromcity" id="fromcity" type="text" />';
            echo 'Zip:<input name="fromzip" id="fromzip" type="text" />';
            echo '<hr />';
        }

        ?>

        <input type="submit"  value="Book Your Ride!" class="textbtn"></input>
        </form> 
```

在 custbilling.php 页面的顶部，我将所有内容都拉进来，如下所示：

```
<?php
session_start();

/*Vars from Customer Info */
$contactname = $_POST['contactname'];
$contactemail = $_POST['contactemail'];
$contactphone = $_POST['contactphone'];
if($_SESSION['startlocation'] == "To DIA")
{
    $address1 = $_POST['fromaddress1'];
    $address2 = $_POST['fromaddress2'];
    $city = $_POST['fromcity'];
    $zipcode = $_POST['fromzip'];
}
else
{
    $address1 = $_POST['toaddress1'];
    $address2 = $_POST['toaddress2'];
    $city = $_POST['tocity'];
    $zipcode =$_POST['tozip'];
}

//Assign Variables to the Session
$_SESSION['contactname'] = $contactname;
$_SESSION['contactemail'] = $contactemail;
$_SESSION['contactphone'] = $contactphone;
$_SESSION['address1']=$address1;
$_SESSION['address2']=$address2;
$_SESSION['city']= $city;
$_SESSION['zipcode'] = $zipcode;

?> 
```

此时，我正在显示如下信息：\

```
<h1><?php echo $_SESSION['testvar']; ?></h1>
    <h2>Travel Information</h2>
    <h3>Please fill out this form:</h3>
    <p>Direction of Travel: <?php echo $_SESSION['startlocation']; ?></p>
    <p>LocationTo: <?php echo $_SESSION['city'] , $_SESSION['zipcode']; ?></p>
    <p>Date: <?php echo $_SESSION['date']; ?></p>
    <p>Time: <?php echo $_SESSION['time']; ?></p>
    <p>Customer Name: <?php echo $_SESSION['contactname']; ?></p>
    <p>Customer Email: <?php echo $_SESSION['contactemail']; ?></p>
    <p>Customer Phone: <?php echo $_SESSION['contactphone']; ?></p>
    <p>Address Information: <br />
        <span>Address 1:</span><?php echo $_SESSION['address1']; ?><br />
        <span>Address 2:</span><?php echo $_SESSION['address2']; ?><br />
        <span>City:</span><?php echo $_SESSION['city']; ?><br />
        <span>ZipCode:</span><?php echo $_SESSION['zipcode']; ?><br />
    </p> 
```

但是现在保存在数组中的 startlocation 和第一篇文章中的所有变量都被删除了。您还可以看到我用来测试会话是否正常工作的测试变量，以及我`$_SESSION['testvar']`在所有文件上的正确显示。我最初的代码集是这样的`$_SESSION['varname] = $_POST['varname'];`，但这产生了同样的问题。所以变量会转到下一页，但不会继续到第三页。

任何帮助将不胜感激。谢谢你。

编辑：这可能是有用的信息：

```
Result from custinfo.php : bs2rrqoo5u1u5mjerkg54nkcb1 Array ( [startlocation] => From DIA [city] => Denver [zipcode] => [date] => 11/27/2012 [time] => 09:00 [fromaddress1] => [fromaddress2] => [fromcity] => [fromzip] => [toaddress1] => [toaddress2] => [tocity] => [tozip] => [contactname] => [contactemail] => [contactphone] => [address1] => [address2] => [testvar] => THIS IS A TEST [sameaddress] => 1 [billaddress1] => [billaddress2] => [billcity] => [billzip] => [ccnumber] => [ccexp] => [ccsc] => )

Result from custbilling.php : bs2rrqoo5u1u5mjerkg54nkcb1 Array ( [startlocation] => [city] => Aurora [zipcode] => 80017 [date] => [time] => [fromaddress1] => [fromaddress2] => [fromcity] => [fromzip] => [toaddress1] => [toaddress2] => [tocity] => [tozip] => [contactname] => Elijah Gartin [contactemail] => elijah.gartin@gmail.com [contactphone] => 3038804117 [address1] => 124 Test [address2] => [testvar] => THIS IS A TEST [sameaddress] => 1 [billaddress1] => [billaddress2] => [billcity] => [billzip] => [ccnumber] => [ccexp] => [ccsc] => ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T04:08:22.783

Conflicting sessions result in `null` values.

Try using global variables or communicating the values through a persistant data structure.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T22:52:58.087

问题出在服务器上。我不得不添加`session.save_path = "/var/location"`到 php.ini 文件中。感谢您的尝试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T17:59:00.177

从 http 到 https 会话变量将无法生存。

# python - Matplotlib - 子图中的 2 个数字 - 1 是动画

> ID：13366057
> 
> 赞同：3
> 
> 时间：2012-11-13T17:57:01.470
> 
> 标签：python, animation, matplotlib

我有两个要绘制在子图中的数字：

```
fig = plt.figure()
ax1 = fig.add_subplot(1,2,1)
ax2 = fig.add_subplot(1,2,2) 
```

假设 ax1 将填充一个添加点的动画（散点图）。然后 Ax2 将这些点合并到网格中并显示密度。

我可以在 subplot 1 中显示动画，并在完成后将密度图像添加到 subplot2 中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T18:10:07.833

这应该是可能的。请看一下这个[例子](http://matplotlib.org/examples/animation/basic_example.html)。您还可以检查上一个问题：

[使用 matplotlib 和 pyplot 的 2D 坐标的简单动画](https://stackoverflow.com/questions/10896054/simple-animation-of-2d-coordinates-using-matplotlib-and-pyplot)

下面是一个示例实现。第二个图被隐藏，直到第一个图停止渲染：

```
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.animation as animation

def update_line(num, data, line, img):
    line.set_data(data[...,:num])
    if num == 24:
        img.set_visible(True)
    return line, img

fig1 = plt.figure()

data = np.random.rand(2, 25)
ax1=plt.subplot(211)
l, = plt.plot([], [], 'rx')
plt.xlim(0, 1)
plt.ylim(0, 1)
plt.xlabel('x')
plt.title('test')
ax2=plt.subplot(212)
nhist, xedges, yedges = np.histogram2d(data[0,:], data[1,:])
img = plt.imshow(nhist, aspect='auto', origin='lower')
img.set_visible(False)
line_ani = animation.FuncAnimation(fig1, update_line, 25, 
                                   fargs=(data, l, img),
                                   interval=50, blit=True)
line_ani.repeat = False
plt.show() 
```

# python - Django：SQL 防注入管理器.py

> ID：13366058
> 
> 赞同：2
> 
> 时间：2012-11-13T17:57:10.393
> 
> 标签：python, django, django-managers

我有一个 manager.py 文件，它使用 .extra() 参数来执行原始 SQL 查询。例如：

```
class MyManager(models.Manager):

    def order_null_last(self, field):
        return super(DecisionManager, self).get_query_set()\
            .extra(select={'has_field': "CASE WHEN " + field + " IS NULL THEN 1 ELSE 0 END"}).order_by('has_field', field) 
```

有人向我建议，这种查询可能容易受到注入攻击。

解析变量“字段”以确保它属于一组合法值，但此检查是在视图中完成的。例如：

```
class ModelList(ListView):
    model = MyModel

    def get(self, request, *args, **kwargs):
        self.set_sorting(request)

    def set_sorting(self, request):
        self.sort_field = request.GET.get('sort', '-id')
        if not self.sort_field in self.sort_options:
            self.sort_field = 'id' 
```

因此，如果有人使用上述管理器编写了一个新视图，但他们忘记过滤参数，那么漏洞利用是可能的。

那么，有没有一种方法可以在不循环导入的情况下针对管理器中的模型字段验证参数？也就是manager需要导入model来获取允许字段列表，但是model需要importmanager。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:24:12.917

在 extra 中使用 select_params 可以避免 sql 注入：

```
class MyManager(models.Manager):

def order_null_last(self, field):
    return super(DecisionManager, self).get_query_set()\
        .extra(select={'has_field': "CASE WHEN %s IS NULL THEN 1 ELSE 0 END"}, select_params=(field,)).order_by('has_field', field) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:44:33.950

模型管理器可以访问模型，因此可以通过 self.model 访问字段。

所以我可以这样写：

MyManager 类（models.Manager）：

```
def order_null_last(self, field):
    if field in [modelfield.name for modelfield in self.model._meta.fields]:
        return super(DecisionManager, self).get_query_set()\
            .extra(select={'has_field': "CASE WHEN " + field + " IS NULL THEN 1 ELSE 0 END"}).order_by('has_field', field)
    else:
        return super(DecisionManager, self).get_query_set() 
```

# java - Java：在集合中添加/删除短元素和整数元素时的不同输出

> ID：13366060
> 
> 赞同：3
> 
> 时间：2012-11-13T17:57:10.597
> 
> 标签：java, integer, set, short

我不确定如何问这个问题。但是，这两行代码有什么不同呢？

```
Set<Integer> a = new HashSet<Integer>();
for (int i = 0; i < 100; i++) {
    a.add(i);
    a.remove(i - 1);
}

System.out.println(a.size()); 
```

我希望**99**是输出

输出为**1**

* * *

```
Set<Short> a = new HashSet<Short>();
for (Short i = 0; i < 100; i++) {
    a.add(i);
    a.remove(i - 1);
}

System.out.println(a.size()); 
```

我希望**99**是输出

输出为**100**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-13T18:02:33.437

表达式的类型`i - 1`是`int`因为整数算术表达式中的所有操作数都扩展为至少`int`. `Set<Short>`有`add(Short)`，因此通话中`remove(Object)`不需要强制转换/自动装箱。`remove`因此，您试图`Integer`从一组s 中删除`Short`s。

请注意，由于这个原因，声明 a 几乎没有意义`Set<Number>`：

```
final Set<Number> ns = new HashSet<>();
final short s = 1;
ns.add(s);
ns.add(s+0);
ns.add(s+0L);
System.out.println(ns); // prints [1, 1, 1] 
```

作为奖励回合，如果您将 set 实现更改为`TreeSet`，魔法就会消失并抛出 a `ClassCastException`，从而放弃技巧。

本质上，这个问题与相等是对称关系这一事实有关，它不能区分右手边和左手边。这些语义用 Java 的单调度方法是不可能实现的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T18:02:38.860

第一个代码片段从所有数字中删除，除了`HashSet`因为是它删除的最后一个数字。`Integers``99``98`

第二个代码片段试图`Integer`从 a`HashSet`中删除一个`Shorts`，因此，它不会删除任何元素。

在第一个代码片段中，语句`add(i)`中的`int`自动转换为`Integer`.

在第二个代码片段中，如果您执行了以下操作：

```
Set<Short> a = new HashSet<Short>();
for (Short i = 0; i < 100; i++) {
     a.add(i);
     a.remove(i);
} 
```

它将删除所有元素，因为您添加和删除了`Short`. 但是，因为您正在尝试删除`i - 1`，它将转换`i - 1`为`Integer`. 因此，试图`Integer`从 的 HashSet 中删除一个`Shorts`，这实际上导致没有数字被删除。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T18:03:49.283

你不能在不强制转换的情况下从 Set of shorts 中删除 Integer。

# javascript - 分配内部页面横幅交换

> ID：13366062
> 
> 赞同：0
> 
> 时间：2012-11-13T17:57:23.920
> 
> 标签：javascript, jquery

该部分是 foo.com/agriculture。它有一个与 javascript 中的名称相对应的横幅图像。我需要内部页面 foo.com/agriculture/harvest 有一个单独的横幅，而不是 foo.com/agriculture。我正在使用的用于每个页面的横幅交换的脚本如下：

```
<script type="text/javascript"> 
var dir = location.pathname.split("/")[1]; 
//var dir2 = location.pathname;
if (dir == "agriculture")        
document.write('<IMG SRC="/images/ib_agriculture.jpg" WIDTH=1024 HEIGHT=91 BORDER=0>')  
else if (dir == "showcase")
document.write('<IMG SRC="/images/ib_show.jpg" WIDTH=1024 HEIGHT=91 BORDER=0>')  
else if (dir == "contact")      
document.write('<IMG SRC="/images/ib_contact.jpg" WIDTH=1024 HEIGHT=91 BORDER=0>')   
else if (dir == "distribution")     
</script> 
```

我尝试了以下不同的代码来尝试为内部页面 foo.com/agriculture/harvest 分配一个单独的横幅。

```
var dir = location.pathname.split("/")[1]; 
//var dir2 = location.pathname;
if (dir == "agriculture/harvest")        
document.write('<IMG SRC="/images/ib_agriculture_harvest.jpg" WIDTH=1024 HEIGHT=91 BORDER=0>')  
else if (dir == "showcase") 

var dir = location.pathname.split("/")[1]; 
//var dir2 = location.pathname;
if (dir == "harvest")        
document.write('<IMG SRC="/images/ib_agriculture_harvest.jpg" WIDTH=1024 HEIGHT=91 BORDER=0>')  
else if (dir == "showcase") 
```

上面的两个脚本继续抓取 foo.com/agriculture 横幅 (ib_agriculture.jpg) 而不是调用的 foo.com/agriculture/harvest (ib_agriculture_harvest.jpg)。我不确定如何让脚本每页调用适当的横幅。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T22:22:55.573

首先你应该知道的是：

```
var segments = "/agriculture/harvest".split('/');
console.log(segments);  // ["", "agriculture", "harvest"] 
```

有很多方法可以做到这一点，但这里有一种方法可以让您保持大部分代码相同：

```
var dirs = location.pathname.split('/');

if (dirs[1] == 'agriculture') {
    if (dirs[2] == 'harvest')
        ; // set harvest banner
    else
        ; // set agriculture banner
} else if (dirs[1] == 'showcase')
    ; // set showcase banner
else if (dirs[1] == 'contact')
    ; // set contact banner
// etc.. 
```

还有另一种方式，更具声明性。您可以构建一个包含路径名模式和图像名称的对象。然后你遍历它并进行第一场比赛。这样，您可以根据需要添加任意数量，而无需编写更多代码：

```
var banners = {
    "^/agriculture/harvest": "ib_agriculture_harvest.jpg",
    "^/agriculture": "ib_agriculture.jpg",
    "^/showcase": "ib_showcase.jpg",
    "^/contact": "ib_contact.jpg"
    // as many more as you need
};

for( var pattern in banners ) {
    var regex = new RegExp(pattern);
    if (regex.test(location.pathname)) {
        document.write('<IMG SRC="/images/'+banners[pattern]+'" WIDTH=1024 HEIGHT=91 BORDER=0>');
        break;
    }
} 
```

# flash-builder - Flash Builder 4.6 无法静默启动

> ID：13366063
> 
> 赞同：0
> 
> 时间：2012-11-13T17:57:24.637
> 
> 标签：flash-builder, launch

一段时间以来，我一直在使用 Flash Builder 4.6 来开发一些 Android 应用程序。今天早上我尝试启动它，Flash Builder 会打开启动画面并静默关闭。我已经重命名了旧的工作空间，但它创建了一个新的工作空间并再次静默关闭。我尝试重命名元数据文件夹，Flash Builder 重新创建了一个新的元数据文件夹并再次关闭。我尝试按照这些[http://agileui.blogspot.com/2009/09/flashbuilder-4-silently-fails-while.html](http://agileui.blogspot.com/2009/09/flashbuilder-4-silently-fails-while.html)说明操作，但出现错误

> Gumbo.exe 不是内部或外部命令、可运行程序或批处理文件。

所以请大家帮助我，与没有错误的事情作斗争是非常令人沮丧的。我正在使用 Windows 7。提前谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:51:36.953

经过大量谷歌搜索后，我在[http://support.muse.adobe.com/thread/1022320上找到了这个](http://support.muse.adobe.com/thread/1022320)

*   确保您已连接到互联网。

*   启动 Acrobat 或 Flash Builder 以外的常规 CS6 产品（例如：Photoshop、After Effects、Premier Pro、InDesign、Flash Professional、Illustrator、Dreamweaver。）

*   单击帮助->停用。停用应用程序。退出申请。

*   启动 Acrobat 或 Flash Builder 以外的常规 CS6 产品（例如：Photoshop、After Effects、Premier Pro、InDesign、Flash Professional、Illustrator、Dreamweaver。）

*   接受欧拉。

*   通过登录注册试用版。让应用程序启动。

*   退出并重新启动应用程序。等待 UI 出现。

*   单击 UI 上的许可此软件按钮。

*   点击登录。

*   将出现序列号屏幕。在序列号屏幕中输入序列号，然后单击下一步..

*   如果应用程序仍在运行，请关闭应用程序。连接到互联网时重新启动应用程序。

希望这可以帮助

# ruby-on-rails - 有没有一种聪明的方法可以将 SQL 导出解析为用 Ruby 编写的 Rails db 种子文件？

> ID：13366067
> 
> 赞同：1
> 
> 时间：2012-11-13T17:57:43.683
> 
> 标签：ruby-on-rails

是否有任何工具可以获取用 SQL 编写的导出数据库文件并将表转换为 Rails 3 的种子文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-15T14:08:22.140

您有两个主要选择

a) 在 Rails 中使用连接和执行功能

例子：

```
connection = ActiveRecord::Base.connection
statement  = File.read('db//data/icd_10.sql')
connection.execute(statement) 
```

执行以下 SQL 语句：

```
=> INSERT INTO `icd_10_ca_codes` (`ICD_10_CA_Code`, `Block`, `Code_id`, `Code_Description`, `Code_Includes`, `Code_Excludes`, `Code_Notes`, `created_at`, `updated_at`)
=> VALUES ('G35', '' , 'Multiple sclerosis', 'Multiple sclerosis (of):
• NOS
• brain stem
• cord
• disseminated
• generalized', NULL, NULL); 
```

b) 使用seed_dump gem 从您的SQL 数据库导出到种子文件并生成一个包含数据的模板

例子：

```
$gem install seed_dump 
$rake db:seed:dump MODEL=Icd10Code APPEND=true
$rake db:seed --trace 
```

在种子文件中生成以下内容：

```
=> Icd10CaCode.create([
=> { :ICD_10_CA_Code => "G35", :Block => "G35", :Code_id => "", :Code_Description => "Multiple sclerosis", :Code_Includes => "Multiple sclerosis (of):\n• NOS\n• brain stem\n• cord\n• disseminated\n• generalized", :Code_Excludes => nil, :Code_Notes => nil, :created_at => "2013-06-24 20:37:24", :updated_at => "2013-06-24 20:37:28" };
=> ], :without_protection => true ) 
```

[https://github.com/rroblak/seed_dump](https://github.com/rroblak/seed_dump)

# wolfram-mathematica - 用mathematica显示汉密尔顿循环

> ID：13366072
> 
> 赞同：0
> 
> 时间：2012-11-13T17:58:18.407
> 
> 标签：wolfram-mathematica, discrete-mathematics

我尝试使用 Mathematica 在下图中找到一个汉密尔顿循环：

```
g = Graph[{1 \[UndirectedEdge] 2, 1 \[UndirectedEdge] 6, 
   2 \[UndirectedEdge] 4, 1 \[UndirectedEdge] 3, 
   3 \[UndirectedEdge] 4, 4 \[UndirectedEdge] 5, 
   5 \[UndirectedEdge] 6, 3 \[UndirectedEdge] 9, 
   4 \[UndirectedEdge] 7, 7 \[UndirectedEdge] 8, 
   8 \[UndirectedEdge] 11, 5 \[UndirectedEdge] 8, 
   5 \[UndirectedEdge] 12, 6 \[UndirectedEdge] 12, 
   9 \[UndirectedEdge] 10, 10 \[UndirectedEdge] 11, 
   11 \[UndirectedEdge] 12, 9 \[UndirectedEdge] 15, 
   15 \[UndirectedEdge] 16, 16 \[UndirectedEdge] 17, 
   16 \[UndirectedEdge] 19, 19 \[UndirectedEdge] 20, 
   20 \[UndirectedEdge] 23, 20 \[UndirectedEdge] 17, 
   17 \[UndirectedEdge] 18, 15 \[UndirectedEdge] 21, 
   18 \[UndirectedEdge] 24, 21 \[UndirectedEdge] 22, 
   22 \[UndirectedEdge] 23, 23 \[UndirectedEdge] 24, 
   3 \[UndirectedEdge] 15, 14 \[UndirectedEdge] 15, 
   14 \[UndirectedEdge] 12, 22 \[UndirectedEdge] 15, 
   12 \[UndirectedEdge] 18, 11 \[UndirectedEdge] 13, 
   13 \[UndirectedEdge] 14, 13 \[UndirectedEdge] 10, 
   1 \[UndirectedEdge] 10, 12 \[UndirectedEdge] 24}, 
  VertexLabels -> "Name"] 
```

然后

```
EdgeList[g, 4 \[UndirectedEdge] _] 
```

表明 4 与 2,3,5,7 相连

但是代码

```
First[FindHamiltonianCycle[g]] 
```

返回错误，即

```
{1 \[UndirectedEdge] 2, 2 \[UndirectedEdge] 4, 4 \[UndirectedEdge] 8, 
 8 \[UndirectedEdge] 9, 9 \[UndirectedEdge] 6, 6 \[UndirectedEdge] 3, 
 3 \[UndirectedEdge] 11, 11 \[UndirectedEdge] 21, 
 21 \[UndirectedEdge] 19, 19 \[UndirectedEdge] 15, 
 15 \[UndirectedEdge] 14, 14 \[UndirectedEdge] 16, 
 16 \[UndirectedEdge] 17, 17 \[UndirectedEdge] 18, 
 18 \[UndirectedEdge] 22, 22 \[UndirectedEdge] 20, 
 20 \[UndirectedEdge] 13, 13 \[UndirectedEdge] 23, 
 23 \[UndirectedEdge] 24, 24 \[UndirectedEdge] 10, 
 10 \[UndirectedEdge] 12, 12 \[UndirectedEdge] 7, 
 7 \[UndirectedEdge] 5, 5 \[UndirectedEdge] 1} 
```

为什么mathematica 从4 到8 占据优势，因为它不存在？算法有错误还是我做错了什么？

顺便说一句，我正在使用 Mathematica 8。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:36:48.587

我在 Windows 7 上使用 8.0.4，但我不明白。它看起来像一个错误，然后在 8.0.4 中修复

```
g = Graph[{UndirectedEdge[1, 2], UndirectedEdge[1, 6], UndirectedEdge[2, 4], 
UndirectedEdge[1, 3], UndirectedEdge[3, 4], UndirectedEdge[4, 5], 
UndirectedEdge[5, 6], UndirectedEdge[3, 9], UndirectedEdge[4, 7], 
UndirectedEdge[7, 8], UndirectedEdge[8, 11], UndirectedEdge[5, 8], 
UndirectedEdge[5, 12], UndirectedEdge[6, 12], UndirectedEdge[9, 10], 
UndirectedEdge[10, 11], UndirectedEdge[11, 12], UndirectedEdge[9, 15], 
UndirectedEdge[15, 16], UndirectedEdge[16, 17], UndirectedEdge[16, 19], 
UndirectedEdge[19, 20], UndirectedEdge[20, 23], UndirectedEdge[20, 17], 
UndirectedEdge[17, 18], UndirectedEdge[15, 21], UndirectedEdge[18, 24], 
UndirectedEdge[21, 22], UndirectedEdge[22, 23], UndirectedEdge[23, 24], 
UndirectedEdge[3, 15], UndirectedEdge[14, 15], UndirectedEdge[14, 12], 
UndirectedEdge[22, 15], UndirectedEdge[12, 18], UndirectedEdge[11, 13], 
UndirectedEdge[13, 14], UndirectedEdge[13, 10], UndirectedEdge[1, 10], 
UndirectedEdge[12, 24]}, VertexLabels -> "Name"];

r = First[FindHamiltonianCycle[g]] 
```

给

```
{UndirectedEdge[1, 2], UndirectedEdge[2, 4], UndirectedEdge[4, 7], 
  UndirectedEdge[7, 8], UndirectedEdge[8, 5], UndirectedEdge[5, 6], 
  UndirectedEdge[6, 12], UndirectedEdge[12, 24], UndirectedEdge[24, 18], 
  UndirectedEdge[18, 17], UndirectedEdge[17, 16], UndirectedEdge[16, 19], 
  UndirectedEdge[19, 20], UndirectedEdge[20, 23], UndirectedEdge[23, 22], 
  UndirectedEdge[22, 21], UndirectedEdge[21, 15], UndirectedEdge[15, 14], 
  UndirectedEdge[14, 13], UndirectedEdge[13, 11], UndirectedEdge[11, 10], 
  UndirectedEdge[10, 9], UndirectedEdge[9, 3], UndirectedEdge[3, 1]} 
```

你可以看到边缘`4<->8`不存在。核实

```
In[7]:= Cases[r, UndirectedEdge[4, 8]]
Out[7]= {} 
```

# javascript - 通过javascript更改css的百分比元素，使用变量

> ID：13366076
> 
> 赞同：2
> 
> 时间：2012-11-13T17:58:32.933
> 
> 标签：javascript, html, css

我正在尝试使用 javascript 更改我的 div 的宽度值。使用：

```
document.getElementById("id").style.width = "25%"; 
```

适用于字符串文字，但我想使用变量设置值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T18:00:44.177

当连接字符串和变量时，javascript 将使用它们的字符串表示，请尝试以下操作：

```
var variable = 25;
document.getElementById("id").style.width = variable + "%"; 
```

# iphone - 一段时间后关闭 ViewController？

> ID：13366080
> 
> 赞同：1
> 
> 时间：2012-11-13T17:58:53.240
> 
> 标签：iphone, objective-c, ios, uiviewcontroller

有没有办法让我在 5 秒后展示或关闭我的 ViewController？也许像......如果用户在 5 秒后按下按钮，则会出现新视图。

有什么解决方案或建议吗？抱歉，我没有在网上找到解决方案。

我的代码不起作用：

```
 -(IBAction)lol:(id)sender {

    [self performSelector:@selector(dissMissviewController) withObject:self afterDelay:3];
}

-(void)dissMissViewController{

    [self dismissModalViewControllerAnimated:YES];
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T18:02:36.393

你可以用下面一个..

```
//for dismissing the ViewControler on clicking button just use below piece of code.

[self performSelector:@selector(dismissViewController) withObject:self afterDelay:5];

//dismissviewController is the method which has the code for dismissing the viewController.

//and can follow the same for showing the viewController.

 - (void)dismissViewController
 {
 //if you are pushing your viewControler, then use below single line code
 [self.navigationController popViewControllerAnimated:YES];
 //if you are presnting ViewController modally. then use below code
 [self dismissModalViewControllerAnimated:YES];
 } 
```

我希望它可以清除给你......！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T18:15:07.207

当您希望在按下按钮时延迟 5 秒后呈现或关闭新的 viewController，请尝试实现以下代码

```
 -(IBAction)btnpressed:(id)sender
       {
          [self performSelector:@selector(dismissVC) withObject:self afterDelay:5.0];

          //dismissVC is the method which has the code for dismissing the viewController. same is the case for presenting a ViewController by passing a selector which has the code for presenting the viewController

       } 
```

希望这可以帮助。

# crystal-reports - 水晶报表根据报表中的最后一项抑制元素

> ID：13366082
> 
> 赞同：0
> 
> 时间：2012-11-13T17:58:56.613
> 
> 标签：crystal-reports

我正在创建一个子报告，我想要数据项之间的行，如下所示：

```
 Main report
       sub item 1
       ----------
       sub item 2
       ----------
       sub item 3
       ----------
       sub item 4
       ----------
  /Main report 
```

我想通过取消子报告最后一项上的行来使其更整洁，如下所示：

```
 Main report
       sub item 1
       ----------
       sub item 2
       ----------
       sub item 3
       ----------
       sub item 4
  /Main report 
```

我希望 ---------- 在子报告中的最后一项时被禁止

知道方程是什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T18:43:18.667

查看`OnLastRecord` [此处命名的变量](http://publib.boulder.ibm.com/infocenter/radhelp/v7r5/index.jsp?topic=/com.businessobjects.integration.eclipse.designer.doc/html/topic755.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T18:40:51.540

如果项目是单个子报表中的行，那么您可以使用抑制公式：`onlastrecord`

# c - 为什么 C 中存在箭头 (->) 运算符？

> ID：13366083
> 
> 赞同：310
> 
> 时间：2012-11-13T17:58:57.713
> 
> 标签：c, pointers, dereference

点 ( `.`) 运算符用于访问结构的成员，而`->`C 中的箭头运算符 () 用于访问由相关指针引用的结构的成员。

指针本身没有任何可以使用点运算符访问的成员（它实际上只是一个描述虚拟内存中位置的数字，因此它没有任何成员）。因此，如果我们只定义点运算符以在指针上使用它时自动取消引用指针（编译器在编译时知道的信息 afaik），则不会有歧义。

那么为什么语言创建者决定通过添加这个看似不必要的运算符来使事情变得更复杂呢？什么是重大设计决策？

* * *

## 回答 #1

> 赞同：398
> 
> 时间：2012-11-13T18:04:10.137

我会将您的问题解释为两个问题：1）为什么`->`甚至存在，以及 2）为什么`.`不自动取消引用指针。这两个问题的答案都有历史根源。

**为什么`->`甚至存在？**

在 C 语言的最早版本之一（我将其称为“ [C 参考手册](https://www.bell-labs.com/usr/dmr/www/cman.pdf)”的 CRM，它于 1975 年 5 月随第 6 版 Unix 一起提供）中，运算符`->`具有非常独特的含义，而不是同义词`*`和`.`组合

CRM 描述的 C 语言在许多方面与现代 C 语言有很大不同。在 CRM 结构成员中实现了*字节偏移*的全局概念，它可以添加到任何地址值，没有类型限制。即所有结构成员的所有名称都具有独立的全局含义（因此，必须是唯一的）。例如，您可以声明

```
struct S {
  int a;
  int b;
}; 
```

name`a`代表偏移量 0，而 name`b`代表偏移量 2（假设`int`类型为大小 2 且没有填充）。该语言要求翻译单元中所有结构的所有成员要么具有唯一的名称，要么代表相同的偏移值。例如，在同一个翻译单元中，您可以另外声明

```
struct X {
  int a;
  int x;
}; 
```

没关系，因为名称`a`始终代表偏移量 0。但是这个附加声明

```
struct Y {
  int b;
  int a;
}; 
```

将正式无效，因为它试图“重新定义”`a`为偏移量 2 和`b`偏移量 0。

这就是`->`运算符的用武之地。由于每个结构成员名称都有自己自给自足的全局含义，因此语言支持这样的表达式

```
int i = 5;
i->b = 42;  /* Write 42 into `int` at address 7 */
100->a = 0; /* Write 0 into `int` at address 100 */ 
```

编译器将第一个赋值解释为“获取地址`5`，为其添加偏移量`2`并分配`42`给`int`结果地址处的值”。即上面将分配`42`给`int`地址的值`7`。请注意，这种使用`->`不关心左侧表达式的类型。左侧被解释为右值数字地址（无论是指针还是整数）。

这种诡计是不可能`*`和`.`组合在一起的。你做不到

```
(*i).b = 42; 
```

因为`*i`已经是一个无效的表达式。`*`运算符，因为它与 分开，所以对其`.`操作数施加了更严格的类型要求。为了提供解决此限制的能力，CRM 引入了`->`运算符，它独立于左侧操作数的类型。

正如 Keith 在评论中指出的那样，`->`and `*`+`.`组合之间的这种差异是 CRM 在 7.1.8 中所说的“放宽要求”：*除了放宽`E1`指针类型的要求外，表达式`E1−&gt;MOS`完全等同于`(*E1).MOS`*

后来，在 K&R C 中，最初在 CRM 中描述的许多功能都进行了重大修改。“结构成员作为全局偏移标识符”的想法被完全删除。并且操作符的功能与组合`->`的功能完全一致。`*``.`

**为什么不能`.`自动取消引用指针？**

同样，在语言的 CRM 版本中，运算符的左操作数`.`必须是*左值*。这是对该操作数施加的*唯一*要求（这就是使它与 不同的原因`->`，如上所述）。请注意，CRM*不*要求 的左操作数`.`具有结构类型。它只要求它是一个左值，*任何*左值。这意味着在 C 的 CRM 版本中，您可以编写这样的代码

```
struct S { int a, b; };
struct T { float x, y, z; };

struct T c;
c.b = 55; 
```

在这种情况下，编译器将写入位于称为 的连续内存块中位于字节偏移 2 处`55`的值，即使 type没有名为 的字段。编译器根本不关心 的实际类型。它所关心的只是一个左值：某种可写的内存块。`int``c``struct T``b``c``c`

现在请注意，如果您这样做了

```
S *s;
...
s.b = 42; 
```

代码将被认为是有效的（因为`s`也是左值），编译器会简单地尝试将数据*写入指针`s`本身*，字节偏移量为 2。不用说，这样的事情很容易导致内存溢出，但是语言不关心这些问题。

即在该语言版本中，您提出的关于`.`为指针类型重载运算符的想法将不起作用：运算符`.`在与指针一起使用时已经具有非常特定的含义（使用左值指针或根本没有任何左值）。毫无疑问，这是非常奇怪的功能。但它当时就在那里。

当然，这种奇怪的功能并不是反对`.`在 C - K&R C 的重新设计版本中引入指针重载运算符（如您所建议的那样）的一个强有力的理由。但它还没有完成。也许当时有一些用 C 的 CRM 版本编写的遗留代码必须得到支持。

（1975 C 参考手册的 URL 可能不稳定。另一个副本，可能有一些细微的差别，在[这里](https://www.student.cs.uwaterloo.ca/~cs136/resources/cman.pdf)。）

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2012-11-13T18:25:02.590

除了历史（好的和已经报道的）原因之外，运算符优先级也存在一个小问题：点运算符的优先级高于星号运算符，因此如果您的结构包含指向结构的指针，则包含指向结构的指针......这两个是等价的：

```
(*(*(*a).b).c).d

a->b->c->d 
```

但第二个显然更具可读性。箭头运算符具有最高优先级（就像点一样）并从左到右关联。我认为这比对结构和结构的指针都使用点运算符更清楚，因为我们可以从表达式中知道类型，而不必查看声明，甚至可以在另一个文件中。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2014-12-03T03:58:49.303

C 在不使任何含糊不清方面也做得很好。

当然，点可能被重载以表示这两种情况，但箭头确保程序员知道他正在对指针进行操作，就像编译器不允许您混合两种不兼容的类型一样。

# php - 随机重新生成会话 ID 的原因？

> ID：13366088
> 
> 赞同：0
> 
> 时间：2012-11-13T17:59:15.140
> 
> 标签：php, session

这是好习惯吗？我以前从未见过它做过，但到目前为止效果很好。

```
if(mt_rand(1, 10) == 1) {     # regenerate "randomly" on 10% of requests
    session_regenerate_id();
} 
```

谢谢。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:29:17.790

我认为无论出于何种适当的原因或上下文，您都会重新生成会话 ID，您应该每次都这样做，而不仅仅是有时随机（在您的情况下为 10%）。我不明白每次都这样做是不好的做法（如果我错了，请纠正我，我会很好奇为什么）。如果有人入侵了会话，那么重新生成 ID 将导致“黑客”丢失他们被入侵的会话。如果你只在 10% 的时间内重新生成 ID，那么他们有 90% 的机会仍然会保持被黑客入侵的会话。没有贝诺。

# javascript - 如何强制 javascript 在所需的验证控件之后运行？

> ID：13366090
> 
> 赞同：0
> 
> 时间：2012-11-13T17:59:17.183
> 
> 标签：javascript, asp.net

我有一个不应该为空的文本框，所以我在它旁边放置了一个**必需的验证控件。**我还有一个**javascript 确认框**，询问用户是否确定提交信息。

问题是确认首先出现，然后验证才开始。我想反过来。我希望首先进行验证。如果没有更多错误，则询问用户是否确定提交信息。

# 编辑

这是标记

```
<asp:LinkButton ID="_lnkAddUpdate" runat="server" CausesValidation="True" OnClientClick = "return ConfirmAddEdit(this.id)"
     CommandName="Update"></asp:LinkButton>

<asp:TextBox ID="_tbLocationName" runat="server" Text= '<%# Eval("LocationName") %>'/>
<asp:RequiredFieldValidator ID="reqLocationName" runat="server" ErrorMessage="Location name cannot be empty string." Text = "*" ControlToValidate = "_tbLocationName" /> 
```

这是javascript

```
function ConfirmActive(id) {
    var action = document.getElementById(id).innerHTML;
    var r = confirm("Are you sure you want to " + action + " this location?");
    if (r == false) {
        return false;
    }
} 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:15:36.283

我通常这样做的方式是使用以下 javascript ...

```
var cont = true;
if (typeof (Page_ClientValidate) === "function") {
  cont = Page_ClientValidate();
}
if (cont) {
  cont = window.confirm("are you sure?");
}
return cont; 
```

这将检查 ASP.NET 函数是否可用，如果可用，则运行它...如果有效，则触发确认。最终结果被发送回点击处理程序，以确定是否继续。

* * *

**更新**

给出更多解释：

当您设置`OnClientClick`属性时，您设置的 javascript 总是首先运行......因此，如果您`validator`的页面中有任何控件，它们只会在您的 javascript**之后运行。**这显然不是你想要的。

我的解决方案是在 javascript 之后调用浏览器调用的完全相同的函数，但**在**. 次要的缺点是验证将执行两次（一次由您直接执行，然后在您的函数运行后再次执行）。

```
function ConfirmActive(id) {
  var cont = true;
  if (typeof (Page_ClientValidate) === "function") {
    cont = Page_ClientValidate();
  }
  if (cont) {
    var action = document.getElementById(id).innerHTML;
    cont = confirm("Are you sure you want to " + action + " this location?");
  }
  return cont
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T18:12:27.690

如果没有看到代码，就不可能确定问题出在哪里，但我猜你遇到了两个问题之一。

首先要检查的是您的验证码在您的确认码之前

```
validate();
confirm(); 
```

很容易。第二个，我猜你的实际问题是你正在使用远程验证，所以你想要的不是上面的解决方案，而是让你的确认码成为你的验证码的回调。你如何做到这一点取决于你如何设置验证请求。发布该代码，我们可以帮助您。

# silverlight - RoundTripOriginalAttribute 没有将原始值返回给服务器

> ID：13366093
> 
> 赞同：0
> 
> 时间：2012-11-13T17:59:25.310
> 
> 标签：silverlight, wcf-ria-services

我正在服务器上使用 DTO（数据传输对象）。

我试图实现的场景，我的 PersonDTO 对象上有一个地址列表，如果我删除或添加新项目到地址列表，我想在服务器上执行一些额外的实现。因此，为此我正在使用 [RoundTripOriginial]，正如 MSDN 中所说，它会将原始对象与更新的对象一起返回给服务器。

注意：我不想进行数据库调用来获取原始实体。

这是我的示例结构，

```
[RoundtripOriginal]
Public Class PersonDTO
{

        [Include]
        [Composition]
        [Association("PersonDTO_AddressDTO", "Id", "ReferenceId")]
        public List<Address> Addresses
        { get
            {
                if (addressed== null)
                    addressed= new List<Address>();
                return addressed;
            }
            set { addressed= value; }
        }
} 
```

在域服务上

```
[Update]    
   public void UpdatePersonDTO(PersonDTO person)
    {
      PersonDTO originalPerson =  this.ChangeSet.GetOriginal(person); 
    } 
```

但是，GetOriginal 返回我'null'，

我在这里错过了什么吗？

非常感谢任何形式的建议/帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T07:56:48.880

在 WCF Ria Services 中，您必须将`RoundTripOriginalAttribute`放在您的班级成员身上，而不是放在班级本身上。它旨在让您主要用于服务器端并发检查的往返属性。

# javascript - 在 AJAX (XMLHttpRequest) 中使用 eventListener 还是 readyStateChange 更好？

> ID：13366094
> 
> 赞同：2
> 
> 时间：2012-11-13T17:59:28.407
> 
> 标签：javascript, ajax, html

我正在重新观看来自 WWDC12 的关于 HTML5 高级效果的视频，并注意到他们使用的演示`req.addEventListener("load",callback,true)`而不是通常的`onreadystatechange`.

`state=4 status=200`加载事件和情况有什么区别？
是触发相同的加载事件还是两个不同的加载事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T18:25:57.150

该`load`事件仅表明请求是*网络*成功，不一定是 HTTP 成功。始终触发`load`事件或`error`事件的 Ajax 请求，指示网络事务的成功或失败（作为[进度事件](http://dvcs.w3.org/hg/progress/raw-file/tip/Overview.html)规范的一部分）：

*   `error`当由于服务器关闭或在不可访问的域上（即请求被同源策略阻止）而导致网络获取失败时触发该事件。

*   否则，`load`无论返回的 HTTP 代码如何，都会触发。

`load`or事件总是在最后一个事件触发`error`后最后`readstatechange`触发，因此您可以确定`load`or`error`回调正在运行`xhr.readyState == 4`并`xhr.status`设置为正确的 HTTP 响应代码。

# python - 从一堆 SQL 语句中解析表名

> ID：13366096
> 
> 赞同：-2
> 
> 时间：2012-11-13T17:59:32.583
> 
> 标签：python, sql, regex, linux, oracle

我在一个名为 Queries 的列中有一个包含数千条 SQL 语句的表。关于如何使用正则表达式从语句中获取表名的任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T18:54:20.893

如果是我，我会倾向于尝试以不同的方式解决问题。我倾向于为每个对象生成一个查询计划，而不是编写一个 SQL 解析器（这将需要比正则表达式更多的东西，除非你可以保证所有 SQL 语句都使用可用 SQL 语法的一个非常小的子集）。查询`PLAN_TABLE`以查看 Oracle 必须命中的对象。您需要对索引访问进行额外的查找，以找出索引是在哪个表上定义的，但这应该相当简单。

但是，如果您沿着这条路走，您将检索查询实际触及的基表，而不是查询可能实际引用的任何视图。也就是说，如果您有一个查询`SELECT * FROM view_1`，`view_1`而 又被定义为针对`table_a`and的查询`table_b`，那么只有`table_a`and`table_b`将成为计划的一部分。`query_rewrite`如果您想阻止查询计划引用具体化视图（如果这些具体化视图不是查询的特定部分），则您需要为会话禁用。

如果，对于每个查询，你做一个

```
EXPLAIN PLAN FOR <<the query>> 
```

然后你可以

```
SELECT DISTINCT object_owner, object_name, object_type
  FROM plan_table 
```

获取对象列表。如果`OBJECT_TYPE`是 like `INDEX%`，则可以使用`DBA_INDEXES`视图（或`ALL_INDEXES`或`USER_INDEXES`取决于谁拥有相关对象以及您拥有什么级别的权限）来确定在哪个表上定义了索引

```
SELECT table_owner, table_name
  FROM dba_indexes
 WHERE owner = <<object_owner from plan_table>>
   AND index_name = <<object_name from plan_table>> 
```

所以，例如，如果我有一个观点`view_1`

```
 create or replace view view_1
 as
 select *
   from emp join dept using (deptno) 
```

和一个查询

```
select * from view_1; 
```

我可以

```
SQL> explain plan for select * from view_1;

Explained.

SQL> ed
Wrote file afiedt.buf

  1      SELECT distinct object_owner, object_name, object_type
  2*       FROM plan_table
SQL> /

OBJECT_OWNER                   OBJECT_NAME               OBJECT_TYPE
------------------------------ ------------------------- -------------------------

SCOTT                          DEPT                      TABLE
SCOTT                          PK_DEPT                   INDEX (UNIQUE)
SCOTT                          EMP                       TABLE 
```

这告诉我查询实际上是在访问`EMP`and`DEPT`表。它也命中了`PK_DEPT`索引，所以我可以查看定义的表。

```
SQL> ed
Wrote file afiedt.buf

  1      SELECT table_owner, table_name
  2        FROM dba_indexes
  3       WHERE owner = 'SCOTT'
  4*        AND index_name = 'PK_DEPT'
SQL> /

TABLE_OWNER                    TABLE_NAME
------------------------------ ------------------------------
SCOTT                          DEPT 
```

事实证明，该索引也在`DEPT`表上定义，所以我知道只有模式中的`EMP`和`DEPT`表`SCOTT`将参与查询。

# python - Python pytz：不存在的时间得到 AmbiguousTimeError，而不是 NonExistentTimeError

> ID：13366099
> 
> 赞同：8
> 
> 时间：2012-11-13T17:59:42.860
> 
> 标签：python, timezone, pytz

如何判断当地时间是否不存在？我正在尝试使用 pytz，但它会引发 AmbiguousTimeError，而不是 NonExistentTimeError。

由于夏令时，2013-3-31 02:30 在哥本哈根永远不会发生。

```
local_tz = timezone('Europe/Copenhagen')
try:
    non_e = local_tz.localize(datetime.datetime(2013, 3, 31, 2, 30), is_dst = None) 
except pytz.AmbiguousTimeError:
    print "AmbiguousTimeError" 
```

它转到异常处理程序。我试过了：

```
 except pytz.NonExistentTimeError: #'module' object has no attribute 'NonExistentTimeError'
 except pytz.exceptions.NonExistentTimeError: #'module' object has no attribute 'exceptions' 
```

用户通过表格向我提供日期和时间。这些是当地时间，我需要看看日期和时间是否合适。

我正在使用 Django `USE_TZ = True`，但我认为这并不重要。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T18:06:15.687

升级你的`pytz`包。这适用于我的版本`2012d`，例如：

```
>>> import pytz, datetime
>>> pytz.__version__
'2012d'
>>> local_tz = pytz.timezone('Europe/Copenhagen')
>>> local_tz.localize(datetime.datetime(2013, 3, 31, 2, 30), is_dst=None)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/pytz/tzinfo.py", line 327, in localize
    raise NonExistentTimeError(dt)
pytz.exceptions.NonExistentTimeError: 2013-03-31 02:30:00 
```

使用`pip install -U pytz`或`easy_install -U pytz`升级。

# java - jmf 应用程序出现 NoPlayerException 运行时错误

> ID：13366100
> 
> 赞同：1
> 
> 时间：2012-11-13T17:59:44.070
> 
> 标签：java, swing, awt, jmf

您好，我正在尝试使用 jmf 创建一个简单的视频播放器。我认为我的代码没问题，但是当我执行它时，我得到了 NoPlayerException。这是播放器的代码：

```
package reproductor;
import java.awt.BorderLayout;
import java.awt.Component;
import java.io.IOException;
import java.net.URL;
import javax.media.CannotRealizeException;
import javax.media.Manager;
import javax.media.NoPlayerException;
import javax.media.Player;
import javax.swing.JPanel;

/**
 *
 * @author pollyox16
 */
public class repropanel extends JPanel{

    public repropanel(URL url){

    setLayout(new BorderLayout());

    Manager.setHint(Manager.LIGHTWEIGHT_RENDERER, true);

    try{
    createRealizedPlayer().

    Component video= reproductor.getVisualComponent();
    Component controles=reproductor.getControlPanelComponent();

    if(video!=null){

    add(video,BorderLayout.CENTER);
    }

    if (controles!=null){add(controles,BorderLayout.SOUTH);}

     reproductor.start();//con esto arrancamos el reproductor.
    } //end try

    catch(NoPlayerException e3){
    System.out.println("player not created");

    }
    catch (CannotRealizeException e){
    System.out.println("player not realized");

    }

     catch (IOException e2){
    System.out.println("io exception catch");

    }

    }

} 
```

这是主应用程序的代码，它只创建一个 JFileChooser 并将 url 添加到播放器：这是主应用程序的代码：

```
package reproductor;
import java.net.URL;
import javax.swing.JFileChooser;
import javax.swing.JFrame;
/**
 *
 * @author pollyox16
 */
public class Reproductor{

    public static void main(String[] args) {

        JFileChooser selectarchivo= new JFileChooser();
        int resultado= selectarchivo.showOpenDialog(null);

        if(resultado== JFileChooser.APPROVE_OPTION){

        URL miurl=null;
        try{

        miurl=selectarchivo.getSelectedFile().toURI().toURL();

        }//FINAL TRY

        catch(Exception e){
            System.out.println("error en el main");       
        }

        if(miurl!=null){
        JFrame ventana= new JFrame("pollyox16");
        ventana.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        ventana.setSize(300,300);
        repropanel mireproductor= new repropanel(miurl);
        ventana.add(mireproductor);
        ventana.setVisible(true);
        }
        }
    }
} 
```

编辑：这是异常堆栈跟踪：

```
javax.media.NoPlayerException: Cannot find a Player for :file:/C:/Users/Public/Videos/Sample%20Videos/Wildlife.wmv
    at javax.media.Manager.createPlayerForContent(Manager.java:1412)
    at javax.media.Manager.createPlayer(Manager.java:417)
    at javax.media.Manager.createPlayer(Manager.java:332)
    at javax.media.Manager.createRealizedPlayer(Manager.java:527)
    at reproductor.repropanel.<init>(repropanel.java:34)
    at reproductor.Reproductor.main(Reproductor.java:52) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T09:00:43.753

```
javax.media.NoPlayerException: Cannot find a Player for: 
    file:/C:/Users/Public/Videos/Sample%20Videos/Wildlife.wmv 
```

WMV***未***[在JMF 2.1.1 支持的格式](http://www.oracle.com/technetwork/java/javase/formats-138492.html)中列出。对任何媒体的“快速而肮脏”的测试是将其加载到 JMF 默认播放器中。如果该播放器不会加载它，任何其他基于 JMF 的应用程序也不会加载。

我有一个页面提供了一些[JMF 兼容媒体](http://pscode.org/media/#video)，您可以选择这些媒体来测试您的应用程序。和。

* * *

JMF 非常古老，几乎不支持较新的格式。如果您可以将视频转换为 JMF 可以读取的格式，则可以播放它，但此时它不适合作为通用的“媒体播放器”。

# c - 用于检查数组在c中为空的宏

> ID：13366102
> 
> 赞同：-3
> 
> 时间：2012-11-13T17:59:55.767
> 
> 标签：c, macros

我需要使用宏检查数组是否为空。如果数组的大小是恒定的，比如 2，那么我将能够编写一个类似的宏

```
#define IS_EMPTY(arr)  \
  ((arr[0] | arr[1]) == 0) 
```

但是如果 arr 是这样定义的

```
#define ARRAY_SIZE 100
int arr[ARRAY_SIZE]; 
```

有什么办法，一个宏可以确定数组是空的吗？或者内联函数是唯一的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:20:06.393

您最可行的选择是循环：

```
int IsEmpty(char * array, size) {
 int i;
 for (i=0; i<size; i++)
   if (array[i] != 0)
      return 0;
 return 1;
} 
```

或 memcmp：

```
int IsEmpty(char * array, size) {
 char * emptyArray = malloc(size);
 memset(emptyArray, 0, size);
 int res = memcmp(array, emptyArray, size);
 free(emptyArray);
return res==0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T18:16:03.313

如果看到数组的定义。即 struct foo arr[]={initialization_list}，然后 array_length = sizeof(array) / sizeof(element_of_array);

解决它的其他方法可能是指针算法，*假设*全局变量是在没有（很多）填充的情况下分配的。

外部 int a[]={2,4,5}; 外部int b = 1；

大小 = (&b-&a[0])/sizeof(int);

# facebook-javascript-sdk - 使用 requirejs 优化和加载外部依赖

> ID：13366103
> 
> 赞同：2
> 
> 时间：2012-11-13T18:00:01.080
> 
> 标签：facebook-javascript-sdk, requirejs

我有一个需要 Facebook SDK 的模块。我想知道我应该如何配置 SDK 的加载，以便 RequireJS 优化器正确处理它。

在应用程序中：

```
require.config({
  paths: {
      'facebook' : '//connect.facebook.net/en_US/all'
  }
}); 
```

在构建配置文件中：

```
{
  ...
  paths: {
     'facebook' : 'empty:'
  }
} 
```

据我了解，上面的代码强制优化器跳过该脚本的优化。问题是，优化后SDK不再加载。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T21:08:29.960

As part of the build process I was using Almond as the AMD loader rather than RequireJS. It appears Almond (0.2.0) does not support loading external dependencies this way. I dropped Almond and switched back to bundling RequireJS during optimization and it worked.

[http://requirejs.org/docs/optimization.html#onejs](http://requirejs.org/docs/optimization.html#onejs)

# ms-access - 单击按钮时如何制作是/否消息框

> ID：13366105
> 
> 赞同：4
> 
> 时间：2012-11-13T18:00:01.913
> 
> 标签：ms-access

我想在单击“保存并打开新”按钮时弹出一个消息框，以保存这样的记录（在表单中）：

您确定要保存此记录吗？是/否

如果记录被保存，我想得到另一个消息框。所以像这样：记录已保存。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-13T18:12:30.490

我不明白命令按钮如何适合这里。如果您谈论的是绑定表单，您可能希望拦截在用户导航到另一条记录时发生的自动保存操作。如果这是您的情况，您可以在表单的更新前事件中询问用户。

```
Private Sub Form_BeforeUpdate(Cancel As Integer)
    Const cstrPrompt As String = _
        "Are you sure you want to save this record? Yes/No"
    If MsgBox(cstrPrompt, vbQuestion + vbYesNo) = vbNo Then
        Cancel = True
    End If
End Sub 
```

如果用户单击否，更新将被取消，她将保留在同一记录上，并有机会对该记录进行不同的更改或不更改。如果您更愿意放弃挂起的更改，请添加`Me.Undo`到该过程。

您可以使用表单的更新后事件来显示“记录已保存”消息。

如果需要，您可以对表单的插入前和插入后事件执行类似操作。

根据对您的问题的更新，我认为您正在寻找这样的东西：

```
Private Sub cmdSaveAndNew_Click()
    Const cstrPrompt As String = _
        "Are you sure you want to save this record? Yes/No"
    If MsgBox(cstrPrompt, vbQuestion + vbYesNo) = vbYes Then
        If Me.Dirty Then
            Me.Dirty = False ' save the record
        End If
        DoCmd.GoToRecord acDataForm, Me.Name, acNewRec
    End If
End Sub 
```

只是不要忘记，如果用户在不使用命令按钮的情况下导航到不同的记录，或者如果用户关闭表单时未保存对当前记录。

# mysql - 当您将多个列名传递给 `add_index` 方法时会发生什么？

> ID：13366109
> 
> 赞同：0
> 
> 时间：2012-11-13T18:00:11.380
> 
> 标签：mysql, ruby-on-rails, database, indexing

> **可能重复：**
> [ActiveRecord 中多列的索引](https://stackoverflow.com/questions/1048909/index-for-multiple-columns-in-activerecord)

我正在使用 Ruby on Rails v3.2.2 和 MySQL。我想知道这些[`add_index`](http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/SchemaStatements.html#method-i-add_index)方法语句之间有什么区别（在数据库级别）：

```
add_index :database_table_name, [:column_one_name]
add_index :database_table_name, [:column_one_name, :column_two_name] 
```

当您指定多个列名（`:column_one_name, :column_two_name`而不是`:column_one_name`）时会发生什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T18:01:30.533

您创建一个[复合索引](http://dev.mysql.com/doc/en/multiple-column-indexes.html)。

# javascript - 在 moment.js 中设置浏览器语言

> ID：13366110
> 
> 赞同：1
> 
> 时间：2012-11-13T18:00:18.413
> 
> 标签：javascript, jquery, momentjs

通过使用`moment.js`我需要设置日期语言。
`moment.lang('fr');`或`moment.lang('en');`工作正常。

我想根据桌面/浏览器的语言偏好设置它。
如何在 javascript 中获取此变量？

附言

navigator.language.slice(0,2) 适用于英语，但我正在寻找更好的解决方案

我正在使用 jquery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:44:20.060

这应该是跨浏览器：

```
var lang = ( navigator.language || navigator.browserLanguage ).slice( 0, 2 ); 
```

在我的机器上，我进入`"en"`了 Firefox、Chrome 和 IE。

# ios - 标签栏图标不显示？

> ID：13366112
> 
> 赞同：2
> 
> 时间：2012-11-13T18:00:32.920
> 
> 标签：ios, ipad, xcode4.5

我有 48x60 的 ab/w PNG。当我在属性窗口中设置图标图像时，我只得到一个灰色渐变矩形而不是我选择的图像。

![](../Images/f30645647645c7c9226ea37f14d2fdb9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T18:35:21.217

标签栏和工具栏的图像实际上是 alpha 蒙版，而不是完整的图像。仅使用图像的 Alpha 通道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T18:03:31.603

对于 Retina Display，标签栏图标应为 30*30 和 60*60... 将您的图标 30*30 放入检查器工具中，并将 60*60 的图标命名为具有相同名称的名称，并在其名称末尾添加 @2x。示例：tabicon1.png (30*30) tabicon1@2x.png (60*60)

# sql-server-2008 - 在 SQL Server 中，您可以根据计算插入多条记录吗？

> ID：13366119
> 
> 赞同：1
> 
> 时间：2012-11-13T18:00:47.450
> 
> 标签：sql-server-2008, bulkinsert

我有几个表，我正在对它们进行一些计算以确定每种类型的记录中有多少要插入到另一个表中。例如，主要实体是县、成员、计划。当我完成计算时，我最终得到如下结果：

*   将 25 个 [County A] + [Plan 1] 记录插入表中
*   将 15 个 [County A] + [Plan 2] 记录插入表中
*   将 10 条 [County A] + [Plan 3] 记录插入表中
*   将 15 个 [County A] + [Plan 4] 记录插入表中
*   将 25 个 [County A] + [Plan 5] 记录插入表中
*   将 63 条 [County B] + [Plan 1] 记录插入表中
*   将 47 [County B] + [Plan 3] 记录插入表中
*   将 19 个 [County B] + [Plan 4] 记录插入表中

INSERTS 看起来像：

```
INSERT INTO Assign (ID, CountyID, PlanID)
VALUES (NEWID(), 'A', 1), (NEWID(), 'A', 1), ..., (NEWID(), 'A', 1) -- 25 times
INSERT INTO Assign (ID, CountyID, PlanID)
VALUES (NEWID(), 'A', 2), (NEWID(), 'A', 2), ..., (NEWID(), 'A', 2) -- 15 times 
```

ETC

我正在寻找一种从存储过程中构建这些 INSERT 语句的方法：

*   不要使用游标和/或 while 循环
*   不做单独的插入，想要批量插入的方法
*   使用 CTE？（不需要，但谁知道）

所有这些信息都存储在一个临时表中，定义为：

```
CREATE TABLE #holding (countyID CHAR(2), planID INT, perCountyPlan INT)

SELECT * FROM #holding ORDER BY countyID, planID
A  1  25
A  2  15
A  3  10
A  4  15
A  5  25
B  1  63
B  3  47
B  4  19
C .......
etc 
```

任何想法如何根据#history 表数据形成插入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:54:48.087

如果你有 perCountyPlan<= 2048，请试试这个。否则，您需要建立自己的号码表

```
WITH num AS (
    SELECT number
    FROM master..spt_values WHERE type = 'P' 
)
INSERT INTO Assign (ID, CountyID, PlanID)
SELECT  NEWID(),h.countyID, h.planID
FROM    #holding h
INNER JOIN num n 
    ON n.number < h.perCountyPlan 
```

# jquery - 带有 JSON 的 JQuery/AJAX - $GLOBALS['HTTP_RAW_POST_DATA'] 为空？

> ID：13366120
> 
> 赞同：0
> 
> 时间：2012-11-13T18:00:56.470
> 
> 标签：jquery, ajax, json

我正在努力解决应该非常简单的事情。我花了几个小时在网上寻找解决方案并查看了 jQuery 文档。

我正在尝试通过 json 字符串向我的服务器发送一个简单的请求。我尝试过转义 json、encodeURIcomponent 等。我相信这很简单，而且我很快就会被自己扇耳光，但这里是这样：

这是Javascript：

```
$(document).ready(function() {
$("#mybutton").click(function(e) {
submitMyRequest();  
});
});

function submitMyRequest()
{

var json = [{"id":"1", "area":"south"}, {"id":"2", "area":"north"},{"id":"3", "name":"east"},{"id":"1", "name":"west"}];

 jQuery.ajax({
     url: "test_server.php",
     type: "POST",
     data: {areas: json },
     dataType: "json",
     beforeSend: function(x) {
         if (x && x.overrideMimeType) {
             x.overrideMimeType("application/j-son;charset=UTF-8");
         }
     },
     success: function(result) {
     alert(result);
     }
 });
} 
```

这是服务器代码：

```
print_r(json_decode($GLOBALS['HTTP_RAW_POST_DATA'],true)); 
```

我不断得到的结果是一个警报，上面写着：

```
null 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:16:56.760

据此[，](http://www.php.net/manual/en/ini.core.php#ini.always-populate-raw-post-data)`$HTTP_RAW_POST_DATA`仅填充了无法识别的 MIME 类型的数据。为了克服这个问题，您可以将`always_populate_raw_post_data`ini 值设置为 true 或使用首选方法访问原始 POST 数据，从`php://input`

```
$postdata = file_get_contents("php://input"); 
```

此外，您似乎没有将 json 发送到服务器，试试这个

```
data: JSON.strinify({areas: json }), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T18:11:09.557

试试这样：

```
var json = '[{"id":"1", "area":"south"}, {"id":"2", "area":"north"},{"id":"3", "name":"east"},{"id":"1", "name":"west"}]'; 
```

在您的服务器端：

```
print_r(json_decode($_POST['areas'],true)); 
```

# perl - 使用 CAM::PDF 进行搜索和替换

> ID：13366122
> 
> 赞同：1
> 
> 时间：2012-11-13T18:01:04.370
> 
> 标签：perl, pdf

我正在尝试做我认为是简单搜索和替换 pdf 文件中的标记的操作。

我有这个 pdf 文件：[http ://servera.service.com/LABELS.pdf](http://servera.service.com/LABELS.pdf)

我正在使用这个简单的 perl 脚本和 CAM::PDF 来获取页面内容并对令牌进行简单的搜索和替换。

```
$pdf = CAM::PDF->new('LABELS.pdf');

$page = $pdf->getPageContent(1);

$page =~ s/\\045\\045Carrier_Tracking_Number\\045\\045/ABE1234567890/;

$pdf->setPageContent(1, $page);

$pdf->cleanoutput('after.pdf');

exit; 
```

我得到的是[http://servera.service.com/after.pdf](http://servera.service.com/after.pdf)

当我转储页面内容时，这是替换之前的内容

[http://servera.service.com/before.txt](http://servera.service.com/before.txt)

这就是我替换后所拥有的

[http://servera.service.com/after.txt](http://servera.service.com/after.txt)

显然我错过了一些非常简单的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:44:21.887

在我看来，您没有做错任何事情，并且代码也按预期运行。但是，我并没有说这些数字“1234567890”，您强制写入文档，将完全显示它们在 PDF 上的样子。

字符 '%' 也是同样的道理，你将它替换为 '\045' 而不是通常的 '%'。PDF 文档在 CMap（Adobe 内置编码表）中编码。如果你用'\115'替换字符串，你会得到一个'M'，'\116'是'N'，'\117'是'O'，但我不知道'\118'还是' P'是。

'getPageContent' 返回页面的整个布局内容。我建议您使用“getPageText”而不是“getPageContent”来获取真正的字符串。然后您可以正常替换或处理字符串。

```
my $textpage = $pdf->getPageText(1);
$textpage =~ s/%%Carrier_Tracking_Number%%/ABD1234567890/; 
```

请记住，一旦作为字符串取出，您将永远不会将其恢复为以前的文档格式。

PS 在模块 CAM::PDF 中，作​​者还提供了两个字符串更改脚本：**changepdfstring.pl**和**changepagestring.pl**。changepdfstring.pl 更改元数据，changepagestring.pl 正是您所做的。你可以参考他们。

# persistence-unit - 同一事务上的多个持久性单元

> ID：13366132
> 
> 赞同：0
> 
> 时间：2012-11-13T18:02:08.270
> 
> 标签：persistence-unit

我正在尝试使用 2 个不同的数据库实现事务。
我目前为每个数据库都有一个持久性单元，并且想在同一个事务上写入模式 SA 上存在的表 A 并写入模式 SB 上的表 B 上。

我正在使用 weblogic 和 eclipselink。

我进行了一些搜索，但没有发现在同一事务上使用多个持久性单元的示例。

有人可以告诉我这样做的正确方法吗？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:18:27.220

发现，这应该使用 XA 数据源来实现。
每个持久性单元都应使用 XA 数据源，然后参与两阶段提交。

我现在有：

*   2 个带驱动程序的数据源：oracle.jdbc.xa.client.OracleXADataSource 和登录两个数据库的凭据
*   每个持久性单元都在一个 ejb 外观上调用，而这些 ejb 外观在全局事务上调用。

# c++ - 更改另一个类的值

> ID：13366133
> 
> 赞同：1
> 
> 时间：2012-11-13T18:02:15.297
> 
> 标签：c++, class

好的，所以我有一个`Character .h/.cpp`，一个`Enemy .h/.cpp`，和一个`Driver.cpp`如果我在我的驱动程序中创建我的角色，我如何创建将操纵来自 Enemy 类的角色的方法？

前任。

```
Driver: Character* character = new Character(); 
```

现在，在我的敌人文件中，我希望敌人的行动能够改变`character's`值（生命、生命值等）。我知道我不能使用 character->setHP(whatever) 因为`Enemy`文件不知道`character`存在...有没有办法做到这一点？

对不起，如果这令人困惑。

编辑：

好的，所以如果我`character`将

```
ENEMY.CPP: void Enemy::enemyAttack(Character *character)
{ //whatever needs to be done } 
```

效果很好。

但回到我的`Driver`，如果我这样做：

```
Character *character = new Character();
Enemy::enemyAttack(character); 
```

我收到以下错误消息：“非静态成员引用必须相对于特定对象。” 是`character`不是具体的对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:53:53.133

> 我希望敌人的行动能够改变角色的价值（生命、生命值等）。我知道我不能使用 character->setHP(whatever) 因为 Enemy 文件不知道该角色存在......有没有办法做到这一点？

您可以通过在您的类中充当更改通知器的接口（实现为抽象类）来解耦您的`Enemy`和类。考虑以下设计：`Character``Enemy`

**敌人等级**

```
class Enemy{

   //your stuff
   enemyChangeListener ch;
   public:
      Enemy(/*your members*/,enemyChangeListener echl){
           /*your initialissation*/
           ch = echl;
      }

   //the method where you want to call a change on the character or any other object
   void enemyAttack(){
      //....//
      ch.fireEnemyAttacked(/*whatever args that describe the prop change in enemy object*/)
   } 
```

**enemyChangeListener 类**

该类`enemyChangeListener`只是一个抽象类，只有一个（也许更多）方法：`fireEnemyAttacked`如下：

```
class enemyChangeListener{

      public:
       virtual void fireEnemyAttacked(/*args*/)=0;

} 
```

**字符类**

现在，在你的角色类中，你可以从enemyPropertyChanged 抽象类继承，并提供一个实现`fireEnemyAttacked`方法，根据传递给敌人对象的任何更改参数来更改角色对象`fireEnemyAttacked`。

```
class Character : public enemyChangeListener{

 //your methods and members;

 void fireEnemyAttacked(/*args*/){

   //do the changes to the character.
 } 
```

您通过提供对您的对象的引用来实例化一个 Enemy 对象`Character`（敌人类在构造函数中将其视为一个`enemyChangeListener`对象。这种设计完成了两件事：

1.  您的`Enemy`类不再需要担心类的实现细节（例如 getter 和 setter 方法）`Character`。它所知道的是，任何想要根据敌人对象上的某些事件来改变自己的对象都将实现所需的接口并自己处理更改。

2.  您不仅可以将此接口与`Character`类一起使用，还可以与任何其他可能对侦听敌人对象的更改或操作感兴趣的类一起使用，并更改其自身的状态作为响应。

* *PS：**

> 非静态成员引用必须相对于特定对象。

您是否检查过是否`enemyAttack`是静态函数？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T18:05:41.513

您应该有一个公共文件，其中有一个角色和一个敌人。在该文件中，您应该处理诸如敌人伤害角色之类的事件，反之亦然。让 Enemy 实例直接更改角色实例中的值将需要两个类非常紧密地耦合，这将是不好的做法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T18:05:27.157

编辑：尝试将角色类放在敌人之上，或者在敌人文件的顶部包含 character.h。

在字符中创建能够通过传递参数来修改值的函数。

```
void Character::ModLife(int M)
{
    hp -= M;
}

void Character::ModAr(int Ar)
{
    Armor -= Ar;
} 
```

在函数中......

```
character.ModLife(5); 
```

# python - 检查/反汇编代码对象时动态递归地跟踪可调用对象

> ID：13366135
> 
> 赞同：3
> 
> 时间：2012-11-13T18:02:18.370
> 
> 标签：python

我想对任何函数/方法进行一些反省。对于我的所有示例，我都使用 Python 2.7，但是如果使用 3.3 可以使事情变得更容易，那么使用 3.3 不是问题。

假设我在名为 foobar.py 的模块中有以下代码：

```
def foo():
    bar() 
```

我可以看到 foo 运行的动态代码：

```
import inspect
import foobar
inspect.getsource(foobar.foo) 
```

我还可以从这个函数的代码对象中获取反汇编的字节码：

```
import dis
dis.dis(foobar.foo) 
```

有没有一种方法可以检测到该`foo`方法调用了另一个函数（`bar`在这种情况下），然后动态地反汇编/检查它？

我知道代码对象本身具有各种属性，如下所示：

```
>>> dir(foobar.foo.__code__)
['__class__', '__cmp__', '__delattr__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__gt__', '__hash__', '__init__', '__le__', '__lt__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', 'co_argcount', 'co_cellvars', 'co_code', 'co_consts', 'co_filename', 'co_firstlineno', 'co_flags', 'co_freevars', 'co_lnotab', 'co_name', 'co_names', 'co_nlocals', 'co_stacksize', 'co_varnames'] 
```

我检查了他们中的大多数，只是环顾四周，但还没有完全找到我要找的东西。

最终目标只是一个小实验，看看我是否可以在不执行导入以外的代码的情况下递归打印出一个可能的调用堆栈。我知道理论上的调用堆栈不能解释运行时的事情，比如特定变量的状态等。我只想打印出给定某个调用的所有嵌套函数的源代码（即使代码永远不会基于运行时状态）。

此外，我知道一旦我进入 CPython 代码，`inspect`and`dis`模块将无济于事。最终，打印出某种映射可能会很有趣，该映射显示它何时到达`inspect`并`dis`分解了 CPython 代码。但是，我什至不确定这是否可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T16:24:42.050

所有编译器/解释器在解析源代码时都会构建一个抽象语法树。这是基于其上下文无关语法的程序的表示，然后可以递归地遍历以生成可以由机器执行的代码。

Python 提供对其 AST 的访问，您可以自己遍历这棵树并`ast.Call`在`ast.FunctionDef`. 下面贴一个简单的例子。请注意，这肯定不会捕获所有可能的调用，因为调用可以嵌入到其他表达式中，被`eval`表达式隐藏等等。这是一个简单的例子：

```
import ast

source = """
def foo():
    bar()

def bar():
    baz()

def baz():
    print "hello!"
"""

def get_method_name_for_call(call_obj):
    for fieldname, value in ast.iter_fields(call_obj):
        if fieldname == "func":
            return value.id

def walk_method_calls(node, cur_func):
    if not node:
        return

    for cur_node in ast.iter_child_nodes(node):
        if type(cur_node) == ast.Call:
            method_called = get_method_name_for_call(cur_node)
            print "Found a call to %s in body of %s." % (method_called, cur_func)
        walk_method_calls(cur_node, cur_func)

def walk_function_defs(node):
    if not node:
        return

    for cur_node in ast.iter_child_nodes(node):
        if type(cur_node) == ast.FunctionDef:
            walk_method_calls(cur_node, cur_node.name)

# we pass <string> as a recognizable identifier since
# we have no filename
ast_root = compile(source, "<string>", "exec", ast.PyCF_ONLY_AST)
walk_function_defs(ast_root) 
```

和一个执行示例：

```
$ python abstract_tree.py 
Found a call to bar in body of foo.
Found a call to baz in body of bar. 
```

# vba - 使用 VBA 在 MS Word 中创建表格

> ID：13366136
> 
> 赞同：4
> 
> 时间：2012-11-13T18:02:22.880
> 
> 标签：vba, ms-word

在 MS Word 中创建表格的代码是什么？

我已经使用宏的记录函数来查看它是如何编写的，但我不知道如何解释它。

录制宏时不能画表吗？它使“绘图表”功能变灰。

我需要制作一个表格，在表格中包含一些合并的单元格 - 如果我可以绘制表格并使用宏记录会更容易，但似乎我不能这样做......

![桌子](../Images/452e8b8d33c13f898c42f316b5784262.png)

我已经使用draw函数绘制了下表，但我无法记录它。

帮助？！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T20:23:22.367

这应该让你开始。

```
Sub Tester()

    Dim x, w, c

    ThisDocument.Tables(1).Delete

    ThisDocument.Tables.Add Range:=Selection.Range, NumRows:=7, NumColumns:=1, _
                          DefaultTableBehavior:=wdWord9TableBehavior, _
                          AutoFitBehavior:=wdAutoFitFixed

    With ThisDocument.Tables(1)

        .Rows.Height = 70
        w = .Rows(1).Cells(1).Width

        .Rows(1).Cells(1).Split 1, 7
        .Rows(1).Cells(1).Width = w / 2
        For x = 2 To 7
            .Rows(1).Cells(x).Width = (w / 2) / 6
        Next x

        .Rows(5).Height = 15
        .Rows(7).Height = 15

        .Rows(7).Cells(1).Split 1, 7

        .Rows(6).Cells(1).Split 1, 4
        .Rows(6).Cells(2).Split 2, 1

        'Once you merge cells it gets difficult to use .Rows, but
        '  you can still address individual cells. Use the loop below to
        '  find out which one you need to operate on...
        x = 1
        For Each c In .Range.Cells
            c.Range.Text = x
            x = x + 1
        Next c

        .Range.Cells(16).Split 1, 4
        'you can figure out setting the exact required widths...
    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T19:11:26.660

制作表格的基本命令是

```
ActiveDocument.Tables.Add Range:=Selection.Range, NumRows:=4, NumColumns:= 3 
```

并拆分/合并单元格：

```
Selection.Cells.Split NumRows:=1, NumColumns:=2
Selection.Cells.Merge 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-28T19:09:38.140

您可以创建表格，然后将其保存为自动文本（选择表格 - ALT+F3 - 自动文本的名称）。然后，当您需要文档中的表格时，只需键入您给它的名称并按 F3。

# python - 如何用 Python 替换 debian 上的 /etc/hosts 中的主机名

> ID：13366137
> 
> 赞同：3
> 
> 时间：2012-11-13T18:02:23.287
> 
> 标签：python, ubuntu, debian, hostname

我正在编写一种使用 Python 在 Debian 系统上设置主机名的方法。我成功于：

*   从 arg1 获取新主机名，或者如果我将其定义为变量的值
*   获取当前主机名
*   打开`/etc/hostname`并将新主机名从变量写入文件，然后关闭它。
*   开放`/etc/hosts`阅读或写作

我被困在那里。我尝试将其作为字符串读取`str.replace(oldname, newname)`，但除非我将文件内容转换为`str`. 如果我这样做，我将无法写入文件。

或者，我已经尝试过`re.sub()`，但同样无法将结果写入`/etc/hosts`.

任何反馈表示赞赏。

我做了研究示例并找到[了 CentOS 的解决方案](http://dhika.cikul.or.id/how-to-change-hostname-in-centos.html)。我从中吸取了教训，但看不到我的问题的解决方案。

Bash 绝对是完成这项工作的正确工具。如果我不连接，则为 3 行。但是，我需要一个 python 解决方案。

上面引用的代码写入主机名：我已经处理好了。我没有发现相同的策略适用于主机。

这是工作代码，感谢您的建议。他们需要被考虑在内。我也放弃了结论。但这完成了狭义的工作：

```
#!/usr/bin/python -ex
import os, sys, syslog

#Customize
hosts_file = '/etc/hosts'
hostname_file = '/etc/hostname'

#Check for root
if not os.geteuid()==0:
    sys.exit("\nOnly root can run this script\n")

if len(sys.argv) != 2:
    print "Usage: "+sys.argv[0]+" new_hostname"
    sys.exit(1)

new_hostname = sys.argv[1]

print 'New Hostname: ' +new_hostname

#get old hostname
f_hostname = open('/etc/hostname', 'r')
old_hostname = f_hostname.readline()
old_hostname = old_hostname.replace('/n','')
f_hostname.close()

print 'Old Hostname: ' +old_hostname

#open hosts configuration
f_hosts_file = open(hosts_file, 'r')
set_host = f_hosts_file.read()
f_hosts_file.close()
pointer_hostname = set_host.find(old_hostname)

#replace hostname in hosts_file
set_host = set_host.replace(old_hostname, new_hostname)
set_host_file = open(hosts_file,'w')
set_host_file.seek(pointer_hostname)
set_host_file.write(set_host)
set_host_file.close()

#insert code to handle /etc/hostname

#change this system hostname
os.system('/bin/hostname '+new_hostname)

#write syslog
syslog.syslog('CP : Change Server Hostname') 
```

然后我希望编写一个函数来写入/替换旧主机名所在的新主机名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:44:40.967

您提供的链接打开主机文件以供读取，将其内容保存在字符串中，在字符串上调用替换，关闭文件，打开文件以进行写入并写入字符串 - 这究竟是不是您的问题的解决方案？

```
f = open("/etc/hosts", "r")     #open file for reading
contents = f.read()             #read contents
f.close()                       #close file
contents.replace(old, new)      #replace
f = open("/etc/hosts", "w")     #open file for writing
f.write(contents)               #write the altered contents
f.close()                       #close file 
```

您也可以使用以下模式在不关闭并重新打开文件的情况下执行此`r+`操作：

```
f = open("/etc/hosts", "r+")    #open file with mode r+ for reading and writing
contents = f.read()             #read the file
contents.replace(old, new)      #replace
f.seek(0)                       #reset the file pointer to the start of the file
f.truncate()                    #delete everything after the file pointer
f.write(contents)               #write the contents back
f.close()                       #close the file 
```

请注意，`replace`如果您不采取特殊预防措施，则使用是不安全的 - 例如，主机名可能是主机文件中包含的其他主机名或别名的子字符串，因此您至少应该在替换之前用空格将其包围。您还需要确保输入的任何内容都可以作为主机名有效。处理所有这些问题的最简单方法可能是`hostname`通过`subprocess.Popen`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T19:00:44.340

使用域更改主机名的 Python 函数，您需要一个名为 hosts_tail 的帮助文件，位于文件系统中的任何位置，该文​​件如下所示：

## 帮助文件 hosts_tail

```
# The following lines are desirable for IPv6 capable hosts
::1     ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters 
```

## Python函数：

```
def set_hostname(hostname,domain):
"""
usage: set_hostname('debian','labor.local')
"""
try:
    os.system('echo 127.0.0.1    localhost > /etc/hosts')
    os.system('echo 127.0.1.1    '+ hostname + '.' + domain + ' ' + hostname +  ' >> /etc/hosts')
    os.system('cat ' + mypath + 'config/hosts_tail >> /etc/hosts')
    os.system('echo ' + hostname + ' > /etc/hostname')
    os.system('echo ' + hostname + '.' + domain + ' > /etc/mailname')
    os.system('cat /etc/resolv.conf | grep nameserver | uniq > /tmp/resolv.tmp')
    os.system("echo domain " + domain + ' > /etc/resolv.conf')
    os.system("echo search " + domain + ' >> /etc/resolv.conf')
    os.system('cat /tmp/resolv.tmp | uniq >> /etc/resolv.conf')
    os.system('rm -rf /tmp/resolv.tmp')
    os.system('/etc/init.d/hostname.sh start')
except Exception, e:
    return False
return True 
```

我的Debian操作系统：

```
cat /etc/debian_version
6.0.6 
```

# android - 片段着色器中的统一浮动。平板电脑

> ID：13366139
> 
> 赞同：0
> 
> 时间：2012-11-13T18:02:26.943
> 
> 标签：android, opengl-es, fragment-shader, uniform

我正在使用 JNI 和 NDK 构建一个 OpenGL 项目，在我的手机（galaxy nexus）上一切正常，但我试图在几台平板电脑（华为和宏基）上启动这个应用程序并发现一个奇怪的行为：

在我的片段着色器中有一个值：

```
 uniform float current;
    ...
    gl_FragColor = (...,current); 
```

在我的代码中，我这样做：

```
 g_currentAreaLoc = glGetUniformLocation(g_nGLESProgram, "current" );
    ...
    glUseProgram(g_nGLESProgram);
    glUniform1f(g_currentAreaLoc, area); 
```

当我在手机上尝试此代码时，一切都很完美，但在平板电脑上却没有预期的结果。

**但是**，如果我有例如**0.0**而不是当前的代码 -***这台平板电脑上一切正常。***

我不明白为什么这个变量在手机上有效，而在平板电脑上存在问题（可能取决于操作系统版本）。

# jquery - 链接格式不正确导致 CSS 出现问题

> ID：13366140
> 
> 赞同：0
> 
> 时间：2012-11-13T18:02:27.920
> 
> 标签：jquery, html, css

我试图在单击链接时将链接的背景更改为颜色。我见过很多使用 jquery 的例子。它看起来很干净，很简单。我已经实现了它，我基本上复制了堆栈中某人的礼貌，将一个漂亮的简单小提琴放在一起。我的问题是当链接打开时，您可以看到白色背景，然后它就消失了。

你们中的一些人会说这是因为您在 CSS 中使用 :active 伪类，但是我根本没有使用它。但是，它的行为正是如此。

这是一个有效的例子。[http://jsfiddle.net/stewbydoo/9R5CG/15/](http://jsfiddle.net/stewbydoo/9R5CG/15/)

我的问题和问题是我在小提琴中复制了这个导航并将其放入我的代码中并将href更改为实际链接到另一个页面。我的文件结构很简单，有 index.html、about.html、contact.html 和指向我的博客的链接。

```
<li><a href="index.html">Home</a></li>
<li><a href="about.html">About</a></li>
<li><a href="contact.html">Contact</a></li>
<li><a href="someblogaddresshere" target="_blank">Contact</a></li> 
```

当我单击简单 .html 页面的链接时，链接的行为就像它使用 :active 伪类一样，但事实并非如此。当我单击指向我的博客的链接时，它实际上会像预期的那样将背景添加到链接中，并在新选项卡中打开页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:38:20.530

当您单击第一个链接时，页面会重新加载，这就是重置 javascript 的原因（因此没有背景样式）。

将您的 href 值更改为`#`，它将起作用（但您不会再更改页面）。

要修复它，您有 2 个选项：

1.  禁用链接上的页面重新加载（e.preventdefault），并在 ajax 中加载页面内容（复杂）。
2.  管理此服务器端（更容易但需要动态语言）。

对于 2，我假设您使用的是 php。代码**大致**如下所示：

```
<?php
   $pageActiveIndex = false
   if ($_SERVER["REQUEST_URI"] == "index.html") {
      $pageActiveIndex = true;
   }
   //same thing for the other links
?>

<li><a <?php if($pageActiveIndex) echo 'class="activeTab"' ?> href="index.html">Home</a></li>
<li><a <?php if($pageActiveAbout) echo 'class="activeTab"' ?> href="about.html">About</a></li>
<li><a <?php if($pageActiveContact) echo 'class="activeTab"' ?> href="contact.html">Contact</a></li>
<li><a href="someblogaddresshere" target="_blank">Contact</a></li> 
```

当然，`target=_blank`在任何地方添加也可以......但我怀疑这是你想要的效果。

# 编辑

由于您的网站似乎是静态的，因此您可以做一些超级简单的事情来产生效果。

将自定义 css 添加到您的样式表中，在某个类中（我将其命名为“youarehere”），然后打开所有页面并更改它们。

在 index.html 中

```
<li><a class="youarehere" href="index.html">Home</a></li>
<li><a href="about.html">About</a></li>
<li><a href="contact.html">Contact</a></li>
<li><a href="someblogaddresshere" target="_blank">Contact</a></li> 
```

在 about.html

```
<li><a href="index.html">Home</a></li>
<li><a class="youarehere" href="about.html">About</a></li>
<li><a href="contact.html">Contact</a></li>
<li><a href="someblogaddresshere" target="_blank">Contact</a></li> 
```

在contact.html

```
<li><a href="index.html">Home</a></li>
<li><a href="about.html">About</a></li>
<li><a class="youarehere" href="contact.html">Contact</a></li>
<li><a href="someblogaddresshere" target="_blank">Contact</a></li> 
```

# css - line-height 属性如何向上移动文本？

> ID：13366144
> 
> 赞同：1
> 
> 时间：2012-11-13T18:02:35.503
> 
> 标签：css

我想知道这种风格的作者如何使用 line-height 属性将标题向上移动？我对 line-height 的了解是它用于控制线之间的空间，而不是用于移动元素！

![一个例子](../Images/ddb3f4b1c9e03d6c6162d56ec11d499a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T18:05:32.580

`line-height`调整**整**行的高度，并且文本必须位于整个高度内的某个位置，通常位于中间。因此，通过增加整个框的大小，该框内的可见文本会向上移动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T18:06:10.653

标题上方的容器内可能有空格/其他类型的空白空间，因此更改行高将减小该空格的大小，并将文本向上移动。

# objective-c - 在 For 循环中使用 NSDictionary 时专门引用键或对象

> ID：13366150
> 
> 赞同：0
> 
> 时间：2012-11-13T18:02:50.440
> 
> 标签：objective-c, for-loop, nsdictionary, nsmutabledictionary

令人困惑的解释：我试图通过 NSMutableDictionary 迭代一个 for 循环，查看它的“键”值，并将这些值与第二个 NSMutableDictionary 的“键”值进行比较。如果有匹配项（它们是字符串比较），我希望将两个字典的“对象”添加到单独的数组中。

澄清一下，字典 A 和 B 都包含单词列表（对象）和按字母顺序排列的单词（键），如下所示：

苹果 = aelpp 番茄 = amoott stack = ackst

所以我需要将“aelpp”与“amoott”进行比较，然后存储“apple”和“tomato”。

基本问题是：当使用 for 循环 ( `for (NSString *currentWord in dictionaryA)`) 时，如何具体引用字典 A 的对象或键？我需要它来比较键，但如果它们匹配，则存储对象。

如果有什么需要进一步澄清，请询问:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T18:31:40.000

要回答您的“基本问题”：快速枚举`NSDictionary`枚举字典**键**：

```
for (NSString *keyA in dictionaryA) {
    NSString *valueA = [dictionaryA objectForKey:keyA];
    // Now keyA : valueA is one key-value pair of dictionaryA ...
} 
```

（假设所有键和值都是字符串）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-23T23:18:36.543

如果您想同时在 Key 和 Values 之间进行迭代，请使用以下命令：

```
[dictionaryA enumerateKeysAndObjectsUsingBlock:^(NSString * keyA,
                                                   id valueA,
                                                   BOOL *stop) {
    // You have at the same time access to keyA and valueA
}]; 
```

# php - SQL 基准测试：PHP ActiveRecord ORM 与 MySQL 与 CodeIgniter Active Record 与标准 PHP

> ID：13366155
> 
> 赞同：3
> 
> 时间：2012-11-13T18:03:05.747
> 
> 标签：php, mysql, sql, performance, benchmarking

*测试更新为更具可读性；所有这些都在 100 倍的 foreach 循环中完成。*

测试查询是**SELECT * FROM school_courses;**

任何人都可以提供“跳出框框思考”的反馈：

a) 为什么 PHP ActiveRecord ORM 需要 4 秒才能根据以下结果执行相同的查询？

b) 这是比较查询方法的实际基准还是更多的假设基准？

c）是否有其他方法（测试用例）我应该尝试（或修改这些方法）以获得更清晰的画面？

**结果（使用 PDO 和 MySQLi）**

```
Iterations: 100

PHP (config file)
Base Time: 5.793571472168E-5
Gross Time: 0.055607080459595
Net Time: 0.055549144744873

PHP ActiveRecord ORM
Base Time: 5.2213668823242E-5
Gross Time: 4.1013090610504
Net Time: 4.1012568473816

MySQL (standard)
Base Time: 5.1975250244141E-5
Gross Time: 0.32771301269531
Net Time: 0.32766103744507

CodeIgniter (Active Record)
Base Time: 5.1975250244141E-5
Gross Time: 0.28282189369202
Net Time: 0.28276991844177

MySQLi
Base Time: 5.1975250244141E-5
Gross Time: 0.20240592956543
Net Time: 0.20235395431519

PDO
Base Time: 5.2928924560547E-5
Gross Time: 0.17662906646729
Net Time: 0.17657613754272 
```

**测试**

```
// Benchmark tests
$runs = 100;

// PHP (config file)
for ($i = 0; $i < $runs; $i++) {
    $this->view_data['courses'] = course_info();
}

// PHP ActiveRecord ORM
for ($i = 0; $i < $runs; $i++) {
    $this->view_data['courses'] = Course::all();
}

// mysql_* (MySQL standard; deprecated)
for ($i = 0; $i < $runs; $i++) {
    $sql = mysql_query('SELECT * FROM school_courses') or die(mysql_error());
    while ($row = mysql_fetch_object($sql)) {
        array_push($this->view_data['courses'], $row);
    }
}

// CodeIgniter (Active Record)
for ($i = 0; $i < $runs; $i++) {
    $this->view_data['courses'] = $this->db->get('school_courses');
}

// mysqli_* (MySQLi)
for ($i = 0; $i < $runs; $i++) {
    $res = $mysqli->query('SELECT * FROM school_courses');
    while ($row = $res->fetch_object()) {
        array_push($this->view_data['courses'], $row);
    }
}

// PDO
for ($i = 0; $i < $runs; $i++) {
    foreach($conn->query('SELECT * FROM school_courses') as $row) {
        array_push($this->view_data['courses'], $row);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T20:52:30.530

因此，PHP ActiveRecord ORM 在对并发连接进行基准测试时引入如此多开销的原因是因为返回的每个结果都会实例化一个新的模型对象。这是使用这个 ORM 库不可或缺的一部分，我看不出有任何合理的方法可以在不彻底检查整个库的情况下进行更改。

这是我发现的：

在 Table 类的 find_by_sql() 方法中，您有：

```
 $sth = $this->conn->query($sql,$this->process_data($values));

    while (($row = $sth->fetch()))
    {
        $model = new $this->class->name($row,false,true,false);

        if ($readonly)
            $model->readonly();

        if ($collect_attrs_for_includes)
            $attrs[] = $model->attributes();

        $list[] = $model;
    } 
```

具体来说，动态模型实例化**new $this->class->name()**负责开销，比方说，每个获取的结果的权重约为 0.004。

你把它乘以现在的记录数，（10 条记录 = 0.04）。现在将其乘以并发连接数，假设为 100，您就会遇到可预见的瓶颈问题。

100 个用户（假设）同时访问包含 10 条记录的表需要四 (4) 秒。

此时我是否应该担心由于该库为每条记录实例化模型类的方式，正在获取的记录数量可能会导致瓶颈问题？

同样，在这一点上，这一切都可能是假设的言论，假设正确使用 ORM，在现实世界中可能永远不会存在或提出问题。除非这些测试或结论不准确，否则我在这里试图模拟的是 100、1,000 和 10,000 名活跃现场访问者的流量负载。

换句话说，如果我不添加其他课程（限制 10），例如，浏览课程页面的 10,000 名访问者是否会导致其他人离开页面需要 400 秒（6.67 分钟）的等待时间？如果是这样的话，那么我会找到我自己的答案（因此这篇文章），并且会考虑寻找另一个 ORM 或根据具体情况进行重构。

这是基准测试和模拟流量负载的最合适方法吗？

**其他资源**

如何使用 ab 工具进行 Apache 压力测试 [https://wiki.appnexus.com/display/documentation/How+to+Apache+Stress+Test+With+ab+Tool](https://wiki.appnexus.com/display/documentation/How+to+Apache+Stress+Test+With+ab+Tool)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T18:23:16.237

重写建议：

我不想听起来很残酷，但如果你忘记了你所知道的关于 mysql_() 的一切，你可以在未来省去很多麻烦，并跟上当前的做法。以今天的标准，老实说，它是垃圾。查看 mysqli_ 或 PDO 作为您的数据库接口。

mysqli_：[http ://us2.php.net/manual/en/book.mysqli.php](http://us2.php.net/manual/en/book.mysqli.php)

PDO：[http ://us2.php.net/manual/en/book.pdo.php](http://us2.php.net/manual/en/book.pdo.php)

然后报告基准...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T00:14:50.867

您的简单查询并不是真正的公平测试。对于这样的简单查询，ORM 很好并且相当有竞争力。ORM 在其上创建低效查询是更复杂的查询（即 LEFT JOIN），您最终不得不绕过它们。ORM 总是比了解 SQL 的人编写的原始 SQL 慢。当然，了解 SQL 是关键。

如果你正在考虑 ORM，你真的应该试试 Doctrine。我（完全）不是 ORM 的粉丝，但那是最流行的 PHP ORM。

批量插入也是一些 ORM 和 DB 抽象层出错的另一个领域。他们没有认识到可以使用批量插入，而是在循环中进行单次插入。除了速度慢之外，这还会导致 MyISAM 上的表锁定问题。也许添加一个批量插入测试，如果可能的话让每个数据库层生成插入查询。

您的测试方法所揭示的是，经过多次迭代，每种数据库访问方法的开销都会增加。我建议完全消除查询开销，而只使用“SELECT VERSION()”。

# python - pymetrics 的输出告诉我什么？

> ID：13366156
> 
> 赞同：1
> 
> 时间：2012-11-13T18:03:11.557
> 
> 标签：python, metrics

python度量代码[pymetrics](http://sourceforge.net/projects/pymetrics/)可用于分析代码文件的复杂性。他们创建了两个不同的指标：

1.  `McCabe Complexity Metric`对于函数和类
2.  A`COCOMO 2's SLOC Metric`代表整个文件

我想知道这些指标的数值是什么意思，而不是真正的定义。“1”的值是什么意思？数字“5”？数字“10”？更高更好还是更低？什么数值代表好代码，什么代表真正糟糕的代码？搜索互联网给出了一些[提示](http://mindref.blogspot.ch/2010/06/python-pymetrics.html)，但我不确定分类是指指标（1）还是指标（2）。我想对这两个数字都有意义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T18:07:44.027

我认为您的问题中有一个有问题的假设，即好的代码对某个指标具有一定的价值。你不能用一个单一的指标来衡量代码的*质量*，它是事物的组合，并且高度依赖于上下文。真正超级高效的代码通常有点难以理解，这是否使它成为糟糕的代码？

IBM 决定在 70 年代通过他们产生的代码行数 (SLOC) 来衡量他们的程序员的质量。不用说，这导致了一些非常冗长和愚蠢的代码。

如果您想了解代码的质量，那么您需要其他开发人员来查看它。最好是比您更有经验的开发人员。友好的代码审查非常适合学习，它还会迫使你思考为什么你会按照自己的方式做某事，而不是其他本可以完成的方式。幸运的是，stackexchange 正好提供[了](https://codereview.stackexchange.com/).

来自维基百科

[圈复杂度](https://en.wikipedia.org/wiki/Cyclomatic_complexity)

> 圈复杂度（或条件复杂度）是一种软件度量（度量）。它由 Thomas J. McCabe, Sr. 于 1976 年开发，用于表示程序的复杂性。它直接测量通过程序源代码的线性独立路径的数量。这个概念，虽然不是方法，但有点类似于由 Flesch-Kincaid 可读性测试测量的一般文本复杂性。... **一段源代码的圈复杂度是通过源代码的线性独立路径的数量的计数。例如，如果源代码不包含 IF 语句或 FOR 循环等决策点，*则复杂度将为 1*，因为代码只有一条路径。如果代码具有包含单个条件的单个 IF 语句，则将有两条路径通过代码，一条路径将 IF 语句评估为 TRUE，另一条路径将 IF 语句评估为 FALSE。**

你不能说`1`比 更好`2`，这取决于上下文（你在写什么语言，谁在写代码等等）。您应该将圈复杂度值视为提示您理解代码的*控制流*是多么容易。大量嵌套`if`语句会导致高 CC。因此，理想情况下，您的 CC 为 1（可能是每个函数），即一个函数以一种方式做一件事，没有别的，但显然这并不总是可能的。您必须在上下文中评估您为该指标获得的任何价值。

您倾向于在用相同语言编写的其他库中看到什么样的价值观？不过，我不能给你一个数字（对不起）。我可以说 15 的 CC 值可能有点过头了，应该重构代码。这是执行脚本/函数的 15 种不同方式。*在测试该功能*时需要考虑 15 种不同的条件，并且不要忘记可能使这 15 种事情不起作用的所有事情。你需要对它们进行另一个单元测试，以及值的组合（你明白了）。

[源代码行](http://en.wikipedia.org/wiki/Source_lines_of_code)

> 源代码行数 (SLOC) 是一种软件度量标准，用于通过计算程序源代码文本中的行数来衡量计算机程序的大小。SLOC 通常用于预测开发程序所需的工作量，以及估计软件生产后的编程生产力或可维护性。

[可可](http://en.wikipedia.org/wiki/COCOMO)

> 建设性成本模型 (COCOMO) 是由 Barry W. Boehm 开发的一种算法软件成本估算模型。该模型使用基本回归公式，其参数源自历史项目数据和当前项目特征。

另一方面，COCOMO 并不是真正衡量代码的质量，它是一种软件项目 (COCOMO II) 的成本计算模型，是对最近（90 年代之后）软件项目的更新。

[Softwaresystems.com](http://www.softstarsystems.com/cocomo2.htm)有话要说

> COCOMO II 实际上是三种不同的模型：
> 
> • 应用程序组合模型 - 适用于使用现代 GUI 构建器工具构建的项目。基于新的对象点。
> 
> • 早期设计模型——在确定项目的整个架构之前，您可以使用此模型粗略估计项目的成本和持续时间。它使用一小组新的成本动因和新的估算方程。基于***未调整的功能点***或***KSLOC***。
> 
> • 后架构模型 - 这是最详细的 COCOMO II 模型。您将在开发项目的整体架构后使用它。它具有新的成本驱动因素、新的行计数规则和新的方程式。

一个*功能点*是一个功能单元，*KSLOC*是数千行代码。所以 COCOMO 模型是用于估计软件项目的成本、时间、所需资源等，而不是评估代码的质量。

# java - Java Swing：无法从应用程序包创建资源。使用基于 Java 的资源

> ID：13366157
> 
> 赞同：0
> 
> 时间：2012-11-13T18:03:13.060
> 
> 标签：java, macos, swing

我试图改变`Look&Feel`

```
public class Main {
    public static void main(String[] args) {
        try {
            String osName = System.getProperty("os.name");
            if (osName.contains("Mac")) {
                System.setProperty("apple.laf.useScreenMenuBar", "true");
            }
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch (Exception e1) {
        }
    }
} 
```

但是在线获取异常`UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName())`

```
java.lang.NullPointerException
Failed to create resources from application bundle.  Using Java-based resources.
    at java.io.File.<init>(File.java:222)
    at com.apple.resources.LoadNativeBundleAction.run(MacOSXResourceBundle.java:60)
    at com.apple.resources.LoadNativeBundleAction.run(MacOSXResourceBundle.java:33)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.apple.resources.MacOSXResourceBundle.getMacResourceBundle(MacOSXResourceBundle.java:29)
    at com.apple.resources.MacOSXResourceBundle.getMacResourceBundle(MacOSXResourceBundle.java:24)
    at com.apple.laf.AquaLookAndFeel.initResourceBundle(AquaLookAndFeel.java:244)
    at com.apple.laf.AquaLookAndFeel.initComponentDefaults(AquaLookAndFeel.java:260)    
    at com.apple.laf.AquaLookAndFeel.getDefaults(AquaLookAndFeel.java:227)
    at javax.swing.UIManager.setLookAndFeel(UIManager.java:520)
    at javax.swing.UIManager.setLookAndFeel(UIManager.java:564)
    at org.camobap.osx.Main.main(Main.java:26) 
```

有人可以帮我避免这个问题吗？

更新： `jdk1.7.0_09`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:32:57.547

看起来您的错误来自您的 setLookAndFeel 行。您应该验证`UIManager.getSystemLookAndFeelClassName()`是否返回了您的想法。您还可以使用以下代码检查此系统上安装了哪些外观：

```
 try {
        for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
            System.out.println(info.getName() + " - " + info.getClassName());
            //You can now set the look to the one you want with something like this:
            if ("Mac".equals(info.getName())) {
                UIManager.setLookAndFeel(info.getClassName());
            }
        }
    } catch (Exception e) {
        // Forget the look and feel!           
    } 
```

# asp.net-mvc-3 - VS2012 SiteMapNode和VS2010不一样？

> ID：13366159
> 
> 赞同：1
> 
> 时间：2012-11-13T18:03:27.780
> 
> 标签：asp.net-mvc-3, visual-studio-2010, visual-studio-2012

我正在尝试将 MVC3 项目从 Visual Studio 2010 升级到 Visual Studio 2012，但是我在运行时遇到了 XMLSiteMapProvider 代码的问题。

我得到一个在 VS2012 中抛出的空引用异常，即使代码在 VS2010 中愉快地运行，并且代码没有改变。

我的代码如下：

```
XmlSiteMapProvider site = new XmlSiteMapProvider();
SiteMapNode currentNode = site.FindSiteMapNodeFromKey(HttpContext.Current.Response.ApplyAppPathModifier(HttpContext.Current.Request.AppRelativeCurrentExecutionFilePath)); 
```

VS2010和VS2012手表截图如下：

[http://i.stack.imgur.com/siajS.png](http://i.stack.imgur.com/siajS.png)

[http://i.stack.imgur.com/VAsMg.png](http://i.stack.imgur.com/VAsMg.png)

您应该能够看到的是上面的代码拆分成其组成部分以查看返回的内容。重要的是 VS2012 窗口中的最后一行，它返回一个空值，而“成员选择”值在 VS2010 中找到。

有没有人有任何想法？

我检查了 .Net 版本，以及包含此类的 System.Web.dll 文件上的文件版本，它们在 Visual Studio 的两个版本中都是相同的。

唯一的区别是VS2012运行在Win7，而VS2010运行在WinXP。

这可能是IIS版本差异吗？

如果我编写以下代码，VS2012 将正常工作，但是 VS2010 会中断，所以看起来不同版本的东西并不完全相同。

```
XmlSiteMapProvider site = new XmlSiteMapProvider();
SiteMapNode currentNode = site.FindSiteMapNodeFromKey(HttpContext.Current.Request.AppRelativeCurrentExecutionFilePath); 
```

任何帮助将非常感激，

缺口

# java - 在 pentaho 报告中，如何创建包含多个查询的报告？

> ID：13366166
> 
> 赞同：1
> 
> 时间：2012-11-13T18:03:58.660
> 
> 标签：java, pentaho

我有三个表，每个表都有一个日期字段，一些统计信息保存在许多其他字段中。我希望在一个报告中并排显示每天在每个表中找到的统计数据。

```
 Table 1              Table2              Table3
     Date   Stat1 Stat2 stat3   Stat1 Stat2 Stat3    Stat1 Stat2 
```

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T12:14:25.967

1.  为每个报告创建查询（在主报告视图中）
2.  在“报告标题”部分（不是详细信息部分）中创建 3 个内联子报告，并排放置
3.  在子报表设计视图中，像往常一样选择正确的查询和设计，只是不要添加任何详细标题。
4.  将您的详细标题放在主报告的“页面标题”部分而不是子报告中（这样他们就可以在页面中重复，否则他们不会）

# build - Jenkins/Hudson - 如何并行运行多个作业超过 1 级深度？

> ID：13366167
> 
> 赞同：13
> 
> 时间：2012-11-13T18:04:03.370
> 
> 标签：build, jenkins, continuous-integration, hudson, jenkins-plugins

我试图让以下工作流程在 Jenkins 中并行运行。例如，A 和 B 同时运行。一旦A完成同时运行A2和A3，等等......

这似乎是一个非常常见的用例，但我尝试的大多数插件不支持超过 1 级深度，下面的 A 分支就是这种情况。加入插件在这里似乎没有帮助。

我[阅读了有关使用 Promotion 插件的信息](https://stackoverflow.com/questions/9012310/how-do-i-make-a-jenkins-job-start-after-multiple-simultaneous-upstream-jobs-succ "阅读有关使用Promoted builds 插件的信息")，但对于要归档哪些指纹/工件以使其工作，我有点困惑。

关于如何使这个简单的构建管道工作的任何线索？

![流动](../Images/eef874c9401ddfde467e9dbfdb9d989e.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T23:20:47.913

正如[jgritty](https://stackoverflow.com/a/13366461/539846)指出的那样，您可以使用[Build flow plugin](https://wiki.jenkins-ci.org/display/JENKINS/Build+Flow+Plugin)。为了获得您想要的并行执行类型，您可以运行与以下构建流程脚本等效的内容：

```
buildTrigger = build("Trigger")

parallel(
    {
        buildA = build("A")
        buildA1 = build("A1")
        parallel(
            {
                buildA2 = build("A2")
            },
            {
                buildA3 = build("A3")
            },
        )
    },
    {
        buildB = build("B")
        buildB1 = build("B1")
    },
)

buildResults = build("GatherResult") 
```

在这个脚本中，第一个`parallel`块负责 A 和 B 分支。一旦在一个分支中，每个构建都是连续的，直到您添加更多`parallel`块。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-02-23T20:13:22.060

有一个很好的解决方案：[Multi-Job 插件](https://wiki.jenkins-ci.org/display/JENKINS/Multijob+Plugin)。它完全符合您的要求。使用[MultiJob 插件](https://wiki.jenkins-ci.org/display/JENKINS/Multijob+Plugin)，您可以将您的工作拆分为连续运行的阶段。在每个阶段中，作业并行运行。

为简单起见，我将假设 A 和 B 是您希望并行运行的“编译作业”。进一步假设可能存在 A-Test（及其子项）和 B-Test，它们也是单独的工作。

您按如下方式创建多作业：新项目 -> 多作业项目

在项目中，您创建两个阶段（添加构建步骤“MultiJob Phase”）。第一个将是编译，您将添加阶段作业的“A”和“B”。

您可以更改 COMPILE 阶段作业的选项，以便如果其中一个失败，整个阶段中止（默认），或允许作业继续。

[![多作业设置](../Images/03c204a43bc243da51cd00b166639578.png)](https://i.stack.imgur.com/TfDGd.jpg)

接下来，为 TEST 添加另一个 MultiJob Phase Build**步骤**，并向其中添加“A-Test”和“B-Test”。请记住，A、B、A-Test 和 B-Test 都是单独的作业，如果需要也可以单独运行。

而已。当作业运行时，它将包含指向子作业的链接，因此您可以看到子作业发生了什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-18T10:44:27.253

我遇到了类似的问题，[Promoted Builds Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Promoted+Builds+Plugin)比其他人建议的 Build Flow Plugin 对我来说是一个更好的解决方案。

通过勾选复选框“Promote builds when...”，可以将构建提升作业添加到现有作业。您可以通过在 Criteria 下选中“当以下下游项目构建成功时”来配置在命名的下游项目完成时进行升级（假设所有下游项目都通过指纹关联）。

在提升步骤，您可以触发汇总结果的电子邮件或触发进一步的下游作业。

在这种情况下，您可以将提升作业添加到触发器项目中，并依赖项目 A2 A3 和 B1 成功完成。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T18:24:15.610

我相信[这](https://wiki.jenkins-ci.org/display/JENKINS/Build+Flow+Plugin)可能是您需要的插件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T11:15:18.673

使用构建后部分中的构建其他项目。说完成 A1 后开始 A2、A3。在 Manage Hudson 中增加执行者的数量 --> 将系统配置为适当的数量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-01T22:29:08.743

我们有一个类似于“容易被逗乐的史蒂文”所建议的设置。除了我将“A”和“B”路径设置为它们自己的多作业堆栈，另一个多作业设置为“触发器”。“A”和“B”堆栈并行运行的地方。这样他们就不会直接相互依赖。您还可以根据一个/两个堆栈是否失败来汇总结果。您还可以设置“触发器”来收集参数并传递给两个堆栈。

# php - 使用 php 执行时 inotifywait 不会传递 args

> ID：13366170
> 
> 赞同：1
> 
> 时间：2012-11-13T18:04:15.157
> 
> 标签：php, inotify, inotifywait

我使用 inotifywait 来监视新文件的文件夹，并在检测到“close_write”时将文件的路径发送到 php 脚本以处理它。

该命令如下所示：

```
inotifywait -e close_write --format '%w%f' -m -r /path/do/dir | while read LINE; do php /home/scripts/watcher.php $LINE; done 
```

当它在 ssh 中执行时，它可以完美运行。当我将它包装在 php 中的 exec() 或 system() 函数中时，为了将其作为带有主管的守护程序运行，它不会将第二个参数传递给通常包含绝对路径的 watcher.php 脚本触发 inotifywait 的文件。

exec() 甚至根本不触发脚本，而 passthru() 和 system() 实际上命中 watcher.php 但除了第一个之外没有任何参数，其中包含脚本本身的路径。

当执行包装脚本时，为了观察文件夹，它给出了 ionotifywait 的输出：

```
Setting up watches.  Beware: since -r was given, this may take a while!
Watches established. 
```

上传新文件时，没有任何反应。watcher.php 没有被触发。

当我使用 passthru() 或 system() 并上传文件时，它会点击 watcher.php，它在文件顶部执行此操作：`print_r($argv);`

```
passthru("inotifywait -e close_write --format '%w%f' -m -r /path/do/dir | while read LINE; do php /home/scripts/watcher.php $LINE; done"); 
```

这仅输出

```
Array (
       [0] => /home/scripts/watcher.php 
) 
```

如果我在 cli 中手动运行 ionotifywait 命令，它会在上传新文件时打印预期的输出

```
Array
(
    [0] => /home/scripts/watcher.php
    [1] => /path/to/dir/hello.jpg
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T19:47:51.033

所以，这是你的问题。您的电话是：

```
passthru("inotifywait -e close_write --format '%w%f' -m -r /path/do/dir | while read LINE; do php /home/scripts/watcher.php $LINE; done"); 
```

那些双引号`$LINE`就像是一个 PHP 变量一样进行插值。结果调用看起来像

```
inotifywait -e close_write --format '%w%f' -m -r /path/do/dir | while read LINE; do php /home/scripts/watcher.php ; done 
```

...这就是为什么参数实际上没有被传递给 watcher.php。

您需要切换到单引号并明智地使用转义来处理命令中使用单字的位，或者如果您使用的是 5.3 或更高版本，则需要切换到[nowdoc 。](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.nowdoc)

# ajax - 使用 JMeter 进行性能测试

> ID：13366171
> 
> 赞同：1
> 
> 时间：2012-11-13T18:04:17.383
> 
> 标签：ajax, extjs, jmeter, load-testing, performance-testing

我正在为我们的 Web 应用程序在 JMeter 中编写一个测试，但是有一个页面会加载，然后使用 extjs 库进行 Ajax 调用以加载额外的部分，我需要知道该部分何时加载。我该怎么做呢？JMeter 可以支持 extjs 库吗？我还需要知道什么？

在互联网上搜索我找到了一些 ajax 和 JMeter 资源以及一些 extjs 和 JMeter 资源，但我还没有在一个地方找到所有这三个资源。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:28:23.450

JMeter 的 HTTP 请求工作在 HTTP 协议级别。它对你的 JS 和 ajax[一无所知。](http://wiki.apache.org/jmeter/JMeterFAQ#Does_JMeter_process_dynamic_pages_.28e.g._Javascript_and_applets.29)但是，它可以发送任何 http 请求，包括 ajax 请求。

因此，当您执行涉及 Ext JS 的操作并在 JMeter 中创建此类请求时，您应该查看发送给浏览器的请求。为此，您可以使用[HTTP 代理服务器](http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Proxy_Server)或在浏览器中查看 Firebug 或类似的东西。

**注意：**实际上 JMeter 通过 BSF 支持支持 Javascript 执行（例如查看[BSF Sampler](http://jmeter.apache.org/usermanual/component_reference.html#BSF_Sampler)）。但是，它会使您的测试变慢，所以我认为最好不要使用它

# winapi - PostMessage(hwnd, WM_SETTEXT,..) 不起作用，而 PostMessage(hwnd, WM_QUIT,..) 起作用

> ID：13366175
> 
> 赞同：6
> 
> 时间：2012-11-13T18:04:28.600
> 
> 标签：winapi, visual-c++

我有 2 个应用程序，一个是隐藏窗口（“hW”），另一个是控制台应用程序（“CA”），我想从中向 hW 发送命令。在控制台应用程序中，我得到了硬件句柄，这是一个问题：如果我正在运行：

```
PostMessage(hwnd, WM_QUIT, NULL, NULL); 
```

一切正常，消息到达硬件并将其关闭。但是如果我要发送

```
PostMessage(hwnd, WM_SETTEXT, NULL, (LPARAM)"texttext"); 
```

消息根本没有到达硬件。Spy++ 还显示消息没有到达硬件。WM_SETTEXT 有什么特定的东西可以防止它吗？提前致谢。

好的。在这里找到答案[http://cboard.cprogramming.com/windows-programming/72589-wm_settext-postmessage.html](http://cboard.cprogramming.com/windows-programming/72589-wm_settext-postmessage.html)

```
结果证明 API 试图保护我免受范围问题的影响；邮件消息（）
总是以 WM_SETTEXT 或任何其他系统定义的消息失败
一个指针作为参数。这让我到了 SendMessage()，这不好，
因为我想要异步消息....
```

PPS
另外，看起来像

```
SendMessage(hwnd, WM_QUIT, NULL, NULL); 
```

不针对应用程序做任何事情。即使在简单的测试应用程序中

```
 HWND hNote;
 if (!(hNote=FindWindow(L"Notepad",NULL)))
        exit(1);
 SendMessage(hNote, WM_QUIT, NULL, NULL); 
```

尽管

```
PostMessage(hNote, WM_QUIT, NULL, NULL); 
```

作品。
所有这些对我来说看起来都不合逻辑......是否有一些通用功能可以与任何类型的消息一起正常工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T21:25:43.260

不同的消息有不同的要求。有些需要发布到队列中。还有一些需要同步交付。因此，该系统被设计为需要两种交付机制。

在 的情况下`WM_SETTEXT`，总是需要同步交付。这是因为窗口管理器需要能够管理文本数据的生命周期。Raymond Chen 谈到了这个问题：[为什么我不能 PostMessage WM_COPYDATA 消息，但我可以 SendMessageTimeout 它有一个微小的超时？](http://blogs.msdn.com/b/oldnewthing/archive/2011/09/16/10208976.aspx)

`SendMessage`当窗口处于另一个进程中时，调用存在危险。如果其他进程挂起，那么您的进程也不会挂起。因为`SendMessage`是同步的。

解决方案是调用[`SendMessageTimeout`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644952.aspx). 这会将您的字符串数据编组到另一个进程中。并且您可以设置超时以确保在其他进程被挂起的情况下，您的进程可以避免这种命运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T21:04:46.077

从您的最后一个问题开始：不，没有通用的消息功能可以满足您的需求。

让我们分析一下您的案例：

1.  `WM_SETTEXT`：该消息需要一个指针，因此您无法在进程之间安全地发布它，因为它们将具有分离的内存地址，并且来自一个进程的指针对另一个进程毫无意义。您*可以*使用`SendMessage()`，因为 Windows 知道消息，在幕后复制数据并进行额外的黑客攻击。但是`PostMessage()`没有（不可能）这样的魔法。

2.  `WM_QUIT`: 这是一个特殊的消息，它使消息循环中断。简而言之，它所做的只是`GetMessage`返回`FALSE`，以便标准消息循环（1）完成。但是，啊！只有你`PostMessage()`这样做才有效。当您收到`SendMessage()`一条消息时，它会直接发送到相关的窗口函数，甚至不会停在消息队列中。而windows对它什么也不做`WM_QUIT`，因为他们根本没想到它。实际上，即使发布，这条消息也不会到达窗口，因为通常的循环不需要`DispatchMessage()`它。这就是为什么它通常发布到线程，没有窗口，所以存在一个函数来完成所有这些：`PostQuitMessage()`.

(1) 标准消息循环：

```
while (GetMessage(&msg, 0, 0, 0))
    DispatchMessage(&msg); 
```

作为脚注，您可以使用几种技巧在进程之间移动数据：

1.  使用`WM_COPYDATA`. AFAIK 它不能与 一起使用`PostMessage()`，但也许您可以在目标进程中创建两个线程，以便第一个接收`WM_COPYDATA`并快速返回，然后将其发布到第二个线程排队。

2.  使用共享内存（搜索`CreateFileMapping()`）和`PostMessage()`该内存的偏移量。您可能应该使用一些`WM_APP + x`用户定义的消息而不是系统消息。但是，请注意同步问题，您将需要互斥锁或其他东西。

3.  命名管道！（我的最爱）

4.  插座。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T20:49:26.153

您要做的是传达两个独立的过程，常规消息不起作用，但有一个可以解决问题：`WM_COPYDATA`消息。一个相关的问题可以在[这里找到](https://stackoverflow.com/questions/2451103/use-wm-copydata-to-send-data-between-processes)

# mysql - mySQL TSV infile 重复条目

> ID：13366176
> 
> 赞同：0
> 
> 时间：2012-11-13T18:04:40.580
> 
> 标签：mysql, batch-file, file-io, tsv

通常是 mySQL 脚本的新手。

使用 infile 将自动生成的 tsv 文件上传到本地 mySQL 服务器。Windows 调度程序运行启动文件上传的批处理文件。

问题是每次批处理文件在文件进程中运行时，表中的条目都会重复。

有没有办法让它们追加而不是简单地写？我是否需要条目的密钥才能识别条目？

感谢所有帮助。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:48:28.087

> 一旦你定义了一些识别键并在 MySQL 中指定它（即指定它作为你的 PRIMARY KEY 或者定义一个 UNIQUE KEY 约束），那么你可以在你的 LOAD DATA 命令中使用 REPLACE 或 IGNORE 关键字（根据需要）。– eggyal 27 分钟前

有关此过程语法的信息位于[此处](http://dev.mysql.com/doc/refman/5.5/en/load-data.html)。

感谢eggyal的帮助。

# c# - Razor 引擎在 C# 到 VB.NET 转换的动态/对象解析上失败

> ID：13366177
> 
> 赞同：0
> 
> 时间：2012-11-13T18:04:43.450
> 
> 标签：c#, asp.net, .net, vb.net, razor

我正在尝试使用 RazorEngine 转换电子邮件类的 C# 实现来解析剃刀模板，然后将电子邮件发送到 VB.NET。这在 C# 中效果很好，但是我遇到了将 C# 动态类型转换为 VB.NET“对象”类型的问题（据我所知，这是最接近的等价物）。

例如，这段代码在 C# 中运行良好：

```
public static string GetEmailBody(string templatePath, dynamic model)
{
      var template = File.ReadAllText(templatePath);
      var body = Razor.Parse(template, model);
      return body;
} 
```

在我转换到 VB.NET 时，我得到了一个如下所示的函数调用：

```
Private Shared Function RenderEmailBody(strTemplate As String, model As Object) As String

  Dim template As String = File.ReadAllText(strTemplate)
  Dim body As String = Razor.Parse(template, model)

  Return body

End Function 
```

我对它的调用如下所示：

```
RenderEmailBody("mytemplate.vbhtml", New With { .Var1 = "1", .Var2 = "2" }) 
```

但是，当我运行它时，会引发以下异常：

```
TemplateCompilationException was unhandled by user code
Unable to compile template. 'object' does not contain a definition for 'Var1' and no extension method 'Var1' accepting a first argument of type 'object' could be found (are you missing a using directive or an assembly reference?) 
```

当我`model`在断点上检查时，它似乎正确分配了 Var1 和 Var2，但是当我调用到时，`Razor.Parse`我不断遇到问题，它无法正确解释我的动态对象。

我在这里做错了什么吗？还是这两种类型之间存在固有的不兼容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:10:43.077

`Object`并且`dynamic`是两个完全不同的东西。在 VB 案例中，您所做的是完全拆箱模型。它们在 C# 中的 dynamic 关键字保留了实际类型，而在设计时实际上并不知道它（人为地）。但是，当您`Object`以这种方式使用时，您会删除对该类型的所有实际引用。`.Var1`在这种情况下，您需要将模型重新转换为特定类型才能访问。您最好的选择是调整方法调用的签名以具有您正在寻找的特定类型，或者使用您的通用模型可以实现的定义`.Var1`or`.Var2`属性的接口。

# jquery - Facebook Like 通过 Ajax 更新 - 不是简单的问题

> ID：13366181
> 
> 赞同：0
> 
> 时间：2012-11-13T18:04:56.707
> 
> 标签：jquery, facebook, facebook-like, meta-tags, scrape

我创建了一个视频页面，当文件存储在服务器上时，它使用数据库动态加载视频。页面上预加载了一个视频，该数据可以毫无问题地被点赞并发布到 Facebook。单击新缩略图时，我希望 Facebook Like 信息更改为新的视频内容（标题、网址和图像）。我一直在寻找解决方案，并且有很多类似的解决方案，但是他们简单的添加解决方案`FB.XFBML.parse();`对我不起作用。当 Ajax 调用成功返回时，我会更新我的元标记：

```
$("meta[property=og\\:title]").attr('content', videoTitle); 
$("meta[property=og\\:url]").attr('content', "www.mySiteURL.com/index.php?videoID="+videoID);
$("meta[property=og\\:image]").attr('content', "www.mySiteURL.com/images/video/"+videoImageName); 
```

但是当我在这些设置后立即运行解析代码时，我看到按钮刷新但它仍然具有相同的内容。我可以看到元标记实际上是使用 Firebug 更新的。只是 FB 按钮没有正确地重新抓取页面信息以发送到 FB。我在我的 html 标记中设置了命名空间，并且还设置了其他 og:metas，但这些是我需要重新抓取的三个。

我在一篇帖子中看到有人`ajax.complete(function(){FB.XFBML.parse();});`直接在主页上使用了类似的东西，我不记得确切的代码，但想法是一样的，但它仍然没有工作。我认为只要在我的 ajax 函数中运行它就足够了。

我错过了什么吗？

任何帮助将不胜感激！

谢谢。

编辑：我应该补充一点，每个视频都有自己的直接 URL，该 URL 插入到 og:url 中，因为它们都是通过 ajax 加载的。当我使用其中一个唯一的 URL 时，Facebook Linter/Object Debugger 会向我显示每个视频的所有正确数据，这只是一个抓取问题 - 至少，在我对此的了解有限的情况下，这对我来说似乎是这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T22:05:40.083

听起来您可能一直在动态更改当前页面的元标记-这不是必需的，并且会导致 Facebook 的抓取出现问题（您可以使用[Facebook 的调试工具](https://developers.facebook.com/tools/debug)进行验证）-

为每个对象维护一个静态 URL，从该 URL 提供元标记（如果需要，您可以重定向其他浏览器）并在动态页面上更改 Like 按钮本身以指向当前显示的对象的 URL（即删除like按钮，添加一个新的 fb:like 标签并重新调用`FB.XFBML.parse();`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T22:51:22.480

> 我应该补充一点，每个视频都有自己的直接 URL，该 URL 插入到 og:url 中，因为它们都是通过 ajax 加载的。当我使用其中一个唯一的 URL 时，Facebook Linter/Object Debugger 会向我显示每个视频的所有正确数据，这只是一个抓取问题 - 至少，在我对此的了解有限的情况下，这对我来说似乎是这样。

不，这不是抓取问题——因为抓取器不关心您的 JavaScript，因此永远不会看到您更新的元标记*client-side*。它向您的服务器发出 HTTP 请求，因此您在当前显示页面的任何类型的客户端中执行的操作绝对无关紧要。

您需要做的是更新赞按钮指向的目标 URL：将现有的赞按钮替换为新的赞按钮代码，并使用包含当前视频页面 URL 的 href 属性，在其上运行 FB.XFBML.parse - 然后它会按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T22:12:02.590

您可能应该`FB.XFBML.parse();`在更新元标记后调用，这会导致 FBML 标记再次呈现。

[更多信息在`FB.XFBML.parse();`这里](http://developers.facebook.com/docs/reference/javascript/FB.XFBML.parse/)

# iphone - 再次加载 vc/xib 时单元格加倍

> ID：13366182
> 
> 赞同：0
> 
> 时间：2012-11-13T18:05:00.610
> 
> 标签：iphone, ios

每次我退出这个 xib 并返回它时，我都会得到重复的单元格。

假设我添加了两种成分，大米和糖。如果我退出并返回，我有双倍的成分。每次我加载这个控制器时都会发生这种情况。

我认为这是错误的代码：

```
- (void)viewWillAppear:(BOOL)animated {

[super viewWillAppear:YES];
    //fixed doubling up of ingredients by addingn else before the other if and corresponding bracket  Nov 13 falcon
if (self.groceryList) {

    self.arrIngredients = [((MealIdeaAppDelegate*)MI_SHARED_DELEGATE).dbCommunicator getMyGroceryListIngredients:self.groceryList.groceryListID];

    NSLog(@"data %@ ",self.groceryList.groceryListID);
    self.title = self.groceryList.groceryListName;
    txtfListName.text = self.groceryList.groceryListName;
        //Added else Nov 13 falcon
}else if ([self.groceryList.groceryListName caseInsensitiveCompare:kDeafaultGroceryListName] == 0) {
        [txtfListName setUserInteractionEnabled:NO];
    }

        [tblvGroceryListDetail reloadData]; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:39:08.890

我认为问题在于您已将值添加到数组中，当您退出并返回时，再次调用 viewWillAppear: 再次将相同的数据添加到数组中，因此将数据加倍，为此您应该执行以下代码viewDidLoad：方法

```
 -(void)viewDidLoad:(BOOL)animated
    {
       // do the code done in viewWillAppear here
    } 
```

# ruby-on-rails-3 - 创建用户个人资料页面 Rails 3 应用程序

> ID：13366185
> 
> 赞同：1
> 
> 时间：2012-11-13T18:05:07.410
> 
> 标签：ruby-on-rails-3

我正在一个网站上工作，每个用户都有一个其他人都可以看到的个人资料。

IE

```
http://localhost:3000/trista 
```

现在我愚蠢地使用 current_user.name 等在视图中提取所有数据。

抱歉，这可能真的很简单，但是如何添加“trista”的用户信息而不是我，current_user？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T18:09:39.147

好吧，看来你有一个`User`模型。您请求的操作是`show`在您的`users_controller`.
这样我相信你有类似的东西：

```
def show
  @user = User.find_by_name(params[:name]) # This option
  @user = User.find_by_name(params[:id])   # Or this option 
```

问题是，您加载`@user`实例变量，以便您可以在视图中使用它，如下所示：

```
<%= @user.name %> 
```

使用`current_user`将获得记录的。使用`@user`，您可以在控制器中随意填充它。希望能给你一些启示。

# html - Chrome中标题上方的大白间隙

> ID：13366186
> 
> 赞同：1
> 
> 时间：2012-11-13T18:05:11.150
> 
> 标签：html, css

在这个网站完成之前，在这个网站上工作的开发人员离开了我们公司。现在他走了，我正在尝试清理一下代码并消除一些错误 - 但是，代码在某些时候非常混乱。

[这是问题的屏幕截图](http://img802.imageshack.us/img802/6004/screenshot20121113at105.png)（左侧是 Chrome，右侧是 Firefox）：

![在此处输入图像描述](../Images/41f3601d17b8153f0e710b96a984c977.png)

[有问题的网站](http://goo.gl/KqOlf)

如何消除这个差距？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T04:13:48.817

我在“查找属性”模块上放置了一个绝对位置，并在容纳它的容器上放置了一个相对位置。似乎在 Chrome 和 Firefox 中运行良好，但不是 IE（所有版本）。

所以我将模块上的定位更改为相对，它似乎在所有浏览器中都能正确显示。

这不是最好的解决方案，但在我有时间完全重新编码之前它会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T18:20:46.097

尝试这个：

```
width:1000px;
margin:0 auto;
position: absolute;
left: 450px; 
```

这*应该*阻止它占用页面上的任何空间，而不是疯狂地向左移动（如在这个[解决方案中](https://stackoverflow.com/a/13366378/962144)）

# c++ - 在 C 中连接 16 个字符数组中的 32 位 int 块

> ID：13366187
> 
> 赞同：1
> 
> 时间：2012-11-13T18:05:13.947
> 
> 标签：c++, c, arrays

我有以下数据类型的结果缓冲区：

```
 char result[16]; 
```

问题是，结果是以 4 个 32 位的块计算的，需要分配给 128 位结果字符。

```
int res_tmp[0] = 0x6A09E667;
int res_tmp[1] = 0x6A09E612;
int res_tmp[2] = 0x6A09E432;
int res_tmp[3] = 0x6A09E123; 
```

理想情况下，C 中应该有类似连接运算符的东西，例如，

```
result = res_tmp[0] || res_tmp[1] || res_tmp[2] || res_tmp[3]; 
```

最后，需要通过套接字发送结果，如下所示：

```
while((connection_fd = accept(socket_fd, 
                          (struct sockaddr *) &address,
                          &address_length)) > -1)
{
  n = write(connection_fd, result, strlen(result));
  if (n < 0) printf("Error writing to socket\n");            
  close(connection_fd);
  break;  
} 
```

任何人都知道在 128-bir 结果中连接 32 位字的最简单语法`char`吗？

谢谢，帕特里克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T18:41:24.720

您必须确定`char`数组是按大端还是小端顺序表示结果。如果你的处理器和数组的字节序恰好重合，你可以使用`union`：

```
union myunion
{
    char result[16];
    int res_tmp[4];
}; 
```

然后你根本不需要复制。

如果您需要处理器的相反字节序，您可以使用[`htonl`](http://linux.die.net/man/3/htonl)

```
for (i = 0; i < 4; i ++) res_tmp[i] = htonl(res_tmp[i]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T18:20:46.767

为什么不直接使用`memcpy`？

```
memcpy(result, res_tmp, sizeof(res_tmp)); 
```

另请注意，`strlen`对于以空结尾的字符串，您应该将 sizeof 用于静态缓冲区：

```
n = write(connection_fd, result, sizeof(result)); 
```

当然你也可以发送`res_tmp`

```
n = write(connection_fd, (char*)res_tmp, sizeof(res_tmp)); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-13T18:16:07.727

基本上标准技术是创建一个 int 指针并将其指向 char 数组，然后用它来写入数据。像这样的东西

```
int temp_res[4]; //the calculated ints
char result[16]; //the target buffer
int *ptr=(int *)result;
for (int i=0;i<4;i+=1) {
  *ptr=temp_res[i];
  ptr++; //move up a int size because ptr is an int type
} 
```

# c++ - 函数调用时的段错误

> ID：13366197
> 
> 赞同：-3
> 
> 时间：2012-11-13T18:05:50.867
> 
> 标签：c++, class, segmentation-fault

我正在尝试编写一个对树执行不同功能的程序，到目前为止，除了打印功能外，它们都可以工作。它以前可以工作，但是在尝试解决其他功能中的一些问题时（不弄乱它），现在它们已修复，这个突然不起作用，我不明白为什么。这是我的代码：

主.cpp：

```
using namespace std;
#include <iostream>
#include <cstdlib>
#include <cstring>
#include "lcrs.h"

int main()
{
char *temp1;
char *temp2;
temp1 = new char;
temp2 = new char;

lcrs tree;

do{
    cout << "LCRS> ";
    cin >> temp1;
    if(strcmp(temp1, "quit") == 0)
    {
        return 0;
    }
    if(strcmp(temp1, "insert") == 0)
    {   cin >> temp2;
        bool error;
        for(int i=0; i<strlen(temp2); i++)
        {
            if(!isdigit(temp2[i]))
            {
                cout << "Error!" << endl;
                error = true;
            }
        }
        if(!error)
        {
            tree.insert(atoi(temp2), tree.root);
        }
    }
    else if(strcmp(temp1, "height") == 0)
    {
        if(tree.root == NULL)
            cout << "-1" << endl;
        else
            cout << tree.getHeight(tree.root) << endl;
    }
    else if(strcmp(temp1, "preorder") == 0)
    {
        cout << "Root is " << tree.root->data << endl;
        tree.print(tree.root);
        cout << "" << endl;
    }
    else if(strcmp(temp1, "search") == 0)
    {
        cin >> temp2;
                bool error;
                for(int i=0; i<strlen(temp2); i++)
             {
                       if(!isdigit(temp2[i]))
                       {
                                cout << "Error!" << endl;
                               error = true;
                     }
                }
               if(!error)
                   {
                         if(tree.search(atoi(temp2), tree.root))
                cout << "true" << endl;
            else
                cout << "false" << endl;
                }

    }
    else
    {
        cout << "Error! " << endl;
    }
}while(strcmp(temp1, "quit") !=0);

return 0;
} 
```

lcrs.h：

```
using namespace std;
#include <cstdlib>
#include <iostream>

class node{
    public:
    int data;
    node *right;
    node *below;

    node()
    {
        right = NULL;
        below = NULL;
    }
};

class lcrs{
    public:
    node *root;
    bool search(int, node*);
    void print(node*);
    void insert(int, node*&);
    int getHeight(node*);

    lcrs()
    {
        root = NULL;
    }
}; 
```

lcrs.cpp：

```
using namespace std;
#include "lcrs.h"

bool lcrs::search(int x, node *b)
{
    if(b == NULL)
        return false;
    else
    {
        if(b->data == x)
            return true;
        else
        {
            return search(x, b->right) || search(x, b->below);
        }
    }
}

void lcrs::print(node *z)
{
    if(z->below == NULL || z->right != NULL)
    {
        cout << z->data << ",";
        print(z->right);
    }
    else if(z->below != NULL && z->right == NULL)
    {
        cout << z->data << ",";
        print(z->below);
    }
    else if(z->below != NULL && z->right != NULL)
    {
        cout << z->data << ",";
        print(z->below);
        print(z->right);
    }
    else if(z->right == NULL && z->below == NULL)
     {
             cout << z->data << "";
     }

}

void lcrs::insert(int x, node *&a)
{
    if(a == NULL)
    {
        node *newnode;
        newnode = new node;
        newnode->data = x;
        a = newnode;
    }
    else if(a->data < x)
    {
        if(a->right != NULL)
        {
            insert(x, a->right);
        }
        else if(a->below != NULL)
        {
            if(a->below->right != NULL)
            {
                insert(x, a->below->right);
            }
            else
            {
                insert(x, a->below);
            }
        }
        else
        {
            node *n;
            n = new node;
            n->data = x;
            a->below = n;
        }
    }
    else if(a->data > x)
    {
        if(a->below != NULL)
        {
            insert(x, a->below);
        }
        else
        {
            node *n;
            n = new node;
            n->data = x;
            a->right = n;
        }
    }
}
int lcrs::getHeight(node *h)
{
    int height = 0;
    node *n;
    n = new node;
    n = h;
    while(n->below != NULL || n->right != NULL)
    {
        if(n->below != NULL)
        {
            n = n->below;
            height ++;
        }
        else if(n->right != NULL)
        {
            n = n->right;
        }
    }
    return height;
} 
```

我在**tree.print(tree.root)**函数调用时遇到了段错误。我在函数的最开始放了一个打印语句，但它从来没有做到这一点，所以我对问题出在哪里有点困惑。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T18:23:45.973

我找到了问题，这只是一个小错字。（当然是。）感谢所有给出合理答案并真诚尝试提供帮助的人。还有，感谢所有给我sass的人。我很感激在我使用了调试器并且仍然束手无策之后，人们可以提醒我我只是一个低级的 ComSci 学生。非常感谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T18:08:45.990

有很多问题。它可能与您读取输入的方式有关，将字符串填充到包含单个字符的缓冲区中（*请*改用 std::string - 它的存在是有原因的），或者它可能与树的事实有关。 root 可能为 null 并且您正在取消引用它：`cout << "Root is " << tree.root->data << endl;`

此外，您确实应该在发布代码时尝试减少内容。这有两个目的：它可以帮助您（因为您实际上可能会*发现*自己出了什么问题，或者至少隔离了故障，因为您正在精简内容）并且它可以帮助我们，因为我们不需要浏览页面和代码页。

# javascript - 为什么不使用 each() 创建多个标签？

> ID：13366200
> 
> 赞同：0
> 
> 时间：2012-11-13T18:06:09.257
> 
> 标签：javascript, jquery, html

假设我有一些看起来像这样的数据

```
<data>
    <location>
        <type>main</type>
    </location>
    <location>
        <type>mailing</type>
    </location>
</data> 
```

然后是一些看起来像这样的代码

```
$('location',data).each(function(){

          var x='<table><tr><td>Type:</td><td>'+$(data).find('type').text()+'</td></tr></table>';
         $('#output').html(x);
}); 
```

我从运行得到的结果是

类型：主邮件

我不明白为什么它不执行以下操作，因为对于每个位置元素，它应该再次运行代码，对吗？

类型：主要

类型：邮寄

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T18:09:41.357

你应该使用`append()`而不是`html()`你应该使用你当前正在处理的项目里面`each()`。

```
var data = "<data><location><type>main</type></location><location><type>mailing</type></location></data>";

$('location', data).each(function(index, item) {
    var x = '<table><tr><td>Type:</td><td>' + $(item).find('type').text() + '</td></tr></table>';
    $('#output').append(x);
});​ 
```

这是一个工作[演示](http://jsfiddle.net/b69cr/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T18:06:49.710

因为您不断覆盖以前的值。

`.html()`不会附加到其中的内容，它会覆盖它。

奇怪的是，您正在创建 spearte 表，而不仅仅是行，而是基本思想

```
var x='<table><tr><td>Type:</td><td>'+$(this).find('type').text()+'</td></tr></table>';
$('#output').append(x); 
```

我会期待更多类似的东西

```
var table = "<table><tbody>";
$(data).find('location').each(function(){
   table += "<tr><th>Type:</th><td>'+$(this).find('type').text()+'</td></tr>';
});
table += "</tbody></table>";
$('#output').html(table); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T18:08:05.440

你似乎得到`Type: mainmailing`

因为您似乎在整个数据中找到它，而不是在当前位置标签中。

```
$(data).find('type').text() 
```

应该是

```
$(this).find('type').text(); 
```

此外，您还**不断覆盖**每个循环迭代中的值。将附加内容移到循环外部。

```
var x = '<table>'
$('location','data').each(function(){
     x +='<tr><td>Type:</td><td>'+$(this).find('type').text()+'</td></tr>';   
});
x += '</table>'
$('#output').html(x); 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/vvwHK/2/)**

# c# - windows phone 7.1 listBoxItem 具有文本和值

> ID：13366203
> 
> 赞同：0
> 
> 时间：2012-11-13T18:06:16.030
> 
> 标签：c#, windows-phone-7

有没有办法我可以设置 listBoxItem Content 以及另一个隐藏值（只是一个 id 或 somthing）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:12:05.617

是的，在包含它们的对象上使用[DisplayMemberPath](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.displaymemberpath%28v=vs.95%29.aspx)和[SelectedValuePath 。](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selectedvaluepath%28v=vs.95%29.aspx)如果您的数据项是具有和属性`ListBox`的类对象，则使用：`Foo``Text``ID`

```
<ListBox DisplayMemberPath="Text" SelectedValuePath="ID"
    ... /> 
```

# php - AJAX jQuery PHP 返回值

> ID：13366204
> 
> 赞同：8
> 
> 时间：2012-11-13T18:06:24.010
> 
> 标签：php, jquery, ajax

我是 AJAX 的新手，对 PHP 传递回 jQuery 的内容有点困惑。所以你有一个这样的 AJAX 函数：

```
 $.ajax({ url: '/my/site',
     data: {action: 'test'},
     type: 'post',
     success: function(output) {
                  alert(output);
              }
 }); 
```

（我从另一个 StackOverflow 页面的 ajax 中获取了这个。）

但是在其他各种资源上，他们的成功部分将如下所示：

```
 success: function(data) {functionfoocommandshere} 
```

我只是对什么决定了这个变量的命名感到困惑？如果 PHP 最终回显一个数组：

```
 echo $myVar; 
```

我怎样才能从 AJAX 得到这个？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-13T18:13:37.830

Ajax-Requests 获取整个站点。因此，您不会在变量中获得任何数据，而是在数据参数中获得整个站点。您一起制作的所有回声都将在此参数中。如果要检索数组，则应先将其转换为json。

```
echo json_encode($myArray); 
```

然后就可以通过这种方式通过Ajax接收了

```
$.ajax({ url: '/my/site',
 data: {action: 'test'},
 dataType: 'json',
 type: 'post',
 success: function(output) {
              alert(output);
          }
 }); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-13T18:12:47.277

在您的 PHP 文件中，使用[json_encode](http://www.php.net/manual/en/function.json-encode.php)将数组转换为更方便的格式，以便在 Javascript 中使用。所以你会有类似的东西：

```
echo json_encode($myArray); 
```

然后，在您的 JavaScript`data`中，方法的变量`success`将保存 JSON。使用 jQuery 的[parseJSON](http://api.jquery.com/jQuery.parseJSON/)将其转换为 JavaScript 对象，这将非常容易操作。我不知道你的数组包含什么，但你可能会做这样的事情：

```
$.ajax({ url: '/my/site',
    data: {action: 'test'},
    type: 'post',
    success: function(data) {
        var obj = jQuery.parseJSON(data);
        alert(obj.name[0] === "John");
      }
}); 
```

同样，`data`这里的变量将包含您的 PHP 输出的任何内容，但 JSON 是一种将数据传输回 JavaScript 的常用且方便的方式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-13T18:12:48.490

```
<script type="text/javascript">
$.ajax({
    url: '/my/site',
    data: {action: 'test'},
    type: 'post',
    success: function(output) {
        alert(output);
    }
 });
</script>

<?php
$action = $_POST['action'];
echo $action;?> 
```

任何打印/回显的输出都将返回到成功函数。当您想用需要实时运行的内容填充 html 容器时，这很方便。

一旦掌握了这一点，另一种选择是使用 JSON 来返回带有值的变量。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-13T18:10:05.707

从 PHP AJAX 函数返回的数据可以从`success`块中检索。这是[手册](http://api.jquery.com/jQuery.ajax/)

```
 $.ajax({ url: '/my/site',
 data: {action: 'test'},
 type: 'post',
 dataType: 'json',
 success: function(output) {
     //output is the data returned from PHP AJAX function in JSON format
     alert(output); 
   }
 }); 
```

# vb.net - 关于将 vb.net 应用程序连接到 Excel 电子表格的意见

> ID：13366205
> 
> 赞同：0
> 
> 时间：2012-11-13T18:06:33.337
> 
> 标签：vb.net

所以我的问题有点主观，但我对使用 VBA 与 Microsoft Interop Excel 参考有点好奇。我在学习 VBA 之前先学习 VBA，然后我转向 .net 以设计更强大的表单。interop.excel 参考在格式化工作表方面如何工作？它与在功能上使用 VBA 基本相同吗？比如格式化，比如说，列宽和重新排列数据？同样，如果您知道 VBA（我知道）是设计一个运行电子表格中的宏的 .net 应用程序更好，还是开始重新学习如何在运行时在 vb.net 中执行它们？感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T19:44:23.563

在 .net 中编写 Excel 格式化代码（意见）比驱动宏要好。首先，您不必在 Excel 中拥有宏，其次您有一个地方可以修改您的代码。如果您是 VBA 人员，您知道录制宏会使代码变得一团糟，然后您必须将其剥离干净。

我们在办公室使用 Interop 学到了一些东西。后期绑定比引用对象更安全，因为它可以支持不同的已安装版本的 office，只要您的代码中不包含任何受支持最少的 office 版本无法处理的功能。此外，始终完全限定您的对象。我的意思是使用

```
Dim XLApp as object = CreateObject("Excel.Application")
XLApp.Range("A1").font.bold=True
XLApp.Range("A1").font.size=12 
```

不使用

```
Dim XLApp as object = CreateObject("Excel.Application")
With XLApp.Range("A1")
    .font.bold=True
    .font.size=12
End With 
```

Office 互操作存在一个已知问题，即“with”子句可能会导致创建引用，无论您在完成后清理得多么好，即使在您的应用程序关闭后也可能会挂起。您可以通过创建来自己测试一个测试应用程序，修改工作表中的一些设置，保存并关闭。在写入的情况下，打开任务管理器，Excel仍在您的进程列表中。

希望这可以帮助

# java - JUnit 奇怪 - 我没有指定预期的数字

> ID：13366215
> 
> 赞同：0
> 
> 时间：2012-11-13T18:07:33.747
> 
> 标签：java, testing, junit

第一次使用 JUnit，到目前为止它还不错。在测试中，我期望一个数字为 128。我在代码中将其指定为：

```
assertEquals(myclass.myVar(), 228); 
```

但是我从 JUnit 得到了一个奇怪的错误：

```
expected:<418> but was:<228>
junit.framework.AssertionFailedError: expected:<418> but was:<228> 
```

所以程序给了我正确的输出。为了确定，我在没有 JUnit 的情况下进行了检查。但是测试失败了。谁能解释一下它从哪里得到 418 号码？我根本没有在 Junit 测试文件的任何地方指定它。

TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T18:08:44.413

你的论点是错误的。它应该是：

```
assertEquals(expectedValue, actualValue); 
```

所以你的测试应该是：

```
assertEquals(228, myclass.myVar()); 
```

那时你会得到一个更合理的信息——然后你需要弄清楚为什么`myVar()`实际上返回 418 :)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T18:08:54.833

在`assertEquals`中，第一个参数应该是期望值，第二个参数应该是测试值。所以你应该写：

```
assertEquals(228, myclass.myVar()); 
```

输出将是：

```
expected:<228> but was:<418> 
```

注意：如果您来自使用相反约定的 testNG，您可能会感到惊讶。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T18:56:15.757

除了提供的答案指出您的值是倒退的之外，您还可以考虑使用较新的 JUnit 表示法：

```
assertThat(myclass.myvar(), is(228)); 
```

这使论点更自然，阅读更流畅。

# youtube - 一旦我的完成，停止 youtube 显示更多视频

> ID：13366216
> 
> 赞同：0
> 
> 时间：2012-11-13T18:07:40.333
> 
> 标签：youtube

我想在我的公司网站上显示一个视频，但是视频完成后，它会预览其他视频。

如何阻止 YouTube 显示其他视频？

仅当我将人们链接到视频时，添加链接才有效……但如果他们自己去看视频，他们仍然会受到附加视频的影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T18:09:49.467

添加：

```
&rel=0 
```

到您的 Youtube 视频 URL。例子：

[http://youtube.googleapis.com/v/3UBbKLjOK3A?autoplay=1&rel=0](http://youtube.googleapis.com/v/3UBbKLjOK3A?autoplay=1&rel=0)

# php - PHP如何将标题位置定位到父目录中的页面？

> ID：13366217
> 
> 赞同：10
> 
> 时间：2012-11-13T18:07:40.203
> 
> 标签：php, header, directory, location

我有一个`first.php`页面

```
header("Location: script/script1.php") 
```

还有`script1.php`另一个

```
header("Location: first.php") 
```

但它显然让我去`/script/first.php`。有没有办法将它重定向到`<root>/first.php`而不是`<root>/script/first.php`？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-13T18:09:05.460

试试这个：

```
header("Location: ../first.php") 
```

或改用绝对路径或 url。

说明：`..`是用于“父目录”的 unix/linux 表达式。互联网是 unix 领域，因此规则也适用于那里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-14T14:40:57.413

代替： `header("Location: ../first.php")`

试试这个： `header("url: ../first.php")`

这将更改 url。在某些情况下使用位置不起作用

由于：`'../'`是表示“父目录”。所以，这将起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-14T17:57:46.417

你可以这样做。在“0”秒内重定向回主目录（根）-

```
<?php

     header('Refresh: 0, url = /Root_Dir/');

?> 
```

将“Root_Dir”替换为您的目录名称。

# css - 通过 scss 在计算中使用媒体查询

> ID：13366223
> 
> 赞同：1
> 
> 时间：2012-11-13T18:08:06.173
> 
> 标签：css, media-queries, sass

我想要一个基于窗口宽度和高度的计算

我知道`@media min-width: 700px`只有在宽度至少为 700 像素时才能使用 css 工作。

有没有办法有这样的东西？：

```
$calc = percentage((@media.width)/200)*3);

div{
width: $calc
} 
```

其中我在计算中使用窗口的宽度或高度，与 css 检查当前宽度并将其与最小宽度进行比较的方式相同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:37:50.077

看看jquery ..

*   [http://api.jquery.com/width/](http://api.jquery.com/width/)
*   [http://api.jquery.com/height/](http://api.jquery.com/height/)

同时，您能否详细说明您的问题。您要编写的代码的上下文是什么？PHP, css, html, javascript ??

另外，看看 CSS 函数 Calc()

*   [http://caniuse.com/calc](http://caniuse.com/calc)

继续。

# javascript - 如何在html页面上使用jquery脚本添加背景图片

> ID：13366228
> 
> 赞同：0
> 
> 时间：2012-11-13T18:08:28.707
> 
> 标签：javascript, jquery, html

我想使用 jquery 为我的游戏记分牌添加一些图像作为背景。

例如。header.jpg 表示页眉，footer.jpg 表示页脚，body.jpg 表示正文。
我在 jquery 中创建了一个小游戏。

目前，我的游戏记分牌只显示很少的短信。我想在一些背景图片上展示它们。

下面是我用来显示短信的代码。请帮助我，以便我可以在它们上显示背景图像。

代码：

```
 ......................
     ......................
        else {
        goldenGoal = false; 
        $("#message1").html("You Lose"); 
        $("#message1").css("color", "red");
          $("#message1").css("size", "190px");
        $("#play").html("Play Level Again");
        $("#lgoals").html(0);
        $("#vgoals").html(0);
        stats.loses++;
        //level = 1;
        //fps = 50;
        //difficulty = 0.2;
    }
       ..................
       .................. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T18:10:31.103

基本上，你必须做这样的事情：

```
$('#containerID').css('background-image', 'url(path/to/image.jpg)'); 
```

或者，在您的示例中：

```
$('body').css('background-image', 'url(body.jpg)');
$('#header').css('background-image', 'url(header.jpg)');
$('#footer').css('background-image', 'url(footer.jpg)'); 
```

* * *

顺便说一句，就像一个输入：尝试优化你的代码。它（不起眼！）更快，更清洁。示例：代替

```
$("#message1").html("You Lose"); 
$("#message1").css("color", "red");
$("#message1").css("size", "190px"); 
```

你可以做

```
$("#message1")
    .html("You Lose")
    .css({
        "color": "red",
        "size": "190px"
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T18:18:14.747

使用这种方式：

```
$("#header").css({"color":"red", "background":"url(your image path)"}); 
```

为带有多行的 message1 div 框放置 css 不是一个好主意，但您可以这样做以节省您的时间，并且渲染速度会更快一些。

# objective-c - iOS - 在字符串中查找单词出现计数的最有效方法

> ID：13366234
> 
> 赞同：12
> 
> 时间：2012-11-13T18:08:43.970
> 
> 标签：objective-c, ios, nsstring, nsset

给定一个字符串，我需要获取该字符串中出现的每个单词的计数。为此，我按单词将字符串提取到一个数组中，并以这种方式进行搜索，但我觉得直接搜索字符串更为理想。下面是我最初为解决问题而编写的代码。不过，我愿意就更好的解决方案提出建议。

```
NSMutableDictionary *sets = [[NSMutableDictionary alloc] init];

NSString *paragraph = [[NSString alloc] initWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"text" ofType:@"txt"] encoding:NSUTF8StringEncoding error:NULL];

NSMutableArray *words = [[[paragraph lowercaseString] componentsSeparatedByString:@" "] mutableCopy];

while (words.count) {
    NSMutableIndexSet *indexSet = [[NSMutableIndexSet alloc] init];
    NSString *search = [words objectAtIndex:0];
    for (unsigned i = 0; i < words.count; i++) {
        if ([[words objectAtIndex:i] isEqualToString:search]) {
            [indexSet addIndex:i];
        }
    }
    [sets setObject:[NSNumber numberWithInt:indexSet.count] forKey:search];
    [words removeObjectsAtIndexes:indexSet];
}

NSLog(@"%@", sets); 
```

**例子：**

*起始字符串：*
“这是一个测试。这只是一个测试。”

*结果：*

*   “这个” - 2
*   “是” - 2
*   “a2
*   “测试” - 2
*   “只有1个

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-13T19:05:58.200

这正是 an`NSCountedSet`的用途。

您需要将字符串分成单词（iOS 很好地为我们提供了一个函数，这样我们就不必担心标点符号）并将它们中的每一个添加到计数集中，它会跟踪数字每个对象出现在集合中的次数：

```
NSString     *string     = @"This is a test. This is only a test.";
NSCountedSet *countedSet = [NSCountedSet new];

[string enumerateSubstringsInRange:NSMakeRange(0, [string length])
                           options:NSStringEnumerationByWords | NSStringEnumerationLocalized
                        usingBlock:^(NSString *substring, NSRange substringRange, NSRange enclosingRange, BOOL *stop){

                            // This block is called once for each word in the string.
                            [countedSet addObject:substring];

                            // If you want to ignore case, so that "this" and "This" 
                            // are counted the same, use this line instead to convert
                            // each word to lowercase first:
                            // [countedSet addObject:[substring lowercaseString]];
                        }];

NSLog(@"%@", countedSet);

// Results:  2012-11-13 14:01:10.567 Testing App[35767:fb03] 
// <NSCountedSet: 0x885df70> (a [2], only [1], test [2], This [2], is [2]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T18:23:17.153

如果我不得不猜测，我会这么说`NSRegularExpression`。像这样：

```
NSUInteger numberOfMatches = [regex numberOfMatchesInString:string
                                                    options:0
                                                      range:NSMakeRange(0, [string length])]; 
```

该片段取自[此处](http://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)。

* * *

**编辑 1.0：**

根据蒂尔爵士所说：

```
NSString *string = @"This is a test, so it is a test";

NSMutableDictionary *dictionary = [NSMutableDictionary dictionary];
NSArray *arrayOfWords = [string componentsSeparatedByCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];
for (NSString *word in arrayOfWords)
{
    if ([dictionary objectForKey:word])
    {
        NSNumber *numberOfOccurences = [dictionary objectForKey:word];
        NSNumber *increment = [NSNumber numberWithInt:(1 + [numberOfOccurences intValue])];
        [dictionary setValue:increment forKey:word];
    }
    else
    {
        [dictionary setValue:[NSNumber numberWithInt:1] forKey:word];
    }
} 
```

你应该小心：

*   标点符号。（接近其他词）
*   大写单词与小写单词。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T18:36:08.917

我认为您尝试使用循环在长段落中搜索单词真是个坏主意。你应该使用正则表达式来做到这一点！我知道第一次学习它并不容易，但它真的值得知道它！看看这个案例[使用正则表达式查找/替换 NSString 中的子字符串](https://stackoverflow.com/questions/9661690/user-regular-expression-to-find-replace-substring-in-nsstring)

# android - 我如何让一个类表现得像一个应用程序？

> ID：13366237
> 
> 赞同：0
> 
> 时间：2012-11-13T18:08:46.000
> 
> 标签：android, android-intent, android-activity, default, viewer

我制作了一个具有 3 个活动的图像查看器：

1）主要：我使用正则表达式针对文件名搜索文件。结果是一个名为“files”的 ArrayList，它使用 Extras 发送到...

2) 缩略图：通过 Extras 获取文件名，并显示带有缩略图的网格（已存储在本地）。当您单击缩略图时，位置和“文件”将发送到...

3）照片：它显示文件（位置）全屏。

现在，我想让“照片”成为我的默认图像查看器。我知道如何从另一个应用程序调用课程。但是是否可以仅通过单击图像将“照片”设置为默认查看器，而无需调用整个应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T18:14:53.720

在“照片”图像查看器活动下的清单中，添加以下意图过滤器：

```
<intent-filter>
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.DEFAULT" />
    <data android:mimeType="image/*" />
</intent-filter> 
```

您需要从意图中获取图像的 URI 以显示它。

# sql-server - sql-server：将 Char(14) 转换为日期时间？

> ID：13366239
> 
> 赞同：0
> 
> 时间：2012-11-13T18:08:53.637
> 
> 标签：sql-server, date, datetime

使用 SQL-server 2008 数据库，我有一个`char(14)`要转换为日期时间的数据类型。

示例 char(14) 值：

```
20120209102026
20010131120000 
```

日期格式是`yyyymmdd`某种形式。

我发布的值似乎不是唯一的格式，因为某些值出现“索引超出范围”错误。为此，我可以跳过那些无效日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:14:18.730

```
declare @c char(14)
select @c='20120209102026'

Select Cast(Substring(@c,1,8) + ' ' + Substring(@c,9,2)+':'+ 
    Substring(@c,11,2)+':'+ Substring(@c,13,2) as DateTime) 
```

忽略超出范围数值的第二个版本：

```
Select Cast( 
Rtrim(Substring(@c,1,8) 
+ Case When len(Substring(@c,9,4))>=4 then +' '+ Substring(@c,9,2) else '' end
+ Case When len(Substring(@c,11,2))=2 then +':'+ Substring(@c,11,2) else '' end
+ Case When len(Substring(@c,13,2))=2 then +':'+ Substring(@c,13,2) else '' end)
as Datetime) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T18:15:18.897

这很难看，但如果您的格式是，`yyyymmddhhmmss`那么您可以使用：

```
select cast(left(yourDate, 8)+' '+
    SUBSTRING(yourDate, 9, 2)+':'+SUBSTRING(yourDate, 11, 2)+':'+RIGHT(yourDate, 2) as datetime)
from yourtable 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/e32b3/2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T18:43:33.410

一系列函数调用，但最终得到相同的结果。

试试这样：

```
select convert(datetime,STUFF(STUFF(STUFF(STUFF(STUFF('20010131120000',5,0,'/'),8,0,'/'),11,0,' '),14,0,':'),17,0,':')) 
```

在这里查看[STUFF](http://msdn.microsoft.com/en-us/library/ms188043.aspx)的工作原理！

# javascript - 如何禁用 element.style？

> ID：13366242
> 
> 赞同：1
> 
> 时间：2012-11-13T18:08:58.563
> 
> 标签：javascript, css

我有`element.style 'margin-left: 0;'`一`ul`堂课。我想摆脱它，但我无法更改 js 文件而不弄乱一切，所以我想知道是否有办法在我的 CSS 中禁用它？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T18:12:17.237

在你的 CSS 中做

```
ul.something {
    margin-left: auto !important; // or whatever px instead of auto
} 
```

如果它是要加载的最后一个样式表，这在大多数情况下都会起作用，否则它可能会再次被不同的样式覆盖。

# html - Twitter bootstrap：导航标签和药丸不包含在英雄示例“容器”元素中

> ID：13366246
> 
> 赞同：0
> 
> 时间：2012-11-13T18:09:20.803
> 
> 标签：html, css, twitter-bootstrap

我最近下载了 TB 2，并开始熟悉它。我正在根据英雄示例创建一个页面。

我正在根据英雄示例创建一个页面。页面内容区域是我的标记中具有“容器”类的元素。我正在创建的布局如下（在“容器”元素内），创建两列：

*   左栏（页面面积的 66.66%）
*   右侧栏（页面面积的 33.33%）

左侧列将包含两行，顶行包含导航药丸，底行包含导航选项卡。

这是“容器”元素中的 HTML：

```
<div class="row">
    <div id="page-left-column" class="span8">
        <div class="row">
            <ul class="nav nav-pills pull-right">  
                <li class="active"><a href="#">Pill 1</a></li>     
                <li><a href="#">Pill 2</a></li>  
                <li><a href="#">Pill 3</a></li>   
                <li><a href="#">Pill 4</a></li>   
                <li><a href="#">Pill 5</a></li>   
            </ul> 
        </div>

        <div class="row">
            <ul class="nav nav-tabs">  
                <li class="active"><a href="#">Tab 1</a></li>
                <li><a href="#">Tab 2</a></li>  
                <li><a href="#">Tab 3</a></li>   
            </ul>
        </div>

    </div>

    <div id="page-right-column" class="span4">
        <div class="row">
        </div>

        <div class="row">
        </div>        
    </div>
</div> 
```

使用 Firebug，我发现选项卡和药丸都溢出了它们的包含元素，所以对于导航选项卡，内容在页面上，文本不再在列的左侧排列 -即文本显示在列之外。

上面的标记有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:05:50.597

**解决方案：**

*   每个标签，如`input`, `div`, `table`,`ul` 都应该有一个`span*`类。不是必需的，但推荐。
*   为了实现`%`而不是`px`值：`row-fluid`，`container-fluid`应该应用。Child span* 将跟随其容器。
*   推荐的模式是：容器、跨度、容器、跨度、容器、跨度等。
*   容器可以是（容器或行（流体或非流体））。跨度可以是容器内的任何元素/标签。

**CSS：**

```
 .border {
            border: 1px solid #afafaf;
        }
        #page-right-column {
            margin:0;
        } 
```

**HTML：**

```
 <div class="container border">
        <div class="span12">
            <div class="row-fluid">
                <div id="page-left-column" class="span8">
                    <div class="row">
                        <div class="span12">
                            <ul class="nav nav-pills pull-right">  
                                <li class="active"><a href="#">Pill 1</a></li>     
                                <li><a href="#">Pill 2</a></li>  
                                <li><a href="#">Pill 3</a></li>   
                                <li><a href="#">Pill 4</a></li>   
                                <li><a href="#">Pill 5</a></li>   
                            </ul> 
                        </div>
                    </div>
                    <div class="row">
                        <div class="span12">
                            <ul class="nav nav-tabs">  
                                <li class="active"><a href="#">Tab 1</a></li>
                                <li><a href="#">Tab 2</a></li>  
                                <li><a href="#">Tab 3</a></li>   
                            </ul>
                        </div>
                    </div>
                </div><!-- End of #page-left-column -->
                <div id="page-right-column" class="span4">
                    <div class="row-fluid border">
                        <div class="span12">
                            First row of right column. 
                        </div>
                        <div class="span12">
                            Second row of right column
                        </div>
                    </div>
                </div><!-- End of #page-right-column -->
            </div><!-- End of .container-fluid -->
        </div>
    </div><!-- End of .container --> 
```

# visual-studio-2012 - 获取有关运行应用程序的 InstallShield LE 2012 警告

> ID：13366247
> 
> 赞同：1
> 
> 时间：2012-11-13T18:09:26.330
> 
> 标签：visual-studio-2012, installshield, updates

我在为零售应用程序安装更新时一直看到它，但是搜索了两天后，我还没有找到方法。我正在尝试在 VS 2012 中使用 InstallShield LE 创建一个包。我的客户请求之一是在正在更新的程序运行时警告用户，并允许他们关闭应用程序（或者可能让安装尝试关闭它） . 有没有办法做到这一点（越简单越好）？在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:06:07.873

这应该会发生。但是，您可能需要确保没有删除该文件并将其重新添加到您的安装中；相反，请确保您在源位置更新它并重建。（这有助于确保底层组件设置保持不变，这可能与 Windows Installer 的 Files-In-Use 检测有关。）

# backbone.js - 骨干模型中如何处理“更改”事件？

> ID：13366248
> 
> 赞同：1
> 
> 时间：2012-11-13T18:09:29.540
> 
> 标签：backbone.js, model, meteor

我正在尝试构建一个动态更新 Meteor 项目中的会话变量的模型。我知道纯 JSON 不应该存储在骨干模型中，所以我设置了一个特殊模型，如下所示：

```
initialize : function () {
    // Log the changed properties
    this.on('change', function (model, options) {
        for ( var i in options.changes)
            this.display(i);
        Session.set('NewSpecial', model);
    });
},
//Attributes
defaults: {
    "Product" : null,
    "ShortDescription" : null,
    "Category" : "food",
    "Price" : new PriceModel,
    "Date" : new DateModel,
    "Uses" : 0,
    "Tags" : [],
    "Contributor" : null
}, 
```

将“价格”和“日期”存储在自己的模型中：

```
//Price model for use within Special
var PriceModel = Backbone.Model.extend({
    defaults : {
        "Regular" : null,
        "Special" : null,
        "PercentOff" : null
    }
});

//Date model for use within Special
var DateModel = Backbone.Model.extend({
    defaults : {
        "StartTime" : null,
        "EndTime" : null,
        "HumanTimeRange" : null
    }
}); 
```

如图所示，当Special模型的属性发生变化时，它应该为发生变化的属性调用display，然后将Session var设置为模型。但是，如果我的 DateModel 或 PriceModel 发生更改，它似乎不会触发 Special 模型上的更改事件。每个“DateModel”和“PriceModel”都应该有自己的`this.on('change', ...)`调用`Special.set(attribute, thisModel)`方法的方法吗？还是有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T22:05:55.920

我看到了几个问题。

首先，你的`defaults`：

```
defaults: {
    "Product" : null,
    "ShortDescription" : null,
    "Category" : "food",
    "Price" : new PriceModel,
    "Date" : new DateModel,
    "Uses" : 0,
    "Tags" : [],
    "Contributor" : null
} 
```

这将最终得到一个`PriceModel`、一个`DateModel`和一个标签数组，该数组被该模型的所有实例共享。一个[`defaults`](http://backbonejs.org/#Model-defaults)对象被浅拷贝并合并到模型的属性中，其中没有任何值`defaults`被克隆或复制，它们只是按原样复制。如果您想要区分`Price`、`Date`和`Tags`值，请使用函数`defaults`：

```
defaults: function() {
    return {
        "Product" : null,
        "ShortDescription" : null,
        "Category" : "food",
        "Price" : new PriceModel,
        "Date" : new DateModel,
        "Uses" : 0,
        "Tags" : [],
        "Contributor" : null
    };
} 
```

第二个问题是对*变化*意味着[`set`](http://backbonejs.org/#Model-set)什么的看法相当简单。如果您查看 的[源代码](https://github.com/documentcloud/backbone/blob/master/backbone.js#L262)，您会看到：*[`set`](https://github.com/documentcloud/backbone/blob/master/backbone.js#L262)*

 *```
// If the new and previous value differ, record the change.  If not,
// then remove changes for this attribute.
if (!_.isEqual(prev[attr], val) || (_.has(now, attr) !== _.has(prev, attr))) {
  this.changed[attr] = val;
  if (!silent) this._pending[attr] = true;
} else {
  delete this.changed[attr];
  delete this._pending[attr];
  if (!changing) delete this._changes[attr];
} 
```

[`_.isEqual`](http://underscorejs.org/#isEqual)不会识别出您的 or 内部发生了某些变化，或者`Price`您`Date`从 中添加或删除了某些内容`Tags`。如果你这样做：

```
p = new PriceModel(...);
m.set('Price', p) 
```

然后`m`会注意到`Price`情况发生了变化，但是如果您：

```
p = m.get('Price');
p.set(...);
m.set('Price', p); 
```

那么`m`就不会意识到`Price`已经改变了；您的模型不会自动绑定到事件，`Price`因此它不会注意到`p.set(...)`调用，也不会识别`m.set('Price', p)`为更改，因为这只不过是一种花哨的说法`p = p`。

您可以通过不提供来自的数组来解决此*更改*问题的一部分；制作副本，更改副本，然后将更新的副本交给. 可以通过绑定到包含和模型上的事件并转发它们来处理一半，类似于集合的处理方式，如下所示：`set``Tags``get``set``"change"``Price``Date`

```
initialize: function() {
    this.attributes.Price.on(
        'all',
        function(ev, model, opts) { this.trigger(ev, model, opts) },
        this
    );
    //...
} 
```

`set`如果有人做了 a`set('Price', some_new_object)`并且您需要重新绑定您的转发器，您可能希望提供自己的实现。*

# php - call_user_func() 期望参数 1 是一个有效的回调

> ID：13366249
> 
> 赞同：16
> 
> 时间：2012-11-13T18:09:30.303
> 
> 标签：php, dictionary

我只是在 PHP 中使用 call_user_func 函数，并且在运行这个简单的代码时遇到了这个错误：

```
<?php

class A
{

    public $var;
    private function printHi()
    {

        echo "Hello";   

    }

    public function __construct($string)
    {
        $this->var = $string;   

    }

    public function foo()
    {

        call_user_func($this->var); 

    }

}

$a = new A('printHi');
$a->foo();

?> 
```

我知道如果我在名为 printHi 的类之外创建一个函数，它可以正常工作，但我指的是该类的 print hi 并且不确定为什么“this”没有被注册。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-13T18:12:35.573

`$this->var``printHi`在您的示例中评估为。但是，当您调用类的方法时，您需要将回调作为数组传递，其中第一个元素是对象实例，第二个元素是函数名：

```
call_user_func(array($this, $this->var)); 
```

以下是有关有效回调的文档：[http ://www.php.net/manual/en/language.types.callable.php](http://www.php.net/manual/en/language.types.callable.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T18:18:57.677

除了 Omar 的回答，您还可以创建`printHi()`一个类静态函数，这样您就可以从 调用它`call_user_func('A::printHi')`，如下所示：

```
class A
{

    public $var;
    public static function printHi()
    {

        echo "Hello";   

    }

    public function __construct($string)
    {
        $this->var = $string;   

    }

    public function foo()
    {

        call_user_func($this->var); 

    }

}

$a = new A('A::printHi');
$a->foo(); 
```

查看[**实时示例**](http://codepad.org/QlgoTaew)

# gwt - 使用 with() 子句 RequestFactory GWT 获取对象

> ID：13366250
> 
> 赞同：0
> 
> 时间：2012-11-13T18:09:30.590
> 
> 标签：gwt, requestfactory

您好，我刚刚为我的 GWT 项目设置了 RequestFactory。它工作得很好，但我无法获得对象的对象字段我有一个 BuslineProxy 和一个总线代理

```
buslineContext.findAll().with("buses").fire(new Receiver<List<BuslineProxy>>() {

    @Override
    public void onSuccess(List<BuslineProxy> response) {

        String requestedData="";
        for (BuslineProxy busline : response)
        {
            requestedData+="Busline " +busline.getName() +" with id " + busline.getId()+"\n";
            for(BusProxy bus : busline.getBuses())
            {
                requestedData+=bus.getId()+"\n";
            }
        }
        Window.alert(requestedData);
    }
}); 
```

我的服务器对象总线有一个名为总线的列表字段。我想我只需要将要访问的字段放在 with 子句中即可。但它不起作用，我只得到所有的公交线路，但他们的公交车列表是空的。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:20:00.323

当 GWT 序列化对象时，您确定服务器上的 Buses 不为空吗？

您可以在获取 Busline 时检查是否正确获取 Buses，如果数据不在这里，GWT 不会自行执行数据库查询（除非您使用一些代理机制和 OpenSessionInViewFilter 或类似的东西）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T21:57:17.713

Florent 是正确的，由于一个小错误，数据为空。但更大的问题是实体代理总线没有默认构造函数和静态 findAll 方法，即使它从未直接实例化。构造函数为空，findAll 方法返回 null，但 RequestFactory 仍然需要它们！

# java - 使用 Spring 按条件验证对象字段

> ID：13366251
> 
> 赞同：3
> 
> 时间：2012-11-13T18:09:37.743
> 
> 标签：java, spring, validation

我有一个复杂的对象，其中包含两个`UserPropertyForm`对象：

```
 public class ComplexUserForm {
       int userType;

       @Valid
       UserPropertyForm property1;
       UserPropertyForm property2;
       ...
    }

    public class UserPropertyForm {
       @NotEmpty
       @Length(max = 255)
       private String title;
       @NotEmpty
       @Length(min = 100)
       private String description;
       ...
    } 
```

我`property1`每次都需要验证，所以我将其标记为`@Valid`.
我`property2`只需要在以下情况下进行验证`userType == 2`

谁能说我是否可以`property2`使用我对`UserPropertyForm`字段的注释以简单的方式进行验证？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-10-23T01:19:53.553

```
You can use this custom annotation above your class.

    @ValidateIfAnotherFieldHasValue(
            fieldName = "userType",
            fieldValue = "2",
            dependFieldName = "property2")
  public class ComplexUserForm {
       int userType;

       @Valid
       UserPropertyForm property1;
       UserPropertyForm property2; 
```

只有当 getUserType().equals("2") 时才会验证 property2。

错误消息将出现在 property2.fieldname 中，因此 `<form:errors path="property2.*"/>`如果您想从 property2 中捕获所有错误，则需要在 JSP 中。

```
public class ValidateIfAnotherFieldHasValueValidator
implements ConstraintValidator<ValidateIfAnotherFieldHasValue, Object> {

private String fieldName;
private String expectedFieldValue;
private String dependFieldName;

@Override
public void initialize(final ValidateIfAnotherFieldHasValue annotation) {
    fieldName          = annotation.fieldName();
    expectedFieldValue = annotation.fieldValue();
    dependFieldName    = annotation.dependFieldName();
}

@Override
public boolean isValid(final Object value, final ConstraintValidatorContext ctx) {

    if (value == null) {
        return true;
    }

    try {
        final String fieldValue       = BeanUtils.getProperty(value, fieldName);
        final Object dependFieldValue = PropertyUtils.getProperty(value, dependFieldName);

        if (expectedFieldValue.equals(fieldValue)) {

            ctx.disableDefaultConstraintViolation();
            ValidatorFactory factory = Validation.buildDefaultValidatorFactory();
            Validator validator = factory.getValidator();

            Set<ConstraintViolation<Object>> errorList = validator.validate(dependFieldValue);

            for(ConstraintViolation<Object> error : errorList) {

                 ctx.buildConstraintViolationWithTemplate(error.getMessageTemplate())
                 .addNode(dependFieldName+"."+error.getPropertyPath())
                 .addConstraintViolation();
            }

            return errorList.isEmpty();
        }

    } catch (final NoSuchMethodException ex) {
        throw new RuntimeException(ex);

    } catch (final InvocationTargetException ex) {
        throw new RuntimeException(ex);

    } catch (final IllegalAccessException ex) {
        throw new RuntimeException(ex);
    }

    return true;
}

} 
```

和：

```
@Target({ElementType.TYPE, ElementType.ANNOTATION_TYPE})
@Retention(RetentionPolicy.RUNTIME)
@Constraint(validatedBy = ValidateIfAnotherFieldHasValueValidator.class)
@Documented
public @interface ValidateIfAnotherFieldHasValue {

    String fieldName();
    String fieldValue();
    String dependFieldName();

    String message() default "{ValidateIfAnotherFieldHasValue.message}";
    Class<?>[] groups() default {};
    Class<? extends Payload>[] payload() default {};

    @Target({ElementType.TYPE, ElementType.ANNOTATION_TYPE})
    @Retention(RetentionPolicy.RUNTIME)
    @Documented
    @interface List {
        ValidateIfAnotherFieldHasValue[] value();
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T06:36:05.193

我已经设法通过`validate`表单验证器的方法做到这一点：

```
public void validate(final Object obj, final Errors errors) {
   final ComplexUserForm form = (ComplexUserForm) obj;
   if (form.getUserType() == 2) {
      ClassValidator<UserPropertyForm> offered2Validator = new ClassValidator<UserPropertyForm>(UserPropertyForm.class);
      InvalidValue[] property2InvalidValues = property2Validator.getInvalidValues(form.getProperty2());
      for (final InvalidValue invalidValue : property2InvalidValues)
         errors.rejectValue("property2." + invalidValue.getPropertyPath(), invalidValue.getMessage(), invalidValue.getMessage());
      }
   }
} 
```

但是当拒绝某些字段值时，我必须将`"property2."`字符串添加到值的路径中`property2`。如果有人知道更好的方法，我会很高兴知道。谢谢

# oauth-2.0 - 通过驱动器的 JS 客户端库使用授权时，是否可以正确选择要使用的任何可用的 Google 帐户？

> ID：13366254
> 
> 赞同：22
> 
> 时间：2012-11-13T18:09:43.610
> 
> 标签：oauth-2.0, google-drive-api, google-account, google-api-client

我有一个现有的支持 Google Drive 的应用程序，它使用 Google Java 客户端库和服务器流身份验证。

如果您没有登录应用程序并导航到 URL，并且您在该浏览器上登录了多个 Google 帐户（只能有一个个人 Google 帐户，任何其他帐户都必须是 Google 企业帐户）OAuth 回调提供用于选择要使用的 Google 帐户的选项。

但是，在测试切换到使用 JavaScript 客户端库时，我无法使用 gapi.auth.authorize 激活多帐户选择屏幕。是否可以使用 JS 库处理多个帐户？

更新：我尝试使用`immediate`参数`false`。只要我不在弹出窗口中更改帐户，我就可以登录。如果我确实更改了帐户，我会：

[https://accounts.google.com/o/oauth2/auth?client_id=433863057149.apps.googleusercontent.com&scope=https://www.googleapis.com/auth/drive.file+https://www.googleapis。 com/auth/drive.install+https://www.googleapis.com/auth/userinfo.email+https://www.googleapis.com/auth/userinfo.profile&immediate=false&redirect_uri=postmessage&origin=https://drivedrawio。 appspot.com&proxy=oauth2relay593063763&response_type=token&state=701344514&authuser=1](https://accounts.google.com/o/oauth2/auth?client_id=433863057149.apps.googleusercontent.com&scope=https://www.googleapis.com/auth/drive.file+https://www.googleapis.com/auth/drive.install+https://www.googleapis.com/auth/userinfo.email+https://www.googleapis.com/auth/userinfo.profile&immediate=false&redirect_uri=postmessage&origin=https://drivedrawio.appspot.com&proxy=oauth2relay593063763&response_type=token&state=701344514&authuser=1)

在新标签中，没有任何反应。我[制作了一个视频来演示](http://youtu.be/MU7jfMsn28w)。

更新 2：[这个](https://github.com/google/google-api-javascript-client/issues/108)针对 JS 客户端库的需要双重选择多个帐户的错误已被接受。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-11-14T13:11:47.740

You are not getting the multi user selection screen because of the following parameter: `authuser=0` This automatically selects the first account you are signed-in with (`authuser=1` would select the second etc...).

It's currently not possible to remove that param using the client library because the client library sets it automatically to 0 (this is why it claims not to handle multi-accounts) if there is no value so one way is to override it to -1 for example, this will show the multi-account chooser. Then you could also ask to access the [user's profile or email](https://developers.google.com/accounts/docs/OAuth2Login) at the same time you ask access to other APIs and fetch either the email of the user or its ID. Then on subsequent auth you can specify the `user_id` param which wil bypass the user-selection screen.

So in practice, first authorize like this:

```
gapi.auth.authorize({client_id: <Your Client ID>,
                     scope: 'https://www.googleapis.com/auth/drive openid', // That requires access to Google Drive and to the UserInfo API
                     authuser: -1}); 
```

The only problem with the above is that the auto-refresh of the client library will not work because every auth will by blocked at the multi-account selection screen.

The trick is to get the ID of the user using the UserInfo API, save that ID in a session cookie and use it on subsequent auth like that:

```
gapi.auth.authorize({client_id: <Your Client ID>,
                     scope: 'https://www.googleapis.com/auth/drive openid',
                     user_id: <The User ID>,
                     authuser: -1}); 
```

Specifying the User's ID will make sure the multi-account chooser is bypass and will allow the auto-refresh of the token from the client lib to work again.

For reference, other URL param that impact the User flow are:

*   `user_id`: similar than `authuser` (bypasses the multi-account selection screen) but you can use email address (e.g. bob@gmail.com) or the User ID you get from our Open ID Connect endpoint/Google+ API/UserInfo API
*   `approval_prompt`: default is `auto`, can be set to `force` to make sure that the approval/grant screen gets shown. This makes sure that the gant screen is not bypassed on subsequent auth (after first time).
*   `immediate`: `immediate` is a bit tricky, when set to `true` it will bypass the grant screen (kinda like `approval_prompt=auto`) if the user already granted approval previously, but if the user has not granted approval previously you will get redirected with an error: `error=immediate_failed`. If set to `false` it won't add special behavior and therefore fallback on the behavior setup by the `approval_prompt` value.

Note: `immediate=true` and `approval_prompt=force` is an invalid combination.

I think the client library is using the `immediate` param so that if he gets the `error=immediate_failed` it will restart an auth flow without the `authuser` param, but that's only speculations :)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T18:15:35.050

OAuth 授权访问页面仅在不处于即时模式时显示，如果您将`immediate`参数设置为 false，它是否按预期工作？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-14T17:04:20.427

根据[http://code.google.com/p/google-api-javascript-client/issues/detail?id=11](http://code.google.com/p/google-api-javascript-client/issues/detail?id=11) Javascript 客户端不支持多重登录

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T21:07:01.663

注意**authuser**参数。例如，将此设置为“2”，即使您已经通过身份验证，系统也会提示您登录。

# gem - getaddrinfo：提供节点名或服务名，或未知（SocketError）

> ID：13366263
> 
> 赞同：9
> 
> 时间：2012-11-13T18:10:17.810
> 
> 标签：gem, themes, shopify, getaddrinfo

我正在开发 Shopify 主题，我正在使用[https://github.com/Shopify/shopify_theme](https://github.com/Shopify/shopify_theme)将我的文件更新到 Shopify。不幸的是，我无法让它工作......当我尝试上传/更新文件时，我收到一个错误，比如......

```
.....ruby/1.9.1/net/http.rb:762:in `initialize': getaddrinfo: nodename nor servname provided, or not known (SocketError) 
```

我在尝试安装 gems 时已经看到了这个错误，显然这是 MacOS 的“典型”问题。我通过将路由器 DNS 更改为 Google 的 DNS 来解决问题（[mac dns 查找行为不端](https://stackoverflow.com/questions/10766881/mac-dns-look-up-misbehaving)）。

不幸的是，在尝试使用我安装的 gem (Shopify_theme) 时出现了同样的问题。我对这个 gem/rails 世界很陌生，所以我真的不知道如何解决这个问题。

有什么想法吗？

**编辑：** 我的错，我实际上找到了解决方案。很抱歉这篇文章，至少我会解释我是如何修复它的。

我查看了这个 shopify_theme gem 的源文件，并注意到它在商店 url 之前添加了“http://”（使用“主题配置 api_key 密码 store_url”定义）。因为我首先用 http:// 定义了 store_url，所以出现了这个错误。如果您遇到同样的错误，请尝试编辑您的 config.yml 文件并删除“http://”。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-14T15:31:43.270

（在此处回答，以便线程显示已回答。）

“我查看了这个 shopify_theme gem 的源文件，注意到它在商店 url 之前添加了“http://”（使用“主题配置 api_key 密码 store_url”定义）。

因为我首先用 http:// 定义了 store_url，所以出现了这个错误。如果您遇到同样的错误，请尝试编辑您的 config.yml 文件并删除“http://”。”</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-19T20:05:37.720

如果将协议指定为主机的一部分，xmlrpc 将失败。删除“http://”

# ios - 我们可以在 iOS 应用中按需添加 Twitter 权限吗？

> ID：13366265
> 
> 赞同：0
> 
> 时间：2012-11-13T18:10:27.250
> 
> 标签：ios, twitter, login, permissions

我们正在制作一个与 Twitter 有两个集成点的 iOS 应用程序：1\. 用户可以使用 Twitter 帐户登录（或 FB 帐户或只是电子邮件/密码） 2\. 用户可以将他刚刚完成的工作分享到 Twitter（只需发布一条推文)

因此，对于某些用户，我们需要对 twitter 的读/写访问权限，但对于某些用户来说，只有最低限度的登录权限就足够了，我不想通过在第一次登录时要求写权限来吓跑用户，因为他们可能甚至没有意识到该应用程序可以将他们的工作分享到 Twitter。

是否有可能仅在第一次启动时请求登录权限并仅在第一次推文需要时请求推文权限？

PS 我们不会使用内置的 iOS 分享表，因为它们只适合分享到FB 或 Twitter 或其他地方*。*我们希望以四方应用风格同时向 Twitter、Facebook、电子邮件和其他地方提供共享

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:38:26.143

我不熟悉最近的更改，但我相信权限是您在[https://dev.twitter.com/apps](https://dev.twitter.com/apps)中设置的权限。所以不，你不能这样做。我不认为你也可以在 facebook 上做到这一点。

（侧边栏：twitter 的文档现在完全是一团糟。我在那里找不到任何有用的信息）

# hierarchical-clustering - GRGPF聚类算法的实现

> ID：13366272
> 
> 赞同：1
> 
> 时间：2012-11-13T18:10:46.477
> 
> 标签：hierarchical-clustering, large-data

我正在寻找实现 Ganti et.al 中的聚类算法的源代码。“在任意度量空间中聚类大型数据集。” 特别是，我有一个要聚类的大数据问题（所以这是一个单程聚类问题），并且我在空间上没有二元运算符（因此在元素之间查找“平均”元素不是一种选择）。

我不知道语言（尽管我更喜欢简单的 I/O 机制）。

有什么想法吗？

# image - 使用 ImageMagick/convert 创建半透明 PNG

> ID：13366273
> 
> 赞同：10
> 
> 时间：2012-11-13T18:10:47.757
> 
> 标签：image, imagemagick, png, transparency, imagemagick-convert

我有 PNG 文件，我想将整个图像转换为半透明。

该图像将在 KML 文件中作为用于 Google 地球/地图的图标叠加层进行引用。

**使用 ImageMagick convert**命令向我建议了以下示例，但似乎都不起作用。

第一个示例导致错误，

```
$ /usr/local/bin/convert 121112142121.png -channel Alpha -evaluate Set 50% 2121112142121.png
convert: no decode delegate for this image format '121112142121.png' @ error/constitute.c/ReadImage/550.
convert: option requires an argument '-evaluate' @ error/convert.c/ConvertImageCommand/1400. 
```

第二个未能对图像进行任何可观察到的更改：

```
convert filename.png -fill '#00000080' -draw 'matte 100,100 reset' output.png 
```

虽然我可以在网上找到许多从特定颜色或 alpha 蒙版创建完全透明图像的示例，但我似乎找不到任何可用于创建半透明图像或更改不透明度的示例。我想找到一种使用 convert 命令或 ImageMagick Perl 的方法。

（ImageMagick 版本为 6.8.0-4）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-14T05:53:08.293

已找到解决方法：

```
convert input.png -alpha set -channel A -evaluate set 50% output.png 
```

上面的命令使整个图像（所有颜色）半透明。

我遇到的另一个问题是最新版本的 ImageMagick 是从源代码编译的，没有安装所有最新的图像库（特别是 libpng）。如果从源代码编译，请密切注意 configure 的输出以确保找到 libpng。看起来早于 6.6 的 ImageMagick 版本和/或更早版本的 libpng 可能不支持透明 png 生成。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-10-16T02:46:09.933

```
convert input.png -alpha set -channel A -evaluate Divide 2 output.png 
```

感谢@caw 在您的评论中指出这一点。这有助于图像已经具有一些透明像素的情况。`-evaluate set 50%`破坏具有 alpha 0 的已透明像素，将其 alpha 设置为 50%，这通常是不可取的。

`-evaluate Divide 2`保留 alpha，因为完全透明的像素是 alpha 0，而 0 除以 2 仍然是 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-26T14:42:01.630

跟进 Tony Bogdanov 的评论。如果您已经拥有完全透明的像素，您可能需要使用以下策略：

1.) 将透明像素转换为蒙版

`convert -alpha extract input.png mask.png`

2.）执行上面答案中列出的命令：

`convert input.png -alpha on -channel a -evaluate set 65% output.png`

3.）创建一个与原始图像相同大小的空白画布

例子： `convert -size 700x800 xc:none blankcanvas.png`

4.）使用透明像素蒙版将半透明图像和空白画布合成在一起

`composite output.png blankcanvas.png mask.png -compose Src final_output.png`

# html - 如何在网页上触发屏幕键盘外观？

> ID：13366275
> 
> 赞同：1
> 
> 时间：2012-11-13T18:11:02.303
> 
> 标签：html, touchscreen

我们构建了一个在全屏（信息亭）模式下使用的 Web 应用程序。它适用于键盘和鼠标。我们现在很少有配备 Windows 8 和触摸屏（HP 智能触控）的 PC。当用户触摸任何输入字段时，我们如何强制键盘出现？我注意到它在某些网站上是这样工作的。

# java - 使用 Eclipse 访问现有的 SQLite 数据库

> ID：13366277
> 
> 赞同：1
> 
> 时间：2012-11-13T18:11:08.013
> 
> 标签：java, android, eclipse, sqlite, android-sqlite

我使用 eclipse 在 java 中创建了一个 android 应用程序，它创建了一个 SQLite 数据库并让用户向其中添加数据。

我想知道如何访问已经存在的 SQLite 数据库（例如，在我们的 Web 服务器中）以查看和添加数据？我用谷歌搜索并没有得到任何清晰的图片。我需要为此安装 JDBC 驱动程序吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:31:13.990

SQLite 不是客户端/服务器数据库。也就是说，[SQLite wiki](http://www.sqlite.org/cvstrac/wiki?p=SqliteNetwork)提到了一些替代方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T18:22:33.930

如果您想从您的应用程序访问远程数据库，您将需要一个接口（如 Web 服务）来接收来自您的应用程序的请求并实际执行数据库操作。如果您只想从您的计算机访问本地数据库，有几个实用程序可以以图形方式进行，或者您可以使用 sqlite3 从命令行进行。如果您想通过浏览器访问数据库，我认为您也需要一个 Web 服务。

# android - 如何在 ListView 的末尾添加空格？

> ID：13366281
> 
> 赞同：14
> 
> 时间：2012-11-13T18:11:32.233
> 
> 标签：android, listview, user-interface, android-listview, padding

我在[ListView](http://developer.android.com/reference/android/widget/ListView.html)中有许多元素滚动到屏幕外。

我希望在视图的末尾有空白。也就是说，用户应该能够滚动过去最后一个元素，以使最后一个元素位于视口的中间。

我可以使用[OverScroller](http://developer.android.com/reference/android/widget/OverScroller.html)，但我认为这只会使 View 具有像人们在 iPhone 上经常看到的那样有弹性的效果。

有什么我可能忽略的吗？

滚动到底部的屏幕应如下所示： ![Android 模型，其中有许多标签，其中最后一个位于屏幕中间附近](../Images/c362335c833dbff77b9d5fa114fdbd9b.png)

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2014-02-18T01:39:28.637

接受的答案太复杂了， addFooterView 不适合这种事情。正确和简单的方法是设置paddingTop和paddingBottom，并且需要将clipToPadding设置为“false”。在列表视图或网格视图中，添加以下内容：

```
 android:paddingTop="100dp"
    android:paddingBottom="100dp"
    android:clipToPadding="false" 
```

您将在顶部和底部获得随手指滚动而移动的空白空间。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-13T18:14:07.877

1.  膨胀您选择的任何布局（这可能是一个 XML 和 ImageView，没有可绘制的并且您选择的设置高度和宽度）
2.  测量屏幕高度并创建新的 LayoutParams 并将其高度设置为屏幕高度的 1/2
3.  在膨胀视图上设置新的布局参数
4.  使用 ListView 的[`addFooterView()`](http://developer.android.com/reference/android/widget/ListView.html#addFooterView%28android.view.View%29)方法将该视图添加到列表底部（还有一个`addHeaderView()`）

测量屏幕高度的代码

```
 WindowManager wm = (WindowManager) context.getSystemService(Context.WINDOW_SERVICE);
 Display display = wm.getDefaultDisplay();
 int screenHeight = display.getHeight(); 
```

设置半屏高度的代码：

```
 View layout = inflater.inflate(R.layout.mylistviewfooter, container, false);
 ViewGroup.LayoutParams lp = layout.getLayoutParams();
 lp.height = screenHeight/2;
 layout.setLayoutParams(lp);
 myListView.addFooterView(layout); 
```

旁白：当您向任何列表视图添加页脚或标题视图时，必须在添加适配器之前完成。此外，如果您需要在执行此操作后获取您的适配器类，您需要知道调用列表视图的适配器`getAdapter()`将返回一个[HeaderViewListAdapter](http://developer.android.com/reference/android/widget/HeaderViewListAdapter.html)的实例，您需要在其中调用它的[getWrappedAdapter](http://developer.android.com/reference/android/widget/HeaderViewListAdapter.html#getWrappedAdapter%28%29)方法 像这样：

```
 MyAdapterClassInstance myAdapter = (MyAdapterClassInstance) ((HeaderViewListAdapter) myListView.getAdapter()).getWrappedAdapter(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-16T20:38:40.550

这 100% 有效。在适配器中设置你的代码是这样的

```
 //in getCount
   @Override
   public int getCount() {
   return ArrayList.size()+1;
      }
    //in getview make your code like this
    public View getView(final int i, View view, ViewGroup viewGroup) {

    view = inflter.inflate(R.layout.yourlayout, null);

    if(i<getCount()-1) {
     //your code
    }
    else{
    ViewGroup itemContainer =(ViewGroup) view.findViewById(R.id.container);
                itemContainer.setVisibility(View.INVISIBLE);
    }

    Return view;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-06T10:13:19.003

如果您的应用程序中有多个列表视图，请创建页脚的 xml，如下所示：

```
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:minHeight="200dp"
android:layout_width="match_parent"
android:layout_height="200dp"></LinearLayout> 
```

然后在代码中，使用这个：

```
listView.addFooterView(LayoutInflater.from(getActivity()).inflate(R.layout.empty200, null)); 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-09-18T00:21:07.430

尝试以下操作：

```
View footer = new View(getActivity());
footer.setLayoutParams( new AbsListView.LayoutParams( LayoutParams.FILL_PARENT, 100 )); 
// 100 is the height, you can change it.
mListView.addFooterView(footer, null, false); 
```

# hadoop - 将hadoop map函数的文件拆分输入加载到数据结构中

> ID：13366286
> 
> 赞同：0
> 
> 时间：2012-11-13T18:11:58.677
> 
> 标签：hadoop, mapreduce

我设计了一个系统，其中每个映射函数都假设将其输入（包含多个 CSV 记录的文件拆分）加载到数据结构中并处理它们，而不是逐行处理。将有多个映射器，因为我将处理数百万条记录，因此一个映射器完全没有效率。

我从 WordCount 中的示例中看到，map 函数正在逐行读取。几乎从它接收到的拆分中，每一行都会调用 map 函数。我相信这张地图的输入应该是完整的线路本身，而不是一次发送一条线路。

Reduce 函数还有其他任务。所以我想，可以调整地图功能来完成分配的任务。有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T19:24:46.627

根据您的解释，我了解到您的地图输入不是单行，而是由多行构建的一些结构。
在这种情况下 - 您应该创建自己的 InputFormat，它将输入流（来自拆分）转换为 YourDataStructure 集群的对象序列。您的映射器将接受这些 YourDataStructure 对象。

如果整个脚本实际上是您想要处理的结构 - 我建议在一个技巧中完成 mapper 中的所有逻辑 - 您应该知道何时拆分的最后一行。可以通过继承 TextInputFormat 并对其进行调整以指示您有最后一行来完成。然后你在映射器中逐行构建你的结构，当最后一行被指示时——做这项工作
。

# c - 尝试使用嵌套表在 Lua 中调用函数

> ID：13366287
> 
> 赞同：5
> 
> 时间：2012-11-13T18:12:03.500
> 
> 标签：c, function, lua, nested

我正在尝试创建一个名为 Dfetch() 的 C 函数，该函数在 Lua 中注册为 fetch()。我正在寻找它是分层的，这样我就可以调用 dog.beagle.fetch() 作为 Lua 的函数。它只是有助于更好地组织代码。下面是我所拥有的，但它没有调用我的 C 函数。如果我只做全局而不是子表，则调用 C 函数。我是 Lua 的新手，所以我认为我只是设置了错误的表格。

```
void myregister(lua_State *L, const char *libname, const char *sublibname, const luaL_Reg *l) 
{ 
    luaL_newmetatable(L, libname); 
    lua_newtable(L); luaL_setfuncs(L,l,0); 
    lua_pushvalue(L,-1); 
    if(sublibname != NULL) 
    { 
        lua_newtable(L); 
        lua_setfield(L, -2, sublibname); 
    } 
    lua_setglobal(L, libname);
}

luaL_Reg fidofuncModule[] = { {"fetch", Dfetch}, {NULL, NULL}}; 
```

在我的 main() 中，我调用以下内容：

```
lua_State * execContext = luaL_newstate();
//adding lua basic library
luaL_openlibs(execContext);

myregister(execContext, "dog", "beagle", fidofuncModule);

strcpy(buff, "dog.beagle.fetch();");
errorcode = luaL_loadbuffer(execContext, buff, strlen(buff), "line");
errorcode = lua_pcall(execContext, 0, 0, 0);

if (errorcode)
{
  printf("%s", lua_tostring(execContext, -1));
  lua_pop(execContext, 1);  /* pop error message from the stack */
}
//cleaning house
lua_close(execContext); 
```

谢谢，蒂姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T19:46:42.327

## 问题

好的，让我们来看看这个函数和堆栈。

```
luaL_newmetatable(L, libname); 
```

好的，堆栈现在包含来自元表注册表的表：

```
-1: table<libname>{possibly empty} 
```

下一个：

```
lua_newtable(L); 
```

堆栈现在包含：

```
-1: table<new>{empty}
-2: table<libname>{possibly empty} 
```

下一个：

```
luaL_setfuncs(L,l,0); 
```

不改变堆栈。但它确实在表中设置了一堆函数。

```
-1: table<new>{bunch of functions}
-2: table<libname>{possibly empty} 
```

下一个：

```
lua_pushvalue(L,-1); 
```

这会复制堆栈顶部的值。那是我们的表，有一堆函数：

```
-1: table<new>{bunch of functions}
-2: table<new>{bunch of functions}
-3: table<libname>{possibly empty} 
```

下一个：

```
if(sublibname != NULL) 
{ 
    lua_newtable(L); 
```

这会在堆栈上创建一个空的新表：

```
-1: table<new2>
-2: table<new>{bunch of functions}
-3: table<new>{bunch of functions}
-4: table<libname>{possibly empty} 
```

下一个：

```
 lua_setfield(L, -2, sublibname); 
```

[如文档中所述，](http://www.lua.org/manual/5.2/manual.html#lua_setfield)此函数将值设置到给定表键名的表中。该值是堆栈顶部的值，但它放入的表是*索引*。

所以你只是这样做了：

```
-1: table<new>{bunch of functions, sublibname=table<new2>}
-2: table<new>{bunch of functions, sublibname=table<new2>}
-3: table<libname>{possibly empty} 
```

我很确定这不是你想要的。当我们继续时，我将讨论如何解决这个问题。

下一个：

```
}

lua_setglobal(L, libname); 
```

这将获取堆栈顶部并将其粘贴在全局表中，将其从堆栈顶部弹出。

所以堆栈现在看起来像这样：

```
-1: table<new>{bunch of functions, sublibname=table<new2>{empty}}
-2: table<libname>{possibly empty} 
```

全局表现在有：

```
_G[libname] = table<new>{bunch of functions, sublibname=table<new2>{empty}} 
```

因此，您不仅使堆栈不平衡（推送多于弹出），而且您没有得到您真正想要的东西。另外，注册表中的元表包含……什么都没有。

## 解决方案

所以让我们解决这个问题。让我们正确地做到这一点。

你试图做的几乎所有事情都是错误的。首先，做子表的唯一原因是这样的代码可以工作：

```
myregister(execContext, "dog", "beagle", fidofuncModule);
myregister(execContext, "dog", "dane", danefuncModule); 
```

这样，您可以调用`dog.beagle`和`dog.dane`。好吧，要做到这一点，`myregister`必须检查全局表以查看是否已经有一个`dog`表。如果有，它需要在其中存储它的东西，如果没有，它需要创建它。所以你的整个算法有点坏了。

另外，大概你想要`dog.beagle`并且`dog.dane`两者都有自己的`fetch`功能。好吧，注册表只有一个地方可以放一张`dog`桌子，所以如果你只`libname`用你的`luaL_newmetatable`电话，他们会在彼此的桌子上跺脚。

这是*我*将如何解决它。我不知道这是否适用于您正在做的事情，但这就是我要做的。

首先，忘记整个`newmetatable`废话；我们总是根据新表格工作。因此，我们将创建内部表并在其上设置函数：

```
lua_newtable(L);
luaL_setfuncs(L,l,0); 
```

所以堆栈看起来像：

```
-1: table<new>{bunch of functions} 
```

下一步，如果我们没有子库名称，那么我们应该直接将其设置到全局变量下`libname`并返回：

```
if(!sublibname)
{
    lua_setglobal(L, libname);
    return;
} 
```

这将从堆栈中弹出一个值并将其设置在该位置。

由于我们确实有一个子库名称，因此我们需要将此表存储在主表中。如果 中已经有一个表`_G[libname]`，那么我们就得到那个表。否则，我们创建一个新表并将其粘贴到`_G[libname]`.

```
lua_getglobal(L, libname);
if(lua_isnil(L, -1))
{
  /*No table. Must create it and put it into the global*/
  lua_newtable(L);
  lua_pushvalue(L, -1); /*duplicate it on the stack*/
  lua_setglobal(L, libname); /*pushes duplicate*/
} 
```

此时，我们的堆栈包含：

```
-1: table<libname>{possibly empty}
-2: table<new>{bunch of functions} 
```

然后，我们将创建的表粘贴到该表中，`sublibname`用作字段：

```
lua_pushvalue(L, -2); /*duplicates our created table*/
lua_setfield(L, -2, sublibname); 
```

现在堆栈包含：

```
-1: table<libname>{stuff, sublibname=table<new>{bunch of functions}}
-2: table<new>{bunch of functions} 
```

由于表已经在全局表中（我们要么从那里得到它，要么在我们创建它时将它存储在那里），我们就完成了。所以清理堆栈：

```
lua_pop(L, 2); /*balance the stack. Remove our junk from it*/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T19:48:44.753

```
void myregister(lua_State *L, const char *libname, const char *sublibname, const luaL_Reg *lib) 
{ 
    // create 'libname' table
    lua_newtable(L); 

    // no sublib: just import our library functions directly into lib and we're done
    if (sublibname == NULL) 
    { 
        luaL_setfuncs(L, lib, 0); 
    } 
    // sublib: create a table for it, import functions to it, add to parent lib
    else
    {
        lua_newtable(L); 
        luaL_setfuncs(L, lib, 0); 
        lua_setfield(L, -2, sublibname); 
    }

    lua_setglobal(L, libname);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T19:42:06.493

`fetch`正在注册`libname`中，而不是`sublibname`中。要确认，`print(dog.fetch)`请`buff`在通话前添加。

试试这个：

```
void myregister(lua_State *L, const char *libname, const char *sublibname, const luaL_Reg *l) 
{ 
    lua_newtable(L);
    lua_pushvalue(L,-1); 
    lua_setglobal(L, libname);
    if(sublibname != NULL) 
    { 
        lua_newtable(L); 
        lua_pushvalue(L,-1); 
        lua_setfield(L, -3, sublibname); 
    } 
    luaL_setfuncs(L,l,0); 
} 
```

# c++ - 为什么for循环的条件可以留空？

> ID：13366290
> 
> 赞同：5
> 
> 时间：2012-11-13T18:12:20.927
> 
> 标签：c++, c, for-loop

> **可能重复：**
> [for 和 while 循环中没有循环条件](https://stackoverflow.com/questions/13146830/no-loop-condition-in-for-and-while-loop)

为什么`for-loop`允许的条件为空？例如

```
for (;;) 
```

编译得很好。为什么这个空表达式`true`的计算结果如下

```
if () {}
while () {} 
```

两者都会失败吗？我想知道**是否/为什么**是`for-loop`这种情况的例外。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-13T18:46:17.297

[http://www.open-std.org/JTC1/SC22/WG14/www/docs/n1256.pdf](http://www.open-std.org/JTC1/SC22/WG14/www/docs/n1256.pdf)

这些是迭代语句

> while ( 表达式 ) 语句
> 
> do 语句 while ( 表达式 ) ;
> 
> for ( 表达式 [opt] ; 表达式 [opt] ; 表达式 [opt] ) 语句
> 
> for ( 声明表达式 [opt] ; 表达式 [opt] ) 语句

**while 循环被设计为在每次执行循环之前**评估控制表达式，而 do 循环被设计为在每次执行**之后进行评估。**

for 循环被设计为更复杂的迭代语句。

> 6.8.5.3 for 语句
> 
> 该声明
> 
> for ( 子句 1 ; 表达式 2 ; 表达式 3 ) 语句
> 
> 行为如下： 表达式 expression-2 是在每次执行循环体之前计算的控制表达式。每次执行循环体后，表达式 expression-3 被评估为 void 表达式。如果 Clause-1 是一个声明，它声明的任何标识符的范围是声明的其余部分和整个循环，包括其他两个表达式；它在控制表达式的第一次求值之前按执行顺序到达。如果clause-1 是一个表达式，它在控制表达式的第一次计算之前被计算为一个空表达式。
> 
> 子句 1 和表达式 3 都可以省略。省略的表达式 2 被非零常量替换。

该规范允许省略表达式 2，即循环的条件，并用一个非零常量代替。这意味着 for 循环将无限期地继续执行。

这对于允许使用简单的语法进行无限迭代很有用。

```
for(int i = 0;;i++) { //do stuff with i } 
```

这比编写一个在循环外声明变量然后在循环内递增的 while(1) 循环要简单得多。

然后，for 循环规范继续允许您省略第 1 句，以便您可以在别处声明或初始化变量，并且可以省略第 3 表达式，以便在每个循环完成时不需要评估任何表达式。

for 循环是一种特殊情况。while 循环和 do 循环是严格的并且需要一个表达式，但 for 循环是一个灵活的迭代语句。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-13T18:53:33.913

我无法给出明确的答案，但我的猜测是，这是因为在`for`循环的情况下，存在三种不同的表达式，根据循环，您可能需要也可能不需要使用其中的每一个。

在这种`if`情况下，如果没有表达，那就没有意义了；它需要始终表现得好像表达式是真还是假，因此仅相当于其中一个子句。在这种`while`情况下，将对 进行有意义的解释`while () { }`，即评估为`while (1) { }`（给您一个可以用 打破的循环`break`），但我想省略该单个字符的好处不值得麻烦。

但是，在`for`循环的情况下，有三种不同的表达式，可能需要也可能不需要。例如，如果你想在每个循环中初始化和增加一些东西，但要`break`用来跳出循环，你可以写`for (i = 0; ; ++i)`，或者如果你只是想要测试和增加，因为你的变量已经初始化了，你可以写`for (; i > 0; --i)`. 鉴于根据您的循环，这些表达式中的每一个都可能不是必需的，让您为所有不使用的内容填写占位符似乎有点麻烦；并且为了一致性，而不是要求其中一个占位符，它们都是可选的，如果省略，则条件被认为是一个恒定的非零值。

当然，有时很容易将过多的意图解读为设计决策。有时，给定标准的原因很简单，就是它在第一个实现中是如何实现的，而其他人只是复制了它。例如，请参阅[Rob Pike 对](https://plus.google.com/101960720994009339267/posts/R58WgWwN9jp)为什么以 开头的文件`.`在 Unix 中隐藏的解释；这不是由于深思熟虑的设计决定，而仅仅是因为有人在编写时走捷径`ls`并且不想每次都显示`.`和目录条目。`..`

# validation - RichFaces：部分表单验证

> ID：13366291
> 
> 赞同：1
> 
> 时间：2012-11-13T18:12:25.700
> 
> 标签：validation, jsf, richfaces

我有一个包含多个字段（姓名、姓氏等）和一个数据表的表单。Datatable 专用于将地址存储到支持 bean 中。一个人可以有多个地址，所以我添加了一个按钮，如下所示：

```
<a4j:commandButton action="#{bean.addAddressRow}" value="Add address" reRender="addresses" /> 
```

其中“地址”是我的数据表的 ID。我使用 a4j 是因为不需要刷新 page.z

我想要做的是在按下此按钮时跳过除地址字段之外的整个表单的验证。因此，如果所有先前的地址都正确填写，则用户可以再添加一个地址。不应验证其他字段。

有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T05:20:51.103

`commandButton`将您的地址表和with`<a4j:region>`标签包装起来，并将属性设置`renderRegionOnly`为`true`.
看下面的例子。当您按下第一个按钮时，这里仅验证最后两个文本框**（txt2 和 txt3） 。**如果您按下第二个按钮，所有三个文本框都会被验证。

```
<h:form>
  <h:inputText required="true" id="txt1"/>
  <rich:message for="txt1" style="color:red"/>

  <a4j:region renderRegionOnly="true">
      <h:inputText required="true" id="txt2"/>
      <rich:message for="txt2" style="color:red"/>
      <h:inputText required="true" id="txt3"/>
      <rich:message for="txt3" style="color:red"/>
      <a4j:commandButton value="Ok1" />
  </a4j:region>

  <a4j:commandButton value="Ok2" />
</h:form> 
```

# python - 内置范围函数如何接受一个或三个参数？

> ID：13366293
> 
> 赞同：17
> 
> 时间：2012-11-13T18:12:27.580
> 
> 标签：python, function, arguments, range

range 函数如何采用：单个参数、`range(stop)`、 或`range(start, stop)`、 或`range(start, stop, step)`。它是否使用`variadic`诸如`*arg`收集参数之类的参数，然后根据提供的参数数量使用一系列 if 语句来分配正确的值？本质上，确实`range()`指定如果有一个参数，则将其设置为停止参数，或者如果有两个，则它们是`start`, 和`stop`，或者如果有三个则将它们分别设置为`stop`,`start`和`step`？我想知道如果要在纯 CPython 中编写 range 将如何做到这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T18:16:43.220

Range 采用 1、2 或 3 个参数。这可以使用`def range(*args)`, 和显式代码来实现，以在获得 0 个或超过 3 个参数时引发异常。

它不能用默认参数实现，因为在默认值之后不能有非默认值，例如`def range(start=0, stop, step=1)`. 这本质上是因为 python 必须弄清楚每个调用的含义，所以如果你用两个参数调用，python 需要一些规则来确定你覆盖了哪个默认参数。与其有这样的规则，不如说是不允许的。

如果您确实想使用默认参数，您可以执行以下操作：`def range(start=0, stop=object(), step=1)`并对`stop`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-13T18:22:28.183

开源软件的美妙之处在于您可以[在源代码中查找它](http://hg.python.org/cpython/file/ee7b713fec71/Objects/rangeobject.c#l87)：

（TL；DR：是的，它使用可变参数）

```
if (PyTuple_Size(args) <= 1) {
    if (!PyArg_UnpackTuple(args, "range", 1, 1, &stop))
        return NULL;
    stop = PyNumber_Index(stop);
    if (!stop)
        return NULL;
    start = PyLong_FromLong(0);
    if (!start) {
        Py_DECREF(stop);
        return NULL;
    }
    step = PyLong_FromLong(1);
    if (!step) {
        Py_DECREF(stop);
        Py_DECREF(start);
        return NULL;
    }
}
else {
    if (!PyArg_UnpackTuple(args, "range", 2, 3,
                           &start, &stop, &step))
        return NULL;

    /* Convert borrowed refs to owned refs */
    start = PyNumber_Index(start);
    if (!start)
        return NULL;
    stop = PyNumber_Index(stop);
    if (!stop) {
        Py_DECREF(start);
        return NULL;
    }
    step = validate_step(step);    /* Caution, this can clear exceptions */
    if (!step) {
        Py_DECREF(start);
        Py_DECREF(stop);
        return NULL;
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-13T18:57:24.587

[lqc 的回答](https://stackoverflow.com/a/13366433/3357935)演示了如何在 C中实现。如果 Python 的内置函数是用 Python 编写的，`range`您可能仍然对如何实现感到好奇。`range`我们可以阅读 PyPy 的源代码来找出答案。来自`pypy/module/__builtin__/functional.py`：

```
def range_int(space, w_x, w_y=NoneNotWrapped, w_step=1):
    """Return a list of integers in arithmetic position from start (defaults
to zero) to stop - 1 by step (defaults to 1).  Use a negative step to
get a list in decending order."""

    if w_y is None:
        w_start = space.wrap(0)
        w_stop = w_x
    else:
        w_start = w_x
        w_stop = w_y 
```

第一个参数 ,`space`出现在我看到的所有内置函数中，所以我猜这有点像`self`用户不直接提供它。在其余三个参数中，其中两个具有默认值；因此您可以`range`使用一个、两个或三个参数进行调用。如何解释每个参数取决于提供了多少参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-09T17:38:49.167

xrangeIterator 类：

```
def __init__(self,xrange_obj):

    self._xrange_obj=xrange_obj

def __next__(self):

    self.copy_gen=self._xrange_obj._result

    for i in self.copy_gen:

        return i

    raise StopIteration 
```

xrange 类：

```
def __init__(self,*args):

    self._args=args

    self.start,self.step=0,1

    self._repr_string=None

    for i in self._args:

        if type(i) is not int:

            raise TypeError("Cannot interprate '{}' as integer!".format(type(i).__name__))

    if self._length(self._args)<1:

        raise TypeError( "xrange Must have at least one argument")

    elif self._length(self._args)==1:

        self.stop=self._args[0]

        self._repr_string="xrange(0,{})".format(self.stop)

        self._result=self._xrange(self.start-self.step,self.stop-self.step,self.step)

    elif self._length(self._args)==2:

        self.start=self._args[0]

        self.stop=self._args[1]

        self._result=self._xrange(self.start-self.step,self.stop-self.step,self.step)

    elif self._length(self._args)==3:

        self.step=self._args[2]

        self.start=self._args[0]

        self.stop=self._args[1]

        self._result=self._xrange(self.start-self.step,self.stop-self.step,self.step)

    else:

        raise TypeError("xrange expected at most three arguments,got {}".format(self._length(self._args)))

def __repr__(self):

    if self._length(self._args)==1:

        return self._repr_string

    return "xrange{}".format(self._args)

def __iter__(self):

    return xrangeIterator(self)

def _length(self,n):

    counter=0

    for i in n:

        counter+=1

    return counter

def _xrange(self,start,stop,step):

    if step==0:

            raise ValueError("Argument 3 should not be zero!")

    if start<stop and step<0:

            raise TypeError("argument 3 should not be {}".format(step))

    if start<stop:

        while start<stop:

            start+=step

            yield start

    else:

        while start>stop and step<0:

            start+=step

            yield start 
```

# parsing - 使用 javacc + PMD 的 COBOL 解析器

> ID：13366297
> 
> 赞同：0
> 
> 时间：2012-11-13T18:12:35.277
> 
> 标签：parsing, compiler-construction, cobol, pmd, javacc

我正在使用这个[语法](http://java.net/downloads/javacc/contrib/grammars/cobol.jj)来生成 COBOL 解析器。

我使用 javacc 来生成解析器和 Java Tree Builder 来从这个语法生成 AST。

我正在自定义一个名为[PMD](http://pmd.sourceforge.net/)的 Eclipse 插件来读取 COBOL 文件并生成 AST。有一个名为 Designer 的 UI，允许您从源代码中填充 AST。

当我尝试使用下面的源代码时，我收到一条错误消息：

**错误信息**

```
net.sourceforge.pmd.PMDException: Error while processing [no filename].cbl
    at net.sourceforge.pmd.SourceCodeProcessor.processSourceCode(SourceCodeProcessor.java:80)
    at net.sourceforge.pmd.util.designer.Designer$DFAListener.actionPerformed(Designer.java:502)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Window.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$1.run(Unknown Source)
    at java.awt.EventQueue$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$2.run(Unknown Source)
    at java.awt.EventQueue$2.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)
Caused by: net.sourceforge.pmd.lang.ast.ParseException: net.sourceforge.pmd.lang.cpd.cobol.ast.ParseException: Encountered "" at line 0, column 0.
Was expecting one of:

    at net.sourceforge.pmd.lang.cobol.CobolParser.parse(CobolParser.java:35)
    at net.sourceforge.pmd.SourceCodeProcessor.parse(SourceCodeProcessor.java:90)
    at net.sourceforge.pmd.SourceCodeProcessor.processSource(SourceCodeProcessor.java:136)
    at net.sourceforge.pmd.SourceCodeProcessor.processSourceCode(SourceCodeProcessor.java:75)
    ... 37 more
Caused by: net.sourceforge.pmd.lang.cpd.cobol.ast.ParseException: Encountered "" at line 0, column 0.
Was expecting one of:

    at net.sourceforge.pmd.lang.cpd.cobol.ast.CobolParser.generateParseException(CobolParser.java:43571)
    at net.sourceforge.pmd.lang.cpd.cobol.ast.CobolParser.jj_consume_token(CobolParser.java:43405)
    at net.sourceforge.pmd.lang.cpd.cobol.ast.CobolParser.IdentificationDivision(CobolParser.java:3734)
    at net.sourceforge.pmd.lang.cpd.cobol.ast.CobolParser.ProgramUnit(CobolParser.java:3527)
    at net.sourceforge.pmd.lang.cpd.cobol.ast.CobolParser.CompilationUnit(CobolParser.java:3450)
    at net.sourceforge.pmd.lang.cobol.CobolParser.parse(CobolParser.java:33)
    ... 40 more
Exception in thread "AWT-EventQueue-0" net.sourceforge.pmd.lang.ast.ParseException: net.sourceforge.pmd.lang.cpd.cobol.ast.ParseException: Encountered "" at line 0, column 0.
Was expecting one of:

    at net.sourceforge.pmd.lang.cobol.CobolParser.parse(CobolParser.java:35)
    at net.sourceforge.pmd.util.designer.Designer.getCompilationUnit(Designer.java:135)
    at net.sourceforge.pmd.util.designer.Designer.access$1(Designer.java:132)
    at net.sourceforge.pmd.util.designer.Designer$ShowListener.actionPerformed(Designer.java:475)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Window.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$1.run(Unknown Source)
    at java.awt.EventQueue$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$2.run(Unknown Source)
    at java.awt.EventQueue$2.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)
Caused by: net.sourceforge.pmd.lang.cpd.cobol.ast.ParseException: Encountered "" at line 0, column 0.
Was expecting one of:

    at net.sourceforge.pmd.lang.cpd.cobol.ast.CobolParser.generateParseException(CobolParser.java:43571)
    at net.sourceforge.pmd.lang.cpd.cobol.ast.CobolParser.jj_consume_token(CobolParser.java:43405)
    at net.sourceforge.pmd.lang.cpd.cobol.ast.CobolParser.IdentificationDivision(CobolParser.java:3734)
    at net.sourceforge.pmd.lang.cpd.cobol.ast.CobolParser.ProgramUnit(CobolParser.java:3527)
    at net.sourceforge.pmd.lang.cpd.cobol.ast.CobolParser.CompilationUnit(CobolParser.java:3450)
    at net.sourceforge.pmd.lang.cobol.CobolParser.parse(CobolParser.java:33)
    ... 39 more
net.sourceforge.pmd.PMDException: Error while processing [no filename].cbl
    at net.sourceforge.pmd.SourceCodeProcessor.processSourceCode(SourceCodeProcessor.java:80)
    at net.sourceforge.pmd.util.designer.Designer$DFAListener.actionPerformed(Designer.java:502)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Window.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$1.run(Unknown Source)
    at java.awt.EventQueue$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$2.run(Unknown Source)
    at java.awt.EventQueue$2.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)
Caused by: net.sourceforge.pmd.lang.ast.ParseException: net.sourceforge.pmd.lang.cpd.cobol.ast.ParseException: Encountered " "*" "* "" at line 2, column 7.
Was expecting:
    "program-id" ...

    at net.sourceforge.pmd.lang.cobol.CobolParser.parse(CobolParser.java:35)
    at net.sourceforge.pmd.SourceCodeProcessor.parse(SourceCodeProcessor.java:90)
    at net.sourceforge.pmd.SourceCodeProcessor.processSource(SourceCodeProcessor.java:136)
    at net.sourceforge.pmd.SourceCodeProcessor.processSourceCode(SourceCodeProcessor.java:75)
    ... 37 more
Caused by: net.sourceforge.pmd.lang.cpd.cobol.ast.ParseException: Encountered " "*" "* "" at line 2, column 7.
Was expecting:
    "program-id" ...

    at net.sourceforge.pmd.lang.cpd.cobol.ast.CobolParser.generateParseException(CobolParser.java:43571)
    at net.sourceforge.pmd.lang.cpd.cobol.ast.CobolParser.jj_consume_token(CobolParser.java:43405)
    at net.sourceforge.pmd.lang.cpd.cobol.ast.CobolParser.ProgramIdParagraph(CobolParser.java:3925)
    at net.sourceforge.pmd.lang.cpd.cobol.ast.CobolParser.IdentificationDivision(CobolParser.java:3741)
    at net.sourceforge.pmd.lang.cpd.cobol.ast.CobolParser.ProgramUnit(CobolParser.java:3527)
    at net.sourceforge.pmd.lang.cpd.cobol.ast.CobolParser.CompilationUnit(CobolParser.java:3450)
    at net.sourceforge.pmd.lang.cobol.CobolParser.parse(CobolParser.java:33)
    ... 40 more
Exception in thread "AWT-EventQueue-0" net.sourceforge.pmd.lang.ast.ParseException: net.sourceforge.pmd.lang.cpd.cobol.ast.ParseException: Encountered " "*" "* "" at line 2, column 7.
Was expecting:
    "program-id" ...

    at net.sourceforge.pmd.lang.cobol.CobolParser.parse(CobolParser.java:35)
    at net.sourceforge.pmd.util.designer.Designer.getCompilationUnit(Designer.java:135)
    at net.sourceforge.pmd.util.designer.Designer.access$1(Designer.java:132)
    at net.sourceforge.pmd.util.designer.Designer$ShowListener.actionPerformed(Designer.java:475)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Window.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$1.run(Unknown Source)
    at java.awt.EventQueue$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$2.run(Unknown Source)
    at java.awt.EventQueue$2.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)
Caused by: net.sourceforge.pmd.lang.cpd.cobol.ast.ParseException: Encountered " "*" "* "" at line 2, column 7.
Was expecting:
    "program-id" ...

    at net.sourceforge.pmd.lang.cpd.cobol.ast.CobolParser.generateParseException(CobolParser.java:43571)
    at net.sourceforge.pmd.lang.cpd.cobol.ast.CobolParser.jj_consume_token(CobolParser.java:43405)
    at net.sourceforge.pmd.lang.cpd.cobol.ast.CobolParser.ProgramIdParagraph(CobolParser.java:3925)
    at net.sourceforge.pmd.lang.cpd.cobol.ast.CobolParser.IdentificationDivision(CobolParser.java:3741)
    at net.sourceforge.pmd.lang.cpd.cobol.ast.CobolParser.ProgramUnit(CobolParser.java:3527)
    at net.sourceforge.pmd.lang.cpd.cobol.ast.CobolParser.CompilationUnit(CobolParser.java:3450)
    at net.sourceforge.pmd.lang.cobol.CobolParser.parse(CobolParser.java:33)
    ... 39 more 
```

**COBOL 代码**

```
 IDENTIFICATION DIVISION.
  *
   PROGRAM-ID.    GETNUMT.
  *
   DATE-WRITTEN.  04/04/90.
  *
  *    MODIFIED   10/18/97.
  *
  *        *******************************
  *        *                             *
  *        *     Judson D. McClendon     *
  *        *     Sun Valley Systems      *
  *        *     329 37th Court N.E.     *
  *        *     Birmingham, AL 35215    *
  *        *        205-853-8440         *
  *        *                             *
  *        *******************************
  *
   ENVIRONMENT DIVISION.
  *
   CONFIGURATION SECTION.
  *
   INPUT-OUTPUT SECTION.
  *
   FILE-CONTROL.
  *
   I-O-CONTROL.
  *
   DATA DIVISION.
  *
   FILE SECTION.
  *
  *
   WORKING-STORAGE SECTION.
  *
   77  WS-ESCAPE-FLAG              PIC  9(01)     COMP VALUE 0.
   77  WS-ERR-MSG                  PIC  X(30)          VALUE SPACES.
  *
   COPY GETNUMW.COB.
  *
   SCREEN SECTION.
  *
  *
  *                     I N P U T   S C R E E N
  *
   01  INPUT-SCREEN
           FOREGROUND-COLOR 7
           BACKGROUND-COLOR 0.
       03  BLANK SCREEN
           LINE 01  COLUMN 31  VALUE "G E T   N U M B E R".
  *
       03  LINE 03  COLUMN 01  VALUE "Enter Number: ".
       03  PIC  X(25)          USING NW-WORK-NBR.
  *
  *
  *                    O U T P U T   S C R E E N
  *
   01  OUTPUT-SCREEN
           FOREGROUND-COLOR 7
           BACKGROUND-COLOR 0.
  *
       03  LINE 05  COLUMN 01  VALUE "      Result: ".
       03  PIC  -(13).9(06)    FROM  NW-EXTRACTED-NBR.
       03           COLUMN 41
           PIC  X(30)          FROM  WS-ERR-MSG.
  /
   PROCEDURE DIVISION.
  *
  *
  *             C O N T R O L   S E C T I O N
  *
   000000-CONTROL.
  *
       MOVE SPACES TO NW-WORK-NBR.
       DISPLAY INPUT-SCREEN.
  *
       PERFORM 000100-PROCESS
          THRU 000100-EXIT
           UNTIL (WS-ESCAPE-FLAG = 1).
  *
   000000-EXIT.
       STOP RUN.
  *
  *                    P R O C E S S
  *
   000100-PROCESS.
  *
       ACCEPT INPUT-SCREEN
           ON ESCAPE
               MOVE 1 TO WS-ESCAPE-FLAG
               GO TO 000100-EXIT.
  *
       PERFORM 003000-GET-NBR
          THRU 003000-EXIT.
  *
       IF (NW-NBR-ERROR-FLAG = 1)
           MOVE "NUMBER INVALID" TO WS-ERR-MSG
       ELSE
           MOVE SPACES           TO WS-ERR-MSG.
  *
       DISPLAY OUTPUT-SCREEN.
  *
   000100-EXIT.
       EXIT.
  *
   COPY GETNUMP.COB. 
```

我不是 COBOL 程序员，因此，我不明白这个语法有什么问题。

谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T21:58:30.183

许多人低估了构建符合标准的 COBOL 编译器或解析器的复杂性。这**真的很难**，比大多数其他语言都要难。

我认为这里的基本问题是您使用的 JavaCC 语法仅适用于在后期“文本操作”阶段解析 COBOL 源。

典型的 COBOL 编译器有一个预处理步骤，其中处理注释和编译器指令语句以生成适合后续解析的源文本。“文本操作”阶段删除注释行、处理续行、处理`COPY`指令并构建编译器指令以指导后续编译。

您尝试解析的程序仍然包含注释行（第 7 列中带有“*”的行）和几个`COPY`指令。除非您删除这些或构建一个预编译器来完成编译的文本操作阶段，否则您所拥有的语法不会很有用——除了最琐碎的程序。

真正的坏消息是，我已经看到许多适用于后期文本操作阶段解析的 COBOL 语法，但几乎没有任何内容可用于执行使它们有用所需的文本操作！

**注意：** JavaCC 语法包含`CommentLine()`但这些是针对 COBOL 注释条目的，它们是在一些较旧的 COBOL 程序中发现的过时的编码结构。这不会解析 COBOL 注释行（作者或此语法的错误命名选择）。如前所述，COBOL 注释行将在文本操作期间被删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T19:15:34.807

它似乎在为评论而苦苦挣扎。
COBOL 语句是“列敏感的”，尽管我看不到语法将能够识别列对齐。

*   注释应该是第 7 列中的 *
*   分部和节标题从第 8 列开始，例如“IDENTIFICATION DIVISION”
*   其他陈述从第 12 列开始

奇怪的是它在“[no filename].cbl”上报告错误，是因为您没有保存在 Eclipse 中正在解析的文件吗？

尝试对齐列并删除注释。

# jasper-reports - 如何在饼图中显示百分比？

> ID：13366309
> 
> 赞同：2
> 
> 时间：2012-11-13T18:14:02.067
> 
> 标签：jasper-reports, ireport

我在*v4.7中使用**iReport*和*JasperReports*。

 *我想在标签中显示每个切片的百分比。类似于“选项 1 (45.67%)”。

在阅读了许多网站后，我来到了以下片段。

```
<piePlot labelFormat="{0} ({2})" legendLabelFormat="{0} ({2})">
    <plot/>
    <itemLabel/>
</piePlot> 
```

根据*iReport*的文档。

*   {0} 项名称
*   {1} 值
*   {2} 百分比

*但是，当我在iReport*或*JasperReports*上运行报告时，我只得到图例区域 ( *legendLabelFormat* ) 中的百分比，而不是每个切片的标签 ( *labelFormat* ) 中的百分比，而且百分比显示为整数而不是浮点数。

有人知道如何在标签中显示百分比以及 - 如果可能的话 - 使用十进制值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-28T15:28:49.660

在这里找到了解决方案。从 pieDataset 中删除您的 lableExpression，它会覆盖您的 piePlot 标签。

```
<pieDataset>
  <keyExpression><![CDATA[$F{GENERATION}]]></keyExpression>
  <valueExpression><![CDATA[$F{SUBTOTAL}]]></valueExpression>
</pieDataset>
<piePlot isShowLabels="false" isCircular="true" labelFormat="({2})" legendLabelFormat="{0}">
  <plot/>
  <itemLabel/>
</piePlot> 
```*

# windows-8 - WinJS 绑定列表实时排序

> ID：13366311
> 
> 赞同：2
> 
> 时间：2012-11-13T18:14:09.990
> 
> 标签：windows-8, winjs

我正在使用 WinJS.Binding.List 将数据绑定到 ListView。我想使用 createSorted 方法在列表上创建排序投影。此外，列表中的数据是实时的，因此会发生变化。显然，排序后的投影不会自动观察属性以查看它们是否正在发生变化。我找不到允许我调用“重新排序”的机制。存在这样的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T07:21:50.597

如果您对列表中的元素使用 WinJS.Binding.mixin 或 WinJS.Binding.as，则列表应自动重新排序。

这将使它们可以被列表观察到，并且它不仅应该更新您在 itemTemplate 中引用的任何绑定属性，而且还应该在使用投影时重新排序列表。

[http://msdn.microsoft.com/en-us/library/windows/apps/br211859.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br211859.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T08:44:28.213

我相信您需要在该项目的列表上调用 notifyMutated 。

[http://msdn.microsoft.com/en-us/library/windows/apps/hh700771.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh700771.aspx)

# python - Django Celery 日志记录最佳实践

> ID：13366312
> 
> 赞同：72
> 
> 时间：2012-11-13T18:14:11.370
> 
> 标签：python, django, logging, celery, django-celery

我正在尝试让 Celery 日志记录与`Django`. 我已经登录设置`settings.py`进入控制台（在我托管时工作正常`Heroku`）。在每个模块的顶部，我有：

```
import logging
logger = logging.getLogger(__name__) 
```

在我的tasks.py中，我有：

```
from celery.utils.log import get_task_logger
logger = get_task_logger(__name__) 
```

这适用于记录来自任务的调用，我得到如下输出：

```
2012-11-13T18:05:38+00:00 app[worker.1]: [2012-11-13 18:05:38,527: INFO/PoolWorker-2] Syc feed is starting 
```

但是，如果该任务然后调用另一个模块中的方法，例如`queryset`方法，我会得到重复的日志条目，例如

```
2012-11-13T18:00:51+00:00 app[worker.1]: [INFO] utils.generic_importers.ftp_processor process(): File xxx.csv already imported. Not downloaded
2012-11-13T18:00:51+00:00 app[worker.1]: [2012-11-13 18:00:51,736: INFO/PoolWorker-6] File xxx.csv already imported. Not downloaded 
```

我想我可以使用

```
CELERY_HIJACK_ROOT_LOGGER = False 
```

只使用`Django`日志记录，但是当我尝试它时这不起作用，即使我确实让它工作，我也会失去`"PoolWorker-6"`我想要的位。（顺便说一句，我不知道如何让任务名称显示在 Celery 的日志条目中，因为[文档](http://docs.celeryproject.org/en/master/configuration.html?highlight=celeryd_task_log_format#std:setting-CELERYD_TASK_LOG_FORMAT)似乎表明它应该这样做）。

我怀疑我在这里遗漏了一些简单的东西。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-11-17T10:53:03.503

当您的记录器在“另一个模块”的开头初始化时，它会链接到另一个记录器。哪个处理您的消息。它可以是根记录器，或者通常我在 Django 项目中看到的 - 带有 name 的记录器`''`。

最好的方法是覆盖您的日志记录配置：

```
LOGGING = {
    'version': 1,
    'disable_existing_loggers': True,
    'formatters': {
        'simple': {
            'format': '%(levelname)s %(message)s',
             'datefmt': '%y %b %d, %H:%M:%S',
            },
        },
    'handlers': {
        'console': {
            'level': 'DEBUG',
            'class': 'logging.StreamHandler',
            'formatter': 'simple'
        },
        'celery': {
            'level': 'DEBUG',
            'class': 'logging.handlers.RotatingFileHandler',
            'filename': 'celery.log',
            'formatter': 'simple',
            'maxBytes': 1024 * 1024 * 100,  # 100 mb
        },
    },
    'loggers': {
        'celery': {
            'handlers': ['celery', 'console'],
            'level': 'DEBUG',
        },
    }
}

from logging.config import dictConfig
dictConfig(LOGGING) 
```

在这种情况下，我想它应该像你想象的那样工作。

PS dictConfig 在 Python2.7+ 中添加。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-07-06T17:08:29.497

要解决重复日志记录问题，对我有用的是在声明我的 settings.LOGGING 字典时将传播设置设置为 false

```
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'handlers': {
        'console': {
            'level': 'DEBUG',
            'class': 'logging.StreamHandler',
            'formatter': 'verbose'
        },
    },
    'formatters': {
        'verbose': {
            'format': '%(asctime)s %(levelname)s module=%(module)s, '
            'process_id=%(process)d, %(message)s'
        }
    },
    'loggers': {
        'my_app1': {
            'handlers': ['console'],
            'level': 'DEBUG',
            'propagate': False #this will do the trick
        },
        'celery': {
            'handlers': ['console'],
            'level': 'DEBUG',
            'propagate': True
        },
    }
} 
```

假设您的 django 项目布局如下所示：
my_project/
- tasks.py
- email.py

假设您的一项任务调用了 email.py 中的某个函数；日志记录将发生在 email.py 中，然后该日志记录将传播到“父级”，在这种情况下，这恰好是您的 celery 任务。因此双重记录。但是将特定记录器的传播设置为 False 意味着对于该记录器/应用程序，其日志不会传播到父级，因此它们将不会是“双重”记录。默认情况下，“传播”设置为 True

这是[django 文档](https://docs.djangoproject.com/en/1.8/topics/logging/#naming-loggers)部分关于父/子记录器内容的链接

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-11-22T01:00:33.060

令人不安的是，Celery 会干扰根记录器（这不是最佳实践，无法完全控制），但它不会以任何方式禁用您应用的自定义记录器，因此请使用您自己的处理程序名称并定义您自己的行为而不是而不是试图用 Celery 解决这个问题。[无论如何，我喜欢将我的应用程序日志记录分开）。您可以为 Django 代码和 Celery 任务使用单独的处理程序或相同的处理程序，您只需要在 Django LOGGING 配置中定义它们。将模块、文件名和 processName 的格式化参数添加到格式化程序中，以帮助您区分消息的来源。

[这假设您已经在指向 Appender 的 LOGGING 设置值中为 'yourapp' 设置了一个处理程序 - 听起来您虽然知道这一点]。

视图.py

```
log = logging.getLogger('yourapp')
def view_fun():
    log.info('about to call a task')
    yourtask.delay() 
```

任务.py

```
log = logging.getLogger('yourapp')
@task
def yourtask():
    log.info('doing task') 
```

对于 Celery 生成的日志记录 - 如果需要，使用 celeryd 标志 --logfile 将 Celery 输出（例如，worker init、启动任务、任务失败）发送到单独的位置。或者，使用此处的其他答案将“芹菜”记录器发送到您选择的文件。

注意：我不会使用 RotatingFileHandlers - 多进程应用程序不支持它们。来自另一个工具（如 logrotate）的日志轮换更安全，假设您在那里有多个进程，或者与 celery 工作人员共享相同的日志文件，来自 Django 的日志记录也是如此。如果您使用多服务器解决方案，您可能希望无论如何都希望在某个集中的地方进行日志记录。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2020-06-02T19:34:37.507

也许它会对某人有所帮助，我的问题是将所有芹菜日志发送到 graylog。这是解决方案。

芹菜.py：

```
app.config_from_object('django.conf:settings', namespace='CELERY')

# ====== Magic starts
from celery.signals import setup_logging

@setup_logging.connect
def config_loggers(*args, **kwargs):
    from logging.config import dictConfig
    from django.conf import settings
    dictConfig(settings.LOGGING)
# ===== Magic ends

# Load task modules from all registered Django app configs.
app.autodiscover_tasks() 
```

设置.py：

```
LOGGING = {
    'version': 1,
    'handlers': {
        'graypy': {
            'class': 'graypy.GELFTCPHandler',
            'host': GRAYLOG_HOST,
            'port': GRAYLOG_PORT,
        }
    },
    'loggers': {
        'my_project': {
            'handlers': ['graypy'],
            'level': 'INFO',
        },
        # ====== Magic starts
        'celery': {
            'handlers': ['graypy'],
            'level': 'INFO',
        }
        # ===== Magic ends
    }
} 
```

# java - 运行从 wsdl2java cxf 生成的 web 服务

> ID：13366315
> 
> 赞同：0
> 
> 时间：2012-11-13T18:14:17.687
> 
> 标签：java, wsdl, cxf, wsdl2java

我正在尝试使用 cxf 运行从 wsdl 生成的 web 服务。

1.  获取示例 wsdl (hello_world.wsdl)
    *   [http://cxf.apache.org/docs/developing-a-consumer.html](http://cxf.apache.org/docs/developing-a-consumer.html)
2.  从 wsdl 生成 java 代码
    *   'wsdl2java -ant -server -d 服务器 hello_world.wsdl'
    *   [http://cxf.apache.org/docs/wsdl-to-java.html](http://cxf.apache.org/docs/wsdl-to-java.html)
3.  由于生成的代码中缺少服务实现，我从这里得到了 GreeterImpl
    *   [http://alvinalexander.com/java/jwarehouse/apache-cxf/distribution/src/main/release/samples/configuration_interceptor/src/demo/stream/server/GreeterImpl.java.shtml](http://alvinalexander.com/java/jwarehouse/apache-cxf/distribution/src/main/release/samples/configuration_interceptor/src/demo/stream/server/GreeterImpl.java.shtml)
    *   正确更改包名称。
4.  'ant compile' 成功。
5.  'ant GreeterServer' 不成功。

我错过了什么？

* * *

```
compile:

GreeterServer:
  [java] Starting Server
  [java] After implementor
  [java] Before publish
  [java] Exception in thread "main" java.lang.ExceptionInInitializerError
  [java]     at org.eclipse.jetty.util.component.AbstractLifeCycle.<clinit>(AbstractLifeCycle.java:33)
  [java]     at org.apache.cxf.transport.http_jetty.JettyHTTPDestination.activate(JettyHTTPDestination.java:178)
  [java]     at org.apache.cxf.transport.AbstractObservable.setMessageObserver(AbstractObservable.java:48)
  [java]     at org.apache.cxf.binding.AbstractBaseBindingFactory.addListener(AbstractBaseBindingFactory.java:97)
  [java]     at org.apache.cxf.binding.soap.SoapBindingFactory.addListener(SoapBindingFactory.java:901)
  [java]     at org.apache.cxf.endpoint.ServerImpl.start(ServerImpl.java:131)
  [java]     at org.apache.cxf.jaxws.EndpointImpl.doPublish(EndpointImpl.java:349)
  [java]     at org.apache.cxf.jaxws.EndpointImpl.publish(EndpointImpl.java:247)
  [java]     at org.apache.cxf.jaxws.spi.ProviderImpl.createAndPublishEndpoint(ProviderImpl.java:151)
  [java]     at javax.xml.ws.Endpoint.publish(Endpoint.java:57)
  [java]     at org.apache.hello_world_soap_http.Greeter_SoapPort_Server.<init>(Greeter_SoapPort_Server.java:21)
  [java]     at org.apache.hello_world_soap_http.Greeter_SoapPort_Server.main(Greeter_SoapPort_Server.java:26)
  [java] Caused by: java.lang.IllegalArgumentException: key can't be empty
  [java]     at java.lang.System.checkKey(System.java:774)
  [java]     at java.lang.System.getProperty(System.java:647)
  [java]     at org.eclipse.jetty.util.log.Log$1.run(Log.java:122)
  [java]     at java.security.AccessController.doPrivileged(Native Method)
  [java]     at org.eclipse.jetty.util.log.Log.<clinit>(Log.java:85)
  [java]     ... 12 more
  [java] Java Result: 1

BUILD SUCCESSFUL
Total time: 1 second 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:28:15.330

不确定是什么原因造成的。似乎不知何故，您的 JVM 从 System.getProperties().propertyNames() 返回了一个空属性名称。在调用 cxf 代码之前，您可以尝试以下操作：

```
@SuppressWarnings("unchecked")
Enumeration<String> systemKeyEnum = (Enumeration<String>)System.getProperties().propertyNames();
while (systemKeyEnum.hasMoreElements()) {
    String key = systemKeyEnum.nextElement();
    String val = System.getProperty(key);
    System.out.println(key + ": " + val);
} 
```

看看这是否真的有效？

# javascript - 如何将 Jasmine 单元测试结果作为字符串返回？

> ID：13366318
> 
> 赞同：2
> 
> 时间：2012-11-13T18:14:31.383
> 
> 标签：javascript, unit-testing, jasmine

我不确定 Reporters 是否缺少某些东西，但有没有一种简单的方法来执行我的单元测试并将结果作为字符串检索，而不是弄乱控制台或 DOM？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T20:28:21.423

为此，您必须实现自己的`Reporter`记录结果并将其保存为文本格式。这是一个简短的示例，说明如何做到这一点：

```
function TextReporter() {
    this.textResult = "";
}

TextReporter.prototype = new jasmine.Reporter();

TextReporter.prototype.onRunnerFinished = function (callback) {
    this.callbackEnd = callback;
};

TextReporter.prototype.reportRunnerResults = function (runner) {        
    // When all the spec are finished //
    var result = runner.results();

    this.textResult += "Test results :: (" + result.passedCount + "/" + result.totalCount + ") :: " + (result.passed() ? "passed" : "failed");
    this.textResult += "\r\n";

    if (this.callbackEnd) {
        this.callbackEnd(this.textResult);
    }
};

TextReporter.prototype.reportSuiteResults = function (suite) {
    // When a group of spec has finished running //
    var result = suite.results();
    var description = suite.description;
}

TextReporter.prototype.reportSpecResults = function(spec) {
    // When a single spec has finished running //
    var result = spec.results();

    this.textResult += "Spec :: " + spec.description + " :: " + (result.passed() ? "passed" : "failed");
    this.textResult += "\r\n";
}; 
```

之后`HtmlReporter`，您可以使用您的`TextReporter`.

```
var jasmineEnv = jasmine.getEnv();
jasmineEnv.updateInterval = 1000;

var txtReporter = new TextReporter();
txtReporter.onRunnerFinished(function (text) {
    // Do something with text //
});

jasmineEnv.addReporter(txtReporter);

window.onload = function() {
    jasmineEnv.execute();
}; 
```

如果您需要有关自定义报告器的更多信息，您只需要知道它们必须实现[`Reporter`](https://github.com/pivotal/jasmine/blob/master/src/core/Reporter.js)接口。

# python - 对十六进制值使用比较运算符

> ID：13366323
> 
> 赞同：4
> 
> 时间：2012-11-13T18:14:43.703
> 
> 标签：python, comparison, hex

我想创建一个函数，仅当十六进制值指示大写或小写字母时，即十六进制代码在 20 和 7A 之间时，才执行特定任务。有没有办法在 python 中做一个逻辑上等同于的语句：

```
if a >= 20 and a <= 7A: perform stuff 
```

? 我只是在它前面扔一个 0x 并且魔法发生了吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-13T18:16:47.667

是的......你只需抛出一个0x，它就会变成数字......

或者 `int("7A",16) == 0x7A`

`0x20 <= a <= 0x7A` 您还可以像这样链接比较运算符（大致翻译为“在 val1 和 val2 之间”）

# java - 我可以从实时 JVM 中转储当前线程堆栈变量吗？

> ID：13366325
> 
> 赞同：12
> 
> 时间：2012-11-13T18:14:55.830
> 
> 标签：java, jvm, stack-trace, jvm-crash, yourkit

我需要查看 2 个死锁线程的堆栈来分析情况。它现在`JVM`是实时的并且数据在那里，但我需要某种工具来从流程中提取它。我只关心类型堆栈中的 6 个变量`String`。任何想法都非常感谢。`JVM`版本`6_35`，它是一个`linux`，`JMX`已启用，但我没有`profiler/debugger`配置连接。很难复制。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T23:53:57.180

我发现了一个使用堆转储查看器的小技巧（在本例中为 YourKit，但可能其他人也可以）。基本上，您枚举 Thread 类的所有实例，然后按名称找到所需的线程并打开它。堆栈变量被标记为**<local variable>**，如下所示：

[![在此处输入图像描述](../Images/edcc497dec422030f3fcb9b1d12e62cd.png)](https://i.stack.imgur.com/K7fiH.png)

并非所有变量都在这里，但所有作为参数传递给方法的变量都会显示出来。我想知道分析器是否可以更好地解决这个问题？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T18:17:48.567

你不能轻易做到这一点。普通`jstack`工具只会转储堆栈。从技术上讲，您可以尝试转储整个堆（使用`jmap`），但如果可能的话，寻找这个特定的变量可能会很痛苦。

请注意，出于安全原因，这并不容易实现。堆栈跟踪可以包含凭据或其他敏感数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T18:27:48.223

您可以向该进程发送一个[SIGQUIT 信号](https://stackoverflow.com/a/10955989/60462)，它将为您提供[转储并保持 VM](http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/java.html)在具有 Sun/Oracle JVM 的类 Unix 操作系统上运行，[IBM 的 JVM 也是](http://publib.boulder.ibm.com/infocenter/javasdk/v5r0/index.jsp?topic=/com.ibm.java.doc.diagnostics.50/diag/tools/javadump_trigger.html)如此——不确定输出是否适合您的目的，艰难的。可能类似于`jstack`/`jmap`在另一个答案中。

# php - 两个日期之间的小时差（整数）

> ID：13366328
> 
> 赞同：1
> 
> 时间：2012-11-13T18:15:03.103
> 
> 标签：php, datetime

> **可能重复：**
> [在 PHP 中计算 2 个日期之间的小时数](https://stackoverflow.com/questions/3108591/calculate-number-of-hours-between-2-dates-in-php)

如何在 PHP 中获取两个日期之间的差异小时数？我需要一个整数，因为我想知道是大于还是小于特定值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T18:17:26.953

尝试：

```
 $date1 = "2012-11-05 12:35:00";
 $date2 = "2012-11-07 14:35:00"; 
 $diff = strtotime($date2) - strtotime($date1);
 $diff_in_hrs = $diff/3600;
 print_r($diff_in_hrs); 
```

[手动的](http://php.net/manual/en/function.date.php)

[演示](http://codepad.org/1hkztJV7)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T18:20:10.483

如果您有最新的 PHP

```
$dateOne = new DateTime('2012-01-20 00:00:00');
$dateTwo = new DateTime('2012-01-21 02:00:00'); 
```

// 程序上 $interval = date_diff($dateOne, $dateTwo);

```
// Alternatively OOP style if supported
$interval = $dateOne->diff($dateTwo); 
```

见：[http ://www.php.net/manual/en/class.dateinterval.php](http://www.php.net/manual/en/class.dateinterval.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T18:19:21.067

```
<?php
$time1 = time();
$time2 = mktime(0,0,0,11,13,2012); // earlier today
echo ($time1 - $time2) / 3600; // 3600 seconds in hour
?> 
```

# algorithm - 检查算法复杂度的方法

> ID：13366329
> 
> 赞同：3
> 
> 时间：2012-11-13T18:15:03.817
> 
> 标签：algorithm, complexity-theory, big-o

我最近有一个朋友要求我解决他在求职面试中看到的一个问题：

> N 个元素被分成 k 个数组。找到一种算法，该算法返回 (k log N) 时间内是否有任何元素相同。

**请不要提供答案，我真的很想自己解决。**

我的问题是：是否有类似于正则表达式的网站来测试我的算法的复杂性？如果没有，是否有人对如何实际找到复杂性有任何建议？

我有一个大致的想法，但是自从我上次尝试做这样的问题以来已经有一段时间了。

**编辑：要添加到此的新问题。K Log N 与 N log N 相比如何。显然，当 K 为 1 时，它只是 log N，这比 O(n) 更有效，但如果 K >= n 它甚至比 N log N 更差，对吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T18:18:59.587

您通常通过推理和数学证明来发现算法的复杂性。在某些数据上运行算法不会给你真正的复杂性（`BigOh`或者`Theta`）它只会给你对所提供数据的一些估计。

例如，快速排序是*平均* `BigOh n log n`但最坏`BigOh n^2`的情况，如果您选择了错误的枢轴，则会发生最坏的情况。

您需要自己找出最坏的情况并进行分析。如果您在进行分析时需要帮助（或提醒），那么在美国主要大学的计算机科学类别中的 YouTube 或 iTunesU（例如 MIT 算法介绍）是一个不错的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T19:37:44.310

**编辑：要添加到此的新问题。K Log N 与 N log N 相比如何。显然，当 K 为 1 时，它只是 log N，这比 O(n) 更有效，但如果 K >= n 它甚至比 N log N 更差，对吗？**

要回答您的编辑，您可以在 k < n 时使用 klogn 算法，在 n < k 时使用 nlogn 算法

# asp.net - 基于 URL 查询字符串的登录行为 asp.net

> ID：13366335
> 
> 赞同：0
> 
> 时间：2012-11-13T18:15:18.293
> 
> 标签：asp.net, url, web-config, autologin, querystringparameter

我有以下问题，

在 web.config 中，我们有身份验证，表示对安全文件夹下文件的任何访问都将被重定向到登录页面

现在我需要做的改变是，如果请求来自特定域，则允许无需登录即可访问，即

如果 url 是[http://www.abc.com/secure/home.aspx](http://www.abc.com/secure/home.aspx) ---> 重定向到登录和用户 shud 登录

如果 url 是[http://www.abc.com/secure/home.aspx?uid=steve&fname=john](http://www.abc.com/secure/home.aspx?uid=steve&fname=john) ---> 他们应该能够访问 home.aspx 并且不应该被重定向到登录页面

我需要以这样的方式配置 web.config 文件，如果有任何参数与 url 一起发送，那么不要重定向

我怎样才能做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T06:58:04.190

我认为您需要在 web.config 中的 formsauthentication 规范中禁用重定向。然后，您将需要以与身份验证模块类似的方式进行自己的重定向。您需要将检查添加到应用程序管道。也就是global.asax.cs文件中，application_authenticaterequest方法？

# c# - 抑制 ac# 控制台应用程序中的控制台写入（来自其他组件）

> ID：13366337
> 
> 赞同：2
> 
> 时间：2012-11-13T18:15:28.260
> 
> 标签：c#, console-application

我有一个简单的控制台应用程序，它以格式良好的方式写出各种资源的状态。

此应用程序正在使用一些 3rd 方组件来连接到地点。

不幸的是，这些组件做了很多 Console.Writes（或某种日志记录），最终都与我的消息交织在一起。

我尝试重定向控制台输出（希望我可以过滤非我的消息），但这似乎只适用于我的消息。

```
var sb = new StringBuilder();
TextWriter tw = new StringWriter(sb);
Console.SetOut(tw); 
```

所以这适用于重定向控制台写入，但仅限于我所做的那些.. 来自 3rd 方组件的输出仍在流式传输到我的屏幕.. 还有其他方法来抑制它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:30:46.463

您无法重定向第三方组件输出的原因是因为您在您的流程上调用重定向，而不是他们的。为此，请遍历进程，找到正在写入控制台的进程并重定向它们的输出。

```
 using System.Diagnostics;

 Process[] processlist = Process.GetProcesses();

 foreach(Process theprocess in processlist){
       // you'll actually need to use something like the process name or id here.
       if (theprocess == MyThirdPartyComponentsProcess)
       {
             theprocess.StartInfo.UseShellExecute = false;
             theprocess.StartInfo.RedirectStandardOutput = true; 
        }
  } 
```

您必须以管理员身份运行此工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T18:34:06.087

我想到了一种相当老套的方法：

*   捕获现有的`Console.Out`，以便您可以在“真正的”作家中重用它
*   创建您自己的`TextWriter`实现，它...
*   ...当它被要求编写时，检查调用代码是否在您的程序集中。看[`Assembly.GetCallingAssembly`](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getcallingassembly.aspx)

只要您没有内联问题，您应该能够检查上下文，并删除您不想要的任何输出。请注意，您可能必须`Console.Out.WriteLine`直接调用而不是调用`Console.WriteLine`- 否则调用者将是`Console`类。

*更好*的解决方案是将您的代码更改为使用 log4net 或类似的东西，这样您就可以以更可配置的方式获得输出，而不是在控制台上 - 假设您自己的使用也是日志记录。（如果是用于交互式输出，类似上面的东西可能是唯一的方法......）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T22:07:53.823

因为似乎没有合理的快速方法来抑制这些，所以我选择了 B 计划，即将我的信息推迟到最后。这样所有的日志记录都通过了，然后我写出了我感兴趣的所有信息。

我将其分解为成功/警告/错误方法

```
 public static void WriteError(string message, params string[] args) {
        writerTasks.Add(() => {
            var c = Console.ForegroundColor;
            Console.ForegroundColor = ConsoleColor.Red;
            Console.WriteLine(message, args);
            Console.ForegroundColor = c;
        });
    } 
```

在执行结束时，我调用此方法将其清除。

```
 private static void WriteResults() {
        foreach (var t in writerTasks)
            t();
    } 
```

我这样做是因为我根据消息类型更改文本颜色，消息类型包含在每个操作中。

在我的情况下，这很好用，因为信息向上滚动隐藏所有日志记录..这实际上也是有益的..只是不希望它分散在主要输出之间

# magento - Magento 扩展未加载

> ID：13366344
> 
> 赞同：1
> 
> 时间：2012-11-13T18:15:56.150
> 
> 标签：magento, magento-1.7

我在本地机器上安装了全新的 Magento CE 1.7.0.2，但无法加载任何扩展。它们在 Magento Connect Manager 中正确安装并显示在已安装的列表中，但在管理界面中没有效果。

我之前已经成功安装了 Magento 和这些扩展，所以我不是一个完整的菜鸟。我正在尝试使用的扩展是这些（理论上都与 1.7 兼容）：

*   [http://www.magentocommerce.com/magento-connect/customer-experience/internationalization-localization/magento-community-modules-french-france-language-pack.html](http://www.magentocommerce.com/magento-connect/customer-experience/internationalization-localization/magento-community-modules-french-france-language-pack.html)
*   [http://www.magentocommerce.com/magento-connect/oscommerce-migration-tool.html](http://www.magentocommerce.com/magento-connect/oscommerce-migration-tool.html)

*这些扩展应该*发生的事情是：

*   管理界面应该是法语的（尽管来回切换到法语/其他语言，但仍然是英语）
*   在 System > Import/Export 下应该有一个“oscommerce”菜单项（不存在）

我尝试过的（很多次和所有可能的组合）：

*   注销并重新登录
*   刷新所有缓存
*   删除所有cookies，退出浏览器，重启apache，重启机器
*   重新安装/卸载两个扩展
*   使用干净的数据库和干净的文件系统重新安装 Magento

我已经按照安装说明进行了 T 恤。Magento 处于开发者模式（.htaccess 中的“SetEnv MAGE_IS_DEVELOPER_MODE 1”和“php_flag display_errors On”）。日志中没有相关错误，也没有 PHP 错误。*www 用户（在其下运行 apache 进程）具有对整个*目录的完全写入权限（也仅尝试了 /var、/app/etc 和 /）

有人可以告诉我我做错了什么吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:32:59.577

在您的 magento 安装的根目录上执行 chmod -R 777 以测试模块是否开始工作。

# stringtemplate - StringTemplate 3：如何过滤列表？

> ID：13366345
> 
> 赞同：1
> 
> 时间：2012-11-13T18:15:59.960
> 
> 标签：stringtemplate

如何使用地图从列表中删除特定元素（=多值属性）？例如，假设我想过滤掉给定列表中的所有 b：

```
<["a", "b", "c", "b"]: {<table.(it)>}; separator=",">
table ::= ["b":, default: key] 
```

期望的结果是“a,c”，但实际结果是“a,,c”空值。所以他们也不会使用 strip() 函数。

所以问题是，是否可以通过稍微修改上面的代码来使用地图过滤列表？

**更新**

我找到了一种解决方法：

```
filter(it) ::= "<if(it)><it><endif>"
<["a", "b", "c", "b"]: {<table.(it)>}: filter(); separator=","> 
```

这给出了我想要的结果：a，c

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:43:34.307

可能不想在您的模板中过滤，但仍然可能是一个错误。

好的，我检查过了。这给出了 empty not null 所以它认为它是一个项目。ST 以相同的方式处理错误条件：空不为空。我认为您需要在模型中进行过滤。

# c# - 无法投射 System.Runtime.Remoting.ObjectHandle

> ID：13366352
> 
> 赞同：10
> 
> 时间：2012-11-13T18:16:20.823
> 
> 标签：c#, c#-4.0

在我的代码中，我有一个接口 - 可以说它的调用`InterfaceName`和它的实现调用`InterfaceImpl`。现在，当我动态尝试`InterfaceImpl`使用以下代码获取时：

```
object obj = Activator.CreateInstance("ProjectName","ProjectName.Folder.InterfaceImpl");
InterfaceName in = (InterfaceName)obj; //Error pops up here 
```

我收到以下错误

```
Unable to cast object of type 'System.Runtime.Remoting.ObjectHandle' to type 'ProjectName.Folder.InterfaceName'. 
```

关于可能出现问题的任何建议？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-13T18:28:37.247

[如果您阅读有关您正在调用的方法的文档](http://msdn.microsoft.com/en-us/library/d133hta4.aspx)，它会返回

> 必须解包才能访问新创建的实例的句柄。

查看 的文档`ObjectHandle`，您只需调用[Unwrap()](http://msdn.microsoft.com/en-us/library/system.runtime.remoting.objecthandle.unwrap.aspx)即可获取您尝试创建的类型的实例。

所以，我想你真正的问题是......为什么？

此方法设计为在另一个中调用`AppDomain`，并将句柄返回给调用`AppDomain`，其中实例的代理被“解包”。

什么？这不解释为什么？

只有两种类型可以跨越`AppDomain`障碍。可序列化的类型（创建副本）和扩展[MarshalByRefObject](http://msdn.microsoft.com/en-us/library/system.marshalbyrefobject.aspx)的类型（创建并传递 *代理）。*`ObjectHandle`extends `MarshalByRefObject`，因此可以跨越该`AppDomain`障碍，而它们所代表的类型可能不会扩展 MBRO*或*可序列化。此方法确保您可以通过障碍获得该类型实例，无论如何。

所以，如果你只是想实例化一个类型，你可能想看看 CreateInstance 的不同重载。或者只是打开结果。

```
var obj = Activator.CreateInstance("A","A.B.C") as ObjectHandle;
InterfaceName in = (InterfaceName)obj.Unwrap(); 
```

# c++ - C++ 将 DWORD 值写入某个注册表项的所有子项

> ID：13366354
> 
> 赞同：1
> 
> 时间：2012-11-13T18:16:38.530
> 
> 标签：c++, registry, key, dword

我无法编写我为我找到工作的代码。

**现在**：它在注册表中的 Interface 文件夹（注册表项）中添加了 2 个 DWORD 值。

**期望**：我希望它将这 2 个 DWORD 值添加到接口注册表项（文件夹）的所有子项（子文件夹）中。

我有这个伪代码：

*   使用 RegOpenKey 或 RegOpenKeyEx 打开父密钥
*   在循环中使用 RegEnumKey 或 RegEnumKeyEx 枚举父级的所有子键
*   对于每个子键，使用 RegSetValueEx 设置所需的值
*   使用 RegCloseKey 关闭父键

我会继续努力解决这个问题，但也许有人可以帮忙？

```
#ifndef WIN32_LEAN_AND_MEAN
#define WIN32_LEAN_AND_MEAN
#endif

#include <windows.h>
#include <iostream>

using std::cout;
using std::endl;

HKEY OpenKey(HKEY hRootKey, wchar_t* strKey)
{
    HKEY hKey;
    LONG nError = RegOpenKeyEx(hRootKey, strKey, NULL, KEY_ALL_ACCESS, &hKey);
    if(nError==ERROR_FILE_NOT_FOUND)
    {
        cout << "Creating registry key: " << strKey << endl;
        nError = RegCreateKeyEx(hRootKey, strKey, NULL, NULL, REG_OPTION_NON_VOLATILE,KEY_ALL_ACCESS,NULL, &hKey, NULL);
    }
    if(nError)
    {
        cout << "Error: " << nError << " Could not find or create " << strKey << endl;
    }
    return hKey;
}

void SetVal(HKEY hKey, LPCTSTR lpValue, DWORD data)
{
    LONG nError = RegSetValueEx(hKey, lpValue, NULL, REG_DWORD, (LPBYTE)&data, sizeof(DWORD));
    if(nError)
    {
        cout << "Error: " << nError << " Could not set registry value: " << (char*)lpValue << endl;
    }
}

DWORD GetVal(HKEY hKey, LPCTSTR lpValue)
{
    DWORD data;
    DWORD size = sizeof(data);
    DWORD type = REG_DWORD;
    LONG nError = RegQueryValueEx(hKey, lpValue, NULL, &type, (LPBYTE)&data, &size);
    if(nError==ERROR_FILE_NOT_FOUND)
    {
        data = 0;    // The value will be created and set to data next time SetVal() is called.
    }
    else if(nError)
    {
        cout << "Error: " << nError << " Could not get registry value " << (char*)lpValue << endl;
    }
    return data;
}

int main()
{
    static DWORD v1, v2;
    HKEY hKey = OpenKey(HKEY_LOCAL_MACHINE,L"SYSTEM\\CurrentControlSet\\services\\Tcpip\\Parameters\\Interfaces\\");
    v1 = GetVal(hKey, L"Registry Value1");
    v2 = GetVal(hKey, L"Registry Value2");
    v1 += 5;
    v2 += 2;
    SetVal(hKey, L"Registry Value1", v1);
    SetVal(hKey, L"Registry Value2", v2);
    RegCloseKey(hKey);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T23:57:39.760

这是一个没有任何额外内容的最小示例：

```
// open desired key whose subkeys shall be enumerated
HKEY hKey={0};
LPCTSTR path=TEXT("SYSTEM\\CurrentControlSet\\services\\Tcpip\\Parameters\\Interfaces");
if(RegOpenKeyEx(HKEY_LOCAL_MACHINE,path,0,KEY_ENUMERATE_SUB_KEYS,&hKey) != ERROR_SUCCESS)
    return; // failed to open
DWORD index=0;           // enumeration index
TCHAR keyName[256]={0};  // buffer to store enumerated subkey name
DWORD keyLen=256;        // buffer length / number of TCHARs copied to keyName
// enumerate subkey names of hKey, result stored in keyName, keyLen set to strlen(keyName)
while(RegEnumKeyEx(hKey,index++,keyName,&keyLen,0,0,0,0) == ERROR_SUCCESS) {
    keyLen=256; // reset buffer length (RegEnumKeyEx changes this value)
    // open the subkey and set the desired value(s)
    HKEY hSubKey={0};
    if(RegOpenKeyEx(hKey,keyName,0,KEY_SET_VALUE,&hSubKey) == ERROR_SUCCESS) {
        // set desired value(s):
        DWORD myValue = 0xCAFEBABE;
        //RegSetValueEx(hSubKey,TEXT("MyValueName"),0,REG_DWORD,(LPBYTE)&myValue,sizeof(DWORD));
        RegCloseKey(hSubKey); // close sub key
    } 
    // else: failed to open subkey
}
// RegEnumKeyEx either returns ERROR_SUCCESS, ERROR_NO_MORE_ITEMS, or a system error code
RegCloseKey(hKey); // close key 
```

请注意，此示例不评估错误代码。它只是演示了枚举子键和设置值的过程。RegOpenKeyEx 访问权限设置为执行此任务所需的最低权限（将它们设置为您希望对打开的密钥执行的任何操作）。while 循环与 ERROR_NO_MORE_ITEMS （一旦没有更多子项要枚举）或实际错误没有区别。为安全起见，RegSetValueEx 被注释掉，它的返回值被忽略。

# php - 在 PHP 中处理文件系统函数的错误和警告的正确方法是什么？

> ID：13366361
> 
> 赞同：5
> 
> 时间：2012-11-13T18:17:12.443
> 
> 标签：php, exception-handling, error-handling

使用[文件系统函数](http://www.php.net/manual/en/ref.filesystem.php)时，处理错误的正确方法是什么，例如：

> 警告：symlink()：在第 XXX 行的 /path-to-script/symlink.php 中没有这样的文件或目录

我通常的方法是在调用文件系统函数之前检查任何可能产生错误的条件。但是，如果命令由于我没有预见到的原因而失败，我如何捕捉错误以向用户显示更有用的消息？

这是创建符号链接的代码的简化：

```
$filename = 'some-file.ext';
$source_path = '/full/path/to/source/dir/';
$dest_path = '/full/path/to/destination/dir/';

if(file_exists($source_path . $filename)) {
    if(is_dir($dest_path)) {
        if( ! file_exists($dest_path . $filename)) {
            if (symlink($source_path . $filename, $dest_path . $filename)) {
                echo 'Success';
            } else {
                echo 'Error';
            }
        }
        else {
            if (is_link($dest_path . $filename)) {
                $current_source_path = readlink($dest_path . $filename);
                if ( $current_source_path == $source_path . $filename) {
                    echo 'Link exists';
                } else {
                    echo "Link exists but points to: {$current_source_path}";
                }
            } else {
                echo "{$source_path}{$filename} exists but it is not a link";
            }
        }
    } else {
        echo "{$source_path} is not a dir or doesn't exist";
    }
} else {
    echo "{$source_path}{$filename} doesn't exist";
} 
```

**跟进/解决方案**

正如 Sander 所建议的那样，`set_error_handler()`用于将错误和警告转换为异常。

```
function exception_error_handler($errno, $errstr, $errfile, $errline ) {
    throw new ErrorException($errstr, $errno, 0, $errfile, $errline);
}

set_error_handler("exception_error_handler");

try {
    symlink($source_path . $filename, $dest_path . $filename);
    echo 'Success';
}
catch (ErrorException $ex) {
    echo "There was an error linking {$source_path}{$filename} to {$dest_path}{$filename}: {$ex->getMessage()}";
}

restore_error_handler(); 
```

使用 @ 运算符是另一种解决方案（[尽管有些人建议尽可能避免使用它](https://stackoverflow.com/questions/136899/suppress-error-with-operator-in-php)）：

```
if (@symlink($source_path . $filename, $dest_path . $filename)) {
    echo 'Success';
} else {
    $symlink_error = error_get_last();        
    echo "There was an error linking {$source_path}{$filename} to {$dest_path}{$filename}: {$symlink_error['message']}";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T18:25:01.830

我想你想设置一个抛出异常的错误处理程序：

```
function exception_error_handler($errno, $errstr, $errfile, $errline ) {
    // see http://php.net/manual/en/class.errorexception.php
    throw new ErrorException($errstr, $errno, 0, $errfile, $errline);
}

set_error_handler("exception_error_handler"); 
```

那么您的代码将是：

```
try {
    symlink(); // when an error occured, it jumps to the catch
} catch (ErrorException $ex) {
    // do stuff with $ex
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T18:29:53.257

我建议使用广泛使用并经过测试的文件系统操作解决方案的 Fileysystem 组件[https://github.com/symfony/Filesystem/blob/master/Filesystem.php#L248](https://github.com/symfony/Filesystem/blob/master/Filesystem.php#L248)

# security - HSTS 标头真的有助于抵御 MITM 攻击吗？

> ID：13366363
> 
> 赞同：4
> 
> 时间：2012-11-13T18:17:24.690
> 
> 标签：security, http, owasp, transport, man-in-the-middle

我在 [https://www.owasp.org/index.php/HTTP_Strict_Transport_Security#Browser_Support](https://www.owasp.org/index.php/HTTP_Strict_Transport_Security#Browser_Support)阅读了 OWASP 的 HSTS 备忘单， 还观看了相关视频： [https ://www.youtube.com/watch?v=zEV3HOuM_Vw](https://www.youtube.com/watch?v=zEV3HOuM_Vw)

但我仍然不明白这在用户输入 http://site.com 的情况下如何帮助抵御中间人攻击。OWASP 声称它有帮助。

让我们想象以下场景：中间人从受害者那里获得请求：http://site.com。然后他自己向 https://site.com 发起 HTTPS 请求并将内容返回给用户，剥离 HSTS 标头。攻击者可以看到所有进一步的用户输入。

在我看来，除非我们从一开始就使用 HTTPS，否则没有办法防范 MITM。

HSTS 标头真的有助于抵御 MITM 攻击吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T20:08:21.797

只有当用户代理之前访问过该站点并且在第一次访问时没有来自 MITM 的干扰时，HSTS 才会有所帮助。换句话说，您第一次访问该站点时很容易受到攻击，但以后再也不会了。

由于您第一次仍然很脆弱，因此 HSTS 远非完美。但这总比没有好，因为它*确实可以*防止在您之前访问过该站点之后以您为目标的攻击者。

（除非用户第一次小心使用 https：在这种情况下，他们第一次受到保护，并且还可以防止在所有后续访问中忘记使用 https。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T17:49:48.283

Firefox 也在开发 HSTS 预加载列表：[http ://blog.mozilla.org/security/2012/11/01/preloading-hsts/](http://blog.mozilla.org/security/2012/11/01/preloading-hsts/)

浏览器通常将 HSTS 信息保存在某种形式的依赖于实现的安全存储中。当然，对于 Firefox 和 Chrome，代码是可浏览的。参见例如[https://code.google.com/p/chromium/source/search?q=stsheader&origq=stsheader&btnG=Search+Trunk](https://code.google.com/p/chromium/source/search?q=stsheader&origq=stsheader&btnG=Search+Trunk)

# java - 用于级联删除单向关系的 JPA 2.0 本机注释

> ID：13366369
> 
> 赞同：3
> 
> 时间：2012-11-13T18:17:36.087
> 
> 标签：java, hibernate, postgresql, jpa, jpa-2.0

这个问题与[此](https://stackoverflow.com/questions/7197181/jpa-unidirectional-many-to-one-and-cascading-delete)有关，因为我在孩子和父母之间有一种单向`@ManyToOne`关系。孩子条目有几十万，我不希望父母`@OneToMany`与孩子有关系。

一切正常，除了删除父级是不可能的，除非我先删除子级，我希望通过`ON DELETE CASCADE`. 我正在使用 Postgres 9。我也在使用 JPA 2.0/Hibernate 4.1.7。

我目前正在使用 Hibernate 的自动 DDL 创建功能，因为我经常移动东西，所以我不想`ON DELETE CASCADE`在表上手动添加，因为它们将在下一轮我做一些更改时被删除。

有什么方法可以将`ON DELETE CASCADE`约束/触发器作为 JPA`@ManyToOne`注释的一部分放在子实体中？这样数据库就会自动正确创建。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T19:35:16.693

使用 JPA 注释，不。但是休眠有`@org.hibernate.annotations.OnDelete`。

```
 @ManyToOne
    @JoinColumn
    @OnDelete( action = OnDeleteAction.CASCADE )
    private Parent parent; 
```

EG 正在讨论在 JPA 2.1 中添加类似的内容

# math - 使用三次贝塞尔曲线作为直线：控制点必须位于哪里才能获得 t 的等距间距

> ID：13366370
> 
> 赞同：4
> 
> 时间：2012-11-13T18:17:38.253
> 
> 标签：math, geometry, bezier

当三次贝塞尔曲线的两个控制点都位于曲线的两个端点之间的直线上时，生成的曲线将是直线。在我的情况下，问题是我获得的不同 t 曲线上点的实际间距根据控制点在该线上的位置而变化。

如果我使用 p1 和 p2 之间的 lerp 计算两个控制点的位置，如下所示：

```
controlPoint1 = endPoint1.lerp(endPoint2,a);
controlPoint2 = endPoint1.lerp(endPoint2,b); 
```

必须有一种 a,b 配置，其中间距实际上是等距的。我尝试了 0.25/0.75、0.3333/0.6666、0.5/0.5，但这些似乎都没有。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T18:47:00.007

我相信 [0, 1/3, 2/3, 1] =[a, b, c, d] 是正确的答案。

至少对于这些值，递归二等分

```
e = a*(1-t)+b*t, f=b*(1-t)+c*t, g=c*(1-t)+d*t,  
h = e*(1-t)+f*t, i=f*(1-t)+g*t,  
j = h*(1-t)+i*t, 
```

对所有值给出 j=t。

# ruby-on-rails-3.2 - 我可以在 Rails 3.2 资产管道中强制加载 javascripts 的顺序吗？

> ID：13366374
> 
> 赞同：1
> 
> 时间：2012-11-13T18:17:47.820
> 
> 标签：ruby-on-rails-3.2, asset-pipeline

我有一些已复制到的 javascript：

```
app/assets/javascripts 
```

主要是 jQuery 插件。其中一些我需要按特定顺序加载。我正在尝试在我的 Ajax 应用程序中启用后退按钮支持。

如何对`application.js`文件中未明确列出的树项施加加载顺序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T18:28:20.633

你的 jQuery 插件应该放在`lib/assets/javascripts`或`vendor/assets/javascripts`.

然后在您的 application.js 清单中，只需按照您想要的任何顺序包含它们：

```
//= require_tree .
//= require jquery.first_plugin
//= require jquery.first_plugin 
```

`require_tree`不会加载里面的内容和`lib`文件`vendor`夹

# c# - 自定义 HtmlHelper 返回编码的 html

> ID：13366382
> 
> 赞同：1
> 
> 时间：2012-11-13T18:18:27.793
> 
> 标签：c#, asp.net-mvc-3, html-helper

我在做一个自定义的 htmlhelper，它的目的是构建一个`ul`，问题是它返回`encoded html`并且我无法绕过它。我尝试使用`html.raw()`没有成功。想法？

HtmlHelper

```
public static MvcHtmlString TopMenu(this HtmlHelper helper, IEnumerable<string> names)
{
    var ulTag = new TagBuilder("ul");

    foreach (var name in names)
    {
        var liTag = new TagBuilder("li");

        liTag.SetInnerText(string.Format("<img src='{0}' alt='alt' />{1}", name, name));
        ulTag.InnerHtml += liTag.ToString(TagRenderMode.Normal);
    }

        return MvcHtmlString.Create(ulTag.ToString(TagRenderMode.Normal));
} 
```

我的观点

```
@Html.Raw(Html.TopMenu(CodeTesting.Models.NamesList.Names(20))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:21:06.913

`liTag.SetInnerText()`转义您传递的**文本**。
你想设置`liTag.InnerHtml`.

此外，您需要 HTML-escape `name`。

# option - Dust.js 如何使用@eq 在模板中设置选定的选项

> ID：13366385
> 
> 赞同：1
> 
> 时间：2012-11-13T18:18:30.177
> 
> 标签：option, selected, dust.js

我一直在尝试使用dust.js，使用主页创建模板（http://akdubya.github.com/dustjs/）。我只是想在选择框中设置选定的选项。这是我的数据模型：

```
{
  "name": "SOME NAME",
  "favorite_food": 1,
  "food_options": [{id:1, value: "Ice Cream"},{id:2, value: "Pizza"},{id:3, value:    "Fish"}]
} 
```

我想通过将 food_options 数组中的 id 匹配到 favorite_food 属性来设置选定的选项。这是我的模板：

```
<h1>{name}</h1>
<select>
  {#food_options}
    <option value="{id}"{@eq key=id value=favorite_food}  selected="true"{/eq} >
     {value}
    </option>
  {/food_options}
</select> 
```

看起来它应该很简单，我尝试了各种变化，但无法让它发挥作用。非常感谢任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T18:37:17.290

您希望的 Dust 助手实际上是 Dust.js 的 LinkedIn 分支的一部分。为了能够使用这些助手，请尝试使用此站点：

[http://linkedin.github.com/dustjs/test/test.html](http://linkedin.github.com/dustjs/test/test.html)

Dust 的 LinkedIn 分支：

[https://github.com/linkedin/dustjs](https://github.com/linkedin/dustjs)

DustJs 助手：

[https://github.com/linkedin/dustjs-helpers](https://github.com/linkedin/dustjs-helpers)

# json - ServiceStack.Text.JsonObject.Parse 与 NewtonSoft.Json.Linq.JObject.Parse 的“动态”实例嵌套树？

> ID：13366387
> 
> 赞同：4
> 
> 时间：2012-11-13T18:18:53.810
> 
> 标签：json, json.net, servicestack

我想尝试 ServiceStack 的 json 解析，但我已经想出了如何通过 Newtonsoft 做一些我需要的事情。可以通过 ServiceStack 完成同样的事情吗？

我已经尝试使用注释掉的代码，但它给出了异常，请参阅下面的异常详细信息。

谢谢！

乔什

```
 [Test]
    public void TranslateFromGitHubToCommitMessage()
    {
        const string json =
@"
{
'commits': 
[
    {
      'author': {
        'email': 'dev@null.org',
        'name': 'The Null Developer'
      },
      'message': 'okay i give in'
    },
    {
      'author': {
        'email': 'author@github.com',
        'name': 'Doc U. Mentation'
      },
      'message': 'Updating the docs, that\'s my job'
    },
    {
      'author': {
        'email': 'author@github.com',
        'name': 'Doc U. Mentation'
      },
      'message': 'Oops, typos'
    }
]
}
";
        dynamic root = JObject.Parse(json);
        //dynamic root = ServiceStack.Text.JsonSerializer.DeserializeFromString<JsonObject>(json);
        //dynamic root = ServiceStack.Text.JsonObject.Parse(json);

        var summaries = new List<string>();

        foreach (var commit in root.commits)
        {
            var author = commit.author;
            var message = commit.message;
            summaries.Add(string.Format("{0} <{1}>: {2}", author.name, author.email, message));
        }            

        const string expected1 = "The Null Developer <dev@null.org>: okay i give in";
        const string expected2 = "Doc U. Mentation <author@github.com>: Updating the docs, that's my job";
        const string expected3 = "Doc U. Mentation <author@github.com>: Oops, typos";

        Assert.AreEqual(3, summaries.Count);
        Assert.AreEqual(expected1, summaries[0]);
        Assert.AreEqual(expected2, summaries[1]);
        Assert.AreEqual(expected3, summaries[2]);
    } 
```

**例外详情**

使用第一个注释掉的行时：

```
dynamic root = ServiceStack.Text.JsonSerializer.DeserializeFromString<JsonObject>(json); 
```

调用该方法时会发生此异常。

空引用异常：

```
at ServiceStack.Text.Common.DeserializeListWithElements`2.ParseGenericList(String value, Type      createListType, ParseStringDelegate parseFn)
at ServiceStack.Text.Common.DeserializeEnumerable`2.<>c__DisplayClass3.<GetParseFn>b__0(String value)
at ServiceStack.Text.Common.DeserializeSpecializedCollections`2.<>c__DisplayClass7\.  <GetGenericEnumerableParseFn>b__6(String x)
at ServiceStack.Text.Json.JsonReader`1.Parse(String value)
at ServiceStack.Text.JsonSerializer.DeserializeFromString[T](String value)
at GitHubCommitAttemptTranslator.Tests.GitHubCommitAttemptTranslatorTests.TranslateFromGitHubToCommitMessage() 
```

而且，第二个：

```
dynamic root = ServiceStack.Text.JsonObject.Parse(json);

var summaries = new List<string>();

foreach (var commit in root.commits) // <-- Happens here 
```

“ServiceStack.Text.JsonObject”不包含“提交”的定义

**注意：**如果我使用第一行的代码，则消息为“字符串”不包含“提交”的定义，但将类型更改为或改为

```
at CallSite.Target(Closure , CallSite , Object )
at System.Dynamic.UpdateDelegates.UpdateAndExecute1[T0,TRet](CallSite site, T0 arg0)
at GitHubCommitAttemptTranslator.Tests.GitHubCommitAttemptTranslatorTests.TranslateFromGitHubToCommitMessage() 
```

**从 .NET 4.0 ServiceStack 使用 DynamicJson 之后**

参考mythz的评论： [这个测试用例](https://github.com/ServiceStack/ServiceStack/blob/master/tests/RazorRockstars.Console.Files/DynamicJsonTests.cs)有效，但如果我像下面这样修改它：

```
var dog = new { Name = "Spot", Parts = new { Part1 = "black", Part2 = "gray" }, Arr = new [] { "one", "two", "three"} };
var json = DynamicJson.Serialize(dog);
var deserialized = DynamicJson.Deserialize(json); 
```

然后，deserialized.Name 和 Parts 都可以，但 Arr 是字符串类型。

还：

如果我使用 ' 引号，它似乎不起作用。这正常吗？json2 有效（在某种程度上 Arr 仍然是一个字符串），但 json3 根本不起作用。它只是返回

```
Immediate Window:

deserialized = DynamicJson.Deserialize(json3);
{}
base {System.Dynamic.DynamicObject}: {}
_hash: Count = 1

----- code: -----
        var json2 =
            @"
        {
          ""Name"": ""Spot"",
          ""Parts"": {
            ""Part1"": ""black"",
            ""Part2"": ""gray""
          },
          ""Arr"": [
            ""one"",
            ""two"",
            ""three""
          ]
        }";

        var json3 =
            @"
        {
          'Name': 'Spot',
          'Parts': {
            'Part1': 'black',
            'Part2': 'gray'
          },
          'Arr': [
            'one',
            'two',
            'three'
          ]
        }";

        var deserialized = DynamicJson.Deserialize(json1); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T18:43:22.583

ServiceStack 的 JSON Serializer 还支持动态解析，请参阅wiki 页面的[Dynamic JSON 部分](https://github.com/ServiceStack/ServiceStack.Text#supports-dynamic-json)中如何解析 GitHub 的 JSON 的示例。

# python - Python EasyGUI-整数框界限

> ID：13366395
> 
> 赞同：1
> 
> 时间：2012-11-13T18:19:37.877
> 
> 标签：python, parameters, easygui

我正在使用 EasyGUI 作为我正在编写的小程序的一部分。在其中，我使用的是 IntegerBox“函数”。

该函数的部分参数是下界和上界（输入值的限制）。如果该值低于下限或超过上限，则程序会引发错误。

仅对于此程序，我想删除下限/上限---因此可以放入任何数字。

我的代码是：

```
import easygui as eg
numMin=eg.integerbox(msg="What is the minimum value of the numbers?"
                   , title="Random Number Generator"
                   , default=0
                   , lowerbound=
                   , upperbound=
                   , image=None
                   , root=None
                   ) 
```

我还没有输入任何内容，因为我不知道该输入什么。任何投入将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T19:05:28.620

当所有其他方法都失败时，尝试阅读文档（即，如果有的话；-）。

使用 EasyGui，虽然是单独下载，但该[网页](http://sourceforge.net/projects/easygui/files/0.97/)`easygui-docs-0.97.zip`上显示的文件。以下是该函数的 API 部分中的说明：`integerbox()`

![easygui 整数框文档的屏幕截图](../Images/d0e25d3107254a8b62224542f18eb182.png)

所以，要回答你的问题，**不**，似乎没有办法禁用模块的边界检查`integerbox()`。

**更新**：这是一个你可以**添加**到模块中的新函数，它根本不做边界检查，也不接受边界参数（因此它与股票版本不严格调用兼容）。如果您将其放入，请务必将其名称 , 添加到模块脚本文件顶部附近的列表`'integerbox2'`定义中。`__all__`

如果您想尽量减少对`easygui`模块脚本本身的更改，以防将来有更新，您可以将新函数放在单独的`.py`文件中，然后`import integerbox2`在顶部附近添加一个`easygui.py`（加上另一行将其添加到`__all__`）。

这是附加功能：

```
#-------------------------------------------------------------------
# integerbox2 - like integerbox(), but without bounds checking.
#-------------------------------------------------------------------
def integerbox2(msg=""
               , title=" "
               , default=""
               , image=None
               , root=None):
    """
    Show a box in which a user can enter an integer.

    In addition to arguments for msg and title, this function accepts
    an integer argument for "default".

    The default argument may be None.

    When the user enters some text, the text is checked to verify that it
    can be converted to an integer, **no bounds checking is done**.

    If it can be, the integer (not the text) is returned.

    If it cannot, then an error msg is displayed, and the integerbox is
    redisplayed.

    If the user cancels the operation, None is returned.

    :param str msg: the msg to be displayed
    :param str title: the window title
    :param str default: The default value to return
    :param str image: Filename of image to display
    :param tk_widget root: Top-level Tk widget
    :return: the integer value entered by the user

    """
    if not msg:
        msg = "Enter an integer value"

    # Validate the arguments and convert to integers
    exception_string = ('integerbox "{0}" must be an integer.  '
                        'It is >{1}< of type {2}')
    if default:
        try:
            default=int(default)
        except ValueError:
            raise ValueError(exception_string.format('default', default,
                                                     type(default)))

    while 1:
        reply = enterbox(msg, title, str(default), image=image, root=root)
        if reply is None:
            return None
        try:
            reply = int(reply)
        except:
            msgbox('The value that you entered:\n\t"{}"\n'
                   'is not an integer.'.format(reply), "Error")
            continue
        # reply has passed validation check, it is an integer.
        return reply 
```

# javascript - 全高标题图片

> ID：13366396
> 
> 赞同：0
> 
> 时间：2012-11-13T18:19:38.977
> 
> 标签：javascript, jquery, html, css, responsive-design

我在这里看这个网站： [platetheslate](http://www.platetheslate.com/)

我从这里的另一个用户问题中找到了它，但我有自己的问题。

他们如何制作标题图像`FULL HEIGHT`？我知道您甚至可以使用 CSS“封面”元素获得完整的宽度/高度，但这不是我想要的。

他们是如何设置它的，所以无论您的显示器/窗口大小如何，它都会占据全屏（高度），无论您总是看到照片，直到您向下滚动。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:22:51.710

这应该与高度成比例地缩放宽度。

```
#id {
    position: relative;
    height: 100%;
    width: auto;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T18:23:07.787

在标题的 css 类中，做`height: 100%`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T18:24:40.830

请注意，他们的 Javascript 在这里未缩小：[http ://www.platetheslate.com/wp-content/themes/twentyeleven/js/jquery.main.js](http://www.platetheslate.com/wp-content/themes/twentyeleven/js/jquery.main.js)

这是设置图像高度和宽度的方法：

```
//initHImage
function initHImage() {
    var minWidth = 1100;
    var holder = jQuery('#h-image');
    var image = holder.find('img');
    var win = jQuery(window);
    var ratio = image.width() / image.height()

    image.removeAttr('height width');
    holder.css({
        overflow: 'hidden',
        position: 'relative'
    });

    function setSize() {
        var winW = win.width();
        var winH = win.height();
        var W = Math.max(winW, minWidth);
        var winRatio = W / winH;

        holder.css({
            width: W,
            height: winH
        });

        if(winRatio > ratio) {
            image.css({
                width: W,
                height: W / ratio,
                marginTop: Math.min((W - W / ratio) / 2, 0),
                marginLeft: 0
            });
        }
        else {
            image.css({
                width: winH * ratio,
                height: winH,
                marginTop:0,
                marginLeft: Math.min((W - winH * ratio) / 2, 0)
            });
        }
    }
    setSize();

    win.bind('resize orientationchange', setSize);
} 
```

# c# - 您应该在字段变量、属性和构造函数上使用 XML 注释吗？

> ID：13366400
> 
> 赞同：1
> 
> 时间：2012-11-13T18:19:59.313
> 
> 标签：c#, xml-comments

到目前为止，我知道对类方法进行 XML 注释是一种很好的做法，但是对于您应该使用多少 XML 注释有一个标准吗？

我应该使用它们来记录字段变量、属性和构造函数还是只是矫枉过正？

浏览了网络，但看不到此类事情的任何硬性规定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T18:38:43.713

使用 XML 注释而不是简单的英语有两个原因：

1.  如果注释遵循正确的格式，它们将显示在 IntelliSense 中，这意味着当我使用您的课程时，我可以看到这`int a`应该是计数，或者我在使用 .NET 方法时看到有用信息的任何相同方式，

2.  如果您使用 Microsoft 支持的 XML 格式，您可以使用 SandCastle 或类似的第三方实用程序创建 html（或其他格式）文档。

因此，如果您花时间写评论，您不妨将它们设为 VS 鼓励的 XML 评论。

# matlab - 从 .dat 文件导入特定列和行范围

> ID：13366405
> 
> 赞同：0
> 
> 时间：2012-11-13T18:20:14.130
> 
> 标签：matlab, textscan

我将如何从以下 .dat 文件的第四行导入数据：

```
#0  Date-time:  07/06/2011 09:13:53
#1  Recorder:   10T2607
#2  File type:  1
#3  Columns:    3
#4  Channels:   1
#5  Field separation:   0
#6  Decimal point:  0
#7  Date def.:  0   0
#8  Time def.:  0
#9  Channel 1:  Temperature(°C) Temp(°C)    3   1
#11 Reconvertion:   0
#19 Line color: 1   2   3   4
#30 Trend Type Number:  1
#33 Limit Temp. Corr. OTCR: 0
1   07.04.11 08:00:00   17,433
2   07.04.11 08:05:00   17,446
3   07.04.11 08:10:00   17,458
4   07.04.11 08:15:00   17,458 
```

因此，按照以#33 开头的行，我想导入 17,433（应该是 17.433），然后导入 17,446，依此类推。我试图通过指定数据从第 13 行开始来使用 textscan 和 headerlines：

```
filename = 'Folder\data.dat');
fid = fopen(filename);
data = textscan(fid,'%f\t%f\t%f\t%f\n','Headerlines',13);
fclose(fid); 
```

但是，这不起作用（在 MATLAB 返回一个空数组的意义上）。我猜这是因为第二列和第三列不是浮点数，但是，当我将它指定为字符串时它也不起作用。接下来我应该尝试什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:10:32.770

首先，请注意您有 14 个标题行。

对于数据导入，您可以尝试以下操作：

```
filename = 'Folder\data.dat';
fid = fopen(filename);
data = textscan(fid,'%f\t%s\t%s\t%s','Headerlines',14);
a = cellfun(@(x) str2num(strrep(x, ',', '.')), data{4});
fclose(fid); 
```

这导致

```
a =
   17.4330
   17.4460
   17.4580
   17.4580 
```

# python - Pythonic do-while 循环

> ID：13366406
> 
> 赞同：5
> 
> 时间：2012-11-13T18:20:23.660
> 
> 标签：python, do-while

虽然 python 没有明确允许 do-while 循环，但至少有 3 种合理的方法来实现它们：

1)

```
while True:
    #loop body
    if not expr():
        break 
```

2)

```
x = True
while x:
    #loop body
    x = expr() 
```

3)

```
def f():
    #loop body

f()
while expr():
    f() 
```

[更不用说这里](https://stackoverflow.com/questions/743164/do-while-loop-in-python)提到的其他方法（例如协程、try-except 子句、迭代器等），我认为这些方法在大多数情况下都是非 Python 的。我什至看到一些答案认为 do-while 循环是非 Python 的，但我不知道通用的替代方案。

哪种方法最pythonic？它们都有自己的奇怪之处：1）以无限循环开始，2）首先创建一个不透明的变量，以及 3）定义一个新函数。有没有人有更好的方法？

# ruby - 未定义符号：尝试运行瘦 Web 服务器时的 SSLv2_method

> ID：13366409
> 
> 赞同：4
> 
> 时间：2012-11-13T18:20:33.460
> 
> 标签：ruby, rvm

我已经用 rvm ( `rvm pkg install openssl`) 安装了 OpenSSL，然后做了`rvm reinstall 1.9.3 --with-openssl-dir=$rvm_path/usr`

当我尝试运行瘦网络服务器时，我收到以下错误：

> /home/ubuntu/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/x86_64-linux/openssl.so：未定义符号：SSLv2_method - /home/ubuntu/.rvm/rubies/ruby -1.9.3-p327/lib/ruby/1.9.1/x86_64-linux/openssl.so（加载错误）

这是在 Ubuntu 12.04 上运行的，我读过 Ubuntu 12 构建 OpenSSL 时不支持 SSLv2。然而，这里它引用了 RVM 的包——RVM 也这样做吗？此问题是否有任何已知的解决方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T11:59:32.333

正如您所说，Ubuntu 在不支持 SSLv2 的情况下构建 openssl：[Ubuntu and undefined symbol for SSLv2_method](https://stackoverflow.com/questions/8206546/undefined-symbol-sslv2-method)

对于阅读本文的人，您的选择是（难度越来越大）：

(1) 安装 rvm 版本 1.14.7，其中 openssl pkg 包含 openssl 版本 0.9.8，并且默认包含 SSLv2 支持。

```
rvm implode # Completely destroy your rvm installation
curl -L https://get.rvm.io | bash -s -- --version 1.14.7 
```

安装所需的包，重新编译你的 ruby​​，它应该可以工作了！

(2)（这给了你更多的安全性）：从源代码编译你自己的 openssl，将其配置为包含 SSLv2 支持，然后使用 --with-openssl-dir 重新编译你的 ruby​​，指向你安装 openssl 的位置。

(3) 修复 thin 使其不再需要 SSLv2_method 符号，然后在[GitHub 上提交 pull request](https://github.com/macournoyer/thin/)

# primefaces - Webflow的流量范围和使primefaces图形图像工作

> ID：13366412
> 
> 赞同：2
> 
> 时间：2012-11-13T18:20:46.707
> 
> 标签：primefaces, scope, spring-webflow, flow, graphicimage

我正在使用一个带有流范围的 spring bean，它有一个 primesfaces 的 StreamedContent 字段，并且图像没有显示出来。关于如何使用流范围进行这项工作的任何想法？当它是具有请求范围的托管 bean 以及具有会话/原型/单例范围的 spring bean 时，它可以正常工作。

下面是一些示例代码：

**流动：**

```
 <input name="springBean" required="false"/> 

 <view-state id="testFlow">
     <transition on="post" to="testFlow" />
 </view-state> 
```

**xhtml 文件：**

```
<ui:define name="body">
<h:form>
    <p:graphicImage value="#{springBean.barcode}" cache="false"/>
    <br /> 
    <h:outputText value="This is a test flow" />
    <br />
    Message From Spring = #{springBean.text}<br />
    <h:inputText value="#{springBean.text}" style="width:200px" />
    <h:commandButton action="post" value="Update" />
</h:form>
</ui:define> 
```

**应用上下文：**

```
<import resource="flowConfig.xml" /> 

<bean name="springBean" class="swfproject.MessageHolder" scope="flow">
    <property name="text" value="This was defined in Spring" />
</bean> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:13:49.183

到目前为止，我发现的唯一方法是扩展 GraphicImage 组件并使其在 Session 中存储二进制内容。请参阅[如何使 Primefaces graphicsImage 与 Spring Web Flow 一起使用](https://stackoverflow.com/questions/13401569/how-to-make-primefaces-graphicimage-work-with-spring-web-flow)

# wpf - 如何使用 TDD 测试 BusyIndi cator IsBusy 属性

> ID：13366416
> 
> 赞同：3
> 
> 时间：2012-11-13T18:21:03.767
> 
> 标签：wpf, mvvm, tdd

我正在阅读使用 C# 进行专业测试驱动开发，它让我看到了一些很酷的方法和框架。我真的很喜欢 red-green-refactor 的流程，在过去的几周里我敲掉了大量的库代码。

对于 WPF 前端，我想尝试与 ViewModel 相同的方法。一切都很顺利，直到我开始考虑如何添加 View 的 BusyIndi​​cator IsBusy 属性将绑定到的布尔值。更具体地说，我应该编写哪些测试，以确保长方法可以正确设置 IsBusy。我知道如果不使用纯 TDD 方法我可能很容易做到这一点，但很好奇其他人如何处理这样的简单任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T03:22:19.597

如果我正确理解您的问题，您应该能够创建 View 的模拟实例。然后在您的测试中，一旦您安排了测试条件并对其采取了行动（“安排/行动/断言”中的第一个和第二个 A；请参阅：[http ://www.telerik.com/help/justmock /basic-usage-arrange-act-assert.html](http://www.telerik.com/help/justmock/basic-usage-arrange-act-assert.html)），您可以验证该`IsBusy`属性的计算结果是否为`true`.

此外，您可能会发现在属性中添加某种类型的条件检查很有用，以便在测试时表现稍有不同。这是一个很好的例子来说明如何做到这一点：

*   操作方法：[确定代码是否作为单元测试的一部分运行](https://stackoverflow.com/questions/3167617/determine-if-code-is-running-as-part-of-a-unit-test)
*   说明类似的相关用法的答案：[https ://stackoverflow.com/a/3598990/1796930](https://stackoverflow.com/a/3598990/1796930)

# java - 处理ajax请求并发送响应java servlet

> ID：13366422
> 
> 赞同：1
> 
> 时间：2012-11-13T18:21:29.077
> 
> 标签：java, ajax, servlets, response

我有一个 ajax 请求函数（用 JavaScript 编写）和处理这个请求的 Java Servlet。我需要获取所有请求参数，如果成功，则发回确认成功。如何发送确认消息？作为一个属性，如`{isSuccess: true}`. 我的代码：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException,
    IOException {
    Enumeration<?> paramNames = request.getParameterNames();
    while (paramNames.hasMoreElements()) {
        String paramName = (String) paramNames.nextElement();
        // storing data fn
    }
    // how to send back a message here?
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:25:21.313

`PrintWriter`通过调用`HttpServletResponse#getWriter`并编写您的`String`.

```
response.getWriter().write("{isSuccess: true}"); 
```

# java - 设备到设备的实时通信 - 最佳实践？

> ID：13366423
> 
> 赞同：1
> 
> 时间：2012-11-13T18:21:37.840
> 
> 标签：java, android, communication

在我们的场景中，涉及到很多安卓智能手机。您可以“订阅”一个调查组并在那里做一些事情......创建者能够改变一些东西（通过Android APP或桌面应用程序，例如开始一个新的调查）并且订阅的android客户端应该立即得到改变的东西（查看开始的调查并回答）。

所以我的问题如下：如何实时更新所有订阅客户端的用户数据？

是否可以用C2DM框架实现（最高延迟30秒）？

如果有任何帮助，我将不胜感激。

# ember.js - ember.js 路由器和 connectOutlets

> ID：13366424
> 
> 赞同：0
> 
> 时间：2012-11-13T18:21:40.147
> 
> 标签：ember.js, ember-old-router

我正在尝试在我的 ember 路由中使用已经实例化的控制器。

实例化一个控制器并想在路由中使用它是不正常的吗？我知道，如果我的应用程序为我实例化了一个控制器，那么我可以这样做，`router.get("myController")`但它不会访问我自己实例化的控制器。

如何让路由器底部的代码工作？

**HTML**

```
 <script type="text/x-handlebars" data-template-name="application">
    {{outlet}}
 </script>

<script type="text/x-handlebars" data-template-name="instanced">
    <h1>Hello from instanced template</h1>
    {{showinstancedvalue}}<hr>
    {{outlet}}
</script>

<script type="text/x-handlebars" data-template-name="foobar">
    <h1>hello from foobar</h1>
    {{foobarvalue}}
</script> 
```

**Javascript**

```
var App = Ember.Application.create();
// application view and controller
App.ApplicationView = Ember.View.extend({
    templateName: 'application',
});
App.ApplicationController = Ember.Controller.extend();

// foobar controller and view
App.FoobarController = Ember.Controller.extend({
    foobarvalue: "working"
});
App.FoobarView = Ember.View.extend({
    templateName: 'foobar'
});

// instantiated controller and view
App.InstancedController = Ember.Controller.extend({});
App.instancedController = App.InstancedController.create({
    myvar: "a value from an instantiated controller"
});
App.InstancedView = Ember.View.extend({
    templateName: 'instanced',
});
App.instancedView = App.InstancedView.create({
    showinstancedvalueBinding: 'App.instancedController.myvar'
});

App.instancedView.append();

App.router = Ember.Router.create({
    enableLogging: true,
    root: Ember.Route.extend({
        index: Ember.Route.extend({
            route: '/',
            redirectsTo: 'works'
        }),
        works: Ember.Route.extend({
            route: '/works',
            connectOutlets: function(router) {
                router.get('applicationController').connectOutlet('foobar');
            }
        }),
        broken: Ember.Route.extend({
            route: '/broken',
            connectOutlets: function(router) {

                // no error in console, but foobar doesn't appear
                // router.get('instancedController').connectOutlet('foobar');

                // *** this one was my best guess as to what I thought would work ***
                // no error in console, but foobar doesn't appear
                // App.instancedController.connectOutlet('App.Foobar');

                // Uncaught Error: assertion failed: The name you supplied foobar did not resolve to a view FoobarView
                // App.instancedController.connectOutlet('foobar');
            }
        }),

    })
});

App.initialize(App.router);​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T20:23:10.290

查看[`connectOutlet`](https://github.com/emberjs/ember.js/blob/v1.0.0-pre.2/packages/ember-views/lib/system/controller.js#L24-172)定义，它包含一个基本文档作为注释，因此您可以更好地了解它应该如何使用或如何使用。

基本上，您应该真正将它连接到`applicationController`，因为它`{{outlet}}`位于`ApplicationView`模板上。在这种情况下，框架将找到应该在该状态下使用的视图和控制器（在您的情况下`FoobarView`，`foobarController`因为它是使用参数 'foobar' 指定的），并添加`controllers`到`applicationController`. 如果你尝试直接连接到你的实例`foobarController`，它不会在它的视图上找到一个出口（我相信那一刻不应该被实例化）并且你会对那个控制器说“嘿，找到你自己，然后将自己与您联系起来”之类的东西。

如果您在 foobar 视图模板中有一个插座，并且您将此插座连接到 foobar 以外的其他东西（作为子状态/路由），这可能会起作用。所以你应该阅读更多关于网点和命名网点的信息。

此外，我强烈推荐这些链接：

*   [路由器入门](http://emberjs.com/guides/router_primer/)- 这篇文章大约有两周的新鲜时间，显然是目前最好的，请务必阅读这篇文章！
*   [Ember.js Routing - Director's Cut](http://www.thesoftwaresimpleton.com/blog/2012/08/20/routing_update/) - 关于路由器的分步文章，请确保您也阅读了这篇文章。
*   [奥特莱斯](http://emberjs.com/guides/outlets/)- 这有点旧但正在维护
*   [JSFiddle 示例 1](http://jsfiddle.net/schawaska/pfbva/) - 可以用作参考的带有路由的示例小提琴
*   [JSFiddle 示例 2](http://jsfiddle.net/schawaska/hEx84/) - 可以用作参考的带有路由的示例小提琴（这比以前更新）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T18:51:00.560

您应该尝试详细说明您的要求。从我的角度来看，这没有任何意义。

```
 broken: Ember.Route.extend({
        route: '/broken',
        connectOutlets: function(router) {
            App.foobarController.connectOutlet('foobar');
        }
    }), 
```

此代码无法正常工作，因为您正在调用 fooBarController 上的 connectOutlet。因此它在分配视图中搜索 {{outlet}}。但是在名为 foobar 的模板中，您没有指定 {{outlet}}。即使你解决了这个问题，它也没有任何意义，因为这条线会尝试将一个插座与一个新的 Foobar View 实例连接起来。因此，您基本上拥有 FooBarController 的 FooBarView 并在其视图内，您尝试再次将插座与 FooBarView 的新实例连接？

**因此，如果不解释要求，则无法回答此问题。**

# c++ - Boost tuple和stl向量编译错误

> ID：13366427
> 
> 赞同：1
> 
> 时间：2012-11-13T18:21:52.693
> 
> 标签：c++, boost

以下行无法编译并出现错误：

```
No viable overloaded '='

std::string myString;
float myFloat;
boost::tuple<const std::string&, float> myTuple 
    = boost::tuple<const std::string&, float>(myString, myFloat);
std::vector<boost::tuple<const std::string&, float> > myVector;
myVector.push_back(myTuple); 
```

有没有人有线索！？提示：如果我用简单的 std::string 替换“const std::string&”，一切都很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T18:24:05.340

向量的成员必须是可复制分配的 (C++98) 或至少是可移动的 (C++11)。参考不是。

# c# - 单击超链接会导致更新面板执行完整回发？

> ID：13366429
> 
> 赞同：2
> 
> 时间：2012-11-13T18:22:01.447
> 
> 标签：c#, asp.net, updatepanel, partial-postback

当我只是尝试回发部分帖子时，更新面板会回发完整帖子。当我单击上一页和下一页的超链接时，我只想能够更新中继器而不是更新整个页面。

```
 protected void Page_Load(object sender, EventArgs e)
{
    PagedDataSource objpd = new PagedDataSource();

    string connStr = ConfigurationManager.ConnectionStrings["yafnet"].ConnectionString;
    SqlConnection mySQLconnection = new SqlConnection(connStr);
    if (mySQLconnection.State == ConnectionState.Closed)
    {
        mySQLconnection.Open();
    }

    SqlCommand mySqlSelect = new SqlCommand("SELECT * FROM [Comments]", mySQLconnection);
    mySqlSelect.CommandType = CommandType.Text;
    SqlDataAdapter mySqlAdapter = new SqlDataAdapter(mySqlSelect);
    DataTable table = new DataTable();
    mySqlAdapter.Fill(table);

    objpd.DataSource = table.DefaultView;
    objpd.AllowPaging = true;
    objpd.PageSize = 1;

    int currentPage;

    if (Request.QueryString["page"] != null)
    {
        currentPage = Int32.Parse(Request.QueryString["page"]);
    }
    else
    {
        currentPage = 1;
    }

    objpd.CurrentPageIndex = currentPage - 1;
    // Label1.Text = "Page " + currentPage + " of " + pds.PageCount;

    if (!objpd.IsFirstPage)
    {
        linkPrev.NavigateUrl = Request.CurrentExecutionFilePath + "?page=" + (currentPage - 1);

    }

    if (!objpd.IsLastPage)
    {
        linkNext.NavigateUrl = Request.CurrentExecutionFilePath + "?page=" + (currentPage + 1);

    }

    Repeater1.DataSource = objpd;
    Repeater1.DataBind();

} 
```

这是我的 HTML

```
<div class="comment">

    <asp:UpdatePanel ID="UpdatePanel1" UpdateMode="Conditional" runat="server">

        <ContentTemplate>
            <asp:Repeater ID="Repeater1" runat="server">

                <HeaderTemplate>
                    <table class="commentsx" cellspacing="0">
                </HeaderTemplate>

                <ItemTemplate>

                    <tr>
                        <td class="name">
                            <div class="right">
                                <%# Eval("CommentUserName") %>
                            </div>
                            <div class="left">
                                <%# Eval("CommentDateTime") %>
                            </div>
                        </td>

                    </tr>
                    <tr>
                        <td>
                            <div class="mess">
                                <%# Eval("CommentMessage") %>
                            </div>
                        </td>
                    </tr>

                </ItemTemplate>

                <FooterTemplate>
                    </table>
                </FooterTemplate>

            </asp:Repeater>

            <asp:HyperLink ID="linkPrev" runat="server">Previous Page</asp:HyperLink>
            <asp:HyperLink ID="linkNext" runat="server">Next Page</asp:HyperLink>
        </ContentTemplate>

        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="Button1" EventName="DataBinding" />
        </Triggers>

    </asp:UpdatePanel>

</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T18:33:42.543

`Hyperlink`控件根本不进行回发，它们评估为将执行 GET 而不是 POST 的常规链接。

由于您似乎想要一些看起来像链接的东西，但执行的是回发而不是 GET，所以您需要的是一个`LinkButton`. 它看起来像一个链接，但它就像一个按钮并执行回发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T20:46:55.747

图我会发布我自己的问题的答案，因为我是在 Servy 的帮助下弄明白的。超链接不会发布帖子，这就是我之前的代码无法正常工作的原因。所以我修改了我的代码以包含以下内容。

1.  我添加了两个按钮
2.  为两个按钮制作了事件处理程序以创建 POST

这是我的代码可能会帮助某人

```
public int CurrentPage
{
    get
    {
        // look for current page in ViewState
        object o = this.ViewState["_CurrentPage"];
        if (o == null)
            return 0;   // default to showing the first page
        else
            return (int)o;
    }

    set
    {
        this.ViewState["_CurrentPage"] = value;
    }
}
private void updateMessage()
{
    PagedDataSource objpd = new PagedDataSource();
    string connStr = ConfigurationManager.ConnectionStrings["yafnet"].ConnectionString;
    SqlConnection mySQLconnection = new SqlConnection(connStr);
    if (mySQLconnection.State == ConnectionState.Closed)
    {
        mySQLconnection.Open();
    }

    SqlCommand mySqlSelect = new SqlCommand("SELECT * FROM [Comments]", mySQLconnection);
    mySqlSelect.CommandType = CommandType.Text;
    SqlDataAdapter mySqlAdapter = new SqlDataAdapter(mySqlSelect);
    DataTable table = new DataTable();
    mySqlAdapter.Fill(table);

    objpd.DataSource = table.DefaultView;
    objpd.AllowPaging = true;
    objpd.PageSize = 1;
    objpd.CurrentPageIndex = CurrentPage;
    //disable pre or next buttons if necessary
    cmdPrev.Enabled = !objpd.IsFirstPage;
    cmdNext.Enabled = !objpd.IsLastPage;

    Repeater1.DataSource = objpd;
    Repeater1.DataBind();

}

protected void Page_Load(object sender, EventArgs e)
{

    updateMessage();

}

protected void cmdPrev_Click(object sender, EventArgs e)
{
    // Set viewstate variable to the previous page
    CurrentPage -= 1;

    // Reload control
    updateMessage();
}
protected void cmdNext_Click(object sender, EventArgs e)
{
    // Set viewstate variable to the next page
    CurrentPage += 1;

    // Reload control
    updateMessage();

} 
```

这是我的html

```
 <div  class="comment">

                     <asp:UpdatePanel ID="UpdatePanel1" UpdateMode="Conditional" runat="server">

                         <ContentTemplate>
                             <asp:Repeater ID="Repeater1" runat="server">

                                 <HeaderTemplate>
                                     <table class="commentsx" cellspacing="0">
                                 </HeaderTemplate>

                                 <ItemTemplate>

                                     <tr>
                                         <td class="name">
                                             <div class="right">
                                                 <%# Eval("CommentUserName") %>
                                             </div>
                                             <div class="left">
                                                 <%# Eval("CommentDateTime") %>
                                             </div>
                                         </td>

                                     </tr>
                                     <tr>
                                         <td>
                                             <div class="mess">
                                                 <%# Eval("CommentMessage") %>
                                             </div>
                                         </td>
                                     </tr>

                                 </ItemTemplate>

                                 <FooterTemplate>
                                     </table>
                                 </FooterTemplate>

                             </asp:Repeater>

                              <asp:button id="cmdPrev" runat="server" text=" << " onclick="cmdPrev_Click"></asp:button>
                              <asp:button id="cmdNext" runat="server" text=" >> " onclick="cmdNext_Click"></asp:button></td>
                         </ContentTemplate>

                     </asp:UpdatePanel>

                 </div> 
```

# java - Commons-Daemon procrun 二进制文件缺少 prunsrv.exe 或 prunmgr.exe

> ID：13366431
> 
> 赞同：3
> 
> 时间：2012-11-13T18:22:13.440
> 
> 标签：java, windows-services, apache-commons-daemon

我计划使用 commons-daemon [procrun](http://commons.apache.org/daemon/procrun.html)创建基于 Windows 的服务。我从下载中下载了 commons-daemon-1.0.10-bin.zip 文件，但是当我解压它时，我找不到 prunsrv.exe 或 prunmgr.exe 文件。我发现 zip 文件中缺少这些文件。我是否指向正确的下载文件？请建议。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-26T08:55:54.103

可以在下载站点的子目录中的另一个 zip 文件中找到二进制文件。目前位于：http: [//www.apache.org/dist/commons/daemon/binaries/windows/commons-daemon-1.0.15-bin-windows.zip](http://www.apache.org/dist/commons/daemon/binaries/windows/commons-daemon-1.0.15-bin-windows.zip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T18:34:57.823

在发布这个问题之前，我在谷歌上搜索同一主题，提出没有找到任何答案，但最后我找到了我的问题的答案。

**`I came to know that the Commons Daemon project does not provide binaries for these applications. The only binaries available are from the Tomcat project. Tomcat comes with two windows binaries: tomcat5.exe and tomcat5w.exe. It turns out that these are "prunsrv" and "prunmgr"`**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T13:46:28.803

可在[此处获取所需操作系统的二进制文件](http://www.apache.org/dist/commons/daemon/binaries/)

它将列出 windows 文件夹下的二进制文件。

# mysql - 将sql转换为搜索rails 3

> ID：13366432
> 
> 赞同：1
> 
> 时间：2012-11-13T18:22:17.167
> 
> 标签：mysql, ruby-on-rails-3, search, activerecord

我有两个模型，我想通过我的搜索表单进行搜索

```
<%= form_tag({:controller => 'search', :action => 'search'}, {:method => 'get', :remote => true })  do |select| %>
<%= label_tag :search, "Enter Keywords Here" %>
<%= text_field_tag :search, params[:search] %>

<%= label_tag :country, "Search by Country" %>
<%= collection_select(:country, :country_id, Country.all, :id, :name, :prompt => 'Please Select') %>

<%= label_tag :difficulty, "Search by Difficulty" %>
<%= select_tag :difficulty, options_for_select([['Beginner'],['Intermediate'],['Expert']]), {:prompt => 'Please Select'} %>

<%= label_tag :preperation_time, "Search by preperation time" %>
<%= select_tag :preperation_time, options_for_select([['15..30'],['30..60'],['60..120']]), {:prompt => 'Please Select'} %><br>

<%= submit_tag "Search", :class => "searchbutton" %>
<% end %> 
```

我的理解是，如果我希望能够搜索所有列，我的 sql 语句应该如下所示

```
SELECT column dish_name, difficulty, preparation_time FROM Recipe LEFT JOIN Country ON Recipe.dish_name = Country.name AND Recipe.difficulty = Country.name AND Recipe.preparation_time = Country.name 
```

这可能是完全错误的想法，我想要实现的是能够通过一个参数或最多 4 个参数进行搜索

我不知道如何把它变成 Rails 语法，目前我有

```
q = "%#{params[:search]}%"
@countrysearch = Recipe.includes(:country).where("dish_name LIKE ? OR countries.name LIKE ? OR difficulty LIKE ? OR preperation_time LIKE?", q, q, q,q ) 
```

如果有人能指出我正确的方向，那将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:38:59.157

**不了解**

如果您想更好地了解您正在使用此方法调用做什么，您可以随时使用`to_sql`以打印生成的 SQL 查询。

您还可以检查由 rails 和控制台退化的日志。

**左连接示例**

```
@result = Recipe.joins("LEFT OUTER JOIN countries ON countries.id = recipes.country_id").select 
```

但也是可能的，最好按照你的方式做

```
@result = Recipe.includes(:country) 
```

**打印查询**

```
puts @result.to_sql 
```

**构建查询**

```
countrysearch = Recipe.includes(:country).arel_table
countrysearch = countrysearch.or(countrysearch[:country].eq(params[:search][:country])) if params[:search].has_key?(:country)
#...
countrysearch = countrysearch.or(countrysearch[:difficulty].eq(params[:search][:difficulty])) if params[:search].has_key?(:difficulty) 
```

**参考**

请检查以下参考中的替代方案：

1.  [导轨/arel](https://github.com/rails/arel)
2.  [215：Rails 3 中的高级查询](http://asciicasts.com/episodes/215-advanced-queries-in-rails-3)

希望这对你有帮助！！

# c# - 在强类型视图中显示来自多个表的数据

> ID：13366438
> 
> 赞同：3
> 
> 时间：2012-11-13T18:22:45.183
> 
> 标签：c#, asp.net-mvc, linq, asp.net-mvc-4, razor

我有一个强类型视图，它显示数据库表“Student_A”中的学生

看法：

```
<%@ Page Language="C#" Inherits="System.Web.Mvc.ViewPage<IEnumerable<Student.Models.Student_A>>" %>
    <table>
    <% foreach (var item in Model) { %>

        <tr>
            <td>
                <%= Html.Encode(item.StudentName) %>
            </td>
            <td>
                <%= Html.Encode(item.StudentId) %>
            </td>
        </tr>

    <% } %>

    </table> 
```

控制器：

```
 public ActionResult ShowStudents()
    {
        ViewData.Model = stud.Student_A.Where(a => a.StudentId != 0);
        return View();
    } 
```

我还有另一个存储学生的表“Student_B”，我也想在我的视图中显示这些学生。就像是：

```
 public ActionResult ShowAllStudents()
    {
        var StudentA = stud.Student_A.Where(a => a.StudentId != 0);
        var StudentB = stud.Student_B.Where(a => a.StudentId != 0);
        ViewData.Model = StudentA + StudentB;

        return View();
    } 
```

是否可以在单个控制器操作中在强类型视图中显示来自两个不同表的数据？还是我必须创建一个数据库视图来显示“Student_A”和“Student_B”表中的学生，然后在视图中显示它们？

任何帮助深表感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T18:27:08.040

您需要以“不可知”的方式存储结果。例如

```
public class StudentInfo
{
public string Type { get; set; }
public string FirstName { get; set; }
public string LastName { get; set; }
...
}

var students = stud.Student_A.Where(...).Select(a => new StudentInfo { Type = "Student_A", FirstName = a.FirstName, LastName = a.LastName });

students.concat( stud.Student_B.Where(...).Select(b => new StudentInfo { Type = "Student_B", FirstName = b.FirstName, LastName = b.LastName });

ViewData.Model = students;

return View(); 
```

通过这样做，您有一个通用的学生信息类来存储可以用作强类型模型的通用属性。

或者，如果你想单独列出它们，你可以创建一个复合 ViewModel

```
public class StudentsVM
{
public IEnumerable<Student_A> Student_A { get; set; }
public IEnumerable<Student_B> Student_B { get; set; }
}

var vm = new StudentsVM;
vm.Student_A = stud.Student_A.Where(...);
vm.Student_B = stud.STudent_B.Where(...);

ViewData.Model = vm; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T18:27:22.100

您可以使用两者创建视图模型

```
public class StudentsViewModel
{
  public List<Student.Models.Student_A> StudentsA {get;set}
  public List<Student.Models.Student_B> StudentsA {get;set}
} 
```

如果 A 和 B 学生确实有不同的领域，请在您看来返回这个

```
var viewModel = new StudentsViewModel();
viewModel.StudentsA = stud.Student_A.Where(a => a.StudentId != 0);
viewModel.StudentsB = stud.Student_B.Where(a => a.StudentId != 0);
return View(viewModel); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T18:38:59.350

我必须为 Treeview 而不是表做类似的事情，并且需要组合两个不同的集合以便从单个集合生成树视图。就我而言，我可以使用它来组合它们......

```
var allStudents = StudentA.Union((IEnumerable<Object>)StudentB); 
```

然后在您的代码中，当您遍历集合中的每个对象时，您可以测试对象的数据类型并以您想要的方式显示它，以防您想使用不同的代码来呈现不同类型的学生。我需要这样做，因为在我的情况下，具有子项的节点与没有子项的节点的类型完全不同。

请注意，通过使用 Object 作为您的根集合类型而不是某种共享继承（例如接口），您将无法对组合集合进行排序或过滤它们。

如果您需要混合这两个集合而不是将一个集合附加到另一个集合的末尾，则必须使用某种共享继承。

**更新**：

示例代码表明这有效。我在[LinqPad](http://www.linqpad.net/)中进行了测试，但我确信它在 Visual Studio 中也能正常工作。

```
public class Student_A
{
    public int Id{get;set;}
    public string FirstName{get;set;}
    public string LastName{get;set;}
}

public class Student_B
{
    public int Id{get;set;}
    public string FirstName{get;set;}
    public string MiddleName{get;set;}
    public string LastName{get;set;}
}

void Main()
{
    List<Student_A> StudentAs = new List<Student_A>();
    StudentAs.Add(new Student_A(){Id = 1, FirstName = "Jack", LastName = "Smith"});
    StudentAs.Add(new Student_A(){Id = 3, FirstName = "Sarah", LastName = "Jane"});
    StudentAs.Add(new Student_A(){Id = 7, FirstName = "Zack", LastName = "Hall"});

    List<Student_B> StudentBs = new List<Student_B>();
    StudentBs.Add(new Student_B(){Id = 2, FirstName = "Jane", MiddleName = "T.", LastName = "Kelly"});
    StudentBs.Add(new Student_B(){Id = 9, FirstName = "Rose", MiddleName = "Marie", LastName = "Tyler"});
    StudentBs.Add(new Student_B(){Id = 4, FirstName = "Bobby", MiddleName = "Stephen", LastName = "Singer"});

    var result = StudentAs.Union((IEnumerable<Object>)StudentBs);

    result.Dump();
} 
```

# c# - XmlReader 不考虑文档类型表示法

> ID：13366440
> 
> 赞同：4
> 
> 时间：2012-11-13T18:22:55.107
> 
> 标签：c#, .net, xml, validation, xmlreader

第一次在这些论坛上写。虽然已经阅读了很长时间。

我有一个问题，试图在 .Net 中使用 XmlReader 验证 Xml 文件。

xml文件：

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE root [
  <!NOTATION png PUBLIC "-//W3C//NOTATION Portable Network Graphics//EN">
  <!ENTITY mypic SYSTEM "mypic.png" NDATA png>
]>
<root>
  <img ref="mypic" />
</root> 
```

Xsd 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema id="myschema"
    elementFormDefault="qualified"
    xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="img">
    <xs:complexType>
      <xs:attribute name="ref" type="xs:ENTITY" />
    </xs:complexType>
  </xs:element>

  <xs:element name="root">
    <xs:complexType>
      <xs:sequence>
        <xs:element ref="img" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

C# 片段：

```
XmlReaderSettings settings = new XmlReaderSettings();
settings.ValidationEventHandler += settings_ValidationEventHandler;
settings.ValidationType = ValidationType.Schema;
settings.DtdProcessing = DtdProcessing.Parse;
settings.ValidationFlags |= XmlSchemaValidationFlags.ProcessIdentityConstraints
            | XmlSchemaValidationFlags.ProcessInlineSchema
            | XmlSchemaValidationFlags.ProcessSchemaLocation
            | XmlSchemaValidationFlags.ReportValidationWarnings;

using (XmlReader reader = XmlReader.Create("myschema.xsd")) 
{
    settings.Schemas.Add(XmlSchema.Read(reader, new ValidationEventHandler(settings_ValidationEventHandler)));
}

using (XmlReader reader = XmlReader.Create("mydata.xml", settings))
{
    while (reader.Read()) ;
} 
```

我收到一个验证错误，说明：

```
Reference to an unparsed entity, 'mypic'. 
```

根据其他验证器，它确实验证，但不是根据 XmlReader。

我已经尝试了我能想到的一切，所以现在我转向你们。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T10:23:22.480

通过使用 Reflector，我发现 NOTATION 和 ENTITY 声明确实被解析了。

验证器将找到您的`mypic`实体引用并将其视为外部且未解析，因为它具有非空的 NDATA 声明。

但是，我还发现验证器在遇到未解析实体引用时总是会发送*对未解析实体的引用验证错误。*

我不明白为什么 Microsoft 将此报告为错误。在我看来，验证器应该忽略未解析的实体引用或将它们报告为警告，而不是错误。

忽略来自验证器的这些错误应该是安全的，并且仍然认为 XML 是有效的，当然，除非报告了任何其他错误。

那么，如何判断上报的错误是否是*对未解析实体的可忽略引用*错误呢？

我看到三个选项：

1.  检查错误消息是否以字符串开头`Reference to an unparsed entity`。如果您的代码在非英语平台上运行，这将中断。

2.  使用反射获取内部`GetRes`属性的值，看是否等于`Sch_UnparsedEntityRef`. 如果 Microsoft 决定更改内部 API，这将中断。

3.  序列化异常，判断序列化`res`成员是否等于`Sch_UnparsedEntityRef`。如果 Microsoft 决定更改序列化格式，这将中断。

所有这些选项都是“黑客”。第一个最有可能破裂。然而，第三个应该是安全的。Microsoft 不太可能更改序列化格式，因为这可能会破坏与其他代码的兼容性。

以下是如何确定是否忽略在`settings_ValidationEventHandler`方法中收到的验证异常的示例。

基于错误消息（不安全）：

```
 static bool IsUnparsedEntityReferenceError_BasedOnMessage(
        XmlSchemaException error)
    {
        return error != null && error.Message.StartsWith(
            "Reference to an unparsed entity", StringComparison.Ordinal);
    } 
```

基于反射（相当安全）：

```
 static readonly PropertyInfo GetResProp = typeof(XmlSchemaException)
        .GetProperty("GetRes", BindingFlags.NonPublic | BindingFlags.Instance);

    static bool IsUnparsedEntityReferenceError_BasedOnReflection(
        XmlSchemaException error)
    {
        return error != null && GetResProp != null && 
            "Sch_UnparsedEntityRef".Equals(GetResProp.GetValue(error, null));
    } 
```

基于序列化格式（最安全）：

```
 static bool IsUnparsedEntityReferenceError_BasedOnSerializer(
        XmlSchemaException error)
    {
        if (error == null)
        {
            return false;
        }
        else
        {
            SerializationInfo info = new SerializationInfo(
                typeof(XmlSchemaException), new FormatterConverter());

            error.GetObjectData(info, default(StreamingContext));
            return "Sch_UnparsedEntityRef" == info.GetString("res");
        }
    } 
```

# php - 如何插入一个值或NULL？

> ID：13366443
> 
> 赞同：1
> 
> 时间：2012-11-13T18:23:03.063
> 
> 标签：php, sql, insert, null

> **可能重复：**
> [将 NULL 变量插入数据库](https://stackoverflow.com/questions/11398135/insert-null-variable-into-database)

我有一个包含列的表（日志）：

秒：bigint(20) UNSIGNED NULL

IP地址：varchar(15) NULL

问题是，每当变量被赋予值 NULL 时，它们作为 IPAddress 列的空字符串和 Seconds 列的 0 插入列中，而不是*NULL*。

```
//PHP 5.3.9//

if(isset($_POST['sec']))
        $seconds = mysql_real_escape_string($_POST['sec']);
else
    $seconds = NULL;

if(isset($_POST['ip']))
    $ipaddress = mysql_real_escape_string($_POST['ip']);
else
    $ipaddress = NULL;

$query = mysql_query("INSERT INTO log (Seconds, IPAddress) VALUES('".$seconds."', '".$ipaddress."')", $DbConnectionMyDb); 
```

我在谷歌上搜索过，但所有答案都假设我已经知道变量*$sec*和*$ip*是否将为 NULL。在我的情况下，它取决于*POST*数据。

任何帮助都深表感谢。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T18:25:07.740

```
"" !== NULL
"NULL" !== NULL
NULL === NULL 
```

您正在插入`""`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T18:31:54.777

在您将变量组合为字符串的那一刻，变量中的 NULL 值将转换为空字符串。您需要构建实际读取的查询：

```
VALUES (NULL, NULL) 
```

并不是

```
VALUES ("", "") 
```

你可以这样做：

```
if (is_null($seconds)) $seconds='NULL'; else $seconds='"'.$seconds.'"';
if (is_null($ipaddress)) $ipaddress='NULL'; else $ipaddress='"'.$ipaddress.'"';
$query = mysql_query("... VALUES(".$seconds.", ".$ipaddress.")", ...); 
```

但是，从长远来看，使用某种数据库库或 PDO 和预准备语句来抽象出这些类型的任务会更好。

# java - 在 Java 中打印对象并获取特定内容

> ID：13366450
> 
> 赞同：1
> 
> 时间：2012-11-13T18:23:25.870
> 
> 标签：java

我有一个项目，但我又遇到了以前遇到的问题。

我们有这个 Tester 文件。不应该编辑它。我希望你专注于这一行：

```
System.out.println(bb) ; 
```

它打印对象对吗？

```
import java.util.Arrays ;
/**
   Presents some problems to the BillBoard class.
 */
public class BillboardTester
{
    public static void main(String[] args) 
    {
    int[] profits = new int[]{1, 2, 3, 1, 6, 10} ;
    int k = 2 ;
    System.out.println("Profits: " + 
               Arrays.toString(profits) + "   k = " + k)  ;
    Billboard bb = new Billboard(profits, k) ;
    System.out.println("Maximum Profit = " + bb.maximumProfit()) ;
    System.out.println(bb) ;

    k = 3 ;
    profits = new int[]{7, 4, 5, 6, 1, 7, 8, 9, 2, 5} ;
    System.out.println("Profits: " + 
               Arrays.toString(profits) + "   k = " + k)  ;
    bb = new Billboard(profits, k) ;
    System.out.println("Maximum Profit = " + bb.maximumProfit()) ;
    System.out.println(bb) ;
    }
} 
```

然后通过打印对象，他期望得到这个结果：

```
Billboards removed (profit): 3(1) 0(1) => profit loss of 2
total value of billboards = 23
remaining maximum profit = 21 
```

我不知道我必须在实际的 Billboard 类中创建什么方法，所以我可以把它打印出来。你有什么建议吗？我想知道这背后的逻辑，而不是解决那个特定问题的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T18:25:48.243

覆盖`toString`方法。

每当您打印类的任何实例时，`toString`都会调用该方法。如果您不覆盖它，将使用`Object's`类，它返回具有形式的表示。`toString``type@someNumber`

要打印您自己的表示，只需覆盖它，然后您的实现`toString`将被调用。

```
@Override
public String toString() {
    return this.getProfit();
} 
```

您可以相应地更改返回的字符串。我不知道你`k`是什么，但你也可以在你的`returned string`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T18:25:57.587

覆盖`toString`方法。打印对象依赖于`Object`类中定义的方法。通过覆盖它，您的实现将被使用而不是那个。

考虑`println`的文档：

> 打印一个对象，然后终止该行。这个方法首先调用 String.valueOf(x) 来获取打印对象的字符串值，然后表现得好像它调用了 print(String) 和 println()。

`println`依赖于`String.valueOf(x)`谁调用`x`'s`toString`方法。

一个例子：

```
public String toString() {
    return "Billboards removed (profit):" + someParam + " => profit loss of " +
           profitLoss + "\ntotal value of billboards = " + totalValue + 
           "\nremaining maximum profit = " + remainingProfit;
} 
```

长话短说，您只需返回`String`您“描述”其内容的对象的表示。如果你有一个`Person`对象，你`toString`可能会是这样的：

```
"Name: " + personName + "Email: " + personEmail. 
```

# javascript - 点击后不再触发 Keydown 事件

> ID：13366453
> 
> 赞同：0
> 
> 时间：2012-11-13T18:23:36.557
> 
> 标签：javascript, html, javascript-events

我有一个网站，我想对箭头键事件做出反应。我添加了一个`keydown`监听器，只要我不点击站点，它就可以工作。单击后，`keydown`不再触发。

由于*Chrome*和*Firefox*的行为相同，我怀疑我遗漏了一些东西。

按照源代码：

```
<!DOCTYPE html>
<html>
    <head>
        <style>
            html, body, embed 
            {
                position: absolute;
                width:  100%;
                height: 100%;
                margin:  0px;
                padding: 0px;
                border:  0px;
            }
        </style>
        <script>    
            var keyHandler = function(event) {
                alert( "EV" + event );
            };
            window.addEventListener( 'keydown', keyHandler, true );
        </script>
    </head>
    <body>
        <embed src="http://upload.wikimedia.org/wikipedia/commons/6/6b/Bitmap_VS_SVG.svg"/>
    </body>
</html> 
```

有人可以指出，我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T18:39:56.790

问题是您正在`embed`为整个视口使用一个元素。嵌入元素用于将多媒体嵌入您的网站。一旦焦点移动到该元素（通过单击），它就会劫持您的事件。

您可以在此处看到此操作：http: [//jsfiddle.net/blineberry/p6rXP/](http://jsfiddle.net/blineberry/p6rXP/)单击结果窗口但不在图像上，然后按一个键。然后单击图像并按一个键。然后单击图像并按一个键。

如果您使用`img`元素而不是`embed`问题解决：http: [//jsfiddle.net/blineberry/p6rXP/1/](http://jsfiddle.net/blineberry/p6rXP/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T18:53:59.057

布伦特的回答为您提供了这样做的理由和干净的解决方案，如果您无法停止使用`embed`标签，我将为您提供粗略的解决方法。

那就是在您的嵌入视口上方放置一个不可见的 span 或 div 元素，这样当人们点击嵌入内容时，他们将真正点击您的不可见元素，因此焦点不会转移到嵌入元素，因此您的`window.keydown`处理程序将被触发.

有关此解决方法的示例代码，请参阅[https://stackoverflow.com/a/9614949/352672 。](https://stackoverflow.com/a/9614949/352672)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T13:52:43.753

我最终做的是将外部 SVG 加载到文档正文中。然后整个问题就消失了（而其他问题浮出水面）。使用*jquery*，这看起来像这样：

```
<body>
    <script>
        $(document.body).load("mygreat.svg");
    </script>
</body> 
```

# python - 如何从记事本文件中获取数据并使用 fft（对其进行快速傅立叶变换）

> ID：13366463
> 
> 赞同：1
> 
> 时间：2012-11-13T18:24:30.270
> 
> 标签：python, fft

我在编程方面有点新手，因为我们在物理学学位中被要求这样做。我正在使用 Python 2。

我得到了一个包含两列数据的 txt 文件，前几行如下所示：

```
0.000000000000000000e+00 7.335686114232199684e-02 
1.999999999999999909e-07 7.571960558042964973e-01
3.999999999999999819e-07 9.909475704320810374e-01
5.999999999999999728e-07 3.412754086075696081e-01
7.999999999999999638e-07 -5.558766000866324219e-01
9.999999999999999547e-07 -9.810046985453722002e-01
1.199999999999999946e-06 -5.436864816312496629e-01
1.399999999999999937e-06 2.645021165628647641e-01
1.599999999999999928e-06 9.667259209284312371e-01
1.799999999999999919e-06 7.395753817164774091e-01
1.999999999999999909e-06 7.289488801158025555e-02
2.200000000000000112e-06 -7.925906572709742193e-01
2.399999999999999891e-06 -9.727702002847055107e-01
2.599999999999999671e-06 -1.772398644968510018e-01
2.799999999999999873e-06 6.627909312992285029e-01
3.000000000000000076e-06 1.022032186188189362e+00
3.199999999999999855e-06 5.531242183135693935e-01 
```

并且它持续了数百行。

问题问：本周您收到了一个文件，该文件由外部脉冲后的模拟 NMR 时域响应组成。这种自由感应衰减 (FID) 的特征在于频率、初始幅度和衰减常数。数据有一个单一的振荡频率，第二个包含两个频率的混合。编写一个程序来评估两个信号的快速傅里叶变换，并将它们绘制在频域中。

有人可以给我一个例子来说明我如何去做这件事吗？不幸的是，我们在实验室中没有得到太多指导，只是一些在线教程，或者告诉谷歌的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T18:43:20.197

我会把我的评论变成答案：

这实际上很容易。使用[numpy.genfromtxt()](http://docs.scipy.org/doc/numpy/reference/generated/numpy.genfromtxt.html)将数据加载到 numpy 数组中，然后您可以从[numpy.fft](http://docs.scipy.org/doc/numpy/reference/routines.fft.html)中选择某种形式的 FFT 。

因为这是你的练习，所以我不会写下确切的代码，但基本上是总结了它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T18:30:46.010

要读取 .txt 文件，您需要执行以下操作（不是最快但最清晰）：

```
column1 = []
column2 = []
infile = open("MyFile.txt", "r")
for l in infile.readlines():
    if l.strip():
        v1 = float(l.split()[0])
        v2 = float(l.split()[1])
        column1.append(v1)
        column2.append(v2) 
```

对于 fft，请查看 numpy

# django - 如何从视图返回原始数据？

> ID：13366466
> 
> 赞同：1
> 
> 时间：2012-11-13T18:24:34.677
> 
> 标签：django, django-templates

我有为 xml 生成数据的函数，我想使用一个模板：

```
<?xml version="1.0" encoding="utf-8"?>
<items>
    {% for item in items %}
    <item>
        <title>{{ item.title }}</title>
        <desc>{{ item.desc }}</desc>
    </item>
    {% endfor %}
</items> 
```

但如果我使用：

```
t = loader.get_template(templatename)
c = RequestContext(request, generated_data)
return HttpResponse(t.render(c)) 
```

我得到结果：

```
<html>
    <head></head>
    <body>
          <?xml version="1.0" encoding="utf-8"?>
          <items>
               <item>
                   <title>Title 1</title>
                   <desc>desc 1</desc>
               </item>
               <item>
                   <title>Title 2</title>
                   <desc>desc 2</desc>
               </item>
               <item>
                   <title>Title 3</title>
                   <desc>desc 3</desc>
               </item>
          </items>
    </body>
</html> 
```

如何防止这个标题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:50:17.657

我的错，源代码中的特殊字符，请关闭。

# mysql - SQL 每小时数据

> ID：13366470
> 
> 赞同：3
> 
> 时间：2012-11-13T18:24:48.023
> 
> 标签：mysql, sql

下面的查询从 MySql 数据库中检索天气数据，并将这些数据分组为每小时格式。

```
select hour(datetime) AS hour
     , avg(Temperature) as AVGT 
from Database.minute
WHERE DATETIME
      BETWEEN (CURDATE() + INTERVAL (SELECT hour(NOW())) hour - INTERVAL 23 hour)
         AND ((CURDATE() + INTERVAL (SELECT hour(NOW())) hour))
group by hour
order by  (CURDATE() + INTERVAL (SELECT hour(NOW())) hour - INTERVAL 23 hour) 
```

输出如下：

```
hour    AVGT
19     11.730
20     11.970
21     11.970
22     11.760
23     11.660
0      11.700
1      11.830
2      12.370
3      12.770
4      12.840
5      12.840
6      12.540
7      12.500
8      12.030
9      12.100
10     12.300
11     12.060
12     11.090
13     10.920
14     10.920
15     10.820
16     10.760
17     10.690
18     10.560 
```

现在时间是 18 点 15 分。除了在“18”小时收集的数据之外，上述所有输出都是正确的。它不是获取 18:00 到 18:15 之间的平均值，而是输出 18:00 时间的平均值。IE。忽略 18:01 到 18:14 之间的数据。

如何修改上述查询以包含当前时间（18:00 到现在）的数据？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T18:28:35.633

你为什么不简单地尝试

```
SELECT Hour(datetime)   AS hour, 
       Avg(temperature) AS AVGT 
FROM   DATABASE.minute 
WHERE  datetime BETWEEN ( Curdate() + INTERVAL (SELECT Hour(Now())) hour - 
                          INTERVAL 23 hour ) AND Now() 
GROUP  BY hour 
ORDER  BY ( Curdate() + INTERVAL (SELECT Hour(Now())) hour - INTERVAL 23 hour ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T18:43:42.960

我同意@Ankur[的回答](https://stackoverflow.com/a/13366527)（您的过滤器不应该过滤当前时间的记录，而是当前时间），但是您的日期/时间操作非常奇怪：

1.  您不需要子查询`(SELECT Hour(NOW()))`来获取`HOUR(NOW())`；

2.  你可以`( Curdate() + INTERVAL (SELECT Hour(NOW())) hour - INTERVAL 23 hour )`更简单的表达：

    ```
    CURDATE() + INTERVAL HOUR(NOW()) - 23 HOUR 
    ```

    或者，在我看来，更清楚的是：

    ```
    DATE_FORMAT(NOW() - INTERVAL 23 HOUR, '%Y-%m-%d %H:00:00') 
    ```

3.  您的`ORDER BY`子句是一个常数，因此一无所获：您的意思是 order by`hour`吗？

所以：

```
SELECT   HOUR(datetime) AS hour,
         AVG(Temperature) AS AVGT
FROM     Database.minute
WHERE    datetime BETWEEN
               DATE_FORMAT(NOW() - INTERVAL 23 HOUR, '%Y-%m-%d %H:00:00')
           AND NOW()
GROUP BY hour
ORDER BY hour 
```

# c# - 在 Sharepoint 上存储数据集：ReadXml 失败，而 WriteXml 工作正常

> ID：13366474
> 
> 赞同：3
> 
> 时间：2012-11-13T18:24:59.830
> 
> 标签：c#, xml, sharepoint, dataset

我有一个简单的 win forms 应用程序，可以将数据集加载/保存到 XML 文件中。只要我使用文件共享或本地文件系统，一切都很好。

使用我的 Windows 8 框上的标准打开文件/保存文件对话框，允许我使用浏览到我的共享点

https:// 一些共享点主机

我可以浏览共享点站点/项目和文档库。

这是奇怪的部分（因为我根本没想到它会这样工作）：当我使用文件保存对话框浏览到共享点文档库时，路径被转换为类似 '\sharepointhost@SSL\somepath\ somemorepath\somefile.xml'

将上述路径传递给 DataSet WriteXml 方法可以正常工作，并且文件已正确写入文档库。

将相同的路径传递给 DataSet ReadXml 方法不起作用，我得到一个异常：“无效的 URI：无法解析主机名。”

我在这里想念什么。我的意思是，我希望这两种方法都使用相同的代码来解析/解析路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:32:46.623

您是否能够检查您的代码是否适用于非安全（http）连接？也许这个错误适用于您的场景？

[用于带有 ssl 的 webdav 路径的 XmlReader](http://connect.microsoft.com/VisualStudio/feedback/details/614602/xmlreader-throws-uri-exception-for-webdav-path-with-ssl)（ReadXml 内部使用 XmlReader）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:48:09.730

我猜您可能必须在 READXML 中添加前缀 ftp://" 或 "http://"

# asp.net - ASP.NET 4.0，IIS6 上 PDF 的浏览器二进制渲染

> ID：13366479
> 
> 赞同：3
> 
> 时间：2012-11-13T18:25:11.907
> 
> 标签：asp.net, iis, pdf, browser, binary

我有一个 ASP.Net 4.0 Web 应用程序，它在客户端的浏览器上呈现使用 CrystalReports 在 iF​​rame 中通过二进制写入动态创建的 PDF。webapp 在我的开发站（Visual Studio 2012 Web Developer）上运行良好，但是当我对我们的生产服务器（Win2003、IIS6）进行测试时，用户单击按钮以流式传输 PDF 的部分仅显示文档的一部分（仅页眉徽标，PDF 的其余部分为空白）。我做了一个测试：我没有将二进制数据流式传输到我保存到服务器虚拟路径上的本地目录的客户端浏览器中，而是可以访问完整性良好的 PDF，所有数据都出现在保存的文档上。我已经在谷歌上搜索了 3 天，尝试了各种代码片段、IIS 配置（日志文件没有显示任何错误）、服务器权限、HTML 标头、web.config 标签等，没有运气。我怀疑它与 IIS 有关，但我找不到解决方案。以下是在客户端浏览器上呈现 PDF 的代码：

```
//reportObject is a CrystalReport document object (.rpt)
Dim s As System.IO.MemoryStream = reportObj.ExportToStream(ExportFormatType.PortableDocFormat)

s.Seek(0, SeekOrigin.Begin)

With HttpContext.Current.Response
    .ClearContent()
    .ClearHeaders()
    .ContentType = "application/pdf"
    .AddHeader("Content-Disposition", "inline; filename=" & fileName)
    .BinaryWrite(s.ToArray)
    .Flush()
    .End()
End With 
```

我也试过这些，都在我的开发机器上工作，但不在服务器上：

```
With HttpContext.Current.Response
            .Clear()
            .ClearHeaders()
            .Buffer = True

            .AddHeader("Content-Disposition", "inline; filename=doc.pdf")
            .AddHeader("Content-Length", Int32.Parse(s.Length))
            .AddHeader("Content-transfer-encoding", "8bit")
            .AddHeader("Cache-Control", "private")
            .AddHeader("Pragma", "cache")
            .AddHeader("Expires", "0")
            .AddHeader("X-UA-Compatible", "IE=EmulateIE7")

            .ContentType = "application/pdf"
            .BinaryWrite(s.ToArray)

            .Flush()
            .Close()
            HttpContext.Current.ApplicationInstance.CompleteRequest()
        End With 
```

还有这些行：

```
.AppendHeader("Accept-Ranges", "none")
.OutputStream.Write(s.ToArray(), 0, Convert.ToInt32(s.Length)) 
```

似乎没有任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T01:31:34.300

我不得不实现这个线程上描述的另一种方法：

[Response.TransmitFile 并在传输后将其删除](https://stackoverflow.com/questions/2688282/response-transmitfile-and-delete-it-after-transmission)

我希望它可以帮助某人。

# wordpress - 附件无法访问或在 wordpress 中显示

> ID：13366481
> 
> 赞同：0
> 
> 时间：2012-11-13T18:25:21.307
> 
> 标签：wordpress, file, attachment, file-not-found

我在这篇文章 ( [http://seminartopics.info/uncategorized/test/](http://seminartopics.info/uncategorized/test/) ) 中插入了一张图片，并将其链接到相同的图片以供下载或查看。链接是[http://seminartopics.info/wp-content/uploads/2012/11/paypal.gif](http://seminartopics.info/wp-content/uploads/2012/11/paypal.gif) 但它没有显示在帖子中，如果转到直接链接也会出现“未找到”错误。我在这个网站上上传的每个文件都有同样的问题。这个问题在我将我的网站从其他主机移动到当前主机后开始

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T04:54:34.403

这是由于我的 .htaccess 文件中的文件权限设置。我的一位朋友为我纠正了它。

# zend-framework2 - 如何使用 Zend Framework 2 在 ViewHelper 中获取 URL 参数

> ID：13366482
> 
> 赞同：1
> 
> 时间：2012-11-13T18:25:26.723
> 
> 标签：zend-framework2

我用[http://blog.evan.pro/creating-a-simple-view-helper-in-zend-framework-2](http://blog.evan.pro/creating-a-simple-view-helper-in-zend-framework-2)创建了简单的 ViewHelper 。如何在此帮助程序中获取 URL 参数？$this->params('param') 仅适用于控制器...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:43:40.860

鉴于博客文章中的代码，您可以在视图助手内部使用此代码：

```
$this->request->getPost('param');  // post parameter

// or

$this->request->getQuery('param'); // query parameter 
```

示例中的代码接收`Zend\Http\Request`当前请求的对象实例并将其存储在`request`视图助手调用的属性中，以便您可以使用请求属性访问请求对象和其中的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-09T13:16:31.953

在视图助手中，您必须添加如下代码：

模块.php

```
 'factories' => array(
            'myViewHelper' => function($pm) {
                return new MyView($pm);
            },

        ) 
```

现在在 Helper Class 文件中，您必须添加以下代码

```
public function __construct($pm) {
    $this->pluginManager = $pm;
    $this->serviceLocator = $this->pluginManager->getServiceLocator();
    $this->routeMatch = $this->serviceLocator->get('Router')->match($this->serviceLocator->get('Request'));
}
public function __invoke() {
    $params = $this->getRouteMatch()->getParams();

} 
```

这里 $params 将返回数组格式中的所有路由参数。

# sql - TSQL 中的 COALESCE 函数

> ID：13366488
> 
> 赞同：111
> 
> 时间：2012-11-13T18:25:49.417
> 
> 标签：sql, sql-server, sql-server-2008, tsql

有人能解释一下 TSQL 中的 COALESCE 函数是如何工作的吗？语法如下

> 合并（x，y）

关于这个功能的 MSDN 文档非常模糊

* * *

## 回答 #1

> 赞同：215
> 
> 时间：2012-11-13T18:27:05.883

我不确定您为什么认为文档含糊不清。

它只是一个一个地遍历所有参数，并返回第一个即`NOT NULL`.

```
COALESCE(NULL, NULL, NULL, 1, 2, 3)
=> 1

COALESCE(1, 2, 3, 4, 5, NULL)
=> 1

COALESCE(NULL, NULL, NULL, 3, 2, NULL)
=> 3

COALESCE(6, 5, 4, 3, 2, NULL)
=> 6

COALESCE(NULL, NULL, NULL, NULL, NULL, NULL)
=> NULL 
```

它接受几乎任意数量的参数，但它们应该是相同的数据类型。 *（如果它们不是相同的数据类型，它们会使用[数据类型的优先顺序](https://technet.microsoft.com/en-us/library/ms190309(v=sql.110).aspx)隐式转换为适当的数据类型。）*

这就像`ISNULL()`但是对于多个参数，而不仅仅是两个。

它也是`ANSI-SQL`, where-as`ISNULL()`不是。

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2012-11-13T18:40:51.040

有人告诉我 COALESCE 的成本低于 ISNULL，但研究并未表明这一点。ISNULL 只接受两个参数，被评估为 NULL 的字段，以及如果它被评估为 NULL 时所需的结果。COALESCE 将采用任意数量的参数，并返回遇到的第一个非 NULL 值。

这里有详细的详细描述 [http://www.mssqltips.com/sqlservertip/2689/deciding-between-coalesce-and-isnull-in-sql-server/](http://www.mssqltips.com/sqlservertip/2689/deciding-between-coalesce-and-isnull-in-sql-server/)

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-09-23T19:43:38.747

这是我看待 COALESCE 的方式......希望它是有道理的......

以简单的形式......

**合并（字段名，“空”）**

所以这转换为...如果“FieldName”为 NULL，则使用“EMPTY”一词填充字段值。

现在对于多个值...

**合并（字段名称 1、字段名称 2、值 2、值 3）**

如果 Fieldname1 中的值为 null，则用 Fieldname2 中的值填充，如果 FieldName2 为 NULL，则用 Value2 填充，以此类推。

*AdventureWorks2012*示例数据库的这段测试代码完美运行，并且很好地直观地解释了*COALESCE*的工作原理：

```
SELECT Name, Class, Color, ProductNumber,
COALESCE(Class, Color, ProductNumber) AS FirstNotNull
FROM Production.Product 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-07-10T13:52:11.720

除了替换 ISNULL 之外，还有很多东西需要合并。我完全同意，coalesce 的官方“文档”含糊不清且没有帮助。这篇文章很有帮助。 [http://www.mssqltips.com/sqlservertip/1521/the-many-uses-of-coalesce-in-sql-server/](http://www.mssqltips.com/sqlservertip/1521/the-many-uses-of-coalesce-in-sql-server/)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-02-20T10:20:30.237

这是一个包含合并的简单查询 -

```
select * from person where coalesce(addressId, ContactId) is null. 
```

它将返回 addressId 和 contactId 都为空的人员。

**合并函数**

*   至少需要两个参数。
*   参数必须是整数类型。
*   返回第一个非空参数。

例如

*   coalesce(null, 1, 2, 3) 将返回 1。
*   coalesce(null, null) 将返回 null。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-11-16T13:11:12.180

[Coalesce() 函数](https://docs.microsoft.com/en-us/sql/t-sql/language-elements/coalesce-transact-sql?view=sql-server-2017)的最简单定义可能是：

> Coalesce() 函数计算所有传递的参数，然后返回参数的第一个实例的值，该参数没有计算为 NULL。

注意：它评估所有参数，即不跳过返回/NOT NULL 参数右侧的参数的评估。

句法：

```
Coalesce(arg1, arg2, argN...) 
```

**注意**：除了评估为 NULL 的参数外，所有其他（NOT-NULL）参数必须是相同的数据类型或必须是*匹配类型*（可以“隐式自动转换”为兼容的数据类型），请参阅示例以下：

```
PRINT COALESCE(NULL, ('str-'+'1'), 'x')  --returns 'str-1, works as all args (excluding NULLs) are of same VARCHAR type.
--PRINT COALESCE(NULL, 'text', '3', 3)    --ERROR: passed args are NOT matching type / can't be implicitly converted.
PRINT COALESCE(NULL, 3, 7.0/2, 1.99)      --returns 3.0, works fine as implicit conversion into FLOAT type takes place.
PRINT COALESCE(NULL, '1995-01-31', 'str') --returns '2018-11-16', works fine as implicit conversion into VARCHAR occurs.

DECLARE @dt DATE = getdate()
PRINT COALESCE(NULL, @dt, '1995-01-31')  --returns today's date, works fine as implicit conversion into DATE type occurs.

--DATE comes before VARCHAR (works):
PRINT COALESCE(NULL, @dt, 'str')      --returns '2018-11-16', works fine as implicit conversion of Date into VARCHAR occurs.

--VARCHAR comes before DATE (does NOT work):
PRINT COALESCE(NULL, 'str', @dt)      --ERROR: passed args are NOT matching type, can't auto-cast 'str' into Date type. 
```

高温高压

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-30T22:19:59.460

```
declare @store table (store_id varchar(300))
insert into @store 
values ('aa'),('bb'),('cc')
declare @str varchar (4000)
select @str = concat(@str+',',store_id) from @store
select @str 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-07-21T21:28:27.427

coalesce take n number of arguments from left to right. coalesce selects the first non null argument. similarly isnull(field,'unknown') is equivalent to coalesce(field,'unknown') with the difference that coalesce can compare multiple fields.

# git - 使用 netbeans 支持的新 git 用户出现 REJECTED_NONFASTFORWARD 错误

> ID：13366494
> 
> 赞同：1
> 
> 时间：2012-11-13T18:26:38.673
> 
> 标签：git, netbeans

我是一个新的 GIT 用户，在 win7 上使用内置的 NetBeans 支持。我对我的项目文件进行了一些更改。当我尝试将它们推送到远程服务器时，我将获得第二年。

```
git push git@bitbucket.org:******/**.git +refs/heads/master:refs/heads/master
Remote Repository Updates
Branch : master
Old Id : f2f9c7d23813d4ccc838d9aa0abd4875*******
New Id : 9277c9b01cf8d1aaff23003ce771cf*******
Result : REJECTED_NONFASTFORWARD

 Local Repository Updates
 Branch : origin/master
 Old Id : f2f9c7d23813d4ccc838d9aa0abd4875******
 New Id : 9277c9b01cf8d1aaff23003ce771cf*******
 Result : NOT_ATTEMPTED

 ==[IDE]== Nov 13, 2012 1:14:35 PM Pushing finished. 
```

有人可以解释发生了什么，我不确定下一步该怎么做。

提前致谢，

账单

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:28:57.950

Git 告诉您，自从您上次同步远程存储库以来，它已经有更新。您需要将这些更改拉到您的本地系统（使用任何等效的 Netbean `git pull`）并将它们集成到您的本地存储库中，然后您将能够推送到远程存储库。

在这种情况下，这就是`git push`命令行上的内容：

```
error: failed to push some refs to 'remote.git'
hint: Updates were rejected because the tip of your current branch is behind
hint: its remote counterpart. Merge the remote changes (e.g. 'git pull')
hint: before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details. 
```

手册页的相关部分说：

> 关于快进的注意事项
> 
> ```
>  When an update changes a branch (or more in general, a ref) that used
>    to point at commit A to point at another commit B, it is called a
>    fast-forward update if and only if B is a descendant of A.
> 
>    In a fast-forward update from A to B, the set of commits that the
>    original commit A built on top of is a subset of the commits the new
>    commit B builds on top of. Hence, it does not lose any history. 
> ```

# c++ - 如何 Qt - Qml 调试和/或分析？

> ID：13366495
> 
> 赞同：10
> 
> 时间：2012-11-13T18:26:42.607
> 
> 标签：c++, qt, embedded, cmake, qml

需要在应用程序中编译哪些软件 Qt/QML 片段才能调试/分析 QML？

我当前的应用程序是使用 cmake 构建的，并在嵌入式设备上运行。此外，我开始使用 Qt 4.8.3（直到现在 4.7.0）。

我想使用这些花哨/酷炫的功能（对于嵌入式开发人员）：

[http://doc.qt.digia.com/qtcreator/creator-qml-performance-monitor.html](http://doc.qt.digia.com/qtcreator/creator-qml-performance-monitor.html)

我已经[通过 qt-project](http://qt-project.org)搜索以寻求帮助，但我不清楚当您想使用自定义构建环境调试/分析远程应用程序时需要哪些步骤。

所以，我想知道是否需要以下任何步骤，在肯定的情况下，实际上需要的代码是什么。

*   Qt 库*./configure*特定选项。
*   附加/启动到远程应用程序的 QtCreator 特定选项。
*   Cmake 包含最终应用程序可执行文件中所需的库。

欢迎任何帮助、链接等。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-18T12:15:43.113

使用 Qt 4.8，这变得非常容易。所有必需的库现在都是 Qt 本身的一部分，您不必自己为您的 Qt 版本构建调试库。

我正在开发一个也用 CMake 构建的 Qt/QML 桌面应用程序。我必须完成以下步骤才能启用 QML 调试：

1.  将调试启用程序包含到我的应用程序的启动代码中

    ```
     #include <QtDeclarative/qdeclarativedebug.h>

      /* [...] */

      QDeclarativeDebuggingEnabler enabler; 
    ```

2.  添加`QML_DISABLE_OPTIMIZER=1`到我的应用程序的执行环境

    这可以在项目页面的执行选项卡中的 Qt Creator 中完成。

3.  勾选 QML 调试复选框也在执行选项卡中找到

    这为 Qt Creator 和嵌入在应用程序中的 QML 调试器组件之间的通信添加了所需的命令行参数

如果一切顺利，如果在调试模式下启动，应用程序会向您显示以下输出：

> Qml 调试已启用。只能在安全的环境中使用！
> QDeclarativeDebugServer：等待端口 3768 上的连接...
> QDeclarativeDebugServer：连接已建立

之后，我能够设置断点并检查变量。通过分析页面访问的分析器也刚刚工作。

当您开发嵌入式应用程序时，您的情况显然有点复杂。

Qt creator 不支持在嵌入式平台上部署和执行基于 CMake 的项目。你必须自己做。不要忘记将所需的参数传递给您的应用程序以配置 QML 调试：

```
$ your-app -qmljsdebugger=port:3768,block 
```

要将 Qt Creator 附加到远程运行的应用程序以进行分析会话，请使用 Qt Creator 主菜单中“分析”菜单中的相应“外部”条目。在“调试”>“调试”下使用“连接到调试服务器”进行调试的同样选项在哪里。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-09T16:15:50.693

我正在使用 Qt 5，它变得更加容易。我只需要这一步来进行 QML 分析：

```
#include <QQmlDebuggingEnabler>

...

QQmlDebuggingEnabler enabler; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-01-21T15:13:18.720

检查[文档](http://doc.qt.io/qtcreator/creator-debugging.html)所有给出的答案似乎是不必要的。此外，它在版本中对调试代码进行硬编码。我不知道为什么`QQmlDebuggingEnabler`有必要，但如果你在[这里](https://github.com/cedrus/qt/blob/master/qtdeclarative/include/QtQml/QQmlDebuggingEnabler)和[这里](https://github.com/cedrus/qt/blob/master/qtdeclarative/src/qml/debugger/qqmldebug.h)检查代码，你会认识到，实例化`QQmlDebuggingEnabler`是*没有*必要的。只需包含`QQmlDebuggingEnabler`并设置`QT_QML_DEBUG`标志，例如这样（CMake）

`set(CMAKE_CXX_FLAGS_DEBUG "${CMAKE_CXX_FLAGS_DEBUG} -DQT_QML_DEBUG ")`

但是根据[文档](http://doc.qt.io/qtcreator/creator-debugging.html) `QQmlDebuggingEnabler`是没有必要的。

此外：分析未优化的代码毫无意义。

对我来说，设置`QT_QML_DEBUG`为标志并选中 QML 调试复选框就足够了。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-06-16T16:16:56.787

这是[@sebasgo 的答案](https://stackoverflow.com/questions/13366495/how-to-qt-qml-debugging-and-or-profiling#13440000)第 1 项的“更清洁”替代方案。

如果您将 Qt5 与 QtQuick2 一起使用，您只需要`QT_QML_DEBUG`在包含`QtQuick`某个文件之前定义（无论是什么文件，只要它是可执行文件的一部分即可）。例如，从以下几`main.cpp`行开始就足够了：

```
#define QT_QML_DEBUG
#include <QtQuick> 
```

`-DQT_QML_DEBUG`如果您改为使用编译器的标志（例如，通过 qmake [DEFINES](http://qt-project.org/doc/qt-5.0/qtdoc/qmake-variable-reference.html#defines)或 cmake [add_definitions](http://www.cmake.org/cmake/help/v2.8.11/cmake.html#command:add_definitions)指令），它不会受到伤害，可能只在调试版本中。

如果您坚持使用旧版 QtQuick1（在 Qt5 或 Qt4 中），请改用`QT_DECLARATIVE_DEBUG`宏，例如

```
#define QT_DECLARATIVE_DEBUG
#include <QtDeclarative> 
```

对于好奇的人，这里有一个相关的 Qt 源代码，简短且不言自明：

*   [QtQuick2](http://qt.gitorious.org/qt/qtdeclarative/blobs/stable/src/qml/debugger/qqmldebug.h)
*   [Qt5 中的 QtQuick1](http://qt.gitorious.org/qt/qtquick1/blobs/stable/src/declarative/debugger/qdeclarativedebug.h)
*   [Qt4.8 中的 QtQuick1](http://qt.gitorious.org/qt/qt/blobs/4.8/src/declarative/debugger/qdeclarativedebug.h)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-07-22T16:59:55.960

在 Qt 5.1 中，添加了新功能[qInstallMessageHandler](http://qt-project.org/doc/qt-5.0/qtcore/qtglobal.html#qInstallMessageHandler)。它可以让您捕获并记录错误和警告，以便您可以随心所欲地处理它们。

# css - 边距对齐因不同分辨率而损坏

> ID：13366497
> 
> 赞同：0
> 
> 时间：2012-11-13T18:26:44.483
> 
> 标签：css

我在我的网站中使用了两张图片 - 一张在右上角，另一张在右上角。

**右上角图片css代码**

```
.fbtopbutton{ position: absolute;top: 27px;right: 192px;} 
```

**居中右图css代码**

```
#annoying-floater {
  z-index:10;
  position:fixed;
  top:80%; right:-45%;
  width:640px; height:480px;
  margin-left:-320px; margin-top:-240px;
opacity: 0.8; /* css standard */
    filter: alpha(opacity=60); /* internet explorer */
}

#annoying-floater:hover {

opacity: 1.0; /* css standard */
    filter: alpha(opacity=60); /* internet explorer */
} 
```

有两个问题：

1.  当屏幕分辨率变低时，图像会进入页面中心（在内容上）
2.  对于右中图片，当鼠标悬停在该图片下方时，它的工作方式就像鼠标悬停在图片上一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:32:20.147

在 CSS 中以百分比为单位设置这些图像的宽度和高度。

# jquery - 凌乱的 jQuery div 到 div 追加

> ID：13366499
> 
> 赞同：-2
> 
> 时间：2012-11-13T18:26:52.120
> 
> 标签：jquery, html, append, fade

我在第一次加载页面时遇到 jQuery div to div append 的问题。

期望的效果：本质上，只需要让当前的 div 淡出，暂停，然后下一个淡入。

结果：新添加的 div 跳转到要添加的 div 的顶部，迫使前一个 div 向下，看起来不美观。几乎就像在前一个 div 完成淡出之前 div 正在淡入一样，尽管有这个`.delay()`功能。

原始的jQuery代码：

```
$(document).ready(function(){
$("#blurb > div:gt(0)").hide();
setInterval(function() { 
$('#blurb > div:first')
.fadeOut(1000)
.delay(1000)
.next(1)
.fadeIn(1000)
.end(1)
.appendTo('#blurb');
},  5000);
}); 
```

相关CSS：

```
#blurb{
float:right;
text-align:right;
width:300px;
font-size:16px;
margin-right:-20px;
height:100px;
z-index:-100;
}
#blurb > div{
position:relative;
z-index:-100;
height:100px;
} 
```

相关HTML：

```
<div id="blurb">
<div>
<b style="font-size:18px;color:#EF116A;">Having problems?</b><br>
Please call our Sheffield-based support team on <b>0114 303 3232</b>.
</div>
<div>
<b style="font-size:18px;color:#EF116A;">Having problems?</b><br>
Please email our Sheffield-based support team at <b>support@ask4.com</b>.
</div>
<script>
jQuery script as above
</script>
</div> 
```

（请忽略非验证等，这只是一个实验）

非常感谢，

奥利弗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T18:28:08.620

如果想让下一个div在当前动画完成后淡入，需要在fadeOut方法的回调**回调函数中处理下一个div的淡入。**

```
 $(document).ready(function() {
    $("#blurb > div:gt(0)").hide();
    setInterval(function() {
        $('#blurb >div:first')
            .fadeOut(1000 , function() {
                 $(this).next(1).delay(1000).fadeIn(1000)
                                .end(1).appendTo('#blurb');
            })  
    }, 5000);
}); 
```

​</p>

**[检查小提琴](http://jsfiddle.net/sushanth009/KZr2S/)**

# php - 检查记录是否存在：如果不存在则插入，如果存在则显示消息

> ID：13366502
> 
> 赞同：1
> 
> 时间：2012-11-13T18:27:19.387
> 
> 标签：php, mysql, mysqli

编辑：更新！让第一部分工作。但是，我不确定如何检查同一 IF() 语句中的其他变量。任何人都可以帮助我吗？单个 if 语句将拒绝名称与输入完全相同的类。但是，我还需要它拒绝相等的天数和时间。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <title>Register Diver</title>
    <link rel="stylesheet" href="php_styles.css" type="text/css" />
    <meta http-equiv="content-type"
    content="text/html; charset=iso-8859-1" />
    </head>
    <body>
    <h1>Aqua Don's Scuba School</h1>
    <h2>Registration Confirmation</h2>
    <?php
    $DiverID = $_GET['diverID'];
    if (empty($DiverID))
        exit("<p>You must enter a diver ID! Click your browser's Back button to return to the previous page.</p>");
    $DBConnect = @mysqli_connect("localhost", "students", "password")
        Or die("<p>Unable to connect to the database server.</p>"
        . "<p>Error code " . mysqli_connect_errno()
        . ": " . mysqli_connect_error()) . "</p>";
    $DBName = "scuba_school";
    @mysqli_select_db($DBConnect, $DBName)
        Or die("<p>Unable to select the database.</p>"
        . "<p>Error code " . mysqli_errno($DBConnect)
        . ": " . mysqli_error($DBConnect)) . "</p>";

    $TableName = "registration";
    $SQLstring = "SELECT * FROM $TableName";
    $QueryResult = @mysqli_query($DBConnect, $SQLstring);
    if (!$QueryResult) {
        $SQLstring = "CREATE TABLE registration (diverID SMALLINT, class VARCHAR(40), days VARCHAR(40), time VARCHAR(40))";
        $QueryResult = @mysqli_query($DBConnect, $SQLstring)
            Or die("<p>Unable to create the registration table.</p>"
            . "<p>Error code " . mysqli_errno($DBConnect)
            . ": " . mysqli_error($DBConnect)) . "</p>";
        echo "<p>Successfully created the registration table.</p>";
    }
    ?>

    <?php
    $Class = $_GET['class'];
    $Days = $_GET['days'];
    $Time = $_GET['time'];
    $DiverID = $_GET['diverID'];

    $DBConnect = mysqli_connect("localhost", "students", "password");
    $DBName = "scuba_school";
    @mysqli_select_db($DBConnect, $DBName)
        Or die("<p>Unable to select the database.</p>"
        . "<p>Error code " . mysqli_errno($DBConnect)
        . ": " . mysqli_error($DBConnect)) . "</p>";

    $sqlString= "SELECT * FROM `registration` WHERE `diverID` = $DiverID AND `class` = '$Class' AND `days` = '$Days' AND `time` = '$Time'";
    $QueryResult = mysqli_query($DBConnect, $sqlString) or die("MySQL error: " . mysqli_error($DBConnect) . "<hr>\nQuery: $QueryResult");  
    $row = mysqli_fetch_assoc($QueryResult);

    if ($row["class"] == $Class)
    {

    echo "<p>You are already registered for $Class</p>";
        }

        elseif($row["days"] == $Days && $row["time"] == $Time)
        {
            echo "<p>There is a conflict with $Days or $Time</p>";
            }
    else
    {
     $SQLstring = "INSERT INTO $TableName VALUES('$DiverID', '$Class', '$Days', '$Time')";
        $QueryResult = @mysqli_query($DBConnect, $SQLstring);
        echo "<p>You are registered for $Class on $Days, $Time. Click your browser's Back button to register for another course or review your schedule.</p>";
    }

    mysqli_close($DBConnect);
    ?>

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:40:51.290

笔记

顺便说一句，在 PHP 中，**按照惯例**，变量以小写字符开头，而类和接口以大写字符开头。此外，如果您愿意，请阅读这些标准 (PSR)。[这些是我采用的标准](https://github.com/php-fig/fig-standards/tree/master/accepted)

* * *

## 编辑：我刚刚用模拟 mysql 表测试了这段代码，它可以按需要工作。按照提供的模式创建 MYSQL 表。您可以使用 PHPMyAdmin 导入架构。将完整代码复制到新文件并在浏览器中运行。将按预期工作，自己测试。

MYSQL 表：

登记

```
-- phpMyAdmin SQL Dump
-- version 3.5.1
-- http://www.phpmyadmin.net
--
-- Host: localhost
-- Generation Time: Nov 16, 2012 at 11:14 AM
-- Server version: 5.5.24
-- PHP Version: 5.3.15

SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";
SET time_zone = "+00:00";

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;

-- --------------------------------------------------------

--
-- Table structure for table `registration`
--

CREATE TABLE IF NOT EXISTS `registration` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `diverID` int(11) NOT NULL,
  `class` int(11) NOT NULL,
  `time` datetime NOT NULL,
  PRIMARY KEY (`id`),
  KEY `class` (`class`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=14 ;

--
-- Dumping data for table `registration`
--

INSERT INTO `registration` (`id`, `diverID`, `class`, `time`) VALUES
(3, 1, 1, '2012-11-18 11:30:00'),
(4, 1, 3, '2012-11-19 17:00:00'),
(13, 2, 1, '2012-11-19 17:00:00');

--
-- Constraints for dumped tables
--

--
-- Constraints for table `registration`
--
ALTER TABLE `registration`
  ADD CONSTRAINT `registration_ibfk_2` FOREIGN KEY (`class`) REFERENCES `classes` (`cid`);

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */; 
```

* * *

类：

```
-- phpMyAdmin SQL Dump
-- version 3.5.1
-- http://www.phpmyadmin.net
--
-- Host: localhost
-- Generation Time: Nov 16, 2012 at 11:16 AM
-- Server version: 5.5.24
-- PHP Version: 5.3.15

SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";
SET time_zone = "+00:00";

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;

-- --------------------------------------------------------

--
-- Table structure for table `classes`
--

CREATE TABLE IF NOT EXISTS `classes` (
  `cid` int(11) NOT NULL AUTO_INCREMENT,
  `className` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`cid`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=5 ;

--
-- Dumping data for table `classes`
--

INSERT INTO `classes` (`cid`, `className`) VALUES
(1, 'diving 101'),
(2, 'diving 102'),
(3, 'breathing exercices'),
(4, 'fish hunting');

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */; 
```

PHP代码

```
<?php
$html = '<!DOCTYPE HTML>
<html>
<head></head>
<body>';

//MYSQL Connection (change accordingly)
$mysqli = new mysqli("127.0.0.1", "root", null, "test");

// Classes list
$classList = getClassList($mysqli);

if (!isset($_GET['submit'])) {
    $html .= '<form method="get">
        diverID: <input name="diverID"/><br/>
        class: <select name="class">';

    foreach ($classList as $key => $val) {
        $html .= '<option value="'. $key .'">'.$val.'</option>';
    }

    $html .= '</select><br/>
        time: <input type="datetime" name="time"/><br/>
        <input type="submit" name="submit" value ="submit"/>
    </form>';
} else {
    // Retrieve results from POST and parse them
    $diverID = $mysqli->escape_string($_GET['diverID']);
    $class = $mysqli->escape_string($_GET['class']);
    $time = $mysqli->escape_string($_GET['time']);

    if (canDiverRegisterForClass($mysqli, $diverID, $class, $time)) {
        if (registerDiverInClass($mysqli, $diverID, $class, $time)) {
            $html .= "<p>You were successfully registered for $classList[$class] at $time</p>";
        } else {
            var_dump(mysqli_error($mysqli));
            $html .= "<p>An error ocurred while registering you. Please contact the administrator!</p>";
        }
    } else {
        $html .= "<p>You can't register for '$classList[$class]' at $time!</p>";
    }
}
$html .= '</body></html>';
print $html;

function getClassList($mysqli)
{
    $list = array();
    $result = $mysqli->query("SELECT * FROM classes");
    foreach ($result->fetch_all() as $r) {
        $list[$r[0]] = $r[1];
    }
    return $list;
}

function canDiverRegisterForClass($mysqli, $diverID, $class, $time)
{
    $canRegister = true;
    $query = "SELECT class, time FROM registration WHERE diverID = '$diverID'";

    $result = $mysqli->query($query);

    if ($result && $result instanceof mysqli_result) {
        foreach ($result->fetch_all() as $r) {
            if ($r[0] == $class) {
                return false;
            }
            if ($r[1] == $time) {
                return false;
            }
        }
        return true;
    } else {
        throw new Exception("Error retrieveng results from database!");
    }
}

function registerDiverInClass($mysqli, $diverID, $class, $time)
{
    $query = "INSERT INTO registration (diverID, class, time) VALUES ('$diverID', '$class', '$time')";
    if ($mysqli->query($query)) {
        return true;
    } else {
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T18:42:39.797

首先让您的选择语句检查重复值，然后插入您的数据，例如：

```
$duplicateResult=$mysqli->query("SELECT `time`,`user`,`class` FROM `table` WHERE `time`='$time' AND `user`='$user' AND `class`='$class'");
if($duplicateResult->num_rows>=1) {
 //DUPLICATE FOUND
} else {
 //INSERT HERE
} 
```

对不起，如果我没有完全使用你的表结构和查询，但原理是一样的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T18:44:38.743

看来，您`INSERTING`首先是行，然后检查它是否重复。您的插入查询首先出现在代码中，然后执行该检查。取而代之的是，您可以触发类似这样的查询，

```
$sql = sprintf("SELECT `class` FROM $DBName WHERE `class` = '%s' OR 'time' = '%s'", mysqli_real_escape_string($DiverID,$YouSecondParam)); 
$QueryResult = @mysqli_query($DBConnect, $SQLstring); 
```

[然后计算mysql_num_rows()](http://php.net/manual/en/function.mysql-num-rows.php)返回的行数

```
if(mysql_num_rows($QueryResult)>=1){
     //dont insert. 
}else{
    // insert 
} 
```

**编辑**

好奇，这不是两个查询吗，

```
$SQLstring = "INSERT INTO $TableName VALUES('$DiverID', '$Class', '$Days', '$Time')"; 
```

和

```
mysqli_query("INSERT INTO $TableName (`class`, `days`, `time`) VALUES ('".$Class.", ".$Days.", ".$Time."')"); 
```

除了带有 sprintf 和其他普通查询的一个之外是相同的吗？

**更新**

我读了你的代码。该行`If ($result = $QueryResult LIKE $Class)`必须抛出错误，因为`LIKE`php 中没有可以用来比较的东西。取而代之的是，您应该使用

```
if(mysql_num_rows($QueryResult)>=1){
     //dont insert. 
}else{
    // insert 
} 
```

除此之外，您的代码似乎还可以。还有一件事，您应该`$_GET`在触发数据库查询之前清理参数。我看到你已经删除了`sprintf`and `mysqli_real_escape_string`。最好使用它们。像，

```
 $Class = mysqli_real_escape_string($DBConnect,$_GET['class']);
 $Days = mysqli_real_escape_string($DBConnect,$_GET['days']);
 $Time = mysqli_real_escape_string($DBConnect,$_GET['time']);
 $diverID = mysqli_real_escape_string($DBConnect,$_GET['diverID']); 
```

# spring - Spring 3.0 - 有没有办法从类常量创建动态 bean id？

> ID：13366507
> 
> 赞同：0
> 
> 时间：2012-11-13T18:27:32.297
> 
> 标签：spring

我不确定这是否受支持，但想基于类常量创建带有 id 的 bean。我的计划 b 是通过 setter 将 bean 注入到一个类中，并通过 IOC 处理它们。

谢谢！

# css - 侧边栏和页脚中的相同和重复样式

> ID：13366510
> 
> 赞同：0
> 
> 时间：2012-11-13T18:27:34.527
> 
> 标签：css, wordpress, themes, wordpress-theming, sidebar

我在我的跨苹果 wordpress 主题中更改了页脚样式，我注意到页脚与侧边栏类别样式中的样式重复。

在这里查看效果很好的侧边栏样式：http: [//cor.co.il/contact](http://cor.co.il/contact)

另外，我注意到我的另一个侧边栏已更改为页脚样式。请参阅右侧的侧边栏：http: [//cor.co.il/video](http://cor.co.il/video)

现在，我进入了样式代码并试图改变一些东西但没有成功。

这是我的网站：[http ://cor.co.il](http://cor.co.il)

如何将页脚样式更改为不同的样式（显示在我的[主页](http://cor.co.il)上的样式），以及将侧边栏更改为不同的样式（我的[联系页面上](http://cor.co.il/contact)的样式）？

这是css文件：

[布局.css](http://cor.co.il/wp-content/themes/cross-apple/assets/css/layout.css)

[小部件.css](http://cor.co.il/wp-content/themes/cross-apple/assets/css/widgets.css)

和灰色风格：

[样式-grey.css](http://cor.co.il/wp-content/themes/cross-apple/assets/css/styles/style-grey.css)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T18:38:56.697

你能告诉我们你是如何修改页脚样式的吗？通过为该主题编辑 style.css 或其他方式？快速检查元素显示您的页脚小部件正在获取一个名为 widget_nav 的类，而您的侧边栏正在获取一个 widget_categories 应该是相反的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:20:34.920

自己解决了（再次）！

在widgets.css 中，我在我希望他显示在侧栏上的任何小部件之前添加#sidebar。所以，它看起来像这样：

```
#sidbar .widget_categories h3
#sidbar .widget_categories li
(padding: 8px 0;) 
```

代替：

```
.widget_categories h3
.widget_categories li
(padding: 8px 0;) 
```

它工作！

# java - Spring Mvc 动态请求映射

> ID：13366512
> 
> 赞同：3
> 
> 时间：2012-11-13T18:27:41.373
> 
> 标签：java, spring, spring-mvc

我的问题是控制器上的动态 url。我有类别树。我的类别有 n 个子类别。

我的网址：www.xyz.com/category/mainCategory/subCategory/subCategory/subCategory/subCategory

```
@Controller
@RequestMapping(value="/category/**")
public class CategoryController {

    ????     
    public void init()

} 
```

如何定义动态请求映射？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T00:03:41.900

您也可以尝试以下方法：

```
@RequestMapping(value="/category/{path}/**", method = RequestMethod.GET)
public void categoryTest(@PathVariable("path") String path, HttpServletRequest request) throws Exception {
    String remainingPaths = (String) request.getAttribute(HandlerMapping.PATH_WITHIN_HANDLER_MAPPING_ATTRIBUTE);
    logger.debug("path = " + path + "/" + remainingPaths);
} 
```

# javascript - 简单的 jquery 点击事件脚本，它是一个循环

> ID：13366516
> 
> 赞同：1
> 
> 时间：2012-11-13T18:27:57.373
> 
> 标签：javascript, jquery, click, mouseevent

我有一个简单的 jQuery 脚本。这是脚本：

```
var menu = $('#nav .menu');

$('li', menu).mouseenter(function() {
    $(this).find('.sub-menu').slideDown();
}).mouseleave(function(){
    $(this).find('.sub-menu').slideUp();
}); 
```

此脚本打开一个子菜单。但我对这个脚本有疑问。如果你快速过一遍。脚本每次启动。当您快速检查该项目时。菜单打开了很多次。我怎样才能解决这个问题？

感谢帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T18:29:54.380

使用 jQuery 的[.stop()](http://api.jquery.com/stop/)函数。传递必要的论点，例如。`.stop(true,true)`,`.stop(true)`

```
$('li', menu).mouseenter(function() {
    $(this).find('.sub-menu').stop().slideDown();
}).mouseleave(function(){
    $(this).find('.sub-menu').stop().slideUp();
}); 
```

或将其作为上下文传递对我来说似乎更整洁-它与 .find() 做同样的事情

```
$('li', menu).mouseenter(function() {
    $('.sub-menu',this).stop().slideDown();
}).mouseleave(function(){
    $('.sub-menu',this).stop().slideUp();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T18:31:57.910

使用这种方式：

```
$('#nav .menu li').hover(function() {
   $('.submenu').stop().slideDown();
}, function(){
   $('.submenu').stop().slideUp();
}); 
```

# regex - 使用 perl -e 匹配多行

> ID：13366517
> 
> 赞同：3
> 
> 时间：2012-11-13T18:28:01.453
> 
> 标签：regex, perl

我有一个格式为

```
 location:
 rome

 participants:
 cesar
 pompei
 Sylla 
```

我正在尝试调用`perl`以获取给定键的值，例如我的带参数函数`participants`将返回

```
 cesar
 pompei
 Sylla 
```

我面临的问题是，如果没有该选项`-n`，我的正则表达式似乎都不起作用。例如我期待

```
> perl -e '/(.*)/ms && print "$1\n" ' input.txt 
```

打印整个文档。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T20:29:27.783

在命令行上，您不妨使用段落模式：

```
perl -MData::Dumper -00 -anlwe 
    '$h=shift @F; $a{$h}=[@F]; }{ print Dumper \%a;' ceasar.txt 
```

**输出：**

```
$VAR1 = {
          'participants:' => [
                               'cesar',
                               'pompei',
                               'Sylla'
                             ],
          'location:' => [
                           'rome'
                         ]
        }; 
```

解释：

*   `-MData::Dumper`使用 Data::Dumper 模块。这仅用于演示，与您的问题无关。
*   `-00`使用段落模式，这意味着 - 简单地说 - 将输入记录分隔符设置为`\n\n`，以便输入在双换行符上拆分。
*   `-a`在空白处拆分段落。您可以使用它来限定它，`-F'\n'`使其仅在换行符上拆分。
*   `-n``while (<>)`程序周围的隐式循环。
*   `-l`此示例并非严格要求，但它以方便的方式为您处理换行符结尾。
*   `@F`是自动拆分选项使用的数组。这意味着我们将段落中的第一个单词作为标题，其余单词作为参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T19:07:21.107

默认情况下`-n`，`-p`一次一行地向您的单行脚本提供输入。因此，要使用多行搜索，您必须告知`perl`使用不同的记录分隔符。使用该`-0`选项。

要在一行中读取整个文件：

```
perl -0777 -ne '...' input.txt 
```

要使用“段落模式”（拆分为两个或多个连续的换行符，这可能是您想要解决此问题的方式）：

```
perl -00 -ne '...' input.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T18:37:35.670

如果你不使用 -n 你必须明确地阅读输入，例如

```
while(<>){do...} 
```

您没有得到匹配，因为您实际上并没有从标准输入读取任何内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T19:07:01.523

测试了这个：

```
# cat file
location:
rome

participants:
cesar
pompei
Sylla 
```

现在得到`participants`：

```
# perl -e 'undef $/; $_=<>; /participants:\s*(.*?)(\n\n|$)/s && print "$1\n";' file
cesar
pompei
Sylla 
```

UPD：正如 TLP 所提到的，它可以用 -0 开关重写：

```
# perl -0777 -e '$_=<>; /participants:\s*(.*?)(\n\n|$)/s && print "$1\n";' file
cesar
pompei
Sylla 
```

# ruby-on-rails - 在 Rails 中隐藏按钮（Agile Web Development with Rails 书）

> ID：13366518
> 
> 赞同：2
> 
> 时间：2012-11-13T18:28:02.467
> 
> 标签：ruby-on-rails, button, controller, agile, hidden

这是我的第一个问题，所以我希望我可以尽可能具体，但不要苛刻。

我正在使用 Rails 进行敏捷 Web 开发，并且对编程非常陌生。

当我在订单/新页面上时，我想隐藏一个“结帐”按钮，这样它就不会对用户购买做任何讨厌的事情。

目前，我并不真正了解实例变量是如何工作的，因为似乎无论我在哪里声明我的实例变量，在视图中或在 orderscontroller#new 中，它总是验证为真。

这似乎是因为当我在视图中使用实例变量来隐藏 div 时（使用 hidden_​​div_if(condition == true) ）按钮总是被隐藏！

不仅如此，当我这样做时：

```
<%= hidden_div_if( @hide_checkout_button == false ) do %>
<td><%= button_to 'Empty cart', cart, :method => :delete,
                  :confirm => 'Are you sure?' %></td>
<% end %>
<%= hidden_div_if( @hide_checkout_button == true ) do %>
  <td><%= button_to "Checkout", new_order_path, :method => :get %></td>
<% end %> 
```

两个按钮都被隐藏了！这个怎么可能！？！

在本例中，我将变量声明放在了 views\orders_form.html.erb 中：

```
<%= @hide_checkout_button = true %>
<%= form_for(@order) do |f| %>
  <% if @order.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@order.errors.count, "error") %> 
        prohibited this order from being saved:</h2>

      <ul>
        <% @order.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    ... 
```

这是一个讨论论坛，其中包含此问题的解决方案，但它们对我不起作用，我不知道为什么： http: [//pragprog.com/wikis/wiki/Pt-G-2/version/35](http://pragprog.com/wikis/wiki/Pt-G-2/version/35)

这是问题本身：

> 如果在结帐屏幕已显示时单击侧边栏中的结帐按钮会发生什么？你能找到在这种情况下禁用按钮的方法吗？（提示：控制器中设置的变量在布局和局部以及直接呈现的模板中可用。）

如果您需要更多信息来提供帮助，请询问，我不太确定要提供多少细节或哪些信息很重要。

提前致谢 ：-）

```
def new
    @cart = current_cart
    if @cart.line_items.empty?
      redirect_to store_url, :notice => "Your cart is empty"
      return
    end

    puts 34
    @hide_checkout_button = true
    @order = Order.new
    puts 37

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @order }
    end
  end 
```

> 在 2012-11-13 20:33:40 +0000 开始获取 127.0.0.1 的“/assets/logo.png” 服务资产 /logo.png - 304 未修改（1 毫秒）[2012-11-13 20:33： 40] WARN 无法确定响应正文的内容长度。设置响应的内容长度或设置 Response#chunked = true * 34 37 * /orders/new
> 
> 2012-11-13 20:33:49 +0000 OrdersController#new as HTML ←[1m←[36mCart Load (1.0ms)←[0m ←[1mSELECT”开始为 127.0.0.1 获取“/orders/new”购物车".* FROM "购物车" WHERE "购物车"."id" = ? LIMIT 1←[0m [["id", 63]] ←[1m←[35m (1.0ms)←[0m SELECT COUNT(*) FROM "line_items" WHERE "line_items"."c art_id" = 63

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:50:30.567

问题是缺少`=`. `<%= %>`改为做。

```
<%= hidden_div_if( @hide_checkout_button == true ) do %>
  <td><%= button_to "Checkout", new_order_path, :method => :get %></td>
<% end %> 
```

此外，对于布尔检查，您可以这样做`if(boolean)`，其评估结果与您输入`==` `true`/`false`

```
<%= hidden_div_if( @hide_checkout_button) do %>
   #...
<% end %> 
```

您想在调用视图的方法上设置该变量。在这种情况下，它`new`是`OrdersController`

```
def new
  @hide_checkout_button = true
end 
```

**编辑：**

将此添加到隐藏的 div 中，以查看它是否有助于找到将属性设置为的元素

```
<%= hidden_div_if(@hide_checkout_button, id: 'cart') do %> 
```

with（在应用程序助手中）

```
def hidden_div_if(condition, attributes = {}, &block 
  if condition
    attributes["style"] = "display: none" 
  end
  content_tag("div", attributes, &block)
end 
```

如果那不这样做，那么就这样做

```
<% if @hide_checkout_button %>
  <td><%= button_to "Checkout", new_order_path, :method => :get %></td>
<% else %>
  <td><%= button_to 'Empty cart', cart, :method => :delete, :confirm => 'Are you sure?' %></td>
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-12T17:54:38.093

用过的

```
<div class="actions">
<% if not @hide_checkout_button %>
<%= button_to 'Checkout', new_order_path, method: :get, class: "checkout" %>
<% end %>
<%= button_to 'Empty cart', cart, method: :delete, data: { confirm: "Are you sure?" }, remote: true %> 
```

# php - 如何使cakephp会话无限

> ID：13366519
> 
> 赞同：0
> 
> 时间：2012-11-13T18:28:04.087
> 
> 标签：php, session, cakephp

我只想询问如何使 cakephp 中的会话持续存在并仅在单击注销时才被销毁。

目前，当我关闭浏览器或离开计算机时，当我回来大约 1 小时时，它会提示我进入登录页面，这意味着会话已被删除。

Facebook 在某种程度上做到了这一点 - 除非您注销，否则您的会话将被存储，因此即使您关闭浏览器或离开计算机，您也将始终处于登录状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T22:28:32.920

从 Cake's [Session docs](http://book.cakephp.org/2.0/en/development/sessions.html)的最顶端：

> Session.timeout - 您希望会话持续的分钟数。

和

> Session.cookieTimeout - 您希望会话持续的分钟数。如果未定义，则将使用来自 Session.timeout 的值。

虽然你不能让它们无限，但尝试越来越大的数字，直到你满意为止。

```
<?php
Configure::write('Session', array(
    'timeout' => 4320 //3 days
)); 
```

# javascript - 隐藏手机地址栏延迟

> ID：13366524
> 
> 赞同：2
> 
> 时间：2012-11-13T18:28:17.893
> 
> 标签：javascript, android, jquery, ios, mobile

我有一个让我发疯的问题——我发现了另一个关于它的问题，但没有具体的解决方案。我正在使用以下内容隐藏移动网站上的 URL 栏：

```
window.addEventListener("load",function() {
    setTimeout(function(){
        window.scrollTo(0, 0);
    }, 0);
}); 
```

这很好用，但是在内容跳到顶部和实际 URL 栏向上滑动之间只有很大的差距。有没有其他人遇到过这个？这是另一个问题：[Jquery mobile - 延迟自动隐藏地址栏](https://stackoverflow.com/questions/13307085/jquery-mobile-delay-auto-hiding-address-bar)

这个问题指向iOS6新的“阅读器”按钮是罪魁祸首；有什么可预见的方法吗？[在移动 Safari 中隐藏地址栏，阅读器按钮可见](https://stackoverflow.com/questions/12569443/hiding-address-bar-in-mobile-safari-with-reader-button-visible)

仅供参考，与我发布的类似问题不同，我没有使用 jQuery mobile，只是使用普通的旧 jQuery 1.8。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:57:42.307

可能是您有图像，或者您正在使用来自 CDNS 的脚本需要一段时间才能加载，您可以尝试在浏览器中加载页面并使用时间线选项卡检查是否有任何内容需要很长时间才能加载。

另一个想法，问题可能是您的屏幕尺寸最初不够长，无法滚动？因此，在您运行其他脚本之前，它可能无法滚动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T19:50:30.207

所以绝对是“阅读器”按钮导致了延迟——我使用文章标签来显示我的内容；切换到标准 div 可以解决问题。FWIW，延迟从启用阅读器按钮的大约 5 秒到 iOS 6 上没有它的不到 1 秒。

# ruby-on-rails - 上限部署通过 sftp 上传失败

> ID：13366539
> 
> 赞同：2
> 
> 时间：2012-11-13T18:29:18.310
> 
> 标签：ruby-on-rails, capistrano, web-deployment

再会！我会尽量具体说明这一点。很抱歉，我在尝试部署我的应用程序时遇到了很多麻烦。我对 Rails 完全陌生，所以我遵循了使用 Rails 第 4 版进行敏捷 Web 开发，我被困在使用 capistrano 部署的部分我已经尝试了书中的确切代码，没有工作，并采取了一些来自这个论坛和其他论坛的建议被证明是有帮助的，但我仍然无法正确部署我的 deploy.rb 如下所示：

```
require 'bundler/capistrano'

set :user, 'user_created_for_this_example'

set :domain,  'IPADDRESS'

set :application, 'depot'

# file paths

set :repository,  "#{user}@#{domain}:depot.git"

set :deploy_to, "/home/#{user}/#{domain}"

# set :scm, :git # You can set :scm explicitly or Capistrano will make an intelligent guess 
based on known version control directory names

# Or: `accurev`, `bzr`, `cvs`, `darcs`, `git`, `mercurial`, `perforce`, `subversion` or `none`

#roles server

role :web, domain

role :app, domain

role :db, domain, :primary => true

#deploy config

set :deploy_to, "/home/#{user}/#{domain}"

set :deploy_via, :copy

set :scm, 'git'

set :branch, 'master'

set :scm_verbose, true

set :use_sudo, false 

# if you want to clean up old releases on each deploy uncomment this:
# after "deploy:restart", "deploy:cleanup"

# if you're still using the script/reaper helper you will need
# these http://github.com/rails/irs_process_scripts

# If you are using Passenger mod_rails uncomment this:

namespace :deploy do

  task :start do ; end

  task :stop do ; end

  task :restart, :roles => :app, :except => { :no_release => true } do

    run "#{try_sudo} touch #{File.join(current_path,'tmp','restart.txt')}"

  end

end

after "deploy:update_code", :bundle_install

desc "install the necesary prerequisites"

task :bundle_install, :roles => :app do

  run "cd #{release_path} && bundle install"

end 
```

当我运行 cap deploy:setup 和 cap deploy:check all 似乎工作正常：

```
~/rails_projects/depot$ cap deploy:setup

  * 2012-11-13 10:37:35 executing `deploy:setup'

  * executing "mkdir -p /home/git/xx.xx.xx.xx /home/git/xx.xx.xx.xx/releases /home/git
/xx.xx.xx.xx/shared /home/git/xx.xx.xx.xx/shared/system /home/git/xx.xx.xx.xx/shared/log 
/home/git/xx.xx.xx.xx/shared/pids"

    servers: ["xx.xx.xx.xx"]

    [xx.xx.xx.xx] executing command

    command finished in 158ms

  * executing "chmod g+w /home/git/xx.xx.xx.xx /home/git/xx.xx.xx.xx/releases /home/git/xx.xx.xx.xx/shared /home/git/xx.xx.xx.xx/shared/system /home/git/xx.xx.xx.xx/shared/log /home/git/xx.xx.xx.xx/shared/pids"

    servers: ["xx.xx.xx.xx"]

    [xx.xx.xx.xx] executing command

    command finished in 7ms

~/rails_projects/depot$ cap deploy:check

  * 2012-11-13 10:37:39 executing `deploy:check'

  * executing "test -d /home/git/xx.xx.xx.xx/releases"

    servers: ["xx.xx.xx.xx"]

    [xx.xx.xx.xx] executing command

    command finished in 152ms

  * executing "test -w /home/git/xx.xx.xx.xx"

    servers: ["xx.xx.xx.xx"]

    [xx.xx.xx.xx] executing command

    command finished in 5ms

  * executing "test -w /home/git/xx.xx.xx.xx/releases"

    servers: ["xx.xx.xx.xx"]

    [xx.xx.xx.xx] executing command

    command finished in 5ms

  * executing "which tar"

    servers: ["xx.xx.xx.xx"]

    [xx.xx.xx.xx] executing command

    command finished in 6ms

You appear to have all necessary dependencies installed 
```

但是当 cap deploy:migrations、cap deploy 或 cap deploy:cold 命令出现时，会弹出下一个：

```
~/rails_projects/depot$ cap deploy:migrations

  * 2012-11-13 10:37:42 executing `deploy:migrations'

  * 2012-11-13 10:37:42 executing `deploy:update_code'

    executing locally: "git ls-remote git@xx.xx.xx.xx:depot.git master"

    command finished in 241ms

  * getting (via checkout) revision c3f88ca97e5868dd476f20e9a044b7dad800274a to /tmp/20121113173743

    executing locally: git clone git@xx.xx.xx.xx:depot.git /tmp/20121113173743 && cd /tmp/20121113173743 && git checkout -b deploy c3f8
8ca97e5868dd476f20e9a044b7dad800274a

Cloning into '/tmp/20121113173743'...

remote: Counting objects: 392, done.

remote: Compressing objects: 100% (257/257), done.

remote: Total 392 (delta 111), reused 392 (delta 111)

Receiving objects: 100% (392/392), 8.59 MiB, done.

Resolving deltas: 100% (111/111), done.

Switched to a new branch 'deploy'

    command finished in 769ms

  * Compressing /tmp/20121113173743 to /tmp/20121113173743.tar.gz

    executing locally: tar czf 20121113173743.tar.gz 20121113173743

    command finished in 652ms

    servers: ["xx.xx.xx.xx"]

 ** sftp upload /tmp/20121113173743.tar.gz -> /tmp/20121113173743.tar.gz

    [xx.xx.xx.xx] /tmp/20121113173743.tar.gz

*** upload via sftp failed on xx.xx.xx.xx: Net::SFTP::StatusException 
(Net::SFTP::StatusException open /tmp/20121113173743.tar.gz (3, "permission denied"))

upload via sftp failed on xx.xx.xx.xx: Net::SFTP::StatusException (Net::SFTP::StatusException open /tmp/20121113173743.tar.gz (3, "permission denied")) 
```

很抱歉，如果这是一些虚拟问题、易于修复的问题或已经发布的问题，但我不知道还能尝试什么，我再次从这些东西开始，我真的迷路了。我在同一台机器上运行所有东西，所有 xx.xx.xx.xx 代表我的 IP 地址。任何建议将不胜感激。我试图尽可能具体，但如果缺少某些内容，我会发布它。预先感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-03T12:58:25.117

您的问题是您的 sftp 源和目标位置是相同的：

```
** sftp upload /tmp/20121113173743.tar.gz -> /tmp/20121113173743.tar.gz 
```

为了解决这个问题，您可以在 config/deploy.rb 文件中指定参数 copy_dir，如下所示：

```
set :copy_dir, "/tmp/sftp" 
```

无需手动创建该文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-01T14:49:27.170

We changed the Capfile from

```
set :deploy_via, :copy 
```

to

```
set :deploy_via, :remote_cache 
```

and this worked for us. We did not add the below line

```
default_run_options[:pty] = true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T22:35:20.350

尝试将此行添加到您的 deploy.rb 配置文件：

```
default_run_options[:pty] = true 
```

# linux - 在 Linux shell 中使用 putty 的 Crontab

> ID：13366541
> 
> 赞同：0
> 
> 时间：2012-11-13T18:29:41.710
> 
> 标签：linux, shell, cron, crontab, putty

这可能是非常初级的，但我是 Linux shell 的初学者。我使用腻子连接到服务器。

我设法登录到外壳就好了。但似乎没有任何运行 crontab 命令的选项。我需要先访问服务器上的任何其他文件吗？像 cd /var/spool/cron 吗？

我想创建一个简单的 cronjob，今天每 10 分钟启动一个 php 文件： */10 * 13 11 2 /PATH/mail.php

我是空白的，但似乎我可以做这样的事情来创建一个 crontab 文件。

vi allcron crontab allcron

当我这样做时，我会进入一个新窗口。在这里做什么？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T18:33:18.190

您应该使用 crontab 编辑/列表功能来添加/删除您的 cron 作业。

crontab -e（编辑）打开一个带有 cron 作业的编辑器。如果已经列出了 cronjobs，只需添加您的语句或附加： */10 * 13 11 2 /PATH/mail.php

crontab -l 查看你的 cronjobs。

有关更多信息，请参阅[http://unixhelp.ed.ac.uk/CGI/man-cgi?crontab+5](http://unixhelp.ed.ac.uk/CGI/man-cgi?crontab+5)或在您的 shell 中键入“man crontab”以获取手册页。

另请注意，您的用户必须具有操作 cronjobs 的权限。通常，对于大多数 cron 守护程序，每个用户都应该有权访问自己的 crontab。

# javascript - 如何在 Orchard CMS 博客中使用 vandelay 标签云？

> ID：13366542
> 
> 赞同：1
> 
> 时间：2012-11-13T18:29:40.930
> 
> 标签：javascript, asp.net-mvc, orchardcms

我正在尝试在 Orchard CMS 博客中使用 Vandelay Industries 模块。

这是它的链接：

[http://gallery.orchardproject.net/List/Modules/Orchard.Module.Vandelay.Industries](http://gallery.orchardproject.net/List/Modules/Orchard.Module.Vandelay.Industries)

我在管理员中启用了所有模块功能，但我没有让标签云看到标准标签。我还没有测试另一个。

除了启用它应该是为了使它工作之外，还有什么其他的吗？我错过了什么吗？

在此先感谢您的帮助。

如果需要，我可以提供屏幕截图（Stackoverflow 需要 10 分才能上传图片，所以这次无法上传）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T23:42:34.983

您需要在主题 css 中设置标签云的样式。这是我在自己的网站上使用的：

```
/* Tag Cloud */
ul.tagCloud { list-style: none; }
li.tagCloud-tag { display: inline; }
.tagCloud-tag a { border: none; }
.tagCloud-1 { font-size: 1em; }
.tagCloud-2 { font-size: 1.1em; }
.tagCloud-3 { font-size: 1.2em; }
.tagCloud-4 { font-size: 1.3em; }
.tagCloud-5 { font-size: 1.4em; }
.tagCloud-6 { font-size: 1.5em; }
.tagCloud-7 { font-size: 1.6em; }
.tagCloud-8 { font-size: 1.7em; }
.tagCloud-9 { font-size: 1.8em; }
.tagCloud-10 { font-size: 1.9em; } 
```

# c++ - 指针数组 C++

> ID：13366555
> 
> 赞同：1
> 
> 时间：2012-11-13T18:30:23.160
> 
> 标签：c++, class, pointers

我想创建一个指针数组来保存该类中对象的地址，因此当我调用扫描仪函数时，它会读取 pcode 并搜索具有相同 pcode 的对象。我声明数组错误吗？还是我误解了静态概念？或者是其他东西 ？

无论如何，我想必须发布整个代码

```
#include <string>
using namespace std;
class product{
    public:
        product();
        product(long&,string&);
        void setCode();
        void getCode(long);
        void static scanner();
        void const printer();
        static product *point[3];
        static int a;
    private:
        string pname;
        long pcode;

};/*
class PrepackedFood:public product{
    public:
        PrepackedFood(long&, string&,double);
    private:
        double uPrice;
};
class FreshFood:public product{
    public:
        FreshFood(long&,string&,double,double);
    private:
        double weight;
        double pricepk;

};*/

#include "product.h"
#include <iostream>
product::product(){pcode=0;pname="unknown";
point[a]= this;
a++;}
product::product(long& c,string&n){pcode=c;pname=n;
}
//void const product::printer(){cout<<getCode()}
void product::setCode(){ cout<<"enter product name\n  ";cin>>pname;
cout<<"enter product code _____\b\b\b\b\b";cout<<"\a";
cin>>pcode;cout<<endl;
cout<<pname<<endl;
cout<<pcode<<endl;
}

void product::getCode(long s){
    if ((*this).pcode=s){
    printer();
    }
}
void product::scanner(){
    long a;
    cout<<"SCANNING!\a_____\b\b\b\b\b";cin>>a;
    int i=0;
    while(i<3){
        if (point[i]->pcode==a){point[i]->printer();
        break;
        }
        i++;    
        //(i==3)?cout<<"try again\n":"\a";
        }
}
void const product::printer(){
    cout<<pname<<endl;
    cout<<pcode<<endl;

}

#include "product.h"
int main(){
    product a[3];
    int i=0;
    while(i<3){
    a[i].setCode();
    i++;
    }

    product::scanner();

    return 0;
} 
```

我知道它可以更容易地完成我只是在学习所以只想修复扫描仪功能。它不编译

1>product.obj：错误 LNK2001：未解析的外部符号“public：静态类产品 * * product::point”（？point@product@@2PAPAV1@A） 1>product.obj：错误 LNK2001：未解析的外部符号“public : 静态整数产品::a" (?a@product@@2HA)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:19:46.120

代码看起来很乱。

链接器问题的解决方案是*定义*已经声明的静态`point`成员：

```
product* product::point[3]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T18:37:51.763

是没有编译，还是编译崩溃了？发帖时，请务必准确说出问题所在。不过，我可以很容易地看到其中的一些运行时问题。

在您的循环中，您总是在点[0]、点[1] 和点[2] 处触摸指针。但是，您永远不会将它们初始化为 null 或进行 null 检查。因此，如果您在调用扫描仪之前没有调用构造函数 3 次，则会出现段错误，因为这些指针中的一个或多个将无效。

此外，您的构造函数从不检查溢出，因此如果您调用构造函数超过 3 次，它将出现段错误。如果您曾经直接从函数中来回传递对象，请记住编译器可能会插入临时对象构造函数。

# c++ - 检查向量中的一组值

> ID：13366558
> 
> 赞同：1
> 
> 时间：2012-11-13T18:30:36.250
> 
> 标签：c++, vector, stl-algorithm

我有一组数字：

```
{2, 6, 8} 
```

我想检查这些数字中是否有*任何*数字在我的向量中：

```
std::vector<int> myVector; 
```

我知道我可以使用算法的 std::find 单独检查每个：

```
auto iter1 = std::find(myVector.begin(), myVector.end(), 2);
auto iter2 = std::find(myVector.begin(), myVector.end(), 6);
auto iter3 = std::find(myVector.begin(), myVector.end(), 8);

if(iter1 != myVector.end() || iter2 != myVector.end() || iter3 != myVector.end())
    std::cout << "A desired value was found in the vector!" 
```

在这个例子中，只有三个数字，但真正的数字集会更大。此外，这似乎有点乏味。有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T18:34:46.080

您可以使用[`std::find_first_of`](http://en.cppreference.com/w/cpp/algorithm/find_first_of)：

```
std::vector<int> myVector = /* something */;
std::vector<int> values = {2, 6, 8};
auto first_found = std::find_first_of(std::begin(myVector), std::end(myVector),
                                      std::begin(values), std::end(values));
if (first_found != std::end(myVector)) {
  // Found one of them!
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T18:34:20.063

如果要检查一个数字是否包含在“集合”中，请使用`std::set`

```
std::set<int> myset = {3,4,6,34,2,6,78,8,5,0};
if (myset.count(5) > 0) {
   std::cout << "Hooray!" << std::endl;
} 
```

# c - 返回部分结构

> ID：13366561
> 
> 赞同：1
> 
> 时间：2012-11-13T18:30:43.297
> 
> 标签：c, function, pointers, struct, multidimensional-array

我正在尝试修改几个函数以返回结构类型而不更改所有值。具体来说，我正在尝试以各种方式调整图像大小并返回新图像的尺寸。我有一个名为“picspec”的结构，其中包含 netpbm 图片文件的标题信息（宽度、高度、最大颜色值和表示格式的数字 1-6）。

一些图片编辑可能需要修改所有这四个（元素？结构的一部分），但许多只会影响其中的一部分，在这些情况下最好保持原始值不变。我的第一个直觉是用以下方式结束函数：

```
picspec newinfo = {newx, newy, void, void};
return newinfo; 
```

...而且我对编译器错误并不感到特别惊讶。

注意：我意识到我可以通过将旧的“picspec”作为参数传递来轻松解决这个特定问题，但是“保持当前值”命令在其他情况下可能非常有用。我（目前非常有限）对指针的了解使我认为它可以做到，但我在搜索它方面并没有取得太大的成功。（“指向自我”教会了我所有关于链表的知识，但这不是我的想法。）

是否有“保持当前价值”的机制或类似简洁的方式来实现相同的目标？如果没有，最实用的选择是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T18:56:22.450

有两种方法可以使用函数来操作 C 结构：

如果返回值，则必须返回整个结构。您实际上仍然不必创建新副本：

```
MyStruct myStructModified(MyStruct s, int delta) {
  // s is already a copy of the original value
  s.member += delta;
  return s;
} 
```

...

```
{ // somewhere else, with MyStruct s
     // replace value of s with new one
     s = myStructModified(s, 10);
} 
```

返回相对较小的结构肯定是让自己专注于实际问题的好方法，而不是 C 指针问题，但是如果你想修改现有结构，并且仅限于 C（而不是没有 OOP 的 C 类 C++），那么你必须使用指针：

```
void modifyMyStruct(MyStruct *sp, int delta) {
  sp->member += delta;
} 
```

...

```
{ // somewhere else, with MyStruct s
     // pass pointer to s to function, which will modify it in-place
     modifyMyStruct(&s, 10);
} 
```

如果可以使用 C++ 编译器，还有第三种选择，使用 C++ 引用，它只是糖衣指针：

```
void modifyMyStruct(MyStruct &s, int delta) {
  s.member += delta;
} 
```

...

```
{ // somewhere else, with MyStruct s
     // pass reference to s to function, which will modify it in-place
     modifyMyStruct(s, 10);
} 
```

使用值更干净、更安全，但速度较慢（复制结构中的所有数据）。使用指针是有效的（只传递地址，通常在 CPU 寄存器中，非常快），但如果你做错了，你很容易遇到崩溃的错误。C++ 引用比指针更简洁、更安全，如果可以使用 C++ 编译器，通常是首选。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T19:04:46.940

如果返回部分结构真的很重要，而不是传递您操作的现有结构，您可以将“部分结构”定义为操作结构的函数，然后返回它。

不幸的是，C 不支持闭包。所以它会变得有点难看。您可能会用一个函数指针和一个指向绑定变量的 void 指针来表示闭包。

# heroku - 页面选项卡未始终显示

> ID：13366566
> 
> 赞同：1
> 
> 时间：2012-11-13T18:30:54.480
> 
> 标签：heroku, tabs, facebook-page

我最近在 Facebook 上设置了一个应用程序，以将页面选项卡功能用于我管理的业务页面。我使用了 Heroku 托管，并相信我设置正确，因为当我单击页面上的选项卡图标时，我能够看到它。但是，它通常会出现此错误并进入空白屏幕

> 您要查找的资源已被删除、名称已更改或暂时不可用。”

后来又出现了？？？

我已经多次浏览了 FB 开发者网站上关于应用程序、选项卡等的所有教程，但无法弄清楚。尽管他们都没有根据应用程序设置现在的外观以及整个 Heroku 的情况给出详细的说明。

我只检查了我的应用程序如何与 FB 集成的“页面选项卡”。我需要画布页面吗？在页面选项卡 URL/安全 URL 中，我输入了要在选项卡中显示的网站。应用域名是我公司网站的域名。使用给定的安装链接将应用程序添加到我的页面时，`https://www.facebook.com/dialog/pagetab?app_id=YOUR_APP_ID&next=YOUR_URL`我使用了 Heroku 网址`Your_URL`。

我需要在 中进行任何编辑`Heroku`吗？

请指教并感谢您的帮助！

# entity-framework - 手动更改迁移文件并保持兼容的 __migrationhistory 记录

> ID：13366572
> 
> 赞同：6
> 
> 时间：2012-11-13T18:31:28.837
> 
> 标签：entity-framework, entity-framework-migrations

在使用 Entity Framework Code First 迁移时，我和我的团队在尝试使我们的开发（以及客户的生产）数据库与我们的模型保持同步时遇到了很多问题。

由于 DropForeignKey() 方法调用错误，当我不得不手动编辑迁移代码时，问题似乎开始发生了。（我的项目使用 MySQL 5.5、MySQL Connector 6.6.2、EF 4.3。）有问题的命令：

```
DropForeignKey("Recebimento", "ComponenteFabricante_Id", "CompFab"); 
```

改为：

```
DropForeignKey("Recebimento", "FK_RecebimentoMaterial_CompFab_ComponenteFabricante_Id"); 
```

从那以后，每次我尝试这样做时`Update-Databse`，**即使我知道我已经拥有反映当前模型映射**的所有迁移代码，也会显示以下消息：“无法更新数据库以匹配当前模型，因为有待处理的更改和自动迁移已禁用。将挂起的模型更改写入基于代码的迁移或启用自动迁移。将 DbMigrationsConfiguration.AutomaticMigrationsEnabled 设置为 true 以启用自动迁移。您可以使用 Add-Migration 命令将挂起的模型更改写入代码-基于迁移。”

我不想使用 change `AutomaticMigrationEnabled`to `true`，所以我跑来`Add-Migration Test`看看创建了什么。创建的文件包含已经（通过以前的迁移）应用到数据库的命令。如果我尝试运行最后一次迁移，`Update-Database`则会失败（类似于“列已存在”或“表已存在”，这是正确的错误消息，因为迁移具有重复的代码）。

我怀疑这个问题与表`__migrationhistory`保存在 Model 列上的值（迁移应用的模型的二进制表示）有关 - 由于进行了手动更正，因此该值可能不是正确的值。

我该怎么做才能手动编辑迁移代码并使其正常工作？使用 Entity Framework Code First 迁移时的最佳实践是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-05T13:54:26.780

您是否尝试过使用 ForeignKey 属性在模型中手动指定外键名称？

```
[ForeignKey("FK_RecebimentoMaterial_CompFab_ComponenteFabricante_Id")]
YourNavigationProperty 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-17T17:45:57.760

我遇到了一个类似的问题，我的 __migrationhistory 表与模型不同步。我使用代码优先重新创建了一个现有数据库，但当时我的团队没有时间学习迁移并让它们工作。我们通过跟踪 SQL 语句来管理模型更改。因此，当我最终尝试开始使用迁移时，到处都应用了更改，但 EF 想要创建迁移。

为了在我的情况下解决这个问题，我能够删除 __migrationhistory 表，并创建一个新的初始迁移，该迁移不会对模型进行任何更改。这可能是不必要的，因为您可以添加迁移并将参数传递给 -IgnoreChanges。这应该更新 __migrationhistory 而实际上不需要任何数据库 SQL 更改来运行。

无论如何，我想在这里发帖，因为我的问题很相似，我最终查看了这个线程，希望能找到解决方案。我希望其他人能从LADISLAV MRNKA 的这篇文章中找到一些用处，因为我希望我早点看到它。

[http://www.ladislavmrnka.com/2012/03/ef-4-3-migrations-and-existing-database/](http://www.ladislavmrnka.com/2012/03/ef-4-3-migrations-and-existing-database/)

# php - 如何将多维数组从控制器传递到查看页面以及如何访问它

> ID：13366573
> 
> 赞同：-1
> 
> 时间：2012-11-13T18:31:28.503
> 
> 标签：php, codeigniter

谁能告诉我如何从控制器访问传递多维对象数组到查看页面，以及如何从查看页面访问这些数据。我的要求看起来像这样

我有我的第一个数组

```
for($i=1; $i<=$day;$i++){
    $search_result[$i][1] = $this->photos_m->get_user_photos_by_date($this->user->_id, str_pad($i, 2, '0', STR_PAD_LEFT) , $month, $year);
} 
```

而且我还需要像这样将值附加到这个数组中

```
foreach($friends as $friend=>$obj){   
    $friendCount++;
    for($i=1; $i<=$day;$i++){                                      
        $search_result['results'][$j] = $this->photos_m->get_friend_photos_by_date($obj->relation_id, str_pad($i, 2, '0', STR_PAD_LEFT) , $month, $year);
    }
} 
```

结果`$this->photos_m->get_friend_photos_by_date($obj->relation_id, str_pad($i, 2, '0', STR_PAD_LEFT) , $month, $year);`是一个对象数组。

请注意，我必须将数据存储在这样的多维数组中

```
$search_result[0][1],$search_result[0][1] .... $search_result[n][n] 
```

请检查我在上面粘贴的代码，如果我做错了什么，请指导我。如果正确，请告诉我如何从视图页面访问该数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T18:50:37.847

由于我无法发表评论，因此我将发布答案并对其进行编辑:)
您正在使用 codeigniter，对吗？

因此，如果您将数组（在您的**Controller**中）传递给您的视图，例如：

```
$data['results'] = $search_result;
$this->load->view('your_view', $data); 
```

然后，您可以像这样访问您的多维数组（在您的**View**中）：

```
<?php foreach($results as $result):
print_r($result); 
endforeach:?> 
```

如果这不起作用：您是否在执行时检查过是否有任何输出

```
foreach($friends as $friend=>$obj){ 
```

我的意思是，你检查 $friend 和 $obj 是否真的有一个值？
更重要的是：你`print_r($search_result);`在你的循环之后吗？看看你的数组中是否真的有任何值。

# windows-8 - 用于 Windows 8 的 VS 2012 的 TypeScript 语法突出显示

> ID：13366580
> 
> 赞同：1
> 
> 时间：2012-11-13T18:32:12.360
> 
> 标签：windows-8, visual-studio-2012, syntax-highlighting, typescript

在开始实际构建过程之前，我已经创建了一个支持 TypeScript 编译的 Windows 8 App 项目。

**但是`*.ts`文件的语法突出显示在哪里？**
当然，我已经安装了 VS TypeScript 扩展！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T18:35:24.677

这应该有效。如果您转到工具 -> 扩展和更新，您是否看到列出并启用了“TypeScript for Microsoft Visual Studio 2102”？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T02:08:56.037

您是否正在安装适用于 Windows 8 的 Visual Studio Express？TypeScript 安装程序或随附的 VSIX 尚不支持此版本。

# javascript - 有没有办法在页面上获取 xml 数据？

> ID：13366582
> 
> 赞同：0
> 
> 时间：2012-11-13T18:32:19.227
> 
> 标签：javascript, jquery, ajax, json, xml-parsing

我正在尝试将一些简单的 json 数据放入我的网站。我已经尝试了 ajax 和 json 的各种选项，但似乎没有给我我需要的结果。

我需要的只是数据请求，然后在成功时将结果附加到 div。该 url 是一个正确的 xml url，但即使我进行了设置，它似乎也给了我错误。

任何不使用人们可以推荐的插件的方法？

干杯，马克

编辑

我正在使用的代码：

```
$(document).ready(function(){
$.ajax({
    type: "GET",
    url: "http://www.granma.cu/ingles/granmai_ingl.xml",
    dataType: "xml",
    success: function(xml) {
        $(xml).find('item').each(function(){
            var id = $(this).attr('id');
            var title = $(this).find('title').text();
            var url = $(this).find('url').text();
            $('<div class="items" id="link_'+id+'"></div>').html('<a href="'+url+'">'+title+'</a>').appendTo('#cuban-news');
            $(this).find('desc').each(function(){
                var brief = $(this).find('brief').text();
                var long = $(this).find('long').text();
                $('<div class="brief"></div>').html(brief).appendTo('#link_'+id);
                $('<div class="long"></div>').html(long).appendTo('#link_'+id);
            });
        });
    }
}); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T18:39:32.553

```
 $.get('data.xml',function(data){
    // parse the data
 }); 
```

或者

```
$.ajax({
type: "GET",
url: "record.xml", 
dataType: "xml",
success: function(xml){
    parseXML(xml); 
},
error: function(response, textStatus, errorThrown){ 
    console.log(textStatus, errorThrown);}
   });
});

function parseXML(xml) {
   $(xml).find('record').each(function () {
      var entry = new Object();
      entry.order= $(this).find('itemDesc').text();
      parsedList.push(entry);
   }
   send();
 } 
```

在发送函数中，只需将文本附加到 div

# c# - 实体框架缺少 ObjectSet 方法

> ID：13366583
> 
> 赞同：1
> 
> 时间：2012-11-13T18:32:21.893
> 
> 标签：c#, linq, entity-framework-4

我从 SVN 导入了一个项目，从项目提供的脚本构建了一个 MSSQL CE 4.0 本地数据库，使用[SQL Server CE Toolbox](http://sqlcetoolbox.codeplex.com/)生成了实体模型，检查了连接字符串，检查了程序集，但是生成的过程中缺少一些方法`ObjectSet`实体。

从[微软的网站](http://msdn.microsoft.com/en-us/library/dd412719.aspx)，应该有一种方法`Any<TEntity>()`，但我没有。

这是我正在做的简单测试：

```
using (Dbntities ctx = new DbEntities())
{
   List<User> Users = ctx.Users.All();
} 
```

并且 Visual Studio 2010 无法编译，因为该方法`All()`不存在。

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T18:35:14.723

两件事情：

首先：确保添加所需的 using 语句作为[`All`](http://msdn.microsoft.com/en-us/library/bb534754.aspx)扩展方法`IQueryable<T>`：

```
using System.Linq; 
```

第二：使用`All`带有正确参数的方法：

```
List<User> Users = ctx.Users.All(x => x.Foo == "foo"); 
```

# php - 无法使用 Flash 和 php 上传文件

> ID：13366589
> 
> 赞同：0
> 
> 时间：2012-11-13T18:32:51.327
> 
> 标签：php, flash, air, flash-cs4

我正在尝试制作一个独立的 Flash/AIR 上传器。但我遇到了一些问题。我收到无法上传文件的错误消息。该脚本在上传图像时可以正常工作，但在上传 ZIP/RAR/Tar 时会出现错误

这是 Uploader.as

```
package {

    import flash.display.*;
    import flash.events.*;
    import flash.text.*;

    import flash.net.FileReference;
    import flash.net.FileReferenceList;
    import flash.net.FileFilter;
    import flash.net.URLRequest;
    import flash.utils.Timer;
    import flash.events.TimerEvent;

    public class Uploader extends MovieClip {

        var file:FileReference;
        var filefilters:Array;
        var req:URLRequest;
        var tm:Timer;
        var speed:Number = 0;
        var currbytes:Number = 0;
        var lastbytes:Number = 0;

        public function Uploader(){
            req = new URLRequest();
            req.url = ( stage.loaderInfo.parameters.f )? stage.loaderInfo.parameters.f : 'http://bios.website.ltd/client-000000000/upload.php';
            file = new FileReference();
            setup( file );
            select_btn.addEventListener( MouseEvent.CLICK, browse );
            progress_mc.bar.scaleX = 0;
            tm = new Timer( 1000 );
            tm.addEventListener( TimerEvent.TIMER, updateSpeed );
            cancel_btn.addEventListener( MouseEvent.CLICK, cancelUpload );
            cancel_btn.visible = false;
        }

        public function browse( e:MouseEvent ){
            filefilters = [ new FileFilter('Archives', '*.rar;*.zip;*.tar') ]; // add other file filters
            file.browse( filefilters );
        }

        private function setup( file:FileReference ){
            file.addEventListener( Event.CANCEL, cancel_func );
            file.addEventListener( Event.COMPLETE, complete_func );
            file.addEventListener( IOErrorEvent.IO_ERROR, io_error );
            file.addEventListener( Event.OPEN, open_func );
            file.addEventListener( ProgressEvent.PROGRESS, progress_func );
            file.addEventListener( Event.SELECT, selectHandler );
            file.addEventListener( DataEvent.UPLOAD_COMPLETE_DATA, show_message );      
        }

        private function cancel_func( e:Event ){
            trace( 'canceled !' );
        }

        private function complete_func( e:Event ){
            trace( 'complete !' );
        }

        private function io_error( e:IOErrorEvent ){
            var tf = new TextFormat();
            tf.color = 0xff0000;
            label_txt.defaultTextFormat = tf;
            label_txt.text = 'The file could not be uploaded.';
            tm.stop();
            cancel_btn.visible = false;
            select_btn.visible = true;
        }

        private function open_func( e:Event ){
            //trace( 'opened !' );
            tm.start();
            cancel_btn.visible = true;
            select_btn.visible = false;
        }

        private function progress_func( e:ProgressEvent ){
            progress_mc.bar.scaleX = e.bytesLoaded / e.bytesTotal;
            var tf = new TextFormat();
            tf.color = 0x000000;
            label_txt.defaultTextFormat = tf;
            label_txt.text = Math.round( (e.bytesLoaded/e.bytesTotal)*100)+'% uploaded '+speed+' kb/s';
            currbytes = e.bytesLoaded;
        }

        private function selectHandler( e:Event ){
            file.upload( req );

        }

        private function show_message( e:DataEvent ){
            tm.stop();
            var tf = new TextFormat();
            if( e.data == 'ok' ){
                tf.color = 0x009900;
                label_txt.defaultTextFormat = tf;
                label_txt.text = 'The file has been uploaded.';
            } else if( e.data == 'error'){
                tf.color = 0xff0000;
                label_txt.defaultTextFormat = tf;
                label_txt.text = 'The file could not be uploaded.';
            }
        }

        private function updateSpeed( e:TimerEvent ){
            speed = Math.round( (currbytes - lastbytes)/1024 );
            lastbytes = currbytes;
        }

        private function cancelUpload( e:MouseEvent ){
            file.cancel();
            reset();
        }

        private function reset(){
            cancel_btn.visible = false;
            select_btn.visible = true;
            label_txt.text = '';
            progress_mc.bar.scaleX = 0;
        }

    }   
} 
```

这是 Upload.php

```
<?php
$uploads_dir = './data/';

if( $_FILES['Filedata']['error'] == 0 ){
    if( move_uploaded_file( $_FILES['Filedata']['tmp_name'], $uploads_dir.$_FILES['Filedata']['name'] ) ){
        echo 'ok';
        exit();
    }
}
echo 'error';
exit();
?> 
```

关于为什么我不能上传 ZIP/RAR/Tar 文件的任何线索或建议？

# windows-7 - 包含括号的 QUrl

> ID：13366591
> 
> 赞同：0
> 
> 时间：2012-11-13T18:32:52.243
> 
> 标签：windows-7, qt4

我们的应用程序是 32 位应用程序。当它安装在 Windows 7 64 位时，通常安装在“C:\Program Files (x86)”，而不是“C:\Program Files”。我们正在根据安装位置构建一个 Url，并将其作为 Web 服务的一部分传递。我们正在构建这样的 Url：

```
ppmPath = "http://" + ipAddress + ":13007/" + folder + ".ppm" + "?filePath="
          + applicationDirPath + "/" + FIRMWARE;
QUrl ppmURL( ppmPath, QUrl::TolerantMode );
ppmPath = QString( ppmURL.toEncoded() ); 
```

变量类型和含义是通常的。

由于 Windows 7 64 位的“applicationDirPath”包含一个右括号“)”——在“(x86)”子字符串中——显然 URL 已损坏。如果我们将它安装到任何其他位置，它会完美运行，即使该位置有任何其他特殊字符。

URL中的“）”字符如何处理，这样才不坏呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T22:35:53.593

从[文档](http://doc.qt.digia.com/qt/qurl.html#ParsingMode-enum)来看，括号似乎不是由 QUrl 自动编码的，即使在宽容模式下也是如此。如果您首先将 URL 包装在 QString 中，然后将所有`(`字符替换为“%28”，并将所有`)`字符替换为“%29”，那么它的行为应该与您预期的一样。

```
QString ppmPath = QString("http://" + ipAddress + ":13007/" + folder + ".ppm" + "?filePath="
          + applicationDirPath + "/" + FIRMWARE);
QUrl ppmURL( ppmPath, QUrl::TolerantMode );
ppmPath = QString( ppmURL.toEncoded() );
ppmPath.replace(QChar('('), "%%28");
ppmPath.replace(QChar(')'), "%%29"); 
```

我不是 100% 确定双% 需要在那里，但我记得过去遇到过麻烦。尝试两种方式。

或者，您可以尝试使用[QUrl::toPercentEncoding()](http://doc.qt.digia.com/qt/qurl.html#toPercentEncoding)并完全跳过构造函数。它似乎可以转换括号。

```
QUrl ppmURL(QString("http://" + ipAddress + ":13007/" + folder + ".ppm"), QUrl::TolerantMode );
QString filepath = QUrl::toPercentEncoding(applicationDirPath + "/" + FIRMWARE);
ppmUrl.addEncodedQueryItem("filepath", filepath.toLocal8Bit());
ppmPath = QString( ppmURL.toEncoded() ); 
```

# prestashop - 有没有办法在管理页面上添加一个快速链接到模块的配置？

> ID：13366597
> 
> 赞同：2
> 
> 时间：2012-11-13T18:33:00.573
> 
> 标签：prestashop

是否可以在管理页面（目录、订单、客户...）的顶部菜单栏上添加一个链接，直接进入模块的配置页面？我继承了一个带有大量杂乱代码的大型模块，如果可能的话，我真的很想保留这些代码。

唯一的要求是它的配置**必须**可以从该菜单栏访问（或者，如果没有其他可能的选项，可以从快速链接部分访问；特别是这个可以很容易地实现，除了令牌部分）。

**编辑：**我设法通过创建一个管理控制器来完成它，但是我在生成正确的访问令牌时遇到了问题。我真的不知道该怎么做才能修复它，因此，我特此推出（又一个）赏金。

这是我用于重定向的代码：

```
<?php

class AdminMultiBlockController extends AdminController 
{   
    public function __construct()
    {
        global $cookie;

        // this doesn't really work
        $tab = 'adminmodules';
        $token = Tools::getAdminToken($tab.(int)(Tab::getIdFromClassName($tab)).(int)($cookie->id_employee));

        Tools::redirectAdmin('index.php?controller=adminmodules&configure=egr_MultiBlockSlider&token=' . $token);
    }
} 
```

我的解决方法是强制使用工作令牌，但这不起作用。

我究竟做错了什么？为了成功访问模块的配置，我应该在 getAdminToken() 函数中放入哪些参数？

我目前正在使用 Prestashop v1.5.1。

干杯伙计们！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-17T21:36:21.010

无法重现问题，我只能猜测。
但是，请尝试使用以下代码：

```
$url  = 'index.php?controller=AdminModules&configure=egr_MultiBlockSlider';
$url .= '&token='.Tools::getAdminTokenLite('AdminModules');
Tools::redirectAdmin($url); 
```

# python - 如何编写带有联接和聚合的 SQLAlchemy 查询？

> ID：13366602
> 
> 赞同：3
> 
> 时间：2012-11-13T18:33:25.240
> 
> 标签：python, sqlalchemy

我有一个包含 3 列的表：类型、内容和时间（整数）。对于每个“类型”，我想选择具有最大（最近）“时间”整数和相应数据的条目。如何使用 SQLAlchemy 和 Python 做到这一点？我可以通过执行以下操作使用 SQL 来做到这一点：

```
select
  c.type,
  c.time,
  b.data
from
  parts as b

inner join

  (select
    a.type,
    max(a.time) as time
  from parts as a
  group by a.type) as c

on

b.type = c.type and
b.time = c.time 
```

但是我怎样才能在 SQLAlchemy 中做到这一点呢？

表映射：

```
class Structure(Base):
    __tablename__ = 'structure'
    id = Column(Integer, primary_key=True)
    type = Column(Text)
    content = Column(Text)
    time = Column(Integer)

    def __init__(self, type, content):
        self.type = type
        self.content = content
        self.time = time.time()

    def serialise(self):
        return {"type" : self.type,
            "content" : self.content}; 
```

尝试的查询：

```
 max = func.max(Structure.time).alias("time")
    c = DBSession.query(max)\
        .add_columns(Structure.type, Structure.time)\
        .group_by(Structure.type)\
        .subquery()
    c.alias("c")

    b = DBSession.query(Structure.content)\
        .add_columns(c.c.type, c.c.time)\
        .join(c, Structure.type == c.c.type) 
```

给我：

> sqlalchemy.exc.OperationalError: (OperationalError) near "(": 语法错误 u'SELECT structure.content AS structure_content, anon_1.type AS anon_1_type, anon_1.time AS anon_1_time \nFROM structure JOIN (SELECT time.max_1 AS max_1, structure .type AS type, structure.time AS time \nFROM max(structure.time) AS time, structu re GROUP BY structure.type) AS anon_1 ON structure.type = anon_1.type' ()

我基本上是在黑暗中刺伤，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-14T14:31:07.613

使用子查询尝试以下代码：

```
subq = (session.query(
            Structure.type, 
            func.max(Structure.time).label("max_time")
        ).
        group_by(Structure.type)
        ).subquery()

qry = (session.query(Structure).
       join(subq, and_(Structure.type == subq.c.type, Structure.time == subq.c.max_time))
       )

print qry 
```

生成 SQL：

```
SELECT  structure.id AS structure_id, structure.type AS structure_type, structure.content AS structure_content, structure.time AS structure_time
FROM    structure 
JOIN    (SELECT structure.type AS type, max(structure.time) AS max_time
         FROM structure GROUP BY structure.type) AS anon_1 
    ON  structure.type = anon_1.type 
    AND structure.time = anon_1.max_time 
```

# javascript - 如何在 javascript 函数中使用 PHP 生成的 JSON 数组？

> ID：13366603
> 
> 赞同：0
> 
> 时间：2012-11-13T18:33:40.093
> 
> 标签：javascript, arrays, json

我正在尝试在 javascript 函数中使用 php 函数中生成的 JSON 数组。我的代码是这样的：

```
$query = "SELECT lat, lng FROM Eventi";
$result = mysql_query($query) or die(mysql_error() . "<br/><br/>" . $query);
if (mysql_affected_rows() != 0) {
     while($r = mysql_fetch_array($result)) {
        $rows =  array(
           "latitudine" => $r['lat'],
           "longitudine" => $r['lng'],
       );}
       $risultato_rows = json_encode($rows); 
```

现在我想在一个子例程中恢复它们并使用 javascript 来使用它们，我尝试了：

```
var res = JSON.parse($risultato_rows);
    alert var prova = res.[latitudine]; 
```

此代码不起作用；我该怎么做才能使其正常运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T18:35:05.547

```
res.[latitudine];  // You seem to mix up both the
                   // dot and bracket notation.. 
```

应该是

`res.latitudine;` **或者** `res["latitudine"];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T18:36:59.137

PHP 变量在 Javascript 中不直接可见。假设您不使用 AJAX，而只是尝试在脚本中嵌入 JSON，您可能会这样做：

```
?><script>
var res = JSON.parse('<?php echo $risultato_rows; ?>');
var prova = res.latitudine;
alert (prova);
</script><?php 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T18:42:32.430

您的代码存在一些问题：

1.  您需要`echo`包含在`$risultato_rows`. 那是：

    `var res = JSON.parse('<?= $risultato_rows; ?>');`

2.  访问属性时，将键名作为字符串放在括号中。要访问该`latitudine`属性，您将使用`res.["latitudine"]`

3.  var 关键字在声明变量时使用，而不是在访问它们时使用。使用单独的语句来分配值`prova`并警告它。

# javascript - Chrome 开发者工具如何模拟触摸事件？

> ID：13366610
> 
> 赞同：3
> 
> 时间：2012-11-13T18:34:01.703
> 
> 标签：javascript, events, touch, emulation

我尝试了一些不同的 Javascript 工具/hacks/框架来模拟 PC 上的触摸事件，但没有一个能像 Chrome 的开发人员工具那样完美无缺。它是如何完成的？可以用 Javascript 做到这一点吗？

让我举个例子来说明我的意思：我已经构建了一个 webapp，专门用于触摸屏，包含一堆可拖动的元素。现在我也想让它可用于普通的网络浏览器。最简单的方法是使用一个小型 Javascript 框架，将鼠标事件映射到触摸事件，例如[touche.js](https://github.com/davidcalhoun/touche)。这种方法的问题是，如果我快速拖动，鼠标指针将从可拖动对象中移出，然后立即停止。当我使用 Chrome 的内置模拟触摸事件（在开发人员工具中）时，这永远不会发生。我可以随心所欲地拖动。代码完全一样，除了框架。

您对为什么会发生这种情况有任何想法，以及是否有任何解决问题的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-18T22:01:46.850

可能比javascript低。尝试[在 chromium 代码库中搜索 touchstart，](https://code.google.com/p/chromium/codesearch#search/&q=touchstart&sq=package%3achromium&type=cs)您会发现它主要是 C++ 代码:(

# forms - 无法在第一次尝试时通过 php 邮件发送电子邮件

> ID：13366613
> 
> 赞同：1
> 
> 时间：2012-11-13T18:34:17.207
> 
> 标签：forms, email, php

我试图在我的网站上使用 PHPMailer 通过 SMTP 发送电子邮件，它在我第二次尝试（使用提交）时工作，但第一次它说它无法验证，登录名或密码无效。我搜索了很多都找不到答案，有人可以帮助我吗？顺便说一句，我使用 JSON 在警报中获取 PHP 响应。我的主机没有“smtp”。在前面，因为支持告诉我这样做。

这是代码：

```
else {
$phpmail = new PHPMailer();

$phpmail->IsSMTP(); // envia por SMTP
$phpmail->Host = "velvetwebdesign.com.br"; // SMTP servers
$phpmail->Port = "587"; // Port
$phpmail->SMTPAuth = true; // Caso o servidor SMTP precise de autenticação
$phpmail->SMTPDebug  = 1; 
$phpmail->Username = "email@velvetwebdesign.com.br"; // SMTP username
$phpmail->Password = "xxxxxxx"; // SMTP password

$phpmail->IsHTML(true);

$phpmail->From = 'email@velvetwebdesign.com.br';
$phpmail->FromName = $_POST['nome'];

$phpmail->AddAddress("velvetwebdesign@velvetwebdesign.com.br");
$phpmail->AddAddress($_POST['email']);
$phpmail->Subject = 'Contato Velvet Web Design';
$phpmail->Body .= "<b>Cliente:</b> ".$_POST['nome']."<br />";
$phpmail->Body .= "<b>E-mail:</b> ".$_POST['email']."<br />";
$phpmail->Body .= "<b>Telefone:</b> ".$_POST['telefone']."<br />";
$phpmail->Body .= "<b>Assunto:</b> ".$_POST['assunto']."<br /><br />";
$phpmail->Body .= "<b>Mensagem:</b><br />".nl2br($_POST['mensagem'])."<br /><br />";
$phpmail->Body .= "Recebemos a sua mensagem, responderemos em breve.<br />";
$phpmail->Body .= "http://www.velvetwebdesign.com.br/";

$send = $phpmail->Send();

if($send){
    echo "A Mensagem foi enviada com sucesso. Enviaremos uma copia para o seu e-mail tambem.";
    exit; 
}else{
    echo "Tente novamente por favor. Erro: " .$phpmail->ErrorInfo;
   exit;
} 
```

} ?>

# solr - 按日期差异排序结果

> ID：13366620
> 
> 赞同：2
> 
> 时间：2012-11-13T18:34:54.377
> 
> 标签：solr

我们有一个由输入日期的 +/- 1 个月的日期范围查询的 solr 结果。如果我输入 2012-12-01，我会得到一个从 2012-11-01 到 2013-01-01 的结果集。

这很好用，但我们希望在输入日期的日期差异之后对结果进行排序。

例如，如果我们有日期：

> 2012-11-10、2012-11-30、2012-12-03、2012-12-10

我们希望 Result 像这样排序：

> 2012-11-30, 2012-12-03, 2012-12-10, 2012-11-10

任何想法如何在 solr 中实现这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T01:24:19.837

您可以`&sort=sub(date_you_enter,date_fieldname_on_documents) asc`在查询中添加参数。基本上`sub`函数将计算差异，然后您将能够根据该结果对其进行排序。

作为参考，您还可以查看[http://wiki.apache.org/solr/FunctionQuery](http://wiki.apache.org/solr/FunctionQuery)页面了解更多可能对您有用的功能

# asp.net-mvc - DropDownListFor 返回选中项

> ID：13366623
> 
> 赞同：0
> 
> 时间：2012-11-13T18:35:04.313
> 
> 标签：asp.net-mvc, razor

在我**看来**，我有以下几点：

```
<div class="editor-field">
   @Html.DropDownListFor(x => x.Subject, (IEnumerable<SelectListItem>) ViewBag.Clients)
</div> 
```

这就是我调用视图的方式：

```
var list = new List<SelectListItem>
               {
                   new SelectListItem {Text = "Gas Order", Value = "delivery"},
                   new SelectListItem {Text = "Account Services", Value = "account"},
                   new SelectListItem {Text = "Service Call", Value = "service"},
                   new SelectListItem {Text = "Inquiry", Value = "inquiry"}
               };
ViewBag.Clients = list; 
```

返回视图（）；

这是在我的**模型**中：

```
[Required]
[StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 6)]
[DataType(DataType.Text)]
[Display(Name = "Subject")]
public string Subject { get; set; } 
```

我正在尝试返回所选值。

由于屏幕上的错误而重新加载屏幕时，我收到此错误：

> 具有键“Subject”的 ViewData 项属于“System.String”类型，但必须属于“IEnumerable”类型。

我假设这是由于这条线：

```
public string Subject { get; set; } 
```

如果是这种情况，我如何将所选项目恢复到我的模型中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:52:15.437

> 由于屏幕上的错误而重新加载屏幕时，我收到此错误...

确保`ViewBag.Clients`刷新时具有正确的值。

这就是为什么你应该避免使用`ViewBag`并且只使用 ViewModel。
将所有相关数据放在那里。

# python - 带有 libusb 驱动程序 python 的 Opencv 网络摄像头

> ID：13366629
> 
> 赞同：2
> 
> 时间：2012-11-13T18:35:24.910
> 
> 标签：python, opencv, webcam, libusb

我正在使用 python 并将 wx 用于我的 GUI。我正在使用 OpenCv 从我的网络摄像头捕获帧，并且在使用网络摄像头默认驱动程序时效果很好。但是，我也尝试使用带有 libusb 后端的 pyUSB 来检测在任何给定时刻插入了哪些 USB 设备。为了使用 pyUSB 来确定插入了哪些设备，我需要使用 libusb 为网络摄像头生成驱动程序。从 libusb 生成的驱动程序会自动安装，然后我可以使用 pyUSB 的 find usb.core.find 方法来枚举连接的 USB 设备。

我的问题是现在 OpenCv 无法捕获帧。我相信我的代码实际上得到了一个相机捕捉对象，它得到了帧，但帧是黑色的。我可以通过卸载 libusb 驱动程序并重新安装默认网络摄像头驱动程序来立即检查驱动程序是否导致问题。我需要指示 OpenCv 使用这个新的 libusb 驱动程序吗？如果是这样，怎么做？谷歌没有发现任何明显的东西。

编辑：如果它很重要，我在 Windows 7 64 位上使用 python 2.7.3

# c# - Winform.cs编码页面的高度限制

> ID：13366631
> 
> 赞同：0
> 
> 时间：2012-11-13T18:35:36.753
> 
> 标签：c#, windows, winforms, visual-studio-2010

我知道方法/事件处理程序/构造和全局区域的高度限制，但我想知道关于 winform.cs 编码页面的高度限制的有趣的事情。

winform.cs 编码页有高度限制吗？如果没有，您能描述一下winform.cs 编码页面的设计吗？就像它是如何设置/设计为无限高度的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T18:43:52.660

我希望我能正确理解您的问题，但是您是在问如何设置 winform 的最大大小吗？

如果是这样，您可以在设计器中更改 MaximumSize 属性，或在 *.cs 文件中自行设置。

# facebook - Facebook 移动网络应用程序：“找不到页面”

> ID：13366637
> 
> 赞同：0
> 
> 时间：2012-11-13T18:36:21.290
> 
> 标签：facebook, mobile, web

我有一个可以正常运行的 Facebook 应用程序。为了也针对移动用户，我制作了一个正确配置的移动版本，在单独访问它时也可以使用。但是，如果我使用手机（或模拟）单击指向应用程序的链接，则无法重定向到移动站点：“找不到页面”。

有任何想法吗？我什至不知道错误可能出在哪里，因为这些应用程序都可以自行运行（并且它们都具有或多或少相同的代码，对于某些 css 除外）。

更新：我猜现在问题可能是这样的：http: [//developers.facebook.com/bugs/450023335030232](http://developers.facebook.com/bugs/450023335030232)

这实际上会导致重定向问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:57:35.823

它并没有真正解决技术问题，但使用 smarturl.it 我设法避免了错误。

# javascript - 如何为 Android 创建 phonegap 亮度插件

> ID：13366639
> 
> 赞同：1
> 
> 时间：2012-11-13T18:36:22.533
> 
> 标签：javascript, android, cordova

由于我发现无法使用 Phonegap 更改设备亮度，所以我决定自己创建这个插件。我是 Phonegap 的新手，我不知道这难不难。我有一些关于如何为 Phonegap 创建插件的示例但是有些东西我不明白。我有这个用于更改屏幕亮度的代码，我想为 Phonegap 创建一个调用它的方法：

```
private void setBrightness(int brightness) {
    WindowManager.LayoutParams layoutParams = getWindow().getAttributes();
    layoutParams.screenBrightness = brightness / 100.0f;
    getWindow().setAttributes(layoutParams);
} 
```

是否可以？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T19:51:06.080

[是的，如果您遵循插件开发指南](http://docs.phonegap.com/en/2.2.0/guide_plugin-development_index.md.html#Plugin%20Development%20Guide)，这很容易做到。对于你想要做的事情是这样的：

```
cordova.define("cordova/plugin/brightness", 
  function(require, exports, module) {
    var exec = require("cordova/exec");
    var Brightness = function () {};

    var BrightnessError = function(code, message) {
      this.code = code || null;
      this.message = message || '';
    };

    Brightness.CALL_FAILED = 0;

    Brightness.prototype.set = function(level,success,fail) {
      exec(success,fail,"Brightness", "set",[level]);
    };

    var brightness = new Brightness();
    module.exports = brightness;
}); 
```

然后，您需要编写一些 Java 代码来拨打电话。您需要创建一个扩展 Plugin 类的新类并编写如下执行方法：

```
public PluginResult execute(String action, JSONArray args, String callbackId) {
    PluginResult.Status status = PluginResult.Status.OK;
    String result = "";

    try {
        if (action.equals("set")) {
            int brightness = args.getInt(0);
            WindowManager.LayoutParams layoutParams = getWindow().getAttributes();
            layoutParams.screenBrightness = brightness / 100.0f;
            this.cordova.getActivity().getWindow().setAttributes(layoutParams);
        }
        else {
            status = PluginResult.Status.INVALID_ACTION;
        }
        return new PluginResult(status, result);
    } catch (JSONException e) {
        return new PluginResult(PluginResult.Status.JSON_EXCEPTION);
    }    
} 
```

无论您如何调用此类，您都需要在 res/xml/config.xml 文件中添加一行，以便 PluginManager 可以创建它。

```
<plugin name="Brightness" value="org.apache.cordova.plugins.Brightness"/> 
```

最后在您的 JavaScript 代码中，您需要创建他们的插件并像这样调用它：

```
function panicButton() {
    var brightness = cordova.require("cordova/plugin/brightness");
    brightness.set(50);
} 
```

那应该差不多了。

# assembly - 宏中的本地数据

> ID：13366640
> 
> 赞同：0
> 
> 时间：2012-11-13T18:36:25.000
> 
> 标签：assembly, x86-16, tasm

这就是我在宏中存储本地数据的方式（我使用 TASM）：

```
locals LL
.model small
.stack 100h
.data

.code

exit proc
    mov ax, 4C00h
    int 21h
endp

printStr macro str
jmp LLcode
    _str db str,'$'
LLcode:
    push ax dx

    mov dx, @code
    mov ds, dx

    mov dx, offset _str
    mov ah, 9
    int 21h

    mov dx, @data
    mov ds, dx

    pop dx ax   
endm

start:
    printStr 'Hello world

    call exit
end start 
```

但是，现在我必须在每个宏中将 ds 更改为代码段地址，然后再将其更改回数据段地址。有一个更好的方法吗？还是每个人都这样做的“标准”方式？

或者也许这是一个更好的方法？

```
push ax dx ds

mov dx, @code
mov ds, dx

mov dx, offset _str
mov ah, 9
int 21h

pop ds dx ax 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T22:21:49.297

 `````
push ds ; save old ds
push cs
pop ds ; make ds same as cs
; do your thing
pop ds ; restore old ds 
````  `...应该做你想做的。为什么不把你所有的数据放在你的代码段中，设置`ds`成那个，然后放在那里呢？``

# sql - SQL：包括带有外连接的 Null 值

> ID：13366642
> 
> 赞同：-1
> 
> 时间：2012-11-13T18:36:48.170
> 
> 标签：sql, sql-server

使用此查询，我的输出包括 COUNT 为 0 的所有值，但我仍然收到未包含 Null 值的警告。双连接是为了让表适当链接以计算订单数，但我也想包括所有 NULL，而不仅仅是 COUNT 为 0 的地方。我错过了什么？

```
SELECT EmpNo, LastName, COUNT(CustomerOrder.OrderNo)
FROM Employee 
LEFT OUTER JOIN Customer
    ON Customer.AcctRepNo = EmpNo
LEFT OUTER JOIN CustomerOrder
    ON Customer.CustNo =CustomerOrder.CustNo 
GROUP BY EmpNo, LastName
ORDER BY COUNT(CustomerOrder.OrderNo) DESC, LastName 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T18:40:57.827

结果很好，它包括了你所有的价值观。该消息只是说当该列为`CustomerOrder.OrderNo`空时，它不计算它们（因此，计数值为零）。

# android - 我可以以某种方式从 android 密钥别名中获取详细信息吗？如有效性、组织等

> ID：13366644
> 
> 赞同：1
> 
> 时间：2012-11-13T18:36:56.470
> 
> 标签：android, key, keystore

我可以以某种方式从 android 密钥别名中获取详细信息吗？像有效性，组织等等......我丢失了我的密钥和密钥库文件，但我记得所有密码，有什么办法可以从现有的 apk 文件中获取这些信息？

我需要做的只是导出我的应用程序的新版本，我希望它在安装后替换以前的版本。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T18:51:46.683

抱歉，无法替换丢失的密钥库。一旦丢失，您将无法找回它，请尽最大努力找到它，但如果失败了，您可以做的最好的事情是发布一个新应用程序（使用新的密钥库），并告诉您的用户安装新应用程序以进行更新。

**确保备份新的密钥库**，通过电子邮件将其发送给自己，将其放在云中，然后将其放在另一台计算机上，这样就不会再发生这种情况。

即使您知道放入旧密钥库的详细信息，您也无法重新创建它 - 密钥库被设计为无法重新创建。

以防万一你想要另一个来源：

*   [https://groups.google.com/forum/?fromgroups=#!topic/android-developers/tcmT2uHOmGY](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/tcmT2uHOmGY)

# generics - 如何概括 f# 选项？

> ID：13366647
> 
> 赞同：4
> 
> 时间：2012-11-13T18:37:14.970
> 
> 标签：generics, f#

我得到了一些形式的计算结果`'a option when 'a :> IBaseType`。有从 派生的类型树`IBaseType`，我真的不知道这个是什么特定类型的选项，但重要的是它是特定派生的选项，而不是基类型。所以我想将它向上转换`IBaseType option`以进一步处理它。由于 option 是泛型类型，因此无法直接进行强制转换（在 F# 中），我必须在 Option.map 内部进行强制转换。没什么复杂的，类型推断按预期工作...... ![推断ok](../Images/7e28b5cb78c17cd1475298bab5adf426.png) 中间转换选项也按预期解决...... ![中间推理ok](../Images/e5f105805be09fa80cb0114c9476ece7.png) 直到功能完成。此时，由于某种原因，类型推断决定原始选项必须已经是 type `IBaseType option`： ![推理不好](../Images/9f56bdda99782543e7bdeae527caa102.png)

中间类型之前已经解决了，为什么决定重新分配的推断类型`op`？当然这会导致运行时异常。看起来像编译器错误，但主要规则是编译器没有错误。

所以最后听起来真的很愚蠢：我不知道如何简单地向上转换简单的选项。只是为了让图片更清晰：作为论据`processResult`。`IBaseType option`这是麻烦功能的来源：

```
(fun (x: obj) -> 
    let op = x :?> _ option
    let upcastOp = op |> Option.map (fun y -> y :> IBaseType)
    upcastOp |> processResult) 
```

任何想法如何处理这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T18:46:37.817

首先，您是如何生产盒装物品的？最简单的解决方案是一开始就`IBaseType option`装箱而不是装箱`#IBaseType option`s。如果由于某种原因这不可行，那么您可能需要使用反射。问题是在这段代码中：

```
let op = x :?> _ option
let upcastOp = op |> Option.map (fun y -> y :> IBaseType) 
```

编译器知道这`op`是 a `'a option when 'a :> IBaseType`for some`'a`但没有任何东西可以让编译器弄清楚`'a`实际上是什么，因为这种类型没有反映在函数的最终输出中 - 编译器需要为 提交*特定*类型`'a`，并且最好猜它可以做的只是基本类型`IBaseType`。你需要做这样的事情：

```
type ResultProcessor =
    static member ProcessResult<'a when 'a :> IBaseType> (op:'a option) =
        let upcastOp = op |> Option.map (fun y -> y :> IBaseType)
        upcastOp |> processResult

fun (x:obj) ->
    let ty = x.GetType()  // must be option<something>
    let [| tyArg |] = ty.GetGenericArguments()
    typeof<ResultProcessor>.GetMethod("ProcessResult").MakeGenericMethod(tyArg).Invoke(null, [|x|]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T20:01:25.397

我不知道这里的类型`op`是如何推断的。但我很确定，如果你不能按照 kvb 的建议将类型更改`x`为`IBaseType option`，你真的必须使用反射。

另一种基于反射的解决方案：

```
let f (x:obj) =
   match x with
   | null -> None  // x is None
   | _ -> match x.GetType().GetProperty("Value") with
          | null -> None  // x is not an option
          | prop ->  
               let v = prop.GetValue( x, null )
               Some (v :?> IBaseType) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T13:23:38.347

我支持kvb的解决方案。现在，在我为类似代码所做的一些基准测试中，对于绝对性能，我发现避免动态（未知）方法调用是一个优势。不知何故，使泛型类型的新实例化更快。例如：

```
[<AbstractClass>]
type BaseResultProcessor() =
    abstract member ProcessResult : obj -> option<IBaseType>

[<Sealed>]
type ResultProcessor<'T when 'T :> IBaseType>() =
    inherit BaseResultProcessor()
    override this.ProcessResult(x: obj) =
        match x :?> option<'T> with
        | Some x -> Some (x :> IBaseType)
        | None -> None

module Example =
    let run (x: obj) =
        let ty = x.GetType()
        let tyArg = ty.GetGenericArguments().[0]
        let p =
            typedefof<ResultProcessor<_>>.MakeGenericType(tyArg)
            |> Activator.CreateInstance :?> BaseResultProcessor
        p.ProcessResult(x) 
```

至于问题出在哪里，以下“直观”的推理在 .NET 中是无效的：

```
'T1 :> 'T2
--------------------------
option<'T1> :> option<'T2> 
```

我想说这是典型的类型系统——一旦考虑到它们与整个类型系统的交互，看起来简单或直观的东西很难或不可能正确实现。

# javascript - JavaScript RegEx 匹配无效数字

> ID：13366660
> 
> 赞同：2
> 
> 时间：2012-11-13T18:38:28.283
> 
> 标签：javascript, regex, numbers

使用 JavaScript 的 RegEx 验证带小数位的数字时，我得到的结果不一致。目标是数字的任意组合，后跟一个小数点和另外两个数字。它工作正常，除了以千为单位的数字（无分隔符）。

这是我正在使用的表达式：

```
^[0-9]+(\.[0-9][0-9])$ 
```

有效号码：

```
10.99
0.75
999.99
5000.99
...etc 
```

无效号码：

```
1000
.75
0
...etc 
```

问题是它匹配数千个整数。这是一个内部应用程序，所以我不关心使用额外的分隔符。[我已经使用http://regexpal.com/](http://regexpal.com/)之类的工具测试了表达式，它给了我需要的结果，所以看起来 JS 中有一些东西导致了这个问题。

您可以在此处复制问题：http: [//jsfiddle.net/hcAcQ/](http://jsfiddle.net/hcAcQ/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T18:43:37.687

您需要在 之前转义反斜杠`.`，我相信：

```
^[0-9]+(\\.[0-9][0-9])$ 
```

4 位（或更大）数字起作用的原因是因为单个反斜杠实际上并没有将其转义`.`为句点字符，因此导致它充当通配符“[匹配任何字符](http://www.regular-expressions.info/dot.html)”点。

当您有 3 位或更少的数字时，这将失败，因为正则表达式中的每个匹配项都没有足够的字符，但是 4 位数字它会起作用（一个数字用于第一个字符类，一个用于`.`，一个用于另一个两个字符类。

正如您可能想要的那样，转义`\`将导致`.`实际被解释为文字字符。`.`您也可以将变量定义为正则表达式文字[（MDN 示例；靠近顶部）](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)，这样您就不必处理`\`字符串中的转义字符：

```
//instead of new valueFormat = new RegExp('^[0-9]+(\\.[0-9])$');
valueFormat = /^[0-9]+\.[0-9][0-9]$/; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T18:51:43.313

这有效（\。而不是。）：

```
// valueFormat = new RegExp('^([0-9]+)(\.[0-9][0-9])$');    
valueFormat = new RegExp('^([0-9]+)(\\.[0-9][0-9])$'); 
```

# javascript - 没有绝对值的弹出按钮

> ID：13366670
> 
> 赞同：0
> 
> 时间：2012-11-13T18:39:00.467
> 
> 标签：javascript, jquery, html, css

为了制作一个类似于[dropbox](https://www.dropbox.com/)的登录按钮的按钮，我关注了这篇[文章。](https://stackoverflow.com/questions/8372525/how-to-do-dropbox-like-login-button?lq=1)

更具体地说，这是我正在使用的代码：

```
echo '<a href="#" id ="loginbutton"></a>';

    echo '<div id = "popup">';
    echo '<div id = "popupimage"> </div>';

//HTML INSIDE POPUP

    echo '</div>';

    echo '<script type="text/javascript" src="jquery.js"></script>';
    echo '<script>';

    echo '$("#loginbutton").click(function(e){';
    echo '$("#popup").css("visibility","visible");';
    echo 'e.stopPropagation();';
    echo '});';

    echo '$("#popup").click(function(e){';
    echo 'e.stopPropagation();';
    echo '});';

    echo '$("body").click(function(e){';
    echo '$("#popup") . css("visibility", "hidden");';
    echo '});'; 
```

CSS：

```
#logbutton{
    top:50px;
    left:850px;
    position: absolute;
    background-image: url(../images/buttons/loginbutton.png);
    width:59px; 
    height:28px;   
}

#popupimage{
    top:63px;
    left:887px;
    position: absolute;
    background-image: url(../images/popupimage.png);
    visibility: hidden;
    width:400px; 
    height:600px;   
} 
```

该按钮有效，并且弹出窗口也会出现。

弹出图像的 css 指定了图像将出现的绝对位置，这就是导致问题的原因。我现在希望在按钮之前添加一些动态内容，因此我无法真正确定按钮将在哪个位置。这导致弹出图像未放置在按钮附近。

**是否可以知道按钮的绝对位置，以便我可以将弹出图像（使用 jquery）设置为出现在它旁边。请记住，由于我之前有动态文本，它没有固定的固定位置。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T18:43:13.077

请参阅[.offset()](http://api.jquery.com/offset/)：

```
 echo '$("#loginbutton").click(function(e){';
    echo 'var $target = $(this);'
    echo '$("#popup").offset({ top: $target.offset().top, left: $target.offset().left+$target.outerWidth()}).css("visibility","visible");';
    echo 'e.stopPropagation();';
    echo '});'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T18:54:19.397

为什么不做 Dropbox 所做的并将按钮和弹出窗口包装在`position: relative;`定位元素中呢？相对定位的元素将与动态内容一起流动，但其中的`position: absolute;`元素将自动相对于包装器位置。这比试图通过 jQuery 弄清楚要简单得多。

**更新**

```
# CSS
.position_me_relative {
  position: relative;
}
.within_the_relative_wrapper {
  /* 
   This will flow inside the wrapper like a normal element.
   For example, it will obey any padding you apply to the parent element.
  */
  position: relative; 
}
.absolute_popup_relative_to_wrapper {
  /* As an example:
    This will position the popup so its lower right corner
    is touching the lower right corner of the wrapper regardless
    of where the wrapper shows up on the page.
  */ 
  position: absolute;
  bottom: 0px;
  right: 0px;
  /*
    top and left can also be used for positioning
    negative values can also be used and the absolute element
    can be positioned so it appears "outside" the wrapper element
    i think if you play around with some different values for 
    top, bottom, left and right you'll get the idea pretty quick
  */
}

# Markup
<div class="position_me_relative">
  <a class="within_the_relative_wrapper"></a>
  <div class="absolute_popup_relative_to_wrapper"></div>
</div> 
```

# python - 扩展 Python 的 Rdio 模块时出现 NameError

> ID：13366673
> 
> 赞同：2
> 
> 时间：2012-11-13T18:39:12.963
> 
> 标签：python, api, python-2.7, nameerror, rdio

我一直在使用 Python 访问 Rdio API，因此决定向 Rdio 模块添加几个方法以使生活更轻松。我一直受阻。

作为背景，这里是该公司提供的一些 Rdio Python 模块：

```
class Rdio:
  def __init__(self, consumer, token=None):
    self.__consumer = consumer
    self.token = token

  def __signed_post(self, url, params):
    auth = om(self.__consumer, url, params, self.token)
    req = urllib2.Request(url, urllib.urlencode(params), {'Authorization': auth})
    res = urllib2.urlopen(req)
    return res.read()

  def call(self, method, params=dict()):
    # make a copy of the dict
    params = dict(params)
    # put the method in the dict
    params['method'] = method
    # call to the server and parse the response
    return json.loads(self.__signed_post('http://api.rdio.com/1/', params)) 
```

好的，一切都很好。这些功能工作正常。所以我决定创建一个方法，将播放列表复制`key1`到播放列表中`key2`。这是代码：

```
def copy_playlist(self, key1, key2):
  #get track keys from first playlist
  playlist = self.call('get', {'keys': key1, 'extras' : 'tracks'})

  track_keys = []   

  for track in tracks:
      key = track['key']
      track_keys.append(key)

  #convert track list into single, comma-separated string (which the API requires)
  keys_string = ', '.join(track_keys)

  #add the tracks to the second playlist
  self.call('addToPlaylist', {'playlist' : key2, 'tracks' : keys_string}) 
```

如果我从终端或外部 Python 文件中执行此代码，则此代码可以正常工作，但由于某种原因，当我将其作为 Rdio 类的一部分，然后启动 Rdio 对象`rdio`并调用播放列表方法时，我总是得到以下错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "rdio_extended.py", line 83, in copy_playlist

NameError: global name 'rdio' is not defined 
```

我似乎无法解决这个问题。可能有一个简单的答案——我对编程很陌生——但我很难过。

更新：更新了代码格式，这是创建 Rdio 对象的实际代码：

```
rdio = Rdio((RDIO_CONSUMER_KEY, RDIO_CONSUMER_SECRET), (RDIO_TOKEN, RDIO_TOKEN_SECRET)) 
```

然后这是调用播放列表复制功能的行：

```
rdio.copy_playlist(key1, key2) 
```

这会导致上面描述的 NameError。

# sql - 在一个 SQL 查询中为国家/地区做两个平均人口

> ID：13366675
> 
> 赞同：1
> 
> 时间：2012-11-13T18:39:27.470
> 
> 标签：sql, average

我有一张`cities`包含以下信息的表格：

```
name, country, population, capital, shape 
```

我需要获得两个特定国家（阿根廷和墨西哥）中每个城市的人口平均值，而不是将它们加在一起。

有没有办法同时进行两个平均查询？

我只是想知道这是否可以或不能完成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T18:41:36.483

您应该能够`GROUP BY`在城市和国家/地区使用类似的东西：

```
select city, country, avg(population) AvgPop
from yourtable
where country in ('Argentina', 'Mexico')
group by city, country 
```

# flash - Microsoft Surface 是否支持 Flash 网站？

> ID：13366683
> 
> 赞同：3
> 
> 时间：2012-11-13T18:40:31.853
> 
> 标签：flash, windows-8, windows-rt

我搜索了谷歌，但没有找到明确的答案。

我或我工作的 Flash 站点/应用程序能否在 Microsoft Surface 平板电脑上运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T18:48:05.283

Microsoft Surface 上的 IE 似乎会有一个支持 flash 的已批准站点列表，并且此列表由 Microsoft 维护！

检查[这篇文章：](http://news.cnet.com/8301-10805_3-57537730-75/top-10-biggest-drawbacks-of-windows-rt/)

> 1.  Flash 仅适用于批准的网站。认为您将能够使用您的新 RT 计算机观看所有基于 Flash 的视频？好吧，再想想。Flash 只能在 Microsoft 批准的网站上运行。幸运的是，CNET 就是其中之一。

也许是时候改用 HTML5 重做您的网站了，因为许多人正在远离 Flash，而且 Adob​​e 也正在放弃某些平台对 Flash 的支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T18:42:27.920

请参阅Microsoft 的 TechNet 上的[这篇文章，其中说：](http://social.technet.microsoft.com/Forums/en-US/SurfaceSoftware/thread/7ecdf9b3-cf5f-4c94-8644-7ebeb3cf6f14)

> Surface 不消耗或使用闪存。您可以创建自己的处理程序来执行此操作，但这通常不是最好的用户体验。Flash 只了解点击，而不了解启用表面的控件。如果您编写自己的事件来传输输入，则可以处理此问题，但是您正在从 Windows 应用程序中运行 flash。

这是由 Microsoft 代表发布的，所以我认为它是准确的。我想答案是：“不是真的。”

# drop-down-menu - Typo3 下拉菜单会在特定级别的特定站点上自行销毁

> ID：13366684
> 
> 赞同：0
> 
> 时间：2012-11-13T18:40:37.467
> 
> 标签：drop-down-menu, menu, typo3

我在 TS 中使用以下代码创建了一个下拉菜单：

TS：

```
MAIN_MENU = HMENU
MAIN_MENU {
    entryLevel = 0
    1 = TMENU
    1 {
        expAll = 1
        # Always output all childs, hide/unhide them with JS
        wrap = <ul>|</ul>

        # Normal state properties
        NO.wrapItemAndSub = <li>|</li> |*| <li>|</li> |*| <li class="last">|</li>

        # Enable active state and set properties:
        ACT < .NO
        ACT = 1
        ACT.ATagParams = class="activelink"
        ACT.wrapItemAndSub = <li class="active">|</li>
    }

    2 = TMENU
    2 {
        wrap = <div class="scnd_menu"><ul>|</ul></div>
        NO.allWrap = <ul id="scnd_menu_wrapper"><li><ul class="menu_secondLevel"><li>|</li> || <li>|</li> || <li>|</li> || <li>|</li> || <li>|</li> || <li>|</li> || <li>|</li> || <li>|</li> || <li>|</li> || <li>|</li> || <li>|</li> || <li>|</li> || </ul></li><li><ul class="menu_secondLevel"><li>|</li> || <li>|</li> || <li>|</li> || <li>|</li> || <li>|</li> || <li>|</li> || <li>|</li> || <li>|</li> || <li>|</li> || <li>|</li> || <li>|</li> || <li>|</li> || </ul></li><li><ul class="menu_secondLevel"><li>|</li> || <li>|</li> |*||*|
        ACT < .NO
        ACT = 1
        ACT.ATagParams = class="activelink"
        ACT.allWrap = <li class="active">|</li>
    }
} 
```

CSS：

```
 /* Main Menu */
#menu_main {
    text-transform: uppercase;
    letter-spacing: 2px;
    margin-top:  45px;
    margin-bottom: 10px;
}
#menu_main ul {
    list-style: none;
}
#menu_main ul li {
    float: left;
    margin-bottom: 0;
    margin-left: 25px;
}

#menu_main ul li.active a {
    color: #AF0008;
}
#menu_main ul li a {
    color: #2c211a;
    width: 100%;
    text-align: center;
    display: block;
    padding-top: 1em;
    padding-bottom: 1em;
    padding-left: 5px;
    padding-right: 5px;
}
#menu_main ul li a:hover {
    text-decoration: none;
    color: #AF0008;
    background-color: #F1DED7;
}
#menu_main ul li:hover .scnd_menu, #menu_main ul li:hover ul.menu_secondLevel, #menu_main ul li:hover ul.menu_secondLevel_two, #menu_main ul li:hover ul.menu_secondLevel_three {
    display: block;
}
#menu_main .menu_main_sep_right, #menu_main .menu_main_sep_left {
    position: absolute;
    bottom: 0px;
    right: 0px;
    display: block;
    width: 1px;
    height: 69px;
    overflow: hidden;
}
#menu_main .menu_main_sep_left {
    background-position: bottom right;
    left: 0px;
}

/* Sec Menue */
.scnd_menu {
    display: none;
    position: absolute;
    z-index: 999;
    padding-top: 5px;
    padding-bottom: 5px;
    letter-spacing: normal;
    width: auto;
    max-width: 1030px;
    max-height: 365px;
    background-color: #fff;
}

#scnd_menu_wrapper {
    margin: 0;
    width: auto;
}

#scnd_menu_wrapper li {
    diplay: block;
    margin-left: 5px !important;
}
#scnd_menu_wrapper li:last-child {
    float: right;
}
ul.menu_secondLevel {
    display: none;
}

#menu_main ul li ul.menu_secondLevel li {
    float: none;
    width: auto;
    margin-left: 0px;
    margin-right: 0.5em;
    margin-bottom: 5px;
    margin-top: 5px;
}
#menu_main ul li ul.menu_secondLevel li a {
    display: inline;
    width: auto;
    font-size: 0.85em;
    color: #AF0008;
    white-space: nowrap;
}
#menu_main ul li ul.menu_secondLevel li.active,
#menu_main ul li ul.menu_secondLevel li.active a,
#menu_main ul li ul.menu_secondLevel li a:hover {
    background: none;
    color: #2c211a;
}
#menu_main ul li ul.menu_secondLevel li.active a:hover {
    font-style: italic;
}

/* Exeptions */
#menu_main ul li.last {
    position: relative;
}
#menu_main ul li.last .scnd_menu {
    right: -26px;
}
#menu_main ul li:nth-child(3) .scnd_menu {
    margin-left: -155px;
}
#menu_main ul li:nth-child(7) .scnd_menu {
    margin-left: -613px;
} 
```

它工作正常，但问题在于，如果我进入第二级的第一页，菜单就会被破坏。它只发生在那里，没有其他地方。

经过两天的尝试，我现在真的很累。似乎有些

*   元素被撕掉了原来的，但我不知道为什么！也许有人看到我的失败？！

    谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:29:06.323

好的，我想通了。

问题在于两个数字：

1.）我有两个`<ul>'s`紧挨着

```
2 = TMENU
2 {
wrap = <div class="scnd_menu"><ul>|</ul></div>
NO.allWrap = <ul id="scnd_menu_wrapper"><li><ul> </span>
class="menu_secondLevel"><li>|</li> || ... 
```

因为`allWrap`另一个`<ul>`是设定的。

所以我将其更改为`wrapItemAndSub`而不是`allWrap`.

并且：2.）WI仍在分裂`NO`并被`NO`复制到`ACT`，然后`ACT.allWrap`分裂被`allwrap`...覆盖。

我为那个转储错误道歉！

# mysql - 无法从输入值存储日期

> ID：13366685
> 
> 赞同：0
> 
> 时间：2012-11-13T18:40:47.093
> 
> 标签：mysql, sql, date, timestamp, varchar

```
UPDATE blogs SET start_date = '11/27/2012 00:00',end_date = '11/27/2012 00:00' WHERE id='9' 
```

除非我将它们设置为类型，否则此查询不会存储博客 ID 的值`start_date`。`end_date``9``varchar`

尝试过`timestamp`，`date time`但查询总是会返回受影响的 0 行

问题是我需要能够在一段时间内检查行，而使用 varchar 它会变得非常复杂。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:47:44.600

试试这个：

```
UPDATE blogs 
SET start_date = STR_TO_DATE('11/27/2012 00:00', '%m/%d/%Y %h:%i:%s') --cast string to date in correct date format
,end_date = STR_TO_DATE('11/27/2012 00:00', '%m/%d/%Y %h:%i:%s')--cast string to date in correct date format
WHERE id = 9 --removed quotes as this field's probably numeric 
```

如果使用时间戳列而不是日期时间，我认为您需要执行以下操作：

```
UPDATE blogs 
SET start_date = UNIX_TIMESTAMP(STR_TO_DATE('11/27/2012 00:00', '%m/%d/%Y %h:%i:%s'))
,end_date = UNIX_TIMESTAMP(STR_TO_DATE('11/27/2012 00:00', '%m/%d/%Y %h:%i:%s'))
WHERE id = 9 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T19:25:50.653

如[日期和时间文字](http://dev.mysql.com/doc/en/date-and-time-literals.html)中所述：

> MySQL以这些格式识别`DATETIME`和重视：`TIMESTAMP`
> 
> *   作为一个`'YYYY-MM-DD HH:MM:SS'`或`'YY-MM-DD HH:MM:SS'`格式的字符串。这里也允许使用“宽松”的语法：任何标点符号都可以用作日期部分或时间部分之间的分隔符。例如，`'2012-12-31 11:30:45'`、`'2012^12^31 11+30+45'`、`'2012/12/31 11*30*45'`和`'2012@12@31 11^30^45'`是等价的。
>     
>     
> *   作为在任何一种格式中都没有分隔符的`'YYYYMMDDHHMMSS'`字符串`'YYMMDDHHMMSS'`，前提是该字符串作为日期有意义。例如，`'20070523091528'`and`'070523091528'`被解释为`'2007-05-23 09:15:28'`, 但是`'071122129015'`是非法的（它有一个无意义的微小部分）并且变成`'0000-00-00 00:00:00'`.
>     
>     
> *   作为任一`YYYYMMDDHHMMSS`格式`YYMMDDHHMMSS`的数字，前提是该数字作为日期有意义。例如`19830905132800`和`830905132800`被解释为`'1983-09-05 13:28:00'`。

因此，字符串`'11/27/2012 00:00'`和`'11/27/2012 00:00'`不是有效的 MySQL 日期时间文字。您有两种选择（以某种模糊的偏好顺序，没有您的要求的任何进一步信息）：

1.  以可识别的格式提供您的文字：

    ```
    UPDATE blogs SET
      start_date = '2012-11-27 00:00:00',
      end_date   = '2012-11-27 00:00:00'
    WHERE id = 9 
    ```

2.  使用 MySQL 的[`STR_TO_DATE()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_str-to-date)函数来转换字符串：

    ```
    UPDATE blogs SET
      start_date = STR_TO_DATE('11/27/2012 00:00', '%m/%d/%Y %H:%i'),
      end_date   = STR_TO_DATE('11/27/2012 00:00', '%m/%d/%Y %H:%i')
    WHERE id = 9 
    ```

# sublimetext2 - 为什么我的 sublime-build 没有被自动拾取？

> ID：13366692
> 
> 赞同：1
> 
> 时间：2012-11-13T18:41:13.333
> 
> 标签：sublimetext2

我的用户目录中有以下 sass.sublime-build 文件：

```
{
    "cmd": ["C:/ruby193/bin/ruby.exe", "C:/ruby193/bin/sass", "$file", "$file_path/$file_base_name.css", "--precision", "5"]
,   "selector": "source.scss"
} 
```

然而，每当我打开像 Builder.scss 这样的文件时，自动构建就会被禁用。在构建之前，我必须手动将其更改为“sass”（然后它会非常好）。

我用咖啡脚本设置了类似的构建文件，它会自动拾取，没问题。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T22:51:07.653

看起来文件名优先于提供的选择器。如果您将构建首选项文件更改为，它是否已修复`scss.sublime-build`？

# c# - System.Windows.Forms.WebBrowser 控件显示pdf

> ID：13366693
> 
> 赞同：3
> 
> 时间：2012-11-13T18:41:19.370
> 
> 标签：c#, winforms, browser, .net-2.0

有什么方法可以查询 IE 插件（Adobe Reader）的状态吗？我有一种情况，我们通过标签页托管的嵌入式浏览器（基于我的研究的首选模式）向用户呈现许多多页报告。当用户离开报告时，通常是为了修改数据，他们返回到重新初始化的 Adob​​e Reader。这意味着它们的位置已丢失，扩展的书签节点已折叠。

下面是一个简化的代码片段，我希望它能够充分表达我的问题的本质。

```
Public partial class ReportView : UserControl
{ 
    private System.Windows.Forms.WebBrowser webBrowser; 
    private MyNamespace.ReportGenerator reportGen;  
    private String currentPDFtempPath; 

    public ReportView() 
    {
        InitializeComponent();
        this.Leave += (o, e) => { /*how can I save current place in pdf?*/ };
        this.Enter += (o, e) => { /*return user last place in large pdf*/ };
    }

    public void ViewReport(string reportName)
    {
        currentPDFtempPath = reportGen.GetReport(reportName);
        webBrowser.Navigate(currentPDFtempPath);
    }

    private void RefreshReport()
    {
        webBrowser.Navigate(currentPDFtempPath); /*reinitializes Adobe Reader*/
    }
}

public class ReportController
{
    private DataModel model;
    private ReportView view;

    ReportController(DataModel m, ReportView v)
    {
        this.model = m;
        this.view = v;

        model.Changed += (o, e) => { view.RefreshReport(); }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T20:12:51.320

如果您的用户群已标准化为 Acrobat 的一个版本或不断更新到最新最好的 Acrobat，另一种解决方案是消除 Web 浏览器控件并添加对 AcroPDF/AxAcroPDF 库/active x 控件的引用，该控件可在 Windows 中运行形式。在过去的 6 年里，我一直在我的公司中使用它，并且它运行良好。

# php - PHP - 按原样显示小浮点数

> ID：13366697
> 
> 赞同：0
> 
> 时间：2012-11-13T18:41:30.727
> 
> 标签：php

我必须显示一个计算出来的数字，有时它非常小，显示如下：

```
1.0E-8\. 
```

我怎样才能显示它

```
0.00000001 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T18:45:18.760

[http://php.net/manual/en/function.number-format.php](http://php.net/manual/en/function.number-format.php)

```
echo number_format($floatVariable, 8); 
```

您还可以事先阅读数字中有多少小数...示例在该链接上

# excel - 有没有办法将一个长 Excel 表格复制到 Word 中以使标题重复？

> ID：13366700
> 
> 赞同：0
> 
> 时间：2012-11-13T18:41:47.523
> 
> 标签：excel, ms-word

基本上，我想将此表从 Excel 复制到我的主 Word 文档中，但随后我必须在每一页上手动重新插入所有标题。

有一些解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:34:28.527

只插入一次标题是否有帮助？

Word 2003：菜单“表格”-“标题行重复”。
Word 2010：菜单“表格”-“表格属性”-“行”-“在每页顶部重复作为标题行”

# turing-machines - 图灵机 - 更多 0 还是 1？

> ID：13366704
> 
> 赞同：1
> 
> 时间：2012-11-13T18:42:01.823
> 
> 标签：turing-machines

假设我们有一个磁带：xx01101011xx（x 是一个空字符）。你能给我一个算法的想法，它会说是否有更多的 0 或 1？我听说过“配对”方法，但我不知道如何使用它。

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T18:47:29.720

如果最左边的非空白非 X 字符是 0，则向右搜索 1，如果找到，则将两者都更改为 X。

如果最左边的非空白非 X 字符是 1，则向右搜索 0，如果找到，则将两者都更改为 X。

如果找不到匹配项，则最左侧的非空白字符数量较多。如果整个磁带以 X 结尾，那么它们的数量相等。

EX，_ 为空白，{0,1,X} 的字母表：

```
__01101011__
     v
__XX101011__
     v
__XXXX1011__
     v
__XXXXXX11__
     v
No matching 0 found, more 1s 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T18:47:54.940

一种方法是删除 a `0`，然后寻找下一个`1`并删除它，然后来回执行此操作，直到只剩下一个符号。这假设您有输入的结束标记。

# vba - 通过 VBA 向工作簿添加代码时出错

> ID：13366706
> 
> 赞同：0
> 
> 时间：2012-11-13T18:42:04.087
> 
> 标签：vba, excel

我正在尝试在 Excel 中使用 VBA 将条件格式添加到数据透视表的列中。问题是，每当刷新数据透视表或更改过滤器等时，条件格式都会丢失。我的解决方案是向工作簿中的数据透视表更新事件添加一个宏，它可以工作......有点。似乎当我运行创建数据透视表的代码并添加处理条件格式的代码时，会发生错误，但仅在 VBA 窗口未打开时发生。如果 VBA 窗口打开，则代码将正常执行 - 尽管没有代码更改或引用更改。

```
Private Sub setupConditionalFormattingForStatusColumn()
    Dim thisSheetModule As vbcomponent
    Dim formattingCodeString As String

    On Error GoTo conditionalFormattingError

    formattingCodeString = _
    "Private Sub Worksheet_PivotTableUpdate(ByVal Target As PivotTable)" & vbNewLine & _
    "    With Target.parent.Columns(" & harReportColumn("Status") & ")" & vbNewLine & _
    "         .FormatConditions.AddIconSetCondition" & vbNewLine & _
    "         .FormatConditions(.FormatConditions.Count).SetFirstPriority" & vbNewLine & _
    vbNewLine & _
    "         With .FormatConditions(1)" & vbNewLine & _
    "              .IconSet = ActiveWorkbook.IconSets(xl4TrafficLights)" & vbNewLine & _
    "              .IconCriteria(1).Icon = xlIconYellowExclamation" & vbNewLine & _
    vbNewLine & _
    "              With .IconCriteria(2) " & vbNewLine & _
    "                   .Type = xlConditionValueNumber" & vbNewLine & _
    "                   .value = -1" & vbNewLine & _
    "                   .Operator = 5" & vbNewLine & _
    "                   .Icon = xlIconGreenCircle" & vbNewLine & _
    "              End With" & vbNewLine & _
    vbNewLine & _
    "              With .IconCriteria(3)" & vbNewLine & _
    "                   .Type = xlConditionValueNumber" & vbNewLine & _
    "                   .value = 1.05" & vbNewLine & _
    "                   .Operator = 7" & vbNewLine & _
    "                   .Icon = xlIconYellowCircle" & vbNewLine & _
    "              End With" & vbNewLine
    formattingCodeString = formattingCodeString & vbNewLine & _
    "              With .IconCriteria(4)" & vbNewLine & _
    "                   .Type = xlConditionValueNumber" & vbNewLine & _
    "                   .value = 1.15" & vbNewLine & _
    "                   .Operator = 7" & vbNewLine & _
    "                   .Icon = xlIconRedCircleWithBorder" & vbNewLine & _
    "              End With" & vbNewLine & _
    vbNewLine & _
    "             .ShowIconOnly = True" & vbNewLine & _
    "         End With" & vbNewLine & _
    vbNewLine & _
    "         .HorizontalAlignment = xlCenter" & vbNewLine & _
    "         .VerticalAlignment = xlCenter" & vbNewLine & _
    "     End With" & vbNewLine & _
    "End Sub"

    Set thisSheetModule = ThisWorkbook.VBProject.VBComponents(harReportSheet.CodeName)
    thisSheetModule.CodeModule.AddFromString formattingCodeString

    Exit Sub

conditionalFormattingError:
    errorLog.logError "WARNING: An error occured while applying the conditional formatting code for the ""Status"" column."
    Err.Clear
    Resume Next
End Sub 
```

产生错误的行是：`thisSheetModule.CodeModule.AddFromString formattingCodeString`但只有在关闭 VBA 窗口时才会产生错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T18:31:42.783

所以我能够找到这个问题的答案。显然，当 VBA 窗口未打开时，Excel 没有正确初始化新创建的工作表的代号属性（这里的原因超出了我的范围），但只有在它重新编译时才正确初始化。一种解决方法是在对代号属性进行任何调用之前强制 Excel 重新编译。对我有用的解决方案是放置以下代码：

```
On Error Resume Next
Application.VBE.CommandBars.ActiveMenuBar.FindControl(ID:=578).Execute
On Error GoTo conditionalFormattingError 
```

在以 开头的行上方`Set thisSheetModule = ...`。奇怪的是，强制重新编译的代码行也给我抛出了一个错误，我可以通过周围的错误处理安全地忽略它。

更多信息可以在这里找到：[http ://www.office-archive.com/2-excel/d334bf65aeafc392.htm](http://www.office-archive.com/2-excel/d334bf65aeafc392.htm)

希望能帮助那里的人。:-)

# android - 从 Android Webview 中删除图像？

> ID：13366707
> 
> 赞同：2
> 
> 时间：2012-11-13T18:42:06.300
> 
> 标签：android, html, parsing, webview, tags

我有一个 Android Webview，我在其中使用 loadDataWithBaseURL 加载 HTML，我的一些图像显示为“？” 好像图像丢失了。我在解决这个问题时遇到了麻烦，所以我现在正试图完全删除图像。我尝试使用：

```
webview.loadUrl("javascript:(function() { " + "document.getElementsByTagName('img')[0].style.display = 'none'; " + "})()"); 
```

但它没有用，我正在努力思考另一种解决方案。生成图像的 HTML 代码格式如下：

```
<img name="StartDate" src="images/calendar.gif" onclick="displayDatePicker('StartDate',false,'dmy','-')" alt="Press for a date picker" /> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T19:02:53.573

尝试使用：

```
webView.getSettings().setLoadsImagesAutomatically(false); 
```

# javascript - JS 模块模式 = 缓存/更好的性能？

> ID：13366708
> 
> 赞同：1
> 
> 时间：2012-11-13T18:42:24.037
> 
> 标签：javascript, performance, caching, module-pattern

我刚刚阅读了这篇文章[http://javascriptweblog.wordpress.com/2011/05/31/a-fresh-look-at-javascript-mixins/](http://javascriptweblog.wordpress.com/2011/05/31/a-fresh-look-at-javascript-mixins/)。

在标题为“#4 添加缓存”的部分中，它说：

> 通过在 mixin 周围形成一个闭包，我们可以缓存初始定义运行的结果，并且性能影响非常显着。

我不明白这是如何工作的——在这里使用模块模式如何导致代码的更快/缓存版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T18:56:35.587

基本上，不使用闭包，每次使用 mixin 时都会创建 mixin 函数。通过创建闭包，每个函数都将创建一次，并且 mixin 将在每次调用时引用这些函数。由于 mixin 不必在每次运行时都重新创建这些函数，因此速度更快。

**没有关闭**

```
var asRectangle = function() {
  // every time this function is called, these three functions are created
  // from scratch, slowing down execution time
  this.area = function() {
    return this.length * this.width;
  }
  this.grow = function() {
    this.length++, this.width++;
  }
  this.shrink = function() {
    this.length--, this.width--;
  }
})(); 
```

**关闭**

```
var asRectangle = (function() {
  // these functions are 'cached' in the closure
  function area() {
    return this.length * this.width;
  }
  function grow() {
    this.length++, this.width++;
  }
  function shrink() {
    this.length--, this.width--;
  }

  // this function is set to asRectangle.  it references the above functions
  // every time it is called without having to create new ones
  return function() {
    this.area = area;
    this.grow = grow;
    this.shrink = shrink;
    return this;
  };
})(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T19:22:37.713

这不是闭包或模块模式，而是它的结果：不同的构造函数/mixin 函数。尽管

```
function mixin() {
    this.method = function() { ... }
} 
```

在每次调用时为方法创建新的闭包范围（的执行上下文`mixin`，不包含变量 - 但需要保留在内存中），

```
function method() { ... }
function mixin() {
    this.method = method;
} 
```

只创建一个只存在于一个范围内的函数（多次应用时）。

模块模式仅用于制作`method`局部变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T18:52:31.290

在第二种情况下，仅执行此代码：在应用 mixin 时：

```
this.area = area;
this.grow = grow;
this.shrink = shrink;
return this; 
```

在第一种情况下 `area`，`grow`和`shrink`为每个`asXXX`调用重新定义。在第二种情况下，方法及其缓存的定义是在 mixin 声明的“解析”时完成的，因此只需要完成一次。

# django - 在 django 中编辑本地语言的管理模板

> ID：13366716
> 
> 赞同：1
> 
> 时间：2012-11-13T18:42:40.800
> 
> 标签：django, templates, hebrew

我已经开始使用 django。我喜欢它，但我仍然是菜鸟，如果这是一个初学者问题，请原谅我。

我正在设计一个希伯来语网站，旨在让一小部分用户添加有关给定参数的信息。这相当简单，因为内置的管理界面站点正是我所需要的，所以我决定避免使用“视图”，而是只使用 auth 模块来授予其他用户编辑所有内容的权限（我相信他们，这不是用于发布）。

问题是，我仍然想稍微编辑模板，也许用图像替换一些东西，更改标题等等。我知道当它设置为英语时如何执行此操作（只需将模板复制到特定目录，在 settings.py 中列出其路径，然后编辑它们），但对于希伯来语，它更复杂：有 po 和 mo 文件，我还阅读了一些地方，解释说我应该使用我不熟悉的 ugettext，然后是我真的从未听说过的“slugify”。

我不明白模板是如何知道在哪里可以找到标题和其他部分的替换希伯来语文本的。如果我创建自己的模板文件夹，我应该把 po\mo 文件放在哪里？我如何告诉它在哪里寻找它？

我需要一些关于从哪里开始的建议，我需要做什么\学习解决这个问题？

# android - Android 和 Eclipse - 引用库

> ID：13366717
> 
> 赞同：1
> 
> 时间：2012-11-13T18:42:45.857
> 
> 标签：android, eclipse, reference, shared-libraries

引用库的正确方法是什么？

我使用 Eclipse 启动了一个新的 Android 应用程序。

我添加了一个新的库应用程序。

我将项目添加到主应用程序的 Java 构建路径中。

这编译得很好，但是在运行时我收到一个错误，因为主应用程序中缺少“库”文件，所以我的问题是，将库放入主应用程序的“正确”方法是什么？

我习惯了 Visual Studio，并且引用另一个项目会自动确保引用将所需的 DLL 复制到项目 BIN 文件夹中。

我知道库文件的 JAR/APK 必须在 LIB 文件夹中，但是当您引用它时 Eclipse 会为您执行此操作吗？看来不是-我要导入吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:48:36.683

首先，您需要构建您的库项目，然后才将其作为库添加到主项目中。请关注这个[帖子](https://stackoverflow.com/questions/12970802/unable-to-refer-library-project-android-on-updated-adt)。

# html - 不能将 id 从变量 Jade 放入 div

> ID：13366720
> 
> 赞同：8
> 
> 时间：2012-11-13T18:42:55.127
> 
> 标签：html, node.js, express, pug

我的 Jade 视图中有以下内容：

```
- var items = "one"
each item in items
  div(id= #{items}) 
```

我想要的是：

```
<div id="one"></div> 
```

但翡翠呈现：

```
<div id="undefinedoneundefined"></div> 
```

这让我发疯，我正在使用 Jade 和 Express.js。

顺便说一句，我问过类似但不太清楚的问题，希望不要因为我的愚蠢而惹恼任何人。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-13T18:56:46.023

像这样的东西？

```
- var items = ["one", "two", "three"]
each item in items
  div(id= item) 
```

# iframe - 将 div 覆盖在 iframe 上，该 iframe 是视口的全尺寸 + 然后使用 iframe/page 使 div 滚动？

> ID：13366727
> 
> 赞同：2
> 
> 时间：2012-11-13T18:43:26.503
> 
> 标签：iframe, css-float, overlay

我非常感谢您提供的任何帮助，请重新。以下导致大量无薪加班！

我正在尝试将 div 覆盖在 iframe 上，该 iframe 是浏览器视口的完整大小，但也使这个覆盖的 div 在滚动时与下面的 iframe 内容一起移动。当 iframe 大于视口时，我还尝试只显示一组滚动条。

要支持的主要浏览器是 OSX 上的 Safari，但如果支持该解决方案，如果有的话，其他跨平台浏览器将不胜感激。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html style="height:100%;">
<head>
<title>Prototype dashboard overlay selector</title>

<script type="text/javascript">
function GotoDashboard (sel) {
var url = sel[sel.selectedIndex].value;
window.location = url;
}
</script>

</head>
<body style="height:100%; margin:0px; padding:0px; background-color:white; overflow:auto;">

<div scrolling="auto" style="width:100%; height:100%; margin:0px; padding:0px;">

<div scrolling="auto" style="position:relative; display:block; width:100%; margin:0px; padding:0px; overflow:scroll;">

<form name="foo" style="position:absolute; z-index:999; border:0px; margin:0px; padding:0px; top:10px; right:200px;">
    <select name="dashboardselector" onchange="GotoDashboard(this);" style="margin:0px; padding:0px; border:1px; background-color:red; font-color:white;">
    <option value="">Select Dashboard</option>
    <option value="http://www.google.co.uk">Foo</option>
    <option value="http://www.amazon.co.uk">Bar</option>
    </select>
</form> 

<iframe src="http://www.bbc.co.uk" frameborder="0" width="100%" height="100%" scrolling="no" style="display:inline; overflow:visible; z-index:-1; margin:0px; padding:0px; width:100%; border:0px;">
</iframe>

<div>
</div>
</body>
</html> 
```

# http - 空表的正确 REST 响应？

> ID：13366730
> 
> 赞同：129
> 
> 时间：2012-11-13T18:43:33.267
> 
> 标签：http, rest

假设您想通过调用来获取用户列表`GET`to `api/users`，但目前该表已被截断，因此没有用户。这种情况的正确响应是什么：`404`或`204`？

* * *

## 回答 #1

> 赞同：266
> 
> 时间：2012-11-13T19:14:54.370

我会说，也不是。

## 为什么不是 404（未找到）？

404 状态码应保留用于未找到资源的情况。在这种情况下，您的资源是*users 的集合*。此集合存在，但当前为空。就个人而言，如果我只是因为有人碰巧删除了几个用户而获得了`200`一天和第二天的结果，那么作为您的应用程序客户端的作者，我会感到非常困惑。`404`我应该做些什么？我的网址错了吗？是否有人更改了 API 并忽略了重定向。

## 为什么不是 204（无内容）？

[这是 w3c 对 204 状态码的描述的](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)摘录

> 服务器已完成请求，但不需要返回实体主体，并且可能希望返回更新的元信息。

虽然在这种情况下这似乎是合理的，但我认为这也会让客户感到困惑。A`204`应该表示某些操作已成功执行，不需要返回任何数据。这非常适合作为对`DELETE`请求的响应或触发一些不需要返回数据的脚本。在 的情况下`api/users`，您通常希望收到您的用户集合的表示。一次发送响应正文而另一次不发送它是不一致的并且可能具有误导性。

## 为什么我会使用 200 (OK)

出于上述原因（一致性），我将返回一个空集合的表示。假设您正在使用 XML。非空用户集合的正常响应正文可能如下所示：

```
<users>
  <user>
    <id>1</id>
    <name>Tom</name>
  </user>
  <user>
    <id>2</id>
    <name>IMB</name>
  </user>
</users> 
```

如果列表是空的，你可以用这样的东西来回应（同时仍然使用 a `200`）：

```
<users/> 
```

无论哪种方式，客户端都会收到遵循某种众所周知的格式的响应正文。没有不必要的混淆和状态码检查。此外，没有违反状态代码定义。每个人都很高兴。

您可以对 JSON 或 HTML 或您使用的任何格式执行相同的操作。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-02-13T22:16:22.963

我会根据运行时情况回答两个代码之一：

**404（未找到）**

如果您没有桌子，这个答案是非常正确的。不仅是空表，而且没有用户表。它证实了确切的想法 - 没有资源。进一步的选项是提供更多细节为什么你的桌子不存在，有几个更详细的代码，但 404 非常适合参考你真的没有桌子的情况。

**200（确定）**

您有表格但它是空的或您的请求处理器过滤掉所有结果的所有情况。这意味着“您的请求是正确的，一切正常，但您不匹配任何数据，只是因为我们没有数据或我们没有与您的请求匹配的数据。这应该与安全拒绝答案不同。我也投票返回 200 在您有一些数据并且通常您被允许访问表但无权访问与您的请求匹配的所有数据的情况下（由于对象级别的安全性，数据被过滤掉但通常您被允许要求）。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-05-08T23:30:01.853

如果您期望用户对象的列表，最好的解决方案是返回一个空列表 ([]) 并返回 200 OK，而不是使用 404 或 204 响应。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-11-12T12:10:28.163

## 肯定返回200。

404 表示找不到资源。但是资源是存在的。而且，如果响应具有 404 状态。你怎么知道用户列表是空的还是满的？

* * *

*   '/users' 如果为空，则应返回 '200'。
*   '/users/1' 如果没有找到 id。应该返回 404。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-04-23T13:23:00.633

空列表必须**200 OK**。

**原因：**空表表示该表存在但没有任何记录。

**404 Not Found**表示请求的端点不存在。

# wso2 - WSO2 MessageBroker AuthorizationAction 未指定

> ID：13366731
> 
> 赞同：2
> 
> 时间：2012-11-13T18:43:36.000
> 
> 标签：wso2, wso2esb

我正在尝试按照中给出的步骤

> [http://wso2.org/library/knowledge-base/2012/06/publishing-messages-message-broker-using-event-mediator#](http://wso2.org/library/knowledge-base/2012/06/publishing-messages-message-broker-using-event-mediator#)

将消息代理与 ESB 一起使用。我正在使用每个产品的最新下载。当我启动 ESB 时，我在消息代理控制台中收到以下异常（以及 ESB 控制台中的类似错误）：

```
[2012-11-13 11:57:18,246] ERROR {org.apache.axis2.engine.AxisEngine} - Unauthorized call!. AuthorizationAction has not been specified for service:Qpi dAdminService, operation:getAccessKey org.apache.axis2.AxisFault: Unauthorized call!. AuthorizationAction has not been specified for service:QpidAdminService, operation:getAccessKey
        at org.wso2.carbon.server.admin.module.handler.AuthorizationHandler.invoke(AuthorizationHandler.java:80)
        at org.apache.axis2.engine.Phase.invokeHandler(Phase.java:340)
        at org.apache.axis2.engine.Phase.invoke(Phase.java:313)
        at org.apache.axis2.engine.AxisEngine.invoke(AxisEngine.java:262)
        at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:168)
        at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:172)
        at org.apache.axis2.transport.http.AxisServlet.doPost(AxisServlet.java:146)
        at org.wso2.carbon.core.transports.CarbonServlet.doPost(CarbonServlet.java:231)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.eclipse.equinox.http.servlet.internal.ServletRegistration.handleRequest(ServletRegistration.java:90)
        at org.eclipse.equinox.http.servlet.internal.ProxyServlet.processAlias(ProxyServlet.java:111)
        at org.eclipse.equinox.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:67)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.wso2.carbon.tomcat.ext.servlet.DelegationServlet.service(DelegationServlet.java:68)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.wso2.carbon.tomcat.ext.filter.CharacterSetFilter.doFilter(CharacterSetFilter.java:61)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
        at org.wso2.carbon.tomcat.ext.valves.CompositeValve.invoke(CompositeValve.java:172)
        at org.wso2.carbon.tomcat.ext.valves.CarbonStuckThreadDetectionValve.invoke(CarbonStuckThreadDetectionValve.java:156)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
        at org.wso2.carbon.tomcat.ext.valves.CarbonContextCreatorValve.invoke(CarbonContextCreatorValve.java:52)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1653)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source) 
```

我无法在文档或 StackOverflow 上找到任何内容，它显然充当 WSO2 论坛，搜索诸如“AuthorizationAction”和“getAccessKey”之类的术语。

我确定我错过了一些相当明显的东西，但我不知道在哪里看。我假设这个知识库条目是最新的，但很难判断是否是这种情况。

任何指针、链接或信息将不胜感激。有其他人做过这个教程吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T06:51:57.740

显然，这是 qpid 相关组件之一中的错误。将在相关组件的最新即将发布的版本中修复。

# c# - 在动态方法调用中获取参数名称和值

> ID：13366732
> 
> 赞同：0
> 
> 时间：2012-11-13T18:43:36.173
> 
> 标签：c#, dynamic, dynamicobject, tryinvokemember

我正在实施一个`DynamicObject`. 在 中`TryInvokeMethod`，除了参数（传递给方法）之外，我还需要参数的名称（如果已使用）。

我可以看到`binder.CallInfo.ArgumentNames`确实提供了名称，但我无法将它们与值相关联。有没有办法这样做，或者我希望反对希望：

```
public override bool TryInvokeMember(InvokeMemberBinder binder, object[] args, out object result)
{
    var names = binder.CallInfo.ArgumentNames;
    foreach (var arg in args)
    {
        arguments.Add(new Argument(arg));
    }
    //I need to associate the names and the args
    result = this;
    return true;
} 
```

因此，例如，如果我拨打以下电话：

```
myDynamicObject.DynamicInvoke("test", something: "test2") 
```

我有`test`and `test2`，and also `something`，但我无法获得`something`作为名称`test2`且`test`没有名称的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T19:05:08.593

我不得不使用这样一个事实，即命名参数仅在指定非命名参数之后出现（感谢[user629926](https://stackoverflow.com/users/629926/user629926)指向显而易见的）和初始代码：

```
var names = binder.CallInfo.ArgumentNames;
var numberOfArguments = binder.CallInfo.ArgumentCount;
var numberOfNames = names.Count;

var allNames = Enumerable.Repeat<string>(null, numberOfArguments - numberOfNames).Concat(names);
arguments.AddRange(allNames.Zip(args, (flag, value) => new Argument(flag, value))); 
```

# regex - 正则表达式以升序表示数字范围

> ID：13366738
> 
> 赞同：2
> 
> 时间：2012-11-13T18:44:10.577
> 
> 标签：regex, numbers, range

我必须使用格式“number1-number2”指定一对端口。Number1 和 number2 都在 [0-65535] 范围内。但是 number2 总是大于 number1。

是否可以使用正则表达式来表达逻辑“number2 总是大于 number1”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T01:18:07.133

提取数字应该是您的首选，因为它是最佳选择。仅在正则表达式中没有好的方法可以做到这一点。你应该使用

```
\\[(\\d+)-(\\d+)\\] 
```

提取这两个数字并进行比较。从字符串到整数的转换成本微乎其微，与任何可能接近您需要的正则表达式的成本相比，它相形见绌。我们正在谈论大量多项式指数与线性时间。

# regex - 获取路径的多级基本名称

> ID：13366740
> 
> 赞同：2
> 
> 时间：2012-11-13T18:44:20.520
> 
> 标签：regex, perl, bash

我正在尝试编写一个*类似于*UNIX的程序`basename`，除了我可以控制它的基础级别。

例如，该程序将执行如下任务：

```
$PROGRAM /PATH/TO/THE/FILE.txt 1
FILE.txt # returns the first level basename

$PROGRAM /PATH/TO/THE/FILE.txt 2
THE/FILE.txt #returns the second level basename

$ PROGRAM /PATH/TO/THE/FILE.txt 3
TO/THE/FILE.txt #returns the third level base name 
```

我试图用 perl 写这个，为了快速测试我的想法，我使用以下命令行脚本来获取二级基本名称，但无济于事：

```
$echo "/PATH/TO/THE/FILE.txt" | perl -ne '$rev=reverse $_; $rev=~s:((.*?/){2}).*:$2:; print scalar reverse $rev'
/THE 
```

如您所见，它只打印出目录名称，而不是其余的。我觉得这与与量词的非贪婪匹配有关，但我在这方面缺乏知识。

如果在 bash 中有更有效的方法来执行此操作，请告知

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T19:27:35.250

如果您`$1`在替换中使用而不是`$2`. 捕获按其左括号出现在正则表达式中的顺序编号，并且您希望保留最外面的捕获。然而，代码不够优雅。

该[`File::Spec`](https://metacpan.org/module/File%3a%3aSpec)模块非常适合此目的。它是每个 Perl v5 版本的核心模块，因此不需要安装。

```
use strict;
use warnings;

use File::Spec;

my @path = File::Spec->splitdir($ARGV[0]);
print File::Spec->catdir(splice @path, -$ARGV[1]), "\n"; 
```

**输出**

```
E:\Perl\source>bnamen.pl /PATH/TO/THE/FILE.txt 1
FILE.txt

E:\Perl\source>bnamen.pl /PATH/TO/THE/FILE.txt 2
THE\FILE.txt

E:\Perl\source>bnamen.pl /PATH/TO/THE/FILE.txt 3
TO\THE\FILE.txt 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T20:03:34.993

一个纯粹的 bash 解决方案（不检查参数的数量等等）：

```
#!/bin/bash

IFS=/ read -a a <<< "$1"
IFS=/ scratch="${a[*]:${#a[@]}-$2}"
echo "$scratch" 
```

完毕。

像这样工作：

```
$ ./program /PATH/TO/THE/FILE.txt 1
FILE.txt
$ ./program /PATH/TO/THE/FILE.txt 2
THE/FILE.txt
$ ./program /PATH/TO/THE/FILE.txt 3
TO/THE/FILE.txt
$ ./program /PATH/TO/THE/FILE.txt 4
PATH/TO/THE/FILE.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T19:08:53.667

```
#!/bin/bash                                                                                                                    

[ $# -ne 2 ] && exit

input=$1
rdepth=$2
delim=/

[ $rdepth -lt 1 ] && echo "depth must be greater than zero" && exit

parts=$(echo -n $input | sed "s,[^$delim],,g" | wc -m)
[ $parts -lt 1 ] && echo "invalid path" && exit

[ $rdepth -gt $parts ] && echo "input has only $parts part(s)" && exit

depth=$((parts-rdepth+2))

echo $input | cut -d "$delim" -f$depth- 
```

用法：

```
$ ./level.sh /tmp/foo/bar 2
foo/bar 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T19:09:04.353

这是一个 bash 脚本`awk`：

```
#!/bin/bash

level=$1
awk -v lvl=$level 'BEGIN{FS=OFS="/"}
    {count=NF-lvl+1;
    if (count < 1) {
        count=1;
    }
    while (count <= NF) {
        if (count > NF-lvl+1 ) {
            printf "%s", OFS;
        }
        printf "%s", $(count);
        count+=1;
    }
    printf "\n";
}' 
```

要使用它，请执行以下操作：

```
$ ./script_name num_args input_file 
```

例如，如果文件`input`包含行“ `/PATH/TO/THE/FILE.txt`”

```
$ ./get_lvl_name 2 < input
THE/FILE.txt
$ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-13T19:11:00.330

正如@tripleee 所说，在路径分隔符上拆分（“/”表示类 Unix），然后再粘贴在一起。例如：

```
echo "/PATH/TO/THE/FILE.txt" | perl -ne 'BEGIN{$n=shift} @p = split /\//; $start=($#p-$n+1<0?0:$#p-$n+1); print join("/",@p[$start..$#p])' 1
FILE.txt

echo "/PATH/TO/THE/FILE.txt" | perl -ne 'BEGIN{$n=shift} @p = split /\//; $start=($#p-$n+1<0?0:$#p-$n+1); print join("/",@p[$start..$#p])' 3
TO/THE/FILE.txt 
```

只是为了好玩，如果您提供分隔符作为第二个参数，这里有一个适用于 Unix 和 Windows（以及任何其他）路径类型：

```
# Unix-like
echo "PATH/TO/THE/FILE.txt" | perl -ne 'BEGIN{$n=shift;$d=shift} @p = split /\Q$d\E/; $start=($#p-$n+1<0?0:$#p-$n+1); print join($d,@p[$start..$#p])' 3 /
TO/THE/FILE.txt
# Wrong delimiter
echo "PATH/TO/THE/FILE.txt" | perl -ne 'BEGIN{$n=shift;$d=shift} @p = split /\Q$d\E/; $start=($#p-$n+1<0?0:$#p-$n+1); print join($d,@p[$start..$#p])' 3 \\
PATH/TO/THE/FILE.txt
# Windows
echo "C:\Users\Name\Documents\document.doc" | perl -ne 'BEGIN{$n=shift;$d=shift} @p = split /\Q$d\E/; $start=($#p-$n+1<0?0:$#p-$n+1); print join($d,@p[$start..$#p])' 3 \\
Name\Documents\document.doc
# Wrong delimiter
echo "C:\Users\Name\Documents\document.doc" | perl -ne 'BEGIN{$n=shift;$d=shift} @p = split /\Q$d\E/; $start=($#p-$n+1<0?0:$#p-$n+1); print join($d,@p[$start..$#p])' 3 /
C:\Users\Name\Documents\document.doc 
```

# java - 我需要创建一个程序，在创建的学生、本科生和研究生课程中添加、删除、列出、保存和排序学生

> ID：13366741
> 
> 赞同：2
> 
> 时间：2012-11-13T18:44:25.123
> 
> 标签：java

我有三个不同的班级，一个是针对研究生的，一个是本科生的，然后是一个普通的学生班级，我需要从 main 方法中弄清楚如何将学生添加到数组列表中。我不知道如何添加名字，因为它是私有的，并且需要保持私有。

```
package enrollmentdatabase;

import java.util.ArrayList;
import java.util.Scanner;

public class EnrollmentDataBase {

public static void main(String[] args) {
    Scanner input = new Scanner (System.in);
    String option = optionChoise(input);
    String option1 = "ADD";//ADD option
    String option2 = "REMOVE";//REMOVE OPTION
    String option3 = "LIST";//LIST OPTION
    String option4 = "SAVE";//SAVE OPTION
    String option5 = "SORT";//SORT OPTION
    ArrayList studentList = new ArrayList();

}//end of main method
public static String optionChoise(Scanner input){
    String opt1 = "ADD";//ADD option
    String opt2 = "REMOVE";//REMOVE OPTION
    String opt3 = "LIST";//LIST OPTION
    String opt4 = "SAVE";//SAVE OPTION
    String opt5 = "SORT";//SORT OPTION
    System.out.println("Enter what you want to do(ADD, REMOVE, LIST, SAVE, or SORT): ");
    String opt = input.nextLine();
    if((opt.compareToIgnoreCase(opt1)) !=0 || (opt.compareToIgnoreCase(opt1)) != 0 || (opt.compareToIgnoreCase(opt1)) !=0
            || (opt.compareToIgnoreCase(opt1)) !=0 || (opt.compareToIgnoreCase(opt1)) !=0){//enter this if conditional in order to establish that the input is valid
        System.out.println("This is not a valid input, please enter in what you want to do: ");
        opt = input.nextLine();
    }//end of if conditional
    return opt;
}//end of option method
public static ArrayList addList(ArrayList studentList, Scanner input){
    System.out.println("Enter the Student's first name: ");
    String nameFirst= input.nextLine();
    Student student1 = new Student();
    student1.firstName = nameFirst;
    System.out.println("Enter the Student's last name: ");
    System.out.println("Enter the Student's UID: ");
    System.out.println("Enter the Student's status: ");
    System.out.println("Enter YES for having a thesis option, else NO: ");
    System.out.println("Enter Masters for Master Studies of PHD for PHD studies: ");
    System.out.println("Enter the name of the major professor: ");
    System.out.println("Enter the student class standing: ");
    System.out.println("Enter the Student's major: ");
    System.out.println("Enter the student's overall GPA: ");
    System.out.println("Enter the student's major GPA: ");
}//end of addList method
}//end of class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:46:10.727

> 我不知道如何添加名字，因为它是私人的，

为该**私有数据**提供**公共 getter**和**公共 setter**方法并通过它们访问它。

 **例如：

```
 class Student {
    private String fName;
    public void setFname(String fName){
    this.fName = fName;
    }
    public String getFName(){
    return fname;
    }
    }
class AnotherClass {
public static void main(String...args){
student s = new Student();
System.out.println(s.getFName());//to access fName(which is private) in class Student.
} 
```

}**

# query-optimization - 执行查询优化时，DBMS 中的“on the fly”是什么意思？

> ID：13366742
> 
> 赞同：4
> 
> 时间：2012-11-13T18:44:25.537
> 
> 标签：query-optimization, database

我正在研究 DBMS 的优化器和计划。

它在某处说“选择/投影是**即时处理的**”

我不明白“在飞行中”是什么意思。

它与 DBMS 中的“流水线”或“物质化”有关吗？

谢谢

# jquery - jQuery中的意外标识符错误

> ID：13366743
> 
> 赞同：0
> 
> 时间：2012-11-13T18:44:27.823
> 
> 标签：jquery

这个jquery有什么问题？

```
$(function(){
    totalwidth = $(window).width();
    if ( totalwidth < 1295 ){
        $("#maininvite").width(((1295 - totalwidth)x100 / 1295) + 50 +'%');
    }

}); 
```

它的目的是进行计算，然后将其添加到已设置的 50% 宽度。

它在 chrome 检查中给了我意想不到的标识符

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T18:46:39.510

看起来这条线是你的问题

```
x100 
```

应该是

```
*100 
```

更好地计算值，然后连接到`'%'`

```
$(function(){
    totalwidth = $(window).width();
    if ( totalwidth < 1295 ){
        var newWidth =  (((1295 - totalwidth) * 100)/1295 ) + 50; 
        $("#maininvite").width( newWidth + '%');
    }

}); 
```

# javascript - 一旦div的孩子都具有特定的类名，如何创建一个触发事件的Javascript侦听器

> ID：13366747
> 
> 赞同：0
> 
> 时间：2012-11-13T18:45:01.477
> 
> 标签：javascript, jquery

我有一个可点击的瓷砖游戏：

这里的例子：

[http://adaptive.womworld.com/facebook-tabs/demo/](http://adaptive.womworld.com/facebook-tabs/demo/)

有 3 个阶段，我希望应用程序在所有瓦片都选择了类名时进行侦听，然后它会删除父级。

目前，您必须单击以删除它，但如果可能的话，我希望它在单击最后一个图块后发生，无论是哪个图块。

我的尝试都没有成功，任何帮助，非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T18:50:41.663

如果您知道总共有多少个图块，则可以检查该类的图块数是否等于图块总数。

```
if($('#tileWrapper .myclass').length == numTotalTiles) {...} 
```

只需在每个图块单击事件结束时调用它即可。

# c# - 如何将编解码器添加到媒体元素

> ID：13366749
> 
> 赞同：3
> 
> 时间：2012-11-13T18:45:10.920
> 
> 标签：c#, windows-store-apps, microsoft-metro, media-player

我正在开发 Windows 8 应用程序。我必须制作一个媒体播放器。为了快速入门，我使用内置媒体元素制作媒体播放器。但媒体元素不支持 avi 和 mkv 文件！如何添加使媒体元素甚至可以播放 mkv 和 avi 文件的编解码器。提前致谢。

# java - src 目录中的文件路径

> ID：13366752
> 
> 赞同：0
> 
> 时间：2012-11-13T18:45:14.153
> 
> 标签：java, file, path

我正在使用一种方法，该方法需要指向 Eclipse 中我的 src 目录结构中的文件的字符串路径。这个文件的路径是简单的 src\fileName.txt 还是有不同的方式我应该得到这个文件，因为它目前似乎没有工作

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T19:05:12.580

运行此程序，您将永远不会忘记如何记住。

文件 file = new File("sample.txt"); System.out.println(file.getAbsolutePath());

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T18:49:31.883

如果您遵循 maven 标准目录结构，类文件将相对于类路径定位，如下所示：

如果你愿意`SomeClass.class`，你可以通过`com.mydomain.packageorappname.deeperpackage.SomeClass`. 这就是你要问的吗？

# r - R公式y~1是什么意思？

> ID：13366755
> 
> 赞同：43
> 
> 时间：2012-11-13T18:45:58.217
> 
> 标签：r, r-formula

我正在阅读有关[R Formula](http://stat.ethz.ch/R-manual/R-devel/library/stats/html/formula.html)的文档，并试图弄清楚如何使用[depmix（来自 depmixS4 包）](http://cran.r-project.org/web/packages/depmixS4/depmixS4.pdf)。

现在，在 depmixS4 的文档中，示例公式往往类似于`y ~ 1`. 对于像 的简单情况`y ~ x`，它定义了输入 x 和输出 y 之间的关系，所以我得到它类似于`y = a * x + b`，其中`a`是斜率，并且`b`是截距。

如果我们回到`y ~ 1`，公式会让我失望。它是否等同于`y = 1`（y = 1 处的水平线）？

添加一点上下文，如果您查看 depmixs4 文档，下面有一个示例

`depmix(list(rt~1,corr~1),data=speed,nstates=2,family=list(gaussian(),multinomial()))`

我认为总的来说，以结尾的公式让`~ 1`我感到困惑。任何人都可以解释什么`~ 1`或`y ~ 1`意思吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-11-13T19:20:12.237

R 中模型公式（星号、加号、插入符号）中使用的许多运算符具有特定于模型的含义，这就是其中之一：“一”符号表示截距。

换句话说，它是当自变量为零或没有影响时，因变量预期具有的值。（要使用模型术语的更常见的数学含义，请将它们包装在 中`I()`）。通常假设有截距，因此最常见的是在明确说明没有截距的模型的上下文中看到它。

以下是为 y 在 x 上的线性回归模型指定相同模型的两种方法。第一个具有隐式截距项，第二个具有显式截距项：

```
y ~ x
y ~ 1 + x 
```

以下是通过原点在 x 上对 y 进行线性回归的方法（即，没有截距项）：

```
y ~ 0 + x
y ~ -1 + x
y ~ x - 1 
```

在您提到的特定情况下（ y ~ 1 ），没有其他变量预测 y，因此自然预测是 y 的平均值，正如 Paul Hiemstra 所说：

```
> data(city)
> r <- lm(x~1, data=city)
> r

Call:
lm(formula = x ~ 1, data = city)

Coefficients:
(Intercept)  
       97.3  

> mean(city$x)
[1] 97.3 
```

用 a 删除截距`-1`会让你一无所有：

```
> r <- lm(x ~ -1, data=city)
> r

Call:
lm(formula = x ~ -1, data = city)

No coefficients 
```

`formula()`是一个从对象中提取公式的函数，它的帮助文件不是阅读 R 中指定模型公式的最佳位置。我建议你看一下[这个解释](http://cran.r-project.org/doc/manuals/R-intro.html#Statistical-models-in-R)或[An Introduction to R 的](http://cran.r-project.org/doc/manuals/R-intro.pdf)第 11 章。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-11-13T19:33:39.810

如果您的模型采用以下形式 `y ~ x1 + x2`（粗略地说）表示：

```
 y = β0 + β1(x1) + β2(x2)

 Which is of course the same as 
 y = β0(1) + β1(x1) + β2(x2) 
```

上式中有一个隐含`+1`的含义。所以真的，上面的公式是`y ~ 1 + x1 + x2`

我们可以有一个非常简单的公式，其中 y 不依赖于任何其他变量。这是您引用的公式， `y ~ 1` 大致相当于

```
 y = β0(1) = β0 
```

正如@Paul 指出的那样，当您解决简单模型时，您会得到`β0 = mean (y)`

* * *

### 这是一个例子

```
 # Let's make a small sample data frame
  dat <- data.frame(y= (-2):3, x=3:8)

  # Create the linear model as above
  simpleModel <- lm(y ~ 1, data=dat)

  ## COMPARE THE COEFFICIENTS OF THE MODEL TO THE MEAN(y)
  simpleModel$coef
    # (Intercept) 
    #         0.5 

  mean(dat$y)
    # [1] 0.5 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-13T19:00:24.907

一般来说，这样的公式以线性模型的形式描述了因变量和自变量之间的关系。左边是因变量，右边是自变量。自变量用于计算线性模型的趋势分量，然后假设残差具有某种分布。当独立值等于 1`~ 1`时，趋势分量是单个值，例如数据的平均值，即线性模型只有一个截距。

# r - R（工作室）因子与水平

> ID：13366760
> 
> 赞同：2
> 
> 时间：2012-11-13T18:46:18.393
> 
> 标签：r

我是一名学生，目前正在学习使用 R（工作室），为此我收到了一项任务。我应该比较一些主要是随机生成的数据并从中得出结论。

然而，我遇到的问题是这个数据有一个有 5 个级别的因子，我想一次比较一个级别的数据......

```
> str(data)
'data.frame':   275 obs. of  5 variables:  
 $ leverancier        : Factor w/ 5 levels "A","B","C","D",..: 1 1 1 1 1 1 1 1 1 1 ...   
 $ las_trekproef      : num  211 375 503 195 221 ...  
 $ las_score          : num  2.6 3.1 4.3 2.6 2.7 3.3 3.9 2.2 2.7 2.7 ...  
 $ afwijking_draaiwerk: num  0.081 0.061 0.015 0.125 0.256 0.004 0.124 0.016 0.042 0.062 ...  
 $ afwijking_freeswerk: num  0.336 0.026 0.032 0.161 0.36 0.447 0.062 0.176 0.317 0.212 ... 
```

我想要做的是将每个级别的数据放在不同的变量中，这样我就可以一次制作一个级别的图表和箱线图。

A <- *（此处为 A 级的所有数据）*

代替：

```
summary(data)  
 leverancier las_trekproef     las_score     afwijking_draaiwerk afwijking_freeswerk
 A:55        Min.   :128.6   Min.   :2.000   Min.   :0.0000      Min.   :0.0010     
 B:55        1st Qu.:270.6   1st Qu.:2.700   1st Qu.:0.0355      1st Qu.:0.1210     
 C:55        Median :361.0   Median :3.500   Median :0.0760      Median :0.2670     
 D:55        Mean   :356.1   Mean   :3.513   Mean   :0.1268      Mean   :0.3055     
 E:55        3rd Qu.:443.6   3rd Qu.:4.250   3rd Qu.:0.1340      3rd Qu.:0.4255     
             Max.   :571.4   Max.   :5.000   Max.   :1.1390      Max.   :1.3890 
```

提前致谢，

NH

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T18:49:47.323

你的意思是

```
a <- subset(data, leverancier=='A') 
```

如需帮助，只需查看`?subset`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T19:59:57.723

您可以按因素使用 tapply 作为摘要。如果您使用公式界面并且 x 是一个因子，箱线图将按因子绘制变量。您还可以将因子索引到子集 y 以生成单个箱线图。但是，对于基于因素的 y 比较，您希望在同一图上绘制水平。这里有些例子。

```
# Create example data
dat <- data.frame(leverancier=rep(c("A","A","B","B","B","A","C","D","D","C"),100),
                  las_trekproef=runif(1000,100,500),
                  las_score=runif(1000,1,4))

# Use tapply to summarize y by factor                 
tapply(dat$las_score, dat$leverancier, FUN=summary)

# Using formula interface plot y by factor 
boxplot(las_score ~ leverancier, data=dat, notch=TRUE)

# You can also index y based on a factor level to create a single boxplot of y
boxplot(dat[dat$leverancier == "A" ,]$las_score, notch=TRUE) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T21:11:58.367

考虑与`split`

```
split(data, data$leverancier) 
```

会给你一个`list`s `data.frame`，每个对应一个级别的`leverancier`。然后，您可以一次对每个元素进行操作，或者循环遍历列表以依次对每个部分进行操作。

我意识到这并不能直接回答您的问题（Seb 的回答就是这样做的），但它应该为您指明在 R 中处理数据的更惯用的方向。

# php - 在 WooCommerce 商店页面中隐藏类别

> ID：13366764
> 
> 赞同：3
> 
> 时间：2012-11-13T18:46:29.480
> 
> 标签：php, woocommerce

我一直在尝试从 SHOP 页面隐藏特定类别。我找到了这段代码：

```
add_filter( 'pre_get_posts', 'custom_pre_get_posts_query' );

function custom_pre_get_posts_query( $q ) {

    if ( ! $q->is_main_query() ) return;
    if ( ! $q->is_post_type_archive() ) return;

    $q->set( 'tax_query', array(array(
        'taxonomy' => 'product_cat',
        'field' => 'slug',
        'terms' => array( 'CATEGORY TO HIDE' ),
        'operator' => 'NOT IN'
    )));

    remove_filter( 'pre_get_posts', 'custom_pre_get_posts_query' );

} 
```

我已将此代码粘贴到我的主题 function.php 文件中，但我没有实现结果...

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-23T21:54:23.730

我知道这有点晚了，但我自己也遇到了这个问题，并用以下函数解决了这个问题：

```
add_filter( 'get_terms', 'get_subcategory_terms', 10, 3 );

function get_subcategory_terms( $terms, $taxonomies, $args ) {

  $new_terms = array();

  // if a product category and on the shop page
  if ( in_array( 'product_cat', $taxonomies ) && ! is_admin() && is_shop() ) {

    foreach ( $terms as $key => $term ) {

      if ( ! in_array( $term->slug, array( '**CATEGORY-HERE**' ) ) ) {
        $new_terms[] = $term;
      }

    }

    $terms = $new_terms;
  }

  return $terms;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-05T01:13:59.407

隐藏除管理后端之外的所有类别的简单方法：

在`functions.php`：

```
add_filter( 'get_terms', 'hide_category', 10, 1 );
function hide_category( $terms ) {
  $new_terms = array();
  foreach ( $terms as $term ) {
    if ( $term->slug !== 'secret_category' ) {
      $new_terms[] = $term;
    } else if ( $term->taxonomy !== 'product_cat' || is_admin() ) {
      $new_terms[] = $term;
    }
  }
  return $new_terms;
} 
```

如果您只想对商店隐藏它，请添加`|| !is_shop()`到`else if`条件中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-14T12:54:06.137

以下片段对我来说很好用：

```
add_action( 'pre_get_posts', 'custom_pre_get_posts_query' );

function custom_pre_get_posts_query( $q ) {

    if ( ! $q->is_main_query() ) return;
    if ( ! $q->is_post_type_archive() ) return;

    if ( ! is_admin() && is_shop() ) {

        $q->set( 'tax_query', array(array(
            'taxonomy' => 'product_cat',
            'field' => 'slug',
            'terms' => array( 'your category slug' ), // Don't display products in the knives category on the shop page
            'operator' => 'NOT IN'
        )));

    }

    remove_action( 'pre_get_posts', 'custom_pre_get_posts_query' );

} 
```

我想知道如何在类别中排除的产品通过产品搜索来实现相同的功能，同时使用这些产品完全隐藏的片段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T22:16:14.463

如果你想在你的主题中隐藏一些类别，你可以`exclude`在函数中传递参数`wp_list_categories`：

```
wp_list_categories( array(
'taxonomy'              =>  'product_cat',
'hide_empty'            =>  1,
'use_desc_for_title'    =>  0,
'title_li'              =>  '&nbsp;',
'show_count'            =>  0,
'exclude'               =>  '63'    // <-- Hidden) ); 
```

# image-processing - MATLAB图像变换

> ID：13366771
> 
> 赞同：6
> 
> 时间：2012-11-13T18:46:48.957
> 
> 标签：image-processing, computer-vision, matlab

以下代码描述了图像 I 的仿射变换，

```
T = [sx, 0, 0;...
      0, sy, 0;...
      0, 0, 1];
tform = maketform('affine', T);
[J,cdata,rdata] = imtransform(I,tform); 
```

在获得变换后的图像 J 后，我想在图像 J 上找到 I(5,5) 的适当像素值。

我该怎么办？

![在此处输入图像描述](../Images/d55ecbc0eb5e79e86bf09da5eff72f0b.png)

![在此处输入图像描述](../Images/466dd931cf9709eab77d7e2f360dbdb1.png)

我的代码是

```
function test()
    sx = 0.5; sy = 1;
    theta = pi/4;
    Ts = [sx, 0, 0;...
    0, sy, 0;...
    0, 0, 1];
    Tr = [cos(theta) -sin(theta) 0;...
          sin(theta) cos(theta), 0; ...
          0, 0, 1];
    T = Ts*Tr;

    I = imread('image_0002.jpg');
    tform = maketform('affine', T);
    [J,xdata,ydata] = imtransform(I,tform);
    h = ydata(2) - ydata(1);
    w = xdata(2) - xdata(1);

    %%
    gridOx = meshgrid(1:50:size(I,2), 1:50:size(I,1));
    gridOy = meshgrid(1:50:size(I,1), 1:50:size(I,2))';
    go = [gridOy(:), gridOx(:), ones(length(gridOx(:)),1)];

    for i=1:size(go,1)
        I = makept(I, go(i,1), go(i,2));
    end
    imshow(I);

    %%
    gt = T*go';

    TL = T*[1,1,1]';
    BL = T*[size(I,1), 1, 1]';
    TR = T*[1, size(I,2), 1]';
    BR = T*[size(I,1), size(I,2), 1]';
    minr = min([TL(1), TR(1), BL(1), BR(1)]);
    minc = min([TL(2), TR(2), BL(2), BR(2)]);

    %%
    gt = int32(round(gt));
    r = gt(1,:) - minr+1;
    c = gt(2,:) - minc+1;

    figure,hold on;
    for i=1:length(r)
        J = makept(J, r(i), c(i));
        plot(gt(1, i), gt(2, i));
    end
    figure, imshow(J);

    close all;
end

function I = makept(I, r, c)
    mr = max(r-2,1);
    mc = max(c-2,1);
    maxr = min(r+2,size(I,1));
    maxc = min(c+2,size(I,2));

    I(mr:maxr, mc:maxc,:) = 0;
    I(mr:maxr, mc:maxc,1) = 255;
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T19:05:09.350

您可以像转换图像一样转换像素坐标。

```
appropriatePixel = J(T*[5;5;1]); 
```

## 编辑

您发布的代码已经很接近了。永远记住，对于图像，图像的原点位于左上角，并且图像尺寸的顺序是列-行，这与矩阵不同。您在某些地方考虑到了这一点，但并非在所有地方都考虑到了这一点。

下面的代码应该可以解决问题。`gt = T*go`被更改为使用 T 的转置，`minc`并被`minr`交换。

```
function airplane()
       close all
       sx = 0.5; sy = 1;
       theta = pi/4;
       Ts = [sx, 0, 0;...
       0, sy, 0;...
       0, 0, 1];
       Tr = [cos(theta) -sin(theta) 0;...
           sin(theta) cos(theta), 0; ...
           0, 0, 1];
       T = Ts*Tr;

       I = imread('airplane2.png');
       tform = maketform('affine', T);
       [J,xdata,ydata] = imtransform(I,tform);

        %% 
       gridOx = meshgrid(1:50:size(I,2), 1:50:size(I,1));
       gridOy = meshgrid(1:50:size(I,1), 1:50:size(I,2))';
       go = [gridOx(:), gridOy(:), ones(length(gridOx(:)),1)];

       figure; imshow(I); hold on;
       scatter(go(:,1), go(:,2), 25, 'rs', 'filled');

       %%
       gt = T'*go'; 

       TL = T*[1,1,1]';
       BL = T*[size(I,1), 1, 1]';
       TR = T*[1, size(I,2), 1]';
       BR = T*[size(I,1), size(I,2), 1]';
       minc = min([TL(1), TR(1), BL(1), BR(1)]);
       minr = min([TL(2), TR(2), BL(2), BR(2)]);

       %%
       gt = int32(round(gt));
       r = gt(1,:) - minr+1;
       c = gt(2,:) - minc+1;

       figure; imshow(J);hold on;
       scatter(c, r, 25, 'rs', 'filled');

end 
```

结果：
![飞机](../Images/2fe49e5a7639aa4457bcdc3f6fa73b0b.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T11:08:03.483

我找到了另一种方法..使用'tformfwd'..我们需要应用缩放以及[http://blogs.mathworks.com/steve/2006/02/14/spatial-transformations-maketform-tformfwd-and中的解释-tforminv/](http://blogs.mathworks.com/steve/2006/02/14/spatial-transformations-maketform-tformfwd-and-tforminv/)

```
 function [new_im, grn, gcn] = transformImage(I, gr, gc, TM)
              [new_im xdata ydata] = imtransform(I, TM);
              w = xdata(2)-xdata(1) +1;
              h = ydata(2)-ydata(1)+1;
              scalex = size(new_im,2)/w;
              scaley = size(new_im,1)/h;

              % cartesian coordinates
              go = [gc(:), gr(:)];

              %% cartesian coordinates
              NPt = tformfwd(TM, go);

              % convert to image coordinates
              NPtImage(:,1) = NPt(:,1) - xdata(1) + 1;
              NPtImage(:,2) = NPt(:,2) - ydata(1) + 1;
              NPtImage(:,1) = NPtImage(:,1)*scalex;
              NPtImage(:,2) = NPtImage(:,2)*scaley;
              NPtImage = round(NPtImage);

              grn = NPtImage(:,2);
              gcn = NPtImage(:,1);
              grn = reshape(grn, size(gr,1), size(gr,2));
              gcn = reshape(gcn, size(gc,1), size(gc,2));

              showimgs = false;
              if showimgs
                  I = uint8(I);
                  new_im = uint8(new_im);

                  figure, imshow(I), hold on;
                  for i=1:size(go,1)
                      plot(go(i,1), go(i,2), 'r*');
                  end

                  figure, imshow(new_im, 'XData', xdata, 'YData', ydata);
                  hold on
                  axis on
                  for i=1:size(go,1)
                      plot(NPt(i,1), NPt(i,2), 'r*')
                  end

                  tmpim = new_im;
                  for i=1:size(NPtImage,1)
                      tmpim = makept(tmpim, NPtImage(i,2), NPtImage(i,1), 'b');
                  end
                  figure, imshow(tmpim);
              end

              end

              function I = makept(I, r, c, color)
              mr = max(r-2,1);
              mc = max(c-2,1);
              maxr = min(r+2,size(I,1));
              maxc = min(c+2,size(I,2));

              I(mr:maxr, mc:maxc,:) = 0;

              if strcmp(color, 'r')
                  I(mr:maxr, mc:maxc,1) = 255;
              else
                  I(mr:maxr, mc:maxc,3) = 255;
              end
              end 
```

# php - 使用 ajax .load() 包含一个包含很多包含的 php 文件

> ID：13366773
> 
> 赞同：0
> 
> 时间：2012-11-13T18:46:59.640
> 
> 标签：php, javascript, jquery, ajax, include

我正在尝试使用 load() 通过 ajax 加载 php 文件。这是我的代码：

```
var loadUrl = "myfile.php";                             
$("#lst-results").load(loadUrl); 
```

所以，当我这样做时，它会起作用：

```
<?php   
$test = 'Hi :3';    
?>
<h3>Hi</h3>
<h3><?php echo $test ?></h3> 
```

但我需要包含一个包含大量包含和使用许多不同类的函数的文件。我试图包含这个文件并将其用作这样的函数，但它不起作用，并且在 load() 结果中没有出现任何内容。该函数返回一个数组。

```
<?php
include 'path/myfile.php';
$result = myFunction(); 
?> 
```

我不知道如何解决它。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T18:53:05.817

您需要“回显” $result。

```
<?php
    include 'path/myfile.php';
    $result = myFunction();
    echo $result; 
```

# android - 按钮中断 LinearLayout layout_gravity top

> ID：13366776
> 
> 赞同：1
> 
> 时间：2012-11-13T18:47:05.760
> 
> 标签：android, android-layout, android-linearlayout, layout-gravity

我可能是个白痴，但似乎`Button`在水平`LinearLayout`休息时添加了一个`layout_gravity="top"`

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal">

    <TextView
        android:id="@+id/text"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:layout_gravity="top"
        android:text="TextView"
        android:background="#f00" />

    <ProgressBar
        android:id="@+id/progressBar1"
        style="?android:attr/progressBarStyleLarge"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <Button
        android:id="@+id/button"
        android:layout_width="wrap_content"
        android:layout_height="200dp"
        android:layout_weight="0"
        android:text="Button" />

</LinearLayout> 
```

这看起来像这样（在布局编辑器中）：

![截屏](../Images/026f823dee6129798d453a94debe2144.png)

请注意，文本视图位于*中心*，而不是顶部！如果*我所做的只是删除`<button>`，那么它看起来像这样：

![工作截图](../Images/a5d06370a37072fc7e0e3941bca0313b.png)

看，现在它像它应该的那样位于顶部。我将使用的解决方法是拥有`layout_gravity="start"`确实会导致正确行为的方法：

![在此处输入图像描述](../Images/15d50228c9239a4faec77560c3154ca5.png)

但无论如何，这是怎么回事？另请参阅[此相关问题](https://stackoverflow.com/questions/6575409/linearlayout-layout-gravity-bottom-not-working-on-horizontal-linearlayout)。这实际上可能是同一个问题；我不知道。反正那里没有真正的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T18:58:09.510

啊哈，我找到了答案！你必须设置`android:baselineAligned="false"`. 以前从未听说过，而且默认情况下它是打开的有点烦人！

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:baselineAligned="false"
    android:orientation="horizontal">

... 
```

# tfs - 同一 Collection TFS 2012 中的克隆团队项目

> ID：13366777
> 
> 赞同：1
> 
> 时间：2012-11-13T18:47:11.233
> 
> 标签：tfs

我最近将我的 TFS 环境升级到 2012（从 2010 年开始），并希望利用项目管理功能（即敏捷开发）。

我遇到的问题是当前项目具有无法通过 tfs 向导自动升级的自定义模板。

我想知道，有没有办法克隆现有项目或对其进行分支，以便在能够实现新的敏捷模板的同时保留其所有更改历史？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:49:06.210

你看过[http://tfsintegration.codeplex.com/](http://tfsintegration.codeplex.com/)吗？我多次使用它来将升级的 TFS2008 项目迁移到 TFS2010 以使用新模板。您还可以创建工作项映射以使它们也被迁移，这样签入就不会丢失工作项关系。一个小的缺点是，历史被扁平化到迁移的日期。我通过编辑适配器将旧的签入日期插入到评论中来“解决”这个问题。

# iphone - 文件夹中的文本重复？

> ID：13366778
> 
> 赞同：1
> 
> 时间：2012-11-13T18:47:11.550
> 
> 标签：iphone, objective-c, ios, parsing, ticker

我通过[JWFolders](https://github.com/jwilling/JWFolders)在我的应用程序中创建了一个文件夹。我的问题是我已经设置了一些代码来从 parse.com 获取一些字符串，如果没有连接，它会在 CLTickerview 中显示一些[文本](https://github.com/caydenliew/CLTickerView)。但是，如果我打开文件夹几次，每次打开文件夹时文本都会重复。这里有一些图片：

第一次打开后：![在此处输入图像描述](../Images/df79bbfa90fc882c75bf0d207fcea0a5.png)

大约5次后：![在此处输入图像描述](../Images/dfee1b8e8586ba2af9b35127621f7a9a.png)

10次​​后：![在此处输入图像描述](../Images/d463c2de336b6be4db9662bb78a9d480.png)

我的代码：

```
PFQuery *query = [PFQuery queryWithClassName:@"TestObject"];
[query getObjectInBackgroundWithId:@"object1"
                             block:^(PFObject *textu, NSError *error) {
                                 if (!error) {
                                     // start the tickerview
                                    CLTickerView *ticker = [[CLTickerView alloc] initWithFrame:CGRectMake(0, 35, 320, 35)];
                                    ticker.marqueeStr = [textu objectForKey:@"text"];
                                     ticker.marqueeFont = [UIFont systemFontOfSize:26];

                                     [self.view addSubview:ticker];

                                    // if there's connection

                                 } else {
                                     // Log details of our failure
                                     CLTickerView *ticker = [[CLTickerView alloc] initWithFrame:CGRectMake(0, 35, 320, 35)];
                                     ticker.marqueeStr = @"Keine Internet Verbindung";
                                     ticker.marqueeFont = [UIFont systemFontOfSize:26];

                                     [self.view addSubview:ticker];

                                     //if there's no connection;

                                 }

                             }]; 
```

有没有办法在文件夹关闭后删除tickerview中的东西或类似的东西？

有没有人给我建议或解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:34:36.027

每次打开文件夹时，您都`CLTickerView *ticker`在使用这条线创建单独的实例并将其作为子视图添加到视图中`[self.view addSubview:ticker];`。如果您只想添加一次，则需要在不会`alloc`重复调用该方法的地方创建代码。

创建在`viewDidLoad`左右，

```
CLTickerView *ticker = [[CLTickerView alloc] initWithFrame:CGRectMake(0, 35, 320, 35)]; 
```

然后将其用作，

```
PFQuery *query = [PFQuery queryWithClassName:@"TestObject"];
[query getObjectInBackgroundWithId:@"object1"
                             block:^(PFObject *textu, NSError *error) {
                                 if (!error) {
                                     // start the tickerview

                                     ticker.marqueeStr = [textu objectForKey:@"text"];
                                     ticker.marqueeFont = [UIFont systemFontOfSize:26];
                                     [self.view addSubview:ticker];

                                    // if there's connection

                                 } else {
                                     // Log details of our failure
                                     ticker.marqueeStr = @"Keine Internet Verbindung";
                                     ticker.marqueeFont = [UIFont systemFontOfSize:26];

                                     [self.view addSubview:ticker];

                                     //if there's no connection;

                                 }

                             }]; 
```

请记住，无论何时调用`CLTickerView *ticker = [[CLTickerView alloc] initWithFrame:CGRectMake(0, 35, 320, 35)];`，它都会创建单独的副本，并且一旦创建了新副本，您就无法访问前一个副本。

每当您想删除它时，只需使用`[ticker removeFromSuperview];`

# java - 如何将实时日期和时间添加到 JFrame 组件中，例如“状态栏”？

> ID：13366780
> 
> 赞同：4
> 
> 时间：2012-11-13T18:47:15.170
> 
> 标签：java, swing, date

就像我们添加到演示幻灯片一角的那个。

我已经添加并运行了 SwingX 库，以防万一。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T21:06:41.010

基本上，您想使用一个`JLabel`来显示日期/时间，一个`javax.swing.Timer`设置为定期间隔来更新标签和一个`DateFormat`实例来格式化日期值......

![在此处输入图像描述](../Images/d0463e8f7ec7dbadc352f1ed6c264234.png)

```
public class PlaySchoolClock {

    public static void main(String[] args) {
        new PlaySchoolClock();
    }

    public PlaySchoolClock() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new ClockPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class ClockPane extends JPanel {

        private JLabel clock;

        public ClockPane() {
            setLayout(new BorderLayout());
            clock = new JLabel();
            clock.setHorizontalAlignment(JLabel.CENTER);
            clock.setFont(UIManager.getFont("Label.font").deriveFont(Font.BOLD, 48f));
            tickTock();
            add(clock);

            Timer timer = new Timer(500, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    tickTock();
                }
            });
            timer.setRepeats(true);
            timer.setCoalesce(true);
            timer.setInitialDelay(0);
            timer.start();
        }

        public void tickTock() {
            clock.setText(DateFormat.getDateTimeInstance().format(new Date()));
        }
    }
} 
```

此示例使用半秒的时间间隔。主要原因是当我们设置初始延迟时，我不会费心去计算我们离下一秒还有多远。这确保我们始终保持最新

下一个问题是问“为什么？” 这种设置相对昂贵，计时器每半秒触发一次（以捕捉任何边缘情况）并更新屏幕，而大多数操作系统实际上已经在屏幕上显示了日期/时间......恕我直言

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-14T14:04:49.897

我`JStatusBar`从许多嵌套的`JPanels`. `JPanels`我很惊讶创建一个状态栏需要多少时间。

`JPanels`. `JPanels`到处。

这是测试 GUI。

![在此处输入图像描述](../Images/06f3b1cdd1833ce37ae58a5dc44fd3c2.png)

这是 JStatusBar 类。状态栏有一个最左边的状态更新区域。在右侧，您可以使用分隔栏添加任意数量的状态区域。唯一的限制是状态栏的宽度。

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.Graphics;

import javax.swing.JComponent;
import javax.swing.JPanel;

public class JStatusBar extends JPanel {

    private static final long serialVersionUID = 1L;

    protected JPanel leftPanel;
    protected JPanel rightPanel;

    public JStatusBar() {
        createPartControl();
    }

    protected void createPartControl() {    
        setLayout(new BorderLayout());
        setPreferredSize(new Dimension(getWidth(), 23));

        leftPanel = new JPanel(new FlowLayout(FlowLayout.LEADING, 5, 3));
        leftPanel.setOpaque(false);
        add(leftPanel, BorderLayout.WEST);

        rightPanel = new JPanel(new FlowLayout(FlowLayout.TRAILING, 5, 3));
        rightPanel.setOpaque(false);
        add(rightPanel, BorderLayout.EAST);
    }

    public void setLeftComponent(JComponent component) {
        leftPanel.add(component);
    }

    public void addRightComponent(JComponent component) {
        JPanel panel = new JPanel(new FlowLayout(FlowLayout.LEADING, 5, 0));
        panel.add(new SeparatorPanel(Color.GRAY, Color.WHITE));
        panel.add(component);
        rightPanel.add(panel);
    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);

        int y = 0;
        g.setColor(new Color(156, 154, 140));
        g.drawLine(0, y, getWidth(), y);
        y++;

        g.setColor(new Color(196, 194, 183));
        g.drawLine(0, y, getWidth(), y);
        y++;

        g.setColor(new Color(218, 215, 201));
        g.drawLine(0, y, getWidth(), y);
        y++;

        g.setColor(new Color(233, 231, 217));
        g.drawLine(0, y, getWidth(), y);

        y = getHeight() - 3;

        g.setColor(new Color(233, 232, 218));
        g.drawLine(0, y, getWidth(), y);
        y++;

        g.setColor(new Color(233, 231, 216));
        g.drawLine(0, y, getWidth(), y);
        y++;

        g.setColor(new Color(221, 221, 220));
        g.drawLine(0, y, getWidth(), y);
    }

} 
```

分隔栏是另一个`JPanel`。

```
import java.awt.Color;
import java.awt.Graphics;

import javax.swing.JPanel;

public class SeparatorPanel extends JPanel {

    private static final long serialVersionUID = 1L;

    protected Color leftColor;
    protected Color rightColor;

    public SeparatorPanel(Color leftColor, Color rightColor) {
        this.leftColor = leftColor;
        this.rightColor = rightColor;
        setOpaque(false);
    }

    @Override
    protected void paintComponent(Graphics g) {
        g.setColor(leftColor);
        g.drawLine(0, 0, 0, getHeight());
        g.setColor(rightColor);
        g.drawLine(1, 0, 1, getHeight());
    }

} 
```

最后，向您展示如何使用`JStatusBar`.

```
import java.awt.BorderLayout;
import java.awt.Container;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.SwingUtilities;

public class StatusBarSimulator implements Runnable {

    protected TimerThread timerThread;

    @Override
    public void run() {
        JFrame frame = new JFrame();
        frame.setBounds(100, 200, 400, 200);
        frame.setTitle("Status Bar Simulator");

        Container contentPane = frame.getContentPane();
        contentPane.setLayout(new BorderLayout());

        JStatusBar statusBar = new JStatusBar();
        JLabel leftLabel = new JLabel("Your application is running.");
        statusBar.setLeftComponent(leftLabel);

        final JLabel dateLabel = new JLabel();
        dateLabel.setHorizontalAlignment(JLabel.CENTER);
        statusBar.addRightComponent(dateLabel);

        final JLabel timeLabel = new JLabel();
        timeLabel.setHorizontalAlignment(JLabel.CENTER);
        statusBar.addRightComponent(timeLabel);

        contentPane.add(statusBar, BorderLayout.SOUTH);

        frame.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);
        frame.addWindowListener(new WindowAdapter() {
            @Override
            public void windowClosing(WindowEvent event) {
                exitProcedure();
            }
        });

        timerThread = new TimerThread(dateLabel, timeLabel);
        timerThread.start();

        frame.setVisible(true);
    }

    public void exitProcedure() {
        timerThread.setRunning(false);
        System.exit(0);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new StatusBarSimulator());
    }

    public class TimerThread extends Thread {

        protected boolean isRunning;

        protected JLabel dateLabel;
        protected JLabel timeLabel;

        protected SimpleDateFormat dateFormat = 
                new SimpleDateFormat("EEE, d MMM yyyy");
        protected SimpleDateFormat timeFormat =
                new SimpleDateFormat("h:mm a");

        public TimerThread(JLabel dateLabel, JLabel timeLabel) {
            this.dateLabel = dateLabel;
            this.timeLabel = timeLabel;
            this.isRunning = true;
        }

        @Override
        public void run() {
            while (isRunning) {
                SwingUtilities.invokeLater(new Runnable() {
                    @Override
                    public void run() {
                        Calendar currentCalendar = Calendar.getInstance();
                        Date currentTime = currentCalendar.getTime();
                        dateLabel.setText(dateFormat.format(currentTime));
                        timeLabel.setText(timeFormat.format(currentTime));
                    }
                });

                try {
                    Thread.sleep(5000L);
                } catch (InterruptedException e) {
                }
            }
        }

        public void setRunning(boolean isRunning) {
            this.isRunning = isRunning;
        }

    }

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-13T19:30:22.837

在 JFrame 的组件层次结构中的适当位置添加标签组件（可能是 JToolBar？）。

然后创建一个每秒触发一次的[计时器，并为其添加一个 ActionListener 以使用当前时间更新标签的文本。](http://docs.oracle.com/javase/6/docs/api/javax/swing/Timer.html)

[请参阅使用 SwingWorker 和 Timer 在标签上显示时间](https://stackoverflow.com/questions/9855037/using-swingworker-and-timer-to-display-time-on-a-label)的已接受答案？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-13T19:28:09.193

创建一个`SimpleDateFormat`可以帮助您格式化当前日期的对象。添加一个`JLabel`到您的`JFrame`. 在一个单独的线程中，创建一个持续读取当前日期的循环，将其格式化为 a`String`并将其传递给`JLabel`EDT 中的 the。在再次更新标签之前，让单独的线程休眠一秒钟或更短时间。

# c# - C# 与 Mono 还是 C++？（运行 Ubuntu）

> ID：13366781
> 
> 赞同：0
> 
> 时间：2012-11-13T18:47:17.800
> 
> 标签：c#, c++, linux, ubuntu

我需要编写一个程序来连接到一些数据库并处理其中的数据。我必须运行 Ubuntu。我有更多的 C# 经验，但在 Windows 上..

我应该使用 C# 和 Mono 编写程序，还是 - 它会给我带来很多麻烦，而我应该只使用 C++？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:53:52.293

我会使用 Java 或 Python。我不是在 Linux 上运行 .NET 代码的概念的忠实拥护者，而在 c++ 中序列化只是一个彻头彻尾的痛苦。如果这些真的是您仅有的两个选择，我可能会使用 C#，但我会建议做一些完全不同的事情。如果你已经编写了 C# 和 c++，并且学习了足够多的 Java 或 Python 来完成这项工作，那将不会有很多麻烦。

# ios - 设备旋转时如何使 UIView 阴影拉伸？

> ID：13366784
> 
> 赞同：2
> 
> 时间：2012-11-13T18:47:22.603
> 
> 标签：ios, uiview, shadow, autoresizingmask

在自定义 tableview 单元格中，我正在绘制一个带有阴影的简单矩形，如下所示：

```
photoBorder = [[[UIView alloc] initWithFrame:CGRectMake(4, 4, self.frame.size.width-8, 190)] autorelease];
photoBorder.autoresizingMask = UIViewAutoresizingFlexibleWidth;
photoBorder.backgroundColor = [UIColor whiteColor];
photoBorder.layer.masksToBounds = NO;
photoBorder.layer.shadowOffset = CGSizeMake(0, 1);
photoBorder.layer.shadowRadius = 4;
photoBorder.layer.shadowOpacity = 1.0;
photoBorder.layer.shadowColor = [UIColor darkGrayColor].CGColor;
photoBorder.layer.shouldRasterize = YES;
photoBorder.layer.shadowPath = [UIBezierPath bezierPathWithRect:photoBorder.bounds].CGPath; // this line seems to be causing the problem 
```

当视图首次加载时，这可以正常工作。但是，当您旋转设备时，阴影保持不变。我真的很想把它延伸到“photoBorder”的新宽度。

我可以通过删除 shadowPath 来使其工作，但 tableview 会受到明显的性能影响。

任何人都有任何关于在 UIView 上制作阴影的技巧，可以拉伸，而不会损失性能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T19:09:34.010

在搜索了几个小时并没有找到任何东西后，我发布了这个。然后几分钟后找到了答案。

对我来说，简单的解决方案似乎只是将 shadowPath 移动到 layoutSubviews 中。

```
- (void)layoutSubviews{
    photoBorder.layer.shadowPath = [UIBezierPath bezierPathWithRect:photoBorder.bounds].CGPath;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-03-21T18:57:45.667

您需要创建 UIView 的子类，以便您可以在`layoutSubviews()`方法中获得新的边界。

注意：如果您尝试在拥有子视图的 ViewController 中添加此代码，则边界将在您旋转时保持静态，从而导致错误的 shadowPath。

```
import UIKit

class BackgroundView: UIView {

    required init?(coder aDecoder: NSCoder) {
        super.init(coder: aDecoder)
    }

    override func layoutSubviews() {
        super.layoutSubviews()
        updateShadow(on: self)
    }

    func updateShadow(on background: UIView) {
        let layer = background.layer
        layer.shadowPath = UIBezierPath(rect: background.bounds).cgPath
        layer.masksToBounds = false
        layer.shadowColor = UIColor.black.cgColor
        layer.shadowOffset = CGSize(width: 0, height: 2)
        layer.shadowRadius = 4
        layer.shadowOpacity = 0.22
    }

} 
```

1.  确保您调用`super.layoutSubviews()`以处理任何自动布局约束。

2.  您可以在 Storyboard 文件中设置自定义类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T19:05:21.840

为了提高性能，您可以使用 Core Graphics 绘制内部阴影。

[UIView 层的内阴影效果](https://stackoverflow.com/questions/4431292/inner-shadow-effect-on-uiview-layer)

# javascript - 保存/邮寄在 Javascript 调用的 UIWebView 中加载的 PDF 文档

> ID：13366790
> 
> 赞同：0
> 
> 时间：2012-11-13T18:47:47.093
> 
> 标签：javascript, objective-c, pdf, webview

这种情况对我来说有点困惑，我会尽力解释自己。

当单击某个按钮时，有一个网页会生成自定义 PDF 文档（按钮调用创建 PDF 文档的 javascript 函数）。在所述网页的桌面版本中，单击按钮时会下载 PDF（未显示）。

现在我将所述网页加载到 UIWebView 中，单击按钮时出现问题。PDF 被加载，然后显示在 web 视图中。

我想邮寄该 PDF 或将其作为图像下载（简单地从 webview 获取图像会导致无法放大的像素化“PDF”，因此变得不可读）。

由于 PDF 是在服务器端的 Javascript 函数中生成的，因此我似乎无法获取 PDF url 以使用 URL 信息从 Objective-C 手动生成 PDF。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:51:28.200

您是否正在获取服务器端的 pdf 链接？

如果是，那么写下面的代码

```
NSString *pathStr=[dd objectForKey:@"pdfKey"];
NSURL *url = [NSURL URLWithString:pathStr];
NSData *data = [NSData dataWithContentsOfURL:url];
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *pdfPath = [documentsDirectory stringByAppendingPathComponent:@"myLocalFileName.pdf"];
[data writeToFile:pdfPath atomically:YES]; 
```

让我知道它是否有效...

快乐编码！！！！

# google-maps - 如何使用 Google Maps API v3 设置多次缩放？

> ID：13366791
> 
> 赞同：0
> 
> 时间：2012-11-13T18:47:52.240
> 
> 标签：google-maps, google-maps-api-3, zooming

我有一个像这样的谷歌地图：

```
var map_options = {        
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    streetViewControl: false
};
var map = new google.maps.Map(mapDiv, map_options); 
```

我执行了一个 ajax 调用，在地图上放置了一些标记，在该调用中，`beforeSend`我根据用户选择的位置更改了地图的缩放级别。这一切都很好，花花公子..

```
$.ajax({
    url: myServiceUrl,
    dataType: 'jsonp',
    beforeSend: function () {                    
        setMapZoom();
    },            
    success: function (data) {
        //do work
    },
    error: function (jqXHR, textStatus, errorThrown) {
        alert(errorThrown);
    }            
});

function setMapZoom() {    
    var z_level = getMapZoomLevel(googleplace.geometry.viewport);
    map.setCenter(googleplace.geometry.location);
    map.setZoom(z_level);
} 
```

起初这根本不起作用，因为地图 api 的调用是异步的。所以这就是我将缩放方法放在`beforeSend`.

但是，现在我的问题是它只执行一次缩放。我将地图加载到加拿大安大略省多伦多 - 它以多伦多为中心并缩放到 5 级 - 完美。

然后我换到美国佛罗里达州的迈阿密——它以迈阿密为中心就好了，但它确定缩放为 9 级（而不是 5）调用 map.setZoom(9)——但缩放保持在 5。

我很感激任何反馈。:)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:26:18.143

**解决了：**

事实证明.. 这里的一位程序员正在调用一些代码来清除用户定义的缩放事件监听器。他不知道这也清楚谷歌定义的听众.. :)

也许这将有助于将来的某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T21:01:16.177

您有所需的视口，为什么不使用它？

```
map.fitBounds(googleplace.geometry.viewport); 
```

# java - 你如何制作菜单项（JMenuItem）快捷方式？

> ID：13366793
> 
> 赞同：21
> 
> 时间：2012-11-13T18:48:01.037
> 
> 标签：java, swing, shortcut, jmenuitem

所以我注意到在 awt 中有一个`MenuItem`用于添加`CTRL`+ （某些键）快捷方式的构造函数，但没有这样的构造函数用于`JMenuItem`. 这样做的正确方法是什么？

我需要一个等效的awt：

```
MenuItem mi = new MenuItem("Copy", new MenuShortcut(KeyEvent.VK_C)); 
```

但对于 Swing。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-13T18:50:27.297

`CTRL`+的示例`N`。

```
menuItem.setAccelerator(KeyStroke.getKeyStroke('N', Toolkit.getDefaultToolkit().getMenuShortcutKeyMaskEx())); 
```

`Toolkit.getDefaultToolkit().getMenuShortcutKeyMaskEx()`在 Windows 和 linux 上返回控制键 (ctrl)，在 Mac OS 上返回命令键 (⌘)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-13T18:59:08.357

只需创建一个[`KeyStroke`](http://docs.oracle.com/javase/7/docs/api/javax/swing/KeyStroke.html)并调用类似[`setAccelerator(...)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JMenuItem.html#setAccelerator%28javax.swing.KeyStroke%29)的`JMenuItem`方法：

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.InputEvent;
import java.awt.event.KeyEvent;
import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.KeyStroke;
import javax.swing.SwingUtilities;
import java.awt.Toolkit; 

public class Test {

    public Test() {
        initComponents();
    }

    public static void main(String[] args) {
        //create Swing components on EDT
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Test();
            }
        });
    }

    private void initComponents() {
        //create JFrame
        JFrame frame = new JFrame("Accelerator Sample");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JMenuBar menuBar = new JMenuBar();//create menu bar to hold menus
        JMenu menu = new JMenu("File");//create a menu
        menuBar.add(menu);//add menu to bar

        JMenuItem menuItem = new JMenuItem("Say Hello");//create menu item

        //set shortcut CTRL+H (command+h on mac os)
        KeyStroke ctrlH = KeyStroke.getKeyStroke(KeyEvent.VK_H, Toolkit.getDefaultToolkit ().getMenuShortcutKeyMask());

        //set the accelerator
        menuItem.setAccelerator(ctrlH);
        //add listener which will be called when shortcut is pressed
        menuItem.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent actionEvent) {
                System.out.println("Hello, World");
            }
        });

        menu.add(menuItem);//add item to menu 'File'

        frame.setJMenuBar(menuBar);//set menubar of JFrame
        frame.pack();
        frame.setVisible(true);//set frame visible
    }
} 
```

# sql-server - SQL 组，获取与上次购买关联的第一次购买、最后一次购买和最后一名员工

> ID：13366796
> 
> 赞同：1
> 
> 时间：2012-11-13T18:48:06.867
> 
> 标签：sql-server, tsql

在我的数据库中，我有进行购买的客户，然后这些购买与协助购买的员工相关联。我在下面写了一个查询，它将为我提供一个客户列表，其中包括他们总共购买了多少次、他们的第一次购买和最后一次购买。我还想要与上次购买关联的员工姓名？

```
Customer
-cstId
-cstName

Purchase
-cstId
-soldDate
-empId

Employee
-FirstName
-LastName
-empId

SELECT customer.cstName, MAX(purchase.soldDate) AS [Last Purchase], MIN(purchase.soldDate) AS [First Purhcase], COUNT(invTruck.invId)
               AS [Total Purchases]
FROM  customer INNER JOIN
               purchase ON customer.cstId = purchase.cstId 
               INNER JOIN
               employee ON purchase.empId = employee.empId
GROUP BY customer.cstName 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:14:16.727

可以使用存储过程吗？对于这种情况，我通常会回退到内存表。

```
Declare @tblCust TABLE (
    cstid int null,
    cstName varchar(50) null, 
    lastpurchase datetime null,
    firstpurchase datetime null, 
    empid varchar(50) null
    )
Insert into @tblCust(cstid, cstname, lastpurchase, firstpurchase)        
SELECT purchase.cstid, customer.cstName, MAX(purchase.soldDate) AS [Last Purchase], 
    MIN(purchase.soldDate) AS [First Purhcase]
FROM  customer INNER JOIN
    purchase ON customer.cstId = purchase.cstId 
GROUP BY purchase.cstId, customer.cstName

Update t set EmpId = p.EmpId
From @tblCust t
        INNER JOIN Purchase p ON t.cstId = p.cstid and t.LastPurchase = p.soldDate 
```

您现在在一个临时表上拥有了员工 ID，您可以从该表中返回您的数据，或者加入您可能需要的任何其他表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T19:14:13.703

你可以使用应用：http: [//msdn.microsoft.com/library/ms175156 (v=sql.105).aspx](http://msdn.microsoft.com/library/ms175156(v=sql.105).aspx)

使用 cross apply 获取购买列表和相应员工，TOP 1 并按 soldDate desc 排序

例子：

```
CROSS APPLY (
select top 1 p.empId
from purchase p
where p.cstId = customer.cstId
order by soldDate desc
) o (emp) 
```

并将 o.emp 添加到您的选择中

我不是 100% 确定语法是 100% 完美的，但想法就在那里：P

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T19:23:20.020

我假设您在购买表上有一些主键。我将其命名为“purchaseID”：

```
SELECT customer.cstName, 
    MAX(purchase.soldDate) AS [Last Purchase], 
    MIN(purchase.soldDate) AS [First Purhcase], 
    COUNT(invTruck.invId)  AS [Total Purchases], 
    LastPurchase.empID     AS [Last Purchase Employee]
FROM  customer INNER JOIN
           purchase ON customer.cstId = purchase.cstId 
           INNER JOIN
           employee ON purchase.empId = employee.empId
           CROSS APPLY (
               SELECT TOP 1 * 
               FROM purchase px 
               WHERE px.purchaseID = purchase.purchaseID 
               ORDER BY px.soldDate DESC) AS LastPurchase
GROUP BY customer.cstName,
    LastPurchase.empID 
```

CROSS APPLY 所做的是在每条记录上运行附带的 select 语句，同时利用内部的 WHERE 条件。相对于 OUTER APPLY，它的行为类似于 INNER JOIN，而 OUTER APPLY 的行为类似于 LEFT JOIN。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T21:13:45.530

你可以用一个简单的 SCALAR SUBQUERY 来扩展它

```
SELECT
    customer.cstName,
    MAX(purchase.soldDate) AS [Last Purchase],
    MIN(purchase.soldDate) AS [First Purhcase],
    COUNT(invTruck.invId) AS [Total Purchases],
    (SELECT TOP(1) e.lastname
     FROM purchase p
     INNER JOIN employee e ON p.empId = e.empId
     WHERE customer.cstId = p.cstId
     ORDER BY p.soldDate DESC) lastPurchaseEmployee
FROM  customer
INNER JOIN purchase
    ON customer.cstId = purchase.cstId 
INNER JOIN employee
    ON purchase.empId = employee.empId
GROUP BY
    customer.cstId, customer.cstName 
```

# php - 如何使用正则表达式评估约束？（PHP，正则表达式）

> ID：13366798
> 
> 赞同：2
> 
> 时间：2012-11-13T18:48:09.497
> 
> 标签：php, regex

所以，假设我想接受如下字符串
`SomeColumn IN||<||>||= [123, 'hello', "wassup"]||123||'hello'||"yay!"`
例如：`MyValue IN ['value', 123]`或`MyInt > 123`-> 我想你明白了。现在，困扰我的是如何在正则表达式中表达这个？我正在使用 PHP，这就是我现在正在做的事情：

```
 `$temp = explode(';', $constraints);
        $matches = array();
        foreach ($temp as $condition) {
            preg_match('/(.+)[\t| ]+(IN|<|=|>|!)[\t| ]+([0-9]+|[.+]|.+)/', $condition, $matches[]);
        }
        foreach ($matches as $match) {
            if ($match[2] == 'IN') {
                preg_match('/(?:([0-9]+|".+"|\'.+\'))/', substr($match[3], 1, -1), $tempm);
                print_r($tempm);
            }
        }`
```

`真的很感谢那里的任何帮助，我的正则表达式很糟糕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T22:11:15.897

我假设您的输入与此类似：

```
$string = 'SomeColumn IN [123, \'hello\', "wassup"];SomeColumn < 123;SomeColumn = \'hello\';SomeColumn > 123;SomeColumn = "yay!";SomeColumn = [123, \'hello\', "wassup"]'; 
```

如果您使用`preg_match_all`，则无需`explode`自己构建匹配项。请注意，生成的二维数组将切换其维度，但这通常是可取的。这是代码：

```
preg_match_all('/(\w+)[\t ]+(IN|<|>|=|!)[\t ]+((\'[^\']*\'|"[^"]*"|\d+)|\[[\t ]*(?4)(?:[\t ]*,[\t ]*(?4))*[\t ]*\])/', $string, $matches);

$statements = $matches[0];
$columns = $matches[1];
$operators = $matches[2];
$values = $matches[3]; 
```

也会有一个`$matches[4]`，但它并没有真正的意义，只在正则表达式中使用。首先，您在尝试中做错了几件事：

*   `(.+)`将尽可能多地消耗任何字符。因此，如果您在字符串值中有一些看起来像的东西，`IN 13`那么您的第一次重复可能会消耗所有内容，直到那里并将其作为列返回。它还允许空格和`=`内部列名。有两种方法可以解决这个问题。通过附加使重复“不贪婪”，`?`或者更好地限制允许的字符，因此您不能超出所需的分隔符。在我的正则表达式中，我只允许字母、数字和下划线 ( `\w`) 用于列标识符。
*   `[\t| ]`这混淆了两个概念：交替和字符类。这样做是“匹配选项卡、管道或空格”。在字符类中，您只需编写所有字符而不用分隔它们。或者，您可以编写`(\t| )`在这种情况下等效的。
*   `[.+]`我不知道你想用这个来完成什么，但它匹配文字`.`或文字`+`。再次限制允许的字符可能很有用，并检查引号的正确匹配（以避免`'some string"`）

现在来解释我自己的正则表达式（您也可以将其复制到您的代码中，它会正常工作；另外，您可以在代码中将解释作为注释）：

```
preg_match_all('/
    (\w+)           # match an identifier and capture in $1
    [\t ]+          # one or more tabs or spaces
    (IN|<|>|=|!)    # the operator (capture in $2)
    [\t ]+          # one or more tabs or spaces
    (               # start of capturing group $3 (the value)
        (           # start of subpattern for single-valued literals (capturing group $4)
            \'      # literal quote
            [^\']*  # arbitrarily many non-quote characters, to avoid going past the end of the string
            \'      # literal quote
        |           # OR
            "[^"]*" # equivalent for double-quotes
        |           # OR
            \d+     # a number
        )           # end of subpattern for single-valued literals
    |               # OR (arrays follow)
        \[          # literal [
        [\t ]*      # zero or more tabs or spaces
        (?4)        # reuse subpattern no. 4 (any single-valued literal)
        (?:         # start non-capturing subpattern for further array elements
            [\t ]*  # zero or more tabs or spaces
            ,       # a literal comma
            [\t ]*  # zero or more tabs or spaces
            (?4)    # reuse subpattern no. 4 (any single-valued literal)
        )*          # end of additional array element; repeat zero or more times
        [\t ]*      # zero or more tabs or spaces
        \]          # literal ]
    )               # end of capturing group $3
    /',
    $string,
    $matches); 
```

这利用了 PCRE 的递归功能，您可以在其中重用子模式（或整个正则表达式）`(?n)`（其中`n`只是您也将用于反向引用的数字）。

我可以想到可以用这个正则表达式改进的三件事：

*   它不允许浮点数
*   它不允许转义引号（如果您的值是`'don\'t do this'`，我只会捕获`'don\'`）。这可以使用[否定的lookbehind](http://www.php.net/manual/en/regexp.reference.assertions.php)来解决。
*   它不允许空数组作为值（这可以通过将所有参数包装在子模式中并使其成为可选参数来轻松解决`?`）

我没有包括这些，因为我不确定它们是否适用于您的问题，而且我认为正则表达式已经足够复杂，可以在这里展示。

通常正则表达式无论如何都不足以进行正确的语言解析。编写解析器通常会更好。

既然你说你的正则表达式很可怕......虽然正则表达式由于它们不常见的语法看起来像是很多黑魔法，但它们并不难理解，如果你花时间了解一下它们的基本原理概念。我可以推荐[这个教程](http://www.regular-expressions.info/tutorial.html)。真的带你一路走好！`

# codeigniter - 结合 Require.js、Backbone.js 和服务器端 MVC 框架

> ID：13366799
> 
> 赞同：4
> 
> 时间：2012-11-13T18:48:12.560
> 
> 标签：codeigniter, backbone.js, server-side

我们实际上正在计划一个非常复杂的 Web 应用程序。至少按照我自己的标准。过去，我们一直在使用服务器端 MVC 框架（Codeigniter）和客户端功能（jQuery 和插件）的组合。我们只是在视图中编写了内联 javascript 代码。这按预期工作，但当然有几个缺点：

*   没有缓存
*   重复的js代码
*   可维护性问题
*   ...

我现在的主要目标是以高效且易于维护的方式组织客户端代码。但我想继续使用服务器端 MVC，因为现有的技术和一些现有的接口。此外，我想使用 jQuery 和“意大利面条代码”来减少复杂的 DOM 操作。

现在我想到了 Backbone.js 和 Require.js 的组合，但我真的找不到关于如何将它们与服务器端 MVC 组合的教程或任何可靠的描述。甚至推荐吗？

在我的旧应用程序中，我得到了这样的文件结构：

*   应用程序（CodeIgniter）
*   资产
    *   js
    *   css
    *   图片

有什么想法或最佳实践吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T23:49:43.687

为了补充 mexique1 的建议，可能值得看一下[主干样板项目](https://github.com/tbranyen/backbone-boilerplate#readme)。它应该为您当前正在考虑的许多问题提供最佳实践解决方案，例如需求和主干的组合、项目客户端的组织以及减少复杂的 DOM 操作（请参阅模板） .

正如您预期的那样，挑战很可能在于将样板方法与您习惯的方法相结合。但是，几乎可以肯定的是，它值得付出努力，因为它应该为您提供这个和未来项目的坚实基础。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T19:01:37.223

我认为 Backbone 是一个不错的选择，这里 Require 不是强制性的。

Require 只会帮助您组织源代码并可能提高性能。我认为您可以立即从 Backbone 开始，这将是您最常使用的东西，稍后再添加 Require。

关于 Backbone，是的，只要它返回 JSON，就可以很容易地将其模型与现有的 MVC 应用程序一起使用。要加载现有数据，您需要使用与[url结合的](http://backbonejs.org/#Model-url "网址")[fetch](http://backbonejs.org/#Model-fetch "拿来")方法以适应现有代码或您自己的方法。

一般来说，考虑哪些模型显示在哪些视图中。Backbone 可以帮助您这样思考：*我在由 HTML 制作的视图中显示表示为 JSON 数据的模型。*

此外，对于视图层，重用现有的 HTML 非常容易，因为视图不依赖于任何东西，没有 JavaScript 模板或什么都没有。

简单的例子：

```
<div id="user">
    <span class="name">John</span>
</div>

var UserView = Backbone.View.extend({
    render: function() {
        this.$el('.name').html(this.model.get('name'));
    }
});
var userView = new UserView({el: $('#user')[0], model: ...}); 
```

在这个例子中， div用它的名字`#user`反映了一个模型的状态。`User`

还要检查 Backbone 中的[Todo App](http://documentcloud.github.com/backbone/docs/todos.html "待办事项应用")示例。

# java - JProgressBar 在摆动数据加载时

> ID：13366801
> 
> 赞同：3
> 
> 时间：2012-11-13T18:48:14.743
> 
> 标签：java, swing, swingworker, jprogressbar

我有来自 UI 的服务器调用。它的响应时间有点高。所以我想在从服务器加载数据期间显示一个进度条。我已经使用这种[方法](https://stackoverflow.com/questions/10442406/basic-indeterminate-jprogress-bar-usage)尝试了以下代码来显示进度条。有些地方我做错了，当我`calculateResult()`在按钮单击时调用该方法时，我没有看到进度条。我不需要在进度条上显示任何百分比。它只需要显示数据正在加载。

// 下面的代码我试过了。

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.lang.reflect.InvocationTargetException;

import javax.swing.JButton;
import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JProgressBar;
import javax.swing.SwingUtilities;
import javax.swing.SwingWorker;

 public class MyProgressBarTest extends JFrame {
private static final long serialVersionUID = 1L;

private static JProgressBar progressBar;

public static void main(String[] args) {
    MyProgressBarTest obj = new MyProgressBarTest();
    obj.createGUI();
}

public void createGUI() {
    JPanel panel = new JPanel();
    JButton button = new JButton("Progress");

    progressBar = new JProgressBar();

    button.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent arg0) {

            MyCustomProgressBarDialog progressBarObj = new    MyCustomProgressBarDialog(progressBar);
            progressBarObj.createProgressUI();

            MyActionPerformer actionObj = new MyActionPerformer(progressBar);
            actionObj.execute();

            progressBarObj.setVisible(false);
        }
    });

//      panel.add(progressBar);
    panel.add(button);
    add(panel);

    setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
    setLocationRelativeTo(null);
//      pack();
    setSize(200, 300);
    setVisible(true);
}
}

class MyActionPerformer extends SwingWorker<String, Object> {

JProgressBar fProgressBar;

public MyActionPerformer(JProgressBar progressBar) {
    this.fProgressBar = progressBar;
    this.fProgressBar.setVisible(true);
    this.fProgressBar.setIndeterminate(true);
}

protected String doInBackground() throws Exception {

    calculateResult();
    return "Finished";
}

protected void done() {
    fProgressBar.setVisible(false);
}

public void calculateResult() {
    for (int i = 0; i < 500000; i++) {
        System.out.println("Progress Bar: " + i);
    }
}
}

class MyCustomProgressBarDialog extends JDialog {
private static JProgressBar progressBar;

public MyCustomProgressBarDialog(JProgressBar progressBar) {
    this.progressBar = progressBar;
}

public void createProgressUI() {
    add(progressBar);
    setLocationRelativeTo(null);
    setSize(50, 20);
    setVisible(true);
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T19:43:10.497

您的进度条立即消失的原因是您的`ActionListener`

```
button.addActionListener(new ActionListener() {
  @Override
  public void actionPerformed(ActionEvent arg0) {
   MyCustomProgressBarDialog progressBarObj = new    MyCustomProgressBarDialog(progressBar);
   progressBarObj.createProgressUI();

   MyActionPerformer actionObj = new MyActionPerformer(progressBar);
   actionObj.execute();

   progressBarObj.setVisible(false);
  }
}); 
```

该`actionObj.execute();`方法不是阻塞的（好事，否则它将无用），这意味着在您开始`SwingWorker`使用该调用后，您将立即执行该`progressBarObj.setVisible(false);`语句。

这会导致进度条对话框消失。

我可以为此想到2个解决方案

*   也将对话框传递给并在 的方法中`SwingWorker`调用对话框`setVisible( false )``done``SwingWorker`
*   A`SwingWorker`触发`PropertyChangeEvent`s，可让您确定进展的程度。您可以使用这样的侦听器在计算完成时隐藏对话框

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T18:53:12.267

您看不到进度条，因为您没有将其添加到面板中

一个简单的：

```
panel.add(PROGRESS_BAR);
panel.add(button); 
```

会成功的。

我希望它有所帮助。干杯

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T18:53:21.817

`JProgressBar`是一个`Component`。它必须添加到 a`Container`中才能可见。你还没有在任何地方添加你的。

# javascript - 两个 div 点击事件仅适用于一个 div

> ID：13366804
> 
> 赞同：0
> 
> 时间：2012-11-13T18:48:37.827
> 
> 标签：javascript, jquery

如果我单击画廊中的缩略图，我正在使用 jquery 和 ajax 创建一个抽屉（#DrawerContainer）并将内容加载到其中。我的功能几乎完成了，但如果我再次单击打开按钮（现在是#current），我希望能够关闭那个抽屉。

这是我的代码的 jsfiddle：http: [//jsfiddle.net/RF6df/54/](http://jsfiddle.net/RF6df/54/)
如果单击正方形/缩略图，则会出现抽屉元素，它是蓝色矩形。当前缩略图变为绿色。

我在抽屉中添加了一个按钮（在 jsfiddle 中不可见）来关闭它。我为此目的使用这部分代码，它就像一个魅力。

```
 // Close the drawer
        $(".CloseDrawer").click(function() {
            $('#DrawerContainer').slideUp()
                setTimeout(function(){ // then remove it...
                    $('#DrawerContainer').remove();
                }, 300); // after 500ms.
            return false;
        }); 
```

现在我需要我的`#current`div 能够以与上面代码`#DrawerContainer`中相同的方式关闭`.CloseDrawer`。
不幸的是，向我的函数添加这样的第二个触发器`$("#current,.CloseDrawer").click(function()`不起作用......当点击我的“当前”缩略图时，它只是重新打开抽屉而不是关闭它......

如何修改我的代码以使用“当前”缩略图关闭我的#DrawerContainer？

请记住，我正在学习 jquery，所以如果你能发表评论，它可能会有很大的帮助。并且请不要修改我的标记或 css，因为一切都在结束部分旁边工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T18:53:37.030

根据我的理解，您可以使用完全相同的“toggle()”函数（即切换可见性）。

```
$('#DrawerContainer').toggle(); 
```

**编辑：** 更新脚本工作。

```
$(document).ready(function() {

    $.ajaxSetup({cache: false});

    $('#portfolio-list>div:not(#DrawerContainer)').click(function() {
        if ($(this).attr("id") != "current")
        {
    // modify hash for sharing purpose (remove the first part of the href)
    var pathname = $(this).find('a')[0].href.split('/'),
            l = pathname.length;
        pathname = pathname[l-1] || pathname[l-2];
        window.location.hash = "#!" + pathname;

    $('#current').removeAttr('id');
    $(this).attr('id', 'current');

    // find first item in next row
    var LastInRow = -1;
    var top = $(this).offset().top;
    if ($(this).next().length == 0 || $(this).next().offset().top != top) {
        LastInRow = $(this);
    }
    else {
        $(this).nextAll().each(function() {
            if ($(this).offset().top != top) {
                return false; // == break from .each()            
            }
            LastInRow = $(this);
        });
    }
    if (LastInRow === -1) {
        LastInRow = $(this).parent().children().last();
    }

    // Ajout du drawer
    var post_link = $(this).find('.mosaic-backdrop').attr("href");
        $('#DrawerContainer').remove(); // remove existing, if any
        $('<div/>').attr('id', 'DrawerContainer').css({display: 'none'}).data('citem', this).html("loading...").load(post_link + " #container > * ").insertAfter(LastInRow).slideDown(300);
        return false; // stops the browser when content is loaded
    }
    else {
          $('#DrawerContainer').slideUp(300);   
         $(this).removeAttr("id");
    }

   });

    $(document).ajaxSuccess(function() {

        Cufon('h1'); //refresh cufon

        // Toggle/close the drawer
        $("#current,.CloseDrawer").click(function() {
            $('#DrawerContainer').slideToggle()
                setTimeout(function(){ // then remove it...
                    $('#DrawerContainer').remove();
                }, 300); // after 500ms.
            return false;
        });

    });

    //updated Ene's version
    var hash = window.location.hash;
    if ( hash.length > 0 ) {
        hash = hash.replace('#!' , '' , hash );
        $('a[href$="'+hash+'/"]').trigger('click');
    }

}); 
```

另外，在这里更新它：[更新的 JS Fiddle](http://jsfiddle.net/RF6df/32/)

**编辑-2：** [更新链接](http://jsfiddle.net/RF6df/55/)

希望这可以帮助！！

# c# - 如何以编程方式更新嵌入式 SQL 连接的命令属性

> ID：13366806
> 
> 赞同：2
> 
> 时间：2012-11-13T18:48:53.057
> 
> 标签：c#, excel, openxml

使用 c# openxml - 我正在尝试打开一个 excel 文件，绑定到它的 connection.xml 流，并更新嵌入式 SQL 查询。我能够使用连接/命令节点成功替换单个字符序列，但尝试显式设置命令属性（即 node.Attribute["command"].Value = select * from ....）会导致损坏

```
xmlDoc.Load(wkb.WorkbookPart.ConnectionsPart.GetStream());

csNode = xmlDoc.SelectSingleNode("*/*/*[@connection]");

csNode.Attributes["command"].Value = Regex.Replace(csNode.Attributes["command"].Value,        @"\(\[\w*\].\[\w*\].\[\w*\].\[\w*\].*\)", "(" + subQry + ")", RegexOptions.Multiline);

xmlDoc.Save(wkb.WorkbookPart.ConnectionsPart.GetStream()); 

wkb.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:27:30.107

不确定这是否是解决此问题的唯一方法，但我能够通过删除原始的 connections.xml 流并创建/附加一个具有正确值的新流到工作簿来纠正它。

```
 //select connections node from loaded xml Excel
 csNode = xmlDoc.SelectSingleNode("*/*/*[@connection]");

 //store original node values
 oldConnValue = csNode.Attributes["connection"].Value;
 oldCommValue = csNode.Attributes["command"].Value;

 //delete existing ConnectionsPart - to ensure that bleed-over data is not present
 wkb.WorkbookPart.DeletePart(wkb.WorkbookPart.ConnectionsPart);

 //create a replacement ConnectionsPart
 wkb.WorkbookPart.AddNewPart<ConnectionsPart>();

 csNode.Attributes["connection"].Value = oldConnValue; //reassign existing connection value
 csNode.Attributes["command"].Value = baseQry;         //assign new query

 //save changes to stream
 xmlDoc.Save(wkb.WorkbookPart.ConnectionsPart.GetStream()); 
```

# full-text-search - 用于邮件列表存档编目和搜索的文本搜索引擎

> ID：13366812
> 
> 赞同：2
> 
> 时间：2012-11-13T18:49:06.060
> 
> 标签：full-text-search, full-text-indexing

我正在处理一个邮件列表存档，我的任务是设置基本搜索、布尔搜索以及最终某种更智能的基于标签的搜索。

我看到了商业产品和一些开源项目（如 Lucene.NET）

有没有其他人做过类似的工作？

我现在在 Win2k3 服务器上工作，所以立即想到的是使用 ASP Classic 或 ASP.NET。但是，如果有另一个平台可以更好地达到这个目的，那么我也会考虑。我不会因此而扔掉一些东西；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T15:04:08.283

首先，你应该考虑你需要什么。

*   您想在电子邮件存档中搜索什么？只是在电子邮件的 plein 数据中进行全文搜索？例如，您不会在使用 base64 编码的邮件中获得匹配项。您需要“现场”搜索吗？例如：仅在“主题”、“发件人”、“收件人”、“正文”、“附件”中搜索？
*   您希望如何提供对邮件搜索的访问权限？通过网页？在命令行上？在某些 Windows 程序中？

如果你还没有，你应该检查你的数据是什么样子的。也许是“mbox”格式（一个文件与邮件纯文本连接）“maildir”（一个包含许多文件的目录，每个文件包含一封邮件），还是其他？

设置搜索引擎意味着考虑如何准备数据：

*   电子邮件内部可以包含不同的数据。您将不得不处理 base64 编码数据、UTF-8 字符编码和附件。
*   使用组邮件甚至可以拆分为多个电子邮件消息。
*   如果要搜索不同的“字段”（“主题”、“日期”、“正文”），则需要提取它们。
*   数据需要通过语言手段准备。您将需要找出邮件的语言（如果有多个）并处理数据，例如。搜索和，也许，`mouse`的概念的匹配；或和，取决于您的邮件列表的主题。`mice``rats``cursor``pointing device`

还要想想：

*   未来是否会更新数据？
*   是否有*删除*（包括稍后重新标记的消息）？

然后比较您喜欢的产品（商业或开源）它们已经提供了多少以及您必须自己编写什么。请注意，**提供搜索体验不仅仅是下载搜索引擎并投入大量数据**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T13:50:48.940

由于您正在设置邮件搜索，您将需要两件事：搜索引擎和数据库。有许多搜索引擎可以提供您需要的内容。

*   狮身人面像
*   Solr（Lucene 和 Solr 现已合并）
*   PostgreSQL（内置搜索）

他们提供高级搜索工具，如关键字、字段限制搜索、布尔查询、短语搜索等。这是另一篇关于各种文本搜索引擎的 SO 帖子：全文搜索引擎[的比较 - Lucene、Sphinx、Postgresql、MySQL？](https://stackoverflow.com/questions/737275/comparison-of-full-text-search-engine-lucene-sphinx-postgresql-mysql)

Sphinx 和 Solr 的搜索速度非常快。Sphinx 进行完整的数据库搜索，也进行部分索引。Solr 使用基于索引的搜索，并且具有几乎线性的性能可扩展。

第二个最重要的选择是存储邮件的数据库。邮件将采用某种格式（模式），例如表格中的字段。不使用任何格式是很疯狂的。这不是文件搜索，对吧？一些搜索引擎需要特定的数据库才能工作。Sphinx 仅使用 SQL 数据库，Solr 可以与 noSQL 数据库集成。

如果您不担心扩展问题（您有成千上万的用户，拥有 GB 的数据，需要实时性能），那么您可以使用 SQL 数据库。否则，您将不得不在 Solr 中使用 noSQL 数据库。

SQL 数据库（如 PostgreSQL）使用起来最简单，可以做您需要的事情，并且需要最少的设置/工作。连接器将允许您将查询（邮件搜索）从浏览器发送到您的数据库。

你还说你使用 Win2k3，你必须切换到 linux 发行版才能利用这些搜索引擎。Win2k3 很慢，不能提供与 linux 发行版相媲美的性能。

# c++ - hash_map/unordered_map 的解耦版本

> ID：13366813
> 
> 赞同：7
> 
> 时间：2012-11-13T18:49:09.867
> 
> 标签：c++, embedded, hashmap, unordered-map, c++-standard-library

我正在编写一个嵌入式应用程序，不幸的是，我使用的环境目前不支持 C++11。

我需要实现一个哈希/无序映射（`std::map`出于性能原因，常规不会这样做），但似乎无法找到一种干净的方法。

Boost 不想在没有引入整个库的情况下工作。`hash_map`即使是来自 SGI的原始 STL 也需要多个标头，并且复制标准库功能，从而导致模棱两可的函数调用。这真是一团糟。

为了便于实施、版本控制、质量控制、V&V 等。我真的需要利用现有标准库并且仅存在于几个头文件中的东西，我可以将它们放在与所有其他源/头文件相同的文件夹中。这样的事情存在吗，还是我没有希望？找了好久，还是空手而归。

非常感谢您的帮助。如有必要，我当然可以进一步澄清。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T01:53:44.267

你看过 GNU 的实现吗？在我的 Ubuntu 机器上，unordered_map.h 不包含任何内容。该文件位于

```
 /usr/include/c++/4.6/bits/unordered_map.h 
```

这大约是 400 行，尽管 /usr/include/c++/4.6/ 中的文件“unordered_map”有更多的标题，但我猜你可以调整那些。

我认为您可以从 GNU.org (?) 找到实现的源代码并自己编译？

# jquery - 如何通过基本身份验证安全地使用 jquery 远程 Web 服务

> ID：13366818
> 
> 赞同：0
> 
> 时间：2012-11-13T18:49:28.363
> 
> 标签：jquery, asp.net-mvc, asp.net-web-api

我了解如何将基本身份验证与 jquery 一起使用，这不是我的问题。

这是我的结构：

网站（MVC.net 4，带有自定义成员资格提供程序的表单身份验证） Web 服务（Web API）

MVC.net 网站调用 Web 服务进行身份验证并获取表单身份验证内容以进行登录。

然后每个页面将使用 SPA 原理来获取数据。服务器只会做基本的 HTML 内容。

所以我需要以某种方式将凭据放入 jquery 以进行服务调用。

问题是密码永远不会被存储。只有一个哈希。可以将密码放入会话中并将其传递到页面中以供使用（这将发生的一切都是 SSLed 并且服务是 ssled），但这假定用户正在输入密码。

当然，用户可以选择“记住我”，这样在这种情况下用户将永远不会被提示登录，所以我不会有密码。

任何人对如何完成此操作有任何（安全）建议？我可以在哪里安全地存储 jquery 将使用的密码？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T22:05:38.423

我发现有 3 个解决方案可以解决这个问题：

1.  在两个站点之间共享表单身份验证信息。如果您将机器密钥信息设置为与相同的 cookie 名称等共享，这将起作用。注意：这仅适用于域/子域。它不适用于 3 级域。

2.  使用 OAuth 并获取令牌并将其与页面共享，以便 jquery 可以访问它并可以正确传递它。这要求令牌在 HTML 中可见。鉴于对于任何 oauth 请求，它已在 fiddler 等中通过并可见，这并没有大大降低安全性，但是......

3.  使用特定于网站的 l/p 登录，验证用户，并从服务器获取随机生成的 GUID 或类似的令牌，上面有到期日期。把它放在每一页的源代码中。然后 jquery 可以将其作为 Authentication 标头传递，并且它将在令牌具有不会过期的时间长度内为该用户工作（它可能是滑动的）。这与 OAuth 非常相似，但可以在 oauth 之外为我们的站点设置不同的规则。显然，每个#2 的令牌仍然可见。

目前我们支持 Basic（因为服务是 ssled）和 OAuth。该网站使用表单身份验证，因此我们选择在 API 服务器上也启用表单身份验证，并使用表单身份验证的共享令牌对 jquery 进行身份验证。我们选择此路径的原因是，如果我们使用 OAuth，那么每次请求时，该令牌都会在页面源中可见。虽然这不一定是坏事，除非有人在您离开时来到您的计算机并进行查看然后可以伪造请求，我们认为既然我们有可用的表单身份验证，那将是最好的解决方法在客户端暴露任何东西。

如果有人发现这有任何安全风险，请告诉我！我看不到任何人，而且似乎没有其他人从我可以在网上找到的共享表单身份验证中看到任何问题，但是！这必须是安全的。

# markdown - 如何使用 Markdown 制作字母列表？

> ID：13366820
> 
> 赞同：160
> 
> 时间：2012-11-13T18:49:37.763
> 
> 标签：markdown

[Markdown](http://daringfireball.net/projects/markdown/syntax#list)允许使用数字的有序列表。我怎样才能得到一个使用*字母*的有序列表？IE

```
A. the letter A
B. the letter B
C. etc 
```

代替

```
1\. the number 1
2\. the number 2
3\. etc. 
```

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2013-03-15T00:01:32.283

标准 Markdown 似乎没有这种能力。你可以：

1.  使用 CSS，将其放在您的降价文档中（注意，这将影响文档中的所有有序列表）

```
<style type="text/css">
    ol { list-style-type: upper-alpha; }
</style> 
```

2.  使用降价的扩展版本。Pandoc markdown 有一个[`fancy_lists`扩展](https://pandoc.org/MANUAL.html#extension-fancy_lists)，允许您用字母和罗马数字标记列表。

注意：如果使用大写字母，则文本前需要两个空格。见[https://pandoc.org/MANUAL.html#fn1](https://pandoc.org/MANUAL.html#fn1)

```
A.  the letter A
A.  the letter B
A.  etc 
```

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2015-08-07T07:47:20.103

Markdown 本身无法做到这一点，但由于您可以将 HTML 放入其中，这提供了一种非常简单的方法来做到这一点：

```
<ol type="a">
  <li>Coffee</li>
  <li>Tea</li>
  <li>Milk</li>
</ol> 
```

某些平台上的某些派生可能只解释非常严格的 HTML 子集。例如，[StackOverflow](https://meta.stackexchange.com/questions/1777/what-html-tags-are-allowed-on-stack-exchange-sites)不支持该`type`属性。但是[Wikipedia 的 MediaWiki Markdown](https://en.wikipedia.org/wiki/Help:List)可以，[GitHub Wiki Markdown](https://github.com/github/markup)也可以。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2014-12-23T16:18:35.120

至少对于 Pandoc 的最新版本（我使用的是 1.13.1 版），看起来您可以使用某些`fancy_list`语法而无需启用扩展，例如：

```
I.  One                                                                                                                                                                                        
    A.  two                                                                                                                                                                                    
        1\. three                                                                                                                                                                               
        2\. four                                                                                                                                                                                
            i.  five                                                                                                                                                                           
            ii.  six                                                                                                                                                                           
                - seven                                                                                                                                                                        
                    * eight                                                                                                                                                                    
II.  Nine 
```

要将其编译成 PDF，您可以运行：

```
pandoc input.md -o output.pdf 
```

**注意**：为此，您必须确保在任何字母或罗马数字之后添加一个额外的空格：在项目符号和文本之间使用两个空格，而不是通常的一个空格。（请参阅“扩展名： [”](https://pandoc.org/MANUAL.html#ordered-lists)[下的 pandoc 文档`fancy_lists`](https://pandoc.org/MANUAL.html#ordered-lists)）

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2018-09-27T15:00:31.360

*聚会迟到了，但这可能有助于其他人寻找 R Markdown 解决方案。*

在 R Markdown 中，它是直截了当的。以下最小示例`lists.rmd`显示了不同的类型：

```
---
title: "Lists"
output: pdf_document
---

A list with bullet points:

- Something
- Something else

A numeric list:

1\. Something
1\. Something else

A list using small letters:

a) Something
a) Something else

A list using capital letters:

A) Something
A) Something else 
```

这编织到：

[![在此处输入图像描述](../Images/16f0b875495d59d3a6c7a19011730e22.png)](https://i.stack.imgur.com/EoJzi.png)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-05-22T16:52:46.800

要进行缩进格式化，这是我使用的：

```
<style type="text/css">
   /* Indent Formatting */
   /* Format: a-1-i-A-1-I */
   ol {list-style-type: lower-alpha;}
   ol ol { list-style-type: decimal;}
   ol ol ol { list-style-type: lower-roman;}
   ol ol ol ol { list-style-type: upper-alpha;}
   ol ol ol ol ol { list-style-type: decimal;}
   ol ol ol ol ol ol { list-style-type: upper-roman;}
   /* https://www.w3schools.com/cssref/pr_list-style-type.asp */
   /* https://stackoverflow.com/questions/11445453/css-set-li-indent */
   /* https://stackoverflow.com/questions/13366820/how-do-you-make-lettered-lists-using-markdown */
</style> 
```

底部的链接指向我获取信息的位置。格式在第二行解释。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-10-15T22:57:22.283

在大多数平台上确实没有办法做到这一点——GitHub、Slack、SO、BitBucket。（来源：A.[本评论讨论](https://stackoverflow.com/questions/13366820/how-do-you-make-lettered-lists-using-markdown#comment49486609_15422454)B.你可以试试。）

我想一个令人遗憾的解决方法是这样的：

# 示例 MarkDown（RAW/EDIT 模式）

```
## My awesome list
- A. First option.
- **B.** Second option with bold. 
```

# 示例 MarkDown（预览模式）

## 我的精彩清单

*   A. 第一个选项。
*   **B.**加粗的第二个选项。

# node.js - 访问另一个模块中的函数。在单独的文件中导出

> ID：13366824
> 
> 赞同：1
> 
> 时间：2012-11-13T18:49:54.897
> 
> 标签：node.js, express

我有几个 javascript 文件，其中包含我的节点应用程序的不同部分。使用以下逻辑需要它们。我想从 file2.js 访问一个 file1.js 中的函数，但到目前为止收效甚微。任何帮助将不胜感激，谢谢。

app.js：这是我启动服务器并包含所有快速路由的文件。

```
require(path_to_file+'/'+file_name)(app, mongoose_database, config_file);  //Require a bunch fo files here in a loop. 
```

file1.js：这是使用上述代码所需的示例文件。

```
module.exports = function(app, db, conf){
  function test() {  //Some function in a file being exported.
    console.log("YAY");
  }
} 
```

file2.js：这是使用上述代码所需的另一个文件。我想从这个文件（file2.js）中访问 file1.js 中的一个函数。

```
module.exports = function(app, db, conf){
  function performTest() {  //Some function in a file being exported.
    test();
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T19:25:15.357

### 文件1.js

```
module.exports = function(app, db, conf){
  return function test() {
    console.log("YAY");
  }
} 
```

请注意，您需要返回该函数。

### 文件2.js

```
module.exports = function(app, db, conf){
  return function performTest() {
    var test = require('./file1')(app, db, conf);
    test();
  }
} 
```

### （其他一些文件）

```
var test = require('./file2')(app, db, conf);
test(); 
```

或者

```
require('./file2')(app, db, conf)(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T19:12:03.940

您现在在 file1 中拥有的功能仅适用于导出中的功能。相反，您希望导出一个对象，其中每个函数都是该对象的成员。

```
//file1.js
module.exports = {
    test: function () {
    }
};

//file2.js:
var file1 = require('./file1.js');
module.exports = {
    performTest: function () {
        file1.test();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-06T10:01:18.467

在[ECMAScript6](https://developer.mozilla.org/en-US/docs/web/javascript/reference/statements/export)及以上版本中，您可以通过`export`和`import`关键字来完成。

首先，`export`在单独的 js 文件中实现和箭头函数：

```
//file1.js
export const myFunc = () => {
    console.log("you are in myFunc now");
} 
```

然后，`import`在其他文件中调用它：

```
//otherfile.js

import { myFunc } from 'file1';

myFunc(); 
```

[如果您想了解更多关于箭头函数的信息](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions)

# c# - 在 windows phone 7.1 上添加必应翻译

> ID：13366825
> 
> 赞同：1
> 
> 时间：2012-11-13T18:49:58.877
> 
> 标签：c#, windows-phone-7

如何在windows phone 7.1上使用必应翻译服务，有没有具体的方法，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:33:23.693

@lmaaa95 -- 您不需要任何 DLL 即可在 Windows Phone 上使用 Microsoft Translator。

Microsoft 提供可使用 HTTP 或 SOAP 调用的 API。

我在这里写了关于如何做到这一点的博客：http: [//www.netnavi.tv/2012/05/29/using-microsoft-translator-with-windows-phone-7/](http://www.netnavi.tv/2012/05/29/using-microsoft-translator-with-windows-phone-7/)

这里还有一篇关于使用它构建 WP7.x 应用程序的文章：http: [//msdn.microsoft.com/en-us/magazine/ff872395.aspx](http://msdn.microsoft.com/en-us/magazine/ff872395.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T18:52:58.587

是的，您可以使用一些 API :)

[http://www.microsoft.com/en-us/translator/developers.aspx](http://www.microsoft.com/en-us/translator/developers.aspx)

# c# - 从 DateTimePicker 获取星期几

> ID：13366826
> 
> 赞同：2
> 
> 时间：2012-11-13T18:50:03.667
> 
> 标签：c#, datepicker, dayofweek

我有一个二维数组，如果使用 dateTimePicker 选择的日期是星期一，我想将行索引设置为 1。如果选择的日期是星期二，我想将行索引设置为 2...我试过这样做使用下面的代码，但它似乎不起作用：

```
 if (dateTimePicker.Value == DateTime.DayOfWeek.Monday)
       r = 1;  
       if (dateTimePicker.Value == DateTime.DayOfWeek.tuesday)
       r = 2; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T19:02:57.607

根据[微软的文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.datetimepicker.aspx)，`DateTimePicker.Value`是`DateTime`.

拿下`DayOfWeek` [房产](http://msdn.microsoft.com/en-us/library/system.datetime.dayofweek.aspx)以获得您正在寻找的价值。

您的声明应如下所示：

```
if ( dateTimePicker.Value.DayOfWeek == DayOfWeek.Monday )
 ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T19:03:18.280

dateTimePicker.Value 将包含完整的 DateTime。您正在将其与常数进行比较。尝试将 dateTimePicker.Value.DayOfWeek 与枚举常量进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T19:04:53.743

r = (int)dateTimePicker1.Value.DayOfWeek;

# python - Collat z猜想序列

> ID：13366830
> 
> 赞同：7
> 
> 时间：2012-11-13T18:50:16.500
> 
> 标签：python

柯拉兹猜想

我正在尝试做的事情：编写一个名为 collat​​z_sequence 的函数，该函数接受一个起始整数并返回该数字的整数序列，包括起始点。以列表的形式返回序列。创建您的函数，以便如果用户输入任何小于 1 的整数，它会返回空列表 []。

考拉兹猜想的背景：

取任意自然数n。如果 n 为偶数，则除以 2 得到 n / 2，如果 n 为奇数，则乘以 3 并加 1 得到 3n + 1。无限重复该过程。猜想是，无论你从哪个数字开始，你最终总会达到 1。

到目前为止我所拥有的：

```
def collatz_sequence(x):
    seq = [x]
    if x < 1:
       return []
    while x > 1:
       if x % 2 == 0:
         x= x/2
       else:
         x= 3*x+1 
    return seq 
```

当我用小于 1 的数字运行它时，我得到了正确的空集。但是当我使用大于 1 的数字运行它时，我只会得到那个数字，即 collat​​z_sequence(6) 返回 [6]。我需要这个来返回整个数字序列，所以 6 应该在列表中返回 6,3,10,5,16,8,4,2,1。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-13T18:52:12.213

您忘记将`x`值附加到`seq`列表中：

```
def collatz_sequence(x):
    seq = [x]
    if x < 1:
       return []
    while x > 1:
       if x % 2 == 0:
         x = x / 2
       else:
         x = 3 * x + 1 
       seq.append(x)    # Added line
    return seq 
```

确认：

```
~/tmp$ python collatz.py 
[6, 3, 10, 5, 16, 8, 4, 2, 1] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-13T19:39:55.780

```
def collatz_sequence(x):
    seq = [x]
    while seq[-1] > 1:
       if x % 2 == 0:
         seq.append(x/2)
       else:
         seq.append(3*x+1)
       x = seq[-1]
    return seq 
```

这是一些产生您正在寻找的东西的代码。检查`1`是内置在 while 语句中的，它会迭代地附加到 list 中`seq`。

```
>>> collatz_sequence(6)
[6, 3, 10, 5, 16, 8, 4, 2, 1] 
```

请注意，对于大型数字列表，这将*非常*慢。缓存无法解决速度问题，您将无法在项目欧拉问题的强力解决方案中使用它，这将需要永远（因为它会执行每次计算，每次迭代。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-01T02:09:19.280

```
seq = []
x = (int(input("Add number:")))
if (x != 1):
   print ("Number can't be 1")
while x > 1:
    if x % 2 == 0:
        x=x/2
    else:
        x = 3 * x + 1
    seq.append (x)
print seq 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-27T18:02:35.500

```
import numpy as np
from matplotlib.pyplot import step, xlim, ylim, show

def collatz_sequence(N):  
  seq = [N]
  m = 0
  maxN = 0
  while seq[-1] > 1:
     if N % 2 == 0:
       k = N//2
       seq.append(N//2)
       if k > maxN:
         maxN = k
     else:
       k = 3*N+1
       seq.append(3*N+1)
       if k > maxN:
         maxN = k
     N = seq[-1]
     m = m + 1
  print(seq)

  x = np.arange(0, m+1)
  y = np.array(seq)
  xlim(0, m+1)
  ylim(0, maxN*1.1)
  step(x, y)
  show()

def collatz_exec():
  print('Enter an Integer')
  N = int(input())
  collatz_sequence(N) 
```

这是您可以使用它的方式：

```
>>> from collatz_sequence import *
>>> collatz_exec()
Enter an Integer
21
[21, 64, 32, 16, 8, 4, 2, 1] 
```

还有一个显示序列的图：

[![在此处输入图像描述](../Images/d9ce3d56b492ef8928e1eb4c946b3cf6.png)](https://i.stack.imgur.com/FoTB0.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-21T18:30:33.587

这给出了单个数字的所有步骤。它在 0.3 秒内处理了一个 50 位数字。

```
collatz = []

def collatz_sequence(x):
    while x != 1:
        if x % 2 == 0:
            x /= 2
        else:
            x = (3*x + 1)/2
        collatz.append(int(x))

    print(collatz)

collatz_sequence() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-05T13:24:09.333

```
steps=0
c0 = int(input("enter the value of c0="))

while c0>1:
    if c0 % 2 ==0 :
        c0 = c0/2
        print(int(c0))
        steps +=1
    else:
        c0 = (3 * c0) + 1
        print(int(c0))
        steps +=1
print("steps= ", steps) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-16T04:53:38.397

递归：

```
def collatz(n):
    if n == 1: return [n]
    elif n % 2 == 0: return [n] + collatz(int(n/2))
    else: return [n] + collatz(n*3+1)

print(collatz(27)) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-10-02T10:21:07.647

```
def collatz(x):
    while x !=1:
        print(int(x))
        if x%2 == 0:
            x = x/2
        else:
            x = 3*x+1 
```

这就是我的建议..

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-09-10T11:36:38.570

这是另一种方法：

```
while True:
 x=int(input('ENTER NO.:'))
 print ('----------------')
 while x>0:
  if x%2==0:
   x = x/2
  elif x>1:
   x = 3*x + 1
  else:
   break
   print (x) 
```

这将要求用户一次又一次地输入一个数字，直到他退出

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2015-06-20T19:50:10.427

```
seq = []

def collatz_sequence(x):
    global seq
    seq.append(x)
    if x == 1:
        return 
    if (x % 2) == 0:
        collatz_sequence(x / 2)
    else:
        collatz_sequence((x * 3) + 1)

collatz_sequence(217)
print seq 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2015-09-23T05:46:56.187

```
def collataz(number):
    while number > 1:
        if number % 2 == 0 :
            number = number //2
            print(number)
        elif number % 2 ==1 :
            number = 3 * number + 1
            print(number)
        if number == 1 :
            break

print('enter any number...!')
number=int(input())
collataz(number) 
```

# c# - 如何以有效的方式解析这个 xml？

> ID：13366836
> 
> 赞同：2
> 
> 时间：2012-11-13T18:50:28.480
> 
> 标签：c#, xml, linq, linq-to-xml

我是 C# 的初学者。

大案例的简单示例：

**输入：**

```
<?xml version="1.0" encoding="utf-8"?>
 <products>
  <product>
   <id>1</id>
   <name>John</name>
  </product>
  <product>
   <id>2</id>
   <name>Tom</name>
  </product>
  <product>
   <id>3</id>
   <name>Sam</name>
  </product>
 </products>
</xml> 
```

**输出（对于 id=1）：**

```
<id>2</id>
<name>Tom</name> 
```

**我的部分代码尝试psedocode：**

```
XDocument doc=XDocument.Parse(".............");

 var els= doc.Descendants("product");
 foreach(e in els){
     node=e.Element("id");
     if(2==node.Value){
     return e;
   }
 } 
```

请帮忙，

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T18:56:42.137

目前您的 xml 文件格式不正确 -`</xml>`从文件中删除结束标记以使其有效。这是查询：

```
int id = 1;
XDocument xdoc = XDocument.Load(path_to_xml);
var product = xdoc.Descendants("product")
                  .Where(p => (int)p.Element("id") == id)
                  .SingleOrDefault(); 
```

此查询将返回整个`<product>`元素，或者`null`如果未找到匹配项。

另外我相信产品名称足以供您选择（因为您已经拥有产品 ID）：

```
var name = xdoc.Descendants("product")
               .Where(p => (int)p.Element("id") == id)
               .Select(p => (string)p.Element("name"))
               .SingleOrDefault(); 
```

退货`Tom`_`id = 2`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T19:01:48.200

您可能正在寻找 XPath：

```
root.XPathSelectElements(@"//products/product/id[text()='2']") 
```

**编辑**评论：直接获取名称：`//products/product/id[text()='2']/../name`

查看完整示例

```
using System.Xml.Linq;
using System.Xml.XPath;

public class Program
{
    public static void Main(string[] args)
    {
        var doc = XDocument.Parse(XML);
        foreach(var n in doc.Root.XPathSelectElements(
                 @"//products/product/id[text()='2']"))
        {
            System.Console.WriteLine("Not that hard: '{0}'", n.Parent.Element("name").Value);
        }

        // Direct query for name:
        foreach(var n in doc.Root.XPathSelectElements(
                 @"//products/product/id[text()='2']/../name"))
        {
            System.Console.WriteLine("Directly: '{0}'", n.Value);
        }
    }

    private const string XML = 
    @"<?xml version=""1.0"" encoding=""utf-8""?>
        <products>
            <product>
                <id>1</id>
                <name>John</name>
            </product>
            <product>
                <id>2</id>
                <name>Tom</name>
            </product>
            <product>
                <id>3</id>
                <name>Sam</name>
            </product>
        </products>";
} 
```

印刷：

```
Not that hard: 'Tom'
Directly: 'Tom' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T19:04:29.230

这将返回`product`（如您的问题）而不是`id`

```
var product = doc.XPathSelectElement("//product[id and id[text() = '1']]"); 
```

# asp.net-mvc - 接受电子邮件 ID 作为 MVC3 中控制器的操作参数

> ID：13366842
> 
> 赞同：0
> 
> 时间：2012-11-13T18:50:44.350
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, asp.net-mvc-routing

如何使我的控制器操作以接受电子邮件作为参数。

这些是我的路线

```
routes.MapRoute(
                name: "infoNewsletterSignup",
                url: "info/SubscribeToNewsLetter/{email}",
                defaults: new { controller = "Info", action = "SubscribeToNewsLetter", email =UrlParameter.Optional});

            routes.MapRoute(
              name: "Default",
                url: "{controller}/{action}/{id}",
                defaults: new { controller = "Info", action = "Index", id = UrlParameter.Optional }
            ); 
```

这是我的控制器。

```
[HttpPost]
public string SubscribeToNewsLetter(string email)
{
   return "Thanks!\n\nYou have successfully subscribed for our newsletter.";
} 
```

这是我的观点

```
<td>
<input type="text" class="text-bx-foot" value="" id='newsLetterEmail' name='newsLetterEmail'></td>
<td>
<input name="Go" type="button" class="go-btn" value="Go" id="btnSubscribeToNewsLetters"></td>

$(document).ready(function () {
$("#btnSubscribeToNewsLetters").click(subscribeToNewsLetters);
});

function subscribeToNewsLetters() {
var objInputEmail = $("#newsLetterEmail");
if (objInputEmail != null) {
    var id = objInputEmail.val();
    if (id != null) {
        $.ajax({
            type: 'POST',
            url: '/Info/SubscribeToNewsLetter/' + id,
            //data: $('#form').serialize(),
            contentType: "application/json; charset=utf-8",
            traditional: true,
            success: subscribed,
            error: errorInSubscribing
        });
    }
}
}

function subscribed(data, textStatus, xhr) {
alert(data);
}

function errorInSubscribing(jqXHR, textStatus, errorThrown) {
alert(textStatus);
} 
```

**如果我像普通文本一样输入值，则将调用该操作。但是，如果我尝试输入“myname@test.co.uk”之类的值，则会收到“404 not found”错误。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:59:41.410

像这样发送它怎么样：

```
 $.ajax({
                type: 'POST',
                url: '/Info/SubscribeToNewsLetter',
                data: {"email" : Id },
                contentType: "application/json; charset=utf-8",
                traditional: true,
                success: subscribed,
                error: errorInSubscribing
            }); 
```

编辑 ：

尝试用双引号括起来：

```
 $.ajax({
                type: 'POST',
                url: '/Info/SubscribeToNewsLetter',
                 data: '{"email" : "' + Id + '"}',
                contentType: "application/json; charset=utf-8",
                traditional: true,
                success: subscribed,
                error: errorInSubscribing
            }); 
```

# javascript - 创建动态正则表达式模式以包含变量值

> ID：13366843
> 
> 赞同：0
> 
> 时间：2012-11-13T18:50:44.237
> 
> 标签：javascript, regex, actionscript-3

我有一个正则表达式，我想动态化并在字符串中创建。我想改变这个：

```
var result:Object = value.match(/John\/(.*?) /); 
```

对此：

```
var firstName:String = "John";
var result:Object = value.match(firstName + "\/(.*?) "); // this doesn't work 
```

我正在使用 ActionScript，但我认为在 JavaScript 中可以使用的东西在这里也可以使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:53:33.253

在 Javascript 中，您可以创建[RegExp](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/RegExp.html?filter_flash=cs5&filter_flashplayer=10.2&filter_air=2.6)类的新实例：

```
var firstName:String = "John";
var result:Object = value.match(new RegExp(firstName + "\/(.*?) ")); 
```

当你使用`value.match(firstName + "\/(.*?) ");`匹配函数的第一个参数是一个字符串，但它[应该是一个正则表达式对象](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match)。

# java - 在 Spring 框架中使用 registerShutdownHook()

> ID：13366846
> 
> 赞同：10
> 
> 时间：2012-11-13T18:50:52.497
> 
> 标签：java, xml, spring

我正在网上认真学习本教程。 [http://www.tutorialspoint.com/spring/spring_bean_life_cycle.htm](http://www.tutorialspoint.com/spring/spring_bean_life_cycle.htm)

但是当我到达这一行时使用 Eclipse 时出现错误： context.registerShutdownHook();

日食 说：

“此行有多个标记 - 语法错误，插入“AssignmentOperator Expression”以完成分配 - 语法错误，插入“;”以完成语句 - 方法 registerShutdownHook() 未定义为 ApplicationContext 类型”

我完全按照本教程进行操作。我所有的变量名都完全一样。我的代码和他的完全一样。我不确定出了什么问题。

我做错了什么，可以做些什么来解决这个问题，以便我可以继续教程。

```
package com.tutorialspoint;

import org.springframework.context.support.AbstractApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class MainApp
{
    public static void main(String[] args)
    {
        AbstractApplicationContext context = new ClassPathXmlApplicationContext("Beans.xml");

        HelloWorld obj = (HelloWorld)context.getBean("helloWorld");
        obj.getMessage();
        context.registerShutdownHook();
    }
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-13T18:55:01.480

对于错误，似乎 context 是 的对象[`ApplicationContext`](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/context/ApplicationContext.html)，而在教程中它应该是的对象[`AbstractApplicationContext`](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/context/support/AbstractApplicationContext.html)

我只是猜你写了这个

```
public class MainApp {
   public static void main(String[] args) {

      ApplicationContext context = 
                          new ClassPathXmlApplicationContext("Beans.xml");//error here

      HelloWorld obj = (HelloWorld) context.getBean("helloWorld");
      obj.getMessage();
      context.registerShutdownHook();
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-04T06:16:23.253

您应该根据 spring 文档[http://docs.spring.io/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-factory-nature使用 AbstractApplicationContext 而不是 ApplicationContext](http://docs.spring.io/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-factory-nature)

```
import org.springframework.context.support.AbstractApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public final class Boot {

 public static void main(final String[] args) throws Exception {
  AbstractApplicationContext ctx
      = new ClassPathXmlApplicationContext(new String []{"beans.xml"});

  // add a shutdown hook for the above context... 
  ctx.registerShutdownHook();

  // app runs here...

  // main method exits, hook is called prior to the app shutting down...
 }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-01T07:41:59.400

我也遇到了同样的问题。我用这种方式解决了它。

```
public static void main(String[] args) {
    ApplicationContext context = new ClassPathXmlApplicationContext("Bean.xml");
    HelloWorld obj =(HelloWorld)context.getBean("helloWorld");
    obj.getMessage();
    ((AbstractApplicationContext) context).registerShutdownHook();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-25T19:37:50.020

//使用这一行，

((AbstractApplicationContext) ctx).registerShutdownHook();

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-09T19:44:47.470

这是对我有用的代码。

```
package arjun;

import org.springframework.beans.factory.BeanFactory;
import org.springframework.beans.factory.xml.XmlBeanFactory;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.AbstractApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;
import org.springframework.core.io.ClassPathResource;
import org.springframework.core.io.FileSystemResource;

public class Main {

    public static void main(String[] args) {

                AbstractApplicationContext context= new ClassPathXmlApplicationContext("spring.xml");
                context.registerShutdownHook();
                Triangle triangle=(Triangle) context.getBean("triangle");
                triangle.draw();
    }

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-26T04:00:53.363

这是一个更新的解决方案：

```
import org.springframework.context.support.AbstractApplicationContext;  

((AbstractApplicationContext) appContext).registerShutdownHook(); 
```

# c# - 如何降低 if 语句的复杂度？

> ID：13366850
> 
> 赞同：-2
> 
> 时间：2012-11-13T18:51:09.760
> 
> 标签：c#, complexity-theory

我搜索了 google 和 stackvoverflow 以获得答案，但这一切都归结为：创建方法。我希望我的代码可以重用。我不想在同一个类中创建其他方法。这个类已经包含了很多代码。如何在拥有可读类的同时降低复杂性？我考虑过创建另一个类并在那里拥有所有新方法。

**编码**

```
 public Issue GetIssue(int issueId, IssueOption issueOption)
        {
            string resource = "issues/{id}.xml?";

            if (issueOption.IncludeRelation)
            {
                resource += "include=relations&";
            }
            if (issueOption.IncludeChildren)
            {
                resource += "include=children";
            }

            //To fetch multiple associations use comma (e.g ?include=relations,journals

            RestRequest request = new RestRequest(resource);
            request.AddParameter("id", issueId, ParameterType.UrlSegment);

            Issue issue = Execute<Issue>(request);

            if (issueOption.IncludeVersion)
            {
                issue.Fixed_version = GetVersion(issue.Project.Id);
            }

            if (issue.Parent != null && issueOption.IncludeParent)
            {
                issue.Parent = GetIssue(issue.Parent.Id, issueOption);
            }

            if (issueOption.IncludeUsers)
            {
                if (issue.Author.Id == issue.Assigned_to.Id)
                {
                    issue.Author = GetUser(issue.Author.Id);
                    issue.Assigned_to = issue.Author;
                }
                else
                {
                    issue.Author = GetUser(issue.Author.Id);
                    if (issue.Assigned_to != null)
                    {
                        issue.Assigned_to = GetUser(issue.Assigned_to.Id);
                    }
                }
            }

            if (issueOption.IncludeProject)
            {
                issue.Project = GetProject(issue.Project.Id);
            }

            return issue;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:56:00.000

> 这个类已经包含了很多代码。...我考虑创建另一个类并在那里拥有所有新方法。

这正是你应该做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T19:27:12.063

*遗留代码的可读代码*之路非常崎岖。

首先，你应该有完全覆盖你正在重构的代码的测试，否则你最终会在令人眼花缭乱的暴风雪中穿越那条崎岖的道路——这是可能的，但并不有趣而且非常危险。

一旦你在那里覆盖了你的屁股，你就可以开始重构了。总的来说，大多数早期的重构（假设有很多与上面类似的方法）将是*Extract Method*。从那里开始，一些类行为应该开始变得明显，然后您可以将它们提取出来。

> 我考虑过创建另一个类并在那里拥有所有新方法。

这类似于将所有东西都推到床下来打扫房间。房间很干净，但你只是隐藏了混乱。不要没有任何想法，否则你最终会得到一个`Utility`比你现在更糟糕的课程。

从 OOP 的角度来看，通常需要努力实现[SOLID解决方案。](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)从传统的角度来看，要关注的关键原则是您的班级的单一责任。如果你有这个，OLID 往往会就位（根据我的经验，虽然我的棕地开发经验比我真正想要的要多得多）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T19:25:25.390

正如您所提到的，将代码分解为更小的方法是可行的方法。如何使用静态扩展方法来组织你的代码，看看`Issue`代码的主题是怎样的：

```
// top-down:
RestRequest request = GetRequestForIssueOption(issueId, issueOption);
Issue issue = Execute<Issue>(request);

// make it fluent...
return issue.SetVersion()
.SetParent()
.SetUsers()
.SetProject(); 
```

我认为静态扩展方法很有意义。就个人而言，我认为使静态扩展流利有助于使代码更加清晰，但不确定这是否是你的一杯茶。

```
public static Issue SetVersion(this Issue issue_)
{ 
    // code here 
}

public static Issue SetParent(this Issue issue_)
{ 
    // code here 
}

public static Issue SetUsers(this Issue issue_)
{ 
    // code here 
}

public static Issue SetProject(this Issue issue_)
{ 
    // code here 
} 
```

# c# - 我如何列出接下来的几周？

> ID：13366854
> 
> 赞同：1
> 
> 时间：2012-11-13T18:51:20.620
> 
> 标签：c#, asp.net, list, week-number

我正在尝试列出接下来的 10 周

结果应该是这样的：

```
Week        Year
----------------
45:         2012  
46:         2012  
47:         2012  
48:         2012  
49:         2012  
50:         2012  
51:         2012  
52:         2012  
1:          2013  
2:          2013 
```

有些年份有第 53 周，而今年 12 月 31 日是星期一，这是第 1 周还是第 53 周？

无论如何，我想跳过第 53 周，无论何时发生。这意味着 1 或 2 天不会成为列表中任何一周的一部分，但这并不重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T18:56:34.523

> 有些年份有第 53 周，而今年 12 月 31 日是星期一，这是第 1 周还是第 53 周？

假设您的意思是“一周中的一周”，那将是 2013 年的第 1 周。

在 ISO 日历中，一周年的第一周是第一个周一至周日的一周，其中有 4 天或更多天。

目前尚不清楚您为什么要跳过第 53 周 - 它不仅跳过 1 或 2 天，而且跳过了整整一周。

当然，这实际上是假设您的意思是“一年中的一周”的 ISO 定义。如果你不这样做，那就另当别论了。在做任何其他事情之前，您需要澄清您的要求。

要从 .NET 中获取星期几，您可以使用[`Calendar.GetWeekOfYear`](http://msdn.microsoft.com/en-us/library/system.globalization.calendar.getweekofyear.aspx)- 作为您要使用的 ISO 定义，`CalendarWeekRule.FirstFourDayWeek`而`DayOfWeek.Monday`. 我不知道是否有什么可以得到周年本身。

作为一个公然的插件，在我的[Noda Time](http://noda-time.googlecode.com)中支持日期`WeekYear`和`WeekOfWeekYear`日期，您可以为给定的周年/周周年/周日组合构建日期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T18:59:51.090

我刚刚写了一个小型控制台应用程序来做到这一点：

```
static void Main(string[] args)
    {
        System.Globalization.CultureInfo ci = System.Threading.Thread.CurrentThread.CurrentCulture;
        DateTime dt = DateTime.Now; //Use current date as starting point
        for (int i = 0; i < 10; i++)
        {

            int weekNo = ci.Calendar.GetWeekOfYear(
            dt,
            ci.DateTimeFormat.CalendarWeekRule,
            ci.DateTimeFormat.FirstDayOfWeek
             );
            int year = ci.Calendar.GetYear(dt);
            if (weekNo == 53) //if week number==53, then go to next week
            {
                dt = dt.AddDays(7);
                weekNo = ci.Calendar.GetWeekOfYear(
                dt,
                ci.DateTimeFormat.CalendarWeekRule,
                ci.DateTimeFormat.FirstDayOfWeek
                 );
                year = ci.Calendar.GetYear(dt);
            }

            dt = dt.AddDays(7);
            Console.WriteLine(weekNo + "-" + year);
        }
    } 
```

今天输出：

```
 46-2012
    47-2012
    48-2012
    49-2012
    50-2012
    51-2012
    52-2012
    1-2013
    2-2013
    3-2013 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T18:56:12.753

来自 msdn [http://msdn.microsoft.com/en-us/library/system.globalization.calendar.getweekofyear.aspx](http://msdn.microsoft.com/en-us/library/system.globalization.calendar.getweekofyear.aspx)

```
using System;
using System.Globalization;

public class Example
{
   public static void Main()
   {
      DateTimeFormatInfo dfi = DateTimeFormatInfo.CurrentInfo;
      DateTime date1 = new DateTime(2011, 1, 1);
      Calendar cal = dfi.Calendar;

      Console.WriteLine("{0:d}: Week {1} ({2})", date1, 
                        cal.GetWeekOfYear(date1, dfi.CalendarWeekRule, 
                                          dfi.FirstDayOfWeek),
                        cal.ToString().Substring(cal.ToString().LastIndexOf(".") + 1));       
   }
}
// The example displays the following output: //       1/1/2011: Week 1 (GregorianCalendar) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-13T18:57:34.230

以下将根据自年初以来的周数起作用。

如果您希望这基于整周，那么您需要根据一年中第一周的日期在开始时确定偏移量 0 或 1。

```
public class Week
{
    public Week(int weekOfYear, int year)
    {
        WeekOfYear = weekOfYear;
        Year = year;
    }
    public int WeekOfYear { get; private set; }
    public int Year { get; private set; }
}
public IEnumerable<Week> Next10Weeks(DateTime startDate)
{
    DateTime tempDate = startDate;
    for (int i = 0; i < 10; i++)
    {
        //add one to first parameter if you want the 1-indexed week instead of 0 indexed
        yield return new Week(tempDate.DayOfYear % 7, tempDate.Year);
        tempDate.AddDays(7);
    }
} 
```

# objective-c - 使用具有 m:n 关系的 NSFetchedResultsController

> ID：13366861
> 
> 赞同：2
> 
> 时间：2012-11-13T18:52:18.017
> 
> 标签：objective-c, core-data, nsfetchedresultscontroller

我有一个看起来像这样的模型：

![在此处输入图像描述](../Images/fd38958356365af4d5fa214f19f6488b.png)

在代码中，我强制要求虽然 A 可以有多个 B，但每个 C 只有一个 B。

我想要做的是列出所有给定C的As，按B分组。现在，如果我从我的C开始，得到所有B的集合，然后得到所有As的集合，这是相当简单的每个 B。

我想做的是使用 NSFetchedResultsController 列出 As。我可以使用“ANY bc MATCHES myC”按 C 过滤它们，但我看不到如何将它们按正确的 B 分组。

换句话说，由于一个 A 有很多 B，我如何确定哪个是属于我的 C 的，并在 NSFetchedResultsController 中使用它？这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T23:02:51.403

**一种廉价的黑客方法：**

添加一个名为`nameOfRelevantB`object的类别方法`A`，设置`myC`为全局（或者，可能将其传递给 A 上的类方法，将其存储到文件本地静态），然后设置`nameOfRelevantB`为`sectionNameKeyPath`.`NSFetchedResultsController`

`nameOfRelevantB`将找到与提供的 C 匹配的 B 并将其返回。

明显的缺点是您一次只能拥有一个相关的 C。

您可以通过制定一条规则来改善这一点，即在您的应用程序中，获取的结果控制器与队列或线程具有一对一的关系，并将相关的 C 存储为队列或线程上下文，但`UITableViewDataSource`无论如何您都需要按顺序编写手册将结果移植回主队列/线程。

如果您要编写一个自定义数据源，您不妨将其`NSFetchedResultsControllerDelegate`设置为根据自己的意愿将事物分解为多个部分，从而避免使用 [file static] 全局。

**更彻底的解决方案：**

您可以覆盖`valueForUndefinedKey:`您的`NSManagedObject`子类并将相关的 C`objectID`直接放入关键路径中。这样做是明确安全的，因为托管对象 ID 具有 a`URIRepresentation`和`NSURL`提供`absoluteString`。然后每个 A 可以从键路径中获取字符串 URI，询问其上下文的持久存储协调器`managedObjectIDForURIRepresentation`，然后询问上下文`existingObjectWithID:error:`以获取相关的 C。一旦它有了 C，它就可以从适当的 B 返回标题。

在没有任何类型的全局状态的情况下，这将实现您想要的。你也可以`NSFetchedResultsController`直接使用，给它一个可以确定部分的关键路径。

所以，例如（直接在这里输入，未经测试）

```
// get a URI for the relevant myC and prefix it with an '@'
// so that it's definitely clearly not an ordinary property
fetchedResults.sectionNameKeyPath = 
        [NSString stringWithFormat:@"@%@", 
              [[myC.objectID URIRepresentation] absoluteString]];

... in your subclass for A ...

- (id)valueForUndefinedKey:(NSString *)key
{
    // check that the key begins with the magic '@' symbol
    if(![key length] || [key characterAtIndex:0] != '@')
        return [super valueForUndefinedKey:key];

    // get the original URL
    NSString *URLString = [key substringFromIndex:1];
    NSURL *URL = [NSURL URLWithString:URLString];

    // transform the URL into the relevant instance of C
    NSManagedObjectID *objectID = [self.context.persistentStoreCoordinator
                  managedObjectIDForURIRepresentation:URL];
    NSError *error = nil;
    MyCClass *myC = [self.context existingObjectWithID:objectID error:&error];

    // check that we got an appropriate instance and didn't
    // generate an error
    if(!myC || error) return [super valueForUndefinedKey:key];

    /*
        code here to find the appropriate B and return a suitable title
    */
} 
```

主要需要注意的是，对象 ID 以及 URI 可能会在对象的初始创建和第一次保存之间发生变化。如果您已经保存了上下文，那么只要对象在商店中，对象 ID 就会保持不变。

# javascript - 可以安排事件回调的冒泡顺序吗？

> ID：13366862
> 
> 赞同：1
> 
> 时间：2012-11-13T18:52:19.727
> 
> 标签：javascript, jquery, backbone.js, event-handling

我有几个对象在监听一个`change`事件，但我需要它们以指定的顺序触发。

是否可以在 jQuery 中自定义多个绑定对象的冒泡顺序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:09:48.813

据我所经历的，有一个处理程序数组存储所有引用分配函数的处理程序。因此，当您为事件添加新函数时，它会位于该数组的末尾，这意味着类似于下面的代码：

```
$("SomeElement")
.live(
    {
        click: function ()
        {
            // This is handler named A.
            alert("A");
        }
    }
);

$("SomeElement")
.live(
    {
        click: function ()
        {
            // This is handler named B.
            alert("B");
        }
    }
); 
```

当事件触发时， B 将显示**在**A之后。`"click"`

但是当你改变地方时：

```
$("SomeElement")
.live(
    {
        click: function ()
        {
            // This is handler named B.
            alert("B");
        }
    }
);

$("SomeElement")
.live(
    {
        click: function ()
        {
            // This is handler named A.
            alert("A");
        }
    }
); 
```

触发事件时， B 将显示**在**A之前。`"click"`

您可以通过这种方式订购添加处理程序，因为 javascript 代码从上向下执行，我相信这是唯一的方法。

希望能帮助到你。

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T19:12:28.120

不幸的是，您不能自定义事件冒泡顺序。

为了达到你想要的效果，我会推荐**jQuery custom events**。

例子：

```
$("#YOURELEMENT").trigger('CUSTOMEVENT'); //create a new custom event
$("#YOURELEMENT2").bind('CUSTOMEVENT',function(e){ ... }); //listen for new custom event 
```

这是一个[很好的教程](http://fuelyourcoding.com/jquery-custom-events-they-will-rock-your-world/)。

# encryption - 服务器内存中私钥的安全性

> ID：13366863
> 
> 赞同：-2
> 
> 时间：2012-11-13T18:52:27.763
> 
> 标签：encryption

假设我有一个服务器，它在启动时在内存中生成一个私钥。

无论如何，窥探管理员（例如来自 Heroku 或 Nodejitsu）是否可以在该服务器实例运行时恢复该私钥（即以某种方式在内存中访问它）？

如果重要的话，我在 Node.JS 上运行它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T19:41:51.473

这取决于他们使用什么系统，以及他们是否具有防止这种情况发生的功能。否则我可以说有权访问主机的管理员可以通过多种方式获取您的私钥。例如，他们可以冻结您的即时并保存其状态，这基本上将内存复制到硬盘，然后解冻它，这在快速系统上不需要很长时间。他们还可以转储您的实例的内存，因为它只是虚拟机管理程序下正在运行的应用程序。这些可能不容易做到，但根据我在安全领域的经验，我可以说它们很有可能。

但是，我认为您应该将密钥的加密版本存储在内存中。并且仅在使用时对其进行解密，因此解密后的版本仅临时存储在 CPU 寄存器中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T00:23:08.193

您不仅会生成私钥，还会生成密钥对。然后您必须确保对方使用该密钥对的*可信公钥（用于验证签名或加密数据）。*如果他们只使用*任何*公钥，那么他们无法确定它不属于攻击者。因此，即使管理员无法访问私钥，他们也可以简单地用他们生成的公钥替换公钥。所以你会有一个巨大的机会让一个中间攻击的人。

密钥管理很难。您不能简单地用一些随意的方案替换它。在每次运行时生成密钥对也有很多（安全）缺点。一般来说，这不是一个好主意。

# objective-c - 错误：从不兼容的类型 void 分配

> ID：13366865
> 
> 赞同：0
> 
> 时间：2012-11-13T18:52:32.717
> 
> 标签：objective-c

从“Program 9.1”中的 Kochan 的“programing in Objective-c”中复制粘贴的练习代码。但它不编译。

有两类：分数和复数。Complex 的对象似乎工作正常，但“main.m”中的 Fraction 的对象“fracResult”给出了一个错误：“Assigning to “Fraction *” from in compatible type 'void'”。

这是分数.h：

```
#import <Foundation/Foundation.h>
// Define the Fraction class
@interface Fraction : NSObject
{
int numerator;
int denominator;
}
@property int numerator, denominator;
-(void) print;
-(void) setTo: (int) n over: (int) d;
-(double) convertToNum;
-(void) add: (Fraction *) f;
-(void) reduce;
@end 
```

分数.m 文件：

```
#import "Fraction.h"
@implementation Fraction
@synthesize numerator, denominator;
-(void) print
{
NSLog (@"%i/%i", numerator, denominator);
}
-(double) convertToNum
{
if (denominator != 0)
return (double) numerator / denominator;
else
return NAN;
}
-(void) setTo: (int) n over: (int) d
{
numerator = n;
denominator = d;
}
// add a Fraction to the receiver
-(void) add: (Fraction *) f
{
// To add two fractions:
// a/b + c/d = ((a*d) + (b*c)) / (b * d)
numerator = numerator * f.denominator + denominator * f.numerator;
denominator = denominator * f.denominator;
}
-(void) reduce
{
int u = numerator;
int v = denominator;
int temp;
while (v != 0) {
temp = u % v;
u = v;
v = temp;
}
numerator /= u;
denominator /= u;
}
@end 
```

main.m 文件：

```
#import "Fraction.h"
#import "Complex.h"
int main (int argc, char *argv[])
{
NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
Fraction *f1 = [[Fraction alloc] init];
Fraction *f2 = [[Fraction alloc] init];
Fraction *fracResult;
Complex *c1 = [[Complex alloc] init];
Complex *c2 = [[Complex alloc] init];
Complex *compResult;
[f1 setTo: 1 over: 10];
[f2 setTo: 2 over: 15];
[c1 setReal: 18.0 andImaginary: 2.5];
[c2 setReal: -5.0 andImaginary: 3.2];
// add and print 2 complex numbers
[c1 print]; NSLog (@" +"); [c2 print];
NSLog (@"---------");
compResult = [c1 add: c2];
[compResult print];
NSLog (@"\n");
[c1 release];
[c2 release];
[compResult release];
// add and print 2 fractions
[f1 print]; NSLog (@" +"); [f2 print];
NSLog (@"----");
fracResult= [f1 add: f2];  //this line gives an error 
[fracResult print];
[f1 release];
[f2 release];
[fracResult release];
[pool drain];
return 0;
} 
```

通过对这个主题的研究，我发现这种类型的错误通常是由于指针使用不当引起的。有人建议，简单地从方法“add:”的声明和实现中删除星号。但这导致了更多的“语义问题”

此外，有时书中的代码无法编译，因为书中使用的字符与 xcode 使用的字符不同。通常，破折号是不同的。但这也没有解决“不兼容类型”的问题。

欢迎任何意见或建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T18:56:56.240

问题是`add`定义为

```
-(void) add: (Fraction *) f; 
```

因为它将`Fraction* f`传递给当前对象的值添加到对象本身。这意味着它不会返回作为两个分数之和的新分数，但它会修改分数本身。这就是为什么返回类型是`(void)`，否则它本来就是`-(Fraction*) add:(Fraction*)f;`​​。

所以

```
Fraction *fractResult = [f1 add:f2] 
```

尝试存储由返回的值，`[Fraction add:]`但返回值为`void`，这是一个非值，不能存储在任何地方。（这就是你*从不兼容的类型 void 分配*的原因）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T18:59:35.577

此类方法未正确定义：

```
-(void) add: (Fraction *) f; 
```

因此，您将 a 分配`void`给 a `Fraction *`：

```
fracResult= [f1 add: f2]; 
```

更正声明和实现，它应该可以正常工作。

# android - 修改 Android 蓝牙聊天示例后无法启动 Activity ComponentInfo

> ID：13366867
> 
> 赞同：3
> 
> 时间：2012-11-13T18:52:43.333
> 
> 标签：android, bluetooth

我从[http://www.elektor.com/magazines/2012/march/android-switch-interface.2084156.lynkx](http://www.elektor.com/magazines/2012/march/android-switch-interface.2084156.lynkx)修改了一个示例蓝牙通信应用程序，使其与我的 Arduino 同步。

在做了一些小改动（如果是搜索栏，则改为按钮）后，我无法让它运行。我在手机上收到 FC 和错误，如下所示。

我是 android/java 新手，但已经编程多年。

我似乎无法通过在网上搜索 2 天来修复它。

```
11-13 18:41:58.127: E/AndroidRuntime(21448): java.lang.RuntimeException: Unable to start activity     ComponentInfo{www.elektor.BTInterface/www.elektor.BTInterface.BluetoothChat}:    android.util.AndroidRuntimeException: You cannot combine custom titles with other title features
11-13 18:41:58.127: E/AndroidRuntime(21448):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2185)
11-13 18:41:58.127: E/AndroidRuntime(21448):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2210)
11-13 18:41:58.127: E/AndroidRuntime(21448):    at android.app.ActivityThread.access$600(ActivityThread.java:140)
11-13 18:41:58.127: E/AndroidRuntime(21448):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1206)
11-13 18:41:58.127: E/AndroidRuntime(21448):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-13 18:41:58.127: E/AndroidRuntime(21448):    at android.os.Looper.loop(Looper.java:137)
11-13 18:41:58.127: E/AndroidRuntime(21448):    at android.app.ActivityThread.main(ActivityThread.java:4906)
11-13 18:41:58.127: E/AndroidRuntime(21448):    at java.lang.reflect.Method.invokeNative(Native Method)
11-13 18:41:58.127: E/AndroidRuntime(21448):    at java.lang.reflect.Method.invoke(Method.java:511)
11-13 18:41:58.127: E/AndroidRuntime(21448):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
11-13 18:41:58.127: E/AndroidRuntime(21448):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
11-13 18:41:58.127: E/AndroidRuntime(21448):    at dalvik.system.NativeStart.main(Native Method)
11-13 18:41:58.127: E/AndroidRuntime(21448): Caused by: android.util.AndroidRuntimeException: You cannot combine custom titles with other title  features
11-13 18:41:58.127: E/AndroidRuntime(21448):    at com.android.internal.policy.impl.PhoneWindow.requestFeature(PhoneWindow.java:227)
11-13 18:41:58.127: E/AndroidRuntime(21448):    at com.android.internal.policy.impl.PhoneWindow.generateLayout(PhoneWindow.java:2604)
11-13 18:41:58.127: E/AndroidRuntime(21448):    at com.android.internal.policy.impl.PhoneWindow.installDecor(PhoneWindow.java:2844)
11-13 18:41:58.127: E/AndroidRuntime(21448):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:252)
11-13 18:41:58.127: E/AndroidRuntime(21448):    at android.app.Activity.setContentView(Activity.java:1867)
11-13 18:41:58.127: E/AndroidRuntime(21448):    at www.elektor.BTInterface.BluetoothChat.onCreate(BluetoothChat.java:101)
11-13 18:41:58.127: E/AndroidRuntime(21448):    at android.app.Activity.performCreate(Activity.java:5008)
11-13 18:41:58.127: E/AndroidRuntime(21448):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
11-13 18:41:58.127: E/AndroidRuntime(21448):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2139)
11-13 18:41:58.127: E/AndroidRuntime(21448):    ... 11 more
11-13 18:42:02.872: I/Process(21448): Sending signal. PID: 21448 SIG: 9 
```

这是我的代码和 xmls

```
/**
 * This is the main Activity that displays the current chat session.
 */
public class BluetoothChat extends Activity {
    // Debugging
    private static final String TAG = "BluetoothChat";
    private static final boolean D = true;

    // Message types sent from the BluetoothChatService Handler
    public static final int MESSAGE_STATE_CHANGE = 1;
    public static final int MESSAGE_READ = 2;
    public static final int MESSAGE_WRITE = 3;
    public static final int MESSAGE_DEVICE_NAME = 4;
    public static final int MESSAGE_TOAST = 5;

    // Key names received from the BluetoothChatService Handler
    public static final String DEVICE_NAME = "device_name";
    public static final String TOAST = "toast";

    // Intent request codes
    private static final int REQUEST_CONNECT_DEVICE_SECURE = 1;
    private static final int REQUEST_CONNECT_DEVICE_INSECURE = 2;
    private static final int REQUEST_ENABLE_BT = 3;

    // Layout Views
    private TextView mTitle;
    private ListView mConversationView;
    private EditText mOutEditText;

    private WakeLock  w1;

    private String mConnectedDeviceName = null;
    // Array adapter for the conversation thread
    private ArrayAdapter<String> mConversationArrayAdapter;
    // String buffer for outgoing messages
    private StringBuffer mOutStringBuffer;
    // Local Bluetooth adapter
    private BluetoothAdapter mBluetoothAdapter = null;
    // Member object for the chat services
    private BluetoothRfcommClient mChatService = null;
  //  Activity mContext = null;

    private int Servo1;
    private int Servo2;

    private int maxServo=120;
    private Button sButton1;
    private Button sButton2;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        if(D) Log.e(TAG, "+++ ON CREATE +++");

        // Set up the window layout
        requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
        setContentView(R.layout.main);
        getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.custom_title);

        // Set up the custom title
        mTitle = (TextView) findViewById(R.id.title_left_text);
        mTitle.setText(R.string.app_name);
        mTitle = (TextView) findViewById(R.id.title_right_text);
        sButton1 = (Button) findViewById(R.id.button1);
        sButton2 = (Button) findViewById(R.id.button2);
        // Get local Bluetooth adapter
        mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();

        // If the adapter is null, then Bluetooth is not supported
        if (mBluetoothAdapter == null) {
            Toast.makeText(this, "Bluetooth is not available", Toast.LENGTH_LONG).show();
            finish();
            return;
        }

    } 

    @Override
    public void onStart() {
        super.onStart();
        if(D) Log.e(TAG, "++ ON START ++");
        // If BT is not on, request that it be enabled.
        // setupChat() will then be called during onActivityResult
        if (!mBluetoothAdapter.isEnabled()) {
            Intent enableIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
            startActivityForResult(enableIntent, REQUEST_ENABLE_BT);
        // Otherwise, setup the chat session
        } else {
            if (mChatService == null) setupChat();
        }
    }

    @Override
    public synchronized void onResume() {
        super.onResume();
        if(D) Log.e(TAG, "+ ON RESUME +");
        // Performing this check in onResume() covers the case in which BT was
        // not enabled during onStart(), so we were paused to enable it...
        // onResume() will be called when ACTION_REQUEST_ENABLE activity returns.
        if (mChatService != null) {
            // Only if the state is STATE_NONE, do we know that we haven't started already
            if (mChatService.getState() == BluetoothRfcommClient.STATE_NONE) {
              // Start the Bluetooth chat services
              mChatService.start();
            }
        }
    }

    private void setupChat() {
        Log.d(TAG, "setupChat()");

        // Initialize the array adapter for the conversation thread
        mConversationArrayAdapter = new ArrayAdapter<String>(this, R.layout.message);
        mConversationView = (ListView) findViewById(R.id.in);
        mConversationView.setAdapter(mConversationArrayAdapter);

        // Initialize the BluetoothChatService to perform bluetooth connections
        mChatService = new BluetoothRfcommClient(this, mHandler);

        // Initialize the buffer for outgoing messages
        mOutStringBuffer = new StringBuffer("");
    }

    @Override
    public synchronized void onPause() {
        super.onPause();
        if(D) Log.e(TAG, "- ON PAUSE -");
        //w1.release();
    }

    @Override
    public void onStop() {
        super.onStop();
        if(D) Log.e(TAG, "-- ON STOP --");

    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        // Stop the Bluetooth chat services
        if (mChatService != null) mChatService.stop();
        if(D) Log.e(TAG, "--- ON DESTROY ---");
    }

    private void ensureDiscoverable() {
        if(D) Log.d(TAG, "ensure discoverable");
        if (mBluetoothAdapter.getScanMode() !=
            BluetoothAdapter.SCAN_MODE_CONNECTABLE_DISCOVERABLE) {
            Intent discoverableIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_DISCOVERABLE);
            discoverableIntent.putExtra(BluetoothAdapter.EXTRA_DISCOVERABLE_DURATION, 300);
            startActivity(discoverableIntent);
        }
    }

    /**
     * Sends a message.
     * @param message  A string of text to send.
     */
    private void sendMessage(String message) {
        // Check that we're actually connected before trying anything
        if (mChatService.getState() != BluetoothRfcommClient.STATE_CONNECTED) {

            Toast.makeText(this, R.string.not_connected, Toast.LENGTH_SHORT).show();

            return;
        }
        // Check that there's actually something to send
        if (message.length() > 0) {
            // Get the message bytes and tell the BluetoothChatService to write
            byte[] send = message.getBytes();
            mChatService.write(send);

            // Reset out string buffer to zero and clear the edit text field
            mOutStringBuffer.setLength(0);
            mOutEditText.setText(mOutStringBuffer);
        }
    }

    // The action listener for the EditText widget, to listen for the return key

    // The Handler that gets information back from the BluetoothChatService
    private final Handler mHandler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
            switch (msg.what) {
            case MESSAGE_STATE_CHANGE:
                if(D) Log.i(TAG, "MESSAGE_STATE_CHANGE: " + msg.arg1);
                switch (msg.arg1) {
                case BluetoothRfcommClient.STATE_CONNECTED:
                    mTitle.setText(R.string.title_connected_to);
                    mTitle.append(mConnectedDeviceName);
                    mConversationArrayAdapter.clear();
                    break;
                case BluetoothRfcommClient.STATE_CONNECTING:
                    mTitle.setText(R.string.title_connecting);
                    break;
                //case BluetoothRfcommClient.STATE_LISTEN:
                case BluetoothRfcommClient.STATE_NONE:
                    mTitle.setText(R.string.title_not_connected);
                    break;
                }
                break;
            case MESSAGE_WRITE:
                byte[] writeBuf = (byte[]) msg.obj;
                // construct a string from the buffer
                String writeMessage = new String(writeBuf);
                mConversationArrayAdapter.add("Me:  " + writeMessage);
                break;
            case MESSAGE_READ:
                byte[] readBuf = (byte[]) msg.obj;
                // construct a string from the valid bytes in the buffer
                String readMessage = new String(readBuf, 0, msg.arg1);
                mConversationArrayAdapter.add(mConnectedDeviceName+":  " + readMessage);
                UpdateScreen(readMessage);
                // INSERT READING SWICTH 

                break;
            case MESSAGE_DEVICE_NAME:
                // save the connected device's name
                mConnectedDeviceName = msg.getData().getString(DEVICE_NAME);
                Toast.makeText(getApplicationContext(), "Connected to "
                               + mConnectedDeviceName, Toast.LENGTH_SHORT).show();
                break;
            case MESSAGE_TOAST:
                Toast.makeText(getApplicationContext(), msg.getData().getString(TOAST),
                               Toast.LENGTH_SHORT).show();
                break;
            }
        }
    };

    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        if(D) Log.d(TAG, "onActivityResult " + resultCode);
        switch (requestCode) {
        case REQUEST_CONNECT_DEVICE_SECURE:
            // When DeviceListActivity returns with a device to connect
            if (resultCode == Activity.RESULT_OK) {
                connectDevice(data, true);
            }
            break;
        case REQUEST_CONNECT_DEVICE_INSECURE:
            // When DeviceListActivity returns with a device to connect
            if (resultCode == Activity.RESULT_OK) {
                connectDevice(data, false);
            }
            break;
        case REQUEST_ENABLE_BT:
            // When the request to enable Bluetooth returns
            if (resultCode == Activity.RESULT_OK) {
                // Bluetooth is now enabled, so set up a chat session
                setupChat();
            } else {
                // User did not enable Bluetooth or an error occured
                Log.d(TAG, "BT not enabled");
                Toast.makeText(this, R.string.bt_not_enabled_leaving, Toast.LENGTH_SHORT).show();
                finish();
            }
        }
    }

    private void connectDevice(Intent data, boolean secure) {
        // Get the device MAC address
        String address = data.getExtras()
            .getString(DeviceListActivity.EXTRA_DEVICE_ADDRESS);
        // Get the BLuetoothDevice object
        BluetoothDevice device = mBluetoothAdapter.getRemoteDevice(address);
        // Attempt to connect to the device
        mChatService.connect(device);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.option_menu, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        Intent serverIntent = null;
        switch (item.getItemId()) {
        case R.id.secure_connect_scan:
            // Launch the DeviceListActivity to see devices and do scan
            serverIntent = new Intent(this, DeviceListActivity.class);
            startActivityForResult(serverIntent, REQUEST_CONNECT_DEVICE_SECURE);
            return true;
        case R.id.insecure_connect_scan:
            // Launch the DeviceListActivity to see devices and do scan
            serverIntent = new Intent(this, DeviceListActivity.class);
            startActivityForResult(serverIntent, REQUEST_CONNECT_DEVICE_INSECURE);
            return true;
        case R.id.discoverable:
            // Ensure this device is discoverable by others
            ensureDiscoverable();
            return true;
        }
        return false;
    }
        private void UpdateScreen(String txtMessage) {
   }
        public void onServoButtonClick(View view) {
            switch (view.getId()){
            case R.id.button1:
                if (Servo1 < maxServo){
                    Servo1++;
                    sendMessage("P,"+Servo1);
                }
            case R.id.button2:
                if (Servo1 > 0){
                    Servo1--;
                    sendMessage("P,"+Servo1);
                }
         }  
         }
    }   

<?xml version="1.0" encoding="utf-8"?>
<!--
     Copyright (C) 2009 The Android Open Source Project

     Licensed under the Apache License, Version 2.0 (the "License");
     you may not use this file except in compliance with the License.
     You may obtain a copy of the License at

          http://www.apache.org/licenses/LICENSE-2.0

     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
     limitations under the License.
-->
<GridLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/GridLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:columnCount="2"
    android:orientation="horizontal" >

    <ListView
        android:id="@+id/in"
        android:layout_height="62dp"
        android:layout_column="0"
        android:layout_gravity="fill_horizontal"
        android:layout_row="0"
        android:stackFromBottom="true"
        android:transcriptMode="alwaysScroll" />

    <Button
        android:id="@+id/button1"
        android:layout_width="match_parent"
        android:layout_column="0"
        android:layout_gravity="left"
        android:layout_row="1"
        android:text="@string/servo_1_up" />

    <Button
        android:id="@+id/button2"
        android:layout_width="match_parent"
        android:layout_column="0"
        android:layout_gravity="left"
        android:layout_row="2"
        android:text="@string/servo_1_down" />

</GridLayout>
<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (C) 2009 The Android Open Source Project

     Licensed under the Apache License, Version 2.0 (the "License");
     you may not use this file except in compliance with the License.
     You may obtain a copy of the License at

          http://www.apache.org/licenses/LICENSE-2.0

     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
     limitations under the License.
-->
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      android:versionCode="1"
      android:versionName="1.0" package="www.elektor.BTInterface">
    <uses-sdk android:minSdkVersion="16" android:targetSdkVersion="16" />
    <uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />
    <uses-permission android:name="android.permission.BLUETOOTH" />
    <uses-permission android:name="android.permission.WAKE_LOCK"></uses-permission>

    <application android:label="@string/app_name"
                 android:icon="@drawable/app_icon" >
        <activity android:name=".BluetoothChat"
                  android:label="@string/app_name"
                  android:configChanges="orientation|keyboardHidden" android:windowSoftInputMode="stateHidden">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="www.elektor.BTInterface.DeviceListActivity"
                  android:label="@string/select_device"
                  android:theme="@android:style/Theme.Dialog"
                  android:configChanges="orientation|keyboardHidden" />
    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:54:34.407

当我将最低 SDK 提高到 16 时，我可以复制崩溃报告。所以`minSdkVersion`在你的清单中返回到 6：

```
<uses-sdk android:minSdkVersion="6" android:targetSdkVersion="16" /> 
```

# django - 为什么我的重定向中间件会失败？

> ID：13366871
> 
> 赞同：0
> 
> 时间：2012-11-13T18:53:08.547
> 
> 标签：django, mobile, django-middleware

我有一个将移动用户重定向到移动站点的中间件，但如果 url 是`/property/`. 移动重定向正在运行，但`/property/`并未被排除在外。

这是当前的中间件。

**中间件.py**

```
# Adapted from http://djangosnippets.org/snippets/2001/
import re
from  django.conf import settings
from django.http import HttpResponseRedirect

class MobileRedirectMiddleware(object):
    """
    Redirects mobile users to a different site.
    """
    def process_request(self, request):
        if self._is_mobile(request):
            return HttpResponseRedirect(settings.MOBILE_SITE_URL)

    def _is_mobile(self, request):
        is_mobile = False
        NON_MOBILE_REDIRECT_URLS = getattr(settings, 'NON_MOBILE_REDIRECT_URLS', [])
        if request.path in NON_MOBILE_REDIRECT_URLS:
            return False

        if request.META.has_key('HTTP_USER_AGENT'):
            user_agent = request.META['HTTP_USER_AGENT']

            # Test common mobile values.
            pattern = "(up.browser|up.link|mmp|symbian|smartphone|midp|wap|phone|windows ce|pda|mobile|mini|palm|netfront)"
            prog = re.compile(pattern, re.IGNORECASE)
            match = prog.search(user_agent)

            if match:
                is_mobile = True
            else:
                # Nokia like test for WAP browsers.
                # http://www.developershome.com/wap/xhtmlmp/xhtml_mp_tutorial.asp?page=mimeTypesFileExtension

                if request.META.has_key('HTTP_ACCEPT'):
                    http_accept = request.META['HTTP_ACCEPT']

                    pattern = "application/vnd\.wap\.xhtml\+xml"
                    prog = re.compile(pattern, re.IGNORECASE)

                    match = prog.search(http_accept)

                    if match:
                        is_mobile = True

            if not is_mobile:
                # Now we test the user_agent from a big list.
                user_agents_test = ("w3c ", "acs-", "alav", "alca", "amoi", "audi",
                                    "avan", "benq", "bird", "blac", "blaz", "brew",
                                    "cell", "cldc", "cmd-", "dang", "doco", "eric",
                                    "hipt", "inno", "ipaq", "java", "jigs", "kddi",
                                    "keji", "leno", "lg-c", "lg-d", "lg-g", "lge-",
                                    "maui", "maxo", "midp", "mits", "mmef", "mobi",
                                    "mot-", "moto", "mwbp", "nec-", "newt", "noki",
                                    "xda",  "palm", "pana", "pant", "phil", "play",
                                    "port", "prox", "qwap", "sage", "sams", "sany",
                                    "sch-", "sec-", "send", "seri", "sgh-", "shar",
                                    "sie-", "siem", "smal", "smar", "sony", "sph-",
                                    "symb", "t-mo", "teli", "tim-", "tosh", "tsm-",
                                    "upg1", "upsi", "vk-v", "voda", "wap-", "wapa",
                                    "wapi", "wapp", "wapr", "webc", "winw", "winw",
                                    "xda-",)

                test = user_agent[0:4].lower()
                if test in user_agents_test:
                    is_mobile = True

        return is_mobile 
```

**在 settings.py 我有这个：**

```
MOBILE_SITE_URL = 'http://mobile.somesite.com/'
NON_MOBILE_REDIRECT_URLS = ['/property/'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:30:54.130

`mobile.`仅仅避免重定向到给定的 url可能还不够。如果用户已经来自`mobile.somesite.com/..../`，您将需要主动将他们重定向到`www.`离开移动站点。

这是未经测试的，但应该非常接近：

```
class MobileRedirectMiddleware(object):
    """
    Redirects mobile users to a different site.
    """
    def process_request(self, request):
        was_mobile = settings.MOBILE_SITE_URL in request.META.HTTP_REFERER
        NON_MOBILE_REDIRECT_URLS = getattr(settings, 'NON_MOBILE_REDIRECT_URLS', [])

        if request.path in NON_MOBILE_REDIRECT_URLS and was_mobile:
            # redirect them to 'www.somesite.com/.../'
            return HttpResponseRedirect(settings.MAIN_SITE_URL + request.path.lstrip('/'))

        if self._is_mobile(request):
            return HttpResponseRedirect(settings.MOBILE_SITE_URL)

    def _is_mobile(self, request):
        is_mobile = False

        # no longer need to check urls in here

        if request.META.has_key('HTTP_USER_AGENT'):
             ... 
```

# c# - 如何从一个单词中删除多行文本到另一个单词

> ID：13366872
> 
> 赞同：-2
> 
> 时间：2012-11-13T18:53:08.480
> 
> 标签：c#, regex, web-scraping

我正在将网页上的数据抓取到文本文件中，因为我想删除一些不相关的内容，例如

```
 </h3>
    <div class="form clearfix">
      <a href="/matches/2012/11/11/mexico/primera-division/club-san-luis/deportivo-toluca-futbol-club/1292713/" class="form-icon form-loss " title="San Luis - Toluca 0 - 2">L</a>
      <a href="/matches/2012/11/04/mexico/primera-division/club-tijuana-xoloitzcuintles-de-caliente/club-san-luis/1292699/" class="form-icon form-draw " title="Tijuana - San Luis 0 - 0">D</a>
      <a href="/matches/2012/10/28/mexico/primera-division/club-san-luis/queretaro-fc/1292695/" class="form-icon form-draw " title="San Luis - Querétaro 0 - 0">D</a>
      <a href="/matches/2012/10/21/mexico/primera-division/club-atlas-de-guadalajara/club-san-luis/1292684/" class="form-icon form-win " title="Atlas - San Luis 2 - 3">W</a>
      <a href="/matches/2012/10/14/mexico/primera-division/club-san-luis/club-atlante/1292674/" class="form-icon form-draw last" title="San Luis - Atlante 2 - 2">D</a>
    </div>
  </div>

  <div class="container middle">
    <h3 class="thick scoretime "> 
```

我正在尝试将输出作为`</h3><h3 class="thick scoretime ">`删除其他数据。

我试过了

```
source = regax.replace(source, </h3>.*<h3 class="thick scoretime "> ","</h3><h3 class="thick scoretime "> ") 
```

但它没有用。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T18:56:40.923

使用[HTML Agilty Pack](http://htmlagilitypack.codeplex.com/) - 它是一个用于 .NET的开源*HTML 解析器。*

什么是 Html Agility Pack (HAP)？

> 这是一个敏捷的 HTML 解析器，它构建一个读/写 DOM 并支持普通的 XPATH 或 XSLT（实际上你不必了解 XPATH 或 XSLT 就可以使用它，不用担心......）。它是一个 .NET 代码库，允许您解析“网络之外”的 HTML 文件。解析器对“真实世界”格式错误的 HTML 非常宽容。对象模型与 System.Xml 的提议非常相似，但用于 HTML 文档（或流）。

您可以使用它来查询 HTML 并提取您想要的任何数据。

* * *

如果最终需要根据您的要求基于 Regex 模式提取文本，您可以这样做：

```
Regex regex = new Regex("</h3>(?<Junk>.*)<h3 class=\"thick scoretime \">",
    RegexOptions.None | RegexOptions.Singleline);
var extractedString = regex.Replace(htmlString, "${Junk}"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T19:04:28.413

以下将搜索所有

```
 string file = "TheEntireFileIsInThisBuffer";
 string pattern = "<div.*</div>"; 
 RegEx rgx = new RegEx(pattern);
 string fileWithOutDivs = rgx.Replace(file, System.String.Empty); 
```

# gwt - Extjs快速提示显示空框

> ID：13366880
> 
> 赞同：1
> 
> 时间：2012-11-13T18:53:35.123
> 
> 标签：gwt, extjs, tooltip, gxt

我正在尝试在 GXT 网格单元上实现工具提示 (QuickTip) 功能。它似乎大部分时间都可以工作，但有时我在将鼠标悬停在列标题上时会得到一个空的工具提示框。我发现一些文章指出工具提示仅适用于数据而不适用于标题，但我猜不是这样。默认情况下，我将工具提示/文本设置为空，但我仍然在标题鼠标上看到空框。我做错了什么吗？这是我的代码：

```
ColumnConfig columnTitle = new ColumnConfig();
    columnTitle.setId("subject");
    columnTitle.setHeader("<B>Title</B>")
    columnTitle.setRenderer(new GridCellRenderer<ModelData>()
    {
        @Override
        public Object render(ModelData model, String property, ColumnData config, int rowIndex, int colIndex,
                ListStore<ModelData> store, Grid<ModelData> grid)
        {
            SystemUserMessage msg = ((BeanModel)model).getBean();
            String text = null;
            text = msg.getSubject();

            String content = model.get("content").toString();
            String toolTip = null;
            toolTip = " qtip='" + content + "'";
            String style = null;
            if(msg.getPriority().equals("High"))
            {
                style = " style='color: red;'";
            }
            String html = "<span" + toolTip + style + ">" + text + "</span>";
            return html;
        }
    }); 
```

新的快速提示（messageCenterGrid）；//注册工具提示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:06:37.887

尝试替换`qtip=`为`data-qtip=`. 您还可以添加`data-qtitle=`

**根据 Juan编辑**有用的链接：[http ://docs.sencha.com/ext-js/4-1/#!/api/Ext.tip.QuickTipManager](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.tip.QuickTipManager)

# android - 为什么我之前的按钮不起作用？

> ID：13366882
> 
> 赞同：0
> 
> 时间：2012-11-13T18:53:36.997
> 
> 标签：android, sqlite

我制作了应用程序，但我又遇到了数据库问题。我做了两个按钮——上一个按钮和下一个按钮。下一个按钮可以工作，但是单击上一个按钮后，程序不会在 textview 中显示记录。为什么？首先我单击嵌套按钮所有工作然后我单击上一个按钮和“光标”转到上一个记录但不在文本视图中显示记录。

我解决了我的问题。我删除了方法：getNextdata() 和 getPrevData。

现在我的代码是：

Galeria.java:

```
public class Galeria extends Activity {

    public static long record = 1;
    PrzyslowiaArabskie info = new PrzyslowiaArabskie(this);

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.galeria);

        TextView tv = (TextView) findViewById(R.id.editText1);
        info.open();
        int irec = info.policz_rec();
        Toast.makeText(getApplicationContext(), " ilość przysłów w bazie " + irec, Toast.LENGTH_SHORT).show();
        String data = info.getData(record);
        info.close();
        tv.setText(data);

        Button bNastepny = (Button) findViewById(R.id.next);
        bNastepny.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                TextView tv = (TextView) findViewById(R.id.editText1);
                info.open();
                record++;
                String data = info.getData(record);
                info.close();
                tv.setText(data);

                }
        });
        Button bPoprzedni = (Button) findViewById(R.id.prev);
        bPoprzedni.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                TextView tv = (TextView) findViewById(R.id.editText1);
                info.open();
                record--;
                String data = info.getData(record);
                info.close();
                tv.setText(data);

                }
        });
    }
} 
```

我在 DB Helper 类中的方法：

```
public String getData(long record) {
        // TODO Auto-generated method stub
        record = Galeria.record;
        String[] columns = new String[] { KEY_ID, KEY_PRZYSLOWIE};
        Cursor c = myDatabase.query(TABLE_NAME, columns, KEY_ID + "=" + record, null, null, null, null);
        if (c != null) {
             c.moveToFirst(); 
             String data = c.getString(1);
             return data;
    }
        return null;

} 
```

我的所有按钮（下一个和前一个）都可以工作。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T19:01:40.470

如果不运行您的代码，您确定您没有忘记输入：

`info.open();`

和

`info.close();`

在上一个按钮的 onclick 监听器中？

如：

```
Button bPoprzedni = (Button) findViewById(R.id.prev);
    bPoprzedni.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            TextView tv = (TextView) findViewById(R.id.editText1);
            info.open();
            record--;
            String data = info.getPrevData(record);
            info.close();
            tv.setText(data);

        }
    }); 
```

====================================

如果这不能解决问题，您的 logcat 是否指示任何错误？如果不是，您是否绝对确定您正在从您的`getPrevData(record)`方法中检索字符串？您可以通过执行以下操作来检查：

```
String data = info.getPrevData(record);
Log.d("bPoprzedni", data); 
```

如果`data`LogCat 中没有显示，那么您就知道您没有正确地从数据库中获取它。

如果`data`出现在 LogCat 中，那么您缩小了问题范围，我们可以轻松地帮助您解决这部分问题 :)

# powershell - 如何为每个服务器名称输出单独的 CSV 文件

> ID：13366891
> 
> 赞同：1
> 
> 时间：2012-11-13T18:54:27.863
> 
> 标签：powershell, export, export-to-excel, export-to-csv, hotfix

我希望我的 PowerShell 脚本发送到远程服务器，收集修补程序数据，并将该数据导出到每台服务器的 Excel 或每台服务器的一个 Excel 工作表。

目前，当我运行脚本时，它会发送到`.txt`文件中列出的每个服务器并收集修补程序数据。但它会将该数据导出到一个 Excel 文件，其中包含所有服务器的名称。这是一个很长的名字！

这是脚本：

```
$scriptpath = $MyInvocation.MyCommand.Path
$dir = Split-Path $scriptpath
$Server_Name = Get-Content $dir\computers.txt
Get-HotFix -computername $Server_Name | Export-Csv -Path "$dir\$Server_Name HotFixData.csv" -notype 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:08:33.620

```
Get-Content $dir\computers.txt | Foreach-Object {
   Get-HotFix -ComputerName $_ | Export-Csv -Path "$dir\$($_)_HotFixData.csv" -notype
} 
```

# qt - 具有最大尺寸的小部件不遵循 AlignHCenter

> ID：13366892
> 
> 赞同：0
> 
> 时间：2012-11-13T18:54:33.153
> 
> 标签：qt, qt4

我有一个带有标签和 QGraphicsView 的垂直布局。我已经设置了 QGraphicsView 的最大尺寸，并将水平对齐设置为 AlignHCenter，但它似乎仍然出现在左侧而不是居中？这是一个演示 ui 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<ui version="4.0">
 <class>Form</class>
 <widget class="QWidget" name="Form">
  <property name="geometry">
   <rect>
    <x>0</x>
    <y>0</y>
    <width>400</width>
    <height>300</height>
   </rect>
  </property>
  <property name="windowTitle">
   <string>Form</string>
  </property>
  <layout class="QVBoxLayout" name="verticalLayout">
   <item>
    <widget class="QLabel" name="label">
     <property name="text">
      <string>TextLabel</string>
     </property>
     <property name="alignment">
      <set>Qt::AlignCenter</set>
     </property>
    </widget>
   </item>
   <item>
    <widget class="QGraphicsView" name="graphicsView">
     <property name="sizePolicy">
      <sizepolicy hsizetype="Expanding" vsizetype="Expanding">
       <horstretch>0</horstretch>
       <verstretch>0</verstretch>
      </sizepolicy>
     </property>
     <property name="maximumSize">
      <size>
       <width>100</width>
       <height>100</height>
      </size>
     </property>
    </widget>
   </item>
  </layout>
 </widget>
 <resources/>
 <connections/>
</ui> 
```

如果我更改标签的水平对齐方式，它的行为与我预期的一样（Left 将其移至左侧，而 AlignHCenter 将其移至中心），但 QGraphicsView 不遵循该行为 - 它始终位于左侧。

我如何将这个固定大小的 QGraphicsView 居中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:05:08.360

如果您将 QGraphicsView 包装在 QHBoxLayout 中，如图所示，那么它将像您期望的那样居中显示。如果您希望它与任一侧对齐，您可以在左侧或右侧插入一个水平垫片。

当QGraphicsView 有滚动条时，[alignment 属性控制它的行为，而不是它在 QLayout 中的相对位置。](http://doc-snapshot.qt-project.org/4.8/qgraphicsview.html#alignment-prop)

```
 <item>
    <layout class="QHBoxLayout" name="horizontalLayout">
     <item>
      <widget class="QGraphicsView" name="graphicsView">
       <property name="sizePolicy">
        <sizepolicy hsizetype="Expanding" vsizetype="Expanding">
         <horstretch>0</horstretch>
         <verstretch>0</verstretch>
        </sizepolicy>
       </property>
       <property name="maximumSize">
        <size>
         <width>100</width>
         <height>100</height>
        </size>
       </property>
      </widget>
     </item>
    </layout>
   </item> 
```

# c# - mvc3 如何在 razor 上读取通过连接两个表创建的列表？

> ID：13366893
> 
> 赞同：4
> 
> 时间：2012-11-13T18:54:33.183
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor

我有这个 mvc3 项目，我实际上正在学习，在这里我加入来自同一个数据库的 2 个表，但我不知道如何将它返回到视图，并且在视图上我不知道如何阅读它.

```
public ActionResult Index()
    {
        ViewBag.Message = "List of Domain Names already crawlered";
        domainNamesEntities de = new domainNamesEntities();

        var datos = from nombres in de.tableDomNames
                    join titulos in de.tableTitleNames on nombres.domName equals titulos.domName
                    select new { Dominio = nombres.domName, Titulo = titulos.titleN };

        return View(datos.ToList());
    } 
```

* * *

这是我的问题：

```
 @model ???????????????
       @{
             ViewBag.Title = "Index";
        }

        <h2>Index</h2>

      @foreach (var item in collection???????)
{

} 
```

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T18:58:49.243

变量*datos*具有匿名类型。虽然您可以将其传递到视图中，但您不能在视图中为模型指定强类型。

如果您需要强类型，请创建一个包含您的属性的辅助对象，例如

```
public class MyHelper
{
    public string Dominio { get; set; }
    public string Titulo { get; set; }
} 
```

并使用

```
select new MyHelper { Dominio = nombres.domName, Titulo = titulos.titleN }; 
```

然后在视图中指定

```
@model IEnumerable<MyHelper> 

@foreach (var item in Model) // or MyHelper item in Model 
```

# r - R DocumentTermMatrix 控制列表不起作用，默默地忽略未知参数

> ID：13366897
> 
> 赞同：8
> 
> 时间：2012-11-13T18:54:41.060
> 
> 标签：r, matrix, controls, term, tm

我有两个以下 DTM-s：

```
dtm <- DocumentTermMatrix(t)

dtmImproved <- DocumentTermMatrix(t, 
               control=list(minWordLength = 4, minDocFreq=5)) 
```

当我实现这个时，我看到两个相等的 DTM-s，如果我打开`dtmImproved`，会有带有 3 个符号的单词。为什么`minWordLength`参数不起作用？谢谢！

```
> dtm
A document-term matrix (591 documents, 10533 terms)

Non-/sparse entries: 43058/6181945
Sparsity           : 99%
Maximal term length: 135 
Weighting          : term frequency (tf)
> dtmImproved
A document-term matrix (591 documents, 10533 terms)

Non-/sparse entries: 43058/6181945
Sparsity           : 99%
Maximal term length: 135 
Weighting          : term frequency (tf) 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-13T23:45:19.610

```
dtmImproved <- DocumentTermMatrix(t, control=list(wordLengths=c(4, 15), 
                                   bounds = list(global = c(5,Inf)))) 
```

这解决了问题！缺乏适当的文档真的让我很沮丧（：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-08T04:37:16.593

如果可用，最好阅读源代码。阅读 wordcloud 函数@GitHub 的源代码，它是这么写的：
# Author: ianfellows
.....
if(min.freq > max(freq))
min.freq <- 0

因此，您的 DocumentTermMatrix 返回了您设置的 max(freq) < min.freq 界限，即没有出现的术语超过您设置的 min.freq 界限。

希望这有助于 MJJ

# php - 表单未传递 POST 数据

> ID：13366898
> 
> 赞同：1
> 
> 时间：2012-11-13T18:54:41.960
> 
> 标签：php, forms, variables, post, send

我遇到这个问题已经有一段时间了，这是我的表单的代码：

```
 <form action="site/Main.php" method="post">
        <p><label for="user" style="text-indent:415px;">User</label> <input type="text" name="user" /></p>
        <p><label for="password">Password</label> <input type="password" name="password" /></p>
        <p class="submit"><input type="submit" value="log in" /></p>
    </form> 
```

这个表单在我的 admin.php 页面上，我想将变量“user”和“password”传递给我的 site/main.php 页面，但是，当我尝试访问变量 php 告诉我它们不存在时，这是我在我的 site/main.php 页面上的代码：

```
 <?php
    if(isset($_POST)){
        if($_POST["user"] == "Project" && $_POST["password"] == "Project2012"){
            echo "Welcome!";
        } else{
            echo "Wrong username or password!";
        }
    }
    ?> 
```

而且我不断收到以下错误：

(!) 注意：未定义索引：第 10 行 C:\wamp\www\site\Main.php 中的用户

知道为什么 $_POST 变量似乎没有被发送到我的主页吗？

非常感谢您提前提供的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:06:49.673

使用 empty() 而不是 isset() 检查 $_POST 数组。此外，在尝试比较或使用之前，请务必检查数组的索引。

```
<?php
   if(!empty($_POST)){
     if(isset($_POST["user"])  && 
       isset($_POST["password"]) && 
       $_POST["user"] == "Project" && 
       $_POST["password"] == "Project2012"){
         echo "Welcome!";
     } else{
         echo "Wrong username or password!";
     }
 ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T19:07:25.613

是

> C:\wamp\www\site\Main.php

实际上正确的文件夹/文件？
正如其他用户提到的，您应该使用

```
if(isset($_POST['user'])) 
```

但是，您仍然在表单中使用 site/Main.php 作为路径。您发布的错误消息告诉我们 $_POST 数据正在发送到`C:\wamp\www\site\Main.php`- 您的文件在哪里？如果不是，那就是错误。

此致，

斯蒂芬·S。

**编辑：**如前所述，这实际上不可能是错误。我建议只是`var_dump($_POST);`或`print_r($_POST);`在你的 Main.php

**并且**：这实际上是您的代码吗？我的意思是在您的代码示例中，您的 Main.php 中甚至不存在第 10 行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T02:39:29.010

这很奇怪，但经过几次尝试，我所做的是改变：

```
 <form action="site/Main.php" method="post"> 
```

为了：

```
 <form action="Main.php" method="post"> 
```

它开始工作，然后我把它改回原来的形式，它继续工作。感谢大家的评论，他们都以不同的方式帮助我检查我的变量，感谢大家的帮助。

# sql - 如果为空，则替换值

> ID：13366899
> 
> 赞同：0
> 
> 时间：2012-11-13T18:54:58.843
> 
> 标签：sql

我不擅长 SQL，所以这个问题应该很容易回答:) 我有一个标题为的列`Grades`，所有值都是当前`NULL`。如果是，我想将该`Grades`列更新为“无数据”`NULL`

这是我到目前为止所拥有的：`Select (ISNULL(Grade, 'test')) From bleaTest`

先感谢您！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T18:56:36.533

```
UPDATE bleaTest SET Grades = 'No Data' WHERE Grades IS NULL; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T18:56:58.593

要更新表格，您可以这样做

```
UPDATE bleaTest
SET Grade = 'No data'
WHERE Grade is null; 
```

并选择

```
Select ISNULL(Grade, 'No Data') Grade From bleaTest 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T18:56:56.387

您可以使用以下 SQL 语句

```
UPDATE bleaTest set Grades = 'No Data' WHERE Grades IS NULL; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T18:58:00.693

这可能需要为您的设置进行定制，但如果您真的想更新表格，它看起来像

```
update theTable
set Grades = isnull(Grade, 'No Data') 
```

或者交替

```
update theTable
set grades = 'no data'
where grades is null 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T20:24:19.263

您可以如前所述进行更新：

```
UPDATE bleaTest SET Grades = 'No Data' WHERE Grades IS NULL; 
```

但是，如果您想防止新寄存器在该列中具有 NULL 值，您可以使用此代码来更改表：

```
ALTER TABLE bleaTest MODIFY Grades NOT NULL;
ALTER TABLE bleaTest ALTER  Grades SET DEFAULT 'No Data'; 
```

代码可能取决于您使用的数据库。

# entity-framework - LinqToExcel“字符串未被识别为有效的日期时间” - 如何捕获详细信息？

> ID：13366910
> 
> 赞同：0
> 
> 时间：2012-11-13T18:56:05.197
> 
> 标签：entity-framework, c#-4.0, linq-to-excel

我正在使用 LinqToExcel 将大型 Excel 数据表导入 SQL Server 数据库表Employees2。我正在使用 EF4。Excel 中的日期字段（DOB 和许多其他）采用“MMddyyyy”格式。我在 Excel 中有很多字段，我在这里只显示 1 个映射。

* * *

```
var excel = new ExcelQueryFactory(excelPath);
excel.AddMapping<Employee2>(x => x.DOB, "DOB", 
s => String.IsNullOrEmpty(s) ? DateTime.MinValue : 
DateTime.ParseExact(s, @"MMddyyyy", CultureInfo.CurrentCulture.DateTimeFormat));

var employees = excel.Worksheet<Employee2>("Sheet1").ToList();
employees.ForEach(e => context.Employee2.AddObject(e));
context.SaveChanges(); 
```

* * *

代码抛出异常“**字符串未被识别为有效的日期时间。** ”

在这行代码上： var employees = excel.Worksheet("Sheet1").ToList();

**我的问题是：我如何才能捕获确切导致异常的记录？**

例外没有说明哪条记录甚至哪个字段。

为了确保转换正常，我在命令窗口中运行：

```
DateTime.ParseExact("08012012", "MMddyyyy", CultureInfo.CurrentCulture.DateTimeFormat) 
```

**更新：**

自己找到了解决方案： [EF 异常：字符串或二进制数据将被截断。该语句已终止。？](https://stackoverflow.com/questions/13380972/ef-exception-string-or-binary-data-would-be-truncated-the-statement-has-been-t)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:56:48.710

您需要下载[LinqToExcel 的源代码](https://github.com/paulyoder/LinqToExcel)并使用源代码重新运行查询。然后您可以中断异常并查看导致问题的实际行和值。

# php - PHP在数组中搜索多个/重复值

> ID：13366912
> 
> 赞同：0
> 
> 时间：2012-11-13T18:56:08.910
> 
> 标签：php, mysql

我正在尝试使用一个单词在数组中出现的次数来更新数据库。如果 strpos 只有一次，我发现它可以作为一个函数工作 - 但是如果单词（'example'）被使用了三次，我希望返回的值是 3 - 而不是 'true'。

我当前的代码：

```
$count = mysql_real_escape_string($_POST['item_name']);

    if (strpos($count,'example') !== false) {

    mysql_query("UPDATE table SET value = value + 1 WHERE id = '1'");

    if (!mysql_query($sql)) {
        error_log(mysql_error());
        exit(0);
        }
    } 
```

我知道我的做法是错误的，但正确的方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T19:00:49.300

[preg_match_all](http://www.php.net/manual/en/function.preg-match-all.php)查找给定字符串中的所有模式匹配项，如果没有找到则返回 false。

```
$matches = array(); // Not Used
$count = implode('_',$yourArrayHere, $matches); // Compresses array to one big string
$found = preg_match_all('/example/', $count); // Searches that string.
if($found !== false && $found > 0) {
  mysql_query("UPDATE table SET value = value + ".(int)$found." WHERE id = '1'");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T19:01:03.087

怎么样：

```
$map = array();

for($array as $key)
{
    if(isset($map[$key]))
    {
        $map[$key] = $map[$key] + 1;
    }
    else
    {
        $map[$key] = 1;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T19:09:24.463

preg_match_all() 应该给你你正在寻找的答案。

```
$itemName = preg_quote(implode(' ', $_POST['item_name']));

$searchWord = 'example';
$numMatches = preg_match_all("/\b$searchWord\b/", $matches); //$matches is filled with the results

mysql_query("UPDATE table SET value = value + $numMatches WHERE id = '1'"); 
```

我不确定您为什么在示例中调用 mysql_real_escape_string() 。$itemName 永远不会注入到 SQL 中，因此没有必要让它成为 SQL 安全的。我用 preg_quote() 替换了转义调用，它转义了正则表达式的特殊字符。

# ios - 我有父/子视图控制器，但 UITableViewController 有点像 Child VC 的生涩。

> ID：13366914
> 
> 赞同：1
> 
> 时间：2012-11-13T18:56:10.330
> 
> 标签：ios, performance, ipad, uikit, uitableview

最好通过图片显示应用程序的外观，我创建了一个自定义选项卡父控制器来处理每个选项卡： ![在此处输入图像描述](../Images/8cd4faac30ab8c922afab6e2eb4257e7.png)

现在，这个表格视图控制器非常简单，我有 500 行，并且我正在重用单元格：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell==nil) {
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

    }

    // Configure the cell...
    cell.textLabel.text = @"TESTING";

    return cell;
} 
```

但是，当我运行它时，在模拟器中（尚未在设备上测试过），滚动视图在我滚动时非常烦人，**尤其是**当它变慢时。当我只是将 TableViewController 作为主 VC 运行时，它的性能要好得多，而且我几乎没有注意到任何抽搐。是否需要调整 tablviewcontroller 以使其作为子视图控制器更好地执行？是我对父/子 VC 的实施搞砸了吗？

任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:27:38.790

好吧，我在设备上对其进行了测试，一切似乎都很好，我认为模拟器的图形很差。我将进行更多测试和研究以找出原因，但我很高兴它起作用了。

# iphone - iOS 推送通知标记

> ID：13366918
> 
> 赞同：0
> 
> 时间：2012-11-13T18:56:17.673
> 
> 标签：iphone, ios, apple-push-notifications, voip

我有一个始终在后台运行的 iOS voip 应用程序。我已经成功实现了推送通知，并且能够通过 didReceiveRemoteNotification 方法标记应用程序图标。但是，如果应用程序在通知到达时完全打开，我只会在图标上看到一个徽章。然后关闭应用程序会生成一个代表当前徽章计数的徽章。

该应用程序永远不会运行，因此我尚未确定在这种情况下收到通知时是否会标记该图标。

当应用程序在后台运行（几乎所有时间）并收到通知时，用户会看到默认通知横幅保持可见约 5 秒，然后消失。此时，用户查看通知的唯一方法是前往通知中心（从屏幕顶部向下滑动）。该图标永远不会被标记。

首先，这是正常行为吗？如果是这样，有什么方法可以在后台运行时获得图标标记？

# javascript - 如何将 javascript 函数添加到具有多个框架的网页？

> ID：13366933
> 
> 赞同：2
> 
> 时间：2012-11-13T18:56:55.310
> 
> 标签：javascript, ios, frames

一个网页可以有多个框架，每个框架都有自己的文档。如何向其中一个框架添加（和调用）javascript？例如，

```
[webView stringByEvaluatingJavaScriptFromString:@"var script=frame1.document.createElement('script');"
 "script.type='text/javascript';"
 "script.text=\"function myFunc() {"
 "var test='a test';"
 "return test"
 "}\";"
 "frame1.document.getElementsByTagName('head')[0].appendChild(script);"]; 
```

我这样调用函数吗

```
NSString *str=[webView stringByEvaluatingJavaScriptFromString:@"frame1.document.myFunc();"]; 
```

或这个？

```
NSString *str=[webView stringByEvaluatingJavaScriptFromString:@"myFunc()"]; 
```

顺便说一句，似乎没有一个工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T23:42:45.237

你有没有尝试过这样的事情？（将*frameNumber*替换为实际数字）：

```
NSString *script = @"window.frames[*frameNumber*].myFunc();"
NSString *str=[webView stringByEvaluatingJavaScriptFromString:script]; 
```

# jsf - JSF过滤器在初始重定向后不重定向

> ID：13366936
> 
> 赞同：8
> 
> 时间：2012-11-13T18:56:59.717
> 
> 标签：jsf, authentication, redirect, servlet-filters

我正在尝试设置网络过滤器并需要一些帮助。我的过滤器在初始登录时工作正常，但是当会话超时并且我单击任何链接时，它会触发我的重定向语句，但浏览器中的网页永远不会被重定向。任何人都可以帮助解决这个问题吗？非常感激。

筛选

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package src;

import java.io.IOException;
import javax.faces.application.NavigationHandler;
import javax.faces.context.FacesContext;
import javax.servlet.Filter;
import javax.servlet.FilterChain;
import javax.servlet.FilterConfig;
import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;
import javax.servlet.annotation.WebFilter;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

/**
 *
 * @author Bernard
 */
@WebFilter(filterName = "LoginFilter", urlPatterns = {"/*"})
public class LoginFilter implements Filter {

    //FilterConfig fc;

    @Override
    public void init(FilterConfig filterConfig) throws ServletException {
        //fc = filterConfig;
    }

    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
        HttpServletRequest req = (HttpServletRequest) request;
        HttpServletResponse res = (HttpServletResponse) response;
        HttpSession session = req.getSession(true);
        String pageRequested = req.getRequestURL().toString();
        Boolean authenticated = (Boolean) session.getAttribute("authenticated");

        if (authenticated == null) {
            authenticated = false;
        }
        if (!authenticated && !pageRequested.contains("login")) {     
            res.setStatus(301);
            res.sendRedirect(req.getContextPath() + "/login/login.xhtml");                        
        } else {
            chain.doFilter(request, response);
        }
    }

    @Override
    public void destroy() {
        //fc = null;
    }
} 
```

Faces-config.xml

```
<?xml version='1.0' encoding='UTF-8'?>

<!-- =========== FULL CONFIGURATION FILE ================================== -->

<faces-config version="2.1"
              xmlns="http://java.sun.com/xml/ns/javaee"
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_1.xsd">

    <navigation-rule>
        <from-view-id>/*</from-view-id>

        <navigation-case>
            <from-outcome>success</from-outcome>
            <to-view-id>/index.xhtml</to-view-id>
            <redirect/>
        </navigation-case>

        <navigation-case>
            <from-outcome>failure</from-outcome>
            <to-view-id>/login/login.xhtml</to-view-id>
            <redirect/>
        </navigation-case>
    </navigation-rule>
</faces-config> 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>
    <servlet>
        <servlet-name>FacesServlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>FacesServlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>/index.xhtml</welcome-file>
    </welcome-file-list>
    <filter>
        <filter-name>restrict</filter-name>
        <filter-class>src.LoginFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>restrict</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>  
</web-app> 
```

验证 Bean

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package src;

import java.math.BigInteger;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;
import java.util.Map;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import javax.faces.context.ExternalContext;
import javax.faces.context.FacesContext;
import javax.servlet.ServletRequest;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpSession;

/**
 *
 * @author Bernard
 */
@ManagedBean
@SessionScoped
public class Authenticator {

    private String username;
    private String password;

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public String authenticateUser(ServletRequest request) {
        HttpServletRequest req = (HttpServletRequest) request;
        HttpSession session = req.getSession(true);
        session.setMaxInactiveInterval(30);
        Boolean authenticated = (Boolean) session.getAttribute("authenticated");

        Database pgDatabase = new Database();
        Admin foundAdmin = null;
        try {
            foundAdmin = (Admin) pgDatabase.findAdminByUsername(username);
        } catch (ClassNotFoundException ex) {
            Logger.getLogger(Authenticator.class.getName()).log(Level.SEVERE, null, ex);
        }

        Admin currentAdmin = new Admin();
        currentAdmin.userName = username;
        currentAdmin.password = this.hashPassword((password));
        if (authenticated != null && authenticated != true) {
            if (foundAdmin != null) {
                if (currentAdmin.equals(foundAdmin)) {
                    authenticated = true;
                    session.setAttribute("authenticated", true);
                    return "success";
                } else {
                    authenticated = false;
                    session.setAttribute("authenticated", false);
                    return "failure";
                }
            } else {
                authenticated = false;
                session.setAttribute("authenticated", false);
                return "failure";
            }
        } else {
            session.setAttribute("authenticated", true);
            authenticated = true;
            return "success";
        }
    }

    public String logOut() {
        FacesContext ctx = FacesContext.getCurrentInstance();
        ExternalContext extCtx = ctx.getExternalContext();
        Map<String, Object> sessionMap = extCtx.getSessionMap();
        sessionMap.put("authenticated", false);
        return "failure";
    }

    public String hashPassword(String passwordToHash) {
        String hashword = null;
        try {
            MessageDigest md5 = MessageDigest.getInstance("MD5");
            md5.update(password.getBytes());
            BigInteger hash = new BigInteger(1, md5.digest());
            hashword = hash.toString(16);
        } catch (NoSuchAlgorithmException nsae) {
        }
        return hashword;
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-13T22:08:51.110

您的过滤器看起来不错（除了非常弱的`url.contains("login")`测试和两种方式不正确的尝试将响应状态设置为 301 以及检查登录用户的方式有点差）。

我认为您的具体问题是由于您通过 ajax 链接而不是普通链接执行导航。您不能以这种方式在 ajax 响应上发送重定向。JSF ajax 引擎和 webbrowser 都不遵循 JSF ajax 响应的 302 重定向。客户端最终得到一个完全被忽略的 ajax 响应。

相反，您应该发送一个特殊的 XML 响应，指示 JSF ajax 引擎发送重定向。正是在 JSF 上下文中发送的 XML 响应[`ExternalContext#redirect()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#redirect%28java.lang.String%29)在 ajax 请求期间被使用。

```
<?xml version="1.0" encoding="UTF-8"?>
<partial-response>
    <redirect url="/contextpath/login/login.xhtml"></redirect>
</partial-response> 
```

因此，在 servlet 过滤器中，您应该首先检查请求是否涉及 JSF ajax 请求，如果是，则返回上述 XML 响应，否则只需调用`HttpServletResponse#sendRedirect()`通常的方式。您可以通过检查`Faces-Request`请求标头是否存在并且等于`partial/ajax`.

```
if ("partial/ajax".equals(request.getHeader("Faces-Request"))) {
    // It's a JSF ajax request.
} 
```

所以，总而言之，你`doFilter()`现在应该看起来像这样：

```
String loginURL = req.getContextPath() + "/login/login.xhtml";

if (!authenticated && !req.getRequestURI().equals(loginURL)) {
    if ("partial/ajax".equals(request.getHeader("Faces-Request"))) {
        res.setContentType("text/xml");
        res.getWriter()
            .append("<?xml version=\"1.0\" encoding=\"UTF-8\"?>")
            .printf("<partial-response><redirect url=\"%s\"></redirect></partial-response>", loginURL);
    } else {
        res.sendRedirect(loginURL);
    }
} else {
    chain.doFilter(request, response);
} 
```

# javascript - 可过滤的多选组合框穿梭/转移小部件

> ID：13366940
> 
> 赞同：14
> 
> 时间：2012-11-13T18:57:26.223
> 
> 标签：javascript, jquery, combobox, filter, widget

# 背景

我正在寻找一个允许用户过滤源列表的基于 jQuery 或 JavaScript 的组合框穿梭小部件。源列表是一个组合框（左侧），目标列表是第二个组合框（右侧）。

# 小样

小部件应类似于：

![小样](../Images/5f36108daa269a43312c82635ccfb38f.png)

现有的 jQuery[小部件](https://github.com/rabihkodeih/bootstrap-transfer)：

![引导转移](../Images/1b835a8252e16a2ac084da0a273dbe0d.png)

# 用法

用户可以：

1.  键入正则表达式以过滤源列表（例如，`Toy.*`）。
    *   小部件隐藏所有与过滤器表达式不匹配的项目。
2.  在源列表中选择一个或多个项目（使用单击、控制单击和 shift 单击选择）。
3.  单击 将`>>`项目从源列表传输到目标列表。
4.  清除过滤器以显示完整的源列表。

# 技术的

理想情况下，组合框将使用多选 HTML 组合框，并且标记很简单：

```
<select name="sourceList" id="sourceList" size="20" multiple="multiple">
  <option value="1">Toyota</option>
  <option value="2">Mitsubishi</option>
  <option value="3">Nintendo</option>
  <option value="4">Samsung</option>
  <option value="5">Bank of Kyoto</option>
</select>

<select name="destinationList" id="destinationList" size="20" multiple="multiple">
  <option value="6">Mazda</option>
  <option value="7">Fuji</option>
  <option value="8">Honda</option>
</select>

<script>
  $('#sourceList').shuttle();
</script> 
```

# 发现

这些很接近：

*   [http://archive.plugins.jquery.com/project/crossSelect](http://archive.plugins.jquery.com/project/crossSelect) - 无过滤器
*   [http://quasipartikel.at/multiselect/](http://quasipartikel.at/multiselect/) - 不允许多选
*   [http://blog.jeremymartin.name/2008/02/easy-multi-select-transfer-with-jquery.html](http://blog.jeremymartin.name/2008/02/easy-multi-select-transfer-with-jquery.html) - 无过滤器
*   [http://davidwalsh.name/demo/multi-select.php](http://davidwalsh.name/demo/multi-select.php) - 使用 MooTools；没有过滤器
*   [http://devblog.jasonhuck.com/assets/comboselect/](http://devblog.jasonhuck.com/assets/comboselect/) - 没有过滤器
*   [http://www.dhtmlgoodies.com/index.html?whichScript=multiple_select](http://www.dhtmlgoodies.com/index.html?whichScript=multiple_select) - 无过滤器
*   [http://blog.cbolson.com/expanding-multiple-select-list-with-search-filter/](http://blog.cbolson.com/expanding-multiple-select-list-with-search-filter/) - MooTools

这些几乎是完美的：

*   [https://github.com/rabihkodeih/bootstrap-transfer](https://github.com/rabihkodeih/bootstrap-transfer) - 使用`div`标签（而不是`<select>`）？
*   [http://www.senamion.com/blog/jmultiselect2side.html](http://www.senamion.com/blog/jmultiselect2side.html) - 没有正则表达式搜索
*   [http://mind2soft.com/labs/jquery/multiselect/](http://mind2soft.com/labs/jquery/multiselect/) - 没有正则表达式搜索

我正在寻找批量分配 3000 - 5000 个项目的类别，并认为这将是完成这一壮举的快速方法。（日本公司名称纯属虚构；实际上，这些名称通常会有一个共同的单词或短语。）

# 问题

什么是满足这些要求的免费开源小部件（jQuery 或纯 JavaScript）？

# 有关的

相关链接：

*   [带有 Twitter 引导主题的多选两列传输小部件](https://stackoverflow.com/questions/11165884/multiselect-two-column-transfer-widget-with-twitter-bootstrap-theme)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-18T07:49:16.367

一个不错的 jquery/bootstrap 插件（多选，两个窗格，使用正则表达式过滤）：

引导双列表框： http: [//www.virtuosoft.eu/code/bootstrap-duallistbox/](http://www.virtuosoft.eu/code/bootstrap-duallistbox/)

# objective-c - 如何在 Facebook 上创建活动？

> ID：13366945
> 
> 赞同：0
> 
> 时间：2012-11-13T18:57:56.730
> 
> 标签：objective-c, ios, facebook

我正在尝试创建一个活动，但我阅读的所有教程都已过时或不再有效。

```
[FBRequest
 startWithGraphPath:@"me/events"
 parameters:params
 HTTPMethod:@"POST"
 completionHandler:^(FBRequestConnection *connection,
                   id result,
                     NSError *error) {
     if (error) {
         NSLog(@"Error: %@", result);
     } else {
         NSLog(@"Success: %@", result);
     }
 }]; 
```

调用完成处理程序，但出现 HTTP 错误 #403。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:31:18.003

如果完成处理程序返回 HTTP/403 Forbidden，则您的身份验证有问题。您的 Facebook 会话可能无效，或者根本没有打开。请查看[Facebook iOS SDK 教程](https://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/)以了解如何建立有效会话。本质上你应该做这样的事情：

```
static NSString *PublishStreamPermission = @"publish_stream";
[FBSession
    openActiveSessionWithPublishPermissions:@[PublishStreamPermission]
    defaultAudience:FBSessionDefaultAudienceEveryone allowLoginUI:YES
    completionHandler:^(FBSession *session, FBSessionState status, NSError *error) {
        if ([session state] != FBSessionStateOpen) {
            // failed to open a valid session
        } else if ([[session permissions] containsObject:PublishStreamPermission]) {
            // session opened, permissions granted, now you can post
        } else {
            // session opened, but requested permissions not granted
        }
}]; 
```

# ruby - 我们应该使用 https 来请求嵌入 soundcloud 播放器吗？

> ID：13366951
> 
> 赞同：0
> 
> 时间：2012-11-13T18:58:14.987
> 
> 标签：ruby, soundcloud

我使用 Soundcloud API 的应用程序今天突然停止正确嵌入小部件。我尝试通过如下嵌入链接访问显示小部件的 url： [http ://w.soundcloud.com/player/?url=https%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F67072574&show_artwork= true&show_artwork=false&show_bpm=true&show_comments=true&download=true&maxwidth=440px&maxheight=160px&client_id=61628c1d0518b32eef1d403bb5a4a7a5](http://w.soundcloud.com/player/?url=https%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F67072574&show_artwork=true&show_artwork=false&show_bpm=true&show_comments=true&download=true&maxwidth=440px&maxheight=160px&client_id=61628c1d0518b32eef1d403bb5a4a7a5)

它是空白的，我在控制台中注意到了这个错误：

`XMLHttpRequest cannot load http://api.soundcloud.com/tracks/66977856?client_id=0f8fdbbaa21a9bd18210986a7dc2d72c&format=json. Origin http://w.soundcloud.com is not allowed by Access-Control-Allow-Origin.`

检查嵌入播放器的其他网站，我看到了同样的问题（在 Chrome 上）。

我在他们的[状态博客](http://status.soundcloud.com/post/35606705422/outage-update)上看到他们今天遇到了一些服务器问题，也许这是一个副作用，因为直到今天一切正常。

无论如何，我还注意到，如果我在 iframe src 中使用[https://w.soundcloud.com](https://w.soundcloud.com)而不是 'http://' 来嵌入正确显示的播放器。因此我通过做`puts embed_info['html'].gsub("http://w","https://w")`而不是推荐的来解决它`puts embed_info['html']`。

我想知道我是否应该首先使用`https`，或者这是他们需要解决的问题。

# c++ - C++ 非静态成员引用

> ID：13366952
> 
> 赞同：1
> 
> 时间：2012-11-13T18:58:23.583
> 
> 标签：c++, non-static

我有一个`Character .h/.cpp`，一个`Enemy .h/.cpp`和一个`Driver`

如果我将字符传递给一个函数`Enemy`，我有

```
ENEMY.CPP: void Enemy::enemyAttack(Character *character)
{ //whatever needs to be done } 
```

效果很好。

但是回到我的驱动程序，如果我这样做：

```
Character *character = new Character();
Enemy::enemyAttack(character); 
```

我收到以下错误消息：“非静态成员引用必须相对于特定对象。” 字符不是特定的对象吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T19:00:43.793

不，错误是在谈论 Enemy 对象。要调用非静态 Enemy 方法，您必须有一个 Enemy 对象。

```
Enemy en;
en.enemyAttack(character); 
```

想一想，当你写

```
Enemy::enemyAttack(character); 
```

攻击的是哪个敌人？没有一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T19:00:06.480

`enemyAttack`是 的非静态成员函数`Enemy`。这意味着您需要一些`Enemy`对象来调用它。目前您正试图将其称为静态函数。你需要这样的东西：

```
Enemy monster;
monster.enemyAttack(character); 
```

通常，你会简单地命名你的函数`attack`，因为它已经是`Enemy`. 你会发现它读起来更好：

```
Enemy monster;
monster.attack(character); 
```

# javapos - JavaPOS、POS for .NET 和 OPOS 之间的桥梁

> ID：13366953
> 
> 赞同：3
> 
> 时间：2012-11-13T18:58:30.493
> 
> 标签：javapos, pos-for-.net

我目前正在开发虚拟设备作为服务对象（就 UnifiedPOS 而言），旨在在 Windows、Linux（可能还有其他系统）下工作。他们使用的语言是Java（因为现有的JavaPOS，并且是跨平台的）。

解决方案是将 SO 方法调用从特定于瘦平台的 SO（我们称之为客户端）代理到实际的 SO 实现——服务器。目前我期待使用 Google 的协议缓冲区，但它让我自己实现双方。

**问题**：是否有一些已经存在的解决方案？

任何可以通过网络将 SO 从 CO 中分离出来的东西都会消失。

[提前致谢。]

# android - Mediaplayer 错误 (-38,0) ，在状态 4 中调用停止

> ID：13366962
> 
> 赞同：8
> 
> 时间：2012-11-13T18:59:19.853
> 
> 标签：android, android-mediaplayer

结果是前两首歌曲播放得很好，但其他歌曲没有播放，几乎没有播放到最后一首歌曲！

播放流的代码（有效）：

```
 private void PlayStream(String url)
{
    try 
    {
        mediaPlayer.setDataSource(url);
    }
    catch (IllegalArgumentException e) 
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    catch (SecurityException e) 
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    catch (IllegalStateException e) 
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    catch (IOException e) 
    {
        //  TODO Auto-generated catch block
        e.printStackTrace();
    }

    mediaPlayer.setOnPreparedListener(Canzone.this);

    try 
    {
        mediaPlayer.prepareAsync();
    }
    catch (IllegalStateException e) 
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }               

    progressBar.setVisibility(ProgressBar.VISIBLE);
    progressBar.setProgress(0);
    progressBar.setMax(duration);

    new Thread(this).start();
} 
```

SETONCOMPLETELISTENER 的规格：

```
mediaPlayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener() 
    {   
        @Override
        public void onCompletion(MediaPlayer mp) 
        {
            i++;

            if(i<10)
            {   
                classifica.setText("Canzoni riprodotte: "+String.valueOf(i+1)+"/10 \nPunteggio: "+punteggio);

                mp.stop();  
                Log.d("MPLAY", "MP Stopped");

                mp.reset();
                Log.d("MPLAY", "MP Reset");

                PlayStream(dieciCanzoni.get(i).get(0));

                tv.setText(dieciCanzoni.get(i-1).get(1) + "\n" + dieciCanzoni.get(i-1).get(2));

                new DownloadImageTask((ImageView) findViewById(R.id.albumImage)).execute(dieciCanzoni.get(i-1).get(4));

                iv.setOnClickListener(new View.OnClickListener() 
                {       
                    @Override
                    public void onClick(View v) 
                    {
                        Intent intent = new Intent(Intent.ACTION_VIEW,Uri.parse(dieciCanzoni.get(i-1).get(3)));
                        startActivity(intent);
                    }
                });
            }
            else
            {
                FineRound();
            }
        }
    }); 
```

日志猫：

```
11-13 19:42:47.835: D/MPLAY(1981): MP Started 
11-13 19:43:17.915: D/MPLAY(1981): MP Stopped
11-13 19:43:17.935: D/MPLAY(1981): MP Reset
11-13 19:43:17.940: E/MediaPlayer(1981): error (-38, 0)
11-13 19:43:17.990: E/MediaPlayer(1981): Error (-38,0)
11-13 19:43:17.990: E/MediaPlayer(1981): stop called in state 4
11-13 19:43:17.995: E/MediaPlayer(1981): error (-38, 0)
11-13 19:43:17.995: D/MPLAY(1981): MP Stopped
11-13 19:43:18.235: D/MPLAY(1981): MP Reset
11-13 19:43:18.235: E/MediaPlayer(1981): error (-38, 0)
11-13 19:43:18.270: E/MediaPlayer(1981): Error (-38,0)
11-13 19:43:18.285: E/MediaPlayer(1981): stop called in state 4
11-13 19:43:18.285: E/MediaPlayer(1981): error (-38, 0)
11-13 19:43:18.295: D/MPLAY(1981): MP Stopped
11-13 19:43:18.450: D/MPLAY(1981): MP Reset
11-13 19:43:18.450: E/MediaPlayer(1981): error (-38, 0)
11-13 19:43:18.470: E/MediaPlayer(1981): Error (-38,0)
11-13 19:43:18.475: E/MediaPlayer(1981): stop called in state 4
11-13 19:43:18.475: E/MediaPlayer(1981): error (-38, 0)
11-13 19:43:18.475: D/MPLAY(1981): MP Stopped
11-13 19:43:18.690: D/MPLAY(1981): MP Reset
11-13 19:43:18.690: E/MediaPlayer(1981): error (-38, 0)
11-13 19:43:18.735: E/MediaPlayer(1981): Error (-38,0)
11-13 19:43:18.735: E/MediaPlayer(1981): stop called in state 4
11-13 19:43:18.740: E/MediaPlayer(1981): error (-38, 0)
11-13 19:43:18.740: D/MPLAY(1981): MP Stopped
11-13 19:43:19.105: D/MPLAY(1981): MP Reset
11-13 19:43:19.105: E/MediaPlayer(1981): error (-38, 0)
11-13 19:43:19.185: E/MediaPlayer(1981): Error (-38,0)
11-13 19:43:19.185: E/MediaPlayer(1981): stop called in state 4
11-13 19:43:19.190: E/MediaPlayer(1981): error (-38, 0)
11-13 19:43:19.190: D/MPLAY(1981): MP Stopped
11-13 19:43:19.680: D/MPLAY(1981): MP Reset
11-13 19:43:19.680: E/MediaPlayer(1981): error (-38, 0)
11-13 19:43:19.780: E/MediaPlayer(1981): Error (-38,0)
11-13 19:43:19.800: E/MediaPlayer(1981): stop called in state 4
11-13 19:43:19.800: E/MediaPlayer(1981): error (-38, 0)
11-13 19:43:19.800: D/MPLAY(1981): MP Stopped
11-13 19:43:20.010: D/MPLAY(1981): MP Reset
11-13 19:43:20.015: E/MediaPlayer(1981): error (-38, 0)
11-13 19:43:20.130: E/MediaPlayer(1981): Error (-38,0)
11-13 19:43:20.130: E/MediaPlayer(1981): stop called in state 4
11-13 19:43:20.135: E/MediaPlayer(1981): error (-38, 0)
11-13 19:43:20.135: D/MPLAY(1981): MP Stopped
11-13 19:43:20.330: D/MPLAY(1981): MP Reset
11-13 19:43:20.330: E/MediaPlayer(1981): error (-38, 0)
11-13 19:43:20.365: E/MediaPlayer(1981): Error (-38,0)
11-13 19:43:22.105: D/MPLAY(1981): MP Started
11-13 19:43:25.590: W/IInputConnectionWrapper(1981): showStatusIcon on inactive InputConnection
11-13 19:43:25.615: D/OpenGLRenderer(1981): Flushing caches (mode 0)
11-13 19:43:26.140: D/OpenGLRenderer(1981): Flushing caches (mode 1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T10:57:35.667

使用 3GP 视频文件将正常工作...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-15T10:44:46.067

是的，我总是可以提供帮助。我也遇到了这个错误，我的解决方案是检查 ANDROID MEDIA PLAYER 接收到的路径。所以要做到这一点粘贴此代码：

```
Log.d("MediaPlayer Datasource" , "The datasource is: " + url); 
```

检查网址是否正确并包含扩展名。确保它不受域保护。

如果一切正常，请粘贴以下代码：

```
mp.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {
    @Override
    public void onPrepared(MediaPlayer mp) {
        // TODO Auto-generated method stub

        mediaPlayer.start();

    }
}); 
```

我知道你们都准备好了，但也许它不起作用。

# objective-c - 查看 NSUserDefaults 文件内容

> ID：13366967
> 
> 赞同：3
> 
> 时间：2012-11-13T18:59:45.700
> 
> 标签：objective-c, xcode, nsuserdefaults

有什么办法可以看到 NSUserDefaults 的内容吗？我可以从终端使用“pico”打开 plist 文件，但它显示奇怪的字符，我实际上看不到内容文件的内容。有什么办法可以在 Xcode 中打开文件吗？

基本上，我希望能够查看和编辑 NSUserDefaults 的内容，而无需以编程方式执行此操作，我想从终端或 Xcode 执行此操作。干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T19:11:26.723

您可以使用 defaults 命令行工具轻松访问 UserDefaults。

```
defaults read <domain> <key>
defaults write <domain> <key> <value> 
```

如果需要，您还可以删除密钥或整个域（捆绑 ID）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T19:08:45.873

> 我可以使用“pico”打开文件，但它显示奇怪的字符。

因为作为优化（存储空间和读/写速度）iOS 以二进制格式存储属性列表文件。您需要使用将其转换为 XML 格式

```
plutil -convert xml1 com.yourapp.bundleid.plist 
```

在此之后，您将能够在文本编辑器（例如 Pico）中打开时看到有意义的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T21:10:12.953

您也可以在 Xcode 中打开该文件。只需双击它即可在 Xcode 中打开它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T21:21:26.340

从 Mac OS X 10.8 开始，直接编辑用户默认文件的内容很可能会随机失败。您必须使用 defaults 命令、NSUserDefaults API 或 CFPreferences API。

# css - 输入类型文本和输入类型按钮之间的间隙

> ID：13366969
> 
> 赞同：0
> 
> 时间：2012-11-13T18:59:51.833
> 
> 标签：css

我会再次将其显示为图像:) ![在此处输入图像描述](../Images/4a6857a25e75174de90c2b9540e21725.png)

我正在设计一个搜索框，但我遇到了奇怪的错误。我的目标是让输入框和设置按钮看起来像一个。所以我用边框设计了它们。如果这两个元素之间没有间隙的话，它看起来还可以。而且按钮比输入框小 2px。这是我的CSS

```
form#search
{
}
input[type=text]
{
  width: 400px;
  border-top: 1px solid rgb(217, 217, 217);
  border-right: none;
  border-bottom: 1px solid rgb(217, 217, 217);
  border-left: 1px solid rgb(217, 217, 217);
  height: 50px;
}
input[type=button]
{
  font-family: 'WebSymbolsRegular';
  width: 40px;
  border-top: 1px solid rgb(217, 217, 217);
  border-right: 1px solid rgb(217, 217, 217);
  border-bottom: 1px solid rgb(217, 217, 217);
  border-left: none;
  background: white;
  height: 50px;
}
input[type=submit]
{
  font-family: 'WebSymbolsRegular';
  height: 50px;
} 
```

这是 sachleen 要求的 html。这里没什么特别的。。

```
<form id="search">
    <input type="text" name="search" placeholder="search" tabindex="1"/>
    <input type="button" value="S" tabindex="3"/>
    <input type="submit" value="L" tabindex="2"/>
</form> 
```

我没有制定任何规则来弥补这些差距。添加边距或填充：0，没有任何改变。我也在使用 Eric Meyer 的“Reset CSS”2.0 来重置 CSS。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T11:01:31.450

这对我有用

```
form {
  border: 1px solid rgb(217, 217, 217);
  width: 598px;
  background: green;
  font-size:0;  

  input {
    padding: 0px;
    border: 0px;
    font-size:18px; 
    height: 30px;
    background: white; 
  }
  input[type='text'] {
    width: 498px;
  }
  input[type='button'], input[type='submit'] {
    width: 50px;
  }
} 
```

找到终极解决方案！并且在所有浏览器上都一样。键 - font-size: 0 on parent ontainer（在本例中为表单），将填充设置为 0px，并且所有输入的高度相同。我将表单宽度设置为 598（+2 * 1 px 边框），我可以将输入宽度设置为总和 598。现在我不需要使用花哨的 display: box 和 float: left 来打破一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T19:13:56.093

您正在尝试将两种不同的输入类型合并为一种，文本和按钮。它们具有不同的自定义属性，因此肯定会出现布局问题。也就是说，您可以使用按钮上的边距值来调整它们，但它不会跨浏览器兼容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T19:15:30.750

做了一些作弊（给了按钮 2px 额外），但这相当有效，除了那些用于设置/搜索的图像：

[http://jsfiddle.net/JLuyL/](http://jsfiddle.net/JLuyL/)

关键在于`display`CSS 中的属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-03T16:38:26.220

你想多了！

```
<form id="search">
    <input type="text" name="search" placeholder="search" tabindex="1"/><input type="button" value="S" tabindex="3"/><input type="submit" value="L" tabindex="2"/>
</form> 
```

内联元素在代码中看到空白。从字面上看，上面删除了空格。

有关更多信息，请参见此处：[https ://css-tricks.com/fighting-the-space-between-inline-block-elements/](https://css-tricks.com/fighting-the-space-between-inline-block-elements/)

# c++ - 使用 `memmove` 删除 std::string 的第一个字符

> ID：13366970
> 
> 赞同：1
> 
> 时间：2012-11-13T18:59:56.320
> 
> 标签：c++, string, compiler-errors

我想使用删除字符串的第一个字符`memmove`

例如，a`std::string`可能包含：

`./Folder/File.txt`

我想删除`.`

我在做：

```
if (newStr[0] == '.')
{
    memmove(newStr, newStr+1, strlen(newStr));
} 
```

并得到一个错误：`error: no match for 'operator+' in 'newStr + 1'`

我犯了什么错误？

更新：哦，我想我应该使用`char*`这个不会在`std::string`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T19:03:05.380

看起来你的 newStr 是一个 std::string，在这种情况下你应该使用 newStr.erase(0,1);

有关擦除的更多信息，请参阅[此站点](http://www.cplusplus.com/reference/string/string/erase/)

`memmove`仅当您直接处理缓冲区（char* 或 char[]）时才有效。如果您的类型是 std::string，请使用适用于它的函数（擦除）并且不要尝试`memmove`c_str。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T19:08:48.363

绝对不要为此使用 memmove。您假设您知道 std::string 的存储结构，并且您假设实现不是在多个 std::string 对象之间共享存储等。这些假设会给您带来痛苦和悲伤（和错误）。

# objective-c - 是否可以在运行时检测到您的 iOS 应用程序正在 iPad mini 上运行？

> ID：13366976
> 
> 赞同：13
> 
> 时间：2012-11-13T19:00:29.773
> 
> 标签：objective-c, ios, ipad, cocoa-touch, ipad-mini

在运行时检测不同的硬件对于分析很有用（除此之外，甚至更可疑的目的）。

许多 iOS 应用程序创建者可能想知道有多少用户在 iPad mini 上体验他们的应用程序（而不是仅仅知道有多少用户在屏幕分辨率为 1024x768 的 iPad 上体验他们的应用程序——这也很有趣）。

是否有任何公共 API`Cocoa touch/UIKit/ObjC/C`可用于检测您的 iOS 应用程序在运行时是否在 iPad mini 上运行？理想情况下，此方法应区分 iPad 2 和 iPad mini（像素数相同，但像素密度不同）。

* * *

Post Script：我意识到很多人会认为在运行时检测 iPad mini 是个坏主意。但是，我认为这是一个有效的问题，有明确的“是”或“否”答案。我认为社区知道的答案很有用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T19:34:15.563

如果 Boxel 没有调用未定义的行为并且没有多余的部分，那么它的答案会很好。一，`+ [NSString stringWithCString:encoding:]`需要一个 C 字符串 - 即一个以 NUL 结尾的字符指针（否则它很可能会转储核心）。此外，您不需要转换为`NSString`- 因为`sysctlbyname()`为您提供了一个普通的旧 C 字符串（当然没有 NUL 终止符），您可以直接使用`strcmp()`来节省几十个 CPU 周期：

```
#include <sys/sysctl.h>

size_t size;
sysctlbyname("hw.machine", NULL, &size, NULL, 0);
char *machine = malloc(size + 1);
sysctlbyname("hw.machine", machine, &size, NULL, 0);
machine[size] = 0;

if (strcmp(machine, "iPad2,5") == 0) {
    /* iPad mini */
}

free(machine); 
```

编辑：现在答案也已确定。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T19:19:28.167

使用 sysctlbyname 获取平台字符串，然后将其与[此处](http://theiphonewiki.com/wiki/index.php?title=Models)列出的 IPSW 前缀字符串进行比较。看起来目前唯一已知的 iPad Mini 是“iPad2,5”

例子：

```
size_t size;
sysctlbyname("hw.machine", NULL, &size, NULL, 0);
char *machine = malloc(size + 1);
sysctlbyname("hw.machine", machine, &size, NULL, 0);
machine[size] = 0;

if(strcmp(machine, "iPad2,5") == 0) {
    // do something special on the iPad Mini    
}

free(machine); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-13T19:50:50.977

没有可靠的、面向未来的方法来检测 iPad mini 的像素密度。其他答案建议查看`hw.machine`字符串。但是我们不知道（在我写这篇文章的时候）iPad mini 蜂窝模型的字符串是什么（尽管我们可以做出有根据的猜测：`iPad2,6`可能会有 GSM 并且`iPad2,7`可能会有 CDMA）。

可以查看`hw.machine`字符串进行分析。但是让它影响你的应用程序的用户界面是很危险的，因为即使是`iPad2,5`当前 iPad mini 的字符串也可能会发生变化。

iPad 2 出来的时候，wifi 型号的字符串是`iPad2,1`. 后来（当他们发布 iPad 3 时），[他们更改了 iPad 2 硬件并将`hw.machine`字符串更改为`iPad2,4`](http://www.anandtech.com/show/5789/the-ipad-24-review-32nm-a5-tested)，但他们仍然将其称为 iPad 2。同样的事情可能会发生在 iPad mini 上——甚至再次出现在 iPad 2 上！例如，Apple 可以发布 iPad 2 硬件的另一个版本并为其赋予机器字符串`iPad2,8`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T19:49:52.217

导入 CoreTelephony.framework。在设备上试试这个

```
#import <sys/utsname.h>
#import <CoreTelephony/CTTelephonyNetworkInfo.h>

NSString*
machineName()
{
    struct utsname systemInfo;
    uname(&systemInfo);

    return [NSString stringWithCString:systemInfo.machine
                          encoding:NSUTF8StringEncoding];
} 
```

到目前为止，这解决了我的目的。但由于我没有任何 iPad mini，我不知道它会为 iPad mini 打印什么。你能告诉我吗？

# c# - Mifare 4Kb - 设置 - 重置 - 检索认证块

> ID：13366977
> 
> 赞同：1
> 
> 时间：2012-11-13T19:00:30.770
> 
> 标签：c#, winapi, mifare, smartcard-reader

我有 mifare 4Kb，最近我编写了一个简单的 .NET (C#) 包装器，以便通过我的 mifare 卡上的智能卡读卡器执行 I/O 操作。

第一个：是否有一些 API 可以设置重置密钥 A/B 以进行扇区身份验证？

第二个：是否有一些 API 可以检索我忘记的先前设置的密钥 (A/B)？（我不认为有，因为如果它是真的，它在安全方面应该是非常可笑的！）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-28T01:01:57.870

如果您知道至少一个密钥（或至少一个密钥是默认密钥），Mfoc 可以恢复所有密钥[https://code.google.com/p/mfoc/](https://code.google.com/p/mfoc/)

# ios - UIButton 未接收到触摸事件

> ID：13366981
> 
> 赞同：0
> 
> 时间：2012-11-13T19:00:45.507
> 
> 标签：ios, xcode, uiview, uiviewcontroller, uibutton

我有一个视图控制器，我在其中以编程方式创建了一个视图，其中有几个按钮作为各种菜单。此视图使用屏幕外的坐标初始化（例如，y 原点为 -100）。如果我调整视图的 y 原点（带有动画），视图会很好地滑入，我可以触摸按钮并让它们按照我的意愿进行操作。但是，如果我调整视图控制器视图框架的 y 原点，视图中的按钮将不再识别触摸。我发现通过调整视图控制器的视图框架原点而不是视图的原点，我能够获得整个屏幕向下滑动以显示菜单而不是菜单滑动到位的效果，它几乎将其拉下。但是菜单不再起作用。

有人对此有任何见解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T22:08:56.977

我很久以前就遇到过这个问题。我记得我有一个大小为 800x800 点的视图控制器，在坐标 600,600 的可见视图之外有一个按钮。我为控制器设置了动画，以便按钮显示在屏幕上。对按钮的触摸被忽略。基本上任何超出 superview 的 320x480 边界的东西，触摸都会被忽略，尽管动画视图控制器到位。

# mysql - SQL 查询在应该返回无时返回所有项目

> ID：13366983
> 
> 赞同：0
> 
> 时间：2012-11-13T19:00:52.143
> 
> 标签：mysql

所以我的查询：

```
select * 
from csci_section 
where number = 4538 
```

不应与我表中的任何项目匹配。number 中的值都不是 4538。但是，查询返回整个表。我是 SQL 新手，所以我不确定为什么会出现这种响应。有人可以解释为什么会发生这种情况或我应该如何调整我的查询？我正在尝试处理用户输入数据库中不存在的数字的情况。

# javascript - 附加 document.body 的 innerHTML 后，Jquery 的日期选择器不起作用

> ID：13366984
> 
> 赞同：1
> 
> 时间：2012-11-13T19:00:59.223
> 
> 标签：javascript, jquery, datepicker

例子：

1) 访问 www.hotwire.com 并确认签入和签出的日期选择器工作正常

2) 打开控制台并输入 document.body.innerHTML += ""

3) 日期选择器不再工作

我不确定这是为什么...如果您使用 document.create 创建元素并使用 document.body.appendChild 附加它，则日期选择器仍然有效...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T19:04:39.697

当您调用 时`el.innerHTML += ""`，您实际上是在做`el.innerHTML = "";el.innerHTML = thehtml`，这会导致所有元素数据和事件都未绑定。这就是插件和 javascript 停止工作的原因。

# mysql - 从 Joomla 中的结果集生成插入语句

> ID：13366988
> 
> 赞同：0
> 
> 时间：2012-11-13T19:01:08.093
> 
> 标签：mysql, joomla

在 Joomla 2.5 和 3.0 中，我能够将数据库结果集作为数组获取。是否可以将此数组转换为 sql 插入语句或 .sql 文件，以便将其插入另一个数据库中相同结构的另一个表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T06:21:30.673

是的，你可以，检查下面的代码。您可以使用 Joomla 核心功能来完成这项工作。

首先初始化一个数据集，如下所示。

```
function initializesData()
    {
        $this->_data->id        = 0;
        $this->_data->field1    = '';        
        $this->_data->field2    = '';
        $this->_data->field3    = 1;

        return $this->_data;
    } 
```

然后将该行加载到数据集中，如下所示。

```
function &getOne($id='')
    {
        $db =& JFactory::getDBO();       
        $query  = $db->getQuery(true);
        $query->select('*');
        $query->from($db->nameQuote(TABLE_PREFIX.'table_name'));
        $query->where($db->nameQuote('id').'='.$db->Quote($id));       
        $db->setQuery($query);      
        $this->_data = $db->loadObject();

        if ($this->_data)
        {      
            return $this->_data;
        }

    } 
```

然后使用 Joomla 表插入行。

```
 function store()
    {  
       //Get post data 
       $this->_data = $this->getOne($id);

       $row = &$this->getTable('table_name');

       if (!$row->bind($this->_data))
       {
          $this->setError($this->_db->getErrorMsg());          
          return false;
       } 

       if (!$row->check())
       {         
         $this->setError($this->_db->getErrorMsg());
         return false;
       } 

       if (!$row->store())
       {
         $this->setError($this->_db->getErrorMsg());
         return false;
       }      
       $new_id = $this->_db->insertId();

       if($new_id > 0)
            $this->_data->id = $new_id;

       return true;
    } 
```

以上所有功能都在模型中。希望您可以在控制器中管理函数调用。如果你想做多个插入循环函数调用。如果您有任何问题，请告诉我

# iphone - NSNotificationCenter 的 ASIHTTPRequest 问题

> ID：13366991
> 
> 赞同：0
> 
> 时间：2012-11-13T19:01:25.993
> 
> 标签：iphone, objective-c, ios, asihttprequest, nsnotificationcenter

我使用`ASIHTTPRequest`. 我写了这段代码：

```
+(void)GetImagesURL
{
    NSLog(@"%i",[TripsArray count]);
    for (int i=0;i< [TripsArray count]; i++) 
    {

        NSURL *DetailTripURL = [NSURL URLWithString:[[TripsArray objectAtIndex:i] TripURL]];
        __block ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:DetailTripURL];
        [request setCompletionBlock:^{
            NSData *TripHTMLData = [request responseData];
            NSLog(@"url :  %@",DetailTripURL);
            [[TripsArray objectAtIndex:i] setTripData:TripHTMLData];
            //NSLog(@"%@",DetailTripHTMLData);
            // 2
            TFHpple *DetailTripParser = [TFHpple hppleWithHTMLData:TripHTMLData];

            // Get Image
            NSString *ImageTripXpathQueryString = @"//div[@class='image_container']/img";
            NSArray *ImageTripNodes = [DetailTripParser searchWithXPathQuery:ImageTripXpathQueryString];
            NSLog(@"%i",[ImageTripNodes count]);
            for (int j=0 ;j<[ImageTripNodes count]; j++)
            {
                [[TripsArray objectAtIndex:i] setImageUrl:[[ImageTripNodes objectAtIndex:j] objectForKey:@"src"]];
                NSLog(@"%@",[[ImageTripNodes objectAtIndex:j] objectForKey:@"src"]);
            }

        }];
        [request setFailedBlock:^{
            NSError *error = [request error];
            NSLog(@"Get Image URL Failed %@", error.localizedDescription);
        }];

        [request startAsynchronous];        
    }
        [[NSNotificationCenter defaultCenter] postNotificationName:@"Get Images URL Success" object:self];
} 
```

我想`postNotificationName`调用另一个函数。

问题是`NSNotificationCenter`，不是`postNotificationName`。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T19:33:52.577

首先，您需要添加一个观察者`Get_Images_URL_Success`

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(gotMessages:) name:Get_Images_URL_Success object:nil]; 
```

当你`postNotificationName`在`+GetImagesURL`方法中，这将被调用

```
- (void)gotMessages:(id)sender {
    NSLog(@"This will be called after the postNotificationName");
} 
```

建议您`removeObserver`在不需要时（例如，在 中`dealloc`）

```
[[NSNotificationCenter defaultCenter] removeObserver:self name:Get_Images_URL_Success object:nil]; 
```

现在，当您`postNotificationName`喜欢这个时，`gotMessages`应该调用方法

```
[[NSNotificationCenter defaultCenter] postNotificationName:Get_Images_URL_Success object:self]; 
```

[超级简单，不是吗？]

# javascript - JavaScript 查找元素之间

> ID：13366994
> 
> 赞同：3
> 
> 时间：2012-11-13T19:01:36.383
> 
> 标签：javascript, events

我正在寻找最绝妙的主意。重点是**效率**- 让我们尽量避免一堆循环 =)

没有图书馆。这是纯 JS 天才的练习。不过，如果它们实现了这一点，请随意从库中引用函数。无需回退到蹩脚的旧浏览器（即：IE）。

**设置**

我正在尝试创建事件委托。我将一个事件侦听器绑定到一个容器元素（上下文），用于在该元素中发生的每种事件类型（单击、鼠标输入等）。监听器引用了一个函数，我们称之为“路由”。

有一个单独创建的对象，看起来像这样（示例）：

```
myarr['click']['.myclass'] = functionReference1;
myarr['click']['#myid'] = functionReference2;
myarr['click']['div>a'] = functionReference3; 
```

`route`需要（这里`event.type`是“点击”）并转到 myarr 并获取所有`click`记录。`route`然后遍历每个*选择器键*并将其与`event.target`. 如果匹配，则调用函数引用，`callback`如果你愿意。

这一切都很好。相当快，直截了当。

**问题**

`event.target`可能是与*选择器键*匹配的元素的子元素。我正在寻找疯狂平滑的巫术黑魔法来确定该父级是否在我们的上下文元素和`event.target`. 最好是一些本机浏览器功能。

理想情况下，例如，我可以按照以下方式做一些事情

`context.querySelectorAll(key + " " + event.target);`

但显然，据我所知，我不能将对象传递给 querySelectorAll。

**尝试了什么**

已经尝试了两种方法。两者都有效。两者都不漂亮。

**1)**

循环遍历 event.target.parentNode 直到找到匹配项。这个手提包做到了，但它在我现有的循环中创建了一个循环。当页面上有多个选择键和大量元素时，开始变得缓慢。

```
if (event['target'].matchesSelector(key)) {
    //do callback
} else {
    var et = event['target'];
    while (et['parentNode'] !== null and et['parentNode'] !== this) {
        et = et['parentNode'];
        if (et.matchesSelector(key)) {
            //do callback
            break;
        }
    }
} 
```

**2)**

使用范围。我对此感到相当自豪，但它也有同样的多循环问题。没有过多地测试性能，但是这里发生了很多事情，如果有很多元素匹配选择器键，这可能会影响效率。

```
if (event['target'].matchesSelector(key)){
    //do callback
} else {
    var range2 = document.createRange();
    range2.selectNode(event.target);
    var range = document.createRange();         
    var allthese = document.querySelectorAll(key)
    for (var i = 0; i < allthese.length; i++){
        range.selectNode(allthese[i]);
        if (range2.compareBoundaryPoints(range2.START_TO_START, range) && range2.compareBoundaryPoints(range2.END_TO_END, range) <= 0){
            //do callback
            break;
        }
    }
} 
```

**MAGIC VOODOO** - 找我一些，当我再次获得代表时，我会创造一个大赏金。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T19:31:10.917

也许你应该试试这个：

```
event['target'].matchesSelector(key) || event['target'].matchesSelector(key + ' *') 
```

这里我的第二个条件将检查目标是否是键选择器的后代

正如您在这个[JSFIDDLE](http://jsfiddle.net/pHSWK/1/)中看到的（fiddle Works in webkit（prefer chrome）仅浏览器），使用父选择器匹配子/后代

PS：如果您还需要与实际键匹配的元素，则此方法将不起作用，但是在您的问题中，正如您所说的“疯狂平滑的巫术黑魔法，以确定该父项是否在我们的上下文元素和 event.target 之间”，所以我假设您不需要实际元素

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:19:01.090

这个怎么样：

```
 if (event['target'].matchesSelector(key)) {
           //do callback
         } else {
            var allthese = document.querySelectorAll(key) //this array has order
           //use  "binary search" here to improve perfomance.
            for (var i = 0; i < allthese.length; i++){
                if(event['target'].compareDocumentPosition(allthese[i])&&DOCUMENT_POSITION_CONTAINS){
                    //do callback
                }
            }
        }
     } 
```

您可以使用像**二进制搜索**这样的算法来提高性能（所有这些都是**有序**数组）。

compareDocumentPosition 的返回值为：

*   DOCUMENT_POSITION_DISCONNECTED 1
*   **DOCUMENT_POSITION_PRECEDING** 2
*   **DOCUMENT_POSITION_FOLLOWING** 4
*   DOCUMENT_POSITION_CONTAINS 8
*   DOCUMENT_POSITION_CONTAINED_BY 16
*   DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC 32

因此，您可以使用搜索算法搜索该数组“document.querySelectorAll(key)”。

# forms - symfony 中没有要更新的有效表单 - 控制器

> ID：13366998
> 
> 赞同：2
> 
> 时间：2012-11-13T19:01:48.160
> 
> 标签：forms, symfony, controller, fosuserbundle

所以首先我在 Symfony2.1 中使用 FOSUserBundle 并将我的角色作为**长**文本存储在用户表中：

```
a:1:{i:0;s:14:"ROLE_SUPERUSER";} 
```

我能够检索数据并将其发送到 twig bij 中的表单，此代码在控制器中：

```
public function editUserAction($userId) {
  $User = $this->container->get('fos_user.user_manager')
    ->findUserBy(array('id' => $userId))
  ;

  $selectedRole = $User->getRoles();

  if($selectedRole[0] == 'ROLE_DISTRICTINHABITANT') {
      $selectedRoleNumber = 0;
  } elseif($selectedRole[0] == 'ROLE_DISTRICTWORKER') {
      $selectedRoleNumber = 1;
  } elseif($selectedRole[0] == 'ROLE_CITYWORKER') {
      $selectedRoleNumber = 2;
  } elseif($selectedRole[0] == 'ROLE_ADMIN') {
      $selectedRoleNumber = 3;
  } elseif($selectedRole[0] == 'ROLE_SUPERADMIN') {
      $selectedRoleNumber = 4;
  }      

  $form = $this->createFormBuilder($User)
      ->add('username', 'text')
      ->add('email', 'email')
      ->add('enabled', 'checkbox', array('required' => false))
      ->add('roles', 'choice', array(
          'choices' => array(
              0 => 'DistrictInhabitant',
              1 => 'DistrictWorker',
              2 => 'CityWorker',
              3 => 'Admin',
              4 => 'SuperAdmin',
          ),
          'data' => $selectedRoleNumber
      ))
  ->getForm();

  return $this->render('SocialGeoBackendBundle:Users:edit.html.twig', array(
      'form' => $form->createView(),
      'user' => $User,
  ));
} 
```

但是当我尝试通过另一个函数将这些数据保存到数据库时，我没有过去：

```
if ($form->isValid()) 
```

这是我似乎不起作用的完整功能：

```
public function editUserToDatabaseAction($userId) {
    $request = $this->get('request');

    $em = $this->getDoctrine()->getEntityManager();

    $User = $this->container->get('fos_user.user_manager')
        ->findUserBy(array('id' => $userId))
    ;

    $form = $this->createFormBuilder($User)
        ->add('username', 'text')
        ->add('email', 'email')
        ->add('enabled', 'checkbox')
        ->add('roles', 'choice', array(
            'choices' => array(
                'DistrictInhabitant' => 'DistrictInhabitant',
                'DistrictWorker' => 'DistrictWorker',
                'CityWorker' => 'CityWorker',
                'Admin' => 'Admin',
                'SuperAdmin' => 'SuperAdmin',
            )
        ))
        ->getForm();

    if ($request->getMethod() == 'POST') {
        $form->bind($this->getRequest());

        if ($form->isValid()) {
            $em->flush();
            return $this->redirect($this->generateUrl('_users'));
        }
    }
} 
```

整个控制器类：

```
<?php

namespace SocialGeo\BackendBundle\Controller;

use SocialGeo\BackendBundle\Form;
use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use SocialGeo\UserBundle\Entity\User;
use Symfony\Component\HttpFoundation\Response;
use Symfony\Component\HttpFoundation\Request;

class UsersController extends Controller {

 public function indexAction() {
    $Users = $this->container->get('fos_user.user_manager')
        ->findUsers()
    ; 

    if (!$Users) {
        throw $this->createNotFoundException('No users found!');
    }

    return $this->render('SocialGeoBackendBundle:Users:index.html.twig', array('users' => $Users));     
}

 public function changeActiveStateAction($id) {
    $em = $this->getDoctrine()->getManager();

    $selectedUser = $this->container->get('fos_user.user_manager')
        ->findUserBy(array('id' => $id));

    $active = $selectedUser->isEnabled();
    if($active) {
        $selectedUser->setEnabled(FALSE);
    } else {
        $selectedUser->setEnabled(TRUE);
    }

    $em->flush();

    return $this->redirect($this->generateUrl('_users'));
 }

 public function editUserAction($userId) {
    $User = $this->container->get('fos_user.user_manager')
        ->findUserBy(array('id' => $userId))
    ;

    $selectedRole = $User->getRoles();

    if($selectedRole[0] == 'ROLE_DISTRICTINHABITANT') {
        $selectedRoleNumber = 0;
    } elseif($selectedRole[0] == 'ROLE_DISTRICTWORKER') {
        $selectedRoleNumber = 1;
    } elseif($selectedRole[0] == 'ROLE_CITYWORKER') {
        $selectedRoleNumber = 2;
    } elseif($selectedRole[0] == 'ROLE_ADMIN') {
        $selectedRoleNumber = 3;
    } elseif($selectedRole[0] == 'ROLE_SUPERADMIN') {
        $selectedRoleNumber = 4;
    }

    $form = $this->createFormBuilder($User)
        ->add('username', 'text')
        ->add('email', 'email')
        ->add('enabled', 'checkbox', array('required' => false))
        ->add('roles', 'choice', array(
            'choices' => array(
                0 => 'DistrictInhabitant',
                1 => 'DistrictWorker',
                2 => 'CityWorker',
                3 => 'Admin',
                4 => 'SuperAdmin',
            ),
            'data' => $selectedRoleNumber
        ))
        ->getForm();

    return $this->render('SocialGeoBackendBundle:Users:edit.html.twig', array(
        'form' => $form->createView(),
        'user' => $User,
    ));
 }

 public function editUserToDatabaseAction($userId) {
    $request = $this->get('request');

    $em = $this->getDoctrine()->getEntityManager();

    $User = $this->container->get('fos_user.user_manager')
        ->findUserBy(array('id' => $userId))
    ;

    $form = $this->createFormBuilder($User)
        ->add('username', 'text')
        ->add('email', 'email')
        ->add('enabled', 'checkbox')
        ->add('roles', 'choice', array(
            'choices' => array(
                'DistrictInhabitant' => 'DistrictInhabitant',
                'DistrictWorker' => 'DistrictWorker',
                'CityWorker' => 'CityWorker',
                'Admin' => 'Admin',
                'SuperAdmin' => 'SuperAdmin',
            ),
            'empty_value' => false, // user always has at least the default role
            'multiple' => true,
        ))
        ->getForm();

    if ($request->getMethod() == 'POST') {

        $form->bind($this->getRequest());

        if ($form->isValid()) {
            print_r(jej);
            //$data = $form->getData();
            $em->flush();
            return $this->redirect($this->generateUrl('_users'));
        }
    }
 }
} 
```

因此，当我尝试更新时，我得到一个“数组”、“字符串”类型的预期参数，给出 500 内部服务器错误 - UnexpectedTypeException

当我尝试时： print_r(xxx); 我让打印命令在 if ($form->isValid()) 上方的任何地方工作，所以我的表单无效？

另外：我确定 createFormBuilder ->add('roles' ... 会引发错误，因为当我将此添加添加到注释中时，它会起作用...这是数组的错，我该如何在控制器中解决这个问题？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T19:07:27.493

编辑以下添加完整的控制器代码到问题：

这里不是尝试诊断特定错误，而是使用角色编辑 FOS 用户的操作示例，涵盖 GET 和 POST（您只需要一个路由/操作，因此您需要更新您的路由）

```
public function editUserAction($userId) {
    $user = $this->container->get('fos_user.user_manager')
        ->findUserBy(array('id' => $userId));

    $form = $this->createFormBuilder($user)
        ->add('username', 'text')
        ->add('email', 'email')
        ->add('enabled', 'checkbox')
        ->add('roles', 'choice', array(
            'choices' => array(
                'DistrictInhabitant' => 'DistrictInhabitant',
                'DistrictWorker' => 'DistrictWorker',
                'CityWorker' => 'CityWorker',
                'Admin' => 'Admin',
                'SuperAdmin' => 'SuperAdmin',
            ),
            'empty_value' => false, // user always has at least one role
            'multiple' => true,
        ))
        ->getForm();

    if ($this->getRequest()->getMethod() == 'POST') {

        $form->bind($this->getRequest());

        if ($form->isValid()) {
            $em = $this->getDoctrine()->getEntityManager();
            $em->flush();
            return $this->redirect($this->generateUrl('_users'));
        }
    }

    return $this->render('SocialGeoBackendBundle:Users:edit.html.twig', array(
            'form' => $form->createView(),
            'user' => $user,
        ));
} 
```

我不能保证这是没有错误的，但希望它足以帮助您实现工作版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T22:07:58.377

最后我找到了解决方案。首先，我将`post`树枝中的我设置为相同的路线（在我的控制器中进行相同的操作）。然后我`FOSUserBundle`在请求 post 方法时使用了设置器，最后`updateUser`完成了工作。

这是我的控制器中单个操作的代码：

```
public function editUserAction($userId) {
    $request = $this->get('request');

    $User = $this->container->get('fos_user.user_manager')
        ->findUserBy(array('id' => $userId))
    ;

    $selectedRole = $User->getRoles();

    if($selectedRole[0] == 'ROLE_DISTRICTINHABITANT') {
        $selectedRoleNumber = 0;
    } elseif($selectedRole[0] == 'ROLE_DISTRICTWORKER') {
        $selectedRoleNumber = 1;
    } elseif($selectedRole[0] == 'ROLE_CITYWORKER') {
        $selectedRoleNumber = 2;
    } elseif($selectedRole[0] == 'ROLE_ADMIN') {
        $selectedRoleNumber = 3;
    } elseif($selectedRole[0] == 'ROLE_SUPERADMIN') {
        $selectedRoleNumber = 4;
    }

    $form = $this->createFormBuilder($User)
        ->add('username', 'text')
        ->add('email', 'email')
        ->add('enabled', 'checkbox', array('required' => false))
        ->add('roles', 'choice', array(
            'choices' => array(
                0 => 'DistrictInhabitant',
                1 => 'DistrictWorker',
                2 => 'CityWorker',
                3 => 'Admin',
                4 => 'SuperAdmin',
            ),
            'data' => $selectedRoleNumber
        ))
        ->getForm();

    if ($request->isMethod('POST')) {

        $postData = $request->request->get('form');
        $roles_value = $postData['roles'];

        if($roles_value == 0) {
            $FutureRole[0] = "ROLE_DISTRICTINHABITANT";
        } else if($roles_value == 1) {
            $FutureRole[0] = "ROLE_DISTRICTWORKER";
        } else if($roles_value == 2) {
            $FutureRole[0] = "ROLE_CITYWORKER";
        } else if($roles_value == 3) {
            $FutureRole[0] = "ROLE_ADMIN";
        } else if($roles_value == 4) {
            $FutureRole[0] = "ROLE_SUPERADMIN";
        }

        $userManager = $this->container->get('fos_user.user_manager');

        $selectedUser = $userManager->findUserBy(array('id' => $userId));

        $selectedUser->setUsername($postData['username']);
        $selectedUser->setEmail($postData['email']);
        $selectedUser->setEnabled($postData['enabled']);
        $selectedUser->setRoles($FutureRole);

        $userManager->updateUser($selectedUser, true);

        return $this->redirect($this->generateUrl('_users'));

    } else {
        return $this->render('SocialGeoBackendBundle:Users:edit.html.twig', array(
            'form' => $form->createView(),
            'user' => $User,
        ));
    }
} 
```

# android - Android Emulator - 切换显示器时出现蓝色调

> ID：13366999
> 
> 赞同：4
> 
> 时间：2012-11-13T19:02:03.460
> 
> 标签：android, emulation

每次我将模拟器窗口从一台显示器移动到另一台显示器时，模拟器都会变成蓝色......它会出现这种奇怪的蓝色色调，就像我刚刚突出显示的那样。

还有其他人在最新的 AVD 更新中开始发生这种情况吗？

[http://dl.dropbox.com/u/73017/blue-emulator.png](http://dl.dropbox.com/u/73017/blue-emulator.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T08:12:37.243

他们正在调查它。请参考：[http ://code.google.com/p/android/issues/detail?id=38913](http://code.google.com/p/android/issues/detail?id=38913)