# StackOverflow 问答 15369000-15369999

# django-rest-framework - 可浏览 API 中的无值

> ID：15369000
> 
> 赞同：1
> 
> 时间：2013-03-12T18:17:45.800
> 
> 标签：django-rest-framework

在 Django REST Framework 中，给定 Django 模型中的一个字段，该字段具有 null=True 和空白=True，并且在序列化程序中该字段是必需的=False，有没有办法让可浏览的 API 用空白呈现 HTML 下拉列表价值？使用 JSON 可以将字段设置为 null，我只是不知道如何通过 HTML 表单也允许这样做。

图片中说：

我目前有：![得到](../Images/7afa9f9fabac74fc2dfcadd58d23d171.png)

我想去：![想](../Images/79d68cfd21c850ffbf95d409a41bb0b4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:18:45.957

找到了。简化：

```
class SwitchPortSerializer(serializers.HyperlinkedModelSerializer):
    def get_fields(self, *args, **kwargs):
        fields = super(SwitchPortSerializer, self).get_fields(*args, **kwargs)
        fields['switch'].empty_label = ''
        return fields 
```

# c# - 泛型类的模糊引用

> ID：15369001
> 
> 赞同：0
> 
> 时间：2013-03-12T18:17:47.427
> 
> 标签：c#

我在另一个类中需要两个不同的名称空间中有一个对象：

```
public class MyObject<T> 
```

我想做类似的事情

```
using MyObject = MyNameSpace1.MyObject; 
```

但它不起作用。

我能怎么做？

# silverlight - 棱镜在 WP7.1 中不工作，但在 WP8 中工作

> ID：15369002
> 
> 赞同：1
> 
> 时间：2013-03-12T18:17:50.230
> 
> 标签：silverlight, windows-phone-7, c#-4.0, prism

我使用 MVVM (Prism v4.1) 开发了一个 Windows Phone 应用程序。当我将它部署到我的 HTC 8X 时一切正常，但是当我将它部署`Emulator WVGA`到我的 Lumia 800 或使用`Emulator 7.1`它时它无法正常工作。

这是视图（模型）的一部分，希望对您有所帮助

`View`

```
<phone:PhoneApplicationPage
    x:Class="LearnByTranslate.Views.PhrasePracticeView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
    xmlns:ec="clr-namespace:Microsoft.Expression.Interactivity.Core;assembly=Microsoft.Expression.Interactions"
    xmlns:converter="clr-namespace:LearnByTranslate.Infrastructure.Convverters"

    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"
    SupportedOrientations="Portrait" Orientation="Portrait"
    mc:Ignorable="d"
    shell:SystemTray.IsVisible="True">

    <Grid x:Name="LayoutRoot" Background="Transparent">
        <ScrollViewer Margin="24,0,24,72" Grid.Row="1">
            <StackPanel x:Name="stkPracticeContent" Margin="0">
                <TextBlock x:Name="txtTextToTranslate" HorizontalAlignment="Left" TextWrapping="Wrap" Text="{Binding EnglishPhrase,Mode=TwoWay}" FontSize="40" FontStyle="Normal" VerticalAlignment="Top" Style="{StaticResource EnglishSentenceStyle}" FontFamily="Segoe WP Light">
                    <TextBlock.Foreground>
                        <SolidColorBrush Color="{StaticResource PhoneForegroundColor}"/>
                    </TextBlock.Foreground>
                </TextBlock>               
            </StackPanel>
        </ScrollViewer>
    </Grid> 
</phone:PhoneApplicationPage> 
```

`ViewModel`

```
class PhrasePracticeViewModel : NotificationObject
{       
    private string _englishPhrase;     

    public PhrasePracticeViewModel()
    {

    }       

    public string EnglishPhrase
    {
        get { return _englishPhrase; }
        set
        {
            _englishPhrase = value;
            RaisePropertyChanged(() => EnglishPhrase);
        }
    }       
} 
```

除此视图外，一切正常（关于其他视图中的绑定）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T08:44:09.517

这是我见过的最奇怪的事情之一。

这样做的原因是我的 ViewModel 类没有创建`public`（如您在上面看到的）。我会更深入地研究一下为什么这适用于 WP8 但不适用于 WP7.1 但它真的让我很沮丧。

希望这对其他人有帮助。

# css - 无法在 Django 中加载 CSS 文件

> ID：15369003
> 
> 赞同：0
> 
> 时间：2013-03-12T18:17:50.560
> 
> 标签：css, django, django-settings

我正在使用 Ubuntu 和`Django 1.3.7`. 以下是各种相关设置：

我的目录结构：

```
mysite/
      manage.py
      settings.py
      __init__.py
      urls.py
      myapp/
          __init__.py
          forms.py
          models.py
          views.py
          templates/
               index.html
               home.html
      static/
           common.css
           ...
           ... 
```

我的`settings.py`文件：

```
import os.path
SETTINGS_ROOT = os.path.dirname(__file__)
INSTALLED_APPS = (
    ...
    ...
       'django.contrib.staticfiles'
    )
    STATIC_ROOT = os.path.join(SETTINGS_ROOT, "static/")
    STATIC_URL = '/static/' 
```

在我的模板`html`文件中：

```
<link rel="stylesheet" type="text/css" href="/static/bootstrap/css/bootstrap.css"> 
```

尽管如此，这些页面仍然没有显示任何图像、css 或 js 文件。我已经阅读了文档。但没有任何帮助。为了使文件运行，我还需要包含/修改什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:23:17.627

```
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
    '/path/to/your/project/assets',
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T09:21:09.147

我的静态文件配置如下。

```
PROJECT_DIR = os.path.abspath(os.path.dirname(__file__))
enter code herePER_DIR = os.path.abspath(os.path.join(PROJECT_DIR, os.path.pardir))
STATIC_ROOT = os.path.join(SUPER_DIR, 'static')
STATIC_URL = '/static/' 
```

它可能会有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T02:16:37.190

**设置.py**

```
import os
SETTINGS_ROOT = os.path.dirname(__file__)

STATIC_ROOT = os.path.join(SETTINGS_ROOT, "static")
STATIC_URL = '/static/'

STATICFILES_DIRS = (

    os.path.join(SETTINGS_ROOT, 'static'),
) 
```

主要**网址.py**

```
from django.conf.urls import patterns, include, url
from django.conf.urls.static import static
from django.contrib import admin
from django.contrib.staticfiles.urls import staticfiles_urlpatterns

admin.autodiscover()

urlpatterns = patterns('',
    ................
) 

urlpatterns += staticfiles_urlpatterns() 
```

**模板**

```
<link rel="stylesheet" type="text/css" href="/static/bootstrap/css/bootstrap.css"> 
```

# php - 在 Laravel 中对多个字段求和

> ID：15369005
> 
> 赞同：6
> 
> 时间：2013-03-12T18:17:59.080
> 
> 标签：php, laravel

我想知道是否可以使用流畅的查询生成器在一个查询中获取多个字段的总和。

我目前有两张桌子：活动和与会者。参加者属于活动并有两个字段：total_raised 和 total_hours。我想要做的是选择所有事件以及在该事件上花费的总金额/总小时数。现在，如果我只是使用 SQL，我会做一些事情：

```
 SELECT Event.id, sum(Attendees.total_raised), sum(Attendees.total_hours)
 FROM Events JOIN Attendees ON Events.id = Attendees.event_id 
 GROUP BY Event.id 
```

但是，我似乎找不到使用流利的查询生成器一次获取多个总和的方法。有什么方法可以使用 fluent 来做我想做的事情，还是应该把它变成一个原始的 SQL 查询？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T18:32:19.410

您可以使用`sum()`即：

```
$q = DB::table('events')
       ->join('attendees', 'events.id', '=', 'attendees.event_id')
       ->sum('total_raised')
       ->sum('total_hours'); 
```

如果这不起作用，您可以尝试：

```
...

->get(
  array(
    'events.id',
    DB::raw('SUM(attendees.total_raised)'),
    DB::raw('SUM(attendees.total_hours)')
  )
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:11:26.160

建立在西蒙斯的回答之上。您可以通过基本上运行两个查询来做到这一点。

```
$query = DB::table('events')->join('attendees', 'events.id', '=', 'attendees.event_id');

$raised = $query->sum( 'total_raised' );

$hours = $query->sum( 'total_hours' ); 
```

这取决于实际情况。如果它在管理/CMS方面，我会倾向于这个解决方案。如果它在前端，它应该在一个查询中完成，这样会更快。根据内容，它可能会或可能不会有显着差异。

```
$result = DB::table('events')->join('attendees', 'events.id', '=', 'attendees.event_id')
    ->get( array(
        DB::raw( 'SUM(attendees.total_raised) AS raised' ),
        DB::raw( 'SUM(attendees.total_hours) AS hours' ),
    )); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-23T06:24:35.560

我在我的项目中做同样的事情，这是我找到的解决方案。我正在使用 Laravel 5.2 Eloquent 这里是 Eloquent 声明。

我在项目中使用的此语句，请根据您的需要进行更改。

```
$result = self::select("*", DB::raw('SUM(auction_amount) as total_auction_amount') , DB::raw('SUM(commission_amount) as total_commission_amount'), 
            DB::raw('SUM(deposit_amount) as total_deposit_amount'))
            ->groupBy('cp_user_id')
            ->get()
            ->toArray(); 
```

您可以使用相同的方式进行查询，例如

```
$result = self::select("*", DB::raw('SUM(auction_amount) as total_auction_amount') , DB::raw('SUM(Attendees.total_raised) as total_raised'), 
            DB::raw('SUM(Attendees.total_hours) as total_hours'))
            ->with('Attendees')
            ->groupBy('id')
            ->get()
            ->toArray(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-05T09:16:20.407

我写这个答案是为了帮助那些正在搜索的人在一个表中汇总多个字段。

* * *

如果您想对单个表中的多个字段求和，那么就不需要“加入”您可以简单地做同样的事情，假设表是这样的。 [![在此处输入图像描述](../Images/816373655cb0213eac44c28002a1050f.png)](https://i.stack.imgur.com/OHTRX.png)

在您的控制器中执行以下操作：

```
$billInfo= Bills::where('reports_id',2)->get( array(
        DB::raw('SUM(Price) as total_price'),
        DB::raw('SUM(balance) as total_balance'),
        DB::raw('SUM(paid) as total_paid'),
      )); 
```

这将产生以下数据：

> [{"total_price":17500,"total_balance":17500,"total_paid":null}]

# python - 使用 scikit-learn PCA 找到具有最高方差的维度

> ID：15369006
> 
> 赞同：23
> 
> 时间：2013-03-12T18:17:59.300
> 
> 标签：python, scikit-learn, pca, variance

我需要使用 pca 来识别某组数据中方差最大的维度。我正在使用 scikit-learn 的 pca 来执行此操作，但我无法从 pca 方法的输出中确定我的数据中方差最大的组件是什么。请记住，我不想消除这些维度，只识别它们。

我的数据组织为一个包含 150 行数据的矩阵，每行有 4 个维度。我正在做如下：

```
pca = sklearn.decomposition.PCA()
pca.fit(data_matrix) 
```

当我打印**pca.explained_variance_ratio_**时，它输出从最高到最低排序的方差比数组，但它没有告诉我它们对应的数据中的哪个维度（我尝试更改矩阵上列的顺序，并且得到的方差比数组是相同的）。

打印**pca.components_**给了我一个 4x4 矩阵（我将原始组件数作为 pca 的参数），其中一些值我无法理解……根据 scikit 的文档，它们应该是具有最大方差的组件（也许是特征向量？），但没有迹象表明这些值指的是哪个维度。

转换数据也无济于事，因为维度的变化方式我无法真正知道它们最初是哪一个。

有什么方法可以通过 scikit 的 pca 获取这些信息？谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-13T03:10:41.143

返回的 pca.explained_variance_ratio_ 是主成分的方差。您可以使用它们来查找您的数据可以通过 pca 更好地转换的维度（组件）。您可以为此使用阈值（例如，您可以计算有多少方差大于 0.5 等）。之后，您可以通过 PCA 使用等于高于所用阈值的主成分的维数（分量）来转换数据。缩减到这些维度的数据与原始数据中的维度数据不同。

您可以从此链接检查代码：

[http://scikit-learn.org/dev/tutorial/statistical_inference/unsupervised_learning.html#principal-component-analysis-pca](http://scikit-learn.org/dev/tutorial/statistical_inference/unsupervised_learning.html#principal-component-analysis-pca)

# file - 如何在F#中写入文件的开头

> ID：15369008
> 
> 赞同：1
> 
> 时间：2013-03-12T18:18:05.157
> 
> 标签：file, f#

我需要在现有文件的开头写一个流水号。到目前为止，我所能做的就是写入每个文件的末尾。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T18:59:01.877

怎么样（警告！未经测试的代码）：

```
open System.IO
File.ReadAllText("c:\\old.txt")
    |> fun s -> let r = new StreamReader(s)
                let data = r.ReadToEnd
                r.Close()
                s.Close()
                data

let writeStringToFile d =
    (File.OpenWrite("c:\\new.txt"), d)
    |> fun ((s : FileStream), (d : string)) -> let r = new StreamWriter(s)
                                               r.WriteLine("new data")
                                               r.Write(d)
                                               r.Close()
                                               s.Close()

getStringFromFile()
|> writeStringToFile 
```

编辑：

更好的解决方案：

```
File.WriteAllText("c:\\new.txt", "new Text" + File.ReadAllText("c:\\old.txt")) 
```

# c# - 如何在 asp.net mvc3 中显示错误消息

> ID：15369011
> 
> 赞同：0
> 
> 时间：2013-03-12T18:18:18.380
> 
> 标签：c#, asp.net, asp.net-mvc-3

请帮我在视图中显示错误消息。我的代码如下 -

这是我的视图模型：

```
public class DepartmentViewModel
{
    //public Department Department { get; set; }
    public string DepartmentId { get; set; }
    [Required]
    public string DepartmentName { get; set; }
    public string ManagerMemberId { get; set; }
    public bool IsActive { get; set; }
    public List<Member> Managers { get; set; } 
} 
```

这是控制器：

```
public class DepartmentController : Controller
{
    //
    // GET: /Department/

    public ActionResult Index()
    {
        var adminUserId = (string)Session["UserId"];
        var memberId = (string)Session["MemberId"];

        List<Department> departments = null;

        if (!string.IsNullOrEmpty(adminUserId))
        {
            departments = new DepartmentManager().GetDepartments(false);
        }
        else if (!string.IsNullOrEmpty(memberId))
        {
            var companyId = (int)Session["CompanyId"];
            departments = new DepartmentManager().GetDepartments(false, companyId);
        }

        //var managers = new MemberManager().GetMembersOfManagerCategory(true, );

        return View("DepartmentList", departments);
    }

    public ActionResult Delete(string departmentId)
    {
        try
        {
            new DepartmentManager().DeleteDepartment(departmentId);
        }
        catch (System.Exception exception)
        {
            ModelState.AddModelError("Error", "Unable to delete department. Try again,      and if the problem persists see your system administrator.");
            //return RedirectToAction("Index", "Department");
        }

        return RedirectToAction("Index", "Department");
    }
} 
```

这是视图：

```
@model IEnumerable<PDCA.Core.EntityClasses.Department>
@{
    ViewBag.Title = "Department List";
    Layout = "~/Views/Shared/_Layout.cshtml";
 }
<div class="container">
@using (Html.BeginForm())
{
    <form class="form-horizontal">
    <fieldset>
        <legend>List of Departments:</legend>
        <table border="1" cellspacing="1">
            <tr>
                <th>
                    Id
                </th>
                <th>
                    Name
                </th>
                <th>
                    Company
                </th>
                <th>
                    Manager
                </th>
                <th>
                    IsActive
                </th>
                <th>
                </th>
            </tr>
            @foreach (var item in Model)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.DepartmentId)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.DepartmentName)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Company.CompanyName)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Manager.MemberName)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.IsActive)
                    </td>
                    <td>
                        @Html.ActionLink("Edit", "Edit", new { item.DepartmentId }) |
                        @Html.ActionLink("Delete", "Delete", new { item.DepartmentId })
                    </td>
                </tr>
            }
        </table>
        <p></p>
        <p>
            @Html.ActionLink("Create New", "Create")
        </p>
        <p></p>
        <p>
            @Html.ValidationMessage("Error");
        </p>
    </fieldset>
    </form>
} 
```

在视图中我放了 @Html.ValidationMessage("Error") 但错误消息没有显示在那里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:52:52.067

您正在重定向，因此 modelstate 消失了。您可以通过 tempdata 保存它，但我不会那样做（[How do I maintain ModelState errors when using RedirectToAction?](https://stackoverflow.com/questions/658747/how-do-i-maintain-modelstate-errors-when-using-redirecttoaction)）。您可以使用特殊字段和一些通知消息（例如 toastr）来显示错误，或者只是停留在同一个视图上，然后会显示模型状态错误。

```
public ActionResult Delete(string departmentId)
    {
        try
        {
            new DepartmentManager().DeleteDepartment(departmentId);
        }
        catch (System.Exception exception)
        {
            ModelState.AddModelError("Error", "Unable to delete department. Try again,      and if the problem persists see your system administrator.");
            //return RedirectToAction("Index", "Department");
YOU SHOULD ADD MESSAGE TO VIEWDATA HERE, OR RETURN SAME VIEW(make delete POST action also)

        }
    return RedirectToAction("Index", "Department");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T18:48:58.193

首先你有一个重复的表格

```
@using (Html.BeginForm())
{
    <form class="form-horizontal"> 
```

`@Html.BeginForm`为您处理`form`标签。

其次，尝试`@Html.ValidationSummary`像这样添加

```
@using (Html.BeginForm())
{
    @Html.ValidationSummary()
    <fieldset> 
```

第三，您需要引用正确的脚本文件。通常这将在布局页面中完成，但这取决于您。

添加引用到

```
jquery
jquery.validate.js
jquery.validate.unobtrusive.j 
```

CDN 可以在[这里找到](http://www.asp.net/ajaxlibrary/cdn.ashx)

假设您没有输入 a `DepartmentName`，请按提交，您应该会看到错误消息。

请记住，`model`您的页面必须是`DepartmentViewModel`. 在你上面的例子中它不是。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T19:01:30.650

尝试按照@glosrob 的建议添加验证摘要，例如

```
@using (Html.BeginForm()) 
{
   @Html.ValidationSummary()
... 
```

`ValidationMessageFor`也可以使用

```
<td>
     @Html.DisplayFor(modelItem => item.DepartmentName)
     @Html.ValidationMessageFor(v=>v.DepartmentName)
 </td> 
```

# wpf - WPF RenderTargetBitmap 缺少元素

> ID：15369015
> 
> 赞同：14
> 
> 时间：2013-03-12T18:18:23.880
> 
> 标签：wpf, rendertargetbitmap

我有一个在数据模板中显示的带有小图标的 TreeView。我正在尝试使用 RenderTargetBitmap 将 Treeview 保存为 PNG。

图像在小型数据集上正确保存。但是，如果数据集变得太大，则某些图标会从最终图像中排除。神奇的数字似乎是 200 项。树是深还是宽似乎并不重要，在 200 个项目之后，图标不会被渲染。

**添加代码**

所以这是我用来创建图像的代码。

```
 RenderTargetBitmap targetBitmap = new RenderTargetBitmap(
            (int)_treeView.ActualWidth,
            (int)_treeView.ActualHeight,
            96, 96, PixelFormats.Default);

        targetBitmap.Render(_treeView); 
```

**添加屏幕截图**

请注意树右侧缺少的图标。 [![缺少图标的屏幕截图](../Images/d6df873859eed7b5f19b6f0df0baa372.png)](https://i.stack.imgur.com/EQy9F.jpg)

现在，如果我折叠一些分支，从而隐藏了一些其他图标，那么这些图标就会被包括在内。这几乎就像 RenderTargetBitmap.Render 没有能力渲染所有的图标。或者它可能与虚拟面板有关。 [![包含图标的屏幕截图](../Images/30c49503878bfee8873370f937afefa1.png)](https://i.stack.imgur.com/RzEMw.jpg)

这里是仔细看看。 [![在此处输入图像描述](../Images/5fa27e54b0b0a51ccfcc33030997aabe.png)](https://i.stack.imgur.com/v8jYE.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-27T22:40:38.800

我立即注意到你有巨大的形象。宽度 12000。我很惊讶你竟然这么接近。

正如 MSDN 所述，纹理宽度/高度受 DirectX 纹理限制的限制。

XAML 可视化树的最大渲染大小受 Microsoft DirectX 纹理的最大尺寸限制；有关详细信息，请参阅资源限制 (Direct3D)。此限制可能因应用程序运行的硬件而异。超出此限制的非常大的内容可能会被缩放以适应。如果以这种方式应用缩放限制，则可以使用 PixelWidth 和 PixelHeight 属性查询缩放后的渲染大小。例如，10000 x 10000 像素的 XAML 可视化树可能会缩放到 4096 x 4096 像素，这是应用运行的硬件强制执行的特定限制的示例。 [http://msdn.microsoft.com/library/windows/apps/dn298548](http://msdn.microsoft.com/library/windows/apps/dn298548)

我怀疑这些事情：

*   虚拟化切断了一些东西——我过去曾遇到过 DataGrid 的确切问题，问题是虚拟化。你的案子看起来不像一个。
*   太大的纹理会导致未定义的行为。

您可以尝试禁用硬件加速。这件事导致了很少的核心错误。[http://msdn.microsoft.com/en-us/library/system.windows.media.renderoptions.processrendermode.aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.renderoptions.processrendermode.aspx)

除此之外 - 这会很棘手，但我很确定它会很好地工作：

1) 从根对象开始，递归遍历根对象children，直到找到小于1000 x 1000的对象。使用RenderTargetBitmap(BMP)对其进行拍照，并将其合并到IN-MEMORY-BMP。为每个孩子做。

你应该能够计算出所有这些东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-02T07:40:04.660

对于记录：有一个解决方法。

不要使用 RenderTargetBitmap 直接渲染您的 Visual，而是使用临时的 DrawingVisual。使用 VisualBrush 将您的 Visual 绘制到 DrawingVisual，然后将 RenderTargetBitmap 与 DrawingVisual 一起使用。

像这样：

```
 public BitmapSource RenderVisualToBitmap(Visual visual)
    {
        var contentBounds = VisualTreeHelper.GetContentBounds(visual);

        var drawingVisual = new DrawingVisual();
        using (var drawingContext = drawingVisual.RenderOpen())
        {
            var visualBrush = new VisualBrush(visual);
            drawingContext.DrawRectangle(visualBrush, null, contentBounds);
        }

        var renderTargetBitmap = new RenderTargetBitmap((int)contentBounds.Width, (int)contentBounds.Height, 96, 96, PixelFormats.Default);
        renderTargetBitmap.Render(drawingVisual);

        return renderTargetBitmap;
    } 
```

但是请注意，随着您的 VisualBrush 变大，生成的图像会变得越来越模糊（使用高 DPI 渲染时）。要解决此问题，请使用一系列较小的 VisualBrush“图块”，如下所述： [https ://srndolha.wordpress.com/2012/10/16/exported-drawingvisual-quality-when-using-visualbrush/](https://srndolha.wordpress.com/2012/10/16/exported-drawingvisual-quality-when-using-visualbrush/)

# mysql - 在mysql中加入查询以实现自动完成

> ID：15369018
> 
> 赞同：1
> 
> 时间：2013-03-12T18:18:28.533
> 
> 标签：mysql, join, autocomplete

我想在 mysql php 中为自动完成编写一个查询。我有两个表

```
CREATE TABLE IF NOT EXISTS `city` (
`id` int(22) NOT NULL AUTO_INCREMENT,
`city_name` varchar(44) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=64 ; 
```

和表2是

```
CREATE TABLE IF NOT EXISTS `area` (
`id` int(22) NOT NULL AUTO_INCREMENT,
`city_id` int(44) NOT NULL,
 `area_name` varchar(33) NOT NULL,
 PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=2561 ; 
```

当用户输入任何单词时，它将在区域表（area_name）和城市表（city_name）中搜索...我想在一个字段中返回结果。例如，如果您输入“RAK”，它将在区域表中搜索。如果找到它将返回 city_id 和 area_name 否则它将在 city.i 中搜索。我需要获取 cityid 、 areaid 和匹配的文本。这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:41:14.813

有一个`OR`子句将导致两个表中的表扫描。使用 a`UNION`将允许使用索引：

```
 SELECT 
        city_id,
        id AS area_id,
        area_name AS name,
    FROM 
        area
    WHERE
        area_name LIKE 'searchterm%'
UNION
    SELECT 
        id AS city_id
        NULL AS area_id,
        city_name AS name
    FROM 
        city
    WHERE
        city_name LIKE 'searchterm%'
ORDER BY
    name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:42:31.710

你可能会从这样的事情开始：

```
select ifnull( area_name, city_name ) from area
   join city on area.city_id = city.id    
   where area_name = <name> or city_name = <name>; 
```

我需要构建一个小提琴来测试它，但存在将一个结果“故障转移”到另一个结果的概念。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T18:47:35.580

您可以使用此查询

```
SELECT
    IF(city_name IS NULL ,area_name , city_name) as `Area`
FROM city AS c
LEFT JOIN area AS a ON a.city_id = c.id
WHERE city_name LIKE 'keyword%' OR area_name LIKE 'keyword%' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T19:47:22.360

```
SELECT
  c.id, c.city_name, a.id, a.area_name
FROM
  city AS c
LEFT OUTER JOIN area AS a ON a.city_id = c.id
WHERE c.city_name LIKE 'input%'
  OR a.area_name LIKE 'input%' 
```

`a.id``a.area_name`如果匹配仅在城市名称上，则为 null 。

# meteor - 有条件地包含带有流星的 css 文件

> ID：15369021
> 
> 赞同：10
> 
> 时间：2013-03-12T18:18:41.700
> 
> 标签：meteor

我正在制作一个带有流星的“多页”应用程序，并希望每页使用不同的 css 文件。这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T22:27:00.080

Meteor 不允许（当前）标签内的助手。

快速方法：使用#id将所有内容包装在一个div中，然后使用手写笔包装所有css规则和该标签：

```
#myPagewrap1
  #row
    some: rule

#myPagewrap1
  #row
    some: rule 
```

很长的路要走：将一些动态 css 调用附加到模板的 .created 方法。

```
Template.myPage.created = function(){
  loadStyle("pathtostyle.css");
} 
```

你的 loadStyle 函数可能是这样的：[http ://www.javascriptkit.com/javatutors/loadjavascriptcss.shtml](http://www.javascriptkit.com/javatutors/loadjavascriptcss.shtml)

# java - 递增 DynamoDB 编号字段未持久化

> ID：15369027
> 
> 赞同：1
> 
> 时间：2013-03-12T18:19:03.200
> 
> 标签：java, amazon-web-services, nosql, amazon-dynamodb

我有一个带有“计数”数字字段的 DynamoDB 表。我正在使用 AttributeAction.ADD 增加字段。它可以工作，但是当我重新运行我的应用程序时，它不会增加现有值，而是再次从“1”开始。

我期待着：

```
run #1: 1,2,3,4,5
run #2: 6,7,8,9,10 
```

相反，我看到：

```
run #1: 1,2,3,4,5
run #2: 1,2,3,4,5 
```

我究竟做错了什么？这是我在我的应用程序中运行的代码：

```
 Map<String, AttributeValueUpdate> updateItems = new HashMap<String, AttributeValueUpdate>();

        Key key = new Key().withHashKeyElement(new AttributeValue().withS(targetKey));
        updateItems.put("count",
                new AttributeValueUpdate()
                        .withAction(AttributeAction.ADD)
                        .withValue(new AttributeValue().withN("1")));

        ReturnValue returnValues = ReturnValue.ALL_NEW;

        UpdateItemRequest updateItemRequest = new UpdateItemRequest()
                .withTableName(tableName)
                .withKey(key)
                .withAttributeUpdates(updateItems)
                .withReturnValues(returnValues);

        UpdateItemResult result = dynamoDB.updateItem(updateItemRequest); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:50:08.787

代码工作正常。我测试了另一个应用程序没有任何问题。我今天重新运行了我的第一个应用程序，它再次运行良好。没有代码更改，因为它位于共享 jar 中。我猜我第一次运行时最初创建的表存在问题。我不确定是什么，因为表创建代码在同一个 jar 中并且也没有改变。

# grails - 在约束中导入域

> ID：15369028
> 
> 赞同：0
> 
> 时间：2013-03-12T18:19:05.550
> 
> 标签：grails, grails-domain-class

我有 2 个域类

```
class a {
    String name
    static constraints = {
        name unique:true
    }
}

class b {
    String description
} 
```

在域类 b 我想调用类 a

```
import a
class b {
    String description
    static constraints = {
         description unique:'a.name'
    }
} 
```

并得到错误

> 类 [b] 的属性 [描述] 的约束 [唯一] 范围必须是同一类的有效属性名称

我如何获得从 a 类到 b 类的属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:26:28.467

您需要编写一个[自定义验证器](http://grails.org/doc/latest/ref/Constraints/validator.html)来检查唯一性，因为它依赖于比单个实例更多的信息`b`。

就像是

```
static constraints {
     description validator: { val ->
         !a.findByName(val)
     }
} 
```

可能会成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T18:27:31.253

假设您尝试在 Grails 2+ 中执行此操作

你不能那样使用验证。在您的示例中，您需要引用同一域类的属性。要更正课堂上的约束，`B`您可以编写：

```
class B {
    String description
    static contraints = {
        description unique:true
    }
} 
```

但我认为你想从`a`这样完成的类中导入约束。

```
class B {
    String description
    static contraints = {
        importFrom A
    }
} 
```

请参阅[http://grails.org/doc/latest/guide/validation.html#sharingConstraints](http://grails.org/doc/latest/guide/validation.html#sharingConstraints)

这将导入两个类共享的属性的所有约束。在你的情况下是没有的。

* * *

**更新**

我有一个类似的问题并找到了解决方案。所以想在这里跟大家分享一下。该问题可以通过自定义验证器来解决。在您的情况下对 class 的限制`B`：

```
static constraints = {

    description(validator: {
        if (!it) {
            // validates to TRUE if the collection is empty
            // prevents NULL exception
            return true
        }

        def names = A.findAll()*.name
        return names == names.unique()
    })
} 
```

由于要求有点奇怪，因此很难正确回答您的问题。但也许它会有所帮助。

# css - 如何解决和补偿亚像素舍入问题？

> ID：15369029
> 
> 赞同：1
> 
> 时间：2013-03-12T18:19:07.210
> 
> 标签：css, sass, compass-sass, susy-compass

我尝试消除亚像素舍入误差已经有一段时间了，但到目前为止，我一次又一次地惨败。我试图在 Sass 和 Susy 的帮助下完成这项工作。我在上一次尝试中使用的 mixin 是从 Github 上的 Susy 问题跟踪器获得的（我使用了空间、列以及按那里建议的 margin-left/right 属性）：

```
@mixin isolate($location, $context: $columns, $dir: 'ltr') {
  @if $dir == 'ltr' {
    margin-right: -100%;
    margin-left: space($location, $context);
  }
  @else if $dir == 'rtl' {
    margin-left: -100%;
    margin-right: space($location, $context);
  }
} 
```

我的 Scss 如下所示：

```
.imggrid{
    @include with-grid-settings($gutter: 0.1%){
        $y:2;
        li{
            @include span-columns(2,12);    
            @for $x from 1 through 30
            {
                &:nth-child(#{$x}){
                    @include isolate($y,12);
                    $y: $y + 2;
                    @if $y > 12{
                       $y: 2;
                    }
                }
            }
            @include nth-omega(6n);
        }
    }
} 
```

首先，我为图像网格创建了一个自定义装订线。然后我定义了一个变量 y 以在两个步骤中进行迭代，以便能够调用隔离 mixin（isolate(2,12) 隔离 (4,12) 等）。对于大于 12 的值，该值最终在 for 循环中重置为 2。然后我为每 li 遍历 30 张图像跨越一列。每次调用迭代的isolate mixin。在 for 循环之后，我附加了 @include nth-omega(6n); 在每个第六个元素之后获得一个新行。

但不知何故，它根本不起作用。前四行缺少第一个图像，最后一行缺少前五个元素。任何想法和建议表示赞赏。谢谢拉尔夫

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T07:47:07.260

更新：我将这些 mixins 调整为 1 索引而不是 0 索引。我认为这是更常见的。

你很接近，但数学并不完全正确。保持一切正常有点复杂，所以我写了一个 mixin 来为你处理它。我还调整了隔离 mixin，以便它使用现有的 Susy`$from-direction`变量：

```
@mixin isolate($location, $context: $total-columns, $from: $from-direction) {
  $to: opposite-position($from);
  margin-#{$to}: -100%;
  margin-#{$from}: space($location - 1, $context);
}

@mixin isolate-list($columns, $context: $total-columns, $from: $from-direction) {
  $position: 1;
  $line: floor($context / $columns);

  @include span-columns($columns, $context, $from: $from);

  @for $item from 1 through $line {
    $nth: '#{$line}n + #{$item}';
    &:nth-child(#{$nth}) {
      @include isolate($position, $context, $from);
      @if $position == 1 { clear: $from; }

      $position: $position + $columns;
      @if $position > $context { $position: 1; }
    }
  }
} 
```

像`span-columns`, width & context 一样使用它。仅此而已：

```
.imggrid{
  li{
    @include isolate-list(4,12);
  }
} 
```

这应该适用于任何宽度、任何上下文、任何数量的列表项。干杯!

# mongodb - 如何将数据导入到部署的流星应用程序中？

> ID：15369034
> 
> 赞同：6
> 
> 时间：2013-03-12T18:19:29.923
> 
> 标签：mongodb, meteor

**更新：这篇文章适用于meteor.com免费托管，它已被关闭并替换为付费Meteor托管服务Galaxy**

我正在使用这个命令

```
C:\kanjifinder>meteor mongo --url kanjifinder.meteor.com 
```

获取对我部署的 mongo 应用程序的访问凭据，但我无法`mongoimport`使用这些凭据。我想我只是不完全明白哪个部分是`username`,`password`和`client`。你能帮我分解一下吗？

来自服务器的结果（我对其进行了修改以混淆真实值）：

```
mongodb://client:e63aaade-xxxx-yyyy-93e4-de0c1b80416f@meteor.m0.mongolayer.com:27017/kanjifinder_meteor_com 
```

我的 mongoimport 尝试（身份验证失败）：

```
C:\mongodb\bin>mongoimport -h meteor.m0.mongolayer.com:27017 -u client -p e63aaade-xxxx-yyyy-93e4-de0c1b80416f --db meteor --collection kanji --type csv --file c:\kanjifinder\kanjifinder.csv --headerline 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T18:33:34.510

好的，我知道了。这有帮助： [http ://docs.mongodb.org/manual/reference/connection-string/](http://docs.mongodb.org/manual/reference/connection-string/)

```
mongoimport --host meteor.m0.mongolayer.com --port 27017 --username client --password e63aaade-xxxx-yyyy-93e4-de0c1b80416f --db kanjifinder_meteor_com --collection kanji --type csv --file c:\kanjifinder\kanjifinder.csv --headerline 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-02T00:41:05.893

使用 mongodump 和 mongorestore 也可以：

1.  从现有 mongodb 转储数据（mongodb url: mongodb://USER:PASSWORD@DBHOST/DBNAME）

    ```
    mongodump -h DBHOST -d DBNAME -u USER -p PASSWORD 
    ```

    这将创建一个“转储”目录，所有数据都将转储到转储/DBNAME。

2.  获取已部署的流星应用程序的 mongodb url（即 www.mymeteorapp.com）

    ```
    meteor mongo --url METEOR_APP_URL 
    ```

    注意：密码每分钟过期一次。

3.  将数据库转储数据上传到流星应用程序（使用示例流星数据库 url）

    ```
    mongorestore -u client -p dcc56e04-a563-4147-eff4-5ae7c1253c9b -h production-db-b2.meteor.io:27017 -db www_mymeteorapp_com dump/DBNAME/ 
    ```

    所有数据都应该被传输！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-29T19:06:24.770

如果您收到 auth_failed 错误消息，则您的 mongoimport 版本与meteor.com 中使用的版本相差太大。所以你需要升级。对于 ubuntu，请参阅[https://docs.mongodb.org/manual/tutorial/install-mongodb-on-ubuntu/#install-the-latest-stable-version-of-mongodb](https://docs.mongodb.org/manual/tutorial/install-mongodb-on-ubuntu/#install-the-latest-stable-version-of-mongodb)

```
#!/bin/sh

# Script to import csvfile to meteor application deployed to free meteor.com hosting.
# Make sure your versions of mongo match with the metor.com mongo versions. 
# As Jan 2016 it seems to be 3.x something. Tested with mongoimport 3.12.

if [ $# -eq 0 ]
  then
    echo "usage: $0 xxx.meteor.com collection filename.csv"
    exit 1
fi

URL=$1
COLLECTION=$2
FILE=$3

echo Connecting to $URL, please stand by.... collection=$COLLECTION file=$FILE

PUPMS=`meteor mongo --url $URL | sed 's/mongodb:\/\// -u /' | sed 's/:/ -p /' | sed 's/@/ -h /'  | sed 's/\// -d /'`

mongoimport -v $PUPMS --type csv --headerline --collection $COLLECTION  --file $FILE 
```

# jquery - jQuery Caroufredsel 问题：当轮播项目有链接时，滑动事件失败

> ID：15369035
> 
> 赞同：2
> 
> 时间：2013-03-12T18:19:38.820
> 
> 标签：jquery, carousel, swipe, caroufredsel

我有一个使用 jQuery CarouFredSel 插件构建的轮播。它工作正常。我根据网站的说明添加了滑动功能。我正在使用 jquery touchswipe 插件。

问题是当轮播中的项目具有超链接（A 标记）时，例如：

```
<ul id="carousel">
   <li><a href="foo.html"><img src="kitten.jpg"/></a><li>
   <li><a href="foo.html"><img src="puppy.jpg"/></a><li>
</ul> 
```

这不会滑动，除非您碰巧获得图像之间的空间。然后它工作。

奇怪的是，我还使用了 Zurb Foundation Orbit 滑块，即使滑块中的图像有链接，那里的滑动事件也能正常工作。

有任何想法吗？我的初始化代码：

```
 <script>
    $("#sd").carouFredSel({
        auto        : false,
        responsive  : true,
        scroll      : 4,
        items       : {
            visible : 4,
            width   : 200
        },
        prev: {
            button  : "#sd_prev"
        },
        next: {
            button  : "#sd_next"
        },
        swipe       : {
                onTouch     : true,
                onMouse     : true
            }

    });
</script> 
```

编辑/更新：要显示当光标不在图像上时它会滑动，请参阅此屏幕截图： ![光标](../Images/96721d63f897dbc0b1b9965637027426.png)

它可以用作小提琴，但不能在实际网页中使用。 [http://jsfiddle.net/smlombardi/JqRhb/](http://jsfiddle.net/smlombardi/JqRhb/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:45:34.957

我对此问题有一个变体（滑动有效，链接无效），并按照以下说明使用第二个触摸库找到了解决方法：[CarouFredSel Plugin using TouchSwipe with links not working](https://stackoverflow.com/questions/15368514/caroufredsel-plugin-using-touchswipe-with-links-not-working)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:07:59.993

这是一个例子：http: **[//jsfiddle.net/ignaciocorreia/nAf53/](http://jsfiddle.net/ignaciocorreia/nAf53/)**

**1** - 我添加了超过 2 个项目 -> 总共 20 个

```
<li><a href="#"><img src="http://lorempixum.com/75/75" /></a></li> 
```

**2** - 添加了这 3 行 css 以便我可以浮动`<li>`

```
#sd li {display: block;float: left;height: 100px;text-align: center;width: 100px;}
#sd li a {color: #8cabbf;display: block;font: 700 10px/10px Arial;text-decoration: none;}
#sd li a img {border: 1px solid #dfe9ee;} 
```

**3** - 导入 caroufredsel 和 touchswipe 库

**4** - 加载 javascript

```
$(document).ready(function() {
    $("#sd").carouFredSel({    
        auto        : true,
        responsive  : true,
        scroll      : 4,
        items       : {
            visible : 4,
            width   : 200
        },
        prev: {
            button  : "#sd_prev"
        },
        next: {
            button  : "#sd_next"
        },
        swipe       : {
                onTouch     : true,
                onMouse     : true
            }
    });
}); 
```

# php - PDO 在 Magento 中加载正常，但在外部 CMS 中加载不正常

> ID：15369036
> 
> 赞同：0
> 
> 时间：2013-03-12T18:19:40.657
> 
> 标签：php, magento, pdo, magento-1.7

我遇到了类似于[此适配器需要 PDO 扩展的问题，但扩展未加载](https://stackoverflow.com/questions/2386575/the-pdo-extension-is-required-for-this-adapter-but-the-extension-is-not-loaded)但不一样。

Magento 安装运行良好，但是当我尝试运行时：

```
require_once(APATH.MAGEPATH.'/app/Mage.php');
umask(0);
Mage::app(); 
```

在 Magento 之外的目录中出现错误：

```
Fatal error: Uncaught exception 'Zend_Db_Adapter_Exception' with message 'The PDO extension is required for this adapter but the extension is not loaded' in
/home/inzana/public_html/Store/lib/Zend/Db/Adapter/Pdo/Abstract.php:342 
Stack trace: #0 /home/inzana/public_html/Store/lib/Zend/Db/Adapter/Abstract.php(247): Zend_Db_Adapter_Pdo_Abstract->setFetchMode(2) 
#1 /home/inzana/public_html/Store/app/code/core/Mage/Core/Model/Resource.php(165): Zend_Db_Adapter_Abstract->__construct(Array) 
#2 /home/inzana/public_html/Store/app/code/core/Mage/Core/Model/Resource.php(110): Mage_Core_Model_Resource->_newConnection('pdo_mysql', Object(Mage_Core_Model_Config_Element)) 
#3 /home/inzana/public_html/Store/app/code/core/Mage/Core/Model/Resource/Db/Abstract.php(320): Mage_Core_Model_Resource->getConnection('core_write') 
#4 /home/inzana/public_html/Store/app/code/core/Mage/Core/Model/Resource/Db/Abstract.php(350): Mage_Core_Model_Resource_Db_Abstract->_getConnection('write') 
#5 /home/inzana/public_html/Store/app/code/core/Mage/Core/Model/R in /home/inzana/public_html/Store/lib/Zend/Db/Adapter/Pdo/Abstract.php on line 342 
```

phpinfo() 报告：

```
'./configure' '--disable-fileinfo' '--enable-bcmath' '--enable-calendar' '--enable-ftp' '--enable-libxml' '--enable-magic-quotes' '--enable-mbstring' 
'--enable-pdo=shared' '--enable-sockets' '--prefix=/usr' '--with-curl=/opt/curlssl/' '--with-gd' '--with-imap=/opt/php_with_imap_client/' '--with-imap-ssl=/usr' '--with-jpeg-dir=/usr' '--with-kerberos' '--with-libxml-dir=/opt/xml2/' '--with-mcrypt=/opt/libmcrypt/' '--with-mysql=/usr' '--with-mysql-sock=/var/lib/mysql/mysql.sock' '--with-openssl=/usr' '--with-openssl-dir=/usr' '--with-pcre-regex=/opt/pcre' 
'--with-pdo-mysql=shared' 
'--with-pdo-sqlite=shared' '--with-png-dir=/usr' '--with-sqlite=shared' '--with-xpm-dir=/usr' '--with-zlib' '--with-zlib-dir=/usr' 
```

本地 php.ini 文件包括：

```
extension=pdo.so
extension=pdo_sqlite.so
extension=sqlite.so
extension=pdo_mysql.so 
```

我不知道下一步该去哪里。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-30T13:51:44.633

**检查是否安装了 pdo 扩展**

```
echo 'Checking pdo extension installed or not';
echo '<pre/>';
extension_loaded ('PDO' ); // returns boolean 
```

// 或者

```
extension_loaded('pdo_mysql'); 
```

// 或获取所有扩展名并搜索特定的扩展名

```
print_r(get_loaded_extensions());  exit(); 
```

如果已安装，则显示在打印结果数组中，如下所示

```
[41] => PDO    [42] => pdo_sqlite    [43] => pdo_mysql 
```

# javascript - 当移动浏览器上没有设置 facebook cookie 时，FB.login url 会提供一个空白页面

> ID：15369039
> 
> 赞同：3
> 
> 时间：2013-03-12T18:19:43.990
> 
> 标签：javascript, mobile, facebook-javascript-sdk

尝试在移动 Safari 和 Android 浏览器上使用 javascript SDK 登录 facebook 时，发生了一些奇怪的事情。当我清除我的“历史记录”和“cookie 和数据”并尝试使用 FB.login 方法登录 Facebook 时，Safari 和 Android 浏览器会打开一个带有身份验证 URL 的新选项卡，但保持空白。在所有桌面浏览器中，一切正常。

奇怪的是，当我清除我的“历史记录”和“cookies 和数据”时，然后访问 facebook.com（没有登录或其他任何东西），关闭网站，打开我的网站，然后尝试登录 FB，它实际上像它应该的那样工作！

所以这似乎 facebook.com 设置了一个 cookie，导致身份验证 URL 成功加载。

我一直在寻找解决这个问题的方法，但找不到任何东西，因此我的第一个 stackoverflow 帖子......

为了完整起见，这是我用来初始化 FB SDK 的代码：

```
window.isFacebookSDKLoaded = false;
window.onFacebookSDKLoaded = function () {}; //is injected with a function from another js app on the site

window.fbAsyncInit = function() {
    FB.init({
        appId      : '{{ appID }}', // App ID
        channelUrl : '{{ baseUrl }}channel.php', // Channel File
        status     : true, // check login status
        cookie     : true, // enable cookies to allow the server to access the session
        xfbml      : true  // parse XFBML
    });
    window.isFacebookSDKLoaded = true;
    window.onFacebookSDKLoaded();
};

(function(d){
 var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
 js = d.createElement('script'); js.id = id; js.async = true;
 js.src = "//connect.facebook.net/en_US/all.js";
 d.getElementsByTagName('head')[0].appendChild(js);
}(document)); 
```

我的应用程序中的其他地方我只是简单地做：（使用谷歌关闭）

```
mm.controller.facebook.DoFBLogin.prototype.doLogin = function ()
{
    FB.login( goog.bind( this.loginResult, this ), { scope: app.Config.getFBPermissions() } );
}

mm.controller.facebook.DoFBLogin.prototype.loginResult = function ( result )
{
    // logged in
}; 
```

如果有人有解决方案...在此先感谢！

# jasper-reports - 如何在 Jasper Reports 框架元素周围添加阴影或发光？

> ID：15369041
> 
> 赞同：3
> 
> 时间：2013-03-12T18:19:48.483
> 
> 标签：jasper-reports

我正在尝试通过 jrxml 代码在 Jasper Reports 框架元素周围添加阴影。目前，我将大纲样式应用于框架：

```
<style name="Frame-style">
    <box>
        <topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
        <leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
        <bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
        <rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
    </box>
</style>

<frame>
    <reportElement positionType="Float" style="Frame-style" mode="Opaque" x="0" y="0" width="512" height="100"/>
</frame> 
```

上面的代码生成一个带有 1.0 px 黑色边框的框架。不幸的是，我不知道如何添加阴影或发光。这可能吗？我可以使用带有 CSS 的 HTML 来实现这一点吗？

我将使用编译后的 .jasper 文件生成 PDF 文档。

# matlab - 每个状态的隐马尔可夫模型多个观察值

> ID：15369046
> 
> 赞同：8
> 
> 时间：2013-03-12T18:20:00.987
> 
> 标签：matlab, hidden-markov-models

我是隐马尔可夫模型的新手。我理解了主要思想，我尝试了一些 Matlab 内置的 HMM 函数来帮助我理解更多。

如果我有一系列观察和相应的状态，例如

```
seq =    2     6     6     1     4     1     1     1     5     4
states = 1     1     2     2     2     2     2     2     2     2 
```

我可以使用**hmmestimate**函数来计算转换和发射概率矩阵：

```
[TRANS_EST, EMIS_EST] = hmmestimate(seq, states) 
```

TRANS_EST =

```
0.5000    0.5000
     0    1.0000 
```

EMIS_EST =

```
 0    0.5000         0         0         0    0.5000
0.5000         0         0    0.2500    0.1250    0.1250 
```

在这个例子中，观察只是一个单一的值。

下面的示例图片描述了我的情况。 ![我的情况](../Images/b3a9c7c4401b66b072e36c0375e26fb7.png) 如果我有状态：{Sleep, Work, Sport}，并且我有一组观察结果：{lightoff, light on, heart rate>100 .....} 如果我使用数字来表示每个观察结果，在我的情况下每个state 同时有多个观察值，

```
seq =    {2,3,5}     {6,1}     {2}     {2,3,6}     {4}     {1,2}     {1}    
states = 1             1        2         2         2        2        2 
```

我不知道如何在 Matlab 中实现这一点以获得转换和发射概率矩阵。我很迷茫，下一步该怎么办？我是否使用了正确的方法？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T04:29:01.560

如果您知道隐藏状态序列，那么最大似然估计是*微不足道*的：它是归一化的经验计数。换句话说，计算跃迁和排放，然后将每行中的元素除以该行中的总计数。

在您有多个观测变量的情况下，将观测值编码为一个向量，其中每个元素给出该时间步长的随机变量之一的值，例如 '{lights=1, computer=0, Heart Rate >100 = 1 , 位置 =0}'。关键是您需要在每个时间步进行相同数量的观察，否则事情会变得更加困难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T04:43:12.470

我认为你有两个选择。1) 将多个观察值编码为一个数字。例如，如果您知道观察的最大可能值为 N，并且在每个状态下您最多可能有 K 个观察，那么您可以将观察的任何组合编码为 0 和 N^K - 1 之间的数字。通过这样做，您假设 {2,3,6} 和 {2,3,5} 不共享任何东西，它们是完全不同的两个观察结果。2) 或者您可以为每个州设置多个排放分布。我没有使用matlab中的内置函数进行HMM估计，所以我不知道它是否支持。但想法是，如果您在一个州有多个排放分布，则排放可能性只是它们的乘积。这就是杰拉德的建议。

# design-patterns - 编程流程图/问题向导的最可扩展方式？

> ID：15369050
> 
> 赞同：2
> 
> 时间：2013-03-12T18:20:08.163
> 
> 标签：design-patterns, wizard, flowchart

我被要求更新一个现有的“向导”，它向用户呈现线性问题序列。通过参考客户提供的流程图，我得到了更新此向导的任务。流程图与当前流程明显不同。鉴于目前所有内容都使用问题编号和有效答案进行了硬编码，因此很难理清所需的更改。
这让我想知道人们会使用什么样的技术来建模问题和答案的流程图/向导。我见过使用有限状态机的参考，但这似乎不太合适。我正在寻找一种技术，该技术可以轻松移动、插入和删除现有问题，而无需对硬编码引用的集合进行排序。我考虑过使用将通过 CSV 加载的数组，但不确定随着问题列表的增加，这是否易于维护。
请注意，挂起的请求还允许根据对话的流程随时跳入和跳出向导。为了避免“问题太宽泛”的回答，我正在寻找专门为此用途创建的特定模式或技术，而不是可能性列表。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T22:13:25.723

为什么有限状态机不合适？[请参阅此 wiki 中有关有限状态机](http://en.wikipedia.org/wiki/Finite-state_machine)的旋转门示例。

查看他们拥有的“状态转换表”，您可以轻松地将列标题视为`IQuestion`接口的属性：

*   当前状态：当前`IQuestion`
*   输入：`IQuestion.Answer`。
*   下一个状态：`IQuestion.NextIQuestion`
*   输出：无论它对你的系统做什么。

你得到的是一个`IQuestion`内置了路由逻辑的 s 图（可以是各种类型：MultipleChoiceQuestion、DateQuestion 等）。

您似乎担心问题的重用/重新排序，您可以通过一些抽象来处理这些问题。也许`IQuestion`不关心路由问题，而只具有 , 等属性`QuestionText`，`PossibleAnswers`然后有一个`IQuestionNode`可以存储实际图形/路由问题的属性。它可以根据固定顺序或通过检查当前问题的选定答案来处理评估`IQuestion`并提供指向下一个问题的指针。

然后，您真正需要做的就是定义一个状态/事件表（有关更多信息，请参见 wiki 说明），您的系统可以将其转换为该图表。

您可能还想查看用于根据不同需求加载不同图表的策略模式。

# c++ - AVR 在类构造函数中分配内存

> ID：15369051
> 
> 赞同：0
> 
> 时间：2013-03-12T18:20:12.697
> 
> 标签：c++, memory, avr, atmel

我正在使用 Atmel AVR ATmega328p 芯片，我正在尝试使用 FifoBuffer 类在我创建的文件 fifobuffer.h 中创建多个长度不同的环形缓冲区...

```
class FifoBuffer {

    private:

    uint8_t buf_head;  // Head position, where next character is to be added
    uint8_t buf_tail;  // Tail position, when next character is to be removed
    uint8_t buf_size;  // Size of buffer in number of characters
    uint8_t *buffer;   // Declare buffer pointer

    public:

    FifoBuffer (uint8_t); // Constructor declaration

    uint8_t get () { return buffer[2]; }

    void put (uint8_t character) { }

    void empty () { }

    uint8_t count () { return 10; }

    uint8_t head () { return buf_head; }

    uint8_t tail () { return buf_tail; }

    uint8_t size () { return buf_size; }
};

// Constructor
//
FifoBuffer::FifoBuffer (uint8_t buffer_length) {
    buf_head   = 0;
    buf_tail   = 0;
    buf_size   = buffer_length;
    buffer     = new uint8_t [buffer_length];
    buffer[1] = 20; // Test
    buffer[2] = 16; // Test
    buffer[3] = 32; // Test
} 
```

在我的 main.cpp 文件中，我有...

```
...

void *operator new(size_t s)     { return malloc(s); }
void *operator new[](size_t s)   { return malloc(s); }
void  operator delete(void *m)   { free(m); }
void  operator delete[](void *m) { free(m); }

#include "fifobuffer.h"

...

FifoBuffer tty_rx_buf(64);
FifoBuffer tty_tx_buf(64);

uint8_t ttt = tty_rx_buf.get();
show_8_bits (ttt, 'n');  
ttt = tty_rx_buf.size();
show_8_bits (ttt, 'n');  

... 
```

现在一切都符合了，`.get()`返回 16，`.size()`返回 64，这是我所期望的。但是我观察到程序的大小（程序内存使用：1194 字节，数据内存使用：11 字节）没有改变，无论我为环形缓冲区构造函数调用选择 64 还是 10 的大小。当我只调用 1 个环形缓冲区构造函数时，内存使用量确实发生了变化，分别为 1178 字节和 11 字节。

我担心该`buffer = new uint8_t [buffer_length]`行并没有真正分配 buffer_length 字节。

我的担心是否合理？有一个更好的方法吗？是的，我对此很陌生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T19:23:33.683

您没有“正确”获得内存报告的原因是编译器没有跟踪`malloc()`调用中分配的内存：例如，您可能有如下代码：

```
if (PINSB && 0x01) {
    myPtr = malloc(0x10);
} 
```

上面的示例说明`malloc()`了由于实际条件（例如输入引脚上的电压电平）而发出或未发出的调用。编译器不知道何时/如何`malloc()`以及`free()`将被调用，因此无法跟踪该内存。它跟踪的唯一内存是分配在堆栈上的变量，即没有`malloc()`调用就分配的内存。为了说明对比：

```
char dataA[10];   // Counted by compiler as memory
char* dataB = malloc(10); // Not counted by compiler except for the size of the pointer dataB itself. 
```

# php - 使用我的会话时出现 MYSQL 查询错误

> ID：15369052
> 
> 赞同：0
> 
> 时间：2013-03-12T18:20:14.973
> 
> 标签：php, mysql

我收到错误

```
Query2 Error: You have an error in your SQL syntax; check the manual that corresponds to  your MySQL server version for the right syntax to use near ' , , )' at line 1 
```

执行查询为我的购物车创建交易时。

```
function addNewTransaction($mem_id, $mem_tel, $mem_address, $mem_city, $mem_county, $mem_postcode, $mem_country, $item_id, $price, $each_item) {
// Insert into the transactions table
$query1 = mysql_query("INSERT INTO transactions (mem_id, OrderDate, Ship_Phone, Ship_Address, Ship_City, Ship_County, Ship_PostCode, Ship_Country) VALUES($member_data('mem_id'), NOW(), $member_data('mem_tel'), $member_data('mem_address'), $member_data('mem_city'), $member_data('mem_country'), $member_data('mem_postcode'), $member_data('mem_country'))");
if($query1) {
    // Get the highest ID in the transactions table. This should be the ID of the row we just inserted.
    $tempInfo = mysql_query("SELECT `order_id` ORDER BY `order_id` DESC LIMIT 1");
    $tempInfo = mysql_fetch_assoc($tempInfo);
    $orderId = $tempInfo['order_id'];

    // Insert into the transaction details table.
    $query2 = mysql_query("INSERT INTO `transactionDetails` (Order_ID, Product_ID, Price, Quantity) VALUES({$orderId}, {$item_id}, {$price}, {$each_item})");

    if($query2) {
        // Success.
    } else {
        // Error occurred.
        echo 'Query2 Error: ' . mysql_error();
    }
} else {
    // Error occurred.
    echo 'Query1 Error: ' . mysql_error();
}
} 
```

我对我的会话感到困惑，当我执行 var_dump 时，我得到了这个

```
array(5) { 
 ["num_user"]=> string(1) "1" 
 ["mem_id"]=> string(2) "11" 
 ["cartTotal"]=> string(53) "Cart Total: £8.99 GBP" 
 ["cart_array"]=> array(1) { 
     [0]=> array(3) { 
        ["item_id"]=> string(1) "7"  
        ["quantity"]=> int(1) 
        ["price"]=> NULL 
     } 
  } 
 ["product_price"]=> string(4) "1.99" 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T18:25:49.090

你在你的 sql 中错过了`FROM`子句

它应该

```
 SELECT `order_id` FROM  your_table ORDER BY `order_id` DESC LIMIT 1 
```

# timezone - Google 电子表格 - 时区查找文本

> ID：15369055
> 
> 赞同：0
> 
> 时间：2013-03-12T18:20:26.707
> 
> 标签：timezone, find, google-sheets, utc

我有一个谷歌表格，我要求人们勾选他们的时区并勾选他们的时间段。anser 可能是（每个答案都在一个单元格中给出）：

时区 = UTC+8（珀斯、北京、马尼亚尔、婆罗洲、新加坡、台北）
时隙 = 上午（上午 8 点 - 上午 10 点）、凌晨（上午 10 点 - 下午 12 点）、中午（下午 12 点 - 下午 2 点）、下午（下午 2 点 - 下午 4 点）

现在，我知道拥有这么多文本而不仅仅是一个数字，并不能帮助任何电子表格的使用，但不知何故人们会感到困惑，这似乎是我能让每个人都选中正确框的唯一方法。所以以用户友好的名义..

从这两个单元格中，我想计算一个特定时区的时隙，以便我可以比较它们（例如阿姆斯特丹是 UTC+1）。我想如果我可以使用函数来查找文本，我可以将这些单元格变成数字。

如果单元格包含“UTC+8”，那么 = 8，

并为时隙做同样的事情，我可以使用模函数或其他东西，然后继续。但是我刚从 Exel 跨过来，我必须说谷歌搜索不一样，我有点困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T03:38:30.737

如果您使用本地日期和时间，您需要为每个值设置一个偏移量，或者您需要使用完整的时区 ID（而不仅仅是偏移量）来了解这些本地时间代表什么。仅仅对 UTC 偏移量进行数学计算是不够的。这不会考虑与时区有关的所有不同规则，例如夏令时/夏令时。

我对谷歌电子表格不是很流利 - 但似乎它们确实有一些内置的时区转换功能。我不确定它们有多准确，但你应该查看[这篇博文](http://victorwyee.com/gapps/change-time-zone-date-time-data-google-spreadsheets/)，其中有一些很好的信息。

# if-statement - if语句在lua中失败

> ID：15369056
> 
> 赞同：0
> 
> 时间：2013-03-12T18:20:37.810
> 
> 标签：if-statement, lua

我有以下测试lua代码：

```
 err = nextUsernumber
   res = false 
   if not res and err then
      print("error")
      errtxt = err
   end 
```

但是逻辑永远不会进入 if 语句。

我尝试在 if 子句周围加上括号（），如下所示：

```
if (not res) and (err) then 
```

你能告诉我我错过了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T18:22:24.783

它是`if ... then`（见[手册](http://www.lua.org/manual/5.2/manual.html#3.3.4)）：

```
if not res and err then
  print("error")
  errtxt = err
end 
```

此外，请确保在控制语句`err`中既不是`nil`也不是`false`因为两者都被视为错误（请参阅上面的手册部分）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T18:22:28.967

您缺少该`then`条款。Lua 需要一个`then`if 语句。

```
if not res and err then
    print("error")
    errtxt = err
end 
```

# c++ - 如何保持更改？

> ID：15369067
> 
> 赞同：0
> 
> 时间：2013-03-12T18:21:07.577
> 
> 标签：c++, class, function, pointers, direct2d

我有 MainScreen.cpp

```
void MainScreen::Show(D2DResources* pD2DResources)
{
    HRESULT hr = S_OK;

    ID2D1Bitmap* pBitmap=pD2DResources->GetpCurrentScreen();

    hr = pD2DResources->LoadBitmapFromFile(
        pD2DResources->GetpRT(),
        pD2DResources->GetpIWICIF(),
        L".\\Images\\MainScreen.jpg",
        0,
        0,
        &pBitmap
        );

    if(SUCCEEDED(hr))pD2DResources->DrawScreen();
} 
```

在某些时候 MainScreen::Show() 函数被这样调用

```
MainScreen->Show(&d2DResources); 
```

但是，似乎当 pD2DResources 在 MainScreen::Show() 函数中调用 DrawScreen() 时，存储在 &pBitmap 中的任何内容都没有保存。实际上，我得到了一个未处理的异常，并且当它发生时，应该收到 pBitmap 的值的 pCurrentScreen 是 0x00000000。

我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T15:45:44.343

如您所知，LoadBitmapFromFile 函数失败
所以您应该检查 LoadBitmapFromFile 函数的参数

但是为什么将 pD2DResources->GetpCurrentScreen() 分配给 pBitmap？
下一行，pBitmap 将再次分配 LoadBitmapFromFile 函数。

此外，如果 MainScreen 的 Show 函数调用每一帧，那效率不高。
因为您不必每帧都加载位图。
并且应该释放 d2d 位图。

# html - 我正在尝试使用媒体查询，但它们不起作用

> ID：15369068
> 
> 赞同：1
> 
> 时间：2013-03-12T18:21:07.640
> 
> 标签：html, css, media-queries

当我使用宽度作为我的参数“最小宽度”媒体查询工作正常。但是当我使用最小高度和最大高度时，我输入的最后一个尺寸是有效的。我的代码：

```
@media only screen 
and (min-height : 0px)  , screen and (max-height: 600px) {

#guy{
    position:absolute;
    top:180px;
    width:100%;
    height:680px;
    background:url(../img/guy.png);
    background-repeat:no-repeat;
    z-index:1;
    background-size: 650px 450px;
    }

}

@media only screen 
and (min-height : 601px)  , screen and (max-height: 800px)   {

#guy {
    position: absolute;
    top: 80px;
    width: 100%;
    height: 680px;
    background: url(../img/guy.png);
    background-repeat: no-repeat;
    z-index: 1;
    background-size: 450px 250px;
    background-position: center center;
    }

}

@media only screen 
and (min-height : 800px)  , screen and (max-height: 1000px) {

#guy {
    position: absolute;
    top: 160px;
    width: 100%;
    height: 680px;
    background: url(../img/guy.png);
    background-repeat: no-repeat;
    z-index: 1;
    background-size: 650px 450px;
    background-position: center center;
    }

}

@media only screen 
and (min-height : 1001px)  , screen and (max-height: 1600px) {

#guy {
    position: absolute;
    top: 220px;
    width: 100%;
    height: 680px;
    background: url(../img/guy.png);
    background-repeat: no-repeat;
    z-index: 1;
    background-size: 850px 650px;
    background-position: center center;
    }

}

@media only screen 
and (min-height : 1601px)  , screen and (max-height: 4000px) {

        #guy {
    position: absolute;
    top: 260px;
    width: 100%;
    height: 680px;
    background: url(../img/guy.png);
    background-repeat: no-repeat;
    z-index: 1;
    }

} 
```

而且无论我的屏幕分辨率如何，只有最小高度：1600px 和最大 4000px 有效，如果我没记错的话，我可以使用高度作为参数正确吗？我也不认为存在语法问题。有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T18:29:20.780

看起来您的媒体查询没有正确编写。您的第一个属性后有一个逗号，然后重新声明屏幕。看：

```
@media only screen and (min-height : 0px)  , screen and (max-height: 600px) { 
```

相对

```
@media only screen and (min-height : 0px) and (max-height: 600px) { 
```

* * *

如果你尝试这个，它应该开始工作：

```
@media only screen and (min-height : 0px) and (max-height: 600px) {

    #guy {
        position:absolute;
        top:180px;
        width:100%;
        height:680px;
        background:url(../img/guy.png);
        background-repeat:no-repeat;
        z-index:1;
        background-size: 650px 450px;
    }
}

@media only screen and (min-height : 601px) and (max-height: 800px) {

    #guy {
        position: absolute;
        top: 80px;
        width: 100%;
        height: 680px;
        background: url(../img/guy.png);
        background-repeat: no-repeat;
        z-index: 1;
        background-size: 450px 250px;
        background-position: center center;
    }
}

@media only screen and (min-height : 800px) and (max-height: 1000px) {

    #guy {
        position: absolute;
        top: 160px;
        width: 100%;
        height: 680px;
        background: url(../img/guy.png);
        background-repeat: no-repeat;
        z-index: 1;
        background-size: 650px 450px;
        background-position: center center;
    }
}

@media only screen and (min-height : 1001px) and (max-height: 1600px) {

    #guy {
        position: absolute;
        top: 220px;
        width: 100%;
        height: 680px;
        background: url(../img/guy.png);
        background-repeat: no-repeat;
        z-index: 1;
        background-size: 850px 650px;
        background-position: center center;
    }
}

@media only screen and (min-height : 1601px) and (max-height: 4000px) {

    #guy {
        position: absolute;
        top: 260px;
        width: 100%;
        height: 680px;
        background: url(../img/guy.png);
        background-repeat: no-repeat;
        z-index: 1;
    }
} 
```

这是一个工作的 codepen 示例：[http](http://codepen.io/kpeatt/pen/pkDxq) ://codepen.io/kpeatt/pen/pkDxq - 调整框架的高度以查看它的实际效果。

# parsing - 小型语言解析器的 Bison Shift/Reduce 冲突

> ID：15369070
> 
> 赞同：1
> 
> 时间：2013-03-12T18:21:12.790
> 
> 标签：parsing, grammar, bison, yacc, shift-reduce-conflict

我的目标是为一种小语言创建一个解析器。它目前给我一个班次/减少错误。

我的 CFG 在某处模棱两可，但我不知道在哪里

```
prog:    PROGRAM beg                   {$$ = "program" $2;}
    |   PROGRAM stmt beg               {$$ = "program" $2 $3;}

beg:    BEG stmt END                   {$$ = "begin" $2 "end";}
    | BEG END                      {$$ = "begin" "end";}

stmt:   beg             {$$ = $1;}
    | if_stmt                   {$$ = $1;}/*
    | IF expr THEN stmt                 {$$ = $1 $2 $3 $4;}*/
    | WHILE expr beg                    {$$ = "while" $2 $3;}
    | VAR COLEQUALS arithexpr SEMI      {$$ = $1 ":=" $3 ";";}
    | VAR COLON INTEGER SEMI            {$$ = $1 ":" "integer" ";";} /*Declaring an integer */
    | VAR COLON REAL SEMI               {$$ $1 ":" "real" ";";}   /*declaring a real */

if_stmt:  IF expr THEN stmt            {$$ = "if" $2 "then" $4;}
    | IF expr THEN stmt ELSE stmt      {$$ = "if" $2 "then" $4 "else" $6;}

expr:   NOT VAR                        {$$ = "!" $2;}
| VAR GREATERTHAN arithexpr        {$$ = $1 ">" $3;}
    | VAR LESSTHAN arithexpr           {$$ = $1 "<" $3;}
    | VAR GREATERTHANEQUALTO arithexpr {$$ = $1 ">=" $3;}
    | VAR LESSTHANEQUALTO arithexpr    {$$ = $1 "<=" $3;}
    | VAR EQUALS arithexpr             {$$ = $1 "==" $3;}
    | VAR NOTEQUALS arithexpr          {$$ = $1 "!=" $3;}
    | arithexpr AND arithexpr          {$$ = $1 "&&" $3;}
    | arithexpr OR arithexpr           {$$ = $1 "||" $3;}

arithexpr:  arithexpr PLUS term            {$$ = $1 + $3;}
    |  arithexpr MINUS term            {$$ = $1 - $3;}
    |   term                   {$$ = $1;}

term:   term TIMES factor          {$$ = $1 * $3;}
    | term DIVIDE factor           {$$ = $1 / $3;}
    | factor               {$$ = $1;}

factor:   VAL                              {$$ = $1;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:02:03.407

“错误”来自`if`_stmt`else`部分的歧义：`stmt`可以是 if_stmt，如果 else-part 属于哪个则不清楚，例如，如果你写：

```
if y1 then if y2 then x=1 else x=2 
```

那么 else 部分可以属于第一个 if 或第二个。

这个问题已经被问过很多次了，只要搜索`if then else shift reduce`

对于诊断（发现您也是该`if then else shift reduce`问题的受害者），您可以告诉野牛生成一个输出文件

```
bison -r all  myparser.y 
```

这将生成一个文件 myparser.output，您可以在其中找到适合您的情况：

```
State 50 conflicts: 1 shift/reduce
....
state 50

   11 if_stmt: IF expr THEN stmt .  [ELSE, BEG, END]
   12        | IF expr THEN stmt . ELSE stmt

    ELSE  shift, and go to state 60

    ELSE      [reduce using rule 11 (if_stmt)]
    $default  reduce using rule 11 (if_stmt)

state 51
... 
```

对此的一种解决方案是引入一个块语句，并且仅在 if 和 else 部分中将这些语句作为语句：

```
stmt: ...
    | blk_stmt
blk_stmt: BEGIN stmt END
if_stmt:  IF expr THEN blk_stmt
    | IF expr THEN blk_stmt ELSE blk_stmt 
```

对于修改后的 c 语言，这意味着只有

```
if x1 then {if x2 then {y=1}} else {y=2} 
```

是可能的（`{`代表BEGIN-token和`}`代表END-token）从而解决歧义。

# jquery - 使用 iframe 将 div 从一个页面显示到另一个页面

> ID：15369071
> 
> 赞同：0
> 
> 时间：2013-03-12T18:21:13.027
> 
> 标签：jquery, html

我有一个尝试使用 iframe 将一个 div 元素从一个页面显示到另一个页面。可能吗？我可能可以获得整个页面，但如果只想要页面的特定部分怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:40:00.770

您可以尝试使用锚点。在父页面上，添加一个 ID 到 （`div`如果您还没有这样做的话）。然后，在 中`iframe`，将`src`' [http://yoursi.te/#div-id](http://yoursi.te/#div-id) '设置`div-id`为“div”的 ID。

这使得它`iframe`自动向下滚动到`div`而不是从顶部开始。

除此之外，您可以尝试在设置 URL 参数时使用 JavaScript 从 DOM 中动态删除元素（`iframe`指向“ [http://yoursi.te/?only-div=true](http://yoursi.te/?only-div=true) ”的点）。

然后在父站点上，[使用 JavaSciript 获取查询](https://stackoverflow.com/questions/1403888/get-url-parameter-with-jquery)`div`并删除除if 参数返回之外的所有其他元素`'true'`。

# ruby-on-rails - 如何在 Rails 上将响应正文打印到 stdout/stderr

> ID：15369072
> 
> 赞同：5
> 
> 时间：2013-03-12T18:21:13.153
> 
> 标签：ruby-on-rails, debugging

我想将我的应用程序生成的响应正文打印到 stdout/stderr 以进行调试。流量是服务器-服务器，所以我不能使用客户端工具来获取 http 流量。

`puts @response.body`在[http://api.rubyonrails.org/classes/ActionDispatch/Response.html](http://api.rubyonrails.org/classes/ActionDispatch/Response.html)中提到了，但是在我的应用程序控制器`@response`中是未定义的。有没有办法让我打印响应正文以登录我的 Rails 应用程序，如果有，怎么做？

* * *

根据给出的答案，它是这样的：

```
after_filter :print_response_body, :only => [:index]

def print_response_body 
  $stderr.puts response.body
end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T18:38:44.160

在您的控制器中，尝试

```
after_filter do
  puts response.body
end 
```

# android - Android - 在活动中获取纬度和经度的错误测试

> ID：15369075
> 
> 赞同：0
> 
> 时间：2013-03-12T18:21:17.497
> 
> 标签：android, gps, latitude-longitude

我正在测试我的活动以获取 GPS 坐标（纬度、经度），但是当单击注册按钮时，日志猫显示错误。我打算测试这段代码

```
Log.d(ACCESSIBILITY_SERVICE, Double.toString(gps.getLatitude())); 
```

这是我的代码。 **MainActivity.java**

```
public class MainActivity extends Activity {

    protected static final String PREFS_NAME = null;
    String prefName = "MyPref";
    EditText editText01, editText02;
    GPSTracker gps;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        editText01 = (EditText) findViewById(R.id.EditText01);  //Trusted phone number
        editText02 = (EditText) findViewById(R.id.EditText02);  //Email address
        Button RegisterButton = (Button) findViewById(R.id.btnRegister);    //RegisterButton

        RegisterButton.setOnClickListener(new View.OnClickListener(){
            public void onClick(View v){

                SharedPreferences prefs = getSharedPreferences(PREFS_NAME, 0);
                SharedPreferences.Editor editor = prefs.edit();

                editor.putString("trustedNum", editText01.getText().toString());
                editor.putString("Email", editText02.getText().toString());

                TelephonyManager tm = (TelephonyManager) getApplicationContext().getSystemService(Context.TELEPHONY_SERVICE);
                editor.putString("storedSimSerial", tm.getSimSerialNumber());

                editor.commit();

                Log.d(ACCESSIBILITY_SERVICE, Double.toString(gps.getLatitude()));

                Toast.makeText(getApplicationContext(), "saved", 3000).show();

            }
    });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

**GPSTracker.java** 包 com.example.sms；

```
public class GPSTracker extends Service implements LocationListener {

    private final Context mContext;

    // flag for GPS status
    boolean isGPSEnabled = false;

    // flag for network status
    boolean isNetworkEnabled = false;

    // flag for GPS status
    boolean canGetLocation = false;

    Location location; // location
    double latitude; // latitude
    double longitude; // longitude

    // The minimum distance to change Updates in meters
    private static final long MIN_DISTANCE_CHANGE_FOR_UPDATES = 10; // 10 meters

    // The minimum time between updates in milliseconds
    private static final long MIN_TIME_BW_UPDATES = 1000 * 60 * 1; // 1 minute

    // Declaring a Location Manager
    protected LocationManager locationManager;

    public GPSTracker(Context context) {
        this.mContext = context;
        getLocation();
    }

    public Location getLocation() {
        try {
            locationManager = (LocationManager) mContext
                    .getSystemService(LOCATION_SERVICE);

            // getting GPS status
            isGPSEnabled = locationManager
                    .isProviderEnabled(LocationManager.GPS_PROVIDER);

            // getting network status
            isNetworkEnabled = locationManager
                    .isProviderEnabled(LocationManager.NETWORK_PROVIDER);

            if (!isGPSEnabled && !isNetworkEnabled) {
                // no network provider is enabled
            } else {
                this.canGetLocation = true;
                // First get location from Network Provider
                if (isNetworkEnabled) {
                    locationManager.requestLocationUpdates(
                            LocationManager.NETWORK_PROVIDER,
                            MIN_TIME_BW_UPDATES,
                            MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                    Log.d("Network", "Network");
                    if (locationManager != null) {
                        location = locationManager
                                .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
                        if (location != null) {
                            latitude = location.getLatitude();
                            longitude = location.getLongitude();
                        }
                    }
                }
                // if GPS Enabled get lat/long using GPS Services
                if (isGPSEnabled) {
                    if (location == null) {
                        locationManager.requestLocationUpdates(
                                LocationManager.GPS_PROVIDER,
                                MIN_TIME_BW_UPDATES,
                                MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                        Log.d("GPS Enabled", "GPS Enabled");
                        if (locationManager != null) {
                            location = locationManager
                                    .getLastKnownLocation(LocationManager.GPS_PROVIDER);
                            if (location != null) {
                                latitude = location.getLatitude();
                                longitude = location.getLongitude();
                            }
                        }
                    }
                }
            }

        } catch (Exception e) {
            e.printStackTrace();
        }

        return location;
    }

    /**
     * Stop using GPS listener
     * Calling this function will stop using GPS in your app
     * */
    public void stopUsingGPS(){
        if(locationManager != null){
            locationManager.removeUpdates(GPSTracker.this);
        }
    }

    /**
     * Function to get latitude
     * */
    public double getLatitude(){
        if(location != null){
            latitude = location.getLatitude();
        }

        // return latitude
        return latitude;
    }

    /**
     * Function to get longitude
     * */
    public double getLongitude(){
        if(location != null){
            longitude = location.getLongitude();
        }

        // return longitude
        return longitude;
    }

    /**
     * Function to check GPS/wifi enabled
     * @return boolean
     * */
    public boolean canGetLocation() {
        return this.canGetLocation;
    }

    /**
     * Function to show settings alert dialog
     * On pressing Settings button will lauch Settings Options
     * */
    public void showSettingsAlert(){
        AlertDialog.Builder alertDialog = new AlertDialog.Builder(mContext);

        // Setting Dialog Title
        alertDialog.setTitle("GPS is settings");

        // Setting Dialog Message
        alertDialog.setMessage("GPS is not enabled. Do you want to go to settings menu?");

        // On pressing Settings button
        alertDialog.setPositiveButton("Settings", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog,int which) {
                Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                mContext.startActivity(intent);
            }
        });

        // on pressing cancel button
        alertDialog.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
            dialog.cancel();
            }
        });

        // Showing Alert Message
        alertDialog.show();
    }

    @Override
    public void onLocationChanged(Location location) {
    }

    @Override
    public void onProviderDisabled(String provider) {
    }

    @Override
    public void onProviderEnabled(String provider) {
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
    }

    @Override
    public IBinder onBind(Intent arg0) {
        return null;
    }

} 
```

**清单.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.sms"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <uses-permission android:name="android.permission.SEND_SMS" />
    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE"/>
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <receiver android:name=".BootComplete">  
            <intent-filter>   
                <action android:name="android.intent.action.BOOT_COMPLETED"/>  
                <category android:name="android.intent.category.DEFAULT" />  
            </intent-filter> 
            <intent-filter>   
                <action android:name="android.intent.action.READ_PHONE_STATE"/>  
                <category android:name="android.intent.category.DEFAULT" />  
            </intent-filter> 
        </receiver>

        <activity
            android:name="com.example.sms.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

**错误代码显示**

```
03-12 18:10:56.200: E/AndroidRuntime(2368): FATAL EXCEPTION: main
03-12 18:10:56.200: E/AndroidRuntime(2368): java.lang.NullPointerException
03-12 18:10:56.200: E/AndroidRuntime(2368):     at com.example.sms.MainActivity$1.onClick(MainActivity.java:56)
03-12 18:10:56.200: E/AndroidRuntime(2368):     at android.view.View.performClick(View.java:4211)
03-12 18:10:56.200: E/AndroidRuntime(2368):     at android.view.View$PerformClick.run(View.java:17267)
03-12 18:10:56.200: E/AndroidRuntime(2368):     at android.os.Handler.handleCallback(Handler.java:615)
03-12 18:10:56.200: E/AndroidRuntime(2368):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-12 18:10:56.200: E/AndroidRuntime(2368):     at android.os.Looper.loop(Looper.java:137)
03-12 18:10:56.200: E/AndroidRuntime(2368):     at android.app.ActivityThread.main(ActivityThread.java:4898)
03-12 18:10:56.200: E/AndroidRuntime(2368):     at java.lang.reflect.Method.invokeNative(Native Method)
03-12 18:10:56.200: E/AndroidRuntime(2368):     at java.lang.reflect.Method.invoke(Method.java:511)
03-12 18:10:56.200: E/AndroidRuntime(2368):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
03-12 18:10:56.200: E/AndroidRuntime(2368):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
03-12 18:10:56.200: E/AndroidRuntime(2368):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:24:39.087

哦*，天哪*！你设置`PREFS_NAME = null`然后在你的代码中使用它！你忘记初始化了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:25:18.710

这里

```
Log.d(ACCESSIBILITY_SERVICE, Double.toString(gps.getLatitude()));
                                             ^^^ 
```

`gps`为 null 您必须先初始化`gps`实例，然后再将其用作：

```
gps=new GPSTracker(MainActivity.this);  //<<< initialize here
Log.d(ACCESSIBILITY_SERVICE, Double.toString(gps.getLatitude())); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T18:25:54.360

GPSTracker gps 在哪里初始化？你直接使用它。

# javascript - jQuery .on() 似乎不起作用

> ID：15369079
> 
> 赞同：0
> 
> 时间：2013-03-12T18:21:19.603
> 
> 标签：javascript, jquery

```
 $('.catNameVal').on('hover', function() {
            notyId = $(this).attr("catnameid");
            $(this).append(' <a>Delete</a>');
            $(this).unbind('mouseenter mouseleave');
        }); 
```

由于某种原因，该`.on()`方法不起作用。我有一个向 DOM 添加新值的文本框，上面的代码应该发现那些新的 DOM 元素。我以前遇到过这个问题，但就是想不通它的原因。有什么建议么？还要记住`.live()`也不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T18:23:55.657

如果要添加到 DOM，则需要使用委托版本。

```
$(document).on('hover', '.catNameVal', function() { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T18:27:03.507

你很接近，但绑定不是你想象的那样动态。你在这里做什么：

```
$('.catNameVal').on('hover', function() {
    notyId = $(this).attr("catnameid");
    $(this).append(' <a>Delete</a>');
    $(this).unbind('mouseenter mouseleave');
}); 
```

用于`.on()`绑定到所有*当前已知*的匹配到`'.catNameVal'`，事后不会发现 DOM 的新添加。你想要做的是将它绑定到一个通用的父 DOM 元素到所有的添加。 `document`通常是一个安全的选择，因为一切都是它的孩子。然后你会在绑定中包含过滤器：

```
$(document).on('hover', '.catNameVal', function() {
    notyId = $(this).attr("catnameid");
    $(this).append(' <a>Delete</a>');
    $(this).unbind('mouseenter mouseleave');
}); 
```

它的作用是将实际事件绑定到`document`但`'.catNameVal'`在评估事件时应用选择器。因此，所有冒泡的匹配事件都`document`将被评估、检查过滤器，并在它们匹配时执行。这会捕获后期添加的 DOM 元素，因为它们仍会冒泡到`document`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T18:23:52.753

悬停不是标准事件。你不能检查悬停，它必须是鼠标输入。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-03-12T18:23:39.390

您需要在创建新元素后调用 .on 以重新绑定事件处理程序。它不会发现新元素。

但这会破坏 .on 将事件委托给处理程序的目的。所以更好的解决方案是在父节点上设置绑定：

$('#catNameValParentNode').on('hover' ...

你明白了。然后它将悬停事件和该处理程序委托给 id 为 catNameValParentNode 的所有子元素

# java - JasperReportBuilder HTML 行高

> ID：15369083
> 
> 赞同：0
> 
> 时间：2013-03-12T18:21:26.127
> 
> 标签：java, html, dynamic-reports

我正在使用*JasperReportBuilder*从 JDBC 数据源构建报告，然后通过使用*JasperHtmlExporterBuilder*对象参数调用*toHtml*方法将其导出为 HTML。我一直在尝试消除每一行、列标题行甚至我的标题中文本上方存在的额外空间。我已经尝试了我能想到的一切，并且一直在网上搜索无济于事。

 *似乎大多数人都有相反的问题：他们需要增加行以适应他们的文本。我想强制我的行成为其内容的高度。如果那不可能，我会很高兴限制我的行的高度。

HTML 导出器似乎通过插入图像并设置其高度来控制我的行的高度。

任何帮助，将不胜感激。谢谢！

编辑：这是我的代码。

```
String imageServletUrl = "images?image=";

StringWriter writer = new StringWriter();

JasperHtmlExporterBuilder htmlExporter = Exporters.htmlExporter(writer);
htmlExporter.setImagesURI(imageServletUrl);

SqlRowSet rowSet = getData(databaseIpAddr, portNumber, databaseName, databaseUser, databasePassword);

JRDataSource ds = createDataSource(rowSet);

JasperReportBuilder builder = DynamicReports.report();

IntegerType intType = DynamicReports.type.integerType();
DateType dateType = DynamicReports.type.dateType();

int rowHeightPx = 20;

TextColumnBuilder<Integer> col1 = col
   .column(COL_TITLE_RESULT_NUM, RESULTS_COL_TITLE_RESULT_NUM, intType)
   .setWidth(35)
   .setFixedHeight(rowHeightPx)
   .setStretchWithOverflow(true);   

... create other eight columns ...

StyleBuilder titleStyle = stl.style()
   .bold()
   .setFontSize(22)
   .setHorizontalAlignment(HorizontalAlignment.CENTER);

StyleBuilder columnTitleStyle = stl.style()
   .bold()
   .setAlignment(HorizontalAlignment.CENTER, VerticalAlignment.MIDDLE)
   .setBorder(stl.pen1Point());

StyleBuilder columnStyle = stl.style()
   .setAlignment(HorizontalAlignment.CENTER, VerticalAlignment.MIDDLE)
   .setLineSpacing(LineSpacing.SINGLE)
   .setBorder(stl.pen1Point());

TextFieldBuilder<String> titleBuilder = DynamicReports.cmp
   .text(selectedAgency)
   .setStyle(titleStyle)
   .setFixedHeight(20);

TextFieldBuilder<String> subtitleBuilder = DynamicReports.cmp
   .text("Start Time: " + startDate + " " + getStartTime() + ", End Time: " + endDate + " " + getEndTime())
   .setFixedHeight(20);

TextFieldBuilder<String> noDataMsgBuilder = DynamicReports.cmp
   .text(NO_DATA_MSG)
   .setStyle(columnStyle);

builder
   .title(titleBuilder)
   .addPageHeader(subtitleBuilder)
   .setColumnTitleStyle(columnTitleStyle)
   .columns(col1, col2, col3, col4, col5, col6, col7, col8, col9)
   .setColumnStyle(columnStyle)
   .highlightDetailOddRows()
   .noData(titleBuilder, subtitleBuilder, noDataMsgBuilder)
   .setWhenNoDataType(WhenNoDataType.NO_DATA_SECTION);

String reportHtml;
try {
   // this seems to be required to get to the DynamicReports images
   getContext().getRequest().getSession().setAttribute(ImageServlet.DEFAULT_JASPER_PRINT_SESSION_ATTRIBUTE, builder.toJasperPrint());

   builder.toHtml(htmlExporter);

   reportHtml = writer.toString();
}
catch (DRException e) 
{
   e.printStackTrace();
   reportHtml = "There was an error generating the report";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T04:54:03.367

**编辑：**以下解决方案仅适用于**DynamicJasper**库而不是 DynamicReports。我相信在 DR API 中也必须有类似的操作（虽然不确定 - 我对 DR 的接触非常有限:()。

DynamicReportBuilder::setHeaderHeight(..) 、 setDetailHeight(..) 和 JRHtmlExporterParameter.IS_USING_IMAGES_TO_ALIGN 参数设置的组合一定要做吗？

```
// build dynamicreport instance
DynamicReportBuilder dynamicReportBuilder = new DynamicReportBuilder();

dynamicReportBuilder.setHeaderHeight(50); //sets the column header height
dynamicReportBuilder.setDetailHeight(50); //sets the detail band rows height

DynamicReport dynamicReport = dynamicReportBuilder.build();

// build jasperprint..
JasperPrint jasperPrint = DynamicJasperHelper.generateJasperPrint(
    dynamicReport, new ClassicLayoutManager(), dataSource, new HashMap<String, Object>());

// export as html
JRExporter exporter = new JRHtmlExporter();

// tell jasper not to use images for aligning
exporter.setParameter(JRHtmlExporterParameter.IS_USING_IMAGES_TO_ALIGN, Boolean.FALSE);

exporter.setParameter(JRExporterParameter.JASPER_PRINT, jasperPrint);
exporter.setParameter(JRExporterParameter.OUTPUT_FILE_NAME, targetFile);

exporter.exportReport(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:10:58.210

将报告带高度调整为每个带的行的高度，确保行之间没有任何空白空间。如果您想拥有“空行”，请创建一个空文本字段，其宽度为相应波段。将报告视为关于网格的。*

# vim - Vim：删除光标周围的空行

> ID：15369088
> 
> 赞同：10
> 
> 时间：2013-03-12T18:21:37.903
> 
> 标签：vim

假设我正在编辑以下文档（* = 光标）：

```
Lions
Tigers

Kittens
Puppies

*

  Humans 
```

我可以使用什么顺序来删除周围的空白，这样我就剩下：

```
Lions
Tigers

Kittens
Puppies
*
  Humans 
```

注意：我正在寻找一个可以处理任意数量的空行的答案，而不仅仅是这种情况。

**编辑 1：**行号未知，我只想影响光标所在的跨度。

**编辑 2：**编辑示例以显示我需要在边缘保留前导空格

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-12T20:10:27.020

简单的。在正常模式下，`dipO<Esc>`应该这样做。

解释：

*   `dip`on a blank line 删除它和所有相邻的空白行。
*   `O<Esc>`打开一个新的空行，然后返回正常模式。

**`cip<Esc>`**正如@Lorkenpeist 所建议的，更简洁的是，将这两个步骤合二为一。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-12T19:13:55.307

一种可能的解决方案是使用`:join`带有范围的命令：

```
:?.?+1,/./-1join! 
```

解释：

*   `[range]join!`将一条线连接在一起`[range]`。`!`无需插入任何额外空间的方法。
*   起点是向后搜索到第一个字符，然后向下搜索 1 行，`?.?+1`
*   `1`可以假设in`+1`可以缩写为`?.?+`
*   终点是向前搜索到下一个字符，然后向上搜索 1 行，`/./-1`
*   和之前一样，`1`可以这样假设，`/./-`
*   由于我们使用相同的模式，因此只能向前搜索，因此可以省略该模式。`//-`
*   该命令`:join`可以简写为`:j`

最终缩短的命令：

```
:?.?+,//-j! 
```

以下是一些可能很方便的相关命令：

1）删除所有空行：

*   `:g/^$/d`
*   `:v/./d`

2) 将所有空行压缩成 1 个空行：

*   `:v/./,//-j`

如需更多帮助，请参阅：

```
:h :j
:h [range]
:h :g
:h :v 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-12T18:41:29.900

**简短的回答：** `()V)kc<esc>`

在正常模式下，如果您键入，`()`您的光标将移动到第一个空白行。 `(`将光标移动到前一个非空行块的开头，并将`)`光标移动到末尾（具体来说，到所述块之后的第一个空行）。然后一个简单的`d)`将删除所有文本，直到下一个非空行的开头。所以完整的序列是`()d)`。

编辑：你是对的，这会删除下一个非空行开头的空格。而不是`d)`尝试`V)kd`。 `V`使您进入可视行模式，`)`跳转到第一个非空白行（跳过行首的空格），`k`将光标向上移动一行。此时您已经选择了所有空白行，因此`d`删除了选择。

最后，键入`O`（大写 O），然后键入 escape 以创建一个新的空白行来替换您删除的那些。或者，替换`dO<Escape>`with`c<Escape>`用更少的键击做同样的事情，所以整个序列将是`()V)kc<Esc>`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T18:30:17.850

## 更新问题后，这些答案无关紧要：

这可能不是您想听到的答案，但我会使用范围。查看第一个空行（例如 55）和倒数第二个空行（可能是 67）的行号。然后就做`:55,67d`。

或者，也许您只希望整个文件中只有一个空行。在这种情况下，您可以匹配任何出现的一个或多个空行并将它们替换为一个空行。

```
:%s/\(^$\n\)\+/\r/ 
```

## 这个答案有效：

如果您只想使用普通模式，您可以搜索最后一行的内容。例如，

```
/.<Enter>kkVNjd 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-12T18:55:23.620

我没有进行太多测试，但它应该适用于您的示例。也许有更优雅的解决方案。

```
function! DelWrapLines()
    while match(getline('.'),'^\s*$')>=0
        exe 'normal kJ'
    endwhile
    exe 'silent +|+,/./-1d|noh'
    exe 'normal k'
endfunction 
```

来源并尝试`:call DelWrapLines()`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-06T03:43:58.257

我知道这个问题已经解决了，但我刚刚在“sed & awk, 2nd Ed”中找到了一个很好的解决方案。(O'Reilly) 我认为值得分享的。它根本不使用 vim，而是使用 sed。此脚本将用一个空行替换一个或多个空行（假设这些行中没有空格）的所有实例。在命令行上：

```
sed '/ˆ$/{
N
/ˆ\n$/D
}' myfile 
```

请记住，sed 实际上并不编辑文件，而是将编辑后的行打印到标准输出。您可以将此输入重定向到文件：

```
sed '/ˆ$/{
N
/ˆ\n$/D
}' myfile > tempfile 
```

不过要小心，如果您尝试将其直接写入`myfile`，它只会删除文件的全部内容，这显然不是您想要的！将输出写入 后`tempfile`，您就可以`mv tempfile myfile`tada 了！多个空行的所有实例都被一个空行替换。

**更好的是：**

```
cat -s myfile > temp
mv temp myfile 
```

猫太棒了，是吗？

**最好的：**

如果您想在 vim 中执行此操作，您可以使用 vim 在 vi​​m 中的一系列行上执行 shell 命令的便捷功能用单个空行替换多个空行的所有实例。

```
:%!cat -s 
```

仅此而已，您的整个文件都被重新格式化了！

# java - 在 Hibernate 中使用 LIKE %

> ID：15369090
> 
> 赞同：3
> 
> 时间：2013-03-12T18:21:41.680
> 
> 标签：java, sql, spring, hibernate, hsqldb

如何`LIKE %`在 Hibernate 中使用。`LIKE %`我想在我的`hbm.xml`文件中使用 SQL 。我有 2 个查询要合并为 1 个。

**查询如下所示：**

```
select * from PAY_GROUP_VW where CASE_SID=? AND CASE_TLE like %?% 
```

我也试过了`%?%`。我没有使用like子句`%`，它可以工作。但`%`不起作用。

**包装异常：**

```
org.springframework.dao.InvalidDataAccessResourceUsageException: could not execute query; nested exception is org.hibernate.exception.SQLGrammarException: could not execute query
    at org.springframework.orm.hibernate3.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:630)
    at org.springframework.orm.hibernate3.HibernateAccessor.convertHibernateAccessException(HibernateAccessor.java:412)
    at org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:424)
    at org.springframework.orm.hibernate3.HibernateTemplate.executeFind(HibernateTemplate.java:343) 
```

**这就是我传递参数的方式：**

```
q.setParameter(0, csId);
q.setParameter(1, csTle);
return q.list(); 
```

**试过了`%`|| `?`并得到以下异常：**

```
org.springframework.dao.InvalidDataAccessResourceUsageException: could not execute query; nested exception is org.hibernate.exception.SQLGrammarException: could not execute query
    at org.springframework.orm.hibernate3.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:630)
    at org.springframework.orm.hibernate3.HibernateAccessor.convertHibernateAccessException(HibernateAccessor.java:412)
    at org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:424)
    at org.springframework.orm.hibernate3.HibernateTemplate.executeFind(HibernateTemplate.java:343) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T18:25:23.470

使用`LIKE '%?%'`和第二个参数字符串进行查询。该字段也应该是字符串类型，因为`like`用于比较字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T18:24:37.357

也许 user_id 不是 char/varchar？您必须先将带有 str() 的 user_id 转换为字符数据！

例子：

```
SELECT *
FROM abc.def_vw a
WHERE user_id = ?
AND str(user_id) LIKE '%' || ? 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T02:09:10.403

需要注意的 3 件事：

*   user_id 是字符串吗？
*   就像在 HQL 中一样工作正常。例如像 '%something%'
*   您的查询没有意义“在哪里 user_id =？和 user_id like '%'”你想做什么？仅使用其中一种条件。

# dotnetnuke - DotNetNuke 编辑导航栏

> ID：15369091
> 
> 赞同：0
> 
> 时间：2013-03-12T18:21:46.907
> 
> 标签：dotnetnuke

DNN 7 中是否有一种不错的方法来修改顶部的导航块？我完全迷路了。

我正在使用“Awesome Cycles”内容作为课堂项目的模板。我要做的就是将顶部导航中的“我们”一词更改为“我”一词。我确信一定有一种简单的方法可以做到这一点，但我认为我“说这种语言”还不够好，无法用谷歌搜索。我一直在寻找三天，我知道一旦有人指出我会感到愚蠢，但是......哦，好吧。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:28:26.430

您是正确的，您可以简单地更改页面设置中的页面名称来控制导航中显示的内容。但请注意，更改页面名称也会更改该页面的 URL。

查看此视频，了解如何在更改页面后避免错误的 URL

[http://www.dotnetnuke.com/Resources/Video-Library/Viewer/Video/213/View/Details/Renaming-a-Page-in-DotNetNuke.aspx](http://www.dotnetnuke.com/Resources/Video-Library/Viewer/Video/213/View/Details/Renaming-a-Page-in-DotNetNuke.aspx)

tl; dr - 使用旧名称创建一个新页面，将其隐藏（不在菜单中），并将其重定向到新页面。

# fortran - 实现 getarg 子程序调用

> ID：15369096
> 
> 赞同：0
> 
> 时间：2013-03-12T18:22:10.207
> 
> 标签：fortran, command-line-arguments, filenames

我在 F90 中编写了一个程序，它从文本文件中读取几个输入数组，然后通过一个函数将它们组合到一个输出文件中。输入文件之一以使用 MMDDYY.tuvr 收集数据的日期命名，然后将输出文件命名为 MMDDYY.fxi。我希望能够在运行程序时在命令行中输入数据的 MMDDYY，而不必每次都手动更改代码和编译，这就是我尝试使用 getarg 的原因，但我似乎无法使其正常工作。下面列出了我尝试使用的代码（仅显示 get arg 和 open 命令，而不是整个程序，因为这是我遇到问题的地方）：

```
CHARACTER(len=20) :: arg, tuvrname, fxiname
CALL getarg(1, arg)
IF(LEN_TRIM(arg) == 0) THEN
    print*,'No date provided'
    STOP
ELSE
    tuvrname = TRIM(arg)'.tuvr'
    fxiname = TRIM(arg).'fxi'
ENDIF

OPEN(1, file = tuvrname, status='old', action='read')
....
OPEN(4, file = fxiname, status='replace', action='write') 
```

我还尝试仅使用两个单独的 getarg 命令并在命令行中输入 MMDDDYY.tuvr MMDDYY.fxi 并运行程序，但由于输出为空，它似乎找不到我的 TUVR 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T18:50:33.107

我在使用`getarg`. 我`get_command_argument`从 Fortran 2003 开始​​使用。我认为您只是忘记使用`//`来连接字符串。

```
CHARACTER(len=20) :: arg, tuvrname, fxiname
CALL getarg(1, arg)
IF(LEN_TRIM(arg) == 0) THEN
    print*,'No date provided'
    STOP
ELSE
    tuvrname = TRIM(arg)//'.tuvr'
    fxiname = TRIM(arg)//'.fxi'
ENDIF

print *, tuvrname, fxiname

end 
```

或者

```
CHARACTER(len=20) :: arg, tuvrname, fxiname
if (command_argument_count()<1) then
  stop "Provide the file name."
end if
CALL get_command_argument(1, value=arg)

tuvrname = TRIM(arg)//'.tuvr'
fxiname = TRIM(arg)//'.fxi'

print *, tuvrname, fxiname

end 
```

# sql - Exists/In 的多层嵌套子查询，性能最佳？

> ID：15369099
> 
> 赞同：0
> 
> 时间：2013-03-12T18:22:14.227
> 
> 标签：sql, db2, nested, subquery

我正在处理一些相当大的搜索功能查询。有许多不同的输入，因此查询非常大。它已经发展到有 2 层深的嵌套子查询的地方。性能已经成为那些将返回大型数据集并且可能必须筛选大量记录才能做到这一点的问题。比较少的那些表现很好，但其中一些变得非常糟糕。该数据库是 DB2 并且具有所有必要的索引，因此这不应该成为问题。我想知道如何最好地编写/重写这些查询以执行，因为我不太确定优化器将如何处理它。我显然不能在这里倾倒整个东西，但这里有一个例子：

```
Select A, B 
from TableA
      --A series of joins--
WHERE TableA.A IN (
      Select C 
      from TableB
              --A few joins--
      WHERE TableB.C IN (
              Select D from TableC
              --More joins and conditionals--
              )
       ) 
```

还有很多条件句贯穿始终，其中绝大多数是简单的相等。你明白了。子查询不向初始查询提供任何数据。它们的存在只是为了过滤结果。我早期遇到的一个问题是后端被编写为包含许多部分查询字符串，这些字符串被组装到最终查询中（由于搜索选项有 100 多种可能的组合，编写查询根本不可行对于每个），这使整个方法有点复杂。我想知道 EXISTS 而不是 IN 是否可能在一个或两个级别上有所帮助，或者另一组连接而不是子查询，或者可能在 TableC 的初始查询之上使用 WITH 等。我肯定希望消除瓶颈并希望人们可能对如何处理这个问题有任何反馈。

我可能还应该补充一点，两个子查询中都有潜在的联合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T05:50:03.533

我发现“IN”谓词适用于小型子查询，“EXISTS”适用于大型子查询。尝试使用“EXISTS”谓词执行大型查询。

```
SELECT A, B 
FROM TableA
WHERE EXISTS (
      Select C 
      FROM TableB
      WHERE TableB.C = TableA.A) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:36:02.427

改用内部连接可能会有所帮助。

```
Select A, B
from TableA
  inner join TableB on TableA.A = TableB.C
  inner join TableC on TableB.C = TableC.D 
```

数据库是为连接而设计的，但优化器可能无法确定它可以将索引用于子查询。相反，它可能会尝试运行子查询，将结果保存在内存中，然后进行线性搜索以评估每条记录的 IN 运算符。

现在，您说您拥有所有必要的索引。考虑一下。

如果一个可选条件是 TableC.E = 'E' 而另一个可选条件是 TableC.F = 'F'，那么同时包含这两个条件的查询将需要字段 TableC.E**和**TableC.F 的索引。现在许多年轻的程序员认为他们可以在 TableC.E 上拥有一个索引，在 TableC.F 上拥有一个索引，这就是他们所需要的。事实上，如果查询中有两个字段，则需要在两个字段上都有一个索引。

因此，对于 100 多个组合，“所有必要的索引”可能需要 100 多个索引。

现在 TableC.E 上的索引，TableC.F 可以在有 TableC.E 条件但没有 TableC.F 条件的查询中使用，但不能在有 TableC.F 条件但没有 TableC.E 条件时使用。

数百个索引？我要做什么？

在实践中，它并没有那么糟糕。假设您有 N 个可选条件，它们要么在 where 子句中，要么不在。组合的数量是第 2 到第 n 个，或者对于数百个组合，N 是组合数量的 log2，介于 6 和 10 之间。此外，这些 log2 条件分布在三个表中。一些数据库支持多表索引，但我不确定 DB2 是否支持，所以我会坚持使用单表索引。

所以，我要说的是，对于 TableC.E 和 TableC.F 示例，仅具有以下索引是不够的：

```
TableB ON C
TableC ON D
TableC ON E
TableC ON F 
```

一方面，优化器必须选择要使用的最后三个索引*之一*。最好将 D 字段包含在最后两个索引中，这给了我们

```
TableB ON C
TableC ON D, E
TableC ON D, F 
```

在这里，如果字段 E 和 F 都不在查询中，它仍然可以在 D 上建立索引，但如果其中一个在查询中，它可以同时在 D 和另一个字段上建立索引。

现在假设您有 10 个字段的索引，这些字段可能在查询中，也可能不在查询中。为什么索引中只有一个字段？为什么不按出现在查询中的可能性降序添加其他字段？

在规划索引时考虑这一点。

# javascript - 使用 geoxml3 显示多边形 kml 文件

> ID：15369102
> 
> 赞同：0
> 
> 时间：2013-03-12T18:22:18.580
> 
> 标签：javascript, google-maps-api-3, xml-parsing, kml, geospatial

我正在使用 geoxml3 以便能够解析 kml 层的数量。现在由于某种原因，它仅适用于点而不适用于多边形 kml 文件。以下是我正在使用的代码；

```
function displayKml() {
        geo = new geoXML3.parser({
            map: map,
            zoom: false,
            singleInfoWindow: true,
            infoWindowOptions: { maxWidth: 100 },
            processStyles: true,
            markerOptions: { shadow: '' }
        });
        geo.parse("Resources/" + document.getElementById('<%= text2.ClientID %>').value);
    } 
```

以下是多边形 kml 文件的片段；

```
<?xml version="1.0" encoding="utf-8" ?>
<kml xmlns="http://www.opengis.net/kml/2.2">
<Document><Folder><name>polygon_road</name>
<Schema name="polygon_road" id="polygon_road">
    <SimpleField name="Name" type="string"></SimpleField>
    <SimpleField name="Description" type="string"></SimpleField>
    <SimpleField name="id" type="int"></SimpleField>
    <SimpleField name="road_id" type="int"></SimpleField>
</Schema>
  <Placemark>
    <Style><LineStyle><color>ff0000ff</color></LineStyle><PolyStyle><fill>0</fill></PolyStyle></Style>
    <ExtendedData><SchemaData schemaUrl="#polygon_road">
        <SimpleData name="id">1</SimpleData>
        <SimpleData name="road_id">8</SimpleData>
    </SchemaData></ExtendedData>
      <Polygon><outerBoundaryIs><LinearRing><coordinates>14.517292705321212,35.901268542738997 14.517607913551563,35.901660659810574 14.517685853364705,35.901598006913375 14.517365353364706,35.901199306913377 14.517359591135264,35.901193253552186 14.517352901130216,35.901188244530104 14.508563647353409,35.895689849334943 14.508510612009246,35.895774626998687 14.517292705321212,35.901268542738997</coordinates></LinearRing></outerBoundaryIs></Polygon>
  </Placemark>
  <Placemark>
    <Style><LineStyle><color>ff0000ff</color></LineStyle><PolyStyle><fill>0</fill></PolyStyle></Style>
    <ExtendedData><SchemaData schemaUrl="#polygon_road">
        <SimpleData name="id">2</SimpleData>
        <SimpleData name="road_id">10</SimpleData>
    </SchemaData></ExtendedData>
      <Polygon><outerBoundaryIs><LinearRing><coordinates>14.518412050213227,35.900771848093811 14.518465407563996,35.900687272724355 14.510931707563996,35.895934372724355 14.510878350213227,35.896018948093811 14.518412050213227,35.900771848093811</coordinates></LinearRing></outerBoundaryIs></Polygon>
  </Placemark>
  <Placemark>
    <Style><LineStyle><color>ff0000ff</color></LineStyle><PolyStyle><fill>0</fill></PolyStyle></Style>
    <ExtendedData><SchemaData schemaUrl="#polygon_road">
        <SimpleData name="id">3</SimpleData>
        <SimpleData name="road_id">12</SimpleData>
    </SchemaData></ExtendedData>
      <Polygon><outerBoundaryIs><LinearRing><coordinates>14.515100381551473,35.90111915074295 14.515153218448528,35.901034249257044 14.509212818448528,35.89733734925705 14.509159981551473,35.897422250742956 14.515100381551473,35.90111915074295</coordinates></LinearRing></outerBoundaryIs></Polygon>
  </Placemark> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T18:40:02.103

不要使用[geoxml3](http://code.google.com/p/geoxml3/)的主干版本，它相当旧，只支持标记。[多边形](http://code.google.com/p/geoxml3/source/browse/#svn%2Fbranches%2Fpolys)和kmz分支[都](http://code.google.com/p/geoxml3/source/browse/#svn%2Fbranches%2Fkmz)支持多边形、折线和标记。如果您不需要 zip 压缩（kmz 文件支持），请使用 polys 分支。如果您在 KML 中需要更多符合标准的支持，kmz 分支可以更好地支持文档化标准，但未针对非 kmz 文件进行良好测试。

（来自[geoxml3 项目页面](http://code.google.com/p/geoxml3/)）

**历史**

```
主干 - （旧的，当前未维护）原始版本
network_link 分支 - （旧的，当前未维护）网络链接功能的开发分支，未经过良好测试
polys 分支 - 折线、多边形的开发分支，当前活跃的开发分支。支持折线、多边形、标记和groundoverlays
kmz 分支 - 用于 kmz 支持的开发分支，建立在 polys 分支之上。支持外部样式，并且更符合标准。有关详细信息 (http://code.google.com/p/geoxml3/issues/detail?id=53) 和当前状态，请参见问题 53。

```

您的 KML 缺少 的`<width>`属性，`<LineStyle>`因此多边形的边界没有宽度（因此您看不到它们）。kmz 分支有一组更好的默认值。如果我添加宽度，您可以看到它们：

[http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/SO_IT_info_kmlA.xml](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/SO_IT_info_kmlA.xml)

# javascript - Ember JS：如何使用 {{#each}} 帮助器仅渲染加载的子项？

> ID：15369103
> 
> 赞同：1
> 
> 时间：2013-03-12T18:22:20.117
> 
> 标签：javascript, ember.js

我正在使用`{{#each}}`帮助器来遍历父记录的子项：

```
... parent template ...

{{#each foo in foos}}
    {{#with foo}}
        {{ partial 'foo' }}
    {{/with}}
{{/each}} 
```

在特定情况下，我只想呈现已经加载的记录。我相信您可以过滤此类记录（根据[在 Ember Data 中，我如何仅找到已加载的记录？](https://stackoverflow.com/questions/14088094/in-ember-data-how-do-i-find-only-records-that-have-been-loaded)）：

```
App.Foo.filter(function(foo) { return foo.get('isLoaded'); }); 
```

但是如何在每个助手中做到这一点？我在`loaded_foos`父记录上创建了一个属性，但它不起作用，因为它是一个函数而不是 Ember.Array。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T18:44:58.787

您不能在每个助手中执行此操作。您对财产的处理方法确实是正确的。什么没有奏效？它基本上应该是这样的：

```
App.ParentRecord = Ember.Object.extend({
  loadedFoos : function(){
    this.get("foos").filter(function(foo) { return foo.get('isLoaded'); });
  }.property("foos")
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T06:47:29.850

您也可以使用条件助手在模板中执行此操作。

```
{{#each foos}}
  {{#if isLoaded}}
    {{partial "foo"}}
  {{/if}}
{{/each}} 
```

编辑：如果您已经在数组中混合了加载和卸载记录的集合，则上述方法有效。OP 询问如何实际获取加载的记录。我会这样做：

```
App.Foo = DS.Model.extend();

App.IndexRoute = Ember.Route.extend({
    model: function() {
        return App.Foo.all();
    }
});

<script type="text/x-handlebars" data-template-name="index">
    {{#each controller}}
        {{partial "foo"}}
    {{/each}}
</script> 
```

这是一个[jsfiddle](http://jsfiddle.net/ahmacleod/sdUgf/)示例。

# python - 在 python 代码中输入符号函数

> ID：15369106
> 
> 赞同：3
> 
> 时间：2013-03-12T18:22:27.730
> 
> 标签：python, sympy

我只是想知道是否有一种方法可以在 python 代码中输入符号函数？

就像在我的代码中一样，我有：

```
from sympy import *
import numpy as np
import math
myfunction = input("enter your function \n")
l = Symbol('l')

print myfunction(l**2).diff(l) 
```

如果我将 cos、sin 或 exp 作为输入，那么我将得到以下输出： `-2*l*sin(l**2)`

如果我想让输入函数更通用，比如多项式或复数函数，或者可能是 cos、sin 和 exp 的组合函数，该怎么办？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-12T18:39:56.547

作为一种语法，`sin + cos`根本不会很好地工作。让一般情况起作用的最简单方法是给 sympy 一个*表达式*来评估。我们可以让我们`sympify`把字符串变成`sympy`对象的辛苦工作：

```
>>> s = raw_input("enter a formula: ")
enter a formula: sin(x) + x**3
>>> s
'sin(x) + x**3'
>>> f = sympy.sympify(s)
>>> f
x**3 + sin(x) 
```

之后我们可以替换和评估：

```
>>> f.subs({'x': 2})
sin(2) + 8
>>> f.subs({'x': 2}).evalf()
8.90929742682568 
```

另请参阅我的答案[，](https://stackoverflow.com/a/13734176/487339)了解您可以通过一些工作获得的其他一些技巧：

```
>>> f = definition_to_function("f(x) = sin(x) + x**3")
>>> f(3)
27.14112000805987 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T18:31:17.417

如果您需要对符号函数的良好支持，您应该考虑使用[sage](http://www.sagemath.org/)。

它是 python 的预处理器，具有许多数学支持，包括符号函数。Sage 代码可以与普通的 python 代码混合使用。

包裹很大，但我有很好的经验。它是免费和开源的。

# python - 在命令行程序中创建“可滚动”输出

> ID：15369111
> 
> 赞同：3
> 
> 时间：2013-03-12T18:22:32.593
> 
> 标签：python

我有一个程序可以输出 300-1000 行数据。我希望它有一个类似手册页的界面，而不是一次全部输出，它会显示前 50 行左右的输入，然后用户可以按“f”或“b”来浏览页。有没有办法在 Python 中做到这一点？

注意：我想分发程序，我不想强​​迫用户通过管道输出到更少/更多。此外，输出发生在程序中间，并不是程序的唯一输出，所以我不确定这是否可行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T18:26:08.977

注意：我永远不会这样做，我认为这是非常糟糕的 UIX，但是......

```
pager = subprocess.Popen(['less'], stdin=subprocess.PIPE) 
```

然后将所有命令的输出写入类文件对象：`pager.stdin`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T19:00:08.760

你可以做一些非常基本的事情，比如：

```
# pseudocode 
def display_text(text):
    lines = text.splitlines()
    while lines remaining:
        display next N lines
        wait for key press 
```

要“等待按键”，您可以执行以下操作：[http ://www.daniweb.com/software-development/python/threads/123777/press-any-key-to-continue](http://www.daniweb.com/software-development/python/threads/123777/press-any-key-to-continue)

# c - 如何记住缓冲区中的多个索引以便以后访问它们以进行一一修改...牢记优化

> ID：15369113
> 
> 赞同：0
> 
> 时间：2013-03-12T18:22:46.047
> 
> 标签：c, buffer

我有一个场景，我必须将一些带有字段值的记录设置为常量，然后依次逐个访问它们。记录可以是随机记录。我不想使用链接列表，因为它会很昂贵并且不想遍历整个缓冲区。请给我一些想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T07:22:43.270

当您说“将带有字段值的少数记录设置为常数”时，这就像记录的键吗？然后“稍后一个一个地访问它们”——这是用一些键来调用它们吗？“一个接一个的顺序”和“不想遍历整个缓冲区”似乎是冲突的，因为顺序访问听起来很像遍历。

但我离题了。如果您实际上确实有一个键（并且它是一个数字），您可以使用某种哈希表来组织您的记录。一个基本的实现可能是一个链表数组，您将键向下修改到数组的范围内，然后将其添加到那里的列表中。假设您具有良好的键分布（您的记录很好地分布在整个数组中），这*可能会提高性能。*

另一个要研究的数据结构可能是 B 树或二叉搜索树，它们可以在对数时间内访问节点。

但是，总的来说，我同意评论者的观点，即过度优化通常不是一个好主意。

# ruby-on-rails - 在 Heroku 的远程仓库之间切换

> ID：15369116
> 
> 赞同：0
> 
> 时间：2013-03-12T18:22:51.403
> 
> 标签：ruby-on-rails, linux, git, heroku

我正面临一个奇怪的问题。

我正在运行一个带有两个桌面的 Linux 机器。这是我的环境：

桌面 1：运行一个宠物项目 Terminal 1 Heroku 登录：我的个人电子邮件 Heroku App 1

桌面 2：运行真实项目 Terminal 2 Heroku 登录：同上：我的个人邮箱 Heroku App 2

当我从桌面 1 切换到桌面 2，从我的宠物项目切换到真实项目时，惊喜！终端 2 已在**Heroku App 1**中连接！

我该如何解决这个问题，保持单独的环境，在两个 Heroku 的环境之间正确切换？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:30:28.753

您应该使用[Heroku Accounts cli 插件](https://github.com/ddollar/heroku-accounts)。

```
$ heroku plugins:install git://github.com/ddollar/heroku-accounts.git

$ heroku accounts:add personal
Enter your Heroku credentials.
Email: david@heroku.com
Password: ******

Add the following to your ~/.ssh/config

Host heroku.personal
  HostName heroku.com
  IdentityFile /PATH/TO/PRIVATE/KEY
  IdentitiesOnly yes 
```

# java - 一个字符串在java中可以容纳的最大数据量是多少？

> ID：15369117
> 
> 赞同：29
> 
> 时间：2013-03-12T18:22:52.867
> 
> 标签：java, android

我知道这可能是一个非常愚蠢的问题，但我没有找到可以获取此信息的可靠资源。

在 Android 应用程序中，我试图通过继续附加更多数据来将数据保存在 String 中。最后，当用户关闭应用程序或点击“保存按钮”时，我将其记录到数据 .csv 文件中。

**我想知道一个简单的字符串在java中可以保存多少数据？**, 这样如果 String 数据类型用完分配的内存，应用程序就不会崩溃。顺便说一句，我尝试对我的应用程序进行压力测试，无论我在一个字符串中存储多少数据，它似乎都运行良好。

阿迪特

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-12T18:27:16.540

看到[String](http://developer.android.com/reference/java/lang/String.html)类的[length()](http://developer.android.com/reference/java/lang/String.html#length%28%29)方法返回一个 int 值，该方法返回的最大长度将为 Integer.MAX_VALUE，即 2^31 - 1（或大约 20 亿）。

所以理论上你可以有一个 2,147,483,647 个字符的字符串。我不认为你应该需要更多。

但是，正如@TedHopp 在评论中指出并在他的回答中发布的那样，Android 系统会限制您的堆空间，低至 16 MB。因此，您实际上永远无法达到理论极限，并且将在 4-6400 万字符范围内的某个地方使用字符串达到最大值。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-12T18:32:37.323

这可能会受到应用程序可用的堆大小的限制。这可能因手机型号和运营商/手机生产商而异。对于 Android 设备，[这里](https://stackoverflow.com/a/9940415/535871)的答案列出了各种手机型号的最大堆大小；它们的范围从 16 到 256 MB。

请注意，Java 将字符串存储为 UTF-16 代码，因此每个字符占用两个字节。无论您是直接附加字符串还是使用 StringBuilder（更好），您有时都需要两倍的内存：一个用于存储现有字符串，另一个用于在需要扩展时存储新的字符串/缓冲区。

综合考虑，最大字符串长度可能约为 4 到 6400 万个字符，具体取决于电话（远低于 2 ^(31) -1 的理论最大值）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-12T18:27:09.263

[蜥蜴比尔](https://stackoverflow.com/users/1288/bill-the-lizard)在[这个](https://stackoverflow.com/questions/1179983/how-many-characters-can-a-java-string-have)问题中回答了

> 您应该能够获得长度为 Integer.MAX_VALUE 的字符串（根据 Java 规范，数组的最大大小始终为 2147483647 (2 ^(31) - 1)，String 类用于内部存储）或最大堆大小的一半（因为每个字符是两个字节），以较小者为准。

但是，对于您的字符串连接序列，您应该使用为此目的而制作的[StringBuilder 。](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html)

# debugging - 在 IDA Pro 6.1 中为所有函数调用指定断点

> ID：15369118
> 
> 赞同：1
> 
> 时间：2013-03-12T18:22:55.300
> 
> 标签：debugging, reverse-engineering, ida

在 IDA Pro 6.1 中，我有一个 dll，它对“CreateFileA”和“CreateFileW”函数 API 有 20 次调用。

我想自动为所有 CreateFileA/CreateFileW 指定断点。

我可以为所有外部参照手动完成，但这很乏味。有没有办法直接为 CreateFileA/CreateFileW 调用指定断点？

非常感谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:29:56.347

您可以在 CreateFile 的第一条指令处设置断点，或者您可以使用 IDAPython 来创建断点。

遍历所有指令/调用并查找对适当函数的调用。

add_bpt() 我相信是电话，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-20T03:05:44.847

这是我写的一个脚本来完成你想要的。它在调用指定函数的位置设置软断点。

```
// Script used to set a breakpoint at the callsite
// of the specified function using cross-references.
#include <idc.idc>

static SetBreakpoint(location)
{
  // Sets a breakpoint to be activated when
  // the debugger runs over the address.
  AddBptEx(location, 0, BPT_SOFT);
}

static CrossReferenceSource(source)
{
  // Find the linear address of the source
  // location to start xref'ing from.
  auto sourcefn = LocByName(source);
  auto iterfn = DfirstB(sourcefn);

  if (sourcefn != BADADDR && iterfn != BADADDR)
  {

    do
    {
      Message("Setting breakpoint @ 0x%08x\n", iterfn);
      SetBreakpoint(iterfn);
      iterfn = DnextB(sourcefn, iterfn);
    } while(iterfn != BADADDR);
}
}

static main()
{
  auto source = "FunctionName";

  Message("--- Setting breakpoints at cross-reference ---\n");
  CrossReferenceSource(source);
  Message("--- Finished settings breakpoints --\n");
} 
```

将“FunctionName”替换为您的函数名称，并在 IDA 的“执行脚本”窗口中运行它，可通过`File > Script command`

一个已知的限制是它不能识别间接交叉引用（例如使用寄存器调用）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-05T04:24:53.970

如果 CreateFileA/W 都是导入的（即，在 .idata 部分中定义的外部变量），你能不能只选择有问题的符号并按 F2（添加断点）？出现的断点设置对话框允许您指定硬件断点模式，在这种情况下，我们希望将其限制为读取（因为解析导入时将在启动时写入符号的值），这应该只发生在 '调用 ds:CreateFileA' 实例。

IDA 帮助中的一些断点说明：

*   创建超过 4 个硬件断点是不可能的
*   请注意，硬件断点发生在指令执行之后，而软件断点发生在指令之前。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-21T17:45:54.130

据我所知，根据 kornman00，“CreateFile”是从 dll 导入的。其实是直接从Kernel32.dll导入的，不知道怎么用的可以看这里。 [https://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx](https://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx)

因此，为了做你正在寻找的东西，最好的方法是直接进入它，在 kernel32.CreateFileA 或 kernel32.CreateFileW 中设置断点。差异只是应用程序使用 Ansichar 还是 Widechar。

显然，为了做到这一点，您需要启动调试过程，因为必须先为您的应用程序加载 kernel32，然后才能在那里设置断点。

如果您感到困惑，我的建议是“在更简单的调试器中加载二进制文件”并尝试弄清楚我们之前向您解释过的内容

# ruby-on-rails - 带有 _id 后缀的 rails 迁移列名称

> ID：15369123
> 
> 赞同：1
> 
> 时间：2013-03-12T18:23:37.293
> 
> 标签：ruby-on-rails, ruby, rails-migrations

想要进行 rails 迁移，但我希望列名类似于 external_id 但我不想使用 external 的任何模型。我认为默认情况下rails，每当看到_id作为后缀时，它都会查找外键关联，如果它不存在，则迁移被取消。有什么解决方案。我有

```
def self.up
    create_table :external_mappings do |t|
      t.string :external_name
      t.integer :external_id

      t.timestamps
    end
  end 
```

谢谢你的帮助

* * *

当我让它 t.integer :externalId 迁移工作。这让我觉得 external_id 正在寻找外键引用，有什么方法可以抑制外键引用。我正在使用导轨 2.3.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:26:04.070

您可以为任何列指定`_id`名称并在没有也的​​情况下引用外键`_id`，因此请随时继续。这只是 Rails 所依赖的一个约定`model-name_id`，但可以毫无问题地以不同的方式定义它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:50:49.050

我想知道原始海报是否使用脚手架和“参考”类型创建了新模型。如果是这种情况，迁移将在尝试创建外键期间失败。

否则，如果它只是一个整数，则将 _id 添加到其他可接受的列名的末尾没有任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T18:28:09.490

不，由于模型不存在，rails 不会取消任何迁移。

# c++ - 如何在 Windows 8 中的所有其他窗口之上保留一个带有 HWND 句柄的 OpenCV namedWindow？

> ID：15369125
> 
> 赞同：0
> 
> 时间：2013-03-12T18:23:39.510
> 
> 标签：c++, winapi, opencv, windows-8

标题基本概括了所有内容。我用 namedWindow() 创建了一个窗口并用矩阵填充它。然后我使用 cvGetWindowHandle() 将它分配给 HWND，以便我可以使用 Windows 函数 SetWindowPos()。使用它我应该能够设置标志 HWND_TOPMOST、SWP_NOMOVE 和 SWP_NOSIZE，以便即使我点击它后面的窗口时也能将其保持在所有其他窗口之上。

我要么误读了这里的某些内容并且得到了错误的想法，要么我认为问题可能是我已升级到 Windows 8 并且他们已弃用此功能或其他内容。还有其他方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:37:24.440

我没有在 c++ 中尝试这个的设置，但我想在 python 中做类似的事情，所以我最终使用了 python win32 库。通过以下调用的组合（我假设您可以在 c++ 中找到它们用于 win32），我总是设法让屏幕位于顶部。但它并没有留在那里。当我想要它时，我不得不提出它。

```
win32gui.SetForegroundWindow(hwnd)  # I use just this. apparently it can trigger permission error but I never had a problem with it
win32gui.SetFocus(hwnd)  # apparently doesn't trigger error without permission like setforegroundwindow
win32gui.BringWindowToTop(hwnd)  # not sure if this helps any
win32gui.SetActiveWindow(hwnd) #not sure if this helps any 
```

# r - R中皮尔逊相关检验的解释

> ID：15369127
> 
> 赞同：-1
> 
> 时间：2013-03-12T18:23:41.587
> 
> 标签：r

在 R 中计算相关性时，我得到以下输出。相关性代表利润和资产之间的相关性。

![在此处输入图像描述](../Images/f751f04bf08ac22792a7e308be93287d.png)

我了解 P 值和 t。但是，我不知道 df 指的是什么。

PSI 对不起，如果这是错误的论坛。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T18:25:18.947

`df`代表`degrees of freedom` （不是`data.frame`）

[http://en.wikipedia.org/wiki/Degrees_of_freedom_（统计）](http://en.wikipedia.org/wiki/Degrees_of_freedom_(statistics))

# c# - .net 程序来解析 .doc 文件

> ID：15369128
> 
> 赞同：1
> 
> 时间：2013-03-12T18:23:45.193
> 
> 标签：c#, .net, parsing, docx, doc

我想创建一个能够解析该文件的 doc/docx 文件结构的应用程序，如下所示：

```
par-000.01 - some content
par-000.21 - some content
par-000.31 - some content
par-001.32 - some content 
```

内容可以是多行而不是规则的。我想要做的是将这些内容放入数据库中，我的意思是第一条记录 -`par-000.01`放入`code`列和`some content`文本列。
我不能手动执行此操作的原因是我有大约 15 个文档，其中每个文档包含大约 10 页我想放入我的数据库的段落。
我找不到任何文章如何解析整个 doc 文件，所以我相信如果我编写正确的正则表达式是可能的。任何人都可以将我重定向到文章如何做我想做的事-我找不到任何适合我的东西，可能我使用了错误的关键词..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T21:14:27.677

既然你说你有合理的数据量，15 文档 * 10 页/文档 * ~100 行/页 = 15000 行这在 word 文档中是可以管理的，而且你没有说这是一个重复的数据馈送，即这是一次性转换，我会使用支持全局查找和替换并转换为逗号分隔变量格式的编辑器来完成。我知道的大多数数据库都可以加载 CSV 文件。

我知道您要求 C# 应用程序，但根据您的问题，这对于时间和精力来说是多余的

所以

1.  使用查找和替换转换`'<start of line>'`为MS Word 查找 ：^p 替换：^&" `'<start of line>"'`

2.  使用 Find 和替换find转换`' - '`为MS Word ：' - ' 注意：不要添加刻度线。 代替： ”，” `'","'`

3.  使用查找和替换转换`'<end of line>'`为MS Word 查找 ：^p 替换：“^& `'"<end of line>'`

4.  手动修复第一行的开头和最后一行的结尾。

你应该得到

"par-000.01","一些内容"
"par-000.21","一些内容"

现在只需使用其 CSV 加载将其加载到数据库中。

此外，如果您坚持使用 C# 执行此操作，那么请意识到您可以将文本保存为 *.txt 文件而无需所有 Word 标签，并且使用 C# 应用程序拆分会容易得多。不要专注于单词标签，只需用创造性思维来解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-19T07:13:36.530

[您可以使用GroupDocs.Parser for .NET](https://products.groupdocs.com/parser/net) API在 C# 中自动解析 Word 文档（.doc 或 .docx） 。可以逐行或整体地从文档中提取文本。这就是你可以做到的。

```
// extracting all the text 
WordsTextExtractor extractor = new WordsTextExtractor("sample.docx");
Console.Write(extractor.ExtractAll());

// OR

// Extract text line by line
string line = extractor.ExtractLine();

// If the line is null, then the end of the file is reached
while (line != null)
{
      // Print a line to the console
      Console.Write(line);
      // Extract another line
      line = extractor.ExtractLine();
} 
```

*披露：我在 GroupDocs 担任开发人员布道师。*

# c# - 另一个 GridView 内的 GridView 的 PageIndexChanging

> ID：15369135
> 
> 赞同：2
> 
> 时间：2013-03-12T18:23:57.110
> 
> 标签：c#, asp.net, page-index-changed

我在 asp.net 3.5 (c#) 中做一个项目，我在另一个 GridView 中使用了一个 GridView。然而，问题是我不知道如何为子 GridView 使用 PageIndexChanging 事件。任何有解决方案的人请帮助我..！！在此先感谢..我正在上传填充两个网格的代码..

```
private void dynamic_GV1()
{
    DataSet ds_news_details = new DataSet();
    DataSet ds_pic_preview = new DataSet();
    ds_news_details = BL_News.News_Details_Top10_Select();
    if (ds_news_details.Tables[0].Rows.Count > 0)
    {
        GridView1.DataSource = ds_news_details;
        GridView1.DataBind();
        int counter;
        for(counter = 0 ; counter < ds_news_details.Tables[0].Rows.Count; counter++)
        {
            GridView gv_pic = (GridView)GridView1.Rows[counter].FindControl("GridView2");
            ds_pic_preview = BL_News.News_Pictures_Select(Convert.ToInt32(ds_news_details.Tables[0].Rows[counter][0].ToString()));
            gv_pic.DataSource = ds_pic_preview;
            gv_pic.DataBind();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:34:38.260

您可以在同一个循环中以编程方式将事件处理程序附加到您的子程序`GridView`（您将数据绑定到它们）。请注意，这假设您要使用相同的功能处理它们：

```
for(counter = 0 ; counter < ds_news_details.Tables[0].Rows.Count; counter++)
{
    GridView gv_pic = (GridView)GridView1.Rows[counter].FindControl("GridView2");

    // Attach event handler here
    gv_pic.PageIndexChanging += yourEventHandlerName;

    ds_pic_preview = BL_News.News_Pictures_Select(Convert.ToInt32(ds_news_details.Tables[0].Rows[counter][0].ToString()));
    gv_pic.DataSource = ds_pic_preview;
    gv_pic.DataBind();
} 
```

其中“ *yourEventHandlerName* ”是要用作 PageIndexChanging 事件处理程序的函数的名称：

```
protected void yourEventHandlerName(Object sender, GridViewPageEventArgs e)
{

} 
```

您可以将“sender”变量转换回 GridView 以检查它并找出哪个子`GridView`触发了事件，我想。像这样的东西应该工作：

```
GridView currentGrid = (GridView)sender; 
```

# c# - 如何从数据库中获取记录并将其加载到标签？

> ID：15369136
> 
> 赞同：1
> 
> 时间：2013-03-12T18:23:59.170
> 
> 标签：c#, asp.net

我的标签：这里提到了标签，后面是代码。

```
 <div id="valueIntroduction" class="labelarea" runat="server">   </div>
       <div  class="line"></div>
       <div id="valueBacklog notice" class="labelarea">   </div>
       <div  class="line"></div>
       <div id="valueReasonably complete" class="labelarea">   </div>
       <div  class="line"></div>
       <div id="valueStatement of purpose" class="labelarea">   </div>
       <div  class="line"></div>
       <div id="valueResume" class="labelarea"> </div>
       <div  class="line"></div>
       <div id="valueTranscripts" class="labelarea">  </div>
       <div  class="line"></div>
       <div id="valueGRE Official test scores" class="labelarea">   </div>
       <div  class="line"></div>
       <div id="valueTOEFL or IELTS Official test scores" class="labelarea">   </div>
       <div  class="line"></div>
       <div id="valueLetters of Recommendation3" class="labelarea">   </div>
       <div  class="line"></div>
       <div id="valueLetters of Recommendation2" class="labelarea">   </div>
       <div  class="line"></div>
       <div id="valueLetters of Recommendation1" class="labelarea"> </div>
       <div  class="line"></div>
       <div id="valueSignature" class="labelarea">  </div>
       <div  class="line"></div>
       <div id="valueSubject" class="labelarea">  </div>
       <div  class="line"></div> 
```

此代码将最后一条记录分配给第一个标签。如何将正确的记录分配给正确的标签？

```
 if (Department.Items[0].Selected)
                {
                        firstPanel.Visible = true;
                        myLegend.InnerText = "Informatics";
                        NewComm.CommandText = "getTextHeaderINFO";

                        NewComm.CommandType = CommandType.StoredProcedure;
                        NewComm.Connection = NewConn;
                        NewComm.CommandTimeout = 3000;
                        SqlDataReader results = NewComm.ExecuteReader();

                        while (results.Read())
                        {
                             Response.Write(results["TEXT_CONTENT"].ToString());
                             valueIntroduction.InnerHtml = results["TEXT_CONTENT"].ToString();
                        }
                 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:35:22.743

好吧，正如现在所写的那样，您在 while 循环的每次迭代中都设置了相同标签的 InnerHtml。

我认为你会做更多这样的事情：

```
label1.InnerHTML = results["text_content"];
results.read()
label2.InnerHtml = results["text_content"]; 
```

等等

简而言之，您需要迭代地分配结果。将它们读入列表或字符串数​​组（在循环中）可能更安全，这样您就可以验证计数，但基本上您必须单独设置每个标签。我无法想象您如何期望它一遍又一遍地设置一个。

* * *

现在，当您打算以编程方式使用 HTML 元素时，您应该做的与我在这里看到的非常不同。

您在这里所做的事情需要您按 ID 查找 HTML 元素，分配给它们的 InnerHtml，而且确实很容易出错。它也不能很好地使用 C# 或 .NET 环境。

请改用 .NET 标签。像这样定义它们：

```
<asp:Label runat="server" id="valueIntroduction" CssClass="labelarea" /> 
```

然后在后面的代码上，您可以更轻松地访问它们：

```
valueIntroduction.Text = "This text will show up in the valueIntroduction label"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:33:31.183

为什么要循环调用 results.Read() ？您应该只在结果中找到一个结果行并将这一行放入 valueIntroduction.InnerHtml 属性。

# tsql - 如何从选定的月份获取上个月的数据

> ID：15369138
> 
> 赞同：0
> 
> 时间：2013-03-12T18:24:02.300
> 
> 标签：tsql, reporting-services, ssrs-2008

在 SSRS 中，我将如何返回选定月份的上个月数据。 `month(lis.s_date=month(getdate()) -1`会给我当月的上个月数据，但我希望它是在 SSRS 中选择的任何月份的上个月。为了实现这一目标，我会将 getdate() 更改为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:27:33.797

等效的 SSRS 表达式为：

```
=DateAdd(DateInterval.Month, -1, Now()) 
```

**评论后编辑：**

您可以将任何日期值替换为 T-SQL 表达式，例如这里的几种方法：

```
create table dates (dateValue date)

insert into dates select '01-jan-2013'
insert into dates select '01-feb-2013'
insert into dates select '15-feb-2013'

select dateValue
  , lastMonthDate = dateadd(mm, -1, dateValue)
  , lastMonthValue = month(dateadd(mm, -1, dateValue))
  , lastMonthName = datename(mm, dateadd(mm, -1, dateValue))
from dates 
```

这只是使用表列而不是`getdate()`函数。

[SQL 小提琴演示](http://sqlfiddle.com/#!3/854ff/1)。

# powershell - 查询帮助 - wmiobject win32_product 从文本文件中过滤项目

> ID：15369140
> 
> 赞同：0
> 
> 时间：2013-03-12T18:24:17.213
> 
> 标签：powershell, installed-applications

我一直在编写一个简单的脚本来从远程 PC 上读取 win32_product，它工作正常。但是，我希望查询忽略我域中的一些常见应用程序。我一直在构建应用程序列表及其标识号，并将标识号放入 txt 文件中。我用脚本将文本文件加载到一个变量中，我试图弄清楚如何让查询过滤变量中的每个项目......所以我有这个::

```
$PC = Read-Host "What is target workstation..."
$logfile = "d:\$PC.txt"
$ignore = [IO.File]::ReadAllText("D:\INCOMING\AppListing\ignore.txt")
get-wmiobject -class win32_product -computer $PC | where {$_.IdentifyingNumber -notlike       $ignore} | Select Name, IdentifyingNumber | sort-object Name | export-csv $logfile -encoding "unicode" 
```

但是，这根本不是过滤，甚至不是 txt 文件中的第一项或最后一项。我使用 write-host $ignore 来验证它正在加载项目......但我不知道如何使这项工作。也许是一个 foreach 循环？我找不到任何关于将 foreach 循环放入**where**过滤器的信息......

感谢您的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:34:43.367

如果文件是这样的：

```
aRandomId
anotherRandonId
... 
```

每行只有一个 id，没有别的，然后尝试`-notlike`在末尾使用通配符。前任：

```
$PC = Read-Host "What is target workstation..."
$logfile = "d:\$PC.txt"
$ignore = [IO.File]::ReadAllText("D:\INCOMING\AppListing\ignore.txt")
get-wmiobject -class win32_product -computer $PC | where { $ignore -notlike "*$($_.identifyingnumber)*" } |
Select Name, IdentifyingNumber | sort-object Name | export-csv $logfile -encoding "unicode" 
```

`ReadAllLines`如果您想使用 foreach 循环或`-notcontains`. 前任：

```
$PC = Read-Host "What is target workstation..."
$logfile = "d:\$PC.txt"
$ignore = [IO.File]::ReadAllLines("D:\INCOMING\AppListing\ignore.txt")
get-wmiobject -class win32_product -computer $PC | where { $ignore -notcontains $_.identifyingnumber } |
Select Name, IdentifyingNumber | sort-object Name | export-csv $logfile -encoding "unicode" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T00:54:34.730

```
$prods = Compare-Object -ReferenceObject (Get-Content $file) -DifferenceObject ((Get-WmiObject -Class Win32_Product -Computer $computer).IdentifyingNumber) -PassThru 
```

Compare-Object 是一个很棒的 Cmdlet。

# workflow-foundation-4 - 工作流程启动后如何添加 TrackingParticipant 或更改 TrackingProfile？

> ID：15369141
> 
> 赞同：1
> 
> 时间：2013-03-12T18:24:27.813
> 
> 标签：workflow-foundation-4

如何向当前正在执行工作流实例的 WorkflowServiceHost 添加和删除 TrackingParticipant，或者更改该主机的现有 TrackingParticipant 的 TrackingProfile？

我需要这样做的原因是 WorkflowServiceHost 正在我们系统中的某些事件上执行工作流，因此它可能同时运行多个工作流。现在，我需要在运行时启用对这些活动的跟踪，以便根据用户请求进行诊断，然后在用户不再需要它们时再次禁用它们。我无法重新启动主机，因为工作流程可能运行时间很长。但是，向已与工作流关联的 WorkflowServiceHost 添加扩展会引发异常。TrackingParticipant 的 TrackingProfile 似乎只能在构造时更改（？）。

一种方法是简单地让我的 TrackingParticipant 有一个布尔标志，指示它是否已启用，然后让它始终跟踪所有内容，但如果禁用，则对它们不做任何事情。但是，当我尝试这样做时，性能影响是不可接受的。让一个在其 Track 方法中完全没有做任何事情的跟踪参与者使得由一个简单的 while 循环组成的示例工作流需要 10 倍的时间来执行。

那么有什么方法可以在这里完成我想要的吗？如果没有，为什么不呢？

# c# - 使用性能计数器监控特定端口

> ID：15369142
> 
> 赞同：2
> 
> 时间：2013-03-12T18:24:27.950
> 
> 标签：c#, performancecounter

有什么方法可以使用性能计数器来监控所有流量，但在特定端口？

我在做：

```
GetCounterValue(_netRecvCounters[index], "Network Interface", "Bytes Received/sec", _instanceNames[index]):

double GetCounterValue(PerformanceCounter pc, string categoryName, string counterName, string instanceName)
    {
        pc.CategoryName = categoryName;
        pc.CounterName = counterName;
        pc.InstanceName = instanceName;
        return pc.NextValue();  
    } 
```

但它似乎记录了一切

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:51:37.077

使用性能计数器，必须有人明确地向注册表提供每个计数器值。如果没有人提供您正在寻找的特定值作为输入，那么就无法将其取出。

# delphi - 为 TOpenFileDialog 设置文件名属性

> ID：15369144
> 
> 赞同：7
> 
> 时间：2013-03-12T18:24:30.320
> 
> 标签：delphi, delphi-xe2

当我设置 TFileOpenDialog 的 Filename 属性然后执行它时，我只看到在 Filename 字段中选择的文件名的最后 14 个字符。如果我按下`Home`，我可以看到整个字符串都在那里，但我当然希望它能够正确显示。我已经在两台 Windows 7 和一台 Windows 8 机器上进行了测试，结果相同。有没有人对如何解决这个问题有任何建议或提示？

```
FileOpenDialog1.FileName :=
  'C:\Program Files (x86)\Embarcadero\RAD Studio\9.0\available_downloads_en.htm';
if FileOpenDialog1.Execute then
  ShowMessage(FileOpenDialog1.FileName); 
```

初始显示显示问题： ![图片显示问题](../Images/1df189826cc4451fe2133c522a5e6a31.png)

按 Home 后的整个字符串： ![我认为它应该是什么样子](../Images/ce6dbd83811a5be874642ee4002ff094.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T20:26:12.130

`TFileOpenDialog`只是`IFileDialog`Windows Vista 及更高版本上 Microsoft 界面的一个薄包装。您无法控制对话框本身在显示时的行为方式。如果它只显示最后一个字符（并且我能够在我的 Win7 机器上重现该行为），那么这就是对话框的一般工作方式。但是，话虽如此，`IFileDialog`确实允许单独设置绝对文件夹路径和仅文件名，这就是它们应该被使用的方式，但`TFileOpenDialog`不幸的是，它不会产生或暴露这种分离（Embarcadero 错误？）。因此，如果您需要该功能，则必须`IFileDialog`直接使用而根本不使用`TFileOpenDialog`。

# printing - XPS 打印：Lexmark 打印机上的字体丢失

> ID：15369145
> 
> 赞同：1
> 
> 时间：2013-03-12T18:24:34.740
> 
> 标签：printing, server-side, xps

我开发了一个用于打印的 Web 服务 (C# MVC 4)，它创建 XPS 文档，然后通过各种打印机服务器 (MS) 将它们打印到各种打印队列。这一切都适用于 Sharp 打印队列，但在打印到 Lexmarks 时，所有字体数据都会丢失，尽管字体大小保持正确。在 XPS 查看器中查看时，所有 XPS 文档都正确显示，并且在通过查看器打印到 Lexmarks 时，通过打印服务器正常工作。字体位于打印服务器上，Sharp 队列与 Lexmark 位于同一打印服务器上，并且字体都在 XPS 文档中指定。更改 Lexmark 打印机设置、驱动程序等似乎没有任何区别。

这里唯一相关的问题（一年前）说，由于字体转换错误，MS 解决方案是在进行服务器端打印时关闭打印后台处理程序。

我知道这是一个非常模糊的问题，但如果有人经历过这种痛苦并且有任何关于如何解决这个问题的提示，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:30:56.040

好的..经过大量测试后，注意到以下内容（并且可能对其他人有帮助）。

在回答上述问题.. 1）嵌入字体确认并使用MS官方测试XPS文件。这没有帮助。2) 使用的 Lexmark 驱动程序是 winprint > RAW。改变这个没有帮助。2) 字体已安装在打印机上

测试 1) 新的打印服务器，直接打印到锐利的打印机上。问题出现在字体丢失。解决此问题的方法是将后台处理程序设置更改为仅在打印所有文档后才打印。问题消失了，但是我不想依赖配置需要专业设置的打印机的人，所以我拒绝了。这是客户的网络，我无法控制它。

2）打印到打印服务器上的现有 Web 服务（使用用户模拟）到 Sharp 队列，以确认这仍然有效。确认的。

3）打印到打印服务器上的现有 Web 服务（使用用户模拟）到 Lexmark 队列，这仍然失败并且字体丢失。

4) 从 2 个单独的 IIS 框打印到打印服务器到 Lexmark 队列（使用域应用程序池身份帐户），现在这可以正常工作（在 c# new printserver(\printerservername) 中），因为 Lexmark 打印正确。

5）打印到打印服务器上的现有 Web 服务（使用域应用程序池身份帐户）到 Lexmark 队列，这仍然失败（在 c# new localprintserver() 中）。

6）打印到打印服务器上的现有 Web 服务（使用域应用程序池身份帐户）到 Lexmark 队列，这仍然失败（在 c# new printserver(\printerservername) 中）

所有这一切的结果是，如果您在本地打印，字体会由于某种奇怪的原因丢失，但如果您远程打印，字体会被保留。所有服务器都具有相同的基本设置（没有 xps 查看器等，域应用程序池帐户是服务帐户），我能看到的唯一区别是新的 localprintserver 与新的 printserver(\printservername) 调用。相同的代码通过保存本地或远程设置的 Web 配置文件从一台机器移植到另一台机器。所有机器都有 IIS 7.5 .net 4.5 MVC 4 并且在受信任区域中。

所以我的解决方案将被拆分，非 Sharp 打印将在打印服务器服务远程的文档生成器上执行，Sharp 打印将在打印服务器上完成（这是 Equitrac“跟随我”打印所必需的），因为我没有不想使用 kerberos 委托。如前所述，这不是我的域，我可以看到整个地方因 spn 丢失或 kerberos 故障而停止打印。

无论如何，希望这对某人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T04:33:24.130

好吧，没什么可做的，但我怀疑三件事：

1.  您正在生成的 XPS 文档引用字体而不嵌入它们
2.  服务器上的 Lexmark 打印驱动程序是 XPS 驱动程序
3.  字体未安装在打印机本身上。

假设我是对的，改变这三个事实中的任何一个都*应该*纠正这种情况，尽管我对#3 不做任何保证。

发生这种情况的原因是在 XPS 光栅化之前不使用字体 - 即转换为原始图像数据。我怀疑在 Lexmark 案例中，这发生在设备上，而在 Sharp 案例中，它发生在打印服务器上。从 XPS 查看器打印 XPS 文档可以正常工作这一事实支持这一点，因为这会导致在运行查看器的机器上发生光栅化。

在打印服务器上使用非 XPS 驱动程序会导致性能下降。打印服务器将有效地将 XPS 转换为 GDI，然后非 XPS 驱动程序将其转换为另一个 PDL，例如 PostScript 或 PCL。我怀疑 Sharp 驱动程序就是这种情况，尽管 Sharp 驱动程序也可能是在主机上执行光栅化的 XPS 驱动程序。

# d3.js - 基于节点度约束d3力布局图

> ID：15369146
> 
> 赞同：2
> 
> 时间：2013-03-12T18:24:35.643
> 
> 标签：d3.js, force-layout

我有一个可能有大量节点的强制布局，对于图形来说太大而无法响应地呈现。我在想提高系统性能的一种方法是在节点数量太大时通过消除基于入度和出度的节点来修剪图形。

重新计算节点和链接列表有点麻烦，因为链接与节点数组中的索引相关，因此所有链接都需要重新构建。

能够将单个节点标记为排除（类似于某些节点的方式`fixed`）并让布局算法跳过这些节点似乎更优雅。这将允许我动态选择要显示的图形子集，同时为每个节点（例如位置）保留尽可能多的状态。

有没有人实施过这样的事情？

**更新**：

我试图实现过滤器建议，但遇到了一个有趣的错误。该`filter`方法似乎返回了一个未实现的对象`enter`：

```
qChart apply limit:2
NODES BEF: [Array[218], enter: function, exit: function, select: function, selectAll: function, attr: function…]
NODES AFT: [Array[210], select: function, selectAll: function, attr: function, classed: function, style: function…]
Uncaught TypeError: Object [object Array] has no method 'enter' 
```

运行以下代码以获取 from `BEF`to `AFT`：

```
nodeSubset = nodeSubset.filter(function(n) { return (n.sentCount() <= limit); }); 
```

**更新 2**：

我创建了一个[jsfiddle](http://jsfiddle.net/gene/umMML/)来隔离问题。这个例子实现了我对 ChrisJamesC 答案的解释。当我尝试直接执行他的建议时（将 放在`filter`之后`data`），随后的调用`enter`失败，因为返回的对象`filter`没有`enter`定义。

目标是使布局仅选择具有 的那些节点`active == true`，因此在此示例中，这意味着`b`应排除该节点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:49:41.517

您可以将`selection.filter()`选项与`node.weight`属性结合使用。

你通常会做的是：

```
var node = svg.selectAll(".node")
    .data(graph.nodes)
    .enter().append("circle") 
```

在这里你可以做：

```
var node = svg.selectAll(".node")
    .data(graph.nodes)
    .filter(function(d){return d.weight>3})
    .enter(); 
```

您可能还必须使用相同的方法从绘制指向这些节点的链接中删除。

**编辑**如果您想直接在数据数组中将节点标记为活动，您应该只过滤您提供的数据（并对链接执行相同操作）

```
var node = svg.selectAll(".node")
    .data(force.nodes().filter(function(d) { return d.active; }));

var link = svg.selectAll(".link")
      .data(force.links().filter(function(d) { 
          var show =  d.source.active && d.target.active;
          if (show)
              console.log("kept", d);
          else
              console.log("excluded", d);
          return show;
      }) ); 
```

[小提琴](http://jsfiddle.net/chrisJamesC/umMML/2/)

如果您想通过计算每个节点的权重来做到这一点，我仍然建议您在将节点和链接传递给图表并将节点标记为活动或不遵循特定标准之前执行此操作，然后根据活动过滤链接节点。否则，您将不得不加载整个力导向布局以获得权重，然后过滤数据以重新加载力导向图。

# friendly-url - 将记录 ID 用于动态内容时的友好 URL

> ID：15369153
> 
> 赞同：0
> 
> 时间：2013-03-12T18:24:46.293
> 
> 标签：friendly-url, seo

我已经阅读了一些关于友好网址的内容，但我有点不确定什么更好。

我目前的网站使用以下结构`http://www.domain.com/page.php?id=2`

我正在使用记录 ID 来确定页面的内容。我的记录 id 是数字，并为添加的新页面增加。现有页面的内容会随着时间的推移而完全改变。但是，仍然使用相同的记录 ID（这是一个 cms，因此客户端可以这样做）。

我理解它的方式我有两个友好的网址选项：

`http://www.domain.com/page/2`

`http://www.domain.com/some-text-describing-the-page`

现在因为我通过记录 ID 识别内容，所以我认为第一个选项更有意义。

我的客户似乎想要选择二。

经过一番阅读，我发现了两个相互矛盾的观点。

根据 Tim Berners-Lee（WWW 的架构师）的说法，他表示您想要一个 URI，它有可能在 2 个月、2 年、200 年后保持不变。所以你不想为你的页面使用页面标题或类似的东西。如果您更改页面内容，您要么被迫更改内容并保留 URI，要么更改 URI 并被悬空链接卡住。你可以在这里阅读他的文章（[http://www.w3.org/Provider/Style/URI](http://www.w3.org/Provider/Style/URI)）

然而，互联网上的许多其他人（我不知道权威）明确表示，您需要一个描述性但简短的 URI 以获得最佳 SEO 价值。根据我的阅读，主要是为了反向链接和在锚文本中使用关键字，因为人们只是将链接本身用于锚文本。因此，在链接本身中包含关键字有助于搜索引擎在没有自定义标题的情况下了解链接的内容。

在我看来，差异与长期与短期有关。

我是否正确掌握了这一点？

如果我要使用用户定义的 slug 样式 URI，我是否必须只允许我的用户在字段中输入他们想要的任何内容并检查当前数据库以查看它是否存在？如果是这样，我是否应该通过对已知记录 id 运行查询来预测静态链接，然后使用结果生成将被重写回格式的 url `http://www.domain.com/page.php?id=2`：？

在我看来，这将是很多额外的开销。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:30:33.363

我会在这两者之间提出一些建议：

```
http://www.domain.com/page/2/some-text-describing-the-page 
```

或没有`page`：

```
http://www.domain.com/2/some-text-describing-the-page 
```

您仍然可以从 Url 中获取页面 ID，并且还有标题！更重要的是，即使页面标题稍后更改，您仍然可以获得正确的内容。

所以想想这样的情况：用户创建一个页面，它收到 Id=4 并且它的标题是`My great title`. 根据该信息生成 Url，例如`http://www.domain.com/page/3/my-great-title`。2 个月后，用户将标题更改为`This title is better then the last one!`. 网址也更改为`http://www.domain.com/page/3/this-title-is-better-then-the-last-one`. 但是，Url 中仍然存在`3`，因此您可以显示正确的内容！您还可以检查 Url 的其余部分是否是实际的，并将（301 将是最好的）重定向到新的，以让搜索引擎知道 Url 已更改。

# python - 如何遍历字典列表并选择一个最高值

> ID：15369155
> 
> 赞同：0
> 
> 时间：2013-03-12T18:24:54.927
> 
> 标签：python, foursquare

我正在使用 Foursquare Python 库。具体来说，我正在与特价商品合作。Specials 有一个名为 Items 的键，它是一个列表。列表中的对象都是字典。它看起来像这样：

```
list = [{'foo': 'ex', 'bar': 'ex', 'likes': {'count': 'x'}}, {'foo': 'ex', 'bar': 'ex', 'likes': {'count': 'x'}}, ...] 
```

我想遍历这个列表，并比较喜欢的数量。无论哪个字典对象最喜欢，我都想取出并存储在一个变量中。我怎样才能在 Python 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:30:27.873

这可以用[max(iterable, key=...)](http://docs.python.org/2/library/functions.html#max)来完成，比如

```
result = max( the_list, key=lambda item:item['likes']['count'] ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:35:20.077

您可以使用此代码：

```
print max(your_list, key=lambda val: int(val.get('likes', {}).get('count', 0))) 
```

PS 不要为您的变量使用保留名称！

# android - 安卓的javacv

> ID：15369161
> 
> 赞同：1
> 
> 时间：2013-03-12T18:25:15.550
> 
> 标签：android, opencv, javacv

我正在尝试在 android 上使用 OpenCV

我创建了我的 android 项目，添加`javacv.jar`到`iavacpp.jar`构建路径，创建了文件`lib`夹并将`*.so`文件从`javacv-arm.jar`.`libs/armeabi`

所有`jar`&`*.so`文件都是 2.4.2 版本。

当我运行应用程序时，我创建了一个测试按钮。单击它时，我正在调用此行：

```
IplImage image = cvLoadImage("file:///android_asset//"+"pic1.jpg"); 
```

并得到以下崩溃

```
03-12 19:22:12.189: E/AndroidRuntime(4524): FATAL EXCEPTION: main
03-12 19:22:12.189: E/AndroidRuntime(4524): java.lang.ExceptionInInitializerError
03-12 19:22:12.189: E/AndroidRuntime(4524):     at com.myapp.MainActivity.runTest(MainActivity.java:260)
03-12 19:22:12.189: E/AndroidRuntime(4524):     at com.myapp.MainActivity$3.onClick(MainActivity.java:174)
03-12 19:22:12.189: E/AndroidRuntime(4524):     at android.view.View.performClick(View.java:4084)
03-12 19:22:12.189: E/AndroidRuntime(4524):     at android.view.View$PerformClick.run(View.java:16966)
03-12 19:22:12.189: E/AndroidRuntime(4524):     at android.os.Handler.handleCallback(Handler.java:615)
03-12 19:22:12.189: E/AndroidRuntime(4524):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-12 19:22:12.189: E/AndroidRuntime(4524):     at android.os.Looper.loop(Looper.java:137)
03-12 19:22:12.189: E/AndroidRuntime(4524):     at android.app.ActivityThread.main(ActivityThread.java:4745)
03-12 19:22:12.189: E/AndroidRuntime(4524):     at java.lang.reflect.Method.invokeNative(Native Method)
03-12 19:22:12.189: E/AndroidRuntime(4524):     at java.lang.reflect.Method.invoke(Method.java:511)
03-12 19:22:12.189: E/AndroidRuntime(4524):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
03-12 19:22:12.189: E/AndroidRuntime(4524):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
03-12 19:22:12.189: E/AndroidRuntime(4524):     at dalvik.system.NativeStart.main(Native Method)
03-12 19:22:12.189: E/AndroidRuntime(4524): Caused by: java.lang.ExceptionInInitializerError
03-12 19:22:12.189: E/AndroidRuntime(4524):     at java.lang.Class.classForName(Native Method)
03-12 19:22:12.189: E/AndroidRuntime(4524):     at java.lang.Class.forName(Class.java:217)
03-12 19:22:12.189: E/AndroidRuntime(4524):     at com.googlecode.javacpp.Loader.load(Loader.java:334)
03-12 19:22:12.189: E/AndroidRuntime(4524):     at com.googlecode.javacv.cpp.opencv_highgui.<clinit>(opencv_highgui.java:85)
03-12 19:22:12.189: E/AndroidRuntime(4524):     ... 13 more
03-12 19:22:12.189: E/AndroidRuntime(4524): Caused by: java.lang.ExceptionInInitializerError
03-12 19:22:12.189: E/AndroidRuntime(4524):     at java.lang.Class.classForName(Native Method)
03-12 19:22:12.189: E/AndroidRuntime(4524):     at java.lang.Class.forName(Class.java:217)
03-12 19:22:12.189: E/AndroidRuntime(4524):     at com.googlecode.javacpp.Loader.load(Loader.java:334)
03-12 19:22:12.189: E/AndroidRuntime(4524):     at com.googlecode.javacv.cpp.opencv_imgproc.<clinit>(opencv_imgproc.java:96)
03-12 19:22:12.189: E/AndroidRuntime(4524):     ... 17 more
03-12 19:22:12.189: E/AndroidRuntime(4524): Caused by: java.lang.UnsatisfiedLinkError: Cannot load library: link_image[1891]:   124 could not load needed library 'libopencv_core.so' for 'libjniopencv_core.so' (load_library[1093]: Library 'libopencv_core.so' not found)
03-12 19:22:12.189: E/AndroidRuntime(4524):     at java.lang.Runtime.loadLibrary(Runtime.java:370)
03-12 19:22:12.189: E/AndroidRuntime(4524):     at java.lang.System.loadLibrary(System.java:535)
03-12 19:22:12.189: E/AndroidRuntime(4524):     at com.googlecode.javacpp.Loader.loadLibrary(Loader.java:444)
03-12 19:22:12.189: E/AndroidRuntime(4524):     at com.googlecode.javacpp.Loader.load(Loader.java:368)
03-12 19:22:12.189: E/AndroidRuntime(4524):     at com.googlecode.javacpp.Loader.load(Loader.java:315)
03-12 19:22:12.189: E/AndroidRuntime(4524):     at com.googlecode.javacv.cpp.opencv_core.<clinit>(opencv_core.java:131)
03-12 19:22:12.189: E/AndroidRuntime(4524):     ... 21 more
03-12 19:22:12.243: D/dalvikvm(4524): GC_CONCURRENT freed 2368K, 16% free 16864K/20039K, paused 12ms+3ms, total 50ms 
```

我失踪了`libopencv_core.so`吗？如果是这样，我在哪里可以找到它为 2.4.2 版构建的？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T16:01:39.970

我敢肯定，现在你已经想通了。下载javacv-0.5-cppjars.zip，里面解压opencv-2.4.5-android-arm.jar的内容。你会在那里找到 libopencv_core.so 和其他几个 .so 文件

# python - 使用python中的子进程运行以utf-8编码的Windows批处理文件

> ID：15369163
> 
> 赞同：2
> 
> 时间：2013-03-12T18:25:18.500
> 
> 标签：python, windows, encoding, batch-file, subprocess

在 Windows 7 下使用 Python 2.7 尝试运行使用 utf-8 编码的 Windows 批处理文件时，无法识别批处理文件的第一个命令（参见示例）。

最有可能的是，bom 被解释为字符。如何让底层 shell 正确运行批处理文件？

调用的批处理文件来自第三方。这是一个重现问题的简单 python 脚本：

```
import codecs
import subprocess

content = "@echo off"
with codecs.open('test_utf8.bat', 'w', 'utf-8-sig') as f:
    f.write(content)
    f.close()

with open('test_ansi.bat', 'w') as f:
    f.write(content)
    f.close()

print "Calling test_ansi.bat"
subprocess.call('test_ansi.bat', shell=True)

print "Calling test_utf8.bat"
subprocess.call('test_utf8.bat', shell=True)

print "Done" 
```

运行脚本会给出以下输出

```
t:\tmp\test>python test.py
Calling test_ansi.bat
Calling test_utf8.bat

t:\tmp\test>´╗┐@echo off
'´╗┐@echo' is not recognized as an internal or external command,
operable program or batch file.
Done

t:\tmp\test> 
```

请注意，该`shell`参数似乎没有任何效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T18:54:23.197

行 。我会让你有理由使用 python 创建批处理文件，并在外部运行这些文件，而不是在 Python 中执行 - 以及你希望这些批处理在 utf-8 中而不是你的本机编码的理由Windows 或您的 DOS（因为两者不同的情况并不少见）。

这里是：只需编码为“utf-8”，而不是“utf-8-sig”。后者不是官方的变体，而是一种在 Windows 记事本中添加标记字节 (BOM) 的变体：“””增加了可以检测到 UTF-8 编码的可靠性，微软发明了一个变体UTF-8（Python 2.5 称之为“utf-8-sig”）的记事本程序：在将任何 Unicode 字符写入文件之前，一个 UTF-8 编码的 BOM（看起来像这样的字节序列：0xef , 0xbb, 0xbf) 被写入。因为任何charmap编码的文件都不太可能以这些字节值“””（[http://docs.python.org/2/library/codecs.html](http://docs.python.org/2/library/codecs.html)）开头，但否则对于各种其他应用程序（如您所见，包括 Microsoft 的`cmd`）。

简而言之：编码为“utf-8”。如果要在 Windows 中编辑文件，请在生成文件后使用编辑器，而不是记事本，自 windows 3.0 天以来，记事本基本保持不变。（我想知道它现在是否可以打开大于 64kB 的文件）

# php - PDO“全有或全无”删除事务

> ID：15369168
> 
> 赞同：2
> 
> 时间：2013-03-12T18:25:28.027
> 
> 标签：php, pdo, transactions

我是 PDO 事务的新手，遇到以下情况：我想从两个单独的表中删除，并规定如果任一删除失败，则两者都不应该发生。这似乎是交易的理想场景。我尝试了以下方法：

```
$db->beginTransaction();

try {
    $db->exec( "DELETE FROM table1 WHERE galleryid = '$gallery_id' AND userid = '1'" );
    $db->exec( "DELETE FROM table2 WHERE galleryid = '$gallery_id'" );
    $db->commit();
} catch( PDOException $e ) {
    $db->rollBack();
    echo $e->getMessage();
} 
```

在第一个删除查询中，我查询了一些不正确的内容（即 table1 中没有 user_id 等于 1 的实例）。尽管如此，第二次删除还是通过了。这可能是预期的行为，我没有正确测试。

那么，我将如何使用事务正确编写此内容，以便**两个删除都通过或都不通过？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T18:36:15.673

仅仅因为您的第一个查询影响 0 行并不意味着它会引发异常，因此没有什么可捕获的。我不确定这是否是您所追求的，但您可能想使用它`PDOStatement::rowCount()`来检查受`DELETE`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T18:34:15.450

如果 DELETE 匹配零行，则不是失败或错误。

如果要测试 DELETE 影响了多少行，请使用[PDOStatement::rowCount()](http://www.php.net/manual/en/pdostatement.rowcount.php)。

这是一个例子：

```
$db->beginTransaction();
try {
    $del1 = $db->prepare( "DELETE FROM table1 WHERE galleryid = :galleryid AND userid = :userid" );
    $del1->execute(array(":galleryid"=>$gallery_id, ":userid"=>1));
    if ($del1->rowCount() < 1) {
      throw new RuntimeException("Delete from table1 matched no rows.")
    }

    $del2 = $db->prepare( "DELETE FROM table2 WHERE galleryid = :galleryid" );
    $del2->execute(array(":galleryid"=>$gallery_id));
    if ($del2->rowCount() < 1) {
      throw new RuntimeException("Delete from table2 matched no rows.")
    }

    $db->commit();
} catch( RuntimeException $e ) {
    $db->rollBack();
    echo $e->getMessage();
} 
```

* * *

回复您的评论：

这是事务的一个很好的应用。也就是说，您希望同时应用从 table1 和 table2 中的删除，并且不要让数据从一个表中删除而不是另一个表。

如果其中任何一个不匹配任何行，听起来您想中止这两个删除。我已经扩展了上面的代码示例以显示更完整的示例。如果该示例没有使用事务对两个更改进行分组，它可能允许第一次删除成功，然后发现第二次删除没有删除任何内容。

# jquery - 简单的 Jquery 动画在 Jsfiddle 上不起作用

> ID：15369182
> 
> 赞同：0
> 
> 时间：2013-03-12T18:26:06.000
> 
> 标签：jquery

现在正在为这件事疯狂...

我试图让一个在 jsFiddle 上工作的动画在本地/ftp 上工作，但没有任何反应。

我已经包含了所有这个库的

```
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>       <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script> 
```

我可以运行具有该功能的动画 `$(this).hide(`......但正如我所说，不是动画功能。

这是我正在使用的脚本。

```
$(".wrapper").mouseenter( function() {
    $(this).animate({
        left: -1*$(".leftbox").width()
    }, 500);
});

$(".wrapper").mouseleave( function() {
    $(this).animate({
        left: "0px"
    }, 500);
}); 
```

这是我复制粘贴到我的索引页的 jsFiddle。没有改变任何东西。 [http://jsfiddle.net/ewNpL/1/](http://jsfiddle.net/ewNpL/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:55:51.243

从评论中发布答案：

尝试将所有 js/jQuery 代码包装在准备好的处理程序中，例如

```
$(function(){
 $(".wrapper").mouseenter( function() {
    $(this).animate({
        left: -1*$(".leftbox").width()
    }, 500);
});

$(".wrapper").mouseleave( function() {
    $(this).animate({
        left: "0px"
    }, 500);
});

}); 
```

建议使用 ready 处理程序，以便在 javascript 开始显示其魔力之前 DOM 应该准备好，出于同样的原因，它也建议在标记之后对所有脚本部分进行模式化。

为什么你的代码在小提琴中运行良好？因为 jsfiddle 默认情况下将脚本部分包装在就绪处理程序中......

# mod-rewrite - 你能看出这个 apache2 重写规则有什么问题吗？

> ID：15369188
> 
> 赞同：1
> 
> 时间：2013-03-12T18:26:17.460
> 
> 标签：mod-rewrite, apache2.2

想要重定向`/dl/[dlcode]/[cleanname].mp4`到`/dl/cache/[dlcode].mp4`

在 apache2 配置文件中得到 AllowOverride All，然后在文档根 .htaccess 中得到以下内容，

```
RewriteEngine on
RewriteRule ^dl/([^/]+)/([^/]+)\.mp4$ /dl/cache/$1.mp4 [NC] 
```

我一直在尝试使用 def 存在的文件。[dlcode] 和 [cleanname] 都只包含 a-zA-Z0-9 字符

为任何帮助干杯！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:33:09.213

在某些情况下，您需要添加前导斜杠：

```
RewriteRule ^/dl/([^/]+)/([^/]+)\.mp4$ /dl/cache/$1.mp4 [NC] 
```

# javascript - 对多个元素使用一个 javascript

> ID：15369191
> 
> 赞同：-1
> 
> 时间：2013-03-12T18:26:37.697
> 
> 标签：javascript

对于弹出一个部门，我正在使用此代码。我想添加多个元素。当我添加多个具有相同 ID 的元素时，脚本不起作用。它是如何解决的？剧本是。

```
<a href="#" id="button">Click me</a>
<div id="modal">
    <div id="heading">
        Are you sure you want to do that?
    </div>  
</div>
<!--jQuery-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="js/jquery.reveal.js"></script>

<script type="text/javascript">
        $(document).ready(function() {
                $('#button').click(function(e) { // Button which will activate our modal
                        $('#modal').reveal({ // The item which will be opened with reveal
                                animation: 'fade',                   // fade, fadeAndPop, none
                                animationspeed: 600,                       // how fast animtions are
                                closeonbackgroundclick: true,              // if you click background will modal close?
                                dismissmodalclass: 'close'    // the class of a button or element that will close an open modal
                        });
                return false;
                });
        });
</script> 
```

我想像这样添加。

```
<a href="#" id="button">Click me</a>
    <div id="modal">
        <div id="heading">
            Are you sure you want to do that?
        </div>  
    </div>
<a href="#" id="button">Click </a>
    <div id="modal">
        <div id="heading">
            You want to do that?
        </div>  
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:29:20.457

ID 是*唯一的*。该规范仅允许每个 id 一个元素。

改用一个类

```
<div class="toActOn">
        Are you sure you want to do that?
</div>  
<div class="toActOn">
        Really sure
</div> 
```

然后在 jQuery 中将您的选择器更改为`.toActOn`（即`$(".toActOn")`）

这解释了根据[W3c 的ID 是什么](http://www.w3.org/TR/css3-selectors/#id-selectors)

> ID 类型属性的特殊之处在于，在一个符合标准的文档中，没有两个这样的属性可以具有相同的值，无论携带它们的元素的类型如何；无论使用哪种文档语言，都可以使用 ID 类型的属性来唯一标识其元素。在 HTML 中，所有 ID 属性都命名为“id”；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:29:38.187

使用 class 而不是 id 来识别元素...

```
<a href="#" class="button" modal="m1">Click me</a>
<div id="m1">
    <div id="heading">
        Are you sure you want to do that?
    </div>  
</div>
<a href="#" class="button" modal="m2">Click</a>
<div id="m2">
    <div id="heading">
        Are you sure?
    </div>  
</div>
<a href="#" class="button" modal="m3">Click this</a>
<div id="m3">
    <div id="heading">
        Please confirm
    </div>  
</div>
<!--jQuery-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="js/jquery.reveal.js"></script>

<script type="text/javascript">
        $(document).ready(function() {
                $('.button').click(function(e) { // Button which will activate our modal
                        $('#' + $(this).attr('modal') + ').reveal({ // The item which will be opened with reveal
                                animation: 'fade',                   // fade, fadeAndPop, none
                                animationspeed: 600,                       // how fast animtions are
                                closeonbackgroundclick: true,              // if you click background will modal close?
                                dismissmodalclass: 'close'    // the class of a button or element that will close an open modal
                        });
                return false;
                });
        });
</script> 
```

# asp.net-mvc - 我可以仅在客户端的部分视图中创建分页，而不向控制器发送任何请求吗？

> ID：15369196
> 
> 赞同：0
> 
> 时间：2013-03-12T18:26:51.760
> 
> 标签：asp.net-mvc, asp.net-mvc-4, pagination, paging, jquery-pagination

在 mvc 4 应用程序中，我有产品搜索页面，`Ajax.BeginForm()`它将搜索结果作为部分视图返回。在部分视图中，我有产品列表。在这里，如何为该列表创建分页？只有产品列表，而不是控制器。因为，我不想更改搜索条件。可能吗？

```
@model IEnumerable<Product>
@{
   List<Product> list;

   if (Model != null)
   {
      list = Model
   }
   else
   {
      list = (List<Product>)ViewBag.AllProduct;
   }

   //products shown here....I want to create Pagination for 'list' in only client
} 
```

# c - 对 ac 程序的用户会话实施资源限制

> ID：15369212
> 
> 赞同：-3
> 
> 时间：2013-03-12T18:27:36.907
> 
> 标签：c, shell, malloc, buffer

我有一个二进制文件。我想限制执行时该二进制文件可用的资源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:54:45.433

我不确定我是否完全了解您想要什么，但您可以将可用内存量设置为`malloc`：

```
 struct rlimit s;
    int ret = getrlimit(RLIMIT_DATA, &s);  // 0 on success
    s.rlim_cur = s.rlim_max;
    ret = setrlimit(RLIMIT_DATA, &s); 
```

这将使进程拥有最大的数据内存。但是，如果在此过程中已经将最大值设置得很低，则普通用户无法再次增加它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:28:05.080

你可以简单地使用

```
uname -v [以 KB 为单位的内存]
```

# api - PayPal OAuth2 REST API 基础

> ID：15369214
> 
> 赞同：1
> 
> 时间：2013-03-12T18:27:41.907
> 
> 标签：api, rest, paypal, oauth-2.0

我正在尝试新的 PayPal REST API，我想学习如何使用 PHP/curl 来使用它。

我是使用 curl 的新手，所以请原谅...

从贝宝开发人员文档中，我收集了必填字段，并将以下内容放在一起：

```
$ch = curl_init();
$postDataArray = array("grant_type=client_credentials");
curl_setopt($ch, CURLOPT_POSTFIELDS, $postDataArray);
curl_setopt($ch, CURLOPT_URL, 'https://api.sandbox.paypal.com/v1/oauth2/token');
$headerArray = array('Accept: application/json','Accept-Language: en_US');
curl_setopt($ch, CURLOPT_HTTPHEADER, $headerArray);
$clientID_Secret = "clientID:secret";
curl_setopt($ch, CURLOPT_USERPWD, $clientID_Secret); 
```

由于谷歌搜索，我添加了接下来的几行。

```
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_COOKIEJAR, "my_cookies.txt");
curl_setopt($ch, CURLOPT_COOKIEFILE, "my_cookies.txt");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

$result = curl_exec($ch);
print_r($result); 
```

这不返回任何内容。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T19:11:50.870

这是一个示例：[https ://github.com/paypal/rest-api-curlsamples/blob/master/execute_all_calls.php](https://github.com/paypal/rest-api-curlsamples/blob/master/execute_all_calls.php)

复制 curl 特定代码：

```
$curl = curl_init($url); 
curl_setopt($curl, CURLOPT_POST, true); 
curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($curl, CURLOPT_USERPWD, $clientId . ":" . $clientSecret);
curl_setopt($curl, CURLOPT_HEADER, false); 
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true); 
curl_setopt($curl, CURLOPT_POSTFIELDS, $postdata); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T04:35:49.487

您的代码正在运行。但是你必须改变这个 $postDataArray = array("grant_type=client_credentials"); 到 $postDataArray = "grant_type=client_credentials";。需要去掉数组类型；

# php - 打印关联数组时消除“数组”字符串

> ID：15369218
> 
> 赞同：1
> 
> 时间：2013-03-12T18:27:47.683
> 
> 标签：php, arrays, multidimensional-array

我有以下 PHP 代码

```
 <?php
$myRoom = array(
                'Kitchen' => array('Dining Table','4 Chairs','Dishes'),
                'Bathroom' => array('Towel','Medicines','Shower Gel'),
                'Bedroom' => array(
                                'Bed' => array(
                                            'Legs' => 4,
                                            'Bedsheet' => 'woolen',
                                            'Blanket' => array(
                                                               'Winter' => 'Thick',
                                                               'Summer' => 'Thin',
                                                            ),
                                ),
                                  ),
                'Person' => 'Only Me',
                );
my_room($myRoom);

function my_room($params) {
    foreach ($params as $key => $value) {
        yes_it_is(" <br /> ".$key." : ");
        my_room($value);
        yes_it_is($value." <br /> ");
    }
}

function yes_it_is($val) {
   echo $val;    
} 
```

下面的函数打印字符串，代码的输出如下所示：

> 厨房 : 0 : 餐桌
> 
> 1 : 4 椅子
> 
> 2：菜品阵列
> 
> 浴室 : 0 : 毛巾
> 
> 1：药品
> 
> 2 : 沐浴露阵列
> 
> 卧室：床：腿：4
> 
> 床单：羊毛
> 
> 毯子：冬天：厚
> 
> 夏季：薄阵列阵列
> 
> 人：只有我

如何摆脱使用其他值打印的“数组”字符串。任何其他解决方法也将不胜感激。

编辑：

我只想打印关联数组中的键和值，而不是`Array`输出中的字符串。

Edit2：根据 Daedelus 的建议更新了问题

我改变了 my_room 功能如下：

```
function my_room($params) {
foreach ($params as $key => $value) {
            yes_it_is(" <br /> ".$key." : ");
            if (is_array($value))
                my_room($value);
            else
                yes_it_is($value." <br /> ");
    }
} 
```

但输出仍然是：

> 厨房 : 0 : 餐桌
> 
> 1 : 4 椅子
> 
> 2：菜肴
> 
> 浴室 : 0 : 毛巾
> 
> 1：药品
> 
> 2 : 沐浴露
> 
> 卧室：床：腿：4
> 
> 床单：羊毛
> 
> 毯子：冬天：厚
> 
> 夏季：薄阵列
> 
> 人：只有我

后面有两个`Array`打印`Thin`

Edit3：对不起我的错误，接受的结果完美无缺。在测试时，我有两个函数一起使用 name`my_room`和`my_room2`，同时`Array`显示了两个函数一起测试，但是当我注释掉`my_room2`并且只显示`my_room`答案中的函数时，它工作得很好。抱歉造成的任何混乱，我一起测试了两个函数，输出很奇怪。

编辑4：

根据下面的答案，我将其更改为好看的单行三元运算符，例如：

```
function my_room($params) {
foreach ($params as $key => $value) {
            yes_it_is(" <br /> ".$key." : ");
            is_array($value) ? my_room($value) : yes_it_is($value." <br /> ");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T18:32:43.673

将 my_room 更改为以下内容（以检查它是否为数组）

```
function my_room($params) {
foreach ($params as $key => $value) {
            yes_it_is(" <br /> ".$key." : ");
            if (is_array($value))
                my_room($value);
            else
                yes_it_is($value." <br /> ");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:30:28.280

如果您只想忽略传递给函数的数组：

```
function yes_it_is($val) {
   if (!is_array($val)) {
       echo $val;
   }
} 
```

*编辑：*等等，你在与`"<br />"`之前连接，所以这不起作用。更好的解决方案：

```
function my_room($params) {
    foreach ($params as $key => $value) {
        yes_it_is(" <br /> ".$key." : ");
        if (is_array($value)) {
            my_room($value);
        } else {
            yes_it_is($value." <br /> ");
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T18:31:13.900

```
function yes_it_is($val) {
    if (is_array($val)) {
       print_r($val);
       //OR echo "<pre>"; print_r($val):
    } else {
       echo $val;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T18:35:48.640

[`is_array`](http://us3.php.net/manual/en/function.is-array.php)应该做的伎俩：

```
function my_room($params) {
    foreach ($params as $key => $value) {  
        yes_it_is(" <br /> ".$key." : ");
        if (is_array($value)) {
            my_room($value);
        }
        else {
            yes_it_is($value." <br /> ");
        }
    }
} 
```

否则会发生什么..您正在尝试将数组转换为字符串，并且结果为 string `Array`。如果您事先进行检查以确保它确实是一个数组，您将不会收到该错误。我还建议您打开错误报告，并阅读[数组的手册](http://us3.php.net/manual/en/book.array.php)。

# c# - 无法在 linq 查询中创建常量值

> ID：15369219
> 
> 赞同：1
> 
> 时间：2013-03-12T18:27:55.337
> 
> 标签：c#, sql, linq

运行此查询：

```
var holderAccounts = db.AccountDetails.Include(p => p.BranchDetail)
               .Where(p => holder.AccountDetails.Any(a => a.Id == p.Id)); 
```

我得到这个例外：

> 无法创建“CodeFirst.AccountDetail”类型的常量值。此上下文仅支持原始类型或枚举类型。

关系是：

```
 AccountHolder 1 to many AccountDetail 1 to 1 BranchDetail 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:37:13.970

很可能不支持 Any()。试试这个查询：

```
var ids = holder.AccountDetails.Select(x => x.Id).ToList();
var holderAccounts = db.AccountDetails.Include(p => p.BranchDetail)
           .Where(p => ids.Contains(p.Id)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T18:39:44.173

尝试先提取相关 ID：

```
var accountDetailIds = holder.AccountDetails.Select(a => a.Id);
var holderAccounts = db.AccountDetails
    .Include(p => p.BranchDetail)
    .Where(p => accountDetailIds.Contains(p.Id)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T18:47:38.363

我认为您尝试做的与 SQL Where-In 子句相同。正如 Jeffery Khan 提到的，我将提取您要查询的条件，然后在单独的语句中执行查询。希望[本文](http://blogs.msdn.com/b/alexj/archive/2009/03/26/tip-8-writing-where-in-style-queries-using-linq-to-entities.aspx)能帮助您了解这种用于增强查询可读性的良好做法。

# javascript - 无法通过 AJAX 将 JSON 对象从 Javascript 发布到 Servlet

> ID：15369224
> 
> 赞同：0
> 
> 时间：2013-03-12T18:28:20.457
> 
> 标签：javascript, ajax, json, servlets, post

我正在尝试通过 AJAX 将 JSON 对象发布到 servlet。但是，该对象在 servlet 中为空。我无法弄清楚这段代码有什么问题。

JAVASCRIPT

```
function submitValues(event, val1, val2) 
{    
var xmlHttpObj = new XMLHttpRequest();                
            if(window.XMLHttpRequest) 
            {
                xmlHttpObj = new XMLHttpRequest();                    
             }
            else if(window.ActiveXObject)
            {
                xmlHttpObj = new ActiveXObject("Microsoft.XMLHttp");

            }

     var jsonObject =  submitTheValues(event, val1, val2);
       alert("json is:" +jsonObject);
     var json = JSON.stringify(jsonObject);
       alert("json after stringify:" +json);

        xmlHttpObj.open("POST", "../myapp/myservlet", true);
        xmlHttpObj.setRequestHeader("Content-type", "application/json");                    
        xmlHttpObj.send(json);

} 
```

伺服器

```
String jsonObj = request.getParameter("json"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:33:36.857

如果您想将数据作为参数接收，则必须将其发送为`application/x-www-form-urlencode`.

```
xmlHttpObj.open("POST", "../myapp/myservlet", true);
xmlHttpObj.setRequestHeader("Content-type", "application/x-www-form-urlencode");                    
xmlHttpObj.send('json='+encodeURIComponent(json)); 
```

# javascript - 加载 iframe 后隐藏链接

> ID：15369227
> 
> 赞同：0
> 
> 时间：2013-03-12T18:28:33.663
> 
> 标签：javascript, html, iframe, hyperlink, load

我有这段代码可以隐藏 iframe，直到点击链接

```
<a href="http://www.site.com/" target="iframe1" onClick="document.getElementById('iframe1').parentNode.style.display=''">link</a>

</br></br>

<div style="display:none;"><iframe id="iframe1" name="iframe1" src="#"></iframe></div> 
```

我想在加载 iframe 后隐藏链接

请问我该怎么做？

如果有代码比我的代码更好，请也发布

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:38:08.773

使用 jQuery 的 .load() 事件：

> 当元素和所有子元素都已完全加载时，加载事件将发送到该元素。此事件可以发送到与 URL 关联的任何元素：图像、脚本、框架、**iframe**和窗口对象。

```
 $("#iframe").load(function(){
      $("#link").hide();
   }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T18:30:40.130

将您的链接更改为：

```
<a href="http://www.site.com/" target="iframe1" onClick="document.getElementById('iframe1').parentNode.style.display='block'; this.style.display = 'none';">link</a> 
```

它将链接的样式设置为`display: none`.

另外，我将 iframe 的显示设置为阻止而不是“”。您应该考虑将 HTML 之外的 css 和 javascript 移动到外部文件中，或者至少移动到`<style>`CSS 的`<script>`标签和 JS 的标签。

# json - FineUploader OnComplete 方法未触发

> ID：15369228
> 
> 赞同：4
> 
> 时间：2013-03-12T18:28:34.187
> 
> 标签：json, callback, fine-uploader

所以，我在 MVC 4 应用程序中使用 FineUploader 3.3，这是一个非常酷的插件，非常物有所值。现在，我只需要让它正常工作。

我对 MVC 很陌生，对传回 JSON 也很陌生，所以我需要一些帮助才能让它工作。这是我正在使用的，全部在`doc.ready`.

```
var manualuploader = $('#files-upload').fineUploader({
request:
{
    endpoint: '@Url.Action("UploadFile", "Survey")',
    customHeaders: { Accept: 'application/json' },
    params: {
        //variables are populated outside of this code snippet
        surveyInstanceId: (function () { return instance; }),
        surveyItemResultId: (function () { return surveyItemResultId; }),
        itemId: (function () { return itemId; }),
        imageLoopCounter: (function () { return counter++; })
    },
    validation: {
        allowedExtensions: ['jpeg', 'jpg', 'gif', 'png', 'bmp']
    },
    multiple: true,
    text: {
        uploadButton: '<i class="icon-plus icon-white"></i>Drop or Select Files'
    },                              
    callbacks: {
        onComplete: function(id, fileName, responseJSON) {
            alert("Success: " + responseJSON.success);
            if (responseJSON.success) {
                $('#files-upload').append('<img src="img/success.jpg" alt="' + fileName + '">');
                }
            }
    }
} 
```

**编辑：我一直在使用 Internet Explorer 9，然后切换到 Chrome、Firefox，我可以上传就好了。IE9 需要什么？无论浏览器如何，验证都不起作用。**

端点触发，并填充文件/参数，所以这一切都很好！验证不会阻止用户选择此列表之外的内容，但我暂时可以使用它。我可以成功保存并做我需要做的上传，减去`OnComplete`触发。实际上，在 IE 中，我得到了一个包含当前内容的 OPEN/SAVE 对话框。

`onComplete`问题： ( `id`, `filename`, )中的函数参数是`responseJSON`由返回填充还是在输出填充？我只是对此感到困惑。我的 JSON 是否必须在其中包含这些参数并填充？

我不这样做（填充那些参数），我在 C# 中的输出方法返回`JsonResult`看起来像这样，只返回“成功”（如果合适的话）：

```
return Json(new { success = true }); 
```

我需要添加更多吗？这条线是在保存之后，我想做的就是告诉用户一切都好还是不好。`success`我的 JSON 中的属性是否与`responseJSON.success`?

我错过了什么，或者有什么问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T18:46:30.483

解决您问题中的项目：

1.  关于“选择文件”对话框内的限制，您还必须设置`acceptFiles`验证选项。有关详细信息，请参阅[`validation`自述文件中的选项部分。](http://docs.fineuploader.com/integrating/options/fineuploaderbasic.html#validation-option-properties)
2.  您的`validation`选项属性在错误的位置。它不应该在`request`属性/选项下。您的`text`、`multiple`和`callbacks`选项/属性也是如此。此外，您没有为 jQuery 插件正确设置回调。
3.  IE 中的打开/保存对话框是由于您的服务器没有返回带有正确“Content-Type”标头的响应。您的回复的 Content-Type 应该是“text/plain”。有关详细信息，请参阅[服务器端自述文件](http://docs.fineuploader.com/integrating/server/)。
4.  您的服务器在其响应中返回的任何内容都将由 Fine Uploader`JSON.parse`在处理响应客户端时使用。调用`JSON.parse`服务器响应的结果将作为`responseJSON`参数传递给`onComplete`回调处理程序。如果您想将特定信息从您的服务器传递到您的客户端代码，例如您可能希望在客户端显示的一些文本、上传文件的新名称等，您可以通过向您的服务器响应。然后，这些数据将在您的`onComplete`处理程序中提供给您。如果您对此没有任何需求，您可以简单地返回您当前返回的“成功”响应。我链接到的服务器端自述文件提供了有关所有这些的更多信息。

为了澄清我在 #2 中所说的内容，您的代码应如下所示：

```
$('#files-upload').fineUploader({
   request: {
       endpoint: '@Url.Action("UploadFile", "Survey")',
       customHeaders: { Accept: 'application/json' },
       params: {
           //variables are populated outside of this code snippet
           surveyInstanceId: (function () { return instance; }),
           surveyItemResultId: (function () { return surveyItemResultId; }),
           itemId: (function () { return itemId; }),
           imageLoopCounter: (function () { return counter++; })
       }
   },
   validation: {
       allowedExtensions: ['jpeg', 'jpg', 'gif', 'png', 'bmp']
   },
   text: {
       uploadButton: '<i class="icon-plus icon-white"></i>Drop or Select Files'
   }
})
   .on('complete', function(event, id, fileName, responseJSON) {
       alert("Success: " + responseJSON.success);
       if (responseJSON.success) {
          $('#files-upload').append('<img src="img/success.jpg" alt="' + fileName + '">');
       }
   }); 
```

# php - 将一般的 wordpress 搜索与 woocommerce 产品搜索合并？

> ID：15369229
> 
> 赞同：4
> 
> 时间：2013-03-12T18:28:36.660
> 
> 标签：php, wordpress, woocommerce

我正在使用以下两个代码来生成 wordpress 搜索和 woo 商务产品搜索？是否有将主​​题合并到一个搜索栏中同时执行这两种功能的代码？

```
 <?php get_search_form(); ?>
  <?php get_product_search_form(); ?> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-07T10:16:06.127

get_search_from(); 涵盖两者。
get_product_search_form() 与 get_search_from() 相同，只是它将 wordpress 搜索限制为仅产品。

如果您看到这两个函数的标记，则只有一个区别。有一个附加的帖子类型值设置为产品。

```
<input type="hidden" name="post_type" value="product" /> 
```

所以，

```
get_search_from() >> get_product_search_form() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-31T01:08:06.157

我使用了插件 Relevanssi，它允许您在搜索结果中包含自定义帖子类型（包括 woocommerce 产品）以及帖子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-19T01:16:36.790

对于那些使用 JQuery 的人，您可以在页面加载时轻松地将隐藏的帖子类型输入附加到任何搜索表单。只需添加指定要运行哪种类型的搜索的隐藏输入，如下例所示，我必须为 DIVI 搜索栏搜索产品而不是博客：

```
<script>
    jQuery('document').ready(function(e){
        var productSearchSetting = '<input type="hidden" name="post_type" value="product" />'; // product post type, use 'any' for all post types
        var diviSearchForm$ = jQuery('header form.et-search-form');
        console.log('adding search for products to: ', diviSearchForm$ );
        diviSearchForm$.append(productSearchSetting);
    })
</script> 
```

您可以通过更改 jQuery 行中的选择器来适应您自己的站点，该选择器定义对`diviSearchForm$`您想要定位的任何表单的引用。

此外，如果您想搜索所有帖子类型而不仅仅是产品，请将值更改`product`为`any`

# jquery - 为属性设置动画，但不在旧版 Internet Explorer 中

> ID：15369230
> 
> 赞同：1
> 
> 时间：2013-03-12T18:28:37.943
> 
> 标签：jquery

我正在开发一个需要与 IE7+ 兼容的网站。
在 IE7 和 IE8 上为某些 CSS 属性设置动画非常慢，而在其他浏览器上则完全没问题。

因此，我想在快速浏览器上使用[.animate()](http://api.jquery.com/animate/) ，在旧浏览器上使用[.css() 。](http://api.jquery.com/css/)

我想为此使用[$.browser](http://api.jquery.com/jQuery.browser/)，但它在 jQuery 1.9 中已被弃用。
该文档建议改用功能检测（[$.support](http://api.jquery.com/jQuery.support/)），但这不是我想要的（除非有某种“快速浏览器”或“现代浏览器”功能......）

现在，**如果可能的话，使用 jQuery**来检测“慢”浏览器（理解：IE7/IE8）的好方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:40:18.383

您可以使用标准的 javascript`navigator.userAgent`对象检测方法，例如，

例如

```
var ieVersion = new Number(RegExp.$1);
if ((/MSIE (\d+\.\d+);/.test(navigator.userAgent)) && (ieVersion < 9)){
    //Perform CSS function for IE8 and lower
    alert('IE8-');
}
else
{
    //Perform animate function for everything else
    alert('Everything else');
} 
```

请看上面的这个[小提琴](http://jsfiddle.net/B6wT9/2/)。

# php - 在while循环中分组项目

> ID：15369250
> 
> 赞同：0
> 
> 时间：2013-03-12T18:29:48.980
> 
> 标签：php, html

我想在 while 循环中添加一些标记，以便每三个项目都包含在 a 中`<ul>`，并且每个项目都`ul`应该包含在 a 中`div`。最多可以有 6 个项目，我想得到以下输出：

```
<div class="one">
    <ul>
        <li>...</li>
        <li>...</li>
        <li>...</li>
    </ul>   
</div>

<div class="two">
    <ul>
        <li>...</li>
        <li>...</li>
        <li>...</li>
    </ul>   
</div> 
```

我正在尝试以下代码：

```
<div class="one">
    <ul>    
    <?php 
        $i = 0 ; 
        while (have_posts()) : the_post();  
            $i++; ?>            

            <li>...</li>    

            <?php
                if ($i === 3){
                    echo "</ul></div><div class='two'><ul>";
                    $right_div = true;
                }           
            ?>
        } 
        if ($right_div){
                </ul></div>
            <?php } ?>      
?> 
```

如果至少有 3 个项目，它可以正常工作，但如果少于 3 个，则会中断代码，因为它不会关闭 ul 和 div。

**使用while 循环**很重要，因为它是 WordPress 主题的一部分，它使用 while 循环来获取帖子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:39:48.343

我不确定我明白了，但我认为问题是：

```
 if ($right_div){
            </ul></div>
        <?php } ?> 
```

这不应该是一个条件，应该总是打印出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:43:01.617

如果我理解正确，您是说您想将事物分组为 3 个一组，但如果您有 11 个项目或类似的东西，它就会中断。如果是这种情况，那么在 while 循环的最后一次迭代中，您应该关闭 ul 和 div 元素。

像这样：

```
if(condition){
     echo "</ul></div>";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T18:43:09.190

参考[http://codex.wordpress.org/Function_Reference/have_posts](http://codex.wordpress.org/Function_Reference/have_posts)

```
 function more_posts() {
      global $wp_query;
      return $wp_query->current_post + 1 < $wp_query->post_count;
   }

   if (!more_posts()){
       echo "</ul></div><div class='two'><ul>";
       $right_div = true;
   } 
```

哦，我不是 wordpress 人：P

# mysql - 唯一性/与主键关系的索引和约束

> ID：15369251
> 
> 赞同：0
> 
> 时间：2013-03-12T18:29:49.673
> 
> 标签：mysql, sql, indexing, rdbms, database-performance

我需要在脑海中清除以下内容。

当我创建一个没有主键或唯一约束的表时，我得到一个平面文件。
当我创建主键时，会创建一个主索引，并且正是这个索引维护了主键的唯一性，对吗？所以我不能添加重复的值。
因此，如果我在任何列上创建索引，这是否会强制该列具有唯一值？或者这取决于使用关键字`UNIQUE`创建索引？
最后，每次我声明一个具有`UNIQUE`约束的列时，这是否意味着创建了一个索引，因此这些操作是可以互换的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:39:59.600

> 当我创建主键时，会创建一个主索引，并且正是这个索引维护了主键的唯一性，对吗？

是的，尽管主键索引与唯一索引并不完全相同（它比“常规”唯一索引具有某些优先级。

> 因此，如果我在任何列上创建索引，这是否会强制该列具有唯一值？或者这取决于使用关键字 UNIQUE 来创建索引？

除非您显式使用`UNIQUE INDEX`.

> 最后，每次我声明一个具有 UNIQUE 约束的列时，这是否意味着创建了一个索引，因此这些操作是可以互换的？

唯一约束是通过`UNIQUE INDEX`. 它们是一回事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T18:41:14.660

1.  如果我们在任何列上创建索引，则不会强制该列具有唯一值。列中可以有重复的值，但这些值将被索引。
2.  列中的唯一值将通过对列使用关键字 UNIQUE 来强制执行。
3.  UNIQUE 列和主键列之间的区别是 - UNIQUE 键列可以在一个且仅一个表行中保存 NULL 值。主键列将不包含空值。
4.  创建 UNIQUE 列时，会隐式创建索引。但是，当在列上创建索引时，并不意味着该列的所有行值都是唯一的。所以它们是不可互换的。

# ruby-on-rails - 我可以在一个回形针附件字段中存储不同类型的文件吗？

> ID：15369253
> 
> 赞同：0
> 
> 时间：2013-03-12T18:29:52.883
> 
> 标签：ruby-on-rails, paperclip

我有一个接受照片或视频的模型。它工作正常，但我认为它正在赶上验证。

对于照片，我有这个：

`has_attached_file :content, styles: { thumb: '275x185#' }`

效果很好，但是用视频保存一些东西会产生：

`Validation failed: Content Paperclip::Errors::NotIdentifiedByImageMagickError, Content Paperclip::Errors::NotIdentifiedByImageMagickError`

我认为这是因为它试图调整视频的尺寸。是否可以只为图像内容定义拇指大小，但在视频内容时忽略它？还是我必须制作两个不同的字段，一张照片一个视频，并且我的数据库中有 nil ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:35:40.133

`styles`可以给定一个 lambda 来执行条件处理：

```
has_attached_file :content, styles: lambda do |a|
  if ['image/jpeg', 'image/jpg', 'image/gif', 'image/png'].include? a.instance.content_content_type
    { thumb: '275x185#'}
  end  
end 
```

但是，此处用于检查是否`content`为图像的方法可能不准确。

# css - Bootstrap：使 CSS 规则仅适用于桌面版本

> ID：15369254
> 
> 赞同：4
> 
> 时间：2013-03-12T18:29:56.957
> 
> 标签：css, twitter-bootstrap

我正在使用引导程序创建应用程序的桌面和移动版本。

我希望桌面版在左上角有一个小图像，几乎像水印一样，不会影响任何其他元素的定位，所以我在 body 上使用了 background-image

```
body
{
    background-image: url("../image/logo.png");
    background-repeat: no-repeat;
} 
```

但是，我不希望它显示在移动版本上。

如何阻止这条影响移动版本的 CSS 规则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:33:21.167

您可能希望在 body 标签上使用一个类：

```
body.desktop
{
    background-image: url("../image/logo.png");
    background-repeat: no-repeat;
}

<body class="desktop">
...
</body> 
```

您还可以使用[媒体查询](http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/)来删除小屏幕尺寸的图像。在这种情况下不需要 body 类：

```
@media only screen and (max-device-width: 480px) {
    body {background-image: none;}
} 
```

# r - ggplot x 轴订单天数

> ID：15369255
> 
> 赞同：1
> 
> 时间：2013-03-12T18:29:58.210
> 
> 标签：r, ggplot2

我有一个当前按日期和时间排序的数据集。我有一个名为“day”的列，它只是一个月中的一天，以数字形式，即 1-31 我有一个 14 天的时间段，我想绘制，但是它从一个月的 30 日开始，到 13 日下一个。当我尝试绘制它时，它会订购 1-13、30、31。

如何绘制在数据框中找到的 x 轴？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:37:19.830

使用列`day`和制作样本数据`value`。

```
df<-data.frame(day=c(30,31,1,2,3,4,5,6,7,8),value=rnorm(10)) 
```

如果列`day`仅包含日期值作为数字，您可以将它们转换为因子并将级别设置为值的原始顺序。

```
ggplot(df,aes(factor(day,levels=df$day),value,group=1))+geom_line() 
```

# android - 将十字准线覆盖添加到谷歌地图 v2

> ID：15369261
> 
> 赞同：4
> 
> 时间：2013-03-12T18:30:05.370
> 
> 标签：android, android-mapview, google-maps-android-api-2

我正在尝试向我的谷歌地图添加一个覆盖，该地图固定在屏幕中央，以便用户可以使用它来精细选择一个位置。

目前，下面的代码绘制了一个带有居中十字准线图像的地图视图，但由于按钮位于地图视图下方，地图的中心发生了变化，并且十字准线不再代表地图的中心点，该中心点已向上移动了按钮的高度。

我看过[Android - 在我的谷歌地图中心显示一个十字准线，](https://stackoverflow.com/questions/8895260/android-showing-a-crosshair-in-the-center-of-my-google-map)但它似乎只适用于 v1 :(

```
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <fragment xmlns:android="http://schemas.android.com/apk/res/android"
     android:id="@+id/locationpicker_map"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
     android:layout_above="@+id/locationpicker_add_venue"
     android:clickable="true" 
     android:layout_weight="1"
     class="com.google.android.gms.maps.SupportMapFragment"/>
        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/crosshairs"
            android:layout_gravity="center_vertical"
            android:layout_centerInParent="true"/>
        <Button 
        android:id="@+id/locationpicker_add_venue" 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text = "Add new venue here"
        android:layout_alignParentBottom="true"/>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-05T11:53:46.613

为了达到这个效果，我使用了一个围绕地图片段的相对布局，其中一个 imageview 居中。示例见下文；

![以安卓谷歌地图为中心的十字准线](../Images/84300d1e5a76450c93b2d24ab91dd6d1.png)

```
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <fragment xmlns:android="http://schemas.android.com/apk/res/android"
     android:id="@+id/locationpicker_map"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
     android:clickable="true" 
     android:layout_weight="1"
     class="com.google.android.gms.maps.SupportMapFragment"/>
        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/crosshairs"
            android:layout_gravity="center_vertical"
            android:layout_centerInParent="true"/>
        <Button 
        android:id="@+id/locationpicker_add_venue" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text = "Add new venue here"
        style="@style/Buttonpurple_style"
        android:layout_gravity="center"
        android:layout_centerHorizontal="true" 
        android:layout_alignParentBottom="true"
        />
</RelativeLayout> 
```

# php - jquery bpopup.js - 将 bpopup 附加到动态数据

> ID：15369273
> 
> 赞同：2
> 
> 时间：2013-03-12T18:30:38.513
> 
> 标签：php, jquery, popup, bpopup

我有一个带有搜索功能的网站。用户输入他的搜索参数，并显示一个弹出窗口（通过 bpopup.js），其中包含指向结果的链接。我希望用户能够单击每个链接并弹出另一个 iframe，其中包含来自该 url 的数据。我计划一次将用户限制为 5 个结果。目前我的搜索工作正常，并且弹出窗口带有链接列表。但是，当我单击每个链接时，数据会加载到该特定 iframe 中，而不是新的 iframe 中。我希望能够打开多个 iframe，bpopup 说这是可能的。

这是相关的search.php代码：

```
if($searcher->getResultCount() > 0) {
echo('<div><ul>');
    foreach($searcher->getResults() as $result) {
    $newclass="imagen" . $counter;
    $url = '<a id="' .  $newclass . '" href="' . $result['filePath'] . '">Test</a>';
    echo('<li><em>' . $url . '</em></li>');
    $counter++;
    }
echo('</ul></div>'); 
```

} 别的.....

在 search.php 的底部是我设置 bpopup 的地方：

$(文档).on(函数() {

```
$(function() {
$('#searchResults').bPopup({
    content: 'iframe',
    contentContainer: '.searchResults',
    position: [200,200],
    follow: [false, false],
    opacity: 0,
    scrollBar: 'true'
});
$('#imagen1').bind('click', "a.imagen1",  function (e) {
            e.preventDefault();
            var urltoLoad = $(this).attr("href");
            $('#result1').bPopup({
                content: 'iframe',
                contentContainer: '.resultcontent1',
                follow: [false, false],
                position: [50,200],
                positionStyle: 'fixed',
                closeClass: 'b-close1',
                scrollBar: 'true',
        escClose: 'true',
                loadUrl: urltoLoad
             });
         });.... 
```

为 5 个结果中的每一个都设置了一个 #imagen。

最后，

```
 <div id = "searchResults"> </div> 
<div id = "result1">
<a class="b-close"></a>
<div class="resultcontent1"></div>
</div>
<div id = "result2">
<a class="b-close"></a>
<div class="resultcontent2"></div>
</div>
<div id = "result3">
<a class="b-close"></a>
<div class="resultcontent3"></div>
</div> 
```

# matlab - 如何在matlab中取第一行矩阵？

> ID：15369278
> 
> 赞同：4
> 
> 时间：2013-03-12T18:30:52.400
> 
> 标签：matlab

我想问我是否有一个矩阵，例如：a=[1 2 3; 1 3 4 ; 4 5 7 ] 以及如何只取第一行 [1 2 3]。谢谢你 。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-12T18:33:58.320

一个（1，：）

这意味着（第一行，所有列）

# openoffice-calc - 公式内的单元格内容

> ID：15369279
> 
> 赞同：8
> 
> 时间：2013-03-12T18:31:01.660
> 
> 标签：openoffice-calc

是否可以将单元格的内容放在公式中。公式是指数学公式编辑器（插入->对象->公式）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-23T16:50:55.180

据我所知，无法从公式中引用单元格。数学公式编辑器不了解 OO Calc。但是，您可以在需要时使用宏创建新公式。

请按照以下步骤使其工作：

1.  将要插入的数学公式放入单元格中。例如，将一些数字放入单元格 A1、A2、A3 并将以下内容放入单元格 C3：

    ```
    =CONCATENATE("{";A1;"}";"over {";A2;" `+` ";A3;"}";" `=` ";A4). 
    ```

    `{1} over {2 `+` 3} `=`这将在 C3 中生成类似的东西

2.  从下面的代码创建一个宏。在 OO 计算中，选择

    ```
    Tools > Macros > Organize Macros > OpenOffice.org Basic > My Macros > Standard 
    ```

    创建一个新宏并粘贴下面的代码。

3.  现在您可以使用`Tools > Macros > Run Macro`. 运行`insertFormula`插入从单元格 C3 生成的数学公式，或者`addFormulaListener`将注册一个侦听器并在 C3 的内容更改时为您重新生成公式。

这是代码。它包含常量`formulaCellFrom`和`formulaCellTo`，它们指定哪个单元格具有数学公式源，以及哪个单元格是生成的公式对象应放置的目标单元格。*请注意，目标单元格必须足够大，才能容纳生成的公式，否则宏在重新生成公式时不会删除单元格的旧内容*。

```
const formulaCellFrom As String = "$C$1"
const formulaCellTo As String = "$C$10"

rem ----------------------------------------------------------------------
rem Adds listener for changes of the math formula
sub addFormulaListener
dim oSheet as Object
dim oCell as Object
rem go to cell containing markup 
oSheet =  ThisComponent.CurrentController.ActiveSheet
oCell = oSheet.getCellRangeByName(formulaCellFrom)
rem add listener
oListener = CreateUnoListener( "formulaListener_", "com.sun.star.chart.XChartDataChangeEventListener" )
oCell.addChartDataChangeEventListener(oListener)
end sub

rem ----------------------------------------------------------------------
rem Listener for cell changes
sub formulaListener_chartDataChanged
dim oCell as Object

rem remember current cursor position
oCell = ThisComponent.CurrentSelection

rem call insertFormula
call insertFormula

rem restore cursor position
ThisComponent.CurrentController.select(oCell)
end sub 

rem ----------------------------------------------------------------------
rem Creates a math formula from text in cell C1 and inserts it into cell C10
sub insertFormula

dim document as object
dim dispatcher as object
rem get access to the document
document = ThisComponent.CurrentController.Frame
dispatcher = createUnoService("com.sun.star.frame.DispatchHelper")

rem go to cell containing markup and copy it
dim fromCellArgs(0) as new com.sun.star.beans.PropertyValue
fromCellArgs(0).Name = "ToPoint"
fromCellArgs(0).Value = formulaCellFrom
dispatcher.executeDispatch(document, ".uno:GoToCell", "", 0, fromCellArgs())
dispatcher.executeDispatch(document, ".uno:Copy", "", 0, Array())

rem go to cell where I want the formula displayed
dim toCellArgs(0) as new com.sun.star.beans.PropertyValue
toCellArgs(0).Name = "ToPoint"
toCellArgs(0).Value = formulaCellTo
dispatcher.executeDispatch(document, ".uno:GoToCell", "", 0, toCellArgs())

rem delete previous content
dim deleteArgs(0) as new com.sun.star.beans.PropertyValue
deleteArgs(0).Name = "Flags"
rem flags: A = All, S = String, V = Value, D = DateTeim, F = Formula, ...
rem ... N = Notes, T = Formats, O = Objects
deleteArgs(0).Value = "AO" 
dispatcher.executeDispatch(document, ".uno:Delete", "", 0, deleteArgs())

rem open Star.Math
oDesk = createUnoService ("com.sun.star.frame.Desktop")
dispatcher.executeDispatch(document, ".uno:InsertObjectStarMath", "", 0, Array())

rem get access to the document
document = ThisComponent.CurrentController.Frame
dispatcher = createUnoService("com.sun.star.frame.DispatchHelper")

rem paste clipboard using Array() as place-holder for variable name
dispatcher.executeDispatch(document, ".uno:Paste", "", 0, Array())

rem exit Star.Math
dispatcher.executeDispatch(document, ".uno:TerminateInplaceActivation", "", 0, Array())
end sub 
```

代码改编自[这个问题](http://www.oooforum.org/forum/viewtopic.phtml?t=92897)。显然，必须在其中创建宏`My Macros`并且在嵌入电子表格时不起作用（安全措施？它对我不起作用）。源单元格和目标单元格是硬编码的，但您可以修改宏以满足您的需要。我不熟悉 Visual Basic，但这样的修改应该很容易。

# php - glob() 函数是如何工作的？

> ID：15369284
> 
> 赞同：-2
> 
> 时间：2013-03-12T18:31:28.657
> 
> 标签：php, file, directory, glob

我知道这个`glob()`函数很慢，但它如何与`GLOB_ONLYDIR`参数一起工作？它还会检查每个文件还是会使用一些索引或其他什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:41:32.253

看[源码](https://github.com/php/php-src/blob/master/ext/standard/dir.c#L511-529)：

```
/* we need to do this everytime since GLOB_ONLYDIR does not guarantee that
 * all directories will be filtered. GNU libc documentation states the
 * following: 
 * If the information about the type of the file is easily available 
 * non-directories will be rejected but no extra work will be done to 
 * determine the information for each file. I.e., the caller must still be 
 * able to filter directories out. 
 */
if (flags & GLOB_ONLYDIR) {
    struct stat s;

    if (0 != VCWD_STAT(globbuf.gl_pathv[n], &s)) {
        continue;
    }

    if (S_IFDIR != (s.st_mode & S_IFMT)) {
        continue;
    }
} 
```

所以 PHP 必须检查每个文件，不管它是否只要求非目录文件。

# php - 我可以从 CodeIgniter 调用 shell 脚本，然后调用 codeigniter 控制器函数吗？

> ID：15369288
> 
> 赞同：2
> 
> 时间：2013-03-12T18:31:59.443
> 
> 标签：php, codeigniter, shell

我有点新手。
我正在 Codeigniter 中编写一个社交应用程序。用户登录后，必须做很多事情来准备用户网络、发送电子邮件、创建推荐朋友列表等。我们已经编写了函数来完成这些工作。

可以说有一个带有功能 SignUp 的主控制器索引。

注册后，我们想将用户重定向到仪表板控制器，但在后台，我们想运行

1.  构建网络
2.  查找匹配
3.  发电子邮件

我不知道如何在后台运行任何任务。所以我在想也许我可以编写一个shell脚本，一个接一个地调用这些函数。
我们将通过 Codeigniter 调用此脚本并传递 UserId。
然后此脚本将调用各个函数并将 userId 传递给这些函数。

谁能告诉我

1.  如果这是正确的方法
2.  它是如何完成的（这种方式或任何其他方式）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T20:32:53.273

我建议您改用队列系统，检查诸如 beanstalk（和 PHP 库 pheanstalk）之类的东西。

然后，您将针对您想要做的每件事将作业放入队列中，然后在您的后台进程（可能是 cron）中，您将获取作业并运行它们。

[http://kr.github.com/beanstalkd/](http://kr.github.com/beanstalkd/) [https://github.com/pda/pheanstalk/](https://github.com/pda/pheanstalk/)

因此，在您的 SignUp 函数中，您将创建一个作业并将其放入队列中，您可以为每种不同类型的作业使用一个队列，然后为每个队列设置一个作业使用者。

```
// some pseudo code

function signUp()
{
    $jobData = json_encode(array(
        'template' => 'newUser',
        'to'       => 'john@example.com'
    ));
    $this->pheanstalk->useTube('OutboundEmails')->put($jobData);

    // add other jobs for other tasks here too
} 
```

然后你可以有运行你的消费者脚本的 cron 脚本。

```
// pseudo for this mail consumer

$pheanstalk->watch('OutboundEmails')->ignore('default');

while ($job = $pheanstalk->reserve())
{
    // send the email using the data in the job
    $job->getData() // returns your JSON
} 
```

希望有帮助。

# perl - 新的 Outlook MailItem 保存在收件箱而不是草稿中

> ID：15369290
> 
> 赞同：0
> 
> 时间：2013-03-12T18:32:03.370
> 
> 标签：perl, outlook, ole

我必须创建电子邮件并将它们保存在 Outlook (2007) 草稿文件夹中。我正在使用 Perl (ActivePerl 5.12.3) 和 Win32::OLE 模块。如果 Outlook 已打开，则它可以正常工作。Elsif 我实例化 Outlook，第一封电子邮件保存在收件箱中，其余的保存在草稿文件夹中。下面演示了这个问题。

```
use strict;
use Win32::OLE;
use Win32::OLE::Const 'Microsoft Outlook';

my $oMailer;
# Connect to a running version of Outlook
eval { $oMailer =
   Win32::OLE->GetActiveObject('Outlook.Application')
};
die "Outlook not installed" if $@;

# Start up Outlook if not running
unless(defined $oMailer) {
  $oMailer = new Win32::OLE('Outlook.Application', sub {$_[0]->Quit;})
  or die "Unable to start an Outlook instance: $!\n";
}

for (my $i=1; $i <5; $i++) {
  my $oEmail = $oMailer->CreateItem(0) or
    die "Unable to create mail item: $!\n";

  $oEmail->{'To'} = 'me@domain.info';
  $oEmail->{'Subject'} = "This is test #$i";
  $oEmail->{BodyFormat} = olFormatHTML;
  $oEmail->{HTMLBody}   = '<html></html>';

  $oEmail->save();
} 
```

MailItem.Save 上的 M$ [dox](http://msdn.microsoft.com/en-us/library/office/bb175280%28v=office.12%29.aspx)说：

> 将 Microsoft Outlook 项目保存到当前文件夹，或者，如果这是一个新项目，则保存到项目类型的 Outlook 默认文件夹。

在我的谷歌搜索工作中，我无法找到任何其他关于此的报告。知道如何让它按记录工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:38:29.790

这表明您从未登录到 MAPI 会话。

创建 Outlook.Application 对象的实例后，立即检索命名空间对象 (Application.GetNamespace("MAPI")，然后调用 Namespace.Logon

# php - 如何使用 RecursiveIteratorIterator 忽略目录？

> ID：15369291
> 
> 赞同：5
> 
> 时间：2013-03-12T18:32:09.607
> 
> 标签：php, iterator

我尝试了几种方法来忽略`RecursiveIteratorIterator`文件系统上使用的某些目录。

举例来说，我想忽略以下目录：`/cache`.

我的`Iterator`样子是这样的：

```
//$dirname is root
$directory = new RecursiveDirectoryIterator($dirname);
$mega = new RecursiveIteratorIterator($directory, RecursiveIteratorIterator::SELF_FIRST);

foreach ($mega as $fileinfo) {
 echo $fileinfo;
} 
```

例如，我已经能够忽略某些文件扩展名`pathinfo`：

```
$filetypes = array("jpg", "png");
$filetype = pathinfo($fileinfo, PATHINFO_EXTENSION);

foreach ($mega as $fileinfo) {
    if (!in_array(strtolower($filetype), $filetypes)) {
    echo $fileinfo;
    }
} 
```

当我使用`PATHINFO_DIRNAME`（使用数组中的适当目录路径）尝试它时，它不起作用，没有错误，它只是不忽略目录。

我也尝试过使用`FilterIterator`无济于事，现在我在想也许我应该使用`RegexIterator`.

使用 忽略目录的最简单和最有效的方法是`RecursiveIteratorIterator`什么？

* * *

没用的实验。使用`PATHINFO_DIRNAME`

```
$dirignore = array("cache", "cache2");
$directory = new RecursiveDirectoryIterator($dirname);
$mega = new RecursiveIteratorIterator($directory, RecursiveIteratorIterator::SELF_FIRST);
$dirtype = pathinfo($fileinfo, PATHINFO_DIRNAME); 

if (!in_array($dirtype), $dirignore)) {
echo $fileinfo;  //no worky still echo directories
} 
```

使用`FilterIterator`（不确定这是如何工作的）

```
class DirFilter extends FilterIterator
{
    public function accept()
    {
        //return parent::current() != "..\cache\";

       $file = $this->getInnerIterator()->current();
       if ($file != "..\cache")
       return $file->getFilename();

      //also tried with same error as below
      //return !preg_match('/\cache', $file->getFilename());
    }
}

$directory= new RecursiveDirectoryIterator($dirname);
$directory = new DirFilter($directory); 
$mega = new RecursiveIteratorIterator($directory, RecursiveIteratorIterator::SELF_FIRST);
// loop 
```

这导致`Error: An instance of RecursiveIterator or IteratorAggregate creating it is required`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T19:32:51.033

您`DirFilter`想要扩展`RecursiveFilterIterator`，因为它与递归迭代器一起使用。不这样做，是你错误的原因。

```
class DirFilter extends RecursiveFilterIterator
{
    // …
} 
```

下一步是弄清楚如何`accept()`正确使用。它应该返回一个`true`or`false`值，它指示当前项是应该包含 ( `true`) 还是排除 ( `false`) 从迭代中。从返回文件名`accept()`不是您想要做的。

```
class DirFilter extends RecursiveFilterIterator
{
    public function accept()
    {
        $excludes = array("cache", "cache2");
        return !($this->isDir() && in_array($this->getFilename(), $excludes));
    }
} 
```

* * *

能够传入排除目录的数组可能会很好。这需要更多的代码，但更可重用。

```
class DirFilter extends RecursiveFilterIterator
{
    protected $exclude;
    public function __construct($iterator, array $exclude)
    {
        parent::__construct($iterator);
        $this->exclude = $exclude;
    }
    public function accept()
    {
        return !($this->isDir() && in_array($this->getFilename(), $this->exclude));
    }
    public function getChildren()
    {
        return new DirFilter($this->getInnerIterator()->getChildren(), $this->exclude);
    }
} 
```

然后可以像这样使用此代码：

```
$directory = new RecursiveDirectoryIterator($dirname);
$filtered = new DirFilter($directory, $dirignore); 
$mega = new RecursiveIteratorIterator($filtered, …); 
```

# javascript - 从淘汰视图模型中删除属性

> ID：15369292
> 
> 赞同：2
> 
> 时间：2013-03-12T18:32:17.857
> 
> 标签：javascript, knockout.js, computed-observable

我只是想知道如何从 knockout 中删除一个属性`viewModel`。具体来说，一个计算出来的。我有一个简单的`viewModel`

```
function viewModel(){
   var self = this;
   self.name = ko.observable("John");
   self.lastname = ko.observable("Doe");
   self.age = ko.observable("22");
   self.fullName = ko.computed(function(){
      return self.name()  + self.lastname();
   });
   self.fullNameAndAge = ko.computed(function(){
      return self.name()  + self.lastname() + ': ' + self.age();
   });
}; 
```

数据将被发送到服务器，但我想从`viewModel`.

我认为这样的事情会获取所有计算数据并将其删除，但没有找到类似的东西。

```
 for (observableKey in viewModel) {
        if (ko.isComputed(viewModel[observableKey]) 
                {
            delete viewModel[observableKey];
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T18:39:26.130

Knockout 可以返回一个常规对象，然后您可以从中删除任何您想要的东西。

```
var plainJs = ko.toJS(viewModel);
delete plainJs.fullName; 
```

记录[在这里](http://knockoutjs.com/documentation/json-data.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T18:37:47.910

您可以像这样遍历键：

```
for (var key in obj) {
   if(ko.isComputed(obj[key]))
   {
      delete obj[key];
   }
} 
```

**编辑**

[**这是一个工作小提琴**](http://jsfiddle.net/uzF5y/)。在小提琴中单击按钮并检查控制台，您可以看到 2 个对象，第一个是在删除计算的 obervables 之前，第二个是在删除计算的 observables 之后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T18:53:19.590

对于此类问题，我首选的方法是为您的 JSON 调用所需的任何内容创建一个特定的传输对象。

```
var userSaveRequest = function(data) {
  var self = this;
  self.name = data.name;
  self.lastname = data.lastname;
  // etc, etc
} 
```

然后，从我的调用代码中，像这样获取 JSON。

```
// inside viewModel
self.saveUser = function(){
  var queryData = ko.mapping.toJSON(
    new userSaveRequest(ko.mapping.toJS(self))
  );

  // use querydata in AJAX
} 
```

此外，值得记住的是 Javascript 是多么灵活。如果需要，您可以即时创建自己设计的对象。

```
var queryData = ko.mapping.toJSON(
   {
     name: self.name(),
     lastname: self.lastname()
   }
); 
```

# jquery - JQuery removeClass 函数不适用于子元素

> ID：15369294
> 
> 赞同：0
> 
> 时间：2013-03-12T18:32:19.697
> 
> 标签：jquery, find, children, removeclass

很简单的问题。为什么这不起作用：

```
$('.box').click(function() {
    //$(this).removeClass('nw_hidden');    //this works
    var el = $(this).find('.nw_div')[0];
    el.removeClass('nw_hidden');           //this not
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:33:31.357

因为`el`是 DOM 元素，而不是 jQuery 对象。尝试：

```
$(el).removeClass('nw_hidden'); 
```

或者创建`el`一个 jQuery 对象以开始：

```
var el = $(this).find('.nw_div'); 
```

或者可能

```
var el = $(this).find('.nw_div').first(); 
```

# forms - 默认情况下，在自动完成字段中显示名称，在隐藏字段中显示其 ID

> ID：15369295
> 
> 赞同：2
> 
> 时间：2013-03-12T18:32:21.217
> 
> 标签：forms, symfony, autocomplete

我尝试使用具有自动完成功能的野外城市。我使用 twitter bootstrap 样式和函数 typeahead，但我不知道我的工作是否好。

在我的示例中，我有 2 个实体：Person 和 City（法国约有 37,000 个公社）。

Person 实体与 City 字段 Birthplace 具有 OneToMany 关系。

因此，我创建了一个隐藏字段类型 city_typeahead 来添加一个 DataTransformer“CityToIdTransformer”，以从表单发送的 City id 中持久化一个对象。

在那之前，自动完成功能非常适合创建和编辑。

但是，在编辑表单中，我想在自动完成字段中显示在我的隐藏字段中注册的城市名称。这就是我卡住的地方。

我想与听众一起尝试，但我不确定要应用的解决方案。如果有人可以指导我，我将不胜感激。

谢谢你。

**编辑：** *我对自动完成字段国家进行了类似的测试，经过几次测试后我到达了。我创建了一个侦听器来检查隐藏字段是否有值，并从中获取名称并加载我的字段自动完成。我不知道该方法是否干净，但它有效，我的自动完成字段现在在编辑表单上显示国家名称。*

**表单类型：**

```
<?php

namespace Myapp\PersonBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

use Myapp\PersonBundle\Form\EventListener\AddNationalitySearchSubscriber;

class PersonType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {       
        $builder
            ->add('firstname')
            ->add('lastname')                
            ->add('nationality', 'country_typeahead', array(
                'attr' => array('class' => 'country-toset'),
                'required' => false))
            ->add('nationality_search','text', array(
            'attr' => array(
                'class' => 'country-tosearch',
                'name' => 'term',
                'autocomplete' => true,
            'required' => false,
            'mapped' => false));   

        $builder->addEventSubscriber(new AddNationalitySearchSubscriber());   
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'Myapp\PersonBundle\Entity\Person'
        ));
    }

    public function getName()
    {
        return 'person_person_type';
    }
} 
```

**视图中的脚本js：**

```
<script type="text/javascript"> 
            $('.country-tosearch').typeahead({
                source: function(query, process){ 
                    $.ajax({
                        url: "/ajax/country",
                        type: "post",
                        data: "term="+query,
                        dataType: "json",
                        async: false,
                        success: function(data){                            
                            countries = []
                            mapped = {}                            
                            $.map(data, function(country, i){
                                mapped[country.name] = country;
                                countries.push(country.name);
                            });
                            process(countries);
                        }
                    })
                },
                minLength: 3,
                property: 'enriched',
                items:15,
                updater: function (obj) {
                    if(mapped[obj].id){
                        $('.country-toset').val(mapped[obj].id);
                    }
                    return mapped[obj].name;
                }
            });            
        </script> 
```

**数据转换器：**

```
<?php 
namespace Myapp\PersonBundle\Form\DataTransformer;

use Symfony\Component\Form\DataTransformerInterface;
use Symfony\Component\Form\Exception\TransformationFailedException;
use Doctrine\Common\Persistence\ObjectManager;

use Myapp\GeoBundle\Entity\Country;

class CountryToIdTransformer implements DataTransformerInterface
{
    /**
     * @var ObjectManager
     */
    private $om;

    /**
     * @param ObjectManager $om
     */
    public function __construct(ObjectManager $om)
    {
        $this->om = $om;
    }

    /**
     * Transforms an object (country) to a string (id).
     *
     * @param  Country|null $country
     * @return string
     */
    public function transform($country)
    {
        if (null === $country) {
            return "";
        }

        return $country->getId();
    }

    /**
     * Transforms a string (id) to an object (country).
     *
     * @param  string $id
     * @return Country|null
     * @throws TransformationFailedException if object (country) is not found.
     */
    public function reverseTransform($id)
    {
        if (!$id) {
            return null;
        }

        $country = $this->om
            ->getRepository('MyappGeoBundle:Country')->findOneBy(array('id' => $id))
        ;

        if (null === $country) {
            throw new TransformationFailedException(sprintf(
                'A country with id "%s" does not exist!',
                $id
            ));
        }

        return $country;
    }
} 
```

**听众：**

```
<?php

namespace Myapp\PersonBundle\Form\EventListener;

use Symfony\Component\Form\FormEvent;
use Symfony\Component\Form\FormEvents;
use Symfony\Component\EventDispatcher\EventSubscriberInterface;

class AddNationalitySearchSubscriber implements EventSubscriberInterface
{
    public static function getSubscribedEvents()
    {
        return array(FormEvents::PRE_SET_DATA => 'preSetData');
    }

    public function preSetData(FormEvent $event)
    {
        $country = '';
        $data = $event->getData();
        $form = $event->getForm();

        if (null === $data) {
            return;            
        }

        if ($data->getNationality()) {
            $country = $data->getNationality();
        }

       $form->add('nationality_search','text', array(
            'attr' => array(
                'class' => 'country-tosearch',
                'name' => 'term',
                'autocomplete' => true,
            'data' => $country,
            'required' => false,
            'mapped' => false));   
    }
} 
```

# multithreading - 提供 Pthread 之间的并发性

> ID：15369299
> 
> 赞同：0
> 
> 时间：2013-03-12T18:32:35.897
> 
> 标签：multithreading, concurrency, posix

我正在研究多线程编程，但我遇到了一些问题。

在我的程序中有两个任务和两种类型的机器人来执行这些任务：

*   任务 1 需要任意两种类型的机器人和

*   任务 2 需要 2 个机器人 1 类型和 2 个机器人 2 类型。

给出robot1 和robot2 的总数以及指向这两种类型的指针用于初始化。线程共享这些机器人并且机器人被保留，直到线程完成它们。

实际任务是在 `doTask1(robot **)`将指向机器人指针的指针作为参数的函数中完成的，因此我需要传递我保留的机器人。我想提供并发。显然，如果我锁定所有内容，它将不会是并发的。robot1 是 Robot ** 的类型。由于它在一个线程调用 doTask 或完成它之前被所有线程使用，因此其他线程可以覆盖robot1，因此它会改变事情。我知道这是因为robot1 由所有线程共享。你能解释一下我该如何解决这个问题吗？我不想将任何参数传递给线程启动例程。

`rsc`是我的结构，用于保存初始化函数中给出的机器人和指针的数量。

```
void *task1(void *arg)
{
    int tid;
    tid = *((int *) arg);
    cout << "TASK 1 with thread id " << tid << endl;

    pthread_mutex_lock (&mutexUpdateRob);
    while (rsc->totalResources < 2)
    {
        pthread_cond_wait(&noResource, &mutexUpdateRob);
    }

    if (rsc->numOfRobotA > 0 && rsc->numOfRobotB > 0)
    {
        rsc->numOfRobotA --;
        rsc->numOfRobotB--;
        robot1[0] = &rsc->robotA[counterA];
        robot1[1] = &rsc->robotB[counterB];
        counterA ++;
        counterB ++;
        flag1 = true;
        rsc->totalResources -= 2;
    }

     pthread_mutex_unlock (&mutexUpdateRob);
     doTask1(robot1);

     pthread_mutex_lock (&mutexUpdateRob);

     if(flag1)
     {
         rsc->numOfRobotA ++;
         rsc->numOfRobotB++;
         rsc->totalResources += 2;
      }

       if (totalResource >= 2)
       {
           pthread_cond_signal(&noResource);
       }
       pthread_mutex_unlock (&mutexUpdateRob);

       pthread_exit(NULL);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T03:33:04.117

如果机器人是全局资源，线程不应该处理它们。它应该是主线程退出（或清理）功能的职责。此外，还有一种方法可以让线程明确地定位机器人，并锁定它们的使用。

该`robot1`数组似乎存储了机器人，并且它似乎是一个全局数组。然而：

*   它的访问不受互斥锁 ( `pthread_mutex_t`) 的保护，现在看来您已经处理好了。

*   此外，中的代码`task1`总是在修改条目`0`和`1`这个数组。如果两个或更多线程执行该代码，则条目将被覆盖。我不认为这是你想要的。之后如何使用该数组？

事实上，为什么这个数组需要是全局的？

底线是这样的：只要这个数组被线程共享，它们在并发工作时**就会出现问题。**这样想：

您有两家公司使用机器人工作，但他们使用同一辆卡车 ( `robot1`) 来移动机器人。这两家公司应该如何仅用一辆卡车*正常*、*高效地运作？*

# ruby - TinyTds::Error: Adaptive Server 连接失败

> ID：15369304
> 
> 赞同：4
> 
> 时间：2013-03-12T18:33:01.700
> 
> 标签：ruby, tiny-tds

这是一个奇怪的问题。我的机器上有一些使用 tiny_tds 版本的 ruby​​ 代码：0.6.0.rc1

一切正常。当同事尝试运行相同的代码时，他会收到以下错误：

TinyTds::Error: Adaptive Server 连接失败

我们在没有提供用户名或密码的情况下进行连接，因为我的机器不需要它。有任何想法吗？这可能是 sql 数据库的权利吗？

提前致谢

应该注意在我们安装了 SQL 2008 R2 和 SQL Express 的机器上存在问题。我们可以连接到 SQL express 但不能连接到 SQL 2008 R2

这是我们正在使用的代码

```
def self.GetTestMprsFromDB(dataServer,database,query)

mprids = Array.new

client = TinyTds::Client.new(:dataserver => dataServer, :database => database, :timeout => 1000) 
```

在初始化时进入 tiny_tds

```
def initialize(opts={})
  if opts[:password] && opts[:password].to_s.strip != ''
    opts[:password] = opts[:password].to_s
    warn 'FreeTDS may have issues with passwords longer than 30 characters!' if opts[:password].length > 30
  end
  raise ArgumentError, 'missing :host option if no :dataserver given' if opts[:dataserver].to_s.empty? && opts[:host].to_s.empty?
  @query_options = @@default_query_options.dup
  opts[:appname] ||= 'TinyTds'
  opts[:tds_version] = TDS_VERSIONS_SETTERS[opts[:tds_version].to_s] || TDS_VERSIONS_SETTERS['71']
  opts[:login_timeout] ||= 60
  opts[:timeout] ||= 5
  opts[:encoding] = (opts[:encoding].nil? || opts[:encoding].downcase == 'utf8') ? 'UTF-8' : opts[:encoding].upcase
  opts[:port] ||= 1433
  opts[:dataserver] = "#{opts[:host]}:#{opts[:port]}" if opts[:dataserver].to_s.empty?
  connect(opts)
end 
```

最后它抛出错误

# ruby-on-rails - 将数据从路由传递到构建多个对象的控制器

> ID：15369311
> 
> 赞同：0
> 
> 时间：2013-03-12T18:33:24.470
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我一直在尝试实现一个让我头疼好几天的功能（rails newb）。

我有一个由用户组成的应用程序，并且能够与特殊用户安排预订。我在特殊用户个人资料页面上放置了一个“计划预订”链接，该链接应该创建（1）一个“预订”对象和（2）创建预订对象的一个​​子对象（booking.user = 特殊用户）。第二部分是为了以后只有 booking.users 才能访问 booking 对象。

以下是我失败的尝试。

```
No route matches [GET] "/users/2/book_person" 
```

耙路线：

```
book_person_user POST /users/:id/book_person(.:format) 
```

路线：

```
resources :users do
 member do
  post :book_person, :controller => "bookings", :action => "book_person"
 end
end 
```

Booking_controller

```
def book_person
@booking = Booking.new
@booking.name = "Booking with #{params[:id]}"
if @booking.save
  @user = User.find(params[:id])
    if not @user.participant_of?(@booking)
      @booking.users << @user
      flash[:notice] = 'User was successfully added to booking'
    else
      flash[:error] = 'User was already part of booking'
    end
    redirect_to @booking 
else
  flash[:notice] = "Could not add booking"
  redirect_to @booking
end 
```

结尾

用户个人资料页面上的链接以预订该用户：

```
<%= link_to "Book Sessions", book_person_user_path, class: "btn btn-large" %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:38:22.383

试试这个：

```
<%= link_to "Book Sessions", book_person_user_path, :method => :post, class: "btn btn-large" %> 
```

# azure - 强制 Azure 回收应用程序池，而不仅仅是 AppDomain

> ID：15369314
> 
> 赞同：4
> 
> 时间：2013-03-12T18:33:29.807
> 
> 标签：azure, azure-web-app-service

我正在运行与非托管库交互的软件。这些库不能从不同于加载它们的 AppDomain 中使用。

因此，新的部署会导致失败。

在 Azure 网站上，是否有任何方法可以请求重新加载应用程序池，或者防止在进程中发生新的部署？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T06:59:17.653

部署后重新启动网站将解决此问题。这可以通过门户（“重新启动”）或使用 PowerShell CmdLets 或 Node-CLI 命令来完成。

有关这些的更多信息：

*   [http://www.windowsazure.com/en-us/develop/nodejs/how-to-guides/powershell-cmdlets/](http://www.windowsazure.com/en-us/develop/nodejs/how-to-guides/powershell-cmdlets/)（搜索Restart-AzureWebsite）
*   [http://www.windowsazure.com/en-us/develop/nodejs/how-to-guides/command-line-tools/](http://www.windowsazure.com/en-us/develop/nodejs/how-to-guides/command-line-tools/)（天蓝色站点重启）

# html - 主要内容左侧的垂直弹出菜单

> ID：15369317
> 
> 赞同：1
> 
> 时间：2013-03-12T18:33:32.450
> 
> 标签：html, css

我当前的 HTML/CSS 设置将 leftmenu 和 main 放在一个容器中，但主 div 出现在菜单下方。一旦我使用 float:left; 在导航上，导航变成了水平菜单。如何将左侧菜单和主要内容放在同一水平面上？

这是HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>CMAP Playground 4</title>
<link href="styles.css" rel="stylesheet" type="text/css" />
</head>

<body>
    <div class="header">
            <ul class="headernav">
                <li><a class="headernav" href="#" title="Main website">CMAP</a></li>
                <li><a class="headernav" href="#" title="SharePoint Server">SharePoint</a></li>
                <li><a class="headernav" href="#" title="Wiki Pages">Wiki</a></li>
                <li><a class="headernav" href="#" title="MetroPulse">Metropulse</a></li>
            </ul>

        <div id="logo"></div>
    </div>

<div id="container">

    <div id="leftmenuwrapper">
        <ul>
            <li><a href="#" title="IT Homepage">IT Home</a></li>
            <li><a href="#" title="Our Services">Services</a>
                <ul>
                    <li><a href="#" title="Product 1">Product 1</a>    </li>
                    <li><a href="#" title="Product 2">Product 2</a></li>
                </ul><li>
            <li><a href="#" title="About IT">About IT</a></li>
            <li><a href="#" title="The IT Index">IT A-Z Index</a></li>
            <li><a href="#" title="Current News">Hot Topics</a></li>
        </ul>
    </div>

<div class="rightmenu">
        Print this page!
</div>

    <div class="main">
        <h1>
            Welcome to CMAP Intranet
        </h1>

        <p>
            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
        </p></br>

        <p>
            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
        </p></br>
</div>

    <div class="footer">
        <ul>
            <li><a class="footernav" href="#" title="Get connected">Get Connected</a></li>
            <li><a class="footernav" href="#" title="IT Services">IT Services</a></li>
            <li><a class="footernav" href="#" title="About IT">About IT</a></li>
            <li><a class="footernav" href="#" title="CMAP website">CMAP</a></li>
            <li><a class="footernav" href="#" title="SharePoint Server">SharePoint</a></li>
            <li><a class="footernav" href="#" title="Wiki page">Wiki</a></li>
            <li><a class="footernav" href="#" title="Metropulse">Metropulse</a></li>
            </ul>
        </div>
    </div>
</div>

</body>
</html> 
```

这是CSS：

```
#container {
  height:auto;
    border:1px solid green;
    vertical-align: middle;
  }

  #leftmenuwrapper ul, #leftmenuwrapper ul li {
      margin: 0;
      padding: 0;
      list-style: none;
      display: inline-block;
  }

  #leftmenuwrapper ul li {
      background-color:#7f95db;
      border-bottom:solid 1px white;
      width:140px;
      display: block;
  }

  #leftmenuwrapper ul li:hover {
      background-color: #6679e9;
      position: relative;
  }

  #leftmenuwrapper ul li a {
      padding: 5px 15px;
      color: #FFF;
      display: block;
      text-decoration: none;
  }

  #leftmenuwrapper ul li ul {
      position: absolute;
      display: none;
  }

  #leftmenuwrapper ul li:hover ul {
      left: 140px;
      top: 0px;
      display: block;
  }

  #leftmenuwrapper ul li ul li{
      background-color:#cae25a;
  }

      .main {
          width: 60%;
          margin: 0 10em 0 10em;
          padding: 0 10px;
          display: inline-block;
      } 
```

# scala - 为 Ensime 添加/使用参数完成支持

> ID：15369319
> 
> 赞同：4
> 
> 时间：2013-03-12T18:33:33.510
> 
> 标签：scala, emacs, ensime

在使用 Ensime 时（对我来说特别是在 Emacs 中，虽然我怀疑这个问题适用于其他 Ensime 集成），我经常会错过 IntelliJ 提供的参数补全支持——也就是说，在输入方法参数时，可以使用快捷键显示这些参数的名称和类型，作为记忆辅助，而不是在 ScalaDoc 等中查找它们。

我有好几次不小心让 Ensime 为我做这件事，但我不确定它在什么情况下有效，或者实际上是什么键绑定调用它。

如果它是一个自动完成，那么也许有人知道它正在使用的定义的名称，所以我可以将它绑定到一个键？

我已经挖掘了 Ensime 的源代码，但似乎找不到这个。

# r - 消除 tag from inline Rhtml knitr code

> ID：15369320
> 
> 赞同：2
> 
> 时间：2013-03-12T18:33:33.833
> 
> 标签：r, knitr

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T19:15:15.570

I'm assuming you mean that only the output of what is stored in x is written into the document. You can get this by wrapping the expression in `I()`.

Compare the differences in the output of this:

```
<html>

<head>
<title>Title</title>
</head>

<body>

<p>Test document</p>

<!--rinline x <- 3 -->

<!--rinline x -->

<!--rinline I(x) -->

</body>
</html> 
```

This produces the following body:

```
<body>

<p>Test document</p>

<code class="knitr inline">3</code>

3

</body> 
```

We can see that the first rinline gets the code tag while the second just inserts the output into the document directly.

# bash - bash 命令行标准输入如何传播到子进程

> ID：15369322
> 
> 赞同：2
> 
> 时间：2013-03-12T18:33:35.083
> 
> 标签：bash

我有一个脚本 ( `file_redirection.sh`)，我尝试了各种组合来获得我想要的东西：

```
#!/bin/bash
echo "cat " $*
echo "cat $*"
echo "cat $@"
echo "cat " $@ 
```

我希望能够跑步

```
file_redirection.sh < tmp_file 
```

并让它显示

```
"cat < tmp_file" 
```

那可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T18:38:17.127

不，那是不可能的。在`<`你的脚本运行之前，你的命令行上的 由 shell 解释。您需要转义`<`以将其放入您的脚本中。例如：

```
file_redirection.sh \< tmp_file 
```

将生成您正在寻找的输出，但*不*执行任何文件重定向。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-12T21:05:17.653

你问“它是如何工作的”。UNIX 进程是使用称为 的操作创建的`fork`。这会以非常有效的方式获取*当前*进程的副本并几乎完全按原样复制它。复制还包括文件描述符表，其中 stdin、stdout、stderr 存在。

当您进行重定向时，shell 会分叉，然后在子进程中更改它自己的文件描述符 (fd) 表。然后它在同一进程中使用相同的 fd 表运行新脚本。使用传统机制，进程唯一可以检查的是标准输入是否连接到终端。在 C 中它使用它`isatty()`，而在 bash 中你可以`if [[ -t 0 ]]...`（零是标准输入的 fd）。

在 Linux 中（如果您使用的是 Linux），您还有一个附加选项，fd 表以可读的形式呈现在`/proc/$$/fd`（$$ 给出当前进程 id）中。 `ls -l /proc/$$/fd`你会明白我的意思。

那么，我被重定向了吗？

```
if [[ -t 0 ]]   # is stdin a terminal?
then
    suffix=""
else
    line=$(ls -l /proc/$$/fd/0)
    file="${line##*-> }"

    suffix="< $file"
fi

echo "cat $suffix" 
```

在命令行上：

```
/home/user1$ file_redirection.sh < tmp_file
cat < /home/qa/tmp_file 
```

但。你到底为什么要这么做？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-12T18:41:16.187

用这个：

`file_redirection.sh "< tmp_file"`

在你的文件中：

`echo "cat $1"`

或者

`file_redirection.sh \< tmp_file`

在你的文件中：

`echo "cat $*"`

# android - 如何在android中制作更大的数组列表？

> ID：15369325
> 
> 赞同：0
> 
> 时间：2013-03-12T18:33:37.517
> 
> 标签：android, arraylist

我想在一个列表中显示 80 个项目，但是在 10 个项目之后，当我进行测试时，应用程序停止并且 logcat 显示 ArrayIndexOutOfBoundsException。

我怎样才能使我的列表更大？

我的代码：

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.galerie_galerie);

        rowItems = new ArrayList<RowItem>();
        for (int i = 0; i < titles.length; i++) {
            RowItem item = new RowItem(images[i], titles[i], descriptions[i]);
            rowItems.add(item);
        }

        listView = (ListView) findViewById(R.id.list);
        CustomListViewAdapter adapter = new CustomListViewAdapter(this,
                R.layout.list_item, rowItems);
        listView.setAdapter(adapter);
        listView.setOnItemClickListener(this);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T18:35:44.847

您收到此错误是因为您`image`的 s 或`descriptions`数组没有您的`titles`数组那么大。

例如，如果：

*   您的`titles`数组有 10 个元素
*   您的`images`数组有 10 个元素
*   你`description`有 9 个元素

当您尝试访问 for 循环中的第 10 个元素时，您会从标题和图像中提取第 10 个元素，但 description 没有那么多元素，因此您会得到一个`ArrayIndexOutOfBoundsException`

如何避免这种情况发生将完全取决于您的数据和您想要的结果。如果您有数据来支持每个标题的图像和描述，那么您可能只是在初始化数据时犯了一个错误。这可能是一个简单的解决方法。

如果您没有支持每个标题的图像和/或描述的数据，您应该在`for`循环内部进行检查，以查看是否有可用的图像或描述。如果没有（您正在检查的当前索引传递了数组的长度），那么您可以将一个占位符放入`ArrayList`. 如果您这样做，请记住稍后在您实际使用它时处理它。

# android - Eclipse 和 ADT：编译 XML 文件，很烦人

> ID：15369328
> 
> 赞同：3
> 
> 时间：2013-03-12T18:33:44.110
> 
> 标签：android, xml, eclipse, compilation, adt

我使用 Eclipse Juno 和最新版本的 ADT 来制作 Android 应用程序。为了测试应用程序，我显然单击了工具栏的“运行”按钮。

如果我当前正在编辑 Java 文件，设备窗口会打开，我可以正常运行它。但是，如果我正在编辑 XML 文件，Eclipse 编译器会莫名其妙地尝试*编译*XML 文件，这显然是行不通的。

它还创建了一个“myfile.out.xml”，它会产生大量错误，我必须重新启动 Eclipse 才能将其删除，因为 Eclipse 存在缺陷，无法删除简单文件（“处理重构时出现异常”删除'”，原因很愚蠢，例如“删除资源时发生错误”）。

这很烦人，一旦我删除了正确的文件而不是“.out”文件><

有没有办法告诉 Eclipse 运行应用程序而不是 XML 文件，即使我正在编辑其中一个文件？

谢谢您的帮助！我还阅读了以下内容：[阻止 Eclipse 构建 .xml 文件](https://stackoverflow.com/questions/13493640/prevent-eclipse-from-building-xml-files)，但该解决方案对我不起作用...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T13:21:45.883

我发现在我的设备上进行测试很烦人。我在资产文件夹中编辑了很多文件，并想运行我的应用程序进行测试（java 没有更改并且运行失败）。

我的解决方案是**Project > Build Automatically** then Run，我选择我的设备，然后选中**Use same device for future launch**

现在下次我想测试我的应用程序时，我**双击**运行按钮执行 2 次运行：**第一次单击**导致警告：活动未启动，其当前任务已被置于前面，**第二次单击**在设备上运行应用程序为预期的。

这样我就不必添加空格或代码，然后删除它来重新编译我的应用程序。

## 在 XML 编辑后运行

为了运行运行，我从 Eclipse 编辑器中选择 .java 文件或清单文件，然后单击运行，而停留在 XML 文件中，运行不起作用。

# python - Python：使用 lxml 添加 xml 模式属性

> ID：15369329
> 
> 赞同：8
> 
> 时间：2013-03-12T18:33:44.680
> 
> 标签：python, xsd, lxml

我编写了一个脚本，以 xml 格式打印当前目录中的所有 .xml 文件，但我不知道如何将 xmlns 属性添加到顶级标记。我想得到的输出是：

```
<?xml version='1.0' encoding='utf-8'?>
<databaseChangeLog 
      xmlns="http://www.host.org/xml/ns/dbchangelog"
      xmlns:xsi="http://www.host.org/2001/XMLSchema-instance"
      xsi:schemaLocation="www.host.org/xml/ns/dbchangelog">

    <include file="cats.xml"/>
    <include file="dogs.xml"/>
    <include file="fish.xml"/>
    <include file="meerkats.xml"/>

</databaseChangLog> 
```

但是，这是我得到的输出：

```
 <?xml version='1.0' encoding='utf-8'?>
 <databaseChangeLog>
    <include file="cats.xml"/>
    <include file="dogs.xml"/>
    <include file="fish.xml"/>
    <include file="meerkats.xml"/>
 </databaseChangLog> 
```

这是我的脚本：

```
import lxml.etree
import lxml.builder
import glob

E = lxml.builder.ElementMaker()
ROOT = E.databaseChangeLog
DOC = E.include

# grab all the xml files
files = [DOC(file=f) for f in glob.glob("*.xml")]
the_doc = ROOT(*files)

str = lxml.etree.tostring(the_doc, pretty_print=True, xml_declaration=True, encoding='utf-8')

print str 
```

我在网上找到了一些明确设置命名空间属性的例子，[这里](http://effbot.org/zone/element-namespaces.htm)和[这里](https://stackoverflow.com/questions/1374443/how-to-add-a-namespace-to-an-attribute-in-lxml?rq=1)，但老实说，当我刚刚开始时，它们让我有点不知所措。还有另一种方法可以将这些 xmlns 属性添加到 databaseChangeLog 标记中吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T19:26:22.373

```
import lxml.etree as ET
import lxml.builder
import glob

dbchangelog = 'http://www.host.org/xml/ns/dbchangelog'
xsi = 'http://www.host.org/2001/XMLSchema-instance'
E = lxml.builder.ElementMaker(
    nsmap={
        None: dbchangelog,
        'xsi': xsi})

ROOT = E.databaseChangeLog
DOC = E.include

# grab all the xml files
files = [DOC(file=f) for f in glob.glob("*.xml")]

the_doc = ROOT(*files)
the_doc.attrib['{{{pre}}}schemaLocation'.format(pre=xsi)] = 'www.host.org/xml/ns/dbchangelog'

print(ET.tostring(the_doc,
                  pretty_print=True, xml_declaration=True, encoding='utf-8')) 
```

产量

```
<?xml version='1.0' encoding='utf-8'?>
<databaseChangeLog xmlns:xsi="http://www.host.org/2001/XMLSchema-instance" xmlns="http://www.host.org/xml/ns/dbchangelog" xsi:schemaLocation="www.host.org/xml/ns/dbchangelog">
  <include file="test.xml"/>
</databaseChangeLog> 
```

# html - 使用 twitter bootstrap 时，按钮相邻而不是向下

> ID：15369334
> 
> 赞同：-1
> 
> 时间：2013-03-12T18:33:52.010
> 
> 标签：html, css, twitter-bootstrap

我正在使用 twitterbootstrap 来设计一个表单。我看到按钮与最后一个输入字段相邻，而不是在最后一个输入字段下方。

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Sign in &middot; Twitter Bootstrap</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <!-- Le styles -->
    <link href="bootstrap.css" rel="stylesheet">
    <style type="text/css">
      body {
        padding-top: 40px;
        padding-bottom: 40px;
        background-color: #f5f5f5;
      }

      .form-signin {
        max-width: 500px;
        padding: 19px 29px 29px;
        margin: 0 auto 20px;
        background-color: #ffffff;
        border: 1px solid #e5e5e5;
        -webkit-border-radius: 5px;
           -moz-border-radius: 5px;
                border-radius: 5px;
        -webkit-box-shadow: 0 1px 2px rgba(0,0,0,.05);
           -moz-box-shadow: 0 1px 2px rgba(0,0,0,.05);
                box-shadow: 0 1px 2px rgba(0,0,0,.05);
      }
      .form-signin .form-signin-heading,
      .form-signin .checkbox {
        margin-bottom: 10px;
      }
      .form-signin input[type="text"],
      .form-signin input[type="password"] {
        font-size: 16px;
        height: auto;
        margin-bottom: 15px;
        padding: 7px 9px;
      }

    </style>
    <link href="../CP/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="../CP/js/html5shiv.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../CP/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../CP/ico/apple-touch-icon-114-precomposed.png">
      <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../CP/ico/apple-touch-icon-72-precomposed.png">
                    <link rel="apple-touch-icon-precomposed" href="../CP/ico/apple-touch-icon-57-precomposed.png">
                                   <link rel="shortcut icon" href="../CP/ico/favicon.png">
  </head>

<body style="background-color: #F5FBEF">

    <div class="container">
           <div class="row">

        <div class="span12" >
      <form class="form-signin">

        <h2 class="form-signin-heading">Register with Carpool</h2>

              <input class="input-xlarge" type="text" id="inputName" placeholder="Full Name">
              <input class="input-xlarge" type="text" id="inputEmail" placeholder="Email">
              <input class="input-xlarge" type="text" id="inputMobile" placeholder="Mobile Number">
              <input class="input-xlarge" type="text" id="inputCarModel" placeholder="Car Model">
              <input class="input-xlarge" type="text" id="inputCarPlateNumber" placeholder="Car Plate No"/>
              <button class="btn btn-large btn-primary" type="submit" onclick="window.location.href='login.htm'">Register</button>
              <button class="btn btn-large btn-primary" type="button">Clear</button>

      </form>
      </div>
    </div>
    </div> <!-- /container -->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../CP/js/jquery.js"></script>
    <script src="../CP/js/bootstrap-transition.js"></script>
    <script src="../CP/js/bootstrap-alert.js"></script>
    <script src="../CP/js/bootstrap-modal.js"></script>
    <script src="../CP/js/bootstrap-dropdown.js"></script>
    <script src="../CP/js/bootstrap-scrollspy.js"></script>
    <script src="../CP/js/bootstrap-tab.js"></script>
    <script src="../CP/js/bootstrap-tooltip.js"></script>
    <script src="../CP/js/bootstrap-popover.js"></script>
    <script src="../CP/js/bootstrap-button.js"></script>
    <script src="../CP/js/bootstrap-collapse.js"></script>
    <script src="../CP/js/bootstrap-carousel.js"></script>
    <script src="../CP/js/bootstrap-typeahead.js"></script>

  </body>
</html> 
```

我应该怎么做才能获得最后一个输入字段下方的按钮？

最好的问候卡蒂克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T02:59:15.010

伙计们，我找到了解决方案。

我所做的就是这样。我将按钮元素包含在单独的 DIV 标记中，效果很好。按钮位于输入字段下方。

```
<input class="input-xlarge" type="text" id="inputName" placeholder="Full Name">
              <input class="input-xlarge" type="text" id="inputEmail" placeholder="Email">
              <input class="input-xlarge" type="text" id="inputMobile" placeholder="Mobile Number">
              <input class="input-xlarge" type="text" id="inputCarModel" placeholder="Car Model">
              <input class="input-xlarge" type="text" id="inputCarPlateNumber" placeholder="Car Plate No"/>
              <div>
              <button class="btn btn-large btn-primary" type="submit" onclick="window.location.href='login.htm'">Register</button>
              <button class="btn btn-large btn-primary" type="button">Clear</button>
              </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:01:29.133

最好的是将控件（和标签）包装在`<fieldset>`. 请参阅[有关使用表格的 TB 文档](http://twitter.github.com/bootstrap/base-css.html#forms)。

# actionscript-3 - 确定 Captivate 幻灯片的结尾？

> ID：15369335
> 
> 赞同：0
> 
> 时间：2013-03-12T18:33:52.933
> 
> 标签：actionscript-3, flash, adobe-captivate

我正在使用 Flash 调用 Captivate 5.5 文件并通过 Flash 控制一切。我可以很好地控制 Captivate 中的所有内容，但我唯一需要弄清楚的是如何判断当前幻灯片是否在最后一帧。

在 Flash 中，我有一个“下一步”按钮，单击该按钮将推进 Captivate 项目，但我想隐藏该按钮，直到 Captivate 幻灯片完成。我可以很好地使用`MovieClip(_swfLoader.content).rdinfoCurrentFrame`它并且它工作得很好，但是`MovieClip(_swfLoader.content).rdinfoFrameCount`可以获得整个项目的框架，而不仅仅是用户当前所在的幻灯片。

我想也许我可以在几秒钟内访问 Captivates 幻灯片持续时间，但这也是不行的 :( 我不敢相信 Adob​​e 没有创建一个变量，让开发人员可以访问任何类型的幻灯片持续时间或幻灯片完成。

我的一个想法是创建某种类型的循环，该循环将循环当前帧数，当帧匹配时，幻灯片结束并显示“下一步”按钮。但是，我认为循环比帧进程发生得更快，因此任何类型的帧计数都将匹配当前帧。

我的另一个想法是检查 Captivate 的当前暂停状态是否为真（意味着 Captivate 已暂停）。在每张 Captivate 幻灯片中，我在每张幻灯片的末尾都有一个暂停，以防止幻灯片自动进行，但我找不到检查暂停状态的方法。

有没有人遇到过这个问题？你是怎么过来的？

以下是 Captivate AS3 变量的几个链接：

[CPGURU](http://www.cpguru.com/adobe-captivate-5-system-variables/)

[管道工](http://pipwerks.com/2010/08/23/complete-list-of-variables-for-adobe-captivate-5/)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T07:54:29.340

您可以读取这些值并进行比较（在 CPGURU 上找到）：

`rdinfoFrameCount`和`rdinfoCurrentFrame`

不过这个我没查过

重新暂停不是暂停幻灯片的`rdcmndPause`or`rdcmndPaused`属性吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-17T06:59:59.720

在将 Captivate swf 导入我的主 AS3 Flash 电影后，我使用 SoThink 反编译了 Captivate SWF 并研究了使用 trace( [importedSwfRef].movi​​eXML ) 生成的 XML 脚本。

*   每张幻灯片都在一个影片剪辑中
*   可以看到每张幻灯片的帧数（XML Attr）对应于每个movieclip
*   每个影片剪辑都在自己的图层中
*   每个剪辑都命名为“SlideX_mc” 请记住幻灯片编号从零开始。
*   似乎所有幻灯片都“关闭”并且当前幻灯片“打开”

在每张幻灯片的末尾物理添加一个小部件是“锤头”方法。您不想做 100 次，而且还需要您的客户具备一定水平的专业知识来开发任何内容。理想情况下，您需要一个脚本，在开始使用 addFrameScript() 之前动态嗅出并为每个幻灯片剪辑添加 stop()

刚刚想到 - 也许您可以将 stop() 添加到每个幻灯片剪辑的末尾？您知道幻灯片的数量，因此您可以循环通过 Slide0_mc 到 SlideX_mc 查询帧数，然后将回调函数添加到 Stop(); 玩头 - 也许？

# c# - 根据特定条件更改按钮格式

> ID：15369336
> 
> 赞同：1
> 
> 时间：2013-03-12T18:33:53.913
> 
> 标签：c#, windows

我有一个小问题，但首先是一些背景

如果单击正确的答案，我的按钮的背景颜色将更改为 YellowGreen，而其他三个变为红色，但我的新问题是我无法弄清楚如何做到这一点，因此如果用户单击的答案是错误的，三个错误答案变为红色，并以绿色突出显示正确答案（用户单击的按钮周围有一个明亮的边框，以通知这是所选答案）。

为了解决原来的问题，我做了以下事情：

```
if (btnA.Tag.ToString() == "0")
        {
            btnA.BackColor = Color.YellowGreen;
            btnB.BackColor = Color.Red;
            btnC.BackColor = Color.Red;
            btnD.BackColor = Color.Red;
        } 
```

我对数字 0-4 做了上述四次（数组中的四个可能答案；表格上的 A、B、C 或 D。

我的代码现在如下：

```
private void button4_Click(object sender, EventArgs e)
    {

        //Disables the buttons upon clicking 
        btnA.Font = new Font(btnA.Font.Name, btnA.Font.Size, FontStyle.Bold);
        btnA.FlatAppearance.BorderColor = Color.Cyan;
        btnA.FlatAppearance.BorderSize = 3;
        btnA.Enabled = false;
        btnB.Enabled = false;
        btnC.Enabled = false;
        btnD.Enabled = false;

        if (btnA.Tag.ToString() == "0")
        {
            btnA.BackColor = Color.YellowGreen;
            btnB.BackColor = Color.Red;
            btnC.BackColor = Color.Red;
            btnD.BackColor = Color.Red;
        }

        if (btnA.Tag.ToString() == "0")
        {
            iCorrect++;
            if (debugMode)
            {
                Debug.WriteLine("Correct: " + iCorrect.ToString());
            }
        }
    }

    private void button5_Click(object sender, EventArgs e)
    {
        //
        btnB.Font = new Font(btnB.Font.Name, btnB.Font.Size, FontStyle.Bold);
        btnB.FlatAppearance.BorderColor = Color.Cyan;
        btnB.FlatAppearance.BorderSize = 3;
        btnA.Enabled = false;
        btnB.Enabled = false;
        btnC.Enabled = false;
        btnD.Enabled = false;

        if (btnA.Tag.ToString() == "1")
        {
            btnA.BackColor = Color.Red;
            btnB.BackColor = Color.YellowGreen;
            btnC.BackColor = Color.Red;
            btnD.BackColor = Color.Red;
        }

        if (btnA.Tag.ToString() == "1")
        {
            iCorrect++;
            if (debugMode)
            {
                Debug.WriteLine("Correct: " + iCorrect.ToString());
            }
        }
    }

    private void button6_Click(object sender, EventArgs e)
    {
        //
        btnC.Font = new Font(btnC.Font.Name, btnC.Font.Size, FontStyle.Bold);
        btnC.FlatAppearance.BorderColor = Color.Cyan;
        btnC.FlatAppearance.BorderSize = 3;
        btnA.Enabled = false;
        btnB.Enabled = false;
        btnC.Enabled = false;
        btnD.Enabled = false;

        if (btnA.Tag.ToString() == "2")
        {
            btnA.BackColor = Color.Red;
            btnB.BackColor = Color.Red;
            btnC.BackColor = Color.YellowGreen;
            btnD.BackColor = Color.Red;
        }

        if (btnA.Tag.ToString() == "2")
        {
            iCorrect++;
            if (debugMode)
            {
                Debug.WriteLine("Correct: " + iCorrect.ToString());
            }
        }
    }

    private void button7_Click(object sender, EventArgs e)
    {
        //
        btnD.Font = new Font(btnD.Font.Name, btnD.Font.Size, FontStyle.Bold);
        btnD.FlatAppearance.BorderColor = Color.Cyan;
        btnD.FlatAppearance.BorderSize = 3;
        btnA.Enabled = false;
        btnB.Enabled = false;
        btnC.Enabled = false;
        btnD.Enabled = false;

        if (btnA.Tag.ToString() == "3")
        {
            btnA.BackColor = Color.Red;
            btnB.BackColor = Color.Red;
            btnC.BackColor = Color.Red;
            btnD.BackColor = Color.YellowGreen;
        }

        if (btnA.Tag.ToString() == "3")
        {
            iCorrect++;
            if (debugMode)
            {
                Debug.WriteLine("Correct: " + iCorrect.ToString());
            }
        }
    }
}
} 
```

我尝试了一些不同的事情，但它不断导致奇怪的事情，这些事情基本上不是我想做的，我无法弄清楚我需要使用什么样的语法或代码来完成这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T18:53:31.487

如果您想将 Buttons 设置为 false，您可以创建另一个小方法并在您想要启用或禁用按钮的地方调用它这里是代码示例

```
foreach( var control in this.Controls.OfType<Button>() )
{
   control.enabled = false;
} 
```

这应该会给你一个关于如何使用它的想法你也可以突出显示代码右键单击并单击 Refactor->Extract Method 会给你一个方法模板你也可以使用

如果您想通过特定类型的控件进行更长版本的循环，您也可以执行以下操作..您应该能够遵循这一点并根据您想要处理的组件类型添加任何条件..对你有好处的东西，可以玩也可以学习

`If you have TextBoxes`你想清除

```
YourFormName.Controls.OfType<TextBox>().ToList().ForEach(textBox => textBox.Clear());

private void ClearTextBoxes(Control control)
{
    foreach(Control childControl in control.Controls)
    {
         TextBox textbox = childControl as TextBox;
         if(textbox != null)
            textbox.Text = string.Empty;
         else if(childControl.Controls.Count > 0)
             ClearTextBoxes(childControl);//Recursive call here
    }
} 
```

`Check the Button / Sender Name`或者，如果您在 forloop 中，您可以检查例如 caae 语句中的 text.Name ，然后在 switch 语句中设置启用或禁用。确保您正在检查 foreach 循环内部的以下内容

```
switch (((Button)sender).Name)
{
  case " btnA":
    {
     //sent enabled or disabled  
     break;
    }
case " btnB":
    {
       //sent enabled or disabled  
       break;
    }
//etc......
} 
```

# glassfish-3 - 如何跟踪 Glassfish 实例中的会话数？

> ID：15369342
> 
> 赞同：3
> 
> 时间：2013-03-12T18:34:18.720
> 
> 标签：glassfish-3

我们曾经使用 WebObject 服务器来托管我们的应用程序。现在搬到 Glassfish 很有趣。WebObject 用于让我们查看每个实例正在处理多少事务和会话。我如何在 Glassfish 中解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-13T10:51:15.730

您可以在 Glassfish 管理控制台中查看统计信息。您必须先激活监控：

`Configurations`-> `server-config`-> `Monitoring`-> 将监控级别设置`HIGH`为`Web Container`

`server`现在您可以在->下看到统计信息`Monitor`

![玻璃鱼监测](../Images/d2c0ffaa0f05dfffeb9fe449e0c0a639.png)

您还可以通过 asadmin 命令检索统计信息，有关更多信息，[请查看](http://docs.oracle.com/cd/E19798-01/821-1751/ghqfr/index.html)。

# java - 带有分页数据表和 ajax 的迭代参数

> ID：15369352
> 
> 赞同：3
> 
> 时间：2013-03-12T18:34:44.437
> 
> 标签：java, ajax, jsf, jakarta-ee, datatable

我正在尝试找到数据表/ajax 问题的解决方案（简而言之）：

```
<h:panelGroup layout="block" styleClass="ptl-body" id="toRender">
<h:dataTable value="#{flightMBean.flights}" var="f" id="flight_table" styleClass="table table-striped table-bordered">
    <h:column>
        <f:facet name="header">Airline</f:facet>
        <h:outputText value="#{f.airline.name}"/>
    </h:column>
    ...
    <h:column>
        <f:facet name="header">Status</f:facet>
        <span class="label label-success">Approved </span>
        <sec:authorize ifAnyGranted="ROLE_USER, ROLE_ADMIN">
            <h:form>
                <h:commandButton action="#{userMBean.observeFlight(f.id)}"
                                 styleClass="btn purple" value="Observe">
                    <f:ajax execute="@form" />
                </h:commandButton>
            </h:form>
        </sec:authorize>
    </h:column>
</h:dataTable> 
```

分页器操作：

```
<h:form style="margin: 0 0 0 0">
<h:commandButton  styleClass="btn"
                  action="#{flightMBean.previous()}" 
                  rendered="#{flightMBean.paginator.hasPreviousPage}"
                  value="Prev">
    <f:ajax render=":toRender"/>
</h:commandButton>
<h:commandButton styleClass="btn" action="#{flightMBean.next()}" 
                 rendered="#{flightMBean.paginator.hasNextPage}"
                 value="Next">
    <f:ajax render=":toRender"/>
</h:commandButton> 
```

对于数据表的第一个视图页面，一切似乎都在工作。当我单击“观察”时，具有良好 ID 的航班会进入数据库。当我单击“下一步”按钮时出现问题 - 数据表呈现新行，但每个 id 都与第一页上的相同。

例如，在第一页我有航班：从 x 到 y 在 20:00，id=1 和另一个 id=2，第二页呈现第三次航班，id=3。如果我想观察第一次或第二次飞行，一切都很好！如果我想观察第三个，id=1 的航班进入数据库。

PS。如果我只放了 #{f.id} 而没有 form/commandButton/jsf 组件，一切看起来都很好......只是 jsf 组件重置了我的参数；/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:58:11.963

如果支持 bean 是请求范围的，并且`<h:dataTable value>`在（后）构造期间不保留完全相同的数据模型（背后的对象），则会发生这种情况。

要么将 bean 放在视图范围内，要么在 bean 的（后）构造函数中编写逻辑，以保留与将带有表的表单呈现给最终用户时完全相同的数据模型。如果它取决于某些基于请求的条件，那么您可以使用`<f:param>`跨请求保留它们。

### 也可以看看：

*   [未调用 commandButton/commandLink/ajax 操作/侦听器方法或未更新输入值](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked/2120183#2120183)- 第 4 点。

# python - 使用列表名称作为字符串访问列表

> ID：15369354
> 
> 赞同：4
> 
> 时间：2013-03-12T18:34:47.063
> 
> 标签：python, list

我有一个包含数据的文件，我想根据第一列中的值将其分成各种列表。我确切地知道第一列中的可能值是什么，但它们没有任何好的数学进展。有没有更短的方法来编写以下代码？

```
x0=[]
y0=[]
x2=[]
y2=[]
x16=[]
y16=[]
# etc.

for line in file:
    words=line.split()
    if words[0] == '0':
        x0.append(words[1])
        y0.append(words[2])
    elif words[0] == '2':
        x2.append(words[1])
        y2.append(words[2])
    elif words[0] == '16':
        x16.append(words[1])
        y16.append(words[2])
    # etc. 
```

我的思考过程如下，但我定义的字符串（x 和 y）显然是字符串，并且不引用我希望它们引用的列表。

```
x0=[]
y0=[]
x2=[]
y2=[]
x16=[]
y16=[]
# etc

for line in file:
    words=line.split()
    x='x'+words[0]
    y='y'+words[0]
    x.append(words[1])
    y.append(words[2]) 
```

更新：我意识到可以使用字典来执行此操作，其中我的值将是一个列表列表，但主要是我很好奇是否有一种 Python 的方式来编码这个遵循我上面概述的思路。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T18:36:13.977

使用 a[`defaultdict`](http://docs.python.org/2/library/collections.html#collections.defaultdict)而不是一堆单独的值。

```
from collections import defaultdict
extracted_values = defaultdict(list)
for line in file:
    words = line.split()
    extracted_values['x' + words[0]].append(words[1])
    extracted_values['y' + words[0]].append(words[2]) 
```

然后你只需通过字典键而不是变量名来访问你的值。

```
extracted_values['x0']
extracted_values['y1'] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-12T18:37:12.867

建议你转

```
x0=[]
x2=[]
x16=[] 
```

成一个字典：

```
x={'0':[], '2':[], '16':[]} 
```

然后，您可以将各个列表引用为`x['0']`等`x['2']`。

特别是，您将能够`for`像这样重写循环：

```
for line in file:
    words = line.split()
    x[words[0]].append(words[1])
    y[words[0]].append(words[2]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T18:47:09.333

您可以使用`globals()`字典，因此：

```
x0=[]
y0=[]
x2=[]
y2=[]
x16=[]
y16=[]
# etc

for line in file:
    words=line.split()
    x=globals()['x'+words[0]]
    y=globals()['y'+words[0]]
    x.append(words[1])
    y.append(words[2]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T19:22:10.677

是的，你*应该*使用字典。但是要回答您的问题，您可以使用`locals()`，或者更灵活地，组装您想要的命令并使用`eval`. 例如，如果您的数据都是数字：

```
words = line.split()
eval("x%s.append(%s)" % (words[0], words[1]))
eval("y%s.append(%s)" % (words[0], words[2])) 
```

请注意`line.split()`，即使它们仅包含数字，也会为您提供字符串。因此`%s`，不是`%d`。

但无论如何，不​​要这样做。使用字典。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T18:59:47.543

有些人会喊，但我还是不明白为什么他们不赞成使用`globals()`

```
for line in file:
    words=line.split()
    zx,zy = 'x%d' % words[0], 'y%d' % words[0]
    if zx not in globals():
        globals()[zx] = []
        globals()[zy] = []
    globals()[zx].append(words[1])
    globals()[zy].append(words[2]) 
```

# sql - 查找 sql 中最常见的值并按从高到低 (asc) 排序

> ID：15369357
> 
> 赞同：4
> 
> 时间：2013-03-12T18:34:51.480
> 
> 标签：sql, sql-server, sql-server-2008

我有一个简单的查询。

```
 select id, patient_id, diagnosis from dbo.diabetes_rx_tracker

group by id, patient_id, diagnosis 
```

最常见的诊断代码需要出现在列表顶部并带有计数。

我尝试使用计数功能。

但它将每个患者的所有值返回为 1 而不是相加。

```
select id, patient_id, count(diagnosis) from dbo.diabetes_rx_tracker

group by id, patient_id, diagnosis 
```

在编辑我的 group by 语句时，我也不断抛出错误。

任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T18:41:56.500

这看起来像你没有足够的聚合。GROUP by 中的每个字段代表一个字段，用于与其他字段一起汇总。因此，这只会按 id、按患者、按诊断向您显示诊断。不是很有帮助。

要获得最常见的诊断期，请同时从分组中删除 id 和 patient_id：

```
select
  count(diagnosis)
from dbo.diabetes_rx_tracker 
group by 
  diagnosis 
order by 
  count(diagnosis) desc 
```

要获取所有 id 中最常见的代码，请从分组中删除 patient_id 并选择：

```
select
  diagnosis, 
  id, 
  count(1) as CodeCount 
from dbo.diabetes_rx_tracker 
group by 
  diagnosis, 
  id 
order by 
  count(diagnosis) desc 
```

更新：根据您的新标准，这就是您想要的。

```
select 
  id, 
  diagnosis, 
  ct 
from (
    select 
      row_number() OVER (PARTITION BY id ORDER BY count(diagnosis) desc ) as rn, 
      count(diagnosis) as ct, 
      diagnosis, 
      id
    from dbo.diabetes_rx_tracker 
    group by 
      id, 
      diagnosis
    ) ranked
where 
  rn = 1
order by
  CT desc 
```

# html - 在 html 中包含外部 url

> ID：15369358
> 
> 赞同：0
> 
> 时间：2013-03-12T18:34:55.093
> 
> 标签：html, jsp

我可以在我的 HTML 中包含外部 URL 并获取 HTML 中的内容，就像 jstl 一样，这样我们就不必遇到连接问题或使用 java 代码。如果我们使用 jstl 它必须打开套接字并进行处理而不是直接包含外部 url 目前我正在以这种方式实现

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<%@ taglib uri="http://java.sun.com/jstl/core" prefix="c" %>
<%@page
    language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<html>
<head>
<title>google</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
</head>
<body>
<c:import uri="http://google.com" />
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:40:44.110

你不能使用 vanilla HTML 来做到这一点。您可以获得的最接近的是`iframe`，但这似乎不是您想要的。你最好的选择是使用一些服务器端语言，如果你担心负载/连接问题，然后考虑缓存结果。

您的缓存策略可以在您的应用程序内部或 HTTP 级别（例如使用[Varnish](https://www.varnish-cache.org/)之类的东西）。

# java - 将 actionBar 主题更改为 Holo.Light？

> ID：15369381
> 
> 赞同：0
> 
> 时间：2013-03-12T18:36:19.857
> 
> 标签：java, android, xml, themes

我需要一些帮助来更改操作栏主题。目前它的全息黑暗，但我希望它是全息光。我已经设定

```
<style name="ActionBar" parent="android:Theme.Holo.Light">
    <item name="android:actionBarStyle">
        @android:style/Widget.Holo.ActionBar
    </item>        
</style> 
```

在 / 样式中。但后来我需要在android清单文件中的某个地方设置它，但我不知道在哪里。因为操作栏是更大活动的一部分，并且活动具有全息光主题，而不是操作栏。任何人？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-12T18:59:10.657

关于设置主题的重要知识是，默认情况下，当您创建项目时，会在 Values 下创建 3 个文件夹：`values`、`values-v11`和`values-v14`。

默认情况下，第一件事是打开文件夹`styles.xml`下的。`values`那就是我们出错的地方。请看，因为值文件有**3 个文件夹**，Android 系统将尝试加载在适合当前系统设置的文件夹中定义的样式。也就是说，如果您在 Nexus Running API 级别 17 上运行应用程序，加载的样式将来自`values-v14`而**不是**来自`values`.

因此，您必须编辑每个`styles.xml`文件夹下的每个文件，以确保无论 API 级别如何都能正确加载主题。

你`styles.xml`的 for`values-v14`应该是这样的：

```
<resources>
<!--
    Base application theme for API 14+. This theme completely replaces
    AppBaseTheme from BOTH res/values/styles.xml and
    res/values-v11/styles.xml on API 14+ devices.
-->
<style name="AppBaseTheme" parent="android:Theme.Holo.Light">
    <!-- API 14 theme customizations can go here. -->
</style>
</resources> 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T18:39:57.900

如果您希望主题仅应用于一个活动，请在清单文件中添加标签`android:theme="@style/ActionBar"`内的属性。`<activity>`

```
<activity 
    android:name="YourActivityName"
    android:theme="@style/ActionBar"
/> 
```

如果您希望将主题应用于应用程序中的所有活动，请在`<application>`标签内添加属性

```
<application 
    android:label="YourAppLabel"
    android:theme="@style/ActionBar" 
/> 
```

# asp.net - 在 c# 或 silverlight 中，windows 不应该响应给定的持续时间

> ID：15369389
> 
> 赞同：0
> 
> 时间：2013-03-12T18:37:15.957
> 
> 标签：asp.net, silverlight

示例-当我单击按钮时，应该出现输出窗口，但它应该是模糊的或等待一段时间（就像在后台执行某些操作）..一段时间后窗口应该处于激活模式。

您能在不使用 thread.sleep 方法的情况下帮助我实现这一目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:51:06.983

然后，您可以使用[秒表](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch%28v=vs.100%29.aspx)，将其设置为您需要的时间，然后禁用应用程序的所有控件（Winform？Silverlight？）

然后你只需循环直到秒表完成，或者显示某种处理标签。

```
 While(stopwatch.IsRunning) 
  { 
     //Do nothing 
   } 
```

顺便说一句：这是一个同步操作，如果在用户输入暂停时线程需要做一些事情，你就不能使用它。

# google-app-engine - AppEngine 上的随机 500 错误

> ID：15369391
> 
> 赞同：0
> 
> 时间：2013-03-12T18:37:22.940
> 
> 标签：google-app-engine

我有一个相当大的应用程序，它进行了大修。

较新的版本使用大量 JSONP 调用，我注意到 500 个服务器错误。日志部分中没有记录任何内容以确定错误原因。它也发生在 JS、png 甚至 jersey（servlet）上。

搜索 SO 和组表明这些错误在部署期间很常见。但即使在部署后数小时后也会发生。

顺便说一句，应用程序变得稍大，甚至在极少数情况下启动少数实例时会导致截止日期异常。有时，它会在 6-10 秒内启动和服务。有时它会超过 75 秒，从而导致类似请求超时。我也看到了预热请求的相同行为。在应用程序预热期间没有加载任何自定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T04:00:36.667

我觉得您应该在日志中看到错误。您是否超出配额或有截止日期错误？也许您的错误处理程序中有错误，例如找不到文件，或者错误处理程序的路径与另一个静态文件路径重叠？

为了排除故障，我将实现[自定义错误页面](https://developers.google.com/appengine/docs/python/config/appconfig?hl=nl#Custom_Error_Responses)，以便您确定实际的错误代码。我假设使用 Python，因为您从未指定您使用的语言。将以下内容添加到您的`app.yaml`并创建静态 html 页面，让收件人了解正在发生的事情，然后报告您的发现：

```
`error_handlers:
  - file: default_error.html
  - error_code: over_quota
    file: over_quota.html
  - error_code: dos_api_denial
    file: dos_api_denial.html
  - error_code: timeout
    file: timeout.html`
```

`如果您已经有自定义错误处理程序，您能否提供一些您的`app.yaml`以便我们为您提供帮助？`

 `* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T19:20:14.777

一些 500 未记录在您的应用程序日志中。它们是 GAE 前端的失败。如果由于某种原因，您的请求激增，并且您的应用程序的新实例无法以足够快的速度启动以服务这些请求，您的客户端可能会看到 500，即使这 500 没有出现在您的应用程序的日志中。GAE 团队正在努力提供对这些前端日志的可见性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-15T20:10:04.463

我自己刚看到这个......我正在研究一些访问者的日志，这些访问者只在页面上加载了一半的图形文件。我尝试点击他们访问我们网站的博客上的相同链接。就我而言，我在 chrome 浏览器开发人员控制台中看到 js 文件的 500 错误。然而，当我查看 GAE 日志时，它说它以 200 状态正确地提供了文件。该 js 文件加载了其他未加载的图像。就我而言，这是一个 https 请求。

了解我们的客户体验对我们来说非常重要（显然）。我想让你知道这个问题仍然存在。只要让它出现在日志中就很好了，甚至可以附加一个预热错误或其他东西，所以我们知道它是复杂服务器系统的不可避免的产物（完全可以理解）。我只需要知道是否应该添加实例或其他内容。此错误没有等待 60 秒，可能是 5 到 10 秒。这就像 SSL 握手的往返在中间失败，但日志显示为成功。

那么我可以增加握手的超时时间还是在浏览器端完成？`

# css - 类属性未应用于按钮

> ID：15369392
> 
> 赞同：0
> 
> 时间：2013-03-12T18:37:24.457
> 
> 标签：css, html, button

我有一个按钮，我想让它变得非常大：

```
<button type="submit" class="button">Compra</button> 
```

我正确（我已经有反馈）链接了一个包含此类的 CSS 文件：

```
.title
{
    font-size:75px;
    text-align:center;
    color:blue;
    font-family:"Times New Roman",Georgia,Serif;
}

.subtitle
{
    font-size:50px;
    font-family:"Times New Roman",Georgia,Serif;
}

.text
{
    font-size:25px;
    font-family:"Times New Roman",Georgia,Serif;
}

.table
{
    font-size:25px;
    font-family:"Times New Roman",Georgia,Serif;
    border: 0px;
    text-align: left;
    border-spacing: 20px 10px;
}

.button
{
    width:280px;
    height:280px;
} 
```

但是按钮不受按钮类大小的影响。如果我这样做：

```
<body>
    <form action="Purchase.xhtml" method="post">
        <button type="submit" class="button">Compra</button>
        ... (other code) 
```

它可以工作，但我需要使用 CSS 文件，因为我有很多按钮，而且我可能想全部更改，所以在这种情况下，我只需更改 CSS 文件。

有人知道为什么按钮类的宽度/高度属性不会影响按钮大小吗？

小提琴：

[http://jsfiddle.net/K2LLB/1](http://jsfiddle.net/K2LLB/1)

**编辑**

它适用于Firefox，但不适用于chrome。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:40:29.957

您页面中的其他一些样式声明优先于 .button，无论是按特异性还是加载顺序。我们需要查看更多代码或您的演示页面才能说更多。

# c# - 带有 Request.form 迭代和保存到数据库的 Jquery 动态文本框

> ID：15369402
> 
> 赞同：0
> 
> 时间：2013-03-12T18:38:05.320
> 
> 标签：c#, jquery, asp.net

我在我的应用程序中使用 Jquery 添加多个文本框，然后在我想要的文件后面的代码中，我可以通过 Request.form [name] 访问这些值。我想迭代这些文本框并读取用户输入的任何文本的值，因此我可以将其存储在数据库中。知道如何将这些文本框的值保存在数据库中，用逗号（，）分割每个文本框值请指导我如何在循环中获取所有这些文本框值，然后将它们保存在数据库表中

```
$(document).ready(function () {

                var counter = 2;

                $(\"#addButton\").click(function () {

                    if (counter > 10) {
                        alert(\"Only 10 textboxes allow\");
                        return false;
                    }

                    var newTextBoxDiv = $(document.createElement('div'))
                         .attr(\"id\", 'TextBoxDiv' + counter);

                    newTextBoxDiv.html('<table><tr><td><input type=\"text\" name=\"textbox' + counter +
                          '\" id=\"textbox' + counter + '\" value=\"\" ></td><td><input type=\"text\" name=\"textbox' + counter +
                          '\" id=\"textbox' + counter + '\" value=\"\" ></td><td><input type=\"text\" name=\"textbox' + counter +
                          '\" id=\"textbox' + counter + '\" value=\"\" ></td></tr></table>');

                    newTextBoxDiv.appendTo(\"#TextBoxesGroup\");
                    return false;

                    counter++;
                }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:57:44.767

可能你已经做了这样的事情，你可以通过使用 chrome 调试器工具从输入框中检索所有值来轻松调试。

```
$('table tr td').each(function() {
     var values = "";
     values = $(this).find('input').val() + ",";
 }); 
```

# tinymce - tinymce 自定义项目符号和编号列表

> ID：15369417
> 
> 赞同：3
> 
> 时间：2013-03-12T18:39:00.477
> 
> 标签：tinymce, django-tinymce

我想知道是否可以创建自定义项目符号和编号列表？

我添加了插件 advlist 并尝试了其他人在[此处](http://www.tinymce.com/forum/viewtopic.php?id=23159)和[此处](http://www.tinymce.com/forum/viewtopic.php?id=28206)尝试过的示例。第一个似乎允许进行一些更改。但是，我试图用自定义图像替换项目符号或数字列表的列表样式图像，但“样式”选项“listStyleImage”似乎不起作用，即使它出现在应用程序代码中。

我还尝试添加一个 css 类以查看是否可行，但“类”语句似乎也不起作用。

我已经像示例中一样设置了 init 部分，并遵循了[格式](http://www.tinymce.com/wiki.php/Configuration%3aformats)文档中的选项，但是样式的类和设置“listStyleImage”似乎不起作用。

我很确定手动将类添加到 html 代码中会起作用。我只想将其设置为自定义列表，以便不必手动完成。

这甚至可能吗？

还有另一种方法可以做到这一点吗？

**更新：**为了暂时解决这个问题，我必须通过编辑器手动向 html 添加一个类。它可以工作，但如果有办法通过添加自定义列表来做到这一点，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-23T21:41:31.057

到目前为止，我发现将子弹转换为图像的唯一方法是使用

`style_formats`.

添加列表后，只需标记它并应用格式。

tinymce 代码：

```
toolbar: "insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | l ink image | print preview media fullpage | forecolor backcolor emoticons", 
image_advtab: true,

    style_formats: [{
        title: 'checkMark', selector: 'li', 
        styles: {
            'list-style-image' : 'url("../images/check-mark.png" )' //your desired image
        }   
    }], 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-27T08:36:45.310

在进行研究时偶然发现了这个问题，在同一个问题上，经过一些调试找到了一种方法来做到这一点

1.  应该安装并激活 advlist 插件
2.  在初始化中，应配置高级列表样式，例如：

```
tinyMCE.init({...
      advlist_bullet_styles: [{
        title: 'image bullets',
        styles: {
          listStyleImage: "url('url/to/image.png')"
        }
      }, {
        title: 'Default',
        styles: {
          listStyleType: '',
          listStyleImage: ""
        }
      }, {
        title: 'Circle',
        styles: {
          listStyleType: 'circle',
          listStyleImage: ""
        }
      }, {
        title: 'Disc',
        styles: {
          listStyleType: 'disc',
          listStyleImage: ""
        }
      }, {
        title: 'Square',
        styles: {
          listStyleType: 'square',
          listStyleImage: ""
        }
      }],
      ...}); 
```

这为您提供了默认的项目符号样式以及自定义图像样式。样式数组设置 UL 元素的属性。并且您使用 advlist_number_styles 属性为号码列表设置模板。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-16T13:03:16.653

这是具有多级编号的 ol 列表的一个很好的示例。

[示例](http://codepen.io/itmilos/pen/pEPJEK)SCSS 编译为：

```
ol {
  list-style: none;
  position: relative;
  padding-left: 15;
  margin: 0;
}
ol {
  counter-reset: level0 0;
}
ol li::before {
  content: counter(level0,decimal) "";
  counter-increment: level0;
  position: absolute;
  right: 100%;
  margin-right: 15px;
  text-align: right;
  font-weight: bold;
  font-size: 0.8em;
}
ol li:empty + {
  counter-reset: level0 0;
}
ol li:empty::before {
  display: none;
}
ol ol {
  counter-reset: level1 ;
}
ol ol li::before {
  content: counter(level0,decimal) "." counter(level1,decimal) "";
  counter-increment: level1;
  position: absolute;
  right: 100%;
  margin-right: 15px;
  text-align: right;
  font-weight: bold;
  font-size: 0.8em;
}
ol ol li:empty + ol {
  counter-reset: level1 ;
}
ol ol li:empty::before {
  display: none;
}
ol ol ol {
  counter-reset: level2 ;
}
ol ol ol li::before {
  content: counter(level0,decimal) "." counter(level1,decimal) "." counter(level2,decimal) "";
  counter-increment: level2;
  position: absolute;
  right: 100%;
  margin-right: 15px;
  text-align: right;
  font-weight: bold;
  font-size: 0.8em;
}
ol ol ol li:empty + ol ol {
  counter-reset: level2 ;
}
ol ol ol li:empty::before {
  display: none;
}
ol ol ol ol {
  counter-reset: level3 ;
}
ol ol ol ol li::before {
  content: counter(level0,decimal) "." counter(level1,decimal) "." counter(level2,decimal) "." counter(level3,decimal) "";
  counter-increment: level3;
  position: absolute;
  right: 100%;
  margin-right: 15px;
  text-align: right;
  font-weight: bold;
  font-size: 0.8em;
}
ol ol ol ol li:empty + ol ol ol {
  counter-reset: level3 ;
}
ol ol ol ol li:empty::before {
  display: none;
}
ol ol ol ol ol {
  counter-reset: level4 ;
}
ol ol ol ol ol li::before {
  content: counter(level0,decimal) "." counter(level1,decimal) "." counter(level2,decimal) "." counter(level3,decimal) "." counter(level4,decimal) "";
  counter-increment: level4;
  position: absolute;
  right: 100%;
  margin-right: 15px;
  text-align: right;
  font-weight: bold;
  font-size: 0.8em;
}
ol ol ol ol ol li:empty + ol ol ol ol {
  counter-reset: level4 ;
}
ol ol ol ol ol li:empty::before {
  display: none;
}
ol ol ol ol ol ol {
  counter-reset: level5 ;
}
ol ol ol ol ol ol li::before {
  content: counter(level0,decimal) "." counter(level1,decimal) "." counter(level2,decimal) "." counter(level3,decimal) "." counter(level4,decimal) "." counter(level5,decimal) "";
  counter-increment: level5;
  position: absolute;
  right: 100%;
  margin-right: 15px;
  text-align: right;
  font-weight: bold;
  font-size: 0.8em;
}
ol ol ol ol ol ol li:empty + ol ol ol ol ol {
  counter-reset: level5 ;
}
ol ol ol ol ol ol li:empty::before {
  display: none;
}
ol ol ol ol ol ol ol {
  counter-reset: level6 ;
}
ol ol ol ol ol ol ol li::before {
  content: counter(level0,decimal) "." counter(level1,decimal) "." counter(level2,decimal) "." counter(level3,decimal) "." counter(level4,decimal) "." counter(level5,decimal) "." counter(level6,decimal) "";
  counter-increment: level6;
  position: absolute;
  right: 100%;
  margin-right: 15px;
  text-align: right;
  font-weight: bold;
  font-size: 0.8em;
}
ol ol ol ol ol ol ol li:empty + ol ol ol ol ol ol {
  counter-reset: level6 ;
}
ol ol ol ol ol ol ol li:empty::before {
  display: none;
}
ol ol ol ol ol ol ol ol {
  counter-reset: level7 ;
}
ol ol ol ol ol ol ol ol li::before {
  content: counter(level0,decimal) "." counter(level1,decimal) "." counter(level2,decimal) "." counter(level3,decimal) "." counter(level4,decimal) "." counter(level5,decimal) "." counter(level6,decimal) "." counter(level7,decimal) "";
  counter-increment: level7;
  position: absolute;
  right: 100%;
  margin-right: 15px;
  text-align: right;
  font-weight: bold;
  font-size: 0.8em;
}
ol ol ol ol ol ol ol ol li:empty + ol ol ol ol ol ol ol {
  counter-reset: level7 ;
}
ol ol ol ol ol ol ol ol li:empty::before {
  display: none;
}

li {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
  position: relative;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-16T17:10:31.913

根据[tiny-mce 文档](https://www.tiny.cloud/docs/plugins/advlist/#advlist_bullet_styles)，您只能为 advlist_bullet_styles 定义一个逗号分隔的值字符串，例如“default,circle,disc,square”。此外，您还可以定义不符合标准的值（例如箭头）：

```
tinySetup({
    selector: "textarea",
    plugins: "advlist",
    advlist_bullet_styles: "default,arrow"
}); 
```

基于此设置，您不会获得类名，但您可以应用脏 css 选择器来实现样式：

```
ul[style="list-style-type: arrow;"] li{
  list-style-type: none;
  list-style-image: url(list-icon-arrow.png);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-04T09:11:37.923

**背景**

我知道这个问题现在已经有 5 年了，但我遇到了类似的问题，但没有找到资源来帮助解决它。我也知道这很少成为问题，因为世界各地都使用一个黑色的小圆圈作为子弹（因此得名）。我在 TinyMCE 社区网站上发布了这个问题，但几天后我的帐户被锁定（什么？！）。如果有人有更好的解决方案，请告诉我。这个解决方案似乎有点太像它与 Duck Tape 结合在一起了，如果 TinyMCE 更新发生变化，这个 hack 将会丢失。

[链接到那个问题](https://community.tinymce.com/communityQuestion?com.salesforce.visualforce.ViewStateCSRF=VmpFPSxNakF4T0MweE1DMHdNbFF4TWpvME1qbzBOUzR3TVRaYSxOdnVfTDQ2OWtqWnlVSzdRc2o5cjFVLFkyVTNabUl4&com.salesforce.visualforce.ViewStateVersion=201809220051580164&id=90661000000k9uUAAQ&j_id0%3Aj_id1%3Aj_id178=j_id0%3Aj_id1%3Aj_id178&j_id0%3Aj_id1%3Aj_id178%3Abody=%3Cp%3EI%20see%20what%20you%20mean.%20I%20suppose%20the%20issue%20is%20that%20it%20will%20turn%20into%3C%2Fp%3E%0D%0A%3Cp%3E%3Cbr%20%2F%3E%26lt%3Bul%26gt%3B%3C%2Fp%3E%0D%0A%3Cp%3E%26nbsp%3B%20%26lt%3Bli%26gt%3B%20-%26nbsp%3B%20Understand%20the%20company%26rsquo%3Bs%20prior%20strategy%26lt%3B%2Fli%26gt%3B%3C%2Fp%3E%0D%0A%3Cp%3E%26nbsp%3B%20%26lt%3Bli%26gt%3B%20-%26nbsp%3B%20Studying%20business%20benefit%20(ROI)%26lt%3B%2Fli%26gt%3B%3C%2Fp%3E%0D%0A%3Cp%3E%26lt%3B%2Ful%26gt%3B%3C%2Fp%3E%0D%0A%3Cp%3EIs%20there%20a%20way%20to%20change%20the%20default%20list%20to%20another%20choice%3F%20Like%20in%20the%20bullet%20dropdown%20have%20a%20choice%20of%20-%20instead%20of%20a%20bullet%20and%20that%20will%20create%20a%20%26lt%3Bul%20class%3D%22dashedList%22%26gt%3B%20%3F%3C%2Fp%3E&j_id0%3Aj_id1%3Aj_id178%3Aj_id180=Save%20Answer%3Fid%3D90661000000k9uUAAQ%3Fid%3D90661000000k9uUAAQ%3Fid%3D90661000000k9uUAAQ)

**我的问题**

我住在日本和我工作的公司……他们默认的“子弹”是破折号。他们全部。我不知道为什么。像这样：

*通过提供 IT 服务支持业务并深入参与系统解决方案的过程：*

*- 了解公司之前的战略*

*- 研究商业利益 (ROI)*

TinyMCE 不允许对列表或高级列表插件进行任何自定义，只要将 html 插入到文档中即可。如果可以的话，我会在所有不同的项目符号上设置一个类，或者更好的是，为列表类型创建一个新的项目符号类型。但据我所知，这是不可能的。（如果有人知道如何在 TinyMCE 中自定义列表而不是编辑源代码，请告诉我！）

**我的修复**

我将破折号设为默认值：

在站点 html 和 Tiny 编辑器中，我使用类 'order-wrapper' 围绕任何带有项目符号的东西，在编辑器中我有： body_class: 'order-wrapper',

这个 css 使任何没有 'list-style-type' 的 UL 都像项目符号列表一样缩进，并有一个类似破折号的项目符号：

```
.order-wrapper ul:not([style*='list-style-type']) {
    list-style: none;
    margin-left: 0;
    padding-left: 3em;
}

.order-wrapper ul:not([style*='list-style-type']) > li:before {
    display: inline-block;
    content: "-";
    width: 1.5em;
    margin-left: -1.5em;
} 
```

但是当粘贴 word 文档虚线项目符号时，它们会包含一个破折号，所以我最终得到： - 了解公司的先前战略

因此，为了摆脱行首的破折号，我在编辑器 init 中添加了代码，以删除行首的 - 如果它被粘贴为列表元素。（可能有更好的过滤方法，所以如果有人有更好的方法，请告诉我）：

```
init_instance_callback: function (editor) {
    //On Paste: remove the dash from the beginning of li elements.
    editor.on('PastePreProcess', function (e) {
        e.content = e.content.replace(/<li>- /g, "<li>")
    });
}, 
```

因此，如果用户从 Word 中粘贴任何项目符号，它将成为破折号项目符号列表（默认）。然后他们可以突出显示列表并选择圆形、圆盘或方形来获取其他子弹类型。

# java - Java - 如何将 JPanel 类添加到 JFrame 容器类？

> ID：15369421
> 
> 赞同：0
> 
> 时间：2013-03-12T18:39:05.997
> 
> 标签：java

我无法将我创建的 JPanel 类添加到我的容器类中。老实说，我不确定这是否是创建菜单的最佳方法。我问过教授和助教，他们都告诉我不同​​的事情。

编辑：为了澄清，问题是没有显示在 JPanel 类中制作的主菜单。我想我在容器类中正确添加了它，但我不完全确定。

这是我试图添加到容器中的 JPanel 类：

```
package.model;
import java.awt.BorderLayout;

import javax.swing.JButton;
import javax.swing.JPanel;

@SuppressWarnings("serial")
public class MainMenu extends JPanel {

    private static MainMenu instance;
    private JPanel mainMenu;
    private JButton btnSinglePlayer, btnMultiPlayer, btnScoreBoard, btnQuit;

    private MainMenu() {
            mainMenu();
            singlePlayer();
            multiPlayer();
            scoreBoard();
            quit();
    }

    public static MainMenu getMenuInstance() {
            if (instance == null) {
                    instance = new MainMenu();
            }
            return instance;
    }

    public void construct() {
            mainMenu();
            singlePlayer();
            multiPlayer();
            scoreBoard();
            quit();
    }

    private JPanel mainMenu() {
            mainMenu = new JPanel();
            mainMenu.setLayout(null);
            return mainMenu;
    }

    private JButton singlePlayer() {
            btnSinglePlayer = new JButton("SinglePlayer");
            btnSinglePlayer.setBounds(365, 210, 170, 55);
            mainMenu.add(btnSinglePlayer);
            return btnSinglePlayer;
    }

    private JButton multiPlayer() {
            btnMultiPlayer = new JButton("MultiPlayer");
            btnMultiPlayer.setBounds(365, 300, 170, 55);
            mainMenu.add(btnMultiPlayer);

            return btnMultiPlayer;
    }
    private JButton scoreBoard() {
            btnScoreBoard = new JButton("ScoreBoards");
            btnScoreBoard.setBounds(365, 411, 170, 55);
            mainMenu.add(btnScoreBoard);

            return btnScoreBoard;
    }

    private JButton quit() {
    btnQuit = new JButton("Quit");
    btnQuit.setBounds(365, 500, 170, 55);
    mainMenu.add(btnQuit);

    return btnQuit;
    }
} 
```

这是我的容器类：

```
package view;
import java.awt.CardLayout;
import java.awt.Container;
import java.awt.Dimension;
import java.awt.Toolkit;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;

import model.MainMenu;

@SuppressWarnings("serial")
public class MainFrame extends JFrame {

    private static JFrame mainContainer = new JFrame("Checkers");
    private JPanel card = new JPanel(new CardLayout());
    private CardLayout cardLayout = (CardLayout) (card.getLayout());
    private JPanel homeCard, singlePlayerCard, multiPlayerCard, scoreBoardCard;
    private JPanel mainMenu = MainMenu.getMenuInstance();

    public MainFrame() {

    }

    private void addComponentToPane(Container pane) {
        //mainMenu.construct();
        homeCard = new JPanel();
        singlePlayerCard = new JPanel();
        multiPlayerCard = new JPanel();
        scoreBoardCard = new JPanel();

        homeCard.add(mainMenu);
        card.add(homeCard, "homeCard");

        cardLayout.show(card, "homeCard");

        pane.add(card);
    }

    public static void createAndShowGUI() {
        MainFrame frame = new MainFrame();
        frame.addComponentToPane(mainContainer.getContentPane());

        mainContainer.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        mainContainer.pack();
        mainContainer.setSize(920, 650);
        mainContainer.setVisible(true);
        Dimension dim = Toolkit.getDefaultToolkit().getScreenSize();
        mainContainer.setLocation(dim.width / 2 - mainContainer.getSize().width
                / 2, dim.height / 2 - mainContainer.getSize().height / 2);

    }

} 
```

我想要一个 JPanel 类的原因，而且我将拥有不止一个 b​​tw，是因为我希望该类启动我的游戏线程。而且我不希望通过视图启动游戏线程。如果这是一个糟糕的设计，请告诉我。

顺便说一句，我有一个启动器类，我认为这与发布无关。我知道我做对了，我和我大学的 3-4 位 TA 的错误似乎找不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:03:18.640

`JFrame`有一些存在于 Java 程序空间之外的副作用，例如操作系统提供的框架装饰器（通常是边缘句柄、关闭按钮和操作系统驱动的下拉菜单以隐藏/显示/等）

因此，通常您不能同时使用经典组合和继承来驱动`JFrames`。

如果继承，则可以调用该类自己`getContentPane()`的容器来获取容器，然后可以使用该容器，例如

```
getContentPane().add(jpanel); 
```

如果你更喜欢组合，那么你基本上做同样的事情，但你的成员变量持有 JFrame。

```
frame.getContentPane().add(jpanel); 
```

请注意，与许多容器不同，`JFrame`仅支持添加**一项**。因此，如果要添加多个项目，则需要添加一个`JPanel`，并将内部项目添加到`JPanel`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-22T03:11:28.287

`private JPanel mainMenu = MainMenu.getMenuInstance();`在*MainFrame中从**MainMenu*类中获取*MainMenu* **实例**变量。

 **MainMenu*中的构造函数或construct() 方法将组件添加到*MainMenu中的***mainMenu** JPanel，该组件不再被引用。

 **此外，像在MainMenu*的 mainMenu() 方法中那样将 JPanel 的布局设置为 null 也是一种不好的做法。它将 JPanel 组件的大小设置为 0x0 像素，当您添加组件时，您不会看到 JPanel 内部的组件。

我可以提一两件事关于将代码正确地重构为方法并询问有关项目其余部分如何工作的问题，但在撰写本文时这篇文章已有 8 年历史。如果人们仍然对为什么代码不起作用感到好奇，我写这些陈述是为了给人们指明正确的方向。**

# excel - 计算一列中有多少值重复

> ID：15369425
> 
> 赞同：0
> 
> 时间：2013-03-12T18:39:17.310
> 
> 标签：excel, vba

我在如下列中有值：

```
08FHI800
08FHI800
08FHI800
07FJM933
07FJM933
89MNA900 
```

我需要一个公式来告诉我该列中有多少项具有相应的重复项。在这种情况下，它将是 2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:13:30.517

假设 A2:A100 中的数据，试试这个公式

`=SUMPRODUCT((A2:A100<>"")/COUNTIF(A2:A100,A2:A100&"")-(COUNTIF(A2:A100,A2:A100&"")=1))`

它将忽略空格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-03T14:43:45.900

```
=SUMPRODUCT((A1:A12<>"")/COUNTIF(A1:A12,A1:A12&"")-(COUNTIF(A1:A12,A1:A12&"")=1)) 
```

以此数据为例

```
Row#  ColA

1      1

2      2

3      2

4      2

5      3

6      4

7      5

8      5

9      6

10     6

11     6

12     7 
```

将函数分解为 3 个组件：

```
(A1:A12<>””)

COUNTIF(A1:A12,A1:A12&””)

COUNTIF(A1:A12,A1:A12&””)=1 
```

组件 1

```
(A1:A12<>””) evaluates to an array containing {T, T, T, T, T, T, T, T, T, T, T, T} ---------(1) 
```

组件 2

```
COUNTIF(A1:A12,A1:A12&””) 
```

评估为

```
COUNTIF({1,2,2,2,3,4,5,5,6,6,6,7},{1,2,2,2,3,4,5,5,6,6,6,7} 
```

并计算每个值出现在范围内的次数这反过来计算为：

```
{1,3,3,3,1,1,2,2,3,3,3,1}    -----------------(2) 
```

（&””是为了避免#DIV/0 错误）

现在，由于有括号，我们需要先评估（组件 1 / 组件 2），然后再查看组件 3。

组件 1/组件 2 是

```
(A1:A12<>"")/COUNTIF(A1:A12,A1:A12&"") 
```

所以从（1）和（2），

```
{T,T,T,T,T,T,T,T,T,T,T,T}/{1,3,3,3,1,1,2,2,3,3,3,1} 
```

评估为：

```
{1,0.3333,0.3333,0.3333,1,1,0.5,0.5,0.333,0.333,0.333,1} 
```

现在我们可以看看组件 3

```
COUNTIF(A1:A12,A1:A12&””)=1 
```

我们已经有了第一个：

```
COUNTIF(A1:A12,A1:A12&””) 
```

从（2），其评估为

```
{1,3,3,3,1,1,2,2,3,3,3,1} 
```

将其与 =1 结合成为

```
COUNTIF(A1:A12,A1:A12&””)=1 
```

反过来评估为

```
{T,F,F,F,T,T,F,F,F,F,F,T} 
```

所以，最后把这一切结合在一起，我们有

```
SUMPRODUCT({1,0.3333,0.3333,0.3333,1,1,0.5,0.5,0.333,0.333,0.333,1} - {T,F,F,F,T,T,F,F,F,F,F,T}) 
```

现在，T 等于 1，F 等于 0，所以现在变成：

```
SUMPRODUCT({1-1,0.333-0, 0.333-0, 0.333-0,1-1,1-1,0.5-0,0.5-0, 0.333-0, 0.333-0, 0.333-0,1-1} 
```

变成

```
SUMPRODUCT({0,0.333,0.333,0.333,0,0,0.5,0.5,0.333,0.333,0.333,0} 
```

由于只有一个数组，SUMPRODUCT 只是简单地将元素相加

```
1+1+1 =3 
```

有 3 个项目重复。

# mule - 为什么在将 mule 应用程序部署到 CloudHub 时无法覆盖 javax.validation.ValidationFactory？

> ID：15369426
> 
> 赞同：1
> 
> 时间：2013-03-12T18:39:17.700
> 
> 标签：mule, mule-studio, cloudhub

我正在尝试`javax.validation.ValidationFactory`从包含`javax.validation`包的库中加载（从 jboss.org 检索）。当我将 Mule Studio 项目导出到 zip 文件时，我看到该库已包含在内，因此我假设当我将应用程序部署到 CloudHub 时它也已导出（我的所有其他 3rd 方 jar 都已轻松部署）。

不幸的是，我得到一个`ClassNotFound`错误。我尝试使用`loader.override=javax.validation.ValidatorFactory`中覆盖类定义`mule-deploy.properties`，但 CloudHub 中出现错误，提示我无法覆盖系统包。我认为上面的覆盖只会覆盖给定的类，要求 CloudHub 在部署的应用程序中查找类定义，而不是从 CloudHub 提供的库中查找。

附带说明一下，搜索 Mule Standalone 服务器的副本时，我看不到`javax.validation.ValidationFactory`任何地方。谁能告诉我为什么我不能强制使用这一类的负载`loader.override`？

# mysql - 为什么 Magento 无法连接到本地数据库？

> ID：15369429
> 
> 赞同：-1
> 
> 时间：2013-03-12T18:39:28.913
> 
> 标签：mysql, xml, database, magento

我将公司的 Magento 网站复制到我的本地机器上，以建立一个开发环境。但是，当尝试在“localhost/html”查看页面时，出现以下连接错误：

SQLSTATE[HY000] [1045] 用户'easyfair_eftest'@'localhost'的访问被拒绝（使用密码：YES）

我相信这是因为用户名不正确。但是，我已经修改了 local.xml 文件以使用正确的用户名 (app/etc/local.xml)。为什么它仍在尝试使用旧用户名进行连接？

我在本地环境中使用 WAMP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:14:11.610

请尝试 127.0.0.1 代替 localhost。

# android - 我无法在 Ubuntu 12.10 中启动 Android 模拟器

> ID：15369430
> 
> 赞同：0
> 
> 时间：2013-03-12T18:39:35.020
> 
> 标签：android, android-emulator, ubuntu-12.10

我尝试以多种方式运行 Android 模拟器：命令行或在 AVD 界面上，但它没有运行。当我在命令行上运行时，它会引发此异常：

> java.awt.HeadlessException at sun.awt.HeadlessToolkit.getScreenResolution(HeadlessToolkit.java:221) at com.android.sdkuilib.internal.widgets.AvdStartDialog.getMonitorDpi(AvdStartDialog.java:441) at com.android.sdkuilib.internal。 widgets.AvdStartDialog.createDialogContent(AvdStartDialog.java:189) 在 com.android.sdkuilib.ui.GridDialog.createDialogArea(GridDialog.java:76) 在 org.eclipse.jface.dialogs.Dialog.createContents(Dialog.java:760)在 org.eclipse.jface.window.Window.create(Window.java:431) 在 org.eclipse.jface.dialogs.Dialog.create(Dialog.java:1089) 在 org.eclipse.jface.window.Window.open (Window.java:790) 在 com.android.sdkuilib.internal.widgets.AvdSelector.onStart(AvdSelector.java:1105) 在 com.android.sdkuilib.internal.widgets.AvdSelector.access$600(AvdSelector.java:84)在 com.android.sdkuilib。internal.widgets.AvdSelector$7.widgetSelected(AvdSelector.java:331) at org.eclipse.swt.widgets.TypedListener.handleEvent(Unknown Source) at org.eclipse.swt.widgets.EventTable.sendEvent(Unknown Source) at org. eclipse.swt.widgets.Widget.sendEvent(Unknown Source) at org.eclipse.swt.widgets.Display.runDeferredEvents(Unknown Source) at org.eclipse.swt.widgets.Display.readAndDispatch(Unknown Source) at com.android。 sdkuilib.internal.repository.ui.AvdManagerWindowImpl1.open(AvdManagerWindowImpl1.java:144) 在 com.android.sdkuilib.repository.AvdManagerWindow.open(AvdManagerWindow.java:94) 在 com.android.sdkmanager.Main.showAvdManagerWindow(Main. java:369) 在 com.android.sdkmanager.Main.doAction(Main.java:311) 在 com.android.sdkmanager.Main.run(Main.java:119) 在 com.android.sdkmanager.Main.main(Main .java:102)widgets.AvdSelector$7.widgetSelected(AvdSelector.java:331) 在 org.eclipse.swt.widgets.TypedListener.handleEvent(Unknown Source) 在 org.eclipse.swt.widgets.EventTable.sendEvent(Unknown Source) 在 org.eclipse。 swt.widgets.Widget.sendEvent(Unknown Source) at org.eclipse.swt.widgets.Display.runDeferredEvents(Unknown Source) at org.eclipse.swt.widgets.Display.readAndDispatch(Unknown Source) at com.android.sdkuilib。 internal.repository.ui.AvdManagerWindowImpl1.open(AvdManagerWindowImpl1.java:144) 在 com.android.sdkuuilib.repository.AvdManagerWindow.open(AvdManagerWindow.java:94) 在 com.android.sdkmanager.Main.showAvdManagerWindow(Main.java: 369) 在 com.android.sdkmanager.Main.doAction(Main.java:311) 在 com.android.sdkmanager.Main.run(Main.java:119) 在 com.android.sdkmanager.Main.main(Main.java :102)widgets.AvdSelector$7.widgetSelected(AvdSelector.java:331) 在 org.eclipse.swt.widgets.TypedListener.handleEvent(Unknown Source) 在 org.eclipse.swt.widgets.EventTable.sendEvent(Unknown Source) 在 org.eclipse。 swt.widgets.Widget.sendEvent(Unknown Source) at org.eclipse.swt.widgets.Display.runDeferredEvents(Unknown Source) at org.eclipse.swt.widgets.Display.readAndDispatch(Unknown Source) at com.android.sdkuilib。 internal.repository.ui.AvdManagerWindowImpl1.open(AvdManagerWindowImpl1.java:144) 在 com.android.sdkuuilib.repository.AvdManagerWindow.open(AvdManagerWindow.java:94) 在 com.android.sdkmanager.Main.showAvdManagerWindow(Main.java: 369) 在 com.android.sdkmanager.Main.doAction(Main.java:311) 在 com.android.sdkmanager.Main.run(Main.java:119) 在 com.android.sdkmanager.Main.main(Main.java :102)widgetSelected(AvdSelector.java:331) at org.eclipse.swt.widgets.TypedListener.handleEvent(Unknown Source) at org.eclipse.swt.widgets.EventTable.sendEvent(Unknown Source) at org.eclipse.swt.widgets.Widget .sendEvent(Unknown Source) at org.eclipse.swt.widgets.Display.runDeferredEvents(Unknown Source) at org.eclipse.swt.widgets.Display.readAndDispatch(Unknown Source) at com.android.sdkuilib.internal.repository.ui .AvdManagerWindowImpl1.open(AvdManagerWindowImpl1.java:144) 在 com.android.sdkuilib.repository.AvdManagerWindow.open(AvdManagerWindow.java:94) 在 com.android.sdkmanager.Main.showAvdManagerWindow(Main.java:369) 在 com. android.sdkmanager.Main.doAction(Main.java:311) 在 com.android.sdkmanager.Main.run(Main.java:119) 在 com.android.sdkmanager.Main.main(Main.java:102)widgetSelected(AvdSelector.java:331) at org.eclipse.swt.widgets.TypedListener.handleEvent(Unknown Source) at org.eclipse.swt.widgets.EventTable.sendEvent(Unknown Source) at org.eclipse.swt.widgets.Widget .sendEvent(Unknown Source) at org.eclipse.swt.widgets.Display.runDeferredEvents(Unknown Source) at org.eclipse.swt.widgets.Display.readAndDispatch(Unknown Source) at com.android.sdkuilib.internal.repository.ui .AvdManagerWindowImpl1.open(AvdManagerWindowImpl1.java:144) 在 com.android.sdkuilib.repository.AvdManagerWindow.open(AvdManagerWindow.java:94) 在 com.android.sdkmanager.Main.showAvdManagerWindow(Main.java:369) 在 com. android.sdkmanager.Main.doAction(Main.java:311) 在 com.android.sdkmanager.Main.run(Main.java:119) 在 com.android.sdkmanager.Main.main(Main.java:102)331）在 org.eclipse.swt.widgets.TypedListener.handleEvent(Unknown Source) at org.eclipse.swt.widgets.EventTable.sendEvent(Unknown Source) at org.eclipse.swt.widgets.Widget.sendEvent(Unknown Source)在 org.eclipse.swt.widgets.Display.runDeferredEvents(Unknown Source) at org.eclipse.swt.widgets.Display.readAndDispatch(Unknown Source) at com.android.sdkuilib.internal.repository.ui.AvdManagerWindowImpl1.open(AvdManagerWindowImpl1 .java:144）在 com.android.sdkuilib.repository.AvdManagerWindow.open(AvdManagerWindow.java:94) 在 com.android.sdkmanager.Main.showAvdManagerWindow(Main.java:369) 在 com.android.sdkmanager.Main。 doAction(Main.java:311) 在 com.android.sdkmanager.Main.run(Main.java:119) 在 com.android.sdkmanager.Main.main(Main.java:102)331）在 org.eclipse.swt.widgets.TypedListener.handleEvent(Unknown Source) at org.eclipse.swt.widgets.EventTable.sendEvent(Unknown Source) at org.eclipse.swt.widgets.Widget.sendEvent(Unknown Source)在 org.eclipse.swt.widgets.Display.runDeferredEvents(Unknown Source) at org.eclipse.swt.widgets.Display.readAndDispatch(Unknown Source) at com.android.sdkuilib.internal.repository.ui.AvdManagerWindowImpl1.open(AvdManagerWindowImpl1 .java:144）在 com.android.sdkuilib.repository.AvdManagerWindow.open(AvdManagerWindow.java:94) 在 com.android.sdkmanager.Main.showAvdManagerWindow(Main.java:369) 在 com.android.sdkmanager.Main。 doAction(Main.java:311) 在 com.android.sdkmanager.Main.run(Main.java:119) 在 com.android.sdkmanager.Main.main(Main.java:102)org.eclipse.swt.widgets.Widget.sendEvent(Unknown Source) at org.eclipse.swt.widgets.EventTable.sendEvent(Unknown Source) 的 handleEvent(Unknown Source) (Unknown Source) at org.eclipse.swt.widgets.Display.runDeferredEvents( Unknown Source) at org.eclipse.swt.widgets.Display.readAndDispatch(Unknown Source) at com.android.sdkuilib.internal.repository.ui.AvdManagerWindowImpl1.open(AvdManagerWindowImpl1.java:144) at com.android.sdkuilib.repository .AvdManagerWindow.open(AvdManagerWindow.java:94) 在 com.android.sdkmanager.Main.showAvdManagerWindow(Main.java:369) 在 com.android.sdkmanager.Main.doAction(Main.java:311) 在 com.android。 sdkmanager.Main.run(Main.java:119) 在 com.android.sdkmanager.Main.main(Main.java:102)org.eclipse.swt.widgets.Widget.sendEvent(Unknown Source) at org.eclipse.swt.widgets.EventTable.sendEvent(Unknown Source) 的 handleEvent(Unknown Source) (Unknown Source) at org.eclipse.swt.widgets.Display.runDeferredEvents( Unknown Source) at org.eclipse.swt.widgets.Display.readAndDispatch(Unknown Source) at com.android.sdkuilib.internal.repository.ui.AvdManagerWindowImpl1.open(AvdManagerWindowImpl1.java:144) at com.android.sdkuilib.repository .AvdManagerWindow.open(AvdManagerWindow.java:94) 在 com.android.sdkmanager.Main.showAvdManagerWindow(Main.java:369) 在 com.android.sdkmanager.Main.doAction(Main.java:311) 在 com.android。 sdkmanager.Main.run(Main.java:119) 在 com.android.sdkmanager.Main.main(Main.java:102)sendEvent(Unknown Source) at org.eclipse.swt.widgets.Display.runDeferredEvents(Unknown Source) at org.eclipse.swt.widgets.Display.readAndDispatch(Unknown Source) at com.android.sdkuilib.internal.repository.ui。 AvdManagerWindowImpl1.open(AvdManagerWindowImpl1.java:144) 在 com.android.sdkuilib.repository.AvdManagerWindow.open(AvdManagerWindow.java:94) 在 com.android.sdkmanager.Main.showAvdManagerWindow(Main.java:369) 在 com.android .sdkmanager.Main.doAction(Main.java:311) 在 com.android.sdkmanager.Main.run(Main.java:119) 在 com.android.sdkmanager.Main.main(Main.java:102)sendEvent(Unknown Source) at org.eclipse.swt.widgets.Display.runDeferredEvents(Unknown Source) at org.eclipse.swt.widgets.Display.readAndDispatch(Unknown Source) at com.android.sdkuilib.internal.repository.ui。 AvdManagerWindowImpl1.open(AvdManagerWindowImpl1.java:144) 在 com.android.sdkuilib.repository.AvdManagerWindow.open(AvdManagerWindow.java:94) 在 com.android.sdkmanager.Main.showAvdManagerWindow(Main.java:369) 在 com.android .sdkmanager.Main.doAction(Main.java:311) 在 com.android.sdkmanager.Main.run(Main.java:119) 在 com.android.sdkmanager.Main.main(Main.java:102)java:144) 在 com.android.sdkuilib.repository.AvdManagerWindow.open(AvdManagerWindow.java:94) 在 com.android.sdkmanager.Main.showAvdManagerWindow(Main.java:369) 在 com.android.sdkmanager.Main.doAction (Main.java:311) 在 com.android.sdkmanager.Main.run(Main.java:119) 在 com.android.sdkmanager.Main.main(Main.java:102)java:144) 在 com.android.sdkuilib.repository.AvdManagerWindow.open(AvdManagerWindow.java:94) 在 com.android.sdkmanager.Main.showAvdManagerWindow(Main.java:369) 在 com.android.sdkmanager.Main.doAction (Main.java:311) 在 com.android.sdkmanager.Main.run(Main.java:119) 在 com.android.sdkmanager.Main.main(Main.java:102)

我的模拟器的安卓版本是2.3.3。有人可以帮助我。对不起我的英语水平

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:56:20.453

我解决了这个问题。我的 java sdk 与 android 模拟器不兼容。它在 Open JDK 6 上完美运行。

# visual-studio-2008 - VC++ 链接器抱怨项目文件中未指定的库

> ID：15369433
> 
> 赞同：1
> 
> 时间：2013-03-12T18:39:44.117
> 
> 标签：visual-studio-2008, visual-c++, boost, cmake

我在 CMake 生成的 .vcproj 中收到此错误：

```
Performing Pre-Link Event...
Linking...
LINK : fatal error LNK1104: cannot open file 'libboost_thread-vc90-mt-1_44.lib' 
```

除了调用该库这一事实之外`boost_thread-vc90-mt-1_44.lib`，我在 .vcproj 中根本找不到对此的任何引用。在链接器/输入部分、生成的命令行中，甚至在文本编辑器中搜索 .vcproj 文件。

可能发生了什么，我怎样才能更好地调查问题？有没有办法让链接器告诉我它首先在哪里找到引用`libboost_thread-vc90-mt-1_44.lib`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T19:39:08.730

Boost 使用与 Visual Studio 的自动链接，因此您不必在任何 boost 库中显式链接。您可以定义`BOOST_ALL_NO_LIB`禁用此功能，但我不建议这样做，根据我的经验，它非常有效。

您可以`#pragma comment(lib, "user32.lib")`在 Visual Studio 中使用自动链接库。如果你看一下 boost/config/auto_link.hpp 你会看到它被使用了。

在您的情况下，它正在寻找 boost 线程的静态版本，并且可能是您在构建 boost 时没有构建该版本。通过`--build-type=complete`在`b2`选项中指定，您可以确保构建了 boost 库的静态和动态版本。在这种情况下，您不必担心哪个版本是自动链接的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:00:05.433

`boost_thread-vc90-mt-1_44.lib`是一个*导入*库`boost_thread-vc90-mt-1_44.dll`。但是，您似乎静态链接 CRT，因此 boost 自动链接功能也尝试链接静态 Boost 库，它会*寻找*名为`libboost_thread-vc90-mt-1_44.lib`.

有关更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/15369613/boost-install-windows-msvc-10-0-example-cpp-fails-to-link)。

# angularjs - 在 Angular.js 指令上运行 Testacular 单元测试时包含的 JavaScript 问题

> ID：15369435
> 
> 赞同：0
> 
> 时间：2013-03-12T18:39:46.280
> 
> 标签：angularjs, angularjs-directive, karma-runner

我正在尝试为用于插入 Leaflet.js 映射的指令编写单元测试。

这个标签

```
<div ng-controller="WorldMapCtrl">
    <sap id="map"></sap>
</div> 
```

与此控制器一起使用

```
function WorldMapCtrl($scope) {} 
```

以及以下指令

```
angular.module('MyApp').
    directive('sap', function() {
    return {
        restrict: 'E',
        replace: true,
        template: '<div></div>',
        link: function(scope, element, attrs) {
            var map = L.map(attrs.id, {
                center: [40, -86],
                zoom: 2
            });
            //create a CloudMade tile layer and add it to the map
         L.tileLayer('http://{s}.tile.cloudmade.com/57cbb6ca8cac418dbb1a402586df4528/997/256/{z}/{x}/{y}.png', {
                maxZoom: 4, minZoom: 2
            }).addTo(map);
        }
    };
}); 
```

这会正确地将地图插入到页面中。当我运行以下单元测试时，它崩溃了

> TypeError：无法读取 null 的属性“_leaflet”

```
describe('directives', function() {
    beforeEach(module('MyApp'));

    // Testing Leaflet map directive
    describe('Testing Leaflet map directive', function() {
        it('should create the leaflet dir for proper injection into the page', function() {
            inject(function($compile, $rootScope) {
                var element = $compile('<sap id="map"></sap>')($rootScope);
                expect(element.className).toBe('leaflet-container leaflet-fade-anim');
            })
        });
    });
}); 
```

从我可以从一些谷歌搜索中得知，该错误似乎相当普遍。也许没有正确放置标签（使用 id="map"）或类似的东西可能会导致问题。但是，我没有看到我可以通过该指令的测试来改变什么。有什么想法我在这里做错了吗？

我还在 testacular.conf.js 中包含了必要的 JS 文件，其顺序与它们包含在 index.html 中的顺序相同。所以，这不是文件不存在的问题（至少我假设）。

谷歌搜索的一个结果（遗憾的是，它没有帮助）：[https ://groups.google.com/forum/#!msg/leaflet-js/2QH7aw8uUZQ/cWD3sxu8nXsJ](https://groups.google.com/forum/#!msg/leaflet-js/2QH7aw8uUZQ/cWD3sxu8nXsJ)

# c# - 运行时编译的类无法实现接口 - Roslyn

> ID：15369444
> 
> 赞同：0
> 
> 时间：2013-03-12T18:39:56.483
> 
> 标签：c#, roslyn

我从 2012 年 9 月开始使用 Roslyn。我正在尝试从文件创建类的实例。问题是该类正在实现和覆盖某些方法。当我尝试运行运行时编译时，会出现如下错误：

```
error CS0122: 'GameObject' is inaccessible due to its protection level  Roslyn.Compilers.CSharp.Diagnostic
error CS0115: 'rotate(float)': no suitable method found to override Roslyn.Compilers.CSharp.Diagnostic 
```

看起来类没有看到接口和覆盖函数。但我的编译看起来：

```
var comp = Compilation.Create("Test.dll"
            , syntaxTrees: new[] { syntaxTree }
            , references: new[] { 
                MetadataFileReference.CreateAssemblyReference("mscorlib"),
                new MetadataFileReference(typeof(Game.IGameObjectInterface).Assembly.Location),
                new MetadataFileReference(typeof(Team).Assembly.Location),
                new MetadataFileReference(typeof(System.Linq.Enumerable).Assembly.Location),
                new MetadataFileReference(typeof(LinkedList<>).Assembly.Location),

            }
            , options: new CompilationOptions(OutputKind.DynamicallyLinkedLibrary)
            ); 
```

增加了对界面的引用。

我究竟做错了什么？

编辑游戏对象

```
abstract class GameObject: IGameObject {
    protected string name;
    protected Entity entity;
       .
       .
       .
    //Look here create file load file
    static GameObject() {
        gameActionsPermitions = new Dictionary<string, List<IStaticGameObject>>();
        gameActions = new Dictionary<string, IGameAction>();
        IGameAction o = (IGameAction)System.Reflection.Assembly.GetExecutingAssembly().CreateInstance("Strategy.GroupControl.Game_Objects.GameActions.Produce");
        gameActions.Add(o.getName(), o);
        gameActionsPermitions.Add(o.getName(), new List<IStaticGameObject>());
    }

       .
       .
       .

    public abstract void rotate(float f);
    public abstract void nonActiveRotate(float f);
    protected abstract void onDisplayed();

       .
       .
       .

    } 
```

和接口 IGameObject

```
interface IGameObject{
    void rotate(float f);
    void nonActiveRotate(float f);
    void changeVisible(bool visible);
    string getName();
    string getMesh();
    bool tryExecute(string executingAction);

    Team Team { get; set; }

} 
```

文件中的功能是

```
public override void rotate(float f) {
        tryExecute("Produce");
        sceneNode.Roll(new Mogre.Degree((float)(mFlySpeed * 0.5 *f)));
        //position in LinkedList now moving
        if (!mFlying) {
            if (nextLocation()) {
                mFlying = true;
                mDestination = circularPositions.First.Value; //get the next destination.
                prepareNextPosition();
                //update the direction and the distance
                mDirection = mDestination - sceneNode.Position;
                mDistance = mDirection.Normalise();
            } else {
            }//nothing to do so stay in position    
        } else {
            double move = mFlySpeed * f;
            mDistance -= move;
            if (mDistance <= .0f) { //reach destination
                travelledInvisible = 0;
                sceneNode.Position = mDestination;
                mDirection = Mogre.Vector3.ZERO;
                mFlying = false;
            } else {
                sceneNode.Translate(mDirection * (float)move);
            }
        }
    } 
```

编辑2：

带类的文件

```
using System;
using System.Collections.Generic;
using System.Linq;
using Mogre;
using Strategy.TeamControl;

namespace Strategy.GroupControl.Game_Objects.StaticGameObjectBox {
class Planet : GameObject {

    protected double mDistance = 0.0f; //distance to positoin
    protected Mogre.Vector3 mDirection = Mogre.Vector3.ZERO;   // The direction the object is moving

    protected bool mFlying = false; //bool to detect if object walking or stay
    protected double mFlySpeed = 200f; //speed of planet

    protected double travelledInvisible;

    private static Random random = new Random();

    ///testing
    public Planet() {

    }
    public Planet(string s) {
        name = s;
    }
    //end

    public Planet(string name, string mesh, Team myTeam, Mogre.SceneManager manager, double distanceFromCenter, 
        Vector3 center, int circularNum = 30) {
        this.name = name;
        this.mesh = mesh;
        planetTeam = myTeam;
        this.manager = manager;

        //prepare list of positions
        circularPositions = calculatePositions(circularNum, distanceFromCenter,center);
        randomizeStartPosition(circularNum); // randomize start position
        mDestination = circularPositions.First();

        //Mogre inicialization of object
        entity = manager.CreateEntity(name, mesh);
    }

    /// <summary>
    /// Rotating in visible mood, it means when planet is in active solar system
    /// </summary>
    /// <param name="f">delay between frames</param>
    public override void rotate(float f) {
        tryExecute("Produce");
        sceneNode.Roll(new Mogre.Degree((float)(mFlySpeed * 0.5 *f)));
        //position in LinkedList now moving
        if (!mFlying) {
            if (nextLocation()) {
                mFlying = true;
                mDestination = circularPositions.First.Value; //get the next destination.
                prepareNextPosition();
                //update the direction and the distance
                mDirection = mDestination - sceneNode.Position;
                mDistance = mDirection.Normalise();
            } else {
            }//nothing to do so stay in position    
        } else {
            double move = mFlySpeed * f;
            mDistance -= move;
            if (mDistance <= .0f) { //reach destination
                travelledInvisible = 0;
                sceneNode.Position = mDestination;
                mDirection = Mogre.Vector3.ZERO;
                mFlying = false;
            } else {
                sceneNode.Translate(mDirection * (float)move);
            }
        }
    }

    /// <summary>
    /// Function calculate moves in invisible mode
    /// </summary>
    /// <param name="f">delay between frames</param>
    public override void nonActiveRotate(float f) {
        tryExecute("Produce");
        if (!mFlying) {
            if (nextLocation()) {
                mFlying = true;
                mDestination = circularPositions.First.Value; //get the next destination.
                prepareNextPosition();
                mDistance = mDirection.Normalise();
            } else {
            }//nothing to do so stay in position    
        } else {
            double move = mFlySpeed * f;
            mDistance -= move;
            if (mDistance <= .0f) { //reach destination
                travelledInvisible = 0;
                mDirection = Mogre.Vector3.ZERO;
                mFlying = false;

            } else {
                travelledInvisible += move;
            }
        }
    }

    //own functions 

    /// <summary>
    /// Randomize starting position of planet
    /// </summary>
    /// <param name="max">max of rotates</param>
    private  void randomizeStartPosition(int max) {
        for (int i = 0; i < getRandomNumber(max); i++) {
            prepareNextPosition();
        }
    }

    private static int getRandomNumber(int max) {
        return random.Next(max);
    }

    /// <summary>
    /// Cyclic remove from LinkedList and add on the end
    /// </summary>
    private void prepareNextPosition() {
        var tmp = circularPositions.First; //save the node that held it
        circularPositions.RemoveFirst(); //remove that node from the front of the list
        circularPositions.AddLast(tmp);  //add it to the back of the list.
    }

    /// <summary>
    /// Calculate posistion on circle represent as ngon
    /// </summary>
    /// <param name="circularNum">Number of positions on circle</param>
    /// <param name="distanceFromCenter">radius on circle</param>
    /// <returns>linkedList with position on ngon (circle)</returns>
    private LinkedList<Mogre.Vector3> calculatePositions(int circularNum, double distanceFromCenter,Vector3 center) {
        var list = new LinkedList<Mogre.Vector3>();
        for (int i = 0; i < circularNum; i++) {
            double x = System.Math.Cos(i * 2 * System.Math.PI / circularNum) * distanceFromCenter;
            double y = System.Math.Sin(i * 2 * System.Math.PI / circularNum) * distanceFromCenter;
            list.AddFirst(new Mogre.Vector3((float)x + center.x, 0, (float)y)+ center.y);
        }

        return list;
    }

    /// <summary>
    /// The NextLocation() check if exist next location to move
    /// </summary>
    /// <returns>true ->exist / false -> not exist</returns>
    private bool nextLocation() {
        if (circularPositions.Count == 0) {
            return false;
        }
        return true;
    }

    /// <summary>
    /// Called when object is displayed (invisible to visible)
    /// </summary>
    protected override void onDisplayed() {
        sceneNode.Position = mDestination;
        mFlying = false; //jump correction
    } 
```

} }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:44:00.487

这些看起来像标准编译器错误。

我怀疑您的`GameObject`课程未声明为`public`. 这将导致它对您通过 Roslyn 创建的程序集不可见，因为它正在从定义您的类型的程序集编译一个新的（单独的）程序集。

如果你公开你的类型，这个错误可能会消失。

# javascript - jQuery - 同一个按钮的多个事件监听器

> ID：15369445
> 
> 赞同：1
> 
> 时间：2013-03-12T18:39:57.967
> 
> 标签：javascript, jquery

假设我有一个带有 id 的按钮：

`<input id='someButton' />`

我想在这个按钮上附加一个事件监听器：

```
$('#form').on('click', '#someButton', function() { 
   alert("My listener called"); 
```

});

然而，我不知道，之前有人为这个按钮写了一个事件监听器：

```
$('#form').on('click', '#someButton', function() { 
   alert("Some other listener called"); 
}); 
```

我遇到了一些有效地执行与上述相同操作的代码，并且似乎注册的第一个侦听器就是使用的侦听器。我是否正确假设 jQuery 将始终调用在特定 id 上注册的第一个事件侦听器（并且*只有*那个侦听器）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T18:41:13.563

不正确。jQuery 将按照绑定的顺序调用绑定到元素的所有事件侦听器。

要删除现有的事件处理程序，请使用[`.off()`](http://api.jquery.com/off/)：

```
$('#form').off('click'); // click event handler(s) removed
$('#form').off(); // all event handler(s) removed 
```

但是请注意，从祖先 DOM 元素委托的事件不会以这种方式被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:52:00.467

你可以使用mousedown：

```
$('#form').on('mousedown', '#someButton', function() { 
    alert("My listener called"); 
}); 
```

希望这有帮助。

# javascript - 如何确定 ng-options 何时完成更新 DOM？

> ID：15369452
> 
> 赞同：5
> 
> 时间：2013-03-12T18:40:16.017
> 
> 标签：javascript, mvvm, angularjs, angularjs-directive

我正在尝试使用我的应用程序中的指令来实现 jQuery 多选插件。这是选择元素：

```
<select multiple 
        ng-model="data.partyIds" 
        ng-options="party.id as party.name for party in parties" 
        xs-multiselect="parties">
</select> 
```

模型`parties`模型通过 $http 加载。多选插件解析`option`里面的元素`select`并生成漂亮的多选。

有没有办法检测`select`元素何时填充了选项，以便我可以告诉多选插件更新其数据？

这是我的指令：

```
machineXs.directive("xsMultiselect", function() {
    return {
        restrict: "A",
        require: '?ngModel',
        link: function(scope, element, attrs, ngModel) {
            element.multiselect().multiselectfilter();
            scope.$watch(scope[attrs["xsMultiselect"]], function() {
                // I tried watching but it doesn't help
                element.multiselect('refresh');
                element.multiselectfilter("updateCache");
            });
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T18:41:22.083

如评论中所述，使用

```
scope.$watch(attrs.xsMultiselect, ...) 
```

我不确定手表何时触发与 ngOptions 何时更新 DOM。如果您发现手表触发太早，您可以尝试使用[$evalAsync()](http://docs.angularjs.org/api/ng.%24rootScope.Scope#%24evalAsync)或 $timeout()。$evalAsync 将稍后执行，但在 DOM 呈现之前。$timeout() 将在 DOM 渲染之后执行。

```
scope.$watch(attrs.xsMultiselect, function() {
   scope.$evalAsync(function() {
      element.multiselect('refresh');
      element.multiselectfilter("updateCache");
   });
}); 
```

或者，在 DOM 呈现之后：

```
scope.$watch(attrs.xsMultiselect, function() {
   $timeout(function() {
      element.multiselect('refresh');
      element.multiselectfilter("updateCache");
   });
}); 
```

# c# - 将米距离添加到 Long/Lat e6

> ID：15369454
> 
> 赞同：1
> 
> 时间：2013-03-12T18:40:19.403
> 
> 标签：c#, android, google-maps, mono

抱歉，如果之前有人问过这个问题。我看过关于Haversine和椭球的帖子。

我有两个定义有向矢量的 1e6 谷歌地图地理点格式的点。

我需要为有向向量创建一个 OABB（对象对齐边界框）。通过计算法线 (-y,x)、(y,-x) 轻松完成。唯一的问题是标准化向量的长度定义了 OABB 的宽度。

例如，我希望这些法线长 20 公里......所以我需要将法线缩放 20 公里，但我不知道如何以 Geopoint 类使用的 1e6 格式执行此操作。

如果有人可以发布一些关于如何将米值添加到地理点的代码，我会喜欢它们。

干杯。克雷格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:02:32.810

在这里找到答案-> [https://gis.stackexchange.com/questions/2951/algorithm-for-offsetting-a-latitude-longitude-by-some-amount-of-meters](https://gis.stackexchange.com/questions/2951/algorithm-for-offsetting-a-latitude-longitude-by-some-amount-of-meters)

不是在我自己通过使用地球的半径和一些简单的三角来计算出这该死的东西之前。虽然我是一个足够称职的数学家，但我不应该这样做。

（咆哮）谷歌在玩什么？很明显，GMap 开发人员需要对 Geopoint 和 Location 进行矢量运算，他们应该有内置的矢量运算符。（/咆哮）

# python - 用 cython 创建矩阵的有效方法

> ID：15369457
> 
> 赞同：2
> 
> 时间：2013-03-12T18:40:24.297
> 
> 标签：python, performance, matrix, linear-algebra, cython

我有一个为我计算矩阵的函数，但它真的很慢。即使在 cython 中它运行缓慢，所以我想知道是否可以做任何事情来增强下面的代码。

编辑：我已更改或添加

`des = np.zeros([n-m+1,m])`to `cdef np.ndarray des = np.zeros([n-m+1,m], dtype=DTYPE)`（这比我没有`np.empty...` 说`m/2`我添加了 a快，`cdef int m2 = m/2`但这似乎没有任何帮助。

```
cimport numpy as np
cimport cython

DTYPE = float
ctypedef np.float_t DTYPE_t

@cython.boundscheck(False)
@cython.cdivision(True)
@cython.wraparound(False)
cpdef map4(np.ndarray[DTYPE_t, ndim=1] s, int m): 

  cdef int n = len(s)
  cdef int i
  cdef int j

  des = np.zeros([n-m+1,m])
  for j in xrange(m):
      for i in xrange(m/2,n-m/2-1):
          des[i-m/2,j] = s[i-j+m/2]

  return des, s, m, n 
```

通常`n~10000`和`m=1001`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T18:43:35.650

尝试：

```
cdef np.ndarray des = np.zeros([n-m+1,m]) 
```

您也可以像对参数 s 所做的那样使其更具体。您还可以关闭边界检查。查看[cython numpy 教程](http://wiki.cython.org/tutorials/numpy)。

您可能还想创建一个变量：

```
cdef int m_2 = m/2 
```

并在您拥有的任何地方使用它，`m/2`因为我不知道 Cython 是否会为您进行优化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T19:00:15.427

假设您将分配每个元素，它也可能有助于使用`np.empty`而不是`np.zeros`：

```
des = np.empty([n-m+1,m]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-08T08:43:48.890

I'm not seeing m being set anywhere. At the bottom of your code, you mention that n~10,000, and m=1001\. Does that mean that m is a constant integer of 32 bits? Not seeing your compilation flags, it's frequently worthwhile to try it with and without `-ffast-math` to see if that makes a difference. With large arrays and matrices, using a smaller data type usually shows a significant speedup, provided that the smaller data type preserves the range and accuracy that your program needs, though I'm not seeing a large potential benefit on this calculation.

If you could show us the C code that is generated by this, that might help, as well.

# javascript - 是否可以在 PhoneGap 中调用原始（未包装的）setInterval 函数？

> ID：15369458
> 
> 赞同：0
> 
> 时间：2013-03-12T18:40:24.740
> 
> 标签：javascript, cordova

PhoneGap 包装了该`setInterval`函数，因此 console.log 返回以下内容：

```
function wrapped_setInterval(code, interval)
    var id = Native.setInterval(code, interval)   
    code.__timerId = id
    addTimer(id, interval, false)
    return id
} 
```

如何调用原始`setTimeout`函数？它似乎已备份`Native.original.setTimeout`，有没有办法访问该`Native`对象？

# html - 无法使页脚保持向下并与主要内容分开

> ID：15369460
> 
> 赞同：0
> 
> 时间：2013-03-12T18:40:30.900
> 
> 标签：html, css, footer, sticky-footer

我已经在这个页面上苦苦挣扎了好几天，我不知道我哪里出错了。我的眼睛受伤了，我需要一些帮助。我以前可以使用粘性页脚，但由于某种原因，此页面非常喜怒无常。

页面：http: [//isolatedhowl.com/workshop/buckstop/](http://isolatedhowl.com/workshop/buckstop/)

html： http: [//plnkr.co/edit/kpMf8txpBSqEGOwXxE0s](http://plnkr.co/edit/kpMf8txpBSqEGOwXxE0s)

```
<!DOCTYPE html>
<html lang="en">

<head>
<link rel="stylesheet" type="text/css" href="http://meyerweb.com/eric/tools/css/reset/reset.css" media="all"/>
<link rel="stylesheet" type="text/css" href="css/buckstop.css" media="screen"/>
<title>Buck Stop</title>
<meta name="description" content="Buck Stop is a classic barbecue and small plate saloon." />
<meta charset="UTF-8"/>
</head>

<body>
<div id="wrapper">
    <article id="maininfo">
        <header>
            <div id="coverimg"><img src="images/buckstop_interior.jpg" alt="Buck Stop Interior" width="560" height="315"/></div>
            <figure id="logo"><a href="#"><img src="buckstop_logo.png" alt="Buck Stop Logo"/></a></figure>
        </header>
        <nav id="mainnav">
            <ul>
                <li><a href="#">Kitchen</a></li>
                <li><a href="#">Bar</a></li>
                <li><a href="#">Events</a></li>
                <li><a href="#">Contact</a></li>
                <li><a href="#">About</a></li>
            </ul>
        </nav>
        <div id="maincontent">
            <p class="center quote">&quot;Food is like love. It should be entered into with abandon or not at all.&quot;</p>
            <p class="center">- Harriet Van Horne</p>
        </div>
    </article>
</div>

    <article id="storyinfo" class="infolinks">
        <header><h2>Our Story</h2></header>
        <p>Find out more about who we are, what makes us unique, and what we're all about...</p>
        <p class="right"><a href="#">Read More</a></p>
    </article>

    <article id="menuinfo" class="infolinks">
        <header><h2>Our Menu</h2></header>
        <p>All of our food is prepared in house and sourced locally. Great food, great health...</p>
        <p class="right"><a href="#">Read More</a></p>
    </article>

<div id="baroverlay"></div>

</body>
</html> 
```

CSS： http: [//plnkr.co/edit/arJTFnQpEmJH7WZtFt72](http://plnkr.co/edit/arJTFnQpEmJH7WZtFt72)

```
body {
background-color: #000;
background-image: url('buckstop_background.jpg');
background-attachment: fixed;
background-size: 100%;
color: #FFF;
font-size: 18px;
}

html, body {
height: 100%;
}

h1 {
font-size: 30px;
}

h2 {
font-size: 20px;
}

#wrapper {
width: 600px;
min-height: 100%;
}

#maininfo {
background-color: rgba(0, 0, 0, 0.85);
color: #FFF;
overflow: auto;
position: fixed;
top: 0;
left: 50px;
width: 560px;
padding: 20px 20px 170px 20px;
}

#coverimg {
width: 560px;
margin-right: auto;
margin-left: auto;
}

#logo {
position: fixed;
top: 260px;
left: 450px;
z-index: 1;
}

#baroverlay {
width: 100%;
height: 80px;
position: fixed;
top: 248px;
background-color: rgba(66, 17, 24, 0.8);
}

#mainnav {
color: #FFF;
font-size: 24px;
text-align: center;
width: 560px;
word-spacing: 40px;
margin: 10px 0;
}

#maincontent {
margin: 20px 0;
}

#mainnav li {
display: inline;
width: 20px;
text-align: center;
}

#mainnav a:link, #mainnav a:visited {
color: #FFF;
text-decoration: none;
}

#mainnav a:hover {
color: #892332; /* Burgundy */
text-decoration: none;
}

#storyinfo {
background-color: rgba(0, 0, 0, 0.85);
color: #FFF;
font-size: 16px;
width: 255px;
position: relative;
margin-top: -170px;
left: 50px;
height: 170px;
clear: both;
padding: 20px;
}

.infolinks a:link, #storyinfo a:visited {
color: #892332; /* Burgundy */
text-decoration: none;
}

.infolinks a:hover {
color: #892332; /* Burgundy */
text-decoration: none;
font-style: italic;
}

#menuinfo {
background-color: rgba(0, 0, 0, 0.85);
color: #FFF;
font-size: 16px;
width: 255px;
position: relative;
margin-top: -170px;
bottom: 0;
left: 355px;
height: 170px;
clear: both;
padding: 20px;
}

.quote {
color: #FFF;
font-size: 30px;
}

.center {
text-align: center;
}

.right {
text-align: right;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:03:12.590

只是改变这个：

```
#baroverlay {
  width: 100%;
  height: 80px;
  position: fixed;
  top: 248px;
  background-color: rgba(66, 17, 24, 0.8);
} 
```

有了这个：

```
#baroverlay {
  width: 100%;
  height: 80px;
  position: fixed;
  bottom:0;
  background-color: rgba(66, 17, 24, 0.8);
} 
```

这是一个[笨蛋](http://plnkr.co/edit/LRfxfuwQmb84oP7WWBGX?p=preview)。顺便说一句，您可以创建一个包含多个文件的 plunker。
希望这有帮助。

# sql-server - SQL Server 2008 R2（64 位）-Service Pack 2 - UC5 找不到 Adob e 的 iFilter 11.0

> ID：15369467
> 
> 赞同：1
> 
> 时间：2013-03-12T18:40:52.780
> 
> 标签：sql-server, sql-server-2008-r2, ifilter

重建包含存储 PDF 表的目录时出现以下错误（它适用于 Word 文档）。

> 警告：在为表或索引视图“[Test].[dbo].[Table_1]”（表或索引视图 ID 为“2105058535”，数据库 ID 为“6”）进行全文索引填充期间未找到合适的过滤器，完整-文本键值“911”。该行的某些列未编入索引。

我按照 Adob​​e 的安装程序运行了以下命令：

```
EXEC sp_fulltext_service @action='load_os_resources', @value=1; -- update os resources 
EXEC sp_fulltext_service 'verify_signature', 0 -- don't verify signatures 
EXEC sp_fulltext_service 'update_languages'; -- update language list 
EXEC sp_fulltext_service 'restart_all_fdhosts'; -- restart daemon 
EXEC sp_help_fulltext_system_components 'filter'; -- view active filters 
```

最后一个确实返回正确的过滤器路径：

```
filter .pdf E8978DA6-047F-4E3D-9C78-CDBE46041603 C:\Program Files\Adobe\Adobe PDF iFilter 11 for 64-bit platforms\bin\PDFFilter.dll 11.0.1.36 Adobe Systems, Inc. 
```

我已经添加了路径`C:\Program Files\Adobe\Adobe PDF iFilter 11 for 64-bit platforms\bin\`并验证它是否有效。

我已经重新启动了服务（甚至重新启动了机器）。我还通过运行 Windows SDK 附带的 filtdump.exe 进行了验证，以验证过滤器在 SQL Server 2008 R2 之外是否可以正常工作。

此外，我还重新配置了 sql server 服务，以便它们使用管理员帐户运行（以防问题与权限有关）。

最后，我尝试了几台机器（一些使用 SP1 运行）并且结果相同。注册 DLL 没有问题... SQL Server 根本不调用过滤器。请注意，我尝试将文档上传到具有“未知”扩展名（例如“.xyz”）的同一个表中，并且得到相同的结果......就像“.pdf”是未注册的扩展名一样（但是它是）。

有什么建议吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-22T16:21:58.890

在尝试解决此问题时，我遇到了各种奇怪的问题。解决方案是授予 adobe iFilter dll bin 目录对 SQL Server 数据库引擎服务帐户的完全访问权限。

我的测试是用 Adob​​e 9.0 完成的。我们尝试了第一个 Adob​​e Pdf 11 过滤器，但没有运气，重新安装 Adob​​e Pdf 9，没有运气，重新安装 SQL Server 2008r2 + sp2 + Adob​​e Pdf 没有运气。

我重建了目录，但不起作用。最后，当您评论 SQL Server 根本没有调用 Dll 的可能性时，我怀疑是访问权限问题。通过授予上述权限，它起作用了。

也许这会使 Adob​​e PDF 11 工作，但要注意更正版本 11 的路径。

# html - 负边距适用于盒子，但不适用于其中的内容

> ID：15369468
> 
> 赞同：0
> 
> 时间：2013-03-12T18:41:01.603
> 
> 标签：html, css

（请注意，目前提供的答案尚不清楚）

我有一个网站标题，它分为两部分：左侧和右侧，左侧高 130 像素，右侧高 185 像素。我使用浮动布局这些。

我在要向上移动的 div 中的左侧标题侧下方有内容，因此它就在左侧标题下方。当我给这个 div 一个边框并指定一个负边距时，边框会按预期向上移动。但是，div 内的内容并没有向上移动。它挂在 185px 下方（显然是从右侧标题）。注意我在这个 div 上将填充设置为零。我究竟做错了什么？

它在最新版本的 Chrome 或 Firefox 中不起作用。谢谢。

相关的HTML代码是：

```
<body style="margin: 0px">
    <div class="page">
        <div>
            <div class="leftHeader">
                <div class="headerMissingEnd">
                    <!-- img src="images/header.png" Title" width="750px" / -->
                </div>

            </div>
            <div class="rightHeader">
                <div style="height:185px;padding:0px">
                    <canvas margin:"0" width="360px" height="185px" loop="true" fps="30" bgcolor="#ffffff" init="fn_canvas">
                    </canvas>
                </div>
            </div>
            <br class="clear" />
        </div>
       <div style="margin-top:-60px; padding:0;border: 1px dashed red">
          some text that appears too low, not a top of div as expected
       </div> 
```

CSS 代码：

```
.clear {
   clear: both;
   line-height: 0px;
}

.page {
   width: 1005px;
   margin: 0px auto;
   color: #333;
   background-color: #fff;
}

.leftHeader {
    float: left;
    width: 630px; 
    margin: 0px auto;   
 }

.rightHeader {
    float: left;
    width: 360px; 
    height: 185px;
    margin: 0px auto;   
 }

.headerMissingEnd {
    margin: 0px;
    width: 640px;
    height: 130px;
   background: url('images/header-left.png') no-repeat;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:34:49.430

不要使用负数`margin`来改变元素的相对位置。改用`position: relative; top: -60px;`：

```
<div style="position: relative; top: -60px; padding:0;border: 1px dashed red;">
      some text that appears too low, not a top of div as expected some text that appears too low, not a top of div as expected some text that appears too low, not a top of div as expected
</div> 
```

( [http://jsfiddle.net/BMpqP/10/](http://jsfiddle.net/BMpqP/10/) ) 然后你可以用`width: 600px;`.

* * *

**旧答案文本**：所以，那是因为你的最后一个`div`宽度是 100% 并且没有被`float`编辑。（ 的默认行为`div`。）

当 div 不浮动时，其中的文本甚至在其外部也会与浮动 div 交互。如果您添加更多文本，您会看到 ( [http://jsfiddle.net/BMpqP/6/](http://jsfiddle.net/BMpqP/6/) ) 文本不会与更高的其他标题发生冲突。

我提出的解决方案是浮动 div 并将其大小设置为：

```
<div style="margin-top:-60px; padding:0;border: 1px dashed red; float: left; width: 630px;">
    some text that appears too low, not a top of div as expected
</div> 
```

那么文字就可以了，页面的主要内容也可以了：http: [//jsfiddle.net/BMpqP/7/](http://jsfiddle.net/BMpqP/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:18:11.970

如果您想要真正平滑的堆叠而没有任何硬编码的偏移量，那么您真正应该做的就是使用`float: right;`标题。（标题部分必须在标记中交换位置。）

```
 <div class="leftHeader">
        <div class="headerMissingEnd">
            <!-- img src="images/header.png" Title" width="750px" / -->
        </div>
    </div>

    <div style="padding:0;border: 1px dashed red;">
        some text that appears too low, not a top of div as expected some text that appears too low, not a top of div as expected some text that appears too low, not a top of div as expected
    </div>
</div> 
```

和CSS：

.clear { 明确：两者；行高：0px；}

```
.page {
   width: 1005px;
   margin: 0px auto;
   color: #333;
   background-color: #fff;
}

.leftHeader {
    float: right;
    width: 630px; 
    margin: 0px auto;   

    background-color: black;

    opacity: 0.5;
 }

.rightHeader {
    float: right;
    width: 375px; 
    height: 185px;
    margin: 0px auto; 

    opacity: 0.5;

    background-color: navy;
 }

.headerMissingEnd {
    margin: 0px;
    width: 640px;
    height: 130px;
   background: url('images/header-left.png') no-repeat;
} 
```

# html - 使用 Ruby 从登录可访问网页 post-javascript 中提取值

> ID：15369469
> 
> 赞同：3
> 
> 时间：2013-03-12T18:41:03.177
> 
> 标签：html, ruby, nokogiri, watir, hpricot

我有一个股票交易网站，只有在登录该网站后才能访问。登录后，我正在尝试提取一个股票价值。该号码并不容易获得，并且需要一段时间才能加载，因为它正在从公司的数据库中更新。

我正在尝试用 Ruby 编写一个脚本，它可以让我提取数字然后在我的程序中使用它。

在萤火虫中，标签看起来像这样，但只有在数字加载后：

```
<span id="ContentPlaceHolderTodaysStock">10,747</span> 
```

我探索了诸如 hpricot 和 nokogiri 之类的库，并尝试了类似于以下的代码：

```
require "nokogiri"
require "open-uri"
doc = Nokogiri::HTML(open("website.com/stocks"))
puts doc.xpath("//span/text()") 
```

我遇到的问题是 1）它只从登录页面“website.com”而不是“website.com/stocks”读取 html 2）一旦我通过登录，我如何使用 html 代码之后javascript已加载？

我也尝试过 Watir，这样可以让我解决问题 #1，但随后执行以下操作对问题 #2 没有帮助，因为它提供了原始的 html 源...

```
require 'net/http'
source = Net::HTTP.get("website.com/stocks", '/') 
```

任何解决此问题的帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:28:00.473

由于您可以使用 Watir 登录，因此您也可以使用它来获取页面上的文本。Watir 具有等待异步组件加载的内置方法 - 请参阅[http://watirwebdriver.com/waiting/](http://watirwebdriver.com/waiting/)。

要获取文本，您将需要以下内容：

```
puts browser.span(:id => 'element_id').when_present.text 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:08:23.393

如果它是事后加载的，则 Nokogiri 看不到它。你需要使用像 Watir 这样的东西。

* * *

> 一旦我通过登录，在加载 javascript 后如何使用 html 代码？

你不能和 Nokogiri 一起去那里。添加的 HTML 在 Nokogiri 的世界中不存在，因为它是通过 OpenURI 提供的基本 HTML。Nokogiri 不执行 JavaScript。

另一方面，Watir 可以做到所有这些，因此它是您唯一的选择。你必须弄清楚如何浏览登录页面，请求股票页面，然后循环，等到文本出现，然后抓住它并用它做任何你想做的事情。

# javascript - 将 CSS 规则应用于所有未来的元素

> ID：15369470
> 
> 赞同：0
> 
> 时间：2013-03-12T18:41:07.530
> 
> 标签：javascript, css, google-chrome-extension

我正在制作一个简单的 Chrome 扩展供个人使用。我想将 CSS 规则应用于与类匹配的所有元素，即使它们在我的扩展脚本执行后的某个时刻动态呈现。如何在 RAW javascript 中执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T18:47:31.220

CSS 规则将匹配文档中任何当前和未来的元素。样式会随着文档的变化而应用。

[HTML5Rocks](http://www.html5rocks.com/)有一篇很棒的文章，可以很好地概述[浏览器的工作原理](http://www.html5rocks.com/en/tutorials/internals/howbrowserswork/)，包括何时以及为何应用布局和样式。

# php - 如果我没有明确关闭它，PHP 是否会关闭在脚本末尾使用 PDO 打开的 SQL 连接？

> ID：15369474
> 
> 赞同：0
> 
> 时间：2013-03-12T18:41:13.800
> 
> 标签：php, sql, pdo, connection, database-connection

我知道我可以关闭一个 PDO SQL 连接，将处理程序设置为`NULL`.

但如果我不这样做，PHP 会在脚本末尾关闭连接吗？

例如，我可以使用

```
$db = new PDO('sqlite:db.sqlite');
/* Code */
if ($cond1) { exit; }
/* More code */
if ($cond2) { exit; }
/* ... */
$db = NULL;
/* Code not related to the database */ 
```

...或者我应该使用这个：

```
$db = new PDO('sqlite:db.sqlite');
/* Code */
if ($cond1) {
    $db = NULL;
    exit;
}
/* More code */
if ($cond2) {
    $db = NULL;
    exit;
}
/* ... */
$db = NULL;
/* Code not related to the database */ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T18:43:12.250

根据**[文档](http://www.php.net/manual/en/pdo.connections.php)**：

> 该连接在该 PDO 对象的生命周期内保持活动状态。要关闭连接，您需要通过确保删除对它的所有剩余引用来销毁该对象——您通过将 NULL 分配给保存该对象的变量来做到这一点。如果您没有明确地这样做，**PHP 将在您的脚本结束时自动关闭连接**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T18:47:19.707

**例子。**

这是你的 dbc 类

```
<?php

class dbc {

    public $dbserver = 'server';
    public $dbusername = 'user';
    public $dbpassword = 'pass';
    public $dbname = 'db';

    function openDb() {    
        try {
            $db = new PDO('mysql:host=' . $this->dbserver . ';dbname=' . $this->dbname . ';charset=utf8', '' . $this->dbusername . '', '' . $this->dbpassword . '');
        } catch (PDOException $e) {
            die("error, please try again");
        }        
        return $db;
    }

    function getAllData($qty) {
        //prepared query to prevent SQL injections
        $query = "select * from TABLE where qty = ?";
        $stmt = $this->openDb()->prepare($query);
        $stmt->bindValue(1, $qty, PDO::PARAM_INT);
        $stmt->execute();
        $rows = $stmt->fetchAll(PDO::FETCH_ASSOC);
        return $rows;
    }    
?> 
```

您的 PHP 页面：

```
<?php 
require "dbc.php";

$getList = $db->getAllData(25);

foreach ($getList as $key=> $row) {
         echo $row['columnName'] .' key: '. $key;
    } 
```

返回结果后您的连接将立即关闭

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T18:48:15.053

根据[文档](http://php.net/manual/en/function.exit.php)当您调用退出时：

> 终止脚本的执行。即使调用了 exit ，也将始终执行关闭函数和对象析构函数。

这意味着您的 PDO 连接将被关闭。不过，自己关闭它总是一个好习惯。

# java - 如何在 Java 中初始化 ThreadLocal 对象

> ID：15369476
> 
> 赞同：31
> 
> 时间：2013-03-12T18:41:14.937
> 
> 标签：java, thread-local, static-block

我在创建 ThreadLocal 并使用 new ThreadLocal 对其进行初始化时遇到问题。问题是，我真的在概念上只是想要一个持续线程生命的持久列表，但我不知道是否有办法在 Java 中为每个线程初始化一些东西。

例如，我想要的是这样的：

```
ThreadLocal static {
  myThreadLocalVariable.set(new ArrayList<Whatever>());
} 
```

这样它就为每个线程初始化它。我知道我可以这样做：

```
private static Whatever getMyVariable() {
  Whatever w = myThreadLocalVariable.get();
  if(w == null) {
    w = new ArrayList<Whatever>();
    myThreadLocalVariable.set(w);
  }
  return w; 
} 
```

但我真的宁愿不必在每次使用时都对其进行检查。有什么更好的我可以在这里做的吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-12T18:43:42.080

您只需覆盖该`initialValue()`方法：

```
private static ThreadLocal<List<String>> myThreadLocal =
    new ThreadLocal<List<String>>() {
        @Override public List<String> initialValue() {
            return new ArrayList<String>();
        }
    }; 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2017-05-24T09:00:23.433

接受的答案在 JDK8 中已过时。这是从那时起最好的方法：

```
private static final ThreadLocal<List<Foo>> A_LIST = 
    ThreadLocal.withInitial(ArrayList::new); 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-03-12T19:00:44.710

你的解决方案很好。一点简化：

```
private static Whatever getMyVariable() 
{
    Whatever w = myThreadLocalVariable.get();
    if(w == null) 
        myThreadLocalVariable.set(w=new Whatever());
    return w; 
} 
```

在 Java 8 中，我们能够做到：

```
ThreadLocal<ArrayList<Whatever>> myThreadLocal = ThreadLocal.withInitial(ArrayList::new); 
```

它使用[`Supplier<T>`](https://docs.oracle.com/javase/8/docs/api/java/util/function/Supplier.html)功能接口。

# sql - 使用 VB.NET 2008 将 .CVS 数据插入访问数据库

> ID：15369483
> 
> 赞同：2
> 
> 时间：2013-03-12T18:41:30.657
> 
> 标签：sql, vb.net, ms-access, oledb

我想使用 VB.NET 将 .CVS 文件的内容插入到 Access .mdb 数据库中。我知道有很多这样的例子，但他们通常使用 TSQL 命令（如 BULK 命令）——据我所知——我不能与 Jet 4.0 一起使用。

文件中的列用分号分隔，就像这样：

9.00;测试科隆 2;2013

这是我第一次不得不处理这种文件，不知道从哪里开始。请对我温柔一点：D。

谢谢西蒙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:16:50.337

签出 LINQ to CSV 库。过去我在这方面取得了很大的成功。

[http://www.codeproject.com/Articles/25133/LINQ-to-CSV-library](http://www.codeproject.com/Articles/25133/LINQ-to-CSV-library)

# excel - 如何从vba中的字符串中提取数字组

> ID：15369485
> 
> 赞同：1
> 
> 时间：2013-03-12T18:41:35.657
> 
> 标签：excel, vba

我有以下形状的字符串：

```
RRP 90 AVE DE GAULLE 92800 PUTEAUX 0109781431-0149012126 
```

这些数字可能由连字符以外的其他字符（例如空格）分隔。我知道之后如何用 len() 来区分它们。

我需要单独存储每个数字字符串（例如在数组中），以便我可以用 len() 区分它们，然后使用它们。

我找到了如何从字符串中去除字符： [如何从字符串中查找数字？](https://stackoverflow.com/questions/7239328/vba-how-to-find-numbers-from-string)

但这不适合我的问题...

你能指导我找到一个可以帮助我的函数或代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:48:54.553

这将比循环运行快得多

```
Public Function NumericOnly(s As String) As String
    Dim s2 As String
    Dim replace_hyphen As String
    replace_hyphen = " "
    Static re As RegExp
    If re Is Nothing Then Set re = New RegExp
    re.IgnoreCase = True
    re.Global = True
    re.Pattern = "[^0-9 -]" 'includes space, if you want to exclude space "[^0-9]"
    s2 = re.Replace(s, vbNullString)
    re.Pattern = "[^0-9 ]"
    NumericOnly = re.Replace(s2, replace_hyphen)
End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T19:11:36.047

试试下面的代码：

```
Function parseNum(strSearch As String) As String

   ' Dim strSearch As String
    'strSearch = "RRP 90 AVE DE GAULLE 92800 PUTEAUX 0109781431-0149012126"

    Dim i As Integer, tempVal As String
    For i = 1 To Len(strSearch)
        If IsNumeric(Mid(strSearch, i, 1)) Then
            tempVal = tempVal + Mid(strSearch, i, 1)
        End If
    Next

    parseNum = tempVal
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-24T23:34:57.027

所以我意识到这是很久以前的事了......但我在网上寻找类似的解决方案。

关于我的编程技能的一些以前的历史（原文如此）：我从 Python 开始，使用 Python 我有一个方便的工具，叫做`List`. VBA 没有这个，所以我剩下的是我可以在`sample`下面调用的变量中输入的东西，即`sample = [1,4,5]`.

回到小代码。我使它`holder`只包含数字组，就像您指定它们应该如何分组一样。

```
Dim count, count1 As Integer
Dim holder As String
Dim sample, smallSample As String

count = 0
count1 = 1
sample = "1ab33 efa 123 adfije-23423 123124-23423"
holder = ""
Do While count <> Len(sample)
    smallSample = Left(sample, 1)
    If smallSample = "0" Or smallSample = "1" Or smallSample = "2" Or smallSample = "3" Or smallSample = "4" Or smallSample = "5" Or smallSample = "6" Or smallSample = "7" Or smallSample = "8" Or smallSample = "9" Then
        holder = holder & smallSample
    Else
        If holder <> "" Then
            Cells(count1,1) = holder
            count1 = count1 + 1
        End If
        holder = ""
    End If
    sample = Right(sample, Len(sample) - 1)

Loop 
```

我得到的输出是

> 1
> 
> 33
> 
> 123
> 
> 23423
> 
> 123124

在我运行代码之后。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-06T06:22:02.983

上面非常简单的 Python 样式循环。

扩展为 A 列中的字符串列表。

发现的数字将显示在右侧的列中 - B、C 等。

```
Dim count, count1 As Integer
Dim holder As String
Dim sample, smallSample As String
Dim r As Integer
Dim c As Integer
r = 1
c = 1

Do While Sheet2.Cells(r, c) <> ""
    count = 0
    count1 = 1
    sample = Sheet2.Cells(r, c)
    holder = ""
    Do While count <> Len(sample)
        smallSample = Left(sample, 1)
        If smallSample = "0" Or smallSample = "1" Or smallSample = "2" Or smallSample = "3" Or smallSample = "4" Or smallSample = "5" Or smallSample = "6" Or smallSample = "7" Or smallSample = "8" Or smallSample = "9" Then
            holder = holder & smallSample
        Else
            If holder <> "" Then
                Sheets(2).Cells(r, c + count1).Value = holder
                count1 = count1 + 1
            End If
            holder = ""
        End If
        sample = Right(sample, Len(sample) - 1)

    Loop
    r = r + 1
Loop 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-06-14T10:43:33.770

如果您在使用 @Scotts 时收到错误“编译时出现问题，未定义用户定义的类型”答案启用正则表达式选项，如此处的第 1 步和第 2 步所示：[如何使用/启用（RegExp 对象）使用 VBA 的正则表达式（ MACRO）在word中](https://stackoverflow.com/questions/25102372/how-to-use-enable-regexp-object-regular-expression-using-vba-macro-in-word)（也适用于Excel）

Ps Scotts 解决方案对我来说效果很好。

# google-chrome - tofind.info 搜索插件无法从 Chrome 浏览器中卸载它。它是一个间谍软件，因为我从未安装过它。在谷歌上找不到任何关于它的东西

> ID：15369492
> 
> 赞同：0
> 
> 时间：2013-03-12T18:42:02.460
> 
> 标签：google-chrome, browser, spyware

谷歌浏览器向我展示了这条消息，一个小的 div 类型的弹出窗口。升级成功完成。Google Chrome 已使用新的 ToFind 服务成功升级了您的扩展程序。继续使用 toFind 服务了解更多

我不知道什么时候安装的，在此期间我从未安装过任何东西

我记得安装了一个安装了 superfish 搜索插件的软件（同样在我不知情的情况下）。卡巴斯基也没有检测到它，谷歌浏览器也没有给出任何警告。

我设法卸载它。但是我仍然在某些购物网站上看到“查找产品”按钮，但我没有看到任何结果。

现在，在我安装未知软件的最后几天出现了这种情况。

我认为谷歌浏览器容易受到这种间谍软件/垃圾邮件的攻击。甚至不知道是什么

任何人都看过这个并且知道如何卸载它。它不会出现在扩展中。我只有少数扩展

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:49:12.660

经过大量研究，在查看了所有安装的程序和“ToFind”的扩展后，基本上没有在网上找到任何结果.. 并且如上所述从 Chrome 中删除了所有搜索引擎（谷歌除外），我仍然得到烦人的浮动在所有 http 页面上搜索 thingee。

继续查看搜索设置指向的站点 tofind.info，其中显示了更多信息：“...“查找”功能由浏览器插件添加，可直接使用“查找” ” 附加组件或合作伙伴将其附加组件与“查找”功能结合到其附加组件中，作为其功能的补充。”

现在我很确定这与我拥有的扩展有关，这些扩展可能与此服务捆绑在一起。

一旦我做到这一点，我很快就可以通过禁用和启用扩展来查明它......对我来说，它是我需要禁用和删除该图标。问题是，我有这个扩展很长时间了，但是最近这个搜索出现了..所以它有点烦人，并且揭示了 Chrome 对其扩展的控制中的一些弱点，它没有告诉用户有什么更改（如 android 或 iphone 应用程序）。

无论如何，希望它有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T05:58:56.757

我刚刚在 Chrome 设置中管理我的搜索引擎，并从我的默认搜索引擎中删除了 Live Search、Yahoo 和 Ask.com，并且“toFind”按钮消失了。

每一个我都没有检查，所以我不知道哪个是罪魁祸首。

我离开了必应和谷歌。

你可以在这里找到它们：chrome://settings/searchEngines

# android - 如何在 Android 设置菜单中添加返回按钮

> ID：15369493
> 
> 赞同：0
> 
> 时间：2013-03-12T18:42:03.630
> 
> 标签：android, settings, back-button

我的主要活动中有一个按钮，可以将我发送到手机位置设置。问题是，当我按下后退按钮时，它会将我发送到 Android 主屏幕，而不是在我的应用程序主 Activity 中。由于我无权访问设置 Activity 如何添加公共 void onBackPressed()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:46:25.680

您可以覆盖 onBackPressed() 方法并将意图设置为您的主要活动。然后按此按钮将始终将您带到主要活动：

```
@Override
public void onBackPressed() {
   Log.d("CDA", "onBackPressed Called");
   Intent intent = new Intent(this, MainActivity.class);
   intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
   startActivity(intent);
} 
```

# r - R SNA 的 Tnet 问题

> ID：15369495
> 
> 赞同：0
> 
> 时间：2013-03-12T18:42:10.413
> 
> 标签：r, igraph, sna

我在 R 中遇到了两个关于 tnet 函数的意外错误。我的边缘列表：

```
Person    Event
1 a

2 b

3 c

edgelist <- as.matrix("file.csv")
edgelist_in_igraph <- graph.edgelist(edgelist)
edgelist_in_tnet <- as.tnet(edgeist_in_igraph)

cluster_coefficients <- clustering_local_tm(edgelist_in_tnet)

> error: "max not meaningful for factors" 
```

如果我尝试使其成为一种模式：

```
onemode <- projecting_tm(tnet, method="Newman") 

>error: "arguments must have same length" 
```

有任何想法吗？如果这里有人以前使用过 tnet，那么任何示例都会非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:45:10.443

也许这是一个误解，但

```
edgelist <- as.matrix("file.csv") 
```

没有意义。`as.matrix`将 R 对象转换为矩阵，它无法从文件中读取数据。我想你想要的可能是

```
edgelist <- read.csv("file.csv") 
```

接着

```
edgelist_in_igraph <- graph.data.frame(edgelist) 
```

# vim - 如何使用 vim-fugitive 查看任何提交的 git diff？

> ID：15369499
> 
> 赞同：54
> 
> 时间：2013-03-12T18:42:19.057
> 
> 标签：vim, git-diff, vimdiff, vim-fugitive

vim-fugitive 并排 git diff 非常适合查看未暂存文件的差异。

我如何使用 vim-fugitive 来 git diff

*   暂存文件？
*   任何 git 修订版？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-03-12T19:44:55.363

当前文件和索引之间的差异

```
:Gdiff :0 
```

当前文件与其他一些[修订]之间的差异

```
:Gdiff [revision] 
```

当前文件与 3 次提交前的当前文件之间的差异：

```
:Gdiff ~3 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2015-03-07T16:16:20.077

您可以使用`:Glog`获取当前文件的历史更改。您可以使用`:cnext`或`:cprevious`在更改之间移动。当您点击要比较的版本时，您可以使用`:Gdiff`. 您可以退出 vimdiff 关闭缓冲区`:q`并使用 退出历史日志`:Gedit`。

这是我的 .vimrc 键盘配置：

```
 nnoremap <leader>gs :Gstatus<CR>
  nnoremap <leader>gc :Gcommit -v -q<CR>
  nnoremap <leader>ga :Gcommit --amend<CR>
  nnoremap <leader>gt :Gcommit -v -q %<CR>
  nnoremap <leader>gd :Gdiff<CR>
  nnoremap <leader>ge :Gedit<CR>
  nnoremap <leader>gr :Gread<CR>
  nnoremap <leader>gw :Gwrite<CR><CR>
  nnoremap <leader>gl :silent! Glog<CR>
  nnoremap <leader>gp :Ggrep<Space>
  nnoremap <leader>gm :Gmove<Space>
  nnoremap <leader>gb :Git branch<Space>
  nnoremap <leader>go :Git checkout<Space>
  nnoremap <leader>gps :Dispatch! git push<CR>
  nnoremap <leader>gpl :Dispatch! git pull<CR> 
```

我推荐`unimpaired.vim`Tim Pope 的插件。

使用该配置，我的工作流程是：

`<Leader>gl`查看历史

`]q`并`[q`在版本之间移动 (unimpaired.vim)

`<Leader>gd`打开`diff`

`:q`结束`diff`

`<Leader>ge`返回我的工作副本。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-01-12T06:57:18.687

添加到上面的答案：

如果您想从另一个分支获取特定文件的差异

```
Gdiff branch_name:path/to/dir/filename.txt 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-13T08:18:44.877

`:Glog --`如果使用or `:Glog -- %`（对于当前文件），我只是以查看差异的方式放在这里：

1.  `:Glog --`
2.  `:cw`打开提交列表
3.  导航到提交并显示其信息以及受影响的文件
4.  专注于文件路径
5.  `<c-w>gf`差异在新标签中打开
6.  `:tabclose`只需关闭选项卡并获取差异之前的先前状态

# cocos2d-iphone - 如何在 UIGestureRecogniser Cocos2d 中反转 Y 轴

> ID：15369500
> 
> 赞同：0
> 
> 时间：2013-03-12T18:42:21.597
> 
> 标签：cocos2d-iphone, uigesturerecognizer

我有以下代码：

```
- (void)panning:(UIPanGestureRecognizer *)recognizer {

CGPoint position;
//CGPoint velocity;
//velocity = [recognizer velocityInView:[CCDirector sharedDirector].view];

switch( recognizer.state ) {
    case UIGestureRecognizerStatePossible:
        break;

    case UIGestureRecognizerStateBegan:
    {
        position = [recognizer locationInView:[CCDirector sharedDirector].view];

        for (CCSprite *sprite in movableSprites) {
            if (CGRectContainsPoint(sprite.boundingBox, position)) {
                selSprite = sprite;
                break;
            }
        }
        break;
    }
    case UIGestureRecognizerStateChanged:
    {
        position = [recognizer locationInView:[CCDirector sharedDirector].view];
        CGPoint yInvertedPosition = CGPointMake(position.x, -position.y);
        [selSprite setPosition:position];
        break;
    }
    case UIGestureRecognizerStateFailed:
        break;

    case UIGestureRecognizerStateEnded:
        break;

    case UIGestureRecognizerStateCancelled:
        break;
} 
```

}

当我拖动一个精灵时，它在 X 轴上移动正常，但它在 Y 轴上倒置。

我怎样才能转换它？

```
 CGPoint yInvertedPosition = CGPointMake(position.x, -position.y); 
```

这不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T03:42:09.360

您只需要将您的位置转换为 GL 坐标。

```
case UIGestureRecognizerStateBegan:
{
    position = [recognizer locationInView:[CCDirector sharedDirector].view];
    position = [[CCDirector sharedDirector] convertToGL:position];

    for (CCSprite *sprite in movableSprites) {
        if (CGRectContainsPoint(sprite.boundingBox, position)) {
            selSprite = sprite;
            break;
        }
    }
    break;
}
case UIGestureRecognizerStateChanged:
{
    position = [recognizer locationInView:[CCDirector sharedDirector].view];
    position = [[CCDirector sharedDirector] convertToGL:position];
    [selSprite setPosition:position];
    break;
} 
```

# java - Java - 发送完整的 HTTP 消息（包括标头、状态行）

> ID：15369501
> 
> 赞同：0
> 
> 时间：2013-03-12T18:42:23.317
> 
> 标签：java, http

由于某些原因，我需要开发自己的 HTTP 客户端。我设法使用 HTTP 协议，但我不知道如何通过 java 发送它......

例如，我收到了以下我想要发送的请求消息（我无法测试它，所以我不确定它的格式是否正确）：

```
GET http://example.com HTTP/1.1
Transfer-Encoding:UTF-8
someOtherParam=thatIsThis&name=value 
```

我所能找到的只是使用 URL.openConnection() 建立一个连接 - 但是通过该连接，我无法发送整个消息，而是必须通过 connection.addRequestProperty() 方法放置标头值。

谁能帮助我并告诉我如何将这样的消息发送到服务器？

（是的；我确实知道像 Apache HttpComponents 这样的库 :)）

最好的问候，

马丁鲍里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:14:28.543

感谢您的帮助 - 套接字做到了:)。

对于遇到相同问题的任何人：使用套接字 - 您可以简单地编写和接收消息并实现自己的 HTTP 实现。

# javascript - 为什么除了 1 条路由之外的所有路由都在使用主干路由器

> ID：15369503
> 
> 赞同：0
> 
> 时间：2013-03-12T18:42:42.220
> 
> 标签：javascript, backbone.js, router

在下面的脚本中是使用 Backbone.js 构建的各种路由和视图和路由事件为什么会这样，除了最后一个“产品”之外，所有路由都按我的预期工作。

我最初将它作为一个非常不同的功能，但意识到它并没有启动，但即使不是其他视图和路线的副本，它仍然无法工作。

有人知道为什么吗？谢谢！

我对 Backbone 也很陌生。富有的

```
<!doctype html>
    <html>
        <head>
            <title>Undie Couture by Lauren Copeland</title>
            <link type="text/css" rel="stylesheet" href="/assets/css/museosans_500_macroman/stylesheet.css" />
            <link type="text/css" rel="stylesheet" href="/assets/css/bootstrap/bootstrap.css" />
            <link type="text/css" rel="stylesheet" href="/assets/css/site/front-styles.css" />
        </head>
        <body>
            <div id="wrapper">
                <div class="content">
                    <header>
                        <div class="container">
                            <div id="logo"></div>
                            <nav>
                                <ul>
                                    <li><a href="/#/products/">shop</a></li>
                                    <li><a href="/#/contact">contact</a></li>
                                    <li><a href="/#/about">about</a></li>
                                    <li><a href="/#/wholesale">wholesale</a></li>
                                </nav>
                            </nav>
                        </div>
                    </header>
                    <div class="container">
                        <div class="page" id="first" style="display:none;"></div>
                        <div class="page"></div>
                    </div>
                </div>
            </div>
        </body>
        <script type="text/template" id="title-temp">
            <%= title %>
        </script>
        <script type="text/template" id="logo-temp">
            <a href="/#/home" id="logo"><img src="/assets/img/logo-strip.png" /></a>
        </script>
        <script type="text/template" id="home-temp">
            <%= title %>
        </script>
        <script type="text/template" id="page-temp">
            <h1><%= page.pluck('title') %></h1>
            <div id="body">
               <%= page.pluck('body') %>
            </div>
        </script>
        <script type="text/template" id="product-temp">
            <h1><%= page.pluck('name') %></h1>
            <div id="body">
                <%= page.pluck('description') %>
            </div>
        </script>

        <script type="text/javascript" src="/assets/js/libs/jquery/jquery.js">    </script>
        <script type="text/javascript" src="/assets/js/libs/underscore/underscore.js"></script>
        <script type="text/javascript" src="/assets/js/libs/backbone/backbone-min.js"></script>
        <script type="text/javascript" src="/assets/js/libs/bootstrap/bootstrap.js"></script>

<script type = "text/javascript">

var Router = Backbone.Router.extend({
    routes: {
        "home": "home",
        "about": "about",
        "contact": "contact",
        "wholesale": "wholesale",
        "products": "products"
    }
});
var Page = Backbone.Model.extend({
    initialize: function() {
        console.log('Page model loaded');
    },
    defaults: {
        "id": "",
        "title": "",
        "body": "",
        "slug": ""
    },
    urlRoot: '/backbone/page'
});

var Pages = Backbone.Collection.extend({
    initialize: function() {
        console.log('pages collection loaded');
    },
    url: '/backbone/page'
});

var HomeView = Backbone.View.extend({
    template: $('#standard').html(),
    el: '.page:first',
    change: function() {
        $('.page').fadeOut('slow');
    },
    render: function() {
        logo = $('#logo-temp').html();
        $('#logo').html(logo);
        $('.content').attr('id', 'home');
        var that = this;
        that.change();
        compiled = _.template($('#home-temp').html(), {
            title: ''
        });
        that.$el.html(compiled);
    }
});

var AboutView = Backbone.View.extend({
    template: $('#standard').html(),
    el: '.page:first',
    change: function() {},
    render: function() {
        console.log('render')
        var that = this;
        logo = $('#logo-temp').html();
        $('#logo').html(logo);
        $('.content').attr('id', 'about');
        aboutPage = new Pages();
        aboutPage.fetch({
            data: {
                id: 3
            },
            success: function() {
                $('#first').fadeOut({
                    duration: 400,
                    complete: function() {
                        console.log(aboutPage.models)
                        compiled = _.template($('#page-temp').html(), {
                            page: aboutPage
                        });
                        that.$el.html(compiled).delay(300).fadeIn();
                    }
                });
            }
        });
    }
});

var ContactView = Backbone.View.extend({
    template: $('#standard').html(),
    el: '.page:first',
    change: function() {
        $('.page').fadeOut();
    },
    render: function() {
        var that = this;
        logo = $('#logo-temp').html();
        $('#logo').html(logo);
        $('.content').attr('id', 'contact');
        contactPage = new Pages();
        contactPage.fetch({
            data: {
                id: 2
            },
            success: function() {
                $('#first').fadeOut({
                    duration: 400,
                    complete: function() {
                        console.log(contactPage.models)
                        compiled = _.template($('#page-temp').html(), {
                            page: contactPage
                        });
                        that.$el.html(compiled).delay(300).fadeIn();
                    }
                });
            }
        });
    }
});

var WholesaleView = Backbone.View.extend({
    template: $('#standard').html(),
    el: '.page:first',
    change: function() {},
    render: function() {
        console.log('render')
        var that = this;
        logo = $('#logo-temp').html();
        $('#logo').html(logo);
        $('.content').attr('id', 'about');
        wholePage = new Pages();
        wholePage.fetch({
            data: {
                id: 4
            },
            success: function() {
                $('#first').fadeOut({
                    duration: 400,
                    complete: function() {
                        console.log(wholePage.models)
                        compiled = _.template($('#page-temp').html(), {
                            page: wholePage
                        });
                        that.$el.html(compiled).delay(300).fadeIn();
                    }
                });
            }
        });
    }
});

var ProductView = Backbone.View.extend({
    template: $('#standard').html(),
    el: '.page:first',
    change: function() {},
    render: function() {
        var that = this;
        logo = $('#logo-temp').html();
        $('#logo').html(logo);
        $('.content').attr('id', 'about');
        wholePage = new Pages();
        wholePage.fetch({
            data: {
                id: 4
            },
            success: function() {
                $('#first').fadeOut({
                    duration: 400,
                    complete: function() {
                        console.log(wholePage.models)
                        compiled = _.template($('#page-temp').html(), {
                            page: wholePage
                        });
                        that.$el.html(compiled).delay(300).fadeIn();
                    }
                });
            }
        });
    }
});

var router = new Router();

var page_model = new Page();

var page_col = new Pages();

var home = new HomeView();

var about = new AboutView();

var contact = new ContactView();

var wholesale = new WholesaleView();

var products = new ProductView();

router.on('route:home', function() {
    home.render();
});

router.on('route:about', function() {
    about.render();
});

router.on('route:contact', function() {
    contact.render();
});

router.on('route:wholesale', function() {
    wholesale.render();
});

router.on('route:products', function() {
    products.render();
});

Backbone.history.start(); 
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T20:04:05.820

您的商店锚标签有一个尾随 /

```
<a href="/#/products/"> 
```

应该

```
<a href="/#/products"> 
```

删除它使路线对我有用。

# c++ - 指向 std::vector 的指针

> ID：15369504
> 
> 赞同：0
> 
> 时间：2013-03-12T18:42:42.927
> 
> 标签：c++, vector, std

所以这是我遇到的问题。

我有一个指向 std::vector 的指针。所以在我初始化指针之后，我不会向向量中添加任何项目，也不会删除任何项目。但是，在我的代码中的某个点，我的 std::vector 移动了位置，最后我得到了一个悬空指针。这似乎是随机发生的，即使我在制作指针后从未接触过矢量

我花了一段时间调试这个，才能解决这个问题。有没有办法保证我的 std::vector 不会改变内存位置？或者有一个指向向量的指针只是一个坏主意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:46:56.140

> 或者有一个指向向量的指针只是一个坏主意？

一般来说，我会说使用原始指针来控制对象的生命周期是一个坏主意。不要使用原始指针和自动内存管理，尝试使用具有适当所有权语义（`std::shared_ptr<>`或`std::unique_ptr<>`）的智能指针。仅将原始指针用于观察指针（如果您希望能够在运行时验证它们是否悬空，请使用`weak_ptr<>`）。

此外，在许多情况下，您可能会意识到根本不需要指针。在这种情况下，只需使用具有自动存储功能的对象，由于移动语义，它可以在 C++11 中有效地移动或按值传递/返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T18:47:27.367

> 这似乎是随机发生的

不，它没有。只要它保持在范围内，它就具有相同的地址。可能发生的情况是向量超出范围，并且由于它是自动分配的（听起来像），它当时正在被销毁。您可以做的是在堆上分配向量（例如`int`s）：

```
std::vector<int>* pv = new std::vector<int>(); 
```

那么你就不会有这个问题了。但是，您必须记住`delete`使用

```
delete vp; 
```

before`pv`超出范围，否则您将遇到内存泄漏。

# java - -Xlint:all 和 maven 的问题

> ID：15369505
> 
> 赞同：5
> 
> 时间：2013-03-12T18:42:46.077
> 
> 标签：java, maven, javac, lint

我正在尝试让 Maven 输出棉绒级别警告。我创建了一个小型测试程序，它应该生成一个关于在非静态上下文中使用静态方法的警告，但是尽管有许多不同的插件配置选项，构建总是成功而没有任何警告！

在进行了一些谷歌搜索之后，我发现了使用编译器插件的“compilerArgument(s)”属性的建议，但这似乎对我也不起作用。

这是我应该生成警告的示例程序：

```
package com.dahlgren;

    /**
     * Test space
     *
     */
    public class App {
        public static void main( String[] args ) {
            String foo = "foo";
            // I want this to generate a compilation warning
            System.out.println(foo.format("blah"));
        }
    } 
```

该程序应发出警告，因为 Java 6 String::format 的[javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)表明仅存在此方法的静态版本。我想特别抓住这个案例，因为它过去曾咬过我，编译器应该检测到它:-)

这是我的pom文件：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>com.dahlgren</groupId>
  <artifactId>JavaScratchSpace</artifactId>
  <version>1.0-SNAPSHOT</version>
  <packaging>jar</packaging>

  <name>JavaScratchSpace</name>
  <url>http://maven.apache.org</url>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>

    <build>
        <plugins>
            <plugin>  
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>  
                <version>3.0</version>
                <configuration>  
                    <source>1.6</source>  
                    <target>1.6</target>  
                    <compilerArgument>-Xlint:all</compilerArgument>
                    <!--
                    <compilerArguments>
                        <Xlint:all />
                    </compilerArguments>
                    -->
                    <showWarnings>true</showWarnings>
                    <showDeprecation>true</showDeprecation>
                </configuration>  
            </plugin>  
            <plugin>
                <artifactId>maven-assembly-plugin</artifactId>
                <configuration>
                    <descriptorRefs>
                        <descriptorRef>jar-with-dependencies</descriptorRef>
                    </descriptorRefs>
                    <archive>
                        <manifest>
                            <mainClass>com.dahlgren.App</mainClass>
                        </manifest>
                    </archive>
                </configuration>
                <executions>
                    <execution>
                        <phase>package</phase>
                        <goals>
                            <goal>single</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project> 
```

我尝试了两种形式的 compilerArgument(s) 属性均无济于事。

运行`mvn clean compile`产生以下输出：

```
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building JavaScratchSpace 1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-clean-plugin:2.3:clean (default-clean) @ JavaScratchSpace ---
[INFO] Deleting file set: /work/fun/JavaScratchSpace/target (included: [**], excluded: [])
[INFO] 
[INFO] --- maven-resources-plugin:2.3:resources (default-resources) @ JavaScratchSpace ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /work/fun/JavaScratchSpace/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.0:compile (default-compile) @ JavaScratchSpace ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 1 source file to /work/fun/JavaScratchSpace/target/classes
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 2.716s
[INFO] Finished at: Tue Mar 12 11:39:21 PDT 2013
[INFO] Final Memory: 8M/150M
[INFO] ------------------------------------------------------------------------ 
```

附加版本信息：

```
$ mvn --version && javac -version
Apache Maven 3.0.4
Maven home: /usr/share/maven
Java version: 1.6.0_24, vendor: Sun Microsystems Inc.
Java home: /usr/lib/jvm/java-6-openjdk-amd64/jre
Default locale: en_US, platform encoding: UTF-8
OS name: "linux", version: "3.2.0-29-generic", arch: "amd64", family: "unix"
javac 1.6.0_24 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T19:42:14.717

这与您的消息来源“对我有用”。

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>com.buck</groupId>
  <artifactId>mavenproject3</artifactId>
  <version>1.0-SNAPSHOT</version>
  <packaging>jar</packaging>

  <name>mavenproject3</name>
  <url>http://maven.apache.org</url>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>

  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>3.8.1</version>
      <scope>test</scope>
    </dependency>
  </dependencies>

  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>3.0</version>
        <configuration>
          <source>1.6</source>
          <target>1.6</target>
          <compilerArgument>-Xlint:all</compilerArgument>
          <showWarnings>true</showWarnings>
          <showDeprecation>true</showDeprecation>
        </configuration>
      </plugin>
    </plugins>
  </build>
</project> 
```

我想你注释掉尝试的原因

```
 <compilerArguments>
                    <Xlint:all />
                </compilerArguments> 
```

由于“all”标签将落入的XML命名空间“Xlint”而失败，这意味着maven配置解析器甚至可能没有看到整个标签“Xlint：all”（位于不同的命名空间和所有）。

顺便说一下输出的相关行

```
Compiling 1 source file to C:\Users\edwbuck\Documents\NetBeansProjects\mavenproject3\target\classes
bootstrap class path not set in conjunction with -source 1.6
com/buck/mavenproject3/App.java:[12,35] static method should be qualified by type name, java.lang.String, instead of by an expression 
```

和我的环境

```
Apache Maven 3.0.4 (r1232337; 2012-01-17 02:44:56-0600)
Maven home: C:\Program Files\NetBeans 7.2.1\java\maven
Java version: 1.7.0_07, vendor: Oracle Corporation
Java home: C:\Program Files (x86)\Java\jdk1.7.0_07\jre
Default locale: en_US, platform encoding: Cp1252
OS name: "windows 7", version: "6.1", arch: "x86", family: "windows" 
```

也许您踩到了特定于平台的错误？

# html - Div 内的中心图像（垂直和水平）

> ID：15369506
> 
> 赞同：0
> 
> 时间：2013-03-12T18:42:49.400
> 
> 标签：html, css

我有一个容器 div，我想在其中显示一个图像。图像将是动态的。它的尺寸可能大于/小于 div 的尺寸。我想在这个 div 中显示整个图像，居中（水平和垂直）。我怎么做？

我读过几个类似的问题，比如[这个](https://stackoverflow.com/questions/388180/how-to-make-an-image-center-vertically-horizontally-inside-a-bigger-div)。但他们中的大多数人都在谈论如何做到这一点，因为图像尺寸是已知的。另外，我有水平居中工作，边距设置为自动。

* * *

编辑：到目前为止添加我的 css 样式，画廊容器是更大的 div，而照片容器是环绕图像的容器。

```
 /* Gallery */
    #gallery-container { 
        position:absolute; 
        overflow:hidden;
        width:100%; 
        height:100%; 
        top:0; 
        left:0; 
        display:none; 
        z-index:100; 
        text-align: center;
   }

   #gallery-container .gallery-photo-container{
       position: relative;
       width:80%; 
       height:100%;
       margin: auto auto;
   }

   #gallery-container img{
       position: relative;
       max-width:100%; 
       max-height:100%;
   } 
```

# jquery - 选中复选框时jQuery突出显示div

> ID：15369507
> 
> 赞同：1
> 
> 时间：2013-03-12T18:42:51.927
> 
> 标签：jquery

我有一个包含几个部分的页面，每个部分都有一个相应的复选框。当一个复选框被选中时，我想突出显示包含的 div（并让颜色逐渐消失）。取消选中复选框时，不应突出显示。我有两个问题：让 jQuery 突出显示 div 的最佳方式是什么？如何触发仅选中复选框而不是取消选中的突出显示？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T18:55:36.173

重新发明轮子没有意义，因此对于高亮效果，请使用[http://docs.jquery.com/UI/Effects/Highlight](http://docs.jquery.com/UI/Effects/Highlight)（这将使您的生活更轻松）。

然而，为了检查复选框的状态，使用[`.prop()`](http://api.jquery.com/prop/),`.is(':checked')`也是有效的。

JAVASCRIPT：

```
$(document).ready(function(){
    $('input[name="checkbox"]').click(function(){
        if($(this).prop('checked'))
           $('div').eq($(this).parent().index()).effect("highlight", {}, 1000); 
    });
}); 
```

演示：http: [//jsfiddle.net/dirtyd77/gmPtY/2/](http://jsfiddle.net/dirtyd77/gmPtY/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:46:36.537

就像是：

```
$(':checkbox').click(function() {
    if ($(this).is(':checked')) {
        $(this).closest('.parent-class').addClass('highlight');
    }
} 
```

# c# - 动态构建超链接，但还需要执行其他操作

> ID：15369510
> 
> 赞同：-1
> 
> 时间：2013-03-12T18:43:06.060
> 
> 标签：c#, asp.net, asp.net-4.0

我正在通过存储过程调用在我的 asp.net 网页（弹出）上填充一个转发器。我有一个专栏，我需要根据动态调用对原始 Web 表单的查询的值来构建超链接。但是，我遇到的麻烦是，当我单击链接时，我还需要检索一些其他数据并将这些数据插入到视图状态中。

我调用的“GetListOfValues”函数显然不能按照我的编码方式工作。有没有办法做到这一点，甚至可能比我试图做到的更好？

这是我的例子：

默认.aspx

```
<asp:Repeater ID="rptReport" runat="server">
        <HeaderTemplate>
            <table>
                <tr>
                    <td>Name</td>
                    <td>ID</td>
                    <td>Value1</td>
                    <td>Value2</td>
                </tr>
        </HeaderTemplate>
        <ItemTemplate>
                <tr>
                    <td><%# DataBinder.Eval(Container.DataItem,"Name") %></td>
                    <td><%# DataBinder.Eval(Container.DataItem,"ID") %></td>
                    <td><%# DataBinder.Eval(Container.DataItem,"Value1") %></td>
                    <td><%# GetValueTwoLink(Eval("Name"),Eval("Value2") %></td>
                </tr>
        </ItemTemplate>
        <FooterTemplate>
                 <tr>
                     <%--This area holds totals for columns--%>
                 </tr>
            </table>
        </FooterTemplate>
    </asp:Repeater> 
```

默认.aspx.cs

```
 protected string GetValueTwoLink(object name, object value2)
    {
        ViewState["ListOfValues"] = datalayer.GetListOfValues(name, value2);

        return string.Format(
            "<a href=\"#\" onlick=\"window.opener.ViewValues('{0}')\">{1}</a>",
            name,
            Convert.ToInt32(value2).ToString("d"));

    } 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T00:42:25.523

不完全确定您要使用该 onclick 做什么......但您可以在代码前端执行此操作：

```
 <ItemTemplate>
     <tr>
         <td><%# Eval("Name") %></td>
         <td><%# Eval("ID") %></td>
         <td><%# Eval("Value1") %></td>
         <td>
             <a href="#" 
                 onclick="<%# String.Format("window.opener.ViewValues('{0}')", DataBinder.Eval(Container.DataItem,"Name")) %>">
                 <%# Convert.ToInt32(DataBinder.Eval(Container.DataItem, "Value2")).ToString("d")%>
             </a>
         </td>
     </tr>
 </ItemTemplate> 
```

此外，如您所见，您可以使用

```
<%# Eval("Name") %> 
```

代替

```
<%# DataBinder.Eval(Container.DataItem,"Name") %> 
```

只显示数据。`DataBinder.Eval`当您需要进行一些操作时，您会使用4th `<td>`。

# assembly - 将汇编语言宏转换为普通汇编语言

> ID：15369514
> 
> 赞同：1
> 
> 时间：2013-03-12T18:43:17.240
> 
> 标签：assembly, macros, masm

在 MASM 中，是否可以将宏指令转换为相应的汇编语言指令？我想将 MASM 的宏指令转换为普通的汇编语言指令，这样我就可以看到宏实际上是如何工作的。

例如，我想将这些宏指令转换为相应的汇编语言指令（不带宏）：

```
.if(x > 5)
    mov eax, x
.else
    mov ebx, x
.endif 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:04:54.187

我打算建议像[500-InternalServerError](https://stackoverflow.com/users/448932/500-internal-server-error)提议的那样“生成列表”，但在验证之后，这将不起作用 - 该列表仅包含您的说明，而不包含 MASM 生成的说明。起作用的是以下内容：

1）用调试信息组装：

```
ml /c /Zi file.asm 
```

2）用`dumpbin`（或其他反汇编程序）反汇编：

```
dumpbin /disasm file.obj 
```

对于上面的示例，它产生：

```
$$000000:
  00000000: 83 3D 00 00 00 00  cmp         dword ptr [x],5
            05
  00000007: 76 04              jbe         @C0001
  00000009: 8B C2              mov         eax,edx
  0000000B: EB 02              jmp         @C0003
@C0001:
  0000000D: 8B DA              mov         ebx,edx 
```

# ruby-on-rails - Uid 已经被 ruby 占用了？

> ID：15369519
> 
> 赞同：0
> 
> 时间：2013-03-12T18:43:31.977
> 
> 标签：ruby-on-rails, devise

我是 ruby​​ on rails 的新手。我已经在 linode 上部署了 ruby​​ 站点（catarse）。当我使用普通方法或 aAuth （即 facebook 登录）进行第一次注册时，它会创建帐户。但是当我尝试创建另一个帐户时，我收到错误' **Uid 已被占用？**' 有人知道这个错误吗？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:23:07.627

这表明您正在尝试使用系统中已存在的 UID 创建新用户。最好的起点是查找您的第一个创建用户的 UID - 它可能不是您所期望的（可能是 nil，可能是一些错误代码）。要解决此问题，您需要找出导致 UID 设置不正确的原因，并在您的用户创建方法中调整该代码。

# ms-access - 查询中嵌套 IIf( ) 表达式的计算结果错误

> ID：15369525
> 
> 赞同：1
> 
> 时间：2013-03-12T18:43:41.413
> 
> 标签：ms-access, iif

我正在尝试根据记录分类到三组之一来执行计算。所以，如果a，那么x；否则，如果 b，则 y；否则，如果 c，则 z。这就是我正在尝试的：

```
Field:IIf([Rating]<6, 
DateAdd("m",3,[Rating/Comments Date]), 
IIf(5<[Rating]<8, 
    DateAdd("m",6,[Rating/Comments Date]), 
    DateAdd("y",1,[Rating/Comments Date]))) 
```

知道为什么返回“#error”而不是计算的 DateAdd 结果吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:41:45.503

年份是`yyyy`（[http://office.microsoft.com/en-ie/access-help/dateadd-function-HA001228810.aspx](http://office.microsoft.com/en-ie/access-help/dateadd-function-HA001228810.aspx)）

如何简化：

```
Field:IIf([Rating]<6, 
DateAdd("m",3,[Rating/Comments Date]), 
IIf([Rating]>8, DateAdd("yyyy",1,[Rating/Comments Date]),
    DateAdd("m",6,[Rating/Comments Date]))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:33:37.553

尝试将您的`5<[Rating]<8`段更改为`[Rating] BETWEEN 6 AND 7`.

# python - 在 QStandardItem 中重载了“<”运算符，但它没有被调用

> ID：15369528
> 
> 赞同：1
> 
> 时间：2013-03-12T18:43:43.720
> 
> 标签：python, qt, pyqt, operator-overloading, pyside

我有一个带有 a 的用户界面`QTableView`，它反过来使用`QStandardItemModel`它的数据。因为我的一些数据是数字的，所以我将其子类化`QStandardItem`以实现我自己的比较。根据文档，我只需要覆盖`"<"`运算符（`__lt__(...)`函数）。但是，当我单击表视图中的列标题时，排序不会正确发生。我的模型“填充物”非常简单：

```
self.model.removeRows(0, self.model.rowCount())
for i in range(0, len(self.mainFlatList)):
   self.model.setItem(i, 0, QStandardItem(self.mainFlatList[str(i)]["ID"]))
   self.model.setItem(i, 1, QStandardItem(self.mainFlatList[str(i)]["type"]))
   self.model.setItem(i, 2, QStandardItem(self.mainFlatList[str(i)]["string1"]))
   self.model.setItem(i, 3, QStandardItem(self.mainFlatList[str(i)]["string2"]))
   self.model.setItem(i, 4, QStandardItem(self.mainFlatList[str(i)]["timeva1"]))
   self.model.setItem(i, 5, QStandardItem(self.mainFlatList[str(i)]["timeval2"]))
   currentOPTimePercent = (float(self.mainFlatList[str(i)]["timeval1"])/self.totalTime) * 100
   self.mainFlatList[str(i)]["timePercent"] = currentOPTimePercent
   self.model.setItem(i, 6, MQStandardItem(str(self.mainFlatList[str(i)]["timePercent"]))) 
```

哪里`MQStandardItem`简单：

```
class MQStandardItem(QStandardItem):
def __init__(self, value):
    print "NumericalStandardItem", value
    QStandardItem.__init__(self, value)

def __lt__(self, obj):
    print "Sorting!"
    try:
        return float(self.text()) < float(obj.text())
    except:
        pass

    # Fallback to use standard __lt__
    return self.text() < obj.text() 
```

关于为什么这可能会失败的任何想法？我还应该注意，`__lt__(...)`函数中的 print 语句甚至没有被打印出来，这让我怀疑我是否正确地覆盖了事情。如果有帮助，这就是我构建 UI 的方式：

```
 self.model = QStandardItemModel(numRows,numColumns)
    self.model.setHorizontalHeaderItem(0, QStandardItem("ID"))
    self.model.setHorizontalHeaderItem(1, QStandardItem("Type"))
    self.model.setHorizontalHeaderItem(2, QStandardItem("string1"))
    self.model.setHorizontalHeaderItem(3, QStandardItem("string2"))
    self.model.setHorizontalHeaderItem(4, QStandardItem("timeval1"))
    self.model.setHorizontalHeaderItem(5, QStandardItem("timeval2"))
    self.model.setHorizontalHeaderItem(6, QStandardItem("timePercent"))

    self.tableView = QTableView()
    self.tableView.setModel(self.model)
    self.tableView.setSortingEnabled(True)
    self.tableView.setSelectionMode(QAbstractItemView.SingleSelection)
    self.tableView.setSelectionBehavior(QAbstractItemView.SelectRows)
    self.tableView.selectionModel().currentChanged.connect(self.foo) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T01:30:23.217

好吧，看起来这是 Qt 的一个错误。有一个旧帖子询问这个问题：

[http://www.qtcentre.org/threads/46985-any-solution-to-QtableView-sorting](http://www.qtcentre.org/threads/46985-any-solution-to-QtableView-sorting)

在查看 QTableView 类的源代码时，似乎仍然没有建立视图和模型之间的连接，至少从以下方面来看：

[http://qt.gitorious.org/qt/qt-gberg/blobs/90cdbf8bd409652fd1e28adcd7f02fc1fae2c1c0/src/gui/itemviews/qtableview.cpp](http://qt.gitorious.org/qt/qt-gberg/blobs/90cdbf8bd409652fd1e28adcd7f02fc1fae2c1c0/src/gui/itemviews/qtableview.cpp) （第2280行）

和

[http://qt.gitorious.org/qt/qt/blobs/85f42777111060037476895ed08ded513d44a048/src/gui/itemviews/qstandarditemmodel.cpp](http://qt.gitorious.org/qt/qt/blobs/85f42777111060037476895ed08ded513d44a048/src/gui/itemviews/qstandarditemmodel.cpp) （第247行）

解决方法是使用 QTreeWidget，并且仍然滚动您自己的 QTreeWidgetItem 类进行排序。这工作得很好。

# javascript - 需要获取可拖动 div 的位置

> ID：15369531
> 
> 赞同：0
> 
> 时间：2013-03-12T18:43:48.803
> 
> 标签：javascript, jquery

我有一个可拖动的 div，我想要做的是能够在拖动 div 并提交 from 后捕获页面上 div 的位置。

我计划在页面重新加载时的最后一个位置呈现该 div。

我现在的问题是，在我将 div 拖到页面上之后，如何捕捉我假设 div 所在位置的坐标或位置？

这是我的代码：

```
<script type="text/javascript">

$(document).ready(function()
{
    $("#filterItem").click(function() {
        $("#filterPanel").fadeToggle("slow", function() {
            toggleImg( 'filter' );
        });
        $(this).toggleClass("active");
        toggleImg( "filter" );
        return false;
    });
    $("#filterPanel").draggable({ snap: "#filterItem" });

    $("#mgmtViewHeaders [title]").tooltip();
});

function closeDraggablePanel( panelName, topPos)
{
    $("#"+panelName+"Panel").toggle("slow", function() {
        toggleImg( 'filter' );
        // Reposition to default
        $("#"+panelName+"Panel").css( "top", topPos);
        $("#"+panelName+"Panel").css( "left", "25");
    });

} 
```

HTML：

```
<c:set var="filterTop" value="150" scope="page"/>

<div id="filterDiv">
<ul class="sideMenu" style="top: ${filterTop}px;">
<li style="border-bottom: none;">
    <div id="filterItem" class="sideMenuDiv"><span><img src="../images/plus.gif" />&nbsp;Filters</span>
    </div>
</li>
</ul>
</div>

<%-- Y coordinate of the top edge of the filter panel. --%>
<c:set var="panelTop" value="${filterTop}" scope="page"/>

<div class="sideMenuPanel" style="display: none; width: 290px; top: ${panelTop}px;" id="filterPanel">
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:45:09.107

```
$.position() 
```

这将为您提供顶部和左侧坐标。

# meteor - 获取可爬取：phantomjs 由于权限被拒绝而失败

> ID：15369534
> 
> 赞同：3
> 
> 时间：2013-03-12T18:44:05.887
> 
> 标签：meteor

我捆绑了我的应用程序并将其放在我的服务器上。我正在通过新贵运行应用程序：

```
exec sudo -u myuser PORT=3005 MONGO_URL=mongodb://localhost:27017/ms ROOT_URL=http://www.example.com/ /usr/bin/node /var/www/priv/example.com/bundle/main.js >> $ 
```

重要的部分（我认为）是：

```
exec sudo -u myuser 
```

当我通过以下方式卷曲我的应用程序时：

```
curl http://www.example.com/?_escaped_fragment_= 
```

我得到一个空的身体。我的日志文件说：

```
spiderable: phantomjs failed: { [Error: Command failed: /bin/bash: /root/.bashrc: Permission denied
Can't open '/dev/stdin'
] killed: false, code: 255, signal: null }
stderr: /bin/bash: /root/.bashrc: Permission denied
Can't open '/dev/stdin' 
```

我在 /root/.bashrc 上做了 chmod 777 但没有任何成功。如果我`/bin/bash /root/.bashrc`以“myuser”的身份进行操作，我也会被拒绝许可。

谁能告诉我如何设置权限，以便 phantomjs 可以做它必须做的事情？我可以指定 ~/.bashrc 在任何地方使用吗？我真的很想在谷歌上看到我的东西 :-)

非常感谢！曼努埃尔

**更新**：

我通过 npm 安装了 phantom.js 1.8.2。以 root 身份运行应用程序没有帮助。那么错误是：

```
spiderable: phantomjs failed: { [Error: Command failed: Can't open '/dev/stdin' ] killed: false, code: 255, signal: null } stderr: Can't open '/dev/stdin' 
```

我发现，它似乎是导致问题的包。我在这里打开了一个问题： [github.com/alanning/meteor-roles/issues/3](http://github.com/alanning/meteor-roles/issues/3)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T18:34:25.143

Alanning 解决了这个问题，但 spiderable 仍然无法正常工作。解决方案是删除 phantomjs，因为我是通过 npm 安装的。然后我直接从[http://phantomjs.org/download.html](http://phantomjs.org/download.html)重新安装了它。现在它正在工作！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-11T11:18:17.727

我又发现了这个问题，问题是服务器端的发布，在某些情况下只是返回但没有停止订阅。

例如在服务器上我有一个出版物

```
return unless @userId 
```

正确的方法是：

```
return this.stop() unless @userId 
```

如果爬虫来了，它永远不会被验证，所以要小心正确地结束发布。

# c++ - c++ - 向整数数组添加新值

> ID：15369535
> 
> 赞同：0
> 
> 时间：2013-03-12T18:44:10.210
> 
> 标签：c++, arrays

在下面的代码中，我有一个对象数组 - tArray。
我试图找到总“num 股”、
calctotal 和 calcstring 数组协同工作以存储买方及其总价值的“买方名称”。

但是，我在运行时已经单步执行了代码，并且我的代码本质上是替换循环中小于当前“numshares”的值。这意味着即使刚刚被替换的买家再次出现，他的总数也开始了新的并且没有添加，这是我想要的。

我将如何更改此代码，以便在发现较大值时将较小的值进一步推入数组而不被替换？

谢谢-我必须遵守解决问题（作业）的这种“格式”，因此实现功能是目标，因此我可以进步。

因此，基本上第二个 if 语句是问题所在：

```
 for (int i = 0; i<nTransactions; i++)
{
    //compares with arrays
    for(int j =0; j<sSize; j++)
    {
        if(tArray[i].buyerName == calcString[j])
        {
        calcTotal[j] += tArray[i].numShares;
        break;
        }
        else{
                //checks if shares is great then current total then replaces
                if(tArray[i].numShares > calcTotal[j])
                {
                    calcTotal[j] = tArray[i].numShares;
                    calcString[j] = tArray[i].buyerName;
                    break;
                }
            }
    }
}
return calcString;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:55:47.687

似乎您正在尝试一次仅查看 1 笔交易的最大总数。您需要先汇总所有买家的总数。然后找到最高的 5 个总数是一件简单的事情。

# java - 上传后无法获取正确的文件路径

> ID：15369537
> 
> 赞同：-1
> 
> 时间：2013-03-12T18:44:15.447
> 
> 标签：java, url, web-applications, file-upload, struts2

我可以使用 struts2 框架在我的 webapp 中上传图片，但我无法理解路径。如何将图像的路径作为 URL 获取，以便我可以在`<img src="url"/>`.

这是我的动作类源代码，我在评论中提到了返回的 URL，但 URL 对我没有任何意义。如何将其解密为实际 URL？

```
public class AddItemAction extends ActionSupport implements
        ServletContextAware {

    @Override
    public void setServletContext(ServletContext arg0) {
        // TODO Auto-generated method stub

    }

    File pic;
    String picContentType;
    String picFileName;

    public File getPic() {
        return pic;
    }

    public void setPic(File pic) {
        this.pic = pic;
    }

    public String getPicContentType() {
        return picContentType;
    }

    void setPicContentType(String picContentType) {
        System.out.println("Setting conteent tuype" + picContentType);
        this.picContentType = picContentType;
    }

    public void setPicFileName(String picFileName) {
        this.picFileName = picFileName;
    }

    public String getPicFileName() {
        return picFileName;
    }

    public String execute() {
        File file = getPic();
        String strFinalFullPathFileName = file.getAbsolutePath() + File.separator + picFileName;
        System.out.println(strFinalFullPathFileName);

        // This is the path returned
        /*
         * /Users/..../Catalina/localhost/.../upload_584d2719_13d5fdf593d__8000_00000000.tmp/IMG_20120526_083438.jpg
         * 
         * 
         */

        return SUCCESS;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:54:08.407

上传的工件应存储*在*Web 应用程序结构之外。

另外，默认情况下，文件上传拦截器会删除上传过程中创建的临时文件。这应该被关闭，或者文件应该被复制到一个已知的位置，这样它们就可以（a）通过一个动作流回，或者（b）如果你将你的容器设置为在正常的网络结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:54:20.893

好像您正在将文件上传到临时文件夹，您应该做的是将此文件移动到您的网络应用程序内的文件夹中

你的情况下使用 request.getServletContext().getRealPath(YOUR_PATH) 来获取移动文件的路径

YOUR_PATH 类似于 "/uploadimage/img.png" => uploadimage 是直接在您的 webapp 中的文件夹

# visual-studio-2010 - 在VS2010中打开VS2012项目

> ID：15369539
> 
> 赞同：0
> 
> 时间：2013-03-12T18:44:19.493
> 
> 标签：visual-studio-2010, visual-studio-2012

我的公司只有 VS2010，但是我需要做一个在 VS2012 中创建的项目，有没有办法可以在不购买 VS2012 的情况下进行项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:01:24.763

您可以在同一个项目上使用 VS2010 和 VS2012。在我的公司中，一些开发人员使用一种，另一些则使用另一种。目前没有任何问题...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:55:21.250

您没有提到它是什么类型的项目，但您可能想尝试 - [VS Express - 它是免费的](http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-products)

# html-parsing - 从多个页面的特定 HTML 位置提取文本

> ID：15369540
> 
> 赞同：1
> 
> 时间：2013-03-12T18:44:22.180
> 
> 标签：html-parsing, text-extraction, jericho-html-parser

我一直在试验 Jericho HTML Parser 和 Selenium IDE，目的是从 HTML 内的特定位置跨多个页面提取文本。

我还没有找到一个简单的例子来说明如何做到这一点，我也不知道 java。

我想在一个文件夹中找到第一个表、第 4 行、第 1 个 div 中的所有 HTML 页面的任何文本字符串：

```
</table>
 <tr class="abc"><td class="xyz"><div align="center">The Text I don't want</div></td></tr>
 <tr class="abc"><td class="xyz"><div align="center">The Text I don't want</div></td></tr>
 <tr class="abc"><td class="xyz"><div align="center">The Text I don't want</div></td></tr>    
 <tr class="abc"><td class="xyz"><div align="center">The Text I want</div></td></tr>
</table> 
```

并将所选文本打印到列表中的 txt 文件，如下所示：

```
 The Text I want
    Another Text I want 
```

所有源文件都存储在本地，并且可能包含错误的 HTML，因此认为 Jericho 可能最适合此目的。但是，我很高兴学习任何方法来达到预期的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T23:34:31.640

最后我选择了beautifulsoup，并使用了一个类似这样的python脚本：

```
# open source html file
with open(html_pathname, 'r') as html_file:
# using BeautifulSoup module search html tag's tree
soup = BeautifulSoup(html_file)
# find according your criteria "1st table, 6th tr, 1st td, 1st div"
trs = soup.html.body.table.tr.findNextSiblings('tr')[4].td.div
# write found text to result txt
print ' - writing to result txt'
result_file.write(''.join(trs.contents) + '\n')
print ' - ok!' 
```

# bash - 每次打开终端时如何删除这个[Bash]？

> ID：15369542
> 
> 赞同：2
> 
> 时间：2013-03-12T18:44:28.803
> 
> 标签：bash, terminal

> bash：/etc/profile.d/sm.sh：没有这样的文件或目录 bash：/etc/profile.d/rvm.sh：没有这样的文件或目录

* * *

好吧，我快要解决我的问题了

我刚用

> 须藤打开 /etc/profile

我发现这两行，当我尝试编辑时，它说您无权在此文件中进行更改并要求进行复制...

告诉我如何用管理员权限评论这些行。

**有效的解决方案：**

“你的最后一个答案有效！我的意思是说我做到了：sudo nano /etc/profile put # before the two paths press command x save the file”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T18:49:21.263

从 bash 手册页

```
FILES
       /bin/bash
              The bash executable
       /etc/profile
              The systemwide initialization file, executed for login shells
       /etc/bash.bashrc
              The systemwide per-interactive-shell startup file
       /etc/bash.bash.logout
              The systemwide login shell cleanup file, executed when a login shell exits
       ~/.bash_profile
              The personal initialization file, executed for login shells
       ~/.bashrc
              The individual per-interactive-shell startup file
       ~/.bash_logout
              The individual login shell cleanup file, executed when a login shell exits
       ~/.inputrc
              Individual readline initialization file 
```

您将需要检查系统范围的文件，看看它们是否引用了 rvm。如果您是系统上的唯一用户（您的工作站或家用计算机），请随意修改这些文件以删除 rvm 引用（假设您不再使用 rvm）。否则，请您的系统管理员修复执行环境。

有关 rvm 的更多信息可以在[这里](https://rvm.io/)找到，您的在线手册页可以提供有关 bash 默认读取哪些文件的更多详细信息。

如果上述所有方法都失败，那么将执行一个快速而肮脏的黑客攻击

```
 touch /etc/profile.d/rvm.sh 
```

作为具有适当权限的用户。

# oop - fortran 2003 seg 错误与重写的类型绑定过程

> ID：15369545
> 
> 赞同：2
> 
> 时间：2013-03-12T18:44:43.613
> 
> 标签：oop, overriding, fortran

我正在尝试使用 Fortran 2003 的一些面向对象的功能，但遇到了一些麻烦。首先，我有一个抽象数据类型 sparse_matrix：

```
type, abstract :: sparse_matrix
    (some data)
contains
    procedure(matrix_vector_multiply), deferred :: matvec
end type sparse_matrix

abstract interface
    subroutine matrix_vector_multiply(A,x,y)
        import :: sparse_matrix
        class (sparse_matrix), intent(in) :: A
        real(kind=8), dimension(:) :: x,y
    end subroutine matrix_vector_multiply
end abstract interface 
```

然后我有一个从 sparse_matrix 继承的具体数据类型

```
type, extends(sparse_matrix) :: csr_sparse_matrix
    (some more data)
contains
    procedure :: matvec => csr_matvec
end type csr_sparse_matrix 
```

以及matvec的实际实现：

```
subroutine csr_matvec(A,x,y)
    class (csr_sparse_matrix), intent(in) :: A
    real(kind=8), dimension(:) :: x,y
    (do stuff)
end subroutine csr_matvec 
```

后来，我想在不同的模块中使用 matvec，我不在乎我有哪种动态类型：

```
subroutine solve(A,x,b,tolerance)
    class (sparse_matrix), intent(in) :: A
    real(kind=8), dimension(:), intent(in) :: b
    real(kind=8), dimension(:), intent(out) :: x
    real(kind=8), intent(in) :: tolerance
    real(kind=8), dimension( A%nrow ) :: z

    call A%matvec(b,z)
    (more stuff)
end subroutine solver 
```

我的理解是，无论动态类型 A 是什么，只要子例程`matvec`在子数据类型中被覆盖，一切都应该正常工作。

这段代码编译得很好，但是当我运行它时它会出现错误。当我在程序中更改矩阵的声明`solve`如下：

```
 class (csr_sparse_matrix), intent(in) :: A 
```

它工作得很好。同样，如果我将 A 保留为 sparse_matrix 但使用

```
select type(A)
type is (csr_sparse_matrix)
    (the same stuff)
end select 
```

然后一切都运行良好。但这首先破坏了覆盖抽象类型过程的整个目的——程序不应该关心我使用的是哪种矩阵，只要它可以执行矩阵向量乘法。

无论如何，我确定这只是我忘记包含的某些属性的问题，但我无法弄清楚它是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:58:07.913

所以毕竟是编译器；我使用的是 gfortran 4.6.3，而抽象数据类型仅在 gfortran 4.7 中得到正确支持。不幸的是，这使得我的代码不那么可移植，因为几个 linux 发行版的长期支持版本只包括 4.6 版。

# css - 如何重新调整精灵的一部分？

> ID：15369553
> 
> 赞同：0
> 
> 时间：2013-03-12T18:45:09.070
> 
> 标签：css

我需要重新调整精灵的给定区域的大小。我的原始图像是 800 像素 x 200 像素。我设置了`background-position: 200px 0px;`，`width: 100px; height: 25px;`这给了我精灵的正确部分，但我想知道是否可以将精灵的这一部分重新调整为 200 像素 x 50 像素。但是`background-size: 200px 50px;`将整个精灵调整到这个大小，而不仅仅是我感兴趣的区域。

谢谢！

我试图成为一般人，所以没有小提琴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:47:51.160

您可以尝试使用百分比来按比例缩放图像。例如，将该部分翻倍为 200 像素乘 50 像素，请使用：

```
background-size: 200% 200%; 
```

这会将背景的大小分别调整[为其容器宽度和高度的 200%](http://www.w3.org/TR/css3-background/#the-background-size)。您可能需要调整该`background-position`值以适应这种缩放方法，具体取决于您的布局或用例。

请注意，`background-size`它并不是真正设计用于精灵，因此这可能会或可能不会达到您正在寻找的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T19:02:07.967

不，您不能使用 CSS 缩放图像的一部分。我`background-size`按百分比进行了测试，惊讶地发现 Chrome 上的缩放比例不是 1:1。

`background-size: 50%`将背景图像翻倍。它`200%`似乎呈指数级增长。

[http://jsfiddle.net/qFCk3/](http://jsfiddle.net/qFCk3/)

# java - Java 堆栈实现的数据类型是什么，它如何计算每种类型的数据？

> ID：15369556
> 
> 赞同：0
> 
> 时间：2013-03-12T18:45:28.770
> 
> 标签：java, stack, implementation

我在这里指的是实际的java编译器实现：

我猜堆栈是作为**C**结构实现的，但我真正的意思是：

java如何用这种结构计算？例如，如果一个局部变量是字符串或指针类型，而另一个是双精度或整数，而java需要对这些变量进行操作，说两者相加，它是否先将两者转换为相同类型，然后再相加，并返回值？

会或多或少是这样的：

```
struct var {
    dataType type;
    union{
        char c;
        int i;
        double d;
        void *p;
    } value;
} 
```

其中 dataType 是一些数据类型的枚举。

例如：假设变量 A 是一个 double，变量 B 是一个 int，而 C 又是一个 double。

C = A + B 的字节码是如何生成的？虚拟机如何处理这些不同的数据类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:36:46.920

浮点（双精度）和整数是完全不同的数据类型，所有现代处理器都有处理这些数据类型的特殊操作。此外，Java 字节码还有一个用于添加浮点的添加操作数 (dadd) 和一个用于添加整数的添加操作数 (iadd)。

现在回答你的问题：

```
double A = 1;
int B = 1;
double C = B + A; 
```

由于结果 C 是双精度，Java 编译器将简单地将 B 转换为双精度。字节码看起来像这样：

```
dload_1    // load double A
iload_3    // load int B
i2d        // convert int to double
dadd       // add doubles 
dstore 4   // store result to C 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T21:14:59.530

Java 不像 C 那样自由地强制类型，因此从来没有“以添加它们的方式转换字符串和 int”。

Java 类型系统通常通过字符串比较来管理（然而，在一个概念级别上，此类项目通常被优化掉，而这一级别是一种粗略的简化）。

所以一个方法有一个签名，它在“.class”对象中表示为一个字符串。

```
public static void main(String[] args) {
  ...
} 
```

会有签名

```
main([Ljava.lang.String)V 
```

意思是一个名字'main'，它接受一个类型为'L'的对象'L'的数组'['，可以强制转换为String'java.lang.String'并且什么都不返回（一个void）'V'。

因此，要查看是否可以在运行时将一组参数传递给 this，检查对象的类型以查看它是否“可分配给”字符串数组。可赋值是一种奇特的说法，将类型共享为超类，或者将类型作为接口，或者其中一个超类将类型作为接口。

由于这种类型检查，JVM 实际上并没有对 JVM 中的元素使用 C 风格的类型检查；但是，它确实对实现此环境的元素进行 C 样式类型检查（如果这对您有意义的话）。

如果你很好奇，可以阅读[虚拟机规范](http://docs.oracle.com/javase/specs/jvms/se7/html/index.html)，甚至可以[下载 JVM 源代码](http://openjdk.java.net/groups/hotspot/)。您会发现 Java（由于多态性）在许多情况下不能依赖静态类型检查，因此 C 编译器类型验证无论如何都不起作用。

# sql - 如何使用 SqlDataAdapter 引用 SQL Server 数据库

> ID：15369559
> 
> 赞同：1
> 
> 时间：2013-03-12T18:45:38.770
> 
> 标签：sql, sql-server, database, datagrid, path

我是 C# 新手，我正在按照教程学习它。

`Database1.sdf`通过在我的项目中单击“添加新项目”，我创建了一个包含一个表和几列的 SQL Server 数据库 ( )。

```
 SqlConnection conn = new SqlConnection("Data Source=.\\SQLEXPRESS;AttachDbFilename=??????;Integrated Security=True;Connect Timeout=30;User Instance=True");
    DataTable dt = new DataTable();
    SqlDataAdapter SDA = new SqlDataAdapter("SELECT * FROM Database1 WHERE Titel like " + int.Parse(textBox1.Text), conn);
    SDA.Fill(dt);
    dataGridView1.DataSource = dt; 
```

如你所见“？？？” 部分是我卡住的地方。我尝试使用数据库的路径

```
C:\Users\1\Documents\Visual Studio 2010\Projects\Opdracht0\Opdracht0\Database1.sdf 
```

但这行不通。当我运行它时，我得到：

> *输入字符串的格式不正确。*

这条线是红色的：

```
SqlDataAdapter SDA = new SqlDataAdapter("SELECT * FROM Database1 WHERE Titel like" + int.Parse(textBox1.Text), conn); 
```

如您所见，这是一个简单的 SQL 语句，但即使这样也行不通。

任何提示表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:32:41.780

您的主要问题是您混合了两种不兼容的数据库类型：

*   您的`database1.sdf`文件是 SQL Server **Compact Edition**数据库文件

*   但是，您的`SqlConnection`和`SqlCommand`用于**成熟的**SQL Server (Express) 版本 - 并且这些版本与 SQL Server Compact**不**兼容！

所以要么你需要

*   继续使用您的 SQL Server Compact 数据库 ( `database1.sdf`) - 但在这种情况下，您需要使用`SqlCeConnection`and`SqlCeCommand`和这些命令

或者然后：

*   您切换到真正的 SQL Server（Express、Standard、Enterprise），在这种情况下，您可以使用`SqlConnection`和`SqlCommand`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:00:07.513

这就是我将如何去做。我会去[MSDN](http://msdn.microsoft.com/en-us/)并`SqlConnection`在搜索框中输入。在摸索了一下之后（因为他们已经对我最喜欢的连接字符串示例进行了深度处理），我会发现类似[这样](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring%28v=vs.100%29.aspx)的内容，其中包含一些示例，例如：

```
Persist Security Info=False;Integrated Security=true;Initial Catalog=Northwind;server=(local)

Data Source=MSSQL1;Initial Catalog=AdventureWorks;Integrated Security=true; 
```

通常，服务器名称与计算机名称相同，但 SQL Express 可能会有所不同。或者，`(local)`可以在这里工作。这些连接字符串将使用用户的 Windows 凭据登录到 SQL Server。对于 Web 应用程序，实际用户可能取决于是否使用模拟等。（并且，是的，连接字符串应该进入 web.config，以便可以在不重新编译应用程序的情况下更新它。如果这是一个 Web 应用程序。）

无论如何，如果这对您不起作用，您可以使用相同的搜索策略在 MSDN 或 Google 上查找其他连接字符串示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T12:37:52.677

要从 C#.NET 连接到 MS SQL Server 数据库，您需要创建一个连接字符串，如下所示：

```
private SqlConnection connection;
private string connectionString =
@"Server=(local);Database=Embedding_SQL_Test;User ID=sa;Password=123";
connection = new SqlConnection( connectionString ); 
```

接下来，您使用上面创建的 SqlConnection 对象来创建一个 'SqlCommand'，如下所示：

```
SqlCommand cmd = new SqlCommand( "select * from Customer where CustomerID = @Cid", connection); 
```

此处显示的 SQL 查询可以替换为 SELECT、INSERT、UPDATE 查询等。

接下来要在数据库中执行 SQL 查询，您可以使用以下方法：

```
ExecuteReader - to execute SELECT queries
ExecuteNonQuery - to execute INSERT, DELETE, UPDATE, and SET statements. 
```

这是关于如何从 C# 连接到 SQL Server 数据库并在数据库中执行 SQL 查询的非常简短的描述。有关连接字符串、方法及其参数的详细信息，请查看以下链接：( [http://www.shahriarnk.com/embedding-sql-c-sharp-java-shahriar/](http://www.shahriarnk.com/embedding-sql-c-sharp-java-shahriar/) ) 在这里您还可以找到有关如何使用的详细信息将参数传递给 SQL 查询以及调用存储过程等等。

# objective-c - NSMutableArray 是空的，虽然我添加了一些东西

> ID：15369561
> 
> 赞同：-2
> 
> 时间：2013-03-12T18:45:41.330
> 
> 标签：objective-c, nsmutablearray

出于某种原因，我的 NSMutableArray 总是空的，你们能帮帮我吗？这是代码：

```
-(NSMutableArray*) parseIt: (NSString*) toPars {
NSMutableArray *waranties;
NSString *beginTitle = @"<title>";
NSString *eindTitle = @"</title>";
NSString *title = [self getTitle:toPars start:beginTitle and:eindTitle];
if(title != NULL){
    NSLog(@"de title = %@", title);
    [waranties addObject:title];
    NSLog(@"de title = %@", [waranties objectAtIndex:0]);
} 
```

第一个 nslog 完美地显示了必须显示的内容，第二个显示为空；提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T18:47:34.070

你必须初始化你的数组。

```
NSMutableArray *waranties = [[NSMutableArray alloc] init]; 
```

[未将对象添加到 NSMutableArray 目标 -C](https://stackoverflow.com/questions/2341439/objects-not-being-added-to-nsmutablearray-objective-c?rq=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T18:47:26.813

您永远不会分配或初始化数组，例如

代替：

```
NSMutableArray *waranties; 
```

和：

```
NSMutableArray *waranties = [[NSMutableArray alloc] init]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T18:47:43.213

```
NSMutableArray *waranties; 
```

应该

```
NSMutableArray *waranties = [NSMutableArray array]; 
```

你没有初始化它，所以你在`-addObject:`调用`nil`. 这是允许的，所以你不会发生崩溃或任何事情......但你`-objectAtIndex:`也会去`nil`，然后返回，嗯，`nil`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T18:49:17.037

分配内存。

```
NSMutableArray *waranties = [[NSMutableArray alloc]init]; 
```

# hadoop - Hadoop jar命令和job命令的区别

> ID：15369564
> 
> 赞同：2
> 
> 时间：2013-03-12T18:45:46.760
> 
> 标签：hadoop, mapreduce

“jar”和“job”这两个命令有什么区别。

*> 以下是我的理解。

> 命令“jar”可用于在本地运行 MR 作业。
> 
> “hadoop 作业”已被弃用，用于向集群提交作业。替代方法是 mapred 命令。
> 
> 此外，jar 命令将在我们执行命令的同一节点本地运行 MR 作业，而不是集群上的其他任何地方。如果我们要提交一个可以在集群上某个非确定性节点上运行的作业。*

让我知道我的理解是否正确，如果不正确，究竟有什么区别。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:50:43.763

两者完全不同，我认为没有可比性。两者共存并具有单独的功能，并且没有一个被弃用 AFAIK。

*job*不用于向集群提交作业，而是用于获取有关已运行或正在运行的作业的信息，也用于终止正在运行的作业甚至终止特定任务。

而*jar*只是用来执行自定义的 mapred jar，例如：

```
$ bin/hadoop jar /usr/joe/wordcount.jar org.myorg.WordCount /usr/joe/wordcount/input /usr/joe/wordcount/output 
```

**hadoop 罐子**

运行一个 jar 文件。用户可以将他们的 Map Reduce 代码捆绑在一个 jar 文件中并使用此命令执行它。

*用法：hadoop jar [mainClass] args...*

**hadoop 作业**

与 Map Reduce 作业交互的命令。

*用法：hadoop 作业 [GENERIC_OPTIONS] [-submit ] | [-状态] | [-计数器] | [-杀] | [-events <#-of-events>] | [-历史[全部]] | [-list [全部]] | [-杀任务] | [-失败任务] | [-设置优先级]*

欲了解更多信息，请阅读[此处](http://hadoop.apache.org/docs/r1.0.4/commands_manual.html#jar)。

# regex - 使用正则表达式在驼峰字符串中放置空格

> ID：15369566
> 
> 赞同：15
> 
> 时间：2013-03-12T18:46:00.487
> 
> 标签：regex

我的问题[是在两个单词之间添加一个空格](https://stackoverflow.com/questions/15343163/add-a-space-between-two-words)。

要求：拆分驼峰式字符串并在大写字母前放置空格，后跟小写字母，或者什么都没有。大写字母之间不应出现空格。

例如：`CSVFilesAreCoolButTXT`是一个字符串，我想以这种方式产生它`CSV Files Are Cool But TXT`

我是这样开普通快车的：

```
"LightPurple".replace(/([a-z])([A-Z])/, '$1 $2') 
```

如果你有两个以上的单词，那么你需要使用 g 标志来匹配它们。

```
"LightPurpleCar".replace(/([a-z])([A-Z])/g, '$1 $2') 
```

如果要尝试拆分单词，`CSVFile`那么您可能需要使用此正则表达式：

```
"CSVFilesAreCool".replace(/([a-zA-Z])([A-Z])([a-z])/g, '$1 $2$3') 
```

但它仍然不能满足我提出要求的方式。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-12T19:49:06.297

```
var rex = /([A-Z])([A-Z])([a-z])|([a-z])([A-Z])/g;

"CSVFilesAreCoolButTXT".replace( rex, '$1$4 $2$3$5' );
// "CSV Files Are Cool But TXT" 
```

并且

```
"CSVFilesAreCoolButTXTRules".replace( rex, '$1$4 $2$3$5' );    
// "CSV Files Are Cool But TXT Rules" 
```

匹配正则表达式模式的主题字符串的文本将被替换字符串替换`'$1$4 $2$3$5'`，其中`$1`等`$2`指的是与模式的捕获组匹配的子字符串`()`。

`$1`指第一`([A-Z])`个子模式`$3`匹配的子串，指第一个子模式匹配的子串`([a-z])`等。

由于交替字符`|`，要进行匹配，正则表达式必须匹配`([A-Z])([A-Z])([a-z])`子模式或`([a-z])([A-Z])`子模式，因此如果进行匹配，则多个捕获组将保持不匹配。这些捕获组可以在替换字符串中引用，但它们对它没有影响 - 实际上，它们将引用一个空字符串。

替换字符串中的空格确保每次匹配时都会在主题字符串中插入一个空格（尾随`g`标志意味着正则表达式引擎将查找多个匹配项）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-04-24T12:50:41.563

如果第一个字符总是小写。

```
'camelCaseString'.replace(/([A-Z]+)/g, ' $1') 
```

如果第一个字符是大写的。

```
'CamelCaseString'.replace(/([A-Z]+)/g, ' $1').replace(/^ /, '') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-07-03T11:54:43.067

**在 .NET 中使用正则表达式拆分 CamelCase：**

```
Regex.Replace(input, "((?<!^)([A-Z][a-z]|(?<=[a-z])[A-Z]))", " $1").Trim(); 
```

**例子 ：**

```
Regex.Replace("TheCapitalOfTheUAEIsAbuDhabi", "((?<!^)([A-Z][a-z]|(?<=[a-z])[A-Z]))", " $1").Trim(); 
```

**输出：** 阿联酋的首都是阿布扎比

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-11-13T03:33:11.390

**这对我有用**

```
let camelCase = "CSVFilesAreCoolButTXTRules"
let re = /[A-Z-_\&](?=[a-z0-9]+)|[A-Z-_\&]+(?![a-z0-9])/g
let delimited = camelCase.replace(re,' $&').trim() 
```

上面的代码适用于我拥有的几乎所有用例。我有一些特殊之处，其中 '&' 和 '_' 应该被视为等同于大写字符

*   ThisIsASlug ---> 这是一个蛞蝓
*   loremIpsum ---> lorem Ipsum
*   PAGS_US ---> PAGS_US
*   TheCapitalOfTheUAEIsAbuDhabi ---> 阿联酋的首都是阿布扎比
*   eclipseRCPExt ---> Eclipse RCP Ext
*   价值--->价值
*   SG&A ---> SG&A

**简要说明**

```
[A-Z-_\&](?=[a-z0-9]+)
//Matches normal words i.e. one uppercase followed by one or more non-uppercase characters 

[A-Z-_\&]+(?![a-z0-9]) 
//Matches acronyms & abbreviations i.e. a sequence of uppercase characters that are not followed by non-uppercase characters 
```

**[在这里查看正则表达式小提琴](https://regexr.com/69f1a)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-13T21:17:58.557

**使用lookaheads / behinds**替换Javascript的驼峰式：

```
"TheCapitalOfTheUAEIsAbuDhabi".replace(/([A-Z](?=[a-z]+)|[A-Z]+(?![a-z]))/g, ' $1').trim()
// "The Capital Of The UAE Is Abu Dhabi" 
```

# c# - ASP.Net 类从 ASPX 窗体引用控件

> ID：15369567
> 
> 赞同：1
> 
> 时间：2013-03-12T18:46:02.163
> 
> 标签：c#, asp.net, forms, class, controls

因此，我已经看到了该领域的许多讨论，但似乎他们主要是在讨论 Windows 窗体，或者他们没有足够时间回答这个特定的场景来为我指明正确的方向。

正是我需要做的（通用示例）：

HTML (片段.aspx)

```
<div id="html_fragment_1" runat="server">Contents</div>
<div id="html_fragment_2" runat="server">Contents</div>
... 
```

代码背后 (fragment.aspx.cs)

```
Fragments fragment = new Fragments();
fragment.return_fragment(  AN INSTANCE THAT REFERS TO html_fragment_N  ); 
```

类 (Fragments.cs)

```
public void return_fragment ( AN INSTANCE THAT REFERS TO html_fragment_N ) {
    string html = INSTANCE.html_fragment_N;
    // DO SOMETHING WITH html
    HttpContext.Current.Response.Write(html);
} 
```

我需要这样做的原因是我网站上的每个 aspx 表单都需要通过 Fragments.return_fragment() 以相同的方式进行操作，其中需要从 Form 中读取多个 DIV 的内容并将其排列到 XElement 中回来。

我宁愿让每个表单都使用 Fragments.return_fragment() ，而不是在 CodeBehind 中为每个页面进行操作，这样可以节省实现新表单页面的工作量，并且可以轻松更改代码，而无需在每个页面中更改它形式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:56:12.163

看起来你想要你的应用程序的**Global.asax**文件：

[http://msdn.microsoft.com/en-us/library/1xaas8a2(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/1xaas8a2(v=vs.71).aspx)

在此处查看应用程序的页面事件，以指定每个页面请求应发生的事情。

# javascript - 通过 Javascript 将 XML 节点调用到 HTML 中可以在 Dreamweaver 中使用，但是当我在服务器中尝试时会生成一个空白页面

> ID：15369570
> 
> 赞同：0
> 
> 时间：2013-03-12T18:46:07.687
> 
> 标签：javascript, html, xml, innerhtml

我正在尝试为一些 xml 做一个 document.write 以在 html 中显示。请耐心等待，因为我是 Javascript 的初学者。这是我到目前为止的代码：

```
<script>
function loadXMLDoc()
{
if (window.XMLHttpRequest)
  {
  xhttp=new XMLHttpRequest();
  }
else
  {
  xhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xhttp.open("GET","Data/xmlfile.xml",false);
xhttp.send();
return xhttp.responseXML;
} 
</script>

<body>

<script>

    xmlDoc=loadXMLDoc("Data/xmlfile.xmll");
    var x=xmlDoc.getElementsByTagName("col");
[0].childNodes[0].nodeValue + "<br>");
    document.write(xmlDoc.getElementsByName("Rep")[1].childNodes[0].nodeValue + "<br>");
    document.write(xmlDoc.getElementsByName("Rep")[2].childNodes[0].nodeValue + "<br>");
    document.write(xmlDoc.getElementsByName("Rep")[3].childNodes[0].nodeValue + "<br>");
    document.write(xmlDoc.getElementsByName("Rep")[4].childNodes[0].nodeValue + "<br>");
    document.write(xmlDoc.getElementsByName("Rep")[5].childNodes[0].nodeValue + "<br>");
    document.write(xmlDoc.getElementsByName("Rep")[6].childNodes[0].nodeValue + "<br>");

</script> 

 <div><span class="reps"></span></div> 
```

我也试过：

```
 //r = document.getElementById("reps");
        //var inh=document.getElementById("reps").innerHTML;
        //r.innerHTML = document.write(xmlDoc.getElementsByName("Rep")

    document.getElementById("reps").innerHTML=xmlDoc.getElementsByName("Rep")[7].childNodes[0].nodeValue; 
```

然后我尝试了：

```
 r.innerHTML = document.write(xmlDoc.getElementsByName("Rep")[0].childNodes[0].nodeValue + "<br>"); 
```

在研究了一些网站后，它提到 XML 不能与 document.write 一起使用。这是真的？为什么它在 Dreamweaver live 中有效，但在我在服务器上运行时无效？

我怎样才能让它工作？

最终，我想从 XML 中绘制每个节点值，并将其作为单独的超链接显示在 div 中。我已经在 XML 中有超链接，并这样编写了 javascript：

```
document.write("9 - " + "<a href='" + xmlDoc.getElementsByName("RepWeb")[8].childNodes[0].nodeValue + "'>" + xmlDoc.getElementsByName("Rep")[8].childNodes[0].nodeValue + "</a>" + "<br>"); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:04:32.980

**没关系** ，我明白了！getElementsByName 仅适用于 Safari。我最终编写了一个新的 XML 文件并通过 getElementByTagName 提取文本

# jquery - 整个 div 和子项的 jQuery focusout

> ID：15369572
> 
> 赞同：13
> 
> 时间：2013-03-12T18:46:11.590
> 
> 标签：jquery, jquery-focusout

我有一个通过 jQuery 动态创建的 div，其中包含一些链接/按钮。当这个 div 失去焦点时，我需要删除它。这部分我可以做。

但是，现在我在 div 的包装器上有 focusout 事件，当我单击 div 内的按钮时，包装器失去对孩子的关注，我的事件被触发。检查单击的元素是否是我可以做的包装器的子元素，但由于包装器不再具有焦点，我的事件将不会再次触发以删除 div。

我也尝试过.blur，但这并没有更好的效果。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2017-10-16T07:34:40.627

使用纯 javascript 解决此问题的一种方法是使用[`relatedTarget`](https://developer.mozilla.org/en-US/docs/Web/API/FocusEvent/relatedTarget)event 参数中的给定：

```
element.addEventListener('focusout', function(event) {
    if (element.contains(event.relatedTarget)) {
        // don't react to this
        return;
    }
    // do something
}); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-02-12T16:57:42.487

```
$("#yourDiv").focusout(function () {
   if ($(this).has(document.activeElement).length == 0) {
       // remove div
   }
}); 
```

`$(this)`=您要关注的div。

`document.activeElement`= 当前焦点所在的元素。

`$(this).has(document.activeElement)`只是检查活动元素是否是您的 div 的子元素

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-24T10:54:00.903

这是我使用 event.relatedTarget 为菜单解决这个问题的方法，：

```
$('#mapmenu  a.nolink').click(function (e) {//ul.lev-0 > li.expanded >
  $(this).closest('li').toggleClass('hovered');
  e.preventDefault();
  e.stopPropagation();
  return false;
});
$('#mapmenu  a.nolink').closest('li').focusout(function (e) {
  var ax = e.relatedTarget;
  var bx = $(ax).closest('ul');
  if ($(this).has(bx).length == 0) {
    $(this).removeClass('hovered');
  }
}); 
```

# google-app-engine - Web 应用程序的 UriMatcher 等效助手？

> ID：15369574
> 
> 赞同：0
> 
> 时间：2013-03-12T18:46:23.403
> 
> 标签：google-app-engine, url, matching

我编写了很多 Android 应用程序，并且多次使用 UriMatcher 类来匹配相关的 uris 和 http url。

现在我正在开发一个使用 Java 和 Gae 的小型 Web 应用程序。我有小 servlet 需要将调用与 DYNAMIC 信息相匹配。不是静态 url 模式，而是运行时解析数据。

在 Android 中，UriMatcher 本来是我的选择，但在 Java Se World 中可用的是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:57:22.133

您可以简单地在 GAE 上使用 Java Servlet API 并将其注册以接收通配符 Uris，然后[解析](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getRequestURI%28%29)并映射 Uris：

```
public class MyServlet extends HttpServlet {
    public void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws IOException {
        String uri = req.getRequestURI();
        // do something with the uri here

        // generate a response
        resp.setContentType("text/plain");
        resp.getWriter().println("Hello, world");
    }
} 
```

并注册它：

```
<servlet>
  <servlet-name>My servlet</servlet-name>
  <servlet-class>com.package.MyServlet</servlet-class>
</servlet>
<servlet-mapping>
  <servlet-name>My servlet</servlet-name>
  <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

# c# - PostBack 后列表保持填充状态

> ID：15369575
> 
> 赞同：0
> 
> 时间：2013-03-12T18:46:24.777
> 
> 标签：c#, asp.net, list, postback, viewstate

我有一个 .aspx 应用程序，用户在其中输入一个名称并将该名称添加到列表中。这最多可以进行五次。当用户单击按钮时，输入的名字将显示在第一个标签中。当用户输入另一个名称并单击按钮时，第一个标签保持不变，下一个标签显示新名称，依此类推。我的问题是列表在 PostBack 上被重置。我正在尝试使用 ViewState 来帮助解决这个问题，但没有成功。任何帮助是极大的赞赏。

编辑：我让它工作了，所以谢谢大家的帮助。还有很大的改进空间，但这是一个很好的起点。

```
 [Serializable]
    class Recipient
    {
        public string Fname { get; set; }
        public string MInit { get; set; }
        public string Lname { get; set; }
        public string Suffix { get; set; }
    }

    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void btnEnter_Click(object sender, EventArgs e)
    {
        Recipient recipients = new Recipient();

        List<string> FName = (List<string>)ViewState["recipientList"];
        List<string> MInit = (List<string>)ViewState["recipientList"];
        List<string> LName = (List<string>)ViewState["recipientList"];

        if (FName == null && MInit == null && LName == null)
        {
            FName = new List<string>();
            MInit = new List<string>();
            LName = new List<string>();
        }

        recipients.Fname = txtFName.Text;
        recipients.MInit = txtMinit.Text;
        recipients.Lname = txtLName.Text;
        FName.Add(recipients.Fname);
        MInit.Add(recipients.MInit);
        LName.Add(recipients.Lname);
        ViewState["recipientList"] = FName;
        ViewState["recipientList"] = MInit;
        ViewState["recipientList"] = LName;

        if (FName.Count == 1 && MInit.Count == 1 && LName.Count == 1)
        {
            lblFName.Text = FName[0] + " " + MInit[0] + " " + LName[0];
        }

        if (FName.Count == 4 && MInit.Count == 4 && LName.Count == 4)
        {
            lblFName1.Text = FName[1] + " " + MInit[2] + " " + LName[3];
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:53:19.780

你真的需要一个清单吗？你可以做...

```
if(lblFName.Text.Equals(String.Empty))
{
    lblFName.Text = value;
}
else if(lblFName1.Text.Equals(String.Empty))
{
    lblFName1.Text = value;
}//and so on... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:58:30.583

我不确定 Recipient 类的目的。无论如何，您想在添加收件人之前实例化收件人列表。

![在此处输入图像描述](../Images/37d0abecb578cb593d121eed6b2a0df1.png)

```
<asp:TextBox runat="server" ID="txtFName" /><br />
<asp:Button runat="server" ID="btnEnter" Text="Submit" OnClick="btnEnter_Click" /><br />
<asp:Label runat="server" ID="lblFName" /><br />
<asp:Label runat="server" ID="lblFName1" /><br />
<asp:Label runat="server" ID="lblFName2" /><br />
<asp:Label runat="server" ID="lblFName3" /><br />
<asp:Label runat="server" ID="lblFName4" /><br />

[Serializable]
public class Recipient
{
    public string name { get; set; }
}

public List<Recipient> recipientList
{
    get
    {
        if (ViewState["recipientList"] != null)
            return (List<Recipient>)ViewState["recipientList"];
        return new List<Recipient>();
    }
    set { ViewState["recipientList"] = value; }
}

protected void btnEnter_Click(object sender, EventArgs e)
{
    List<Recipient> recipient = recipientList;
    recipient.Add(new Recipient{ name = txtFName.Text.Trim()});
    recipientList = recipient;

    int count = recipient.Count;

    if (count == 1)
        lblFName.Text = recipientList[0].name;

    if (count > 1)
        lblFName1.Text = recipientList[1].name;

    if (count > 2)
        lblFName2.Text = recipientList[2].name;

    if (count > 3)
        lblFName3.Text = recipientList[3].name;

    if (count > 4)
        lblFName4.Text = recipientList[4].name;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T21:00:48.157

如果在您按下回车按钮时正在触发回发。然后您需要处理在 Page_Load 中重建列表。像这样的东西：

```
 protected void Page_Load(object sender, EventArgs e)
 {
    if (!IsPostBack)
    {
        recipientList = (List<string>)ViewState["recipientList"];

        //now load the list
    }
  } 
```

# javascript - 跨域jquery获取

> ID：15369577
> 
> 赞同：20
> 
> 时间：2013-03-12T18:46:26.750
> 
> 标签：javascript, jquery, ajax, twitter

我看到了一些使用 ajax 的跨域示例，但它不起作用。

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    </head>
    <body>
        <script type="text/javascript" >
            $(document).ready(function () {
                var url = "http://api.twitter.com/1/statuses/user_timeline.json?screen_name=AssasNet&include_rts=1";

                $.get(url, function (data) {
                    console.log(data)
                    alert(data);
                });
            });
        </script>
    </body>
</html> 
```

我尝试使用 chrome 并给出以下错误：

```
XMLHttpRequest cannot load http://api.twitter.com/1/statuses/user_timeline.json?screen_name=AssasNet&include_rts=1\. Origin null is not allowed by Access-Control-Allow-Origin. 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-03-12T18:53:04.803

您不能使用`$.get`，因为它会执行 ajax 调用，这将是跨域的，因此被[Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy)阻止，并且您尝试访问的 Twitter API 不支持[跨域资源共享](http://www.w3.org/TR/access-control/)（或者如果它确实，它不允许 origin`null`或`http://jsbin.com`，这是我尝试过的）。

不过，API 确实支持[JSONP](http://en.wikipedia.org/wiki/JSONP#JSONP)（这不是真正的 ajax 调用），因此只需将 更改`$.get`为`$.ajax`指定即可`JSONP`：

```
$.ajax({
  url: url,
  dataType: "jsonp",
  success: function (data) {
    console.log(data)
    alert(data);
  }
}); 
```

[实例](http://jsbin.com/igivok/1)| [来源](http://jsbin.com/igivok/1/edit)

# svn - 如何将目录中的所有文件恢复为旧的 SVN 版本

> ID：15369581
> 
> 赞同：1
> 
> 时间：2013-03-12T18:46:32.267
> 
> 标签：svn

我只想将计算机上的 SVN 文件恢复为旧版本。我不想将更改提交到存储库。

我试过了`svn merge -rCurrentVersion:revertToVersion`，但我得到：

```
[root]# svn merge -r150:139
svn: Try 'svn help' for more info
svn: Merge source required 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T18:57:09.567

使用[`svn update`](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.update.html)带有[`--revision`](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.html#svn.ref.svn.sw.revision)标志的命令。

```
svn update -r 139 
```

# linux - 匹配模式并打印后的单词Grep

> ID：15369584
> 
> 赞同：0
> 
> 时间：2013-03-12T18:46:38.573
> 
> 标签：linux, shell

假设我有一个文件名 foo.txt，它包含以下信息。

```
Notification are enabled
Notification:445
Mode: valid
Bookmark are enabled
Bookmarks:556
Mode: Invalid
Question are enabled
Question:667
Mode: Unknown 
```

我想 grep/awk/sed 以下信息。我需要这样的结果

```
 "Notification is Valid"
                   "Bookmark is Invalid"
                   "Question is Unknown" 
```

如果您还需要什么，请告诉我。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:44:51.233

如果我正确理解你想要什么，这样的事情可能会起作用：

```
awk '/enabled/{g=$1}/Mode:/{printf "%s is %s\n",g,$NF}' foo.txt 
```

至少根据您给出的示例，这应该有效。如果您必须处理`disabled`或除 之外的其他任何事情`enabled`，那将使它变得更加复杂...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-01T22:38:34.147

假设 foo.txt 并且我们想要提取每 3 行的第一个和最后一个单词，其中包含 6 个“组”，这些“组”由 \n 字符表达式的空格分隔，使用 xargs：

```
xargs -n6 < foo.txt 
```

“线性化”内容，并给出：

```
Notification are enabled Notification:445 Mode: valid
Bookmark are enabled Bookmarks:556 Mode: Invalid
Question are enabled Question:667 Mode: Unknown 
```

将此内容通过管道传输到 awk：

```
xargs -n6 < foo.txt | awk '{print $1" is "$6}' 
```

我猜它提供了一些与您正在寻找的东西相近的东西：

```
Notification is valid
Bookmark is Invalid
Question is Unknown 
```

高温高压

# wcf - WCF 数据合同版本控制

> ID：15369585
> 
> 赞同：3
> 
> 时间：2013-03-12T18:46:40.367
> 
> 标签：wcf, web-services, versioning

好吧，这里什么都没有。在阅读了关于服务版本控制和数据合同版本控制的最佳实践 ( [http://msdn.microsoft.com/en-us/library/ms733832.aspx](http://msdn.microsoft.com/en-us/library/ms733832.aspx) ) 之后，我基本了解它是如何完成的。我计划对数据合同使用敏捷版本控制，但无法弄清楚创建 WorkRequestV2 以添加新属性或仅将新属性添加到 WorkRequestV1 之间有什么区别或更好的做法。现在我尝试了两种方法并且它有效但是当我创建 WorkRequestV2 时我必须修改 ServiceContractor 以使用 WorkRequestV2 为什么要这样做而不是仅仅向 WorkRequestV1 添加属性？有什么不同？

我查看的示例在这里 ( [http://msdn.microsoft.com/en-us/library/ms731138.aspx](http://msdn.microsoft.com/en-us/library/ms731138.aspx) ) CarV1 和 CarV2 为什么不将 HorsePower 添加到 CarV1 而不必创建一个全新的合同。

```
[DataContract(Name = "WorkRequest")]
public class WorkRequestV1 : IExtensibleDataObject {
    [DataMember(Name = "workrequest",Order=1,IsRequired=true)]
    public int workrequest { get; set; }
    [DataMember(Name = "CQ")]
    public string CrewHeadquarter { get; set; }
    [DataMember(Name = "JobCode")]
    public string JobCode { get; set; }
    [DataMember(Name = "JobType")]
    public string JobType { get; set; }
    [DataMember(Name = "Latitude")]
    public string Latitude { get; set; }
    [DataMember(Name = "Longitute")]
    public string Longitute { get; set; }

    private ExtensionDataObject theData;
    public ExtensionDataObject ExtensionData {
        get {
            return theData;
        }
        set {
            theData = value;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:24:20.987

再次阅读数据合同版本控制（您的第二个链接）

这是该页面的引用：

> ## 重大变更与非重大变更
> 
> 对数据合同的更改可以是破坏性的或非破坏性的。当以非破坏性方式更改数据合约时，使用旧版本合约的应用程序可以与使用新版本合约的应用程序通信，使用新版本合约的应用程序可以与使用旧版本合约的应用程序通信。另一方面，重大更改会阻止一个或两个方向的通信。

对于您的情况，添加一些其他属性是一项非破坏性更改。只要您没有严格的模式验证（例如新属性没有在它们上标记“必需”），您就可以非常安全地将属性添加到现有数据合同而不是创建新的数据合同

与新服务通信的旧客户端仍然继续工作，新属性的值将保持默认值。与旧服务通信的新客户端也将起作用，因为新属性将被忽略。

但是正如您所看到的，您会遇到一个问题，即如何确保新客户端与新服务通信，以及旧客户端与旧服务通信？如果这不是问题，那么您就没有问题。否则，您可能需要引入新的数据合同。

## 进一步阅读：

[MSDN 服务版本控制](http://msdn.microsoft.com/en-us/library/ms731060.aspx)

[IBM Web 服务版本控制的最佳实践](http://www.ibm.com/developerworks/webservices/library/ws-version/)

[Oracle Web 服务版本控制](http://www.oracle.com/technetwork/articles/web-services-versioning-094384.html)

[您的 WebService 版本控制最佳实践是什么？](https://stackoverflow.com/questions/2101566/what-are-your-webservice-versioning-best-practices)

# r - R 使用来自另一个变量的名称的 rbind

> ID：15369586
> 
> 赞同：3
> 
> 时间：2013-03-12T18:46:55.507
> 
> 标签：r

如果我像这样制作一个矩阵；

```
m<-matrix(1,dimnames=list('row','column')) 
```

```
    柱子
第 1 行

```

我可以像这样用 rbind 添加一个新行

```
m<-rbind(m,row2=2) 
```

```
     柱子
第 1 行
第 2 行 2

```

但是......如果我有一个字符串变量，比如

```
tag<-"row3" 
```

为什么我不能使用 rbind 作为

```
m<-rbind(m,tag=3) 
```

row3 应该在哪里而不是标记为

```
     柱子
第 1 行
第 2 行 2
标签 3

```

但想要

```
     柱子
第 1 行
第 2 行 2
第 3 行 3

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T19:42:31.770

您可以只使用`rbind`而不命名新行，然后使用`rownames`来命名该行：

```
m <- rbind(m,3)
rownames(m)[3]<-tag 
```

这和@agstudy 的解决方案之间的一些基准测试：

```
m <- matrix(1,dimnames=list('row','column'))
m <- rbind(m,row2=2)
tag <- "row3"

fn1<-function(m,tag){
  m <- rbind(m,matrix(3,dimnames=list(tag,'column')))
  m
}

fn2<-function(m,tag){
  m <- rbind(m,3)
  rownames(m)[3]<-tag
  m
}
library(microbenchmark)
microbenchmark(fn1(m,tag),fn2(m,tag))
Unit: microseconds
        expr    min     lq median     uq    max neval
 fn1(m, tag)  4.665  5.598  6.065  6.532 15.862   100
 fn2(m, tag) 11.663 13.062 13.063 13.530 48.517   100 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T18:56:09.787

您可以通过创建一个具有正确名称的矩阵来做到这一点

```
m <- matrix(1,dimnames=list('row','column'))
m <- rbind(m,row2=2)
tag <- "row3"
m <- rbind(m,matrix(3,dimnames=list(tag,'column')))

m
     column
row       1
row2      2
row3      3 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T21:15:16.107

由于`substitute()` [不处理函数参数](https://stat.ethz.ch/pipermail/r-help/2002-January/018135.html)，在这种情况下模拟动态变量名的唯一方法是`eval(parse(...))`：

```
> m <- eval(parse(text=paste("rbind(m,",tag,"=3)")))
> m
     column
row       1
row2      2
row3      3 
```

这很怪异，我不会推荐它，但为了完整起见，我将其发布。

# sql - 按月份名称和年份排序

> ID：15369588
> 
> 赞同：-1
> 
> 时间：2013-03-12T18:46:57.507
> 
> 标签：sql, sql-server, tsql

我需要订购月份名称，如 Jan、Feb、March、April ......直到 DEC 并通过使用得到这个， `datepart(m,Time)`但我有 2012 年和 2013 年的数据。它显示 2012 年 1 月、2013 年 1 月、2012 年 2 月、2013 年 2 月的数据，但我wan 还订购年份，以便所有 2012 年数据应该首先出现，然后是 2013 年数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T18:49:14.243

这是对部分问题的部分解决方案，但通常您会使用：

`ORDER BY YEAR(TimeColumn), DATEPART(m, TimeColumn)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:10:03.610

重复已经说过的话

```
SELECT '01 jan 2012' AS Dt INTO #tempDates
UNION
SELECT '01 jun 2012'
UNION
SELECT '10 oct 2012'
UNION
SELECT '01 jan 2013'

--1
SELECT Dt
FROM #tempDates
ORDER BY DatePart(YY,Dt),DatePart(m,Dt)

--2
SELECT Dt
FROM #tempDates
ORDER BY YEAR(Dt), MONTH(Dt)

--3
SELECT Dt
FROM #tempDates
ORDER BY YEAR(Dt), DatePart(m,Dt) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T18:49:01.943

尝试这个：

```
ORDER BY DatePart(y,time),DatePart(m,time) 
```

# zip - 命令行批处理脚本

> ID：15369589
> 
> 赞同：0
> 
> 时间：2013-03-12T18:46:58.427
> 
> 标签：zip

我使用此脚本将所有 .txt 和 .cpi 文件压缩到带有 7zip 的单独文件中的备份文件夹中。压缩文件后，我删除原始文件。然而，这个脚本有一个逻辑缺陷。假设如果 7zip 程序无法运行，文件也会被删除。我如何更改脚本，以便在没有先压缩文件的情况下不删除文件。另外，我如何更改此脚本以压缩超过 7 天的文件？谢谢你的帮助。@echo 关闭
setlocal

```
set _source=C:\test7zip\bak    
set _dest=C:\test7zip\bak    
set _wrpath=C:\Program Files\7-Zip        
if NOT EXIST %_dest% md %_dest%    
for %%I in (%_source%\*.txt,%_source%\*.cpi) do "%_wrpath%\7z" a "%_dest%\%%~nI.7z" "%%I" & del "%%I" 
```

暂停

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T05:05:54.027

你现在似乎比我更多，但我也许能帮上忙……

在 7zip 中，您可以使用一个批处理文件，在解压缩时会更改系统变量...解压缩文件的批处理文件（您已经完成）可以在删除文件之前检查变量是否为真...或其他东西.?

希望无论如何都有帮助？

对于文件的压缩，女巫已经有几天的历史了……你可以有一个批处理文件，它有一个 7 天的计时器，并且在时间到了之后，它将文件的某个目录压缩到 7zip 中？

我能帮你的就这些了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T08:38:03.960

我没有彻底检查或测试您的代码，但我确实立即注意到了这一点。脚本最后一行中的“&”创建了一个条件命令，它将始终执行第二个命令，无论第一个命令是失败还是成功。将其更改为 && 以创建一个条件命令，其中第二个命令仅在第一个成功完成后执行，如下所示：

> 对于 %%I in (%_source%*.txt,%_source%*.cpi) 执行 "%_wrpath%\7z" a "%_dest%\%%~nI.7z" "%%I" && del "% ％我”

要包含超过 7 天的文件，请使用以下更改将它们移动到临时目录，然后再压缩它们：

```
set _source=C:\test7zip\bak 
set _dest=C:\test7zip\bak 
set _temp1=C:\test7zip\temp1

set _wrpath=C:\Program Files\7-Zip        
if NOT EXIST %_dest% md %_dest% 
forfiles /P %_source% /S /M *.txt /D -7 /C "cmd /c move @file %_temp1%"
forfiles /P %_source% /S /M *.cpi /D -7 /C "cmd /c move @file %_temp1%" 
for %%I in (%_temp1%\*.txt,%_temp1%\*.cpi) do "%_wrpath%\7z" a "%_dest%\%%~nI.7z" "%%I" && del "%%I" 
```

# jquery - 在 jQuery 手风琴折叠栏上渲染列？

> ID：15369591
> 
> 赞同：0
> 
> 时间：2013-03-12T18:47:00.230
> 
> 标签：jquery, accordion

我正在使用 jQuery 手风琴小部件，因此折叠栏上的文本需要进入`<h3>`标签内。我的折叠栏包含三个独立的相关信息（文件名、大小和日期）。我真的很想在栏的左侧、中间和右侧渲染这三个项目，以便完全折叠的手风琴类似于一个三列表。有什么办法可以做到这一点吗？

我尝试使用`float:right`（见下文）将文件名单独放在左侧，将大小和日期放在右侧。这不是我想要的，但我认为这是一个合理的妥协。但是，当我展开该部分时，展开的区域只会越过右浮动文本开始的地方，而不是一直穿过页面，这看起来有点奇怪。据我所知，它也没有提供任何方法将浮动文本左对齐多个条，因为它们必须是单独`float`的，每个都有自己的宽度。

```
<h3>
  myfile.xls
  <span style="float:right">153 kB, 03/12/2013</span>
</h3> 
```

接下来，我尝试`padding-right`在前两条数据中添加一些（如下）。这工作得很好，但我的选择是指定一个固定大小，它不会随着窗口大小而缩小或扩大；或百分比，这不允许我在多个条形图上左对齐中心列或右列。我还尝试`width:33%`在每条数据上加上一个，这完全被忽略了。

```
<h3>
  <span style="padding-right:33%">myfile.xls</span>
  <span style="padding-right:33%">153kB</span>
  03/12/2013
</h3> 
```

我真正想要的是三个等宽的列，每列中的文本左对齐。但是我受限于 jQuery 使用`<h3>`标签来指定折叠栏上的内容（我什至尝试了一个`<table>`带有一行的内部，完全清楚它不能在内联元素中工作，但是嘿 - 我不得不给试试看！）。我需要为 IE 8+ 和 Firefox 3+ 进行这项工作，尽管到目前为止，我尝试过的东西都呈现相同的效果，所以我预计那里不会有太多麻烦（敲木头）。

任何建议将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T19:07:41.903

如果我理解正确，您希望在折叠栏上有三个相等的列，对吗？看看这个小提琴： http: [//jsfiddle.net/victmo/f2Scp/](http://jsfiddle.net/victmo/f2Scp/) 我想你忘了添加`display:block`到你的栏或列。

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T19:06:59.847

您是否考虑过使用树表？类似[http://ludo.cubicphuse.nl/jquery-treetable/](http://ludo.cubicphuse.nl/jquery-treetable/)

听起来将已经显示列数据的东西改编成导航控件比尝试修改 jQuery 手风琴更容易。

# java - Java 中的访问器，求助？

> ID：15369595
> 
> 赞同：0
> 
> 时间：2013-03-12T18:47:11.977
> 
> 标签：java

我只是想知道是否可以对访问器提供一点帮助，正如您从我的代码中看到的那样，我不应该使用 int numCols 和 int numRows 作为实例变量。

我们需要访问器 getNumOfCols() 和 getNumOfRows()。我们需要这些，因为面板不应该有自己的 numCols 和 numRows 实例变量。如果您复制此类数据，您只是在自找麻烦，因为它可能会变得不一致。

请任何人都可以帮我创建访问器以替换我的实例变量吗？

```
class MineFinderPanel extends JFrame implements MouseListener   // changed
{ 
// numCols and numRows shouldn't get here.  They should be gotten from the model
int numCols;
int numRows; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T18:53:57.003

访问器方法，称为 getter 和 setter，仅用于操作应该是私有的并且只能由创建它的类操作的字段或变量。因此，具有公共方法的私有字段。

所以你应该有一个为你的框架创建模型的类。

访问器方法的示例。您将不得不创建另一个类来实现它们：

```
// private - only available within its class
private int numCols;
private int numRows;

// public methods - ability to access the private fields.
public int getNumCols() {
    return this.numCols;
}

public int getNumRows() {
    return this.numRows;
} 
```

# xcode - 有没有办法将特定框架从网站加载到 iPhone 应用程序？

> ID：15369596
> 
> 赞同：1
> 
> 时间：2013-03-12T18:47:12.710
> 
> 标签：xcode, xcode4, uiwebview, xml-parsing, xcode4.5

我对xcode和objective-c真的很陌生。总体而言，对编程来说相当新。有没有办法只将网站上的特定框架加载到`UIWebView`xcode 上？

我有一个需要加载到应用程序的网站，但该网站有不同的部分（它有一个日历、一个事件列表和一些额外的信息）。现在我正在将它加载到 中 `UIWebView`，但是网站看起来太拥挤了，所以我只需要加载事件列表部分。我知道该网站使用 plone，但同样，我不确定那是什么。

我是否必须解析 XML 并将其加载到表格视图中，还是有办法使用`UIWebView`并且只加载网站的一部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:31:28.810

如果您知道框架内容的 URL，只需将其作为`UIWevView`的 URL 传递。

**更新：**我以为您在谈论 html`<frame>`标签，它适用于上述解决方案。但是，如果您的意思是`<div>`要从站点中提取特定内容，那将要复杂得多。

# session - WebSEAL - WAS 7 - 会话失效无法清除 WAS 会话高速缓存

> ID：15369597
> 
> 赞同：0
> 
> 时间：2013-03-12T18:47:14.037
> 
> 标签：session, websphere, logout, webseal

我在 TAM WebSEAL 6.1 后面的 WAS 7 上部署了一个 Web 应用程序，使用 TAI、LTPA2 单点登录用户登录，并且 SSO 运行良好。在注销时，`HTTPSession.invalidate()`被调用并被`https://<webseal url>/pkmslogout` 调用。

问题是：注销后，WebSEAL 会话似乎已清除，但 WebSphere JSESSIONID cookie 仍然存在。此外，当使用新用户登录时，WAS 上的会话缓存具有旧用户信息。

有谁知道，如果我正在做正确的注销实施？SSO 设置中是否有任何其他配置可以保护此会话缓存在会话无效时被删除？

注销代码的实现：下面代码中的 logOutURL 是 WebSEAL pkmslogout 链接

```
public void logout(ActionEvent event ){
    String logOutURL = (String) event.getComponent().getAttributes().get(ATTRIBUTE_NAME_LOGOUT_URL);        
    getSession().invalidate();
    try {
        FacesContext c = FacesContext.getCurrentInstance();
        if( c!= null )
        {
            c.getExternalContext().redirect(logOutURL);
        }
    } catch (IOException e) {
        log.error( "Exception while processing logout redirect.", e );
    }
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:10:41.587

从其他论坛了解到，来自 WebSphere 的“ibm_security_logout”将有助于撤销会话。详情：[http ://www-01.ibm.com/support/docview.wss?uid=swg21254556](http://www-01.ibm.com/support/docview.wss?uid=swg21254556)

我还没有尝试这个，我会保持论坛发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-27T11:22:34.710

在 WebSphere 8.5.5（也可能在旧版本中）上，您可以设置自定义属性。

安全 -> 全局安全 -> 自定义属性

com.ibm.ws.security.web.logoutOnHTTPSessionExpire=true

# vba - VBA LastRow 计算不起作用

> ID：15369599
> 
> 赞同：4
> 
> 时间：2013-03-12T18:47:23.917
> 
> 标签：vba, excel, autofilter

我有一个自动过滤范围的工作表，该范围从 cell 开始`B3`。列`A`包含一些宏按钮，但实际上是空白的。前两行包含有关主范围内数据的信息。

在 VBA 中，我使用我认为是确定工作表中最后一行的标准方法（在这种情况下，我不能依赖`.End`单列上的方法）：

```
LastRow = Activesheet.Cells.Find("*",SearchOrder:=xlByRows,SearchDirection:=xlPrevious).Row 
```

然而，有时这会返回一个值，即使我有数千行数据。似乎只有在设置了过滤器时才会这样做（但仍然有可见的行中包含数据），但即便如此它并不总是发生，我也看不到它的模式。

我知道还有其他解决方案——我已经改用一种`UsedRange`技术，但令人沮丧的是，这个特定的解决方案失败了，否则它会是这种情况下最有效的解决方案。

有谁知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:03:05.373

试试这个...

```
Dim LastRow as long

With ActiveSheet
    LastRow = .Cells(.Rows.Count, "A").End(xlUp).Row
End With 
```

这将获得 A 列中的最后一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T00:51:38.693

您是否考虑过使用 Greg 的答案，但循环查找所有列的最高行？就像是：

```
LastRow = 1
With ActiveSheet
   For i = 1 to .UsedRange.Columns.Count
      If .Cells(.Rows.Count, i).End(xlUp).Row > LastRow Then
         LastRow = .Cells(.Rows.Count, i).End(xlUp).Row
      EndIf
   Next i
End With 
```

此解决方案将允许在底部行中随机填充空白值。UsedRange 很棘手，因为它会返回曾经被编辑过的最远的行/列（即使它当前是空白的）。根据我的经验，如果您在工作表中按下 Ctrl-Up，则 Range.End(xlUp) 的行为与您预期的一样。这有点更可预测。

如果您打算使用 .Find 尝试查看 After:=[A1] 参数。我还没有探索过这个函数的特性，但这将是我开始考虑这个问题的地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-20T02:25:13.833

建议您尝试使用`Find`指定查找`XlFormulas`为不同`XlValues`，隐藏单元格（但不是过滤单元格）将使用此参数检测。

```
Sub Test()
Dim rng1 As Range
Set rng1 = ActiveSheet.Cells.Find("*", [a1], xlFormulas, , xlByRows, xlPrevious)
If Not rng1 Is Nothing Then MsgBox rng1.Row
End Sub 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-28T21:20:07.990

今天早上我遇到了完全相同的问题。

起初，我确信“.find”功能不稳定。

但是，在摆弄了一段时间之后，我发现我的表格中的行号太深了一个非空单元格，认为它是 1,000 或 10,000 或类似的。我删除了它，“.find”又可以工作了。可能某些内部 VBA 变量的限制不够大。

做这个：

1) 按 CTRL + END

2）识别非空单元格，假设这是无意中填写的，并将其删除。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T19:16:59.530

试试下面的代码：

```
Sub GetColA_LastRow()
    Dim ws As Worksheet
    Dim lRow As Long

    Set ws = ThisWorkbook.Sheets("Sheet1")

    With ws
        lRow = .Range("A" & .Rows.Count).End(xlUp).Row
    End With

    MsgBox "The last row which has data in Col A of Sheet1 is " & lRow
End Sub 
```

或者

```
sub getLastRow()
 dim lastRow as long
 lastRow = Sheets("sheet1").Range("A65000").End(xlUp).Row

end sub 
```

您也可以访问链接了解更多详情 [http://www.siddharthout.com/2012/10/02/find-last-row-in-an-excel-sheetvbavb-net/](http://www.siddharthrout.com/2012/10/02/find-last-row-in-an-excel-sheetvbavb-net/)

评论后更新代码：

```
Sub getLastRow()

    Dim rng As Range, lastRow As Long
    Set rng = Cells.Find("mango") ' here you enter whatever you want to find

    If Not rng Is Nothing Then
        lastRow = Sheets("sheet1").Cells(65000, rng.Column).End(xlUp).Row
    End If

End Sub 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-12T21:46:01.503

怎么样：

```
with activesheet.usedrange
    LastRow = .rows.count
end with 
```

菲利普

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-07T23:01:06.700

我的类似问题是，无论有无过滤之前的空单元格，最后一行和 col 使用的是什么。我从我能找到的点点滴滴拼凑起来，它做了我认为你和我想要的，至少对于填充数据的单元格。

```
Function FindLastUsedRowAndCol(ByVal ws As Worksheet) As Variant()

Dim LastColRange As Range
Dim LastCol As Integer
Dim LastRow As Long
Dim LastRowTmp As Long
Dim RowXCol(2) As Variant

Set LastColRange = ws.Cells.Find(What:="*", After:=ws.Cells(1, 1), LookIn:=xlFormulas, LookAt:= _
    xlPart, SearchOrder:=xlByColumns, SearchDirection:=xlPrevious, MatchCase:=False)
LastCol = LastColRange.Column

LastRow = 1

For i = 1 To LastCol Step 1
    If ws.FilterMode Then
        LastRow = ws.AutoFilter.Range.Rows.Count
        LastRowTmp = Cells(ws.Rows.Count, i).End(xlUp).row
        If LastRowTmp > LastRow Then LastRow = LastRowTmp
    Else
        LastRowTmp = Cells(ws.Rows.Count, i).End(xlUp).row
        If LastRowTmp > LastRow Then LastRow = LastRowTmp
    End If
Next i

RowXCol(1) = LastRow
RowXCol(2) = LastCol
FindLastUsedRowAndCol = RowXCol

End Function 
```

并测试：

```
Sub testit()
Dim ws As Worksheet
Set ws = Application.Worksheets("Sheet1")
cr = FindLastUsedRowAndCol(ws)
MsgBox "row: " & cr(1) & " col: " & cr(2)
End Sub 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-07-15T13:23:11.830

我知道这是一篇旧帖子，但我已经看到了这个问题，但没有看到任何解决这个问题的答案。它似乎有时会发生在最后一行之后立即隐藏行的数据集上。无论您是设置为查看 xlformulas 还是 xlvalues 都没有关系，我已经尝试了我能找到的 find 命令的所有排列，并且它始终返回值 1。（正如 OP 所说）上面的解决方案不能解决这个问题。在这种情况下，我必须创建一个迭代查找最后一行的函数（下面的关键代码位 - 在我的情况下，我需要在各种数据表的前两列中找到 lastrow）：

```
On Error GoTo ExitLoop
StartRow = 1
LastRow = .Columns("A:B").Find(What:="*", SearchDirection:=xlNormal, LookIn:=xlValues, SearchOrder:=xlByRows).Row
StartRow = LastRow + 1
Do Until WorksheetFunction.CountA(.Range(.Cells(StartRow, 1), .Cells(1048576, 2))) = 0
    FindLastRow = .Range(.Cells(StartRow, 1), .Cells(1048576, 2)).Find(What:="*", SearchDirection:=xlNormal, LookIn:=xlValues, SearchOrder:=xlByRows).Row
    StartRow = LastRow + 1
Loop
ExitLoop: 
```

# algorithm - 高阶矩阵乘法

> ID：15369602
> 
> 赞同：0
> 
> 时间：2013-03-12T18:47:27.437
> 
> 标签：algorithm, multiprocessing, matrix-multiplication

我正在尝试使用多个进程在 C 中进行矩阵乘法，每个子进程都在计算矩阵的一行。但是如果它是 200 的顺序，那么将有 200 个进程，这对于 2 3 个 CPU 来说效率很低。如果我想将进程数保持在 10 或 12，我该如何继续。计算顺序会有变化吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:09:20.693

在矩阵乘法中利用多个过程的一种方法是从递归算法开始。例如，[Strassen 算法](http://en.wikipedia.org/wiki/Strassen_algorithm)递归地将问题分解为越来越小的乘法，这些乘法可以卸载到任意数量的处理器。此外，普通矩阵乘法的阶数为 O(N^3)，但 Strassen 算法可以将其降低到 O(N^2.8)，这对于较大的矩阵来说可能是相当大的。

*注意*：通常高阶是指级数展开中的扩展项，多项式中的更多项等，通常不是方阵的大小。

# openmp - OpenMP - 指令和构造之间的区别

> ID：15369604
> 
> 赞同：5
> 
> 时间：2013-03-12T18:47:30.410
> 
> 标签：openmp

这似乎是一个愚蠢的问题，但我正在学习 OpenMP，我对术语有点困惑。指令和构造是一回事吗？或者指令是一个包罗万象的词，包括结构和孤立指令？

我见过类似 `PARALLEL Directive`but also之类的词`PARALLEL Region Construct` 并且在一些教程`Work Sharing Constructs`中列在`OpenMP Directives`.

[Microsoft 页面](http://msdn.microsoft.com/en-us/library/wbc5t5zd%28v=vs.80%29.aspx)让我认为整个下一行可能是一个指令：

```
 #pragma omp directive-name  [clause[ [,] clause]...] new-line 
```

由于声明，“**每个指令都以 #pragma omp 开头**”。这意味着单词`parallel`和`for`（以及其他）是构造。然而，与此同时，在上面完全相同的行中，他们`directive-name`紧跟在 pragma 之后。

如果有人能澄清一下，那就太好了：D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T23:06:27.657

[实际阅读OpenMP 规范](http://www.openmp.org/mp-documents/OpenMP3.1.pdf)并不丢人。§1.2.2 完全专用于 OpenMP 术语。人们可以在其中找到各种定义，包括：

> **指令**- 在 C/C++ 中为 a `#pragma`，在 Fortran 中为注释，用于指定*OpenMP 程序*行为。*注释：有关 OpenMP指令*语法的说明，请参见第 22 页的第 2.1 节。

第 22 页的第 2.1 节内容如下：

> C/C++ 的 OpenMP 指令由`pragma`预处理指令指定。OpenMP 指令的语法由附录 C 中的语法正式指定，非正式如下：
> 
> `#pragma omp` *指令名称 [clause[ [,] 子句]...] 换行符*
> 
> 每个指令都以`#pragma omp`. 该指令的其余部分遵循编译器指令的 C 和 C++ 标准的约定。特别是，可以在 之前和之后使用`#`空格，有时必须使用空格来分隔指令中的单词。后面的预处理标记`#pragma omp`会被宏替换。
> 
> 指令区分大小写。
> 
> OpenMP 可执行指令最多适用于一个后续语句，该语句必须是结构化块。

另一个方便的定义：

> **可执行指令**-非声明性的 OpenMP*指令。*也就是说，它可以放置在可执行上下文中。注释：除*指令*外的所有`threadprivate` *指令*都是*可执行指令*。

然后是构造，用前两个术语解释：

> **构造**- OpenMP*可执行指令*（对于 Fortran，成对的**结束** *指令*，如果有）和相关的语句、循环或*结构化块*（如果有），不包括任何调用例程中的代码。也就是说，在*可执行指令*的词法范围内。

微软的页面只是引用了（很多）早期 OpenMP 规范的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T19:56:14.723

如果我没看错的话，**指令**就是 OpenMP 语句，比如

```
#pragma omp for 
```

或者

```
#pragma omp parallel private(th_id) shared(nthreads) 
```

指令可能包括**子句**，如`private`上面的语句或`schedule(dynamic, CHUNKSIZE)`.

指令与代码结合形成一个**结构**。也就是说，构造是完成某事的*模式。*所以“并行构造”是一个`parallel`指令、它的可选子句和任何要执行的代码：

```
#pragma omp parallel
  printf("Hello, world.\n"); 
```

“工作共享构造”是一个`parallel for`指令，后跟循环的代码：

```
#pragma omp parallel for
for (i = 0; i < N; i++)
    a[i] = 2 * i; 
```

# c++ - 模板参数 vs 类型参数 vs 非类型参数

> ID：15369612
> 
> 赞同：4
> 
> 时间：2013-03-12T18:47:45.870
> 
> 标签：c++, templates, language-lawyer

在第 14 章（模板）的 C++ 标准中，它引用了具有多个不同名称的模板参数，具体取决于它们的上下文。

*非类型参数*

```
 template<int N>
 class foo {}; 
```

*模板参数*

```
template<typename T>
class bar {}; 
```

*类型参数*

```
 ????? 
```

在下面的引用中，这看起来像是三个不同的东西，但是我不知道什么是*类型参数*？

**14.1 模板参数[temp.param]**

> 9 ... 可以为不是模板参数包 (14.5.3)的任何类型的模板参数**（类型、非类型、模板）指定默认模板参数。**...

您可以在此处看到它具有三个不同的模板参数名称。如果*模板参数*是其他两个的概括，那么为什么将其包含在上面的列表中。

然后在第 14.1.2 节中将它们称为*type*和*non-type*，并将模板参数称为泛化。

那是什么？有人可以解释吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T18:49:58.123

*据说模板参数*有三种类型：

1.  类型模板参数

    ```
    template<typename T>
    class bar {}; 
    ```

2.  非类型模板参数

    ```
    template<int N>
    class foo {}; 
    ```

3.  模板模板参数

    ```
    template<template<class> class T>
    class baz {}; 
    ```

但是，我确实同意这是定义错误的。在语法中，以开头的*模板参数是**type-parameter*`template`的可能产生之一。

 ** * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-12T18:50:13.253

在您使用此措辞的上下文中，“*模板参数*”是类模板的参数。例如：

```
template<template<typename, typename> class T, typename U, int N>
struct { ... }; 
```

这里，`T`是*模板参数*，`U`是*类型参数*，`N`是非类型参数。

> 然后在第 14.1.2 节中将它们称为类型和非类型，并将模板参数称为泛化。

这里重要的是消除“模板”一词的使用歧义。在许多情况下，它仅用于表示这些是“模板”的参数（例如，与函数的参数相反）。在这种情况下，这些类别（分别）成为“*模板模板参数*”、“*模板类型参数*”和“*模板非类型参数*”。

此外，在某些情况下，第一类也被认为定义了“非类型参数”，因为可以为其提供的参数不是*类型*（它们是模板）。因此，有时您可能会发现“*非类型、非模板参数*”一词严格指第三类（即上述类别`N`）。

另请参阅 C++11 标准第 14.1/2 段的脚注 136：

> 由于*模板模板参数*和*模板模板参数*被视为用于描述目的的类型，因此术语*非类型参数*和*非类型参数*用于指代非类型、非模板参数和参数。*

# c++ - boost install windows msvc 10.0 -- example.cpp 无法链接

> ID：15369613
> 
> 赞同：2
> 
> 时间：2013-03-12T18:47:47.623
> 
> 标签：c++, visual-c++, boost

下载了 boost 1.53.0 并在 WinXP 上干净地执行了简化的安装说明

> 引导启动
> .\b2

构建的库都是 libboost_xxxxx-vc100-mt-gd-1_53.lib 的形式，但由于链接器正在寻找 libboost_xxxxx-vc100-mt-s-gd-1_53.lib，因此出现链接器错误。如何获得构建的库的 -s （静态）版本？我假设 .lib 已经全部是静态的，但是重命名它们会导致不同的错误。

当我编译 example.cpp 程序时，我得到一个链接器错误

```
$ cl /EHsc   -IC:/PROGRA~1/MICROS~1.0/VC/include -ID:/boost/boost_1_53_0 example.cpp   /link 
Microsoft (R) 32-bit C/C++ Optimizing Compiler Version 16.00.30319.01 for 80x86
Copyright (C) Microsoft Corporation.  All rights reserved.

example.cpp
Microsoft (R) Incremental Linker Version 10.00.30319.01
Copyright (C) Microsoft Corporation.  All rights reserved.

/out:example.exe 
example.obj 
LINK : fatal error LNK1104: cannot open file 'libboost_regex-vc100-mt-s-1_53.lib' 
```

如果我将 libboost_regex-vc100-mt-1_53.lib 复制到 libboost_regex-vc100-mt-s-1_53.lib （连同其他报告丢失，我会收到这样的错误

```
msvcprt.lib(MSVCP100.dll) : error LNK2005: "void __cdecl std::_Xlength_error(char const *)" (?_Xlength_error@std@@YAXPBD@Z) already defined in libcpmt.lib(xthrow.obj) 
```

当我使用 b2 --build-type=complete D:\boost\boost_1_53_0>.\b2 --build_type=complete 构建时

> 构建 Boost C++ 库。
> 
> 执行配置检查
> 
> ```
> - 32-bit                   : yes
> - x86                      : yes
> - has_icu builds           : no warning: Graph library does not contain MPI-based parallel components. note: to enable them, add 
> ```
> 
> “使用 mpi ；” 到你的 user-config.jam - iconv (libc) : no - iconv (separate) : no - icu : no - icu (lib64) : no - gcc visibility : no - long double support : yes 警告：跳过可选的消息传递接口(MPI) 库。注意：要启用 MPI 支持，请添加“使用 mpi ;” 到 user-config.jam。注意：要禁止显示此消息，请将“--without-mpi”传递给 bjam。注意：否则，您可以放心地忽略此消息。警告：未配置 python 安装和自动配置注意：失败。请参阅 [http://www.boost.org/libs/python/doc/building.html](http://www.boost.org/libs/python/doc/building.html)注意：有关配置说明或传递 --without-python 以注意：禁止显示此消息并静默跳过所有 Boost。
> 
> 组件配置：
> 
> ```
> - atomic                   : building
> - chrono                   : building
> - context                  : building
> - date_time                : building
> - exception                : building
> - filesystem               : building
> - graph                    : building
> - graph_parallel           : building
> - iostreams                : building
> - locale                   : building
> - math                     : building
> - mpi                      : building
> - program_options          : building
> - python                   : building
> - random                   : building
> - regex                    : building
> - serialization            : building
> - signals                  : building
> - system                   : building
> - test                     : building
> - thread                   : building
> - timer                    : building
> - wave                     : building 
> ```
> 
> ...耐心... ...耐心... ...耐心... ...耐心... ...找到 7117 个目标...
> 
> Boost C++ 库已成功构建！
> 
> 应将以下目录添加到编译器包含路径：
> 
> ```
> D:/boost/boost_1_53_0 
> ```
> 
> 应将以下目录添加到链接器库路径：
> 
> ```
> D:\boost\boost_1_53_0\stage\lib 
> ```

我仍然没有看到图书馆

```
> D:\boost\boost_1_53_0>dir D:\boost\boost_1_53_0\stage\lib  Volume in
> drive D is DATA  Volume Serial Number is A065-A7DE
> 
>  Directory of D:\boost\boost_1_53_0\stage\lib
> 
> 03/12/2013  11:26 AM    <DIR>          . 03/12/2013  11:26 AM    <DIR>
> .. 03/12/2013  10:36 AM             7,978
> libboost_atomic-vc100-mt-1_53.lib 03/12/2013  10:26 AM           
> 57,152 libboost_atomic-vc100-mt-gd-1_53.lib 03/12/2013  10:36 AM      
> 355,990 libboost_chrono-vc100-mt-1_53.lib 03/12/2013  10:26 AM        
> 1,493,080 libboost_chrono-vc100-mt-gd-1_53.lib 03/12/2013  10:36 AM   
> 2,710 libboost_context-vc100-mt-1_53.lib 03/12/2013  10:27 AM         
> 5,436 libboost_context-vc100-mt-gd-1_53.lib 03/12/2013  10:36 AM      
> 626,878 libboost_date_time-vc100-mt-1_53.lib 03/12/2013  10:27 AM     
> 2,097,458 libboost_date_time-vc100-mt-gd-1_53.lib 03/12/2013  10:36 AM
> 5,482 libboost_exception-vc100-mt-1_53.lib 03/12/2013  10:27 AM       
> 39,434 libboost_exception-vc100-mt-gd-1_53.lib 03/12/2013  10:36 AM   
> 871,780 libboost_filesystem-vc100-mt-1_53.lib 03/12/2013  10:27 AM    
> 4,306,464 libboost_filesystem-vc100-mt-gd-1_53.lib 03/12/2013  10:38
> AM         5,840,912 libboost_graph-vc100-mt-1_53.lib 03/12/2013 
> 10:28 AM        14,463,054 libboost_graph-vc100-mt-gd-1_53.lib
> 03/12/2013  10:38 AM           418,180
> libboost_iostreams-vc100-mt-1_53.lib 03/12/2013  10:28 AM        
> 1,272,374 libboost_iostreams-vc100-mt-gd-1_53.lib 03/12/2013  10:39 AM
> 6,897,100 libboost_locale-vc100-mt-1_53.lib 03/12/2013  10:29 AM      
> 22,057,274 libboost_locale-vc100-mt-gd-1_53.lib 03/12/2013  10:41 AM  
> 809,360 libboost_math_c99-vc100-mt-1_53.lib 03/12/2013  10:31 AM      
> 2,903,758 libboost_math_c99-vc100-mt-gd-1_53.lib 03/12/2013  10:41 AM 
> 810,648 libboost_math_c99f-vc100-mt-1_53.lib 03/12/2013  10:31 AM     
> 2,898,286 libboost_math_c99f-vc100-mt-gd-1_53.lib 03/12/2013  10:41 AM
> 787,332 libboost_math_c99l-vc100-mt-1_53.lib 03/12/2013  10:31 AM     
> 2,863,258 libboost_math_c99l-vc100-mt-gd-1_53.lib 03/12/2013  10:39 AM
> 5,859,300 libboost_math_tr1-vc100-mt-1_53.lib 03/12/2013  10:29 AM    
> 14,516,786 libboost_math_tr1-vc100-mt-gd-1_53.lib 03/12/2013  10:40 AM
> 6,145,246 libboost_math_tr1f-vc100-mt-1_53.lib 03/12/2013  10:30 AM   
> 15,051,100 libboost_math_tr1f-vc100-mt-gd-1_53.lib 03/12/2013  10:40
> AM         5,807,100 libboost_math_tr1l-vc100-mt-1_53.lib 03/12/2013 
> 10:30 AM        14,407,024 libboost_math_tr1l-vc100-mt-gd-1_53.lib
> 03/12/2013  10:44 AM           219,580
> libboost_prg_exec_monitor-vc100-mt-1_53.l ib 03/12/2013  10:34 AM     
> 1,239,714 libboost_prg_exec_monitor-vc100-mt-gd-1_5
> 3.lib 03/12/2013  10:42 AM         6,461,312 libboost_program_options-vc100-mt-1_53.li b 03/12/2013  10:32 AM      
> 20,176,878 libboost_program_options-vc100-mt-gd-1_53 .lib 03/12/2013 
> 10:42 AM            83,144 libboost_random-vc100-mt-1_53.lib
> 03/12/2013  10:32 AM           405,594
> libboost_random-vc100-mt-gd-1_53.lib 03/12/2013  10:37 AM       
> 10,593,312 libboost_regex-vc100-mt-1_53.lib 03/12/2013  10:28 AM      
> 34,707,966 libboost_regex-vc100-mt-gd-1_53.lib 03/12/2013  10:43 AM   
> 11,509,722 libboost_serialization-vc100-mt-1_53.lib 03/12/2013  10:33
> AM        30,119,740 libboost_serialization-vc100-mt-gd-1_53.l ib
> 03/12/2013  10:44 AM         1,000,288
> libboost_signals-vc100-mt-1_53.lib 03/12/2013  10:34 AM        
> 3,919,576 libboost_signals-vc100-mt-gd-1_53.lib 03/12/2013  10:36 AM  
> 83,030 libboost_system-vc100-mt-1_53.lib 03/12/2013  10:26 AM         
> 414,676 libboost_system-vc100-mt-gd-1_53.lib 03/12/2013  10:44 AM     
> 10,382,950 libboost_test_exec_monitor-vc100-mt-1_53\. lib 03/12/2013 
> 10:34 AM        24,314,874 libboost_test_exec_monitor-vc100-mt-gd-1_
> 53.lib 03/12/2013  10:45 AM           978,672 libboost_thread-vc100-mt-1_53.lib 03/12/2013  10:35 AM        
> 2,921,850 libboost_thread-vc100-mt-gd-1_53.lib 03/12/2013  10:45 AM   
> 177,274 libboost_timer-vc100-mt-1_53.lib 03/12/2013  10:35 AM         
> 858,164 libboost_timer-vc100-mt-gd-1_53.lib 03/12/2013  10:45 AM      
> 11,293,008 libboost_unit_test_framework-vc100-mt-1_5
> 3.lib 03/12/2013  10:35 AM        26,806,730 libboost_unit_test_framework-vc100-mt-gd- 1_53.lib 03/12/2013  10:46
> AM        47,173,122 libboost_wave-vc100-mt-1_53.lib 03/12/2013  10:36
> AM        99,093,052 libboost_wave-vc100-mt-gd-1_53.lib 03/12/2013 
> 10:43 AM         8,910,826 libboost_wserialization-vc100-mt-1_53.lib
> 
> 03/12/2013  10:33 AM        20,527,762
> libboost_wserialization-vc100-mt-gd-1_53\. lib 03/12/2013  11:26 AM   
> <DIR>          xx
>               56 File(s)    508,050,750 bytes
>                3 Dir(s)   8,116,432,896 bytes free
> 
> D:\boost\boost_1_53_0> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T19:30:20.850

[您可以在此处](http://www.boost.org/doc/libs/1_53_0/more/getting_started/windows.html#invoke-b2)查看 boost 库的命名约定。Boost.Build 属性可以在[这里](http://www.boost.org/boost-build2/doc/html/bbv2/overview/invocation.html#bbv2.overview.invocation.properties)找到。

因此，如果您需要一个静态链接 CRT 的静态库，请像这样调用 bjam：

```
b2 toolset=msvc-10.0 release threading=multi link=static runtime-link=static 
```

# iphone - 根据选择更改 UITableViewCell 中按钮的背景颜色

> ID：15369615
> 
> 赞同：2
> 
> 时间：2013-03-12T18:47:51.813
> 
> 标签：iphone, ios, uitableview, uibutton

我有一个 UITableView。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
//Where we configure the cell in each row

static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell;

cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

self.myButton = [UIButton buttonWithType:UIButtonTypeCustom];
self.myButton.tag = 5;
self.myButton.frame = CGRectMake(190.0f, 5.0f, 70.0f, 25.0f);
self.myButton.layer.borderColor = [UIColor blackColor].CGColor;
self.myButton.layer.borderWidth = 0.5f;
self.myButton.backgroundColor = [UIColor grayColor];
[self.myButton setTitle:@"Set Active" forState:UIControlStateNormal];
[self.myButton addTarget:self action:@selector(myButton:) forControlEvents:UIControlEventTouchUpInside];
[cell.contentView addSubview: self.myButton];

cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

}

-(void) myButton:(id)sender{
[sender setBackgroundColor:[UIColor redColor]];
} 
```

假设 tableview 部分中有 3 行。我有 3 行的按钮。在第一种情况下，第一行的按钮应该是红色的，其他两行应该是灰色的。如果我选择第二行的按钮，那么第二行的按钮应该是红色的，另外 2 个是灰色的，以此类推。我还没有想出办法来做到这一点。有什么建议么？

我可以更改从单元格中选择的按钮的颜色。但在同一情况下，先前选择的按钮和所有其他按钮（除了选定的按钮）应该是默认颜色。一次只会突出显示一个按钮，并且该按钮始终是该实例的选定按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:33:01.293

我认为这样做的正确方法 - 子类化`UITableViewCell`并声明自己的协议，该协议将通知委托在哪个单元格按钮被按下，并在委托中 - 循环遍历所有单元格并为所有单元格设置默认颜色并为选定的红色设置。我做了[演示项目](https://dl.dropbox.com/u/8255225/test_cell.zip)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T05:04:01.367

简单的方法是为每个按钮设置不同的标签。像这样：

```
button.tag = indexPath.row + c; 
```

当'c'是常数时。在你的方法中：

```
-(void) myButton:(id)sender{
     for( int i=0; i<numberOfRowsInTable; ++i )
        [(UIButton *)[self.view viewForTag:i+c] setBackgroundColor:[UIColor grayColor]];
     [(UIButton *)sender setBackgroundColor:[UIColor redColor]];
} 
```

但是，如果您在表格中有 2 个或更多部分，这种方式可能行不通

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T18:59:08.517

看看这个：[如何循环遍历 UITableView 的单元格？](https://stackoverflow.com/questions/6914183/how-can-i-loop-through-uitableviews-cells)

循环遍历单元格并将“非活动”按钮设置为灰色。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T05:30:35.227

试试这个代码：

```
-(void) myButton:(id)sender{
    NSLog(@"sender Tag=== %d",[sender tag]);
    UIButton *btn=(UIButton *)sender;
    [btn setBackgroundColor:[UIColor redColor ]];

} 
```

# wcf - 如何使用 WCF 自托管处理 Ajax JQUERY POST 请求

> ID：15369619
> 
> 赞同：14
> 
> 时间：2013-03-12T18:48:00.637
> 
> 标签：wcf, jquery, http-post, wcf-data-services

创建 RESTful WCF 服务器的原因有很多（这很容易），如果您可以避免使用 ASP 和它的安全框（如果您所做的只是返回信息的简单请求），那就更好了。请参阅：http: [//msdn.microsoft.com/en-us/library/ms750530.aspx](http://msdn.microsoft.com/en-us/library/ms750530.aspx)，了解如何执行此操作。

我发现处理 AJAX (JQUERY) GET 请求很容易。但是在 POST 中处理 JSON 是很棘手的。

下面是一个简单的 GET 请求合约示例：

```
 [OperationContract]
    [WebGet(ResponseFormat = WebMessageFormat.Json)]
    String Version(); 
```

实现在这里（返回一个 JSON）

```
 public partial class CatalogService : ICatalogService
{
    public String Version()
    {
        mon.IsActive = true;
        this.BypassCrossDomain();
        ViewModel.myself.TransactionCount++;
        return ViewModel.myself.VersionString;
    }
} 
```

啊，但是如果你想发布一些 JSON 怎么办。你会发现很多关于堆栈溢出的文章告诉你你所要做的就是：

```
 [OperationContract]
    [WebInvoke(Method = "POST", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
    BuildResponse BuildToby(BuildRequest request); 
```

它将接收 JSON 消息，反序列化为普通 .NET 对象 (PONO) 并让您使用它。事实上，当我在 Fiddler 中构建请求时，这很好用。

```
POST /BuildToby HTTP/1.1
User-Agent: Fiddler
Content-Type: application/json
Host: localhost:4326
Content-Length: 1999 
```

但是，当您在 JQUERY 1.8 中使用以下 AJAX 时，您会发现一个惊喜：

通过指定“application/json”的内容类型，您会发现浏览器会触发“预检”检查，以查看是否允许您发布除 www-url-encloded 发布消息之外的内容。（[堆栈溢出中有关于此的注释](https://stackoverflow.com/questions/8685678/cors-how-do-preflight-an-httprequest)）。

```
 var request = JSON.stringify({ FrameList: ExportData.buildList });
    var jqxhr = $.ajax({
    type: "POST",
    url: "http://localhost:4326/BuildToby",
    data: request,
    contentType: "application/json; charset=utf-8",
    dataType: "json"
}); 
```

这是提琴手报告的内容：（请注意，它不是 POST 消息，而是 OPTIONS 消息）。

```
OPTIONS http://localhost:4326/BuildToby HTTP/1.1
Host: localhost:4326
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:19.0) Gecko/20100101 Firefox/19.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
Origin: http://ysg4206
Access-Control-Request-Method: POST
Access-Control-Request-Headers: content-type
Connection: keep-alive
Pragma: no-cache
Cache-Control: no-cache 
```

发生的事情是浏览器（在本例中为 Firefox）必须使用 OPTIONS HTTP 消息对服务器进行额外调用，以查看是否允许 POST（此内容类型）。

所有有关解决此问题的文章都是关于[编辑 GLOBAL.ASAX](https://stackoverflow.com/questions/8685678/cors-how-do-preflight-an-httprequest)的，如果您在 ASP.NET 中这很好，但如果您正在执行自托管 WCF，则无用。

所以现在你看到了这个问题（对不起，啰嗦了这么多，但我想把这篇文章写成完整的文章，以便其他人可以关注结果）。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-12T18:56:25.603

好的，现在有一些真正的 MSDN 大师已经编写了解决方案，但我无法弄清楚：http: [//blogs.msdn.com/b/carlosfigueira/archive/2012/05/15/implementing-cors-support -in-wcf.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2012/05/15/implementing-cors-support-in-wcf.aspx)

但我想出了一个简单的解决方案。至少在 WCF 4.5 中，您可以添加自己的 OperationContract 来处理 OPTIONS 请求：

```
 [OperationContract]
    [WebInvoke(Method = "OPTIONS", UriTemplate = "*")]
    void GetOptions(); 
```

请注意，方法签名是无效的，并且没有参数。这将首先被调用，然后将调用 POST 消息。

GetOptions 的实现是：

```
 public partial class CatalogService : ICatalogService
{
    public void GetOptions()
    {
        mon.IsActive = true;
        WebOperationContext.Current.OutgoingResponse.Headers.Add("Access-Control-Allow-Origin", "*");
        WebOperationContext.Current.OutgoingResponse.Headers.Add("Access-Control-Allow-Methods", "POST, GET, OPTIONS");
        WebOperationContext.Current.OutgoingResponse.Headers.Add("Access-Control-Allow-Headers", "Content-Type");
    }
} 
```

这就是你所要做的。

您可能还想将此属性添加到您的服务类，以便您可以序列化大型 JSON：

```
//This defines the base behavior of the CatalogService. All other files are partial classes that extend the service
[ServiceBehavior(MaxItemsInObjectGraph = 2147483647)]       // Allows serialization of very large json structures
public partial class CatalogService : ICatalogService
{
    PgSqlMonitor mon = new PgSqlMonitor();

    private void BypassCrossDomain()
    {
        WebOperationContext.Current.OutgoingResponse.Headers.Add("Access-Control-Allow-Origin", "*");
    }
} 
```

请注意，我有一个名为 BypassCrossDomain() 的小辅助方法，我在所有 POST 和 GET 方法上调用它，这样我就可以处理跨域调用。

我在这里花了很多时间研究（在 MSDN 论坛、堆栈溢出、博客中），我希望这能帮助其他尝试做这类项目的人。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-17T16:51:46.337

Dr.YSG 回答的另一个补充是，如果您需要在将 POSTS 发送到单个 ID 的端点上支持 OPTIONS 方法，则必须实现多个 GetOptions 方法：

```
 [WebInvoke(Method = "OPTIONS", UriTemplate = "")]
    void GetOptions();
    [WebInvoke(Method = "OPTIONS", UriTemplate = "{id}")]
    void GetOptions(string id); 
```

WCF/Microsoft 无法根据端点的签名自动生成正确的 OPTIONS 响应，这真的很令人失望，但至少可以手动处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-05T18:05:54.137

除了 Dr.YSG 列出的答案之外，我发现我收到了 Firefox 通知，指出正在发生重定向，以及“405 Method Not Allowed”错误。添加

```
WebOperationContext.Current.OutgoingResponse.Headers.Add("Access-Control-Allow-Origin", "*");
WebOperationContext.Current.OutgoingResponse.Headers.Add("Access-Control-Max-Age", "1728000"); 
```

GetOptions 类似乎已经解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-09T11:26:45.083

在搜索了很多天并阅读了许多帖子和提出的解决方案之后，我认为 YSG 博士的这个问题是理解和解决我的 angular/wcf/post/CORS 等问题的最佳资源。

但真正对我有用的是：

```
protected void Application_BeginRequest(object sender, EventArgs e)
{
    if (Request.HttpMethod == "OPTIONS")
    {
        Response.End();
    }
} 
```

我知道这不是一个完整（也不是漂亮）的解决方案，因为我正在使用 global.asax 并且有很多可能的场景，但我只想分享这个替代方案，因为它最终可能会帮助其他人。

（除了添加标题）

# c# - 如何使用 Linq 处理/清理 XML 中的无效 0x14？

> ID：15369625
> 
> 赞同：1
> 
> 时间：2013-03-12T18:48:15.310
> 
> 标签：c#, xml, linq

我正在开发一个通过 SOAP 从 Web 服务下载 XML 文件的 C# 客户端。对于托管在该服务上的一些较旧的记录，XML 显然会遇到埋在其中某处的 0x14，这会引发“无效的空白字符”异常。我正在使用 Linq 将 XML 转储到文件中。有什么方法可以指示 Linq 在不丢失 XML 其余部分的情况下处理无效字符？

编辑：

这是我目前将 XML 放入文件的代码：

```
 XDocument c =
            new XDocument(
                new XElement(nameSpace + "getCitationsResponse",
                    new XAttribute(XNamespace.Xmlns + "ns1", nameSpace),
                    new XElement("list",
                        record.reportDateSpecified ? new XElement("reportDate", record.reportDate) : null,
                        new XElement("reportType", record.reportType),
                        new XElement("title", record.title),
                        new XElement("projectNumber", record.projectNumber),
                        new XElement("author", record.author),
                        new XElement("abstract", record.@abstract),
                        new XElement("numPages", record.numPages),
                        record.isDataTypeSpecified ? new XElement("isDataType", record.isRestrictedData) : null,
                        new XElement("comments", record.comments),
                        new XElement("attachments", from a in record.attachments
                                                    select new XElement("list",
                                                        new XElement("id", a.id),
                                                        new XElement("filePath", a.filePath),
                                                        new XElement("type", a.type))))); 
```

由于通常的原因，我不得不删除其中的一些内容，但我删除的内容与此处显示的内容相同。

我在发布之前使用了 SoapUI 来查看是否可以找出缺陷所在，但我在 SoapUI*中看不到*任何内容，它本身也不会产生错误。

编辑＃2：

这是确切的错误消息和堆栈跟踪。让我想知道我是否真的可以做点什么，或者我是否只需要做一些事情来记录哪些记录具有无效字符并尝试使用 SoapUI 手动将它们拉下来。

```
Invalid white space character (0x14) in text to output
   at System.Web.Services.Protocols.SoapHttpClientProtocol.ReadResponse(SoapClientMessage message, WebResponse response, Stream responseStream, Boolean asyncCall)
   at System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] parameters)
   at Downloader.WebService.ApiService.getRecords(String username, String[] ids)
   at Downloader.Central.RecordLoop(ApiService svc, Int32 offset, String username) 
```

getRecords 是 wsdl 生成的 API 调用，RecordLoop 是我编写的递归函数，用于处理通过 API 调用迭代以查找更新的记录并将它们推送到我已经发布的 Linq 函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-04T11:36:24.543

正如上面一些评论中提到的，可以执行不同的忍者技巧以使 SOAP 响应符合 XML 规范。

如果您选择更改响应以使其成为有效的 XML，则必须认真考虑您的更改是否会改变响应的含义。

在我看来，问题不在于您，而在于服务方面。如果可以，您应该尝试让服务所有者升级服务以在其 Web 服务中提供正确格式的 XML。

在处理 3rd 方 Web 服务时，我通常会执行以下操作：

*   对来自第三个 Web 服务的任何请求和响应启用完整的 XML 模式验证。如果请求或响应不是 XML 模式有效的，那么我们（客户端和服务）就有问题，可能是次要的或主要的 - 但至少它正在被处理。

*   在尝试修复内容之前，请务必记录任何架构验证错误，以确保它已记录在案。

*   确保我完全了解修改内容的系统、业务或法律影响。

*   确保我使用正确的编码格式（UTF8、Latin1 或其他格式）对响应进行编码。

无效内容通常是包含非法 XML 字符的 xml 文本元素。在传输此类文本节点时，服务端应使用 XML 编码或 base64 编码，以保留格式和内容。

在实际更改内容以使其变得有效的更多技术部分，我通常会添加 WCF 行为，这将解决这样做的问题，将修复 xml 的关注点和服务调用的业务目的分开。

如果或当服务被更新以在任何请求下提供有效的 XML 时，也很容易删除 WCF 行为。

# c# - 如何拆分字符串并将其放入 WebMatrix 中的 C# 列表中？

> ID：15369629
> 
> 赞同：1
> 
> 时间：2013-03-12T18:48:57.393
> 
> 标签：c#, asp.net, webmatrix

我已经看到了许多建议如何执行此操作的示例，但是它们都不适合我。我不确定是因为我在 WebMatrix 中还是什么，但我想做的就是在“\n”换行符上拆分一个字符串（不，不是“\n\r”，因为我已经把 \我自己在那里）。以下是我尝试过/遇到的问题：

在这里： http: [//www.dotnetperls.com/split](http://www.dotnetperls.com/split) 我不能使用 .split，因为“\n”不止一个 'char' 并且在该链接下方稍远一点，这表明我可以使用正则表达式。但是，Split，我的环境中似乎不存在这种方法。

所有其他示例都使用“拆分”，它只会看到一个字符。

考虑到这些变量，我忽略了什么？：

```
var agendaLines = Request.Unvalidated("agendas");
List<String> saveLineList = new List<String>(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T18:52:00.540

string.Split 有一个覆盖，它允许字符串，但你不需要它。'\n' 是单个字符，因为 "\" 是转义字符。所以

```
List<String> saveLineList = agendaLines.Split('\n').ToList(); 
```

应该为你工作。您可能需要添加

```
using System.Linq; 
```

但是，位于代码文件的顶部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T18:50:55.320

这工作正常

```
var saveLineList = agendaLines.Split('\n').ToList(); 
```

或者如果你想忽略`"\n\n"`

```
var saveLineList = agendaLines.Split(new char[] { '\n' }, StringSplitOptions.RemoveEmptyEntries).ToList(); 
```

这是有效的，因为实际上，`'\n'`只是一个字符。

# javascript - 清除间隔（）不工作

> ID：15369636
> 
> 赞同：1
> 
> 时间：2013-03-12T18:49:14.930
> 
> 标签：javascript, dreamweaver, clearinterval

**语法错误已修复。**Dreamweaver 说我在第 52 行的代码中有错误。我看不出有什么问题？也许这与我的 if 和 else 语句不起作用这一事实有关。

**IF 和 ELSE 语句已修复。**如果我单独测试 if 和 else 语句，它们可以正常工作，但是当我运行整个文档时，它们不会运行。有人可以告诉我错误和我的 if/else 语句不起作用是否相关，或者是否还有其他问题。

```
<script>
var car1=new Object();
car1.Name="Rusty";
car1.Speed="1px", 40;
car1.Distance=0;

var car2=new Object();
car2.Name="Dusty";
car2.Speed="2px", 40; 
car2.Distance=0;

var car3=new Object();
car3.Name="Crankshaft";
car3.Speed="4px", 40;
car3.Distance=0;

function runRusty(){

setInterval(function(){moveRusty()},40);

    function moveRusty(){car1.Distance=car1.Distance +1
        document.getElementById("rusty").style.marginLeft=car1.Distance + "px" 
        };
};

function runDusty(){

setInterval(function(){moveDusty()},40);

    function moveDusty(){car2.Distance=car2.Distance +1
        document.getElementById("dusty").style.marginLeft=car2.Distance + "px" 
        };
 };

function runCrankshaft(){

setInterval(function(){moveCrank()},40);

    function moveCrank(){car3.Distance=car3.Distance +1
          document.getElementById("crankshaft").style.marginLeft=car3.Distance + "px" 
        };
};

function winLose () {if (document.getElementById("rusty").style.marginLeft="900px"){
                     alert("Winner is Rusty!");
                     clearInterval(runRusty);
                     }

else    if(document.getElementById("dusty").style.marginLeft="900px"){
                    alert("Winner is Dusty!");
                    clearInterval(runDusty);
                    }

                else if(document.getElementById("crankshaft").style.marginLeft="900px"){
                    alert("Winner is Crankshaft!");
                    clearInterval(runCrankshaft);
                    };
                };
</script> 
```

**编辑：**

if 和 else 语句现在可以工作，因为我更改了全局声明我的函数并稍微更改了它们。代码现在看起来像这样：

```
 var car1=new Object();
    car1.Name="Rusty";
    car1.Speed=1;
car1.Distance=0;

var car2=new Object();
car2.Name="Dusty";
car2.Speed=2; 
car2.Distance=0;

var car3=new Object();
car3.Name="Crankshaft";
car3.Speed=4;
car3.Distance=0;

var moveRusty;
var moveDusty;
var moveCrankShaft;

function runRusty(){

moveRusty=setInterval(function(){

        car1.Distance=car1.Distance + car1.Speed;
        document.getElementById("rusty").style.marginLeft=car1.Distance + "px";
        winLose();
        },40);
};

function runDusty(){

moveDusty=setInterval(function(){

        car2.Distance=car2.Distance + car2.Speed;
        document.getElementById("dusty").style.marginLeft=car2.Distance + "px"; 
        winLose();
        },40);
};

function runCrankshaft(){

moveCrankShaft=setInterval(function(){

        car3.Distance=car3.Distance + car3.Speed;
        document.getElementById("crankshaft").style.marginLeft=car3.Distance + "px"; 
        winLose();
        },40);
}

function winLose () {

    if (car1.Distance >= 900){
        alert("Winner is Rusty!");
        car1.Distance = 0;
        car1.Speed = 0;
        car2.Distance = 0;
        car2.Speed = 0;
        car3.Distance = 0;
        car3.Speed = 0;

    }

    else 

    if(car2.Distance >= 900){
        alert("Winner is Dusty!");
        car1.Distance = 0;
        car1.Speed = 0;
        car2.Distance = 0;
        car2.Speed = 0;
        car3.Distance = 0;
        car3.Speed = 0;

    }

    else 

    if(car3.Distance >= 900){
        alert("Winner is Crankshaft!");
        car1.Distance = 0;
        car1.Speed = 0;
        car2.Distance = 0;
        car2.Speed = 0;
        car3.Distance = 0;
        car3.Speed = 0;

    }
};

clearInterval(moveRusty);
clearInterval(moveDusty);
clearInterval(moveCrankShaft); 
```

现在一切正常。所有警报都会发生，并且汽车的位置会被重置。但是我所有的 clearInterval() 都不起作用。我不知道 clearInterval() 是否正确使用。我想要做的是重置页面，以便我可以再次运行“游戏”。现在，唯一的方法是刷新页面。我已经仔细检查了我是如何声明我的 setInterval() 以及我如何在我的 clearInterval() 中调用它们的，就我而言，这是对的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T18:53:14.827

你用`clearInterval()`错了。您正在向它传递一个函数参数，而它需要一个对象。

```
// correct usage
var time = setInterval(stuff, 100);
clearInterval(time); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:08:56.217

当您想在语句中测试事物是否“相等”时`if`，您需要使用`==`or`===`和 NOT`=`

```
if (document.getElementById("crankshaft").style.marginLeft = "900px") // WRONG
if (document.getElementById("crankshaft").style.marginLeft == "900px") // RIGHT
if (document.getElementById("crankshaft").style.marginLeft === "900px") // BETTER 
```

阅读以下问题的答案以了解和之间的`==`区别`===`

[JavaScript 中 == 和 === 的区别](https://stackoverflow.com/questions/523643/difference-between-and-in-javascript)

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T18:57:09.887

在 else 之前有一个分号。`;`这是一个语法错误，删除它。你在奇怪的地方也有很多，我建议你不要把它们放在函数声明之后，如果块 if/else 块，循环块等。

# r - rnorm 函数使用哪种算法

> ID：15369639
> 
> 赞同：12
> 
> 时间：2013-03-12T18:49:21.087
> 
> 标签：r, random

该函数默认使用哪种算法`rnorm`来生成标准正态分布的随机数？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-12T19:04:10.900

见`?RNGkind`。默认是反演算法：

> `normal.kind`可以是“Kinderman-Ramage”、“Buggy Kinderman-Ramage”（不适用于`set.seed`）、“Ahrens-Dieter”、“Box-Muller”、“Inversion”（默认值）或“用户提供”。（关于反转，请参阅参考资料 `qnorm`。） 1.7.1 之前的版本（现在称为“Buggy”）中使用的 Kinderman-Ramage 生成器有几个近似错误，只能用于重现旧结果。“Box-Muller”生成器是有状态的，因为成对的法线是按顺序生成和返回的。每当它被选中（即使它是当前的普通生成器）和 kind 改变时，状态都会被重置。

您可以通过以下方式更改算法

```
RNGkind(normal.kind = "Box-Muller") 
```

您可以通过查看找到当前设置的内容`RNGkind()[2]`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-08-28T19:26:13.417

另一个答案就足够了，但给我留下了一些问题；特别是，我在文档中没有看到任何地方*该`"Inversion"`算法到底是什么，所以我深入研究了[源代码](https://github.com/wch/r-source/blob/776708efe6003e36f02587ad47b2eaaaa19e2f69/src/nmath/snorm.c)，它还提供了对其他可能算法的论文的学术参考，以弄清楚到底在做什么.

```
 case INVERSION:
#define BIG 134217728 /* 2^27 */
    /* unif_rand() alone is not of high enough precision */
    u1 = unif_rand();
    u1 = (int)(BIG*u1) + unif_rand();
    return qnorm5(u1/BIG, 0.0, 1.0, 1, 0); 
```

因此，默认`"Inversion"`算法似乎在基础上生成一个高精度浮点数（看起来像 53 位，或[64 位浮点数的尾数大小](https://en.wikipedia.org/wiki/Double-precision_floating-point_format)），然后将其发送到`qnorm5`作为正态分布的 CDF 函数的函数。

至于函数是如何`qnorm5`工作的（鉴于 Normal CDF 和逆 CDF 没有封闭形式），我没有太多运气破解[这里](https://svn.r-project.org/R/trunk/src/nmath/qnorm.c)似乎是源代码的内容，但它们确实提供了进一步的学术参考，即[Beasley， JD 和 SG Springer (1977)](http://www.jstor.org/stable/2346889)和[Wichura, MJ (1988)](http://www.jstor.org/stable/2347330)；前者通常用于 CDF 的小分位数，后者用于大（`z>7`左右）。

还可能有趣的是（在撰写本文时）该算法似乎由[Julia 语言共享](https://github.com/JuliaLang/Rmath-julia/blob/master/src/qnorm.c)，它也共享.`qnorm5``R`

*公平地说，回想起来，上面提到了 Wichura `?qnorm`。我认为仍然值得在这个线程中说明一些事情。

# jakarta-ee - selectonemenu 不使用从另一个 selectonemenu 更新 素面

> ID：15369641
> 
> 赞同：0
> 
> 时间：2013-03-12T18:49:25.190
> 
> 标签：jakarta-ee, jsf-2, primefaces

我正在尝试通过从其他 selectonemenu 中选择一些值来更新 selectonemenu。我正在使用`<p:ajax update=":main:deviceosName" listener="#deviceRegistration.updateOSName}" />` 但侦听器没有调用 updateOSName 方法。在这里，我尝试在使用 id-manufectureName 从 selectonemenu 中选择一些值后使用 id -deviceosName 更新 selectonemenu

另一件事 selectonemenu 与 id-manufectureName 再次更新。

这是我的 xhtml 页面-

```
<h:form id="main" enctype="multipart/form-data">
    <p:growl id="messages" showDetail="true" />

    <p:panel id="os_version_panel" header="Os Version">
        <h:panelGrid columns="3" title="Os Version" style="width:40%;height:20%;padding:10%;padding-left:30%">

            <h:outputLabel for="manufectureName" value="Manufecture Name:*" style="float:right;font-size:15px;width:200px" />
            <p:spacer width="20" height="50" />
            <p:selectOneMenu id="manufectureName" value="#{deviceRegistration.selectedManufacture}" effect="fade" converter="deviceManufactureConverter"
                style="width:200px">
                <f:selectItem itemLabel="Select One" itemValue="" />
                <f:selectItems value="#{deviceRegistration.manufactureNameList}" var="manufacturer" itemLabel="#{manufacturer.manufacturersName}"
                    itemValue="#{manufacturer}" />
                <p:ajax event="valueChange" update=":main:deviceosName" listener="#{deviceRegistration.updateOSName}" />
            </p:selectOneMenu>

            <h:outputLabel for="deviceosName" value="Device OS Name:*" style="float:right;font-size:15px;width:200px" />
            <p:spacer width="20" height="50" />
            <p:selectOneMenu id="deviceosName" value="#{deviceRegistration.selectedOsName}" effect="fade" converter="deviceOsNameConverter"
                style="width:200px">
                <f:selectItem itemLabel="Select One" itemValue="" />
                <f:selectItems value="#{deviceRegistration.osNamesList}" var="name" itemLabel="#{name.osName}" itemValue="#{name}" />
            </p:selectOneMenu>

            <h:outputLabel for="versionName" value="Device OS Version Name:*" style="float:right;font-size:15px;width:200px" />
            <p:spacer width="20" height="50" />
            <p:inputText id="versionName" value="#{deviceRegistration.selectedVersion.osVersionName}" required="true" label="versionName" size="30">
                <f:validateLength minimum="2" />
            </p:inputText>
            <h:outputLabel for="version" value="Device Os Version:*" style="float:right;font-size:15px;width:200px" />
            <p:spacer width="20" height="50" />
            <p:inputText id="version" value="#{deviceRegistration.selectedVersion.osVersion}" required="true" label="version" size="30">
                <f:validateLength minimum="2" />
            </p:inputText>
            <f:facet name="footer">
                <p:spacer width="20" height="80" />

                <p:commandButton id="addOsVersion" value="Add OS Version" actionListener="#{deviceRegistration.addOsVersion}"
                    action="addversion.xhtml?faces-redirect=true" ajax="false" style="float:right;" />
            </f:facet>
        </h:panelGrid>
    </p:panel>

</h:form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:40:28.363

> *我正在尝试通过从其他 selectonemenu 中选择一些值来更新 selectonemenu。但是侦听器没有调用`updateOSName`方法。*

如果发生转换或验证错误，则可能会发生这种情况。然后将完全跳过 INVOKE_APPLICATION 阶段。您没有使用`<p:growl autoUpdate="true">`并且可能也没有注意服务器日志中的警告，因此这些转换/验证错误已经引起了您的注意。

确保您注意转换/验证错误。你实际上有一个机会就是大

> main:manufectureName：验证错误：值无效

如果这是真的，那么针对所有可能的原因和适当的解决方案，请前往以下答案：[验证错误：值无效](https://stackoverflow.com/questions/9069379/validation-error-value-is-not-valid/9069660#9069660)

另一个可能的原因是您没有`FileUploadFilter`正确注册 PrimeFaces。你有一个`<h:form enctype="multipart/form-data">`默认情况下JSF不支持的。但是，这不会只导致*这个*问题，而是整个表单根本无法提交/可处理，根据目前提供的信息，情况似乎并非如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:30:05.563

将菜单更改为：

```
<p:selectOneMenu id="manufectureName" value="#{deviceRegistration.selectedManufacture}" effect="fade" converter="deviceManufactureConverter"
    style="width:200px">
    <f:selectItem itemLabel="Select One" itemValue="" />
    <f:selectItems value="#{deviceRegistration.manufactureNameList}" var="manufacturer" itemLabel="#{manufacturer.manufacturersName}"
        itemValue="#{manufacturer}" />
    <p:ajax update="deviceosName" listener="#{deviceRegistration.updateOSName}" />
</p:selectOneMenu> 
```

的默认事件`p:ajax`是`change`。你的监听器方法被调用了吗？你也不需要`:main:deviceosName`，因为`deviceosName`与 相同`manufectureName`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T18:12:48.573

一个示例应用程序，运行良好。托管bean：

```
package app.so.dev.web.controller;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;

import javax.annotation.PostConstruct;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;
import javax.faces.event.AjaxBehaviorEvent;

import app.so.dev.web.model.Manufacturer;
import app.so.dev.web.model.Product;

@ManagedBean(name = "so15369641")
@ViewScoped
public class SO15369641 implements Serializable {

    private static final long serialVersionUID = 3128349336575959334L;

    private static final String[] manufacturerNames;
    private static final String[] productNames;
    private List<Manufacturer> manufacturers;
    private List<Product> products;
    private List<Product> productsForManufacturer;
    private String selectedManufacturer;
    private String selectedProduct;

    static {
        manufacturerNames = new String[3];
        manufacturerNames[0] = "Intel";
        manufacturerNames[1] = "Asus";
        manufacturerNames[2] = "AMD";

        productNames = new String[5];
        productNames[0] = "Motherboard";
        productNames[1] = "Processor";
        productNames[2] = "Graphics card";
        productNames[3] = "NIC";
        productNames[4] = "RAM";
    }

    @PostConstruct
    public void init() {
        manufacturers = new ArrayList<Manufacturer>();

        for(String manufactureName : manufacturerNames) {
            manufacturers.add(new Manufacturer(manufactureName));
        }

        products = new ArrayList<Product>();

        for (String productName : productNames) {
            products.add(new Product(productName, getRandomManufacturerName()));
        }

        productsForManufacturer = new ArrayList<Product>();
    }

    public void updateProduct(AjaxBehaviorEvent event) {
        if(selectedManufacturer == null || selectedManufacturer.trim().length() == 0) {
            return;
        }       

        productsForManufacturer.clear();

        for(Product product : products) {
            if(product.getManufactureName().equals(selectedManufacturer)) {
                productsForManufacturer.add(product);
            }
        }           
    }

    private String getRandomManufacturerName() {
        return manufacturerNames[(int) (Math.random() * 3)];
    }

    public List<Manufacturer> getManufacturers() {
        return manufacturers;
    }

    public void setManufacturers(List<Manufacturer> manufacturers) {
        this.manufacturers = manufacturers;
    }

    public List<Product> getProductsForManufacturer() {
        return productsForManufacturer;
    }

    public void setProductsForManufacturer(List<Product> productsForManufacturer) {
        this.productsForManufacturer = productsForManufacturer;
    }

    public String getSelectedManufacturer() {
        return selectedManufacturer;
    }

    public void setSelectedManufacturer(String selectedManufacturer) {
        this.selectedManufacturer = selectedManufacturer;
    }

    public String getSelectedProduct() {
        return selectedProduct;
    }

    public void setSelectedProduct(String selectedProduct) {
        this.selectedProduct = selectedProduct;
    }       
} 
```

和 xhtml：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core" xmlns:p="http://primefaces.org/ui" template="/WEB-INF/templates/globalTemplate.xhtml">

    <ui:define name="title">15369641</ui:define>
    <ui:define name="content">
        <p:growl id="growl" showDetail="true" />

        <h:form id="form">
            <p:selectOneMenu id="manufacturer" value="#{so15369641.selectedManufacturer}">
                <f:selectItem itemLabel="Select One" itemValue="" />
                <f:selectItems value="#{so15369641.manufacturers}" var="manufacturer" itemLabel="#{manufacturer.name}" itemValue="#{manufacturer.name}" />

                <p:ajax listener="#{so15369641.updateProduct}" update="product"/>
            </p:selectOneMenu>

            <p:selectOneMenu id="product" value="#{so15369641.selectedProduct}">
                <f:selectItem itemLabel="Select One" itemValue=""/>
                <f:selectItems value="#{so15369641.productsForManufacturer}" var="product" itemLabel="#{product.name}" itemValue="#{product.name}"/>
            </p:selectOneMenu>
        </h:form>
    </ui:define>

</ui:composition> 
```

希望它会有所帮助。

环境：

*   JBoss AS7
*   JBoss org 的 JSF Mojarra 2.1.7
*   Primefaces 3.4.2

# html - 使用图像精灵在 html 按钮中显示悬停和活动状态

> ID：15369643
> 
> 赞同：1
> 
> 时间：2013-03-12T18:49:54.230
> 
> 标签：html, css

我正在尝试实现三种不同的状态 ACTIVE、PRESSED、INACTIVE

图像文件（它们实际上是相同的高度： ![剩下](../Images/3a2199a2fabbebb4cd5becbd58f2c728.png)

![正确的](../Images/b9bd23ea934342b47a95ba14107be588.png)

我想做的是有三种不同的文本：CLINICIAN、NON CLINICIAN 和 BOTH

默认情况下，所有三个文本都将具有图像的顶部 1/3，悬停在图像的中间 1/3 并按下图像的底部 1/3。我还希望 CSS 根据文本调整图像大小，每边大约有 10 像素的填充。

我从这样的事情开始：

```
<html>
<head>
<style>
.hb {
    background-image: url('l.png');
    width: 120px;
    height: 50px;
    display: block;
    text-indent: -9999px;

}

.hb:hover { 
    background-position: 0 50px;
}

.hb:active{ 
    background-position: 0 -260px; 
}
</style>
</head>

<body>
<span class="hb"><a href="/help/start">CLINICIAN</a></span>
</body>
</html> 
```

但我确信我没有正确地做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:02:48.523

span 是一个内联元素，您要使其在 css 中阻塞，您应该将类​​应用于链接而不是 span

# javascript - 谷歌API的所有街道坐标

> ID：15369665
> 
> 赞同：0
> 
> 时间：2013-03-12T18:51:07.973
> 
> 标签：javascript, google-maps

我正在使用谷歌地图 API。我想知道是否有办法咨询街道上的所有数字以及它们各自的纬度和经度坐标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:04:25.967

您写道（由[translate.google.com](http://translate.google.com)提供）：

> 我正在使用谷歌地图 API。我想知道是否有任何方法可以通过它们的纬度和经度坐标来咨询街道上的所有数字。

不使用 Google Maps API。您可以检索单个位置，但反向地理编码受配额和速率限制。批量下载、抓取数据以及在非 Google 地图上使用数据是违反使用[条款的](https://developers.google.com/maps/faq#tos)。

试试[openstreetmaps](http://www.openstreetmap.org/)

# javascript - webkit上的骨干不需要的路由重定向

> ID：15369667
> 
> 赞同：0
> 
> 时间：2013-03-12T18:51:14.413
> 
> 标签：javascript, backbone.js, webkit, routes, underscore.js

认证后我有一个不需要的路由重定向

我的基本网址是 `http://127.0.0.1:8020/VT/`

如果用户未登录本地存储，我将加载登录视图。如果登录成功，主菜单视图会正确呈现，我有这个不需要的自动重定向到 `http://127.0.0.1:8020/`

这只发生在 webkit 浏览器上。（没试过IE）

```
Router = new MainRouter();
    Backbone.history.start({ 
    pushState: false,
    root: "/VT/" 
});

var MainRouter = Backbone.Router.extend({

    routes: {
        "": "login",
        "login": "login",
        "main": "mainMenu"
    },

    showView: function(view){
        if (this.currentView){
          this.currentView.close();
        }
        this.currentView = view;
        this.currentView.render();
        $('#wrapper').html( this.currentView.el );
    },

    login: function(){
        var result = app.session.isLoggedIn();
        if(result == true){
            this.navigate('main', {trigger: true, replace: true});
        }
        else{
            var loginView = new LoginView();
            this.showView( loginView ); 
        }
    },

    mainMenu: function(){
        var mainMenu = new MainMenuView();
        this.showView( mainMenu );
    },

});

var LoginView = Backbone.View.extend({

    name: "Login",

    el: $('#page-login'),

    initialize : function() {
        this.template = _.template( app.get("tpl/nav/login.html") );
        this.clearStatusBar();
    },

    render: function(){
        var renderedContent = this.template();
        $(this.el).html(renderedContent);
        return this;
    },

    events: {
        "click input[type=submit]": "loginAction"
    },

    validate: function(){
        // some validation code
    },

    loginAction: function(){
        if( this.validate() ){
            app.router.navigate('main', {trigger: true, replace: true});
        }
        else{
            alert('Login failed');
        }
    },

}); 
```

我不知道为什么。有什么建议么 ？

# php - Instagram API 上的多个主题标签

> ID：15369671
> 
> 赞同：2
> 
> 时间：2013-03-12T18:51:27.453
> 
> 标签：php, api, instagram

class.php，我正在尝试获取 instagram 提要，但带有多个主题标签。我目前的代码是：

```
<?php

require 'instagram.class.php';
$instagram = new Instagram('my app id');

$tag = 'winter';

$media = $instagram->getTagMedia($tag);
$limit = 10;

$size = '150';

foreach(array_slice($media->data, 0, $limit) as $data)
{
echo '<img src="'.$data->images->thumbnail->url.'" height="'.$size.'" width="'.$size.'">';
}

?> 
```

所以我也想从#winter 和#summer 获取图片，有人有什么想法吗？（我尝试使用数组但不起作用）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:31:19.020

目前，据我所知，这是不可能的。但是要完成我认为您正在寻找的内容，您需要触发两个请求，并且根据您想要的内容，您可能想要显示相交的图像或两个请求的对称差异。

# regex - 无法在 SAS Content Categorization Studio 中使用两个正则表达式

> ID：15369672
> 
> 赞同：0
> 
> 时间：2013-03-12T18:51:33.910
> 
> 标签：regex, expression, sas, categorization

我在 SAS Content Categorization Studio 工作。我试图获得两个概念，每个概念都包含一个正则表达式，以返回多个匹配项。一个应该找到日期，另一个是特别格式化的数字。

```
(0[1-9]|[12][0-9]|3[01])[.](0[1-9]|1[012])[.](?:[0-9]{2})?[0-9]{2}

[1-9](?:(?:[ -.])?\d){10,10} 
```

只要应该查找日期（前者）的正则表达式处于活动状态或未注释掉，则应该找到格式化数字（后者）的正则表达式不会返回任何命中。一旦我注释掉日期的正则表达式，后者就会继续工作。它们似乎是相互排斥的。谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:18:11.407

如果你最后的模式`(?:(?:[ -.])?\d){10,10}`是日期匹配部分，那对我来说似乎有点不对劲。看起来匹配的是“一些可选字符（字面意思是任何因为'。'）后跟一个数字”的10次迭代。首先，您似乎需要 8 次迭代，而不是 10 次来匹配日期。但我认为你真正想要的是`\d{1,2}([\.-])\d{1,2}\1\d{4}`. 这将匹配“一个或两个数字，后跟一个文字 . 或 -，后跟一个或两个数字，然后是您之前匹配的任何特殊字符（. 或 -），然后是四个数字”。

# asp.net - 是否可以从 excel 文件中读取数据而不将其上传到 VB.Net 中的服务器？

> ID：15369685
> 
> 赞同：3
> 
> 时间：2013-03-12T18:52:35.320
> 
> 标签：asp.net, vb.net, excel

我需要能够从 excel 文件中读取数据并在验证后将数据上传到数据库。

但是，我正在使用的服务器不允许 Web 应用程序的写入权限，所以我需要知道是否可以从 excel 文件中读取而不通过上传将其写入服务器？

到目前为止，我还没有找到明确的答案。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:50:36.270

假设您的上传控件被调用`fileUpload`。

你不需要做一个`fileUpload.SaveAs("path")`. 您可以使用 读取流`fileUpload.PostedFile.InputStream`。我将它用于其中包含 excel 表的 zip 文件（顺便说一下，该库是 Ionic）：

```
using (var file = ZipFile.Read(fileUpload.PostedFile.InputStream))
{
    foreach (var zipEntry in file.Where(ze => ze.FileName.EndsWith(".xls")
                                           || ze.FileName.EndsWith(".xlsx")))
    {
        // process the Excel files here.
    }
} 
```

对不起，我对 VB.net 不是很熟悉，所以下面的内容可能是错误的。但是因为您要求的是 VB.net 版本：

```
Using file As var = ZipFile.Read(fileUpload.PostedFile.InputStream)
    For Each zipEntry As var In file.Where(ze => ze.FileName.EndsWith(".xls") or ze.FileName.EndsWith(".xlsx"))
        ' process the Excel files here.
    Next
End Using 
```

# infragistics - 使用 DataColumn 值作为 UltraGridColumn 上 ValueList 的源

> ID：15369687
> 
> 赞同：1
> 
> 时间：2013-03-12T18:52:41.590
> 
> 标签：infragistics, ultrawingrid

有没有办法可以将 DataTable 中的 DataColumn 用作`ValueList`UltraGrid 列？

我将列样式设置为`DropDownList`. 问题是，我有什么用`ValueList`？

```
ultraGrid1.DisplayLayout.Bands[0].Columns["col"].Style = ColumnStyle.DropDownList;
ultraGrid1.DisplayLayout.Bands[0].Columns["col"].ValueList = ??? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T16:07:21.527

创建一个[BindableValueList](http://help.infragistics.com/NetAdvantage/WinForms/Current/CLR4.0/?page=Infragistics4.Win.v12.2~Infragistics.Win.BindableValueList_members.html)。[构造函数](http://help.infragistics.com/NetAdvantage/WinForms/Current/CLR4.0/?page=Infragistics4.Win.v12.2~Infragistics.Win.BindableValueList~_ctor%28Object,String,String,String,Control%29.html)之一获取数据源、dataMember、displayMember、valueMember 和 bindingContextControl 的对象。

设置 ValueList 的代码行：

```
this.ultraGrid1.DisplayLayout.Bands[0].Columns["col"].ValueList = new BindableValueList(dt, "", "displayColumn","valueColumn", this.ultraGrid1); 
```

在上面的示例中，dt 是您要绑定到的 DataTable，displayColumn 和 valueColumn 将是您想要用作下拉列表的显示和值部分的列的键。如果要绑定到 DataSet 并且想要绑定到第一个表以外的表，则可以使用第二个参数传入要绑定到的表的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:42:22.350

这可能会有所帮助。它是一个简单的过程，它接收 DataTable、ValueList 的 Key 属性的值以及用作 ValueList 列表的字段名称，并返回要在 UltraGridColums 中设置的值列表

```
 public ValueList DataTableToValueList(DataTable dt, string vlKey, string fieldName)
    {
        ValueList vl = new ValueList();
        if (!string.IsNullOrEmpty(vlKey)) vl.Key = vlKey;
        foreach (DataRowView r in dt.DefaultView)
            vl.ValueListItems.Add(r[fieldName]);
        return vl;
    } 
```

这样使用（可能在InitializeLayout事件中）

```
 grd.DisplayLayout.Bands[0].Columns["col"].ValueList = 
                    DataTableToValueList(dtCustomers,"vlCustomer", "CustomerName"); 
```

# video - 通过 Flash 播放器流式传输视频文件

> ID：15369690
> 
> 赞同：0
> 
> 时间：2013-03-12T18:52:49.647
> 
> 标签：video, flash, mp4, avi

好吧，我不太确定适用于该线程的标签是什么。我想在我的网站上显示视频文件（mp4、avi），但应该没有人能够下载（与 youtube、dailymotion 不同，因为有下载器可以从中下载视频）。我们可以将其与一些在线电影观看内容进行比较。我的想法是将视频文件流式传输到 flv 播放器（实际上这不是我的作品集，我是一名 Java 开发人员）。我将不胜感激任何想法和建议。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:22:23.013

据我所知，当通过 HTTP 流式传输时，您无法完全限制对使用 FlashPlayer 流式传输的文件的访问。

这个 FlashPlayer 是一个插件的原因很简单，每次你从它发出 HTTP 请求（加载视频）时，它都会通过浏览器，因此用户可以轻松获取有关请求的详细信息。当您加载视频请求方法是 GET 并且可以使用它的查询字符串来下载视频。

Adobe **Flash Media Server**可以解决这个问题，它可以通过 RTMP 流式传输，在这种情况下，用户不能使用浏览器或其他程序通过 HTTP 下载视频，就像 www.youtube.com 一样

我认为您还应该看看[Wowza Media Server](http://www.wowza.com)

以上两台服务器都是商业广告，也许最好的选择是这个开源流媒体服务器[RED5](http://www.red5.org/)

# c# - PHP 语句在 C# 上的外观

> ID：15369694
> 
> 赞同：-5
> 
> 时间：2013-03-12T18:53:01.390
> 
> 标签：c#, php

我不懂 PHP，谁能解释一下 $data.$prop 在 C# 上的样子？如果 $data 具有“some_data”值且 $prop 具有“some_other_data”值，则 $data.$prop 是“some_data.some_other_data”，对吗？

我想在 C# 上实现下一行：sha1(md5($data.$prop))。括号内有字符串连接吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:05:38.410

[你可以在这里](http://msdn.microsoft.com/en-us/library/system.security.cryptography.sha1.aspx)找到更多关于 SHA1和 MD5[的信息](http://msdn.microsoft.com/en-us/library/system.security.cryptography.md5.aspx)。在 C# 中，字符串连接是使用运算符 + 完成的。因此，如果您有两个名为 data 和 prop 的变量，都是字符串，您可以使用以下代码将它们连接起来：

```
string result = data + prop; 
```

您在提供的链接上有使用密码学类的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:00:16.530

这取决于是什么`$data`和`$prop`是什么。

**如果它们是字符串**

它们将被连接起来。

**If`$data`是一个对象并且`$prop`是一个属性**

你需要看反射。请参阅[C# 反射：如何从字符串中获取类引用？](https://stackoverflow.com/questions/1044455/c-sharp-reflection-how-to-get-class-reference-from-string)了解更多信息。

# c# - 从字符串中删除日期和文件扩展名中的斜杠

> ID：15369696
> 
> 赞同：-1
> 
> 时间：2013-03-12T18:53:02.620
> 
> 标签：c#, regex, string-parsing

我需要对字符串做两件事：
A. 删除文件扩展名
B. 从日期中删除“-”。

上传字符串的示例是：

> ifrs_au-cor_2013-03-12.xsd

我不能只对“-”进行替换，因为字符串的第一部分包含一个我不想删除的“-”，只有日期。但是，日期将始终采用 YYYY-MM-DD 格式，并以扩展名结尾。

目前我只有以下代码从字符串中删除扩展名：

```
String xsdfnameNoExtNoSlash = xsdfname;
int fileExtPos = xsdfname.LastIndexOf(".");
if (fileExtPos >= 0 )
  xsdfnameNoExtNoSlash = xsdfname.Substring(0, fileExtPos); 
```

有没有办法一次性完成这两项操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:13:00.923

```
var name = Path.GetFileNameWithoutExtension(name);
return Regex.Replace(name, @"(?<!\d)(\d\d\d\d)-(\d\d)-(\d\d)(?!\d)", "$2$3$4"); 
```

这首先删除扩展名（如果存在），然后查找所有日期并从中删除斜杠。

正则表达式使用前瞻和后瞻来确保“92012-01-019”之类的内容不被视为日期。接受除数字以外的任何内容作为日期边界。如有必要，您可以对此进行调整，例如，如果“92012-01-019”实际上*应该*更改为“9201201019”，那么您可以删除前瞻/后瞻（并更改替换字符串中的数字）。

我认为将扩展作为一个单独的步骤删除是最简单的，而不是尝试一次性完成所有操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:55:55.317

```
string noslash = withslash.Replace('-', '');
string noextension = Path.GetFileNameWithoutExtension(xsdfname); 
```

# c# - 如何在 Windows 8 Metro 应用程序的 WebView 中显示 HTML？

> ID：15369700
> 
> 赞同：2
> 
> 时间：2013-03-12T18:53:07.733
> 
> 标签：c#, windows-8, microsoft-metro

我正在为 Win8 (Metro) 和 WP8 构建一个应用程序。在这个应用程序中，我有一个 WebView，我需要在其中加载一些网页。我通过 WP8 中的 post 请求获取 HTML，如下所示：

```
void LoadView(string username, string password)
        {
            string postDataStr = String.Format("username={0}&password={1}", 
                username, password);
            byte[] postDataByte = Encoding.UTF8.GetBytes(postDataStr);

            string additionalHeaders = "Content-Type: application/x-www-form-urlencoded" + Environment.NewLine;

            var urlLogin = new Uri(new Uri(APIConf.API_SERVICE_ENDPOINT), APIConf.LOGIN_URL);
            myWebView.Navigate(urlLogin, postDataByte, additionalHeaders);
        } 
```

这很好用，但我在使用 Win8 Metro 应用程序时遇到问题。我试过这样：

```
 async Task<string> GetWebContent(string username, string password)
            {
                string serviceMethod = APIConf.LOGIN_URL;

                HttpClient client = new HttpClient();
                client.BaseAddress = new Uri(APIConf.API_SERVICE_ENDPOINT);

                HttpContent content = new FormUrlEncodedContent(new[]
                {
                    new KeyValuePair<string, string>("username", username),
                    new KeyValuePair<string, string>("password", password)
                });

                HttpResponseMessage response = await client.PostAsync(serviceMethod, content);
                Stream responseStream = await response.Content.ReadAsStreamAsync();

                String sResponse = null;
                using (StreamReader responseReader = new StreamReader(responseStream))
                {
                    sResponse = responseReader.ReadToEnd();
                }
                return sResponse;
            }

async void LoadViewInWin8(string username, string password)
        {
            var htmlContent = await API.APIController.GetWebContent(username, password);

            if (!String.IsNullOrEmpty(htmlContent))
            {
                myWebView.NavigateToString(htmlContent);
            }
        } 
```

当我执行此代码时，myWebView 会加载并显示我得到的 HTML，但它不会从 web.xml 加载任何样式。此外，当我单击显示的 html 中的某些链接时，我得到页面“导航到网页已取消”。我知道 Win8 WebView 的 Navigate() 方法有一些问题，但是有没有办法可以在我的 WebView 中正确加载这个 webPage？我真的很感激我能得到的任何帮助。

# ruby-on-rails - Rails 与没有模型的表关联

> ID：15369709
> 
> 赞同：4
> 
> 时间：2013-03-12T18:53:22.307
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model, associations

我正在寻找在 Rails 中重写我的项目。它目前是用 PHP (CodeIgniter) 编写的，我已经到了编写更多库和核心扩展的地步，而不是编写新代码。我一直在看一些 Rails 教程，我很喜欢我目前所看到的（尽管我觉得你对传递的内容的控制较少）。但是，在没有模型的数据库表上似乎没有什么信息（也许我没有在正确的地方寻找）。

例如，我需要一个名为`user_verification_token`

```
CREATE TABLE IF NOT EXISTS `user_verification_token` (
  `user_id` int(11) NOT NULL,
  `token` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `is_used` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`user_id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

我为此创建一个模型没有意义，对吧？

**第一个问题**：如何生成迁移以单独创建表而无需任何模型？

**第二个问题**：当这个表被数据填充时，我如何与之关联。例如，将它与`User`模型（如果可能）/用户对象相关联，以便我可以通过令牌（提供`is_used = 0`）找到用户并返回用户的数据？

如果这是一个新手问题，我提前道歉，我可以用 PHP 轻松完成所有这些工作，但我不知道如何在 Rails 上做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T22:06:34.687

您需要此表的模型。`user_verification_token`有一个表格模型对您来说确实很有意义。为了从这些数据中获取关联和您想要的所有其他功能，您需要创建一个模型及其关联。

回答第一个问题：运行`rails generate migration your_migration_name`

对于`activity_type`您在原始问题的评论中提到的表，您可能对 RailsLookup gem 感兴趣，以帮助自动化在 Rails 中充分利用查找表所需的一些工作。有一篇[博客文章](http://www.codelord.net/2011/08/09/guest-post-lookup-tables-with-ruby-on-rails/)描述了它，源代码可以[在 GitHub 上找到](https://github.com/Nimster/RailsLookup/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-19T08:29:37.493

您当前的场景确实需要一个模型，尽管当您需要存储诸如体育（足球、网球、板球、游泳、篮球等）等类别的数据时，您可以将它们作为常量存储在 config->initializers->constant 中，例如。SPORT_CATEGORIES = [["Football","football"],["Tennis","tennis"],etc]，或者如果你有更多的cols要存储，你可以创建一个模型，然后像在php中一样创建默认行.sql 文件，但当然是 ruby​​ :) 例如：

```
sport_categories = [
    {:category => "football", :category_type => "manly" },
    {:category => "Tennis", :category_type => "manly" },
    etc
]

sport_categories.each do |attributes|
    Model_name_here.find_or_initialize_by_category(attributes[:category]).tap do |p|
        p.category_type = attributes[:category_type]
        p.save!
    end
end 
```

然后运行 ​​rake db:seed。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T18:59:59.737

我建议您为此创建模型，因为您将可以通过与用户关联的模型完全访问`user_verification_token`表。`UserVerificationToken`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-30T04:25:36.517

创建模型，因为所有验证都可以在模型中完成。例如：`validates :user_id`。所以在创建表时不需要包含这些约束

# php - 如何将动态生成的 HTML 表格带入 JS 数组？

> ID：15369711
> 
> 赞同：0
> 
> 时间：2013-03-12T18:53:27.753
> 
> 标签：php, javascript, html, dom

我正在从一个 php 数组生成一个 2 列的 HTML 表，如下所示：

```
<table>
  <?php
    $i=0
    foreach ($fullNameArray as $namePair){
      echo
        "<tr>
          <td id='first ".$i."'>".$namePair[0]."</td>
          <td id='last".$i."'>".$namePair[1]."</td>
        </tr>";
      $i++;
    }
  ?>
</table> 
```

在 Javascript 中探索该表的最佳方式是什么，例如构建一个可以复制 PHP 数组的数组，即 [first name, last name] 对的数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:58:36.040

使用 PHP 的 json_encode 将您的数组编码为 Json，将此字符串分配给 javascript 变量并使用 javascript 将 json 解码为数组...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T19:05:19.800

另一种方法可以将 json 分配给隐藏的输入而不是 javascript，然后在您的 javascript 代码中获取输入值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T19:19:25.370

如果你想采用老式的纯 JavaScript 方式，你可以做一些简单的 DOM 遍历。

如果您`id`在表格中添加一个，您的生活会轻松很多，特别是如果您在页面中有（或以后可能添加）其他表格。

```
<table id="nameTable">
    ...
</table> 
```

现在您可以在 JavaScript 中访问该表并将对它的引用存储在一个变量中。您还需要初始化一个空数组/列表变量以稍后保存名称。

```
var nameTable = document.getElementById("nameTable");
var nameArray = []; 
```

接下来，您开始循环遍历表格的子元素，每个子元素都是一个`tr`（表格行）元素。

```
for (var i=0; i<nameTable.childNodes.length; i++) {
    ...
} 
```

在该`for`循环中，您将构建 [first name, last name] 对的列表。您将通过获取`td`当前行的两个（表格数据单元格）子项中的每一个的值来做到这一点。

```
 var dataCells = nameTable.childNodes[i].childNodes;
    var namePair = [dataCells[0].innerHTML, dataCells[1].innerHTML]; 
```

这应该会给你一个类似这样的 JSON 数组（我的值添加）：

```
[
    ["Andy", "Jackson"],
    ["Barry", "Obama"],
    ["Benny", "Franklin"],
    ["Georgey", "Washington"],
    ["Billy", "Clinton"]
] 
```

回顾一下，完整的代码看起来像这样：

```
var nameTable = document.getElementById("nameTable");
var nameArray = [];

for (var i=0; i<nameTable.childNodes.length; i++) {
    var dataCells = nameTable.childNodes[i].childNodes;
    var namePair = [dataCells[0].innerHTML, dataCells[1].innerHTML];
} 
```

**注意：**这很有趣，但如果您不介意源代码中的硬编码 JSON 数组（如果您在那里有表格，那真的没关系），那么更好的解决方案可能是可能像@JayBhatt 建议的那样直接从 PHP 的标签中打印一个`json_encode`d 数组。`<script>`这可能是更快的方法，并且对用户浏览器的压力要小得多。

# r - R中的双重或三重季节性ARIMA建模

> ID：15369712
> 
> 赞同：1
> 
> 时间：2013-03-12T18:53:31.060
> 
> 标签：r

我试图找出 R 中是否有任何包可以处理 ARIMA 模型的多个季节性，如果没有，是否有任何方法可以通过它。

我有一个每小时系列，想测试季节性`lags=c(24,7*24,30*24)`

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-27T14:01:43.270

你可以使用[TBATS 模型](http://www.inside-r.org/packages/cran/forecast/docs/tbats)，[她就是](http://www.r-bloggers.com/seasonal-periods/)一个例子

# windows - Windows 服务实现 IDisposable - 这是不好的做法吗？

> ID：15369715
> 
> 赞同：8
> 
> 时间：2013-03-12T18:53:36.620
> 
> 标签：windows, c#-4.0

我遇到过这段代码：

```
public class ServiceLauncher2 : ServiceBase, IDisposable 
```

然后这个：

```
 /// <summary>
        /// Disposes the controllers
        /// </summary>
        // This is declared new as opposed to override because the base class has to be able to
        // call its own Dispose(bool) method and not this one. We could just as easily name
        // this method something different, but keeping it Dispose is just as valid. 
        public new void Dispose()
        {
            foreach (var mgr in _threadManagers)
                mgr.Dispose();
            base.Dispose();
        } 
```

我以前从未在 Windows 服务实现中看到过这种情况。通常只覆盖 OnStop/OnStart。这是不好的做法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-12T19:52:52.240

让我们计算一下这是不好的做法：

*   新关键字是 grating，它告诉编译器关闭代码中*的*潜在问题。一个真实的，使用这个类的代码很容易最终调用 ServiceBase.Dispose() 。ServiceBase 实现了一次性模式，正确的做法是重写受保护的 Dispose(bool) 方法

*   Dispose() 方法留下一个 _threadManagers 集合对象，该集合对象只包含死对象。这也使该集合像门钉一样死去，之后对其进行迭代是没有意义的。应该是清空的

*   唯一可以调用此 Dispose() 方法的时间是在服务终止时。在 OnStop() 中做不到，它还处理了 ServiceBase。在终结器运行和进程终止之前一微秒处置“控制器”是没有意义的。Dispose() 应该只用于允许提前释放非托管资源。进程在一毫秒后停止时没有早

这段代码没有意义。不要使用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T19:00:36.020

它看起来确实不标准，但[它是合法的](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicebase.dispose%28v=vs.100%29.aspx)。因此，我不一定将其称为不好的做法，尽管它引入混乱的事实使它成为不好的做法？

这仅作为服务运行还是有控制台模式？（控制台应用程序不会调用 OnStop。）或者是否有其他（自定义）方法来停止此服务进程？

修改我自己之前的问题：

> 我不知道为什么`new`而不是`override`，尤其是因为 `base.Dispose()`被调用了。

原因：

> “SomeClass.Dispose()”：无法覆盖继承的成员“System.ComponentModel.Component.Dispose()”，因为它未标记为虚拟、抽象或覆盖

换句话说，ServiceBase.Dispose 的实现是不可覆盖的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-03T15:11:24.883

只是为了补充 Hans 和 Paul 已经完美的答案：声明`ServiceLauncher2`as`IDisposable`是多余的， as `ServiceBase`is a `Component`which 反过来已经是`IDisposable`

# c++ - 如何在我的 C++ 程序中获取 .pdf 的文章摘要

> ID：15369717
> 
> 赞同：0
> 
> 时间：2013-03-12T18:53:47.057
> 
> 标签：c++, pdf

我正在寻找一些读取`.pdf`文件的方法，但我无法从中获得任何东西，我可能需要一个库，但我发现的所有选项都非常混乱且难以处理。

我想知道哪种方式对我来说是完成这项任务的最佳方式，即搜索`.pdf`并获取摘要部分中的内容。（这是文本）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:04:12.780

最简单和最便宜的是使用其他程序员都知道的流行的开源库。

在尝试从头开始编写自己的 PDF 阅读器之前，请查看以下内容：

解析：

*   [波多佛](http://podofo.sourceforge.net/about.html)

    > PoDoFo 库是一个免费的、可移植的 C++ 库，其中包括用于解析 PDF 文件并将其内容修改到内存中的类。更改可以轻松写回磁盘。解析器还可用于从 PDF 文件中提取信息（例如，解析器可用于 PDF 查看器）。除了解析 PoDoFo 还包括非常简单的类来创建您自己的 PDF 文件。所有类都记录在案，因此很容易开始使用 PoDoFo 编写自己的应用程序。

生成：

*   [自由哈鲁](http://sourceforge.net/projects/libharu/)

    > Haru 是一个免费的、跨平台的、开源的软件库，用于生成用 ANSI-C 编写的 PDF。它可以用作静态库（.a、.lib）和共享库（.so、.dll）。

*   [熊猫](http://sourceforge.net/projects/panda/)

    > 用 C 编写的 PDF 生成 API

# java - Android 对话框不会调整大小 (PhoneGap)

> ID：15369718
> 
> 赞同：2
> 
> 时间：2013-03-12T18:53:49.173
> 
> 标签：java, javascript, android, cordova

我有`Dialog`一个自定义视图，它可以让我设置对话框的 x、y、宽度和高度，这一切正常。

我将其放置`Dialog`在 PhoneGap 的`WebView`创建之上。

我有时需要根据 中发生的情况重新定位对话框`WebView`，因此我创建了一个可以从 JavaScript 调用的函数来调整它的大小。

这是我最初设置的方式`Dialog`：

```
WindowManager.LayoutParams lp = new WindowManager.LayoutParams();
lp.x = this.dpToPixels(dialogDimensions.optInt("x")); 
lp.y = this.dpToPixels(dialogDimensions.optInt("y"));
lp.width = this.dpToPixels(dialogDimensions.optInt("width")); 
lp.height = this.dpToPixels(dialogDimensions.optInt("height"));
lp.gravity = Gravity.TOP | Gravity.LEFT;

// make it possible to click outside dialog
lp.flags = WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL | WindowManager.LayoutParams.FLAG_WATCH_OUTSIDE_TOUCH;

dialog.setContentView(main);
dialog.show();
dialog.getWindow().setAttributes(lp); 
```

`dialogDimensions`是一个`JSONObject`带有 x、y、宽度、高度参数，并`dpToPixels()`转换大小以考虑像素密度的差异（即在 Nexus 10 上，WebView 中的 300 像素实际上是平板电脑上的 600 像素）。

这是我的调整大小方法：

```
public String resize(JSONObject dimensions) {
    dialogDimensions = dimensions;

    WindowManager.LayoutParams lp = dialog.getWindow().getAttributes();

    lp.x = this.dpToPixels(dialogDimensions.optInt("x")); 
    lp.y = this.dpToPixels(dialogDimensions.optInt("y"));
    lp.width = this.dpToPixels(dialogDimensions.optInt("width")); 
    lp.height = this.dpToPixels(dialogDimensions.optInt("height"));

    Log.i(LOG_TAG, dialog.getWindow().getAttributes().debug("Before Resize: "));
    dialog.getWindow().setAttributes(lp);
    Log.i(LOG_TAG, dialog.getWindow().getAttributes().debug("After Resize: "));

    return "";
} 
```

日志消息正在记录我所期望的，但对话框没有做任何事情......

### 我试过的

我尝试了`dialog.show()`then`dialog.show()`之前，之后以及之前和之后的`setAttributes()`.

我也试图使其无效，但我不确定我做对了......这是我从 StackOverflow 复制的。这是我尝试过的：

```
dialog.getCurrentFocus().invalidate();
dialog.getWindow().getCurrentFocus().invalidate();

main.invalidate(); // view passed into dialog.setContentView 
```

我还尝试了几种不同的设置/获取方式，`LayoutParams`包括创建新设置、复制等。似乎没有什么不同。我什至尝试将其设置为填充其父对象和内容，但没有效果。

任何想法如何让它调整大小？也许重绘甚至都不是问题？

# sql - SQL ORDER BY GROUP BY

> ID：15369723
> 
> 赞同：2
> 
> 时间：2013-03-12T18:54:01.727
> 
> 标签：sql, group-by, oracle11g, sql-order-by

我有 2 个通过 id 链接的表（ENTRIES 和 USERS），我只想从前 5 个用户中选择所有条目，然后按单个用户条目的 COUNT 对它们进行排序。

```
USERS    ENTRIES

tom      entry1
mary     entry2
jane     entry3
tom      entry4
tom      entry5 
```

等等....显示为

```
USERS    ENTRIES

tom      entry1
tom      entry4
tom      entry5
jane     entry3
mary     entry2 
```

我的代码目前只是按名称排序，但没有按 COUNT 个条目列出

```
SELECT  ENTRIES.entry, USERS.NAME   FROM ENTRIES, USERS 
WHERE ENTRIES.USER_ID = USERS.ID 
ORDER BY USERS.NAME 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T19:11:13.603

由于您使用的是 Oracle，因此您可以使用窗口函数来获取每个用户的总数：

```
SELECT e.entry, 
  u.NAME,
  count(*) over(partition by u.name) Total
FROM ENTRIES e
INNER JOIN USERS u
  ON e.USER_ID = u.ID 
ORDER BY total desc, u.NAME 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!4/a5b48/3)。

如果你想只返回前 5 行，那么你可以使用：

```
select entry,
  name,
  total
from 
(
  SELECT e.entry, 
    u.NAME,
    count(*) over(partition by u.name) Total,
    rownum rn
  FROM ENTRIES e
  INNER JOIN USERS u
    ON e.USER_ID = u.ID
) 
where rn <= 5
ORDER BY total desc, NAME 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!4/a5b48/6)

# json - Angularjs - 更新 JSON

> ID：15369726
> 
> 赞同：4
> 
> 时间：2013-03-12T18:54:04.677
> 
> 标签：json, angularjs

我对 Angularjs 很陌生，并且在弄清楚如何更新我从 JSON 创建的 $scope 元素时遇到了问题。基本上我有一个包含获取 JSON 的函数的服务：

```
app.service('JSONService', function($http){         
    return{
        getJSON: function(){
            return $http.get('posts.json')
                .then(function(response){
                    return response.data;
                });
        }
    };
 }); 
```

然后我有一个控制器，其中包含一个函数，该函数在单击按钮时获取 JSON 数据并将其放入 $scope.data 和我想用来更新 $scope.data 的第二个函数：

```
app.controller('PostController', function PostController($scope, JSONService){
    $scope.data;

    $scope.getJSON = function(){            
        $scope.data = JSONService.getJSON();
    };
    $scope.addPost = function(){
        // Add to $scope.data
    };
}); 
```

目前，我成功地获取了 JSON 数据并能够使用它来填充我的视图的各个方面，但我被困在如何继续更新 $scope.data 以便：

1.  它实际上更新
2.  更新反映在我的视图中

我试过 $broadcast、$scope.data.push、$scope.data.posts.push。这些要么完全不起作用，要么出现错误。我敢肯定这可能是一个简单的答案，但我觉得我可能对 Angularjs 和 JSON 缺乏经验来了解它。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T20:06:20.353

所以我认为上面的代码有几个问题。希望这可以帮助您理顺它：

$http.get() 函数返回一个“承诺”。Promise 有一个 then() 函数，您正在使用它，但您可能应该调整以获取返回的数据并将其直接放入 $scope。由于请求是异步的，因此在您的服务中的 then() 中执行“return”语句实际上并没有什么可去的地方。Angular 知道如何使用 Promise，因此您可以绑定到 UI 中的数据，但实际上您不会直接在 $scope.data 下找到数据。$scope.data 仍然是一个 Promise 对象，并且数据将在另一个属性中（类似于 $scope.data.promiseData ——虽然不记得确切的属性是什么）。你可以这样调整：

```
app.service('JSONService', function($http){         
    return {
        getJSON: function() {
            return $http.get('posts.json');
        }
    };
}) 
```

控制器：

```
app.controller('PostController', function PostController($scope, JSONService){
    $scope.data;

    $scope.getJSON = function(){            
        JSONService.getJSON()
            .then(function (response) {
                $scope.data = response.data;
            });
    };
    $scope.addPost = function(postText){
        // Add to $scope.data (assuming it's an array of objects)
        $scope.data.push({postText: postText});
    };
}); 
```

HTML：

```
<div data-ng-repeat="post in data">{{post.postText}}</div>

<input type="text" ng-model="newPostText">
<button type="button" ng-click="addPost(newPostText)">Add Post</button> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-14T13:07:20.440

实际上，虽然上面的代码是正确的，但在这种情况下，getJSON 函数实际上并没有在任何地方调用，所以 $scope.data 永远不会被填充。

# javascript - php/jQuery 检查用户名是否存在

> ID：15369727
> 
> 赞同：0
> 
> 时间：2013-03-12T18:54:05.237
> 
> 标签：javascript, jquery

我一直在尝试创建一个系统来检查所选用户名是否已被使用。我想出了以下代码。

```
function checkUsername(username,func){ 
    $.post("functions/checkUsername.php",{'username': username},function(data){ 
        if(data!='1'){ popup_alert('The username you selected already exists.','Username Exists','Close'); return false; }
        else{ window[func](); }
    });
} 
```

checkUsername.php 如果用户名存在则返回 0，如果可用则返回 1。我对此进行了许多测试。我的问题是，由于某种原因，它在设置数据之前运行 if 语句。我在 if 语句之前插入了一个 alert(data) ，它在创建 popup_alert 后弹出一个 1 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:02:51.123

```
function checkUsername(username,callback){ 
    $.post("functions/checkUsername.php",{'username': username},function(data){ 
    callback && callback(data);      
    });
}

...

checkUsername(username,function(data) {
  if(data!='1'){ popup_alert('The username you selected already exists.','Username     Exists','Close'); return false; }
    else{ window[func](); }
}); 
```

或者你可以使用 $.ajax

```
function checkUsername(username,func){ 
      $.ajax({
        type: 'POST',
        async: false, 
        data: {'username': username},
        url: 'functions/checkUsername.php',
        success: function(data) {
          if(data!='1'){ popup_alert('The username you selected already exists.','Username  Exists','Close'); return false; }
        else{ window[func](); }
        },
        error: function() {
          alert('Connection error!');
        }
      });
} 
```

# triggers - Salesforce APEX 在 null 时更新

> ID：15369729
> 
> 赞同：0
> 
> 时间：2013-03-12T18:54:15.247
> 
> 标签：triggers, salesforce, apex-code

好的，所以几周前我问了这个问题，我得到了一些很大的帮助 - 但我仍然没有 100% 解决我一直遇到的问题......任何帮助都会很棒......我仍然有这段代码的主要问题，可以使用更多帮助......

出于某种原因，它仍在将任何数字更改为 0，而不仅仅是将零添加到空字段。

如果我有 4 个具有以下内容的 LOC - 竞争对手销售率 150、125、0、空白或空丢失 False、True、True、False 我希望它们都被标记为丢失，我只希望最后一个竞争对手销售率被标记为 0

目前所有标记 Lost 和 All 更改为 0 - 我知道代码会更新，因为如果我将代码更改为将它们设为 10，它们都会更新为 10

请任何帮助都会很棒...

在机会上触发 updateLOConLostOpportunity（更新后）{

```
//The map allows us to keep track of the opportunities that have been lost 
```

地图 oppsWithStageLost = new Map();

```
for (Integer i = 0; i < Trigger.new.size(); i++) {
    if (   (Trigger.old[i].StageName != 'Lost')
        && (Trigger.new[i].StageName == 'Lost')) {
        oppsWithStageLost.put(Trigger.old[i].id,
                              Trigger.new[i]);

    }                          
}
List<Line_of_Coverage__c> updatedLOCs = new List<Line_of_Coverage__c>();
for (Line_of_Coverage__c loc : [SELECT id, Lost__c, Opportunity__c
                                  FROM Line_of_Coverage__c
                                  WHERE Opportunity__c
                                    in :oppsWithStageLost.keySet()]) {
    Opportunity parentOpp = oppsWithStageLost.get(loc.Opportunity__c);

     loc.Lost__c = TRUE; 

     if (loc.Competitor_Sold_Rate__c == NULL) {

         loc.Competitor_Sold_Rate__c = 0;

     }  

    updatedLOCs.add(loc);

}
update updatedLOCs; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:41:53.020

添加 Competitor_Sold_Rate__c 以选择查询

```
for (Line_of_Coverage__c loc : [SELECT id, Lost__c, Opportunity__c,Competitor_Sold_Rate__c  
                                  FROM Line_of_Coverage__c
                                  WHERE Opportunity__c
                                    in :oppsWithStageLost.keySet()]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T05:47:30.877

如果我没有正确理解这个问题，请原谅我，但如果我只希望最后一个元素的销售率 = 0，你可以试试这个。也像提到的其他帖子一样，您必须在查询中包含 Competitor_Sold_Rate__c

```
List<Line_of_Coverage__c> updatedLOCs = new List<Line_of_Coverage__c>();
list<Line_of_coverage__c> locs = [SELECT id, Lost__c, Opportunity__c, Competitor_Sold_Rate__c
                              FROM Line_of_Coverage__c
                              WHERE Opportunity__c
                                in :oppsWithStageLost.keySet()]; 

for (Integer i = 0; i < locs.size(); i++) {
  Opportunity parentOpp = oppsWithStageLost.get(locs[i].Opportunity__c);
  loc.Lost__c = TRUE; 

  //check if it's the last loc -- size would return 4
  if (loc.Competitor_Sold_Rate__c == NULL && locs.size()-1 == i) {
    loc.Competitor_Sold_Rate__c = 0; 
}  

updatedLOCs.add(loc);
.
.
. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T19:20:34.457

Competitor_Sold_Rate__c 的具体类型是什么？如果它是一个字符串或一个选项列表，它可能永远不会专门设置为 null - 将它与空字符串 '' 进行比较可能会有更好的结果。

# javascript - 如何使用 JavaScript 代码在 YouTube Flash 播放器上放置文本？

> ID：15369734
> 
> 赞同：0
> 
> 时间：2013-03-12T18:54:27.260
> 
> 标签：javascript, youtube, flash

我正在构建 Chrome 扩展程序。我需要使用 JavaScript 代码在 YouTube Flash 播放器上放置一个文本。我看到很多程序员都是这样做的，但我不明白怎么做？
***更新***：我需要在播放器全屏时放置文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:55:19.603

只需使用 CSS 和`position`标签来放置浮动 HTML 元素。请注意，YouTube flash 播放器就是一个 flash 对象，因此您可以使用普通的 HTML 在其上放置内容。

[你可以在这里](http://www.barelyfitz.com/screencast/html-training/css/positioning/)阅读更多。

要使用 JavaScript 操作 DOM（文档模型），您可以使用[内置的 javascript](http://www.w3schools.com/htmldom/dom_examples.asp)函数或使用类似[jQuery](http://jquery.com/)的东西。

# c# - 未找到 C# 自定义工具“SettingsSingleFileGenerator”输出

> ID：15369739
> 
> 赞同：1
> 
> 时间：2013-03-12T18:54:48.763
> 
> 标签：c#, visual-studio-2010, customtool

我下载了[这个 JiraSVN 插件](https://github.com/Wattos/JiraSVN)的源代码，并在 VS2010 中打开了 .sln 文件。我立即受到这个警告的欢迎：

> 自定义工具“SettingsSingleFileGenerator”与文件“Properties\Settings.settings”相关联，但在项目中未找到自定义工具的输出。您可以尝试通过右键单击解决方案资源管理器中的文件并选择运行自定义工具来重新运行自定义工具。

我完全不熟悉这个自定义工具或它应该做什么，也不熟悉如何解决问题。（我尝试了右键单击并重新运行自定义工具的建议，但没有任何反应。）

当我尝试构建时，它失败并出现以下错误：

> 无法打开源文件“C:...\Properties\Settings.Designer.cs”（“未指定错误”）

查看解决方案资源管理器，我在其中一个项目下看到以下条目：

```
 └─Properties
        └─/!\ Settings.settings
           └─/!\ Settings.Designer.cs 
```

（最后两个条目有感叹号警告图标。）

我试图从项目中排除这两个条目，但出现了更多错误。

我该如何解决这个问题？构建是否损坏，或者我只是未能正确设置某些内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-23T11:11:02.827

我在尝试编译自己保存的代码时突然遇到了同样的错误。该代码将不再编译，即使我上次保存它，一切都很好。

我只是从设置文件属性的自定义工具行中删除了“SettingsSingleFileGenerator”（我的是在我的项目/设置文件夹中，您的错误消息应该告诉您它的位置）。删除它可以让我再次顺利编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-18T13:52:00.770

在项目的上下文菜单中，转到属性 - 设置 - “单击此处创建...”。这创建了一个足以满足我的项目的空属性文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T15:14:11.570

好吧，构建确实被破坏了。[PatrickMauer](https://github.com/patrickmaurer/JiraSVN/commit/80879e6cd8eb302d8e8f562bfea831e3950b85ea)有一个fork可以重建丢失的文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-02T22:40:28.533

在文本编辑器中打开 .csproj 文件并删除 LastGenOutput 标记。如果 LastGenOutput 标记存在，Visual Studio 认为在设置文件生成期间存在一些错误，并在构建期间不断发出警告。

```
<None Include="Properties\Settings.settings">
  <Generator>SettingsSingleFileGenerator</Generator>
  <LastGenOutput>Settings1.Designer.cs</LastGenOutput>
</None> 
```

# assembly - CPU 如何知道来自 IVT 的中断处理程序是 BIOS 函数还是映射到内存中的子程序

> ID：15369740
> 
> 赞同：1
> 
> 时间：2013-03-12T18:54:54.310
> 
> 标签：assembly, x86

根据我对中断工作原理的基本了解，当调用软件或硬件中断时，CPU 会查看位于内存前 1024 字节的 IVT（在实模式下），获取中断处理程序地址并从该位置开始执行。此外，据我了解，您可以覆盖 IVT 中的值以指向可以处理中断的自定义子例程。

我无法理解的是 BIOS 功能是如何工作的。例如`int 0x10`，CPU如何知道中断对应的是BIOS功能，而不是映射到内存中的子程序（调用中断处理程序，其地址被存储`4 * 0x10`）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T18:57:50.950

CPU不知道。BIOS 被映射到内存中。存储在 4 * 0x10 的地址是 BIOS 中 INT 10H 处理程序的地址。

启动时，BIOS 初始化中断表，使其指向 BIOS 例程。

如果需要，您可以保存存储在 4 * 0x10 的地址并将其替换为您自己的 INT 10H 处理程序的地址。顺便说一句，我不建议这样做……但这是可能的。这种事情在当时的 DOS 中断中很常见。BIOS 中断的情况要少一些，但有时会发生。

# java - File.list() 与 File.listFiles()

> ID：15369744
> 
> 赞同：14
> 
> 时间：2013-03-12T18:55:17.583
> 
> 标签：java, swing, jtree

我的问题是：如果这两个功能有什么不同？我的意思是我知道他们返回的东西不同，但是一个元素中的元素数量是否可能与第二个元素不同。我会尽力解释。我为我的一个班级实现了 TreeModel，试图基于 JTree 对 PC 上的文件进行很好的查看。所以这里是它的一部分：

```
public Object getChild(Object parent, int index) {
        File[] children = ((File) parent).listFiles();
        if(children == null || index < 0 || index >= children.length) {
            return null;
        }

        File result = new MyFile(children[index]);
        return result;
}

public int getChildCount(Object parent) {
        //---
        //String[] children = ((File)parent).list();
        File[] children = ((File)parent).listFiles();
        //---

        if(children == null) {
            return 0;
        }
        return children.length;
} 
```

我标记了有趣的代码。如果我为这个评论的那一行更改了这两行，有时我会`NullPointerException`在加载 TreeModel: 后得到`jtree.setModel(treeModel);`。这个未注释不会造成任何麻烦。我检查了文档，它没有说任何异常，包括两种方法都返回 null 。这里发生了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T18:58:22.463

这两种方法的作用基本相同，详情请查看[http://www.docjar.com/html/api/java/io/File.java.html](http://www.docjar.com/html/api/java/io/File.java.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-02-27T18:14:08.667

正如已经指出的那样，但仅在[DR发表的评论中澄清](https://stackoverflow.com/a/15369803/4892907)

*   `list`方法返回`String array`文件名（文件和目录）

*   `listFiles``array of class File` 相同的返回

请参阅文档页面，例如。[https://docs.oracle.com/javase/7/docs/api/java/io/File.html](https://docs.oracle.com/javase/7/docs/api/java/io/File.html)

> `String[] list()` 返回一个字符串数组，命名此抽象路径名表示的目录中的文件和目录。

> `File[] listFiles()` 返回一个抽象路径名数组，表示此抽象路径名表示的目录中的文件。

我不确定为什么这两种方法都存在，可能字符串数组会比文件数组一更快且内存消耗更少

# java - 在没有 entrySet() 可用的情况下迭代 NavigableSet

> ID：15369751
> 
> 赞同：0
> 
> 时间：2013-03-12T18:55:30.667
> 
> 标签：java, map, iterator, treemap, aem

我有一个 TreeMap，我按键反向排序，并试图循环输出值，但 NavigableSet 没有`entrySet()`作为方法，这是我找到的所有示例。

我的 Java 非常新手，所以我现在的知识有限，无法修改我在示例中看到的代码。

```
<%@page
import="java.util.Iterator,
        java.util.Map,
        java.util.TreeMap,
        java.util.NavigableSet,
        com.day.cq.wcm.api.PageFilter"
%>

    TreeMap<String, String> news = new TreeMap<String, String>();

    String listroot = properties.get("listRoot", currentPage.getPath());
    Page rootPage = pageManager.getPage(listroot);
    if (rootPage != null) {
        Iterator<Page> children = rootPage.listChildren(new PageFilter(request));
        while (children.hasNext()) {
            Page child = children.next();

            String title = child.getTitle(); //value
            String url = child.getPath(); //value
            String dcreated = child.getProperties().get("jcr:created",""); //key

            news.put( dcreated, title + "::" + url );
        }
        NavigableSet nset = news.descendingKeySet(); //Reverse order the entries
        for( String value : nset.values()  ) { //I know this is incorrect.
            out.println( value + "<br>");
        }
    }
%> 
```

我确信有一种更有效的方法可以做到这一点，但现在这是我能想到的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T19:16:06.680

使用迭代器循环遍历集合。查看[NavigableSet](http://docs.oracle.com/javase/6/docs/api/java/util/NavigableSet.html)和[TreeSet](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html) api，我发现了一种提供降序迭代器的方法，因此不需要以相反的顺序创建新集合。

编辑：以上是错误的假设，即`news`类型`TreeSet`不正确`TreeMap`。代码已更改为正确的类型以成为正确的代码。

```
Iterator newsItr = news.descendingKeySet().iterator();
while(newsIter.hasNext()){
    out.println( news.get(newsItr.next()) + "<br>");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T19:07:46.027

```
news.descendingMap().entrySet(); 
```

# c# - 创建定期预订的语法错误

> ID：15369760
> 
> 赞同：0
> 
> 时间：2013-03-12T18:55:58.443
> 
> 标签：c#, sql, database, visual-studio-2010

我试图使用以下代码创建重复预订，但出现错误，我将如何修复此代码？

```
//creates a recurring booking
            if (repeats_check.IsChecked == true)
            {
               DateTime date0=date_picker.SelectedDate;
//Calculates the total number of days between each repeat by multiplying the number of weeks by 7.
                int Rdays1 = Rdays + (Rweeks * 7);
                for (int i = 1; i <= occurences.Value; i++)
                {
                   DateTime Date(i) = Date(i-1).AddDays(Rdays1);
                   DateTime Datei = Datei.AddMonths(Rmonths);

                }

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:10:16.800

不知道你想在这里做什么：

```
DateTime Date(i) = Date(i-1).AddDays(Rdays1);
DateTime Datei = Datei.AddMonths(Rmonths); 
```

它肯定行不通。如果它是一个数组，则使用 Date[i]。但是在第一行中，您不需要 Date[i] 的类型。你能澄清你的代码吗？

编辑：

按照你的解释：

```
DateTime[] dates = new DateTime[occurences.Value+1];
dates[0] = date_picker.SelectedDate;
for (int i = 1; i <= occurences.Value; i++)
  dates[i] = dates[i-1].AddDays(Rdays1).AddMonths(Rmonths); 
```

顺便提一句。我已经模拟了你的错误，看看这个：

![在此处输入图像描述](../Images/9387cbcc6a0b6a0a3376442bf4b076b7.png)

我得到同样的错误：预期; or =（不能在声明中指定构造函数参数）

mz

# c# - c# WebApi 如何创建 rsa 私钥和公钥

> ID：15369770
> 
> 赞同：0
> 
> 时间：2013-03-12T18:56:27.967
> 
> 标签：c#, asp.net-web-api, rsa

我正在看这篇[文章](http://codebetter.com/johnvpetersen/2012/04/02/making-your-asp-net-web-apis-secure/)，它对于保护您的 Web Api 应用程序非常有用。我的问题是我不明白如何生成自己的 RSA 密钥，它在文章中的任何地方都没有说明如何生成密钥。谁能解释一下，如何生成，我在网上四处寻找，但找不到任何有用的文章，我也尝试使用putty并且很困惑。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:44:49.470

文章本身，虽然没有在文中解释，但实际上是在做的。如果您查看单元测试：

```
[Test] public void RSAParameters() 
{   
    var rsa = new RSACryptoServiceProvider();  
    var privateParameters = rsa.ExportParameters(true);  
    var publicParameters = rsa.ExportParameters(false);   

    //Export private parameter XML representation of privateParameters  
    //object created above  
    Debug.WriteLine(rsa.ToXmlString(true));   

    //Export private parameter XML representation of publicParameters  
    //object created above  
    Debug.WriteLine(rsa.ToXmlString(false)); 
} 
```

实例化一个新的`RSACryptoServiceProvider`将创建一个新的密钥。该`ExportParameters`调用会将公钥和私钥（取决于布尔参数，请参阅文档：http: [//msdn.microsoft.com/en-us/library/x8z5e11b.aspx](http://msdn.microsoft.com/en-us/library/x8z5e11b.aspx)）导出为 XML 字符串。然后，您可以使用该`FromXmlString()`方法在将来使用这些密钥。

# opencart - OpenCart 愿望清单

> ID：15369771
> 
> 赞同：0
> 
> 时间：2013-03-12T18:56:31.103
> 
> 标签：opencart

我正在尝试解析打开购物车的 wishlist_to_store 列中的愿望清单列以检索产品 ID。乍一看，我以为它被存储为 JSON，但显然不是这样。有没有我可以用来解析它的库或方法？

愿望清单示例：a:2:{i:0;s:5:"16419";i:1;s:5:"16415";}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T02:06:47.647

您要使用的方法称为[unserialize()](http://php.net/unserialize)。这在功能上与 JSON 的功能非常相似，但与 PHP 相当。您可以按如下方式使用它

```
$a = unserialize('a:2:{i:0;s:5:"16419";i:1;s:5:"16415";}');
var_dump($a); 
```

# wpf - 带有 ViewModel 的 Mvvm Light ViewModel

> ID：15369772
> 
> 赞同：2
> 
> 时间：2013-03-12T18:56:31.450
> 
> 标签：wpf, mvvm

你们中的任何一个 Mvvm Light Devotes 如何处理以下情况。我有几个使用自己的“子”视图模型实例的“主”视图模型。IE

Child ViewModel - "OrderLineItemListViewModel" 一个视图模型，用于订单中的行项目列表。

Parent ViewModel - "OrderDetailViewModel" 订单的视图模型。Parent VIewModel - "OrderChargeViewModel" 用于收取订单费用的视图模型。

两个父 ViewModel 都需要有一个 OrderLineItem 列表，并且两者都可以同时打开。目前，我已设置父 ViewModel 包含子 ViewModel 类型的属性，然后可以引用它。

```
public class ChildViewModel
{
    public ChildViewModel()
    {
       Items = new ObservableCollection<ListItemViewModel>
                   {
                      new ListItemViewModel("One"),
                      new ListItemViewMOdel("Two")
                   }
    }

    public ObservableCollection<ListItemViewModel> Items {get; private set;}
}

public class ParentViewModel
{
    public ParentViewModel()
    {
        ChildViewModel = new ChildViewModel();
    }

    public ChildViewModel ChildViewModel {get; set;}
}

<Window>
    <DataGrid ItemsSource={Binding ChildViewModel.Items} />
</Window> 
```

现在，我觉得应该有一种方法可以使用 ViewModelLocator 和 Messaging 来做到这一点，但是我还没有找到一个干净的方法来做到这一点。我知道如何使用 ViewModelLocator 创建 ViewModel 的非单例实例，所以这很好。但是，我不知道如何让父 ViewModel 响应子 ViewModel 消息并知道消息是否来自“它的”子 ViewModel，因此应该采取行动。

任何人都对如何处理这个问题有任何建议，或者我应该继续按照我的方式去做吗？让我思考的最大部分是，现在，我有选择地使用 ViewModelLocator，但不确定最终是否会直观。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:37:42.790

我不确定这个总数是否能回答你的问题，但我所拥有的是一个像你这样的嵌套视图模型。我有一个父视图/视图模型，它有一个集合（在本例中为实体框架导航属性），我希望子视图/视图模型与之交互。这样就可以在没有消息的情况下进行“交互”。

因此，例如，如果您想将集合从父视图绑定到子视图模型中的组合框，您可以这样做（请注意，父视图和子视图是用户控件，并且在父视图中，内容控件绑定到子视图/视图模型）：

```
<UserControl x:Class="EmployeeListView"
            DataContext="{Binding EmployeeList_VM, Source={StaticResource Locator}}"/>
    <ContentControl Name="DetailControl" DataContext="{Binding Path=Selection, Mode=TwoWay}" >
        <ComboBox Name="cbStatus" 
            ItemsSource="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}},Path=DataContext.EmployeeStatus}"
            SelectedItem="{Binding ElementName=DetailControl, Path=DataContext.employee_status}"
            SelectedValuePath="idStatus"
            SelectedValue="{Binding idStatus, Mode=TwoWay, ValidatesOnDataErrors=True}"
            DisplayMemberPath="chrCode"/>
    </ContentControl>
</UserControl> 
```

我试图让它尽可能简单。请注意 itemsource 绑定到包含我绑定到的集合 (EmployeeStatus) 的祖先用户控件数据上下文。这样，您的子视图模型可以与您的父 VM 集合/对象进行交互，而无需使用消息传递。否则，如果您正在寻找特定的视图模型，我会使用消息传递来定位特定的视图模型，但我认为上述内容可能更简单。

**编辑：** 针对您的评论，我认为这里的挑战是您想要分离您的父/子视图模型，但同时您希望能够分辨哪些是“配对”的。所以恕我直言，这样做的方法是创建某种类型的标志/标识符，在父视图模型和子视图模型上具有匹配的属性。我将在父视图模型的构造函数中设置此属性，并为子视图模型设置第二个构造函数，该构造函数在其构造函数中接受此标识符并设置该属性。然后我会使用信使来定位父视图模型类型并将标识符作为消息的参数传递。然后我会在父视图模型中注册信使以“侦听”针对其“类型”的消息

通过为子视图模型提供两个构造函数，这将允许您仍然在其他地方使用子视图模型，并且不会直接依赖于父视图模型的属性类型，从而避免将它们耦合在一起。

我希望这是有道理的。您说您熟悉信使，所以我没有发布如何定位类型并向消息添加参数的示例，但如果您愿意，我可以。

希望这可以帮助。

# sockets - 调优入门 - 没有有效的套接字文件

> ID：15369773
> 
> 赞同：1
> 
> 时间：2013-03-12T18:56:32.357
> 
> 标签：sockets, cygwin, performance, mysql

我正在尝试在我的 Windows 7 计算机上使用 Cygwin 运行 Tuning Primer 以检查我的一些数据库。

每当我尝试运行它时，它都会给我以下错误：

```
No valid socket file "" found!
/cygdrive/c/Users/MID-PC/Downloads/tuning-primer.sh: line 109: tput: comando não encontrado
The mysqld process is not running or it is installed in a custom location.
/cygdrive/c/Users/MID-PC/Downloads/tuning-primer.sh: line 109: tput: comando não encontrado
If you are sure mysqld is running, execute script in "prompt" mode or set
/cygdrive/c/Users/MID-PC/Downloads/tuning-primer.sh: line 109: tput: comando não encontrado
the socket= variable at the top of this script
/cygdrive/c/Users/MID-PC/Downloads/tuning-primer.sh: line 109: tput: comando não encontrado 
```

关于如何手动设置此套接字的任何想法？（是的，我确实在这台机器上运行了 MySQL）

# ios - UITableView 自定义单元格，由 UIViews 构建，可以并发吗？

> ID：15369774
> 
> 赞同：0
> 
> 时间：2013-03-12T18:56:44.950
> 
> 标签：ios, uitableview, concurrency

我正在像这样构建我的 cellViews：

```
- (UITableViewCell *)cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString* cellIdentifier=@"cell";

    UITableViewCell* cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    if(cell == nil)
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier] autorelease];
    }

    UIImageView cellView = [[UIImageView alloc] initWithFrame:rectCellFrame];

    NSError* error=nil;
    NSData* imageData = [NSData dataWithContentsOfURL:imageArray[indexPath.row] options:NSDataReadingUncached error:&error];

    UIImage* theImage= [UIImage ImageWithData:imageData];

    [cellView setImage:theImage];

    [cell addSubView:cellView];

    .
    .
    .
    .

    [cell addSubView:moreViews];

} 
```

由于加载时间（即使图像被缓存）非常慢，我需要让它并发。但我仍想将我的代码与 UIViews/UIImageViews 一起使用。有没有办法让我显示一个占位符，当相关时，即 cellView 从所有子视图完成构建，更新图像而不是占位符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:23:23.027

当然。您可以在异步任务中设置所有繁重的慢代码。当需要下载图像时，它通常会关闭。我确信至少有 1 个关于 Table Views 的 WWDC 视频涵盖了它，但我不知道它现在是哪一个或有多旧。

```
- (UITableViewCell *)cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    // place holder image for the moment
    [cellView setImage:placeHolderImage];

    // run code to get the real image in asynchronous task 
    dispatch_async(self.contextQueue, ^{
        UIImage *realImage = [thingy imageFromTimeConsumingTask];
        // update cell on main thread (you need to do all UI stuff on main thread)
        dispatch_async(dispatch_get_main_queue(), ^{
            [cellView setImage:realImage];
        });
    });
} 
```

# azure - Azure 诊断 - 通过 url 获取请求计数器是否需要自定义性能计数器？

> ID：15369775
> 
> 赞同：0
> 
> 时间：2013-03-12T18:56:46.010
> 
> 标签：azure, azure-web-roles, azure-diagnostics

我知道 Requests\Sec、Requests Total 等计数器是免费提供的（只需将它们设置为收集和传输）。有谁知道任何可用的计数器，这些计数器通过 http 请求 url 提供一些基于数据的拆分？那么请求/秒对服务上的特定 url 呢？只是想确保在我开始为每个计数器编写自定义之前没有任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:57:33.007

您可以继续编写自定义代码:)

以下是可从[http://blogs.msdn.com/b/avkashchauhan/archive/2011/04/01/list-of-performance-counters-for-windows-azure-web-roles 获得的性能计数器列表。 aspx](http://blogs.msdn.com/b/avkashchauhan/archive/2011/04/01/list-of-performance-counters-for-windows-azure-web-roles.aspx)：

> // .NET 3.5 计数器
> 
> @"\ASP.NET Apps v2.0.50727(**总计**)\Requests Total"
> 
> @"\ASP.NET Apps v2.0.50727(**总计**)\Requests/Sec"
> 
> @"\ASP.NET v2.0.50727\Requests Queued"
> 
> @"\ASP.NET v2.0.50727\请求被拒绝"
> 
> @"\ASP.NET v2.0.50727\请求执行时间"
> 
> @"\ASP.NET v2.0.50727\Requests Queued"
> 
> // 最新的 .NET 计数器 (4.0)
> 
> @"\ASP.NET 应用程序（**总计**）\Requests Total"
> 
> @"\ASP.NET 应用程序（**总计**）\Requests/Sec"
> 
> @"\ASP.NET\Requests 排队"
> 
> @"\ASP.NET\Requests 被拒绝"
> 
> @"\ASP.NET\请求执行时间"
> 
> @"\ASP.NET\Requests 断开连接"
> 
> @"\ASP.NET v4.0.30319\请求当前"
> 
> @"\ASP.NET v4.0.30319\请求等待时间"
> 
> @"\ASP.NET v4.0.30319\Requests Queued"
> 
> @"\ASP.NET v4.0.30319\请求被拒绝"
> 
> @"\Processor(_Total)\% 处理器时间"
> 
> @"\内存\可用 MBytes
> 
> @"\内存\提交的字节数"
> 
> @"\TCPv4\Connections 已建立"
> 
> @"\TCPv4\Segments 发送/秒"
> 
> @""\TCPv4\连接失败"
> 
> @""\TCPv4\Connections 重置"
> 
> @"\Network Interface(Microsoft Virtual Machine Bus Network Adapter _2)\Bytes Received/sec"
> 
> @"\Network Interface(Microsoft Virtual Machine Bus Network Adapter _2)\Bytes Sent/sec"
> 
> @"\Network Interface(Microsoft Virtual Machine Bus Network Adapter _2)\Bytes Total/sec"
> 
> @"\网络接口( *)\接收的字节数/秒"@"\网络接口(* )\发送的字节数/秒"
> 
> @".NET CLR 内存（*全局*）\% GC 时间"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T03:03:39.780

您将需要自己编写。我为使用 MVC 框架的客户提供了帮助。这非常简单，因为唯一需要检测的代码是在所需控制器的 OnActionExecuting 方法中。

请确保通过此处所述的启动脚本（步骤#2）检测自定义性能计数器定义的创建：http: [//www.windowsazure.com/en-us/develop/net/common-tasks/performance-分析/](http://www.windowsazure.com/en-us/develop/net/common-tasks/performance-profiling/)

# ruby-on-rails - 未定义的局部变量或方法`user

> ID：15369778
> 
> 赞同：0
> 
> 时间：2013-03-12T18:56:56.660
> 
> 标签：ruby-on-rails

对 RoR 来说相当新，并且通过教程来工作。不知道为什么会出现此错误，因为我有一个用户模型将 first_name 定义为可访问的属性（如果我将 User 大写，则它表示 first_name 不是已定义的方法）。

错误：#<#:0x007fdb75963478> 的未定义局部变量或方法“用户”提取的源（在第 9 行附近）：

```
6: 
7: <% @statuses.each do |status| %>
8:   <div class ="status">
9:     <strong><%= user.first_name %></strong>
10:     <p><%= status.content %></p>
11:   <div class ="meta">
12:     <%= link_to time_ago_in_words(status.created_at) + " ago", status %> 
```

我的代码： 用户模型：

```
class User < ActiveRecord::Base
# Include default devise modules. Others available are:
# :token_authenticatable, :confirmable,
# :lockable, :timeoutable and :omniauthable
devise :database_authenticatable, :registerable,
     :recoverable, :rememberable, :trackable, :validatable

# Setup accessible (or protected) attributes for your model
attr_accessible :email, :password, :password_confirmation, :remember_me,
:first_name, :last_name, :profile_name
# attr_accessible :title, :body

validates :first_name, presence: true 
validates :last_name, presence: true 
validates :profile_name, presence: true, uniqueness: true, 
format: {
with: /a-zA-Z0-9_-/, 
message: 'Must be formatted correctly.'
} 

def full_name
return first_name + " " + last_name
end

has_many :statuses

end 
```

索引.html.erb：

```
<div class="page-header">
<h1>All of the statuses</h1>
</div>

<%= link_to "Post a new Status", new_status_path, class: "btn btn-success" %>

<% @statuses.each do |status| %>
<div class ="status">
<strong><%= user.first_name %></strong>
<p><%= status.content %></p>
<div class ="meta">
<%= link_to time_ago_in_words(status.created_at) + " ago", status %>
<span class="admin">
  | <%= link_to "Edit", edit_status_path(status) %> |
  <%= link_to "Delete", status, method: :delete, data: {confirm: "Are you sure you wanna  delete this status"} %>
</span>
</div>
</div>  
<% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T18:59:56.973

线上`#9`应该是：

```
 <%= status.user.first_name %> 
```

假设你有`belongs_to :user`模型`Status`。

# c# - 文件使用中的错误 C# 从用户指定的文件中读取文本

> ID：15369781
> 
> 赞同：0
> 
> 时间：2013-03-12T18:57:07.097
> 
> 标签：c#, stream, runtime-error

我的代码给出了文件已在使用中的运行时错误。我不确定我如何解决这个问题。我需要文件对话框与用户交互，但我想逐行阅读它。该文件以分号分隔，我手动解析它并将其输入系统。如何从 opendialog 释放文件以便我可以使用它。任何帮助都非常感谢提前感谢。

```
List<string> datalinestream = new List<string>();
FileDialog FD = new System.Windows.Forms.OpenFileDialog();

if (FD.ShowDialog() == System.Windows.Forms.DialogResult.OK)
{

    TextReader reader = new StreamReader(FD.FileName);
    using (reader)
    {
        string line = "";
        while ((line = reader.ReadLine()) != null)
        {

            while (!string.Equals(reader.Read(),"/r"))
            {
                datalinestream.Add(GetWord(reader));
            }
            LuceneDB.AddUpdateLuceneIndex(new MATS_Doc( datalinestream));
            datalinestream.Clear();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:04:33.253

我建议将`FileOpenDialog`交互与解析分开。

像这样的东西：

```
List<string> datalinestream = new List<string>();
string fileName;

using(FileDialog FD = new System.Windows.Forms.OpenFileDialog())
{
    if(FD.ShowDialog() == DialogResult.OK)
        fileName = FD.FileName;
    else
        return;
}

TextReader reader = new StreamReader(fileName);
using (reader)
{
    string line = "";
    while ((line = reader.ReadLine()) != null)
    {

        while (reader.Read() != '\r')
        {
            datalinestream.Add(GetWord(reader));
        }
        LuceneDB.AddUpdateLuceneIndex(new MATS_Doc( datalinestream));
        datalinestream.Clear();
    }
} 
```

我还假设您要检查一个`\r`字符，而不是带有两个字符的字符串，并且`/`返回单个字符，否则您的内部循环将不得不发生相当大的变化。`r``StreamReader.Read()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T19:02:50.973

我要做的是创建一个临时文件，其中包含与原始文本文件相同的信息。我将确保使用 GUID 之类的格式格式化文件名，这样它就不会再次引起任何问题。然后我的代码将完成临时文件的所有工作。

之后，（如果需要）使用您对临时文件所做的更改来更新原始文件。

处理文件有时令人头疼，但变通办法或欺骗系统可以完成这项工作。

# c - 为什么使用管道在 IPC 中使用 write() 而不是 print() 打印输出两次？

> ID：15369785
> 
> 赞同：0
> 
> 时间：2013-03-12T18:57:15.813
> 
> 标签：c, linux, ipc

我的问题很简单直接。在这里我试图在管道的一端发送数据并尝试从另一端读取数据。我正在尝试学习 IPC 机制，但在执行这个简单的程序时我被卡住了。如果我然后在父进程中使用 print()[1] ，

```
o/p is 

In the child process
IN the parent process and its sleeping
SUBI IS IN LOVE WITH PUTHALATH 
```

但是如果我在父进程中使用 write()[2 commented in the following program]

```
 o/p is 

 In the child process
 IN the parent process and its sleeping
 SUBI IS IN LOVE WITH PUTHALATHIN the parent process and its sleeping 
```

为什么“在父进程及其睡眠中”这一行被打印了两次？

```
#include<stdio.h>
#include<unistd.h>
#include<fcntl.h>

int main(){

   int fd[2];
   pipe(fd);

  if(!fork()){
    printf("In the child process\n");
    close(1);
    dup(fd[1]);
    close(fd[0]);
    write(1,"SUBI IS IN LOVE WITH PUTHALATH", 200);

   } else {
      sleep(1);
      printf("IN the parent process and its sleeping \n");
      char* stream;
      close(fd[1]);
       read(fd[0],stream,200);
       printf("%s",stream);------>(1)
      // write(1,stream,200);---->(2)
    }
     return 0;
    } 
```

请提供任何帮助，因为我被困在这里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:06:51.053

> 错误

```
 It is not advisable to mix calls to output functions from the stdio library
   with low-level calls to write(2) for the file descriptor associated with
   the same output stream; the results will be undefined and very probably not
   what you want. 
```

[http://man7.org/linux/man-pages/man3/puts.3.html](http://man7.org/linux/man-pages/man3/puts.3.html)

正如其他人指出的那样，您没有为流分配内存..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:14:45.453

在孩子身上，你

```
write(1,"SUBI IS IN LOVE WITH PUTHALATH", 200); 
```

将 200 个字节写入管道，从字符串文字开始的位置开始。

当你

```
write(1,stream,200); 
```

在父级中（在分配内存之后`stream`），您写入子级写入管道的 200 个字节，而在`printf`终止字符串文字的 0 字节处停止`"SUBI IS IN LOVE WITH PUTHALATH"`。

因此，内存中该字符串文字后面的任何字节也会被打印出来。字符串文字`"IN the parent process and its sleeping \n"`显然位于该内存部分中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T19:25:17.417

当我尝试编译它时，gcc 说：

```
22:12: warning: ‘stream’ may be used uninitialized in this function
[-Wuninitialized] 
```

这是一个重要的迹象！

更改`char *stream`为`char stream[200];`并按预期工作。但是，如果你在最后调用它`write`，你会写出远远超出字符串的内容，并且在它之后发生在内存中的任何内容，并且由于它没有初始化为 0，它可能是随机的垃圾。你可以用这个来纠正：

```
write(1, stream, strlen(stream)); //correct length, not all 200 bytes 
```

但是，实际上，您不应该在父级中写入 200 个字节，因为您是从尚未分配的内存中写入的。该数字应等于字符串的长度（对于 加一`\0`）。

# sql - SQL 更新列

> ID：15369786
> 
> 赞同：-2
> 
> 时间：2013-03-12T18:57:17.013
> 
> 标签：sql, sql-update

如何获取列的最后一个字符并将其转换为数字？示例：
列
000000000017A
000000000038B
000000000431C

如果字母等于，则需要将最后一个字母更改为：
A=1
B= 2
C=3

结果：
171
382
4313

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:04:26.443

的 ASCII 值为`A`65。因此，您可以通过从其 ASCII 值中减去 64来转换`C`为。`3`

```
select  cast(
            left(col1, len(col1) - 1) +
            cast(ascii(upper(right(col1, 1))) - 64 as char(1))
            as int)
from    Table1 
```

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!3/6c88f0/11/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:01:11.697

我认为你需要使用 SQL 的 REPLACE 函数

[http://msdn.microsoft.com/en-en/library/ms186862.aspx](http://msdn.microsoft.com/en-en/library/ms186862.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T20:10:27.730

用下面的 SQL 语句弄清楚了。要在一列中更改多个条件替换，我使用了：

```
SELECT REPLACE(REPLACE(REPLACE(Prev_Month_Vol,'A','1'), 'B', '2'), 'C', '3')
FROM table1 
```

希望这可以帮助希望替换语句的人。

# matlab - 用新图附加图

> ID：15369789
> 
> 赞同：0
> 
> 时间：2013-03-12T18:57:21.960
> 
> 标签：matlab, matlab-figure

我想以不同的图形可视化两组数据。这是我现在如何实现的：

```
f1 = figure;
for i=0:6
    plot(stim(i)+i);
    hold on;
end;

f2 = figure;
for i=0:6
    plot(data(i)+i);
    hold on;
end; 
```

我认为必须有组合这些循环的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:05:36.100

当然。根据[Matlab 参考](http://www.mathworks.com/help/matlab/ref/figure.html)：首先你创建空图并执行`hold-on`（你不需要每次都这样做）：

```
f1 = figure;
hold on
f2 = figure;
hold on 
```

然后你循环：

```
for i=0:6
    figure(f1)
    plot(stim(i)+i);
    figure(f2)
    plot(data(i)+i);
end 
```

这次数字已经创建；因此，在此处调用`figure`会切换活动图形，以便您可以在其上绘图；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-21T13:08:29.557

并且没有 for 循环，是这样的：

```
idx = (0:6).';
figure(f1);
plot(stim(idx)+idx);
figure(f2);
plot(data(idx)+idx); 
```

确保将解决方案应用于正确的维度。列向量被解释为一个数据集；对于积分，请记住设置标记。

# javascript - 淡入淡出文本循环 - 不循环，看不到文本

> ID：15369791
> 
> 赞同：0
> 
> 时间：2013-03-12T18:57:29.697
> 
> 标签：javascript, jquery, loops, text, fade

**仅供参考，这已解决。[www.WEBCO-MN.com](http://www.WEBCO-MN.com) - 滚动到底部显示“客户在说什么......”谢谢您的帮助！**

我对这一切都很陌生。我知道 HTML - 不是专业人士。
我真的不知道javascript。我习惯了只是复制和粘贴它。我正在尝试创建一个推荐部分，因此它会从一个推荐淡入另一个推荐，等等。一旦我使用了在这里找到的代码：
[淡入淡出文本循环 - jQuery](https://stackoverflow.com/questions/12065273/fade-in-out-text-loop-jquery)，什么都没有出现。

这是我正在处理的页面的链接：
[http ://www.webco-mn.com/webco_test3.html](http://www.webco-mn.com/webco_test3.html)

这是我正在做的事情：
HTML：

```
 <h2 class="quotes">first testimonial</h2>
    <h2 class="quotes">second testimonial</h2> 
```

JS：

```
 (function() {

var quotes = $(".quotes");
var quoteIndex = -1;

function showNextQuote() {
    ++quoteIndex;
    quotes.eq(quoteIndex % quotes.length)
        .fadeIn(2000)
        .delay(2000)
        .fadeOut(2000, showNextQuote);
}

showNextQuote();

    })(); 
```

和 CSS：

```
 .quotes {display: none;}​ 
```

有人可以帮我弄清楚发生了什么吗？！

PS - 我没有设计这个网站，我也没有接触过任何设计的 HTML 部分，我不是那么先进，我不想破坏任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:37:35.783

为了使用该 jQuery 代码，您需要链接到 jQuery javascript 库。

在您链接到的测试页面中，您在结束 html 标记后引用了要使用的脚本和 jQuery：

```
</html>
<script>
(function() {

    var quotes = $(".quotes");
    var quoteIndex = -1;

    function showNextQuote() {
        ++quoteIndex;
        quotes.eq(quoteIndex % quotes.length)
            .fadeIn(2000)
            .delay(2000)
            .fadeOut(2000, showNextQuote);
    }

    showNextQuote();

})();</script>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="js/libs/jquery-1.7.1.min.js"><\/script>')</script> 
```

尝试在元素末尾添加对 jQuery 的引用`<head>`，并在元素末尾添加您尝试使用的脚本`<body>`。

我还建议阅读[有关 jQuery 工作原理的基本概述](http://learn.jquery.com/about-jquery/how-jquery-works/)。

# c# - 无法获取数据表返回类型到对象

> ID：15369792
> 
> 赞同：0
> 
> 时间：2013-03-12T18:57:31.307
> 
> 标签：c#, database, winforms, datatable

我已经创建了从数据库获取数据的方法。此方法将 DataTable 作为返回类型。尝试调用此方法时，它向我抛出了对象引用的异常，未设置对象的实例。这是方法以及我如何使用它。

```
 public DataTable executeSelect (String _query, SqlParameter[] sqlParameter)
    {
        SqlCommand myCommand = new SqlCommand();
        DataTable dataTable = new DataTable();
        dataTable = null;
        DataSet ds = new DataSet();
        try
        {
            myCommand.Connection = openConnection();
            myCommand.CommandText = _query;
            myCommand.Parameters.AddRange(sqlParameter);
            myCommand.ExecuteNonQuery();
            myadapter.SelectCommand = myCommand;
            myadapter.Fill(ds);
            dataTable = ds.Tables[0];
        }
        catch (SqlException e)
        {
            Console.Write( e.StackTrace.ToString());

            return null;
        }
        finally
        {

        }
        return dataTable;
    } 
```

下面的代码显示了如何使用上述方法生成数据表

```
 string sp_name = "sLot";
            SqlParameter[] param = new SqlParameter[]{
                 new SqlParameter("@stype","ML"),
                new SqlParameter("@ttype","B"),
                new SqlParameter("@code",comp_code)

            };               

            DataTable data = dbc.executeSelect(sp_name, param); 
```

注意：这使用存储过程名称“sLot”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:02:45.377

我假设你得到一个例外，因此你返回 null 而不是 a `DataTable`。如果你使用一个，你必须设置`CommandType`为。`StoredProcedure`

```
myCommand.CommandType = CommandType.StoredProcedure; 
```

当然还有其他可能的原因 a `NullReferenceException`，但是您没有提供足够的信息。如果最后一行抛出异常，注释`dbc`为空。您可以制作`executeSelect`静态或创建声明方法的类型的实例。

# java - Java中是否有任何地图实现会给我一个地图，其中条目的排序方式与我放入它们的方式相同？

> ID：15369793
> 
> 赞同：1
> 
> 时间：2013-03-12T18:57:37.080
> 
> 标签：java, data-structures, map

我想做的是：

```
for (Entry<Foo, Foo> myEntry : myMap.entryList())
{
    if (someCondition(myEntry.getKey()))
    {
        doSomething(myEntry.getValue())
    }
} 
```

顺序很重要，因为 myEntry.getValue() 将指向稍后将到达的键。是否有一个 Map 实现可以保证条目的顺序并允许我按该顺序遍历条目？我找到了 SortedMap，但它看起来像 SortedMaps 对键进行排序。这不是我所需要的。我只是想按照我放入它们的相同顺序将我的条目从我的地图中取出。

对于那些想知道我要做什么的人，myMap 表示 Foo 对象的层次结构。当在“someCondition”中满足条件时，我标记 Foo 的父级（恰好是条目的值）。稍后当父母成为钥匙时，我会知道我之前已经标记过它并会采取相应的行动。现在我已经创建了一个递归的“markParent”调用，但是如果我可以以已知的顺序遍历地图，我就不需要这样做了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T18:59:03.003

你的意思是像[`LinkedHashMap`](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashMap.html)？;-)

> 接口的哈希表和链表实现`Map`，**具有可预测的迭代顺序**。此实现的不同之处`HashMap`在于它维护一个贯穿其所有条目的双向链表。这个链表定义了迭代顺序，**通常是键插入映射**的顺序（插入顺序）。请注意，如果将键重新插入到地图中，则插入顺序不会受到影响。（如果调用 when将在调用之前立即返回 true ，则将键`k`重新插入映射中。）`m``m.put(k, v)``m.containsKey(k)`

*（我的重点）*

FWIW，我是如何到达那里的，如果您将来需要找到类似的信息，可以提供帮助：我模糊记得其中一个 JDK 类是这样做的，所以去[`Map`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html)阅读“已知实现类”列表。在这种情况下，我一看到它就知道它的名字，但我想即使我不知道它，也`LinkedHashMap`建议订购，所以...... :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-06T03:23:40.393

LinkedHashMap 将维护内部使用 LinkedList 的插入顺序。如果你想定义任何自定义顺序，你可以使用像 TreeMap 这样的 SortedMap。

# sql - 数据透视表包含额外的行

> ID：15369796
> 
> 赞同：1
> 
> 时间：2013-03-12T18:57:56.330
> 
> 标签：sql, sql-server, pivot

我有以下查询来生成学生的经济援助奖励表。我们想做一个 Pivot，因为我们想同时显示多个学期的帮助。

```
select pt.award as Award, pt.[1] as Fall, pt.[2] as Spring, pt.[3] as Summer            
--into #awardTemp
  from (select fa.Description as award, fa.OriginalAmount, fa.TextTerm,
          ROW_NUMBER() OVER(PARTITION BY fa.description 
            order by fa.textterm) AS M
      from CAMS_Enterprise.dbo.cams_FinancialAward_view as fa
        where fa.Code1ID = 0
      and fa.StudentAccepted is null
      and fa.studentuid = @studentuid) as AT
  pivot (max(at.originalamount) for at.m in ([1],[2],[3])) as pt 
```

我们没有在同一行列出每学期的金额，而是得到如下所示的结果。即使描述标题相同，每个学期的奖项都有自己的行。有谁知道问题出在哪里？

```
Academic Scholarship                5000.00 NULL    NULL
Academic Scholarship                NULL    5000.00 NULL
Federal Subsidized Stafford Loan    1750.00 NULL    NULL
Federal Subsidized Stafford Loan    NULL    1750.00 NULL
Federal Unsubsidized Stafford Loan  1000.00 NULL    NULL
Federal Unsubsidized Stafford Loan  NULL    1000.00 NULL 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T19:02:39.193

如果没有从 之前的表中看到您的数据`pivot`，我猜测这是由于`fa.TextTerm`在查询中包含的。

这给出了`TextTerm`导致多行的不同值。

这似乎是问题的明显原因，因为您没有在最终`SELECT`列表中使用该列。我建议将您的查询更改为：

```
select pt.award as Award, pt.[1] as Fall, pt.[2] as Spring, pt.[3] as Summer            
--into #awardTemp
from 
(
    select fa.Description as award, 
        fa.OriginalAmount, 
        ROW_NUMBER() OVER(PARTITION BY fa.description order by fa.textterm) AS M
    from CAMS_Enterprise.dbo.cams_FinancialAward_view as fa
    where fa.Code1ID = 0
      and fa.StudentAccepted is null
      and fa.studentuid = @studentuid
) as AT
pivot 
(
    max(at.originalamount) 
    for at.m in ([1],[2],[3])
) as pt 
```

# jquery - 根据位置或div启动水平滚动

> ID：15369800
> 
> 赞同：2
> 
> 时间：2013-03-12T18:58:08.173
> 
> 标签：jquery, position, horizontal-scrolling

我试图让水平滚动在单个 div 中工作，或者更确切地说是在（顶部 > 1400）时工作。基本上，向下滚动，遇到有问题的 div - 然后水平滚动。但是，这会导致页面上较高的元素在向下滚动时被右边距覆盖，或者完全禁用滚动。

我已经试了

```
$(function(){
   $("#art").wrapInner("<table cellspacing='30'><tr>");
   $("#info").wrap("<td></td>");
   $("#info").mousewheel(function(event, delta) {
      if (top > 1400) {
         this.scrollLeft += (delta * 30);
         event.preventDefault();
      }
      else {
         event.Default();
      }
   });   
}); 
```

* * *

```
<div id="art">
   <section id="info" data-type="background" data-speed="3" class="pages">
      ...  
   </section>
</div> 
```

* * *

```
#info {
   background: url(time.JPG) 50% 0 repeat fixed; 
   min-height: 1000px;
   height: 730px;
   margin: 0 auto;
   width: 300%;
   max-width: 2000px;
   position: relative;
   cursor:help;
} 
```

我知道这很混乱，我一直在摸索试图让它以几种不同的方式工作。

我从这个鼠标滚轮示例 [http://css-tricks.com/snippets/jquery/horz-scroll-with-mouse-wheel/#comment-301955获得了原始代码](http://css-tricks.com/snippets/jquery/horz-scroll-with-mouse-wheel/#comment-301955)

# java - 如何更改切换按钮的状态？

> ID：15369806
> 
> 赞同：0
> 
> 时间：2013-03-12T18:58:27.443
> 
> 标签：java, android

我有一个切换按钮来打开和关闭无线。它工作正常。但是，我希望当我进入我的应用程序时，如果无线已经打开，我的切换按钮也打开。现在不是了。有什么不对劲。这是我的代码。

```
WifiManager WifiMan;
ToggleButton WiFi, GPRS;

    WiFi.setOnClickListener(new OnClickListener() {  //Ukljucuje WiFi

                @Override
                public void onClick(View v) {

                    if(WifiMan.isWifiEnabled())
                    {
                        WiFi.setEnabled(true);
                    }
                    else{
                        WiFi.setEnabled(false);
                    }

                    try
                      {
                        if (((ToggleButton)v).isChecked())
                        SwarmPopup.this.WifiMan.setWifiEnabled(true);
                        else
                            SwarmPopup.this.WifiMan.setWifiEnabled(false);
                      }
                    catch (Exception localException)
                      {
                        Log.e("SwarmPopup", "error on WiFi listerner: " + localException.getMessage(), localException);
                      }
                }
            });
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:02:31.177

如果这是您的*所有*代码（我怀疑是），那么问题是您仅在单击切换时检查 WiFi 状态（和切换状态）。

`WiFiMan.isWifiEnabled()`如果您在 Activity 中添加检查`onCreate()`，则可以在创建 Activity 时轻松设置切换的状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T19:02:49.477

假设`WifiMan`是一个WifiManager，那么使用：

```
WiFi.setChecked(WifiMan.isWifiEnabled()); 
```

另请阅读[Java 命名约定](http://java.about.com/od/javasyntax/a/nameconventions.htm)，其中规定变量名称应以小写字母开头。

* * *

最后，像这样的代码：

```
if(WifiMan.isWifiEnabled())
{
    WiFi.setEnabled(true);
}
else{
    WiFi.setEnabled(false);
} 
```

可以简化为：

```
WiFi.setEnabled(WifiMan.isWifiEnabled()); 
```

# ios - 重用 cellViews，而不是清除

> ID：15369807
> 
> 赞同：1
> 
> 时间：2013-03-12T18:58:29.357
> 
> 标签：ios, uitableview

我注意到我的 cellViews 没有清除。意思是，当我向上和向下滚动时，子视图会不断增加刚刚被重用的 cellView ......我做错了什么？

```
- (UITableViewCell *)cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString* cellIdentifier=@"cell";

    UITableViewCell* cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    if(cell == nil)
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier] autorelease];
    }

    UIImageView cellView = [[UIImageView alloc] initWithFrame:rectCellFrame];

    NSError* error=nil;
    NSData* imageData = [NSData dataWithContentsOfURL:imageArray[indexPath.row] options:NSDataReadingUncached error:&error];

    UIImage* theImage= [UIImage ImageWithData:imageData];

    [cellView setImage:theImage];

    [cell addSubView:cellView];

    .
    .
    .
    .

    [cell addSubView:moreViews];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:04:22.753

如果您要大幅修改单元格的内容，我建议您创建一个子类`UITableViewCell`并引用它而不是基类。这样您就可以在子类的`drawRect`方法中进行更新，而不是`UITableViewCell`在 CFRAIP 中修改。

请注意，您还可以`prepareForReuse`在重用单元格之前调用单元格的方法来重置属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T19:05:40.417

当`dequeueReusableCellWithIdentifier:`返回一个单元格（而不是 nil）时，它是您之前在`tableView:cellForRowAtIndexPath:`方法中创建的一个单元格。首次创建时添加到该单元格的每个子视图仍在其中。如果从 获取单元格时添加更多子视图，则单元格`dequeueReusableCellWithIdentifier:`中将有额外的子视图。

您的`tableView:cellForRowAtIndexPath:`方法应具有以下基本结构：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *const kIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:kIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
            reuseIdentifier:kIdentifier];

        // code here to add subviews to cell.contentView
    }

    // code here to configure those subviews to display the content for indexPath, e.g.
    // set the image of image views and the text of labels.

    return cell;
} 
```

棘手的部分是在单元格返回时访问子视图以设置其内容`dequeueReusableCellWithIdentifier:`。[*查看Table View Programming Guide for iOS*](http://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7-SW15)中的“以[编程方式将子视图添加到单元格的内容视图”](http://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7-SW15)*，它解释了如何使用视图标签来访问子视图。*

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T19:07:04.543

您在每次方法调用时向单元格添加子视图。这意味着，当一个单元被重用时，它已经有旧的子视图。您应该在添加新的之前删除它们。例如`[cell.contentView.subviews makeObjectsPerformSelector:@selector(removeFromSuperview)];`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T19:01:11.953

每次`- (UITableViewCell*)cellForRowAtIndexPath:(NSIndexPath *)indexPath`调用，`cellView`并`moreViews`再次添加到您已添加这些`UIView`s 的单元格中。
调用时，可重复使用的单元格不会删除它们的子视图`dequeueReusableCellWithIdentifier`。如果要添加子视图，最好的解决方案是子类化并在子类化的方法中`UITableViewCell`添加子视图`init``UITableViewCell`*

# haskell - 泛型系列生成无限列表

> ID：15369809
> 
> 赞同：6
> 
> 时间：2013-03-12T18:58:35.190
> 
> 标签：haskell, smallcheck

有了这个片段，还有 smallcheck-1.0.1

```
data Foo = A | B | Pair Foo Foo deriving Show
deriving instance Generic Foo
instance (Monad m) => Serial m Foo 
```

那么这个

```
list 1 (series :: Series Identity Foo) 
```

生成一个明显无限的列表。

在 smallcheck-0.6.1 只生成 [A,B] 之前我认为是等价的，这正是我所期望的。

这是对 smallcheck 系列的有意更改吗？如果是，是否有一种简单的方法可以恢复 0.6.1 的行为。

这里有可编译的程序来演示这一点：http: [//hpaste.org/83927](http://hpaste.org/83927)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T21:35:40.373

绝对是一个错误 - 感谢您的报告。我刚刚上传了修复它的 v1.0.2。

此外，我记录了一个[问题](https://github.com/feuerbach/smallcheck/issues/16)以提醒您测试通用实例。

# c++ - ASIO io_service 多次运行的问题

> ID：15369811
> 
> 赞同：1
> 
> 时间：2013-03-12T18:58:38.060
> 
> 标签：c++, boost-asio, boost-thread, asyncsocket

在我的问题中。我是客户，我的目的只是在需要时而不是每次都在服务器上编写。

我有一个单例类（调用者类），在其中我调用我的客户端程序（客户端）在服务器上写入任何消息，然后通过一个线程调用 boost::asio::io_service::run 。我的客户端程序（客户端）也是单例类。

如果服务器已经在运行，我的程序可以正常工作。因为客户端将首先连接到服务器。但是，如果服务器重新启动或未运行，那么首先我必须在编写消息之前检查服务器是否正在运行。

要每次检查服务器是否可用，我必须调用 Caller::run() 并运行 io_service。

如果不运行 io_service，我无法检查服务器是否正在运行，因为我在程序中使用了所有同步。一切都是异步的（异步连接，同步写入）

我的问题是有时我的程序进入 +D1 状态（不间断睡眠），然后我无法关闭我的程序。这是由于 io_service() 吗？

如何在不运行 io_service 的情况下检查服务器是否开启？

```
 class Caller
 {
  public:

  static Caller* getInstance()
  {
   static Caller Caller;
   return &Caller;
  }

  void run() 
  {
    pWork.reset( new boost::asio::io_service::work(io_service) );

    ////////////calling client program//////////////// 
    Client::getInstance(io_service)->start();

    thread = boost::thread(boost::bind(&boost::asio::io_service::run, &io_service));
  }     

  boost::asio::io_service io_service;
  boost::shared_ptr<boost::asio::io_service::work> pWork;

  boost::thread thread;

 private:
  Caller()
  {
  }
  ~Caller()
  {
    pWork.reset();
    thread.join();
  }
}; 

///////////my client program (Singleton Class)//////////////////
//////message write function///////////

void Client::sendResponse(std::string& messag)                      
{                                                                              
  boost::system::error_code error;                                           
  boost::asio::ip::tcp::endpoint endpoint = socket().remote_endpoint(error);    

  if ( error ) 
  {                                                               
    DEBUG_2("could not write: ",boost::system::system_error(error).what());    
    this->stop(); /////this will close the socket////
    Caller::getInstance()->run();   
    //////it will call the caller program to call the  connect function of client program /////
  }                                                                           
  else
    boost::asio::async_write(                                                         
      _socket,                                                                      
      boost::asio::buffer( message.c_str(), message.size()),
      _strand.wrap(                                                                 
        boost::bind(                                                                
          &Client::writeHandler,                                             
          this,
          boost::asio::placeholders::error,                                         
          boost::asio::placeholders::bytes_transferred  
}                                                                              

 Client *Client::getInstance(boost::asio::io_service& io_service)
  {
    if (!Client)
    {
      Client = new Client(io_service);
    }
    return Client;
  } 
```

我可以这样设计吗，我只写到服务器，不需要一次又一次地运行 io_service 。还是我需要调用 io_service::reset() 我是否以正确的方式使用工作？

我怎样才能优雅地停止或中止呢？通过调用 io_servie::stop 或加入这个线程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T04:31:14.213

检测连接有效性的典型方法是`async_read()`在连接成功后执行。当`async_read()`回调指示`boost::asio::error::eof`错误时，您的应用程序应该做出适当的反应：

1.  重新连接，可能有超时延迟
2.  优雅地终止
3.  中止

听起来您需要选项＃1。如果编写正确，您的应用程序应该只需要调用`io_service::run()`一次，事件循环将不断有工作要做。

* * *

如果您不想从套接字中读取以检测关闭，请实例化一个[`work`](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/io_service__work.html)对象并在程序执行期间将其保持在范围内。这将确保`io_service`始终有工作要做。当您的`async_write`完成处理程序因错误而被调用时，请按照前面的建议对您的应用程序做出必要的反应。

# php - 动态 Ajax 请求仅显示最终响应文本

> ID：15369812
> 
> 赞同：0
> 
> 时间：2013-03-12T18:58:38.843
> 
> 标签：php, ajax, responsetext

我在下面看到了类似的问题： [2 个有效的 AJAX 命令，但我只看到最后一个“responseText”](https://stackoverflow.com/questions/8669958/2-ajax-commands-that-work-but-i-only-see-the-last-responsetext)

但我正在使用一个字段数组，所以我不确定这是否会有所不同。为了进行测试，我将其添加到顶部以定义一些数据：

```
<?php
    $a = array('star_wars','marvel','board_games','','The_Han_Solo_Omnibus');
    $b = implode("~",$a);
    $count = count($a);
?> 
```

我在上面他定义的答案中看到： var httpRequest; 解决问题。我试过 - var xmlhttp; 但这并没有做到。

关于如何让所有部分加载的任何想法，而不仅仅是最后一个？我什至增加了大量的延迟，但没有任何效果。

谢谢

```
<script>

function showDiv(a)
{
var temp = new Array();
var delay = 2000;            // 1 second
var result = 'loading';    // the result from your AJAX response
var xmlhttp;

        temp = a.split('~');
        for(i=0;i<temp.length;i++)
        {
            alert(temp[i]); 
                divno =  i + 1;
            currentdiv = "loadArea" + divno;
            alert (currentdiv);

                    //var pageNumber = 1;
                    //eval("var text" + pageNumber + "=123;");
                    //alert(text1);

            if (temp[i]=="")
                  {
                  document.getElementById(currentdiv).innerHTML=""; //increment
                  }

            if (window.XMLHttpRequest)
                    {// code for IE7+, Firefox, Chrome, Opera, Safari
                    xmlhttp=new XMLHttpRequest();//increment
                    alert ("usingchrome");
                    }
            else
                    {// code for IE6, IE5
                    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");//increment
                    //alert ("using IE");
                    }

            xmlhttp.onreadystatechange=setTimeout(function()  //increment
                    {
                        alert ("inreadystate");
                         if (xmlhttp.readyState==4 && xmlhttp.status==200) //increment
                                {
                                if (temp[i] !="") {
                                setTimeout(function() {     
                                document.getElementById(currentdiv).innerHTML=xmlhttp.responseText; //increment                         

                                                    }, delay);

                                alert ('valueisgood');
                                                 }

                                }
                      }, delay);

                                if (temp[i] !="") {
                                    url = "http://zocreative.com/load.php?f="+temp[i];
                                    xmlhttp.open("GET",url,true);
                                    xmlhttp.send();
                                }

                  } 
        }

</script>
</head>
<body id="page1" onload="showDiv('<?php echo $b; ?>');">

<?php

$i = 1;
while ($i <= $count) {

    echo ("<div id='loadArea". $i ."'><br />
    <!-- AJAX content will load here-->
    loading ... ". $i ."
    </div>");
      /* the printed value would be
                   $i before the increment
                   (post-increment) */
    $i++;
}
?>
<div id="note"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:27:04.103

我强烈建议您查看 jQuery.load：[http](http://api.jquery.com/load/) ://api.jquery.com/load/ 。您尝试做的事情并不像您编写的代码那么复杂。

我不会在这里保证准确的语法，但这里是您上面使用 jQuery 和 jQuery 加载重新编写的 Javascript 代码的简化：

```
function showDiv(a) {
var temp = a.split('~'),
    divno;

for(i = 0; i < temp.length; i += 1) {
    divno =  i + 1;
    jQuery('#loadArea' + divno.toString()).load('http://zocreative.com/load.php?f=' + temp[i]);
} 
```

这里的关键是您要求 jQuery 将 URL 加载到指定的 div 中，而不必自己跟踪异步响应。jQuery.load 方法有几个选项可以让您响应完成，因此请阅读文档。

# c - 为什么我可以设置一个大于我使用 malloc() 保留的字符数组？

> ID：15369814
> 
> 赞同：2
> 
> 时间：2013-03-12T18:58:48.470
> 
> 标签：c, string, memory, dynamic

为什么这会打印出“测试”？：

```
 char *str;
    str = (char *)malloc(1);
    str[0] = 't';
    str[1] = 'e';
    str[2] = 's';
    str[3] = 't'; 
```

我正在尝试动态扩展字符串并尝试了解 malloc/realloc 的工作原理，而上述行为让我感到困惑，因为 malloc()/realloc() 建议扩展 char* 。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T19:02:20.660

未定义的行为意味着任何事情都可能发生。包括看起来“工作”，什么都没有，或分段错误。您的示例代码确实很糟糕，但 C 标准不保证它会做任何“有用”的事情，也不保证在编译时或运行时一定会发生任何“坏事”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T19:05:59.330

您正在写超出“正式”分配的内存的末尾。大多数内存分配系统都有内部使用的最小大小，您可能实际上并没有超出*该*边界，因此您的代码似乎可以正常工作。如果你让字符串足够长，你最终会传递一个对操作系统很重要的边界，你的程序就会崩溃。

您可以分配一个随机数`str`，然后也将其视为一个指针，并且每隔一段时间它就会真正起作用。但是你不知道你可能在写什么。与您的内存溢出相同。内存分配器可能会将分配打包得足够紧，以至于您正在覆盖程序中的其他内容。

您应该**始终**确保您不会超出任何数组的范围。 **曾经**。缓冲区溢出（和欠载）正是许多黑客利用来侵入系统的原因。确保您不允许它们，并且您已经比那里的大量旧代码更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T19:06:32.060

显然，这段代码是完全错误的——您正在访问超出数组边界的内存。

它有效，因为：

*   没有适当的机制来检测每一个无效的内存访问。许多此类尝试会导致分段错误，但并非每次都发生。很多时候，这样的错误代码只是简单地覆盖了一些随机变量等——这就是为什么像这样的调试问题会很快成为一场噩梦的原因之一。我建议您熟悉[Valgrind](http://valgrind.org/)。

*   在这种特殊情况下，我会说`malloc()`将分配的内存块四舍五入到（至少）4的倍数，所以在这种情况下它可能会按预期工作。但它仍然是一个错误。

*   你也没有明确地终止字符串，而且再次 - 行为真的是随机的，真的`str[4]`可以有任何价值。这取决于很多事情——从堆分配器的实现到纯粹的巧合。

# entity-framework - 如何找到 UIHInt 属性的目标属性？

> ID：15369823
> 
> 赞同：6
> 
> 时间：2013-03-12T18:59:08.653
> 
> 标签：entity-framework, entity-framework-5, data-annotations, asp.net-mvc-uihint

我有以下基于 UIHInt 的属性：

```
[AttributeUsage(AttributeTargets.Property)]
public class DropDownListAttribute : UIHintAttribute, IMetadataAware
{
    public DropDownListAttribute(string selectListName)
        : base(KnownUiHints.DropDown, KnownPresentationLayers.Mvc, selectListName)
    {
        SelectListName = selectListName;
    }

    public string SelectListName { get; set; }

    public void OnMetadataCreated(ModelMetadata metadata)
    {
        metadata.AdditionalValues[KnowMetadataKeys.SelectListName] = SelectListName;
    }
} 
```

其目的是将 SelectList 分配给要从列表中选择的单值视图模型属性，如下所示：

```
public class DemoModel: ViewModel
{
    [Required]
    [DropDownList("LanguageSelect")]
    [Display(Name = "Language")]
    public int? LanguageId { get; set; }

    public SelectList LanguageSelect { get; set; }
} 
```

我现在与一些非常高尔伯式的机器和我自己的元数据提供者一起工作，但是发现`IMetadataAware.OnMetadataCreated`后，我觉得我可以简化它。现在我将 添加`SelectListName`到元数据中，然后跳过一些循环到 a) 将 SelectList 放入某种全局字典中，b) 在呈现下拉列表时从该字典中取出选择列表。

我想将 SelectList 本身添加到属性中的模型元数据中，即属性适用于属性的本地元数据，但是如何访问该属性或它包含类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-19T14:15:26.463

访问 Pocos 上的属性的示例代码。有单个或多属性版本可供查看

示例调用方法

```
var MutliAttributeList = MyStatic.GetPocoMultiAttribute<MyAttribute>(typeof(poco),"AttrName");

 public static UAttribute GetPocoAttribute<TPoco, UAttribute>(string attributeName) {
        var result = typeof (TPoco).GetCustomAttributes(true)
                                   .Where(attribute => attribute.GetType()
                                                                .Name == attributeName)
                                   .Cast<UAttribute>()
                                   .FirstOrDefault();
        return result;
    }

public static IEnumerable<UAttribute> GetPocoMultiAttribute<UAttribute>(Type pocoType, string attributeName) {
        var result = pocoType.GetCustomAttributes(true)
                             .Where(attribute => attribute.GetType()
                                                          .Name == attributeName).Cast<UAttribute>().ToList();
        return result;
    } 
```

# python - GDAL ReadAsArray 不会忽略 NoData 值

> ID：15369829
> 
> 赞同：4
> 
> 时间：2013-03-12T18:59:25.550
> 
> 标签：python, gdal, no-data

我正在尝试将 TIFF 的波段读取为数组。问题是 GDAL 不会忽略 NoData 值。有没有办法告诉GDAL忽略它？

当我计算统计数据时，GDAL 会忽略 NoData 值。

```
import os, sys, gdal, ogr, numpy
from gdalconst import *

# register all of the drivers
gdal.AllRegister()

# open the image
ds = gdal.Open('test_slope.tif', GA_ReadOnly)

# get image size
rows = ds.RasterYSize
cols = ds.RasterXSize
bands = ds.RasterCount

# Set NoData Value
band = ds.GetRasterBand(1)
ndv = -3.4028230607371e+38
band.SetNoDataValue(ndv)

# Get Statistics
stats = band.ComputeStatistics(0)
print stats

# read in band as array
bandList = []
band.GetNoDataValue()
data = band.ReadAsArray(0, 0, cols, rows)
print data

>>> 
[0.0, 126.59918975830078, 25.757117870945123, 15.399812314100501]
[[ -3.40282306e+38  -3.40282306e+38  -3.40282306e+38 ...,  -3.40282306e+38
   -3.40282306e+38  -3.40282306e+38]
 [ -3.40282306e+38  -3.40282306e+38  -3.40282306e+38 ...,  -3.40282306e+38
   -3.40282306e+38  -3.40282306e+38]
 [ -3.40282306e+38  -3.40282306e+38  -3.40282306e+38 ...,  -3.40282306e+38
   -3.40282306e+38  -3.40282306e+38]
 ..., 
 [ -3.40282306e+38  -3.40282306e+38  -3.40282306e+38 ...,  -3.40282306e+38
   -3.40282306e+38  -3.40282306e+38]
 [ -3.40282306e+38  -3.40282306e+38  -3.40282306e+38 ...,  -3.40282306e+38
   -3.40282306e+38  -3.40282306e+38]
 [ -3.40282306e+38  -3.40282306e+38  -3.40282306e+38 ...,  -3.40282306e+38
   -3.40282306e+38  -3.40282306e+38]]
>>> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T20:57:51.937

我相信你可以`numpy.MaskedArray`从你的`numpy.ndarray`：

```
import numpy as np
import numpy.ma as ma

ndv = -3.40282306e+38

data = np.array([[0.0, 126.59918975830078, 25.757117870945123, 15.399812314100501],
                [-3.40282306e+38, -3.40282306e+38, -3.40282306e+38, -3.40282306e+38]])

masked_data = ma.masked_where(data == ndv, data)
print masked_data 
```

结果：

```
[[0.0 126.599189758 25.7571178709 15.3998123141]
[-- -- -- --]] 
```

在`numpy`中，[a`numpy.ndarray`和掩码的组合用于处理丢失的数据](http://docs.scipy.org/doc/numpy/reference/maskedarray.generic.html)。

# jquery - jquery 在“触摸”（iPhone）设备上不起作用

> ID：15369834
> 
> 赞同：0
> 
> 时间：2013-03-12T18:59:44.040
> 
> 标签：jquery, forms, touch

我有这个 jquery 可以清除在 iPhone 上工作的点击登录表单

```
 $(document).on('click', '.error2', function() {
        $(this).remove();
        return false;
    }); 
```

这在我的 iPhone 上运行良好...

然而这——

```
 $(document).on('click', '.register-error', function() {
        $("span.register-error").remove();
        return false;
    }); 
```

在单击时删除所有跨度根本不起作用。它什么也不做。

有任何想法吗？这是由于 CSS（由其他人）造成的吗？无论如何要“抓住一切”来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:01:25.920

尝试 jquery 触摸打孔。正如网站描述的那样。它很简单，就像一个魅力。

[http://touchpunch.furf.com/](http://touchpunch.furf.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-19T19:10:00.393

尝试通过 'touchend' 事件更改 'click' 事件，它适用于我

# javascript - 我如何检查已经请求的 ajax 数据？

> ID：15369837
> 
> 赞同：0
> 
> 时间：2013-03-12T18:59:50.303
> 
> 标签：javascript, ajax, json, jquery

我有图片库。当用户点击缩略图时，画廊有缩略图 ajax 请求将触发。我希望当用户再次单击缩略图请求时不应触发并使用现有数据。

```
$.getJSON(url, function(data) {

} 
```

我想要一个 js 对象，并在缩略图上单击完成时保留该对象中每个图像的 json 数据，首先检查是否已经加载数据，如果是，则不要进行 ajax 调用，只需使用我获取的数据早些时候我应该持有关于对象的数据吗？如是！那我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:05:56.950

使用 绑定初始点击事件`.one`，然后在请求 ajax 后在其中绑定新的点击事件。

```
$(".thumbnail").one("click",function(){
    var request = $.getJSON(url);
    $(this).on("click",function(){
        request.done(function(data){
            // do something with data when it is available
        });
    }).triggerHandler("click");
}); 
```

第一次点击每个缩略图将请求数据然后使用数据，每次后续点击将只使用数据

# c++ - CUDA 中的三重 For 循环

> ID：15369839
> 
> 赞同：0
> 
> 时间：2013-03-12T18:59:54.993
> 
> 标签：c++, cuda, parallel-for

如何在 CUDA 中编写以下 C++ 表达式？第一个循环很容易，但之后呢？（我把我的启动内核）

启动内核

```
dim3 dimBlock( 16 );
dim3 dimGrid( ( c + ( dimBlock.x - 1 ) ) / dimBlock.x ); 
```

C++ 3 循环表达式

```
for ( int i = 0; i < c; i++ ) {

     int val1 = A[ i ];

     int val2 = B[ i ];

     for ( int j = val1 - 10; j < val1 + 10; j++ ) { 

         for ( int k = val2 -10; k < val2 + 10; k++ ) {

             //calculations
         }         
     }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T19:17:59.440

有两种策略立即浮现在脑海。

1.  为最外层循环的每次迭代创建一个*线程*。然后每个线程将在其线程代码中保留内部 2 个嵌套循环。

    ```
    __global__ void mykernel(int *A, int *B, int size_c, ...){
      int i = threadIdx.x + blockDim.x*blockIdx.x;
      if (i < size_c){
        int val1 = A[ i ];
        int val2 = B[ i ];
        for ( int j = val1 - 10; j < val1 + 10; j++ ) { 
          for ( int k = val2 -10; k < val2 + 10; k++ ) {
             //calculations
          }         
        }    
      }
    }

    %define nTPB 512
    dimBlock(nTPB);
    dimGrid((c+nTPB-1)/nTPB); 
    ```

2.  为最外层循环的每次迭代创建一个*块*。然后，由于内部循环的迭代次数为 20 * 20 = 400 次总迭代，因此为每个最内层循环迭代分配一个线程。

    ```
    __global__ void mykernel(int *A, int *B, ...){
      int i = blockIdx.x;
      int idx = threadIdx.x;
      int idy = threadIdx.y
      int val1 = A[ i ];
      int val2 = B[ i ];
      if (idx < 20) && (idy < 20) {
        int j = val1 - 10 + idy; 
        int k = val2 - 10 + idx;
           //calculations
      }            
    }

    dimBlock(20, 20);
    dimGrid(c); 
    ```

# xml - 我的 XML 文档在 Eclipse 的不同源文件夹中找不到架构

> ID：15369842
> 
> 赞同：1
> 
> 时间：2013-03-12T18:59:57.123
> 
> 标签：xml, eclipse, xsd

我有一个带有 2 个源文件夹的 Eclipse 项目：src 和 test。我的 xml 架构位于 src 文件夹中，而我的示例 xml 文档位于 test 文件夹中。在它们的源文件夹中，它们位于同一个包中（IOW，架构是 src/top-level-package/schema.xds，xml 是 test/top-level-package/sample-xml.xml）。

我的 xml 的顶部如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<tag xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="schema.xsd"> 
```

当 xml 文档与架构在同一个包中时，这有效。然而，现在我收到了这样的警告：“文档中没有引用语法约束（DTD 或 XML 模式）。”

我尝试上树，然后像这样走进正确的文件夹：`../../src/top-level-package/schema.xsd`，但这没有帮助。

有什么建议么？

# ruby-on-rails - 嵌套属性使用回形针在 ror 中上传多张照片

> ID：15369844
> 
> 赞同：0
> 
> 时间：2013-03-12T19:00:03.580
> 
> 标签：ruby-on-rails, upload, paperclip, nested-forms, nested-attributes

我尝试上传照片，但似乎不起作用。**很多照片**

在视图>建筑>_form

```
<%= form_for(@building, :html=>{:multipart => true}) do |f| %>
  <% if @building.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@building.errors.count, "error") %> prohibited this building from being saved:</h2>

      <ul>
      <% @building.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :title %><br />
    <%= f.text_field :title %>
  </div>
  <div class="field">
    <%= f.label :status %><br />
    <%= f.select :status, Building::STATUS, :prompt=>'Select status of the building' %>
  </div>
  <div class="field">
    <%= f.label :description %><br />
    <%= f.text_area :description, :rows => 10 %>
  </div>
  <div class="field">
    <%= f.label :location %><br />
    <%= f.text_field :location %>
  </div>
  <div class="field">
    <%= f.label :price %><br />
    <%= f.text_field :price %>
  </div>
  <div class="field">
    <h3>Tasks</h3>
  <% f.fields_for :tasks do |task_form| -%>
    <%= render :partial => 'task', :locals => { :form => task_form } %>
  <% end -%>

  <%= add_photo(f) %>

   <%= f.file_field :foto%>

      </div>

      <div class="actions">
        <%= f.submit %>
      </div>
    <% end %> 
```

在视图>建筑>_task

```
 <div class="task">
      <p>
        <%= form.label :name %>
        <%= form.text_field :name, :size => 15 %>
        <%= remove_task_link( form ) %>
      </p>
    </div>

in helpers>building_helpers

module BuildingsHelper

def add_photo(form_builder)
  link_to_function "add", :id  => "add_photo" do |page|
  form_builder.fields_for :tasks, Task.new, :child_index => 'NEW_RECORD' do |f|
        html = render(:partial => 'task', :locals => { :form => f })
        page << "$('tasks').insert({ bottom: '#{escape_javascript(html)}'.replace(/NEW_RECORD/g, new Date().getTime()) });"
       end
  end
end

   def remove_task_link(form_builder)
    if form_builder.object.new_record?
      # If the task is a new record, we can just remove the div from the dom
      link_to_function("remove", "$(this).up('.task').remove();");
    else
      # However if it's a "real" record it has to be deleted from the database,
      # for this reason the new fields_for, accept_nested_attributes helpers give us _delete,
      # a virtual attribute that tells rails to delete the child record.
      form_builder.hidden_field(:_delete) +
      link_to_function("remove", "$(this).up('.task').hide(); $(this).previous().value = '1'")
    end
  end
end 
```

在控制器>建筑物中

```
 def new
    @building = Building.new
    2.times { @building.tasks.build }
    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @building }
    end
  end

  # GET /buildings/1/edit
  def edit
    @building = Building.find(params[:id])
    2.times { @building.tasks.build }
  end 
```

在视图>布局>应用程序中

```
<!DOCTYPE html>
<html>
<head>
  <title>Welcome to koshbay</title>
  <%= stylesheet_link_tag :all %>
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>

  <%= csrf_meta_tags %>
</head> 
```

模型>任务

```
class Task < ActiveRecord::Base
  attr_accessible :building_id, :name 
  belongs_to :project
has_attached_file :foto, :styles => { :medium => "300x300>",
                      :thumb => "100x100>" , 
                     :default_url => "/images/:style/missing.png"}

end 
```

模型>建筑

```
class Building < ActiveRecord::Base
  attr_accessible :description, :price, :status, :title ,:location, `:foto`

  has_many :tasks, :dependent => :destroy
  # This is new!
  accepts_nested_attributes_for :tasks, :allow_destroy => true
 end 
```

更新 1 个数据库表

数据库>创建任务

```
class CreateTasks < ActiveRecord::Migration
  def change
    create_table :tasks do |t|
      t.string :name
      t.integer :building_id

      t.timestamps
    end
  end
end 
```

数据库> create_buildings

```
class CreateBuildings < ActiveRecord::Migration
  def change
    create_table :buildings do |t|
      t.string :title
      t.string :location     
      t.string :status
      t.text :description
      t.decimal :price, :precision=>8, :scale => 2

      t.timestamps
    end
  end
end 
```

更新 2

**我的问题在于_task.html.erb**

更新 3

我已经运行 rails g 回形针建筑照片

现在在数据库中我有

```
class AddAttachmentFotoToBuildings < ActiveRecord::Migration
  def self.up
    change_table :buildings do |t|
      t.has_attached_file :foto
    end
  end

  def self.down
    drop_attached_file :buildings, :foto
  end
end 
```

我正在使用这个例子' [http://railsforum.com/viewtopic.php?id=28447](http://railsforum.com/viewtopic.php?id=28447) '

我没有收到任何错误，也看不到任何可以上传照片的内容。当我按下添加按钮时，什么也没有做。

有什么想法有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:03:21.040

你可以在这里看到你的项目：

**[https://github.com/DamirSvrtan/For-mario](https://github.com/DamirSvrtan/For-mario)**

你可以从那里克隆它。无论如何，为您提供详细信息：

1.您没有将此行包含在您的`config/environments/development.rb:`

```
Paperclip.options[:command_path] = "/usr/local/bin/" 
```

你可以看到我把那条线放在那里，它实际上是`"/usr/bin"`

运行 which convert 命令，得到什么，只需从其中剥离最后一个`'/convert'`并将其放入`development.rb`文件中。

2.你的建筑模型中有照片属性，但你的任务模型中有has_attached。我也解决了这个问题。我还更改了您的视图并删除了嵌套属性来处理照片，而是制作了建筑形式来处理它。我不小心删除了表单中的嵌套属性部分，所以把它拿回来，我想是两行。

3.由于某种原因，您的代码无法与 has_attachment 的“样式”部分一起使用。我真的不知道为什么会这样，因为到目前为止我的所有人都可以完美地使用它。我试图修复它，但我找不到解决方案。其他一些人在 stackoverflow 上也有同样的问题，也许是一些 ruby​​-rails 版本的东西。我的脑海里没有别的东西。如果您没有找到解决方案，您仍然可以“呼吸”它，但是，也许在这里再次询问某人为什么会发生这种情况。

4.我把回形针宝石改成：

```
gem "paperclip", "~> 3.0" 
```

5.希望您能理解我所做的所有更改。您可以接受或不接受代码，您的意愿。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T00:34:04.070

好的，这就是我使用**嵌套属性**所做的工作。要做到这一点，你需要 2 插入 1）回形针 2）imagemagick

在 gemfile 添加行

宝石'回形针'

然后在cmd中运行：捆绑安装

然后运行 ​​gem install rmagick //<------- 我的东西会工作。我忘了

一步步

** ps：建筑物是一个（建筑物）与（许多）照片的关系**

第 1 步：我用命令创建一个表：rails g model buildingphoto building_id:integer

D b

```
class CreateBuildingPhotos < ActiveRecord::Migration
  def change
    create_table :building_photos do |t|
      t.integer :building_id

      t.timestamps
    end
  end
end 
```

第 2 步：commant>rails g 回形针 buildingphoto photo

D b

```
class AddAttachmentPhotoToBuildingPhotos < ActiveRecord::Migration
  def self.up
    change_table :building_photos do |t|
      t.has_attached_file :photo
    end
  end

  def self.down
    drop_attached_file :building_photos, :photo
  end
end 
```

完成第 2 步后运行：rake db:migrate

在模型>建筑照片中

```
class BuildingPhoto < ActiveRecord::Base
  attr_accessible :building_id , :photo
  belongs_to :building

    has_many :photo

    has_attached_file :photo

end 
```

在模型>建筑中

```
class Building < ActiveRecord::Base
  attr_accessible :building_photos_attributes

  has_many :building_photos, :dependent => :destroy
  accepts_nested_attributes_for :building_photos
end 
```

在控制器>建筑控制器

```
def new
    @building = Building.new

    4.times { @building.building_photos.build }
    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @building }
    end
  end 
```

在视图>建筑>_buildingphoto.html.erb //我创建它

```
 <%= f.label :photo %><br />
    <%= f.file_field :photo %> 
```

在视图>建筑>_form.html.erb //我添加这一行

```
<div class="field">
   <%= f.fields_for :building_photos do |builder| %>
    <%= render "buildingphoto", :f => builder %>
  <% end %>
  </div> 
```

在 config>environments>development.rb // 告诉 Paperclip 在哪里可以找到您的 ImageMagick 安装（并非总是必需的）

```
Paperclip.options[:command_path] = "/usr/bin/" 
```

查看您上传的照片

```
<% building.building_photos.each do |photo| %>
        <%= link_to (image_tag (photo.photo.url)), building %>
        <% end %> 
```

# ajax - ajax不会成功

> ID：15369845
> 
> 赞同：3
> 
> 时间：2013-03-12T19:00:04.500
> 
> 标签：ajax

我正在尝试从我的 webapi 服务器获取数据。调试显示

```
GET http://localhost:62578/api/DB [HTTP/1.1 200 OK 2ms] 
```

但我没有成功，而是我遇到了错误并且没有数据传递给错误函数？

```
var records;
var loadedData = new Array();

$.ajax({
    type: 'GET',
    dataType: 'json',  
    accept: "application/json",
    url: 'http://localhost:62578/api/DB',
    //data: { a:'a' },
   // contentType: 'application/json; charset=utf-8',
    success: function(data) {
    //I never get here.
        $.each(data, function (key, val) {//key is the row number, val is the  object data below
                $.each(val, function (key2, val2) {//key2 is the array element name, val2 is the data. 
                    if (key == 0) loadedData.push(key2);  //we only need one row of collumns
                });
                records = key;
                init(loadedData);   
                });
            },
             error: function(jqXHR, exception) {
            //both return undefined.
        }
        }); 
```

webapi 服务器日志。

jttp = http 仅供参考（愚蠢的堆栈溢出）

```
iisexpress.exe Information: 0 : Request, Method=GET, Url=jttp://localhost:62578/api/DB, Message='jttp://localhost:62578/api/DB'
iisexpress.exe Information: 0 : Message='DB', Operation=DefaultHttpControllerSelector.SelectController
iisexpress.exe Information: 0 : Message='MvcApplication1.Controllers.DBController', Operation=DefaultHttpControllerActivator.Create
iisexpress.exe Information: 0 : Message='MvcApplication1.Controllers.DBController', Operation=HttpControllerDescriptor.CreateController
iisexpress.exe Information: 0 : Message='Selected action 'GetAllProducts()'', Operation=ApiControllerActionSelector.SelectAction
iisexpress.exe Information: 0 : Operation=HttpActionBinding.ExecuteBindingAsync
iisexpress.exe Information: 0 : Message='Action returned 'MvcApplication1.Models.DataBase[]'', Operation=ReflectedHttpActionDescriptor.ExecuteAsync
iisexpress.exe Information: 0 : Message='Will use same 'JsonMediaTypeFormatter' formatter', Operation=JsonMediaTypeFormatter.GetPerRequestFormatterInstance
iisexpress.exe Information: 0 : Message='Selected formatter='JsonMediaTypeFormatter', content-type='application/json; charset=utf-8'', Operation=DefaultContentNegotiator.Negotiate
iisexpress.exe Information: 0 : Operation=ApiControllerActionInvoker.InvokeActionAsync, Status=200 (OK)
iisexpress.exe Information: 0 : Operation=DBController.ExecuteAsync, Status=200 (OK)
iisexpress.exe Information: 0 : Response, Status=200 (OK), Method=GET, Url=jttp://localhost:62578/api/DB, Message='Content-type='application/json; charset=utf-8', content-length=unknown'
iisexpress.exe Information: 0 : Operation=JsonMediaTypeFormatter.WriteToStreamAsync
iisexpress.exe Information: 0 : Operation=DBController.Dispose 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:34:29.110

我认为您的 javascript 代码位于不同的端口；可能是端口 80，而您的 json 请求位于端口 62578。Ajax 请求只允许在相同的域、协议和端口中。

为了解决您的问题，您需要使用 JSONP 数据类型或任何其他类似机制（服务器端解决方案）。

查看[wikipedia](http://en.wikipedia.org/wiki/JSONP)以获取有关 JSONP 的更多信息。

查看此[示例](http://www.jquery4u.com/json/jsonp-examples/)，了解如何将 JSONP 与 jQuery ajax 调用一起使用。

查看[stackoverflow](https://stackoverflow.com/search?q=AJAX%20call%20cross-domain)以了解类似问题。

# java - maven-bundle-plugin 嵌入依赖项无法将捆绑包部署到 OSGi 容器中

> ID：15369849
> 
> 赞同：0
> 
> 时间：2013-03-12T19:00:11.247
> 
> 标签：java, eclipse, maven, osgi, bundle

我有一个 Maven 项目泛光灯。它在 Eclipse 中运行良好。然后我使用 bundle-plugin 生成包并将所有依赖项嵌入到单个目标包中`<embed-dependenciy>`。这是 pom.xml：

```
<groupId>net.floodlightcontroller</groupId>
<artifactId>floodlight</artifactId>
<version>master</version>
<packaging>bundle</packaging>
<build>
  <plugins>
    <plugin>
    <groupId>org.apache.felix</groupId>
    <artifactId>maven-bundle-plugin</artifactId>
    <extensions>true</extensions>
    <configuration>
     <instructions>
        <Embed-Dependency>*;scope=compile|runtime</Embed-Dependency>
        <Embed-Transitive>true</Embed-Transitive>
        <Bundle-Activator>net.floodlightcontroller.core.Activator</Bundle-Activator>
        <Bundle-SymbolicName>${project.artifactId}</Bundle-SymbolicName>
    </instructions>
  </configuration>
  </plugin>
 </plugins>
<build> 
```

我已经检查了目标结构。包括所有依赖项。然后我检查 manifest.mf：

```
Import-Package:  
COM.jrockit.reflect,COM.newmonics.PercClassLoader,com.google.protobuf,com.informix.jdbc,
com.kenai.jnr.x86asm,groovy.lang,javax.annotation,javax.jms,javax.mail,
javax.mail.internet,javax.management,javax.naming,javax.net,javax.net.ssl,javax.script,
*
*
* 
```

我想知道为什么它仍然导入这么多包，因为我已经将所有依赖项嵌入到单个包中。当我将捆绑包部署到 OSGi 容器并启动它时，出现错误：

```
Unable to start bundle 402: Unresolved constraint in bundle floodlight [402]: 
Unable to resolve 402.0: missing requirement [402.0] osgi.wiring.package;   
(osgi.wiring.package=COM.jrockit.reflect) 
```

COM.jrockit.reflect 是导入包中列出的第一个包。但它没有在导出包中列出。运行时需要这个包吗？谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T07:44:27.060

许多 jar 的代码中的依赖项比它们在 pom.xml 中声明的要多，这是一种可悲的做法。它们通常位于“桥接”环境的部分代码中。即当 jar 在 jrockit 或 groovy 中执行时，它可以利用它，但核心代码并不真正需要这种依赖。此外，应该可能从您的应用服务器导入 javax 包。这些通常在 Maven 的“提供”范围内。

一般来说，您可以使这些依赖项成为可选的，并祈祷没有核心代码路径。您可以使用以下命令在 bnd 中将它们设为可选：

```
<_import-package>
   javax.*, 
   COM.jrockit.*;
     COM.newmonics.*; 
     com.google.protobuf;
     com.informix.jdbc;
     com.kenai.jnr.x86asm;
     groovy.lang; 
       resolution:=optional, 
   *
</_import-package> 
```

不要忘记末尾的“*”，它为正常导入提供了掩码。

# javascript - 使用 jquery 改进每个悬停事件对 div 属性的搜索

> ID：15369850
> 
> 赞同：1
> 
> 时间：2013-03-12T19:00:12.197
> 
> 标签：javascript, jquery, html, css

我有几个 div，例如：

```
<section class="card-container">
    <div class="card over" data-direction="right" gal="gal1">
        <div class="front">
                <h2>yellow flowers</h2>
                <h4>(Right)</h4>
        </div>
        <div class="back">
            <img src="http://images.fanpop.com/images/image_uploads/Flower-Wallpaper-flowers-249398_1693_1413.jpg"
            width="100%;" height="100%;" alt="" />
        </div>
    </div>
</section> 
```

另外我有一个 jquery，它根据 div 搜索一个效果“右、左、下、上”以应用于 div，然后搜索 gal 的类型，并将其具有的图像更改为存储在相应数组中的其他图像的值

所以，我认为为了改进代码，我会用每个 div 的值制作一个字典，而不是应用

```
img = $(this).find('img'); 
```

每次用户悬停...

有没有办法改进代码，我也想知道等到所有图像都加载好还是什么？[这是小提琴](http://jsfiddle.net/fUsPh/37/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:05:25.747

您可以通过将图像放入 div 并将 div 在 css 中的 prop 设置为： position: absolute; 来加载图像。左：-5000px；

HTML：

```
<div id="allimages"><img 1><img 2> etc.. </div> 
```

CSS：

```
#allimages {
  postion: absolute;
  left: -5000px;
} 
```

And there alot other way to: you can catch all img with Jquery and put them in the div when dom is ready

# binding - 用敲除绑定替换 DisplayTemplate

> ID：15369857
> 
> 赞同：0
> 
> 时间：2013-03-12T19:00:31.997
> 
> 标签：binding, asp.net-mvc-4, knockout.js, display-templates

我目前正在使用 DisplayTemplate 来显示我的模型的属性：

```
@Html.DisplayFor( m => m.TheProperty, "myTemplate") 
```

模板输出图像的html，来源取决于模型（TheProperty）是否为空。

现在，我将视图中的所有绑定替换为淘汰赛绑定。所以看来我不能再使用 DisplayTemplates 了，可以吗？由于现在控件已绑定到 js ViewModel ，我将如何将模板传递给 Model ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:41:08.030

KO 中的等价物是模板绑定，但是它的语法不是很好，就像

```
<div data-bind="template: { name: 'display-for-my-property', data: myProperty }"></div> 
```

其中*display-for-my-property*是带有 myProperty 模板的脚本标签的 ID

如您所见，这个语法非常混乱，我制作了自己的库来解决这个问题

[https://github.com/AndersMalmgren/Knockout.BindingConventions](https://github.com/AndersMalmgren/Knockout.BindingConventions)

使用我的 lib 相同的场景看起来像

```
<div data-name="myProperty"></div> 
```

示例 [http://jsfiddle.net/xJL7u/](http://jsfiddle.net/xJL7u/)

你可以扩展我的库，这样你就可以做到

```
<div data-display="myProperty"></div> 
```

和

```
<div data-editor="myProperty"></div> 
```

# android - air for android 禁用/停用外部键

> ID：15369861
> 
> 赞同：1
> 
> 时间：2013-03-12T19:00:45.470
> 
> 标签：android, actionscript-3, air

希望这个问题也能帮助那些搜索谷歌的人。

希望禁用所有外部键，例如 android 设备上的返回和主页按钮以及使用内部或外部键盘的所有键。我想创建一种他们必须按下才能退出应用程序的按钮模式，因为我正在创建一个 KIDS 游戏，我不希望一岁的孩子能够按键关闭应用程序，而只是玩按钮和应用程序上的声音。

有没有办法禁用所有外部按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:14:11.383

我不是空中程序员，但这仍然回答了你的问题。

Android 系统不允许*您*禁用或暂时停用主页键。只要您的应用程序在前台，您就可以控制返回键和音量按钮。但是，除非您是启动器，否则您*永远无法*控制主页键。

简而言之，不，您不能禁用所有外部按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T09:54:46.907

除了主页键之外，如何停用所有功能？

# java - 包括 hibernate-validator 会破坏现有的休眠配置

> ID：15369862
> 
> 赞同：0
> 
> 时间：2013-03-12T19:00:45.423
> 
> 标签：java, hibernate, validation, hibernate-validator

我正在编写一个 java 模块，其中我使用了休眠验证器。该模块本身工作正常。

但是，当它作为使用休眠作为标准实体映射的 ORM 的父项目的一部分包含时，父模块会因抱怨它无法设置验证工厂（因此无法设置会话工厂）而崩溃。

异常消息是“调用 init 方法失败；嵌套异常是 org.hibernate.HibernateException：无法获取默认的 Bean 验证工厂”

- 讲义

编辑：休眠验证器：4.3.1.最终休眠核心：3.6.5

堆栈跟踪 ：

```
org.springframework.beans.factory.BeanCreationException: Error
creating bean with name 'messageSourceServiceTarget' defined in class
path resource [applicationContext-service.xml]: Cannot resolve
reference to bean 'mutableResourceBundleMessageSource' while setting
bean property 'activeMessageSource'; nested exception is
org.springframework.beans.factory.BeanCreationException: Error
creating bean with name 'mutableResourceBundleMessageSource' defined
in class path resource [applicationContext-service.xml]:
Initialization of bean failed; nested exception is
org.springframework.beans.factory.BeanCreationException: Error
creating bean with name
'org.springframework.transaction.interceptor.TransactionAttributeSourceAdvisor#0'
defined in class path resource [applicationContext-service.xml]:
Cannot resolve reference to bean 'transactionInterceptor' while
setting bean property 'transactionInterceptor'; nested exception is
org.springframework.beans.factory.BeanCreationException: Error
creating bean with name 'transactionInterceptor' defined in class path
resource [applicationContext-service.xml]: Cannot resolve reference to
bean 'transactionManager' while setting bean property
'transactionManager'; nested exception is
org.springframework.beans.factory.BeanCreationException: Error
creating bean with name 'transactionManager' defined in class path
resource [applicationContext-service.xml]: Cannot resolve reference to
bean 'sessionFactory' while setting bean property 'sessionFactory';
nested exception is
org.springframework.beans.factory.BeanCreationException: Error
creating bean with name 'sessionFactory' defined in class path
resource [applicationContext-service.xml]: Invocation of init method
failed; nested exception is org.hibernate.HibernateException: Unable
to get the default Bean Validation factory 
```

# c++ - c++ 使用字符串操作进行澄清

> ID：15369879
> 
> 赞同：1
> 
> 时间：2013-03-12T19:01:29.310
> 
> 标签：c++, vb.net

我不是 C++ 开发人员，我需要将一些代码转换为 vb.net

我找到了这个

```
_tcslwr_s 
```

我什至不知道它是类型还是函数（方法）。它用于：

```
 _bstr_t _rbstProcessName
    TCHAR* ptcProcessName = static_cast<TCHAR*>(_rbstProcessName);
    _tcslwr_s(ptcProcessName, _rbstProcessName.length() + 1); 
```

我知道这`_tcslwr_s`是来自VS frameWork 系统文件的`#define`in 。`tchar.h`

我想对什么是 a 做一个简短的解释`#define`，在这种情况下，什么是`_tcslwr_s`

提前非常感谢！

### 编辑

现在在评论的帮助下，我知道什么是定义。搜索我发现`_tcslwr_s`定义的代码`_wcslwr_s`。仅有的两行在其中，`string.h`并且是：

```
_Check_return_wat_ _CRTIMP errno_t __cdecl _wcslwr_s(_Inout_z_cap_(_SizeInWords) wchar_t * _Str, _In_ size_t _SizeInWords);
__DEFINE_CPP_OVERLOAD_SECURE_FUNC_0_0(errno_t, _wcslwr_s, _Deref_prepost_z_ wchar_t, _String) 
```

在这一点上，我什么也看不懂。我应该怎么做才能从一开始就知道我的两个字符串（`_rbstProcessName`和`ptcProcessName`）发生了什么？

再一次感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:42:44.340

根据这个 MSDN [http://msdn.microsoft.com/en-us/library/y889wzfw%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/y889wzfw%28v=vs.100%29.aspx) `_tcslwr_s`是一个宏，它映射到根据定义将字符串转换为小写的各种函数`_UNICODE`（标准函数的 Unicode 支持）和`_MBCS`（标准函数的多字节字符支持）宏。VB.Net 等价物是`.ToLower()`字符串方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T19:43:46.320

`_Check_return_wat_ _CRTIMP errno_t __cdecl _wcslwr_s(_Inout_z_cap_(_SizeInWords) wchar_t * _Str, _In_ size_t _SizeInWords);`正在声明一个调用的函数，该函数`_wcslwr_s`接受 a`wchar_t *`并`size_t`返回一个`errno_t`. 以下划线开头的所有内容（`_Str`和除外`_SizeInWords`）都是函数的属性。例如，`__cdecl`表示应使用 C 调用约定（参见[http://msdn.microsoft.com/en-us/library/zkwh89ks(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/zkwh89ks(v=vs.80).aspx)），并`_In_`表示将参数传递给功能。

简单来说，这个函数接受一个字符串和字符串的大小并返回一个错误代码。基于[http://msdn.microsoft.com/en-us/library/y889wzfw(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/y889wzfw(v=vs.80).aspx)，此函数似乎将提供的字符串 ( `_Str`) 转换为小写。

# c# - 出现非常奇怪的启动错误

> ID：15369882
> 
> 赞同：1
> 
> 时间：2013-03-12T19:01:45.627
> 
> 标签：c#, visual-studio, msbuild

我有一个非常简单的程序：

```
using System;
using System.Windows.Forms;
using System.Text;
using System.IO;

namespace NS
{
    class Program
    {
        [STAThread]
        static void Main(string[] args)
        {
            try
            {
                Console.SetIn(new StreamReader(Console.OpenStandardInput(2000)));
                //get some content using Console.ReadLine() and prompting using Console.WriteLine();
                string HTML =
                string.Format(@"HTML redacted", someFormatString, w/e);
                Clipboard.SetText(HTML);
                Console.ReadKey(true);
                string JS = string.Format(@"JS redacted", someFormatString, w/e);
                Clipboard.SetText(JS);
                Console.WriteLine("Press any key to continue...");
                Console.ReadKey(true);
            }
            catch (Exception e)
            {
                Console.WriteLine(e.ToString());
            }
        }
    }
} 
```

旁注：是的，我知道在 Main 周围包装 try/catch 不是首选，但我现在需要它来进行调试。

我引用了所有正确的程序集，这是 csproj 中的程序集引用：

```
<Reference Include="PresentationCore" />
<Reference Include="PresentationFramework" />
<Reference Include="System" />
<Reference Include="System.Core" />
<Reference Include="System.Windows.Forms" />
<Reference Include="System.Xml.Linq" />
<Reference Include="System.Data.DataSetExtensions" />
<Reference Include="Microsoft.CSharp" />
<Reference Include="System.Data" />
<Reference Include="System.Xml" /> 
```

但是，当我尝试从资源管理器加载它时，它会出现 0xc000142。不过我不知道是什么意思。

不过，如果我从 CMD 加载它，效果会很好。

有任何想法吗？我尝试添加引用，更改为 System.Windows Clipboard 类，创建一个新项目并复制代码，但没有任何效果。

编辑：因为这似乎并不清楚：这是一个控制台应用程序，碰巧需要在表格中使用剪贴板类。这不是成为表单/CLI 应用程序的尝试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:13:39.083

*评论后编辑*：

听起来你的机器有问题。这是我的测试程序的发布版本，它在我的机器上运行。如果它不能在您的设备上运行，则说明您的 .net 安装已损坏或发生类似情况。我建议也尝试在另一台计算机上。

这是.net 4.5 顺便说一句。

如果其他人可以确认它有效，而且我没有疯，那就太棒了:)

```
http://23.23.250.9/ClipboardInConsole.zip 
```

请注意，为了让剪贴板工作，您只需要参考

```
System
System.Windows.Forms 
```

不知道你需要所有其他人做什么，但对于剪贴板来说，这两个就足够了，项目仍然可以构建和运行。祝你好运！

* * *

*我原来的答案：*

需要单线程单元模式才能正常工作。添加以下属性，这应该可以工作。**请注意，此答案是在问题中添加 [STAThread] 的 OP 编辑​​之前发布的。**

```
 [STAThread]
    static void Main(string[] args) 
```

**注意：**如果您`Console.ReadKey();`在 catch 块中添加一个，您将看到该错误。您也只需要对 System.Windows.Forms 的引用。

**注意 2：**如果它仍然无法正常工作，那么您还有另一个您没有看到的错误。尝试我在 Catch{} 块中添加 Console.ReadKey() 的建议并查看异常。

我的（你的）编译和工作的完整代码：

```
using System;
using System.Windows.Forms;
using System.Text;
using System.IO;

namespace NS
{

    class Program
    {
        [STAThread]
        static void Main(string[] args)
        {
            try
            {
                Console.SetIn(new StreamReader(Console.OpenStandardInput(2000)));
                //get some content using Console.ReadLine() and prompting using Console.WriteLine();
                string HTML = "<html>";
                //string.Format(@"HTML redacted", someFormatString, w / e);
                Clipboard.SetText(HTML);
                Console.ReadKey(true);
                string JS = "JS { }";//string.Format(@"JS redacted", someFormatString, w / e);
                Clipboard.SetText(JS);
                Console.WriteLine("Press any key to continue...");
                Console.ReadKey(true);
            }
            catch (Exception e)
            {
                Console.WriteLine(e.ToString());
                Console.ReadKey();
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:13:40.247

我有几个选择给你：

1) 尝试在管理员模式下运行 Visual Studio。右键单击 VS 图标 -> 以管理员身份运行。让我知道这是否可行。

2) 检查您的项目设置并确保它是在选择“任何 CPU”的情况下构建的。

# php - 如何使用 php 在 linux 上获取 c++ 编译结果

> ID：15369883
> 
> 赞同：1
> 
> 时间：2013-03-12T19:01:59.403
> 
> 标签：php, c++, linux, compilation, terminal

我想用 php 编译错误。我可以获取某些命令的输出，但不能获取编译命令的输出。例如 ：

```
$compileCode = "g++ -o program program.cpp";
$output = `$compileCode`; 
```

不起作用。但

```
$output = `ls -l`; 
```

作品

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:07:10.410

尝试将标准错误重定向到标准输出：

```
$compileCode = "g++ -o program program.cpp 2>&1";
$output = `$compileCode`; 
```

如果您只想查看*错误*，还可以将 stdout 重定向到`/dev/null`：

```
$compileCode = "g++ -o program program.cpp 2>&1 1>/dev/null";
$output = `$compileCode`; 
```

# java - 写入文件但只保存最后一行

> ID：15369884
> 
> 赞同：0
> 
> 时间：2013-03-12T19:02:04.440
> 
> 标签：java, file, io

我正在尝试复制一个文本文件，但是当代码完成执行时，我只有文件中的最后一行文本。显然，`scanLine()`不断覆盖同一行，但我无法解决这个问题。有任何想法吗？

```
do{                 
  try{ 
    FileWriter name = new FileWriter("/home/fok/Desktop/out");
    BufferedWriter out = new BufferedWriter(name);
    a=x.nextLine();scanner x grabs next line and sets it string a
    out.write(a);//writes a to file
    out.close();//closees file
  } catch (IOException ioe){
    System.out.println("file writer error");
  } 

} while(x.hasNext()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:06:19.087

这很简单，您在 for 循环中关闭和打开文件。

```
 public void readfile(){
   try {           
     FileWriter name = new FileWriter("/home/fok/Desktop/out");
     BufferedWriter out = new BufferedWriter(name);
      do {                 
        a=x.nextLine();scanner x grabs next line and sets it string a
        out.write(a);//writes a to file
      } while(x.hasNext());
      out.close();//closees file
   } catch (IOException ioe){
      System.out.println("file writer error");
  }
} 
```

# c# - 将多张图片设置为多个PictureBox

> ID：15369885
> 
> 赞同：1
> 
> 时间：2013-03-12T19:02:05.970
> 
> 标签：c#, image, picturebox

我打算做的是

```
 PictureBox1.Image = ImageHere 
```

但我不确定除了那时我将如何解决这个问题

```
 PictureBox2.Image = ImageHere2
  PictureBox3.Image = ImageHere3
  PictureBox4.Image = ImageHere4 
```

如果我可以做 [increment] 之类的但被拒绝

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:08:08.283

您可以动态创建图片框并为其分配相应的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:13:48.403

如果要将图片框和图像放入数组或类似数组中，则可以像这样循环：

```
PictureBox[] pictureBoxes = { PictureBox1, PictureBox2, PictureBox3, PictureBox4 };
Image[] images = { ImageHere1, ImageHere2, ImageHere3, ImageHere4 };

for (int i = 0; i < pictureBoxes.Length; i++)
{
    pictureBoxes[i].Image = images[i];
} 
```

尽管如此，仍然存在创建数组的麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T19:19:37.663

创建图像列表并使用 foreach 迭代器：

```
List<Image> images = //get your list of images
foreach(var img in images)
{
    PictureBox pb = new PictureBox();
    pb.Image = img;
    YourControl.Add(pb);
} 
```

# c++ - read_some() 超时

> ID：15369891
> 
> 赞同：0
> 
> 时间：2013-03-12T19:02:23.330
> 
> 标签：c++, timeout, boost-asio, tcpclient

我正在构建一个基于 Boost::ASIO lib 的 TCP 客户端。我使用`read_some()`Boost 从服务器读取响应。我想在其中实现一个超时逻辑，如果 10 秒内没有通信，它会发送一个“ping”命令。问题是

```
l=_socket->read_some(boost::asio::buffer(this->reply,sizeof(this->reply)),error); 
```

当没有数据要传输到读取缓冲区时，似乎会阻止程序执行。那么有没有办法摆脱呢？我不想使用，`async_read_some()`因为如果没有数据传输到缓冲区，我需要这个线程休眠，这很容易完成，`read_some()`因为它返回传输的数据大小。主要的是即使在超时期间我也不想关闭连接，而是检查服务器是否响应 ping 命令，如果没有，我会重新连接。因此，当在一段时间内没有数据传输时，这或多或少会检查服务器是否仍然连接。

# java - 从 gae 移动云存储中的文件

> ID：15369893
> 
> 赞同：2
> 
> 时间：2013-03-12T19:02:33.520
> 
> 标签：java, google-app-engine, google-cloud-storage

我正在编写一个应用程序，用户可以在其中将图片从 gae 上传到云存储。上传有点棘手，因为我必须将上传的文件转换为字节格式。我遵循了下一个教程： [https ://developers.google.com/appengine/docs/java/googlestorage/overview](https://developers.google.com/appengine/docs/java/googlestorage/overview)

我只换了

```
 writeChannel.write(ByteBuffer.wrap
               ("And miles to go before I sleep.".getBytes())); 
```

和

```
ByteBuffer buffer = ByteBuffer.wrap(IOUtils.toByteArray(file.getInputStream))
writeChannel.write(buffer) 
```

现在我必须重命名一些文件夹/图像。我阅读了有关它的相关文档，并尝试阅读原始文件并将其重写到新位置。但是我在将文件读取为字节文件并重写它时遇到了很多问题（我想我必须读取为字节文件）。

我的最后一次尝试是这样的：

```
 public void copyFile(String from,String to) {
        FileService   fileService = FileServiceFactory.getFileService
        AppEngineFile readableFile = new AppEngineFile(from)

        readChannel = fileService.openReadChannel(readableFile,true)      
        int fileSize = fileService.stat(readableFile).getLength.intValue()
        LOG.info("Size int " + fileSize)
        ByteBuffer dst = ByteBuffer.allocate(fileSize)

        readChannel.read(dst)

        //readChannel.close() comment because fails to close the file.

        GSFileOptionsBuilder optionsBuilder = new GSFileOptionsBuilder()
          .setBucket("bucket_name")
          .setKey(to)
          .setAcl("public_read")

        AppEngineFile writableFile = fileService.createNewGSFile(optionsBuilder.build())
        val writeChannel = fileService.openWriteChannel(writableFile, true)

        // This time we write to the channel directly.
        writeChannel.write(dst)

        // Now finalize
        writeChannel.closeFinally()
        readChannel.close()
} 
```

当我使用此方法时，它会写入文件，但使用 0 个字节。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-24T01:24:13.397

您确定您的读取成功并且数据如您所愿吗？从其文档[`FileReadChannel`](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/files/FileReadChannel)中继承`read()`方法说：[`ReadableByteChannel`](http://docs.oracle.com/javase/7/docs/api/java/nio/channels/ReadableByteChannel.html)

> 返回：
> 读取的字节数，可能为零，如果通道已到达流尾，则为 -1

您的代码没有检查`read()`equals的返回值，`fileSize`因此错误可能存在，如果缓冲区为空，它将解释您的代码创建空文件的原因。

另外，这一行：

```
// readChannel.close() comment because fails to close the file. 
```

令人担忧，因为它表明存在其他问题，因为它不应该失败。您尝试读取的文件是否 (a) 可读且 (b) 已完成？

* * *

另外，正如[大卫在](https://stackoverflow.com/users/1654764/david)[另一个答案](https://stackoverflow.com/a/23784255/3618671)中提到的那样，您使用的 Files API 已被[弃用](https://developers.google.com/appengine/docs/java/googlestorage/)：

> **弃用通知：**文件 API 功能将在未来某个时间被移除，取而代之的是[Google Cloud Storage Client Library](https://developers.google.com/appengine/docs/java/googlecloudstorageclient/)。为方便仍在使用 Files API 的开发人员，保留了已弃用 API 的文档。

因此，按照说明的建议，请参阅[Google Cloud Storage Java 客户端库](https://developers.google.com/appengine/docs/java/googlecloudstorageclient/)并查看[迁移页面](https://developers.google.com/appengine/docs/java/googlecloudstorageclient/migrate)，了解从已弃用的 API 调用到新调用的映射，其中包括一个完整的迁移示例，在这种情况下应该会对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-21T13:13:29.550

已`FileService`弃用。查看 Cloud Storage API，[`objects.copy`](https://developers.google.com/storage/docs/json_api/v1/objects/copy)您可以使用一种方法。

然后，您必须使用[`objects.delete`](https://developers.google.com/storage/docs/json_api/v1/objects/delete).

# javascript - 谷歌浏览器在开发者工具中复制 CSS 路径

> ID：15369895
> 
> 赞同：32
> 
> 时间：2013-03-12T19:02:35.503
> 
> 标签：javascript, css, google-chrome, web-developer-toolbar

Google Chrome 的开发者工具在工具栏底部显示所选元素的 CSS 路径（或其中的大部分）。在 Firebug 中，您可以右键单击 CSS 路径中的任何选择器，然后将 CSS 路径抓取到该元素。谷歌浏览器有这个功能吗？如果没有内置支持，可以使用哪些工具？

![Chrome CSS 路径](../Images/ca7603d622da032cf91c41582930c312.png)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2016-02-15T14:59:20.437

**Chrome 已更新此选项**

在最近更新后的 chrome 中，此选项已从更改
`(right click on the element in Elements Window) > Copy CSS path`
为：
`(right click on the element in Elements Window) > Copy > Copy selector`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-12T19:07:03.810

Chrome 没有它，因此人们为 Chrome 制作了 chrome 扩展、书签和其他工具来复制此功能。

可能重复： [Chrome 相当于 Firefox Firebug CSS 选择路径](https://stackoverflow.com/questions/11443437/chrome-equivalent-of-firefox-firebug-css-select-path)

书签： [http ://www.selectorgadget.com/](http://www.selectorgadget.com/)

Chrome 扩展程序： [https ://chrome.google.com/webstore/detail/lbghbpofdlcecfbpjgmffnkienjkboi](https://chrome.google.com/webstore/detail/lbghbpofdlcecfbpjgmffnkieenjkboi)

我仍然希望其他人就如何在 Chrome 中最好地处理这个问题提供答案、建议和提示。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-04-16T20:19:44.860

您可以右键单击主源窗口中的元素和“复制 CSS 路径”。当我必须处理无法重新编码的页面时，这可以挽救生命。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-06T14:36:06.303

这是一个小的 (CoffeeScript) 片段，它将提供 CSS 路径（直到第一个 id 元素 - 尽管您可以通过删除中断部分轻松更改它）：

```
getCSSPath = (node)->
  parts = []
  while node.parentElement
    str = node.tagName
    if node.id
      str += "##{node.id}"
      parts.unshift str
      break
    siblingsArr = Array.prototype.slice.call(node.parentElement.childNodes)
    ind = siblingsArr.filter((n)-> n.attributes?).indexOf(node)
    parts.unshift str + ":nth-child(#{ind + 1})"
    node = node.parentElement
  parts.join ' > ' 
```

对每个节点使用 ":nth-child"，所以如果你想获得类名，你需要修改它。

# awk - 查找 2 个模式 Calc Avg Print Avg AWK

> ID：15369896
> 
> 赞同：0
> 
> 时间：2013-03-12T19:02:36.220
> 
> 标签：awk

我正在尝试执行以下操作`awk`：

我的数据如下所示：

```
REGION = ARA ---------------------------------      
Boston1/E0023        Date, Simulated
01/91   47.53815129 
02/91   50.65750607 
03/91   47.19937152 
04/91   56.61537973 
05/91   65.20709691 
06/91   41.26555885 
07/91   33.50030035 
08/91   28.53445471 
09/91   28.15509992 
10/91   42.01960281 
11/91   59.78663005 
12/91   36.73035389 
01/92   40.94643107 
02/92   39.54410249 
03/92   63.74148238 
04/92   59.17052297 
05/92   38.82535638 
06/92   44.63729125 
07/92   35.54487173 
08/92   26.69060562 
09/92   24.80315524 
10/92   56.54098106 
11/92   49.91787601 
12/92   46.36870196 
01/93   39.29539609 
02/93   52.82357496 
03/93   42.95556699 
12/12   59.29651502 
01/13   71.07555385 
02/13   67.83077701 

REGION = ARA ---------------------------------          
Eastview/EV977       Date, Simulated    
01/91   54.56       
02/91   45.67 
```

该数据针对不同的位置（Boston1、Eastview 等）重复，下面的行是月份（01、02 等）和年份（91、92、93 等）。在 AWK 中，我试图确定一些特定位置，例如 150 个中的 5 个，并计算特定年份（例如 1991-2012 年）第 2 列的月平均值（1 月 - 12 月）。我不确定如何一次计算所有这些。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:52:52.947

让你开始的东西：

```
NF==3 {
    header=$1
}

$1~/[0-9][0-9].[0-9][0-9]/{
    split($1, ym, "\/")
    month=ym[1]
    year=ym[2]
    avg[year]+=$2
    items[year]+=1      
}

/^$/ {
    print header
    for (i in avg) {
        print "year:", i, "avg:", avg[i]/items[i], "items", items[i]
    }
    delete avg
    delete items
} 
```

输出：

```
$ awk -f avg.awk input
Boston1/E0023
year: 12 avg: 59.2965 items 1
year: 13 avg: 69.4532 items 2
year: 91 avg: 44.7675 items 12
year: 92 avg: 43.8943 items 12
year: 93 avg: 45.0248 items 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T22:04:59.370

对于所有区域或仅给定区域：

```
BEGIN {
    FS="[/ ]"
    OFS=","
    split("Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec",month," ")
}
/Date/ {
    if ($1==location||location=="") {
        print $1
        for (i=1;i<=length(sum);i++)
            print month[i],sum[i]/count[i]
    }
    delete sum
    delete count
}
/^[0-9]/ {
    count[int($1)]++
    sum[int($1)]=sum[int($1)]+$5
} 
```

所有地区：

```
$ tac file | awk -f script.awk
Eastview
Jan,54.56
Feb,45.67
Boston1
Jan,49.7139
Feb,52.714
Mar,51.2988
Apr,57.893
May,52.0162
Jun,42.9514
Jul,34.5226
Aug,27.6125
Sep,26.4791
Oct,49.2803
Nov,54.8523
Dec,47.4652 
```

对于给定区域：

```
$ tac file | awk -v location="Eastview" -f script.awk
Eastview
Jan,54.56
Feb,45.67

$ tac file | awk -v location="Boston1" -f script.awk
Boston1
Jan,49.7139
Feb,52.714
Mar,51.2988
Apr,57.893
May,52.0162
Jun,42.9514
Jul,34.5226
Aug,27.6125
Sep,26.4791
Oct,49.2803
Nov,54.8523
Dec,47.4652 
```

# emacs - ST2 和 Emacs：删除整个/整个单词 + 右侧的空格

> ID：15369897
> 
> 赞同：0
> 
> 时间：2013-03-12T19:02:37.433
> 
> 标签：emacs, editor, keyboard-shortcuts, sublimetext2, sublimetext

来自文字处理背景，我已经习惯看到`delete word`以下行为：删除整个单词以及单词后的所有空格。我假设插件`delete_word.py`（在 内`/Packages/Default`）为具有编程背景的人保留空白。

为了近似我习惯看到的行为，有必要将光标放在前一个单词的末尾，删除下一​​个单词（这样完成后两个单词之间只剩下一个空格）。

Sublime 是否已经内置了另一个键盘快捷键来完成我最习惯的行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T00:22:03.813

解决方案#1——崇高文本2：

**无论**出于何种原因，`super+d`aka `⌘+d`aka`find_under_expand`不适用于宏。 似乎不是插件。因此，这是一个适用于宏的示例 select-entire-word 插件：**`find_under_expand`**

 **```
 import sublime, sublime_plugin

 class Expand(sublime_plugin.TextCommand):
     def run(self, edit):
         regions = []
         for s in self.view.sel():
             word = self.view.word(sublime.Region(s.begin(), s.end()))
             if word.end() == s.end():
             # to deal with an end of line issue
                 word = self.view.word(sublime.Region(s.end(), s.end() + 1))
             regions.append(word)
         for r in regions:
             self.view.sel().add(r) 
```

接下来，安装由以下人员编写的 Shrink-Whitespaces 插件`dacap`：

[https://github.com/dacap/sublime-shrink-whitespaces](https://github.com/dacap/sublime-shrink-whitespaces)。

然后，创建此宏。将空格缩小两 (2) 次处理存在制表符或制表符+空格的情况。

```
[
 {
      "args": null,
      "command": "expand"
 },
 {
      "args": null,
      "command": "right_delete"
 },
 {
      "args": null,
      "command": "shrink_whitespaces"
 },
 {
      "args": null,
      "command": "shrink_whitespaces"
 },
 {
      "args":
      {
           "characters": " "
      },
      "command": "insert"
 }
] 
```

* * *

解决方案#2——崇高文本2：

安装： [https ://github.com/bits/ExpandSelectionToWhitespace-SublimeText](https://github.com/bits/ExpandSelectionToWhitespace-SublimeText)

创建一个宏并将其绑定到您最喜欢的键盘快捷键：

```
[
    {
        "args": null,
        "command": "expand_selection_to_whitespace"
    },
    {
        "args":
        {
            "by": "wordends",
            "extend": true,
            "forward": true
        },
        "command": "move"
    },
    {
        "args":
        {
            "by": "words",
            "extend": true,
            "forward": false
        },
        "command": "move"
    },
    {
        "args": null,
        "command": "left_delete"
    }
] 
```

* * *

解决方案#1——Emacs——定义两个函数，并创建一个宏：

```
(fset 'lawlist-kill-word [?\C-= kp-delete ?\C-+])

(global-set-key (kbd "C-=") 'lawlist-mark-word)

(global-set-key (kbd "C-+") 'delete-horizontal-space-forward)

(defun lawlist-mark-word ()
  "Mark the entire symbol around or in front of point."
  (interactive)
  (let ((symbol-regexp "\\s_\\|\\sw"))
    (when (or (looking-at symbol-regexp)
              (looking-back symbol-regexp))
      (skip-syntax-forward "_w")
      (set-mark (point))
      (while (looking-back symbol-regexp)
        (backward-char)))))

(defun delete-horizontal-space-forward () ; adapted from `delete-horizontal-space'
      "*Delete all spaces and tabs after point."
      (interactive "*")
      (delete-region (point) (progn (skip-chars-forward " \t") (point)))) 
```**

# logging - TCL：按日期和隧道将隧道消息分组在一起

> ID：15369898
> 
> 赞同：1
> 
> 时间：2013-03-12T19:02:38.763
> 
> 标签：logging, tcl, cisco

嗨，我对 TCL 编码很陌生，并在此站点的帮助下编写了此脚本。我想知道是否有更好/更清洁的方法来写这个？

```
set y [read -nonewline [set f [open "tmp.txt" r]]];

array set counts [list];
foreach message [split $y "\n"] {
        # This gets the status, ie: DOWN/UP/OFFLINE.
        set status [lindex [split $message] end]; # will assign last field
        set mon [lindex [split $message] 1]; # number represents the filed number
        set day [lindex lindex[split $message] 2];
        if {$day ==""} {
            set day [lindex [split $message] 3];
        } else {
            set day [lindex [split $message] 2]
        }
    # +number represents the counter
        if {[info exists counts($mon,$day,$status)]} {
                set counts($mon,$day,$status) [expr {$counts($mon,$day,$status)+1}] 
        } else {
                set counts($mon,$day,$status) 1
        }   
}

# sort based for down type evetns
puts "\n\nTabl: Down per day"
puts "\n\n MMM DD || Cnt Status"
puts " ====================="

foreach count [lsort -increasing -unique [array names counts]] {
        foreach {mon day status} [split $count ","] { break; }
        if {$status =="down"} {
            puts " $mon $day || [set counts($count)] \t $status"
        }

    }
# process tunnels that are down and flapped 3 times

array set countsT [list];
foreach message [split $y "\n"] {
        # This gets the status, ie: DOWN/UP/OFFLINE.
        set status [lindex [split $message] end];
        set mon [lindex [split $message] 1];
        set day [lindex [split $message] 2];
        set Tunnx [lindex [split $message] 9];

        if {$day ==""} {
            set day [lindex [split $message] 3];
            set Tunnx [lindex [split $message] 10]
        } else {
            set day [lindex [split $message] 2]
        }

        if {[info exists countsT($mon,$day,$Tunnx,$status)]} {
            set countsT($mon,$day,$Tunnx,$status) [expr {$countsT($mon,$day,$Tunnx,$status)+1}]
        } else {
                set countsT($mon,$day,$Tunnx,$status) 1
        }
}

puts "\n\nTabl: Tunnel = Flap >3"
puts "\n\n MMM DD || Tunnelx\tCnt\t Status"
puts " ================================="

foreach count [lsort -increasing -unique [array names countsT]] {

        if {[set countsT($count)] < 2} { continue; } {
            foreach {mon day tun n status} [split $count ","] { break; } 
            if {$status =="down"} {
                puts " $mon $day || $tun \t [set countsT($count)] \t$status"
        }
    }
}
if {[info exists f]} { close $f } 
```

示例日志：

```
670555: Mar  9 23:39:18.214: %LINEPROTO-5-UPDOWN: Line protocol on Interface Tunnel1, changed state to down
670557: Mar  9 23:39:50.877: %LINEPROTO-5-UPDOWN: Line protocol on Interface Tunnel2, changed state to down
670559: Mar  9 23:41:08.662: %LINEPROTO-5-UPDOWN: Line protocol on Interface Tunnel4, changed state to down
670561: Mar  9 23:41:18.309: %LINEPROTO-5-UPDOWN: Line protocol on Interface Tunnel3, changed state to down
670562: Mar  9 23:43:13.237: %LINEPROTO-5-UPDOWN: Line protocol on Interface Tunnel2, changed state to down
670564: Mar  9 23:45:26.549: %LINEPROTO-5-UPDOWN: Line protocol on Interface Tunnel2, changed state to down
670567: Mar  9 23:46:45.708: %LINEPROTO-5-UPDOWN: Line protocol on Interface Tunnel3, changed state to down
670570: Mar  9 23:49:31.222: %LINEPROTO-5-UPDOWN: Line protocol on Interface Tunnel2, changed state to down
670574: Mar  9 23:53:14.295: %LINEPROTO-5-UPDOWN: Line protocol on Interface Tunnel2, changed state to down
670576: Mar  9 23:55:49.217: %LINEPROTO-5-UPDOWN: Line protocol on Interface Tunnel2, changed state to down
670577: Mar  9 23:56:16.180: %LINEPROTO-5-UPDOWN: Line protocol on Interface Tunnel1, changed state to down
670581: Mar  9 23:56:45.480: %LINEPROTO-5-UPDOWN: Line protocol on Interface Tunnel3, changed state     to down
670583: Mar  9 23:59:54.080: %LINEPROTO-5-UPDOWN: Line protocol on Interface Tunnel2, changed state to down
670585: Mar 10 00:00:33.224: %LINEPROTO-5-UPDOWN: Line protocol on Interface Tunnel1, changed state to down
670587: Mar 10 00:04:03.292: %LINEPROTO-5-UPDOWN: Line protocol on Interface Tunnel2, changed state to down
670589: Mar 10 00:04:38.921: %LINEPROTO-5-UPDOWN: Line protocol on Interface Tunnel3, changed state to down
670590: Mar 10 00:05:00.505: %LINEPROTO-5-UPDOWN: Line protocol on Interface Tunnel1, changed state to down
670593: Mar 10 00:06:22.473: %LINEPROTO-5-UPDOWN: Line protocol on Interface Tunnel2, changed state to down
670596: Mar 10 00:09:07.262: %LINEPROTO-5-UPDOWN: Line protocol on Interface Tunnel1, changed state to down
670598: Mar 10 00:11:11.294: %LINEPROTO-5-UPDOWN: Line protocol on Interface Tunnel2, changed state to down
670602: Mar 10 00:14:23.649: %LINEPROTO-5-UPDOWN: Line protocol on Interface Tunnel1, changed state to down
670604: Mar 10 00:14:59.296: %LINEPROTO-5-UPDOWN: Line protocol on Interface Tunnel2, changed state to down

 Results:

 Tabl: Down per day

 MMM DD || Cnt Status
 =====================
 Mar 10 || 9     down
 Mar 9 || 13     down

 Tabl: Tunnel = Flap >3

  MMM DD || Tunnelx      Cnt      Status
  =================================
  Mar 10 || Tunnel1       4      down
  Mar 10 || Tunnel2       4      down
  Mar 9 || Tunnel1        2      down
  Mar 9 || Tunnel2        7      down
  Mar 9 || Tunnel3        3      down 
```

**更新：**

需要记录一天内翻动的隧道数量。

使用下表作为数据参考，新表将是 3 月 10 日的 2 条隧道抖动和 3 月 9 日的 3 条隧道。

我看不到如何计算出隧道字段的附加分组来计算抖动隧道的数量。

```
 MMM DD || Tunnelx      Cnt      Status
  =================================
  Mar 10 || Tunnel1       4      down
  Mar 10 || Tunnel2       4      down
  Mar 9 || Tunnel1        2      down
  Mar 9 || Tunnel2        7      down
  Mar 9 || Tunnel3        3      down 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T22:09:52.233

一些注意事项：

*   您不必遍历文件两次，只需在第一个循环中累积数组
*   `while {[gets ...`正如我所展示的，逐行读取文件的惯用方式是
*   如您所见，`split`仅在单个空白字符上拆分。我已经演示了使用`regexp`来收集字段。

我会这样做：

```
array set counts [list]
array set countsT [list]

set f [open tmp.txt r]

while {[gets $f message] != -1} {
    set fields [regexp -all -inline {\S+} $message]
    set mon [lindex $fields 1] 

    # use day "09" instead of "9" so it gets the sorting right.
    set day [format %02d [lindex $fields 2]]

    # have to be careful to remove the trailing comma from the tunnel
    set Tunnx [string trimright [lindex $fields 9] ,]

    set status [lindex $fields end] ;# will assign last field

    incr counts($mon,$day,$status) 
    incr countsT($mon,$day,$Tunnx,$status) 
}

close $f

# sort based for down type evetns
puts "\n\nTabl: Down per day"
puts "\n\n MMM DD || Cnt Status"
puts " ====================="

# don't need "-unique" flag: array keys will be unique
foreach count [lsort -increasing [array names counts]] {
    foreach {mon day status} [split $count ","] { break }
    if {$status eq "down"} {
        puts [format "%s %s || %3d\t%s" $mon $day $counts($count) $status]
    }
}

puts "\n\nTabl: Tunnel = Flap >3"
puts "\n\n MMM DD || Tunnelx\tCnt\t Status"
puts " ================================="

foreach count [lsort -increasing [array names countsT]] {
    if {$countsT($count) < 2} { continue } 
    foreach {mon day tun status} [split $count ","] { break } 
    if {$status eq "down"} {
        puts [format " %s %s || %s\t%3d\t%s" $mon $day $tun $countsT($count) $status]
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T21:58:13.903

我不确定“更好”，但我想提出一些改变：

```
set f [open "tmp.txt" r]
set contents [read -nonewline $f]
close $f

array set status_counts {}
array set tunnel_counts {}

foreach message [split $contents "\n"] {
    set mon    [lindex $message 1]
    set day    [lindex $message 2]
    set tunnel [lindex $message 9]
    set status [lindex $message end]

    # Do we really need this block?
    if {$day ==""} {
        set day [lindex $message 3]
        set tunnel [lindex $message 10]
    } else {
        set day [lindex $message 2]
    }

    set index "$mon,$day,$status"
    if {[info exists status_counts($index)]} {
        set status_counts($index) [expr {$status_counts($index)+1}] 
    } else {
        set status_counts($index) 1
    }   

    set index "$mon,$day,$tunnel,$status"
    if {[info exists tunnel_counts($index)]} {
        set tunnel_counts($index) [expr {$tunnel_counts($index)+1}]
    } else {
        set tunnel_counts($index) 1
    }
}

# sort based for down type evetns
puts "\n\nTabl: Down per day"
puts "\n\n"
puts [format "%-3s %2s || %3s %s" MMM DD Cnt Status]
puts [format "%-3s %2s || %3s %s" === == === ======]

foreach count [lsort -increasing -unique [array names status_counts *,down]] {
    foreach {mon day status} [split $count ","] { break }
    puts [format "%-3s %2s || %3s %s" $mon $day $status_counts($count) $status]
}

puts "\n\nTabl: Tunnel = Flap >3"
puts "\n\n"
puts [format "%-3s %2s || %-8s %-4s %s" MMM DD TunnelX Cnt Status]
puts [format "%-3s %2s || %-8s %-4s %s" === == ======= === ======]

foreach count [lsort -increasing -unique [array names tunnel_counts *,down]] {
    if {[set tunnel_counts($count)] < 2} { continue; } 
    foreach {mon day tun n status} [split $count ","] { break } 
    puts [format "%-3s %2s || %-8s %-4s %s" $mon $day $tun $tunnel_counts($count) $status]
} 
```

### 讨论

以下是我所做的更改以及我的想法。这些是我的意见，因此您可能同意也可能不同意我的观点。

1.  Tcl 不需要以分号结束一行，所以我宁愿不看到它们，这有助于代码的清晰。

2.  作为两个单独的步骤打开和读取文件。如果出现错误，我知道是哪一步导致了问题，从而更容易调试。

3.  我更喜欢在完成后立即关闭文件，而不是在脚本末尾。

4.  将两个循环合二为一。你有两个循环，每个循环都有相似但略有不同的步骤。我将它们组合成一个循环，从而减少代码量、复杂性和出错的机会。

5.  我更喜欢拼写的标识符名称，而不是缩写。例如，我更喜欢*tunnel_counts*而不是*countsT*

6.  调用前无需拆分消息`lindex`。在大多数情况下，Tcl 以相同的方式处理字符串和列表。这意味着一个字符串可以作为一个列表，其中项目用空格分隔。

7.  在第一个循环中，我不理解测试的代码块`$day == ""`，所以我只留下那个块。我怀疑你不需要它。

8.  我引入了 variable `index`，它减少了打字，使代码更清晰，并减少了出错的机会。

9.  我没有在两个报告循环中进行测试，而是`$status == "down"`将过滤器应用于`array names`命令：`[array names tunnel_counts *,down]`. 这消除了`if`这些循环中的语句。

10.  格式更改以更好地对齐

11.  最后，原始代码的缩进不一致：有时缩进 4 个空格，有时缩进 8 个。这可能与您在编辑器中设置制表符的方式有关。

12.  需要注意的是，您的原始脚本运行良好。我建议的更改是为了便于阅读、理解和维护。

# actionscript-3 - 从 Flash 发送请求

> ID：15369901
> 
> 赞同：0
> 
> 时间：2013-03-12T19:02:44.883
> 
> 标签：actionscript-3, flash

这是我用来获取玩游戏的人的用户名的一些 Flash 代码的简化版本：

```
var req:URLLoader = new URLLoader();
req.addEventListener(Event.COMPLETE, onLoaded);
req.load(new URLRequest(baseURL + "php/account.php?getUsername"));
function onLoaded(e:Event):void {
    if(e.target.data == "Guest") {
        LoadingText.text = "Welcome, Guest!"
    }
    else {
    LoadingText.text = "Welcome, " + e.target.data + "!";
    }
} 
```

php/account.php?getUsername 只是从 PHP 会话变量中获取用户名并将其输出。

使用诸如 Tamper Data for Firefox 之类的东西，我可以看到从 Flash 发送的请求，甚至可以根据需要对其进行编辑。

与其他在线游戏相比，这种方法感觉非常慢，并且在尝试对其他游戏进行逆向工程以查看它们如何管理此类事情时，对于某些游戏，请求不会出现在 Tamper Data 中。

所以我想知道，有没有其他更快、更高效的 Flash 请求方法？我不需要任何花哨的东西，例如发送帖子数据或编辑推荐 URL。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:43:43.407

很可能其他游戏使用套接字连接。这就是为什么您在 Tamper Data 中看不到请求以及它们具有更好性能的原因。

在套接字连接的情况下，您打开与服务器的连接一次，您可以根据需要发出任意数量的请求。

使用 HTTP，TCP 连接会为每个请求打开和关闭，这会影响性能。

使用套接字连接，您可以完全避免 HTTP 协议，您可以设计比 HTTP 更轻量的协议。事实上，当您需要高性能时，没有人使用 HTTP。

请参阅此处的闪存套接字文档：[套接字](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/Socket.html)

附言

为了获得高性能，最好使用 UDP 而不是 TCP，但闪存套接字仅限于 TCP，因此您无需注意这一点。

# c++ - 如何将 C++ 字符串中的单词大写？

> ID：15369910
> 
> 赞同：5
> 
> 时间：2013-03-12T19:03:06.427
> 
> 标签：c++, boost, stdstring, capitalize

我有一个 std::string 并希望第一个字母大写，其余小写。

我可以这样做的一种方法是：

```
const std::string example("eXamPLe");
std::string capitalized = boost::to_lower_copy(example);

capitalized[0] = toupper(capitalized[0]); 
```

这将产生`capitalized`：

> “例子”

但也许有更直接的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T19:23:36.270

如果字符串确实只是一个单词，`std::string capitalized = boost::locale::to_title (example)`应该这样做。否则，您所拥有的将非常紧凑。

编辑：刚刚注意到`boost::python`命名空间有一个`str`类，它的`capitalize()`方法听起来像是适用于多字串（假设你想要你所描述的而不是标题大小写）。然而，仅仅为了获得该功能而使用 python 字符串可能不是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-13T20:05:50.337

**我认为字符串变量名称是示例，其中存储的字符串是“示例”。** 所以试试这个：

```
example[0] = toupper(example[0]);
for(int i=1 ; example[i] != '\0' ; ++i){
        example[i] = tolower(example[i]);
        }

cout << example << endl; 
```

这可能会给您第一个字符大写，而字符串的其余部分变为小写。它与原始解决方案没有太大不同，只是一种不同的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-13T21:55:09.687

无升压的解决方案是：

```
#include <iostream>
#include <string>
#include <algorithm>

int main()
{
    const std::string example("eXamPLe");

    std::string s = example;    
    s[0] = toupper(s[0]);
    std::transform(s.begin()+1, s.end(), s.begin()+1, tolower);

    std::cout << s << "\n";
} 
```

# ios6 - 如何从 UIActivity 视图控制器中选择的 UIActivity 项目中呈现 ModalViewController？

> ID：15369911
> 
> 赞同：6
> 
> 时间：2013-03-12T19:03:07.057
> 
> 标签：ios6, presentmodalviewcontroller, uiactivityviewcontroller

我正在开发一个在 detailViewController 中显示一些数据的应用程序。我在导航栏中有一个 rightBarButton，它显示了一个 UIActivityViewController，其中填充了我自己的 UIActivity 子类项目。它们中的大多数都可以正常工作，因为它们只是从详细视图中更改数据的一个小方面，但是我需要其中一个在选择时打开 modalViewController。我不断从控制台收到以下警告.....

```
 Warning: Attempt to present <UINavigationController: 0x1fd00590>  
on <UITabBarController: 0x1fde1070> which is already presenting <MPActivityViewController: 0x1fd2f970> 
```

我想值得注意的是应用程序不会崩溃，但模式视图也不会出现。我假设 UIActivityViewController 本身就是一个模态视图，您一次只能显示其中一个，因此任务是弄清楚在 ActivityView 消失后如何执行我的 segue，但这就是我难住的地方。我欢迎任何帮助、想法或反馈。我试过谷歌，但运气不佳，我猜是因为 UIActivityViewController 太新了。

到目前为止，这是我的设置，我的 UIActivity 对象有一个委托设置为 detailViewController 用于自定义协议，该协议允许 detailViewController 执行数据更改，然后更新其视图。

对于应该呈现 modalView 控制器的有问题的活动，我尝试了几种方法，它们都得到相同的警告。

* * *

**这些都不起作用！！！**

* * *

1）只是尝试从我的委托方法执行segue

```
- (void) activityDidRequestTransactionEdit
{
    NSLog(@"activityDidRequestTransactionEdit");
    [self performSegueWithIdentifier:@"editTransaction" sender:self];
} 
```

2）尝试在 UIActivityViewController 上设置一个完成块，并让我的委托方法设置一个 bool 标志，应该显示模态视图（self.editor）

```
[activityViewController setCompletionHandler:^(NSString *activityType, BOOL completed) {
    NSLog(@"completed dialog - activity: %@ - finished flag: %d", activityType, completed);
    if (completed && self.editor) {
        [self performSegueWithIdentifier:@"editTransaction" sender:self];
    }
}]; 
```

3）子类化 UIActivityViewController 本身，将 detailView 作为委托，并用我自己的完成块覆盖它的 dismissViewControllerAnimated: 方法

```
- (void) dismissViewControllerAnimated:(BOOL)flag completion:(void (^)(void))completion
{
    [super dismissViewControllerAnimated:flag completion:^{
        [self.MPActivityDelegate activityDidRequestTransactionEdit];

    }];
} 
```

* * *

**工作解决方案**

* * *

在 UIActivity 子类中，您需要像这样覆盖此方法

```
- (UIViewController *) activityViewController {
    MPEditMyDataViewController *controller = [[MPEditMyDataViewController alloc] init];
    controller.activity = self; // more on this property below
    UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:controller];
    return navController;
} 
```

在你的 MPEditMyDataViewController.h （选择的动作应该产生的视图控制器）你需要一个属性回到活动子类，像这样

```
@property (strong, nonatomic) MPEditMyDataActivity *activity; 
```

在你的 MPEditMyDataViewController.m

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    UIBarButtonItem *cancelButton = [[UIBarButtonItem alloc]
                                     initWithBarButtonSystemItem:UIBarButtonSystemItemCancel
                                     target:self
                                     action:@selector(cancel)];

    self.navigationItem.leftBarButtonItem = cancelButton;
}
// here's how you dismiss the view controller when you are done with it
// after saving the changes to your data or whatever the view controller is supposed to do.
-(void) cancel
{
    NSLog(@"Cancel Button Pushed");
    [self.activity activityDidFinish:YES];
}
@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T20:59:02.027

做了一些更多的文档挖掘并找到了 UIActivity 子类化的这个方法

```
- (UIViewController *) activityViewController 
```

它让我的视图控制器像我想要的那样弹出，方法是从这里返回它而不是试图从我的 detailViewController 中分离它。现在要弄清楚当我完成它时如何解雇它！！！！

# c++ - 类中的动态数组

> ID：15369913
> 
> 赞同：5
> 
> 时间：2013-03-12T19:03:17.797
> 
> 标签：c++, class, matrix, dynamic-arrays

我目前正在做以下练习：

一个通用的矩阵类（15 分）

> a) 创建一个名为 Matrix 的类，它应该包含 M*N 个 double 类型的存储。就像之前一样，在选择如何存储数据时，了解我们以后将使用数据做什么通常很有用。在矩阵运算中，我们将根据列和/或行访问矩阵的不同元素，因此将 Matrix 的成员排序为数组很有用。此外，我们将需要更改存储在矩阵中的数据的大小，因此它应该是动态分配的。
> 
> b) 为矩阵创建构造函数。
> 
> 创建以下三个构造函数： Matrix() • 默认构造函数，应将矩阵初始化为无效状态。
> 
> 显式矩阵（无符号整数 N） • 应该构造一个有效的 NxN 矩阵，初始化为单位矩阵。（课程大纲中没有明确的关键字，但应该在这里使用。）
> 
> Matrix(unsigned int M, unsigned int N) • 应该构造一个有效的MxN 矩阵，初始化为一个零矩阵。（所有元素都为零。）
> 
> ~Matrix() • Matrix 的析构函数，应该删除所有动态分配的内存。

到目前为止，我的课程如下：

```
 class Matrix{
    private:
        int rows;
        int columns;
        double* matrix;
    public:
        Matrix();
        explicit Matrix(int N);
        Matrix(int M, int N);
        ~Matrix();
}; 
```

我的其余代码：

```
 Matrix::Matrix(){
    double * matrix = NULL;
}

Matrix::Matrix(int N){
    double * matrix = new double[N * N];
    this->rows = N;
    this->columns = N;

    for(int i = 0; i < N; i++){
        for(int j = 0; j < N; j++){
            if(i==j)
                matrix[i * N + j] = 1;
            else
                matrix[i * N + j] = 0;
        }
    }
}

Matrix::Matrix(int M, int N){
    double * matrix = new double[M * N];
    this->rows = M;
    this->columns = N;

    for(int i = 0; i < M; i++){
        for(int j = 0; j < N; j++)
            matrix[i * N + j] =  0;
    }
}

Matrix::~Matrix(){
    delete [] matrix;
} 
```

我是否正确创建了动态数组和构造函数？我稍后在练习中使用三个不同的构造函数创建三个不同的数组。我该怎么做？如果我尝试这样的事情

```
Matrix::Matrix();
Matrix::Matrix(3); 
```

或者

```
Matrix::Matrix(3,4) 
```

我收到以下错误：

> Øving_6.exe 中 0x773c15de 处的未处理异常：0xC0000005：访问冲突读取位置 0xccccccc0。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T19:18:54.930

在您的构造函数中，您正在定义一个局部变量

```
double * matrix = new double[N * N]; 
```

它会隐藏您的同名成员变量，因此该成员永远不会被初始化。

您只需要将其更改为

```
matrix = new double[N * N]; 
```

`this->`除非绝对有必要消除歧义（这几乎从不），否则用于成员访问是非常不符合 C++的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T10:30:08.050

您会发现更多“C++”（有时是初始化成员的唯一方法）：

```
Matrix::Matrix(int M, int N):   rows    (M), 
                                columns (N), 
                                matrix  (new double[M * N]) 
{
    for(int i = 0; i < M; i++)
        for(int j = 0; j < N; j++)
            matrix[i * N + j] =  0;

} 
```

现在试着理解这一点：

```
Matrix::Matrix(       int N):   rows    (N), 
                                columns (N), 
                                matrix  (new double[N * N]) 
{
    for(int i = 0; i < N; i++)
        for(int j = 0; j < N; j++)
            matrix[i * N + j] =  (i==j);

} 
```

如果您使用：

```
class Matrix{
private:
    int rows;
    int columns;
    std::unique_ptr<double[]> matrix; 
```

你会发现你不需要析构函数和其他一些无关紧要的东西。另外，请阅读我的其他答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T19:15:44.440

在您的三个构造函数中，您将使用本地变量矩阵屏蔽实例变量矩阵。尝试这个：

```
Matrix::Matrix(){
 this->matrix = NULL;
}

Matrix::Matrix(int N){
 this->matrix = new double[N * N];
 this->rows = N;
this->columns = N;

for(int i = 0; i < N; i++){
    for(int j = 0; j < N; j++){
        if(i==j)
            matrix[i * N + j] = 1;
        else
            matrix[i * N + j] = 0;
    }
}
}

Matrix::Matrix(int M, int N){
 this->matrix = new double[M * N];
this->rows = M;
this->columns = N;

for(int i = 0; i < M; i++){
    for(int j = 0; j < N; j++)
        matrix[i * N + j] =  0;
} 
```

}

# php - 当一个事件被触发时，我需要在 x 之后检查一些东西吗？

> ID：15369914
> 
> 赞同：2
> 
> 时间：2013-03-12T19:03:26.573
> 
> 标签：php, html, mysql

我需要一些关于最佳方式的建议。我正在开发一个 Web 应用程序来监视数据流并将其添加到数据库中。然后它根据特定标准的规则集对其进行检查。如果满足其中一个条件，则需要在 x 分钟后对同一条目运行特定查询。（x 由用户配置设置）。

我在想一种方法是让它创建 cron 工作，但首先，我不知道该怎么做，其次，我想知道是否有更好的方法。

收到条目 -> 匹配条件 -> 等待 X 分钟 -> 执行另一个查询。

我需要它在不暂停脚本的情况下执行此操作，因为会传入大量数据，因此如果等待 10 分钟，它将永远不会处理所有数据。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:10:49.580

如果有很多类似的任务，您可以为任务制作一个表格并在需要时填充它。

然后，每分钟运行的 cron 脚本可以从该表中选择执行时间小于或等于当前时间的所有条目并运行它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T19:15:47.943

不要创建多个 cron 作业。

将用户配置存储为时间戳（将来），并有*一个频繁运行的 cron 作业*（每 1 分钟为最大值）并将查询用户配置列表以查看是否需要执行另一个查询。

存储 cron 作业的最后执行时间并让它查询列表 -

```
SELECT * FROM `pending_queries` WHERE `execution_ts` <= {$last_execution_ts} 
```

## 一句警告

如果某些查询需要更长的时间来执行，您将面临一个或多个查询的执行时间可能重叠的风险。为了解决这个问题，一旦您在待处理的查询中提取数据，您应该使用标志将其`is_processing`标记为行中的其他字段。所以你的查询现在变成 -

```
SELECT * FROM `pending_queries` WHERE 
  `execution_ts` <= {$last_Execution_ts} AND `is_processing`=0 
```

最后，在处理完查询后，您应该将其从`pending_queries`表中删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T19:10:01.017

# 第一种也是最简单的方法：

学习 cronjob。

# 第二种方式：

如果您想等待 10 分钟而不停止脚本执行，则用户必须等待 10 分钟。

如果您想在不打扰用户的情况下执行此操作，您可以创建一个处理此操作的子进程。该过程不会停止，但与用户的交互将结束。在子进程中，您可以将脚本暂停 10 分钟。

如何创建子进程： http: [//php.net/manual/en/function.pcntl-fork.php](http://php.net/manual/en/function.pcntl-fork.php)

如何暂停进程： http: [//php.net/manual/en/function.sleep.php](http://php.net/manual/en/function.sleep.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T19:10:19.703

我使用 JS/JQuery 和 PHP 为自己解决了类似的问题。这是它的一种伪代码：

```
 pingTimer = 0;
  function pingTimerIncrement() {
     //your criterias to be checked here either using plain 
     //JS or AJAX to do it on server side
     if (criterias met) {
       pingTimer += 1; //increase by 1 minute

       if (pingTimer == YOUR_USER_CONFIG_MINUTES) {
          //code to update your database using ajax
       }
     }
  }

  $(function() {
     var timerInterval = setInterval("pingTimerIncrement()", 6000); //1 minute
  }); 
```

另一种方式，如果你不想使用 JS/JQuery 然后使用**cronjob**

# javascript - 使用 jQuery 从下拉列表中选择后清除其余的 DIV

> ID：15369920
> 
> 赞同：1
> 
> 时间：2013-03-12T19:03:52.397
> 
> 标签：javascript, jquery, html

这是我的js：

```
<script type="text/javascript">
        $(document).ready(function(){
           $('#box1').hide();
           $('#box2').hide();
           $('#box3').hide();
           $("#thechoices").change(function(){
              if(this.value == 'all'){
                     $("#boxes").children().show();
                  }else{
                     $("#" + this.value).show().siblings().hide();
                  }
           });          
           $("#thechoices").change(); 
        });
</script> 
```

和HTML：

```
 <div id="boxes">
       <div id="box1"><p>Box 1 stuff…&lt;/p></div>
       <div id="box2"><p>Box 2 stuff…&lt;/p></div>
       <div id="box3"><p>Box 3 stuff…&lt;/p></div>
    </div> 
```

从下拉列表中选择后，我需要清除（清空）所有其余选项（即使我打开了它们不会出现的源代码）并同时禁用下拉列表，

如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:15:41.320

我认为这应该可以解决问题。

```
$(document).ready(function(){
    $('#thechoices').change(function(){
        $(this).empty();
    });
}); 
```

# .net - WPF 将图像控件动态添加到动态构建的网格中

> ID：15369921
> 
> 赞同：0
> 
> 时间：2013-03-12T19:03:55.927
> 
> 标签：.net, wpf, wpf-controls, vb.net-2010

我有一个动态构建的网格控件。

我正在尝试向它添加一些其他控件，我的 TextBlock 显示正常，但 Image 没有。

是的，图像源是有效的 BitmapImage。CompanyDetails 已正确填充。

这是代码：

```
Private Sub CreateItemContent(ByVal _Item As CompanyTyping.List, ByVal _TV As RadTileView)
    Dim _Det = Company.CompanyDetails(_Item.CompanyID)
    Dim item As New RadTileViewItem()
    'create and define the inner grid
    Dim _PG As New Grid()
    Dim gridCol1 As New ColumnDefinition()
    gridCol1.Width = New GridLength(200)
    Dim gridCol2 As New ColumnDefinition()
    gridCol2.Width = New GridLength(0, GridUnitType.Star)
    _PG.ColumnDefinitions.Add(gridCol1)
    _PG.ColumnDefinitions.Add(gridCol2)
    'add the initial items to the initial grid
    Dim _Img As New Image()
    _Img.VerticalAlignment = Windows.VerticalAlignment.Top
    _Img.HorizontalAlignment = Windows.HorizontalAlignment.Stretch
    _Img.Visibility = Windows.Visibility.Visible
    _Img.MinHeight = 50
    _Img.MinWidth = 200
    _Img.Source = ByteArrayToImage(_Det(0).Logo)
    Grid.SetColumn(_Img, 1)
    _PG.Children.Add(_Img)
    Dim _PGI As New Grid()
    Dim gridRow1 As New RowDefinition()
    gridRow1.Height = New GridLength(29)
    Dim gridRow2 As New RowDefinition()
    gridRow2.Height = New GridLength(29)
    Dim gridRow3 As New RowDefinition()
    gridRow3.Height = New GridLength(29)
    Dim gridRow4 As New RowDefinition()
    gridRow4.Height = New GridLength(0, GridUnitType.Star)
    _PGI.RowDefinitions.Add(gridRow1)
    _PGI.RowDefinitions.Add(gridRow2)
    _PGI.RowDefinitions.Add(gridRow3)
    _PGI.RowDefinitions.Add(gridRow4)
    Grid.SetColumn(_PGI, 0)
    _PG.Children.Add(_PGI)
    Dim _TB1 As New TextBlock()
    _TB1.Text = _Item.MainContact
    Grid.SetRow(_TB1, 0)
    _PGI.Children.Add(_TB1)

    item.Header = _Item.Name & " - ID: " & _Item.CompanyID
    _TV.Items.Add(item)
    item.SetValue(RadTileViewItem.ContentProperty, _PG)
End Sub 
```

和 ByteArrayToImage：

```
Public Function ByteArrayToImage(_Bytes As Byte()) As System.Windows.Media.Imaging.BitmapImage
    If _Bytes Is Nothing Then
        Return Nothing
    Else
        Dim _bm As New BitmapImage()
        Using _strm As New MemoryStream(_Bytes)
            With _bm
                .BeginInit()
                .CacheOption = BitmapCacheOption.OnLoad
                .StreamSource = _strm
                .EndInit()
            End With
        End Using
        Return _bm
    End If
End Function 
```

我已经验证，在完整的 XAML 版本中，图像控件的源正确地显示了图像......只是不在此处

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:51:52.393

好像是这样设置

```
gridCol2.Width = New GridLength(0, GridUnitType.Auto) 
```

将使图像按预期显示。

* * *

只是为了展示一些代码，您将如何从包含编码图像缓冲区（例如 JPEG 或 PNG）的字节数组创建 BitmapImage。抱歉，这是 C#，但我不会说 VB。然而，它应该很容易被翻译成 VB。

```
byte[] buffer = ...
var bitmapImage = new BitmapImage();

using (var stream = new MemoryStream(buffer)) // create stream from buffer
{
    bitmapImage.BeginInit();
    bitmapImage.CacheOption = BitmapCacheOption.OnLoad; // necessary as stream is closed after EndInit
    bitmapImage.StreamSource = stream;
    bitmapImage.EndInit();
}
// stream is closed by leaving the using block 
```

完全没有 VB 知识，我将其翻译如下：

```
Dim stream As New MemoryStream(buffer)
Dim bitmapImage As New BitmapImage()
bitmapImage.BeginInit()
bitmapImage.CacheOption = BitmapCacheOption.OnLoad
bitmapImage.StreamSource = stream
bitmapImage.EndInit()
stream.Close() 
```

# c++ - 如何将 .rc 与 .cpp 文件组合成 .exe？

> ID：15369924
> 
> 赞同：1
> 
> 时间：2013-03-12T19:04:05.453
> 
> 标签：c++, windows, linker, g++, rc

一段时间以来，我一直试图弄清楚如何在使用 g++ 从命令提示符下编译时在任务管理器中设置描述。我找到[了这个](https://stackoverflow.com/questions/1022449/how-to-change-an-executables-properties-windows)资源示例，但是当我运行`windres foo.rc foores.o`, `g++ -c foo.cpp`，`g++ -o foo.exe foo.o foores.o`然后查看任务管理器时，我仍然在描述字段中看到 foo.exe。

我找到了许多站点和示例，但我尝试过的任何方法似乎都不起作用。任何帮助，将不胜感激。我不喜欢使用 Visual Studio。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:52:19.183

马丁贝克特所说的完全正确。这个问题的答案就在那里，但你必须去答案中的大灰色框。另外，对于懒得点击链接的人，这里是确切的代码。

```
1 VERSIONINFO
FILEVERSION     1,0,0,0
PRODUCTVERSION  1,0,0,0
BEGIN
  BLOCK "StringFileInfo"
  BEGIN
    BLOCK "080904E4"
    BEGIN
      VALUE "CompanyName", "My Company Name"
      VALUE "FileDescription", "My excellent application"
      VALUE "FileVersion", "1.0"
      VALUE "InternalName", "my_app"
      VALUE "LegalCopyright", "My Name"
      VALUE "OriginalFilename", "my_app.exe"
      VALUE "ProductName", "My App"
      VALUE "ProductVersion", "1.0"
    END
  END

  BLOCK "VarFileInfo"
  BEGIN
    VALUE "Translation", 0x809, 1252
  END
END 
```

编译使用

```
windres my.rc myres.o
g++ -c app.cpp -o app.o
g++ myres.o app.o -o app.exe 
```

# mule - 这2个Mule流有什么区别

> ID：15369930
> 
> 赞同：0
> 
> 时间：2013-03-12T19:04:21.550
> 
> 标签：mule

```
<flow name="webserviceFlow1">
    <http:inbound-endpoint exchange-pattern="request-response" address="http://localhost:7079/service">
    <cxf:jaxws-service doc:name="SOAP" enableMuleSoapHeaders="false" serviceClass="MyService"/>
    </http:inbound-endpoint>
    <component class="MyServiceImpl" />        
</flow> 
```

**和**

```
<flow name="webserviceFlow1">
    <http:inbound-endpoint exchange-pattern="request-response" address="http://localhost:7079/service"/>
    <cxf:jaxws-service doc:name="SOAP" enableMuleSoapHeaders="false" serviceClass="MyService"/>
    <component class="MyServiceImpl" />        
</flow> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T15:50:37.410

如果流程在您的问题中保持不变，则它们在功能上是等效的。

如果您希望直接请求也可以访问此流程，例如通过 VM 传输，通过使用 a `<composite-source>`，那么您需要将 限制`cxf:jaxws-service`为 ，`http:inbound-endpoint`这样 CXF 逻辑就不会启动，如下所示：

```
<flow name="webserviceFlow1">
    <composite-source>
        <vm:inbound-endpoint path="directAccess" />
        <http:inbound-endpoint exchange-pattern="request-response" address="http://localhost:7079/service">
            <cxf:jaxws-service doc:name="SOAP" enableMuleSoapHeaders="false" serviceClass="MyService"/>
        </http:inbound-endpoint>
    </composite-source>
    <component class="MyServiceImpl" />        
</flow> 
```

# python - 使用 *args 而不将参数放入元组？

> ID：15369934
> 
> 赞同：1
> 
> 时间：2013-03-12T19:04:26.547
> 
> 标签：python, list, python-3.x, arguments, tuples

这是我的代码：

```
def main(*args):
    # The following code will look for arguments and record their start and
    # end positions.
    arg = False
    arg_invalid = False
    arg_start = -1
    arg_end = -1
    i = 1

    print("main args = " + str(args)) 
```

...剥离了不相关的代码...

```
if __name__ == "__main__":
    print("sys args = " + str(sys.argv))
    print("tuple'd args = " + str(tuple(sys.argv)))
    main(sys.argv) 
```

和输出：

```
$ ./gmanager.py foo bar 128
sys args = ['./gmanager.py', 'foo', 'bar', '128']
tuple'd args = ('./gmanager.py', 'foo', 'bar', '128')
main args = (['./gmanager.py', 'foo', 'bar', '128'],) 
```

如您所见， after`main()`被调用，`main()`将其参数放入一个元组中。我不希望这样，因为它会导致复杂的参数/字符串引用（`arg[x][y][z]`）。

有没有办法在我的`main()`函数中接受参数作为它们的先前状态，或者我可以从我的参数之外剥离元组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:33:03.577

要么直接传入列表：

```
def main(args):
    ...

main(sys.argv) 
```

或用于`*`执行参数解包：

```
def main(*args):
    ...

main(*sys.argv) 
```

后者对于测试很有用，因为您可以编写例如

```
main('foo', 'arg1', 'arg2') 
```

模拟命令行参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T19:30:02.807

由于您只想要一个参数`main()`，并且您希望它是一个`list`，因此只需摆脱`*`in `def main`，如下所示：

```
def main(args):
  print str(args)

if __name__ == "__main__":
  import sys
  main(sys.argv) 
```

# html - 图片不显示在网页上

> ID：15369936
> 
> 赞同：-1
> 
> 时间：2013-03-12T19:04:30.037
> 
> 标签：html, path, image, brokenimage

这是我的网站： http: [//www.leleu.co.uk/](http://www.leleu.co.uk/)

当我从文件夹调用本地计算机上的页面时，该网站上的图像（例如 CONTACT 右侧的 4 个图标）正确显示，但在[http://www.leleu.co 时不显示。英国](http://www.leleu.co.uk)被称为。

我首先想到了一个绝对/相对的画面。在 IE 中，当我在这些图标上右键单击/属性并获得路径信息时，然后将该路径复制到新选项卡中，它们会正确显示。

以前从未遇到过这种情况。我想念的东西一定很明显。

你能帮忙吗？

谢谢

文森特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:08:59.223

从 HTML 4.0 规范：

> 相对 URL（在 [RFC1808] 中定义）不包含任何协议或机器信息。它的路径一般是指与当前文档在同一台机器上的资源。相对 URL 可能包含相对路径组件（“..”表示路径定义的层次结构中的上一级），并且可能包含片段标识符。

如果您的 images 文件夹与 html 文件位于同一级别：

```
<img width="32" height="32" alt="Facebook" src="/images/ico-social-facebook.png"></img> 
```

如果您的图像文件夹位于上一层，您可以使用：

```
<img width="32" height="32" alt="Facebook" src="../images/ico-social-facebook.png"></img> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:13:24.320

尝试访问图像时出现 403 禁止错误。

此外，我相信正确的语法是：

```
<img src="/images/ico-social-facebook.png"> 
```

# wcf - silverlight wcf 回调错误尝试捕获失败

> ID：15369941
> 
> 赞同：0
> 
> 时间：2013-03-12T19:04:39.733
> 
> 标签：wcf, silverlight, error-handling, callback

我正在开发 Silverlight 5 中的应用程序。我们使用 WCF 进行所有网络通信，而且它大部分都运行良好。但是，我们有几个虚拟机用于测试应用程序在哪里失败、尝试重新启动、失败等等，在无限循环中。我添加了很多跟踪代码和很多尝试捕获，我一直将它隔离到失败的代码行，但我仍然无法从失败中获得实际的错误消息，只是迷恋;撞车;崩溃。最初，它在这行 WCF 代码上失败了：

```
return await Task<List<Instance>.Factory.FromAsync(Channel.BeginGetInstance, Channel.EndGetInstance, null); 
```

如果它与 async/await 的使用有关，我会回到带有回调的旧代码。我仍然遇到同样的失败，但现在我可以看到对 WCF 函数的调用成功完成，但回调第一行的日志语句从未发生过，所以它似乎在回调之前或之外死亡。

另一个注意事项，我们在 Application_UnhandledException 中的代码似乎没有触发，但 Application_Exit 中的代码确实运行，我将其视为日志文件中的最后一行。

我尝试设置远程调试，但在应用程序崩溃和回收之前我无法连接到应用程序，所以这也无济于事。

我还使用 TCPView 来观察网络流量，看起来通信是双向进行的。

如果有人有任何其他尝试的建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:45:21.740

在终于意识到我的问题之前，我花了 10 天的时间在这上面追逐我的尾巴。错误记录代码中存在错误。它正在产生一个错误，我只是没有看到它。一旦我意识到这一点并收到错误消息，实际的潜在错误在大约 5 分钟内就修复了。很好的一课，永远不要假设底层代码是有效的，无论它多么简单。

# python-2.7 - 在init函数python中调用方法

> ID：15369942
> 
> 赞同：1
> 
> 时间：2013-03-12T19:04:44.813
> 
> 标签：python-2.7, init

我对这段代码有疑问：

```
import math

class Money(object):

    def __init__(self, salary):
        self.salary = salary
        sal(self.salary)

    def sal(self, x):
        y = ( x - ( ( (x * 0.22) + 6534) ) -  (1900.9408 + ( (x - 37568)*.077) ) )
        print '-----------------------------------------------------------'
        print 'monthly income before tax will be: ${0:.2f}' .format(x/12)
        print 'bi-weekly income before tax will be: ${0:.2f}' .format(x/24)
        print 'Hourly after tax: ${0:.2f}' .format(x/24/70)
        print '-----------------------------------------------------------'
        print 'Income after tax will be: ${0:.2f}' .format(y)
        print 'Monthly after tax: ${0:.2f}' .format((y/12))
        print 'bi-weekly after tax:  ${0:.2f}' .format((y/24))
        print 'Hourly after tax: ${0:.2f}' .format(y/24/70)

        answer = raw_input('Do you want to do this again?\nType [Y] or [N]: ')
        if( answer == 'Y'):
            sal(x)
        else:
            print 'Thank you!'
            return

def main():

    x = input('Enter your taxable income: ')
    salaryLister = Money(x)

main() 
```

回溯显示：

```
Traceback (most recent call last):
  File "taxableincome.py", line 35, in <module>
    main()
  File "taxableincome.py", line 33, in main
    salaryLister = Money(x)
  File "taxableincome.py", line 7, in __init__
    sal(self.salary)
NameError: global name 'sal' is not defined 
```

未定义全局名称'sal' 是什么意思？

也欢迎对我的设计发表评论。我很想学习。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:06:32.700

使用`self.sal`，这就是你在python中调用类的实例方法的方式

这在 python 中是如何工作的，如果您查看您拥有的方法签名

```
def sal(self, salary) 
```

基本上，它需要类引用作为第一个变量。在 python 中，当你这样做时，`self.sal`它会转换为

```
Money.sal(self, salary) 
```

你也可以像这样调用方法，但是推荐的方法是

```
self.sal(salary) 
```

根据您对代码的评论，绝对没有任何明确的危险信号。虽然`return`sal 函数中的最后一条语句不是必需的。把它放在那里不是问题，只是引起了我的注意。

另外，既然你问了，我想指出这一点。请尽量遵守编码标准。让它成为你自己的或别人的。重要的是一致性。但是 PEP-8 通常是 Python 公认的风格。你甚至可以为你的编辑器提供插件来帮助你坚持下去。您可能想阅读[此处](http://www.python.org/dev/peps/pep-0008/)链接的样式指南。

# mysql - mysql SUM查询未给出预期结果

> ID：15369947
> 
> 赞同：2
> 
> 时间：2013-03-12T19:04:56.083
> 
> 标签：mysql

我有两张表， payment_method 和 product_language 。product_language 表有 Total_Room 列，其中包含可用房间总数， payment_method 表有 Room_Booked 列，其中包含已预订房间。

当我们获得 product_language 数据时，我想从 payment_method 获得 Room_Booked 的总和。如果 room_booked 为空，则 sum=0 。

这是我尝试的查询，但即使 Room_Booked 不是 0 ，它也只给出一条记录和 sum=0 。

谢谢你的帮助。

```
SELECT Coalesce(Sum(payment_method.`room_booked`), 0), 
       `product_language`.*, 
       `payment_language`.* AS sum 
FROM   (`product_language` 
        LEFT JOIN payment_method 
               ON ( payment_method.`product_id` = product_language.`id` )) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:17:22.753

```
SELECT `product_language`.*, `payment_language`.* , sum(coalesce(payment_method.`room_booked`), 0) as sum, 
FROM   (`product_language` 
        LEFT JOIN payment_method 
               ON ( payment_method.`product_id` = product_language.`id` )) 
group by `product_language`.*, `payment_language`.*; 
```

我相信您的 select 语句的顺序会影响您的结果。所以我把非聚合列放在你的聚合前面。这是一个很好的起点……

我还将合并转换为总和，这样它就不会在总和上进行合并，并且如果为 null 则在 room_booked 值上合并。

我添加了一个 group by 语句，以便您总结返回的行的各个实体。

评论，可能比从产品语言中选择所有内容更具体，这将有助于清除它分组的任何不必要的列

# regex - 对于 MVC 4 中的 RegularExpression ValidationAttribute，ModelState.IsValid 始终为 false

> ID：15369949
> 
> 赞同：0
> 
> 时间：2013-03-12T19:05:07.457
> 
> 标签：regex, asp.net-mvc-4, automapper, model-validation, custom-validators

在我的课堂上，我有一个像这样的文件附件的属性......

```
public class Certificate {
    [Required]
    // TODO:  Wow looks like there's a problem with using regex in MVC 4, this does not work!
    [RegularExpression(@"^.*\.(xlsx|xls|XLSX|XLS)$", ErrorMessage = "Only Excel files (*.xls, *.xlsx) files are accepted")]
    public string AttachmentTrace { get; set; }
} 
```

我看不出我的正则表达式有什么问题，但我总是得到 ModelState.IsValid 错误。这似乎非常简单和简单的正则表达式，我错过了什么吗？我需要编写自己的自定义验证吗？

我通过文件类型的常规输入填充 AttachmentTrace：

```
<div class="editor-label">
    @Html.LabelFor(model => model.AttachmentTrace)
</div>
<div class="editor-field">
    @Html.TextBoxFor(model => model.AttachmentTrace, new { type = "file" })
    @Html.ValidationMessageFor(model => model.AttachmentTrace)
</div> 
```

action 方法只是一个常规动作：

```
public ActionResult Create(Certificate certificate, HttpPostedFileBase attachmentTrace, HttpPostedFileBase attachmentEmail)
    {
        if (ModelState.IsValid)
        {
            // code ...
        }
        return View(certificate);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T05:48:55.870

好的，这是我找到的解决方案。我敢肯定还有其他解决方案。首先是一点背景，因为我的应用程序使用 EF 代码优先迁移，在我的模型中指定**HttpPostedFileBase**属性类型，在添加迁移时会产生此错误：

> 在模型生成期间检测到一个或多个验证错误：System.Data.Entity.Edm.EdmEntityType: : EntityType 'HttpPostedFileBase' 没有定义键。定义此 EntityType 的键。\tSystem.Data.Entity.Edm.EdmEntitySet: EntityType: EntitySet 'HttpPostedFileBases' 基于没有定义键的类型'HttpPostedFileBase'。

所以我真的必须坚持对 AttachmentTrace 属性使用字符串类型。

解决方案是使用这样的 ViewModel 类：

```
public class CertificateViewModel {
    // .. other properties
    [Required]
    [FileTypes("xls,xlsx")]
    public HttpPostedFileBase AttachmentTrace { get; set; }
} 
```

[然后像这样创建一个 FileTypesAttribute，我从这篇优秀的帖子](http://www.prideparrot.com/blog/archive/2012/8/uploading_and_returning_files)中借用了这段代码。

```
public class FileTypesAttribute : ValidationAttribute {
    private readonly List<string> _types;

    public FileTypesAttribute(string types) {
        _types = types.Split(',').ToList();
    }

    public override bool IsValid(object value) {
        if (value == null) return true;
        var postedFile = value as HttpPostedFileBase;
        var fileExt = System.IO.Path.GetExtension(postedFile.FileName).Substring(1);
        return _types.Contains(fileExt, StringComparer.OrdinalIgnoreCase);
    }

    public override string FormatErrorMessage(string name) {
        return string.Format("Invalid file type. Only {0} are supported.", String.Join(", ", _types));
    }
} 
```

在控制器动作中，我需要进行更改以改用 ViewModel，然后使用 AutoMapper 将其映射回我的实体（顺便说一句，这非常好）：

```
public ActionResult Create(CertificateViewModel certificate, HttpPostedFileBase attachmentTrace, HttpPostedFileBase attachmentEmail) {
        if (ModelState.IsValid) {
            // Let's use AutoMapper to map the ViewModel back to our Certificate Entity
            // We also need to create a converter for type HttpPostedFileBase -> string
            Mapper.CreateMap<HttpPostedFileBase, string>().ConvertUsing(new HttpPostedFileBaseTypeConverter());
            Mapper.CreateMap<CreateCertificateViewModel, Certificate>();
            Certificate myCert = Mapper.Map<CreateCertificateViewModel, Certificate>(certificate);
            // other code ...
        }
        return View(myCert);
    } 
```

对于 AutoMapper，我为 HttpPostedFileBase 创建了自己的 TypeConverter，如下所示：

```
public class HttpPostedFileBaseTypeConverter : ITypeConverter<HttpPostedFileBase, string> {

    public string Convert(ResolutionContext context) {
        var fileBase = context.SourceValue as HttpPostedFileBase;
        if (fileBase != null) {
            return fileBase.FileName;
        }
        return null;
    }
} 
```

就是这样。希望这可以帮助其他可能遇到同样问题的人。

# java - 集合与其迭代器之间是否存在循环依赖关系？

> ID：15369950
> 
> 赞同：5
> 
> 时间：2013-03-12T19:05:07.887
> 
> 标签：java, language-agnostic, iterator, design-patterns

*迭代器*肯定必须知道它必须迭代的*集合。**集合*是否还必须知道它的*迭代器*？依赖是一种方式还是两种方式？如果集合了解特定的迭代器实现，则可能不可能对同一个集合有不同的迭代器策略。这是我的想法。我是对的还是我完全错了？

GoF 书有这个*迭代器模式*的图表：

![在此处输入图像描述](../Images/12992bc1491cd96ebd3c335782f8df8a.png)

我认为这意味着循环依赖。我不确定从`List`to`LisIterator`和`SkipList`to的虚线`SkipListIterator`。

PS：我每天都在处理 Java，但可能更多的是设计问题，而不是特定于特定语言。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:22:34.483

除了一些专门的实现之外，集合不需要知道迭代器。

在这种情况下，虚线表示实例化。如果你有 4 本书的帮派，解释在第 15 页，第 1.6 节给出。

具体来说，迭代器是由 Java iterator() 中的 CreateIterator 方法创建的。

极客幽默：告诉人们你的泽西海岸名字是“THE INSTANTATION”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T21:37:45.633

不，它不是必要的循环。您可以随时为给定的数据结构实现新的迭代器这一事实清楚地表明了这一点。

例如，如果您需要一个迭代器，它首先以升序生成 ArrayList 的偶数元素，然后以降序生成奇数元素，那么没有什么可以阻止您编写这些内容。

# git - 永久修复 Git“找不到对象”

> ID：15369951
> 
> 赞同：6
> 
> 时间：2013-03-12T19:05:08.213
> 
> 标签：git, git-pull, git-fetch

从一个拉到下一个，`git pull`服务器上的每个都以这样的方式结束：

```
$ git pull
remote: Counting objects: 53, done.
remote: Compressing objects: 100% (32/32), done.
remote: Total 32 (delta 19), reused 0 (delta 0)
Unpacking objects: 100% (32/32), done.
error: unable to find 71682baccff823caa21420b16dd231c6b9c1b133
fatal: object 71682baccff823caa21420b16dd231c6b9c1b133 not found 
```

与 相同`git fetch`。我可以通过将文件复制`.git/object/71/682baccff823caa21420b16dd231c6b9c1b133`到服务器来解决这个问题，但是在再拉一些之后，错误仍然存​​在，每次使用分支上的最新提交对象。

这怎么可能发生？我怎样才能永久修复它？

一个完整`git clone`的解决方案不是一个好的解决方案，因为这个存储库位于一个正在运行的服务器项目上，并且在没有 git 控制的情况下有更多的文件。

是否可以`clone`进入一个新目录，然后将`.git`目录复制到旧文件夹中？或者有没有其他解决方案而不接触目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T10:09:24.660

我可以通过

1.  尝试获取（有错误）
2.  像上面一样复制目标文件
3.  `git merge`提交丢失的目标文件。

现在似乎解决了，错误不再出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T13:46:17.073

我正在运行一个开发团队，它有一个损坏的 git 存储库，因为我们还没有时间修复它。我发现有很多东西可以让球保持移动，这可能会有所帮助。

首先有一台 [gc] auto=0 的机器并将整个 repo 解压到对象

其次 git 1.8 似乎比 1.7 更好地处理问题，所以有一台带有 git 1.8 的机器可以访问包含源的文件系统。

第三，总是从 1.8 机器 git fetch 然后从 1.7 机器 git pull

第四，即使 1.8 也无法 git pull，您需要运行 git fsck |grep missing 并手动将对象从解压缩的 repo 复制到损坏 repo 上的对象存储中（缺少 0c0ef24... 将在 objects/0c/ 0ef24...)

对我来说，为什么 git fetch/pull 没有意识到这些从本地 git 中丢失并从原点获取它们对我来说是一个谜，但似乎手动执行 fetch 会使 git 再次快乐。一旦你手动修复了一个 git repo 运行 git gc （但不是在解压的机器上，否则你需要找到丢失的对象才能再次手动修复，这很烦人）

真正方便的是一个命令告诉 git 从原点获取特定对象，但我想如果它不需要被问到就更好了:-)

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-30T08:32:34.917

我今天在尝试使用 git 1.7.1 从 centos 6 盒子中 git pull 时遇到了这个问题。在我将 git 客户端从 rpmforge-extras 升级到 1.7.11 后，问题就解决了。

# python - 创建一个函数，用所有元素创建一个新的universum [0] PYTHON

> ID：15369954
> 
> 赞同：1
> 
> 时间：2013-03-12T19:05:22.817
> 
> 标签：python, matrix, multidimensional-array

我想在 matlab 中创建一个名为 create_empty_universum 的函数。这个函数将产生一个所有元素都为零的新universum。这个universum必须具有给定矩阵的nxm（n行长度，m列长度）

例如。

```
I have a matrix m given.

I = len(m)                                  #I is the amount of rows 
J = len(m[0])                               #J is the amount of columns
New_matrix =[]
row= I*[0]
index = 0

def create_empty_universum():
    while index < J :
        New_matrix.append(row)
        index +=1
    return New_matrix 
```

但我的新矩阵仍然 [] 这是怎么来的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:14:40.680

您想在列表上使用乘法运算符：

```
>>> cols = 4
>>> rows = 3
>>> [0] * cols
[0, 0, 0, 0]
>>> [[0] * cols] * rows
[[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]] 
```

如果您真的想使用辅助功能：

```
def create_empty_universum(cols, rows, cell=0):
    return [[cell] * cols] * rows 
```

### 更新：

请参阅@tobias_k 的评论：您应该使用`[[0]*cols for i in range(rows)]`不相关的行。

# r - 为什么R将大数视为偶数

> ID：15369961
> 
> 赞同：3
> 
> 时间：2013-03-12T19:05:55.137
> 
> 标签：r, numbers, integer

来自“ [http://cran.r-project.org/doc/FAQ/R-FAQ.html#Why-doesn_0027t-R-think-the](http://cran.r-project.org/doc/FAQ/R-FAQ.html#Why-doesn_0027t-R-think-the) ” ***7.31***

我们已经知道大数（超过 2^53）在模运算中会出错。

但是，我无法理解为什么所有大数都被视为偶数（我从未见过超过 2^53 的大整数的“奇数”），即使我在近似值上有一些错误

```
(2^53+1)%%2
(2^100-1)%%2 
```

可以忽略错误消息（模数精度可能完全丧失）

ETC..

都不是 1 而是 0

为什么这样？（我知道有一些近似值，但我需要具体知道原因）

```
> print(2^54,22)
[1] 18014398509481984.00000 
> print(2^54+1,22)
[1] 18014398509481984.00000 
> print(2^54+2,22) 
[1] 18014398509481984.00000 
> print(2^54+3,22) 
[1] 18014398509481988.0000 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T19:17:07.070

[IEEE 双精度值](http://en.wikipedia.org/wiki/Floating_point#IEEE_754:_floating_point_in_modern_computers)具有53 位尾数。任何需要超过 53 位精度的二进制数字都将被舍入，即从 54 开始的数字将被隐式设置为零。因此，幅度大于 2^53 的任何数字都必然是偶数（因为其整数表示的最低有效位超出了浮点精度，因此为零）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T19:14:48.583

在 v2.15.3 或更早版本的 R 版本中没有“整数”之类的东西，其幅度大于 2^31-1。您正在使用“数字”或“双”实体。您可能正在“四舍五入”或`trunc`破坏您的价值观。

```
 ?`%%` 
```

即将发布但尚未发布的 R 版本 3.0 将具有 8 个字节整数，并且在超出 2^2^((8*8)-1))-1 之前不会出现此问题。目前强制转换为整数在该级别失败：

```
> as.integer(2^((8*4)-1)-1)
[1] 2147483647
> as.integer(2^((8*8)-1)-1)
[1] NA
Warning message:
NAs introduced by coercion 
```

因此，您的第一个示例可能会重新运行正确的结果，但您的第二个示例可能仍会失败。

# installation - 为什么开发人员不使用 `install` 命令？

> ID：15369965
> 
> 赞同：-1
> 
> 时间：2013-03-12T19:06:03.703
> 
> 标签：installation, makefile, chmod

在查看我朋友的`Makefile`时，我注意到他使用了`install`shell 命令。据我所知，该命令允许您`chmod`一举安装和文件。该命令出现在我们随后的一次谈话中，他说他听说该命令被认为有些过时，开发人员应该在现代项目中使用`cp`,`mv`等`chmod`。

奇怪的是，这是我唯一一次遇到这个命令。这使我相信该命令确实已被拒绝并因此被遗忘。这是真的？该程序是否存在某种安全漏洞？从我可能幼稚的角度来看，使用单个命令总是比使用多个命令更好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:05:31.143

我怀疑答案是该`install`命令几乎*只*用于脚本和生成文件（例如`automake`@Jack Kelly 描述的生成文件），并且几乎从不交互。因此，人们很少会“越过某人的肩膀”看到它，它也不会留在他们的意识中。

然而，正如你所说，它几乎是完成这项工作的正确工具。问题是它不是[POSIX 命令](http://pubs.opengroup.org/onlinepubs/009695399/)，所以不要使用任何非常奇特的选项是明智的。`automake`如果配置脚本不能说服自己本地版本足够兼容，则它在 makefile 中使用的版本由分布式 shell 脚本补充。

有关此一般主题的一些有用提示，请参阅[autoconf 手册中关于可移植 shell 脚本的讨论。](http://www.gnu.org/savannah-checkouts/gnu/autoconf/manual/autoconf-2.69/html_node/Limitations-of-Usual-Tools.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:02:41.360

生成的 Makefiles`automake`仍然使用它，如以下行（或类似）所示：

```
checking for a BSD-compatible install... /usr/bin/install -c 
```

在 的输出中`configure`。

# python-2.7 - 从 Python 2.7 保存到特定目录

> ID：15369967
> 
> 赞同：0
> 
> 时间：2013-03-12T19:06:16.560
> 
> 标签：python-2.7, working-directory

我正在运行 python 代码，我想将一些输出写入特定文件夹（与我执行脚本的位置不同）。

因此，我打算使用 os 模块将 Python 的路径更改为这个特定的文件夹：

```
os.chdir("myLocation.../Folder") 
```

但是，脚本仍然写入我执行脚本的文件夹，当我调用命令时

```
os.curdir 
```

它返回“。”。

我在这里有点迷路，希望有任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:16:22.840

`os.chdir`应该做正确的事。这是一些用于在 python REPL 上测试的代码，假设您`./test`在工作目录中有一个目录。

```
>>> import os
>>> os.chdir('test')
>>> f = open('testfile', 'w')
>>> print>>f, 'hello world'
>>> f.close() 
```

`test/testfile`现在存在正确的内容。

# css - Border thickness transition

> ID：15369970
> 
> 赞同：11
> 
> 时间：2013-03-12T19:06:21.203
> 
> 标签：css, css-transitions

Is there a way to ease-in-out between 2 border thicknesses?

My code:

```
nav a {
border-bottom: 1px solid #AADA4B;
}

nav a:hover {
border-bottom: 3px solid #AADA4B;
} 
```

Thanks very much for the help. Sam.

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-12T19:07:48.487

Sure, just transition `border` or `border-width` on the `a` element:

```
nav a {
/* -moz-, -o-, -webkit- prefixes omitted for brevity */
transition: border-width 0.1s ease-in-out;
border-bottom: 1px solid #AADA4B;
} 
```

# php - Yii : 登录后继续操作

> ID：15369974
> 
> 赞同：1
> 
> 时间：2013-03-12T19:06:42.013
> 
> 标签：php, yii

我的 Yii 应用中有一个包含表单的页面。

我想允许所有用户查看此表单，但在提交表单时，如果用户未登录 - 我想将他重定向到登录页面。用户登录后，我想继续原来的表单提交。

例如在这个页面中： [http](http://www.yiiframework.com/demos/blog/index.php/post/13/sadfasdfasdf#comments) ://www.yiiframework.com/demos/blog/index.php/post/13/sadfasdfasdf#comments 当用户点击“提交”时，他将被重定向到登录页面并在登录后他的评论将被提交有一个登录的用户。

我该怎么做？

* * *

我使用的解决方案：

1.  我按照此信息设置返回 URL：[http ://www.yiiframework.com/wiki/43/adding-login-form-to-each-page/](http://www.yiiframework.com/wiki/43/adding-login-form-to-each-page/)

2.  在将客人发送到登录页面之前，我将 POST 信息保存在会话中。当用户被重定向到原始页面时，我检查会话是否包含原始 POST 信息，如果包含 - 我用新的用户 ID 保存它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T01:19:25.000

你应该使用：

```
$this->redirect(Yii::app()->user->returnUrl); 
```

这将重定向到已请求用户授权的页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T01:50:44.527

如果用户未登录，您将需要将原始 POST 变量存储在会话中。否则，如果您`returnUrl`按照其他人的建议使用，您将丢失最初提交的评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T19:14:10.867

通过使用 url referrer 你可以做这些事情

```
$returnUrl = Yii::app()->request->urlReferrer; 
```

# ruby-on-rails - Rails：如果参数存在，则渲染部分内容

> ID：15369982
> 
> 赞同：0
> 
> 时间：2013-03-12T19:07:05.977
> 
> 标签：ruby-on-rails, parameters, render, partials

如果渲染包含特定参数“has_footer”，我正在尝试有条件地渲染部分的一部分。

在 _modal.html.erb 中，我有以下内容：

```
<div id="<%= id %>" class="modal hide fade" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="btn-modal-close" data-dismiss="modal" aria-hidden="true">×</button>
    <header><%= title %></header>
  </div>
  <div class="modal-body">
    <%= render partial: content %>
  </div>
  <% if params[:has_footer] %>
    <div class="modal-footer">
      <button class="btn-modal-save">Save</button>
      <button class="btn-modal-cancel" data-dismiss="modal" aria-hidden="true">Cancel</button>
    </div>
  <% end %>
</div> 
```

我像这样渲染部分：

```
<%= render "pages/modal", :has_footer, id: "modal-add-campaign", title: "Add Campaign", content: "pages/modal_add_campaign" %> 
```

基本上，我只想在渲染命令中包含“:has_footer”参数时才显示 div“modal-footer”。

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:29:00.153

传递给局部变量的变量被视为局部变量。所以我会做类似的事情：

```
<%= render :partial => "pages/modal", locals: { has_footer: true, id: "modal-add-campaign", title: "Add Campaign", content: "pages/modal_add_campaign" } %> 
```

并像这样检查变量：

```
if has_footer 
```

# jquery - val（）的jQuery返回值返回函数？

> ID：15369983
> 
> 赞同：1
> 
> 时间：2013-03-12T19:07:08.693
> 
> 标签：jquery, return-value

这是我的jQuery：

```
 $(document).ready(function () {

  $('#formulario').change(function() {
    alert( $(this).val() );
    var nombreArchivo = $(this).val;
    nombreArchivo = nombreArchivo.replace(' ', '_');
    var ruta = '/printbox/views/formulariosweb/';
    $('#contenedorFormulario').load( ruta + nombreArchivo + '.html');
    $('head').append( $('<link rel="stylesheet" type="text/css" />').attr('href', ruta + nombreArchivo + '.css') );
  });

  $("#formulario").trigger('change');

}); 
```

这是 HTML：

```
<select class="select" name="formulario" id="formulario">
          <?php
            foreach($listaForms as $form) {
              echo "<option value=\"{$form}\">{$form}</option>";
            }
          ?>
        </select> 
```

我得到：

```
TypeError: nombreArchivo.replace is not a function

nombreArchivo = nombreArchivo.replace(' ', '_'); 
```

查看检查器中的 nombreArchivo 值，说它是函数（）类型。

任何帮助都感激不尽。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T19:07:55.527

利用

```
$(this).val() 
```

代替

```
$(this).val 
```

# python - python - 将numpy数组保存到文件（可能的最小尺寸）

> ID：15369985
> 
> 赞同：5
> 
> 时间：2013-03-12T19:07:09.843
> 
> 标签：python, numpy, scipy

现在我有一个 python 程序构建一个相当大的 2D numpy 数组并使用 numpy.savetxt 将其保存为制表符分隔的文本文件。numpy 数组仅包含浮点数。然后我在一个单独的 C++ 程序中一次读取一行文件。

我想做的是找到一种方法来完成同样的任务，尽可能少地更改我的代码，这样我就可以减小在两个程序之间传递的文件的大小。

我发现我可以使用 numpy.savetxt 保存到压缩的 .gz 文件而不是文本文件。这将文件大小从 ~2MB 降低到 ~100kB。

有一个更好的方法吗？也许，我可以将二进制的 numpy 数组写入文件以节省空间吗？如果是这样，我将如何做到这一点，以便我仍然可以将其读入 C++ 程序？

感谢您的帮助。我很感激我能得到的任何指导。

**编辑：**

有很多零（可能 numpy 数组中 70% 的值是 0.0000）我不知道如何以某种方式利用它并生成一个我的 c++ 程序可以读取的小文件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T19:44:19.957

除非您确定不需要担心字节顺序等问题，否则最好使用`numpy.savez`，如@unutbu 的回答和@jorgeca 的评论中所述：[numpy's tostring/fromstring --- 我需要指定什么来恢复数组](https://stackoverflow.com/questions/13672597/numpys-tostring-fromstring-what-do-i-need-to-specify-to-restore-the-array)。

如果结果大小不够小，总是有`zlib`（在 python 方面：`import zlib`，在 C++ 方面，我确信存在一个实现）。

另一种方法是使用`hdf5`格式：虽然它不一定会减少磁盘上的文件大小，但它确实可以更快地保存/加载（这是格式的设计目的，大型数据数组）。有用于`hdf5`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T20:46:13.297

由于你有很多零，你只能写出表单中的非零元素（索引，数字）。

假设您有一个包含少量非零数字的数组：

```
In [5]: a = np.zeros((10, 10))

In [6]: a
Out[6]: 
array([[ 0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.]])

In [7]: a[3,1] = 2.0

In [8]: a[7,4] = 17.0

In [9]: a[9,0] = 1.5 
```

首先，分离出有趣的数字及其索引：

```
In [11]: x, y = a.nonzero()

In [12]: zip(x,y)
Out[12]: [(3, 1), (7, 4), (9, 0)]

In [13]: nonzero = zip(x,y) 
```

现在您只剩下少量数据元素了。最简单的方法是将它们写入文本文件：

```
In [17]: with open('numbers.txt', 'w+') as outf:
   ....:     for r, k in nonzero:
   ....:         outf.write('{:d} {:d} {:g}\n'.format(r, k, a[r,k]))
   ....:         

In [18]: cat numbers.txt
3 1 2
7 4 17
9 0 1.5 
```

这也让您有机会观察数据。在您的 C++ 程序中，您可以使用`fscanf`.

[但是您可以通过使用struct](http://docs.python.org/2/library/struct.html)写入二进制数据来进一步减小大小：

```
In [17]: import struct

In [19]: c = struct.Struct('=IId')

In [20]: with open('numbers.bin', 'w+') as outf:
   ....:     for r, k in nonzero:
   ....:         outf.write(c.pack(r, k, a[r,k])) 
```

构造函数的参数`Struct`意味着；使用本机日期格式“=”。第一个和第二个数据元素是无符号整数“I”，第三个元素是双精度“d”。

在您的 C++ 程序中，最好将此数据作为二进制数据读取到打包的`struct`.

*编辑*：为二维数组更新答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-07T14:02:46.987

使用 hdf5 文件，通过 h5py 使用它们非常简单，您可以使用设置压缩标志。请注意，hdf5 还有一个 c++ 接口。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T19:18:34.590

`numpy.ndarray.tofile`并且`numpy.fromfile`对于来自 python 的直接二进制输出/输入很有用。 `std::ostream::write` `std::istream::read`对于 c++ 中的二进制输出/输入很有用。

如果数据从一台机器传输到另一台机器，您应该注意字节顺序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T19:16:27.060

如果您不介意安装额外的包（对于`python`和`c++`），您可以使用`[BSON][1]`(Binary JSON)。

# python - 在 Django 1.5 中使用自定义用户模型作为 ForeignKey 进行测试

> ID：15369987
> 
> 赞同：5
> 
> 时间：2013-03-12T19:07:11.127
> 
> 标签：python, django, django-testing, django-1.5

我正在使用 Django 1.5，并且正在尝试使应用程序与任何自定义用户模型一起工作。我已经更改了应用程序以`get_user_model`在任何地方使用，并且应用程序本身到目前为止没有显示任何问题。

问题是我也希望能够测试应用程序，但我找不到`ForeignKey`使用自定义用户模型正确测试模型字段的方法。当我运行下面附加的测试用例时，我收到此错误：

```
ValueError: Cannot assign "<NewCustomUser: alice@bob.net>": "ModelWithForeign.user" must be a "User" instance. 
```

这是我用于测试的文件：

```
from django.conf import settings
from django.contrib.auth import get_user_model
from django.contrib.auth.tests.custom_user import CustomUser, CustomUserManager
from django.db import models
from django.test import TestCase
from django.test.utils import override_settings

class NewCustomUser(CustomUser):
    objects = CustomUserManager()
    class Meta:
        app_label = 'myapp'

class ModelWithForeign(models.Model):
    user = models.ForeignKey(settings.AUTH_USER_MODEL)

@override_settings(
    AUTH_USER_MODEL = 'myapp.NewCustomUser'
)   
class MyTest(TestCase):
    user_info = {
        'email': 'alice@bob.net',
        'date_of_birth': '2013-03-12',
        'password': 'password1'
    }   

    def test_failing(self):
        u = get_user_model()(**self.user_info)
        m = ModelWithForeign(user=u)
        m.save() 
```

我在`ForeignKey`参数列表中引用了用户模型，如此处所述[，](https://docs.djangoproject.com/en/dev/topics/auth/customizing/#django.contrib.auth.get_user_model)但是使用`get_user_model`那里并没有改变任何东西，因为`user`在设置更改发生之前评估了属性。当我使用自定义用户模型时，有没有办法让这个 ForeignKey 与测试相得益彰？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T05:51:56.957

我也在 Django 邮件列表上问过这个问题，但似乎至少目前没有办法改变它`settings.AUTH_USER_MODEL`并让它与`ForeignKey`.

到目前为止，为了测试我的应用程序，我从[这个答案](https://stackoverflow.com/a/12260597/1202840)`runtests.py`创建了一个文件：

```
import os, sys
from django.conf import settings

if len(sys.argv) >= 2:
    user_model = sys.argv[1]
else:
    user_model = 'auth.User'

settings.configure(
    ...
    AUTH_USER_MODEL=user_model,
    ...
)

... 
```

并添加了一个 bash 脚本以使用不同的用户模型实际运行测试：

```
for i in "auth.User" "myapp.NewCustomUser"; do
    echo "Running with AUTH_USER_MODEL=$i"
    python runtests.py $i
    if [ $? -ne 0 ]; then
        break
    fi
done 
```

最后一点是使用函数来实际检索正确的用户模型信息，而不仅仅是使用“静态”变量：

```
def get_user_info():
    if settings.AUTH_USER_MODEL == 'auth.User':
        return {default user info}
    if settings.AUTH_USER_MODEL == 'myapp.NewCustomUser':
        return {my custom user info}
    raise NotImplementedError 
```

我并没有声称这是该问题的正确答案，但到目前为止......它有效。

# ruby-on-rails - 轻松查看哪些资产未使用的方法？

> ID：15369991
> 
> 赞同：0
> 
> 时间：2013-03-12T19:07:36.713
> 
> 标签：ruby-on-rails, assets

我继承了一个已多次用于各种不同应用程序的 rails 应用程序。在这样做的过程中，每次迭代时，开发人员只是简单地复制了新资产（图像、javascript 等）而没有重新开始，所以现在我的文件夹中充满了我确定没有使用过的资产。

我想清理它，因为我负责当前的迭代。

有没有一种快速/简单的方法（可能是一个脚本）来过滤出什么是使用的，什么不是？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:22:06.560

如果您有非常详细的日志，请尝试使用此脚本（取自[https://stackoverflow.com/a/14488684/1440599](https://stackoverflow.com/a/14488684/1440599)）

```
grep -Eo ‘GET /(.*(.gif|.jpg|.jpeg|.png|.css|.js))[ \?]’ [the-log].log > ~/assets.txt 
```

当然，这并没有考虑到资产的使用时间（有些可能已经过时），具体取决于应用程序的登录时间，因此您必须考虑到这一点