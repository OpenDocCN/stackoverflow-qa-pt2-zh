# StackOverflow 问答 12701000-12701999

# django - django REST new 和 id_name 混淆

> ID：12701000
> 
> 赞同：0
> 
> 时间：2012-10-03T02:03:53.700
> 
> 标签：django, rest

我有这个网址

```
/post/new
/post/1
/post/2/edit 
```

但是，在某些情况下`new`，它会被捕获为帖子 ID，

什么是正确的网址名称？

### 编辑

当我使用时`HttpResponseRedirect('/post/new')`被捕获为 id

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T02:24:31.410

我需要查看您的 urls.py 文件才能确定，但​​我想您用来获取帖子 ID 的正则表达式太松散并且也在获取字母字符。

以下网址应该可以工作：

```
url(r'^/post/new$', new_post_view)
url(r'^/post/(?P<post_id>[0-9]+)$', post_view)
url(r'^/post/(?P<post_id>[0-9]+)/edit$', edit_post_view) 
```

如果那不能解决您的问题，请发布您的 urlconf，我会再看一下。

# c++ - 尽可能高效地交换字节？

> ID：12701005
> 
> 赞同：0
> 
> 时间：2012-10-03T02:04:26.227
> 
> 标签：c++, optimization, endianness

目前我有这个功能来交换数据的字节以改变字节顺序。

```
template<typename Type, unsigned int Half = sizeof(Type)/2, unsigned int End = sizeof(Type)-1> 
inline void swapBytes(Type& x)
{
    char* c = reinterpret_cast<char*>(&x);
    char tmp;
    for (unsigned int i = 0; i < Half; ++i) {
        tmp = c[i];
        c[i] = c[End-i];
        c[End-i] = tmp;
    }
} 
```

这个函数会被我的一些算法调用几百万次。因此，可以避免的每条指令都是一件好事。

我的问题是：如何优化这个功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T02:24:45.047

首先你需要检查你的硬件平台是否有字节交换指令。有些平台有这些说明，有些没有。之后，您需要寻找使用它们的库函数。检查文档或在调试器中停止并查看反汇编。这是一个很好的机会，你会找到一个。其他任何事情都不太可能比这更好。

最终在使用这些指令的汇编程序中编写您自己的函数。

对于 2 字节类型，可以进行直表转换。这是 128 kb，对于我们现在的计算机来说并不算多。对于 32 位类型，这几乎是矫枉过正，但在某些（罕见的）情况下，可能仍然适用于大型 64 位机器。

您还可以结合使用 asm 指令、表格转换和优化循环。

# sql - 从加入批量更新

> ID：12701006
> 
> 赞同：0
> 
> 时间：2012-10-03T02:04:27.397
> 
> 标签：sql, sqlite

我有 2 张桌子：

```
movies (id, votes)
info (id, movie_id, info_type, value) 
```

我想用 info.value 填充 movies.votes，其中 movies.id = info.movi​​e_id 和 info_type = 3（这是投票的信息类型）

我不知道该怎么做..（我正在使用 SQLite3.7）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T02:19:47.120

```
UPDATE movies
SET votes = (select value
             from info
             where info.movie_id=movies.id and info_type=3)
WHERE EXISTS 
            (select *
             from info
             where info.movie_id=movies.id and info_type=3) 
```

仅供参考，存在存在，因此如果电影没有`info`数据，则不会更新为`NULL`. 如果您希望这种情况发生，您可以将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T02:20:14.050

看起来您想做一个 multi-table `UPDATE`，这在其他数据库中很简单，但根据[文档](http://www.sqlite.org/lang_update.html)，您似乎无法在 sqlite 中执行这些操作。

在 mysql 中，你会做类似`UPDATE movies JOIN info on (info.movie_id = movies.id) SET votes = info.value WHERE info.info_type = 3`. 我认为在 sqlite 中，您必须单独选择所有信息值并单独更新所有电影记录。

# c# - 使用计时器每分钟发送电子邮件

> ID：12701009
> 
> 赞同：0
> 
> 时间：2012-10-03T02:05:14.603
> 
> 标签：c#, winforms, timer

我正在尝试使用计时器每分钟发送一封电子邮件。每封电子邮件的信息都取自表单上每一行组件的值。我可以在不使用计时器的情况下发送电子邮件，所以我知道电子邮件方法有效。但是当我尝试实现计时器时，电子邮件不会被发送。我阅读了有关计时器类的文档，我相信这应该可行。但我对它还不够熟悉，无法真正知道该怎么做。这是代码：

这是电子邮件方法：

```
//method to send email to outlook
public void sendEMailThroughOUTLOOK(string recipient, 
    string subject, string body)
{        
    try
    {    
        // Create the Outlook application.
        Outlook.Application oApp = new Outlook.Application();
        // Create a new mail item.
        Outlook.MailItem oMsg = 
            (Outlook.MailItem)oApp.CreateItem(Outlook.OlItemType.olMailItem);
        // Set HTMLBody. 
        //add the body of the email
        oMsg.Body = body;

        oMsg.Subject = subject;
        // Add a recipient.
        Outlook.Recipients oRecips = (Outlook.Recipients)oMsg.Recipients;
        // Change the recipient in the next line if necessary.
        Outlook.Recipient oRecip = (Outlook.Recipient)oRecips.Add(recipient);
        oRecip.Resolve();
        // Send.
        oMsg.Send();
        // Clean up.
        oRecip = null;
        oRecips = null;
        oMsg = null;
        oApp = null;
    }//end of try block
    catch (Exception ex)
    {
    } //end of catch
} //end of Email Method 
```

这是计时器事件：

```
private void OnTimedEvent(object source, ElapsedEventArgs e)
{
    foreach (rowClass row in this.rows)
    {
        string recipientAddress = "roomcheckstest@gmail.com";
        string subjectLine = "GPC " + (string)row.buildingComboBox.SelectedItem
            + " " + (string)row.roomComboBox.SelectedItem + "-Room Check";
        string senderline = "Sender=ctsstaff.ithelpcentral@ttu.edu" + "\t";
        string newlinespaces = Environment.NewLine + Environment.NewLine +
            Environment.NewLine + Environment.NewLine + Environment.NewLine;
        string legalLastName = "Legal Last Name=" + 
            (string)row.buildingComboBox.SelectedItem;
        string legalFirstName = "Legal First Name=" + 
            (string)row.roomComboBox.SelectedItem;
        string timeLine = "Time= 15m";
        string requestType = "Initial Request Type=Onsite";
        string classRoomMaintenace = "Classroom maintenance. " +
            "Regular Classroom weekly check.";
        string closingEmailSent = "Closing Email Sent=yes";
        string currentlyClosed = "Currently Closed=yes";
        string assignTo = "Assign To=ITHC CTS Staff";
        string typeLine = "Type=Hardware";
        string category = "Category=Internal Component";
        string subCategory = "Subcategory=Performance";
        string agentType = "Type (Agent)=Hardware";
        string agentCategory = "Type (Agent)=Hardware";
        string subCategoryAgent = "Subcategory (Agent)=Performance";
        string labelLine = "Label=Service Request";
        string status = "Status=Closed";
        string finalbody = senderline + newlinespaces + legalLastName 
            + newlinespaces + legalFirstName + newlinespaces + timeLine 
            + newlinespaces + requestType + newlinespaces + classRoomMaintenace 
            + newlinespaces + closingEmailSent + newlinespaces 
            + currentlyClosed + newlinespaces + assignTo + newlinespaces 
            + typeLine + newlinespaces + category + newlinespaces 
            + subCategory + newlinespaces + agentType + newlinespaces 
            + agentCategory + newlinespaces + subCategoryAgent 
            + newlinespaces + labelLine + newlinespaces + status;
        sendEMailThroughOUTLOOK(recipientAddress, subjectLine, finalbody);
        MessageBox.Show("email");
        //Thread.Sleep(60000);
        //sendEMailThroughOUTLOOK(recipientAddress, subjectLine, finalbody);
    }       
} 
```

这是在表单上的发送电子邮件按钮内创建计时器的地方，理论上它应该调用电子邮件方法：

```
private void submitButton_Click(object sender, EventArgs e)
{
    if (rows[0].buildingComboBox.SelectedIndex > -1)
    {
        System.Timers.Timer time = new System.Timers.Timer();
        time.Interval = 300000;
        time.Enabled = true;
        time.Elapsed += new ElapsedEventHandler(OnTimedEvent);

        MessageBox.Show("Issues Sent");
    }
} 
```

我为表单上的每一行组件发送一封电子邮件（用户根据需要添加行）电子邮件是通过 Outlook 发送的（必须使用 Exchange 服务器通过 Outlook 发送）我需要延迟它，因为服务器不会接受它们一次全部。我对定时器类的理解一定是有缺陷的。我无法弄清楚为什么这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T02:10:00.447

看来您需要调用`.Start()`.`Timer`

请注意，在计时器计时之前不会发生任何事情，因此第一封电子邮件不会立即发出。

此外，您的计时器间隔设置为 5 分钟（300,000 毫秒）而不是 1 分钟（60,000 毫秒）。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-10-03T02:11:31.010

尝试执行此类操作时，您应该真正使用线程。创建一个类并让它实现 Runnable。然后在实现的函数run中，做一个while循环，最后添加Thread.sleep(60000)。

# django-admin - Django Admin Inline - 根据请求添加/更改/删除

> ID：12701014
> 
> 赞同：1
> 
> 时间：2012-10-03T02:06:39.547
> 
> 标签：django-admin

在某些情况下，我想完全禁止添加/删除/编辑某些内联，这取决于当前请求（以及它们附加到的外键对象）。我该怎么办？

# php - 如何在我的登录功能模型中的会话中设置用户数据

> ID：12701016
> 
> 赞同：0
> 
> 时间：2012-10-03T02:07:14.900
> 
> 标签：php, codeigniter

当用户登录时，他们会被定向到我的`log in`功能——这是我的部分工作代码。我注释掉了我需要帮助的部分。

# 模型

```
 if ($query->num_rows() == 1)
    { 
        return $query->row()->f_name;
    }   

    else {
        return false;
    }

} 
```

# 控制器

```
 if($this->form_validation->run()) {
    $f_name = $this->model_users->can_log_in();
        $data = array(
            'email' => $this->input->post('email'),
            'is_logged_in' => 1,
            'name' => $f_name
            );

        $this->session->set_userdata($data);

        redirect('account_dashboard'); 
```

用户的姓名与他们的电子邮件/密码在数据库表中。我想获取用户`f_name`并在他们登录时将其设置在会话中，因为会话是全局变量。

# 看法

我的标题显示了他们的名字：

```
echo $this->session->userdata('name'); 
```

如何从表中获取 db_values 并将它们传递给会话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T02:25:55.573

当您调用 时`$query->row()`，它会将查询结果的第一行作为对象返回。因此，如果您需要返回用户的名字，在这种情况下存储在该`f_name`字段下，您需要这样写：

```
return $query->row()->f_name; 
```

然后在您的控制器中，您将获得从模型函数返回的名字。

```
$f_name = $this->model_name->model_function_name();
$data = array('email' => $this->input->post('email'),
              'is_logged_in' => 1,
              'name' => $f_name
); 
```

如果您在控制器中需要的不仅仅是用户的名字，请改为从模型函数返回整行。

```
return $query->row(); 
```

然后在您的控制器中，您可以通过访问其属性来访问返回的对象（或数组，如果您使用`row_array()`），这些属性将根据数据库表中的字段名称命名。

```
$user = $this->model_name->model_function_name();
$f_name = $user->f_name; // Get the user's first name
$other = $user->other; // Get some other information 
```

它也适用`row_array()`于.`$user['f_name']``$user->f_name`

**编辑：**另外，请确保模型已由控制器加载，然后再尝试调用其函数。

```
$this->load->model('model_name'); 
```

# jquery - 使用 Jquery 的粗体表行

> ID：12701017
> 
> 赞同：2
> 
> 时间：2012-10-03T02:07:17.630
> 
> 标签：jquery

单击时，我想将表格的行加粗。我该怎么做才能让脚本知道我点击了哪一行？我能想到的唯一方法是使用如下功能。

```
<script>
function bold(x){
    $("#"+x).click(function(e){ 
        $(this).css("font-weight","bold");
        e.stopPropagation(); 
       });
   }
</script>
<table>
<tr id = 1 onclick = bold(this.id)><td>A</td></tr>
<tr id = 2 onclick = bold(this.id)><td>B</td></tr>
<tr id = 3 onclick = bold(this.id)><td>C</td></tr>
<tr id = 4 onclick = bold(this.id)><td>D</td></tr>
<tr id = 5 onclick = bold(this.id)><td>E</td></tr>
<tr id = 6 onclick = bold(this.id)><td>F</td></tr>
</table> 
```

有没有更好的方法可以在不使用函数的情况下做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T02:09:43.670

你可以试试这个

```
$('tr').click(function(e){ 
    $(this).css("font-weight","bold");
        e.stopPropagation(); 
 }); 
```

此外，您将您的 id 包含在引号中.. 先这样做

`<tr id = "1" onclick = bold(this.id)><td>A</td></t`r>

[检查小提琴](http://jsfiddle.net/sushanth009/eF9FN/1/)

根据 HTML5 标准，没有必要用引号括起来。但我认为这样做是个好习惯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-22T20:39:25.793

```
$('tr').click(function(e){ 
    $("td", $(this)).css("font-weight","bold");
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T02:19:38.277

您可能想阅读[jQuery 的 on function](http://api.jquery.com/on/)文档，它提供了一种更简洁的方式来将处理程序附加到元素。使用它，您可以删除`onclick`属性，并将行为直接从 javascript 附加到元素。按照您的示例：

```
<script>
  $("tr").on("click", function(e){
    $(this).css("font-weight","bold");
  });
</script>
<table>
  <tr><td>A</td></tr>
  <tr><td>B</td></tr>
  <tr><td>C</td></tr>
  <tr><td>D</td></tr>
  <tr><td>E</td></tr>
  <tr><td>F</td></tr>
</table> 
```

请注意，不需要 id 或`onclick`处理程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T02:11:08.827

你应该整理你的html ..

html

```
<table>
<tr><td>A</td></tr>
<tr><td>B</td></tr>
<tr><td>C</td></tr>
<tr><td>D</td></tr>
<tr><td>E</td></tr>
<tr><td>F</td></tr>
</table>​​​​​​​​​ 
```

javascript

```
$('tr').on('click',function(){
   $(this).css("font-weight","bold");
})​​​​​​​​​​​​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T02:12:44.453

尝试这个

观看[现场演示](http://jsfiddle.net/A6yDt/)

```
$('table td').on('click', function(){
      $(this).css("font-weight","bold");
}); 
```

# asp.net-mvc - Firefox 将某些 url 的 https 重定向到 http

> ID：12701019
> 
> 赞同：2
> 
> 时间：2012-10-03T02:07:30.540
> 
> 标签：asp.net-mvc, firefox, ssl

我正在开发一个 ASP.NET MVC 应用程序，我在 firefox 15 中遇到了非常奇怪的行为。我正在浏览 url: [https://www.mydomain.com/test](https://www.mydomain.com/test)，但它被重定向到[http:/ /www.mydomain.com/test](http://www.mydomain.com/test)（所以从 https 到 http）。在 IE 9 中，这不会发生。我在服务器端做了一些日志记录，并且在 Controller 操作中 Request.IsSecureConnection 为 false。有人对如何调试此类问题有任何建议吗？

请注意，我不一定需要强制使用 https，它可以是 http 或 https，但是当用户通过身份验证时，它应该保持在 https 中以安全地传输会话 ID cookie。

编辑：我强烈怀疑 Firefox 正在缓存我首先访问的任何内容。在一台机器上，我开始（我认为）使用 http，它不会让我在该 url 上执行 https。在另一台机器（VM）上，我从 https 开始，工作正常，它不会让我在同一个 url 上执行 http。所以看起来 Firefox 有一些奇怪的缓存行为。

# javascript - jquery如何在进行ajax调用后获取单击事件的索引

> ID：12701026
> 
> 赞同：1
> 
> 时间：2012-10-03T02:08:46.993
> 
> 标签：javascript, jquery

在下面的代码中，我将如何`$(this).parents('#friendRequest').remove();`在我的 ajax 成功回调函数中使用，并用于`$(this)`在第一行获取 click 事件的选择器？

```
jQuery(".notyAcceptFriendRequest").on('click', function() {
    notyId = jQuery(this).attr("notyIdOne"); // pull in the id of the current selected notification
    userProfilesUserId = $('#requestAlert').attr('userProfilesUserId'); // pull in the id of the current selected user profile id
    if (notyId == userProfilesUserId) { // if notification id is the same as the user profiles id, do the following
        $("#requestAlert").replaceWith('<span class="font1">You two are now friends</span>'); // the user profile friend requester will be replaced with the text
        $(this).parents('#friendRequest').remove(); // find the '#friendRequest' id from the parent elements and fade it out
    } else if (notyId != userProfilesUserId) {
        /* the below will execute when the user
         * clicks the 'Add' button and he/she is
         * not on the targeted users page
         */
        $.ajax({
            type: "POST",
            dataType: "JSON",
            url: "<?=base_url()?>index.php/reguserDash/acceptFriendNoty",
            data: {notyId: notyId},
            json: {friendshipCaneled: true},
            success: function(data) {
                if(data.acceptNotyFriendSuccess == true) {
                    $(this).parents('#friendRequest').remove();
                }
            }
        })
    }
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T02:11:50.660

`this`在回调中与`this`在处理程序中不同。

您需要存储`this`在局部变量中，然后在回调中使用该变量。

# ember.js - 如何管理具有独立出口的视图集合？

> ID：12701029
> 
> 赞同：4
> 
> 时间：2012-10-03T02:09:08.350
> 
> 标签：ember.js, ember-old-router

*   代码在这里：[https ://github.com/midu/form_builder/](https://github.com/midu/form_builder/)
*   直播版： http: [//midu.github.com/form_builder/#/forms](http://midu.github.com/form_builder/#/forms)

有没有办法，当你多次渲染一个视图时，让它们中的每一个都与一个控制器的实例相关联？

很确定这不是正确的做法，所以我愿意接受有关我应该如何做的迹象。但这里是用例：

我有这些路线：

```
FormBuilder.Router = Ember.Router.extend({
  // ...
  form: Ember.Route.extend({
    route: '/form/:form_id/edit',
    connectOutlets: function (router, form) {
      router.get('applicationController').connectOutlet('editForm', form);
      router.get('editFormController').connectOutlet( 'fieldsList', form.get('fields') );
    },

    editField: Ember.Route.transitionTo('editOneField'),
    showField: Ember.Route.transitionTo('showOneField'),

    initialState: 'showOneField',
    editOneField: Ember.Route.extend({
      connectOutlets: function (router, field) {
        router.get('fieldsListController').connectOutlet('editField', field);
      }
    }),
    showOneField: Ember.Route.extend({
      connectOutlets: function (router, field) {
        router.get('fieldsListController').connectOutlet('showField', field);
      }
    })
  })
}); 
```

我正在尝试在路线中列出 a中的`Field`s 。为此：`Form``form``Route`

```
 form: Ember.Route.extend({
    route: '/form/:form_id/edit',
    connectOutlets: function (router, form) {
      router.get('applicationController').connectOutlet('editForm', form);
      router.get('editFormController').connectOutlet( 'fieldsList', form.get('fields') );
    }, 
```

`EditFormView`呈现模板`edit_form_view`：

```
<h2>Editing form {{id}}</h2>

{{view FormBuilder.AddFormFieldsView}}

{{ outlet }} 
```

在其中我们将 连接`outlet`到`fieldsList`. 这会渲染`fields_list`模板，并连接到`FieldsListController`控制器，控制器是一个数组`Field`。

```
{{! fields_list.handlebards }}
<p>The form fields</p>

<ul>
{{#each content}}
  {{view FormBuilder.FieldView}}
{{/each}}
</ul> 
```

所以这会渲染`FieldView`使用`field_view`模板的视图：

```
# {{publicName}}

{{outlet}} 
```

这就是我有问题的地方。我不能真正“连接”这个`outlet`，因为它是`fieldsListController`.

我将描述我尝试做的事情。我的控制器中有这个。

```
editField: Ember.Route.transitionTo('editOneField'),
showField: Ember.Route.transitionTo('showOneField'),

initialState: 'showOneField',
editOneField: Ember.Route.extend({
  connectOutlets: function (router, field) {
    router.get('fieldsListController').connectOutlet('editField', field);
  }
}),
showOneField: Ember.Route.extend({
  connectOutlets: function (router, field) {
    router.get('fieldsListController').connectOutlet('showField', field);
  }
}) 
```

这意味着在渲染视图时，`outlet`in`field_view.handlebars`将与`showField`：

```
<pre>show a field yo :)</pre>

<a {{action editField this}}>(edit)</a> 
```

如果我只有一个字段，然后单击`(edit)`，它将切换连接`outlet`with `editField`，这是我目前正在尝试做的。`Field`但是，如果my中有超过 1 个`Form`，当我按下 时`(edit)`，它会将所有`outlet`s 连接到`editField`。

因此这是有道理的`router.get('fieldsListController').connectOutlet('showField', field);`，但我不知道如何获取正确的控制器实例（和/或为每个`FieldView`s.

我在这里很迷茫。我正在尝试在不改变整个视图的情况下进行“内联编辑”，而且它似乎不是关于拥有一组视图的好文档/教程，每个视图都有一个独立的`outlet`......

整个代码库和在线实时版本的链接位于页面顶部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:18:26.577

您可能正在寻找`{{control}}`正在开发中但可以在 Ember.js[源代码](https://github.com/emberjs/ember.js/blob/master/packages/ember-routing/lib/helpers/control.js#L20)中访问的帮助程序。这个帮助器被设计成在每次使用这个帮助器时**实例化一个控制器**。

# c - 在while循环中平均整数。C语言

> ID：12701031
> 
> 赞同：0
> 
> 时间：2012-10-03T02:09:31.697
> 
> 标签：c

我试图让 averageInt 正常工作。截至目前如果我输入：10（回车键）20（回车键）30（回车键）40（回车键）50（回车键）L 平均打印：10

答案应该是 30。我不明白它如何返回 10。

```
#include <stdio.h>
#include <math.h>

int main ()
{
//variable declarations
int minInt = 10, maxInt = 0, averageInt=0, numDivBy7 = 0, numGreat15 = 0;
int userInt = 0, sumOfInt = 0, count = 0;

//prompting user for values
printf("Enter integers (enter a character to terminate): ");

//while loop
while (scanf(" %d",&userInt) == 1 )
{
    count++;
    if (userInt<minInt)
        minInt=userInt;
    if (userInt>maxInt)
        maxInt=userInt;
    sumOfInt =+ userInt;
    averageInt = (double)sumOfInt/count;
    if (userInt%7 == 0)
        numDivBy7++;
    if (userInt > 15)
        numGreat15++;
    printf("Enter another integer (enter a character to terminate): ");
}

if (maxInt == 0 && minInt == 10)
    printf("The user entered no integers\n");
else
{
printf("Min: %.2d\tMax: %.2d\tAverage: %.2d",minInt,maxInt,averageInt);
printf("\nDivisable by 7: %.2d\tGreater than 15: %.2d\n",numDivBy7,numGreat15);
}

//terminate
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T02:27:08.947

你想要`userInt`在每个循环中，所以你必须把它放在`scanf`循环中`while`。并且`userInt != char`不是有效的条件测试。

将`scanf`返回成功匹配和分配的输入项的数量，在您的情况下，当用户输入为数字时，它将返回 1，我们可以将其用作`while`循环的测试。

```
...

userInt = 0;
maxInt = 0;
minInt = (1<<31)-1; //a integer large enough

while( scanf(" %d",&userInt) == 1 )
{
...
}

... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T02:20:52.917

您此时设置代码的方式是将整数读取为数字，而不是一系列字符。根据我对您的问题的理解，这不是您想要的。

您要使用的是 scanf("%c", &charpointer)。这一次读取一个字符，当流结束时读取一个空值 ('\0')。

您问题的另一部分与确定给定字符是否为数字有关。要记住的重要一点是数字是字符，字符是数字，所以表达式 'a' < 'c' 是完全有效和真实的。因此，如果给定字符 c 是数字，则任何符合布尔表达式 (c>='0'||c<='9') 的字符都将评估为真。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T02:25:07.603

尝试首先声明你的**userInt**然后如果程序检测到是一个整数程序将继续，像这样

> //提示用户输入值
> 
> 字符 = 用户整数；
> 
> printf("输入整数（输入一个字符结束）：");
> 
> scanf("%c",&userInt);
> 
> 如果（userInt>=0）{
> 
> 继续运行程序
> 
> }否则{结束}

# android - Android onMeasure() 宽度值高于预期

> ID：12701035
> 
> 赞同：0
> 
> 时间：2012-10-03T02:09:47.707
> 
> 标签：android, measurement

我很难理解我的 onMeasure 出了什么问题。我期望一个具有以下布局的 2x2 网格，但是当我检查宽度和高度时，高度正在按预期计算，但宽度是 Integer.MAX_VALUE。我无法弄清楚宽度没有发生的高度发生了什么。非常感谢帮助我找出正确的 onMeasure() 方法以获得预期的 2x2 网格的任何帮助。虽然示例是 2x2 网格，但我需要一个适用于任何大小网格的解决方案。

以下是 XML。请注意，DragLayer 只是扩展了 FrameLayout。我不相信自定义标签会导致任何格式差异，但我留下它们以防万一。

```
<?xml version="1.0" encoding="utf-8"?>
<com.hogenson.dragndrop.DragLayer 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:custom="http://schemas.android.com/apk/res/com.hogenson.dragndrop"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    custom:sfen="@string/start_sfen" >

    <TableLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <TableRow
            android:layout_width="match_parent"
            android:layout_height="match_parent">

            <com.hogenson.dragndrop.DragView
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                custom:border_color="#000000"
                custom:anti_alias="true"
                custom:game_token="r" />

            <com.hogenson.dragndrop.DragView
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                custom:border_color="#000000"
                custom:anti_alias="true"
                custom:game_token="p" />

        </TableRow>

        <TableRow
            android:layout_width="match_parent"
            android:layout_height="match_parent">

            <com.hogenson.dragndrop.DragView
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                custom:border_color="#000000"
                custom:anti_alias="true"
                custom:game_token="K" />

            <com.hogenson.dragndrop.DragView
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                custom:border_color="#000000"
                custom:anti_alias="true"
                custom:game_token="R" />

        </TableRow>

    </TableLayout>

</com.hogenson.dragndrop.DragLayer> 
```

这是我试图在 DragView 类中实现的 onMeasure() 方法。

```
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec)
{
    int widthMode = MeasureSpec.getMode(widthMeasureSpec);
    int heightMode = MeasureSpec.getMode(heightMeasureSpec);

    int width = MeasureSpec.getSize(widthMeasureSpec);
    int height = MeasureSpec.getSize(heightMeasureSpec);

    if (widthMode != MeasureSpec.EXACTLY)
    {
        width = Integer.MAX_VALUE;
    }

    if (heightMode != MeasureSpec.EXACTLY)
    {
        height = Integer.MAX_VALUE;
    }

    this.setMeasuredDimension(width, height);
} 
```

### 编辑：

下面提供的解决方案 Eric 对我来说非常有效，此外我还需要将 layout_weight 添加到水平布局，这似乎是不好的编程习惯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T02:13:19.777

### 挑剔

可能是事实，在您的两个`if`陈述中，您都在修改`width`吗？

```
if (widthMode != MeasureSpec.EXACTLY)
{
    width = Integer.MAX_VALUE;
}

if (heightMode != MeasureSpec.EXACTLY)
{
    width = Integer.MAX_VALUE; // Shouldn't this be height?
} 
```

### 那一边...

在我找到我的首选解决方案之前，我将首先建议您附加`android:stretchColumns="*"`到您的`TableLayout`. 这将允许列填充分配的空间（并且不会太小）。

### 改用线性布局

但是，我认为你想要完成的最好用`LinearLayout`s. 基本上，这是：

```
<LinearLayout
    ...
    android:orientation="vertical" >

    <LinearLayout
        ...
        android:orientation="horizontal" >

        <com.hogenson.dragndrop.DragView
            android:layout_width="0px"
            android:layout_height="match_parent"
            android:layout_weight="1" />

        <!-- more cells for row 1 -->

    </LinearLayout>

    <LinearLayout
        ...
        android:orientation="horizontal" >

        <com.hogenson.dragndrop.DragView
            android:layout_width="0px"
            android:layout_height="match_parent"
            android:layout_weight="1" />

        <!-- more cells for row 2 -->

    </LinearLayout>

</LinearLayout> 
```

### 最后，正方形

最后，如果您希望您的对象是方形的（相同的宽度和高度），请查看[此答案](https://stackoverflow.com/questions/8981029/simple-way-to-do-dynamic-but-square-layout)。

请注意，使用上述解决方案，您可能最好不要`onMeasure`在这种情况下摆弄；XML 应该能够为您处理它。和往常一样，祝你好运！

# regex - grep 两个字符串之间的唯一区域

> ID：12701036
> 
> 赞同：1
> 
> 时间：2012-10-03T02:09:50.527
> 
> 标签：regex, linux, bash, grep

我遇到了这个问题，在尝试 grep html 页面（特别是用户名）上的某些内容时，我尝试通过以下方式检索字符串：

```
egrep -o dir\=\"[ltr]*\"\>.*(\<\/span|\<\/a) 
```

通过这个我想说：“在 dir=("ltr or rlt")> 之后和第一个`</a>`或`</span>`结束标签之前得到任何东西。

例如：

```
dir="ltr">myusername</span> 
```

或者

```
dir="rtl">myusername</a> 
```

然而，一行上有多个跨度标签，并且在第一个标签之后并没有停止，这导致了我不想要的数据。

有没有办法修改我当前的正则表达式以在第一个正则表达式之后停止？为什么它还要继续阅读？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T02:14:11.490

您需要`.*`通过添加 a 来使其不贪心`?`。

```
egrep -o dir\=\"[ltr]*\"\>.*?(\<\/span|\<\/a) 
```

更好的解决方案是这样（在原始正则表达式中，您需要对其进行转义）：

```
dir="[ltr]{3}"[^>]*?>(.*?)(</span>|</a>) 
```

捕获组 1 ($1) 将包含它之间的内容，捕获组 2 ($2) 将包含它的跨度或链接终止。

看看它在行动： [http ://regexr.com?32b8k](http://regexr.com?32b8k)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T03:55:14.977

我`GNU sed`会这样做：

```
sed -r 's/(dir="ltr"|dir="rtl")>([^<]+)(<\/span>|<\/a>).*/\2/' file.txt 
```

您可以通过一些简化使正则表达式更聪明、更易于阅读：

```
sed -r 's/dir="(ltr|rtl)">([^<]+)<\/(span|a)>.*/\2/' file.txt 
```

# android - 对话框上的后退按钮正在取消对话框，即使我有一个监听器

> ID：12701040
> 
> 赞同：1
> 
> 时间：2012-10-03T02:10:39.300
> 
> 标签：android, android-alertdialog

我有一个对话框显示，我希望在按下后退按钮时要求用户确认他想在取消生效之前取消对话框。这是我的代码：

```
dialog.setOnCancelListener(new OnCancelListener(){

            @Override
            public void onCancel(DialogInterface arg0) {
                AlertDialog.Builder builder = new AlertDialog.Builder(dialog.getContext());
                builder.setMessage( "Are you sure you want to cancel?")
                       .setCancelable(false)
                       .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                           public void onClick(DialogInterface diag, int id) {
                               diag.dismiss();
                               dialog.dismiss();

                           }
                       })
                       .setNegativeButton("No", new DialogInterface.OnClickListener() {
                           public void onClick(DialogInterface diag, int id) {
                                diag.cancel();
                           }
                       });
                AlertDialog alert = builder.create();
                alert.show();               
            }

        });
        dialog.show(); 
```

问题是，当按下后退按钮时，我当前的对话框被取消，然后显示我的“确认消息”。如何确保在用户确认之前不会取消对话框？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T02:36:13.050

`onCancel`取消对话时调用，这就是取消对话后显示确认消息的原因。你应该`setOnKeyListener`代替你的对话。

```
dialog.setOnKeyListener(new OnKeyListener() {
    @Override
    public boolean onKey(DialogInterface dialog, int keyCode, KeyEvent event) {
        // TODO Auto-generated method stub
        if (keyCode == KeyEvent.KEYCODE_BACK) {
            Toast.makeText(Activity.this, "back pressed", Toast.LENGTH_SHORT).show();
            return true;
        }
        return false;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T02:55:15.263

您可以像这样自定义基本对话框：

```
private void doCreateBaseDlg(){
    final Dialog dialog = new Dialog(this);
    dialog.setContentView(R.layout.activity_dialog_on_dialog_cutomize);
    dialog.setTitle("Title...");

    //this is the button in your customize layout
    Button dialogButton = (Button) dialog.findViewById(R.id.dialogButtonOK);
    dialogButton.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            doCreate1stDlg();//here display your second conform dialog
        }
    });

    dialog.show();
} 
```

我试过了，效果很好。希望能帮到你。

# linux - 如何移动目录中具有特定前缀的所有文件？

> ID：12701044
> 
> 赞同：9
> 
> 时间：2012-10-03T02:11:20.310
> 
> 标签：linux, bash, shell, sh

我正在创建一个`sh`脚本文件来将文件从一个文件夹移动到另一个文件夹，但只移动以`system@`.

那么我怎样才能只移动以 开头的文件`system@`呢？

```
#pseudo-code
foreach file "system@*.*" in dir
move to /.../... 
```

提前致谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-03T02:15:55.810

在发布这样的问题之前，您应该真正查看 bash 参考。

```
for file in dir/system@*; do 
    mv "$file" /path/to/destination
done 
```

显然我比我想象的还要累。[3coins 的评论](https://stackoverflow.com/questions/12701044/how-to-move-all-files-in-a-directory-that-have-a-specific-prefix/12701071#comment17147314_12701044)更精彩：

```
mv dir/system@* /path/to/destination 
```

假设您没有足够的匹配文件超过最大命令行长度。

# django - 如何在 django 模板/视图中合并日期范围

> ID：12701051
> 
> 赞同：3
> 
> 时间：2012-10-03T02:12:47.127
> 
> 标签：django, django-templates, django-views

我想知道在 Django 模板中显示日期时如何合并月份和年份。

由此：

```
Oct. 12, 2012 - Oct. 20, 2012 
```

对此：

```
Oct. 12-20, 2012 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T02:34:21.483

像这样的东西应该工作。它确保月份和年份相同，在这种情况下输出字符串，如`Oct. 12-20, 2012`. 如果不是，则输出`Oct. 12, 2012 - Oct. 22, 2013`.

```
{% if date1|date:"nY" == date2|date:"nY" %} {# same month and day #}
    {{ date1|date:"N j" }}-{{ date2|date:"j, Y" }}
{% else %}
    {{ date1|date:"N j, Y" }} - {{ date2|date:"N j, Y" }}
{% endif %} 
```

[这](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#date)是 Django`date`模板过滤器的完整参考。

# php - 将 JSON 脚本 URL 转换为 PHP 中的变量

> ID：12701053
> 
> 赞同：1
> 
> 时间：2012-10-03T02:13:20.590
> 
> 标签：php, twitter, json

我想知道如何将 json 字符串放入 php 中。这是我的字符串：

（去这里）[http://urls.api.twitter.com/1/urls/count.json?url=http://www.onewiththem.com.au/&callback=twttr.receiveCount](http://urls.api.twitter.com/1/urls/count.json?url=http://www.onewiththem.com.au/&callback=twttr.receiveCount)

你应该看到这个返回：

```
twttr.receiveCount({"count":0,"url":"http:\/\/www.onewiththem.com.au\/"}); 
```

我想知道如何获取计数并将其设置在变量 $count 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T02:17:58.837

简单，使用`json_decode()`and `file_get_contents()`：

```
$data = json_decode(file_get_contents('http://urls.api.twitter.com/1/urls/count.json?url=http://www.onewiththem.com.au/'));
echo $data->count; 
```

请注意，我`&callback=`从 URL 中删除了 ，因为它仅用于 JSONP 而 PHP 不需要它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T02:17:06.907

如果您的意思是在 javascript 中获取它，那么`data`在您的回调函数中就是对象。你可以通过 得到计数`data.count`。

```
twttr.reciveCount = function (data) {
  console.log(data.count);
  // do the rest
} 
```

如果从 php 调用 api，则不应使用该`callback`参数。获取 JSON 响应，然后用于`json_decode`对其进行解码。（不要忘记对 url 参数进行 urlencode。）

```
$response = file_get_contents('http://urls.api.twitter.com/1/urls/count.json?url='.urlencode('http://www.onewiththem.com.au/'));
$json = json_decode($response);
echo $json->count; 
```

# objective-c - libgcrypt 的 Xcode 错误

> ID：12701059
> 
> 赞同：0
> 
> 时间：2012-10-03T02:14:11.320
> 
> 标签：objective-c, c, xcode, macos

在我的程序中，我最初添加了 json-c 并且缺少一些与 libgcrypt 相关的依赖项。现在，我收到了这些 libgcrypt 的错误，这些错误对我来说没有任何意义。有没有人见过这些或者能够说出我到底做错了什么？

```
CompileC /Users/jordan/Library/Developer/Xcode/DerivedData/PianoLounge-ajgojrzszrergafgvyuliphwxcpg/Build/Intermediates/PianoLounge.build/Debug/PianoLounge.build/Objects-normal/x86_64/mpih-add1-4D47DD99C77BE382.o PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S normal x86_64 assembler-with-cpp com.apple.compilers.llvm.clang.1_0.compiler
    cd /Users/jordan/Projects/Cocoa/PianoLounge
    setenv LANG en_US.US-ASCII
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x assembler-with-cpp -arch x86_64 -fmessage-length=0 -Wno-trigraphs -fpascal-strings -O0 -Wno-missing-field-initializers -Wno-missing-prototypes -Wreturn-type -Wformat -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wempty-body -Wuninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-conversion -Wshorten-64-to-32 -Wno-newline-eof -DDEBUG=1 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk -fasm-blocks -Wdeprecated-declarations -mmacosx-version-min=10.6 -g -Wno-sign-conversion -iquote /Users/jordan/Library/Developer/Xcode/DerivedData/PianoLounge-ajgojrzszrergafgvyuliphwxcpg/Build/Intermediates/PianoLounge.build/Debug/PianoLounge.build/PianoLounge-generated-files.hmap -I/Users/jordan/Library/Developer/Xcode/DerivedData/PianoLounge-ajgojrzszrergafgvyuliphwxcpg/Build/Intermediates/PianoLounge.build/Debug/PianoLounge.build/PianoLounge-own-target-headers.hmap -I/Users/jordan/Library/Developer/Xcode/DerivedData/PianoLounge-ajgojrzszrergafgvyuliphwxcpg/Build/Intermediates/PianoLounge.build/Debug/PianoLounge.build/PianoLounge-all-target-headers.hmap -iquote /Users/jordan/Library/Developer/Xcode/DerivedData/PianoLounge-ajgojrzszrergafgvyuliphwxcpg/Build/Intermediates/PianoLounge.build/Debug/PianoLounge.build/PianoLounge-project-headers.hmap -I/Users/jordan/Library/Developer/Xcode/DerivedData/PianoLounge-ajgojrzszrergafgvyuliphwxcpg/Build/Products/Debug/include -I/usr/local/include -I/Users/jordan/Library/Developer/Xcode/DerivedData/PianoLounge-ajgojrzszrergafgvyuliphwxcpg/Build/Intermediates/PianoLounge.build/Debug/PianoLounge.build/DerivedSources/x86_64 -I/Users/jordan/Library/Developer/Xcode/DerivedData/PianoLounge-ajgojrzszrergafgvyuliphwxcpg/Build/Intermediates/PianoLounge.build/Debug/PianoLounge.build/DerivedSources -F/Users/jordan/Library/Developer/Xcode/DerivedData/PianoLounge-ajgojrzszrergafgvyuliphwxcpg/Build/Products/Debug -MMD -MT dependencies -MF /Users/jordan/Library/Developer/Xcode/DerivedData/PianoLounge-ajgojrzszrergafgvyuliphwxcpg/Build/Intermediates/PianoLounge.build/Debug/PianoLounge.build/Objects-normal/x86_64/mpih-add1-4D47DD99C77BE382.d --serialize-diagnostics /Users/jordan/Library/Developer/Xcode/DerivedData/PianoLounge-ajgojrzszrergafgvyuliphwxcpg/Build/Intermediates/PianoLounge.build/Debug/PianoLounge.build/Objects-normal/x86_64/mpih-add1-4D47DD99C77BE382.dia -c /Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S -o /Users/jordan/Library/Developer/Xcode/DerivedData/PianoLounge-ajgojrzszrergafgvyuliphwxcpg/Build/Intermediates/PianoLounge.build/Debug/PianoLounge.build/Objects-normal/x86_64/mpih-add1-4D47DD99C77BE382.o

/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:33:16: error: unexpected token in '.set'
 .set noreorder
               ^
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:34:11: error: unexpected token in '.set'
 .set noat
          ^
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:38:2: error: unknown directive
 .ent _gcry_mpih_add_n
 ^
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:40:2: error: unknown directive
 .frame $30,0,$26,0
 ^
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:42:11: error: unexpected token in memory operand
 ldq $3,0($17)
          ^
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:43:11: error: unexpected token in memory operand
 ldq $4,0($18)
          ^
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:45:13: error: invalid operand for instruction
 subq $19,1,$19
            ^~
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:46:2: error: unknown use of instruction mnemonic without a size suffix
 and $19,4-1,$2 # number of limbs in first loop
 ^
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:47:2: error: invalid instruction mnemonic 'bis'
 bis $31,$31,$0
 ^~~
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:48:2: error: invalid instruction mnemonic 'beq'
 beq $2,.L0 # if multiple of 4 limbs, skip first loop
 ^~~
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:50:11: error: invalid operand for instruction
 subq $19,$2,$19
          ^~
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:52:19: error: invalid operand for instruction
.Loop0: subq $2,1,$2
                  ^~
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:53:11: error: unexpected token in memory operand
 ldq $5,8($17)
          ^
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:54:10: error: invalid operand for instruction
 addq $4,$0,$4
         ^~
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:55:11: error: unexpected token in memory operand
 ldq $6,8($18)
          ^
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:56:2: error: invalid instruction mnemonic 'cmpult'
 cmpult $4,$0,$1
 ^~~~~~
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:57:10: error: invalid operand for instruction
 addq $3,$4,$4
         ^~
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:58:2: error: invalid instruction mnemonic 'cmpult'
 cmpult $4,$3,$0
 ^~~~~~
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:59:11: error: unexpected token in memory operand
 stq $4,0($16)
          ^
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:60:2: error: unknown use of instruction mnemonic without a size suffix
 or $0,$1,$0
 ^
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:62:13: error: invalid operand for instruction
 addq $17,8,$17
            ^~
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:63:13: error: invalid operand for instruction
 addq $18,8,$18
            ^~
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:64:2: error: invalid instruction mnemonic 'bis'
 bis $5,$5,$3
 ^~~
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:65:2: error: invalid instruction mnemonic 'bis'
 bis $6,$6,$4
 ^~~
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:66:13: error: invalid operand for instruction
 addq $16,8,$16
            ^~
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:67:2: error: invalid instruction mnemonic 'bne'
 bne $2,.Loop0
 ^~~
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:69:6: error: invalid instruction mnemonic 'beq'
.L0: beq $19,.Lend
     ^~~
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:72:19: error: invalid operand for instruction
.Loop: subq $19,4,$19
                  ^~
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:74:11: error: unexpected token in memory operand
 ldq $5,8($17)
          ^
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:75:10: error: invalid operand for instruction
 addq $4,$0,$4
         ^~
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:76:11: error: unexpected token in memory operand
 ldq $6,8($18)
          ^
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:77:2: error: invalid instruction mnemonic 'cmpult'
 cmpult $4,$0,$1
 ^~~~~~
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:78:10: error: invalid operand for instruction
 addq $3,$4,$4
         ^~
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:79:2: error: invalid instruction mnemonic 'cmpult'
 cmpult $4,$3,$0
 ^~~~~~
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:80:11: error: unexpected token in memory operand
 stq $4,0($16)
          ^
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:81:2: error: unknown use of instruction mnemonic without a size suffix
 or $0,$1,$0
 ^
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:83:12: error: unexpected token in memory operand
 ldq $3,16($17)
           ^
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:84:10: error: invalid operand for instruction
 addq $6,$0,$6
         ^~
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:85:12: error: unexpected token in memory operand
 ldq $4,16($18)
           ^
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:86:2: error: invalid instruction mnemonic 'cmpult'
 cmpult $6,$0,$1
 ^~~~~~
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:87:10: error: invalid operand for instruction
 addq $5,$6,$6
         ^~
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:88:2: error: invalid instruction mnemonic 'cmpult'
 cmpult $6,$5,$0
 ^~~~~~
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:89:11: error: unexpected token in memory operand
 stq $6,8($16)
          ^
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:90:2: error: unknown use of instruction mnemonic without a size suffix
 or $0,$1,$0
 ^
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:92:12: error: unexpected token in memory operand
 ldq $5,24($17)
           ^
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:93:10: error: invalid operand for instruction
 addq $4,$0,$4
         ^~
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:94:12: error: unexpected token in memory operand
 ldq $6,24($18)
           ^
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:95:2: error: invalid instruction mnemonic 'cmpult'
 cmpult $4,$0,$1
 ^~~~~~
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:96:10: error: invalid operand for instruction
 addq $3,$4,$4
         ^~
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:97:2: error: invalid instruction mnemonic 'cmpult'
 cmpult $4,$3,$0
 ^~~~~~
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:98:12: error: unexpected token in memory operand
 stq $4,16($16)
           ^
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:99:2: error: unknown use of instruction mnemonic without a size suffix
 or $0,$1,$0
 ^
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:101:12: error: unexpected token in memory operand
 ldq $3,32($17)
           ^
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:102:10: error: invalid operand for instruction
 addq $6,$0,$6
         ^~
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:103:12: error: unexpected token in memory operand
 ldq $4,32($18)
           ^
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:104:2: error: invalid instruction mnemonic 'cmpult'
 cmpult $6,$0,$1
 ^~~~~~
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:105:10: error: invalid operand for instruction
 addq $5,$6,$6
         ^~
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:106:2: error: invalid instruction mnemonic 'cmpult'
 cmpult $6,$5,$0
 ^~~~~~
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:107:12: error: unexpected token in memory operand
 stq $6,24($16)
           ^
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:108:2: error: unknown use of instruction mnemonic without a size suffix
 or $0,$1,$0
 ^
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:110:14: error: invalid operand for instruction
 addq $17,32,$17
             ^~
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:111:14: error: invalid operand for instruction
 addq $18,32,$18
             ^~
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:112:14: error: invalid operand for instruction
 addq $16,32,$16
             ^~
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:113:2: error: invalid instruction mnemonic 'bne'
 bne $19,.Loop
 ^~~
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:115:16: error: invalid operand for instruction
.Lend: addq $4,$0,$4
               ^~
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:116:2: error: invalid instruction mnemonic 'cmpult'
 cmpult $4,$0,$1
 ^~~~~~
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:117:10: error: invalid operand for instruction
 addq $3,$4,$4
         ^~
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:118:2: error: invalid instruction mnemonic 'cmpult'
 cmpult $4,$3,$0
 ^~~~~~
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:119:11: error: unexpected token in memory operand
 stq $4,0($16)
          ^
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:120:2: error: unknown use of instruction mnemonic without a size suffix
 or $0,$1,$0
 ^
/Users/jordan/Projects/Cocoa/PianoLounge/PianoLounge/libgcrypt/mpi/alpha/mpih-add1.S:123:2: error: unknown directive
 .end _gcry_mpih_add_n
 ^
Command /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 1 
```

我确保只包含所需的文件（.h 和 .c），它清除了我收到的错误，但现在我又收到了链接器错误。

[http://pastebin.com/VM0aBU1m](http://pastebin.com/VM0aBU1m)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T02:24:25.390

在您问的上一个问题（一个小时前？）中，您说您将整个 libgcrypt 文件夹*批发*（即完全）复制到您当前的项目中。据我所知，Xcode 在以“”结尾的文件上出现错误`.S`。Xcode 不知道如何处理它们。而且我不知道它们是什么。

实际上，您需要的只是将 libgcrypt 中适合您尝试的文件包含到您的项目中。

这可能是......“ `include`”或“ `import`”以后缀“”结尾的头文件，`.h`实际的“ `.framework`”或“ `.a`”或“ `.dylib`”库文件。

就是这样。

如果我的回答没有让您找到您的解决方案，请编辑您的问题以显示您的项目在 Xcode 中的样子的屏幕截图，尤其是那些包含的文件在文件检查器中的外观。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T11:36:31.243

哇，我是个白痴。我不知道为什么我觉得需要手动添加这些库。我最终使用 MacPorts 来获取所需的库，并且效果很好。

# c# - 为什么它在 LINQPad 中有效，但在我的代码中无效？

> ID：12701060
> 
> 赞同：1
> 
> 时间：2012-10-03T02:14:23.037
> 
> 标签：c#, asp.net-mvc-4, linqpad

我正在为应用程序（ASP.NET MVC 4）中的价格值尝试不同的格式，首先我在 LINQPad 中测试了下面的代码，它运行良好（没有无意义的尾随零）。但是当我将这些代码 string.Format("G", value) 专门放在我的代码中时，它不起作用，再次出现尾随零！！！为什么？

LINQPad 片段：

```
decimal d = 0.3M, d2 = 0.45M, d3 = 13.2M, d4 = 1049M, d5 = 12492.4M, d6 = 2000M;

var culture = CultureInfo.CreateSpecificCulture("vi-VN");

Console.WriteLine(string.Format(culture, "{0:G}", d));
Console.WriteLine(string.Format(culture, "{0:G}", d2));
Console.WriteLine(string.Format(culture, "{0:G}", d3));
Console.WriteLine(string.Format(culture, "{0:G}", d4));
Console.WriteLine(string.Format(culture, "{0:G}", d5));
Console.WriteLine(string.Format(culture, "{0:G}", d6)); 
```

LINQPad 输出：

```
// Output:
// 0,3
// 0,45
// 13,2
// 1049
// 12492,4
// 2000 
```

我的应用程序输出：

```
// Output:
// 0,30
// 0,45
// 13,20
// 1049,00
// 12492,40
// 2000,00 
```

更新 1：我在 .NET 4 控制台应用程序和 ASP.NET MVC 4（.NET 4 和 .NET 4.5）中再次尝试了以下代码，并且都运行良好（没有零）。但它在我的应用程序中仍然不起作用，即使我把它们放在一个空的动作中。唯一不同的是我的应用程序（ASP.NET MVC 4）是在 VS2010 + .NET 4 中创建的，后来升级到 VS2012 + .NET 4.5。是问题吗？

```
decimal d = 0.3M;
string s = string.Format(CultureInfo.CreateSpecificCulture("vi-VN"), "{0:G}", d); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T02:17:17.153

请改用 {0:G29}

```
decimal d = 0.3M, d2 = 0.45M, d3 = 13.2M, d4 = 1049M, d5 = 12492.4M, d6 = 2000M;

var culture = CultureInfo.CreateSpecificCulture("vi-VN");

Console.WriteLine(string.Format(culture, "{0:G29}", d));
Console.WriteLine(string.Format(culture, "{0:G29}", d2));
Console.WriteLine(string.Format(culture, "{0:G29}", d3));
Console.WriteLine(string.Format(culture, "{0:G29}", d4));
Console.WriteLine(string.Format(culture, "{0:G29}", d5));
Console.WriteLine(string.Format(culture, "{0:G29}", d6)); 
```

参考：[删除尾随零](https://stackoverflow.com/questions/4525854/remove-trailing-zeros)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T18:10:06.817

看来这只是我的应用程序问题，而不是 ToString("G")。谢谢阅读。

# c - 发送 X11 点击事件不适用于某些窗口

> ID：12701069
> 
> 赞同：5
> 
> 时间：2012-10-03T02:15:34.003
> 
> 标签：c, x11

以下代码片段在大多数情况下都有效，但在某些窗口中除外。例如，在最新的 Ubuntu 下，它不适用于在文件资源管理器中选择文件夹。它似乎在其他任何地方都有效，但这种差距很大。我怀疑这与我使用 XQueryPointer 的方式有关，但我已经尝试了几乎所有能找到的示例。如果我改用电脑的鼠标，它工作得很好。仅供参考：我已经尝试过这些问题的答案： [发送编程事件](https://stackoverflow.com/questions/4402216/sending-programtic-mouse-events-to-x) [捕获鼠标输入](https://stackoverflow.com/questions/2607010/linux-how-to-capture-screen-and-simulate-mouse-movements) ，但它们的工作方式没有任何不同......

这是代码：

```
#include <string.h>
#include <X11/Xlib.h>
#include <X11/Xutil.h>

void SendClick(int button, int down) {
    Display *display = XOpenDisplay(NULL);
    XEvent event;

    if(display == NULL)
    {
        return;
    }

    memset(&event, 0, sizeof(event));

    event.xbutton.button = button;
    event.xbutton.same_screen = True;
    event.xbutton.subwindow = DefaultRootWindow (display);

    while (event.xbutton.subwindow)
    {
      event.xbutton.window = event.xbutton.subwindow;
      XQueryPointer (display, event.xbutton.window,
             &event.xbutton.root, &event.xbutton.subwindow,
             &event.xbutton.x_root, &event.xbutton.y_root,
             &event.xbutton.x, &event.xbutton.y,
             &event.xbutton.state);
    }

    event.type = down ? ButtonPress : ButtonRelease;

    XSendEvent(display, PointerWindow, True, down ? ButtonPressMask : ButtonReleaseMask, &event); 

    XFlush(display);

    XCloseDisplay(display);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T23:39:42.910

感谢 ninjalj 上面的评论让我走上了正轨。我不喜欢依赖扩展来执行此操作以及它创建的额外依赖项的想法，但它也是一个非常标准的扩展。完美运行...

对于那些遇到与我相同的问题的人，以下代码块替换了我之前使用的代码并且运行良好：

```
#include <X11/extensions/XTest.h>

void SendClick(int button, Bool down) {
    Display *display = XOpenDisplay(NULL);
    XTestFakeButtonEvent(display, button, down, CurrentTime);
    XFlush(display);
    XCloseDisplay(display);
} 
```

矮得多！

对于 Ubuntu，不要忘记安装 libxtst-dev 软件包。请务必将 -lXtst 添加到您的 LDFLAGS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-01T21:14:52.407

这个链接也很有用：

X11 使用 XTest 扩展生成假鼠标事件 [http://bharathisubramanian.wordpress.com/2010/04/01/x11-fake-mouse-events-generation-using-xtest/](http://bharathisubramanian.wordpress.com/2010/04/01/x11-fake-mouse-events-generation-using-xtest/)

这是一个链接，解释了如何使用 XTest 扩展来生成假键盘事件：

X11 使用 XTest 扩展生成假密钥事件 [http://bharathisubramanian.wordpress.com/2010/03/14/x11-fake-key-event-generation-using-xtest-ext/](http://bharathisubramanian.wordpress.com/2010/03/14/x11-fake-key-event-generation-using-xtest-ext/)

# scheme - 以下表达式中的当前延续是哪个？

> ID：12701072
> 
> 赞同：1
> 
> 时间：2012-10-03T02:16:08.577
> 
> 标签：scheme, continuations

在表达式`(call/cc (lambda (k) (k 12)))`中，有三个延续：`(k 12)`、`(lambda (k) (k 12))`和`(call/cc (lambda (k) (k 12)))`。哪一个是“当前的延续”？

在某些书籍中，延续被视为等待一个值的过程，当它应用于一个值时它会立即返回。是对的吗？

谁能详细解释当前的延续？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T20:21:21.430

诸如此类的事情`(k 12)`不是延续。在一些较大的程序中，每个子表达式都有一个延续。例如，`x`in的延续`(* 3 (+ x 42))`是`(lambda (_) (* 3 (+ _ 42)))`。

在您的示例中，“当前延续”`(call/cc (lambda (k) (k 12)))`将是围绕该表达式的任何内容。如果您只是将其键入到方案提示符中，则它周围没有任何内容，因此“当前继续”只是`(lambda (_) _)`. 如果您键入类似的内容`(* 3 (+ (call/cc (lambda (k) (k 12))) 42))`，则继续是`(lambda (_) (* 3 (+ _ 42)))`.

请注意，我用来表示“当前延续”的 lambda 与传入的（在您的示例`call/cc`中命名）不同。具有特殊的控制效果，即在评估当前继续之后中止其余的计算。`k``k`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T02:33:52.870

在这种情况下，延续是接收`call/cc`调用返回值的“事物”。因此：

```
(display (call/cc (lambda (k) (k 12))) 
```

有相同的结果

```
(display 12) 
```

Scheme 中的延续“看起来和感觉”类似于过程，但它们实际上并不像过程。可以帮助您更好地理解延续的一件事是 CPS 转换。

* * *

在 CPS 转换中，不是函数返回值，而是接受一个延续参数，并使用结果调用延续。`sqrt`因此，将调用CPS 转换的函数`(sqrt 64 k)`，而不是返回 8，它只是`(k 8)`在尾部位置调用。

因为延续（在 CPS 转换的函数中）是尾调用的，所以函数不必担心延续返回，事实上，在大多数情况下，它们不会返回。

考虑到这一点，下面是一个简单的函数示例：

```
(define (hypot x y)
  (sqrt (+ (* x x) (* y y)))) 
```

及其 CPS 转换版本：

```
(define (hypot x y k)
  (* x x (lambda (x2)
           (* y y (lambda (y2)
                    (+ x2 y2 (lambda (sum)
                               (sqrt sum k)))))))) 
```

（假设`*`、`+`和`sqrt`也都经过 CPS 转换，以接受延续论点）。

* * *

所以现在，有趣的部分：CPS 转换`call/cc`具有以下定义：

```
(define (call/cc fn k)
  (fn k k)) 
```

有了CPS变换，`call/cc`简单易懂，易于实现。如果没有 CPS 转换，`call/cc`可能需要非常神奇的实现（例如，通过堆栈复制等）。

# python - 为 Python 库创建“Windows 安装程序”

> ID：12701073
> 
> 赞同：2
> 
> 时间：2012-10-03T02:16:17.743
> 
> 标签：python, windows, ubuntu, windows-installer, xmlsec

我已经在 Ubuntu 上成功编译了 PyXMLSec 库。我想为这个库创建一个 Windows 安装程序（即 PyXMLSec-win32-python27.exe）。我可以从我的 Ubuntu 创建它还是必须从 Win32 创建它？我怎样才能创建它？我更喜欢 Ubuntu，因为在 Windows 中，我有一些错误。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T22:09:36.317

您应该在 Windows 上构建和测试安装程序。（如果你不在 Windows 上测试它，你不知道它在 Windows 上工作。）

用于制作 Windows 安装程序的常用免费安装软件产品通常包括[Wix](http://www.wix.com)和[Inno Setup](http://www.jrsoftware.org/isinfo.php)。为了使用方便，我更喜欢 Inno Setup；它有一些免费的 GUI（从站点本身链接到）用于创建用于构建安装程序的设置脚本，非常灵活，无需您进行任何自定义工作，并且可以使用内置的基于 Object Pascal 的脚本语言轻松扩展。

但是，Wix 支持构建使用 Windows Installer 的基于 MSI 的安装程序。企业网络管理员通常需要 MSI 安装，因为它们可以轻松地将安装推​​送到网络域中的计算机。除非您非常熟悉它，否则它更难使用，因此它可能不适合您似乎需要的一次性安装程序要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T07:10:54.937

查看[Build Distribution](http://docs.python.org/2/distutils/builtdist.html)的文档：

```
python setup.py bdist --format=msi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-24T06:56:43.747

我想为我的python源代码制作一个安装文件”

您必须使用 NSIS、InnoSetup、BitRock Installer、IzPack 或等效软件来生成平台安装程序。所以你必须把第一部分产生的二进制结果打包成操作系统分发。几乎所有的安装程序系统都被认为适用于 Windows 系统。跨平台：零安装，IzPack ...如果您使用 IzPack，您可以拥有一个跨平台安装程序，支付包含 jvm 的价格。

我相信这一点>>[帮助](http://cyrille.rossant.net/create-a-standalone-windows-installer-for-your-python-application/)可以成为您的道路之光；）

# ruby - 如何在 Windows 7 上安装 ruby gem

> ID：12701075
> 
> 赞同：2
> 
> 时间：2012-10-03T02:16:49.770
> 
> 标签：ruby, gem

很抱歉问了这么一个基本的问题。我正在尝试按照[此页面](https://github.com/rails-sqlserver/tiny_tds)上的说明安装**tiny_tds**。我试过**$ gem install tiny_tds**，我收到错误：语法错误，意外 $undefined。如果我删除 $，错误将变为未定义的局部变量或方法“tiny_tds”。我不知道从哪里开始安装 gem。我正在使用 ruby​​ 命令提示符。

 **感谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T02:20:31.043

我想你应该为包含 ruby​​gems 的 windows 尝试 railsinstaller。然后`gem install tiny_tds`在命令提示符下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-12T23:12:17.213

您需要根据系统设置（32 位或 64 位）和 ruby​​ 开发工具包下载 Ruby 安装程序才能运行命令行。这是安装程序的链接和在 windows 上安装 DevKit for ruby​​ 的简单指南（这个是让 jekyll 在 windows 上运行，jekyll 是其他 ruby​​ gem）：

Ruby 安装程序： [http ://rubyinstaller.org/downloads/](http://rubyinstaller.org/downloads/)

Devkit 配置： http: [//www.madhur.co.in/blog/2011/09/01/runningjekyllwindows.html](http://www.madhur.co.in/blog/2011/09/01/runningjekyllwindows.html)**

# ruby-on-rails - 将 Garb 与 GA 管理 API v3 一起使用

> ID：12701082
> 
> 赞同：0
> 
> 时间：2012-10-03T02:17:41.643
> 
> 标签：ruby-on-rails, ruby-on-rails-3, garb-gem

我安装了 Sija 的 fork`garb`并且遇到了一些问题。该文档似乎有点过时，因为有些东西已被弃用。

我有以下代码（忽略它非常不安全的事实）：

```
extend Garb::Model
metrics :pageviews
dimensions :page_path

Garb::Session.login('XXXXXX@gmail.com', 'mypassword')
profile = Garb::Management::Profile.all.detect { |p| p.web_property_id == 'UA-XXXXX-1' }
puts profile.visits 
```

当我运行它时，我得到 undefined method `visits`。我还在[StackOverview](https://stackoverflow.com/questions/4832106/how-to-test-google-analytics-garb-api-with-rspec)上尝试了这段代码，它返回了未定义的方法`results`。我猜这些是由于新的 GA Management API v3 更改造成的，但有人知道访问综合浏览量/访问量的新方法吗？

最后我试图按日期查询综合浏览量。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T15:23:16.743

这是一个例子：

```
class Report 
  extend Garb::Model

  metrics     :pageviews
  dimensions  :pagePath 
end 
```

编辑：感谢编辑！那是我第一次发帖：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T15:20:12.773

您需要创建一个扩展类`Garb::Model`（[https://github.com/Sija/garb#define-a-report-class](https://github.com/Sija/garb#define-a-report-class)）。顺便说一句，文档已更新为与最新版本的 gem 一起使用。

# sencha-touch-2 - 如果浏览器不是移动设备，如何构建重定向

> ID：12701083
> 
> 赞同：1
> 
> 时间：2012-10-03T02:17:45.437
> 
> 标签：sencha-touch-2

如果用户从标准桌面浏览器加载我的网络应用程序，我想将他们重定向到另一个页面。我已经尝试在索引文件中使用 php 和 javascript 检测脚本，它们在开发环境中都可以正常工作。问题是当我使用“sencha app build production”命令构建项目时出现错误。我假设这是因为在尝试构建依赖项时，这些脚本以某种方式重定向了构建脚本。我不知道如何解决这个问题。我尝试在没有脚本的情况下构建它，然后上传生产构建并将代码添加到上传的文件中，但添加到上传文件的代码似乎被忽略了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T22:18:03.633

要么构建器被重定向，要么构建器无法遵循代码依赖关系来构建单个 JS 文件。

您可以为桌面创建一个设备配置文件，当配置文件处于活动状态时，它将在启动功能中重定向：[Sencha Touch 2 设备配置文件](http://docs.sencha.com/touch/2-0/#!/guide/profiles)

# http - 基本认证中的“领域”是什么

> ID：12701085
> 
> 赞同：351
> 
> 时间：2012-10-03T02:17:56.837
> 
> 标签：http, basic-authentication, digest-authentication

我正在一个 php 站点上设置基本身份验证，并在 php 手册中找到[了这个](http://php.net/manual/en/features.http-auth.php)页面，显示了设置。标题中的“领域”是什么意思？

```
header('WWW-Authenticate: Basic realm="My Realm"'); 
```

是请求的页面页面吗？

* * *

## 回答 #1

> 赞同：318
> 
> 时间：2012-10-03T02:21:13.670

[来自 RFC 1945 (HTTP/1.0)](https://datatracker.ietf.org/doc/html/rfc1945#section-11)和[RFC 2617（HTTP/1.1 引用的 HTTP 身份验证）](https://datatracker.ietf.org/doc/html/rfc2617#page-3)

> 所有发出质询的身份验证方案都需要领域属性（不区分大小写）。领域值（区分大小写）与被访问服务器的规范根 URL 相结合，定义了保护空间。这些领域允许将服务器上的受保护资源划分为一组保护空间，每个保护空间都有自己的身份验证方案和/或授权数据库。领域值是一个字符串，通常由源服务器分配，它可能具有特定于身份验证方案的附加语义。

简而言之，同一领域中的页面应该共享凭据。如果您的凭据适用于域为*"My Realm"*的页面，则应假定相同的用户名和密码组合适用于具有相同域的另一个页面。

* * *

## 回答 #2

> 赞同：125
> 
> 时间：2012-10-03T02:25:50.100

一个领域可以被看作是一个区域（不是一个特定的页面，它可以是一组页面），凭证用于该区域；这也是浏览器弹出登录窗口时将显示的字符串，例如

> 请输入您的用户名和密码`<realm name>`：

当领域更改时，如果浏览器没有该特定领域的凭据，它可能会显示另一个弹出窗口。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2016-02-11T12:47:37.677

根据[RFC 7235](https://datatracker.ietf.org/doc/html/rfc7235)，该`realm`参数保留用于定义**保护空间**（需要凭据的页面或资源集），并且它被身份验证方案用于指示**保护范围**。

有关更多详细信息，请参阅下面的引用（RFC 中没有突出显示）：

> [**2.2\. 保护空间（境界）**](https://datatracker.ietf.org/doc/html/rfc7235#section-2.2)
> 
> “领域”身份验证参数保留供**希望指示保护范围的身份验证方案使用**。
> 
> 保护空间由正在访问的服务器的规范根 URI（有效请求 URI 的方案和权限组件）与领域值（如果存在）一起定义。 **这些领域允许将服务器上的受保护资源划分为一组保护空间，每个保护空间都有自己的身份验证方案和/或授权数据库。** 领域值是一个字符串，通常由源服务器分配，可以具有特定于身份验证方案的附加语义。请注意，响应可能具有相同的身份验证方案但具有不同领域的多个挑战。[...]

* * *

[**注 1：** HTTP 身份验证的框架当前由[RFC 7235](https://datatracker.ietf.org/doc/html/rfc7235)定义，它更新了[RFC 2617](https://datatracker.ietf.org/doc/html/rfc2617)并使[RFC 2616](https://datatracker.ietf.org/doc/html/rfc2616)过时。]

[**注 2：**[挑战](https://datatracker.ietf.org/doc/html/rfc7235#section-4.1)`realm`不再总是需要该参数。]

# java - 如何解决 java.lang.NoClassDefFoundError？

> ID：12701087
> 
> 赞同：0
> 
> 时间：2012-10-03T02:18:40.583
> 
> 标签：java, exception, spring-mvc, error-handling, stack-trace

运行程序时出现 java.lang.NoClassDefFoundError！？这是堆栈跟踪：

```
java.lang.NoClassDefFoundError: org/apache/xerces/framework/XMLParser
abc.def.presentation.controllers.UnixServerJobController.handleRequestInternal(UnixServerJobController.java:64)
org.springframework.web.servlet.mvc.AbstractController.handleRequest(AbstractController.java:153)
org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48)
org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:875)
org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:807)
org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:571)
org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:501)
javax.servlet.http.HttpServlet.service(HttpServlet.java:690)
javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:96)
org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) 
```

这是给那些关心的人的代码

```
 protected ModelAndView handleRequestInternal(HttpServletRequest request, HttpServletResponse response)
        throws Exception{
    try{
        String jobName = request.getParameter("JobName");
        jobName.concat(".xml");
        String config = request.getParameter("Config");
        File file = new File(config + "/"+jobName);
        ConfigFile jobConfig = new ConfigFile(file);
        SchdJobCaller jobCaller = getJobCaller();
        jobCaller.runJobs(jobConfig);
    }
    catch(Exception e){
        e.printStackTrace();
        throw e;
    }
    return null;
} 
```

只需传递一个像 abc.com/def.jsp?JobName=name1&Config=config1 这样的 url，由 Spring Web MVC 中的控制器处理！

这是我在谷歌搜索时发现的！

> 如果您在 J2EE 环境中工作，那么多个 Classloader 之间的 Class 可见性也会导致 java.lang.NoClassDefFoundError，请参阅示例和场景部分进行详细讨论。

阅读更多：http: [//javarevisited.blogspot.com/2011/06/noclassdeffounderror-exception-in.html#ixzz28CQRODWN](http://javarevisited.blogspot.com/2011/06/noclassdeffounderror-exception-in.html#ixzz28CQRODWN)

这可能是问题的根源，但是如何解决 Class 对多个 Classloader 的可见性！？？

这是我第一次遇到这样的错误！对我有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T02:21:31.157

您必须找到一个包含 Apache Xerces XML 解析器的 JAR 并将它放在您的 CLASSPATH 中。

看起来investxa 控制器包想要使用Xerces。就个人而言，我认为这不是一个好主意。Java JDK 内置了 DOM 和 SAX 解析器已经有一段时间了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T02:26:17.270

你用的是maven吗？摇篮？蚂蚁？

如果是 Maven，只需添加：

```
<dependency>
    <groupId>xerces</groupId>
    <artifactId>xerces</artifactId>
    <version>2.4.0</version>
    <!-- or whatever version you want -->
</dependency> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T15:31:31.693

根据 NoClassDefFoundError 的 JavaDoc，

```
/**
* Thrown if the Java Virtual Machine or a <code>ClassLoader</code> instance
* tries to load in the definition of a class (as part of a normal method call
* or as part of creating a new instance using the <code>new</code> expression)
* and no definition of the class could be found. 
 * <p>
* The searched-for class definition existed when the currently 
 * executing class was compiled, but the definition can no longer be 
 * found.
*/ 
```

我想 xerces jar 在编译期间存在，但在运行时不知何故丢失。如果您正在处理 maven，那么您的依赖范围可能设置为编译。您必须将其设置为运行时才能解决此问题。

# ruby-on-rails - 无法加载位于 lib 目录中的此类文件

> ID：12701088
> 
> 赞同：2
> 
> 时间：2012-10-03T02:18:46.430
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

过去两天我一直在尝试在新计算机（ruby 1.9.3.p0 和 rails 3.2.6）上设置我的工作环境，当我尝试运行 rails server 或 rails 控制台时，我不断收到以下错误：

```
application.rb:7:in `require': cannot load such file -- acts_as_loggable/acts_as_loggable (LoadError) 
```

这就是我的 application.rb 的样子：

```
require File.expand_path('../boot', __FILE__)

require 'acts_as_loggable/acts_as_loggable'
require 'acts_as_abusable/acts_as_abusable'
require 'acts_as_luba/acts_as_luba'

module MyProgram
  class Application < Rails::Application
    config.active_record.schema_format = :ruby

    # Custom directories with classes and modules you want to be autoloadable.
    config.autoload_paths += %W(#{config.root}/lib/)
    config.autoload_paths += %W(#{config.root}/app/models/game_mechanics)
    config.autoload_paths += Dir["#{config.root}/app/admin/"]
    config.autoload_paths += Dir["#{config.root}/app/models/"]
    config.active_record.pluralize_table_names = true
    config.action_view.sanitized_allowed_attributes = ['data-link'] 
```

我的acts_as_loggable.rb 文件位于lib/acts_as_loggable 中。我的所有其他文件都可以正常加载，除了我留在 application.rb 代码示例中的 3 个文件。

如果我硬编码路径/目录（见下文），我的应用程序可以工作。

```
require './lib/acts_as_loggable/acts_as_loggable'
require './lib/acts_as_abusable/acts_as_abusable'
require './lib/acts_as_luba/acts_as_luba' 
```

有没有人知道发生了什么以及如何让我的应用程序在没有硬编码路径的情况下工作？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T02:23:32.037

你`require`是之前的`config.autoload_path`。

# html - 创建全屏 div

> ID：12701090
> 
> 赞同：3
> 
> 时间：2012-10-03T02:18:51.817
> 
> 标签：html, css

您好我正在尝试创建一个嵌套的 div，它将具有浏览器的完整高度。

我正在使用 swipe.js，以便能够在三个全屏 div 之间滑动。如果我定义了“介绍”div的高度，我可以让它工作，但是因为我希望它在不同的屏幕尺寸之间工作，我希望用 min-height 等来做到这一点。

```
html {
    /* height: 100%; */
}

body {
    /* height: 100%; */
}

#wrapper {
    margin: 0 auto;
    min-width: 320px;
    max-width: 1200px;
    /* min-height: 100%; */
    /* height: auto !important; */
    /* height: 100%; */
}

.swipe div {
    margin:0 0px;
    padding:0px 0px;
}

#intro {
    min-height: 100%;
    height: auto !important;
    height: 100%;

    background-size: cover;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
} 
```

和html：

```
<body>

<div id="wrapper">

    <div id='slider' class='swipe'>

    <div>
            <div id="intro" style='display:block; background: url(images/background.jpg) no-repeat center center fixed;'>
            </div>

            <div id="intro2" style='display:none'>2</div>

            <div id="intro3" style='display:none'>3</div>

        </div>

    </div><!-- #slider -->

</div><!-- #wrapper -->

<script src='swipe.js'></script>
<script>var slider = new Swipe(document.getElementById('slider'));
</script>
</body> 
```

任何帮助或建议将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T04:15:33.413

看看这是否是您要实现的目标：

```
body {
   height: 100%;
    width:100%;
}

#wrapper {
    position:absolute;
    margin: 0 auto;
    min-width: 320px;
    max-width: 1200px;
    /* min-height: 100%; */
    /* height: auto !important; */
    height: 100%;
        width:100%;
}

.swipe{
    position:relative;
    height:100%;
    width:100%;
    margin:0 0px;
    padding:0px 0px;
    background-color:red;
}

#intro {
} 
```

**[jsfiddle](http://jsfiddle.net/TdDuz/3/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T03:45:56.623

按照@grc 的建议做。

```
html, body, #wrapper, #slider, #slider, div { /*You may not want to set this to 'div'*/
    margin:0;
    padding:0;
    border:0;
    width:100%;
    height:100%;
}

#wrapper {
    height:100%;
    /*margin: 0 auto;
    min-width: 320px;
    max-width: 1200px;*/ <----- LOSE THIS. This adds nothing to your needs and won't work on IE6 if you want backwards compatibility.
} 
```

重要的部分不是为您想要的元素设置 max-width|height，div 将始终扩展以占用整个可用的水平空间，因此您可能希望丢失 width 属性，除非您执行类似`div{display:inline;}`或类似的操作。无论如何，如果你想占用垂直空间，height:100%; 财产是必须的。

看看这个： http: [//jsfiddle.net/TdDuz/14/](http://jsfiddle.net/TdDuz/14/)（你在javascript中工作）

一个更完整的例子 jsfiddle.net/TdDuz/15

# c - 功能不工作，GDB 也没有发现错误

> ID：12701097
> 
> 赞同：0
> 
> 时间：2012-10-03T02:19:48.743
> 
> 标签：c, error-handling, gdb, while-loop

我有一个我以前在另一个名为 findVertexNumber 的程序中使用过的函数。

它不适用于我的新程序。

也许我一直盯着代码太久没有发现错误，但是当我比较这两个程序时，它的实现对我来说似乎相同。

希望有人能发现我的错误....

```
#include <stdio.h>
#include <stdlib.h>

int findVertexNumber(FILE *fp);

int main(int argc, char *argv[])
{
        if(argc != 2)                                                           //insure 2 arguments given, one for a.out and one for the test file
        {
                printf("Requires 2 arguemnts. Be sure to include test file location\n");        //result if request fails
                return 0;
        }

        FILE *fp;                                                               //variable declartion
        int numberVertices = 0;
        int i, j;
        fp = fopen(argv[1], "r");                                               //open the file provided

        numberVertices = findVertexNumber(fp);                                  //find the number of vertices in the graph
        fclose(fp);

        printf("Max vertex number is: %d\n", numberVertices);
}

int findVertexNumber(FILE *fp)                                                  //function finds the largest number in the file, assumed to be number of
{                                                                               //vertices
        int max = 0;
        int e1, e2;

        while(fscanf(fp, "%d %d", &e1, &e2) != EOF)                                     //continue to end of file
        {

                if(e1 > max)                                                    //check if e1 is greater than max
                {
                        max = e1;                                               //if true, update max
                }
                if(e2 > max)                                                    //check if e2 is greater than max
                {
                        max = e2;                                               //if true update max
                }

        }
        fclose(fp);                                                             //close file
        return max;                                                             //return max number, number of vertices
} 
```

它读取的文件是一个文本文件，也许它的格式有问题？

这里是：

```
1 3
1 4
2 3
2 4
5 7
5 8
6 8
6 9 
```

据我通过注释调试可以看出，该错误来自该`while`语句，并且是：

```
*** glibc detected *** ./a.out: double free or corruption (top): 0x0000000000ee3010 *** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T02:44:57.737

我看到 fclose(fp) 两次。一个在 main() 中，另一个在 findVertexNumber() 中

# php - Apache2 Web 服务器不在 HTML 页面内执行 PHP 代码

> ID：12701098
> 
> 赞同：0
> 
> 时间：2012-10-03T02:20:12.190
> 
> 标签：php, html, apache2

如果我将文件命名为 *.php 并通过 localhost 地址将其加载到 Chromium 中，我可以很好地执行 PHP 代码。

如果我尝试在名为 *.html 的文件中插入 PHP，PHP 将不再执行。

代码： http: [//pastebin.com/LgCzMs02](http://pastebin.com/LgCzMs02)

输出：http: [//imgur.com/0CO5S](http://imgur.com/0CO5S)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T02:25:57.950

除非您更新 PHP*处理程序*的 Apache 配置以包含**html**扩展名，否则扩展名必须是**php**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T02:33:50.483

包含 php 文件的程序应具有 *.php 的扩展名，除非您在加载期间将 index.html 重定向到 *.php 页面。

# c - 如果我稍后在程序中有 msgrcv 调用，printf 不会打印

> ID：12701100
> 
> 赞同：2
> 
> 时间：2012-10-03T02:20:15.157
> 
> 标签：c, posix

```
int main(int argc, char *argv[])
{
printf("Temp is");

msgrcv(externalQid, &incomingMsg, sizeof(incomingMsg)-sizeof(long), 0, 0);
} 
```

在这种情况下，printf 从不实际打印……但是，如果我没有 msgrv 调用，它确实会打印出来……这使得调试我的程序变得非常困难。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T02:25:24.283

尝试在 printf 的末尾添加一个换行符。我对“为什么”并不十分熟悉，但它解决了我不久前遇到的类似问题。

# java - 需要帮助在 java 中制作正确的动作监听器

> ID：12701102
> 
> 赞同：0
> 
> 时间：2012-10-03T02:20:39.140
> 
> 标签：java

好的，所以每个文本字段都是动作侦听器。我做了很多测试，发现添加动作监听器不是问题。问题出在下面的代码中，因为对于前四个文本字段，显示了 hello 窗口，但没有显示 ok。但在底部，会弹出 ok 窗口和 hello 窗口。我做错了什么？

```
public class handler implements ActionListener
{
    public void actionPerformed(ActionEvent event)
    {
        if (event.getSource() == text)
        {
            JOptionPane.showMessageDialog(null, "ok");
        }
        else if (event.getSource() == text1)
        {
            JOptionPane.showMessageDialog(null, "ok");
        }
        else if (event.getSource() == text2)
        {
            JOptionPane.showMessageDialog(null, "ok");
        }
        else if (event.getSource() == text3)
        {
            JOptionPane.showMessageDialog(null, "ok");
        }
        else if (event.getSource() == text4)
        {
            JOptionPane.showMessageDialog(null, "ok");
        }
        JOptionPane.showMessageDialog(null, "hello");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T02:54:15.403

您遇到的问题是您正在进行浅层比较：

```
event.getSource() == textX 
```

因此，您永远不会满足 if-else 中的任何条件，也永远不会看到 text1 ... text4 的“ok”对话框。

看起来您正在尝试对多个文本字段使用单个 ActionListener，然后根据事件源（发生事件的文本字段）区分行为。

您可能需要考虑为每个文本字段创建一个 ActionListener 实现，而不是这样做。

我通常将我的 ActionListeners 创建为匿名类，因此我可以自定义我希望在事件发生时为特定字段发生的事情，但我不必在我的应用程序中增加类。

# jquery - jQuery 交叉幻灯片

> ID：12701108
> 
> 赞同：1
> 
> 时间：2012-10-03T02:21:33.913
> 
> 标签：jquery

我正在尝试在此幻灯片放映中获得交叉幻灯片效果，但无法正常工作。问题是，我想要一个 div 背景图像的过渡。希望有人可以帮助我。（HTML 和 CSS 工作正常，因为通过动画工作淡入/淡出）

```
<script language="JavaScript" type="text/javascript">
$(document).ready(function(){

var imgArr = new Array( // relative paths of images
'images/slide3.jpg',
'images/slide4.jpg',
'images/slide3.jpg',
'images/slide4.jpg'
 );

var preloadArr = new Array();
var i;

/* preload images */
for(i=0; i < imgArr.length; i++){
preloadArr[i] = new Image();
preloadArr[i].src = imgArr[i];
}

var currImg = 1;
var intID = setInterval(changeImg, 6000);

/* image rotator */
function changeImg(){
$('#parallax-background').animate({opacity: 0}, 1000, function(){
$(this).css('background','url(' + preloadArr[currImg++%preloadArr.length].src +') 50% 0 no-repeat fixed');
}).animate({opacity: 1}, 1000);
}

});
</script> 
```

# google-drive-api - Google Docs ID 是否有可能被重复使用？

> ID：12701113
> 
> 赞同：1
> 
> 时间：2012-10-03T02:22:00.600
> 
> 标签：google-drive-api, google-docs

我知道这个 ID 在链接上是唯一的。

[Google Docs API：文档资源 ID 是否会更改？](https://stackoverflow.com/questions/11274319/google-docs-api-do-document-resource-ids-ever-change)

另外我想知道的是这个ID将来是否有可能被重用。

（例子）

*   FolderA (ID is A) 一个用户创建的已被删除。
*   其他用户创建FolderB。FolderB的ID有可能是A吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T03:08:11.717

不，ID 是唯一且永久的，因此它们永远不会被重复使用。

# java - 这种演员表是否意味着多态性设计被破坏？

> ID：12701114
> 
> 赞同：2
> 
> 时间：2012-10-03T02:22:05.920
> 
> 标签：java, casting, polymorphism

我有一个定义“模块”的接口：

```
public interface AIMModule {
    // Details not relevant
} 
```

另一个为这些模块定义了一个容器：

```
public interface AIMModuleContainer {
    public void addModule( AIMModule module );  
} 
```

这些“模块”实际上是 GUI 构造，因此我的容器的实现扩展了我正在使用的 GUI 工具包的 HLayout 小部件。它包含一个名为 moduleStack 的 SectionStack。SectionStack.addSection( SectionStackSection ) 将一个节堆栈添加到 GUI 中，因此我的“模块”容器抽象如下所示：

```
public class UserContainer extends HLayout implements AIMModuleContainer {

@Override
public void addModule( AIMModule module )
{
    moduleStack.addSection( (SectionStackSection)module );
}

} 
```

因此，模块实现扩展了一个名为 SectionStackSection 的小部件：

```
public class AccountInformationModule extends SectionStackSection implements AIMModule {
    // Details not relevant
} 
```

问题是在调用 addSection() 的 addModule() 中进行转换。AIMModuleContainer 包含 AIMModule，因此 addModule() 需要获取 AIMModule。但是在实现层面，moduleStack小部件插入了一个SectionStackSection，所以接口的“模块”需要根据实现进行强制转换。

这行得通，但感觉不对。如果有人通过扩展 SectionStackSection 以外的东西来实现我的 AIMModule 接口并将该 AIMModule 传递给 addModule()，那么该转换将中断。这似乎不对。

这是坏了吗？如果是，修复它的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T02:27:46.373

这被破坏了，因为您从不检查传递的参数是否是您期望的类型，即使那样，它也应该只接受您期望的类型。但这是不可能的，因为您的模块容器可以包含任何类型的模块。

每个模块容器是否只处理一种类型？如果是这样，请使用泛型。如果不是，这只是一个糟糕的实现，因为你认为它总是不是它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T11:07:08.533

根据您提供的代码，您似乎需要一个`SectionStackContainer`应该由`UserContainer`

```
public interface SectionStackContainer {
    public void addSectionStack( SectionStack sectionStack );  
}

public class UserContainer extends HLayout implements SectionStackContainer {

    @Override
    public void addSectionStack( SectionStack sectionStack )
    {
        moduleStack.addSection( sectionStack );
    }

} 
```

# c - C中多次包含头文件错误

> ID：12701120
> 
> 赞同：0
> 
> 时间：2012-10-03T02:23:09.123
> 
> 标签：c, conditional-compilation

所以我有一个头文件，比如说“header.h”，它的保护如下：

```
#ifndef __HEADER1_H
#define __HEADER1_H
//type and function def 
typedef struct
{
  float r; //process noise
  float k; //process gain
}state_t;

int get_state(state_t* state, float b);

#endif 
```

现在我有另外两个标题，我定义如下：

```
 #ifdef __HEADER2_H
 #include "header.h"
//function def
 #endif 
```

第二个标题：

```
#ifdef __HEADER3_H
//function
//the reason it is done this way is for cnditional compiling such that if the caller  

//defines __HEADER3_H t this file won't be included.
#include "header.h"
#endif 
```

现在我怀疑编译器抱怨在 header2 和 header3 的源实现中未检测到 header.h 中定义的类型和函数。所以我也在源文件中包含了 header.h 。现在链接器抱怨在 header.h 中定义的函数是多重定义的。我的理解是，由于 header.h 受 ifndef 保护，它只会被包含一次，所以我看不到问题所在。这是我得到的错误：

```
Symbol get_state multiply defined(by kalman.o and dsp.o) 
```

我有没有可能做一些不寻常的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T02:25:22.630

```
#ifndef __HEADER1_H
#define __HEADER_H 
```

问题是您的警卫 ( `__HEADER_H`) 与您正在检查的 ( `__HEADER1_H`) 不同。使这两个值相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T02:29:47.553

头文件的典型“守卫”是：

```
myheader.h:

#ifndef _MYHEADER
#define _MYHEADER
<do stuff>
#endif 
```

*可选地*，其中包含 myheader.h，您可以执行以下操作：

```
#ifndef _MYHEADER
#include "myheader.h"
#endif 
```

这是*可选*的，基本上只是为了提高编译性能。

# scala - 可以使用mailboxSize 来计算scala 演员收到的消息数吗？

> ID：12701121
> 
> 赞同：0
> 
> 时间：2012-10-03T02:23:20.070
> 
> 标签：scala, scala-2.8, scala-collections

我有一个问题，我必须计算几个 scala 演员收到的消息数量（我使用所有演员作为同一个演员类的实例），并且还分别维护每个演员的计数。演员相互发送消息，一旦演员收到一定数量的消息，我应该停止演员之间的通信。有什么方法可以在scala中做到这一点？

# c# - 如果类型是接口，VS调试器中有没有办法跳转到实现方法的定义？

> ID：12701123
> 
> 赞同：1
> 
> 时间：2012-10-03T02:24:02.270
> 
> 标签：c#, visual-studio-2010, visual-studio-debugging

> **可能重复：**
> [Visual Studio：有没有办法导航到接口后面的方法的实际实现？](https://stackoverflow.com/questions/4662784/visual-studio-is-there-a-way-to-navigate-to-real-implementation-of-method-behin)

在 VS 中调试时，我经常使用 F12/Goto 定义来获取代码，而不是实际进入它。

当我处理一个具体的类时，这很好，但是当我处理一个接口时，我最终不会跳转到方法定义（在我看来这是运行的代码），而是接口中的方法签名。

有没有办法告诉调试器让我跳转到方法的实际实现，而不是接口中方法签名的定义？我认为调试器应该在运行时知道这一点，对吧？

# c++ - 在 c++ 对象上使用 extern 时未定义的引用，但不是整数类型

> ID：12701130
> 
> 赞同：3
> 
> 时间：2012-10-03T02:24:53.127
> 
> 标签：c++, gcc

尝试在 c++ 对象上使用 extern 时出现未定义的引用错误。整数类型似乎不会发生这种情况。我错过了什么？！下面的代码复制了这个问题：

文件 1.cpp：

```
#include <string>

const std::string s("test");
int i = 99;

int main()
{
        extern void Test();
        Test();
} 
```

文件 2.cpp：

```
#include <iostream>
#include <string>

extern const std::string s;
extern int i;

void Test()
{
        std::cout << s << std::endl;
        std::cout << i << std::endl;
} 
```

如果我注释掉's' std::string 变量的用法，链接错误就会消失。

SO上还有其他类似的问题，但它们似乎都与没有定义变量的人有关，我就是！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T02:53:02.787

它是`const`on `std::string`，它提供`s`内部链接。引用自[3.5 程序和链接]：3：

> 具有命名空间范围 (3.3.6) 的名称如果是
> 
> **—显式声明为 const**或 constexpr 且既未显式声明 extern 也未先前声明具有外部链接的变量；或者

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T02:37:27.243

如果你删除 const，它在 vc++ 中工作，如果你同时定义它们 extern const，它也工作。

```
// file1.cpp
extern const std::string s("test");
extern const int i = 99;

// file2.cpp
extern const std::string s;
extern const int i; 
```

如果从 file1.cpp 中删除任何“extern”，它就无法编译。如果变量定义为 const，您可以从 file1.cpp 中删除“extern”。

# python - PyGTK gtk.gdk.Pixbuf.copy_area 错误地复制 alpha 位

> ID：12701134
> 
> 赞同：0
> 
> 时间：2012-10-03T02:25:18.587
> 
> 标签：python, transparency, pygtk, gdkpixbuf, pixbuf

这是一张图片，说明了我遇到的问题：

![](../Images/f10319e38421ae386a206d3b7bccf189.png)

此图片是使用以下内容创建的：

```
cube.copy_area(0, 0, cube.get_width(), cube.get_height(), self.canvas, o2i[0], o2i[1]) 
```

where`cube`和`canvas`are 的类型`gtk.gdk.Pixbuf`。 `o2i`只是一个元组，包含一个等距放置函数的结果，该函数向后拉到前面。

我希望很明显，我遇到的问题是，在将`cube`具有 alpha 通道的 复制到 时`canvas`，该`copy_area()`函数还将目标 Pixbuf 中的位设置为 0 alpha。如果真的只是以偏移量将一个缓冲区流复制到另一个缓冲区流中，这是有道理`copy_area()`的，但这显然不是我的意图。有没有办法将一个 Pixbuf 的内容复制到另一个中，使用源 Pixbuf 的 alpha 通道作为复制蒙版？

[作为参考，[这里是 PyGTK](http://www.pygtk.org/docs/pygtk/class-gdkpixbuf.html#method-gdkpixbuf--copy-area)的`copy_area()`.]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-01T23:58:54.083

我认为你想要的是复合（）。使用起来有点不方便，因为它以不同的方式处理坐标，但是这样的事情应该使它完全像 copy_area 一样工作：

```
def copy_area_composite(source_buf, source_x, source_y, width, height, dest_buf, dest_x, dest_y):
    source_buf.composite(dest_buf, dest_x, dest_y, width, height, dest_x-src_x, dest_y-rect_y, 1, 1, GdkPixbuf.InterpType.NEAREST, 255) 
```

# ruby-on-rails - 在我的表单隐藏字段中发送数据

> ID：12701142
> 
> 赞同：1
> 
> 时间：2012-10-03T02:26:02.940
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我正在尝试添加 jquery 上传但我需要将参数传递到我的表单中

这里的表格

```
<%= form_for Photo.new do |f|%>
  <%= f.label :title %><br />
  <%= f.text_area :title, :rows => 3, :value => "Add a photo", :onclick=>"this.value='';" %>
  <%= f.file_field :photo, multiple: true %>
  <%= f.hidden_field('event_id', params[:event_id]) %>
  <%= f.submit "Add Picture" %>
<% end %> 
```

但这不起作用，问题是我有一个链接跟随 localhost/events/16/photos/useradd

其中 16 是 event_id 参数。我怎样才能把它放在我的隐藏字段中以便之后发送？

更新

```
NoMethodError in Photos#useradd
Showing /home/jean/rail/voix/app/views/photos/useradd.html.erb where line #13 raised:
undefined method `merge' for "16":String 
```

错误和 16 是我的 event_id

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T02:55:14.877

好的，在这里在黑暗中拍摄：

尝试

```
<%= f.hidden_field 'event_id', :value => params[:event_id] %> 
```

**编辑 - 为什么它起作用：**

hidden_​​field 方法具有以下签名：`hidden_field(object_name, method, options = {})` [请参阅有关 hidden_​​field 的文档](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-hidden_field)

您已将值 16 作为要由 hidden_​​field 调用的方法传递，但这是行不通的。

hidden_​​field 的第三个参数是一个选项哈希。设置该哈希的“值”字段将设置助手生成的输入标签的值，从而有效地将“16”设置为该表单字段的值。:)

最好的祝福

# sql-server - 备份表到xml或csv文件，内容为长文本

> ID：12701146
> 
> 赞同：0
> 
> 时间：2012-10-03T02:26:20.040
> 
> 标签：sql-server, xml

我有一个表，其中包含要导出到 xml 文件的内容（如博客文章，相当长的文本）。

所以我想要它：

```
<table>
  <column1>1231</column1>
  <column2>January 1, 2001</column2>
  <column3>some very long text will all types of characters in it</column3>
</table> 
```

有没有内置的方法来做到这一点？

基本上每一列都有自己的元素。

理想情况下，内容应该是 CDATA，因为内容可能包含任何类型的字符。

我有 sql server 2008 express。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T02:30:01.343

您可以使用`FOR XML`SQL 构造来执行此操作。请阅读[这里](http://msdn.microsoft.com/en-us/library/ms178107.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T02:36:43.443

从 SQL Server 2005 开始，[FOR XML](http://msdn.microsoft.com/en-us/library/ms188273.aspx)子句提供了一种将 SQL 查询结果转换为 XML 的方法。

例如，考虑一个包含 Blgd、Suit、SQFT、PDate 列的表格。

```
SELECT * FROM building FOR XML AUTO 
```

会将表的内容转换为以下 XML：

```
<building Bldg="1" SUit="1" SQFT="1000" PDate="2012-09-24T00:00:00" />
<building Bldg="1" SUit="1" SQFT="1500" PDate="2011-12-31T00:00:00" /> 
```

如果您希望列成为元素，那么

```
SELECT * FROM building FOR XML AUTO, ELEMENTS 
```

会将内容转换为以下 XML：

```
<building>
  <Bldg>1</Bldg>
  <SUit>1</SUit>
  <SQFT>1000</SQFT>
  <PDate>2012-09-24T00:00:00</PDate>
</building>
<building>
  <Bldg>1</Bldg>
  <SUit>1</SUit>
  <SQFT>1500</SQFT>
  <PDate>2011-12-31T00:00:00</PDate>
</building> 
```

如果要将文本字段建模为`CDATA`部分，则应使用该`FOR XML EXPLICIT`子句并按照[此处的指南](http://msdn.microsoft.com/en-us/library/ms189068.aspx)定义 XML 模式。

如果上面的 Building 表有一个 text_col 类型的列`TEXT`，应该在生成的 XML 中建模为 CDATA 部分，那么`SELECT`查询将如下所示：

```
SELECT 
    1 as Tag,
    NULL as Parent,
    Bldg AS [Building!1!Bldg!ELEMENT],
    text_col AS [Building!1!!CDATA]
FROM Building 
WHERE text_col IS NOT NULL
FOR XML EXPLICIT 
```

结果如下：

```
<Building><Bldg>1</Bldg><![CDATA[From SQL Server 2005, the FOR XML clause provides a way to convert the results of an SQL query to XML.

E.g. Consider a table building with Blgd, Suit, SQFT, PDate columns.

SELECT * FROM building FOR XML AUTO

will convert the contents of table to the following XML:

<building Bldg="1" SUit="1" SQFT="1000" PDate="2012-09-24T00:00:00" />
<building Bldg="1" SUit="1" SQFT="1500" PDate="2011-12-31T00:00:00" />
If you want the columns to be elements, then

SELECT * FROM building FOR XML AUTO, ELEMENTS
would convert the contents to following XML:

<building>
  <Bldg>1</Bldg>
  <SUit>1</SUit>
  <SQFT>1000</SQFT>
  <PDate>2012-09-24T00:00:00</PDate>
</building>
<building>
  <Bldg>1</Bldg>
  <SUit>1</SUit>
  <SQFT>1500</SQFT>
  <PDate>2011-12-31T00:00:00</PDate>
</building>]]></Building> 
```

# vb.net - 在 .NET 中更新 XML 标记属性值

> ID：12701148
> 
> 赞同：1
> 
> 时间：2012-10-03T02:26:44.220
> 
> 标签：vb.net

我有一个这样的xml字符串

```
<root>
Am trying <br id="9"/>to reorder the <br id="5"/>break 
lines <br id="10"/> attributes value
</root> 
```

将XML BR标签ID属性的属性值更改为这样的顺序的任何方法

```
<root>
Am trying <br id="1"/>to reorder the <br id="2"/>break 
lines <br id="3"/> attributes value
</root> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T03:58:54.277

这是一个使用[LINQ TO XML的示例](http://msdn.microsoft.com/en-us/library/bb387098.aspx)

```
Dim doc as XElement = <root>
Am trying <br id="9"/>to reorder the <br id="5"/>break 
lines <br id="10"/> attributes value
</root>

Dim index as Integer = 0

For Each br In doc.<br>
    index += 1
    br.@id = index
Next 
```

这导致以下输出

```
<root>
Am trying <br id="1" />to reorder the <br id="2" />break 
lines <br id="3" /> attributes value
</root> 
```

此外，这是一个使用[LAMBDA](http://msdn.microsoft.com/en-us/library/bb531253%28VS.90%29.aspx)表达式的示例。

```
doc.<br>.ToList().ForEach(Sub(br) 
                index += 1 
                br.@id = index 
              End Sub) 
```

# ruby-on-rails - 巫术 - signed_in_user

> ID：12701149
> 
> 赞同：0
> 
> 时间：2012-10-03T02:26:54.390
> 
> 标签：ruby-on-rails, sorcery

我可以得到

```
<% if current_user %> 
```

去工作。但是我希望能够使用像

```
<% if current_user=(user) %> 
```

或类似的东西。我怎么能用巫术做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T04:25:11.073

您正在尝试在需要比较运算符的地方使用赋值运算符。大概应该是这样的：

```
<%= if @user == current_user %>
  <!-- Do stuff -->
<% end %> 
```

请记住，您需要`@user`通过在控制器操作中分配实例变量来访问它：

```
class UsersController < ApplicationController
  def show
    @user = User.find(params[:id])
  end
end 
```

# spring - 使用 Forward 的 Spring Security 错误页面

> ID：12701154
> 
> 赞同：3
> 
> 时间：2012-10-03T02:28:11.377
> 
> 标签：spring, security

我想在身份验证拒绝时显示一个自定义错误页面（我正在使用预身份验证的 secnario），并且还想从 Spring Security 3.0.X 访问拒绝

了解我们可以使用以下内容来执行此操作：

```
<beans:bean id="authenticationEntryPoint" class="org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint">
    <beans:property name="loginFormUrl" value="/error.jsp"/>
</beans:bean>

<beans:bean id="accessDeniedHandler" class="org.springframework.security.web.access.AccessDeniedHandlerImpl">
    <beans:property name="errorPage" value="/error.jsp"/>
</beans:bean> 
```

但是这样做会导致重定向而不是转发到错误页面。无论如何执行转发到错误页面（以便我们可以在请求中设置一些属性）

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T09:10:31.680

在我的`security-context.xml`, 对于身份验证失败，我喜欢这样（注意`authentication-failure-url`属性）：

```
 <security:form-login login-page="/auth/login"
        authentication-failure-url="/auth/login?error=true"
        default-target-url="/mvc/home"
        always-use-default-target="true" /> 
```

对于拒绝访问，我使用这个：

```
 <security:access-denied-handler error-page="/auth/access-denied"/> 
```

里面的两个标签`<security:http use-expressions="true">`。对我来说就像一个魅力，当 Spring 提供了如此易于使用的好标签时，我不知道你为什么要尝试以你正在做的方式配置它。

不知道能不能回答你的问题，希望对你有帮助。

**编辑：**

使用上面提供的配置，意味着您在后台使用默认的身份验证失败处理程序 ( [SimpleUrlAuthenticationFailureHandler](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/web/authentication/SimpleUrlAuthenticationFailureHandler.html) )。您可以通过更改属性`forwardToDestination`值来更改默认行为（在生成失败的身份验证时默认执行重定向）。这就是 SimpleUrlAuthenticationFailureHandler 所做的：

```
/**
 * Performs the redirect or forward to the {@code defaultFailureUrl} if set, otherwise returns a 401 error code.
 * <p>
 * If redirecting or forwarding, {@code saveException} will be called to cache the exception for use in
 * the target view.
 */
public void onAuthenticationFailure(HttpServletRequest request, HttpServletResponse response,
        AuthenticationException exception) throws IOException, ServletException {

    if (defaultFailureUrl == null) {
        logger.debug("No failure URL set, sending 401 Unauthorized error");

        response.sendError(HttpServletResponse.SC_UNAUTHORIZED, "Authentication Failed: " + exception.getMessage());
    } else {
        saveException(request, exception);

        if (forwardToDestination) {
            logger.debug("Forwarding to " + defaultFailureUrl);

            request.getRequestDispatcher(defaultFailureUrl).forward(request, response);
        } else {
            logger.debug("Redirecting to " + defaultFailureUrl);
            redirectStrategy.sendRedirect(request, response, defaultFailureUrl);
        }
    }
} 
```

所以我想我你`SimpleUrlAuthenticationFailureHandler`在你的声明中声明并使用它应该工作`security-context.xml`的方法设置提到的属性值。`setUseForward(boolean forwardToDestination)`可能是这样的：

```
<bean id="simpleUrlAuthenticationFailureHandler" class="org.springframework.security.web.authentication.SimpleUrlAuthenticationFailureHandler">
    <property name="useForward" value="true">
</bean> 
```

接着：

```
 <security:form-login login-page="/auth/login"
        authentication-failure-handler-ref="simpleUrlAuthenticationFailureHandler"
        default-target-url="/mvc/home"
        always-use-default-target="true" /> 
```

祝你好运。

# jquery - 无法使用 jquery 选择循环浏览图片库

> ID：12701156
> 
> 赞同：1
> 
> 时间：2012-10-03T02:29:17.837
> 
> 标签：jquery

jQuery中的菜鸟。

我正在尝试循环浏览图片库，目的是让图片淡入淡出。

这是我的[JSFiddle](http://jsfiddle.net/78Fky/)
通过单击`#gallery`每个图像fadeTo(arg1) 然后fadeTo(args2)。
但我希望他们一个接一个。
也许`delay`应该将 a 添加到链中？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T03:00:30.223

jQuery 动画（就像 javascript 上的大多数东西一样）是异步的，这意味着函数调用在动作完成之前返回。从某种意义上说，您可以将`$('img').each`循环的每次迭代视为如下：

*   jQuery 调用你的函数并`this`绑定到一个`img`元素
*   `fade`你的函数调用`$(this)`
*   然后 jQuery 要求浏览器*安排*动画的运行
*   你的函数返回

然后，*在*所有迭代结束后，浏览器将开始在屏幕上同时播放动画（因为所有这些都已安排好）。

要创建顺序行为，您可以给`fade`函数一个回调：

```
$('#gallery').click(function(evt) {
  var remainingImages = $("img").toArray();

  var processNext = function() {
    var image = remainingImages.shift();
    if(!image) return;

    // Add the next iteration as a callback to the animation
    $(image).fadeTo(500, .3).fadeTo(250, 1, processNext);
  };

  processNext();
}); 
```

然后，不是一次安排所有动画，而是如下所示：

*   所有当前`img`元素都存储在`remainingImages`数组中
*   调用该`processNext`函数，从数组中删除第一个图像
*   该函数调用`fade`，`$(image)`提供一个函数（恰好是它自己），应该在动画完成*后调用*
*   jQuery 用浏览器安排动画，然后告诉它执行函数
*   动画结束后，执行下一次迭代

[更新了 jsFiddle](http://jsfiddle.net/78Fky/2/)

# eclipse - eclipse 4 应用程序错误

> ID：12701164
> 
> 赞同：2
> 
> 时间：2012-10-03T02:31:09.690
> 
> 标签：eclipse

我正在尝试学习 eclipse 4 应用程序开发。按照此链接 [eclipse 4 rcp 教程](http://www.vogella.com/articles/Eclipse4RCP/article.html)中描述的步骤，我创建了一个 eclipse 4 应用程序，但是当我运行它时，我在控制台中收到这些错误消息：

```
!SESSION 2012-10-03 10:22:00.511 -----------------------------------------------
eclipse.buildId=unknown
java.version=1.6.0_31
java.vendor=Sun Microsystems Inc.
BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=zh_CN
Framework arguments:  -product test.product
Command-line arguments:  -product test.product -data D:\e4rcp_workspace/../runtime-test.product -dev file:D:/e4rcp_workspace/.metadata/.plugins/org.eclipse.pde.core/test.product/dev.properties -os win32 -ws win32 -arch x86 -consoleLog

!ENTRY org.eclipse.equinox.app 0 0 2012-10-03 10:22:01.552
!MESSAGE Product test.product could not be found.

!ENTRY org.eclipse.osgi 2 0 2012-10-03 10:22:01.579
!MESSAGE One or more bundles are not resolved because the following root constraints are not resolved:
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-10-03 10:22:01.579
!MESSAGE Bundle initial@reference:file:plugins/org.eclipse.e4.ui.css.core_0.10.2.v20120806-171245.jar was not resolved.
!SUBENTRY 2 org.eclipse.e4.ui.css.core 2 0 2012-10-03 10:22:01.579
!MESSAGE Missing imported package org.w3c.dom.css_2.0.0.
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-10-03 10:22:01.579
!MESSAGE Bundle initial@reference:file:plugins/org.eclipse.e4.ui.css.swt.theme_0.9.3.v20120806-170624.jar was not resolved.
!SUBENTRY 2 org.eclipse.e4.ui.css.swt.theme 2 0 2012-10-03 10:22:01.580
!MESSAGE Missing imported package org.w3c.dom.css_2.0.0.
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-10-03 10:22:01.580
!MESSAGE Bundle initial@reference:file:plugins/org.eclipse.e4.ui.workbench.swt_0.10.2.v20120802-184737.jar was not resolved.
!SUBENTRY 2 org.eclipse.e4.ui.workbench.swt 2 0 2012-10-03 10:22:01.580
!MESSAGE Missing imported package org.w3c.dom.css_2.0.0.
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-10-03 10:22:01.580
!MESSAGE Bundle initial@reference:file:plugins/org.eclipse.e4.ui.workbench.renderers.swt_0.10.2.v20120814-175454.jar was not resolved.
!SUBENTRY 2 org.eclipse.e4.ui.workbench.renderers.swt 2 0 2012-10-03 10:22:01.581
!MESSAGE Missing imported package org.w3c.dom.css_2.0.0.
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-10-03 10:22:01.581
!MESSAGE Bundle initial@reference:file:plugins/org.eclipse.e4.ui.services_0.10.2.v20120726-172631.jar was not resolved.
!SUBENTRY 2 org.eclipse.e4.ui.services 2 0 2012-10-03 10:22:01.581
!MESSAGE Missing imported package org.w3c.dom.css_2.0.0.
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-10-03 10:22:01.581
!MESSAGE Bundle initial@reference:file:plugins/org.eclipse.e4.ui.css.swt_0.10.2.v20120821-165957.jar was not resolved.
!SUBENTRY 2 org.eclipse.e4.ui.css.swt 2 0 2012-10-03 10:22:01.581
!MESSAGE Missing imported package org.w3c.dom.css_2.0.0.

!ENTRY org.eclipse.osgi 2 0 2012-10-03 10:22:01.590
!MESSAGE The following is a complete list of bundles which are not resolved, see the prior log entry for the root cause if it exists:
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-10-03 10:22:01.590
!MESSAGE Bundle org.eclipse.e4.ui.css.swt_0.10.2.v20120821-165957 [2] was not resolved.
!SUBENTRY 2 org.eclipse.e4.ui.css.swt 2 0 2012-10-03 10:22:01.590
!MESSAGE Missing required bundle org.eclipse.e4.ui.css.core_0.9.0.
!SUBENTRY 2 org.eclipse.e4.ui.css.swt 2 0 2012-10-03 10:22:01.590
!MESSAGE Missing imported package org.w3c.dom.css_2.0.0.
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-10-03 10:22:01.591
!MESSAGE Bundle test_1.0.0.qualifier [4] was not resolved.
!SUBENTRY 2 test 2 0 2012-10-03 10:22:01.591
!MESSAGE Missing required bundle org.eclipse.e4.ui.services_0.10.2.
!SUBENTRY 2 test 2 0 2012-10-03 10:22:01.591
!MESSAGE Missing required bundle org.eclipse.e4.ui.workbench_0.10.3.
!SUBENTRY 2 test 2 0 2012-10-03 10:22:01.591
!MESSAGE Missing required bundle org.eclipse.e4.ui.workbench.swt_0.10.2.
!SUBENTRY 2 test 2 0 2012-10-03 10:22:01.591
!MESSAGE Missing required bundle org.eclipse.e4.ui.css.core_0.10.2.
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-10-03 10:22:01.592
!MESSAGE Bundle org.eclipse.e4.ui.workbench.renderers.swt_0.10.2.v20120814-175454 [25] was not resolved.
!SUBENTRY 2 org.eclipse.e4.ui.workbench.renderers.swt 2 0 2012-10-03 10:22:01.592
!MESSAGE Missing required bundle org.eclipse.e4.ui.workbench_0.9.0.
!SUBENTRY 2 org.eclipse.e4.ui.workbench.renderers.swt 2 0 2012-10-03 10:22:01.592
!MESSAGE Missing required bundle org.eclipse.e4.ui.services_0.9.0.
!SUBENTRY 2 org.eclipse.e4.ui.workbench.renderers.swt 2 0 2012-10-03 10:22:01.592
!MESSAGE Missing required bundle org.eclipse.e4.ui.workbench.swt_0.9.0.
!SUBENTRY 2 org.eclipse.e4.ui.workbench.renderers.swt 2 0 2012-10-03 10:22:01.592
!MESSAGE Missing required bundle org.eclipse.e4.ui.css.swt.theme_0.9.0.
!SUBENTRY 2 org.eclipse.e4.ui.workbench.renderers.swt 2 0 2012-10-03 10:22:01.592
!MESSAGE Missing required bundle org.eclipse.e4.ui.css.core_0.9.0.
!SUBENTRY 2 org.eclipse.e4.ui.workbench.renderers.swt 2 0 2012-10-03 10:22:01.593
!MESSAGE Missing imported package org.w3c.dom.css_2.0.0.
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-10-03 10:22:01.593
!MESSAGE Bundle org.eclipse.e4.ui.workbench.swt_0.10.2.v20120802-184737 [32] was not resolved.
!SUBENTRY 2 org.eclipse.e4.ui.workbench.swt 2 0 2012-10-03 10:22:01.593
!MESSAGE Missing required bundle org.eclipse.e4.ui.workbench_0.10.0.
!SUBENTRY 2 org.eclipse.e4.ui.workbench.swt 2 0 2012-10-03 10:22:01.593
!MESSAGE Missing required bundle org.eclipse.e4.ui.services_0.1.0.
!SUBENTRY 2 org.eclipse.e4.ui.workbench.swt 2 0 2012-10-03 10:22:01.593
!MESSAGE Missing required bundle org.eclipse.e4.ui.css.core_0.9.0.
!SUBENTRY 2 org.eclipse.e4.ui.workbench.swt 2 0 2012-10-03 10:22:01.594
!MESSAGE Missing required bundle org.eclipse.e4.ui.css.swt_0.9.0.
!SUBENTRY 2 org.eclipse.e4.ui.workbench.swt 2 0 2012-10-03 10:22:01.594
!MESSAGE Missing required bundle org.eclipse.e4.ui.css.swt.theme_0.9.0.
!SUBENTRY 2 org.eclipse.e4.ui.workbench.swt 2 0 2012-10-03 10:22:01.594
!MESSAGE Missing imported package org.w3c.dom.css_2.0.0.
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-10-03 10:22:01.594
!MESSAGE Bundle org.eclipse.e4.ui.workbench_0.10.3.v20120822-140642 [33] was not resolved.
!SUBENTRY 2 org.eclipse.e4.ui.workbench 2 0 2012-10-03 10:22:01.594
!MESSAGE Missing required bundle org.eclipse.e4.ui.services_0.9.0.
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-10-03 10:22:01.595
!MESSAGE Bundle org.eclipse.e4.ui.services_0.10.2.v20120726-172631 [37] was not resolved.
!SUBENTRY 2 org.eclipse.e4.ui.services 2 0 2012-10-03 10:22:01.595
!MESSAGE Missing imported package org.w3c.dom.css_2.0.0.
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-10-03 10:22:01.595
!MESSAGE Bundle org.eclipse.e4.ui.css.swt.theme_0.9.3.v20120806-170624 [52] was not resolved.
!SUBENTRY 2 org.eclipse.e4.ui.css.swt.theme 2 0 2012-10-03 10:22:01.595
!MESSAGE Missing required bundle org.eclipse.e4.ui.css.swt_0.9.1.
!SUBENTRY 2 org.eclipse.e4.ui.css.swt.theme 2 0 2012-10-03 10:22:01.595
!MESSAGE Missing required bundle org.eclipse.e4.ui.css.core_0.9.0.
!SUBENTRY 2 org.eclipse.e4.ui.css.swt.theme 2 0 2012-10-03 10:22:01.596
!MESSAGE Missing imported package org.w3c.dom.css_2.0.0.
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-10-03 10:22:01.596
!MESSAGE Bundle org.eclipse.e4.ui.css.core_0.10.2.v20120806-171245 [57] was not resolved.
!SUBENTRY 2 org.eclipse.e4.ui.css.core 2 0 2012-10-03 10:22:01.596
!MESSAGE Missing imported package org.w3c.dom.css_2.0.0.

!ENTRY org.eclipse.osgi 2 0 2012-10-03 10:22:01.611
!MESSAGE One or more bundles are not resolved because the following root constraints are not resolved:
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-10-03 10:22:01.611
!MESSAGE Bundle initial@reference:file:plugins/org.eclipse.e4.ui.css.core_0.10.2.v20120806-171245.jar was not resolved.
!SUBENTRY 2 org.eclipse.e4.ui.css.core 2 0 2012-10-03 10:22:01.611
!MESSAGE Missing imported package org.w3c.dom.css_2.0.0.
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-10-03 10:22:01.611
!MESSAGE Bundle initial@reference:file:plugins/org.eclipse.e4.ui.css.swt.theme_0.9.3.v20120806-170624.jar was not resolved.
!SUBENTRY 2 org.eclipse.e4.ui.css.swt.theme 2 0 2012-10-03 10:22:01.612
!MESSAGE Missing imported package org.w3c.dom.css_2.0.0.
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-10-03 10:22:01.612
!MESSAGE Bundle initial@reference:file:plugins/org.eclipse.e4.ui.workbench.swt_0.10.2.v20120802-184737.jar was not resolved.
!SUBENTRY 2 org.eclipse.e4.ui.workbench.swt 2 0 2012-10-03 10:22:01.612
!MESSAGE Missing imported package org.w3c.dom.css_2.0.0.
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-10-03 10:22:01.612
!MESSAGE Bundle initial@reference:file:plugins/org.eclipse.e4.ui.workbench.renderers.swt_0.10.2.v20120814-175454.jar was not resolved.
!SUBENTRY 2 org.eclipse.e4.ui.workbench.renderers.swt 2 0 2012-10-03 10:22:01.612
!MESSAGE Missing imported package org.w3c.dom.css_2.0.0.
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-10-03 10:22:01.613
!MESSAGE Bundle initial@reference:file:plugins/org.eclipse.e4.ui.services_0.10.2.v20120726-172631.jar was not resolved.
!SUBENTRY 2 org.eclipse.e4.ui.services 2 0 2012-10-03 10:22:01.613
!MESSAGE Missing imported package org.w3c.dom.css_2.0.0.
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-10-03 10:22:01.613
!MESSAGE Bundle initial@reference:file:plugins/org.eclipse.e4.ui.css.swt_0.10.2.v20120821-165957.jar was not resolved.
!SUBENTRY 2 org.eclipse.e4.ui.css.swt 2 0 2012-10-03 10:22:01.613
!MESSAGE Missing imported package org.w3c.dom.css_2.0.0.

!ENTRY org.eclipse.osgi 2 0 2012-10-03 10:22:01.621
!MESSAGE The following is a complete list of bundles which are not resolved, see the prior log entry for the root cause if it exists:
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-10-03 10:22:01.621
!MESSAGE Bundle org.eclipse.e4.ui.css.swt_0.10.2.v20120821-165957 [2] was not resolved.
!SUBENTRY 2 org.eclipse.e4.ui.css.swt 2 0 2012-10-03 10:22:01.621
!MESSAGE Missing required bundle org.eclipse.e4.ui.css.core_0.9.0.
!SUBENTRY 2 org.eclipse.e4.ui.css.swt 2 0 2012-10-03 10:22:01.621
!MESSAGE Missing imported package org.w3c.dom.css_2.0.0.
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-10-03 10:22:01.622
!MESSAGE Bundle test_1.0.0.qualifier [4] was not resolved.
!SUBENTRY 2 test 2 0 2012-10-03 10:22:01.622
!MESSAGE Missing required bundle org.eclipse.e4.ui.services_0.10.2.
!SUBENTRY 2 test 2 0 2012-10-03 10:22:01.622
!MESSAGE Missing required bundle org.eclipse.e4.ui.workbench_0.10.3.
!SUBENTRY 2 test 2 0 2012-10-03 10:22:01.622
!MESSAGE Missing required bundle org.eclipse.e4.ui.workbench.swt_0.10.2.
!SUBENTRY 2 test 2 0 2012-10-03 10:22:01.622
!MESSAGE Missing required bundle org.eclipse.e4.ui.css.core_0.10.2.
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-10-03 10:22:01.622
!MESSAGE Bundle org.eclipse.e4.ui.workbench.renderers.swt_0.10.2.v20120814-175454 [25] was not resolved.
!SUBENTRY 2 org.eclipse.e4.ui.workbench.renderers.swt 2 0 2012-10-03 10:22:01.623
!MESSAGE Missing required bundle org.eclipse.e4.ui.workbench_0.9.0.
!SUBENTRY 2 org.eclipse.e4.ui.workbench.renderers.swt 2 0 2012-10-03 10:22:01.623
!MESSAGE Missing required bundle org.eclipse.e4.ui.services_0.9.0.
!SUBENTRY 2 org.eclipse.e4.ui.workbench.renderers.swt 2 0 2012-10-03 10:22:01.623
!MESSAGE Missing required bundle org.eclipse.e4.ui.workbench.swt_0.9.0.
!SUBENTRY 2 org.eclipse.e4.ui.workbench.renderers.swt 2 0 2012-10-03 10:22:01.623
!MESSAGE Missing required bundle org.eclipse.e4.ui.css.swt.theme_0.9.0.
!SUBENTRY 2 org.eclipse.e4.ui.workbench.renderers.swt 2 0 2012-10-03 10:22:01.623
!MESSAGE Missing required bundle org.eclipse.e4.ui.css.core_0.9.0.
!SUBENTRY 2 org.eclipse.e4.ui.workbench.renderers.swt 2 0 2012-10-03 10:22:01.624
!MESSAGE Missing imported package org.w3c.dom.css_2.0.0.
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-10-03 10:22:01.624
!MESSAGE Bundle org.eclipse.e4.ui.workbench.swt_0.10.2.v20120802-184737 [32] was not resolved.
!SUBENTRY 2 org.eclipse.e4.ui.workbench.swt 2 0 2012-10-03 10:22:01.624
!MESSAGE Missing required bundle org.eclipse.e4.ui.workbench_0.10.0.
!SUBENTRY 2 org.eclipse.e4.ui.workbench.swt 2 0 2012-10-03 10:22:01.624
!MESSAGE Missing required bundle org.eclipse.e4.ui.services_0.1.0.
!SUBENTRY 2 org.eclipse.e4.ui.workbench.swt 2 0 2012-10-03 10:22:01.624
!MESSAGE Missing required bundle org.eclipse.e4.ui.css.core_0.9.0.
!SUBENTRY 2 org.eclipse.e4.ui.workbench.swt 2 0 2012-10-03 10:22:01.624
!MESSAGE Missing required bundle org.eclipse.e4.ui.css.swt_0.9.0.
!SUBENTRY 2 org.eclipse.e4.ui.workbench.swt 2 0 2012-10-03 10:22:01.625
!MESSAGE Missing required bundle org.eclipse.e4.ui.css.swt.theme_0.9.0.
!SUBENTRY 2 org.eclipse.e4.ui.workbench.swt 2 0 2012-10-03 10:22:01.625
!MESSAGE Missing imported package org.w3c.dom.css_2.0.0.
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-10-03 10:22:01.625
!MESSAGE Bundle org.eclipse.e4.ui.workbench_0.10.3.v20120822-140642 [33] was not resolved.
!SUBENTRY 2 org.eclipse.e4.ui.workbench 2 0 2012-10-03 10:22:01.625
!MESSAGE Missing required bundle org.eclipse.e4.ui.services_0.9.0.
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-10-03 10:22:01.625
!MESSAGE Bundle org.eclipse.e4.ui.services_0.10.2.v20120726-172631 [37] was not resolved.
!SUBENTRY 2 org.eclipse.e4.ui.services 2 0 2012-10-03 10:22:01.625
!MESSAGE Missing imported package org.w3c.dom.css_2.0.0.
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-10-03 10:22:01.626
!MESSAGE Bundle org.eclipse.e4.ui.css.swt.theme_0.9.3.v20120806-170624 [52] was not resolved.
!SUBENTRY 2 org.eclipse.e4.ui.css.swt.theme 2 0 2012-10-03 10:22:01.626
!MESSAGE Missing required bundle org.eclipse.e4.ui.css.swt_0.9.1.
!SUBENTRY 2 org.eclipse.e4.ui.css.swt.theme 2 0 2012-10-03 10:22:01.626
!MESSAGE Missing required bundle org.eclipse.e4.ui.css.core_0.9.0.
!SUBENTRY 2 org.eclipse.e4.ui.css.swt.theme 2 0 2012-10-03 10:22:01.626
!MESSAGE Missing imported package org.w3c.dom.css_2.0.0.
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-10-03 10:22:01.626
!MESSAGE Bundle org.eclipse.e4.ui.css.core_0.10.2.v20120806-171245 [57] was not resolved.
!SUBENTRY 2 org.eclipse.e4.ui.css.core 2 0 2012-10-03 10:22:01.626
!MESSAGE Missing imported package org.w3c.dom.css_2.0.0.

!ENTRY org.eclipse.osgi 4 0 2012-10-03 10:22:01.628
!MESSAGE Application error
!STACK 1
java.lang.RuntimeException: No application id has been found.
    at org.eclipse.equinox.internal.app.EclipseAppContainer.startDefaultApp(EclipseAppContainer.java:242)
    at org.eclipse.equinox.internal.app.MainApplicationLauncher.run(MainApplicationLauncher.java:29)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414)
An error has occurred. See the log file
D:\e4rcp_workspace\.metadata\.plugins\org.eclipse.pde.core\test.product\1349230920702.log. 
```

# c++ - 如何识别C中字符串中包含的数字类型？

> ID：12701168
> 
> 赞同：1
> 
> 时间：2012-10-03T02:31:49.073
> 
> 标签：c++, c

我需要识别字符串中包含的数字类型（整数或浮点数）。详细地说，我需要了解可以存储数字的最小类型。我希望无符号类型更适合正值。也许用一些例子更容易解释：

```
"123" -> unsigned char

"-21" -> char

"257" -> unsigned short

"-271"-> short

...

"....."  long long

"1.2"    float

"....."  double

"a"      NaN / error 
```

我正在考虑使用 strtoul、strtol、strtod，我想知道是否有一个函数（类似于 is_char()、is_float ()、... 或 num_type ()）或一些“智能”（基于数学？，... ) 以便在我开始编码之前轻松识别。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T02:47:45.910

我将从测试阴性开始。然后我会寻找一个小数点（和指数符号）来确定是否使用整数。

对于整数，将数字转换为最大的有符号或无符号值（可能是 int64），然后转换回字符串并测试数字是否相同（否则它不能用 int 表示）。

此时，您可以使用位移位或位掩码来检查大小要求。实际上，您希望获取绝对值（在有符号类型的情况下）并检查左侧的零。我将展示未签名的基本思想......

```
unsigned long long val;
// ...

if( 0 != (val >> 32) )
    printf( "unsigned long long\n" );
else if( 0 != (val >> 48) ) 
    printf( "unsigned long\n" );
else if( 0 != (val >> 56) ) 
    printf( "unsigned short\n" );
else
    printf( "unsigned char\n" ); 
```

对于浮点，您可能希望将值作为双精度读入，然后针对 FLT_MAX、DBL_MAX 等进行测试...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T02:50:52.503

您首先提到更喜欢较小的尺寸，其次是无符号。但是你的类型有一致的“啄食顺序”吗？我的意思是说：是否有一些字符串`S1`在技术上可以转换为 X 类型或 Y 类型并选择 X，但有些字符串`S2`也可以转换为 X 类型或 Y 类型，但选择 Y？

C++ 术语方面，您可能想了解[“词法转换”](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_lexical_cast.html)。如果您确实有您感兴趣的类型的优先顺序，您可以按顺序尝试它们并继续捕获[bad_lexical_cast](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_lexical_cast/synopsis.html#boost_lexical_cast.synopsis.bad_lexical_cast)异常，直到一个工作正常... :-/ 或编写您自己的等价物。

但除此之外，C++ 的编译特性是，当您进入运行时并拥有输入字符串时，诸如此类`auto`的技巧不可用。此外， auto 不会遵循您的想法，因为它决定“1”的类型是`int`.

`limits.h`如果你想解决你自己的方法，你已经被指出来了。但是，如果您对惯用的 C++ 感兴趣，请查看我写的关于该主题的文章：

[http://hostilefork.com/2009/03/31/modern_cpp_or_modern_art/](http://hostilefork.com/2009/03/31/modern_cpp_or_modern_art/)

# cakephp - 如何从 Controller 访问相关的表字段？

> ID：12701169
> 
> 赞同：0
> 
> 时间：2012-10-03T02:31:56.677
> 
> 标签：cakephp, model, controller, find, cakephp-2.1

我正在尝试从我的控制器中获取数据库的数组结构及其一些字段。我想要的字段是：Document.id、Document.name、Document.submission_date，以及与之连接的 Requester.name：Requester.id = Document.requester_id

在我的控制器中：

方法一：

```
$documents = $this->Document->find('list', array('fields' => array('Document.name', 'Requester.name', 'Document.submission_date'))); 
```

似乎找不到“Requester.name”

方法B：

```
$documents = $this->Document->find('list', array('fields' => array('Document.name', 'Requester.name', 'Document.submission_date'), 'recursive' => 0)); 
```

给我：

```
 array(
        '2012-08-17' => array(
            'Document_A' => 'Requester_Z'
        ),
        '2012-08-05' => array(
            'Document_B' => 'Requester_Y'
        ),
        '2012-07-09' => array(
            'Document_C' => 'Requester_X'
        )
    ) 
```

但我需要它的格式：

```
 array(
        (int) 0 => array(
            'id' => '16'
            'submission_date' => '2012-08-17'
            'name' => 'Document_A',
            'requester_name' => 'Requester_Z'
        ),
        (int) 1 => array(
            'id' => '41'
            'submission_date' => '2012-08-05'
            'name' => 'Document_B',
            'requester_name' => 'Requester_Y'
        ),
        (int) 2 => array(
            'id' => '213'       
            'submission_date' => '2012-07-09'
            'name' => 'Document_C',
            'requester_name' => 'Requester_X'
        ),
    ) 
```

在通过 2.0 CakeBook 和 StackOverflow 之后，我似乎无法弄清楚......任何帮助将不胜感激？抱歉 - 我仍然是 CakePHP 的 n00b（但到目前为止真的很喜欢它！）谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T02:38:15.023

您需要执行 a`find('all')`而不是 a `find('list')`，并且可以`fields`像已经使用的那样使用密钥来限制返回的信息量。

它不会完全按照您需要的数据返回，每个字段都将位于它所属模型的键中 - 如果您真的需要这种格式的数据，您可以使用虚拟字段、自定义查找或修改数据的 afterFind 回调。

查找列表通常用于`id => label`格式化数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T05:34:40.070

你可以试试这个：

```
$documents = $this
                ->Document-
                >find('all', 
                        array(
                            'fields' => array('Document.name', 'Requester.name', 'Document.submission_date'),
                            'joins' => array(
                                'table' => 'requesters',
                                'alias' => 'Requester',
                                'type' => 'left',
                                'conditions' => array('Requester.id = Document.requester_id')
                            )
                        )   
                    ); 
```

# c++ - Cuda 虚拟类

> ID：12701170
> 
> 赞同：6
> 
> 时间：2012-10-03T02:32:04.083
> 
> 标签：c++, cuda, virtual-functions

我想在 cuda 内核中执行一些虚拟方法，但是我不想在同一个内核中创建对象，而是想在主机上创建它并将其复制到 gpu 内存。

我成功地在内核中创建对象并调用虚拟方法。复制对象时会出现问题。这是有道理的，因为显然虚函数指针是伪造的。所发生的只是“Cuda 网格启动失败”，至少 Nsight 是这么说的。但是当查看 SASS 时，它会在取消引用虚函数指针时崩溃，这是有道理的。

我当然使用 Cuda 4.2 以及在适配卡上使用“compute_30”进行编译。

那么推荐的方法是什么？还是根本不支持此功能？

我的想法是首先运行一个不同的内核，它创建虚拟对象并在复制它们之前提取虚拟函数指针以“修补”我的对象。可悲的是，这并没有真正起作用（还没有弄清楚），而且这将是一个丑陋的解决方案。

PS这实际上是[这个](https://stackoverflow.com/questions/5722942/using-virtual-functions-in-cuda-kernels)问题的重播，遗憾的是从未完全回答过。

编辑 ：

所以我找到了一种方法来做我想做的事。但要明确一点：这根本不是答案或解决方案，答案已经提供，这只是一个 hack，只是为了好玩。

所以首先让我们看看 Cuda 在调用虚拟方法时在做什么，下面是调试 SASS

```
//R0 is the address of our object
LD.CG R0, [R0];  
IADD R0, R0, 0x4;  
NOP;  
MOV R0, R0;  
LD.CG R0, [R0];
...
IADD R0, RZ, R9;  
MOV R0, R0;  
LDC R0, c[0x2][R0];
...
BRX R0 - 0x5478 
```

因此，假设“c[0x2][INDEX]”对于所有内核都是常量，我们只需运行内核并执行此操作即可获取类的索引，其中 obj 是该类的新创建对象：

```
unsigned int index = *(unsigned int*)(*(unsigned int*)obj + 4); 
```

然后使用这样的东西：

```
struct entry
{
    unsigned int vfptr;// := &vfref, thats our value to store in an object
    int dummy;// := 1234, great for debugging
    unsigned int vfref;// := &dummy
    unsigned int index;
    char ClassName[256];//use it as a key for a dict
}; 
```

将它存储在主机和设备内存中（内存位置是设备内存），在主机上，您可以使用 ClassName 作为“修补”对象的查找。

但是再说一遍：我不会在任何严肃的事情上使用它，因为在性能方面，虚函数根本不是很好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T07:46:34.663

目前，CUDA 编译器和运行时（从 CUDA 5.0 开始）不支持您尝试执行的操作。CUDA C Programming Guide v5.0 的 D.2.6.3 部分内容如下：

> ## D.2.6.3 虚拟功能
> 
> 当派生类中的函数覆盖基类中的虚函数时，被覆盖函数和覆盖函数上的执行空间限定符（即 , ）必须匹配`__host__`。`__device__`
> 
> 不允许将`__global__`具有虚函数的类的对象作为参数传递给函数。
> 
> 虚函数表由编译器放置在全局或常量内存中。

我建议您将类的数据与类的功能分开封装。例如，将数据存储在结构中。如果您打算对这些对象的数组进行操作，请将数据存储在数组结构中（出于性能考虑——超出了本问题的范围）。使用 分配主机上的数据结构`cudaMalloc`，然后将数据作为参数传递给内核，而不是使用虚拟方法传递类。

然后在设备上使用虚拟方法构造您的对象。具有虚拟方法的类的构造函数将设备指针内核参数作为参数。然后，虚拟**设备**方法可以对设备数据进行操作。

相同的方法可以在设备上的一个内核中分配数据，并在设备上的另一个内核中访问它（同样，具有虚函数的类不能作为内核的参数）。

# javascript - Javascript下拉菜单计算

> ID：12701171
> 
> 赞同：0
> 
> 时间：2012-10-03T02:32:13.300
> 
> 标签：javascript, options

我的代码有点问题。我正在尝试从下拉菜单中进行计算，然后它将 onChange 更改为文本框。几天来，我一直在尝试弄清楚它并在谷歌上搜索编码该功能的方法。任何人都可以请帮助或就如何解决这个问题给我建议吗？

```
function numGuest()
{
    var a = document.getElementById("guests");
    if(a.options[a.selectedIndex].value == "0")
    {
        registration.banq.value = "0";
    }
    else if(a.options[a.selectedIndex].value == "1")
    {
        registration.banq.value = "30";
    }
} 
```

```
<select id="guests" name="guests">
<option value="0">0</option>
<option value="1">1</option>
<option>2</option>
<option>3</option>
<option>4</option>
<option>5</option>
</select>

<input type="text" id="banq" name="banq" onChange="numGuest()" disabled /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T02:59:49.737

注册没有定义。您需要以与 guest 元素相同的方式获取文本输入元素。此外，onChange 侦听器应附加到选择菜单而不是文本区域。

```
<html>
<script>
function numGuest()
{
    var banq = document.getElementById('banq');
    var a = document.getElementById("guests");

    if(a.options[a.selectedIndex].value == "0")
    {
        banq.value = "0";
    }
    else if(a.options[a.selectedIndex].value == "1")
    {
        banq.value = "1";
    }
}
</script>
<select id="guests" name="guests"  onChange="numGuest()" >
    <option value="0">0</option>
    <option value="1">1</option>
    <option>2</option>
    <option>3</option>
    <option>4</option>
    <option>5</option>
</select>

    <input type="text" id="banq" name="banq" disabled />
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T02:57:23.267

为什么 id=banq (textfield) 被禁用？

启用：document.getElementById('banq').disabled = false;

对于选择的值：

```
function numGuest(){
    var theGuestValForCalc = 0;
    var theFinalResult = 0;   

    theGuestValForCalc = document.getElementById('guests').options[document.getElementById('guests').selectedIndex].value;

    theFinalResult = theGuestValForCalc * 10 // or some value, calculation, etc.

    document.getElementById('banq').innerHTML = theFinalResult;

    // return theFinalResult; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T03:35:40.443

在您的代码中：

```
> <input type="text" id="banq" name="banq" onChange="numGuest()" disabled /> 
```

那可能应该是一个[只读](http://dev.w3.org/html5/spec/single-page.html#the-readonly-attribute)字段，而不是禁用的。

onchange 监听器应该在 select 元素上。此外，为方便起见，您可以在侦听器中传递对元素的引用：

```
<select name="guests" onchange="numGuest(this)"> 
```

然后在 numGuest 函数中：

```
function numGuest(element) { 
```

并且*element*将是对其处理程序调用该函数的元素的引用。

由于您说您的控件位于表单中，并且具有名称的表单控件被命名为它们所在表单的命名属性，因此您可以简化代码：

```
 var form = element.form;
  var banq = form.banq;
  var a = form.guests; // or element 
```

如果选中的选项有值（见下面的注释），那么你可以直接使用 select 元素的 value 属性：

```
 if (a.value == "0") {
    banq.value = "0";

  } else if (a.value == "1") {
    banq.value = "1";
  } 
```

你就完成了。

笔记：

1.  如果选项没有 value 属性或属性，则其值为文本内容。不幸的是，旧版本的 IE 不支持，所以你必须使用`select.options[select.selectedIndex].text`. 但是最好的办法是总是给选项一个值，这样你就可以得到选择元素的值。
2.  无需提供表单控件名称和 ID。他们必须有名字才能成功，所以只要给他们名字而忘记他们的身份。

# python - 查询与用户具有一对一关系的 django 模型实例的最佳方法是什么

> ID：12701173
> 
> 赞同：0
> 
> 时间：2012-10-03T02:32:50.563
> 
> 标签：python, django

假设您有一个 django 模型，该模型与用户具有 OneToOne / Unique ForeignKey 关系，如[Django 文档中有关如何创建 UserProfile 所示。](https://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users)：

现在假设您有一个视图方法，该方法接受可以从中获取用户的请求。查询与该用户关联的个人资料的最佳方式是什么？

```
from django.contrib.auth.models import User

# sample user profile model associated with user
class UserProfile(models.Model):
    likes_spam = models.BooleanField()
    user = models.OneToOneField(User)

#view method
def forward_to_practice_home(request):
    user = request.user
    profile_for_user = #insert code here that would get the profile for that user 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T02:37:44.680

`related_name`s 很有帮助。如果您将用户配置文件定义更改为：

```
class UserProfile(models.Model):
    likes_spam = models.BooleanField()
    user = models.OneToOneField(User, related_name='profile') 
```

那么您可以按如下方式使用配置文件：

```
def forward_to_practice_home(request):
    user = request.user
    profile_for_user = user.profile 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T02:37:15.783

[`UserProfile.objects.get(user=user)`](https://docs.djangoproject.com/en/dev/topics/db/queries/#retrieving-objects)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T08:52:39.007

[您可以使用一种称为get_profile()](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.models.User.get_profile)的特殊方法

```
profile_for_user = user.get_profile() 
```

请注意，您必须在settings.py中设置[AUTH_PROFILE_MODULE](https://docs.djangoproject.com/en/1.4/topics/auth/#auth-profiles)

但是，这在 Django 1.5 中已被弃用，因为它添加了对[用户模型自定义的支持](https://docs.djangoproject.com/en/dev/topics/auth/#auth-custom-user)

# linux - 在 Linux 内核中，我可以在计时器处理程序中解锁互斥锁吗？

> ID：12701175
> 
> 赞同：1
> 
> 时间：2012-10-03T02:33:23.630
> 
> 标签：linux, linux-kernel, mutex

因此，如果一个线程锁定了一个互斥锁，然后启动了一个 hrtimer。在计时器处理程序回调函数中，我可以解锁该互斥锁吗？

我问这个是因为我在 mutex.h 文件中看到：“只有所有者才能解锁互斥锁”“任务可能不会在持有互斥锁的情况下退出”“互斥锁不能用于硬件或软件中断上下文，例如小任务和计时器”

那么定时器处理程序是在中断上下文中执行的吗？在那种情况下，由于所有者不知道而无法解锁互斥锁？所以也许我应该使用信号量？

谢谢，

* * *

@Andy Ross 嗨，谢谢你的回复。我不能在评论中输入太多字。我要做什么有点难以解释。例如，我们在一个插槽上有 4 个内核。核心 0 想要增加它的频率。为此，首先需要提高插座电压（电压变化是插座电平）然后改变频率。在改变过程中（通常改变电压需要一些时间），其他核心可能也想改变插座的电压，这是不允许的。所以core 0首先锁定一个mutex，然后发出改变电压的命令，启动一个定时器并立即返回运行其他任务。当定时器到时，它会检查电压变化是否已经完成。如果是这样，它将改变核心的频率，然后解锁互斥锁以允许其他核心改变插座的电压。所以互斥锁是套接字级别的。我想也许我可以使用睡眠。如果其他内核尝试在电压更改完成之前更改电压，它们将执行 nanosleep() 例如。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T03:27:56.070

答案是不。计时器在其他线程中运行。只有同一个线程可以解锁。

对于您的问题，您应该使用状态标志/计数并`atomic_set`与朋友一起更新它。使用该标志来识别状态，不要长时间持有互斥锁。

如果您需要排队电压更改请求，请使用队列。阻止这么长的进程绝不是一个明智的主意。

# c# - C++/CLI 代码中的内存泄漏..我做错了什么？

> ID：12701177
> 
> 赞同：7
> 
> 时间：2012-10-03T02:33:40.347
> 
> 标签：c#, c++, memory-leaks, c++-cli, wrapper

用 C++ 编写无 memleak 代码对我来说不是问题，我只是坚持使用[RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)习语。

用 C# 编写无 memleak 代码也不是很难，垃圾收集器会处理它。

不幸的是，编写 C++/CLI 代码对我来说*是*个问题。我以为我已经理解了它的工作原理，但是我仍然有很大的问题，希望您能给我一些提示。

这就是我所拥有的：

用 C# 编写的 Windows 服务，它在内部使用 C++ 库（例如 OpenCV）。C++ 类通过 C++/CLI 包装类访问。例如，我有一个`MatW` 用于图像对象的 C++/CLI 包装类`cv::Mat`，它将 a 作为构造函数参数`System::Drawing::Bitmap`：

```
public ref class MatW
{
public:
    MatW(System::Drawing::Bitmap ^bmpimg)
    {
        cv::Size imgsize(bmpimg->Width, bmpimg->Height);
        nativeMat = new Mat(imgsize, CV_8UC3);

        // code to copy data from Bitmap to Mat
        // ...
    }

    ~MatW()
    {
        delete nativeMat;
    }

    cv::Mat* ptr() { return nativeMat; }

private:
    cv::Mat *nativeMat;
}; 
```

例如，另一个 C++ 类可能是

```
class PeopleDetector
{
public:
    void detect(const cv::Mat &img, std::vector<std::string> &people);
} 
```

及其包装类：

```
public ref class PeopleDetectorW
{
public:
    PeopleDetectorW() { nativePeopleDetector = new PeopleDetector(); }
    ~PeopleDetectorW() { delete nativePeopleDetector; }

    System::Collections::Generic::List<System::String^>^ detect(MatW^ img)
    {
        std::vector<std::string> people;
        nativePeopleDetector->detect(*img->ptr(), people);

        System::Collections::Generic::List<System::String^>^ peopleList = gcnew System::Collections::Generic::List<System::String^>();

        for (std::vector<std::string>::iterator it = people.begin(); it != people.end(); ++it)
        {
            System::String^ p = gcnew System::String(it->c_str());
            peopleList->Add(p);
        }

        return peopleList;
    } 
```

这是对我的 Windows 服务 C# 类中的方法的调用：

```
Bitmap bmpimg = ...
using (MatW img = new MatW(bmpimg))
{
    using (PeopleDetectorW peopleDetector = new PeopleDetector())
    {
        List<string> people = peopleDetector.detect(img);
    }
} 
```

现在，这是我的问题：

*   我的代码有什么问题吗？
*   我必须`using`在我的 C# 代码中使用吗？当使用多个包装器对象时，它会使代码变得丑陋，因为`using`必须嵌套语句
*   我可以`Dispose()`在使用这些对象后改用吗？
*   我可以不打扰并将其留给垃圾收集器吗？（不`using`，不`Dispose()`）
*   上面的代码是将对象`List<string^>^`从 C++/CLI 返回到 C# 的正确方法吗？
*   using`gcnew`并不意味着垃圾收集器会处理这些对象，而我不必关心如何以及何时释放它们？

我知道这是很多问题，但我只想摆脱我的内存泄漏，所以我列出了我认为可能出错的所有内容......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T08:37:43.270

> 我的代码有什么问题吗？

不在您发布的内容中-您`using`正确地应用了陈述。因此，您的代码示例不是内存泄漏的原因。

> 我必须在我的 C# 代码中使用 using 吗？当使用多个包装器对象时，它会使代码变得丑陋，因为 using 语句必须嵌套

您不必这样做，但您不必在语法上嵌套它们。这是等价的：

```
Bitmap bmpimg = ...
using (MatW img = new MatW(bmpimg))
using (PeopleDetectorW peopleDetector = new PeopleDetector())
{
    List<string> people = peopleDetector.detect(img);
} 
```

> 我可以在使用对象后改用 Dispose() 吗？

你可以，但是你需要一个`try`/`finally`来确保`Dispose`总是被调用，即使抛出异常也是如此。该`using`语句封装了整个模式。

> 我可以不打扰并将其留给垃圾收集器吗？（没有使用，没有 Dispose()）

C++ RAII 通常应用于各种临时状态清理，包括递减在构造函数中递增的计数器等。而 GC 在后台线程中运行。它不适用于 RAII 可以处理的所有确定性清理场景。RAII 的 CLR 等效项是`IDisposable`，它的 C# 语言接口是`using`. 在 C++ 中，它的语言接口（自然）是析构函数（成为`Dispose`方法）和`delete`运算符（成为对 的调用`Dispose`）。声明“在堆栈上”的 Ref 类对象实际上等同于`C#`using 模式。

> 上面的代码是将像 List^ 这样的对象从 C++/CLI 返回到 C# 的正确方法吗？

差不多！

> 使用 gcnew 并不意味着垃圾收集器会处理这些对象，而我不必关心如何以及何时释放它们？

您不必释放内存。但是如果类实现了`IDisposable`，那么这与内存分配完全不同。您必须`Dispose`在放弃对象之前手动调用。

小心终结器——这些是连接到 GC 的一种方式，以便在 GC 收集您的对象时运行您自己的清理代码。但它们并不真正适合应用程序代码中的一般用途。它们从您无法控制的线程运行，有时您无法控制，并且以您无法控制的顺序运行。因此，如果一个对象的终结器尝试使用终结器访问另一个对象，则第二个对象可能已经被终结。无法控制这些事件的顺序。[SafeHandle](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.safehandle.aspx)现在涵盖了终结器的大部分原始用途。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T07:42:26.543

您在 ref 类中没有终结器。

在 C++/CLI 中，当您在堆栈上创建类的实例（C++ 样式）然后它超出范围时调用析构函数，或者使用`delete`运算符。**当需要终结对象时， GC**会调用终结器。

在 C# 中，**GC**处理所有对象的销毁（没有删除运算符），因此析构函数和终结器之间没有区别。

因此，带有**~的“****析构函数**”的行为类似于 c++ 析构函数，而不是 C# 析构函数。C++/CLI ref 类中的“**析构函数**”被编译成 .Net方法。 C# 析构函数/终结器的等价物是终结器方法，它使用**!** （感叹号）。****`Dispose()`**** 

 ******所以，为了避免内存泄漏，你需要定义一个终结器：

```
 !MatW()
    {
        delete nativeMat;
    }

 ~MatW()
    {
        this->!MatW();
    } 
```

请参阅 MSDN 文章**[Visual C++ 中的析构函数和终结器](http://msdn.microsoft.com/en-us/library/ms177197%28v=vs.80%29.aspx)** 使用******

# c# - 如何选择 NEXT 元素？

> ID：12701180
> 
> 赞同：1
> 
> 时间：2012-10-03T02:33:52.607
> 
> 标签：c#, .net-4.0, html-parsing, html-agility-pack

我正在尝试使用 HTML Agility Pack 解析一些 HTML。以下代码片段选择包含我需要的信息的表格元素，但我需要更深入地挖掘表格。

例如，一旦我有了表格的 InnerHtml，我计划寻找一个`<td>`内部文本值为“字段 #2”的值。但是，然后，我需要选择 NEXT 的内部文本`<td>`。在本例中，我需要值 110。我怎么做？

```
foreach (var x in doc.DocumentNode.SelectNodes("//table[contains(@class,'data')]"))
{
     // psuedo code - search for td and use "contains" on the inner text / html.
     // Then, grab the next td inner html.

     Console.WriteLine(x.InnerHtml);
}

  <tr>
    <td width="158"><strong>Field #1:</strong></td>
    <td  width="99">1</td>
    <td  width="119"><strong>Field #2:</strong></td>
    <td  width="176">110</td>
  </tr>
  <tr>
    <td width="158"><strong>Field #3:</strong></td>
    <td  width="99">85</td>
    <td  width="119"><strong>Field #4:</strong></td>
    <td  width="176">-259.34</td>
  </tr>
  <tr>
    <td width="158"><strong>Field #5:</strong></td>
    <td  width="99">1</td>
    <td  width="119"><strong>Field #6:</strong></td>
    <td  width="176">110</td>
  </tr>
  <tr>
    <td width="158"><strong>Field #7:</strong></td>
    <td  width="99">12</td>
    <td  width="119"><strong>Field #8:</strong></td>
    <td  width="176">123.23</td>
  </tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T02:53:06.340

不确定敏捷包是否支持它，但在 XPath 中，您可以使用以下命令查询下一个兄弟`/following-sibling`：

```
doc.DocumentNode.SelectNodes(
    "//table[contains(@class,'data')]/tr/" +
       "td[/strong/text()='Field #2:']" + 
       "/following-sibling:td"); 
```

本质上 - 找到`td`具有给定文本的所有节点，并给我它的下一个兄弟`td`节点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T03:38:29.890

这段代码将返回您想要的 td 行。

```
//<td  width="176">110</td>
var td = x.SelectNodes("//td").SkipWhile(g => !g.InnerText.Contains("Field #2:")).Select(s => s).Skip(1).FirstOrDefault(); 
```

# java - 多线程环境中的 Neo4j 图操作

> ID：12701185
> 
> 赞同：3
> 
> 时间：2012-10-03T02:35:18.440
> 
> 标签：java, multithreading, graph, concurrency, neo4j

我在并发环境中使用 Neo4j，我的图表如下所示：

![图形](../Images/15b1286f06175d43664befe071ca0239.png)

每个项目可以不处于或最多处于 3 种状态（`S1`和`S2`）`S3`中的一种。一个项目可以改变它的状态，流程是这样的：项目在任何状态下都不存在，然后`S1`，`S2`最后`S3`。

这意味着当添加一个项目时，我必须检查它是否已经存在于`S1`,`S2`或`S3`. 如果是，那么我不应该再次添加它。此外，如果项目在`S1`并且被请求进入流中的下一个状态，则必须首先从 中删除该项目`S1`，然后再将其添加到`S2`。

对每个状态都有一个索引并不能解决这个问题，因为所有这些操作都必须以原子方式发生，因为它是一个并发环境。我已经检查了[这个链接](http://docs.neo4j.org/chunked/stable/transactions-unique-nodes.html)，我只能考虑采用*悲观锁定*方法。基于示例添加新项目的伪代码应类似于：

```
search for node in all states
if node is present in any state
    return node
else
    begin transaction
        get a write lock on #lockNode#
        create node
        add node to initial state
    commit
    return node
end 
```

从一种状态变为另一种状态的伪代码应该与前一个非常相似。

所以问题是：

1.  我的伪代码中的#lockNode# 是什么？我无法从示例中弄清楚。听起来类似于 a`synchronized (lockNode) {}`但我需要一些解释才能继续使用此解决方案
2.  将参考节点用作#lockNode# 会有什么影响？
3.  是否可以以原子方式和同步方式在三个索引中执行搜索，然后将节点添加/移动到某个状态？

我可以通过使用 Java 同步轻松解决这个问题，但文档明确指出不应该这样做。对像我这样的 Neo4j 新手的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T07:11:23.007

由于一个项目只能处于一种状态，因此您只能拥有一个索引并在您提供的链接中使用“获取或创建”技术。要了解项目的状态，您可以遍历 dingle 关系，然后遍历状态节点。或者您可以使用 2 个属性（名称和状态）进行索引。或者有 4 个索引

锁定参考节点会造成瓶颈（如果只锁定 s1 节点会少一点），对于唯一节点创建，我认为最好的方法是 get-or-create ，我不知道还有什么其他好的方法

同步也是一个很大的禁忌，因为它可能与 neo4j 内部锁定系统“冲突”并产生死锁

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T21:08:17.207

代码中的 Lock-Node 是 `lockNode.removeProperty("__non_existing_property") 或通过事务显式获取锁。

```
Transaction tx = graphDb.beginTx();
try {
    tx.acquireWriteLock( lockNode );
    // do something
    tx.success();
}
finally {
    tx.finish();
} 
```

来自 Neo4j 手册： [http ://docs.neo4j.org/chunked/snapshot/transactions-unique-nodes.html](http://docs.neo4j.org/chunked/snapshot/transactions-unique-nodes.html)

# jquery - JWPlayer：“找不到视频”但路径正确

> ID：12701186
> 
> 赞同：1
> 
> 时间：2012-10-03T02:35:40.983
> 
> 标签：jquery, video, jquery-plugins, jwplayer

我正在尝试使用 JWPlayer 制作视频。但我得到了错误：

`Video not found or access denied`

我已经在网站上使用了其他几个视频，但这个是展示和 iseeu。

我已确保 .js 和 .swf 文件位于正确的位置。

视频的路径是正确的 - 我检查并重新检查并尝试将其设为绝对路径（http://www.mysite.com/videos/myvid.mp4 而不仅仅是视频/myvid.mp4）。

文件和文件夹的权限是正确的。

我唯一能想到的是，在上传之前，我将扩展名从 .mpg 更改为 .mp4

视频在我的机器上运行良好，但也许这个 JWPlayer 不喜欢它？

欢迎任何建议！

```
<script type='text/javascript' src='/jwplayer/jwplayer.js'></script>  
<div id='mediaplayer'></div>  
<script type="text/javascript"> jwplayer('mediaplayer').setup({'flashplayer': 'jwplayer/player.swf', 'id': 'playerID', 'width': '640','height': '360', 'file': 'http://mysite.com.au/assets/files/lbm.mp4' }); </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T17:22:19.153

为什么要从 mpg 更改为 mp4？我的意思是它被错误地命名为 mpg 还是一个 mpg 文件？如果它实际上是一个 mpg 文件，它不能被 jwplayer 播放。您必须将其转换为 mp4 文件。使用类似ffmpeg的东西。重命名不是解决方案。

如果它只是简单地命名为 .mpg 但实际上是一个 mp4 文件，那么应该没有问题。为什么不检查 vlc 或 ffprobe 上的文件格式并检查。

有关支持的格式详细信息，请参阅[http://www.longtailvideo.com/support/jw-player/jw-player-for-flash-v5/12539/supported-video-and-audio-formats](http://www.longtailvideo.com/support/jw-player/jw-player-for-flash-v5/12539/supported-video-and-audio-formats)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-14T22:25:46.547

尝试使用绝对 URL。我读了另一种有效的表格。

# sql - SQL 存储过程中的 While 循环的速度问题

> ID：12701187
> 
> 赞同：0
> 
> 时间：2012-10-03T02:35:45.253
> 
> 标签：sql, stored-procedures, while-loop

我正在接管一些试图一次存储 ID 列表的代码，我发现这段代码对于我们试图完成的操作来说运行速度很慢。另外，在某些情况下，由于大量 id 会导致死锁。

```
USE [store]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER PROCEDURE [dbo].[UpdateImagePriority]

   @separator CHAR(1),
   @filename  varchar(50),
   @parentId   int,
   @slaveIds varchar(8000)

   AS
   BEGIN      
      SET NOCOUNT ON
      DECLARE @SLAPriorityint
      DECLARE @separator_position INT 
      DECLARE @array_value VARCHAR(50)

      SET @slaveIds = @slaveIds + @separator
      SET @SLAPriority= 0

      WHILE PATINDEX('%' + @separator + '%', @slaveIds ) <> 0
           BEGIN

               SET @SLAPriority= @SLAPriority+ 1

               SELECT  @separator_position = PATINDEX('%' + @separator + '%',@slaveIds )
               SELECT  @array_value = LEFT(@slaveIds , @separator_position - 1)

               SELECT  Array_Value = @array_value

               SELECT  @slaveIds = STUFF(@slaveIds , 1, @separator_position, '')

               UPDATE image_info
               SET SLA_PRIORITY = @SLAPriority
               WHERE FILE=@filename and EXT_PAR_ID=@parentId   and SLA_ID=@array_value
           END
      SET NOCOUNT OFF
   END 
```

这是我们将传入的示例：

例如

```
separator = ','
filename = 'burgerking'
parentId = '1859'
slaveIds = '15,16,19,20,21,25,28,29,30,38,99' 
```

有关如何提高此代码速度的任何建议。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T02:58:00.173

您正在寻找的是一个表值函数，用于将您的值拆分为一个表。那么你所需要的只是一个`UPDATE .. FROM .. JOIN`声明。

```
CREATE PROCEDURE [dbo].[UpdateImagePriority]
   @separator CHAR(1),
   @filename  varchar(50),
   @parentId   int,
   @slaveIds varchar(8000)
AS

set @slaveIds = @slaveIds + @separator
;WITH SplitString AS
(
    SELECT
        1 ID,LEFT(@slaveIds,CHARINDEX(',',@slaveIds)-1) AS Part,RIGHT(@slaveIds,LEN(@slaveIds)-CHARINDEX(',',@slaveIds)) AS Remainder
    UNION ALL
    SELECT
        ID+1,LEFT(Remainder,CHARINDEX(',',Remainder)-1),RIGHT(Remainder,LEN(Remainder)-CHARINDEX(',',Remainder))
        FROM SplitString
        WHERE Remainder IS NOT NULL AND CHARINDEX(',',Remainder)>0
)
update i
SET SLA_PRIORITY = s.ID
from splitstring s
join image_info i on i.[FILE]=@filename and i.EXT_PAR_ID=@parentId and i.SLA_ID= s.Part
where s.Part > '' 
```

对于 SQL Server 2000，或者只是为了使字符串拆分可重用，我从另一个问题中提出了[这个功能。](https://stackoverflow.com/a/2703/573261)

```
create function dbo.SplitString 
    (
        @str varchar(8000), 
        @separator char(1)
    )
    returns table
    AS
    return (
        with tokens(p, a, b) AS (
            select 
                1, 
                1, 
                charindex(@separator, @str)
            union all
            select
                p + 1, 
                b + 1, 
                charindex(@separator, @str, b + 1)
            from tokens
            where b > 0
        )
        select
            p Id,
            substring(
                @str, 
                a, 
                case when b > 0 then b-a ELSE 8000 end) 
            AS Part
        from tokens
      )
GO 
```

然后你的SP变成

```
CREATE PROCEDURE [dbo].[UpdateImagePriority]
   @separator CHAR(1),
   @filename  varchar(50),
   @parentId   int,
   @slaveIds varchar(8000)
AS

update i
SET SLA_PRIORITY = s.ID
from dbo.splitstring(@slaveIds,@separator) s
join image_info i on i.[FILE]=@filename and i.EXT_PAR_ID=@parentId and i.SLA_ID= s.Part
where s.Part > ''
GO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T03:04:58.680

使用函数将数组转换为 XML 文档，然后很容易将其作为整数的单列表返回：

```
use tempdb
go

create function dbo.ParseIDs(@ids varchar(max), @separator char(1)) returns @rtn table (
  id int
)
as
begin
  declare @xml xml

  set @xml = '<root><n>' + replace(@ids, @separator, '</n><n>') + '</n></root>'

  insert into @rtn
  select id.value('.', 'int')as id
  from @xml.nodes('/root/n') as records(id)

  return
end
go

declare @buf varchar(max) = '15,16,19,20,21,25,28,29,30,38,99'
select * from dbo.ParseIDs(@buf, ',')
go

drop function dbo.ParseIDs
go 
```

这将返回以下内容：

```
id
----
15
16
19
20
21
25
28
29
30
38
99 
```

然后很容易做这样的事情：

```
UPDATE image_info
SET SLA_PRIORITY = @SLAPriority
WHERE FILE=@filename and EXT_PAR_ID=@parentId   and SLA_ID in (
  select id from dbo.ParseIDs(@array_value, ',')
) 
```

这可能会更好：

```
UPDATE tbl
SET    tbl.SLA_PRIORITY = @SLAPriority
FROM   dbo.ParseIDs(@array_value, ',') as x
       inner join image_info tbl on x.id = tbl.SLA_ID
WHERE  tbl.FILE=@filename and tbl.EXT_PAR_ID=@parentId 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T03:29:51.807

进行基于集合的更新：

```
 USE [store]
    GO
    SET ANSI_NULLS ON
    GO
    SET QUOTED_IDENTIFIER ON
    GO
    ALTER PROCEDURE [dbo].[UpdateImagePriority]

   @separator CHAR(1),
   @filename  varchar(50),
   @parentId   int,
   @slaveIds varchar(8000)

   AS
   BEGIN      
      SET NOCOUNT ON
      DECLARE @SLAPriorityint
      DECLARE @separator_position INT 
      DECLARE @array_value VARCHAR(50)

      SET @slaveIds = @slaveIds + @separator
      SET @SLAPriority= 0

      DECLARE @slaveIdTable Table
      (
        ids INT,
        SlaPriority INT
      )
      WHILE PATINDEX('%' + @separator + '%', @slaveIds ) <> 0
           BEGIN

               SET @SLAPriority= @SLAPriority+ 1

               SELECT  @separator_position = PATINDEX('%' + @separator + '%',@slaveIds )
               SELECT  @array_value = LEFT(@slaveIds , @separator_position - 1)

               -- get table of ids
               INSERT INTO @slaveIdTable (ids,SlaPriority) VALUES(@array_value,@SLAPriority);

               SELECT  @slaveIds = STUFF(@slaveIds , 1, @separator_position, '')

           END

    UPDATE ii
        SLA_PRIORITY = @SLAPriority
    FROM image_info ii
    JOIN @slaveIdTable st ON st.ids = st.SLA_ID
    WHERE
        st.[FILE] =  @filename AND
        st.EXT_PAR_ID = @parentId                   

      SET NOCOUNT OFF
   END 
```

理查德的回答更优雅一些。在我工作的时候没有看到它。

# ios - Xcode Build Settings 中的“Architectures”和“Valid Architectures”有什么区别？

> ID：12701188
> 
> 赞同：119
> 
> 时间：2012-10-03T02:35:57.483
> 
> 标签：ios, xcode, xcode4.5

它们的含义是什么，我可以将它们设置为不同的值吗？

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-10-03T02:39:58.053

架构是您想要构建的架构，有效架构是您可以使用代码库构建的架构。

因此，也许您只想为 armv7s 构建二进制文件，但是对于 armv7 和 armv6，相同的源代码可以编译得很好。所以`VALID_ARCHS = armv6 armv7 armv7s`，但是你设置`ARCHS = armv7s`是因为这就是你真正*想要*用你的代码构建的。

或者，在苹果语中：

> 拱门（建筑）
> 
> 以空格分隔的标识符列表。指定二进制文件所针对的体系结构（ABI、处理器模型）。当此构建设置指定多个架构时，生成的二进制文件可能包含每个指定架构的目标代码。

和：

> VALID_ARCHS（有效架构）
> 
> 以空格分隔的标识符列表。指定可以为其构建二进制文件的体系结构。在构建期间，此列表与 ARCHS 构建设置的值相交；结果列表指定了二进制文件可以运行的架构。如果生成的架构列表为空，则目标不会生成二进制文件。

来源：[Xcode 构建设置参考](https://developer.apple.com/library/archive/documentation/DeveloperTools/Reference/XcodeBuildSettingRef/1-Build_Setting_Reference/build_setting_ref.html)

在实践中，你`VALID_ARCHS`不用担心改变它，只需摆弄`ARCHS`设置你想要构建的架构。通常，您将 Debug 构建设置为 just `NATIVE_ARCH`，因为您只想为您将要测试/运行它的机器构建调试版本，并为您计划支持的所有架构构建发布构建。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-09T04:24:33.473

从 Apple 文档中，我们知道 Xcode 将构建的二进制文件是与`Valid Architectures` 相交的列表`Architectures`。

所以，我不认为杰里米的回答是正确的，正如他所说：

> 因此，也许您只想为 armv7s 构建二进制文件，但是
> 对于 armv7 和 armv6，相同的源代码可以编译得很好。所以`VALID_ARCHS = armv6 armv7 armv7s`，但是您设置了 ARCHS = armv7s，因为这就是您真正想要使用代码构建的全部内容。

当你设置`VALID_ARCHS = armv6 armv7 armv7s`，设置`ARCHS = armv7s`，二进制Xcode的编译结果是armv7s，它不能兼容armv6/armv7。

而如果你想兼容armv6/armv7/armv7s，你必须设置 `VALID_ARCHS = armv6 armv7 armv7s`和`ARCHS = armv6`。这样，二进制Xcode构建的结果是armv6，并且它可以在armv6/armv7/armv7s上正常运行，因为arm处理器向后兼容.

# javascript - 将 MixedCollection 组件添加到 extjs 表单时出错

> ID：12701190
> 
> 赞同：0
> 
> 时间：2012-10-03T02:36:07.397
> 
> 标签：javascript, dynamic, extjs, extjs4.1

我正在尝试动态构建一个 extjs 表单，当我尝试将动态构建的 MixedCollection 对象添加到表单时，我得到一个**TypeError: e.mixins.elementCt is undefined**错误。

```
<div id="form-@pageSpecificVar" class="grid-container even"></div>
<script>

    Ext.define('HeaderForm', {
        extend: 'Ext.form.Panel',
        initComponent: function () {
            var me = this;
            Ext.applyIf(me, {
                id: Ext.id(),
                defaultType: 'textfield',
                items: [{
                    xtype: 'container',
                    items: [{
                        xtype: 'textfield',
                        fieldLabel: 'Test'
                    }]
                }]
            });
            me.callParent(arguments);
        }
    });

    // Define our data model
    Ext.define('HeaderModel', {
        extend: 'Ext.data.Model',
        fields: [
            { name: 'FieldA', type: 'int' }
        ]
    });

    var store = Ext.create('Ext.data.Store', {
        model: 'HeaderModel',
        proxy: {
            type: 'ajax',
            actionMethods: { create: 'POST', read: 'GET', update: 'POST', destroy: 'POST' },
            url: '@Url.Content("~/Test/Header")',
            timeout: 1200000,
        listeners: {
            load: function () {
            }
        }
        }
    });

    store.load({
        scope: this,
        callback: function (records, operation, success) {
                var form = new HeaderForm();
                var formItems = new Ext.util.MixedCollection();
                Ext.each(records[0].fields.items, function (item) {
                    console.log(item);
                    formItems.add(new Ext.form.DisplayField({
                        fieldLabel: 'Test'
                    }));
                }, this);
                console.log(formItems);
                form.add(formItems);
                form.loadRecord(records[0].data);
                form.render('form-@pageSpecificVar');
        }
    });
</script> 
```

我不明白的另一件事是，当我将函数放在负载侦听器中时，什么也没有发生。所以我不得不求助于使用回调事件。

**更新：** form.add 方法接受一个组件或组件数组，因此我没有添加 MixedCollection 类型，而是引用 formItems.items 来添加 displayfields 组件数组。

~~但是由于某种原因，在 store.load 执行时商店监听器加载没有被触发，有没有人看到这个问题？~~ 没关系...我想通了...我放置了侦听器而不是代理而不是商店。

**第二季度**

~~还有一点很奇怪的是，在 store.load 的回调方法中，记录没有与加载的值一起返回。~~ 没关系...我想通了...这是我传递的json对象。忘记将其从错误/数据结构中取出。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T03:01:00.463

MixedCollection 不是 add 的可接受参数，您需要使用数组。此信息在文档中。

# postgresql - Postgres 组合多个索引

> ID：12701193
> 
> 赞同：6
> 
> 时间：2012-10-03T02:36:18.547
> 
> 标签：postgresql, postgis

我有以下表格/索引 -

```
CREATE TABLE test
(
   coords geography(Point,4326), 
   user_id varchar(50), 
   created_at timestamp
);
CREATE INDEX ix_coords ON test USING GIST (coords);
CREATE INDEX ix_user_id ON test (user_id);
CREATE INDEX ix_created_at ON test (created_at DESC); 
```

这是我要执行的查询：

```
select * 
from updates 
where ST_DWithin(coords, ST_MakePoint(-126.4, 45.32)::geography, 30000) 
and user_id='3212312' 
order by created_at desc
limit 60 
```

当我运行查询时，它只使用`ix_coords`索引。如何确保 Postgres对查询也使用`ix_user_id`和索引？`ix_created_at`

这是一个新表，我在其中批量插入了生产数据。表中的总行数`test`：**15,069,489**

我正在使用 (effective_cache_size = 2GB) 运行 PostgreSQL 9.2.1（使用 Postgis）。这是我的本地 OSX，具有 16GB RAM、Core i7/2.5 GHz、非 SSD 磁盘。

添加`EXPLAIN ANALYZE`输出 -

```
Limit  (cost=71.64..71.65 rows=1 width=280) (actual time=1278.652..1278.665 rows=60 loops=1)
   ->  Sort  (cost=71.64..71.65 rows=1 width=280) (actual time=1278.651..1278.662 rows=60 loops=1)
         Sort Key: created_at
         Sort Method: top-N heapsort  Memory: 33kB
         ->  Index Scan using ix_coords on test  (cost=0.00..71.63 rows=1 width=280) (actual time=0.198..1278.227 rows=178 loops=1)
               Index Cond: (coords && '0101000020E61000006666666666E63C40C3F5285C8F824440'::geography)
               Filter: (((user_id)::text = '4f1092000b921a000100015c'::text) AND ('0101000020E61000006666666666E63C40C3F5285C8F824440'::geography && _st_expand(coords, 30000::double precision)) AND _st_dwithin(coords, '0101000020E61000006666666666E63C40C3F5285C8F824440'::geography, 30000::double precision, true))
               Rows Removed by Filter: 3122459
 Total runtime: 1278.701 ms 
```

更新：

根据下面的建议，我尝试了关于 cords + user_id 的索引：

```
CREATE INDEX ix_coords_and_user_id ON updates USING GIST (coords, user_id); 
```

..但得到以下错误：

```
ERROR:  data type character varying has no default operator class for access method "gist"
HINT:  You must specify an operator class for the index or define a default operator class for the data type. 
```

更新：

所以`CREATE EXTENSION btree_gist;`解决了 btree/gist 复合索引问题。现在我的索引看起来像

```
CREATE INDEX ix_coords_user_id_created_at ON test USING GIST (coords, user_id, created_at); 
```

注意：btree_gist 不接受 DESC/ASC。

新的查询计划：

```
Limit  (cost=134.99..135.00 rows=1 width=280) (actual time=273.282..273.292 rows=60 loops=1)
   ->  Sort  (cost=134.99..135.00 rows=1 width=280) (actual time=273.281..273.285 rows=60 loops=1)
         Sort Key: created_at
         Sort Method: quicksort  Memory: 41kB
         ->  Index Scan using ix_updates_coords_user_id_created_at on updates  (cost=0.00..134.98 rows=1 width=280) (actual time=0.406..273.110 rows=115 loops=1)
               Index Cond: ((coords && '0101000020E61000006666666666E63C40C3F5285C8F824440'::geography) AND ((user_id)::text = '4e952bb5b9a77200010019ad'::text))
               Filter: (('0101000020E61000006666666666E63C40C3F5285C8F824440'::geography && _st_expand(coords, 30000::double precision)) AND _st_dwithin(coords, '0101000020E61000006666666666E63C40C3F5285C8F824440'::geography, 30000::double precision, true))
               Rows Removed by Filter: 1
 Total runtime: 273.331 ms 
```

查询的性能比以前好，几乎快了一秒，但仍然不是很好。我想这是我能得到的最好的？？我希望在 60-80 毫秒左右。同样`order by created_at desc`从查询中提取，又减少了 100 毫秒，这意味着它无法使用索引。有任何解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T03:03:02.653

我不知道 Pg 是否可以将 GiST 索引和常规 b-tree 索引与位图索引扫描结合起来，但我怀疑不能。您可能会在不向`user_id`GiST 索引添加列的情况下获得最好的结果（因此对于其他不使用的查询来说，它会变得更大和更慢`user_id`）。

作为一个实验，你可以：

```
CREATE EXTENSION btree_gist;
CREATE INDEX ix_coords_and_user_id ON test USING GIST (coords, user_id); 
```

这可能会导致一个大索引，但可能会提升该查询 - 如果它有效。请注意，维护这样的索引将显着减慢`INSERT`和`UPDATE`s。如果您放弃旧`ix_coords`的查询，`ix_coords_and_user_id`即使它们不过滤，也会使用`user_id`，但它会比`ix_coords`. 保持两者都会使`INSERT`经济`UPDATE`放缓更加严重。

见[btree-gist](http://www.postgresql.org/docs/current/static/btree-gist.html)

* * *

（*通过编辑问题彻底改变了问题；编写时，用户有一个多列索引，他们现在分成两个独立的索引*）：

您似乎没有过滤或排序`user_id`，只是`create_date`。Pg 不会（不能？）只使用多列索引的第二项，例如`(user_id, create_date)`，它也需要使用第一项。

如果要索引`create_date`，请为其创建单独的索引。如果您使用并需要`(user_id, create_date)`索引并且通常不`user_id`单独使用，请查看是否可以反转列顺序。交替创建两个独立的索引 `(user_id)`和`(create_date)`. 当需要两列时，Pg 可以使用位图索引扫描组合两个独立的索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T04:35:41.607

我认为克雷格的回答是正确的，但我只是想添加一些东西（它不适合评论）

您必须非常努力地*强制*PostgreSQL 使用索引。查询优化器很聪明，有时它会认为顺序表扫描会更快。通常是对的！:) 但是，您可以使用一些设置（例如 seq_page_cost、random_page_cost 等）来尝试让它有利于索引。如果您觉得它没有做出正确的决定，这里是一些您可能想要检查的[配置的链接。](http://www.postgresql.org/docs/9.1/static/runtime-config-query.html)但是，再一次……我的经验是，大多数时候，Postgres 比我聪明！:)

希望这对您（或将来的某人）有所帮助。

# ios - 单元测试目标无法识别静态 csv 文件

> ID：12701198
> 
> 赞同：1
> 
> 时间：2012-10-03T02:37:08.087
> 
> 标签：ios, xcode4, xcode4.5, sentestingkit

我正在运行 Xcode 4.5，并且已将新的单元测试目标添加到现有项目中。

我在目标部分添加了一个 csv 文件`Copy Bundle Resources`，但目标没有将该文件识别为包的一部分。当我在 LLDB 中运行以下命令时，我得到 nil 结果：

```
po [NSBundle mainBundle]
(id) $2 = 0x01937180 NSBundle </Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/Developer/usr/bin> (loaded)

po [[NSBundle mainBundle] pathForResource:@"myFile" ofType:@"csv"]
(id) $3 = 0x00000000 <nil> 
```

是否有额外的步骤让目标识别文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T02:53:39.133

这是一个阅读文档类型的答案。

事实证明，调用`[NSBundle mainBundle]`不会加载包含目标文件的包。相反，我需要获取其他捆绑包标识符并使​​用该捆绑包。之后一切都按预期工作。

# python - 如何扩展 Python 类初始化

> ID：12701206
> 
> 赞同：43
> 
> 时间：2012-10-03T02:39:04.983
> 
> 标签：python, class, inheritance, initialization

我创建了一个基类：

```
class Thing():
    def __init__(self, name):
        self.name = name 
```

我想扩展该类并添加到**init**方法中，以便它`SubThing`同时具有 a`name`和 a`time`属性。我该怎么做？

```
class SubThing(Thing):
    # something here to extend the init and add a "time" property

    def __repr__(self):
        return '<%s %s>' % (self.name, self.time) 
```

任何帮助都是极好的。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-10-03T02:44:00.730

您可以`__init__`在子类中定义并调用`super`以适当地调用父母的`__init__`方法：

```
class SubThing(Thing):
    def __init__(self, *args, **kwargs):
        super(SubThing, self).__init__(*args, **kwargs)
        self.time = datetime.now() 
```

确保有你的基类子类`object`，因为它`super`不适用于旧式类：

```
class Thing(object):
    ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T02:43:24.103

您应该在其中编写另一个`__init__`方法，`SubThing`然后调用超类的构造函数来初始化其字段。

[此问答应该为您提供更多示例。](https://stackoverflow.com/questions/904036/chain-calling-parent-constructors-in-python)

# ios - 从委托调用时未输入协议方法

> ID：12701207
> 
> 赞同：0
> 
> 时间：2012-10-03T02:39:32.963
> 
> 标签：ios, delegates, protocols

我在我的应用程序中设置的协议和委托存在一些问题。我正在尝试将一些数据从一个类返回到视图控制器，但是当我尝试将其发送回来时，什么也没有发生......永远不会输入协议方法。

[我已经使用它](http://mobiledevelopertips.com/objective-c/the-basics-of-protocols-and-delegates.html)作为参考进行了多次设置，只是看不到我在哪里犯了错误，所以我想如果我分享我的代码，也许这里的某人可能能够看到我看不到的东西。

这是我写的代码。

**发送类.h**

```
@protocol SearchViewCachedData <NSObject>
- (void)sendMyArray:(NSArray *)array;
@end
//..
    __weak id <SearchViewCachedData> SearchViewDelegate;
//..
    @property (weak, nonatomic) id <SearchViewCachedData> SearchViewDelegate;
//.. 
```

**发送类.m**

```
@synthesize SearchViewDelegate;

//..

[[self SearchViewDelegate]sendMyArray:dictionaryArray]; 
```

**搜索视图.h**

```
@interface SearchViewController : UITableViewController <SearchViewCachedData> { 
```

**搜索视图.m**

```
- (void)sendMyArray:(NSArray *)array
{
    //Break point in here.. but its never reached.
} 
```

在这里发疯，所以任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T02:47:26.147

我感觉你的代表没有设置

检查以确保 searchViewDelegate 设置为实例值

```
if (self.searchViewDelegate != nil) {
    [self.searchViewDelegate sendArray:array];
} 
```

还。属性的第一个大小写应该是小写。类是大写的项目。

**修正案**

它可能被代码中的另一部分设置为零，或者您可能根本没有设置它。

在你合成你的委托的地方，你也可以创建一个 setter。

```
@synthesize searchViewDelegate = _searchViewDelegate;
- (void) setSearchViewDelegate:(id<SearchViewCachedData>) searchViewDelegate{
    if (searchViewDelegate != searchViewDelegate){ // Add breakpoint here to see when set is called.
        searchViewDelegate = searchViewDelegate;
    }
} 
```

# python - OpenCV + Python 相关：在这种情况下是否需要从 RGBA 转换为 RGB？

> ID：12701208
> 
> 赞同：2
> 
> 时间：2012-10-03T02:39:49.187
> 
> 标签：python, opencv

```
import cv
...
#Let boundaryPixel be the 24-bit representation of the color of the rectangle 
#(e.g., RED in this case)`
boundaryPixel = cv.RGB(255, 0, 0)`
print("valueIs: " + str(boundaryPixel))`
#(0.0, 0.0, 255.0, 0.0), 4 channels reversed?`
... 
```

鉴于上面的片段，我想知道为什么 OpenCV 会以这种方式返回值（即，反转并使用 4 个通道而不是 3 个）？

我总体上想要做的是我正在尝试扫描图像，搜索 RGB 值为 (255, 0, 0) 的像素。我最初的尝试是定义在这种情况下边界像素是什么，然后让我的循环搜索这些像素并将它们存储在某个地方。做了一些研究，我发现第 4 个值是 Alpha 通道，对吗？所以，我目前有类似（RED，GREEN，BLUE，ALPHA）的东西，但我不确定是否需要将 4 个通道转换为 3 个通道来实现我想要的：这是比较某个位置的 currentPixel（ X0, Y0) 并​​且如果它具有相同的值 (255, 0, 0)，我想保留它们以进行进一步的图像处理。

目前我也在使用 PIL 的`getdata()`方法来获取像素的值，因此我想定义边界像素是从什么开始的。我会在哪里遇到一些问题，我的方法是否经过深思熟虑？我不想转换整个图像。我只是希望能够将该像素与我已经定义的像素进行比较。

谢谢，如果你们需要更多信息或不清楚的地方，请告诉我！

# smalltalk - Smalltalk 无法识别已声明的临时变量

> ID：12701211
> 
> 赞同：3
> 
> 时间：2012-10-03T02:40:47.703
> 
> 标签：smalltalk, visualworks

因此，当谈到 Smalltalk 时，我完全是个新手，现在我正在编写一个非常简单的带有 GUI 的应用程序。这个应用程序所做的只是将两个输入字段中的两个操作数相加，并在第三个只读输入字段中显示总和。

我在 VisualWorks 识别我已经声明的临时变量时遇到问题。

我尝试用声明的临时变量突出显示任何行，它会说尚未声明此类变量；我想将它声明为临时、实例、共享等...这特别奇怪，因为当我通过 GUI 运行该方法时，它可以被接受甚至读取，（尽管我在将变量类型转换为整数时遇到问题) 但是如果我想打印或检查任何带有声明的临时变量的行，它会说它不能识别它，我想将它声明为这个或那个。

编码：

```
add
"adds two input fields"

| op1 op2 result |

op1 := #InputOperand1 value asInteger.
op2 := #InputOperand2 value asInteger.

result := op1 + op2.

^result 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T04:12:18.983

问题是只有您选择的文本会被编译和评估。如果您只选择一行，则变量声明不包含在编译代码中。如果您选择整个方法体进行评估（不包括方法签名），它应该可以正常工作。另一种选择是在编译器提示时只选择“create temp”，然后恢复到方法的保存版本以摆脱额外的 temp 声明。

# jquery - 如何使 Twitter Bootstrap 可折叠导航栏默认打开？

> ID：12701212
> 
> 赞同：0
> 
> 时间：2012-10-03T02:40:52.250
> 
> 标签：jquery, css, twitter-bootstrap, media-queries

如果在宽度小于 980 像素的浏览器窗口中 打开[Twitter Bootstrap 的 GitHub 页面，它就会被折叠。](http://twitter.github.com/bootstrap/)

单击右上角的按钮，它会展开以显示“主页”、“开始”、“脚手架”等选项。

有没有办法配置 Twitter Bootstrap（或编写一些自定义 CSS 或 JavaScript）以使其默认显示这些选项？

我担心的是一些用户不知道点击右上角的按钮来查看站点导航选项。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-26T11:20:01.263

你可以通过添加类来做到这`.in`一点`.container .nav-collapse.collapse`。

```
<div class="container">
  <div class="nav-collapse collapse"> <!-- collapsed state -->
   Some html element
  </div>
  <div class="nav-collapse collapse in"> <!-- expanded state -->
   Some html element
  </div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T02:56:37.167

您应该可以通过将高度设置`.container .nav-collapse.collapse`为自动来做到这一点。

切换菜单时发生的所有事情都是将高度设置为自动，并且从按钮中删除了折叠的类。

注意：我只通过我的控制台对此进行了测试，您可能不得不尝试如何直接应用高度。

# android - 从 Web 获取图像的 JSON 路径以在 ImageView 中显示图像

> ID：12701214
> 
> 赞同：0
> 
> 时间：2012-10-03T02:41:04.840
> 
> 标签：android, json, imageview

我有一个在 json 中提供图像路径的网站。我想获取此路径并在我的 ImageView 中显示图像。

提示：targetSdkVersion="15"

例子：

```
{
"count": "28",
"data": [
    {
        "id": "84",
        "thumb": "http://mmmmm.cccc.com/data/card/thum/a1f694f5ba0df9147c02b0c0c8cb83c2.jpg",
        "category": "Purchase",
        "title": "test",
        "locationname": "test",
        "latitude": "0",
        "longitude": "0"
    }
]
} 
```

在我的活动中：

```
ImageView iv = (ImageView) findViewById(R.id.imageView1);
iv.setImageResource(R.drawable.photo); // this show image that has in project and how about display image that using JSON path above 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T03:01:55.720

一旦您使用[json 解析](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)将图像路径解析为 url ..

```
url = "http://mmmmm.cccc.com/data/card/thum/a1f694f5ba0df9147c02b0c0c8cb83c2.jpg";

try {
  ImageView i = (ImageView)findViewById(R.id.imageView1);
  Bitmap bitmap = BitmapFactory.decodeStream((InputStream)new URL(url).getContent());
  i.setImageBitmap(bitmap); 
  } catch (MalformedURLException e) {
  e.printStackTrace();
 } catch (IOException e) {
e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T02:59:12.343

尝试这个

```
try{

URL ulrn = new URL(url);
HttpURLConnection con = (HttpURLConnection)ulrn.openConnection();
InputStream is = con.getInputStream();
Bitmap bmp = BitmapFactory.decodeStream(is);
if (null != bmp)
    iv.setImageBitmap(bmp);
else
    System.out.println("The Bitmap is NULL");

}catch(Exception e){}
} 
```

这里的url是你jsonparsing后得到的图片的路径。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T02:59:47.460

解析您的 json 并获取 URL，然后将它们放在我们的 URL 中[或](https://stackoverflow.com/questions/2471935/how-to-load-an-imageview-by-url-in-android) 方法[中](https://asantoso.wordpress.com/2008/03/07/download-and-view-image-from-the-web/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T05:18:09.123

```
String[] imageArray=null;
JSONObject json;
try {
      JSONObject jObject = new JSONObject(Your result Object here);
      json = jObject;
      JSONArray jdataObject = json.getJSONArray("data");
      jobOrderCodeArray = new String[jdataObject.length()];

      for(int i=0;i<jdataObject.length();i++){
          JSONObject jobj = jdataObject.getJSONObject(i);
          imageArray[i] = jobj.getString("thumb");
        }
    }
    catch(Exception e){
       e.printStackTrace();
    }

  for (int i = 0; i < imageArray.length; i++) {
        try {
          ImageView iv = (ImageView) findViewById(R.id.imageView1);
          Bitmap bitmap = BitmapFactory.decodeStream((InputStream)new URL(imageArray[i]).getContent());
          iv.setImageBitmap(bitmap); 
        } catch (MalformedURLException e) {
          e.printStackTrace();
        } catch (IOException e) {
          e.printStackTrace();
        }
    } 
```

# android - 以编程方式发送短信（未获得交付状态）

> ID：12701215
> 
> 赞同：0
> 
> 时间：2012-10-03T02:29:53.863
> 
> 标签：android, android-intent, sms

> **可能重复：**
> [以编程方式发送 SMS Android（未接收状态）](https://stackoverflow.com/questions/12701254/programatically-send-sms-android-not-receiving-status)

我正在逐字使用[此代码示例，除了我更改了](http://mobiforge.com/developing/story/sms-messaging-android)

```
 import android.telephony.gsm.SmsManager; 
```

至

```
 import android.telephony.SmsManager; 
```

SMS 发送良好，但我没有收到它已发送的 TOAST 消息（发送到网络）。我正在尝试将 SMS 集成到我的应用程序中，这很重要。我相信这是可以做到的，因为股票短信应用程序如何知道何时停止显示“发送圈”。相关代码部分如下：

```
 //---when the SMS has been delivered---
    registerReceiver(new BroadcastReceiver(){
        @Override
        public void onReceive(Context arg0, Intent arg1) {
            switch (getResultCode())
            {
                case Activity.RESULT_OK:
                    Toast.makeText(getBaseContext(), "SMS delivered", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case Activity.RESULT_CANCELED:
                    Toast.makeText(getBaseContext(), "SMS not delivered", 
                            Toast.LENGTH_SHORT).show();
                    break;                        
            }
        }
    }, new IntentFilter(DELIVERED)); 
```

我正在使用 Jelly Bean ROM，但我相信我不久前在 Gingerbread 和 ICS 上测试了相同的部分，结果相同。API 是否已更改或示例是否存在问题？如果有帮助，我正在测试三星 GSIII。我的旧测试是在 Epic 上进行的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T05:36:34.497

使用 Toast 进行测试可能会造成混淆，因为根据具体情况，可能不会发出 Toast 通知。尝试将其更改为 Log 调用或使用调试器查看该部分是否被调用。

# php - 返回了多少结果？

> ID：12701218
> 
> 赞同：0
> 
> 时间：2012-10-03T02:41:38.587
> 
> 标签：php, zend-framework, gdata

我正在对工作表执行查询。如果它存在，我想更新该行，如果它不存在，我想插入它。如何检查结果是否返回？

```
$query = new Zend_Gdata_Spreadsheets_ListQuery();
$query->setSpreadsheetKey($this->currKey);
$query->setWorksheetId($this->currWkshtId);
$query->setSpreadsheetQuery('cid = ' . $data['cid']);
$listFeed = $this->gdClient->getListFeed($query);

// This does not work!
if(empty($listFeed)){
 echo 'No results found!';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T03:24:35.323

看起来你想要

```
if(empty($listFeed->entries)){
    echo 'No results found!';
} 
```

正如 Dagon 建议的那样（也许有点简洁），如果这不起作用，包括一些 var_dump 输出将很有帮助。

# loops - jquery - 将 .each() 循环放入 for 循环中？

> ID：12701220
> 
> 赞同：0
> 
> 时间：2012-10-03T02:41:46.540
> 
> 标签：loops, nested-loops

主题：滚筒德比。我有8支球队，每支球队有4名球员。我将在网格中的页面上显示团队。8 支球队被 4 名球员淘汰。当您翻转任何一名球员时，同一支球队的所有球员都会亮起。

它看起来像这样......

XXXXXXXXX
XXXXXXXXX
XXXXXXXXX
XXXXXXXXX

每个玩家都是一个 div，每个团队都有一个类（“team1”“team2”“team3”......）。如何循环遍历每个团队并嵌套循环每个玩家以添加更改团队类属性的功能？

这就是我目前拥有的（这有效，但仅适用于“team1”）......

```
$(document).ready(function() {
        $('.team1').mouseenter(function(){
            $('.team1').css('background-color', '#f79a00');
            $('.defaultTeam').css('background-color', '#8c2559');
        });

        $('.team1').mouseleave(function(){
            $('.team1').css('background-color', '#8c2559');
            $('.defaultTeam').css('background-color', '#f79a00');
        });
}); 
```

我可以对每个团队进行硬编码，但如果我有 100 个团队呢？这就是我正在拍摄的（目前不工作）......

```
$(document).ready(function() {
    for (var t=0;t<9;t++){
        $('.team'+t).mouseenter(function(){
            $('.team'+t).css('background-color', '#f79a00');
            $('.defaultTeam').css('background-color', '#8c2559');
        });

        $('.team'+t).mouseleave(function(){
            $('.team'+t).css('background-color', '#8c2559');
            $('.defaultTeam').css('background-color', '#f79a00');
        });
    }
}); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T03:54:54.307

问题是`t`函数执行时的值与定义 mouseenter/leave 处理程序中的匿名函数时不同。

见[http://www.javascriptkit.com/javatutors/closures.shtml](http://www.javascriptkit.com/javatutors/closures.shtml)

```
$(document).ready(function() {
    function me(t){
        return function(){
            $('.team'+t).css('background-color', '#f79a00');
            $('.defaultTeam').css('background-color', '#8c2559');
        }
    }
    function ml(t){
        return function(){
            $('.team'+t).css('background-color', '#8c2559');
            $('.defaultTeam').css('background-color', '#f79a00');
        }
    }
    for (var t=0;t<20;t++){
        $('.team'+t).mouseenter(me(t));     
        $('.team'+t).mouseleave(ml(t));
    }
}); 
```

# c++ - 分配嵌套的 STL 容器时使用哪个分配器？

> ID：12701221
> 
> 赞同：3
> 
> 时间：2012-10-03T02:41:57.693
> 
> 标签：c++, stl, map, vector, allocator

我有一个关于 STL 类和分配器的问题，在网上似乎不容易找到。有谁知道嵌套 STL 类中使用了哪个分配器？例如：

```
typedef std::vector<int> myvect; 
```

//下面的行已按照后续回复/评论所指出的那样进行了编辑

```
typedef std::map<int, myvect, std::less<int>, A> mymap; //uses my custom allocator for map creation 
```

让我们调用默认分配器`D`，并假设我有一个自定义分配器`A`。

如果我执行以下操作会发生什么：

*   创建地图：

    ```
    mymap mapInstance; 
    ```

*   现在，假设存在一个条目`mapInstance[0]`，假设我将一个值推入向量：

    ```
    mapInstance[0].push_back(999); 
    ```

什么分配器用于向量的动态内存`mapInstance[0]`？

到目前为止，我的理解`D`是使用了默认分配器，但我想确认`A`没有使用传递给地图的自定义分配器。（据我所知，这只会发生在我使用某种嵌套分配选项的情况下。）

当然，我知道元数据/标头信息`mapInstance[0]`是使用自定义分配器分配的`A`。我关心的是*动态*内存部分，也就是`d_dataBegin`.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-08T22:20:50.043

您的问题与[Scoped Allocator Model](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2554.pdf)相关，这是一种分配器设计风格，可自动将容器的分配器传播到容器的元素，这样您就可以确保容器的所有元素都是从同一个分配器分配的。更多关于下面的内容。

要回答您的问题：

1）容器默认不使用作用域分配器模型，你必须明确地请求它（见`scoped_allocator_adaptor`下文）

2）您的嵌套容器是类型`std::vector<int>`，这意味着它使用默认`std::allocator<int>`分配器，并且该类型的所有实例都是相等的，因此您的问题的答案是它使用标准分配器 - 哪个都没有关系，因为每个`std::allocator<int>`都是相同的。

* * *

**这个答案的其余部分只是一个思想实验，你的问题的答案在上面：`vector<int>` *总是*使用`std::allocator<int>`**

现在，如果您的嵌套类型是自定义分配器在`std::vector<int, A1<int>>`哪里，`A1<int>`那么问题会变得更有趣。

嵌套容器将使用构建它的分配器，而您还没有展示这一点，因为您已经说过“*假设存在一个条目`mapInstance[0]`*”，并且该条目的创建方式决定了它将使用什么分配器。

如果该条目是这样创建的：

```
mapInstance[0]; 
```

那么该条目是默认构造的，并将使用默认构造的`A1<int>`。

如果该条目是这样创建的：

```
A1<int> a1( /* args */ );
myvect v(a1)
mapInstance.insert(mymap::value_type(0, v)); 
```

那么条目将是的副本，`v`在 C++03 中，它的分配器将是 的副本`v.get_allocator()`，但在 C++11 中，它的分配器将是 的副本`std::allocator_traits<A1<int>>::select_on_container_copy_construction(v.get_allocator())`，它*可能*是的副本，`v.get_allocator()`但可能有所不同（例如默认构造的`A1`。）

（在 C++03 中，条目的分配器在创建后无法更改，因此答案将在此处结束，但在 C++11 中它可以被替换。我假设我们在这个问题的其余部分谈论 C++11 ，因为分配器在 C++03 中不是很有趣。）

如果该条目被这样修改：

```
A1<int> a1( /* args */ );
myvect v(a1)
mapInstance[0] = v; 
```

然后向量被复制分配到，这*可能会*替换分配器，具体取决于`std::allocator_traits<A1<int>>::propagate_on_container_copy_assignment::value`

如果该条目被这样修改：

```
A1<int> a1( /* args */ );
mapInstance[0] = myvect(a1); 
```

然后向量被移动分配到，这*可能会*替换分配器，具体取决于`std::allocator_traits<A1<int>>::propagate_on_container_move_assignment::value`

如果该条目被这样修改：

```
A1<int> a1( /* args */ );
myvect v(a1)
swap( mapInstance[0], v ); 
```

然后向量被交换，这*可能会*替换分配器，具体取决于`std::allocator_traits<A1<int>>::propagate_on_container_swap::value`

* * *

现在，如果`A`事情`std::scoped_allocator_adaptor<A1<std::pair<const int, myvect>>>`变得更加有趣！`scoped_allocator_adaptor`顾名思义，它是一个适配器，它允许任何分配器类型与 Scoped Allocator Model 一起使用，这*意味着*容器的分配器可以传递给容器的子代，以及它的子代的子代等（只要这些类型使用分配器并且可以用它们构造。）

**默认情况下，容器和分配器*不***使用您需要**使用的作用域分配器模型**`scoped_allocator_adaptor`（或编写您自己的工作方式相同的分配器类型）来使用它。（而且 C++03 根本不支持作用域分配器。）

如果该条目是这样创建的：

```
mapInstance[0]; 
```

然后不是默认构造的条目，`scoped_allocator_adaptor`而是使用映射分配器的副本构造它，因此条目将像`myvect( A1<int>(mapInstance.get_allocator()) )`.

如果该条目是这样创建的：

```
A1<int> a1( /* args */ );
myvect v(a1)
mapInstance.insert(mymap::value_type(0, v)); 
```

那么该条目将拥有`v`的数据的副本，但不会使用其分配器，而是由 传递一个分配器`scoped_allocator_adaptor`，因此将被构造为：`myvect( v, A1<int>(mapInstance.get_allocator()) )`。

* * *

如果这有点令人困惑，欢迎来到我的世界，但别担心，在你的情况下`vector<int>`将*始终*使用`std::allocator<int>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T04:15:58.870

默认分配器`D`用于`push_back`调用。

实际上，默认分配器也被使用`map`，因为容器的*类型*指定使用默认分配器。假设您`A`继承自`std::allocator`，所发生的一切就是您的分配器被切片为默认分配器，并且容器的行为就像您根本没有传递分配器实例一样。

# asp.net - 请求的操作所需的高度

> ID：12701222
> 
> 赞同：0
> 
> 时间：2012-10-03T02:42:31.573
> 
> 标签：asp.net

我试图以管理员身份运行 aspnet_regiss.exe -ir 但返回以下错误：

![在此处输入图像描述](../Images/3f4448aa88be153e746a23685ce518c0.png)

为什么需要这样做？我是这台机器的管理员？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T02:43:41.737

您需要以管理员身份运行命令提示符。只需右键单击命令提示符（在您的开始菜单中）并选择“以管理员身份运行”

# certificate - Passbook pass 无法安装

> ID：12701230
> 
> 赞同：3
> 
> 时间：2012-10-03T02:44:10.817
> 
> 标签：certificate, ios6, pki, passbook

我创建了一个适用于 iOS 6 beta 4 的通行证，但现在无法在 iOS 6 最终版本中安装。该通行证在设备上显示正常，但在点击添加时在 Console.app 中出现以下错误：

> 10/10/2012 11:39:56.460 passd[47329]：无效数据错误读取卡 pass.com.test.example/serial_number。提供的 passTypeIdentifier 或 teamIdentifier 可能与您的证书不匹配，或者无法验证证书信任链。

既然知道证书，passTypeIdentifier和teamIdentifier都是对的，只能是证书链。我在用于导出通行证的计算机上安装了 WWDR 证书，为什么会出现此错误？证书链没有被导出吗？

我们正在使用[PHP PKPass](https://github.com/tschoffelen/PHP-PKPass)生成通行证。

如果重要，我正在使用内部许可证并分发到其中一个注册设备。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T04:08:55.240

问题确实是未将 WWDR 证书添加到 manifest.json 签名中。这实际上在最新版本的 PHP PKPass 中得到了解决（浪费了很多时间来研究这个问题，而不是仅仅检查它是否已在最新版本上修复：S）

# ios - 如何在我的 iOS 应用程序中显示密码视图？

> ID：12701231
> 
> 赞同：1
> 
> 时间：2012-10-03T02:44:16.380
> 
> 标签：ios, ipad, uinavigationcontroller, passwords, uitableview

我的 ipad 应用程序的情节提要中有这个布局。
NavRootController--->LoginVC--->TabViewController(5个标签)

我添加了我想在“ApplicationDidEnterForeground”中模态显示的 PassCodeVC，当输入代码时，它会转到用户最后所在的视图。我不确定哪个控制器会显示 PassCodeViewController？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:40:21.217

rootView 控制器提供 PassCodeView。我从 ApplicationDidEnterForeground 模态显示了密码视图。

# java - 如何添加用户在 Sphinx 4（语音识别）中选择的关键字？

> ID：12701232
> 
> 赞同：1
> 
> 时间：2012-10-03T02:44:28.247
> 
> 标签：java, speech-recognition, sphinx4

我想知道如何使用 GRAM 文件在 Java 中使用 sphinx 4 将自定义关键字添加到语音识别中？

喜欢：public =（设置歌曲）；

我将如何做到这一点，以便在“设置歌曲”之后用户可以说出他想要的任何内容并且它仍然会被解析？

```
 URL url = LulzSpeech.class.getResource("lulzspeech.config.xml");;

        System.out.println("Loading input...");

        ConfigurationManager cm = new ConfigurationManager(url);

        Recognizer recognizer = (Recognizer) cm.lookup("recognizer");
        Microphone microphone = (Microphone) cm.lookup("microphone");

        recognizer.allocate();

        if (microphone.startRecording()) {

            System.out.println("Loading input completed, mic working, ready!");

            try{
            while (true) {
                Thread.sleep(50);

                Result result = recognizer.recognize();

                if (result != null)
                    if(result.getBestFinalResultNoFiller().toLowerCase().contains(MainLulz.programName.toLowerCase()))
                        MainLulz.mainVoiceHandler.handleInput(result.getBestFinalResultNoFiller());
            }
            }catch(Exception e){
                e.printStackTrace();
            }
        } else {
            System.out.println("Cannot start microphone.");
            recognizer.deallocate();
            System.exit(1);
        }
    } catch (IOException e) {
        System.err.println("Problem when loading LulzSpeech input: " + e);
        e.printStackTrace();
    } catch (PropertyException e) {
        System.err.println("Problem configuring LulzSpeech input: " + e);
        e.printStackTrace();
    } catch (InstantiationException e) {
        System.err.println("Problem creating LulzSpeech input: " + e);
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T22:55:38.290

当前版本的 Sphinx-4 中未实现关键字检测功能。您无法轻松检测关键字。

# ruby-on-rails - 使用替代方案绕过类似 iframe 的安全性

> ID：12701233
> 
> 赞同：0
> 
> 时间：2012-10-03T02:44:47.277
> 
> 标签：ruby-on-rails

我想显示一个网页，我通过在用户浏览器中注入代码来修改该网页。像这样：

*   用户访问 a.mysite.com
*   用户在 a.mysite.com 的框中看到 google.com 的内容，包括样式等
*   google.com 的内容在 ma.mysite.com 进行了修改

显然，如果我不想要第三部分，iframe 将是一个完美的解决方案。但是浏览器安全模型（适当地）阻止我修改内容。

有没有一种简单的方法可以在 Rails 中使用 iframe 之类的东西，但允许我注入 javascript 或类似的东西？这不适用于网络钓鱼，因为用户会知道我在他们和页面之间 - 实际上这是用户明确想要的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T05:45:36.120

您可以提供一个代理（因此实际的浏览器请求是到您的站点），它将重写页面的某些部分，以将页面中的相对 url 解析为指向您的代理的 url。

这可能不适用于所有地方，因为某些代码可能需要检查它是否从一个地方或另一个地方加载（我前一段时间在 Flash 视频播放器中实施了这样的安全措施），并且因为您最终可能代理了太多的调用。

但这是我所知道的最接近的方式

# javascript - 使用 node.js 的 mongodb-native 绑定构建数据库对象

> ID：12701235
> 
> 赞同：0
> 
> 时间：2012-10-03T02:44:58.857
> 
> 标签：javascript, node.js, mongodb, node-mongodb-native, nosql

我正在创建一个可以在整个服务器中重用的对象。但是，通过以下示例，我得到了两个“创建”调用。任何想法为什么？我可以更好地构造这个吗？

```
var mongo = require('mongodb');
var Server = mongo.Server;
var Db = mongo.Db;
var server = new Server('localhost', 27017, {auto_reconnect: true});

var Database = function(name) {
  this.db = new Db(name, server);
};

Database.prototype.create = function(collection, document, callback) { var db = this.db;

  db.open(function(error, db) {
    if (!error) {
      db.createCollection(collection, function(error, collection) {
        collection.insert(document, {safe: true}, function(error, result) {
          if (error) return callback(error, null);
          return callback(null, result);
        });
      });
    }
    return callback(error, null);
  }); 
};

var data = new Database('foo');
data.create('testing', {'foo': 'bar'}, function(err, result) {
  console.log(result);
}); 
```

运行该文件会导致：

```
kenneth@apollo:~/Projects/dwibbles$ node db.js 
null
[ { foo: 'bar', _id: 506ba4b0e3441ab82a000001 } ] 
```

为什么这被调用两次？

> 控制台.log（结果）；

更新：有人指出我的条件不正确。

```
if (!error) {
  db.createCollection(collection, function(error, collection) {
    collection.insert(document, {safe: true}, function(error, result) {
      if (error) return callback(error, null);
      return callback(null, result);
    });
  });
} else {
  return callback(error, null);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T02:52:11.117

在下面的评论中查看原因：

```
Database.prototype.create = function(collection, document, callback) { 
  var db = this.db;
  db.open(function(error, db) {
    if (!error) {
      db.createCollection(collection, function(error, collection) {
        collection.insert(document, {safe: true}, function(error, result) {
          if (error) return callback(error, null);
          return callback(null, result);
        });
      });
    }
    return callback(error, null); // This line gets executed in the !error case too
  }); 
}; 
```

修理：

```
Database.prototype.create = function(collection, document, callback) { 
  var db = this.db;
  db.open(function(error, db) {
    if (!error) {
      db.createCollection(collection, function(error, collection) {
        collection.insert(document, {safe: true}, function(error, result) {
          if (error) return callback(error, null);
          return callback(null, result);
        });
      });
    } else {
      return callback(error, null);
    }
  }); 
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T02:53:43.640

您的回调实际上被调用了两次：

```
 db.open(function(error, db) {
    if (!error) {
      db.createCollection(collection, function(error, collection) {
        collection.insert(document, {safe: true}, function(error, result) {
          if (error) return callback(error, null);
          return callback(null, result); <-- this one gets called on collection insert
        });
      });
    }
    return callback(error, null); <-- this one gets called immediately after db open
  }); 
```

你的意思可能是这样的：

```
 db.open(function(error, db) {
    if (error) {
        return callback(error);
    }

    db.createCollection(collection, function(error, collection) {
      collection.insert(document, {safe: true}, function(error, result) {
        if (error) return callback(error, null);
        return callback(null, result); <-- this one gets called on collection insert
      });
    });

  }); 
```

# openerp - 如何在 date_due 过去后自动添加管理费到开票？

> ID：12701236
> 
> 赞同：0
> 
> 时间：2012-10-03T02:45:00.350
> 
> 标签：openerp

在 date_due 过去后，谁能帮我自动向未结发票添加费用？例如，我在 res.company 中设置了管理费，当发票超过到期日时会调用该管理费。

问候，乔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T06:45:48.710

如果你想要它自动添加一个`scheduler`. 调度程序功能应在到期日之后搜索所有未清发票，并添加新的发票行和管理费或将管理费添加到现有的发票行。例如，下面是一个可用于创建调度程序的数据 xml。XML 部分

```
<record forcecreate="True" id="ir_cron_auto_invoice_scheduler_action" model="ir.cron">
    <field name="name">Run Automatic Invoice scheduler</field>
    <field eval="True" name="active"/>
    <field name="user_id" ref="base.user_root"/>
    <field name="interval_number">1</field>
    <field name="interval_type">days</field>
    <field name="numbercall">-1</field>
    <field eval="True" name="doall"/>
    <field eval="'your.model.name'" name="model"/><!--here it is account.invoice-->
    <field eval="'automatic_invoice_scheduler'" name="function"/>
    <!--its a new function in account.invoice model-->
    <!-- from which you can search all the invoices and what you need-->
    <field eval="'(False,)'" name="args"/>
</record> 
```

Python部分

```
#Its just a example function.make necessary changes
#Inherit the account_invoice and add the function
import time
def automatic_invoice_scheduler(self, cr, uid, ids,context=None):
    ids = self.search(cr, uid,[('date_invoice','<=',time.strftime('%Y-%m-%d %H:%M:%S'),('state','open'),('due_added','=',False)], context=context)
    #due added is a new field you have to add so that once the due
    # is added then its invoice id is not added in the scheduler
    ###########################
    #Add your code here.add the due_fees to the invoice lines
    #write the due_added boolean field to true
    ###########################
    return True 
```

# c++ - Cocos2d-x : 从 CCTime 转换为 SEL_SCEDULE 错误

> ID：12701239
> 
> 赞同：1
> 
> 时间：2012-10-03T02:46:12.597
> 
> 标签：c++, cocos2d-x

我是刚学 cocos2d-x 原生教程的初学者，我面临着一堵巨大的墙！

这是我的错误：

```
>c:\cocos2d-2.0-x-2.0.3\cocos2dsimplegame\classes\helloworldscene.cpp(86): error C2440:      'type cast' : cannot convert from 'void (__thiscall HelloWorld::* )(cocos2d::CCTime)' to 'cocos2d::SEL_SCHEDULE' 
>Pointers to members have different representations; cannot cast between them 
```

我的 cpp 文件：

```
 #include "HelloWorldScene.h"

using namespace cocos2d;

CCScene* HelloWorld::scene()
{
    CCScene * scene = NULL;
    do 
    {
        // 'scene' is an autorelease object
        scene = CCScene::create();
        CC_BREAK_IF(! scene);

        // 'layer' is an autorelease object
        HelloWorld *layer = HelloWorld::create();
        CC_BREAK_IF(! layer);

        // add layer as a child to scene
        scene->addChild(layer);
    } while (0);

    // return the scene
    return scene;
}

// on "init" you need to initialize your instance
bool HelloWorld::init()
{
    bool bRet = false;

    _targets = CCArray::create();
    _projectiles = CCArray::create();

    do {
        ////////////////////
        // super init first
        ////////////////////

        if ( !CCLayerColor::initWithColor( ccc4(255, 255, 255, 255) ) )
        {
            return false;
        }

        ////////////////////
        // add your codes below..
        ////////////////////

        // 1\. Add a menu item with "X" image, which is clicked to quit the program.

        // Create a "close" menu item with close icon, it's an auto release object.
        CCMenuItemImage *pCloseItem = CCMenuItemImage::itemWithNormalImage(
            "CloseNormal.png",
            "CloseSelected.png",
            this,
            menu_selector(HelloWorld::menuCloseCallback));
        CC_BREAK_IF(! pCloseItem);

        // Place the menu item bottom-right conner.
        pCloseItem->setPosition(ccp(CCDirector::sharedDirector()->getWinSize().width - 20, 20));

        //Create a menu with the "close" menu item, it's an auto release object.
        CCMenu* pMenu = CCMenu::menuWithItems(pCloseItem, NULL);
        pMenu->setPosition(CCPointZero);
        CC_BREAK_IF(! pMenu);

        //Add the menu to HelloWorld layer as a child layer.
        this->addChild(pMenu, 1);

        //////////////////////
        // 2\. add your codes below...

        CCSize winSize = CCDirector::sharedDirector()->getWinSize();
        CCSprite *player = CCSprite::spriteWithFile("Player.png", CCRectMake(0, 0, 27, 40));
        player->setPosition(ccp(player->getContentSize().width/2, winSize.height/2));
        this->addChild(player);

        bRet = true;
    } while (0);

    // Call game logic about every second
    this->schedule( schedule_selector(HelloWorld::gameLogic), 1.0);
    // You can shoot the bullet
    this->setTouchEnabled(true);
    this->schedule( schedule_selector(HelloWorld::update) );

    return bRet;
}

void HelloWorld::menuCloseCallback(CCObject* pSender)
{
    // "close" menu item clicked
    CCDirector::sharedDirector()->end();
}

void HelloWorld::addTarget()
{
    CCSprite *target = CCSprite::spriteWithFile("Target.png", CCRectMake(0, 0, 27, 40));

    // Determine where to spawn the target along the Y axis
    CCSize winSize = CCDirector::sharedDirector()->getWinSize();
    int minY = target->getContentSize().height/2;
    int maxY = winSize.height - target->getContentSize().height/2;

    int rangeY = maxY - minY;
    // srand( TimGetTicks() );
    int actualY = ( rand() % rangeY ) + minY;

    // Create the target slightly off-screen along the right edge,
    // and along a random position along the Y axis as calculated
    target->setPosition( ccp(winSize.width + (target->getContentSize().width/2), actualY) );
    this->addChild(target);

    // Determine speed of the target
    int minDuration = (int)2.0;
    int maxDuration = (int)4.0;
    int rangeDuration = maxDuration - minDuration;
    // srand( TimGetTicks() );
    int actualDuration = ( rand() % rangeDuration ) + minDuration;

    // Create the actions
    CCFiniteTimeAction* actionMove = CCMoveTo::actionWithDuration( (float)actualDuration, ccp(0 - target->getContentSize().width/2, actualY) );
    CCFiniteTimeAction* actionMoveDone = CCCallFuncN::actionWithTarget( this, callfuncN_selector(HelloWorld::spriteMoveFinished) );
    target->runAction( CCSequence::actions( actionMove, actionMoveDone, NULL) );

    // Add to targets array
    target->setTag(1);
    _targets->addObject(target);
}

void HelloWorld::spriteMoveFinished(CCNode* sender) 
{
    CCSprite *sprite = (CCSprite *)sender;
    this->removeChild(sprite, true);

    if (sprite->getTag() == 1) // target
    {
        _targets->removeObject(sprite);
    }
    else if (sprite->getTag() == 2) // projectile
    {
        _projectiles->removeObject(sprite);
    }
}

void HelloWorld::gameLogic(float dt) 
{
    this->addTarget();
}

void HelloWorld::ccTouchesEnded(CCSet* touches, CCEvent* event)
{
    // Choose one of the touches to work with
    CCTouch* touch = (CCTouch*)( touches->anyObject() );
    CCPoint location = touch->locationInView();
    location = CCDirector::sharedDirector()->convertToGL(location);

    // Set up initial location of projectile
    CCSize winSize = CCDirector::sharedDirector()->getWinSize();
    CCSprite *projectile = CCSprite::spriteWithFile("Projectile.png", CCRectMake(0, 0, 20, 20));
    projectile->setPosition( ccp(20, winSize.height/2) );

    // Determine offset of location to projectile
    int offX = location.x - projectile->getPosition().x;
    int offY = location.y - projectile->getPosition().y;

    // Bail out if we are shooting down or backwards
    if (offX <= 0) return;

    // OK to add now - we've double checked position
    this->addChild(projectile);

    // Determine where we wish to shoot the projectile to
    int realX = winSize.width + (projectile->getContentSize().width/2);
    float ratio = (float)offY / (float)offX;
    int realY = (realX * ratio) + projectile->getPosition().y;
    CCPoint realDest = ccp(realX, realY);

    // Determine the length of how far we're shooting
    int offRealX = realX - projectile->getPosition().x;
    int offRealY = realY - projectile->getPosition().y;
    float length = sqrtf((offRealX * offRealX) + (offRealY * offRealY));
    float velocity = 480/1; // 480pixels/1sec
    float realMoveDuration = length/velocity;

    // Move projectile to actual endpoint
    projectile->runAction( CCSequence::actions( CCMoveTo::actionWithDuration(realMoveDuration, realDest), CCCallFuncN::actionWithTarget(this, callfuncN_selector(HelloWorld::spriteMoveFinished)), NULL) );

    // Add to projectiles array
    projectile->setTag(2);
    _projectiles->addObject(projectile);
}

void HelloWorld::update(CCTime dt)
{
    CCArray *projectilesToDelete = CCArray::create();
    CCObject* arrayItem1;
    CCARRAY_FOREACH(_projectiles, arrayItem1)
    {
        CCSprite* projectile = (CCSprite*)arrayItem1;
        CCRect projectileRect = CCRectMake(
            projectile->getPosition().x - (projectile->getContentSize().width/2),
            projectile->getPosition().y - (projectile->getContentSize().height/2),
            projectile->getContentSize().width,
            projectile->getContentSize().height);

        CCArray* targetsToDelete = CCArray::create();

        CCObject* arrayItem2;
        CCARRAY_FOREACH(_targets, arrayItem2)
        {
            CCSprite* target = (CCSprite*) arrayItem2;
            CCRect targetRect = CCRectMake(
                target->getPosition().x - (target->getContentSize().width/2),
                target->getPosition().y - (target->getContentSize().height/2),
                target->getContentSize().width, 
                target->getContentSize().height);

            if (CCRect::CCRectIntersectsRect(projectileRect, targetRect))
            {
                targetsToDelete->addObject(target);
            }
        }

        CCARRAY_FOREACH(targetsToDelete, arrayItem2)
        {
            CCSprite* target = (CCSprite*) arrayItem2;
            _targets->removeObject(target);
            this->removeChild(target, true);
        }

        if (targetsToDelete->count() > 0)
        {
            projectilesToDelete->addObject(projectile);
        }
        targetsToDelete->release();
    }

    CCARRAY_FOREACH(projectilesToDelete, arrayItem1)
    {
        CCSprite* projectile = (CCSprite*) arrayItem1;
        _projectiles->removeObject(projectile);
        this->removeChild(projectile, true);
    }
    projectilesToDelete->release();
} 
```

也许这部分是一个问题：

```
bool HelloWorld::init() 
{
....
this->schedule( schedule_selector(HelloWorld::update) );
....
} 
```

但我不明白为什么这部分是一个问题。

请帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T02:52:35.370

更改`CCTime`为`float`.

`ccTime`在旧的 cocos2d-x 版本中，他们有`CCTime`

但在 2.0 中，他们将其删除。因为它与浮点数重复。

# javascript - 如何在“popupopen”事件期间识别 Leaflet 的标记？

> ID：12701240
> 
> 赞同：22
> 
> 时间：2012-10-03T02:46:17.580
> 
> 标签：javascript, jquery, gis, openstreetmap, leaflet

单击标记时，我需要执行一些代码来找到`id`与被单击的标记相对应的代码，从后端 API 检索数据，然后将新检索到的数据添加到`content`将打开的弹出窗口中。

能够在标记上监听点击事件的唯一方法是

```
map.on('popupopen', function(e){
    // How to retrieve marker?
    // eg: Assign an id on creation, retrieve it now during popupopen
};) 
```

我怎样才能找出这是哪个标记？是否可以为每个标记添加一个`id`属性，然后`id`在`popupopen`事件期间检索它？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-03T16:41:14.300

事件对象包含一个“弹出”属性，该属性具有一个名为“_source”的私有属性，该属性是弹出窗口绑定到的对象（即标记）。由于 _source 应该是私有的，这似乎不是正确的方法，但我不知道该怎么做。

```
map.on('popupopen', function(e) {
  var marker = e.popup._source;
}); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-11-13T17:17:33.393

Javascript 对象可以在其上定义任何属性。创建弹出窗口时，将 popup.marker 设置为引用的标记。然后您可以稍后在事件处理程序中访问它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-08T09:23:12.430

要获取标记 ID，您可以使用以下代码：

```
map.on('popupopen', function(e) {
  var marker = e.popup._source.feature.properties.markerid;
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-09T22:55:45.817

其他答案不起作用，但这确实：

```
map.on('popupopen', function(e) { alert(e.popup._source._popup._content); }); 
```

猜猜这个库非常不稳定......我不确定为什么首先传输此类信息会如此复杂。<耸肩>

# java - 谷歌浏览器插件不适用于 chrome

> ID：12701242
> 
> 赞同：2
> 
> 时间：2012-10-03T02:46:38.227
> 
> 标签：java, google-chrome, gwt

我已经使用 google web toolkit 开发了一个网站，并且该网站在 firefox 上运行良好。但是，在 google chrome 中，该插件不适用于 Google chrome。我当前的 google chrome 版本是 22。它最初给出了这个错误

![在此处输入图像描述](../Images/673cf14c2afad72a0ccd2f00465a878a.png)

[通过在以下链接http://code.google.com/p/google-web-toolkit/issues/detail?id=7569](http://code.google.com/p/google-web-toolkit/issues/detail?id=7569)上找到解决方案，我已将 google chrome 插件添加到 chrome 的扩展中

但是，在将 Google chrome 插件添加到扩展程序后，它给了我以下错误：![在此处输入图像描述](../Images/d3389354bf5a05cfd807a773185cf89c.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T08:43:38.713

Google Chrome 和 GWT DevMode 插件目前存在一些问题 - GWT 团队正在努力解决这个问题。始终赶上所有浏览器的最新版本并不容易。而且我不希望他们将所有资源都花在这样做上。

作为一名 GWT 应用程序开发人员，我知道插件停止工作时会很痛苦，因为浏览器发布频繁，并且现在会自动更新。

但是，我建议 GWT 应用程序开发人员稍微改变一下策略：问问自己，如果你真的需要*在开发模式下使用**最新*版本的浏览器进行测试，你可以

 **   在生产模式（或者超级开发模式）下使用最新版本的浏览器进行测试
*   在开发模式下使用稍旧版本的浏览器进行开发。

它很容易安装，例如一个稍微过时的 Chromium 版本，与 Chrome 并排安装。这并不意味着不应该快速修复插件问题，但它在浏览器发布后至少给 GWT 团队提供了几周的时间 - 对 GWT 应用程序开发人员没有真正的缺点。

也许这应该是使用 DevMode 的官方建议，即插件应该提供描述如何在另一个版本的浏览器中安装它而不是安装失败（它已经为 Safari/Mac 做到了！）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T08:34:52.953

您的最后一个问题是[http://code.google.com/p/google-web-toolkit/issues/detail?id=5778](http://code.google.com/p/google-web-toolkit/issues/detail?id=5778)

在[http://code.google.com/p/google-web-toolkit/issues/detail?id=7569](http://code.google.com/p/google-web-toolkit/issues/detail?id=7569)方面，该插件尚未针对 Windows 重新编译，但应修复并部署到 Chrome Web店铺。*

# php - 使用 JURI::current() 时出错；在 facebook 中就像在 joomla 中一样？

> ID：12701244
> 
> 赞同：0
> 
> 时间：2012-10-03T02:46:58.780
> 
> 标签：php, joomla

我有一个例子：当我输入链接 url（例如：[http://test.html](http://test.html)）并且喜欢这个页面中的 facebook

```
<div id="fb-root"></div>
<fb:like send="true" layout="button_count" width="50" show_faces="false" href="<?php echo JURI::current(); ?>" action="like" colorscheme="light" font=""></fb:like> 
```

但是当我访问 facebook 是 url 是：

```
http://test.html?fb_action_ids=214927585304828&fb_action_types=og.likes&fb_source=aggregation&fb_aggregation_id=288381481237582 
```

如何解决它，结果是`http://test.html`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T03:01:56.930

尝试使用`$_SERVER["REQUEST_URI"];`这可能会给你正在寻找的东西......

干杯。

# wordpress - Wordpress - 根据日期的类别列表（顶部最新）

> ID：12701246
> 
> 赞同：-1
> 
> 时间：2012-10-03T02:47:14.987
> 
> 标签：wordpress, list, sorting, categories

我尝试过搜索，但找不到解决方案。

我要列出类别，但必须根据添加日期对其进行排序。最新添加的类别应位于顶部，而最旧的类别应位于底部。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T05:23:58.300

尝试这个...

```
<?php $args = array(
    'show_option_all'    => '',
    'orderby'            => 'ID',
    'order'              => 'DESC',
); ?>
 <?php wp_list_categories( $args ); ?> 
```

这对您有用，因为每当我们创建新类别或帖子时会自动选择更高的 ID，因此最新的 ID 越大，创建的类别就越大。.

例如，假设您在 2012 年 10 月 2 日创建了一个类别 -> 类别 1 - 它的 ID 为 21，并且您在 2012 年 10 月 3 日创建了一个新类别 -> 类别 2 - 它的 ID 将自动大于 21

# android - 访问媒体播放器缓存

> ID：12701249
> 
> 赞同：18
> 
> 时间：2012-10-03T02:47:34.163
> 
> 标签：android, android-mediaplayer

我想在完全加载后将逐步流式传输的 mp3 文件移动到 sd 卡。有没有办法实现这一点。

我已经看到`MediaPlayer`在渐进式流式传输时完全下载整个文件，然后我们可以查找文件的任何部分。我想将完全流式传输的文件移动到外部存储，以便将来的播放不会浪费数据和电池。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-10-18T08:49:31.980

这个想法是创建一个媒体播放器可以读取的代理，而不是直接从网络读取数据。

我使用了非常易于构建/使用的[danikula/AndroidVideoCache 。](https://github.com/danikula/AndroidVideoCache)我将它用于音频而不是视频，但它是一样的。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-09-05T04:11:23.190

对原始帖子的评论为您指明了正确的方向，但我认为解释一下可能会有所帮助......

我所做的是使用 Apache HTTP 库构建一个轻量级代理服务器。应该有很多例子来了解这部分的基础知识。为 MediaPlayer 提供适当的 localhost URL，以便它打开到您的代理的套接字。当 MediaPlayer 发出请求时，使用代理向实际的媒体主机发送等效请求。您将在代理的 packetReceived 方法中接收 byte[] 数据，我使用该方法构建 HttpGet 并使用 AndroidHttpClient 将其发送。

您将返回一个 HttpResponse，并且可以使用内部的 HttpEntity 来访问流式字节数据。我正在使用 ReadableByteChannel，如下所示：

```
HttpEntityWrapper entity = (HttpEntityWrapper)response.getEntity();
ReadableByteChannel src = Channels.newChannel(entity.getContent()); 
```

在读回数据时对数据做任何你想做的事情（比如将其缓存在 SD 卡上的文件中）。要将正确的内容传递给 MediaPlayer，请从客户端 Socket 获取 SocketChannel，首先将响应标头直接写入该通道，然后继续写入实体的字节数据。我在 while 循环中使用 NIO ByteBuffer（客户端是 Socket，缓冲区是 ByteBuffer）。

```
int read, written;
SocketChannel dst = client.getChannel();
while (dst.isConnected() &&
    dst.isOpen() &&
    src.isOpen() &&
    (read = src.read(buffer)) >= 0) {
    try {
        buffer.flip();
        // This is one point where you can access the stream data.
        // Just remember to reset the buffer position before trying
        // to write to the destination.
        if (buffer.hasRemaining()) {
            written = dst.write(buffer);
            // If the player isn't reading, wait a bit.
            if (written == 0) Thread.sleep(15);
            buffer.compact();
        }
    }
    catch (IOException ex) {
        // handle error
    }
} 
```

您可能需要在将响应传递给播放器之前更改响应中的主机标头，以便看起来您的代理是发送者，但我正在处理 MediaPlayer 的专有实现，因此行为可能会有所不同。希望有帮助。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-03-25T17:59:41.117

为时已晚，但我发现大多数人仍然需要解决方案。我的解决方案基于[JakeWharton 的 DiskLruCache](https://github.com/JakeWharton/DiskLruCache)。我们需要两件事

*   AsyncTask 从网络读取文件或下载并缓存它

*   从缓存中获取 InputSram/FileDescriptor 的回调

**步骤1：**

```
import android.content.Context;
import android.os.AsyncTask;
import org.apache.commons.io.IOUtils;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.HttpURLConnection;
import java.net.URL;

// you can use FileDescriptor as 
// extends AsyncTask<String, Void, FileDescriptor>

public class AudioStreamWorkerTask extends AsyncTask<String, Void, FileInputStream> {

    private OnCacheCallback callback = null;
    private Context context = null;

    public AudioStreamWorkerTask(Context context, OnCacheCallback callback) {
        this.context = context;
        this.callback = callback;
    }

    @Override
    protected FileInputStream doInBackground(String... params) {
        String data = params[0];
        // Application class where i did open DiskLruCache
        DiskLruCache cache = MyApplication.getDiskCache(context);
        if (cache == null)
            return null;
        String key = hashKeyForDisk(data);
        final int DISK_CACHE_INDEX = 0;
        long currentMaxSize = cache.getMaxSize();
        float percentageSize = Math.round((cache.size() * 100.0f) / currentMaxSize);
        if (percentageSize >= 90) // cache size reaches 90%
            cache.setMaxSize(currentMaxSize + (10 * 1024 * 1024)); // increase size to 10MB
        try {
            DiskLruCache.Snapshot snapshot = cache.get(key);
            if (snapshot == null) {
                Log.i(getTag(), "Snapshot is not available downloading...");
                DiskLruCache.Editor editor = cache.edit(key);
                if (editor != null) {
                    if (downloadUrlToStream(data, editor.newOutputStream(DISK_CACHE_INDEX)))
                        editor.commit();
                    else
                        editor.abort();
                }
                snapshot = cache.get(key);
            } else
                Log.i(getTag(), "Snapshot found sending");
            if (snapshot != null)
                return (FileInputStream) snapshot.getInputStream(DISK_CACHE_INDEX);
        } catch (IOException e) {
            e.printStackTrace();
        }
        Log.i(getTag(), "File stream is null");
        return null;
    }

    @Override
    protected void onPostExecute(FileInputStream fileInputStream) {
        super.onPostExecute(fileInputStream);
        if (callback != null) {
            if (fileInputStream != null)
                callback.onSuccess(fileInputStream);
            else
                callback.onError();
        }
        callback = null;
        context = null;
    }

    public boolean downloadUrlToStream(String urlString, OutputStream outputStream) {
        HttpURLConnection urlConnection = null;
        try {
            final URL url = new URL(urlString);
            urlConnection = (HttpURLConnection) url.openConnection();
            InputStream stream = urlConnection.getInputStream();
            // you can use BufferedInputStream and BufferOuInputStream
            IOUtils.copy(stream, outputStream);
            IOUtils.closeQuietly(outputStream);
            IOUtils.closeQuietly(stream);
            Log.i(getTag(), "Stream closed all done");
            return true;
        } catch (final IOException e) {
            e.printStackTrace();
        } finally {
            if (urlConnection != null)
                IOUtils.close(urlConnection);
        }
        return false;
    }

    private String getTag() {
        return getClass().getSimpleName();
    }

    private String hashKeyForDisk(String key) {
        String cacheKey;
        try {
            final MessageDigest mDigest = MessageDigest.getInstance("MD5");
            mDigest.update(key.getBytes());
            cacheKey = bytesToHexString(mDigest.digest());
        } catch (NoSuchAlgorithmException e) {
            cacheKey = String.valueOf(key.hashCode());
        }
        return cacheKey;
    }

    private String bytesToHexString(byte[] bytes) {
        // http://stackoverflow.com/questions/332079
        StringBuilder sb = new StringBuilder();
        for (byte aByte : bytes) {
            String hex = Integer.toHexString(0xFF & aByte);
            if (hex.length() == 1)
                sb.append('0');
            sb.append(hex);
        }
        return sb.toString();
    }
} 
```

**第2步：**

```
public interface OnCacheCallback {

    void onSuccess(FileInputStream stream);

    void onError();
} 
```

**例子**

```
final String path = "http://www.example.com/test.mp3";
new AudioStreamWorkerTask (TestActivity.this, new OnCacheCallback() {

@Override
public void onSuccess(FileInputStream fileInputStream) {
    Log.i(getClass().getSimpleName() + ".MediaPlayer", "now playing...");
    if (fileInputStream != null) {
        // reset media player here if necessary
        mediaPlayer = new MediaPlayer();
        try {
            mediaPlayer.setDataSource(fileInputStream.getFD());
            mediaPlayer.prepare();
            mediaPlayer.setVolume(1f, 1f);
            mediaPlayer.setLooping(false);
            mediaPlayer.start();
            fileInputStream.close();
        } catch (IOException | IllegalStateException e) {
            e.printStackTrace();
        }
    } else {
        Log.e(getClass().getSimpleName() + ".MediaPlayer", "fileDescriptor is not valid");
    }
}

@Override
public void onError() {
    Log.e(getClass().getSimpleName() + ".MediaPlayer", "Can't play audio file");
}
}).execute(path); 
```

**笔记：**

这是音频文件缓存的测试但粗略示例，如果您发现任何问题，请通知我:)

# javascript - 如果光标不在jquery中的输入标记中，如何设置事件

> ID：12701252
> 
> 赞同：1
> 
> 时间：2012-10-03T02:48:28.403
> 
> 标签：javascript, jquery

我是 jquery 的新手，我想知道当光标在输入元素/标签之外/离开时如何获取输入标签的值。先感谢您。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-03T02:51:43.603

使用[**模糊**](http://api.jquery.com/blur/)事件

```
 $(function() {
    $('input[type="text"]').on('blur' , function() {
        // Your code here
    });
  }); 
```

[检查演示](http://jsfiddle.net/sushanth009/ykUjV/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T02:55:32.467

我认为您正在搜索的方法是[focusout](http://api.jquery.com/focusout/)

```
$(function() {
    $('#input-element').focusout(function() {
        // put your code here!
    });
}); 
```

我希望它有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T02:59:10.893

```
<form>
  <input id="target" type="text" value="Field 1" />
  <input type="text" value="Field 2" />
</form>
<div id="other">
  Trigger the handler
</div>
<script>

$('#target').blur(function() {
  alert('Handler for .blur() called.');
}); 
```

# android - 以编程方式发送短信 Android（未接收状态）

> ID：12701254
> 
> 赞同：1
> 
> 时间：2012-10-03T02:48:46.533
> 
> 标签：android, android-intent, sms, broadcastreceiver

我正在逐字使用[http://mobiforge.com/developing/story/sms-messaging-android代码示例，除了我更改了：](http://mobiforge.com/developing/story/sms-messaging-android)

```
import android.telephony.gsm.SmsManager; 
```

至：

```
import android.telephony.SmsManager; 
```

SMS 发送良好，但我没有收到它已发送的 TOAST 消息（发送到网络）。我正在尝试将 SMS 集成到我的应用程序中，这很重要。我相信这是可以做到的，因为股票短信应用程序如何知道何时停止显示“发送圈”。相关代码部分如下：

```
 //---when the SMS has been sent---
    registerReceiver(new BroadcastReceiver(){
        @Override
        public void onReceive(Context arg0, Intent arg1) {
            switch (getResultCode())
            {
                case Activity.RESULT_OK:
                    Toast.makeText(getBaseContext(), "SMS sent", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                    Toast.makeText(getBaseContext(), "Generic failure", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_NO_SERVICE:
                    Toast.makeText(getBaseContext(), "No service", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_NULL_PDU:
                    Toast.makeText(getBaseContext(), "Null PDU", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_RADIO_OFF:
                    Toast.makeText(getBaseContext(), "Radio off", 
                            Toast.LENGTH_SHORT).show();
                    break;
            }
        }
    }, new IntentFilter(SENT));

    //---when the SMS has been delivered---
    registerReceiver(new BroadcastReceiver(){
        @Override
        public void onReceive(Context arg0, Intent arg1) {
            switch (getResultCode())
            {
                case Activity.RESULT_OK:
                    Toast.makeText(getBaseContext(), "SMS delivered", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case Activity.RESULT_CANCELED:
                    Toast.makeText(getBaseContext(), "SMS not delivered", 
                            Toast.LENGTH_SHORT).show();
                    break;                        
            }
        }
    }, new IntentFilter(DELIVERED)); 
```

我正在使用 Jelly Bean ROM，但我相信我不久前在 Gingerbread 和 ICS 上测试了相同的部分，结果相同。API 是否已更改或示例是否存在问题？如果有帮助，我正在测试三星 GSIII。我的旧测试是在 Epic 上进行的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-28T08:58:09.843

对于现在遇到此问题的任何人，如果您在 Android 4.4 或更高版本上进行测试，除非您的应用程序是默认的 SMS 应用程序，否则它将无法工作。

从文档 -

> > 从 Android 4.4 开始，系统设置允许用户选择“默认短信应用”。选择后，只有默认的 SMS 应用程序能够写入 SMS Provider，并且只有默认的 SMS 应用程序在用户收到 SMS 时接收 SMS_DELIVER_ACTION 广播，或者当用户收到 MMS 时只有默认 SMS 应用程序接收 WAP_PUSH_DELIVER_ACTION 广播。默认 SMS 应用程序负责在 SMS Provider 接收或发送新消息时向其写入详细信息。

见[这里](https://developer.android.com/about/versions/android-4.4.html#SMS)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-13T19:58:02.600

你的代码看起来很不错。问题可能是您的运营商没有为您提供交付报告（可能有订阅服务的选项），或者您没有在手机中打开交付报告。Play 商店中有一个名为 Delivery Reports 的有用应用程序，您可以从中查看每条短信的状态。

# html - 为 Google 地球应用程序保存内容可编辑的 html

> ID：12701255
> 
> 赞同：1
> 
> 时间：2012-10-03T02:48:54.820
> 
> 标签：html, google-earth

我刚开始使用 html，我正在为 Google 地球创建气球描述模板。我正在为世界各地的 gps 位置创建站点日志，这些站点时不时地使用新的接收器或天线进行更新。

我有一个表格，其中包含有关我们在这些站点拥有的设备的所有信息，并且我希望能够在设备更改时更改表格中的值。
现在唯一的方法是进入 html 代码并找到您需要更改的特定值，然后保存新的 html 代码。这可行，但如果我可以编辑这些值而不必进入代码，那就太好了。我知道您可以这样做`contenteditable=true`，然后可以编辑一些文本，但是当您刷新页面时，它会返回到原始文本。

我的问题是，是否有一种方法可以永久编辑 html 代码，而无需真正通过所有代码行来找到您想要更改的一件事。如果无法做到这一点，或者如果我的问题没有意义，请告诉我。我可能只需要使用这些东西一个多星期。

# php - Restler：内部行动

> ID：12701256
> 
> 赞同：2
> 
> 时间：2012-10-03T02:48:59.017
> 
> 标签：php, rest, action, internal, restler

有没有办法在执行动作的过程中执行 REST 动作？例如，如果我执行，`GET /index.php/book/1`我可能会收到以下信息：

```
[{
    "id" : 1,
    "title" : "This is a book.",
    "owner_id" : 4
}] 
```

但我想做的是在返回上述对象之前，执行 a`GET /index.php/user/4`所以最终结果是：

```
[{
    "id" : 1,
    "title" : "This is a book.",
    "owner" : {
        "id" : 4,
        "name" : "John Smith",
        "age" : 40
    }
}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:18:59.950

使用 Restler 甚至可以通过直接在内部调用另一个 api 方法而不是浪费对服务器的一次调用来执行此操作

```
class User{
    public function get($id, $includeOwner = true){
        $result = getUserFromDB($id)
        if($includeOwner){
            $result['owner'] = $this->get(getOwnerIdFromDB($id),false);
        }
    }
    return $result;
} 
```

高温高压

# android - HttpClient 未填写远程站点的输入框

> ID：12701258
> 
> 赞同：2
> 
> 时间：2012-10-03T02:50:04.613
> 
> 标签：android, http-post, httpclient

我创建了一个应用程序，用户在其中输入名称，当按下按钮发送时，来自远程服务器的表单将从用户输入中填充。但不知何故它不起作用，它没有填充输入框，我没有收到任何错误，所以我不确定出了什么问题。

这是我的 mainactivity.java 代码

```
public class MainActivity extends Activity {
    Button send;
    EditText name;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        name = (EditText) findViewById(R.id.etFName);
        send = (Button) findViewById(R.id.bSend);

        final String sname = name.getText().toString();

        send.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                new Thread(new Runnable()
                {
                    public void run()
                    {
                        // TODO Auto-generated method stub
                        HttpClient postClient = new DefaultHttpClient();
                        String postReq = "http://10.0.2.2/formcode.php";
                        HttpPost request = new HttpPost(postReq);
                        List<NameValuePair> postParams = new ArrayList<NameValuePair>();
                        postParams.add(new BasicNameValuePair("element_8_1", sname));
                        UrlEncodedFormEntity postEntity = null;
                        try {
                            postEntity = new UrlEncodedFormEntity(postParams);
                        } catch (UnsupportedEncodingException e) {
                            e.printStackTrace();
                        }

                        request.setEntity(postEntity);

                        HttpResponse response = null;
                        try {
                            response = postClient.execute(request);
                        } catch (ClientProtocolException e) {
                            e.printStackTrace();
                        } catch (IOException e) {
                            e.printStackTrace();
                        }
                    }
                }).start();

                String url = "http://10.0.2.2/formcode.php";
                Intent intent = new Intent(android.content.Intent.ACTION_VIEW,  Uri.parse(url));
                startActivity(intent);
            }
        });
    }
} 
```

提前致谢。

**已编辑**

这是网站代码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>App Test Form</title>
<link rel="stylesheet" type="text/css" href="./data/form_6/css/view.css" media="all" />
<script type="text/javascript" src="js/view.js"></script>
<script type="text/javascript" src="js/calendar.js"></script>
</head>
<body id="main_body" >

    <img id="top" src="images/top.png" alt="" />
    <div id="form_container">

        <h1><a>App Test Form</a></h1>
        <form id="form_6" class="digitalfuture"  method="post" action="#main_body">
                    <div class="form_description">
            <h2>App Test Form</h2>
            <p></p>
        </div>                      
            <ul >

                    <li id="li_8" >
        <label class="description">Name <span id="required_8" class="required">*</span></label>
        <span>
            <input id="element_8_1" name= "element_8_1" class="element text" maxlength="255" size="8" value="" />
            <label>First</label>
        </span>
        <span>
            <input id="element_8_2" name= "element_8_2" class="element text" maxlength="255" size="14" value="" />
            <label>Last</label>
        </span><p class="guidelines" id="guide_8"><small>Please tell us your name</small></p> 
        </li>       <li id="li_9" >
        <label class="description">Phone Number <span id="required_9" class="required">*</span></label>
        <span>
            <input id="element_9_1" name="element_9_1" class="element text" size="3" maxlength="3" value="" type="text" /> -
            <label for="element_9_1">(###)</label>
        </span>
        <span>
            <input id="element_9_2" name="element_9_2" class="element text" size="3" maxlength="3" value="" type="text" /> -
            <label for="element_9_2">###</label>
        </span>
        <span>
            <input id="element_9_3" name="element_9_3" class="element text" size="4" maxlength="4" value="" type="text" />
            <label for="element_9_3">####</label>
        </span>
        <p class="guidelines" id="guide_9"><small>Please tell us your phone number</small></p> 
        </li>       <li id="li_10" >
        <label class="description">Alternate Phone Number </label>
        <span>
            <input id="element_10_1" name="element_10_1" class="element text" size="3" maxlength="3" value="" type="text" /> -
            <label for="element_10_1">(###)</label>
        </span>
        <span>
            <input id="element_10_2" name="element_10_2" class="element text" size="3" maxlength="3" value="" type="text" /> -
            <label for="element_10_2">###</label>
        </span>
        <span>
            <input id="element_10_3" name="element_10_3" class="element text" size="4" maxlength="4" value="" type="text" />
            <label for="element_10_3">####</label>
        </span>
        <p class="guidelines" id="guide_10"><small>Please tell us an alternate phone number to contact you at</small></p> 
        </li>       <li id="li_11" >
        <label class="description" for="element_11">Email <span id="required_11" class="required">*</span></label>
        <div>
            <input id="element_11" name="element_11" class="element text medium" type="text" maxlength="255" value="your@email.com" /> 
        </div> 
        </li>

    </div>
    <img id="bottom" src="images/bottom.png" alt="" />
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T03:44:27.437

我认为这可能是因为您在参数中发送的值是空白的。`sname`设置在外部，`onClickListener`因此单击按钮时值不会更新。它只是获取文本框中已经存在的值。我建议按照 AnujAroshA 的建议将代码移动到[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)（有很多很好的教程）。你想要这样的东西：

```
private class SubmitForm extends AsyncTask<String, Void, Void>{
    @Override
    protected Void doInBackground(String... params) {
                String sName = params[0];

                // Rest of the code you had here
            }
} 
```

这将创建一个在后台而不是在 UI 线程上运行的任务。然后运行它，只需修改`onClickListener`说

```
public void onClick(View v) {
    new SubmitForm().execute(name.getText().toString());
} 
```

那么这实际上将启动riequest。它与您使用`Thread`s 的方式相似，但更多的是 android 官方。

# node.js - 如何使 node.js 应用程序永久运行？

> ID：12701259
> 
> 赞同：287
> 
> 时间：2012-10-03T02:50:18.683
> 
> 标签：node.js, server

在 Debian 服务器上，我安装了 Node.js。我了解如何使用以下命令行从 putty 启动应用程序：

```
node /srv/www/MyUserAccount/server/server.js 
```

并通过地址`50.51.52.53:8080`（IP 和端口）访问它。

但是一旦我关闭腻子，我就无法再到达该地址`50.51.52.53:8080`。

如何让 Node.js 应用程序永久运行？

你可以猜到，我是 Linux 和 Node.js 的初学者。

* * *

## 回答 #1

> 赞同：377
> 
> 时间：2012-10-18T07:46:42.637

您可以像这样使用 npm[永久安装：](https://www.npmjs.com/package/forever)

```
sudo npm install -g forever 
```

然后使用以下命令启动您的应用程序：

```
forever server.js 
```

或作为服务：

```
forever start server.js 
```

Forever 会在您的应用因某种原因崩溃或停止时重新启动。要将重启限制为 5，您可以使用：

```
forever -m5 server.js 
```

列出所有正在运行的进程：

```
forever list 
```

注意括号中的整数，并按如下方式使用它来停止进程：

```
forever stop 0 
```

重新启动正在运行的进程：

```
forever restart 0 
```

如果您正在处理应用程序文件，则可以使用该`-w`参数在`server.js`文件更改时自动重新启动：

```
forever -w server.js 
```

* * *

## 回答 #2

> 赞同：253
> 
> 时间：2015-08-15T21:06:08.480

尽管其他答案解决了 OP 的问题，但它们都太过分了，并没有解释他或她为什么会遇到这个问题。

关键是这一行，“我关闭腻子，然后我无法到达地址”

当您在 Putty 上登录远程主机时，您已经启动了一个 SSH linux 进程，并且从该 SSH 会话键入的所有命令都将作为所述进程的子进程执行。

您的问题是，当您关闭 Putty 时，您将退出 SSH 会话，该会话会杀死该进程和任何活动的子进程。当您关闭腻子时，您会无意中杀死您的服务器，因为您在**前台**运行它。为了避免这种行为，通过将 & 附加到您的命令，在**后台运行服务器：**

```
node /srv/www/MyUserAccount/server/server.js & 
```

这里的问题是缺乏 linux 知识，而不是关于 node.js 的问题。有关更多信息，请查看： http: [//linuxconfig.org/understanding-foreground-and-background-linux-processes](http://linuxconfig.org/understanding-foreground-and-background-linux-processes)

更新：

正如其他人所提到的，节点服务器在退出终端时仍然可能死机。我遇到的一个常见问题是，即使节点进程在 bg 中运行，它的标准输出和标准错误仍然指向终端。这意味着如果节点服务器写入 console.log 或 console.error 它将收到一个损坏的管道错误并崩溃。这可以通过管道处理流程的输出来避免：

```
node /srv/www/MyUserAccount/server/server.js > stdout.txt 2> stderr.txt & 
```

如果问题仍然存在，那么您应该研究**tmux**或**nohup**之类的东西，它们仍然比特定于节点的解决方案更强大，因为它们可用于运行所有类型的进程（数据库、日志记录服务、其他语言）。

可能导致服务器退出的一个常见错误是，在运行之后，`nohup node your_path/server.js &`您只需单击一下即可关闭 Putty 终端。您应该改用`exit`命令，然后您的节点服务器将启动并运行。

* * *

## 回答 #3

> 赞同：96
> 
> 时间：2016-10-26T06:15:27.460

您可以使用[PM2](https://github.com/Unitech/pm2)，它是带有内置负载均衡器的 Node.js 应用程序的生产流程管理器。

安装 PM2

```
$ npm install pm2 -g 
```

启动应用程序

```
$ pm2 start app.js 
```

如果您使用快递，那么您可以像这样启动您的应用程序

```
pm2 start ./bin/www --name="app" 
```

列出所有正在运行的进程：

```
$ pm2 list 
```

它将列出所有进程。然后，您可以使用以下命令使用应用程序的 ID 或名称来停止/重新启动服务。

```
$ pm2 stop all                  
$ pm2 stop 0                    
$ pm2 restart all 
```

显示日志

```
$ pm2 logs ['all'|app_name|app_id] 
```

* * *

## 回答 #4

> 赞同：44
> 
> 时间：2012-10-03T02:52:49.220

我建议寻找诸如[Forever](https://github.com/nodejitsu/forever)之类的东西，以便在发生崩溃时重新启动 Node，并为您处理守护进程。

* * *

## 回答 #5

> 赞同：41
> 
> 时间：2012-10-03T13:58:17.770

如果您只想始终在终端中运行您的节点应用程序，只需使用 screen。

在 ubuntu/debian 上安装：

```
sudo apt-get install screen 
```

用法：

```
$ screen
$ node /path/to/app.js 
```

`ctrl + a`然后`ctrl + d`解雇

得到回来：

一屏：`screen -r`

如果有多个，您可以列出所有屏幕：`screen -ls`

接着：`screen -r pid_number`

* * *

## 回答 #6

> 赞同：32
> 
> 时间：2015-10-27T05:04:08.647

你可以简单地使用这个

```
nohup node /srv/www/MyUserAccount/server/server.js & 
```

这将使应用程序保持运行并关闭它，你将不得不杀死它。

为此，您可以安装`htop`然后搜索节点然后将其杀死

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2018-03-09T15:30:31.480

[Forever](https://www.npmjs.com/package/forever)是一个非常好的 NodeJs 模块，可以做到这一点。

`forever`在命令行中输入安装

```
$ npm install forever -g 
```

然后使用以下命令运行 node.js 脚本

```
$ forever start /path/to/script.js 
```

你已准备好出发。此外，您可以运行

```
$ forever list 
```

查看所有正在运行的脚本。您可以通过键入终止任何特定脚本

```
$ forever stop [pid] 
```

`[pid]`您将从命令中获得的脚本的进程 ID 在哪里`list`。要停止所有脚本，您可以键入

```
$ forever stopall 
```

* * *

## 回答 #8

> 赞同：13
> 
> 时间：2018-03-16T12:06:07.920

安装

```
$ [sudo] npm install forever -g 
```

您可以使用 forever 连续运行脚本

```
forever start server.js

forever list 
```

停止服务

```
forever stop server.js 
```

* * *

## 回答 #9

> 赞同：12
> 
> 时间：2012-10-18T08:30:33.963

在开发过程中，我推荐使用[nodemon](https://github.com/remy/nodemon)。每当文件更改时，它将重新启动您的服务器。正如其他人指出的那样，[Forever](https://github.com/nodejitsu/forever)是一种选择，但在生产中，这完全取决于您使用的平台。您通常会希望使用操作系统推荐的方式来保持服务正常运行（例如[http://www.freedesktop.org/wiki/Software/systemd/](http://www.freedesktop.org/wiki/Software/systemd/)）。

* * *

## 回答 #10

> 赞同：10
> 
> 时间：2016-10-31T10:40:55.693

> **nohup**工作我检查了**AWS Ubunto** vm 遵循正确的`syntax`

```
ubuntu@ip-172-00-00-00:~/ms$ nohup node server.js & 
```

> 然后按回车你会看到这一行

```
ubuntu@ip-172-00-00-00:~/ms$ nohup: ignoring input and appending output to ‘nohup.out’ 
```

> 然后输入这个

```
rm nohup.out 
```

[![在此处输入图像描述](../Images/bc1a45f329ebc1d67db214a6c7cc0717.png)](https://i.stack.imgur.com/m2mTm.png)

* * *

## 回答 #11

> 赞同：9
> 
> 时间：2012-10-03T03:00:11.580

这是我一直用于个人项目的[新贵解决方​​案：](http://upstart.ubuntu.com/cookbook/#run-a-job-before-another-job)

把它放在`/etc/init/node_app_daemon.conf`：

```
description "Node.js Daemon"
author      "Adam Eberlin"

stop on shutdown

respawn
respawn limit 3 15

script
  export APP_HOME="/srv/www/MyUserAccount/server"
  cd $APP_HOME
  exec sudo -u user /usr/bin/node server.js
end script 
```

这还将在应用程序崩溃时处理重新生成应用程序。如果在 15 秒内崩溃 3 次或更多次，它将放弃重新生成应用程序的尝试。

* * *

## 回答 #12

> 赞同：9
> 
> 时间：2017-03-17T12:29:53.480

我发现永远可以完美地完成这项工作。

假设您已经安装了 npm，如果没有，请执行

```
sudo apt-get install npm 
```

然后永久安装

```
npm install forever --global 
```

现在你可以像这样运行它

```
forever start app.js 
```

[https://codingweb.io/run-nodejs-application-background/](https://codingweb.io/run-nodejs-application-background/)

* * *

## 回答 #13

> 赞同：8
> 
> 时间：2018-10-17T08:19:39.233

首先全局安装pm2

```
npm install -g pm2 
```

然后开始

```
pm2 start bin/www 
```

* * *

## 回答 #14

> 赞同：7
> 
> 时间：2017-09-12T23:24:36.933

另一种方法是为您的应用程序创建一个系统单元。在“/etc/systemd/system”文件夹中创建一个“XXX.service”文件，类似这样：

```
[Unit]
Description=swagger
After=network.target

[Service]
ExecStart=/usr/bin/http-server /home/swagger/swagger-editor &
WorkingDirectory=/home/swagger
Restart=always
RestartSec=30

[Install]
WantedBy=multi-user.target 
```

一个好处是应用程序将作为服务运行，如果它崩溃，它会自动重新启动。

你也可以使用 sytemctl 来管理它：

`systemctl start XXX`启动服务，`systemctl stop XXX`停止它并`systemctl enable XXX`在系统启动时自动启动应用程序。

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2018-05-29T13:18:10.250

我希望这能帮到您。

在命令行中，永久安装：

```
npm install forever -g 
```

创建一个示例文件：

```
sudo nano server.js 
```

您可以直接在浏览器中编辑文件并获得结果。
您可以使用 filezilla 或任何编辑器来编辑文件。运行此命令以运行文件：

```
forever start --minUptime 1 --spinSleepTime 1000 -w server.js 
```

[![在此处输入图像描述](../Images/da156b4a5bc19e42c41737ded068063d.png)](https://i.stack.imgur.com/SY8pr.png)

* * *

## 回答 #16

> 赞同：5
> 
> 时间：2018-11-26T09:40:05.620

无需安装任何其他软件包。

运行此命令

```
node server.js > stdout.txt 2> stderr.txt & 
```

**server.js**是您的服务器文件，也可以是**api.js**

之后点击“ **exit** ”关闭终端

```
exit 
```

* * *

## 回答 #17

> 赞同：4
> 
> 时间：2020-09-01T04:32:12.530

尝试`pm2`让您的应用程序永远运行。

`npm install -g pm2`

然后使用

`pm2 start server.js`

要列出和停止应用程序，请使用命令

`pm2 list`

`pm2 stop 0`

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2017-08-01T14:06:40.037

我推荐使用 PM2，它是 Node.js 应用程序的进程管理器。PM2 提供了一种简单的方法来管理和守护应用程序（将它们作为服务运行）。

参考这个链接 - [https://www.digitalocean.com/community/tutorials/how-to-set-up-a-node-js-application-for-production-on-centos-7](https://www.digitalocean.com/community/tutorials/how-to-set-up-a-node-js-application-for-production-on-centos-7)

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2020-04-04T06:09:59.790

**永远**包对我有用，只有一件事，它取决于**deep-equal**，所以如果你在安装它时遇到问题，比如：

```
npm -g install forever 
```

尝试：

```
npm -g install forever deep-equal@1.1.1 
```

反而。

# vhdl - VHDL 计数器结果给出 X

> ID：12701260
> 
> 赞同：2
> 
> 时间：2012-10-03T02:50:20.373
> 
> 标签：vhdl

我正在尝试用 VHDL 构建一个计数器。最终目标是将“do_count”挂钩到按钮。总数将转换为 BCD 并显示在 7 段显示器上。按下按钮，观察数字的增加。

我正在使用 ModelSim，我可以看到内部“counter_value”正确地增加了 1。但是在我的两个测试“do_count”期间，输出信号“total”变为“000X”，然后变为“00X0”。为什么我会收到 X 信号？

我已经在进程内、进程外、'if's 等内部移动了“输出 <= current_value”。仍然是“000X”。

我尝试在进程中使用变量“tmp”。

```
count_up : process(clk) is
   variable tmp : unsigned (15 downto 0 );
begin
   tmp := current_value;
   -- snip
   if do_count='1' then
      current_value <= tmp + to_unsigned(1,16);
   end if; 
```

我仍然得到“000X”。

完整代码：

```
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use ieee.numeric_std.all;

entity d_counter is
    port ( rst : in std_logic;
           clk : in std_logic;
           do_count : in std_logic;
           total : out unsigned (15 downto 0)
        );
  end entity d_counter;

architecture counter_arch of d_counter is
  signal current_value : unsigned (15 downto 0) := (others=>'0');
begin
  count_up : process(clk) is
  begin
    if rst='1' then
      current_value <= (others=>'0');
      total <= (others=>'0');
    elsif rising_edge(clk) then
      if do_count='1' then
        current_value <= current_value + to_unsigned(1,16);
      end if;
    end if;
  end process count_up;
  total <= current_value;
end architecture counter_arch; 
```

试验台：

```
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use ieee.numeric_std.all;

entity test_counter is 
  begin
  end entity test_counter;

architecture run_test_counter of test_counter is

  signal t_rst : std_logic := '1';
  signal t_clk : std_logic := '0';
  signal t_do_count : std_logic;
  signal t_total : unsigned( 15 downto 0 );

  component d_counter is
    port ( rst : in std_logic;
           clk : in std_logic;
           do_count : in std_logic;
           total : out unsigned( 15 downto 0 )
        );
  end component d_counter;

begin
  uut : d_counter
    port map( rst => t_rst,
      clk => t_clk,
      do_count => t_do_count,
      total => t_total );

    clock : process is 
    begin

        t_clk <= '0'; wait for 10 ns;
        t_clk <= '1'; wait for 10 ns;
    end process clock;

    stimulus : process is
    begin
      t_rst <= '1';
      t_do_count <= '0';
      t_total <= (others =>'0');
      wait for 15 ns;

      t_rst <= '0';
      wait for 10 ns;

      t_do_count <= '1';
      wait for 10 ns;

      t_do_count <= '0';
      wait for 10 ns;

      t_do_count <= '1';
      wait for 10 ns;

      t_do_count <= '0';
      wait for 10 ns;

      wait;

    end process stimulus;
end architecture run_test_counter; 
```

2012 年 10 月 3 日更新。两个答案都有帮助。在流程中移动“total <= current_value”（来自@simon）并删除额外的“t_total <= (others =>'0');” （来自@peter-bennett）在我的测试平台中是必需的。我必须同时做这两件事才能摆脱 X。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T06:47:18.180

您的代码使用“total”编写多驱动。您应该删除进程 count_up 中的分配。

```
count_up : process(clk) is
  begin
    if rst='1' then
      current_value <= (others=>'0');
      total <= (others=>'0');  --> Remove it
    elsif rising_edge(clk) then
      if do_count='1' then
        current_value <= current_value + to_unsigned(1,16);
      end if;
     end if;
  end process count_up;

  total <= current_value; -- Keep it 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T08:53:13.833

看起来你的错误在你的测试台上。该信号`t_total`被映射到您的计数器组件的输出，但您正在使用分配`total`写入它。`t_total <= (others => '0')`如果您删除它，我认为您的问题将消失。

```
 uut : d_counter
    port map( rst => t_rst,
      clk => t_clk,
      do_count => t_do_count,
      total => t_total );

    clock : process is 
    begin

        t_clk <= '0'; wait for 10 ns;
        t_clk <= '1'; wait for 10 ns;
    end process clock;

    stimulus : process is
    begin
      t_rst <= '1';
      t_do_count <= '0';
      t_total <= (others =>'0'); <-- Do not assign to t_total (its an output) 
```

# ruby - 有人可以解释这行 ruby 代码的作用吗？

> ID：12701262
> 
> 赞同：0
> 
> 时间：2012-10-03T02:50:32.637
> 
> 标签：ruby

可在[Ruby 样式指南](https://github.com/bbatsov/ruby-style-guide)中找到。

```
1 > 2 ? true : false; puts 'Hi' 
```

我假设这总是返回`Hi`，但我该如何阅读它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T02:57:09.117

如果 1 > 2 则为真，否则为假。

但是，它将打印`hi`任何条件结果。

相同的是：

```
if 1 > 2 then
  true
else
  false
end
puts 'hi' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T02:58:22.743

您可能会像这样阅读

```
1 > 2 ? true : false # first line of code
puts "Hi"  #second line of code 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T10:24:08.540

1 > 2 ? 真假; 放“嗨”这意味着

```
if 1 > 2 
  return true
else
  return false
end
puts "Hi" 
```

这里每次都意味着结果是打印“hi”的结果，因为我们在条件之外打印“Hi”。

但

```
if 1 > 2
 puts "1 is not greater than 2"
else
 puts "1 is greater than 2"
end 
```

你也可以在你的控制台中测试

```
1.9.3p125 :002 > if 1 > 2
1.9.3p125 :003?>   puts "1 is not greater than 2"
1.9.3p125 :004?>   else
1.9.3p125 :005 >     puts "1 is greater than 2"
1.9.3p125 :006?>   end
1 is greater than 2
 => nil 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T04:52:53.913

分号是分隔两行代码的内联方式。所以就像

```
1 > 2 ? true : false
puts "Hi" 
```

这相当于

```
false
puts "Hi" 
```

当然，只说一行`false`什么都不做（除了少数情况，比如如果它是函数定义的最后一行，在这种情况下，如果到达该行，该方法将返回 false）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T02:55:54.527

Ruby 编译器是这样读取的：

```
1.>( 2 )
puts "Hi" 
```

三元运算符 ? : 是多余的。比较“大于”符号 :> 实际上是 Numeric 类的一种方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-03T02:58:30.550

如果 1 大于 2 则为真，否则为假。然后放嗨

[http://buddylindsey.com/c-vs-ruby-if-then-else/](http://buddylindsey.com/c-vs-ruby-if-then-else/)

# css - 如何删除xml中元素之间的自动空格？

> ID：12701266
> 
> 赞同：0
> 
> 时间：2012-10-03T02:51:29.073
> 
> 标签：css, xml

有一个这样的xml文档：

```
<?xml version="1.0" encoding="utf-8" standalone="no"?>
<?xml-stylesheet href="#style" type="text/css"?>
<root>
  <style>
    style {display: none}
    entry {display: block}
    english {font-weight: bold} 
    spanish {font-style: italic}  
  </style>
  <entry>
    <sense_unit>
      <english>abandon</english>
      <spanish>abandonar</spanish>
    </sense_unit>, 
    <sense_unit>
      <english>friend</english>
      <spanish>amigo</spanish>
    </sense_unit>
  </entry>
</root> 
```

网络浏览器呈现这个：

```
style {display: none} entry {display: block} english {font-size: 10pt; font-family:    "Times New Roman"} spanish {font-size: 9pt; font-family: "Arial"} 
abandon abandonar , friend amigo 
```

1.  我想隐藏样式元素的内容，但它仍然出现。
2.  我不想要放弃和以下逗号之间的空格。（但我不想在 sense_unit 中插入逗号）我该怎么做？（也就是说，......放弃者，朋友...... ->......放弃者，朋友......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T03:49:17.160

这与 css 无关，而与格式良好的 XML 有关。XML 中的所有换行符都被视为一个元素，因此将创建这些空格。删除所有换行符，这些空格将消失。

更新[jsFiddle](http://jsfiddle.net/EsMUW/)示例，我在其中删除了所有换行符和空格`<entry>`

# c++ - 为什么返回类型在函数名之前？

> ID：12701269
> 
> 赞同：13
> 
> 时间：2012-10-03T02:51:54.640
> 
> 标签：c++, c++11, language-design, return-type, function-signature

新的 C++11 标准添加了带有尾随返回类型的新函数声明语法：

```
// Usual declaration
int foo();

// New declaration
auto foo() -> int; 
```

这种语法的优点是可以推导出返回类型，如下所示：

```
template<class T, class U>
auto bar(T t, U u) -> decltype(t + u); 
```

但是**为什么首先将返回类型放在函数名之前呢？**我想一个答案是当时不需要这种类型的扣除。如果是这样，假设的新编程语言是否有理由默认不使用尾随返回类型？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-03T03:30:18.550

一如既往，K&R 是这里的“坏人”。他们为 C 设计了该函数语法，而 C++ 基本上按原样继承了它。

在这里疯狂猜测：在 C 中，声明应该暗示用法，即如何从某物中获取值。这体现在：

*   简单值：`int i;`，`int`通过写入访问`i`
*   指针：`int *p;`，`int`通过写入访问`*p`
*   数组：`int a[n];`，`int`通过写入访问`a[n]`
*   功能: `int f();`,`int`通过写访问`f()`

因此，整个选择取决于“简单值”的情况。正如@JerryCoffin 已经指出的那样，我们得到的原因`type name`可能`name : type`隐藏在编程语言的古老历史中。我猜 K&R`type name`认为它更容易强调使用并且仍然有指针等是类型。

如果他们选择了`name : type`，他们要么会从声明中分离使用：`p : int*`要么会让指针不再是类型，而是像对名称的装饰一样：`*p : int`。

就个人而言：想象一下，如果他们选择了后者并且 C++ 继承了它——它根本就行不通，因为 C++ 强调*类型*而不是*使用*。[这也是为什么`int* p`说是“C++方式”，`int *p`是“C方式”的原因。](https://stackoverflow.com/q/6449997/500104)

> 如果是这样，假设的新编程语言是否有理由默认不使用尾随返回类型？

是否有理由默认不使用扣除？;) 参见，例如 Python 或 Haskell（或任何与此相关的函数式语言，IIRC）——没有明确指定返回类型。[还有一个将这个特性添加到 C++ 的运动](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3386.html)，所以在未来的某个时候你可能会看到只是`auto f(auto x){ return x + 42; }`或什至[`[]f(x){ return x + 42; }`](http://cpp-next.com/archive/2011/11/having-it-all-pythy-syntax/).

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-03T03:01:13.613

C++是基于C的，B是基于B的，BCPL是基于CPL的。

我怀疑如果你要追溯整个历史，你可能最终会使用 Fortran，它使用了类似的声明`integer x`（而不是，例如，Pascal，它使用了类似的声明：）`var x : integer;`。

同样，对于一个函数，Pascal 使用了类似`function f(<args>) : integer;`Under the situation，可以安全地猜测（至少在这个特定方面）Pascal 的语法可能更适合类型推导。

# ld - 如何找出aix中未解析的符号？

> ID：12701271
> 
> 赞同：1
> 
> 时间：2012-10-03T02:52:12.100
> 
> 标签：ld, aix, xlc

在 linux 中，gcc 会报告未解析的符号（如果有）。我应该如何使用 ld 在 aix 中生成此类信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T23:57:17.030

默认情况下，AIX 上的 ld 报告未解析的符号。

链接时是否使用 -brtl 选项？在这种情况下，您要求链接发生在运行时（运行时链接），因此 ld 不会报告任何未解析的符号，因为假定在程序运行时使用的库中将提供任何未解析的符号。（尝试运行程序时将报告任何未解析的符号。）

# ios - iOS UIAlertView 给出 EXC_BAD_ACCESS

> ID：12701277
> 
> 赞同：1
> 
> 时间：2012-10-03T02:52:45.857
> 
> 标签：ios, uialertview, exc-bad-access, reachability

我已经搜索了一段时间并尝试了很多东西，但我无法让这个错误消失。我有一个通过下拉方法刷新的表。我还使用 Apple 的可达性来确定互联网连接。当我在互联网上运行我的应用程序，然后在应用程序运行时关闭互联网，我的应用程序在尝试显示 UIAlertView 时崩溃。虽然，当我在没有互联网的情况下启动我的应用程序，然后在应用程序运行时打开互联网并将其关闭时，应用程序不会崩溃并且一切正常。任何帮助将不胜感激。

错误发生在 [message show] 行。

编辑代码：

```
- (void)loadCallList {

NSURL *theURL = [NSURL URLWithString:@"http://www.wccca.com/PITS/"];

NSURLRequest *theRequest = [NSURLRequest requestWithURL:theURL cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:10.0];
NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self];

if (theConnection) {

    NSLog(@"Reachable");

    self.headerHeight = 45.0;

    NSData *data = [[NSData alloc] initWithContentsOfURL:theURL];
    xpathParser = [[TFHpple alloc] initWithHTMLData:data];
    NSArray *elements = [xpathParser searchWithXPathQuery:@"//input[@id='hidXMLID']//@value"];

        if (elements.count >= 1) {

            TFHppleElement *element = [elements objectAtIndex:0];
            TFHppleElement *child = [element.children objectAtIndex:0];
            NSString *idValue = [child content];

            NSString *idwithxml = [idValue stringByAppendingFormat:@".xml"];
            NSString *url = @"http://www.wccca.com/PITS/xml/fire_data_";
            NSString *finalurl = [url stringByAppendingString:idwithxml];

            xmlParser = [[XMLParser alloc] loadXMLByURL:finalurl];

            [callsTableView reloadData];
        }
    }

else {

    NSLog(@"Not Reachable");

    self.headerHeight = 0.0;

    UIAlertView *message = [[UIAlertView alloc] initWithTitle:@"No Internet Connection"
                                                      message:@"Please check your internet connection and pull down to refresh."
                                                     delegate:self
                                            cancelButtonTitle:@"OK"
                                            otherButtonTitles:nil];
    [message show];
    [message release];
}

[pull finishedLoading];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T03:13:38.660

你有两个问题：

1.  您不应该使用可达性来确定是否有互联网连接。可达性仅对确定离线连接何时恢复在线有用。真的。拨打网络电话有时足以启动收音机并连接，因此如果您尝试预先检查是否有互联网连接，收音机将保持关闭状态。

2.  第二个问题是不能在主线程上进行同步网络调用。这包括可达性和 [NSData dataWithContentsOfURL:xxx]。使用 Grand Central Dispatch、NSOperationQueues、NSURLConnections 或 NSThreads 将它们放在辅助线程上。否则，如果网络状况不佳，您的应用程序可能会锁定，并且系统看门狗计时器会终止您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T05:32:01.153

我使用 sendAsynchronousRequest:queue:completionHandler: 作为从 URL 下载数据的方法测试了以下方法。它似乎工作正常，我可以通过弄乱 URL 或将超时间隔设置为 0.1 秒来触发 else 子句。

```
 NSURL *theURL = [NSURL URLWithString:@"http://www.wccca.com/PITS/"];

    NSURLRequest *theRequest = [NSURLRequest requestWithURL:theURL cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:5];
    [NSURLConnection sendAsynchronousRequest:theRequest queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
        if (error == nil) {
            //do whatever with the data.  I converted it to a string for testing purposes.
            NSString *text = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
            NSLog(@"%@",text);
        }else{
            NSLog(@"%@",error.localizedDescription);
            UIAlertView *message = [[UIAlertView alloc] initWithTitle:@"No Internet Connection" message:@"Please check your internet connection and pull down to refresh." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
            [message show];
        }
    }]; 
```

# django - 开源代码示例 - Django、Backbone.js（和 Coffeescript）

> ID：12701281
> 
> 赞同：0
> 
> 时间：2012-10-03T02:53:19.010
> 
> 标签：django, backbone.js, open-source

**是否有任何同时**使用django 和backbone.js的开源项目或示例？

我从查看实际代码中学习得最好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T02:09:46.407

以下是为 django 用户制作的一些很好的示例：

1.  [http://lincolnloop.com/blog/2012/jun/5/backbonejs-django-developers/](http://lincolnloop.com/blog/2012/jun/5/backbonejs-django-developers/)
2.  [http://joshbohde.com/blog/backbonejs-and-django](http://joshbohde.com/blog/backbonejs-and-django)
3.  [https://github.com/joshbohde/django-backbone-example](https://github.com/joshbohde/django-backbone-example)
4.  [http://lanyrd.com/2011/pycodeconf/sghxt/](http://lanyrd.com/2011/pycodeconf/sghxt/)（这是 leah culver 的介绍）

我希望它可以帮助你:)

# sql - 在事务中删除然后插入到目标表

> ID：12701284
> 
> 赞同：2
> 
> 时间：2012-10-03T02:53:59.367
> 
> 标签：sql, sql-server-2008-r2

我有以下情况，其中存储过程收集数据并执行必要的连接并将结果插入临时表（例如：#Results）

现在，我要做的是将#Results 中的所有记录插入到先前创建的表中，但我首先要删除（截断/删除）目标，然后插入结果。问题是清理目标表的过程，然后在事务中插入新的#Results。

我做了以下事情：

```
BEGIN TRANSACTION

DELETE  FROM PracticeDB.dbo.TransTable

IF @@ERROR <> 0 
    ROLLBACK TRANSACTION
ELSE 
    BEGIN

        INSERT  INTO PracticeDB.dbo.TransTable
                ( 
                   [R_ID]
                  ,[LASTNAME]
                  ,[FIRSTNAME]
                  ,[DATASOURCE]
                  ,[USER_STATUS]
                  ,[Salary]
                  ,[Neet_Stat]
                )
                SELECT  [R_ID]
                      ,[LASTNAME]
                      ,[FIRSTNAME]
                      ,[DATASOURCE]
                      ,[USER_STATUS]
                      ,[Salary]
                      ,[Neet_Stat]
                FROM    #RESULT

        Select @@TRANCOUNT TransactionCount, @@ERROR ErrorCount
        IF @@ERROR <> 0 
            ROLLBACK TRANSACTION

        ELSE 
            COMMIT TRANSACTION

    END 
```

但我知道它不能正常工作，我很难找到这样的例子，虽然我不知道为什么考虑到它似乎很常见。在这种情况下，尽管插入失败，它仍然会删除目标表。

最重要的是，一些指导会很好地解决这种情况或类似情况下的最佳实践（最好使用什么等等）。先感谢您...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T03:04:36.493

我真的没有看到这有什么问题。所以它确实从您的 TransTable 中删除，但不进行插入？您确定#RESULT 中有记录吗？

我唯一看到的是，您正在检查`@@ERROR`after `Select @@TRANCOUNT TransactionCount, @@ERROR ErrorCount`，这意味着 @@ERROR 将来自您的 SELECT 语句而不是 INSERT 语句（尽管我总是希望它为 0）。

有关@@ERROR 的更多信息，请参阅：http: [//msdn.microsoft.com/en-us/library/ms188790.aspx](http://msdn.microsoft.com/en-us/library/ms188790.aspx)

您应该在每个语句之后检查@@ERROR。

就最佳实践而言，我认为 Microsoft 现在建议您使用 TRY/CATCH，而不是在每个语句之后检查 @@ERROR（自 SQL 2005 起及之后）。在此处查看示例 B：http: [//msdn.microsoft.com/en-us/library/ms175976.aspx](http://msdn.microsoft.com/en-us/library/ms175976.aspx)

# jquery - 多日期选择器

> ID：12701290
> 
> 赞同：0
> 
> 时间：2012-10-03T02:55:26.980
> 
> 标签：jquery, date, web, calendar, datepicker

我是这里的新手，目前正在开发一个 webApp。我想在我的应用程序上有一个多日期选择器功能。

我搜索了几个多日期选择器插件，我想[这个](http://multidatespickr.sourceforge.net/)是最好的，因为它的功能符合我的要求，但现在我很难在我的应用程序上实现它。

有人可以给我一个如何实施的例子吗？我想在那里使用 from 输入样式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T04:08:55.540

按照这个步骤来实现它

1) 下载 multidatepicker 的 fullpakage
2) 根据以下链接 javascript 到您的页面

```
<!-- loads jquery and jquery ui -->
    <script type="text/javascript" src="js/jquery-1.7.2.js"></script>
    <script type="text/javascript" src="js/jquery.ui.core.js"></script>
    <script type="text/javascript" src="js/jquery.ui.datepicker.js"></script> 
```

3）加载多日期选择器

```
<!-- loads mdp -->
<script type="text/javascript" src="jquery-ui.multidatespicker.js"></script> 
```

4) 链接样式表

```
<link rel="stylesheet" type="text/css" href="css/mdp.css">
   <link rel="stylesheet" type="text/css" href="css/prettify.css"> 
```

5）链接其他需要的JS

```
<script type="text/javascript" src="js/prettify.js"></script>
<script type="text/javascript" src="js/lang-css.js"></script> 
```

6）你的输入标签

```
<input type="text" value="" id="from-input" class=""> 
```

7）javascirpt

```
<script type="text/javascript">
   $('#from-input').multiDatesPicker();
</script> 
```

您可以根据**MDP中的要求添加几个选项**

# c++ - 基于 C++ 中句子的数组

> ID：12701292
> 
> 赞同：0
> 
> 时间：2012-10-03T02:55:41.360
> 
> 标签：c++, arrays, sentence

> **可能重复：**
> [在 C++ 中拆分字符串](https://stackoverflow.com/questions/236129/splitting-a-string-in-c)

如何将一堆用空格分隔的单词读入数组？

说我有这句话：

“我喜欢青蛙”

而这个数组：

```
string mySentenceArray[2] 
```

我想做

```
mySentenceArray[0] = I
mySentenceArray[1] = like
mySentenceArray[2] = frogs 
```

举个例子。（请不要告诉我对我刚刚写的句子进行硬编码，这是一个例子。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T04:05:13.017

仅使用标准库：

```
istringstream sentence("I like frogs");
vector<string> words(
    (istream_iterator<string>(sentence)), 
    (istream_iterator<string>())); 
```

请注意，在至少一个构造函数参数上实际上需要看似不必要的括号，否则您将被[最令人烦恼的 parse 烦恼](http://en.wikipedia.org/wiki/Most_vexing_parse)。

或者，Boost 提供了一些[有用的字符串算法](http://www.boost.org/doc/libs/1_51_0/doc/html/string_algo.html)，包括`split`：

```
string sentence("I like frogs");
vector<string> words;
boost::algorithm::split(words, sentence, boost::algorithm::is_space()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T03:05:40.583

您可以将字符串转换为一系列标记并将这些标记放入数组中。考虑一下：[http ://www.cplusplus.com/reference/clibrary/cstring/strtok/](http://www.cplusplus.com/reference/clibrary/cstring/strtok/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T03:18:29.740

有几种方法：

1.  使用[strtok](http://www.cplusplus.com/reference/clibrary/cstring/strtok/)。但它是 C 函数，而不是 C++。混合 C 和 C++ 是不好的风格。此外`strtok`，函数不是线程安全的。

2.  使用任何[std::string::find](http://www.cplusplus.com/reference/string/string/find/)方法。情况很复杂。

3.  使用[std::stringstream](http://www.cplusplus.com/reference/iostream/istream/operator%3E%3E/)类。它需要太多的步骤。

4.  使用[boost::algorithm::string::split](http://www.boost.org/doc/libs/1_49_0/doc/html/string_algo/usage.html#id3184031)。我更喜欢这种方式。它简单快捷。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T03:59:59.657

除非我有其他用途来证明添加额外库的合理性，否则我可能只会使用`stringstream`：

```
std::istringstream buffer("I like frogs");

std::vector<std::string> words((std::istream_iterator<std::string>(buffer)), 
                                std::istream_iterator<std::string>());

std::copy(words.begin(), words.end(), 
          std::ostream_iterator<std::string>(std::cout, "\n")); 
```

# security - 在 IIS 中需要客户端证书而不需要 SSL

> ID：12701295
> 
> 赞同：0
> 
> 时间：2012-10-03T02:55:50.817
> 
> 标签：security, authentication, iis, ssl, certificate

在 IIS 7 中，我为站点创建了一个 https 绑定，并且我想要求 https 的客户端证书并仍然保留我的 http 端点。

也就是说，我想为我的 https 端点要求客户端证书，而不需要全面使用 SSL 并且不允许访问我的 http 端点（通过 SSL 设置中的“需要 SSL”）。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T04:15:17.847

客户端证书通常用于 2-way SSL，因此不仅服务器而且客户端也使用其私钥加密流量。

如果您不想全面执行 https，那么您可以尝试的一件事是接受客户端证书（请参阅 SSL 设置），然后在您的应用程序中实施证书验证。

有关详细信息，请参阅 MSDN 上的 Request.ClientCertificate

```
if (HttpContext.Current.Request.IsSecureConnection)
{
// it's SSL, so check the client cert
bool authorized = IsClientCertAuthorized(HttpContext.Current.Request.ClientCertificate)
} 
```

然后根据需要实现该方法。

注意：我还没有测试过，所以如果你尝试过，请评论。

# javascript - 未捕获的类型错误：对象 [对象窗口] 没有方法“每个”

> ID：12701301
> 
> 赞同：3
> 
> 时间：2012-10-03T02:57:13.780
> 
> 标签：javascript, jquery, plugins, window, each

我正在创建一个与 Bootstrap 交互的 jQuery 插件，当我在 jQuery 元素上调用该函数时出现以下错误：

```
Uncaught TypeError: Object [object Window] has no method 'each' 
```

这是有问题的JavaScript：

```
!function ($) {
$.fn.alertAutoClose = function (interval) {
  setTimeout(function () {
    return $(this).each(function () {
      $(this).hide();
    });
  }, interval);
}(window.jQuery); 
```

这是插件的触发方式：

```
$(".alert").alertAutoClose(1000); 
```

这是页面上的 HTML：

```
<div class="alert fade in">
  <button type="button" class="close" data-dismiss="alert">&times;</button>
  <strong>Warning!</strong> Best check yo self, you're not looking too good.
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T03:02:41.120

在`setTimeout()`, `this`is内部`window`，不是您的对象。您需要保存`this`参考并执行以下操作：

```
!function ($) {
$.fn.alertAutoClose = function (interval) {
     var self = this;
     setTimeout(function () {
       self.hide();
     }, interval);
     return this;
}(window.jQuery); 
```

仅供参考，您也可以像这样完成同样的事情：

```
!function ($) {
$.fn.alertAutoClose = function (interval) {
     this.delay(interval).hide(1);
     return this;
}(window.jQuery); 
```

当你给出`.hide()`一个持续时间时，它会变成一个动画，所以它可以与`.delay()`.

此外，`this`jQuery 方法中的值是 jQuery 对象。所以，如果你想调用一个适用于 jQuery 对象中所有元素的方法，你可以直接在`this`. 您不必将其转换为 jQuery 对象（它已经是一个），也不必使用`.each()`，因为大多数 jQuery 方法（例如`.hide()`已经对对象中的所有元素进行操作）。

# java - 如何不断更新日期/日历对象？

> ID：12701305
> 
> 赞同：1
> 
> 时间：2012-10-03T02:57:58.257
> 
> 标签：java, date, calendar

我正在制作一个小型闹钟应用程序来复习 Java。该应用程序的目的是让用户设置时钟时间和闹钟时间，然后当系统时间等于闹钟时间时闹钟应该“响起”。

时钟类包含日历和日期对象。

时钟是从类外的主要方法中引用的。在那个主要方法中，我构建了一个简单的命令行用户界面，用户可以在其中设置时钟和闹钟的时间。默认情况下，时钟初始化为当前系统时间。

然而，问题在于自动初始化和用户定义的时钟对象——它们不是“滴答”或更新。

```
Clock regularClock = new Clock(); //Defaults clock (using a Date) to the system time

while (userInput != "Quit")
{
   switch(userInput)
   {
      ...Other choices here...
      case "Set Time":  System.out.print("Enter hour: ");
                    hours = kb.nextInt();
                System.out.print("\nEnter minutes: ");
                minutes = kb.nextInt();
                ACR.regularClock.setTime(hours, minutes);
                System.out.println("Clock has been set");

       case "Set Alarm": System.out.print("Enter hour: ");
            hours = kb.nextInt();
            System.out.print("\nEnter minutes: ");
            minutes = kb.nextInt();
            ACR.alarmClock.setTime(hours, minutes);
            ACR.alarmClock.setAlarmOn(true);
            System.out.println("Alarm has been set.");
            break;
      ...Other choices here...

  userInput = keyboard.next();
   } 
```

正如您将看到的，没有循环或任何东西可以刷新或保持常规时钟滴答作响。出于某种原因，当我开始时，我认为 Date 和 Calendar 对象一旦创建就会继续运行——有点像秒表。

所以现在我想知道在这个while循环中更新它们的最佳方法是什么。如果只允许使用默认的系统时钟，那就很容易了——我每次都可以在 while 循环的开头创建一个新的 Date 对象。但是，如果他们选择了，那将覆盖用户创建的时钟时间。

此外，如果用户不输入任何输入 - 而只是让应用程序坐在那里 - 他/她将输入输入 - 它不应该仍然刷新时间并检查regularClock = alarmClock时间吗？我怎样才能做到这一点？

我意识到我现在有点漫不经心，所以我就这样吧。我一直在努力，但无法找出最佳解决方案。如果您有任何问题，请告诉我！

简短摘要问题：

1.  如何保持 Date 或 Calendar 对象中的时间，即使它已被修改？

2.  如何在等待用户输入的同时不断更新这些对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T03:16:22.627

有更简单的方法，但这不是问题；）

基本上，您需要建立某种可以在后台更新/修改时钟的“tick”线程......

您可以编写自己的`Thread`/`Runnable`来执行这些任务，但它们本质上是不准确的......

就像是...

```
Thread thread = new Thread(new Ticker());
thread.setDaemon(true); // Otherwise the JVM won't stop when you want it t
thread.start();

//...

public class Ticker implements Runnable {
    public void run() {
        while (true) {
            try {
                Thread.sleep(1000);
            } catch (InterruptedException exp) {
            }
            // Update static reference to the clock...
        }
    }
} 
```

不过要小心

> 使当前执行的线程休眠（暂时停止执行）指定的毫秒数，取决于系统计时器和调度程序的精度和准确性。该线程不会失去任何监视器的所有权。

另一种方法是使用[`java.util.Timer`](http://docs.oracle.com/javase/7/docs/api/java/util/Timer.html)

```
Timer timer = new Timer(true);
timer.scheduleAtFixedRate(new Ticker(), 1000, 1000);

//...

public class Ticker extends TimerTask {
    public void run() {
        // Update static reference to the clock...
    }
} 
```

再次，小心...

> 随后的执行大约每隔一段时间进行一次

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T03:06:36.313

日期和日历对象不会“运行”——它们代表特定的时间点。我相信您正在寻找的是[Timer](http://docs.oracle.com/javase/6/docs/api/java/util/Timer.html)类。

# php - 用于获取 textarea 中的更改并将其发送到服务器的 Jquery 插件

> ID：12701307
> 
> 赞同：1
> 
> 时间：2012-10-03T02:58:06.403
> 
> 标签：php, javascript, jquery, html

我从服务器获取文件“abc.txt”并将其显示在文本区域中进行编辑。

```
<div id="filecontents"> <textarea>  CONTENTS OF FILE LARGER THAN 10KB
 </textarea> </div> 
```

该文件的内容可能很大。用户将编辑文本区域并从任何部分（不仅仅是结尾）添加/删除文本。我只想将更改发送到服务器以进行修补。我该如何做到这一点？是否有流行的 linux 命令（diff）的 javascript 版本。John Resig 的差异代码可能不起作用，因为对我来说，它将涉及服务器端的额外解析。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T03:05:22.013

你应该看看[google-diff-match-patch](http://code.google.com/p/google-diff-match-patch/)，它看起来应该做你想做的事。

# c - 如何在 C 中生成长度为 X 的文件？

> ID：12701311
> 
> 赞同：-1
> 
> 时间：2012-10-03T02:58:47.070
> 
> 标签：c, linked-list, fopen, archive

我正在编写一个管理纯文本文件的程序的代码。问题是我怎样才能生成一个文件，使用`fopen()`，长度为 的字符串`X`。

我的意思`X`是用户只能输入一个字母作为文件名`("a.txt")`，但他也可以输入一个很长的名称`("this_is_my_super_new_file_bla_bla_bla.txt")`。

我试图用链表来做，但我不知道如何将链表节点的 char 部分传递给`fopen()`.

还有另一种方法吗？我唯一不想做的就是限制名称的长度。如果我这样做，我将不得不从一开始就保留内存，这会使我的程序变得更重。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T03:29:11.403

假设您有一个`char *`带有文件名的字符串 ()，并且您想添加“.txt”扩展名，那么您可以执行以下操作：

```
char *input = "new_file_name";
char *filename = malloc((strlen(input) + 5) * sizeof(char));
sprintf (filename, "%s.txt", input);
FILE *file = fopen(filename, "w");
free(filename); 
```

# android - Listview内的Textview文本颜色

> ID：12701312
> 
> 赞同：3
> 
> 时间：2012-10-03T02:58:48.773
> 
> 标签：android, listview, colors, textview, android-arrayadapter

我正在编写一个应用程序来检查我们的“网络服务”并返回“托管”或“非托管”状态，我在列表视图中保留正在运行的搜索历史记录（直到用户清除它），这一切正常。

我想做的是，如果状态是“托管”，我希望单个 textview 项目为绿色，如果它是“未托管”，我希望单个项目为红色。

```
 //This is the String Array which gets populated later.
    ArrayList<String> _searchHistoryList = new ArrayList<String>();

    //Here is where I override the getView to try to change the color.
    listAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, _searchHistoryList) {
    @Override
    public View getView(int position, View convertView,  ViewGroup parent) {
        TextView textView = (TextView) super.getView(position, convertView, parent);

        String _currentStatus = appSettings.getString("current_status", "na");

        int textColor;
        if (_currentStatus.equals("Managed")){
            textColor = R.color.green_text;
        } else {
            textColor = R.color.red_text;
        }
        textView.setTextColor(getResources().getColor(textColor));

        return textView;
    }
};
lvSearchHistory.setAdapter(listAdapter); 
```

上面的代码实际上把整个listview变成了最后一个搜索项的颜色。（例如，如果最后一个搜索结果为“托管”结果 - 整个项目列表变为绿色，而不仅仅是单个项目）。

谁能指出我正确的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T03:11:40.003

在我看来你的问题的根源是这个电话：

```
String _currentStatus = appSettings.getString("current_status", "na"); 
```

此调用中没有任何内容表明您正在检查哪个列表元素，因此它将始终为列表中的每个视图返回相同的结果。您应该传入 position 参数并使用它来获取相关列表条目的状态（您如何执行此操作取决于您如何实际获取列表元素的状态，但这应该不会太难）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T04:55:05.983

试试下面的代码

```
if (_currentStatus.equals("Managed")){
        textView.setTextColor(0xFF008B45);
    } else {
        textView.setTextColor(0xFFB0171F);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T03:23:32.803

试试下面的代码：

```
 int textColor;
    if (_currentStatus.equals("Managed")){
        textColor = R.color.green_text;
     textView.setTextColor(getResources().getColor(textColor));
    } else {
        textColor = R.color.red_text;
       textView.setTextColor(getResources().getColor(textColor));
    }

    return textView; 
```

# uitableview - 是否可以对 UITableViewCell 附件的更改进行动画处理

> ID：12701317
> 
> 赞同：5
> 
> 时间：2012-10-03T02:59:24.320
> 
> 标签：uitableview, uiviewanimation

非常简单的情况，多行且一次只有一行应该有复选标记。用户选择第 X 行，第 X 行得到复选标记，复选标记从先前选择的行中删除。但是如何动画化变化呢？（淡入淡出）。

我想也许这会起作用：

```
[UIView animateWithDuration:1.0 animations:^{

    cell.accessoryType = UITableViewCellAccessoryNone;
    cell.accessoryType = UITableViewCellAccessoryCheckmark;

    previous.accessoryType = UITableViewCellAccessoryCheckmark;        
    previous.accessoryType = UITableViewCellAccessoryNone;        

}]; 
```

并且

```
[tableView reloadRowsAtIndexPaths:paths withRowAnimation:UITableViewRowAnimationFade]; 
```

第一个什么也没做，第二个删除了路径数组中 NSIndexPath 引用的两个单元格。我还尝试在 [tableView beginUpdates/endUpdates] 中包装 reloadRowsAtIndexPaths。

**更新：**

在传入的 indexPath （下面的简单实现）上调用 reloadRowsAtIndexPath 正在做同样的事情，该行“变为空白”。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    [tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
} 
```

该表是一个**静态**表，我为每个单元格声明和合成了属性，`cellForRowAtIndexPath`为每一行返回相应的单元格......

```
.h
@property (strong, nonatomic) IBOutlet UITableViewCell *cellNever;
@property (strong, nonatomic) IBOutlet UITableViewCell *cell030;
@property (strong, nonatomic) IBOutlet UITableViewCell *cell100;

.m
@synthesize cellNever;
@synthesize cell030;
@synthesize cell100;
...
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return [cells objectAtIndex:indexPath.row];
}

- (void) viewDidLoad {
    cells = [NSArray arrayWithObjects:cellNever, cell030, cell100, cell130, cell200, cell230, cell300, cell400, cell500, nil];
} 
```

非常感谢。

# c - C - 带信号量的多个分叉

> ID：12701322
> 
> 赞同：2
> 
> 时间：2012-10-03T03:00:03.263
> 
> 标签：c, fork, semaphore, critical-section

我试图最终解决生产者-消费者问题，但我首先需要能够使用信号量创建一个关键部分。我目前遇到的问题是当我运行程序时，关键部分有时会有多个进程进入它。我希望在给定时间只有一个进程处于关键部分。这是我目前拥有的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>
#include <sys/types.h>
#include <sys/ipc.h>
#include <sys/sem.h>

#define MAX 20

int main(void)
{
    key_t key = 1114;
    int semid, count,
        mutex = 0;

    //Initialize Semaphore Buffers
    struct sembuf oper0;

    pid_t waitId;
    pid_t parentId = getpid();

    //Create processes
    for(count = 0; count < MAX; count++)
    {
        if((waitId = fork()) == 0)
        {
            break;
        }
    }

    //Create a semaphore set of 3; I will be adding more semaphores
    if ((semid = semget(key, 3, 0600 | IPC_CREAT)) == -1) {
        printf("error in semget");
        exit(1);
    }

    // BINARY/MUTEX - initialize semaphore0 to 1 
    if(semctl(semid, mutex, SETVAL, 1) == -1)
    {
        printf("error in semctl");
        exit(0);
    }

    //Decrement semaphore 0
    oper0.sem_op = -1;
    oper0.sem_flg = 0;
    if (semop(semid, &oper0, 1) == -1) {
        printf("error decrementing semaphore \n");
        exit(1);
    }

    printf(" -- CRITICAL SECTION START ----------- \n\n");
    printf("%5d    %d     %s\n", getpid(), semctl(semid, 0, GETVAL, oper0.sem_num), " -- Semaphore 0");
    printf(" -- CRITICAL SECTION END -- \n\n");    

    //Increments semaphore 0
    oper0.sem_op = 1;
    oper0.sem_flg = 0;
    if (semop(semid, &oper0, 1) == -1) {
        printf("error incrementing semaphore \n");
        exit(1);
    }

    int i;
    if(getpid() == parentId)
    {
        for(i = 0; i < MAX i++)
        {
            wait(&waitId);
        }
    }
    else
    {
        exit(waitId);
    }

    // Remove semaphore 
    if (semctl(semid, 0, IPC_RMID) == -1) {
        printf("error in semctl");
        exit(1);
    }

    return 0;
} 
```

这是一个示例输出：

```
 -- CRITICAL SECTION START ----------- 

 1097    0      -- Semaphore 0
 -- CRITICAL SECTION END -- 

 -- CRITICAL SECTION START ----------- 

 1085    0      -- Semaphore 0
 -- CRITICAL SECTION END -- 

 -- CRITICAL SECTION START ----------- 

 -- CRITICAL SECTION START ----------- 

 1095    0      -- Semaphore 0
 -- CRITICAL SECTION END -- 

 1093    0      -- Semaphore 0
 -- CRITICAL SECTION END -- 

 -- CRITICAL SECTION START ----------- 

 -- CRITICAL SECTION START ----------- 

 1087    0      -- Semaphore 0
 -- CRITICAL SECTION END -- 

 1089    0      -- Semaphore 0
 -- CRITICAL SECTION END -- 

 -- CRITICAL SECTION START ----------- 

 1091    0      -- Semaphore 0
 -- CRITICAL SECTION END -- 
```

为什么信号量有时会锁定一个进程，而有时它会允许两个进程进入？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T04:13:13.487

因为你`semctl(semid, mutex, SETVAL, 1)`在每个孩子身上执行。你*真的*只想这样做一次。如果将 fork 循环移到创建和初始化信号量的位置之后，您可能会发现它看起来好多了。

此外，您可能希望在 printf 之后使用 fflush(stdout)；如果 stdout 被缓冲，那么即使缓冲区被写入临界区，输出也可能最终会混合在一起。

# java - Android Bitmap OutOfMemoryError + 游戏如何处理大量图像？

> ID：12701324
> 
> 赞同：1
> 
> 时间：2012-10-03T03:00:19.997
> 
> 标签：java, android, memory

我开始为我的游戏获取 OutOfMemoryError。我认为这是因为我为每个动画创建了新的位图（因此同一图像有多个位图），但后来我创建了一个 ImageLoader 类，只加载每个位图一次，然后需要图像的对象只使用对他们。

但是，我的游戏中有很多用于动画、背景、项目等的图像。我刚刚添加了一些项目，现在我不断收到错误消息。

其他游戏如何处理大量图像？我敢肯定，许多其他游戏的图像比我的多，并且仍然可以避免此错误。

有没有比我一直在做的不同/更好的方法来实现 ImageLoader？

非常感谢，伙计们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T03:17:00.073

游戏开发者通过花费大量时间优化图像大小和利用内存缓存来解决这个问题。

重要的是要知道您的应用程序必须使用多少内存，并且*不要超过它*。您可以设置 LRU（最近最少使用）缓存，以确保位图的总内存占用保持在特定大小以下。您只需将位图插入缓存，一旦缓存达到其最大允许大小（您指定的大小），它将开始卸载一段时间未使用的位图。

Android 文档中的[这篇文章](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)中有一些非常好的信息，包括代码片段。

# c - 提高sum的性能（C版）

> ID：12701326
> 
> 赞同：2
> 
> 时间：2012-10-03T03:00:38.217
> 
> 标签：c, performance, loops, sum, intel

我正在使用科学计算代码。如果可能的话，我想稍微改进一下。我用放大器检查代码。最耗时（大量使用）的代码是：

```
double a = 0.0;
for(j = 0; j < n; j++) a += w[j]*fi[((index[j] + i)<<ldf) + k]; 
```

对我来说，它只是 w 和 fi 的点积。我想知道：

1.  英特尔编译器会自动执行吗？（我的意思是将循环视为两个向量化数组的点积。）
2.  有没有办法改进代码？（我的意思是可能定义另一个与 w 大小相同的数组 a1。然后所有相乘的数字都可以存储在 a1 中（展开循环？）。最后求和。）
3.  其他建议？

我正在使用带有视觉工作室的并行作曲家 2013。任何想法都会被欣赏！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T03:09:25.607

你可以首先注意到你总是`k`在你的`fi`数组中偏移一个固定的数量......我假设它是 type `double*`。那么为什么不在`k`循环之前只偏移一次呢？

```
double *fik = fi + k; 
```

事实上，你对`i`. 该值`(index[j] + i) << ldf`相当于`(index[j] << ldf) + (i << ldf)`。所以，你得到：

```
double *fik = fi + k + (i << ldf);
double a = 0.0;
for(j = 0; j < n; j++) a += w[j] * fik[ index[j]<<ldf ]; 
```

应该快一点，除非编译器已经决定为你这样做。

# objective-c - 应用程序试图在目标上推送一个 nil 视图控制器

> ID：12701327
> 
> 赞同：4
> 
> 时间：2012-10-03T03:00:58.440
> 
> 标签：objective-c, ios, uikit, presentmodalviewcontroller, mfmessagecomposeview

有没有人遇到过这种错误`MFMessageComposeViewController`？

我是这样分配和呈现的：

```
 MFMessageComposeViewController *message = [[MFMessageComposeViewController alloc] init];
    message.messageComposeDelegate = self;

    [[UIApplication sharedApplication].delegate.window.rootViewController presentModalViewController:message animated:YES]; 
```

但它呈现出一个空洞的观点并说：

`Application tried to push a nil view controller on target <MFMessageComposeViewController: 0x96d1380>.`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T09:05:01.240

模拟器上的 MFMessageComposeViewController 可能重复[- canSendText？](https://stackoverflow.com/questions/9349381/mfmessagecomposeviewcontroller-on-simulator-cansendtext)

基本上，如果 Lion 和 Mountain Lion 的模拟器启用了 Messages 帐户，则会发生这种情况。尝试在真实设备上进行测试，因为它在那里应该可以正常工作。

# python - 如何在python中正确处理非ASCII字符串

> ID：12701333
> 
> 赞同：0
> 
> 时间：2012-10-03T03:01:20.410
> 
> 标签：python, python-unicode

我正在构建一个应用程序，该应用程序在数据库中包含带有拉丁符号的数据。用户可以输入这些数据。到目前为止，我一直在做的是在模板中显示数据时在最后对每个用户输入进行编码（'latin2'）和解码（'latin2'）。这有点烦人，我想知道是否有更好的方法来处理这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T04:00:38.377

Python 的`unicode`类型被设计为字符串的“自然”表示。除了`unicode`类型之外，字符串应该是一些未指定的编码，但是没有办法用使用的编码“标记”它们，python 会非常坚持地假设字符串是 ASCII 或 UTF-8 编码。因此，如果您编写整个程序来假设这`str`意味着 latin2，您可能会感到头疼。编码问题会潜入代码中的奇怪位置并渗透到各个层，有时会在数据库中获取错误数据，并最终在完全不相关且无法调试的地方导致奇怪的行为或令人讨厌的错误。

我建议您查看有关将您的数据库数据转换为 UTF-8 的信息。

如果您不能这样做，我强烈建议您将编码/解码调用移动到您将数据传输到/从数据库传输的那一刻。如果您有任何类型的数据库抽象层，您可能可以将其配置为或多或少地自动为您处理。然后，您应该确保任何用户输入都立即转换为`unicode`类型。

以这种方式使用`unicode`类型和显式编码/解码还有一个优点，即如果您确实遇到编码问题，您可能会更快注意到，您可以将[unicode-nazi](http://pypi.python.org/pypi/unicode-nazi)扔给他们以追踪它们（请参阅[如何制作 python 2.x将字符串强制转换为 unicode 时发出警告？](https://stackoverflow.com/questions/12557447/how-can-you-make-python-2-x-warn-when-coercing-strings-to-unicode)）。

* * *

对于您的标记问题：Flask 和 Jinja2 默认情况下会在将字符串中的任何不安全字符呈现到 HTML 之前对其进行转义。要覆盖自动转义，只需使用`safe`过滤器：

```
<h1>More than just text!</h1>
<div>{{ html_data|safe }}</div> 
```

有关详细信息，请参阅[Flask 模板：控制自动转义](http://flask.pocoo.org/docs/templating/#controlling-autoescaping)，并非常小心地使用它，因为您正在有效地从数据库加载代码并执行它。在现实生活中，您可能想要清理数据（请参阅[Python HTML sanitizer/scrubber/filter](https://stackoverflow.com/questions/699468/python-html-sanitizer-scrubber-filter)或[Jinja2 转义除 img、b 等之外的所有 HTML](https://stackoverflow.com/questions/8976683/jinja2-escape-all-html-but-img-b-etc)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T03:07:40.567

尝试将此添加到程序的顶部。

```
 import sys
 reload(sys)
 sys.setdefaultencoding('latin2') 
```

我们必须重新加载 sys 因为：

```
>>> import sys
>>> sys.setdefaultencoding
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'module' object has no attribute 'setdefaultencoding'
>>> reload(sys) 
<module 'sys' (built-in)>
>>> sys.setdefaultencoding
<built-in function setdefaultencoding> 
```

# java - 我收到一条错误消息，提示无法从 Vehicle 类型中对非静态方法 GetNUMber() 进行静态引用

> ID：12701334
> 
> 赞同：1
> 
> 时间：2012-10-03T03:01:24.200
> 
> 标签：java

我收到一条错误消息，说无法从 Vehicle 类型中对非静态方法 GetNUMber() 进行静态引用。我不太明白发生了什么。请帮忙！

```
public class Vehicle
{

    private int VehicleNumber;

public void SetNumber (int N){

    VehicleNumber = N;

}

public  int GetNumber (){

    return VehicleNumber;

}

public static void main (String args[]){

    Vehicle Maxda = new Vehicle();
    Maxda.SetNumber(23423);
    System.out.println("Vehicle Maxda number is " + GetNumber());

}   
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T03:02:30.970

`GetNumber()`（顺便提一下，应该命名为`getNumber()`）是一个*实例*方法。

这行没有意义：

```
 System.out.println("Vehicle Maxda number is " + GetNumber()); 
```

如果没有实例来调用它，则无法调用该方法。

# javascript - Backbone.js 将视图附加到多个元素

> ID：12701338
> 
> 赞同：6
> 
> 时间：2012-10-03T03:02:29.763
> 
> 标签：javascript, jquery, backbone.js

我对骨干很陌生，所以我这样做可能违反了骨干的本质。建议表示赞赏：

我做了一个墙式系统。所以有一个表格可以用来在墙上发布更新。

每个更新都可以对它们进行评论。我一次显示 10 个更新。所以有10个评论表格。所以我有一个看法：

```
 CommentForm=Backbone.View.extend({
initialize:function(messageView){

},
events:{
    "submit":"postcomment"
},
showMessage:function(data){
      if(data.success)
            type="success";
               else
            type="error";
           message=data.error?data.error:"Update posted successfully";
           $messageContainer=$this.prev();
           console.log($this);
           var html="<div class='alert alert-"+type+"'>"+message+"</div>";
            $($messageContainer).html(html);
},
postcomment:function(){
        $this=$(this.el);

        $.post(baseUrl+"/portal/post-comment",$this.serialize(),this.showMessage,"json");
        return false;
}

   }); 
```

现在我为它创建一个实例，如下所示：

```
 commentFormView= new CommentForm({el:$(".comment-form form")}); 
```

注意 .comment-form 是一个 div。有多个这样的元素。事件处理程序可以很好地附加到所有评论表单。但是当我使用`$this=$(this.el);`它时，它总是指第一个评论表单。我该如何解决这个问题。$(this.el) 应该引用评论表单的当前实例，其中事件被触发而不是第一个

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T03:08:35.263

一种方法是使用类似的方法为每个元素创建一个新视图。

```
$(".comment-form form").each(function() {
    new CommentForm( { el: $(this) } );
}); 
```

* * *

**编辑**还有另一种（更好的？）方式。因为事件处理程序将原始事件作为其第一个参数，所以您可以`postcomment`这样编写处理程序：

```
postcomment:function(evt){
   // ...
} 
```

然后你可以使用`$(evt.srcElement)`来获取实际的元素。

```
postcomment:function(evt){
   $this = $(evt.srcElement);
   // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T06:42:50.637

$('.comment-form form') 将返回一个包含所有匹配表单元素的数组。您需要遍历该数组并为每个元素创建一个视图，如 dbaseman 所示。

此外，而不是做

```
$this=$(this.el) 
```

主干视图已经提供了一个 jquery 包装的 el：

```
this.$el 
```

# php - 模型中的 Codeigniter HTTP 错误 500？

> ID：12701341
> 
> 赞同：0
> 
> 时间：2012-10-03T03:02:47.770
> 
> 标签：php, codeigniter

我是 Codeigniter 的新手。我正在尝试创建一个简单的客户数据库，当它不断尝试加载我的 update_customer 模型时，它一直给我一个 Http 错误 500。我很确定当我注释掉模型时，我已经将其范围缩小到模型原因调用页面将其重定向到自身而没有错误。任何想法我的错误在哪里？

而且我似乎无法在 apache 错误日志中找到错误...

控制器：

```
function edit_customer($id){
    $data['success']=0;
    if($_POST){
        $data_customer=$_POST;
        $data_customer['active'] = 1;
        $this->customer->update_customer($id,$data);
        $data['success']=1;
    }
    $data['customer']=$this->customer->get_customer($id);

    $this->load->view('header');
    $this->load->view('edit_customer',$data);
    $this->load->view('footer');
} 
```

模型：

```
function get_customer($id){
    $this->db->select()->from('customers')->where(array('active'=>1, 'id'=>$id))->order_by('date_added', 'desc');
    $query=$this->db->get();
    return $query->first_row('array');
}

function update_customer($id, $data){
    $this->where('id', $id);
    $this->db->update('customers', $data);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T03:43:56.880

您在 where 语句中缺少 a`db->`应该是：

```
function update_customer($id, $data){
    $this->db->where('id', $id);
    $this->db->update('customers', $data);
} 
```

# ios - 在那里创建文件后立即刷新应用程序文件夹的列表

> ID：12701344
> 
> 赞同：0
> 
> 时间：2012-10-03T03:03:43.480
> 
> 标签：ios, user-interface

我正在使用下拉菜单来显示我的应用程序文件夹中的文件名。如果我在应用程序处于会话状态时创建了一个新文件，我将无法在创建后立即在下拉列表中看到文件名。我怎样才能通过刷新它来让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T05:38:55.463

每次在应用程序的文件夹中添加或删除文件时，AppDelegate 的 applicationDidBecomeActive 方法都会收到通知。

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{
    // Populate your dropdown here
    [self.viewController loadDropdown];    
} 
```

# java - Java Generic TypeOf 返回 T

> ID：12701345
> 
> 赞同：0
> 
> 时间：2012-10-03T03:04:00.693
> 
> 标签：java

```
public Object Convert(Class<T> Type) {
    if (Type == Integer.class) {
        return Integer.parseInt(DataInfo);
    } else if (Type == String.class ) {
        return DataInfo;
    } else if (Type == Double.class) {
        return Double.parseDouble(DataInfo);
    }
    return null;

} 
```

还有其他方法可以做到这一点吗？

我只想做类似的事情： `int X = Foo.Convert<int>();`

它需要一个字符串并将其转换为`<Type>`<----- 那。我试过：

```
public T Convert()
{
} 
```

但是我到处搜索，Java 没有 typeof 函数：S 基本上试图将字符串从用户转换为数据类型。

编辑..我问是因为在 C++ 中我通常这样做：

```
template <typename T>
inline T ToNumber(const std::string &Text){std::istringstream SS(Text); T Result; return (SS >> Result ? Result : 0);} 
```

我想知道在Java中我是否可以做到这一点..我像这样使用它：

```
package test;

import java.io.*;
import java.util.Scanner;

public class Data<T> {
    private String DataInfo;

    public String ReadBuffer() throws IOException {
        BufferedReader Buffer = new BufferedReader(new InputStreamReader(System.in));
        return (DataInfo = Buffer.readLine());
    }

    public String ReadConsole() {
        Console Con = System.console();
        return (DataInfo = Con.readLine());
    }

    public String Read() {
        Scanner Reader = new Scanner(System.in);
        return (DataInfo = Reader.next());
    }

    public Object Convert(Class<T> Type) {
        if (Type == Integer.class) {
            return Integer.parseInt(DataInfo);
        } else if (Type == String.class ) {
            return DataInfo;
        } else if (Type == Double.class) {
            return Double.parseDouble(DataInfo);
        }
        return null;

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T03:05:37.040

由于类型擦除，这是完全不可能的。

你能做的最好的事情就是让调用者通过一个`Class<T>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-04T00:34:15.277

也许您可以查看 com.google.inject.TypeLiteral ，因为它可以通过擦除来帮助您。它将保留原始（非通用）类型。

# .net - 修改 Serializable 类并为 .NET 读取老一代数据

> ID：12701346
> 
> 赞同：1
> 
> 时间：2012-10-03T03:04:02.817
> 
> 标签：.net, serialization

我有一个当前定义为的结构

```
[Serializable]
public struct PointMap
{
    public PointMap( double point, double distance )
    {
        Point = point;
        Distance = distance;
    }

    public double Point;
    public double Distance;
} 
```

我现在想将它修改为一个类，实现 ISerializableObject，添加一个标签，并且仍然能够读取保存为上述结构的数据。所以，像这样的东西。

```
[Serializable]
public class PointMap : ISerializable
{
    public PointMap( double point, double distance )
    {
        Point = point;
        Distance = distance;
    }

    public void GetObjectData( SerializationInfo info, StreamingContext context )
    {
        ...
    }

    private string _label;
    public double Point;
    public double Distance;
} 
```

现在，是否可以编写一些可以理解旧序列化对象的东西，或者以某种方式将`GetObjectData()`旧版本的类映射到自定义反序列化器？我们正在使用 .NET 4.0。

# maven - 无法将 Maven 项目导入 IntelliJ IDEA

> ID：12701347
> 
> 赞同：37
> 
> 时间：2012-10-03T03:04:15.697
> 
> 标签：maven, intellij-idea

我在将任何 Maven 项目导入 IntelliJ IDEA 时遇到问题。我像这样创建一个空的 Maven 项目：

```
$ mvn archetype:generate -DgroupId=com.mycompany.app -DartifactId=my-app -DarchetypeArtifactId=maven-archetype-quickstart -DinteractiveMode=false 
```

然后我尝试在 IDEA 中打开项目（文件 > 打开项目，然后选择`pom.xml`）。显示“正在阅读 pom.xml”的进度框会显示几分钟，然后在不打开项目的情况下消失。

查看 IDEA 日志，我看到一些连接超时异常，如下所示：

```
2012-10-03 11:55:38,502 [0] 信息 - #com.intellij.idea.Main - -------------------------- ---------------------------- IDE 已启动 -------- ----------------------------------
2012-10-03 11:55:38,512 [10] 信息 - #com.intellij.idea.Main - IDE：IntelliJ IDEA（构建 #IC-117.798，2012 年 7 月 25 日 00:00）
2012-10-03 11:55:38,512 [10] 信息 - #com.intellij.idea.Main - JRE: 1.6.0_25-b06 (Sun Microsystems Inc.)
2012-10-03 11:55:38,512 [10] 信息 - #com.intellij.idea.Main - JVM: 20.0-b11 (Sun Microsystems Inc.)
2012-10-03 11:55:38,539 [37] 信息-.intellij.idea.IdeaApplication-检测到 WM：Compiz
2012-10-03 11:55:40,328 [1826] 信息-llij.ide.plugins.PluginManager-在 1613 毫秒内初始化了 28 个插件
2012-10-03 11:55:40,328 [1826] 信息 - llij.ide.plugins.PluginManager - 加载的插件：IDEA CORE、属性支持、Ant 支持 (1.0)、XPathView + XSLT 支持 (4)、IntelliLang (8.0) , Copyright (8.1), Groovy (9.0), Maven Integration, Scala (0.5.981), Git Integration (8.1), Task Management (1.0), GitHub, hg4idea (10.0), CVS Integration (11), Intention Power Pack ( 1.0), I18n for Java, TestNG-J (8.0), GenerateToString (5.0), Commander (1.0.0), Plugin DevKit (1.0), UI Designer, Gradle, Eclipse Integration (3.0), Inspection Gadgets (1.0), JUnit (1.0)、Subversion 集成 (1.1)、XSLT-Debugger (1.4)、Android 支持 (10.0)
2012-10-03 11:55:40,755 [2253] 信息-ellij.util.io.PagedFileStorage-lower=100；上=200；缓冲区=10；映射=真
2012-10-03 11:55:40,799 [2297] 信息 - api.vfs.impl.local.FileWatcher - 启动文件观察器：/usr/lib/idea-IC-117.798/bin/fsnotifier64
2012-10-03 11:55:40,800 [2298] 信息 - api.vfs.impl.local.FileWatcher - 本机文件观察器正在运行。
2012-10-03 11:55:41,181 [2679] 信息 - s.impl.stores.FileBasedStorage - 未加载 $APP_CONFIG$/ui.lnf.xml 文件的文档为空
2012-10-03 11:55:41,181 [2679] 信息 - .impl.stores.XmlElementStorage - 未为 $APP_CONFIG$/ui.lnf.xml 加载文档
2012-10-03 11:55:41,824 [3322] 信息 - TestNG Runner - 创建 TestNG 模板配置
2012-10-03 11:55:41,833 [3331] 信息 - TestNG Runner - 创建 TestNG 模板配置
2012-10-03 11:55:41,935 [3433] 信息 - ellij.project.impl.ProjectImpl - 23 个项目组件在 693 毫秒内初始化
2012-10-03 11:55:41,936 [3434] 信息 - .module.impl.ModuleManagerImpl - 0 个模块在 0 毫秒内加载
2012-10-03 11:55:41,948 [3446] 信息-.intellij.ide.XmlRpcServerImpl-XmlRpc 服务器在 /127.0.0.1:63342 监听
2012-10-03 11:55:42,252 [3750] 信息-s.impl.stores.FileBasedStorage-$APP_CONFIG$/macros.xml 文件未加载文档为空
2012-10-03 11:55:42,252 [3750] 信息 - .impl.stores.XmlElementStorage - 未为 $APP_CONFIG$/macros.xml 加载文档
2012-10-03 11:55:42,256 [3754] 信息-s.impl.stores.FileBasedStorage-$APP_CONFIG$/quicklists.xml 文件未加载文档为空
2012-10-03 11:55:42,256 [3754] 信息 - .impl.stores.XmlElementStorage - 未为 $APP_CONFIG$/quicklists.xml 加载文档
2012-10-03 11:55:42,330 [3828] 信息-pl.stores.ApplicationStoreImpl-79 个应用程序组件在 1910 毫秒内初始化
2012-10-03 11:55:42,345 [3843] 信息-s.impl.stores.FileBasedStorage-$APP_CONFIG$/customization.xml 文件未加载文档为空
2012-10-03 11:55:42,345 [3843] 信息 - .impl.stores.XmlElementStorage - 未为 $APP_CONFIG$/customization.xml 加载文档
2012-10-03 11:55:42,499 [3997] 信息 - ij.openapi.wm.impl.IdeRootPane - 应用程序初始化耗时 4825 毫秒
2012-10-03 11:55:50,842 [12340] 信息-s.impl.stores.FileBasedStorage-$APP_CONFIG$/plainTextFiles.xml 文件未加载文档为空
2012-10-03 11:55:50,842 [12340] 信息 - .impl.stores.XmlElementStorage - 未为 $APP_CONFIG$/plainTextFiles.xml 加载文档
2012-10-03 11:55:55,348 [16846] 信息-ution.rmi.RemoteProcessSupport-/usr/lib/jvm/jdk1.6.0_25/jre/bin/java -Djava.awt.headless=true -Xmx512m -Dfile .encoding=UTF-8 -classpath /usr/lib/idea-IC-117.798/lib/resources_en.jar:/usr/lib/idea-IC-117.798/lib/annotations.jar:/usr/lib/idea-IC -117.798/lib/util.jar:/usr/lib/idea-IC-117.798/lib/trove4j.jar:/usr/lib/idea-IC-117.798/lib/jdom.jar:/usr/lib/idea- IC-117.798/plugins/maven/lib/lucene-core-2.4.1.jar:/usr/lib/idea-IC-117.798/plugins/maven/lib/activation-1.1.jar:/usr/lib/idea- IC-117.798/plugins/maven/lib/maven-2.2.1-uber.jar:/usr/lib/idea-IC-117.798/plugins/maven/lib/maven2-server-impl.jar:/usr/lib/ idea-IC-117.798/plugins/maven/lib/jaxb-impl.jar:/usr/lib/idea-IC-117.798/plugins/maven/lib/jaxb-api.jar:/usr/lib/idea-IC- 117.798/plugins/maven/lib/maven-embedder-1.1-SNAPSHOT.jar:/usr/lib/idea-IC-117。798/plugins/maven/lib/classworlds-1.1.jar:/usr/lib/idea-IC-117.798/plugins/maven/lib/resources_en.jar:/usr/lib/idea-IC-117.798/plugins/maven/ lib/commons-beanutils.jar:/usr/lib/idea-IC-117.798/plugins/maven/lib/mercury-artifact-1.0-alpha-6.jar:/usr/lib/idea-IC-117.798/plugins/ maven/lib/maven-server-api.jar:/usr/lib/idea-IC-117.798/plugins/maven/lib/maven-dependency-tree-1.2.jar:/usr/lib/idea-IC-117.798/插件/maven/lib/archetype-common-2.0-alpha-4-SNAPSHOT.jar:/usr/lib/idea-IC-117.798/plugins/maven/lib/plexus-utils-1.5.5.jar:/usr/ lib/idea-IC-117.798/plugins/maven/lib/wadl-core.jar:/usr/lib/idea-IC-117.798/plugins/maven/lib/nexus-indexer-1.2.3.jar org.jetbrains。 idea.maven.server.RemoteMavenServer798/plugins/maven/lib/commons-beanutils.jar:/usr/lib/idea-IC-117.798/plugins/maven/lib/mercury-artifact-1.0-alpha-6.jar:/usr/lib/idea- IC-117.798/plugins/maven/lib/maven-server-api.jar:/usr/lib/idea-IC-117.798/plugins/maven/lib/maven-dependency-tree-1.2.jar:/usr/lib/ idea-IC-117.798/plugins/maven/lib/archetype-common-2.0-alpha-4-SNAPSHOT.jar:/usr/lib/idea-IC-117.798/plugins/maven/lib/plexus-utils-1.5.5 .jar:/usr/lib/idea-IC-117.798/plugins/maven/lib/wadl-core.jar:/usr/lib/idea-IC-117.798/plugins/maven/lib/nexus-indexer-1.2.3 .jar org.jetbrains.idea.maven.server.RemoteMavenServer798/plugins/maven/lib/commons-beanutils.jar:/usr/lib/idea-IC-117.798/plugins/maven/lib/mercury-artifact-1.0-alpha-6.jar:/usr/lib/idea- IC-117.798/plugins/maven/lib/maven-server-api.jar:/usr/lib/idea-IC-117.798/plugins/maven/lib/maven-dependency-tree-1.2.jar:/usr/lib/ idea-IC-117.798/plugins/maven/lib/archetype-common-2.0-alpha-4-SNAPSHOT.jar:/usr/lib/idea-IC-117.798/plugins/maven/lib/plexus-utils-1.5.5 .jar:/usr/lib/idea-IC-117.798/plugins/maven/lib/wadl-core.jar:/usr/lib/idea-IC-117.798/plugins/maven/lib/nexus-indexer-1.2.3 .jar org.jetbrains.idea.maven.server.RemoteMavenServer798/plugins/maven/lib/archetype-common-2.0-alpha-4-SNAPSHOT.jar:/usr/lib/idea-IC-117.798/plugins/maven/lib/plexus-utils-1.5.5.jar:/ usr/lib/idea-IC-117.798/plugins/maven/lib/wadl-core.jar:/usr/lib/idea-IC-117.798/plugins/maven/lib/nexus-indexer-1.2.3.jar org. jetbrains.idea.maven.server.RemoteMavenServer798/plugins/maven/lib/archetype-common-2.0-alpha-4-SNAPSHOT.jar:/usr/lib/idea-IC-117.798/plugins/maven/lib/plexus-utils-1.5.5.jar:/ usr/lib/idea-IC-117.798/plugins/maven/lib/wadl-core.jar:/usr/lib/idea-IC-117.798/plugins/maven/lib/nexus-indexer-1.2.3.jar org. jetbrains.idea.maven.server.RemoteMavenServer
2012-10-03 11:55:55,483 [16981] 信息-ution.rmi.RemoteProcessSupport-端口/ID：18011/Maven2ServerImpl9407569f
2012-10-03 11:56:58,898 [80396] 警告 - ution.rmi.RemoteProcessSupport - 由于 java.net.ConnectException，厨师无法启动：连接超时
2012-10-03 11:57:55,483 [136981] 警告 - ution.rmi.RemoteProcessSupport - java.rmi.NotBoundException: _DEAD_HAND_
2012-10-03 11:57:55,484 [136982] 警告 - ution.rmi.RemoteProcessSupport - 在 sun.rmi.registry.RegistryImpl.lookup（RegistryImpl.java:106）
2012-10-03 11:57:55,484 [136982] WARN - ution.rmi.RemoteProcessSupport - at com.intellij.execution.rmi.RemoteServer.start(RemoteServer.java:73)
2012-10-03 11:57:55,484 [136982] WARN - ution.rmi.RemoteProcessSupport - at org.jetbrains.idea.maven.server.RemoteMavenServer.main(RemoteMavenServer.java:22)
2012-10-03 11:58:01,749 [143247] 错误 - com.intellij.ide.IdeEventQueue - java.awt.event.MouseEvent [MOUSE_RELEASED,(65,116),absolute(64,140),button=1,修饰符=Button1,clickCount=1] 在 frame0
java.lang.RuntimeException：无法重新连接。
    在 org.jetbrains.idea.maven.server.RemoteObjectWrapper.perform（RemoteObjectWrapper.java:82）
    在 org.jetbrains.idea.maven.server.MavenServerManager.applyProfiles(MavenServerManager.java:311)
    在 org.jetbrains.idea.maven.project.MavenProjectReader.applyProfiles(MavenProjectReader.java:369)
    在 org.jetbrains.idea.maven.project.MavenProjectReader.doReadProjectModel(MavenProjectReader.java:98)
    在 org.jetbrains.idea.maven.project.MavenProjectReader.readProject(MavenProjectReader.java:52)
    在 org.jetbrains.idea.maven.project.MavenProject.read(MavenProject.java:405)
    在 org.jetbrains.idea.maven.project.MavenProjectsTree.doUpdate(MavenProjectsTree.java:534)
    在 org.jetbrains.idea.maven.project.MavenProjectsTree.doAdd(MavenProjectsTree.java:481)
    在 org.jetbrains.idea.maven.project.MavenProjectsTree.update(MavenProjectsTree.java:442)
    在 org.jetbrains.idea.maven.project.MavenProjectsTree.updateAll(MavenProjectsTree.java:413)
    在 org.jetbrains.idea.maven.wizards.MavenProjectBuilder.readMavenProjectTree(MavenProjectBuilder.java:198)
    在 org.jetbrains.idea.maven.wizards.MavenProjectBuilder.access$800(MavenProjectBuilder.java:44)
    在 org.jetbrains.idea.maven.wizards.MavenProjectBuilder$3.run(MavenProjectBuilder.java:179)
    在 org.jetbrains.idea.maven.utils.MavenUtil$8.run(MavenUtil.java:388)
    在 com.intellij.openapi.progress.impl.ProgressManagerImpl$TaskRunnable.run(ProgressManagerImpl.java:469)
    在 com.intellij.openapi.progress.impl.ProgressManagerImpl$6.run(ProgressManagerImpl.java:288)
    在 com.intellij.openapi.progress.impl.ProgressManagerImpl$2.run(ProgressManagerImpl.java:178)
    在 com.intellij.openapi.progress.impl.ProgressManagerImpl.executeProcessUnderProgress(ProgressManagerImpl.java:218)
    在 com.intellij.openapi.progress.impl.ProgressManagerImpl.runProcess(ProgressManagerImpl.java:169)
    在 com.intellij.openapi.application.impl.ApplicationImpl$8$1.run(ApplicationImpl.java:641)
    在 com.intellij.openapi.application.impl.ApplicationImpl$6.run(ApplicationImpl.java:434)
    在 java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
    在 java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    在 java.util.concurrent.FutureTask.run(FutureTask.java:138)
    在 java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    在 java.lang.Thread.run(Thread.java:662)
    在 com.intellij.openapi.application.impl.ApplicationImpl$1$1.run(ApplicationImpl.java:145)
引起：java.rmi.RemoteException：无法启动maven服务；嵌套异常是：
    java.rmi.ConnectException：连接拒绝主机：localhost；嵌套异常是：
    java.net.ConnectException：连接超时
    在 org.jetbrains.idea.maven.server.MavenServerManager.create(MavenServerManager.java:120)
    在 org.jetbrains.idea.maven.server.MavenServerManager.create(MavenServerManager.java:71)
    在 org.jetbrains.idea.maven.server.RemoteObjectWrapper.getOrCreateWrappee(RemoteObjectWrapper.java:41)
    在 org.jetbrains.idea.maven.server.MavenServerManager$8.execute(MavenServerManager.java:314)
    在 org.jetbrains.idea.maven.server.MavenServerManager$8.execute(MavenServerManager.java:311)
    在 org.jetbrains.idea.maven.server.RemoteObjectWrapper.perform（RemoteObjectWrapper.java:76）
    ... 27 更多
引起：java.rmi.ConnectException：连接拒绝主机：localhost；嵌套异常是：
    java.net.ConnectException：连接超时
    在 sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:601)
    在 sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:198)
    在 sun.rmi.transport.tcp.TCPChannel.newConnection(TCPChannel.java:184)
    在 sun.rmi.server.UnicastRef.newCall(UnicastRef.java:322)
    在 sun.rmi.registry.RegistryImpl_Stub.lookup（未知来源）
    在 com.intellij.execution.rmi.RemoteProcessSupport$2.compute(RemoteProcessSupport.java:215)
    在 com.intellij.execution.rmi.RemoteUtil.executeWithClassLoader(RemoteUtil.java:122)
    在 com.intellij.execution.rmi.RemoteProcessSupport.acquire(RemoteProcessSupport.java:212)
    在 com.intellij.execution.rmi.RemoteProcessSupport.acquire(RemoteProcessSupport.java:133)
    在 org.jetbrains.idea.maven.server.MavenServerManager.create(MavenServerManager.java:117)
    ... 32 更多
引起：java.net.ConnectException：连接超时
    在 java.net.PlainSocketImpl.socketConnect（本机方法）
    在 java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)
    在 java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)
    在 java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)
    在 java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
    在 java.net.Socket.connect(Socket.java:529)
    在 java.net.Socket.connect(Socket.java:478)
    在 java.net.Socket.(Socket.java:375)
    在 java.net.Socket.(Socket.java:189)
    在 sun.rmi.transport.proxy.RMIDirectSocketFactory.createSocket(RMIDirectSocketFactory.java:22)
    在 sun.rmi.transport.proxy.RMIMasterSocketFactory.createSocket(RMIMasterSocketFactory.java:128)
    在 sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:595)
    ... 41 更多
2012-10-03 11:58:01,752 [143250] 错误 - com.intellij.ide.IdeEventQueue - IntelliJ IDEA 11.1.3 Build #IC-117.798
2012-10-03 11:58:01,752 [143250] 错误 - com.intellij.ide.IdeEventQueue - JDK：1.6.0_25
2012-10-03 11:58:01,752 [143250] 错误 - com.intellij.ide.IdeEventQueue - VM：Java HotSpot(TM) 64 位服务器 VM
2012-10-03 11:58:01,752 [143250] 错误 - com.intellij.ide.IdeEventQueue - 供应商：Sun Microsystems Inc.
2012-10-03 11:58:01,752 [143250] 错误-com.intellij.ide.IdeEventQueue-操作系统：Linux
2012-10-03 11:58:01,752 [143250] 错误 - com.intellij.ide.IdeEventQueue - 最后行动：OpenProject
2012-10-03 11:58:01,752 [143250] 错误 - com.intellij.ide.IdeEventQueue - 原始异常：  
java.rmi.RemoteException：无法启动maven服务；嵌套异常是：
    java.rmi.ConnectException：连接拒绝主机：localhost；嵌套异常是：
    java.net.ConnectException：连接超时
    在 org.jetbrains.idea.maven.server.MavenServerManager.create(MavenServerManager.java:120)
    在 org.jetbrains.idea.maven.server.MavenServerManager.create(MavenServerManager.java:71)
    在 org.jetbrains.idea.maven.server.RemoteObjectWrapper.getOrCreateWrappee(RemoteObjectWrapper.java:41)
    在 org.jetbrains.idea.maven.server.MavenServerManager$8.execute(MavenServerManager.java:314)
    在 org.jetbrains.idea.maven.server.MavenServerManager$8.execute(MavenServerManager.java:311)
    在 org.jetbrains.idea.maven.server.RemoteObjectWrapper.perform（RemoteObjectWrapper.java:76）
    在 org.jetbrains.idea.maven.server.MavenServerManager.applyProfiles(MavenServerManager.java:311)
    在 org.jetbrains.idea.maven.project.MavenProjectReader.applyProfiles(MavenProjectReader.java:369)
    在 org.jetbrains.idea.maven.project.MavenProjectReader.doReadProjectModel(MavenProjectReader.java:98)
    在 org.jetbrains.idea.maven.project.MavenProjectReader.readProject(MavenProjectReader.java:52)
    在 org.jetbrains.idea.maven.project.MavenProject.read(MavenProject.java:405)
    在 org.jetbrains.idea.maven.project.MavenProjectsTree.doUpdate(MavenProjectsTree.java:534)
    在 org.jetbrains.idea.maven.project.MavenProjectsTree.doAdd(MavenProjectsTree.java:481)
    在 org.jetbrains.idea.maven.project.MavenProjectsTree.update(MavenProjectsTree.java:442)
    在 org.jetbrains.idea.maven.project.MavenProjectsTree.updateAll(MavenProjectsTree.java:413)
    在 org.jetbrains.idea.maven.wizards.MavenProjectBuilder.readMavenProjectTree(MavenProjectBuilder.java:198)
    在 org.jetbrains.idea.maven.wizards.MavenProjectBuilder.access$800(MavenProjectBuilder.java:44)
    在 org.jetbrains.idea.maven.wizards.MavenProjectBuilder$3.run(MavenProjectBuilder.java:179)
    在 org.jetbrains.idea.maven.utils.MavenUtil$8.run(MavenUtil.java:388)
    在 com.intellij.openapi.progress.impl.ProgressManagerImpl$TaskRunnable.run(ProgressManagerImpl.java:469)
    在 com.intellij.openapi.progress.impl.ProgressManagerImpl$6.run(ProgressManagerImpl.java:288)
    在 com.intellij.openapi.progress.impl.ProgressManagerImpl$2.run(ProgressManagerImpl.java:178)
    在 com.intellij.openapi.progress.impl.ProgressManagerImpl.executeProcessUnderProgress(ProgressManagerImpl.java:218)
    在 com.intellij.openapi.progress.impl.ProgressManagerImpl.runProcess(ProgressManagerImpl.java:169)
    在 com.intellij.openapi.application.impl.ApplicationImpl$8$1.run(ApplicationImpl.java:641)
    在 com.intellij.openapi.application.impl.ApplicationImpl$6.run(ApplicationImpl.java:434)
    在 java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
    在 java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    在 java.util.concurrent.FutureTask.run(FutureTask.java:138)
    在 java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    在 java.lang.Thread.run(Thread.java:662)
    在 com.intellij.openapi.application.impl.ApplicationImpl$1$1.run(ApplicationImpl.java:145)
引起：java.rmi.ConnectException：连接拒绝主机：localhost；嵌套异常是：
    java.net.ConnectException：连接超时
    在 sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:601)
    在 sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:198)
    在 sun.rmi.transport.tcp.TCPChannel.newConnection(TCPChannel.java:184)
    在 sun.rmi.server.UnicastRef.newCall(UnicastRef.java:322)
    在 sun.rmi.registry.RegistryImpl_Stub.lookup（未知来源）
    在 com.intellij.execution.rmi.RemoteProcessSupport$2.compute(RemoteProcessSupport.java:215)
    在 com.intellij.execution.rmi.RemoteUtil.executeWithClassLoader(RemoteUtil.java:122)
    在 com.intellij.execution.rmi.RemoteProcessSupport.acquire(RemoteProcessSupport.java:212)
    在 com.intellij.execution.rmi.RemoteProcessSupport.acquire(RemoteProcessSupport.java:133)
    在 org.jetbrains.idea.maven.server.MavenServerManager.create(MavenServerManager.java:117)
    ... 32 更多
引起：java.net.ConnectException：连接超时
    在 java.net.PlainSocketImpl.socketConnect（本机方法）
    在 java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)
    在 java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)
    在 java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)
    在 java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
    在 java.net.Socket.connect(Socket.java:529)
    在 java.net.Socket.connect(Socket.java:478)
    在 java.net.Socket.(Socket.java:375)
    在 java.net.Socket.(Socket.java:189)
    在 sun.rmi.transport.proxy.RMIDirectSocketFactory.createSocket(RMIDirectSocketFactory.java:22)
    在 sun.rmi.transport.proxy.RMIMasterSocketFactory.createSocket(RMIMasterSocketFactory.java:128)
    在 sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:595)
    ... 41 更多

```

我正在使用最新版本的 IDEA (11.1.3) 和 Maven (3.0.4)。任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-10-03T06:28:28.620

这是与网络和地址解析相关的常见问题。在某些情况下`localhost`可能无法解决，需要

```
127.0.0.1 localhost 
```

在`/etc/hosts`文件中。还要确保没有其他 IP 地址映射到`localhost`.

[有关更多详细信息，请参阅我](http://youtrack.jetbrains.com/issue/IDEA-64132#comment=27-380070)在相关 YouTrack 问题中的评论。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2017-08-10T15:20:43.393

我正在使用社区版 2017.2.1 并且遇到了同样的问题，我必须将 Maven 导入器的 JDK 版本更改为正确的版本（从 1.6 到 1.8）才能使其正常工作。

[![在此处输入图像描述](../Images/9d302387805f1cface1f8fca1662b7de.png)](https://i.stack.imgur.com/mjoYG.png)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-06-02T20:08:28.953

要在 14.1.3 Ultimate 中为我更正此问题，我必须添加

-Didea.maven3.use.compat.resolver

到 Preferences > Build, Execution, Deployment > Build Tools > Importing 下导入程序的 VM 选项

根据[https://youtrack.jetbrains.com/issue/IDEA-140208](https://youtrack.jetbrains.com/issue/IDEA-140208)上的错误。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-01-17T09:05:11.697

我在使用 IDEA 12 运行 groovy 脚本时遇到了类似的问题。问题与@CrazyCoder 所说的相同。解决方案基于 @kevinmrohr 所做的，只是更容易找到和设置。

为了解决这个问题，我编辑了位于 bin 目录中的 idea.exe.vmoptions（*如果*您使用的是 64 位版本，则为 idea64.exe.vmoptions）并添加了*-Djava.net.preferIPv4Stack* *=true*。

重新启动 IDEA，一切正常，没有任何问题。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-23T15:07:51.067

我有同样的问题。我不知道是什么导致它开始发生，我只知道我是如何修复它的。

我通过查看 lsof -i -P 发现 maven 远程服务器正试图在 IPv6 上运行，显然 IntelliJ 无法在 IPv6 上与之对话。我不确定它是否曾经在 IPv4 上运行并且某些原因导致它开始使用 IPv6，或者它是否总是使用 IPv6 并且 mac 更新以某种方式使其停止工作。

无论如何，我使用的解决方案是编辑 /Applications/IntelliJ IDEA 11.app/Contents/Info.plist 并将 java.net.preferIPv4Stack 参数添加到 java 进程：

```
<key>java</key>
<dict>
  <key>Properties</key>
  <dict>
    <key>java.net.preferIPv4Stack</key>
    <string>true</string>
  </dict>
</dict> 
```

我真的希望我能提供更多关于为什么会发生这种情况的信息。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-03T03:27:04.657

找出您机器上的哪个进程正在占用该端口。在 Ubuntu Linux 上，我执行了以下命令：

`ps -ef | grep idea`

注意到有一个Java进程在运行该类`org.jetbrains.idea.maven.server.RemoteMavenServer`

我记下了 pid`2772`并执行了

`netstat -anp | grep 2772`

我注意到 pid`2772`正在侦听端口 6942

我远程登录到那个端口：

```
telnet localhost 6942
Trying 127.0.0.1...  
Connected to localhost.
Escape character is '^]'.
/home/noahlz/.IdeaIC11/config/ home/noahlz/.IdeaIC11/system 
```

因此，IntelliJ 使用的 Maven 组件作为不同的服务器进程运行，IntelliJ 通过套接字与该服务器进程通信。您需要确定 IntelliJ 无法访问您机器上的服务器端口的原因，即其他进程正在占用该端口和/或未将响应发送回 IntelliJ

请注意，您机器上的端口号可能不同。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-12-24T09:45:08.437

我遇到了同样的问题。抱歉，以上建议都不适合我。事实上，当我从 IntelliJ 启动 gradle 项目时，我在事件日志中收到“**连接被拒绝：连接”错误。**我尝试了各种选项，例如设置 -Djava.net.preferIPv4Addresses=true、Windows 热修复、安装 ISA 客户端、重新启动机器、切换 java 语言级别、禁用防火墙。没有任何帮助。

最后在 IntelliJ Idea 中提供代理信息对我有用。

![在此处输入图像描述](../Images/184dfea8d4d9aa719dfd8b30342c02f5.png)

为 IntelliJ 代理设置提供与 Internet 属性中相同的代理信息。 ![在此处输入图像描述](../Images/a2c145fd23603f7a75e39a2065a6416d.png)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-06-06T19:58:18.513

查找可能阻止 RemoteMavenServer 正确响应 Intellij 调用的任何（最近安装的）应用程序。就我而言，它原来是一个在线问责软件：`x3watch`. 卸载它后，Intellij 开始正常工作。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-12-17T20:50:03.760

在我的情况下，下面的行是在 ~/.profile 中设置的

export _JAVA_OPTIONS="-Djava.net.preferIPv6Addresses=true

我刚刚删除了线路并重新启动。之后工作正常

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-08-29T07:08:09.197

有同样的问题，但是以下答案解决了我的问题： [Maven project won't compile after upgrade to Intellij 13.1 from 12](https://stackoverflow.com/questions/22543064/maven-project-wont-compile-after-upgrade-to-intellij-13-1-from-12)

在我更新到 IntelliJ 13.1.4 之后，问题本身就发生了，该补丁之前的所有工作都正常/按预期进行。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-11-20T08:25:25.563

我有类似的问题

MAC OS X

我做了什么：

*   停用防火墙
*   在 intellij 中设置代理（就像在这个线程中解释的那样）
*   设置 ipstack 标志

没有解决问题...

有什么帮助

*   从 Java 1.6 而不是 Java 1.8 开始 intellij（在 /Applications/IntelliJ\ IDEA\ 14.app/Contents/Info.plist 中定义）

奇怪的

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-07-13T12:24:28.733

我在 Linux Mint 上遇到了同样的问题。尝试了一切，但没有任何帮助。原来我的 etc/hosts 文件已损坏并且恢复它有效。另一个解决方案在这里：[https ://www.digitalocean.com/community/questions/how-to-restore-etc-hosts-on-ubuntu-14-04](https://www.digitalocean.com/community/questions/how-to-restore-etc-hosts-on-ubuntu-14-04)

# php - MySQL问题使用php连接到站点

> ID：12701358
> 
> 赞同：0
> 
> 时间：2012-10-03T03:05:45.350
> 
> 标签：php, mysql, localhost, mamp

每次我尝试连接到我的本地主机（使用 MAMP）时，它都会告诉我访问被拒绝或无法连接！！！它快把我逼疯了！我有下面的 php 示例。我错过了什么，因为显然网络上没有人遇到同样的问题......

```
//setup db connection

$link = mysqli_connect("localhost","root","");
mysqli_select_db($link, "iReport") 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-03T03:23:41.477

尝试...

```
//Database Information

$dbhost = "serverip";
$dbname = "databasename";
$dbuser = "username";
$dbpass = "password";

//Connect to database

mysql_connect ( $dbhost, $dbuser, $dbpass)or die("Could not connect: ".mysql_error());
mysql_select_db($dbname) or die(mysql_error()); 
```

# c# - 这个单元测试将如何转化为利用模拟框架？

> ID：12701359
> 
> 赞同：0
> 
> 时间：2012-10-03T03:05:49.817
> 
> 标签：c#, mocking, tdd, moq, rhino-mocks

我正在尝试以 TDD 方式进行单元测试，因此我创建了一组我认为可以独立测试的接口。我不确定我是否成功，但我现在很确定是时候使用模拟框架了。我从示例中学习得最好，我认为非常精通的人可能能够快速将其翻译成其中之一（也许是 Moq 或 Rhino Mocks？那些是我找到的）。

单元测试：

```
 [TestMethod]
    public void RendererRendersEachWidgetByCallingBeginRenderThenEndRender()
    {
        // Mocks/Stubs
        ISpace space = new MockSpace();
        IWorld world = new MockWorld();
        IWidget widget1 = new MockWidget("widget1");
        IWidget widget2 = new MockWidget("widget2");
        world.Add(widget1);
        world.Add(widget2);

        // Object under test
        IRenderer target = new Renderer(world, space);
        target.Render();

        // verify BeginRender is called
        Assert.IsTrue((space as MockSpace).results.Contains("Begin Render " + widget1.Id));
        Assert.IsTrue((space as MockSpace).results.Contains("Begin Render " + widget2.Id));

        // verify EndRender is called
        Assert.IsTrue((space as MockSpace).results.Contains("End Render " + widget1.Id));
        Assert.IsTrue((space as MockSpace).results.Contains("End Render " + widget2.Id));

        // verify BeginRender is called before EndRender
        var orderedResults = (space as MockSpace).results.Select((s, i) => Tuple.Create(i, s));
        Assert.IsTrue(
            (orderedResults.Single(x => x.Item2 == "Begin Render " + widget1.Id).Item1) <
            (orderedResults.Single(x => x.Item2 == "End Render " + widget1.Id).Item1));
        Assert.IsTrue(
            (orderedResults.Single(x => x.Item2 == "Begin Render " + widget2.Id).Item1) <
            (orderedResults.Single(x => x.Item2 == "End Render " + widget2.Id).Item1));
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T03:45:07.473

这是一个 Rhino.Mocks 版本。我在`Renderer`未知的内部情况下采取了自由。

如您所见，其中涉及大量设置，但在这种情况下，您不必手动创建所有这些模拟对象类型。

```
[TestMethod]
public void RendererRendersEachWidgetByCallingBeginRenderThenEndRender()
{
    // Mocks/Stubs
      var orderedResultList = new List<string>();

    var space = MockRepository.GenerateStub<ISpace>();
      space.Stub(s => s.BeginRender(Arg<IWidget>.Is.Anything))
            .WhenCalled(x => orderedResultList.Add("Begin Render " + ((IWidget)x.Arguments[0]).Id));
      space.Stub(s => s.EndRender(Arg<IWidget>.Is.Anything))
            .WhenCalled(x => orderedResultList.Add("End Render " + ((IWidget)x.Arguments[0]).Id));

    var world = MockRepository.GenerateStub<IWorld>();

    var widget1 = MockRepository.GenerateStub<IWidget>();
      widget1.Stub(w => w.Id).Return("widget1"); // assuming no public setter for this property

    var widget2 = MockRepository.GenerateStub<IWidget>();
      widget2.Stub(w => w.Id).Return("widget2"); // assuming no public setter for this property

    var widgetList = new List<IWidget>{ widget1, widget2 };
      world.Stub(w => w.Widgets).Return(widgetList);

    // Object under test
    IRenderer target = new Renderer(world, space);
    target.Render();

    // verify BeginRender is called
      space.AssertWasCalled(s => s.BeginRender(Arg<IWidget>.Is.Same(widget1)));
      space.AssertWasCalled(s => s.BeginRender(Arg<IWidget>.Is.Same(widget2)));

    // verify EndRender is called
      space.AssertWasCalled(s => s.EndRender(Arg<IWidget>.Is.Same(widget1)));
      space.AssertWasCalled(s => s.EndRender(Arg<IWidget>.Is.Same(widget2)));

    // verify BeginRender is called before EndRender
    var orderedResults = orderedResultList.Select((s, i) => Tuple.Create(i, s));
    Assert.IsTrue(
        (orderedResults.Single(x => x.Item2 == "Begin Render " + widget1.Id).Item1) <
        (orderedResults.Single(x => x.Item2 == "End Render " + widget1.Id).Item1));
    Assert.IsTrue(
        (orderedResults.Single(x => x.Item2 == "Begin Render " + widget2.Id).Item1) <
        (orderedResults.Single(x => x.Item2 == "End Render " + widget2.Id).Item1));
} 
```

# prototypejs - 在文件中使用 NoConflict 和原型后，剩下一个 jQuery 冲突

> ID：12701362
> 
> 赞同：1
> 
> 时间：2012-10-03T03:06:32.077
> 
> 标签：prototypejs, opencart, jquery

我正在构建一个新的 OpenCart 网站时遇到问题...

我把一个Html主题和一个opencart主题拼接起来…… Html主题使用prototype作为库，OpenCart使用jQuery库。所以我进去使用： `jQuery.noConflict();` 在我所有使用 jQuery 库的 OpenCart 文件中（都是 OpenCart JS）

它修复了我网站上的所有内容，除了以下内容： `http://beta.justicejewelers.com/index.php?route=product/category&path=79` - 如果您在此屏幕上单击“添加到购物车”，那很好......但是，如果您在示例产品 1 上单击“添加到购物车”，例如，它将带您到选择尺寸的产品页面....点击添加到购物车，没有任何反应....也发生在没有选项的产品上....

有任何想法吗？

这也是我在标题中调用的内容：

```
<!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if necessary -->
<script type="text/javascript" src="js/prototype.js"></script>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script>window.jQuery || document.write(unescape('%3Cscript src="catalog/view/theme/sellegance/js/jquery-1.7.1.min.js"%3E%3C/script%3E'))</script>

<script src="catalog/view/theme/sellegance/js/modernizr.full.min.js"></script>

<script type="text/javascript" src="catalog/view/javascript/jquery/ui/jquery-ui-1.8.16.custom.min.js"></script>

<link rel="stylesheet" type="text/css" href="catalog/view/javascript/jquery/ui/themes/ui-lightness/jquery-ui-1.8.16.custom.css" />

<script type="text/javascript" src="catalog/view/javascript/jquery/colorbox/jquery.colorbox.js"></script>

<script type="text/javascript" src="catalog/view/theme/sellegance/js/jquery.elastislide.js"></script>

<script type="text/javascript" src="catalog/view/theme/sellegance/js/jquery.cycle.js"></script>

<!-- NEW SCRIPTS -->

<script type="text/javascript" src="js/common.js"></script>
<script type="text/javascript" src="js/banner_pack.js"></script>
<script type="text/javascript" src="js/jquery.jcarousel.min.js"></script>
<script type="text/javascript" src="js/jquery.mix.js"></script>
<script type="text/javascript" src="js/menu.js"></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:53:54.590

TypeError：无法调用 null [http://beta.justicejewelers.com/index.php?route=product/product&product_id=50:1111] 的方法“之后”

在第 1111 行：

```
$('#option-' + i).after('<span class="error">' + json['error']['option'][i] + '</span>'); 
```

替换`$`为`jQuery`.

PS`jQuery.noConflict()`包含 jquery 后，您应该只调用一次。

PPS 在任何 JS 文件之前包含您的 CSS 文件 - 这将加速页面加载。

# java - 如何使用 Java 在 KML 中标记多个坐标？

> ID：12701364
> 
> 赞同：3
> 
> 时间：2012-10-03T03:06:43.013
> 
> 标签：java, kml, google-earth, jak

我正在开发一个涉及使用 Java 创建 KML 的项目。目前，我正在使用[Micromata Labs JAK Example](http://labs.micromata.de/display/jak/HelloKML+(Quickstart))的 KML 示例中的示例 Java 代码。我试图通过添加多个坐标并获取两个标记来“扩展”代码，但我无法让它工作。你能告诉我如何添加多个坐标并在它们上面放置标记，并且在标记之间画一条线。谢谢您的帮助！

PS：我需要通过程序来做到这一点。我看到了它们使用 DOM 和 XML 的示例代码，但不是纯 Java/JAK。请指导我。

我得到了这个（更新）：

```
kml.createAndSetDocument().withName("MyMarkers")
.createAndAddPlacemark().withName("London, UK").withOpen(Boolean.TRUE)  
.createAndSetPoint().addToCoordinates(-0.126236, 51.500152);    

kml.createAndSetDocument().withName("MyMarkers")  
.createAndAddPlacemark().withName("Somewhere near London,UK").withOpen(Boolean.TRUE)
.createAndSetPoint().addToCoordinates(-0.129800,52.70‌​0152); 
```

但我知道我在某个地方出错了。请指出我正确的方向。

这是生成的 KML 输出：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<kml xmlns="http://www.opengis.net/kml/2.2" xmlns:gx="http://www.google.com/kml/ext/2.2" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:xal="urn:oasis:names:tc:ciq:xsdschema:xAL:2.0">
<Document>
    <name>MyMarkers</name>
    <Placemark>
        <name>Somewhere near London, UK</name>
        <open>1</open>
        <Point>
            <coordinates>-0.1298,52.700152</coordinates>
        </Point>
    </Placemark>
</Document>
</kml> 
```

我似乎无法再次访问文档来添加更多地标。我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T16:59:22.353

基本上，您需要执行以下操作：

```
Document document = kml.createAndSetDocument().withName("MyMarkers");

document.createAndAddPlacemark().withName("London, UK").withOpen(Boolean.TRUE)  
    .createAndSetPoint().addToCoordinates(-0.126236, 51.500152);    

document.createAndAddPlacemark().withName("Somewhere near London,UK").withOpen(Boolean.TRUE)
    .createAndSetPoint().addToCoordinates(-0.129800,52.70‌​0152); 
```

以前，您正在创建一个新文档并将其设置（作为唯一的文档！）在 kml 对象中。因此，只显示了最后一个条目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T03:36:14.227

要在 KML 文件中放置多个地标，您需要一个文件夹或一个文档

[一个基本`<kml>`元素包含 0 或 1 个特征](https://developers.google.com/kml/documentation/kmlreference#kml)

[Feature](https://developers.google.com/kml/documentation/kmlreference#feature)是一个抽象元素，可以是[Placemark](https://developers.google.com/kml/documentation/kmlreference#placemark)。

[容器](https://developers.google.com/kml/documentation/kmlreference#container)扩展功能，可以是[文档](https://developers.google.com/kml/documentation/kmlreference#document)或[文件夹](https://developers.google.com/kml/documentation/kmlreference#folder)

长话短说，如果您想要多个地标，您需要将它们包含在文档或文件夹中

```
<kml>
  <Document>
    <Placemark>
    </Placemark>
    ...
    <Placemark>
    </Placemark>
  </Document>
</kml> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-14T13:10:27.147

文档非常糟糕。

```
 final Kml kml = new Kml();
        Document document = kml.createAndSetDocument();
        listForms = formDAO.getAll();
        for (Form list : listForms){
            document.createAndAddPlacemark()
            .withName(String.valueOf(list.getId()))
            .withDescription(list.toStringKML())
            .createAndSetPoint().addToCoordinates(-20.3978398, -43.5146653);
        }
        kml.setFeature(document);
        kml.marshal(new File("test.kml")); 
```

# javascript - 在 JavaScript 中存储执行状态？以后可以继续吗？

> ID：12701366
> 
> 赞同：0
> 
> 时间：2012-10-03T03:07:19.500
> 
> 标签：javascript, html, execution, checkpoint

有没有办法做到这一点？我想创建一个可以从最后一个检查点“恢复”应用程序的 JavaScript 应用程序，例如

```
//code.js
var abc = 13;
checkpoint("myLocalStorage");
alert(abc); 
```

检查点函数将存储有关执行的所有信息，以便将来可以在它离开的地方恢复执行，如下所示：

```
//resume.js
resume("myLocalStorage"); 
```

这对于执行带有巨大循环的长脚本/脚本非常有帮助——我不是在谈论执行一些预加载图像或做一些有趣动画的小脚本。我说的是使用 JavaScript 作为实数运算工具，其中执行可能需要很长时间并且需要巨大的计算能力。在这些上下文中，您可以看到执行检查点有多么有用！

我想 JavaScript 尚不存在这样的东西，但如果有人接近类似它的东西，我仍然会非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T04:47:47.977

为了在 Javascript 中制作“可挂起”的东西，您需要用与普通程序中的方式稍有不同的方式来制定事物。

**第 1 步决定你***一次*
能做多少题，因为没有更好的词。

 ***步骤 2**
将状态存储在某种对象中。您没有中间值，只是进行下一次*传递所需的值*

**步骤 3**
编写代码，使其可以与`window.setTimeout()`函数一起运行。这使得测试比重新加载页面容易得多。

在这种情况下，我有一个程序将我的全名转换为小写，一次一步。我需要保存的唯一数据是我的姓名，以及我所在位置的索引。

**示例 1：用途`setTimeout()`**

```
<html>
  <head>
    <title>Test Thingy</title>
  </head>
  <body>
  <script>
    var data = {
      name: ["Jeremy", "J", "Starcher"],
      idx: 0
    }

    function doPass() {
      // If at the end of the list
      if (data.idx >= data.name.length) {
        alert("All iterations done:" + data.name.join(" "));
        return;
      }

      // Do our calculation here
      var s = data.name[data.idx];
      s = s.toLowerCase();
      data.name[data.idx] = s;
      data.idx++;
      window.setTimeout(doPass);
    }
    doPass();
  </script>

  </body>
</html> 
```

**示例 2：使用 localStorage。点击“重新加载”4次进行测试**

```
<html>
  <head>
    <title>Test Thingy</title>
  </head>
  <body>
  <script>      
    var data;
    data = localStorage.getItem("data");    
    if (data) {
      data = JSON.parse(data);
    } else {
      data = {
        name: ["Jeremy", "J", "Starcher"],
        idx: 0
      }
    }

    function doPass() {
      // If at the end of the list
      if (data.idx >= data.name.length) {
        alert("All iterations done:" + data.name.join(" "));
        return;
      }

      // Do our calculation here
      var s = data.name[data.idx];
      alert(s);
      s = s.toLowerCase();
      data.name[data.idx] = s;
      data.idx++;
      localStorage.setItem("data", JSON.stringify(data));
    }

    doPass();
  </script>

  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T03:12:31.790

Javascript 不是为“[storage on] 实数运算工具而设计的，其中执行可能需要很长时间并且需要巨大的计算能力”。这是您将获得的最好的：http: [//www.w3schools.com/html/html5_webstorage.asp](http://www.w3schools.com/html/html5_webstorage.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T03:12:39.163

最新的浏览器支持`yield`. 我们可以调查一下。

[https://developer.mozilla.org/en-US/docs/JavaScript/New_in_JavaScript/1.7](https://developer.mozilla.org/en-US/docs/JavaScript/New_in_JavaScript/1.7)*

# functional-programming - 在构建神经网络方面，函数式语言是否优于命令式？

> ID：12701370
> 
> 赞同：0
> 
> 时间：2012-10-03T03:07:42.370
> 
> 标签：functional-programming, neural-network

神经网络通常具有海量数据和使用并行计算的必要性。它是否使函数式语言更适合构建神经网络？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T07:51:10.430

并不真地。如果您坚持不变性（或更准确地说是避免任何类型的不受控制的副作用），函数式语言通常会使并行化变得微不足道。如果你不这样做，那么在非函数式语言中使事情并行并不容易。在这种情况下，您有两种选择：

*   使用副作用，但以本地化的方式，因此并行线程之间没有业务：例如，您评估了很多 NN-s，它们中的每一个都可以发生在它自己的线程上（使用线程池的线程数不多于CPU 内核的数量是个好主意）。

*   对于非本地化的副作用，您需要依靠同步或其他一些方法来控制它。一个这样的例子是 actor 的计算模型（在函数式语言用户中非常流行，但也适用于 java，请参阅[http://akka.io/](http://akka.io/)），它通常让您在您的 actor 中产生副作用，但是演员有其严格的规定。这将使您从低级线程处理业务中解放出来。

您应该考虑的另一件事是，拥有一个中等性能的 NN 实现并不太难，拥有一个纯功能性的实现也不是很复杂，但同时做这两者可能是一项具有挑战性的任务。所以 - 除非你有函数式语言的经验 - 我认为用非函数式语言编写并行化 NN 更容易，或者至少以非纯方式编写。

# php - 这两种形式的 Ajax 调用有什么区别

> ID：12701376
> 
> 赞同：1
> 
> 时间：2012-10-03T03:09:06.037
> 
> 标签：php, jquery, ajax

此代码来自 tiztag 教程

```
function ajaxFunction(){
var ajaxRequest;  // The variable that makes Ajax possible!

try{
    // Opera 8.0+, Firefox, Safari
    ajaxRequest = new XMLHttpRequest();
} catch (e){
    // Internet Explorer Browsers
    try{
        ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
    } catch (e) {
        try{
            ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
        } catch (e){
            // Something went wrong
            alert("Your browser broke!");
            return false;
        }
    }
}
// Create a function that will receive data sent from the server
ajaxRequest.onreadystatechange = function(){
    if(ajaxRequest.readyState == 4){
        document.myForm.time.value = ajaxRequest.responseText;
    }
}
ajaxRequest.open("GET", "serverTime.php", true);
ajaxRequest.send(null); 
} 
```

这是我在整个 jQuery 网站上找到的另一个：

```
$.ajax({
  type:"GET" // or "POST"
  url: url,
  data: data,
  success: success,
  dataType: dataType,
  error: //function
}); 
```

我一直在尝试使用这两种方法从 PHP 文件中获取某种响应。第一个例子有效，但我也想让第二种形式工作......有人能给我一些指导吗？在我的 php 中，我只有：

```
<?php
echo("Response from PHP");
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T03:13:03.313

两者的区别几乎没有。jQuery 只是阻止您执行围绕跨浏览器兼容性的额外样板代码。

[jQuery](http://api.jquery.com/jQuery.ajax/)文档应该为您提供所需的所有信息。

您将需要一个`url`变量和一个`success`变量。

该`url`变量将是您尝试发送此信息的 URL 的字符串。

该`success`变量将是一个“回调”函数，它将执行您尝试执行的任何操作。只有当您的呼叫成功时才会调用它。

始终检查您的 Javascript 控制台以查看您的错误是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T03:32:57.287

尝试这个

```
$.ajax({
 type:'GET' // or "POST"
 url: 'http://www.yoursite.com/yourPhpFile.php',
 data: 'some text',//Can  be multiple data using object
 success: function(data){
   alert(data);
 },
 error: function(){
   //Do something if an error is occurred
 }
}); 
```

# c# - 表单设计器找不到类型

> ID：12701378
> 
> 赞同：0
> 
> 时间：2012-10-03T03:09:48.540
> 
> 标签：c#, visual-studio-2010, visual-studio, .net-4.0

在 Windows 窗体中，我正在使用以下代码填充组合框。

```
this.JackStudTypeComboBox.Items.AddRange(ViewController.GetJackStudMaterialType().ToArray()); 
```

当我尝试打开表单设计器时，我收到未找到 ViewController 类型的消息。

ViewController 类与表单位于同一项目中。编译项目没有问题，运行项目会产生预期的行为。

那么，如何说服表单设计器找到这个特定的类，或者忽略它在静态设计模式下无法找到它或对它做任何有用的事情的事实？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T03:11:59.773

不要那样做。

您永远不应该将任何自定义逻辑放入`InitializeComponent()`.

将其移至构造函数，一切都会正常工作。

# c - C中十六进制字符的格式说明符

> ID：12701379
> 
> 赞同：3
> 
> 时间：2012-10-03T03:10:00.700
> 
> 标签：c, hex, format-specifiers

`sprintf`在 C 中是否有一个格式说明符将 a 映射`char`到十六进制，其方式与`%x`将 an 映射`int`到十六进制的方式相同？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-03T03:24:50.090

是和不是。

由于`sprintf`采用可变参数列表，因此所有参数在`sprintf`接收它们之前都会经过默认提升。这意味着`sprintf`将*永远不会*收到`char`- a将始终在收到它之前`char`被提升为（以及遗嘱）。`int``sprintf``short`

是的，由于`sprintf`接收的是`int`，您可以使用`%x`它来将其转换为十六进制格式，并且无论该值以 、 还是 开头，它的工作方式`char`都`short`相同`int`。如果（通常情况下）您想为每个输入打印 2 个字符，您可以使用`%2.2x`.

但要注意一点：如果您`char`已签名，并且您从负值开始，则提升`int`将产生相同的数值，这通常*不会*与原始字符的位模式相同，因此（例如）一个字符如果是 16 位，如果 int 是 32 位，或者if是 64 位（假设有符号整数的典型 2 的补码表示），该值`-1`通常会打印出来。`ffff``int``ffffffff``ffffffffffffffff``int`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-03T03:13:55.430

那是一样的`%x`。所有`char`值`int`在传递给`sprintf`（或任何其他接受可变数量参数的函数）之前都会转换为。

```
printf("%x\n", 'a'); 
```

印刷`61`

# php - RE PHP 1000 的 PHP 正则表达式

> ID：12701382
> 
> 赞同：1
> 
> 时间：2012-10-03T03:11:09.410
> 
> 标签：php, regex

我想做下面的场景：

```
RE PHP 100 = True
RE PHP 10001 asdadads = True
RE PHP 100sdsd01 asdadads = False
XRE PHP 1001 = FALSE
RE xPHP 1001 = FALSE
(RE) (PHP) (INTEGER) (EOF OR Some string) 
```

我正在尝试使用这个正则表达式：

```
if(preg_match("/^RE[ ]PHP[ ]([\d])?$/", "RE PHP 1",$matches)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T03:14:18.553

您不需要在空格或`\d`. 您确实需要`+`在`\d`.

```
/^RE PHP \d+( \w+)?$/ 
```

# image-processing - matlab image：沿图像中的边界框返回像素值？

> ID：12701385
> 
> 赞同：4
> 
> 时间：2012-10-03T03:11:49.440
> 
> 标签：image-processing, pixel, matlab

所以，我有一个 RGB 图像，我在图像的一个区域周围放置了一个矩形（边界框）。但是，我无法获得沿该矩形周边的像素值。

我试过研究这个功能`regionprops`，但没有发现任何有用的东西。

我以为我可以通过知道边界框（ , , , ）`(x,y)`沿线的点列表来获得像素值，但是没有特定的功能。任何人都可以帮忙吗？`x_init``y_init``x_width``y_width`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T04:28:31.727

我不知道图像处理工具箱中是否有针对此的特定功能，但是您描述的功能很简单，可以自己实现：

```
function pixel_vals = boundingboxPixels(img, x_init, y_init, x_width, y_width)

    if x_init > size(img,2) 
        error('x_init lies outside the bounds of the image.'); end
    if y_init > size(img,1)
        error('y_init lies outside the bounds of the image.'); end

    if y_init+y_width > size(img,1) || x_init+x_width > size(img,2) || ...
       x_init < 1 || y_init < 1
        warning([...
            'Given rectangle partially falls outside image. ',... 
            'Resizing rectangle...']);
    end

    x_min   = max(1, uint16(x_init));
    y_min   = max(1, uint16(y_init));
    x_max   = min(size(img,2), x_min+uint16(x_width));
    y_max   = min(size(img,1), y_min+uint16(y_width));
    x_range = x_min : x_max;
    y_range = y_min : y_max;

    Upper = img( x_range, y_min  , :);
    Left  = img(   x_min, y_range, :);
    Right = img(   x_max, y_range, :);
    Lower = img( x_range, y_max  , :);

    pixel_vals = [...
       Upper
       permute(Left, [2 1 3]) 
       permute(Right, [2 1 3])
       Lower];

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-31T13:28:46.377

对于任何其他参考这个问题，我有同样的问题并使用了罗迪奥尔登胡斯方法，但它在我的情况下效果不佳。

您可以为此使用 matlab 内置函数：

```
 imgRect=getrect;//get a rectangle region in image
  cropedImg=imcrop(orgImg,[xtopleft ytopleft width height]);//in croppedImg you have the value of specified region 
```

# cocoa-touch - 即使使用对它的间接 __block 引用，我似乎也将 self 保留在一个块中，这可能是将该块复制到堆的原因？

> ID：12701387
> 
> 赞同：1
> 
> 时间：2012-10-03T03:11:59.600
> 
> 标签：cocoa-touch, cocoa, objective-c-blocks

**[编辑：由于它引起了混乱，整个案例假设 MRR 而不是 ARC]**

我有一个奇怪的行为（显然有一个解释，我只是想不通）一个块引用自我（间接）并被复制到另一个对象的属性（即，从对象 As' 堆栈复制到堆并由对象 B) 保留。如果该块不包含对 _this 的引用，则每次从导航控制器弹出对象 A 的 dealloc 时都会调用它，这是应该的。但是，如果块引用 _this，则对象的（下面代码中的 MyObjectA）dealloc 只会每隔一次调用一次。也就是说，我推送这个视图控制器子类，调用 createBlock，然后弹出并没有任何反应。我再次推送，再次调用 createBlock，然后弹出，然后它确实在 MyObjectA 上调用 dealloc。

为简洁起见，我只发布我认为是行为关键的片段。

假设我有一个对象 MyObjectA（自定义 UIViewController 的子类），其中包括一个方法 createBlock，如下所示：

```
- (void)createBlock
{
  __block MyObjectA* _this = self;
  int(^animationBlock)(NSArray*,NSDictionary*);

  animationBlock =
  ^(NSArray* layers, NSDictionary* parameters)
  {
    [CATransaction begin];
    [CATransaction setCompletionBlock:
     ^{
       for(CALayer* layer in layers)
         layer.opacity = 1;
     }];

    CABasicAnimation* a2 = [CABasicAnimation animationWithKeyPath:@"opacity"];
    a2.fromValue = [NSNumber numberWithFloat:0.];
    a2.toValue = [NSNumber numberWithFloat:1.];
    a2.duration = .4;
    a2.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    a2.fillMode = kCAFillModeBoth;
    a2.removedOnCompletion = NO;

    CABasicAnimation* a = [CABasicAnimation animationWithKeyPath:@"position.x"];
    a.duration = .4;
    a.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    a.fillMode = kCAFillModeBoth;
    a.removedOnCompletion = NO;

    CAAnimationGroup* g = [CAAnimationGroup animation];
    g.animations = [NSArray arrayWithObjects:a,a2, nil];
    g.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    g.fillMode = kCAFillModeBoth;
    g.removedOnCompletion = NO;

    CALayer* numberLayer;
    CALayer* flechaLayer;
    CGFloat timeOffset = 0;
    for(int i = 0; i < [layers count]; i+=2)
    {
      numberLayer = [layers objectAtIndex:i];
      flechaLayer = [layers objectAtIndex:i+1];

      a2.beginTime = [_this.view.layer convertTime:CACurrentMediaTime() fromLayer:nil] + timeOffset;
      [numberLayer addAnimation:a2 forKey:nil];

      a2.beginTime = 0;
      a.fromValue = [NSNumber numberWithFloat:flechaLayer.frame.origin.x + 100];
      a.toValue = [NSNumber numberWithFloat:flechaLayer.frame.origin.x + flechaLayer.frame.size.width / 2.];
      g.duration = 3;
      g.beginTime = [_this.view.layer convertTime:CACurrentMediaTime() fromLayer:nil] + timeOffset + .4;
      [flechaLayer addAnimation:g forKey:nil];

      timeOffset += 1.5;
    }

    [CATransaction commit];

    return 0;
  };

  [[AnimationFactory sharedFactory] registerAnimationBlock:animationBlock forKey:@"EnsureFlechasNutricion"];
} 
```

如您所见，动画块中有对 _this 的引用。然后，注册块的 AnimationFactory（单例）方法是：

```
- (void)registerAnimationBlock:(int(^)(NSArray*, NSDictionary*))animationBlock forKey:(NSString*)key
{
  int(^heapBlock)(NSArray*, NSDictionary*) = [animationBlock copy];
  [self.animationBlocks setObject:heapBlock forKey:key];
  [heapBlock release];
} 
```

我的猜测是将块复制到堆中保留 MyObjectA，或者可能将块添加到 AnimationFactory 中的 NSMutableDictionary.. 但我不确定。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T04:43:03.620

好的，我想通了：当我将新复制的（堆）块添加到 AnimationFactory 的字典中时，即使在最初在 self.

解决方案是获取一个对 self.view 的弱引用（又名 __block Class* identifier = eval，因为我不在 ARC 上），这就是我开始引用 self 而不是 self 的原因。这样，尽管这个视图的引用计数增加，self 的引用计数保持正确。然后，在弹出时，self 不会被 AnimationFactory 的字典保留，而是会调用 dealloc。

我应该提到 self 的 dealloc 包括对另一个方法的调用，该方法反过来从 AnimationFactory 中删除所有已注册的块，从而使 self.view 的保留计数过于隐式地恢复正常，因此不会泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T03:24:54.300

*[更新：这个答案在使用 ARC 时适用，并且从评论中发现正在使用 MRC，所以它不是答案！]*

该`__block`属性用于当您需要一个可以由块更新的变量时，即变量*通过引用*而不是默认情况下*的值传递给块。*您的代码中似乎不需要这，您不会更新`_this`块内的值。

要打破强引用循环，请使用该`__weak`属性。您的 current`_this`是对引用的同一对象的强`self`引用，因此您的块以强引用结束。

# c# - Facebook登录正在永远重新加载页面

> ID：12701390
> 
> 赞同：2
> 
> 时间：2012-10-03T03:12:42.413
> 
> 标签：c#, javascript, facebook, asp.net-mvc-3, razor

这是我网页上的脚本：

```
<div id="fb-root"></div>
<script>
    window.fbAsyncInit = function () {
        FB.init({
            appId: '419349611446911', // App ID
            status: true, // check login status
            cookie: true, // enable cookies to allow the server to access the session
            xfbml: true  // parse XFBML
        });

        // Additional initialization code here
        FB.Event.subscribe('auth.authResponseChange', function (response) {
            if (response.status === 'connected') {
                // the user is logged in and has authenticated your
                // app, and response.authResponse supplies
                // the user's ID, a valid access token, a signed
                // request, and the time the access token 
                // and signed request each expire
                var uid = response.authResponse.userID;
                var accessToken = response.authResponse.accessToken;
                // TODO: Handle the access token
                // Do a post to the server to finish the logon
                // This is a form post since we don't want to use AJAX
                var form = document.createElement("form");
                form.setAttribute("method", 'post');
                form.setAttribute("action", '@Url.Action("FacebookLogin", "Account")');

                var field = document.createElement("input");
                field.setAttribute("type", "hidden");
                field.setAttribute("name", 'accessToken');
                field.setAttribute("value", accessToken);
                form.appendChild(field);

                document.body.appendChild(form);
                form.submit();

            } else if (response.status === 'not_authorized') {
                // the user is logged in to Facebook, 
                // but has not authenticated your app
            } else {
                // the user isn't logged in to Facebook.
            }
        });
    };

    // Load the SDK Asynchronously
    (function (d) {
        var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
        if (d.getElementById(id)) { return; }
        js = d.createElement('script'); js.id = id; js.async = true;
        js.src = "//connect.facebook.net/en_US/all.js";
        ref.parentNode.insertBefore(js, ref);
    } (document));
</script> 
```

这是我的`:LogOnPartial`：

```
@if(Request.IsAuthenticated) {
    <text>Hola, <strong>@User.Identity.Name</strong>!
    [ @Html.ActionLink("Log Off", "LogOff", "Account") ]</text>
}
else {
    <div class="fb-login-button" data-show-faces="false" data-width="200" data-max-rows="1"></div>
} 
```

当我更改为`auth.login`单击登录按钮时，不会登录甚至重定向到任何地方。只是加载的一小段闪光，没有别的。当我使用 时`auth.authReponseChange`，我可以使用 Facebook 正确登录，但页面会一遍又一遍地重新加载。

我要问的是，我该如何解决这个错误？为什么`auth.authResponseChange`每次都会触发事件？

例子：

我退出本地网站：

```
FormsAuthentication.SignOut(); 
```

即便如此，Facebook 按钮也会自动让我登录，然后循环继续。什么是触发登录按钮单击？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T03:56:31.303

请尝试将事件订阅从 FB.Event.subscribe('auth.authResponseChange' 更改为 "auth.login"。这只会在用户第一次登录时触发您的代码。

以下摘自[fb文档](https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)

**auth.login** 当您的应用第一次注意到用户时会触发此事件（换句话说，当它还没有有效的会话时会获得一个会话）。

**auth.logout** 当您的应用程序注意到不再有有效用户时会触发此事件（换句话说，它有一个会话但不能再验证当前用户）。

**auth.authResponseChange** 任何与身份验证相关的更改都会触发此事件，因为它们都会影响会话：登录、注销、会话刷新。只要用户在您的应用中处于活动状态，会话就会随着时间的推移而刷新。

**auth.statusChange** 通常你会想要使用 auth.authResponseChange 事件。但在极少数情况下，您需要区分这三种状态：

*   连接的
*   登录 Facebook 但未与您的
*   应用程序 根本没有登录 Facebook。

# c++ - 我可以捆绑两个 MPI 消息吗？

> ID：12701393
> 
> 赞同：1
> 
> 时间：2012-10-03T03:13:29.940
> 
> 标签：c++, c, cluster-computing, mpi, openmpi

我正在尝试进行无序的一对一通信。基本上我有多个相同大小的浮点数组，由整数 id 标识。

每条消息应如下所示：

```
<int id><float array data> 
```

在接收方，它确切地知道有多少个数组，因此设置了准确的 recv 数量。收到消息后，它会解析 id 并将数据放入正确的位置。问题是消息可以从任何其他进程发送到接收进程。（例如，生产者有一个工作队列结构，并处理队列中可用的任何 id。）

由于 MPI 只保证 P2P 的订单交付，我不能轻易地将整数 id 和 FP 数据放在两条消息中，否则接收方可能无法将 id 与数据匹配。MPI 也不允许一次发送两种类型的数据。

我只能想到两种方法。

1) Receiver 有一个大小为 m (source[m]) 的数组，m 是发送节点的数量。发送者首先发送 id，然后是数据。接收者收到来自发送者 i 的整数消息后，将 id 保存到 source[i]。从发送者 i 接收到 FP 数组后，它会检查 source[i]，获取 id，并将数据移动到正确的位置。它之所以有效，是因为 MPI 保证了有序的 P2P 通信。它要求接收者保存每个发送者的状态信息。更糟糕的是，如果单个发送进程可以在数据之前发送两个 id（例如多线程），则此机制将不起作用。

2）把id和FP当作字节，复制到发送缓冲区。将它们作为 MPI_CHAR 发送，接收器将它们转换回整数和 FP 数组。然后我需要支付将内容复制到发送方字节缓冲区的额外费用。随着 MPI 进程中线程数量的增加，总临时缓冲区也会增加。

它们都不是完美的解决方案。我不想在进程中锁定任何东西。我想知道你们中是否有人有更好的建议。

编辑：代码将在具有 infiniband 的共享集群上运行。机器将随机分配。所以我认为 TCP 套接字在这里不能帮助我。此外，IPoIB 看起来很昂贵。我确实需要完整的 40Gbps 通信速度，并让 CPU 进行计算。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T06:51:56.363

您可以`MPI_ANY_SOURCE`在接收函数中指定源排名，然后使用它们的标签对消息进行排序，这比创建自定义消息更容易。这是一个简化的示例：

```
#include <stdio.h>
#include "mpi.h"

int main() {
    MPI_Init(NULL,NULL);
    int rank=0;
    int size=1;
    MPI_Comm_rank(MPI_COMM_WORLD,&rank);
    MPI_Comm_size(MPI_COMM_WORLD,&size);

    // Receiver is the last node for simplicity in the arrays
    if (rank == size-1) {
        // Receiver has size-1 slots
        float data[size-1];
        MPI_Request request[size-1];

        // Use tags to sort receives
        for (int tag=0;tag<size-1;++tag){
            printf("Receiver for id %d\n",tag);
            // Non-blocking receive
            MPI_Irecv(data+tag,1,MPI_FLOAT,
                      MPI_ANY_SOURCE,tag,MPI_COMM_WORLD,&request[tag]);
        }

        // Wait for all requests to complete
        printf("Waiting...\n");
        MPI_Waitall(size-1,request,MPI_STATUSES_IGNORE);
        for (size_t i=0;i<size-1;++i){
            printf("%f\n",data[i]);
        }
    } else {
        // Producer
        int id = rank;
        float data = rank;
        printf("Sending {%d}{%f}\n",id,data);
        MPI_Send(&data,1,MPI_FLOAT,size-1,id,MPI_COMM_WORLD);
    }

    return MPI_Finalize();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T08:49:49.857

正如有人已经写过的那样，您可以使用`MPI_ANY_SOURCE`从任何来源接收。要在一次发送中发送两种不同类型的数据，您可以使用[派生数据类型](http://www.mpi-forum.org/docs/mpi-11-html/node54.html)：

```
#include <stdio.h>
#include <stdlib.h>
#include "mpi.h"

#define asize 10

typedef struct data_ {
  int   id;
  float array[asize];
} data;

int main() {

  MPI_Init(NULL,NULL);

  int rank = -1;
  int size = -1;
  MPI_Comm_rank(MPI_COMM_WORLD,&rank);
  MPI_Comm_size(MPI_COMM_WORLD,&size);

  data buffer;    
 // Define and commit a new datatype
  int          blocklength [2];
  MPI_Aint     displacement[2];
  MPI_Datatype datatypes   [2];
  MPI_Datatype mpi_tdata;

  MPI_Aint     startid,startarray;
  MPI_Get_address(&(buffer.id),&startid);
  MPI_Get_address(&(buffer.array[0]),&startarray);

  blocklength [0] = 1;
  blocklength [1] = asize;
  displacement[0] = 0;
  displacement[1] = startarray - startid;
  datatypes   [0] = MPI_INT;
  datatypes   [1] = MPI_FLOAT;

  MPI_Type_create_struct(2,blocklength,displacement,datatypes,&mpi_tdata);
  MPI_Type_commit(&mpi_tdata);

  if (rank == 0) {
    int        count = 0;
    MPI_Status status;

    while (count < size-1 ) {
      // Non-blocking receive
      printf("Receiving message %d\n",count);
      MPI_Recv(&buffer,1,mpi_tdata,MPI_ANY_SOURCE,0,MPI_COMM_WORLD,&status);
      printf("Message tag %d, first entry %g\n",buffer.id,buffer.array[0]);
      // Counting the received messages 
      count++;
    }

  } else {
    // Initialize buffer to be sent
    buffer.id = rank;
    for (int ii = 0; ii < size; ii++) {
      buffer.array[ii] = 10*rank + ii;
    }
    // Send buffer
    MPI_Send(&buffer,1,mpi_tdata,0,0,MPI_COMM_WORLD);
  }

  MPI_Type_free(&mpi_tdata);

  MPI_Finalize();
  return 0;
} 
```

# java - 将数组的内容添加到 JFrame，添加 JPanel，添加 JScroll

> ID：12701394
> 
> 赞同：2
> 
> 时间：2012-10-03T03:13:31.810
> 
> 标签：java, swing, jpanel

```
String[] option = {"Adlawan", "Angeles", "Arreza", "Benenoso", "Bermas",
                   "Brebante", "Cabaylo", "C. Cainglet", "O. Cainglet",
                   "Calunsag", "Cameros", "Casanaan", "Catulong", "Chicote",
                   "Dela Paz", "Ea", "Echavez"};

int choose = JOptionPane.showOptionDialog(null, "WHICH EMPLOYEE'S DATA WOULD YOU
             LIKE TO RESET?", "Click to Choose Type of Leave Credits",
             JOptionPane.DEFAULT_OPTION, JOptionPane.QUESTION_MESSAGE,
             null, option, option[16]); 
```

它运行完美，我唯一的问题是`JOptionPane`（带有要选择的名称）不适合屏幕，我如何将名称添加到框架或面板中并将 a`JScroll`放入其中以使其适合屏幕。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T03:52:16.063

您可以使用列表来显示选项，例如：

```
import javax.swing.JList;
import javax.swing.JOptionPane;
import javax.swing.JScrollPane;

public class TestOptions {
    public static void main(String[] args) {
        String[] options = { "Adlawan", "Angeles", "Arreza", "Benenoso",
                "Bermas", "Brebante", "Cabaylo", "C. Cainglet", "O. Cainglet",
                "Calunsag", "Cameros", "Casanaan", "Catulong", "Chicote",
                "Dela Paz", "Ea", "Echavez" };

        JList list = new JList(options);
        JScrollPane scrollPane = new JScrollPane(list);

        int result = JOptionPane.showConfirmDialog(null, scrollPane,
                "Select employee", JOptionPane.OK_CANCEL_OPTION);

        if (result == JOptionPane.OK_OPTION) {
            JOptionPane.showMessageDialog(null, list.getSelectedValue());
        }
    }
} 
```

# javascript - Openfire 安全（Firebug evil）

> ID：12701403
> 
> 赞同：0
> 
> 时间：2012-10-03T03:15:25.417
> 
> 标签：javascript, firebug, openfire

假设我开发了基于 Web 的聊天应用程序（连接由 strophe 维护）。如果我的一个用户连接到我的应用程序，打开一个萤火虫控制台并开始创建新连接并向其他用户广播消息怎么办。有没有处理这个问题的机制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T03:49:44.900

不，您无法使用客户端代码来防止这种情况。正如 SLaks 指出的那样，您需要尽可能在服务器端处理这些情况。

此外，甚至没有人需要 Firebug 来发送这些消息。只需启动数据包嗅探器即可获得足够的信息以直接使用您的 Web 服务。使用 Fiddler 等工具或用于查看网络请求的内置浏览器工具更容易。

# macos - cocoa - 导入 skype.framework 有错误

> ID：12701405
> 
> 赞同：0
> 
> 时间：2012-10-03T03:15:48.973
> 
> 标签：macos, cocoa, skype

将 skype.framework 导入到 mac 应用程序时遇到问题。这是错误

```
"_OBJC_CLASS_$_SkypeAPI", referenced from:
     objc-class-ref in AppDelegate.o
ld: symbol(s) not found for architecture x86_64 
```

虽然，我已经添加了 skype.framework。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:58:26.567

从 Skype 开发人员站点分发的 Skype.framework 不包括 64 位版本。下载最新版本的 Skype for Mac 客户端，打开该应用程序的包内容并从那里复制 Skype.framework (/Skype.app/Contents/Frameworks/Skype.framework) 并使用它来替换您的应用程序使用的那个。当前应用程序中的框架包括 64 位版本（尽管框架本身已多年未更新）。还要确保在 Xcode 的构建阶段将 Skype.framework 复制到应用程序的内部 Frameworks 目录（您可能需要添加新的构建阶段脚本）。

但请注意，对于 Mac 客户端的最后几个版本，SkypeAPI 存在一些问题。例如，“GET GROUP [id] USERS”调用不返回任何内容（甚至不返回错误），“GET SKYPEVERSION”不返回版本但确实返回错误。此外，Cocoa API 是异步的，很难用复杂的方法解析（例如，获取所有 GROUP ID，然后遍历它们以获取所有 GROUP 名称的列表）。在您收听对查询的响应时，可能会收到其他通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T03:18:15.983

确保将 Skype.framework 设置为您尝试构建的应用程序目标中的成员。

单击项目文件列表中的“Skype.framework”，然后查看文件检查器。这是另一个文件的样子：

![确保为您的 .m 文件选择了 Target Membership](../Images/77aadfbd6f649c902ca57a67c935f6af.png)

# c - execv() 命令挂在 C shell 中

> ID：12701406
> 
> 赞同：2
> 
> 时间：2012-10-03T03:16:18.920
> 
> 标签：c, shell, unix, fork, execv

我正在使用 C shell，当我运行`/bin/ls`它时，它会正确显示，但会挂起。我拥有的相关代码如下，我觉得它必须在父案例中缺少 wait() 语句？

```
for(p = j->first_process; p; p = p->next) {
        if (!strcmp(p->argv[0], "exit" )) exit(0);     

        switch (pid = fork()) {

           case -1: /* fork failure */
            perror("fork");
            exit(EXIT_FAILURE);

           case 0: /* child */

               /* establish a new process group, and put the child in
            * foreground if requested
            */
            if (j->pgid < 0) /* init sets -ve to a new process */
                j->pgid = getpid();
            p->pid = 0;

            if (!setpgid(0,j->pgid))
                if(fg) // If success and fg is set
                     tcsetpgrp(shell_terminal, j->pgid); // assign the terminal

            /* Set the handling for job control signals back to the default. */
            signal(SIGTTOU, SIG_DFL);

            /* execute the command through exec_ call */
            execv(p->argv[0], p->argv);
            exit(0);

           default: /* parent */
            /* establish child process group here to avoid race
            * conditions. */
            p->pid = pid;
            if (j->pgid <= 0)
                j->pgid = pid;
            setpgid(pid, j->pgid);
        }

        /* Reset file IOs if necessary */

        if(fg){
            /* Wait for the job to complete */
        }
        else {
            /* Background job */
        }
    }
} 
```

# python - python中randint的打印问题

> ID：12701408
> 
> 赞同：0
> 
> 时间：2012-10-03T03:16:31.817
> 
> 标签：python, random

所以我有以下代码：

```
from random import *  
def main():  
    die1 = randint(1,6)  
    die2 = randint(1,6)     
    dietotal = die1 + die2  
    print dietotal  
main() 
```

现在我期待一个随机整数，它是 die1 和 die2 的总和。然而，我得到的是一个语法错误，它在 print 语句中突出显示了dietotal。randint 所做的只是返回一个随机整数，所以我在这里应该没有问题。为什么我会收到此语法错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T03:21:14.940

可能您使用的是 Python 3，这是 Python 2 样式的打印语句。例如：

```
localhost-2:coding $ python3 dierand.py
  File "dierand.py", line 7
    print dietotal
                 ^
SyntaxError: invalid syntax 
```

但

```
localhost-2:coding $ python2.7 dierand.py
10 
```

在 Python 3 中，`print`是一个函数，而不是一个语句，所以你需要括号：

```
print(dietotal) 
```

# qt - QTableWidget::item() QTableWidget::cellWidget()？

> ID：12701413
> 
> 赞同：3
> 
> 时间：2012-10-03T03:17:05.997
> 
> 标签：qt, user-interface, widget, qtablewidget

有谁知道返回值之间的关系

```
QTableWidget::item(x, y) 
```

和

```
 QTableWidget::cellWidget (x, y) 
```

在同一个 QTableWidget 和同一个 row.column 中。？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T03:31:01.767

这一切都在返回值中。

`item()`返回`QTableWidgetItem*`与该行/列关联的。

`cellWidget()`与 更密切相关`setItemWidget(QWidget*)`，并返回调用`QWidget*`中给出的那个`setItemWidget`。

# sql - 如何在 sqlite3 中返回自定义错误代码？

> ID：12701415
> 
> 赞同：3
> 
> 时间：2012-10-03T03:17:23.127
> 
> 标签：sql, sqlite

我有一个这样的触发器语句：

```
CREATE TRIGGER update_customer_address UPDATE OF address ON customers 
  BEGIN
    UPDATE orders SET address = new.address WHERE customer_name = old.name;
    -- RAISE ...
  END;
END; 
```

**编辑：**

我想做一个步骤：

```
int result = sqlite3_step(statement); 
```

我知道`result`返回结果代码，如`SQLITE_DONE`,`SQLITE_ROW`和`SQLITE_CONSTRAINT`. 我还发现，`RAISE ABORT`在`TRIGGER`返回`SQLITE_CONSTRAINT`到`result`.

我有办法创建自定义错误代码吗？我想做类似的事情

```
int result = sqlite3_step(statement);
// get custom error code here 
```

是否可以在 sqlite 中使用自定义错误代码引发？或者有什么解决方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T06:41:24.427

您可以使用 RAISE() 函数引发错误。您必须使用预定义的错误代码（IGNORE、ABORT、FAIL 或 ROLLBACK）**，但**您可以添加自定义消息：

```
CREATE TRIGGER update_customer_address UPDATE OF address ON customers 
BEGIN
  UPDATE orders SET address = new.address WHERE customer_name = old.name;
  SELECT CASE
    WHEN ( (SELECT * from orders WHERE address = 'old address!!') IS NOT NULL)
    THEN RAISE (FAIL, 'Can still find old address, not everything was updated!')
  END;
END; 
```

请注意，RAISE() 仅在出现问题时使用，有关 raise() 行为的更多信息，请参阅[文档](http://www.sqlite.org/syntaxdiagrams.html#raise-function)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-05T10:44:35.837

是的，当然您可以定义自定义错误代码或消息。发送的所有消息

> 提高（错误，“消息”）

可以在 C/C++ 中[通过](https://sqlite.org/c3ref/errcode.html)

```
const char *sqlite3_errmsg(sqlite3*); 
```

# iphone - 在动画中间为 UIImageView 设置动画

> ID：12701419
> 
> 赞同：0
> 
> 时间：2012-10-03T03:18:07.983
> 
> 标签：iphone, animation, uiimageview, presentation-layer

我有一个在屏幕上从右向左移动的对象：

```
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:7.8];
[UIView setAnimationCurve:UIViewAnimationCurveLinear];
 myImageview.layer.position = CGPointMake(20,  myImageView.layer.position.y);
[UIView commitAnimations]; 
```

我发现即使动画仍在播放，XCode 已经将图像的位置标记为其最终目的地，为了检测移动图像上的触摸，我需要使用presentationLayer：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    [super touchesBegan:touches withEvent:event];

    UITouch *touch = [touches anyObject];
    CGPoint touchPoint = [touch locationInView:self.view];

    if ([myImageview.layer.presentationLayer hitTest:touchPoint]) {
        NSLog(@"it's a hit!");
    }
} 
```

这部分有效。现在，我希望图像在按下时向上移动。 **我希望图像在继续横向移动的同时向上移动。** 相反，这段代码不仅将图像向上移动，而且一直移动到左侧的最终目的地：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    [super touchesBegan:touches withEvent:event];

    UITouch *touch = [touches anyObject];   
    CGPoint touchPoint = [touch locationInView:self.view];

    if ([mouse.layer.presentationLayer hitTest:touchPoint]) {
        NSLog(@"it's a hit!");
        [UIView beginAnimations:nil context:nil];
        [UIView setAnimationDuration:0.5];
        [UIView setAnimationCurve:UIViewAnimationCurveLinear];
        myImageView.layer.position = CGPointMake( mouse.layer.position.x,  myImageView.layer.position.y - 40);
        [UIView commitAnimations];
    }
} 
```

我希望图像在继续横向移动的同时向上移动。有谁知道实现这一目标的方法？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T03:40:38.420

您是否尝试过设置动画选项`UIViewAnimationOptionBeginFromCurrentState`？

（我说选项是因为它是 iOS 4 引入的基于块的动画方法中的一个选项。它也可用，就`[UIView setAnimationBeginsFromCurrentState:YES]`好像你还不能从已弃用的 UIView 类方法中切换出来一样。）

touchesBegan 变为（使用块动画）：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    [super touchesBegan:touches withEvent:event];

    UITouch *touch = [touches anyObject];   
    CGPoint touchPoint = [touch locationInView:self.view];

    if ([mouse.layer.presentationLayer hitTest:touchPoint]) {
        NSLog(@"it's a hit!");
        [UIView animateWithDuration:0.5 delay:0.0 options:(UIViewAnimationOptionCurveLinear & UIViewAnimationOptionBeginFromCurrentState) animations:^{
            myImageView.layer.position = CGPointMake( myImageView.layer.position.x,  mouse.layer.position.y - 40);
        }completion:^(BOOL complete){
            //
        }];
    }
} 
```

如果您使用它，您应该能够指定您想要的最终坐标`x`和`y`坐标，并让动画从对象被触摸的点继续到该位置。

# php - 拒绝访问 htaccess 中的多个文件

> ID：12701422
> 
> 赞同：4
> 
> 时间：2012-10-03T03:18:35.143
> 
> 标签：php, html, file, .htaccess

我想通过 htaccess 拒绝多个文件。

```
<FilesMatch (profile|reg|register|..............|)\.php>
order allow,deny
deny from all
</FilesMatch> 
```

我有很多要拒绝访问的文件（6 个文件夹，每个文件夹大约 30 个文件），因此使用上述方法逐个输入它们需要时间。

我可以拒绝访问这样文件夹中的所有文件吗？

```
<Directory /www/php/login/pages>
  Order Allow,Deny
</Directory> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-02T13:34:45.880

对多个

```
<FilesMatch "(foo|bar|doo)\.php$">
    Deny from all
</FilesMatch> 
```

或者去重写规则（`RewriteEngine On`）

```
RewriteRule \.(psd|log)$ - [NC,F] 
```

拒绝访问文件夹中的所有文件：

```
rewriteRule ^www/php/login/pages - [NC,F] 
```

或者直接在该文件夹中放置“全部拒绝”...

**2015 年更新：**使用 Apache 2.4 或更高版本，“全部拒绝”[需要调整](http://httpd.apache.org/docs/2.4/upgrading.html#access)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T03:23:04.533

您需要像最初的方法一样添加“全部拒绝”，但是可以。

在文档中向下滚动您正在寻找的语法：[http ://httpd.apache.org/docs/2.2/mod/core.html#directory](http://httpd.apache.org/docs/2.2/mod/core.html#directory)

# haskell - 如何在断言失败时使 HUnit 打印换行符？

> ID：12701424
> 
> 赞同：1
> 
> 时间：2012-10-03T03:18:48.573
> 
> 标签：haskell, hunit

我的一些 HUnit 测试将相当大的结构与`assertEqual`. 由于 HUnit 将字符串打印在一行上，因此很难发现其中的错误。我想做的是`Text.Groom`用来漂亮地打印这些结构，但是如果我将一个字符串传递给`assertEqual`换行符，则会显示为`\n`这样它会使输出更难阅读。

我如何制作 HUnit，`assertEqual`特别是打印带有换行符的修饰字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T03:40:56.380

`assertEqual`只是一个调用`assertBool`，将相等比较作为 ，`Bool`并将数据结构的显示版本作为`String`. 所以给自己写一个用不同的错误字符串调用的函数，`assertBool`你就完成了。

# python - 列表索引超出范围

> ID：12701428
> 
> 赞同：0
> 
> 时间：2012-10-03T03:19:27.787
> 
> 标签：python, list

如何修复此错误，pos_coordinates 包含一个值列表，而 updatePos_coordinates 是先前复制到 updatePos_coordinates 列表中的 pos_coordiantes 值。我想找出对象和索引值 8、9、12 和 13 之间的差异。但我不断收到此错误。我该如何解决这个问题

```
 screen_width = 0
    screen_height = 0
    updatePos_coordinates = []

    while True:
        client_socket.send("loc\n")
        data = client_socket.recv(8192)
        pos_coordinates = data.split()

        if(not(pos_coordinates[-1] == "eom" and pos_coordinates[0] == "start")):
            continue

        if (screen_width != int(pos_coordinates[2])):
            screen_width = int(pos_coordinates[2])
            screen_height = int(pos_coordinates[3])

        if (pos_coordinates != updatePos_coordinates):
            if(cmp(pos_coordinates[8:10], updatePos_coordinates[8:10]) == 0):
                both.brake()
                print "Ball is in the same location.."
            if((pos_coordinates[8] - updatePos_coordinates[8] > 5) or (pos_coordinates[8] - updatePos_coordinates[8] < -5) or (pos_coordinates[9] - updatePos_coordinates[9] > 5) or (pos_coordinates[9] - updatePos_coordinates[9] < -5)):     
                activateRobot(pos_coordinates)
            else:
                both.brake()
                print "Ball is in the same location.."

        updatePos_coordinates = pos_coordinates[:]
        time.sleep(3)
        print '...........' 
```

我不断得到这个：

```
Traceback (most recent call last):
  File "test.py", line 155, in <module>
    if((pos_coordinates[8] - updatePos_coordinates[8] > 5) or (pos_coordinates[8] - updatePos_coordinates[8] < -5) or (pos_coordinates[9] - updatePos_coordinates[9] > 5) or (pos_coordinates[9] - updatePos_coordinates[9] < -5)):     
IndexError: list index out of range 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T03:27:35.347

`updatePos_coordinates[8]`当它还没有任何元素时，您正在尝试访问，因为自从您将其定义为`updatePos_coordinates = []`.

`updatePos_coordinates`您应该在循环之前填充默认值。

例如：

```
updatePos_coordinates = ['' for _ in range(16)]
# replace 16 with length of pos_coordinates 
```

或者，您可以在第一次通过循环时使两个坐标彼此相等。

```
if len(updatePos_coordinates) < 16:
    updatePos_coordinates = pos_coordinates[:]

elif pos_coordinates != updatePos_coordinates:
    ... 
```

我还注意到，当坐标实际上是字符串时，您将坐标视为整数。

# git - 执行 git difftool --dir-diff 后，文件因某种原因被修改

> ID：12701429
> 
> 赞同：2
> 
> 时间：2012-10-03T03:19:43.677
> 
> 标签：git, newline, difftool

完成后`git difftool --dir-diff`，我的工作区文件由于某种原因被修改。我一直在猜测它正在转换`crlf`和`lf`等之间的行尾......但是，做`"git config core.autocrlf false`“或”`git config --global core.autocrlf false`没有任何区别。我尝试使用windiff和beyond compare作为自定义差异工具，但它没有帮助。这很糟糕，因为每次我查看 .csproj 文件中的一些更改时，都会重新加载项目，因为它说该文件已被外部修改。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T06:20:02.847

可以声明自动转换的唯一其他方式是通过[`.gitattributes`文件](http://git-scm.com/book/en/Customizing-Git-Git-Attributes)（请参阅 参考资料[`gitattributes`](http://git-scm.com/docs/gitattributes)）：

*   使用指令`*.txt eol=lf`（“ [Git：默认所有文本文件为 unix 换行符](https://stackoverflow.com/q/10734395/6309)”）或`* text=auto`（“[在 git repo 和工作副本中强制 LF eol](https://stackoverflow.com/q/9976986/6309) ”）
*   使用内容过滤器（涂抹脚本）

# c++ - 在 Qt 上，如何在运行时更改工具栏中的动作图标？

> ID：12701435
> 
> 赞同：1
> 
> 时间：2012-10-03T03:21:37.833
> 
> 标签：c++, qt, icons, runtime, qtoolbar

在计算 abritary 精度数的程序中。我在任务栏上有一个动作。

`QAction* button_stop_continue.`

我在程序的开头设置了图标绿色图标，当执行计算时它应该变成红色等等。

我已经尝试过这样的事情：

```
connect(this, SIGNAL(startedComputing()), this, SLOT(turnIconRed()));
connect(this, SIGNAL(finishedComputing()), this, SLOT(turnIconGreen())); 
```

函数 turnIconRed 看起来与此类似：

```
void turnIconRed()
{
    button_stop_continue->setIcon(QIcon("images/red-light.png"));
} 
```

我想出了一些非常难看的算法：S。在 Qt 上没有直接的方法来处理这个问题吗？有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T06:38:33.870

我会将 QAction 子类化，并为它可能处于的状态添加一些逻辑。将某物的颜色硬编码到方法的名称中绝不是一个好主意。通过继承 QAction，封装了它的外观。

这可能是这样的：

**头文件：**

```
class StateAction : public QAction
{
    Q_OBJECT
public:
    explicit StateAction(QObject *parent = 0);

public slots:
    void start();
    void stop();
    void pause();
}; 
```

**实现文件：**

```
StateAction::StateAction(QObject *parent) :
    QAction(parent)
{
    this->stop();
}

void StateAction::start()
{
    this->setIcon(QIcon(":/states/start.png"));
}

void StateAction::stop()
{
    this->setIcon(QIcon(":/states/stop.png"));
}

void StateAction::pause()
{
    this->setIcon(QIcon(":/states/pause.png"));
} 
```

现在，在您的 MainWindow 中，您只需将其插槽连接到正确的信号即可使用该自定义 QAction：

**头文件：**

```
class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();

signals:
    void startedComputing();
    void finishedComputing();
    void pausedComputing();

private:
    void createActions();
    void createToolbars();
    void createConnections();
    StateAction *m_stateAction;
}; 
```

**实现文件：**

...

```
void MainWindow::createConnections()
{
    connect(this, SIGNAL(startedComputing()), m_stateAction, SLOT(start()));
    connect(this, SIGNAL(finishedComputing()), m_stateAction, SLOT(stop()));
    connect(this, SIGNAL(pausedComputing()), m_stateAction, SLOT(pause()));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T05:21:38.247

我在这里找到了使用**QToolButton**的解决方案：

**头文件：FenPrincipale.h**

```
#ifndef FENPRINCIPALE_H
#define FENPRINCIPALE_H

#include <QWidget>
#include <QVBoxLayout>
#include <QToolButton>
#include <QToolBar>
#include <QAction>
#include <QTextEdit>

class FenPrincipale : public QWidget {
    Q_OBJECT
public:
    FenPrincipale();

private slots:
    void goComputing();
    void stopComputing();

private:

    QAction* actionDemarrer;    // Start computing
    QAction* actionArreter;     // Stop computing
    QToolBar* toolBarActions;

    QToolButton* boutonAction;  // this button holds the appropriate action
    QVBoxLayout* layoutPrincipale;
    QTextEdit* resultat;        // show result
}; 
```

...

**实施：FenPrincipale.cpp**

```
#include "FenPrincipale.h"

FenPrincipale::FenPrincipale() : QWidget()
{
    this->setFixedSize(400, 200);

    // create actions
    actionDemarrer = new QAction(QIcon("bouton-vert.png"), "demarrer", this);
    actionArreter = new QAction(QIcon("bouton-rouge.png"), "arreter", this);
    boutonAction = new QToolButton;
    boutonAction->setDefaultAction(actionDemarrer);

    // create toolbar
    toolBarActions = new QToolBar(this);
    toolBarActions->addWidget(boutonAction);

    // create result widget
    resultat = new QTextEdit(this);

    // create layout
    layoutPrincipale = new QVBoxLayout(this);
    layoutPrincipale->addWidget(toolBarActions);
    layoutPrincipale->addWidget(resultat);
    this->setLayout(layoutPrincipale);

    // make connections
    QObject::connect(actionDemarrer, SIGNAL(triggered()), this, SLOT(goComputing()));
    QObject::connect(actionArreter, SIGNAL(triggered()), this, SLOT(stopComputing()));
}

void FenPrincipale::goComputing()
{
    resultat->setText("Computing...");
    boutonAction->setDefaultAction(actionArreter);
}

void FenPrincipale::stopComputing()
{
    resultat->setText("Partial result : {?}");
    boutonAction->setDefaultAction(actionDemarrer);
} 
```

...

**主要的**

```
#include <QApplication>
#include "FenPrincipale.h"

int main(int argc, char* argv[])
{
    QApplication app(argc, argv);
    FenPrincipale fenetre;

    fenetre.show();
    return app.exec();
} 
```

# android - Android在不同画布之间拖放

> ID：12701436
> 
> 赞同：1
> 
> 时间：2012-10-03T03:21:50.850
> 
> 标签：android, canvas, drag-and-drop, android-fragments

我有两个片段。每个片段都包含画布。两个片段同时在屏幕上可见。

在第一个画布上，我有一些图像，我动态地放置在那里。我需要将所选图像从第一个画布拖放到第二个画布上。

我在网上找不到任何示例如何做到这一点。我只找到了如何拖放视图的示例。但就我而言，似乎不可能用视图替换画布。

# java - 制作一个在处理中画线的循环

> ID：12701437
> 
> 赞同：1
> 
> 时间：2012-10-03T03:22:18.720
> 
> 标签：java, processing

我有这段代码，我想知道如何制作一个循环来绘制这些线......x轴上每50个像素......我很好奇如何做到这一点并想使用一个循环，而不是手动绘制每条线！以下是这些行的代码......请任何帮助将不胜感激！

```
 //set sidewalk
fill(255,255,255);
rect(0,490,500,10);
line(50,490,50,500);
line(100,490,100,500);
line(150,490,150,500);
line(200,490,200,500);
line(250,490,250,500);
line(300,490,300,500);
line(350,490,350,500);
line(400,490,400,500);
line(450,490,450,500); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T03:26:52.817

```
fill(255,255,255);
rect(0,490,500,10);

for (int i = 50; i <= 450; i+=50) { 
  line(i,490,i,500);    
} 
```

也许这样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T22:37:09.213

**Daniel Shiffman 在他的《学习处理**》一书中很好地解释了如何做到这一点。[您可能想查看本书配套站点上](http://www.learningprocessing.com/examples/)提供的示例 6-1、6-2 和 6-3，因为它们引导了如何解决这个问题。Shiffman 用一个 while 循环展示了这一点，并用示例 6-6 展示了一个类似的代码片段，其中它在一个类似于上一个答案的 for 循环中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T01:36:44.083

如果您对可视化感兴趣，另一个学习处理的好来源是Ben *Fry的***Visualizing Data**。

 *本书中的所有示例都带有处理本身。选择 File -> Examples...，然后您可以选择要查看和使用的示例。*

# c# - 在图片框内创建 2 x 2 正方形

> ID：12701438
> 
> 赞同：2
> 
> 时间：2012-10-03T03:22:33.277
> 
> 标签：c#

我目前开始按照相同的逻辑构建一个简单版本的生命游戏。我正在使用图片框。为了知道点击区域的位置，建议使用 2 x 2 方格。如何创建 2 x 2 正方形并在图片框内给它一个类似网格的样式？

**代码**

```
 private void Form1_Load(object sender, EventArgs e)
        {
            this.pictureBox1.Image = this.Draw(this.pictureBox1.Width, this.pictureBox1.Height);
        }

        public Bitmap Draw(int width, int height)
        {
            var bitmap = new Bitmap(width, height, PixelFormat.Format32bppArgb);
            var graphics = Graphics.FromImage(bitmap);
            graphics.SmoothingMode = SmoothingMode.AntiAlias;
            graphics.FillRectangle(new SolidBrush(Color.Tomato), 60, 60, 10, 10);

            return bitmap;
        } 
```

展望示例

![在此处输入图像描述](../Images/fc62a3206d3c2707786146d4880595e8.png)

# xaml - Windows Phone xaml 元素名称

> ID：12701441
> 
> 赞同：0
> 
> 时间：2012-10-03T03:23:06.490
> 
> 标签：xaml, user-interface, element, windows-phone

在 Windows Phone xaml 页面中，某些元素具有**x:Name**

```
<TextBlock x:Name="PageTitle" Text="simple" Margin="9,-7,0,0" Style="{StaticResource PhoneTextTitle1Style}"/> 
```

而其他人有**名字**

```
<TextBlock Name="tbSource" Height="30" HorizontalAlignment="Left" Margin="129,178,0,0"  Text="Source" VerticalAlignment="Top" Width="304" /> 
```

有什么区别 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T17:30:05.113

该`x:`部分是命名空间别名。它告诉编译器属性存在的位置。在这种情况下，它指向 XAML 的默认命名空间。
该`Name`属性是`System.Object`该名称空间中的一部分。
当您包含`x:Name`以标识`Name`在 XAML 中调用的属性时，您明确表示您指`Name`的是底层`System.Object`. 由于所有对象都继承自它，因此所有类都可以访问它。

**为什么这有什么关系？**
如果您覆盖了类中的 Name 属性，那么指定命名空间将允许您明确指出`Name`您所指的是哪个版本。
旁注：永远不会覆盖`Name`.

**你用哪个有关系吗？**
不，只要`Name`永远不会被覆盖，您需要参考它的特定版本。

无论您是否使用它，保持一致可能符合您的利益。大多数人都会这样做（就像 VS 在为您创建控件时一样），因此将它们保留在那里可能是最容易的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T03:30:52.310

不确定，但我认为 x:Name 元素可以通过它们的名称在代码中访问。例如 PageTitle.Text = "一些文本"。而“名称”只是元素的常规属性。另请参阅[以下](http://msdn.microsoft.com/en-us/library/ms752290.aspx)有关 x:Name 指令的文章。

# api - 有没有办法知道是否在foursquare中创建了新场地？

> ID：12701442
> 
> 赞同：0
> 
> 时间：2012-10-03T03:23:13.860
> 
> 标签：api, foursquare

我知道您会查看您的朋友是否在foursquare 的场地登记入住，但是有没有办法查看是否在某个地方/城市创建了新场地

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:01:30.510

不，此功能无法通过foursquare API 获得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T20:05:21.213

此线程中的相关讨论：[https ://groups.google.com/forum/?fromgroups=#!topic/foursquare-api/vdKwGYCnuy0](https://groups.google.com/forum/?fromgroups=#!topic/foursquare-api/vdKwGYCnuy0)

目前无法通过 API 直接获取此信息，但理论上您可以在城市的某些区域搜索场地，缓存场地 ID 并检查其 createdAt 值（参见[https://developer.foursquare.com/文档/响应/地点](https://developer.foursquare.com/docs/responses/venue)）。定期重复这些步骤，并与缓存的场地 ID 进行比较。这样您就可以发现新创建的场地。当然，它可能不是 100% 可靠的，尤其是在大城市。

# php - 检测无效的 PHP 资源流

> ID：12701446
> 
> 赞同：3
> 
> 时间：2012-10-03T03:23:26.800
> 
> 标签：php, sockets

您如何检测流资源不再有效？我有一个脚本显然会杀死、破坏或威胁一些`fsockek_open()`连接资源，因此它经常会在没有任何警告的情况下消失。以下是我脚本中的 var_dumps。

```
resource(6) of type (stream)
resource(6) of type (stream)
resource(6) of type (stream)
resource(6) of type (Unknown) <-- causes feof() error on next check because it's not valid 
```

像 return TRUE 这样的基本检查`if($resource)`会在像这样检查时导致问题。

```
if($resource AND !feof($resource)) 
```

对资源的第一次布尔检查有效，但 feof 失败导致错误，因为在测试条件的后半部分时流现在是未知的。

```
PHP Warning:  feof(): 6 is not a valid stream resource 
```

这使得这样的例子不起作用。

```
while ($resource AND ! feof($resource)) <-- fails with error
{
    $buffer .= fread($resource);
}
fclose($resource); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T03:39:55.250

我以为我已经尝试过了，但是一个简单的资源检查似乎可以发现问题所在。

```
if(is_resource($this->socket) AND !feof($this->socket))
{
    // goodness
} 
```

# jquery - 在 jQuery 中修改 CSS

> ID：12701451
> 
> 赞同：2
> 
> 时间：2012-10-03T03:24:05.727
> 
> 标签：jquery

我是 jQuery 的菜鸟，我尝试了以下代码但不起作用。谁能告诉我如何使用jQuery将leftValue分配给“left”作为以下代码？

```
var i =0;
var leftValue = seat_xcoord*20;
$('#seat'+i).css({left: $leftValue}); 
```

干杯。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T03:25:05.610

尝试这个

```
$('#seat'+i).css({left: leftValue + 'px'}); 
```

你有**$leftValue** 而不是**leftValue**

并确保有元素`id="seat0"`

[检查演示](http://jsfiddle.net/sushanth009/ae9jj/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T03:25:44.470

从您的 leftValue 变量中删除 $ 并连接像素单位的“px”。

# slice - 如何索引切片元素？

> ID：12701452
> 
> 赞同：52
> 
> 时间：2012-10-03T03:24:08.393
> 
> 标签：slice, go-templates

我有一片：`Keys []* datastore.Key`

我如何在模板文件中索引其中之一？我猜到`{{.Keys[3] }}`了，但这不起作用，我搜索了很多但没有任何线索。

欢迎任何建议，谢谢。

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-10-03T03:31:08.710

像这样使用[`index`](http://golang.org/pkg/text/template/#Functions)命令：

```
{{index .Keys 3}} 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-10-03T03:42:38.057

如 html/template 包中所述，大多数示例实际上位于 text/template pkg 文档中。见[http://golang.org/pkg/text/template/](http://golang.org/pkg/text/template/)

从文档

```
index
    Returns the result of indexing its first argument by the
    following arguments. Thus "index x 1 2 3" is, in Go syntax,
    x[1][2][3]. Each indexed item must be a map, slice, or array. 
```

# django - 基于类的视图 MySQL DateTimeField 收到一个天真的日期时间

> ID：12701460
> 
> 赞同：2
> 
> 时间：2012-10-03T03:25:36.500
> 
> 标签：django, datetime, django-models, django-views, django-class-based-views

我对 Django 很陌生，并且在我的绳索尽头，真的需要一些帮助。

我不知道如何使用“基于类的视图”并将传入的日期时间字段从我的 MySQL 数据库更改为它似乎需要的时区支持条目。数据库将其存储在 UTC 中，我的系统在 PST 上。

我收到此错误：

在时区支持处于活动状态时，DateTimeField 收到了一个简单的日期时间 (2012-09-01 00:00:00)

仅在我的 MonthArchiveView、DayArchiveView、DateDetailView 上。出于某种原因，我的 ArchiveIndexView、YearArchiveView 基于类的视图工作正常。

这是我的模型：

```
class blogpost(models.Model):
  blog_title = models.CharField(max_length=200)
  blog_slug = models.SlugField(unique_for_date='blog_pub_date', max_length=200)
  blog_content = models.TextField()
  blog_pub_date = models.DateTimeField(default=datetime.now())
  blog_category = models.ForeignKey('blogcategory') 
```

这是我的观点之一：

```
class ThoughtsDetailView(DateDetailView):
  template_name='thoughts/thoughts_detail.html'
  queryset = blogpost.objects.all()
  date_field = 'blog_pub_date'
  slug_field = 'blog_slug'
  context_object_name = 'thoughts_detail'
  month_format = '%m'
  allow_future = 'true' 
```

这是一个示例模板：

```
{% block content-inner-left %}
<h1>{{ thoughts_detail.blog_title }}</h1>
<div id="blogpost">
  <p class="blogsmalldate">[ Posted on {{ thoughts_detail.blog_pub_date|date:"l, F dS, Y" }}, {{ thoughts_detail.blog_pub_time|date:"g:i a" }} ]</p>
  <br />
  <p>{{ thoughts_detail.blog_content|safe|linebreaks }}</p>
</div>
{% endblock content-inner-left %} 
```

有人可以帮助我了解如何修复我的日详细信息视图，使其保持为基于类的视图，然后我可能会找出其他视图。我什至尝试使用 PYTZ，但不太了解如何更改基于类的视图以使用它。谢谢....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T07:21:52.000

问题不在于视图，而在于日期存储在没有时区信息的数据库中，而 Django 设置为支持时区。如果不需要时区支持，只需`USE_TZ = False`在 settings.py 中设置即可；如果这样做，请确保数据库将日期与时区信息一起存储。更多细节可以在[https://docs.djangoproject.com/en/1.4/topics/i18n/timezones/#naive-and-aware-datetime-objects找到](https://docs.djangoproject.com/en/1.4/topics/i18n/timezones/#naive-and-aware-datetime-objects)

# javascript - ios6触摸事件处理javascript

> ID：12701463
> 
> 赞同：-1
> 
> 时间：2012-10-03T03:26:03.720
> 
> 标签：javascript, jquery, ios6, bxslider

我正在尝试改进 touchwipe js。我只想处理水平滚动，如果出现任何垂直滚动，让浏览器处理我的修复在 ios5 中工作正常，但在 ios6 中它得到冻结任何想法？

[http://archive.plugins.jquery.com/project/Touchwipe-iPhone-iPad-wipe-gesture](http://archive.plugins.jquery.com/project/Touchwipe-iPhone-iPad-wipe-gesture)

请在下面找到代码

```
function onTouchMove(e) {   

         //var e = (e.changedTouches != undefined)? touches[0] : e; 
         if(isMoving) {              
             var x = e.touches[0].pageX;
             var dx = startX - x;
             if(Math.abs(dx) >= config.min_move_x)
             {
                 if(config.preventDefaultEvents) { 
                     e.preventDefault();                 
                 }
                cancelTouch();
                if(dx > 0) {
                    config.wipeLeft();
                }
                else {
                    config.wipeRight();
                }
                return false;
            }
             else {
                   console.log('y moving.. ');
                   // attachTouch();
                    return true;
             }
         }

     } 
```

只是添加更多细节。我正在尝试通过 BXslider 为我的列表设置水平动画，并且它的工作正常希望支持触摸事件，因此添加了触摸擦除 jquery 。但是添加它会给出 1 个问题，即水平滚动动画可以正常工作，但触摸页面垂直滚动不能正常工作。

所以我试图通过返回 true 来解决问题；如果它唯一的 Y 移动，在 touchwipe js。此修复程序在 android4 和 ios5 上运行良好，但在 ios6 中失败，如果我稍微激进地垂直滚动页面（在椭圆/圆形中移动手指 4-5 秒）其冻结 bxslider 动画。

进一步调试在 bxslider.gotoNextSlide()-> 调用 Jquery $parent.animate() 方法进行滑动，在积极滚动后停止在 ios6 中工作。

现在我卡住了，无法理解为什么这个 animate() 停止工作？

EG >>>

[http://jsfiddle.net/qtCHx/](http://jsfiddle.net/qtCHx/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T00:51:40.767

这可能是由于这个错误： [http ://bugs.jquery.com/ticket/12620](http://bugs.jquery.com/ticket/12620)

这里的临时解决方案： [https ://gist.github.com/3798925](https://gist.github.com/3798925)

# c++ - 为什么空基类优化 (EBO) 在 MSVC 中不起作用？

> ID：12701469
> 
> 赞同：15
> 
> 时间：2012-10-03T03:26:52.823
> 
> 标签：c++, visual-c++, compiler-optimization, empty-class

为什么空基类优化 (EBO) 没有在 Visual C++ 中得到充分应用？

如果我有很多基类，有什么办法可以帮助编译器进行这种优化？

```
#include <iostream>

struct T1 { };
struct T2 { };
struct T3 { };
struct T4 { };
struct T5 { };
struct T6 { };

struct Test : T1, T2, T3, T4, T5, T6 { };

int main() { std::cout << sizeof(Test); }   // Prints 5 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-03T18:03:56.593

这是 Visual C++ 编译器中长期存在的错误。当一个类派生自多个空基类时，只有初始的空基类将使用空基优化 (EBO) 进行优化。

2006 年在 Microsoft Connect 上报告了此问题： [空基优化无法正常工作。](https://connect.microsoft.com/VisualStudio/feedback/details/100686/empty-member-optimization-not-working-properly) 目前，旧错误在 Microsoft Connect 上不可见。我被告知这是一个临时问题，虽然我不知道什么时候会解决。同时，以下是来自 Visual C++ 编译器团队的开发人员之一 Jonathan Caves 对该错误的回应：

> 嗨：不幸的是，尽管这是 Visual C++ 对象模型中的一个错误，但我们目前无法修复它，因为修复它可能会破坏许多现有程序，因为对象的大小会发生变化。希望在未来我们能够解决这个问题，但不能用于产品的下一个版本。
> 
> 感谢您报告问题。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-03T06:52:26.077

“官方”的立场是 MSVC 只会为单一继承做 EBO，不幸的是，说明这一点的错误报告已被 MS 删除，所以剩下的只是[MSDN 上的一个较旧的问题](http://social.msdn.microsoft.com/Forums/zh/vclanguage/thread/63a85ae0-791e-4701-b5c8-b7b7bdbd426e)，指出它并引用现在删除的错误报告。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-04-05T07:36:35.360

自**Visual Studio 2017 Update 2**以来，[有一个修复程序](https://devblogs.microsoft.com/cppblog/optimizing-the-layout-of-empty-base-classes-in-vs2015-update-2-3/)......但默认情况下它是禁用的。而且您必须分别为*每个类*显式启用它：

```
 struct __declspec(empty_bases) Test : T1, T2, T3, T4, T5, T6 { };
    //     ^^^^^^^^^^^^^^^^^^^^^^^

    static_assert(1 == sizeof(Test)); 
```

`/std:c++latest`可悲的是，`/permissive-`即使在**Visual Studio 2019**中，这仍然适用：没有办法在全局范围内设置它。

# iphone - iOS - 提示用户更新到最新的应用程序版本

> ID：12701470
> 
> 赞同：4
> 
> 时间：2012-10-03T03:27:02.170
> 
> 标签：iphone, ios

如果他们使用的版本不是最新的，是否有任何方法或插件可以提醒用户升级应用程序？我想我可以 ping 一个 Web 服务来检查当前版本是什么，并与用户的版本进行比较，然后从那里开始。顺便说一句，有没有办法检查应用程序的当前版本（一些我不知道的属性），或者你只需​​要将版本硬编码为一些浮点变量或其他东西？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-10T13:10:40.983

有一个不错的小型开源库，名为[Harpy](https://github.com/ArtSabintsev/Harpy)，可以为您完成此任务！它提供了在启动时、每天或每周检查更新的能力，并使用 iTunes 进行检查，因此配置非常少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T03:33:28.343

您需要自己构建更新检查功能。但是您可以从应用程序中获取版本信息。

```
NSString *version = [[[NSBundle mainBundle] infoDictionary] objectForKey:(NSString*)kCFBundleVersionKey]; 
```

请记住，仅仅因为您有一个应用程序。并已发布到商店。这并不意味着该应用程序可以立即通过应用程序商店提供给所有用户。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-26T06:08:56.490

有一个名为 siren 的 harpy 更新版本可以帮助您。下面是链接， [https://github.com/ArtSabintsev/Siren](https://github.com/ArtSabintsev/Siren)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T03:30:25.140

您必须自己构建这样的解决方案。iOS SDK 没有提供更新检查功能。

正如您已经考虑过的，大多数应用程序只是检查网站或类似网站。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T03:36:01.950

您可以从 info.plist 中获取版本

```
 NSDictionary *infoDict = [[NSBundle mainBundle] infoDictionary];
self.applicationVersion = [infoDict objectForKey:@"CFBundleVersion"];
self.applicationBuild = [infoDict objectForKey:@"CFBundleShortVersionString"]; 
```

而且，是的，只需点击一个网络服务。或者更简单的是，您可以将文件放在 S3 上并使用您的版本号进行更新。

# java - 具有不同点颜色和大小的散点图

> ID：12701473
> 
> 赞同：1
> 
> 时间：2012-10-03T03:27:27.540
> 
> 标签：java, swt, scatter-plot, swtchart

我找到[了 SWTChart 库](http://www.swtchart.org)，只是想知道如何获得一个散点图，其中点具有不同的颜色和大小，如本[例所示](https://matplotlib.org/examples/pylab_examples/scatter_demo2.html)。

[![例子](../Images/d5cd3d8b170e8b73b7b578f200a7cda2.png)](https://i.stack.imgur.com/BIXhZ.png)
[（来源：[matplotlib.org](http://matplotlib.org/_images/scatter_demo2.png)）]

```
package org.swtchart.examples;

import org.eclipse.swt.SWT;
import org.eclipse.swt.layout.FillLayout;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;
import org.swtchart.Chart;
import org.swtchart.ILineSeries;
import org.swtchart.LineStyle;
import org.swtchart.ISeries.SeriesType;

/**
* An example for scatter chart.
*/
public class ScatterChartExample {

private static final double[] xSeries = { 0.0, 2.6, 6.5, 4.4, 5.6, 4.3,
    3.4, 10.8, 2.1, 8.9 };
private static final double[] ySeries = { 1.3, 0.0, 3.9, 2.6, 1.1, 0.6,
    3.1, 3.5, 5.6, 4.4 };

/**
* The main method.
* 
* @param args
*            the arguments
*/
public static void main(String[] args) {
    Display display = new Display();
    Shell shell = new Shell(display);
    shell.setText("Scatter Chart");
    shell.setSize(500, 400);
    shell.setLayout(new FillLayout());

    createChart(shell);

    shell.open();
    while (!shell.isDisposed()) {
    if (!display.readAndDispatch()) {
        display.sleep();
    }
    }
    display.dispose();
}

/**
* create the chart.
* 
* @param parent
*            The parent composite
* @return The created chart
*/
static public Chart createChart(Composite parent) {

    // create a chart
    Chart chart = new Chart(parent, SWT.NONE);

    // set titles
    chart.getTitle().setText("Scatter Chart");
    chart.getAxisSet().getXAxis(0).getTitle().setText("Score A");
    chart.getAxisSet().getYAxis(0).getTitle().setText("Score B");

    // create scatter series
    ILineSeries scatterSeries = (ILineSeries) chart.getSeriesSet()
        .createSeries(SeriesType.LINE, "scatter series");
    scatterSeries.setLineStyle(LineStyle.NONE);
    scatterSeries.setXSeries(xSeries);
    scatterSeries.setYSeries(ySeries);

    // adjust the axis range
    chart.getAxisSet().adjustRange();

    return chart;
}
} 
```

如何获得点具有不同颜色和大小的散点图？

先感谢您。

* * *

我以为我只是先尝试​​用这个简单的代码从[LineSeries继承](http://swt-chart.svn.sourceforge.net/viewvc/swt-chart/trunk/org.swtchart/src/org/swtchart/internal/series/LineSeries.java?revision=283&view=markup)

```
package org.swtchart.examples;
import org.swtchart.Chart;
import org.swtchart.internal.series.LineSeries;

public class ILineSeriesTest extends LineSeries{

  protected ILineSeriesTest(Chart chart, String id) {
      super(chart, id);
  }
} 
```

在示例代码中，我将其更改为：

```
ILineSeriesTest scatterSeries = (ILineSeriesTest) chart.getSeriesSet()
            .createSeries(SeriesType.LINE, "scatter series"); 
```

但是，我收到以下错误：

```
Exception in thread "main" java.lang.ClassCastException: org.swtchart.internal.series.LineSeries cannot be cast to org.swtchart.examples.ILineSeriesTest
  at org.swtchart.examples.ScatterChartExampleTest.createChart(ScatterChartExampleTest.java:67)
  at org.swtchart.examples.ScatterChartExampleTest.main(ScatterChartExampleTest.java:38) 
```

为什么它没有成功？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:22:37.087

您可以使用以下方法获得单独的颜色[`setSymbolColors(Color[] colors)`](http://www.swtchart.org/doc/javadoc/org/swtchart/ILineSeries.html#setSymbolColors(org.eclipse.swt.graphics.Color[]))：

```
scatterSeries.setSymbolColors(new Color[] { ColorConstants.red,
            ColorConstants.red, ColorConstants.red, ColorConstants.red,
            ColorConstants.green, ColorConstants.green,
            ColorConstants.green, ColorConstants.blue, ColorConstants.blue,
            ColorConstants.blue }); 
```

请注意，此示例使用[`ColorConstants`](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.draw2d.doc.isv/reference/api/org/eclipse/draw2d/ColorConstants.html).[`Draw2D`](http://www.eclipse.org/gef/draw2d/index.php)

至于尺寸：您将必须实现自己[`ISeries`](http://www.swtchart.org/doc/javadoc/org/swtchart/ISeries.html)的尺寸，它可以处理尺寸。

![在此处输入图像描述](../Images/6bf57ddc32f26af8312e438763537a79.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T07:27:07.313

SWTchart 的开发者 Yoshitaka 提供了以下解决方案：

```
package org.swtchart.examples;

import org.eclipse.draw2d.ColorConstants;
import org.eclipse.swt.SWT;
import org.eclipse.swt.events.PaintEvent;
import org.eclipse.swt.graphics.Color;
import org.eclipse.swt.layout.FillLayout;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;
import org.swtchart.Chart;
import org.swtchart.IAxis;
import org.swtchart.ICustomPaintListener;
import org.swtchart.ILineSeries;
import org.swtchart.ILineSeries.PlotSymbolType;
import org.swtchart.IPlotArea;
import org.swtchart.LineStyle;
import org.swtchart.ISeries.SeriesType;

/**
* An example for scatter chart.
*/
public class ScatterChartExampleTest {

    private static final double[] xSeries = { 0.0, 2.6, 6.5, 4.4, 5.6, 4.3,
            3.4, 10.8, 2.1, 8.9 };
    private static final double[] ySeries = { 1.3, 0.0, 3.9, 2.6, 1.1, 0.6,
            3.1, 3.5, 5.6, 4.4 };

    /**
    * The main method.
    * 
    * @param args
    *            the arguments
    */
    public static void main(String[] args) {
        Display display = new Display();
        Shell shell = new Shell(display);
        shell.setText("Scatter Chart");
        shell.setSize(500, 400);
        shell.setLayout(new FillLayout());

        createChart(shell);

        shell.open();
        while (!shell.isDisposed()) {
            if (!display.readAndDispatch()) {
                display.sleep();
            }
        }
        display.dispose();
    }

    /**
    * create the chart.
    * 
    * @param parent
    *            The parent composite
    * @return The created chart
    */
    static public Chart createChart(Composite parent) {

        // create a chart
        final Chart chart = new Chart(parent, SWT.NONE);

        // set titles
        chart.getTitle().setText("Scatter Chart");
        chart.getAxisSet().getXAxis(0).getTitle().setText("Score A");
        chart.getAxisSet().getYAxis(0).getTitle().setText("Score B");

        // create scatter series
        ILineSeries scatterSeries = (ILineSeries) chart.getSeriesSet()
                .createSeries(SeriesType.LINE, "scatter series");
        scatterSeries.setLineStyle(LineStyle.NONE);
        scatterSeries.setXSeries(xSeries);
        scatterSeries.setYSeries(ySeries);

        // hide default plot symbols
        scatterSeries.setSymbolType(PlotSymbolType.NONE);

        // assuming that double[] xSeries, double[] ySeries, int[] sizes,
        // Color[] colors are available
        final Color colors[] = new Color[] { ColorConstants.red, ColorConstants.red,
                ColorConstants.red, ColorConstants.red, ColorConstants.green,
                ColorConstants.green, ColorConstants.green,
                ColorConstants.blue, ColorConstants.blue, ColorConstants.blue };
        final int sizes[] = new int[] { 10, 11, 12, 14, 15, 16, 17, 18, 19, 20};

        IPlotArea plotArea = (IPlotArea) chart.getPlotArea();

        plotArea.addCustomPaintListener(new ICustomPaintListener() {

            public void paintControl(PaintEvent e) {
                IAxis xAxis = chart.getAxisSet().getXAxis(0);
                IAxis yAxis = chart.getAxisSet().getYAxis(0);

                for (int i = 0; i < xSeries.length; i++) {
                    int x = xAxis.getPixelCoordinate(xSeries[i]);
                    int y = yAxis.getPixelCoordinate(ySeries[i]);

                    // draw symbol with any color and shape
                    e.gc.setBackground(colors[i]);
                    e.gc.fillOval(x, y, sizes[i], sizes[i]);
                }
            }

            public boolean drawBehindSeries() {
                return false;
            }
        });

        // adjust the axis range
        chart.getAxisSet().adjustRange();

        return chart;
    }
} 
```

# haskell - 如何在纸上编写一元绑定运算符 (>>=)？

> ID：12701478
> 
> 赞同：3
> 
> 时间：2012-10-03T03:28:29.367
> 
> 标签：haskell, functional-programming, monads

`>>=`需要用很多铅笔在纸上写下来，我总是设法让它看起来很丑。是否有更方便（并且希望是“标准”）的方法来写下这个和其他相关的一元运算符，例如`return`and `>=>`？

# c# - 关于 C# 中的触摸事件锁定

> ID：12701482
> 
> 赞同：0
> 
> 时间：2012-10-03T03:29:24.373
> 
> 标签：c#, events, locking, volatile, raw-input

我使用 rawinput 来获取触摸事件，并且只想在触摸屏幕时执行一次操作。这是一个例子。

```
private volatile bool running = false;
    private object runLock = new object();
    private void OnTouchOnHandler(object sender, EventArgs e)
    {
        lock (runLock)
        {
            if (!running)
            {
                MessageBox.Show("1");
                running = true;
            }
        }
    } 
```

当我第一次触摸屏幕三四次时，我会得到几个 MessageBox。这真的很奇怪。为什么 lock 和 volatile 变量一开始不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T03:51:23.053

最可能的行为原因是您拥有包含`bool running`标志的任何对象的多个实例。

`lock`将阻止多个线程执行相同的代码块。大多数 UI 操作都在同一个线程上执行，因此代码将被允许重新进入同一个块（`lock`在同一个线程上多次获取时不会做任何事情）。在您的情况下，简单的`bool`标志应该足够了，而无需使用`lock`.

# image-processing - 如何将图像的流转换为 GUID

> ID：12701485
> 
> 赞同：1
> 
> 时间：2012-10-03T03:30:02.283
> 
> 标签：image-processing

我们从外部来源摄取了大量图像。我想确保已经摄取的图像不会在后端重新摄取。为此，我正在考虑根据图像流生成 GUID，如下所示

File.ReadAllBytes()

或者

```
public byte[] imageToByteArray(System.Drawing.Image imageIn)
{
 MemoryStream ms = new MemoryStream();
 imageIn.Save(ms,System.Drawing.Imaging.ImageFormat.Gif);
 return  ms.ToArray();
}
enter code here 
```

然后我想把它变成一个 CLR（如果有必要的话），然后将 GUID 与图像的元数据一起保存在 SQL 服务器中。不确定该 GUID 的唯一性有多准确。

有什么输入吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T07:21:10.437

正如@Mark Ransom 所建议的那样，您混淆了 GUID 和哈希。[GUID](http://en.wikipedia.org/wiki/Globally_unique_identifier)是应该是唯一的标识符。它独立于任何输入，只是您可以生成的东西。对于唯一输入，[散列](http://en.wikipedia.org/wiki/Hash_function)应该是唯一的。换句话说，在绝大多数情况下，相同的输入将具有相同的哈希值。

一个常用的散列算法是[MD5](http://en.wikipedia.org/wiki/MD5)。这是关于 SO 的类似问题 的[链接。](https://stackoverflow.com/questions/3410276/need-md5-hash-for-an-in-memory-system-drawing-imagehttps://stackoverflow.com/questions/3410276/need-md5-hash-for-an-in-memory-system-drawing-image)

或者，您可以避免使用现有的命令行实用程序编写代码，例如[md5sum](http://en.wikipedia.org/wiki/Md5sum)、[sort](http://linux.about.com/library/cmd/blcmdl1_sort.htm)和[uniq](http://linux.about.com/library/cmd/blcmdl1_uniq.htm)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-23T10:27:28.097

[这](http://gschoppe.com/blog/duplicate-image-detection-in-php-part-1-fingerprinting/)是“指纹字符串”算法的一种解决方案。

正如帖子所说，即使文件格式不同或大小不同，您也经常希望将相同的视觉对象映射到相同的字符串。所以这个算法将图像压缩成一个带有 62 色调色板的 8x8 缩略图（你可以用 ImageMagick 实现同样的效果）。

此转换为您提供了 64 个值的图像，范围从 1 到 62。

换句话说，一个短的 base-62 字符串。

# heroku - heroku pgbackups:destroy 失败并出现“内部服务器错误”

> ID：12701493
> 
> 赞同：1
> 
> 时间：2012-10-03T03:31:00.503
> 
> 标签：heroku

这就是发生的事情......

pgbackups:capture 给出了以下内容：

```
!    must delete a backup before creating a new one 
```

...所以我尝试删除过去的备份：

```
$ heroku pgbackups 
ID    Backup Time          Size   Database
----  -------------------  -----  --------------- 
b003  2012/07/16 11:27.19  2.4MB  SHARED_DATABASE 
b004  2012/08/09 05:27.57  2.5MB  SHARED_DATABASE

$ heroku pgbackups:destroy b003  
!    Internal server error.  
!    Run `heroku status` to check for known platform issues.

$ heroku status
=== Heroku Status 
Development: No known issues at this time. 
Production:  No known issues at this time. 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:48:58.530

显然，这个错误是“罕见的”——根据 Heroku Support 的说法。

顺便说一句，以下命令成功：

```
$ heroku pgbackups:capture -a <app_name> --expire 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-03T09:09:13.710

更新你的 heroku gem - 这为我解决了问题

```
gem install heroku 
```

# asp.net - 登录页面 MVC4 Razor 上的用户信息

> ID：12701496
> 
> 赞同：0
> 
> 时间：2012-10-03T03:31:12.013
> 
> 标签：asp.net, asp.net-membership, asp.net-mvc-4

我目前正在开发一个 asp.net (MVC)，我在用户表中存储附加信息，即名字、姓氏、出生日期等......标准数据！

当我登录时，我使用电子邮件地址作为用户名，但我不想在登录页面 (_LoginPartial.cshtml) 中显示电子邮件地址，而是想显示 FirstName + " " + LastName。

在 _LoginPartial.cshtml 中，显示“用户名”的代码在我的情况下恰好是“电子邮件”地址，如下所示

你好，@Html.ActionLink(User.Identity.Name, "Manage", "Account", routeValues: null, htmlAttributes: new { @class = "username", title = "Manage" })！

但我不想使用 User.Identity.Name，而是想使用与该电子邮件地址关联的 FirstName 和 LastName，所以我对此有几个问题：

1.  如何获取用户信息/数据 - 我看不到 .GetUser 函数。我需要自己实现吗？如果是这样，我把这段代码放在哪里？

2.  我需要用什么替换 User.Identity.Name？

非常感谢。

蒂埃里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T04:35:27.000

成员资格是严格用于用户凭据的系统。使用用户名和密码登录。而已。它不关心姓名、电话号码或其他任何东西。

您可以使用此信息扩展 User 表，但您必须自己在数据库中查找它。使用您希望的任何数据访问技术。

# shell - 如何在 shell 脚本中进行变量重定向？

> ID：12701498
> 
> 赞同：0
> 
> 时间：2012-10-03T03:31:14.573
> 
> 标签：shell, ash

如果我有一个带有命令的脚本

```
echo xx 2>&1 >junk 
```

我得到一个带有“xx”的文件。如果我有一个脚本

```
R="2>&1 >junk"
echo xx $R 
```

脚本打印`"xx 2>&1 >junk"`，而不是创建我想要的文件。
我怎样才能有一个可变的重定向？在手头的情况下，我要么想要进行重定向，要么只是将变量设置为空字符串以不进行重定向。但是我需要为许多命令执行此操作，因此我想将其作为变量执行。
注意：环境是嵌入式 Linux，带有来自 busybox 的 ash shell。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T03:32:47.430

使用评估：

```
R="2>&1 >junk"
eval echo xx $R 
```

顺便说一句，如果您希望将命令的标准错误重定向到文件，则必须重新排序重定向。 `cmd 2>&1 > file`会将 stderr 打印到原始 stdout，但`cmd > file 2>&1`会将 stderr 和 stdout 都指向指定文件。

# java - 参考和价值混淆

> ID：12701499
> 
> 赞同：0
> 
> 时间：2012-10-03T03:31:15.707
> 
> 标签：java, reference

嗨，我在 Stack Overflow 上阅读[了这个](https://stackoverflow.com/questions/40480/is-java-pass-by-reference)问题，并试图做一个例子。

我有以下代码：

```
public static void main(String[] args){
     int i = 5;
     Integer I = new Integer(5);

     increasePrimitive(i);
     increaseObject(I);

     System.out.println(i); //Prints 5 - correct
     System.out.println(I); //Still prints 5
     System.out.println(increaseObject2(I)); //Still prints 5

}

public static void increasePrimitive(int n){
     n++;
}

public static void increaseObject(Integer n){
     n++;
}

public static int increaseObject2(Integer n){
         return n++; 
} 
```

打印 5是否`increaseObject`因为引用的值在该函数内部发生了变化？我对吗？我很困惑为什么`increasedObject2`打印 5 而不是 6。

谁能解释一下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T03:36:03.120

在`increasedObject2()`功能上，

> 返回 n++；

它是后缀。所以在n = 5被返回后，它增加了n值，即n = 6。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T03:36:04.440

问题是`return n++;`n 返回然后只增加。如果您将其更改为`return ++n;`或，它将按预期工作`return n+1;`

但是您尝试测试的内容仍然无法使用，`Integer`因为它是不可变的。你应该尝试类似的东西 -

```
class MyInteger {
     public int value; //this is just for testing, usually it should be private

     public MyInteger(int value) {
         this.value = value;
     }
} 
```

这是可变的。

然后，您可以传递对该类实例的引用并`value`从调用的方法中对其进行变异（更改该实例中的值）。

改变方法——

```
public static void increaseObject(MyInteger n){
     n.value++;
} 
```

并称之为 -

```
MyInteger i = new MyInteger(5);    
increaseObject(i); 
```

# ssms - 如何绑定 F5 键以刷新 SQL Server Management Studio 中的对象资源管理器？

> ID：12701501
> 
> 赞同：11
> 
> 时间：2012-10-03T03:31:33.240
> 
> 标签：ssms

我遇到了一个问题，即在对象资源管理器中突出显示项目时按 F5 会启动调试，而不是刷新突出显示的对象的子元素。我能够使 F5 不再启动调试模式，但我无法找到绑定到 F5 以让对象资源管理器刷新节点的子元素的命令。有谁知道我该怎么做？我将不胜感激任何人都可以提供的任何建议。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-03T19:04:13.723

我想到了。

将 F5 绑定到的命令是 View.Refresh。软件的区域应该是“全球”。

或者，将键盘快捷键重置为默认值对我有用。

# php - 正确更新时间戳的时区

> ID：12701502
> 
> 赞同：2
> 
> 时间：2012-10-03T03:31:40.340
> 
> 标签：php, xml, last.fm

我正在使用 LastFM API 来提取用户最近收听的曲目 ( [http://www.last.fm/api/show/user.getRecentTracks](http://www.last.fm/api/show/user.getRecentTracks) )，并且正在努力改变时间戳以匹配我的首选时区。

我在代码的开头使用了**date_default_timezone_set ，但是当我使用****strtotime**时，这似乎被忽略了。我正在使用**strtotime**以便我可以重新格式化 Last.FM 提供的日期样式。

我已经想出了如何通过*$date - 14400*手动偏移到正确的时间，但我想了解我所缺少的并以正确的方式进行调整。

代码如下。非常感谢任何帮助。

```
<?php date_default_timezone_set('America/New York'); ?>
<?php $xml = simplexml_load_file("http://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user=rj&api_key=b25b959554ed76058ac220b7b2e0a026");
echo '<ul>';
foreach($xml->recenttracks->track as $track) {
    $title = $track->name;
    $date = $track->date;
    $date = strtotime($date);
    $date = date("F jS, g:i a e", $date);
    $string = '<li>'.$title.' - '.$date.'</li>';
    echo $string;}
echo '</ul>';
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T04:38:44.583

问题是您设置的默认时区用于传入和传出翻译。

要解决，请使用 PHP 时区函数，并在读取/写入时间时翻转它：

```
$oDateTime = new DateTime($track->date, new DateTimeZone(UTC'));
echo $oDateTime->format('F jS, g:i a e') . "\n";  // For debug: Will give the same back at you.

$oDateTime->setTimezone(new DateTimeZone('America/New York'));
$date = $oDateTime->format('Y-m-d H:i:sP') . "\n";   // Will give the converted date 
```

（您也可以使用 date_timesone_set 来完成，但这看起来更整洁）。

# javascript - 调用时 Javascript 代码不可用

> ID：12701507
> 
> 赞同：0
> 
> 时间：2012-10-03T03:32:35.603
> 
> 标签：javascript, jquery, ajax, asynchronous

> **可能重复：**
> [jQuery AJAX：成功时返回值](https://stackoverflow.com/questions/9055810/jquery-ajax-return-value-on-success)

当我尝试通过查询获取 JSON 文件时，我遇到了这个奇怪的参考问题：

```
 var themeData;
    $.getJSON("json/sample.js", function(data) {
                themeData = data.theme;
                        console.log(themeData.sample[0].description);
            }); 
   console.log(themeData.sample[0].description); 
```

第一个 console.log 有效，第二个无效。为什么会这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T03:34:52.243

这是第二个（按时间顺序在您的代码中）没有被击中。那是因为还没有设置。从服务器返回后，内部的回调`getJSON`被异步调用。

```
var themeData;

// FIRST -- themeData currently null
$.getJSON("json/sample.js", function(data) {

    // THIRD -- now themeData has a value, and gets logged
    themeData = data.theme;
    console.log(themeData.sample[0].description);
}); 

// SECOND -- themeData still null
console.log(themeData.sample[0].description); 
```

如果您真的需要在“之后”调用方法`getJSON`，那么请接受回调的想法。使用这样的东西。

```
var themeData;
function myCallback(data) {
    console.log(data.sample[0].description);
}
$.getJSON("json/sample.js", function(data) {
    themeData = data.theme;
    console.log(themeData.sample[0].description);
    myCallback(themeData);
}); 
```

**编辑**

您还可以强制同步调用，而不是使用`async: false`JQuery ajax 函数。

```
$.ajax({
  url: url,
  dataType: 'json',
  data: data,
  success: callback,
  async: false
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T03:35:45.003

No, `$.getJSON` is a async method, when the second `console.log` is called, there's no `themeData` at that time.

# c++ - 使用 C++ 更改注册表值？（系统命令失败）

> ID：12701509
> 
> 赞同：3
> 
> 时间：2012-10-03T03:32:42.823
> 
> 标签：c++, registry, command, system, editing

好吧，我一次又一次地被告知系统命令不好，但我需要更改注册表值，而且我的强项是批处理，所以我有一个命令可以做到这一点：

```
system("REG ADD "HKCU\Control Panel\Desktop" /V Wallpaper /T REG_SZ /F /D "C:\background.bmp"");
system("REG ADD "HKCU\Control Panel\Desktop" /V WallpaperStyle /T REG_SZ /F /D 0");
system("REG ADD "HKCU\Control Panel\Desktop" /V TileWallpaper /T REG_SZ /F /D 2");
system("%SystemRoot%\System32\RUNDLL32.EXE user32.dll, UpdatePerUserSystemParameters"); 
```

但是，使用它会使 Visual C++ 2010 Express 突出显示 HKCU 以及面板和桌面之间的斜线作为错误，并且不允许我编译或调试我的程序。我不想使用系统命令，所以我想知道如何使用 C++ 来执行相同的注册表命令？我不了解 WIN32 注册表 API ？？？

并且可以为此使用系统命令吗

```
system("%SystemRoot%\System32\RUNDLL32.EXE user32.dll, UpdatePerUserSystemParameters"); 
```

因为我不知道 C++ 是否可以在没有它的情况下执行相同的任务，如果它可以如何？？？

抱歉，我知道这是一个大问题，但如果可能的话，请您提供代码，我才刚刚开始，其他论坛都没有任何意义，我一直在寻找至少三个小时（我对计算机也不傻）！ ！

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T03:34:32.280

请使用[Win32 Registry API](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724875%28v=vs.85%29.aspx) !!!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T03:39:37.440

编写包含特殊字符的字符串文字需要一些额外的工作。例如，在您的代码中，`"`after`ADD`是字符串的结尾。

您需要在每个特殊字符（包括引号和退格）之前放置一个退格，以确保将它们放入字符串而不是由编译器处理。这称为*转义*。

结果将如下所示：

```
system("REG ADD \"HKCU\\Control Panel\\Desktop\" /V Wallpaper /T REG_SZ /F /D \"C:\\background.bmp\""); 
```

Using the Registry API is a better option for your task, of course, but you also needed to know how to write string literals properly.

# c# - 将逗号分隔的数据集拆分为单独的数组

> ID：12701512
> 
> 赞同：2
> 
> 时间：2012-10-03T03:33:05.100
> 
> 标签：c#

我有一个要修改的 .csv 文件。这是文件的格式：

```
 Id, UTMGridEast, UTMGridNorth, LocDate, LocTime, Species 
```

我已经做的是创建一个包含所有这些值的数组列表，但我想做的是创建一个包含所有值的数组列表，并且数据集中的每一行都是另一个数组。这是因为我需要编辑这些字段`UTMGridEast`，`UTMGridNorth`然后将它们重新插入到数组列表中。

我的 GUI 只包含两个按钮，到目前为止，这是我的代码：

```
public partial class MainWindow : Window
{
    private string _filename;

    private string[] _splitValues;

    public MainWindow()
    {
        InitializeComponent();
    }

private void btnLoad_Click(object sender, RoutedEventArgs e)
    {
        // Configure open file dialog box
        Microsoft.Win32.OpenFileDialog dlg = new Microsoft.Win32.OpenFileDialog();
        dlg.FileName = "Dataset"; // Default file name
        dlg.DefaultExt = ".txt"; // Default file extension
        dlg.Filter = "Commar Seperated Values (.csv)|*.csv" ; // Filter files by extension 

        // Show open file dialog box
        Nullable<bool> result = dlg.ShowDialog();

        // Process open file dialog box results 
        if (result == true)
        {
            // Open document 
            _filename = dlg.FileName;
            txtFilePath.Text = _filename;
        }
    }

    private void btnConvert_Click(object sender, RoutedEventArgs e)
    {
        ConvertToLatLong();
    }

    private void ConvertToLatLong()
    {
        string textFile = System.IO.File.ReadAllText(_filename);

        foreach (var value in textFile)
        {
            _splitValues = textFile.Split(',');
            Console.WriteLine("Split values: " + _splitValues[value]); 
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T03:39:43.243

首先，我将基于 NewLine 拆分文本，以获得单独的行，然后基于字段分隔符。

就像是

```
List<string> lines = new List<string>(textFile.Split(new[] { Environment.NewLine }, StringSplitOptions.None));
for (int iLine = 0; iLine < lines.Count; iLine++)
{
    List<string> values = new List<string>(lines[iLine].Split(new[] {","}, StringSplitOptions.None));
        for (int iValue = 0; iValue < values.Count; iValue++)
            Console.WriteLine(String.Format("Line {0} Value {1} : {2}", iLine, iValue, values[iValue]));
} 
```

但正如我一直所说，滚动您自己的 CSV 解析器非常困难。

查看[逗号分隔值](http://en.wikipedia.org/wiki/Comma-separated_values)

具体在**基本规则和示例部分**

我推荐的是[C# Tutorial - Using The Built In OLEDB CSV Parser](http://www.switchonthecode.com/tutorials/csharp-tutorial-using-the-built-in-oledb-csv-parser)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T03:39:46.973

我不确定是什么类型`_splitValues`，但假设 a`List<String[]>`会起作用：

```
private void ConvertToLatLong()
{
    var lines = from line in System.IO.File.ReadLines("foo")
                let splitLine = line.Split(',')
                select splitLine.Select(x => x.Trim()).ToArray();
    _splitValues = lines.ToList();
} 
```

# ruby-on-rails - Rails：如何链接到双嵌套资源，使其属于前 2 级？

> ID：12701513
> 
> 赞同：0
> 
> 时间：2012-10-03T03:33:24.573
> 
> 标签：ruby-on-rails

我正在尝试制作相册网络应用程序。有 3 个模型：用户、相册、图片。

配置/路由

```
Pholder::Application.routes.draw do
resources :users do
  resources :albums do
    resources :photos
  end
end 
```

我设法创建用户并在用户下制作专辑，如您在专辑#show 的 URL 中所见：

`http://localhost:3000/users/20/albums/94`（没问题）

但是，在该页面上，我想创建一个链接以在所有用户名下的相册下创建照片（其 URL 类似于 /users/20/albums/94/photos/new），并按照我的`rake routes`做法有一条`new_album_photo`路。这是我的相册/显示视图

显示.html.erb

```
<% if @album.photos.any? %>
yes  pics
<% else %>
no  pics
<% end %>

<%= link_to "Upload new pics!", new_album_photo_path(@album) %> 
```

但是，当我单击它时，会出现两个问题。

1.  我收到错误：`No route matches [GET] "/albums/94/photos/new"`
2.  该 URL 中没有 user_id `http://localhost:3000/albums/94/photos/new`...... 我的模型可能是造成这种情况的原因吗（因为根据我的模型，专辑由多个用户拥有？我不确定是否应该删除连接表，只让`Album`模型成为连接表（也许连接表是罪魁祸首?)

这可能是因为我的模型吗？还是我在路由助手中传递了错误的参数？

这是我的模型以防万一。楷模：

```
class User < ActiveRecord::Base

  has_secure_password
  attr_accessible :email, :name, :password, :password_confirmation
  validates_presence_of :password, :on => :create

  validates_format_of :name, :with => /[A-Za-z]+/, :on => :create
  validates_format_of :email, :with => /\A([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})\Z/i, :on => :create
  validates_length_of :password, :minimum => 5, :on => :create

  has_many :album_user
  has_many :albums, :through => :album_user
  accepts_nested_attributes_for :albums

end

class AlbumUser < ActiveRecord::Base
  belongs_to :album
  belongs_to :user
end

class Album < ActiveRecord::Base
  attr_accessible :avatar, :name, :description
  has_many :album_user
  has_many :users, :through => :album_user
  has_many :photos
end

class Photo < ActiveRecord::Base
  belongs_to :album
end 
```

路线

```
 user_albums GET    /users/:user_id/albums(.:format)            albums#index
                 POST   /users/:user_id/albums(.:format)            albums#create
  new_user_album GET    /users/:user_id/albums/new(.:format)        albums#new
 edit_user_album GET    /users/:user_id/albums/:id/edit(.:format)   albums#edit
      user_album GET    /users/:user_id/albums/:id(.:format)        albums#show
                 PUT    /users/:user_id/albums/:id(.:format)        albums#update
                 DELETE /users/:user_id/albums/:id(.:format)        albums#destroy
           users GET    /users(.:format)                            users#index
                 POST   /users(.:format)                            users#create
    new_user GET    /users/new(.:format)                        users#new
       edit_user GET    /users/:id/edit(.:format)                   users#edit
            user GET    /users/:id(.:format)                        users#show
                 PUT    /users/:id(.:format)                        users#update
                 DELETE /users/:id(.:format)                        users#destroy
    album_photos GET    /albums/:album_id/photos(.:format)          photos#index
                 POST   /albums/:album_id/photos(.:format)          photos#create
 new_album_photo GET    /albums/:album_id/photos/new(.:format)      photos#new
edit_album_photo GET    /albums/:album_id/photos/:id/edit(.:format) photos#edit
     album_photo GET    /albums/:album_id/photos/:id(.:format)      photos#show
                 PUT    /albums/:album_id/photos/:id(.:format)      photos#update
                 DELETE /albums/:album_id/photos/:id(.:format)      photos#destroy
          albums GET    /albums(.:format)                           albums#index
                 POST   /albums(.:format)                           albums#create
       new_album GET    /albums/new(.:format)                       albums#new
      edit_album GET    /albums/:id/edit(.:format)                  albums#edit
           album GET    /albums/:id(.:format)                       albums#show
                 PUT    /albums/:id(.:format)                       albums#update
                 DELETE /albums/:id(.:format)                       albums#destroy
            root        /                                           users#index
           about        /about(.:format)                            home#about
            help        /help(.:format)                             home#help
         contact        /contact(.:format)                          home#contact 
```

如果您需要更多文件，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T04:02:57.973

你的`routes.rb`文件应该是这样的（额外的`end`）：

```
Pholder::Application.routes.draw do

  resources :users do
    resources :albums do
      resources :photos
    end
  end

end 
```

`album.rb`应该是这样的（`:album_users`不是`:album_user`）：

```
class Album < ActiveRecord::Base
  has_many :album_users
  has_many :users, :through => :album_users
  has_many :photos
end 
```

`user.rb`应该是这样的（`:album_users`不是`:album_user`），您可以通过这种方式添加照片关系：

```
class User < ActiveRecord::Base
  has_many :album_users
  has_many :albums, :through => :album_users
  has_many :photos, :finder_sql =>  proc {"select * from photos inner join albums on albums.id = photos.album_id inner join album_users on album_users.album_id = albums.id where album_users.user_id = #{id}"}

  accepts_nested_attributes_for :albums
end 
```

你应该看到`new_user_album_photo`你的`routes.rb`并像这样使用它：

```
new_user_album_photo_path(@user, @album) 
```

您可以像这样在控制台中测试您的路线：

```
app.new_user_album_photo_path(User.first, Album.first) 
```

它应该返回：

```
=> "/users/1/albums/1/photos/new" 
```

# ios6 - Passbook中类似通行证的展示问题（iOS6）

> ID：12701515
> 
> 赞同：0
> 
> 时间：2012-10-03T03:33:47.833
> 
> 标签：ios6, passbook

我制作了两个具有相同passTypeIdentifier和不同序列号的示例优惠券pkpass，添加到Passbook后，它们被排列在一起，如下图所示：

[左右优惠券](https://plus.google.com/photos/109557389305865116139/albums/5794918454723321793?authkey=CLLCibfsuqeKGQ)

我可以在存折中滑动以选择这两个通行证。有谁知道为什么会发生这种情况以及如何将这两个通行证分开为存折中的单通行证？谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T06:10:19.643

它们具有相同的标识符和相同的样式：优惠券。具有相同 passTypeIdentifier 但不同样式的传递不会以这种方式分组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T10:29:39.537

我相信发生这种情况是因为它们具有相同的 passTypeIdentifier

# android - 在 GridView 上滚动画线

> ID：12701517
> 
> 赞同：0
> 
> 时间：2012-10-03T03:33:56.087
> 
> 标签：android, gridview, scroll, paint

我有一种情况，我在 GridView 上绘制（绘制）了一条线。感谢某人的出色帮助，我在继承自 GridView 的类中重写了 dispatchPaint() 方法。在这种情况下，网格实际上是一个日历，并且正在绘制的日历比屏幕上实际显示的要多。

如果我滚动日历（GridView），画线不会随之滚动。所以我想我要么必须自己滚动线条，要么通过其他方法绘制线条，以便它与视图更紧密地关联。

有谁知道如何做到这一点？

# python - 如何以更清洁的方式进行多个字符串替换？- Python

> ID：12701520
> 
> 赞同：2
> 
> 时间：2012-10-03T03:34:24.297
> 
> 标签：python, string, whitespace, tokenize, replace

做多个string.replace的快速方法是什么？我正在尝试添加空格以缩短英语单词，例如

```
he'll -> he 'll
he's -> he 's
we're -> we 're
we've -> we 've 
```

我也在之前和标点符号之间添加空格：

```
"his majesty" ->  " his majesty " 
his; majesty -> his ; majesty 
```

有更快更清洁的方法吗？就目的而言，这有点太慢了，但我一直在这样做：

```
def removeDoubleSpace(sentence):
  sentence.replace("  ", " ")
  if "  " in sentence:
    removeDoubleSpace(sentence)

def prepro(sentence):
  sentence = sentence.replace(",", " ,")
  sentence = sentence.replace(";", " ; ")
  sentence = sentence.replace(":", " : ")
  sentence = sentence.replace("(", " ( ")
  sentence = sentence.replace("(", " ) ")
  sentence = sentence.replace("‘"," ‘ ")
  sentence = sentence.replace('"',' " ')
  sentence = sentence.replace("'re", " 're")
  sentence = sentence.replace("'s", " 's")
  sentence = sentence.replace("'ll", " 'll")
  sentence = removeDoubleSpace(sentence)
  return sentence 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T03:40:05.520

您可以使用一些正则表达式来完成相同的任务：

```
import re

# Replace multiple consecutive spaces with a single space
# Example: "One Two  Three    Four!" -> "One Two Three Four!"
sentence = re.sub(' +', ' ', sentence)    

# Surround each instance ; : ( ) ‘ and " with spaces
# Example: '"Hello;(w)o:r‘ld"' -> " Hello ;  ( w ) o : r ‘ ld "
sentence = re.sub('([;:()‘"])', ' \\1 ', sentence)

# Insert a space before each instance of , 's 're and 'll
# Example: "you'll they're, we're" -> "you 'll they 're , we 're"
sentence = re.sub("(,|'s|'re|'ll)", ' \\1', sentence)

return sentence 
```

# django - Facebook 的 django-social-auth 正在重定向主页而不是登录

> ID：12701522
> 
> 赞同：1
> 
> 时间：2012-10-03T03:34:34.343
> 
> 标签：django, oauth, facebook-oauth, django-socialauth

我已经让 django-social-auth 为 Google 工作了很长一段时间，但在使用 Facebook 时遇到了问题。

我现在点击 /login/facebook/ 链接将带我进入 Facebook 授权页面。然后我单击“转到应用程序”，它会将我重定向到我的主页，但不会登录或创建用户，但会在我的 URL 后面添加一些奇怪的“# *= ”。*

在此处阅读[https://developers.facebook.com/blog/post/552/](https://developers.facebook.com/blog/post/552/)和此处[https://github.com/omab/django-social-auth/issues/199](https://github.com/omab/django-social-auth/issues/199)，似乎是如果未定义重定向 uri，则会发生这种情况。但是，在我的 facebook 应用程序设置中，我有以下内容（用 example.com 替换我的网站）：
- 应用程序命名空间：“example”
- 站点 URL：“http://example.com/complete/facebook/”
- 站点域：“example.com”
- 沙盒模式：“开”
- 授权后重定向 URL：“http://apps.facebook.com/example/”
- 取消授权 URL：“http://www.example.com/”
- 授权后 URL：“http://example.com/complete/facebook/”

django-social-auth 发送给 facebook 的请求是（再次替换我的信息）：“https://www.facebook.com/dialog/oauth?scope=email&state= ***** &redirect_uri=http%3A%2F%2Fexample. com%2Fcomplete%2Ffacebook%2F%3Fredirect_state%3D* ****&client_id= ***** "

/complete/facebook/ 是文档中的内容，谷歌作为 /complete/google/ 工作

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T23:54:08.463

我的基本问题在 urls.py 中。我有一个包罗万象的 URL，不幸的是它也捕获了“/complete/facebook/”。谷歌没有被抓到，因为网址中有一个“-”。
可能不相关，但我也删除了我的 deauthorize/post-authorize url，并将我的站点 url 更改为[http://www.example.com/](http://www.example.com/)（注意 www）。
根据[http://developers.facebook.com/bugs/318390728250352?browse=search_5040e171d3ac02944460198，“#_=_](http://developers.facebook.com/bugs/318390728250352?browse=search_5040e171d3ac02944460198) ”的东西看起来像一个持续存在的错误，只需手动删除

# php - 基于逗号分隔值条件的 SQL 查询？

> ID：12701525
> 
> 赞同：0
> 
> 时间：2012-10-03T03:35:00.573
> 
> 标签：php, mysql

> **可能重复：**
> [MySQL 选择多个值](https://stackoverflow.com/questions/3749933/mysql-select-multiple-values)

假设我有一组像 (3,2,5) 这样的数字，我用来分割它们并搜索 mysql 以获取值的正常方法是在 PHP 中使用爆炸来分割它们

例子

```
$string = '3,4,5';
$array = explode(',',$string);
foreach($array as $value){
    $query = 'SELECT ID FROM TABLE WHERE ID = "'.$value.'"';
} 
```

它像这样工作，但它使脚本非常慢

我现在需要是否可以将此字符串拆分为它自己的查询并返回结果而不使用 PHP 循环？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T03:37:09.873

使用`IN`,

```
$string = '3,4,5';
$query = "SELECT ID FROM TABLE WHERE ID IN ($string)"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T03:37:14.367

为什么不是一个`WHERE ... IN ...`？

```
select ID from TABLE where ID in (3,4,5) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T03:38:24.957

如果您的 $string 变量是：

```
$string = '3,4,5'; 
```

尝试像这样构建您的查询：

```
$query = 'SELECT ID FROM TABLE WHERE ID in (".$string.")'; 
```

你不需要一个循环。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T03:43:35.350

您可以使用`IN`运算符。

此外，请确保应用正确的转义（在这种情况下，这无关紧要，但在通过 Web 请求提交字段时会这样做）：

```
$string = '3,4,5';
$array = explode(',', $string);

// cast all array elements into integers
$numbers = join(',', array_map('intval', $array));

$query = "SELECT ID FROM TABLE WHERE ID IN ($numbers)"; 
```

另一种奇特的方法是使用准备好的语句：

```
$placeholders = join(',', array_fill(0, count($array), '?'));
$query = "SELECT ID FROM TABLE WHERE ID IN ($placeholders)"; 
```

然后要执行查询，您将像这样绑定数字（PDO 示例）：

```
// prepare the query, looks like 'WHERE ID IN (?,?,?)'
$stmt = $db->prepare($query);
// execute the query and pass the array values
$stmt->execute($array); 
```

# svn - 当父母更新时，SVN 更新工作副本

> ID：12701528
> 
> 赞同：0
> 
> 时间：2012-10-03T03:35:29.430
> 
> 标签：svn, version-control

我有两个 SVN 分支，我计划将第一个工作副本部分复制到另一个。我这样做了：

1.  库 /home/user/projects/libs/{lib1, lib2, lib3}
2.  核心 /home/user/projects/Apps/{libs,core}

```
    svn copy --parents /home/user/projects/libs/lib1/* /home/user/projects/Apps/libs/1
    svn copy --parents /home/user/projects/libs/lib2/* /home/user/projects/Apps/libs/2
    svn copy --parents /home/user/projects/libs/lib3/* /home/user/projects/Apps/libs/3

```

问题：我的同行仍在处理 /home/user/projects/libs/lib1，当这个存储库用新代码更新时，我希望我的 /home/user/projects/Apps/libs 也更新。有没有办法“自动”做到这一点？

我尝试使用相同的 svn copy 命令，当然它失败了： svn: Path '/home/user/projects/Apps/libs/1' already exists

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T03:38:50.543

我只能考虑合并：`svn help merge`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T05:40:52.720

不，它不会自动更新。

您可以考虑`svn:externals`改用

# vb.net - 动态实例化使用数据集生成器创建的表适配器

> ID：12701538
> 
> 赞同：0
> 
> 时间：2012-10-03T03:36:24.600
> 
> 标签：vb.net, reflection, tableadapter, msdatasetgenerator

我有许多存储过程。我使用 .net 服务器资源管理器和数据集生成器来创建表适配器和表对。

现在在我的代码中，我想根据用户从列表中选择的选项（他们选择的报告对应于存储过程和表适配器）动态实例化这些表适配器。

问题是我似乎无法正确实例化表适配器。该表工作正常，当我使用表适配器时，我可以在运行时深入了解属性，甚至可以找到并调用填充方法，但是当我尝试设置连接字符串时，我无法使用 getproperty 找到它。有没有人有一个适用于如何做到这一点的例子？我尝试了一些在网上找到的示例，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T21:21:00.987

弄清楚了。当 .Net 在后面的代码中为 msDataSetGenerator 创建表适配器时，它将 Connection 属性声明为 Friend 而不是 Public。当我将其更改为 Public 时，我可以像其他声明为 public 的属性/方法一样通过反射获取和设置它。

发现这一点后，我想知道将连接字符串的获取/设置更改为公共是否真的存在安全风险......

# pthreads - 为考试而学习，寻找解释。pthread_join。这段代码在做什么？

> ID：12701539
> 
> 赞同：0
> 
> 时间：2012-10-03T03:36:26.770
> 
> 标签：pthreads

我正在看这段代码：

```
/* 04-join.c

Simple illustration of dividing work among two threads

pthread.h should be first otherwise compile with -D_THREAD_SAFE 
*/
#include <pthread.h>
#include <stdio.h>
#include <stdlib.h>

typedef struct {
   int *ar;
   long n;
   int id;
   int sum;
} subarray;

void *incer(void *arg) {
  long i;
   int id = ((subarray*)arg)->id;

   printf("Start thread: %d sum=%ld\n",id, ((subarray*)arg)->sum);
   for (i = 0; i < ((subarray*)arg)->n; i++) {
      ((subarray*)arg)->ar[i]++;
      ((subarray*)arg)->sum++;
   }
   printf("Terminating thread: %d sum=%ld\n",id, ((subarray*)arg)->sum);
   pthread_exit(NULL);
}

int main() {
   int ar[1000000];
   pthread_t th1, th2;
   subarray sb1, sb2;

   sb1.ar = &ar[0];
   sb1.n  = 500000;
   sb1.id = 1;
   sb1.sum = 0;
   pthread_create(&th1, NULL, incer, &sb1);

   sb2.ar = &ar[500000];
   sb2.n  = 500000;
   sb2.id = 2;
   sb2.sum = 0;
   pthread_create(&th2, NULL, incer, &sb2);

   pthread_join(th1, NULL);
   pthread_join(th2, NULL);
   printf("Terminating main: %d sum=%d\n",getpid(),sb1.sum+sb2.sum);
   pthread_exit(NULL);
   return 0;
} 
```

我的问题是，在 for 循环中的函数 incer 中。我们有一段代码

```
((subarray*)arg)->ar[i]++; 
```

在子数组中，结构 ar 是一个指向整数的指针，对吗？那么 ar[i]++ 有什么作用呢？为什么要这样做？它是在模拟这个线程的“完成的工作”，同时增加总和吗？

还有一个小问题。incer前面的“void *”的目的是什么？我错过了关于 void * 的重要性的部分。

是不是意味着，这个指针指向了incer函数的地址。并且通过创建函数创建了一个名为“incer”的void *，我们可以在创建线程时使用它来引用这段代码，所以它知道要执行这段代码吗？

另外，为什么要使用 pthreads？进程线程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T03:53:16.180

Incer 被声明为 void* 的返回类型允许它在退出时返回一个值，然后通过 pthread_join'ing 线程检索该值。返回值可能必须在堆上分配并强制转换为 (void*)。在这种情况下，线程没有返回任何值，并且主进程不期望返回值，因为 pthread_join 正在使用 NULL 参数调用。

ar 可以是指向单个整数的指针，但也可以是指向整数数组的指针。在这种情况下，它是一个整数数组。

((子数组*)arg)->ar[i]++; 将索引 i 处的整数加 1。

# windows - Qt App 在 MacOSX 上运行良好，在 Windows 上访问冲突

> ID：12701541
> 
> 赞同：4
> 
> 时间：2012-10-03T03:36:31.007
> 
> 标签：windows, qt, exception, qt4, access-violation

所以我偶然发现了一个我暂时无法解决的问题。我正在用 C++ 编写一个 Qt 应用程序，并且一直在 MacOSX 上进行开发，它运行良好。但是，当我在 Windows 中测试代码时，当我关闭或取消我拥有的 QDialog 子时，我遇到了以下访问冲突：

`Unhandled exception at 0x5ce6b1ea (QtGuid4.dll) in MyApp.exe: 0xC0000005: Access violation reading location 0xfeeefefa.`

调试这个，我看到它在很多 Qt api 调用后崩溃，最终进入 QWindowSurface_Raster.cpp。这是它崩溃的 Qt 库代码：

```
#endif
{
    QPoint wOffset = qt_qwidget_data(widget)->wrect.topLeft();

    HDC widget_dc = widget->getDC();

    QRect wbr = br.translated(-wOffset);
    BitBlt(widget_dc, wbr.x(), wbr.y(), wbr.width(), wbr.height(),
/*CRASH HERE!*/   d->image->hdc, br.x() + offset.x(), br.y() + offset.y(), SRCCOPY);
        widget->releaseDC(widget_dc);
    } 
```

最后，这是我调用 qdialog 的代码：

```
void MainWindow::prefDialog()
{
        prefD = new PreferenceDialog(this);
        prefD->exec();
} /* crashes here, after I hit cancel/ok on dialog and it leaves exec */ 
```

首选项对话框.h：

```
class PreferenceDialog : public QDialog
{
    Q_OBJECT

public:
    PreferenceDialog(QWidget *parent);
..... 
```

首选项对话框.c

```
PreferenceDialog::PreferenceDialog(QWidget *parent) :
    QDialog(parent)
{
....
connect(okayButton, SIGNAL(released()), this, SLOT(okayClicked()));
connect(addKeyButton, SIGNAL(released()), this, SLOT(addClicked()));
connect(cancelButton, SIGNAL(released()), this, SLOT(cancelClicked()));
    .... 
```

我可以向您展示我的 PreferenceDialog 代码或任何其他代码，但我认为它只会让事情变得臃肿。PreferenceDialog 除了显示之外并没有做太多的事情，而且我没有覆盖任何函数，如 exec() 等。堆栈跟踪也很臃肿，所以我现在不会发布，它只是 exec() 之后的一堆 Qtguid4.dll 调用完成，（大约 10 个）直到它在 QWindowRaster 中发生崩溃。

让我知道是否需要任何其他信息。我是 Qt 的新手，所以很难弄清楚这一点，任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T17:23:53.517

我正在调用 QDialog::destroy() 来关闭窗口，而不是 QDialog::close()。当 Qt 完成 QDialog::exec() 并导致 Windows 崩溃时，这会导致空指针异常。更改对 close() 的调用解决了这个问题。

感谢 HostileFork 的建议

# dynamics-nav - 如何在 RTC 报告中添加流场？

> ID：12701543
> 
> 赞同：0
> 
> 时间：2012-10-03T03:37:00.343
> 
> 标签：dynamics-nav

如何总结 Microsoft Dynamic NAV 中的流场并在 RTC 报告中显示？

谢谢你的帮助，马卡拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T17:44:03.380

当您在 NAV 中定义报告时，所有计算都在 NAV 中完成，然后数据传输到报告查看器。这意味着您需要确保在 NAV 中创建 FlowFields 时使用 CalcFields(fieldname) 计算它们。因此，您必须控制经典报告（假设您的问题是关于 NAV 2009，因为术语 RTC 不再与 NAV 2013 一起使用，因为 2013 只有“rtc”）正确打印计算字段。

然后在 RDLC 报表设计器中，您可以“按原样”使用该字段。这里不需要做任何特别的事情。

/埃里克

# c - icc -fast 标志的错误结果

> ID：12701544
> 
> 赞同：1
> 
> 时间：2012-10-03T03:37:04.880
> 
> 标签：c, optimization, compilation, compiler-optimization, icc

现在我正在使用 icc 来编译和运行我的 ANSI C 代码。

当我打开 -O2 优化时，一切正常。但是当我更改为 -fast 时，结果会出现分歧（有很多 nan）。

我google了一下，发现-fast中存在-xHOST的错误原因。

我想知道 -xHOST 在编译中是如何工作的。以及如何避免我的代码中出现这种错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T04:33:38.037

-fast 打开下面的许多激进编译器选项来自英特尔文档

```
Description
This option maximizes speed across the entire program. It sets the following options:
• On Itanium®-based systems: Windows: /O3 and /Qipo Linux: -ipo, -O3, and -static
• On IA-32 and Intel® EM64T systems:
Mac OS: -ipo, -O3, -no-prec-div, and -static
Windows: /O3, /Qipo, /Qprec-div-, and /QxP
Linux: -ipo, -O3, -no-prec-div, -static, and -xP
Note that programs compiled with the -xP (Linux) or /QxP (Windows) option will detect non-compatible processors and generate an error message during execution.
On IA-32 and Intel® EM64T systems, the -xP or /QxP option that is set by the fast option cannot be overridden by other command line options. If you specify the fast option and a different processor-specific option, such as -xN (Linux) or /QxN (Windows) 
```

其中 -xHost

```
Generates instruction sets up to the highest that is supported by the compilation host. On Intel processors, this corresponds to the most suitable /Qx (-x) option; on compatible, non-Intel processors, this corresponds to the most suitable of the /arch (-m) options IA32, SSE2 or SSE3\. This option may result in additional optimizations for Intel microprocessors that are not
performed for non-Intel microprocessors.‡ 
```

因此，如果问题出在 -xHost 上，请查看是否为您的处理器的正确架构类型强制执行 -march 可以修复错误或仅使用 -O3

# c# - 使用 HttpWebRequest.GetResponseAsync 进行异步和等待

> ID：12701545
> 
> 赞同：24
> 
> 时间：2012-10-03T03:37:07.060
> 
> 标签：c#, windows-8, windows-runtime, httpwebrequest, async-await

我在发出 Web 请求时尝试使用 Async 和 Await，但发现它永远不会超过 await 行。我是从 Metro 应用程序中执行此操作的，但我也在 winforms 应用程序中验证了该问题。

```
public async Task<string> DoSomething()
{
    string url = "http://imgur.com/gallery/VcBfl.json";
    HttpWebRequest request = HttpWebRequest.CreateHttp(url);

    var ws = await request.GetResponseAsync();

    return ws.ResponseUri.ToString(); ;
} 
```

如果我不使用 await 而是执行同步等待，它可以工作，但我需要它异步运行。

我在这段代码中遗漏了什么导致等待永远不会返回？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-03T04:31:15.243

我怀疑在你的调用堆栈中，你要么在调用，要么`Wait`在`Result`返回的`Task`. [正如我在博客中所描述的那样，这将导致死锁](http://blog.stephencleary.com/2012/07/dont-block-on-async-code.html)。

请遵循以下最佳实践来避免死锁：

1.  不要阻塞`async`代码；一直使用`async`下去。
2.  在您的“库”方法中，使用`ConfigureAwait(false)`.

# javascript - jQuery Tricky 事情，顶部滑块更改为从右侧滑动

> ID：12701549
> 
> 赞同：1
> 
> 时间：2012-10-03T03:37:31.777
> 
> 标签：javascript, jquery, html, css, slide

![印在图片上的主要问题](../Images/2e3ebf3cd73ee48f1138f6fa71a1f78e.png)

Okey My 是 Photoshop 上的 Web 设计，其他程序员或编码人员让它变得生动起来。我一直在想，为什么我不能自己做。所以这是我的第一个项目，但 jQuery 不是我的菜。所以我请大家帮忙。请帮帮我：D

jQuery

```
/*
 * jQuery Color Animations
 * Copyright 2007 John Resig
 * Released under the MIT and GPL licenses.
 */

(function(jQuery){

    // We override the animation for all of these color styles
    jQuery.each(['backgroundColor', 'borderBottomColor', 'borderLeftColor', 'borderRightColor', 'borderTopColor', 'color', 'outlineColor'], function(i,attr){
        jQuery.fx.step[attr] = function(fx){
            if ( fx.state == 0 ) {
                fx.start = getColor( fx.elem, attr );
                fx.end = getRGB( fx.end );
            }

            fx.elem.style[attr] = "rgb(" + [
                Math.max(Math.min( parseInt((fx.pos * (fx.end[0] - fx.start[0])) + fx.start[0]), 255), 0),
                Math.max(Math.min( parseInt((fx.pos * (fx.end[1] - fx.start[1])) + fx.start[1]), 255), 0),
                Math.max(Math.min( parseInt((fx.pos * (fx.end[2] - fx.start[2])) + fx.start[2]), 255), 0)
            ].join(",") + ")";
        }
    });

    // Color Conversion functions from highlightFade
    // By Blair Mitchelmore
    // http://jquery.offput.ca/highlightFade/

    // Parse strings looking for color tuples [255,255,255]
    function getRGB(color) {
        var result;

        // Check if we're already dealing with an array of colors
        if ( color && color.constructor == Array && color.length == 3 )
            return color;

        // Look for rgb(num,num,num)
        if (result = /rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(color))
            return [parseInt(result[1]), parseInt(result[2]), parseInt(result[3])];

        // Look for rgb(num%,num%,num%)
        if (result = /rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(color))
            return [parseFloat(result[1])*2.55, parseFloat(result[2])*2.55, parseFloat(result[3])*2.55];

        // Look for #a0b1c2
        if (result = /#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(color))
            return [parseInt(result[1],16), parseInt(result[2],16), parseInt(result[3],16)];

        // Look for #fff
        if (result = /#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(color))
            return [parseInt(result[1]+result[1],16), parseInt(result[2]+result[2],16), parseInt(result[3]+result[3],16)];

        // Otherwise, we're most likely dealing with a named color
        return colors[jQuery.trim(color).toLowerCase()];
    }

    function getColor(elem, attr) {
        var color;

        do {
            color = jQuery.curCSS(elem, attr);

            // Keep going until we find an element that has color, or we hit the body
            if ( color != '' && color != 'transparent' || jQuery.nodeName(elem, "body") )
                break; 

            attr = "backgroundColor";
        } while ( elem = elem.parentNode );

        return getRGB(color);
    };

    // Some named colors to work with
    // From Interface by Stefan Petre
    // http://interface.eyecon.ro/

    var colors = {
        aqua:[0,255,255],
        azure:[240,255,255],
        beige:[245,245,220],
        black:[0,0,0],
        blue:[0,0,255],
        brown:[165,42,42],
        cyan:[0,255,255],
        darkblue:[0,0,139],
        darkcyan:[0,139,139],
        darkgrey:[169,169,169],
        darkgreen:[0,100,0],
        darkkhaki:[189,183,107],
        darkmagenta:[139,0,139],
        darkolivegreen:[85,107,47],
        darkorange:[255,140,0],
        darkorchid:[153,50,204],
        darkred:[139,0,0],
        darksalmon:[233,150,122],
        darkviolet:[148,0,211],
        fuchsia:[255,0,255],
        gold:[255,215,0],
        green:[0,128,0],
        indigo:[75,0,130],
        khaki:[240,230,140],
        lightblue:[173,216,230],
        lightcyan:[224,255,255],
        lightgreen:[144,238,144],
        lightgrey:[211,211,211],
        lightpink:[255,182,193],
        lightyellow:[255,255,224],
        lime:[0,255,0],
        magenta:[255,0,255],
        maroon:[128,0,0],
        navy:[0,0,128],
        olive:[128,128,0],
        orange:[255,165,0],
        pink:[255,192,203],
        purple:[128,0,128],
        violet:[128,0,128],
        red:[255,0,0],
        silver:[192,192,192],
        white:[255,255,255],
        yellow:[255,255,0]
    };

})(jQuery); 
```

html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="stylesheet" href="css/temp.css" type="text/css" />
<title>Nofu entertainment</title>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $(".btn-slide").click(function(){
        $("#panel").slideToggle("slow");
        $(this).toggleClass("active"); return false;
    }); 
});
</script>
</head>
<body>
    <div id="main">
<div id="panel">
    <!-- you can put content here -->
</div>
<p class="slide"><a href="#" class="btn-slide">Slide Panel</a></p>
    </div>
</body>
</html> 
```

CSS

```
body {
    margin: 0 auto;
    padding: 0;
    width: 570px;
    font: 75%/120% Arial, Helvetica, sans-serif;
}
a:focus {
    outline: none;
}
#main {
    margin: 100px 0;
    width: 570px;
    height: 570px;
}
#panel {
    background: #754c24;
    height: 200px;
    display: none;
}
.slide {
    margin: 0;
    padding: 0;
    border-top: solid 4px #422410;
    background: url(../images/btn-slide.gif) no-repeat center top;
}
.btn-slide {
    background: url(../images/white-arrow.gif) no-repeat right -50px;
    text-align: center;
    width: 144px;
    height: 31px;
    padding: 10px 10px 0 0;
    margin: 0 auto;
    display: block;
    font: bold 120%/100% Arial, Helvetica, sans-serif;
    color: #fff;
    text-decoration: none;
}
.active {
    background-position: right 12px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T06:12:55.923

[jsFiddle](http://jsfiddle.net/afshinprofe/5c49W/1/)

HTML：

```
 <div class="container">
  <div rel="1" class="box">1</div>
  <div rel="2" class="box">2</div>
  <div rel="3" class="box">3</div>
  <div rel="4" class="box">4</div>
  <div rel="5" class="box">5</div>
  <div rel="6" class="box">6</div>
 </div>
 <div class="slidepanel">
  <div class="closebtn">X</div>
  <div class="content"></div>
 </div>​ 
```

CSS：

```
.container{
    width:400px;
    float:right;
    margin-right:100px;
}
.box{
    width:70px;
    height:45px;
    background:orange;
    float:right;
    margin:20px;
    border-radius:7px;
    text-align:center;
    padding-top:25px;
}
.slidepanel{
    position:absolute;
    right:0;
    background:brown;
    width:0px;
    height:300px;
}
.closebtn{

    color:white;
    width:20px;
    height:20px;
    background:red;
    right:0;
    text-align:center;
}
.content{
    font-size:60px;
    color:white;
    text-align:center;
    padding-top:50px;
}
​ 
```

查询：

```
$('.box').click(function(){
  $('.slidepanel').animate({"width":"500px"},1000);
  var i=$(this).attr('rel');
  $(".content").html(i);
});
$('.closebtn').click(function(){
  $('.slidepanel').animate({"width":"0px"},1000);
}); 
```

​</p>

# javascript - JS 在滚动时淡出（不透明度） - 在 IE 中不起作用

> ID：12701555
> 
> 赞同：0
> 
> 时间：2012-10-03T03:38:37.513
> 
> 标签：javascript, jquery, css

我得到了一个简单的脚本，它很好地适用于 FF 和 Chrome，但 IE 也一直是 Partypooper。有什么想法/建议吗？

HTML

```
<div class="title">
    <p>Change is the law of life.<br />And those who look only to the past or present<br />are certain to miss the future.</p>
</div> 
```

CSS

```
div.title {
position: fixed;
z-index: 10;
text-align:center;
margin:0 auto;
top: 230px;
width: 100%;
color: #FFFFFF;
} 
```

JS

```
<script type="text/javascript">  
$(document).ready(function(){
var didScroll = false;
var icon = $(".title");
var $window = $(window);
$(window).scroll(function(){
didScroll = true;
});

window.setInterval(function () {
if (didScroll) {
  if (1-$window.scrollTop()/800 > -10) {
      icon.css({opacity: 1-$window.scrollTop()/800});
  }
  didScroll = false;
}
}, 50);
});
</script> 
```

# r - 选择高于 x 的值会从矩阵表中给出错误的结果。有人可以解释为什么吗？

> ID：12701557
> 
> 赞同：1
> 
> 时间：2012-10-03T03:38:43.130
> 
> 标签：r

我是 R 新手，我正在使用 Shapiro-Wilk 测试来测试一组数据的正态性。我的问题不在于使用测试，而在于生成结果表来识别 p 值大于 0.05 的结果行。为了说明我的问题，我使用了 golub 数据集，它给出了来自“ALL”和“AML”患者的一系列基因表达值。

我所做的如下：

```
library (multtest)
data (golub)
gol.fac <- factor(golub.cl,levels=0:1, labels= c("ALL","AML"))

# the golub dataset has the expression values for 3051 genes so I've decided to use only the first 10 genes from the dataset to make it easier to work with
ALL10 <- golub[1:10, gol.fac=="ALL"]

# calculate Shapiro-Wilk test for normality
sh10 <- apply (ALL10, 1, function(x) shapiro.test(x)$p.value)

# get the names of the first 10 genes from the golub.gnames matrix
ALL10names <- golub.gnames[1:10,2]

# combine gene names with normality p-value scores 
list10 <- cbind(ALL10names,sh10)

# find those that have normal distribution
normdist<- list10[,2]>0.05

# print a list of those with normal distribution
list10[which(normdist),] 
```

我得到的结果是：

```
 ALL10names                                sh10                  
[1,] "AFFX-HUMISGF3A/M97935_MA_at (endogenous control)" "2.97359627770755e-07"
[2,] "AFFX-HUMISGF3A/M97935_3_at (endogenous control)"  "0.299103621399385"   
[3,] "AFFX-HUMGAPDH/M33197_5_at (endogenous control)"   "6.60564216346286e-07"
[4,] "AFFX-HUMGAPDH/M33197_M_at (endogenous control)"   "6.81945800629973e-07"
[5,] "AFFX-HSAC07/X00351_5_at (endogenous control)"     "3.3088559810058e-06" 
[6,] "AFFX-HSAC07/X00351_M_at (endogenous control)"     "1.30227973255158e-08" 
```

如您所见，这是错误的！有几个值实际上 < 0.05，只有一个实际上 > 0.05（这是我想要的）

如果我做：

```
which(normdist)
[1]  1  3  7  8  9 10 
```

但

```
which (sh10 > 0.05)
[1] 3 
```

所以很明显错误发生在

```
normdist<- list10[,2]>0.05 
```

我的问题是为什么会这样？我想要 list10 的第 2 列中值大于 0.05 的所有内容......它看起来正确，但我得到了错误的结果。正如我所说，我正在学习 R，所以我想了解哪里出了问题，所以我不会重复我的错误。提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T03:46:58.317

您的问题是`cbind(ALL10names,sh10)`创建一个矩阵并将所有内容强制为一个角色。

创建一个`data.frame`代替（列可以有不同的类型）

```
list10 <- data.frame(ALL10names,sh10) 
```

一切都会如你所愿

# android - cocos2d-x Android 设备方向：我做错了什么？

> ID：12701560
> 
> 赞同：0
> 
> 时间：2012-10-03T03:39:23.150
> 
> 标签：android, orientation, cocos2d-x

我尝试在 HelloWorld Android 项目中更改设备方向。但是，我有一个小问题。我遵循了 off.site 的指南：

```
1\. Add nativeInit(w, h); to cocos2dx/platform/android/java/src_common/org/cocos2dx/lib/Cocos2dxRenderer.java -> void onSurfaceChanged(GL10 gl, int w, int h).
2\. Add this code to void Java_org_cocos2dx_lib_Cocos2dxRenderer_nativeInit(JNIEnv* env, jobject thiz, jint w, jint h):

cocos2d::CCEGLView* view = cocos2d::CCDirector::sharedDirector()->getOpenGLView();
 if (!view) {
    ...
 } else {
    ...
    if (view->getFrameSize().width != w || view->getFrameSize().height != h) {
      view->setFrameSize(w, h);
      view->setDesignResolutionSize(w, h, kResolutionShowAll);
 }
} 
```

所以，我的问题：在纵向我有一个很好的视图：[漂亮的视图](http://s9.postimage.org/4toqesien/shot_000003.png "测试2")，但是，在横向我有那个：[坏的视图](http://s11.postimage.org/rjekhdj3n/shot_000002.png "测试1")。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T04:22:17.923

没有错，绝对不能在改变方向时使用相同的坐标。在您的代码中，您应该分别处理它们，例如：

```
if (orientationIsLandScape()) {
     background->setPosition();
} else {
     background->setPosition();
} 
```

`orientationIsLandScape()`应该是自己编写的一些函数来检测当前方向

# c# - WCF 不反序列化。为什么我的参数为 NULL？

> ID：12701562
> 
> 赞同：5
> 
> 时间：2012-10-03T03:39:37.080
> 
> 标签：c#, xml, wcf, web-services, soap

我正在尝试设置一个接受预定义传入 SOAP/XML 消息的 Web 服务。我无法控制客户端代码或发送的 SOAP 消息。我正在尝试一个简单的示例，但遇到了问题。假设这是 SOAP 消息：

```
 <?xml version="1.0" encoding="UTF-8"?>
<env:Envelope xmlns:env="http://schemas.xmlsoap.org/soap/envelope/">
  <env:Body>
    <CustomerRequest xmlns="http://tempuri.org">
      <Customer>
        <FirstName>John</FirstName>
        <LastName>Doe</LastName>
      </Customer>
    </CustomerRequest>
  </env:Body>
</env:Envelope> 
```

我的数据合同对象：

```
[DataContract(Name = "Customer", Namespace = "http://tempuri.org")]
public class Customer
{
    [DataMember]
    public string FirstName { get; set; }

    [DataMember]
    public string LastName { get; set; }
} 
```

服务接口：

```
[ServiceContract(Namespace = "http://tempuri.org")]
public interface IService1
{
    [OperationContract(Action="*")]
    [WebInvoke(Method = "POST")]
    bool Customer(Customer customer);
} 
```

当我发送 SOAP 请求时，我可以在 fiddler 中查看所有内容，看起来还不错。但是当它遇到我的代码时，Customer 对象为空。我觉得我错过了一些非常简单的东西。

这也是原始请求：

```
POST http://127.0.0.1.:3619/Service1.svc HTTP/1.1
SOAPAction: http://tempuri.org/IService1/Customer
Content-Type: text/xml;charset=utf-8
Host: 127.0.0.1.:3619
Content-Length: 339
Expect: 100-continue
Connection: Keep-Alive

<?xml version="1.0" encoding="UTF-8"?>
<env:Envelope xmlns:env="http://schemas.xmlsoap.org/soap/envelope/">
  <env:Body>
    <CustomerRequest xmlns="http://tempuri.org">
      <Customer>
        <FirstName>John</FirstName>
        <LastName>Doe</LastName>
      </Customer>
    </CustomerRequest>
  </env:Body>
</env:Envelope> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T09:30:52.787

`CustomerRequest`我在您的接口或服务实现中看不到任何提及。我认为 SOAP 请求应该发送一个`Customer`而不是`CustomerRequest`. 您可以通过使用 SOAPUI 并根据您的 WSDL 生成示例请求来验证这一点。将告诉您请求的*实际*外观。

# ruby - 检查字符串是否匹配任何正则表达式

> ID：12701564
> 
> 赞同：1
> 
> 时间：2012-10-03T03:39:41.450
> 
> 标签：ruby, regex

我有一个正则表达式数组和一个字符串数组。数组的大小可以任意长（例如，100 或 1000）。没有字符串匹配两个不同的正则表达式。我不确定我将如何执行它，但让我们假设它就在那里。正则表达式以 开头`pre`，后跟一个可选的冒号，然后是一个或多个空格，然后是一个特定的字符串，然后是一个空格，然后是一个整数。它将不区分大小写。

```
regexes = [/pre: my_string (\d+)/i, /pre: another (\d+)/i]
strings = ["comet", "eclipse", "sunshine", "starlight", "moonlight"] 
```

对于每个字符串，我想检查它匹配哪个正则表达式并返回相应的匹配。上面的示例代码演示了我当前的方法。

```
strings.each {|string|
  regexes.each {|regex|
    if regex.match(string)
      p regex.match(string)
      break
    end
  }
} 
```

似乎效率低下。有什么更有效的方法来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-27T19:36:55.050

我将只包括一个 Regexp.union() 的示例

```
desired = Regexp.union(/RM/, /dog/, /hat/)
x = "RM20"
y = "phat"
puts "rawr!" if y =~ desired
#=> rawr!
puts "match!" if x =~ desired
#=> match 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T04:21:11.507

不要使用正则表达式数组；相反，使用搜索树。

这是一篇很棒的介绍文章：用于排序和搜索字符串的快速算法。

*   [http://www.cs.tufts.edu/~nr/comp150fp/archive/bob-sedgewick/fast-strings.pdf](http://www.cs.tufts.edu/~nr/comp150fp/archive/bob-sedgewick/fast-strings.pdf)

或者，如果您更喜欢快速而简单的解决方案，您可以使用 Ruby Regexp#union 将regexps 融合在一起以创建一个大的。*当没有*字符串匹配时，这可能会更有效，您可以对其进行基准测试。如果匹配，则使用匹配位置来确定匹配的正则表达式。

*   [http://www.ruby-doc.org/core-1.9.3/Regexp.html#method-c-union](http://www.ruby-doc.org/core-1.9.3/Regexp.html#method-c-union)

（感谢#union 方法的“mu 太短”的评论）

对于您描述的特定情况，所有正则表达式都以“pre”和可选冒号等开头，然后您可以执行 /pre:? +(star|moon|sun)/ 并使用匹配结果找出匹配的。

Ruby 的 Regexp 是使用搜索树实现的；有一个有趣的描述可能会给你带来线索：

*   [http://patshaughnessy.net/2012/4/3/exploring-rubys-regular-expression-algorithm](http://patshaughnessy.net/2012/4/3/exploring-rubys-regular-expression-algorithm)

# typescript - TypeScript 编译器在 Windows 上使用什么 JavaScript 引擎？

> ID：12701568
> 
> 赞同：4
> 
> 时间：2012-10-03T03:39:54.490
> 
> 标签：typescript

我安装了编辑器插件，这些是安装的文件：

![打字稿文件](../Images/e10858e3394d7ee03e42e035395e9826.png)

我只是好奇编译器是如何工作的，是否有人可以概述这些文件？

1.  还有两个 JavaScript 文件，我预计只有一个，它们是做什么用的（一个必须是编译器）？*tsc 是编译器，typescript 是语法解析器吗？*
2.  tsc.exe 是否使用脉轮引擎？
3.  情报是用什么写的？*lib文件是干什么用的？（实际上我可以回答这个问题，它是 ECMAScript API 的文档）*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T06:49:02.637

> 还有两个 JavaScript 文件，我预计只有一个，它们是做什么用的（一个必须是编译器）？tsc 是编译器，typescript 是语法解析器吗？

tsc.js 是 tsc.exe 使用的命令行编译器。typescript.js 和 tsc.js 基本相同，但 tsc.js 具有命令行编译所需的命令行选项解析器和批处理编译器。typescript.js 只是核心编译器。

> 情报是用什么写的？

在打字稿中。

> lib文件是干什么用的？

它是 JavaScript 运行时的类型描述。

# mysql - 将 2 个 mysql 查询合并到一个具有唯一行的表中

> ID：12701578
> 
> 赞同：4
> 
> 时间：2012-10-03T03:40:47.597
> 
> 标签：mysql, inner-join

我正在尝试完成一个查询，显示每个项目计费的总小时数，格式如下：

```
Project Name |  Hours
Project A    |  2
Project B    |  6
Project C    |  8 
```

我有两个 SQL 查询来计算每个项目计费的小时数。这是必要的，因为每个查询都有不同的 JOIN：

例如，如果 time_records.parent_type = 'Task'，那么 Join 是：

```
INNER JOIN time_records
ON time_records.parent_id = project_objects.id 
```

如果 time_records.parent_type = 'Project'，那么 Join 是：

```
INNER JOIN time_records
ON projects.id = time_records.parent_id 
```

我正在尝试将这两个查询组合到一个表中，但是我遇到的问题是该表重复了项目，而不是将它们组合到每个项目的一个唯一行中（类似于数据透视表的功能）。

这是我当前的查询：

```
(SELECT projects.name AS expr1
     , sum(time_records.value) AS expr2
FROM
  project_objects
INNER JOIN projects
ON projects.id = project_objects.project_id
INNER JOIN time_records
ON time_records.parent_id = project_objects.id
WHERE
  time_records.parent_type = 'Task' 
GROUP BY 
  projects.name)

UNION ALL

(SELECT projects.name AS expr1
      , sum(time_records.value) as expr2
FROM
   projects
INNER JOIN time_records
ON projects.id = time_records.parent_id
WHERE
  time_records.parent_type = 'Project'
GROUP BY 
  projects.name) 
```

这是它当前的输出方式：

```
Project Name | Hours
Project A | 2
Project B | 6
Project C | 8
Project A | 4 
```

我需要将项目 A 放在一行上，显示 6 小时的值，而不是两行。我尝试了 UNION 操作，但这没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T04:12:59.873

你可以试试这个，看看这是否有效？

```
SELECT X.expr1, SUM(X.expr2)
FROM 
  (SELECT 
    projects.name AS expr1
    , sum(time_records.value) AS expr2
  FROM project_objects
  INNER JOIN projects
    ON projects.id = project_objects.project_id
  INNER JOIN time_records
    ON time_records.parent_id = project_objects.id
  WHERE time_records.parent_type = 'Task' 
  GROUP BY projects.name

  UNION

  SELECT 
    projects.name AS expr1
    , sum(time_records.value) as expr2
  FROM projects
  INNER JOIN time_records
    ON projects.id = time_records.parent_id
  WHERE time_records.parent_type = 'Project'
  GROUP BY projects.name) X
GROUP BY X.expr1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T03:45:22.397

使用 OR 条件连接

**编辑：**

检查一下：这很可能对你有用。 [对两个 select 语句的结果求和](https://stackoverflow.com/questions/8647725/sum-results-from-two-select-statements)

```
SELECT projects.name AS nameval
     , sum(time_records.value) AS total
FROM ((SELECT projects.name AS expr1
     , sum(time_records.value) AS expr2
FROM
  project_objects
INNER JOIN projects
ON projects.id = project_objects.project_id
INNER JOIN time_records
ON time_records.parent_id = project_objects.id
WHERE
  time_records.parent_type = 'Task' 
GROUP BY 
  projects.name)

UNION ALL

(SELECT projects.name AS expr1
      , sum(time_records.value) as expr2
FROM
   projects
INNER JOIN time_records
ON projects.id = time_records.parent_id
WHERE
  time_records.parent_type = 'Project'
GROUP BY 
  projects.name)) t group by expr1 
```

# programming-languages - MIPS 不在数组中存储值

> ID：12701580
> 
> 赞同：2
> 
> 时间：2012-10-03T03:40:55.800
> 
> 标签：programming-languages, mips

所以我有一个程序需要使用给定的 matrix_a。（4x4）然后它需要将第 1 列与 3 和第 2 列与 4 交换并将其存储到交换矩阵（数组）中，然后需要将 matrix_b 和交换矩阵相乘并保存到结果中。然后打印出来。打印功能有效。我用原始矩阵对其进行了测试。交换函数在内部工作，只是不知道如何将变量保存到全局函数。代码如下。我花了几个小时调试这个。

```
#############################################################################   
#############################################################################
## Assignment 3: Your Name here
#############################################################################
#############################################################################

#############################################################################
#############################################################################
## Data segment
#############################################################################
#############################################################################   
        .data
matrix_a:   .word 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16
matrix_b:   .word 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16
swap:       .word 0, 0, 0, 0, 0, 0, 0, 0, 0,  0,  0,  0,  0,  0,  0,  0 
result:     .word 0, 0, 0, 0, 0, 0, 0, 0, 0,  0,  0,  0,  0,  0,  0,  0

newline:    .asciiz "\n"
tab:        .asciiz "\t"

#############################################################################   
#############################################################################
## Text segment
#############################################################################
#############################################################################

    .text              # this is program code
    .align 2           # instructions must be on word boundaries
    .globl main        # main is a global label
    .globl matrix_swap
    .globl matrix_multiply
    .globl matrix_print

#############################################################################   
main:
#############################################################################
    # alloc stack and store $ra
    sub $sp, $sp, 4
    sw $ra, 0($sp)

    # load matrix A, swap and N into arg regs
    la $a0, matrix_a
    la $a1, swap
    li $a2, 4
    jal matrix_swap

    # load A, B and C and N into arg regs
    la $a0, swap
    la $a1, matrix_b
    la $a2, result
    li $a3, 4
    jal matrix_multiply

    la $a0, result
    jal matrix_print

    # restore $ra, free stack and return
    lw $ra, 0($sp)
    add $sp, $sp, 4
    jr $ra

##############################################################################
matrix_swap: 
##############################################################################
# does matrix swap for a specific 4x4 matrix like assignment 1.
# This is a leaf function and can be done without any stack allocation.
# It is ok if you use the stack.
    sub     $s2, $a2, 2 #j < 2
    move    $s0, $zero  #r = 0
L1:     move    $s1, $zero  #c = 0 
#compute A[r][c+2] address and load into $t3
L2:     mul     $t0, $a2, $s0   #r * size
    add     $t7, $s1, 2     #c+2
    add     $t1, $t0, $t7   #(r * size) + col
    sll     $t1, $t1, 2     #4 * ((r* size) + 2)
    add     $t2, $t1, $a0   #addr + 4 * ((r* size) + 2)
    lw      $t3, 0($t2)     #store address of A[r][c+2]

#compute swap[r][c] address and load into $t4
    mul     $t0, $a2, $s0   #r * size
    add     $t1, $t0, $s1   #(r * size) + c
    sll     $t1, $t1, 2     #4 * ((r* size) + 2)
    add     $t2, $t1, $a1   #addr + 4 * ((r* size) + 2)
    lw      $t4, 0($t2)     #store address of swap[r][c]

#compute A[r][c] address and load into $t5
    mul     $t0, $a2, $s0   #r * size
    add     $t1, $t0, $s1   #(r * size) + c
    sll     $t1, $t1, 2     #4 * ((r * size) + c)
    add     $t2, $t1, $a0   #addr + 4 * ((r * size) + c)
    lw      $t5, 0($t2)     #store address of A[r][c]

#compute swap[r][c+2] address and load into $t6
    mul     $t0, $a2, $s0   #r * size
    add     $t7, $s1, 2     #c + 2
    add     $t1, $t0, $s1   #(r * size) + col
    sll     $t1, $t1, 2     #4 * ((r * size) + c)
    add     $t2, $t1, $a1   #addr + 4 * ((r * size) + c)
    lw      $t6, 0($t2)     #store address of swap[r][c+2]

#save A[r][c] into swap[r][C+2]
    move    $t6, $t5
    move    $s6, $t6
#save  A[r][c+2] into swap[r][c]
    move    $t4, $t3
    move    $s4, $t4
#increment c and check conditional
    addi    $s1, $s1, 1
    bne     $s1, $s2, L2
#increment r and check conditional
    addi    $s0, $s0, 1
    bne     $s0, $a2, L1

    jr      $ra

##############################################################################
matrix_multiply: 
##############################################################################
# mult matrices swap and B together of square size N and store in result.

    # alloc stack and store regs.
    sub $sp, $sp, 24
        sw $ra, 0($sp)
        sw $a0, 4($sp)
        sw $a1, 8($sp)
        sw $s0, 12($sp)
        sw $s1, 16($sp)
        sw $s2, 20($sp)

        #setup for i loop
        add $s0, $zero, $zero
        #setup for j loop
L3:     add $s1, $zero, $zero
        #setup for k loop
L4:     add $s2, $zero, $zero
        #compute swap[i][k] address and load into $t3
L5:     mul $t0, $s0, $a3   #i * size
        add $t1, $t0, $s2   #(i * size) + k
        sll $t1, $t1, 2     #4 * (i * size) + k
        add $t2, $a0, $t1   #addr + 4 * (i * size) + k
        lw  $t3, 0($t2)     #store address swap[i][k]
        #compute B[k][j] address and load into $t4
        mul $t0, $s2, $a3   #k * size
        add $t1, $t0, $s1   #(k * size) + j
        sll $t1, $t1, 2     #4 * (k * size) + j
        add $t2, $a1, $t1   #addr + 4 * (k * size) + j
        lw  $t4, 0($t2)     #store address B[k][j]
        #compute result[i][j] address and load into $t5
        mul $t0, $s0, $a3
        add $t1, $t0, $s1
        sll $t1, $t1, 2
        add $t2, $a1, $t1
        lw  $t5, 0($t2)
        #invoke mul instruction
        mul $t6, $t3, $t4
        move $t5, $t6
        #increment k and jump back
        addi $s2, $s2, 1
        bne $s2, $a3, L5
        #increment j and jump back
        addi $s1, $s1, 1
        bne $s1, $a3, L4
        #increment i and jump back
        addi $s0, $s0, 1
        bne $s0, $a3, L3

    # retore saved regs from stack
    lw $s2, 20($sp)
        lw $s1, 16($sp)
    lw $s0, 12($sp)
    lw $a1, 8($sp)
    lw $a0, 4($sp)
        lw $ra, 0($sp)

    # free stack and return
    add $sp, $sp, 24
    jr $ra

##############################################################################
matrix_print:
##############################################################################
    # alloc stack and store regs.
    sub $sp, $sp, 16
        sw $ra, 0($sp)
        sw $s0, 4($sp)
        sw $s1, 8($sp)
        sw $a0, 12($sp)

    li $t0, 4 # size of array
    move $s2, $a0

    # do you two loop here

    move    $s0, $zero      #r = 0
Loop1:  move    $s1, $zero      #c = 0

Loop2:  mul     $t1, $s0, $t0   #r * size
    add     $t2, $t1, $s1   #(r * size) + col
    sll     $t2, $t2, 2     # 4 * ((r*size) +)
    add     $t3, $s2, $t2   #addr + 4 * (r * size) + col
    lw      $t4, 0($t3)     #store address of A[r][c]
    li      $v0, 1          #load print_int into $v0
    move    $a0, $t4        #move address to arg register 
    syscall
    li      $v0, 4
    la      $a0, tab
    syscall
    addi    $s1, $s1, 1
    bne     $s1, $t0, Loop2
    li      $v0, 4
    la      $a0, newline
    syscall
    addi    $s0, $s0, 1
    bne     $s0, $t0, Loop1 

# setup to jump back and return

        lw $ra, 0($sp)
        lw $s0, 4($sp)
        lw $s1, 8($sp)
        lw $a0, 12($sp)
        add $sp, $sp, 16
        jr $ra 
```

# ios - 改变 UIToolBar iOS 的位置

> ID：12701582
> 
> 赞同：2
> 
> 时间：2012-10-03T03:41:12.603
> 
> 标签：ios, xcode, ios6, uitoolbar

我正在通过 Interface Builder 创建一个 UIToolBar。我将其设置为 IBOutlet。

在`viewDidLoad`我的范围内，`viewController`我正在尝试设置框架。

我想要实现的是修改它的位置，以便它可以动画。

但什么也没有发生。

有没有不同的方法可以做到这一点？

谢谢

```
myOwnToolBar.frame = CGRectMake(0, 0, 100, 55);
    [self.view addSubview:myOwnToolBar]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T04:36:34.600

如果您尝试以`UIToolBar`编程方式创建一个框架，则不能只设置一个框架而不分配和初始化工具栏。尝试这个：

```
myOwnToolBar = [[UIToolBar alloc] initWithFrame:CGRectMake(0, 0, 100, 44)];
[self.view addSubview:myOwnToolBar]; 
```

当您创建一个 IBOutlet 时，会隐含一个 alloc/init 调用。您只需要记住，这不适用于在代码中创建的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-23T11:58:09.767

**swift 3**的小技巧：

```
override func viewDidLoad() {
    super.viewDidLoad()

    UIView.animate(withDuration: 0.3) { 
        self.navigationController?.toolbar?.transform = CGAffineTransform(translationX: 0, y: -216)
    }
} 
```

**Objective-c**示例：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    [UIView animateWithDuration:0.3 animations:^{
        self.navigationController.toolbar.transform = CGAffineTransformMakeTranslation(0, -216);
    }];
} 
```

**为动画持续时间**、**x-offset**或**y-offset**设置变量或常量

# javascript - 从网络节点集计算路径

> ID：12701584
> 
> 赞同：1
> 
> 时间：2012-10-03T03:41:31.903
> 
> 标签：javascript, algorithm

我有一组由以下定义的节点连接：

```
var arr = ['1-2','1-6','2-6','2-3','1-4','1-5','6-7','4-7','7-8']; 
```

1-2 表示节点 1 连接到节点 2，依此类推。如您所见，有多个连接。

如果操作正确，您会注意到各种独特的路径，例如 1-2-6-7-8、1-5 等。我想将路径计算为：

```
path = ['1-2-6-7-8','1-6-7-8','1-2-3','1-4-7-8','1-5'] 
```

我已经通过另一组检查每组来完成，但我认为我的代码太长并且性能不佳。获取路径数组的最佳方法是什么。（路径结束于叶节点）

谢谢。

![在此处输入图像描述](../Images/a6689b5d22a913f9ccaa0e67e09c8565.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T06:46:42.950

这个解决方案怎么样，我认为它只适用于 DAG：有向无环图

```
function toGraph(arr){
    d = {}
    for (var e=0; e<arr.length; e++){
        var edge = arr[e].split('-')
        if(!d[edge[0]]){d[edge[0]]=[]}
        if(!d[edge[1]]){d[edge[1]]=[]}
        d[edge[0]].push(edge[1])
    }
    return d
}    

function DFS(G,node,path,paths,visited){
    visited[node] = true
    path.push(node)
    if (G[node].length==0 && path.length>1) paths.push('['+path.join('-')+']')

    for (var s=0; s<G[node].length; s++){
        successor = G[node][s]
        if(!visited[successor]){
            DFS(G,successor,path,paths,visited)
        }
    }
    visited[node] = false
    path.pop()
}

function go(){
    var arr = ['1-2','1-6','2-6','2-3','1-4','1-5','6-7','4-7','7-8']   
    var paths = []
    DFS(toGraph(arr),'1',[],paths,{})
    return paths.toString()
} 
```

当你打电话时`go()`，你会得到以下输出

```
[1-2-6-7-8], [1-2-3], [1-6-7-8], [1-4-7-8], [1-5] 
```

# c - C 编程百分比帮助 2 dice programn 滚动 10000 次

> ID：12701586
> 
> 赞同：0
> 
> 时间：2012-10-03T03:41:51.527
> 
> 标签：c

从头开始，用 2 个骰子重复第 4 部分。这次我们使用 10,000 而不是 1000。

每个骰子可以是 1 - 6，因此 2 个骰子的总数必须在 2 - 12 范围内。

您的输出将在 2 – 12 的范围内。

请注意，掷出 2 的可能性比掷出 7 的可能性小得多，因为 2 只能掷出 1 + 1。但 7 可以是 6 + 1、5 + 2、4 + 3、3 + 4、2 + 5、1 + 6。

计算每个值出现的次数，并像上一部分一样输出该计数。

计算将 2、3、4 等滚动到 12 的时间百分比。以小数点后一位的精度输出百分比。在讨论板上发布这一结果。

我的问题是在我编写的程序中，以便输出滚动的数量。我在尝试使用百分比公式输出掷骰子的百分比时遇到了极端问题。

到目前为止，这是我的代码。

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#define SIZE 11
#define TOTAL 10000

int main(void)   {

    int cnt = 0;
    int die1, die2, sum;
    int array[SIZE];
    srand(time(NULL));

    for (cnt = 0; cnt < SIZE; cnt++)
        array[cnt] = 0;

    for (cnt = 0; cnt < TOTAL; cnt++)
    {
        die1 = rand() % 6 + 1;
        die2 = rand() % 6 + 1;
        sum = die1 + die2;
        ++array[sum-2];
    }
    for (cnt = 0; cnt < SIZE; cnt++)
        printf("Number of %d's: %d\n", cnt+2, array[cnt]);
    system("pause");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T03:50:24.683

尝试

```
array[cnt]*100/SIZE; 
```

还

您可能希望查看此[二项式分布](http://en.wikipedia.org/wiki/Binomial_distribution)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T03:58:22.503

暗示：

如果您将单个骰子的“计数”存储在一个数组中，也许您可​​能会有类似的东西：

> array[0] 是我为单个骰子掷出“1”的次数；array[1] #/times 我滚动了一个“2”，等等。

也许对于*两个骰子*，您希望数组存储*总和*。例如：

> array[0] 是我为两个骰子掷出“2”之和的#/次；array[1] #/times 我滚动了“3”，等等。

数组应该有多大？总和永远不会小于 2 或大于 12。所以“int[SIZE]”（“11”）就足够了。

在开始滚动之前，您需要将数组中的所有元素清除为“0”。

'希望这能让你指出正确的方向......

# ios - Linkedin API 401 [未经授权]。（带有 OAuthStarterKit 的 iOS）错误

> ID：12701590
> 
> 赞同：2
> 
> 时间：2012-10-03T03:42:29.480
> 
> 标签：ios, api, linkedin

当我尝试从我的 iPhone 应用程序发布状态更新时，我收到了这个回复。而且我不知道自己做错了什么，我一直在进出文档，数据包嗅探，linkedin 论坛和代码与 Linkedin API 怪物战斗，但我无法克服这个错误，并且希望知道任何人的任何指示，我可以做些什么来解决和/或解决这个问题：

```
data: <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<error>
<status>401</status>
<timestamp>1349234286875</timestamp>
<request-id>ZAAVLR7K6H</request-id>
<error-code>0</error-code>
<message>[unauthorized]. OAUxxxxxxxx-xxxxxxxx|*xx|*xx:xxxxxxxx:lxxxxxxxxxxxxxxxx=</message>
</error> 
```

我请求这些权限： r_fullprofile r_contactinfo r_emailaddress, rw_nus 用于授权。

图形路径设置为：

```
http://api.linkedin.com/v1/people/~/shares 
```

授权后我的基本签名如下所示：

```
POST&http%3A%2F%2Fapi.linkedin.com%2Fv1%2Fpeople%2F~%2Fshares&oauth_consumer_key%3Diws9c2xtzgdr%26oauth_nonce%xxxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx%26oauth_signature_method%3DHMAC-SHA1%26oauth_timestamp%3D1349234713%26oauth_token%xxxxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx%26oauth_version%3D1.0 
```

我调用的主要代码如下：

```
- (void) updateStatus : (NSString *) status{
if (self.consumer != nil) {
OAMutableURLRequest *request =
[[OAMutableURLRequest alloc] initWithURL: requestURL
consumer: self.consumer
token: self.accessToken
callback: nil
signatureProvider: nil];

NSMutableDictionary *permsDict = [NSMutableDictionary dictionary];

[permsDict setValue: @"anyone" forKey: @"code"];

NSMutableDictionary *shareJSONDict = [NSMutableDictionary dictionary];

[shareJSONDict setValue: permsDict forKey: @"visibility"];
[shareJSONDict setValue: @"test" forKey: @"comment"];

[request setValue:@"application/json" forHTTPHeaderField:@"x-li-format"];

NSString *updateString = [shareJSONDict JSONString];

[request setHTTPBodyWithString:updateString];
[request setHTTPMethod:@"POST"];

OADataFetcher *fetcher = [[OADataFetcher alloc] init];

[fetcher fetchDataWithRequest: request
delegate: self.sessionDelegate
didFinishSelector: @selector(postUpdateApiCallResult:didFinish:)
didFailSelector: @selector(postUpdateApiCallResult:didFail:)];
}
} 
```

到目前为止，我花了 12 个小时与 Linkedin API 争论，我需要做的就是获取用户的基本信息并能够在 Linkedin 上分享，而在 Facebook 和 Twitter 上花了 30 秒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-24T15:20:11.873

首先，`r_fullprofile, r_contactinfo, rw_nus`不允许在您的应用程序的基本配置文件中使用。如果您想使用它们，您必须订阅[LinkedIN 合作伙伴计划](https://developer.linkedin.com/partner-programs)。

其次，您必须为`w_share`.

# jquery - 使用 DataTables 从主页搜索

> ID：12701595
> 
> 赞同：0
> 
> 时间：2012-10-03T03:43:37.373
> 
> 标签：jquery, ruby-on-rails, datatables

我有一个索引页面，它使用 jQuery DataTables 插件来过滤索引中的数据。在我的主页上，我有一个搜索表单。提交此表单后，我想将用户带到索引页面，其中 DataTables 搜索字段填充了他们在主页上输入的值。现在我正在通过索引控制器传递搜索值。

如何使用传递给索引视图的值设置 DataTables 搜索字段？

是否有更好的方法从另一个页面执行 DataTables 搜索？

我正在使用 Rails 3.1.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T05:22:00.963

您需要使用 oSearch 初始化参数 ( [http://datatables.net/ref#oSearch](http://datatables.net/ref#oSearch) ) 使用初始搜索值初始化 DataTable，或使用 fnFilter API 方法在任何其他点应用搜索（在初始化之后例子）。

# c# - 试图在 C# 中模仿 MS Paint，无法使用橡皮筋

> ID：12701596
> 
> 赞同：1
> 
> 时间：2012-10-03T03:43:55.393
> 
> 标签：c#, bitmap, draw, paint

我正在尝试模仿 MS Paint 中的效果，在绘制形状时，当鼠标按下时，它会在屏幕上“预览”。

很简单：

```
 private Bitmap lastCanvas;                

    private void pictureBox1_MouseDown(object sender, MouseEventArgs e)
    {
         lastCanvas = new Bitmap(pictureBox1.image);

         gr = Graphics.FromImage(pictureBox1.Image);

         start = e.Location;
         gr.DrawRectangle(myPen, start.X, start.Y, 0, 0);
         pictureBox1.Refresh();
    }

    private void pictureBox1_MouseMove(object sender, MouseEventArgs e)
    {   
        if (e.Button == MouseButtons.Left)
        {
            pictureBox1.Image = lastCanvas;

            gr = Graphics.FromImage(pictureBox1.Image);

            gr.DrawRectangle(myPen, start.X, start.Y, e.Location.X - start.X, e.Location.Y - start.Y);
            pictureBox1.Refresh();
        }
    } 
```

问题是它似乎没有正确存储“lastCanvas”。这是一种尝试将到目前为止绘制的所有内容并存储起来，以便在发生鼠标拖动时，我可以在绘制矩形“预览”之前重新绘制它。由于某种原因，我无法复制和重新显示位图，尽管事实上我正在保存旧画布并在每次鼠标移动之间恢复它，但我只是在屏幕上构建了所​​有“预览”矩形。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T03:57:22.387

我相信正在发生的是，`pictureBox1`并且在您的事件处理程序`lastCanvas`中引用了相同的内容。`pictureBox1_MouseMove`

此代码将 image 和 lastCanvas 设置为内存中的同一对象

```
pictureBox1.Image = lastCanvas; 
```

当您将图像绘制到`Graphics`您创建的对象时，您也在更新 lastCanvas。您可能需要`Clone`位图。

# .net - 如何将样式资源应用于该样式使用触发器应用模板的用户控件？

> ID：12701599
> 
> 赞同：1
> 
> 时间：2012-10-03T03:44:40.010
> 
> 标签：.net, wpf, xaml, user-controls, wpf-controls

如果这是一个简单的问题，我深表歉意，但我一整天都在努力让它工作，我似乎无法弄清楚可能相当明显的事情。

我有一个带有自定义依赖属性“翻转”的用户控件。

在我的资源中，我有一个定义了两个触发器的样式，它将控件的模板设置为两个不同的值，具体取决于“翻转”是真还是假。

现在，我使用什么语法将样式应用于我正在创建的这个用户控件？

放入`Style="{StaticResource EventStyle}"`标题`UserControl`将不起作用。

这是我到目前为止所拥有的：

```
<UserControl x:Class="XDPClient.Controls.EventMarkerControl"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         xmlns:Controls="clr-namespace:XDPClient.Controls" 
         mc:Ignorable="d" 
         d:DesignHeight="513" d:DesignWidth="695">

<UserControl.Resources>
    <!-- Draw the user control right side up with this template -->
    <ControlTemplate x:Key="Up" TargetType="{x:Type Controls:EventMarkerControl}">
        <Grid>
            <!-- Outline grid  -->
            <Path Stretch="Fill" Fill="#FFFFFFFF" Stroke="#FF6800FF" StrokeThickness="3" StrokeStartLineCap="Flat" StrokeEndLineCap="Flat" StrokeLineJoin="Miter" StrokeMiterLimit="4" Name="rect2985" RenderTransformOrigin="0,0">
                <Path.Data>
                    <PathGeometry FillRule="Nonzero"   Figures="M 0,250 L 0,50 L 150,50 L 200,-0.96 L 250,50 L 400,50 L 400,250 L 0,250z" />
                </Path.Data>
            </Path>

            <!-- Placement of the content -->
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="1*" />
                    <RowDefinition Height="4*" />
                </Grid.RowDefinitions>
                <Grid Grid.Row="1" Margin="3">
                    <ContentPresenter Grid.Row="1" 
                            HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" 
                            VerticalAlignment="{TemplateBinding VerticalContentAlignment}"        
                            SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                </Grid>
            </Grid>

            <Grid.BitmapEffect>
                <DropShadowBitmapEffect />
            </Grid.BitmapEffect>
        </Grid>
    </ControlTemplate>

    <!-- Draw the user control flipped with this template -->
    <ControlTemplate x:Key="Down" TargetType="{x:Type Controls:EventMarkerControl}">
        <Grid>
            <!-- Outline grid  -->
            <Path Stretch="Fill" Fill="#FFFFFFFF" Stroke="#FF6800FF" StrokeThickness="3" StrokeStartLineCap="Flat" StrokeEndLineCap="Flat" StrokeLineJoin="Miter" StrokeMiterLimit="4" Name="rect2985" RenderTransformOrigin="0,0">
                <Path.Data>
                    <PathGeometry FillRule="Nonzero"   Figures="M 0,250 L 0,50 L 150,50 L 200,-0.96 L 250,50 L 400,50 L 400,250 L 0,250z" />

                </Path.Data>
                <Path.RenderTransform>
                    <ScaleTransform ScaleX="-1" />
                </Path.RenderTransform>
            </Path>

            <!-- Placement of the content -->
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="1*" />
                    <RowDefinition Height="4*" />
                </Grid.RowDefinitions>
                <Grid Grid.Row="1" Margin="3">
                    <ContentPresenter Grid.Row="1" 
                            HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" 
                            VerticalAlignment="{TemplateBinding VerticalContentAlignment}"        
                            SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                </Grid>
            </Grid>

            <Grid.BitmapEffect>
                <DropShadowBitmapEffect />
            </Grid.BitmapEffect>
        </Grid>
    </ControlTemplate>

    <Style x:Key="EventStyle" TargetType="{x:Type Controls:EventMarkerControl}">
        <Style.Triggers>
            <Trigger Property="Flipped" Value="false">
                <Setter Property="Template" Value="{StaticResource Up}" />
            </Trigger>
            <Trigger Property="Flipped" Value="true">
                <Setter Property="Template" Value="{StaticResource Down}" />
            </Trigger>
        </Style.Triggers>
    </Style>
</UserControl.Resources> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:05:00.160

您可以尝试使 UserControl 有一个顶级子项，例如 ContentControl，然后将样式应用于 ContentControl。这样，你就不会得到递归。

编辑：以下来自原始提问者......

这是我尝试按照您的建议进行的操作。出于某种原因，我的 DataTriggers 从不应用模板....不确定我在这里做错了什么。

这是使用包含的 ContentControl 尝试的整个 XAML：

```
<UserControl x:Class="XDPClient.Controls.EventMarkerControl"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:Controls="clr-namespace:XDPClient.Controls" mc:Ignorable="d" 
         d:DesignHeight="513" d:DesignWidth="695"
         x:Name="uc">

<UserControl.Resources>
    <!-- Draw the user control right side up with this template -->
    <ControlTemplate x:Key="Up" TargetType="{x:Type ContentControl}">
        <Grid>
            <!-- Outline grid  -->
            <Path Stretch="Fill" Fill="#FFFFFFFF" Stroke="#FF6800FF" StrokeThickness="3" StrokeStartLineCap="Flat" StrokeEndLineCap="Flat" StrokeLineJoin="Miter" StrokeMiterLimit="4" Name="rect2985" RenderTransformOrigin="0,0">
                <Path.Data>
                    <PathGeometry FillRule="Nonzero"   Figures="M 0,250 L 0,50 L 150,50 L 200,-0.96 L 250,50 L 400,50 L 400,250 L 0,250z" />
                </Path.Data>
            </Path>

            <!-- Placement of the content -->
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="1*" />
                    <RowDefinition Height="4*" />
                </Grid.RowDefinitions>
                <Grid Grid.Row="1" Margin="3">
                    <ContentPresenter Grid.Row="1" 
                        HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" 
                        VerticalAlignment="{TemplateBinding VerticalContentAlignment}"        
                        SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                </Grid>
            </Grid>

            <Grid.BitmapEffect>
                <DropShadowBitmapEffect />
            </Grid.BitmapEffect>
        </Grid>
    </ControlTemplate>

    <!-- Draw the user control flipped with this template -->
    <ControlTemplate x:Key="Down" TargetType="{x:Type ContentControl}">
        <Grid>
            <!-- Outline grid  -->
            <Path Stretch="Fill" Fill="#FFFFFFFF" Stroke="#FF6800FF" StrokeThickness="3" StrokeStartLineCap="Flat" StrokeEndLineCap="Flat" StrokeLineJoin="Miter" StrokeMiterLimit="4" Name="rect2985" RenderTransformOrigin="0,0">
                <Path.Data>
                    <PathGeometry FillRule="Nonzero"   Figures="M 0,250 L 0,50 L 150,50 L 200,-0.96 L 250,50 L 400,50 L 400,250 L 0,250z" />

                </Path.Data>
                <Path.RenderTransform>
                    <ScaleTransform ScaleX="-1" />
                </Path.RenderTransform>
            </Path>

            <!-- Placement of the content -->
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="1*" />
                    <RowDefinition Height="4*" />
                </Grid.RowDefinitions>
                <Grid Grid.Row="1" Margin="3">
                    <ContentPresenter Grid.Row="1" 
                        HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" 
                        VerticalAlignment="{TemplateBinding VerticalContentAlignment}"        
                        SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                </Grid>
            </Grid>

            <Grid.BitmapEffect>
                <DropShadowBitmapEffect />
            </Grid.BitmapEffect>
        </Grid>
    </ControlTemplate>

</UserControl.Resources>

<ContentControl x:Name="ContentControl" >
    <!-- Style for the content control -->
    <ContentControl.Style>
            <Style TargetType="{x:Type ContentControl}">
            <Style.Triggers>
                <DataTrigger Value="False" Binding="{Binding ElementName=uc, Path=Flipped}">
                    <Setter Property="ContentControl.Template" Value="{StaticResource Up}" />
                </DataTrigger>
                <DataTrigger Value="True" Binding="{Binding ElementName=uc, Path=Flipped}">
                    <Setter Property="ContentControl.Template" Value="{StaticResource Down}" />
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </ContentControl.Style>
</ContentControl>
</UserControl> 
```

如果我像这样手动应用样式：

```
 <ContentControl x:Name="ContentControl" Template="{StaticResource Up}"> 
```

这看起来不错的样子！只是我的数据触发器没有触发“翻转”的值

# wordpress - Wordpress 页面模板显示 index.php 而不是选定的模板

> ID：12701601
> 
> 赞同：2
> 
> 时间：2012-10-03T03:44:51.340
> 
> 标签：wordpress, themes

我一直在研究这个问题大约 3 个小时，现在我很困惑。我有一个自定义主题已经工作了几个月。就在我即将把它交给我的朋友时，我仔细检查了该网站，发现所有页面都没有正确显示。当我单击页面时，它们都在 CMS 中选择了正确的主题，但它们都显示 index.php 页面而不是它们选择的主题。

当您单击**链接**时，**它是如何工作**的，等等……这些都假设是具有不同主题的不同页面。这很奇怪，因为它以前可以工作，而且我不记得做过任何会扰乱系统的更改。

我也在使用 ACF 插件。我怀疑这是一个问题，因为自定义字段确实显示在 CMS 中，但就像我说的，在前端它显然正在拉动 index.php 页面。任何帮助将不胜感激。

**提前致谢！**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T12:57:02.280

问题已解决！我刚刚更新了永久链接。PS没有显示更新永久链接的按钮。您只需登录到 wordpress CMS > 单击设置 > 单击永久链接 > 单击“保存更改”以更新永久链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:09:30.780

检查设置>常规中网站网址框中的确切网址并检查

*   WordPress 地址 (URL)
*   网站地址 (URL)

并且模板应该在 wordpress 安装目录中并具体命名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T04:53:49.287

您应该检查主题目录中存在的文件。如果您查看[Codex中的](http://codex.wordpress.org/Template_Hierarchy)[Template Hierarchy](http://codex.wordpress.org/File%3aTemplate_Hierarchy.png)，您会注意到 Wordpress 会查找特定文件。如果没有找到任何文件，则加载的是哪个文件。`index.php`

您是否尝试过切换主题并查看其他主题是否正常工作？

# jquery - 用 jQuery 追加一次

> ID：12701604
> 
> 赞同：0
> 
> 时间：2012-10-03T03:45:16.970
> 
> 标签：jquery

我有一个函数，我将一个元素附加到另一个元素：

```
$("#frmUrl").addClass("hideUrl").css("margin","0").append('&nbsp;<span class="uico ui-icon-carat-1-w icoSpan"></span>'); 
```

自然，当我再次调用相同的函数时，会附加另一个。如何重写此字符串以仅将此跨度附加一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T03:50:04.087

好吧，你可以做 3 件事。

一种是在附加后创建一个标志然后检查

```
var isExist = false;

$("#frmUrl").addClass("hideUrl").css("margin","0").append('&nbsp;<span class="uico ui-icon-carat-1-w icoSpan"></span>');

isExist = true;

if(!isExist){
$("#frmUrl").addClass("hideUrl").css("margin","0").append('&nbsp;<span class="uico ui-icon-carat-1-w icoSpan"></span>');
} 
```

第二个是检查目标DOM上是否已经存在DOM

```
var dom =  $("#frmUrl").html();

if(dom.indexOf('&nbsp;<span class="uico ui-icon-carat-1-w icoSpan\"></span>') == -1){
 $("#frmUrl").addClass("hideUrl").css("margin","0").append('&nbsp;<span class="uico ui-icon-carat-1-w icoSpan"></span>');
} 
```

第三个是检查该元素是否已经存在于您的目标元素上，方法是检查它是否存在于您的目标上

```
var dom = $("#frmUrl").find('.uico').length;

if(dom == 0){
     $("#frmUrl").addClass("hideUrl").css("margin","0").append('&nbsp;<span class="uico ui-icon-carat-1-w icoSpan"></span>');
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T03:55:21.080

为其添加条件

```
if(! $('#frmUrl').find('span.uico').length > 1){
   $("#frmUrl").addClass("hideUrl").css("margin","0").append('&nbsp;<span class="uico ui-icon-   
    carat-1-w icoSpan"></span>');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T03:48:24.053

您可以设置标志变量。最初将其设置为 false，然后在执行附加之前，检查该值。如果为 false，则继续追加并将其设置为 true。否则，根据您的代码，您可以使用 jQuery 的`.one()`函数只执行一次事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T03:53:26.147

```
$("#frmUrl:not(:has(.icoSpan))").addClass("hideUrl").css("margin","0").append('&nbsp;<span class="uico ui-icon-carat-1-w icoSpan"></span>'); 
```

# d3.js - d3线图使用所有相同的y值，在底部绘制线

> ID：12701607
> 
> 赞同：2
> 
> 时间：2012-10-03T03:45:32.323
> 
> 标签：d3.js

最好通过查看以下内容来显示：

[http://bl.ocks.org/3824854](http://bl.ocks.org/3824854)（这是[bobmonteverde 区块 #2070123 的](http://bl.ocks.org/2070123)一个分支）

出于某种原因，当您取消选择“余弦波”时，正弦波（我已经硬编码为根本不是正弦波，而是一条直线）直线下降到底部。

知道这里出了什么问题，或者在数据恰好具有所有相同 y 值的情况下如何正确绘制？

# javascript - 1.toString() Javascript 中的语法错误

> ID：12701609
> 
> 赞同：4
> 
> 时间：2012-10-03T03:45:59.343
> 
> 标签：javascript

为什么下面的第一行会出错，尽管第二行和第三行工作正常？

```
1.toString(); // SyntaxError
(1).toString(); // OK
1['toString'](); // OK 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-03T03:47:31.180

`.`呈现模棱两可。它是小数还是属性访问器？

解释器将其视为小数，因此您可以使用`..`同时允许小数，然后是属性语法。

```
1..toString(); 
```

或者使用您展示的其他方式之一来解决歧义。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-03T03:47:11.193

解析器试图将其`1.`视为浮点文字的开头——只是`toString`将其转换为无效数字。

与之比较：

```
1.0.toString() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-27T06:48:50.253

在`(1).toString()`, (1) 强制它在 .toString() 之前进行评估，因此它可以工作。在`1.toString()`, 1 不是一个有效的标识符，所以它不起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-03T17:42:15.867

在 Javascript 中，使用点 ( `.`) 可以通过以下两种方式之一进行解释：

1.  作为[属性访问器](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Property_Accessors#Dot_notation)（例如，`var prop = myObject.prop;`）。
2.  作为[浮点文字](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Grammar_and_types#Floating-point_literals)的一部分（例如`var num = 1.5;`）。

`1.`在上述情况下，前导`1.toString()`被解释为浮点数，因此错误：

> SyntaxError：标识符在数字文字之后立即开始（[了解更多](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Identifier_after_number?utm_source=mozilla&utm_medium=firefox-console-errors&utm_campaign=default)）

如果您尝试声明一个以数字开头的变量，这与您得到的错误相同：`var 1person = 'john';`

为了防止解释器将`1.`视为小数，而是将其视为访问我们文字上的属性`1`，有几种方法可以完成此操作：

```
// Via white-space after the numeric literal
1 .toString();

1
.toString();

// Via a grouping-operator, aka, parentheses
// @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Expressions_and_Operators#Grouping_operator
(1).toString();

// Via an additional dot. Made clearer with parentheses as `(1.).toString()`
1..toString();

// Via an explicit fractional part (because `1\. === 1.0`)
1.0.toString();

// Via bracket notation
1['toString']();
1.['toString']();
1.0['toString'](); 
```

# c++ - C++ 类模板可以将方法名称作为模板参数吗？

> ID：12701613
> 
> 赞同：0
> 
> 时间：2012-10-03T03:46:49.050
> 
> 标签：c++, templates, class-template

就像题目问的那样，C++类模板可以把方法名作为模板参数吗？

例如，

```
template <T>
class Foo
{
public:
    void T(int bar);
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T03:58:35.790

不幸的是，C++ 核心语言没有任何处理*名称*的方法。

一些可能性：

*   通过预处理器处理名称，即丑陋的宏。
    注意：Boost 参数库使用了一些在这里非常相关的*未记录*的Boost 宏技巧。我曾经将它用于[一般选项类](http://alfps.wordpress.com/2010/05/19/cppx-how-to-do-typed-optional-arguments-in-c98/)的东西。抱歉，我记不太清了，但本质上它支持 C++03 的一种可变参数宏。
*   做你自己的自定义预处理，即基于脚本。
*   以某种方式将负担放在客户端代码程序员身上。

对于那些想知道，为什么需要这个？，一个典型的例子是如何使用 C++ 中的 Python 库“命名元组”类，程序员在其中提供元组成员的名称。

# c# - C# WPF 项目中的滑块

> ID：12701618
> 
> 赞同：0
> 
> 时间：2012-10-03T03:47:20.560
> 
> 标签：c#, wpf, xaml, slider

我只想在我的 C# WPF 项目中创建一个滑块并将滑块的值写入标签。我知道这可能很容易做到，但我无法让它发挥作用。所以这是我的 XAML 代码中的滑块：

```
<Slider Height="21" Minimum="-255" Maximum="255" x:Name="sld_brightness" />
<Label x:Name="lb_brightness_nb" /> 
```

现在，我尝试根据我的 C# 代码中的滑块值更改标签的值：

```
public void sld_brightness_ValueChanged(object sender, RoutedPropertyChangedEventArgs<double> e)
{
    lb_brightness_nb.Content = (int)sld_brightness.Value;
} 
```

此代码确实编译但不执行任何操作。它不工作。怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T03:53:29.520

你可以直接绑定它；无需为此创建事件处理程序。

```
<Slider Height="21" Minimum="-255" Maximum="255" x:Name="sld_brightness" />
<Label x:Name="lb_brightness_nb"
    Content="{Binding ElementName=sld_brightness,Path=Value,Converter={StaticResource DoubleToStringConverter}}" /> 
```

* * *

如果您想使用事件处理程序，那么看起来您缺少连线：

```
<Slider Height="21" Minimum="-255" Maximum="255" x:Name="sld_brightness"
    ValueChanged="sld_brightness_ValueChanged" /> 
```

**编辑**

要仅显示整数，请使用`IValueConverter`. 使用 将其添加到资源部分`<local:DoubleToStringConverter x:Key="DoubleToStringConverter" />`。

```
public class DoubleToStringConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return Math.Round((double)value);
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T03:55:17.957

我可以看到标签的名称是 lb_brightness_nb 然后是 lb_brightnessValue。您可以更改它的名称以进行编译。

您的代码应如下所示：

```
public void sld_brightness_ValueChanged(object sender, RoutedPropertyChangedEventArgs<double> e)
{
    lb_brightness_nb.Content = sld_brightness.Value;
} 
```

*   您也不需要将 Value 转换为 int 。

让我知道这是你在说什么还是别的什么。

# python - python 3.1 unittest中不可用的断言方法

> ID：12701627
> 
> 赞同：1
> 
> 时间：2012-10-03T03:49:30.607
> 
> 标签：python, assert, unittest2

我是 python 编程的新手，尤其是单元测试框架。由于某种原因，使用 pyDev（py 3.1 解释器）我不能使用所有这些新的断言方法（例如 assertRegexpMatches 等）。

这是一个示例代码：

类TestParser（unittest.TestCase）：

```
 def testskipCommentAndSpaces(self):
        if os.path.isfile(sys.argv[1]):
            #self.vmFilesListPath = sys.argv[1]
            vmFilesListPath = sys.argv[1]
        else:
            #self.vmFilesListPath = get_all_vm_files(sys.argv[1])
            vmFilesListPath = get_all_vm_files(sys.argv[1])
        #parser = Parser(self.vmFilesListPath)
        parser = Parser(vmFilesListPath)
        commands = parser.getCommands()
        for command in commands:
            for token in commands:
                p=re.search(r"(////)",str(token)) 
                **self.assertNotRegexpMatches(str(token),p)** 
```

我得到的是： AttributeError: 'TestParser' 对象没有属性 'assertNotRegexpMatches' 不用说： hasattr(self, 'assertNotRegexpMatches') 返回 false 而“简单”断言方法效果很好。

我确定解释器设置为 3.1 - 即我需要的正确版本（因为我的系统上也安装了 py 2.7）。

谢谢你的帮助，Igor.L

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T04:58:51.630

虽然`unittest`Python 3.1 中的模块有一个[assertRegexpMatches](http://docs.python.org/release/3.1.5/library/unittest.html#unittest.TestCase.assertRegexpMatches)方法，但没有记录在案`assertNotRegexpMatches`的 . 在 Python 3.2 中，`assertRegexpMatches`重命名为[assertRegex](http://docs.python.org/py3k/library/unittest.html#unittest.TestCase.assertRegex)并添加了`assertNotRegex`补充。

请注意，Python 3.1 已经过时，除了关键的安全修复之外不再维护。Python 3.2 和现在刚刚发布的 3.3 中添加了许多功能、修复和主要性能改进。考虑升级到其中之一。

# iphone - 与选择列表交互时 iPhone 自动缩放

> ID：12701630
> 
> 赞同：1
> 
> 时间：2012-10-03T03:49:45.450
> 
> 标签：iphone, mobile, web

我们正在开发一个移动网站框架，最近在 iphone 上发现了以下问题。

问题：当我使用 iPhone 访问表单元素并选择下拉列表时，显示会放大一点以使列表可见。当我选择一个选项并点击完成时，显示保持缩放；我必须捏一下才能回到原来的样子。

有没有办法让屏幕缩放回合适的尺寸？

谢谢/洛克什

# java - 为什么会出错？显示的调试和代码 - 在模拟器中运行

> ID：12701632
> 
> 赞同：-1
> 
> 时间：2012-10-03T03:50:03.857
> 
> 标签：java, android, android-emulator

好的，所以我对这些突然出现的错误感到非常生气。它只是真的我以前从未体验过它们。我在 logcat 中运行，它向我显示了在线错误，但我不知道为什么它会给出错误！

这是完整的图像：

![有效的 XHTML](../Images/7e2fd8fe60ffe62fe724d928a151efcc.png).

这是代码：

```
public class MainActivity extends Activity {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }
    {
        TelephonyManager tm = (TelephonyManager) getSystemService(TELEPHONY_SERVICE);
        if("000000000000000".equals(tm.getDeviceId())) {
            Toast.makeText(this, "Emulator Worked", Toast.LENGTH_LONG).show();
        }
        else {
            Toast.makeText(this, "Emulator Failed", Toast.LENGTH_LONG).show();
        } 
    }
} 
```

任何人都可以指出我看不到的问题吗？如果我使用“try”，我只会在 Eclipse 中弹出更多无法解释的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T03:54:13.813

您是否声明了许可

```
<uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
```

在清单文件中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T04:15:14.880

您抛出异常的原因是因为该行

```
TelephonyManager tm = (TelephonyManager) getSystemService(TELEPHONY_SERVICE); 
```

`onCreate()`在您的应用程序调用活动的方法之前不能调用。如果您查看括号，您将看到调用在`onCreate()`方法之外，因此在对象实例化期间运行。更正括号，以便`TelephonyManager`在`onCreate()`.

换句话说：

```
public class MainActivity extends Activity { 
    public void onCreate(Bundle savedInstanceState) { 
        super.onCreate(savedInstanceState); 
        setContentView(R.layout.activity_main); 

        TelephonyManager tm = (TelephonyManager) getSystemService(TELEPHONY_SERVICE); 
        if("000000000000000".equals(tm.getDeviceId())) { 
            Toast.makeText(this, "Emulator Worked", Toast.LENGTH_LONG).show(); 
        } 
        else { 
            Toast.makeText(this, "Emulator Failed", Toast.LENGTH_LONG).show(); 
        }  
    } 
} 
```

# eclipse - Eclipse CDT 中的“项目引用”和“路径和符号 -> 引用”有什么区别？

> ID：12701633
> 
> 赞同：5
> 
> 时间：2012-10-03T03:50:17.497
> 
> 标签：eclipse, project, eclipse-cdt

打开项目的“属性”对话框时，我在`C/C++ General -> Paths and Symbols -> References`. 紧随其后的是一个名为的条目，`Project References`其中包含一个类似的列表。

列表之间有什么区别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T14:53:35.857

C++ 开发环境指南指出的主要区别是：

> 与 Eclipse Common References 页面不同，此页面允许设置对特定配置的引用。

因此，您可以例如告诉 Eclipse 在构建引用它的项目之前创建引用项目的 Release 构建。

在此处阅读更多内容：[C/C++ 项目属性、路径和符号、项目参考](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.cdt.doc.user/reference/cdt_u_prop_general_pns_ref.htm)

# android - 自动联系人聚合在 android 4 中不起作用

> ID：12701642
> 
> 赞同：1
> 
> 时间：2012-10-03T03:51:56.547
> 
> 标签：android

我使用此代码添加原始联系人

```
ArrayList<ContentProviderOperation> ops =
  new ArrayList<ContentProviderOperation>();

ops.add(ContentProviderOperation.newInsert(RawContacts.CONTENT_URI)
.withValue(RawContacts.ACCOUNT_TYPE, null)
.withValue(RawContacts.ACCOUNT_NAME, null)
.withValue(RawContacts.AGGREGATION_MODE,  RawContacts.AGGREGATION_MODE_DEFAULT)
.build());

....
getContentResolver().applyBatch(ContactsContract.AUTHORITY, ops); 
```

如果我多次添加相同的信息，在 android 2.1 和 2.2 中，所有原始联系人都会出现在一个联系人下。但是在 4.03 和 4.1 中，它们都显示为独立的联系人，尽管它们是相同的。

这是系统的错误还是功能？还是只是因为我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T04:11:46.683

试试下面的代码：

1）在单击关闭按钮上尝试以下操作：

```
 Intent in = new Intent(Intent.ACTION_INSERT);
        in.setType(ContactsContract.Contacts.CONTENT_TYPE);
        startActivityForResult(in,ADD_DATA); 
```

2) ONActivityResult 方法：

```
 @Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    switch (requestCode) {

    case ADD_DATA:
        if(resultCode == RESULT_OK) {

              Uri contactData = data.getData();
                Cursor cur = managedQuery(contactData, null, null, null, null);
                ContentResolver contect_resolver = getContentResolver();

                if (cur.moveToFirst()) {
                    String id = cur.getString(cur.getColumnIndexOrThrow(ContactsContract.Contacts._ID));
                    String lookupkey = cur.getString(cur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.LOOKUP_KEY));
                    String name = "";
                    String no = "";

                    Cursor phoneCur = contect_resolver.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,
                            ContactsContract.CommonDataKinds.Phone.CONTACT_ID + " = ?", new String[] { id }, null);

                    if (phoneCur.moveToFirst()) {
                        name = phoneCur.getString(phoneCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
                        no = phoneCur.getString(phoneCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                        String lookup = phoneCur.getString(phoneCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.LOOKUP_KEY));
                    System.out.println("Contact Name"+name);
                    System.out.println("Number"+no);

                    id = null;
                    name = null;
                    no = null;
                    phoneCur = null;

                contect_resolver = null;
                cur = null;
            }
       }
}

    if(resultCode == RESULT_CANCELED)
        {

        }

        break;
    default:
        break;
    }   
   } 
```

# ruby - ruby koans 评论

> ID：12701643
> 
> 赞同：2
> 
> 时间：2012-10-03T03:52:09.970
> 
> 标签：ruby, unit-testing

> **可能重复：**
> [obj.nil？与 obj == nil](https://stackoverflow.com/questions/1972266/obj-nil-vs-obj-nil)

现在通过 ruby​​ koans 工作，发现这个评论嵌入在一个 .rb 文件中：

```
 # THINK ABOUT IT:
#
# Is it better to use
#    obj.nil?
# or
#    obj == nil
# Why? 
```

我从惯例知道答案是 obj.nil？但我不能告诉你为什么。有人有想法么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T04:12:51.147

原因是覆盖`#==`方法比`#nil?`方法更常见。所以`obj.nil?`会更可靠地做它预期做的事情。

# c++ - 通过矩阵转置优化矩阵乘法

> ID：12701648
> 
> 赞同：3
> 
> 时间：2012-10-03T03:53:04.823
> 
> 标签：c++, c, algorithm, optimization, matrix-multiplication

我正在做一个任务，我转置矩阵以减少矩阵乘法运算的缓存未命中。根据我从几个同学那里了解到的情况，我应该得到 8 倍的提升。但是，我只得到 2 倍……我可能做错了什么？

[GitHub 上的完整源代码](https://gist.github.com/3824894#file_matrix.cpp)

```
void transpose(int size, matrix m) {
    int i, j;
    for (i = 0; i < size; i++) 
        for (j = 0; j < size; j++) 
            std::swap(m.element[i][j], m.element[j][i]);
}

void mm(matrix a, matrix b, matrix result) {
    int i, j, k;
    int size = a.size;
    long long before, after;

    before = wall_clock_time();
    // Do the multiplication
    transpose(size, b); // transpose the matrix to reduce cache miss
    for (i = 0; i < size; i++)
        for (j = 0; j < size; j++) {
            int tmp = 0; // save memory writes
            for(k = 0; k < size; k++)
                tmp += a.element[i][k] * b.element[j][k];
            result.element[i][j] = tmp;
        }
    after = wall_clock_time();
    fprintf(stderr, "Matrix multiplication took %1.2f seconds\n", ((float)(after - before))/1000000000);
} 
```

到目前为止，我做的事情正确吗？

仅供参考：我需要做的下一个优化是使用 SIMD/Intel SSE3

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-03T04:32:43.883

> 到目前为止，我做的事情正确吗？

不，你的转置有问题。在开始担心性能之前，您应该已经看到了这个问题。当您进行任何类型的优化以进行优化时，使用幼稚但次优的实现作为测试*总是一个好主意。*如果不能产生正确的答案，实现 100 倍加速的优化将毫无价值。

另一个有帮助的优化是通过引用传递。您正在传递副本。事实上，您`matrix result`可能永远不会出去，因为您正在传递副本。再一次，你应该已经测试过了。

另一个有助于加速的优化是缓存一些指针。这仍然很慢：

```
for(k = 0; k < size; k++)
    tmp += a.element[i][k] * b.element[j][k];
result.element[i][j] = tmp; 
```

优化器可能会找到解决指针问题的方法，但可能不会。如果您不使用非标准`__restrict__`关键字告诉编译器您的矩阵不重叠，至少不会。缓存指针，因此您不必执行`a.element[i]`、`b.element[j]`和`result.element[i]`. 告诉编译器这些数组不与`__restrict__`关键字重叠仍然可能会有所帮助。

**附录**
查看代码后，需要帮助。先来个小评论。你不是在写 C++。您的代码是带有一点点 C++ 的 C 代码。您使用的是C 标头而不是 C++ 标头，而`struct`不是`class`，`malloc`而不是`new`，`typedef struct`而不仅仅是。`struct`

由于您的`struct matrix`. 说错了就更惨了！将隐式定义的复制构造函数与包含裸指针的类或结构一起使用是在玩火。`m(a, a, a_squared)`如果有人打电话求矩阵的平方，你会被烧得很厉害`a`。^(如果有人期望对2)`m(a, a, a)`进行就地计算，你会被烧得更糟 。`a`

从数学上讲，您的代码仅涵盖了矩阵乘法问题的一小部分。如果有人想将 100x1000 矩阵乘以 1000x200 矩阵怎么办？这是完全有效的，但是您的代码无法处理它，因为您的代码仅适用于方阵。另一方面，您的代码将允许某人将 100x100 矩阵乘以 200x200 矩阵，这没有一点意义。

在结构上，您的代码几乎 100% 保证它会因为使用不规则数组而变慢。`malloc`可以在内存中喷射矩阵的行。如果矩阵在内部表示为连续数组，但访问时就像是 NxM 矩阵一样，您将获得更好的性能。C++ 提供了一些很好的机制来做到这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T20:43:06.893

如果你的任务意味着你必须转置，那么，当然，你应该更正你的转置过程。就目前而言，它进行了两次转置，根本没有转置。j=loop 不应读取

```
j=0; j<size; j++ 
```

但

```
j=0; j<i; j++ 
```

不需要转置以避免以“错误”顺序处理因子矩阵之一的元素。只需互换 j-loop 和 k-loop。暂且不说任何（其他）性能调整，基本的循环结构应该是：

```
 for (int i=0; i<size; i++)
  {
    for (int k=0; k<size; k++)
    {
      double tmp = a[i][k];
      for (int j=0; j<size; j++)
      {
        result[i][j] += tmp * b[k][j];
      }
    }
  } 
```

# java - 在 Android 上使用 OpenCV 提高 Tesseract 性能

> ID：12701649
> 
> 赞同：6
> 
> 时间：2012-10-03T03:53:07.083
> 
> 标签：java, android, opencv, ocr, tesseract

我正在使用实时 OCR 开发 Android 应用程序。我使用 OpenCV 和 Tesseract 库。但性能很差，即使在我的 Galaxy SIII 上也是如此。有什么方法可以提高性能？这是我的代码：

```
 Mat mGray = new Mat();
capture.retrieve(mGray);
Bitmap bmp = Bitmap.createBitmap(mGray.cols(), mGray.rows(), Bitmap.Config.ARGB_8888);
tessBaseApi.setImage(bmp);
String recognizedText = tessBaseApi.getUTF8Text();
Log.i("Reg", recognizedText); 
```

将位图传递给 Tesseract API 会降低 tesseract OCR 的速度吗？在传递给 Tesseract API 之前，我应该执行哪些预处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T08:57:35.850

要尝试的一件事是使用自适应阈值（OpenCV 中的adaptiveThreshold）对图像进行二值化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T17:45:13.880

您可以让 Tesseract 只执行识别通道 1，以便在调用[recog_all_words()](https://github.com/rmtheis/tess-two/blob/master/tess-two/jni/com_googlecode_tesseract_android/src/ccmain/control.cpp)时跳过通道 2 到 9 。

[更改baseapi.cpp](https://github.com/rmtheis/tess-two/blob/master/tess-two/jni/com_googlecode_tesseract_android/src/api/baseapi.cpp)中的以下行 并重建您的 Tesseract 库项目：

```
if (tesseract_->recog_all_words(page_res_, monitor, NULL, NULL, 0)) { 
```

将其更改为：

```
if (tesseract_->recog_all_words(page_res_, monitor, NULL, NULL, 1)) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T09:00:06.533

一些可能使它更快的事情是：

*   在 createBitmap 之前，从 mGray 中选择文本所在的较小区域 - 因此后续更重的方法会处理较小的图像。
*   将 Bitmap.Config.ARGB_8888 更改为 Bitmap.Config.RGB_565 - 您的图像是灰度的，它不需要 ARGB 位图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-19T11:20:37.740

使用多线程，但请注意为 TessBaseAPI 每个线程创建一个实例。不要在不同的线程之间共享它们。创建 N 个线程（N >= 核心数），java 将确保您至少加速核心数倍。

我所做的是创建 N 个线程，它们在自己的上下文中（在 run 方法中）创建 TessBaseAPI 对象，并在循环中等待 OCR 请求直到被中断。

```
 ...
    ...
    @Override
    public void run() {

      TessBaseAPI tessBaseApi = new TessBaseAPI();

      tessBaseApi.init(Ocrrrer.DATA_PATH, "eng");

      setTessVariable(tessBaseApi, "load_system_dawg", "0");
      setTessVariable(tessBaseApi, "load_freq_dawg", "0");
      setTessVariable(tessBaseApi, "load_unambig_dawg", "0");
      setTessVariable(tessBaseApi, "load_punc_dawg", "0");
      setTessVariable(tessBaseApi, "load_number_dawg", "0");
      setTessVariable(tessBaseApi, "load_fixed_length_dawgs", "0");
      setTessVariable(tessBaseApi, "load_bigram_dawg", "0");
      setTessVariable(tessBaseApi, "wordrec_enable_assoc", "0");
      setTessVariable(tessBaseApi, "tessedit_enable_bigram_correction", "0");
      setTessVariable(tessBaseApi, "assume_fixed_pitch_char_segment", "1");
      setTessVariable(tessBaseApi, TessBaseAPI.VAR_CHAR_WHITELIST, "1234567890ABCDEFGHIJKLMNOPQRSTUVWXYZ<");

      Log.d(TAG, "Training file loaded");

      while (!interrupted()) {
        reentrantLock.lock();
        try {
          Log.d(TAG, this.getName() + " wait for OCR");
          jobToDo.await();
          Log.d(TAG, this.getName() + " input arrived. Do OCR");
          this.ocrResult = doOcr(tessBaseApi);
          ocrDone.signalAll();
        } catch (InterruptedException e) {
          return;
        } finally {
          try {
            reentrantLock.unlock();
          } catch (Exception ex) {
          }
        }
      }

    }
    ...
    ... 
```

您可以看到 tessBaseApi 对象是 run 方法的本地对象，因此绝对不共享。

# iphone - 如何从 JSON 数据中获取数据

> ID：12701658
> 
> 赞同：0
> 
> 时间：2012-10-03T03:54:06.353
> 
> 标签：iphone, ios, xcode, json

我有这样的 JSON：

```
[{"ID" : "351", "Name" : "Cam123 ", "camIP" : "xxx.xxx.xxx.xxx",
  "Username" : "admin", "Password" : "damin", "isSupportPin" : "1" },
 {"ID" : "352", "Name" : "Cam122 ", "camIP" : "xxx.xxx.xxx.xxx",
  "Username" : "admin", "Password" : "damin", "isSupportPin" : "0" }
] 
```

我想得到`isSupportPin`result: *1*或*0*。

```
if (x == 1)
{
    mybutton.enabled = TRUE;
}
else
{
    mybutton.enabled = FALSE;   
} 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T04:07:38.503

假设您有一个 NSData 对象，其中包含此数据：

```
// Your JSON is an array, so I'm assuming you already know
// this and know which element you need. For the purpose
// of this example, we'll assume you want the first element
NSData* jsonData = /* assume this is your data from somewhere */
NSError* error = nil;
NSArray* array = [NSJSONSerialization JSONObjectWithData:jsonData options:0 error:&error];
if( !array ) {
  // there was an error with the structure of the JSON data...
}
if( [array count] > 0 ) {
  // we got our data in Foundation classes now...
  NSDictionary* elementData = array[0]; // pick the correct element
  // Now, extract the 'isSupportPin' attribute
  NSNumber* isSupportPin = elementData[@"isSupportPin"];
  // Enable the button per this item
  [mybutton setEnabled:[isSupportPin boolValue]];
} else {
  // Valid JSON data, but no elements... do something useful
} 
```

上面的示例代码片段假设您知道要读取哪个元素（我猜这些是用户行或其他内容）并且您知道 JSON 属性名称是什么（例如，如果`isSupportPin`没有在返回的 JSON 对象中实际定义）数组，它只会返回 nil，它总是会`NO`在你发送它时计算`-boolValue`）。

最后，上述代码是为 ARC 编写的，需要 Xcode 4.5 或 Clang 4.1 以及 iOS 5.0 的部署目标。如果您不使用 ARC、使用旧版 Xcode 构建或针对 5.0 之前的版本，则必须调整代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T03:56:08.777

按照下面的链接，我可以帮助你。

[http://www.xprogress.com/post-44-how-to-parse-json-files-on-iphone-in-objective-c-into-nsarray-and-nsdictionary/](http://www.xprogress.com/post-44-how-to-parse-json-files-on-iphone-in-objective-c-into-nsarray-and-nsdictionary/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T04:05:30.920

在这里，您拥有的是一个`NSArray`of `NSDictionary`s。因此，使用 SBJSON 库，您可以执行以下操作

```
SBJsonParser *parser =  [SBJsonParser alloc] init];
NSArray *data = [parser objectFromString:youJson];
for (NSDictionary *d in data)
{
    NSString *value = [d objectForKey:@"Name"];
} 
```

该库可以在[http://stig.github.com/json-framework/找到](http://stig.github.com/json-framework/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T04:39:13.277

如果您想从 JSONData 获取数据或字典，请使用以下代码..

```
NSString *responseString = [[[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding] autorelease];
NSArray *resultsArray = [responseString JSONValue];
for(NSDictionary *item in resultsArray)
{
    NSDictionary *project = [item objectForKey:@"result"];//use your key name insted of result
    NSLog(@"%@",project);
} 
```

并从下面的链接下载 JSON 库和教程...

[http://mobileorchard.com/tutorial-json-over-http-on-the-iphone/](http://mobileorchard.com/tutorial-json-over-http-on-the-iphone/)

# python - 查找numpy数组元素的范围

> ID：12701659
> 
> 赞同：31
> 
> 时间：2012-10-03T03:54:11.083
> 
> 标签：python, arrays, numpy

我有一个大小为 94 x 155 的 NumPy 数组：

```
a = [1  2  20  68  210  290..
     2  33 34  55  230  340..
     .. .. ... ... .... .....] 
```

我想计算每一行的范围，以便得到 94 个范围。我尝试寻找一个`numpy.range`我认为不存在的功能。如果这可以通过循环来完成，那也很好。

我正在寻找类似的东西`numpy.mean`，如果我们将轴参数设置为 1，则返回 N 维数组中每一行的平均值。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-10-03T03:56:35.530

我想`np.ptp`可能会做你想做的事：

[http://docs.scipy.org/doc/numpy/reference/generated/numpy.ptp.html](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ptp.html)

```
r = np.ptp(a,axis=1) 
```

`r`你的范围数组在哪里。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-03T03:58:59.233

试试这个：

```
def range_of_vals(x, axis=0):
    return np.max(x, axis=axis) - np.min(x, axis=axis) 
```

# ruby - 如何在 sass 上启用调试，所以我可以使用 firesass？

> ID：12701661
> 
> 赞同：1
> 
> 时间：2012-10-03T03:54:23.050
> 
> 标签：ruby, rubygems, sass

我正在尝试安装 firesass - [https://addons.mozilla.org/en-US/firefox/addon/firesass-for-firebug/](https://addons.mozilla.org/en-US/firefox/addon/firesass-for-firebug/)

它要求我添加：

```
Sass::Plugin.options[:debug_info] = true 
```

在 config/environment.rb 上，但我找不到那个文件。我在哪里可以准确地添加该行？

我有 Windows 7，我像这样安装了 Ruby 和 sass： - [http://damodarbashyal.hubpages.com/hub/Ruby-SASS-language-is-making-my-life-easier-to-manage-CSS-update](http://damodarbashyal.hubpages.com/hub/Ruby-SASS-language-is-making-my-life-easier-to-manage-CSS-update)

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T09:34:45.033

设置说明与 Rails 相关。如果您使用 Rails，那么您的 Rails 项目中将有一个文件 config/environment.rb。

从命令行调用 sass 时，只需要添加 flag 即可`--debug-info`。

# c# - 无法加载 DLL XXX.dll，找不到指定的模块。（来自 HRESULT 的异常：0x8007007E）

> ID：12701664
> 
> 赞同：3
> 
> 时间：2012-10-03T03:54:50.023
> 
> 标签：c#, dll, .net-4.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-07T14:50:49.077

很老的帖子，但首先出现在谷歌，所以我要发布我的解决方案：我正在用 C++ 编写一个最小的 DLL，我将它集成到一个最小的 C# 控制台应用程序中，并得到了与你上面所说的相同的错误。最后的解决方法很简单：您的目标 PC 可能没有安装适当的 VS 可再发行软件包。就我而言（VS 2013），这里是这个：http: [//www.microsoft.com/en-us/download/details.aspx?id=40784](http://www.microsoft.com/en-us/download/details.aspx?id=40784)由于某种原因，它无法从手动 system32 文件夹...真是一个怪异的错误，花了我半天的时间才找到。我在网上没有找到这个，现在将做一些交叉发布......

# python - WTforms 表单未提交但未输出验证错误

> ID：12701671
> 
> 赞同：3
> 
> 时间：2012-10-03T03:55:36.277
> 
> 标签：python, flask, wtforms

我正在尝试通过`flask-uploads`工作和运行一些障碍来上传文件。我将向您展示我的`flask`视图功能，html，希望有人能指出我所缺少的。

基本上发生的事情是我提交了表单，但`if request.method == 'POST' and form.validate():`在视图功能中检查失败。它跳下来显示模板。wtforms 并没有在表单上给我任何错误，所以我想知道为什么它没有通过 if 语句。

我在看什么？

设置烧瓶上传：

```
# Flask-Uploads
photos = UploadSet('photos',  IMAGES)
configure_uploads(app, (photos)) 
```

看法：

```
def backend_uploadphoto():
    from Application import photos
    from Application.forms.backend import AddPhotoForm

    clients = Client.query.all()
    events = Event.query.order_by('date').all()

    form = AddPhotoForm(request.form, csrf_enabled=True)

    if request.method == 'POST' and form.validate():
        from uuid import uuid4

        uuid = uuid4()
        filename = '{0}.jpg'.format(uuid)

        photo = Photo(uid=uuid, client=request.form['client'], event=request.form['event'])

        photofile = photos.save(request.files.get('photo'), photo.filename)

        return redirect(url_for('backend'))

    return render_template('backend/addphoto.html', form=form, clients=clients, events=events) 
```

形式：

```
class AddPhotoForm(Form):
    photo = FileField('Photo')
    client = IntegerField('Client:')
    event = IntegerField('Event:') 
```

HTML：

```
<form action="{{url_for('backend_uploadphoto')}}" method="post">
        <p>
            {{form.client.label}}
            <select name="client">
                {% for client in clients %}
                <option value="{{client.id}}">{{client.fullname}}</option>
                {% endfor %}
            </select>
            {{form.client.errors}}
        </p>

        <p>
            {{form.event.label}}
            <select name="event">
                {% for event in events %}
                <option value="{{event.id}}">{{event.name}}</option>
                {% endfor %}
            </select>
            {{form.event.errors}}
        </p>

        <p><label for="photo">Photo:</label>{{form.photo}} <input type="submit" value="Upload"> {{form.photo.errors}}</p>
    </form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T04:16:12.227

您有`csrf_enabled=True`，但您的表单没有任何 CSRF 保护，因为您不是从`SecureForm`. 如果您想启用 CSRF，请阅读[文档](http://packages.python.org/WTForms/ext.html#module-wtforms.ext.csrf)并更新您的表单定义。

如果这是无意的，您可以删除`csrf_enabled=True`并且您的逻辑将按预期工作。

要启用 CSRF 保护，有几个步骤：

1.  继承自`SecureForm`
2.  在表单中创建`generate_csrf_token`和`validate_csrf_token`方法。这些方法将生成一个唯一的密钥并在它不验证时引发错误。
3.  添加`{{ form.csrf_token }}`到您的模板。

# string - 对文本索引进行单元测试

> ID：12701675
> 
> 赞同：1
> 
> 时间：2012-10-03T03:56:21.457
> 
> 标签：string, unit-testing, data-structures, indexing, googletest

考虑一个文本索引，例如后缀树或支持*Count*查询（模式的出现次数）和*Locate*查询（模式的所有出现的位置）的后缀数组。您将如何对这样的课程进行单元测试？

我想到的是生成一个*大*的随机字符串，然后从这个大字符串中提取一个随机子字符串，并将两个查询的结果与天真的实现（例如 string::find）进行比较。我的另一个想法是找到`l`原始字符串中出现的最频繁的长度子字符串（可能使用一种简单的方法）并使用这些子字符串来测试索引。

这不是最好的方法，那么文本索引单元测试的好的设计是什么？

万一这很重要，这是在 C++ 中使用 googletest。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T04:04:26.820

我认为给定文本上的 Count 查询（模式的出现次数）和 Locate 查询（模式的所有出现的位置）不必对方法设置期望，而是您可以设置默认值返回值。

所以，利用`Mocks`和`Stubs`这里。

简单的例子，[http://code.google.com/p/googlemock/wiki/ForDummies](http://code.google.com/p/googlemock/wiki/ForDummies)

如需进一步参考，[http://code.google.com/p/googlemock/wiki/CookBook](http://code.google.com/p/googlemock/wiki/CookBook)

# java - 适合 JTable 以填充 JPanel

> ID：12701680
> 
> 赞同：1
> 
> 时间：2012-10-03T03:57:16.993
> 
> 标签：java, swing, jtable

嗨，这是我的表格设置代码：

```
String [] column = {"MacAddress","PcName","OperatingSystem","IpAddress","Port","Status"};
    model = new DefaultTableModel(0,column.length);
    model.setColumnIdentifiers(column);
    mainTable = new JTable(model);
    mainTable.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
    for(int i=0;i<=column.length-1;i++){
    mainTable.getColumnModel().getColumn(i).setPreferredWidth(300);
    }
    pane = new JScrollPane(mainTable);
    pnlTabel = new JPanel();
    pnlTabel.setBorder(BorderFactory.createTitledBorder(""));
    pnlTabel.setPreferredSize(new Dimension(dim.width*70/100, dim.height*60/100));
    pnlTabel.add(pane);
addMainPanel(pnlTabel); 
```

这是我的 addMainPanel() 函数：

```
public void addMainPanel(Component pnl){
    mainPanel.add(pnl);
    mainPanel.revalidate();
} 
```

这是我的 mainPanel 代码：

```
 mainPanel = new JPanel();
mainPanel.setLayout(new FlowLayout(FlowLayout.LEFT));
add(mainPanel,"Center"); 
```

我正在为我的框架使用边框布局：

```
setLayout(new BorderLayout(0,0)); 
```

我的问题是，即使我使用这组代码来设置我的 JTable 以适应，但它似乎都失败了，这段代码：

```
 mainTable.setAutoResizeMode(JTa![enter image description here][1]ble.AUTO_RESIZE_OFF);
for(int i=0;i<=column.length-1;i++){
mainTable.getColumnModel().getColumn(i).setPreferredWidth(300);
} 
```

何时使用该代码，我的 jtable 不会调整大小，而只会在底部添加水平滚动条。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T11:59:39.073

没有冒犯的意思，但是..您的代码以及因此您的问题一团糟；-)另外，您没有解释您到底想要实现什么。

尝试解开，采用嵌套布局/调整大小特征（如片段所示，可能不完整）：

```
frame // BorderLayout
   mainPanel // FlowLayout
       pnlTabel  // FlowLayout, hard-coded prefSize
           pane // scrollPane 
               mainTable // auto-resize-off 
```

旁白：故意不告诉名称以证明混合命名方案往往会导致整体混乱:-) 无论您决定使用 preFixing 还是 postFixing 一些与类型相关的标记，但如果您确实保持一致，这并不重要。

在该层次结构中，FlowLayout 有两个级别，它们*基本上*会将其子级布局在各自的首选项中并相应地调整自己的首选项，*以免*首选项在 pnlTable 级别上硬编码：但是表的首选项将被更改（通过更改列首选项）它*不能*进一步冒泡，因为......硬编码首选项导致*不*计算其大小（layoutManager和uiDelegate都没有，两者都没有机会这样做）

另一个问题 - 更有趣的一个 :-) - JScrollPane 在

*   根据视图是否实现 Scrollable，从其视图的 pref/scrollablePrefViewportSize 计算自己的 prefSize（JTable 这样做，虽然方式很糟糕）
*   作为一个validationRoot：使视图（或任何子级）无效不会在层次结构中进一步冒泡

假设如果列的 prefWidts 发生变化，您希望表的 scrollPane 增长，则需要调整两件事：

*   实现表的 getPreferredScrollableWidth 以返回基于列的 prefWidth 计算的值
*   重新验证层次结构中更高的容器

一些可以玩的代码：

```
final JTable table = new JTable(50, 10) {
    // properties to base a reasonable prefScrollable size
    int visibleColumns = 3;
    int visibleRows = 10;
    // hard-coded default in super
    Dimension dummySuper = new Dimension(450, 400);
    @Override
    public Dimension getPreferredScrollableViewportSize() {
        Dimension dim =  super.getPreferredScrollableViewportSize();
        if (!dummySuper.equals(dim)) return dim;
        dim = new Dimension();
        for (int column = 0; column < Math.min(visibleColumns, getColumnCount()); column++) {
            dim.width += getColumnModel().getColumn(column).getPreferredWidth();
        }
        dim.height = visibleRows * getRowHeight();
        return dim;
    }

};
table.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
for (int i = 0; i < table.getRowCount(); i++) {
    table.setValueAt("row: " + i, i, 0);
}
JComponent tablePanel = new JPanel();
tablePanel.add(new JScrollPane(table));

Action sizeColumns = new AbstractAction("size columns") {
    int prefWidth = 75;
    @Override
    public void actionPerformed(ActionEvent e) {
        int newWidth = prefWidth + 15;
        for (int i = 0; i < table.getColumnCount(); i++) {
            if (table.getColumnModel().getColumn(i).getPreferredWidth() == prefWidth)
                table.getColumnModel().getColumn(i).setPreferredWidth(newWidth);
        }
        prefWidth = newWidth;
        // revalidate "higher up" than the table itself
        frame.revalidate();
    }
};
frame.add(new JButton(sizeColumns), BorderLayout.SOUTH); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T13:59:38.313

如果要 a`JTable`填充可用空间，则应将其放在`JPanel`具有`BorderLayout`布局管理器的 a 中。也不要忘记`JScrollPane`确保如果表格不适合视图（例如太多行），滚动条将出现：

```
JFrame frame = new JFrame();
// set up frame

JTable table = new JTable();
// Set up table, add data

// Frame has a content pane with BorderLayout by default
frame.getContentPane().add( new JScrollPane( table ), BorderLayout.CENTER ); 
```

如果您希望在表格之外显示其他内容，您可以将这些内容添加到内容面板的 NORTH、SOUTH、EAST、WEST 部分（如果要放置更多组件，可以将其包装到其他面板中）。

# sql - 数据透视表并获取多个参数的聚合

> ID：12701683
> 
> 赞同：1
> 
> 时间：2012-10-03T03:58:16.743
> 
> 标签：sql, sql-server-2008, excel, ssas

这是我的基表：

```
Region year carsSold bicyclesSold
RegX   1999       50          100
RegX   2000      150           30
RegY   1998       60           40 
```

我想要的结果是：

```
Region Year          1998 1999 2000
RegX   carsSold         0   50  150
       bicyclesSold     0  100   30  
RegY   carsSold        60    0    0
       bicyclesSold    40    0    0 
```

有没有办法在 sql server 中做到这一点？有没有办法在excel中做到这一点？这种数据表示的最佳解决方案是什么。你能推荐任何适合的软件吗？

我知道 sql server 中的数据透视表，但不能写任何能给出接近我想要的结果的东西

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T05:37:02.297

```
select P.Region,
       P.Item,
       isnull(P.[1998], 0) as [1998],
       isnull(P.[1999], 0) as [1999],
       isnull(P.[2000], 0) as [2000]
from YourTable
unpivot (ItemsSold for Item in (carsSold, bicyclesSold)) as U
pivot (sum(ItemsSold) for year in ([1998], [1999], [2000])) as P
order by P.Region, P.Item 
```

[SQL小提琴](http://sqlfiddle.com/#!3/1f178/3/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T08:22:10.717

作为替代，仅符合 ANSI-92 的代码。哎呀，你甚至可以在 SQLite 中运行它，除了关于方括号列名的部分。

当你说的时候我把你**​​当真了**`exactly what I want`

```
select
  case when veh.iscar=1 then t.region else '' end Region,
  veh.type [Year],
  max(case when t.year = 1998
      then carsSold*iscar + bicyclesSold*(1-iscar) else 0 end) [1998],
  max(case when t.year = 1999
      then carsSold*iscar + bicyclesSold*(1-iscar) else 0 end) [1999],
  max(case when t.year = 2000
      then carsSold*iscar + bicyclesSold*(1-iscar) else 0 end) [2000]
from YourTable t
cross join (
  select 'carsSold',1 union all
  select 'bicyclesSold',0) veh(type,iscar)
group by t.region, veh.type, veh.iscar
order by t.region, type desc;

>>
Region  Year         1998   1999    2000
RegX    carsSold        0   50      150
        bicyclesSold    0   100     30
RegY    carsSold        60  0       0
        bicyclesSold    40  0       0 
```

# powershell - 如何使用 powershell 脚本向 Web 应用程序添加新的自定义属性？

> ID：12701687
> 
> 赞同：0
> 
> 时间：2012-10-03T03:58:27.757
> 
> 标签：powershell, sharepoint-2010, properties

我需要使用 powershell 脚本将自定义属性添加到 web 应用程序中的所有 rootweb 吗？怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T04:22:45.297

通常，您可以使用 New-Object 来创建新的自定义对象。

```
$customObject = New-Object -Property @{"Name"="Ravi";"Age"=30} -TypeName PSObject
$customObject

                                                        Age Name
                                                        --- ----
                                                         30 Ravi 
```

或者，您可以使用 Update-TypeData cmdlet 扩展现有的 .NET 类型。在 PowerShell v2 中，这需要为类型数据创建自定义 ps1xml 格式文件。如何创建 PS1XML 格式文件： http: [//msdn.microsoft.com/en-us/library/windows/desktop/dd878339 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd878339%28v=vs.85%29.aspx)

在 PowerShell v3 中，这要容易得多。使用相同的 Update-TypeData cmdlet，您可以扩展会话中的属性。但是，对对象属性所做的更改仅存在于当前会话中。每次打开 PowerShell 控制台或任何其他 PowerShell 主机时，都需要使用 PowerShell 配置文件进行这些更改。

在 PowerShell 3.0 中添加扩展类型：[http ://www.powershellmagazine.com/2012/08/29/pstip-adding-extended-types-the-powershell-3-0-way/](http://www.powershellmagazine.com/2012/08/29/pstip-adding-extended-types-the-powershell-3-0-way/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:22:51.993

就像是

```
#Add-PSSnapin Microsoft.Sharepoint.Powershell
$spWeb = Get-SPWeb -Identity "http://sp_site..."
$myRootWeb = $spWeb.RootWeb | Add-Member NoteProperty MyProp -Value test -PassThru
$myRootWeb.MyProp 
```

# java - 收到错误消息“java.lang.Error：未解决的编译...”

> ID：12701689
> 
> 赞同：0
> 
> 时间：2012-10-03T03:58:35.260
> 
> 标签：java, compiler-errors, runtime-error, java.util.scanner

以下代码中的错误是什么？我找不到错误。但是我收到一条错误消息：

```
 Exception in thread "main" java.lang.Error: Unresolved compilation problem: at CircleArea.main(CircleArea.java:6) 
```

代码是：

```
import java.util.Scanner;

public class CircleArea{
   public static void main (String args[])
   {
     Scanner inputFromUser = new Scanner (System.in);
     int radius = inputFromUser.nextInt();

     double Area =Math.PI *radius*radius;

     System.out.println("Area of the circle is : " + Area);
   }     
 } 
```

# javascript - jquery占位符插件'jQuery未定义'

> ID：12701693
> 
> 赞同：2
> 
> 时间：2012-10-03T03:58:56.243
> 
> 标签：javascript, jquery, html

由于 jQuery 占位符脚本，我在[此页面上](http://www.environment.nsw.gov.au/askEnvironmentLineapp/)遇到问题，在 Chrome 和 IE 中出现“未定义 jQuery”错误。

*   jQuery 在插件脚本之前声明。
*   据我所知，与 $ 没有冲突

我真的很难过这一点，任何建议都会很棒。干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T04:06:44.040

问题来自[http://www.environment.nsw.gov.au/js/decc/ignitionSuite.js](http://www.environment.nsw.gov.au/js/decc/ignitionSuite.js)，它在 iframe 中动态包含 jQuery 和 jquery.placeholder：

```
jqPath = "http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"
jqPlaceholderPath = "http://www.environment.nsw.gov.au/js/decc/jquery.placeholder.min.js"
...
loadjscssfile(jqPath, "js");
...
loadjscssfile(jqPlaceholderPath, "js"); 
```

由于脚本是动态包含的，因此在第一个加载之前，浏览器不需要阻止执行。这意味着 jquery.placeholder 完全有可能在 jQuery 之前先加载，并发生错误。

# c++ - 使用指针将 uint16_t 值注入 uint8_t 数组？

> ID：12701696
> 
> 赞同：0
> 
> 时间：2012-10-03T03:59:07.300
> 
> 标签：c++

我正在尝试使用指针将 uint16_t 值插入 uint8_t 数组。我认为下面会起作用，但无法做到。关于问题是什么的任何线索？

```
uint8_t myarray[10];
uint16_t value = 10000;
uint16_t * myptr = (uint16_t *)(myarray+2);
*myptr = value; 
```

我知道我可以这样做，但为什么上面不起作用？

```
uint8_t myarray[10];
uint16_t value = 10000;
uint8_t * myptr = (myarray+2);
uint8_t * myptr2 =(myarray+3);
*myptr = value>>8;
*myptr2 =value; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T04:24:53.617

第二个版本将最高有效字节（值为 39）写入`myarray[2]`，将最低有效字节（值为 16）写入`myarray[3]`。

第一个版本将按照您计算机的[*字节序确定的顺序写入两个字节。*](http://en.wikipedia.org/wiki/Endianness)大多数现代计算机都是*little-endian*，这意味着多字节整数值的最低有效字节首先出现在内存中 - 所以这个版本将以与另一个版本相反的顺序写入这两个字节。

我假设这就是您所看到的问题；如果是其他事情，那么请比“无法做到”更具体。

此外，第一个版本在技术上具有未定义的行为，并且可能在一台足够奇特的计算机上做一些完全出乎意料的事情。我建议你坚持使用像第二个版本这样定义明确的代码；如果分析显示定义明确的代码太慢，并且狡猾的指针别名代码更快，则仅使用可疑的优化。我还建议使用`reinterpret_cast`而不是邪恶的 C 风格演员；它不会改变行为，但更容易看出发生了一些不稳定的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T04:41:04.080

你可以这样做：

```
uint8_t * value_data = reinterpret_cast<uint8_t*>(&value); // cast to `(unsigned) char*` is allowed by standard
myarray[0] = value_data[0];
myarray[1] = value_data[1]; 
```

# netty - Netty 4.x Http 多部分包

> ID：12701697
> 
> 赞同：1
> 
> 时间：2012-10-03T03:59:41.940
> 
> 标签：netty

最新的 Netty 4 Alpha 版本中的 io.netty.handler.codec.http.multipart 包在哪里？

一体机JAR文件netty-4.0.0.Alpha5.jar没有打包，github的master分支里也没有代码...

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:08:23.643

它还没有移植……它在待办事项列表上，应该在 final 被剪掉之前完成。

# map - Hadoop - 大数据上的作业提交时间

> ID：12701709
> 
> 赞同：-1
> 
> 时间：2012-10-03T04:01:21.947
> 
> 标签：map, hadoop, reduce

有没有人在提交大数据作业时遇到任何问题。未压缩的数据约为 5-10 TB，文件大小约为 500K。当我们尝试提交一个简单的 java map reduce 作业时，它通常会花费一个多小时在 getsplits() 函数调用上。并且需要几个小时才能出现在工作跟踪器中。有没有可能的解决方案来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:29:41.150

对于 500k 个文件，您需要花费大量时间树遍历来查找所有这些文件，然后需要将这些文件分配给 InputSplits 列表（getSplits 的结果）。

正如 Thomas 在他的回答中指出的那样，如果执行作业提交的机器分配给 JVM 的内存量很少，那么您将看到 JVM 执行垃圾收集以尝试查找构建所需的内存的问题这些 500K 文件的拆分。

更糟糕的是，如果这 500K 文件是可拆分的，并且大于单个块大小，那么您将获得更多输入拆分来处理文件（大小为 1GB 的文件，块大小为 256MB，您ll默认获取4个map任务来处理这个文件，假设输入格式和文件压缩支持拆分文件）。如果这适用于您的工作（查看为您的工作生成的映射任务的数量，是否超过 500k？），那么您可以通过将`mapred.min.split.size`配置属性修改为大于当前块的大小来强制创建更少的映射器大小（对于上一个示例，将其设置为 1GB 意味着您将获得一个映射器来处理文件，而不是 4 个）。这将有助于 getSplits 方法的性能，getSplits 的结果列表将更小，需要更少的内存。

问题的第二个症状是将输入拆分序列化为文件（客户端）所需的时间，然后是作业跟踪器端的反序列化时间。500K+ 的拆分需要时间，如果 JVM 内存限制较低，jobtracker 也会出现类似的 GC 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:46:05.707

这在很大程度上取决于您的提交服务器（或您的笔记本电脑客户端）有多“强大”，也许您需要升级 RAM 和 CPU 以使 getSplits 调用更快。

我相信您在那里遇到了交换问题，因此计算时间是平时的数倍。

# sql-server - 可以在 Windows 7 Home Premium 上安装 SQL Server Developer Edition 吗？

> ID：12701710
> 
> 赞同：1
> 
> 时间：2012-10-03T04:01:32.620
> 
> 标签：sql-server, windows, sql-server-2008, windows-7

我们计划为我们的组织购买 OS 和 RDBMS。我想知道SQL server 2008 Developer Edition 是否：

[http://www.amazon.com/Developer-Edtn-2008-32-bit-English/dp/B003KWQBQ2/ref=sr_1_2?s=software&ie=UTF8&qid=1349233840&sr=1-2&keywords=SQL+Server+Developer+Edition](https://rads.stackoverflow.com/amzn/click/com/B003KWQBQ2)

安装在 Windows 7 家庭高级版上：

[http://www.amazon.com/Windows-Premium-64bit-System-Builder/dp/B004Q0PT3I/ref=sr_1_1?s=software&ie=UTF8&qid=1349234718&sr=1-1&keywords=windows+7+os](https://rads.stackoverflow.com/amzn/click/com/B004Q0PT3I)

还是两者不相容？请提出你的想法。我知道它安装在 Windows 7 Ultimate 上，因为我的机器上有它，但不确定 Home Premium。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T04:27:37.260

[硬件和软件要求](http://msdn.microsoft.com/en-us/library/ms143506%28SQL.105%29.aspx)似乎表明它受支持。

# heroku - Heroku 行数不正确

> ID：12701711
> 
> 赞同：22
> 
> 时间：2012-10-03T04:01:35.323
> 
> 标签：heroku

我一直在将 heroku 用于我的一个应用程序，但由于行数已超过 10,000 行，它今天已关闭。

不过，我不明白这个数字是如何得出的，因为 rails 告诉我，我的数据库中只有大约 2000 条记录。

运行 pg:info，我看到以下内容：

```
Plan:        Dev
Status:      available
Connections: 1
PG Version:  9.1.5
Created:     2012-09-25 03:12 UTC
Data Size:   11.0 MB
Tables:      9
Rows:        15686/10000 (Write access revoked)
Fork/Follow: Unavailable 
```

谁能向我解释，尽管数据库中只有 2,000 条记录，但我似乎有 15,000 行？

谢谢！

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-03T13:54:04.517

仅有 Rails 是不够的。Heroku 有一个不错的 SQL 控制台，您可以通过以下方式访问：

```
heroku pg:psql YOUR_DB_URL 
```

然后你可以编写这个查询来获得每个表的记录排名：

```
SELECT schemaname,relname,n_live_tup 
  FROM pg_stat_user_tables 
  ORDER BY n_live_tup DESC; 
```

如果您只需要更新的数字。行数，您可以使用

```
SELECT sum(n_live_tup) FROM pg_stat_user_tables; 
```

请注意，您可以在配置中同时拥有新的开发计划数据库和旧的共享数据库（通过 访问它`heroku pg:info`）。您必须插入正确的数据库 url，可能是带颜色的。

`truncate`在任何 sql和`Rows`要更新的计数之间允许 30 分钟的延迟。

[顺便说一句，在我的情况下， http:](http://heroku.com) //heroku.com 上的 Web 控制台已更新为正确的数字。在我的 sql 查询期间。可能是heroku toolbelt 控制台更新，比较慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-07T19:23:41.223

我就此联系了 Heroku 支持，他们运行以下命令来获取我的号码...

```
$ heroku pg:info 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-25T08:44:01.830

30 分钟对我来说还不够，所以我进行了备份并恢复了数据库。然后我的应用重新上线。

# c - C中atof的问题

> ID：12701712
> 
> 赞同：2
> 
> 时间：2012-10-03T04:02:08.177
> 
> 标签：c, unix

你可以说我对 C 比较陌生，但我需要澄清一个问题。我有一个 char[] 代表一个数字。如果这个 char[] 比 LONG_MAX 长，我想告诉用户它太长了。问题是当我将它的值与浮点数进行比较时，它会被截断。这就是我的意思。

```
int main(int argc, char ** argv) {

  char str[] = argv[1]; /* I set it to 9223372036854775809, only +1 higher than LONG_MAX */ 
  double l = atof(str); 
  double j = LONG_MAX; 

  printf("%lf\n", l); /* This prints 9223372036854775808.000000, which is LONG_MAX ??? WHY?? */
  printf("%lf\n", j); /* This prints same as above, 9223372036854775808.000000 */ 

  printf("%s\n", l > j ? "true" : "false"); /* false */

  return 0; /* what am I doing wrong? */

} 
```

更新：

我尝试了您的 iret 解决方案，但仍然遇到相同的舍入问题

```
 j = LONG_MAX; 
  int iret = sscanf (str, "%lf", &l);
  if (iret != 1)
    return 0; /* conversion was bad */
  else {
    if (l > j || l < -(j))
      return 0; /* too small or too large */
  }

  printf("%lf\n", l); 
  printf("%lf\n", j);

  printf("%s\n", l > j ? "true" : "false"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T04:36:01.020

使用 可以很容易地检查溢出`strtol`，但它需要一些额外的工作。

```
const char *str = ...;
char *e;
long x;

errno = 0;
x = strtol(str, &e, 0);
if (!*str || *e) {
    fprintf(stderr, "invalid number: %s\n", str);
    exit(1);
}
if ((x == LONG_MAX || x == LONG_MIN) && errno == ERANGE) {
    fprintf(stderr, "number too large: %s\n", str);
    exit(1);
} 
```

现在，让我们谈谈`strtod`(or `atof`，这只是 ) 的损坏版本的问题`strtod`。

如果转换`9223372036854775809`为a `double`，那么`9223372036854775808`是**正确**的。A`double`具有 53 位精度，而 64 位`long`具有 64 位。一旦开始使用浮点数，就需要为舍入做好准备。

例如，以下代码中存在舍入错误。你能发现吗？

```
double x = 0.1; 
```

**脚注：**我在这里假设 64 位`long`和 IEEE 双精度`double`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T04:06:27.460

根据 atof 的“man”页面：

> [http://linux.die.net/man/3/atof](http://linux.die.net/man/3/atof)
> 
> atof() 函数将 nptr 指向的字符串的初始部分转换为双精度。... atof() 不检测错误。

这就是为什么我更喜欢使用“sscanf”的原因：

`int iret = sscanf (SOME_TEXT, "%lf", &SOME_DOUBLE);`

如果“iret != 1”，那么我知道发生了错误，并且可以采取适当的措施。

恕我直言...

PS：

你为什么不声明“l”和“j”。调皮调皮！您应该始终声明您的变量，即使在 FORTRAN 和 Basic 中也是如此；）

为什么不将它们声明为 float ("%f") 或 double ("%lf")？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T04:48:38.283

您的 long 似乎是 63 位。浮点数有 23 个有效位（或 24 个带前导 1）。您的 long 在高 24 位中完全相同。所以他们变得一样。浮点数基本上是尾数* 2 ^ 指数。指数确保幅度仍然匹配。但是你只有 23 位尾数。所以它变成了top23bitsoflong*2^(numberofremainingbits)。忽略前导偏差和指数偏差，这有点简化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T04:35:45.040

我相信您的两个输入都获得值“9223372036854775808.000000”的原因是由于浮点近似的精度限制。

顺便说一句，值不是`LONG_MAX`，而是`LONG_MAX + 1 -> 2^63`。

根据定义，`LONG_MAX`精确的表示（作为整数）需要 63 位精度。但是，在 64 位浮点表示中`double`，*只有 53 位精度*，因为需要其他位来存储符号和指数。这就是为什么两者都`LONG_MAX`被`LONG_MAX + 2`舍入到`9223372036854775808 <=> 2^63`.

为了正确处理这种情况，也许看看[`strtol`](http://www.cplusplus.com/reference/clibrary/cstdlib/strtol/)当输入超出范围时哪个会设置错误代码。

# ios5 - 在 viewController 中响应 LocalNotification

> ID：12701714
> 
> 赞同：0
> 
> 时间：2012-10-03T04:02:26.510
> 
> 标签：ios5, ios6, uilocalnotification

我需要在主 viewController 上响应我的应用程序上的 LocalNotification。我的问题是该系统似乎是`didRecieveLocalNotification`我所在的位置，但我需要在主视图中采取一些措施。

我的问题是，该操作因全局类变量（布尔值）而异，据我所知，从中访问 viewController 的唯一方法`didRecieveLocalNotification`是将视图类重新创建为新的 init alloc，这将破坏所述的当前值多变的。

如何在不破坏视图上的变量或任何内容的情况下从`appdelegate`'s调用 viewController 方法。`didRecieveLocalNotification`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T04:12:06.973

假设您所指的主 viewController 是您的应用程序委托中应该拥有的 UIWindow 的根视图控制器，您可以执行以下操作。

```
[(viewController*)[self.window rootViewController] themethodyouwanttocall]; 
```

从您的问题的措辞来看，这应该从应用程序委托调用根视图控制器上的方法。

# javascript - 第二次注册时的javascript事件监听器不起作用

> ID：12701716
> 
> 赞同：1
> 
> 时间：2012-10-03T04:02:56.433
> 
> 标签：javascript, javascript-events

我有两个 js 函数，如下所示，函数 nexPage 工作正常，但调用事件 webkitAnimationEnd 时的 previousPage 函数不能按预期工作。链接到 jsfiddle：[链接到 jsfiddle](http://jsfiddle.net/K8Tuy/24/)

```
var currentPage = 0;
    function nextPage()
    {   
        alert(currentPage);
        var pages   = document.getElementsByClassName('pages');
        pages[currentPage].className = "pages pageanim";
        pages[currentPage].addEventListener('webkitAnimationEnd', function(){
        this.style.left     = '0%';
        this.style.zIndex   = currentPage;
        currentPage = currentPage+1;
    }, false);

}

    function previousPage()
    {   
        //alert(currentPage);
        var pages   = document.getElementsByClassName('pages pageanim');
        pages[0].className = "pages revpageanim";

        pages[0].addEventListener('webkitAnimationEnd', function(){
        this.style.left     = '49%';
        this.style.zIndex   = currentPage+1;
        currentPage = currentPage-1;
    }, false);
    } 
```

这是我的html

```
 <body onLoad="applyZindex();">
   <!-- Add your site or application content here -->
  <header><button class="nav left" onClick="previousPage();">&lt;&lt;prev</button>
<h3 class="left">Previewer (TM)
</h3><button class="nav right" onClick="nextPage();">
next>></button></header>
            <section style=" position:relative;">
            <img src="img/1.jpg" alt="page1" title="page1" class="pages" />
            <img src="img/2.jpg" alt="page2" title="page2" class="pages" />
            <img src="img/3.jpg" alt="page1" title="page1" class="pages" />
            <img src="img/4.jpg" alt="page2" title="page2" class="pages"  />
            </section>
            <footer></footer>
        </body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T05:45:09.510

[http://jsfiddle.net/K8Tuy/28/](http://jsfiddle.net/K8Tuy/28/)给你；

`removeEventListener`因此，如果您也每次点击，您都需要`addEventListener`每次点击；一般来说，每次点击都不是一个好主意`addEventListener`。它应该被初始化一次，你的逻辑应该在按钮内。

```
var currentPage = 0;
    function nextPage()
    {   
        var pages   = document.getElementsByClassName('pages');
        pages[currentPage].className = "pages pageanim";
        pages[currentPage].addEventListener('webkitAnimationEnd', function(){
            this.style.left     = '0%';
            this.style.zIndex   = currentPage;
            pages[currentPage].className = "pages";
            currentPage = currentPage+1;
            this.removeEventListener('webkitAnimationEnd',arguments.callee,false);
            console.log(currentPage);
        }, false);

}

    function previousPage()
    {   
        //alert(currentPage);
        var pages   = document.getElementsByClassName('pages');
        page = pages[currentPage-1];
        page.className = "pages revpageanim";

        page.addEventListener('webkitAnimationEnd', function(){
            currentPage = currentPage-1;
            this.style.left     = '49%';
            page.style.zIndex   = pages.length-currentPage;
            page.className = "pages";
            this.removeEventListener('webkitAnimationEnd',arguments.callee,false);
            console.log(currentPage);
        }, false);
    }​ 
```

编辑： http :
[//jsfiddle.net/K8Tuy/35/——](http://jsfiddle.net/K8Tuy/35/)`arguments.callee`替换为“函数名”

# c# - 如果我添加验证，jQuery 对话框不会触发

> ID：12701721
> 
> 赞同：2
> 
> 时间：2012-10-03T04:04:04.290
> 
> 标签：c#, validation, jquery-dialog

我想弹出一个 jquery 对话框表单以允许用户填写他们的数据。如果我向对话框中的某些字段添加验证，则单击 link_button 时对话框不会触发。但是，如果我删除这些验证，它将弹出。任何人都可以解释并解决我的问题吗？我是新的。

我把我的jquery放在我的代码后面：

```
protected void link_clicked(object sender, EventArgs e)
{
    string script = @"$('#createDialog').dialog({modal:true, show:'fold',
        hide:'fold'});";
    ClientScript.RegisterStartupScript(GetType(), "popup", script, true);
} 
```

我从我的桌子上拿了我的文本框样本：

```
<tr>
    <td>
        <asp:Label ID="passwordLabel" runat="server" Text="Password:">
        </asp:Label>
    </td>
    <td>
        <asp:TextBox ID="passwordBox" runat="server" CausesValidation="False">
        </asp:TextBox>  
        <asp:RequiredFieldValidator ID="passwordValidator" runat="server" 
            ErrorMessage="This is a mandatory field" 
            ControlToValidate="passwordBox"  ForeColor="red" Display="Dynamic"   
            Font-Size="0.7em">
        </asp:RequiredFieldValidator>
    </td>
</tr> 
```

# python - 通过 Google App Engine 上的代理进行 HTTP POST

> ID：12701722
> 
> 赞同：3
> 
> 时间：2012-10-03T04:04:25.007
> 
> 标签：python, google-app-engine, http, post, proxy

我无法通过 Google App Engine 中的代理发出任何 HTTP POST 请求，使用 httplib（set_tunnel，似乎不支持：[http ://code.google.com/p/googleappengine/source/browse/trunk/python/ google/appengine/dist27/httplib.py?r=281&spec=svn281](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/dist27/httplib.py?r=281&spec=svn281)）也不是 urllib2。

事实是，在本地测试中请求是否有效，至少返回一些东西，我不知道是通过代理还是直接（都使用 httplib（set_tunnel）和 urllib2），但是当我将更改上传到谷歌的服务器没有任何作用。

我用来提出请求的功能是：

```
def __urllib2Post(self, post_args, tokenizer):
    Post = urllib.urlencode(post_args, doseq=True)
    headers = {
                "User-Agent": "Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.0)", 
                #"Host": "servicios.mitele.es", 
                #"Accept-Encoding": "gzip", 
                "Accept-Charset": "ISO-8859-1,UTF-8;q=0.7,*;q=0.7", 
                "Referer": "http://static1.tele-cinco.net/comun/swf/playerMitele.swf",
                "Connection": "close", 
                "Accept-Language": "de,en;q=0.7,en-us;q=0.3", 
                "Content-type": "application/x-www-form-urlencoded"
                }
    url = "http://servicios.mitele.es" + tokenizer
    proxy_h = urllib2Local.ProxyHandler({"http" : "80.58.250.68:80"})
    opener = urllib2Local.build_opener(proxy_h)  
    urllib2Local.install_opener(opener)  
    req = urllib2Local.Request(url, Post, headers)
    response = urllib2Local.urlopen(req)
    return response.read()

def __post(self, post_args, tokenizer):
    Post = urllib.urlencode(post_args, doseq=True)
    headers = {
                "User-Agent": "Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.0)", 
                #"Host": "servicios.mitele.es", 
                #"Accept-Encoding": "gzip", 
                "Accept-Charset": "ISO-8859-1,UTF-8;q=0.7,*;q=0.7", 
                "Referer": "http://static1.tele-cinco.net/comun/swf/playerMitele.swf",
                "Connection": "close", 
                "Accept-Language": "de,en;q=0.7,en-us;q=0.3", 
                "Content-type": "application/x-www-form-urlencoded"
                }
    #conn = httplib.HTTPConnection("213.4.97.107", 80)
    conn = httplib.HTTPConnection("servicios.mitele.es", 80)
    conn.set_tunnel("80.58.250.68", 80, headers)
    conn.request("POST", tokenizer, Post, headers)
    response = conn.getresponse()

    #print response.status, response.reason
    if response.status == 404: #NOT FOUND
        data = None
    elif response.status == 400: #BAD REQUEST
        data = None
    else:
        data = response.read()
    conn.close()
    return data 
```

我需要这样做，因为我有一个网站，可以找到主要西班牙电视台网站视频的下载链接，其中一些在地理上被锁定，我需要通过西班牙代理提出请求。我不能使用网络代理，因为请求必须是 POST 格式。

有没有办法通过 Google App Engine 中的代理进行 HTTP POST 请求？

非常感谢任何帮助..对不起我的英语。

# c# - C# 中的原始 HMAC-SHA1 -- hmac_hash() PHP 等效项

> ID：12701725
> 
> 赞同：3
> 
> 时间：2012-10-03T04:04:50.707
> 
> 标签：c#, php

我正在尝试将 Desk.com 的 Multipass SSO 集成到我的网站中，但无法生成正确的 HMAC-SHA1 签名（比如错误日志）。以下是 Desk.com 网站的说明：

1.  使用您的多通道 API 密钥和完成的多通道令牌构建一个 SHA1 HMAC。
2.  Base64 对生成的 HMAC 进行编码。

根据日志，我的多通令牌似乎是正确的。首先，完美运行的 PHP 代码：

```
// Build an HMAC-SHA1 signature using the multipass string and your API key
$signature = hash_hmac("sha1", $multipass, $api_key, true);
// Base64 encode the signature
$signature = base64_encode($signature); 
```

^ 请注意，hash_hmac 的“真”值是以原始二进制格式输出信息 - 我不确定我的 C# 代码中是否是这种情况

接下来，我的 C# 代码*无法*正常工作：

```
protected string getSignature(string multipass)
{
     string api_key = "my_key_goes_here";
     HMACSHA1 hmac = new HMACSHA1(Encoding.ASCII.GetBytes(api_key));
     hmac.Initialize();
     byte[] buffer = Encoding.ASCII.GetBytes(multipass);
     string signature = BitConverter.ToString(hmac.ComputeHash(buffer)).Replace("-", "").ToLower();
     return Convert.ToBase64String(Encoding.ASCII.GetBytes(signature));
} 
```

这是（字面上）数小时搜索和尝试多种不同方式的结果。如果我能弄清楚这一点，我将不胜感激。

如果您需要参考，请查看 Desk.com 的此页面：http: [//dev.desk.com/docs/portal/multipass](http://dev.desk.com/docs/portal/multipass)。它包含代码示例并概述了完成代码的说明。

编辑：这是我的多通道生成代码。

```
protected string getMultipass(UserData user_data)
        {
            // Encode the data into a JSON object
            JavaScriptSerializer s = new JavaScriptSerializer();
            string json_data = s.Serialize(user_data);

            // Acquire the Web.config appSettings
            string site_key = "my_site_here";
            string api_key = "my_key_here";
            string iv = "OpenSSL for Ruby";

            // Using byte arrays now instead of strings
            byte[] encrypted = null;
            byte[] bIV = Encoding.ASCII.GetBytes(iv);
            byte[] data = Encoding.ASCII.GetBytes(json_data);

            // XOR the first block (16 bytes)
            // once before the full XOR
            // so it gets double XORed
            for (var i = 0; i < 16; i++)
                data[i] = (byte)(data[i] ^ bIV[i]);

            // Pad using block size of 16 bytes
            int pad = 16 - (data.Length % 16);
            Array.Resize(ref data, data.Length + pad);
            for (var i = 0; i < pad; i++)
                data[data.Length - pad + i] = (byte)pad;

            // Use the AesManaged object to do the encryption
            using (AesManaged aesAlg = new AesManaged())
            {
                aesAlg.IV = bIV;
                aesAlg.KeySize = 128;

                // Create the 16-byte salted hash
                SHA1 sha1 = SHA1.Create();
                byte[] saltedHash = sha1.ComputeHash(Encoding.UTF8.GetBytes(api_key + site_key), 0, (api_key + site_key).Length);
                Array.Resize(ref saltedHash, 16);
                aesAlg.Key = saltedHash;

                // Encrypt using the AES managed object
                ICryptoTransform encryptor = aesAlg.CreateEncryptor(aesAlg.Key, aesAlg.IV);
                using (MemoryStream msEncrypt = new MemoryStream())
                {
                    using (CryptoStream csEncrypt = new CryptoStream(msEncrypt, encryptor, CryptoStreamMode.Write))
                    {
                        csEncrypt.Write(data, 0, data.Length);
                        csEncrypt.FlushFinalBlock();
                    }
                    encrypted = msEncrypt.ToArray();
                }
            }

            // Return the Base64-encoded encrypted data
            return Convert.ToBase64String(encrypted, Base64FormattingOptions.None)
                .TrimEnd("=".ToCharArray()) // Remove trailing "=" characters
                .Replace("+", "-") // Change "+" to "-"
                .Replace("/", "_"); // Change "/" to "_"
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:20:23.610

您可以看到以下有效的代码：

```
static string create(string userDetails) { 
      string accountKey = "YOUR_ACCOUNT_KEY";
      string apiKey = "YOUR_API_KEY";        
      string initVector = "OpenSSL for Ruby"; // DO NOT CHANGE

      byte[] initVectorBytes = Encoding.UTF8.GetBytes(initVector);
      byte[] keyBytesLong;
      using( SHA1CryptoServiceProvider sha = new SHA1CryptoServiceProvider() ) {
        keyBytesLong = sha.ComputeHash( Encoding.UTF8.GetBytes( apiKey + accountKey ) );
      }
      byte[] keyBytes = new byte[16];
      Array.Copy(keyBytesLong, keyBytes, 16);

      byte[] textBytes = Encoding.UTF8.GetBytes(userDetails);
      for (int i = 0; i < 16; i++) {
        textBytes[i] ^= initVectorBytes[i];
      }

      // Encrypt the string to an array of bytes
      byte[] encrypted = encryptStringToBytes_AES(textBytes, keyBytes, initVectorBytes);
      string encoded = Convert.ToBase64String(encrypted);   
      return HttpUtility.UrlEncode(encoded);
    }

    static byte[] encryptStringToBytes_AES(byte[] textBytes, byte[] Key, byte[] IV) {
      // Declare the stream used to encrypt to an in memory
      // array of bytes and the RijndaelManaged object
      // used to encrypt the data.
      using( MemoryStream msEncrypt = new MemoryStream() )
      using( RijndaelManaged aesAlg = new RijndaelManaged() )
      {
        // Provide the RijndaelManaged object with the specified key and IV.
        aesAlg.Mode = CipherMode.CBC;
        aesAlg.Padding = PaddingMode.PKCS7;
        aesAlg.KeySize = 128;
        aesAlg.BlockSize = 128;
        aesAlg.Key = Key;
        aesAlg.IV = IV;
        // Create an encrytor to perform the stream transform.
        ICryptoTransform encryptor = aesAlg.CreateEncryptor();

        // Create the streams used for encryption.
        using( CryptoStream csEncrypt = new CryptoStream( msEncrypt, encryptor, CryptoStreamMode.Write ) ) {
          csEncrypt.Write( textBytes, 0, textBytes.Length );
          csEncrypt.FlushFinalBlock();
        }

        byte[] encrypted = msEncrypt.ToArray(); 
        // Return the encrypted bytes from the memory stream.
        return encrypted;
      }
    } 
```

我希望这个对你有用。

# scala - 您如何使用 Scala 和 Play 框架 2.0 阅读 Atom 提要的 HTML 内容？

> ID：12701727
> 
> 赞同：0
> 
> 时间：2012-10-03T04:05:07.823
> 
> 标签：scala, playframework-2.0

我很难从 Atom 提要中提取 html 内容。在控制器中，我可以通过以下方式获取原子提要：

```
val feed = ws.WS.url("http://foo.blogspot.com/feeds/posts/default?max-results=4").get()
val blog = feed.await(5000).get.xml
Ok(views.html.news(blog)) 
```

在引用的新闻视图中，我有这个块：

```
<div id="news">
     <ul class="thumbnails">
     @for( entry <- blog \ "entry") {
         @{var message = (entry \ "content").head match {case <content>{a}</content> => a.text }}
         <li class="span6 review"><div class="thumbnail">
             <article>
                <header><h2>@{(entry \ "title").text}</h2>
                    Published @{(entry \ "published").text}</header>
                 @Html({(entry \ "content" ).head match{case <content>{a}</content> => a.text} } )
                   </article></div></li>
     }
     </ul>
 </div> 
```

读取“标题”和“已发布”的 XML 内容工作正常。但是我无法干净地显示`<content type="html">...</content>`其中包含包含博客帖子内容的转义字符串的 html。我出现了一些意想不到的字符（应该是空格的 Â），所以 .

有没有人找到更好的方法来使用 Play Framework 2.x 从 atom 提要中提取 HTML 内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T03:42:34.930

如何做到这一点的解释来自[https://play.lighthouseapp.com/projects/82401/tickets/474-no-default-utf-上的 Play 2.0 Ticket "No default UTF-8 charset for JSON WS response body" 8-charset-for-json-ws-response-body](https://play.lighthouseapp.com/projects/82401/tickets/474-no-default-utf-8-charset-for-json-ws-response-body)

HTTP 1.1 中文本的默认字符集是 ISO-8859-1，但 atom 提要指定 UTF-8。显然，<content> 标签中的 HMTL 是用 ISO-8859-1 编码的。因此，目标是读取 XML Elem，将内容转换为字符串，然后从 ISO-8859-1 转换为 UTF-8，因为这是我的文档使用的。这是我的代码：

```
@Html({
    (entry \ "content" ).head
        match{case <content>{a}</content> => 
            new String(a.text.getBytes("ISO-8859-1") , "UTF-8")
        }
 }) 
```

如果有人看到其中的缺陷，请随时向我展示我的方式的错误。

# c++ - 如何向后显示有序的双向链表？

> ID：12701730
> 
> 赞同：0
> 
> 时间：2012-10-03T04:05:25.540
> 
> 标签：c++, linked-list, doubly-linked-list

我正在为此苦苦挣扎。我已经让它显示了大部分列表，但是其中一个 1 没有显示出来，而且我终生无法弄清楚如何修复它。

这是相关的代码，我想。

我的插入功能：

```
 template <class T>
 void DoublyLinkedList<T>::insert(T data)
 {
    DoublyLinkedList<T> *newNode, *tmp, *oneBefore;

    newNode = new DoublyLinkedList(data);

if (mNext == NULL)
    mNext = newNode;

else
{
   oneBefore = mNext;
   tmp = mNext;

    while (tmp != NULL && tmp->mData < data)
    {
        oneBefore = tmp;
        tmp = tmp->mNext;
    }

    if (tmp == mNext)
    {
        newNode->mNext = mNext;
        mNext = newNode;
    }
    else
    {
        oneBefore->mNext = newNode;
        newNode->mNext = tmp;
        newNode->mPrevious = oneBefore;
    }

   }
 } 
```

我的 displayBackwards 功能：

```
 void displayBackward(DoublyLinkedList<int> *ptr)
 {
    DoublyLinkedList<int> *tmp;

    tmp = ptr;
    while (tmp != NULL)
    {
       cout << tmp->getData() << endl;
       tmp = tmp->getPrevious();
    }
 } 
```

我的主要功能的相关部分：

```
 DoublyLinkedList<int> *ptr, *head, *tail;

    ptr = new DoublyLinkedList<int>;

    cout << "Testing Insert\n";
    ptr->insert(1);
    ptr->insert(2);
    ptr->insert(3);
    ptr->insert(1);

    tail = ptr;
    while (tail->getNext() != NULL)
       tail = tail->getNext();

    cout << "\n\nTesting displayBackward\n";
    displayBackward(tail); 
```

我目前的输出是：

```
 Testing displayBackward
 3
 2
 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T04:10:38.017

```
 template <class T>
 void DoublyLinkedList<T>::insert(T data)
 {
    DoublyLinkedList<T> *newNode, *tmp, *oneBefore;

    newNode = new DoublyLinkedList(data);

if (mNext == NULL)
    mNext = newNode;

else 
```

这不是连接新节点的反向指针。

您的代码也可能有更多错误。

* * *

编写双向链表的一种简单方法是

*   区分*列表*和*节点*类型，以及
*   使每个列表始终有一个虚拟节点，称为**头节点**。

这样你就没有`NULL`指针要处理了。

它确实简化了事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T05:49:21.470

这段代码是问题所在（在插入函数中）

```
 if (tmp == mNext)
    {
        newNode->mNext = mNext;
        mNext = newNode;
    } 
```

你需要

```
 if (tmp == mNext)
    {
        newNode->mNext = mNext;
        mNext->mPrevious = newNode;
        mNext = newNode;
    } 
```

您的原始代码将在以下情况下工作，除非您尝试插入小于或等于当前第一个节点中的数据的数据。

另外，我假设您的构造函数将 mNext 和 mPrevious 初始化为 NULL。如果没有，您将遇到其他问题。

# typescript - TypeScript：增加内置类型

> ID：12701732
> 
> 赞同：15
> 
> 时间：2012-10-03T04:05:32.953
> 
> 标签：typescript

如何增加一种“内置”类型？例如数组？

在 JS 中，我会做类似的事情

```
Array.prototype.shuffle = function () { ... }; 
```

TypeScript 中的等价物是什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-03T04:23:54.317

TypeScript 中的类型是“开放式”的，所以你可以写：

```
interface Array {
  shuffle: () => any; // <-- Whatever signature you want.
} 
```

然后扩展类型以包含新函数（您可以为其分配与签名匹配的函数）。

但是请注意，扩展内置类型（lib.d.ts 中的那些 - 例如 Array）目前在语言服务中存在问题，因为它出于性能原因在内部缓存了这些类型。[执行我在http://typescript.codeplex.com/workitem/4](http://typescript.codeplex.com/workitem/4)上写的解决方法，以扩展内置类型，而不会在 VS 的语言服务中出错。

# php - 如何销毁会话？

> ID：12701735
> 
> 赞同：0
> 
> 时间：2012-10-03T04:06:06.013
> 
> 标签：php, session, session-cookies, logout

我有一个会话脚本，但我不知道如何将其与 cookie 一起销毁。我有一个错误：“网站”上的网页导致了太多重定向。清除此站点的 cookie 或允许第三方 cookie 可能会解决问题。如果不是，则可能是服务器配置问题，而不是您的计算机问题。我不知道正确的destoy脚本需要。

```
<?php 
session_start();
if(!isset($_SESSION['manager'])){
header("location:ADMINLOGIN.php");
exit();
}
//Be sure to check that this manager SESSION value is in fact in the database
$managerID = preg_replace('#[^0-9]#i', '', $_SESSION["id"]); // filter everything but numbers and letters
$manager = preg_replace('#[^A-Za-z0-9]#i', '', $_SESSION["manager"]); // filter everything but numbers and letters
$password = preg_replace('#[^A-Za-z0-9]#i', '', $_SESSION["password"]); //filter everything but numbers and letters 
//Run mySQL qquery to be sure that this person is an admin and that thier password session var equals the database information
//Connect to the MySQL database
include"CONFIG.php";
$sql=mysql_query("SELECT * FROM administrator WHERE ID='$managerID' AND USERNAME='$manager' AND PASSWORD='$password' LIMIT 1");//query the person
//MAKE SURE PERSON EXISTS IN DATABASE
$existCount = mysql_num_rows($sql);//count the row nums
if($existCount==0){//evvaluate the count
echo "Your login session data is not on record in the database";
exit();
} 
```

?>

我找到了这个脚本，但它并没有破坏 cookie。

```
<?php
// Finds all server sessions
session_start();
// Stores in Array
$_SESSION = array();
// Swipe via memory
if (ini_get("session.use_cookies")) {
// Prepare and swipe cookies
$params = session_get_cookie_params();
// clear cookies and sessions
setcookie(session_name(), '', time() - 42000,
    $params["path"], $params["domain"],
    $params["secure"], $params["httponly"]
);
}
// Just in case.. swipe these values too
ini_set('session.gc_max_lifetime', 0);
ini_set('session.gc_probability', 1);
ini_set('session.gc_divisor', 1);
// Completely destory our server sessions..
session_destroy();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T04:11:34.863

标题应该是这样的

```
header("location: ADMINLOGIN.php");
                 ^ //space should present otherwise  it is not redirecting properly. 
```

# c# - 使用对象初始化器创建实例的表达式

> ID：12701737
> 
> 赞同：19
> 
> 时间：2012-10-03T04:06:19.390
> 
> 标签：c#, dynamic, lambda, expression, expression-trees

有没有办法用表达式树的对象初始化器创建一个对象的实例？我的意思是创建一个表达式树来构建这个 lambda：

```
// my class
public class MyObject {
    public bool DisplayValue { get; set; }
}

// my lambda:
var lambda = (Func<bool, MyObject>)
             (displayValue => new MyObject { DisplayValue = displayValue }); 
```

如何使用表达式树创建此 lambda？

**更新：**

我尝试了自己并编写了以下代码：

```
 public static Func<bool, dynamic> Creator;

    static void BuildLambda() {
        var expectedType = typeof(MyObject);
        var displayValueParam = Expression.Parameter(typeof(bool), "displayValue");
        var ctor = Expression.New(expectedType);
        var local = Expression.Parameter(expectedType, "obj");
        var displayValueProperty = Expression.Property(ctor, "DisplayValue");

        var returnTarget = Expression.Label(expectedType);
        var returnExpression = Expression.Return(returnTarget,local, expectedType);
        var returnLabel = Expression.Label(returnTarget, Expression.Default(expectedType));

        var block = Expression.Block(
            new[] { local },
            Expression.Assign(local, ctor),
            Expression.Assign(displayValueProperty, displayValueParam),
            Expression.Return(Expression.Label(expectedType), local, expectedType),
            returnExpression,
            returnLabel
            );
        Creator =
            Expression.Lambda<Func<bool, dynamic>>(block, displayValueParam)
                .Compile();
    } 
```

但它会引发以下错误：

> 无法跳转到未定义的标签“”。

大家可以帮帮我吗？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-10-03T09:15:36.873

要在表达式中表示对象初始值设定项，您应该使用[`Expression.MemberInit()`](http://msdn.microsoft.com/en-us/library/bb344570.aspx)：

```
Expression<Func<bool, MyObject>> BuildLambda() { 
    var createdType = typeof(MyObject);
    var displayValueParam = Expression.Parameter(typeof(bool), "displayValue"); 
    var ctor = Expression.New(createdType);
    var displayValueProperty = createdType.GetProperty("DisplayValue");
    var displayValueAssignment = Expression.Bind(
        displayValueProperty, displayValueParam);
    var memberInit = Expression.MemberInit(ctor, displayValueAssignment);

    return
        Expression.Lambda<Func<bool, MyObject>>(memberInit, displayValueParam);
} 
```

要验证这是否确实符合您的要求，您可以调用`ToString()`创建的表达式。在这种情况下，输出如预期：

```
displayValue => new MyObject() {DisplayValue = displayValue} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T06:52:02.120

最后我找到了答案：

```
public static Func<bool, dynamic> Creator; 

static void BuildLambda() { 
    var expectedType = typeof(MyObject); 
    var displayValueParam = Expression.Parameter(typeof(bool), "displayValue"); 
    var ctor = Expression.New(expectedType); 
    var local = Expression.Parameter(expectedType, "obj"); 
    var displayValueProperty = Expression.Property(local, "DisplayValue"); 

    var returnTarget = Expression.Label(expectedType); 
    var returnExpression = Expression.Return(returnTarget,local, expectedType); 
    var returnLabel = Expression.Label(returnTarget, Expression.Default(expectedType)); 

    var block = Expression.Block( 
        new[] { local }, 
        Expression.Assign(local, ctor), 
        Expression.Assign(displayValueProperty, displayValueParam), 
        /* I forgot to remove this line:
         * Expression.Return(Expression.Label(expectedType), local, expectedType), 
         * and now it works.
         * */
        returnExpression, 
        returnLabel 
        ); 
    Creator = 
        Expression.Lambda<Func<bool, dynamic>>(block, displayValueParam) 
            .Compile(); 
} 
```

**更新：**

虽然它工作正常，但@svick 在他的答案中提供了一种更好更短的方法，这实际上是我正在寻找的：`MemberInit`。请参阅@svick 的回答。

# ruby-on-rails-3 - 定义我的自定义设计身份验证策略会引发“load_missing_constant”错误

> ID：12701741
> 
> 赞同：2
> 
> 时间：2012-10-03T04:06:59.287
> 
> 标签：ruby-on-rails-3, devise

在我的应用程序中，我试图定义一个自定义策略，但它会引发一些错误......这就是我正在做的事情：

```
# myrailsapp/lib/devise/strategies
require 'devise/strategies/database_authenticatable'

module Devise
  module Strategies
    class CustomAuth < Devise::Strategies::DatabaseAuthenticatable
      def valid?
        Rails.logger.info("\n\nIn CustomAuth.valid\n\n")
        true
      end
      def authenticate!
        Rails.logger.info("\n\nCalled My Authenticate!\n\n")
        super
      end
    end
  end
end

Warden::Strategies.add(:custom_auth, Devise::Strategies::CustomAuth)

# config/initializer.rb
config.warden do |manager|
  # manager.strategies.add(:custom_auth, Devise::Strategies::CustomAuth)
  manager.default_strategies(:scope => :user).unshift :custom_auth
end 
```

当我尝试运行它时，我收到此错误：

/usr/lib/ruby/gems/1.8/gems/activesupport-3.1.1/lib/active_support/dependencies.rb:490:in `load_missing_constant': Expected app/helpers/custom_auth.rb to define CustomAuth (LoadError) from /usr/lib/ruby/gems/1.8/gems/activesupport-3.1.1/lib/active_support/dependencies.rb:181:in`const_missing' 来自 /usr/lib/ruby/gems/1.8/gems/activesupport-3.1。 1/lib/active_support/dependencies.rb:179:in `each' from /usr/lib/ruby/gems/1.8/gems/activesupport-3.1.1/lib/active_support/dependencies.rb:179:in`const_missing' 来自 /usr/lib/ruby/gems/1.8/gems/activesupport-3.1.1/lib/active_support/dependencies.rb:501:in `load_missing_constant' from /usr/lib/ruby/gems/1.8/gems/activesupport-3.1.1/lib/active_support/dependencies.rb:181:in`const_missing' 来自 / usr/lib/ruby/gems/1.8/gems/activesupport-3.1.1/lib/active_support/dependencies.rb:179:in `each' from /usr/lib/ruby/gems/1.8/gems/activesupport-3.1.1/lib/active_support/dependencies.rb:179:in`const_missing' 来自 /usr/lib/ruby/gems/1.8/gems/activesupport-3.1.1 /lib/active_support/dependencies.rb:501:in `load_missing_constant' from /usr/lib/ruby/gems/1.8/gems/activesupport-3.1.1/lib/active_support/dependencies.rb:181:in`const_missing' 来自 /usr/lib/ruby/gems/1.8/gems/activesupport-3.1.1/lib/active_support/dependencies.rb:179:in `each' from /usr/lib/ruby/gems/1.8/gems/activesupport-3.1.1/lib/active_support/dependencies.rb:179:in`const_missing' 来自 /home /rjain/src/qbol/tapp/config/initializers/devise.rb:212

现在，当我将同一个文件移动到我的 app/helpers 目录时，我得到了同样的错误，但是如果我删除模块设计和模块策略，事情就开始起作用了。两个问题：

1.  如何确保我可以在我的 lib/devise/strategies 文件夹中创建文件？
2.  如上所述，如何使其工作以便我可以在 Devise::Strategies 模块中使用它？

# css - CSS 转换在 IE 8 中不起作用

> ID：12701742
> 
> 赞同：5
> 
> 时间：2012-10-03T04:07:01.457
> 
> 标签：css, internet-explorer-8, css-transforms

我正在尝试使用 CSS Transform 属性旋转或转换 div。这是我的转换 CSS 代码：

```
-webkit-transform: rotate(270deg);
-moz-transform: rotate(270deg);
-ms-transform: rotate(270deg);
-o-transform: rotate(270deg);
filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=0);
transform: rotate(270deg); 
```

上面的代码在除 IE 8 之外的所有版本中都运行良好。我需要找到一种方法来支持 IE 8。

如何为 IE8 创建后备？

注意：我正在使用 jQuery (1.8.2)、HTML 5 Doctype 和 modernizr，如果这对您提供的答案有影响的话。我更喜欢纯 CSS 解决方案，但愿意使用 javascript/jQuery 解决方案。

[这是HTML和CSS的小提琴。](http://jsfiddle.net/Lynda333/Gh5YG/1/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T04:20:26.033

如果您看到“过滤器：”旋转到 3，它将在 IE 8 中旋转 270 度（向下到 v5.5，IIRC）。

[http://msdn.microsoft.com/en-us/library/ms532918(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms532918(v=vs.85).aspx)

# actionscript-3 - AS3 - 更改按钮组件上标签的大小

> ID：12701744
> 
> 赞同：3
> 
> 时间：2012-10-03T04:07:07.940
> 
> 标签：actionscript-3, flash, button

我想在 Flash 中增加按钮上标签的大小。标签似乎只有按钮宽度的 3/4 和高度的 3/4。我想让标签成为按钮的全宽和全高。

标签字段只是一个字符串，更改按钮的 textField 属性的宽度/高度似乎并没有改变任何东西。textFormat 也没有用于更改文本宽度/高度的选项。

我没主意了。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T19:16:38.253

我知道的唯一方法是通过代码来完成。

```
 var myTextFormat:TextFormat = new TextFormat();
        myTextFormat.size = 20
        var myButton:Button = new Button();
        myButton.label = "Click Me";
        myButton.setStyle("textFormat", myTextFormat);
        myButton.setSize(120, 60);
        myButton.x = 0;
        myButton.y = 0;
        addChild(myButton); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-26T05:20:10.417

经过大量阅读，我发现了一些可能对这个问题的未来观众有所帮助的内容。我正在使用 AS3、CS5.5。'bw' 是按钮的实例名称。如果您使用的是“组件”按钮，则可以使用这些。

```
bw.setStyle("textFormat", new TextFormat("Verdana", 20, "bold", "italic", "underline", true));
bw.label = "Dog Snacks"; // can be also set via properties, but this is handy if you want the text to change after clicking
bw.setSize(280, 30); // can also be set via properties 
```

# javascript - jQuery blur 事件在加载时触发，而不是在预期时触发

> ID：12701747
> 
> 赞同：1
> 
> 时间：2012-10-03T04:07:50.000
> 
> 标签：javascript, jquery, javascript-events

我正在做一个需要一些表单验证的项目，我正在使用 jquery。有一个用户将输入他们的电子邮件的字段，一旦他们填写了该字段，我想检查它。

目前，我的 JavaScript 的第一部分如下所示：

```
$(window).load(function()
{
    var email = $("#registerEmail");
    email.blur(alert("stuff")); //will call a validation function 
```

现在，一旦页面加载，我就会收到“东西”警报。我的理解是模糊只会在元素获得焦点然后失去焦点时触发 - 我误解了这一点吗？不应该只在用户单击或键入电子邮件表单然后单击或键入其他地方时才执行此警报，而不是在页面加载时立即执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T04:11:47.833

当你这样做时，你实际上是在执行警报功能。您需要提供一个以后可以调用的函数。做

```
email.blur(function () {
    alert("stuff");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T04:14:43.410

```
$(document).ready(function(){
    $("#registerEmail").blur(function(){
            //your alert here
     });

}); 
```

# c++ - “类”在这里有一个先前的声明

> ID：12701753
> 
> 赞同：0
> 
> 时间：2012-10-03T04:08:21.497
> 
> 标签：c++, compiler-errors, g++

我终其一生都无法弄清楚出了什么问题。

**我的生成文件：**

```
all: main.o rsa.o
    g++ -Wall -o main bin/main.o bin/rsa.o -lcrypto

main.o: src/main.cpp inc/rsa.h
    g++ -Wall -c src/main.cpp -o bin/main.o -I inc

rsa.o: src/rsa.cpp inc/rsa.h
    g++ -Wall -c src/rsa.cpp -o bin/rsa.o -I inc 
```

**我的主要课程：**

```
#include <iostream>
#include <stdio.h>
#include "rsa.h"

using namespace std;
int main()
{
    //RSA rsa;
    return 0;
} 
```

**我的.cpp：**

```
#include "rsa.h"
#include <iostream>
using namespace std;

RSA::RSA(){} 
```

**我的.h：**

```
#ifndef RSA_H
#define RSA_H

class RSA
{
    RSA();
};
#endif 
```

**我收到以下错误：**

```
In file included from src/main.cpp:7:0:
inc/rsa.h:7:7: error: using typedef-name ‘RSA’ after ‘class’
/usr/include/openssl/ossl_typ.h:140:23: error: ‘RSA’ has a previous declaration here 
```

我觉得我已经尝试了一切，但我被卡住了。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T04:09:36.417

> /usr/include/openssl/ossl_typ.h:140:23: 错误: 'RSA' has a previous declaration here

从错误消息看来，您的符号名称与`RSA`OpenSSL 中定义的另一个名为的类发生冲突。
有两种方法可以解决这个问题：

1.  更改您的班级名称或
2.  如果您想保持相同的名称，请在命名空间中进行包装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T04:17:45.643

您的编译器在 ossl_typ.h 文件中找到了 RSA 的 typedef，它在您编译程序时间接#included。我至少能想到三个解决方案：

1.  将您的班级名称更改为其他名称。

2.  把你的班级放在一个`namespace`.

3.  弄清楚为什么 OpenSSL 标头包含在您的构建中。环顾四周后，我发现[了这个 Q&A](https://stackoverflow.com/questions/6685457/header-file-inclusion-static-analysis-tools)，它说`gcc -w -H <file>`将向您显示#included 的文件。从那里您可能能够删除对 OpenSSL 标头的依赖。

# scheme - 在球拍中将两个列表压缩在一起

> ID：12701756
> 
> 赞同：0
> 
> 时间：2012-10-03T04:08:57.457
> 
> 标签：scheme, racket

我正在尝试编写一个名为 zip 的函数，它接受两个列表作为参数并返回一个列表，其元素是从原始列表中交替获取的

前任。(zip '(abc) '(xyz)) 应该评估为 (axbycz)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T04:19:13.710

骨架解决方案：

```
(define (zip l1 l2)
  (cond ((null? l1) l2)
        ((null? l2) l1)
        (else (cons ??? (cons ??? (zip ??? ???)))))) 
```

填写`???`自己。:-)

# java - 在 Java 中更新/重新分配值

> ID：12701757
> 
> 赞同：2
> 
> 时间：2012-10-03T04:09:30.357
> 
> 标签：java

所以我在我的一个新项目中遇到了一种荒谬的困境。我的任务之一是开发一款游戏，玩家可以选择最多可以治愈英雄四次以达到最大生命值。我已经分配了一个健康值，分配了一个命令值，以便它识别玩家何时想要治疗，但我有点卡在如何限制用户只使用治疗命令四次以及如何恢复他们的健康到满。

我正在阅读关于 stackoverflow 的另一篇文章，该文章似乎与我的问题有些相关，尽管我不太清楚如何根据我的需要进行调整。

```
Scanner sc = new Scanner(System.in);
int number;
do {
    System.out.println("Please enter a positive number!");
    while (!sc.hasNextInt()) {
        System.out.println("That's not a number!");
        sc.next(); // this is important!
    }
    number = sc.nextInt();
} while (number <= 0);
System.out.println("Thank you! Got " + number); 
```

任何建议甚至直接帮助将不胜感激！提前致谢！

编辑：他们在一场比赛中最多可以治愈四次。所以一旦他们使用了一次heal命令，他们只能使用3次，以此类推。用户输入一个整数来调用修复命令，在这种情况下，我提示他们做出决定，他们只需输入数字 0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T05:47:31.737

基本上我从你的问题中可以理解的是，你希望上面的代码最多执行 4 次，即如果用户调用该方法 1 次执行它，2 次执行它等等......但是如果它被调用第五次你不希望代码被执行。
这可以通过维护一个计数器来实现，例如如下所示

```
public class Q
{

public static void main(String[] n)
{
    Q1 ob =new Q1();
    ob.myMethod();
    System.out.println("One time");

    ob.myMethod();
    System.out.println("two time");

    ob.myMethod();
    System.out.println("three time");

    ob.myMethod();
    System.out.println("Fourth time");

    ob.myMethod();

}
} 
```

如您所见，我已经调用了该方法 5 次。现在让我们看看如何限制用户获取或只调用 4 次方法

```
class Q1
{
int counter=0;
public void myMethod()
{
    if(counter<4)
    {
        Scanner sc = new Scanner(System.in);
        int number;
        do 
        {
            System.out.println("Please enter a positive number!");
            while (!sc.hasNextInt()) 
            {
        System.out.println("That's not a number!");
        sc.next(); // this is important!
    }
    number = sc.nextInt();
    } while (number <= 0);
    System.out.println("Thank you! Got " + number);
    counter++;
}

else
{
    System.out.println("A maximum of 4 times of healing is allowed");
}

}
 } 
```

# csv - 将 BIRT 报告导出为 CSV

> ID：12701758
> 
> 赞同：2
> 
> 时间：2012-10-03T04:09:32.620
> 
> 标签：csv, export, birt

我在我的项目中使用 BIRT 进行报告。报告显示金额（字符串）的正确值为 123456789123，但是当我尝试将相同的报告导出到 csv 时，csv 文件显示的金额与 1.234E11 相同。我也想在 csv 中将值设为 123456789123。请帮忙谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:00:28.853

我想这可能是在 Excel 中查看它的问题。导出数据不会导出格式代码。在记事本中打开 csv，您将看到正确的数据。如果您将报告导出到 excel，您可以在数据项的属性编辑器的格式编号属性中设置自定义格式代码，例如 #####0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T23:52:59.783

如果数字太大，excel会显示这样的值。如果您展开列并将列设置为格式单元格下的编号，它将正确显示。您需要将其保存为 Excel 工作簿。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T14:53:07.333

我们的 BiRT 报告工具刚刚遇到了这个问题。当我们在文本编辑器中打开导出的文件时，数字被格式化为科学计数法。这是 Birt 的自定义格式化程序之一的错误。

我们必须查看 org.eclipse.birt.report.engine.dataextraction.impl.CommonDataExtractionImpl 并更改行

```
valueFormatters[i] = new NumberFormatter( patterns[i], this.locale ); 
```

至

```
String pattern = patterns[i] == null ? "Unformatted" : patterns[i];
valueFormatters[i] = new NumberFormatter( pattern, this.locale ); 
```

将模式设置为“未格式化”使默认格式保持为普通整数而不是科学记数法（通过十进制格式化程序）。

# jquery - 禁用颜色选择器在谷歌浏览器中

> ID：12701763
> 
> 赞同：5
> 
> 时间：2012-10-03T04:10:05.607
> 
> 标签：jquery, css, html, google-chrome

在谷歌浏览器中，`<input type="color">`创建一个带有大颜色条的输入，默认情况下，打开一个颜色选择器（看起来它依赖于操作系统，我的有一个 Windows 皮肤）。我正在全局使用一个自定义颜色选择器，`type="color"`它在大多数浏览器中看起来像这样：

![带彩色边框的文本输入](../Images/148f62f450aadd8245b980083101b6fd.png)

但在 Chrome 中它看起来像这样：

![带有填充和彩色边框的纯色条](../Images/4df711ea80981fff8ba9201b0a3677e6.png)

如果您以前从未见过它，那么它看起来像这样（Windows 7 64bit Google Chrome 版本 22.0.1229.79 m）：

![在此处输入图像描述](../Images/bff6ed376e5890175e5c880bbf3ffc90.png)

自定义颜色选择器很好地覆盖了默认颜色选择器，但问题在于它在 Chrome 中的显示方式。另一个问题是我似乎无法清除值（已经尝试过js），默认值总是`#000000`并且不能设置为空值。

如果我不希望这种行为我不应该使用，这可能是真的，也可能不是真的`type="color"`，但有时我发现 Chrome 的 UI 有点过于激进。更改所有 input`type`并不是我所期待的，而且我不肯定该应用程序还对它们做什么，所以我最终可能会破坏其他东西。我对日期选择器也有类似的问题。

有什么办法可以改变 Chrome 中的这种行为，这样我就可以拥有一个普通的类似文本的字段？JavaScript/jQuery 是一个选项，但如果它可以通过 CSS`-webkit`规则以某种方式完成，那就太好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T01:08:28.503

在这种情况下，您不应使用 type=color。根据标准， input[type=color] 不能有空值。

> [如果元素的值是有效的简单颜色，则将其设置为转换为 ASCII 小写的元素的值；否则，将其设置为字符串“#000000”。](http://www.whatwg.org/specs/web-apps/current-work/multipage/states-of-the-type-attribute.html#color-state-%28type=color%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T04:31:11.480

对于显示问题，请尝试覆盖默认的用户代理样式：http: [//jsfiddle.net/ngBpA/](http://jsfiddle.net/ngBpA/)

```
input[type="color"] {
    -webkit-appearance: textfield;
}

input[type="color"]::-webkit-color-swatch-wrapper {
    display: none;
}

input[type="color"]::-webkit-color-swatch {
    display: none;
}​ 
```

我假设您的插件会自动调整框的大小。

用户代理样式表： http: [//trac.webkit.org/browser/trunk/Source/WebCore/css/html.css](http://trac.webkit.org/browser/trunk/Source/WebCore/css/html.css)

# android - 无法将 Android 连接到 PostgreSQL 数据库

> ID：12701764
> 
> 赞同：6
> 
> 时间：2012-10-03T04:10:36.283
> 
> 标签：android, postgresql

这是我在 stackoverflow 上的第一篇文章，所以希望我听起来不会太无能。我在将我的 Android 应用程序连接到我创建的 PostgresDB 时遇到问题。我使用了本教程[http://appliedcoffeetechnology.tumblr.com/post/10657124340](http://appliedcoffeetechnology.tumblr.com/post/10657124340)中的代码。尽管我将 String url ... 行修改为以下内容： `String url = "jdbc:postgresql://192.168.1.101:5556/postgres?user=postgres&password=yeahright";` 我按照其他说明下载 JDBC 并将其添加到包中，但我还添加了 internet 权限行。

我已经在我的 Windows 7 机器上配置了 postgreSQL DB 以允许连接，甚至将传入连接设置为“信任”，这样密码就不会妨碍。我还在 Windows 防火墙上打开了 5556 端口。我可以使用以下命令从我的 Ubuntu 笔记本电脑连接到它：`psql 192.168.1.101 -U postgres -p 5556 -d postgres` 但是，在运行 Android 应用程序（在真实设备上）时，我得到“java.sql.SQLException：没有合适的驱动程序”`conn = DriverManager.getConnection(url)`调用抛出。

非常感谢您的帮助，如果我能提供任何其他有用的信息，请告诉我。

下面的 Craig Ringer 提到了一个 Web 服务应用程序。最初我很犹豫，因为我不想让我的学习曲线变得更陡峭，但我决定使用 Django，它非常简单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T04:36:53.827

AFAIK Android 本身不支持 JDBC。（更新：较新的版本可以）。*老实说*，您最好运行 Web 服务并让您的 Android 应用程序通过 Web 服务请求与数据库通信。

搜索“android postgresql”。

一些相关的讨论：

*   [Android 操作系统和 postgreSQL](https://stackoverflow.com/questions/2331014/android-os-and-postgresql)
*   [如何使用 Apache Tomcat 使用 PostgreSQL 在 Java 中创建 Web 服务](https://stackoverflow.com/questions/10634167/how-to-create-webservice-in-java-using-apache-tomcat-using-postgresql)
*   [驱动 JDBC PostgreSQL 与 Android](https://stackoverflow.com/questions/10435609/driver-jdbc-postgresql-with-android)
*   [如何在 android 中安全（间接）查询 postgresql 数据库？](https://stackoverflow.com/questions/10881538/how-can-i-securely-indirectly-query-a-postgresql-database-within-android)
*   [PostgreSQL JDBC 连接在 Android 4.0 上失败](https://stackoverflow.com/questions/10970918/postgresql-jdbc-connection-fails-on-android-4-0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T07:32:01.267

您收到的错误消息表明您没有将 postgres jdbc 驱动程序 jar 复制到您的应用程序中。

话虽如此，与远程数据库的直接 SQL 连接甚至可能通过 3g 网络可能无法提供您想要的性能。

如果您的应用程序中只需要一个数据库来存储一些东西，您应该查看嵌入式 SQLite 数据库。

# java - 从另一个应用程序的 servlet 调用 servlet 的 post 方法

> ID：12701769
> 
> 赞同：0
> 
> 时间：2012-10-03T04:10:41.293
> 
> 标签：java, servlet-3.0

我想从另一个应用程序调用 servlet 的 POST 方法，我在其中传递请求和响应。谁能告诉我这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T04:18:11.980

如果您的 servlet 在 HTTP POST 中被调用，那么您可以执行[HTTP 307 重定向](https://stackoverflow.com/a/6451542/16959)到另一个 servlet，它会调用它的 doPost。[如果您想从 servlet（或任何 Java 方法）发布到不同的页面，您可以使用HttpClient 之](http://hc.apache.org/httpclient-3.x/methods/post.html)类的内容编写 POST，如下所示：

```
PostMethod post = new PostMethod("http://jakarata.apache.org/");
NameValuePair[] data = {
  new NameValuePair("user", "joe"),
  new NameValuePair("password", "bloggs")
};
post.setRequestBody(data);
// execute method and handle any error responses.
...
InputStream in = post.getResponseBodyAsStream(); 
```

# azure - 应该使用哪个指纹来列出使用 windows azure management api 的托管服务

> ID：12701770
> 
> 赞同：1
> 
> 时间：2012-10-03T04:10:56.020
> 
> 标签：azure

我想列出使用 Azure 服务管理 REST Api 的所有托管服务。[msdn hlep](http://msdn.microsoft.com/en-us/library/windowsazure/ee460781.aspx)解释了一种列出托管服务的方法。我附上了 msdn 中给出的示例代码。

在代码中，他们使用了 Version、Thumbprint 和 SubscriptionId。

在 Windows azure 门户中，我们可以看到订阅具有订阅 ID。证书有指纹。一个订阅中可能有许多托管服务，因此也可能有许多证书。那么以下代码提到的指纹是什么..？它是否应该检查订阅的所有指纹，以列出订阅中的所有托管服务。

为什么我们不能仅使用 subcriptionId 获得所有托管服务（它不安全吗？）或者订阅是否有一个通用证书（所以有指纹）？

请指导我，

谢谢。

```
namespace Microsoft.WindowsAzure.ServiceManagementRESTAPI.Samples
{
    using System;
    using System.Collections.Generic;
    using System.Net;
    using System.Security.Cryptography.X509Certificates;
    using System.Xml;
    using System.Xml.Linq;

    public class Program
    {
        // Set these constants with your values to run the sample.
        private const string Version = "2011-10-01";
        private const string Thumbprint = "management-certificate-thumbprint";
        private const string SubscriptionId = "subscription-id";

        static void Main(string[] args)
        {
            try
            {
                // Obtain the certificate with the specified thumbprint
                X509Certificate2 certificate = GetStoreCertificate(Thumbprint);
                ListHostedServicesExample(SubscriptionId, certificate, Version);
            }
            catch (Exception ex)
            {
                Console.WriteLine("Exception caught in Main:");
                Console.WriteLine(ex.Message);
            }

            Console.Write("Press any key to continue:");
            Console.ReadKey();
        }

        public static void ListHostedServicesExample(
            string subscriptionId,
            X509Certificate2 certificate,
            string version)
        {
            string uriFormat = "https://management.core.windows.net/{0}/" +
                "services/hostedservices";
            Uri uri = new Uri(String.Format(uriFormat, subscriptionId));

            HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(uri);
            request.Method = "GET";
            request.Headers.Add("x-ms-version", version);
            request.ClientCertificates.Add(certificate);
            request.ContentType = "application/xml";

            XDocument responseBody = null;
            HttpStatusCode statusCode;
            HttpWebResponse response;
            try
            {
                response = (HttpWebResponse)request.GetResponse();
            }
            catch (WebException ex)
            {
                // GetResponse throws a WebException for 400 and 500 status codes
                response = (HttpWebResponse)ex.Response;
            }
            statusCode = response.StatusCode;
            if (response.ContentLength > 0)
            {
                using (XmlReader reader = XmlReader.Create(response.GetResponseStream()))
                {
                    responseBody = XDocument.Load(reader);
                }
            }
            response.Close();
            if (statusCode.Equals(HttpStatusCode.OK))
            {
                XNamespace wa = "http://schemas.microsoft.com/windowsazure";
                XElement hostedServices = responseBody.Element(wa + "HostedServices");
                Console.WriteLine(
                    "Hosted Services for Subscription ID {0}:{1}{2}",
                    subscriptionId,
                    Environment.NewLine,
                    hostedServices.ToString(SaveOptions.OmitDuplicateNamespaces));
            }
            else
            {
                Console.WriteLine("Call to List Hosted Services returned an error:");
                Console.WriteLine("Status Code: {0} ({1}):{2}{3}",
                    (int)statusCode, statusCode, Environment.NewLine,
                    responseBody.ToString(SaveOptions.OmitDuplicateNamespaces));
            }
            return;
        }

        /// <summary>
        /// Gets the certificate matching the thumbprint from the local store.
        /// Throws an ArgumentException if a matching certificate is not found.
        /// </summary>
        /// <param name="thumbprint">The thumbprint of the certificate to find.</param>
        /// <returns>The certificate with the specified thumbprint.</returns>
        private static X509Certificate2 GetStoreCertificate(string thumbprint)
        {
            List<StoreLocation> locations = new List<StoreLocation> 
            { 
                StoreLocation.CurrentUser, 
                StoreLocation.LocalMachine 
            };

            foreach (var location in locations)
            {
                X509Store store = new X509Store("My", location);
                try
                {
                    store.Open(OpenFlags.ReadOnly | OpenFlags.OpenExistingOnly);
                    X509Certificate2Collection certificates = store.Certificates.Find(
                        X509FindType.FindByThumbprint, thumbprint, false);
                    if (certificates.Count == 1)
                    {
                        return certificates[0];
                    }
                }
                finally
                {
                    store.Close();
                }
            }

            throw new ArgumentException(string.Format(
                "A Certificate with Thumbprint '{0}' could not be located.",
                thumbprint));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T04:26:57.533

您要使用的证书是“**管理证书**”。这是执行此操作的过程：

1.  在您的计算机上创建一个自签名证书（pfx 文件格式）。您可能会发现此链接很有用：[http ://consultingblogs.emc.com/gracemollison/archive/2010/02/19/creating-and-using-self-signed-certificates-for-use-with-azure-service-management -api.aspx](http://consultingblogs.emc.com/gracemollison/archive/2010/02/19/creating-and-using-self-signed-certificates-for-use-with-azure-service-management-api.aspx)
2.  在您的本地证书存储（最好是 CurrentUser\My）中安装该证书。
3.  从计算机上的本地证书存储中以 .cer 文件格式导出该证书。
4.  在门户的管理证书部分上传此证书。为此，请登录 Windows Azure 门户 (https://manage.windowsazure.com)，然后单击“设置”选项卡，然后单击“上传”按钮选择并上传此文件。

要记住几件事：

1.  每个订阅最多可以拥有 10 个管理证书。
2.  如果您希望您的同事使用相同的证书，请共享在步骤 1 中创建的 pfx 文件，并让他们将证书安装在本地计算机的证书存储中。请不要给他们在步骤 3 中创建的 .cer 文件，因为它没有证书的私有数据。

希望这可以帮助。

# c++ - ofstream 的问题

> ID：12701771
> 
> 赞同：-1
> 
> 时间：2012-10-03T04:10:59.097
> 
> 标签：c++

我正在完成这段代码，但我想知道为什么我不能用 ofstream 输出存档。

我做错了什么？

问题出在第 61 行。编译器说：错误，'struct std::stringstream' 没有名为 aux4 的成员。

```
#include <stdio.h>
#include <stdlib.h>
#include <conio.h>
#include <string.h>
#include <fstream>
#include <math.h>
#include <iostream>
#include <sstream>

using namespace std;

class  validate { 
       public:
              int aa, mm , dd ;
              string guy;
       public:
              validate ( int x, int y, int z){
                      aa=x; mm=y; dd=z;
              }
       bool check ( int aa, int mm, int dd){
            if ( aa >0){
               if( mm == 01 || mm== 03 || mm == 05 || mm == 07 || mm == 08.0 || mm == 10 || mm == 12){
                   return dd <=31;
                   }
               else if ( mm == 04 || mm == 06 || mm == 09.0 || mm == 11){
                    return dd <=30;
                    }
               else {
                    return dd <=28;
               }
            }
       }
};

int main (){
    int aa, mm, dd, key;
    string name, date, aux1, aux2, aux3;
    stringstream aux4;
    do {

        cout<<"Name:"<<endl;
        cin>>name;
        cout<<"Enter date of birth:"<<endl;
        cin>>date;

        aux1= date.substr(6,9); 
        aa = atoi(aux1.c_str());
        aa=2012-aa;

        aux2= date.substr(3,4);
        aux2=aux2.substr(0,2);
        mm = atoi(aux2.c_str());

        aux3= date.substr(0,2);
        dd = atoi(aux3.c_str());

        aux4 << dd << mm << ".txt";
        ofstream file(aux4.aux4().c_str(), fstream ::app);
        file<<aa<<"years"<<name<<endl;
        file.close();

        cout<<"Enter key != 0 if you want to continue ( Ideally press 1):"<<endl;
        cin>>key;

    }while ( key != 0);
    cout<<"Thanks! End of line."<<endl;

    system ("PAUSE");
    return 0;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T04:13:01.357

编译器直接指出了问题所在。你可能是这个意思：

```
aux4.str().c_str() 
```

代替：

```
aux4.aux4().c_str() 
```

`std::stringstream`没有`aux4()`方法。

# javascript - 将链接插入 Google Charts api 数据？

> ID：12701772
> 
> 赞同：12
> 
> 时间：2012-10-03T04:11:05.957
> 
> 标签：javascript, web, google-visualization

我在这里的谷歌图表游戏场上玩了很多谷歌图表：

[关联](http://code.google.com/apis/ajax/playground/?type=visualization#custom_bar_chart)

我一直在玩的代码是这样的：

```
function drawVisualization() {
  // Create and populate the data table.
  var data = google.visualization.arrayToDataTable([
    ['Year', 'Austria'],
    ['2003',  1336060],
    ['2004',  1538156],
    ['2005',  1576579],
    ['2006',  1600652],
    ['2007',  1968113],
    ['2008',  1901067]
  ]);

  // Create and draw the visualization.
  new google.visualization.BarChart(document.getElementById('visualization')).
      draw(data,
           {title:"Yearly Coffee Consumption by Country",
            width:600, height:400,
            vAxis: {title: "Year"},
            hAxis: {title: "Cups"}}
      );
} 
```

这给了我一个很好的图表，看起来像这样：

![在此处输入图像描述](../Images/2e3d2b7e56d7a09af590115b4f9236aa.png)

我正在尝试使此图表适合我的网站的需求，为此，我需要将左侧的栏名称链接到另一个页面。因此，例如 2003 将是用户可以单击的链接，2004 等也是如此。

我试图做这样的事情：

```
function drawVisualization() {
  // Create and populate the data table.
  var data = google.visualization.arrayToDataTable([
    ['Year', 'Austria'],
    ['<a href="url">Link text</a>',  1336060],
    ['2004',  1538156],
    ['2005',  1576579],
    ['2006',  1600652],
    ['2007',  1968113],
    ['2008',  1901067]
  ]);

  // Create and draw the visualization.
  new google.visualization.BarChart(document.getElementById('visualization')).
      draw(data,
           {title:"Yearly Coffee Consumption by Country",
            width:600, height:400,
            vAxis: {title: "Year"},
            hAxis: {title: "Cups"}}
      );
} 
```

但我只能希望它变得那么容易，但事实并非如此。有谁知道这是否可能？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-06T11:59:09.423

Manzoid 的回答很好，但是“仍然需要一些组装”，因为它只是显示一个警告框而不是跟随链接。这是一个更完整的答案，但它使条形图而不是标签可点击。我创建一个包含链接的[DataTable ，然后从中创建一个](https://developers.google.com/chart/interactive/docs/reference#DataTable)[DataView](https://developers.google.com/chart/interactive/docs/reference#DataView)以选择我想要显示的列。Then when the select event occurs, I just retrieve the link from the original DataTable.

```
<html>
  <head>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load("visualization", "1", {packages:["corechart"]});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Year', 'link', 'Austria'],
          ['2003', 'http://en.wikipedia.org/wiki/2003',  1336060],
          ['2004', 'http://en.wikipedia.org/wiki/2004', 1538156],
          ['2005', 'http://en.wikipedia.org/wiki/2005', 1576579],
          ['2006', 'http://en.wikipedia.org/wiki/2006', 1600652],
          ['2007', 'http://en.wikipedia.org/wiki/2007', 1968113],
          ['2008', 'http://en.wikipedia.org/wiki/2008', 1901067]             
        ]);
       var view = new google.visualization.DataView(data);
       view.setColumns([0, 2]);

       var options = {title:"Yearly Coffee Consumption by Country",
            width:600, height:400,
            vAxis: {title: "Year"},
            hAxis: {title: "Cups"}};

       var chart = new google.visualization.BarChart( 
           document.getElementById('chart_div'));
       chart.draw(view, options);

       var selectHandler = function(e) {
          window.location = data.getValue(chart.getSelection()[0]['row'], 1 );
       }

       google.visualization.events.addListener(chart, 'select', selectHandler);
      }
    </script>
  </head>
  <body>
    <div id="chart_div" style="width: 900px; height: 900px;"></div>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-03T06:24:21.673

这很重要，因为您看到的输出是 SVG，而不是 HTML。您示例中的那些标签（“2004”、“2005”等）嵌入在 SVG 文本节点中，因此在其中插入原始 HTML 标记不会呈现为 HTML。

解决方法是扫描包含目标值的文本节点（同样是“2004”、“2005”等）并用[`ForeignObject`](http://www.w3.org/TR/SVG/extend.html#ForeignObjectElement)元素替换它们。 `ForeignObject`元素可以包含常规 HTML。然后这些需要或多或少地定位在原始 SVG 文本节点所在的位置。

这是一个示例片段，说明了所有这些。它已针对您的特定示例进行了调整，因此当您切换到渲染真实数据时，您将需要相应地修改和概括此代码段。

```
// Note: You will probably need to tweak these deltas
// for your labels to position nicely.
var xDelta = 35;
var yDelta = 13;
var years = ['2003','2004','2005','2006','2007','2008'];
$('text').each(function(i, el) {
  if (years.indexOf(el.textContent) != -1) {
    var g = el.parentNode;
    var x = el.getAttribute('x');
    var y = el.getAttribute('y');
    var width = el.getAttribute('width') || 50;
    var height = el.getAttribute('height') || 15;

    // A "ForeignObject" tag is how you can inject HTML into an SVG document.
    var fo = document.createElementNS("http://www.w3.org/2000/svg", "foreignObject")
    fo.setAttribute('x', x - xDelta);
    fo.setAttribute('y', y - yDelta);
    fo.setAttribute('height', height);
    fo.setAttribute('width', width);
    var body = document.createElementNS("http://www.w3.org/1999/xhtml", "BODY");
    var a = document.createElement("A");
    a.href = "http://yahoo.com";
    a.setAttribute("style", "color:blue;");
    a.innerHTML = el.textContent;
    body.appendChild(a);
    fo.appendChild(body);

    // Remove the original SVG text and replace it with the HTML.
    g.removeChild(el);
    g.appendChild(fo);
  }
}); 
```

次要注意，为了方便起见，其中有一些 jQuery，但您可以替换 `$('text')`为`document.getElementsByTagName("svg")[0].getElementsByTagName("text")`.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-03T16:50:30.910

由于 SVG 嵌入路线（可以理解）对于您来说太麻烦了，所以让我们尝试一种完全不同的方法。假设您可以灵活地更改功能规范，例如*bar*是可点击的，而不是*labels*，那么这里有一个更简单的解决方案。

在此代码段中查找 ，`alert`这是您将自定义以执行重定向的部分。

```
function drawVisualization() {
  // Create and populate the data table.
  var rawData = [
    ['Year', 'Austria'],
    ['2003',  1336060],
    ['2004',  1538156],
    ['2005',  1576579],
    ['2006',  1600652],
    ['2007',  1968113],
    ['2008',  1901067]
  ];
  var data = google.visualization.arrayToDataTable(rawData);

  // Create and draw the visualization.
  var chart = new google.visualization.BarChart(document.getElementById('visualization'));
  chart.draw(data,
           {title:"Yearly Coffee Consumption by Country",
            width:600, height:400,
            vAxis: {title: "Year"},
            hAxis: {title: "Cups"}}
      );
  var handler = function(e) {
    var sel = chart.getSelection();
    sel = sel[0];
    if (sel && sel['row'] && sel['column']) {
      var year = rawData[sel['row'] + 1][0];
      alert(year); // This where you'd construct the URL for this row, and redirect to it.
    }
  }
  google.visualization.events.addListener(chart, 'select', handler);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T17:10:42.690

我显然没有足够的声誉点来直接评论以前的回复，所以我很抱歉作为一个新帖子这样做。manzoid 的建议很棒，但我发现了一个问题，看起来 Mark Butler 可能遇到了同样的问题（或者在不知不觉中回避了它）。

```
if (sel && sel['row'] && sel['column']) { 
```

该行使第一个数据点无法单击。我在 1 月至 12 月的条形图上使用它，只有 2 月至 12 月是可点击的。从条件中删除 sel['row'] 允许 Jan 工作。不过，我不知道 if() 条件是否真的必要。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-22T08:29:11.437

这是另一种解决方案，它使用锚标签包装标签的每个文本标签。

*   不`ForeignObject`
*   可点击标签
*   可通过 css 设置样式（悬停效果）

这是一个示例：[https ://jsfiddle.net/tokkonoPapa/h3eq9m9p/](https://jsfiddle.net/tokkonoPapa/h3eq9m9p/)

```
/* find the value in array */
function inArray(val, arr) {
    var i, n = arr.length;
    val = val.replace('…', ''); // remove ellipsis
    for (i = 0; i < n; ++i) {
        if (i in arr && 0 === arr[i].label.indexOf(val)) {
            return i;
        }
    }
    return -1;
}

/* add a link to each label */
function addLink(data, id) {
    var n, p, info = [], ns = 'hxxp://www.w3.org/1999/xlink';

    // make an array for label and link.
    n = data.getNumberOfRows();
    for (i = 0; i < n; ++i) {
        info.push({
            label: data.getValue(i, 0),
            link:  data.getValue(i, 2)
        });
    }

    $('#' + id).find('text').each(function(i, elm) {
        p = elm.parentNode;
        if ('g' === p.tagName.toLowerCase()) {
            i = inArray(elm.textContent, info);
            if (-1 !== i) {
                /* wrap text tag with anchor tag */
                n = document.createElementNS('hxxp://www.w3.org/2000/svg', 'a');
                n.setAttributeNS(ns, 'xlink:href', info[i].link);
                n.setAttributeNS(ns, 'title', info[i].label);
                n.setAttribute('target', '_blank');
                n.setAttribute('class', 'city-name');
                n.appendChild(p.removeChild(elm));
                p.appendChild(n);
                info.splice(i, 1); // for speeding up
            }
        }
    });
}

function drawBasic() {
    var data = google.visualization.arrayToDataTable([
        ['City', '2010 Population', {role: 'link'}],
        ['New York City, NY', 8175000, 'hxxp://google.com/'],
        ['Los Angeles, CA',   3792000, 'hxxp://yahoo.com/' ],
        ['Chicago, IL',       2695000, 'hxxp://bing.com/'  ],
        ['Houston, TX',       2099000, 'hxxp://example.com'],
        ['Philadelphia, PA',  1526000, 'hxxp://example.com']
    ]);

    var options = {...};
    var chart = new google.visualization.BarChart(
        document.getElementById('chart_div')
    );

    chart.draw(data, options);

    addLink(data, 'chart_div');
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-01T08:50:04.250

您应该使用[格式化程序](https://developers.google.com/chart/interactive/docs/reference#patternformatter)。

如果您用 HTML 替换值，那么排序将无法正常工作。

# java - Java 在运行时打开实时文件

> ID：12701780
> 
> 赞同：0
> 
> 时间：2012-10-03T04:12:14.507
> 
> 标签：java, csv, runtime, filewriter

我有一个数据表，我想要一个导出功能，这个应用程序在网络上运行，所以我想创建一个 csv 文件，然后提供（打开或另存为选项）通常的下载选项。我目前正在使用 CSV 编写器。
这里有问题的行是`Runtime.getRuntime().exec("export.csv");`在底部列出的错误我该怎么做？

这是绑定到按钮的操作

```
Action exportData = new Action() {
    private static final long serialVersionUID = -7803023178172634837L;

    @Override   
    public void execute(UIContext uic, ActionEvent event) {

        try{       
            CSVWriter writer = new CSVWriter(new FileWriter("export.csv"), '\t');
            int i = 0;
            while (i < forExport.getTotalCount()){
                String[] entries = {
                    forExport.getSearchResults().get(i).getName().getGivenNames() + forExport.getSearchResults().get(i).getName().getSurname(),
                    forExport.getSearchResults().get(i).getId()
                };
                writer.writeNext(entries);
                i++;
            }  
            writer.close();
            Runtime.getRuntime().exec("export.csv");  
        }catch(Exception e){
            system.out.print(e);
        }
    }
}; 
```

出错`java.io.IOException: Cannot run program "export.csv": CreateProcess error=193, %1 is not a valid Win32 applicationDEBUG`

注意：我不希望它在 excel 中自动打开，我希望选择保存或打开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T05:19:07.587

我不明白你为什么要执行任何事情。这是服务器代码。您根本不想在服务器上执行 Excel。您希望将文件连同内容处置标头一起写回浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T04:47:17.110

你应该试试

```
Runtime.getRuntime().exec("excel.exe export.csv"); 
```

`export.csv`不是有效的 windows 命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T04:53:41.107

.csv 文件是用于保存数据的逗号分隔值文件。exec 命令的参数是打开 .csv 文件的字符串命令。但是在您的命令字符串中，您没有指定运行时应该尝试打开 .csv 文件的任何程序。

由于 .csv 文件不可执行，请在命令字符串参数中指定程序名称，并指定您要打开 ..csv 文件的程序名称。

# c# - 通过代码从 excel 启动 vba 编辑器

> ID：12701783
> 
> 赞同：0
> 
> 时间：2012-10-03T04:12:49.653
> 
> 标签：c#, excel, vba, vsto

在**Vsto-excel**项目中，我在特定模块中有一个**宏。**通过c# 中的**代码**，我想启动显示给定**宏**的 VBA 编辑器。我知道互操作概念，但我坚持启动 vba 编辑器并显示特定的宏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T10:08:10.967

您可以使用`Application.Goto "MarcoName"`它将在您指定的子/宏处打开 VBE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T05:46:59.163

打开的 Excel 工作表上的键盘快捷键 ALT + F11 默认打开 VBA 编辑器。使用 excel 互操作打开 excel 并使 excel 窗口可见。然后您可以将键盘快捷键从您的应用程序传递到 excel 窗口。

如果您在 winform 应用程序上使用它，您可以使用**sendkeys**方法将键盘快捷键传递给 excel 窗口。 [http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.send.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.send.aspx)

否则使用**sendmessage**方法传递键盘快捷键。这是关于 sendmessage 用法的帖子，[c# 将键盘命令发送到另一个窗口/进程](https://stackoverflow.com/questions/8605147/c-sharp-sending-keyboard-commands-to-another-window-process)。

# python - 在写入模式下迭代文件

> ID：12701785
> 
> 赞同：-2
> 
> 时间：2012-10-03T04:12:53.633
> 
> 标签：python

```
FOLDER1
  FOLDER2
     FOLDER3
     $$FOLDER4 
```

我需要就像`FOLDER3`我的输出打印为`FOLDER3.txt`. 这是我的代码，我想在写入模式下迭代文件夹。

```
import os,sys
path="O:\\103"
dir=os.listdir(path)
for file in dir:
dir=os.path.join(path,file)
print dir
os.system("dir /b "+dir+" > "+file+".txt")
with open('file','r') as f:
#f.readline()
   text=f.read()
   print text
   f.close()
   with open('f','w') as yyy:
   for xxx in yyy:
   if all(not xxx.startswith(x) for x in ('$')):
    p=xxx.split("_")[0]
    print p
    f.writelines(str(p)+"\n")
yyy.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T04:27:48.290

我将突出显示您代码中的问题；这应该可以帮助你。目前尚不清楚您真正想要做什么。

```
import os,sys

path="O:\\103" # this should be r'O:\103'
dir=os.listdir(path)
for file in dir: # do not use file as a variable name as its a built-in
    dir=os.path.join(path,file) # here you are overwriting the `dir` variable
    print dir
    os.system("dir /b "+dir+" > "+file+".txt")
    with open('file','r') as f: # 'file' is a string, file is a variable
        #f.readline()
        text=f.read()
        print text
    f.close() # you don't need to close the file if you use a with statement.
    with open('f','w') as yyy: # here you are trying to open the string 'f'
       for xxx in yyy:
           # this should be if not xxx.startswith('$'):
           if all(not xxx.startswith(x) for x in ('$')):
               p=xxx.split("_")[0]
               print p
               f.writelines(str(p)+"\n") # what is f here? This should be
                                         # .write()
                                         # writelines() takes a sequence
        yyy.close() # again, no need to close 
```

* * *

如果你有一个目录`/home/vivek/test`并且在它里面你有这个：

```
.
└── vivek
    ├── v1
    │   ├── A.txt
    │   ├── B.txt
    │   └── C.txt
    └── v2
        ├── D.txt
        ├── E.txt
        └── F.txt 
```

您的目标是打印文件名（或打开文件名并打印其内容）：

```
import os

root_path = '/home/vivek/test'
files = []
for parent,directory,file_list in os.walk(root_path):
   if file_list:
      for filename in file_list:
          files.append(os.path.join(parent,filename)) 
```

这将为您提供文件的完整路径列表，如下所示：

```
['/home/vivek/test/vivek/v2/E.txt',
 '/home/vivek/test/vivek/v2/D.txt',
 '/home/vivek/test/vivek/v2/F.txt',
 '/home/vivek/test/vivek/v1/C.txt',
 '/home/vivek/test/vivek/v1/B.txt',
 '/home/vivek/test/vivek/v1/A.txt'] 
```

现在，你可以做任何你喜欢的事情：

```
for filename in files:
   with open(filename) as f:
       print f.readlines() 
```

# java - 我们可以在java中用它自己的异常包装一个异常吗

> ID：12701789
> 
> 赞同：0
> 
> 时间：2012-10-03T04:13:02.263
> 
> 标签：java, exception, exception-handling

我可以创建一个异常吗

```
A a = new A (new B ( new A ) ); 
```

where`A`和`B`是两种不同类型的异常。

我知道 Java 可以做到，但这样做是否正确？

编辑：我正在写一个异常类型的重试，所以我正在检查异常的getCause。当 getCause 为 null 或 getCause 本身相等时我会中断，当 getCause 等于迄今为止看到的任何异常时我是否也应该中断

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T05:17:44.047

> AException a = new AException (new BException (new AException) );

这是合法的。

* * *

您也可以直接使用该`initCause(Throwable)`方法初始化原因。

如果您试图将异常作为自己的原因；例如

```
 AException a = new AException();
 a.initCause(a); 
```

你会得到一个`IllegalArgumentException("Self-causation not permitted")`. （感谢 Joachim Sauer 指出这一点。）

虽然 JVM 不会阻止您创建间接循环，但它仍然是一个**非常糟糕的主意**。

*   这是对`Throwable`API 的滥用。一个异常事件直接或间接地引起自己是没有逻辑意义的。

*   那里可能有代码*假设*异常的“原因”链没有任何循环。如果遇到具有原因循环的病态异常，此类代码可能会以令人讨厌的方式失败。

请注意，当前一代（Java 7）`printStackTrace()`检测并处理“原因”循环，但前几代没有：

*   [http://srl.cs.berkeley.edu/~mhn/ftp/java/lang/Throwable.java.html](http://srl.cs.berkeley.edu/~mhn/ftp/java/lang/Throwable.java.html)
*   [http://javasourcecode.org/html/open-source/jdk/jdk-6u23/java.lang/Throwable.java.html](http://javasourcecode.org/html/open-source/jdk/jdk-6u23/java.lang/Throwable.java.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T04:39:20.373

考虑您有以下课程。

```
public static class A extends Exception {
    public A() {}
    public A(Exception e) {}

}
public static class B extends Exception {
    public B(Exception e) {}
    public B() {}
} 
```

现在，如果您看到当您出现在默认构造函数中时，包装异常总是结束。在那之前你应该打电话`getCause()`

```
 throw new B(new A(new B()));//Ends with B since no exception is wrapped inside it. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T05:25:05.023

这需要三个略有不同的答案：

1.  **是**的，您可以将一个异常包装在另一个*相同类型*的异常中。

2.  **不**，您不能将异常*本身*包装起来（即在完全相同的实例中）。

3.  不幸的**是**，您可以创建一个循环（A 导致 B 导致 A 导致 B ...）。

第一个非常清楚：您可以包装由另一个引起的`IllegalStateException`包装。`IllegalArgumentException``IllegalStateException`

第二个被里面的代码阻止`initClause()`（由构造函数调用，或者如果之前从未调用过，可以直接调用），防止自因果（确实`cause == this`用作没有设置原因的标志，以区分它从这`cause == null`意味着原因被明确设置为`null`）。

第三点不好，但在实践中不应该经常发生，因为你必须做一些额外的工作才能得到它：

```
Exception e1 = new Exception();
Exception e2 = new Exception(e1);
e1.initCause(e2); 
```

幸运的是`printStackTrace()`，实际上处理了这种情况：

```
java.lang.Exception: java.lang.Exception
    at ScratchMain.main(ScratchMain.java:6)
Caused by: java.lang.Exception
    at ScratchMain.main(ScratchMain.java:5)
    [CIRCULAR REFERENCE:java.lang.Exception: java.lang.Exception] 
```

# objective-c - 获取并选择路径 Objective C

> ID：12701791
> 
> 赞同：0
> 
> 时间：2012-10-03T04:13:16.803
> 
> 标签：objective-c, xcode, cocoa

这就是我所拥有的：

![例子](../Images/1258436c65a8497c3ac97f9d48d67fde.png)

如何使标签包含桌面的当前路径，以及如何使其在他们点击选择时，他们可以选择安装位置，然后将标签设置为包含该路径？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T05:33:08.667

```
-(IBAction) choose : (id)sender;
{
    NSOpenPanel *panel = [NSOpenPanel openPanel];
    [panel setCanChooseDirectories:YES];  
if ([panel respondsToSelector:@selector(beginWithCompletionHandler:)]) { 
//Mac OS X 10.6 and later
    [panel beginWithCompletionHandler:^(NSInteger result) {
        if (result == NSFileHandlingPanelOKButton) {    // Only if not cancelled
            NSArray *urls = [panel URLs];
            [text setStringValue:[[urls objectAtIndex:0]path]];
            [panel orderOut:nil];  

        }
    }];
}
else{

        NSInteger result    = [panel runModal];
        if (result == NSFileHandlingPanelOKButton) {
            NSArray *urls = [panel URLs];
       [text setStringValue:[[urls objectAtIndex:0]path]];
            [panel orderOut:nil];   
        }
}
}  

- (void) awakeFromNib
{
NSString *docsDir = [NSHomeDirectory() stringByAppendingPathComponent:  @"Desktop"];
[text setStringvalue: docsDir];
} 
```

# c# - 如何在活动表单下打开表单

> ID：12701792
> 
> 赞同：0
> 
> 时间：2012-10-03T04:13:39.810
> 
> 标签：c#, .net, winforms, window

在.Net WinForms 我有两种形式。Form1 已打开且处于活动状态。如何打开新表单 (Form2)：

*   Form1 必须有焦点
*   Form2在Form1下打开（后台Form1）

第一点很简单，请参阅[stackoverflow ...](https://stackoverflow.com/questions/686132/opening-a-form-in-c-sharp-without-focus?rq=1) 但我不知道如何在Form1下显示Form2。谢谢。

**编辑**

```
 public partial class Form1 : Form
{
    Form2 frm;

    public Form1()
    {
        InitializeComponent();
        frm = new Form2();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        textBox1.Focus();
        timer1.Start();
    }

    private void timer1_Tick(object sender, EventArgs e)
    {
        this.AddOwnedForm(frm);
        frm.Show();
        frm.SendToBack();
        this.BringToFront();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        frm.Show();
        frm.SendToBack();
        this.BringToFront();
    }

} 
```

表格2

```
public partial class Form2 : Form
{
    public Form2()
    {
        InitializeComponent();            
    }

    private void Form2_Load(object sender, EventArgs e)
    {
        textBox1.Focus();
    }

    protected override bool ShowWithoutActivation
    {
        get
        {
            return true;
        }
    }

    protected override CreateParams CreateParams
    {
        get
        {
            //make sure Top Most property on form is set to false
            //otherwise this doesn't work
            int WS_EX_TOPMOST = 0x00000008;
            CreateParams cp = base.CreateParams;
            cp.ExStyle |= WS_EX_TOPMOST;
            return cp;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T05:03:26.877

我认为第二点你需要做的是：

```
var form2 = new Form2();
    form2.MdiParent = form1; //form1 is your parent form; use this operator in case you are creating this form from out base form

    form2.WindowState = FormWindowState.Normal;
    form2.Show(); 
```

请查看此以获取更多详细信息：

[http://msdn.microsoft.com/en-us/library/system.windows.forms.form.mdiparent.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.mdiparent.aspx)

编辑

请参阅下面的代码，该代码显示 frm 在 Form1 之上打开。

```
public partial class Form1 : Form
{
    Form2 frm;

    public Form1()
    {
        InitializeComponent();
        frm = new Form2();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        this.WindowState = FormWindowState.Maximized;
        textBox1.Focus();
        timer1.Start();
    }

    private void timer1_Tick(object sender, EventArgs e)
    {
        if (!frm.Visible)
        {
          this.AddOwnedForm(frm);
          frm.Show();
          frm.SendToBack();
          this.BringToFront();
        }
    }

    private void button1_Click(object sender, EventArgs e)
    {
        this.AddOwnedForm(frm);
        frm.Show();
        frm.SendToBack();
        this.BringToFront();
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T04:47:40.463

您只需实例化 Form2 并显示它，例如：

```
var form2 = new Form2();
form2.Visible = true; 
```

然后将 Form1 设置为活动表单（假设这是在 Form1 的代码中完成的 - 因此是`this`）：

```
this.BringToFront(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T05:47:37.797

我猜你想要一个对话

```
var form2 = new Form2(); 
form2.Visible = true; 
this.ShowDialog(); 
```

# jenkins - 当我想在 Jenkins 中发布性能报告时，我应该如何指定我的 jtl 文件的路径？

> ID：12701794
> 
> 赞同：1
> 
> 时间：2012-10-03T04:13:58.093
> 
> 标签：jenkins, jmeter

在我的 Jenkins 配置中，我有一个 build.xml 文件指定为构建后过程。这个 build.xml 文件指定了我想要运行的 JMeter 文件 (JMX) 以及我想要放置报告文件 (jtl) 的位置。

我的 jtl 文件的位置是`c:\inetpub\wwwroot\.jenkins\results\jtl\`.

我可以看到这个位置的 jtl 文件的时间戳与我构建的时间戳相匹配。但是，根据Jenkins界面，在“发布性能测试结果报告”类别下，我需要指定`**/*.jtl`为JMeter文件位置。

我这样做了，但我的构建不断失败，因为我不断收到一条消息说`No JMeter files matching '**/*.jtl" have been found`。
我相信这条路径需要相对于工作空间的根路径。我尝试过使用相对路径（即`../../results/jtl/*.jtl`）和绝对路径。
但是他们都给我说没有与路径匹配的 Jmeter 文件。

那么，我到底应该放什么让 Jenkins 找到我的 .jtl 文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T02:28:56.820

我使用`**/*.jtl`没有问题。

但是，您的 jtl 文件的位置是有问题的。
通常，它们位于作业的工作区中。

我的工作区结构看起来像

```
results/jtl/*.jtl 
```

# java - Maven多模块配置中的Spring 3，明智与否？

> ID：12701795
> 
> 赞同：2
> 
> 时间：2012-10-03T04:14:00.030
> 
> 标签：java, spring, maven-3, configuration-management, decoupling

您能否向我推荐如何将 Web 应用程序和 API+db 内容拆分为两个 maven 模块（有一个父模块）的好方法？我主要在 Spring 配置上苦苦挣扎。

```
<Parent project>
  -> <web project> (contains spring mvc,servlets,jsps, controllers...)
  -> <api project> (contains spring hibernate cfg, db connection, dao`s, db business rules etc...)
pom.xml 
```

API 项目被打包成 jar 和它对 WEB 项目的依赖（它为 jetty 生成 war 文件）

设置 maven 结构很容易，但我想知道在两个模块之间是否有可能和明智的拆分弹簧配置。您是否知道任何以这种方式工作的示例，或者您发现此配置有任何问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T21:52:13.993

对于一个小型项目，一个模块用于前端，另一个模块用于后端通常就足够了。

创建 2 个 Spring applicationContext.xml 文件，并将 web 项目中的一个导入 api 项目中的一个，如下所示：

```
<import resource="classpath*:/config/backendApplicationContext.xml" /> 
```

因此，前端的 bean 可以引用后端的 bean，而无需确切知道它们是如何被实例化和连接在一起的，这很好。

# php - php cookie 相关问题

> ID：12701796
> 
> 赞同：2
> 
> 时间：2012-10-03T04:14:01.607
> 
> 标签：php, wordpress

我创建一个cookies

```
setcookie('sm_posts['.$key.']', 'value', time()+60*60*24*365); 
```

对于一个数组`sm_posts`并在页面中打印这些 cookie`wordpress`但如果我点击一个交叉图像然后它将被删除但它不工作

```
foreach($_COOKIE["sm_posts"] as $key => $value)      
{
    setcookie('sm_posts['.$key.']', '', time()-60*60*24*365);           
} 
```

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T04:32:23.973

尝试将路径指定为下一个参数。

```
setcookie('sm_posts['.$key.']', '', time()-60*60*24*365, '/'); 
```

对两个 cookie 设置语句执行此操作（并手动删除所有现有的 cookie）。

* * *

但更好的解决方案是使用 WordPress 为此定义的 COOKIEPATH 和 COOKIE_DOMAIN。

```
setcookie('sm_posts['.$key.']', '', time()-60*60*24*365, COOKIEPATH, COOKIE_DOMAIN); 
```

（再次，手动删除所有现有的 cookie）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T04:24:24.987

试试这个方法

```
foreach($_COOKIE["sm_posts"] as $key => $value)
 {
    setcookie ("sm_posts['".$key."']","", time()-60*60*24*365);
 } 
```

我认为这是因为你的报价

# spring - Spring MVC 应用的验收测试

> ID：12701797
> 
> 赞同：0
> 
> 时间：2012-10-03T04:14:12.790
> 
> 标签：spring, testing, spring-mvc, acceptance-testing

你能推荐一些用于 Spring MVC 应用程序验收测试的框架吗？像 Rails“Capybara+Cucumber”这样的东西是理想的。到目前为止，我只发现了 Selenium。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T06:44:18.683

测试框架实际上并不依赖于服务器端框架。所以任何人都会这样做，无论您使用的是 Spring MVC、JSF 还是其他任何东西。

据我所知，Selenium 是最受欢迎和最稳定的一种，但[这里有几个选项之间的比较](https://stackoverflow.com/questions/606550/watir-vs-selenium-vs-sahi)。

也不是通常称为“功能”和“自动化”测试

# java - Java Hangman Program 中 JOptionPane/JPanel 的奇怪问题

> ID：12701798
> 
> 赞同：2
> 
> 时间：2012-10-03T04:14:14.923
> 
> 标签：java, swing, graphics, repaint, joptionpane

![在此处输入图像描述](../Images/d77f6b153122cc1b0d2c5d1b544611ec.png)

关于我的 Hangman 程序，我有一个非常具体的问题。

您可能希望自己运行该程序以了解我遇到的问题。

当计数器（包含错误猜测次数的变量）达到 6 时，就会出现问题。在这一点上，用户已经用完了所有分配的猜测，并且可以选择再次玩。如果用户选择再次播放，则调用 askQuestion 方法，其中 JOptionPane 从用户那里获取一个字符串，该字符串将作为要猜测的新单词。

在用户输入一个单词并单击 OK 后，JOptionPane 出于某种原因被绘制到了面板上。

这是我遇到的问题。在您提交一封信作为猜测后它会消失，但它存在时是一个非常难看的错误。我在上面包含了一个屏幕截图。这是我的代码：

```
//********************************************************
//  HangmanPanel.java        
//
//  Creates your run-of-the mill hangman game.
//********************************************************

import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class HangmanPanel extends JPanel
{

private JLabel inputLabel;    // Input field for letter guesses
private String word;          // Variable to hold answer word 
private String guessed = "Guessed: ";  // Holds letters already guessed
private String l, text = "";  // l: Variable to hold letter guess; text: Tells user whether their guess was correct
private JTextField letter;    // Text Field for Input Label
private int counter = 0;      // Incremented when wrong guess is made; controls drawing of hangman
private String underscore = "";    // Shows answer as sequence of underscores, which are replaced with correct guesses
private boolean playing = true;

//------------------------------------------
//  Sets up the hangman panel.
//------------------------------------------
public HangmanPanel()
{
    setBackground (Color.white);
    setPreferredSize (new Dimension(300, 300));
    askQuestion();

    inputLabel = new JLabel ("Enter a letter.");
    add (inputLabel);

    letter = new JTextField (1); 
    add (letter);
    letter.addActionListener(new TempListener());
}
public void askQuestion()
{
    word = JOptionPane.showInputDialog ("Enter the word.");
    for (int i = 0; i < word.length(); i++)
    {
        underscore += "-";    
    }

    repaint();
}
//----------------------------------
//  Paints a hanging man.
//----------------------------------
public void paintComponent (java.awt.Graphics page)
{

    super.paintComponent (page);

    final int xBound = 200, yBound = 20;

    if (playing)
    {
        page.setColor (Color.black);

        page.fillRect(xBound + 30, yBound + 80, 60, 10); // Stand
        page.fillRect (xBound +55, yBound, 10, 80); // Gallows Pole
        page.fillRect(xBound + 25, yBound, 40, 5);
        page.fillRect(xBound + 25, yBound, 3, 20); // Rope

        if (counter > 0)
        page.fillOval(xBound + 18, yBound + 15, 16, 16); // Head
        if (counter > 1)
        page.fillRect(xBound + 24, yBound + 23, 5, 30); // Torso
        if (counter > 2)
        page.drawLine(xBound + 23, yBound + 40, xBound + 13, yBound + 30); // Right Arm
        if (counter > 3)
        page.drawLine(xBound + 29, yBound + 40, xBound + 39, yBound + 30); // Left Arm
        if (counter > 4)
        page.drawLine(xBound + 23, yBound + 53, xBound + 18, yBound + 63); // Right Leg
        if (counter > 5)
        {
            page.drawLine(xBound + 29, yBound + 53, xBound + 34, yBound + 63); // Left Leg
            text = "";
            counter=0;
            underscore = "";
            guessed = "Guessed: ";

           //page.drawString("Play Again?", 50, 130);
            int again = JOptionPane.showConfirmDialog (null, "Do Another?");
            if (again == JOptionPane.YES_OPTION)
                askQuestion();
            else 
                playing = false;

        }

        page.drawString(guessed, 20, 130);

        page.drawString(underscore, 20, 110);

        page.drawString(text, 20, 250);

    }
    else
        page.drawString("Goodbye", 50, 50);
}

private class TempListener implements ActionListener
{
    public void actionPerformed (ActionEvent event)
    {
        l = letter.getText();     // Stores letter guess as a string
        letter.setText("");       // Clears Text Field
        char let = l.charAt(0);   // Creates a char variable for letter guess
        guessed = guessed + let + " ";

        int index = word.indexOf(let);
        if (index != -1)
        {
            text = "Correct";
            underscore = underscore.substring(0,index) + word.substring(index, index+1) + underscore.substring(index+1); // Replaces underscore with found letter
            String substring = word.substring(index+1);
            int index2 = substring.indexOf(let);

            while (substring.indexOf(let) != -1)
            {
                index2 = substring.indexOf(let);
                index = index + index2 + 1;
                underscore = underscore.substring(0,index) + word.substring(index, index+1) + underscore.substring(index+1);
                substring = word.substring(index+1);
            }
        }
        else
        {
            text = "Wrong";
            counter++;
        }
        if (underscore.indexOf('-') == -1)
        {
            text = "You Win!";
            //askQuestion
        }

        repaint();

    }

}

} 
```

这是 HangmanFrame 类。这与我的问题无关，我只为那些想要运行该程序的人提供它：

```
import javax.swing.JFrame;

public class HangmanFrame
{
    //----------------------------------------------
    //  Creates the main frame of the program.
    //----------------------------------------------
    public static void main (String[] args)
{
    JFrame frame = new JFrame ("Hangman");
    frame.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);

    HangmanPanel panel = new HangmanPanel();

    frame.getContentPane().add(panel);
    frame.pack();
    frame.setVisible(true);

}

} 
```

这是我的搜索类，它也与我的问题没有直接关系：

```
public class Search{
    public static Comparable linearSearch (String word, String letter, int start)
    {

        while (!found && index < word.length())
        {
            if (word.charAt(index) == letter.charAt(0))
                found = true;
            else
                index++;
        }
        if (found)
            return index;
        else
            return null;

    }
} 
```

我为那里的格式问题道歉，我尽力了。无论如何，我希望有人能指出我正确的方向，我怀疑这个问题可以通过调用 repaint() 来解决，但我一直无法这样做。还想提一下，这个程序显然还有很多其他缺陷；它远非健壮。那是因为它远未完成。您不必将这些问题提请我注意，我会在解决此错误后解决它们。谢谢你看看这个！编辑：我的问题已解决，但是我仍然想将其保持开放一段时间，看看是否有人可以准确地阐明为什么我的原始代码不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T04:36:35.137

该问题可能与您`JOptionPane.showConfirmDialog`在`paintComponent`方法中显示的事实有关。该方法负责组件绘制。避免将程序逻辑放入该方法中。绘画操作应该是快速和优化的，以获得更好的性能和用户体验。从这个方法弹出一个模态对话框不是一个好主意。此外，您无法控制何时调用此方法。调用`repaint()`只调度组件的更新请求。

查看[执行自定义绘画教程](http://docs.oracle.com/javase/tutorial/uiswing/painting/index.html)以获取详细信息和示例。另请[参阅 AWT 和 Swing 中的绘画](http://www.oracle.com/technetwork/java/painting-140037.html)。

# linux - 用于计算文件中相似词的 Linux shell 脚本

> ID：12701806
> 
> 赞同：0
> 
> 时间：2012-10-03T04:15:16.457
> 
> 标签：linux, shell, command-line

我有一个以下格式的日志文件：

```
201208290101
201208290101
201208290101
201208290101
201208290101
201208291222
201208291222
201208291222
201208291222
201209300242
201209300242
201209300242 
```

我想计算在某个特定时间发生的事件数量，所以我必须计算日志文件中某个特定时间戳发生的次数。例如上面的输出将是这样的：

```
201208290101  = 5
201208291222  = 4
201209300242  = 3 
```

关于如何计算这个的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T04:17:41.757

只需通过`uniq -c`.

```
$ uniq -c
201208290101
201208290101
201208290101
201208290101
201208290101
201208291222
201208291222
201208291222
201208291222
201209300242
201209300242
201209300242
^D
      5 201208290101
      4 201208291222
      3 201209300242 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T04:22:01.683

您可以`awk`关联数组：

```
 awk '{a[$0]++;} END{for(i in a) print i," = ", a[i]}' filename 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T04:26:29.357

如果一切都已排序，那么

```
cat yourfile.txt | uniq -c 
```

否则，您需要先对其进行排序，然后才能使用 uniq：

```
cat yourfile.txt | sort | uniq -c 
```

# php - PHP包含路径查询

> ID：12701808
> 
> 赞同：1
> 
> 时间：2012-10-03T04:15:20.607
> 
> 标签：php, html

根文件夹

|

|-----Admin 文件夹（在根文件夹中）

|Admin |-----factory.php（在 admin 文件夹中）

|Admin |-----Object0.php(在admin文件夹中)

|Admin |-----object1.php(在admin文件夹中)

|Admin |-----admin.php(在admin文件夹中)

|

|-----utils.php（在根文件夹中）

|-----index.php（在根文件夹中）

index.php 正在使用工厂类来检索数据，包括使用

```
include_once("admin/factory.php") 
```

utils.php 用于通用目的，所以我保存在主文件夹中， factory.php 使用包含此文件

```
include_once("utils.php"). 
```

admin.php 使用工厂类提交数据，包括使用

```
include_once("factory.php") 
```

但它提示我无法打开 utils.php 的警告。

我们需要如何采用这种方法，将来可能会有更多的文件夹，我们应该如何添加这些。

其他文件（如 js、css、图像）如何在 HTML 中被引用。如果有人为此提供最好的意见，那就太好了

一种方法是按根引用所有内容。但如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T05:08:23.707

将以下代码添加到根目录中的文件中，并将该文件包含在所有主脚本的顶部。

```
define('ABSPATH', dirname(__FILE__) . '/'); 
```

然后您可以在任何文件中使用以下包含

```
include_once ABSPATH.'admin/factory.php';
include_once ABSPATH.'utils.php'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T04:21:11.927

尝试在 admin.php 中包含 utils.php：

```
include_once dirname(__FILE__).'/../utils.php'; 
```

`__FILE__`始终是您所在的文件，无论您从何处包含并`dirname()`获取其目录。

参考：

[http://php.net/manual/en/language.constants.predefined.php](http://php.net/manual/en/language.constants.predefined.php) [http://php.net/manual/en/function.dirname.php](http://php.net/manual/en/function.dirname.php)

# regex - 正则表达式，查找单引号括起来的单引号

> ID：12701810
> 
> 赞同：1
> 
> 时间：2012-10-03T04:15:36.407
> 
> 标签：regex, vbscript

当字符串包含单引号时，我正在维护一个有保存问题的旧系统。

例如，这些将失败：

```
"update table set column2 = 'O'Connell', column3 = 'O'Riordon' where column1 = 1"
"insert into table (column1, column2, column3, column4, column5, column6, column7) values('O'Reilley','state, postcode','',1,2,'O'Riordon')". 
```

到目前为止，我已经想出了这个有效的 vbscript 正则表达式

```
([,=(]\s*'[^']*)'([^']*'\s*[,)\s]) 
```

是否可以在不使用标题 [(|=|\s|,] 和尾部 [,|)|\s] 的情况下编写 vbscript 正则表达式？

谢谢。

编辑：修复发布的正则表达式以删除 | 从标题和拖车。正则表达式的使用如下

```
regexp.replace("string","$1''$2") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T04:54:14.503

我能想到的唯一方法只有在包含单引号的字符串从不包含空格时才有效。在这种情况下，您可以搜索

```
\B'([^'\s]*'[^'\s]*)'\B 
```

**解释：**

```
\B        # Assert that there is no alphanumeric character before...
'         # the opening quote
(         # Match and capture...
 [^'\s]*  # Any number of non-quote/non-whitespace characters
 '        # One quote
 [^'\s]*  # Any number of non-quote/non-whitespace characters
)         # End of capture group 1
'         # Match the closing quote
\B        # Assert that there is no alphanumeric character afterwards 
```

# sql - SQL Server 2008 R2 中的触发代码或日期格式错误

> ID：12701812
> 
> 赞同：0
> 
> 时间：2012-10-03T04:15:51.453
> 
> 标签：sql, triggers, sql-server-2008-r2

在用户完成验证（某种用户键入数据）后，我正在使用捕获软件 Abbyy FlexiCapture。它将捕获的数据导出到 SQL Server 2008 R2

一旦 SQL Server 确定有**插入的数据**（新行），它将**触发**代码根据业务规则**更新**表 Abbyy。

该表有两列称为`ProcessingDate`和`DateOfService`

我的业务规则要求是

1.  如果处理日期晚于服务日期 7 个月，它将更新表 Abbyy
    *   `CouponStatus`带有“**拒绝**”的列，
    *   `RejectCode`带有“ **A5** ”的列。
2.  如果 Processing Date 早于 Date Of ServiceDate 7 个月，它将更新 Table Abbyy
    *   `CouponStatus`带有“批准”的列，
    *   `RejectCode`带有“null”的列。

我面临一个错误，因为一些处理日期**超过**服务日期 7 个月的插入数据，列`CouponStatus`变为“**批准**”。

我不确定是我的触发代码问题还是日期格式问题。当用户进行验证时，日期格式为`dd/mm/yy`,

在 SQL Server 2008 R2 中，我`ProcessingDate`和`DateOfService`列的数据类型为`date`格式`yyyy-mm-dd`

这是我的触发代码，请从第 86 行开始

```
USE [master]
GO
/****** Object:  Trigger [dbo].[BusinessRule]    Script Date: 10/03/2012 11:28:05 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

-- =============================================
-- Author: <Author,,Name>
-- Create date: <Create Date,,>
-- Description: <Description,,>
-- =============================================

ALTER TRIGGER [dbo].[BusinessRule]
ON [dbo].[Abbyy]
AFTER INSERT
AS
BEGIN
-- SET NOCOUNT ON added to prevent extra result sets from
-- interfering with SELECT statements.
SET NOCOUNT ON;

DECLARE @Identity varchar(225);
DECLARE @RegNo varchar(225);
DECLARE @ProDate date;
DECLARE @SerDate date;
DECLARE @PriKey varchar(255);

SELECT @Identity=EngineNo, @RegNo=VehRegNo, @ProDate=ProcessingDate, @SerDate=DateOfService,@PriKey=DocID FROM Inserted

--If EngineNo not exist in db, update Reject & A1
IF EXISTS (Select EngineNo
            From Abbyy
            Where
                NOT EXISTS
                (Select EngineNo
                 From eDaftarOwnerDetail
                 where eDaftarOwnerDetail.EngineNo = @Identity))

    UPDATE Abbyy
    SET CouponStatus = 'Reject', RejectCode = 'A1'
    WHERE EngineNo = @Identity
    and DocID=@PriKey

--If Vehicle Registration No not exist in db, update Reject & A2
Else If EXISTS (Select VehRegNo
                From Abbyy
                Where
                    NOT EXISTS
                    (Select VehRegNo
                     From eDaftarOwnerDetail
                     Where eDaftarOwnerDetail.VehRegNo = @RegNo))
    UPDATE Abbyy
    SET CouponStatus = 'Reject', RejectCode = 'A2'
    WHERE VehRegNo = @RegNo
    and DocID=@PriKey

--If EngineNo & Vehicle Registration No does not matched, update Reject & A3
Else If EXISTS (Select EngineNo, VehRegNo
                From Abbyy
                Where
                    NOT EXISTS
                    (Select EngineNo, VehRegNo
                     From eDaftarOwnerDetail
                     Where eDaftarOwnerDetail.EngineNo = @Identity
                     and eDaftarOwnerDetail.VehRegNo = @RegNo))
    UPDATE Abbyy
    SET CouponStatus = 'Reject', RejectCode = 'A3'
    WHERE EngineNo = @Identity
    and VehRegNo = @RegNo
    and DocID=@PriKey

-- If EngineNo exist in db more then twice, update Reject & A4
Else If EXISTS (Select COUNT(1)
                From Abbyy
                Where EngineNo = @Identity
                Group by EngineNo 
                Having COUNT(1)>2)
    UPDATE Abbyy
    SET CouponStatus = 'Reject', RejectCode = 'A4'
    WHERE EngineNo = @Identity
    and DocID=@PriKey

-- If ProcessingDate more than ServiceDate 210 days, update Reject & A5 
Else If EXISTS (Select ProcessingDate, DateOfService
                From Abbyy
                Where
                datediff(day, @SerDate, @ProDate)>210)
    UPDATE Abbyy
    SET CouponStatus = 'Reject', RejectCode = 'A5'
    WHERE ProcessingDate = @ProDate
    and DateOfService = @SerDate
    and DocID=@PriKey

Else
UPDATE Abbyy
Set CouponStatus = 'Approve', RejectCode = ''
WHERE EngineNo = @Identity

-- Insert statements for trigger here

END 
```

感谢任何人都可以给我一些指导来解决这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T04:52:20.263

在比较之前进行某种日期格式化以将两个值转换为相同的格式

例子 ：

```
WHERE CONVERT(VARCHAR,ProcessingDate,102) = CONVERT(VARCHAR,@ProDate,102) 
```

或者

```
WHERE CONVERT(DATE,ProcessingDate,102) = CONVERT(DATE,@ProDate,102) 
```

# python - 将随机生成的数字放入文本文件

> ID：12701816
> 
> 赞同：0
> 
> 时间：2012-10-03T04:15:59.993
> 
> 标签：python

我的任务是在一个尺寸为 20x20x20 的盒子内生成随机坐标（其中 512 个）。

查看此 3D 图像的程序需要 XYZ 文件，其格式为：

```
1000.000000 #number of coordinates
comment goes here #coment line
H 0.000000 0.000000 0.000000 #1st colmun is arbitary - we'll leave it H, 2nd is x vavlue, 3rd value is y value and 4th column is z value.
H 0.000000 0.000000 1.000000
H 0.000000 0.000000 2.000000
H 0.000000 0.000000 3.000000 
```

到目前为止，我有，

```
import random
numpoints=512
L=20
while len(points)<numpoints:
    p = (random.randint(0, L), random.randint(0, L), random.randint(0, L))
    if p not in points:
        points.add(p) 
```

这将生成我的 (x,y,z) 坐标，但我遇到的问题是将它放入文本文件中。

我从这样的事情开始，但需要一些帮助：

```
with open("question1.xyz","w") as file:
     file.write("\ncomment goes here\n") #this is for the 2nd line in my xyz file
     while len(points)<numpoints:
        p = (random.randint(0, L), random.randint(0, L), random.randint(0, L))
        if p not in points:
            points.add(p)
                    file.write('H %f %f %f\n' % (x, y, z)) 
```

* * *

这就是我必须创建我的输出并将行数放在第一行但出于某种原因它不会模仿我的文件

```
#this will put the number of particles as the first line and generate an output file
with open("question2.xyz") as infile:
    with open("q2Output.xyz","w") as outfile:
        for i,line in enumerate(infile):
            if i==0:
                outfile.write('%f\n'%counter)
            else:
                outfile.write(line) 
```

我发现它是因为我的计数器不存在，但是有没有更有效的方法呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T04:30:18.793

这可以进一步清理，但所做的基本更改是：

1.  添加`points`容器
2.  更改`file`为`f`（您希望避免定义与 Python 内置同名的变量），
3.  更改格式参数以接受元组`p`（它将自动解包）
4.  进行一些基本的格式更改。

总而言之，你们非常接近——只是需要调整一些基本的东西。

```
import random

numpoints = 512
L = 20
points = set()

# Open f and write
with open("question1.xyz","w") as f:
    f.write("\ncomment goes here\n") #this is for the 2nd line in my xyz f
    while len(points) < numpoints:
        p = (random.randint(0, L), random.randint(0, L), random.randint(0, L))
        if p not in points:
            points.add(p)
            f.write('H %f %f %f\n' % p) 
```

以下内容不再有效，但引入了递归的概念以生成随机点。以前的版本工作得很好 - 这更有趣:)

```
import random

numpoints = 512
L = 20
points = set()

def RandomPoint(points):
    p = (random.randint(0, L), random.randint(0, L), random.randint(0, L))
    if p in points:
      p = RandomPoint(points)
    return p

# Open f and write
with open("question1.xyz","w") as f:
    f.write("\ncomment goes here\n") #this is for the 2nd line in my xyz f
    for point in xrange(0, numpoints):
        p = RandomPoint(points)
        points.add(p)
        f.write('H %f %f %f\n' % p) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T04:22:04.923

尝试这样的事情：

```
fh = open('filename', 'w')
fh.write(str(len(points)) + '\n')
fh.write("comment goes here\n")
for point in points:
    fh.write("H %1.6f %1.6f %1.6f\n" % (point[0],point[1],point[2]))
fh.flush()
fh.close() 
```

# java - 尝试构建货币转换器，不确定下一步

> ID：12701819
> 
> 赞同：-1
> 
> 时间：2012-10-03T04:16:48.153
> 
> 标签：java

我正在做一个课堂项目，我似乎不知道下一步该做什么。说明如下：

• 它包含一个名为getFxRate 的公共方法，该方法返回一个double，表示作为第一个和第二个String 参数传入的货币代码之间的汇率。第一个字符串是来源或“输入”货币，而第二个是目标或“输出”货币。

我知道我应该使用该空间来找出如何从数组中调用其中一个费率，但我不知道该怎么做。

此类将链接到一个 html 页面，用户将在其中选择两种货币，然后输入金额，因此让该类读取他们选择的选项是另一回事

```
public class fxDataModel {

/* create array for currency codes */
private static final String[] codes = {"CAD", "EUR", "GBP", "USD"};

/* create and populate 2d array for conversion */
private static final double[][] rates = 
{ {1.0, 0.624514066, 0.588714763, 0.810307 },
  {1.601244959, 1.0, 0.942676548, 1.2975},
  {1.698615463, 1.060809248, 1.0, 1.3764},
  {1.234100162, 0.772200772, 0.726532984, 1.0} };

public String[] getFxCurrencies(){
    return codes;
}

public double getFxRate (final int inCode, final int outCode){
int inCurr, outCurr;
    double rate;

    for (inCurr = 0; inCurr < 4; inCurr++){
        String inCurrency = codes[inCurr];
        if (inCode.equals(inCurrency)) {
            break;
        }
    }

    for (outCurr = 0; outCurr < 4; outCurr++){
        String outCurrency = codes[outCurr];
        if (outCode.equals(outCurrency)) {
            break;
        }
    }

    rate = rates[inCurr][outCurr];
    return rate;

}

} 
```

编辑：这是我的教授给我们的提示

getFxRate 的原型是 public double getFxRate(String inCurrency, String outCurrency) 所以给定 inCurrency（例如，"USD"）和 outCurrency（例如，"CAD"），getFxRate 方法在数组 F/X 汇率中查找并返回将美元转换为加元的那个。现在，F/X 比率的数组是 double[][]，即一个二维数组。在我的假设示例中，[3][0] 处的值回答了汇率数组中的哪个汇率转换为美元 -> 加元的问题。这是因为在货币数组 String[] 中，CAD 位于第 0 位，USD 位于第 3 位。因此，给定 inCurrency 和 outCurrency，在货币字符串 [] 数组中找到索引，并使用汇率数组中的这些索引返回单个值。它' s 非常简单的 Java 循环遍历字符串数组以找到匹配的货币及其相关索引。那是 Java 我的东西，我把它留给你，但要思考循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T04:28:14.890

货币汇率成对给出。例如，CADEUR 汇率为您提供购买 1 CAD（加元）需要多少 EUR（欧元）。

让我们考虑一个截断的`rates`表：

```
 CAD   USD
CAD    1   0.81 
USD   1.23    1 
```

因此，如果您的用户选择 CAD 和 CAD 作为两个输入，则返回 1。如果您的用户选择 CAD 和 USD，则返回 0.81。

我认为问题在于获取两个货币代码并在`rates`表格中找到正确的行号和列号并返回适当的汇率。

编辑：我将遍历货币数组并找到给定的两个货币代码的索引。我会使用这两个指数来查找汇率应该是多少。

# php - PHP - Mysql 服务器错误

> ID：12701822
> 
> 赞同：3
> 
> 时间：2012-10-03T04:17:02.867
> 
> 标签：php, mysql

我的 sql 查询有问题。我正在创建一个像 facebook 这样的社交网站并尝试进行聊天。我在下面包含了错误消息。

`You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'to = '2' && `to_viewed` = '0' && `to_deleted` = '0' ORDER BY `created` DESC' at line 1`

这是我的 sql 查询

```
function getmessages($type=0) {
    switch($type) {
        case "0": $sql = "SELECT * FROM messages WHERE to = '".$this->userid."' && `to_viewed` = '0' && `to_deleted` = '0' ORDER BY `created` DESC"; break; // New messages
        case "1": $sql = "SELECT * FROM messages WHERE to = '".$this->userid."' && `to_viewed` = '1' && `to_deleted` = '0' ORDER BY `to_vdate` DESC"; break; // Read messages
        case "2": $sql = "SELECT * FROM messages WHERE from = '".$this->userid."' ORDER BY `created` DESC"; break; // Send messages
        case "3": $sql = "SELECT * FROM messages WHERE to = '".$this->userid."' && `to_deleted` = '1' ORDER BY `to_ddate` DESC"; break; // Deleted messages
        default: $sql = "SELECT * FROM messages WHERE to = '".$this->userid."' && `to_viewed` = '0' ORDER BY `created` DESC"; break; // New messages
    }
    $result = mysql_query($sql) or die (mysql_error());

    if(mysql_num_rows($result)) {
        $i=0;

        $this->messages = array();

        while($row = mysql_fetch_assoc($result)) {
            $this->messages[$i]['id'] = $row['id'];
            $this->messages[$i]['title'] = $row['title'];
            $this->messages[$i]['message'] = $row['message'];
            $this->messages[$i]['fromid'] = $row['from'];
            $this->messages[$i]['toid'] = $row['to'];
            $this->messages[$i]['from'] = $this->getusername($row['from']);
            $this->messages[$i]['to'] = $this->getusername($row['to']);
            $this->messages[$i]['from_viewed'] = $row['from_viewed'];
            $this->messages[$i]['to_viewed'] = $row['to_viewed'];
            $this->messages[$i]['from_deleted'] = $row['from_deleted'];
            $this->messages[$i]['to_deleted'] = $row['to_deleted'];
            $this->messages[$i]['from_vdate'] = date($this->dateformat, strtotime($row['from_vdate']));
            $this->messages[$i]['to_vdate'] = date($this->dateformat, strtotime($row['to_vdate']));
            $this->messages[$i]['from_ddate'] = date($this->dateformat, strtotime($row['from_ddate']));
            $this->messages[$i]['to_ddate'] = date($this->dateformat, strtotime($row['to_ddate']));
            $this->messages[$i]['created'] = date($this->dateformat, strtotime($row['created']));
            $i++;
        }
    } else {

        return false;
    }
} 
```

这是我的数据库架构

 ````
CREATE TABLE `messages` (
`id` INT( 11 ) NOT NULL AUTO_INCREMENT PRIMARY KEY ,
`title` VARCHAR( 255 ) NULL 
`message` TEXT NOT NULL ,
`from` INT( 11 ) NOT NULL ,
`to` INT( 11 ) NOT NULL ,
`from_viewed` BOOL NOT NULL DEFAULT '0',
`to_viewed` BOOL NOT NULL DEFAULT '0',
`from_deleted` BOOL NOT NULL DEFAULT '0',
`to_deleted` BOOL NOT NULL DEFAULT '0',
`from_vdate` DATETIME NULL ,
`to_vdate` DATETIME NULL ,
`from_ddate` DATETIME NULL ,
`to_ddate` DATETIME NULL ,
`created` DATETIME NOT NULL
) ENGINE = MYISAM ; 
````  `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T04:21:17.350

在所有查询中替换 `&&`为`AND`如下所示`SQL`

```
SELECT * FROM messages WHERE to = '".$this->userid."' AND `to_viewed` = '0' AND `to_deleted` = '0' ORDER BY `created` DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T04:18:03.190

在您的查询**中发现的错误**列表：

* * *

*   `&&`应该像`AND`SQL 一样编写。

前任，

```
SELECT * FROM messages WHERE `to` = '' AND ....
                                       ^ this one 
```

* * *

*   `to`并且`from`应该用反引号转义，因为它是**[RESERVED Keyword](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)**。

前任，

```
SELECT * FROM messages WHERE `to` = ...
SELECT * FROM messages WHERE `from` = ...
                             ^ this one 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T04:18:41.040

尝试将“&&”更改为“AND”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T04:51:35.343

SELECT * FROM messages WHERE to = $this->userid AND `to_viewed`= 0 AND `to_deleted`= 0 ORDER BY `created`DESC

而且我认为**您**在查询中提到的可能是保留关键字，因此请尝试一些差异字段而不是那个。`

# facebook-graph-api - 越来越喜欢出现在新闻提要中

> ID：12701823
> 
> 赞同：1
> 
> 时间：2012-10-03T04:17:26.953
> 
> 标签：facebook-graph-api, facebook-like

我写信是想了解这是否可行并进行澄清。

我正在寻找一个拥有许多业务的网站，并且显然包含类似 FB 的按钮，消费者可以点击喜欢的按钮。现在我如何合并它将实际显示在人们的新闻提要中，“约翰确实喜欢 www.mysite.com 上的 xyz 公司”？

我知道它会显示在墙上，但我如何让它显示在提要上以吸引更多用户访问我的网站？

FB可以再这样了吗？

# iphone - 使用 CALayer 绘制虚线

> ID：12701825
> 
> 赞同：23
> 
> 时间：2012-10-03T04:17:41.417
> 
> 标签：iphone, objective-c, ios, ipad

我能够使用以下代码绘制一个虚线框：

```
CAShapeLayer *shapeLayer = [CAShapeLayer layer];
CGRect shapeRect = CGRectMake(0.0f, 0.0f, 200.0f, 100.0f);
[shapeLayer setBounds:shapeRect];
[shapeLayer setPosition:CGPointMake(self.coreImageView_.frameX, self.coreImageView_.frameBottom - self.coreImageView_.frameHeight/2)];
[shapeLayer setFillColor:[[UIColor clearColor] CGColor]];
[shapeLayer setStrokeColor:[[UIColor whiteColor] CGColor]];
[shapeLayer setLineWidth:2.0f];
[shapeLayer setLineJoin:kCALineJoinRound];
[shapeLayer setLineDashPattern:
[NSArray arrayWithObjects:[NSNumber numberWithInt:5],
[NSNumber numberWithInt:5],
  nil]]; 
```

现在如果我只想从 X 点到 B 点画一条虚线，我应该如何修改这段代码？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-10-03T05:06:28.527

通过首先将路径移动到线的起点，然后将线段添加到点来绘制线：

```
CGContextBeginPath(context);
CGContextMoveToPoint(context, 10.5f, 10.5f);
CGContextAddLineToPoint(context, 20.5f, 20.5f);
CGContextClosePath(context);
CGContextDrawPath(context, kCGPathFillStroke); 
```

要绘制虚线，您需要使用 CAShapeLayer

```
CAShapeLayer *shapeLayer = [CAShapeLayer layer];
[shapeLayer setBounds:self.bounds];
[shapeLayer setPosition:self.center];
[shapeLayer setFillColor:[[UIColor clearColor] CGColor]];
[shapeLayer setStrokeColor:[[UIColor blackColor] CGColor]];
[shapeLayer setLineWidth:3.0f];
[shapeLayer setLineJoin:kCALineJoinRound];
[shapeLayer setLineDashPattern:
 [NSArray arrayWithObjects:[NSNumber numberWithInt:10],
  [NSNumber numberWithInt:5],nil]];

// Setup the path
CGMutablePathRef path = CGPathCreateMutable();
CGPathMoveToPoint(path, NULL, 10, 10);
CGPathAddLineToPoint(path, NULL, 100,100);

[shapeLayer setPath:path];
CGPathRelease(path);

[[self layer] addSublayer:shapeLayer]; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-04-14T04:14:50.253

试试这个代码，它对我有用，

**斯威夫特 3.0**

```
extension UIView {
    func addDashedLine(strokeColor: UIColor, lineWidth: CGFloat) {

        backgroundColor = .clear

        let shapeLayer = CAShapeLayer()
        shapeLayer.name = "DashedTopLine"
        shapeLayer.bounds = bounds
        shapeLayer.position = CGPoint(x: frame.width / 2, y: frame.height / 2)
        shapeLayer.fillColor = UIColor.clear.cgColor
        shapeLayer.strokeColor = strokeColor.cgColor
        shapeLayer.lineWidth = lineWidth
        shapeLayer.lineJoin = kCALineJoinRound
        shapeLayer.lineDashPattern = [4, 4]

        let path = CGMutablePath()
        path.move(to: CGPoint.zero)
        path.addLine(to: CGPoint(x: frame.width, y: 0))
        shapeLayer.path = path

        layer.addSublayer(shapeLayer)
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-11-29T00:26:09.397

看：

[https://developer.apple.com/library/mac/documentation/graphicsimaging/Reference/CGContext/Reference/reference.html#//apple_ref/c/func/CGContextSetLineDash](https://developer.apple.com/library/mac/documentation/graphicsimaging/Reference/CGContext/Reference/reference.html#//apple_ref/c/func/CGContextSetLineDash)

```
CGFloat dashLengths[] = { 10, 5 };
CGContextSetLineDash(context, 0, dashLengths, 2); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-07-05T01:52:03.763

**斯威夫特 2.2**

把这个放在这里以节省其他人的时间..

```
extension UIView {
    func addDashedLine(color: UIColor = UIColor.lightGrayColor()) {
        layer.sublayers?.filter({ $0.name == "DashedTopLine" }).map({ $0.removeFromSuperlayer() })
        self.backgroundColor = UIColor.clearColor()
        let cgColor = color.CGColor

        let shapeLayer: CAShapeLayer = CAShapeLayer()
        let frameSize = self.frame.size
        let shapeRect = CGRect(x: 0, y: 0, width: frameSize.width, height: frameSize.height)

        shapeLayer.name = "DashedTopLine"
        shapeLayer.bounds = shapeRect
        shapeLayer.position = CGPoint(x: frameSize.width / 2, y: frameSize.height / 2)
        shapeLayer.fillColor = UIColor.clearColor().CGColor
        shapeLayer.strokeColor = cgColor
        shapeLayer.lineWidth = 1
        shapeLayer.lineJoin = kCALineJoinRound
        shapeLayer.lineDashPattern = [4, 4]

        let path: CGMutablePathRef = CGPathCreateMutable()
        CGPathMoveToPoint(path, nil, 0, 0)
        CGPathAddLineToPoint(path, nil, self.frame.width, 0)
        shapeLayer.path = path

        self.layer.addSublayer(shapeLayer)
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-20T17:21:38.640

迅速，更紧凑：

```
func addDashedLine(fromPoint start: CGPoint, toPoint end:CGPoint) {
    let line = CAShapeLayer()
    let linePath = UIBezierPath()
    linePath.moveToPoint(start)
    linePath.addLineToPoint(end)
    line.path = linePath.CGPath
    line.strokeColor = UIColor.redColor().CGColor
    line.lineWidth = 1
    line.lineJoin = kCALineJoinRound
    line.lineDashPattern = [4, 4]
    self.layer.addSublayer(line)
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-11-24T11:56:12.543

下面是在 UIView (Xamarin iOS) 中绘制虚线的代码片段

注意： **separatorView 是我需要显示为 Dashed 的 UIView**

```
 public void ShowDottedLine()
 {
      var dashedLayer = new CAShapeLayer();
      var frameSize = separatorView.Frame.Size;
      var shapeRect = new CGRect(0, 0, frameSize.Width, frameSize.Height);
      dashedLayer.Bounds = shapeRect;
      dashedLayer.Position = new CGPoint(frameSize.Width / 2, frameSize.Height / 2);
      dashedLayer.FillColor = UIColor.Clear.CGColor;
      dashedLayer.StrokeColor = ColorUtils.ColorWithHex(ColorConstants.DarkBlue).CGColor;
      dashedLayer.LineWidth = 2;
      dashedLayer.LineJoin = CAShapeLayer.JoinRound;
      NSNumber[] patternArray = {5,5};
      dashedLayer.LineDashPattern = Array;
      var path = new CGPath();
      path.MoveToPoint(CGPoint.Empty);
      path.AddLineToPoint(new CGPoint(frameSize.Width, 0));
      dashedLayer.Path = path;
      separatorView.Layer.AddSublayer(dashedLayer);
 } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-03T12:55:19.863

让它在Objective C中工作，简化代码如下

```
 //Dashed line for road
    CAShapeLayer *dashedLine = [CAShapeLayer layer];
    [dashedLine setFrame:CGRectMake(0, 342, 100 , 100)];

    // Setup the path
    CGMutablePathRef thePath = CGPathCreateMutable();
    CGPathMoveToPoint(thePath, NULL, 0, 10);
    CGPathAddLineToPoint(thePath, NULL, screenSize.width,10);
    dashedLine.path = thePath;
    CGPathRelease(thePath);

    [dashedLine setLineDashPattern: [NSArray arrayWithObjects:[NSNumber numberWithFloat:15], nil]];
    dashedLine.lineWidth = 1.0f;
    dashedLine.strokeColor =  [[UIColor redcolor] CGColor]];

    [self.view.layer addSublayer:dashedLine]; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-07-04T09:00:58.210

```
CAShapeLayer *shaplayer = [CAShapeLayer layer];
    shaplayer.frame = CGRectMake(100, 100, 100, 100);
    [self.view.layer addSublayer:shaplayer];
    UIBezierPath *uipath = [UIBezierPath bezierPath];
    [uipath moveToPoint:CGPointMake(50, 200)];
    [uipath addLineToPoint:CGPointMake(250, 200)];
    shaplayer.path = uipath.CGPath;
    shaplayer.strokeColor = [UIColor redColor].CGColor;
    shaplayer.lineDashPattern = @[@4]; 
```

# php - 加载本地infile中@var的上下文是什么

> ID：12701829
> 
> 赞同：0
> 
> 时间：2012-10-03T04:18:05.110
> 
> 标签：php, mysql, sql, variables

**磷酸盐**

```
// $numberOption = the number of fields in TableA.
// $csvHeaders   = a single dimention array with all the names of the fields in a CSV file.
// $tableHeaders   = a single dimention array with all the names of the fields in TableA.

for ($a=0; $a < $numberOption; $a++) {
            if ($a == 0) {
                $toVars .= "@var$a";
                $setCols .= $tableHeaders[$a] . " = @var" . $csvHeaders[$a];
            } else {
                $toVars .= ", @var$a";
                $setCols .= ", " . $tableHeaders[$a] . " = @var" . $csvHeaders[$a];
            }
        }

        $sql    = "LOAD DATA LOCAL INFILE '".addslashes($current_file)."' REPLACE INTO TABLE $current_table FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '" . '"' . "' ESCAPED BY " . "'\\\\'" . " LINES TERMINATED BY '\n' IGNORE 1 LINES ($toVars) SET $setCols"; 
```

**$sql 的返回值**

```
"LOAD DATA LOCAL INFILE '\/var\/www\/html\/test_lms\/include\/files\/1349237011-2fb46cd0c360464ebf471755cc9580de-AUTO_INSURANCE.csv' REPLACE INTO TABLE auto FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '\"' ESCAPED BY '\\\\' LINES TERMINATED BY '\n' IGNORE 1 LINES (@var0, @var1, @var2, @var3, @var4, @var5, @var6, @var7, @var8, @var9, @var10, @var11, @var12, @var13, @var14, @var15, @var16, @var17, @var18, @var19, @var20, @var21, @var22, @var23, @var24, @var25, @var26, @var27, @var28, @var29) SET callcenter = @var, agent = @varEMPTY, generation_date = @varEMPTY, first_name = @varEMPTY, last_name = @varEMPTY, email = @var3, phone = @var4, address = @var5, city = @var6, state = @var7, dob = @varEMPTY, gender = @varEMPTY, marital_status = @varEMPTY, rented = @varEMPTY, year = @varEMPTY, make = @varEMPTY, model = @varEMPTY, trim = @varEMPTY, vin = @varEMPTY, primary_use = @varEMPTY, miles_oneway = @varEMPTY, mileage = @varEMPTY, license_num = @varEMPTY, license_state = @varEMPTY, education = @varEMPTY, job_title = @varEMPTY, vendors = @var9, license_status = @varEMPTY, zip = @var8, dupe = @varEMPTY 
```

好的，在 php 行中清楚地表明`$setCols .= $tableHeaders[$a] . " = @var" . $csvHeaders[$a];`它正在`$setCols`使用字段名称初始化`tableA`，然后是等号，然后是这个东西`@var`（我猜是 mysql 变量？），然后是 csv 字段名称。但结果显示`@var`符号上附加了一个数字，而不是 csv 字段名称！有些`@var`已`EMPTY`附加到它们，这仅意味着`$csvHeaders`数组中没有要使用的字段名称，因此`EMPTY`返回了。

无论如何，它有效。实际上，我能够很好地完美地加载 csv 文件。但我不明白它是如何能够`SET`与`@var#`而不是`@varCSVNAME`。另一个问题是为什么要使用`@var`？不会`IGNORE LINES 1 (table field names) SET (csv header names)`工作得很好吗？为什么是`@var`的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T06:59:31.400

`LOAD DATA INFILE`您的声明中使用的格式是

```
LOAD DATA LOCAL INFILE 'file.txt'
  REPLACE INTO TABLE t1
  ...
  (@var0, @var1, ...)
  SET column0 = @var0,
  SET column1 = @var1,
  ...
  ; 
```

这里`@var0`, `@var1`etc 是 mysql 用户变量，`column0`, `column1`etc 是 mysql 表列。csv 文件中的字段将按照 csv 文件中字段的顺序读入给定的 mysql 用户变量`@var0, @var1, ...`。

我认为没有任何语法允许您将 csv 标头字段名称映射到表列。所以你将无法使用`IGNORE LINES 1 (table field names) SET (csv header names)`.

您的脚本用于`$numberOption`创建许多用户变量，csv 文件中的字段将被读取到这些用户变量中。`$csvHeaders`存储 CSV 字段相对于相应表列的位置。因此`$tableHeaders[6] = 'email';`，`$csvHeaders[6] = 3;`由于`3rd`csv 文件的字段是`email`字段。在`LOAD DAT INFILE`语句中，csv 文件中的第三个字段将被读入用户变量`@var3`，然后`SET email = @var3`将使用此变量设置电子邮件列的值。由于没有读入任何内容`@varEMPTY`，因此使用它们设置的列将不会从文件中获取任何数据。类似地，读入变量`@var29`的数据（如未在任何变量中使用）`set`将被忽略。

`LOAD DATA ... (COL3, COL1, @dummy, COL2, @dummy);`或者，如果 csv 文件中的字段是;，您可以使用`col3, col1, notInTable, col2, notInTable`;。如果表中的列和 csv 文件中的字段在数量和顺序上不同，则可以使用它。

如果表中的列和 csv 文件中的字段在数量和顺序上匹配，那么`LOAD DATA ... INTO TABLE t1;`就足够了。

如果表中的列和 csv 文件中的字段在数量上匹配但顺序不同，则`LOAD DATA ... INTO TABLE t1 (COL3, COL1, COL2);`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T04:51:59.077

该`@`符号仅用于 PHP 中的错误抑制。[PHP中@符号的用途是什么？](https://stackoverflow.com/questions/1032161/what-is-the-use-of-symbol-in-php)

`var`仅在清除类中的变量时使用。

在 PHP 中声明变量时，您不必事先声明变量（尽管如果您习惯于使用其他语言，这是一个很好的做法）。但是，您必须通过使用前缀来表示它是一个变量`$`，例如：`$x = 0;`

通过 mysql使用`DATA LOCAL INFILE`，您可以传递“虚拟”参数以确保它们已设置，即使它们不存在。

使用这条线：`$setCols .= $tableHeaders[$a] . " = @var" . $csvHeaders[$a];`对我来说似乎有点奇怪，因为它`@var`会被认为是一个常量`var`where`@`抑制了常量不存在的错误。

然后连接字符串的其余部分（在您的情况下`$tableHeaders[$a]."= ".$csvHeaders[$a];`）。

# forms - 如何使用 codeigniter 的 form_dropdown 助手

> ID：12701830
> 
> 赞同：-1
> 
> 时间：2012-10-03T04:18:07.560
> 
> 标签：forms, codeigniter, drop-down-menu

我正在为我的表单使用 ci helper form_dropdown 来使用下拉菜单获取所需的输入类型，如文本框、单选按钮等。为此，我在 db 中使用 display_text 和 multiple_values，其中 display_text 存储文本框、单选按钮等，而在多个值中，我根据输入是否采用多个值来存储 0 或 1。例如，对于 textarea multiple_values = 0 和单选按钮 multiple_values = 1.现在问题出在我正在做的控制器编辑期间

```
$data['field_types'] = dropdown_data($field_types, 'display_text' , 'multiple_values'); 
```

当我这样发送时，未选择保存的值，它总是选择下拉菜单的第一个值，但允许选择新值。当我喜欢时从控制器中选择

```
$data['field_types'] = dropdown_data($field_types, 'display_text'); 
```

结果是在编辑期间显示保存的值，但现在不允许更改。我希望既能显示较早选择的值，又能在编辑期间更改值。
我在哪里犯错。提前感谢您的任何帮助/建议和您宝贵的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T05:26:45.053

第一个选项：

在控制器中：

```
$data['field_types']=array( 
                           '1' => 'First DropDownItem',
                           '2' => 'Second DropDownItem',
                           '3' => 'Third DropDownItem'
                           );

$data['field_types']['4']='New DropDownItem';
$data['field_types']['0']='New Default_DropDownItem'; 
```

在视图中：

```
<?=form_dropdown('field_types',$field_types,0); ?> // default value will be 'New Default DropDownItem' 
```

数据库的第二个选项（理性方式）：

在控制器中：

```
$data['field_types_from_model']=$this->my_Model->getFieldTypes(); 
```

在我的模型中：

```
function getFieldTypes() {
  $Q = $this->db->get('table_with_field_types');
  return $Q->result_array();
} 
```

如果您多次使用同一个下拉列表，我建议您使用第二个选项。这样，您需要在数据库表中更改一次下拉列表，这将影响所有用法。

# c# - 如何在 C# 代码中编写此 DOS 命令？

> ID：12701832
> 
> 赞同：2
> 
> 时间：2012-10-03T04:18:11.080
> 
> 标签：c#, batch-file, cmd

我想执行文件夹中的所有 sql 文件。我发现[这个问题](https://stackoverflow.com/questions/2583517/run-all-sql-files-in-a-directory)的答案很有帮助。我可以使用他们的命令，它按预期工作。

我想从 C# 代码运行它。我尝试了几种方法，但我无法得到结果。下面是我尝试过但没有成功的代码。

```
Process process = new Process();
Process process = new Process();
process.StartInfo.UseShellExecute = false;
process.StartInfo.RedirectStandardOutput = true;
process.StartInfo.RedirectStandardError = true;
process.StartInfo.CreateNoWindow = true;
process.StartInfo.FileName = "cmd.exe";
process.StartInfo.Arguments = string.Format("for %f in ({2}/*.sql) do sqlcmd /S {0} /d {1} /U {3} /P {4} /E /i {5}",
sqlServerName, databaseName, folder, sqlUserName, sqlPassword, @"""%f""");
process.StartInfo.WorkingDirectory = @"C:\";
process.Start();
process.WaitForExit(); 
```

我想知道如何将这个 DOS 命令移动`for %f in (*.sql) do sqlcmd /S <servername> /d <dbname> /E /i "%f"`到 C# 代码中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T06:02:48.157

如果您使用的是 C#，则应使用 C# 中可用的工具。Sql Server 有一个 SDK，它包含在 Sql Server 的安装中。

您至少需要添加`Microsoft.SqlServer.Smo.dll`并`Microsoft.SqlServer.ConnectionInfo.dll`使用以下代码。

```
ServerConnection connection = new ServerConnection(sqlServerName, sqlUserName, sqlPassword);
Server server = new Server(connection);
Database database = server.Databases[databaseName];

foreach (var sqlFile in Directory.EnumerateFiles(folder, "*.sql"))
{
    //Parses the file and runs the batches
    database.ExecuteNonQuery(File.ReadAllText(sqlFile));
} 
```

这将读取每个文件，将文件分成批次（`GO`语句），然后运行查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T05:32:24.457

此代码可能会有所帮助...

```
var SqlFile = @"...";
var Command = new SqlCommand
{
  CommandType = CommandType.Text,
  Connection = new SqlConnection()
};
Command.Connection.Open();
foreach (var CommandText in File.ReadAllText(SqlFile).Replace("GO", ";").Split(';'))
{
  Command.CommandText = CommandText;
  Command.ExecuteNonQuery();
}
Command.Connection.Close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T05:05:00.710

如果您想一起运行所有命令，那么简单的方法是创建`batch`文件
并使用它 -

```
Process myProcess = new Process();
myProcess = Process.Start(@"Test.bat"); 
```

但是如果你想运行一些命令，然后是一些 C# 代码，然后是一些命令等等，
那么你将需要多个批处理文件，这将是一种混乱的方式。

# nosql - 带有 MultigetSliceQuery 的 ColumnSliceIterator

> ID：12701835
> 
> 赞同：0
> 
> 时间：2012-10-03T04:18:30.570
> 
> 标签：nosql, cassandra, hector

我正在寻找带有 MultigetSliceQuery 的 ColumnSliceIterator 的示例。我没有找到？有什么建议么？

我发现了很多 SliceQuery 的例子，但我们只能提到一个键。我正在寻找对多个行键的查询。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T11:38:48.797

我得到了结果，但它明智地给了它行键，即第一行键它的列名/值第二行键它的列名/值

这里我最后得到的列名是时间戳值，列值是纯字符串

我想对列名进行排序而不考虑行键...在 cassandra 中是否有任何工具可以这样做...（我正在制作墙的功能）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:55:02.003

有趣的是，您想同时对多个行键进行列切片。我唯一能想到的是，如果你想在 100 行上做一个列切片，你可以使用 astyanax 做一个 100 个异步查询（列切片），然后在未来循环，这样所有列切片都在反正同一时间；）。当您拥有异步 api 时，无需进行一次 api 调用。

当 PlayOrm 使用它的 Scalable-SQL 进行连接并且速度很快时，我们使用类似的东西来获取非连续获取。

后来，迪恩

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T17:03:50.517

没有您需要的迭代器。您必须编写所有繁重的工作。. 像这样的东西（假设所有字符串）：

```
MultigetSliceQuery<String, String, String> query = HFactory.createMultigetSliceQuery(keyspace, StringSerializer.get(), StringSerializer.get(), StringSerializer.get()());
List<String> keys = new ArrayList<String>();
// add my keys
query.setColumnFamily("my cf").setKeys(keys).setRange(startColumn, endColumn, false, count);
// can also use setColumnNames(...) instead of setRange() to get specific columns
Rows<String,String,String> resultRows = query.execute().get();
for (Row<String, String, String> row : resultRows) {
   for (HColumn<String, ByteBuffer> col: row.getColumnSlice().getColumns()) {
      System.out.println("  " + col.getName() + ":" + col.getValue());
   }
} 
```

如果您有非常多的列，它会变得很棘手，因为可能必须迭代每一行来获取所有列。

# ruby-on-rails - 验证后不显示消息效果

> ID：12701839
> 
> 赞同：0
> 
> 时间：2012-10-03T04:18:58.917
> 
> 标签：ruby-on-rails

我是 Rails 的新手……在进行验证和消息传递之后……我仍然看不到效果……它没有反映消息……我的代码是

```
class Users < ActiveRecord::Base
  attr_accessible :account_expired, :account_locked, :enabled, :id, :password, :password_expired, :username, :version

  validates :username,:password, :presence =>{:message => "Must be not blank"}

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T07:36:02.243

如果我理解你是正确的 - 你需要一个[自定义验证器](http://guides.rubyonrails.org/active_record_validations_callbacks.html#performing-custom-validations)，并添加如下错误消息：

```
errors.add(:base,  'Must be not blank') 
```

您看到将用户名添加到字符串的原因是因为 rails 调用

```
errors.add(:attribute, your_message) 
```

在引擎盖下

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T09:25:32.137

您还可以通过自定义验证

例如

```
# in your model

validate:username_blank

def username_blank
 if self.username.blank? || self.username == ""
   errors[:base] << "Username Can't be Blank" # or whatever your message
 end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T07:40:58.750

如果要打印错误，请尝试：

```
model.errors.full_messages.each do |message|
  puts message 
```

# java - 尝试制作科赫雪花，但它不起作用？

> ID：12701840
> 
> 赞同：0
> 
> 时间：2012-10-03T04:19:00.617
> 
> 标签：java

```
import gpdraw.*;
import javax.swing.*;
import java.lang.Math;

public class Koch2 extends JFrame {

SketchPad paper;
DrawingTool pen;

public Koch2() {

    paper = new SketchPad(600, 600);
    pen = new DrawingTool(paper);

}

public void drawKoch(double sL, int level, double length) {

int x = level - 1;
double y = length / 3;

double z = -1.5 * sL;

if (level < 1) {
    pen.up();
    pen.move(z, 0);
    pen.down();
    pen.setDirection(0);
    pen.forward(sL);
}
else {
    pen.up();
    pen.move(z, 0);
    pen.down();
    pen.setDirection(0);
    pen.forward(length / (Math.pow(3, length)));
    pen.setDirection(60);
    pen.forward(length / (Math.pow(3, length)));
    pen.turnRight(120);
    pen.forward(length / (Math.pow(3, length)));
    pen.turnLeft(60);
    pen.forward(length / (Math.pow(3, length)));
    pen.setDirection(60);
    pen.forward(length / (Math.pow(3, length)));
    pen.turnRight(120);
    pen.forward(length / (Math.pow(3, length)));
    pen.turnRight(120);
    pen.forward(length / (Math.pow(3, length)));
    pen.setDirection(60);
    pen.forward(length / (Math.pow(3, length)));
    pen.turnRight(120);
    pen.forward(length / (Math.pow(3, length)));
    pen.turnLeft(60);
    pen.forward(length / (Math.pow(3, length)));
    pen.setDirection(60);
    pen.forward(length / (Math.pow(3, length)));
    pen.turnRight(120);
    pen.forward(length / (Math.pow(3, length)));

    /*pen.setDirection(0);
    pen.forward(length / (Math.pow(3, length)));
    */

    drawKoch((sL), (x) , (y));

}

}

public static void main(String[] args) {

    new Koch2().drawKoch(300, 6, 300);
}
} 
```

这段代码的哪些部分有问题？我试图弄清楚如何生成单个模板曲线，然后重复多次以制作实际曲线。我还不需要制作真正的雪花，可以等到我弄清楚曲线之后。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T05:33:19.703

假设`pen.forward(length / (Math.pow(3, length)));`画一条直线：

科赫曲线的形成是递归的。要绘制 n 级 Koch 曲线，您需要绘制四级 (n-1) 曲线。绘制科赫曲线的伪代码如下：

```
drawKochCurve (length, level):
    if level = 0:
        drawStraightLine(length)
    else:
        drawKochCurve(length / 3, level - 1)
        turnLeft(60)
        drawKochCurve(length / 3, level - 1)
        turnRight(120)
        drawKochCurve(length / 3, level - 1)
        turnLeft(60)
        drawKochCurve(length / 3, level - 1) 
```

在您的代码中，我看到有一个递归调用。您需要绘制较小的科赫曲线，而不是绘制直线。仅在基本情况下绘制直线。

# matlab - MATLAB 中的 xkcd 样式图

> ID：12701841
> 
> 赞同：230
> 
> 时间：2012-10-03T04:19:01.680
> 
> 标签：matlab, plot

![xkcd 样式图](../Images/a2c9d4706ad09b1ba05d9454c8718543.png)

所以有才华的人已经想出了如何[在 Mathematica](https://mathematica.stackexchange.com/questions/11350/xkcd-style-graphs)、[LaTeX](https://tex.stackexchange.com/questions/74878/create-xkcd-style-diagram-in-tex)、[Python](http://nbviewer.ipython.org/3835181/)和[R中制作](https://stackoverflow.com/questions/12675147/xkcd-style-graphs-in-r)[xkcd](http://en.wikipedia.org/wiki/Xkcd)样式的图表。

如何使用 MATLAB 生成与上面类似的图？

### 我试过的

我创建了摆动的线条，但我无法获得摆动的轴。我想到的唯一解决方案是用摆动线覆盖它们，但我希望能够改变实际的轴。我也无法让 Humor 字体工作，使用的代码位是：

```
 annotation('textbox',[left+left/8 top+0.65*top 0.05525 0.065],...
'String',{'EMBARRASSMENT'},...
'FontSize',24,...
'FontName','Humor',...
'FitBoxToText','off',...
'LineStyle','none'); 
```

对于摆动线，我尝试添加一个小的随机噪声和平滑：

```
 smooth(0.05*randn(size(x)),10) 
```

但是当它们相交时，我无法使白色背景出现在它们周围...

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2012-10-03T13:25:19.543

我看到了两种解决方法：第一种方法是在绘图特征的 x/y 坐标上添加一些抖动。这样做的好处是您可以轻松地修改绘图，但如果您想让它们 xkcdyfied，您必须自己绘制轴（请参阅[@Rody Oldenhuis 的解决方案](https://stackoverflow.com/a/12711092/232610)）。第二种方法是创建一个非抖动图，并用于`imtransform`对图像应用随机失真。这样做的好处是您可以将它用于任何绘图，但您最终会得到一个图像，而不是可编辑的绘图。

我将首先展示#2，然后在下面尝试#1（如果您更喜欢#1，请查看[Rody 的解决方案](https://stackoverflow.com/a/12711092/232610)！）。

![在此处输入图像描述](../Images/3dab793f8bc5dd21d504f0b26e69b25b.png)

该解决方案依赖于两个关键功能：文件交换中的[EXPORT_FIG](http://www.mathworks.com/matlabcentral/fileexchange/23629)以获取抗锯齿屏幕截图，以及[IMTRANSFORM](http://www.mathworks.com/help/images/ref/imtransform.html)以获取转换。

```
%# define plot data
x = 1:0.1:10;
y1 = sin(x).*exp(-x/3) + 3;
y2 = 3*exp(-(x-7).^2/2) + 1;

%# plot
fh = figure('color','w');
hold on
plot(x,y1,'b','lineWidth',3);
plot(x,y2,'w','lineWidth',7);
plot(x,y2,'r','lineWidth',3);

xlim([0.95 10])
ylim([0 5])
set(gca,'fontName','Comic Sans MS','fontSize',18,'lineWidth',3,'box','off')

%# add an annotation 
 annotation(fh,'textarrow',[0.4 0.55],[0.8 0.65],...
     'string',sprintf('text%shere',char(10)),'headStyle','none','lineWidth',1.5,...
     'fontName','Comic Sans MS','fontSize',14,'verticalAlignment','middle','horizontalAlignment','left')

%# capture with export_fig
im = export_fig('-nocrop',fh);

%# add a bit of border to avoid black edges
im = padarray(im,[15 15 0],255);

%# make distortion grid
sfc = size(im);
[yy,xx]=ndgrid(1:7:sfc(1),1:7:sfc(2));
pts = [xx(:),yy(:)];
tf = cp2tform(pts+randn(size(pts)),pts,'lwm',12);
w = warning;
warning off images:inv_lwm:cannotEvaluateTransfAtSomeOutputLocations
imt = imtransform(im,tf);
warning(w)

%# remove padding
imt = imt(16:end-15,16:end-15,:);

figure('color','w')
imshow(imt) 
```

* * *

这是我最初的抖动尝试

![在此处输入图像描述](../Images/32f778215045e1de9a21724e7a6a014d.png)

```
%# define plot data
x = 1:0.1:10;
y1 = sin(x).*exp(-x/3) + 3;
y2 = 3*exp(-(x-7).^2/2) + 1;

%# jitter
x = x+randn(size(x))*0.01;
y1 = y1+randn(size(x))*0.01;
y2 = y2+randn(size(x))*0.01;

%# plot
figure('color','w')
hold on
plot(x,y1,'b','lineWidth',3);
plot(x,y2,'w','lineWidth',7);
plot(x,y2,'r','lineWidth',3);

xlim([0.95 10])
ylim([0 5])
set(gca,'fontName','Comic Sans MS','fontSize',18,'lineWidth',3,'box','off') 
```

* * *

## 回答 #2

> 赞同：96
> 
> 时间：2012-10-04T15:43:50.320

我不想重新实现所有各种绘图功能，而是想创建一个通用工具，可以将任何现有绘图转换为 xkcd 样式绘图。

这种方法意味着您可以使用标准[MATLAB](http://en.wikipedia.org/wiki/MATLAB)函数创建绘图并为其设置样式，然后当您完成后，您可以以 xkcd 样式重新渲染绘图，同时保留绘图的整体样式。

## 例子

**阴谋** ![在此处输入图像描述](../Images/248e8e207319930fe9bec542b546f618.png)

**酒吧和情节**

![在此处输入图像描述](../Images/802e683ff99e66d52fa7540f5b649b0e.png)

**箱形图** ![在此处输入图像描述](../Images/601f76371d309dac0ee0fdb76689d390.png)

## 这个怎么运作

该函数通过迭代轴的子级来工作。如果孩子是类型`line`或`patch`稍微扭曲他们。如果孩子是它的类型`hggroup`，则迭代`hggroup`. 我计划支持其他绘图类型，例如`image`，但尚不清楚什么是扭曲图像以具有 xkcd 样式的最佳方法。

最后，为了确保失真看起来均匀（也就是说，短线不会比长线失真更多），我以像素为单位测量线条长度，然后向上采样与其长度成正比。然后，我将噪声添加到每个 Nth 样本中，这会产生或多或少具有相同失真量的线条。

## 编码

我不会粘贴数百行代码，而是链接到[源代码的要点](https://gist.github.com/3834337)。此外，生成上述示例的源代码和代码可在[GitHub 上](https://github.com/slayton/matlab-xkcdify)免费获得。

正如您从示例中看到的那样，它还没有扭曲轴本身，尽管我计划在找到最佳方法后立即实施。

* * *

## 回答 #3

> 赞同：64
> 
> 时间：2012-10-03T20:09:32.207

第一步...找到您喜欢的系统字体（使用该功能[`listfonts`](http://www.mathworks.com/help/matlab/ref/listfonts.html)查看可用的字体）或安装与[xkcd](http://xkcd.com/)的手写样式匹配的字体。我从[这篇博](http://xkcdsucks.blogspot.com/2009/03/xkcdsucks-is-proud-to-present-humor.html)文中提到的用户 ch00f那里找到了一个[“Humor Sans”](http://antiyawn.com/uploads/Humor-Sans.ttf) TrueType 字体，并将在我的后续示例中使用它。

正如我所看到的，您通常需要三个不同的修改图形对象来制作这些类型的图形：一个[轴对象](http://www.mathworks.com/help/matlab/ref/axes.html)、一个[线对象](http://www.mathworks.com/help/matlab/ref/line.html)和一个[文本对象](http://www.mathworks.com/help/matlab/ref/text.html)。您可能还需要一个[注释对象](http://www.mathworks.com/help/matlab/ref/annotation.html)来使事情变得更容易，但我暂时放弃了这一点，因为它可能比上述三个对象更难实现。

我创建了创建三个对象的包装函数，覆盖了某些属性设置以使它们更像 xkcd。一个限制是它们生成的新图形在某些情况下不会更新（例如调整轴大小时文本对象上的边界框），但这可以通过涉及从[句柄继承的更完整的面向对象实现来解决class](http://www.mathworks.com/help/matlab/ref/handle.html)，使用[events 和 listeners](http://www.mathworks.com/help/matlab/matlab_oop/events-and-listeners--concepts.html)等。现在，这是我更简单的实现：

xkcd_axes.m:

```
function hAxes = xkcd_axes(xkcdOptions, varargin)

  hAxes = axes(varargin{:}, 'NextPlot', 'add', 'Visible', 'off', ...
               'XLimMode', 'manual', 'YLimMode', 'manual');

  axesUnits = get(hAxes, 'Units');
  set(hAxes, 'Units', 'pixels');
  axesPos = get(hAxes, 'Position');
  set(hAxes, 'Units', axesUnits);
  xPoints = round(axesPos(3)/10);
  yPoints = round(axesPos(4)/10);
  limits = [xlim(hAxes) ylim(hAxes)];
  ranges = [abs(limits(2) - limits(1)) abs(limits(4) - limits(3))];
  backColor = get(get(hAxes, 'Parent'), 'Color');
  xColor = get(hAxes, 'XColor');
  yColor = get(hAxes, 'YColor');
  line('Parent', hAxes, 'Color', xColor, 'LineWidth', 3, ...
       'Clipping', 'off', ...
       'XData', linspace(limits(1), limits(2), xPoints), ...
       'YData', limits(3) + rand(1, xPoints).*0.005.*ranges(2));
  line('Parent', hAxes, 'Color', yColor, 'LineWidth', 3, ...
       'Clipping', 'off', ...
       'YData', linspace(limits(3), limits(4), yPoints), ...
       'XData', limits(1) + rand(1, yPoints).*0.005.*ranges(1));

  xTicks = get(hAxes, 'XTick');
  if ~isempty(xTicks)
    yOffset = limits(3) - 0.05.*ranges(2);
    tickIndex = true(size(xTicks));
    if ismember('left', xkcdOptions)
      tickIndex(1) = false;
      xkcd_arrow('left', [limits(1) + 0.02.*ranges(1) xTicks(1)], ...
                 yOffset, xColor);
    end
    if ismember('right', xkcdOptions)
      tickIndex(end) = false;
      xkcd_arrow('right', [xTicks(end) limits(2) - 0.02.*ranges(1)], ...
                 yOffset, xColor);
    end
    plot([1; 1]*xTicks(tickIndex), ...
         0.5.*[-yOffset; yOffset]*ones(1, sum(tickIndex)), ...
         'Parent', hAxes, 'Color', xColor, 'LineWidth', 3, ...
         'Clipping', 'off');
    xLabels = cellstr(get(hAxes, 'XTickLabel'));
    for iLabel = 1:numel(xLabels)
      xkcd_text(xTicks(iLabel), yOffset, xLabels{iLabel}, ...
                'HorizontalAlignment', 'center', ...
                'VerticalAlignment', 'middle', ...
                'BackgroundColor', backColor);
    end
  end

  yTicks = get(hAxes, 'YTick');
  if ~isempty(yTicks)
    xOffset = limits(1) - 0.05.*ranges(1);
    tickIndex = true(size(yTicks));
    if ismember('down', xkcdOptions)
      tickIndex(1) = false;
      xkcd_arrow('down', xOffset, ...
                 [limits(3) + 0.02.*ranges(2) yTicks(1)], yColor);
    end
    if ismember('up', xkcdOptions)
      tickIndex(end) = false;
      xkcd_arrow('up', xOffset, ...
                 [yTicks(end) limits(4) - 0.02.*ranges(2)], yColor);
    end
    plot(0.5.*[-xOffset; xOffset]*ones(1, sum(tickIndex)), ...
         [1; 1]*yTicks(tickIndex), ...
         'Parent', hAxes, 'Color', yColor, 'LineWidth', 3, ...
         'Clipping', 'off');
    yLabels = cellstr(get(hAxes, 'YTickLabel'));
    for iLabel = 1:numel(yLabels)
      xkcd_text(xOffset, yTicks(iLabel), yLabels{iLabel}, ...
                'HorizontalAlignment', 'right', ...
                'VerticalAlignment', 'middle', ...
                'BackgroundColor', backColor);
    end
  end

  function xkcd_arrow(arrowType, xArrow, yArrow, arrowColor)
    if ismember(arrowType, {'left', 'right'})
      xLine = linspace(xArrow(1), xArrow(2), 10);
      yLine = yArrow + rand(1, 10).*0.003.*ranges(2);
      arrowScale = 0.05.*ranges(1);
      if strcmp(arrowType, 'left')
        xArrow = xLine(1) + arrowScale.*[0 0.5 1 1 1 0.5];
        yArrow = yLine(1) + arrowScale.*[0 0.125 0.25 0 -0.25 -0.125];
      else
        xArrow = xLine(end) - arrowScale.*[0 0.5 1 1 1 0.5];
        yArrow = yLine(end) + arrowScale.*[0 -0.125 -0.25 0 0.25 0.125];
      end
    else
      xLine = xArrow + rand(1, 10).*0.003.*ranges(1);
      yLine = linspace(yArrow(1), yArrow(2), 10);
      arrowScale = 0.05.*ranges(2);
      if strcmp(arrowType, 'down')
        xArrow = xLine(1) + arrowScale.*[0 0.125 0.25 0 -0.25 -0.125];
        yArrow = yLine(1) + arrowScale.*[0 0.5 1 1 1 0.5];
      else
        xArrow = xLine(end) + arrowScale.*[0 -0.125 -0.25 0 0.25 0.125];
        yArrow = yLine(end) - arrowScale.*[0 0.5 1 1 1 0.5];
      end
    end
    line('Parent', hAxes, 'Color', arrowColor, 'LineWidth', 3, ...
         'Clipping', 'off', 'XData', xLine, 'YData', yLine);
    patch('Parent', hAxes, 'FaceColor', arrowColor, ...
          'EdgeColor', arrowColor, 'LineWidth', 2, 'Clipping', 'off', ...
          'XData', xArrow + [0 rand(1, 5).*0.002.*ranges(1)], ...
          'YData', yArrow + [0 rand(1, 5).*0.002.*ranges(2)]);
  end

end 
```

xkcd_text.m:

```
function hText = xkcd_text(varargin)

  hText = text(varargin{:});
  set(hText, 'FontName', 'Humor Sans', 'FontSize', 13, ...
      'FontWeight', 'normal');

  backColor = get(hText, 'BackgroundColor');
  edgeColor = get(hText, 'EdgeColor');
  if ~strcmp(backColor, 'none') || ~strcmp(edgeColor, 'none')
    hParent = get(hText, 'Parent');
    extent = get(hText, 'Extent');
    nLines = size(get(hText, 'String'), 1);
    extent = extent + [-0.5 -0.5 1 1].*0.25.*extent(4)./nLines;
    yPoints = 5*nLines;
    xPoints = round(yPoints*extent(3)/extent(4));
    noiseScale = 0.05*extent(4)/nLines;
    set(hText, 'BackgroundColor', 'none', 'EdgeColor', 'none');
    xBox = [linspace(extent(1), extent(1) + extent(3), xPoints) ...
            extent(1) + extent(3) + noiseScale.*rand(1, yPoints) ...
            linspace(extent(1) + extent(3), extent(1), xPoints) ...
            extent(1) + noiseScale.*rand(1, yPoints)];
    yBox = [extent(2) + noiseScale.*rand(1, xPoints) ...
            linspace(extent(2), extent(2) + extent(4), yPoints) ...
            extent(2) + extent(4) + noiseScale.*rand(1, xPoints) ...
            linspace(extent(2) + extent(4), extent(2), yPoints)];
    patch('Parent', hParent, 'FaceColor', backColor, ...
          'EdgeColor', edgeColor, 'LineWidth', 2, 'Clipping', 'off', ...
          'XData', xBox, 'YData', yBox);
    hKids = get(hParent, 'Children');
    set(hParent, 'Children', [hText; hKids(hKids ~= hText)]);
  end

end 
```

xkcd_line.m:

```
function hLine = xkcd_line(xData, yData, varargin)

  yData = yData + 0.01.*max(range(xData), range(yData)).*rand(size(yData));
  line(xData, yData, varargin{:}, 'Color', 'w', 'LineWidth', 8);
  hLine = line(xData, yData, varargin{:}, 'LineWidth', 3);

end 
```

这是一个示例脚本，它使用这些来重新创建上述漫画。我通过用鼠标在绘图中标记点来重新创建线条[`ginput`](http://www.mathworks.com/help/matlab/ref/ginput.html)，捕获它们，然后按照我想要的方式绘制它们：

```
xS = [0.0359 0.0709 0.1004 0.1225 0.1501 0.1759 0.2219 0.2477 0.2974 0.3269 0.3582 0.3895 0.4061 0.4337 0.4558 0.4797 0.5074 0.5276 0.5589 0.5810 0.6013 0.6179 0.6271 0.6344 0.6381 0.6418 0.6529 0.6713 0.6842 0.6934 0.7026 0.7118 0.7265 0.7376 0.7560 0.7726 0.7836 0.7965 0.8149 0.8370 0.8573 0.8867 0.9033 0.9346 0.9659 0.9843 0.9936];
yS = [0.2493 0.2520 0.2548 0.2548 0.2602 0.2629 0.2629 0.2657 0.2793 0.2657 0.2575 0.2575 0.2602 0.2629 0.2657 0.2766 0.2793 0.2875 0.3202 0.3856 0.4619 0.5490 0.6771 0.7670 0.7970 0.8270 0.8433 0.8433 0.8243 0.7180 0.6199 0.5272 0.4510 0.4128 0.3392 0.2711 0.2275 0.1757 0.1485 0.1131 0.1022 0.0858 0.0858 0.1022 0.1267 0.1567 0.1594];

xF = [0.0304 0.0488 0.0727 0.0967 0.1335 0.1630 0.2090 0.2348 0.2698 0.3011 0.3269 0.3545 0.3803 0.4153 0.4466 0.4724 0.4945 0.5110 0.5350 0.5516 0.5608 0.5700 0.5755 0.5810 0.5884 0.6013 0.6179 0.6363 0.6492 0.6584 0.6676 0.6731 0.6842 0.6860 0.6934 0.7007 0.7136 0.7265 0.7394 0.7560 0.7726 0.7818 0.8057 0.8444 0.8794 0.9107 0.9475 0.9751 0.9917];
yF = [0.0804 0.0940 0.0967 0.1049 0.1185 0.1458 0.1512 0.1540 0.1649 0.1812 0.1812 0.1703 0.1621 0.1594 0.1703 0.1975 0.2411 0.3065 0.3801 0.4782 0.5708 0.6526 0.7452 0.8106 0.8324 0.8488 0.8433 0.8270 0.7888 0.7343 0.6826 0.5981 0.5300 0.4782 0.3910 0.3420 0.2847 0.2248 0.1621 0.0995 0.0668 0.0395 0.0232 0.0177 0.0204 0.0232 0.0259 0.0204 0.0232];

xE = [0.0267 0.0488 0.0856 0.1409 0.1759 0.2164 0.2514 0.3011 0.3269 0.3637 0.3969 0.4245 0.4503 0.4890 0.5313 0.5608 0.5939 0.6344 0.6694 0.6934 0.7192 0.7394 0.7523 0.7689 0.7891 0.8131 0.8481 0.8757 0.9070 0.9346 0.9604 0.9807 0.9936];
yE = [0.0232 0.0232 0.0232 0.0259 0.0259 0.0259 0.0313 0.0259 0.0259 0.0259 0.0368 0.0395 0.0477 0.0586 0.0777 0.0886 0.1213 0.1730 0.2466 0.2902 0.3638 0.5082 0.6499 0.7916 0.8924 0.9414 0.9550 0.9387 0.9060 0.8760 0.8542 0.8379 0.8188];

hFigure = figure('Position', [300 300 700 450], 'Color', 'w');
hAxes = xkcd_axes({'left', 'right'}, 'XTick', [0.45 0.60 0.7 0.8], ...
                  'XTickLabel', {'YARD', 'STEPS', 'DOOR', 'INSIDE'}, ...
                  'YTick', []);

hSpeed = xkcd_line(xS, yS, 'Parent', hAxes, 'Color', [0.5 0.5 0.5]);
hFear = xkcd_line(xF, yF, 'Parent', hAxes, 'Color', [0 0.5 1]);
hEmb = xkcd_line(xE, yE, 'Parent', hAxes, 'Color', 'r');

hText = xkcd_text(0.27, 0.9, ...
                  {'WALKING BACK TO MY'; 'FRONT DOOR AT NIGHT:'}, ...
                  'Parent', hAxes, 'EdgeColor', 'k', ...
                  'HorizontalAlignment', 'center');

hSpeedNote = xkcd_text(0.36, 0.35, {'FORWARD'; 'SPEED'}, ...
                       'Parent', hAxes, 'Color', 'k', ...
                       'HorizontalAlignment', 'center');
hSpeedLine = xkcd_line([0.4116 0.4282 0.4355 0.4411], ...
                       [0.3392 0.3256 0.3038 0.2820], ...
                       'Parent', hAxes, 'Color', 'k');
hFearNote = xkcd_text(0.15, 0.45, {'FEAR'; 'THAT THERE''S'; ...
                                   'SOMETHING'; 'BEIND ME'}, ...
                      'Parent', hAxes, 'Color', 'k', ...
                      'HorizontalAlignment', 'center');
hFearLine = xkcd_line([0.1906 0.1998 0.2127 0.2127 0.2201 0.2256], ...
                      [0.3501 0.3093 0.2629 0.2221 0.1975 0.1676], ...
                      'Parent', hAxes, 'Color', 'k');
hEmbNote = xkcd_text(0.88, 0.45, {'EMBARRASSMENT'}, ...
                     'Parent', hAxes, 'Color', 'k', ...
                     'HorizontalAlignment', 'center');
hEmbLine = xkcd_line([0.8168 0.8094 0.7983 0.7781 0.7578], ...
                     [0.4864 0.5436 0.5872 0.6063 0.6226], ...
                     'Parent', hAxes, 'Color', 'k'); 
```

并且*（小号）*这是最终的情节！：

![在此处输入图像描述](../Images/cc8efc6eb35c54176382c9dcc87e78d7.png)

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2012-10-03T14:52:14.507

好的，这是我的不那么粗鲁但仍然不完全存在的尝试：

```
%# init
%# ------------------------

noise = @(x,A) A*randn(size(x));
ns    = @(x,A) A*ones(size(x));

h = figure(2); clf, hold on
pos = get(h, 'position');
set(h, 'position', [pos(1:2) 800 450]);

blackline = {
    'k', ...
    'linewidth', 2};
axisline = {
    'k', ...
    'linewidth', 3};

textprops = {
    'fontName','Comic Sans MS',...
    'fontSize', 14,...
    'lineWidth',3};

%# Plot data
%# ------------------------
x  = 1:0.1:10;

y0 = sin(x).*exp(-x/30) + 3;
y1 = sin(x).*exp(-x/3) + 3;
y2 = 3*exp(-(x-7).^6/.05) + 1;

y0 = y0 + noise(x, 0.01);
y1 = y1 + noise(x, 0.01);
y2 = y2 + noise(x, 0.01);

%# plot
plot(x,y0, 'color', [0.7 0.7 0.7], 'lineWidth',3);

plot(x,y1, 'w','lineWidth',7);
plot(x,y1, 'b','lineWidth',3);

plot(x,y2, 'w','lineWidth',7);
plot(x,y2, 'r','lineWidth',3);

%# text
%# ------------------------
ll(1) = text(1.3, 4.2,...
    {'Walking back to my'
    'front door at night:'});

ll(2) = text(5, 0.7, 'yard');
ll(3) = text(6.2, 0.7, 'steps');
ll(4) = text(7, 0.7, 'door');
ll(5) = text(8, 0.7, 'inside');

set(ll, textprops{:});

%# arrows & lines
%# ------------------------

%# box around "walking back..."
xx = 1.2:0.1:3.74;
yy = ns(xx, 4.6) + noise(xx, 0.007);
plot(xx, yy, blackline{:})

xx = 1.2:0.1:3.74;
yy = ns(xx, 3.8) + noise(xx, 0.007);
plot(xx, yy, blackline{:})

yy = 3.8:0.1:4.6;
xx = ns(yy, 1.2) + noise(yy, 0.007);
plot(xx, yy, blackline{:})

xx = ns(yy, 3.74) + noise(yy, 0.007);
plot(xx, yy, blackline{:})

%# left arrow
x_arr = 1.2:0.1:4.8;
y_arr = 0.65 * ones(size(x_arr)) + noise(x_arr, 0.005);
plot(x_arr, y_arr, blackline{:})
x_head = [1.1 1.6 1.62];
y_head = [0.65 0.72 0.57];
patch(x_head, y_head, 'k')

%# right arrow
x_arr = 8.7:0.1:9.8;
y_arr = 0.65 * ones(size(x_arr)) + noise(x_arr, 0.005);
plot(x_arr, y_arr, blackline{:})
x_head = [9.8 9.3 9.3];
y_head = [0.65 0.72 0.57];
patch(x_head, y_head, 'k')

%# left line on axis
y_line = 0.8:0.1:1.1;
x_line = ns(y_line, 6.5) + noise(y_line, 0.005);
plot(x_line, y_line, blackline{:})

%# right line on axis
y_line = 0.8:0.1:1.1;
x_line = ns(y_line, 7.2) + noise(y_line, 0.005);
plot(x_line, y_line, blackline{:})

%# axes
x_xax = x;
y_xax = 0.95 + noise(x_xax, 0.01);
y_yax = 0.95:0.1:5;
x_yax = x(1) + noise(y_yax, 0.01);
plot(x_xax, y_xax, axisline{:})
plot(x_yax, y_yax, axisline{:})

% finalize 
%# ------------------------

xlim([0.95 10])
ylim([0 5])
axis off 
```

结果：

![Matlab中的XKCD仿制](../Images/91431a56d6233b705c85cb1e9f1f9cfb.png)

要做的事情：

1.  找到更好的函数（更好地分段定义它们）
2.  在他们描述的曲线上添加“注释”和波浪线
3.  找到比 Comic Sans 更好的字体！
4.  将所有内容概括为一个函数`plot2xkcd`，以便我们可以将*任何*绘图/图形转换为 xkcd 样式。

# php - 数据在 & 符号处被截断

> ID：12701847
> 
> 赞同：0
> 
> 时间：2012-10-03T04:19:38.573
> 
> 标签：php, xml

我有一个网络服务来进行预订。当数据出现时，如果有任何＆符号（`&`或`&amp;`），则 XML 数据会在那时被切断，之后我将失去任何东西。我什至尝试将 & 符号放在 CDATA 中，但它是一样的。谁能帮我解决这个问题？我正在使用 PHP 5.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:11:48.173

我不知道您使用什么 API 来读取 XML，但是许多 API 以一系列块的形式从解析器向应用程序提供文本数据，并期望您组装这些块。当 API 规范允许解析器选择在实体边界（即 & 符号）处拆分块时，这是很常见的，因为这减少了所需的字符移动量。

发现由不知道这一点的人编写的应用程序并在第一个之后忽略所有块也很常见......

# ember.js - 如何将我的控制器连接到 Ember 中的视图

> ID：12701848
> 
> 赞同：2
> 
> 时间：2012-10-03T04:19:48.403
> 
> 标签：ember.js

我想我很难理解*控制器*加载的数据应该如何绑定并可供*视图*使用。出于这个问题的目的，我在 jsFiddle中制作了一个使用 ember-rest 加载数据[的小示例。](http://jsfiddle.net/arasbm/BMbfk/14/)

正如您在 jsFiddle 中看到的，我想在此示例中实现的是将我的绑定`testData`到`BlockView`使用`blocki`模板呈现的对象。在 Ember 中执行此操作的适当方法是什么？

要了解小提琴正常运行时的外观，请将绑定替换`blocksController`为直接绑定到`testData`. 我在[另一个版本的 jsFiddle](http://jsfiddle.net/arasbm/BMbfk/16/)中做到了这一点。

```
{{view App.BlockView blockiBinding="App.testData" }} 
```

当然，这些块在这个版本中可以正确渲染——但这不是我想要这样做的方式。我想学习如何正确地（按照 Ember 的建议）连接`blockController`到视图并从中获取数据。在实际场景中，数据将从 REST API 获取，这就是我在此示例中使用 ember-rest 的原因。

如果你用你的忍者动作修复[了那个 jsFiddle](http://jsfiddle.net/arasbm/BMbfk/14/)，请花几秒钟解释一下它是如何工作的。我发现很难获得有关这方面的最新信息。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T09:54:51.050

您可以使用 a) 适当的命名方案 b) 连接出口，从而将视图与控制器连接起来

例如，如果你有一个视图 BlockView，你应该有一个控制器 BlockController。然后从视图中您可以直接访问控制器的内容。

```
App.BlockView = Ember.View.extend({
  templateName: 'block'
});

App.BlockController = Ember.ObjectController.extend({
  block: { name: 'block 1', children: [ {name: 'child1' }, {name: 'child2'}] }
});

<script type="text/x-handlebars" data-template-name="block" >
   <div>Block Name: {{block.name}}</div>
   {{#each child in block.children}}
     <div>Child Name: {{child.name}}</div>
   {{/each}}
</script> 
```

在您的代码示例中，我还想念的是路由器。这个负责对所有组件进行适当的“粘合”。看看 Trek 教程中的路由器（顺便说一句，它是最新的，代表了应用程序的编写方式）。

在路由器中，您将定义 connectOutlets 方法，在该方法中加载应呈现到插座中的视图。如果你坚持上面的命名方案，你可以从你的视图直接访问控制器

**更新**

我让您的代码运行并进行了一些修改：

*   您不需要自己启动控制器。App.initialize() 会为你解决这个问题
*   我将资源控制器修改为对象控制器并删除了资源块，但当然这与 ObjectController 没有什么不同。只是为了基本了解使用普通的 ember.js 对象可以让您的生活更轻松。
*   它在 JavaScript 中而不是 Coffee Script 中 - 抱歉 :D

不幸的是，我无法创建一个 jsFiddle（不要问为什么 - 没有线索 :)）。所以我已将数据添加到 GIST - [https://gist.github.com/3832764](https://gist.github.com/3832764)。

**更新 2**

而且我现在还设法创建了一个 JSFiddle [http://jsfiddle.net/qV5wu/2/](http://jsfiddle.net/qV5wu/2/) :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T06:05:46.517

阅读[http://trek.github.com/](http://trek.github.com/)看看是否对您有帮助。从我所看到的小提琴中，您所拥有的示例与教程中提供的示例非常相似。

特别是我要看的区域是connectOutlet。

希望有帮助。

# ios - 蜂窝网络上超出了 Google 地理编码 API 限制，但在 wifi 上没有

> ID：12701857
> 
> 赞同：1
> 
> 时间：2012-10-03T04:21:12.157
> 
> 标签：ios, google-api, geocoding

我正在使用[SVGeocoder](https://github.com/samvermette/SVGeocoder)在 iOS 上访问 Google 的地理编码服务，但我遇到了一个非常奇怪的问题。在模拟器或连接到 wifi 的手机上进行测试时，地理编码工作得很好，但是一旦手机切换到 3G/4G，我开始收到“限制超过”错误。我只通过 3G/4G 发出了几十个请求，远未达到 2500 个请求的限制。这里会发生什么？

提前致谢！

**更新**：我最终通过延迟每个地理编码请求之间的时间解决了这个问题。我知道发送请求太快可能是个问题，但[直到我读到这个](https://developers.google.com/maps/documentation/business/articles/usage_limits)，我才意识到它返回了相同的 QUERY_LIMIT_EXCEEDED 消息。

但是，这仍然没有回答为什么它在 wifi 上工作而不是在 3G/4G 上工作的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T20:55:01.150

它在 Wifi 中有效，因为您随后使用自己的 IP 地址和提供商。在蜂窝网络中，您通过您的提供商运行请求，该提供商通常使用传出代理。因此，当 Google 收到请求时，它会看到所有客户的提供商代理的 IP，而不是您自己的 IP，这与 wifi 情况不同。

至少这是我在遇到类似问题时得出的结论，基于经验和数据包捕获。

*   这意味着从您的提供商运行的蜂窝网络执行的每个请求似乎都来自 Google 的同一个 IP，从而增加了对该给定 IP 的请求数量，至少从 Google 服务器的角度来看是这样。因此，如果您、您的邻居和其他数百万人使用同一提供商向 Google 发送请求，并且该提供商使用相同的传出代理，Google 可能会为这数百万人/请求看到相同的 IP，并会考虑要达到的配额限制。

*   如果您通过 wifi 网络运行请求，您将不会通过蜂窝网络提供商的传出代理，并且将拥有自己的传出 IP，并且在看到“LIMIT EXCEEDED”错误之前能够执行更多请求，因为只有您自己的请求会被计算在内。

*我相信实际上这要复杂一些：您的提供商可能有多个传出代理并使用负载平衡来调度客户对它们的请求，Google 可能有一个数据库知道主要 CN 提供商的代理并相应地调整其配额限制，等等……但你明白了。*

# sql-server - 如何运行删除查询以跳过另一个表的外键引用的记录？

> ID：12701861
> 
> 赞同：3
> 
> 时间：2012-10-03T04:21:21.850
> 
> 标签：sql-server

我有一个通过查询远程 API 进行大量搜索的应用程序。结果被拉入我的数据层（SQL Server），他们坐在那里查看用户是否愿意与他们进一步交互。一旦用户开始使用该项目，它必须留在系统中，但其余结果完全没有用，只是占用空间。

我正在考虑创建一个任务，该任务将运行一个存储过程来删除任何未被另一个表引用的行。有没有办法做到这一点？

另一种措辞是：有没有办法执行删除语句，该语句会跳过由于违反参照完整性而导致错误的行？

编辑：感谢@Kos的新信息...我正在考虑的替代路径是在表中添加一个位列，如果该行最终被使用并且只是让我的任务删除标记为假的行，则将其标记为真。

为清楚起见，这里是对情况的概述。这些语法可能并不完美，但希望你能明白：

```
-- Where all the results get pulled down and held (The table I want to clean up every 2 hours or so)
CREATE TABLE [reservations].[DumpTable](
    [utypeID] [bigint] IDENTITY(1,1) NOT NULL
    -- Other columns
    CONSTRAINT [PK_UnitTypesFound] PRIMARY KEY CLUSTERED 
    (
        [utypeID] ASC
    )WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

-- This is one of many other tables that might reference the dump table
CREATE TABLE [reservations].[OtherTables](
    [memberID]  INT NOT NULL,
    [utypeID]   BIGINT NOT NULL -- Need to Know if the dumptable is referenced here
    CONSTRAINT [PK_MemberUnitTypes] PRIMARY KEY CLUSTERED
    (
        [memberID],
        [utypeID]
    ) WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF,     ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

ALTER TABLE [reservations].[OtherTables]  WITH CHECK ADD  CONSTRAINT [FK_OtherTable_DumpTable] FOREIGN KEY([utypeID])
    REFERENCES [reservations].[DumpTable] ([utypeID])

ALTER TABLE [reservations].[OtherTables] CHECK CONSTRAINT [FK_OtherTable_DumpTable] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-10-06T14:54:33.877

我今天遇到了同样的问题，最终来到了这里。最终我想出了一个不同的方法，更接近劳伦斯寻找 IMO 的方法，但也很可能慢得多，这在我自己的情况下不是问题。

所以基本上我使用游标来一一删除我的行，如果发生约束错误，我将删除语句放在 try/catch 块中以恢复循环：

```
DECLARE @idc as int
DECLARE Contact_Cursor CURSOR FOR
SELECT ID 
FROM ContactInfo;
OPEN Contact_Cursor;
FETCH NEXT FROM Contact_Cursor INTO @idc 
WHILE @@FETCH_STATUS = 0
  BEGIN
    begin try
      delete from ContactInfo where id = @idc;
      FETCH NEXT FROM Contact_Cursor INTO @idc 
    end try
    begin catch
      FETCH NEXT FROM Contact_Cursor INTO @idc 
    end catch
   END;
CLOSE Contact_Cursor;
DEALLOCATE Contact_Cursor;
GO 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T06:23:24.427

您也可以使用此查询，使用联接而不是 where 子句加快查询速度。

```
DELETE FROM DATA_TABLE 
FROM         DATA_TABLE LEFT OUTER JOIN
                      OTHERON DATA_TABLE.OTHER_TABLE_ID= OTHER.ID 
WHERE     (OTHER.ID IS NULL) and DATA_TABLE.SOME_TIMESTAMP < threshold_time 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T23:42:12.197

我最终采用了类似于@Kos 在 OP 评论中推荐的解决方案。这有点自然，因为我意识到如果与用户交互，该表的性质将需要至少一个引用另一个表的外键，因此类似于 BIT 列，我只是运行如下语句：

```
DELETE FROM [table] WHERE ISNULL([colForeignKey], 0) = 0 
```

对于其他访问者，我建议查看@Maryam 的答案，因为我认为大多数登陆此页面的人，这将是最好的解决方案（至少在发帖时已经放弃了）。

感谢你的帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T05:16:03.953

检查此[链接](http://blog.sqlauthority.com/2006/11/01/sql-server-query-to-display-foreign-key-relationships-and-name-of-the-constraint-for-each-table-in-database/)。这将帮助您获取数据库中的所有外键关系。那里给出的脚本规定只过滤您需要的表。
获得列表后，您可以将其转储到临时表中。该表将具有表名和列名，它们之间具有 FK 关系。然后，您将不得不遍历该表的每条记录并使用动态查询（因为表和列名将出现在行中），您将必须在 Dump 表中找到 FK 关系中的记录并转储到另一个临时表中. 最后从您的 Dump 表中删除`NOT EXIST`在此临时表中执行的所有记录。
试一试。希望能帮助到你！！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-03T04:36:33.633

您的问题在细节上有点稀疏，但假设表格看起来像：

```
DATA_TABLE
    OTHER_TABLE_ID    INTEGER
    SOME_TIMESTAMP    DATETIME

OTHER_TABLE
    ID                INTEGER 
```

然后是一个基本的删除，如：

```
DELETE FROM DATA_TABLE dt WHERE dt.SOME_TIMESTAMP < threshold_time
  AND NOT EXISTS (SELECT 1 FROM OTHER TABLE WHERE ID = dt.OTHER_TABLE_ID; 
```

应该做的伎俩。我假设您需要给用户一些时间来决定使用 DATA_TABLE 中的给定行。

更新：如果 OTHER_TABLE 不是一个特定的表，但可能是几个表中的任何一个，那么最好的选择可能是 DATA_TABLE 中的一个标志，表明该行在数据库中的“某处”被引用。我认为这种方法的缺点是，如果引用可以在以后消失，那么维护标志就会变得更加困难。

# android - android 的 multipart/form-data enctype json

> ID：12701862
> 
> 赞同：0
> 
> 时间：2012-10-03T04:21:27.250
> 
> 标签：android, json

我想上传图片及其信息。我想为 android 使用**multipart/form** data json。我也看过这个 Stack Overflow 问题[Android:How to upload .mp3 file and image to http server?](https://stackoverflow.com/questions/5785803/androidhow-to-upload-mp3-file-and-image-to-http-server)

但这对我不起作用。

这是我的代码：

```
 protected void doFileUpload(){
            Intent i = getIntent();
            String path = i.getStringExtra("pathimage");
            HttpURLConnection conn = null;
            DataOutputStream dos = null;
            DataInputStream inStream = null;
            String existingFileName = path;
            String lineEnd = "\r\n";
            String twoHyphens = "--";
            String boundary =  "*****";
            int bytesRead, bytesAvailable, bufferSize;
            byte[] buffer;
            int maxBufferSize = 1*1024*1024;
            String responseFromServer = "";
            String urlString = Constants.url_create_store;
              try
              {
               //------------------ CLIENT REQUEST
              FileInputStream fileInputStream = new FileInputStream(new File(existingFileName) );
               // open a URL connection to the Servlet
               URL url = new URL(urlString);
               // Open a HTTP connection to the URL
               conn = (HttpURLConnection) url.openConnection();
               // Allow Inputs
               conn.setDoInput(true);
               // Allow Outputs
               conn.setDoOutput(true);
               // Don't use a cached copy.
               conn.setUseCaches(false);
               // Use a post method.
               conn.setRequestMethod("POST");
               conn.setRequestProperty("Connection", "Keep-Alive");
               conn.setRequestProperty("Content-Type", "multipart/form-data;boundary="+boundary);
               dos = new DataOutputStream( conn.getOutputStream() );
               dos.writeBytes(twoHyphens + boundary + lineEnd);
               dos.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\"" + existingFileName + "\"" + lineEnd);
               dos.writeBytes(lineEnd);
               // create a buffer of maximum size
               bytesAvailable = fileInputStream.available();
               bufferSize = Math.min(bytesAvailable, maxBufferSize);
               buffer = new byte[bufferSize];
               // read file and write it into form...
               bytesRead = fileInputStream.read(buffer, 0, bufferSize);
               while (bytesRead > 0)
               {
                dos.write(buffer, 0, bufferSize);
                bytesAvailable = fileInputStream.available();
                bufferSize = Math.min(bytesAvailable, maxBufferSize);
                bytesRead = fileInputStream.read(buffer, 0, bufferSize);
               }
               // send multipart form data necesssary after file data...
               dos.writeBytes(lineEnd);
               dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);
               // close streams
               Log.e("Debug","File is written");
               fileInputStream.close();
               dos.flush();
               dos.close();
              }
              catch (MalformedURLException ex)
              {
                   Log.e("Debug", "error: " + ex.getMessage(), ex);
              }
              catch (IOException ioe)
              {
                   Log.e("Debug", "error: " + ioe.getMessage(), ioe);
              }
              //------------------ read the SERVER RESPONSE
              try {
                    inStream = new DataInputStream ( conn.getInputStream() );
                    String str;

                    while (( str = inStream.readLine()) != null)
                    {
                         Log.e("Debug","Server Response "+str);
                    }
                    inStream.close();
              }
              catch (IOException ioex){
                   Log.e("Debug", "error: " + ioex.getMessage(), ioex);
              }
            }

 } 
```

这是我的日志：

```
10-03 11:17:07.782: DEBUG/dalvikvm(119): GC_EXTERNAL_ALLOC freed 706 objects / 34184 bytes in 839ms
10-03 11:17:13.052: INFO/ActivityManager(67): Starting activity: Intent { cmp=shoop3.android.edu/.Activity3 (has extras) }
10-03 11:17:13.732: DEBUG/dalvikvm(468): GC_EXTERNAL_ALLOC freed 1652 objects / 91728 bytes in 187ms
10-03 11:17:15.162: INFO/ActivityManager(67): Displayed activity shoop3.android.edu/.Activity3: 1929 ms (total 1929 ms)
10-03 11:17:20.942: ERROR/Debug(468): File is written
10-03 11:17:24.802: ERROR/Debug(468): Server Response {"status":1}
10-03 11:17:25.272: ERROR/JSON Parser(468): Error parsing data org.json.JSONException: End of input at character 0 of 
10-03 11:17:25.282: DEBUG/Create Response(468): {"status":1}
10-03 11:17:25.312: INFO/ActivityManager(67): Starting activity: Intent { cmp=shoop3.android.edu/.shoop3Activity }
10-03 11:17:26.825: INFO/ActivityManager(67): Displayed activity shoop3.android.edu/.shoop3Activity: 1349 ms (total 1349 ms)
10-03 11:19:24.372: DEBUG/SntpClient(67): request time failed: java.net.SocketException: Address family not supported by protocol 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T04:52:18.950

您可以使用此 SimpleMultipartEntity 类来发送 Multipart 数据：

```
public class SimpleMultipartEntity implements HttpEntity {

private final static char[] MULTIPART_CHARS = "-_1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"
        .toCharArray();

private String boundary = null;
ByteArrayOutputStream out = new ByteArrayOutputStream();
boolean isSetLast = false;
boolean isSetFirst = false;

public SimpleMultipartEntity() {
    final StringBuffer buf = new StringBuffer();
    final Random rand = new Random();
    for (int i = 0; i < 30; i++) {
        buf.append(MULTIPART_CHARS[rand.nextInt(MULTIPART_CHARS.length)]);
    }
    this.boundary = buf.toString();

}

public void writeFirstBoundaryIfNeeds() {
    if (!isSetFirst) {
        try {
            out.write(("--" + boundary + "\r\n").getBytes());
        } catch (final IOException e) {
            e.printStackTrace();
        }
    }
    isSetFirst = true;
}

public void writeLastBoundaryIfNeeds() {
    if (isSetLast) {
        return;
    }
    try {
        out.write(("\r\n--" + boundary + "--\r\n").getBytes());
    } catch (final IOException e) {
        e.printStackTrace();
    }
    isSetLast = true;
}

public void addPart(final String key, final String value) {
    writeFirstBoundaryIfNeeds();
    try {
        out.write(("Content-Disposition: form-data; name=\"" + key + "\"\r\n")
                .getBytes());
        out.write("Content-Type: text/plain; charset=UTF-8\r\n".getBytes());
        out.write("Content-Transfer-Encoding: 8bit\r\n\r\n".getBytes());
        out.write(value.getBytes());
        out.write(("\r\n--" + boundary + "\r\n").getBytes());
    } catch (final IOException e) {
        e.printStackTrace();
    }
}

public void addPart(final String key, final String fileName,
        final InputStream fin) {
    addPart(key, fileName, fin, "application/octet-stream");
}

public void addPart(final String key, final String fileName,
        final InputStream fin, String type) {
    writeFirstBoundaryIfNeeds();
    try {
        type = "Content-Type: " + type + "\r\n";
        out.write(("Content-Disposition: form-data; name=\"" + key
                + "\"; filename=\"" + fileName + "\"\r\n").getBytes());
        out.write(type.getBytes());
        out.write("Content-Transfer-Encoding: binary\r\n\r\n".getBytes());

        final byte[] tmp = new byte[4096];
        int l = 0;
        while ((l = fin.read(tmp)) != -1) {
            out.write(tmp, 0, l);
        }
        out.flush();
    } catch (final IOException e) {
        e.printStackTrace();
    } finally {
        try {
            fin.close();
        } catch (final IOException e) {
            e.printStackTrace();
        }
    }
}

public void addPart(final String key, final File value) {
    try {
        addPart(key, value.getName(), new FileInputStream(value));
    } catch (final FileNotFoundException e) {
        e.printStackTrace();
    }
}

public String getBoundary() {
    return boundary;
}

public void setBoundary(String boundary) {
    this.boundary = boundary;
}

@Override
public long getContentLength() {
    writeLastBoundaryIfNeeds();
    return out.toByteArray().length;
}

@Override
public Header getContentType() {
    return new BasicHeader("Content-Type", "multipart/form-data; boundary="
            + boundary);
}

@Override
public boolean isChunked() {
    return false;
}

@Override
public boolean isRepeatable() {
    return false;
}

@Override
public boolean isStreaming() {
    return false;
}

@Override
public void writeTo(final OutputStream outstream) throws IOException {
    outstream.write(out.toByteArray());
}

@Override
public Header getContentEncoding() {
    return null;
}

@Override
public void consumeContent() throws IOException,
        UnsupportedOperationException {
    if (isStreaming()) {
        throw new UnsupportedOperationException(
                "Streaming entity does not implement #consumeContent()");
    }
}

@Override
public InputStream getContent() throws IOException,
        UnsupportedOperationException {
    return new ByteArrayInputStream(out.toByteArray());
}

} 
```

用法 ：

```
String serviceUri = "service url";
    InputStream fileInputStream = mInputStream; //Your file stream
    String fileName = "your file name";
    String fileKey = "Key name what server is looking for"
    HashMap<String, String> headerparts = mHeaderParts; //Other header parts that you need to send along.

    HttpClient httpClient = new DefaultHttpClient();
    HttpPost httpPost = new HttpPost(serviceUri);
    SimpleMultipartEntity entity = new SimpleMultipartEntity();
    httpPost.setHeader("Accept", "application/json");
    httpPost.setHeader("Content-type", "multipart/form-data; boundary="
            + entity.getBoundary());
    entity.writeFirstBoundaryIfNeeds();

    if (headerparts != null) {
        Object[] keySet = headerparts.keySet().toArray();
        for (int i = 0; i < keySet.length; i++) {
            String key = keySet[i].toString();
            String value = headerparts.get(key);
            entity.addPart(key, value);
        }
    }

    entity.addPart(fileKey, fileName, fileInputStream);
    entity.writeLastBoundaryIfNeeds();
    httpPost.setEntity(entity);

    try {
        mResponse = httpClient.execute(httpPost);
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

# java - 在数组中的特定索引处插入

> ID：12701863
> 
> 赞同：0
> 
> 时间：2012-10-03T04:21:43.050
> 
> 标签：java, arrays, insert, indexing

所以我想在特定索引中插入一个值，这意味着如果我要插入的索引不存在或大于大小，我会抛出异常，否则，我会使用这种方法来确保数组的容量不为空：

```
private void ensureCapacity(int size_wanted)
{
  int max_capacity = storage.length;
  if (size_wanted > max_capacity) 
  {
    max_capacity = max_capacity * GROW_FACTOR +1; 
    storage = Arrays.copyOf(storage, max_capacity); // increases array size + copy contents
  } 
} 
```

然后在这一点上，我想扩展数组并已经制作了我原来的副本，并且已经增加了大小，对吧？

我需要做的就是使用循环并将所有内容向右移动一个，以便为我要插入的索引留出空间，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T04:28:13.563

您可以使用`System.arrayCopy`这样移动数组。但是为什么要重建[ArrayList提供的现有功能](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T04:28:24.177

您不需要使用循环；您可以使用该方法`System.arraycopy`在数组中移动元素。它正确处理重叠范围：

```
System.arraycopy(storage, insertPos, storage, insertPos+1, oldSize - insertPos); 
```

# debugging - SFML 1.6 碰撞问题

> ID：12701864
> 
> 赞同：1
> 
> 时间：2012-10-03T04:21:44.793
> 
> 标签：debugging, collision-detection, sfml

我目前正在使用 C++ 和 SFML 1.6 在业余时间编写游戏。当是时候进行碰撞检测时，我遇到了一个烦人的错误，程序检测到碰撞，就好像对象被移动到左上角的量根据我使用的静止精灵的大小而不同测试这个，通常是它的一半大小。我似乎无法找到我的代码中的错误，但也许你可以。我的代码在下面列出，在此先感谢。

```
#include <SFML/Graphics.hpp>
#include <math.h>

bool collide_rec(sf::Sprite object_1, sf::Sprite object_2);
bool collide_point(sf::Vector2f point, sf::Sprite object);
void collide(sf::Sprite& movable, object& movable_data, sf::Sprite& sationary);

void collide(sf::Sprite& movable, object& movable_data, sf::Sprite& stationary)
{
//Handle Collision NOTE: Results in infinate loop if started on colliding object
for(;collide_rec(movable, stationary);)
{
if((movable_data.move.spd.x<0)||(movable_data.move.left==true||movable_data.direction==LEFT )) movable.Move( 1, 0);
if((movable_data.move.spd.x>0)||(movable_data.move.right==true||movable_data.direction==RIGHT)) movable.Move(-1, 0);
if((movable_data.move.spd.y<0)||(movable_data.move.up   ==true||movable_data.direction==UP   )) movable.Move(0,  1);
if((movable_data.move.spd.y>0)||(movable_data.move.down ==true||movable_data.direction==DOWN )) movable.Move(0, -1);
  }
}

bool collide_point(sf::Vector2f point, sf::Sprite object)
{

}

bool collide_rec(sf::Sprite object_1, sf::Sprite object_2)
{
  bool hit=true;
  sf::Vector2f tl_1, br_1, tl_2, br_2;//Top-Left Coner, Botom Right Corner

  //Assign the corners proporly
  tl_1= object_1.GetPosition();
  tl_2= object_2.GetPosition();

   br_1= (object_1.GetPosition()+object_1.GetSize());
   br_2= (object_2.GetPosition()+object_2.GetSize());

  if((tl_1.x<tl_2.x)&&(br_1.x<tl_2.x) || (tl_1.x<br_2.x)&&(br_1.x<br_2.x)) //if both points are to the left or right on the x demtion
  hit=false;

  if((tl_1.y<tl_2.y)&&(br_1.y<tl_2.y) || (tl_1.y<br_2.y)&&(br_1.y<br_2.y)) //if both points are to the left or right on the y demtion
  hit=false;

  return hit;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T04:37:43.967

不确定您是否仍然需要对此的答案，但我不妨尝试提供帮助。

您可能需要检查几件事： - object_1.getPosition() 和 object_2 的位置是否是对象的左上角。- 如果对象*不是正方形*，则右下角将需要稍微不同的方程来计算。(x, y) 坐标为 (Pos.x + Width, Pos.y + Height)。

一旦你确定了这一点，我在你的命中检测算法中注意到了几件事：

1)

`if((tl_1.x<tl_2.x)&&(br_1.x<tl_2.x) || (tl_1.x<br_2.x)&&(br_1.x<br_2.x))`

这个条件的第二部分：

```
(tl_1.x < br_2.x)&&(br_1.x < br_2.x)) 
```

似乎应该是

```
(tl_1.x > br_2.x)&&(br_1.x > br_2.x)) 
```

2)

同样地：

```
(tl_1.y < tl_2.y)&&(br_1.y < tl_2.y) 
```

似乎应该是

```
(tl_1.y > tl_2.y)&&(br_1.y > tl_2.y) 
```

3)

最后，您的条件对它们有一定的冗余，这是不需要的。

一旦你有了 topLeft1、BottomRight1 和 topLeft2、BottomRight2，你可以像这样简单地检查碰撞：

假设笛卡尔坐标系，原点 (0, 0) 位于左下角。

*   X阶段碰撞：

    if ( topLeft1.x > BottomRight2.x || BottomRight1.x < TopLeft2.x )

// 如果 box1 的左侧 > box2 的右侧 OR // 如果 box1 的右侧 < box2 的左侧 那么 - 盒子*不会*在 X 轴上发生碰撞。

*   Y阶段碰撞：

    if ( topLeft1.y < BottomRight2.y || BottomRight1.y > TopLeft2.y )

// 如果 box1 的顶边 < box2 的底边 OR // 如果 box1 的底边 > box2 的顶边 那么 - 盒子*不会*在 Y 轴上发生碰撞。

这将其从 8 个条件减少到 4 个。希望有所帮助。

# eclipse - 如何使用 Eclipse Juno 在 liferay 6.1.1 中创建自己的主题

> ID：12701865
> 
> 赞同：1
> 
> 时间：2012-10-03T04:21:54.907
> 
> 标签：eclipse, liferay, liferay-ide

我需要为门户创建自己的主题，并且需要使用 Eclipsce Juno 进行开发。我决定定制 liferay 的经典主题，我需要知道其中的步骤和文件需要为此更改。请在这方面提供建议和帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T13:26:23.577

以下是一些可以帮助您成为主题开发人员的步骤：

1.  您可以为 Eclipse Juno 下载最新的[Liferay IDE](http://www.liferay.com/downloads/liferay-projects/liferay-ide)插件。
2.  然后就可以通过[官方文档来创建主题了](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/creating-liferay-them-7)，简洁明了。
3.  自定义经典主题就是从经典主题中获取各种模板 ( `*.vm`) 或 css 文件，并将其包含在`_diffs`自定义主题的文件夹中。这里是[来源](https://github.com/liferay/liferay-portal/tree/6.1.x/portal-web/docroot/html/themes)。

翻阅官方文档，你就会明白（3）点。

简而言之，我将介绍如何创建主题项目：

1.  为您的 Eclipse 安装 Liferay IDE。
2.  重启 Eclipse
3.  在完成本[wiki](http://www.liferay.com/community/wiki/-/wiki/Main/Liferay+IDE+Getting+Started+Tutorial)或[Liferay IDE 上的官方文档中](http://www.liferay.com/documentation/liferay-portal/6.0/development/-/ai/liferay-i-2)给出的步骤之后。
4.  文件 --> 新建 --> Liferay 项目 --> 给出项目名称 --> 选择 Liferay Theme 作为选项
5.  点击完成
6.  等待几秒钟，您的主题项目已准备好所需的文件夹结构。
7.  由于您一定已经知道 Eclipse 有一个可以查看`ant`命令的窗口，因此您可以选择相关的 ant 命令来构建和部署主题或创建要部署在服务器上的 WAR。
8.  官方文档会解释如何使用生成的文件夹。

另外我建议您可以在[此处查看可用的不同示例主题](https://github.com/liferay/liferay-plugins/tree/6.1.x/themes)

享受主题！

# ruby - 无 || 假与假|| 红宝石中的零

> ID：12701869
> 
> 赞同：12
> 
> 时间：2012-10-03T04:22:25.807
> 
> 标签：ruby, null

`nil || false`返回`false`和`false || nil`返回`nil`。有人对此有解释吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-03T04:28:43.997

在 Ruby 中，一切都是一个表达式，一个表达式将返回在其中计算的最后一个值。

对于您的两个示例，表达式的左侧`||`计算结果为假值，因此 Ruby 计算右侧并返回它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T04:38:41.803

正如其他人指出的那样，`||`首先评估左侧的表达式。如果它是“真”（除`false`or之外的任何东西`nil`），它就会返回它。否则，它计算右边的表达式，并返回它（不管它是什么）。

这`||`不仅仅对布尔测试有用。例如，前几天我在为`chronic`gem 编写一些代码时使用了它：

```
@now = options[:now] || Chronic.time_class.now 
```

这意味着：“如果`options`哈希包含一个`:now`值，则将其存储在. 否则，作为默认值`@now`回退”。`Chronic.time_class.now`我相信您可以在自己的程序中想到很多可能的应用程序。

`&&`类似：它首先计算左边的表达式，如果计算结果为`false`or `nil`，则返回它。否则，它计算右边的表达式，并返回它（不管它是什么）。

这意味着*不仅*`&&`对布尔测试有用。您可以使用它将两行代码压缩为一行。例如：

 *```
do_something && do_something_else 
```

（只有当您知道 的返回值`do_something`永远不会是`false`or时才有效`nil`！）

您还可以使用`&&`将“守卫”表达式与“守卫”放在同一行：

```
message && send_message(message) 
```

哪个可以代替：

```
unless message.nil?
  send_message(message)
end 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-03T04:28:53.123

`||`返回最后一个表达式的计算结果。如果它评估 LHS 并找到一个`true`值，则得到 LHS；否则，您将获得 RHS（无论 RHS 可能是什么）。*

# sql - T-SQL PIVOT：一行到列名，另一行到值

> ID：12701872
> 
> 赞同：5
> 
> 时间：2012-10-03T04:22:40.850
> 
> 标签：sql, sql-server-2008, pivot, pivot-table

我正在使用 SQL Server 2008。

我有两张桌子

1.  `User`( `UserID, Name, Link`)
2.  `UserNotes`( `NoteID, UserID, Title, Description`)

这是示例数据结构。

```
INSERT INTO [User]
    ([UserID], [Name], [Link])
VALUES
    (1, 'John', 'L1'),
    (2, 'Steve', 'L234');

INSERT INTO [UserNotes]
    ([NoteID], [UserID], [Title], [Description])
VALUES
    (1, 1, 'AboutJohn', 'This is about john'),
    (2, 1, 'John Work', 'This is where John work'),
    (3, 1, 'John Education', 'This is the uni where John go'),
    (4, 2, 'Steve Note1', 'Des1 about Steve'),
    (5, 2, 'Steve Note2', 'Des2 about Steve'); 
```

这是[SQL 小提琴](http://sqlfiddle.com/#!3/4f77d)

我想`User_view`按如下方式创建视图（），当我执行此命令时，输出应如下所示。

```
SELECT * FROM User_view WHERE UserID IN (1)

UserID    Name   AboutJOhn              JohnWork                  JohnEducation
1         John   This is about john     This is where Johnwork    This is the uni where John go 
```

`Title`子表的列应该成为列名并且`Description`应该成为该列的值，我们不知道我们将拥有多少行。当我们选择两个用户以及使用哪个名称时，我知道这个问题。在这种情况下，我们可以使用（Note1、Note2、Note3 等多个用户），否则使用标题字段作为列名。有可能这样做吗？干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T07:17:34.963

```
CREATE VIEW User_view
AS
SELECT UserID, Name, [AboutJohn], [John Work], [John Education]
FROM 
 (
  SELECT n.UserID, u.Name, n.Title, n.Description
  FROM [User] u JOIN UserNotes n ON u.UserID = n.UserID
  WHERE u.UserID IN (1)
  ) a
PIVOT
 (
  MAX(Description)
  FOR Title IN ([AboutJohn], [John Work], [John Education])
  ) b 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T05:13:39.433

这不是一个视图.. 这是一个将根据需要返回结果的过程

你可以称之为

proc_UserNotes 1
proc_UserNotes 2

ETC

```
CREATE procedure proc_UserNotes (@UserID int)
as
begin

DECLARE @cols AS NVARCHAR(MAX),
        @cols_WITH_MAX AS NVARCHAR(MAX),
        @query  AS NVARCHAR(MAX);

select @cols_WITH_MAX = STUFF((SELECT distinct ',MAX(' 
              + QUOTENAME(Title) +') AS ' + QUOTENAME(Title)
                    from [UserNotes] where UserID =@UserID
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(Title) 
                    from [UserNotes] where UserID =@UserID
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')        

set @query = 'SELECT [UserID], '+ @cols_WITH_MAX +' FROM(
             SELECT [UserID], ' + @cols + ' from 
            (
            SELECT * FROM 
            [UserNotes]   where UserID ='+cast(@UserID as varchar(20)) +'
            )X

            pivot 
            (
                MAX([Description])
                for [Title] in (' + @cols + ')
            ) p )a GROUP BY [UserID]'

print(@query)
execute(@query)

end 
```

# asp.net - 在 ASP.NET 中调用异步方法时的行为令人困惑

> ID：12701879
> 
> 赞同：2
> 
> 时间：2012-10-03T04:24:08.900
> 
> 标签：asp.net, task-parallel-library, async-await

我使用 Visual Studio 2012 创建了一个 ASP WebApplication。

如果我修改默认页面如下：

```
public partial class _Default : Page
{
    static async Task PerformSleepingTask()
    {
        Action action = () =>
        {
            Thread.Sleep(TimeSpan.FromSeconds(0.5));
            int dummy = 3; // Just a nice place to put a break point
        };
        await Task.Run(action);
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        Task performSleepingTask = PerformSleepingTask();
        performSleepingTask.Wait();
    }
} 
```

在调用`performSleepingTask.Wait()`它时会无限期地挂起。

* * *

有趣的是，如果我在 web.config 中设置：

```
<appSettings>

    <add key="aspnet:UseTaskFriendlySynchronizationContext" value="false" />
</appSettings> 
```

然后它确实有效。该`Wait`函数等待睡眠在另一个线程上完成，然后继续。

* * *

有人可以解释一下：

*   为什么会挂？
*   为什么他们有一个东西叫`TaskFriendlySynchronizationContext`？（鉴于它会导致任务挂起，我不会称其为“友好”）

* * *

*   `async`从页面处理程序方法调用方法是否有“最佳实践” ？

这是我想出的一个可行的实现，但感觉就像是笨拙的代码：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        ManualResetEvent mre = new ManualResetEvent(false);
        Action act = () =>
        {
            Task performSleepingTask = PerformSleepingTask();
            performSleepingTask.Wait();
            mre.Set();
        };
        act.BeginInvoke(null, null);
        mre.WaitOne(TimeSpan.FromSeconds(1.0));
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T10:52:18.190

> 为什么会挂？

`Task`表示在其`PerformSleepingTask`之后试图恢复`await`以便`PerformSleepingTask`可以返回。它正在尝试重新进入 ASP.NET 请求上下文，该上下文被对`Wait`. [正如我在博客中所阐述的那样，这会导致僵局](http://nitoprograms.blogspot.com/2012/07/dont-block-on-async-code.html)。

为避免死锁，请遵循以下最佳做法：

1.  一直使用`async`下去。不要阻塞`async`代码。
2.  `ConfigureAwait(false)`在您的“库”方法中使用。

> 为什么他们有一个东西叫`TaskFriendlySynchronizationContext`？（鉴于它会导致任务挂起，我不会称其为“友好”）

`TaskFriendlySynchronizationContext`使用新`AspNetSynchronizationContext`的（.NET 4.0`TaskFriendlySynchronizationContext`已重命名`LegacyTaskFriendlySynchronizationContext`），它还使用新的 -`async`感知管道。

我不是 100% 确定这个，但我*怀疑*旧版 SyncCtx的原因`Page_Load`是旧管道还没有放置 SyncCtx。不过，我不确定它为什么会这样（除非`Page.Async`是`false`）。

> 从页面处理程序方法调用异步方法是否有“最佳实践”？

[绝对](http://www.asp.net/web-forms/tutorials/aspnet-45/using-asynchronous-methods-in-aspnet-45)的。您可以只制作事件处理程序`async void`，也可以使用`RegisterAsyncTask(new PageAsyncTask(...));`. 第一种方法更容易，但第二种方法受到 ASP.NET 团队的青睐。

# python - 导入python模块

> ID：12701883
> 
> 赞同：0
> 
> 时间：2012-10-03T04:24:25.240
> 
> 标签：python

我尝试使用简单安装来安装模块。它似乎已经安装，但我无法导入它。

```
# easy_install uuid
Searching for uuid
Reading http://pypi.python.org/simple/uuid/
Reading http://zesty.ca/python/
Best match: uuid 1.30
Downloading http://pypi.python.org/packages/source/u/uuid/uuid-1.30.tar.gz#md5=639b310f1fe6800e4bf8aa1dd9333117
Processing uuid-1.30.tar.gz
Running uuid-1.30/setup.py -q bdist_egg --dist-dir /tmp/easy_install-mQlxdg/uuid-1.30/egg-dist-tmp-gLpk9N
zip_safe flag not set; analyzing archive contents...
Adding uuid 1.30 to easy-install.pth file

Installed /usr/lib/python2.6/site-packages/uuid-1.30-py2.6.egg
Processing dependencies for uuid
Finished processing dependencies for uuid

# python
>>> import uuid
Traceback (most recent call last):
  File "<stdin>", line 1, in ?
ImportError: No module named uuid

# python -V
Python 2.4.3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T04:27:06.133

`easy_install`清楚地表明该模块已安装到，`/usr/lib/python2.6`但您正在运行 Python 2.4。

显式运行 Python 2.6（例如`python2.6`或`python26`），或用于`python -m easy_install uuid`将模块安装到默认 Python。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T04:27:09.007

你看过你发布的内容吗:)？

```
Installed /usr/lib/python2.6/site-packages/uuid-1.30-py2.6.egg

# python -V
Python 2.4.3 
```

如果您使用的是 Python 2.6（您应该使用 Python 2.6，因为即使它现在已经过时，2.4 也很古老），该`uuid`模块应该已经存在，因此您无论如何都不需要安装它。

# c# - 如何处理相同用户使用不同机器或不同浏览器登录应用程序

> ID：12701884
> 
> 赞同：0
> 
> 时间：2012-10-03T04:24:39.627
> 
> 标签：c#, asp.net

如何处理使用不同机器或不同浏览器登录应用程序的相同用户。这是我打算做的一种解决方案：-当用户登录时，我将在数据库中保存会话 ID，并且用户注销清除该字段。

如果用户已经登录并且他/她尝试从不同的机器再次登录，那么他/她将被重定向到多用户登录页面。在此页面中他/她可以取消或强制清除会话 ID 并重定向到登录页面。

这里的一个问题是，如果用户单击浏览器关闭按钮，则会话 ID 将不会清除，当他们尝试再次登录时，用户将被重定向到多用户登录页面。

这是一个好的解决方案还是我必须遵循的任何其他方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T04:51:33.117

这里有几点建议：

1.  让您的应用程序发送频繁的 ping 消息（每 15 秒或类似的时间），如果服务器在给定的超时期限内未收到消息，则该会话到期。

2.  在 javascript 中处理窗口 onunload 或 onbeforeunload 事件。

3.  有一个更激进的超时 cookie

# jquery-isotope - 同位素：imagesLoaded 不工作

> ID：12701889
> 
> 赞同：3
> 
> 时间：2012-10-03T04:25:42.597
> 
> 标签：jquery-isotope

我在我正在开发的网站上使用 Isotope JS。我正在使用 StraightAcross 布局选项。问题是所有图像都开始加载，然后 Isotope 开始创建布局。我正在关注文档，并且我已经实现了这两种方法：

[http://isotope.metafizzy.co/docs/help.html#imagesloaded_plugin](http://isotope.metafizzy.co/docs/help.html#imagesloaded_plugin)

我的代码：

```
 var $container = $('#container');
    $container.imagesLoaded(function(){
        $('#container').isotope({ 
        layoutMode : 'straightAcross'
        });
    }); 
```

我也试过：

```
$(window).load(function() {
            $('#container').isotope({ 
            layoutMode : 'straightAcross'
    }); 
```

和

```
$(window).load(function() {
     var $container = $('#container');
        $container.imagesLoaded(function(){
            $('#container').isotope({ 
            layoutMode : 'straightAcross'
            });
        });
    }); 
```

由于我使用的是直接交叉布局，因此跳转非常不和谐。任何帮助，将不胜感激。

编辑添加了开发链接：

```
http://66.214.147.58/tracey_dev/ 
```

编辑 2

我已经制作了这个问题的视频。

[http://vimeo.com/50708647](http://vimeo.com/50708647)

一开始，比容器大的图像开始加载堆叠在一起。一旦它们加载，Isotope 就会启动并创建布局，将图像调整到容器的大小并将它们水平排列。

由于该站点将可调整大小，因此图像以更大的格式保存以保持质量。我更新了图像以从服务器加载大图像。

我希望在同位素脚本启动之前不显示图像。

编辑 3

好的，我想我了解 imagesLoaded 的作用。它不会预加载图像并在完成之前隐藏它们，然后触发 Isotope，这就是我对它的印象。我为解决我的问题所做的是在准备好的文档上添加 hide()，然后在 window.load 上添加 show()。这并没有解决我的文件大小和加载问题（随着我的进展，我会解决这个问题），但它解决了我的跳转问题。再次感谢您的输入。这是我的有效代码。

```
<!-- Hides the container for loading -->
<script>
    $(document).ready(function() {
            $('#container').hide();
});
</script>

<!-- Isotope Script -->
<script>

$(window).load(function() {
    // set panels equal to window size
    setSectionSize();

    $(window).resize(function(){
        setSectionSize();
    });

     // function to set panels to window size
    function setSectionSize(){
        var windowHeight = $(window).height()-170;

        //resize section containing image
        $('#container').css({'height':windowHeight+'px'});         
        };

        /* Load Isotope */
        var $container = $('#container');

        $container.imagesLoaded(function(){
        $container.show();
        $container.isotope({ 
        layoutMode : 'straightAcross'

        });
         });
                 });
</script> 
```

谢谢你。

# html - ImageData 对象检索指定颜色的 x,y 位置

> ID：12701891
> 
> 赞同：2
> 
> 时间：2012-10-03T04:26:00.013
> 
> 标签：html, canvas

是否可以使用 ImageData 对象来检索 html5 画布上“黑色”的 x、y 像素位置？我对画布还很陌生，很难弄清楚这是否可行或如何实现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T06:28:35.757

确实你可以做到。

您将不得不`getImageData`使用画布上下文并在代表 RGBA 通道的 4 块中循环遍历它，然后分别比较每个通道。

多个像素的 ImageData 有点棘手。成像`var imgData = ctx.getImageData(0, 0, width, height);`：

现在`imgData.data`是一个大数组，格式如下：

```
imgData.data[0] // is the Red channel of the first pixel
imgData.data[1] // is the Green channel of the first pixel
imgData.data[2] // is the Blue channel of the first pixel
imgData.data[3] // is the Alpha (transparency) channel of the first pixel

imgData.data[4] // is the Red channel of the second pixel
... etc ... 
```

检查你问的演示[http://jsfiddle.net/GXrd5/](http://jsfiddle.net/GXrd5/)

# java - 我有一个 jsp 文件 Trainer.jsp，其中有一个代码 $ <f:loadbundle basename="kk.saken.jsf.starter.messages" var="msg">问题是“在类路径上找不到资源包 jsf.starter.messages” 当我运行 Trainer.jsp 问问题 问问题 2012-10-03T04:26:19.950 2377 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我有一个 jsp 文件 Trainer.jsp，其中有一个代码 $ <f:loadbundle basename="kk.saken.jsf.starter.messages" var="msg">问题是“在类路径上找不到资源包 jsf.starter.messages” 当我运行 Trainer.jsp 时，它显示： 类型异常报告 信息 描述 服务器遇到一个内部错误 () 阻止它完成这个请求。 例外 org.apache.jasper.JasperException: java.util.MissingResourceException: Can't find bundle for base name kk.saken.jsf.starter.messages, locale en_US org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:413) org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:326) org.apache.jasper.servlet.JspServlet.service(JspServlet.java:253) javax.servlet.http.HttpServlet.service(HttpServlet.java:847) com.sun.faces.context.ExternalContextImpl.dispatch(ExternalContextImpl.java:546) com.sun.faces.application.view.JspViewHandlingStrategy.executePageToBuildView(JspViewHandlingStrategy.java:364) com.sun.faces.application.view.JspViewHandlingStrategy.buildView(JspViewHandlingStrategy.java:154) com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:100) com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139) javax.faces.webapp.FacesServlet.service(FacesServlet.java:594) root cause java.util.MissingResourceException: Can't find bundle for base name kk.saken.jsf.starter.messages, locale en_US java.util.ResourceBundle.throwMissingResourceException(ResourceBundle.java:1499) java.util.ResourceBundle.getBundleImpl(ResourceBundle.java:1322) java.util.ResourceBundle.getBundle(ResourceBundle.java:1028) com.sun.faces.taglib.jsf_core.LoadBundleTag.doStartTag(LoadBundleTag.java:164) org.apache.jsp.Trainer_jsp._jspx_meth_f_005floadBundle_005f0(Trainer_jsp.java:179) org.apache.jsp.Trainer_jsp._jspx_meth_f_005fview_005f0(Trainer_jsp.java:135) org.apache.jsp.Trainer_jsp._jspService(Trainer_jsp.java:98) org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70) javax.servlet.http.HttpServlet.service(HttpServlet.java:847) org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:369) org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:326) org.apache.jasper.servlet.JspServlet.service(JspServlet.java:253) javax.servlet.http.HttpServlet.service(HttpServlet.java:847) com.sun.faces.context.ExternalContextImpl.dispatch(ExternalContextImpl.java:546) com.sun.faces.application.view.JspViewHandlingStrategy.executePageToBuildView(JspViewHandlingStrategy.java:364) com.sun.faces.application.view.JspViewHandlingStrategy.buildView(JspViewHandlingStrategy.java:154) com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:100) com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139) javax.faces.webapp.FacesServlet.service(FacesServlet.java:594) note 根本原因的完整堆栈跟踪可在 JBoss Web/7.0.13.Final 日志中找到。 您需要在 Take 之前进行选择。它应该工作。 var data = Repository <educationdegree>.FindBySpecification(new EducationDegreeSpecification().Search(search)) .Select(p => new NameValue(p.Title, (int)p.Id)) .Take(10) .ToList(); // .AsDropdown(" "); return Json(data, JsonRequestBehavior.AllowGet); javajspjakarta-eejsp-tags 4 1 回答 1 This answer is useful 0 重命名并kk.saken.jsf.starter.messages尝试kk.saken.jsf.starter.messages_en_US访问该页面。 于 2012-10-03T04:44:32.703 回答 Related 1 c++ - 如何使用 C++ 在 Windows 和 Linux 中获取 iSCSI Initiator 名称 2 yii - 根据 CGridView 中的列值更改行颜色 1 domain-driven-design - 域对象和服务在 DDD 中如何交互？ 1 warnings - openjpa 现有列不兼容 0 c# - Metro 应用 Frame.Back() 使应用崩溃 1 javascript - 如何使用javascript控制标签当前效果 5 objective-c - 在 Objective C 中，是否可以使用类外部的选择器？ 3 android - 是否可以在android中为下载的图像生成资源ID 1 sharepoint - 将沙盒解决方案 Webpart 添加到 Sharepoint 2010 中的页面时出错 1 javascript - 如何在不同的屏幕分辨率上居中 swf 文件？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</educationdegree></f:loadbundle></f:loadbundle>

> ID：12701894
> 
> 赞同：0
> 
> 时间：
> 
> 标签：java, jsp, jakarta-ee, jsp-tags

我有一个 jsp 文件 Trainer.jsp，其中有一个代码

```
$<f:loadBundle basename="kk.saken.jsf.starter.messages" var="msg" /> 
```

问题是“在类路径上找不到资源包 jsf.starter.messages”

当我运行 Trainer.jsp 时，它显示：

类型异常报告

信息

描述 服务器遇到一个内部错误 () 阻止它完成这个请求。

例外

```
org.apache.jasper.JasperException: java.util.MissingResourceException: Can't find bundle for base name kk.saken.jsf.starter.messages, locale en_US
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:413)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:326)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:253)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    com.sun.faces.context.ExternalContextImpl.dispatch(ExternalContextImpl.java:546)
    com.sun.faces.application.view.JspViewHandlingStrategy.executePageToBuildView(JspViewHandlingStrategy.java:364)
    com.sun.faces.application.view.JspViewHandlingStrategy.buildView(JspViewHandlingStrategy.java:154)
    com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:100)
    com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)

root cause 

java.util.MissingResourceException: Can't find bundle for base name kk.saken.jsf.starter.messages, locale en_US
    java.util.ResourceBundle.throwMissingResourceException(ResourceBundle.java:1499)
    java.util.ResourceBundle.getBundleImpl(ResourceBundle.java:1322)
    java.util.ResourceBundle.getBundle(ResourceBundle.java:1028)
    com.sun.faces.taglib.jsf_core.LoadBundleTag.doStartTag(LoadBundleTag.java:164)
    org.apache.jsp.Trainer_jsp._jspx_meth_f_005floadBundle_005f0(Trainer_jsp.java:179)
    org.apache.jsp.Trainer_jsp._jspx_meth_f_005fview_005f0(Trainer_jsp.java:135)
    org.apache.jsp.Trainer_jsp._jspService(Trainer_jsp.java:98)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:369)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:326)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:253)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    com.sun.faces.context.ExternalContextImpl.dispatch(ExternalContextImpl.java:546)
    com.sun.faces.application.view.JspViewHandlingStrategy.executePageToBuildView(JspViewHandlingStrategy.java:364)
    com.sun.faces.application.view.JspViewHandlingStrategy.buildView(JspViewHandlingStrategy.java:154)
    com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:100)
    com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:594) 
```

note 根本原因的完整堆栈跟踪可在 JBoss Web/7.0.13.Final 日志中找到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T04:44:32.703

重命名并`kk.saken.jsf.starter.messages`尝试`kk.saken.jsf.starter.messages_en_US`访问该页面。

# xml - SSIS XML 数据源的问题 - SQL Server 2008 R2

> ID：12701904
> 
> 赞同：1
> 
> 时间：2012-10-03T04:27:17.423
> 
> 标签：xml, ssis, sql-server-2008-r2

我在使用 XML 数据源时遇到了一些问题。基本上我想点击 xml 文档，然后拉回文档中的两个值（状态和描述）并将它们记录到表中。当我尝试查看文档中的可用列时，我在 XML 源代码编辑器 SSIS 屏幕中看不到任何可用列，单击列选项卡时没有收到任何错误，只是似乎没有可用列。我猜测 xml 数据不够复杂，无法通过阅读以下站点来使用它：

[http://resquel.com/ssb/CommentView,guid,4fac4c46-b1e1-48a5-9434-4fa5e3eac48f.aspx](http://resquel.com/ssb/CommentView,guid,4fac4c46-b1e1-48a5-9434-4fa5e3eac48f.aspx) [http://blogs.msdn.com/b/mattm/archive/2007/12/11/using-xml -source.aspx](http://blogs.msdn.com/b/mattm/archive/2007/12/11/using-xml-source.aspx)

但是，我找不到任何文件可以明确地告诉我一种或另一种方式。任何帮助是极大的赞赏！

XML文档在这里：

```
<?xml version='1.0' encoding='ISO-8859-1'?>
<Response>
    <Status>Error</Status>
    <Description>Transaction Already Approved</Description>
</Response> 
```

我在这里使用的 XSD 格式：

```
<?xml version="1.0"?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="Response">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="Status" type="xs:string" />
        <xs:element minOccurs="0" name="Description" type="xs:string" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T23:05:54.570

修改生成的 XSD 添加`maxOccurs="unbounded`属性如下：

```
<?xml version="1.0"?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="Response">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" maxOccurs="unbounded" name="Status" type="xs:string" />
        <xs:element minOccurs="0" maxOccurs="unbounded" name="Description" type="xs:string" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

接受对话框，然后您将在向导的列视图的组合列表中获得两个字段。

我希望它有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T22:16:58.397

您的 XML 文档看起来很简单...您是否尝试使用“XML 源”的“生成 XSD”按钮来生成可由 SSIS 管理的简单 XSD？

# asp.net - 如何使用gmail从asp发送电子邮件？

> ID：12701916
> 
> 赞同：-1
> 
> 时间：2012-10-03T04:29:05.690
> 
> 标签：asp.net, email, c#-4.0, gmail

> **可能重复：**
> [通过 Gmail 在 .NET 中发送电子邮件](https://stackoverflow.com/questions/32260/sending-email-in-net-through-gmail)
> [如何使用 Gmail 从 Java 应用程序发送电子邮件？](https://stackoverflow.com/questions/46663/how-do-you-send-email-from-a-java-app-using-gmail)

在这里，我试图从我的 asp 应用程序发送电子邮件警报。大多数人都说使用 SQL Server 的邮件功能发送电子邮件非常容易。但不幸的是，我目前正在运行 SQL Server 2008 Express 版本并且它没有邮件功能。请任何人帮助我使用 g-mail 发送电子邮件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T04:33:14.460

这可能会帮助您开始：

```
MailMessage myMessage = new MailMessage();
myMessage.Subject = "Subject";
myMessage.Body = mailBody;

myMessage.From = new MailAddress("FromEmailId", "Name");
myMessage.To.Add(new MailAddress("ToEmailId", "Name"));

SmtpClient mySmtpClient = new SmtpClient();
mySmtpClient.Send(myMessage); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T04:42:23.240

您可以安装 SMTP 服务器并运行它

```
[ASP]
<%
Set oSmtp = Server.CreateObject("AOSMTP.Mail")
oSmtp.ServerAddr = "127.0.0.1"
oSmtp.FromAddr = "from@yourdomain.com"
oSmtp.AddRecipient "name", "to@domain2.com", 0

oSmtp.Subject = "your subject"
oSmtp.BodyText = "your email body"

If oSmtp.SendMail() = 0 Then
  Response.Write "OK"
Else
  Response.Write oSmtp.GetLastErrDescription()
End If
%> 
```

以上是针对 ASP *你说的是 ASP。如果您使用的是 asp.net，请使用 Rajpurohit 的示例代码，但您需要安装 smtp 服务器，或者可以访问允许远程连接的服务器（通过中继或名称/密码验证）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T04:57:14.423

电子邮件发送代码：--

```
SmtpClient client = new SmtpClient();
client.UseDefaultCredentials = false;
// When You use a Gmail Hosting then u You write Host name is smtp.gmail.com.
client.Host = "smtp.gmail.com";
client.Port = 587;
client.EnableSsl = true;
client.Credentials = new System.Net. NetworkCredential("YourHost@UserName","Password");
MailMessage msg = new MailMessage();
            msg.From = new MailAddress("fromAddress");
            msg.To.Add("ToAddress");
            msg.Subject = "Subject";
            msg.IsBodyHtml = true;
            msg.Priority = MailPriority.Normal;
            msg.BodyEncoding = System.Text.Encoding.UTF8;
            msg.body="body";
client.Send(message); 
```

我想这会对你有所帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T06:51:58.180

试试这个

```
 using System.Net.Mail;
            using System.Net;
            var fromAddress = new MailAddress("from@gmail.com", "From Name");
            var toAddress = new MailAddress("to@gmail.com", "To Name");
            const string fromPassword = "password";
            const string subject = "test";
            const string body = "Hey now!!";

            var smtp = new SmtpClient
            {
                Host = "smtp.gmail.com",
                Port = 587,
                EnableSsl = true,
                DeliveryMethod = SmtpDeliveryMethod.Network,
                Credentials = new NetworkCredential(fromAddress.Address, fromPassword),
                Timeout = 20000
            };
            using (var message = new MailMessage(fromAddress, toAddress)
            {
                Subject = subject,
                Body = body
            })
            {
                smtp.Send(message);
            } 
```

# java - 使用jsp页面启动和停止windows服务

> ID：12701919
> 
> 赞同：2
> 
> 时间：2012-10-03T04:29:46.407
> 
> 标签：java, jsp, windows-services

我现在有 Windows 服务我想使用 jsp 页面停止和启动窗口服务意味着，在我的 jsp 页面中有一个按钮启动和停止，当我们单击这些按钮时它应该是停止和启动服务，我使用这样的一些命令

```
public static int stopService(String serviceName) throws Exception {

return execCmd("cmd /c net stop \" + serviceName + "\"");

} 
```

请任何人对此提供一些指导，谢谢你提前

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T04:44:17.167

使用过程。

```
Process runtimeProcess = Runtime.getRuntime().exec(executeCmd);
int processComplete = runtimeProcess.waitFor(); 
```

详细的编码工作

```
import java.io.IOException;
import java.util.Calendar;
import java.util.Date;

public class program7 {

    public static void main(String args[]) {
        String serviceName = ""; // Insert your service name
        try {
            stopService(serviceName);
        } catch (IOException e) {
            e.printStackTrace();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }

    }

    public static void stopService(String serviceName) throws IOException,
            InterruptedException {

        String executeCmd = "cmd /c net stop \"" + serviceName + "\"";
        Process runtimeProcess = Runtime.getRuntime().exec(executeCmd);
        int processComplete = runtimeProcess.waitFor();

        System.out.println("processComplete: " + processComplete);

        if (processComplete == 1) {// if values equal 1 process failed
            System.out.println("Service failed");
        }

        else if (processComplete == 0) {
            System.out.println("Service Success");
        }

    }
} 
```

# java - AudioSystem.getMixerInfo() 在 Java/gentoo 中一无所获

> ID：12701923
> 
> 赞同：2
> 
> 时间：2012-10-03T04:30:50.997
> 
> 标签：java, linux, audio, javasound, gentoo

我想在机器人上开发一个语音识别程序。机器人安装了 gentoo chroot。当我打电话时`AudioSystem.getMixerInfo()`，它什么也不返回。

JDK 版本是 jdk-6u35-linux-i586。/dev/中有很多音频设备，如下表：

```
nao [0] /dev $ ls -l|grep audio
crw-rw---- 1 root audio  14,   4 Oct  3 02:33 audio
crw-rw---- 1 root audio  14,   3 Oct  3 02:33 dsp
crw-rw---- 1 root audio  14,   0 Oct  3 02:33 mixer
crw-rw---- 1 root audio  14,   1 Oct  3 02:33 sequencer
crw-rw---- 1 root audio  14,   8 Oct  3 02:33 sequencer2 
```

是否必须为声音设置一些 linux 或 Java 配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:28:29.517

该版本 Java 的包有一个 alsa USE 标志。目前尚不清楚它是否也对 OSS 有隐含的支持。您列出的设备用于 OSS。这些天你不应该使用本机 OSS，除非你知道你在做什么检查是否启用了 alsa USE 标志并且你有设备存在于 /dev/snd 中。`aplay -L`应该返回一些有用的东西。

# c++ - 使用 Cmake 编译库

> ID：12701926
> 
> 赞同：1
> 
> 时间：2012-10-03T04:31:11.843
> 
> 标签：c++, visual-studio, linker, cmake, voxel

我正在尝试将体素库 PolyVox 包含到我的项目中。但是库下载不为您提供预编译的头文件，而是需要 Cmake。这不会是一个大问题，除了他们关于这个主题的教程*非常*不完整。我以前从未使用过 Cmake，搜索并没有解决这个问题。

我使用 Visual Studio 10 编译器运行了 Cmake，它生成了一堆 Visual Studio 项目。我将这些项目编译成 2 个库，并将库目录包含在项目的属性中。我还将 PolyVox 的所有头文件放在 Visual Studio 知道的目录中。尝试编译我的项目时，我收到链接器错误，例如：

```
1>Gamestate.obj : error LNK2019: unresolved external symbol "public: __thiscall PolyVox::Region::Region(class PolyVox::Vector<3,int> const &,class PolyVox::Vector<3,int> const &)" (??0Region@PolyVox@@QAE@ABV?$Vector@$02H@1@0@Z) referenced in function "public: __thiscall Gamestate::Gamestate(void)" (??0Gamestate@@QAE@XZ) 
```

有人可以向我解释如何使用 Cmake 正确地将 PolyVox 包含到我的代码中吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T07:15:24.177

您忘记在游戏项目中添加 polyvox 库。它在**链接器**菜单中，称为“附加依赖项”，IIRC。

# android - ksoap2：根据这个请求XML发布一个soap请求

> ID：12701930
> 
> 赞同：2
> 
> 时间：2012-10-03T04:31:18.433
> 
> 标签：android, ksoap2, android-ksoap2

我的肥皂请求看起来像这样

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Header>
    <Authenticator xmlns="http://www.namespacename.com/services/">
      <UserName>string</UserName>
      <Password>string</Password>
    </Authenticator>
  </soap:Header>
  <soap:Body>
    <ListItems xmlns="http://www.namespacename.com/services/">
      <strCode>string</strCode>
    </ListItems>
  </soap:Body>
</soap:Envelope> 
```

我至少能够使用 ksoap2 成功登录，但我还没有弄清楚正文部分，任何想法如何使用参数 strCode 调用 ListItems，如上所示。

这是当前代码。

```
 String NAMESPACE = "http://www.namespace.com/services/";
     String METHOD_NAME = "ListItems";
     String SOAP_ACTION = "http://www.namespace.com/services/ListItems";
     String URL = "https://www.kupong.se/Services/CouponAPI18.asmx";

     SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

     SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
              // Enable the below property if consuming .Net service
      envelope.dotNet = true;
      envelope.setOutputSoapObject(request);

      envelope.headerOut = new Element[1];
      envelope.headerOut[0] = buildAuthHeader();

      HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
          try 
          {
              androidHttpTransport.call(SOAP_ACTION, envelope, null);
              response = (SoapObject)envelope.getResponse();

          }
          catch(Exception e)
          {
              e.printStackTrace();
          } 
```

用于为身份验证准备标头值的函数

```
private Element buildAuthHeader() {
            Element h = new Element().createElement(NAMESPACE, "Authenticator");

            Element username = new Element().createElement(NAMESPACE, "UserName");
            username.addChild(Node.TEXT, username);
            h.addChild(Node.ELEMENT, username);
            Element pass = new Element().createElement(NAMESPACE, "Password");
            pass.addChild(Node.TEXT, "password)
            h.addChild(Node.ELEMENT, pass);

            return h;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T04:34:10.967

在 DoInBackground 函数的 AsyncTask 中尝试以下代码：

```
 String user=empidedt.getText().toString().trim();
                   String pass=passedt.getText().toString().trim();

                  System.out.println("user :"+user);
                  System.out.println("pass :"+pass);
                try{

                   SoapObject request = new SoapObject(NAMESPACE1, METHOD_NAME1);                      
                   request.addProperty("UserId",""+user);
                   request.addProperty("Password", ""+pass);

                   SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
                   envelope.dotNet=true;
                   envelope.setOutputSoapObject(request);

                   HttpTransportSE androidHttpTransport = new HttpTransportSE(URL1);

                   androidHttpTransport.call(SOAP_ACTION1, envelope);

                   Object result= envelope.getResponse();

                   SoapObject response=(SoapObject)envelope.bodyIn;

                  strRes = result.toString();
                  System.out.println("strRes :"+strRes); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T05:15:19.407

```
Using Ksoap2 library and write .net web service 
Sucessful Connection with Asp.net Webservice-----
package ProductVerificationCard.in;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class AdminLogin extends Activity {
    /** Called when the activity is first created. */
    Button btn_ok;
    TextView textView;
    private static final String SOAP_ACTION = "http://tempuri.org/Login";

    private static final String OPERATION_NAME = "Login";

    private static final String WSDL_TARGET_NAMESPACE = "http://tempuri.org/";

    private static final String SOAP_ADDRESS = "http://10.0.2.2/new/WebService.asmx";
    String s;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        btn_ok=(Button) findViewById(R.id.btn_login);
        textView=(TextView) findViewById(R.id.tv_error);

        btn_ok.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                SoapObject request = new SoapObject(WSDL_TARGET_NAMESPACE,
                        OPERATION_NAME);

                        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                        SoapEnvelope.VER11);
                        envelope.dotNet = true;

                        envelope.setOutputSoapObject(request);

                        HttpTransportSE httpTransport = new HttpTransportSE(SOAP_ADDRESS);

                        try

                        {

                        httpTransport.call(SOAP_ACTION, envelope);

                        Object response = envelope.getResponse();

                        //textView.setText(response.toString());
                         s=response.toString();
                         if(s=="true")
                         {
                             Intent intent=new Intent(AdminLogin.this,MenuForm.class);
                                startActivity(intent);

                         }

                         else
                         {
                             textView.setText("Enter Valid Username or Password");
                         }
                        }

                        catch (Exception exception)

                        {

                        textView.setText(exception.toString());

                        }
                // TODO Auto-generated method stub
                }
        });

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T03:10:37.573

我只是在寻找一种发布正文消息的方法。

您只需要创建一个 SoapObject 并将其传递给信封的 bodyOut 属性。

```
 SoapObject sub = new SoapObject(NAMESPACE, METHOD);
      sub.addProperty("strCode", value);
      envelope.bodyOut = sub; 
```

# sql-server - 增量部署 OLTP/OLAP SQL Server

> ID：12701931
> 
> 赞同：0
> 
> 时间：2012-10-03T04:31:20.623
> 
> 标签：sql-server, sql-server-2008, ssas

我需要查看 UAT 和生产之间的 SQL Server 中 OLTP 数据库和 OLAP 多维数据集的增量部署，我想知道 SQL Server 是否具备开箱即用的能力？

我知道 SQL Server Data Tools (SSDT) 有一个模式比较工具，但不符合我的要求（除了模式），我们正在寻找数据库（数据）和多维数据集..

立方体上的增量甚至可以完成吗？

另一种选择可能是商业工具（如果存在）

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T21:39:32.120

在进行研究（未经测试）后回答我自己的问题，我不认为该工具将是最好的方法，接下来是评估步骤。

**OLTP 手动流程**：OLTP 的 DAC：http: [//msdn.microsoft.com/en-us/library/ee362011 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ee362011(v=vs.100).aspx)

**下面的 OLAP 手动过程**：使用 Analysis Services 部署向导使用由 Analysis Services 项目生成的 XMLA 输出文件将项目的元数据部署到目标服务器。请参阅：[使用 Analysis Services 部署向导](http://msdn.microsoft.com/en-us/library/ms176121%28v=sql.105%29.aspx)

使用同步数据库向导在任意两个 Analysis Services 数据库之间同步元数据和数据。请参阅：[同步 Analysis Services 数据库](http://msdn.microsoft.com/en-us/library/ms174928%28v=sql.105%29.aspx)

**工装**调查 Red-Gate :

SQL 比较

SQL 数据比较

SSAS 比较

希望这对其他人有帮助！

# parameters - awk - 传递参数 (ARGV) 和文件以在同一命令中解析

> ID：12701934
> 
> 赞同：3
> 
> 时间：2012-10-03T04:31:55.397
> 
> 标签：parameters, awk, arguments

我正在运行 ubuntu11.10，我认为它默认使用 mawk。假设我有一个名为“script.awk”的 awk 脚本，它接收一个参数。我还想指定要解析的文件的名称。因此，如果我将使用“10”作为解析“文件”的参数，我应该运行：

```
./script.awk 10 file 
```

但是 '10' 被解释为要解析的文件，而不是参数。我知道我可以使用 -v 标志来设置一个内部变量，但我想使用 ARGV 来检查参数是否被传递，例如：

```
if (ARGC < 2) { exit 1 } 
```

是否有解决方法，或者我将不得不粘贴 -v 标志？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T04:46:28.203

awk 脚本中的 BEGIN 块在使用参数之前执行。这使您有机会检查正确数量的参数并进行更改。有一个特殊的行为，如果参数是一个空字符串，它会被跳过，所以你可以这样做：

```
 BEGIN {
    if (ARGC<3) exit(1);
    arg=ARGV[1]
    ARGV[1]=""
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-13T07:47:06.757

添加到上面的注释（添加BEGIN之后）需要找到正确的awk。

我们有 awk 的版本（如 nawk、gawk）。尝试使用 man（或帮助）查找 ARGC 和 ARGV 属于哪个版本的 AWK 命令。使用相应的 AWK。

```
nawk 'BEGIN{if(ARGC>9) print "it ll get print . as i used NAWK" }' 1 2 3 4 5 6 7 8 9 
```

**输出 ：**

`it ll get print . as i used NAWK`

```
awk 'BEGIN{if(ARGC>9) print "It throw error . as i used AWK " }' 1 2 3 4 5 6 7 8 9 
```

**输出：**

`awk: can't open 1`

# spring - 如何从休眠中的multipal pojos中检索数据？

> ID：12701936
> 
> 赞同：-1
> 
> 时间：2012-10-03T04:32:13.773
> 
> 标签：spring, hibernate

你好，我有三个名为 UserTAb、UserData 和 UserAccess 的 pojo。我想使用单个 HQL 查询从这三个 pojo 中检索所有数据。我该如何实现这个？？？

请对此进行完整描述我是Hibernate的新手......提前谢谢......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T05:03:22.550

我正面临这个问题。我使用以下方式解决了它

1.  创建一个 DTO 类

    ```
    package com.yourpackage;

    public class UserDTO{

     private UserTAb userTab;

     private UserData userData;

     private UserAccess userAccess;

    // write setter getter here

    public UserDTO(UserTAb userTab,UserData userData,UserAccess userAccess){

      this.userTab=userTab;

      this.userData=userData;

      this.userAccess=userAccess;

     }

    } 
    ```

2.  编写具有正确 JOIN 的 HQL。例如

    ```
    String hql ="select new com.yourpackage.UserDTO(ut,ud,ua) 
            from UserTab as ut,UserData as ud,UserAccess as ua"; 
    ```

    UserTab,UserData,UserData 是您的实体或域类。

    您可以参考 [http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html) 14.6 部分

    如果我错了请纠正我

# android - 坚持“尝试加载库”并且永远不会返回

> ID：12701940
> 
> 赞同：4
> 
> 时间：2012-10-03T04:32:43.213
> 
> 标签：android, android-ndk, java-native-interface

我有一个由 C++ 编写的旧应用程序，我正在尝试将其移植到`android`Eclipse 并使用 Eclipse 对其进行调试，但该项目正在停止并出现错误消息：

**10-03 12:21:55.344: D/dalvikvm(15262)​​: 试图加载 lib/data/data/com.android.test/lib/libtest.so 0x40effa48**

应用程序只是停止而不给出任何其他消息。我不知道该怎么办继续。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-07T17:32:57.153

我有同样的问题，但它是由这个[错误引起的](https://code.google.com/p/android/issues/detail?id=43819)

所以只需从 Application.mk 中删除 NDK_TOOLCHAIN_VERSION=4.7 我只有在带有 android-ndk-r8e 的 Android 2.2 上才有这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:28:28.387

您必须将以下功能添加到您的库中：

```
#include <jni.h>
jint JNI_OnLoad( JavaVM* vm, void* reserved )
{
    JNIEnv* jEnv = NULL;

if ( JNI_OK != ( *vm )->GetEnv( vm, (void**)&jEnv, JNI_VERSION_1_4 ) ){
    return -1;
}
return JNI_VERSION_1_4; 
```

*更新：*没有JNI_OnLoad () 不是问题...
您在评论中写道您有很多全局初始化器 - 考虑在 JNI_OnLoad()

*签名*中进行此类全局初始化：

```
/*
 * Class:     com_android_test_testLib
 * Method:    init
 * Signature: (II)V
 */
JNIEXPORT void JNICALL Java_com_android_test_testLib_init
  (JNIEnv *, jclass, jint, jint);

/*
 * Class:     com_android_test_testLib
 * Method:    uninit
 * Signature: ()V
 */
JNIEXPORT void JNICALL Java_com_android_test_testLib_uninit
  (JNIEnv *, jclass);

/*
 * Class:     com_android_test_testLib
 * Method:    touch
 * Signature: (IIII)V
 */
JNIEXPORT void JNICALL Java_com_android_test_testLib_touch
  (JNIEnv *, jclass, jint, jint, jint, jint);

/*
 * Class:     com_android_test_testLib
 * Method:    update
 * Signature: ()V
 */
JNIEXPORT void JNICALL Java_com_android_test_testLib_update
  (JNIEnv *, jclass); 
```

# mysql - 在子查询中使用限制

> ID：12701947
> 
> 赞同：0
> 
> 时间：2012-10-03T04:33:48.723
> 
> 标签：mysql

我有 4 张桌子

*   产品
*   地位
*   订单
*   订单_产品。

使用以下查询我得到了正确的结果，但它的顺序不正确，即结果是通过子查询获得的。我希望结果顺序作为子查询结果。

```
SELECT 
    p.products_id, p.products_image, p.products_tax_class_id,
    pd.products_name, if(s.status, s.specials_new_products_price,
    p.products_price) as products_price 
FROM
    products p LEFT JOIN specials s
        ON p.products_id = s.products_id, products_description pd 
WHERE
    p.products_status = '1' 
    AND p.products_id = pd.products_id 
    AND pd.language_id = '2' 
    AND p.products_id in (
        SELECT * from (
            SELECT
                distinct(op.products_id) 
            FROM
                orders_products op,orders o 
            WHERE
                op.orders_id=o.orders_id 
                AND o.customers_id='27' 
            ORDER BY
                o.date_purchased 
            DESC LIMIT 0,10 
        ) AS temptable
    ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T06:28:13.393

外部 SELECT 有一个 ORDER BY pd.products_name。这就是应该适用的，而且仅此而已。

子查询 ORDER BY 实际上并不重要。删除它应该得到相同的结果。

如果您想要与 pd.products_name 不同的排序顺序，则必须按所需列排序。在您的情况下，您需要将 orders.date_purchased 移动到查询的主要部分，以便您可以使用它进行排序。反转查询，即从您想要的内容开始并关联其他所有内容：

```
 SELECT MAX(o.date_purchased) AS date_purchased, DISTINCT (op.products_id) AS products_id
    p.products_id, p.products_image, p.products_tax_class_id, p.products_price
    pd.products_name,
    IF (s.status, s.specials_new_product_price, p.products_price) AS products_price

    FROM orders o

    LEFT JOIN orders_products op USING (orders_id)
    LEFT JOIN products p USING (products_id)
    LEFT JOIN products_description pd USING (products_id)
    LEFT JOIN specials s USING (products_id)
    WHERE o.customers_id = '27'
    AND p.products_status = 1
    AND pd.language_id = 2 
```

# javascript - 悬停时下拉div

> ID：12701952
> 
> 赞同：1
> 
> 时间：2012-10-03T04:34:37.313
> 
> 标签：javascript, html, css, onmouseover

当鼠标悬停在另一个 div 上并且不确定我应该如何组织它时，我想下拉一个包含更多信息的 div。我有以下内容：http: [//quaaoutlodge.com/drupal-7.14/](http://quaaoutlodge.com/drupal-7.14/)我希望如果将鼠标悬停在 Book Now 区域上，只要光标在 Book Now 或 TEST 上方，TEST-div 就会下降一旦光标离开该区域，它应该再次下降。我如何最好地解决这个问题？

为了获得类似于您在[http://www.thedana.com/](http://www.thedana.com/)上看到的内容，我尝试实现一些 onmouseover javscript 代码，当将鼠标悬停在 book now div 上时应执行这些代码。我只是尝试先静态更改元素的高度，如下所示：

```
 function dropbox(element){
    obj = document.getElementById(element);
    if(obj) {
      obj.style.min-height = "400px";

    } else {
    }
  } 
```

但我做不到。最终的目标是有一个延迟的循环来慢慢地下拉 book now 选项卡。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T04:40:11.603

您可以尝试使用 css 方法

```
#book + div{
    display:none;
}
#book:hover + div{
    display:block;
} 
```

[+ 选择器](http://www.w3.org/TR/css3-selectors/#adjacent-sibling-combinators)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T04:41:44.890

您可以使用此代码或（参考：w3schools.com）

```
<!DOCTYPE html>
<html>
<head>
<script src="jquery.js"></script>
<script>
$(document).ready(function(){
  $("button").hover(function(){
    $("p").toggle();
  });
});
</script>
</head>
<body>

<button>Toggle</button>
<p>This is a paragraph with little content.</p>
<p>This is another small paragraph.</p>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T15:25:31.800

好像我编辑了 obj.style.height 而不是 .min-height 并且效果很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T15:06:43.313

改为使用 JQuery，它似乎工作正常：

```
 <script src="./path/to/jquery.js"></script>
  <script>
  $(function() {
        var fade = $('#fade');
        $('#book').hover(function() {
          fade.fadeIn();
        }, function() {
          fade.fadeOut();
        });
      }); 
```

我的 html 看起来像这样：

```
<div style="" id="book">Book Now<br/> <!-- hover div-->
    <div class="fade" id="fade"> <!-- drop down div set to display:none; in css--> 
```

# asp.net - 有什么方法可以从 Global.asax 中的 Application_Error 捕获的未处理异常中获取更多信息？

> ID：12701955
> 
> 赞同：1
> 
> 时间：2012-10-03T04:35:03.360
> 
> 标签：asp.net, global-asax, unhandled-exception, application-error

在生产中，我在 Global.asax 中处理了 Application_Error 事件，以记录（并通过电子邮件发送给我）任何潜入的未捕获异常的详细信息：

```
void Application_Error(object sender, EventArgs e) // code simplified a bit for SO
{
    Exception ex = Server.GetLastError();
    MyTools.LogError("Global.asax::Application_Error", "An unhandled exception occurred", ex);
} 
```

然而，错误消息本身通常是无用的；有一个堆栈跟踪，但**没有行号**，**通常没有引用我自己的任何代码**，只有 .net 框架（BCL）方法。有时至少会有关于**页面名称**的提示，但这已经是最好的了。

例子：

> 引发了“System.Web.HttpUnhandledException”类型的异常。
> 
> 远程主机关闭了连接。错误代码为 0x80072746。
> 
> 系统.Web
> 
> 布尔句柄错误（System.Exception）
> 
> 在 System.Web.UI.Page.HandleError(Exception e) 在 System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) 在 System.Web.UI.Page.ProcessRequest(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) 在 System .Web.UI.Page.ProcessRequest() 在 System.Web.UI.Page.ProcessRequestWithNoAssert(HttpContext context) 在 System.Web.UI.Page.ProcessRequest(HttpContext context) 在 ASP。**aRealPageName_aspx** .ProcessRequest(HttpContext context) at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)

那么知道如何**让 global.asax 给我更多有用的错误信息吗？**

我知道如果有办法告诉代码放在哪里，我可以在代码中添加一个 try-catch，但没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T04:36:51.000

如果您的生产服务器没有 pdb 文件，它不会给您行号。将您的 pdb 文件与 dll 一起复制以获取更多信息。

# performance - 使用陈旧数据从随机间隔数据集构建固定间隔数据集

> ID：12701958
> 
> 赞同：6
> 
> 时间：2012-10-03T04:35:22.697
> 
> 标签：performance, matlab

**更新：**我对问题文本底部的三个答案进行了简要分析，并解释了我的选择。

**我的问题：**使用陈旧数据从随机间隔数据集构建固定间隔数据集的最有效方法是什么？

**一些背景：**以上是统计中的常见问题。通常，一个人有一系列随机发生的观察结果。调用它`Input`。但是人们希望每 5 分钟发生一次观察序列。调用它`Output`。构建此数据集的最常见方法之一是使用陈旧数据，即将每个观察值设置为`Output`等于 中最近出现的观察值`Input`。

所以，这里有一些代码来构建示例数据集：

```
TInput = 100;
TOutput = 50;

InputTimeStamp = 730486 + cumsum(0.001 * rand(TInput, 1));
Input = [InputTimeStamp, randn(TInput, 1)];

OutputTimeStamp = 730486.002 + (0:0.001:TOutput * 0.001 - 0.001)';
Output = [OutputTimeStamp, NaN(TOutput, 1)]; 
```

这两个数据集都是在千禧年之交接近午夜时开始的。但是，时间戳记`Input`以随机间隔出现，而时间戳记`Output`以固定间隔出现。为简单起见，我确保第一次观察`Input`总是发生在第一次观察之前`Output`。随意在任何答案中做出这个假设。

目前，我解决了这样的问题：

```
sMax = size(Output, 1);
tMax = size(Input, 1);
s = 1;
t = 2;
%#Loop over input data
while t <= tMax
    if Input(t, 1) > Output(s, 1)
        %#If current obs in Input occurs after current obs in output then set current obs in output equal to previous obs in input
        Output(s, 2:end) = Input(t-1, 2:end);
        s = s + 1;
        %#Check if we've filled out all observations in output
        if s > sMax
            break
        end
        %#This step is necessary in case we need to use the same input observation twice in a row
        t = t - 1;
    end
    t = t + 1;
    if t > tMax
        %#If all remaining observations in output occur after last observation in input, then use last obs in input for all remaining obs in output 
        Output(s:end, 2:end) = Input(end, 2:end);
        break
    end
end 
```

肯定有更有效的，或者至少，更优雅的方式来解决这个问题？正如我所提到的，这是统计中的一个常见问题。也许 Matlab 有一些我不知道的内置功能？任何帮助将不胜感激，因为我将这个例程用于一些大型数据集。

**答案：**大家好，我已经分析了三个答案，就目前而言，Angainor 是最好的。

ChthonicDaemon 的答案，虽然显然是最容易实现的，但确实很慢。即使在`timeseries`速度测试之外完成到对象的转换也是如此。我猜这个`resample`函数目前有很多开销。我正在运行 2011b，因此 Mathworks 可能在此期间对其进行了改进。`Output`此外，对于在之后结束多个观察的情况，此方法需要额外的一行`Input`。

Rody 的答案只比 Angainor 的慢一点（这并不奇怪，因为他们都采用了这种`histc`方法），但是，它似乎有一些问题。首先，分配最后一个观测值的方法对于在最后一个观测值之后发生的最后`Output`一个观测值并不稳健。这是一个简单的修复。但是还有第二个问题，我认为它源于作为第一个输入而不是被 Angainor 采用。如果您在设置示例输入时更改为，则会出现问题。`Input``Output``InputTimeStamp``histc``OutputTimeStamp``OutputTimeStamp = 730486.002 + (0:0.001:TOutput * 0.001 - 0.001)';``OutputTimeStamp = 730486.002 + (0:0.0001:TOutput * 0.0001 - 0.0001)';`

安盖诺似乎对我扔给它的所有东西都很强大，而且它是最快的。

我对不同的输入规格做了很多速度测试——以下数字相当有代表性：

我天真的循环：`Elapsed time is 8.579535 seconds.`

**安盖诺**：`Elapsed time is 0.661756 seconds.`

罗迪：`Elapsed time is 0.913304 seconds.`

Chthonic守护进程：`Elapsed time is 22.916844 seconds.`

我正在 +1-ing Angainor 的解决方案并标记问题已解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T08:38:50.853

这种“陈旧数据”方法在信号和时间序列字段中被称为[零阶保持。](http://en.wikipedia.org/wiki/Zero-order_hold)快速搜索这个会带来许多解决方案。[`timeseries`](http://www.mathworks.com/help/matlab/ref/timeseriesclass.html)如果你有 Matlab 2012b，这一切都是通过使用函数内置到类中的`resample`，所以你只需做

```
TInput = 100;
TOutput = 50;

InputTimeStamp = 730486 + cumsum(0.001 * rand(TInput, 1));
InputData = randn(TInput, 1);
InputTimeSeries = timeseries(InputData, InputTimeStamp);

OutputTimeStamp = 730486.002 + (0:0.001:TOutput * 0.001 - 0.001);
OutputTimeSeries = resample(InputTimeSeries, OutputTimeStamp, 'zoh'); % zoh stands for zero order hold 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T07:54:51.817

这是我对这个问题的看法。`histc`是要走的路：

```
% find Output timestamps in Input bins
N   = histc(Output(:,1), Input(:,1));

% find counts in the non-empty bins
counts = N(find(N));

% find Input signal value associated with every bin
val = Input(find(N),2);

% now, replicate every entry entry in val
% as many times as specified in counts
index = zeros(1,sum(counts));
index(cumsum([1 counts(1:end-1)'])) = 1;
index = cumsum(index);
val_rep = val(index)

% finish the signal with last entry from Input, as needed
val_rep(end+1:size(Output,1)) = Input(end,2);

% done
Output(:,2) = val_rep; 
```

我针对您的程序检查了几个不同的输入模型（我更改了输出时间戳的数量），结果是相同的。但是，我仍然不确定我是否理解您的问题，所以如果这里有问题，请告诉我。

# ios - NSAttributedString setFont 不适用于表情符号字符

> ID：12701964
> 
> 赞同：5
> 
> 时间：2012-10-03T04:35:54.030
> 
> 标签：ios, nsattributedstring, emoji

我正在使用 Nimbus`NIAttributedLabel`类来显示有时包含表情符号的文本。我将字体大小设置为`[UIFont systemFontOfSize:15]`但表情符号字符似乎忽略了这一点。使用 UILabel 可以正确显示所有字符。

NIAttributedLabel 内部调用

```
[self addAttribute:(NSString*)kCTFontAttributeName value:(id)fontRef range:range]; 
```

我想当`NSAttributedString`它看到表情符号字符时必须切换到不同的字体。有什么技巧可以确保它使用相同的字体大小吗？

# git - Git：获取未提交更改的大小

> ID：12701967
> 
> 赞同：4
> 
> 时间：2012-10-03T04:36:02.790
> 
> 标签：git

有没有办法查看我在 git 中未提交更改的大小？我想如果有办法查看已提交更改的大小，我可以暂时提交我的东西并查看该提交。有没有办法做到这一点？

原因是我担心我未提交的更改（包括一堆二进制文件更改）可能会不必要地大，这会永远增加 git repo 的大小。因此，如果是，我想寻找另一种解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T05:07:18.190

您可以这样做`git diff --binary`，尽管这会将二进制补丁格式化为文本形式，从而使其比实际更大。

但这应该足以快速了解我们是在谈论千字节、兆字节还是更多；-)

例如，你可以`git diff --cached --binary | wc -c`在提交之前做。

# apache - 在 EC2 Ubuntu 12.04 实例上使用 Drupal 7 进行清理 URL 测试失败

> ID：12701968
> 
> 赞同：0
> 
> 时间：2012-10-03T04:36:03.560
> 
> 标签：apache, drupal, amazon-ec2

我已经启用了 mod-rewrite

```
sudo a2enmod rewrite 
```

我已将 Drupal7 安装添加到位于 /etc/apache2/sites-available/default 的 apache 配置文件中（注意：这是要编辑的正确配置文件吗？）

```
<Directory "/var/www/myDrupal">
AllowOverride All
Order allow,deny
Allow from all
</Directory> 
```

然后我重新启动了 Apache2

```
sudo /etc/init.d/apache2 restart 
```

然而，它仍然未能通过 Drupal 中的 Clean URL 测试。我已经用头撞键盘太久了。有人有其他建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-05T10:56:57.147

如果它位于根目录下的“myDrupal”文件夹中，则它位于子目录中。您需要编辑 .htaccess，并在第 110 行取消注释“RewriteBase /”。

只是改变

```
# RewriteBase / 
```

到

```
RewriteBase 
```

然后刷新您的 Drupal 缓存并重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T06:12:40.090

如果您的 .htaccess 看起来不错，并且使用 AllowOverride All 正确设置了 apache 配置文件，请尝试通过 yourSite.com/admin/config/search/clean-urls 导航到 clean-urls 配置页面并启用它！即使您的服务器已正确配置为重写，Clean URL 的测试有时也会失败。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-05T06:59:03.457

您需要启用 mod_rewrite。您必须在实例创建期间导致以下情况发生：

# a2enmod 重写

# 服务 apache2 重启

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-21T13:28:43.443

**为Ubuntu 14.04**启用干净的 url

 **(1) 在您的 ubuntu（命令行界面）CLI 上运行命令**a2enmod rewrite**以确保安装了重写。

(2) vi /etc/apache2/apache2.conf

一种。在所有**AllowOverride All下**

(3) 在 /var/www/ 下的**.htaccess 文件**中，如果这是您的 drupal 安装位置，请确保**Rewritebase /**未注释且正确。如果您的 drupal 安装是 **Rewritebase /var/www/drupa**l，则将其更改为那个。

(4) 在你的 ubuntu CLI 上运行命令**service apache2 restart**，你应该很好。*可选 - 确保你的根

~祝你好运**

# arduino - 在不使用analogWrite的情况下使用Arduino Uno控制电机速度？

> ID：12701971
> 
> 赞同：0
> 
> 时间：2012-10-03T04:36:29.720
> 
> 标签：arduino, microcontroller, avr, robotics, robot

我需要控制我的自主[Arduino Uno](http://arduino.cc/en/Main/ArduinoBoardUno)机器人的速度，但我受到了限制。我不能使用任何 MCU 库，例如analogWrite、来自 MCU（定时器）的任何硬件设备或模块。

我曾想过以非常小的间隔关闭和打开电机并将其置于循环中。但我正在努力寻找一种更有效、更干净的方法。我需要能够将速度控制在正常速度的 75%、50% 和 25%，并打开和关闭电机，这很复杂。

如何以更有效的方式控制电机的速度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T04:45:45.247

你说你有一些非常严格的条件：

> 我不能使用任何 MCU 库，例如analogWrite、来自 MCU（定时器）的任何硬件设备或模块。

获得一个[带有串行接口的电机控制器，](http://www.pololu.com/catalog/category/10)每当你想改变速度时，把几个串行字节按位发送给它。您只需将 Arduino 的 GND 连接到控制器的 GND，选择一个 Arduino 引脚作为 TX 线，然后将该引脚连接到控制器的 RX 线。然后使用 digitalWrite 和 delayMicroseconds 对一些串行字节进行 bit-bang。

# iphone - 如何在 iphone 应用程序开发中从 facebook 导入图像？

> ID：12701975
> 
> 赞同：1
> 
> 时间：2012-10-03T04:36:41.197
> 
> 标签：iphone, ios, facebook, import

如何在 iphone 应用程序中从 facebook 相册导入图像？任何建议，任何代码或任何链接都是可观的。我已经看到了几个关于堆栈溢出的此类问题，但我没有得到我想要的答案。我已经看到了 facebook api 链接帮助，所以任何教程链接也会有所帮助。

请注意：到目前为止，我可以将图像分享到 facebook。所以到目前为止 fbconnect 上没有问题。

提前感谢您的帮助。

# android - 如何在 Android 上管理应用程序设置

> ID：12701978
> 
> 赞同：3
> 
> 时间：2012-10-03T04:36:53.173
> 
> 标签：android, configuration, settings, sharedpreferences

我正在开发我的第一个 Android 应用程序，该应用程序向服务器 (API) 发送许多请求以加载数据，因此我正在考虑使用一个单独的文件，例如 iOS 上的 .plist，它将包含一个 URL 列表（该应用程序将阅读此文件，此文件将在应用程序第一次运行之前设置），因此如果我需要更改任何 URL，它会更容易，应用程序将获得更改。我读了一些关于“SharedPreferences”的东西，但我知道我只能在应用程序运行时保存数据（以前没有）。

我的问题是：推荐的方法是什么？Android 有针对这种情况的本机解决方案（例如应用程序设置文件）？我可以在应用程序运行之前设置一个“sharedPreferences”文件吗？

非常感谢你，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:59:21.477

在 res/values 下创建一个 urlList.xml 文件：这是您的列表：

```
<?xml version="1.0" encoding="utf-8"?>
 <resources>
<string-array name="my_urls">
    <item>url1</item>
    <item>url2</item>
</string-array>
</resources> 
```

要从代码中访问它：

```
String[] urls = getResources().getStringArray(R.array.my_urls); 
```

# android - 安卓文件夹结构

> ID：12701983
> 
> 赞同：0
> 
> 时间：2012-10-03T04:37:22.453
> 
> 标签：android, android-layout, android-emulator

在谷歌上找到后，我终于在堆栈溢出中发布了我的问题。

任何人都可以提供有关 android 文件夹结构及其用途的想法吗？

**例如 ：-**

> src,gen,bin,res 和 res 中所有可能的文件夹，例如 drawable,raw,drawable for ldpi,hdpi 等。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T04:44:17.130

您好，您的问题答案是：

`src`- 用于编写所有Java文件

`gen`- 在名称本身中，您可以看出其自动生成的文件夹。它包括 R.java，如果你有任何辅助服务，它也会创建一个 java 类。

`res`- 它用于编写与 UI 相关的文件，例如不同的布局，如你所说的高、中、低布局，字符串将在 Values 文件夹、STyles 等中提及，

`raw`- 用于存储媒体相关文件，如 .mp3

`drawable(ldpi,mdpi,hdpi,xlarge-hdpi)`- 它用于以PNG格式存储所有图像。LDPI 用于低屏幕尺寸的移动设备，例如用于平板电脑的 Xlagre-HDPI 和所有..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T05:39:19.790

![Android项目结构基本](../Images/5347f9055cf18c14adb5924a49b5a386.png)

关于android中的图像显示文件夹结构。

接受这一点，res 的子文件夹中还有其他文件夹。

**例如 ：-**

res/ layout/ main.xml ---> 竖屏
layout-land/ main.xml ---> 横屏

res/ layout/ # 默认（纵向）
main.xml layout-land/ # 横向
main.xml layout-large/ # 大（纵向）
main.xml layout-large-land/ # 大横向
main.xml

res/ drawable-xhdpi/
awesomeimage.png
drawable-hdpi/
awesomeimage.png
drawable-mdpi/
awesomeimage.png
drawable-ldpi/
awesomeimage.png

每当您引用@drawable/awesomeimage 时，系统都会根据屏幕的密度选择适当的位图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-18T09:40:23.093

您可以从链接中获取应用程序目录结构和解释

[android-app-目录结构](http://togetherwithandroid.blogspot.in/2015/02/android-folder-structure.html)

# tableview - JavaFX：TableColumn 的给定行的单元格渲染器实例

> ID：12701984
> 
> 赞同：2
> 
> 时间：2012-10-03T04:37:42.933
> 
> 标签：tableview, javafx, tablecolumn

在 JavaFX 中，如何获取给定 TableColumn 的给定单元格的单元格渲染器实例？

在 Swing 中，这样做的方法是在 TableCellRenderer 上为该列调用getTableCellRendererComponent **(** **)**并将行和列索引传递给它。但JavaFX 似乎非常不同。我尝试搜索并浏览 TableColumn API，但我似乎无法弄清楚这一点。也许我必须对**getCellFactory()**做点什么。

 ****我的目标是查询列的每个单元格渲染器的首选宽度，然后计算要在列上设置的宽度，以便该列的所有单元格的内容完全可见。

这里提出了一个问题[-JavaFX 2 Automatic Column Width-](https://stackoverflow.com/questions/10152828/javafx-2-automatic-column-width)原始海报的目标与我的目标相同。但是那里还没有一个令人满意的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:43:28.277

TableColumnHeader 类中有 resizeToFit() 方法。不幸的是，它受到保护。如何将代码复制粘贴到您的应用程序并稍作更改：

```
protected void resizeToFit(TableColumn col, int maxRows) {
    List<?> items = tblView.getItems();
    if (items == null || items.isEmpty()) return;

    Callback cellFactory = col.getCellFactory();
    if (cellFactory == null) return;

    TableCell cell = (TableCell) cellFactory.call(col);
    if (cell == null) return;

    // set this property to tell the TableCell we want to know its actual
    // preferred width, not the width of the associated TableColumn
    cell.getProperties().put("deferToParentPrefWidth", Boolean.TRUE);//the change is here, only the first parameter, since the original constant is not accessible outside package

    // determine cell padding
    double padding = 10;
    Node n = cell.getSkin() == null ? null : cell.getSkin().getNode();
    if (n instanceof Region) {
        Region r = (Region) n;
        padding = r.getInsets().getLeft() + r.getInsets().getRight();
    } 

    int rows = maxRows == -1 ? items.size() : Math.min(items.size(), maxRows);
    double maxWidth = 0;
    for (int row = 0; row < rows; row++) {
        cell.updateTableColumn(col);
        cell.updateTableView(tblView);
        cell.updateIndex(row);

        if ((cell.getText() != null && !cell.getText().isEmpty()) || cell.getGraphic() != null) {
            getChildren().add(cell);
            cell.impl_processCSS(false);
            maxWidth = Math.max(maxWidth, cell.prefWidth(-1));
            getChildren().remove(cell);
        }
    }

    col.impl_setWidth(maxWidth + padding);
} 
```

然后你可以在加载数据后调用该方法：

```
for (TableColumn clm : tblView.getColumns()) {
    resizeToFit(clm, -1);
} 
```****

# c - 如何通过防火墙沙箱和分析流量

> ID：12701986
> 
> 赞同：0
> 
> 时间：2012-10-03T04:38:17.317
> 
> 标签：c, linux, firewall, libpcap

我阅读了[Palo Alto Wildfire](http://www.paloaltonetworks.com/solutions/WildFire.html)产品。那里说：

> WildFire，可通过在虚拟环境中运行可执行文件并观察其行为来识别可执行文件中的恶意行为

我不知道如何以编程方式分析这种恶意软件行为。
[更新] 我的困惑是防火墙如何通过将实时流量置于虚拟环境中并执行它来分析实时流量！说如果有人正在利用 pdf 漏洞。防火墙如何以编程方式对其进行分析？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T04:47:10.470

该公司可能不会告诉你他们是如何做到的，但一个天真的猜测是他们如何使用防火墙首先将文件发送到虚拟机，对其进行测试，然后将其发送给最终用户。所以防火墙本身很可能不会以编程方式分析任何东西。

**更新**

[linux网络监控工具](https://serverfault.com/questions/400354/what-is-the-tool-for-monitoring-network-traffic-in-linux)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T05:31:31.660

要了解此类产品，您需要首先识别恶意软件和其他类似软件的行为。通常它们声称是其他东西，并且在执行时开始执行与类似应用程序的标准行为不匹配的任务。

现代防火墙产品具有跟踪由下载的可执行文件执行的活动的代码。

例如，您的防火墙检测到一个应用程序的会话，该应用程序在您的系统上复制了一个声称是媒体播放器的可执行文件。他们试图检测完整的 L7，即识别正在使用的应用程序以及它复制的文件。然后他们在测试机器上运行收到的文件。

防火墙还监视虚拟机的异常行为。例如接收到的播放器试图自己复制大量文件，或者从磁盘读取其他信息等，或者开始写入机器的文件系统，或者开始打开套接字将数据发送回某个地方。预计这些都不会由该类型的标准程序完成。这个级别的产品有一个通用的编程框架，它定义了对接收到的应用程序类型列表有效的操作类型。如果他们执行超出该列表的行为，则称为可疑。

这些细节在入侵检测（IDS/IPS）领域。

总而言之，这里的关键不仅仅是剖析实时流量。而且在会话完成后，监视下载程序执行的活动。

最后，一旦已识别的应用程序被标记为恶意应用程序，就会使用手动和自动机制来识别此类流量。这就是签名、连接模式、有效负载长度和其他因素到位的地方。Snort 是定义此类规则的一个示例工具，还有许多其他工具。

一旦你建立了一个标准，比如这个媒体播放器看起来是恶意软件，在 90% 的情况下实际上都有模式 y，它们会立即开始阻止该特定会话的流量

# c# - 将 datagridview 单元格值与 DataGridViewImageColumn 中的图像进行比较

> ID：12701989
> 
> 赞同：2
> 
> 时间：2012-10-03T04:38:29.183
> 
> 标签：c#, datagridview, compare, datagridviewcolumn

`DataGridViewImageColumn`如果图像单元格的值为绿色复选框图像，我已经创建并想要执行操作。代码如下。但它不在条件内

```
if (dgvException.Rows[e.RowIndex].Cells["colStock"].Value 
                                              == Properties.Resources.msQuestion)
{
    //Some code
} 
```

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-22T15:27:24.843

我建议使用单元格标记属性添加代表图像的文本值 - 例如数字或名称，并使用它来检查显示的图像。.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T06:14:22.603

使用相等运算符 ( ) 检查图像的相等性`==`并不能按照您需要的方式工作。这就是为什么你的平等检查总是返回假。

您需要确定两个图像的*内容*是否相同——为此，您需要逐像素检查 DGV 单元中的图像和参考图像。我找到了一些指向[这篇文章](http://www.c-sharpcorner.com/uploadfile/prathore/image-comparison-using-C-Sharp/)的链接，这些链接演示了比较两个图像。我从文章中提取了图像比较算法，并将其浓缩为一个方法，该方法将两个`Bitmaps`作为参数进行比较，如果图像相同则返回 true：

```
private static bool CompareImages(Bitmap image1, Bitmap image2) {
    if (image1.Width == image2.Width && image1.Height == image2.Height) {
        for (int i = 0; i < image1.Width; i++) {
            for (int j = 0; j < image1.Height; j++) {
                if (image1.GetPixel(i, j) != image2.GetPixel(i, j)) {
                    return false;
                }
            }
        }
        return true;
    } else {
        return false;
    }
} 
```

（警告：代码未经测试）

使用此方法，您的代码将变为：

```
if (CompareImages((Bitmap)dgvException.Rows[e.RowIndex].Cells["colStock"].Value, Properties.Resources.msQuestion)) {
    //Some code 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-31T07:26:24.230

S.Ponsford 的回答对我来说效果很好，我做了这个通用的例子。PD：请记住我的第 0 列是我的 DataGridViewImageColumn

```
if (this.dataGridView.CurrentRow.Cells[0].Tag == null)
{                                                    
     this.dataGridView.CurrentRow.Cells[0].Value= Resource.MyResource1;
     this.dataGridView.CurrentRow.Cells[0].Tag = true;                       
}
else
{
     this.dataGridView.CurrentRow.Cells[0].Value = Resources.MyResource2;
     this.dataGridView.CurrentRow.Cells[0].Tag = null;                        
} 
```

# mysql - 如何在两个不同的数据库上从内连接这两个表中显示 NULL 或零？

> ID：12701993
> 
> 赞同：0
> 
> 时间：2012-10-03T04:38:46.460
> 
> 标签：mysql

我在 2 个不同的数据库上有 2 个表：

**db1.table1**

```
+--------------+--------------------------+
| Username     | Message                  |
+--------------+--------------------------+
| jamesbond    | I need some help         |
| jamesbond    | I need some help         |
| jamesbond    | I need some help         |
| jamesbond    | Mission accomplished     |
+--------------+--------------------------+ 
```

**db2.table2**

```
+--------------------------+--------------+
| Message                  | Status       |
+--------------------------+--------------+
| I need some help         | Ok           |
| I need some help         | Ok           |
| I need some help         | Bad          |
+--------------------------+--------------+ 
```

当我使用以下 SQL 语法“INNER JOIN”这些表时：

```
SELECT A.Username, A.Message
SUM(CASE WHEN `status` = 'Ok' THEN 1 ELSE 0 END) AS StatOK,
SUM(CASE WHEN `status` = 'Bad' THEN 1 ELSE 0 END) AS StatBAD
FROM db1.table1 as A
INNER JOIN db2.table2 as B 
ON A.Message = B.Message
WHERE A.Username = 'jamesbond'
GROUP BY A.Username, A.Message 
```

我得到了这个结果：

```
+--------------+--------------------------+--------+---------+
| Username     | Message                  | StatOK | StatBAD |
+--------------+--------------------------+--------+---------+
| jamesbond    | I need some help         | 2      | 1       |
+--------------+--------------------------+--------+---------+ 
```

如何得到这样的结果（在 DB2 上仍然出现没有状态的消息，但 SUM 结果可以是零或空）：

```
+--------------+--------------------------+--------+---------+
| Username     | Message                  | StatOK | StatBAD |
+--------------+--------------------------+--------+---------+
| jamesbond    | I need some help         | 2      | 1       |
| jamesbond    | Mission accomplished     | NULL   | NULL    |
+--------------+--------------------------+--------+---------+ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T04:41:14.930

您需要一个`Left Outer Join`，它将从左表中获取行，如果它与右表不匹配，那么您将获得 NULL。

```
SELECT A.Username, A.Message
SUM(CASE WHEN `status` = 'Ok' THEN 1 ELSE 0 END) AS StatOK,
SUM(CASE WHEN `status` = 'Bad' THEN 1 ELSE 0 END) AS StatBAD
FROM db1.table1 as A
LEFT OUTER JOIN db2.table2 as B 
ON A.Message = B.Message
WHERE A.Username = 'jamesbond'
GROUP BY A.Username, A.Message 
```

# python - 理解 Python 中的函数

> ID：12701994
> 
> 赞同：0
> 
> 时间：2012-10-03T04:38:57.700
> 
> 标签：python, function, turtle-graphics

我正在尝试使用 Python 中的 Turtle 模块使用单独的函数绘制美国国旗，首先我有 draw_flag 计算所有尺寸，然后 draw_rectangle 实际绘制国旗形状，然后制作 draw_stars 等来绘制星星和线条。

但是，我在理解函数的工作原理时遇到了一些麻烦。到目前为止，这是我的代码：

```
import turtle
import time
import random

def draw_rectangle(length, height):
    turtle.up()
    x = length
    y = height

    turtle.begin_fill()
    turtle.setpos(x,y)
    turtle.down()
    turtle.forward(418)
    turtle.right(90)
    turtle.forward(220)
    turtle.right(90)
    turtle.forward(418)
    turtle.right(90)
    turtle.forward(220)
    turtle.end_fill()

    turtle.sleep(2)
    turtle.bye

def draw_flag(A):
    height = int(A)
##    length = height*1.9
##    union_height = height*(7/13)
##    union_length = length*(2/5)
##    E = F = union_height/10
##    G = H = union_length/12
##    stripe_width = height/13
##    diameter_star = stripe_width*(4/5)
    length = height*1.9
    return

A = input("Please enter the height of the flag: ")

draw_rectangle(length, height) 
```

我希望它会通过绘制一个矩形返回，但它一直说长度未定义，不确定将“长度”放置在哪里可以识别变量。

我正在使用 Python 3，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T04:43:34.187

你有两个问题。首先，您定义了函数`draw_flag`，但从未调用过它。

但是，如果您确实调用了它，它将不起作用，因为您的函数`draw_flag`实际上并没有做任何事情。它只是在自身内部定义了一些变量，然后在结束时将它们丢弃。您应该返回长度和高度`return length, height`，然后使用这些值执行`length, height = draw_flag(A)`和调用。`draw_rectangle`（或者你可以这样做`draw_rectangle(*draw_flag(A))`。）

```
length, height = draw_flag(A)
draw_rectangle(length, height) 
```

函数不会神奇地相互通信。函数接受输入并产生返回值。如果要在其他地方使用该返回值，则需要在要使用该值的地方调用该函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T04:45:56.783

您正在调用函数`draw_rectangle`，它需要两个参数 - 长度和高度。长度由`draw_flag`函数计算；但你不返回值。

你有几种方法可以解决这个问题。一种是简单地`draw_flag`使用用户提供的高度调用函数，保存返回值，然后调用`draw_rectangle`：

```
def draw_flag(A):
    height = int(A)
##    length = height*1.9
##    union_height = height*(7/13)
##    union_length = length*(2/5)
##    E = F = union_height/10
##    G = H = union_length/12
##    stripe_width = height/13
##    diameter_star = stripe_width*(4/5)
    return height*1.9

A = input("Please enter the height of the flag: ")
length = draw_flag(A)
draw_rectangle(length, int(A)) 
```

另一种是将你移动`input`到`draw_flag`函数中，然后`draw_rectangle`从函数内部调用`draw_flag`函数。如果你这样做，那么`draw_flag`函数根本不需要任何参数：

```
def draw_flag():
    A = input("Please enter the height of the flag: ")
    height = int(A)
##    length = height*1.9
##    union_height = height*(7/13)
##    union_length = length*(2/5)
##    E = F = union_height/10
##    G = H = union_length/12
##    stripe_width = height/13
##    diameter_star = stripe_width*(4/5)
    draw_rectangle(height*1.9, height)

draw_flag() 
```

我认为您还应该阅读 Python 书籍中关于变量范围的部分。当您希望打印一些变量但遇到奇怪的错误时，它会有所帮助 - 特别是在您使用函数时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T04:47:11.737

尝试以下

```
import turtle
import time
import random

def draw_rectangle(length, height):
   turtle.up()
   x = length
   y = height

   turtle.begin_fill()
   turtle.setpos(x,y)
   turtle.down()
   turtle.forward(418)
   turtle.right(90)
   turtle.forward(220)
   turtle.right(90)
   turtle.forward(418)
   turtle.right(90)
   turtle.forward(220)
   turtle.end_fill()

   turtle.sleep(2)
   turtle.bye

 def draw_flag(A):
   height = int(A)
   length = height*1.9
   draw_rectangle(length,height)
   return

A = input("Please enter the height of the flag: ")

draw_flag(A) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T05:21:56.650

这是一个很好的思考方式。函数是一个“黑匣子”，它以特定顺序接收一些称为*arguments*的值，并对它们进行某些操作以产生其他值。当我说“黑匣子”时，我的意思是当你使用这个函数时，你不必关心它是怎么做的，你只需给它一些值，然后你就会得到一个值*。*

让我们考虑一个非常简单的函数，它只是减去它给出的两个数字：第一个减去第二个。换句话说，我们将创建一个实现规则“argument #1 - argument #2”的函数。现在，当你为这个函数编写代码时，你需要一些方法来告诉计算机你什么时候想使用参数#1，什么时候你想使用参数#2。在其他一些编程语言中，您必须通过显式指定要使用的参数的编号（#1 或 #2）来做到这一点，但如果您可以为这些值命名，则编写代码会容易得多。因此，与大多数其他语言一样，Python 允许您使用您选择的名称来引用函数的参数。例如，假设您希望参数 #1 位于 name 之下`x`，而参数 #2 位于 name 之下`y`. 你可以这样写：

```
def subtract(x, y): 
```

后面是构成函数的代码。对于减法示例，它将是

```
def subtract(x, y):
    return x - y 
```

当 Python 编译器遇到这种情况时，它会将代码转换为“计算值 #1 - 值 #2 并将其发送回我的调用者”的内部表示。然后它打包该代码块并将其保存在名称下`subtract`（因为这就是您告诉它您想要命名函数的内容）。

希望一旦这段代码完成执行，引用“argument #1”或“argument #2”就没有任何意义了，因为没有函数就不能有参数！同样，一旦函数完成了它的工作，你给参数的标签`x`和`y`, 就不再有任何意义了。标签仅在函数代码的持续时间内存在。这称为*作用域*：将标签限制在它们有意义的代码部分。

因为标签`x`和`y`是*local scoped*，正如人们可能会说的那样，在某种程度上它甚至不重要它们是什么。例如，如果您`subtract`的代码中有 的定义，您可以任意决定将它们更改为`first`and `second`，而您只需要更改该函数中的代码即可。您只需将定义更改为

```
def subtract(first, second):
    return first - second 
```

就是这样 - 您的代码在功能上完全相同。在程序中出现的任何其他地方`x`，`y`它们指的是除此函数的参数以外的其他内容，因此当您重命名参数时不必更改它们。

在您的情况下发生的事情是您试图在`length`为其定义的函数之外的某个地方使用标签（即，您存储为的函数`draw_rectangle`）。Python 知道您不能引用您不在其中的函数的参数，因此它希望您已经定义`length`为其他含义。但你没有。这就是你收到错误的原因。（好吧，那一个错误，无论如何）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-03T05:00:07.073

好的，所以要回答您更一般的问题，python 中的函数在您调用它们时接受参数，这些是通过引用传递的，这意味着您最终在函数内部得到与调用空间中相同的数据。这对于可变类型很重要，因为如果它们在函数内部更改，它们也会在函数外部更改。（str、int、float 和 tuple 是不可变的，dict 和 list 是）。当一个函数返回时，返回令牌之后的值被传回给调用者，所以如果你说`a=input('input? ')`, 函数输入需要一个参数来向用户显示提示，注意这是通过引用传递的，它不是字符串的副本。它返回用户生成的输入，该输入被存储到 a. 您可以从函数返回多个值，它们会自动转换为元组；如果你有

```
def test():
    return 1,2
a,b = test() 
```

您将得到 a=1 和 b=2。必须定义函数内部使用的名称。它们首先在函数内部查找，然后在任何封闭的命名空间中查找，最后在内置函数中查找。不能使用在其他函数中定义的变量，因为它们既不在本地命名空间中，也不在其父命名空间中。要访问这些名称的值，您必须将它们传递给函数，注意函数内部使用的名称不必与函数外部的名称匹配。考虑：

```
def fun1(a):
    return a * 2
def fun2():
    b = 5
    c = fun1(b)
    print c
fun2() 
```

值5以名字b存入内存，然后通过引用传入fun1，这次在名字a下，翻倍返回，（返回也是通过引用），然后将返回值存放在名字下c，然后打印。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-03T04:41:14.237

`return`返回你给它的任何东西给调用者。它不会*自动*使函数内部的局部变量在外部可用（这些是局部变量是*有*原因的！）。还要注意，`return`没有任何参数将返回特殊值`None`（因此它等效于`return None`）。

因此，如果要返回一些值，`return height, length`请在函数内部和`height, length = draw_flag(A)`外部使用。

# hibernate - Struts2 休眠插件

> ID：12701999
> 
> 赞同：0
> 
> 时间：2012-10-03T04:39:26.457
> 
> 标签：hibernate, session, jpa, struts2, struts2-s2hibernate

我正在寻找一个与struts2配合良好的hibernate插件，它可以使用hibernate（JPA）查询数据并在jsp中显示它而不会违反诸如hibernate会话关闭之类的情况。

我正在使用最新的 struts2，Hibernate (JPA)。

使用 Hibernate 的 Spring DAO 或 JPA 更好吗？我更喜欢JPA。

将 Full HIbernate Plugin 与最新的 struts2 和 Hibernate 一起使用是否可行？

请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T21:34:23.333

为了完成这项任务，您不需要完整的休眠插件。您正在寻求实现 Open Session In View 模式。基本上，这个想法是实现一个 servlet 过滤器，它打开一个休眠会话，将控制权传递给过滤器链的其余部分，然后在执行完成后关闭过滤器。以这种方式，您的视图有一个开放的会话可供使用，并最终关闭。但是，需要指出的是，有些人认为这是一种反模式，因为它确实允许您的视图代码通过延迟加载等方式触发大量与数据库相关的操作。这绝对是要记住的事情。

网上有很多例子，通常缩写为 OSIV，这里有一个使用直接休眠的例子，它是我为开源的前雇主编写的。我认为它的原始版本是在 2007 年左右编写的，最近从 SVN 转移到了 GIT：

[https://fisheye.5amsolutions.com/browse/5AMCOM/core/src/main/java/com/fiveamsolutions/commons/web/filter/OpenSessionInViewFilter.java?r=78fe9215dcbdea11ed54e7446bf19f779cb13770](https://fisheye.5amsolutions.com/browse/5AMCOM/core/src/main/java/com/fiveamsolutions/commons/web/filter/OpenSessionInViewFilter.java?r=78fe9215dcbdea11ed54e7446bf19f779cb13770)

他们的开源库的主页包括这里：

[https://www.5amsolutions.com/how-we-do-it/5am-commons](https://www.5amsolutions.com/how-we-do-it/5am-commons)

如果您想使用完整的 JPA 解决方案，spring 确实在 View 过滤器中包含一个 Open Entity Manager：

[http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/orm/jpa/support/OpenEntityManagerInViewFilter.html](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/orm/jpa/support/OpenEntityManagerInViewFilter.html)

自从我多年没有使用 Spring 以来，我没有使用过那个特定的类，但是 Spring 的东西通常效果很好。

关于该主题的最后一个链接是几年前的休眠文档： [https ://community.jboss.org/wiki/OpenSessionInView](https://community.jboss.org/wiki/OpenSessionInView)