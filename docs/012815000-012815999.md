# StackOverflow 问答 12815000-12815999

# memcached - 用 memslap 对 Elasticache 进行基准测试

> ID：12815001
> 
> 赞同：1
> 
> 时间：2012-10-10T08:21:55.643
> 
> 标签：memcached, benchmarking, performance, amazon-elasticache

我正在使用 memslap 对在 Amazon AWS 云中运行的 Elasticache m2.4xlarge 实例进行基准测试。

memslap 从一个 m2.4xlarge Amazon EC2 linux 实例运行。Memslap 在并发级别 256、512 下成功工作，但在并发级别为 1024 时失败。

当我以 concurrency = 1024 运行 memslap 时，我收到以下错误 *getaddrinfo(): Name or service not known Initialization failed*

**如何调整 EC2 实例以使 memslap 以更高的并发级别 (>1024) 工作？**

*ulimit 输出是无限的并且 sysctl -p 显示 'fs.file-max = 300000'*

-桑托什

# c# - RDLC 报告的默认字体

> ID：12815014
> 
> 赞同：7
> 
> 时间：2012-10-10T08:22:51.637
> 
> 标签：c#, reporting-services, rdlc

是否可以在 RDLC 报告中设置默认字体？我有报告我想更改字体，因为我不想在报告的每个元素中更改它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T22:55:19.113

无法使用设计界面更改用于整个报表的字体。但是，如果您尝试用另一种字体替换一种字体，例如用 Verdana 替换 Tahoma，那么您可以打开代码视图（视图 > 代码）并在那里进行查找和替换。

请注意，Arial 是 Reporting Services 报表的默认字体，因此该字体仅在代码中为Arial**以外的字体定义。**如果您需要从 Arial 更改为另一种字体，则必须在设计器中手动执行此操作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-26T08:25:53.663

有一种方法可以做到这一点。这实际上相当简单。在开始之前备份您的 rdl 文件。这个答案需要编写一个简单的应用程序：

将 rdl 作为 XML 文档打开。查找所有 TextRun 节点。在每个中寻找一个 Style 节点。如果没有找到 Style 节点，请添加一个其中包含指定所需字体的 FontFamily 节点。如果找到 Style 节点，则查找 FontFamily 节点。如果找到它，您可以保留它或将值替换为所需的字体，具体取决于您的要求。如果没有 FontFamily 节点，则添加指定字体。

ETA：我有代码，它对我来说非常有用。请注意，这是破坏性的，即。您的文件将被覆盖。

```
pivate static void AddFontsToRdlc(string fileName, string defaultFont)
{
  if (!File.Exists(fileName))
  {
    // Report file does not exist
    return;
  }
  XmlDocument document = new XmlDocument();
  document.Load(fileName);
  string documentNamespace = document.DocumentElement.NamespaceURI;
  XmlNodeList nodes = document.GetElementsByTagName("TextRun");
  bool foundStyle = false;
  bool foundFontFamily = false;
  foreach (XmlNode node in nodes)
  {
    foundStyle = false;
    foundFontFamily = false;
    foreach (XmlNode childNode in node.ChildNodes)
    {
      if (childNode.Name == "Style")
      {
        foundStyle = true;
        foreach (XmlNode styleNode in childNode.ChildNodes)
        {
          if (styleNode.Name == "FontFamily")
          {
            // Change the font here if changing all fonts to the default font
            // Alternatively, specify what font should change to what font with a switch
            foundFontFamily = true;
            break;
          }
        }
        if (!foundFontFamily)
        {
          XmlElement fontElement = document.CreateElement("FontFamily", documentNamespace);
          fontElement.InnerText = defaultFont;
          childNode.AppendChild(fontElement);
        }
        break;
      }
    }
    if (!foundStyle)
    {
      XmlNode styleElement = document.CreateElement("Style", documentNamespace);
      XmlElement fontElement = document.CreateElement("FontFamily", documentNamespace);
      fontElement.InnerText = defaultFont;
      styleElement.AppendChild(fontElement);
      node.AppendChild(styleElement);
    }
  }
  document.Save(fileName);
} 
```

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2012-10-10T09:03:23.553

转到工具 > 选项 > 环境 > 字体和颜色，然后将其更改为所需的字体。

# magento - 如何识别已删除的产品

> ID：12815016
> 
> 赞同：3
> 
> 时间：2012-10-10T08:22:55.910
> 
> 标签：magento

我对magento数据库和已删除项目有疑问，我想找到所有已删除项目，所以我有一个问题：在哪个magento数据库表中，我可以找到标识商店中已删除项目的字段吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T08:56:54.720

据我所知，当您在 Magento 中删除产品时，该产品将从数据库中完全删除。已删除的产品不保存在数据库中，并且无法获取已删除产品的列表或取消删除其中任何一个。

您可能正在寻找的不是删除产品，而是更改产品的状态，即启用或禁用产品。例如，禁用的产品不会显示在前端，而该产品仍保留在数据库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T08:43:08.210

通过 Magento 后台删除产品会将其从系统中完全删除。Magento 没有包含“已删除产品”的表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-27T17:10:05.647

执行了这个查询：

```
SELECT * FROM index_event where entity = 'catalog_product' and entity_pk = [product_id]; 
```

以识别已删除的产品。就像@Prince 所说，所有事件都在`index_event`餐桌上登记。包括删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T09:01:56.450

Magento 保存有关在 index_event 表中添加或删除哪些产品的状态信息。

# string - 文本块上的多个绑定，包括将字符串添加到绑定末尾

> ID：12815019
> 
> 赞同：1
> 
> 时间：2012-10-10T08:23:21.373
> 
> 标签：string, windows-phone-7, binding, textblock

有没有一种方法可以将两个绑定“添加”在一起并向它们添加一些字符串？这很难解释，但可以在 XAML 代码中绑定到 TextBlock，例如：

```
<TextBlock Name="FirstName" Text="{Binding FN}" /> 
```

我想做的是：

```
<TextBlock Name="FirstLastName" Text="{Binding FN} + ', ' + {Binding LN}" /> 
```

所以本质上你会得到这样的东西：

> 院长，格罗布勒

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T08:34:45.157

首先想到的是创建`VM`包含连接值的附加属性：

```
public string FullName
{
    get { return FN + ", "+ LN; }
}

public string FN
{
    get { return _fN; }
    set 
    {
        if(_fn != value)
        {
            _fn = value;
            FirePropertyChanged("FN");
            FirePropertyChanged("FullName");
        }
    }

}

public string LN
{
    get { return _lN; }
    set
    {
        if(_lN != value)
        {
            _lN = value;
            FirePropertyChanged("LN");
            FirePropertyChanged("FullName");
        }
    }
} 
```

另一种可能有帮助的方法是使用转换器。但在这种情况下，我们假设`FN`和`LN`是同一对象的属性：

和

```
public class PersonFullNameConverter : IValueConverter
{

    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (!(value is Person)) throw new NotSupportedException();
        Person b = value as Person;
        return b.FN + ", " + b.LN;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
}

public class Person
{
    public string FN { get; set; }
    public string LN { get; set; }
} 
```

和`VM`：

```
public Person User
{
    get { return _user; }
    set
    {
        if(_user != value)
        {
            _user = value;
            FirePropertyChanged("User");            
        }
    }
} 
```

# java - 在 Windows 7 中使用 Java Web Start 保存证书接受？

> ID：12815022
> 
> 赞同：1
> 
> 时间：2012-10-10T08:23:38.713
> 
> 标签：java, windows-7, certificate, jnlp, java-web-start

我从在线服务器部署了一个带有 Java Web Start (JWS) 的 Java 应用程序。JNLP 文件包含安全`all-permissions`标签，我使用自己的证书对应用程序进行了签名。

对于某些用户 (Windows7+Java7)，Java 虚拟机 (JVM) 每次启动应用程序时都会要求接受未知证书，尽管选中了该框`always trust this unknown editor`。

在正常情况下，JVM 只要求接受一次未知证书，直到其过期。

你有什么想法来解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T08:30:46.173

最后，我意识到 Java 7 不像 Java 6 那样工作。“始终信任这个未知证书”选项隐藏在“显示选项”面板中。我只是忘记睁眼了...

# python - 重复错误

> ID：12815023
> 
> 赞同：0
> 
> 时间：2012-10-10T08:23:39.653
> 
> 标签：python, mysql

我正在使用以下模块来生成唯一 ID。但每天它都会抛出`IntegrityError: (1062, "Duplicate entry '122830001' for key 'PRIMARY'")`第一个贷款。

我无法找到问题的原因。请帮忙？

```
def generate_loanid(leadid='0', counter=0):
    """ Locks the customer_loanid table retrieves maximum loanid from it.
        Generates a new loanid and puts it back in the table.
        Returns the new loanid.
    """
    def gen_id(max_loanid=0, count=0):
        """
        Increments the counter if an id exists for the day.
        Else resets the counter and creates a fresh one.
        """
        timestamp_now = time.localtime()
        if max_loanid:
            logger.debug("""Current Maximum Loan id :
                        (Year(YY)+Julian Day(DDD)+Counter(CCCC) %d,
                        Current timestamp : %s""" %(max_loanid, timestamp_now))
            julian_day = (max_loanid/10000) % 1000
            if julian_day == timestamp_now[7]:
                count = max_loanid % 10000
        return (str(timestamp_now[0])[2:] +
                str(timestamp_now[7]).rjust(3, '0') +
                str(count+1).rjust(4, '0')
                )

    logger.debug("Leadid:%s - Counter:%s"%(leadid, counter))
    db_obj = dbLis(pooling=False)
    try:
        try:
            db_obj.query("lock tables customer_loanid write")
            max_loanid = db_obj.query("select max(loanid) as loanid from customer_loanid")
            curr_loanid = gen_id(max_loanid = max_loanid.__len__() and max_loanid[0].loanid)
            db_obj.insert('customer_loanid', loanid=curr_loanid)
        except (MySQLdb.IntegrityError,MySQLdb.OperationalError):
            logger.warning(traceback.format_exc())
            #There is no logical backing for this piece of code.
            if counter < 3:
                db_obj.query("unlock tables")
                return generate_loanid(counter=counter+1)
            else:
                raise
    finally:
        try:
            db_obj.query("unlock tables")
            logger.debug("Unlocked All Tables")
            db_obj.ctx.db.close()
        except MySQLdb.OperationalError:
            logger.info("Table unlocked already")
            logger.debug(traceback.format_exc())
    logger.info("Generated Loanid : %s"%(curr_loanid))
    return curr_loanid 
```

表结构：

```
CREATE TABLE `customer_loanid` (
  `loanid` int(15) NOT NULL DEFAULT '0',
  PRIMARY KEY (`loanid`)
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T09:11:06.253

您可以在一个查询中完成所有操作：

```
timestamp_now = time.localtime()
day_part_of_id = str(timestamp_now[0])[2:] + str(timestamp_now[7]).rjust(3, '0')
min_id_of_day = day_part_of_id + '0001'

sql = "INSERT INTO customer_loanid (SELECT "+min_id_of_day+" + count(*) FROM customer_loanid WHERE loanid LIKE '"+day_part_of_id+"%'" 
```

# c# - Edmx 缺少外键

> ID：12815028
> 
> 赞同：3
> 
> 时间：2012-10-10T08:24:08.110
> 
> 标签：c#, entity-framework, edmx, database-first

我正在使用实体框架映射我的数据库，使用数据库优先的方法。

问题是`edmx`应该映射我的确切数据库的文件缺少表之间的一些 FK 关系，这导致我更改查询，因为我无法直接访问相关表。

当然，直接在类代码中更改它，每次我在数据库中更改某些内容时它都会被删除（`edmx`重新创建）。

我需要帮助！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T08:30:38.867

当您从数据库创建模型时，有一个标记为“在模型中包含外键列”的复选框 - 确保选中此选项。

有关更多信息，请参阅[本文](http://blogs.msdn.com/b/adonet/archive/2009/11/06/foreign-key-relationships-in-the-entity-framework.aspx)。

# sed - 使用 awk 将字符添加到特定列

> ID：12815030
> 
> 赞同：1
> 
> 时间：2012-10-10T08:24:11.770
> 
> 标签：sed, awk, character, add

我有一个输入文件，我需要将第 3 列 (") 的第一个字符替换为 ("S)

**文件1**：

```
1      2      "45554323"      p      b  
2      2      "34534567"      f      a  
3      3      "76546787"      u      b  
2      4      "56765435"      f      a 
```

**结果**：

```
1      2      "S45554323"      p      b  
2      2      "S34534567"      f      a  
3      3      "S76546787"      u      b  
2      4      "S56765435"      f      a 
```

我试过

```
awk '{gsub(substr($3,0,1),"\"S"); print}' 
```

但它给了我`$3`开头`S`和结尾，比如`"S45554323"S`. 你能给我一个解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T08:27:37.500

尝试：

```
awk 'BEGIN { OFS = "\t"; } { sub( /[[:digit:]]/, "S", $3 ); print }' infile 
```

这会产生：

```
1       2       "S5554323"      p       b
2       2       "S4534567"      f       a
3       3       "S6546787"      u       b
2       4       "S6765435"      f       a 
```

或与`sed`：

```
sed -e 's/\("\)[0-9]/\1S/' infile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:33:22.213

Perl 解决方案：

```
perl -naE '$F[2] =~ s/"/"S/; say join "\t", @F' 
```

如果输出中需要空格，您可能需要将制表符替换为`\t`空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T18:03:09.480

另一种解决方案：

```
awk '{sub(" \"","\"S"); print}' file 
```

结果-1：

```
awk '{sub(" \"","\"S"); print}' file
1      2     "S45554323"      p      b  
2      2     "S34534567"      f      a  
3      3     "S76546787"      u      b  
2      4     "S56765435"      f      a 
```

结果 2：

```
awk '{sub(" \".","\"S"); print}' file
1      2     "S5554323"      p      b  
2      2     "S4534567"      f      a  
3      3     "S6546787"      u      b  
2      4     "S6765435"      f      a 
```

# objective-c - GCD Dispatch - 调用其他方法时发送通知

> ID：12815031
> 
> 赞同：0
> 
> 时间：2012-10-10T08:24:15.857
> 
> 标签：objective-c, ios, grand-central-dispatch

我正在使用 GCD 调度队列在实例化视图控制器时生成一些报告 - 报告用户将能够共享 - 所以我有一个带有 UIActionSheet 的操作按钮。

我的问题是：因为当 ViewController 加载时我在调度队列上生成报告 -*我如何从调度队列向操作按钮方法（其他方法）发送通知 - 是否已完成 - 如果用户决定按下ViewController 加载后的按钮*？

现在，我在主线程上使用了一个 BOOLEAN 标志，当调度队列完成时它会自行切换，并且我在操作按钮上设置了一个条件，如果队列尚未完成，则禁用该按钮。但这不行……因为它可以让用户相信这是错误的。

我想让用户按下操作按钮，显示操作表，让用户按下他/她选择的共享操作，如果队列还没有完成，等到队列完成而不阻塞 UI 然后显示以 MailComposer 为例。

PS 我已经在上面提到的带有 BOOL 标志的操作按钮方法中尝试了一个 while 循环，但是 UI 会阻塞并永远保持该状态。

这是在 viewDidLoad 上生成报告的代码：

```
 dispatch_queue_t emailqueue;

    emailqueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul);

    dispatch_async(emailqueue, ^{
        [reportGenerator generate_Email_Report];
        [reportGenerator generate_PDF_Report];
        dispatch_async(dispatch_get_main_queue(), ^{done = YES;});});

    dispatch_release(emailqueue); 
```

这就是我在操作按钮上使用的：

```
 if (done == YES)
    {
    if (version >= 6.0)
    {
        //UIActivityViewController *shareController = [[UIActivityViewController alloc] initWithActivityItems:@[ profileName.text,profileImage] applicationActivities:nil];
        //[self presentViewController:shareController animated:YES completion:nil];
    }

    else
    {
        UIActionSheet *selectSource = [[UIActionSheet alloc]
                                       initWithTitle:nil
                                       delegate:self
                                       cancelButtonTitle:@"Cancel"
                                       destructiveButtonTitle:nil
                                       otherButtonTitles:@"Send Report To Mail",
                                       @"Send Report PDF To Mail", nil];
        selectSource.delegate = self;
        [selectSource showInView:self.view];
        selectSource.actionSheetStyle = UIActionSheetStyleBlackTranslucent;
    }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:29:33.147

我会使用 NSNotification。您可以添加您喜欢的任何类作为该通知的观察者，并修改您喜欢的任何行为以响应它。只需确保将其发布在主线程上即可。因此，如果您的处理在后台运行，那么每当它完成时，将您的通知发布到主队列以让用户执行您想要的操作。

刚看到你的编辑。如果您不想禁用该按钮，您可以使用 UIActivityIndi​​catorView 显示您的下一个 VC，当您收到通知时，移除微调器，加载视图并让用户执行任何操作。

```
 [[NSNotificationCenter defaultCenter] addObserver:self
    selector:@selector(handleThisNotification:)
    name:WhateverYouDecideToNameYourNotification
object:nil];

    -(void)handleThisNotification {
        //load your view controller and remove the spinner
    } 
```

# spring - 考虑 web.xml 的 Spring MVC 配置

> ID：12815032
> 
> 赞同：2
> 
> 时间：2012-10-10T08:24:20.100
> 
> 标签：spring, model-view-controller, spring-mvc, dispatcher

我是 Spring MVC 的新手，想知道实际流程是如何工作的。

我发现了几个 Spring MVC 示例，通常每个示例都有额外的重定向，即在 web.xml 中，welcome-file 标签会将控件发送到某个 jsp 文件，该文件基本上重定向到与某个域映射的登录表单（例如）。

我在此链接中关注示例， [http://www.dzone.com/tutorials/java/spring/spring-simple-form-controller-1.html](http://www.dzone.com/tutorials/java/spring/spring-simple-form-controller-1.html)

web.xml

```
<servlet>
        <servlet-name>dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet
        </servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>*.htm</url-pattern>
    </servlet-mapping>
    <welcome-file-list>
        <welcome-file>redirect.jsp</welcome-file>
    </welcome-file-list> 
```

重定向.jsp

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<% response.sendRedirect("userRegistration.htm"); %> 
```

所以，为了避免这种重定向，我改变了我的映射， **案例 1**

web.xml

```
<servlet-mapping>
        <servlet-name>mvc-dispatcher</servlet-name>
        <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

mvc-调度程序-servlet.xml

```
<bean id="viewResolver"
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix">
        <value>WEB-INF/jsp/</value>
    </property>
    <property name="suffix">
        <value>.jsp</value>
    </property>
</bean>

<bean id="simpleUrlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
<property name="mappings">
    <props>
        <prop key="/">show</prop>
    </props>
</property>
</bean>

<bean id="show" class="com.jft.common.controller.HelloWorldController"> 
```

HelloWorldController.java

```
public HelloWorldController(){
    setCommandClass(Contact.class);
    setCommandName("customerForm");
    setFormView("index");
} 
```

在这种情况下，它不起作用，并且在日志中显示为

```
No mapping found for HTTP request with URI [/HelloWorldMVC/WEB-INF/jsp/index.jsp] in DispatcherServlet with name 'mvc-dispatcher' 
```

现在，如果我添加额外的重定向并对我的文件进行修改，例如

**案例2**

web.xml

```
<welcome-file-list>
    <welcome-file>redirect.jsp</welcome-file>
</welcome-file-list> 
```

重定向.jsp

```
<% response.sendRedirect("register.html"); %> in redirect 
```

并使我的调度程序 servlet xml 文件为

```
<bean id="viewResolver"
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix">
        <value>WEB-INF/jsp/</value>
    </property>
    <property name="suffix">
        <value>.jsp</value>
    </property>
</bean>

<bean id="simpleUrlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
<property name="mappings">
    <props>
        <prop key="/register.html">show</prop>
    </props>
</property>
</bean>

<bean id="show" class="com.jft.common.controller.HelloWorldController"> 
```

节目

在这种情况下一切正常。

在前一种情况下发生了什么，在再次找到 formView 名称后，它将进入调度程序 servlet 以查找 /HelloWorldMVC/WEB-INF/jsp/index.jsp 的映射。

在案例 1 中，我得到的是，

我将 url 模式保留为 /* 用于调度程序 servlet，因此第一个请求将作为“localhost:8080/HelloWorldMVC/”出现；将被拦截，我有该节目的映射，它转到控制器并获取页面，即“索引”，在应用前缀和后缀后它变成“/HelloWorldMVC/WEB-INF/jsp/index.jsp”，现在又是搜索此请求的映射，我的问题是为什么它再次搜索？当我通过重定向方式时不会发生这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:38:23.473

为“index.jsp”添加映射

```
<bean id="simpleUrlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
<property name="mappings">
    <props>
        <prop key="/index.jsp">show</prop>
    </props>
</property>
</bean> 
```

在 web.xml 中，您已经定义了调度程序 servlet

```
<servlet-mapping>
        <servlet-name>mvc-dispatcher</servlet-name>
        <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

这意味着将每个请求发送到spring调度程序servlet
（`simpleUrlMapping`它有助于调度程序servlet找出映射），您应该提供特定的映射而不是映射，`/`即映射所有请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T10:45:52.823

在 redirect.jsp 的第一个案例中，您将请求重定向到“userRegistration.htm”，因此 Spring 将尝试从键“userRegistration.htm”中查找映射，因为您定义了 SimpleUrlMapping，但它找不到任何名称为“userRegistration.htm”的映射正如您指定的键“/”。如果您将此键值更改为“userRegistration.htm”，它将起作用

在第二种情况下，您将重定向页面更改为“register.html”，Spring 将能够在文件中找到键映射，因为您提到了这个 key="register.html"。因此它将密钥映射到控制器并成功运行。

希望这很清楚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-22T05:31:40.253

**

> 带有以下扩展名的呼叫页面

**

```
<a href="finalPage.htm">Demo</a> 
```

**在 web.xml 中映射**

```
<servlet-mapping>
<servlet-name>dispatcher</servlet-name>
<url-pattern>*.htm</url-pattern>
</servlet-mapping> 
```

**控制器**

```
@RequestMapping(value = "finalPage.htm", method = RequestMethod.GET)
public String finalPage() 
{
   return "final";
} 
```

# c# - C# - 手动调用 GC.Collect()（禁用后台 GC）

> ID：12815035
> 
> 赞同：1
> 
> 时间：2012-10-10T08:24:22.457
> 
> 标签：c#, garbage-collection

我想比较我在 C++ 和 C# 中的垃圾收集的性能。可以`GC.Collect()`手动调用吗？（我想在特定时刻运行它。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T08:26:35.190

除了使用不安全代码之外，没有办法在 C# 中禁用垃圾收集。您*可以*`System.GC.Collect()`通过调用或其各种重载之一来强制垃圾收集器运行。

完整的 MSDN 文档：http: [//goo.gl/gc7mQ](http://goo.gl/gc7mQ)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-10T08:43:47.120

 ~~~~您可以触发一个特定类的处置。当上下文退出 时，一个已经`IDisposeable`实现并在`using`上下文中运行的类将被释放。`using` `MyLogger logger = new MyLogger("time.dat"); logger.log("before using"); using (MyDisposableClass myClass = new MyDisposableClass()) { logger.log("before execution"); myClass.doingSomething() logger.log("after execution"); logger.log("before dispose"); } logger.log("after dispose");`~~

这实际上是错误的 - 请参阅评论。~~

# joomla2.5 - 在joomla中根据不同的注册表单支付不同的用户类型

> ID：12815036
> 
> 赞同：0
> 
> 时间：2012-10-10T08:24:27.160
> 
> 标签：joomla2.5, membership, usertype

我有两种用户类型“零售商”和“私人”，但我想为这两种用户类型和不同的付款方式打开不同的注册表单，所以我怎么做意味着我使用哪个组件或任何插件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:25:15.630

Virtuemart 能够为不同的用户类型提供不同的定价选项。

如果您希望不同的用户类型也有不同的付款类型，那么您需要在结帐的付款部分添加一些自定义代码，以仅显示当前用户组可用的类型。

# android - 我应该在哪里停止服务？

> ID：12815040
> 
> 赞同：1
> 
> 时间：2012-10-10T08:24:41.427
> 
> 标签：android, android-service

我的应用程序中有一个广播接收器。当我收到广播时，我将内容传递给服务以对其进行解码。

```
public class Receiver extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {
    if (intent.getAction().equals("xxx.yyy.zzz")) {
        Log.d("Receiver", "Intent received from server!");

        byte[] data = intent.getByteArrayExtra("Data");
        String params = intent.getStringExtra("Params");

        Intent i = new Intent(context, DecodeService.class);
        i.putExtra("Data", data);
        i.putExtra("Params", params);

        context.startService(i);
    }
  }
} 
```

根据内容，我从该服务开始适当的活动。

现在我有一些关于如何管理这项服务的问题。

*   我应该在哪里停止这项服务？我应该在从它开始一个活动后停止它并在我收到广播时重新开始它吗？或者我应该让它在应用程序处于活动状态时运行并在应用程序退出时停止它。

*   绑定到这个服务有什么好处？我可以绑定到广播接收器的服务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:27:11.150

好像您`Service`只是用来解码和启动`Activity`. 相反，我建议您放弃服务部分并尝试适应解码和从`BroadcastReceiver`课堂上启动您的活动。

对于简单的任务，不要参与服务。在不使用服务时，预期应用程序的行为会容易得多。

如果您真的想使用服务，那么我建议您阅读有关[**IntentService**](http://developer.android.com/reference/android/app/IntentService.html)的内容。它也是一种在后台运行的服务，在单独的线程上完成其工作并在最后自动被终止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T08:46:28.850

首先，如果您的解码部分不耗时（网络通信等），您最好在`BroadcastReceiver`. 如果您真的想使用服务..

您可以在启动服务后立即停止服务`Activity`（虽然不建议从服务启动 Activity，但您可以`Notification`改用）。

您不能从 绑定到服务`BroadCastReceiver`，因为`bindService()`它是异步的，并且[文档](http://developer.android.com/reference/android/content/BroadcastReceiver.html)说一旦`onReceive()`返回`BroadCastReceiver`就可以免费进行垃圾收集。

# elisp - elisp：在插入中打印字符串的长度

> ID：12815041
> 
> 赞同：2
> 
> 时间：2012-10-10T08:24:41.410
> 
> 标签：elisp

我正在尝试在缓冲区中插入 lisp 列表的长度，如下所示：

```
(insert "The list has " (length my-list) " elements") 
```

然而，这会产生一个奇怪的不可打印字符而不是元素的数量，所以结果类似于

```
The list has ^A elements 
```

我必须转换返回值吗？该列表不为空。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T08:31:28.943

你需要这个`format`功能。

```
(insert (format "The list has %d elements" (length my-list))) 
```

或者，在这种情况下，您可以将整数转换为字符串：

```
(insert "The list has " (number-to-string (length my-list)) " elements") 
```

Control-A 是 ASCII 代码 1。显然，当您尝试时，您的列表只有一个元素。

# arduino - 802.1x 和 Arduino 以太网

> ID：12815043
> 
> 赞同：0
> 
> 时间：2012-10-10T08:24:50.480
> 
> 标签：arduino, ethernet, atmega

Arduino 以太网似乎不适用于部署了[802.1x的环境。](http://en.wikipedia.org/wiki/IEEE_802.1X)

将 Windows/Mac 笔记本电脑连接到同一端口时，可以“取消”或不启动证书身份验证，在这种情况下，企业可以选择将设备连接到“开放”网络。

是否可以使用 Arduino 以太网提供这种“基本”功能？

Arduino 或[ATmega](http://en.wikipedia.org/wiki/Atmel_AVR#Device_overview)微控制器中 802.1x 的状态如何？

# django - 全局视图中的 Django 动态导航块

> ID：12815046
> 
> 赞同：0
> 
> 时间：2012-10-10T08:25:06.643
> 
> 标签：django, django-templates, django-views

我想在视图中创建一个简单的导航块，它是全局布局视图。

我认为，我可以使用自定义包含标签来做到这一点，但是我怎样才能获得当前请求 URL，因为我想确定当前 URL 并将其设置为导航块中的活动项目。我怎样才能得到一些全局请求变量或者我需要任何其他方法？

```
#templatetags/menutags.py
@register.inclusion_tag('menu.html')
def show_menu():
    categories = Categories.object.all()
    return {'categories': categories}

#templates/base.html
{% include menutags %}
<!DOCTYPE html>
<html lang="en">
<head></head>
<body>
    {% show_menu %}
    {% block content %}{% endblock %}
</body>
</html>

#templates/view.html
{% extends "base.html" %}
{% block content %}<div>...</div>{% endblock %} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:55:26.193

试试这个：

```
@register.inclusion_tag('menu.html', takes_context = True)
def show_menu(context):
    categories = Categories.object.all()
    path= context['request'].path
    return {'categories': categories,'path':path} 
```

# gmail - GMail 撰写电子邮件替换变量

> ID：12815047
> 
> 赞同：1
> 
> 时间：2012-10-10T08:25:14.263
> 
> 标签：gmail

是否可以在 GMail 中发送带有变量的电子邮件？

我想做类似的事情：

```
Hello %email%, 
```

在此示例中，我希望将 %email% 替换为接收我的电子邮件的实际电子邮件。如果我发送给多个接收者，这也应该有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T20:44:27.640

这是不可能的。我今天早些时候与谷歌谈过这件事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:37:18.977

听起来您正在寻找邮件合并功能。您说的是原生 Gmail 网络客户端吗？如果是这样，答案是否定的。如果不是，请澄清您的问题。

你可以做这样的事情，[http://www.labnol.org/internet/personalized-mail-merge-in-gmail/20981/](http://www.labnol.org/internet/personalized-mail-merge-in-gmail/20981/)

搜索 Gmail 邮件合并，您可以找到其他一些解决方案。

# .net - 如何获取当前正在执行的 OrderedTest 的名称

> ID：12815051
> 
> 赞同：3
> 
> 时间：2012-10-10T08:25:24.453
> 
> 标签：.net, visual-studio-2010, unit-testing, mstest, ordered-test

我有一些包含测试方法的有序测试。一些测试方法用于多个有序测试。

```
<?xml version="1.0" encoding="UTF-8"?>
<OrderedTest name="orderedtest_A" ...>
  ...
  <TestLinks>
    <TestLink id="..." name="testmethod_A" ... />
    <TestLink id="..." name="testmethod_B" ... />
    <TestLink id="..." name="testmethod_G" ... />
    <TestLink id="..." name="testmethod_Z" ... />
  </TestLinks>
</OrderedTest> 
```

和

```
<?xml version="1.0" encoding="UTF-8"?>
<OrderedTest name="orderedtest_B" ...>
  ...
  <TestLinks>
    <TestLink id="..." name="testmethod_A" ... />
    <TestLink id="..." name="testmethod_M" ... />
    <TestLink id="..." name="testmethod_E" ... />
  </TestLinks>
</OrderedTest> 
```

如您所见，在`testmethod_A`执行 时，我需要获取当前正在运行**的有序测试的名称**，例如.`orderedtest_A``orderedtest_B`**`orderedtest_B`**

 **我知道我可以通过读取属性来获取当前正在运行的**测试**`TestContext.TestName`方法的名称（例如`testmethod_B`）

如果每种测试方法仅用于一个有序测试中，这会很好（然后我可以读取所有`*.orderedtest`xml 文件并搜索具有给定名称的测试方法） - 但事实并非如此！（如上所述：见`testmethod_A`）

在 VS2010 中，经常使用有序测试的名称：

*   在测试列表编辑器中
*   在测试结果列表中
*   在测试视图中

所以也许有*可能*读取有序测试的名称，但还有一种方法可以在运行时获取它吗？

*（顺便说一句 - 确切地说，我想要测试的名称，因为它显示在测试结果列表中。）***

# ruby - 助力车：重命名 mongodb 集合

> ID：12815054
> 
> 赞同：1
> 
> 时间：2012-10-10T08:25:39.730
> 
> 标签：ruby, mongodb, mongoid3, moped

如何使用 Mongoid + Moped 驱动程序重命名集合？

是否有[http://docs.mongodb.org/manual/reference/command/renameCollection/](http://docs.mongodb.org/manual/reference/command/renameCollection/)的轻便摩托车实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:22:01.593

重命名集合是一个严重的变化，并且在分片环境中不起作用。

但是，您可以通过使用（可能）admin db 和 db 命令的应用程序来做到这一点。所以我可能会看看：[轻便摩托车司机文档](http://mongoid.org/en/moped/docs/driver.html#behaviour)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-04T20:00:39.823

我最近刚刚迁移到 Mongoid 7.x 并且会话不再存在（现在是客户端）

API 似乎已删除 .rename() 因此您可以使用它：

```
client = Mongo::Database.new(Mongoid.default_client, Mongo::Database::ADMIN, Mongoid.default_client.database.options)
client.command(renameCollection: "#{source_db}.#{source_collection}", 
    to: "#{target_db}.#{target_collection}", dropTarget: true) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-12T23:04:20.643

可以通过[Moped::Collection#rename](https://github.com/mongoid/moped/blob/master/lib/moped/collection.rb#L57)方法重命名集合。

这是一个示例，将“foo”集合重命名为“bar”：

```
Mongoid::default_session[:foo].rename("bar") 
```

在引擎盖下，命令的构造如下：

```
session.
  with(database: "admin", read: :primary).
  command(renameCollection: "#{database.name}.#{name}", to: "#{database.name}.#{to_name}") 
```

# php - 配置 Apache 以阻止 PHP 脚本调用远程 IP

> ID：12815058
> 
> 赞同：-1
> 
> 时间：2012-10-10T08:25:47.063
> 
> 标签：php, apache, .htaccess

我想知道如何配置 apache（使用 .htaccess 或任何其他方式），以便拒绝可能包含某种后门、函数、对未识别服务器的调用的 php 脚本/文件从远程服务器调用或接收数据。

我在具有 SSH 访问权限的 Linux 共享主机上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T08:32:40.643

Apache 与此无关。Apache 只是一个 Web 服务器，它接受传入的 HTTP 请求并将其交给 PHP 脚本。这个 PHP 脚本以任何用户的完全权限运行，它无论如何都不受 Apache 的控制。

锁定 PHP 配置以禁用允许它与外部任何东西通信的任何扩展或设置，或者使用防火墙规则或`hosts`文件中的条目锁定系统，以防止整个系统联系某些特定的外部地址。
在共享主机上，您可能无法执行任何操作。

# codeigniter - Codeigniter 在表单提交后给出空白页

> ID：12815061
> 
> 赞同：0
> 
> 时间：2012-10-10T08:25:56.200
> 
> 标签：codeigniter, activerecord, login

我正在为codeigniter开发一个登录系统，提交登录表单后，页面只是空白。我有以下代码，插入了 echo 以帮助我找出问题所在。

我在 index.php 模式中设置了开发模式，在 php.ini 中设置了 E_ALL 并在其他一些页面上成功接收错误。

/account/login 的控制器：

```
public function login()
{
    echo "made it back into controller";
    $this->load->helper('form');
    $this->load->library('form_validation');

    $data['title'] = "Log in";

    $this->form_validation->set_rules('username', 'Username', 'trim|required|xss_clean');
    $this->form_validation->set_rules('password', 'Password', 'trim|required|xss_clean');

    if ( $this->form_validation->run() === FALSE )
    {
        echo "unable to validate";
        $this->load->view('templates/header', $data);
        $this->load->view('account/login', $data);
        $this->load->view('templates/footer', $data );
    } 
    else
    {
        echo "attempting to login";
        if ( $this->account_model->login() == FALSE ) 
        {
            echo "failed";
            $this->load->view('templates/header', $data);
            $this->load->view('account/login', $data);
            $this->load->view('templates/footer', $data );
        }
        else
        {
            echo "success";
            $this->load->view('templates/header', $data);
            $this->load->view('account/successfullogin', $data);
            $this->load->view('templates/footer', $data );
        }
    }

} 
```

模型中的 login() 方法，由控制器调用：

```
public function login ()
{

    require 'application/libraries/PasswordHash.php';

    $t_hasher = new PasswordHash(8, FALSE);
    $password = $this->input->post('password');
    $hash = $t_hasher->HashPassword($password);
    echo "hashed";

    $query = $this->db->query('SELECT `login_token` FROM `Users` WHERE `username` = "'.$this->input->post('username').'" AND `password` = "'. $this->input->post('password').'"');

    echo "query made";
    $rowCount = $query->num_rows();
    echo "query counted";

    if ( $rowCount == 1 ) {
        echo "found row";
        $token = $query->result_array();
        echo "found token";
        $this->input->set_cookie( 'session_token', $token['login_token'], time()+259200, '/', 'notyetcreated.phpfogapp.com');
        echo "cookie created";
        return TRUE;
    } else {
        echo "no beans";
        return FALSE;
    }
} 
```

使用我设置的调试消息，在提交表单后，我得到“让它回到控制器尝试登录”，就是这样。关于可能导致它的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:43:20.987

在控制器中更改此条件

```
 if ( $this->form_validation->run() === FALSE ) 
```

[您可以在http://ellislab.com/codeigniter/user_guide/libraries/form_validation.html](http://ellislab.com/codeigniter/user_guide/libraries/form_validation.html)了解更多信息

# java - 如何在字符串中的“|”之后在新行中打印数据

> ID：12815063
> 
> 赞同：1
> 
> 时间：2012-10-10T08:25:57.920
> 
> 标签：java, android

```
map.put("RowID", String.valueOf(RowID));
map.put(KEY_NAME, parser.getValue(e, KEY_NAME)); 
```

解析后我得到数据

```
13/2012 | Section 10(15), item (h) of sub-clause (iv) of the Income-tax Act, 1961 - Exemptions - Interest on bonds/debentures - Notified bonds/debentures of Public Sector Companies - Corrigendum to notification no.7/2012, dated 14-2-2012 
```

我想分开`|`并打印这样的数据

```
13/2012 Section
10(15), item (h) of sub-clause (iv) of the Income-tax Act, 1961 - Exemptions - Interest on bonds/debentures - Notified bonds/debentures of Public Sector Companies - Corrigendum to notification no.7/2012, dated 14-2-2012 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T08:31:49.360

使用 String.replace()。

例如：

```
 String s = "hello | world";

    System.out.println(s.replace("|", "\n")); 
```

这打印出来：

你好
世界

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T08:28:36.987

您可以使用[`String#replace`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29)方法：

```
String finalString = oldString.replace("|", "\n"); 
```

或使用[`String#split`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)：

```
String[] splitted = oldString.split(Pattern.quote("|")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T08:36:53.877

独立于平台（在您使用 android 时并不严格需要）

```
System.out.println(yourString.replaceAll("\\|", System.getProperty("line.separator")); 
```

这将取代所有 | 以及如果您的字符串有多个 |

# c# - 如何使用 ASP.net C# 和 ExtJS 4 制作上传进度条？

> ID：12815069
> 
> 赞同：0
> 
> 时间：2012-10-10T08:26:27.423
> 
> 标签：c#, javascript, upload, extjs4, progress-bar

这是当前代码：JS：

```
var files = new Array();

function () {
                var me = this;

                for (var i = 0; i < files.length; i++) {
                    var formData = new FormData();

                    formData.append('files', files[i]);
                    formData.append('folderId', (Ext.ComponentQuery.query('#treePanel')[0]).getSelectionModel().getSelection()[0].data.id);

                    var xhr = new XMLHttpRequest();

                    xhr.open('post', '/File/Upload', true);
                    xhr.onreadystatechange = function () {
                        if (xhr.readyState == 4 && xhr.status == 200) {
                            me.getUserSessionStore().load();
                            me.getFilesStore().load();
                        }
                    };
                    xhr.send(formData);
                } 
```

}

和 C#：

```
[Authorize]
    [HttpPost]
    public ActionResult Upload(HttpPostedFileBase files, long folderId)
    {
        var user = new UsersModel().GetUserByEmail(User.Identity.Name);

        if (files != null)
        {
            string x = Path.GetExtension(files.FileName);

            if (new FilesModel().GetFileTypes().ToList().Where(a => a.ftp_extension == x.TrimStart('.')).Count() != 0)
            {
                var dbPath = new FilesModel().GetPaths().First();
                var fileName = Path.GetFileNameWithoutExtension(files.FileName);
                var fileType = new FilesModel().GetFileTypes().ToList().First(a => a.ftp_extension == x.TrimStart('.'));
                Directory.CreateDirectory(Server.MapPath("/Temp/") + user.usr_id);
                var path = Path.Combine(Server.MapPath("/Temp/") + user.usr_id + "/", fileName);
                files.SaveAs(path);
                Directory.CreateDirectory(dbPath.pth_path + "/tmp/" + user.usr_id + "/");
                if (System.IO.File.Exists(Server.MapPath("/Temp/" + user.usr_id + "/" + fileName)))
                    System.IO.File.Move(Server.MapPath("/Temp/" + user.usr_id + "/" + fileName), dbPath.pth_path + "tmp/" + user.usr_id + "/" + fileName);

                var fileId = new FilesModel().CreateFile(user.usr_id, fileName, false, "", fileName, 1, fileType.ftp_id, user.usr_id, folderId);

                if (System.IO.File.Exists(dbPath.pth_path + "tmp/" + user.usr_id + "/" + fileName))
                    System.IO.File.Move(dbPath.pth_path + "tmp/" + user.usr_id + "/" + fileName, dbPath.pth_path + new Pass().getMd5Hash(fileId.ToString()));
                return Content("{success:true, result:\"File uploaded correctly\"}");
            }
            else
            {
                return Content("{success:false, error:\"Unsupported file type\"}");
            }
        }
        return new JsonResult()
        {
            ContentType = "text/html",
            Data = new { success = false, error = "File uploaded error" }
        };
    }
} 
```

如何制作一个进度条来表示服务器端的上传进度？我如何获得`SaveAs`（如果可能的话）的上传进度，如果不是我必须改变什么？

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T10:11:21.223

当您在那里迭代您的文件列表时，请在客户端解决它。从脚本更新进度条客户端应该是微不足道的。

从服务器上的活动更新进度条需要从服务器到客户端的回调（您可以使用 SignalR）或从客户端轮询。这两种选择都需要大量的工作才能做到正确。

我觉得你不是一个经验丰富的程序员，所以除非这是你自己的宠物项目，否则我会选择第一个选项。

# facebook - Facebook“喜欢”按钮正在发布旧信息

> ID：12815072
> 
> 赞同：-1
> 
> 时间：2012-10-10T08:26:38.530
> 
> 标签：facebook, facebook-like

Facebook的“Like”按钮正在发布我网站的旧信息；光跳网。当它应该说“国际平面设计”时，它在 Facebook 上显示为“萨拉索塔平面设计”。我已经更改了页面上的元标记，并按照本网站其他地方的建议通过 Facebook 调试器运行它，但它仍然显示错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:42:47.763

那是因为 facebook 已经缓存了旧的元数据，你需要对你的页面进行 lint 以便它更新他们的缓存数据。这是之前提出的类似问题，答案已发布在此处：[刷新已发布 URL 中的元数据](http://facebook.stackoverflow.com/questions/6754078/refresh-meta-data-in-posted-url/6754506#6754506)

# java - Java 中的海量数据处理/HPC - 建议我如何开始

> ID：12815073
> 
> 赞同：2
> 
> 时间：2012-10-10T08:26:47.797
> 
> 标签：java, multithreading, design-patterns, data-mining, hpc

我正在考虑解决一个编程问题，我想我需要了解很多高级编程概念。由于某些原因，我决定用 Java 编写代码——即使我并不精通它。因此，我希望您在建议、指导、资源指针、书籍、教程或任何您认为相关的通用建议方面为我提供帮助。

这是我的问题的基本**性质：**

1.  我需要创建一个**客户端-服务器架构**。服务器支持多个并发客户端。客户端向它发送简单的指令（可能是服务器公开某种 API/在特定端口上运行侦听器），服务器执行指令并将结果发送回客户端。

2.  服务器的主要工作是根据给它的指令进行大量的数据处理。它从后端数据库/文件系统获取数据。数据量可轻松飙升至~ **200GB-700GB**。数据通常会流式传输到它，但在处理过程中可能需要在内存缓存中保存大量数据（如果 RAM 不够，则将其分页到磁盘）。计算本质上通常是**数值密集型**的（假设取矩阵的逆）

3.  服务器应该能够进行**多线程**处理（我不知道这个术语在 Java 中是什么意思，我希望服务器应该能够在多个并行子进程中分发作业。）

4.  服务器本身应该非常轻量级。我**不需要任何 GUI**界面。

5.  如果我以某种方式设计它，这样我以后可以将它与**Hadoop**等 HPC 框架集成，那就太好了。

现在如果我必须这样做，我需要学习什么样的编程？顺便说一句，我对 OOP 有很好的理解，我对数据结构和算法有点熟悉，我知道基本的 Java（以前从未在 Java 中做过任何网络或多线程编程，但使用过*典型的 oop 概念、泛型、可比较的接口等。*）。我主要从事*数据库编程*工作，但过去也做过很多 C、C++、C#、Python。

鉴于要求和我的背景，请提出建议，

1.  我应该如何开始这个项目？构建项目的方法是什么？
2.  我应该先创建一些基本的 API 定义，然后再开始处理细节吗？
3.  我应该遵循任何特定的设计模式吗？从哪里学习它们？
4.  我需要在 Java 中学习什么以及从哪里学习它们？
5.  在内存中读取大量数据的最佳方法是什么？Java nio 是好的解决方案吗？
6.  如果我用大量数据实例化一个类，它会工作吗？（例如，假设我有一个 Vector 类来表示具有数百万个元素的矩阵，并且该类的构造函数读取内存中的大量数据集）。处理它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T09:56:43.190

首先，我想说的是，根据您对事物的解释，您似乎可以很好地使用 java 作为服务器端语言。

您选择的客户端服务器架构类型可能取决于您实际服务的客户端类型。它们是典型的基于 GUI 或 CUI 的桌面客户端还是 Web 客户端。

在后一种情况下，您可以以正常方式使用 Spring Framework，而对于前一种情况，您可以进一步探索 Spring 对 Restful Web 服务的支持。我建议不要使用基于套接字或 TCP 的网络解决方案或使用 java 网络。

Spring`RESTful API`为您提供了对网络和多线程等事物的非常酷的抽象，即使对于基于桌面的客户端也是如此。在桌面客户端的情况下，您可以使用 JSON/XML 作为响应，并且可以使用`HttpClient`库来调用服务器，这是对底层网络内容的非常酷的抽象。

进一步，Spring 的设计模式遵循`linear`数据流。您的许多基本设计考虑因素都由 Spring 本身使用`Dependency Injection`，`Inversion of Control`并且非常易于合并。

对于与特定需求相关的设计模式的详细分析，我建议您阅读名为Publications 的书，作者`Java Design Patterns: A Tutorial`是.`Addison Wesley``James W. Cooper`

关于 API 设计的另一件事。您最好先创建一个 API 规范，然后再进一步实施它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T08:47:49.300

您需要定义客户端和服务器如何相互通信。最简单的方法是使用已建立的协议，例如 HTTP，通过创建客户端无需太多编码即可调用的 REST 服务。

大多数支持 HTTP 的框架都会创建多个在不同线程中运行的侦听器。这为您提供了开箱即用的多线程。

我建议调查一下我更喜欢 Spring Controllers。弹簧的重量相当轻。

如果您想使用这些框架，您将希望快速找到它们，并将它们合并到您的应用程序中进行编译和打包。

我建议为此研究 Maven。这是一个很大的节省时间。特别是使用原型来创建项目的文件夹结构，以及自动下载依赖项及其依赖项。

最后我的智慧之言。确保您的服务是单例无状态服务。这意味着您只创建一次对象，并且每个线程使用相同的对象。发生的垃圾收集要少得多。这在处理大量请求时会产生巨大的差异。

注意不要在这些服务中使用类级别的变量来保存状态。如果这样做，不同的线程将覆盖彼此的数据。

# mongodb - 如何从 Mongo 获取更新的对象

> ID：12815078
> 
> 赞同：0
> 
> 时间：2012-10-10T08:27:09.280
> 
> 标签：mongodb, symfony, doctrine-odm

我有一个匹配文档，上面有 ReferenceMany(Scores)。当我向匹配添加新分数并返回匹配时，新分数不存在。但是，在下一个请求中，分数就在那里。如何强制 Doctrine 在同一个请求中更新我的匹配？

代码：

```
$match = $dm->getRepository('Match')->find($matchId);
// Save score.
$dm->persist($score);

// Add score to match
$match->addScores($score);

$dm->flush(); // <-- This doesn't help.

return $match; // <-- Is missing the new Score. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:08:38.650

我找到了两个解决我的问题的方法：

1.  重定向到 GET 匹配，而不是在同一个请求中返回。它有效，但感觉有点尴尬。

2.  最后做`$dm->createQueryBuilder('Match') ->field('_id')->equals($id) ->refresh(TRUE) ->getQuery() ->execute();`从数据库中获得刷新的匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:02:37.687

你试过`$dm->flush();`吗`$dm->persist($score);`？

# java - 找不到链表的符号错误

> ID：12815081
> 
> 赞同：-1
> 
> 时间：2012-10-10T08:27:14.380
> 
> 标签：java

```
import java.util.*;

class BallList{
    private LinkedList<Integer> list = new LinkedList<Integer>();

    public BallList(int n){
        for (int i = 0; i < n; i++){
            list.add(i+1);
        }
    }

    public void DoAxy(int num1, int num2){
        Iterator iterator = list.iterator();
        int count = 0;
        while (iterator.hasNext()){
            count++;
            if (iterator.next().equals(num1)){
                break;
            }
        }
        int index = count;
        list.remove(num2);
        list.add(index,num2);
    }

    public void DoBxy(int num1, int num2){
        Iterator iterator = list.iterator();
        int count = 0;
        while (iterator.hasNext()){
            count++;
            if (iterator.next().equals(num1)){
                break;
            }
        }

        int index = count-1 ;
        list.remove(num2);
        list.add(index,num2);
    }

    public void DoRemove(int num){
        list.remove(num);
    }

    public LinkedList <Integer> getList(){
        return list;
    }
}

class Balls2{
    public static void main(String[] args){
        int num_balls, num_ops;
        String op;

        Scanner sc = new Scanner(System.in);

        num_balls = sc.nextInt();
        num_ops = sc.nextInt();

        BallList Arrayballs = new BallList(num_balls);

        for (int i = 0; i < num_ops; i++){
            op = sc.next();
            if (op.equals("A")){
                int ball_1 = sc.nextInt();
                int ball_2 = sc.nextInt();
                Arrayballs.DoAxy(ball_1, ball_2);
            }
            else if (op.equals("B")){
                int ball_1 = sc.nextInt();
                int ball_2 = sc.nextInt();
                Arrayballs.DoBxy(ball_1, ball_2);
            }
            else{
                int ball = sc.nextInt();
                Arrayballs.DoRemove(ball);
            }
        }
    }
    LinkedList<Integer> listballs = Arrayballs.getList();

} 
```

当我运行上面的代码时，我得到了错误：

```
Balls2.java:80: error: cannot find symbol
    LinkedList<Integer> listballs = Arrayballs.getList();       
                                    ^
  symbol:   variable Arrayballs
  location: class Balls2
1 error 
```

谁可以帮我这个事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T08:30:37.687

这里的缩进没有帮助，但是您正在执行该行

```
LinkedList<Integer> listballs = Arrayballs.getList(); 
```

在`main`方法之外；由于 Arrayballs 是该方法的局部变量，因此无法从外部访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T08:38:33.413

`Arrayballs`您已经在您的方法内部进行了实例化，`main`并且您正试图从外部访问它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T08:33:53.973

您正在调用`Arrayballs.getList()`main 方法。它应该在里面 请检查大括号

# sqlite - 期望结果的 SQLITE 查询

> ID：12815082
> 
> 赞同：1
> 
> 时间：2012-10-10T08:27:16.977
> 
> 标签：sqlite

我有格式为 (CUSTOMER) 的表格（图 1.1）

```
M_CODE  H_CODE END_TIME_OF_SERVICE ADULT ADULT_F
TKLK    LONE     09:19:16           1     2
TKLK    LONE     09:22:11           4     6
TKLK    LONE     09:32:46           2     7
TKLK    LONE     09:32:46           4     9
TKLK    LONE     10:09:36           1     3 
```

如果我运行（ SELECT strftime('%H:%M', end, '-9 minutes') || ' - ' || strftime('%H:%M', end ) AS time_slot FROM end_times ）它给出正确的输出为（图 - 1.2）

```
09:19 - 09:28
09:29 - 09:38
09:39 - 09:48
09:49 - 09:58
09:59 - 10:08
10:09 - 10:18 
```

你能指导如何映射这两个表，假设CUSTOMER表中的记录应该总结为adult和adult_f列（图1.2到图1.1）

```
 ADULT    ADULT_F    TIME_SLOT
      5        8      09:19 - 09:28
      6       16      09:29 - 09:38
      0        0      09:39 - 09:48
      0        0      09:49 - 09:58
      0        0      09:59 - 10:08
      1        3      10:09 - 10:18 
```

请指导我一个解决方案，感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T09:14:28.153

首先，我们必须以我们可以轻松比较的格式获取开始/结束时间（我们可以稍后将它们组合起来）：

```
SELECT strftime('%H:%M', end, '-9 minutes') AS slot_start,
       strftime('%H:%M', end              ) AS slot_end
FROM end_times 
```

然后我们可以将它加入到`CUSTOMER`表中，同时忽略秒数：

```
SELECT ADULT,
       ADULT_F,
       slot_start,
       slot_end
FROM (SELECT strftime('%H:%M', end, '-9 minutes') AS slot_start,
             strftime('%H:%M', end              ) AS slot_end
      FROM end_times)
     LEFT JOIN CUSTOMER
     ON substr(END_TIME_OF_SERVICE, 1, 5) BETWEEN slot_start AND slot_end 
```

最后，我们按插槽分组以获得每个插槽的总和。我正在使用[`total`](http://www.sqlite.org/lang_aggfunc.html#sumunc)而不是`sum`使值为零`NULL`：

```
SELECT total(ADULT),
       total(ADULT_F),
       slot_start || ' - ' || slot_end
FROM (SELECT strftime('%H:%M', end, '-9 minutes') AS slot_start,
             strftime('%H:%M', end              ) AS slot_end
      FROM end_times)
     LEFT JOIN CUSTOMER
     ON substr(END_TIME_OF_SERVICE, 1, 5) BETWEEN slot_start AND slot_end
GROUP BY slot_start 
```

# java - 如何在 Java 地图中深入搜索？

> ID：12815086
> 
> 赞同：0
> 
> 时间：2012-10-10T08:27:33.053
> 
> 标签：java, map

我对 Java 很陌生。我编写了使用红黑树的代码：

```
 TreeMap test = new TreeMap();
            Map mainMap = new HashMap<>();
            Map tempMap = new HashMap<>();
            List<Integer> list = new ArrayList<>();

            tempMap.put("Visa Credit Card",447747);
            list.add(421323);
            list.add(421630);
            list.add(455451);
            list.add(469375);
            tempMap.put("Visa Debit card",list);

            tempMap.put("Master Card Credit Card",523951);
            tempMap.put("Master Debit Card",5399);

            mainMap.put("ICCI",tempMap);
            mainMap.put("Next",1234);

            test.put("Values",mainMap);

            System.out.println(mainMap); 
```

打印出以下内容：

```
{Next=1234, ICCI={Master Card Credit Card=523951, Visa Debit card=[421323, 421630, 455451, 469375], Master Debit Card=5399, Visa Credit Card=447747}} 
```

正如我所料。但是在这张地图中，我需要在地图中搜索一些值，例如`455451`. 如果这样做，我应该得到输出：

`Visa Debit card, ICCI`.

是否可以在地图上进行搜索？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T08:31:37.000

> 但是在这张地图中，我需要在地图中搜索一些值，例如 455451。

基本上，您需要遍历所有键/值对：

```
for (Map.Entry<String, List<Integer>> entry : map.entrySet()) {
    if (entry.getValue().contains(targetValue)) {
        System.out.println(entry.getKey());
    }
} 
```

显然这不是非常有效 - 如果你需要做很多，你可能还想创建一个反向映射，并保持两者同步。

您可能还想查看[Guava](http://guava-libraries.googlecode.com)的`Multimap`类型。

# perl - perl 中的 glob() 是否仍然存在不可预测的行为？

> ID：12815091
> 
> 赞同：7
> 
> 时间：2012-10-10T08:27:49.370
> 
> 标签：perl, filesystems

我在 2000 年的聊天板上引用的 PerlFaq 中发现了这条智慧。

> glob() 中是否存在泄漏/错误？
> 
> 由于某些操作系统上的当前实现，当您在标量上下文中使用 glob() 函数或其尖括号别名时，可能会导致泄漏和/或不可预测的行为。因此最好只在列表上下文中使用 glob()。

我读到这个问题在 Perl 5.6 中已修复，但后来听到报告说它仍然出现在 5.10.1

有没有人对最近的问题有任何经验，在哪里可以找到有关此问题的明确答案？

[稍后..] 最新的 PerlFAQ 说：

> 5.18: glob() 中是否存在泄漏/错误？
> 
> （由布赖恩·d·福伊提供）
> 
> 从 Perl 5.6.0 开始，“glob”在内部实现，而不是依赖于外部资源。因此，“glob”的内存问题在现代 perls 中不是问题。

=====

最后：被报告的问题是由于 glob 在已经给出所有匹配项之后在循环中使用它而误用了它。没有问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T09:46:16.943

使用源卢克和提交历史

[http://perl5.git.perl.org/perl.git/history/HEAD:/ext/File-Glob](http://perl5.git.perl.org/perl.git/history/HEAD:/ext/File-Glob)

更新：虽然那个长期过时的 perlfaq5 项目在[5.14中存在，但它在](http://perldoc.perl.org/5.14.2/perlfaq5.html#Is-there-a-leak/bug-in-glob%28%29?)[最新](http://perldoc.perl.org/perlfaq5.html#Is-there-a-leak/bug-in-glob%28%29?)版本中消失了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-21T19:24:04.750

我刚刚使用 Perl **5.14.2在****Debian Wheezy**上进行了测试。

 **## 标量上下文 - 惨遭失败

```
sub test
{
    my $dir = shift;
    my $oldDir = cwd();

    chdir($dir) or die("Could not chdir() : $!");
    my $firstEntry = glob('*');
    print "$firstEntry\n";
    chdir($oldDir) or die("Could not chdir() : $!");    
}

# /tmp/test1 (contains file1 and file2)
test('/tmp/test1); # Display file1 which is expected

# /tmp/test2 (contains file3 and file4)
test('/tmp/test2'); # Display file2 which is not expected 
```

## 列出上下文（按预期工作）

```
sub test
{
    my $dir = shift;
    my $oldDir = cwd();

    chdir($dir) or die("Could not chdir() : $!");
    (my $firstEntry) = glob('*');
    print "$firstEntry\n";
    chdir($oldDir) or die("Could not chdir() : $!");    
}

# /tmp/test1 (contains file1 and file2)
test('/tmp/test1); # Display file1 which is expected

# /tmp/test2 (contains file3 and file4)
test('/tmp/test2'); # Display file3 which is expected 
```

要在这里恢复，glob`buffer`不会被刷新，即使我们超出了调用者范围。

使用 perl **5.22-1**，两种情况都按预期工作（标量上下文）。**

# iphone - 使用 fetchedresultcontroller 为每个月设置不同的部分

> ID：12815093
> 
> 赞同：1
> 
> 时间：2012-10-10T08:28:04.730
> 
> 标签：iphone, objective-c, ios, ipad, core-data

我正在尝试将我的表格视图拆分为每个月的部分。我开始使用 Apple 的[DateSectionTitles](http://developer.apple.com/library/ios/#samplecode/DateSectionTitles/Introduction/Intro.html)示例。首先，我在我的核心数据库中添加了一个属性“sectionIdentifier”。然后在我的 managedobject 子类中我添加了这个方法。

```
- (NSString *)sectionIdentifier {

    // Create and cache the section identifier on demand.

    [self willAccessValueForKey:@"sectionIdentifier"];
    NSString *tmp = [self primitiveSectionIdentifier];
    [self didAccessValueForKey:@"sectionIdentifier"];

    if (!tmp) {
        /*
         Sections are organized by month and year. Create the section identifier as a string representing the number (year * 1000) + month; this way they will be correctly ordered chronologically regardless of the actual name of the month.
         */
        NSCalendar *calendar = [NSCalendar currentCalendar];

        NSDateComponents *components = [calendar components:(NSYearCalendarUnit | NSMonthCalendarUnit) fromDate:[self date]];
        tmp = [NSString stringWithFormat:@"%d", ([components year] * 1000) + [components month]];
          [self setPrimitiveSectionIdentifier:tmp];
    }
    NSLog(@"tmp: %@",tmp);
    return tmp;
} 
```

这就是我在 titleForHeaderSection 中所做的

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
        id <NSFetchedResultsSectionInfo> theSection = [[self.fetchedResultsController sections] objectAtIndex:section];

    /*
     Section information derives from an event's sectionIdentifier, which is a string representing the number (year * 1000) + month.
     To display the section title, convert the year and month components to a string representation.
     */
    static NSArray *monthSymbols = nil;

    if (!monthSymbols) {
        NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
        [formatter setCalendar:[NSCalendar currentCalendar]];
        monthSymbols = [formatter monthSymbols];
    }

    NSInteger numericSection = [[theSection name] integerValue];

    NSInteger year = numericSection / 1000;
    NSInteger month = numericSection - (year * 1000);

    NSString *titleString = [NSString stringWithFormat:@"%@ %d", [monthSymbols objectAtIndex:month-1], year];
    NSLog(@"titelstring is: %@",titleString);
    return titleString;
} 
```

对于我的 rowsInSection 数量，我这样做。

```
id <NSFetchedResultsSectionInfo> sectionInfo = [[self.fetchedResultsController sections] objectAtIndex:section];

        NSInteger count = [sectionInfo numberOfObjects];
        return count; 
```

这对于我的 NumberOfSectionsInTableview

```
NSInteger count = [[self.fetchedResultsController sections] count];
        return count; 
```

有人可以帮忙吗？

提前致谢！

**出了什么问题**

首先，它不会在 NSLog(@"tmp: %@",tmp); 中打印我的日志。而且我还收到以下错误：

```
CoreData: error: (NSFetchedResultsController) A section returned nil value for section name key path 'sectionIdentifier'. Objects will be placed in unnamed section
2012-10-10 10:41:17.475 RacingGenk[15785:c07] *** Terminating app due to uncaught exception 'NSRangeException', reason: '-[__NSCFArray objectAtIndex:]: index (-1 (or possibly larger)) beyond bounds (12)' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-22T02:53:16.797

通常为 nsmanagedobject 编码瞬态属性的一个常见错误是人们忘记在数据模型文件 (xcdatamodeld) 中也“启用”瞬态属性。

# c++ - tee ostream 的 C++ 正确清理重定向缓冲区

> ID：12815096
> 
> 赞同：0
> 
> 时间：2012-10-10T08:28:22.757
> 
> 标签：c++, ostream

我需要将消息输出到控制台和日志文件。谷歌搜索后，我学习了“teebuf”概念，它基本上创建了一个从 basic_streambuf 继承的自定义类。这工作正常，但如何正确清理重定向的缓冲区。我的意思是如何为“tee”缓冲区实现 RAII，所以每次我需要退出程序时都不需要打扰它。

**备注**：目前使用 boost 库对我来说不是一个选项。

**代码段**

```
int main() {
    std::streambuf* cout_sbuf = std::cout.rdbuf();
    std::ofstream   fout(fileOutDebug);
    teeoutbuf       teeout(std::cout.rdbuf(), fout.rdbuf());
    std::cout.rdbuf(&teeout);

    // some code ...
    if (failed) {
        std::cout.rdbuf(cout_sbuf); // <-- i once comment this and it gives error
        return -1;
    }

    // some more code ...
    std::cout.rdbuf(cout_sbuf); // <-- i once comment this and it gives error
    return 0;
} 
```

**代码段*（我的试用实现，但失败）***

```
template < typename CharT, typename Traits = std::char_traits<CharT>
> class basic_tostream : std::basic_ostream<CharT, Traits>
{
    public:
        basic_tostream(std::basic_ostream<CharT, Traits> & o1,
                       std::basic_ostream<CharT, Traits> & o2)
    : std::basic_ostream<CharT, Traits>(&tbuf), 
      tbuf(o1.rdbuf(), o2.rdbuf()) {}
        void print(char* msg);
    private:
    basic_teebuf<CharT, Traits> tbuf; // internal buffer (tee-version)
};
typedef basic_tostream<char> tostream;

int main() {
    std::ofstream fout(fileOutDebug);
    tostream tee(std::cout, fout, verbose);
    tee << "test 1\n"; // <-- compile error
    tee.print("sometext"); // <-- comment above and it run fine, both file and console written
} 
```

错误消息：“std::basic_ostream”是“basic_tostream”的不可访问基础

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:33:25.310

你应该使用：

```
template < typename CharT, typename Traits = std::char_traits<CharT> >
class basic_tostream : public std::basic_ostream<CharT, Traits> 
```

代替：

```
template < typename CharT, typename Traits = std::char_traits<CharT> >
class basic_tostream : std::basic_ostream<CharT, Traits> 
```

关键区别在于`public`。这就是`'std::basic_ostream' is an inaccessible base of 'basic_tostream'`错误消息的内容。

# ember.js - 动作处理程序不适用于视图本身

> ID：12815100
> 
> 赞同：0
> 
> 时间：2012-10-10T08:28:42.210
> 
> 标签：ember.js

动作处理程序不能直接在视图实例上工作吗？

我不想在视图中附加一个动作处理程序，而是直接将它附加到整个视图本身上。

示例 jsFiddle：http: [//jsfiddle.net/t3wdG/](http://jsfiddle.net/t3wdG/)

**更新：**

我的目标是委托给 parentView 上的特定功能（在本例中为撤消、重做）。我有 buttonView 的原因是因为在单击每个按钮时，我想对它做一些事情，例如向它添加一个 css 类。

所以实际上，我希望我的所有按钮在单击时为自己添加一个类，然后委托给父视图上的单独功能。

这可能使用这种方法吗？

这是更新的 jsFiddle：http: [//jsfiddle.net/xvkgk/](http://jsfiddle.net/xvkgk/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:14:16.297

推荐的解决方案是创建一个自定义视图子类。然后，您可以在子类中添加一个自动`click`处理`click`事件的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T10:19:07.703

好的，我认为没有内置的 ember 方法可以做到这一点，但请检查这个 jsfiddle，它似乎可以按您的预期工作：http: [//jsfiddle.net/xvkgk/8/](http://jsfiddle.net/xvkgk/8/)

# javascript - 如何通过使用 jQuery 变小来创建一个 div 慢慢下降到某物上的印象？

> ID：12815104
> 
> 赞同：0
> 
> 时间：2012-10-10T08:29:03.220
> 
> 标签：javascript, jquery, css, html

我知道如何创建动画，但我所做的只是看起来 div 正在调整大小。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:36:55.080

我会建议你使用 jqueryUI

看到这个效果

[JQUERY-UI](http://jqueryui.com/effect/#default) .查看`transfer effect`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:43:54.887

创建两个类，然后使用 switchClass 你的第一个类将在效果之前，第二个将在效果之后。 [http://docs.jquery.com/UI/Effects/switchClass](http://docs.jquery.com/UI/Effects/switchClass)

我建议通过 css 尝试动画，它会提供更好的控制。 [http://daneden.me/animate/](http://daneden.me/animate/)

# lisp - Common Lisp 中标准对象和标准类的层次结构

> ID：12815105
> 
> 赞同：10
> 
> 时间：2012-10-10T08:29:04.390
> 
> 标签：lisp, common-lisp, clos

我正在学习 Common Lisp（使用 Lispworks），我现在正试图进入课堂系统。有一个称为**标准对象**的类，它被定义为

> 类**standard-object**是**standard-class**的实例，并且是除自身之外的所有作为**standard-class实例的类的超类。**

（取自[http://www.lispworks.com/documentation/HyperSpec/Body/t_std_ob.htm#standard-object](http://www.lispworks.com/documentation/HyperSpec/Body/t_std_ob.htm#standard-object)）所以它是**标准类的一个实例**

另一方面，**标准类**是**标准对象的子类**

```
>(subtypep 'standard-class 'standard-object)
=>T, T 
```

标准对象如何既是标准类的超类又是它的实例？如果我们将标准类定义为子类型，我们应该*在定义它的超类型（例如标准对象）之后*定义它，那么超类怎么会成为实例呢？还是我的逻辑错了？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-10T09:44:26.833

![在此处输入图像描述](../Images/3270cae40a33a3ddd5a61c09ba945f34.png)

CLOS 是一个对象系统，其中 CLOS 概念本身就是一流的对象。类本身就是元类的实例。有一些循环性。

有一个实例`standard-object`。它是 的一个实例`standard-class`。它本身就是一个类。所有标准 CLOS 对象都将其作为超类。还有其他类型的对象，例如结构。`standard-object`所有典型 CLOS 对象的超类也是如此。

`standard-class`是自身的实例。它是所有类对象的类。由于`standard-object`也是一个类，所以该类的实例是该类`standard-object`的一个实例`standard-class`。由于所有标准类也是 CLOS 对象，因此`standard-class`继承自`standard-object`.

```
CL-USER 22 > (class-of (find-class 'standard-object))
#<STANDARD-CLASS STANDARD-CLASS 40F016A063> 
```

`standard-object`类对象的类是`standard-class`。

```
CL-USER 23 > (class-of (find-class 'standard-class))
#<STANDARD-CLASS STANDARD-CLASS 40F016A063> 
```

`standard-class`类对象的类是`standard-class`。

```
CL-USER 24 > (find-class 'standard-object)
#<STANDARD-CLASS STANDARD-OBJECT 40F017732B> 
```

类`standard-object`本身就是一个对象和一个类。它是所有 CLOS 对象的超类。

```
CL-USER 25 > (find-class 'standard-class)
#<STANDARD-CLASS STANDARD-CLASS 40F016A063> 
```

类`standard-class`本身就是一个对象和一个类。它是所有 CLOS 类的超类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T09:14:19.647

要理解这一点，您需要了解`meta class`. 元类的实例是类，类的实例是对象，所以基本上我们有 3 级层次结构。

`standard-class`是一个元类。`standard-object`是元类的一个实例，`standard-class`因此它是类。默认情况下，所有其他用户定义的类都继承自`standard-object`类。

所以当你创建一个类时，你基本上是在实例化`standard-class`元类，这个新类是由类继承的`standard-object`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T11:42:19.643

我将尝试只回答一个似乎让您感到困惑的问题：

> 标准对象如何既是标准类的超类又是它的实例？

我希望你熟悉数学中的关系概念。在具有操作的集合上定义的关系。关系的例子包括“被整除”、“是一个”、“等于”等。所以，“是的实例”是一个关系，“是一个子类”也是一个关系。它们绝不相同！子类*必须*是类，实例可能是类，但通常是别的东西。如果你从自然界举个例子：灵长类动物是哺乳动物的一个子类——这就是“是一个子类”的关系。Lassie（电影中的一条狗）是一种哺乳动物——这是“is instance of”关系的一个例子。

现在，可能让您感到困惑的是，某物的功能，即其他某物的“实例”，是该某物的类。这在自然界中确实不会发生太多，但这是我能想到的：

语言和语法。语法是定义语言的一组规则，语法本身也是一种语言（即它“是”语言的子类），而语言实例化语法规则，因此语言“是”语法的一个实例。

# php - 如何使用 PHP 正确检索 JSON 字符串？

> ID：12815108
> 
> 赞同：1
> 
> 时间：2012-10-10T08:29:23.537
> 
> 标签：php, jquery, ajax

我正在尝试将 JSON 发送到我的 PHP 脚本，并且由于某种原因`null`在警报消息中返回。

我在 Stack Overflow 和其他论坛上进行了搜索，并使用了其他人的示例，但不知何故我一直弄错了。我签入了 Firebug，请求正在发送中。我对处理 JSON 查询非常陌生。

谁能指出我做错了什么，以便我下次可以学习？

我的 jQuery 代码：

```
 var name = $('#formName').val();
  var regno = $('#formRegNo').val();
  var charityinfo = $('#formCharityInfo').val();
  var searchimprove = $('#formSearchImprove').val();
  var finantialaid = $('#formFinantialAid').val();
  var contactname = $('#formContactName').val();
  var contactphonenumber = $('#formContactPhoneNumber').val();
  var contactfaxnumber = $('#formContactFaxNumber').val();
  var contactemail = $('#formContactEmail').val();
  var website = $('#formWebsite').val();
  var address = $('#formAddress').val();
  var postcode = $('#postCode').val();

    var arrayData = {"name":name,"regno":regno,"charityinfo":charityinfo,"searchimprove":searchimprove,"finantialaid":finantialaid,"contactname":contactname,"contactphonenumber":contactphonenumber,"contactfaxnumber":contactfaxnumber,"contactemail":contactemail,"website":website,"address":address,"postcode":postcode};
    console.log(name);

    $.ajax({  
  url: "test.php",  
  type: "POST",  
  dataType: "json",  
  contentType: "json",  
  async: false,
  data: arrayData,
 success : function(response) {                            
                    alert(response);            
              },
              error: function(){
                    alert("error");
              }
  }); //End AJAX 
```

我的 PHP 代码：

```
<?php
$return = $_POST;
echo json_decode($return);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:43:17.797

首先你不需要自己创建json

使用`JSON.stringify()`函数函数创建`JSON`

或者你也可以使用jquery`serialize()`函数

```
var arrayData=$("FORMID").serialize();
$.ajax({  
  url: "test.php",  
  type: "POST",  
  dataType: "json",  
  contentType: "json",  
  async: false,
  data: arrayData,
  ..... 
```

`json_decode()`并使用函数解码此 json 服务器端

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T08:34:00.733

首先，在 1 步中收集您的表单数据，将其序列化为 json：

```
var arrayData = $('#my_form_id').serialize(); 
```

如果您发布您的数据，您应该发布适当的发布变量名称。添加一些更具描述性的错误处理：

```
$.ajax({  
      url: "/test.php",  
      type: "POST",  
      data: 'mydata = ' + arrayData,
      success : function(response) {                            
        alert(response);            
      },
      error: function (xhr, ajaxOptions, thrownError) {
        alert(thrownError);
      }
    }); 
```

然后在 php 端拿起它：

```
$mydata = $_POST['mydata'];
$arrayData = json_decode($mydata);
var_dump($arrayData); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T08:35:12.160

1.  您尚未将要发送的数据编码为 JSON。您正在将一个对象传递给 jQuery 并允许它对其进行编码（as `application/x-www-form-urlencoded`）。您需要将[数据编码为 JSON](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)并将字符串传递给`data:`.
2.  `json`不是内容类型，`application/json`是。
3.  `$_POST`从`application/x-www-form-urlencoded`or填充`multipart/form-data`，它不包含原始发布请求。你需要使用[`php://input`](https://stackoverflow.com/questions/2731297/file-get-contentsphp-input-or-http-raw-post-data-which-one-is-better-to)来获得它。

# extjs - ExtJS：如何使用动态字段集检查多个已克隆的字段集 ExtJS？

> ID：12815111
> 
> 赞同：1
> 
> 时间：2012-10-10T08:29:28.030
> 
> 标签：extjs, extjs3, fieldset

正如我上面的询问标题，有人可以帮助我检查 ExtJS 中已克隆字段集的计数吗？这用于验证我的表单。（我使用 ExtJS 3.0）

这是 Fieldset ExtJS 的一段代码配置：

```
nameSpace: 'person',
xtype: 'fieldset',
title: 'Person',
autoHeight: true,
collapsible: true,
maxOccurs: 5,
dynamic: true, 
```

这是我验证的逻辑算法（如果 maxOccurs 配置设置为 5）：

```
field = fieldset.count;
if (field < maxOccurs) then
   alert("fieldset must be already five to be added!")
end if; 
```

**现在解决了！谢谢MMT的建议！谢谢你的堆栈溢出！**

我在这个字段集之外使用了一个面板，现在我用这段代码解决了我的问题：

```
var personPanel = Ext.getCmp('PersonPanel');
var personLength = personPanel.extract('person','fieldset');

if(personLength.length < 5) {
   alert("fieldset must be already five to be added!");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T04:51:11.557

**现在解决了！**

我在这个字段集之外使用了一个面板，现在我用这段代码解决了我的问题：

```
var personPanel = Ext.getCmp('PersonPanel'); //with id "PersonPanel" on a Ext.form.Panel attribute
var personLength = personPanel.extract('person','fieldset'); //"person" is namespace of fieldset

if(personLength.length < 5) {
   alert("fieldset must be already five to be added!");
} 
```

# javascript - 重点区域待完成

> ID：12815120
> 
> 赞同：2
> 
> 时间：2012-10-10T08:29:58.603
> 
> 标签：javascript, jquery

在我的拖放游戏中，有一个网格填充了对用户隐藏的单词。游戏的目的是借助声音和图片拼写这些单词。用户通过将相关字母拖放到网格上来拼写单词。

目前，用户可以将字母拖放到突出显示区域（单词）的任何位置，脚本会将其滑动到位。这一切都很好，但我想突出显示用户应该放下字母的单词中的实际位置。

目前突出显示的单词被称为“.spellword”，它发出紫色光。我创建了一个名为“.spellLetter”的类，它发出白色的光，我想指示要插入的空间。有人可以帮忙吗？

这是将类应用于网格的脚本...

```
 $('.drag').draggable({
    helper: 'clone',
    snap: '.drop',
    grid: [62, 62],
    revert: 'invalid',
    snapMode: 'center',
    start: function() {
        var validDrop = $('.drop-box.spellword');
        validDrop.addClass('drop');
        makeDroppables();
        $(right).val('');
        $(wrong).val('');
    }

}); 
```

小提琴帮助 - [http://jsfiddle.net/smilburn/Dxxmh/57/](http://jsfiddle.net/smilburn/Dxxmh/57/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T09:22:53.827

我已经编辑了你的小提琴。在[这个](http://jsfiddle.net/Dxxmh/62/)版本中，当您开始拖动时，spellLetter 类将应用于该字母的所有可能目标（具有相同数据字母属性的可放置对象）我添加到拖动开始处理程序的语句是：

```
$('.spellword[data-letter="'+e.target.getAttribute("data-letter")+'"]').addClass('spellLetter') 
```

即找到所有当前活动的spellword类的元素，并且数据字母与当前拖动的元素相同，并将类spellLetter添加到它们。

这是你要求的吗？

编辑：[改进](http://jsfiddle.net/Dxxmh/65/)，以便在您不拖动时停止目标突出显示

# c# - 在 LINQ-To-SQL 中使用返回表达式的方法

> ID：12815121
> 
> 赞同：3
> 
> 时间：2012-10-10T08:30:04.640
> 
> 标签：c#, linq-to-sql, expression

我正在尝试将计算列添加到从 SQL 表创建的 linq 对象中。我无法在数据库中执行此操作。

```
public partial class History_SHIP
{
    public Expression<Func<DateTime>> TransactionDateTime
    {
        get
        {
            return () => TransactionDate.AddMinutes(SqlMethods.DateDiffMinute(TransactionTime, new DateTime(1900, 1, 1)));
        }
    }
} 
```

我希望能够将它用作 where 子句的一部分，如下所示：

```
where sh.TransactionDateTime >= startDate 
```

`startDate`是一个`DateTime`并且`sh`是我的`History_SHIP`对象。

我也希望能够在 select 语句中轻松使用它（我很高兴创建另一个执行 a 的属性`TranslationDateTime.Compile()()`）。

我对 where 子句的问题是 a 中的 LHS`Expression<Func<DateTime>>`和 RHS 是 a `DateTime`，所以它会抱怨。

* * *

我已经看到了这个链接[http://www.codeproject.com/Articles/32968/QueryMap-Custom-translation-of-LINQ-expressions](http://www.codeproject.com/Articles/32968/QueryMap-Custom-translation-of-LINQ-expressions)但不想要这个属性的额外依赖项（无论如何现在）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:54:13.457

是的，由于各种原因，这不会让人高兴；

*   首先，LINQ 解释器可以直接处理——它需要帮助
*   其次，实现的属性返回与 相关的东西`this`，但实际上我们需要与 a `ParameterExpression`(aka `sh`)相关的东西

最简单的做法可能是添加一个扩展方法，让您可以方便地对此进行过滤，例如通过重写`Expression`：

```
var filtered = source.WhereTransactionDate(when => when > DateTime.Now); 
```

实施：

```
static class Utils
{
    static readonly Expression<Func<Foo, DateTime>> tranDateTime =
            x => x.TransactionDate.AddMinutes(SqlMethods.DateDiffMinute(
                     x.TransactionTime, new DateTime(1900, 1, 1)));

    public static IQueryable<Foo> WhereTransactionDate(
        this IQueryable<Foo> source,
        Expression<Func<DateTime, bool>> predicate)
    {
        var visited = SwapVisitor.Swap(predicate.Body,
              predicate.Parameters.Single(), tranDateTime.Body);
        var lambda = Expression.Lambda<Func<Foo, bool>>(
              visited, tranDateTime.Parameters);
        return source.Where(lambda);
    }

    class SwapVisitor : ExpressionVisitor
    {
        public static Expression Swap(Expression source,
             Expression from, Expression to)
        {
            return new SwapVisitor(from, to).Visit(source);
        }
        private SwapVisitor(Expression from, Expression to)
        {
            this.from = from;
            this.to = to;
        }
        readonly Expression from, to;
        public override Expression Visit(Expression node)
        {
            return node == from ? to : base.Visit(node);
        }
    }
} 
```

这样做是合并两个表达式树，即

```
x => x.TransactionDate.AddMinutes(SqlMethods.DateDiffMinute(
                     x.TransactionTime, new DateTime(1900, 1, 1))) 
```

和：

```
when => when > DateTime.Now 
```

用第一个表达式中的主体替换所有`when`内容（并使用第一个表达式中的参数），即创建

```
x => x.TransactionDate.AddMinutes(SqlMethods.DateDiffMinute(
           x.TransactionTime, new DateTime(1900, 1, 1))) > DateTime.Now; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:45:40.660

怎么样...

```
where sh.TransactionDateTime.Compile().Invoke() >= startDate 
```

# c# - 服务调用后对象引用丢失

> ID：12815127
> 
> 赞同：0
> 
> 时间：2012-10-10T08:30:21.523
> 
> 标签：c#, wcf

在 WCF-Service 调用之后，是否有一种简单的方法可以保持从一个对象到另一个对象的引用？这是一个小示例：

```
Class1 obj1 = new Class1();
obj1.Tag = "foo";

Class2 obj2 = new Class2();
obj2.Class1 = ob1; 
```

因此，当我将 obj1 的标记属性更改为“bar”时，obj2.obj1.Tag 显然也会导致“foo”。但是当我将第二个对象传递给 WCF-Service 并尝试在那里执行相同的操作时，这种行为就会丢失。有没有可能实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T08:35:16.190

您需要`[DataContract(IsReference=true)]`在您的类型上使用。有关详细信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/cc656708.aspx)。

# java - 使用 RTMPT 时 Red5 在几秒钟后崩溃

> ID：12815129
> 
> 赞同：1
> 
> 时间：2012-10-10T08:30:23.667
> 
> 标签：java, flash, streaming, red5

我们已经有这个问题很长时间了，但仍然无法找出问题所在。我们的应用程序使用 RTMP 进行视频流传输，如果 webclient 无法连接，它会跳到 RTMPT（RTMP over HTTP）。这会导致视频在播放几秒钟后冻结。

我已经找到了一些论坛，人们似乎在讨论同样的问题，但所提出的解决方案都没有奏效。一个建议是关闭视频录制，但没有奏效。我也读过，这似乎是 red5 中的线程问题，但在入侵 RED5 之前，我想知道是否有人有补丁或任何修复它的东西。

还有一件事，如果这应该算的话，我们已经在 Mac 上进行了测试。非常感谢您提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:58:08.200

您可以查看的另一件事是您的 Web 服务器日志文件，因为 RTMPT 是基于 HTTP 的。我曾经在服务器上遇到过我的反 DDOS 程序的问题。RTMPT 会一个接一个地建立许多连接，这些 TCP 连接默认保持活动约 4 分钟。您可以轻松地同时获得数百个连接被视为 DDOS 攻击，因此客户端的 IP 地址将被禁止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T10:37:29.207

您应该首先查看的是 red5/error 日志。此外，Red5 偶尔会产生可能*不在*日志中但只是到普通 std.out 的输出。有一个 red5-debug.sh 或 red5-highpref.sh 可以将所有内容输出/记录到名为 std.out 的文件中。您应该使用这些日志来开始您的分析。最终你会看到一些东西。例如异常，如：

*   破管子
*   连接因 xxx 太长而关闭
*   握手错误
*   数据包 xyz 中的编码问题
*   意外连接关闭
*   呼叫 xyz 无法处理
*   太多联系
*   堆空间错误
*   打开的文件太多

其中一些是特定于操作系统的，例如打开文件的数量。有些不是。

同样重要的是您使用的是 Red5 的最新版本而不是旧版本。您没有告诉我们您使用的是什么版本。

*然而，仅仅从视频冻结**偶尔断开*或类似的症状，您将无法开始对问题进行真正的分析。

塞巴斯蒂安

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T14:58:33.013

视频冻结时您是否连接到服务器？还是在那之后？我不确定，但我认为连接关闭导致流冻结。只需检查 Red5 的访问日志，如果有任何“空闲”数据包的日志（可能在“发送”数据包之后并且超过一个数字）。

# python - Django Web 服务器在启动守护程序后挂起

> ID：12815133
> 
> 赞同：2
> 
> 时间：2012-10-10T08:30:40.540
> 
> 标签：python, django, web

我使用 Django 开发服务器启动一个守护进程，它执行来自views.py 的所有命令，但网页挂起。守护进程正常启动，但需要修复网页挂起。我在 Red Hat Enterprise Linux 6.3 下工作。

为了确保这不是我或我的守护程序错误，我执行了以下测试：

1）我创建了新的 Django 项目“djtesting”，其中创建了一个带有以下代码的 views.py 文件（它启动了 httpd 守护程序）：

```
from django.http import HttpResponse
import subprocess

def hello(request):
    res = subprocess.call("/usr/sbin/httpd")
    return HttpResponse("Testing.") 
```

2) 在 urls.py 中添加这个函数：

```
from django.conf.urls.defaults import patterns, include, url
from djtesting.views import hello

urlpatterns = patterns('',
    ('^hello/$', hello),
    ) 
```

[3）然后我用“python manage.py runserver 192.168.1.226:8000”启动网络服务器，并在浏览器中用“ http://192.168.1.226:8000/hello/](http://192.168.1.226:8000/hello/) ”打开网页。尽管守护程序正常启动，但它显示“测试”消息然后挂起（开始加载并挂起）。但是如果用“/etc/init.d/httpd stop”停止守护进程，网页将停止加载。似乎服务器正在等待守护程序完成工作，但我只需要启动它而不等到它结束。

我尝试了另一种运行守护进程的方法（当然每次尝试一行），但结果同样糟糕：

```
thread.start_new_thread(os.system, ('/usr/sbin/httpd',))
process = subprocess.Popen("/usr/sbin/httpd", stdout=subprocess.PIPE, stdin=subprocess.PIPE, shell=True)
res = subprocess.call(["/usr/sbin/httpd", "&"])
res = subprocess.Popen("/usr/sbin/httpd")
res = os.system("/usr/sbin/httpd &")
res = os.spawnl(os.P_NOWAITO, '/usr/sbin/httpd', '&') 
```

我发现了类似的问题，但由于我在 RHEL6.3 下工作，我无法使用 start-stop-daemon： [为什么在底层服务器上启动守护程序后挂起网页？](https://stackoverflow.com/questions/4949727/why-hangs-the-web-page-after-it-started-a-daemon-on-the-underlying-server?lq=1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T22:34:15.613

`subprocess.call`等待返回值，所以我很惊讶您能够获得返回值。尝试`subprocess.Popen`改用，因为这会产生过程，然后将控制权返回给您，而不是等待结束。

# javascript - KnockoutJS - 当 remove 不是函数时如何从 observableArray 中删除对象？

> ID：12815135
> 
> 赞同：1
> 
> 时间：2012-10-10T08:30:45.340
> 
> 标签：javascript, knockout.js, knockout-2.0

我有一个带有嵌套数组的数组结构。我试图从嵌套数组中删除一个项目，但我收到“删除不是函数”的错误。

我在一个简单的 jsFiddle - [http://jsfiddle.net/rswailes/gts5g/](http://jsfiddle.net/rswailes/gts5g/)中重新创建了这个问题，并粘贴了下面的代码。

我设置可观察对象的方式可能不正确，但我很难过。

这是我的html：

```
<script id="bookGroupTemplate" type="text/html">
    <br/>
    <h3><span data-bind="text: group_name"></span></h3>
    <table>
        <thead>
            <tr>
                <th>Author</th>
                <th>Title</th>
                <th>Genre</th>
                <th></th>
            </tr>        
        </thead>
        <tbody data-bind='template: {name: "bookRowTemplate", foreach: books}'></tbody>        
    </table>
</script>

<script id="bookRowTemplate" type="text/html">
    <tr>
        <td data-bind="text: author"></td>
        <td data-bind="text: title"></td>
        <td data-bind="text: genre"></td>        
    </tr>
</script>

<h1>Books!</h1>

<div data-bind='template: {name: "bookGroupTemplate", foreach: bookGroups}'></div>

<br/><br/>
<button data-bind="click: function(){viewModel.handleButtonClick(); }">Move One From Now to Later</button> 
```

这是javascript：

```
var BookGroup = function(group_name, booksToAdd){
    var self = this;

    this.group_name = ko.observable(group_name);
    this.books = ko.observableArray();

    _.each(booksToAdd, function(book){
        self.books.push(ko.observable(book));            
    });        
}   

var Book = function(author, title, genre) {
    this.author = ko.observable(author);
    this.title = ko.observable(title);
    this.genre = ko.observable(genre);
}

var PageViewModel = function() {
    var self = this;
    this.bookGroups = ko.observableArray();

    this.bookToUse = new Book("Robin Hobb", "Golden Fool", "Fantasy");

    this.indexAction = function() {
        var groups = [];

        var booksArray = [];

        booksArray.push(this.bookToUse);
        booksArray.push(new Book("Patrick  R Something", "Name Of The Wind", "Fantasy"));
        booksArray.push(new Book("Someone Else", "Game Of Thrones", "Fantasy"));

        groups.push(new BookGroup("To Read Now", booksArray));

        booksArray = [];

        booksArray.push(new Book("Terry Pratchett", "Color of Magic", "Discworld"));
        booksArray.push(new Book("Terry Pratchett", "Mort", "Discworld"));
        booksArray.push(new Book("Terry Pratchett", "Small Gods", "Discworld"));

        groups.push(new BookGroup("To Read Later", booksArray));
        this.bookGroups(groups);

    };

    this.handleButtonClick = function(){
        console.log(this.bookGroups()[0].books().length);
        this.bookGroups()[0].books().remove(this.bookToUse);
    };
};

viewModel = new PageViewModel();
ko.applyBindings(viewModel);
viewModel.indexAction(); 
```

为什么此处无法识别删除？这是构建模型的正确方法吗？

非常感谢您的任何建议:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:44:30.927

您是否尝试`remove`过 observableArray 而不是其内容，换句话说：

```
this.handleButtonClick = function(){ 
    console.log(this.bookGroups()[0].books().length); 
    this.bookGroups()[0].books.remove(this.bookToUse); 
}; 
```

请参阅[可观察数组](http://knockoutjs.com/documentation/observableArrays.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T08:50:21.327

有2个错误：

*   您试图从 javascript 数组中调用删除函数，而不是可观察数组。
*   将 book 对象放入 observableArray 时，不需要用 observable 包装它。

# sql - SQL 的效率

> ID：12815140
> 
> 赞同：0
> 
> 时间：2012-10-10T08:31:18.327
> 
> 标签：sql

更高效的是：使用 进行更新`join`或使用 进行更新`where`。

这是我的代码：

**加入**：

```
CREATE procedure [dbo].[MyProc]
@tvp myType readonly
as
 update tb
 set pp_update=CONVERT(date,GETDATE(),101)
 from myTable tb
 join @tvp t on t.crc32 = tb.pp_crc32 
```

**哪里**：

```
CREATE procedure [dbo].[MyProc]
@tvp myType readonly
as
 update tb
 set pp_update=CONVERT(date,GETDATE(),101)
 from myTable tb
 where t.crc32 = tb.pp_crc32 
```

什么是首选？如果我有 2 个术语，我可以使用`join`??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:32:57.430

我认为您在第二个查询中有拼写错误。也许你的意思是

```
CREATE procedure [dbo].[MyProc]
@tvp myType readonly
as
 update tb
 set pp_update=CONVERT(date,GETDATE(),101)
 from myTable tb, @tvp t
 where t.crc32 = tb.pp_crc32 
```

这两个查询是相同的。唯一的问题是第一个查询是`ANSI SQL-92`语法，而另一个是`SQL-89`（旧的）语法。

# excel - vba 下载并保存在 C:\user

> ID：12815142
> 
> 赞同：1
> 
> 时间：2012-10-10T08:31:35.903
> 
> 标签：excel, vba, download

我想要使​​用 VBA 的 excel 从 Internet 下载文件。该文件是一个包含员工列表信息的数据库。我希望文件保存在 C:\Users\"name of user"\FCMMIS\

这是我想要实现的分步过程：

1.  Excel 使用 VBA，从指定的网址下载文件。
2.  **下载的文件保存在 C:\Users\"用户名"\FCMMIS**
3.  Excel 通过 VBA 与下载的数据库链接，以获取可能需要的数据。

另请注意，有问题的 excel 文件将由不同的人使用笔记本电脑。我不确定是否可以将文件保存在“用户”文件夹中，或者是否需要授予权限才能允许保存。

我知道有更好的解决方案，比如编写一个完整的应用程序，但由于要求，我坚持使用 excel 和 VBA。

编辑（与第 3 部分一起完成）：

3.1：下载数据库后，excel文件从员工表中获取记录，并将它们打印到同一个excel文件的新工作表中。

3.2：打印的数据然后用于工作表中的各种功能。

但是，我正在争论仅操作数据库本身中的数据还是让它从创建的工作表中工作是否更有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T09:28:04.220

以下代码来自[Matt Vidas 的一篇文章](http://www.vbaexpress.com/kb/getarticle.php?kb_id=799)

等待您对第 3 点的回答，没有范围？

```
Function Download_File(ByVal vWebFile As String, ByVal vLocalFile As String) As Boolean
    Dim oXMLHTTP As Object, i As Long, vFF As Long, oResp() As Byte

    'You can also set a ref. to Microsoft XML, and Dim oXMLHTTP as MSXML2.XMLHTTP
    Set oXMLHTTP = CreateObject("MSXML2.XMLHTTP")
    oXMLHTTP.Open "GET", vWebFile, False 'Open socket to get the website
    oXMLHTTP.Send 'send request

    'Wait for request to finish
    Do While oXMLHTTP.readyState <> 4
    DoEvents
    Loop

    oResp = oXMLHTTP.responseBody 'Returns the results as a byte array

    'Create local file and save results to it
    vFF = FreeFile
    If Dir(vLocalFile) <> "" Then Kill vLocalFile
    Open vLocalFile For Binary As #vFF
    Put #vFF, , oResp
    Close #vFF

    'Clear memory
    Set oXMLHTTP = Nothing
End Function

Sub Testing()
    Download_File "http://example.org/yourDataBaseFile", "C:\Users\" & Environ("username") & "\yourDataBaseFile"
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:54:47.513

如果有问题的文件是一个[excel](/questions/tagged/excel "显示标记为“excel”的问题")工作簿，你可以这样做：

```
With Workbooks.Open("http://example.org/yourfile.xls")
    .SaveAs "C:\Users\example\yourfile.xls"
    .Close
End With 
```

# c# - Selenium PageObjects 模式和组件

> ID：12815145
> 
> 赞同：5
> 
> 时间：2012-10-10T08:31:46.037
> 
> 标签：c#, selenium, selenium-webdriver, pageobjects

将 PageObjects 模式应用于页面组件时的标准方法是什么？

举个例子，假设我正在为亚马逊产品页面上的功能编写测试。

该页面包含大量单独的功能、产品信息、查看过此内容的客户、建议的其他客户等。

我目前看到的 PageObjects 示例实际上只涵盖了如何处理功能有限的单个页面。我正在寻找的是类似于 PageObject 的东西，它代表产品页面，然后由代表每个组件的 ComponentObjects 组成。

例如：

```
public class ProductPage
{
    [FindsBy(How = How.Id, Using = "productInformation")]
    public ProductInformationControl ProductionInformation{get;set}

    [FindsBy(How = How.Id, Using = "customersViewed")]
    public CustomersAlsoViewedControl CustomersAlsoViewed{get;set}

    [FindsBy(How = How.Id, Using = "customersSuggested")]
    public CustomersSuggestedControl CustomersSuggested{get;set}
}

public class ProductInformationControl
{
    //Ideally the FindsBy here would find the element based on the Controls context
    // So only resolving to an element that was within the context of this control.
    [FindsBy(How = How.ClassName, Using = "title")] 
    private IWebElement _title;

    public string Title
    {
        get
       { 
           return _title.Text; 
       }
    }
} 
```

然后在测试中我会像这样访问控件：

```
 var productPage = ScenarioContext.Current.Get<ProductPage>();
 Assert.That(productPage.ProductInformation.GetTitle(), Is.EqualTo("My Title")); 
```

我以前使用过这种方法，但使用的是基于 Selenium 构建的自定义框架，允许解析子对象及其组件。我正在寻找的是开箱即​​用的 Selenium 2 和 C# 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-15T09:16:10.157

没有开箱即用的方法可以做到这一点。您的方法非常好，您可以通过使用 IElementLocator 和 IPageObjectMemberDecorator 的自定义实现调用 PageFactory.InitElements() 来实现它 请参阅此答案： [How to initialize SelectElements while using PageFactory / FindsBy in Selenium C#?](https://stackoverflow.com/questions/31613763/how-to-initialize-selectelements-while-using-pagefactory-findsby-in-selenium-c)

# qt - 为什么我的 QPainter 实例仅在我使用特定的 .png 时才绘制？

> ID：12815150
> 
> 赞同：1
> 
> 时间：2012-10-10T08:31:54.877
> 
> 标签：qt, qpainter, qimage

我正在使用 Qt Creator 创建一个简单的“青蛙”类型游戏。我设法得到了一个可以使用 4 个方向键的播放器，以及一辆可以在屏幕上自行移动的汽车。我有单独的 Player、Car 和 Frogger 类。

*Frogger 类在paintEvent*中绘制图像：

```
painter.drawImage(player->getRect(), player->getImage());
painter.drawImage(car->getRect(), car->getImage()); 
```

但是我在尝试为汽车加载不同的图像时遇到了问题。如果我`image.load("player.png");`同时使用汽车和播放器构造函数，我可以看到汽车在屏幕上作为播放器图像移动，播放器根据我的键移动。

但是，如果我用其他任何东西替换图像（所有图像都在同一个文件夹中；我还尝试将其添加到“其他文件”下的 Qt Creator），例如“car.png”，它似乎不会出现。我尝试了其他图像，但这些图像也没有显示给播放器。关于为什么会发生这种情况的任何想法？我注释掉了我的`autoMove()`函数并且没有任何变化，所以我认为这与我如何实现我的动作无关。关于我可能遗漏的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:58:12.133

我想您可以在加载图像时减少过程中可能出现的错误位置。尝试通过检查以下的返回值来确认这一点`QImage::load`：

```
QString path = "player.png";
bool loadSuccess = image.load(path);
qDebug() << "Image" << path << "loaded? =>" << loadSuccess; 
```

如果这将打印错误，请检查 Qt 在传递到时是否可以找到完全相同的路径`QFile`：

```
if(!loadSuccess)
    qDebug() << "  File exists? =>" << QFile::exists(path); 
```

如果这将打印为 true，则 Qt 无法读取图像格式。您可能使用了非标准的 PNG 编码。图像是否都来自同一来源？（例如由相同的图像编辑器编辑）

但是，如果即使上面的第一个调试输出始终打印为 true，您仍然会收到错误，则错误在其他地方。然后，它可以帮助我们提供更多关于如何使用图像的代码。

# asp.net - 在 ASP.NET Webforms 中使用部分

> ID：12815151
> 
> 赞同：0
> 
> 时间：2012-10-10T08:31:55.660
> 
> 标签：asp.net, webforms

我遇到了一个引导问题，希望你们中的一个人能找到解决方案。

我已将所有 JavaScript 引用放在我的母版页底部。这通常工作正常，但现在我有一个 ASCX 控件，它需要在页脚（模块的初始化）中添加一些 JavaScript。我无法从母版页初始化模块的原因是因为我需要我的代码隐藏文件中的一些属性。

在 ASP.NET MVC 中，我会使用部分将数据从用户控件注入到母版页中的部分，但这在 ASP.NET Webforms 4 中是否可行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-04T15:15:39.110

您可以在母版页底部添加如下内容：

```
<asp:PlaceHolder runat="server" ID="javascriptSection" /> 
```

然后在您页面的代码后面或`<% %>`标签中：

```
var scriptTag = new HtmlGenericControl("script");

scriptTag.Attributes["type"] = "text/javascript";

scriptTag.InnerHtml = @"function () { ... }";

var javascriptSection = this.Page.Master.FindControl("javascriptSection");

if (javascriptSection != null)
    javascriptSection.Controls.Add(scriptTag); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:55:30.790

不，WebForms 中不提供该部分的概念。

执行您所描述的一种方法是使用`<%= %>`语法并将服务器属性的值发送到客户端（HTML 输出）。在您的 ASCX 控件中，您可以使用以下标记：

```
<script type="text/javascript">
var clientProperty = <%= MyServerProperty %>; 
</script> 
```

ASP.NET WebForms 将在呈现页面时替换上面的 MyServerProperty 的值，然后您可以从母版页中的脚本访问 clientProperty 作为全局变量。

另一种方法是使用[隐藏字段](http://msdn.microsoft.com/en-us/library/ms227988%28v=vs.85%29.aspx)并在服务器上设置其值。它将呈现为`<input type="hidden">`，然后您可以通过 ID 从任何脚本中获取其值。

第三种选择是仅从 ASCX 控件加载实际的客户端脚本（当它有意义时），而不是将其放在母版页中（当它将在站点的任何地方加载时）。

# c# - 正则表达式解析电子邮件 - 高 CPU 负载

> ID：12815153
> 
> 赞同：0
> 
> 时间：2012-10-10T08:32:05.970
> 
> 标签：c#, regex

> **可能重复：**
> [c#正则表达式电子邮件验证](https://stackoverflow.com/questions/5342375/c-sharp-regex-email-validation)

我目前正在使用以下正则表达式和代码来解析 html 文档中的电子邮件地址

```
string pattern = @"\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*";
Regex regex = new Regex(
      pattern,
      RegexOptions.None | RegexOptions.Compiled);

MatchCollection matches = regex.Matches(input); // Here is where it takes time
MessageBox.Show(matches.Count.ToString());

foreach (Match match in matches)
{
    ...
} 
```

例如：

尝试解析`http://www.amelia.se/Pages/Amelia-search-result-page/?q=`

在 RegexHero 上，它崩溃了。

有没有办法优化这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T09:02:05.700

为了详细说明@Joey 的建议，我建议您逐行输入，删除任何不包含的行`@`，然后将您的正则表达式应用于包含的行。这应该会大大减少负载。

```
private List<Match> find_emails_matches()
{
    List<Match> result = new List<Match>();

    using (FileStream stream = new FileStream(@"C:\tmp\test.txt", FileMode.Open, FileAccess.Read))
    {
        using(StreamReader reader = new StreamReader(stream))
        {
            string pattern = @"\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*";
            Regex regex = new Regex(pattern, RegexOptions.None | RegexOptions.Compiled);

            string line;
            while((line = reader.ReadLine()) != null)
            {
                if (line.Contains('@'))
                {
                    MatchCollection matches = regex.Matches(line); // Here is where it takes time                            
                    foreach(Match m in matches) result.Add(m);
                }
            }
        }
    }

    return result;
} 
```

# php - json字符串到php到mysql

> ID：12815154
> 
> 赞同：-2
> 
> 时间：2012-10-10T08:32:07.840
> 
> 标签：php, mysql, json

这是我得到的json字符串：

```
[data] => {"id":"0612833398","longitude":"-143.406417","latitude":"32.785834","timestamp":"10-10 07:56"} 
```

我需要它把它像这样放在我的 php 文件中，但我只得到 NULL 值。

```
<?php
file_put_contents('dump.txt', "POST: \n" . print_r($_POST, true) . "\n\n\n GET: \n" . print_r($_GET, true));

$link = mysql_connect('server', 'bla', 'bla')
or die('Could not connect: ' . mysql_error());

mysql_select_db('md267052db227433') or die('Could not select database');

// Performing SQL query
if (isset($_POST['data'])) {
$data = json_decode($_POST['data']);
$id = $data['id'];
$latitude = $data['latitude'];
$longitude = $data['longitude'];
$timestamp = $data['timestamp'];

}
$query = sprintf("INSERT INTO locatie (id, longitude, latitude, timestamp) VALUES ('%s', '%s', '%s', '%s')", mysql_real_escape_string($id), mysql_real_escape_string($longitude),  mysql_real_escape_string($latitude), mysql_real_escape_string($timestamp))  ;
$result = mysql_query($query) or die('Query failed: ' . mysql_error());
echo "OK";

// Free resultset
mysql_free_result($result);

// Closing connection
mysql_close($link);
?> 
```

我觉得我真的很接近：第 1 行的 dump.txt 看起来像这样：

POST: 数组 ( )

```
 GET: 
Array
(
    [data] => {"id":"0612833398","longitude":"-143.406417","latitude":"32.785834","timestamp":"10-10 07:56"}
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T08:34:14.633

您需要转换为数组，并更改为`$_GET`：

```
if (isset($_GET['data'])) {
    $data = json_decode($_GET['data'], true);
    $id = $data['id'];
    $latitude = $data['latitude'];
    $longitude = $data['longitude'];
    $timestamp = $data['timestamp'];

    $query = sprintf("INSERT INTO locatie (id, longitude, latitude, timestamp) VALUES ('%s', '%s', '%s', '%s')", mysql_real_escape_string($id), mysql_real_escape_string($longitude),  mysql_real_escape_string($latitude), mysql_real_escape_string($timestamp))  ;
    $result = mysql_query($query) or die('Query failed: ' . mysql_error());
    echo "OK";

    // Free resultset
    mysql_free_result($result);
} 
```

如果 的第二个参数`json_decode`为真，则函数将返回关联数组而不是对象。

附带说明一下，如果您开始构建项目，最好将代码移动到 MySQLi 或 PDO，因为`mysql_*`函数已被弃用并且不应再使用。[查看这个](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)不错的教程以帮助您入门。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T08:37:25.470

那个json是对象序列化而不是数组你应该写：

```
$data = json_decode($_GET['data']);
$id = $data->id;
$latitude = $data->latitude;
$longitude = $data->longitude;
$timestamp = $data->timestamp;

} 
```

# c++ - c++ 中 fwrite() 的一些错误

> ID：12815160
> 
> 赞同：-2
> 
> 时间：2012-10-10T08:32:37.657
> 
> 标签：c++, fwrite

我编写了计算乘法矩阵时间的函数。那是代码：

```
if ((file = fopen("../logs.txt","w")) != NULL)
{
    for(int i = 0; i < 5; ++i)
    {   
        if(QueryPerformanceCounter(&start) !=0)
        {
            mult(m1, m2, m3);
            QueryPerformanceCounter(&finish);
            double temp = (double)(finish.QuadPart - start.QuadPart)/frequency.QuadPart;
            if(temp<=min || min == 0)
                min = temp;
        }
    }
    fwrite(&min, sizeof(min), 1, file);
    fclose(file);   
} 
```

当我调试它时，我看到我的最小时间等于 0.26336317888614069，但在文件中它写成“2W<сЪР?”。请告诉我有什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T08:34:59.080

您正在将二进制表示写入文件，而不是人类可读的。

采用：

```
fprintf(file, "%f", min); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:35:14.310

`fprintf(file, "%f", min);`尝试使用或类似的东西（`lf`而不是`f`等）写入文件。

您编写了值的二进制表示，`fwrite`但您想要十进制表示。

如果您使用 a `hexdump`over 文件并根据浮点标准解释结果，您将获得预期的数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T08:36:16.643

`fwrite`将写入 的二进制表示`double`，这是一些没有意义的字符。

你可以`fprintf`改用。

`fprintf(file, "%lf", min)`

# r - 重复排列

> ID：12815165
> 
> 赞同：1
> 
> 时间：2012-10-10T08:33:06.670
> 
> 标签：r, permutation

在R中，我怎样才能产生一个组的所有排列，但是在这个组中有一些重复的元素。

例子 ：

```
A = {1,1,2,2,3} 
```

解决方案 ：

```
1,1,2,2,3
1,1,2,3,2
1,1,3,2,2
1,2,1,2,3
1,2,2,1,3
1,2,2,3,1
.
. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T08:54:04.267

使用`gtools`包，

```
library(gtools)

x <- c(1,1,2,2,3)

permutations(5, 5, x, set = FALSE) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T08:51:40.610

只需使用该`combinat`软件包：

```
A = c(1,1,2,2,3)
library(combinat)
permn(A) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T13:28:28.787

使用`permute`包：

```
x <- c(1,1,2,2,3)
require(permute)
allPerms(x, observed = TRUE) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T14:26:10.117

如果你想用内置的 R 来做：

```
permute <- function(vec,n=length(vec)) {
  permute.index <- sample.int(length(vec),n)
  return(vec[permute.index])
}

permute(A) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T16:53:00.553

我对组合和排列进行了广泛的研究。我发现的这个结果写在名为 Junction 的书上（一种计算组合和排列的艺术。要查看我的网站，请登录[https://sites.google.com/site/junctionslpresentation/home](https://sites.google.com/site/junctionslpresentation/home)

我也有你的问题的解决方案。我还发现要订购多对象排列。这种多对象排列我称之为（MSNO 的 CON），意思是多个相同数量的对象的组合顺序号。

To view this method of ordering then go to the site [https://sites.google.com/site/junctionslpresentation/proof-for-advance-permutation](https://sites.google.com/site/junctionslpresentation/proof-for-advance-permutation) at the bottom of this site I have attached some word documents. Your required solution is written on the word document 12 Proof (CON of MSNO) and 13 Proof (Converse of CON of MSNO). Download this word document for the proper view of the written matters.

# javascript - 谷歌地图 api 和地理位置、Javascript 和 Html

> ID：12815168
> 
> 赞同：0
> 
> 时间：2012-10-10T08:33:12.393
> 
> 标签：javascript, html, google-maps-api-3

嘿，我是谷歌地图 api 的新手，我有一个嵌入式地图，我正在使用地理定位来获取用户的经纬度，然后我正在填补地图 api 中的空白。但是，当我使用生成的纬度和经度时，该地图不起作用，但如果我只输入一个，它就起作用了

**非工作代码：**

```
 var map;
  var infowindow;

  function initialize() {

    if (navigator.geolocation)
   {
    navigator.geolocation.getCurrentPosition(showPosition);
    }
    function showPosition(position)
    {

    var latlon = new google.maps.LatLng( position.coords.latitude + "," + position.coords.longitude );

    map = new google.maps.Map(document.getElementById('map'), {
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      center: latlon,
      zoom: 15,
      disableDefaultUI: true
    });

    var request = {
      location: latlon,
      radius: 555,
      types: ['bar']
    };
    infowindow = new google.maps.InfoWindow();
    var service = new google.maps.places.PlacesService(map);
    service.search(request, callback);
  }

  function callback(results, status) {
    if (status == google.maps.places.PlacesServiceStatus.OK) {
      for (var i = 0; i < results.length; i++) {
        createMarker(results[i]);
     }
    }
   }
  }

  function createMarker(place) {
    var placeLoc = place.geometry.location;
    var marker = new google.maps.Marker({
      map: map,
      position: place.geometry.location
    });

    google.maps.event.addListener(marker, 'click', function() {
      alert(place.name);
    });
  }

  google.maps.event.addDomListener(window, 'load', initialize); 
```

**工作代码**

```
 var map;
  var infowindow;

  function initialize() {
    var latlon = new google.maps.LatLng(-33.8665433, 151.1956316);

    map = new google.maps.Map(document.getElementById('map'), {
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      center: latlon,
      zoom: 15,
      disableDefaultUI: true
    });

    var request = {
      location: latlon,
      radius: 555,
      types: ['bar']
    };
    infowindow = new google.maps.InfoWindow();
    var service = new google.maps.places.PlacesService(map);
    service.search(request, callback);
  }

  function callback(results, status) {
    if (status == google.maps.places.PlacesServiceStatus.OK) {
      for (var i = 0; i < results.length; i++) {
        createMarker(results[i]);
      }
    }
  }

  function createMarker(place) {
    var placeLoc = place.geometry.location;
    var marker = new google.maps.Marker({
      map: map,
      position: place.geometry.location
    });

    google.maps.event.addListener(marker, 'click', function() {
      alert(place.name);
    });
  }

  google.maps.event.addDomListener(window, 'load', initialize); 
```

如果感谢任何帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T08:35:35.683

替换你的行：

```
var latlon = new google.maps.LatLng
      (position.coords.latitude + "," + position.coords.longitude); 
```

和

```
var latlon = new google.maps.LatLng
      (position.coords.latitude, position.coords.longitude); 
```

问题在于将两个值连接成一个，其中构造函数需要两个参数。

# java - base64 编码问题，java

> ID：12815174
> 
> 赞同：2
> 
> 时间：2012-10-10T08:33:55.500
> 
> 标签：java, encoding, base64

我正在使用 apache 库对 base64 进行编码。但是这个时间问题很典型。我有一个 b64 编码的字符串。

```
MIIHSjCCBjKgAwIBAgIQQuw1emUfNRlPD/euDuzBjDANBgkqhkiG9w0BAQUFADCB"+
"5TELMAkGA1UEBhMCRVMxIDAeBgkqhkiG9w0BCQEWEWFjQGFjYWJvZ2FjaWEub3Jn 
```

它是证书 (.CER) 文件的一部分。我只是对其进行解码并再次对其进行编码，但结果略有不同。结果字符串是，

"MIIHSjCCBjKgAwIBAgIQQuw1emUfNRlPD/euDuzBjDANBgkqhkiG9w0BAQUAFADA"+ "/5TELMAkGA1UEBhMCRVMxIDAeBgkqhkiG9w0BCQEWEWFjQGFjYWJvZ2FjaWEub3Jn"

区别在于第一行的结尾和第二行的开头。**CB**被**A/**取代。

此更改使我的证书无效。问题可能出在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T08:53:39.197

问题在于您的中间字符串转换。如果你只使用字节数组，一切都很好。

```
public static void main(String args[]) {
        String partOfCer = "MIIHSjCCBjKgAwIBAgIQQuw1emUfNRlPD/euDuzBjDANBgkqhkiG9w0BAQUFADCB" + "5TELMAkGA1UEBhMCRVMxIDAeBgkqhkiG9w0BCQEWEWFjQGFjYWJvZ2FjaWEub3Jn";
        byte[] dec1_byte = Base64.decodeBase64(partOfCer.getBytes());
//        String dec1 = new String(dec1_byte);
        byte[] newBytes = Base64.encodeBase64(dec1_byte);
        String newStr = new String(newBytes);
        System.out.println(partOfCer);
        System.out.println(newStr);
        System.out.println(partOfCer.equals(newStr));
    } 
```

# pascal - 帕斯卡中的 OctToInt

> ID：12815176
> 
> 赞同：0
> 
> 时间：2012-10-10T08:33:58.160
> 
> 标签：pascal, lazarus

我正在为我设计的假想处理器（有点像 DCPU-16）编写汇编程序，我想包括所有主要数字基数。我有 hex、bin 和 dec，但我不能得到 oct，因为似乎没有 OctToInt 函数。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:39:03.830

```
function OctToInt(Value: string): Longint; 
  var
    i, int: Integer;
begin
  int := 0;
  for i := 1 to Length(Value) do
    int := int * 8 + StrToInt(Copy(Value, i, 1));
Result := int;
end; 
```

# c - 浮点类型的有效位数

> ID：12815179
> 
> 赞同：9
> 
> 时间：2012-10-10T08:34:05.403
> 
> 标签：c, floating-point, floating-point-conversion

C 中类型的描述`float`提到有效数字的数量是`6`。然而，

```
float f = 12345.6; 
```

然后使用 printf() 打印它不打印`12345.6`，它打印`12345.599609`。那么`double`对于浮点类型来说，“6 位有效数字”（或“15 位”）是什么意思呢？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-10T08:36:47.510

6 位有效数字表示最大误差约为 +/- 0.0001%。单个浮点值实际上具有大约 7.2 位的精度（[source](http://en.wikipedia.org/wiki/Floating_point#Internal_representation)）。这意味着误差约为 +/- 12345.6/10^7 = 0.00123456。这是您的错误（0.000391）的顺序。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-10T08:43:45.887

根据[标准](http://steve.hollasch.net/cgindex/coding/ieeefloat.html)，并非所有十进制数都可以准确地存储在内存中。根据表示的大小，误差可以达到某个最大值。因为`float`这是`0.0001%`（6 位有效数字 = `10^-6`= `10^-4 %`）。

在您的情况下，错误`(12345.6 - 12345.599609) / 12345.6 = 3.16e-08`远低于浮点数的最大错误。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-10T08:44:41.737

您所看到的实际上并不是有效数字的任何问题，而是计算机上的数字以二进制形式存储的事实，并且 3/5 (= 0.6) 没有有限的二进制表示。二进制的 3/5 看起来像 0.100110011001...，“1001”模式永远重复。这个序列相当于 0.599999... 重复。在任何与精度相关的错误出现之前，您实际上已经到达小数点右侧的三位小数。

这类似于没有 1/3 的有限 base-10 表示；我们有 0.3333 永远重复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T08:39:25.823

这里的问题是你不能保证一个数字可以存储在一个浮点数中。[正如IEEE 754](http://en.wikipedia.org/wiki/IEEE_754)解释的那样，您需要用尾数、底数和指数来表示这个数字。该数字`printf(...)`显示您是存储的真实浮点数。您不能保证浮点数中有多个有效数字。

# ruby-on-rails - Ruby on Rails：搜索时重复的结果

> ID：12815183
> 
> 赞同：1
> 
> 时间：2012-10-10T08:34:14.253
> 
> 标签：ruby-on-rails, ruby, search, model, controller

我有一个允许用户在数据库中搜索项目的 rails 应用程序。

这是项目模型中的搜索功能：

```
def self.search(search_industry, search_role, search_techs_ids)

    _projects = Project.scoped 

    if search_industry.present?
      _projects = _projects.where ['industry LIKE ?', like(search_industry)]
    end
    if search_role.present?
      _projects = _projects.where ['role LIKE ?', like(search_role)]
    end
    if search_techs_ids.present?
    _projects = _projects.joins(:technols).where("technols.id" => search_techs_ids)
    end
    _projects
    end 
```

这是我的搜索页面的一部分

```
<div class="tech">
<%= fields_for(@project_technol) do |ab| %>
 Technologies : 
 <%     tech_ids = params[:technols][:id].reject(&:blank?) unless params[:technols].nil? %>

<%if params[:technols].nil?%>

<%= collection_select(:technols, :id, @all_technols, :id, :tech, {}, {:multiple => true} ) %>

<% else %>

<%= collection_select(:technols, :id, @all_technols, :id, :tech, {}, {:multiple => true, :selected => tech_ids } ) %>
<% end %>

</div> 
```

这是我的搜索操作：

```
def search

    tech_ids = params[:technols][:id].reject(&:blank?) unless params[:technols].nil?

    @search =  params[:industry], params[:role], tech_ids

    @project_search = Project.search(*@search).order(sort_column + ' ' + sort_direction).paginated_for_index(per_page, page)

    @search_performed = !@search.reject! { |c| c.blank? }.empty? 

  @project = Project.new(params[:project])

    @all_technols = Technol.all

    @project_technol = @project.projecttechnols.build

respond_to do |format|
      format.html # search.html.erb
      format.json { render :json => @project }
    end

end 
```

我的问题是，当我在搜索页面上选择 collection_select 中的所有技术并单击搜索时，结果似乎显示重复的所有记录，如果它们包含一种以上的技术。

例如，数据库中有 3 个项目。P1、P2、P3 都拥有 3 种技术，T1、T2 和 T3。如果我要搜索所有 3 种技术，每个项目都应该出现一次，但相反，它们会出现 3 次。

有没有人有任何想法我可能会出错。提前致谢。

**编辑**

搜索时我的参数：

```
Parameters: {"utf8"=>"✓", "client"=>"", "industry"=>"", "technols"=>{"id"=>["", "40", "41", "42", "43", "44", "46", "47", "48", "49", "50", "51", "52", "53", "54"]}, "start_date_dd"=>"", "start_date_A"=>"", "start_date_B"=>"", "status"=>"", "per_page"=>"10"}
  User Load (0.4ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  Technol Load (0.3ms)  SELECT "technols".* FROM "technols" 
  Project Load (0.8ms)  SELECT "projects".* FROM "projects" ORDER BY client
  Project Load (0.4ms)  SELECT "projects".* FROM "projects" ORDER BY industry
  Project Load (0.4ms)  SELECT "projects".* FROM "projects" ORDER BY status
   (1.0ms)  SELECT DISTINCT COUNT(*) FROM "projects" INNER JOIN "projecttechnols" ON "projecttechnols"."project_id" = "projects"."id" INNER JOIN "technols" ON "technols"."id" = "projecttechnols"."technol_id" WHERE "technols"."id" IN (40, 41, 42, 43, 44, 46, 47, 48, 49, 50, 51, 52, 53, 54)
  Project Load (13.2ms)  SELECT DISTINCT "projects".* FROM "projects" INNER JOIN "projecttechnols" ON "projecttechnols"."project_id" = "projects"."id" INNER JOIN "technols" ON "technols"."id" = "projecttechnols"."technol_id" WHERE "technols"."id" IN (40, 41, 42, 43, 44, 46, 47, 48, 49, 50, 51, 52, 53, 54) ORDER BY project_name asc LIMIT 10 OFFSET 0
  Technol Load (0.9ms)  SELECT "technols".* FROM "technols" INNER JOIN "projecttechnols" ON "technols"."id" = "projecttechnols"."technol_id" WHERE "projecttechnols"."project_id" = 107
  Technol Load (1.8ms)  SELECT "technols".* FROM "technols" INNER JOIN "projecttechnols" ON "technols"."id" = "projecttechnols"."technol_id" WHERE "projecttechnols"."project_id" = 100
  Technol Load (1.8ms)  SELECT "technols".* FROM "technols" INNER JOIN "projecttechnols" ON "technols"."id" = "projecttechnols"."technol_id" WHERE "projecttechnols"."project_id" = 106
  Rendered projects/search.html.erb within layouts/application (68.2ms)
Completed 200 OK in 100ms (Views: 74.8ms | ActiveRecord: 22.8ms) 
```

**更新：**

我刚刚发现了一个错误。

我的模型现在包含此代码；

```
if search_techs_ids.present?
  _projects = _projects.includes(:technols).where("technols.id" => search_techs_ids)
end 
```

不再显示重复项，但是当我在显示结果的表中搜索单一技术时，我注意到了。我有这个专栏：

```
<td><ul>
  <% t.technols.each do |technol| %>
    <li><%= technol.tech %><!/li>
  <% end %>
</ul></td> 
```

这曾经显示该项目的所有技术列表，但现在使用新代码，它只显示我搜索的那个。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T08:52:41.923

您可以尝试使用包含而不是连接吗？

```
if search_techs_ids.present?
  _projects = _projects.includes(:technols).where("technols.id" => search_techs_ids)
end 
```

包含选项基本上执行外连接而不是内连接。它还急切地加载记录，这意味着您将拥有“更大”的单个查询而不是多个查询。

看[这里](http://railscasts.com/episodes/181-include-vs-joins?view=asciicast)有一个很好的解释

另请参阅[此处](https://stackoverflow.com/questions/1208636/rails-include-vs-joins)

对于左连接，您可以执行以下操作：

```
if search_techs_ids.present?
  _projects = _projects.joins("LEFT OUTER JOIN technols ON technols.id = project.technol_id")
end 
```

# ios - const NSString 和静态 NSString 有什么区别

> ID：12815189
> 
> 赞同：4
> 
> 时间：2012-10-10T08:34:29.903
> 
> 标签：ios, cocoa-touch

我想使用类变量。以下两种方法效果很好，但我不知道它们之间有什么不同。

```
static NSString *str1 = @"str1";
NSString *const str2 = @"str2";
@implementation StrViewController 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T08:38:04.237

您可以将位置更改`str1`为指向的位置，但不能这样做，`str2`因为它是一个 const 指针

这将起作用：

```
str1 = @"Hello"; 
```

虽然这不会：

```
str2 = @"Hello"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T18:03:18.347

我想你会发现你的变量不需要是`static`or `const`！使它成为类变量的原因在于它在任何方法或函数之外。

尽管有这个名字，`static`但与静态无关（即保持不变）。这是一个非常不幸的术语选择，但它来自 C，我们坚持使用它。`static`与变量的*范围*有关；它在文件级别实现，在文件范围内但在任何特定方法/函数之外。它以两种方式使用：

*   在任何方法或函数之外，`static`防止从该文件外部看到全局变量。请参阅[从另一个类引用静态 NSString * const](https://stackoverflow.com/questions/11942458/referencing-a-static-nsstring-const-from-another-class)。

*   在方法或函数内部，`static`将存储与文件作为一个整体联系起来，而不是在方法或函数以“自动”变量的方式结束时使变量不存在。正如 C 语言的发明者自己所说（K&R 4.6）：

> 与自动装置不同的是，它们始终存在，而不是在每次激活功能时来来去去。这意味着内部`static`变量在单个函数中提供私有的、永久的存储。

这就是为什么`static`在 class-vended singleton 的实现中使用它。

# sql - 选择一个不存在的附加空行

> ID：12815194
> 
> 赞同：8
> 
> 时间：2012-10-10T08:34:37.130
> 
> 标签：sql, sql-server

> **可能重复：**
> [在查询结果中包含一个空白行](https://stackoverflow.com/questions/3089336/include-a-blank-row-in-query-results)

我想在我的 SQL 查询最顶部的结果集中添加一个空行。

我正在使用的查询是这样的：

```
SELECT 
    PROFILETITLE, DOCID 
FROM
    PROFILES
WHERE 
    COMPANYCODE = ? 
ORDER BY 
    PROFILETITLE 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-10T08:36:29.703

尝试使用`union all`

```
SELECT null as PROFILETITLE, null as DOCID 
UNION ALL
SELECT PROFILETITLE, DOCID 
FROM PROFILES
WHERE COMPANYCODE=? 
ORDER BY PROFILETITLE 
```

但是如果你不想添加标题，如果`DOCID` 是`int`类型，你必须使用`union all`和`cast`如下

```
SELECT 'PROFILETITLE' as PROFILETITLE, 'DOCID' as DOCID 
UNION ALL
SELECT PROFILETITLE, CAST ( DOCID AS varchar(30) )
FROM PROFILES
WHERE COMPANYCODE=? 
ORDER BY PROFILETITLE 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T08:36:04.033

尝试这个：

```
SELECT '' AS PROFILETITLE, 0 AS DOCID
UNION ALL
SELECT PROFILETITLE, DOCID
FROM PROFILES WHERE COMPANYCODE = ? 
ORDER BY PROFILETITLE 
```

请注意，在使用`UNION`和所有其他集合操作时，列必须在类型上匹配，因此您必须使用`PROFILETITLE`和为前两个空值起别名`DOCID`。而且您还必须注意两列的类型以进行匹配才能正常工作。可能您需要选择`NULL`而不是`''`and `0`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-10T08:39:24.333

`varchar`如果所有列都是空的，您可以添加一个“空行” `''`：

```
SELECT PROFILETITLE, DOCID 
FROM PROFILES
WHERE ...

UNION ALL

SELECT '' AS PROFILETITLE, '' AS DOCID

ORDER BY 
  CASE WHEN PROFILETITLE='' AND DOCID='' THEN 0 ELSE 1 END ASC
, PROFILETITLE ASC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T08:36:43.393

您可以使用 SQL`Union`

```
SELECT PROFILETITLE, DOCID 
FROM PROFILES
WHERE COMPANYCODE=? ORDER BY PROFILETITLE
UNION ALL
SELECT 0, '' 
FROM SYSIBM.SYSDUMMY1 
```

您可以用您的临时表替换 SYSIBM.SYSDUMMY1

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T08:39:15.330

一个工会都可以完成这项工作

```
SELECT 
'' as PROFILETITLE,
'' as DOCID
UNION ALL
SELECT PROFILETITLE, DOCID 
FROM PROFILES
WHERE COMPANYCODE=? ORDER BY PROFILETITLE 
```

# php - 来自 Sharepoint 的 RSS 字符错误

> ID：12815209
> 
> 赞同：0
> 
> 时间：2012-10-10T08:35:17.763
> 
> 标签：php, xml, character-encoding

我制作了一个从 Sharepoint 服务器获取 RSS 提要的脚本。然后我使用 DOMDocument 提取文本并添加行结尾`\n`It works all fine but at the end of the line it print a wrong character `â`。可能是什么问题呢？是不是编码错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:54:16.420

好的，问题可以解决了。我必须先`utf8_decode`拉弦。

# datagridview - 动态过滤Datagridview VB

> ID：12815215
> 
> 赞同：0
> 
> 时间：2012-10-10T08:35:39.287
> 
> 标签：datagridview

嘿伙计们，我遇到了一个问题对象引用未设置为对象的实例。我是一个完整的初学者，所以任何说明/解决方案将不胜感激。

导入 System.Data.SqlClient 导入 MySql.Data.MySqlClient

```
Public Class Form1

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs)      Handles MyBase.Load
    Dim connectionstring As String
    Dim commandtext As String
    Dim da As MySqlDataAdapter
    Dim table As DataTable
    commandtext = "select * From student"
    connectionstring = "Server=*****;Database=Harry;Uid=****;Pwd=****;Allow Zero Datetime=True;"

    Try
        da = New MySqlDataAdapter(commandtext, connectionstring)
        table = New DataTable
        da.Fill(table)
        DataGridView1.DataSource = table

    Catch ex As Exception
        MsgBox(ex.ToString)

    End Try
    Dim ds As New DataSet
    da = New MySqlDataAdapter
    da.Fill(ds, "student")

    DataGridView1.DataSource = ds.Tables("student")

End Sub

Private Sub TextBox1_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles TextBox1.TextChanged

    ds.Tables("student").DefaultView.RowFilter = "student_id LIKE '%" & TextBox1.Text & "%' OR name LIKE '%" & TextBox1.Text & "*'"

End Sub 
```

结束类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:17:21.617

在我看来，您的问题是 ds 的声明。

当您打算在多个地方使用它时，请尝试将其声明为全局变量。我认为您声明它的方式没有任何问题，只需将“Dim ds As New DataSet”行放在您的类中但在加载事件上方。

# mdx - 在 MDX 查询中使用过滤器和 Instr 时的性能

> ID：12815218
> 
> 赞同：0
> 
> 时间：2012-10-10T08:35:49.260
> 
> 标签：mdx, activepivot

我有一个以下形式的 MDX 查询，它与 ActivePivot 一起使用。我需要通过在另一个维度（列）中存在*部分字符串来过滤结果（在我的行中）：*

```
SELECT
NON EMPTY Hierarchize({[CODE].[CODE].Members}) ON ROWS,
NON EMPTY Hierarchize({Filter([RELEVANCE].Members, InStr([RELEVANCE].CurrentMember.Name, "n/a") > 0)}) ON COLUMNS
FROM [CUBE]
WHERE ([Measures].[contributors.COUNT]) 
```

使用过滤器/instr 时，此查询的性能非常差。我想我可以理解，因为它大概“扫描”了所有成员。

有没有另一种方法可以实现我想要的，但性能更好。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T12:03:59.457

如果您的`RELEVANCE`维度有 3 个级别并且“n/a”出现在最后一个级别，您可以编写如下内容：

```
SELECT
NON EMPTY [CODE].[CODE].Members ON ROWS,
NON EMPTY Hierarchize({[RELEVANCE].Levels(0).Members,
                       [RELEVANCE].Levels(1).Members, 
                       Filter([RELEVANCE].Levels(2).Members, InStr([RELEVANCE].CurrentMember.Name, "n/a") > 0)}) ON COLUMNS
FROM [CUBE]
WHERE ([Measures].[contributors.COUNT]) 
```

它将减少无用过滤器检查的数量。

您还可以向多维数据集添加另一个具有 2 个成员级别的维度：“n/a”和“not n/a”。

在这种情况下，查询将变为：

```
SELECT
NON EMPTY [CODE].[CODE].Members ON ROWS,
NON EMPTY [RELEVANCE].Members ON COLUMNS
FROM [CUBE]
WHERE ([Measures].[contributors.COUNT], [the new dimension].[...].[not n/a]) 
```

但这会改变您的总计值。

# javascript - 视图继承不会呈现两个视图

> ID：12815220
> 
> 赞同：0
> 
> 时间：2012-10-10T08:36:03.500
> 
> 标签：javascript, backbone.js, backbone-views

我想在 Backbone.js 上构建我的第一个视图继承，非常经典，一个模板，它是一个带有注册/登录/注销选项的导航栏，作为我所有其他视图的父亲。

该代码似乎可以找到，每个初始化方法都被调用，但它在渲染部分不起作用。

我可以实例化 templateFrontendView() （父亲），它工作得很好（我的视图上有导航栏），或者我可以实例化 homeView() （templateFrontendView 的孩子），但我只会有这个的渲染，渲染即使我在初始化方法中调用它，templateFrontendView 也会消失...

[这是包含所有代码的jsfiddle](http://jsfiddle.net/ludoblues/japNK/7/)

```
 window.User = Backbone.Model.extend({
            defaults : {
                id : "1",
                username : "anonymous",
                facebook_id : "1235486421",
                facebook_token : "AEZH93FZFEFSFSFS4545154sfsfSF"
            },
            urlRoot: 'http://localhost:3000/user',
            initialize : function() {
                console.log('User Constructor...');                                                                                              
            this.url = "http://localhost:3000/user/"+this.get('username')+'/'+this.get('facebook_id')+'/'+this.get('facebook_token');
            }
  });

window.templateFrontendView = Backbone.View.extend({
        el : $('#template-frontend-container'),

        initialize : function() {
           this.model = new User();
           this.template = _.template($('#template-frontend-template').html());
           this.render();
        },

        events: {
          "click a.fb_connect": 'fetch_user'
        },

        fetch_user: function(){
            console.log("Save requested...");
        },render : function() {
            this.delegateEvents();
            var renderedContent = this.template(this.model.toJSON());
            $(this.el).html(renderedContent);
            return this;
        }
    });

    window.homeView = templateFrontendView.extend({
            el : $('#home-container'),

        initialize : function() {
           templateFrontendView.prototype.initialize.apply(this);
           this.model = new User();
           this.template = _.template($('#home-template').html());
           this.render();
        },

            render : function() {
                this.delegateEvents();
                var renderedContent = this.template(this.model.toJSON());
                $(this.el).html(renderedContent);
                return this;
            }
    });

    var App = {
        home: function() {
            var V = new homeView();
        }
    }

    $(document).ready(function(){
      App.home();
    }); 
```

和视图

```
<!-- Template Frontend -->
      <script type="text/template" id="template-frontend-template">
        <div class="navbar">
          <div class="navbar-inner">
            <a class="brand" href="#">Chon the Road</a>
            <ul class="nav">
              <li class="active"><a href="#">Home</a></li>
              <li><a style="display: none;" class="account" href="#">Welcome <span><%= username %></span></a></li>
              <li><a style="display: none;" class="fb_connect" href="#"><img src="img/fb-connect.png" alt="fb-connect" /></a></li>
            </ul>
          </div>
        </div>

      </script>

      <div id='template-frontend-container'></div>
      <!-- Template Frontend -->

      <div id="fb-root"></div>

      <!-- Home -->
      <script type="text/template" id="home-template">
        <span><%= username %></span>
      </script>

      <div id='home-container'></div>
      <!-- Home --> 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T10:06:10.020

我在 window.homeView 中添加了对父级初始化的调用：http: [//jsfiddle.net/japNK/18/](http://jsfiddle.net/japNK/18/)如下所述：[Accessing parent class in Backbone](https://stackoverflow.com/questions/8970606/accessing-parent-class-in-backbone)

# jquery - 通过 PrimeFaces 的 jQuery dataTable.selectRow(index) 选择行失败：a 未定义

> ID：12815227
> 
> 赞同：0
> 
> 时间：2012-10-10T08:36:16.237
> 
> 标签：jquery, primefaces

我有以下简单的 PrimeFaces 数据表：

```
<p:dataTable id="list"
             value="#{collisionManager.nodeCollisions}"
             var="cln"
             selection="#{collisionManager.selectedCollisionsArray}"
             rowKey="#{cln.id}"
             rowIndexVar="rowIndex">

    <p:ajax event="rowSelectCheckbox" process="@this" update="@this" />
    <p:ajax event="rowUnselectCheckbox" process="@this" update="@this" />

    <p:ajax event="rowToggle" global="false" />

    <p:column styleClass="row-toggler">
        <p:rowToggler />
    </p:column>

    <p:column selectionMode="multiple" />

    ...

    <p:rowExpansion>
        <h:panelGrid columns="3">
            ... some info about the row
        </h:panelGrid>
    </p:rowExpansion>

</p:dataTable> 
```

如您所见，表格中有一个`<p:rowToggler>`列和一个多选复选框`<p:column selectionMode="multiple" />`列。这是一张图片：

![在此处输入图像描述](../Images/a297129510ce6585f3b5c4ff5cfb8f55.png)

然而，复选框选择的 PF 实现似乎在单击复选框后更新了整个表格，这导致所有当前展开的行扩展再次折叠。

为了解决这个问题（并且由于“CantReplicate”错误[http://code.google.com/p/primefaces/issues/detail?id=3794](http://code.google.com/p/primefaces/issues/detail?id=3794)使取消选中所有复选框起作用），我们决定实现多选框我们自己。

```
 <p:column selectionMode="multiple" /> 
```

然后变成：

```
 <p:column>
        <p:selectBooleanCheckbox value="#{collisionManager.checkedStates[rowIndex]}">
            <p:ajax process="@this"
                    update="@this"
                    listener="#{collisionManager.processCheck}" />
        </p:selectBooleanCheckbox>
    </p:column> 
```

这基本上按预期工作（通过 bean 中的布尔“检查”状态列表）。但是，当前选定的行不会突出显示。

在通过检查操作后更新整个数据表时

```
 <p:ajax ...
                    update=":collision-form:list"
                    ... > 
```

额外放置时，根据布尔状态正确突出显示相应的行

```
<p:dataTable id="list"
             ...
             rowStyleClass="#{collisionManager.checkedStates[rowIndex] ? 'ui-state-highlight' : ''}"> 
```

在数据表上，但所有当前展开的行扩展在检查操作后被折叠的效果仍然存在。因此，要解决正在折叠的行（由于行切换器无法设置初始展开/折叠状态），更新整个列表似乎不是要走的路。

然后，我有了使用 jQuery 将高亮部分修补到行上的想法。我添加了一个简单的调用`oncomplete="collisionTable.selectRow(#{rowIndex});"`：

```
<p:column>
    <p:selectBooleanCheckbox value="#{collisionManager.checkedStates[rowIndex]}">
        <p:ajax process="@this"
                update="@this"
                listener="#{collisionManager.processCheck}"
                oncomplete="collisionTable.selectRow(#{rowIndex});" />
    </p:selectBooleanCheckbox>
</p:column> 
```

这基本上突出了相应的行，但是在 DOM 更新后的某个地方调用`collisionTable.selectRow(#{rowIndex});`失败并出现一些 JS 错误：

a 未定义

**萤火虫 说：**

“恢复调试器：调试循环期间出错：TypeError：firstViewRangeElement 为空”

a 未定义

1号线

**FF 错误控制台说：**

类型错误：a 未定义

htps://localhost:8181/blablabla/javax.faces.resource/primefaces.js.xhtml?ln=primefaces

线路：1

PrimeFaces={escapeClientId:function(a){return"#"+a.replace(/:/g,"\:")},....... **[极长的最小化代码行]**

此错误会导致 JS/AJAX 引擎停止，因此第一个检查操作之外的任何操作都会挂起整个 UI。

**问**：

为什么这个非常简单的选择调用会失败？怎么了？

**Q2**：

你如何调试这个？

编辑：我还尝试了 oncomplete 在单独的 JS 文件中调用函数。这允许我在 Firebug 中设置断点，但它并没有让我更进一步。我在单步执行时唯一意识到的是，前一个状态而不是检查操作后的状态传递给该方法，并且在处理突出显示*后*整个 selectRow 失败。当前代码：

```
oncomplete="processChecked( #{collisionManager.checkedStates[rowIndex]}, #{rowIndex} );" 
```

select-row.js 文件：

```
function processChecked( checkedState, rowIndex )
{
    alert( "Checked state = " + checkedState + ", index = " + rowIndex );

    if ( !checkedState )
    {
        collisionTable.selectRow( rowIndex, true );
    }
    else
    {
        collisionTable.unselectRow( rowIndex, true );
    }
} 
```

请注意，条件是相反的。如果有人知道为什么旧状态会通过，请赐教。

# yui - 如何编写 YUI 用户指南之类的文档？

> ID：12815229
> 
> 赞同：0
> 
> 时间：2012-10-10T08:36:18.030
> 
> 标签：yui

YUI 用户指南非常好，例如请访问[http://yuilibrary.com/yui/docs/event/](http://yuilibrary.com/yui/docs/event/)，我只是想写这样的文档。我的问题是：这些文档是由 Dockbook、Sphix 等工具生成的还是手工编写的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:02:48.590

YUI 用户指南是使用名为**Selleck**的工具从 Mustache 模板生成的。`component.json`Selleck 是一个 Node.js 工具，它根据文件中提供的信息和预定义的文件夹结构从不同的模板生成页面。该工具最酷的功能之一是它具有`--server`运行本地 Web 服务器的模式，在该模式下，您只需刷新页面即可实时查看所做的更改。

您可以在[http://yui.github.com/selleck/](http://yui.github.com/selleck/)上查看。

# android - android webview可以滚动出页面边界吗？

> ID：12815230
> 
> 赞同：0
> 
> 时间：2012-10-10T08:36:19.710
> 
> 标签：android, webview, scroll, padding

是否可以在 webview 中滚动出页面边界？

示例：Webview 页面/内容宽度：15px，屏幕尺寸：10px。我可以滚动到 X 位置 8px 吗？

从技术上讲，我可以，而且它在我的测试设备上运行良好。但是，在其他设备上进行测试时，我注意到当我移出边界时它将停止渲染。页面的左侧部分将“模糊”或根本不可见，直到我向左滚动并且 web 视图中没有更多的“空白空间”，它将更新。

有解决方案吗？

一个可能的解决方案是使内容在运行中变大，并带有空白。但是我不能在 webview 中添加填充，除非我在渲染它之前把它放在 html 中。但在我渲染它之前，我不会知道宽度。在我渲染它之后，没有办法改变填充/向内容添加一些空白空间，而无需再次完全加载它。对？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-07T12:15:55.313

我通过在 html 末尾添加 1-2 个分页符解决了这个问题，它现在可以很好地呈现，并且我习惯性地阻止视图滚动到页面末尾，这样白色就不会显示给用户。

# node.js - 在 socket.io 中控制来自客户端的心跳超时

> ID：12815231
> 
> 赞同：26
> 
> 时间：2012-10-10T08:36:22.190
> 
> 标签：node.js, client, socket.io

我有移动客户端连接到 node.js 服务器，通过 xhr-polling 运行 socket.io。我有两种类型的客户：

*   A型

    当连接因网络问题（或客户端崩溃）而中断时，默认心跳超时时间过长

*   B型

    当此客户端的连接中断时，我需要给它更多时间来恢复 - 客户端恢复比服务器中断连接/会话更重要

所以我的问题是如何配置（如果可能的话）来自实际客户端的心跳超时？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-10-11T19:17:13.693

据我所知，这里有两个重要的值：服务器每秒向客户端发送一次心跳`heartbeat interval`；客户端直接响应，如果没有响应，则服务器判定客户端死亡。自上次心跳后，客户端等待来自服务器的心跳`heartbeat timeout`数秒（显然应该高于`heartbeat interval`）。如果它在几秒钟内没有收到来自服务器的消息`heartbeat timeout`，则假定服务器已死（并将根据您设置的其他选项开始断开/重新连接。

默认值为`heartbeat interval = 25s`和`heartbeat timeout = 60s`。这两个项目都在服务器上设置，`heartbeat timeout`在连接时发送到客户端。

`heartbeat timeout`为单个客户端更改很容易：

```
var socket = io.connect(url);
socket.heartbeatTimeout = 20000; // reconnect if not received heartbeat for 20 seconds 
```

但是在服务器上，该`heartbeat interval`值似乎是共享对象的一部分（管理器，这是您从`var io = require("socket.io").listen(server)`调用中得到的），这意味着它不能轻易地为单个套接字更改。

我确信通过一些 socket.io 黑客攻击你应该能够实现它，但你可能会在这个过程中破坏其他东西......

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-06-30T19:08:04.830

在 socket.io 1.x 中，API 发生了变化，但概念保持不变。

属性是 pingInterval 和 pingTimeout，而不是 heartbeatInterval 和 heartbeatTimeout。例如，

```
var server = app.listen(80);
io = socketio(server,{'pingInterval': 45000}); 
```

[请参阅http://socket.io/docs/server-api/#server(opts:object)](http://socket.io/docs/server-api/#server(opts:object))上的文档，它将引导您访问[https://github.com/Automattic/engine.io#methods-1](https://github.com/Automattic/engine.io#methods-1)。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-08-07T12:32:44.810

要完成 Claude 的回答，您可以使用以下代码在服务器端设置这些值

```
io.set('heartbeat interval', 5);
io.set('heartbeat timeout', 11); 
```

然后您可以创建 2 个 node.js 服务器，一个用于每种类型的客户端（A 和 B），具有 2 个所需的选项集（心跳超时和间隔）。

# registry - 通过值查找注册表项的名称？

> ID：12815233
> 
> 赞同：0
> 
> 时间：2012-10-10T08:36:26.610
> 
> 标签：registry, windows-server-2008, registrykey

我有一个注册表键值 - 但我不知道我需要更改哪个键（因为值不正确）

有什么办法可以查到吗？

我收到一个加载项错误，它是由文件地址中存在的 \ 引起的 - 我想找到相关的注册表项并更改它:)

我在 Windows Server 2008 R2 上

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T08:40:32.067

您可以尝试在`regedit.exe`（编辑/查找...）中搜索注册表

# c# - Unity 框架：链接解决方案

> ID：12815241
> 
> 赞同：0
> 
> 时间：2012-10-10T08:36:55.717
> 
> 标签：c#, dependency-injection, unity-container

> **可能重复：**
> [是否可以统一对注册进行去重？](https://stackoverflow.com/questions/12723867/is-it-possible-to-deduplicate-registration-in-unity)

我正在尝试使用统一 xml 配置建立解析链。我得到的是这样的：

```
interface IFoo{}
interface IBar : IFoo{}
class Impl : IBar{} 
```

我使用的配置类似于以下内容：

```
<unity xmlns="schemas.microsoft.com/practices/2010/unity">
  <container>
    <register type="IBar" mapTo="Impl"/>
    <register type "IFoo" mapTo="IBar"/>
  </container>
</unity> 
```

当我调用

```
unityContainer.Resolve<IFoo>() 
```

我收到一个异常，告诉我无法构建 IBar。我希望 Unity 在这里重新解析映射类型并返回 Impl。

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T09:14:28.080

如果您使用*流利的注册*，您可以使用`InjectionFactory`：

```
 container.RegisterType<IBar, Impl>();
 container.RegisterType<IFoo>(new InjectionFactory(c => c.Resolve<IBar>()));

 var foo = container.Resolve<IFoo>(); 
```

但不幸的是，`InjectionFactory`xml配置中不存在，所以你必须自己解析xml。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T22:19:22.483

Unity 不会这样做。您可以编写一个容器扩展来做到这一点；替换重复查找映射直到没有更多映射然后尝试解决最终结果的类型映射策略。

以这种方式建造它是一个有意识的决定。人们认为，像这样链接注册只会让人们感到困惑。在示例中很清楚，但实际的配置文件有几十种类型，很快就不可能发现您实际配置的是哪种类型。

因此，在您的情况下，我建议您这样做：

```
<register type="IFoo" mapTo="Impl"/> 
```

并认为它很好。

# objective-c - 目标 c 作业中的惰性评估？

> ID：12815251
> 
> 赞同：2
> 
> 时间：2012-10-10T08:37:35.590
> 
> 标签：objective-c, variable-assignment, lazy-evaluation

如果 a 为 nil，会调用 doSomeCalculations 吗？

`a.position = [self doSomeCalculations];`

我想它必须因为 doSomeCalculations 可以改变状态，但我不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:45:08.523

If`position`是一个属性，并且您将语句重写为等效的括号语法，您最终会得到：

```
[a setPosition:[self doSomeCalculations]]; 
```

这里不执行惰性求值。当您考虑到所有这些带括号的表达式都转换为对的函数调用时，它与嵌套函数调用没有什么不同`objc_msgSend()`：

```
objc_msgSend(a, sel_getUid("setPosition:"), objc_msgSend(self, sel_getUid("doSomeCalculations"))); 
```

底线是，`[self doSomeCalulations]`即使是，也会被`a`评估`nil`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:45:36.570

是的。您正在分配`[self doSomeCalculations]`将返回的任何内容，`a.position`无论它是否为零。

此外，这可能取决于您是否为位置编写了自己的访问器，但如果您使用了`@synthesize`d 访问器，它将被分配。

# java - ConstraintViolationException，我应该期望它被抛出然后处理它吗？或者我应该防止它被抛出？

> ID：12815254
> 
> 赞同：1
> 
> 时间：2012-10-10T08:37:43.360
> 
> 标签：java, hibernate, jdbc

在编写数据库代码时，我通常通过在更新或插入之前检查记录来防止抛出 ConstraintViolationException。

我不会等待 ContraintViolationException 发生然后处理它。这是因为数据库管理员曾经告诉我这是一种不好的做法。

但我看到许多开发人员处理 ContraintViolationException 和外键异常，而不是使用 sql 代码手动检查违规。

**问题是？哪个更好？我应该在出现此类异常时处理它们，还是应该在插入/更新操作之前查询对象并防止抛出这些错误？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T08:49:05.960

更好、更简单的方法是在出现此类异常时处理它们。因为这首先是 try catch 的目的。

如果您在插入/更新之前查询对象，那么您只需添加可能会减慢您的应用程序的代码，因为数据库旅行是资源密集型的。想象一下，如果有 1000 个用户并且应用程序会这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T09:08:39.097

没有错误的方法，但请记住，在 JPA 中进行回滚将导致当前会话的所有托管实体分离。

通常，在捕获到异常后会进行回滚，这可能会导致[难以追踪的错误](https://stackoverflow.com/q/12675654/1073063)。出于这个原因，我更喜欢在使用 JPA 时预先进行 ckeck。我认为通常情况下，我们此时不应该担心效率，这通常是过早的优化。

# java - java中的动态对象创建

> ID：12815255
> 
> 赞同：0
> 
> 时间：2012-10-10T08:37:45.360
> 
> 标签：java

我有下面的代码。

```
public class Test {
    public static void main(String args[])
    {
        int i = 0;

        if(i==0){
            Beer obj = new Beer();
        }
        else {
            Rum obj = new Rum();
        }
        System.out.println(obj.brand);  //doesn't work
    } }

class Drink {
} 
class Beer extends Drink{
    public String brand = "BeerBrand"; }

class Rum extends Drink{
    public String brand = "RumBrand"; } 
```

1.  有没有办法在不使用函数覆盖或动态类加载的情况下完成上述工作？
2.  所有类都在 JVM 中动态加载，没有像 C 中那样的静态加载。这是正确的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T08:40:26.297

`Drink`应该是一个抽象类，并提供一个抽象成员`getBrand()`或类似的，被and*覆盖*。`Beer``Rum`

然后你会做类似的事情：

```
Drink d = null;
if (...) {
   d = new Beer();
} 
```

所以你适当地实例化引用。因为它仍然是类型`Drink`，所以您可以参考品牌。Drink 参考将让您访问任何可饮用的东西，并且实现提供了细节。请注意，这`Drink`是*abstract*，因为您无法实例化 a `Drink`- 您必须更具体。

要回答您的进一步问题，您*可以*提供一个基本方法并执行以下操作：

```
if (this instanceof Beer) {
   ...
} 
```

以避免覆盖。但是你为什么会呢？

为了回答您的第二个问题，JVM 在引用时动态加载类。您可以通过`-verbose`在 JVM 上设置标志来观察这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T08:41:36.263

此代码不起作用，因为“obj”的范围仅在 if-else 块内。您需要在 Drink 类型的 if-else 块上方声明它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T08:42:23.157

> 有没有办法在不使用函数覆盖或动态类加载的情况下完成上述工作？

唯一的选择是使用反射，但修复类的设计会更简单/更好

> 所有类都在 JVM 中动态加载，没有像 C 中那样的静态加载。这是正确的吗？

是的。它们可以多次动态加载，甚至可以卸载。

* * *

使用面向对象的方法看起来像这样。

```
public class Test {
    public static void main(String... args) {
        Drink drink;
        if (args.length == 0) {
            drink = new Beer();
        } else {
            drink = new Rum();
        }
        System.out.println(drink.getBrand());
    }
}

interface Drink {
    public String getBrand();
}

class Beer implements Drink {
    @Override
    public String getBrand() {
        return "BeerBrand"; 
    }
}

class Rum implements Drink {
    @Override
    public String getBrand() {
        return "RumBrand";
    }
} 
```

# url - Liferay 为不同的机器显示不同的 URL

> ID：12815256
> 
> 赞同：5
> 
> 时间：2012-10-10T08:37:50.350
> 
> 标签：url, liferay, liferay-6

我看到**Liferay 6.1 GA2**在不同的机器上生成了不同的 URL，即使我在浏览器中输入以下相同的 URL：

```
http://my.ip.0.202:8080/ 
```

Machine-1 的浏览器生成：

```
http://my.ip.0.202:8080/en_GB/web/guest/home 
```

Machine-2 的浏览器生成：

```
http://my.ip.0.202:8080/web/guest/home 
```

两台机器上的配置，如语言设置、本地设置、浏览器设置、控制面​​板设置似乎相同。

谁能告诉我这是什么原因，我怎样才能强制两台机器的浏览器呈现相同的 URL`http://my.ip.0.202:8080/web/guest/home`

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T08:45:26.563

你检查过 Liferay Wiki：[Configure time zone and locale](http://www.liferay.com/community/wiki/-/wiki/Main/Configure+time+zones+and+locale#section-Configure+time+zones+and+locale-JVM+Locale+and+Time+Zone+Settings "Liferay Wiki：配置时区和区域设置")。

我没有尝试过，但据我的一位同事说：

两台机器可能存在本地化不匹配。因此，对于一台机器，“en_GB”会自动附加到 URL。

该问题可以通过在 portal-ext.properties 中设置一个属性来解决

```
locale.prepend.friendly.url.style=0 (by default it is set to 1). 
```

以下直接来自[`portal.properties`](https://github.com/liferay/liferay-portal/blob/master/portal-impl/src/portal.properties#L2262 "来自 Github 的 portal.properties 的 Liferay 源")：

```
#
# Set this to 0 if the locale is not automatically prepended to a URL. This
# means that each URL could potentially point to many different languages.
# For example, the URL http://localhost:8080/web/guest/home could then be
# viewed by users in many different languages.
#
# Set this to 1 if the locale is automatically prepended to a URL when the
# requested locale is not the default locale. This means that each URL
# points to just one language. For example, the URL
# http://localhost:8080/web/guest/home would point to the default language.
# The URL http://localhost:8080/zh/web/guest/home and
# http://localhost:8080/zh_CN/web/guest/home would both point to the Chinese
# language.
#
# In cases where the prepended locale is "zh" and not complete locale
# "zh_CN", then the full locale returned will be based on the order in which
# the locales appear in the property "locales". If "zh_CN" appears before
# "zh_TW", then "zh" will be a short hand for "zh_TW".
#
# The default language is set in system.properties with the properties
# "user.country" and "user.language".
#
# Set this to 2 if the locale is automatically prepended to every URL. This
# means that each URL points to just one language.
#
# Note that each language requires an entry in the property "locales" and a
# servlet mapping in web.xml for the I18n Servlet.
#
locale.prepend.friendly.url.style=1 
```

希望这可以帮助。

# git - 什么是异构应用程序的良好 Git 开发模型？

> ID：12815257
> 
> 赞同：0
> 
> 时间：2012-10-10T08:37:50.117
> 
> 标签：git, git-branch, git-submodules

我想开发一个由一个`iOS`和一个`Android`应用程序组成的应用程序。此外，还将有一个`Web`带有 REST API 的前端和一个底层的`Database`.

每个模块都会有一个开发团队，比如说，一个开发团队，一个开发团队，一个`iOS`开发`Android`团队`Web/Db`。

我对设置的第一个想法是以下存储库：

```
myapp-adm ~ Project administrative stuff (e.g. FSD, project plan, ...)
myapp-ios ~ iPhone App
myapp-jvm ~ Android App
myapp-web ~ Web/Db 
```

但是，通过这种设置，我遇到了管理模块之间依赖关系的问题。例如，所有模块都依赖于`myapp-adm`FSD。此外，模块`myapp-ios`和`myapp-jvm`依赖于`myapp-web`：

```
myapp-ios <- myapp-web <- myapp-adm  
myapp-jvm <- myapp-web <- myapp-adm 
```

我可以使用 Git 子模块（部分）解决这个问题，但据我所知，无法在 Git 中设置版本依赖项。对（参见[这里]（http://stackoverflow.com/questions/12813250/how-to-stick-a-submodule-to-a-fix-a-tag“如何将子模块粘贴到修复标签上） ？”））？例如：

```
 v1.0.3           v1.0
myapp-ios <------ myapp-web <---- myapp-adm  
           v1.0.3            v1.0
myapp-jvm <------ myapp-web <---- myapp-adm 
```

除了利用 Git 子模块的这种潜在设置之外，我想知道是否没有另一种利用 Git 分支的“单一存储库”方法。例如：

```
origin/master  ~ HEAD reflects production-ready state.
origin/dev-ios ~ HEAD reflects the latest iOS development changes for the next release
origin/dev-jvm ~ ...
origin/dev-web ~ ... 
```

我在这里遇到的问题是，`iOS`开发依赖于`web`开发，但 Web 开发人员致力于`origin/dev-web`. 对于`jvm`. 所以这不是一个真正的解决方案。

或者您会建议，例如，`iOS`开发团队必须不断地从 合并`origin/dev-web`？

任何提示/建议表示赞赏。

干杯，/纳米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:43:31.410

我建议在您的网络应用程序和移动应用程序之间设置比这更好的界限。换句话说，您的移动应用程序不应该与您的网络应用程序的特定版本紧密相关；你应该有一个他们使用的正确版本和向后兼容的 API。

有了这些，将应用程序简单地保存在单独的存储库中就很简单了。

# sql-server - 仅在 SQL Server 中获取 url 部分

> ID：12815258
> 
> 赞同：2
> 
> 时间：2012-10-10T08:37:51.347
> 
> 标签：sql-server, sql-server-2008

我的表数据如下所示：

```
SessionRefere  

http://www.google.com/url?sa=t&rct=j&q=aaa bbb&source=web&cd=1&cad=rja&sqi=2&ved=0CB4QFjAA&url=http://www.abc.com/&ei=QFR0UM-JKIrQrQfsuoG4CQ&usg=AFQjCNExYcKkcvobBbktLGNksptf1giQRw
-------------------------------------------------
http://www.google.com/reader/view/?hl=es&tab=Xq&at=RTknd_lBUUnvNqan2641EA
----------------------------------------------------
http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=5&cad=rja&ved=0CEgQFjAE&url=http://www.abc.com/ppp.aspx&ei=dmd0UOO9AYnY4QS1sYGwBw&usg=AFQjCNGIFcJUUSVpl_ZiZoSWDP2LkIagtw 
```

这只是样本数据。有很多这样的情况。所以我想要原始网址部分在计数之前。

我使用这个查询来获取数据。

```
DECLARE @temp table(RefPage nvarchar(200))
insert into @temp
SELECT
   CASE CHARINDEX( '?', SessionReferer)
       WHEN 0 THEN SessionReferer
       ELSE LEFT(SessionReferer, CHARINDEX( '?', SessionReferer) - 1) END AS RefPage 
FROM Tracker WHERE [start] between '1-1-2010' and '1-1-2015' and  SessionReferer<> ''

 select distinct RefPage, count(*) as [VisitTime] from @temp
  group by RefPage
order by [VisitTime] desc 
```

我的结果是：

```
SessionRefere                           VisitTime
http://www.google.com/url                 2
http://www.google.com/reader/view/        1 
```

但我想要一个结果：

```
SessionRefere                           VisitTime
http://www.google.com                      3 
```

是否有可能得到渴望的结果，或者我的方式不对？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T09:02:05.513

尝试这个

```
Declare @T Table(URL Varchar(MAX))
Insert Into @T Values('http://www.google.com/url?sa=t&rct=j&q=aaa bbb&source=web&cd=1&cad=rja&sqi=2&ved=0CB4QFjAA&url=http://www.abc.com/&ei=QFR0UM-JKIrQrQfsuoG4CQ&usg=AFQjCNExYcKkcvobBbktLGNksptf1giQRw')
Insert Into @T Values('http://www.google.com/reader/view/?hl=es&tab=Xq&at=RTknd_lBUUnvNqan2641EA')
Insert Into @T Values('http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=5&cad=rja&ved=0CEgQFjAE&url=http://www.abc.com/ppp.aspx&ei=dmd0UOO9AYnY4QS1sYGwBw&usg=AFQjCNGIFcJUUSVpl_ZiZoSWDP2LkIagtw')
Insert Into @T Values('http://www.yahoo.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=5&cad=rja&ved=0CEgQFjAE&url=http://www.abc.com/ppp.aspx&ei=dmd0UOO9AYnY4QS1sYGwBw&usg=AFQjCNGIFcJUUSVpl_ZiZoSWDP2LkIagtw')

;WITH CTE AS
(
    SELECT 
        URL
        ,SessionRefere = SUBSTRING(URL,0,CHARINDEX('://', URL)+3) + SUBSTRING(URL,CHARINDEX('://', URL)+3,CHARINDEX('/', SUBSTRING(URL,CHARINDEX('://', URL)+3,LEN(URL)))-1)
    FROM @T
)

SELECT SessionRefere,[VisitTime] = COUNT(SessionRefere)
FROM CTE
GROUP BY SessionRefere 
```

**输出**

```
SessionRefere   VisitTime
http://www.google.com   3
http://www.yahoo.com    1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T08:42:53.873

尝试拆分`CHARINDEX('/',SessionReferrer,9)`

```
 select 
   case when CHARINDEX('/',SessionReferrer,9) = 0 
     then SessionReferrer
     else left(SessionReferrer, CHARINDEX('/',SessionReferrer,9)-1)
   end,
   count(*)
 from Tracker      
 group by
   case when CHARINDEX('/',SessionReferrer,9) = 0 
     then SessionReferrer
     else left(SessionReferrer, CHARINDEX('/',SessionReferrer,9)-1)
   end 
```

（我懒惰地假设您所有的推荐人都以 http:// 或 https:// 开头）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T09:15:09.533

我在这里做：

对于字符串@test：
我正在从URL中拆分'//'和'/'之间的字符串，并根据给定的URL连接http：或https

```
Declare  @test nvarchar(100)
Declare @http nvarchar(8)
set @test = 'http://www.google.com/url?sa=t&rct=j&q=aaa bbb&source=web&cd=1&cad=rja&sqi=2&ved=0CB4QFjAA&url=http://www.abc.com/&ei=QFR0UM-JKIrQrQfsuoG4CQ&usg=AFQjCNExYcKkcvobBbktLGNksptf1giQRw'
declare @length int
declare @start int
declare @subString nvarchar(100)
set @start =( select CharIndex('//', @test))
set @http = SUBSTRING(@test, 0 , @start)
set @length = Len(@test)
set @subString = SUBSTRING ( @test ,@start+2 , @length )
set @start =( select CharIndex('/', @subString))
set @subString = SUBSTRING ( @subString ,0 , @start )
set @subString = @http+'//'+ @subString 
```

# hadoop - 公私云（混合云）

> ID：12815259
> 
> 赞同：1
> 
> 时间：2012-10-10T08:38:00.370
> 
> 标签：hadoop, amazon-ec2, cloud, amazon

假设我的预算有限，无法制作小型内部私有云。现在我希望能够将这个私有云与其中一个公共云（例如 Amazon EC2）结合起来。我有什么选择？

更具体地说，我希望能够执行以下操作：

1.  主要使用我的私有云，但如果数据集的请求率或大小增加，请将部分负载/数据传输到 EC2

2.  将我的机密数据存储在私有云上，并将更一般的数据移动到 EC2。收到请求后，我希望能够对公共数据进行一些计算，然后将其与对机密数据的一些计算结合起来。但绝不能损害数据的机密性。

我正在研究这个项目，并希望有任何想法/建议或相关材料。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T07:53:53.137

这是一个困难的问题，因为您可以采取的各种路径和数量都很棒。

无论如何，您所描述的是混合云：

首先你必须建立你的私有云，有很多选择，你有 CloudStack、OpenStack、Eucalyptus、Open Nebula 等。如果你选择开源方式（我推荐它）你可以看到这个分析不同的开源云计算解决方案：

[http://bit.ly/QeGpqK](http://bit.ly/QeGpqK)

当您拥有由私有云管理的自己的基础设施时，您需要像亚马逊这样的第三方提供商来部署基础设施的“公共端”。

现在是困难的部分：

您必须构建自己的逻辑，以便将基础架构扩展到“公共方面”，这实际上将是 80% 的工作，您必须计划何时、何地以及在何处进行扩展，您必须确定什么您要存储在公共端的数据等...

Rackspace 之类的工具可以为您提供一些帮助：

[http://www.rackspace.com/cloud/hybrid/](http://www.rackspace.com/cloud/hybrid/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T10:26:57.333

如果您计划拥有自己的混合云，则必须拥有自己的代码来处理 scaleUP 和其他供应任务。对于私有云，您可以选择 eucalyptus 或 OpenQRM。如果您对 Linux 感到满意，您可以使用与托管在 apache 服务器上的 Linux OS 捆绑在一起的开源 KVM，您可以从您的 java 或 PHP 代码中调用其公开的方法并执行配置和取消配置任务。否则您可以简单地使用 KVM 提供的管理控制台。citrix -Xen 也是选项之一。现在对于公共云 EC2 是一个选项，您可以使用各种其他 Iaas。为了获得高可用性，您可以开源 apache HAProxy 来处理您的负载平衡。当您处理一些数据时，您可以选择 BIG 数据提供商，包括 mapreduse、Terradata、IBM-netzza、

您必须编写的 scaleUP 代码以及私有云和公共云的集成。亚马逊公开了它的网络服务，你可以利用它......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T15:12:39.273

@arcade_fire 很好地概述了开源的竞争私有云产品。在此列表中，您可以添加 Microsoft 的 SCVMM 和 VMWare 的 vCloud。根据预算和工作量，这些专有产品也可能会引起人们的兴趣。

选择云操作系统后，考虑以下问题：

1.  您如何使混合云的公共和私有元素对您的网络透明？
2.  您如何控制由此产生的混合云？

第一个问题通过使用所谓的 VPC（虚拟私有云）来解决。该术语由 AWS 引入，用于描述位于私有网络上的公共云部署。这些机器通过 VPN 加入您的私有云。VPN 的一端位于云端，另一端位于您的数据中心。“aws vpc架构”的谷歌将为您提供一个很好的解释。我喜欢[EC2 到 VPC：值得做的过渡](http://blog.engineering.kiip.me/post/12288961849/ec2-to-vpc-transition-worth-doing)

第二个问题涉及您选择管理工具来管理您的工作负载，这些工具支持用于与您的每个公共和私人帐户进行通信的 API。原型示例是[RightScale](http://en.wikipedia.org/wiki/RightScale)，它支持许多 API，但还有其他的。@arcade_fire 提供了 Rackspace 的链接。或者，您可以找到可以根据预期工作负载定制工具的咨询公司，例如[ShapeBlue](http://www.shapeblue.com/iaas-cloud-design-and-build/)（CloudStack 生态系统）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-05T16:02:45.687

有专业的供应商提供私有（主要）和公共云的组合服务。它被称为混合云，您可以构建自己的私有云来为您的项目服务，并且您可以从公共云中提取一些元素来更好地为您服务，以防数据库增加而您自己的云有限。我个人喜欢stratoscale，他们的交响乐产品很好，可以满足客户的所有需求（根据我的经验），但显然你有很多（他们也与openstack一起工作。）

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-03-25T17:31:07.883

您所描述的无疑是混合云部署模型。根据我与我们团队的经验，我可以建议您继续给第三方工具一个机会。现在的第三方服务允许您在云环境中拥有所有相关的行动自由，这基本上意味着您可以完全控制您的云资源。这些服务让您可以管理您的本地私有云，同时将 AWS 用作本地，这是一项非常先进的功能。您可能想查看它以及成本，这些工具中的大多数都提供免费试用。

# c++ - 用调试版本覆盖 new 而不会损坏放置 new

> ID：12815261
> 
> 赞同：8
> 
> 时间：2012-10-10T08:38:10.933
> 
> 标签：c++, visual-c++, c++03

Microsoft 运行时库提供调试版本的分配函数。对于 C++，这是带有签名的 operator new 的调试变体：

```
void *operator new(size_t size, int blockType, const char *filename, int linenumber); 
```

并且宏定义为

```
#define DEBUG_NEW new(_NORMAL_BLOCK, __FILE__, __LINE__) 
```

现在要检测所有分配，通常定义

```
#if defined DEBUG_NEW
#define new DEBUG_NEW
#endif 
```

然而这个定义打破了任何使用placement new的地方，因为这两组参数最终是语法错误。现在我可以轻松处理我们代码中的少数用途，但标准库和 boost 使用新的布局。因此，全局定义它意味着在定义之前包含很多东西，这会减慢编译速度。

那么是否有任何方法可以在我们的代码中检测分配而无需仅仅因为它们包含新的位置而无需将上面的最后一个定义放在所有文件中或手动编写 DEBUG_NEW 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-07T15:02:58.327

```
#pragma push_macro("new")
#undef new

new(pointer) my_class_t(arg1, arg2);

#pragma pop_macro("new") 
```

或者

```
#pragma push_macro("new")
#undef new

#include <...>
#include <...>
#include <...>

#pragma pop_macro("new") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T08:48:56.540

我过去解决这个问题的方法是使用预编译的头文件，并执行类似的操作（StdAfx.h、Pch.h、PreCompiled.h 或其他）：

```
//First include all headers using placement new
#include <boost/tuple/tuple.hpp>
#include <vector>

#define new MY_NEW
#define MY_NEW new(__FILE__, __LINE__) 
```

然后确保没有文件直接包含 boost 标头，而只有预编译的标头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-04T13:04:44.087

我知道这有点晚了，但是可以通过使用模板魔术来解决这个问题。

我最近一直在编写一个 debug_new 调试器，它添加了一个新的关键字“placement”，它被写入所有放置新调用的前面。

你可以在这里查看我的调试器：[https ://sourceforge.net/projects/debugnew/](https://sourceforge.net/projects/debugnew/)

或者来自 nvwa 的 debug_new 调试器：[https ://sourceforge.net/projects/nvwa/](https://sourceforge.net/projects/nvwa/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-02T21:04:56.893

这整个 DEBUG_NEW 东西应该在火中死去！它只是几乎没有用，而且在现代 C++ 中根本没有用，因为你不再`new`在理智的 C++ 中看到它。

有更好的选择，比如 DUMA，现在有了[Dr. Memory （它的工作原理与](http://www.drmemory.org/)[Valgrind](http://valgrind.org/)类似，但在 Windows 上），使用 DEBUG_NEW 可憎绝对没有意义。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-10T08:54:24.860

`define new DEBUG_NEW`在所有#include 行之后，行应该放在源文件中。通过这种方式，它仅适用于您自己的代码，而不适用于任何其他 h 文件，如 Boost。全局新的 DEBUG_NEW 重新定义可能会导致编译失败，应该避免。

# asp.net-mvc - 如何使用 webgrid ASP.net MVC 3.0？

> ID：12815267
> 
> 赞同：0
> 
> 时间：2012-10-10T08:38:34.223
> 
> 标签：asp.net-mvc, entity-framework, webgrid

我是 ASP.net MVC 3.0 的新手，我想将我的数据显示到 WebGrid，并在视图中编写此代码。

```
@model IEnumerable<MvcApplication3.Models.MOVIE>

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

<p>
    @Html.ActionLink("Create New", "Create")
    @ViewBag.abc;
</p>

@Html.ActionLink("Asc Title", "Index", new { sortOrder = "asc" })
@Html.ActionLink("Desc Title", "Index", new { sortOrder = "desc" })

<table>
    <tr>
        <th>
            TITLE
        </th>
        <th>
            PRICE
        </th>
        <th>
            RELEASEDATE
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>            
            @Html.DisplayFor(modelItem => item.TITLE)
        </td>
        <td align="right">
            @Html.DisplayFor(modelItem => item.PRICE)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.RELEASEDATE)
        </td>
        <td>
            @Html.ActionLink("Edit Saya", "Edit", new { id=item.ID }) |
            @Html.ActionLink("Details", "Details", new { id=item.ID }) |
            @Html.ActionLink("Delete", "Delete", new { id=item.ID }) |          
            @Html.ActionLink("Select", "MoviedanArtis", new { id = item.ID }) 
        </td>
    </tr>
}

</table>

@{    
    var grid = new WebGrid(Model.ToList(), rowsPerPage: 6);    
}

<div id="grid">
    @grid.GetHtml(tableStyle: "grid", 
    headerStyle: "head",
    alternatingRowStyle: "alt",
    columns: grid.Columns(grid.Column("TITLE"), grid.Column("PRICE"), grid.Column("RELEASEDATE")))
</div> 
```

这是控制器

```
private MovieEntities db = new MovieEntities();

        //
        // GET: /Coba/        
        public ViewResult Index()
        {           
            return View(db.MOVIEs.ToList());
        } 
```

之后我总是得到错误“查询的结果不能被枚举多次”。我能做些什么来解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T10:28:05.007

您传递的模型应该是**实现“IEnumerable”的集合。例如，如果您将`List`其用作集合，请尝试使用`IList`.**

```
@using MyResource = Resources.ComWebResources
@model IList<App.WorksInformation> 
<div id="worksajaxgrid">

@{
  var grid = new WebGrid(Model, rowsPerPage: 6,
 ajaxUpdateContainerId:"worksajaxgrid",
 ajaxUpdateCallback:"ajaxUpdate_Callback");

   @grid.GetHtml(tableStyle: "webGrid",headerStyle: "header", alternatingRowStyle:     "alt", selectedRowStyle: "webgrid-selectedrow",
   columns: grid.Columns(

  grid.Column("SlNo", @MyResource.grid_SlNo, canSort: false, style: "webcolwidthSlNo"),
  grid.Column("WorkOrderId", @MyResource.grid_SCTWorkOrderId, canSort: false),
  grid.Column("Project", @MyResource.lbl_Project, canSort: false),
  grid.Column("WorkOrderNo", @MyResource.grid_WorkOrderNo, canSort: false),
  grid.Column("WorkCode", @MyResource.grid_WorkCode, canSort: false),
  grid.Column("WorkName", @MyResource.grid_WorkName, canSort: false)
 ));
 }
</div> 
```

与网络资源不同，您可以直接放置您想要显示的任何标签，而不是使用资源。例如`"serial No"`，而不是`@MyResource.grid_SlNo`

根据您的评论添加了修改。

```
public class MOVIE
{
   public string TITLE{get;set;}
   public string NAME{get;set;}

}

IList<MOVIE>MOVIEList= new List<MOVIE>{new MOVIE{"Pirates of the Caribbian","PC"}, new MOVIE{"Lord of the Rings","LR"} ..} 
```

通过这样的模型

# c# - 如何显示服务器文件夹中的特定 ID 图像

> ID：12815269
> 
> 赞同：0
> 
> 时间：2012-10-10T08:38:52.707
> 
> 标签：c#, asp.net, .net, sql-server, sql-server-2008-r2

图像文件名通过添加`vendorID`之前的唯一存储，如“200018hari”。下图显示了`filename`存储在列中的表`Cmp_DocPath`。

![文件名存储在 Cmp_DocPath 列中的表](../Images/b5ba67e5572e3cb8d6642153eba11b7c.png)

`VendorID`当用户从下拉列表中选择时，我想显示服务器文件夹“D:\Upload\Commerical Certificates”中的特定图像`vendorID`。（图片不会显示带有下拉列表的完整表单设计。）

![表格设计](../Images/603d72f6c38330122a843839d70cc9b8.png)

我在内联代码中尝试此操作，但图像不显示。但我知道如果用户`VendorID`从下拉列表中选择其他，这对我没有帮助。

我将如何使用 C# 中的代码隐藏？

```
 <asp:Image ID="Image1" runat="server" Height="400px" Width="400px" 
    ImageUrl ="AdminCompanyInfo.aspx?FileName=~/Upload/Commerical Certificates/200027mcp.png"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T05:11:51.563

在朋友的建议下，我更改了将图片存储在物理路径“D:\Upload”中的代码，并将上传的图片存储在“D:\inetpub\wwwroot\”中。最后，在 IIS 中创建虚拟目录，并将“D:\inetpub\wwwroot\Upload”作为物理路径。下面的 C# 代码从虚拟路径中检索图像。

```
 private void CallImage()
      {
       SqlConnection SqlCon = new SqlConnection(GetConnectionString());
       SqlCon.Open();
       string query = "SELECT FilePath FROM CompanyInfo 
              WHERE VendorID= '" + ddlVendorID.SelectedValue + "'";
       SqlCommand SqlCmd = new SqlCommand(query, SqlCon);
       SqlDataAdapter da = new SqlDataAdapter(SqlCmd);
       DataTable dt = new DataTable();
       da.Fill(dt);
       string ImageName = Convert.ToString(dt.Rows[0][0].ToString());
       Image1.ImageUrl = ("~\\Upload\\Commerical Certificates\\" + ImageName);
       SqlCon.Close();
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T09:04:28.870

如果您试图获取`Cmp_DocPath`与 a 关联的图像 ()，则`VendorID`需要使用 a `Generic Handler`。以下应该是该技术的`Generic Handler`。

1.  这`Generic Handler`将从数据库中读取图像名称
2.  之后它将图像文件读入二进制数组
3.  之后它将写入数组以响应请求。

那一定行得通。

# android - Android中的自定义标题栏

> ID：12815271
> 
> 赞同：0
> 
> 时间：2012-10-10T08:39:12.520
> 
> 标签：android, titlebar

我创建了一个自定义标题栏，它包含一个 TextView 和标签。我已将其添加到以下活动中

```
 requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
    setContentView(R.layout.homepage);
    getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE,
            R.layout.windowtitle); 
```

但现在我想在标题栏中的文本视图中显示当前时间。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:50:05.307

you can get text view like this.create a `mytitle.xml` layout with `textview` and then add this code it will work..

```
@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
final boolean customTitleSupported = requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);

setContentView(R.layout.main);

  if ( customTitleSupported ) {
      getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.mytitle);
  }

  final TextView myTitleText = (TextView) findViewById(R.id.myTitle);
  if ( myTitleText != null ) {         
      myTitleText.setText(" TITLE  ");     
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T08:47:44.980

请尝试以下代码

```
LayoutInflater inflater = (LayoutInflater) getSystemService(Activity.LAYOUT_INFLATER_SERVICE);
View view = inflater.inflate(R.layout.windowtitle, null, true);
TextView textView = (TextView) view.findViewById(R.id.txtdate);
Calendar c = Calendar.getInstance();
System.out.println("Current time => " + c.getTime());
txtdate.setText(c.getTime()); 
```

# iphone - 视图 iOS 上的图像位置

> ID：12815273
> 
> 赞同：1
> 
> 时间：2012-10-10T08:39:15.420
> 
> 标签：iphone, ios, xcode, ipad

我在拖动图像时遇到了一些问题。所以我使用这段代码：

```
-(void)panDetected:(UIPanGestureRecognizer *)panRecognizer {
    CGPoint translation = [panRecognizer translationInView:self.view];
    CGPoint imageViewPosition = player1.center;
    imageViewPosition.x +=translation.x;
    imageViewPosition.y +=translation.y;
    player1.center = imageViewPosition;
    [panRecognizer setTranslation:CGPointZero inView:self.view];
    [self SaveColorRealTime];
}

-(void)pinchDetected:(UIPinchGestureRecognizer *)pinchRecognizer {
    CGFloat scale = pinchRecognizer.scale;
    player1.transform = CGAffineTransformScale(player1.transform, scale, scale);
    pinchRecognizer.scale = 1.0;

}

-(void)rotationDetected:(UIRotationGestureRecognizer *)rotationRecognizer {
    CGFloat angle = rotationRecognizer.rotation;
    player1.transform = CGAffineTransformRotate(player1.transform, angle);
    rotationRecognizer.rotation = 0.0;
}

-(void)tapDetected:(UITapGestureRecognizer *)tapRecognizer {
    [UIView animateWithDuration:0.25 animations:^{
        player1.center = CGPointMake(CGRectGetMidX(self.view.bounds), CGRectGetMidY(self.view.bounds));
        player1.transform = CGAffineTransformIdentity;
    }];
}
- (void)viewDidLoad
{
    [super viewDidLoad];

player1.userInteractionEnabled = YES;

UIPanGestureRecognizer *panRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(panDetected:)];
    [player1 addGestureRecognizer:panRecognizer]; 

UIPinchGestureRecognizer *pinchRecognizer = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(pinchDetected:)];
[player1 addGestureRecognizer:pinchRecognizer];

UIRotationGestureRecognizer *rotationRecognizer = [[UIRotationGestureRecognizer alloc]initWithTarget:self action:@selector(rotationDetected:)];
[player1 addGestureRecognizer:rotationRecognizer];

UITapGestureRecognizer *tapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapDetected:)];
tapRecognizer.numberOfTapsRequired = 2;
[player1 addGestureRecognizer:tapRecognizer]; 
```

它可以工作，用户可以在视图上拖动图像，但是当用户转到其他视图时，图像的位置会刷新。你有什么想法如何保存图像位置？谢谢

# flash - 这种 RTMFP 延迟是否可以接受？

> ID：12815276
> 
> 赞同：1
> 
> 时间：2012-10-10T08:39:26.857
> 
> 标签：flash, apache-flex, video, p2p, rtmfp

我有一个项目要求我使用 RTMFP Flex 使用 flash p2p 视频。当我们测试应用程序时，质量很好，但音频和视频有明显的延迟（1-2 秒）。我调整了设置以降低质量以实现可接受的延迟，但客户正在将其与 Skype 视频进行比较。

有什么我错过的吗？rtmfp 可接受的延迟是多少？Skype 是否优于 flash p2p 视频？你能列出与我的问题相关的因素吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T13:22:00.450

我设法实现了大约 0.1 秒的延迟，这在对话过程中并不明显。我用过的几个技巧：

1.  不要使用 RTMFP 组。由于 multicaastWindowDuration，它们无法处理实时通信。
2.  在每个使用的 NetStream 上使用 bufferTime = 0。
3.  麦克风上的 framesPerPacket = 1。

您也可以在 NetStreams 上尝试 videoReliable = false, audioReliable = false。

您应该看到以下资源：

[http://www.adobe.com/devnet/flashplayer/articles/acoustic-echo-cancellation.html](http://www.adobe.com/devnet/flashplayer/articles/acoustic-echo-cancellation.html)

[http://www.adobe.com/devnet/adobe-media-server/articles/real-time-collaboration.html](http://www.adobe.com/devnet/adobe-media-server/articles/real-time-collaboration.html)

# javascript - 如何为返回的 Json 动态创建 ajax 链接

> ID：12815277
> 
> 赞同：1
> 
> 时间：2012-10-10T08:39:27.843
> 
> 标签：javascript, json

我有以下将在页面加载时执行的 javaScript：-

```
$(document).ready(function () {

    $.ajax({
        type: "GET",
        url: "http://localhost:8080/jw/web/json/workflow/package/list?loginAs=admin",

        dataType: "JSONP",
        // contentType: "application/json; charset=utf-8",
        success: function (result) {
            $.each(result.data, function (key, val) {

                // Format the text to display.
                var str = val.packageName ;
                // Add a list item for the product.
                $('<li/>', { text: str })
                .appendTo($('#products'));

            });
        }
    });
}); 
```

并且 asp.net 网页具有以下列表，其中列表中的每个项目表示一个 JSON 对象：-

```
<h1>All Processes</h1>
<ul id="products"/> 
```

但我想要做的不仅仅是`val.packageName`在列表中显示，而是为每个 josn 对象动态创建一个 ajax 链接，当用户点击这个 ajax 链接来调用另一个 API，`.../web/json/workflow/process/list?packageId=val.packageName`然后在另一个 API 中显示返回的 JSON列表。但是任何人都可以帮助我如何执行这样的功能吗？BR

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-02T14:29:47.950

I believe that's the way to handler events on a list([http://the-jquerymobile-tutorial.org/jquery-mobile-tutorial-CH11.php](http://the-jquerymobile-tutorial.org/jquery-mobile-tutorial-CH11.php))

this works perfectly for me with a little alteration...

```
$('ul#products li').click(function(o){
    // alert($(this).text())
    // call your other api here...
}); 
```

Use it this way:

```
$(document).on('click', 'ul#products li', function(e){
    alert($(this).text());
}); 
```

Also take a look on those selectors: [http://www.w3schools.com/jquery/jquery_selectors.asp](http://www.w3schools.com/jquery/jquery_selectors.asp)

regards :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:44:18.960

测试小提琴 - [http://jsfiddle.net/picklespy/zWQHh/](http://jsfiddle.net/picklespy/zWQHh/)

只需将列表项添加到`ul`上面并将以下内容添加到您的 javascript 代码中：

```
$('ul#products li').click(function(o){
    // alert($(this).text())
    // call your other api here...
}); 
```

这将为 中的每个列表项添加一个单击处理程序，单击该处理程序`<ul id="products">`时，将调用您的第二个 ajax。

希望这可以帮助。

# asp.net - 使用 LINQ 的 ASP.NET 中的 Silverlight 项目中的错误

> ID：12815278
> 
> 赞同：1
> 
> 时间：2012-10-10T08:39:29.337
> 
> 标签：asp.net, linq, silverlight-4.0

我想在 ASP.NET 和 LINQ 中制作一个简单的 Silverlight 应用程序。我有两个表

> 学生：[student_id,student_name,address, phone,country_id] 国家：[country_id,country_name]

Thiw 拖车表由 country_id 连接。我在我的项目中引入了一个 LINQ 数据类。我已经包含了一个 Silverlight-Enabled-WCF-Service。在这项服务中，我制作了两种方法，代码就像

```
[OperationContract]
        public List<Country> LoadCountry()
        {
            var result = from coun in oLINQDataClassesDataContext.Countries
                         select coun;
            return result.ToList();
        }

        [OperationContract]
        public IList<Student> LoadStudent()
        {

            var result = from std in oLINQDataClassesDataContext.Students
                         select std;        
            return result.ToList();
        } 
```

然后我添加该 WCF 服务的服务引用。然后我在silverlight .xml 文件中包含一个DataGrid。

现在我想展示那个 DataGrid 中的所有学生。为此，我编写了以下代码

WCFServiceReference.WCFServiceClient oWCFServiceClient = new WCFServiceReference.WCFServiceClient();

```
 public Home()
    {
        InitializeComponent();
        oWCFServiceClient.LoadStudentCompleted += new EventHandler<WCFServiceReference.LoadStudentCompletedEventArgs>(oWCFServiceClient_LoadStudentCompleted);
        oWCFServiceClient.LoadStudentAsync();

    }

    void oWCFServiceClient_LoadStudentCompleted(object sender, WCFServiceReference.LoadStudentCompletedEventArgs e)
    {
        dataGrid1.ItemsSource = e.Result;
    } 
```

然后我构建了整个项目，没有发现错误。如果我运行该项目，那么我发现了一个错误，它是——

> 操作过程中发生异常，导致结果无效。检查 InnerException 以获取异常详细信息。在 System.ComponentModel.AsyncCompletedEventArgs.RaiseExceptionIfNecessary() 在 Silverlight.WCFServiceReference.LoadStudentCompletedEventArgs.get_Result() 在 Silverlight.Home.oWCFServiceClient_LoadStudentCompleted(Object sender, LoadStudentCompletedEventArgse) 在 Silverlight.WCFServiceReference.WCFServiceClient.OnLoadStudentCompleted(Object state)

如果我从 LINQ 类中删除县表并从服务中删除 LoadCountry() 方法并从 silverlight 表单中调用 LoadStudent() 方法，那么它会准确运行并且所有数据都显示在我的 DataGrid 中。

如果我从 LINQ 类中删除学生表并从服务中删除 LoadStudent() 方法，则 LoadCountry() 方法会准确运行。如果 LINQ 和 WCF 服务同时存在，这两种方法都不起作用。

注意：两张表都有数据。如果我运行 SQL 连接查询，那么它会返回数据

我不明白问题是什么。

有没有人可以帮助我解决这个问题？

提前致谢。皮疹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:34:20.863

转到 dbml 文件的属性并将序列化模式更改为单向

# iphone - UISegmentedControl 中的条之间的空间

> ID：12815279
> 
> 赞同：2
> 
> 时间：2012-10-10T08:39:31.150
> 
> 标签：iphone, objective-c, ios, uisegmentedcontrol

如何增加 UISegmentedControl 中的条之间的空间？而不是创建一个单独的按钮。我想拆分段控制栏。

![在此处输入图像描述](../Images/be9c2c0306675285eaacd817cac032dd.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T08:44:29.850

使用以下方法设置宽度，

```
[segment setWidth: forSegmentAtIndex:]; 
```

这将允许您增加各个段的宽度。

**更新：** 如果您想拆分各个部分，您可能需要放置一个自定义图像，`dividerImage`以使其看起来像是分开的。您需要使用以下方法进行设置`dividerImage`。

```
- (void)setDividerImage:(UIImage *)dividerImage forLeftSegmentState:(UIControlState)leftState rightSegmentState:(UIControlState)rightState barMetrics:(UIBarMetrics)barMetrics 
```

# python - 如何循环浏览列表中的项目并将每个项目输入一个函数

> ID：12815286
> 
> 赞同：4
> 
> 时间：2012-10-10T08:39:45.250
> 
> 标签：python

> **可能重复：**
> [Python：对于每个列表元素，在列表中应用一个函数](https://stackoverflow.com/questions/493367/python-for-each-list-element-apply-a-function-across-the-list)

例如，假设我有一个数组或列表

```
myList = [a,b,c,d] 
```

我有一个生成随机数的函数。

如何浏览列表并让该列表中的每个项目接收由函数生成的随机数并添加到项目中？

因此，假设 'a' 是列表中的第一个，'a' 进入生成随机数（比如说 5）的函数并将其自身添加到 'a' 结果应该是 `[a+5, b+ .......]。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T08:40:22.693

您使用[列表理解](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)：

```
[func(elem) for elem in lst] 
```

对于您的具体示例，您可以使用对值求和的表达式：

```
[elem + func() for elem in myList] 
```

where`func()`返回你的随机数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T08:41:28.897

使用[`map()`](http://docs.python.org/library/functions.html#map)函数，将函数应用于可迭代的每个项目并返回结果列表：

```
def myfunc(x):
     return x ** 2

>>> map(func, [1,2,3])
[1, 4, 9] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T08:58:13.457

我假设你在谈论整数。这个小脚本应该做你想做的事：

```
import random

def gen_rand(number):
    generated = random.randint(1, 10) # you can specify whatever range you want
    print generated
    return number + generated

myList = [1,2,3,4,5]
print str(myList)
myList = [gen_rand(item) for item in myList]
print str(myList) 
```

或者您可以使用 map 函数而不是 for 循环。代替

```
myList = [gen_rand(item) for item in myList] 
```

和

```
myList = map(gen_rand,myList) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T13:25:34.310

如果你需要一个班轮:-)

```
myList = [1,2,3,4]    
[ i + map(lambda i: random.randint(10,20), myList)[index] for index, i in enumerate(myList) ] 
```

# meteor - Meteor 跑错路了吗？

> ID：12815289
> 
> 赞同：1
> 
> 时间：2012-10-10T08:40:04.037
> 
> 标签：meteor

我刚刚从 auth 分支安装了 Meteor。Meteor 似乎从**/usr/lib/meteor**读取其内容- 但它已安装到**/usr/local/meteor**。**/usr/local/meteor/packages**包含我需要的所有包，但是当我从终端列出包时，它会显示默认包。我正在尝试运行我最近在另一台计算机上创建的项目：

```
Errors prevented startup:
Exception while bundling application:
Error: The package named accounts-ui does not exist.
at _.extend.init_from_library (/usr/lib/meteor/app/lib/packages.js:91:13)
at Object.module.exports.get (/usr/lib/meteor/app/lib/packages.js:225:11)
at self.api.use (/usr/lib/meteor/app/lib/bundler.js:83:28)
at Array.forEach (native)
at Function._.each._.forEach (/usr/lib/meteor/app/lib/third/underscore.js:76:11)
at Object.self.api.use (/usr/lib/meteor/app/lib/bundler.js:82:9)
at _.extend.init_from_app_dir [as on_use] (/usr/lib/meteor/app/lib/packages.js:136:11)
at _.extend.use (/usr/lib/meteor/app/lib/bundler.js:362:11)
at Object.exports.bundle (/usr/lib/meteor/app/lib/bundler.js:649:12)
at exports.run.restart_server (/usr/lib/meteor/app/meteor/run.js:509:26)
Your application is crashing. Waiting for file change. 
```

我的第一个想法是某些“流星路径变量”设置错误，但我找不到类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:07:37.740

已解决 - 重新启动计算机..

# android - 我的 Android 应用的一些用户遇到了不满意的链接错误

> ID：12815293
> 
> 赞同：3
> 
> 时间：2012-10-10T08:40:14.577
> 
> 标签：android, android-ndk, unsatisfiedlinkerror

为什么只有我的一些客户遇到不满意的链接错误，而它在大多数情况下都能完美运行？

```
java.lang.UnsatisfiedLinkError: Couldn't load Foo: findLibrary returned null 
```

我以前读过这个问题，但找不到解决方案。有任何想法吗？

谢谢

编辑：Android.mk

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

# disable thumb mode
LOCAL_ARM_MODE := arm

LOCAL_MODULE := Foo

#-Wno-psabi to remove warning about GCC 4.4 va_list warning
LOCAL_CFLAGS := -DANDROID_NDK -Wno-psabi -Wno-write-strings

LOCAL_DEFAULT_CPP_EXTENSION := cpp

LOCAL_SRC_FILES := \
    source1.cpp \
    source2.c

LOCAL_LDLIBS := -lGLESv1_CM -ldl -llog -lz

include $(BUILD_SHARED_LIBRARY) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T08:46:51.710

一个原因可能是您为 ARM v7（即 with `APP_ABI=armeabi-v7a`）构建了库，而不是为 ARM v6（`APP_ABI=armeabi`）构建了库。但也许您的一些客户正在使用 MIPS 或 x86 驱动的设备？

如果这些解释不合适，请提供更多信息，例如显示您的`Android.mk`和`Application.mk`文件。

# java - java - 如何延迟java编程？

> ID：12815299
> 
> 赞同：0
> 
> 时间：2012-10-10T08:40:34.423
> 
> 标签：java, multithreading

我想使用特定时间一个接一个地绘制矩形数量。我使用 thread.sleep() 方法，但它直接停止线程工作而不是恢复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T08:41:44.813

在工作线程上使用[Thread.sleep(long millis)代替。](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Thread.html#sleep%28long%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T08:41:53.360

指定睡眠的毫秒数：

```
Thread.sleep(2000); // two seconds 
```

请注意，您需要处理`InterruptedException`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T08:42:00.867

您需要将睡眠放在另一个线程中。如果您将睡眠置于 GUI 线程中，则 GUI 将冻结。

编辑：我的错，将把它留在这里作为旁注评论。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T08:42:31.503

你可以使用`Timer`和`TimeTask`类。

请参阅此[示例](http://enos.itcollege.ee/~jpoial/docs/tutorial/essential/threads/timer.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T08:42:31.033

看看[java executors](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Executors.html#newSingleThreadScheduledExecutor%28%29)。这些可以运行固定的时间。然后，您可以在每个执行器单元内绘制一个矩形。（在[EDT](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)上）[此](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ScheduledExecutorService.html)API 文档顶部有一个有用的示例

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-10T08:46:04.783

您应该在单独的`thread`. `thread`为睡眠的每个循环创建单独的。

这样，您可以将 的线程`looping`和 的线程分开`drawing`。因此，消除了*冻结*。

```
public class RunTest implements Runnable{

    @Override
    public void run() {
        // codes for drawing
    }

} 
```

在你的主要：

```
 try {
      while (true) {
        Thread t = new Thread(new RunTest());
        t.start();
      }
    } catch (InterruptedException iex) {} 
```

这将为您的绘图创建**无限**数量的线程。只需修改此循环。

[有关线程](http://www.javamex.com/tutorials/threads/)，请参见此处。

# objective-c - JSON 字典中的无效（非字符串）键

> ID：12815301
> 
> 赞同：3
> 
> 时间：2012-10-10T08:40:37.420
> 
> 标签：objective-c, json, nsdictionary, xcode4.5

最后一行总是抛出异常：“JSON 字典中的无效键”。我不知道为什么。我可以打印“味精”字典。

```
NSDictionary* header = @{
@(udpVersion) : @"ver",
@(self.dataType) : @"type",
@(self.ack) : @"ack",
[WBUserMng sharedClient].getUserId : @"src",
};

NSDictionary* msg = @{
header:@"head",
self.payload:@"data",
};

NSError* error = nil;
return [NSJSONSerialization dataWithJSONObject:msg options:kNilOptions error:&error] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T09:12:37.160

我认为您在字典文字的新 Objective C 语法中*键*和*值的顺序错误。*应该是

```
NSDictionary* msg = @{
    @"head" : header,
    @"data" : self.payload
}; 
```

`header`字典也是如此。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-10T09:04:14.127

我第一次看到 @{} 或 @(self.dataType) 指令。我不知道你如何编译它。给我们更多提示。

```
NSDictionary* dic = [NSDictionary dictionaryWithObject: @"a" forKey: @"b"];

[NSJSONSerialization dataWithJSONObject: dic options: NSJSONWritingPrettyPrinted error: nil]; 
```

或者

```
NSString* jsonString =  @"{\"foo\": \"bar\", \"foo2\": \"bar2\"}";
// no commat one the last JSON line
[NSJSONSerialization dataWithJSONObject: jsonString options: NSJSONWritingPrettyPrinted error: nil]; 
```

# php - 后端列表记录 TYPO3 扩展

> ID：12815303
> 
> 赞同：1
> 
> 时间：2012-10-10T08:40:43.030
> 
> 标签：php, typo3, typo3-tca

我正在尝试使用后端列表记录创建我的第一个 TYPO3 扩展。

现在我可以注册我自己的列表记录，但它们在 tt_news 下注册，如下所示：

*   消息
    *   消息
    *   新闻猫
    *   存货

当然，我想让我的扩展程序有它自己的父类别，就像 tt_news 一样。

*   消息

    *   消息
    *   新闻猫
*   库存

    *   库存项目

有人有这方面的经验吗？

到目前为止，我的 ext_tables.php：

```
<?php
if (!defined ('TYPO3_MODE')) die ('Access denied.');

$TCA['tx_inventory_domain_model_product'] = array (
'ctrl' => array (
        'title' => 'Inventory',
        'label' => 'name',
),
'columns' => array(
        'name' => array(
        'label' => 'Item Label',
                'config' => array(
                        'type' => 'input',
                        'size' => '20',
                        'eval' => 'trim,required'
                )
        ),
        'description' => array(
                'label' => 'Item Description',
                'config' => array(
                        'type' => 'text',
                        'eval' => 'trim'
                )
        ),
        'quantity' => array(
                'label' => 'Stock Quantity',
                'config' => array(
                        'type' => 'input',
                        'size' => '4',
                        'eval'=> 'int'
                )
        ),
),
'types' => array(
        '0' => array('showitem' => 'name, description, quantity')
)
);
?> 
```

# php - 将csv文件直接导入phpmyadmin

> ID：12815304
> 
> 赞同：0
> 
> 时间：2012-10-10T08:40:51.570
> 
> 标签：php, mysql, phpmyadmin

> **可能重复：**
> [第 1 行的 CSV 输入中的字段计数无效](https://stackoverflow.com/questions/6169562/invalid-field-count-in-csv-input-on-line-1)

当我转到 phpmyadmin 并在单击“导入”时选择了我想要的数据库和表后。当我点击“GO”时，它会产生错误

> 第 1 行的 CSV 输入中的字段计数无效。

那么如何将我的 csv 文件直接导入 mysql 数据库。

我试过了

```
LOAD DATA LOCAL INFILE 'C:\Users\ah\Documents\mathema_utf8.csv'
    INTO TABLE subject3
    FIELDS TERMINATED BY ','
    LINES TERMINATED BY '\n' IGNORE 1 LINES (col1, col2, col3, col4) 
```

但它会产生错误

> #7890 - 找不到文件“C:Userspra​​tibhaDocumentsmathema_utf8.csv”。

那么文件名应该是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T09:55:39.067

接下来做：

*   字段分隔符 -> 使用“”（空格），而不是逗号
*   路径分隔符 -> 使用 '\' 或 '/'

试试这个查询 -

```
LOAD DATA LOCAL INFILE 'C:\\Users\\ah\\Documents\\mathema_utf8.csv'
INTO TABLE subject3
FIELDS TERMINATED BY ' '
LINES TERMINATED BY '\n' 
```

还：

*   行分隔符可能应该是“\r\n”，而不是“\n”。
*   要修复路径错误，请尝试删除 LOCAL 关键字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T08:49:16.100

我曾经遇到过类似的情况，对我来说这是错误的文件编码。

尝试更改编码，并尝试在界面上指定。

另一种方法是导入一个全新的表，并使用 SELECT 填充您的表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T09:18:41.883

假设 mysql 服务器安装路径为`C:\Program Files\MySQL\MySQL Server 5.0`

将 csv 文件 ( `mathema_utf8.csv`) 复制到`C:\Program Files\MySQL\MySQL Server 5.0\bin\`

并运行

```
LOAD DATA LOCAL INFILE 'mathema_utf8.csv'
    INTO TABLE subject3
    FIELDS TERMINATED BY ' '
    LINES TERMINATED BY '\n' IGNORE 1 LINES (col1, col2, col3, col4) 
```

这将解决第二个错误。但是，如果您希望有人帮助解决第一个错误，您需要提供 csv 的架构和详细信息。

# php - 使用 GD 将 CMYK 转换为 RGB 错误

> ID：12815305
> 
> 赞同：0
> 
> 时间：2012-10-10T08:40:54.143
> 
> 标签：php, image, gd

我正在使用 PHP 和 GD 进行标准图像优化/调整大小技术，基本上：

```
imagecreatefromjpeg()
imagecreatetruecolor()
imagecopyresampled()
imagejpeg() 
```

然而，人们抱怨上传后 CYMK 徽标出现了不同的颜色。我知道这是因为 GD 正在转换为 RGB，但我想知道是否有办法改进它？

由于这些通常是人们的标志，他们正确地保护所使用的颜色并希望它们是正确的。

我知道有一些很好的工具可以在线转换单一颜色，但我想要一些可以添加到我的类文件中的东西，将图像中的所有 CMYK 颜色转换为更准确的 CMYK 等效版本。

举个简单的例子，一张没有转换就上传的图片，然后用 chrome 中的颜色选择器扩展选择了这个图片，我得到了这个 HEX 代码：#992A78。通过上面的脚本运行它，它将它转换为这个：#9000F6;

有人对我有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T08:54:36.750

GD 根本不支持颜色管理，这解释了颜色偏移，因此那里可能没有可行的解决方法。您可能想使用[ImageMagick](http://www.imagemagick.org/)进行一些快速测试，它似乎支持各种颜色配置文件。

# javascript - 在php中导入Javascript文件？

> ID：12815306
> 
> 赞同：0
> 
> 时间：2012-10-10T08:40:54.920
> 
> 标签：javascript

我有 1 个仅包含关联数组的 javascript 文件。（此文件将由测试工具生成，因此不允许更改此 r）。我需要在 php 文件中使用该数组的值，以便我可以将这些值存储在数据库中。请指定如何执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:42:10.927

你最好的选择是使用 JSON。PHP 本身不支持 Javascript，但 JSON 是许多平台都理解的 Javascript 的一个常见子集（这意味着如果您需要在其他地方重用这些数据，它将得到更广泛的支持）。

特别是，您从文件中读取字符串，然后使用 json_decode：

```
$json_str = file_get_contents("json_file.js");
json_vals = json_decode($json_str); 
```

根据您的评论：

```
<?php
    $json_orig = <<<'json_oend'
var mime_samples =
    [ {
        'mime': 'application/xhtml+xml',
        'samples': [{
            'url': 'demo.testfire.net/',
            'dir': '_m0/0', //it is for show trace
            'linked': 2,
            'len': 9645 }] },
    {
        'mime': 'text/html',
        'samples': [{
            'url': 'demo.testfire.net/.htaccess.aspx--\x3e\x22\x3e\x27\x3e\x27\x22\x3csfi000??001v275174\x3e',
            'dir': '_m1/0', //it is for show trace
            'linked': 2,
            'len': 34 }] } ];
json_oend;
    $json_str = preg_replace("/var[^=]*=/m", "", $json_orig);
    $json_str = preg_replace("/;.*/m", "", $json_str);
    $json_str = preg_replace("/'/m", "\"", $json_str);
    $json_str = preg_replace("/\\/\\/.*/", "", $json_str);
    $json_str = preg_replace("/\\\\x/", "\\u00", $json_str);
    $json_val = json_decode($json_str, true);

    for($i=0; $i<count($json_val); ++$i)
    {
        $samples = $json_val[$i]["samples"];
        for($j=0; $j<count($samples); ++$j)
        {
            echo "$i.$j\n";
            echo $samples[$j]['url'];
            echo "\n";
        }
    }
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T08:44:16.027

PHP 可以[通过 V8 引擎](http://www.php.net/manual/en/book.v8js.php)运行 JavaScript ，尽管您可能必须[安装它](http://www.php.net/manual/en/v8js.installation.php)。您可以使用它来执行您的 JavaScript 并（希望）提取数据。

* * *

或者，编写一个加载 JavaScript 的网页，然后通过 Ajax 将其中的数据提交给 PHP 脚本。

# objective-c - 将 XML 文件连接到标签（objective-C）

> ID：12815308
> 
> 赞同：0
> 
> 时间：2012-10-10T08:41:04.187
> 
> 标签：objective-c, ios, xml, uilabel

我有一个`UIViewController`带有一个按钮和一个**标签**的页面。我在我的项目中添加了 xml 解析器并且一切正常（我在控制台中对其进行了测试），现在我想将我的 XML 文件连接到我的标签以获取 XML 文件的一个属性（用于测试）。我的问题是如何将 XML 连接到我的标签。你能给我一些实现这个的提示吗？

我是 Objective-C 的新手

这是我的代码：

我只是想看看我们如何将 xml 文件连接到标签

```
 - (void)viewDidLoad
 {
   //appDelegate = (testAppDelegate *)[[UIApplication sharedApplication] delegate];
   label.textColor = [UIColor greenColor];
   // label.text = aBook.title; //it not working, I don't know what should I write to get one   
   // element of xml file to this label or first element of xml file

   [super viewDidLoad];

 } 
```

这是我的xml文件

```
<?xml version="1.0" encoding="UTF-8"?><Books>

<Book id="1">
    <title>
        Circumference</title>
    <author>Nicholas Nicastro</author>
    <summary>Eratosthenes and the Ancient Quest to Measure the Globe.</summary>
</Book>
<Book id="2">
    <title>Copernicus Secret</title>
    <author>Jack Repcheck</author>
    <summary>How the scientific revolution began</summary>
</Book>
<Book id="3">
    <title>Angels and Demons</title>
    <author>Dan Brown</author>
    <summary>Robert Langdon is summoned to a Swiss research facility to analyze a cryptic symbol
   seared into the chest of a murdered physicist.</summary>
</Book>
<Book id="4">
    <title>Keep the Aspidistra Flying</title>
    <author>George Orwell</author>
    <summary>A poignant and ultimately hopeful look at class and society, Keep the Aspidistra 
 Flying pays tribute to the stubborn virtues of ordinary people who keep the aspidistra
  flying.    
 </summary>
</Book> 
```

如果这里需要它是我的解析器类：

```
- (Presentation1NameXML *) initXMLParser {

appDelegate = (testAppDelegate *)[[UIApplication sharedApplication] delegate];

return self;
}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName
namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName
attributes:(NSDictionary *)attributeDict {

if([elementName isEqualToString:@"Books"]) {
    //Initialize the array.
    appDelegate.books = [[NSMutableArray alloc] init];
}
else if([elementName isEqualToString:@"Book"]) {

    //Initialize the book.
    aBook = [[Presentation1Name alloc] init];

    //Extract the attribute here.
    aBook.bookID = [[attributeDict objectForKey:@"id"] integerValue];

    NSLog(@"Reading id value :%i", aBook.bookID);
}

NSLog(@"Processing Element: %@", elementName);
 }

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string {

if(!currentElementValue)
    currentElementValue = [[NSMutableString alloc] initWithString:string];
    else
        [currentElementValue appendString:string];

NSLog(@"Processing Value: %@", currentElementValue);

}   

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName
 namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {

if([elementName isEqualToString:@"Books"])
    return;

//There is nothing to do if we encounter the Books element here.
//If we encounter the Book element howevere, we want to add the book object to the array
// and release the object.
if([elementName isEqualToString:@"Book"]) {
    [appDelegate.books addObject:aBook];
    aBook = nil;
}
else
    [aBook setValue:currentElementValue forKey:elementName];
currentElementValue = nil;
}

@end 
```

**编辑：**

当我使用

```
 NSLog(@"%@", aBook.title); I got NULL 
```

**编辑**

在我看到的一些样本中，他们也有类似的东西

```
 Book *aBook = [appDelegate.books objectAtIndex:indexPath.row]; 
```

因为他们在 tableView 中使用它但是我没有任何表我应该写什么而不是 objectAtIndex:indexPath.row];

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:34:05.950

```
- (void)viewDidLoad
 {
   appDelegate = (testAppDelegate *)[[UIApplication sharedApplication] delegate];
   Book *aBook = [appDelegate.books objectAtIndex:0]; //This will load the first book
   label.textColor = [UIColor greenColor];
   label.text = aBook.title;   
   [super viewDidLoad];

 } 
```

如果您告诉我更多有关如何使用按钮和标签加载 viewController 的信息，我可以给您更好的答案。

# java - Java OutOfMemory 异常：加载 zip 文件时出现 mmap 错误

> ID：12815309
> 
> 赞同：11
> 
> 时间：2012-10-10T08:41:05.500
> 
> 标签：java, out-of-memory, java-7, mmap

我使用 JVM 参数在生产环境（rhel 5.2 x64、oracle jre 1.7_05、tomcat 7.0.28）上运行我的应用程序：

```
-Xms8192m -Xmx8192m -XX:MaxPermSize=1024m 
-Doracle.net.tns_admin=/var/ora_net -XX:ReservedCodeCacheSize=512m -XX:+AggressiveOpts -XX:+UseFastAccessorMethods 
-XX:+UseStringCache -XX:+OptimizeStringConcat -XX:+UseCompressedOops -XX:+UseG1GC -Dcom.sun.management.jmxremote 
-Dcom.sun.management.jmxremote.port=9026 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false 
```

几次之后，我得到了这样的堆栈跟踪：

```
Java HotSpot(TM) 64-Bit Server VM warning: Attempt to deallocate stack guard pages failed.
Java HotSpot(TM) 64-Bit Server VM warning: Attempt to allocate stack guard pages failed.
mmap failed for CEN and END part of zip file
[...]
Caused by: java.lang.OutOfMemoryError: null
    at java.util.zip.ZipFile.$$YJP$$open(Native Method) ~[na:1.7.0_05]
    at java.util.zip.ZipFile.open(Unknown Source) ~[na:1.7.0_05]
    at java.util.zip.ZipFile.<init>(Unknown Source) ~[na:1.7.0_05]
    at java.util.zip.ZipFile.<init>(Unknown Source) ~[na:1.7.0_05]
    at java.util.jar.JarFile.<init>(Unknown Source) ~[na:1.7.0_05]
    at java.util.jar.JarFile.<init>(Unknown Source) ~[na:1.7.0_05]
    at sun.net.www.protocol.jar.URLJarFile.<init>(Unknown Source) ~[na:1.7.0_05]
    at sun.net.www.protocol.jar.URLJarFile.getJarFile(Unknown Source) ~[na:1.7.0_05]
    at sun.net.www.protocol.jar.JarFileFactory.get(Unknown Source) ~[na:1.7.0_05]
    at sun.net.www.protocol.jar.JarURLConnection.connect(Unknown Source) ~[na:1.7.0_05]
    at sun.net.www.protocol.jar.JarURLConnection.getInputStream(Unknown Source) ~[na:1.7.0_05]
    at java.net.URL.openStream(Unknown Source) ~[na:1.7.0_05]
    at org.apache.catalina.loader.WebappClassLoader.findLoadedResource(WebappClassLoader.java:3279) ~[na:na]
    at org.apache.catalina.loader.WebappClassLoader.getResourceAsStream(WebappClassLoader.java:1478) ~[na:na]
    at org.apache.http.util.VersionInfo.loadVersionInfo(VersionInfo.java:242) ~[httpcore-4.2.jar:4.2]
    at org.apache.http.impl.client.DefaultHttpClient.setDefaultHttpParams(DefaultHttpClient.java:180) ~[httpclient-4.2.jar:4.2]
    at org.apache.http.impl.client.DefaultHttpClient.createHttpParams(DefaultHttpClient.java:158) ~[httpclient-4.2.jar:4.2]
    at org.apache.http.impl.client.AbstractHttpClient.getParams(AbstractHttpClient.java:448) ~[httpclient-4.2.jar:4.2] 
```

查看我的分析器 - 一切正常（堆和非堆内存用于 10%），我不知道问题出在哪里。

这个问题每天都在同一时间发生，并且与应用程序正常运行时间无关。是什么导致它出现问题？

**编辑：**

日志文件中的新输出：

```
Java HotSpot(TM) 64-Bit Server VM warning: CodeCache is full. Compiler has been disabled.
Java HotSpot(TM) 64-Bit Server VM warning: Try increasing the code cache size using -XX:ReservedCodeCacheSize=
Code Cache  [0x00002aaaab790000, 0x00002aaaad240000, 0x00002aaacb790000)
 total_blobs=4223 nmethods=3457 adapters=707 free_code_cache=497085Kb largest_free_block=508887936 
```

但我有足够的内存：http: [//i.stack.imgur.com/K8VMx.jpg](https://i.stack.imgur.com/K8VMx.jpg)

**答：** java版本的问题。它在这里描述：[https ://forums.oracle.com/forums/thread.jspa?messageID=10369413](https://forums.oracle.com/forums/thread.jspa?messageID=10369413)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T08:50:41.970

I have seen these error before when running out of resources such as running out of swap space or running out of allowed memory mapping. Have a look at `sudo cat /proc/$PID/maps | wc -l` compared with `cat /proc/sys/vm/max_map_count`

See comments below.

* * *

I also suggested ....

You appear to have run into a bug with YourKit. What version are you using?

I would cut down most of your options as they either are the default and don't do anything or could be complicating matters.

```
-mx8g -XX:MaxPermSize=1g -Doracle.net.tns_admin=/var/ora_net 
-XX:ReservedCodeCacheSize=512m -XX:+UseG1GC -Dcom.sun.management.jmxremote.port=9026 
```

I would try dropping `-XX:+UseG1GC` as well as this is a relatively new collector and shouldn't change your results.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:59:28.993

试试这些选项

```
-Xrunhprof:heap=all,depth=12,cutoff=0 
```

这将在应用程序根目录中生成一个转储文件。稍后您可以使用[HP Jmeter](https://h20392.www2.hp.com/portal/swdepot/displayProductInfo.do?productNumber=HPJMETER)进行分析。这将为您的 8G 内存所发生的情况提供快照。[您可以在此处](http://h20000.www2.hp.com/bizsupport/TechSupport/DocumentIndex.jsp?lang=en&cc=us&taskId=101&prodClassId=10008&contentType=SupportManual&docIndexId=64255&prodTypeId=18964&prodSeriesId=4268177)查看 HP JMeter 手册。

还明智地选择了您的 Xrunhprof 选项。我提到的上述选项会生成一个巨大的转储文件。从手册中您可以找到合适的选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T08:45:36.890

不知道 Java 1.7 发生了什么变化，我记得从 Java 1.6 开始，我们使用 Xms 选项，如下所示。

```
 -Xms=512m -Xmx=512m 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T02:49:49.867

[原始博客文章](http://javaeesupportpatterns.blogspot.com.es/2011/08/mmap-file-outofmemoryerror-and-pmap.html)的一些段落，这解释了 java jar/zip 的工作原理：

> OOM 错误是在从 Java JDK ZipFile 进行本机调用 (ZipFile.open(Native Method)) 以加载我们的应用程序 EAR 文件期间触发的。此本地 JVM 操作需要适当的本地内存和可用的虚拟地址空间才能执行其加载操作。此时的结论是，我们的 Java VM 1.5 在部署时用完了本机内存/虚拟地址空间。
> 
> **Sun Java VM 本机内存和 MMAP 文件**
> 
> 使用 JDK 1.4 / 1.5 时，Java VM 加载的任何 JAR / ZIP 文件都会完全映射到地址空间。这意味着您加载到单个 JVM 的 EAR/JAR 文件越多，Java 进程的本机内存占用就越高。
> 
> 这也意味着您的 Java Heap 和 PermGen 空间越高；较低的内存留给您的本机内存空间，例如 C-Heap 和 MMAP 文件，如果您将太多单独的应用程序（EAR 文件）部署到单个 32 位 Java 进程，这绝对是一个问题。
> 
> 请注意，Sun 在 JDK 1.6 (Mustang) 中提出了改进并更改了行为，以便 JAR 文件的中央目录仍被映射，但条目本身是单独读取的；减少本机内存需求。
> 
> 我建议您查看下面的 Sun Bug Id 链接以获取有关此类 JDK 1.4 / 1.5 限制的更多详细信息。 [http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6280693](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6280693)

# intellij-idea - IntelliJ 新标签页在左侧打开，为什么？

> ID：12815311
> 
> 赞同：10
> 
> 时间：2012-10-10T08:41:13.890
> 
> 标签：intellij-idea

假设我有一个 Java 类，并通过 CTRL + CLICK 导航到另一个方法。新文件在位于当前文件左侧的选项卡中打开。为什么？它应该向右打开。

这是一个错误吗？它违背了打开新标签的任何其他已知方式，如 Chrome、Firefox 等。是否可以改变这种行为？

我希望它在当前选项卡的右侧或右侧的末尾打开选项卡。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2017-09-16T03:03:39.467

如果您想**在右侧末尾**打开一个新选项卡，现在 IntelliJ IDEA（我的是 2017.2.4 版）为您提供了选项。

右键单击选项卡栏并选择“在末尾打开新选项卡”选项。

[![在末尾打开新标签页选项](../Images/19a4b2e2cd09f7ab11ace3a6a7f5a3a9.png)](https://i.stack.imgur.com/QhbwS.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-11-03T15:21:51.740

## 更新（2019 年 11 月）

如果您希望**在最后**打开新的编辑器选项卡，最新的 IntelliJ IDEA 版本`Open new tabs at the end`在设置中有专用选项“”：

> `Settings > Editor > General > Editor Tabs`

[![在此处输入图像描述](../Images/b5ddc2752e3f39c99ef8b6dadf1a63bb.png)](https://i.stack.imgur.com/JmUvB.png)

*截图取自 IntelliJ IDEA 2019.2.4（终极版）*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T11:59:05.393

此行为是设计使然，否则如果您点击编辑器中的链接并在右侧打开新选项卡，则在关闭此新选项卡后，您将导航到右侧的另一个编辑器选项卡，而不是返回到您所在的选项卡开始了。

当您通过打开新选项卡进行导航并希望通过关闭新选项卡返回时，这会中断工作流程。当**启用激活右相邻选项卡选项时**[，决定在左侧打开新选项](http://youtrack.jetbrains.com/issue/OC-1496#comment=27-248144)卡。

 **如果您不喜欢这种行为或想提出更好的解决方案，[欢迎来到 YouTrack](http://youtrack.jetbrains.net/issues/IDEA)。**

# sql - 在具有不同标准的报告中两次引用相同的信息

> ID：12815320
> 
> 赞同：0
> 
> 时间：2012-10-10T08:41:44.660
> 
> 标签：sql, database, vba, ms-access

我有一份报告，旨在显示需要转换的库存。

在报告上，我有一个源产品代码和一个结果产品代码（源产品转换为 1 个或多个结果产品）

我还想对这两种产品进行描述，这就是我遇到问题的地方。

（产品代码和描述都存储在名为 products/stock 的表中）

我设法将源产品的描述放在很好的位置，将信息拖到报告上并选择两个表的链接方式。

但是，现在当我将另一个描述框拖到报表上时，它假定我想要与以前相同的关系，并且只显示来自产品/库存的相同描述。

这不是我想要的，因为我希望它现在显示要制造的新产品的描述！

我尝试使用此代码，与报告上的文本框链接，但它告诉我该值为 Null？

```
Private Sub Report_Open(Cancel As Integer)

Dim strResultDesc As String

strResultDesc = DLookup("[Description]", "[products/stock]", "[Product Code] = '" & Me.txtResultPC & "'")

Me.Text57.Value = strResultDesc

End Sub 
```

![表格截图](../Images/8f223233c533012d46f4db1ba990a6f4.png)

上面的随机矩形是应该包含描述的文本框。

![设计视图中的屏幕截图](../Images/2eda1bf6fbc25814f921dedbb6600413.png)

这是报告如何组成的屏幕截图。

![字段列表（根据要求）](../Images/358057423aa84905fb9e12bfc6ba05db.png)

根据要求截取字段列表。

报告记录来源：

```
SELECT [Stock Conversion Items].SCID AS [Stock Conversion Items_SCID],
  [Stock Conversion Items].[Result PC],
  [Stock Conversion Items].Quantity,
  [Stock Conversion].[Source PC],
  [Stock Conversion].Status,
  [Stock Conversion].SCID AS [Stock Conversion_SCID],
  [products/stock].Description,
  [Stock Conversion].[Created By],
  [Stock Conversion].Quantity AS [Quantity_Stock Conversion]
FROM [products/stock] INNER JOIN ([Stock Conversion] 
  INNER JOIN [Stock Conversion Items]
    ON [Stock Conversion].[SCID] = [Stock Conversion Items].[SCID]) 
    ON [products/stock].[Product Code] = [Stock Conversion].[Source PC]
  WHERE ((([Stock Conversion].Status)="NEW")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T09:48:48.007

您需要将`products/stock`表的另一个“副本”添加到查询中，并加入结果产品。

在查询设计器中，如果您右键单击上窗格的背景并选择**Show Table..**，您可以多次选择同一个表。再次添加`products/stock`表格；它会得到一个像`products/stock_1`. 然后，创建从`Stock Conversion Items`表到新表、从`Result PC`字段到`SCID`字段的连接。

将该`Description`字段从`products/stock_1`下方窗格中拖动，然后关闭查询设计器。

现在字段列表将显示两个描述字段：`products/stock.Description`和`products/stock_1.Description`。第二个字段包含结果产品描述。

# jquery - JQuery Stop() 函数不停止动画

> ID：12815325
> 
> 赞同：0
> 
> 时间：2012-10-10T08:41:57.920
> 
> 标签：jquery, jquery-animate

我有 2 个句子，`highlight`每个单词都带有`animation`.

如果我按下`"First Line"`按钮动画将播放第一行，如果按下`"Sec Line"`按钮第一行动画将停止并播放第二行动画。

**jQuery 代码**

```
var time = 15; 

$("#go").click(function(){
  $("abbr", "#2" ).stop(true,true); 
    $("abbr", "#1").each(function(i,e) {
           $(e).delay(i * ((time * 1000) / $("abbr",  "#1").length))
               .animate({'color': 'red'}, 1, function () {
               $(e).animate({ 'color': 'black' }, 5000);
               });
    });
});

$("#back").click(function(){
    $("abbr", "#1" ).stop(true,true);
    $("abbr", "#2").each(function(i,e) {
           $(e).delay(i * ((time * 1000) / $("abbr",  "#2").length))
               .animate({'color': 'red'}, 1, function () {
               $(e).animate({ 'color': 'black' }, 5000);
               });
    }); }); 
```

**html代码**

```
<span id="1">
    <abbr>fractal </abbr>
    <abbr>is a mathematical </abbr>
    <abbr>that has </abbr> 
    <abbr>a fractal dimension </abbr> 
    <abbr>that usually</abbr> 
    <abbr>exceeds its </abbr> 
    <abbr>topological dimension</abbr> 
    <abbr>fractal </abbr>
    <abbr>is a mathematical </abbr>
    <abbr>that has </abbr> 
    <abbr>a fractal dimension </abbr> 
    <abbr>that usually</abbr> 
    <abbr>exceeds its </abbr> 
    <abbr>topological dimension</abbr>  
</span>
<br>
 <br> 
 <span id="2">
    <abbr>and may </abbr>
    <abbr>fall between </abbr>
    <abbr>the integers </abbr> 
    <abbr>Fractals </abbr> 
    <abbr>are typically </abbr> 
    <abbr>self-similar </abbr> 
    <abbr>patterns</abbr> 
    <abbr>and may </abbr>
    <abbr>fall between </abbr>
    <abbr>the integers </abbr> 
    <abbr>Fractals </abbr> 
    <abbr>are typically </abbr> 
    <abbr>self-similar </abbr> 
    <abbr>patterns</abbr>  
</span> 
<br>
 <br> 
<button id="go">First Line</button> 
<button id="back">Sec Line</button> 
```

一切都很好，但是当我播放第一行动画并在几秒钟后（例如`3 sec`）按下`"sec line"`按钮动画并在（例如 3 秒）之后再次按下第一行动画动画将从句子的开头和中间开始。

结果：**[jsfiddle](http://jsfiddle.net/d5VTg/1/)**

![在此处输入图像描述](../Images/0c2a115150b8f364213e9d7ee62451c0.png)

我认为`stop()`功能有问题。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T09:16:46.717

我得到了解决方案

而不是使用

```
 $("abbr", "#2" ).stop(true,true); 
 $("abbr", "#1" ).stop(true,true); 
```

我用

```
 $("abbr").stop(false,true); 
```

结果：http: [//jsfiddle.net/d5VTg/3/](http://jsfiddle.net/d5VTg/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T09:08:51.720

我不认为你可以清除你的延迟队列。尝试在循环内使用计时器：

```
// check if the timer is running, in that case, clear it: clearTimeout(timer);

var timer = setTimeout(function(){

    //do animation stuff

}, (i * ((time * 1000) / $("abbr",  "#1").length))); 
```

# jquery - 为当前窗口命名（使用 jQuery）？

> ID：12815333
> 
> 赞同：1
> 
> 时间：2012-10-10T08:42:11.207
> 
> 标签：jquery, window

我处于需要为加载网站的窗口命名的情况。就像，当我打开 StackOverflow.com 时，我应该能够给它一个 window.name 以便我以后可以使用它。

这里有什么解决方案吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:46:33.363

你可以使用这样的东西

```
$("html").addClass("myclass"); 
```

将来您可以使用此类找到正确的窗口

```
$("html").hasClass("myclass").something 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-10T08:48:24.097

或者如果你想使用 jQuery，你可以这样做：

```
$('title').text("My Title"); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-10T08:44:22.640

我认为您正在寻找：

```
document.title 
```

这既可读又可写。

# sql-server - SQL Server - 如何动态确定财政年度？

> ID：12815334
> 
> 赞同：2
> 
> 时间：2012-10-10T08:42:15.560
> 
> 标签：sql-server

每年我都必须更新公司的财务报告以包括新的财政年度（因为这一年与日历年不同），所以我这样做......

```
Case
    when ST_date >= '1996.11.01 00:00:00' and st_date  < '1997.11.01 00:00:00' 
    then '96-97'
[etc]
end as year, 
```

每年我都必须记住我需要修改哪些报告——大多数年份我都忘记了一个！

...是否有一种简单的动态方法来确定这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T08:48:37.040

您绝对可以在 SQL Server 中编写一个简单的**存储函数**来根据日期确定财政年度：

```
CREATE FUNCTION dbo.GetFinancialYear (@input DATETIME)
RETURNS VARCHAR(20)
AS BEGIN
    DECLARE @FinYear VARCHAR(20)

    SET @FinYear = 
        CASE
            WHEN @INPUT >= '19961101' AND @input < '19971101' THEN '96-97'
            WHEN @INPUT >= '19971101' AND @input < '19981101' THEN '97-98'
            ELSE '(other)'
        END

    RETURN @FinYear
END 
```

然后在所有查询中使用它。

```
SELECT 
    somedate, dbo.GetFinancialYear(somedate)
...... 
```

如果您需要添加新的财政年度 - 只需更新一个功能，您就完成了！

**更新：**如果你想让这*完全动态*，并且你可以**依靠**财政年度总是从 11 月 1 日开始的事实 - 然后使用这种方法：

```
CREATE FUNCTION dbo.GetFinancialYear (@input DATETIME)
RETURNS VARCHAR(20)
AS BEGIN
    DECLARE @FinYear VARCHAR(20)

    DECLARE @YearOfDate INT

    IF (MONTH(@input) >= 11)
        SET @YearOfDate = YEAR(@input)  
    ELSE
        SET @YearOfDate = YEAR(@input) - 1

    SET @FinYear = RIGHT(CAST(@YearOfDate AS CHAR(4)), 2) + '-' + RIGHT(CAST((@YearOfDate + 1) AS CHAR(4)), 2)

    RETURN @FinYear
END 
```

这将返回：

*   `05/06`对于一个日期，如`2005-11-25`
*   `04/05`对于一个日期，如`2005-07-25`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T09:10:42.437

看看这个例子：

```
declare @ST_Date datetime = '20120506'

SELECT
    convert(char(2),DateAdd(m,-10,@ST_DATE),2)+'-'+
    convert(char(2),DateAdd(m,+ 2,@ST_DATE),2) as year 
```

作为列表达式：

```
 convert(char(2),DateAdd(m,-10,ST_DATE),2)+'-'+
    convert(char(2),DateAdd(m,+ 2,ST_DATE),2) as year 
```

相当琐碎！

我处理这些问题（财政年度、支付期等）的方式是认识到财政年度与任何一年都一样，除了它们在 X 个月后开始。因此，直接的解决方案是将 FY 按月数移回日历年，从中进行任何“年度”比较或“年”（或“月”）的推导。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-10T10:01:00.580

```
Declare @FinancialMonth Varchar(100)=NULL,@Month smallint,@Date DateTime='04/06/2013'

BEGIN TRY 
SELECT @FinancialMonth='01-'+IsNULL(@FinancialMonth,'April')+'-'+Cast(year(getdate()) as varchar)
SELECT @Month=(Month(Cast(@FinancialMonth as datetime))-1) * -1
END TRY
BEGIN CATCH
SELECT 
        ERROR_NUMBER() AS ErrorNumber,'Invalid Financial Month' ErrorMessage
END CATCH

SELECT Month((CONVERT([varchar](10),dateadd(month,(@Month),@Date),(101)))) FinancialMonth,
Year((CONVERT([varchar](10),dateadd(month,(@Month),@Date),(101)))) FinancialYear
,DatePart(qq,(CONVERT([varchar](10),dateadd(month,(@Month),@Date),(101)))) FinancialQuarter 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-01T01:25:09.300

这个对我有用，并将其设置为实际的财政年度结束日期。

`SET @enddatefy = convert(DATE, str(datepart(yyyy,DateAdd(m,-6,@enddate))+1)+'0630',112) SET @enddatefyid = str(datepart(yyyy,DateAdd(m,-6,@enddate))+1)+'0630'`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-28T06:46:54.300

```
datename(YEAR,  DATEADD(M,-3,Date)) +'-'+ cast((datepart(YEAR,  DATEADD(M,-3,Date)) + 1) %100 as varchar(2)) 
```

计算列“日期”

财政年度范围为 4 月 1 日至 3 月 31 日

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-24T07:08:19.700

```
Create FUNCTION dbo.GetFinancialYear (@input DATETIME)
RETURNS VARCHAR(20)
AS BEGIN
    DECLARE @FinYear VARCHAR(20)

    IF (MONTH(@input) > 3)
        SET @FinYear = RIGHT(CAST(Year(@input) AS CHAR(4)), 4) + '-' + RIGHT(CAST((Year(@input) + 1) AS CHAR(4)), 2)
    ELSE
        SET @FinYear = RIGHT(CAST((Year(@input) - 1) AS CHAR(4)), 4) + '-' + RIGHT(CAST(Year(@input) AS CHAR(4)), 2)

    RETURN @FinYear
END 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-12T00:39:46.933

```
Declare @date1 datetime = '2017-07-01'
Select Case 
    When Month(@date1)>=7 Then 'FY'+Convert(NVARCHAR(10),(Right(year(getdate()),2)+1))
    Else 'FY'+Convert(NVARCHAR(10),(Right(year(getdate()),2)))
End 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2014-03-26T01:19:18.530

这适用于我，财政年度从 7 月开始。

```
CASE WHEN DatePart(mm, [YourDate]) >= 7 
  THEN convert(varchar(10), YEAR([YourDate])) +' / '+ Convert(varchar(10), YEAR([YourDate]) + 1 )
  ELSE Convert(varchar(10), YEAR([YourDate]) - 1) +' / '+ Convert(varchar(10), YEAR([YourDate]) )
  END AS [Financial Year], 
```

# xml - 如何为没有包装元素的列表编写 XSD

> ID：12815335
> 
> 赞同：1
> 
> 时间：2012-10-10T08:42:18.647
> 
> 标签：xml, xsd

是否可以`xsd:complexType`包含`xsd:sequence`和`xsd:element`？

```
<xsd:complexType name="employeesType" mixed="true">
    <xsd:sequence>
        <xsd:element name="employee" type="employeeType"
            maxOccurs="unbounded" minOccurs="0" />
    </xsd:sequence>
    <!-- ERROR
    <xsd:element name="responseTime" type="responseTimeType"></xsd:element>
     -->
</xsd:complexType> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T09:11:58.327

正如您在上面的示例中所示，不允许将 a`<xsd:element />`作为直接子级`<xsd:complexType />`（请参阅[w3schools.com](http://w3schools.com/schema/el_complextype.asp)上的参考资料）。考虑到您[之前的问题](https://stackoverflow.com/questions/12814752/how-to-write-rootless-list-in-xml)中的示例，我认为您想要做的事情可以通过这样的模式来实现：

```
<?xml version="1.0"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:element name="root">
    <xsd:complexType>
        <xsd:sequence>
            <xsd:element name="date" type="xsd:string" />
            <xsd:element name="responseTime" type="xsd:decimal" />
            <xsd:element name="employee" minOccurs="0" maxOccurs="unbounded">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element name="name" type="xsd:string" />
                    </xsd:sequence>
                </xsd:complexType>
            </xsd:element>
        </xsd:sequence>
    </xsd:complexType>
    </xsd:element>
</xsd:schema> 
```

这验证了您的示例代码：

```
<?xml version="1.0"?>
<root>
    <date> 9:51 AM 10/10/2012 </date>
    <responseTime> 1.20</responseTime>
    <employee>
        <name> Mohammad</name>
    </employee>
    <employee>
        <name> Ali</name>
    </employee>
    <employee>
        <name> Mostafa</name>
    </employee>
    <employee>
        <name> Mahmoud</name>
    </employee>
</root> 
```

您可能希望将类型更改`<date />`为`xsd:date`。

# spring - 在 JBoss 7.1.1 上部署 JSF 2、Spring 3.1 应用程序时出错 > java.lang.NoClassDefFoundError: javax/servlet/ServletOutputStream

> ID：12815336
> 
> 赞同：1
> 
> 时间：2012-10-10T08:42:19.777
> 
> 标签：spring, hibernate, jsf-2, jpa-2.0, jboss7.x

尝试将带有 Spring 3.1 + JPA 2 (Hibernte 3.6.8) 的 JSF 2 应用程序部署到 JBoss 7.1.1 AS 中。该应用程序在 tomcat 7 上运行良好。现在，我已经添加并更改了一些配置。

1.  添加了 jboss-deployment-structure.xml >

> ```
>  <jboss-deployment-structure xmlns="urn:jboss:deployment-structure:1.1">
>       <deployment>  
>         <exclusions>
>         <module name="org.apache.log4j" />
>           <module name="javax.faces.api" slot="main"/>
>           <module name="com.sun.jsf-impl" slot="main"/>
>           <module name="org.hibernate"/>       
>           <module name="org.javassist" />
>           <module name="javaee.api" />
>           <module name="org.hibernate.validator" />
>           <module name="org.jboss.as.web" />
>           <module name="org.jboss.logging" />
>           <module name="javax.persistence.api" />
>           <module name="org.jboss.interceptor" />      
>          </exclusions>    
>       </deployment>
>     </jboss-deployment-structure> 
> ```

*2.*在 web.xml 里面添加了这些行：

> ```
> <persistence-unit-ref>
>   <persistence-unit-ref-name>persistence/persistenceUnit</persistence-unit-ref-name>
>   <persistence-unit-name>persistenceUnit</persistence-unit-name>      
> </persistence-unit-ref> 
> ```

*3* . 在 applicationContext.xml 中，通过添加此属性更改了 entityManagerFactory 的 bean 定义>

> ```
> <property name="persistenceXmlLocation"
> value="classpath*:META-INF/persistence.xml"/> 
> ```

现在，除了这些对你来说显而易见的事情，我还需要做更多的事情吗？因为，当我尝试从 eclipse indigo SR2 部署它时，得到这个 >

```
14:10:32,046 INFO  [org.jboss.modules] JBoss Modules version 1.1.1.GA
14:10:33,054 INFO  [org.jboss.msc] JBoss MSC version 1.0.2.GA
14:10:33,200 INFO  [org.jboss.as] JBAS015899: JBoss AS 7.1.1.Final "Brontes" starting
14:10:36,375 INFO  [org.xnio] XNIO Version 3.0.3.GA
14:10:36,384 INFO  [org.jboss.as.server] JBAS015888: Creating http management service using socket-binding (management-http)
14:10:36,432 INFO  [org.xnio.nio] XNIO NIO Implementation Version 3.0.3.GA
14:10:36,462 INFO  [org.jboss.remoting] JBoss Remoting version 3.2.3.GA
14:10:36,587 INFO  [org.jboss.as.logging] JBAS011502: Removing bootstrap log handlers
14:10:36,714 INFO  [org.jboss.as.security] (ServerService Thread Pool -- 44) JBAS013101: Activating Security Subsystem
14:10:36,735 INFO  [org.jboss.as.naming] (MSC service thread 1-2) JBAS011802: Starting Naming Service
14:10:37,043 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-6) JBAS015400: Bound mail session [java:jboss/mail/Default]
14:10:37,208 INFO  [org.jboss.as.connector] (MSC service thread 1-7) JBAS010408: Starting JCA Subsystem (JBoss IronJacamar 1.0.9.Final)
14:10:37,295 INFO  [org.jboss.as.security] (MSC service thread 1-7) JBAS013100: Current PicketBox version=4.0.7.Final
14:10:37,740 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010403: Deploying JDBC-compliant driver class org.h2.Driver (version 1.3)
14:10:38,792 INFO  [org.jboss.ws.common.management.AbstractServerConfig] (MSC service thread 1-3) JBoss Web Services - Stack CXF Server 4.0.2.GA
14:10:38,833 INFO  [org.apache.coyote.http11.Http11Protocol] (MSC service thread 1-2) Starting Coyote HTTP/1.1 on http-localhost-127.0.0.1-8080
14:10:39,534 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-1) JBAS015012: Started FileSystemDeploymentService for directory F:\work\softwares\Application Servers\JBoss\jboss-as-7.1.1.Final\jboss-as-7.1.1.Final\standalone\deployments
14:10:39,618 INFO  [org.jboss.as.remoting] (MSC service thread 1-3) JBAS017100: Listening on localhost/127.0.0.1:4447
14:10:39,623 INFO  [org.jboss.as.remoting] (MSC service thread 1-2) JBAS017100: Listening on /127.0.0.1:9999
14:10:39,698 INFO  [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) JBAS015014: Re-attempting failed deployment treasury.war
14:10:39,706 INFO  [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) JBAS015003: Found com.misl.treasury.ui.war in deployment directory. To trigger deployment create a file called com.misl.treasury.ui.war.dodeploy
14:10:40,105 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-2) JBAS010400: Bound data source [java:jboss/datasources/ExampleDS]
14:10:40,399 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-1) JBAS015876: Starting deployment of "com.misl.treasury.ui.war"
14:10:40,405 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-7) JBAS015876: Starting deployment of "treasury.war"
14:10:55,283 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-7) JBAS015893: Encountered invalid class name 'com.sun.faces.vendor.Tomcat6InjectionProvider:org.apache.catalina.util.DefaultAnnotationProcessor' for service type 'com.sun.faces.spi.injectionprovider'
14:10:55,289 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-7) JBAS015893: Encountered invalid class name 'com.sun.faces.vendor.Jetty6InjectionProvider:org.mortbay.jetty.plus.annotation.InjectionCollection' for service type 'com.sun.faces.spi.injectionprovider'
14:10:55,428 INFO  [org.jboss.as.jpa] (MSC service thread 1-7) JBAS011401: Read persistence.xml for persistenceUnit
14:10:55,843 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-4) JBAS015893: Encountered invalid class name 'com.sun.faces.vendor.Tomcat6InjectionProvider:org.apache.catalina.util.DefaultAnnotationProcessor' for service type 'com.sun.faces.spi.injectionprovider'
14:10:55,849 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-4) JBAS015893: Encountered invalid class name 'com.sun.faces.vendor.Jetty6InjectionProvider:org.mortbay.jetty.plus.annotation.InjectionCollection' for service type 'com.sun.faces.spi.injectionprovider'
14:10:56,010 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-2) MSC00001: Failed to start service jboss.deployment.unit."com.misl.treasury.ui.war".POST_MODULE: org.jboss.msc.service.StartException in service jboss.deployment.unit."com.misl.treasury.ui.war".POST_MODULE: Failed to process phase POST_MODULE of deployment "com.misl.treasury.ui.war"
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:119) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_23]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_23]
    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_23]
Caused by: java.lang.NoClassDefFoundError: javax/servlet/ServletOutputStream
    at java.lang.Class.getDeclaredConstructors0(Native Method) [rt.jar:1.6.0_23]
    at java.lang.Class.privateGetDeclaredConstructors(Class.java:2389) [rt.jar:1.6.0_23]
    at java.lang.Class.getConstructor0(Class.java:2699) [rt.jar:1.6.0_23]
    at java.lang.Class.getConstructor(Class.java:1657) [rt.jar:1.6.0_23]
    at org.jboss.as.web.deployment.jsf.JsfManagedBeanProcessor.deploy(JsfManagedBeanProcessor.java:108)
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    ... 5 more
Caused by: java.lang.ClassNotFoundException: javax.servlet.ServletOutputStream from [Module "deployment.com.misl.treasury.ui.war:main" from Service Module Loader]
    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:423)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
    at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
    ... 11 more

14:10:56,628 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-4) MSC00001: Failed to start service jboss.deployment.unit."treasury.war".PARSE: org.jboss.msc.service.StartException in service jboss.deployment.unit."treasury.war".PARSE: Failed to process phase PARSE of deployment "treasury.war"
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:119) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_23]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_23]
    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_23]
Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: SAXException parsing vfs:/F:/work/softwares/Application Servers/JBoss/jboss-as-7.1.1.Final/jboss-as-7.1.1.Final/bin/content/treasury.war/WEB-INF/beans.xml
    at org.jboss.as.weld.deployment.BeansXmlParser.parse(BeansXmlParser.java:100)
    at org.jboss.as.weld.deployment.processors.BeansXmlProcessor.parseBeansXml(BeansXmlProcessor.java:133)
    at org.jboss.as.weld.deployment.processors.BeansXmlProcessor.deploy(BeansXmlProcessor.java:97)
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    ... 5 more
Caused by: org.xml.sax.SAXParseException: Premature end of file.
    at org.apache.xerces.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:196)
    at org.apache.xerces.util.ErrorHandlerWrapper.fatalError(ErrorHandlerWrapper.java:175)
    at org.apache.xerces.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:394)
    at org.apache.xerces.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:322)
    at org.apache.xerces.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:281)
    at org.apache.xerces.impl.XMLScanner.reportFatalError(XMLScanner.java:1459)
    at org.apache.xerces.impl.XMLDocumentScannerImpl$PrologDispatcher.dispatch(XMLDocumentScannerImpl.java:903)
    at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:324)
    at org.apache.xerces.parsers.XML11Configuration.parse(XML11Configuration.java:845)
    at org.apache.xerces.parsers.XML11Configuration.parse(XML11Configuration.java:768)
    at org.apache.xerces.parsers.XMLParser.parse(XMLParser.java:108)
    at org.apache.xerces.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1196)
    at org.apache.xerces.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:555)
    at org.apache.xerces.jaxp.SAXParserImpl.parse(SAXParserImpl.java:289)
    at org.jboss.as.weld.deployment.BeansXmlParser.parse(BeansXmlParser.java:94)
    ... 8 more

14:10:56,670 INFO  [org.jboss.as] (MSC service thread 1-1) JBAS015951: Admin console listening on http://127.0.0.1:9990
14:10:56,672 ERROR [org.jboss.as] (MSC service thread 1-1) JBAS015875: JBoss AS 7.1.1.Final "Brontes" started (with errors) in 25527ms - Started 143 of 222 services (2 services failed or missing dependencies, 76 services are passive or on-demand)
14:10:56,671 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS015871: Deploy of deployment "treasury.war" was rolled back with no failure message
14:10:56,679 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS015870: Deploy of deployment "com.misl.treasury.ui.war" was rolled back with failure message {"JBAS014671: Failed services" => {"jboss.deployment.unit.\"com.misl.treasury.ui.war\".POST_MODULE" => "org.jboss.msc.service.StartException in service jboss.deployment.unit.\"com.misl.treasury.ui.war\".POST_MODULE: Failed to process phase POST_MODULE of deployment \"com.misl.treasury.ui.war\""}}
14:10:56,851 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-8) JBAS015877: Stopped deployment com.misl.treasury.ui.war in 172ms
14:10:57,068 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-7) JBAS015877: Stopped deployment treasury.war in 395ms
14:10:57,070 INFO  [org.jboss.as.controller] (DeploymentScanner-threads - 2) JBAS014774: Service status report
JBAS014777:   Services which failed to start:      service jboss.deployment.unit."treasury.war".PARSE: org.jboss.msc.service.StartException in service jboss.deployment.unit."treasury.war".PARSE: Failed to process phase PARSE of deployment "treasury.war"
      service jboss.deployment.unit."com.misl.treasury.ui.war".POST_MODULE: org.jboss.msc.service.StartException in service jboss.deployment.unit."com.misl.treasury.ui.war".POST_MODULE: Failed to process phase POST_MODULE of deployment "com.misl.treasury.ui.war"

14:10:57,079 ERROR [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) {"JBAS014653: Composite operation failed and was rolled back. Steps that failed:" => {"Operation step-2" => {"JBAS014671: Failed services" => {"jboss.deployment.unit.\"com.misl.treasury.ui.war\".POST_MODULE" => "org.jboss.msc.service.StartException in service jboss.deployment.unit.\"com.misl.treasury.ui.war\".POST_MODULE: Failed to process phase POST_MODULE of deployment \"com.misl.treasury.ui.war\""}}}}
14:10:57,087 ERROR [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) JBAS014654: Composite operation was rolled back 
```

我以前从未尝试过 JBoss。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:45:13.830

从 jboss-deployment-structure 中删除`<module name="javaee.api" />`条目，从而摆脱 ClassNotFoundException: javax.servlet.ServletOutputStream 错误 [因为 javaee api jar 实现了该类]。但是，不幸的是，这还不是全部。它只是清除了显示另一个错误的路径。这一次，它是关于休眠的。

> java.lang.NoClassDefFoundError: org/jboss/as/jpa/hibernate3/infinispan/SharedInfinispanRegionFactory

经过一番搜索，似乎是 JBoss 7.1.1 中的一个 bug。[可惜他们不会发布任何更新的版本]

无论如何，我会从[这里](https://community.jboss.org/thread/197608)尝试破解。看起来这是朝着无错误部署迈进的一大步！

# wso2 - WSO2 治理注册表每晚构建？

> ID：12815342
> 
> 赞同：0
> 
> 时间：2012-10-10T08:42:33.983
> 
> 标签：wso2, wso2carbon, wadl

某处是否有 WSO2 GREG 的夜间版本？我支持一个配置怪异的客户代理，从源代码构建变得非常困难。我的具体需要是测试新的 WADL 支持，它看起来在 4.5.0 发行版中不可用。另一方面，是否有任何替代方法来测试新的 WADL 支持，而无需从头开始构建 GREG？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T09:24:32.237

如果您需要评估每晚构建，则给出的位置是正确的。但目前 WSO2 4.5.1 发行版中已删除 WADL 支持。所以这个二进制包不包括它。

# jquery - 在颜色框中获得响应后更改位置

> ID：12815343
> 
> 赞同：0
> 
> 时间：2012-10-10T08:42:33.923
> 
> 标签：jquery, jsp, colorbox

我正在开发一个模块，在该模块中我选择了一个公司名称，并使用`colorbox iframe`. 当我输入密码并提交表单时，我得到`json`了回复。现在我想关闭弹出窗口并将页面重定向到另一个页面。我的代码是

```
 $(document).ready(function(){
        var validator = $("#passwordverify").validate({ 
            rules: {  
                password: { 
                    required: true, 
                    minlength: 5 
                } 
            }, 
            messages: {  
                password: { 
                    required: "Provide a password", 
                    rangelength: jQuery.format("Enter at least {0} characters") 
                }
            },
            submitHandler: function() { 
                $.ajax({
                    url:"varifypassword.action",
                    type:"post",
                    dataType:"json",
                    data:{partyid:$("#partyid").val(), password:$("#password").val()},
                    success:function(response){
                        if(response.response == true)
                            {
                                  parent.$.fn.colorbox.close();
                                  window.location.replace("main.jsp");
                            }
                        else
                            {
                                $("#error").html("Incorrect Password");
                            }
                        }
                    }); 
            }
        }); 
```

它工作正常，但`window.location.replace`适用于相同的 iframe。它`main.jsp`在同一个弹出窗口中打开。如何在父页面的位置加载它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:51:07.270

Did you try to use one of these approaches already?

```
parent.$.fn.colorbox.close();
window.opener.location.href = mySite; 
```

or

```
parent.$.fn.colorbox.close();
window.parent.location.href = mySite; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T08:53:39.423

您可以将 javascript 方法添加到父窗口

在 iFrame 之外添加以下方法

```
 function ChangeUrlFromParent(url)
    {
    document.location=url;
    } 
```

并从 iFrame 调用该方法

```
 $(document).ready(function(){
    var validator = $("#passwordverify").validate({ 
        rules: {  
            password: { 
                required: true, 
                minlength: 5 
            } 
        }, 
        messages: {  
            password: { 
                required: "Provide a password", 
                rangelength: jQuery.format("Enter at least {0} characters") 
            }
        },
        submitHandler: function() { 
            $.ajax({
                url:"varifypassword.action",
                type:"post",
                dataType:"json",
                data:{partyid:$("#partyid").val(), password:$("#password").val()},
                success:function(response){
                    if(response.response == true)
                        {
                              parent.$.fn.colorbox.close();
                              ChangeUrlFromParent("main.jsp");
                        }
                    else
                        {
                            $("#error").html("Incorrect Password");
                        }
                    }
                }); 
        }
    }); 
```

希望这可以帮助 ：）

# lua - 如何使用 srlua 制作可执行的 Lua 脚本？

> ID：12815348
> 
> 赞同：3
> 
> 时间：2012-10-10T08:43:06.077
> 
> 标签：lua

我的主要目标是将我的 lua 文件变为可执行文件或将其变为小代码。最好是他们两个。我正在尝试 srlua，但在自述文件中它告诉我这样做：

“对于Windows，你需要先创建srlua.exe和glue.exe。然后对每个你想变成独立程序的Lua程序，做glue srlua.exe prog.lua prog.exe 当然可以使用任何名称代替 prog.exe。”

当我尝试使用 codebluck 编译它来获取（srlua.exe）时，我得到了这个：![在此处输入图像描述](../Images/d0c4c76b2a61aed3f5eaf07a07a34db0.png)

这意味着什么？胶水 srlua.exe prog.lua prog.exe 我应该在哪里输入它。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-19T20:46:57.597

把它输入你的shell。一旦你有了 srlua 的二进制文件，它就会使用“prog.lua”并将其粘合到“srlua.exe”上，从而生成“prog.exe”。当然，你也需要胶水。您可以在此处获取 Lua 5.1 的 srlua 二进制文件和胶水二进制文件。[http://www.tecgraf.puc-rio.br/~lhf/ftp/lua/#srlua](http://www.tecgraf.puc-rio.br/~lhf/ftp/lua/#srlua)

# c# - Asp.net 登录脚本

> ID：12815354
> 
> 赞同：0
> 
> 时间：2012-10-10T08:43:20.073
> 
> 标签：c#, asp.net

我是asp.net 的新手，我正在编写一个用于学习数据库应用程序的登录和注册脚本。但脚本似乎不起作用。它仍然可以添加重复的用户名。这是脚本

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data.SqlClient;
using System.Configuration;

public partial class Registration : System.Web.UI.Page
{
    static string temp;
    protected void Page_Load(object sender, EventArgs e)
    {
        if (IsPostBack)
        {
            SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["earchConnectionString"].ConnectionString);
            con.Open();
            string cmdStr = "Select count(*) from [user] where UserName='" + TextBoxUN.Text + "'";

            SqlCommand userExist = new SqlCommand(cmdStr, con);
            int temp = Convert.ToInt32(userExist.ExecuteScalar().ToString());

            con.Close();
            if (temp == 1)
            {
                Response.Write("User Name Already Exist....<br /> Please Choose Another User Name.");
            }
        }

    }
    protected void Submit_Click(object sender, EventArgs e)
    {

        SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["earchConnectionString"].ConnectionString);
        con.Open();
        string insCmd = "Insert into [user] (UserName, Password, EmailAddress, FullName, level) values (@UserName,@Password,@EmailAddress, @FullName, @level)";
        SqlCommand insertUser = new SqlCommand(insCmd, con);
        insertUser.Parameters.AddWithValue("@UserName", TextBoxUN.Text);
        insertUser.Parameters.AddWithValue("@Password", TextBoxPass.Text);
        insertUser.Parameters.AddWithValue("@EmailAddress", TextBoxEA.Text);
        insertUser.Parameters.AddWithValue("@FullName", TextBoxFN.Text);
        insertUser.Parameters.AddWithValue("@level", level.SelectedValue.ToString());

        try
        {
            insertUser.ExecuteNonQuery();
            con.Close();
            //Response.Redirect("Login.aspx");
            Label1.Text = temp;
        }
        catch (Exception er)
        {
            Response.Write("Something wrong");
        }
        finally
        {
            //Any Special Action You Want To Add
        }

    }
} 
```

任何可以检测到的问题？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T08:45:30.650

您应该检查用户名是否存在于 Button_Click 中，而不是 Page_Load 中。理想情况下，两个查询都应该在同一个 SQL 事务中执行。此外，您绝对应该对第一个查询使用参数化查询（与您在第二个查询中执行的方式相同），以防止 SQL 注入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T08:49:20.603

Set primary key on the column **UserName** of the table **user**. So you don't have to check for the user existence in the database at the time of insertion, reducing an extra call to database. This way command.ExecuteNonQuery() won't allow you to insert duplicate users and throw exception and you can take necessary actions in the catch block of your code.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T09:55:30.623

1.  在 SQL 数据库中为您的用户登录创建一个唯一字段。
2.  在帐户创建按钮单击事件的帐户创建页面上，执行以下操作：

    ```
     try
                {

                    SqlCommand command = new SqlCommand("INSERT INTO Users(login,password) VALUES ('" + txtLogin.Text + "','" + txtPass.Text+ "');", con);
                    command.ExecuteNonQuery();
                    Response.Redirect("login.aspx");
                }

                catch (SqlException)
                {
                    lblWrongLogin.Text = "Username already exists.";
                } 
    ```

基本上，当您尝试在 SQL 数据库中编写重复登录时，您会收到 SQL 异常，因此您只需在应用程序中捕获它并执行您需要的任何操作（在大多数情况下重新加载注册页面）。

PS：考虑在将密码放入数据库之前使用一些哈希算法（如 MD5）对密码进行哈希处理。登录时也不要忘记在客户端对密码进行哈希处理。 PPS：使用 SQL 参数作为登录名、密码和所有其他用户输入的信息，以防止 SQL 注入。

# glassfish-3 - 如何在 Glassfish 中为自定义领域配置回调处理程序？

> ID：12815363
> 
> 赞同：2
> 
> 时间：2012-10-10T08:43:36.733
> 
> 标签：glassfish-3

我为 Glassfish v3 配置了新的自定义领域并进行了部署。Glassfish 启动的日志上没有发现错误。

现在我想用简单的动态 Web 项目测试我的领域，但我不记得如何配置回调处理程序来获取用户的登录名/密码？我相信 web.xml 或 glassfish-web.xml 上有标签 balise 来配置它，但我找不到它。

请帮助我在我的情况下设置回调处理程序:)

奥利维尔

# asp.net-mvc-3 - 如何获取已登录用户的用户 ID？

> ID：12815374
> 
> 赞同：0
> 
> 时间：2012-10-10T08:44:05.573
> 
> 标签：asp.net-mvc-3, authentication, userid

我正在尝试获取当前登录用户的用户 ID。这是我的代码：

```
public int GetUserID(string _UserName)
    {
        using (var context = new TourBlogEntities1())
        {
            var UserID = from s in context.UserInfoes
                         where s.UserName == _UserName
                         select s.UserID;
            return  Int32.Parse(UserID.ToString()); //error is showing here

        }
    } 
```

我使用这个从我的控制器调用该方法：

```
public ActionResult NewPost(NewPost model)
   {
       var Business = new Business();
       var entity = new Post();
       entity.PostTitle = model.PostTitle;
       entity.PostStory = model.PostStory;
       entity.UserID = Business.GetUserID(User.Identity.Name);

       Business.NewPost(entity);
       Business.ViewPost(entity);
       return View("ViewPost", model);

   } 
```

错误显示为“输入字符串格式不正确”。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T09:05:05.110

您的查询返回一个 IEnumerable。您只需要获取一条记录：

```
using (var context = new TourBlogEntities1())
{
    var userIds = from s in context.UserInfoes
                 where s.UserName == _UserName
                 select s.UserID;
    return userIds.Single();
} 
```

顺便说一句，`.Single()`如果有超过 1 条记录符合条件，该方法将引发异常。希望您对数据库中的用户名字段有唯一的约束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T09:37:44.763

```
 CreatedBy = this.HttpContext.User.Identity.Name, 
```

# wordpress - 使用 wordpress 插件简码在彩盒中显示音频播放器

> ID：12815383
> 
> 赞同：1
> 
> 时间：2012-10-10T08:44:35.923
> 
> 标签：wordpress, colorbox

我正在使用 mp3-jplayer 插件在我的网站上播放带有播放列表的音频。我想在弹出窗口中显示播放器，所以我安装了 colorbox 插件并在我调用 colorbox 函数的 div 中编写了播放器的短代码。

我如何在其中显示音频播放器，或者是否有任何其他可以使用的 wordpress 插件？

# jboss - Glassfish V3.1 无效的 ejb jar 它包含零 ejb

> ID：12815389
> 
> 赞同：4
> 
> 时间：2012-10-10T08:44:58.117
> 
> 标签：jboss, glassfish

我只是从 JBoss 6.1 迁移到 Glassfish 3.1（不要问为什么）。发生以下情况：

```
Invalid ejb jar [mmsUserMgmtAct-0.0.1-SNAPSHOT.jar]: it contains zero ejb
...
Note: 
1\. A valid ejb jar requires at least one session, entity (1.x/2.x style), or message- 
driven bean. 
2\. EJB3+ entity beans (@Entity) are POJOs and please package them as library jar. 
3\. If the jar file contains valid EJBs which are annotated with EJB component level 
annotations (@Stateless, @Stateful, @MessageDriven, @Singleton), please check server.log 
to see whether the annotations were processed properly. 
```

由于 Jboss 一切都运行得很好，我可以发誓 jar 中有 EJB。唯一可能导致错误的事实是，我将接口（@Remote 和@Local）加上实体（@Entity）拆分为包 xyzService.jar 和无状态 bean（@Stateless、@Remote(XyzService. class)) 到另一个名为 xyzServiceImpl.jar 的存档中。

所有包装都是由 maven 生成的，所以这没有问题。也许我应该提一下，我只是将这些东西复制到了 autodeploy 文件夹中。

有胶水吗？

提前谢谢 El Subcomandante

# javascript - 使用 javascript 读取 json

> ID：12815390
> 
> 赞同：0
> 
> 时间：2012-10-10T08:44:58.350
> 
> 标签：javascript, json, parsing, xmlhttprequest

我在服务器上发送一些请求，它回复我这个：

```
{
    "count": 100,
    "entries": [
        {
            "id": 7563,
            "application": "my-app",
            "user": "admin",
            "time": "2012-10-10T11:32:09.324+07:00",
            "values": {
                "/my-app/name": "4d79f56b-1a20-4b25-bff6-b5f1d7253790"
            }
        },
        {
            "id": 7561,
            "application": "my-app",
            "user": "admin",
            "time": "2012-10-10T11:32:08.687+07:00",
            "values": {
                "/my-app/name": "4d79f56b-1a20-4b25-bff6-b5f1d7253790"
            }
        }
} 
```

我试过了，但似乎没有什么对我有用！

```
 var my_JSON_object = {};
 var xmlhttp = new XMLHttpRequest();

 my_JSON_object = JSON.parse(xmlhttp.responseText);

 xmlhttp.open("GET",url,true);
 xmlhttp.sand(); 
```

一切都很好。但**值**返回 null。
任何帮助，将不胜感激！

[[我的代码]](https://gist.github.com/3864263)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T08:49:42.323

correct your code:

```
 xmlhttp.open("GET",url,false);
 xmlhttp.send();

 //get response after sending request
 my_JSON_object = JSON.parse(xmlhttp.responseText); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T08:47:53.933

```
 alert(my_JSON_object.entries.id); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T08:47:25.390

最简单的方法就是使用 jQuery 来做到这一点：

```
$.getJSON(url, function(data) {
    alert(data.count);
    ...
}); 
```

# facebook - 动态更改“喜欢”的目的地？

> ID：12815394
> 
> 赞同：0
> 
> 时间：2012-10-10T08:45:27.420
> 
> 标签：facebook

经典喜欢按钮代码：

```
<div class="fb-like" style="position:relative;float:left;" data-href="http://www.mywebsite.com/?IDL=1" data-send="false" data-layout="button_count" data-width="450" data-show-faces="false"></div>

<div id="fb-root"></div>
<script type="text/javascript">    
    (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
        fjs.parentNode.insertBefore(js, fjs);
    } (document, 'script', 'facebook-jssdk'));
</script> 
```

它将我喜欢 Facebook 按钮呈现到`http://www.mywebsite.com/?IDL=1`页面。现在，假设由于页面上的某些操作，我想将目标更改为`http://www.mywebsite.com/?IDL=2`：我该怎么做？我需要销毁并再次创建按钮吗？我的意思是动态的，没有“刷新”页面（这很容易）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T09:27:15.170

为什么不使用jquery？

```
$('.fb-like').attr("data-href", "http://www.mywebsite.com/?IDL=2");​ 
```

或者，如果您不想使用 jquery，请将 id 分配给 like`div`并尝试此代码（假设您已将 id 设置为`fb-like`）：

```
document.getElementById('fb-like').setAttribute('data-href','http://www.mywebsite.com/?IDL=2'); 
```

​</p>

这将动态更新您的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T01:54:53.127

您需要销毁已经初始化的按钮并将其替换为另一个按钮，然后调用`FB.XFBML.parse()`它将重新解析 XFBML 并重新初始化新按钮。

# jquery - JQM 翻转开关在更改文本后刷新不起作用

> ID：12815397
> 
> 赞同：0
> 
> 时间：2012-10-10T08:45:30.383
> 
> 标签：jquery, jquery-mobile

[http://jsfiddle.net/T4Y8j/1/](http://jsfiddle.net/T4Y8j/1/)

我正在使用带有 data-i18 的跨度来放置我的所有翻译......但是我遇到了翻转开关刷新新值的问题。我对选择列表也有同样的问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T10:49:41.467

修改交换机标签的解决方法是执行以下操作：

**1 -**`switch_container`将您的交换机隔离在 DIV 中，并为此 DIV提供特定 ID（例如：），例如：

```
<div id="switch_container">

    <select name="slider" id="flipMe" data-role="slider">              
        <option value="off">Off</option>
        <option value="on"></option>
    </select>

</div> 
```

**2 -**假设您要修改的标签位于第二个位置，您可以使用以下方法更改标签：

```
$('#switch_container .ui-slider .ui-slider-inneroffset .ui-slider-handle 
    .ui-slider-label:nth-child(1)').html("ok"); 
```

* * *

这是一个完整的工作示例，您可以在 JSFiddle 中尝试：

**JS代码：**

```
$('#switch_container .ui-slider .ui-slider-inneroffset .ui-slider-handle .ui-slider-label:nth-child(1)').html("ok");

$('#flipMe').val('on').slider('refresh'); 
```

**HTML：**

```
<div id="switch_container">

    <select name="slider" id="flipMe" data-role="slider">
        <option value="off">Off</option>
        <option value="on"></option>
    </select>

</div> 
```

希望这可以帮助。

# sql - 如何查找数据库中日期时间条目之间经过的时间

> ID：12815400
> 
> 赞同：2
> 
> 时间：2012-10-10T08:45:38.070
> 
> 标签：sql, ms-access, date, time

我被要求确定员工在 microsoft access 中保存的数据库中完成一项任务的时间。基本上，一个表包含员工 ID、任务标识符（工作编号）、状态（1 表示工作开始，2 表示工作结束）和事件的日期时间。

只有一个人可以从事任何工作，一旦开始，他们必须在开始另一项任务之前完成任务。数据库中的条目可能看起来像

```
EmpID          TaskID        TaskStatus       TaskDate
1              A001          1                15/09/12 09:00
2              A023          1                15/09/12 09:00
1              A001          2                15/09/12 09:30
3              A011          1                15/09/12 09:35
3              A011          2                15/09/12 09:45
1              A016          1                15/09/12 09:45
2              A023          2                15/09/12 09:45
.. 
```

我需要制作一份报告，显示

```
EmpID          TaskID        Time Take
1              A001          0:30
2              A023          0:45
3              A011          0:10 
```

除此之外，我只需要列出那些花费少于给定持续时间的任务（用于确保在快速完成的工作中仍能满足质量标准）。

感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:13:22.980

此查询将为您提供每个`TaskID`. 未完成的任务（没有带有 的行`TaskStatus=2`）将返回 Null 作为持续时间。`INNER JOIN`如果您希望排除未完成的任务，则可以改用。

```
SELECT
    strt.EmpID,
    strt.TaskID,
    DateDiff('n',strt.TaskDate,stp.TaskDate) AS minutes_taken
FROM
    YourTable AS strt
    LEFT JOIN (
            SELECT TaskID, TaskDate
            FROM YourTable
            WHERE TaskStatus=2
        ) AS stp
    ON strt.TaskID = stp.TaskID
WHERE strt.TaskStatus=1; 
```

注意我只`TaskID`用于加入条件，因为“*只有一个人可以从事任何工作，一旦开始，他们必须在开始另一个任务之前完成任务*”。如果我的解释有误，请更改`ON`条款。

基于该查询构建另一个查询以过滤结果`minutes_taken`。

```
PARAMETERS target Short;
SELECT
    sub.EmpID
    sub.TaskID
    sub.minutes_taken
FROM
    (
        SELECT
            strt.EmpID,
            strt.TaskID,
            DateDiff('n',strt.TaskDate,stp.TaskDate) AS minutes_taken
        FROM
            YourTable AS strt
            LEFT JOIN (
                    SELECT TaskID, TaskDate
                    FROM YourTable
                    WHERE TaskStatus=2
                ) AS stp
            ON strt.TaskID = stp.TaskID
        WHERE strt.TaskStatus=1
    ) AS sub
WHERE sub.minutes_taken < target; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T09:02:19.537

尝试这样的事情：

这是 SQL server 语法，确实需要将其转换为 ms 访问，我认为您唯一需要隐蔽的是 cast 函数，它将数字转换为字符串

```
 select t1.EmpID,
        t1.TaskID,
        cast(datediff('n',t1.TaskDate,t2.TaskDate)/60 as varchar(10))+' : '+
        cast(datediff('n',t1.TaskDate,t2.TaskDate)%60 as char(2)) as TimeTaken
 from   table1 t1
 inner join   table1 t2
 on     t1.EmpID=t2.EmpID
 and    t1.TaskID=t2.TaskID
 where  t1.TaskStatus=1
 and    t2.TaskStatus=2 
```

# [SQL小提琴演示](http://www.sqlfiddle.com/#!3/0ca33/2)

# c++ - 使网络更改永久化 - C++

> ID：12815403
> 
> 赞同：1
> 
> 时间：2012-10-10T08:45:48.617
> 
> 标签：c++, linux, networking, network-interface

我需要允许外部客户端更改运行程序的 Linux 机器的 IP（C++）。我已经知道如何列出所有本地接口和分配给它们的当前 IP。我也知道如何以编程方式更改上述 IP。

我需要知道的是如何使这种更改永久化，因此，如果机器重新启动，它会保持相同的网络配置。最好的方法是什么？手动解析 /etc/network/interfaces？调用一些linux命令？

**编辑**：我正在使用 Debian。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T08:47:49.283

是的，操纵`/etc/network/interfaces`是实现这一目标的方法（只需存储备份以防万一出现问题）。

另外，如果接口是由网络管理器管理的（服务器很少出现这种情况，但发生在桌面上），我认为您可以通过 dbus 调用来操作它。

顺便说一句，你应该提到分发，而不是语言——如果你没有提到文件，就不可能猜到 ;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T09:23:33.657

要使更改永久生效，您必须在`/etc/network/interfaces`DNS 服务器 (resolv.conf) 中写入网络配置。

[http://wiki.debian.org/NetworkConfiguration](http://wiki.debian.org/NetworkConfiguration)

如果您不想每次都解析接口，可以将 IP 和网络保存在配置文件中以恢复它。然后你只需要重写“/etc/network/interfaces”。

更改网络接口配置后，您必须重新启动网络堆栈（特定于发行版）。

重启接口`auto`：

`$ /etc/init.d/networking restart`

重启其他接口：

`$ ifup [iface]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T08:47:54.840

您可以在脚本中调用`ifconfig`和路由`commands`，或者更好，您可以编辑您提到的文件，具体取决于您的 Linux 发行版。

# objective-c - 错误的通知日期

> ID：12815405
> 
> 赞同：0
> 
> 时间：2012-10-10T08:45:53.250
> 
> 标签：objective-c

我正在设置通知，我可以看到我用来设置它的 NSDate 是`2012-10-10 08:37:55 +0000` 但是，然后它 NSLog 另一个日期在我设置通知时触发：

```
 Notification will be shown on: 2011-10-10 08:37:55 +0000 
```

代码是：

```
NSLog(@"mode:%d",[memoryInstance getEditMode]);
NSLog(@"schedule for sound:%@",number);
NSLog(@"DATE :%@",self.date); //different from the one comes next

UILocalNotification *localNotification = [[UILocalNotification alloc] init];

   NSDateFormatter *dateFormat =  [[[NSDateFormatter alloc]init] autorelease]  ;
 [dateFormat setDateFormat:@"YYYY-MM-dd HH:mm:ss"];
 NSString *dateString = [dateFormat stringFromDate:self.date]; //!!
 NSDate *notificationDate = [dateFormat dateFromString:dateString];

localNotification.fireDate = notificationDate;
NSLog(@"Notification will be shown on: %@",localNotification.fireDate); //different!

localNotification.timeZone = [NSTimeZone defaultTimeZone];
localNotification.alertBody = [NSString stringWithFormat:
                               @"You have something to do.."];
localNotification.alertAction = NSLocalizedString(@"View details", nil);

NSDictionary *userInfo = [NSDictionary dictionaryWithObject:number forKey:kTimerNameKey];
localNotification.userInfo=userInfo;

localNotification.soundName = UILocalNotificationDefaultSoundName;
localNotification.applicationIconBadgeNumber =-1;

[[UIApplication sharedApplication] scheduleLocalNotification:localNotification]; 
```

发生的事情是我的通知是在我设置它的那一刻出现的。它在过去。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:52:44.397

知道了。我不得不使用 yyyy 作为格式化程序。YYYY 是一年中的几周。

# javascript - 在浏览器后台加载下载，告诉何时完成

> ID：12815406
> 
> 赞同：0
> 
> 时间：2012-10-10T08:45:54.920
> 
> 标签：javascript, jquery, download

我正在尝试获取一个需要几秒钟才能在后台加载的文件，因此我可以同时显示一个微调器。

我目前正在后台尝试使用 iframe，这可行，但我不确定如何在它完成加载时收到通知（这样我就可以删除微调器）。

有什么好的方法吗？有比 iframe 更好的解决方案吗？

到目前为止，这是我的代码：

```
<script>
    $(document).ready(function() {
        var link = $('.generate-pdf');

        link.click(function(e) {
            e.preventDefault();
            var spinner = $("<img src='/assets/images/ajax-loader.gif' />");
            var iframe = $('<iframe src="' + link.attr('href') + '" style="height:0;width:0;visibility;hidden;display:none;"></iframe>');
            link.before(spinner);
            link.before(iframe);

        });
    })
</script> 
```

根据[这个网站](http://www.atalasoft.com/cs/blogs/jake/archive/2009/06/18/events-to-expect-when-dynamically-loading-iframes-in-javascript.aspx)，鉴于我`Content-disposition`是`attachment`我不能保证收到任何事件。我可以轮询 iframe 上的任何属性以找出答案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:05:09.627

你有没有尝试过

```
iframe.load(function(){
    log("done");
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T09:44:01.217

最后，我不得不联系服务器，查看文件是否已发送到浏览器。我仍然希望看到一个纯粹的基于客户端的实现。

谢天谢地，下载是用 PHP 生成的，所以没问题。

```
<script>
    $(document).ready(function() {
        var link = $('.generate-pdf');

        link.click(function(e) {
            e.preventDefault();
            var spinner = $("<div class='spinner'><img src='/assets/images/ajax-loader.gif' /><span>Your PDF is being generated...</span></div>");
            var downloadKey = new Date().getTime();
            var iframe = $('<iframe src="' + link.attr('href') + '&downloadKey='+downloadKey+'" style="height:0;width:0;visibility;hidden;display:none;" onload="alert(\'hello\')"></iframe>');
            link.before(spinner);
            link.before(iframe);

            var hasFinished = function(downloadKey, callback) {
                var that = this;
                $.ajax({
                    url: "index.php?controller=is-download-finished&downloadKey=" + downloadKey,
                    success: function(data) {
                        if (data) {
                            callback();
                        } else {
                            setTimeout(function() {
                                that(downloadKey, callback);
                            }, 1000);
                        }
                    }
                })
            };
            hasFinished(downloadKey, function() {
                spinner.remove();
                iframe.remove();
            });

        });
    })
</script> 
```

额外的请求只返回 JSON true 或 false。

# java - 小程序不显示在浏览器中

> ID：12815409
> 
> 赞同：0
> 
> 时间：2012-10-10T08:46:05.597
> 
> 标签：java, netbeans, applet

afer 遵循了关于如何将小程序集成到 netbeans 页面上的网站的教程

netbeans.org/kb/docs/web/applet.html

我已将小程序添加到网站。但是，小程序不显示，而是灰屏。日志中没有打印错误（我使用的是 tomcat 服务器），并且它也不显示我在小程序中创建的日志。我认为该网站无法调用小程序。以下图片是我在 index.jsp 页面中编写的 html 代码、按下运行后在浏览器中显示的屏幕和小程序窗口。

i182.photobucket.com/albums/x38/DNK90/index_zpsab9f8edf.jpg

i182.photobucket.com/albums/x38/DNK90/web_zpsf2ebb6f2.jpg

i182.photobucket.com/albums/x38/DNK90/applet_zps49c1da5c.jpg

# php - 使用 Session 按时间限制表单提交

> ID：12815411
> 
> 赞同：7
> 
> 时间：2012-10-10T08:46:07.493
> 
> 标签：php

我花了2个多小时在网上搜索试图弄清楚这一点。我正在尝试以超过 60 秒的速度停止多个表单提交。这是我正在使用的。

```
session_start();
if (!isset($_SESSION['last_submit']))
    $_SESSION['last_submit'] = time();

if (time()-$_SESSION['last_submit'] < 60)
    die('Post limit exceeded. Please wait at least 60 seconds');
else
    $_SESION['last_submit'] = time(); 
```

我在网站上找到了这一点，但就让它工作而言，我还没有弄清楚其他任何事情。我一开始在我的页面上有这段代码，它使用前几页的 POST 结果进行数据库查询。我需要设置`$last_submit`为某个值吗？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T08:56:52.537

你有两个问题。首先，在第一次执行时，您将会话值设置为`time()`，因此第一次尝试将始终产生超出限制的错误。第二个问题是你有一个错字`$_SESION`。

尝试：

```
session_start();

if (isset($_SESSION['last_submit']) && time()-$_SESSION['last_submit'] < 60)
    die('Post limit exceeded. Please wait at least 60 seconds');
else
    $_SESSION['last_submit'] = time(); 
```

另外需要注意的是，这不是万无一失的，因为用户可以拒绝 cookie 或删除会话 cookie，以绕过您的检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T08:56:48.760

最后的声明：

`$_SESION['last_submit'] = time();`

应该：

`$_SESSION['last_submit'] = time();`

你忘了一个*S* ...

这段代码也将*死亡*，这意味着该`die`语句将被执行。

选择：

```
if (time() - ( isset($_SESSION['last_submit'])?$_SESSION['last_submit']:0 )< 60) 
    die('Post limit exceeded. Please wait at least 60 seconds'); 

// update the session
$_SESSION['last_submit'] = time(); 
```

# javascript - outerHTML 方法存在于哪个jquery版本中

> ID：12815412
> 
> 赞同：0
> 
> 时间：2012-10-10T08:46:10.143
> 
> 标签：javascript, jquery

我在我的 javascript 中尝试了这个，它在没有额外插件的情况下工作

```
var2 = $('.my_div')[0].outerHTML; 
```

但我在官方文档中找不到它。我在哪里可以找到更多相关信息

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T08:47:30.900

**[`outerHTML`](https://developer.mozilla.org/en-US/docs/DOM/element.outerHTML)**是原生 JavaScript DOM 对象属性。**你可以在MDN**中阅读它：

> *[https://developer.mozilla.org/en-US/docs/DOM/element.outerHTML](https://developer.mozilla.org/en-US/docs/DOM/element.outerHTML)*
> 
> 元素 DOM 接口的 outerHTML 属性获取描述元素（包括其后代）的序列化 HTML 片段。它可以设置为用从给定字符串解析的节点替换元素。

让`$('.my_div')[0]`您从 jQuery 对象中**[获取](http://api.jquery.com/get/)**DOM 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T08:51:41.590

标准 jQuery 中没有 outerHTML 函数。

如果您想要使用标准 DOM 参数，请参阅 VisioN 的答案。

如果您尝试设置 jQuery 元素的 outerHTML，就像使用 jQuery`html`函数一样，您可以使用这个插件：[jQuery: outerHTML](http://www.yelotofu.com/2008/08/jquery-outerhtml/)

```
jQuery.fn.outerHTML = function(s) {
return (s)
? this.before(s).remove()
: jQuery("&lt;p&gt;").append(this.eq(0).clone()).html();
} 
```

这使

```
 $('.my_div').outerHTML("<div class=a>new content</div>"); 
```

# java - 如何将 JSP var 传递给运行时 exec？

> ID：12815415
> 
> 赞同：1
> 
> 时间：2012-10-10T08:46:15.293
> 
> 标签：java, jsp, exec

目标：我试图在`exec`命令中使用 2 个字符串 var 作为 shell 脚本的参数。

字符串从 HTML 前端很好地传递，但 exec 不允许它们在 exec 字符串中。

我错过了什么？

```
<%@page import="java.io.*"%>
<%@page import="java.util.*"%>

<html>
<head>
    <title> Test</title>
<head/>

<body>
<%
String username, password;

if(request.getParameter("txtUserName") == null)
    username = "";
else
    username = request.getParameter("txtUserName");

if(request.getParameter("txtPassword") == null)
    password = "";
else
    password = request.getParameter("txtPassword");

Runtime r = Runtime.getRuntime();
Process p = null;
String s = null;
String cmd = "/tools/scripts/jspTest.sh";

p = r.exec(cmd + username + password);
InputStreamReader isr = new InputStreamReader(p.getInputStream());
BufferedReader br = new BufferedReader(isr);
String line = null;
while((line = br.readLine()) != null){
    out.println(line);
}

p.waitFor();
%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:25:43.223

我不知道你的意思是*不会允许他们*，但很明显你调用脚本的方式是行不通的。

```
cmd + username + password 
```

这将产生一个字符串，如`/tools/scripts/jspTest.shmyusernamemypassword`.

如果 Java 尝试执行此操作，系统将不会找到该命令（除非您在脚本名称中嵌入了用户名/密码）。我认为您可能需要调整传递这些值的方式（作为正确的参数）。

# command-prompt - Windows XP 下无法运行 Lightswitch 2012 程序 Take 2

> ID：12815417
> 
> 赞同：0
> 
> 时间：2012-10-10T08:46:23.200
> 
> 标签：command-prompt, visual-studio-lightswitch, dumpbin

[我和这里](https://stackoverflow.com/questions/12140643/cant-run-lightswitch-2012-programm-under-windows-xp)提出并回答的问题完全相同。我有一个拒绝在 XP SP3 上运行的 LS 桌面应用程序。

但是，我完全不知道如何使用命令提示符和 dumpbin。我设法找到了命令提示符（这对我来说真的很重要），并且在 VS2012 中加载了 LS 项目后，我运行了所述命令，但出现以下错误：

> 命令“dumpbin”无效

这显然是我对如何做到这一点的完全无知，所以有人可以解释或指向我的教程（最好是有很多图片的教程！！）

据我了解，我需要让 LS 应用程序使用 .net 4 而不是 .net 4.5。如果有其他方法可以做到这一点，我将非常感谢您的帮助。

闪耀，

麻木的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T08:53:20.490

弄清楚如何让 dumpbin 和 editbin 工作。没有意识到您需要导航到要更改的项目的路径。

这是多么愚蠢！

# android - Android 4.1.2 云消息

> ID：12815421
> 
> 赞同：0
> 
> 时间：2012-10-10T08:46:34.667
> 
> 标签：android, android-c2dm, google-cloud-messaging

我已经在我的 nexus 7 上安装了新版本的 android 4.1.2。现在我所有使用旧 c2dm 系统的应用程序根本没有收到任何通知。

是否需要更改为新的 gcm 系统以支持 android 4.1.2 设备上的云消息传递？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:51:28.233

Short answer is **YES**.

> Important: C2DM has been officially deprecated as of June 26, 2012. This means that C2DM has stopped accepting new users and quota requests. No new features will be added to C2DM. However, apps using C2DM will continue to work. Existing C2DM developers are encouraged to migrate to the new version of C2DM, called Google Cloud Messaging for Android (GCM). See the C2DM-to-GCM Migration document for more information. Developers must use GCM for new development.

[see my answer](https://stackoverflow.com/questions/11464184/google-cloud-messaging/12437549#12437549) how to integrate to GCM.

# android - 对资产文件夹使用限定符

> ID：12815422
> 
> 赞同：2
> 
> 时间：2012-10-10T08:46:42.640
> 
> 标签：android

目前我们有一个项目，我们必须将它们存储在 assets 文件夹中，而不是使用 res/drawable 文件夹来存储图像。然而，我们仍然希望根据设备的分辨率/密度等利用 Android 的自动选择图像（通过限定符，例如 drawable-hdpi、drawable-mdpi 等）。

我的问题是，您知道是否可以在assets文件夹中使用限定符并使用Android机制来选择最佳图像资源？如果没有，您知道我可以使用其他方法作为解决方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T09:00:57.183

限定符仅适用于资源文件夹。但是，您可以使用限定符从资产中获取要使用的文件名。

例如，您可以在 values-ldpi、values-hdpi 等中有不同的 strings.xml。这些 strings.xml 中的每一个都包含要使用的文件的名称。

值-ldpi/strings.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="logo_file">logo-ldpi.png</string>
</resources> 
```

值-mdpi/strings.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="logo_file">logo-mdpi.png</string>
</resources> 
```

然后，您可以使用获取 logo_file 的名称`getResources().getString(R.string.logo_file)`并使用它从资产中检索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:53:42.103

恐怕其他方法相当乏味。您可以使用[配置](http://developer.android.com/reference/android/content/res/Configuration.html)类来查询方向，屏幕密度..等。了解配置详细信息后，您可以自行选择正确的资源。

# php - cache_on 方法不起作用

> ID：12815428
> 
> 赞同：0
> 
> 时间：2012-10-10T08:47:13.317
> 
> 标签：php, codeigniter, caching, pdo

我想在我的网站上缓存一些 sql 查询。我看到 CodeIgniter 提出了一个 [Database Caching Class](http://codeigniter.com/user_guide/database/caching.html)。

`$this->db->cache_on();`但是当我像我的脚本一样调用缓存方法时，会返回这个错误：

**致命错误：调用未定义的方法 PDO::cache_on()**

我认为我已经正确配置了我的 database.php 配置文件：

```
$db['default']['cache_on'] = TRUE;
$db['default']['cachedir'] = 'application/cache'; 
```

也许是我的 PDO 版本太旧了？我需要哪个版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T09:09:55.140

手册说“启用缓存功能，可以通过在 application/config/database.php 文件中设置首选项来全局启用，也可以如下所述手动启用**。** ”

所以两者都做`$this->db->cache_on();` **似乎** `$db['default']['cache_on'] = TRUE;` 是多余的。第一个用于全局使用，第二个用于代码的特定部分。

你的 MySQL 版本是多少？您可以使用`phpinfo();`You will need 4.1+ 找到它。

如果您想查看缓存是否有效，请使用一种或另一种方法，检查缓存目录的文件权限，运行一些查询并查看 CI 是否在目录中存储了文件。

# facebook - 无法使用 Facebook 应用访问令牌获取数据

> ID：12815432
> 
> 赞同：2
> 
> 时间：2012-10-10T08:47:29.777
> 
> 标签：facebook, facebook-graph-api, facebook-fql, facebook-access-token

我正在尝试编写一个 Facebook 应用程序。我可以轻松使用 Facebook 用户的权限。我正在尝试使用 FQL 从不同的 Facebook 表中获取一些数据。这些是我的应用程序拥有的权限：

```
{
   "data": [
      {
         "installed": 1,
         "read_stream": 1,
         "status_update": 1,
         "photo_upload": 1,
         "video_upload": 1,
         "email": 1,
         "create_note": 1,
         "share_item": 1,
         "publish_stream": 1,
         "read_insights": 1,
         "manage_notifications": 1,
         "read_friendlists": 1,
         "publish_actions": 1,
         "user_birthday": 1,
         "user_religion_politics": 1,
         "user_relationships": 1,
         "user_relationship_details": 1,
         "user_hometown": 1,
         "user_location": 1,
         "user_likes": 1,
         "user_activities": 1,
         "user_interests": 1,
         "user_education_history": 1,
         "user_work_history": 1,
         "user_website": 1,
         "user_groups": 1,
         "user_events": 1,
         "user_photos": 1,
         "user_videos": 1,
         "user_photo_video_tags": 1,
         "user_notes": 1,
         "user_questions": 1,
         "user_about_me": 1,
         "user_status": 1,
         "user_games_activity": 1,
         "user_subscriptions": 1
      }
   ]
} 
```

这意味着我有权从流表中获取数据。因为它需要`read_stream`和`read_insight`。这是我获取数据的网址：

```
https://graph.facebook.com/fql?q=SELECT likes, comments, post_id, actor_id from stream where source_id=SOURCE_ID&access_token=MY_ACCESS_TOKEN 
```

但结果是 `{ "data": [ ] }`

完全是空的。它没有错误。

但是，当我尝试使用具有相同权限的图形 API 访问令牌（使用用户访问令牌）时，我可以轻松获取数据。

我不能使用应用程序的访问令牌从流表中获取数据吗？有没有办法使用应用程序的访问令牌来获取它？

我的应用程序的访问令牌没有给出任何错误。我的访问令牌有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:06:00.953

您无法`stream`使用应用访问令牌获取数据。您必须对您的应用程序的用户进行身份验证并使用用户访问令牌来获取此数据。如果您在 Graph API 资源管理器中更改应用程序，它会对您进行身份验证，并且仍会以您的名义获得用户访问令牌。

另外，请记住，“隐私设置”下有一个设置，用户可以禁止应用程序对其数据的所有访问。如果设置了此项，您将不会在您的应用程序或 API 资源管理器中看到该特定用户的任何内容。

当您没有查看您请求的数据所需的权限时，空数据集是 Facebook 的正常结果。如果您深入研究 API 文档，Facebook API 服务器首先执行您的查询，然后过滤结果以显示您的应用程序和访问令牌可见的内容。该过滤器可以删除所有数据，因此返回一个空数据集。

# java - mt4j 和处理库：清理图像资源

> ID：12815434
> 
> 赞同：4
> 
> 时间：2012-10-10T08:47:34.387
> 
> 标签：java, processing, mt4j

我在一个相当大的项目中使用 mt4j 库，其中场景被定期推送和弹出；mt4j 使用处理库来处理图像。

我们使用`loadImage()`加载图像的方法，但是我不知道如何在弹出场景时从内存中删除这些图像；我们实际上有内存问题，因为在应用程序运行期间使用的内存会增加..

你有什么想法吗？

谢谢杰里米

编辑 ：

我刚刚写了一个 ImageManager 类：

```
package managers;

import java.util.HashMap;
import java.util.Map;

import org.mt4j.MTApplication;

import processing.core.PImage;

public class ImageManager {

private static ImageManager mImageManager = null;

protected MTApplication mApp;
protected Map< String, PImage > mImages;

protected PImage mTempImg;

private ImageManager( MTApplication app ) {
    mApp = app;
    mImages = new HashMap< String, PImage >();
}

public static synchronized ImageManager getInstance( MTApplication app ) {
    if( mImageManager == null ) {
        mImageManager = new ImageManager( app );
    }

    return mImageManager;
}

/**
 * Load or retrieve img in memory
 * 
 * @param path Path to the image
 * @return <PImage> the image
 */
public PImage getImage( String path ) {
    // Search for image
    if( mImages.containsKey( path ) ) {
        System.out.println( "ImageManager::getImage : image found !" );
        mTempImg = mImages.get( path );
    } 
    else {
        System.out.println( "ImageManager::getImage : image not found, loading" );
        mTempImg = mApp.loadImage( path );
        mImages.put( path, mTempImg );
    }

    return mTempImg;
}
} 
```

这是我的问题：我认为它可以帮助我解决内存问题，但每次加载图像时我仍然会看到内存增加。使用示例：

```
ImageManager imgManager = ImageManager.getInstance( (MTApplication) app );
            PImage image = imgManager.getImage( getPathToIcons() + imagesNames[i] );
            //PImage image = app.loadImage(getPathToIcons() + imagesNames[i]);
            mSceneImages.add( image ); 
```

任何的想法 ？谢谢

编辑 2：事实上，这种方法效果很好 :) 问题解决了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T17:01:38.790

或者也许只是重复使用它们？首先image1 = loadImage(oneImage)，后来image1 = loadImage(anotherImage)？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T21:52:39.990

对于 java 中的内存泄漏，您可能会考虑打包。除了运行之外，我还没有找到一个很好的处理解决方案

> 顶部-s 5

（在 unix 系统上）并观察内存使用情况，直到它挂起。我最近在一个 datavis 项目中工作，我在 ArrayList 中创建了潜在的数千个 blitts（在我的例子中是在 opengl 中使用的文本图像）。最初，我每次加载数据时都会即时重新创建这些数组，这会导致“内存泄漏”。

就我而言，我尝试清空对象引用并专门调用垃圾收集器。我认为这可能与处理调用您的 void draw() 方法每秒可能 60 次以上的事实有关，但似乎它似乎从未放弃引用。

我为纠正这个问题所做的就是在 setup method() 中加载所有图像/只创建一次 blits，并且只在有新数据时将新项目附加到 ArrayList 中。

在此之前，我只是在运行中重新创建整个 ArrayList，因为它看起来足够快，但是当运行很长时间时，会出现这个可怕的内存泄漏问题。

现在我只是将 blit 分配给了这个引用，而不是每次都创建一个新对象和 ArrayList。它效率更高，并且没有遇到同样的内存问题。

例如这样的事情（循环运行数千次）：

```
tempImage = imageArrayList.get(i); // just assigns a reference, does not create a new object 
```

而不是这样的：

```
tempImage = loadImage("image.jpg"); // this creates a new object every time it is called 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T16:46:45.653

LoadImage 返回一个 PImage 对象。如果您丢弃这些 PImage 引用，那么垃圾收集器 System.gc() 应该删除它们。你试过吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T20:14:00.927

您使用的是 Processing 2.x 吗？如果是这样，也许处理论坛中的[这个](http://forum.processing.org/topic/pimage-memory-leak-example)帖子可以是答案。显然在 2.x 中使用图像存在内存泄漏。他们还指出了一个你可能想尝试的解决方法，这里是我指出的线程中来自 PhiLho 的 hack 的示例。HTH。

```
void draw()
{
  PImage img = createImage(width, height, RGB);
  image(img, 0, 0);
  g.removeCache(img);// this is avoiding the leak
  println(frameCount + " " + g.getCache(img));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T10:23:46.640

编辑：最后我尝试一次删除图像，但它并没有清理内存......好像还有一些我找不到的其他参考资料......有什么想法可以确保内存清理吗？

我对问题的解决方案：ImageManager 类

```
package managers;

import java.util.HashMap;
import java.util.Map;

import org.mt4j.MTApplication;

import processing.core.PImage;

public class ImageManager {

private static ImageManager mImageManager = null;

protected MTApplication mApp;
protected Map< String, PImage > mImages;

protected PImage mTempImg;

private ImageManager( MTApplication app ) {
    mApp = app;
    mImages = new HashMap< String, PImage >();
}

public static synchronized ImageManager getInstance( MTApplication app ) {
    if( mImageManager == null ) {
        mImageManager = new ImageManager( app );
    }

    return mImageManager;
}

/**
 * Load or retrieve img in memory
 * 
 * @param path Path to the image
 * @return <PImage> the image
 */
public PImage getImage( String path ) {
    // Search for image
    if( mImages.containsKey( path ) ) {
        System.out.println( "ImageManager::getImage : image found !" );
        mTempImg = mImages.get( path );
    } 
    else {
        System.out.println( "ImageManager::getImage : image not found, loading" );
        mTempImg = mApp.loadImage( path );
        mImages.put( path, mTempImg );
    }

    return mTempImg;
}
} 
```

# ember.js - Ember 视图未显示

> ID：12815444
> 
> 赞同：0
> 
> 时间：2012-10-10T08:47:56.390
> 
> 标签：ember.js

我正在关注本教程[http://www.adobe.com/devnet/html5/articles/flame-on-a-beginners-guide-to-emberjs.html](http://www.adobe.com/devnet/html5/articles/flame-on-a-beginners-guide-to-emberjs.html)

并且无法显示 ReviewTextArea 视图。

到目前为止，我的代码是：

**索引.html**

```
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="http://cloud.github.com/downloads/emberjs/ember.js/ember-0.9.6.min.js"></script>
    <script src="js/app.js"></script>
</head>
<body>

<script type="text/x-handlebars">
    Hello <b>{{Songs.mixmaster}}</b>
</script>   

<script type="text/x-handlebars">
    {{view Songs.ReviewTextArea}}
</script>   

</body>
</html> 
```

**应用程序.js**

```
Songs = Em.Application.create({
    mixmaster: 'Andy',
    totalReviews: 0,
    ready: function() {
        alert('Ember sings helloooo');
    }
});

Songs.Song = Em.Object.extend({
    title: null,
    artist: null,
    genre: null,
    listens: 0
});

mySong = Song.create({
    title: 'Son of the Morning',
    artist: 'Oh, Sleeper',
    genre: 'Screamo'
});

Songs.ReviewTextArea = Em.TextArea.extend({
    placeholder: 'Enter your review',
}); 
```

但是，我的浏览器（Chrome 22.0.1229.92）在页面中仅显示原始 {{view ...}} 标记（使用 Inspect Element）。

关于为什么这不起作用的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T09:27:54.890

您的代码中有错误 - 未定义歌曲。

```
mySong = Song.create({
   title: 'Son of the Morning',
   artist: 'Oh, Sleeper',
   genre: 'Screamo'
}); 
```

它应该是`Songs.Song`

# entity-framework - 使用实体框架的乐观并发更新

> ID：12815445
> 
> 赞同：0
> 
> 时间：2012-10-10T08:48:01.870
> 
> 标签：entity-framework, entity-framework-4

我有一个使用 EF 4.1 的存储库，并且`DbContext`在更新对象时收到此错误

> *存储更新、插入或删除语句影响了意外数量的行 (0)。自加载实体后，实体可能已被修改或删除。刷新 ObjectStateManager 条目。*

我想这与乐观并发更新有关。知道如何解决吗？

```
 public void UpdateAddingCandidate(Event eventObj, int candidateId)
    {
        Candidate newCandidate = db.Candidates.AsNoTracking().FirstOrDefault(x => x.CandidateId == candidateId);
        eventObj.Candidate = newCandidate;
        eventObj.CandidateId = newCandidate.CandidateId;
        db.Entry(eventObj).State = EntityState.Modified;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:56:21.697

查看 ObjectContext.Refresh，它允许您从数据库中刷新实体。您可以将 RefreshMode 设置为 ClientWins 或 StoreWins。

使用 Try...Catch 逻辑并处理 catch 中的冲突以使用 ClientWins 强制更改或将更改的数据下拉到上下文中并重新启动编辑。在大多数情况下，后者是更好的方法。

# python - URL fetch: 在 python/django 中防止滥用、邮件 URL 等

> ID：12815448
> 
> 赞同：3
> 
> 时间：2012-10-10T08:48:07.413
> 
> 标签：python, django, security, urlfetch

我正在建立一个网页，其特色非常类似于 facebook 墙/新闻源。注册用户（或通过 Facebook-connect、google auth）可以提交 url。目前，我正在使用这些 URL 并使用 urllib2 来获取 URL 的内容并搜索相关信息，例如 og:properties、HTML 标题标签和图像的一些标签。

现在，我知道当我让用户向我的服务器提供要打开的 URL 时，我将我的服务器置于危险之中。

我的问题是风险有多高？我可以进行哪些标准安全检查？

至于现在，我只是在没有任何“主动”保护的情况下打开 url，因为我不知道要检查什么。

以及如何将获取的内容存储到数据库中。django 是否具有针对 SQL 注入的内置保护？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T09:00:23.173

这里明显的风险之一是，人们可能会将您的网站用作传播恶意 URL 的载体。

例如，假设我发现了一个格式错误的 html，它允许在基于 webkit 的浏览器中执行任意代码，例如通过利用某个 0-day 缓冲区溢出。假设您的网站很受欢迎，那将是我肯定会尝试的地方之一。

现在，您不可能匹配提交的 URL 的内容来查找安全漏洞。那时您将成为一家防病毒/安全公司。Chrome 和 Safari 都在一定程度上处理了这些问题。

为了用户/内容以及我解释的风险，您可以构建一个通过用户行为学习的标记系统。每当有人标记 URL 时，您都可以训练分类器，请参见此处的[示例](https://github.com/livingsocial/ankusa)。

我确信在 python 中也有各种这样的解决方案。

要快速了解 Django 上下文中的安全性和 sql 注入，请[查看此链接](http://www.djangobook.com/en/2.0/chapter20.html)。

# java - 如何在 Excel 2007 中计算形状的位置？

> ID：12815451
> 
> 赞同：1
> 
> 时间：2012-10-10T08:48:18.800
> 
> 标签：java, apache-poi

我需要将一些形状导出到 excel 文件中。我使用 Excel 2007。

我想在给定的 x 和 y 点上放置一个矩形。我不明白 XSSFClientAnchor 类是如何工作的。如何计算 X 和 Y 坐标的起点？如何计算 X 和 Y 的端点？XSSFClientAnchor 类的前 4 个参数以什么度量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-22T14:05:53.993

我知道您在这里得到了一些回复：http: [//apache-poi.1045710.n5.nabble.com/How-to-calculate-location-of-the-shape-in​​-Excel-2007-td5711113.html](http://apache-poi.1045710.n5.nabble.com/How-to-calculate-location-of-the-shape-in-Excel-2007-td5711113.html)

只是张贴让其他访问者的生活很容易找到细节。

# java - HashMap：以随机顺序迭代键值对

> ID：12815460
> 
> 赞同：7
> 
> 时间：2012-10-10T08:48:51.647
> 
> 标签：java, data-structures, random, iterator, hashmap

我有一个 HashMap，我想在每次获得迭代器时以不同的随机顺序迭代它们的键值对。从概念上讲，我想在调用迭代器之前“洗牌”地图（或者如果你愿意，“洗牌”迭代器）。

我有两个选择：

1）使用 LinkedHashMap 的方法并在内部保留条目列表，将其就地打乱并在调用迭代器时返回该视图。
2) 取 map.entrySet()，构造一个 ArrayList 并在其上使用 shuffle()。

虽然这两种方法看起来和我很相似，但我期待非常大的 HashMap，所以我真的很关心细节和内部结构，因为我真的不能浪费内存或计算。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-10T09:08:47.490

重新洗牌大量收藏总是很昂贵的。每个条目至少需要一个参考。例如，对于 100 万个条目，您将需要大约 4 MB。

笔记; 洗牌操作是`O(N)`

我会用

```
Map<K,V> map = 
List<Map.Entry<K,V>> list = new ArrayList<Map.Entry<K,V>>(map.entrySet());

// each time you want a different order.
Collections.shuffle(list);
for(Map.Entry<K, V> entry: list) { /* ... */ } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T10:53:39.843

实际上，您根本不需要洗牌：
只需在键数组中绘制一个随机索引并通过覆盖最后一个键来删除键：

```
public class RandomMapIterator<K,V> implements Iterator<V> {

private final Map<K,V> map;
private final K[] keys;

private int keysCount;

@SuppressWarnings("unchecked")
public RandomMapIterator(Map<K,V> map) {
    this.map = map;
    this.keys = (K[]) map.keySet().toArray();
    this.keysCount = keys.length;
}

@Override
public boolean hasNext() {
    return keysCount!=0;
}

@Override
public V next() {
    int index = nextIndex();
    K key = keys[index];
    keys[index] = keys[--keysCount];
    return map.get(key);
}

protected int nextIndex() {
    return (int)(Math.random() * keysCount);
}

@Override
public void remove() {
    throw new UnsupportedOperationException();
} 
```

}

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-10T09:05:24.260

尝试使用并发哈希映射并在迭代周期之前随机获取密钥

```
Map<String, String> map = Maps.newConcurrentMap();

        map.put("1", "1");
        map.put("2", "2");
        Iterator<String> iterator = map.keySet().iterator();
        while (iterator.hasNext()) {
            map.remove("2");// add random key values
            map.put("2", "2");
            String next = iterator.next();
            System.out.println("next" + next);
        } 
```

随机删除/放置值可以“打乱”您的地图

# c - C - 为什么我不能映射小（256UL 或更小）的内存？

> ID：12815466
> 
> 赞同：5
> 
> 时间：2012-10-10T08:49:08.333
> 
> 标签：c, linux, memory, size, mmap

请告诉我，为什么我的简单应用程序无法映射小内存？

而且，为什么会有这样一个特定的边界 - 257UL？

```
// #define MAP_SIZE 256UL or below - fail
// #define MAP_SIZE 257UL - ok

#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <string.h>
#include <errno.h>
#include <signal.h>
#include <fcntl.h>
#include <ctype.h>
#include <termios.h>
#include <sys/types.h>
#include <sys/mman.h>

#define FATAL do { fprintf(stderr, "Error at line %d, file %s (%d) [%s]\n", \
  __LINE__, __FILE__, errno, strerror(errno)); exit(1); } while(0)

#define MAP_SIZE 4096UL
#define MAP_MASK (MAP_SIZE - 1)

int main(int argc, char **argv) {
    int fd;
    void *map_base, *virt_addr;
    unsigned long read_result, writeval;
    off_t target = strtoul("0x00002000", 0, 0);

    if((fd = open("/dev/mem", O_RDWR | O_SYNC)) == -1) FATAL;
    printf("/dev/mem opened.\n");
    fflush(stdout);

    map_base = mmap(0, MAP_SIZE, PROT_READ | PROT_WRITE, MAP_SHARED, fd, target & ~MAP_MASK);
    if(map_base == (void *) -1) FATAL;
    printf("Memory mapped at address %p.\n", map_base);
    fflush(stdout);
...
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T09:08:43.550

可能你只是没有写信的权利`/dev/mem`。这可能不是您想要的，将所有低端物理内存映射到您的地址空间。

查看`shm_open`打开内存段或`MAP_ANONYMOUS`匿名映射。

*编辑：*

做一个`man mem`来知道`/dev/mem`设备节点是关于什么的：

> mem 中的字节地址被解释为物理内存地址。对不存在的位置的引用会导致返回错误。

如果您想映射到设备节点以拥有您应该使用的内存段`/dev/zero`，但现在我上面描述的工具应该足够了。

然后不要，真的不要，用 root 权限运行这样的代码，除非你真的知道你在做什么。写入物理内存并因此覆盖内核和用户空间数据和程序只会导致灾难。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T09:45:23.200

mmap 在您的系统上以页面大小的倍数工作。如果您在 i386/amd64 或实际上是最现代的 CPU 上执行此操作，则为 4096。

在我系统上的 mmap 手册页中，它说：“偏移量必须是 sysconf(_SC_PAGE_SIZE) 返回的页面大小的倍数。”。在某些系统上，由于历史原因，长度参数可能不是页面大小的倍数，但在这种情况下 mmap 无论如何都会四舍五入到整页。

# ios6 - Intergration ios 6 and facebook

> ID：12815471
> 
> 赞同：1
> 
> 时间：2012-10-10T08:49:30.723
> 
> 标签：ios6, facebook-ios-sdk

It is first time Im going to develop integration between out app on ios with facebook.

Now I understand that I can use simultaneously both Facebook's integration apis and Apple's integration apis.

Could you please advice me that in that case In the same one Ios application, :

1.What should Facebook's intergration apis do. 2.What should Apple's intergration apis do.

Thank you very much !

Doanh

# python - comparing large vectors in python

> ID：12815476
> 
> 赞同：0
> 
> 时间：2012-10-10T08:49:43.867
> 
> 标签：python, vector

I have two large vectors (~133000 values) of different length. They are each sortet from small to large values. I want to find values that are similar within a given tolerance. This is my solution but it is very slow. Is there a way to speed this up?

```
import numpy as np

for lv in range(np.size(vector1)):
    for lv_2 in range(np.size(vector2)):
        if np.abs(vector1[lv_2]-vector2[lv])<.02: 
            print(vector1[lv_2],vector2[lv],lv,lv_2)
            break 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:47:37.703

以下代码可以很好地提高性能，具体取决于数字的密集程度。使用一组 1000 个随机数，在 0 到 100 之间均匀采样，它的运行速度比您的实现快大约 30 倍。

```
pos_1_start = 0

for i in range(np.size(vector1)):
    for j in range(pos1_start, np.size(vector2)):
        if np.abs(vector1[i] - vector2[j]) < .02:
            results1 += [(vector1[i], vector2[j], i, j)]
        else:
            if vector2[j] < vector1[i]:
                pos1_start += 1
            else:
                break 
```

时机：

```
time new method: 0.112464904785
time old method: 3.59720897675 
```

由以下脚本生成：

```
import random
import numpy as np
import time

# initialize the vectors to be compared
vector1 = [random.uniform(0, 40) for i in range(1000)]
vector2 = [random.uniform(0, 40) for i in range(1000)]

vector1.sort()
vector2.sort()

# the arrays that will contain the results for the first method
results1 = []

# the arrays that will contain the results for the second method
results2 = []

pos1_start = 0

t_start = time.time()
for i in range(np.size(vector1)):
    for j in range(pos1_start, np.size(vector2)):
        if np.abs(vector1[i] - vector2[j]) < .02:
            results1 += [(vector1[i], vector2[j], i, j)]
        else:
            if vector2[j] < vector1[i]:
                pos1_start += 1
            else:
                break

t1 = time.time() - t_start
print "time new method:", t1

t = time.time()
for lv1 in range(np.size(vector1)):
    for lv2 in range(np.size(vector2)):
        if np.abs(vector1[lv1]-vector2[lv2])<.02: 
            results2 += [(vector1[lv1], vector2[lv2], lv1, lv2)]
t2 = time.time() - t_start

print "time old method:", t2
# sort the results

results1.sort()
results2.sort()

print np.allclose(results1, results2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:58:57.200

您的算法远非最佳。你比较了太多的价值观。假设您处于某个位置，`vector1`并且当前值 in`vector2`已经`0.02`大得多了。你为什么要比较其余的`vector2`？

从类似的东西开始

```
pos1 = 0
pos2 = 0 
```

现在比较向量中这些位置的值。如果差值太大，则移动较小的位置，重新检查。继续直到到达一个向量的末尾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T09:00:16.190

尚未对其进行测试，但以下应该可以工作。这个想法是利用向量被排序的事实

```
lv_1, lv_2 = 0,0
while lv_1 < len(vector1) and lv_2 < len(vector2):
  if np.abs(vector1[lv_2]-vector2[lv_1])<.02:
     print(vector1[lv_2],vector2[lv_1],lv_1,lv_2)
     lv_1 += 1
     lv_2 += 1
  elif vector1[lv_1] < vector2[lv_2]: lv_1 += 1
  else: lv_2 += 1 
```

# c++ - Reading hard disk sector raw data - Why hex?

> ID：12815478
> 
> 赞同：0
> 
> 时间：2012-10-10T08:49:56.690
> 
> 标签：c++, file-io, hex

I'm trying to read hard disk sector to get the raw data. Now after searching a lot I found out that some people are storing that raw sector data in hex and some in char .

Which is better, and why ? Which will give me better performance ?

I'm trying to write it in C++ and OS is windows.

For clarification -

```
#include <iostream>
#include <windows.h>
#include <winioctl.h> 
#include <stdio.h>

void main() {
DWORD nRead;
char buf[512];

HANDLE hDisk = CreateFile("\\\\.\\PhysicalDrive0", 
    GENERIC_READ, FILE_SHARE_READ,        
    NULL, OPEN_EXISTING, 0, NULL);

SetFilePointer(hDisk, 0xA00, 0, FILE_BEGIN);
ReadFile(hDisk, buf, 512, &nRead, NULL);
for (int currentpos=0;currentpos < 512;currentpos++) {
    std::cout << buf[currentpos];
}
CloseHandle(hDisk);
std::cin.get();
} 
```

Consider the above code written by someone else and not me.

Notice the datatype char buf[512]; . Storing with datatype as char and it hasn't been converted into hex.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T09:07:53.720

原始数据只是“原始数据”......您按原样存储它，而不是转换它。所以，这里没有性能问题。最多的区别在于以人类可读的格式表示原始数据。一般来说：

*   如果其中包含一些文本，则以 char 格式表示它更容易理解，
*   而十六进制更适合表示数字数据（以防它遵循某种模式）。

在您的特定情况下： char 仅表示 1 个字节。所以你确定你将数据存储在一个 512 字节的缓冲区中。根据整数大小分配这样的空间会使事情变得不必要地复杂

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T09:28:46.003

你把自己弄糊涂了。

磁盘上的数据以二进制形式存储，只是一串由 1 和 0 组成的长流。

它以 char 格式的十六进制读取的原因是因为它更容易做到。

```
decimal: 36
char:    z (potentially one way of representing this value)
hex:     24
binary:  100100 
```

二进制文件是您将从磁盘或内存中读取的原始比特流。十六进制就像它的简写**表示**，它们是完全可以互换的，一个十六进制“数字”简单地代表四位。同样，小数点只是表示该值的另一​​种方式。

然而，char 有点棘手。对于我的表示，我使用字符 0-9 来**表示**值 0-9，然后 az 是**表示**值 10-36。同样，我本可以决定采用标准的 ascii 值，它会给我'$'。

至于为什么在处理字节时使用'char'，是因为C++'har'类型只是一个字节（通常是8位）。

我还将指出负数的问题。当您有一个整数时，即有符号（有正数和负数）第一位（最高有效位）表示一个大的负值，因此如果所有位都是“一”，则该值将表示-1。例如，有四个位，所以很容易看到......

0010 = +2 1000 = -8 0110 = +6 1110 = -2

这个问题的关键在于你如何解释/表示二进制值。相同的位序列可以或多或少地以您想要的任何方式表示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T08:53:35.713

我猜你在谈论被写入某个文件的最终数据。使用十六进制的原因是因为它更容易阅读并且更难搞砸。通常，如果有人对该部门进行某种人工分析，他们无论如何都会对原始数据使用十六进制编辑器，因此如果将其输出为十六进制，则无需使用十六进制查看器/编辑器。

例如，在 DOS/Windows 上，如果要使用字符，则必须确保将文件作为二进制文件打开。此外，您可能必须确保操作系统不会与介于两者之间的任何字符格式混淆。

# php - phpUnit doesnt recognise getenv / apache_getenv

> ID：12815482
> 
> 赞同：2
> 
> 时间：2012-10-10T08:50:13.013
> 
> 标签：php, phpunit

To load my ini file from a path outside the codebase I use apache to define the path and with php I use apache_getenv / getenv

It seems phpunit doesn't understand the apache_getenv command - is this a known issue and are there any solutions besides hardcoding paths?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T23:32:35.517

当您从命令行运行 php 时，它不使用任何 Apache 配置。但是您仍然可以访问环境变量。因此，首先更改为`getenv`在任何地方使用（而不是`apache_getenv`）。然后，如果您是从 bash 启动 php，请像这样运行它：

```
 export MY_CONFIG = "/path/to/my.ini"
 phpunit 
```

每个 bash 会话只需要导出一次。您可以将其封装在 2 行 bash 脚本中。

这种方法有一个问题，即您现在在两个地方进行了配置。墨菲定律告诉我们，这两个文件会非常努力地不同步。因此，另一种方法是在 php.ini (*) 中使用自定义条目。然后在您的代码中使用[get_cfg_var](http://www.php.net/manual/en/function.get-cfg-var.php)来获取这些值。请注意，有些人不喜欢这种方法，例如[在 php.ini 中创建任意值](https://stackoverflow.com/questions/6374495/create-arbitrary-values-in-php-ini) 明智地使用它：如果您的机器专用于需要此设置的应用程序，那么这是一个公平的选择。如果它只是众多脚本中的一个，并且在多用户机器上，那么它是可疑的。

第三种方法是与脚本一起保存的真实 ini 文件的符号链接。然后你的脚本总会找到它，不管它是怎么启动的。我最喜欢这种方法，但它不是那么动态。我猜测使用环境变量的目的是因为您对不同的虚拟主机使用不同的值，或者类似的东西。

*：确保使用 apache 和 cli 通用的 php.ini 文件：一些设置也有一个仅用于 apache 和 cli 的配置文件。在 Ubuntu 机器上，我会在 /etc/php5/conf.d 下创建一个名为 myconfig.ini 的文件，因为它更易于维护，并且该目录由 apache 和 cli 使用。

# jsf - exception in deploying simple richfaces application

> ID：12815484
> 
> 赞同：0
> 
> 时间：2012-10-10T08:50:24.743
> 
> 标签：jsf, glassfish, richfaces

i am getting the following exception when deploying a simple richfaces application i am using glassfish 3.1.1 and have all the necessary jars in my classpath. Though the applicatioin deploys i can't figure out why this exception pops up.

i have the following jars:

```
richfaces-core-api-4.2.2.Final.jar
richfaces-core-impl-4.2.2.Final.jar
richfaces-core-api-4.2.2.Final-sources.jar
richfaces-core-impl-4.2.2.Final-sources.jar
richfaces-components-api-4.2.2.Final-sources.jar
richfaces-components-api-4.2.2.Final.jar
richfaces-components-ui-4.2.2.Final-sources.jar
richfaces-components-ui-4.2.2.Final.jar
richfaces-archetype-kitchensink.jar
richfaces-archetype-simpleapp.jar
cssparser-0.9.5.jar
guava-13.0.1.jar
guava-gwt-13.0.1.jar
sac-1.3.jar 
```

The following is the exception:

```
 SEVERE: Unexpected exception when attempting to tear down the Mojarra runtime
    java.lang.NullPointerException
        at org.richfaces.application.ServiceTracker.release(ServiceTracker.java:132)
        at
org.richfaces.application.InitializationListener.onStop(InitializationListener.java:137)
        at org.richfaces.application.InitializationListener.processEvent(InitializationListener.java:149)
        at javax.faces.event.SystemEvent.processListener(SystemEvent.java:106)
        at com.sun.faces.application.ApplicationImpl.processListeners(ApplicationImpl.java:2168)
        at com.sun.faces.application.ApplicationImpl.invokeListenersFor(ApplicationImpl.java:2144)
        at com.sun.faces.application.ApplicationImpl.publishEvent(ApplicationImpl.java:302)
        at javax.faces.application.ApplicationWrapper.publishEvent(ApplicationWrapper.java:683)
        at com.sun.faces.config.ConfigureListener.contextDestroyed(ConfigureListener.java:332)
        at org.apache.catalina.core.StandardContext.contextListenerStop(StandardContext.java:4840)
        at org.apache.catalina.core.StandardContext.stop(StandardContext.java:5584)
        at com.sun.enterprise.web.WebModule.stop(WebModule.java:527)
        at org.apache.catalina.core.ContainerBase.removeChild(ContainerBase.java:1049)
        at com.sun.enterprise.web.WebContainer.unloadWebModule(WebContainer.java:2229)
        at com.sun.enterprise.web.WebContainer.unloadWebModule(WebContainer.java:2184)
        at com.sun.enterprise.web.WebApplication.stop(WebApplication.java:159)
        at org.glassfish.internal.data.EngineRef.stop(EngineRef.java:169)
        at org.glassfish.internal.data.ModuleInfo.stop(ModuleInfo.java:302)
        at org.glassfish.internal.data.ApplicationInfo.stop(ApplicationInfo.java:329)
        at com.sun.enterprise.v3.server.ApplicationLifecycle.unload(ApplicationLifecycle.java:998)
        at com.sun.enterprise.v3.server.ApplicationLifecycle.undeploy(ApplicationLifecycle.java:1024)
        at org.glassfish.deployment.admin.UndeployCommand.execute(UndeployCommand.java:330)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:353)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
        at org.glassfish.deployment.admin.DeployCommand.handleRedeploy(DeployCommand.java:607)
        at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:274)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:353)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
        at org.glassfish.deployment.admin.ReDeployCommand.execute(ReDeployCommand.java:126)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
        at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
        at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
        at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
        at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
        at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
        at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
        at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
        at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
        at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
        at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
        at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
        at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
        at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
        at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
        at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
        at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
        at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
        at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
        at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
        at java.lang.Thread.run(Thread.java:722) 
```

want to know exactly what i am doing wrong

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T05:59:00.607

glassfish 附带的 mojarra 参考实现似乎有问题。尝试重新安装 glassfish。它总是发生在我身上...

# javascript - 当下拉列表中的“选择”更改时，按 ID 填充表 TD

> ID：12815485
> 
> 赞同：3
> 
> 时间：2012-10-10T08:50:28.410
> 
> 标签：javascript, html, html-table, innerhtml

我的任务是创建一个动态表，用于在表中比较不同经纪人的服务。鉴于网站大小和客户要求，当用户从标题中的下拉菜单中进行选择时，我需要能够更改表 td 的内容。

我已经用我迄今为止汇总的最新版本更新了下面的代码。

我需要帮助的任务是：

*   脚本只听 col2
*   如何将图像添加到数组博客？
*   默认情况下，每列 eq Broker 1、Broker 2、Broker 3 从下拉列表中加载一项

**桌子**

```
<html>
<head>
<title>Comparison Chart Test</title>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
</head>
<body>
<table class="zebra" size="100%" border="1">
<thead>
<tr>
    <th class="center">Broker Vergleichsliste</th>
    <th>
        <select class="col2 selectBroker">
            <option>Broker 1</option>
            <option>Broker 2</option>
            <option>Broker 3</option>
            <option>Broker 4</option>
            <option>Broker 5</option>
        </select>
    </th>
    <th>
        <select class="col3 selectBroker">
            <option>Broker 1</option>
            <option>Broker 2</option>
            <option>Broker 3</option>
            <option>Broker 4</option>
            <option>Broker 5</option>
        </select>
    </th>
    <th>
        <select class="col4 selectBroker">
            <option>Broker 1</option>
            <option>Broker 2</option>
            <option>Broker 3</option>
            <option>Broker 4</option>
            <option>Broker 5</option>>
        </select>
    </th>
 </tr>
</thead>
<tbody>
<tr>
    <td><strong>Broker</strong></td>
    <td class="col2 blogo"></td>
    <td class="col3 blogo"></td>
    <td class="col4 blogo"></td>
</tr>
<tr>
    <td><strong>Reguliert</strong></td>
    <td class="col2 regulated"></td>
    <td class="col3 regulated"></td>
    <td class="col4 regulated"></td>
</tr>
<tr>
    <td><strong>securityicherheit</strong></td>
    <td class="col2 security"></td>
    <td class="col3 security"></td>
    <td class="col4 security"></td>
</tr>
  <tr>
    <td><strong>Verrechnungskonto</strong></td>
    <td class="col2 account"></td>
    <td class="col3 account"></td>
    <td class="col4 account"></td>
  </tr>
  <tr>
    <td><strong>Mindesteinlage</strong></td>
    <td class="col2 deposit"></td>
    <td class="col3 deposit"></td>
    <td class="col4 deposit"></td>
  </tr>
  <tr>
    <td><strong>Software</strong></td>
    <td class="col2 software"></td>
    <td class="col3 software"></td>
    <td class="col4 software"></td>
  </tr>
  <tr>
    <td><strong>Handelseinheit</strong></td>
    <td class="col2 einheit"></td>
    <td class="col3 einheit"></td>
    <td class="col4 einheit"></td>
  </tr>
  <tr>
    <td><strong>Margin Forex</strong></td>
    <td class="col2 margin"></td>
    <td class="col3 margin"></td>
    <td class="col4 margin"></td>
  </tr>
  <tr>
    <td><strong>Kommission pro Halfturn</strong></td>
    <td class="col2 comission"></td>
    <td class="col3 comission"></td>
    <td class="col4 comission"></td>
  </tr>
  <tr>
    <td><strong>Spreads</strong></td>
    <td class="col2 spread"></td>
    <td class="col3 spread"></td>
    <td class="col4 spread"></td>
  </tr>
  <tr>
    <td><strong>Finanzierungskosten</strong></td>
    <td class="col2 fcost"></td>
    <td class="col3 fcost"></td>
    <td class="col4 fcost"></td>
  </tr>
  <tr>
    <td><strong>Orderarten</strong></td>
    <td class="col2 orders"></td>
    <td class="col3 orders"></td>
    <td class="col4 orders"></td>
  </tr>
  <tr>
    <td><strong>Telefonhandel</strong></td>
    <td class="col2 phone"></td>
    <td class="col3 phone"></td>
    <td class="col4 phone"></td>
  </tr>
  <tr>
    <td><strong>Mobile Trading</strong></td>
    <td class="col2 mobile"></td>
    <td class="col3 mobile"></td>
    <td class="col4 mobile"></td>
  </tr>
  <tr>
    <td><strong>Produktpalette</strong></td>
    <td class="col2 products"></td>
    <td class="col3 products"></td>
    <td class="col4 products"></td>
  </tr>
  <tr>
    <td><strong>Besonderheiten</strong></td>
    <td class="col2 special"></td>
    <td class="col3 special"></td>
    <td class="col4 special"></td>
  </tr>
  <tr>
    <td><strong>ECN / MM / STP / DMA</strong></td>
    <td class="col2 art"></td>
    <td class="col3 art"></td>
    <td class="col4 art"></td>
  </tr>
  <tr>
    <td><strong>Fazit</strong></td>
    <td class="col2 fazit"></td>
    <td class="col3 fazit"></td>
    <td class="col4 fazit"></td>
  </tr>
  <tr>
    <td><strong>Zur Webseite</strong></td>
    <td class="center"><a href="/goto/forex/" target="_blank" class="button-more">Konto eröffnen</a></td>
    <td class="center"><a href="#" target="_blank" class="button-more">Konto eröffnen</a></td>
    <td class="center"><a href="#" target="_blank" class="button-more">Konto eröffnen</a></td>
  </tr>
  </tbody>
</table>
</body> 
```

**JS**

```
<script language="JavaScript">
var data = {
"brokers":
    {
    "broker": [
        {
        "name": "Broker 1",
        "blogo": "Broker1 Logo",
        "regulated": "YES",
        "security": "Mindep",
        "account": "Konto",
        "deposit": "Einlage",
        "software": "Software",
        "einheit": "H Einheit",
        "margin": "100:1",
        "comission": "Komission",
        "spread": "Spreads",
        "fcost": "F Kosten",
        "orders": "Orderarten",
        "phone": "YES/No",
        "mobile": "Yes/No",
        "products": "Products",
        "special": "Besonderheiten",
        "art": "MM/DMA",
        "fazit": "Fazit"
        },
    {
        "name": "Broker 2",
        "blogo": "Broker2 Logo",
        "regulated": "NO",
        "security": "Mindep",
        "account": "Konto",
        "deposit": "Einlage",
        "software": "Software",
        "einheit": "H Einheit",
        "margin": "200:1",
        "comission": "Komission",
        "spread": "Spreads",
        "fcost": "F Kosten",
        "orders": "Orderarten",
        "phone": "YES",
        "mobile": "Yes/No",
        "products": "Products",
        "special": "Besonderheiten",
        "art": "DMA/STP",
        "fazit": "Fazit"
        },
    {
        "name": "Broker 3",
        "blogo": "Broker3 Logo",
        "regulated": "YES",
        "security": "Mindep",
        "account": "Konto",
        "deposit": "Einlage",
        "software": "Software",
        "einheit": "H Einheit",
        "margin": "Forex margin",
        "comission": "Komission",
        "spread": "Spreads",
        "fcost": "F Kosten",
        "orders": "Orderarten",
        "phone": "NO",
        "mobile": "Yes/No",
        "products": "Products",
        "special": "Besonderheiten",
        "art": "ECN/MM/DMA",
        "fazit": "Fazit"
        },
    {
        "name": "Broker 4",
        "blogo": "Broker4 Logo",
        "regulated": "NO",
        "security": "Mindep",
        "account": "Konto",
        "deposit": "Einlage",
        "software": "Software",
        "einheit": "H Einheit",
        "margin": "Forex margin",
        "comission": "Komission",
        "spread": "Spreads",
        "fcost": "F Kosten",
        "orders": "Orderarten",
        "phone": "Green Tick",
        "mobile": "Yes/No",
        "products": "Products",
        "special": "Besonderheiten",
        "art": "MM/DMA",
        "fazit": "Fazit"
        },
    {
        "name": "Broker 5",
        "blogo": "Broker5 Logo",
        "regulated": "YES",
        "security": "Mindep",
        "account": "Konto",
        "deposit": "Einlage",
        "software": "Software",
        "einheit": "H Einheit",
        "margin": "Forex margin",
        "comission": "Komission",
        "spread": "Spreads",
        "fcost": "F Kosten",
        "mobile": "Yes/No",
        "products": "Products",
        "special": "Besonderheiten",
        "art": "ECN/STP",
        "fazit": "Fazit"
        }
    ]}
}

$(".selectBroker").change(function() {
var jthis = $(this);
var whichCol;
if (jthis.hasClass("col2")) {
    whichCol = "col2";
}
$.each(data.brokers.broker, function(i, v) {
    if (v.name == jthis.val()) {
        $("td." + whichCol + ".name").html(v.name);
        $("td." + whichCol + ".blogo").html(v.blogo);
        $("td." + whichCol + ".regulated").html(v.regulated);
        $("td." + whichCol + ".security").html(v.security);
        $("td." + whichCol + ".account").html(v.account);
        $("td." + whichCol + ".deposit").html(v.deposit);
        $("td." + whichCol + ".software").html(v.software);
        $("td." + whichCol + ".einheit").html(v.einheit);
        $("td." + whichCol + ".margin").html(v.margin);
        $("td." + whichCol + ".comission").html(v.comission);
        $("td." + whichCol + ".spread").html(v.spread);
        $("td." + whichCol + ".fcost").html(v.fcost);
        $("td." + whichCol + ".orders").html(v.orders);
        $("td." + whichCol + ".phone").html(v.phone);
        $("td." + whichCol + ".mobile").html(v.mobile);
        $("td." + whichCol + ".products").html(v.products);
        $("td." + whichCol + ".special").html(v.special);
        $("td." + whichCol + ".art").html(v.art);
        $("td." + whichCol + ".fazit").html(v.fazit);
        return;
    }
});

});
</script>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:55:05.683

看到这个[jsfiddle](http://jsfiddle.net/Eonasdan/gqQ77/4/)。您当然需要扩展它以完成代码。可能有更好的方法可以做到这一点，但它确实有效，这是我在几分钟内完成的。

**HTML**

```
<table class="table table-bordered table-striped">
    <tr>
        <th>
            <select class="col1 selectBroker">
                <option>Broker 1</option>
                <option>Broker 2</option>
                <option>Broker 3</option>
            </select>
        </th>
        <th>
            <select class="col2 selectBroker">
                <option>Broker 1</option>
                <option>Broker 2</option>
                <option>Broker 3</option>
            </select>
        </th>
        <th>
            <select class="col3 selectBroker">
                <option>Broker 1</option>
                <option>Broker 2</option>
                <option>Broker 3</option>
            </select>
        </th>
    </tr>
    <tr>
        <td class="col1 isTotallyAwesome"></td>
        <td class="col2 isTotallyAwesome"></td>
        <td class="col3 isTotallyAwesome"></td>
    </tr>
    <tr>
        <td class="col1 foo"></td>
        <td class="col2 foo"></td>
        <td class="col3 foo"></td>
    </tr>
</table> 
```

**JS**

```
var data = {
    "brokers":
        {
        "broker": [
            {
            "name": "Broker 1",
            "isTotallyAwesome": "yes",
            "foo": "no"},
        {
            "name": "Broker 2",
            "isTotallyAwesome": "no",
            "foo": "yes"},
        {
            "name": "Broker 3",
            "isTotallyAwesome": "true",
            "foo": "no"}
        ]}
}

$(".selectBroker").change(function() {
    var jthis = $(this);
    var whichCol;
    if (jthis.hasClass("col1")) {
        whichCol = "col1";
    }
    $.each(data.brokers.broker, function(i, v) {
        if (v.name == jthis.val()) {
            $("td." + whichCol + ".isTotallyAwesome").html(v.isTotallyAwesome);
            $("td." + whichCol + ".foo").html(v.foo);
            return;
        }
    });

}); 
```

# scala - Imports from external libraries in views

> ID：12815492
> 
> 赞同：2
> 
> 时间：2012-10-10T08:51:22.320
> 
> 标签：scala, dependencies, playframework-2.0

I'm trying to use classes from a dependant project in my views, but it seems the scala compiler isn't able to pick it up. The project is a sibling of the play project:

```
workspace/lib
workspace/play-project 
```

But I get an error when compiling the project:

```
@import lib.TheClass

Error:
[error] scala-2.9.1/src_managed/main/views/html/index.template.scala:28: not found: value lib
[error]         _display_ {import lib.TheClass 
```

How can I set up a project dependency for the scale compiler?

I found the following related SO questions, but they seem to talk about projects stored in central repositories:

*   [Play 2.0 Framework external Model in Template](https://stackoverflow.com/questions/8316827/play-2-0-framework-external-model-in-template)
*   [Dependency Management with Play 2.0 Applications](https://stackoverflow.com/questions/9422173/dependency-management-with-play-2-0-applications)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T09:17:28.493

你必须在你的 sbt 配置中声明对 lib 项目的依赖。[sbt wiki 中](https://github.com/harrah/xsbt/wiki/Getting-Started-Multi-Project)有一个指南。首先你声明你的 lib 项目。

```
lazy val lib = Project(id = "lib",
                       base="../lib/") 
```

然后定义主项目，让它依赖于 lib 项目。

```
lazy val play = Project(id = "play-app",
                        base = file(".")) dependsOn(lib) 
```

# javascript - 样板js和权限

> ID：12815494
> 
> 赞同：2
> 
> 时间：2012-10-10T08:51:32.130
> 
> 标签：javascript, javascript-framework, boilerplatejs

首先，Boilerplatejs 看起来非常令人印象深刻和有前途！刚开始学习它，期待一些架构文档和更多教程的转发。

问题：boilerplatejs 是否实现了一些权限机制来在大型应用程序中显示和管理小部件？例如，特定用户 X 可以在模块 A 上操作，但不能在 B 上操作（尽管他在屏幕上看到它），而用户 Y 根本看不到模块 B，但可以看到和操作模块 A。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T03:54:43.673

目前 BoilerplateJS 没有内置授权机制，您必须根据您的要求自定义构建。记住客户端授权是不够的，它也应该在服务器端强制执行以确保安全。

顺便说一句，您可以在这里看到我们如何在某些应用程序中处理身份验证（而不是授权）：[BoilerplateJS：推荐的处理授权和身份验证的方法](https://stackoverflow.com/questions/12545476/boilerplatejs-recommended-way-to-handle-authorization-and-authentication)

# postgresql - 将 PostgreSQL 表中的特定行导出为 INSERT SQL 脚本

> ID：12815496
> 
> 赞同：245
> 
> 时间：2012-10-10T08:51:38.893
> 
> 标签：postgresql, insert, export, sql-scripts, postgresql-copy

我有一个名为：的数据库架构`nyummy`和一个名为`cimory`：

```
create table nyummy.cimory (
  id numeric(10,0) not null,
  name character varying(60) not null,
  city character varying(50) not null,
  CONSTRAINT cimory_pkey PRIMARY KEY (id)
); 
```

我想将`cimory`表的数据导出为插入 SQL 脚本文件。但是，我只想导出城市等于“东京”的记录/数据（假设城市数据都是小写的）。

怎么做？

解决方案是在免费软件 GUI 工具还是命令行中都没有关系（尽管 GUI 工具解决方案更好）。我曾尝试过 pgAdmin III，但找不到执行此操作的选项。

* * *

## 回答 #1

> 赞同：359
> 
> 时间：2012-10-10T09:31:59.707

使用要导出的集合创建一个表，然后使用命令行实用程序 pg_dump 导出到文件：

```
create table export_table as 
select id, name, city
from nyummy.cimory
where city = 'tokyo' 
```

```
$ pg_dump --table=export_table --data-only --column-inserts my_database > data.sql 
```

`--column-inserts`将作为带有列名的插入命令转储。

`--data-only`不要转储模式。

如下所述，在需要新导出时创建视图而不是表将避免创建表。

* * *

## 回答 #2

> 赞同：205
> 
> 时间：2012-10-10T17:16:45.403

要仅**导出**数据，请使用[**`COPY`**](https://www.postgresql.org/docs/current/sql-copy.html)：

```
COPY (SELECT * FROM nyummy.cimory WHERE city = 'tokio') TO '/path/to/file.csv'; 
```

您可以导出整个表、仅导出选定的列或查询的结果，如图所示。无需显式创建表。

你得到一个文件，每行一个表格行作为纯文本（不是`INSERT`命令）。`INSERT`比命令更小更快。

要将相同的内容**导入**到另一个匹配结构的 Postgres 表中（列顺序相同，数据类型兼容！）：

```
COPY other_tbl FROM '/path/to/file.csv'; 
```

`COPY`写入和读取服务器本地的文件，不像客户端程序，如`pg_dump`或`psql`读取和写入客户端本地的文件。如果两者都在同一台机器上运行，那并不重要，但对于远程连接来说确实如此。

还有[**psql**](https://www.postgresql.org/docs/current/app-psql.html)[**`\copy`**的命令](https://www.postgresql.org/docs/current/app-psql.html)**：**

 **> 执行前端（客户端）复制。这是一个运行 SQL[**`COPY`**](https://www.postgresql.org/docs/current/sql-copy.html)命令的操作，但不是服务器读取或写入指定的文件，而是 psql 读取或写入文件并在服务器和本地文件系统之间路由数据。这意味着 **文件可访问性和权限是本地用户的，而不是服务器的，并且不需要 SQL 超级用户权限**。

与上面的语法相同。只需替换`COPY`为`\copy`.

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2016-08-15T20:13:04.833

这是一种使用 pgAdmin手动**将表导出到脚本的****简单快捷**方式，**无需额外安装**：

 ****1.  右键单击目标表并选择“备份”。
2.  选择一个文件路径来存储备份。作为格式选择“普通”。
3.  打开底部的“转储选项#2”选项卡并选中“使用列插入”。
4.  单击备份按钮。
5.  如果您使用文本阅读器（例如 notepad++）打开生成的文件，您将获得一个脚本来创建整个表格。从那里您可以简单地复制生成的 INSERT-Statements。

此方法也适用于制作 export_table 的技术，如@Clodoaldo Neto 的回答所示。

[![在目标表上单击右键并选择](../Images/e92cd7caf023ea7a5d3d2c4369b456ce.png)](https://i.stack.imgur.com/nVoMP.png)

[![选择目标路径并将格式更改为](../Images/1e0347b03ecf3f3f350208f9ef963990.png)](https://i.stack.imgur.com/WXUgV.png)

[![打开选项卡](../Images/45af8ce48a0bbbaa5ac60c1e71d94a0f.png)](https://i.stack.imgur.com/Sd3zV.png)

[![您可以从那里复制 INSERT 语句。](../Images/48b66289a8978f4f10f5a488ea170217.png)](https://i.stack.imgur.com/aUlUR.png)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-08-25T15:38:41.173

对于我的用例，我能够简单地通过管道连接到 grep。

```
pg_dump -U user_name --data-only --column-inserts -t nyummy.cimory | grep "tokyo" > tokyo.sql 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-11-27T12:58:12.363

[SQL Workbench](http://www.sql-workbench.net/)就有这样一个特性。

运行查询后，右键单击查询结果并选择“将数据复制为 SQL > SQL 插入”

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-05-24T13:15:07.980

我试图根据@PhilHibbs 代码以不同的方式编写一个执行此操作的程序。请查看并测试。

```
 CREATE OR REPLACE FUNCTION dump(IN p_schema text, IN p_table text, IN p_where text)
   RETURNS setof text AS
 $BODY$
 DECLARE
     dumpquery_0 text;
     dumpquery_1 text;
     selquery text;
     selvalue text;
     valrec record;
     colrec record;
 BEGIN

     -- ------ --
     -- GLOBAL --
     --   build base INSERT
     --   build SELECT array[ ... ]
     dumpquery_0 := 'INSERT INTO ' ||  quote_ident(p_schema) || '.' || quote_ident(p_table) || '(';
     selquery    := 'SELECT array[';

     <<label0>>
     FOR colrec IN SELECT table_schema, table_name, column_name, data_type
                   FROM information_schema.columns
                   WHERE table_name = p_table and table_schema = p_schema
                   ORDER BY ordinal_position
     LOOP
         dumpquery_0 := dumpquery_0 || quote_ident(colrec.column_name) || ',';
         selquery    := selquery    || 'CAST(' || quote_ident(colrec.column_name) || ' AS TEXT),';
     END LOOP label0;

     dumpquery_0 := substring(dumpquery_0 ,1,length(dumpquery_0)-1) || ')';
     dumpquery_0 := dumpquery_0 || ' VALUES (';
     selquery    := substring(selquery    ,1,length(selquery)-1)    || '] AS MYARRAY';
     selquery    := selquery    || ' FROM ' ||quote_ident(p_schema)||'.'||quote_ident(p_table);
     selquery    := selquery    || ' WHERE '||p_where;
     -- GLOBAL --
     -- ------ --

     -- ----------- --
     -- SELECT LOOP --
     --   execute SELECT built and loop on each row
     <<label1>>
     FOR valrec IN  EXECUTE  selquery
     LOOP
         dumpquery_1 := '';
         IF not found THEN
             EXIT ;
         END IF;

         -- ----------- --
         -- LOOP ARRAY (EACH FIELDS) --
         <<label2>>
         FOREACH selvalue in ARRAY valrec.MYARRAY
         LOOP
             IF selvalue IS NULL
             THEN selvalue := 'NULL';
             ELSE selvalue := quote_literal(selvalue);
             END IF;
             dumpquery_1 := dumpquery_1 || selvalue || ',';
         END LOOP label2;
         dumpquery_1 := substring(dumpquery_1 ,1,length(dumpquery_1)-1) || ');';
         -- LOOP ARRAY (EACH FIELD) --
         -- ----------- --

         -- debug: RETURN NEXT dumpquery_0 || dumpquery_1 || ' --' || selquery;
         -- debug: RETURN NEXT selquery;
         RETURN NEXT dumpquery_0 || dumpquery_1;

     END LOOP label1 ;
     -- SELECT LOOP --
     -- ----------- --

 RETURN ;
 END
 $BODY$
   LANGUAGE plpgsql VOLATILE; 
```

进而 ：

```
-- for a range
SELECT dump('public', 'my_table','my_id between 123456 and 123459'); 
-- for the entire table
SELECT dump('public', 'my_table','true'); 
```

在我的 postgres 9.1 上测试，使用混合字段数据类型（文本、双精度、整数、没有时区的时间戳等）的表。

这就是需要 TEXT 类型的 CAST 的原因。我的测试正确运行了大约 9M 行，看起来它在运行 18 分钟之前就失败了。

ps：我在 WEB 上找到了 mysql 的等价物。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-10-10T08:54:59.293

您可以查看带有特定记录的表，然后转储 sql 文件

```
CREATE VIEW foo AS
SELECT id,name,city FROM nyummy.cimory WHERE city = 'tokyo' 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-02-17T10:23:29.557

我刚刚敲了一个快速程序来做到这一点。它只适用于单行，所以我创建了一个临时视图，只选择我想要的行，然后用我想要插入的实际表替换 pg_temp.temp_view。

```
CREATE OR REPLACE FUNCTION dv_util.gen_insert_statement(IN p_schema text, IN p_table text)
  RETURNS text AS
$BODY$
DECLARE
    selquery text; 
    valquery text; 
    selvalue text; 
    colvalue text; 
    colrec record;
BEGIN

    selquery := 'INSERT INTO ' ||  quote_ident(p_schema) || '.' || quote_ident(p_table);

    selquery := selquery || '(';

    valquery := ' VALUES (';
    FOR colrec IN SELECT table_schema, table_name, column_name, data_type
                  FROM information_schema.columns 
                  WHERE table_name = p_table and table_schema = p_schema 
                  ORDER BY ordinal_position 
    LOOP
      selquery := selquery || quote_ident(colrec.column_name) || ',';

      selvalue := 
        'SELECT CASE WHEN ' || quote_ident(colrec.column_name) || ' IS NULL' || 
                   ' THEN ''NULL''' || 
                   ' ELSE '''' || quote_literal('|| quote_ident(colrec.column_name) || ')::text || ''''' || 
                   ' END' || 
        ' FROM '||quote_ident(p_schema)||'.'||quote_ident(p_table);
      EXECUTE selvalue INTO colvalue;
      valquery := valquery || colvalue || ',';
    END LOOP;
    -- Replace the last , with a )
    selquery := substring(selquery,1,length(selquery)-1) || ')';
    valquery := substring(valquery,1,length(valquery)-1) || ')';

    selquery := selquery || valquery;

RETURN selquery;
END
$BODY$
  LANGUAGE plpgsql VOLATILE; 
```

如此调用：

```
SELECT distinct dv_util.gen_insert_statement('pg_temp_' || sess_id::text,'my_data') 
from pg_stat_activity 
where procpid = pg_backend_pid() 
```

我还没有针对注入攻击对此进行测试，如果 quote_literal 调用不足以解决此问题，请告诉我。

此外，它仅适用于可以简单地转换为 ::text 并再次转换回来的列。

这也是针对 Greenplum 的，但我想不出它不能在 Postgres、CMIIW 上运行的原因。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-05-04T02:58:02.003

我需要一种无需创建临时表（在生产中）即可生成插入语句的方法。我确实在上面的 pg_dump 中看到了一些有用的论据，但最终还是想出了一种方法来

> 生成插入语句并转储到文件中

下面的语句起到了作用，我认为这对最终在这里寻求类似答案的人很有用。

```
$ /usr/local/bin/pg_dump -h the_db_host_address -d the_db_name --table=schema_name.table_name --data-only --column-inserts -U postgres -p the_port_number -v -f /Users/the_user/folder_name/insrt_stmts_file_name.sql 
```

接下来是询问密码的提示，在上述情况下，我提供了`postgres`密码，但任何其他具有读取功能的用户都应该可以正常工作。

> `insrt_stmts_file_name.sql`我在 DBeaver 客户端中运行了名为：的文件中的插入语句 。

但是也可以使用以下脚本从命令提示符运行相同的操作：

```
/usr/local/bin/psql -h the_db_host_address -d the_db_name -v -U postgres -f /Users/the_user/folder_name/insrt_stmts_file_name.sql 
```

pg_dump / psql 标志的参考： -h = host -d = db name -v = verbose（它会随着它的进行输出） -U = db user name -f = file / path

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-02-16T11:57:18.693

右键单击数据库，然后单击备份

[![在此处输入图像描述](../Images/4cbab65befaa7bcc1c72623d88cc9263.png)](https://i.stack.imgur.com/3CMwQ.png)

然后仅使用来自转储选项部分的数据和查询的插入命令。

[![在此处输入图像描述](../Images/c709b75d3dd7ab996140560faadb471d.png)](https://i.stack.imgur.com/TkAKj.png)

[![在此处输入图像描述](../Images/44524c1870072dda6cd5d6d0a6677c5e.png)](https://i.stack.imgur.com/dUCE6.png)

然后格式“普通”选择它。

[![在此处输入图像描述](../Images/2ee24844fb47cae8094e87832afd5624.png)](https://i.stack.imgur.com/1do49.png)

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2012-10-10T09:22:06.180

您是否尝试过在 pgadmin 中使用 `" EXECUTE QUERY WRITE RESULT TO FILE "` 选项 执行查询

它只导出数据，否则尝试

```
pg_dump -t view_name DB_name > db.sql 
```

-t 选项用于 ==> 仅转储匹配表的表（或视图或序列），[请参阅](http://www.postgresql.org/docs/8.3/static/app-pgdump.html)******

# android - 从 lat/lon 参数获取位置

> ID：12815501
> 
> 赞同：0
> 
> 时间：2012-10-10T08:51:55.643
> 
> 标签：android, ios, cocoa-touch, geolocation

看着做一个使用手机定位服务的应用程序，据我所知，当前位置以纬度/经度返回。

将其转换为位置和/或找到最近的“邮局”（例如他们所在的位置）的最佳方法是什么？

我知道您可以将纬度/经度传递给谷歌地图 API 并获取位置，但这是最好的方法还是有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:56:03.537

看看[GeoCoder](http://developer.android.com/reference/android/location/Geocoder.html)和*getFromLocation方法*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T09:01:41.993

试试这个代码：

```
// create geo point
GeoPoint point = new GeoPoint((int) (lattitude * 1E6), (int) (longitude * 1E6));
// get the MapController object
MapController controller = mapview.getController();
// animate to the desired point
controller.animateTo(point); 
```

# iphone - 如何在漫游中以编程方式检测 iphone

> ID：12815504
> 
> 赞同：2
> 
> 时间：2012-10-10T08:52:17.697
> 
> 标签：iphone, core-telephony

可以在漫游中以编程方式检测 iphone 吗？

# android - 如何在android中打开已安装应用程序的文件？

> ID：12815506
> 
> 赞同：0
> 
> 时间：2012-10-10T08:52:21.433
> 
> 标签：android, android-intent

我写了一段代码，检测android中安装的应用程序并用应用程序打开文件。例如，应该用一些office apk打开一个word文档。

```
Intent intent = new Intent(android.content.Intent.ACTION_VIEW);
Uri data = Uri.fromFile(temp_file);
String type = getMimeType(temp_file.getName());
intent.setDataAndType(data, type);
this.startActivity(intent); 
```

在上面的代码中**temp_file**是应该打开的文件。下面是我为获取 MIME 类型而编写的通用代码

```
public static String getMimeType(String url) {
        String type = null;
        String extension = MimeTypeMap.getFileExtensionFromUrl(url);
        if (extension != null) {
            MimeTypeMap mime = MimeTypeMap.getSingleton();
            type = mime.getMimeTypeFromExtension(extension);
        }
        return type;
    } 
```

但是当我执行时，它会抛出**android.content.ActivityNotFoundException**异常。那么，我在这里做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T22:06:23.503

您正在调用`getMimeType()`并传递文件名。但是您的方法`getMimeType()`需要一个 URL。文档`MimeTypeMap.getFileExtensionFromUrl()`专门说：

**此方法是获取 url 扩展名的便捷方法，对于其他字符串具有未定义的结果。**

您可能正在`null`接受 mime 类型。添加一些调试日志并检查`getMimeType()`返回的内容。

另外，查看logcat。它应该告诉你`Intent`它试图解决的内容。这也应该给你一个提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T09:01:43.000

```
 button.setOnClickListener(new View.OnClickListener() {

                  @Override
                  public void onClick(View v) {
                        // TODO Auto-generated method stub
                        File file=new File("/sdcard/yourfile");
                        if(file.exists())
                        {
                              Uri path=Uri.fromFile(file);
                              Intent intent=new Intent(Intent.ACTION_VIEW);
                              intent.setDataAndType(path, "application/readername");

                              try
                              {

                                    startActivity(intent);
                              }
                              catch(ActivityNotFoundException e)
                              {
                                    Toast.makeText(TestActivity.this, "No software for PDF", Toast.LENGTH_SHORT).show();
                              }
                        }
                  }
            }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T09:16:45.263

这可能会帮助你，

```
 private void readFile(File file){
     Uri path = Uri.fromFile(file);
     Intent intent = new Intent(Intent.ACTION_VIEW);
     intent.setDataAndType(path, "application/pdf");// for .pdf file
         //intent.setDataAndType(path, "application/msword");// for msword file
     intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
 try {
         startActivity(intent);
      } 
     catch (ActivityNotFoundException e) {
         String str=  "No Application Available to View .pdf file.";
         showToast(str);
     } 
```

其中 file 是要打开的文件的名称

# objective-c - 在哪种情况下应该在情节提要中使用 Popover segue？

> ID：12815508
> 
> 赞同：1
> 
> 时间：2012-10-10T08:52:30.820
> 
> 标签：objective-c, ipad, uipopovercontroller, popover, uipopover

我对 Popover segue 没有几个问题。

1）在什么情况下应该使用它？

2）在我的情况下，我必须在按钮单击时显示弹出框，并且弹出框有另一个视图控制器，如图 1 所示![图1](../Images/ac5ea857e04a137ff6d4a25851c62e40.png)

3）如果一个有图像作为弹出框，那么如何隐藏外部原生蓝色弹出框？如图2所示![图.2](../Images/393fe451a841b6ca4afaac4cd7d10fbd.png)

4) 使用 Popover segue 和在按钮单击时使用下面的代码有什么不同

```
 classobj = [self.storyboard instantiateViewControllerWithIdentifier:@"identifier"];
    popOver = [[UIPopoverController alloc] initWithContentViewController:classobj];
    [popOver presentPopoverFromRect:CGRectMake(689,10,50,50) inView:self.view permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T06:09:12.087

1) 当您想要呈现一个弹出框而无需编写示例 4 中的代码时。

2）这不是一个问题

3）您不能简单地放入图像以替换弹出框的框架。您需要定义 UIPopoverBackgroundView 的自定义子类，如我[在此处](https://stackoverflow.com/questions/8205846/using-uipopoverbackgroundview-class/12314596#12314596)的回答中所述。

4）你的代码有一个设置的位置和箭头方向，segue 会根据你在 VC 中的位置为你推断这些。如果您想进一步定制，但仍要使用 segue，您可以使用`prepareForSegue:`.

# data-structures - 如何使用 ABAP OO 构建通用树数据结构

> ID：12815509
> 
> 赞同：3
> 
> 时间：2012-10-10T08:52:36.947
> 
> 标签：data-structures, tree, abap

我想在 ABAP 中构建一个树数据结构。我的关键要求是可以使用通用对象作为树的节点。

我的Java看起来像这样：

```
public class MyTree<? extends TreeNode> {
(...)
} 
```

我目前的方法是定义一个类`TreeNode`，它是树内所有可能节点的超类。

有没有更优雅的方式来使用 ABAP OO 实现泛型类型？或者是否有我不知道的 SAP 附带的数据结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:54:22.737

a 上的大多数操作`SORTED TABLE`都具有类似于二叉树的性能特征。我很确定排序表的内部实现是某种二叉树的风格（或者是[跳过列表](http://en.wikipedia.org/wiki/Skip_list)）。

在我的实习期间，我使用 ABAP 对象重新创建了一些典型的数据结构，例如链表或二叉树，并将它们的性能与等效的原生 TABLE 风格进行了比较——原生的 TABLE 风格通常具有相同的复杂度类，但它们总是执行得更快。除非您有一些非常特殊的用例需要一些特殊的数据结构，否则您应该尝试使用`TABLE`,`SORTED TABLE`或`HASHED TABLE`.

# c# - 如何在 ASP.Net 中按表格拆分 Excel 文件和需要显示的特定表格？

> ID：12815510
> 
> 赞同：0
> 
> 时间：2012-10-10T08:52:37.177
> 
> 标签：c#, asp.net, xml, c#-4.0

我正在创建一个 ASP.Net 应用程序。我需要将 Excel 文件拆分为单张方法（作为同一文件中的随机单张和顺序单张）。请参考该 Excel 文件（名称`Sample`）中的图像，该文件有 3 张表，因此管理员将拆分 1\. 地址和团队名称表和 2\. 手机号。

我怎样才能做到这一点？

而且我还想以 ASP.NET 形式显示工作表（一次一张）。请让我知道该怎么做。

![图片](../Images/ec1f2ba983903355e4a74975ec092765.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:09:42.847

使用这段代码获取工作表名称，最后将它们添加到任何控件，例如 TreeView 控件。

```
/// <summary>
/// This method retrieves the excel sheet names from 
/// an excel workbook.
/// </summary>
/// <param name="excelFile">The excel file.</param>
/// <returns>String[]</returns>
private String[] GetExcelSheetNames(string excelFile)
{
    OleDbConnection objConn = null;
    System.Data.DataTable dt = null;

    try
    {
        // Connection String. Change the excel file to the file you
        // will search.
        String connString = "Provider=Microsoft.Jet.OLEDB.4.0;" + 
          "Data Source=" + excelFile + ";Extended Properties=Excel 8.0;";
        // Create connection object by using the preceding connection string.
        objConn = new OleDbConnection(connString);
        // Open connection with the database.
        objConn.Open();
        // Get the data table containg the schema guid.
        dt = objConn.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, null);

        if(dt == null)
        {
           return null;
        }

        String[] excelSheets = new String[dt.Rows.Count];
        int i = 0;

        // Add the sheet name to the string array.
        foreach(DataRow row in dt.Rows)
        {
           excelSheets[i] = row["TABLE_NAME"].ToString();
           i++;
        }

        // Loop through all of the sheets if you want too...
        for(int j=0; j < excelSheets.Length; j++)
        {
            // Query each excel sheet.
        }

        return excelSheets;
   }
   catch(Exception ex)
   {
       return null;
   }
   finally
   {
      // Clean up.
      if(objConn != null)
      {
          objConn.Close();
          objConn.Dispose();
      }
      if(dt != null)
      {
          dt.Dispose();
      }
   }
} 
```

摘自CodeProject 上的[文章。](http://www.codeproject.com/KB/aspnet/getsheetnames.aspx)

# ajax - How to get adsense ads to use context hints and refresh on ajax site

> ID：12815514
> 
> 赞同：0
> 
> 时间：2012-10-10T08:52:49.503
> 
> 标签：ajax, adsense, google-dfp

This may really be two separate questions, except that there may be some dependency between the two solutions.

What I have is an ajax site, and I would like to show google adsense ads that are relevant to the search terms that people type in on my site.

So if someone searches for 'cheese' on my site, I want to refresh the google adsense ad AND sent it the hint 'cheese', so that it shows results relevant to cheese, and I want to do this without refreshing my page ie do it through ajax.

I'm signed up to adsense, and can get regular ads to show. I'm also signed up to google dfp and can get those ads to show. I've been googling for an hour and made no progress in figuring out what to do next. Very grateful for any help anyone can offer! Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T15:09:00.323

I don't know much about adsense sorry but as far as DFP is concerned you should be able to work out everything you need to do from the docs here: [http://support.google.com/dfp_premium/bin/answer.py?hl=en&answer=1650154&expand=pubservice_details#refresh](http://support.google.com/dfp_premium/bin/answer.py?hl=en&answer=1650154&expand=pubservice_details#refresh)

You probably need to look at the clearTargeting, setTargeting and refresh methods.

# java - 如何在 Java MongoDB 中查询整个单词

> ID：12815517
> 
> 赞同：0
> 
> 时间：2012-10-10T08:52:59.267
> 
> 标签：java, mongodb, conditional-operator

我正在使用 Java Mongo DB 驱动程序。
我正在做一些 OR 和 AND 操作来查询集合。

```
QueryObj = new BasicDBObject("key1",Pattern.compile("v",Pattern.CASE_INSENSITIVE));
QueryList.add(QueryObj);
DBObject OrQuery = new BasicDBObject("$or", QueryList);
DBCursor cursor = MyCollection.find(OrQuery); 
```

我的示例集合有 4 行（JSON 格式可能是错误的）

```
{
"key1": ["val1","val3"]
},
{
"key1": ["val2","val3"]
},
{
"key1": ["val3"]
},
{
"key1": ["val1","val2"]
} 
```

如果我搜索“val2”

```
QueryObj = new BasicDBObject("key1",Pattern.compile("val2",Pattern.CASE_INSENSITIVE)); 
```

我得到预期的输出第 2 行和第 4 行

```
{
"key1": ["val2","val3"]
},
{
"key1": ["val1","val2"]
} 
```

如果我只搜索“v”

```
QueryObj = new BasicDBObject("key1",Pattern.compile("v",Pattern.CASE_INSENSITIVE)); 
```

我应该得到空集，但得到所有 4 行，尽管数组有一个字符“v”。
我需要搜索整个单词。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T14:49:04.673

您的意思是要搜索完整的单词 'v' - 在这种情况下，我相信您的模式如下，其中 ^ 表示单词的开头， $ 表示单词的结尾。

QueryObj = new BasicDBObject("key1",Pattern.compile("^v$",Pattern.CASE_INSENSITIVE));

问候，

凯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T09:13:23.563

我希望它可以帮助你

```
 values ="val1"; 
```

我们在 DB 中使用的 CMD 为：

```
 db.collection_name.findOne({ key1: "val1"}) 
```

同样使用

```
query.put("key1", values) 
```

在语句中使用`findOne()`而不是`find()`

如果错了请纠正我

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T14:42:15.720

如果您有上述 4 个文档，则可以使用以下查询仅检索您需要的文档：

```
 db.collection.find({"key1": "val2"}) 
```

这将返回：

```
 { "_id" : ObjectId("507587fdf1ab6b3d9e0151d3"), "key1" : [ "val2", "val3" ] }
 { "_id" : ObjectId("50758801f1ab6b3d9e0151d5"), "key1" : [ "val1", "val2" ] } 
```

（假设您的收藏称为“收藏”）。

在 Java 驱动程序中，正确的调用应该是：

```
Mongo mongo = new Mongo("localhost", 27017);
DB db = mongo.getDB("test");
BasicDBObject query = new BasicDBObject("key1", "val2");
db.getCollection("collection").find(query);
//omitting try catch 
```

如果我理解你的问题是正确的，你不需要在这里使用模式。希望这可以帮助

# java - 如何正确寻址到光标中的特定列？

> ID：12815518
> 
> 赞同：0
> 
> 时间：2012-10-10T08:53:06.203
> 
> 标签：java, android, android-sqlite, android-cursor

让我们假设，我们在 SQLite 中有一些 2 个表：`TBL_PRODUCT`和`TBL_PRODUCT_ALIASES`. 现在，我想从连接的两个表中查询一些数据：

```
String sql = "SELECT " + TBL_PRODUCT + "." + C_PROD_PKEY_ID + ", " + TBL_PRODUCT_ALIASES + "." + C_PROD_ALIASES_PKEY_ID +
    " FROM " + TBL_PRODUCT + " LEFT JOIN " + TBL_PRODUCT_ALIASES + " ON " + TBL_PRODUCT + "." + C_PROD_PKEY_ID + " = " + TBL_PRODUCT_ALIASES + "." + C_PROD_ALIASES_PKEY_ID +
    " WHERE " + C_PROD_SERVER_ID + " = ? LIMIT 1";

Cursor cursor = SQLiteDataHelper.getInstance().rawQuery(sql, new String[] {"" + js_CartProduct.getLong("prod_id")}); 
```

那很好用，没有任何问题。然后我想从返回的游标中获取一些数据：

```
if (cursor.getCount() > 0) {
    cursor.moveToFirst();
    Long prodId = cursor.getLong(cursor.getColumnIndexOrThrow(TBL_PRODUCT + "." + C_PROD_PKEY_ID));
    //... Some other code
} 
```

现在，问题来了：`C_PROD_PKEY_ID`并且`C_PROD_ALIASES_PKEY_ID`在现实世界中是相同的 Strings: `"_id"`。并且由于结果`getLong()`返回 long 而不是来自所需的`cursor`.

我应该如何正确寻址到所需的列？`AS`除了在 sql 查询中使用 OR/AND 使用确定的数字`cursor.getLong(0)`代替之外，还有其他方法`cursor.getLong(cursor.getColumnIndexOrThrow(TBL_PRODUCT + "." + C_PROD_PKEY_ID))`吗？

**更新：**

`cursor.getColumnNames()`返回这个：`[_id, _id]`。

# sed - 使用 sed 查找长度大于 120 个字符的行

> ID：12815519
> 
> 赞同：16
> 
> 时间：2012-10-10T08:53:11.123
> 
> 标签：sed

我想获取批处理文件中长度大于 120 个字符的行列表。为此，我想到了使用 sed。我尝试过，但没有成功。我怎样才能做到这一点？除了使用 sed 之外，还有其他方法可以获取列表吗？谢谢..

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-10T08:57:29.363

使用 awk 的另一种方法：

```
cat file | awk 'length($0) > 120' 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-10-10T08:56:16.343

您可以使用`grep`及其重复量词：

```
grep '.\{120\}' script.sh 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-10-10T11:12:23.487

使用 sed，您有一些选择：

```
sed -e '/.\{120\}/!d'
sed -e '/^.\{,119\}$/d'
sed -ne '/.\{120\}/p' 
```

第一个选项匹配没有（至少）120 个字符的行（`!`表达式之后是在与其之前的模式**不**匹配的行上执行命令），并删除它们（即不打印它们）。

第二个选项匹配从 start ( `^`) 到 end ( `$`) 总共有 0 到 119 个字符的行。这些行也被删除。

第三个选项是使用`-n`标志，它告诉 sed 默认不打印行，并且只在我们告诉它的情况下打印一些东西。在这种情况下，我们匹配具有（至少）120 个字符的行，并用于`p`打印它们。

# javascript - 如何使用 Javascript 自动调整我的 Facebook 选项卡的高度？

> ID：12815521
> 
> 赞同：3
> 
> 时间：2012-10-10T08:53:24.800
> 
> 标签：javascript, html, facebook, tabs

我正在尝试为我的页面创建一个简单的 HTML Facebook 选项卡，但我似乎找不到如何更改选项卡最大高度的解决方法。

我应该提一下，我是编码的初学者，我知道非常基本的 HTML，但我试图避免使用 JavaScript，因为我没有这方面的经验。

不幸的是，如果没有 JavaScript，我似乎无法做到这一点，所以我的问题很可能是我做错了什么。

代码看起来像这样（其余代码，包括关闭 HTML 标记位于 JavaScript 部分之后，并且工作正常）。

```
<!DOCTYPE html>
<html>
<body>

<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '***********', // App ID
      channelUrl : '//**********', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    // Additional initialization code here
  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script>

<script type="text/javascript" src="http://connect.facebook.net/en_US/all.js"></script>
<script type="text/javascript" charset="utf-8">
    FB.Canvas.setAutoGrow();
</script> 
```

我几乎从 Facebook 的开发人员页面复制了 Javascript SDK，然后找到了一小段应该自动设置高度的代码。我已经用谷歌搜索了答案，但找不到任何可以解决此问题的方法（或以像我这样的绝对新手会理解的方式解释它）。

希望你能帮助我。

//弗雷德里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T09:01:10.787

既然你提到你知道非常基本的 html，我假设你也不知道 CSS 的可能性，所以我建议你替换它：

```
<div id="fb-root"></div> 
```

有了这个：

```
<div id="fb-root" style="max-width: 100px;"></div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T09:06:05.653

将此代码移动`FB.Canvas.setAutoGrow();`到`fbAsyncInit`函数中，示例：

```
window.fbAsyncInit = function() {
    FB.init({
      appId      : '***********', // App ID
      channelUrl : '//**********', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    FB.Canvas.setAutoGrow();
 }; 
```

如果要手动设置大小，可以使用`FB.Canvas.setSize()`以下功能：

```
FB.Canvas.setSize({height: 800}); 
```

将上述数字更改为`800`您希望它增加的任何大小。

# jquery - ASP.NET 脚本管理器在使用 AJAX 发布到服务器时出现错误 500

> ID：12815525
> 
> 赞同：0
> 
> 时间：2012-10-10T08:53:37.043
> 
> 标签：jquery, asp.net, scriptmanager

我昨天问了一个问题，它因重复原因关闭，但是我仍然没有得到如何解决我的问题的答案，我需要一些帮助。

我正在使用带有脚本管理器的 ASP.NET

```
<asp:ScriptManager ID="ScriptManager1" EnablePageMethods="true" EnablePartialRendering="true" runat="server" /> 
```

尝试将数据发布到服务器时出现错误 500。

**带有错误 500 的错误代码：**

CS：

```
[WebMethod]
public static void SetCurrentBaseVersion(string id)
{
    // need to get here
} 
```

JS：

```
function postNewBaseLine() {
    var id = "300";

    $.ajax({
        type: "POST",
        url: "ManagerBaseKit.aspx/SetCurrentBaseVersion",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        data: {'id' :id},
        success: function (data) {
            alert('success!');
        },
        statusCode: {
            500: function () {
                alert('got error 500');
            }
        }
    });
} 
```

到目前为止，我发现如果我在 webmethod 中删除字符串 id，它工作正常并且我能够到达 SetCurrentBaseVersion（没有收到错误 500）

**工作代码：**

CS

```
[WebMethod]
public static void SetCurrentBaseVersion() //removed the string id
{
    // need to get here
} 
```

JS

```
function postNewBaseLine(id) {
    var id = "300";

    $.ajax({
        type: "POST",
        url: "ManagerBaseKit.aspx/SetCurrentBaseVersion",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        //data: {'id' :id},   removed the data
        success: function (data) {
            alert('success!');
        },
        statusCode: {
            500: function () {
                alert('got error 500');
            }
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:10:06.757

您必须将数据作为 json 字符串传递，您需要将数据的值放在双引号中以使其成为字符串。json 格式在引号内有键值对。您需要了解**[Json 数据格式](http://www.json.org/example.html)**

```
 data: "{'id': '" + id+ "'}", 
```

这也可以在不使用键和值周围的引号的情况下使用，但我提到的[json 文档用于在键和值周围加上引号。](http://www.json.org/example.html)

```
 data: "{id: " + id + "}", 
```

对于具有两个参数的方法，

**背后的代码**

```
[WebMethod()]
public static string CallMethodFromClient(string id, int amount)
{ 
```

**HTML**

```
 data: "{ id : " + id + ", amount : " + amount + " }" 
```

# jsf - JSF index.xhtml 并重定向到 faces 动作

> ID：12815529
> 
> 赞同：4
> 
> 时间：2012-10-10T08:53:44.020
> 
> 标签：jsf, redirect, jsf-2, myfaces

我认为拥有一个索引页面（在我的例子中是 index.xhtml）是一个很好的做法。我想在索引页面上传递一些操作（例如在 struts 中：`<c:redirect url="list.do" />`并且我转到没有任何链接和按钮的 struts 操作类）我知道如果我想使用导航，我应该使用 commandLink-s 或按钮）。我可以使用 onclick javascript 函数编写`<h:commandButton>`，但我不认为这是最好的选择。

我对 JSF 完全陌生（使用 JSF 2.0），我需要你的建议。从索引页面重定向到控制器中的操作的最佳实践是什么？

///新版本

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core">
<f:view>
<ui:insert name="metadata"/>
    <f:viewParam name="action" value="listItems.xtml"/>
    <f:event type="preRenderView" listener="#{yourBean.methodInManagedBean}" />
<h:body></h:body>
</f:view>
</html>

public class ForwardBean {

    private String action;

    // getter, setter

    public void navigate(PhaseEvent event) {
        FacesContext facesContext = FacesContext.getCurrentInstance();
        String outcome = action; 
        facesContext.getApplication().getNavigationHandler().handleNavigation(facesContext, null, outcome);
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-10T12:05:16.180

您可以通过以下方式使用 JSF`preRenderView`事件重定向到另一个页面，

***在您的 index.xhtml 文件中***

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core">
<f:view>
<ui:insert name="metadata"/>
    <f:event type="preRenderView" listener="#{yourBean.methodInManagedBean}" />
<h:body></h:body>
</f:view>
</html> 
```

在托管 bean 中， ***第一种方法是***

```
 public class yourClass{

    FacesContext fc = FacesContext.getCurrentInstance();
    ConfigurableNavigationHandler nav = (ConfigurableNavigationHandler)fc.getApplication().getNavigationHandler();

    public void methodInManagedBean() throws IOException {
        nav.performNavigation("list.do");//add your URL here, instead of list.do
    }
    } 
```

或者你可以使用***第二种方式***

```
 public class yourClass{ 

    public void methodInManagedBean() throws IOException {
         FacesContext.getCurrentInstance().getExternalContext().redirect("list.do");//add your URL here, instead of list.do
    }
    } 
```

# javascript - 不使用 JSONP 启用跨域请求

> ID：12815531
> 
> 赞同：0
> 
> 时间：2012-10-10T08:53:50.100
> 
> 标签：javascript, json

> **可能重复：**
> [规避同源策略的方法](https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy)

是否可以在不使用 JSONP 的情况下使用 jQuery 启用跨域请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T08:54:24.483

您可以通过在 jquery 中进行设置。

```
jQuery.support.cors = true; 
```

这使您可以使用 jQuery 进行跨域调用。这可能不是最好的解决方案，因为您正在使用以下请求标头添加漏洞：Access-Control-Allow-Origin。我建议看看 JSONP 是否仍然是一个选项，这个选项是首选。

有关更多信息，请参阅此帖子：[从 sinatra 应用程序向 Rails 应用程序发出发布请求](https://stackoverflow.com/questions/12813249/making-a-post-request-from-a-sinatra-app-to-a-rails-app/12813491#comment17330106_12813491)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:58:11.963

是的，您应该使用标题`Header set Access-Control-Allow-Origin *`

然后你可以使用jsonp。服务器应该使用您在回调中提供的填充来响应。

您还可以 `header("Access-Control-Allow-Origin: *");`在服务器端使用标头（php scscript）

# android - 如何将图像更改为文本视图中的按钮以调用另一个活动

> ID：12815533
> 
> 赞同：-2
> 
> 时间：2012-10-10T08:53:58.793
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

使用带有背景图像的 textview 以及另外两个图像，现在我想让这两个图像作为我的按钮（后退和订购按钮）像 - iPHONE，因为通过使用这些按钮我想调用另一个活动，我我正在放置我的 xml textview

```
 <TextView
   android:id="@+id/actionbar"
   android:layout_width="fill_parent"
   android:layout_height="40dip"
   android:background="@drawable/header"
   android:drawableLeft="@drawable/back"
   android:drawableRight="@drawable/final_order"
   android:gravity="center_vertical|center_horizontal"
   android:shadowColor="@android:color/black"
   android:shadowDx="1"
   android:shadowDy="1"
   android:shadowRadius="1"
   android:text="Pizza"
   android:textColor="#FFFFFF"
   android:textSize="25dp"
   android:textStyle="bold" /> 
```

请写一些简短的代码来实现这个目标

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T09:00:40.320

你可以使用 ImageButton 而不是 textview

或者

textview 本身有一个 onclickevent

例如

```
textview.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                               // call your activities using intent from here

            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T09:21:47.520

很简单，这是我的 header.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="horizontal" >

<Button 
    android:id="@+id/button_up" 
    android:layout_width="48dp" 
    android:layout_height="48dp"
    android:drawableTop="@drawable/undo" />

<TextView
    android:id="@+id/path"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerVertical="true"
    android:padding="4dp"
    android:textSize="18sp"
    android:singleLine="true"
    android:ellipsize="marquee" 
    android:marqueeRepeatLimit="marquee_forever"
    android:scrollHorizontally="true" 
    android:focusable="true" 
    android:focusableInTouchMode="true"
    android:layout_toRightOf="@+id/button_up"
    android:layout_toLeftOf="@+id/button_play"
    android:text="@string/path" />

<Button
    android:id="@+id/button_play"
    android:layout_width="48dp"
    android:layout_height="48dp"
    android:layout_toLeftOf="@+id/button_settings"
    android:drawableTop="@drawable/play" />

<Button
    android:id="@+id/button_settings"
    android:layout_width="48dp"
    android:layout_height="48dp"
    android:layout_alignParentRight="true"
    android:drawableTop="@drawable/settings" />

</RelativeLayout> 
```

我将它包含在 activity_main.xml 的前面，这是我的应用程序的默认 xml。包含后有分隔线，下一个是我的列表视图白色项目。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:padding="4dp"
android:background="@color/gray_light"
android:orientation="vertical" >

<include layout="@layout/header" />

<View
    android:id="@+id/separator_up"
    android:layout_width="fill_parent"
    android:layout_height="2dp"
    android:layout_marginTop="2dp"
    android:background="@color/blue_light" />

<include layout="@layout/list" />

 </LinearLayout> 
```

# cordova - 在本地获取一个json文件

> ID：12815534
> 
> 赞同：1
> 
> 时间：2012-10-10T08:54:00.503
> 
> 标签：cordova, jquery-mobile, local, getjson

我正在使用 phonegap 和 jquery mobile 开发一个应用程序。我对所有这些技术都是新手。我必须获取一个 json 文件才能获取数据。我不知道如何在本地做到这一点。我尝试了 getjson 但我的应用程序找不到该文件。我必须从本地服务器获取 json 文件。

如果可能的话，有人可以帮我从本地的 json 文件中获取数据。（我是法国人，如果我的英语不好，请见谅）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T10:56:36.847

由于您的 JSON 文件位于外部位置（= 不在您的文件夹内`www`），因此请确保将本地计算机的地址添加为白名单例外。

有关更多信息，请查看在线文档：[http ://docs.phonegap.com/en/2.1.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide](http://docs.phonegap.com/en/2.1.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide)

为了快速了解问题是否真的来自那里，您可以简单地将`*`（或`.*`）添加到您的文件中`res/xml/cordova.xml`：

```
<access origin="*" /> 
```

如果上述方法不起作用，您可以尝试以下方法：

```
<access origin=".*" /> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T18:15:08.840

我以前做过。我使用了 XMLHttpRequest 和相对路径，它可以工作。它喜欢这样：xhr.open('GET','../json/hello.json')。我仍然没有找到更好的方法来获得它。

# php - 用于异步重建缓存条目的设计模式

> ID：12815546
> 
> 赞同：0
> 
> 时间：2012-10-10T08:54:24.840
> 
> 标签：php, database, performance, caching, asynchronous

我有一个应用程序，它根据`predefined URLs`以下方式路由请求：

**第一步：缓存查找**
所有的`URLS`都聚合成一个`array`（序列化并存储在缓存中），其结构如下：

*   每个`array key`代表一个`URL`
*   `URL`信息（即如何处理`URL`）被定义为对应的`array value`。

在实践中，这给了我（仅供参考的`PHP 5.4`数组语法）：

```
<?php

// structure of the cached URLS array
$cached_urls = [
    '/pageA' => [
        'controller' => 'ProductController',
        'content_id' => 1234
    ],
    '/serviceA' => [
        'controller' => 'ServiceController',
        'content_id' => 45678
    ]
];

// working with the array (retrieve $cached_urls from cache, then...)
if (!isset($cached_urls[$request['url']])) {
    // 404
} else {
    $url = $cached_urls[$request['url']];
    // further actions based on $url
} 
```

**第二步：**
如果`$cached_urls`无法从缓存中检索到数组，则进行数据库查找和缓存重建我会做 3 件事：

*   从表中检索`URL`信息`url`（其中每个`row`代表`1 URL`和`URL`本身是用于过滤查询的字段）和其他相关表。
*   处理请求的方式与在缓存场景中处理请求的方式相同`$url`
*   重建缓存，以便下次请求进入时，我不必进行数据库查找，

在执行速度方面，这是我们所拥有的（从快到慢）：

1.  缓存查找（~10ms）
2.  数据库查找（~100ms）
3.  重建缓存（~2000ms）

当缓存可用时，页面的服务速度非常快，但是每次重建缓存时（大约每分钟），页面需要几秒钟才能提供服务，这是一个问题。因此我想知道：

**PHP中有哪些设计模式可用于执行异步处理（在我的情况下将用于重建缓存）同时避免同时执行多次相同的任务（因为我只需要一次重建缓存一次直到它被重建，而不是同时击中我的应用程序的每个请求）？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:15:09.737

在更新内容的过程中更新缓存（即：您的管理面板/cms/其他）。对于站点管理员来说，2 秒的等待是完全可以接受的。

# ruby-on-rails - 贝宝经常性宝石和试用期

> ID：12815548
> 
> 赞同：2
> 
> 时间：2012-10-10T08:54:32.973
> 
> 标签：ruby-on-rails, paypal, recurring-billing

我按照 Rails Casts EP289 实现了 paypal 循环。[http://railscasts.com/episodes/289-paypal-recurring-billing?view=asciicast](http://railscasts.com/episodes/289-paypal-recurring-billing?view=asciicast)

它适用于正常过程，但是当我尝试实施试用期时，我遇到了一些问题。它在第一次计费时收取试用金额和循环计费金额的总和。（我只想收取试用金额）

我通过互联网进行了检查，但到目前为止我无法弄清楚如何做到这一点。关于正确实施这一点，我缺少什么？

下面是代码。

# paypal_payment.rb

```
class PaypalPayment
  def initialize(subscription)
    @subscription = subscription
    @price = Price.find_by_currency_code_and_plan_id("JPY", @subscription.plan.id)
  end

  def checkout_details
    PayPal::Recurring.new(token: @subscription.paypal_payment_token).checkout_details
  end

  def checkout_url(options)
    process(:checkout, options).checkout_url
  end

  def make_recurring
    process :request_payment
    process :create_recurring_profile, period: :monthly, frequency: 1, start_at: Time.now + 1.month
  end

private

  def process(action, options = {})
    options = options.reverse_merge(
      token: @subscription.paypal_payment_token,
      payer_id: @subscription.paypal_customer_token,
      item_name: @subscription.plan.name,
      item_amount: @price.amount.to_i,
      description: "Something"
      amount: @price.amount.to_i,
      outstanding: :next_billing,
      trial_amount: @price.initial_amount.to_i,
      trial_period: :monthly,
      trial_frequency: 1,
      trial_length: 1,
      currency: @price.currency_code,
      locale: "ja_JP"
    )
    response = PayPal::Recurring.new(options).send(action)
    raise response.errors.inspect if response.errors.present?
    response
  end
end 
```

# 订阅.rb

```
class Subscription < ActiveRecord::Base
  belongs_to :plan
  belongs_to :student
  has_many :transactions, :class_name => "SubscriptionTransaction"
  validates_presence_of :plan_id
  validates_presence_of :student_id
  attr_accessor :paypal_payment_token
  attr_accessible :paypal_customer_token, :paypal_recurring_profile_token, :plan_id, :student_id, :paypal_payment_token

  def save_with_payment
    if valid?
      if payment_provided?
        save_with_paypal_payment
      end
    end
  end

  def paypal
    PaypalPayment.new(self)
  end

  def save_with_paypal_payment
    response = paypal.make_recurring
    self.paypal_recurring_profile_token = response.profile_id
    save!
  end

  def payment_provided?
    paypal_payment_token.present?
  end
end 
```

# 订阅控制器.rb

```
require 'time'
class SubscriptionsController < ApplicationController
  before_filter :authenticate_user!, :is_student?

  def index
    @title = I18n.t "subscriptions.index.title"
    @student = Student.find_by_id(current_user.profile_id)
    if @student.is_trial == true
      redirect_to 'new'
    end
    @subscription = @student.subscription
    @plan = @subscription.plan
    Time.zone = "Tokyo"
    @date = Time.now.in_time_zone.to_date
    @total_lesson_times = Lesson.find_all_by_student_id(@student.id).size
    @lastm_lesson_times = Lesson.where("student_id = :student_id AND lesson_day >= :start_date AND lesson_day <= :end_date",
      {:student_id => @student.id, :start_date => @date.beginning_of_month()-1.month, :end_date => @date.end_of_month()-1.month}).size

    @thism_lesson_times = Lesson.where("student_id = :student_id AND lesson_day >= :start_date AND lesson_day <= :end_date",
        {:student_id => @student.id, :start_date => @date.beginning_of_month(), :end_date => @date.end_of_month()}).size
  end

  def new
    @title = I18n.t "subscriptions.new.title"
    @plans = Plan.all
    @student = Student.find_by_id(current_user.profile_id)
    if @student.is_trial == false && @student.is_active == false
      redirect_to 'index'
    end
    @subscription = Subscription.new
    @date = Time.now.in_time_zone.to_date
    @total_lesson_times = Lesson.find_all_by_student_id(@student.id).size
    @lastm_lesson_times = Lesson.where("student_id = :student_id AND lesson_day >= :start_date AND lesson_day <= :end_date",
      {:student_id => @student.id, :start_date => @date.beginning_of_month()-1.month, :end_date => @date.end_of_month()-1.month}).size

    @thism_lesson_times = Lesson.where("student_id = :student_id AND lesson_day >= :start_date AND lesson_day <= :end_date",
        {:student_id => @student.id, :start_date => @date.beginning_of_month(), :end_date => @date.end_of_month()}).size
  end

  def modify

  end

  def cancel
    student = Student.find(current_user.profile_id)
    @subscription = student.subscription
    ppr = PayPal::Recurring.new(:profile_id => @subscription.paypal_recurring_profile_token)
    response = ppr.suspend
    if response.success?
      student.update_attributes(:is_active => false)
      flash[:notice] = I18n.t "subscriptions.cancel.notice_flash"
      redirect_to root_path
    end
  end

  def reactivate
    student = Student.find_by_id(current_user.profile_id)
    @subscription = student.subscription
    ppr = PayPal::Recurring.new(:profile_id => @subscription.paypal_recurring_profile_token)
    response = ppr.reactivate
    if response.success?
      student.update_attributes(:is_active => true)
      flash[:success] = I18n.t "subscriptions.reactivate.success_flash"
      redirect_to root_path
    end
  end

  def paypal_checkout
    plan = Plan.find(params[:plan_id])
    student = Student.find(current_user.profile_id)
    subscription = plan.subscriptions.build
    redirect_to subscription.paypal.checkout_url(
      return_url: subscriptions_confirm_url(:plan_id => plan.id),
      cancel_url: new_subscription_url
    )
  end  

  def confirm
    @plan = Plan.find(params[:plan_id])
    @student = Student.find(current_user.profile_id)
    @subscription = @plan.subscriptions.build
    if params[:PayerID]
      @subscription.student_id = @student.id
      @subscription.paypal_customer_token = params[:PayerID]
      @subscription.paypal_payment_token = params[:token]
    end
  end

  def complete
    student = Student.find(current_user.profile_id)
    Time.zone = student.user.time_zone
    current_time = Time.now.in_time_zone
    current_date = current_time.to_date
    @subscription = Subscription.new(
      :plan_id => params[:subscription][:plan_id],
      :student_id => params[:subscription][:student_id],
      :paypal_customer_token => params[:subscription][:paypal_customer_token],
      :paypal_payment_token => params[:subscription][:paypal_payment_token]
    )
    if @subscription.save_with_payment
      student.update_attributes(:is_active => true, :is_trial => false, :expiration_date => current_date + 1.month - 1.day)
      redirect_to root_path, :notice => (I18n.t "subscriptions.complete.success_flash")
    else
      flash[:notice] = I18n.t "error_flash"
      redirect_to new_subscription_path
    end
  end

  private
  def is_student?
    if current_user.profile_type != "Student"
      flash[:notice] = I18n.t "is_student_notice_flash"
      redirect_to root_path
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-08T18:39:56.283

（在问题编辑中回答。转换为社区 wiki 答案。请参阅[将问题的答案添加到问题本身时的适当操作是什么？](https://meta.stackoverflow.com/questions/267434/what-is-the-appropriate-action-when-the-answer-to-a-question-is-added-to-the-que)）

OP写道：

> 我自己解决了这个问题。问题出在里面`paypal_payment.rb`
> 
> ```
>  def make_recurring
>     process :request_payment
>     process :create_recurring_profile, period: :monthly, frequency: 1, start_at: Time.now + 1.month
>   end 
> ```
> 
> 因为那`process :request_payment`部分。除了定期付款的费用外，它还会向用户收取费用。

# java - 为什么编译器允许我将泛型集合分配给声明为特定于类的集合的变量？

> ID：12815550
> 
> 赞同：4
> 
> 时间：2012-10-10T08:54:37.900
> 
> 标签：java, generics

我无法理解为什么 java 编译器允许将非特定集合分配给已指定变量的集合。像这样：

```
 ArrayList list = new ArrayList();
    // Operations on list
    ArrayList<String> stringList = list; 
```

这可能会出现各种类型的转换错误，在我看来，如果编译器首先阻止你这样做会更有意义。

我只是问，因为我对语言的这个有点奇怪的方面感到好奇，我实际上并没有遇到让代码工作的问题（尽管有一天我可能需要使用带有各种类的 ArrayList它）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T08:56:24.523

它仅用于支持泛型或 java 5 之前的遗留代码。

泛型，引入`Java SE 5`和 Collection 很久以前就一直在运行。因此，如果您在 1.5 之前看到 Collection 框架，您会看到[ArrayList](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ArrayList.html)，没有`generic`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T10:50:09.277

由于使用原始类型（例如，没有泛型参数的 ArrayList）如果不抑制会导致警告，您还可以考虑使用“-Werror”标志来“警告失败”：

[http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javac.html](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javac.html)

（虽然就个人而言，我还没有使用过这个标志）

# android - 从 BroadcastReceiver 修改 UI

> ID：12815552
> 
> 赞同：0
> 
> 时间：2012-10-10T08:54:42.707
> 
> 标签：android, connection, broadcastreceiver

我需要一些方法来检测网络连接何时丢失。所以移动和wifi之间的切换并不重要，它只是在运行时检测连接丢失的时间。

我现在找到了一些适合我的代码。

```
public class ConnectivityReceiver extends BroadcastReceiver {

  @Override
  public void onReceive(Context context, Intent intent) {
      Log.d(ConnectivityReceiver.class.getSimpleName(), "action: "
              + intent.getAction());
  }

} 
```

我想在 onReceive() 方法内部检查连接是否仍然可用。

问题是，如果它丢失了，我想向用户显示一条消息。那么传递回我的活动的最佳方式是什么，连接已丢失？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T09:02:23.473

如果您只想在活动在屏幕上时跟踪网络连接状态，您可以将您的`ConnectivityReceiver`as 内部嵌套类放在`Activity`. 在这种情况下，您应该在`onResume`方法中注册它并在`onPause`. 它看起来像这样：

```
public class MyActivity extends Activity {
    private class ConnectivityReceiver extends BroadcastReceiver {
        @Override
        public void onReceive(Context context, Intent intent) {
            Log.d(ConnectivityReceiver.class.getSimpleName(), "action: "
                + intent.getAction());
        }
    }

    private final BroadcastReceiver receiver = new ConnectivityReceiver();

    @Override
    protected void onPause() {
        super.onPause();
        unregisterReceiver(receiver);
    }

    @Override
    protected void onResume() {
        super.onResume();
        IntentFilter filter = new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION);
        registerReceiver(receiver, filter);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T09:01:01.050

您可以拥有一个扩展的内部类，`BroadcastReceiver`并且可以动态[注册](http://developer.android.com/reference/android/content/Context.html#registerReceiver%28android.content.BroadcastReceiver,%20android.content.IntentFilter%29)它。从内部类（精确`onRecieve()`方法）中，您可以访问您的活动。

# php - PHP - 发现差异 - 图像处理

> ID：12815554
> 
> 赞同：0
> 
> 时间：2012-10-10T08:54:45.480
> 
> 标签：php, image, image-processing, imagemagick, optical-mark-recognition

由于我不太了解 PHP 中的图像处理，但是熟悉 OCR 和 OMR，我有一个独特的要求。这是场景：

给定输入：2 个图像

*   图 1：花园
*   图 2：同一个花园，一个人站着

所需输出：将站着的人分开

任何有关该主题的技术指针将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T09:11:43.073

您可以使用 Imagick 比较功能 .. 这可以帮助您识别图像之间的细微差别

```
 compare a.png a1.png diff.png 
```

比较

![在此处输入图像描述](../Images/536350c15e7f4d3a845aebf7b86add50.png) ![在此处输入图像描述](../Images/3fbf6b82a46ee30721103c47fc4b250b.png)

结果

![在此处输入图像描述](../Images/71a46ba5a055923f7e463018830b3235.png)

跑

```
 convert diff.png -matte ( +clone -fuzz 5% -transparent #f3303e ) -compose DstOut -composite red-channel.png 
```

![在此处输入图像描述](../Images/0f2e88c35d69b3334cad750e83b33f24.png)

*   [查看文档和示例](http://www.imagemagick.org/Usage/compare/)
*   [PHP文档](http://www.php.net/manual/en/imagick.compareimages.php)

# delphi - 使用 LIBRTMP dll 下载 RTMP 流并保存到硬盘

> ID：12815557
> 
> 赞同：0
> 
> 时间：2012-10-10T08:54:56.923
> 
> 标签：delphi, delphi-xe2, rtmp

我正在尝试下载并保存 RTMP 流。在库的描述中，我找到了一种维护流程的方法。请帮我处理这个问题。我使用的代码：

```
var
  MY_RTMP: RTMP;
  URL_str: string;
  MY_RTMPPacket: RTMPPacket;
  URL_char: PAnsiChar;
begin
  URL_str: = 'rtmp :/ / localhost: 1935/Video/test.stream';
  MY_RTMP: = RTMP_Alloc;
  RTMP_Init (MY_RTMP);
  RTMP_SetupURL (MY_RTMP, pcchar (URL_str));
  RTMP_EnableWrite (MY_RTMP);
  RTMP_Connect (MY_RTMP, MY_RTMPPacket);
  RTMP_ConnectStream (MY_RTMP, 0);
  RTMP_Read(); 
```

但它只能使用RTMP_Read()连接到服务器；我想获得帮助，因为不知道必须传递哪些参数才能获得结果。

LibRTMP 定义：

```
LIBRTMP(3)      LIBRTMP(3)
RTMPDump v2.4   2011-07-20  LIBRTMP(3)

NAME

librtmp − RTMPDump Real-Time Messaging Protocol API
LIBRARY

RTMPDump RTMP (librtmp, -lrtmp)
SYNOPSIS

#include <librtmp/rtmp.h>
DESCRIPTION

The Real-Time Messaging Protocol (RTMP) is used for streaming multimedia content across a TCP/IP network. This API provides most client functions and a few server functions needed to support RTMP, RTMP tunneled in HTTP (RTMPT), encrypted RTMP (RTMPE), RTMP over SSL/TLS (RTMPS) and tunneled variants of these encrypted types (RTMPTE, RTMPTS). The basic RTMP specification has been published by Adobe but this API was reverse-engineered without use of the Adobe specification. As such, it may deviate from any published specifications but it usually duplicates the actual behavior of the original Adobe clients.
The RTMPDump software package includes a basic client utility program in rtmpdump(1), some sample servers, and a library used to provide programmatic access to the RTMP protocol. This man page gives an overview of the RTMP library routines. These routines are found in the -lrtmp library. Many other routines are also available, but they are not documented yet.

The basic interaction is as follows. A session handle is created using RTMP_Alloc() and initialized using RTMP_Init(). All session parameters are provided using RTMP_SetupURL(). The network connection is established using RTMP_Connect(), and then the RTMP session is established using RTMP_ConnectStream(). The stream is read using RTMP_Read(). A client can publish a stream by calling RTMP_EnableWrite() before the RTMP_Connect() call, and then using RTMP_Write() after the session is established. While a stream is playing it may be paused and unpaused using RTMP_Pause(). The stream playback position can be moved using RTMP_Seek(). When RTMP_Read() returns 0 bytes, the stream is complete and may be closed using RTMP_Close(). The session handle is freed using RTMP_Free().

All data is transferred using FLV format. The basic session requires an RTMP URL. The RTMP URL format is of the form

  rtmp[t][e|s]://hostname[:port][/app[/playpath]]
Plain rtmp, as well as tunneled and encrypted sessions are supported.

Additional options may be specified by appending space-separated key=value pairs to the URL. Special characters in values may need to be escaped to prevent misinterpretation by the option parser. The escape encoding uses a backslash followed by two hexadecimal digits representing the ASCII value of the character. E.g., spaces must be escaped as \20 and backslashes must be escaped as \5c.

OPTIONS

Network Parameters

These options define how to connect to the media server.
socks=host:port
Use the specified SOCKS4 proxy.
Connection Parameters

These options define the content of the RTMP Connect request packet. If correct values are not provided, the media server will reject the connection attempt.
app=name
Name of application to connect to on the RTMP server. Overrides the app in the RTMP URL. Sometimes the librtmp URL parser cannot determine the app name automatically, so it must be given explicitly using this option.
tcUrl=url
URL of the target stream. Defaults to rtmp[t][e|s]://host[:port]/app.
pageUrl=url
URL of the web page in which the media was embedded. By default no value will be sent.
swfUrl=url
URL of the SWF player for the media. By default no value will be sent.
flashVer=version
Version of the Flash plugin used to run the SWF player. The default is "LNX 10,0,32,18".
conn=type:data
Append arbitrary AMF data to the Connect message. The type must be B for Boolean, N for number, S for string, O for object, or Z for null. For Booleans the data must be either 0 or 1 for FALSE or TRUE, respectively. Likewise for Objects the data must be 0 or 1 to end or begin an object, respectively. Data items in subobjects may be named, by prefixing the type with 'N' and specifying the name before the value, e.g. NB:myFlag:1\. This option may be used multiple times to construct arbitrary AMF sequences. E.g.
  conn=B:1 conn=S:authMe conn=O:1 conn=NN:code:1.23 conn=NS:flag:ok conn=O:0
Session Parameters

These options take effect after the Connect request has succeeded.
playpath=path
Overrides the playpath parsed from the RTMP URL. Sometimes the rtmpdump URL parser cannot determine the correct playpath automatically, so it must be given explicitly using this option.
playlist=0|1
If the value is 1 or TRUE, issue a set_playlist command before sending the play command. The playlist will just contain the current playpath. If the value is 0 or FALSE, the set_playlist command will not be sent. The default is FALSE.
live=0|1
Specify that the media is a live stream. No resuming or seeking in live streams is possible.
subscribe=path
Name of live stream to subscribe to. Defaults to playpath.
start=num
Start at num seconds into the stream. Not valid for live streams.
stop=num
Stop at num seconds into the stream.
buffer=num
Set buffer time to num milliseconds. The default is 30000.
timeout=num
Timeout the session after num seconds without receiving any data from the server. The default is 120.
Security Parameters

These options handle additional authentication requests from the server.
token=key
Key for SecureToken response, used if the server requires SecureToken authentication.
jtv=JSON
JSON token used by legacy Justin.tv servers. Invokes NetStream.Authenticate.UsherToken
swfVfy=0|1
If the value is 1 or TRUE, the SWF player is retrieved from the specified swfUrl for performing SWF Verification. The SWF hash and size (used in the verification step) are computed automatically. Also the SWF information is cached in a .swfinfo file in the user's home directory, so that it doesn't need to be retrieved and recalculated every time. The .swfinfo file records the SWF URL, the time it was fetched, the modification timestamp of the SWF file, its size, and its hash. By default, the cached info will be used for 30 days before re-checking.
swfAge=days
Specify how many days to use the cached SWF info before re-checking. Use 0 to always check the SWF URL. Note that if the check shows that the SWF file has the same modification timestamp as before, it will not be retrieved again.
EXAMPLES

An example character string suitable for use with RTMP_SetupURL():
  "rtmp://flashserver:1935/ondemand/thefile swfUrl=http://flashserver/player.swf swfVfy=1"
ENVIRONMENT

HOME
The value of $HOME is used as the location for the .swfinfo file.
FILES

$HOME/.swfinfo
Cache of SWF Verification information
SEE ALSO

rtmpdump(1), rtmpgw(8)
AUTHORS

Andrej Stepanchuk, Howard Chu, The Flvstreamer Team 
<http://rtmpdump.mplayerhq.hu> 
```

使用的代码：

```
{$IFDEF FPC}
  {$MODE DELPHI}
  {$PACKRECORDS C}
{$ENDIF}

unit lrtmp;

interface

uses windows, sockets, WinSock ;

Const
{$ifdef windows}
  LibRtmp = 'librtmp'; // Library name
  { matching lib version for librtmp.dll, needed for initialization }
  RTMP_LIBRTMP_VER_STRING='2.3';
{$else windows}
  LibRtmp = 'rtmp'; // Library name
  { matching lib version for librtmp, needed for initialization }
  RTMP_LIBRTMP_VER_STRING='2.3';
{$endif windows}

//{$I inttypes}

{AMF Constants}
Const
    AMF_NUMBER = 0;
    AMF_BOOLEAN = 1;
    AMF_STRING = 2;
    AMF_OBJECT = 3;
    AMF_MOVIECLIP = 4;
    AMF_NULL = 5;
    AMF_UNDEFINED = 6;
    AMF_REFERENCE = 7;
    AMF_ECMA_ARRAY = 8;
    AMF_OBJECT_END = 9;
    AMF_STRICT_ARRAY = 10;
    AMF_DATE = 11;
    AMF_LONG_STRING = 12;
    AMF_UNSUPPORTED = 13;
    AMF_RECORDSET = 14;
    AMF_XML_DOC = 15;
    AMF_TYPED_OBJECT = 16;
    AMF_AVMPLUS = 17;
    AMF_INVALID = $ff;
    AMF3_UNDEFINED = 0;
    AMF3_NULL = 1;
    AMF3_FALSE = 2;
    AMF3_TRUE = 3;
    AMF3_INTEGER = 4;
    AMF3_DOUBLE = 5;
    AMF3_STRING = 6;
    AMF3_XML_DOC = 7;
    AMF3_DATE = 8;
    AMF3_ARRAY = 9;
    AMF3_OBJECT = 10;
    AMF3_XML = 11;
    AMF3_BYTE_ARRAY = 12;

{RTMP Constants}
const
  RTMP_LIB_VERSION = $020300;  
  RTMP_FEATURE_HTTP = $01;  
  RTMP_FEATURE_ENC = $02;  
  RTMP_FEATURE_SSL = $04;  
  RTMP_FEATURE_MFP = $08;  
  RTMP_FEATURE_WRITE = $10;  
  RTMP_FEATURE_HTTP2 = $20;  
  RTMP_PROTOCOL_UNDEFINED = -(1);  
  RTMP_PROTOCOL_RTMP = 0;  
  RTMP_PROTOCOL_RTMPE = RTMP_FEATURE_ENC;  
  RTMP_PROTOCOL_RTMPT = RTMP_FEATURE_HTTP;  
  RTMP_PROTOCOL_RTMPS = RTMP_FEATURE_SSL;  
  RTMP_PROTOCOL_RTMPTE = RTMP_FEATURE_HTTP or RTMP_FEATURE_ENC;  
  RTMP_PROTOCOL_RTMPTS = RTMP_FEATURE_HTTP or RTMP_FEATURE_SSL;  
  RTMP_PROTOCOL_RTMFP = RTMP_FEATURE_MFP;  
  RTMP_DEFAULT_CHUNKSIZE = 128;  
  RTMP_BUFFER_CACHE_SIZE = 16*1024;  
  RTMP_CHANNELS = 65600;  
  RTMP_PACKET_TYPE_AUDIO = $08;  
  RTMP_PACKET_TYPE_VIDEO = $09;  
  RTMP_PACKET_TYPE_INFO = $12;  
  RTMP_MAX_HEADER_SIZE = 18;  
  RTMP_PACKET_SIZE_LARGE = 0;  
  RTMP_PACKET_SIZE_MEDIUM = 1;  
  RTMP_PACKET_SIZE_SMALL = 2;  
  RTMP_PACKET_SIZE_MINIMUM = 3;  
  RTMP_LF_AUTH = $0001;  
  RTMP_LF_LIVE = $0002;  
  RTMP_LF_SWFV = $0004;  
  RTMP_LF_PLST = $0008;  
  RTMP_LF_BUFX = $0010;  
  RTMP_LF_FTCU = $0020;  
  RTMP_SWF_HASHLEN = 32;  
  RTMP_READ_HEADER = $01;  
  RTMP_READ_RESUME = $02;  
  RTMP_READ_NO_IGNORE = $04;  
  RTMP_READ_GOTKF = $08;  
  RTMP_READ_GOTFLVK = $10;  
  RTMP_READ_SEEKING = $20;  
  RTMP_READ_COMPLETE = -(3);
  RTMP_READ_ERROR = -(2);  
  RTMP_READ_EOF = -(1);  
  RTMP_READ_IGNORE = 0;

var
  FSocket  : TSocket;
  SockAddrB : TSockAddr;
  WSAData  : TWSAData;

{AMF Types}
Type
 char = AnsiChar;
 cint = longint;
 cchar = shortint;
 pcchar = ^cchar;
 uint8_t  = Byte;
 uint32_t = LongWord;
 int8_t = char;
 int32_t = LongInt;
 unsigned_char = Byte;
 unsigned_int = LongWord;
 unsigned_short = Word;
 int16_t = smallint;
 cuchar = byte;
 pcuchar = ^cuchar;
 cushort = Word;
 cuint = LongWord;
 cshort = SmallInt;
 clong = LongInt;

    AVal = record
          av_val : pcchar;
          av_len : cint;
        end;
    PAVal  = ^AVal;
    AMF3ClassDef = record
          cd_name : AVal;
          cd_externalizable : cchar;
          cd_dynamic : cchar;
          cd_num : cint;
          cd_props : PAVal;
        end;
    PAMF3ClassDef  = ^AMF3ClassDef;
    AMF3DataType =  Longint;
    PAMF3DataType  = ^AMF3DataType;
    AMFDataType =  Longint;
    PAMFDataType  = ^AMFDataType;
    AMFObjectProperty = record
          {undefined structure}
        end;
    PAMFObjectProperty  = ^AMFObjectProperty;
    AMFObject = record
          o_num : cint;
          o_props : PAMFObjectProperty;
        end;
    PAMFObject  = ^AMFObject;

{RTMP Types}

Type
  TArray0toRTMP_SWF_HASHLEN1OfUint8_t = array[0..(RTMP_SWF_HASHLEN)-1] of uint8_t;
  TArray0toRTMP_SWF_HASHLEN101OfCchar = array[0..(RTMP_SWF_HASHLEN+10)-1] of cchar;
  TArray0toRTMP_MAX_HEADER_SIZE1OfCchar = array[0..(RTMP_MAX_HEADER_SIZE)-1] of cchar;
  TArray0toRTMP_CHANNELS1OfCint = array[0..(RTMP_CHANNELS)-1] of cint;
  TArray0toRTMP_BUFFER_CACHE_SIZE1OfCchar = array[0..(RTMP_BUFFER_CACHE_SIZE)-1] of cchar;
  TArray0to6OfPcchar = array[0..6] of pcchar;

  SockAddr = record
   sa_family: u_short;
   sa_data: array[0..13] of Char;
  end;

  RTMPChunk = record
      c_headerSize : cint;
      c_chunkSize : cint;
      c_chunk : pcchar;
      c_header : TArray0toRTMP_MAX_HEADER_SIZE1OfCchar;
    end;

  PRTMPChunk  = ^RTMPChunk;

  RTMPPacket = record
      m_headerType : uint8_t;
      m_packetType : uint8_t;
      m_hasAbsTimestamp : uint8_t;
      m_nChannel : cint;
      m_nTimeStamp : uint32_t;
      m_nInfoField2 : int32_t;
      m_nBodySize : uint32_t;
      m_nBytesRead : uint32_t;
      m_chunk : PRTMPChunk;
      m_body : pcchar;
    end;

  PRTMPPacket  = ^RTMPPacket;
  TArray0toRTMP_CHANNELS1OfPRTMPPacket = array[0..(RTMP_CHANNELS)-1] of PRTMPPacket;

  RTMPSockBuf = record
      sb_socket : cint;
      sb_size : cint;
      sb_start : pcchar;
      sb_buf : TArray0toRTMP_BUFFER_CACHE_SIZE1OfCchar;
      sb_timedout : cint;
      sb_ssl : pointer;
    end;

  RTMP_LNK = record
      hostname : AVal;
      sockshost : AVal;
      playpath0 : AVal;
      playpath : AVal;
      tcUrl : AVal;
      swfUrl : AVal;
      pageUrl : AVal;
      app : AVal;
      auth : AVal;
      flashVer : AVal;
      subscribepath : AVal;
      token : AVal;
      extras : AMFObject;
      edepth : cint;
      seekTime : cint;
      stopTime : cint;
      lFlags : cint;
      swfAge : cint;
      protocol : cint;
      timeout : cint;
      socksport : cushort;
      port : cushort;
      dh : pointer;
      rc4keyIn : pointer;
      rc4keyOut : pointer;
      SWFSize : uint32_t;
      SWFHash : TArray0toRTMP_SWF_HASHLEN1OfUint8_t;
      SWFVerificationResponse : TArray0toRTMP_SWF_HASHLEN101OfCchar;
    end;

  RTMP_READ = record
      buf : pcchar;
      bufpos : pcchar;
      buflen : cuint;
      timestamp : uint32_t;
      dataType : uint8_t;
      flags : uint8_t;
      status : int8_t;
      initialFrameType : uint8_t;
      nResumeTS : uint32_t;
      metaHeader : pcchar;
      initialFrame : pcchar;
      nMetaHeaderSize : uint32_t;
      nInitialFrameSize : uint32_t;
      nIgnoredFrameCounter : uint32_t;
      nIgnoredFlvFrameCounter : uint32_t;
    end;

  RTMP_METHOD = record
      name : AVal;
      num : cint;
    end;

  PRTMP_METHOD  = ^RTMP_METHOD;

  RTMP = record
      m_inChunkSize : cint;
      m_outChunkSize : cint;
      m_nBWCheckCounter : cint;
      m_nBytesIn : cint;
      m_nBytesInSent : cint;
      m_nBufferMS : cint;
      m_stream_id : cint;
      m_mediaChannel : cint;
      m_mediaStamp : uint32_t;
      m_pauseStamp : uint32_t;
      m_pausing : cint;
      m_nServerBW : cint;
      m_nClientBW : cint;
      m_nClientBW2 : uint8_t;
      m_bPlaying : uint8_t;
      m_bSendEncoding : uint8_t;
      m_bSendCounter : uint8_t;
      m_numInvokes : cint;
      m_numCalls : cint;
      m_methodCalls : PRTMP_METHOD;
      m_vecChannelsIn : TArray0toRTMP_CHANNELS1OfPRTMPPacket;
      m_vecChannelsOut : TArray0toRTMP_CHANNELS1OfPRTMPPacket;
      m_channelTimestamp : TArray0toRTMP_CHANNELS1OfCint;
      m_fAudioCodecs : double;
      m_fVideoCodecs : double;
      m_fEncoding : double;
      m_fDuration : double;
      m_msgCounter : cint;
      m_polling : cint;
      m_resplen : cint;
      m_unackd : cint;
      m_clientID : AVal;
      m_read : RTMP_READ;
      m_write : RTMPPacket;
      m_sb : RTMPSockBuf;
      Link : RTMP_LNK;
    end;

  PRTMP  = ^RTMP;
  PRTMP_LNK  = ^RTMP_LNK;
  PRTMP_READ  = ^RTMP_READ;
  PRTMPSockBuf  = ^RTMPSockBuf;

{RTMP Variables}
var
    RTMPProtocolStringsLower : Array [0..6] of Pcchar;    //array[0..(RTMP_CHANNELS)-1]
    RTMP_DefaultFlashVer : AVal;
    RTMP_ctrlC : cint;
    {RTMPProtocolStringsLower : TArray0to6OfPcchar; cvar; external;
    RTMP_DefaultFlashVer : AVal;cvar;external;
    RTMP_ctrlC : cint;cvar;external;}

 {AMF Functions}
function AMF_EncodeString(output:pcchar; outend:pcchar; var str:AVal):pcchar;cdecl;external 'librtmp.dll' name 'AMF_EncodeString';  //LibRtmp = 'librtmp';
function AMF_EncodeNumber(output:pcchar; outend:pcchar; dVal:double):pcchar;cdecl;external 'librtmp' name 'AMF_EncodeNumber';
function AMF_EncodeInt16(output:pcchar; outend:pcchar; nVal:cshort):pcchar;cdecl;external 'librtmp' name 'AMF_EncodeInt16';
function AMF_EncodeInt24(output:pcchar; outend:pcchar; nVal:cint):pcchar;cdecl;external 'librtmp' name 'AMF_EncodeInt24';
function AMF_EncodeInt32(output:pcchar; outend:pcchar; nVal:cint):pcchar;cdecl;external 'librtmp' name 'AMF_EncodeInt32';
function AMF_EncodeBoolean(output:pcchar; outend:pcchar; bVal:cint):pcchar;cdecl;external 'librtmp' name 'AMF_EncodeBoolean';
function AMF_EncodeNamedString(output:pcchar; outend:pcchar; var name:AVal; var value:AVal):pcchar;cdecl;external 'librtmp' name 'AMF_EncodeNamedString';
function AMF_EncodeNamedNumber(output:pcchar; outend:pcchar; var name:AVal; dVal:double):pcchar;cdecl;external 'librtmp' name 'AMF_EncodeNamedNumber';
function AMF_EncodeNamedBoolean(output:pcchar; outend:pcchar; var name:AVal; bVal:cint):pcchar;cdecl;external 'librtmp' name 'AMF_EncodeNamedBoolean';
function AMF_DecodeInt16(data:pcchar):cushort;cdecl;external 'librtmp' name 'AMF_DecodeInt16';
function AMF_DecodeInt24(data:pcchar):cuint;cdecl;external 'librtmp' name 'AMF_DecodeInt24';
function AMF_DecodeInt32(data:pcchar):cuint;cdecl;external 'librtmp' name 'AMF_DecodeInt32';
procedure AMF_DecodeString(data:pcchar; var str:AVal);cdecl;external 'librtmp' name 'AMF_DecodeString';
procedure AMF_DecodeLongString(data:pcchar; var str:AVal);cdecl;external 'librtmp' name 'AMF_DecodeLongString';
function AMF_DecodeBoolean(data:pcchar):cint;cdecl;external 'librtmp' name 'AMF_DecodeBoolean';
function AMF_DecodeNumber(data:pcchar):double;cdecl;external 'librtmp' name 'AMF_DecodeNumber';
function AMF_Encode(var obj:AMFObject; pBuffer:pcchar; pBufEnd:pcchar):pcchar;cdecl;external 'librtmp' name 'AMF_Encode';
function AMF_Decode(var obj:AMFObject; pBuffer:pcchar; nSize:cint; bDecodeName:cint):cint;cdecl;external 'librtmp' name 'AMF_Decode';
function AMF_DecodeArray(var obj:AMFObject; pBuffer:pcchar; nSize:cint; nArrayLen:cint; bDecodeName:cint):cint;cdecl;external 'librtmp' name 'AMF_DecodeArray';
function AMF3_Decode(var obj:AMFObject; pBuffer:pcchar; nSize:cint; bDecodeName:cint):cint;cdecl;external 'librtmp' name 'AMF3_Decode';
procedure AMF_Dump(var obj:AMFObject);cdecl;external 'librtmp' name 'AMF_Dump';
procedure AMF_Reset(var obj:AMFObject);cdecl;external 'librtmp' name 'AMF_Reset';
procedure AMF_AddProp(var obj:AMFObject; var prop:AMFObjectProperty);cdecl;external 'librtmp' name 'AMF_AddProp';
function AMF_CountProp(var obj:AMFObject):cint;cdecl;external 'librtmp' name 'AMF_CountProp';
function AMF_GetProp(var obj:AMFObject; var name:AVal; nIndex:cint):PAMFObjectProperty;cdecl;external 'librtmp' name 'AMF_GetProp';
function AMFProp_GetType(var prop:AMFObjectProperty):AMFDataType;cdecl;external 'librtmp' name 'AMFProp_GetType';
procedure AMFProp_SetNumber(var prop:AMFObjectProperty; dval:double);cdecl;external 'librtmp' name 'AMFProp_SetNumber';
procedure AMFProp_SetBoolean(var prop:AMFObjectProperty; bflag:cint);cdecl;external 'librtmp' name 'AMFProp_SetBoolean';
procedure AMFProp_SetString(var prop:AMFObjectProperty; var str:AVal);cdecl;external 'librtmp' name 'AMFProp_SetString';
procedure AMFProp_SetObject(var prop:AMFObjectProperty; var obj:AMFObject);cdecl;external 'librtmp' name 'AMFProp_SetObject';
procedure AMFProp_GetName(var prop:AMFObjectProperty; var name:AVal);cdecl;external 'librtmp' name 'AMFProp_GetName';
procedure AMFProp_SetName(var prop:AMFObjectProperty; var name:AVal);cdecl;external 'librtmp' name 'AMFProp_SetName';
function AMFProp_GetNumber(var prop:AMFObjectProperty):double;cdecl;external 'librtmp' name 'AMFProp_GetNumber';
function AMFProp_GetBoolean(var prop:AMFObjectProperty):cint;cdecl;external 'librtmp' name 'AMFProp_GetBoolean';
procedure AMFProp_GetString(var prop:AMFObjectProperty; var str:AVal);cdecl;external 'librtmp' name 'AMFProp_GetString';
procedure AMFProp_GetObject(var prop:AMFObjectProperty; var obj:AMFObject);cdecl;external 'librtmp' name 'AMFProp_GetObject';
function AMFProp_IsValid(var prop:AMFObjectProperty):cint;cdecl;external 'librtmp' name 'AMFProp_IsValid';
function AMFProp_Encode(var prop:AMFObjectProperty; pBuffer:pcchar; pBufEnd:pcchar):pcchar;cdecl;external 'librtmp' name 'AMFProp_Encode';
function AMF3Prop_Decode(var prop:AMFObjectProperty; pBuffer:pcchar; nSize:cint; bDecodeName:cint):cint;cdecl;external 'librtmp' name 'AMF3Prop_Decode';
function AMFProp_Decode(var prop:AMFObjectProperty; pBuffer:pcchar; nSize:cint; bDecodeName:cint):cint;cdecl;external 'librtmp' name 'AMFProp_Decode';
procedure AMFProp_Dump(var prop:AMFObjectProperty);cdecl;external 'librtmp' name 'AMFProp_Dump';
procedure AMFProp_Reset(var prop:AMFObjectProperty);cdecl;external 'librtmp' name 'AMFProp_Reset';
procedure AMF3CD_AddProp(var cd:AMF3ClassDef; var prop:AVal);cdecl;external 'librtmp' name 'AMF3CD_AddProp';
function AMF3CD_GetProp(var cd:AMF3ClassDef; idx:cint):PAVal;cdecl;external 'librtmp' name 'AMF3CD_GetProp';

{RTMP Functions}
procedure RTMPPacket_Reset(var p:RTMPPacket);cdecl;external 'librtmp' name 'RTMPPacket_Reset';
procedure RTMPPacket_Dump(var p:RTMPPacket);cdecl;external 'librtmp' name 'RTMPPacket_Dump';
function RTMPPacket_Alloc(var p:RTMPPacket; nSize:cint):cint;cdecl;external 'librtmp' name 'RTMPPacket_Alloc';
procedure RTMPPacket_Free(var p:RTMPPacket);cdecl;external 'librtmp' name 'RTMPPacket_Free';
function RTMP_GetTime:uint32_t;cdecl;external 'librtmp' name 'RTMP_GetTime';
function RTMP_ParseURL(url:pcchar; var protocol:cint; var host:AVal; var port:cuint; var playpath:AVal; 
           var app:AVal):cint;cdecl;external 'librtmp' name 'RTMP_ParseURL';
procedure RTMP_ParsePlaypath(var input:AVal; var output:AVal);cdecl;external 'librtmp' name 'RTMP_ParsePlaypath';
procedure RTMP_SetBufferMS(var r:RTMP; size:cint);cdecl;external 'librtmp' name 'RTMP_SetBufferMS';
procedure RTMP_UpdateBufferMS(var r:RTMP);cdecl;external 'librtmp' name 'RTMP_UpdateBufferMS';
function RTMP_SetOpt(var r:RTMP; var opt:AVal; var arg:AVal):cint;cdecl;external 'librtmp' name 'RTMP_SetOpt';
function RTMP_SetupURL(var r:RTMP; url:pcchar):cint;cdecl;external 'librtmp' name 'RTMP_SetupURL';
procedure RTMP_SetupStream(var r:RTMP; protocol:cint; var hostname:AVal; port:cuint; var sockshost:AVal; 
            var playpath:AVal; var tcUrl:AVal; var swfUrl:AVal; var pageUrl:AVal; var app:AVal; 
            var auth:AVal; var swfSHA256Hash:AVal; swfSize:uint32_t; var flashVer:AVal; var subscribepath:AVal; 
            dStart:cint; dStop:cint; bLiveStream:cint; timeout:clong);cdecl;external 'librtmp' name 'RTMP_SetupStream';
function RTMP_Connect(var r:RTMP; var cp:RTMPPacket):cint;cdecl;external 'librtmp' name 'RTMP_Connect';
function RTMP_Connect0(var r:RTMP; var svc:sockaddr):cint;cdecl;external 'librtmp' name 'RTMP_Connect0';
function RTMP_Connect1(var r:RTMP; var cp:RTMPPacket):cint;cdecl;external 'librtmp' name 'RTMP_Connect1';
function RTMP_Serve(var r:RTMP):cint;cdecl;external 'librtmp' name 'RTMP_Serve';
function RTMP_ReadPacket(var r:RTMP; var packet:RTMPPacket):cint;cdecl;external 'librtmp' name 'RTMP_ReadPacket';
function RTMP_SendPacket(var r:RTMP; var packet:RTMPPacket; queue:cint):cint;cdecl;external 'librtmp' name 'RTMP_SendPacket';
function RTMP_SendChunk(var r:RTMP; var chunk:RTMPChunk):cint;cdecl;external 'librtmp' name 'RTMP_SendChunk';
function RTMP_IsConnected(var r:RTMP):cint;cdecl;external 'librtmp' name 'RTMP_IsConnected';
function RTMP_Socket(var r:RTMP):cint;cdecl;external 'librtmp' name 'RTMP_Socket';
function RTMP_IsTimedout(var r:RTMP):cint;cdecl;external 'librtmp' name 'RTMP_IsTimedout';
function RTMP_GetDuration(var r:RTMP):double;cdecl;external 'librtmp' name 'RTMP_GetDuration';
function RTMP_ToggleStream(var r:RTMP):cint;cdecl;external 'librtmp' name 'RTMP_ToggleStream';
function RTMP_ConnectStream(var r:RTMP; seekTime:cint):cint;cdecl;external 'librtmp' name 'RTMP_ConnectStream';
function RTMP_ReconnectStream(var r:RTMP; seekTime:cint):cint;cdecl;external 'librtmp' name 'RTMP_ReconnectStream';
procedure RTMP_DeleteStream(var r:RTMP);cdecl;external 'librtmp' name 'RTMP_DeleteStream';
function RTMP_GetNextMediaPacket(var r:RTMP; var packet:RTMPPacket):cint;cdecl;external 'librtmp' name 'RTMP_GetNextMediaPacket';
function RTMP_ClientPacket(var r:RTMP; var packet:RTMPPacket):cint;cdecl;external 'librtmp' name 'RTMP_ClientPacket';
procedure RTMP_Init(var r:RTMP);cdecl;external 'librtmp' name 'RTMP_Init';
procedure RTMP_Close(var r:RTMP);cdecl;external 'librtmp' name 'RTMP_Close';
function RTMP_Alloc:RTMP;cdecl;external 'librtmp' name 'RTMP_Alloc';
procedure RTMP_Free(var r:RTMP);cdecl;external 'librtmp' name 'RTMP_Free';
procedure RTMP_EnableWrite(var r:RTMP);cdecl;external 'librtmp' name 'RTMP_EnableWrite';
function RTMP_LibVersion:cint;cdecl;external 'librtmp' name 'RTMP_LibVersion';
procedure RTMP_UserInterrupt;cdecl;external 'librtmp' name 'RTMP_UserInterrupt';
function RTMP_SendCtrl(var r:RTMP; nType:cshort; nObject:cuint; nTime:cuint):cint;cdecl;external 'librtmp' name 'RTMP_SendCtrl';
function RTMP_SendPause(var r:RTMP; DoPause:cint; dTime:cint):cint;cdecl;external 'librtmp' name 'RTMP_SendPause';
function RTMP_Pause(var r:RTMP; DoPause:cint):cint;cdecl;external 'librtmp' name 'RTMP_Pause';
function RTMP_FindFirstMatchingProperty(var obj:AMFObject; var name:AVal; var p:AMFObjectProperty):cint;cdecl;external 'librtmp' name 'RTMP_FindFirstMatchingProperty';
function RTMPSockBuf_Fill(var sb:RTMPSockBuf):cint;cdecl;external 'librtmp' name 'RTMPSockBuf_Fill';
function RTMPSockBuf_Send(var sb:RTMPSockBuf; buf:pcchar; len:cint):cint;cdecl;external 'librtmp' name 'RTMPSockBuf_Send';
function RTMPSockBuf_Close(var sb:RTMPSockBuf):cint;cdecl;external 'librtmp' name 'RTMPSockBuf_Close';
function RTMP_SendCreateStream(var r:RTMP):cint;cdecl;external 'librtmp' name 'RTMP_SendCreateStream';
function RTMP_SendSeek(var r:RTMP; dTime:cint):cint;cdecl;external 'librtmp' name 'RTMP_SendSeek';
function RTMP_SendServerBW(var r:RTMP):cint;cdecl;external 'librtmp' name 'RTMP_SendServerBW';
function RTMP_SendClientBW(var r:RTMP):cint;cdecl;external 'librtmp' name 'RTMP_SendClientBW';
procedure RTMP_DropRequest(var r:RTMP; i:cint; freeit:cint);cdecl;external 'librtmp' name 'RTMP_DropRequest';
function RTMP_ReadData(var r:RTMP; buf:pcchar; size:cint):cint;cdecl;external 'librtmp' name 'RTMP_ReadData';
function RTMP_WriteData(var r:RTMP; buf:pcchar; size:cint):cint;cdecl;external 'librtmp' name 'RTMP_WriteData';
function RTMP_HashSWF(url:pcchar; var size:cuint; hash:pcuchar; age:cint):cint;cdecl;external 'librtmp' name 'RTMP_HashSWF';

implementation

end. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T09:15:00.787

根据文档，您需要致电

```
RTMP_Read() 
```

反复读取流。您将缓冲区传递给该函数，该函数将使用流的下一部分填充它。当函数返回 0 时，表示已读取整个流。

代码将是这样的：

```
procedure ReadStream(rtmp: RTMP; Stream: TStream);
var
  Buffer: array [0..16384-1] of Byte;//16kB buffer
  BytesRead: Integer;
begin
  while True do 
  begin
    BytesRead := RTMP_Read(rtmp, @Buffer[0], SizeOf(Buffer));
    if BytesRead=0 then
      exit;
    Stream.WriteBuffer(@Buffer[0], BytesRead);
  end; 
```

我正在查看的文档具有名为`RTMP_Read`. 但你的进口单位似乎叫它`RTMP_ReadData`。我不确定这种差异来自哪里。

我也不相信您使用的标题翻译。我会写`PByte`而不是，`pcchar`我会写`Integer`而不是`cint`。

# performance - 大型程序中的性能调优 VBA 代码

> ID：12815563
> 
> 赞同：1
> 
> 时间：2012-10-10T08:55:33.110
> 
> 标签：performance, debugging, vba

我被要求调整每次打开工作表时加载的特定函数的性能（因此重要的是它不会使事情变慢）。似乎使这个函数变慢的一件事是它对数据库（这是远程的）进行了长时间的调用，但也有很多其他的可能性。到目前为止，我一直在单步执行代码，当某些事情似乎需要很长时间时，将其记为调优的候选对象。

我想要一种更客观的方式来判断哪些电话正在减慢我的速度。搜索时间和 VBA 会产生很多结果，基本上相当于“编写一个计数器，并在临界区的任一侧启动和停止它”（通常使用显式调用的宏）。我想知道是否有办法（在调试器中）执行类似“跳到下一行，**并告诉我经过的时间**”之类的操作。

如果没有，有人可以建议一个合理的宏，我可以在“立即”窗口中使用它来获得我想要的东西吗？具体来说，我希望能够在一个更大的过程中对任意代码行进行计时（而不是一次整个过程，这是我通过谷歌找到的）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T09:54:32.973

您进一步搜索的关键字是寻找 VBA 的“Profiler”。我听说过 VB Watch 和 VBA Code Profiler System (VBACP) 以及 Stephen Bull 的 PerfMon，但除了后者，它们大多不是免费的。

到目前为止，对于我答案的官方部分，我在可能无用的建议方面提出了一些额外的建议：通过“人工测量”识别“慢”代码（运行一行并说：“哇，这需要永远”）在调试器肯定是有帮助的，然后你可以开始研究为什么它们很慢。如果您的远程数据库调用必须传输大量数据，它可能需要很长时间 - 在这种情况下，最好在两端为数据加上时间戳，并在获取数据之前询问数据库是否已修改数据。根据您编写数据的方式，将数据写入工作表可能会很慢 - 有时可以通过将数组写入范围而不是某种形式的迭代来改进。而且我可能不需要告诉你关于 ScreenUpdating 和 EnableEvents 等等？

# c# - c#、System.Data.Sqlite 和 Ñ 字符

> ID：12815577
> 
> 赞同：2
> 
> 时间：2012-10-10T08:56:27.837
> 
> 标签：c#, sqlite

我正在使用 Sqlite 来拥有一个本地数据库。我使用命令行工具创建数据库，并使用 sqlite admin 创建表。

我有一张表的信息，我有一个带有“Ñ”字符的寄存器。该寄存器由我在 sqlite admin 中执行的 sql 语句插入。

如果我在 sqlite admin 中进行选择，我可以看到字符“Ñ”是正确的，但是如果我使用实体框架和库 System.Data.Sqlite，我收到的字符串是“？” 或其他奇数字符（我曾尝试使用 UTF8、UTF7、ASCII、UTF32...），但在所有情况下我都会收到奇数字符。

如果在数据库中似乎一切都正确，我想知道为什么我会收到这个字符。System.Data.Sqlite 库可能有错误吗？

谢谢。大摩。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T09:15:55.567

好吧，我使用 sqlite spy，其他 sqlite 管理员，在这种情况下，字符显示为“？”，所以我更新了注册表，现在在这个管理员（sqlite spy）中它是正确的。

然后，我再次执行我的 C# 应用程序，现在一切正常，所以问题是 sqlite 管理员，当我使用 sql 语句时，如果字符串中有这种字符，则无法正常工作。

所以解决办法是找其他的sqlite管理员。例如，sqlite spy，在这种情况下可以正常工作。

谢谢。戴姆洛克。

# matlab - 带有交叉验证的 SVM 分类

> ID：12815581
> 
> 赞同：3
> 
> 时间：2012-10-10T08:56:52.020
> 
> 标签：matlab, classification, svm, bioinformatics

我是使用 Matlab 的新手，我正在尝试按照[生物信息学工具箱文档（具有交叉验证的 SVM 分类）](http://www.mathworks.com/help/bioinfo/ug/support-vector-machines-svm.html#bs3tbev-16)中的示例来处理分类问题。

但是，我无法理解第 9 步，它说：

> 设置一个函数，接受输入 z=[rbf_sigma,boxconstraint]，并返回 exp(z) 的交叉验证值。
> 
> 采用 exp(z) 的原因有两个：rbf_sigma 和 boxconstraint 必须为正。
> 
> 您应该查看大约呈指数间隔的点。此函数句柄计算参数的交叉验证

```
exp([rbf_sigma,boxconstraint]):
minfn = @(z)crossval('mcr',cdata,grp,'Predfun', ...
    @(xtrain,ytrain,xtest)crossfun(xtrain,ytrain,...
    xtest,exp(z(1)),exp(z(2))),'partition',c); 
```

我应该在这里实现什么功能？是`exp`还是`minfn`？如果您能给我本节的代码，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T19:12:34.707

*我想知道它说 exp([rbf_sigma,boxconstraint]) 是什么意思*

1.  rbf_sigma：支持向量机使用高斯内核，rbf_sigma 设置内核的标准偏差（~size）。为了理解内核是如何工作的，SVM 将内核放在每个样本周围（这样每个样本周围都有一个高斯分布）。然后为每个类别/类型的样本添加（求和）内核。在每一点上，总和较高的类型将是“赢家”。例如，如果类型 A 在点 X 处这些内核的总和较高，那么如果您在点 X 有一个新的数据要分类，它将被分类为类型 A。（还有其他配置参数可能会改变实际阈值，其中选择了一个类别而不是另一个类别）

![您可以通过将红色样本上的高斯核相加来了解如何](../Images/39b490056b0b214d78ba5066bb086927.png)

图。从你给我们的网页分析这个图。您可以通过将红色样本“sumA”和绿色样本“sumB”上的高斯核相加来了解如何；在图的中心部分，sumA>sumB 是合乎逻辑的。在图像的外部，sumB>sumA 也是合乎逻辑的。

2.  boxconstraint：这是对未分类数据的成本/惩罚。在分类器的训练阶段，您使用训练数据来调整 SVM 参数，训练算法使用误差函数来决定如何以迭代方式优化 SVM 参数。错误分类样本的成本与它离正确分类的边界的距离成正比。在我附上边界的图中是内蓝色圆周。

考虑到 BGreene 的指示以及我对本教程的理解：

1.  在本教程中，他们建议尝试以指数方式分开的 rbf_sigma 和 boxconstraint 的值。这意味着您应该比较像 {0.2, 2, 20, ...} 之类的值（注意这是 {2*10^(i-2), i=1,2,3,...}），并且不像 {0.2, 0.3, 0.4, 0.5} （线性分开）。他们建议首先尝试广泛的值。您可以稍后从您之前获得的第一个优化中进一步优化。
2.  命令“[searchmin fval] = fminsearch(minfn,randn(2,1),opts)”将为您返回 rbf_sigma 和 boxconstraint 的最佳值。可能您必须使用 exp(z)，因为它会影响 fminsearch 在搜索最佳值期间如何递增 z(1) 和 z(2) 的值。我想当您将 exp(z(1)) 放入 @minfn 的定义中时，fminsearch 将采取“指数”的大步骤。
3.  在机器学习中，始终尝试理解数据中存在三个子集：训练数据、交叉验证数据和测试数据。训练集用于针对 rbf_sigma 和 boxconstraint 的 EACH 值优化 SVM 分类器的参数。然后使用交叉验证集来选择参数rbf_sigma和boxconstraint的最优值。最后使用测试数据来了解分类器的性能（分类器的效率取决于测试集）。
4.  因此，如果您从 10000 个样本开始，您可以将数据划分为训练（50%）、交叉验证（25%）、测试（25%）。这样您将随机抽取 5000 个样本作为训练集，然后从剩余的 5000 个样本中抽取 2500 个样本作为交叉验证集，其余样本（即 2500 个）将被分离用于测试集。

我希望我能澄清你的疑惑。顺便说一句，如果您对分类器和机器学习算法的参数优化感兴趣，我强烈建议您学习这个免费课程 -> www.ml-class.org（真的很棒）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T09:28:48.780

您需要实现一个名为`crossfun`（参见示例）的函数。函数句柄`minfn`被传递`fminsearch`给被最小化。 `exp([rbf_sigma,boxconstraint])`是被优化以最小化分类错误的数量。

此函数句柄中嵌套了许多函数： -`crossval`使用分区 c 基于交叉验证产生分类错误 - `crossfun`- 使用 SVM 对数据进行分类 - `fminsearch`- 优化 SVM 超参数以最小化分类错误

希望这可以帮助

# ruby-on-rails - 关系 Ruby on Rails

> ID：12815583
> 
> 赞同：0
> 
> 时间：2012-10-10T08:56:53.947
> 
> 标签：ruby-on-rails

这是我的问题（我是初学者）：我有一个包含两个表的应用程序，用户和报告在每个用户页面上属于用户的报告，我已经成功显示了他们的报告。我不知道该怎么做是在主页上显示

“撰写该报告的用户”的“报告名称”

有人可以帮忙吗？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:00:49.467

如果

```
User 
  has_may :reports

Report
  belongs_to :user 
```

然后你可以找到任何用户的报告（不管页面）

```
@user.reports #until u have the user object 
```

请参阅[http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)了解更多信息。

要显示每个用户的最后一个报告，请执行

```
@users = User.includes(:reports) 
```

在视野中

```
@users.each do |user|
  = user.name
  = user.report.last.name 
```

# android - 当我们在android中触摸屏幕时如何添加布局？

> ID：12815590
> 
> 赞同：0
> 
> 时间：2012-10-10T08:57:31.740
> 
> 标签：android, android-layout, touch

我的要求是，我需要在用户触摸屏幕的任何地方显示我的布局（使用`EditText`和）。`Textview`所以我需要做类似下面的事情。

1.  如何使用一个`TextView`和编写自定义布局`EditText`
2.  显示 mylayout 用户触摸屏幕的次数。
3.  将布局参数设置在触摸区域附近。

..

```
public class MyLayout extends LinearLayout {
 private TextView myTextView;
 private EditText editName;
public MyLayout(Context context) {
    super(context);

    // TODO Auto-generated constructor stub
} 
```

}

MyActivity.java（我需要显示我的布局）

```
public class MyActivity extends Activity{

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
     setContentView(R.layout.main);
     }

  @Override
public boolean onTouchEvent(MotionEvent event) 
    {
       // here i need to display my layout
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:15:17.200

在 onTouch 方法中...执行以下操作..

1.  通过 id 获取您的布局，例如

    `RelativeLayout relativeLayout = (RelativeLayout) findViewById(R.id.relativelayout)`

2.  创造新的`edittext`和任何你想要的。

3.  将这些添加到`relativeLayout`.

希望这可以清除。

# python - 删除文本文件中的重复行 - 除非它包含“{”或“}”

> ID：12815591
> 
> 赞同：0
> 
> 时间：2012-10-10T08:57:40.413
> 
> 标签：python

我有一个非常大的文本文件，其内容如下：

```
@INBOOK{Ackermann1999-b, 
  author = {Ackermann, K.-F. and Ackermann, K.-F. and Ackermann, K.-F. and Ackermann, 
        K.-F. and Ackermann, K.-F. and Ackermann, K.-F. and Ackermann, K.-F. 
        and Ackermann, K.-F. and Ackermann, K.-F. and Ackermann, K.-F. and 
        Ackermann, K.-F. and Ackermann, K.-F. and Ackermann, K.-F. and Ackermann, 
        K.-F. and Ackermann, K.-F. and Ackermann, K.-F. and Ackermann, K.-F. 
        and Ackermann, K.-F. and Ackermann, K.-F. and Ackermann, K.-F. and 
        Ackermann, K.-F. and Ackermann, K.-F. and Ackermann, K.-F. and Ackermann, 
        K.-F. and Ackermann, K.-F. and Ackermann, K.-F. and Ackermann, K.-F. 
        and Ackermann, K.-F. and Ackermann, K.-F. and Ackermann, K.-F. and 
        Ackermann, K.-F. and Ackermann, K.-F. and Ackermann, K.-F. and Ackermann}, 
  year = {1980}, 
  timestamp = {1995-12-02} 
} 
```

我想删除重复的行，除了这些包含括号 { 或 } 的行。结果应如下所示：

```
@INBOOK{Ackermann1999-b, 
  author = {Ackermann, K.-F. and Ackermann, K.-F. and Ackermann, K.-F. and Ackermann, 
        Ackermann, K.-F. and Ackermann, K.-F. and Ackermann, K.-F. and Ackermann}, 
  year = {1980}, 
  timestamp = {1995-12-02} 
} 
```

感谢Vinay Sajip，我遇到了这个Python-Skript：

```
lines_seen = set() # holds lines already seen 
outfile = open("literatur_clean.txt", "w") 
for line in open("literatur_dupl.txt", "r"): 
    if line not in lines_seen: # not a duplicate 
        outfile.write(line) 
        lines_seen.add(line) 
outfile.close() 
```

但它也会删除带有右括号 } 的行和具有相同作者数据的行。因此我需要括号的条件。

有人可以指出我添加这个条件吗？

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T08:59:26.343

```
if ('{' in line or '}' in line) and line not in lines_seen: # not a duplicate 
```

# android - 谷歌播放应用内

> ID：12815592
> 
> 赞同：0
> 
> 时间：2012-10-10T08:57:41.117
> 
> 标签：android, in-app-purchase, google-play

我已经成功实现了谷歌播放......并且它工作正常......但是当我在使用后关闭我的应用程序......并且在关闭应用程序几分钟后......给出错误“应用程序已意外停止” .....在日志猫它给出的错误是在BillingService.java

10-10 13:38:38.739：E/AndroidRuntime(3586)：**引起：java.lang.NullPointerException**

10-10 13:38:38.739: E/AndroidRuntime(3586): 在。**BillingService.handleCommand(BillingService.java:372)**

10-10 13:38:38.739: E/AndroidRuntime(3586): 在。**BillingService.onStart(BillingService.java:362)**

10-10 13:38:38.739: E/AndroidRuntime(3586): 在 android.app.Service.onStartCommand(Service.java:438)

我的代码是....

```
public void onStart(Intent intent, int startId) {

    handleCommand(intent, startId);------>362
}

public void handleCommand(Intent intent, int startId) {
    String action = intent.getAction();------>line 732
    if (Consts.DEBUG) {
        Log.i(TAG, "handleCommand() action: " + action);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T09:07:37.887

我认为您必须专门退出该应用程序。退出应用程序后检查任务管理器，如果它仍然在正在运行的应用程序部分中，那么您必须结束该进程。

您可以检查以下代码：

```
// This you have to insert inside the exit button click event
    Intent intent = new Intent(Intent.ACTION_MAIN);
                    intent.addCategory(Intent.CATEGORY_HOME);
                    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    startActivity(intent);
                    onQuitPressed(); 

//This is the onQuitPressed method

//to remove application from task manager
    public void onQuitPressed() {

        int pid = android.os.Process.myPid();
        android.os.Process.killProcess(pid);
    } 
```

# vb.net - 用于报告的 dll 中的 FileIOPermission 错误

> ID：12815596
> 
> 赞同：0
> 
> 时间：2012-10-10T08:58:10.150
> 
> 标签：vb.net, winforms, visual-studio-2010, .net-4.0, report

我尝试了多种方法这是我最新的方法，我试图不触发错误但无济于事我仍然收到 FileIOPermission 错误

完整错误是

**请求“System.Security.Permissions.FileIOPermission、mscorlib、Version=4.0.0.0、Culture=neutral、PublicKeyToken=b77a5c561934e089”类型的权限失败**

我正在使用的代码如下

```
 Dim permissions As New Security.PermissionSet(Security.Permissions.PermissionState.None)
    permissions.AddPermission(New Security.Permissions.FileIOPermission(Security.Permissions.PermissionState.Unrestricted))
    permissions.AddPermission(New Security.Permissions.SecurityPermission(Security.Permissions.SecurityPermissionFlag.Execution))
    permissions.AddPermission(New Security.Permissions.SecurityPermission(Security.Permissions.SecurityPermissionFlag.Assertion))
    permissions.Assert()
    ReportViewer1.LocalReport.SetBasePermissionsForSandboxAppDomain(permissions)

    Dim asm As Reflection.Assembly = Reflection.Assembly.Load("ReportingServiceUtils, Version=1.0.0.0, Culture=neutral, PublicKeyToken=cca1b177d76f2036")
    Dim asm_name As Reflection.AssemblyName = asm.GetName()
    ReportViewer1.LocalReport.AddFullTrustModuleInSandboxAppDomain(New Security.Policy.StrongName(New Security.Permissions.StrongNamePublicKeyBlob(asm_name.GetPublicKeyToken()), asm_name.Name, asm_name.Version)) 
```

dll中使用的代码如下

```
Public Sub Add(ByVal group As String, ByVal groupCurrentPageNumber As String)
    Try
        If _GroupWithRunningMaxPageNumber.ContainsKey(group) Then
            _GroupWithRunningMaxPageNumber(group) = groupCurrentPageNumber
        Else
            If _GroupWithRunningMaxPageNumber.Count = 0 Then
                Dim fileName = "C:\Working Folder\ms-dot-net-report-viewer-group-pagenation\ReportingServiceUtils\test.xml"
                sw = New System.IO.StreamWriter(fileName, False)
                sw.WriteLine("<root>")
                sw.WriteLine("</root>")
                sw.Close()
                sw.Dispose()
            End If
            _GroupWithRunningMaxPageNumber.Add(group, groupCurrentPageNumber)
            sw.WriteLine("<Group  current='" & group & "' lastPage='" & CStr(groupCurrentPageNumber) & "'/>", 1, 1)
            sw.Close()
        End If
    Catch ex As Exception
        Throw ex
    End Try
End Sub 
```

有没有人看到下面的代码有什么问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:00:01.050

我找到了解决方案，当我找到的时候很有趣。下面的 1 行解决了无法从报告中访问文件的问题。

`Dim auth As New System.Security.Permissions.FileIOPermission( System.Security.Permissions.PermissionState.Unrestricted)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-13T08:18:03.913

使用`PermissionSet`

```
 var sec = new System.Security.PermissionSet(System.Security.Permissions.PermissionState.Unrestricted);

      ReportViewer1.LocalReport.SetBasePermissionsForSandboxAppDomain(sec); 
```

您可以轻松地从转换`C#`为`VB.net`

# php - 加载xml文件时如何避免php破坏变音符号？

> ID：12815598
> 
> 赞同：1
> 
> 时间：2012-10-10T08:58:11.367
> 
> 标签：php, xml-parsing

我有一个用 php 解析的 xml，其中包含一些变音符号。每个包含字符串的节点都将字符串包裹在 cdata 标记中，但我的问题在解析 xml 之前就开始了：当我加载文件时（我也尝试使用 file_get_contests 打印出文件的内容，结果相同），元音变音字符被破坏，例如 ü 变为 Ã¼。运行 htmlentities() 是徒劳的，因为此时字符已经损坏。xml 编码是 utf-8，所以我不知道还能做些什么来避免这个问题。任何人都可以帮助我吗？

编辑：xml 示例“locations.xml”：

```
<?xml  version="1.0" encoding="utf-8"?>
<locations>
  <location>
    <id>481</id>
    <city><![CDATA[Zürich]]></city>
  </location>
</locations> 
```

php代码：

```
function parseLocations(){
    $xml = new DOMDocument();
$xml->load('locations.xml');
$xml->preserveWhiteSpace = false;
$data = array();
    $locations = $xml->childNodes->item(0);
    for($i=0; $i<$locations->childNodes->length; $i++){
        $location = $locations->childNodes->item($i);
        if($location->nodeName=="location"){
            $tmp = parseVenue($location);
            $data[] = $tmp;
        }
    }
    echo var_export($data, true); 
}

function parseVenue($location){
    //I need to exclude some of the nodes
    $exclude = array('#text'); 
    $data = array();
    for($i=0; $i<$location->childNodes->length; $i++){
        $tag = $location->childNodes->item($i);
        if(!in_array($tag->nodeName, $exclude)){
            $data[$tag->nodeName] = $tag->nodeValue;
        }

    }
    return $data;
} 
```

回显输出：

```
array ( 0 => array ( 'id' => '481', 'city' => 'ZÃ¼rich'), ) 
```

# shell - 在 shell 脚本中杀死后台进程

> ID：12815600
> 
> 赞同：5
> 
> 时间：2012-10-10T08:58:14.890
> 
> 标签：shell, process, busybox

我有一个启动后台进程的脚本。

```
#!/bin/sh

./process1.sh &
./process2.sh & 
```

我需要使用单独的脚本来终止这些进程。这是我所做的：

```
#!/bin/sh
# the kill.sh

pid=$(ps | grep './process1.sh' |grep -v grep| awk '{print $1}')
kill -9 $pid 
```

提问时间：

1.  当调用 kill.sh 时，进程会停止。但我得到了消息

    “sh：你需要指定要杀死的人”。这是为什么？

2.  在我使用所描述的脚本终止进程后，它不会立即停止。有一段时间我在屏幕上看到输出，好像进程仍在运行一样。为什么？

3.  什么是杀死进程的替代解决方案？

值得一提的是，我正在使用busybox，我的实用程序选择有限。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T09:08:50.243

您可以将进程 ID 存储在一个临时文件中，如下所示：

```
#!/bin/sh

./process1.sh &
echo $! > /tmp/process1.pid
./process2.sh &
echo $! > /tmp/process2.pid 
```

然后用你的脚本删除它。`$!`返回最后执行的进程的 PID。

```
kill -9 `cat /tmp/process*.pid`
rm /tmp/process*.pid 
```

确保`process*.pid`在相应脚本完成后删除文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T09:07:38.807

因为您的`kill`命令失败了，因为`pid`它是空的。

```
pid=$(ps | grep './process1.sh' |grep -v grep| awk '{print $1}') 
```

这不会给你你想要的 pid。当你在后台启动一个进程时，它会在一个新的 shell 中执行，你不会`process.sh`在`ps`输出中看到 。

您可以做的是在启动后台进程并终止它们时保存 PID：

```
./process1.sh &
pid1=$!  # Save the previously started background's PID
./process2.sh &
pid2=$!  # Save the previously started background's PID

echo $pid1 " " $pid2 > /tmp/killfile 
```

然后从此文件中获取 PID 并将其传递给`kill`.

# c# - 当用户绘制的控件大小增加时，新区域不会重新绘制

> ID：12815605
> 
> 赞同：6
> 
> 时间：2012-10-10T08:58:35.223
> 
> 标签：c#, .net, winforms, drawing

我想我在这里遗漏了一些微不足道的东西。我直接从`Control`. 我正在覆盖`OnPaint`并绘制矩形 ( `e.Graphics.DrawRectangle`) 和其中的文本 ( `e.Graphics.DrawString`)。我没有覆盖任何其他成员。

当控件调整为较小的尺寸时，它会很好地绘制自己，但是当它调整为较大的尺寸时，新区域不会正确地重新绘制。一旦我再次将其调整为较小的尺寸，即使是一个像素，一切都会正确地重新绘制。

`OnPaint`被正确调用（正确`PaintEventArgs.ClipRectangle`设置为新区域），但无论如何都不会绘制新区域（出现伪影）。

我错过了什么？

**编辑：**

代码：

```
protected override void OnPaint(PaintEventArgs e)
{
    // Adjust control's height based on current width, to fit current text:

    base.Height = _GetFittingHeight(e.Graphics, base.Width);

    // Draw frame (if available):

    if (FrameThickness != 0)
    {
        e.Graphics.DrawRectangle(new Pen(FrameColor, FrameThickness),
            FrameThickness / 2, FrameThickness / 2, base.Width - FrameThickness, base.Height - FrameThickness);
    }

    // Draw string:

    e.Graphics.DrawString(base.Text, base.Font, new SolidBrush(base.ForeColor), new RectangleF(0, 0, base.Width, base.Height));
}

private int _GetFittingHeight(Graphics graphics, int width)
{
    return (int)Math.Ceiling(graphics.MeasureString(base.Text, base.Font, width).Height);
} 
```

![怎么回事？](../Images/3c8ff12e38deddc2e214731d8aa18119.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-10T11:29:27.670

尝试在您的构造函数中添加它：

```
public MyControl() {
  this.ResizeRedraw = true;
  this.DoubleBuffered = true;
} 
```

并在您的绘画事件中，清除上一张图纸：

```
protected override void OnPaint(PaintEventArgs e) {
  e.Graphics.Clear(SystemColors.Control);
  // yada-yada-yada
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-09T20:29:28.733

虽然`ResizeRedraw`会起作用，但它会强制整个控件为每个调整大小事件重新绘制，而不是只绘制由调整大小显示的区域。这可能是可取的，也可能不是可取的。

OP 遇到的问题是由于旧矩形没有失效造成的；只有显露的区域会被重新粉刷，而旧的图形会留在原来的位置。要更正此问题，请检测矩形的大小是否垂直或水平增加，并使矩形的适当边缘无效。

您将如何具体处理这将取决于您的实施。您需要有一些东西可以擦除旧的矩形边缘，并且您必须调用`Invalidate`包含旧矩形边缘的区域。让它正常工作可能有点复杂，这取决于你在做什么，`ResizeRedraw`如果性能差异可以忽略不计，使用起来可能会简单得多。

例如，在绘制边框时，您可以针对此问题执行以下操作。

```
// member variable; should set to initial size in constructor
// (side note: should try to remember to give your controls a default non-zero size)
Size mLastSize;
int borderSize = 1; // some border size

...

// then put something like this in the resize event of your control
var diff = Size - mLastSize;
var wider = diff.Width > 0;
var taller = diff.Height > 0;

if (wider)
   Invalidate(new Rectangle(
      mLastSize.Width - borderSize, // x; some distance into the old area (here border)
      0,                            // y; whole height since wider
      borderSize,                   // width; size of the area (here border)
      Height                        // height; all of it since wider
   ));

if (taller)
   Invalidate(new Rectangle(
      0,                              // x; whole width since taller
      mLastSize.Height - borderSize,  // y; some distance into the old area
      Width,                          // width; all of it since taller
      borderSize                      // height; size of the area (here border)
   ));

mLastSize = Size; 
```

# grails - Grails ClassNotFoundException com.google.common.collect.Maps

> ID：12815608
> 
> 赞同：1
> 
> 时间：2012-10-10T08:58:46.300
> 
> 标签：grails, classnotfoundexception

我需要一些帮助，我正在尝试使用 Google Analytics API 制作控制器，但使用的是：

```
statsController.groovy
/**************************************************************/

import com.google.gdata.client.analytics.AnalyticsService

class StatsController {

 def myService

 def stats(){

   myService = new AnalyticsService("example-App");
 }

}

/************************************************************/ 
```

错误信息：

> 处理请求时发生 ClassNotFoundException：[...] com.google.common.collect.Maps

我尝试将“gdata.analytics*.jar”、“google-collect-1.0.jar”、“guava.jar”和“jsr305.jar”添加到构建路径，但没有结果，错误总是说我描述或处理请求时发生 NotDefClassError：[...] com.google.gdata.client.analytics.AnalyticsService。

我需要解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:36:22.953

在 grails 中 JAR 的处理非常容易。如果您不使用 maven 之类的东西，您只需将 JAR 复制到 grails 应用程序根目录中的 lib 文件夹中即可。试着把它们放在那里，看看它是否能解决问题。

进一步：您使用什么 IDE？例如，IntelliJ 可以立即识别 lib 文件夹中的 JAR。所以你应该已经在你的 IDE 中看到了效果。

# opencv - Vec3b 不接受三个参数？

> ID：12815609
> 
> 赞同：3
> 
> 时间：2012-10-10T08:58:46.593
> 
> 标签：opencv

我使用类来创建一个函数。该函数必须在提供的图像中找到选定的颜色。所以我这样做是为了让函数采用 Vec3b 值，因为它是我们正在谈论的 RGB 值。

```
class colorcompare
{
private:
int threshold;
Vec3b color;

void setcolor(Vec3b);
Mat process(Mat&);
void setthresh(const int);
int getdist(Vec3b);
};

void colorcompare::setcolor(Vec3b colr)
{
color = colr;
}

int _tmain(int argc, _TCHAR* argv[])
{

colorcompare cc1;
Mat image;

image = imread("c:\\car2.jpg", -1);

cc1.setcolor(19,69,139); //This is where im getting error
cc1.setthresh(100);
namedWindow("meh");

imshow("meh", cc1.process(image));
waitKey(0);

return 0;
} 
```

现在我得到的错误是：`'colorcompare::setcolor' : function does not take 3 arguments`

我知道 vec3b 是 3 个值的向量，所以换句话说，我可以访问 vec3b 的各个值作为颜色 [0]、颜色 [1] 和颜色 [2]。

而且我知道我可以在上面的函数中这样定义它，但是 vec3b 不应该能够取 3 个值吗？就像我在代码中所做的那样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T01:26:54.760

经典错误：**函数需要一个`cv::Vec3b`对象，而不是 3 个`int`变量**。

如果您想要单行解决方案，请尝试以下操作：

```
cc1.setcolor(cv::Vec3b(19,69,139)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T09:01:11.927

您将 setColor 定义为将 Vec3b 作为参数，因此您应该给它一个 Vec3b：

```
cv::Vec3b color(19,69,139); // or cv::Vec3b color; color[0]=19, ...
cc1.setColor(color); 
```

# android - 是否可以自定义 android 的相机裁剪意图视图？

> ID：12815610
> 
> 赞同：0
> 
> 时间：2012-10-10T08:58:49.223
> 
> 标签：android, camera

是否可以自定义 android 的相机裁剪意图视图？如何创建自定义视图，如此[链接](https://stackoverflow.com/questions/7817236/how-do-you-make-a-resizable-rectangle-for-cropping-images-in-android)中的图像？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T09:27:08.027

尝试这个：

```
Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
intent.putExtra("crop", "true"); 
```

# abap - 用户相关的 BAdI 实施。如何？

> ID：12815613
> 
> 赞同：1
> 
> 时间：2012-10-10T08:59:01.593
> 
> 标签：abap, badi

有什么方法可以创建依赖于用户的 BAdI 实现吗？我的意思是，BAdI 有不同的实现，这些实现取决于登录的用户和调用特定事务的用户。

其他场景是不为该用户调用某些实现并为其他用户调用。有可能吗？

现在我正在使用简单的检查

```
IF sy-uname = 'username'. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T09:36:48.100

新的 BAdI 允许`GET BADI`调用具有一个或多个`FILTERS`参数，这些参数可以在实现定义中用于选择不同的实现类。但是这些过滤器参数必须由调用BAdI的代码提供。当标准代码没有提供用户名作为过滤参数时，就无法根据用户名选择实现类。

因此，当您想要为不同的用户提供不同的逻辑时，您需要在您的实现代码中执行此操作。但是使用用户名来决定做什么可能不是最可维护的架构。

我想 BAdI 应该对特定用户表现不同的原因是因为该用户在公司有一些特殊的工作。当担任这个职位的人发生变化时，或者当他让一两个人帮助他们时，或者当他只是请病假而其他人必须做他的工作时，你会怎么做？您想在发生这种情况时传输程序更改吗？但还有其他选择：

*   用户组的不同行为。您可以从数据库表 usr02（字段 CLASS）中读取用户组
*   权限不同的行为。做一个`AUTHORITY-CHECK`，并根据成功使 BAdI 表现不同。
*   用户参数的不同行为。要在程序中读取用户参数，请使用`GET PARAMETER ID`. 用户的参数可以由管理员在事务 SU03 中设置，也可以由用户自己通过事务 SU3 设置（当他们有权这样做时）或以编程方式使用`SET PARAMETER ID`.

# java - 在webapp中优雅地关闭ExecutorService？

> ID：12815614
> 
> 赞同：23
> 
> 时间：2012-10-10T08:59:02.947
> 
> 标签：java, multithreading, tomcat6, executorservice

在我的 webapp 中，我创建了一个`ExecutorService`使用固定大小的 ThreadPool 的服务。我`ExecutorService`在整个应用程序生命周期中重复使用相同的内容。

```
private static ExecutorService pool = Executors.newFixedThreadPool(8); 
```

一切都在 Tomcat 中运行，这在关闭时给了我以下错误：

```
appears to have started a thread named [pool-1-thread-1] but has failed to stop it. This is very likely to create a memory leak. 
```

我确实意识到在关闭 tomcat 之前我需要关闭 ExecutorService 。Soms SO线程已经谈到了这个，但我找不到一个干净的方法来处理这个。

我应该在[优雅关闭线程和执行](https://stackoverflow.com/questions/3332832/graceful-shutdown-of-threads-and-executor)`ShutdownHook`程序中使用建议的@Tim-bender吗？或者我应该改用 CachedThreadPool 吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-10T09:02:03.677

关闭挂钩在 Tomcat 中不是一个好方法，因为：

*   它将太晚关闭池（关闭时），Tomcat 已经警告您未关闭的资源

*   您实际上想在取消部署应用程序时关闭该池，以便重新部署工作（否则每个应用程序将创建新池并且它们都将仅在完全关闭时关闭）

*   关闭线程池可能需要一些时间（见下文），关闭钩子应该尽可能快

更好的地方是[`ServletContextListener.contextDestroyed()`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html#contextDestroyed%28javax.servlet.ServletContextEvent%29)。请记住，您必须同时`shutdownNow()`使用池（取消运行和拒绝新任务）并`awaitTermination()`等待已经运行的任务完成并停止所有线程。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-10T09:14:12.733

除了 Tomasz 建议的内容之外，您还可以使用[CachedThreadPool](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executors.html#newCachedThreadPool%28%29)

> **六十秒内未使用的线程将被终止**并从缓存中删除。因此，保持空闲足够长时间的池不会消耗任何资源

所以一个很好的解决方案是`CachedThreadPool`在`ServletContextListener.contextDestroyed()`.

# sharepoint - CAML 过滤器从列表中获取当前月份？

> ID：12815623
> 
> 赞同：1
> 
> 时间：2012-10-10T08:59:56.327
> 
> 标签：sharepoint, caml

在 SharePoint 2010 中，我需要根据条件从列表中获取项目。考虑到其中一个字段是 DateTime 类型的“日期”，条件是：

获取当前月份数据。

如何使用 CAML 查询根据此条件过滤列表项？

作者：拉吉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T09:07:45.420

使用[SPUtility.CreateISO8601DateTimeFromSystemDateTime](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.utilities.sputility.createiso8601datetimefromsystemdatetime.aspx)创建相关的日期时间字符串

```
DateTime firstDay = new DateTime(DateTime.Now.Year, DateTime.Now.Month, 1);
Sting stringQuery =
String.Format(@"<And>
                  <Geq>
                   <FieldRef Name='Date' />
                   <Value Type='DateTime'>{0}</Value>
                 </Geq>
                 <Leq>
                  <FieldRef Name='Date' />
                  <Value Type='DateTime'>{1}</Value>
                 </Leq>
                </And>", 
                SPUtility.CreateISO8601DateTimeFromSystemDateTime(firstDay),
                SPUtility.CreateISO8601DateTimeFromSystemDateTime(firstDay .AddMonths(1)));
SPQuery query = new SPQuery(stringQuery); 
```

# android - 带有粗体样式的字符串匹配字符不会被搜索字符串替换

> ID：12815627
> 
> 赞同：2
> 
> 时间：2012-10-10T09:00:08.093
> 
> 标签：android, textview

我有一个搜索字符串，我需要将搜索字符串字符替换为具有粗体样式的不同 textview 字符串。下面可能代码：

![加载数组的第一个屏幕][1] ![在数组中搜索字符串][2] ![用搜索字符串替换所有字符串 textview][3]

我不想替换所有 textview 字符串，因为我只希望从不同 textview 字符串的位置加粗特定字符。

![在此处输入图像描述][4]

我希望这种格式替换粗体样式。

字符串 strlottery="17659";

```
TextView txtS = (TextView) findViewById(R.id.textView5);
TextView txtT = (TextView)findViewById(R.id.textView6);
 TextView txt1 = (TextView) findViewById(R.id.textView9);
TextView txt2 = (TextView) findViewById(R.id.textView13);
TextView txt3 = (TextView) findViewById(R.id.textView17);

String str=strlottery.replaceAll("1", "<font size=\"16\" color=\"red\"><b>"+"1"+"</b><</font>");                       
Log.v("Search", str);
Spanned text = Html.fromHtml(str);
txtf.setText(text);
txtS.setText(text);
txtT.setText(text);
txt1.setText(text);
txt2.setText(text);
txt3.setText(text); 
```

这是我的搜索字符串，我想在数组列表中搜索这个字符串，然后我想在进入数组列表时加粗这些字符。ArrayList 字符串为 18758,13660,52798,16514,70679。

但这是用匹配字符粗体样式的 17659 字符串替换所有 Textview 字符串。1879 搜索字符串这是替换旧字符串，但我不希望这种类型替换。我只希望以粗体样式更改特定位置字符

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T09:03:49.760

以下是执行此操作的方法..定义文本的开始和结束并对部分文本执行操作.....干杯!!!!!!!!!

```
TextView myText = (TextView) findViewById(R.id.scoreboardtitle);
    SpannableString text = new SpannableString("Top Scores");  
    // make "Lorem" (characters 0 to 5) red  
    text.setSpan(new ForegroundColorSpan(Color.RED), 0, 4, 0);
    text.setSpan(new ForegroundColorSpan(Color.rgb(0, 255, 0)), 4, text.length(), 0);
    text.setSpan(new StyleSpan(android.graphics.Typeface.BOLD), 0, 1, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);

    myText.setText(text, BufferType.SPANNABLE); 
```

# awk - 尝试使用 awk 进行报告

> ID：12815629
> 
> 赞同：2
> 
> 时间：2012-10-10T09:00:14.380
> 
> 标签：awk

我有一份与以下内容相同的报告：

```
gold     1      1986    USA                 Americal Eagle
gold     1      1908    Austria-Hungary     Franz Josef 100 Korona
silver  10      1981    USA             Ingot
gold     1      1984    Switzerland         ingot
gold     1      1979    RSA                 Krugerrand
gold     0.5    1981    RSA                 Krugerrand
gold     0.1    1986    PRC                 Panda
silver   1      1986    USA                 Liberty dollar
gold     0.25   1986    USA                 Liberty 5-collar piece
silver   0.5    1986    USA                 Liberty 50-cent piece
silver   1      1987    USA                 Constitution dollar
gold     0.25   1987    USA                 Constitution 5-dollar piece
gold     1      1988    Canada              Maple Leaf 
```

我想提取如下报告：

```
Gold pieces:                    9
Weight of gold pieces:           6.10
Value of gold pieces:       9729.50 
```

这是我制作的代码：

```
BEGIN{}
$1 ~/^gold$/
{
  goldWeight += $2
  ++goldCounter
}
END{
  printf "Gold Pieces:\t\t%d\n" , goldCounter
  printf "Weight of gold pieces:\t\t%1.2f\n" , goldWeight
  printf "Value of gold pieces:\t\t%1.2f\n" , goldWeight*1771.00
} 
```

该代码不起作用。我的问题在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T09:05:40.023

您需要模式后的第一个括号

```
$1 ~/^gold$/ {
  goldWeight += $2
  ++goldCounter
} 
```

然后大括号中的位适用于模式。否则它适用于每一行。

# jquery - 同一页面上的多个 jquery 按钮行为异常

> ID：12815635
> 
> 赞同：0
> 
> 时间：2012-10-10T09:00:24.970
> 
> 标签：jquery

我正在尝试针对表格中的每一行放置一个 jquery 模态弹出按钮，这意味着一个页面上最多可以有 25 个按钮 - 每个按钮需要弹出一个对话框，其中包含根据行的 id 从数据库中提取的不同内容。

如果按钮在循环外的页面上显示一次，我可以让按钮工作并正确显示内容，但是一旦我将它放入循环中，它就会开始表现得很奇怪。当我单击任何按钮时，它会显示包含动态内容的弹出窗口，但单击退出会循环循环并显示所有动态内容，直到显示所有行。

例如，如果我有 4 行，当我单击按钮一时，我会弹出一个包含第一行内容的弹出窗口，但如果我单击退出，则会显示第二行的内容，依此类推，直到它们全部显示出来，这显然是不正确的.

我怎样才能得到它，所以它只显示一次弹出窗口并且只显示相应的 id 而不是全部？

```
<script>
// increase the default animation speed to exaggerate the effect
$.fx.speeds._default = 100000;
$(function() {
    $( ".jui-dialog" ).dialog({
        autoOpen: false,
    modal: "true"
    });

    $( ".button" ).click(function() {
        $( ".jui-dialog" ).dialog( "open" );
        return false;
    });
});
</script>

<begin loop>

<button class="button">Popup</button>
<div class="jui-dialog">
    <div class="jui-dialog-inner">
        <p><?=$id?></p>
    </div>
</div>

<end loop> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T09:08:57.660

当你写这行时：

```
$( ".jui-dialog" ).dialog( "open" ); 
```

这意味着，“抓取任何包含类 jui-dialog 的元素并打开它们。”

你正在循环这个所以我假设你有多个带有类 jui-dialog 的 div。相反，您可能的意思是这样写：

```
$( this ).next( ".jui-dialog" ).dialog( "open" ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T09:02:32.640

如果您不想更改您的 dom，您可以选择按钮之后的对话框：

```
$( ".button" ).click(function() {
    $(this).parent().children().eq($(this).index()+1).dialog( "open" );
    return false;
}); 
```

但是给你的按钮一个 id 会更干净：

```
<button class="button" id="<?=$id?>">Popup</button>
<div class="jui-dialog" for="<?=$id?>">
    <div class="jui-dialog-inner">
        <p><?=$id?></p>
    </div>
</div>

$( ".button" ).click(function() {
    $('.jui-dialog[for="'+this.id+'"]').dialog( "open" );
    return false;
}); 
```

# ios - ios 5 中使用 sharekit 的 twitter 共享崩溃

> ID：12815636
> 
> 赞同：1
> 
> 时间：2012-10-10T09:00:26.050
> 
> 标签：ios, twitter, sharekit

嗨，我正在尝试从应用程序在 Twitter 上使用 sharekit 共享图像。我添加了一个推特图标，点击后我调用了这个函数

```
 -(void)shareTwitter
{
    SHKItem *itemshare = [SHKItem image:imgView.image title:projectname];
    [SHK setRootViewController:self.navigationController];
    [SHKTwitter shareItem:itemshare];
} 
```

执行此函数后，应用程序崩溃，并在**sharekit**代码中显示 exec_bad_access。我在它出现的地方添加了下面的那条线。

```
iOS5twitter.completionHandler = ^(TWTweetComposeViewControllerResult result) ; 
```

我尝试使用 sharekit 提供的 demoapp 重现相同的问题。该应用程序运行良好，甚至可以发布图像。

崩溃出现在登录身份验证之前。有人可以指导我并帮助我解决这个问题吗谢谢

# python - Python Minidom XML 查询

> ID：12815637
> 
> 赞同：4
> 
> 时间：2012-10-10T09:00:28.360
> 
> 标签：python, xml, minidom

我正在尝试使用 lxml 查询此 XML：

```
<lista_tareas>
    <tarea id="1" realizzato="False" data_limite="12/10/2012" priorita="1">
    <description>XML TEST</description>
</tarea>
<tarea id="2" realizzato="False" data_limite="12/10/2012" priorita="1">
    <description>XML TEST2</description>
</tarea> 
```

我写了这段代码：

```
from lxml import etree
doc = etree.parse(file_path)    

root = etree.Element("lista_tareas")

for x in root:
    z = x.Element("tarea")
    for y in z:
        element_text = y.Element("description").text
        print element_text 
```

它不打印任何东西，你能建议我怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T09:07:46.933

您不想使用 minidom；请改用[ElementTree API](http://docs.python.org/library/xml.etree.elementtree.html)。DOM API 是一个非常冗长且受限制的 API，而 ElementTree API 则发挥了 Python 的优势。

MiniDOM 模块不提供您正在寻找的任何查询 API。

您可以使用捆绑`xml.etree.ElementTree`模块，也可以安装[lxml](http://lxml.de/)，它提供了更强大的 XPath 和其他查询选项。

```
import xml.etree.ElementTree as ET
root = ET.parse('document.xml').getroot()

for c in root.findall("./Root_Node[@id='1']/sub_node"):
    # Do something with c 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T09:07:14.610

使用[lxml](http://lxml.de)：

```
from lxml import etree

doc = etree.parse ( source )    
for c in doc.xpath ( "//Root_Node[@id='1']" ):
  subnode = c.find ( "sub_node" )
  # ... etc ... 
```

# c++ - VS 2012/VC11 中的对齐和 STL

> ID：12815647
> 
> 赞同：2
> 
> 时间：2012-10-10T09:01:07.517
> 
> 标签：c++, stl, alignment, visual-studio-2012

除非您指定自定义分配器，否则我对 STL 的对齐结构（例如，放置在 std::vector 中的 SIMD 向量）有一个模糊的记忆。

根据[this](http://msdn.microsoft.com/en-us/library/hh567368.aspx) document VS 2012/VC11 has partial support for [c++ alignment](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2341.pdf)。这是否意味着 VS STL 实现现在可以处理对齐的结构，而无需提供自定义分配器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T09:04:41.453

不，这意味着 VC++ 编译器支持一种指定类型所需对齐的方法（`__declspec(align(N))`语法）。VC++ 一直支持，基本上都被列为“部分”，因为“我们有一些对齐相关的功能，看起来比说“不支持”要好。

除此之外，我不知道 C++11 对齐规范中有任何内容表明标准库容器中的 SIMD 向量可以保证工作。在这方面，C++11 对齐基本上只是编译器已经做的形式化（据我所知。如果你能证明我错了，我会很高兴）。

SIMD 向量是标准所说的“过度对齐类型”（参见“扩展对齐”部分）。这基本上意味着“我们什么都不保证，完全取决于编译器如何/是否处理这些类型。

换句话说，实现这部分 C++11 不一定会改变 SIMD 对象的处理方式。

# javascript - 平方根的二进制搜索陷入javascript中的无限循环

> ID：12815651
> 
> 赞同：0
> 
> 时间：2012-10-10T09:01:14.197
> 
> 标签：javascript, coffeescript

以下代码有什么问题：

咖啡脚本：

```
sqrt = (n) -> 
    small = 0.01
    lo = 0
    hi = (n+1)/2
    while hi > lo
        mid = (lo+hi)/2
        diff = Math.pow(mid, 2) - n
        sign = (diff > 0) ? 1 : 0
        if Math.abs(diff) < small
            return mid
        else
            switch sign
                when 1
                    hi = mid
                when 0
                    lo = mid
console.log (sqrt 33) 
```

Javascript：

```
// Generated by CoffeeScript 1.3.3
(function() {
  var sqrt;

  sqrt = function(n) {
    var diff, hi, lo, mid, sign, small, _ref;
    small = 0.01;
    lo = 0;
    hi = (n + 1) / 2;
    debugger;
    while (hi > lo) {
      mid = (lo + hi) / 2;
      diff = Math.pow(mid, 2) - n;
      sign = (_ref = diff > 0) != null ? _ref : {
        1: 0
      };
      if (Math.abs(diff) < small) {
        return mid;
      } else {
        switch (sign) {
          case 1:
            hi = mid;
            break;
          case 0:
            lo = mid;
        }
      }
    }
  };

  console.log(sqrt(33));

}).call(this); 
```

另一件事是当您处于无限循环或递归调用中时，您甚至无法打开控制台。浏览器只是冻结。这太烦人了。任何人都可以阐明这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T09:07:11.943

这部分：

```
sign = (diff > 0) ? 1 : 0 
```

应该：

```
sign = if (diff > 0) then 1 else 0 
```

`?`是为存在运算符保留的。

另请参阅：[文档](http://coffeescript.org/#conditionals)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T09:05:52.410

根据您的咖啡脚本代码

```
sign = (_ref = diff > 0) != null ? _ref : {
    1: 0
}; 
```

应该看起来像

```
sign = (diff > 0) ? 1 : 0; 
```

# java - 在没有winapi的情况下将项目添加到Windows系统菜单

> ID：12815659
> 
> 赞同：2
> 
> 时间：2012-10-10T09:02:03.887
> 
> 标签：java, windows, swing

我正在寻找是否可以在当前`JFrame`.

正如[该答案](https://stackoverflow.com/q/4693079/317266)中所建议的那样，我知道可以通过 JNI/JNA 和 windows API 调整菜单`GetSystemMenu()`，但我正在寻找在普通的 Java/Swing 中是否可行。

我在[那个论坛帖子](https://forums.oracle.com/forums/thread.jspa?threadID=1348240)中发现了一些东西，告诉它应该是可能的：

> 这是在创建 JFrame 之前
> 
> JFrame.setDefaultLookAndFeelDecorated(true);
> 
> 然后，在向框架添加任何内容之前，迭代框架的组件，寻找 JMenu。找到后，添加您的“关于”菜单项
> 
> 刚刚测试，工作正常。

唉，没有提供整个 sscce，我也没有设法让它在我的代码中工作。在添加组件之前在创建窗口之后设置断点时，我没有看到`JMenu`. 既不在第一级 ( `JRootPane`) 也不在相继嵌入的组件 ( `JPanel`, `JLayeredPane`) 中。

如果重要的话，我正在处理 WinXP 和 Win7 上的 Java 6/7，窗口被创建为 a`new JFrame("some title")`并且我使用的是本机外观`UIManager.getSystemLookAndFeelClassName()`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T09:46:14.133

JMenu 组件在使用跨平台外观时确实存在。组件的层次结构是：

```
class Test
  class javax.swing.JRootPane
    class javax.swing.JPanel
    class javax.swing.JLayeredPane
      class javax.swing.JPanel
      class javax.swing.plaf.metal.MetalTitlePane
        class javax.swing.plaf.metal.MetalTitlePane$SystemMenuBar
          class javax.swing.JMenu
        class javax.swing.JButton
        class javax.swing.JButton
        class javax.swing.JButton 
```

不幸的是，当使用 Windows 的外观和感觉时，Java 根本不知道标题栏。您可能无法使用 JNA 或其他 laf。

# jsf - 如果在 c:forEach 下，则不会获取 div id

> ID：12815660
> 
> 赞同：1
> 
> 时间：2012-10-10T09:02:04.843
> 
> 标签：jsf, foreach, jstl

我正在尝试使用以下代码将 id 从支持 bean 分配给 div 元素：

```
<c:forEach var="item" items="#{backingBean.dataModel}">
<t:div id="xyz_#{item.id}" forceId="true" forceIdIndex="false" title="#{item.name}" style="display:none">
    <ui:include src="#{item.view}">
        <ui:param name="id" value="#{item.id}" />
        <ui:param name="model" value="#{item.model}" />
    </ui:include>
</t:div>
</c:forEach> 
```

第一次加载页面时，它会分配从支持 bean 推断的正确 id。当我使用此代码刷新页面部分时，它不会调用支持 bean 的 getId 方法，而是正确调用 getView、getModel。结果，div 的 ID 不正确。

可能会在 c:forEach 执行之前分配 div id。当它在 c:forEach 中时，如何强制 div 使用来自支持 bean 的 Id？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:41:41.767

JSF UI 组件的`id`(and `binding`) 属性在视图构建期间（第一次构建 JSF 组件树时）进行评估，而不是在视图渲染期间或在后续回发到相同的看法。

我不完全确定你为什么要这样接近它`<t:div>`。`<div>`在这种特殊情况下，使用纯 HTML 会更有意义。

```
<c:forEach var="item" items="#{backingBean.dataModel}">
    <div id="xyz_#{item.id}" title="#{item.name}" style="display:none">
        <ui:include src="#{item.view}">
            <ui:param name="id" value="#{item.id}" />
            <ui:param name="model" value="#{item.model}" />
        </ui:include>
    </div>
</c:forEach> 
```

### 也可以看看：

*   [JSF2 Facelets 中的 JSTL...有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)

# css - 引导流体网格：输入在 ie7 中脱离其容器

> ID：12815663
> 
> 赞同：6
> 
> 时间：2012-10-10T09:02:06.327
> 
> 标签：css, twitter-bootstrap, internet-explorer-7

为什么在 IE7 中输入会脱离其容器？

[http://jsfiddle.net/Q8jPM/2/](http://jsfiddle.net/Q8jPM/2/)

![在此处输入图像描述](../Images/1df96471fbebc0573dc934f840106bb0.png)

```
<div class="row-fluid" style="margin-top:10px;">
    <div class="span12">
        <div class="row-fluid">
            <div class="span6">
                <div class="row-fluid">
                    <div class="span6 " style="background:green;">
                        <input type="text" class="span12">
                    </div>
                    <div class="span6" style="background:blue;">
                        <input type="text" class="span12">
                    </div>
                </div>
            </div>
            <div class="span6">
                <div class="row-fluid">
                    <div class="span6" style="background:green;">
                        <input type="text" class="span12">
                    </div>
                    <div class="span6" style="background:blue;">
                        <input type="text" class="span12">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div> 
```

​</p>

更新：我想这是盒子模型和宽度问题，但是有引导程序的解决方案吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T09:42:38.580

这是因为 IE7 不支持 css 属性

```
box-sizing: border-box; 
```

将填充和边框大小视为元素宽度的一部分。

在此处阅读有关此属性的更多信息：http: [//paulirish.com/2012/box-sizing-border-box-ftw/](http://paulirish.com/2012/box-sizing-border-box-ftw/)

因此，IE7 将填充和边框大小添加到输入宽度 - 超过父宽度。您必须将它们设置为 0 才能使元素适合父尺寸并保持流畅。

您可以尝试在输入周围添加一个包装器元素，然后将填充和边框设置为包装器。这适用于所有浏览器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T09:49:00.817

我遇到了类似的问题。我通过替换解决了

```
class="span3" 
```

和

```
class="input-mini" 
```

当然，您可以使用 input-small 或任何适合的东西。由于您正在寻找 span12 作为您的输入，我建议您使用“input-xxlarge”

# php - 使用 msxsl="urn:schemas-microsoft-com:xslt" 进行 XSLT 转换

> ID：12815665
> 
> 赞同：0
> 
> 时间：2012-10-10T09:02:18.233
> 
> 标签：php, xslt, transformation, msxsl

我有一个带有以下标题的 XSLT 样式表

```
 <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:lxslt="http://xml.apache.org/xslt"
    xmlns:redirect="org.apache.xalan.xslt.extensions.Redirect"
    extension-element-prefixes="redirect"
   xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:my-ext="ext1"> 
```

我也有自定义功能：

```
<msxsl:script language="JavaScript" implements-prefix="my-ext">

    var lineCounter = 0;
    var totalPages = 0;
    var currentPage = 1;
    var currentObject = '';
    var colSpan = 0;

    function getLineCounter()
    {
        return lineCounter;
    }

    function updateLineCounter(aValue)
    {
        lineCounter += aValue;
         return '';
    } 
```

我的自定义函数在我的 xsl 中使用。当我从命令行使用此 XSL 转换我的 XML 时，使用**msxsl.exe**它可以完美运行并生成完美的 HTML。

好的，这是我的问题：我正在尝试使用 PHP 在服务器上执行转换并发送回结果。我以前多次使用过这个程序，没有问题；但是，这是我第一次尝试使用 MSXSL 扩展和功能。

示例错误如下所示：

```
Warning: XSLTProcessor::transformToXml() [xsltprocessor.transformtoxml]: xmlXPathCompOpEval: **function resetAll not found** in D:\Development\AppServ\www\RJFWEB\jqueryFileTree\PHPMain.php on line 49

Warning: XSLTProcessor::transformToXml() [xsltprocessor.transformtoxml]: **Unregistered function** in D:\Development\AppServ\www\RJFWEB\jqueryFileTree\PHPMain.php on line 49 
```

我们可以看到没有找到/理解函数——尽管这是我在命令行中使用**msXSL.exe 运行的相同代码。**

所以，最终我试图找出是否需要在我的 PHP.ini 中修复/添加一些东西以了解如何使用 MS 扩展或者我是否需要更改 XSL 样式表？

伙计……我希望这个问题有意义！任何帮助表示赞赏。谢谢。

抢

我的 phpInfo 显示

```
**XSL**
XSL                                      enabled
libxslt Version                              1.1.23
libxslt compiled against libxml Version      2.6.32
EXSLT                                    enabled
libexslt Version                             0.8.13 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:03:18.710

这`msxsl:script`是一个专有扩展，允许您使用 JScript 或 VBScript 编写扩展函数，我认为 libxslt 不支持。但是，使用 PHP 5 和 libxslt，您可以在 PHP 中编写扩展函数，请参阅[http://php.net/manual/en/xsltprocessor.registerphpfunctions.php](http://php.net/manual/en/xsltprocessor.registerphpfunctions.php)。所以这似乎是要走的路，如果你不能使用纯 XSLT 来实现你的要求，那么你需要将用 J(ava)Script 编写的函数移植到 PHP 并利用[http://php.net /manual/en/xsltprocessor.registerphpfunctions.php](http://php.net/manual/en/xsltprocessor.registerphpfunctions.php)在 XSLT 中使用这些函数。

作为替代方案，如果您在有 MSXML 可用的 Windows 上运行 PHP，您可能想尝试从 PHP 中使用它，应该可以在[http://www.php.net/manual/en/](http://www.php.net/manual/en/class.com.php)的帮助下使用例如， [class.com.php](http://www.php.net/manual/en/class.com.php)`new COM("MSXML2.DomDocument.3.0")`应该为您提供一个 MSXML DOM 文档，其中包含`transformNode`使用`msxsl:script`.

# wpf - WPF datagrid 隐藏列与动态数据源

> ID：12815666
> 
> 赞同：3
> 
> 时间：2012-10-10T09:02:18.667
> 
> 标签：wpf, data-binding, dataview

我正在将数据网格绑定到 DataView。我想在显示数据时隐藏 ID 列。ID 列需要存在于数据中，因为它在我的代码的另一部分中使用。

ID 列始终是第一列（索引 0）。

我是否认为 DataContextChanged 事件不能保证所有列都已刷新？

如何在隐藏列之前确保绑定已完成？理想情况下，我想用它的列名隐藏它。

编辑：忘了说我不能在 XAML 中指定列，因为它们是从动态 SQL 生成的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T09:21:54.593

我想到了。

在 AutoGeneratingColumn 事件中，我正在检查 DataGridAutoGeneratingColumnEventArgs 标题值，如果它与列标题匹配则取消操作。

```
Private void dataGrid_AutoGeneratingColumn(object sender,     DataGridAutoGeneratingColumnEventArgs e)
        {
            if (e.Column.Header.ToString() == "ID")  
            {
                e.Cancel = true;
            }
        } 
```

# asp.net - Aspx 和 Ascx 生命周期：避免对数据库进行多选

> ID：12815673
> 
> 赞同：2
> 
> 时间：2012-10-10T09:02:58.027
> 
> 标签：asp.net, ascx

我使用 ascx 用户控件来管理 CRUD o 数据库实体。我在我的 aspx 页面中重用了这个 userc 控件，以只读模式显示数据库上记录的数据库数据。用户控件内部有一个简单的 FormView 和一个 objectdatasource。

现在，在一个包含 ascx 的 aspx 页面中，我必须知道，在 aspx 的 DATABIND 时间中，数据库记录的一些数据是由用户控件考虑的。用户控件是在 aspx 页面之后的数据绑定，因此我没有数据。我必须在数据库的 aspx 页面中进行选择，并且在用户控件执行相同的选择之后。

我该如何优化这个过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T09:16:21.160

ASCX 基础事件可能会在您的 ASPX 基础事件之后触发，但在整个生命周期中，您可以触发自己的事件。

你可以在你的 ASCX 上定义一个事件，让你的页面注册到这个事件，然后将你的自定义事件从你的 ASCX 传播到你的 ASPX，参数中包含你需要的任何数据

粗略的例子（可能无法编译）：在 ASCX

```
public partial YourControl : System.Web.UI.UserControl {
    public event EventHandler MyControlDataBound;
    public void FireMyControlDataBound()
    {
        if (MyControlDataBound!= null)
        {
            MyControlDataBound(this, new EventArgs());
        }
    }

    protected void MyDataBound(object sender, EventArgs e) {
        // ......
        FireMyControlDataBound();
    }
} 
```

在 ASPX 中

```
public partial class MyPage: Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        yourUserControlInstance.MyControlDataBound += HandleYourDataInYourPage;
    }

    protected void HandleYourDataInYourPage(object sender, EventArgs e) {
        // .. do whatever needed in your page, with your data
        // if you have defined a custom Args class that inherits EventArgs, your could collect data here...
    }
} 
```

如果您需要，请随意创建一个继承 EventArgs 的类以将数据与您的事件一起传递

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T09:04:56.953

您可以在 Page 的 init 事件中将参数传递给 UserContol

```
protected override void OnInit(EventArgs e)
{
        base.OnInit(e);
        var control = (UserControl)this.FindControl("UserControlId");
        control.Property = ...;//Pass User Control properties

} 
```

# cocoa - 以编程方式关注可可中可访问的 UI 元素

> ID：12815675
> 
> 赞同：0
> 
> 时间：2012-10-10T09:02:59.870
> 
> 标签：cocoa, osx-lion, accessibility

我有一个带有按钮的工具栏和一个带有标题框的 NSView。当窗口打开并且旁白打开时，我希望焦点位于标题框上。目前它位于工具栏按钮上，因为它在可访问性层次结构中可能更高。我应该怎么做才能将注意力集中在盒子上，而不是按钮上？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:38:06.870

解决方案是`windowDidLoad`像这样访问窗口可访问性层次结构：

```
id windowElement =  NSAccessibilityUnignoredDescendant(self.window);
NSArray *windowElements = [windowElement accessibilityAttributeValue:NSAccessibilityChildrenAttribute]; 
```

`windowElements`之后，应该在数组中找到应该位于层次结构中的第一个元素。假设我们找到了它，那么它的索引是`firstElIndex`：

```
 NSMutableArray *mutArray = [NSMutableArray arrayWithArray:windowElements];
        id firstElement = [[mutArray objectAtIndex:firstElIndex] retain];

        [mutArray removeObject:firstElement];
        [mutArray insertObject:firstElement atIndex:0];

        [windowElement accessibilitySetOverrideValue:mutArray forAttribute:NSAccessibilityChildrenAttribute];
        [windowElement accessibilitySetOverrideValue:mutArray forAttribute:NSAccessibilityVisibleChildrenAttribute];
        [windowElement accessibilitySetOverrideValue:mutArray forAttribute:NSAccessibilitySelectedChildrenAttribute];
        [firstElement release]; 
```

最后，我们用新数组覆盖`windowElement`children 属性，我们希望焦点放在其中的元素将位于首位。

这是一个非常简单的例子。但这是要走的路。

# c# - WinVerifyTrust 返回 0x80092003 - CRYPT_E_FILE_ERROR

> ID：12815676
> 
> 赞同：3
> 
> 时间：2012-10-10T09:03:04.970
> 
> 标签：c#, x86-64, winverifytrust

我正在使用 C# .net 3.5 并在 64 位平台上运行。

我有一个需要动态加载的 32 位 dll。dll 位于“C:\Program files\ApplicationToLoad\Application.dll”下

因为 dll 是 32 位的，所以我必须将我的应用程序也编译为 32 位。

在加载 dll 之前，我检查 dll 是否使用 WinVerifyTrust 签名，但我收到错误 0x80092003 = CRYPT_E_FILE_ERROR = 读取或写入文件时发生错误。

我猜这是因为我被编译为 32 位并试图检查 Program Files 下的 dll 而不是 Program Files x86 下的 dll。因此，我遵循了[在 system32/drivers 文件夹中验证数字签名](https://stackoverflow.com/questions/9339842/verify-digital-signature-within-system32-drivers-folder/9342928#9342928)的答案，并尝试禁用 FS 重定向，但没有帮助。

我很确定问题与重定向有关，因为我

1.  在“程序文件（x86）”下创建了 ApplicationToLoad 文件夹的副本 - WinVerifyTrust 返回状态正常

2.  将我的应用程序编译为 64 位 - WinVerifyTrust 返回状态正常

**更新：**

这是禁用重定向的代码：

```
 IntPtr ptr = new IntPtr();
  Wow64DisableWow64FsRedirection(ref ptr);
  var lStatus = WinVerifyTrust(
                    IntPtr.Zero,
                    pGuid,
                    pData);

 Wow64RevertWow64FsRedirection(ptr); 
```

***pinvoke 声明：***

```
 [DllImport("kernel32.dll", SetLastError = true)]
            public static extern bool Wow64DisableWow64FsRedirection(ref IntPtr ptr);
            [DllImport("kernel32.dll", SetLastError = true)]
            public static extern bool Wow64RevertWow64FsRedirection(IntPtr ptr); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:02:40.083

我想通了 - 问题是文件路径中有一个额外的空间。并且在 32 位和 64 位中获取文件路径的代码是不同的，这就是为什么它在编译为 64 位时无法重现的原因。所以它与重定向无关......

# c# - 用于执行由字符串函数完成的任务的正则表达式

> ID：12815679
> 
> 赞同：0
> 
> 时间：2012-10-10T09:03:20.277
> 
> 标签：c#, regex

下面的代码正在执行以下功能，我打算将其集成到更大的应用程序中。

1.  用点 (.) 字符分割大输入字符串`input`，无论它出现在输入字符串中的什么地方。
2.  将拆分的子字符串存储到数组中`result[]`；
3.  在 foreach 循环中，匹配一个子字符串以匹配 **关键字**的出现。
4.  如果发生匹配，则从原始输入字符串中匹配的子字符串的位置开始，最多打印**300 个字符。**

    ```
     string[] result = input.Split('.');
        foreach (string str in result)
        {

            //Console.WriteLine(str);
            Match m = Regex.Match(str, keyword);
            if (m.Success)
            {
                int start = input.IndexOf(str);
                if ((input.Length - start) < 300)
                {
                    Console.WriteLine(input.Substring(start, input.Length - start));
                    break;
                }
                else
                {
                    Console.WriteLine(input.Substring(start, 300)); 
                    break;
                }
            } 
    ```

输入实际上是大量的文本，我认为这应该通过正则表达式来完成。作为一个新手，我无法使用正则表达式将所有内容放在一起。

匹配关键字。`Match m = Regex.Match(str, keyword);`

从点 (.) 开始的 300 个字符，即从匹配的句子开始，打印 300 个字符`"^.\w{0,300}"`

我打算做的是：

1.  在输入文本中搜索关键字。

2.  就像找到匹配一样，**从包含关键字的句子开始，**从输入字符串中打印最多 300 个字符。

    我应该如何进行？请帮忙 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T09:07:56.070

如果我做对了，您需要做的就是找到您的`keyword`并捕获所有后续内容，直到找到第一个点或达到最大字符数：

```
@"keyword([^\.]{0,300})" 
```

[在此处](http://refiddle.com/9vs)查看示例演示。

C#代码：

```
var regex = new Regex(@"keyword([^\.]{0,300})");

foreach (Match match in regex.Matches(input))
{
   var result = match.Groups[1].Value;

   // work with the result
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T09:29:23.023

试试这个正则表达式：

```
(?<=\.?)([\w\s]{0,300}keyword.*?)(?=\.) 
```

解释：

> ***`(?= subexpression)`***零宽度正向超前断言。
> 
> ***`(?<= subexpression)`***零宽度正向回溯断言。
> 
> ***`*?`***匹配前一个元素零次或多次，但尽可能少。

和一个简单的代码：

```
foreach (Match match in Regex.Matches(input, 
                                      @"(?<=\.?)([\w\s]{0,300}print.*?)(?=\.)"))
{
    Console.WriteLine(match.Groups[1].Value);
} 
```

# android - 在 actionbar sherlock 中设置进度条颜色

> ID：12815681
> 
> 赞同：1
> 
> 时间：2012-10-10T09:03:35.543
> 
> 标签：android, actionbarsherlock, android-progressbar

我们如何在 ABS 中设置进度条的颜色。默认情况下，它是蓝色的，与深色主题完美搭配。但是当我使用浅色主题时，它几乎不可见。

我应该覆盖 android:progressBarStyle 样式中的哪个项目以更改颜色。我想实现与此链接[在 ActionbarSherlock 中设置进度条样式](https://stackoverflow.com/questions/10687011/styling-the-progressbar-in-actionbarsherlock?answertab=active#tab-top)完全相同的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T14:28:16.840

回答我自己的问题。我没有使用操作栏进度，而是在`progressbar`我的布局文件中添加了一个元素。然后将`xml`文件设置为`progressdrawable`所需`progress bar`的颜色。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <ProgressBar android:id="@+id/progress"
        style="?android:attr/progressBarStyleHorizontal"
        android:layout_width="match_parent"
        android:layout_height="4dp"
        android:max="100"
        android:progress="0"
        android:secondaryProgress="0" 
        android:visibility="gone"/>

    <WebView 
        android:id="@+id/webview"
        android:layout_width="fill_parent"      
        android:layout_height="fill_parent"/>

</LinearLayout> 
```

可绘制的

```
<item android:id="@android:id/progress">
    <clip>
        <shape>
            <gradient
                android:angle="270"
                android:centerColor="@color/progresscolor"
                android:centerY="0.75"
                android:endColor="@color/progresscolor"
                android:startColor="@color/progresscolor" />
        </shape>
    </clip>
</item> 
```

# css - 括号的 HTML/CSS 部分

> ID：12815682
> 
> 赞同：6
> 
> 时间：2012-10-10T09:03:42.133
> 
> 标签：css, html

我正在开发一个杯子系统，我想对支架部分提出一些建议。理想的结果应该是这样的：

> ![括号](../Images/cb08b4e6b97f56278eda53d05649ec56.png)

[http://www.partyplanning101.com.php5-7.dfw1-1.websitetestlink.com/wp-content/uploads/2009/02/tornament_board.gif](http://www.partyplanning101.com.php5-7.dfw1-1.websitetestlink.com/wp-content/uploads/2009/02/tornament_board.gif)

我想使用 div 结合 CSS 来构建页面，而不是表格。我应该如何做到这一点最优化？你们中有人有这方面的样本吗？

我只是寻求有关 HTML/CSS 部分的帮助，仅此而已。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-10T09:27:01.573

这看起来很有趣，所以我开始开发，现在必须重新开始工作，所以这就是我的进展。基础知识已经为你准备好了，所以我想你可以从这里完成它，虽然我可能也会在业余时间完成它，稍后再来发布它

[http://jsfiddle.net/AcuPp/](http://jsfiddle.net/AcuPp/)

更新：

完成 - [http://jsfiddle.net/AcuPp/3/](http://jsfiddle.net/AcuPp/3/)

**CSS**

```
#container { 
    width: 800px; 
    height: 600px; 
    float: left; 
}

section { 
    width: 130px; 
    height: 520px; 
    float: left;
}

section > div { 
    width: 100px; 
    height: 20px; 
    border: 1px solid #000; 
    margin: 10px 0; 
    background: #73789F; 
    color: white; 
    padding: 10px 10px 10px 20px;
}

section > div:nth-child(2n) { 
    margin-bottom: 40px;
}

.connecter { 
    width: 30px; 
    height: 520px; 
    float: left; 
}

.line { 
    width: 30px; 
    height: 520px; 
    float: left; 
}

.connecter div { 
    border: 1px solid #000; 
    border-left: none; 
    height: 50px; 
    width: 100%; 
    margin: 80px 0 0 1px;
}

.connecter div:first-child { 
    margin: 32px 0 0 1px; 
}

.line div { 
    border-top: 1px solid #000; 
    margin: 133px 0 0 1px; 
}

.line div:first-child { 
    margin-top: 55px; 
}

#quarterFinals > div { 
    margin-top: 91px; 
}

#quarterFinals > div:first-child { 
    margin-top: 37px; 
}

#conn2 div { 
    margin-top: 133px; 
    height: 133px;
}

#conn2 div:first-child { 
    margin-top: 57px; 
}

#line2 div { 
    margin-top: 270px; 
}

#line2 div:first-child { 
    margin-top: 125px; 
}
#semiFinals > div { 
    margin-top: 230px; 
}
#semiFinals > div:first-child { 
    margin-top: 105px; 
}
#conn3 div { 
    margin-top: 125px; 
    height: 270px;
}

#line3 div { 
    margin-top: 270px; 
}

#final > div { 
    margin-top: 250px; 
} 
```

​</p>

**HTML**

```
<article id="container">

<section>
    <div>Player 1</div>
    <div>Player 2</div>
    <div>Player 3</div>
    <div>Player 4</div>
    <div>Player 5</div>
    <div>Player 6</div>
    <div>Player 7</div>
    <div>Player 8</div>
</section>

<div class="connecter">
    <div></div>
    <div></div>
    <div></div>
    <div></div>
</div>

<div class="line">
    <div>
    </div><div>
    </div><div>
    </div><div>
    </div>
</div>

<section id="quarterFinals">
    <div></div>
    <div></div>
    <div></div>
    <div></div>
</section>

<div class="connecter" id="conn2">
    <div></div>
    <div></div>
</div>

<div class="line" id="line2">
    <div></div>
    <div></div>
</div>

<section id="semiFinals">
    <div></div>
    <div></div>
</section>

<div class="connecter" id="conn3">
    <div></div>
</div>

<div class="line" id="line3">
    <div></div>
</div>

<section id="final">
    <div></div>
</section>

</article>

​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T11:12:50.303

我完整的工作解决方案在这里：http: [//jsfiddle.net/t9feh/](http://jsfiddle.net/t9feh/)

我更喜欢具有纯语义标记的解决方案，该解决方案易于阅读和修改可能会在以后滴入的数据，例如谁赢得了每场比赛。

所以我从一个标记结构开始，其中玩家嵌套在比赛中，比赛嵌套在回合中。

## HTML：

```
<div class="tournament">

    <div class="round quarter-finals">

        <div class="match" >
            <div class="player">Player 1</div>
            <div class="player winner">Player 2</div>
        </div>

        <div class="match">
            <div class="player winner">Player 3</div>
            <div class="player">Player 4</div>
        </div>    

        <div class="match">
            <div class="player">Player 5</div>
            <div class="player winner">Player 6</div>
        </div>

        <div class="match">
            <div class="player">Player 7</div>
            <div class="player">Player 8</div>
        </div>    

    </div>

    <div class="round semi-finals">

        <div class="match">
            <div class="player">Player 2</div>
            <div class="player winner">Player 3</div>
        </div>

        <div class="match">
            <div class="player">Player 6</div>
            <div class="player">Player 7</div>
        </div>    

    </div>

    <div class="round finals"> 

        <div class="match">
            <div class="player">Player 3</div>
            <div class="player"></div>
        </div>     

    </div>

    <div class="round"> 
        <div class="champion"> 
            <div class="player"></div>
        </div>
    </div>
</div> 
```

请注意，可以将“获胜者”类添加到任何玩家，并且它的样式会适当。

那么主要的挑战是做连接器。语义标记意味着没有设计钩子。这需要 BG 图像。我使用 data-urls（请参阅我在[DataURL.net](http://dataurl.net/#dataurlmaker)使用的实用程序）将它们放在“匹配”元素上。

## CSS：

```
.tournament{width:720px;}

.round{
       float:left;    
}

.player{
    font-family:arial;
    width:120px;   
    height:20px;
    padding:10px;
    background:#73789F;
    color:white;
}

.player.winner{background:green;}

.match{
    padding:5px 50px 5px 0px;
}

/*QUARTER-FINALS*/
.quarter-finals .match{
    height:100px;
    background:right top no-repeat url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABkAQMAAAD+JvEYAAAAA3NCSVQICAjb4U/gAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAAsSAAALEgHS3X78AAAAFnRFWHRDcmVhdGlvbiBUaW1lADEwLzEwLzEyGAKeIwAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNAay06AAAAAnSURBVCiRY/gPBgcYhjoNBPZQ/v4hQjeAHD0I3IGXRgpXqsbXEKEB2yGL0P7iVKIAAAAASUVORK5CYII=);
}
.quarter-finals .player{

}
.quarter-finals .player:first-child{
    margin-bottom:5px;
}

/*SEMI-FINALS*/
.semi-finals .match{
    padding-top:30px;
    height:185px;
    background:right top no-repeat url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAC5AQMAAABQhv7pAAAAA3NCSVQICAjb4U/gAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAAsSAAALEgHS3X78AAAAFnRFWHRDcmVhdGlvbiBUaW1lADEwLzEwLzEyGAKeIwAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNAay06AAAAArSURBVDiNY/gPBgcYRumBpYHAHsrfP0oPKboBFHmDwB2jNAk0Un77PwxoAJbztvAUr3KAAAAAAElFTkSuQmCC);
}

.semi-finals .player:first-child{
    margin-bottom:70px;
}

/*FINALS*/
.finals .match{
    padding-top:85px;
    height:350px;
    background:top right no-repeat url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAFeAQMAAAD9sN5nAAAAA3NCSVQICAjb4U/gAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAAsSAAALEgHS3X78AAAAFnRFWHRDcmVhdGlvbiBUaW1lADEwLzEwLzEyGAKeIwAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNAay06AAAAA0SURBVEiJY/gPBgcYRulRepQmngYCeyh//yg9So/Sg45uAGXSQeCOUXqUHrI0Uj33fxjQAEJS8U50LMSKAAAAAElFTkSuQmCC);
}

.finals .player:first-child{
    margin-bottom:180px;

}
/* CHAMP*/
.champion{padding-top:200px;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T09:13:44.750

你可以这样做。根据您的 div 位置更改以下代码。

**CSS**

```
h1 {
    width:580px; 
    font-family:verdana,arial,helvetica,sans-serif;
    font-size:18px;
    text-align:center;
    margin:40px auto;
 }
#container {
    width:580px; 
    font-family:verdana,arial,helvetica,sans-serif;
    font-size:11px;
    text-align:center;
    margin:auto;
 }  
#container a {
    display:block;
    color:#000;
    text-decoration:none;
    background-color:#f6f6ff;
 }
#container a:hover {
    color:#900;
    background-color:#f6f6ff;
 }
#no1 {
    width:190px;
    line-height:60px;
    border:1px solid #000;
    margin:auto;
 }
#no1 a {
    height:60px;
 }
#line1 {
    font-size:0;
    width:1px;
    height:20px;
    color:#fff;
    background-color:#000;
    margin:auto;
 } 
#line2 {
    font-size:0;
    width:424px;
    height:1px;
    color:#fff;
    background-color:#000;    
    margin:auto;
 } 
#line3 {
    font-size:0;
    display:inline;
    width:1px;
    height:20px;
    color:#fff;
    background-color:#000;
    margin-left:78px;
    float:left;
 }  
#line4,#line5,#line6 {
    font-size:0;
    display:inline;
    width:1px;
    height:20px;
    color:#fff;
    background-color:#000;
    margin-left:140px;
    float:left;
 }
#no2 {
    display:inline;
    border:1px solid #000;
    clear:both;
    margin-left:35px;
    float:left;
 }
#no2 a,#no4 a,#no8 a {
    width:84px; 
    height:50px;
    padding-top:8px; 
 }  
#no3 {
    display:inline;
    border:1px solid #000;
    margin-left:58px;
    float:left;
 }
#no3 a,#no5 a,#no6 a,#no7 a,#no9 a {
    width:84px; 
    height:42px;
    padding-top:16px;  
 } 
#no4 {
    display:inline;  
    border:1px solid #000;
    margin-left:53px;
    float:left;
 }  
#no5 {
    display:inline;   
    border:1px solid #000;
    margin-left:55px;
    float:left;
 }  
#line7,#line13 {
    font-size:0;
    display:inline;
    width:1px;
    height:38px;
    color:#fff;
    background-color:#000;
    margin-left:219px;
    float:left;
 } 
#line8,#line14 {
    font-size:0;
    display:inline;
    width:1px;
    height:38px;
    color:#fff;
    background-color:#000;
    margin-left:281px;
    float:left;
 }  
#no6,#no8 {
    display:inline;  
    border:1px solid #000;
    margin-left:107px;
    float:left;
 }
#line9,#line11,#line15,#line17 {
    font-size:0;
    display:inline;
    width:26px;
    height:1px;
    color:#fff;
    background-color:#000;    
    margin-top:29px;
    float:left;
 }  
#line10,#line12,#line16,#line18 {
    font-size:0;
    display:inline;
    width:1px;
    height:60px;
    color:#fff;
    background-color:#000;
    float:left;
 } 
#line16,#line18 {
    height:30px;
 }
#no7,#no9 {
    display:inline; 
    border:1px solid #000;
    margin-left:169px;
    float:left;
 } 
.clear {
    clear:both;
 } 
```

**HTML**

```
<div id="container">

<div id="no1"><a href="">Managing Director</a></div>
<div id="line1"></div>
<div id="line2"></div>
<div id="line3"></div>
<div id="line4"></div>
<div id="line5"></div>
<div id="line6"></div>
<div id="no2"><a href="#">Sales &amp; Marketing Director</a></div>
<div id="no3"><a href="#">Production Director</a></div>
<div id="no4"><a href="#">Human Resources Director</a></div>
<div id="no5"><a href="#">Finance Director</a></div>
<div id="line7"></div>
<div id="line8"></div>
<div class="clear"></div>
<div id="no6"><a href="#">Factory Manager</a></div>
<div id="line9"></div>
<div id="line10"></div>
<div id="no7"><a href="#">Management Accountant</a></div>
<div id="line11"></div>
<div id="line12"></div>
<div class="clear"></div>
<div id="line13"></div>
<div id="line14"></div>
<div class="clear"></div>
<div id="no8"><a href="#">Quality Control Manager</a></div>
<div id="line15"></div>
<div id="line16"></div>
<div id="no9"><a href="#">Financial Accountant</a></div>
<div id="line17"></div>
<div id="line18"></div>
<div class="clear"></div>

</div>

</body>
</html>​ 
```

在这里演示[http://jsfiddle.net/ZRJRj/1/](http://jsfiddle.net/ZRJRj/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T09:52:41.397

您想查看 SVG ( [http://www.w3schools.com/svg/default.asp](http://www.w3schools.com/svg/default.asp) ) 或 Canvas ( [http://en.wikipedia.org/wiki/Canvas_element](http://en.wikipedia.org/wiki/Canvas_element) )

我会选择 SVG。您需要使用一些 JavaScript 计算连接线的端点，您将在浏览器中使用 SVG 直接绘制它们，并将其全部抽象到简单的界面后面。实际上，JavaScript 将您的整个应用程序粘合在一起，SVG 仅用于绘图，而 HTML 和 CSS 将帮助您呈现它的其他部分。

或者，您可以使用 SVG 显示整个决赛阵容。然后，您将使用 JavaScript 操作其内容以显示正确的团队名称和关系。

它会很漂亮。

# ios - CDVURLProtocol - 触发 ajax 调用时未执行 startLoading 方法

> ID：12815683
> 
> 赞同：1
> 
> 时间：2012-10-10T09:03:42.563
> 
> 标签：ios, ajax, cordova, nsurlprotocol

我正在尝试捕获传出的 ajax 调用，以便通过向其添加客户端证书来更改请求。

似乎可以通过继承 NSURLProtocol 来完成。在 Phonegap 中已经有一个名为 CDVURLProtocol 的子类。

调用 canInitWithRequest 方法，但不调用可以实现请求更改的 startLoading 方法。

有任何想法吗 ？

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T15:55:34.907

根据[UIWebViewDelegate 没有监控 XMLHttpRequest？](https://stackoverflow.com/questions/5353278/uiwebviewdelegate-not-monitoring-xmlhttprequest)：

“UIWebViewDelegate 不监视使用 XMLHttpRequest 发出的请求”

# grails - Grails Spring Security UI 注册 Flash 消息

> ID：12815684
> 
> 赞同：0
> 
> 时间：2012-10-10T09:03:44.987
> 
> 标签：grails, spring-security, flash-message

我使用 Spring Security UI 插件。我不想使用 Spring Security UI 生成的视图，而是我自己的。因此，我想在我的寄存器/索引视图中显示错误消息。如何在列表中显示错误消息？

我想在我看来有这个：

```
<g:if test="${flash.message}">
    <bootstrap:alert class="alert-info">${flash.message}</bootstrap:alert>
</g:if> 
```

当我把这些行放在那里时，没有显示错误消息。但在生成的寄存器视图中显示错误。

当我放下以下代码时：

```
<g:eachError>
    <li>${it}</li>
</g:eachError> 
```

然后我收到很多错误消息，但无法以好的方式显示它们。我什至无法覆盖国际化 API 中的消息：

```
Field error in object 'xxx.RegisterCommand' on field 'username': rejected value []; codes [x.RegisterCommand.username.blank.error.x.RegisterCommand.username,xxx.RegisterCommand.username.blank.error.username,x.RegisterCommand.username.blank.error.java.lang.String,xxx.RegisterCommand.username.blank.error,registerCommand.username.blank.error.xxx.RegisterCommand.username,registerCommand.username.blank.error.username,registerCommand.username.blank.error.java.lang.String,registerCommand.username.blank.error,xxx.RegisterCommand.username.blank.xxx.RegisterCommand.username,xxx.RegisterCommand.username.blank.username,xxxx.RegisterCommand.username.blank.java.lang.String,xxx.RegisterCommand.username.blank,registerCommand.username.blank.xxx.RegisterCommand.username,registerCommand.username.blank.username,registerCommand.username.blank.java.lang.String,registerCommand.username.blank,blank.xxx.RegisterCommand.username,blank.username,blank.java.lang.String,blank]; arguments [username,class xxx.RegisterCommand]; default message [Die Eigenschaft [{0}] des Typs [{1}] darf nicht leer sein] 
```

我只想在列表中显示错误。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:23:54.743

渲染错误如下：

```
<g:eachError>
    <li><g:message error="${it}"/></li>
</g:eachError> 
```

# google-drive-api - 从 Javascript 向 Google Drive 发送文本数据

> ID：12815691
> 
> 赞同：0
> 
> 时间：2012-10-10T09:04:21.937
> 
> 标签：google-drive-api

是否可以将数据从 JavaScript 发送到 Google Drive 。我正在尝试将我的本地存储数据发送到谷歌驱动器。

请给我一个相同的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T20:50:12.573

Google Drive SDK 文档包含一个完整的 JavaScript 快速入门指南，其中展示了如何从 JavaScript 将文件上传到云端硬盘：

[https://developers.google.com/drive/quickstart](https://developers.google.com/drive/quickstart)

编辑示例代码以使用本地存储而不是从表单上传的文件应该非常简单。

# android - 保存在画布上绘制的位图

> ID：12815694
> 
> 赞同：0
> 
> 时间：2012-10-10T09:04:33.013
> 
> 标签：android, bitmap, colormatrixfilter

在我的应用程序中，我扩展了 ImageView 并覆盖了它的 onDraw() 方法。我正在使用颜色过滤器来操作位图以添加一些效果，如反转、灰度等。绘制位图后，我试图保存它，但我只能保存原始位图而没有添加效果。这是 onDraw() 和 save 方法的代码：

```
protected void onDraw(Canvas canvas)
{
    Paint paint = mPaint;
    //cmf is the color matrix filter
    paint.setColorFilter(cmf);

    if(mBitmap != null)
    {
        canvas.drawBitmap(mBitmap, offsetW, offsetH, paint);
    }
} 
```

保存位图的代码：

```
 try
        {
            FileOutputStream fout = new FileOutputStream(path);

            mBitmap.compress(CompressFormat.JPEG, 100, fout);
        } catch (FileNotFoundException e)
        {
            e.printStackTrace();
        } 
```

难道我做错了什么？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T09:09:05.547

您正在显示的画布上绘画，原始位图没有改变。您应该创建一个新的位图并在其上绘画。当颜色矩阵过滤器更改时，请执行以下操作：

```
Bitmap tmp = Bitmap.createBitmap(mBitmap.getWidth(), mBitmap.getHeight(), mBitmap.getConfig())
Canvas canvas = new Canvas(tmp)
cnvas.drawBitmap(tmp, 0, 0, paint); 
```

然后，您可以使用此 tmp 位图将其绘制并保存。

而不是使用自定义`ImageView`使用普通的并将其图像设置为这个新的位图：

```
imageView.setImageBitmap(tmp) 
```

# c - 如何在 Linux 上执行字符串命令输出和执行相同的二进制文件

> ID：12815695
> 
> 赞同：0
> 
> 时间：2012-10-10T09:04:33.410
> 
> 标签：c, linux

我写了一个程序，我想实现每个字符串的输出，比如我从“字符串命令”收到的输出

```
int my_print(char *fmt, ...)
{
printf("%p\n",fmt);
}

int main()
{
my_print("Hello1 [%d]\n", 1);
my_print("Hello2 [%d]\n", 2);
my_print("Hello [%d]\n", 3);
my_print("Hello3 [%d]\n", 4); 
```

它给了我输出

```
0x4006ac
0x4006b9
0x4006c6
0x4006d2 
```

现在我执行了字符串命令“strings -tx a.out”，它给了我输出

```
200 /lib64/ld-linux-x86-64.so.2
    2c1 __gmon_start__
    2d0 libc.so.6
    2da printf
    2e1 __libc_start_main
    2f3 GLIBC_2.2.5
    639 l$ L
    63e t$(L
    643 |$0H
    6ac Hello1 [%d]
    6b9 Hello2 [%d]
    6c6 Hello [%d]
    6d2 Hello3 [%d] 
```

我知道字符串在二进制文件 a.out 中为我提供了字符串的偏移量，但我想知道是否可以从偏移量开始的位置打印起始地址。例如，Hello1`strings command`输出显示“6ac Hello1 [%d]”，其中程序的输出显示 0x4006ac，我希望我的程序应该打印掩码值，并且可以说 6ac 是我应该从字符串命令中得到的输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:22:36.020

如果那是 C，那么您使用的变量参数不正确。

```
#include <stdarg.h>

int my_print(char *fmt, ...)
{
    va_list vl ;
    va_start( vl, fmt ) ;
    vprintf(fmt, vl);
}

int main()
{
    my_print("Hello1 [%d]\n", 1);
    my_print("Hello2 [%d]\n", 2);
    my_print("Hello [%d]\n", 3);
    my_print("Hello3 [%d]\n", 4);
} 
```

请参阅[C](http://publications.gbdirect.co.uk/c_book/chapter9/stdarg.html)手册中的详细信息。

你所做的如下。你定义了一个带有可变数量参数的函数，但你从不使用这些参数。相反，您将其作为指向字符串的指针传递，并将其视为 printf 的参数，使用完全不同的格式作为格式。printf 正确地打印了您传递的字符串的指针（这是一种格式......）。

# iphone - 在 iPhone 上安装应用程序时，适用于 iOS 的 Google Analytics SDK 不是为 armv7s 架构构建的

> ID：12815700
> 
> 赞同：1
> 
> 时间：2012-10-10T09:04:51.093
> 
> 标签：iphone, ipad, google-analytics, xcode4.5

当我尝试在 iPhone/iPad 上安装我的应用程序时，出现以下错误。我正在使用新的 Xcode 4.5。我应该怎么做才能消除这个错误。我需要在设备上测试我的应用程序。

文件是通用的（3 个切片）但不包含一个（n）armv7s 切片：/Users/nishijain/Desktop/Backup SecondPrism/mobile/apps/SecondPrism/SecondPrism/Google Analytics SDK/libGoogleAnalytics.a 用于架构 armv7s clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T09:11:36.257

您需要下载[最新版本的 SDK](https://developers.google.com/analytics/devguides/collection/ios/resources)，根据[Changelog](http://feeds.feedburner.com/ga-dev-changelog-collection-ios)，1.5.1 版本支持 armv7s。如果错误仍然发生，请尝试旧版本的 Xcode（可能是 Xcode 4.4.1），它没有 armv7s 的线索并且不会引发错误。

编辑：

这[也应该有效](https://stackoverflow.com/questions/12576144/will-removing-support-for-armv7s-architecture-still-work-fine-for-the-iphone-5-s)：

在您的构建设置中，从有效架构中删除 armv7s。

# c# - 在 .NET/GDI+ 中制作流畅的动画

> ID：12815701
> 
> 赞同：3
> 
> 时间：2012-10-10T09:04:53.083
> 
> 标签：c#, .net, animation, cpu, stopwatch

我在 GDI+ 中制作流畅的动画时遇到问题。我从谷歌上了解到的问题是多核处理器上的 .NET 中的时钟滴答存在某种错误。这是我正在做的简化版本：

```
class Animation
{
  System.Diagnostics.Stopwatch sw = new Stopwatch();
  float AnimationTime = 1000; //time it takes the animation to complete

  public bool IsComplete
  { get { return sw.ElapsedMilliseconds > AnimationTime; } }

  public void StartAnimation()
  {
     sw.Reset();
     sw.Start();
  }

  public void DoFrame()
  {
     float PercentComplete = (float)sw.ElapsedMilliseconds / AnimationTime;
     //draw the animation based on PercentComplete
  }
} 
```

DoFrame() 是这样调用的：

```
Animation.Start();
do
{
  Animation.DoFrame();
  Application.DoEvents();
} while (!Animation.IsComplete); 
```

问题是动画在大约 15 帧时非常平滑，然后它突然抖动，它实际上向后退（sw.ElapsedMilliseconds 给出的值比之前的查询要小）。这很烦人，它破坏了我原本流畅的动画，即使在 Core 2 Duo 上看起来也很棒（尽管微软说这是一个多核错误）。我有一个 i7，动画很流畅，除了每秒 2-3 帧看起来“生涩”。

我知道这是一个已知问题，微软将其归咎于处理器，所以我的问题是，有没有人知道任何解决方案？我尝试使用卡尔曼滤波器，它有点工作。我希望也许有一个既定的“正确”解决方案？

哦，顺便说一句，我尝试使用 DateTime 而不是 Stopwatch 并得到了相同的结果。

我也试过：

```
double PercentComplete = (double)sw.ElapsedTicks / (double)Stopwatch.Frequency * 1000 / AnimationTime 
```

它给了我同样的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T09:51:54.933

这可能与您调用的方式有关`DoFrame()`。使用以下 Windows 窗体/基于 GDI+ 的算法，您应该始终获得非常流畅的动画：

```
const double desiredFps = 500.0;
long ticks1 = 0;
var interval = Stopwatch.Frequency / desiredFps;
while (true)
{
    Application.DoEvents();
    var ticks2 = Stopwatch.GetTimestamp();
    if (ticks2 >= ticks1 + interval)
    {
        ticks1 = Stopwatch.GetTimestamp();

        // do the drawing here
    }
} 
```

# ios - 隧道效应 cocos2d

> ID：12815720
> 
> 赞同：4
> 
> 时间：2012-10-10T09:05:57.950
> 
> 标签：ios, cocos2d-iphone, cocos2d-x

我希望在 COCOS2D (iOS) 中创建类似的隧道效果。任何人都可以提出任何建议吗？

![参考图像](../Images/cf97da8dd11f2e61e17fb1dd2b9520c1.png)

[参考视频 1](http://www.youtube.com/watch?feature=player_embedded&v=mZ7CFtuHT2E)

[参考视频 2](http://www.youtube.com/watch?feature=player_embedded&v=4zJUVnQ8zOw)

到现在为止，我已经尝试了几个具有减小比例的环形精灵，并将中心定位到同一点，并为每个较小的精灵保持 Z 减小。

这样，使用 CCScaleTo 对其进行动画处理并将大小更改为 2.0 并使用动画持续时间，但它无论如何都不会接近参考中显示的隧道效果。

谢谢，山姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T10:50:19.207

我从这个效果的作者那里找到了实现描述：

**一旦圆圈离开屏幕，它们很快就会消失并放回初始位置（为了节省内存，所以我不需要创建新圆圈，但我会重复使用相同的圆圈）。对不起我的英语，但我希望能解释一般的想法:)”**

# oracle - 初始化并循环遍历二维数组

> ID：12815723
> 
> 赞同：1
> 
> 时间：2012-10-10T09:06:13.313
> 
> 标签：oracle, multidimensional-array, plsql

我正在尝试在 pl/sql 中编写一个差异过程。错误消息从不说明结构应该是什么样的，只是它期望一些其他符号，通常表示行尾。我也不断收到示例代码错误...

1.  为什么它会在第一个错误处停止，而不是给出找到的所有错误的列表？
2.  CREATE TYPE EditCost，找到 EditCost，期待其他符号。
3.  cost_matrix INTEGER[，找到 [，期待其他符号。
4.  original.length，无效参考。
5.  cost_matrix[, 发现 [, 期待其他符号。
6.  返回cost_matrix，返回后不允许值，那我怎么返回值呢？

这段代码给了我很多错误，我删除了部分只是为了发现其他部分的错误。

```
CREATE OR REPLACE PROCEDURE diff_string(original in varchar2, other in varchar2, result out varchar2)
is -- Maybe should be as, don't know.
    CREATE TYPE EditCost { 'Change', 'Copy', 'Delete', 'Insert', 'Kill' };
    cost_matrix INTEGER[original.length, other.length];
BEGIN
   IF original = NULL THEN
      result := other;
   ELSIF other = NULL then
      result := original;
   else
       for i in 1 .. length(original)
       loop
           for j in 1 .. length(other)
           loop
               cost_matrix[i, j] := i * j;
           end loop;
       end loop;
       return cost_matrix;
   end if;
END diff_string;
/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T10:23:18.897

集合是一维结构。您可以通过创建元素也是集合的集合来实现多维数组。

这是一个如何实现二维数组（矩阵）的示例：

```
SQL> set serveroutput on;
SQL> 
SQL> create or replace procedure Matrix(p_m in number, p_n in number)
  2  is
  3    type T_Array is table of integer;
  4    type T_Matrix is table of T_Array;
  5    l_Matrix T_Matrix := T_Matrix();
  6    l_m varchar2(101);
  7  begin
  8    for i in 1..p_m
  9    loop
 10      l_m  := '';
 11      l_matrix.extend;
 12      l_Matrix(i) := T_Array();
 13      for y in 1..p_n
 14      loop
 15        l_matrix(i).extend;
 16        l_matrix(i)(y) := y;
 17        l_m := l_m || ' | ' || To_Char(l_matrix(i)(y));
 18      end loop;
 19      dbms_output.put_line(l_m);
 20    end loop;
 21  end;
 22  /

Procedure created

SQL> exec matrix(5,5);

 | 1 | 2 | 3 | 4 | 5
 | 1 | 2 | 3 | 4 | 5
 | 1 | 2 | 3 | 4 | 5
 | 1 | 2 | 3 | 4 | 5
 | 1 | 2 | 3 | 4 | 5

PL/SQL procedure successfully completed

SQL> exec matrix(5,7);

 | 1 | 2 | 3 | 4 | 5 | 6 | 7
 | 1 | 2 | 3 | 4 | 5 | 6 | 7
 | 1 | 2 | 3 | 4 | 5 | 6 | 7
 | 1 | 2 | 3 | 4 | 5 | 6 | 7
 | 1 | 2 | 3 | 4 | 5 | 6 | 7 
```

[在此处](http://docs.oracle.com/cd/E11882_01/server.112/e25789/srvrside.htm#CNCPT1787)和[此处](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/composites.htm#CIHIEBJC)了解有关收藏的更多信息

* * *

**对评论的回应**

您也可以成功使用`nested table`。因此，您的代码可能如下所示：

```
SQL> set serveroutput on;
SQL> 
SQL> CREATE OR REPLACE PROCEDURE diff_string(original in varchar2, other in varchar2, result out varchar2)
  2  is
  3    type T_Array is table of integer;
  4    type T_Matrix is table of T_Array;
  5    cost_matrix T_Matrix := T_Matrix();
  6    --antwoord T_Matrix;
  7    l_res varchar2(301);
  8  BEGIN
  9     IF original is NULL THEN
 10        result := other;
 11     ELSIF other is NULL then
 12        result := original;
 13     else
 14         for i in 1 .. length(original)
 15         loop
 16             l_res := '';
 17             cost_matrix.extend;
 18             cost_matrix(i) := T_Array();
 19             for j in 1 .. length(other)
 20             loop
 21                cost_matrix(i).extend;
 22                cost_matrix(i)(j) := i * j;
 23                l_res := l_res || ' | ' || To_char(cost_matrix(i)(j));
 24            end loop;
 25             dbms_output.put_line(l_res);
 26         end loop;
 27     end if;
 28  END diff_string;
 29  /

Procedure created

SQL> variable res varchar2(31);
SQL> exec diff_string('String1', 'String2', :res);

 | 1 | 2  | 3  | 4  | 5  | 6  | 7
 | 2 | 4  | 6  | 8  | 10 | 12 | 14
 | 3 | 6  | 9  | 12 | 15 | 18 | 21
 | 4 | 8  | 12 | 16 | 20 | 24 | 28
 | 5 | 10 | 15 | 20 | 25 | 30 | 35
 | 6 | 12 | 18 | 24 | 30 | 36 | 42
 | 7 | 14 | 21 | 28 | 35 | 42 | 49

PL/SQL procedure successfully completed
res
--------- 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:13:25.060

我实际上设法通过使用 VARRAY 消除了错误。但它不允许动态调整大小（即 VARRAY(length(original)) 或 VARRAY(original.length) 是不允许的。所以现在如果有人给出大于 10 的参数它将失败，我也没有得到任何结果.希望“antwood := cost_matrix”能够显示结果值。还有其他方法吗？

```
CREATE OR REPLACE PROCEDURE diff_string(original in varchar2, other in varchar2, result out varchar2)
is -- Maybe should be as, don't know.

    type T_Array is VARRAY(10) of integer;
    type T_Matrix is VARRAY(10) of T_Array;
    cost_matrix T_Matrix := T_Matrix(null);
    antwoord T_Matrix;
BEGIN
   IF original = NULL THEN
      result := other;
   ELSIF other = NULL then
      result := original;
   else

       for i in 1 .. length(original)
       loop
           cost_matrix.extend;
           cost_matrix(i) := T_Array(null);
           for j in 1 .. length(other)
           loop
               cost_matrix(i).extend;
               cost_matrix(i)(j) := i * j;
           end loop;
       end loop;
       antwoord := cost_matrix;
   end if;
END diff_string;
/

CALL diff_string('hoi', 'hob', :verschil); 
```

# iphone - 从 NSString 中删除特殊字符

> ID：12815724
> 
> 赞同：0
> 
> 时间：2012-10-10T09:06:13.590
> 
> 标签：iphone, ios, nsstring

我正在做 JSON 解析。我想删除许多不同的响应子字符串，因为 HTML 或 ASCII 值出现在我的响应中。喜欢`&#39;`或`$quot;`或`&`等等。

我正在使用以下方法删除子字符串，但是如何删除所有 ASCII 或 HTML 子字符串？

```
NSString *strTe=[strippedString
         stringByReplacingOccurrencesOfString:@"&#39 ;" withString:@""]; 
```

**编辑：**在 HTML 表格标题下 查看此[页面](http://www.asciitable.com/)，我的回复中有这些符号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T09:10:13.253

此代码可能有助于您的查询：

```
- (NSString *)flattenHTML:(NSString *)html 
{    
    NSScanner *theScanner;
    NSString *text = nil;
    theScanner = [NSScanner scannerWithString:html];

    while ([theScanner isAtEnd] == NO) 
   {    
        [theScanner scanUpToString:@"<" intoString:NULL] ; 
        [theScanner scanUpToString:@">" intoString:&text] ;
        html = [html stringByReplacingOccurrencesOfString:[NSString stringWithFormat:@"%@>", text] withString:@""];
   }

   html = [html stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

   return html;
} 
```

# ios - 如何将 plist 文件传递 给（二进制）程序集

> ID：12815729
> 
> 赞同：0
> 
> 时间：2012-10-10T09:06:50.787
> 
> 标签：ios, plist

我正在构建一个将作为二进制程序集分发的库。该库提供了一个模拟器，用于模拟事件以进行测试。当前实现从 plist 文件中读取这些事件，该文件的名称作为参数传递给模拟选择器。这在单元测试中效果很好。

但是当在另一个项目中包含二进制程序集文件（.a）时，它无法打开传递的 plist 文件。不过，另一个项目本身能够在自己的类中打开和解析 plist 文件。

我认为这是由于沙盒机制似乎也适用于每个库。有没有办法将 plist 文件名传递给程序集以便它可以读取它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:37:52.573

我的错误：未捆绑单元测试，因此在此处仅传递文件名是有效的。

该应用程序是捆绑的，所以要访问我必须使用的 plist 文件：

```
[[NSBundle mainBundle] pathForResource:@"SimulationScript" ofType:@"plist"] 
```

应用程序和程序集都可以毫无问题地读取此文件。

# internet-explorer - HTA 应用程序，使用“.htc”文件。需要捕获 HTML-css 更改事件

> ID：12815731
> 
> 赞同：0
> 
> 时间：2012-10-10T09:06:53.347
> 
> 标签：internet-explorer, hta

我正在开发需要 IE 作为工作环境的 HTA 应用程序。IE 有“.HTC”文件来教 HTML 标签“行为”的方式。

好的，一切正常，直到我需要在 HTML 标记的 css 更改时捕获事件。我正在使用计时器的方法，但我想知道是否有更好的方法？（如有必要，可以使用 JavaScript）感谢所有建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:27:40.073

谢谢提姆！使用 propertychange 是正确的解决方案。但不是将此属性应用于正文，我必须将其应用于我需要观看的*每个标签。*

我可以通过 JS 做到这一点。再次感谢！

```
<div onpropertychange="alert('changed!')"> </div> 
```

注意：此方法不会让您知道标签的 innerHTML 是否更改，仅在标签的属性和 css 更改时发出警报。此外，当标签设置为“禁用”时，标签的 css 更改时不会触发任何事件。

关于 IE 的 onpropertychange 的完整参考可以在这里找到：http: [//msdn.microsoft.com/en-us/library/ms536956](http://msdn.microsoft.com/en-us/library/ms536956)

# c# - 单元测试.net Web API。设置查询字符串值

> ID：12815733
> 
> 赞同：4
> 
> 时间：2012-10-10T09:07:09.057
> 
> 标签：c#, asp.net-mvc, rest

我的 ApiController HttpGet 操作的第一行是这个

```
var returnOnlyDefault = (Request.GetQueryNameValuePairs()
    .Any(kv => ((kv.Key.ToLower() == "defaultview") && (kv.Value.ToLower() == "true")))); 
```

这将查找“defaultview”的查询字符串值。代码“有效”，但我在对其进行单元测试时遇到了麻烦。

在我的单元测试中，我正在执行以下操作

```
var controller = new Controllers.ViewsController { Request = new HttpRequestMessage() };
controller.Request.Properties.Add(new KeyValuePair<string, object>("defaultview", "true")); 
```

请求uri当然是空的。测试失败，因为它没有获取查询字符串值。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-06-26T14:00:45.037

您应该设置请求 Uri：

```
controller.Request = new HttpRequestMessage(HttpMethod.Get, "http://localhost:51083/?param1=someValue&param2=anotherValue"); 
```

现在，您的 ApiController 中的 get querystring 参数可以按预期工作：

```
var queryStringParams = Request.GetQueryNameValuePairs().ToList();
var param1 = queryStringParams.FirstOrDefault(kv => kv.Key.Equals("param1")).Value; 
```

param1 现在是 'someValue' 并且单元测试运行。

# c# - Webservice TFS 在线预览

> ID：12815736
> 
> 赞同：1
> 
> 时间：2012-10-10T09:07:14.873
> 
> 标签：c#, web-services, tfs, azure-devops

我想通过 c# 代码访问我的团队基础服务器（在线预览）网络服务。我的问题是找到连接网络服务的正确地址（“http://XXX.tfspreview.com”不是正确的地址）。有人知道这个地址或有一些信息吗？

在微软主页上搜索没有结果。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T09:24:19.617

这是关于这个主题的主题

[http://social.msdn.microsoft.com/Forums/en-US/TFService/thread/a56269d8-7840-4d48-b77a-5aaf1976a2a6/](http://social.msdn.microsoft.com/Forums/en-US/TFService/thread/a56269d8-7840-4d48-b77a-5aaf1976a2a6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T09:41:15.630

您可以添加此命名空间

```
using Microsoft.TeamFoundation.Build.Client;
using Microsoft.TeamFoundation.Client; 
```

示例（服务定位器 TfsTeamProjectCollection ）

```
 TfsTeamProjectCollection teamProjectCollection = TfsTeamProjectCollectionFactory.GetTeamProjectCollection(new Uri("http://tfsURI"));
  var service = (YourTypeOfService)teamProjectCollection.GetService(typeof(YourTypeOfService)); 
```

# asp.net-mvc - TempData 在第二次请求后不会销毁

> ID：12815739
> 
> 赞同：13
> 
> 时间：2012-10-10T09:07:23.357
> 
> 标签：asp.net-mvc, asp.net-mvc-3, tempdata

我在 actionfilter 中的第一次请求时将值放入 TempData。

```
filterContext.Controller.TempData["value"] = true; 
```

之后第二个请求进来，我检查值

```
filterContext.Controller.TempData.ContainsKey("value") 
```

价值就在那里。然后第三个请求进来，我再次检查该值

```
filterContext.Controller.TempData.ContainsKey("value") 
```

并且价值仍然存在。不应该在第二次请求后销毁这个值吗？所有请求都是 AJAX 请求。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-10T09:08:37.497

> 不应该在第二次请求后销毁这个值吗？

只有当你阅读它：

```
var value = filterContext.Controller.TempData["value"]; 
```

如果您不从 TempData 读取值，它不会被驱逐。

下面是`TempData.Items`getter 的定义方式：

```
public object get_Item(string key)
{
    object obj2;
    if (this.TryGetValue(key, out obj2))
    {
        this._initialKeys.Remove(key);
        return obj2;
    }
    return null;
} 
```

请注意，仅当您调用 getter 并且仅当在集合中找到该值时，该值才会被逐出。在您展示的代码中，您所做的只是检查 TempData 是否包含给定的键，但您尚未读取该键的值。

如果需要，您可以手动逐出 TempData 值：

```
filterContext.Controller.TempData.Remove("value"); 
```

还有一种方法可以让您读取值而不删除它：

```
var value = filterContext.Controller.TempData.Peek("value"); 
```

# javascript - 画布图像绘制不适用于所有浏览器

> ID：12815741
> 
> 赞同：0
> 
> 时间：2012-10-10T09:07:25.493
> 
> 标签：javascript, html, canvas

我有这个在画布中绘制图像的简单代码，但它只适用于 Firefox

这是代码：

```
<!DOCTYPE html>
<html>
<head>
<title>CANVAS</title>
</head>
<body>
<canvas id="smallImage" width="600" height="600"></canvas>
<script>
var imgid = document.getElementById('smallImage');
var ctx = imgid.getContext('2d');
var img = new Image();
var immmagine = "flowers.jpg";
img.src = immmagine;
ctx.drawImage(img,0,0);
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:36:58.303

您需要在图像上监听 onload 事件：

```
var imgid = document.getElementById('smallImage');
var ctx = imgid.getContext('2d'); 
var img = new Image();
var immmagine = "flowers.jpg";
img.src = immmagine;
img.onload = function ()
{
 ctx.drawImage(img,0,0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:00:15.467

您需要使用 onload 事件。

```
img.onload = function() {
   ctx.drawImage(img,0,0);
} 
```

# javascript - 动态计算 json 行数

> ID：12815744
> 
> 赞同：1
> 
> 时间：2012-10-10T09:07:41.080
> 
> 标签：javascript, json, extjs4

我今天早上早些时候问了这个问题“这是我的 JSON 文件：

```
[
{
    "Week": "1145",
    "Sev_Logged": "3_major",
    "From": "IN1"
},
{
    "Week": "1145",
    "Sev_Logged": "4_minor",
    "From": "IN1"
},
{
    "Week": "1145",
    "Sev_Logged": "4_minor",
    "From": "IN1"
},
{
    "Week": "1145",
    "Sev_Logged": "4_minor",
    "From": "IN1"
},
{
    "Week": "1145",
    "Sev_Logged": "4_minor",
    "From": "IN1"
},
{
    "Week": "1145",
    "Sev_Logged": "4_minor",
    "From": "IN2"
},
{
    "Week": "1145",
    "Sev_Logged": "3_major",
    "From": "IN2"
},
]; 
```

我想计算每个“周”的“发件人：IN1”字段，例如每周：1145 我会得到：3，对于“发件人：IN2”我会得到 2

谢谢”

感谢 VDP 的回答，所以我这样做了：我的商店现在是这样的：

```
Ext.define('Metrics.store.GraphData', {
extend : 'Ext.data.Store',
model : 'Metrics.model.GraphData',
autoload : true,

proxy : {
    type : 'ajax',
    url : 'data/metrics_data.json',
    reader : {
        type : 'json',
        root : 'data',
        successProperty : 'success'
    }
},
//data : GraphData, //povide inline data or load using proxy
countBy: function(param){
    var count = {};
    this.each(function(item){
        var type = item.get(param);
        if (Ext.isDefined(count[type])){
            count[type]++;
        } else {
            count[type] = 1;
        }                               
    });
    return count;
}
}); 
```

我的模型：

```
Ext.define('Metrics.model.GraphData', {
extend: 'Ext.data.Model',
//fields: ['week', 'sev']
fields : [ 
    {name: 'Week',  type: 'int'},
    {name: 'Sev_Logged',   type: 'string'},
    {name: 'From', type: 'string'}
]
}); 
```

由于我将 extjs 4 与 MVC 模型一起使用，因此我制作了一个控制器来控制按钮的事件，现在它看起来像这样：

```
launchGraph : function(button){
console.log('clicked the apply button');
var chartStore = this.getGraphDataStore();
chartStore.load({
    callback: this.onGraphDataLoad,
    scope: this,
    console.log(chartStore.countBy("From"))
    }); 
```

但是当我单击应用按钮时，我的控制器中出现此错误：

```
"Uncaught SyntaxError: Unexpected token . " 
```

它指向这条线：

```
 "console.log(chartStore.countBy("From"))" 
```

似乎我在引用我的商店时出错了。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T09:14:55.577

如果`var jsonData`是解析上面显示的 json 得到的数组，这将为您提供一个对象，其中每个对象的计数取决于您使用的参数。

```
function CountBy(parameter) {
  var count = {};
  for (var i = 0; i < jsonData.length; i++) {
  var type = jsonData[i][parameter];
    if (count[type] === undefined)  {
      count[type] = 1;
    } else {
      count[type]++;
    }  
  }
  return count;
} 
```

结果：

```
CountBy("From") => {"IN1" : 5, "IN2" : 2}
CountBy("Week") => {"1145" : 7}
CountBy("Sev_Logged") => {"3_major": 2, "4_minor": 5} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T09:42:24.553

如果您使用的是您提供的数组，您可以使用 mimikomi 的答案或类似的 ExtJS 版本：

这是一个[小提琴](http://jsfiddle.net/Vandeplas/NvNVW/)

```
function countBy(data, param) {
    var count = {};
    Ext.each(data, function(item){
        var type = item[param];
        if (Ext.isDefined(count[type]))  {
            count[type]++;
        } else {
            count[type] = 1;
        }  
    });
    return count;
} 
```

如果您从外部位置加载该 json，最好将其加载到商店中。例如，您定义一个模型、一个商店并向您的商店添加“特殊”功能。

```
Ext.define('Week', {
    extend: 'Ext.data.Model',
    fields: [
        {name: 'Week',  type: 'int'},
        {name: 'Sev_Logged',   type: 'string'},
        {name: 'From', type: 'string'}
    ]
});

var store = Ext.create('Ext.data.Store', {
    model: 'Week',
    data : data, //povide inline data or load using proxy
    countBy: function(param){
        var count = {};
        this.each(function(item){
            var type = item.get(param);
            if (Ext.isDefined(count[type])){
                count[type]++;
            } else {
                count[type] = 1;
            }                               
        });
        return count;
    }
});

var countObject = store.countBy("From");

alert(Ext.encode(countObject));
//chrome developper tools, safari, opera can show us the contents of objects in a log too. IE, FF however only tell us it is an object. (pretty useless)
console.log(countObject);
//you can chose you're favorite notation to retreve the value (but I hope you knew this, it's pretty basic javascript)
console.log(countObject.IN1); 
console.log(countObject['IN2']); 
```

这是一个[小提琴](http://jsfiddle.net/NvNVW/2/)。

[有关通过 ajax 将 json 动态加载到商店的更多信息](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.reader.Json)（使用代理）

# java - 少量的 Xmx 是否会因为垃圾回收而导致 java 程序运行效率低下？

> ID：12815753
> 
> 赞同：1
> 
> 时间：2012-10-10T09:08:08.507
> 
> 标签：java, linux, garbage-collection

我的观点是，由于堆大小有限，JVM 是否需要更频繁地运行垃圾收集？**实际上**，它是性能杀手吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:11:54.200

要使用的最佳内存量可能是运行程序的最小堆的 2-5 倍。GC 运行的频率与 GC 后的可用内存量成反比。

> 实际上，它是性能杀手吗？

这取决于您的应用程序，但我认为它是。

* * *

鉴于 RAM 与您的时间成本相比相对便宜，我倾向于确保我有足够的 RAM。您可以以不到 80 美元的价格购买 16 GB。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T09:12:05.623

这种取决于您使用的 gc 和 jdk 的算法。正常的 gc 是一个杀手，因为它会停止其他线程的执行。如果您使用的是 jdk 1.6 或更高版本，您可以使用例如 visualVM 使其可见。有不同的 gc 算法来克服这个问题。在这里，我会将您发送到文档，因为它们的差异最好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T09:15:51.877

在应用程序的内存需求和您给它的内存分配（使用 Xmx）之间找到适当的平衡是一项关键的性能调整活动。

是的，你想让堆足够大，这样 JVM 就不会在持续 GC 上崩溃，这绝对会成为性能杀手。

您需要的堆大小完全取决于应用程序。

# c# - 如何获取所有方法和类声明的 DropDownList，然后单击其中一个就可以了？

> ID：12815756
> 
> 赞同：0
> 
> 时间：2012-10-10T09:08:12.497
> 
> 标签：c#, visual-studio, plugins

似乎我使用书签只是为了跟踪类和方法。问题是行号在编辑时变得不正确。另外，我必须手动设置每个书签。有没有办法在文件中获取类/方法列表并单击直接转到它？也许是一个插件？理想情况下，我想要一个可以单击的图形表示。当然有一个插件在那里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T09:10:28.213

试试 C# Resharper [http://www.jetbrains.com/resharper/](http://www.jetbrains.com/resharper/) - 它需要一些许可证，但真的很值得。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T09:11:15.233

C# Resharper [http://www.jetbrains.com/resharper/](http://www.jetbrains.com/resharper/) - 最好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T09:20:50.457

人们已经建议使用 Resharper，但如果您使用的是 Visual Studio 2010，则可以使用名为**Naviagate To的内置功能**

只需按： `Ctrl`+`,`

您可以在解决方案中搜索文件/类/对象/方法。

有关此页面上导航到的更多信息：http: [//blogs.msdn.com/b/vseditor/archive/2009/09/22/searching-and-navigating-code-in-visual-studio-2010.aspx](http://blogs.msdn.com/b/vseditor/archive/2009/09/22/searching-and-navigating-code-in-visual-studio-2010.aspx)

# php - 如何在命令行上运行 curl？

> ID：12815757
> 
> 赞同：3
> 
> 时间：2012-10-10T09:08:22.193
> 
> 标签：php, apache, curl, composer-php

我试图从[这里](http://getcomposer.org/download/)下载作曲家。但我不知道如何在我的终端中运行它以获得最新的 Composer 版本：

```
curl -s https://getcomposer.org/installer | php 
```

我已经安装了 WAMP 并启用了 cURL

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T09:42:19.177

因此，从评论中，我按照以下步骤开始工作

1.  [从这里](http://curl.haxx.se/download.html)下载 Win32 - Generic -> Win32 2000/XP zip 文件
2.  解压到 c:\windows\system32\ 内的文件夹
3.  现在我可以从 Windows 命令提示符（cmd.exe）运行“curl”命令

# linux - 在 linux 命令行中查找并突出显示文本

> ID：12815768
> 
> 赞同：3
> 
> 时间：2012-10-10T09:08:50.787
> 
> 标签：linux, search, command-line-interface, highlight

我正在寻找一个 linux 命令，它在文本文件中搜索字符串，并在文件中的每次出现时突出显示（颜色）它，而不省略文本行（就像 grep 一样）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T23:12:51.317

我写了这个方便的小脚本。它可能可以扩展以更好地处理 args

```
#!/bin/bash
if [ "$1" == "" ]; then
    echo "Usage: hl PATTERN [FILE]..."
elif [ "$2" == "" ]; then
    grep -E --color "$1|$" /dev/stdin
else
    grep -E --color "$1|$" $2
fi 
```

它对于突出显示正在运行的用户的进程很有用：

```
ps -ef | hl "alice|bob" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-29T08:33:24.157

尝试

```
tail -f yourfile.log | egrep --color 'DEBUG|' 
```

其中 DEBUG 是您要突出显示的文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T01:35:00.677

我认为你的意思是“不省略文本行”（而不是发射）......

我知道没有这样的命令，但是您可以使用这样的脚本（这是一个简单的解决方案，将文件名（不带空格）作为第一个参数，将搜索字符串（也不带空格）作为第二个参数）：

```
#!/usr/bin/env bash
ifs_store=$IFS;
IFS=$'\n';
for line in $(cat $1);
    do if [ $(echo $line | grep -c $2) -eq 0 ]; then
        echo $line;
    else
        echo $line | grep --color=always $2;
    fi
done
IFS=$ifs_store 
```

另存为，例如 colorcat.sh，适当地设置权限（以便能够执行它）并将其称为

```
colorcat.sh filename searchstring 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T00:36:12.490

我最近有这样的要求，并破解了一个小程序来做到这一点。[关联](https://gist.github.com/3977405)

用法：`./highlight test.txt '^foo' 'bar$'`

请注意，这是非常粗糙的，但可以通过一些抛光制成通用工具。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-17T13:02:54.353

使用[dwdiff](https://linux.die.net/man/1/dwdiff)，输出颜色和行号的差异。

```
echo "Hello world @ $(date)" > file1.txt
echo "Hello world @ $(date)" > file2.txt

dwdiff -c -C 0 -L file1.txt file2.txt 
```

[![在此处输入图像描述](../Images/b0b0622daafcc2b17be0dae0e062273d.png)](https://i.stack.imgur.com/htihc.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-22T15:46:47.750

`command | grep -iz -e "keyword1" -e "keyword2"` （如果只搜索单个单词，忽略 -e 开关，-i 忽略大小写，-z 视为单个文件）

或者，在读取文件时 grep -iz -e "keyword1" -e "keyword2" 'filename'

或者

`command | grep -A 99999 -B 99999 -i -e "keyword1" "keyword2"` （如果只搜索单个单词，忽略 -e 开关，-i 忽略大小写，-A 和 -B 表示要显示的关键字之前/之后的行数）

或者，在读取文件时

grep -A 99999 -B 99999 -i -e "keyword1" "keyword2" '文件名'

# php - 登录 Magento 后将客户重定向到自定义 URL/页面

> ID：12815773
> 
> 赞同：1
> 
> 时间：2012-10-10T09:09:05.590
> 
> 标签：php, magento, magento-1.7

我在magento中有一个自定义页面。我的条件是“如果用户没有登录，所以在保存任何更改之前我将用户重定向到登录页面，我想在登录后将用户重定向到我的自定义页面上。”。我正在使用以下代码，登录后它不会在我的自定义页面上重定向我。

```
Mage::app('default');
if( !Mage::getSingleton( 'customer/session' )->isLoggedIn() ){                  
    $session = Mage::getSingleton( 'customer/session' );
    $session->setBeforeAuthUrl('http://'.$_SERVER['HTTP_HOST'].'/custom.html');
    header("Location: /customer/account/login");    
} 
```

它在登录页面上重定向我。如果我使用以下代码而不是`header`它不会将我重定向到登录页面。

```
Mage::app()->getResponse()->setRedirect(Mage::getUrl("customer/account/login")); 
```

或者

```
Mage::app()->getFrontController()->getResponse()->setRedirect(Mage::getUrl('customer/account')); 
```

1）我在同一个域上。

2）“系统”>“配置”>“客户配置”部分“登录选项”->“登录后将客户重定向到帐户仪表板”设置为否。

我想在重定向到登录页面之前设置返回 url。所以登录后它会将用户重定向到返回 url 页面。＆我的自定义页面在magento之外。

这是我的自定义页面代码。

```
$mageFilename = 'app/Mage.php';
require_once( $mageFilename );
umask(0);
Mage::app();
if( !Mage::getSingleton( 'customer/session' )->isLoggedIn() ){                  
    $session = Mage::getSingleton( 'customer/session' );
    $session->setBeforeAuthUrl('http://'.$_SERVER['HTTP_HOST'].'/full-custom.php?sid=8');
    header("Location: /customer/account/login");
    //Mage::app()->getResponse()->setRedirect(Mage::getUrl("customer/account/login"));  
    //Mage::app()->getFrontController()->getResponse()->setRedirect(Mage::getUrl('customer/account'));  
} 
```

请帮忙！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-06T11:22:09.320

I've had a similar problem, and I used different solution. In my scenario Magento redirected user to the last page, he was on while being logged the last time.

At first it was confusing because even after setting *Admin > System > Configuration > Customer Configuration > Login Options > Redirect Customer to Account Dashboard after Logging in* to **NO** i was still being redirected to dashboard.

Finally I realized that that was in my case exactly the last page I was on after logging out recently.

Anyway, I wanted Magento to **always** redirect user after logging, to the last page he currently was on.

I wanted to avoid installing any extensions, or creating additional extension my own (this includes rewriting AccountController). So I simply solved it by local overwrite of Magento/Customer/Model/Session.php where I added $this->unsBeforeAuthUrl(); in login method (after successful authenticate).

```
public function login($username, $password)
{
    /** @var $customer Mage_Customer_Model_Customer */
    $customer = Mage::getModel('customer/customer')
        ->setWebsiteId(Mage::app()->getStore()->getWebsiteId());

    if ($customer->authenticate($username, $password)) {
        $this->unsBeforeAuthUrl();  // <-- my addition
        $this->setCustomerAsLoggedIn($customer);
        $this->renewSession();
        return true;
    }
    return false;
} 
```

Thanks to this now each time user is logged before_auth_url is cleared, which forces magento to redirect user to url stored in referer parameter.

And I had to add referer parameter to my mini.login.phtml form. Which is done like this.

At first on the top of template/customer/form/mini.login.phtml I add:

```
<?php
    $params = Mage::helper('customer')->getLoginUrlParams();
    $ref = isset($params[Mage_Customer_Helper_Data::REFERER_QUERY_PARAM_NAME])?$params[Mage_Customer_Helper_Data::REFERER_QUERY_PARAM_NAME]:false;
?> 
```

And then somewhere inside the I add:

```
<?php if ($ref): ?>
<input type="hidden" name="<?php echo Mage_Customer_Helper_Data::REFERER_QUERY_PARAM_NAME ?>" value="<?php echo $ref ?>"/>
<?php endif; ?> 
```

Now it works the way I want to (at least for now, I created this today). I will try to add some comments when I encounter some problems with this solution.

I'm not sure if its perfect solution (since it requires adding this referer tracking) - maybe Magento stores internally last url somewhere else, and could read it from session.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T09:15:55.967

尝试以下代码进行重定向

```
if( !Mage::getSingleton( 'customer/session' )->isLoggedIn() )
{                  
    $this->_redirect('page_url'); 
} 
```

在 Magento`_redirect`中是页面重定向的属性。应用您的自定义页面 url 而不是使用 `page_url`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-09T04:43:10.620

**第一的：**

转到管理员 > 系统 > 配置 > 客户配置 > 登录选项 > 将否设置为“登录后将客户重定向到帐户仪表板”

**然后：**

打开 \app\code\core\Mage\Customer\controllers\AccountController.php

环顾第 187 行。`Mage::helper('customer')->getAccountUrl()`是指向客户仪表板的重定向 url。将此更改为您想要的网址。

即你可以改变：

```
$session->setBeforeAuthUrl(Mage::helper('customer')->getAccountUrl()); 
```

到

```
$session->setBeforeAuthUrl(Mage::getBaseUrl()); 
```

成功登录后将客户重定向到主页

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-29T12:43:42.140

Redirection after logged In, Logged Out and Registration is very common issue in magento. Please find the code below, it can help you.

```
public function customerLogin()    
{    
    $_session = Mage::getSingleton('customer/session');    
    $_session->setBeforeAuthUrl(CustomUrl);    
} 
```

"Customurl" is a url on which you want to redirect after Logged In.

If you want complete solution for custom url redirection for your ecommerce website after logged In, Logged Out and Registration. Custom Redirection extension can help you. Click on link to get extension. [http://www.magentocommerce.com/magento-connect/custom-redirection.html](http://www.magentocommerce.com/magento-connect/custom-redirection.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-10T17:35:56.520

Basically use **setBeforeAuthUrl**

I'm using this code for redirect to referer

```
<?php Mage::getSingleton('customer/session')->setBeforeAuthUrl($this->getRequest()->getRequestUri());?> 
```

For example in custom login form:

```
<form method="post" action="<?php echo Mage::helper('customer')->getLoginPostUrl() ?>">
<?php Mage::getSingleton('customer/session')->setBeforeAuthUrl($this->getRequest()->getRequestUri());?>
...
...
.... 
```

Regards

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-30T10:16:56.223

try this

```
<?php Mage::getSingleton('customer/session')->setBeforeAuthUrl('your_url'); ?> 
```

# shell - 从 shell 脚本导入函数

> ID：12815774
> 
> 赞同：78
> 
> 时间：2012-10-10T09:09:05.733
> 
> 标签：shell

我有一个我想用 shUnit 测试的 shell 脚本。脚本（和所有功能）都在一个文件中，因为它使安装更加容易。

示例`script.sh`

```
#!/bin/sh

foo () { ... }
bar () { ... }

code 
```

我想写第二个文件（不需要分发和安装）来测试定义的功能`script.sh`

就像是`run_tests.sh`

```
#!/bin/sh

. script.sh

# Unit tests 
```

现在问题出在`.`（或`source`在 Bash 中）。它不仅解析函数定义，还执行脚本中的代码。

由于没有参数的脚本没有什么不好的，我可以

```
. script.sh > /dev/null 2>&1 
```

但如果有更好的方法来实现我的目标，我正在徘徊。

**编辑**

我建议的解决方法在源脚本调用的情况下不起作用，`exit`所以我必须捕获出口

```
#!/bin/sh

trap run_tests ERR EXIT

run_tests() {
   ...
}

. script.sh 
```

该`run_tests`函数被调用，但是一旦我重定向源命令的输出，脚本中的函数就不会被解析并且在陷阱处理程序中不可用

这可行，但我得到以下输出`script.sh`：

```
#!/bin/sh
trap run_tests ERR EXIT
run_tests() {
   function_defined_in_script_sh
}
. script.sh 
```

这不会打印输出，但我收到一个错误，即未定义函数：

```
#!/bin/sh
trap run_tests ERR EXIT
run_tests() {
   function_defined_in_script_sh
}
. script.sh | grep OUTPUT_THAT_DOES_NOT_EXISTS 
```

这不会打印输出，并且`run_tests`根本不会调用陷阱处理程序：

```
#!/bin/sh
trap run_tests ERR EXIT
run_tests() {
   function_defined_in_script_sh
}
. script.sh > /dev/null 
```

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-11-12T19:22:51.690

根据[bash 手册页](http://linux.die.net/man/1/bash)的“Shell Builtin Commands”部分，`.`aka`source`接受一个可选的参数列表，这些参数传递给正在获取的脚本。您可以使用它来引入无操作选项。例如，`script.sh`可能是：

```
#!/bin/sh

foo() {
    echo foo $1
}

main() {
    foo 1
    foo 2
}

if [ "${1}" != "--source-only" ]; then
    main "${@}"
fi 
```

并且`unit.sh`可能是：

```
#!/bin/bash

. ./script.sh --source-only

foo 3 
```

然后`script.sh`将正常运行，并且`unit.sh`可以访问所有函数，`script.sh`但不会调用`main()`代码。

请注意，额外的参数 to`source`不在 POSIX 中，因此`/bin/sh`可能无法处理它 - 因此`#!/bin/bash`在`unit.sh`.

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-11-13T12:07:26.237

从 Python 中学习了这种技术，但这个概念在 bash 或任何其他 shell 中都可以正常工作......

这个想法是我们将脚本的主要代码部分变成一个函数。然后在脚本的最后，我们放置一个“if”语句，它只会在我们执行脚本时调用该函数，而不是在我们获取它时调用该函数。然后，我们从我们的“runtests”脚本中显式调用 script() 函数，该脚本已经获取了“script”脚本，因此包含了它的所有函数。

这依赖于这样一个事实，如果我们获取脚本，bash 维护的环境变量`$0`，即正在执行的脚本的名称，将是**调用**（父）脚本的名称（`runtests`在这种情况下），而不是源脚本.

（我已经重命名`script.sh`只是`script`因为它`.sh`是多余的并且让我感到困惑。:-)

下面是两个脚本。一些笔记...

*   `$@`计算所有作为单独字符串传递给函数或脚本的参数。如果相反，我们使用`$*`，所有参数将连接在一起成为一个字符串。
*   `RUNNING="$(basename $0)"`是必需的，因为`$0`始终至少包括当前目录前缀，如`./script`.
*   测试`if [[ "$RUNNING" == "script" ]]...`。是仅在直接从命令行运行`script`时才导致调用 script() 函数的魔法 。`script`

**脚本**

```
#!/bin/bash

foo ()    { echo "foo()"; }

bar ()    { echo "bar()"; }

script () {
  ARG1=$1
  ARG2=$2
  #
  echo "Running '$RUNNING'..."
  echo "script() - all args:  $@"
  echo "script() -     ARG1:  $ARG1"
  echo "script() -     ARG2:  $ARG2"
  #
  foo
  bar
}

RUNNING="$(basename $0)"

if [[ "$RUNNING" == "script" ]]
then
  script "$@"
fi 
```

**运行测试**

```
#!/bin/bash

source script 

# execute 'script' function in sourced file 'script'
script arg1 arg2 arg3 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-09-21T12:29:54.100

`BASH_SOURCE`如果您使用的是 Bash，则可以通过使用数组来完成与 @andrewdotn 方法类似的解决方案（但不需要额外的标志或取决于脚本名称） 。

脚本.sh：

```
#!/bin/bash

foo () { ... }
bar () { ... }

main() {
    code
}

if [[ "${#BASH_SOURCE[@]}" -eq 1 ]]; then
    main "$@"
fi 
```

run_tests.sh：

```
#!/bin/bash

. script.sh

# Unit tests 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-12-29T19:04:41.793

如果您使用的是 Bash，另一种解决方案可能是：

```
#!/bin/bash

foo () { ... }
bar () { ... }

[[ "${FUNCNAME[0]}" == "source" ]] && return
code 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-27T20:18:29.820

我设计了这个。假设我们的 shell 库文件是以下文件，名为 aLib.sh：

```
funcs=("a" "b" "c")                   # File's functions' names
for((i=0;i<${#funcs[@]};i++));        # Avoid function collision with existing
do
        declare -f "${funcs[$i]}" >/dev/null
        [ $? -eq 0 ] && echo "!!ATTENTION!! ${funcs[$i]} is already sourced"
done

function a(){
        echo function a
}
function b(){
        echo function b
}
function c(){
        echo function c
}

if [ "$1" == "--source-specific" ];      # Source only specific given as arg
then    
        for((i=0;i<${#funcs[@]};i++));
        do      
                for((j=2;j<=$#;j++));
                do      
                        anArg=$(eval 'echo ${'$j'}')
                        test "${funcs[$i]}" == "$anArg" && continue 2
                done    
                        unset ${funcs[$i]}
        done
fi
unset i j funcs 
```

一开始它会检查并警告检测到的任何函数名冲突。最后，bash 已经获取了所有函数，因此它会从它们中释放内存并只保留被选中的函数。

可以这样使用：

```
 user@pc:~$ source aLib.sh --source-specific a c
 user@pc:~$ a; b; c
 function a
 bash: b: command not found
 function c 
```

~

# html - 如何将相对按钮放置在浏览器窗口右侧的固定位置？

> ID：12815776
> 
> 赞同：0
> 
> 时间：2012-10-10T09:09:16.493
> 
> 标签：html, css

我的页面上有一个具有固定左侧值的相对定位按钮，该按钮在滚动时保持其位置。我遇到的唯一问题是浏览器窗口宽度发生变化或客户端设备具有小屏幕时。在这种情况下，按钮位于可见屏幕之外。

我认为定义这个按钮应该总是距离浏览器窗口右限制 50px 会很好。我怎样才能做到这一点？

**更新**：我`float: right`已经使用过，这几乎是我想要的，但按钮仍然靠近浏览器窗口边框（在垂直 scollbar 上方）。将其放置在左侧多 50 像素可以解决此问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T09:11:16.647

你有没有尝试过：

```
div#button {
    position:fixed; /* or position:absolute; */
    right:50px;
    bottom:10px; /* or another value */
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T09:14:21.333

使用`float:right`和`margin-right:50px`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T09:16:08.243

使用`margin-right`和`float:right;`

```
#button{margin-right:20px;float:right;} 
```

# emacs - emacs lisp 和 c-mode：我什么时候在评论区

> ID：12815781
> 
> 赞同：8
> 
> 时间：2012-10-10T09:09:37.300
> 
> 标签：emacs, elisp

我想在 ac/c++ 缓冲区中搜索正则表达式，但我想避免表达式匹配注释区域。有没有办法使用 c 模式来知道一堆文本是否在评论区域内（或者一个点在评论区域内）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-10T13:20:12.047

弄清楚这一点的方法是`syntax-ppss`在 C/C++ 和大多数主要模式下工作。当且仅当您不在字符串或注释中时，例如`(null (nth 8 (syntax-ppss)))`将是非零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:29:02.740

```
(defun re-search-forward-not-in-comment (regexp)
  "Search forward first regexp not inside a comment. "
  (interactive
   (list (read-from-minibuffer "Regexp: ")))
  (while (and (re-search-forward regexp nil t 1)
          (and (nth 8 (syntax-ppss))(nth 4 (syntax-ppss)))))) 
```

# javascript - 使用 jquery 或 ajax 将值传递到另一个页面

> ID：12815782
> 
> 赞同：0
> 
> 时间：2012-10-10T09:09:38.947
> 
> 标签：javascript, jquery, ajax

我正在尝试使用 jquery 将值从一个 JSP 页面传递到另一个页面。在下面的代码中，我想将变量“processId”传递到另一个页面。加载下面的 JSP 页面后，该值应该传递到另一个页面。

我收到错误：“procId 未定义”

```
<head>
<script type="text/javascript" src="jqwidgets/scripts/jquery-1.8.1.min.js"></script>

<script type="text/javascript">
window.onload=passValue;
function passValue()
{
$.post("Testing.jsp", {processId: ""+procId+""});
}
</script>
</head>
<%
String processId = "555";
%>
<form name="fm" id="fm">
<input  type="hidden" id="procId" value="<%=processId%>" name="processId">
</form>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T09:13:17.957

没有把握。但你可以尝试以下

```
$.post("Testing.jsp", {"processId": ""+$("#procId").val()+""}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T09:24:35.570

jQuery 调用应该放在标准块中：

```
$(document).ready(function(){
    //jQuery code here
}); 
```

使用这个块，代码在 DOM 完全加载之前不会执行；您无需为 window.onload 分配函数。 

接下来，要获取 id 为“procId”的输入值，您需要使用常规语法创建一个 jQuery 对象：`$('#procId')`，然后使用`.val()`

所以应该这样做：

```
$(document).ready(function () {
    $.post("Testing.jsp", {"processId": $("#procId").val() })
}); 
```

# entity-framework - EF 代码优先和保存多条记录

> ID：12815787
> 
> 赞同：0
> 
> 时间：2012-10-10T09:09:59.967
> 
> 标签：entity-framework

只需掌握实体框架，我就可以保存、添加、删除等单个实体，如下所示：

```
db.Entry(client).State = EntityState.Modified;
db.SaveChanges(); 
```

我的问题是，如果我想更改几条记录，我应该如何执行此操作，例如，我想选择所有类型为“新”的作业并将类型设置为“完成”。我可以使用 Linq 轻松选择所有作业，但我是否必须循环、更改它们、将状态设置为已修改、保存更改、下一个等？我敢肯定，有一种我只是不知道或设法找到的简单方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:27:45.653

Yes, you would have to loop through each object, but you don't have to save changes after each one. You can save changes after all the changes have been made and update in a single go. Unless there is some reason you need to save before editing the next record.

However, if you have a simple operation like that, you can also just issue a SQL statement to do it.

```
context.Table.SqlQuery("UPDATE table set column = 1 where column2 = 3"); 
```

Obviously, that more or less bypasses the object graph, but for a simple batch statement there's nothing wrong with doing that.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:20:46.270

你确定你需要设置EntityState吗？SaveChanges 将在保存前检测Changes。您不能根据请求一次更新多条记录，但您可以循环，更新值并在循环后调用保存更改。这将导致与数据库的 1 个连接，您的所有更新记录将立即保存在该数据库中。

# asp.net-mvc - 从使用模型更改为视图模型

> ID：12815795
> 
> 赞同：0
> 
> 时间：2012-10-10T09:10:18.797
> 
> 标签：asp.net-mvc, ef-code-first

我有一个列出所有用户的索引页面。这在用户控制器中有以下内容 -

```
 public ViewResult Index()
        {
            return View(userRepository.AllIncluding(user => user.Roles));
        } 
```

然后视图从

```
@model IEnumerable<TRS.Models.User> 
```

然后使用

```
 @foreach (var item in Model) { 
```

循环遍历我模型中的所有用户。

我现在需要将我的模型更改为包含 User 模型和扩展 UserDetails 模型的 ViewModel。

我已更改我的索引视图以使用视图模型 -

```
@model IEnumerable<TRS.ViewModels.RegisterViewModel> 
```

但我不知道我应该如何在我的控制器中填充 ViewModel -

```
public ViewResult Index()
        {

            var viewModel = new RegisterViewModel
            {
                UserName = "???"
                FirstName = "???"
                LastName = "???"
            };

            return View(viewModel);
        } 
```

我假设我需要创建视图模型的一个实例，然后将其传递给视图。但我不明白如何获取每个单独项目的数据。我显然需要在这里获取所有用户的所有数据，然后在我看来遍历它们。任何想法我应该在上面的控制器中做什么？应该用什么代替“？？？” 这样会用所有数据填充 viewModel 吗？或者这是错误的方法？

谢谢

编辑 - 添加模型 -

```
public class User
    {
        [Key]
        public string UserName { get; set; }

        public virtual ICollection<Role> Roles { get; set; }
        public virtual UserDetails UserDetails { get; set; }
}

 public class UserDetails
    {

        [Key]
        public string UserName { get; set; }
        public string Firstname { get; set; }
        public string Lastname { get; set; }

        [Required]
        public virtual User User { get; set; }
} 
```

编辑 - 从视图 -

```
<td>
                @foreach (Role role in item.Roles){
                @role.RoleName <br />
    }</td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T09:21:07.713

```
public ActionResult Index()
{
    var usersVm = userRepository
        .AllIncluding(user => user.Roles)
        .Select(user => new RegisterViewModel
        {
            UserName = user.UserName
            FirstName = user.UserDetails.FirstName
            LastName = user.UserDetails.LastName
        });
    return View(usersVm);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T09:24:44.203

从您的问题中不清楚 UserDetails 是什么样的。

您不应在视图中使用 IEnumerable<RegisterViewModel>。RegisterViewModel 应该是您在视图中需要的所有内容的容器：

```
 public ViewResult Index()
    {
        var usersDetails = GetUserDetails(userRepository.AllIncluding(user => user.Roles));

        var viewModel = new RegisterViewModel
        {
            UserDetails = usersDetails.ToList(),
            SomeMoreDataRequiredByTheView= "1"
        };

        return View(viewModel);
    }

   //you can use automapper to do this dirty job.
   private IEnumerable<UserDetails> GetUserDetails(IEnumerable<User> users)
   {
       foreach(var user in users)
       {
           yield return new UserDetails()
           {
               FullName = user.FirstName + " " + user.LastName,
               // Other stuff you want

           };
       }
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T09:25:12.997

你的视图模型

```
 Public Class RegisterViewModel
   {
      Public IEnumerable<TRS.Models.User> AllUsers {get;set;}
      Public IEnumerable<TRS.Models.UserDetails> UserDetails {get;set;}
   } 
```

然后在你的控制器中

```
public ViewResult Index()
{

    var viewModel = new RegisterViewModel
    {
        AllUsers = userRepository.AllIncluding(user => user.Roles).ToList()
    };

    var DetailList = new list<TRS.Models.UserDetails>();
    foreach(var user in viewModel.AllUsers)
    {
        DetailList.add(new userDetails
       {
          name = user.Name,
          age = user.age, 
          ....
       }
    }

    viewModel.UserDetails = DetailList;

    return View(viewModel);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T09:20:08.383

[Automapper](http://automapper.org/)就是为此而创建的。我强烈推荐它。

阅读 wiki 的[入门](https://github.com/AutoMapper/AutoMapper/wiki/Getting-started)部分。

配置完成后，您的控制器代码将如下所示：

```
List<RegisterViewModel> registrants = 
                  Mapper.Map<List<User>, List<RegisterViewModel>>(users); 
```

尽管您可能想要考虑一个包含注册人列表的视图模型，但这取决于您。

# jsf-2 - JSF 用户管理

> ID：12815813
> 
> 赞同：1
> 
> 时间：2012-10-10T09:11:43.543
> 
> 标签：jsf-2, content-management-system, primefaces

我正在构建一些要嵌入网站的 JSF 接口。我希望允许用户登录网站以查看另一个 JSF 界面，他们可以在其中更新有关网站将提供的服务的详细信息。

我想知道的是，我是否需要从头开始实施登录/注册设施，或者是否已经存在可以轻松使用的现有系统。我使用的数据库是 derby 数据库，应用程序在 GF 服务器上运行。

或者有人可以推荐一些关于使用 JSF 构建自定义用户站点的好资源吗？

抱歉，如果之前有人问过这个问题，而我之前在搜索中错过了这个问题。

磷

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:19:43.533

所有的教科书似乎都提到了容器管理的安全性，但我一直远离它。到目前为止，在我完成的每个应用程序中，我都实现了应用程序管理的身份验证，这为您提供了更多关于如何完成身份验证的灵活性。当然，代价是您将不得不分配几天的时间来实施和摆弄它。

使其变得简单的关键是 1) 在您的 Facelets 模板中合并所有页面都使用的身份验证权限，以便您始终拥有它，以及 2) 拥有一个保存用户登录状态的 @SessionScoped bean。在我正在处理的应用程序中，模板的顶部如下所示：

```
 <div id="top" class="top" style="min-height: 40px">

        <h:form id="formLogout" style="float: right"
                rendered="#{userSession.loggedIn}">
            <h:outputText
                value="Logged In As: #{userSession.sysUser.handle} "
                rendered="#{userSession.loggedIn}" />
            <p:commandLink value="Logout"
                           ajax="false"
                           action="#{userSession.logoutUser}" />
        </h:form>
        <h:panelGrid style="float: right" rendered="#{!userSession.loggedIn}" >
            <h:form id="formLogin">
                <h:outputLabel value="User Handle: " />
                <p:inputText size="16" value="#{userSession.loginHandle}" />
                <h:outputLabel value=" Password: " />
                <p:password value="#{userSession.loginPassword}" />
                <p:commandButton value="Login"
                                 ajax="false"
                                 action="#{userSession.login}" />
                <h:link outcome="/newUser" value=" New User" />
                <h:commandLink action="#{userSession.loginAlan}" value="A" />
            </h:form>
        </h:panelGrid>

        <h:link outcome="/index" value="MyWebApp v#{wisApp.ver}" />
        <h:outputText value=" " />
    </div> 
```

我不会对 UserSession bean 感到厌烦，因为它应该很明显。sysUser属性实际上是从 Derby 数据库中获取的 JPA 实体**。**

（注意额外的**h:commandLink value="A"**。这是一个自动登录的链接，所以*我*不必在开发时一遍又一遍地输入我的用户名和密码。）

这应该是你所需要的。

# variables - SAS 宏改变变量类型

> ID：12815819
> 
> 赞同：1
> 
> 时间：2012-10-10T09:12:02.557
> 
> 标签：variables, types, macros, sas

我正在构建宏 whitch 通过我自己的结构从其他表生成空表。如何更改变量类型？

我的代码中的示例：

```
`%let vname = %sysfunc(getvarc(&dsid,%sysfunc(varnum(&dsid,varName))));
%let vtype = %sysfunc(getvarc(&dsid,%sysfunc(varnum(&dsid,varType))));
%let vformat = %sysfunc(getvarc(&dsid,%sysfunc(varnum(&dsid,varFormat))));

%if &vtype = C %then %do;
    &vname=putc(&vname,&vformat);
%end;` 
```

它不工作......任何其他想法如何改变 var 类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:35:10.107

您应该清楚您是否只需要具有更改数据类型（定义）的某些列的空表，或者您还想实际转换数据内容/值。第一种情况应该容易得多。因为目前在

```
&vname=putc(&vname,&vformat); 
```

您正在尝试转换数据值，而不是定义。变量的定义没有改变，在数据步骤中实际上是不能改变的。***当您的数据步骤中***仍然存在具有相同名称的原始变量时，您无法创建“新”变量。

在数据步骤中，您需要在数据步骤中定义具有不同名称的新变量，并在输出数据集上使用 RENAME（原始名称的新名称）和 DROP（原始名称）选项以在输出数据集中使用相同的名称（我可以如果需要，请澄清）。

对于仅定义空表，PROC SQL 可能更容易，您需要创建如下代码：

```
proc sql;
create table lib.table (
orig_var1 type format informat label
, orig_var2 NEWTYPE format informat label
, ...
);
quit; 
```

可以从dictionary.columns 构建。这也更容易保持变量的原始顺序（在数据步骤中并不那么容易）。如果您想将数字变量的格式化值存储在新的字符变量中，您只需要注意根据所使用格式的长度为字符变量定义适当的长度。

# android - 无法使用 google drive sdk 获取文档内容

> ID：12815820
> 
> 赞同：3
> 
> 时间：2012-10-10T09:12:03.453
> 
> 标签：android, google-drive-api

我可以使用 Google Drive SDK 将文件上传到 Google Drive，但无法下载。我在谷歌驱动器上有一个文档，我想下载并阅读其内容中的文本。我可以使用以下代码获取文件：

```
 file = drive.files().get(fileId).execute(); 
```

downloadUrl 始终为空。我不知道我在哪里看到的，但有人说 Google 文档没有 downloadUrl，您应该改用导出链接。

```
 String downloadUrl = driveFile.getExportLinks().get("text/plain");
    if (downloadUrl != null && downloadUrl.length() > 0) {
        try {
            HttpResponse resp = 
                    drive.getRequestFactory().buildGetRequest(new GenericUrl(downloadUrl)).execute();
            content = new Scanner(resp.getContent()).useDelimiter("\\A").next();
        } catch (java.util.NoSuchElementException e) {
            return "";
        }
    } 
```

运行此代码后，我没有在我的文本文件中获得内容，而是一个看起来像这样的 html 表示：

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Welcome to Google Docs</title>
<style type="text/css">
  html, body, div, h1, h2, h3, h4, h5, h6, p, img, dl,
  dt, dd, ol, ul, li, table, tr, td, form, object, embed,
  article, aside, canvas, command, details, fieldset,
  .... 
```

有人可以解释一下如何从谷歌驱动器中读取文档的内容吗？

**编辑**

所以我不知道如何让下载与 Google Drive SDK 一起工作。但是，我确实让它与此代码一起使用：

```
String downloadUrl = driveFile.getExportLinks().get("text/plain");
HttpClient client = new DefaultHttpClient();
HttpGet get = new HttpGet(downloadUrl);
get.setHeader("Authorization", "Bearer " + token);
org.apache.http.HttpResponse response = client.execute(get);
InputStream inputStream = response.getEntity().getContent();
content = new java.util.Scanner(inputStream).useDelimiter("\\A").next(); 
```

糟糕的是，当我得到使用 Drive SDK 所需做的所有其他事情时。如果有人能弄清楚为什么这是有效的，但不是我在 SDK 中使用的代码，请告诉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:31:57.497

尝试“文本/html”。您正在导出富文本文档，因此 html 比纯文本更有意义。

# hibernate - 休眠和ehcache

> ID：12815822
> 
> 赞同：2
> 
> 时间：2012-10-10T09:12:08.113
> 
> 标签：hibernate, caching, ehcache

我在我的应用程序中使用带有休眠功能的 ehcache。

我可以使用 ehcache 进行缓存，但我正在尝试实现以下目标：

1.  我只想缓存最初在我的应用程序中经常使用的数据库表。

2.  缓存表后，我如何在我的 hql 查询中使用它。就像在我的 hql 查询中一样，我对各自的 db 表使用 Pojo 类名。在这种情况下，我如何使用我的 hql 查询。

请为上述提供一些文档或支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T09:19:12.533

[ehcache 的文档对此进行了详细说明](http://ehcache.org/documentation/user-guide/hibernate#Configure-Hibernate-Entities-to-use-Second-Level-Caching)。

基本上，您可以使用`@Cache`注解来告诉 Hibernate 访问缓存的类型。

在ehcache配置中，可以为每个实体配置一个缓存；类名是关键。这允许您定义每个实体要缓存多少元素。

如果您希望 Hibernate 缓存查询，请将属性设置`hibernate.cache.use_query_cache`为`true`. 当您使用 HQL 时，Hibernate 将“做正确的事”。

**[编辑]**

> 我怎样才能prime缓存？

您可以尝试加载对象，以便它们在 Hibernate 需要它们进行某些查询时位于缓存中。

但是缓存是一个非常复杂的话题。有许多因素允许和阻止使用缓存。如果您只有简单的情况，缓存将“正常工作”，您无需执行任何操作。如果你有复杂的 HQL，任何事情都可能发生。我已经看到了相同查询可能需要 100 毫秒或 10 秒的示例，具体取决于`where`子句中的值。我见过缓存使整个事情变慢的代码。我见过我们从 Hibernate 会话请求底层连接的代码，并且我们自己做了所有事情，因为 Hibernate 根本不符合要求。

通常的方法是使代码尽可能简单，然后在生产环境中运行一段时间。随着时间的推移，用户会开始抱怨速度太慢的地方。然后，您可以优化这几个地方。这样，您就不会在用户不关心的代码上浪费时间。

# iphone - 如何在没有 Interface Builder 的情况下移动现有图像

> ID：12815823
> 
> 赞同：0
> 
> 时间：2012-10-10T09:12:13.847
> 
> 标签：iphone, xcode, uiimageview, move

我在不使用界面生成器的情况下创建了多个图像。我使用了这段代码：

```
for (Row* row in parser.rows) {
        CGRect IphoneFrameImageRect;
        IphoneFrameImageRect = CGRectMake(10, 10, 150.0f, 150.0f);
        UIImageView *IphoneFrame = [[UIImageView alloc] initWithFrame:IphoneFrameImageRect];
        NSString *IphoneFrameurl = [NSString stringWithFormat:@"http://some.url.com/iphone/IphoneFrame.png"];
        [IphoneFrame setImage:[UIImage imageWithData: [NSData dataWithContentsOfURL: [NSURL URLWithString:IphoneFrameurl]]]];
        [IphoneFrame setTag:(i)];
        IphoneFrame.opaque = YES; // explicitly opaque for performance

        [self.view addSubview:IphoneFrame];
        [IphoneFrame release];
} 
```

我需要在横向模式下将这些图像移动到不同的位置。我确实标记了每个图像，看起来我可以使用此标记选择图像。但是我怎样才能给图像一个新的坐标呢？我有这个代码：

```
-(void)positionViews {
    UIInterfaceOrientation destOrientation = self.interfaceOrientation;

    int i=4; //Picture with tag=4 for example
    UIImage *tempImage=(UIImage *)[self.view viewWithTag:(i)];

    // HOW TO MOVE ??

} 
```

我可以使用以下代码通过按钮执行此操作：

```
UIButton *tempButton=(UIButton *)[self.view viewWithTag:i];
[temp setFrame:CGRectMake(x, y, X10ButtonWidth, X10ButtonHeight)]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:33:49.163

您正在混淆两种不同的事物/类：

*   `UIImage`表示图像**数据**及其像素在内存中
*   `UIImageView`表示在屏幕上**显示**图像的视图。

如果您更清楚，an`UIImage`就是. 表示数据/内容的对象与可以在屏幕上显示它的视图不同。`UIImageView``NSString``UILabel`

因此，当您想使用您设置的标签检索您的 imageview 时，您检索一个**view**，尤其是`UIImageView`重要的一个，而不是一个`UIImage`.

* * *

将您的演员更改为`UIImageView`，您将能够以与您`setFrame:`相同的方式调用它`UIButton`（作为类`setFrame:`的方法`UIView`，并且两者都是`UIImageView`和`UIButton`的子类`UIView`）。

```
UIImageView *tempImageView = (UIImageView *)[self.view viewWithTag:(i)];
[tempImageView setFrame:...]; 
```

或者甚至不做任何转换，因为`viewWithTag:`返回 a `UIView`，如果您只想更改框架，这就是您所需要的：如果您只想更改属性，无论是基本视图`UIView`还是特别是 a`UIImageView`或任何类型的视图都无关紧要，`frame`因为这是泛型`UIView`类的一个属性，可以应用于`UIView`任何特定的子类`UIView`。

```
UIView *tempImageView = [self.view viewWithTag:(i)];
[tempImageView setFrame:...]; 
```

# asp.net-mvc-3 - 控制器操作之外的 ASP.Net MVC 3 IF 语句

> ID：12815825
> 
> 赞同：2
> 
> 时间：2012-10-10T09:12:38.680
> 
> 标签：asp.net-mvc-3, ssl

我正在开发一个 ASP.Net MVC 3 Web 应用程序。我需要用 SSL 证书保护我的网站，但是，我只希望在应用程序在我的实时服务器上时使用它，而不是在我的测试服务器上。

因此，我像这样在我的 Web Config 中设置了一个 AppSetting

```
<appSettings>
    <add key="SSL" value="false" />
</appSettings> 
```

然后在我的帐户控制器中，我得到这个值（真或假）并使用该值决定是否在我的登录操作上设置**RequiresHttps**属性。我想做这样的事情

```
public class AccountController : Controller
{
        public string SSL = System.Configuration.ConfigurationManager.AppSettings["SSL"];

        if (SSL.Equals("true"))
        {
            [RequireHttps]
        }
        public ActionResult LogOn()
        {
            return View();
        }
} 
```

但是我知道我不能把我的 IF 语句放在现在的位置，但是，希望你能明白我想要实现的目标。

有人对我如何实施我的想法有任何建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T09:17:18.120

子类化`RequireHttpAttribute`（注意此代码与我原来的答案不同 - 这个新版本会更有效）：

```
public class RequireHttpsIfEnabledAttribute : RequireHttpsAttribute
{
  //this setting can't be changed without a recycle, so get it once and cache it.
  private static readonly Lazy<bool> HttpsRequired = new Lazy<bool>(() => {
    //if the AppSettings["SSL"] returns null you raise an exception if you do a
    //.Equals on it - so do it on the constant instead.  And make sure it's case
    //insensitive!
    return "true".Equals(System.Configuration.ConfigurationManager.AppSettings["SSL"],
      StringComparison.OrdinalIgnoreCase);
  });
  public override void OnAuthorization(AuthorizationContext filterContext)
  {
    //calling the base will fire the HTTPS check.  Not calling it will allow
    //non-SSL requests through
    if (HttpsRequired.Value)  
      base.OnAuthorization(filterContext);
  }
} 
```

现在您只需像以前一样装饰您的控制器/动作 - 但使用您的新属性：

```
[RequireHttpsIfEnabled]
public class AccountController : Controller 
{
  //....
} 
```

# javascript - JavaScript 变量和异步调用

> ID：12815829
> 
> 赞同：0
> 
> 时间：2012-10-10T09:13:06.793
> 
> 标签：javascript, json, asynchronous

我有以下代码，并且阅读[了这个](https://stackoverflow.com/questions/6287345/javascript-value-exists-then-disappears-then-appears-again)，我知道它不会工作，因为 getJSON 调用是异步的。我需要如何更改它以便使用全套标记触发 MarkerClusterer 函数？我尝试将 MarkerClusterer 函数放在 getJSON 调用中，但没有运气......

```
var mcOptions = {gridSize: 50, maxZoom: 9};
var markers = [];

function parse_json(json) {
  if (json.length > 0) {
    for (i=0; i<json.length; i++) {
        var report = json[i];  
        var latLng = new google.maps.LatLng(report.latitude, report.longitude);
        markers[i] = new google.maps.Marker({
            position: latLng, 
            title: report.name + ' ' + report.surf_size_ft_round, 
            url: "/place/"+report.slug 
        });                     

        google.maps.event.addListener(markers[i], 'click', function() {
          window.location.href = markers[i].url;
        }); 
        markers.push(markers[i]);
    }
  } 
}; 

$.getJSON('<%= request.fullpath + ".json" %>', function(stream) {   
if (stream.length > 0) {
  parse_json(stream);
  alert(markers[1].title);  //sanity check - gives result
  }
});   

    alert(markers[5].title);  // sanity check - empty 
var mc = new MarkerClusterer(map, markers, mcOptions); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T09:20:58.040

为什么不放这个代码片段：

```
mc = new MarkerClusterer(map, markers, mcOptions); 
```

在 $.getJSON 的匿名回调函数中？只需`var mc;`在 $.getJSON 范围之外的某个地方声明就可以在其他地方访问它。

或者，您可以在`parse_json`函数结束时触发一个事件，侦听该事件，然后在该事件触发时触发另一个创建 MarkerClusterer 对象的函数。看看这个：[如何在 JavaScript 中触发事件？](https://stackoverflow.com/questions/2490825/how-to-trigger-event-in-javascript)

编辑：

在进一步检查您的代码后，我可以看到您将 marker[i] 设置为一个新的 Marker 实例，然后将其推送到同一实例的标记数组上。您可能希望将 markers[i] 设置为新的 Marker 实例，或者您想创建一个`var marker`，将其设置为新的 Marker 实例，然后推送标记数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T09:21:28.440

也许您需要将它放在作为 $.getJSON 输入的成功函数中？

```
$.getJSON('<%= request.fullpath + ".json" %>', function(stream) {   
    if (stream.length > 0) {
    parse_json(stream);
    alert(markers[1].title);  //sanity check - gives result
    mc = new MarkerClusterer(map, markers, mcOptions);
  }
});   

alert(markers[5].title);  // sanity check - empty 
```

# python - 带有 matplotlib 的乳胶符号

> ID：12815830
> 
> 赞同：2
> 
> 时间：2012-10-10T09:13:11.847
> 
> 标签：python, matplotlib, latex

这可能是一个非常简单的问题，但是每当我远程连接到服务器时，我都会在 matplotlib 中使用乳胶符号时遇到麻烦。

问题是这行代码

```
 xlabel(r'$v_r$ [km s$^{-1}$]') 
```

如果它在代码中，我会收到此错误消息

typeError：强制转换为 Unicode：需要字符串或缓冲区，找到字典

我已经在使用`matplotlib.use('Agg')`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:07:03.510

我认为这是我使用的 numpy 版本的错误。更多细节在这篇文章中解释

[在 Windows 上使用带有对数刻度的 matplotlib 出现 Unicode 错误](https://stackoverflow.com/questions/3479887/unicode-error-using-matplotlib-with-log-scale-on-windows)

他们设法解决了更改 /usr/lib/pymodules/python2.6/matplotlib/font_manager.py 中的某些行的问题

我希望这有帮助！

# php - PHP - 文件获取内容 - 设置最大长度

> ID：12815832
> 
> 赞同：0
> 
> 时间：2012-10-10T09:13:20.400
> 
> 标签：php, file-get-contents, maxlength

我试图让网页的内容达到第 100 个字符。但是，由于某种原因，代码根本没有获取网页。

这是我的代码：

```
$link = "http://www.roblox.com/User.aspx?ID=1";
echo file_get_contents($link, NULL, NULL, -1, 100); 
```

我想要这样做的原因是获取该网页的标题。我无法弄清楚为什么它不会显示。可能是第三个论点，我已经尝试过替代：

```
$opts = array('http'=>array('method'=>"GET",'header'=>"Accept-language: en\r\n" ."Cookie: foo=bar\r\n"); 
```

即使为第三个参数设置了上述变量，它也不起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T09:16:03.487

用这个

```
echo substr(file_get_contents($link),0,100); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T09:30:30.603

你可以试试

```
$link = "http://www.roblox.com/User.aspx?ID=1";
var_dump(file_get_contents($link, NULL, NULL, 0, 100)); 
```

输出

```
string '

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/' (length=100) 
```

# facebook-javascript-sdk - Facebook 应用程序链接和 JS SDK

> ID：12815834
> 
> 赞同：3
> 
> 时间：2012-10-10T09:13:31.997
> 
> 标签：facebook-javascript-sdk

大家好，我有两个关于我的 facebook 应用程序链接和 JS SDK 的小问题。所以让我解释一下：

1-正如我从 Facebook JS SDK 了解的那样，![在此处输入图像描述](../Images/d4b3c1227e0a64e6238d35470e9e4da1.png)应该留空。但是我还是有点头晕，我想确定我们是应该把我们的页面内容放进去还是应该留空？请让我确定一下。

2- 我在我的页面的*css*和*标记*中进行了一些更改，但一天后我在我的 facebook 应用程序链接中看不到一些更改。如果有这种方法，我怎么能看到更改的结果？

非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T11:44:09.167

让我为你回答这个问题：

1) 是的，它应该留空，这是从[JS SDK 文档](https://developers.facebook.com/docs/reference/javascript/)引用的为什么需要它的信息：

> JavaScript SDK 需要该`fb-root`元素才能正确加载，并需要调用以 `FB.init`正确使用您的应用 ID 初始化 SDK。
> 
> `fb-root`不得使用`display: none`或 隐藏该元素`visibility: hidden`，否则 SDK 的某些部分将无法在 Internet Explorer 中正常工作。
> 
> `fb-root`SDK 将预期相对于正文或相对于靠近页面顶部的元素定位的元素插入其中。最好该`fb-root`元素不在带有`position: absolute`or的元素内`position: relative`。如果您必须将 `fb-root`元素放置在定位元素内，那么您还应该将其放置在靠近主体顶部的位置，否则 SDK 的某些部分可能无法正常工作。

2）这很可能是缓存问题，之前已经回答了一个与css问题类似的问题：[Caching for css content for iphone FB APP](https://stackoverflow.com/questions/7101364/caching-for-css-content-for-iphone-fb-app)

为了让您的浏览器/访问者浏览器重新获取您的 CSS 文件，诀窍是在 CSS 文件 url 的末尾传递一个查询参数/变量，如下所示：`?v=1`

```
<link rel="stylesheet" href="css/style.css?v=1"> 
```

这将自动使您的浏览器甚至 facebook 使用新的更改再次获取您的 CSS 文件。确保每次更新文件时都更改数字，以便您可以立即看到更改。

# android - eclipse 无法打开我的 .java 文件..？

> ID：12815840
> 
> 赞同：2
> 
> 时间：2012-10-10T09:13:47.730
> 
> 标签：android, eclipse, nullpointerexception, eclipse-juno

```
An error has occurred. See error log for more details.
java.lang.NullPointerException (Probably The best way of describing an exception).. 
```

当我尝试打开我的 .java 文件时出现上述错误......它只是没有出现在我的编辑器中......我被困在这里......我使用 eclipse juno......

这是我做的。。

1.  我从 eclipse 中删除了我的项目（不是磁盘中的项目），我必须这样做，因为 eclipse 在添加文件后永远无法刷新它的工作空间..它只是找不到它..
2.  从磁盘空间导入项目。

而已..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T01:44:41.820

对于遇到相同问题的其他人，请重新启动 Eclipse 并重试。为 OP 和我工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T09:41:53.780

我不确定，但你可以试试。将您的项目复制到新位置。使用新的工作区重新启动您的 Eclipse 并导入您的项目。只需交叉检查您的项目是否具有所有必要的文件。

# silverlight - 一个视图模型用于多个页面

> ID：12815842
> 
> 赞同：1
> 
> 时间：2012-10-10T09:13:56.097
> 
> 标签：silverlight, mvvm, action, viewmodel

我有一个带有多个页面的视图模型。我还有绑定到此 ViewModel 中属性的不同控件的命令。

我如何知道 ViewModel 中的命令是从哪个控件调用的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:48:33.487

一般不需要知道来源。但是每个状态总是有解决方案:)您可以在 viewModel 中使用一个属性，例如

```
public UIElement Owner {get;set;}
//if(Owner.GetType() ...do bla bla 
```

或者您可以使用 CommandParameter

```
CommandParameter="123" ; CommandParameter="{Binding}" 
```

但我认为如果我们需要了解源代码控制，我们的设计中可能会遗漏一些东西。但在某些条件下，我同意这可能是必要的。

如下面的 java 代码所示，无法获取动作源，我们对具有此概念的源对象不感兴趣。也许模型或模型的一部分行为应该不常见。

```
public void itemStateChanged(ItemEvent e) {
...
Object source = e.getItemSelectable();

if (source == chinButton) {
    //...make a note of it...
} else if (source == glassesButton) {
    //...make a note of it...
} else if (source == hairButton) {
    //...make a note of it...
} else if (source == teethButton) {
    //...make a note of it...
} 
```

# linux - 关于以前的“条件变量”帖子的一些事情

> ID：12815852
> 
> 赞同：1
> 
> 时间：2012-10-10T09:14:24.073
> 
> 标签：linux, operating-system, linux-kernel

问题是关于我浏览的关于条件变量的帖子。[条件变量](https://stackoverflow.com/questions/5716437/condition-variable)

作者先举一个bug的例子：

```
/* in thread 1 */
pthread_mutex_lock(mx); 
if (state == GOOD) {
    pthread_mutex_unlock(mx);  // Here !
    wait_for_event();
    pthread_mutex_lock(mx);
}
pthread_mutex_unlock(mx);

/* in thread 2 */
pthread_mutex_lock(mx);
state = GOOD;
pthread_mutex_unlock(mx);
signal_event(); /* expecting to wake thread 1 up */ 
```

并解释如下：

'这个伪代码示例带有一个错误。如果调度程序决定在 pthread_mutex_unlock(mx) 之后但在 wait_for_event() 之前将上下文从线程 1 切换到线程 2，会发生什么情况。在这种情况下，线程 2 不会唤醒线程 1，而线程 1 将继续休眠，可能永远。

我知道应该如何使用条件变量，正如作者稍后在同一篇文章中所展示的那样。

我可以看到，在这个错误的示例中，'state == GOOD' 判断和 'wait_for_event()' 没有被互斥锁作为一个整体锁定。如果线程 1 在第一个 ' **pthread_mutex_unlock(mx);** '，线程 2 可以将 'state' 更改为其他东西（坏？），并发出信号唤醒线程 1 以继续 'state == GOOD' 逻辑，我认为这是错误的。

但是为什么作者说'在这种情况下，线程 2 不会唤醒线程 1，线程 1 将继续休眠，可能永远。'？

不是'signal_event();' 仍然在线程 2 中调用？我的理解完全正确吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:26:04.430

该错误是由 和 的语义引起`signal_event()`的`wait_for_event()`。如果`signal_event()`在没有人卡的情况下调用`wait_for_event()`，则信号丢失。

除了上下文切换，如果线程 2 运行快而线程 1 运行慢，也会出现同样的问题。在这种情况下，线程 1 中的时间

```
pthread_mutex_unlock(mx); 
```

和

```
wait_for_event(); 
```

可能是当 thread2 完成所有操作时，将信号发送到遗忘状态（因为没有人在等待它）。然后线程 1 等待，它永远不会得到信号（除非线程 2 出于某种原因再次运行）。

# matlab - 将列中的“.txt”数据文件读取到 MATLAB 中的矩阵

> ID：12815854
> 
> 赞同：0
> 
> 时间：2012-10-10T09:14:25.167
> 
> 标签：matlab, file-io

我有一个像

```
86999490    88641807@N00    newyork truck city night light red road street springstreet
86999495    34675390@N00    sky
86999496    97245056@N00    scarborough
86999503    97245056@N00    york
86999507    63656023@N00    grifan
86999508    63656023@N00    grifan
86999509    63656023@N00    grifan 
```

我想把它读到一个矩阵中，让每一列分开。

我怎么能做到？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:16:44.040

使用带有制表符 (\t) 的 textscan 作为分隔符：

```
fid = fopen(fileNm, 'r');
while~feof(fid)
    output = textscan(fid, '%d %s %s', 'Delimiter', '\t')
end 
```

# email - 詹金斯找不到 smtp.gmail.com

> ID：12815857
> 
> 赞同：4
> 
> 时间：2012-10-10T09:14:34.617
> 
> 标签：email, gmail, jenkins

我在 Tomcat 容器中的 RHEL6 上运行 Jenkins。我的计算机在我的公司代理后面，我在插件配置选项卡中定义了它。我可以下载插件以便工作（至少对于端口 8080）。

我现在正在尝试配置 SMTP 服务器。我正在尝试使用我的 localhost SMTP 服务器，但无法使其正常工作，因此我决定首先使用应该可以工作的东西（gmail）进行调试。我已将 SMTP 服务器设置为“smtp.gmail.com”和端口“465”。我也尝试过使用端口 25、587。我得到回应：

```
javax.mail.MessagingException: Unknown SMTP host: smtp.gmail.com;
  nested exception is:
java.net.UnknownHostException: smtp.gmail.com
at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1932)
at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:638) 
```

有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T17:40:56.897

Java Mail 不支持使用 HTTP 代理；[http://www.oracle.com/technetwork/java/faq-135477.html#proxy](http://www.oracle.com/technetwork/java/faq-135477.html#proxy)

然而;

> 如果您的代理服务器支持 SOCKS V4 或 V5 协议（http://www.socks.nec.com/aboutsocks.html，RFC1928）并允许匿名连接，并且您使用的是 JDK 1.5 或更新版本以及 JavaMail 1.4.5 或较新的版本，您可以按照 com.sun.mail.smtp 包的 javadocs 中的描述设置“mail.smtp.socks.host”属性，在每个会话、每个协议的基础上配置 SOCKS 代理。“imap”和“pop3”协议存在类似的属性。

作为替代方案，您可以在本地机器上设置一个 MTA，例如 postfix 或 sendmail，它们将接受 localhost 上的连接，并且可能比 Java 更易于配置以穿透代理配置。

注意：如果您的公司阻止了非 http 端口上的连接（例如，除了 80、8080、443 之外的任何端口），那么您可能需要找到另一个解决方案，也许可以从本地系统管理员那里获得一些支持。

还; 如果您想聪明一点，可以使用 ssh 使用以下命令设置（临时）socks 代理；

```
ssh -D 9090 <remoteserver> 
```

这假设远程服务器具有不受限制的访问权限，您可以将可以处理 SOCKS 的连接客户端指向 localhost：9090。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-11T16:30:57.140

发生这种情况是因为 Gmail 安全性...只需允许通过应用程序访问您的 gmail 帐户转到您的帐户下： [https](https://www.google.com/settings/security/lesssecureapps) ://www.google.com/settings/security/lesssecureapps 它将工作.. smtp.gmail.com是正确的，无需更改。

也不要忘记检查互联网连接。

# mobile-safari - 智能应用横幅通过移动 Safari 地址栏隐藏

> ID：12815858
> 
> 赞同：6
> 
> 时间：2012-10-10T09:14:40.990
> 
> 标签：mobile-safari

我知道智能应用横幅不是文档的一部分，因此“window.scrollTo(0,1)”也会将其隐藏。有什么好的方法来解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T00:28:23.433

我遇到了同样的问题，最终在 HTML5 Boilerplate 移动代码中找到了解决方案。我的问题中的详细信息区域，[隐藏地址栏而不隐藏 iOS 6 上的智能应用横幅](https://stackoverflow.com/questions/14047610/hiding-address-bar-without-hiding-the-smart-app-banner-on-ios-6/14169578)。

# facebook - 在网站上显示 Facebook 墙

> ID：12815864
> 
> 赞同：0
> 
> 时间：2012-10-10T09:15:00.303
> 
> 标签：facebook, facebook-graph-api

有没有办法在网站上显示您的 Facebook 墙？我一直在寻找几天，我能找到的只是显示自己的消息的方法。我正在寻找可以显示完整墙的东西（脚本/代码），包括朋友发布的内容。这甚至可能还是被 Facebook 禁止？我确实在那里搜索了“开发人员 api 站点”，但找不到对此的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:07:03.280

我看不到在网站上显示您的 facebook 墙的意义，因为可以通过将用户指向您的 facebook 帐户来轻松实现这一点。

我建议您改为显示一个 facebook 页面插件，因为您可以获得一些喜欢并且它是免费的。

你能告诉我你为什么要这样做吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T09:44:15.493

这是可能的，但您需要构建自己的自定义版本，因为官方 facebook 不提供任何预构建的插件或代码。

你必须编写很多后端和前端的东西。如果你真的对构建类似的东西感兴趣，你可能想考虑看看这个脚本[Facebook Wall Script 3.0 with PHP and Jquery](http://www.9lessons.info/2011/05/facebook-wall-script-with-php-and.html)

如果您想节省时间，您可以购买该脚本，进行必要的更改并集成 facebook graph API，以便显示来自您的 fb 个人资料的数据，但如果您想构建更高级的版本并且有很多时间，那么您可以构建一个从头开始定制版本。

# c++ - 在 MSVC++ 中覆盖内存分配器

> ID：12815867
> 
> 赞同：4
> 
> 时间：2012-10-10T09:15:04.413
> 
> 标签：c++, visual-c++, visual-c++-2008, c++03

虽然 Microsoft 标准运行时提供了分配函数的调试版本，但它并没有真正起作用，因为您不应该在 C++ 代码中使用裸 new，因此检测指向标准库，或者因为无论如何都无法检测标准库而无处可去。

现在我有了可以产生（和记录）分配回溯的代码，我也使用[了 DUMA](http://duma.sourceforge.net/)。然而，当我们使用流时，替换分配函数的尝试失败了，因为`streambuf`调用了一些调试变体，并且在 new 和 delete 之间这样做不一致。

那么有没有人在微软标准运行时通过覆盖函数而不是丑陋的预处理器技巧来替换分配器的经验？我怀疑它涉及*避免*调试分配器，但出于明显的原因我想保留`_DEBUG`定义（更多的调试代码取决于它）。

注意：我们目前使用 Visual C++ 9.0 (Visual Studio 2008)。

编辑：避免调试分配器不太可能是一个选项，因为 C++ 标准库需要在编译到库的函数和实例化以及用户代码中生成的实例化之间具有一致的 new 和 delete 定义，因为分配可能由一个人完成并由对方释放。顺便说一句，这意味着在包含强制的标题中定义静态内联变体不太可能削减它。

Edit2：动态链接是不可能的，因为 Windows 绑定来自特定 DLL 的符号，因此无法在链接时覆盖它们。但是我们不需要动态链接，也不要使用它，因为主要目标是 WinCE，静态链接是默认的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-09T10:29:02.540

以下是我们的做法（使用 jemalloc，但任何其他分配器都是可能的）：

1.  将自定义内存分配器单独编译为 C 静态库。
2.  将您的 C++ 应用程序与自定义分配器库链接。
3.  覆盖运算符`new`并`delete`在您的 C++ 应用程序中调用自定义分配器。

笔记：

*   自定义分配器必须用 C 而不是 C++ 编写。
*   除非分配器驻留在单独的库中，否则无法确保足够早地初始化分配器。
*   覆盖`malloc`and`free`也是可能的，但在 MSVC 中要困难得多，因为它们不是“弱”链接的，并且因为 MSVC 中有很多自定义变体（例如使用`/FORCE:MULTIPLE`链接器标志）。

示例代码：

```
void* operator new(size_t size)
{
  void* ptr = my_malloc(size);
  if (ptr)
    return ptr;
  else
    throw std::bad_alloc();
}

void* operator new[](size_t size)
{
  void* ptr = my_malloc(size);
  if (ptr)
    return ptr;
  else
    throw std::bad_alloc();
}

void* operator new(size_t size, const std::nothrow_t&) throw()
{
  return my_malloc(size);
}

void* operator new[](size_t size, const std::nothrow_t&) throw()
{
  return my_malloc(size);
}

void operator delete(void* pointer) throw()
{
  my_free(pointer);
}

void operator delete[](void* pointer) throw()
{
  my_free(pointer);
}

void operator delete(void* pointer, const std::nothrow_t&) throw()
{
  my_free(pointer);
}

void operator delete[](void* pointer, const std::nothrow_t&) throw()
{
  my_free(pointer);
} 
```

# python - Python 等号运算符，避免类型错误：( == ) -> 错误

> ID：12815874
> 
> 赞同：2
> 
> 时间：2012-10-10T09:15:12.050
> 
> 标签：python, design-patterns, operators, duck-typing

当 == （等于）运算符用于比较不同类型时，有没有办法获得异常？当尝试对不同类型的对象进行排序时，Python 3 会引发异常。但是 == 仍然返回 False。

还是有其他方法可以避免难以检测由错误类型假设引起的错误？是否有任何设计模式可以提供帮助？

我在想，例如，有人使用别人的 xmlparser.get() 实现，它总是返回一个字符串，即使属性基本上是一个数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T09:16:28.337

不，python 本质上是动态类型的。

如果您*必须*仔细检查类型，请使用[`isinstance()`function](http://docs.python.org/library/functions.html#isinstance)或使用[鸭子类型](http://en.wikipedia.org/wiki/Duck_typing)来测试特定行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T09:18:32.753

> 我在想，例如，有人使用别人的 xmlparser.get() 实现，它总是返回一个字符串，即使属性基本上是一个数字。

您可能希望根据需要通过调用`int`或对其强制将值转换为数字`float`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T09:19:04.680

不。因为对于 ==，推理是平等意味着可比性。如果两个对象甚至不具有可比性，它们就不相等，因此它将返回 false 并且永远不会抛出异常。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-10T09:20:13.067

尽管 Python 具有动态类型，但它很**强大**（不是鸭子）。所以：

```
>>> 42 == 42
True
>>> 42 == 42.0
True
>>> 42 == "42"
False
>>> 42 == int("42")
True 
```

在获取数字的字符串表示时，您必须执行显式类型转换。

另一方面，您可以通过定义方法[`__eq__(self, other)`](http://docs.python.org/reference/datamodel.html#object.__eq__)或[`__cmp__(self, other)`](http://docs.python.org/reference/datamodel.html#object.__cmp__)在您的类中管理自定义对象的比较。

# php - /cache url 请求导致 404 错误

> ID：12815877
> 
> 赞同：0
> 
> 时间：2012-10-10T09:15:19.943
> 
> 标签：php, apache, http-status-code-404

我们正在开发一个 PHP 网络应用程序。最近我们的 apache 日志显示 Apache 为特定情况提供 404 错误页面。日志表明 HTTP_REFERER 是：[http://ourhost.com?gclid=some_id](http://ourhost.com?gclid=some_id)。REQUEST_URI 是：/cache/some_other_id。

我们的 web 应用程序是用 symfony 1.4 构建的。我们的 web 应用程序不提供任何以 /cache 开头的页面，因此它提供 404 页面。Web 应用程序也不提供包含指向 /cache/some_other_id 链接的页面。

为什么 Google（爬虫）会尝试访问以 /cache 开头的 URL？

我们应该如何处理这些 404 错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T09:30:33.677

看来是[这个问题](http://code.google.com/p/chromium/issues/detail?id=132059)。基本上，某种浏览器扩展会发出这样的请求……怀疑是“浏览器伴侣助手”，它是“Ginyas Browser Companion”的一部分，正在发出请求。

我看不到从服务器端可以做多少事情，除了可能会告诉用户他们的浏览器上有恶意软件。

# c# - 如何在加载中动态地将 ComboBox 中的项目设置为 ComboBox 的“SelectedText”属性

> ID：12815878
> 
> 赞同：0
> 
> 时间：2012-10-10T09:15:27.853
> 
> 标签：c#, winforms, combobox

在 WinForm 中，我有一个 ComboBox。我正在尝试做这样的事情。

当 ComboBox 只有 1 个项目时，该项目应设置为 ComboBox 的“选定文本”，当它具有多个项目时，应将第一个项目设置为“选定文本”。

我希望这发生在表单加载时。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:24:26.917

您可以使用

```
if (ComboBox1.Items.Count>0) { ComboBox1.SelectedIndex=0 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T09:25:01.823

如果我理解正确，您希望在组合框中选择/显示组合框的第一项。

这很容易：

```
comboBox1.SelectedIndex = 0; //This will select the first item in the combobox (zero based numbering) 
```

要在表格显示后立即设置，只需将其放在后面

```
InitializeComponent(); 
```

的适当形式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T09:28:12.940

如果组合框只有一项，那么您可以使用以下代码

```
comboBox1.SelectedIndex =0; 
```

如果组合框有多个项目，并且您需要选择特定项目...仅更改索引，索引将从 0 开始，如果您需要显示第二个项目，则索引将为 1

```
comboBox1.SelectedIndex =1; 
```

# c# - 编组 C 和 C#

> ID：12815882
> 
> 赞同：1
> 
> 时间：2012-10-10T09:15:46.543
> 
> 标签：c#, marshalling, unmarshalling

我的项目中有以下编组代码。我对此有几个问题。

```
[DllImport=(Core.dll, SetLastError=true, EntryPoint="CoreCreate", CharSet="CharSet.Ansi", CallingConvention="CallingConvention.Cdecl")]
internal static extern uint CoreCreate(ref IntPtr core); 
```

1.  为什么需要**“内部静态外部”**？这是强制性的吗？为什么使用这个？
2.  什么是**SetLastError**？

> ```
> [StructLayout(LayoutKind.Sequential,CharSet=CharSet.Ansi)]
> internal struct Channel
> {
> internal byte LogicalChannel;
> } 
> ```

为什么**是 LayoutKind.Sequential**？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T09:26:33.870

> 为什么需要“内部静态外部”？

`internal`修饰符只是设置方法的可见性。它不是必需的，`internal`因此您可以声明该方法`private`或`public`根据需要声明该方法，并且可以像使用任何其他*标准*方法一样。

修饰符是必需的`static`，因为它不是实例方法并且该方法*不知道*任何类（它没有`this`指针）。

最后`extern`需要通知编译器该方法没有在此处实现，而是在另一个地方实现（您将指定使用属性的位置）。Evey`extern`方法也必须声明`static`（因为它是一个简单的函数调用，没有任何关于对象的知识）。

> 什么是 SetLastError？

它表示该方法可能会更改线程的最后一个错误代码值。有关此[`GetLastError()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679360%28v=vs.85%29.aspx)功能的详细信息，请参见函数。`SetLastError`如果被调用的函数会改变这个值，那么设置为是一件好事`true`，来自 MSDN：

> 运行时封送处理程序调用 GetLastError 并**缓存返回的值以防止它被其他 API 调用覆盖**。您可以通过调用 GetLastWin32Error 来检索错误代码。

简而言之，它将 GetLastError() 返回的值保存到内部缓存中，因此对系统 API 的任何其他调用（甚至是其他框架函数的内部）都不会覆盖该值。

> 为什么是 LayoutKind.Sequential？

.NET 中的类布局不需要在内存中是顺序的（顺序 = if`A`在之前声明，`B`然后内存布局在`A`之前`B`）。在声明顺序很重要的 C 中，情况并非如此（编译器使用声明来理解原始数据在内存中的布局）。如果您必须与 C 函数进行互操作，那么您必须确定传递给它们的数据的布局。这就是`LayoutKind.Sequential`工作原理：它指示编译器尊重`struct`. 这不是与非托管世界互操作的唯一选项，您甚至可以显式设置每个字段的偏移量（从结构开始）（请参阅 LayoutKind.Explicit）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T09:25:26.743

这不是一个答案，只是一些评论：“内部静态”是一回事，“外部”是调用外部 dll 时需要的另一件事。SetLastError 或 GetLastError 是我们在“旧”时代经常使用的方法，用于从 Windows 获取有关最新处理的错误消息。LayoutKind.Sequential 是一种通知编译器以指定方式布局结构的方法 - 如果向其他系统行进，您可能需要这样做。

# java - 在测试上下文中传递 HTTP 调用

> ID：12815883
> 
> 赞同：1
> 
> 时间：2012-10-10T09:15:49.127
> 
> 标签：java, spring, unit-testing, rest, servlets

我正在尝试对我实现的 Spring bean 进行单元测试，但在这里遇到了困难。该 bean 用于在某些场合调用远程 REST 服务。

但是，在我的测试中，我希望它*在*我的测试上下文中调用模拟 servlet，而不是远程服务器。

调用是使用 Apache 的 httpclient 库进行的，URL 是在 applicationContext 中设置的（所以我可以在测试时向 bean 提供任何假 URI）。该服务应返回一个流。

调用如下所示：

```
HttpClient client = new DefaultHttpClient();
URIBuilder builder = new URIBuilder(theURIProvidedInContext);
// set parameters on builder
URI uri = builder.build();

HttpGet get = new HttpGet(uri);
HttpEntity entity = client.execute(get).getEntity();
return entity.getContent(); 
```

我整个上午都在谷歌上搜索，但只找到了如何对 servlet 进行单元测试。有人可以在这里提供一些见解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T10:17:26.243

您将无法在测试上下文中调用模拟 servlet，因为没有应用程序服务器。相反，您可以提取使用 HTTP 客户端的代码以将调用放入单独的 bean，然后对其进行模拟以返回所需的流。

如果它是 REST 服务，您可以创建一个 JAX-RS 注释类作为测试替身（我不会称之为模拟），并使用像 Grizzly 或 Jersey 这样的嵌入式服务器启动它。这将为您启动一个 HTTP 服务器。您的注释类可以抛出 404、500 等，具体取决于您希望测试如何进行。请参阅[带有嵌入式服务器的 JAX-RS](https://stackoverflow.com/questions/8277409/jax-rs-with-embedded-server)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T09:50:38.347

[`com.rexsl.test.ContainerMocker`](http://www.rexsl.com/rexsl-test/testapidocs/com/rexsl/test/ContainerMocker.html)从com.rexsl [:rexsl-test:mock:0.3.8 尝试](http://www.rexsl.com/rexsl-test/)（我是开发人员）：

```
URI home = new ContainerMocker()
  .expectMethod("GET")
  .expectHeader("Accept", Matchers.startsWith("text/"))
  .returnBody("<done/>")
  .returnStatus(200)
  .mock()
  .home(); 
```

现在你有了一个运行着 HTTP 容器的 URI，你可以将它注入到你的类中。

# python - 遍历模块中的字典

> ID：12815887
> 
> 赞同：1
> 
> 时间：2012-10-10T09:15:56.340
> 
> 标签：python, iteration

我导入了一个只包含几个字典的模块。我怎样才能迭代那些？类似的东西

```
import moduleX as data
for d in data:
    do stuff with d 
```

这显然不起作用，因为模块不可迭代。有没有办法从模块中提取所有字典作为一个集合并遍历该集合？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T09:29:13.180

我的答案：

```
import moduleX as data

for k, v in data.__dict__.iteritems():
    if isinstance(v, dict) and not k.startswith('_'):
        # do something
        pass 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T09:24:40.240

我的 2 美分解决方案：

```
>>> for item in dir(data):
...     print item
...     if eval('type(t.'+item+')') is dict: print item, "is a dict"
... 
```

或更好：

```
>>> for item in dir(data):
...     if eval('isinstance(data.'+item+', dict)') and not item.startswith('_'): 
            print item , "is a dict"
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T09:23:12.657

你有没有尝试过：

```
for k,v in data.__dict__.items():
    if isinstance(v,dict) and k not in __builtins__:
        pass 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-24T02:31:20.967

您可以使用`vars(object)`：

```
import the_module_with_dictionaries as my_mod

#Get just names of defined dictionaries
for case in vars(my_mod):
    print(case)

#Get the values in those dictionaries
for case in vars(my_mod).values():
    print(case)

    if isinstance(case, dict):
        print("Yay found a dict") 
```

# mysql - SQL IN 子查询

> ID：12815888
> 
> 赞同：0
> 
> 时间：2012-10-10T09:16:00.053
> 
> 标签：mysql, sql

我试图做一个看起来像这样的查询：

```
SELECT `online`.user_id, users.profile_image_url, profile_info.profile_text, users.kind_of_relationship, users.gender_search, users.country
FROM `online`, users, profile_info 
WHERE (`online`.user_id = users.id)
AND (`online`.user_id = profile_info.profile_user_id)
AND (users.user_age >= '25' AND users.user_age <= '38')
AND (users.kind_of_relationship = 'Friendship')
AND (users.gender = 'female')
AND users.country IN (SELECT searching_countries.country FROM searching_countries, `online` WHERE `online`.user_id = searching_countries.user_id); 
```

**它失败了。**

但是，如果我像这样运行此查询

```
SELECT `online`.user_id, users.profile_image_url, profile_info.profile_text, users.kind_of_relationship, users.gender_search, users.country
FROM `online`, users, profile_info 
WHERE (`online`.user_id = users.id)
AND (`online`.user_id = profile_info.profile_user_id)
AND (users.user_age >= '25' AND users.user_age <= '38')
AND (users.kind_of_relationship = 'Friendship')
AND (users.gender = 'female')
AND users.country IN ('Sweden', 'Austria'); 
```

**然后查询工作正常。**

另外，如果我只运行查询：

```
SELECT searching_countries.country FROM searching_countries, `online` WHERE `online`.user_id = searching_countries.user_id 
```

我得到结果瑞典，奥地利..

任何想法为什么这个**IN(SELECT search_countries.country FROM search_countries, `online`WHERE `online`.user_id = search_countries.user_id) 不想工作？**

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:50:20.190

我认为这成功了，这就是我现在的解决方案。

对不起，如果有任何误解，但我仍然想分享我是如何通过做一个 in 来解决我的问题的。事情有时不需要那么复杂:)

```
SELECT `online`.user_id, users.user_name, users.profile_image_url, profile_info.profile_text, users.kind_of_relationship, users.gender_search, users.country
FROM `online`, users, profile_info  
WHERE (`online`.user_id = users.id)
AND (`online`.user_id = profile_info.profile_user_id)
AND (users.user_age >= '25' AND users.user_age <= '38')
AND (users.kind_of_relationship = 'Friendship')
AND (users.gender = 'female')
AND users.country IN (SELECT country FROM searching_countries WHERE user_id ='55'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T09:17:49.417

```
UNION SELECT `online`.user_id, users.profile_image_url, profile_info.profile_text, users.kind_of_relationship, users.gender_search, users.country FROM `online`, users, profile_info  WHERE (`online`.user_id = users.id) AND (`online`.user_id = profile_info.profile_user_id) AND (users.user_age >= '25' AND users.user_age <= '38') AND (users.kind_of_relationship = 'Friendship') AND (users.gender = 'female') AND users.country IN ('Sweden', 'Austria'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T09:18:10.117

`ALIAS`在子查询中为`online`表添加一个。

```
SELECT ...
FROM...
WHERE....
...AND (users.gender = 'female')
AND users.country IN
(
SELECT searching_countries.country 
FROM searching_countries, `online` x
WHERE x.user_id = searching_countries.user_id
) 
```

# java - Java 将 " 替换为 \"

> ID：12815891
> 
> 赞同：1
> 
> 时间：2012-10-10T09:16:08.727
> 
> 标签：java, string, replace

我正在尝试将包含 " 的字符串替换为 \" ，下面是我尝试过的程序

```
 String s="\"/test /string\"";
    s = s.replaceAll("\"", "\\\"");
    System.out.println(s); 
```

但我得到与字符串“/test /string”相同的输出。为什么我的替换功能不起作用。如果我做

```
 s = s.replaceAll("\"", "\\\\\""); 
```

然后我得到我想要的输出 \"/test /string\" 。为什么以前的 dint 工作，即使在代码中我试图用 \ 替换“”

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-10T09:17:16.183

您正在使用[`String.replaceAll`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)，它将正则表达式作为其输入，包括替换。如记录在[`Match.replaceAll()`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#replaceAll%28java.lang.String%29)：

> 请注意，替换字符串中的反斜杠 (\) 和美元符号 ($) 可能会导致结果与将其视为文字替换字符串时的结果不同。

您实际上只是在尝试直接替换而不涉及正则表达式，因此请[`String.replace`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29)改用：

```
s = s.replace("\"", "\\\""); 
```

# javascript - 当javascript进入无限循环和递归调用时如何调试javascript？

> ID：12815892
> 
> 赞同：48
> 
> 时间：2012-10-10T09:16:09.137
> 
> 标签：javascript, debugging

当您处于无限循环或递归调用中时，基本上浏览器会停止响应任何内容（在 Chrome 或 FF 上）。您看不到日志，无法进入调试器，甚至无法打开控制台本身。浏览器只是简单地冻结。这太烦人了。看来我只能坐在这里挠头……任何人都可以阐明如何解决这个问题？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-10-10T09:19:15.460

您可以尝试的另一个技巧是打开 Chrome 中的 Web 开发人员工具，并在浏览器明显挂起时尝试​​点击*暂停。*然后它应该在当前执行的行处中断。通过一些步骤，您应该了解这一点。

假设您知道（或怀疑）发生无限循环的函数，您可以添加如下代码：

```
var calls = 0;
function iSuspectToBeLoopingInfititely() {
  calls += 1;
  if (calls > 100) { debugger; }
} 
```

一旦方法被调用 100 次，这将停止 Chrome 中的 JavaScript 调试器。`debugger;`注意：如果您确实打开了“开发者工具”窗口，Chrome 只会因调用而中断。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-07-26T13:36:46.600

找到了另一种调试方式。在我的情况下，错误被捕获，因此没有错误记录到控制台。发现复选框的错误`Pause on caught exceptions`。您可以在选项卡下的 den 开发工具中找到该`Sources`选项。要显示并启用复选框，请单击最后一个图标：

[![在此处输入图像描述](../Images/5a5314a4143a117d26cc152d50972763.png)](https://i.stack.imgur.com/DgUCl.png)

启用此功能后，调试器会在每个捕获的异常上暂停。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-22T14:45:29.280

我在 Chrome 中遇到了问题，我会在浏览器窗口中看到“在调试器中暂停”，但看不到 Chrome 可能在哪里混淆了，因为它处于循环中......在 Firefox 中，它认识到它花费的时间太长，然后弹出窗口在 30 秒到 1 分钟后出现，说明文件和总行 # 它已冻结，这有助于进一步调试并在该区域周围设置断点。

# sql - sql查询无法正常工作

> ID：12815896
> 
> 赞同：-5
> 
> 时间：2012-10-10T09:16:27.310
> 
> 标签：sql

```
USE [cms]
GO
/****** Object:  StoredProcedure [dbo].[SpGetRelatedProducts]    Script Date: 10/10/2012 14:35:39 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER proc [dbo].[SpGetRelatedProducts](@pid int)
AS
DECLARE @subcate int;
select subcate_id as subcate from product where pid=@pid
SELECT *
FROM product
where product.subcate_id=@subcate

exec SpGetRelatedProducts 2 
```

上面的 sql 查询无法正常工作。

我只想要那些具有 subcatid=(subcatid of given pid) 的产品的产品详细信息。

有2个问题

1.  应该只出现 1 个输出而不是 2

2.  第二个输出不能正常工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T09:19:50.703

尝试这个：

```
alter proc [dbo].[SpGetRelatedProducts](@pid int)
as

select *
from product as p1
where p1.subcate_id in (
                         select p2.subcate_id 
                         from product as p2
                         where p2.pid = @pid
                       ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T09:18:50.007

未`@subcate`分配参数：

```
select @subcate = subcate_id from product where pid=@pid

select * from product where product.subcate_id = @subcate 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T09:27:38.750

您也可以在一份声明中完成这一切

```
SELECT
               P1.* 
    FROM
             product P1
        JOIN
             prodcut P2
                 ON p1.subcate_id = p2.subcate_id
    WHERE
        P2.pid = @pid 
```

而不必担心设置中间变量。

# c# - 为什么我会收到错误“使用未分配的局部变量”？

> ID：12815897
> 
> 赞同：1
> 
> 时间：2012-10-10T09:16:27.450
> 
> 标签：c#

我在下面有这段代码：

```
string mybytes(int[] sbytes)
{
    string bytesss;
    for(int i=1; i< sbytes.GetUpperBound(0)+1;i++)
    {
        bytesss += "," + IntToHex(sbytes[i - 1]).ToString();
    }
    return bytesss;
}

private string IntToHex(int number)
{
    return string.Format("{0:x}", number);
} 
```

为什么它不断引发“使用未分配的局部变量”错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T00:05:17.393

这里的问题是，在您尝试连接到它之前，没有初始化名为 bytesss 的局部变量。这样做类似于尝试将字符串连接为 null，只是没有任何意义。考虑以下代码。

```
string bytesss = null;
bytesss += ","; 
```

或者换一种说法……

```
string bytesss = null + ","; 
```

这些事情都没有意义，因此您需要确保在尝试连接之前将 bytesss 设置为某个初始值。例如：

```
string bytesss = ""; 
```

或者

```
string bytesss = string.Empty; 
```

最后，您还可以做一些其他的事情来简化您的代码。如果您使用的是 .NET 框架的最新版本并拥有 LINQ，则可以执行以下操作：

```
string mybytes(int[] sbytes)
{ 
    return string.Join(",", sbytes.Select(i => IntToHex(i)).ToArray());
} 
```

或者，如果您使用的是旧版本，您可以执行以下操作：

```
string mybytes(int[] sbytes)
{ 
    List<string> list = new List<string>();

    foreach(int i in sbytes)
        list.Add(IntToHex(i));

    return string.Join(",", list.ToArray());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T09:18:12.920

C# 编译器希望你`provide value to string variable before you use it`，如果它`does not go in the for loop as compiler does not know whether control will go in for loop`在执行期间怎么办。如果控制不进入 for 循环方法将返回编译器不喜欢的未分配变量并给你错误。你就是`using the value of variable before assigning it due to += operator`这样，你会`get error due to this over here`的。分配空字符串可以防止我们出现编译错误，因为下面给出的语句分配了空字符串。

```
string  bytesss = string.Empty; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T09:20:08.073

您已经声明了字符串而没有对其进行初始化。尝试将其声明为“string bytess = String.Empty;” 反而。[这篇文章](http://msdn.microsoft.com/en-us/library/ms228362.aspx)是一个很好的起点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T09:21:44.157

在您的代码中使用以下内容。它解决了这个问题。

```
string  bytesss = string.Empty; 
```

或者

```
string bytesss = ""; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T09:18:02.620

字符串字节；

应该

字符串 bytesss = String.Empty;

试试看。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-10T09:18:14.047

好吧，您永远不会在代码中进行初始化`bytesss`。

将其更改为：

```
string bytesss = ""; 
```

您的代码中实际上存在两个问题：

1.  如果`sbytes.GetUpperBound(0)`返回 0，则永远不会进入您的循环，因此`bytesss += ...`永远不会执行。
2.  即使进入循环，你仍然有问题。`bytesss += ...`相当于`bytesss = bytesss + ...`。但是`bytesss`你的循环的第一次迭代是什么？它是未定义的，因为它从未被初始化。

# google-app-engine - GAE/J 上的 BouncyCastle

> ID：12815899
> 
> 赞同：1
> 
> 时间：2012-10-10T09:16:37.450
> 
> 标签：google-app-engine, bouncycastle

根据this Issue on Google Code for GAE，BouncyCastle 应该可以正常工作。谁能证实这一点？因为我不能让它运行...

[http://code.google.com/p/googleappengine/issues/detail?id=1612#c18](http://code.google.com/p/googleappengine/issues/detail?id=1612#c18)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T09:19:54.670

[Cumulus4j](http://cumulus4j.org/latest-stable/)显然在 GAE/J 上运行良好，它使用 BouncyCastle。没用过，但是那个软件背后的人在他们的测试中

# javascript - MediaWiki 1.19：如何在头部加载 JavaScript？

> ID：12815903
> 
> 赞同：2
> 
> 时间：2012-10-10T09:16:49.353
> 
> 标签：javascript, mediawiki, modernizr

我想将 Modernizr 用于我的 MediaWiki 皮肤，但似乎 ResourceLoader 仅在`<body>`. 有没有办法让我加载它`<head>`？

根据下面@Bergi 的回答，我创建了一个带有“顶部”位置的扩展，以使其加载到头部：

**扩展/Modernizr/Modernizr.php**

```
<?php

$wgResourceModules['ext.Modernizr.foo'] = array(
    'scripts' => 'modules/modernizr-2.6.2.min.js',
    'remoteExtPath' => 'Modernizr',
    'position' => 'top'
); 
```

modernizr-2.6.2.min.js 文件位于**extensions/Modernizr/modules/**文件夹中。

并按如下方式加载： **LocalSettings.php**

```
require_once( "$IP/extensions/Modernizr/Modernizr.php" ); 
```

在`execute()`我的皮肤文件中的函数中：

```
global $wgOut;
$wgOut->addModules('ext.Modernizr.foo'); 
```

这是打电话的地方不对`$wgOut->addModules()`吗？

Modernizr 仍未加载或运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T09:42:47.267

是的，您可以在定义中[`position`为脚本指定一个参数。](http://www.mediawiki.org/wiki/ResourceLoader/Migration_guide_for_extension_developers#Inline_JavaScript)[`$wgResourceModules`](http://www.mediawiki.org/wiki/Manual%3a%24wgResourceModules)将其设置`top`为modernizr，然后通过[`$wgOut->addModules`](http://www.mediawiki.org/wiki/ResourceLoader/Developing_with_ResourceLoader#Server-side).

# asterisk - Dahdi 配置用于单台机器中的多个 digium 卡

> ID：12815905
> 
> 赞同：1
> 
> 时间：2012-10-10T09:16:55.977
> 
> 标签：asterisk, telephony

单机如何配置多张digium卡。我需要 system.conf 文件中的配置。我已经配置好了。但它不能正常工作。第一张卡有效。第二张卡不工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:27:09.853

问题有点模糊。这是 2 个 4Port 卡的 system.conf。
该文件已由 /usr/sbin/dahdi_genconf 创建（+ 之后进行了一些修改）
***注意：***命令 /etc/dahdi/modules 中不需要的所有驱动程序。它有时会产生问题。

```
# ***************************************************************************
# Span 1: TE4/0/1 "T4XXP (PCI) Card 0 Span 1" (MASTER) HDB3/CCS/CRC4 ClockSource 
# span=1,1,0,ccs,hdb3,crc4
span=1,0,0,ccs,hdb3,crc4
# termtype: te
bchan=1-15,17-31
dchan=16
echocanceller=mg2,1-15,17-31

# ***************************************************************************
# Span 2: TE4/0/2 "T4XXP (PCI) Card 0 Span 2" HDB3/CCS/CRC4 
span=2,0,0,ccs,hdb3,crc4
# termtype: te
bchan=32-46,48-62
dchan=47
echocanceller=mg2,32-46,48-62

# ***************************************************************************
# PSTN
# Span 3: TE4/0/3 "T4XXP (PCI) Card 0 Span 3" HDB3/CCS/CRC4 
# span=3,3,0,ccs,hdb3,crc4
span=3,1,0,ccs,hdb3,crc4
# termtype: te
bchan=63-77,79-93
dchan=78
echocanceller=mg2,63-77,79-93

# ***************************************************************************
# Span 4: TE4/0/4 "T4XXP (PCI) Card 0 Span 4" HDB3/CCS/CRC4 
# span=4,4,0,ccs,hdb3,crc4
span=4,0,0,ccs,hdb3,crc4
# termtype: te
bchan=94-108,110-124
dchan=109
echocanceller=mg2,94-108,110-124

# Span 5: TE4/1/1 "T4XXP (PCI) Card 1 Span 1" HDB3/CCS/CRC4 RED
span=5,0,0,ccs,hdb3,crc4
# termtype: te
bchan=125-139,141-155
dchan=140
echocanceller=mg2,125-139,141-155

# Span 6: TE4/1/2 "T4XXP (PCI) Card 1 Span 2" HDB3/CCS/CRC4 RED
span=6,0,0,ccs,hdb3,crc4
# termtype: te
bchan=156-170,172-186
dchan=171
echocanceller=mg2,156-170,172-186

# Span 7: TE4/1/3 "T4XXP (PCI) Card 1 Span 3" HDB3/CCS/CRC4 RED
span=7,0,0,ccs,hdb3,crc4
# termtype: te
bchan=187-201,203-217
dchan=202
echocanceller=mg2,187-201,203-217

# Span 8: TE4/1/4 "T4XXP (PCI) Card 1 Span 4" HDB3/CCS/CRC4 RED
span=8,0,0,ccs,hdb3,crc4
# termtype: te
bchan=218-232,234-248
dchan=233
echocanceller=mg2,218-232,234-248

# Global data

loadzone    = de
defaultzone = de 
```

# java - 分离代码和GUI的设计

> ID：12815907
> 
> 赞同：0
> 
> 时间：2012-10-10T09:17:00.740
> 
> 标签：java, javafx, playlist

我需要创建一个播放列表，我想通过使用两个类来分离代码/逻辑和 GUI：

*   `Playlist`（代码/逻辑）
*   `PlaylistGui`（图形用户界面）

应该可以单独使用播放列表类，例如在某种命令行环境中。现在的问题是，当使用 GUI 时，如何将两个类组合在一起？到目前为止我的想法：

*   从类中公开一个可观察列表，在类上`Playlist`创建一个方法`setItemSource(Playlist source)``PlaylistGui`
*   不确定在 Java 中是否可行，只要从 .NET 中了解这一点：让`Playlist`类触发事件并让`PlaylistGui`它们捕获它们，应该导致解耦代码吗？:-)

打开新想法 :-) 注意我使用的是 Java 7 和 JavaFX，虽然我猜 JavaFX 不会限制可能性，只是扩展它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:24:16.810

Java 中的事件：http: [//castever.wordpress.com/2008/07/31/how-to-create-your-own-events-in-java/](http://castever.wordpress.com/2008/07/31/how-to-create-your-own-events-in-java/)

其他替代方案是： [Java 委托？](https://stackoverflow.com/questions/44912/java-delegates) 或两者都作为通过套接字进行通信的单独进程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T19:44:52.177

我认为你的基本概念是合理的，责任下放。

我将创建模型的接口，仅公开您认为任何基本控制器/查看器都需要的那些方法。这意味着您可以在不影响任何依赖它的组件的情况下更改实现。

侦听器本质上只是一种回调机制，感兴趣的各方在其中注册自己（通过公共接口），以便在他们感兴趣的事情发生时得到通知。

查看[编写事件侦听器](http://docs.oracle.com/javase/tutorial/uiswing/events/index.html)以获取更多信息。

我会从一个通用库开始，它定义了所有各方都需要知道的基本接口（例如`PlayList`和监听器）。

这将允许根据您的需要设计播放列表的“n”个实现

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T14:40:00.573

查看 FXML、控制器和 SceneBuilder 工具。

# javascript - 在一个页面上合并多个 javascript 文件

> ID：12815912
> 
> 赞同：0
> 
> 时间：2012-10-10T09:17:25.173
> 
> 标签：javascript, jquery, validation, carousel

我几乎完成了一个网站，但我正在努力结合两个不同的 javascript 文件......如果我排除 A，B 工作。如果我排除 B，A 有效。所以似乎没有中间人。

我正在尝试将 JQuery 表单验证和 JCarousel 结合起来。如您所见，我必须排除验证脚本才能使 Carousel 正常工作...

没有办法将这两个脚本结合起来吗？我已经[尝试了 JQuery 文档中的 $j-trick](http://docs.jquery.com/Using_jQuery_with_Other_Libraries)，但没有运气。

我已按此顺序包含文件：

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

<script type="text/javascript" src="includes/js/jquery-1.6.min.sliding.js"></script>
<script type="text/javascript" src="includes/js/jquery.easing.1.3.js"></script>
<script type="text/javascript" src="includes/js/hover.js"></script>
<script type="text/javascript" src="includes/js/jquery.jcarousel.js"></script>

<!-- js links -->
<script type="text/javascript" src="includes/js/coda.js"></script>
<script type="text/javascript" src="includes/js/placeholder.js"></script>
<script language="javascript" src="includes/js/popup/modal.popup.js"></script>

<script type="text/javascript" src="includes/notify/js/jquery.noty.js"></script>

<!-- THIS MUST BE COMMENTED OTHERWISE THE CONTACT SLIDER DOENS'T WORK!!

    MUST FIX!!!

    <script type="text/javascript" src="includes/js/form/jquery.validationEngine-nl.js" charset="utf-8"></script>
    <script type="text/javascript" src="includes/js/form/jquery.validationEngine.js" charset="utf-8"></script>

    <script src="includes/lightbox/lightbox.js"></script>

-->

<script src="includes/lightbox/lightbox.js"></script>

<!-- JQuery UI -->
<script type="text/javascript" src="includes/js/jquery-ui/development-bundle/ui/jquery.ui.core.js"></script>
<script type="text/javascript" src="includes/js/jquery-ui/development-bundle/ui/jquery.ui.widget.js"></script>
<script type="text/javascript" src="includes/js/jquery-ui/development-bundle/ui/jquery.ui.datepicker.js"></script>
<script type="text/javascript" src="includes/js/jquery-ui/development-bundle/ui/jquery.ui.timepicker.js"></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T09:49:13.057

我可以看到问题，但看不到是什么原因造成的。我想您正在通过 PHP 输出一些 javascript，但它出现在`<html>`标签上方。

如果你去查看源：http://www.YOURDOMAIN.be/new/index.php?page=&action=shout

html 看起来像这样：

```
<script>
                $(document).ready(function(){noty({"text":"Uw shout is succesvol toegevoegd.",
                "layout":"top","type":"success","animateOpen":{"height":"toggle"},
                "animateClose":{"height":"toggle"},"speed":500,"timeout":5000,
                "closeButton":true,"closeOnSelfClick":true,"closeOnSelfOver":false,"modal":false});});</script><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
```

```
 <meta http-equiv="Content-Type" content="text/html; charset=ISO 8859-1" />

    <!-- favicon -->
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />

    <!-- css links -->
    <link rel="stylesheet" type="text/css" href="styles/styles.css" />
    <link rel="stylesheet" type="text/css" href="styles/skin.css" />

    <link rel="stylesheet" type="text/css" href="includes/js/form/css/validationEngine.jquery.css" />
    <link rel="stylesheet" type="text/css" href="includes/lightbox/lightbox.css" />
    <link rel="stylesheet" type="text/css" href="includes/notify/css/jquery.noty.css"/>
    <link rel="stylesheet" type="text/css" href="includes/notify/css/noty_theme_default.css"/>
    <link rel="stylesheet" type="text/css" href="includes/js/jquery-ui/development-bundle/themes/base/jquery.ui.all.css">
    <link rel="stylesheet" type="text/css" href="includes/js/jquery-ui/development-bundle/demos/demos.css">
    <link rel="stylesheet" type="text/css" href="includes/js/jquery-ui/development-bundle/jquery-ui-timepicker.css">

    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

    <script type="text/javascript" src="includes/js/jquery.easing.1.3.js"></script>
    <script type="text/javascript" src="includes/js/hover.js"></script>
    <script type="text/javascript" src="includes/js/jquery.jcarousel.js"></script>

    <!-- js links -->

    <script type="text/javascript" src="includes/js/coda.js"></script>
    <script type="text/javascript" src="includes/js/placeholder.js"></script>
    <script language="javascript" src="includes/js/popup/modal.popup.js"></script>

    <script type="text/javascript" src="includes/notify/js/jquery.noty.js"></script>
    <script type="text/javascript" src="includes/js/form/jquery.validationEngine-nl.js" charset="utf-8"></script>
    <script type="text/javascript" src="includes/js/form/jquery.validationEngine.js" charset="utf-8"></script>

    <script src="includes/lightbox/lightbox.js"></script>

    <!-- JQuery UI -->
    <script type="text/javascript" src="includes/js/jquery-ui/development-bundle/ui/jquery.ui.core.js"></script>
    <script type="text/javascript" src="includes/js/jquery-ui/development-bundle/ui/jquery.ui.widget.js"></script>
    <script type="text/javascript" src="includes/js/jquery-ui/development-bundle/ui/jquery.ui.datepicker.js"></script>
    <script type="text/javascript" src="includes/js/jquery-ui/development-bundle/ui/jquery.ui.timepicker.js"></script>
    <script type="text/javascript">
        function mycarousel_initCallback(carousel) {
            // Disable autoscrolling if the user clicks the prev or next button.
            carousel.buttonNext.bind('click', function() {
                carousel.startAuto(0);
            });

            carousel.buttonPrev.bind('click', function() {
                carousel.startAuto(0);
            });

            // Pause autoscrolling if the user moves with the cursor over the clip.
            carousel.clip.hover(function() {
                carousel.stopAuto();
            }, function() {
                carousel.startAuto();
            });
        };

        jQuery(document).ready(function() {
            jQuery('#mycarousel').jcarousel({
                auto: 2,
                wrap: 'last',
                initCallback: mycarousel_initCallback
            });
        });
    </script>

    <script>
        $(function(){
            $('.leader_picture').contenthover({
                overlay_background:'#000',
                overlay_opacity:0.8
            });
        });
    </script>

    <script language="javascript">
        $(document).ready(function() {

            //Change these values to style your modal popup
            var align = 'center';                                   //Valid values; left, right, center
            var top = 100;                                          //Use an integer (in pixels)
            var width = 500;                                        //Use an integer (in pixels)
            var padding = 10;                                       //Use an integer (in pixels)
            var backgroundColor = '#FFFFFF';                        //Use any hex code
            var source = 'includes/php/popup.php';                  //Refer to any page on your server, external pages are not valid 
            var borderColor = '#333333';                            //Use any hex code
            var borderWeight = 4;                                   //Use an integer (in pixels)
            var borderRadius = 5;                                   //Use an integer (in pixels)
            var fadeOutTime = 300;                                  //Use any integer, 0 = no fade
            var disableColor = '#666666';                           //Use any hex code
            var disableOpacity = 40;                                //Valid range 0-100
            var loadingImage = 'lib/release-0.0.1/loading.gif';     //Use relative path from this page

            //This method initialises the modal popup
            $(".modal").click(function() {
                modalPopup(align, top, width, padding, disableColor, disableOpacity, backgroundColor, borderColor, borderWeight, borderRadius, fadeOutTime, source, loadingImage);
            });

            //This method hides the popup when the escape key is pressed
            $(document).keyup(function(e) {
                if (e.keyCode == 27) {
                    closePopup(fadeOutTime);
                }
            });     
        });
    </script>
</head> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-10T09:46:28.677

`<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>` 使用这个是错误的： `<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>`

看看它是 src 的区别。

# oracle - 如何使用 TOAD 进行多次插入？

> ID：12815915
> 
> 赞同：0
> 
> 时间：2012-10-10T09:17:35.747
> 
> 标签：oracle, sqlplus, toad

我正在尝试在 TOAD 中进行多次插入。下面的查询执行得很好（下面的栏显示提交已经完成），但是当我检查数据库时没有新值。我究竟做错了什么？

查询：

```
INSERT ALL 
INTO db1.t1 (col1, col2, col3, col4, col5)
VALUES ('blah', 'Answer', 'Y', 'Y', 5)
INTO db1.t1 (col1, col2, col3, col4, col5)
VALUES ('blah', '# answers', 'Y', 'Y', 6)
SELECT * FROM DUAL;
COMMIT; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T09:26:10.130

在每条语句之后放置半列。

然后使用选项从工具栏作为脚本运行。

# php - PHP sqlsrv 参数化存储过程 T-SQL 语法

> ID：12815917
> 
> 赞同：0
> 
> 时间：2012-10-10T09:17:49.340
> 
> 标签：php, sql-server, stored-procedures, parameterized-query

在使用 sqlsrv 扩展从 PHP[中调用参数的 SQL Server 存储过程的文档中，它使用了一种奇怪的语法：](http://msdn.microsoft.com/en-us/library/cc644932%28v=sql.105%29.aspx)

```
{call SubtractVacationHours( ?, ?)} 
```

我期望的是：

```
EXEC SubtractVacationHours ?, ?; 
```

[在执行 T-SQL 存储过程](http://msdn.microsoft.com/en-us/library/ms188332.aspx)的 SQL Server文档中，它只允许 EXEC | EXECUTE 作为命令字。所以我会认为查询会导致错误。

您当然可以`sqlsrv_query`使用指定参数（即用值替换问号）调用 EXEC SubtractVacationHours 的 SQL。

在对参数化查询进行进一步研究之后，似乎“调用”来自必须[通过 ODBC 提供程序调用它](http://support.microsoft.com/kb/310130)。

那么第二个 EXEC 语法真的有效吗？还是通过 sqlsrv 驱动程序调用参数化存储过程必须使用 ODBC CALL 语法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:14:42.660

我已经用我的代码进行了测试，两种形式的语法都可以工作。根据 IIS blog post on [Breaking API changes in February '08](http://blogs.iis.net/sqlphp/archive/2008/02/19/breaking-api-changes-in-the-february-08-ctp.aspx)，建议使用 CALL 语法：

> 我们现在可以使用 canonical-call 语法调用该存储过程，推荐用于使用 SQL Server 2005 Driver for PHP 的存储过程：
> 
> ```
> $sql = '{? = CALL CreateProduct (?, ?, ?, ?)}'; 
> ```

# vba - VBA - 从嵌套查询创建过滤条件

> ID：12815918
> 
> 赞同：1
> 
> 时间：2012-10-10T09:17:55.477
> 
> 标签：vba, if-statement, nested

我正在尝试创建一个过滤条件来检查数据，如果匹配，那么它将打印数据。我有以下内容，并且出现类型不匹配错误。对于 cTest。我还尝试了以下方法（不带引号 - 但它返回 false）： cTest = (InStr(getName(iVar), a1) > 0)

有没有更简单的方法来创建过滤条件。

如果在标准中填写了字段 a1、a2 和 a3，则应在返回任何内容之前检查该值是否包含所有内容。

```
 Dim cTest As Variant

If a1 <> "" Or a2 <> "" Or a3 <> "" Then
If a1 <> "" Then
  If a2 <> "" Then
   If a3 <> "" Then
   'Value entered in 1,2,3
    cTest = "(InStr(getName(iVar), a1) > 0) And (InStr(getName(iVar), a2) > 0) And (InStr(getName(iVar), a3) > 0)"
    End If
    ' Value entered in 1,2
    cTest = "(InStr(getName(iVar), a1) > 0) And (InStr(getName(iVar), a2) > 0)"
      End If
      '(Value entered in 1 only
   cTest = "(InStr(getName(iVar), a1) > 0)"
ElseIf a2 <> "" Then
  If a3 <> "" Then
    'Value entered in 2,3
    MsgBox ("2nd, 3rd value entered")
  End If
   ' Value entered in 2 only
ElseIf a3 <> "" Then
    'Value entered in 3 only
     MsgBox ("3rd value entered")
Else
     ' no value entered
     MsgBox ("no value entered")
End If
End If

For iVar = 1 To Phrases.MaxIndex()

        If (cTest) Then
        'We want this one
        .Cells(irow, 1).Value = getName(iVar)
        irow = irow + 1
      End If
    Next iVar

  End With 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:44:29.203

如何使用 AND & OR 条件的简单连接？

```
Sub testing()

    If ((a1 <> "" And InStr(getName(iVar), a1) > 0) Or a1 = "") And _
    ((a2 <> "" And InStr(getName(iVar), a2) > 0) Or a2 = "") And _
    ((a3 <> "" And InStr(getName(iVar), a2) > 0) Or a3 = "") Then
        ' the wanted one
    End If

End Sub 
```

# forms - 在 Struts 中提交表单：在 iframe 上下文中，并且没有表单字段作为操作的属性

> ID：12815922
> 
> 赞同：0
> 
> 时间：2012-10-10T09:18:07.847
> 
> 标签：forms, iframe, struts, submit, action

我有一个棘手的问题。我有一个包含三个 iframe 的页面，每个 iframe 调用一个 struts 动作来显示内容。

现在，在其中一个 iframe 中，有一个（struts）表单和一个（struts）提交按钮。在另一帧中，用户执行的最后操作的历史记录。单击提交按钮时，我希望提交表单并重新加载整个页面，以便历史记录是最新的。

最后一个问题，但并非最不重要：

假设我有： - select1 ：表单中有一个struts select。当点击提交按钮时，调用相关的struts动作。但是，我不想在此操作中有“select1”属性。相反，我想要一个包含这个“select1”的对象，比如说一个名为“fieldContainer”的对象。我希望在提交表单时初始化 fieldContainer.select1。

所以让我们举个例子：

表单.jsp：

```
<s:form>
  <s:select id="select1" name="select1" list="select1list"/>
  <s:submit action="submitThisForm"/>
</s:form> 
```

动作.java：

```
FieldContainer fieldContainer;

@action("submitThisForm") 
String submitThisForm() {
  String mySelect = fieldContainer.select1 ;
  // do something with mySelect
  return "SUCCESS";
} 
```

我不知道如何实现与每一点相对应的东西，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:55:51.157

对于第一个问题，您必须在客户端使用 javascript 来解决。

在显示提交页面的新内容后，iframe 的父级必须处理其他页面的更新。父级导致其他框架的刷新，或者响应提交而隐藏所需的信息，并由父级获取并设置为“历史框架”（由 js）。

两者都有优势，但我想不出没有 javascript 的解决方案。

关于您最小的问题：如果该操作为 fieldContainer 提供了一个 getter，并且该字段的名称是“fieldContainer.select1”，struts 会将值放入对象 fieldcontainer 中的 setter。fieldContainer 应该在 valuestack 中的某个地方，所以 struts 可以找到它的 setter。

# python - Django mod_python 日志记录问题

> ID：12815928
> 
> 赞同：0
> 
> 时间：2012-10-10T09:18:15.197
> 
> 标签：python, django, logging

我在远程服务器上使用带有 mod_python 的 Django，需要添加一些日志记录。我尝试添加一些测试日志，在 settings.py 中添加以下代码：

```
import logging

logging.basicConfig(level=logging.DEBUG, format='%(asctime)s %(levelname)s %(message)s', filename='/home/voip_maker/django.log', filemode='a+')

logging.debug("hello world!")
logging.info("this is some interesting info!")
logging.error("this is an error!") 
```

然后我重新启动 apache 并尝试通过 web 打开我的项目，但日志文件没有变化。

你能帮我解决这个问题吗，我必须如何配置日志记录以获取日志文件的更改。

非常感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:22:11.760

Django 让日志记录变得更加简单。请检查以下文档：

[https://docs.djangoproject.com/en/1.4/topics/logging/](https://docs.djangoproject.com/en/1.4/topics/logging/)

您需要做的就是将字典添加到 settings.py 文件

# algorithm - 插入排序算法的大θ符号

> ID：12815931
> 
> 赞同：5
> 
> 时间：2012-10-10T09:18:20.913
> 
> 标签：algorithm, complexity-theory, big-o, insertion-sort, big-theta

我正在研究书中的渐近符号，我无法理解作者的意思。我知道`if f(n) = Θ(n^2) then f(n) = O(n^2)`。但是，我从作者的话中了解到，对于插入排序函数算法`f(n) = Θ(n)`和`f(n)=O(n^2)`.

为什么？大欧米茄或大θ会随着不同的输入而变化吗？

他说：

> “然而，对插入排序的最坏情况运行时间的 Θ(n^2) 限制并不意味着对每个输入的插入排序的运行时间有一个 Θ(n^2) 限制。”

然而，大哦符号是不同的。他什么意思？它们之间有什么区别？

我很混乱。我在下面复制粘贴：

> 由于 O 表示法描述了一个上限，因此当我们使用它来限制算法的最坏情况运行时间时，我们对每个输入的算法运行时间都有一个界限。因此，插入排序的最坏情况运行时间的 O(n^2) 界限也适用于其在每个输入上的运行时间。然而，对插入排序的最坏情况运行时间的 Θ(n^2) 限制并不意味着对每个输入的插入排序的运行时间有一个 Θ(n^2) 限制。例如，当输入已经排序时，插入排序在 Θ(n) 时间内运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T09:29:40.713

> 大欧米茄或大θ会随着不同的输入而变化吗？

是的。举一个更简单的例子，考虑从左到右的数组中的线性搜索。在最坏和平均的情况下，该算法对某些常数*a*和*b采取 f(* *n* ) = *a* × *n* /2 + *b*预期步骤。但是，当保证左元素始终持有您要查找的键时，它总是需要*a* + *b*步骤。

 ***由于 Θ 表示严格界限，并且 Θ( *n* ) != Θ( *n* ²)，因此两种输入的 Θ 是不同的。

**编辑**：至于 Θ 和 big-O 在同一输入上不同，是的，这是完全可能的。考虑以下（诚然微不足道的）示例。

当我们将*n*设置为 5 时，*n* = 5 和*n* < 6 都为真。但是当我们将*n*设置为 1 时，*n* = 5 为假，而*n* < 6 仍然为真。

类似地，big-O 只是一个上限，就像数字上的 < 一样，而 Θ 是一个严格的边界，例如 =。

（实际上，对于常数*a*和*b*， Θ 更像*a* < *n* < *b*，即它定义了类似于数字范围的东西，但原理是相同的。）

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-06T15:02:54.413

请参阅CLRS第3版第-44页（渐近符号，功能和运行时间）它说 -

即使我们使用渐近符号来应用算法的运行时间，`we need to understand which running time we mean`. 有时我们对`worst-case`运行时间感兴趣。`Often, however, we wish to characterize the running time no matter what the input. In other words, we often wish to make a blanket statement that covers all inputs, not just the worst case.`

摘自上述段落：

*   最坏情况为算法的运行时间提供了最大限制。因此，插入排序的最坏情况运行时间的 O(n^2) 界限也适用于其在每个输入上的运行时间。

*   但是`Theta(n^2)`，受限于插入排序的最坏情况运行时间并不意味着 `Theta(n^2)` 受限于每个输入上的插入排序的运行时间。因为插入排序的最佳情况运行时间会产生`Theta(n)`。（当列表已经排序时）

*   我们通常会写出`worst case`算法的时间复杂度，但是当考虑到最佳情况和平均情况时，时间复杂度会根据这些情况而变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-30T07:44:36.360

> 简而言之，程序的运行时间被描述为其输入大小的函数，即 f(n)。

是不对称的`=`，因此 an+b=O(n) 意味着 f(n) 属于集合 O(g(n))。所以我们也可以说 an+b=O(n^2) 并且它是真的，因为 f(n) 对于 a,b 和 n 的某些值属于集合 O(n^2)。

因此 Big-Oh(O) 只给出一个上限，或者您可以说符号给出 a `blanket statement`，这意味着给定输入大小的所有输入都被覆盖，而不仅仅是最坏情况一次。例如，在插入排序的情况下，以相反的顺序对大小为 n 的数组进行排序。

所以 n=O(n^2) 是正确的，但在定义算法的最坏情况运行时间时会被滥用。**作为最坏情况，运行时间给出了任何输入**的运行时间上限。众所周知，在插入排序的情况下，运行时间将取决于输入在固定大小的给定数组中的排序程度。因此，如果数组是排序的，则运行将是线性的。

所以我们需要一个严格的渐近界表示法来描述我们的最坏情况，这是由 Θ 表示法提供的，因此插入排序的最坏情况是 Θ(n^2)，最好情况是 Θ(n)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-10T09:28:08.273

> 我们对每个输入的算法运行时间都有一个限制

这意味着如果有一组输入具有运行时间`n^2`而其他的运行时间较少，那么算法是`O(n^2)`。

> 然而，对插入排序的最坏情况运行时间的 Θ(n^2) 限制并不意味着对每个输入的插入排序的运行时间有一个 Θ(n^2) 限制

他是说反之亦然。如果算法是`O(n^2)`，这并不意味着每个输入都将以二次时间运行。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-10-10T09:29:02.330

我对插入排序算法的学术理论在过去很遥远，但从我对您的复制粘贴的理解来看：

big-O 表示法总是描述最坏的情况，但 big-Theta 描述的是典型数据的某种平均值。

看看这个：[Θ（n）和O（n）有什么区别？](https://stackoverflow.com/questions/471199/what-is-the-difference-between-n-and-on)*****

# ruby-on-rails - 我可以在rails中制作像哈希一样的闪存吗？

> ID：12815936
> 
> 赞同：1
> 
> 时间：2012-10-10T09:18:32.347
> 
> 标签：ruby-on-rails, ruby

我是一个 ruby​​/rails 新手，需要创建一个可以在 rails 应用程序中的任何位置操作的哈希，并且可以被所有视图访问，就像 flash[:notice] 哈希一样。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:37:17.340

这应该有效：

```
class ApplicationController < ActionController::Base
  def block
    @block ||= {}
  end
  helper_method :block
end

block[:foo] = "FOO"
block[:foo] #=> "FOO" 
```

但是，您尝试做的通常是在[content_for的帮助下完成的](http://api.rubyonrails.org/classes/ActionView/Helpers/CaptureHelper.html#method-i-content_for "content_for")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T09:23:32.487

是的，你可以做到。任何键/值对都可以存储在闪存中。例如，

```
 flash[:email] = 'abc@yahoo.com'
     flash[:username] = 'abc'
     flash[:xyz] = 'xyz' 
```

这些值可以在控制器和视图中的任何位置访问，就像`flash[:notice]`和`flash[:error]`

# php - php为会话添加价值

> ID：12815941
> 
> 赞同：0
> 
> 时间：2012-10-10T09:18:46.980
> 
> 标签：php, arrays

我正在尝试实现一个“购物车”，如果单击了“添加到购物车”，则相应的项目要么添加到购物车中，要么如果已经存在则加一。但是，以下代码不起作用，并给我一个“不能将标量值用作数组”错误。任何帮助将不胜感激。

```
if (isset($_POST['fan']) && ($_POST['fan']=="Add to Cart")) {
    if (($_SESSION['cart']['fan']==0) || (!isset($_SESSION['cart']['fan']))) {
      $_SESSION['cart']['fan']=1;
    } else {
      $_SESSION['cart']['fan']++;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T09:21:54.917

我想你可能忘了添加这样的东西：

```
if (!isset($_SESSION['cart']))
{
  $_SESSION['cart']=array();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T09:23:36.833

你需要声明`$_SESSION['cart']`好像`array()`它没有设置，

```
$_SESSION['cart']=array(); 
```

# android - 当我将简单适配器用于列表视图时，如何在列表视图中搜索？

> ID：12815943
> 
> 赞同：2
> 
> 时间：2012-10-10T09:18:47.547
> 
> 标签：android, filter, android-listview

当我使用简单的适配器时，我正在列表视图中制作搜索栏。我正在使用下面的代码。在执行此代码时，它显示空指针异常。

```
String headlines1[]={"Dell Inspiron", "HTC One X", "HTC Wildfire S", "HTC Sense", "HTC Sensation XE", "iPhone 4S", "Samsung Galaxy Note 800", "Samsung Galaxy S3", "MacBook Air", "Mac Mini", "MacBook Pro"};}
for (int j = 0; j < headlines1.length; j++)

            {

                HashMap<String, String> map = new HashMap<String, String>();
                map.put("row1", ":"+headlines1[j]);

                mylistData.add(map);

            }
        SimpleAdpter arrayAdapter =

            new SimpleAdapter(this, mylistData, R.layout.simple_list_item_2,

            row, new int[] { R.id.tv });
            lst.setAdapter(arrayAdapter);

             lst.setTextFilterEnabled(true);

             inputsearch.addTextChangedListener(new TextWatcher()
            {

                @Override
                public void onTextChanged( CharSequence cs, int arg1, int arg2, int arg3)
                {
                    // TODO Auto-generated method stub
                     String searchString=inputsearch.getText().toString();
                       int textLength=searchString.length();

                              //clear the initial data set
                       searchResults.clear();

                       for(int i=0;i<mylistData.size();i++)
                       {
                      String playerName=mylistData.get(i).get("row1").toString();
                      if(textLength<=playerName.length()){
                      //compare the String in EditText with Names in the ArrayList
                        if(searchString.equalsIgnoreCase(playerName.substring(0,textLength)))
                        searchResults.add(mylistData.get(i));
                      }
                       }

                       arrayAdapter.notifyDataSetChanged();
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:14:00.903

尝试这个

```
 public class MainActivity extends Activity {

private ListView lv;
private EditText et;
//private String listview_array[] = { "ONE", "TWO", "THREE", "FOUR", "FIVE","SIX", "SEVEN", "EIGHT", "NINE", "TEN" };
String listview_array[]={"Dell Inspiron", "HTC One X", "HTC Wildfire S", "HTC Sense", "HTC Sensation XE", "iPhone 4S", "Samsung Galaxy Note 800", "Samsung Galaxy S3", "MacBook Air", "Mac Mini", "MacBook Pro"};
private ArrayList<String> array_sort = new ArrayList<String>();
int textlength = 0;

public void onCreate(Bundle savedInstanceState)

{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    lv = (ListView) findViewById(R.id.ListView01);
    et = (EditText) findViewById(R.id.EditText01);
    lv.setAdapter(new ArrayAdapter<String>(this,
    android.R.layout.simple_list_item_1, listview_array));
    et.addTextChangedListener(new TextWatcher()
    {
        public void afterTextChanged(Editable s)
        {
            // Abstract Method of TextWatcher Interface.

        }
        public void beforeTextChanged(CharSequence s,
        int start, int count, int after)
        {

            // Abstract Method of TextWatcher Interface.

        }
        public void onTextChanged(CharSequence s,
        int start, int before, int count)
        {
            textlength = et.getText().length();
            array_sort.clear();
            for (int i = 0; i < listview_array.length; i++)
            {
                if (textlength <= listview_array[i].length())
                {
                    if (et.getText().toString().equalsIgnoreCase(
                    (String)
                    listview_array[i].subSequence(0,
                    textlength)))
                    {
                        array_sort.add(listview_array[i]);
                    }
                }
            }

            lv.setAdapter(new ArrayAdapter<String>
            (MainActivity.this,
            android.R.layout.simple_list_item_1, array_sort));
        }
    });
}
  } 
```

# jquery - jQuery .serialize() 不是函数

> ID：12815951
> 
> 赞同：4
> 
> 时间：2012-10-10T09:19:10.477
> 
> 标签：jquery, syntax-error

为什么这不起作用？

```
var me = $('#'+id);
var content = $(me).find('input').val().serialize(); 
```

我明白了`TypeError: $(me).find("input").val().serialize is not a function`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-10T09:20:24.280

因为`$(me).find('input').val()`是字符串而不是 jQuery 对象，所以它没有[序列化](http://api.jquery.com/serialize/)功能。

如果要序列化输入（及其值），请使用`$(me).find('input').serialize();`

但一定要真正需要它：这个函数很少对一个输入有用（我们通常将它用于表单）。如果您只想要该值，请使用`$(me).find('input').val()`，如果您正在调试并想要检查元素，请使用`console.log($(me))`并打开浏览器的控制台。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-10T09:26:34.343

您可以`.serialize()`直接在表单上使用。您可以按如下方式序列化表格

```
var serializeData = $('form').serialize(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-13T09:00:33.037

我试图序列化选择的表单，`querySelector`这给了我错误，但是在通过 jQuery 选择表单后`let form = $('form');`修复了这个

# iphone - iOS6：我们是否必须在 App 委托中设置 rootViewController 才能支持不同的方向？

> ID：12815953
> 
> 赞同：1
> 
> 时间：2012-10-10T09:19:13.500
> 
> 标签：iphone, objective-c, ios, rotation

该应用程序在 iOS5 中横向运行非常好。但是在 iOS6 中，它开始在所有视图控制器中使用纵向。不再调用 shouldAutorotateToInterfaceOrientation 方法。我阅读了[有关 iOS6 中更改的旋转机制的新内容](https://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html)，我可以通过在我的 AppDelegate 中添加一行来解决这个问题：

```
self.window.rootViewController = _viewController 
```

_viewControler 是起始屏幕（主菜单）。所有其他视图控制器都实现了 shouldAutorotateToInterfaceOrientation 方法，并且仅对横向返回 YES。因此，对于只需要支持一个方向的应用程序来说，这是一个完美的解决方案。

然而，问题是我需要一个视图控制器（我们称之为phone-VC）以纵向显示。现在，如果我想要旋转这个视图控制器，那么我需要在分配给 appDelegate 中的 rootViewControler 的主菜单控制器中返回 YES。但是，我不能这样做，因为这个 rootViewController 是只需要以横向呈现的启动窗口，否则这个窗口中带有图形的布局将会中断。但是，如果我没有从它的 shouldAutorotateToInterfaceOrientation (Home-menu) 返回 YES，那么在我的视图 phone-VC 中不会调用相同的方法，需要以纵向显示。

有任何想法吗？在 AppDelegate 中是否强制分配 rootViewController？

**更新**：设备上存在问题（至少在 iPhone4 上）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:21:54.633

是的，从 iOS 6.0 开始，您必须将 rootviewcontroller 分配给 Windows.rootViewController。这个控制器将决定他们的孩子是否旋转。默认情况下支持所有方向，但您可以通过实现 shouldAutoRotate 和 supportedInterfaceOrientations 委托方法来限制它们。[我有一个实例，在使用MGSplitViewController](https://github.com/mattgemmell/MGSplitViewController)时我没有将 rootviewcontroller 分配给 Windows， MGSplitViewController将 viewcontroller 作为子视图添加到窗口。我只需要更改它以制作 rootviewcontroller 并且一切正常！

查看Apple 文档中的[UIKit](http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html#//apple_ref/doc/uid/TP40012166-CH1-SW19)部分 - iOS 6.0 发行说明。

# php - 设置 include_path 或 zend_extension 所以 requires 将起作用

> ID：12815956
> 
> 赞同：0
> 
> 时间：2012-10-10T09:19:19.150
> 
> 标签：php, zend-framework2, include-path

我做了一些“房屋清洁”，现在我的一些 Zend 文件 require_once 语句失败了。我有几个 Zend 文件夹，并且已经摆脱了其中的大部分。我需要一种方法来告诉 require_once 语句要查看哪个文件夹。我在 php.ini 中使用 include_path="..." 尝试了几件事，但没有成功。

```
include_path=".:/home/paul13/paul13.com/includes/library" 
```

在父文件夹中的 php.ini 文件或“includes”文件夹中的 php.ini 文件中作为单独的行添加时似乎不起作用。

当需要时，我如何告诉 Zend 中的文件在哪里看？

我没有尝试过zend_extension，但现在会研究一下。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T16:23:55.927

您应该确保通过 Composer 安装 ZF2，并且您应该对此没有任何问题，因为它将负责自动加载等。

这是一个很好的起点：

[http://zf2.readthedocs.org/en/latest/user-guide/skeleton-application.html](http://zf2.readthedocs.org/en/latest/user-guide/skeleton-application.html)

作曲家.json

```
{
    "name": "zendframework/skeleton-application",
    "description": "Skeleton Application for ZF2",
    "license": "BSD-3-Clause",
    "keywords": [
        "framework",
        "zf2"
    ],
    "homepage": "http://framework.zend.com/",
    "require": {
        "php": ">=5.3.3",
        "zendframework/zendframework": "2.*"
    }
} 
```

然后输入

```
php composer.phar self-update
php composer.phar install 
```

# mysql - 基于 DB 查询调用 TEdit 对象

> ID：12815962
> 
> 赞同：2
> 
> 时间：2012-10-10T09:19:37.573
> 
> 标签：mysql, delphi, delphi-xe2

我有一个包含 7 个 TEdit 的表单，名称为 EditPhone1、EditPhone2 等。在同一表格中，我查询数据库以获取数据以填充这些 TEdit。当然，我无法提前知道查询将返回多少个结果。循环查询的行数时如何调用各种 TEdit 对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T18:46:34.740

使用[FindComponent](http://docwiki.embarcadero.com/Libraries/XE3/en/System.Classes.TComponent.FindComponent)将组件名称“转换”为组件本身：

```
var
  Edit: TEdit;
  I: Integer;
begin
  DataSet.First;
  I := 1;
  while not DataSet.Eof do
  begin
    Edit := TEdit(FindComponent(Format('EditPhone%d', [I])));
    if Edit <> nil then
      Edit.Text := DataSet.FieldValues['PhoneNo'];
    DataSet.Next;
    Inc(I);
  end; 
```

现在，这需要将`EditPhone%d`字符串硬编码到源代码中，这会导致各种可维护性问题。例如：考虑重命名编辑。

### 备选方案 1：

为了不依赖组件名称，您可以利用[TLama 的想法](https://stackoverflow.com/questions/12815962/calling-tedit-objects-based-on-db-query#comment17334166_12815962)并将所有编辑添加到列表中：

```
uses
  ... , Generics.Collections;

type
  TForm1 = class(TForm)
    EditPhone1: TEdit;
    ...
    procedure FormCreate(Sender: TObject);
    procedure FormDestroy(Sender: TObject);
  private
    FEdits: TList<TEdit>;
  end;

procedure TForm1.FormCreate(Sender: TObject);
begin
  FEdits := TList<TEdit>.Create;
  FEdits.AddRange([EditPhone1, EditPhone2, EditPhone3, EditPhone4, EditPhone5,
    EditPhone6, EditPhone7]);
end;

procedure TForm1.FormDestroy(Sender: TObject);
begin
  FEdits.Free;
end;

procedure TForm1.ADOQuery1AfterOpen(DataSet: TDataSet);
var
  I: Integer;
begin
  DataSet.First;
  I := 0;
  while (not DataSet.Eof) and (I < FEdits.Count) do
  begin
    FEdits[I].Text := DataSet.FieldValues['PhoneNo'];
    DataSet.Next;
    Inc(I);
  end;
end; 
```

这仍然需要一些维护，以防将来添加编辑。

### 备选方案 2：

您还可以遍历表单中的所有编辑以查找标记为要添加到列表中的编辑，而不是显式添加它们：

```
procedure TForm1.FormCreate(Sender: TObject);
var
  I: Integer;
begin
  FEdits := TList<TEdit>.Create;
  for I := 0 to ComponentCount - 1 do
    if (Components[I] is TEdit) and (TEdit(Components[I]).Tag = 1) then
      FEdits.Add(TEdit(Components[I]));
end; 
```

但是让这些标签保持最新是另一个负担。

### 备选方案 3：

我建议你使用`TDBGrid`一个数据组件。打开链接的数据集会自动将所有电话号码添加到网格中。使用某些设置，网格可能看起来像彼此下方的几个编辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T09:24:04.603

例如，您可以使用 Tag 属性来查找所需的组件。将所有 TEdit 的标签从 1 设置为 7（或更多），并通过以下方式查找组件：

```
Var I: Integer;
    MyEdit : TEdit;

For I = 0 To Self.ComponentCount - 1 Do
 if (Self.Components[I] IS TEdit) AND (Self.Components[I] AS TEdit).Tag = YourTag
   MyEdit = (Self.Components[I] AS TEdit); 
```

您还可以根据需要动态创建如此多的 TEdit，并在创建时分配 Tag 属性，并稍后在运行时通过此代码找到它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T09:28:07.900

我建议使用`DBCtrlGrid`. 您将一行的控件放置在其上，它会重复数据集所具有的行数的控件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T09:32:13.283

1.  获取查询结果（通常使用return`.RowCount`的属性）`TDataset`
2.  获得行数后，进行迭代以制作`TEdit`和设置文本属性

这是代码示例：

```
...
For i:=0 to RowCount do
Begin
 A:=TEdit.Create(self);
 A.Parent:=AForm;
 A.Top:=i*14;
 A.Text:=ADataset.Field(i).AsString;
End;
... 
```

# javascript - Javascript jQuery ajax 提交默认数据

> ID：12815965
> 
> 赞同：0
> 
> 时间：2012-10-10T09:19:51.317
> 
> 标签：javascript, jquery

使用 $.ajax 时如何提交默认数据？

我试过了：

```
$.ajaxPrefilter(function(options, originalOptions, jqXHR) {
  // can't access anything here... (tried jqXHR.data but undefined)
});

$.ajaxSetup({
  beforeSend: function(jqXHR, settings) {
    // can't access anything here... (tried jqXHR.data but undefined)
  }
}); 
```

我需要这个，所以我可以发送我的 CSRF 令牌，每次登录时，每次都提交用户 ID。我不想在标头中提交令牌。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T09:54:47.590

有类似的问题。通过使用 beforeSend 事件解决。那里一切都可以访问。 [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/) => 发送前。

```
 beforeSend: function (jqXHR, settings) {
        //your code here
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T09:24:06.123

据我了解，您想发送数据并且不想设置标题。

您可以在 $.ajaxSetup 中设置默认数据，如下所示。查看[链接](http://www.bennadel.com/blog/2131-Using-jQuery-ajaxSetup-To-Accumulate-Global-Data-Parameters-For-AJAX-Requests.htm)如何 $.ajaxSetup woek。

```
$.ajaxSetup({
    data: { // your default data here.
         username: "sakura",
         password: "Hadoken!!!"
     },
    dataType: "jsonp"
}); 
```

# javascript - 如何处理大量的 html/js 文件？

> ID：12815966
> 
> 赞同：1
> 
> 时间：2012-10-10T09:19:53.043
> 
> 标签：javascript, html, large-files

我正在研究*应该*由一个文件组成的基于 HTML/JS 的报告。因此，当前报告为 500 kB，但效果很好。但是，当您想在 Chrome 中查看源代码时，它可能会冻结。我正在处理的一份新报告包含更多数据，目前约为 1.5 MB。在 Chrome 中查看源代码或多或少是不可能的，我担心它会在慢速设备上造成麻烦。

有什么建议吗？最佳实践？我已经通过 Stackoverflow 搜索和搜索，但我找不到任何关于大小限制或关于更容易浏览器消化的 html/js 代码布局建议的信息。（我从其他语言中知道，例如 C++，存在提示如何使大文件更易于编译器消化，从而加快编译速度。）

编辑：当前报告的代码大小为 99% HTML。（表格）表格随后用[Datatables](http://datatables.net)美化。不幸的是，删除所有 JS 代码没有任何区别。顺便说一句，我尝试过删除空格（1.5 MB -> 1.1 MB）并从数组中加载数据，而不是将它们存储在硬编码的 html `table`、`tr`、`td`元素（1.5 MB -> 1.6 MB）中，但性能特征没有改变.

它是静态文件，问题也发生在本地。

第二次编辑：我现在将其余的硬编码表格内容转换为 JS 数组并删除了空格，进一步减小了大小。现在文件大小为 900 kB，加载效果明显更好，现在冻结时间仅为 3-5 秒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:25:30.600

在 Chrome 中查看源代码不应导致其冻结。页面呈现快还是慢？如果是后者，则可能是恶意 JavaScript 运行的标志。您可以发布任何代码供我们查看吗？另外，您使用的是什么网络服务器？您可以尝试使用类似`GZip Compression`或`JSCompress`.

[http://jscompress.com/](http://jscompress.com/)

# sql - 在 oracle 中查找星期几

> ID：12815968
> 
> 赞同：4
> 
> 时间：2012-10-10T09:19:56.490
> 
> 标签：sql, oracle

`to_char(sysdate,'Day')`返回当前星期几。我想要的是获得`date`最近过去的“星期天”。当然，我们可以进行复杂的查询来完成它。但是有什么我不知道的简单方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T09:28:20.457

你可以这样做

```
SELECT NEXT_DAY(SYSDATE-8, 'SUN') FROM DUAL; 
```

这里

```
SYSDATE-8 
```

8天前返回&

```
NEXT_DAY(mydate, 'SUN') 
```

下个星期天返回它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T09:27:58.807

您可以使用这样简单的查询来做到这一点：

```
SELECT dt
  FROM ( SELECT SYSDATE - LEVEL - 1 dt
           FROM DUAL
        CONNECT BY LEVEL < 8)
 WHERE TO_CHAR ( dt, 'd' ) = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T15:18:33.097

我认为`NEXT_DAY(SYSDATE-6, 'SUN')`会奏效。假设今天是星期天，我回去 6 天（即上星期一），所以当我寻找下一个星期天时，我会得到它`sysdate`本身。而，`next_day(sysdate-8,'SUN')`可用于获取前一周的最后一天。感谢您的努力。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-23T18:41:04.993

```
SELECT dt
  FROM ( SELECT to_date('5/23/2014') - LEVEL + 1 dt
           FROM DUAL
        CONNECT BY LEVEL < 8)
 WHERE TO_CHAR ( dt, 'd' ) = 1 
```

我改为`LEVEL - 1 dt`让它`LEVEL + 1 dt`工作以找到上一个星期天。

# .net - 引用 .NET DLL 和部署

> ID：12815978
> 
> 赞同：1
> 
> 时间：2012-10-10T09:20:29.490
> 
> 标签：.net, dll

我有一个构建 exe 的 v3.5 项目，它引用了一些其他自定义（其他团队）.NET DLL

这些引用的 DLL 又引用了一些第 3 方 DLL。

我的问题是当我在服务器上部署它时。我只是部署我自己的 exe 和我直接引用的 DLL。

那么所有那些底层的第 3 方 DLL 的第 2 级呢？它们在部署服务器上不存在，我的二进制文件似乎仍在运行。**如何 ？**

不抱怨找不到 DLL。在输出中，它甚至没有显示那些第 3 方 DLL 的加载。可能是那些 3rd 方 dll 代码实际上并没有使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:27:49.100

> 不抱怨找不到 DLL。在输出中，它甚至没有显示那些第 3 方 DLL 的加载。可能是那些 3rd 方 dll 代码实际上并没有使用？

这听起来像是最有可能的解释。在真正需要它们之前，它们不会被加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T09:30:42.847

使用此应用程序找出发生了什么 [http://www.dependencywalker.com/](http://www.dependencywalker.com/) 只需打开所有 dll 并测试它们是否真的依赖。

# border - 使用 JQPlot 时删除仪表的灰色边框

> ID：12815981
> 
> 赞同：1
> 
> 时间：2012-10-10T09:20:36.037
> 
> 标签：border, jqplot, gauge

我试图在使用 JQPlot 时删除仪表的灰色边框。对于其他图表，我使用以下代码：

网格：{ drawBorder：假，阴影：假，}，

但是，仪表似乎不支持此功能。如何删除仪表的边框？提前致谢

# eclipse - Eclipse 中 FXML 的代码完成

> ID：12815983
> 
> 赞同：2
> 
> 时间：2012-10-10T09:20:53.167
> 
> 标签：eclipse, javafx-2, code-completion, fxml

是否有可能在 Eclipse 中为 FXML(JavaFX 2.2) 文件完成代码完成工作？

格雷茨

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:54:34.390

[e(fx)clipse](http://www.efxclipse.org/)仍然很新，但它应该具有所有必要的代码编辑功能。该网站明确指出

> fxgraph 最酷的特性之一是它与 JDT 集成（例如，您可以获得所有引用元素的 JavaDoc、自动完成支持……）。

# asp.net - 从 asp.net 1.1 升级到 3.5 后的性能问题

> ID：12815984
> 
> 赞同：0
> 
> 时间：2012-10-10T09:20:55.700
> 
> 标签：asp.net, performance, migration

我们有一个当前在 Asp.Net 1.1 上运行的应用程序。当我们将其升级到 Asp.Net 3.5 时，我们收到了网站无法运行的投诉。当我们查看网络服务器的 CPU 历史记录时，我们看到当站点在 Asp.Net 1.1 上运行时，负载最大为 20%，而在 3.5 上，负载在 40-60% 左右

我们所做的唯一更改是 Asp.Net 升级，以及 IIS 6 和 web.config 中的设置更改。在代码中我们没有改变任何东西。

那么什么在 1.1 中表现更好而不在 3.5 中表现更好呢？（服务器是 2003 网络服务器）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-24T11:45:43.483

我发现了问题所在（以防万一有人想知道）。我们在哪里为 ADODB 使用旧的 dll。RecordSetClass.Update() 导致了问题。在 Asp.net 1.1 中它不是问题，但在 2.0 及更高版本中它会消耗大量 cpu。

# c# - 如何让这个 ListBox 显示在 XPS 视图中？

> ID：12815988
> 
> 赞同：0
> 
> 时间：2012-10-10T09:21:08.193
> 
> 标签：c#, wpf

我尝试按照此[答案中提到的内容获取 ListBox 的 XPS 视图：](https://stackoverflow.com/a/505717/466694)

```
FixedDocument fixedDoc = new FixedDocument();
PageContent pageContent = new PageContent();
FixedPage fixedPage = new FixedPage();

ListBox lbx = new ListBox();
lbx.DataContext = lb.DataContext;

fixedPage.Children.Add(lbx);
pageContent.Child = fixedPage;
fixedDoc.Pages.Add(pageContent);
//Create any other required pages here

docv.Document = fixedDoc; 
```

lb 是显示在图像上半部分的 ListBox，而 XPS 视图在下方。然而，除了开头的小方块外，它是空的。我做错了什么以及如何让列表框显示在 XPS 视图中。

![结果看起来像这样](../Images/1eb1aed1ef8c33ce000180ca4bd49e21.png)

# c# - 带有 optgroup 和 knockoutJS 的选择框

> ID：12815990
> 
> 赞同：1
> 
> 时间：2012-10-10T09:21:30.633
> 
> 标签：c#, select, knockout.js

我需要按它们的类别显示项目组的选择框，如下所示： ![在此处输入图像描述](../Images/792e5d6303f48ab7e8701cb1f86d5367.png)

我的 C# 模型是：

```
public class SandboxModel
{
    public SandboxModel()
    {
        PubCodes = new List<SelectListItem>
                       {
       new SelectListItem { Value = 0, Text = "Agora", Type = 1 }, 
       new SelectListItem { Value = 96, Text = "AGF - Agora Financial", Type = 2 }, 
       new SelectListItem { Value = 81, Text = "CSP - Common Sense Publishing", Type = 2 }, 
       new SelectListItem { Value = 136, Text = "HSI - Health Sciences Institute", Type = 2 },
       new SelectListItem { Value = 0, Text = "Non-Agora", Type = 1 },
       new SelectListItem { Value = 135, Text = "ANG - Angel Publishing", Type = 2 }, 
       new SelectListItem { Value = 123, Text = "APF - Apocalypse Freedom", Type = 2 }, 
       new SelectListItem { Value = 93, Text = "ASI - Asset Strategies International", Type = 2 },
                       };

    }

    public IList<SelectListItem> PubCodes { get; private set; }

    public SelectListItem PubCode
    {
        get { return PubCodes.Last(); }
    }
} 
```

我的 Javascript 模型是：

```
<script type="text/javascript">
    @{ var serializer = new JavaScriptSerializer(); }
    function ViewModel () {
        var self = this;

        // Server Model Properties
        self.SelectedPubCode = ko.observable(@Model.PubCode.Value);

        // Select lists
        self.PubCodes = ko.observableArray(@Html.Raw(serializer.Serialize(Model.PubCodes)));
        };
    };
    ko.applyBindings(new ViewModel());
</script> 
```

我的 HTML 是

```
<select data-bind="foreach:PubCodes, optionsCaption: 'Please Select', value:SelectedPubCode">
    <!-- ko if: Type === 1 -->
    <optgroup label="__________"></optgroup>
    <optgroup data-bind="attr: {label: Text}"></optgroup>
    <!-- /ko -->
    <!-- ko if: Type !== 1 -->
    <option data-bind="text: Text, value: Value"></option>
    <!-- /ko -->
</select> 
```

在除 IE 之外的所有浏览器中，我都达到了我所需要的，但在 IE 中它看起来像这样： ![在此处输入图像描述](../Images/6b3ff1723b946a506df664f1c8e5ccc5.png) 任何建议如何在 IE 中解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T11:01:11.600

您需要使用模板绑定，因为 IE 从`<select>`.

模板定义：

```
<script type="text/html" id="group-separator-template">
    <optgroup label="__________"></optgroup>
    <optgroup  data-bind="attr: {label: Text}"></optgroup>
</script>
<script type="text/html" id="element-template">
    <option data-bind="text: Text, value: Value"></option>
</script> 
```

选择定义：

```
 <select data-bind="template: { name: pubCodeTemplate, foreach: PubCodes } , optionsCaption: 'Please Select', value:SelectedPubCode">
    </select> 
```

您需要将此代码添加到您的 javascript 模型中：

```
self.pubCodeTemplate = function (pubCode) {
        return pubCode.Type !== 1 ? 'element-template' : 'group-separator-template';
}; 
```

# android - 如何在 android 中使用文本和按钮在 iOS 中制作标题

> ID：12815993
> 
> 赞同：0
> 
> 时间：2012-10-10T09:21:32.410
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

我想在 android 中使用文本和按钮在 iOS 中创建标题（Cetner 中的文本和左右两侧的按钮），我已经尝试过但根本没有用，请指导我......我怎样才能为我制作这个应用程序

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T09:23:09.117

尝试这个。制作 header.xml 文件并将下面的代码放入其中，并在任何布局文件中使用`include`.

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" 
    android:background="@drawable/titlebar"
    android:gravity="center">

     <ImageButton 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/back_button"
        android:background="@android:color/transparent"
        android:layout_marginLeft="5.0dip"
        android:id="@+id/imageButtonBack"
        android:contentDescription="@string/ui_image_home_description"/>

    <TextView 
        android:id="@+id/textViewTitleBar"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal"
        style="@style/TitleBarText"
        android:singleLine="false"/>

    <ImageButton 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/home_button"
        android:background="@android:color/transparent"
        android:layout_marginRight="5.0dip"
        android:id="@+id/imageButtonHome"
        android:contentDescription="@string/ui_image_home_description"/>
</LinearLayout> 
```

注意：将以下样式添加到 res/values 文件夹中的 style.xml。

```
 <style name="TitleBarText">
        <item name="android:layout_width">0dp</item>
        <item name="android:layout_height">fill_parent</item>
        <item name="android:layout_weight">1</item>
        <item name="android:gravity">center_vertical</item>
        <item name="android:textSize"> 17sp </item>
        <item name="android:paddingLeft">12dip</item>
        <item name="android:paddingRight">12dip</item>
        <item name="android:textColor">@color/white</item>
        <item name="android:singleLine">true</item>
        <item name="android:ellipsize">end</item>
    </style> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T09:49:36.260

这是一个更容易的。你可以试试这个：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true" 
        android:background="@drawable/header">

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:text="Back" />

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:text="Next" />

    </RelativeLayout>

</RelativeLayout> 
```

# c# - Windows 8 Metro - CurrentApp.RequestProductPurchaseAsync

> ID：12815999
> 
> 赞同：1
> 
> 时间：2012-10-10T09:21:52.223
> 
> 标签：c#, windows-8, in-app-purchase, windows-store-apps

我在 Windows 应用商店中有一个免费的 Metro 应用程序。现在我想尝试应用内购买，所以我在“高级功能”中创建了一个应用内购买项目，产品 ID 名为“myProduct”。

当我尝试在我的程序中购买这个项目时，我调用以下命令：

`string receipt = await CurrentApp.RequestProductPurchaseAsync("myProduct", true);`

我得到了这个回复：

`「Windows Marketplace」 is no longer available you try to purchase the item.`

那么，我怎样才能尝试我的应用内购买呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T22:37:07.587

您是在从 Windows 商店安装的应用程序下还是在您的工作站上编译的应用程序下测试购买功能？我这是用于测试您的本地版本，您必须使用：

```
CurrentAppSimulator.RequestProductPurchaseAsync 
```

[参考](http://msdn.microsoft.com/en-us/library/windows/apps/hh967810.aspx)