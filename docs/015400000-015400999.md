# StackOverflow 问答 15400000-15400999

# java - Java 不兼容的类型；JTextField 和整数

> ID：15400000
> 
> 赞同：0
> 
> 时间：2013-03-14T02:15:25.330
> 
> 标签：java, swing, integer, jtextfield

完整代码请访问[http://ideone.com/7XHxSm](http://ideone.com/7XHxSm)

我正在尝试使用`JTextField`然后拉字符串值然后将值解析为整数。解析后，我需要将它们相乘。稍后，我会将它们全部加起来，加和乘以得到额外的数量，然后除以得到一个数字。

一旦你看到我的代码，你就会明白。我知道这有点神秘，但代码会解释。

我不知道发生了什么，因为我将值从中提取`JTextField`然后将其转换为整数，但 Java 拒绝转换它。

```
widthWall2 = Integer.parseInteger(wall2Width.getText());
heighthWall2 = Integer.parseInteger(wall2Heighth.getText());
//wall2Area = widthWall2*heighthWall2;
wall2Area = Integer.valueOf(wall2Width.getText()) * integer.valueOf(wall2Heighth.getText()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T02:19:25.070

`JTextField`并且`Integer`是不兼容的类型，因此不能将一个分配给另一个。您想设置`JTextField *.* 代替

```
wall2Area = Integer.valueOf(wall2Width.getText()) *
              integer.valueOf(wall2Heighth.getText()); 
```

和

```
wall2Area.setText(Integer.toString(Integer.valueOf(wall2Width.getText()) * Integer.valueOf(wall2Heighth.getText()))); 
```

另外，更换

```
Integer.parseInteger(wall2Width.getText()) 
```

和

```
Integer.parseInt(wall2Width.getText()) 
```

始终检查[文档](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T02:21:22.260

正如标题，我理解的问题是：

```
wall2Area = Integer.valueOf(wall2Width.getText()) *
          integer.valueOf(wall2Heighth.getText()); 
```

您尝试将`Integer`值分配给`JTextField`. 将其更改为：

```
wall2Area.setText(Integer.valueOf(wall2Width.getText()) *
          integer.valueOf(wall2Heighth.getText())); 
```

# python - python 猪拉丁语转换器

> ID：15400008
> 
> 赞同：1
> 
> 时间：2013-03-14T02:16:01.090
> 
> 标签：python

请帮我！

我正在将具有多行的文本文件转换为猪拉丁语。

例子：Pig 拉丁语翻译：这是一个例子。应该是：Histay siay naay xampleeay。

我需要将任何标点符号留在应有的位置（在大多数情况下是句子的结尾）我还需要在原文中以大写字母开头的任何单词在拉丁语版本中以大写字母开头，其余的字母小写。

这是我的代码：

```
def main():
    fileName= input('Please enter the file name: ')

    validate_file(fileName)
    newWords= convert_file(fileName)
    print(newWords)

def validate_file(fileName):
    try:
        inputFile= open(fileName, 'r')
        inputFile.close()
    except IOError:
        print('File not found.')

def convert_file(fileName):
    inputFile= open(fileName, 'r')
    line_string= [line.split() for line in inputFile]

    for line in line_string:
        for word in line:
            endString= str(word[1:])
            them=endString, str(word[0:1]), 'ay'
            newWords="".join(them)
            return newWords 
```

我的文本文件是：

```
This is an example. 

My name is Kara! 
```

程序返回：

```
Please enter the file name: piglatin tester.py
hisTay
siay
naay
xample.eay
yMay
amenay
siay
ara!Kay
None 
```

我如何让他们在他们所在的行中打印出来？还有我该如何处理标点符号和大写？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T03:06:21.133

这是我对您的代码的修改。您应该考虑使用[nltk](http://nltk.org/)。它对单词标记化的处理更加强大。

```
def main():
    fileName= raw_input('Please enter the file name: ')

    validate_file(fileName)
    new_lines = convert_file(fileName)
    for line in new_lines:
        print line

def validate_file(fileName):
    try:
        inputFile= open(fileName, 'r')
        inputFile.close()
    except IOError:
        print('File not found.')

def strip_punctuation(line):
    punctuation = ''
    line = line.strip()
    if len(line)>0:
        if line[-1] in ('.','!','?'):
            punctuation = line[-1]
            line = line[:-1]
    return line, punctuation

def convert_file(fileName):
    inputFile= open(fileName, 'r')
    converted_lines = []
    for line in inputFile:
        line, punctuation = strip_punctuation(line)
        line = line.split()
        new_words = []
        for word in line:
            endString= str(word[1:])
            them=endString, str(word[0:1]), 'ay'
            new_word="".join(them)
            new_words.append(new_word)
        new_sentence = ' '.join(new_words)
        new_sentence = new_sentence.lower()
        if len(new_sentence):
            new_sentence = new_sentence[0].upper() + new_sentence[1:]
        converted_lines.append(new_sentence + punctuation)
    return converted_lines 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T03:28:35.803

我做除了标点符号的工作。我仍在考虑解决方案。这是我的代码：

```
def convert_file(fileName):
    inputFile = open(fileName,'r')
    punctuations = ['.',',','!','?',':',';']
    newWords = []
    linenum = 1

    for line in inputFile:
        line_string  = line.split()
        for word in line_string:
            endString= str(word[1]).upper()+str(word[2:])
            them=endString, str(word[0:1]).lower(), 'ay'
            word = ''.join(them)
            wordAndline = [word,linenum]
            newWords.append(wordAndline)
        linenum +=1
    return newWords 
```

不同之处在于它返回文件中的单词及其行。

```
['Histay', 1], ['Siay', 1], ['Naay', 1], ['Xample.eay', 1], ['Ymay', 3], ['Amenay', 3], ['Siay', 3], ['Ara!kay', 3] 
```

# php - 添加 where 子句以向该 ID 显示列数据？

> ID：15400015
> 
> 赞同：-2
> 
> 时间：2013-03-14T02:17:11.713
> 
> 标签：php, mysql

我试图为每一行/每行中的每个单独的“id”回显“read_forum”的值。

例如：

```
id  |  read_forum(views)  |  content  |

1          30          hello
2          45          bored
3          34          something 
```

所以在我的页面上我会有：

```
id 1 content: hello     30 views 
id 2 content: bored     45 views 
```

等等。

所以基本上我的问题是我如何在我的 sql 语句中放置一个 where 子句来分别用 id 1 回显 id 1 的视图和用 id 2 分别回显 id 2 的视图。

我希望我让自己清楚。希望有人能帮忙谢谢。

```
function check_new_forum2($forum) {
            global $connection;
            global $_SESSION;
            $query = "SELECT read_forum FROM ptb_forum WHERE id=$forum
        ";
            $check_new_forum_set2 = mysql_query($query, $connection);
            confirm_query($check_new_forum_set2);
            return $check_new_forum_set2;       
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T02:29:45.227

我不太确定是什么`read_forum`。是您的表名还是列名？是`ptb_forum`表名，还是数据库名？

当您打开与 MySQL 的连接时，您必须指定数据库名称，并且任何查询都只会在该数据库中查找。

我*相信*您正在尝试做的是选择`read_forum`数据库`ptb_forum`中该`id`列是特定值的表的所有列。在这种情况下，您的查询将是（在连接到正确的数据库之后）：

```
SELECT * FROM read_forum WHERE id=$forum 
```

我会警告你，这个查询容易受到 SQL 注入的攻击。我鼓励您至少在将值添加到查询之前将其解析为整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T02:30:40.200

而不是使用

```
$query = "SELECT read_forum FROM ptb_forum WHERE id=$forum"; 
```

你应该使用

```
$query = "SELECT * FROM ptb_forum WHERE id=".$forum ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T02:31:56.757

如果你只想要一个显示行，你可以将列连接成一个人类可读的字符串，如下所示

```
$query =  "SELECT 'id ' || `id` || ' content: ' || `content` 
         || '    ' || `views` || ' views' FROM ptb_forum WHERE id=$forum"; 
```

# java - pgsql 日志：无法建立连接，因为目标机器主动拒绝它

> ID：15400017
> 
> 赞同：0
> 
> 时间：2013-03-14T02:17:24.543
> 
> 标签：java, postgresql

最近，我发现客户端总是在等待超时，当他们连接到数据库服务器时。有些人在这里登录。

我们在 postgresql 中有一个数据库服务器。同时在远程，大约有 20 个客户端连接到这个数据库服务器，添加、更新或删除数据。

2013-03-13 23:19:41 HKT日志： 不完整的启动包 2013-03-13 23:31:11 HKT日志： 无法从客户端获取数据： 无法连接，因为目标机器主动拒绝.

13-03-13 13:31:31:21 日志T:23 23 月 23 日 23 月 23 日香港数据上线的 EOF013-03-13-13 37:05 无法从客户端连接目标机器主动拒绝了。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T03:13:03.927

您需要修改postgres sql 安装目录中的**pg_hba.conf 。**无论您使用什么 IPv4 本地连接或 IPv6 本地连接。

*   例如，IPv4 连接的原始配置是

    `host all all 127.0.0.1/32 md5`这意味着只有本地客户端。

*   将 IPv4 本地连接更改为

    `host all all 0.0.0.0/0 md5`表示允许所有客户端访问。

[了解更多信息](http://www.postgresql.org/docs/8.1/static/client-authentication.html)

# ascii - 等宽 ascii 编辑器

> ID：15400025
> 
> 赞同：0
> 
> 时间：2013-03-14T02:18:12.180
> 
> 标签：ascii, text-editor, monospace

是否有任何 ASCII“构建器”/“文本编辑器”或任何可以让某人以不同于普通文本编辑器的方式编写文本的东西。这个想法是，您采用等宽字体并用所有空格填充某种文本区域，当您将光标放在文本区域上的任何位置时，它会“粘住”。下一个想法是，每当您编写一个字符时，它都会“吃掉”或替换该空间中的现有字符。我可以很容易地用 javascript 构建它，但我觉得它是一些文本编辑器的功能。我有哪些选择？这存在吗？

我讨厌当这种情况发生时，我不希望它发生。

```
|----------------------------------------|
|                                        |
|                                        |
|                      s                  |
|                                \/      |
|                                        |
|----------------------------------------| 
```

而不是这个...

```
|----------------------------------------|
|                                        |
|                                        |
|                      s                 |
|                                \/      |
|                                        |
|----------------------------------------| 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-28T08:15:57.030

[TheDraw](https://en.wikipedia.org/wiki/TheDraw)是一个旧的 dos 应用程序，它可以满足您的需求。

我在网上看到了 Windows 的最新替代品，例如[AcidDraw](http://download.cnet.com/ACiDDraw-ANSI-Editor/3000-2192_4-10005588.html)和[PabloDraw](https://en.wikipedia.org/wiki/PabloDraw)，但我不知道它们。

希望其中一个仍然有用。

# assembly - TASM - 寄存器？

> ID：15400028
> 
> 赞同：0
> 
> 时间：2013-03-14T02:18:34.020
> 
> 标签：assembly, x86, tasm

我很困惑寄存器如何在 TASM 或 Assembly 中工作。尤其是在其中分配一个整数值时。我真的找不到清晰的教程。

有人可以向我解释这些寄存器的使用：

```
AX, BX, CX, DX,

AH AL, BL BH, CL CH, DL DH 
```

我看到一个使用 CX 作为循环计数器的程序。我也可以同时将它用作某个整数值的主机吗？

老实说，我有很多问题。我什至不知道如何在 x86 中执行加法、减法

我们的教授真的没有给我们任何参考。我们甚至没有被教导如何在汇编中进行数学运算。在讲座中，我们只给出了简要解释的代码（比如代码是如何工作的，而没有解释每一行的用途）。我们在活动中所做的就是复制粘贴他的代码，然后漫无目的地修改。

是的，他给出的任务甚至还不是我们所知道的。

抱歉在这里吐槽。

更新：我想创建一个嵌套循环，这是一个伪代码。

```
; for (CX = 6; CX != 0; CX--) { // PSEUDO CODE, 
    ; for (BL = 0; BL != 7-CX; BL++) { 
        ; putchar(M+BL);
    ; }
    ; M--;
    ; putchar(10);
    ; putchar(13);
; } 
```

我一直在尝试在我的寄存器中设置值时遇到麻烦，因为我不知道它们是如何工作的。请向我解释我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:54:41.107

您没有在这里初始化 BL。您需要在内部循环之前将其设置为 0
`INNER:`

这里你需要在执行中断之前将BL添加到DL，这样你就得到了伪代码中的字符M+BL。
`MOV DL, M`
`INT 21H`

应该删除此代码，因为它将打印字符 7-CL（即“垃圾”）。
`MOV DL, AL`
`INT 21H`

这恰好适用于您的情况，但为了正确起见，它确实应该是 JMP 而不是 JNE。你已经在循环的前面有一个条件退出，所以这个应该是一个无条件的跳转。
`JNE INNER`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T02:28:44.593

试试这个链接：[x86 Assembly Reference Sheet](https://stackoverflow.com/questions/1933801/x86-assembly-reference-sheet)

没有更具体的问题，这里有一些基础知识。抱歉没有教程的链接，这是记忆中的，如果您有任何具体问题，请告诉我，并会更新

```
; assign 100 to ax (16 bit)
mov ax, 100

; add ax to bx
add bx,ax

; add to ax, memory refereced by dx
add ax,[dx]

; add 8 bit 100 to al
add al, 100 
```

ah,al,bl 等保存 8 位值

ax,bx,cx 等保存 16 位值

eax,ebx 等保存 32 位值

# node.js - Mongoose 创建多个文档

> ID：15400029
> 
> 赞同：46
> 
> 时间：2013-03-14T02:18:38.193
> 
> 标签：node.js, mongoose

我知道在最新版本的 Mongoose 中，您可以将多个文档传递给 create 方法，在我的情况下甚至可以传递一组文档。

```
var array = [{ type: 'jelly bean' }, { type: 'snickers' }];
Candy.create(array, function (err, jellybean, snickers) {
    if (err) // ...
}); 
```

我的问题是数组的大小是动态的，因此在回调中拥有一个已创建对象的数组会很有帮助。

```
var array = [{ type: 'jelly bean' }, { type: 'snickers' }, ..... {type: 'N candie'}];
Candy.create(array, function (err, candies) {
    if (err) // ...

    candies.forEach(function(candy) {
       // do some stuff with candies
    });
}); 
```

不在文档中，但是这样的事情可能吗？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-03-14T03:23:07.247

您可以通过 访问回调的变量参数列表[`arguments`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)。因此，您可以执行以下操作：

```
Candy.create(array, function (err) {
    if (err) // ...

    for (var i=1; i<arguments.length; ++i) {
        var candy = arguments[i];
        // do some stuff with candy
    }
}); 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2018-06-18T22:14:10.127

使用[Mongoose v5.1.5](http://mongoosejs.com/docs/models.html)，我们可以使用**insertMany()**方法并传递数组。

```
const array = [
    {firstName: "Jelly", lastName: "Bean"},
    {firstName: "John", lastName: "Doe"}
];

Model.insertMany(array)
    .then(function (docs) {
        response.json(docs);
    })
    .catch(function (err) {
        response.status(500).send(err);
    }); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-01-17T23:41:08.840

根据GitHub 上的[这张票](https://github.com/LearnBoost/mongoose/issues/2582)`create()`，如果您在使用.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2021-01-08T23:27:20.283

从 Mongoose v5 开始，您可以使用`insertMany` 根据[mongoose 站点](https://mongoosejs.com/docs/api.html#model_Model.insertMany)，它比`.create()`：

> 验证文档数组并将它们插入 MongoDB（如果它们都有效）的快捷方式。这个函数比`.create()` 它只向服务器发送一个操作而不是每个文档一个操作要快。

完整示例：

```
const mongoose = require('mongoose'); 

// Database connection 
mongoose.connect('mongodb://localhost:27017/databasename', { 
    useNewUrlParser: true, 
    useCreateIndex: true, 
    useUnifiedTopology: true
}); 

// User model 
const User = mongoose.model('User', { 
    name: { type: String }, 
    age: { type: Number } 
}); 

// Function call, here is your snippet
User.insertMany([ 
    { name: 'Gourav', age: 20}, 
    { name: 'Kartik', age: 20}, 
    { name: 'Niharika', age: 20} 
]).then(function(){ 
    console.log("Data inserted")  // Success 
}).catch(function(error){ 
    console.log(error)      // Failure 
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-12-25T15:21:17.407

通过`insert`集合 db 的功能，例如：

```
Model.collection.insert(array, (err, list) => {
  if (err) throw err;

  console.log('list:', list);
}); 
```

# c++ - 极大整数的变量类型是什么？

> ID：15400031
> 
> 赞同：20
> 
> 时间：2013-03-14T02:18:42.507
> 
> 标签：c++

我试过使用

```
long long int 
```

但它不适用于像 3141592653589793238462643383279502884197169399375 这样的数字，我需要这个高达 10 ^ 80。知道吗？让我知道。非常感谢。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-14T02:26:32.900

您不能为此使用任何内置整数类型。您需要一个“多精度整数”又名“bignum”库。对于 C++，我会首先尝试[Boost.Multiprecision](http://www.boost.org/doc/libs/1_53_0/libs/multiprecision/doc/html/index.html)，但请注意，Boost 可能比它的价值要麻烦得多，特别是如果您使用的模块具有任何共享库（又名 DLL）组件。另一个明显的选择是[GNU MP](http://gmplib.org/)。它只有一个 C 接口，但维护良好、可靠、快速且非常受欢迎（事实上，Boost.MP 似乎“只是”它的 C++ 包装器！）

**警告**：您可能需要一个 bignum 库，因为您正在尝试实现使用大量数字的加密原语之一，例如[RSA](http://en.wikipedia.org/wiki/RSA_%28algorithm%29)。 ***不要这样做***。通用的 bignum 库对于加密使用是不安全的，即使它们是安全的，你仍然会犯许多微妙的错误，这会破坏你的安全性。改用经过良好测试的密码库；对于 C++，我推荐[Botan](http://botan.randombit.net/)。

# c - 使用指针 C 循环

> ID：15400033
> 
> 赞同：-3
> 
> 时间：2013-03-14T02:18:50.840
> 
> 标签：c, function, pointers

我在做这个练习时遇到了一些麻烦。基本上，`function void check(char *tel, char *c)`数组的第一个值必须是数字`2`，其他 8 必须是 之间的数字`0 and 9`。如果条件满足则打印`V`，否则打印`F`。

```
#include<stdio.h>
#include<string.h>
#include<stdlib.h>
#include<ctype.h>

void check(char *tel, char *c){

int i;

if(*tel!=2) printf("Error\n"); 
                *c='F';
                return;  //I guess this return is wrong

if(*tel==2)
    for(i=0;tel[i]<9;i++){
        if(isdigit(tel[i]));

                   else{
               printf("Error!\n");
               *c='F';
               break;
                               return;}         //this one might be in bad use too

    }
 else

 *c='V';           //having troubles here.. i'm not seeing a way to fix this
 }

 int main(){

 char number[9]={2,3,4,5,6,7,4,5,3};
 char car;

 check(number,&car);

 printf("%c \n", car);

     system("pause");
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T02:22:49.950

您的许多`if`和`else`块周围缺少花括号。正确缩进和格式化你的代码会有很长的路要走。

```
if(*tel!=2) printf("Error\n"); *c='F'; return; 
```

例如，上面应该是：

```
if (*tel != 2) {
    printf("Error\n");
    *c = 'F';
    return;
} 
```

请，请，请：**正确缩进您的代码**。

* * *

**编辑：**更明确地说，这是您的代码在重新格式化后的样子。你现在看到错误了吗，你缺少花括号的地方？

`/*******/`提示：我已经用注释标记了应该有它们的行。

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <ctype.h>

void check (char *tel, char *c) {
    int i;

    if (*tel != 2)                          /*******/
        printf("Error\n"); 

    *c = 'F';
    return;

    if (*tel == 2)                          /*******/
        for (i = 0; tel[i] < 9; i++) {
            if (isdigit(tel[i]))            /*******/
                ;
            else {
                printf("Error!\n");
                *c = 'F';
                break;
                return;
            }
        }
    else                                    /*******/
        *c = 'V';
}

int main() {
    char number[9] = {2, 3, 4, 5, 6, 7, 4, 5, 3};
    char car;

    check(number, &car);

    printf("%c \n", car);

    system("pause");
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T02:23:50.320

您发布的代码存在很多小问题。这对我来说是最明显的：

```
if(*tel!=2) printf("Error\n"); *c='F'; return;  //I guess this return is wrong 
```

由于您决定不使用花括号来分割 if-branch 逻辑，因此只有第一条语句 - printf("Error\n"); 被认为与您的 if 检查相关联。这意味着在每次执行中，c 的值都将设置为 'F' 并且函数将返回。编译器将其视为：

```
if (*tel != 2) { 
  printf("Error\n");
}
*c = 'F';
return;
// The rest is ignored 
```

您应该显式地使用花括号来标记 if 分支，直到您对 C++ 中的语句定义非常熟悉！

# ruby-on-rails - 无论如何，是否可以使用 Active Admin 添加其他级别的菜单？

> ID：15400036
> 
> 赞同：4
> 
> 时间：2013-03-14T02:19:20.473
> 
> 标签：ruby-on-rails, activeadmin

我正在使用 Active Admin 并尝试在下拉菜单中添加另一个级别。在文档中，我看到我可以使用以下代码放置一个级别：

```
 ActiveAdmin.register Post do
    menu :parent => "Blog"
  end 
```

谢谢你的帮助。

编辑：

我想要这样的东西：

```
Menu 1 ^
Menu 2 > Menu A
         Menu B
Menu 3 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-07T20:13:10.767

我解决了这个问题，覆盖了 ActiveAdmin 的菜单。还需要为新菜单创建一个新的 CSS。

通知 ActiveAdmin 我们将使用标头本身。为此，在**config/initializers/active_admin.rb**文件中添加以下行：

```
config.view_factory.header = CustomAdminHeader
config.register_stylesheet 'new_menu.css' 
```

创建一个名为 CustomAdminHeader 的类，该类将包含将覆盖构造菜单的代码。**您可以在app/admin**中创建此类并将文件命名为**custom_admin_header.rb**。并添加此代码以创建新菜单：

```
class CustomAdminHeader < ActiveAdmin::Views::Header
  include Rails.application.routes.url_helpers

  def build(namespace, menu)
    div :id => 'tabs' do
      # Add one item without son.
      ul do
        # Replace route_destination_path for the route you want to follow when you receive the item click.
        li { link_to 'Item without son', route_destination_path }
      end

      # Add one item with one son.
      ul do
        li do
          text_node link_to("Parent with 1 child", "#")
          ul do
            li { link_to 'Son without child', route_destination_path }
            # If you want to add more children, including more LIs here.
          end
        end
      end

      # Adds a menu item with one son and one grandson.
      ul do
        li do
          text_node link_to("Grandmother with 1 child", "#")
          ul do
            li do
              text_node link_to("Parent with 1 child", route_destination_path)
              ul do
                li { link_to 'Grandson without child', route_destination_path }
                # If you want to add more grandchildren, including more LIs here.
              end
            end
          end
        end
      end

    super(namespace, menu)
  end
end 
```

您的菜单结构将由此类创建，因此不应显示文件夹**app/admin中包含的类中使用的菜单设置。**为此，您需要在所有类中添加以下代码：

```
menu false 
```

最后，您需要创建一个名为**new_menu.css**的 CSS 文件并为新菜单添加 CSS。

我在我的博客上发布了这个解决方案：

[http://monteirobrena.wordpress.com/2013/05/07/activeadmin-customizacao-do-menu/](http://monteirobrena.wordpress.com/2013/05/07/activeadmin-customizacao-do-menu/)

我希望它对任何人都有帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T01:25:21.360

如果您将多个资源放在菜单中的同一个父项下，那么您的下拉菜单将为这些资源中的每一个提供一个级别。对于下面的示例，博客选项卡将下拉一个菜单，其中包含帖子和评论。要向“博客”下拉菜单添加更多资源，您所要做的就是让他们的`menu :parent => "Blog"`

发布资源

```
ActiveAdmin.register Post do
  menu :parent => "Blog"
end 
```

评论资源

```
ActiveAdmin.register Comment do
  menu :parent => "Blog"
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-16T05:57:22.307

您可以通过一点 css 帮助在 ActiveAdmin.setup 配置文件中完成此操作。

首先在 ActiveAdmin.setup 添加：

```
config.namespace :admin do |admin|
  admin.build_menu do |menu|
    menu.add id: 'submenu-id', label: proc { 'SubMenu Title' }, parent: 'Blog', if: proc { current_user.superadmin? } do |submenu_item|
      submenu_item.add label: 'Menu A', url: '/admin/menu_a'
      submenu_item.add label: 'Menu B', url: '/admin/menu_b'
      submenu_item.add label: 'Menu C', url: '/admin/menu_c'
    end
  end
end 
```

然后在 active_admin.css.scss 中添加一点 css 来调整你的视图。像这样的东西：

```
#submenu-id {
  ul {
    display: none !important;
    position: absolute !important;
    left: 166px;
    margin-top: -30px !important;
  }

  &:hover ul {
    display: block !important;
  }
} 
```

我相信你会稍微需要适当地调整你的css。您都需要将***“menu false”***添加到每个 ActiveAdmin.register 页面。

# php - php - imagecopyresampled

> ID：15400041
> 
> 赞同：0
> 
> 时间：2013-03-14T02:19:41.073
> 
> 标签：php, resize, crop, jcrop

我正在尝试使用`jcrop`允许用户创建其图像的缩略图，它将是`190x190 pixels`.

`jcrop`似乎正在工作并向我发送正确的坐标。然而，`imagecopyresampled`似乎表现得非常不可预测，并没有给我我所期望的。这是我的代码：

```
$destWidth = $destHeight = 190;
$jpeg_quality = 90;
$path = Yii::app()->basePath."/../images/user/";
$src = $path.$model->image;

$img_src = imagecreatefromjpeg($src);
$img_dest = ImageCreateTrueColor( $destWidth, $destHeight );

imagecopyresampled(
$img_dest, //destination image
$img_src, //source image
0, //top left coordinate of the destination image in x direction
0, //top left coordinate of the destination image in y direction
$_POST['x'], //top left coordinate in x direction of source image that I want copying to start at
$_POST['y'], //top left coordinate in y direction of source image that I want copying to start at
$destWidth, //190, thumbnail width
$destHeight, //190, thumbnail height
$_POST['w'], //how wide the rectangle from the source image we want thumbnailed is
$_POST['h'] //how high the rectangle from the source image we want thumbnailed is
);

imagejpeg($img_dest,$path."thumbs/test.jpg",$jpeg_quality); 
```

我很茫然，我检查了四个`$_POST`变量是否都正确输入，但由于某种原因我无法获得正确的缩略图。我可以肯定的是，缩略图通常放大太多，并且我希望它开始的左上角没有被使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T02:36:27.983

这是我的最终源代码。我发现我的 CSS 与我的代码冲突，因为它允许最大高度为 550 像素，最大宽度为 700 像素。这导致较大的图像具有不正确的宽度和/或高度。所以在这些情况下，我必须根据图像的纵横比添加一个乘数，以及 CSS 如何调整它的大小。

```
 $destWidth = $destHeight = 190;
        $jpeg_quality = 90;

        $path = Yii::app()->basePath."/../images/user/";
        $src = $path.$model->image;
        $img_src = imagecreatefromjpeg($src);
        $img_dest = ImageCreateTrueColor( $destWidth, $destHeight );

        //
        // IMPORTANT!! 
        // If you change the max-width or max-height in the css, you MUST change them here too!!
        //
        $maxWidth = 700;
        $maxHeight = 550;

        $srcWidth = imagesx($img_src);
        $srcHeight = imagesy($img_src);
        $srcRatio = $srcWidth/$srcHeight;
        $mult = 1;

        //if the image is wider than the max allowed width AND has a wider aspect ratio than a max height + max width image
        if ($srcWidth > $maxWidth && $srcRatio > $maxWidth/$maxHeight) {
            $mult = $srcWidth/$maxWidth;
        //else if the image is taller than the max height
        } else if ($srcHeight > $maxHeight) {
            $mult = $srcHeight/$maxHeight;
        }

        imagecopyresampled(
            $img_dest, //destination image
            $img_src, //source image
            0, //top left coordinate of the destination image in x direction
            0, //top left coordinate of the destination image in y direction
            $_POST['x']*$mult, //top left coordinate in x direction of source image that I want copying to start at
            $_POST['y']*$mult, //top left coordinate in y direction of source image that I want copying to start at
            $destWidth, //190, thumbnail width
            $destHeight, //190, thumbnail height
            $_POST['w']*$mult, //how wide the rectangle from the source image we want thumbnailed is
            $_POST['h']*$mult //how high the rectangle from the source image we want thumbnailed is
        );

        imagejpeg($img_dest,$path."thumbs/$model->image",$jpeg_quality); 
```

# asp.net - 如何在 ASP.NET 中禁用 RSS

> ID：15400046
> 
> 赞同：-5
> 
> 时间：2013-03-14T02:20:02.167
> 
> 标签：asp.net, iis, rss

我的网站是一个模板，它有 web.config。如何在这个网站上禁用它的 RSS

我正在使用供应商的网站，当我阅读评论时，我发现 web.config 只有一个应用程序文件夹名称来设置 RSS

但是，没有启用或禁用 RSS 的选项，我怎么知道在哪里禁用 RSS

它在代码目录中有 RSS_Feed 类，在 xslt 目录和 web.config 中有 RSS_result 用于 RSS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T02:26:09.190

在 html 模板上查找类似的内容并将其删除（不要对整个标签进行字面搜索，因为 title 和 href 会有所不同）

```
<link rel="alternate" type="application/rss+xml" title="RSS" href="url" /> 
```

# c++ - 通过引用传递的 c 字符串的输入验证

> ID：15400058
> 
> 赞同：0
> 
> 时间：2013-03-14T02:21:14.563
> 
> 标签：c++, cstring, c-strings

```
#include "cstack.h"
#include <iostream>
#include <cstring>
using namespace std;

bool isValidExpression (CStack&, char*);

int main (void)
{
    char expression[21];
    expression[0-21]=0;
    cout<< "Enter an expression: ";
    cin >>expression;
    CStack stack1;

    if (isValidExpression (stack1, expression)==true)
    {
        cout << "\nIt's a valid expression";
    }
    else
    {
        cout << "\nIt's NOT a valid expression";
    }
    return 0;
}

bool isValidExpression (CStack& stackA, char* strExp)
{
    for(int a=0;a<21 && strExp[a]!=0;a++)
    {
        if(strExp[a]="}"||"]"||")") //This is the issue right here
        {
            cout<<"Action A" <<endl;
        }
        else
        {
            stackA.push(strExp[a]);
        }
    }
    return true;
} 
```

我遇到的问题是，无论我输入什么，Action A 总是会发生。例如，如果我输入 [，我仍然会得到不是所需结果的操作 a。我一直用字符串来做这样的事情，但我们需要在这个程序中使用 cstring。您将如何编辑它以使其工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T02:23:54.343

尝试更新：

```
if(strExp[a]="}"||"]"||")") 
```

至：

```
if(strExp[a]=='}'|| strExp[a]==']'|| strExp[a]==')' ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T02:24:07.440

`if(strExp[a]="}"||"]"||")")`将始终为真，因为它使用`"]"`and`")"`作为运算符的布尔值`||`，并且字符串常量本身解析为被认为是 的非零`const char *`s `true`。此外，单`=`是赋值，而不是比较，这意味着条件的所有三个部分`if`都是`true`

上述条件如下：

`"}"`if（为[true]生成的指针的低 8 位
或生成的指针为`"]"`非零 [true]
或生成的指针为`")"`非零 [true]）

我认为你的意思是

`if(strExp[a]=='}' || strExp[a]==']' || strExp[a]==')')`

另请注意，这里的双引号替换为单引号。检查单个字符时使用单引号而不是双引号。也`==`用于比较。

如果您正在使用 进行编译，`g++`则应该使用 启用警告`g++ -Wall -Wextra`，任何理智的编译器都会出于所述的所有原因在该行上生成警告。

# ios - 成就屏幕的“完成”按钮在某些设备上不起作用

> ID：15400061
> 
> 赞同：0
> 
> 时间：2013-03-14T02:21:22.437
> 
> 标签：ios, objective-c, xcode, uikit, game-center

我正在使用 GKAchievementViewController 来显示成就。它在大多数设备上都能正常工作，但在某些设备上（iPod Touch 第 3 代和运行 iOS 5.1.1 的 iPad 1）点击完成按钮不起作用。

我不知道如何调试这个......

这是我用来显示成就的代码：

```
 viewController = [[GKAchievementViewController alloc] init];
    if (viewController)
    {
        viewController.achievementDelegate = self;

        [self presentModalViewController:viewController animated:YES];
    } 
```

进而：

```
- (void)achievementViewControllerDidFinish:(GKAchievementViewController *)aViewController
{
     [self dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T02:28:07.113

实施时应该工作`achievementViewControllerDidFinish:`

```
- (void) achievementViewControllerDidFinish:(GKAchievementViewController *)viewController
{
    [viewController.delegate dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:11:47.663

如果有人遇到同样的问题，请回答我自己的问题。这似乎解决了这个问题：

```
- (void)achievementViewControllerDidFinish:(GKAchievementViewController *)aViewController
{
        if ([self respondsToSelector:@selector(dismissViewControllerAnimated:completion:)])
        {
            [self dismissViewControllerAnimated:YES completion:^{
                aViewController.achievementDelegate = nil;
                [aViewController release];
            }];
        }
        else
        {
            [self dismissModalViewControllerAnimated:YES];
            aViewController.achievementDelegate = nil;
            [aViewController release];
        }
} 
```

# android - 使android GridView不扭曲图像

> ID：15400063
> 
> 赞同：1
> 
> 时间：2013-03-14T02:21:25.307
> 
> 标签：android, android-layout, gridview

我正在使用 GridView 来显示一个完美的正方形数量的图片（比如 9，即 3X3）。图片都是原来的大小。但是当它们出现在 GridView 上时，它们会被扭曲。有没有办法让 GridView 以实际大小显示图像而不会失真？

此外，使用图像适配器将图像动态发送到视图[，如官方 android 教程中所示](http://developer.android.com/guide/topics/ui/layout/gridview.html)。

编辑：

我正在考虑用我自己的 CustomView 扩展 GridView，但是我不知道要覆盖什么以及如何覆盖：

```
public class CustomView extends GridView{ ... } 
```

# nosql - 对于这个用例，最好的 NoSQL DBMS 是什么？

> ID：15400064
> 
> 赞同：1
> 
> 时间：2013-03-14T02:21:28.477
> 
> 标签：nosql, data-modeling, database-performance

在我问我的问题之前，先介绍一下我们的问题的背景。

我们正在开发政府收入预测应用程序。在这个应用程序中，我们收集有关以前收入的数据，应用几个计量经济学和政治预测模型（通过几个阶段），同时将其保存到数据库中。

简而言之，这是投影系统的简化模型：

使用此模式的几行（开始时，约 6.000 行）代表过去的收入（称为场景）：

```
+------+------+------+------+------+-------+---------+
| Cat1 | Cat2 | Cat3 | Cat4 | Year | Month | Revenue |
+------+------+------+------+------+-------+---------+ 
```

在整个投影系统中，数据以多种方式进行转换（移动类别、更改收入值、修复非典型性等）。每个转换都在一个阶段完成：

```
Initial Scenario (S0) ---(1st transformation phase)--> Transformed Scenario (S1)
S1 ---(2nd t.p.)--> S2 ---> S3 ---...---> SN 
```

每个阶段转换场景的一部分，这部分的大小在数据的 2-100% 之间变化，并且部分场景状态必须保持直到达到其最终状态 (SN)。部分状态可以只是转换后的线或整个部分场景（只要可以比较部分状态）。

此外，用户可以返回该过程（例如，返回第 2 阶段）并从那里重新开始投影，而忽略之前完成的工作。

在这个用例中，我们遇到了 RDBMS 的一个问题：它们的写入操作真的很慢（需要半个小时来进行场景投影）。

在阅读了 NoSQL DBMS 之后，我们得出了几个选择，但是，由于我仍在学习曲线上，我想问一下：在这个用例上使用的最佳选择是什么：VoltDB、Redis、Riak、Cassandra、 MongoDB 还是 HBase？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T22:46:31.247

我将从 MongoDB 的角度提出我的解决方案。也许其他人可以从其他数据库中添加他们的经验。

Mongo 有一个 map/reduce 框架，可以让你对你的数据运行相当复杂的查询。他们的 map/reduce 东西的好处是您可以将结果输出到数据库中的集合（类似于 RDBMS 中的表）。

所以它会是：

1.  运行 map/reduce 作业 1 => 输出到集合 A。
2.  针对集合 A 运行 map/reduce 作业 2 => 输出到集合 B。
3.  针对集合 B 运行 map/reduce 作业 3 => 输出到集合 C。
4.  ...
5.  利润！

每一步都会产生一组持久化的数据。这使您可以从中断的地方继续。你当然必须在完成后清理，但它可以工作。

我不是 Hadoop 专家，但您的方案听起来很适合他们的生态系统。分阶段运行具有中间输出的复杂作业。

# session - 如何将自定义字段添加到会话表

> ID：15400065
> 
> 赞同：4
> 
> 时间：2013-03-14T02:21:40.283
> 
> 标签：session, pdo, symfony-2.1

我目前正在使用`Symfony 2.1.8`内置的`PdoSessionHandler`.

我想`user_id`在会话表中添加一个字段来标识会话属于哪个（登录）用户。这个想法是我可以强制用户重新登录以破坏他的会话。在我的情况下，如果用户的权限被更新，就会发生这种情况。

`PdoSessionHandler`我查看了由于那些愚蠢的私有变量而无法扩展的内置。

所以我尝试创建一个新的（复制/粘贴）并添加我的专栏`user_id`。现在，如果用户未登录（匿名用户），此列可以为空。

所以我想`user_id`在处理程序的 write 方法中写这个。用户已经存储在中，`$data`所以我想我可以检查这个用户是否存在，抓住它`id`并将其添加到插入/更新查询中。

问题是它`$data`是编码的 - 我猜是 session_encode() - 所以我不再确定这是处理我的新领域的最佳地点，但同时我看不到其他任何地方我可以做到这一点我需要更新这个 MySQL 查询以插入新字段的值。

所以我的问题是：**处理这个额外字段的最佳地点在哪里？以及如何设置这个 user_id 值？**

另一方面，真正令人讨厌的是，`Symfony`每次我登录或注销时都会创建一个新的 cookie。所以数据库最终得到了大量的记录（它总是同一个用户）。为什么`Symfony`不是一直使用相同的 cookie 值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T10:00:30.127

您可以扩展 PdoSessionHandler（>=Symfony 2.1 的解决方案）：

```
namespace Acme\DemoBundle\HttpFoundation\Session\Storage\Handler;

use Symfony\Component\HttpFoundation\Session\Storage\Handler\PdoSessionHandler;
use Symfony\Component\Security\Core\SecurityContext;

class UserIdPdoSessionHandler extends PdoSessionHandler
{
    /**
     * @var \PDO PDO instance.
     */
    private $pdo;

    /**
     * @var array Database options.
     */
    private $dbOptions;

    /**
     * @var SecurityContext
     */
    private $context;

    public function __construct(\PDO $pdo, array $dbOptions = array(), SecurityContext $context)
    {
        $this->pdo = $pdo;
        $this->dbOptions = array_merge(
            array('db_user_id_col' => 'user_id'),
            $dbOptions
        );
        $this->context = $context;

        parent::__construct($pdo, $dbOptions);
    }

    public function read($id)
    {
        // get table/columns
        $dbTable   = $this->dbOptions['db_table'];
        $dbDataCol = $this->dbOptions['db_data_col'];
        $dbIdCol   = $this->dbOptions['db_id_col'];

        try {
            $sql = "SELECT $dbDataCol FROM $dbTable WHERE $dbIdCol = :id";

            $stmt = $this->pdo->prepare($sql);
            $stmt->bindParam(':id', $id, \PDO::PARAM_STR);

            $stmt->execute();
            // it is recommended to use fetchAll so that PDO can close the DB cursor
            // we anyway expect either no rows, or one row with one column. fetchColumn, seems to be buggy #4777
            $sessionRows = $stmt->fetchAll(\PDO::FETCH_NUM);

            if (count($sessionRows) == 1) {
                return base64_decode($sessionRows[0][0]);
            }

            // session does not exist, create it
            $this->createNewSession($id);

            return '';
        } catch (\PDOException $e) {
            throw new \RuntimeException(sprintf('PDOException was thrown when trying to read the session data: %s', $e->getMessage()), 0, $e);
        }
    }

    /**
     * {@inheritDoc}
     */
    public function write($id, $data)
    {
        // get table/column
        $dbTable     = $this->dbOptions['db_table'];
        $dbDataCol   = $this->dbOptions['db_data_col'];
        $dbIdCol     = $this->dbOptions['db_id_col'];
        $dbTimeCol   = $this->dbOptions['db_time_col'];
        $dbUserIdCol = $this->dbOptions['db_user_id_col'];

        //session data can contain non binary safe characters so we need to encode it
        $encoded = base64_encode($data);

        $userId = $this->context->isGranted('IS_AUTHENTICATED_REMEMBERED') ?
            $this->context->getToken()->getUser()->getId() :
            null
        ;

        try {
            $driver = $this->pdo->getAttribute(\PDO::ATTR_DRIVER_NAME);

            if ('mysql' === $driver) {
                // MySQL would report $stmt->rowCount() = 0 on UPDATE when the data is left unchanged
                // it could result in calling createNewSession() whereas the session already exists in
                // the DB which would fail as the id is unique
                $stmt = $this->pdo->prepare(
                    "INSERT INTO $dbTable ($dbIdCol, $dbDataCol, $dbTimeCol, $dbUserIdCol) VALUES (:id, :data, :time, :user_id) " .
                    "ON DUPLICATE KEY UPDATE $dbDataCol = VALUES($dbDataCol), $dbTimeCol = VALUES($dbTimeCol)"
                );
                $stmt->bindParam(':id', $id, \PDO::PARAM_STR);
                $stmt->bindParam(':data', $encoded, \PDO::PARAM_STR);
                $stmt->bindValue(':time', time(), \PDO::PARAM_INT);
                $stmt->bindParam(':user_id', $userId, \PDO::PARAM_STR);
                $stmt->execute();
            } elseif ('oci' === $driver) {
                $stmt = $this->pdo->prepare("MERGE INTO $dbTable USING DUAL ON($dbIdCol = :id) ".
                       "WHEN NOT MATCHED THEN INSERT ($dbIdCol, $dbDataCol, $dbTimeCol, $dbUserIdCol) VALUES (:id, :data, sysdate, :user_id) " .
                       "WHEN MATCHED THEN UPDATE SET $dbDataCol = :data WHERE $dbIdCol = :id");

                $stmt->bindParam(':id', $id, \PDO::PARAM_STR);
                $stmt->bindParam(':data', $encoded, \PDO::PARAM_STR);
                $stmt->bindParam(':user_id', $userId, \PDO::PARAM_STR);
                $stmt->execute();
            } else {
                $stmt = $this->pdo->prepare("UPDATE $dbTable SET $dbDataCol = :data, $dbTimeCol = :time WHERE $dbIdCol = :id");
                $stmt->bindParam(':id', $id, \PDO::PARAM_STR);
                $stmt->bindParam(':data', $encoded, \PDO::PARAM_STR);
                $stmt->bindValue(':time', time(), \PDO::PARAM_INT);
                $stmt->execute();

                if (!$stmt->rowCount()) {
                    // No session exists in the database to update. This happens when we have called
                    // session_regenerate_id()
                    $this->createNewSession($id, $data);
                }
            }
        } catch (\PDOException $e) {
                throw new \RuntimeException(sprintf('PDOException was thrown when trying to write the session data: %s', $e->getMessage()), 0, $e);
        }

        return true;
    }

    private function createNewSession($id, $data = '')
    {
        // get table/column
        $dbTable     = $this->dbOptions['db_table'];
        $dbDataCol   = $this->dbOptions['db_data_col'];
        $dbIdCol     = $this->dbOptions['db_id_col'];
        $dbTimeCol   = $this->dbOptions['db_time_col'];
        $dbUserIdCol = $this->dbOptions['db_user_id_col'];

        $userId = $this->context->isGranted('IS_AUTHENTICATED_REMEMBERED') ?
            $this->context->getToken()->getUser()->getId() :
            null
        ;

        $sql = "INSERT INTO $dbTable ($dbIdCol, $dbDataCol, $dbTimeCol, $dbUserIdCol) VALUES (:id, :data, :time, :user_id)";

        //session data can contain non binary safe characters so we need to encode it
        $encoded = base64_encode($data);
        $stmt = $this->pdo->prepare($sql);
        $stmt->bindParam(':id', $id, \PDO::PARAM_STR);
        $stmt->bindParam(':data', $encoded, \PDO::PARAM_STR);
        $stmt->bindValue(':time', time(), \PDO::PARAM_INT);
        $stmt->bindParam(':user_id', $userId, \PDO::PARAM_STR);
        $stmt->execute();

        return true;
    }
} 
```

并配置会话以使用它：

```
# config.yml
framework:
    session:
        # ...
        handler_id: session.storage.custom

parameters:
    pdo.db_options:
        db_table:       session
        db_id_col:      session_id
        db_data_col:    session_value
        db_time_col:    session_time
        db_user_id_col: session_user_id

services:
    pdo:
        class: PDO
        arguments:
            dsn:      "mysql:host=%database_host%;dbname=%database_name%"
            user:     "%database_user%"
            password: "%database_password%"

    session.storage.custom:
        class: Acme\DemoBundle\HttpFoundation\Session\Storage\Handler\UserIdPdoSessionHandler
        arguments: [ @pdo, "%pdo.db_options%", @security.context ] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T12:53:22.750

我不确定修改会话是一个好主意，您可以将会话 ID 存储在用户实体中，并在需要时删除它们。例如，通过这种方式，您可以确保只有用户一次只能使用一个会话登录。

完成它的最简单方法是使用登录侦听器。

将`sessionId`字段添加到用户实体（或文档或您使用的任何持久性）：

```
// Acme/UserBundle/Entity/User.php
namespace Acme\UserBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * ORM\Entity
 * @ORM\Table(name="fos_user")
 */
class User {
  // ...

  /**
   * @ORM\Column(name="session_id", type="string")
   */
  private $sessionId;

  public function getSessionId() {
    return $this->sessionId;
  }

  public function setSessionId($sessionId = null) {
    $this->sessionId = $sessionId;
    return $this;
  }
} 
```

并添加一个监听器：

```
namespace Dbla\UserBundle\Listener;

use Symfony\Component\HttpFoundation\Session;
use Symfony\Component\Security\Http\Event\InteractiveLoginEvent;

class LoginListener
{
  protected $doctrine;

  protected $session;

  public function __construct(Session $session, Registry $doctrine)
  {
    $this->doctrine = $doctrine;
    $this->session = $session;
  }

  public function onLogin(InteractiveLoginEvent $event)
  {
    $user = $event->getAuthenticationToken()->getUser();

    if ($user) {
      $user->setSessionId($this->session->getId());
      $em = $this->doctrine->getEntityManager();
      $em->persist($user);
      $em->flush();
    }
  }
} 
```

并将其添加为服务：

```
services:
  acme_user.listsner.login:
    class: Acme\UserBundle\Listener\LoginListener
    arguments: [ @session, @doctrine ]
    tags:
      - { name: kernel.event_listener, event: security.interactive_login, method: onLogin } 
```

然后您可以简单地为用户删除会话：

```
$users = []; // ... get user list
$sessionIds = array_map(function($user) {
  return $user->getId();
});
if (count(sessionIds) > 0) {
  $sql = 'DELETE FROM session WHERE session_id IN (' . implode($sessionIds, ',') . ')';
  $entityManager->getConnection()->exec($sql);
}
foreach ($users as $user) {
  $user->setSessionId(null);
  $entityManager->persist($user);
}
$entityManager->flush(); 
```

# java - 如何使用java计算Vector中的不同元素？

> ID：15400067
> 
> 赞同：0
> 
> 时间：2013-03-14T02:21:47.163
> 
> 标签：java, collections

我手头有很多话。我需要做的是保存它们并计算每个不同的单词。原始数据可能包含一些重复的单词。首先，我想使用 Set，然后我可以保证我只得到不同的 wrods。但是我怎么能数他们的时间呢？有没有人有任何“聪明”的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T02:25:05.867

您可以`MultiSet`从 Guava 库中使用。

[http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Multiset.html](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Multiset.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T02:40:51.167

您可以使用 Map 来解决此问题。

```
String sample = " I have a problem here. I have a lot of words at hand. What I need to do is to save them and count every different word. The original data may contains duplicate words.Firstly, I want to use Set, then I can guarantee that I only get the different wrods. But how can I count their times? Is there someone having any clever idea?";
    String[] array = sample.split("[\\s\\.,\\?]");
    Map<String,Integer> statistic = new HashMap<String,Integer>();
    for (String elem:array){
        String trimElem = elem.trim();
        Integer count = 0;
        if(!"".equals(trimElem)){
            if(statistic.containsKey(trimElem)){
                count = statistic.get(trimElem);
            }
            count++;
            statistic.put(trimElem,count);
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T02:57:12.430

也许你可以使用散列，在java中，它是HashMap（或HashSet？）你可以散列每个单词，如果该单词已被散列，则将与之相关的一些值加一，这就是想法。

# arrays - Google Script - 如何通过在工作表 2 中搜索这些值并从另一个工作表 2 列返回相关数据来替换工作表 1 中的单元格值

> ID：15400069
> 
> 赞同：1
> 
> 时间：2013-03-14T02:22:02.393
> 
> 标签：arrays, google-apps-script, google-spreadsheet-api

谷歌电子表格/脚本问题：

免责声明：我是初学者。任何解释都对我有很大帮助。

> 长话短说：
> 
> 1.  工作表 1，第 N 列包含逗号分隔的值。
> 2.  工作表 2，A 列包含所有可能的值，这些值可以组合起来构成工作表 1，N 列的内容。
> 3.  工作表 2，C 列包含“替代”值。
> 
> 我需要一个脚本，可以将工作表 1 的 N 列中的所有值替换为工作表 2 的 C 列中的“替代”值。我需要最终结果是单个逗号分隔值中的“替代”值。
> 
> 我已经编写了将 N 列值分隔为新列中的单个值的脚本。但是，我一直无法进一步前进。我当前的拆分脚本出现在底部。

完整解释：

“工作表 1”包含多个列，包括包含逗号分隔值的列“N”。Sheet 1 中的行数将随着用户输入数据而增加。目前，只有三行数据。“N”列包含：

N1 的值为“Dog, Cat, Rabbit”
N2 的值为“Dog, Fish”
N3 的值为“Frog, Horse, Fish”

我当前的 Google 脚本从所有可用行中收集数据，然后将“N”列中的逗号分隔值分隔到新列中，如下所示：

X1 的值为“Dog”，Y1 的值为“Cat”，Z1 的值为“Rabbit”
X2 的值为“Dog”，Y2 的值为“Fish”
X3 的值为“Frog” "，Y3 的值为“Horse”，Z3 的值为“Fish”

“工作表 2”在 A 列中包含所有可能出现在上面的值——狗、猫、兔子、鱼、马等。所以，

A1 的值为“Dog”
A2 的值为“Cat”
A3 的值为“Rabbit”
A4 的值为“Fish” -- 等等（总共有 100 多个可能的值）。

“工作表 2”在 C 列中包含“替代值”（即相应的 Google 日历资源地址）：

C1 的值为“domain.com_928313sdf98@resource.calendar.google.com”
C2 的值为“domain.com_190382d0931@resource.calendar.google.com”
C3 的值为“domain.com_295801a0181@resource.calendar. google.com"
C4 的值为 "domain.com_5s3910s1481@resource.calendar.google.com" --- 等等。

我正在寻找一个脚本，对于工作表 1 中的数据，它将搜索工作表 2 中的分隔值，然后将工作表 1 中的这些值替换为来自工作表 2 的相关“替代值”（即 Google 日历资源地址）， C 列。然后我需要将结果连接回逗号分隔值。

> 所以，我想从工作表 1 开始，其中 N1 的值为“Dog, Cat, Rabbit”，我想返回“domain.com_928313sdf98@resource.calendar.google.com, domain.com_190382d0931@resource.calendar .google.com, domain.com_295801a0181@resource.calendar.google.com”作为我的最终结果。
> 
> 该脚本将在所有行中执行此操作。

我的拆分脚本（我什至不确定这是否是处理此问题的最佳方式）：

```
function mySplit() {
  var sh = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet();
  var startcolumn = 2;
  var startrow = 2;
  var numcolumns = 500;
  var dataRange = sh.getRange(startcolumn, 1, numcolumns, 25);
  var data = dataRange.getValues();
  for (var i = 0; i < data.length; ++i) {
  var cell = sh.getRange(startcolumn + i, 15).getValues()[0];
  var sCell = cell[0].split(",");
  sh.getRange(startrow +i,26,1,sCell.length).setValues([sCell]);  
  }} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T07:53:25.367

正如我在您的另一篇文章中已经提到的，这对数组来说非常简单，这是一个使用新数据的工作示例：请参见[此处的工作表](https://docs.google.com/spreadsheet/ccc?key=0AnqSFd3iikE3dG9zMzd6ZzEzY0IzX0FZQ3VUdDNuZlE&usp=sharing)（只读，复制以进行测试）

```
function replaceTagsWithRessource(){ // in this example sheet, the function will replace aa with 11, bb with 22 etc...

var sh1 = SpreadsheetApp.getActiveSpreadsheet().getSheetByName('sheet1');
var sh2 = SpreadsheetApp.getActiveSpreadsheet().getSheetByName('sheet2');
var sourceCol = sh1.getRange('N2:N').getValues();
Logger.log(sourceCol)
var targetRef = sh2.getDataRange().getValues();
Logger.log(targetRef)
var newColN = []
for(var s in sourceCol){
var caltoUse = sourceCol[s][0].split(',');
   var calID = []  
  for(var n in caltoUse){
    for(var r in targetRef){
     if(caltoUse[n]==targetRef[r][0]){ calID.push(targetRef[r][2])} // get the cal ref in col 3
     }
     }
    newColN.push([calID.toString()]);
    Logger.log(newColN)
}
sh1.getRange('N2:N').setValues(newColN);// replace original values with new values (comma separated calendar IDs)
} 
```

# ios - 设置referer标头的安全风险？

> ID：15400076
> 
> 赞同：3
> 
> 时间：2013-03-14T02:22:38.170
> 
> 标签：ios, django, security, http-referer

我目前正在编写一个在服务器端与 Django 通信的 iOS 应用程序。尝试进行 POST 时，我希望通信符合 Django 提供的 CSRF 中间件。我正确传递了令牌，但为了使其功能齐全，我还被迫在我的请求中设置标头值：

```
[request setValue:@"https://mysite.com/" forHTTPHeaderField:@"Referer"]; 
```

我的问题是，对 Referer 值进行硬编码会带来任何安全问题吗？有人可以帮我理解为什么 Django 会对此进行严格检查吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T03:34:59.657

检查引用者是[CSRF 预防的方法](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_%28CSRF%29_Prevention_Cheat_Sheet#Checking_The_Referer_Header)。如果攻击者强制受害者的浏览器使用 JavaScript/HTML/Flash 执行 POST 或 GET 请求，那么引用值将是空白或攻击者的 CSRF 漏洞源自的 URL。在任何情况下，攻击者都无法将引用者设置为`https://mysite.com/`CSRF 漏洞利用，因此此检查有助于缓解攻击。

在 iOS 应用程序中设置 HTTP 引用对安全性影响绝对为零。

# python-2.7 - 使用 python mechanize 填充选择控件

> ID：15400079
> 
> 赞同：2
> 
> 时间：2013-03-14T02:22:43.293
> 
> 标签：python-2.7, mechanize

我正在尝试使用 python mechanize 填写网站的注册。一切顺利，但我不知道如何进行选择控件。例如，如果我选择我的生日月份，这是我需要填写的表格：

```
 <SelectControl(mm=[*, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12])> 
```

我已经查看了 stackoverflow 上的所有答案，它们似乎都是这样的一些变化：

```
 br.find_control(name="mm").value = ["0"] 
```

或者

```
 form["mm"] = ["1"] 
```

这里的问题是它给了我一个错误ItemNotFoundError：名称为'0'的项目不足

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-30T00:58:00.187

```
item = br.find_control(name="mm" type="select").get("12")
item.selected = True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T22:10:37.020

Nvm 我只需要做 br.form['mm'] = ["1"] <--- 我选择了这个，但可以选择他们允许的任何值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-04T01:31:25.550

我已经使用了以下所有内容：

```
br['mm'] = ['9']
br['mm'] = ['9',]
br.form['mm'] = ['9']
br.form['mm'] = ['9',] 
```

我似乎记得一个逗号是强制性的情况。

# c# - 如何将 form1 变量传递给用户控件类？

> ID：15400085
> 
> 赞同：0
> 
> 时间：2013-03-14T02:23:19.653
> 
> 标签：c#

我有这个用户控件代码，用户控件是 GraphChart：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Drawing;
using System.Data;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Web;
using System.Windows.Forms.DataVisualization.Charting;

namespace GatherLinks
{

    public partial class GraphChart : UserControl
    {
        Form1 form1;

        public GraphChart(Form1 f1)
        {
            InitializeComponent();

            form1 = f1;

        }

        private void GraphChart_Load(object sender, EventArgs e)
        {
            chart1.Series.Clear();
            var series1 = new System.Windows.Forms.DataVisualization.Charting.Series
            {
                Name = "Series1",
                Color = System.Drawing.Color.Green,
                IsVisibleInLegend = false,
                IsXValueIndexed = true,
                ChartType = SeriesChartType.Line
            };

            this.chart1.Series.Add(series1);

            //for (int i = 0; i < 100; i++)
            //{
                series1.Points.AddXY(form1.axisX, form1.axisY);
            //}
            chart1.Invalidate();
        } 
```

添加 form1 和 f1 变量后，我得到错误：

错误 2 GatherLinks.GraphChart' 不包含采用 0 个参数的构造函数

当我双击错误时，它移动到 Form1 设计器 cs 到该行：

```
this.graphChart1 = new GatherLinks.GraphChart(); 
```

我试图将 Form1 放在 () 之间，但它没有工作，出现错误。我该如何解决？

编辑：

我刚刚在用户控制代码中做了：

```
public partial class GraphChart : UserControl
    {
        Form1 form1;

        public GraphChart() { }
        public GraphChart(Form1 f1)
        {
            InitializeComponent();

            form1 = f1;

        } 
```

但现在在 Form1 构造函数中，我有以下几行：

```
this.graphChart1.chart1.MouseMove += chart1_MouseMove;
this.graphChart1.chart1.MouseLeave += chart1_MouseLeave; 
```

他们以前工作得很好，但是一旦我添加了以下行： public GraphChart() { } 我在运行 chart1 为 null 的应用程序时遇到错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T02:40:15.293

您的第一个问题是您`UserControl`不知道`Form1`类型是什么。您需要在文件顶部放置一条 using 语句以包含您的 Forms 命名空间，在我的情况下，我测试了它，`WindowsFormApplication1`尽管它将是您使用的任何命名空间。在您更新的示例中，您永远不会调用您的`InitializeComponent`方法，因此您永远不会创建图表。

如果您想使用无参数构造函数，可以尝试这样的事情：（*注意将 InitializeComponent 方法添加到默认构造函数并添加两个附加方法`SetupGraph`，`SetForm`我还将代码从事件处理程序`GraphChart_Load`移到`SetupGraph`方法中。这行得通在构造函数中传递 Form1 和使用无参数构造函数，只要你`SetForm`在调用之前`SetupGraph`*使用）

**用户控制**

```
public partial class GraphChart : UserControl
{
    private Chart chart1;
    Form1 form1;
    public GraphChart()
    {
        InitializeComponent();
    }
    public GraphChart(Form1 f1)
    {
        InitializeComponent();
        form1 = f1;
        this.Load+=new EventHandler(GraphChart_Load);
    }
    public void SetForm( Form1 f1)
    {
        form1 = f1;
    }
    public void SetupGraph()
    {
        chart1.Series.Clear();
        var series1 = new System.Windows.Forms.DataVisualization.Charting.Series
        {
            Name = "Series1",
            Color = System.Drawing.Color.Green,
            IsVisibleInLegend = false,
            IsXValueIndexed = true,
            ChartType = SeriesChartType.Line
        };

        this.chart1.Series.Add(series1);

        //for (int i = 0; i < 100; i++)
        //{
        series1.Points.AddXY(form1.axisX, form1.axisY);
        //}
        chart1.Invalidate();
    }
    private void GraphChart_Load(object sender, EventArgs e)
    {
        SetupGraph();
    }

    private void InitializeComponent()
    {
        System.Windows.Forms.DataVisualization.Charting.ChartArea chartArea1 = new System.Windows.Forms.DataVisualization.Charting.ChartArea();
        System.Windows.Forms.DataVisualization.Charting.Legend legend1 = new System.Windows.Forms.DataVisualization.Charting.Legend();
        System.Windows.Forms.DataVisualization.Charting.Series series1 = new System.Windows.Forms.DataVisualization.Charting.Series();
        this.chart1 = new System.Windows.Forms.DataVisualization.Charting.Chart();
        ((System.ComponentModel.ISupportInitialize)(this.chart1)).BeginInit();
        this.SuspendLayout();
        // 
        // chart1
        // 
        chartArea1.Name = "ChartArea1";
        this.chart1.ChartAreas.Add(chartArea1);
        legend1.Name = "Legend1";
        this.chart1.Legends.Add(legend1);
        this.chart1.Location = new System.Drawing.Point(0, 0);
        this.chart1.Name = "chart1";
        series1.ChartArea = "ChartArea1";
        series1.Legend = "Legend1";
        series1.Name = "Series1";
        this.chart1.Series.Add(series1);
        this.chart1.Size = new System.Drawing.Size(519, 473);
        this.chart1.TabIndex = 0;
        this.chart1.Text = "chart1";
        // 
        // GraphChart
        // 
        this.Controls.Add(this.chart1);
        this.Name = "GraphChart";
        ((System.ComponentModel.ISupportInitialize)(this.chart1)).EndInit();
        this.ResumeLayout(false);

    }
} 
```

**表格1**

```
public partial class Form1 : Form
{
    public int axisX = 100;
    public int axisY = 100;
    GatherLinks.GraphChart graphChart1;

    public Form1()
    {
        InitializeComponent();

    }

    private void button1_Click(object sender, EventArgs e)
    {
        graphChart1 = new GatherLinks.GraphChart();
        this.Controls.Add(graphChart1);
        graphChart1.SetForm(this);
        graphChart1.SetupGraph();
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T02:30:17.630

您需要为该类提供一个接受 0 个参数的构造函数，因此尝试将以下行添加到类 GraphChart：

```
public GraphChart(){} 
```

# python - Django Heroku 推送失败

> ID：15400101
> 
> 赞同：2
> 
> 时间：2013-03-14T02:26:43.717
> 
> 标签：python, django, heroku

我在尝试将我的 Django 项目推送到 Heroku 时遇到错误，我想看看是否有人有任何见解。

```
 !     Heroku push rejected, no Cedar-supported app detected 
```

我猜这是因为我在 git repo 中的文件夹结构，但我不确定。我的项目是这样设置的：

```
/subfolder/djangoproject/

/subfolder/requirements.txt 
```

我的 Proc 文件内容如下所示：

```
web: python manage.py runserver 0.0.0.0:$PORT --noreload --settings=djangoproject.settings.heroku 
```

我有我的项目设置拆分，它们在我的本地工作正常。（换句话说，我有一个包含**init** .py 的设置目录。）

我试过这个：

```
/Procfile 
```

和这个：

```
/subfolder/Procfile 
```

但都没有奏效。

这个文件夹结构会是罪魁祸首吗？我的印象是，requirements.txt 是 Heroku 找到项目文件夹所在位置的方式。

谢谢

* * *

我想为我遇到的第一个问题添加我的解决方案，然后发布我遇到的新问题。

我首先做的解决方案是将 Procfile 和 requirements.txt 文件移动到项目的根级别。我做的第二件事是在其中编辑 Procfile，以便 manage.py 脚本的路径位于正确的位置

```
web: python subfolder/djangoproject/manage.py runserver 0.0.0.0:$PORT --noreload --settings=djangoproject.settings.heroku 
```

我现在在尝试运行同步数据库时遇到了一个新错误。它似乎经历了这个过程，但没有什么需要。换句话说，如果我运行一次syncdb，然后再次运行它，它想重新设置一切。关于我可能配置错误以使数据库不保存数据的任何想法？我应该使用仪表板中的数据库设置还是将此行保留在 Django 配置中：

```
import dj_database_url
DATABASES['default'] =  dj_database_url.config() 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T06:27:11.860

您需要 repo 根目录中的 requirements.txt 或 setup.py。

请参阅[https://github.com/heroku/heroku-buildpack-python/blob/master/bin/detect](https://github.com/heroku/heroku-buildpack-python/blob/master/bin/detect)

# php - PHP Calendar 使用联合或多重查询

> ID：15400105
> 
> 赞同：0
> 
> 时间：2013-03-14T02:26:54.503
> 
> 标签：php, mysql, calendar

我有两个单独的日历：reservation_schedule 和 maintenance_schedule 日历。Reservation_schedule 从保留表中获取数据，maintenance_schedule 从维护表中获取数据。我的目标是将两个日历中获取的数据放入一个日历中。

这是我用于 reservation_schedule 的查询：

```
SELECT acode
FROM reservation 
WHERE month(etd) = '".$month."' 
AND dayofmonth(etd) = '".$dayArray["mday"]."' 
AND year(etd) = '".$year."' 
ORDER BY etd 
```

对于maintenance_schedule：

```
SELECT DISTINCT s.reg  AS 'reg', 
                    a.date AS 'date' 
    FROM   (SELECT Curdate() 
                   + INTERVAL (a.a + (10 * b.a) + (100 * c.a)) day AS Date 
            FROM   (SELECT 0 AS a 
                    UNION ALL SELECT 1 
                    UNION ALL SELECT 2 
                    UNION ALL SELECT 3 
                    UNION ALL SELECT 4 
                    UNION ALL SELECT 5 
                    UNION ALL SELECT 6 
                    UNION ALL SELECT 7 
                    UNION ALL SELECT 8 
                    UNION ALL SELECT 9) AS a 
                   CROSS JOIN (SELECT 0 AS a 
                               UNION ALL SELECT 1 
                               UNION ALL SELECT 2 
                               UNION ALL SELECT 3 
                               UNION ALL SELECT 4 
                               UNION ALL SELECT 5 
                               UNION ALL SELECT 6 
                               UNION ALL SELECT 7 
                               UNION ALL SELECT 8 
                               UNION ALL SELECT 9) AS b 
                   CROSS JOIN (SELECT 0 AS a 
                               UNION ALL SELECT 1 
                               UNION ALL SELECT 2 
                               UNION ALL SELECT 3 
                               UNION ALL SELECT 4 
                               UNION ALL SELECT 5 
                               UNION ALL SELECT 6 
                               UNION ALL SELECT 7 
                               UNION ALL SELECT 8 
                               UNION ALL SELECT 9) AS c) a 
           INNER JOIN maintenance_sched s 
                   ON a.date >= s.date_from 
                      AND a.date <= s.date_to 
    WHERE  Month(date) = '".$month."' 
           AND Dayofmonth(date) = '".$dayArray["mday"]."' 
           AND Year(date) = '".$year."' 
```

我可以通过使用显示来自它们的`UNION`数据，但我希望维护表中的数据以带删除线的字符串形式输出。我在这段代码中输出查询结果：

```
$chkEvent_res = mysql_query($chkEvent_sql) or die(mysql_error());

        if (mysql_num_rows($chkEvent_res) > 0) {
            $event_title = "<br/>";
            while ($ev = mysql_fetch_array($chkEvent_res)) {
                $event_title .= stripslashes($ev["reg"])."<br/>";
                //$event_title .= "<del>".stripslashes($ev["acode"])."</del><br/>";
            }
            mysql_free_result($chkEvent_res);
        } else {
            $event_title = "";
        } 
```

如果我将查询与 一起使用`UNION`，我无法将维护的输出字符串设置为带有删除线，因为它运行查询一次。如何实现从维护表中获取的数据以删除线输出？我应该去查询一个`UNION`吗？如果我这样做，我怎样才能分离来自维护表和保留表的数据？如果我去分离查询，我该如何运行它？应该是这样的`$chkEvent_res = mysql_query($chkEvent_sql1) and mysql_query($chkEvent_sql2) or die(mysql_error());`吗？请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T02:57:35.220

进行这两个查询的唯一方法`UNION`是，如果每个查询中的列数相同，并且每列具有相同的数据类型。不确定所涉及的数据类型——第一个查询返回“acode”，第二个查询返回“reg”和“date”。

假设您实际上`UNION`可以得到结果并获得所需的结果，您可以考虑在结果中添加一个额外的列，返回查询的源：

```
SELECT Field1, Field2, Field3, 'Table1' Source
FROM TABLE1
...
UNION
SELECT Field1, Field2, Field3, 'Table2' Source
FROM Table2
... 
```

您可以使用该 Source 列来相应地格式化您的结果。

以下是有关使用的一些附加信息`UNION`：

[http://dev.mysql.com/doc/refman/5.0/en/union.html](http://dev.mysql.com/doc/refman/5.0/en/union.html)

# python - 如何在python中生成第1000个素数？

> ID：15400108
> 
> 赞同：11
> 
> 时间：2013-03-14T02:27:26.173
> 
> 标签：python, primes

```
count = 0
i = 11

while count <= 1000 and i <= 10000:
    if i%2 != 0:
       if (i%3 == 0 or i%4 == 0 or i%5 == 0 or i%6 == 0 or i%7 == 0 or i%9 == 0):
           continue
       else:
           print i,'is prime.'
           count += 1
    i+=1 
```

我试图仅通过使用循环来生成第 1000 个素数。我正确地生成了素数，但我得到的最后一个素数不是第 1000 个素数。我如何修改我的代码来做到这一点。提前感谢您的帮助。

编辑：我现在明白如何解决这个问题。但是有人可以解释为什么下面的代码不起作用吗？这是我在这里发布第二个代码之前编写的代码。

```
count = 1
i = 3
while count != 1000:
    if i%2 != 0:
       for k in range(2,i):
          if i%k == 0:
            print(i)
            count += 1
            break
     i += 1 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T22:44:15.337

让我们来看看。

```
count = 1
i = 3
while count != 1000:
    if i%2 != 0:
       for k in range(2,i):
          if i%k == 0:        # 'i' is _not_ a prime!
            print(i)       # ??
            count += 1     # ??
            break
     i += 1          # should be one space to the left,
                     # for proper indentation 
```

如果`i%k==0`，则`i`不是*素*数。如果我们检测到它不是素数，我们应该（a）*不*打印出来，（b）*不*增加找到的素数的计数器，（c）我们确实应该跳出`for`循环——不需要测试更多的数字。

`i%2`另外，我们可以不用 testing ，而是`2`从 开始递增，`3`然后它们都将是奇数，通过构造。

所以，我们现在有

```
count = 1
i = 3
while count != 1000:
    for k in range(2,i):
        if i%k == 0:       
            break
    else:
        print(i)
        count += 1
    i += 2 
```

如果循环*没有*过早中断，则执行`else`after 。`for``for`

 *它可以工作，但是工作太辛苦，因此比必要的要慢得多。它通过它下面的所有数字来测试一个数字，但是仅仅测试它的平方根就足够了。为什么？因为如果一个数字`n == p*q`,`p`和`q`之间`1`,`n`那么至少有一个`p`或`q`将不大于 的平方根`n`：如果它们都大于 ，则它们的乘积将大于`n`。

所以[改进的代码是](http://ideone.com/jEmZIj)：

```
from math import sqrt

count = 1
i = 1
while count < 1000:
    i += 2
    for k in range(2, 1+int(sqrt(i+1))):
        if i%k == 0:       
            break
    else:
        # print(i) ,
        count += 1
        # if count%20==0: print ""
print i 
```

试着用`range(2,i)`（如前面的代码）运行它，看看它有多慢。对于 1000 个素数，需要 1.16 秒，对于 2000 – 4.89 秒（3000 – 12.15 秒）。但是*生成*3000 个素`sqrt`数只需要 0.21 秒，10,000 个素数需要 0.84 秒，20,000 个素数需要 2.44 秒（与.[的增长](http://en.wikipedia.org/wiki/Analysis_of_algorithms#Empirical_orders_of_growth)数量级）。`~ n^(2.1...2.2)``~ n^(1.5)`

上面使用的算法称为[试除法](http://en.wikipedia.org/wiki/Trial_division)。要使其成为*最佳*试验部门，还需要进一步改进，即仅通过*素数*进行测试。[可以在此处看到](https://stackoverflow.com/a/14648519/849891)一个示例，它的[运行速度提高了大约 3 倍](http://ideone.com/Qaycpe)，并且经验复杂度为 .`~ n^(1.3)`

* * *

然后[*是 Eratosthenes 的筛子*](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)，它[的速度相当快](http://ideone.com/16WrO3)（对于 20,000 个素数，比上面的“改进代码”快 12 倍，之后还要快得多：它的经验增长顺序是，对于产生素数，测量到*n* = 1,000,000 个素数):`~ n^(1.1)``n`

 *```
from math import log

count = 1 ; i = 1 ; D = {}
n = 100000                        # 20k:0.20s 
m = int(n*(log(n)+log(log(n))))   # 100k:1.15s 200k:2.36s-7.8M 
while count < n:                  #            400k:5.26s-8.7M 
        i += 2                    #            800k:11.21-7.8M 
        if i not in D:            #            1mln:13.20-7.8M (n^1.1)
            count += 1
            k = i*i
            if k > m:  break      # break, when all is already marked
            while k <= m:
                D[k] = 0 
                k += 2*i
while count < n:
        i += 2
        if i not in D: count += 1
if i >= m: print "invalid: top value estimate too small",i,m ; error
print i,m 
```

埃拉托色尼的真正无界、[增量、“滑动”筛网](https://stackoverflow.com/a/10733621/849891)速度快了大约 1.5 倍，在此测试的这个范围内。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-14T02:35:39.997

有几个问题是显而易见的。首先，因为你从 11 开始，你已经跳过了前 5 个素数，所以 count 应该从 5 开始。

更重要的是，您的主要检测算法无法正常工作。您必须跟踪所有小于 i 的素数，才能进行这种简单的“埃拉托斯坦筛”式素数检测。例如，您的算法会认为 11 * 13 = 143 是素数，但显然不是。

[这里](http://en.wikibooks.org/wiki/Efficient_Prime_Number_Generating_Algorithms)的PGsimple1是您在此处尝试进行的主要检测的正确实现，但那里的其他算法要快得多。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-14T02:42:58.890

你确定你正确地检查素数吗？一个典型的解决方案是有一个你知道有效的单独的“isPrime”函数。

```
def isPrime(num):
    i = 0
    for factor in xrange(2, num):
        if num%factor == 0:
            return False
    return True 
```

（有一些方法可以使上述功能更有效，例如只检查赔率，只检查平方根以下的数字等）

然后，要找到第 n 个素数，计算所有素数，直到找到它：

```
def nthPrime(n):
    found = 0
    guess = 1
    while found < n:
        guess = guess + 1
        if isPrime(guess):
            found = found + 1
    return guess 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-14T02:33:50.920

你的逻辑不太正确。尽管 ：

```
if i%2 != 0:
    if (i%3 == 0 or i%4 == 0 or i%5 == 0 or i%6 == 0 or i%7 == 0 or i%9 == 0): 
```

这不能判断一个数是否是素数。

我认为您应该检查 sqrt(i) 以下的所有数字是否除以 i 。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-14T02:35:42.267

这是我在某处遇到的 is_prime 函数，可能是在 SO 上。

```
def is_prime(n):
  return all((n%j > 0) for j in xrange(2, n))

primes = []

n = 1
while len(primes) <= 1000: 
    if is_prime(n):
        primes.append(n)
    n += 1 
```

或者，如果您希望所有内容都在循环中，只需使用 is_prime 函数的返回即可。

```
primes = []    
n = 1
while len(primes) <= 1000: 
    if all((n%j > 0) for j in xrange(2, n)):
        primes.append(n)
    n += 1 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-14T02:52:31.960

这可能更快：尝试将 num 从 2 划分为 sqrt(num)+1 而不是 range(2,num)。

```
from math import sqrt

i = 2 
count = 1

while True:
    i += 1
    prime = True
    div = 2
    limit = sqrt(i) + 1
    while div < limit:
        if not (i % div):
            prime = False
            break
        else:
            div += 1
    if prime:
        count += 1
    if count == 1000:
        print "The 1000th prime number is %s" %i
        break 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-14T04:08:39.177

试试这个：

```
def isprime(num):
    count = num//2 + 1
    while count > 1:
        if num %count == 0:
            return False
        count -= 1
    else:
        return True

num = 0
count = 0
while count < 1000:
    num += 1
    if isprime(num):
        count += 1
    if count == 1000:
        prime = num 
```

您的代码存在问题：

1.  无需检查 i <= 10000。
2.  你正在这样做

    ```
    if i%2 != 0:
        if (i%3 == 0 or i%4 == 0 or i%5 == 0 or i%6 == 0 or i%7 == 0 or i%9 == 0): 
    ```

    在这里，您没有检查该数字是否可被大于 7 的素数整除。因此，您的结果：最有可能被 11 整除

3.  因为 2\. 你的算法说 17 * 13 * 11 是一个素数（它不是）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-12-28T03:50:21.503

这个怎么样：

```
#!/usr/bin/python

from math import sqrt

def is_prime(n):
    if n == 2:
        return True
    if (n < 2) or (n % 2 == 0):
        return False
    return all(n % i for i in xrange(3, int(sqrt(n)) + 1, 2))

def which_prime(N):
    n = 2
    p = 1
    while True:
        x = is_prime(n)
        if x:
            if p == N:
                return n
            else:
                p += 1
        n += 1
print which_prime(1000) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-06-12T07:14:13.683

```
n=2                         ## the first prime no.
prime=1                     ## we already know 2 is the first prime no.
while prime!=1000:          ## to get 1000th prime no.
    n+=1                    ## increase number by 1
    pon=1                   ## sets prime_or_not(pon) counter to 1
    for i in range(2,n):    ## i varies from 2 to n-1
        if (n%i)==0:        ## if n is divisible by i, n is not prime
            pon+=1          ## increases prime_or_not counter if  n is not prime
    if pon==1:              ## checks if n is prime or not at the end of for loop
        prime+=1            ## if n is prime, increase prime counter by 1
print n                     ## prints the thousandth prime no. 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-08-05T17:16:25.847

这是另一个提交：

```
ans = 0;
primeCounter = 0;
while primeCounter < 1000:
    ans += 1;    
    if ans % 2 != 0: 
        # we have an odd number
        # start testing for prime
        divisor = 2;
        isPrime = True;
        while divisor < ans:
            if ans % divisor == 0: 
                isPrime = False;
                break;
            divisor += 1;
        if isPrime:             
            print str(ans) + ' is the ' + str(primeCounter) + ' prime';
            primeCounter += 1;
print 'the 1000th prime is ' + str(ans); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-09-22T11:03:48.030

这是一种仅使用 if & while 循环的方法。这将只打印出第 1000 个素数。它跳过了 2。我将其作为麻省理工学院 OCW 6.00 课程的问题集 1 来完成，因此仅包括第二堂课之前教授的命令。

```
prime_counter = 0  
number = 3  

while(prime_counter < 999):
    divisor = 2
    divcounter = 0
    while(divisor < number):
        if(number%divisor == 0):
            divcounter = 1  
        divisor += 1
    if(divcounter == 0):
        prime_counter+=1
    if(prime_counter == 999):
        print '1000th prime number: ', number
    number+=2 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-12-01T03:55:43.577

我刚写了这个。它会询问您想要查看多少个素数用户，在这种情况下它将是 1000。随意使用它:)。

```
# p is the sequence number of prime series
# n is the sequence of natural numbers to be tested if prime or not
# i is the sequence of natural numbers which will be used to devide n for testing
# L is the sequence limit of prime series user wants to see
p=2;n=3
L=int(input('Enter the how many prime numbers you want to see: '))
print ('# 1  prime is 2')
while(p<=L):
    i=2
    while i<n:
        if n%i==0:break
        i+=1
    else:print('#',p,' prime is',n); p+=1
    n+=1 #Line X

#when it breaks it doesn't execute the else and goes to the line 'X' 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-12-27T03:36:10.747

这将是执行次数较少的优化代码，它可以在一秒钟内计算和显示 10000 个素数。它将显示所有素数，如果只需要第 n 个素数，只需设置 while 条件并在退出循环后打印素数。如果你想检查一个数字是质数还是不只是将数字分配给n，并删除while循环..它使用质数属性*如果一个数字不能被小于其**平方根**的数字整除，那么它是素数。* 而不是检查到最后（意味着 1000 次迭代以确定 1000 是否是素数）我们可以在 35 次迭代内结束循环，* **break**如果它在开始时被任何数字除以循环（如果它是偶数循环将在第一次迭代时中断，如果它可以被 3 整除然后是 2 次迭代）所以我们只为素数迭代直到结束

记住一件事你仍然可以通过使用属性优化迭代，也很难找到一个特定的数字是不是素数，所以这将是最好的逻辑或代码

```
import math
number=1
count = 0

while(count<10000):
    isprime=1
    number+=1
    for j in range(2,int(math.sqrt(number))+1):
        if(number%j==0):
            isprime=0   
            break
    if(isprime==1):
        print(number,end=" ")
        count+=1 
```**

# c# - 创建格式化为日期的字符串副本

> ID：15400109
> 
> 赞同：0
> 
> 时间：2013-03-14T02:27:44.927
> 
> 标签：c#, .net, datetime

我有一个格式为 YYYYMMDD 的字符串 - 如何以 YYYY-MM-DD 格式制作副本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T02:31:26.237

```
// this is your original string
string _str = "20130101";

// you need to convert it to valid DateTime datatype
// so you can freely format the string to what you want
DateTime _date = DateTime.ParseExact(_str, "yyyyMMdd", CultureInfo.InvariantCulture);

// converting to your desired format, which is now a string
string _dateStr = _date.ToString("yyyy-MM-dd"); 
```

*   [日期时间.ParseExact()](http://msdn.microsoft.com/en-us/library/system.datetime.parseexact.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T02:32:19.933

您必须解析`DateTime`，然后重新格式化它：

```
var input = ...
var inFormat = "yyyyMMdd";
var outFormat = "yyyy-MM-dd";
var date = DateTime.ParseExact(inFormat, input, CultureInfo.InvariantCulture);
var output = date.ToString(outFormat); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T02:56:55.070

安全的方法是将其转换为 DateTime Object ，例如在 .Net 中使用以下函数：

```
 DateTime.TryParseExact() 
```

然后使用 DateTime 对象，您可以再次对其进行格式化。像下面的例子：

```
 dateTimeObject.ToString(YourFormatInString); 
```

查看 MSDN 了解更多详细信息：http: [//msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

# php - php：如何从多维数组中获取主键

> ID：15400114
> 
> 赞同：2
> 
> 时间：2013-03-14T02:28:21.357
> 
> 标签：php

我刚刚意识到我不知道如何从多维数组中获取主键。

这是我的动态生成数组：

```
$tempArray = Array ( 
[2013-03-13 15:56:57] => Array ( [PROD] => product2 [RFID] => 0030313 ) 
[2013-03-08 14:11:51] => Array ( [PROD] => product1 [RFID] => 0020313 ) 
) 
```

现在如何获得主键？或价值`[2013-03-13 15:56:57]`？
例如：`$FirstDate = [2013-03-13 15:56:57]`，那么如何获取和分配呢？
测试但错误：-

```
$tempArray[0] : Undefined offset: 0...<br/>
$tempArray[0][0] : Undefined offset: 0...<br/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T02:49:58.690

3种方式？

## 前锋

使用 foreach 然后在第一次迭代后中断循环：

```
foreach($tempArray as $key => $val){
    $primaryKey = $key;break;
}
echo $primaryKey; 
```

## 数组键（）

通过使用[array_keys()](http://php.net/manual/en/function.array-keys.php)：

```
$keys = array_keys($tempArray);
$primaryKey = $keys[0];
echo $primaryKey; 
```

## 钥匙（）

通过使用[key()](http://php.net/manual/en/function.key.php)：

```
$primaryKey = key($tempArray);
echo $primaryKey; 
```

# design-patterns - 命名 MVVM 类

> ID：15400115
> 
> 赞同：0
> 
> 时间：2013-03-14T02:28:23.120
> 
> 标签：design-patterns, mvvm, architecture

您如何在项目中使用[MVVM](http://en.wikipedia.org/wiki/Model-View-ViewModel)模式命名类（模型、视图、视图模型）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T03:07:42.743

对于视图，我将“视图”附加到模型，如“PersonView”。

同样对于视图模型，我附加“Vm”以获得“PersonVm”。

当然，模型名称与域有关，与 MVVM 无关。

干杯，
贝里尔

# javascript - 仅将子元素附加到其父元素

> ID：15400118
> 
> 赞同：2
> 
> 时间：2013-03-14T02:28:45.473
> 
> 标签：javascript, jquery, html

我正在尝试将一堆菜单下拉菜单转换为多个元素。当页面上只有一个下拉菜单时，我已经能够做到这一点，但是一旦我添加了其他下拉菜单，我的脚本似乎会多次运行每个菜单。我是 Javascript/Jquery 的新手，但我想知道是否有办法让它只输入到其父元素？

这是我当前适用于单个下拉列表的脚本：

```
$('.mylinks li').each(function() {
  var inputClass = $('.mylinks .link').html().toLowerCase();
  $('body').prepend('<select class="'+inputClass+'" onchange="window.location.href=this.options[this.selectedIndex].value"></select>');
  $('a').each(function() {

    var linkName = $(this).html();
    var linkVal = $(this).attr('href');
    $('select').append('<option value="'+linkVal+'">'+linkName+'</option>');

  });
}); 
```

### HTML

```
<div class="mylinks">
  <ul>
    <li>
        <a href="#">Drop 1</a>
        <a href="http://geartrade.com">Link 1</a>
        <a href="http://geartrade.com">Link 2</a>
        <a href="http://geartrade.com">Link 3</a>
    </li>
    <li>
        <a href="#">Drop 2</a>
        <a href="http://geartrade.com">Link 1</a>
        <a href="http://geartrade.com">Link 2</a>
        <a href="http://geartrade.com">Link 3</a>
    </li>
  </ul> 
 </div> 
```

我在这里也有一个这个错误的例子：http: [//jsfiddle.net/UdTcF/](http://jsfiddle.net/UdTcF/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T02:34:39.383

你可以试试这段代码：

```
$(document).ready(function () {

    $('.mylinks li').each(function () {
        var inputClass = $('.mylinks a').html().toLowerCase();
        var select = $('<select class="' + inputClass + '" onchange="window.location.href=this.options[this.selectedIndex].value"></select>');
        $('body').prepend(select);
        $(this).find('a').each(function () {
            var linkName = $(this).html();
            var linkVal = $(this).attr('href');
            select.append('<option value="' + linkVal + '">' + linkName + '</option>');
        });
    });

}); 
```

使用变量`select`来保存`<select>`要添加的内容，后期可以`<option>`使用`select.append()`.

并使用`$(this).find('a')`而不是在某些但不是全部`$('a')`中查找。`<a>``<li>``<a>`

这是[jsfiddle](http://jsfiddle.net/UdTcF/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T02:53:33.770

这里：

```
$('a').each, 
```

您正在选择所有 a 元素。我认为您只想选择当前 li 中的那些。所以，只需替换添加：

```
$('a',this).each, 
```

它将仅选择作为 this 子元素的元素，例如 li 元素。

# r - 具有 R 的数据框中个人的累积和

> ID：15400121
> 
> 赞同：1
> 
> 时间：2013-03-14T02:29:12.573
> 
> 标签：r

我有一个这样的数据框：

```
data=data.frame(ID=c("0001","0002","0003","0004","0004","0004","0001","0001","0002","0003"),Saldo=c(10,10,10,15,20,50,100,80,10,10),place=c("grocery","market","market","cars","market","market","cars","grocery","cars","cars")) 
```

我试图计算 ID 变量中每个人的 aldo 总和，应用 cumsum 或 apply 但我没有得到我想要的结果。我想要这样的人：

```
 ID      Saldo.Total
1 0001         190
2 0002          20
3 0003          20
4 0004          85 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T02:31:51.413

您可以使用`aggregate`：

```
> aggregate(Saldo ~ ID, data, function(x) max(cumsum(x))) ## same as sum
    ID Saldo
1 0001   190
2 0002    20
3 0003    20
4 0004    85 
```

如果您真的对 ID 的*累积*总和感兴趣，请尝试以下操作：

```
within(data, {
  Saldo.Total <- ave(Saldo, ID, FUN = cumsum)
})
#     ID Saldo   place Saldo.Total
# 1  0001    10 grocery          10
# 2  0002    10  market          10
# 3  0003    10  market          10
# 4  0004    15    cars          15
# 5  0004    20  market          35
# 6  0004    50  market          85
# 7  0001   100    cars         110
# 8  0001    80 grocery         190
# 9  0002    10    cars          20
# 10 0003    10    cars          20 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T02:31:51.030

我想你可能会感到困惑，因为你想要的并不是一个*累积*的总和，它只是一个总和：

```
library(plyr)
ddply(
  data,
  .(ID),
  summarize,
  Saldo.Total=sum(Saldo)
  ) 
```

输出：

```
 ID Saldo.Total
1 0001         190
2 0002          20
3 0003          20
4 0004          85 
```

当您沿着向量移动时，累积总和是“运行总数”，例如：

```
> x = c(1, 2, 3, 4, 5)
> cumsum(x)
[1]  1  3  6 10 15 
```

# knockout.js - 淘汰赛 - Viewmodel 转换

> ID：15400122
> 
> 赞同：0
> 
> 时间：2013-03-14T02:29:35.077
> 
> 标签：knockout.js

从客户端我必须对 REST 服务进行多次 ajax 调用，这将为我提供三种不同的 JSON 域模型。现在在客户端，我必须在将它们绑定到控件之前将它们转换为视图模型。这意味着将它们转换为完全不同的结构，仅包含演示数据。任何想法或建议都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:40:08.407

[http://jsfiddle.net/sujesharukil/RJGQw/](http://jsfiddle.net/sujesharukil/RJGQw/)

```
var vm1 = {
    Id: 1,
    Name: 'some name',
    Address1: 'Some street somewhere',
    City: 'New York',
    Country: 'USA',
    Zip : '11111'
};

var vm2 = {
    title: 'Mr',
    designations: ['Chief', 'Boss', 'Lord'],
    secrets: ['xxxxx','yyyyy','zzzzz']
};

var vmCombines = function(data1, data2){
    return {
        combinedName: ko.observable(data2.title +  ' ' + data1.Name),
        designation: ko.observable(function(){
            if(data2.designations.length == 0)
                return '';

            return data2.designations.join();
        }()),
        Address: ko.observable(function(){
            return data1.Address1 + ', ' + data1.City + ',' + data1.Country + ',' +     data1.Zip
        }())
    }
};

ko.applyBindings(new vmCombines(vm1, vm2)); 
```

和 HTML

```
<input type="text" data-bind="value: combinedName"/><br />
<input type="text" data-bind="value: designation"/><br />
<input type="text" data-bind="value: Address"/><br /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T03:09:21.663

您应该查看 John Papa 关于单页 Web 应用程序的课程。他描述了一种架构，我确信它会满足您的需求。虽然他只有一个 Web API，但如果使用多个，架构上没有区别。

简而言之，您需要一个模型模块来定义客户端对象（`model.employee`和`model.customer`）的形状。然后，您的视图模型模块包含包含（除其他外）一个或多个这些对象的视图模型。例如`vm.employees`，将包含一个员工对象列表 ( `ko.observableArray`)，`vm.employeesAndCustomers`并将包含一个`ko.observableArray`员工及其相关客户。如果您想要一个仅包含来自`model.employee`对象的部分数据和来自对象的部分数据的视图模型`model.customer`，那么您需要定义一个新模型，例如`model.employeeBrief`and `model.customerBrief`，然后定义一个使用此类项目列表的视图模型。

您应该使用一个`dataservice`模块从服务中检索数据，并使用一个`datacontext`模块将接收到的 JSON 转换为客户端 (model.*) 对象的列表，并在内存中保存这些列表。查看模型`observableArrays`从`datacontext`.

将`datacontext`使用一个`model.mapper`模块将接收到的 JSON 转换为他们的客户端形式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T02:31:45.490

var viewModel = JSON.parse(jsonContentFromService);

也许是这样的：

```
var mainVM = {};

mainVM.SomeStuffFromVm1 = vm1.WhateverYouNeed
mainVM.SomeStuffFromVM2  = vm2.WhateveryYouNeed; 
```

# c# - 在 C# 或 C++ 上从 Internet 获取和解析网页

> ID：15400124
> 
> 赞同：0
> 
> 时间：2013-03-14T02:29:40.077
> 
> 标签：c#, c++, webpage

我正在 C#/C++ 上制作一个 WinForms 项目（取决于我能找到实现目标的最佳方式，可以更改语言）。我需要从网站上获取一个页面并对其进行解析以获取一些信息。我是使用 Visual C#/C++ 进行 Web 编程的初学者，我在这里找到的所有答案对于初学者来说都太复杂了。你能帮我告诉我应该使用哪些标准类来以某种形式从 Internet 获取页面以及如何解析它。如果您有任何代码示例，我将非常高兴，因为正如我在上面所写的那样，我没有网络编码经验，也没有时间详细学习每个术语。先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T02:45:00.317

可以用c#下载具体的网页然后分析，下载的代码示例：

```
using System.Net;
using System.IO;
using System.Windows.Forms;

string result = null;
string url = "http://www.devtopics.com";
WebResponse response = null;
StreamReader reader = null;

try
{
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create( url );
    request.Method = "GET";
    response = request.GetResponse();

    ContentType contentType = new ContentType(response.ContentType);
    Encoding encoding = Encoding.GetEncoding(contentType.CharSet);

    reader = new StreamReader( response.GetResponseStream(), encoding);
    result = reader.ReadToEnd();
}
catch (Exception ex)
{
  // handle error
  MessageBox.Show( ex.Message );
}
finally
{
  if (reader != null)
      reader.Close();
  if (response != null)
      response.Close();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T02:42:12.967

看看这个项目'[这里](http://htmlagilitypack.codeplex.com/)'和他们的代码示例'[这里](http://htmlagilitypack.codeplex.com/wikipage?title=Examples)'

# python - 移除 arg = urllib2.urlopen(argv[1]).read() soup = BeautifulSoup(arg) a_tags = soup.find_all('a') #so this stores a list with all the tags 我只需要那些不链接到同一页面的人（ 问问题 问问题 2013-03-14T02:30:04.737 234 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. arg = urllib2.urlopen(argv[1]).read() soup = BeautifulSoup(arg) a_tags = soup.find_all('a') #so this stores a list with all the tags 我只需要那些不链接到同一页面的人（在href中没有符号#） 任何人请...... 我的代码有问题，它只读取第一个 if 语句而 else if 没有？ 这是 C# 程序我在这行代码中有一个问题： 我输入大于或等于 400 的=数字它运行我输入的数字小于或等于 500=它运行我输入介于 400 和 500 之间的数字，例如 401 到 499=它运行我清空输入 = 错误我输入字母 = 错误 请注意，我运行的代码仅单独接受整数，它运行的代码以及不接受空输入的代码也运行 你觉得哪里不对？ int parsedValue; if (int.Parse(txtVacate.Text) <= 400 || int.Parse(txtVacate.Text) >= 500) MessageBox.Show("Romms provided is not vacant or does not exist at all."); else if (txtVacate.Text == " ") MessageBox.Show("You provide empty"); else if (!int.TryParse(txtVacate.Text, out parsedValue)) MessageBox.Show("Please provide right info"); else { MySqlConnection connection = null; string hostname = "localhost"; string database = "aparece_hoteldb"; string username = "root"; string password = ""; connection = new MySqlConnection("host=" + hostname + ";database=" + database + ";username=" + username + ";password=" + password + ";"); string table = "reservations"; string query = "DELETE FROM reservations WHERE RoomNumber = " + txtVacate.Text; connection.Open(); MySqlDataAdapter da_res = null; DataSet ds_res = null; ds_res = new DataSet(); da_res = new MySqlDataAdapter(query, connection); da_res.Fill(ds_res, table); MessageBox.Show("Room" + " " + txtVacate.Text + " " + "is now Vacant please reload!"); dataGridView2.DataSource = ds_res.Tables[table]; this.Close(); pythonhtmlpython-2.7tagsbeautifulsoup 4 1 回答 1 This answer is useful 2 您可以将href属性与函数匹配： for a in soup.find_all('a', href=lambda value: value.startswith('#')): a.extract() 于 2013-03-14T02:32:02.653 回答 Related 1 django - 如何在 django 中自动填写表单字段 2 javascript - 如何将东部标准时间设置为 Datepicker (jquery ui) - 使用 javascript 2 ruby-on-rails - Rails 邮件程序在会话持久性和发送电子邮件方面存在问题 1 linux - Linux I/O 重定向 2 java - 在 if 语句中使用按位 & 3 c++ - 使用 invert() 或 inv() 在 opencv 中反转矩阵时出现运行时错误 1 jquery - jQuery - 扩展菜单 1 forms - Dolphin 中未显示 Wordpress 提交按钮 1 jquery - 通过modernizr.load 加载respond.js 异步很慢？ 1 r - 在 ggplot2 中用闪避的条形图绘制相对频率 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

 > ID：15400127
> 
> 赞同：0
> 
> 时间：
> 
> 标签：python, html, python-2.7, tags, beautifulsoup

```
arg = urllib2.urlopen(argv[1]).read()
soup = BeautifulSoup(arg)
a_tags = soup.find_all('a') #so this stores a list with all the <a href="" /a> tags 
```

我只需要那些不链接到同一页面的人（在href中没有符号#）

任何人请......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T02:32:02.653

您可以将`href`属性与函数匹配：

```
for a in soup.find_all('a', href=lambda value: value.startswith('#')):
    a.extract() 
```

# c# - 我的代码有问题，它只读取第一个 if 语句而 else if 没有？

> ID：15400129
> 
> 赞同：1
> 
> 时间：2013-03-14T02:30:29.623
> 
> 标签：c#, if-statement

这是 C# 程序我在这行代码中有一个问题：

我输入大于或等于 400 的`=`数字它运行我输入的数字小于或等于 500`=`它运行我输入介于 400 和 500 之间的数字，例如 401 到 499`=`它运行我清空输入 = 错误我输入字母 = 错误

请注意，我运行的代码仅单独接受整数，它运行的代码以及不接受空输入的代码也运行

你觉得哪里不对？

```
 int parsedValue;
        if (int.Parse(txtVacate.Text) <= 400 || int.Parse(txtVacate.Text) >= 500)
            MessageBox.Show("Romms provided is not vacant or does not exist at all.");

        else if (txtVacate.Text == " ")
            MessageBox.Show("You provide empty");

        else if (!int.TryParse(txtVacate.Text, out parsedValue))
            MessageBox.Show("Please provide right info");
        else
        {
            MySqlConnection connection = null;
            string hostname = "localhost";
            string database = "aparece_hoteldb";
            string username = "root";
            string password = "";
            connection = new MySqlConnection("host=" + hostname +
                                            ";database=" + database +
                                            ";username=" + username +
                                            ";password=" + password + ";");

            string table = "reservations";
            string query = "DELETE FROM reservations WHERE RoomNumber = " + txtVacate.Text;
            connection.Open();
            MySqlDataAdapter da_res = null;
            DataSet ds_res = null;
            ds_res = new DataSet();
            da_res = new MySqlDataAdapter(query, connection);
            da_res.Fill(ds_res, table);
            MessageBox.Show("Room" + " " + txtVacate.Text + " " + "is now Vacant please reload!");
            dataGridView2.DataSource = ds_res.Tables[table];
            this.Close(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T02:37:47.273

恐怕你的逻辑是错误的。如果`txtVacate.Text`不包含整数，您的代码将会崩溃。这是评估不同条件的正确顺序。

```
int parsedValue = 0;
bool isValid = int.TryParse(txtVacate.Text, out parsedValue));
if (txtVacate.Text == " ") // Better: if (txtVacate.Text.Trim() == string.Empty)
{
    MessageBox.Show("You provide empty");
}
else if (!isValid)
{
    MessageBox.Show("Please provide right info");
}
else if (parsedValue <= 400 || parsedValue >= 500)
{
    MessageBox.Show("Romms provided is not vacant or does not exist at all.");   
}
else
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T02:48:29.013

您可以简化这几个步骤。

首先，检查以确保输入不为 null、空格或空。

如果有一个值，解析它以确保它是一个数值。

```
if (!string.IsNullOrWhiteSpace(txtVacate.Text))
{
    in parsedValue = 0;
    bool isValid = int.TryParse(txtVacate.Text, out parsedValue));

    if (isValid) 
    {
        if (parsedValue <= 400 || parsedValue >= 500)
            MessageBox.Show("Romms provided is not vacant or does not exist at all.");
        else 
        {
            // main stuff here
        }
    }
    else 
    {
        MessageBox.Show("Please provide right info");
    }
else
{
    MessageBox.Show("You provide empty");
} 
```

虽然很复杂，但这应该可以正确处理所有用例

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T02:38:48.503

您的第一个 if 语句使用

```
int.Parse(txtVacate.Text) 
```

对于空或非数字（文本）值，这将引发 FormatException，因此您的“else if”案例将永远不会被评估。

您应该在第一个“if”中使用 TryParse，而不是 Parse，或者捕获 FormatException 并相应地处理它。

# c# - 何时使用 BlockingCollection 以及何时使用 ConcurrentBag 而不是 List ?

> ID：15400133
> 
> 赞同：50
> 
> 时间：2013-03-14T02:30:58.297
> 
> 标签：c#, wpf, multithreading, linq, task-parallel-library

[对问题“为什么这个 Parallel.ForEach 代码冻结程序？”](https://stackoverflow.com/a/8365614/2031316)的公认答案 建议在 WPF 应用程序 中用[ConcurrentBag替换 List 用法。](http://msdn.microsoft.com/en-us/library/dd381779.aspx)

我想了解在这种情况下是否可以使用 [BlockingCollection ？](http://msdn.microsoft.com/en-us/library/dd267312%28v=vs.100%29.aspx)

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-03-14T09:20:16.433

您确实可以使用 a `BlockingCollection`，但这样做绝对没有意义。

首先，请注意，它[`BlockingCollection`](http://msdn.microsoft.com/en-us/library/dd267312%28v=vs.100%29.aspx)是实现[`IProducerConsumerCollection<T>`](http://msdn.microsoft.com/en-us/library/dd287147%28v=vs.100%29.aspx). 任何实现该接口的类型都可以用作底层存储：

> 创建`BlockingCollection<T>`对象时，您不仅可以指定有界容量，还可以指定要使用的集合类型。例如，您可以`ConcurrentQueue<T>`为先进先出 (FIFO) 行为指定对象，或`ConcurrentStack<T>`为后进先出 (LIFO) 行为指定对象。您可以使用任何实现该`IProducerConsumerCollection<T>`接口的集合类。的默认集合类型`BlockingCollection<T>`是`ConcurrentQueue<T>`.

这包括`ConcurrentBag<T>`，这意味着您可以拥有一个阻塞并发包。`IProducerConsumerCollection<T>`那么普通集合和阻塞集合有什么区别呢？文件`BlockingCollection`说（强调我的）：

> `BlockingCollection<T>`用作 `IProducerConsumerCollection<T>`实例的包装器，**允许从集合中删除尝试被阻止，直到数据可以被删除**。类似地，`BlockingCollection<T>`可以创建 a 来强制[...]中允许的 **数据元素数量的上限。**`IProducerConsumerCollection<T>`

由于在链接的问题中不需要做任何这些事情， using`BlockingCollection`只需添加一层未使用的功能。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2016-10-31T14:25:24.810

*   `List<T>`是一个设计用于单线程应用程序的集合。

*   `ConcurrentBag<T>`是一类`Collections.Concurrent`命名空间，旨在简化在多线程环境中使用集合。如果您使用 ConcurrentCollection，您将不必锁定您的集合以防止其他线程损坏。您可以从您的集合中插入或获取数据，而无需编写特殊的锁定代码。

*   `BlockingCollection<T>`旨在摆脱检查线程之间共享集合中是否有新数据可用的要求。如果有新数据插入到共享集合中，那么您的消费者线程将立即唤醒。因此，您不必检查新数据是否在特定时间间隔内可用于消费者线程，通常是在 while 循环中。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-11-13T14:57:47.650

每当您发现需要线程安全`List<T>`时，在大多数情况下， the`ConcurrentBag<T>`和 the`BlockingCollection<T>`都不是您的最佳选择。这两个集合都专门用于促进生产者-消费者场景，因此除非您有多个线程同时从集合中添加**和**删除项目，否则您应该寻找其他选项（[`ConcurrentQueue<T>`](https://docs.microsoft.com/en-us/dotnet/api/system.collections.concurrent.concurrentqueue-1)在大多数情况下最好的候选者是）。

特别是关于，它是一个针对**混合**生产者 - 消费者场景[`ConcurrentBag<T>`](https://docs.microsoft.com/en-us/dotnet/api/system.collections.concurrent.concurrentbag-1)的非常专业的类。这意味着每个工作线程都应该是生产者和消费者（从同一个集合中添加**和删除项目）。**它*可能*是类内部存储的一个很好的候选，但除此之外，很难想象这个类有任何有利的使用场景。*****[`ObjectPool`](https://docs.microsoft.com/en-us/dotnet/standard/collections/thread-safe/how-to-create-an-object-pool "使用 ConcurrentBag 创建对象池")*****

 *****人们通常认为 the`ConcurrentBag<T>`是线程安全的等价物 a `List<T>`，但事实并非如此。这两个 API 的相似性具有误导性。调用结果`Add`以`List<T>`在列表末尾添加项目。调用结果而不是在包内的随机插槽中添加的项目[`Add`](https://docs.microsoft.com/en-us/dotnet/api/system.collections.concurrent.concurrentbag-1.add)。本质上是无序`ConcurrentBag<T>`的。`ConcurrentBag<T>`它[没有针对](https://github.com/dotnet/runtime/issues/14835 "提高 ConcurrentBag<T> GetEnumerator 性能")枚举进行优化，并且在被命令这样做时做得很糟糕。它在内部维护了一堆线程本地队列，因此其内容的顺序取决于哪个线程做了什么，而不是什么时候发生的。

这些特性使得存储/循环`ConcurrentBag<T>`结果的选择不太理想。`Parallel.For``Parallel.ForEach`

一个更好的线程安全替代方法`List<T>.Add`是[`ConcurrentQueue<T>.Enqueue`](https://docs.microsoft.com/en-us/dotnet/api/system.collections.concurrent.concurrentqueue-1.enqueue)方法。*"Enqueue"*是一个不如*"Add"*熟悉的词，但它实际上做了你期望它做的事情。

没有什么是a`ConcurrentBag<T>`可以做的，a是不能做的`ConcurrentQueue<T>`。例如，这两个集合都没有提供从集合中[删除特定项目](https://stackoverflow.com/questions/3029818/how-to-remove-a-single-specific-object-from-a-concurrentbag)的方法。`TryRemove`如果您想要一个带有参数的方法的并发集合`key`，您可以查看[`ConcurrentDictionary<K,V>`](https://docs.microsoft.com/en-us/dotnet/api/system.collections.concurrent.concurrentdictionary-2.tryremove)该类。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-14T03:57:08.413

是的，你可以使用`BlockingCollection`它。`finishedProxies`将被定义为：

```
BlockingCollection<string> finishedProxies = new BlockingCollection<string>(); 
```

并添加一个项目，你会写：

```
finishedProxies.Add(checkResult); 
```

完成后，您可以根据内容创建一个列表。*****

# c# - 为什么我的继承类没有隐藏我的基类方法？

> ID：15400134
> 
> 赞同：1
> 
> 时间：2013-03-14T02:31:00.733
> 
> 标签：c#, oop, inheritance, polymorphism, autofac

我有一个使用 Autofac 实例化对象的项目

```
builder.RegisterType<AbcWebWorkContext>().As<IWorkContext>().InstancePerHttpRequest(); 
```

这`AbcWebWorkContext`是一个子类`WebWorkContext`：

```
public partial class AbcWebWorkContext : WebWorkContext 
```

在我的`AbcWebWorkContext`我想隐藏父类的方法和属性

```
protected new Customer GetCurrentCustomer(){ //do stuff }
new public Customer CurrentCustomer { //do studd } 
```

但是当有人打电话

```
_workContext.CurrentCustomer 
```

基类属性被调用。如果我这样称呼它

```
((AbcWebWorkContext) _workContext).CurrentCustomer 
```

有用。

我想知道为什么我不能隐藏父方法。我无法更改被调用的类，因为它位于`NopCommerce`'s core 中，我不想更改。

为什么不隐藏方法？

方法的基类声明：

```
protected Customer GetCurrentCustomer() { // do stuff }
public Customer CurrentCustomer{ // do stuff } 
```

调用`GetType()`会`_workcontext`输出

> `{Name = "AbcWebWorkContext" FullName = "Nop.Web.Framework.AbcWebWorkContext"}`

类型层次结构是`IWorkContext`（接口）« `WebWorkContext`«`AbcWebWorkContext`

`_workContext`被声明为`IWorkContext`并且Autofac生成一个实例为`AbcWebWorkContext`（如上所示）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T02:37:22.250

[`new`](http://msdn.microsoft.com/en-us/library/51y09td4%28v=vs.71%29.aspx#vclrfnew_newmodifier)关键字意味着子类的方法隐藏**了**基类`CurrentCustomer`而不是覆盖，所以`WebWorkContext.CurrentCustomer`是一个完全不同的方法`AbcWebWorkContext.CurrentCustomer`。

您必须将基类的方法声明为

```
virtual Customer CurrentCustomer { ... } 
```

以及子类的方法

```
override Customer CurrentCustomer { ... } 
```

我建议您阅读有关[c# 中的多态性的](http://msdn.microsoft.com/en-us/library/ms173152%28v=vs.80%29.aspx)更多信息。

如果您使用的方法实际上是在接口中定义的`IWebWorkContext`，那么您只需封装基类而不是从它继承，如下所示：

```
class AbcWebWorkContext : IWebWorkContext
{
    private WebWorkerContext _inner = new WebWorkerContext();

    public Customer CurrentCustomer { ... }
} 
```

如果不能使基类的方法成为虚拟方法，则必须做一些不太优雅的事情，比如反射：

```
var prop = _workContext.GetType().GetProperty("CurrentCustomer");
var value = (Customer)prop.GetValue(_workContext, new object[0]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T02:37:15.837

我不确定我的问题是否正确，但我认为您需要为`virtual`基类中的方法添加`override`修饰符，并为子类中的方法添加修饰符。

[在MSDN](http://msdn.microsoft.com/en-us/library/9fkccyh4.aspx)上了解更多信息

# ios - UIScrollView contentSize 高度等于它的框架高度，为什么还有滚动条？

> ID：15400135
> 
> 赞同：0
> 
> 时间：2013-03-14T02:31:13.827
> 
> 标签：ios, uiscrollview

![问题](../Images/4b4a9302f22ca366b383ad5ce11f889d.png)

我将scrollView contentSize配置为与其框架高度相同（我也测试了<），为什么仍然显示滚动条，看来scrollview内容大小不是我在代码中配置的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T03:09:07.970

我认为您将滚动视图放置在 Retina 4 英寸大小的视图中，并且滚动视图会自动调整大小。

`viewDidLoad`在方法中添加行

```
self.mainScrollView.autoresizingMask = UIViewAutoresizingFlexibleWidth; 
```

或在 IB 中设置正确的自动调整大小掩码。

# sql-server-2012 - 如何在结束日期大于开始日期的每行基础上在 sql 中添加不同的随机开始和结束日期

> ID：15400137
> 
> 赞同：0
> 
> 时间：2013-03-14T02:31:40.013
> 
> 标签：sql-server-2012

我对 SQL 查询很陌生。我正在尝试构建一个数据库，我需要在其中填充大多数表中大约 500 条记录的开始和结束日期。我已经尝试了以下明显的填充方法。但是使用我的方法，结束日期似乎早于开始日期。而且我希望开始日期和结束日期之间的差异在 90 天左右。任何帮助将不胜感激。提前非常感谢。

我目前的查询是：

```
UPDATE doctor
SET Beg_Date = DATEADD(DAY, ABS(CHECKSUM(NEWID()) % 4380), '01-01-2000')

UPDATE doctor
SET End_Date = DATEADD(DAY, ABS(CHECKSUM(NEWID()) % 4380), '01-01-2000') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T05:36:19.800

只需将`Beg_Date`用作第二个日期的锚点，而不是完全随机计算第二个日期。

```
UPDATE doctor
SET End_Date = DATEADD(DAY, 85 + ABS(CHECKSUM(NEWID()) % 11), Beg_Date) 
```

# java - 具有单独类的arraylist的设置信息

> ID：15400140
> 
> 赞同：0
> 
> 时间：2013-03-14T02:31:49.593
> 
> 标签：java, arraylist

这可能是一个简单的问题，但我遇到了问题。我有3节课。一个包含 setmethod 的 Student 类：

```
public boolean setName(String fname)
{
        this.name = fname;
        return true;
} 
```

带有将字符串传递给 setmethod 的 main 的 TestClass

```
static Student action;

public static void main(String[] args)
{
        action.setName("John");
} 
```

以及一个包含添加学生方法的 Classroom 类。

```
public boolean add(Student newStudent)
    {
            ???
            return true;
    } 
```

我知道如何创建对象并将其添加到数组列表中，但我对如何使用 3 个单独的类来做到这一点感到困惑。我的数组列表初始化是：

```
List<Student> studentList = new ArrayList<Student>(); 
```

我如何将 Student 类中设置的属性（在这种情况下为名称）与 Classroom 类中创建的新对象相关联？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T02:50:08.950

我认为你应该遵循最小意外的原则，即确保你创建的方法完全符合你的需要。在您的示例中，您的`setName`and`add`方法由于某种原因返回一个布尔值。通常，setter 方法不会返回布尔值，除非您正在执行某种类似 DB 插入的操作并希望确保您的对象已实际插入。

此外，一个典型的习惯用法是在静态 main 方法中创建控制器对象（即`TestClass`），然后在其构造函数中初始化任何必要的内容，或者通过`TestClass`在 main 方法本身内部调用创建的对象上的方法。

这是一个解决方案。

```
public class TestClass {    
    private Classroom c;

    public TestClass() {
        c = new Classroom();
        private Student s = new Student();
        s.setName("John");
        c.add(s);
    }

    public static void main(String[] args)
    {
        new TestClass();
    }
}

public Classroom {
    private List<Student> studentList;

    public Classroom() {
         studentList = new ArrayList<Student>();
    }

    public boolean add(Student newStudent) {
         studentList.add(newStudent);
         return true; //not sure why you're returning booleans
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T02:43:20.720

您的学生课程看起来不错，您的课堂课程应该包含学生列表，以及添加/删除/列出学生的方法。您的测试班应该创建新学生，然后您可以将其添加到您的课堂。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T02:46:20.317

我假设您想要一个测试班，它是一个像期中或期末考试这样的测试活动，并且您想将学生和教室放在测试班中。

所以你得到了三个类，它们都是相关的。如果这是您想要的情况，那么您可以这样做。（这是一个非常简化的版本！！）

```
class Test{
    String name;
    HashMap<ClassRoom, ArrayList<Student> > roomMap;
    // ... other functions
}

// you can use ClassRoom as key and Student list as value.
// A ClassRoom key will return a value which is a Student list containg students who are going to take a test in that room.
 public static void main(String[] args) {
    Test test = new Test();
    test.name = "MidTerm";
    test.roomMap = new HashMap<ClassRoom, ArrayList<Student> >();
    ArrayList<Student> students = new ArrayList<Student>();
    students.add(new Student("John"));
    students.add(new Student("Mark"));
    ClassRoom room = new Room("R123");
    test.roomMap.put(room, student);

    // If there are a lot of test, then you could manage test in an ArrayList in your main.
    ArrayList<Test> testList = new ArrayList<Test> ();
    testList.add(test);
} 
```

也许你可以提供更多关于你的要求的细节。

# html - 如何使用 Twitter Bootstrap 做这个简单的响应式布局？

> ID：15400148
> 
> 赞同：0
> 
> 时间：2013-03-14T02:32:01.620
> 
> 标签：html, css, twitter-bootstrap, responsive-design

请看一下：

[已删除]

当您调整浏览器的大小时，它会从一行 3 个框直接变为每行 1 个。有没有办法让它在去 1 之前达到每行 2？

如果我决定使用 twitter bootstrap 响应式网格，有时我会使用其他 CSS 网格框架（例如，某些限制为 960 像素宽的设计），不确定我是否在布局选项方面受到限制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:45:28.053

我喜欢 Zaid 的警示性说明，但如果你真的需要这样做，这里有一些东西可以帮助你入门：[Live example](http://fiddle.jshell.net/panchroma/Ugt6q/22/show/)和[jsfiddle](http://jsfiddle.net/panchroma/Ugt6q/)

随着您的页面布局变得更加复杂，并且随着您添加更多 Bootstrap 组件，您将不得不使用滚雪球将异常列表添加到自定义 CSS 中，因此保持简单可能很好；）

祝你好运！

**CSS**

```
@media(min-width:481px) and (max-width:767px){

.row-fluid [class*="span"]{   /* for the above viewpoints, force spans to be 50% */ 
width:48.717948717948715%;

float:left;
}

.row-fluid .span12{    /* override so span12 is full width */
width:100%;
margin-right:0 !important;
}

.row-fluid [class*="span"]:first-child {
margin-left: 0;
 margin-right: 2.5109110747408616%;
}

.row-fluid [class*="span"]:last-child {
float:right;
}

} 
```

# symfony1 - 如何在 Symfony 1.4 功能测试中检查单选按钮的状态

> ID：15400150
> 
> 赞同：1
> 
> 时间：2013-03-14T02:32:05.800
> 
> 标签：symfony1, functional-testing

在 Symfony 1.4 中，我正在尝试编写一个功能测试来验证在页面呈现时选择了单选按钮。HTML 如下所示

```
<input id="plant_type_mangrove" type="radio" value="Mangrove" name="plant_type" checked="yes"> 
```

并按照我在选择列表的示例中看到的内容，我希望这会起作用

```
$browser->with('response')->begin()->   
    checkElement('#plant_type_mangrove[checked="yes"]')->
end(); 
```

但它总是失败。

如何验证是否选择了单选按钮？

# batch-file - 通过批处理文件传递参数

> ID：15400153
> 
> 赞同：0
> 
> 时间：2013-03-14T02:32:19.240
> 
> 标签：batch-file

我有一个程序可以启动视频流网站的全屏窗口并自动登录该网站。该程序旨在接受参数以自动进入特定通道。

例如。C:\program.exe 123

这将转到频道 123

我的一个朋友有一个问题，他们需要清除 Internet 缓存以允许自动登录，所以我有一个批处理文件，如下所示。

```
@echo off

RunDll32.exe InetCpl.cpl,ClearMyTracksByProcess 8 (Deletes Temporary Internet Files Only)

Start program.exe

RunDll32.exe InetCpl.cpl,ClearMyTracksByProcess 8 (Deletes Temporary Internet Files Only) 
```

无论如何可以更改批处理文件以允许我启动program.bat 123并将其传递给program.exe？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T02:37:02.107

实际上，您可以像这样获取发送到批处理文件的参数：

```
%1 is the first parameter
%2 is the second parameter 
```

等等...

因此，将其更改为：

```
Start program.exe %1 
```

那应该这样做。或者，如果我可以提出一些建议，请将其更改为：

```
set /p channel=Select a channel: 
Start program.exe %channel% 
```

基本上，这会提示用户在执行批处理脚本时选择一个频道号，一旦他们点击`Enter`，它就会启动`program.exe`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T03:12:29.150

我有一个暗示，我们在这里没有得到完整的故事，program.exe 实际上是一个引用的参数。

```
START "some programname in quotes" someparameter 
```

将尝试以`someparameter`窗口标题运行程序`"some programname in quotes"`

如果是这种情况，治疗方法是：

```
START "some window title" "some programname in quotes" someparameter 
```

如果你愿意，哪里`"some window title"`可能是一个带引号的空字符串，即

```
START "" "some programname in quotes" someparameter 
```

完全合法

# jquery - 将属性的 id 存储为变量并稍后调用它（添加）

> ID：15400155
> 
> 赞同：0
> 
> 时间：2013-03-14T02:32:23.573
> 
> 标签：jquery, this

我有一系列按钮，每个按钮对应于标记中其他地方的一系列图像。我试图避免使用相同的代码一百万次，但稍作改动。基本上我希望当您单击按钮 id=x 时，它将在图像 id=xT 上运行代码。这是我到目前为止所得到的，但我一生都无法获得正确的语法。我错过了一些明显的东西吗？或者也许有更好的方法来做到这一点？

```
$(document).ready(function(){
    $(this).click(function(){
        var slider = ("#" + $(this).attr("id") + "T"); 
        $(slider).slideDown(750);
    });
}); 
```

编辑：

例如，下面是工作代码，问题是如何运行带有被点击元素的 id 的变量加上末尾的 T 以表示要向下滑动的图像。

```
$(document).ready(function(){
    $("#current").click(function(){
        var slider = $("#currentT"); 
        slider.slideDown(750);
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T02:35:00.647

您的第一个选择器并没有真正的意义。如果您正在寻找按钮，请选择按钮：

```
$(document).ready(function(){
    $('button').click(function(){
        var slider = "#" + this.id + "T";
        $(slider).slideDown(750);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T02:46:30.683

Jquery 可以完美地做到这一点，试试下面的代码：

```
$(document).ready(function(){
    $(':button').click(function(){
        var slider = ("#" + $(this).attr("id") + "T"); 
        $(slider).slideDown(750);
    });
}); 
```

# java - 自动将 Java 正则表达式转换为 Ruby 正则表达式？

> ID：15400156
> 
> 赞同：2
> 
> 时间：2013-03-14T02:32:23.947
> 
> 标签：java, ruby-on-rails, ruby

我使用了一个工具，其中大量字符串（存储在数据库中）通过一系列 Java 正则表达式规则进行转换，以便更易于阅读。为了更容易添加新规则，我想要一个 UI 来显示哪些字符串会受到建议的正则表达式的影响。

我有一个学校项目，其中为数不多的要求之一是它使用 Ruby on Rails 完成，并且正在考虑使用它来满足我的上述需求。

是否有现有的库/gem 可以将提议的 Java 风格的正则表达式转换为 Ruby 正则表达式（以便找到受影响字符串的代码可以在 ruby​​ 中）？

编辑：我想我没有很好地解释自己。我正在寻找将任何给定的 Java 正则表达式转换为等效的 Ruby 正则表达式的 gem（当然在限制范围内）。这是工作流程的示例：

1.  用户输入 Java 正则表达式，`*[^~]Some.Regex[1-9]*`
2.  java正则表达式字符串被发送到rails服务器
3.  rails 服务器从数据库中返回此正则表达式适用的字符串列表。

在寻找完成第三步的方法时，我想知道是否有一个库可以将 java 正则表达式转换`*[^~]Some.Regex[1-9]*`为 ruby​​ 等价物`/*[^~]Some.Regex[1-9]*/`（不确定这是否真的是等价物，但只是为了举例而使用它）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T04:39:28.593

如果我没记错的话，Java 正则表达式基本上是字符串，传递给一个方法，该方法将它们传递给正则表达式引擎。

Ruby 的正则表达式真的没有什么不同。Ruby 有几种创建正则表达式的方法，它们都返回相同的对象，尽管它们的定义不同：

```
/[^~]Some.Regex[1-9]*/             # => /[^~]Some.Regex[1-9]*/
%r[[^~]Some.Regex[1-9]*]           # => /[^~]Some.Regex[1-9]*/
Regexp.new('[^~]Some.Regex[1-9]*') # => /[^~]Some.Regex[1-9]*/

pattern = '[^~]Some.Regex[1-9]*'
/#{ pattern }/                     # => /[^~]Some.Regex[1-9]*/ 
```

这为您提供了一些灵活性，并允许您将字符串替换为正则表达式或将其传递给`Regex.new`.

Ruby 没有Java[的所有标志](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)，因此您需要注意这些标志。支持非捕获组和look-ahead/look-behind和断言：

```
(?:X) X，作为非捕获组
(?idmsux-idmsux) 无，但将匹配标志 idmsux 打开 - 关闭
(?idmsux-idmsux:X) X，作为具有给定标志 idmsux on - off 的非捕获组
(?=X) X，通过零宽度正前瞻
(?!X) X，通过零宽度负前瞻
(?X) X，作为一个独立的非捕获组

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T02:51:28.880

您应该查看[http://txt2re.com/](http://txt2re.com/)

它将允许您根据您选择的选择生成 REGEX。然后，您可以选择要使用 REGEX 的语言。这将允许您比较 Java 和 Ruby 是如何编写表达式的。这是一个很棒的工具，希望它的主人能长期使用它！

![在此处输入图像描述](../Images/544b8dbaa368496f0cf062f696b483a2.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T09:42:36.137

我最终制作了一个宝石来支持这一点。[github 页面](https://github.com/deanmorin/java_regex)详细介绍了它支持的功能。

# jquery - 如何在 div 中添加和删除类？

> ID：15400161
> 
> 赞同：0
> 
> 时间：2013-03-14T02:33:49.400
> 
> 标签：jquery, html, class

我在一个循环中有一些 div，并想根据单击的内容更改类。请看下面的代码：

我的html：

```
<div class="Active"></div>
<div class="inactive"></div>
<div class="inactive"></div> 
```

我的jQuery：

```
$(document).ready(function()
{
    $('div.inactive').on('click',function()
    {
        //run some codes
        $(this)
            .removeClass('inactive')
            .addClass('Active')
            .closest('div')
            .find('.Active')
            .removeClass('Active')
            .addClass('inactive');
    });
}); 
```

具有活动类的 div 是正在显示的当前选择。这是不可点击的。带有非活动类的 div 是可点击的选项。如果用户单击非活动 div，则该 div 的类应更改为活动（这将是显示的新选择），并且具有活动类的前一个 div 应更改为非活动，使其成为可单击选项。我没有放置 CSS 代码，因为它无关紧要，我想要的只是根据单击的选项切换类。

有人可以看看我的代码并告诉我我在哪里失败了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T02:38:00.127

```
$(document).ready(function() {
    $(document).on('click', 'div.inactive', function() {
        //run some codes
        $('.Active').removeClass('Active').addClass('inactive');
        $(this).removeClass('inactive').addClass('Active');
    });
}); 
```

这是：http: [//jsfiddle.net/ZgYyP/](http://jsfiddle.net/ZgYyP/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T02:38:06.750

您缺少`.`传递给`find`方法的类名，还`closest`选择了最近的父元素，您也正在`Active`从单击的元素中删除该类。

```
$('div.inactive').on('click', function(){
    $(this).removeClass('inactive')
           .addClass('Active')
           .siblings('div')
           .removeClass('Active')
           .addClass('inactive');
    });
}); 
```

请注意，事件处理程序绑定到选定的元素而不是它们的类名，当您更改类名时，无论单击元素的类名如何，都将执行您的处理程序。您可以改用事件委托。

```
$('#aParentElement').on('click', '.Active', function(){
   // Click handler for the Active element
})

$('#aParentElement').on('click', '.inactive', function(){
   // Click handler for the inActive elements
   $(this).removeClass('inactive')
           .addClass('Active')
           .siblings('div')
           .removeClass('Active')
           .addClass('inactive');
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T02:38:18.527

[**工作演示**](http://jsfiddle.net/FEjKC/4/)

其他答案错过了这一点：*“如果用户单击非活动 div，则该 div 的类应更改为活动，并且应将具有活动类的前一个 div 更改为非活动**，使其成为可点击选项**”*

您正在尝试通过类名控制是否可以单击它们，但问题是您将单击绑定到的元素 div.inactive**在删除该类时不会删除这些绑定，**因此您必须检查每次单击它们时都会将其绑定到活动的事件。

```
$('div.inactive, div.Active').on('click',function(){
    if ($(this).hasClass('inactive')){
        //run some codes
        $(this).siblings().andSelf().toggleClass('Active inactive');
    }
}); 
```

# ms-access - 如何在存在新输入之前向行添加输入？

> ID：15400164
> 
> 赞同：0
> 
> 时间：2013-03-14T02:33:56.803
> 
> 标签：ms-access

![这就是我的 MS Access 数据的样子](../Images/c094d4e8a2b401dbb205a79edec49131.png)

如何将 12 和 13 更改为“ARCH”，将 14 更改为 36 以填充“ENVD”？超过 4000 个主题和 10000 行随机变化。我怎样才能告诉 ms access 写一些字母，直到它看到一组新字母，然后写那些直到它看到一组新字母？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:28:23.590

如果您有自动编号字段，则可以更简单地完成。现在我假设您没有自动编号字段，并且一次读取一条记录。

**您必须在第 8 行将 tblname 更改为您的实际表名**

```
Sub test()
Dim cn As New ADODB.Connection
Dim rs As New ADODB.Recordset
Dim sql As String
Dim val As String

Set cn = CurrentProject.Connection
rs.CursorLocation = adUseClient

sql = "SELECT * FROM tblname"
rs.Open sql, cn, adOpenDynamic, adLockOptimistic

With rs
    If Not .EOF Then
        val = !field3
        .MoveNext
        Do
            If !field3 = "" Then
                !field3 = val
                .Update
            Else
                val = !field3
            End If

            .MoveNext
        Loop Until .EOF

    End If

End With 
```

结束子

# python - 在 Python 中读取 csv 文件并创建字典

> ID：15400165
> 
> 赞同：3
> 
> 时间：2013-03-14T02:34:09.533
> 
> 标签：python, csv, dictionary

我有一个这样的 csv 数据集：

```
A, 10, USA
B,30, UK
C,4,IT
A,20,UK
B,10,USA 
```

我想阅读这个 csv 行并提供以下输出：

```
A has ran 30 miles with average of 15\. 
B has ran 30 miles with average of 20.
C has ran 4 miles with average of 4\. 
```

到目前为止，我的解决方案是读取 csv 数据并将它们转换为字典，然后对其进行迭代以查看“A”重复了多少次，以及它必须为平均值计算哪些值并最终产生结果。我已经编写了这段代码，但是我很难有效地计算 A 被重复的次数并将里程加起来以创建我的最终输出。有什么想法可以在 Python 中做到这一点吗？在 C# 中做这件事对我来说有点容易，但我对 Python 不是那么好。

```
def main(filename):
    f = open(filename,'r')
    labels = ['name','miles','country']
    data = csv.DictReader(f,labels,delimiter=',')
    for line in data:
        print (line['name']+"  " + "has ran" +"   "+  line['miles']+" "+"miles")

    f.close() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T02:39:46.697

您可以使用 a`defaultdict`来存储值，然后将它们打印出来：

```
import csv

from collections import defaultdict

with open(filename, 'r') as handle:
    reader = csv.DictReader(handle, ['name', 'miles', 'country'])
    data = defaultdict(list)

    for line in reader:
        data[line['name']).append(int(line['miles']))

    for runner, distances in data.items():
        print '{} ran a total of {} miles and an average of {} miles'.format(
            runner, sum(distances), sum(distances) / float(len(distances))
        ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T02:39:55.190

我你的循环使用 split 如下：

var1, var2, var3 = line.split(",")

这将为您获取每个变量中的行中的每个值。然后根据需要使用变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-08T03:18:00.840

您可以执行以下操作：

1.  为您的数据添加标题行（例如，“跑步者、距离、国家/地区”）。
2.  将其保存到文件（例如，log.csv）。
3.  在此处使用 load_csv 函数加载它：[https](https://github.com/kdavies4/ModelicaRes/blob/master/modelicares/util.py#L676) ://github.com/kdavies4/ModelicaRes/blob/master/modelicares/util.py#L676 通过下载 util.py 文件并执行以下操作：

    ```
    from util import load_csv
    d = load_csv("log.csv") 
    ```

    您应该得到以下字典：

    ```
    d = {'Runner': ['A', 'B', 'C', 'A', 'B'], 'Distance': [10, 30, 4, 20, 10], 'Country': ['USA', 'UK', 'IT', 'UK', 'USA']} 
    ```

    load_csv 函数使用 csv.reader 自动创建一个字典，其键名以其在标题行中找到的条目命名。每个键的字典条目是相应列中的值的列表。文档在这里： http: [//kdavies4.github.io/ModelicaRes/util.html#modelicares.util.load_csv](http://kdavies4.github.io/ModelicaRes/util.html#modelicares.util.load_csv)。util.py 文件包含许多其他功能，但您可以安全地删除它们（只要您留`import numpy as np`在顶部）。

4.  运行以下代码来计算平均距离：

    ```
    # Create counter dictionaries for the statistics.
    from collections import Counter
    n_runs = Counter()
    totals = Counter()

    # Calculate the total distance.
    for runner, distance in zip(d['Runner'], d['Distance']):
        n_runs[runner] += 1
        totals[runner] += distance

    # Print the results.
    for runner in set(d['Runner']):
        print("%s has run %i miles with an average of %g."
              % (runner, totals[runner], totals[runner]/float(n_runs[runner]))) 
    ```

这应该会给您想要的结果，并且如果数据被扩展（按行或列），它应该是灵活的。

凯文

# xampp - Xampp 不会运行 mysql 或 apache

> ID：15400174
> 
> 赞同：0
> 
> 时间：2013-03-14T02:35:02.823
> 
> 标签：xampp

每次我尝试下载 xampp 时，apache 和 mysql 都无法工作。我运行它们，但随后出现十几个错误，表明 httpd.exe 正在运行并阻止 apache 运行。我不明白的是 httpd.exe 在 xampp 文件夹中，所以它就像它自己阻塞一样。我使用的是 Windows 8，如何安装 xampp 没有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-02T11:28:57.490

运行 XAMPP 控制面板 -> Netstat，查找端口 80（或 8081）并检查进程 ID (PID)。启动任务管理器 -> 服务并在此列表中查找 PID。如果你找到了进程，你只需要阻止他（右键单击 -> 停止服务或单击底部的“服务”按钮 -> 查找进程名称 -> 右键单击​​ -> 停止）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-02T13:12:46.883

我知道我可能迟到了..如果有任何像Skype这样的程序..当这个问题再次出现时，我可以帮助你。使用Skype 1\. 在Skype 中获取工具并获取连接选项。2.取消选中“使用端口号80” 3.还将用于来电的使用端口更改为任何其他。

对于 XAMPP 1\. 做一件事重新启动系统 2\. 使用命令提示符。3.输入netstat -ao 4.然后你可以得到端口号80的PID。（记住这个PID） 5进入任务管理器，点击服务 6.在命令提示符下找到你在端口号之前找到的PID 80 7.右键单击它并停止服务。

现在您可以使用 xampp 控制面板并运行 apache 和 sql.. 问题将得到解决。

# node.js - 在 Express.js 中重定向后调用下一个中间件

> ID：15400179
> 
> 赞同：4
> 
> 时间：2013-03-14T02:35:32.930
> 
> 标签：node.js, testing, express, middleware

我希望通过对 Express.js 中间件的集成测试来推动行为。我遇到了一个有趣的情况，即应用程序背后的 Express 的行为是不可预测的（无论如何我都不是）。

作为一个简化的例子：

```
var middlewareExample = function(req, res, next){
  if(req.session){
    refreshSession(req.session, function(err, data){
      if(!err){
        res.redirect('/error');
      }
    });
    next();
  }else{
    res.redirect('/authenticate');
  }
}; 
```

问题在于对`next`重定向的调用，因为它存在于内部函数和条件之外。我不确定 Express 如何处理中间件/路由调用，`next`或者`res.redirect`它们是否碰巧发生在彼此之前或之后，如上所示。

手动测试没有发现任何奇怪的行为，supertest 模块也没有。我想知道 Express 是否以及如何应对此类情况。此外，可以使用超测来暴露任何潜在的不良行为。此外，如果可以的话，我想听听其他人一般会使用什么方法来测试 Node/Express 中间件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T07:03:52.900

您在同一个请求中发送两个响应。`next()`是响应，假设下一个处理程序也有响应，`res.redirect()`. 你真正想要的是：

```
var middlewareExample = function(req, res, next){
  if(req.session){
    refreshSession(req.session, next);
  }else{
    res.redirect('/authenticate');
  }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-29T01:46:15.757

我在下面的示例中遇到了这个问题。

```
const redirect = () => (res, resp, next) => {
  if (/* redirect condition met */) {
    return resp.status(302).redirect(`https://example.com/${path_logic()}`);
  } else {
    return next();
  }
}

app.use(redirect());
app.get('*', static('built/project/code')); 
```

我找不到任何关于重定向在该方法中*不起作用的内容。*`.use`但显然这是不允许的。

这是我的解决方案。

```
const redirect = () => (res, resp, next) => {
  if (/* redirect condition met */) {
    return resp.status(302).redirect(`https://example.com/${path_logic()}`);
  } else {
    return next();
  }
}

app.get('*', [
  redirect(),
  static('built/project/code')
]); 
```

这里唯一的逻辑区别是重定向功能似乎只在与请求处理程序（`.get` `.post`等）结合使用时才起作用，但不是`.use`。

# php - 使用 MySQL 的 PHP 搜索功能

> ID：15400184
> 
> 赞同：0
> 
> 时间：2013-03-14T02:35:48.843
> 
> 标签：php, mysql, search

我有以下代码 -

```
<?php # search.inc
error_reporting(E_ALL); // 
ini_set('display_errors', '1');
include "connect_to_mysql.php";
?>
<?php # search.inc.php

//header file:
include_once ('./includes/header.inc');
?>
<?php

$terms= $_GET['terms'];
echo "You've searched for: " . $terms;

$sql= "SELECT * FROM products WHERE product_name ='Big Tree'"; 
//-run  the query against the mysql query function 
$result=mysql_query($sql);

while ($row = mysql_fetch_array($result)) { // While there are products that match the search criteria, assign their data to a variable and echo their details on a webpage

             $id = $row["id"];
             $product_name = $row["product_name"];
             $price = $row["price"];
             $details = $row["details"];
             $category = $row["category"];
                echo '<br/> <img name="image" src="inventory_images/' . $row['id'] . '.jpg" width="100" height="150"/>';
                echo '<br/>';
                echo '<br/> Product Name: '.$row['product_name'];
                echo '<br/>';
                echo '<br/> <a href="modules/productsdetails.inc.php?id=' . $id . '">Click Here To View Product Page</a>';
                echo '<br/>';
                echo '<br/>';

        }
mysql_close(); //closes the MySQL connection.
?>
<?php
// Include footer file 
include_once ('./includes/footer.inc');
?> 
```

如您所见 - 我已经对其进行了硬编码以搜索“大树”。我的问题是 - 我如何编码以搜索用户输入。

我试过 %$terms% 但没有打印任何结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T02:43:32.330

您必须在查询中连接要搜索的变量

```
$sql= "SELECT * FROM products WHERE product_name ='".$terms."'"; 
```

或者

```
$sql= "SELECT * FROM products WHERE product_name LIKE '%".$terms."%'"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T02:52:57.083

用这个：

```
$sql = "SELECT * FROM products WHERE product_name ='$terms'"; 
```

无需串联。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T02:50:20.347

If you're using the innodb engine on mysql 5.5 or below you'll have to use 'LIKE' like so:

```
$sql= "SELECT * FROM products WHERE product_name like '%".$terms."%'"; 
```

If you're on mysql 5.6 or you're using a myisam table, you can use MATCH AGAINST if you have a fulltext index on the column you're searching.

```
$sql= "SELECT match(product_name) against('".$terms."') as relevance 
FROM products 
WHERE relevance>0 
ORDER BY relevance desc"; 
```

Please look into parameterized queries or at the very least use [mysql_real_escape_string](http://php.net/manual/en/function.mysql-real-escape-string.php) to sanitize your variables.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-10T19:40:09.237

我为 mysql 创建了一个函数，它使用百分比排序解析字符串。如果你喜欢，你可以使用它。

它几乎可以找到您搜索的所有组合。

## 安装

首先你需要在mysql中创建一个函数。这是代码。我在phpmyadmin中做到了

```
DELIMITER //

CREATE FUNCTION search ( search VARCHAR(255), string VARCHAR(255) )
RETURNS FLOAT
BEGIN

   DECLARE searchlength INT;
   DECLARE charcount INT DEFAULT 1;
   DECLARE ch VARCHAR(10); 

   DECLARE a INT DEFAULT 0; 
   DECLARE b INT DEFAULT 1;
   DECLARE c INT DEFAULT 0; 

   SET searchlength = LENGTH(search);

   WHILE charcount <= searchlength DO 
    SET ch = SUBSTRING(search,charcount,1); 

    IF LOCATE(ch,string) > 0 THEN 
      IF LOCATE(ch, string) - 1 = b THEN 
        SET c = c + 1; 
      END IF; 
      SET b = LOCATE(ch, string, b);
      SET a = a + 1; 
    END IF;

    SET charcount = charcount + 1;

   END WHILE;

   IF searchlength = a THEN 
    RETURN (c/30)*100; 
   END IF; 
   RETURN -1; 

END; //

DELIMITER ; 
```

现在，当您像这样从 php 进行 mysql 调用时，您可以使用此功能。

```
$searchneedle = "Some string you like to search for"

SELECT name,username 
FROM users 
WHERE search(LOWER('$searchneedle'),CONCAT(LOWER(test_cullum))) > -1
ORDER BY search(LOWER('$searchneedle'),CONCAT(LOWER(test_cullum))) DESC 
```

# c# - 减少类声明中的泛型

> ID：15400185
> 
> 赞同：0
> 
> 时间：2013-03-14T02:35:57.490
> 
> 标签：c#, generics

我遇到了 C# 语法问题

我想稍微抽象一下我的代码，然后我会去做这样的事情：

```
public abstract class DMO<TDao ,TExtender>
            where TDao : Dao
            where TExtender : Extender<TDao>
{
     abstract Dictionary<TExtender, PropertyInfo> Properties { get; set; }
....
} 
```

只是因为如果我这样做

```
public abstract class DMO<TDao>
            where TDao : Dao
{
     abstract Dictionary<Extender<TDao>, PropertyInfo> Properties { get; set; }
....
} 
```

我无法使用派生的`Extender<TDao>`

有什么方法可以让这更简单（我坚持使用.net 3.5，所以我认为我不能为此使用协变）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T03:32:45.680

只是

```
public abstract class DMO<T> where T: Extender<Dao> {
    public abstract Dictionary<T, PropertyInfo> Properties {
        get;
        set;
    }
    // ...
} 
```

请注意`virtual`or`abstract`成员不能是私有的。

# python - 如何使大小写不敏感？

> ID：15400187
> 
> 赞同：-4
> 
> 时间：2013-03-14T02:36:09.230
> 
> 标签：python, case-insensitive

```
int_string = input("What is the initial string? ")
int_string = int_string.lower() 
```

如何使输入不区分大小写

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T02:49:52.993

```
class CaseInsensitiveStr(str):
    def __eq__(self, other):
        return str.__eq__(self.lower(), other.lower())
    def __ne__(self, other):
        return str.__ne__(self.lower(), other.lower())
    def __lt__(self, other):
        return str.__lt__(self.lower(), other.lower())
    def __gt__(self, other):
        return str.__gt__(self.lower(), other.lower())
    def __le__(self, other):
        return str.__le__(self.lower(), other.lower())
    def __ge__(self, other):
        return str.__ge__(self.lower(), other.lower())

int_string = CaseInsensitiveStr(input("What is the initial string? ")) 
```

如果你不喜欢所有重复的代码，你可以利用`total_ordering`像这样填写一些方法。

```
from functools import total_ordering

@total_ordering
class CaseInsensitiveMixin(object):
    def __eq__(self, other):
        return str.__eq__(self.lower(), other.lower())
    def __lt__(self, other):
        return str.__lt__(self.lower(), other.lower())

class CaseInsensitiveStr(CaseInsensitiveMixin, str):
    pass 
```

测试用例：

```
s = CaseInsensitiveStr("Foo")
assert s == "foo"
assert s == "FOO"
assert s > "bar"
assert s > "BAR"
assert s < "ZAB"
assert s < "ZAB" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T02:49:59.037

问题是由于[此处](http://docs.python.org/2/library/functions.html#input)`input()`所述的功能

> 此函数不会捕获用户错误。如果输入在语法上无效，`SyntaxError`则会引发 a。如果评估期间出现错误，可能会引发其他异常。
> 
> 考虑将该`raw_input()`功能用于用户的一般输入。

所以只需使用`raw_input()`，一切正常

# java - Ext.Store 一次发送多个数据

> ID：15400193
> 
> 赞同：0
> 
> 时间：2013-03-14T02:36:33.573
> 
> 标签：java, javascript, rest, jackson, extjs4.1

我在一个事务中创建一个一对多的表单。我真的需要完全创建记录，或者根本不创建。如果其中一个数据不符合要求，我已经使用 java 实现了一个回滚代码来回滚所有操作。接口使用 extjs，我与 Jackson 有 REST 接口。

问题是，ExtJS 4 以特定形式将所有内容连同所有详细记录一起发送到 URL 的最佳方式是什么？尽管我做了任何事情，Ext.Store 似乎都一一发送数据。

好吧，简而言之，我需要 Ext.Store 将这样的原始内容与 application/json 内容一起发布：

```
{
    ID： ''，
    派对：3，
    机器：'x1'，
    产品：'pr001'，
    运行时间：12，
    材料： [{
        项目：'rm001'，
        数量：'39.01'，
        对齐：'9.930'
    }, {
        项目：'rm002'，
        数量：'20.03',
        对齐：'9.0234'
    }]
}

```

问题是，子存储总是在输入数据时发送数据，当我将 autoSync 设置为 false 时，它​​仍然会一一发送，而不是通过父存储一次发送所有内容。

任何示例代码？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T20:30:24.267

我这样做的方式是通过 xml，但想法应该是相同的，我的父存储包含一个序列化函数，它看起来像这样

```
serialize: function(){
     var store = this;
     var xml = [];
     store.each(function(record){
        xml.push('id:'+record.get(id))
        xml.push('party:'+record.get(party))
        record.materials().each(function(materials_rec){
           xml.push('item:'+materials_rec.get(item));
            ...                 
        });
     });
     return xml.join('');
} 
```

所以我从控制器调用这个函数并提交一个 ajax 请求，该请求将包含父存储和子存储的所有记录

# jquery-tools - 使用传单markercluster插件时在单个标记上触发点击事件

> ID：15400200
> 
> 赞同：3
> 
> 时间：2013-03-14T02:37:22.053
> 
> 标签：jquery-tools, flowplayer, leaflet

我的网站包含一个带有 leaflet.markerclusters 插件的 Leaflet 地图。我还使用 Flowplayer 播放使用选择器 ID“#video1”在 JQuery 工具覆盖中打开的视频。

目前，当我点击地图上的任何标记时，它会在叠加层中触发我的测试视频。我的目标是为集群中的每个单独的标记创建一个唯一的点击事件。最终，我希望每个标记都有一个点击事件，该事件会触发该标记独有的视频。

我是一个初学者，到目前为止，使用这些有据可查的库一直做得很好。但是，我没有能力弥补目前的差距。有人可以给我推动正确的方向吗？下面是我的 JS Fiddle 的链接。我的问题从 JavaScript 第 2098 行开始。

```
 var markers = new L.MarkerClusterGroup();

var addressPoints = [
    [40.634902, -73.965054, "Video1"],
    [40.660897, -73.961082, "Video2"],
    [40.693353, -73.970413, "Video3"],
    [40.693289, -73.966289, "Video4"],
    [40.68973, -73.971007, "Video5"],
    [40.718423, -73.957428, "Video6"],
    [40.71817, -73.956918, "Video7"],
    [40.681427, -73.993959, "Video8"]
];

for (var i = 0; i < addressPoints.length; i++) {
    var a = addressPoints[i];
    var title = a[2];
    var marker = new L.Marker(new L.LatLng(a[0], a[1]), {
        title: title
    });
    marker.bindPopup(title);
    markers.addLayer(marker);
}

map.addLayer(markers);

//assign video div ID to overlay
$('#video1').overlay({
    load: false,
    top: "center",
    left: "center"
});

//bind marker click event to overylay
 markers.on('click', function () {
    $("#video1").data("overlay").load();
}); 
```

谢谢你，乔伊

[http://jsfiddle.net/Joey84/nM458/26/](http://jsfiddle.net/Joey84/nM458/26/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T16:43:42.900

`markers.on("click"...`使用该功能，您正朝着正确的方向前进。您只需要进行一些编辑。正如您将事件侦听器添加到整个“标记”层一样，您可以将其添加到 for 循环中的各个标记中。

```
...

for (var i = 0; i < addressPoints.length; i++) {
    var a = addressPoints[i];
    var title = a[2];
    var marker = new L.Marker(new L.LatLng(a[0], a[1]), {
        title: title
    });
    if (title=="Video1") {
        marker.on('click', function () {
            $("#video1").data("overlay").load();
        });
    }
    marker.bindPopup(title);

    markers.addLayer(marker);
}
... 
```

同样 - 可能是更好的解决方案 - 您可以`on("click"...`通过将变量传递给函数来访问您在当前使用的标记中单击的详细信息。如果您有多个视频并且不想在创建标记时检查 if 语句，这将很有用。

```
 markers.on('click', function (d) {
       // Grab marker title and make it look like an ID
       var marker_title = "#" + d.layer.options.title.toLowerCase();
       // Make sure the jQuery object exists
       if ( $(marker_title) ){
           // Call up the video.
           $(marker_title).data("overlay").load();
       }
   }); 
```

请注意，我之所以使用`toLowerCase()`您的数据，是因为您的数据标题大写，视频 ID 全部小写。

这是在行动：http: [//jsfiddle.net/nM458/44/](http://jsfiddle.net/nM458/44/)

# html - 如何设置滚动高度？

> ID：15400205
> 
> 赞同：1
> 
> 时间：2013-03-14T02:37:50.093
> 
> 标签：html, css, height

```
+-------------+      +---------------------------------+
|             |      |                                 |
|     1       |      |                                 |
| left-nav    |      |                                 |
|             |      |                                 |
+-------------+      |               3                 |
|             |      |                                 |
|             |      |                                 |
|     2       |      | very long contents here         |
|             |      | which causes to scroll          |
|   other     |      | vertical bar. Setting           |
| remaining   |      | this content to 100% height?    |
+-------------+      +---------------------------------+ 
```

什么是身高：100%；实际上？它是应用于页面窗口还是直到滚动结束？我有以下html...

```
<div id="wrapper">
<div id="left-nav">
<!--contents of 1-->
</div>
<div id="yourad">
<!--contents of 2--->
</div>
<div id="main-contents">
<!--contents of 3-->
</div>
</div> 
```

我的CSS如下....

```
#wrapper{position: relative; width: 1007px; margin: 0 auto;}
#left-nav{width: 329px; height: 100%; background: grey;float: left;}
#yourad{height: 100%; background: blue;}
#main-contents{margin-left: 329px; padding: 10px; background: pink;} 
```

****笔记： ****

首先看我的演示以了解我的问题**[在这里](http://jsfiddle.net/Y7PhV/99/)**

1实际身高的内容：我不知道。

2实际身高的内容：我不知道。

3 实际身高的内容：我不知道。

因为我可能需要一些页面更少的内容和一些页面更多的内容。

我尝试过`height: 100%;` 在 html、body、wrapper、left-nav、yourad 中使用，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T03:36:57.900

高度 100% 应用于子元素时，将使元素拉伸到其父元素的完整高度。

例如，如果您设置 #wrapper {height:600px} 和 #content{height:100%}，内容 div 现在的高度将为 600px。

出现混淆是因为默认的溢出属性是：[溢出：可见 - 不会被包含元素的约束剪裁](http://www.w3schools.com/cssref/pr_pos_overflow.asp)。因此，如果不明确设置隐藏或滚动溢出，内容将流到容器外。

通过在父 div 上设置背景颜色，您可以在示例 ( [http://jsfiddle.net/RrmK3/ ) 中看到这一点。](http://jsfiddle.net/RrmK3/)

```
 <div id="wrapper" class="wrap">
    <div id="left-nav">
        <h4>Menu Title</h4>
        <ul>
           <li><a href="#">Menu Item</a></li>
        </ul>        
        <div id="yourad">
           You add is in your sidebar. It is not in your question :)
        </div>
    </div>
    <div id="contents">
         <h1>Indenting Code Keeps you Sane.</h1>
    </div>
</div>

#contents{ margin-left: 330px; margin-top: 5px; height:100%; }
#wrapper{position: relative; width: 1007px; margin: 0 auto; height:200px; background:pink;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T03:41:56.080

好的，这真的很难用书面形式解释，但我会试一试。

当您将身体设置为 100% 时，它将始终保持在开始时的高度，因此它将切断可见身体下方的任何东西。

这里的问题是你的一列必须是固定的高度，这样你的包装器才能知道如何翻译百分比。由于您不知道左导航的高度是多少，您可以作弊并使用 javascript 将包装器的高度设置为左导航的高度，并且内容文本将正确溢出..

话不多说，下面是你的做法：

`$('#wrapper').height($('#left-nav').height());`

[http://jsfiddle.net/Y7PhV/106/](http://jsfiddle.net/Y7PhV/106/)

# sql - Oracle10g中如何设置关系表的键

> ID：15400206
> 
> 赞同：0
> 
> 时间：2013-03-14T02:37:50.087
> 
> 标签：sql, oracle10g

请在判断之前记住，我不明白这就是我问这个问题的原因。我对过去发生的一些反对票感到沮丧。

我必须在 Oracle 10g 中创建一个数据库，并且我正在使用模板来创建一个新表。该数据库是关于一个虚构的 facebook 应用程序。

除其他外，它包括具有 3 个属性的关系“喜欢”，所有这些属性都应该是键：

```
like:

username: key
message_author: key
message_code: key 
```

正如我所说的那样，是两个实体用户和消息之间的关系。

我尝试将表设置为连接到其他表的 3 个外键，但 oracle 不会接受它。

我收到以下错误消息：

> 创建 FK like_FK2 失败 ORA-02270: 此列列表没有匹配的唯一键或主键
> 
> ORA-00942: 表或视图不存在
> 
> ORA-06510: PL/SQL: 未处理的用户定义异常

我想我的钥匙做错了，但我不明白它是什么

SQL 命令：

```
CREATE table "ΑΡΕΣΕΙ" (
    "ΟΝΟΜΑΧΡΗΣΤΗ"    VARCHAR2(30) NOT NULL,
    "ΣΥΓΦΕΑΣ_ΜΗΝΤΟΣ" VARCHAR2(30) NOT NULL,
    "ΚΩΔΜΗΝΥΜΑΤΟΣ"   NUMBER NOT NULL
)
/

ALTER TABLE "ΑΡΕΣΕΙ" ADD CONSTRAINT "ΑΡΕΣΕΙ_FK" 
    FOREIGN KEY ("ΟΝΟΜΑΧΡΗΣΤΗ")
    REFERENCES "ΧΡΗΣΤΗΣ" ("ΟΝΟΜΑΧΡΗΣΤΗ")

/
ALTER TABLE "ΑΡΕΣΕΙ" ADD CONSTRAINT "ΑΡΕΣΕΙ_FK2" 
    FOREIGN KEY ("ΣΥΓΦΕΑΣ_ΜΗΝΤΟΣ")
    REFERENCES "ΜΗΝΥΜΑ" ("ΣΥΓΦΕΑΣ_ΜΗΝΤΟΣ")

/
ALTER TABLE "ΑΡΕΣΕΙ" ADD CONSTRAINT "ΑΡΕΣΕΙ_FK3" 
    FOREIGN KEY ("ΚΩΔΜΗΝΥΜΑΤΟΣ")
    REFERENCES "ΜΗΝΥΜΑ" ("ΚΩΔΜΗΝΥΜΑΤΟΣ")

/
alter table "ΑΡΕΣΕΙ" add
    constraint ΑΡΕΣΕΙ_UK1
    unique ("ΚΩΔΜΗΝΥΜΑΤΟΣ")
/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T03:42:28.140

在指定任何关系约束和其他约束`UNIQUE`之前，请确保在编码和运行这些语句之前表存在。我在回答中稍微编辑了您的代码：

```
CREATE table "ΑΡΕΣΕΙ" (
    "ΟΝΟΜΑΧΡΗΣΤΗ"    VARCHAR2(30) NOT NULL,
    "ΣΥΓΦΕΑΣ_ΜΗΝΤΟΣ" VARCHAR2(30) NOT NULL,
    "ΚΩΔΜΗΝΥΜΑΤΟΣ"   NUMBER(10,2) NOT NULL -- PRECISION AND SCALE MUST BE MENTIONED FOR NUMBER DATA TYPE
)
/

CREATE table "ΜΗΝΥΜΑ" (
     "ΣΥΓΦΕΑΣ_ΜΗΝΤΟΣ"  VARCHAR2(30) -- data types are recommended to be the same
     "ΚΩΔΜΗΝΥΜΑΤΟΣ"    NUMBER(10,2)
     -- Other columns go here
)
/

CREATE TABLE "ΧΡΗΣΤΗΣ" (
     "ΟΝΟΜΑΧΡΗΣΤΗ"     VARCHAR(30)
     -- Other columns go here
)
/

-- After you create all the tables, you can code the alter table statements
-- that would add all your necessary constraints.

ALTER TABLE "ΑΡΕΣΕΙ" ADD CONSTRAINT "ΑΡΕΣΕΙ_FK" 
    FOREIGN KEY ("ΟΝΟΜΑΧΡΗΣΤΗ")
    REFERENCES "ΧΡΗΣΤΗΣ" ("ΟΝΟΜΑΧΡΗΣΤΗ")
/

ALTER TABLE "ΑΡΕΣΕΙ" ADD CONSTRAINT "ΑΡΕΣΕΙ_FK2" 
    FOREIGN KEY ("ΣΥΓΦΕΑΣ_ΜΗΝΤΟΣ")
    REFERENCES "ΜΗΝΥΜΑ" ("ΣΥΓΦΕΑΣ_ΜΗΝΤΟΣ")
/

ALTER TABLE "ΑΡΕΣΕΙ" ADD CONSTRAINT "ΑΡΕΣΕΙ_FK3" 
    FOREIGN KEY ("ΚΩΔΜΗΝΥΜΑΤΟΣ")
    REFERENCES "ΜΗΝΥΜΑ" ("ΚΩΔΜΗΝΥΜΑΤΟΣ")
/

alter table "ΑΡΕΣΕΙ" add
    constraint ΑΡΕΣΕΙ_UK1
    unique ("ΚΩΔΜΗΝΥΜΑΤΟΣ")
/ 
```

另外，请记住，有一个称为约束`PRIMARY KEY`，它允许您同时在列上放置唯一且非空的约束。我建议您阅读 Oracle 在 docs.oracle.com 上提供的文档以供参考。

另外，我希望您以 ASCII（az、AZ、0-9）字符提及所有表名和列名。Unicode 字符作为对象标识符可能受支持，但难以维护。

# java - 编写一个程序，确定两组数字是否可以以它们的和相等的方式组成

> ID：15400208
> 
> 赞同：0
> 
> 时间：2013-03-14T02:37:56.407
> 
> 标签：java, algorithm

例子：

输入：3、6、3 输出：真（因为 3 + 3 = 6）

输入：3、2、6、4 输出：False（因为没有组合会导致相等）

输入：4、7、3、6 输出：真（因为 4 + 6 = 7 + 3）

你们能给我一个关于如何编码的想法吗？我已经开始学习如何编码，但我对如何添加数字并比较它们感到困惑

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T02:42:56.260

我将解释一个人如何在不知道魔术词（如“分区问题”、“动态编程”等）的情况下解决这个问题，以查阅一些大书的答案（如维基百科）。

如果您从输入中取出一个尚未使用的最大数字的实例并将其分配给您的两组之一，那么您已将问题简化为同一问题的较小实例（广义版本）。

广义的问题是，您能否将输入数字分成两组，使得两组总和之间的差值是一个特定的非负整数？

假设我们的输入数字是 4, 3, 2, 1，我们需要创建两个组，使组和之间的差为 0。

我们将 4 分配给其中一个组，在这种特殊情况下，哪个组都没有关系。

现在我们剩下的输入数字是 3, 2, 1，忽略我们已经处理过的 4，我们需要将这三个数字分成两组，这样两组之和之间的差是 4。（这将平衡我们通过将 4 分配给其中一个组来创建两个组之间的差异。）正如所承诺的，这是原始问题类型的一个较小的实例。

困难在于，有时，例如 5、5、4、3、3（维基百科“分区问题”中的示例），下一个数字需要进入哪个组并不明显。如果你跟踪你所做的事情，那么当你发现你最近的尝试没有奏效时，你可以回来（“回溯”）并尝试另一种方式。

```
5, 5, 4, 3, 3 {} {}
   5, 4, 3, 3 {5} {}
      4, 3, 3 {5} {5}
         3, 3 {5, 4} {5}
            3 {5, 4} {5, 3}
              {5, 4} {5, 3, 3} NO - backtrack
              {5, 4, 3} {5, 3} NO - backtrack
            3 {5, 4, 3} {5}
              {5, 4, 3} {5, 3} NO - already tried - backtrack
              {5, 4, 3, 3} {3} NO - backtrack
         3, 3 {5} {5, 4} NO - symmetric to what we already tried - backtrack
      4, 3, 3 {5, 5} {}
         3, 3 {5, 5} {4}
            3 {5, 5} {4, 3}
              {5, 5} {4, 3, 3} YES 
```

我们能很快得到答案吗？好吧，这不是被问到的问题，但鉴于回溯的复杂性，问这个问题是很自然的。答案是，不，即使我们有世界历史上最聪明的人为我们工作。从来没有人找到一种方法，无论我们给出什么样的问题实例，都能保证快速执行。也许我们可以很好地处理这些问题的许多实例，但总的来说，平均而言，做这种事情的程序注定会很慢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T03:15:11.087

这就是划分问题，它是 NP 完全的。尽管如此，您仍然可以使用动态编程解决方案。请参阅维基百科文章。

[http://en.wikipedia.org/wiki/Partition_problem](http://en.wikipedia.org/wiki/Partition_problem)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T04:53:29.790

```
public class Weirdie {
private boolean calculate(int[] array) {
    boolean match = false;
    List<Integer> list = new ArrayList<Integer>();
    int length = array.length;
    for(int i=0;i<length;i++) {
        for(int j=i+1;j<length;j++) {
            int sum = array[i] + array[j];
            if(list.contains(sum)) {
                match = true;
                break;
            } else {
                list.add(sum);
            }
        }
        if(match) {
            break;
        }
    }
    return match;
}

/**
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub
    int[] array = { 3, 6, 3, 4, 8};
    int[] array2 = { 3, 2, 6, 4};
    int[] array3 = { 4, 7, 3, 6 };
    Weirdie  w = new Weirdie();
    System.out.println(w.calculate(array));
    System.out.println(w.calculate(array2));
    System.out.println(w.calculate(array3));
} 
```

}

实际上我仍然对您的要求感到困惑。正如您的描述，数字组 1 {3,6,3} 将输出 true 因为 3+3=6。而您说数字组 2 {3,2,6,4} 将输出错误，但显然 2+4=6 也符合您的条件。对于您的第三个数字组，我认为数字组 1 输出 true 的原因是 3+6=6+3。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T18:52:19.423

好的！只使用蛮力计算，我检查每一个可能的选项

```
int[] numbersArray = new int[10];
int sum = 0;

for(int j = 0; j < numbersArray.lenght;j++) // sum
   sum += numbersArray[j];

for(int i = 0; i < numbersArray.lenght;i++)
{
   int numChecking =  numbersArray[i]; // right half .. 

   if((sum-numChecking) == numChecking)
     return true;

}
return false; 
```

// 我还没有测试过，但是，这将检查所有可能性的 1 值..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T06:51:47.877

要确定一个数组是否可以分成两个相等的和数组，我们也可以找到一个子集，它具有整个数组之和的一半。

例如：输入：4、7、3、6

我们应该找到一个总和 == 10 的子集，这是一个简单的 DP 概率。

公共静态布尔 isSubset(int[] a, int sum, int n) {

```
 if(sum == 0)
    return true;
  if(n<0)
    return false;
 return isSubset(a, sum-a[n], n-1) || isSubset(a, sum, n-1);
} 
```

# web-scraping - Scrapy - 解析给定域的所有子页面

> ID：15400215
> 
> 赞同：5
> 
> 时间：2013-03-14T02:38:36.003
> 
> 标签：web-scraping, scrapy, web-crawler

我想使用scrapy解析kickstarter.com项目，但不知道如何制作我没有在start_urls下明确指定的蜘蛛搜索项目。我已经弄清楚了scrapy代码的第一部分（我可以从一个网站提取必要的信息），但我无法让它为域kickstarter.com/projects下的所有项目执行此操作。

根据我的阅读，我相信解析是可能的（1）使用起始页面（kickstarter.com/projects）上的链接，（2）使用来自一个项目页面的链接跳转到另一个项目，以及（3）使用用于定位要解析的网页的站点地图（我认为 kickstarter.com 没有）。

我已经花了几个小时尝试这些方法中的每一种，但我一无所获。

我使用了scrapy教程代码并以此为基础。

这是到目前为止有效的部分：

```
from scrapy import log
from scrapy.contrib.spiders import CrawlSpider   
from scrapy.selector import HtmlXPathSelector  

from tutorial.items import kickstarteritem

class kickstarter(CrawlSpider):
    name = 'kickstarter'
    allowed_domains = ['kickstarter.com']    
    start_urls = ["http://www.kickstarter.com/projects/brucegoldwell/dragon-keepers-book-iv-fantasy-mystery-magic"]

    def parse(self, response):
        x = HtmlXPathSelector(response)

        item = kickstarteritem()
        item['url'] = response.url
        item['name'] = x.select("//div[@class='NS-project_-running_board']/h2[@id='title']/a/text()").extract()
        item['launched'] = x.select("//li[@class='posted']/text()").extract()
        item['ended'] = x.select("//li[@class='ends']/text()").extract()
        item['backers'] = x.select("//span[@class='count']/data[@data-format='number']/@data-value").extract()
        item['pledge'] = x.select("//div[@class='num']/@data-pledged").extract()
        item['goal'] = x.select("//div[@class='num']/@data-goal").extract()
        return item 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T02:59:35.290

由于您是子类化`CrawlSpider`，*因此不要覆盖`parse`*. `CrawlSpider`的链接爬取逻辑包含在 中`parse`，这是您真正需要的。

至于爬行本身，这就是`rules`类属性的用途。我还没有测试过，但它应该可以工作：

```
from scrapy.contrib.spiders import CrawlSpider
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
from scrapy.contrib.loader import XPathItemLoader
from scrapy.selector import HtmlXPathSelector

from tutorial.items import kickstarteritem

class kickstarter(CrawlSpider):
    name = 'kickstarter'
    allowed_domains = ['kickstarter.com']    
    start_urls = ['http://www.kickstarter.com/discover/recently-launched']

    rules = (
        Rule(
            SgmlLinkExtractor(allow=r'\?page=\d+'),
            follow=True
        ),
        Rule(
            SgmlLinkExtractor(allow=r'/projects/'),
            callback='parse_item'
        )
    )

    def parse_item(self, response):
        xpath = HtmlXPathSelector(response)
        loader = XPathItemLoader(item=kickstarteritem(), response=response)

        loader.add_value('url', response.url)
        loader.add_xpath('name', '//div[@class="NS-project_-running_board"]/h2[@id="title"]/a/text()')
        loader.add_xpath('launched', '//li[@class="posted"]/text()')
        loader.add_xpath('ended', '//li[@class="ends"]/text()')
        loader.add_xpath('backers', '//span[@class="count"]/data[@data-format="number"]/@data-value')
        loader.add_xpath('pledge', '//div[@class="num"]/@data-pledged')
        loader.add_xpath('goal', '//div[@class="num"]/@data-goal')

        yield loader.load_item() 
```

蜘蛛爬取最近启动的项目的页面。

另外，使用`yield`代替`return`. 最好将蜘蛛的输出保持为生成器，它可以让您产生多个项目/请求，而无需制作列表来保存它们。

# c++ - 如何删除 2D 矢量网格中的部分路径？

> ID：15400222
> 
> 赞同：0
> 
> 时间：2013-03-14T02:39:30.333
> 
> 标签：c++, algorithm, function, 2d-vector

我真的一直在为这个项目而苦苦挣扎。所以我有一个“网格”，也就是一个 2D 字符向量。79 个字符宽，20 个字符高。我创建了一些函数，它们基本上绘制了从网格的一个边缘到另一个边缘的路径。这些“路径”有点随机......我有一个随机生成器从 0-7 中选择一个 int 并使用我为其创建函数的路径的组合。所以.. 有几条路径/线穿过网格。

下一部分是在网格上的这些路径上放置矩形/正方形。经过数小时的挫折后，我得到了将这些矩形放置在路径上的程序。

下一部分让我迷失了，我不知道如何开始。我现在需要确定路径是否以某种方式将所有矩形连接在一起，但只有 1 或 2 条路径可能连接到一个矩形。因此，如果其中一个矩形没有触及路径，我需要调用该函数以使用路径和矩形重新生成一个新网格。

除了能够检查路径是否在 1 或 2 个地方接触矩形之外。我需要删除多余的路径字符。因此，如果路径未连接到另一个矩形或所需的路径，我需要删除该字符。

'#' 是路径，'.' 是矩形下面是我的程序现在显示的示例：

```
 #                  #                                                   
        #                  #                                                   
   ........                #         ##############                            
   ........                #         #            # ..........                 
   ........                #         #            ##..........############     
   ........###########     #         #              ..........           #     
###........###########################              ..........           #     
   ........          #     #                        ..........           #     
   ........          #################################                   #     
                     #     #                         #                   #     
                     #     #                         #                   #     
            ........ #     #                         #                   #     
            ........ #     #                      ########################     
            ........ #     #######                #  ........                  
            ........ #           #                #  ........                  
############........##           #                #  ........                  
            ........             ##################  ........##################
            ........                                 ........                  
            ........                                 ........ 
```

注意额外的“#”标记以及它们中的一些是如何无用的？从技术上讲，我不必删除路径分叉的位置并与路径重新连接。从技术上讲，我可以让它们接触超过 1 个位置，因为我将为矩形添加边框.. 只有 1 或 2 个点直接将“#”连接到“。” （现在不担心）它们的厚度不能超过 1 '#' 和以前的要求。在我以某种方式弄清楚如何删除我不需要的那些之后，它应该是这样的：

```
 ........                          ##############                            
 ........                          #            # ..........                 
 ........                          #            ##..........     
 ........###########               #              ..........                
 ........          #################              ..........                
 ........          #     #                        ..........                
 ........          #################################                        
                   #     #                         #                        
                   #     #                         #                        
          ........ #     #                         #                        
          ........ #     #                      ####     
          ........ #     #######                #  ........                  
          ........ #           #                #  ........                  
          ........##           #                #  ........                  
          ........             ##################  ........
          ........                                 ........                  
          ........                                 ........ 
```

我得到的最接近的是检测路径从某个位置的哪个方向。但我不知道如何使用它来删除“#”或检查岛矩形的方法。

请帮助我:(我不知道该怎么做！如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T02:44:58.913

这不完全是您所要求的，但我认为它可以为您提供很长的帮助，[对于类似 Rogue 的 2D 地牢生成有哪些理想的算法？](https://gamedev.stackexchange.com/questions/2663/what-are-some-ideal-algorithms-for-rogue-like-2d-dungeon-generation), [Dungeon Generation](http://pcg.wikidot.com/pcg-algorithm:dungeon-generation)和这个[Dungeon-Building Algorithm](http://roguebasin.roguelikedevelopment.org/index.php?title=Dungeon-Building_Algorithm)甚至还有 C++ 代码示例。还有一些`rouge-like`游戏代码也必须做同样的事情。

# r - R中没有for循环的矩阵和向量之间的计算

> ID：15400223
> 
> 赞同：2
> 
> 时间：2013-03-14T02:39:32.430
> 
> 标签：r

假设我有一个矩阵和一个向量：

```
set.seed(999)
mat = matrix(round(rnorm(24,4,9)),3,8)
mat
     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]
[1,]    1    6  -13   -6   12   -8   12   10
[2,]   -8    2   -7   16    6    5  -15    1
[3,]   11   -1   -5    5   13    5   -7    7

vec = c(1,5, 4,4, 2,1, 4,8) 
```

现在我希望计算，对于每一行`mat`，该行与`vec`以两个元素为“组”的 之间的距离。例如，我想拥有

```
d11 = |mat[1,1:2] - vec[1:2]|
d12 = |mat[1,3:4] - vec[3:4]|
d13 = |mat[1,5:6] - vec[5:6]|
d14 = |mat[1,7:8] - vec[7:8]| 
```

对其余行`mat`（即第 2 行和第 3 行）执行相同的操作`d21,...,d24, d31,...,d34`。

我希望这个任务可以在不使用 for 循环的情况下完成。是否有任何功能可直接用于此目标？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T02:46:24.610

我认为这有效：

```
s1 <- sweep(mat,2,vec,"-")  ## subtract vec
s2 <- s1^2                  ## square
s3 <- cbind(s2[col(s2) %% 2 ==1],s2[col(s2) %% 2 ==0])  ## stack
s4 <- rowSums(s3)
s5 <- matrix(s4,nrow=3)  ## restack
##      [,1] [,2] [,3] [,4]
## [1,]    1  389  181   68
## [2,]   90  265   32  410
## [3,]  136   82  137  122 
```

可能有更好的方法来执行第 3 步，但其余的似乎接近最佳。（您可能会稍微加快第 1 步`t(t(mat)-vec)`，但我更喜欢`sweep`可读性。）

# php - 如何在 xdebug 中禁用 var_dump()？

> ID：15400224
> 
> 赞同：10
> 
> 时间：2013-03-14T02:39:34.260
> 
> 标签：php, xdebug

`var_dump()`与 Xdebug 一起使用时是否可以在 PHP 应用程序中关闭？我用了几个`var_dump()`打破页面的。我想要一些功能或方式，以便可以关闭/打开`var_dump()`输出，因此可以在没有转储数据的情况下查看整个页面结构以进行调试。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2014-07-09T07:34:04.633

把这个放在`php.ini`设置里

```
xdebug.overload_var_dump=0 
```

否则，您也可以在运行时设置它：

```
ini_set("xdebug.overload_var_dump", "off"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-13T21:08:50.010

如果您根本不希望 var_dump 输出任何内容（无论 xdebug 是什么）

```
// here var_dump is enabled
$varDumpEnabled = !true;
assert($varDumpEnabled, var_dump('whatever')); 
```

简而言之..当第一个参数为时，评估var_dump..当第一个参数为真`assert1`时，不评估var_dump。`false``assert`

# html - 如何通过包装将内容集中在网站上？

> ID：15400229
> 
> 赞同：-1
> 
> 时间：2013-03-14T02:40:03.387
> 
> 标签：html, css, center

我有一个正在工作的网站，我正在努力将我的所有内容集中起来。为什么标题不居中？

我尝试了通常的margin-left和right方法：auto; 但它没有用，所以我使用它做了以下操作：

```
<div class="header-wrapper">

  <div id="wrap">
    <!---start wrap 960px--->

    <h1>TITLE</h1>

    <div class="box-full">

      <h2>Our Cloud Development</h2>
      <p>Welcome to company Feel free to follow us on twitter. We are a new company, focused on business development.</p>
      <div class="button">
        <a href="class=" learnmore ">Learn More</a>
    </div>

    </div>
    </div>
    </div> <!---end wrap 960px--->
```

但它正在向右推。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T02:47:49.543

您已为`.box-full` `<div>`. 因为您还指定了填充，所以您将超出该 960px 包装。

将宽度更改为：960-30-30 = 900：

```
.box-full {
    background: none repeat scroll 0 0 #F2F2F2;
    border: 1px solid #CCCCCC;
    border-radius: 7px 7px 7px 7px;
    clear: both;
    left: 0;
    margin: 1cm auto 0;
    padding: 30px;
    position: relative;
    text-align: center;
    width: 900px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T02:54:21.240

在您的网站上，该`div#wrap`元素实际上是 900 像素宽，而不是 960 像素。考虑到这一点，那个 div 实际上也是居中的。使它看起来不*居中*的原因是`div.box-full`元素的宽度为 1022px (960 + 30(padding-left) + 30(padding-right) + 2(border left and right)) = 1022。取宽度该`.box-full`元素并将其设置为**898px**，看看是否使它看起来正确！

# node.js - 无法在 Windows 7 上安装 socket.io

> ID：15400230
> 
> 赞同：17
> 
> 时间：2013-03-14T02:40:04.077
> 
> 标签：node.js, windows-7, socket.io, npm, windows-7-x64

我是 Node.js 和 NPM 的新手。我正在使用 Node v0.10.0，当我运行 npm install socket.io 命令时，我收到以下错误：

```
C:\Users\USER\AppData\Roaming\npm\node_modules\socket.io\node_modules\socket.io-
client\node_modules\ws>node "C:\Users\USER\AppData\Roaming\npm\node_modules\npm\
bin\node-gyp-bin\\..\..\node_modules\node-gyp\bin\node-gyp.js" rebuild
C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppBuild.targets(29
7,5): warning MSB8003: Could not find WindowsSDKDir variable from the registry.
TargetFrameworkVersion or PlatformToolset may be set to an invalid version nu
mber. [C:\Users\USER\AppData\Roaming\npm\node_modules\socket.io\node_modules\so
cket.io-client\node_modules\ws\build\bufferutil.vcxproj]
bufferutil.cc
c:\users\user\.node-gyp\0.10.0\deps\uv\include\uv-private/uv-win.h(32): fatal e
rror C1083: Cannot open include file: 'winsock2.h': No such file or directory [
C:\Users\USER\AppData\Roaming\npm\node_modules\socket.io\node_modules\socket.io
-client\node_modules\ws\build\bufferutil.vcxproj] 
```

我想这是一个构建错误，所以我花了很多时间谷歌搜索和更新我的 Windows SDK、Visual Studio、.Net Framework 等。在一种或另一种形式中，我得到了上述错误。根据此链接[https://connect.microsoft.com/VisualStudio/feedback/details/713415/erroneous-windows-sdk-x64-compilation-warning](https://connect.microsoft.com/VisualStudio/feedback/details/713415/erroneous-windows-sdk-x64-compilation-warning)警告可能是错误的，因为我在 x64 机器上。我确实看到 winsock2.h 位于 C:\Program Files\Microsoft SDKs\Windows\v7.1\Include 并已将其包含在我的路径中。我的路径包含以下内容：

```
C:\Program Files\nodejs\;
C:\Program Files (x86)\Microsoft Visual Studio 8\VC\vcpackages;
C:\Program Files\Microsoft Windows Performance Toolkit\;
C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include;
C:\Program Files\Microsoft SDKs\Windows\v7.1\Lib;
C:\Program Files\Microsoft SDKs\Windows\v7.1\Include;
C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include;
C:\Program Files\Debugging Tools for Windows (x64)\winext\manifest;
C:\Program Files\Microsoft SDKs\Windows\v7.1\Lib\x64; 
```

与此路径相同的错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-05-25T20:10:41.840

我在尝试 npm install socket.io 时搜索了一个类似的问题

从这里[https://github.com/LearnBoost/socket.io/issues/1151#issuecomment-16015421](https://github.com/LearnBoost/socket.io/issues/1151#issuecomment-16015421)

我最终设置了这个环境变量：

```
set GYP_MSVS_VERSION=2013 
```

这是在安装 Windows SP1（准备安装程序）之后，然后是 SP1 安装程序，然后是 Windows 更新的 101 更新，然后是 VS 2013 Express。

真的很容易：-/

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-10-09T17:53:42.173

Windows 7 x64 上的节点安装存在问题。基本上，在使用 msbuild 构建解决方案时，您必须明确指定平台工具集。这是一个对我有用的解决方案：在您的终端运行中：

> 调用“C:\Program Files\Microsoft SDKs\Windows\v7.1\bin\Setenv.cmd”/Release /x64

然后运行

> npm 安装 socket.io

更多信息[在这里](https://github.com/node-xmpp/node-expat/issues/57)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-23T03:16:48.483

**因此**，尽管我对以管理员身份运行 shell 发表了评论，但我在另一台*仍然*以管理员身份运行 shell 的机器上遇到了这个问题。

（为了搜索引擎的利益，下面是一个非常完整的错误摘录）

这些错误似乎与`node-gyp`我无法独立安装有关，并[找到了一些有用的注释](https://github.com/TooTallNate/node-gyp)：

你需要：

*   Microsoft Visual Studio C++ 2010（Express 版本运行良好）
    *   我确实已经有了这个
*   对于节点和本机模块的 64 位构建，您还需要[Windows 7 64 位 SDK](http://www.microsoft.com/en-us/download/details.aspx?id=8279)
    *   这个安装一直失败，然后我发现
    *   _如果您拥有比 Visual C++ 2010 x86 Redistributable 版本 10.0.30319 更新的 vcredist_x86.exe，则不会安装 SDK 7.1。_[源](http://social.msdn.microsoft.com/Forums/en-US/8f3350f9-0b47-40ae-b070-f2ccbf041875/windows-7-sdk-installation-failure?forum=windowssdk)

* * *

*   我卸载了 10.0。[东西 > 30319]
*   安装了 SDK 7.1
*   然后能够`npm i -g node-inspector`没有问题（`socket.io`是一个依赖）

* * *

```
C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppBuild.targets(296,5): warning MSB800
3: Could not find VCInstallDir variable from the registry.  TargetFrameworkVersion or PlatformTools
et may be set to an invalid version number. [C:\Users\Michael Paulukonis\AppData\Roaming\npm\node_m
odules\socket.io\node_modules\socket.io-client\node_modules\ws\build\bufferutil.vcxproj]

  bufferutil.cc

c:\users\michael paulukonis\.node-gyp\0.10.5\deps\v8\include\v8stdint.h(33): fatal error C1083: Can
not open include file: 'stddef.h': No such file or directory [C:\Users\Michael Paulukonis\AppData\R
oaming\npm\node_modules\socket.io\node_modules\socket.io-client\node_modules\ws\build\bufferutil.vc
xproj]

C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppBuild.targets(296,5): warning MSB800
3: Could not find VCInstallDir variable from the registry.  TargetFrameworkVersion or PlatformTools
et may be set to an invalid version number. [C:\Users\Michael Paulukonis\AppData\Roaming\npm\node_m
odules\socket.io\node_modules\socket.io-client\node_modules\ws\build\validation.vcxproj]

  validation.cc

c:\users\michael paulukonis\.node-gyp\0.10.5\deps\v8\include\v8stdint.h(33): fatal error C1083: Can
not open include file: 'stddef.h': No such file or directory [C:\Users\Michael Paulukonis\AppData\R
oaming\npm\node_modules\socket.io\node_modules\socket.io-client\node_modules\ws\build\validation.vc
xproj] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-12T14:41:37.020

您是否以足够的权限启动 CMD 提示符？我偶尔遇到了 npm install 的问题。

如果是这种情况，请以管理员身份运行 CMD。

# java - 在客户端程序中播放 mp3 文件

> ID：15400231
> 
> 赞同：1
> 
> 时间：2013-03-14T02:40:12.730
> 
> 标签：java, ftp, mp3, javasound

我正在尝试将 mp3 文件从服务器发送到客户端并播放它，但我不知道该怎么做。我一直在查看 Media 和 Media Player java 类，但仍然不明白它们是如何工作的，也不知道在这种情况下使用它是否正确，因为我不希望在程序完成后将音乐存储在计算机上关闭。这是我的第一个问题，如果有任何错误，我很抱歉，但我会学习的。

服务器代码片段：

```
if(number == songNumber)
{
  File song = files[i];

  byte[] bytearray  = new byte [(int)song.length()];
  FileInputStream fin = new FileInputStream(song);
  BufferedInputStream bin = new BufferedInputStream(fin);

  bin.read(bytearray,0,bytearray.length);
  OutputStream os = socket.getOutputStream();
  System.out.println("Sending Files...");

  os.write(bytearray,0,bytearray.length);
  os.flush();
  socket.close();
  bin.close();
  System.out.println("File transfer complete");
} 
```

客户端代码片段：

```
InputStream is = socket.getInputStream();
FileOutputStream fos = new FileOutputStream("copy.doc");
BufferedOutputStream bos = new BufferedOutputStream(fos);

byte [] bytearray  = new byte [filesize];
bytesRead = is.read(bytearray,0,bytearray.length);
currentTot = bytesRead;

do 
{
  bytesRead = is.read(bytearray, currentTot, (bytearray.length-currentTot));
  if(bytesRead >= 0) currentTot += bytesRead;
} 
while(bytesRead > -1);
{
  bos.write(bytearray, 0 , currentTot);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T03:02:39.110

Java 7 定义了一些不错的类，所以从[这里开始](https://stackoverflow.com/questions/6045384/playing-mp3-and-wav-in-java)

```
String bip = "bip.mp3";
Media hit = new Media(bip);
MediaPlayer mediaPlayer = new MediaPlayer(hit);
mediaPlayer.play(); 
```

如果您需要非 Java 7 方法，请按照 Andrew 的说明操作并使用 MP3 SPI。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-14T02:50:54.363

```
import sun.audio.*;
import java.io.*;

public class playsound{
  public static void main(String[] args){
    try {
      FileInputStream fileau=new FileInputStream("D:/01.mid" );
      AudioStream as=new AudioStream(fileau);
      AudioPlayer.player.start(as);
    }
    catch (Exception e) {System.out.println("failed！");}
  }
} 
```

希望这可以帮到你。

# java - 在 IN 子句中具有数千个参数的 PreparedStatement

> ID：15400243
> 
> 赞同：6
> 
> 时间：2013-03-14T02:41:55.863
> 
> 标签：java, sql, sql-server, sql-server-2005, jdbc

我确实从这个 Question [PreparedStatement IN 子句替代方案中阅读了解决方案？](https://stackoverflow.com/questions/178479/preparedstatement-in-clause-alternatives). 但在我的例子中，我在 In 子句中有大约 5000 个参数，它会导致 java.sql.SQLException: Prepared or callable statement has more than 2000 parameter marker。

我正在使用类似的 SQL

```
String sql = "select * from project in " + projectIds.toString() 
```

`projectIds`是一个类似于 "(1,2,3,4....)" 的 StringBuilder 但代码安全报告说它可能会导致 sql 注入。所以我必须使用 ? 占位符来避免它。

我试着用

```
String sql = "select * from project where charindex(','+convert(varchar(max),id)+',', ?)>0";
statement.setString(1,projectIds.toString);//projectIds like ",1,2,3,4,".. 
```

但它最终会出现不正确的语法错误。

有什么解决办法？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T02:57:22.023

Hogan 建议使用桌子代替是一个很好的建议。我唯一要更改的是查询，因为`JOIN`为 tablelist 中的每个值生成一行。相反（猜测你的列名）

```
select * from project 
where projectID in (select id from tablelist) 
```

或者

```
where exists (select 1 from tablelist where id = projectID) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T02:46:46.970

最好的方法是不使用 in 语句。相反，您应该将要检查的所有值放在一个表中并使用连接。

例如，如果您有一个包含一列（称为 id）的表，其中包含列表，那么您的语句将如下所示：

```
 select *
 from project
 join tablelist on project.project = tablelist.id 
```

这会快得多，因为 SQL 服务器非常擅长快速执行连接。

* * *

您也可以使用 CTE 执行此操作。例如：

```
WITH tablelist as
(
   SELECT 1 AS id
   UNION ALL
   SELECT 3
   UNION ALL
   SELECT 4
   UNION ALL
   SELECT 5
   UNION ALL
   SELECT 6
   UNION ALL
   SELECT 7
   // More if needed
)
select *
from project
join tablelist on project.project = tablelist.id 
```

这可以作为一个大查询发送并且可以工作。您唯一的限制是查询的最大大小，我不知道是否存在这样的限制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T03:52:25.167

`select * from project in " + projectIds.toString()`

语法不正确，应该是这样的

```
select * from project where id in (" + projectIds + ")"; 
```

# php - PHP / WordPress

> ID：15400245
> 
> 赞同：0
> 
> 时间：2013-03-14T02:42:19.583
> 
> 标签：php, wordpress, navigation, pagination

我有一段 php 代码可以创建漂亮的分页，但是当永久链接设置为默认值 (page=?284) 而不是像帖子名称 (/post-name) 之类的东西时，分页按钮不起作用，只是继续加载第一页内容。

```
<?php
global $wp_query;   
$total = $wp_query->max_num_pages;
if($total > 1) {
if ( !$current_page = get_query_var('paged') ){$current_page = 1;}
$perm_structure = get_option('permalink_structure');
$format = empty($perm_structure) ? '&page=%#%' : 'page/%#%/';
$paginate_return_data = paginate_links(array(
'base' => get_pagenum_link(1) . '%_%',
'format' => $format,
'current' => $current_page,
'total' => $total,
'mid_size' => 4,
'type' => 'plain'
));
echo $paginate_return_data;
}
?> 
```

您能说出这段代码出了什么问题，只允许永久链接的帖子名称样式起作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-04T23:04:43.283

这可能有助于我查看 paginate_links 函数 [https://codex.wordpress.org/Function_Reference/paginate_links](https://codex.wordpress.org/Function_Reference/paginate_links)

总参数的默认值为 1。但是，如果我将 1 传递给函数，它会返回 null。

在下面的示例中，我传递了 2 并且 var_dump 显示返回了 2 个链接。因此，也许您需要添加一个检查以查看 $total 是否为 2 或更多。

```
$paginate_return_data = paginate_links( array(
// 'base' => '%_%',
'base' => get_pagenum_link(1) . '%_%',
'format' => $format ,
'current' => $current_page,
// 'total' => $total,
'total' => 2
 ) );

var_dump($paginate_return_data); 
```

# android - 当您使用 box2D 扩展时，andengine 中的游戏循环在哪里？

> ID：15400246
> 
> 赞同：1
> 
> 时间：2013-03-14T02:42:32.493
> 
> 标签：android, box2d, andengine, game-loop

当您使用 box2D 扩展时，andengine 中的游戏循环在哪里？[如果没有 box2d 扩展，则使用此](https://stackoverflow.com/questions/9863811/andengine-game-loop-where-is-it)方法找到游戏循环，但是当您使用 box2d 扩展时，该方法不起作用，因为您需要使用物理 `scene.registerUpdateHandler(physicsWorld);`

那么在哪里可以找到游戏循环呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:32:46.717

哎呀！可以通过使用问题中的链接准确找到它。原来问题实际上是该应用程序没有重新安装。我只是度过了糟糕的一天。

# shell - 从 bourne shell 中指定行号的文件中删除行

> ID：15400253
> 
> 赞同：11
> 
> 时间：2013-03-14T02:43:20.383
> 
> 标签：shell, unix, sed

我正在 Bourne Shell 中制作约会跟踪脚本，需要从文本文件中删除约会。如果我有行号，如何从不留空白的文件中删除一行？该文件如下所示：

```
1:19:2013:Saturday:16.00:20.30:Poker  
1:24:2013:Thursday:11.00:11.45:Project meeting  
1:24:2013:Thursday:14.00:15.10:CSS Meeting 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-14T02:46:53.787

要删除第 5 行，请执行以下操作：

```
sed -i '5d' file.txt 
```

对于可变行号：

```
sed -i "${line}d" file.txt 
```

如果该`-i`选项在您的 sed 风格中不可用，您可以使用临时文件来模拟它：

```
sed "${line}d" file.txt > file.tmp && mv file.tmp file.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T02:47:26.823

按预约（行）号删除：

```
sed -i '3d' input 
```

按名称删除：

```
sed -i '/:Poker/d' input 
```

如果就地 ( `-i`) 选项在您的系统上不起作用，您可以执行以下操作：

```
sed '/:Poker/d' input > input.tmp && mv input.tmp input 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T02:47:20.993

这是使用 awk 的快速操作：

```
lineToDelete=$1
awk "NR != $lineToDelete" 
```

# copy - XmlStarlet 可以在复制期间保留 CDATA 吗？

> ID：15400259
> 
> 赞同：1
> 
> 时间：2013-03-14T02:44:00.807
> 
> 标签：copy, cdata, xmlstarlet, preserve

使用复制时如何使 XmlStarlet 保留 CDATA？`<![CDATA[ ]]>`必须维护，因为生成（和使用）数据的应用程序坚持使用 CDATA 指令围绕某些数据。

示例.xml

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<RSLogix5000Content SchemaRevision="1.0" SoftwareRevision="20.01" >
    <Controller Use="Target" Name="SOME_TARGET_NAME" ProcessorType="1789-L60">
        <Tags>
            <Tag Name="gstrScrap" TagType="Base" DataType="STRING" Constant="false" ExternalAccess="Read/Write">
                <Data>05 00 00 00 53 43 52 41 50 00 00 00 00 00 00 00 
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
00 00 00 00 00 00 00 00</Data>
                <Data Format="String" Length="5">
                    <![CDATA['SCRAP']]>
                </Data>
            </Tag>
        </Tags>
    </Controller>
</RSLogix5000Content> 
```

使用命令；

```
xml sel -t -c "RSLogix5000Content/Controller/Tags/Tag" Example.xml 
```

生成应用程序无法处理的数据，因为`<![CDATA[ ]]>`已从**'SCRAP'**周围删除；

```
<Tag Name="gstrScrap" TagType="Base" DataType="STRING" Constant="false" ExternalAccess="Read/Write">
                                <Data>05 00 00 00 53 43 52 41 50 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00</Data>
                                <Data Format="String" Length="5">
                                        'SCRAP'
                                </Data>
                        </Tag> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T20:43:12.680

干得好：

```
xml sel -t -c "RSLogix5000Content/Controller/Tags/Tag" Example.xml >t1.xml
xml ed -i "/Tag/Data/text()" -t text -n "" -v "<![CDATA[" t1.xml >t2.xml
xml ed -a "/Tag/Data/text()" -t text -n "" -v "]]>" t2.xml >t3.xml
sed -r "s/&lt;!\[CDATA\[/<![CDATA[/g; s/\]\]&gt;/]]>/g" t3.xml >t4.xml 
```

除非您在 xml 中转义了字符，否则您不需要[sed ：](http://www.pement.org/sed/)

```
xml sel -t -c "RSLogix5000Content/Controller/Tags/Tag" Example.xml >t1.xml
xml ed -i "/Tag/Data/text()" -t text -n "" -v "<![CDATA[" t1.xml >t2.xml
xml ed -a "/Tag/Data/text()" -t text -n "" -v "]]>" t2.xml >t3.xml
xml unesc <t3.xml >t4.xml 
```

# objective-c - 使用字符串变量代替按钮名称

> ID：15400261
> 
> 赞同：0
> 
> 时间：2013-03-14T02:44:08.470
> 
> 标签：objective-c

我想创建一个字符串来代替按钮的名称。

例如，我想以编程方式设置按钮的背景。但我希望名称来自字符串变量。这样，如果我想更改一个名为 Button1 的按钮的背景图像，我可以将“Button1”放入我的 NSString 并将其命名为 myButton...然后将实际的 Button1 引用为“myButton”

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T02:52:47.287

我不太清楚你到底想做什么，但我会试着猜测。

假设你有一个像这样的`IBOutlet`引用`UIButton`

```
@interface MyViewController : UIViewController
@property (weak, nonatomic) IBOutlet UIButton * myButton;
@end 
```

您可以使用 KVC 在给定属性名称的情况下更改该按钮的值

```
@implementation MyViewController

- (void)changeBackgroundOfButtonNamed:(NSString *)buttonName {
    UIButton * button = [self valueForKey:buttonName];
    // Change the background
    // ...
}

- (void)whatever {
    [self changeBackgroundOfButtonNamed:@"myButton"];
} 
```

# sql - 从临时表填充数据仓库维度的有效方法？

> ID：15400262
> 
> 赞同：1
> 
> 时间：2013-03-14T02:44:13.100
> 
> 标签：sql, sql-server, sql-server-2008, ssis, data-warehouse

我有一个 SSIS ETL 包，它将一个 CSV 文件加载到一个包含 100 多列会计数据的临时表中，我们正在根据这些数据创建一个数据仓库。

从 100 多列数据中，我们可以确定创建“产品”维度所需的列...

示例数据..

```
product_id,product_name,product_description
'1','computer','power pc'
'2','case','atx case'
'1','computer','power pc'
'3','cpu'intel'
'3','cpu'intel' 
```

所以，我所做的是创建了一个 DIM.PRODUCT 表，即...

```
CREATE TABLE DIM.OFFICE ( 
"product_key" int IDENTITY (1,1) NOT NULL, -- Surrogate Key
"product_id" varchar(150) NOT NULL, -- Business Key
"product_name" varchar(150) NOT NULL,
"product_Description" varchar(150) NOT NULL,
) 
```

我们知道示例数据中的“产品 id”唯一标识了产品，因此#1 的产品 id 将始终具有 product_name = computer，product_description = power pc。

暂存表有 300 万条记录，我如何从暂存表中填充我的维度，以便稍后在填充事实表时查找它。

维度是类型 1 维度，产品 id #1 将始终为“computer”、“power pc”。

以前我一直在使用 SELECT DISTINCT "product id","product_name","product_description" 来仅从临时表中获取不同的值，并将其加载到维度中，但我发现这种方法会对资源系统征税填充尺寸时。

有没有更好、更有效（性能方面）的方法来做到这一点？（使用 TSQL 或 SSIS）..

我们正在运行 SQL 2008 SP3.. 并计划很快升级到 SQL 2012。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:23:50.050

select distinct*通常*需要执行排序，这实际上是所有工作完成的地方。（您可以通过查看查询计划来验证这一点）。您可以通过以下几种方式对其进行优化：

1.  通过创建聚集索引，确保数据*已按所需顺序进行物理排序。*这对数据进行了“预排序”，但当然现在当您导入数据时，您必须即时对其进行预排序，因此现在这会减慢导入临时表的速度。如果 import>staging 可能需要一些时间但维度加载不能，这可能是实用的。

2.  通过确保 TempDB 运行良好来优化您的数据库排序功能。

两者都是真正的 DBA 类型的问题。你有DBA吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T01:36:21.577

1.  维度表来自事实表，可能是设计问题。product dim 应在您的在线系统中创建

2.  `SELECT DISTINCT`是目前最好的选择。也许您可以尝试通过 product_id 将 CSV 加载到哈希分区表分区中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T21:06:36.747

假设 SSIS 和 SQL 不会争夺相同的资源，您可以考虑追加
`OPTION (FAST 10000)`到查询中。
这往往会导致 SQL Server 上的非阻塞查询计划 - 哈希匹配，而不是 DISTINCT 排序。虽然 SQL 查询本身可能会运行更长时间，但作为一个整体的处理可能会加快，因为 SSIS 可以并行处理流。最终结果可能是相当大的加速。

# c# - 使用 System.Data.SQLite 打开 conn 时出错，尝试加载格式不正确的程序。互操作性.084

> ID：15400265
> 
> 赞同：2
> 
> 时间：2013-03-14T02:44:53.950
> 
> 标签：c#, sqlite, system.data.sqlite

我是 C# 新手，我正在尝试使用 System.Data.SQLite 建立数据库连接。我正在使用 Compact Framework 二进制文件版本 1.0.84。和 Windows Vista 和 .net 3.5

我正在与 SharpDevelop 合作。我看到了其他几个处理这个问题的帖子，但我认为那些结果是 32 位与 64 位的问题，通过在我没有使用的某种形式的 Visual Studio 中修改项目属性来解决这些问题。我还检查了我的 IDE 中的项目属性，我可以看到的所有选项都指向 x86 和 32 位。我还尝试在属性中使用“任何 CPU”，但没有成功。

以下是相关代码：

```
try{

 SQLiteConnection conn;

 conn = new SQLiteConnection("Data Source=C:\\my path");

 conn.Open();
 conn.Close();
}
catch (SQLiteException ex){
   throw new Exception(ex.Message);

} 
```

这是我在调试中运行时遇到的异常：我替换了本地路径。

```
System.BadImageFormatException: An attempt was made to load a program with an incorrect format. (Exception de HRESULT: 0x8007000B)
in System.Data.SQLite.SQLite3.Open
in System.Data.SQLite.SQLiteConnection.Open
in mypath 
in System.Windows.Forms.Control.OnClick
in System.Windows.Forms.Button.OnClick
in System.Windows.Forms.Button.OnMouseUp
in System.Windows.Forms.Control.WmMouseUp
in System.Windows.Forms.Control.WndProc
in System.Windows.Forms.ButtonBase.WndProc
in System.Windows.Forms.Button.WndProc
in ControlNativeWindow.OnMessage
in ControlNativeWindow.WndProc
in System.Windows.Forms.NativeWindow.DebuggableCallback
in         ComponentManager.System.Windows.Forms.UnsafenativeMethods.IMsoComponentManager.FPushMessageLoop
in ThreadContext.RunMessageLoopInner
in ThreadContext.RunMessageLoop
in System.Windows.Forms.Application.Run
in mypath 
```

此外，当我添加 SQLite.Interop.084.dll 作为参考时，我会收到有关错误图像文件或没有元数据的警告。“本地复制”选项在属性中显示为灰色。

我将 DLL 替换为旧版本（1.0.66），现在我得到“MSB3247 - 发现同一依赖程序集的不同版本之间的冲突”

我删除了项目文件夹中的所有内容并从头开始，但我一直卡住。是否有人成功实施了紧凑框架的解决方案？任何人都可以推荐一个可以在袖珍电脑中使用的类似数据库管理器吗？

*   在与 1.0.66 版本苦苦挣扎数小时后，我回到了 1.0.84 版本。现在我收到这条消息：无法在 c:\dev\sqlite\dotnet\System.Data.SQLite 下加载文件 SQLite3.cs。

该路径必须来自他们开发 dll 的机器，所以我猜测适配器有问题。我想我现在宁愿尝试使用不同的数据库软件，所以我想此时我会就此提出建议而不是解决方案。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T05:26:21.103

好的，所以我尝试了“常规”Windows 版本，它在第一次尝试时就起作用了。我没有做任何不同的事情。不幸的是，我需要为掌上电脑开发，所以我还是搞砸了

我猜 Compact Framework 的二进制文件存在某种缺陷，而且 C# 模糊的异常也不是很有帮助。我想这些二进制文件是为 64 位机器开发的，就这样离开了。

所以基本上，**对于 Windows Compact Framework 使用 System.Data.SQLite，1.0.66 或 1.0.84 版本都无法完成。至少开箱即用。**我会寻找另一个版本，看看会发生什么。

*我知道这篇文章没有得到“很多”的回复，但如果我正在寻找这个信息，我想找到一些相关的东西，所以我就把它留在这里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-02T14:31:01.293

过了一会儿，我尝试做同样的事情，我有一个项目，我实现了这个

[![在此处输入图像描述](../Images/004c2a2e303191a47d007c903927cfaa.png)](https://i.stack.imgur.com/wJN1P.png)

解决方案是取消选中首选 32 位框并使用“x86 平台”目标，即使这将使用双资源进行下载。

# chef-infra - 厨师节点属性。哪些是可用的？

> ID：15400269
> 
> 赞同：6
> 
> 时间：2013-03-14T02:45:14.720
> 
> 标签：chef-infra

我刚开始使用 Chef，我注意到在一些食谱中有类似`node['cpu']['total']`.

我在问题和在线搜索“厨师节点属性”之类的东西，但我找不到可用节点属性的列表。

我正在寻找的是：

1.  都是`node[...]`自动定义的吗？
2.  在哪里可以找到所有可用节点属性（cpu ...）的列表？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-15T22:49:01.860

> 所有 node[...] 都是自动定义的吗？

不，其中一些是 Ohai 在厨师跑步开始时设定的。其中一些是由食谱的（默认）属性设置的，其中一些在系统中的不同位置被覆盖（例如角色，其他食谱，...）

> 在哪里可以找到所有可用节点属性（cpu ...）的列表？

这取决于您正在运行的系统、您安装了哪些 ohai 插件以及您的运行列表中有哪些食谱。要获得基本 Ohai 属性的完整列表，您可以简单地`ohai`在 shell 上执行，它将输出所有自动属性。对于其他人，您必须查看您的食谱。

有关文档参考，请查看[Chef 文档](https://docs.chef.io/attributes.html)。我链接了一个很好的起点，但真正理解属性有点复杂，因为它是一个相当灵活（因此也很复杂）的系统。您应该浏览一些文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T03:25:19.567

啊! 因此，设置属性的是[Ohai配方/插件。](http://docs.opscode.com/chef/ohai.html)特别是[linux/cpu 插件](https://github.com/opscode/ohai/blob/master/lib/ohai/plugins/linux/cpu.rb)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-12-06T09:53:20.297

将来可能会对其他人有所帮助：

**节点的所有自动属性列表：（取决于 ohai 插件版本）**

Ohai 在每次运行 chef-client 开始时收集的自动属性列表因组织而异，并且通常会因配置的各种服务器类型和运行这些服务器的平台而异。Ohai 收集的所有属性都不能被厨师客户修改。要查看 Ohai 为特定节点收集了哪些自动属性，请运行以下命令：

```
find  /opt/chefdk/embedded/lib/ruby/gems/*/gems/ohai-*/lib -name "*.rb" -print | xargs grep -R "provides" -h |sed 's/^\s*//g'|sed "s/\\\"/\'/g"|sort|uniq|grep "^provides" 
```

引用自：[https ://docs.chef.io/ohai.html](https://docs.chef.io/ohai.html)

# jquery - 使用 jQuery 检查电子邮件是否有效表单 ModelForm

> ID：15400276
> 
> 赞同：0
> 
> 时间：2013-03-14T02:45:44.753
> 
> 标签：jquery, ajax, django, django-templates

嗨，我有一个模型表单，它是根据找到的文档完成的： [https ://docs.djangoproject.com/en/dev/topics/forms/modelforms/](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/)

我的反馈表的一些属性：

模型.py

```
class Feedback(models.Model):
    name = models.CharField(max_length=200)
    email = models.EmailField()
    title = models.CharField(max_length=200)
    feedback = models.TextField() 
```

类FeedbackForms（ModelForm）：类元：模型=反馈

forms_details.py

```
def save_form(request):
    if request.method == 'POST':
        form = FeedbackForms(request.POST)
        if form.is_valid():
            form.save()
            name = form.cleaned_data['name']
            email = form.cleaned_data['email']
            title = form.cleaned_data['title']
            feedback = form.cleaned_data['feedback']

            email = EmailMessage("%s" % title, "%s <%s> said: %s" % (name, email,feedback),
                                 to=['smth@example.com'])
            email.send()
            return render_to_response("success.html")
    else:
        form = FeedbackForms()
    return render_to_response("form.html", {'form': form}, context_instance=RequestContext(request)) 
```

但是，现在我想在执行 POST 之前使用 jQuery 检查键入的电子邮件是否有效。

[我在这里](https://github.com/alex/django-ajax-validation/blob/master/docs/usage.txt)找到了类似于我需要的东西，但它是用于表单的。我已经尝试过了，但它不适用于我的 ModelForm。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T02:55:30.807

可以肯定的是，有 jQuery 的客户端表单验证插件，但你真的不需要使用一个。您可以通过 Ajax 在服务器端进行所有验证，并在尝试保留任何数据之前将表单错误作为 JSON 返回。这样您就不必维护两组验证，并且得到相同的结果。

[无耻的自我插入] 我写了一些[基本的表单类](http://djangosnippets.org/snippets/2393/)，它们通过 jQuery 完成，你可以在 Django Snippets 上使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T03:01:41.470

```
if(isEmail(email)) {
//Do something
}

function isEmail(emailaddress) { 
    var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    return re.test(emailaddress);
} 
```

# c++ - 半空间到点测试

> ID：15400277
> 
> 赞同：3
> 
> 时间：2013-03-14T02:45:48.203
> 
> 标签：c++, math, geometry, box2d, physics

我想了解更多关于获取点到二维线的距离的非常具体的方法。这是如何完成的：

```
// Given an arbitrary point, and a normal vector
// to a line along with a scalar offset
distance = DotProduct(normal, point) - offset 
```

我知道这是真的，因为 Erin Catto 在他的 Box2D Lite 源代码中使用了这种方法。在[这个页面上](http://www.miguelcasillas.com/?p=43)，程序员提到了这个等式：

```
distance = (V dot normal) - offset 
```

这是我能为这种计算找到的唯一资源。检查与点的半空间相交的*常用*方法是点一个从相关平面到您的点的向量，然后通过检查符号（+ 或 -）查看它是背对还是朝向该平面的法线得到的标量。

这在实时应用中可能是不可取的，因为在平面（或在这种情况下为 2D 线）上查找一个点可能很昂贵，并且您只有这条线的法线和偏移量。

简而言之，这个“偏移量”是什么，你如何计算它？这个偏移量代表什么？根据我目前对自己研究的了解，我最好的猜测是它是二维直线一般方程中的 c 变量：

```
ax + by + c = 0 
```

**附加信息**：Erin Catto 在几个地方计算他的偏移量（在定向边界框碰撞检测的上下文中），但我不明白这里的数学或发生了什么：

```
offsetScalar = Dot(BoxPositionVector, normalVector) + BoxYHalfWidthScalar; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T03:05:56.270

维度中的半`n`空间由等式唯一定义

```
a * x >= c 
```

其中`a`和`x`是长度 的向量`n`，`*`是标量（点）积，并且`c`是标量。`a`是与超平面正交的向量`a * x = c`。正如你所说，在二维中，这是方程`ax + by - c = 0`，都是标量。

你说的完全正确；与此常数的`offset`值有关`c`。对于超平面中的任何点`p`，您将有`a * p = c`. 对于半空间中的任何一点，您将拥有`a * p >= c`. 不在半空间内的任何点都满足`a * p < c`。

对于某些点`p`， 的值`a * p - c`还会为您提供从该点到超平面的正交距离 - 如果`a`是单位向量。这是因为[点积的定义与标量投影等价](http://en.wikipedia.org/wiki/Dot_product#Scalar_projection_and_the_equivalence_of_the_definitions)；`a/||a|| * p`是 上的`p`投影`a`。因此，在计算中定义超平面时，可以方便地进行归一化`a`和相应的缩放`c`。然后`c`是偏移量，或者等效地是从超平面到原点的距离 - 我们必须在投影到 之后对此进行调整`a`。

**TL;DR 版本**: `offset = c/||a||`，这意味着`offset = c`if`a`是一个单位向量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T03:26:04.993

是从线到原点的`offset`距离，如果线表示为：

```
 ax + by + c = 0 
```

然后`offset = c/sqrt(a*a+b*b).`

请参阅[此处](http://www.ditutor.com/line/point-line.html)了解更多信息。

# wordpress - Wordpress 插件就像页面创建者一样工作

> ID：15400278
> 
> 赞同：1
> 
> 时间：2013-03-14T02:45:53.190
> 
> 标签：wordpress

我正在为一个想要为他列出的每个房屋建立一个页面的房屋建筑商建立一个网站。我手工做这个没有问题，除了他以后会自己添加新家。我正在寻找一个插件，我可以在其中设置地址、价格、平方英尺等自定义字段 - 使用 CSS 来控制页面的外观以及每个字段的位置，然后他可以填写所有字段并为他创建页面。这样的事情存在吗？

我知道有房地产插件可以做类似的事情，但我需要能够自己控制设计并为我们已经在使用的幻灯片插入短代码 - 客户对他的幻灯片看起来非常特别我花了 4 次尝试才找到一个他可以接受的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T03:12:29.307

快速搜索将我引向此[自定义帖子类型](http://wordpress.org/extend/plugins/custom-post-type-maker/)生成器。由于您没有就您打算如何将您的帖子合并到您的主题中给出任何规范，我无法告诉您该插件是否可以工作。

不过，我建议您可能会发现这个[关于自定义帖子类型的 Codex 页面很有](http://codex.wordpress.org/Post_Types)启发性。

# c - 如何在 x86-64 中注入任意内存地址？

> ID：15400290
> 
> 赞同：2
> 
> 时间：2013-03-14T02:47:03.703
> 
> 标签：c, x86-64, exploit, memory-address, format-string

您好，我正在尝试从“黑客：开发的艺术”一书中学习一些基本的内存利用，并且由于我的 x86-64 系统而遇到了麻烦。

对于本书的这一部分，我正在学习格式字符串漏洞利用，并且我将注入一个环境变量以通过漏洞读取。（第 172 页）

这是我尝试使用格式字符串漏洞利用的程序的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

    int main(int argc, char *argv[]) 
    {
    char text[1024];
    static int test_val = -72;

    if(argc < 2) {
    printf("Usage: %s <text to print>\n", argv[0]);
    exit(0);
    }
    strcpy(text, argv[1]);

    printf("The right way to print user-controlled input:\n");
    printf("%s", text);

    printf("\nThe wrong way to print user-controlled input:\n");
    printf(text);

    printf("\n");

    // Debug output
    printf("[*] test_val @ %p = %d %p\n", &test_val, test_val, test_val);

    exit(0);
    } 
```

从这里开始，为了利用，我在编译后按照书中所说的（为 x86-32 编写）进行了尝试：

```
 ./fmt_vuln $(printf "\x\x\x\x\x\x\x\x")%016x%016x%016x%016x%016x%016x%016x%s 
```

（\x\x\x\x\x\x\x 替换为小端格式任意环境内存地址），当我遇到“\n打印用户控制输入的错误方法时，我得到的只是分段问题： \n" 部分。

程序的正确响应应该是注入地址中的字符串。

我还关闭了 ASLR、NX 和格式保护。

我不知道如何让它工作。我猜要么我没有正确注入地址，因为 32 和 64 之间的差异，或者 %s 没有正确读取我的地址。或者可能我猜我没有足够好地关闭安全性。

您能否找到如何在 x86-64 系统中准确注入内存地址的解决方案？

# orchardcms - Orchard 定制模块开发：带字段的部件？

> ID：15400291
> 
> 赞同：1
> 
> 时间：2013-03-14T02:47:05.600
> 
> 标签：orchardcms

我需要创建几个不同的模块，所以我正在寻找最好的方法，我希望那些知道的可以提供一些建议。

我想要实现的目标理论上可以使用 Orchard 及其现有默认模块提供的 ContentTypes、Fields、Taxonomies、Queries 和 Projections 的混合来完成。

但是，由于我正在为没有经过培训或经验的最终用户创建模块，因此我确实需要简化和掌握。

我编写的模块将来会被重用，我希望能够很容易地添加/删除字段。

我需要创建一个与内容管理器分开的管理部分来管理模块（*为了便于使用*）。

目前的做法似乎是使用我在模型中需要的输入创建零件，并按照传统的 MVC 方法手动写出形状等。

**我要问的问题是**：使用 Fields 模块为我处理这些输入是否可行？然后我（相信我）可以利用 Shape 渲染所有现成的作为 Fields 模块的一部分（因为我真的很喜欢 Fields 模块以及它的可扩展性）。

这种方法的主要*缺点*是什么？

*我试图在不太具体的情况下说清楚，但如果我还没有提供更多信息，我愿意提供更多信息。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T00:42:47.013

我认为在这里更具体不会有害。但以同样的方式回答：

部件比字段更具可扩展性，并且所有部件都使用形状来构建布局（我不确定您在字段模块中发现了什么引起了您的注意，您认为只有部件才有可能？）。

但是，部件和字段之间存在一些关键区别（因此我认为您的问题是如何对要存储的数据进行建模）：

*   部件可以（但不一定应该）对应于数据库表，即部件可以将其数据存储在表中。
*   字段的数据以序列化的 XML 格式沿内容项的 ContentItemVersionRecord 存储（因此由于序列化而性能更差，但由于不必加入或延迟加载其他表而更好；具体的性能差异取决于使用情况）。
*   由于存储的不同，部件的属性可以直接查询并用于过滤或排序，而字段不能查询。Projector 模块通过为字段创建索引来克服这个问题。
*   还与存储有关，一个部分可以包含任意数量的信息，而一个字段只能包含一个（这是字段的值）。
*   虽然一个部分可以附加到一个内容类型一次，但一个字段可以附加多次。
*   部件附加到内容类型，而技术上的字段附加到部件（当您从管理 UI 将字段附加到内容类型时，实际上将创建一个与类型同名的不可见部件）。

# gemfire - GemFire 查询调试

> ID：15400300
> 
> 赞同：0
> 
> 时间：2013-03-14T02:48:34.030
> 
> 标签：gemfire, geode

以下链接显示了如何调试`gemfire`查询功能 - 通过设置几个标志。我已经尝试过了，我真的很困惑它对我根本不起作用。这是[链接](http://pubs.vmware.com/vfabric5/index.jsp?topic=/com.vmware.vfabric.gemfire.6.6/developing/query_additional/query_debugging.html)

我将它们作为 jvm args 传递，如下所示：

```
-Dgemfire.Query.VERBOSE=true -Dgemfire.Index.VERBOSE=true 
```

我做错了什么？或者是否有其他属性覆盖了我的这种配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:47:14.267

K，我还传递了以下参数：

-Dgemfire.Query.VERBOSE=true -Dgemfire.Index.VERBOSE=true

并打印调试语句：

例如：查询在 51.678635 毫秒内执行；行数 = 1; indexUsed(1):myIdx:1 "SELECT DISTINCT * FROM /my_region WHERE my_obj.my_val in $1"

另外我正在传递：

-Dgemfire.index.RANGEINDEX_ONLY=true

……也是。希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-03T08:30:42.460

在启动期间传递`-Dgemfire.Query.VERBOSE=true`或执行`System.setProperty("gemfire.Query.VERBOSE", "true")`Java 应该足以启用功能。

如果设置成功启用，每当执行查询时，您将能够看到类似于下面的内容。日志行将出现在您通过 gemfire.properties 文件指定其位置的日志文件中。

```
[info 2011/08/29 11:24:35.472 PDT CqServer <main> tid=0x1] Query Executed in 9.619656 ms; rowCount = 99; 
indexesUsed(0) "select *  from /exampleRegion" 
```

来自最新 Gemfire 的相应文档 [http://gemfire.docs.pivotal.io/geode/getting_started/querying_quick_reference.html](http://gemfire.docs.pivotal.io/geode/getting_started/querying_quick_reference.html)

Geode [http://geode.apache.org/docs/guide/getting_started/querying_quick_reference.html的相应文档](http://geode.apache.org/docs/guide/getting_started/querying_quick_reference.html)

# ruby-on-rails - Ruby-on-Rails：如何在不离开索引的情况下访问创建操作

> ID：15400307
> 
> 赞同：2
> 
> 时间：2013-03-14T02:49:09.903
> 
> 标签：ruby-on-rails, ruby, twitter, tweetstream

尝试创建新的推文以显示在我的索引中，但我不想离开页面。我的应用程序所需的功能是跟踪来自推文流的推文，并自动将该信息传递到我的推文对象并保存到数据库。

控制器：

```
class TweetsController < ApplicationController

  TWITTER_COMSUMER_KEY = "GfqdzJKb5kIyEnYlQuNGlg"
  TWITTER_CONSUMER_SECRET = "A3Fe0IvDbhlKgowCVmV1WVLlcdYgQ8w9clrDSegCQ"
  TWITTER_OATH_TOKEN = "34012133-caUYq3eiNC7Z9L9KvTgG51VgyctqVxkXP0tKIXDk0"
  TWITTER_OATH_TOKEN_SECRET = "DSLA3F8BPssyEeEP2wZgQ1OJRL5kIVPZfON4GYZFw"

  TweetStream.configure do |config|
    config.consumer_key = TWITTER_COMSUMER_KEY
    config.consumer_secret = TWITTER_CONSUMER_SECRET
    config.oauth_token = TWITTER_OATH_TOKEN
    config.oauth_token_secret = TWITTER_OATH_TOKEN_SECRET
  end

  def index
    @tweets = Tweet.all
  end

  def new
    @tweet = Tweet.new
  end

  def create
    TweetStream.track('bed', 'morning', 'breakfast') do |status|

      temp = status.text
      if(temp.include? "http")
         @tweet = Tweet.new(status.text)
         if @tweet.save
         else
           render "new"
         end
      end
    end
  end

  def show

  end
end 
```

索引.html.erb

```
<h1>Tweet Tracker</h1>

<% @tweets.each do |tweet| %>
    <p><%= tweet.content %></p>
    <hr />
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T03:25:48.067

这是 RESTful 资源结构（索引/显示/创建/编辑/销毁）的一种有趣方法，因为我们使用自动跟踪器来创建而不是任何用户输入。问题是，您的控制器代码仅在通过 POST 请求访问时运行（除非您弄乱了 routes.rb 以使其响应其他内容）。

在我看来，最干净的解决方案是编写一个咖啡脚本来定期将数据发布到控制器并显示结果。

## /app/assets/javascripts/tweets.js.coffee

```
$ ->
    setInterval ->
      $.post("/tweets", "", (html)->
            $("#tweets").append html)
     , 1000 
```

## /app/views/tweets/create.html.erb

```
<p><%= @tweet.content %></p>
<br/> 
```

为了让它正常工作，我们需要将推文区域包装在一个 id="tweets" 的 div 中：

## /app/views/tweets/index.html.erb

```
<h1>Tweet Tracker</h1>

<div id="tweets">
<% @tweets.each do |tweet| %>
   <p><%= tweet.content %></p>
   <br/>
<% end %>
</div> 
```

您还需要`render "new"`在控制器的 create 方法中替换为`return`. 这样，当保存到数据库失败时，不会呈现任何内容，并且一切都会继续，没有错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T05:48:04.660

你有两个重要的部分：

*   监听流式 API 并创建对象
*   在创建新对象时更新用户的视图

第二位可以通过一些简单的 javascript 轮询来完成，如@AustinMullins 的回答。

第一个位*不*应该在控制器中完成 - 它们用于响应请求并且偏离那种工作可能最终导致意外行为或性能问题。

例如，我发现在 Phusion Passenger 上运行的站点上，服务器会创建一个线程来处理请求，然后如果它没有自行完成，则在一定时间后将其*杀死*，当然它不会如果控制器开始监听一个永无止境的输入流。

相反，您应该获得一个可以从命令行启动的单独脚本。这是一个类似于我正在使用的示例：

**脚本/tracker.rb**

```
#!/usr/bin/env ruby
ENV["RAILS_ENV"] ||= "production"
require File.dirname(__FILE__) + "/../config/environment"
TweetStream.configure do |config|
  config.consumer_key = TWITTER_COMSUMER_KEY
  config.consumer_secret = TWITTER_CONSUMER_SECRET
  config.oauth_token = TWITTER_OATH_TOKEN
  config.oauth_token_secret = TWITTER_OATH_TOKEN_SECRET
end

client = TweetStream::Client.new
client.track(*Keyword.pluck(:name)).each do |status|
  Tweet.create(status.text)
end 
```

**脚本/tracker_ctl**

```
#!/usr/bin/env ruby
require 'rubygems'
require 'daemons'
Daemon.new('tracker.rb') 
```

现在，您可以 ssh 进入您的服务器并运行`script/tracker_ctl start`or `script/tracker_ctl stop`。但是您可能想要做的是让控制器操作发出这些命令。

# file-upload - 使用 blueimp jquery-file-upload 弹出包含上传列表的模态

> ID：15400309
> 
> 赞同：4
> 
> 时间：2013-03-14T02:49:23.110
> 
> 标签：file-upload, twitter-bootstrap, modal-dialog, blueimp

我已经使用 jQuery-File-Upload 几个月了，并且已经实现了一个非常复杂的上传器，它可以直接到 S3、后端缩略图后处理等。

但是，我现在的任务是允许用户将他们的照片放在主页上并弹出一个包含文件列表的嵌入式模式。随后，用户将能够在模态本身上放置更多图像。（使用引导模式）

我正在使用带有覆盖的 jQuery-File-upload-ui。我不需要支持非 HTML5 浏览器。我正在使用带有 jQ​​uery-fileupload-rails 0.3.5 gem 的 Rails 3.1.11 和 jQuery 1.7.2。

我已经为此工作了一段时间，并在此过程中用谷歌搜索了我的手指，但无法弄清楚。

这可能吗？

# file - 使用缩小到 1/2 大小的大图像？对加载时间不利？

> ID：15400310
> 
> 赞同：0
> 
> 时间：2013-03-14T02:49:52.540
> 
> 标签：file, size, jpeg, scale, pageload

我运行一个 Wordpress 网站，该网站有数千篇文章，每个文章至少有一个主 jpeg 图像，我们已将其裁剪为 240 像素高 x 135 像素宽，并使用“保存为 Web”功能在 Photoshop 中减小了其文件大小。因此，在存档页面的情况下，我们可以在单个页面上加载 20 到 30 张这样的图像。

因为我们正在围绕网站设计一个应用程序并且希望我们的图像看起来质量很高，所以 240 x 135 尺寸不会在更高分辨率的屏幕上削减它，所以我们需要更新尺寸。

我的问题是：如果我们将每个帖子设置为在其各个页面中使用 603 x 339 的图像，然后设置列出具有较小图像的帖子的存档页面，以使用 CSS 将这些 603 x 339 图像缩小到 240 x 135。加载时间会有多糟糕？由于存档页面仍将加载 20-30 个设置为以 240 x 135 显示的图像，我们可以吗？或者源 603 x 339 图像的实际文件大小会对我们的页面速度产生巨大的负面影响？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T03:04:00.170

**它肯定会大大增加加载时间**

**更新：** 假设您的文件系统上有一个图像（603x339）。使用[这里](https://stackoverflow.com/a/9691531/1279376)给出的类。然后使用

```
$resizeObj -> resizeImage(240 ,135 , 'crop');
$resizeObj -> saveImage('sample-resized.jpg', 100); 
```

创建调整大小的图像并在存档页面中使用该图像。您可以删除此图像以节省文件系统大小，但每次都需要更多计算。但是，对于您的主页，您仍然可以使用文件系统中的图像，因为它没有被修改

**替代解决方案：**

Wordpress 有一个名为[ImageMagick Engine的插件](http://wordpress.org/extend/plugins/imagemagick-engine/)

使用它，您可以在实际将图像发送到客户端计算机之前重新调整图像大小。因此，您可以发送具有您想要显示的大小的图像（无需在客户端再次调整大小）。

因此，将负载限制在所需的范围内。

或者简单地使用图像压缩工具（如[Cesium](http://caesium.sourceforge.net/index.html)或任何其他工具），这将减少系统本身的图像大小

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T03:09:01.223

使用 CSS 缩放仍然需要加载整个图像，然后浏览器必须在显示它之前将其缩小，因此它可能会比以原始大小显示图像要慢一点。为了获得更好的速度，您需要将预先缩放的图像发送到客户端。

# c# - 有没有办法同步检查套接字可用数据？

> ID：15400314
> 
> 赞同：1
> 
> 时间：2013-03-14T02:49:59.653
> 
> 标签：c#, sockets, events

在调用 receive() 方法之前，我想检查要读取的套接字可用数据。但它不工作。我认为我检查套接字可用数据的方式不正确。这是代码：

```
 private Socket _clientSocket;               //Client socket

  public Form1()
    {
        InitializeComponent();

        //Check for data available before calling Receive().
        if (_clientSocket.Poll(-1, SelectMode.SelectRead))
        {
            Receive();
        }

    } 
```

它给了我这个错误：`Object reference not set to an instance of an object`

检查套接字可用数据以读取的正确方法是什么？我正在考虑某种事件，但我无法弄清楚..

有什么帮助吗？

编辑：连接按钮：

```
 private void BtnConnect_Click(object sender, EventArgs e)
    {
        try
        {
            string ip = TboxIP.Text;
            int port = int.Parse(TboxPort.Text);
            _clientSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
            // Connect to the  host
            _clientSocket.Connect(IPAddress.Parse(ip), port);

            if (SocketConnected(_clientSocket) == true)
            {
                lblStatus.Text = "Socket Connection Established .. ";
            }

        }
        catch (SocketException ex)
        {
            MessageBox.Show(ex.Message);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T03:11:43.257

那是你的问题，你在 Form1 构造函数中访问 _clientSocket 并且它还没有被初始化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-03T15:41:47.570

查看文档：[Socket.Poll()](https://msdn.microsoft.com/en-us/library/system.net.sockets.socket.poll(v=vs.110).aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-2) 如果您将微秒数设置为负数，它将永远等待任何类型的响应。

根据您的测试使用等待时间，因此不要

# jquery - FancyBox 2：设置缩略图助手源

ID：15400316

赞同：0

时间：2013-03-14T02:50:09.443

标签：jquery, fancybox, lightbox, fancybox-2

# c# - C# does not send socket data until Socket is closed

> ID：15400318
> 
> 赞同：2
> 
> 时间：2013-03-14T02:50:16.980
> 
> 标签：c#, sockets

I am writing a C# app to communicate with a server via a set of 4-10 byte packets. The server is written in Java, and I can put data to it, however, the only way to actually push the packet to the server is by calling the Close() method on the ServerStream, which is not possible for my purposes, as the server emits a packet back to the sender. I have already tried setting

```
socket.NoDelay = true;
socket.Client.NoDelay = true; 
```

which does not work. Nor does the Flush() method, because it's not yet implemented. The interesting part is, when I have to force-close the application, the server complains that the connection was reset.

The code follows

```
socket.NoDelay = true;
socket.Client.NoDelay = true;
socket.Connect("127.0.0.1", 6789);
serverStream = socket.GetStream();
byte[] outStream = System.Text.Encoding.ASCII.GetBytes("ping");
serverStream.Write(outStream, 0, outStream.Length);
serverStream.Flush();
byte[] inStream = new byte[10025];
serverStream.Read(inStream, 0, (int)socket.ReceiveBufferSize);
string returndata = System.Text.Encoding.ASCII.GetString(inStream);
Console.WriteLine(returndata); 
```

If I were to add the line `serverStream.Close();` after where the Flush() method is, the server receives the packet just fine.

What am I doing wrong with my communications layer? Do I just need to use larger packets or is the Nagle algorithm still active?

# linux - gtest：编译错误

> ID：15400320
> 
> 赞同：2
> 
> 时间：2013-03-14T02:50:24.140
> 
> 标签：linux, gcc, googletest

当我在 Redhat OS（gcc 版本为 3.2.2）上编译 gtest 示例时，它会抛出如下错误，但是它在 Ubuntu 上编译它没关系。请帮助我。错误或警告：

```
../include/gtest/internal/gtest-internal.h: In instantiation of `testing::internal::ImplicitlyConvertible<const void*, const void*>':
../include/gtest/gtest-printers.h:314:   instantiated from `void testing::internal::DefaultPrintTo(char, testing::internal::bool_constant<true>, T*, std::ostream*) [with T = const void]'
../include/gtest/gtest-printers.h:376:   instantiated from `void testing::internal::PrintTo(const T&, std::ostream*) [with T = const void*]'
../include/gtest/gtest-printers.h:416:   instantiated from here
../include/gtest/internal/gtest-internal.h:890: no method `
   testing::internal::ImplicitlyConvertible<const void*, const void*>::MakeFrom
   '
../include/gtest/internal/gtest-internal.h:890: invalid use of undefined type `
   class testing::internal::ImplicitlyConvertible<const void*, const void*>'
../include/gtest/internal/gtest-internal.h:847: declaration of `class 
   testing::internal::ImplicitlyConvertible<const void*, const void*>' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:24:19.827

GCC 3.2 是一个太旧的编译器，无法支持 Google Test 使用的结构——它甚至早于 C++ 03 标准。尝试使用较新版本的 GCC 构建这些示例。

# c - 在没有函数帮助的情况下将字符添加到字符串

> ID：15400331
> 
> 赞同：1
> 
> 时间：2013-03-14T02:51:53.683
> 
> 标签：c, arrays, string, char, append

对于我的程序，我需要在不使用标准库或 IO 函数的情况下将 char(char) 添加到 string(char *)。例如：

```
char *s = "This is GOO";
char c = 'D';

s = append(s, c); 
```

和 s 会产生字符串“这很好”。是否有一些适当的方法来操作数组以实现这一目标？同样，从字符数中生成字符串就足够了。我很确定我可以使用malloc，但不是积极的......

```
char * app(char* s, char c){
    char *copy;
    int l = strlen_(s);
    copy = malloc(l+1);
    copy = s;
    copy[l] = c;
    copy[l+1] = '\0';
    return copy;
} 
```

不能使用 strcpy

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T02:59:27.313

在不透露答案的情况下，因为这听起来像是课堂作业，所以这是您想要在高层次上做的事情：

1.  确定字符串的长度，即找到`'\0'`终止符。
2.  分配一个长一个字符的新 char 数组。
3.  将旧字符串复制到新字符串。
4.  在末尾添加新字符。
5.  确保`'\0'`在新字符串的末尾有一个终止符。

（如果您被允许修改现有字符串，那么您可能会跳过第 2 步和第 3 步。但在您的示例`char *s = "This is GOO"`中`s`指向不可修改的字符串文字，这意味着您无法就地修改它并且必须使用副本。 )

* * *

对您发布的代码的评论：

```
char * app(char* s, char c) {
    char *copy;
    int l = strlen_(s);
    copy = malloc(l+1);    /* should be +2: +1 for the extra character and +1 for \0 */
    copy = s;              /* arrays must be copied item by item. need a for loop */
    copy[l] = c;
    copy[l+1] = '\0';
    return copy;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T03:14:27.243

```
#include <stdlib.h>

char *append(char *s, char c)
{
    int i = 0, j = 0;
    char *tmp;
    while (s[i] != '\0')
        i++;
    tmp = malloc((i+2) * sizeof(char));
    while (j < i)
    {
        tmp[j] = s[j];
        j++;
    }
    tmp[j++] = c;
    tmp[j] = '\0';
    return tmp;
}

int main(void)
{
    char *s = "This is Goo";
    char c = 'D';
    s = append(s, c);
    return 0;
} 
```

# canvas - HTML 5 Canvas 绘图应用程序不绘图

> ID：15400333
> 
> 赞同：0
> 
> 时间：2013-03-14T02:52:13.730
> 
> 标签：canvas, svg, jquery-svg

我有一个简单的 html5 画布绘图应用程序的以下代码（来自[这里](http://codetheory.in/html5-canvas-drawing-lines-with-smooth-edges/)的代码）。但是，我无法让画布在鼠标按下时进行绘制。有任何想法吗？

在 Firefox 中尝试过，而不是 IE。

任何帮助表示赞赏。

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Untitled Document</title>   
<script type="text/javascript">  
    var canvas = document.querySelector('#paint');
    var ctx = canvas.getContext('2d');  
    var sketch = document.querySelector('#sketch');
    var sketch_style = getComputedStyle(sketch);
    canvas.width = parseInt(sketch_style.getPropertyValue('width'));
    canvas.height = parseInt(sketch_style.getPropertyValue('height')); 
    var mouse = {x: 0, y: 0};
    var last_mouse = {x: 0, y: 0};  

    /* Mouse Capturing Work */
    canvas.addEventListener('mousemove', function(e) {
        last_mouse.x = mouse.x;
        last_mouse.y = mouse.y;

        mouse.x = e.pageX - this.offsetLeft;
        mouse.y = e.pageY - this.offsetTop;
    }, false);

    /* Drawing on Paint App */
    ctx.lineWidth = 5;
    ctx.lineJoin = 'round';
    ctx.lineCap = 'round';
    ctx.strokeStyle = 'blue';       
    canvas.addEventListener('mousedown', function(e) {
        canvas.addEventListener('mousemove', onPaint, false);
    }, false);

    canvas.addEventListener('mouseup', function() {
        canvas.removeEventListener('mousemove', onPaint, false);
    }, false);

    var onPaint = function() {
        ctx.beginPath();
        ctx.moveTo(last_mouse.x, last_mouse.y);
        ctx.lineTo(mouse.x, mouse.y);
        ctx.closePath();
        ctx.stroke();
    };

    </script>
<style type="text/css">
html, body {
    width: 100%;
    height: 100%;
}
#sketch {
    border: 10px solid gray;
    height: 100%;
}
</style>
</head>
<body>
<div id="sketch">
  <canvas id="paint"></canvas>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T06:57:33.010

问题是您正在尝试访问`var canvas = document.querySelector('#paint');`尚未加载的标签 ( )。

将整个 JavaScript 标记放在`</canvas>`.

# c# - Crystal Report 交叉表行列不能增长

> ID：15400335
> 
> 赞同：0
> 
> 时间：2013-03-14T02:52:24.200
> 
> 标签：c#, crystal-reports, crosstab

我一直在使用交叉表水晶报表来生成小计，以分析哪家公司使用较少的采购材料成本。由于水晶报表提供的软件限制，只能在报表表头中创建交叉表。在报表标题中，我们不能增加行和列的内容

现在我必须如下表

表 A

```
ID CompanyName 
1  Test 
2  Tast 
```

表 B

```
Foo Bar ParentID Quantity Rate
A   1   1           21     10
B   2   1           10     222
C   3   1          11      1243 
A   1   2           2      10
B   2   2           20      222
C   3   2          13       1243 
```

我想创建表格作为报告：

```
 Foo Bar Rate  Test  Tast  
    A   1    10     21    2
    B   2    222    10    20
    C   3    1243   11    13
Total              42    35 
```

在列部分，公司名称可以动态生成平均值，而 Foo、Bar 和 Rate 是固定的。

所以，我的问题是 1\. 如何在 crossTab 中设置行对象和列对象，以便它们可以显示所有内容而不重叠？

1.  如何在交叉表报告中自定义添加固定列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:30:07.653

交叉表用于显示逐行数据。也行到列或列到行显示。

请检查此链接，这对您有帮助。

[http://www.codeproject.com/Tips/493334/Custom-sorting-for-Crystal-Report-Cross-Tab](http://www.codeproject.com/Tips/493334/Custom-sorting-for-Crystal-Report-Cross-Tab)

[http://www.codeproject.com/Articles/166291/Generate-a-report-using-Crystal-Reports-in-Visual](http://www.codeproject.com/Articles/166291/Generate-a-report-using-Crystal-Reports-in-Visual)

# php - 一定时间后自动更新行

> ID：15400342
> 
> 赞同：2
> 
> 时间：2013-03-14T02:53:08.073
> 
> 标签：php, mysql, cron

我创建了一个网站，我的用户可以在其中发布广告。

现在我想在一段时间后自动更改他们的广告表中的一行。

例如：假设我的用户上传/发布了一个广告，在他发布之前，他可以选择是否要保持 8 天或 16 天可见。

我应该用 cron 检查这个还是有更好的方法呢？

可见被称为“活动”的 DB，- tinyint 1 或 0。

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T03:16:54.960

您有 2 个选项可以根据他们选择的时间尺度来管理这两个选项。

1.  与广告一起存储过期时间并包括过期时间 > NOW(); 在任何查询中选择广告（这种否定了对“活动”字段的要求。

2.  使用事件来管理它。

方法 1 可能需要一些管理员定期“清理广告”。

方法 2 - 您还不能在程序中创建事件（上次我检查过），但它们允许您设置和忘记这些类型的管理职责，而无需运行其他检查等等。

每个事件必须有一个唯一的名称，否则您将终止已指定的事件...

例子：

```
<?php

$qry = "insert into ads values ( 'x', 'y', 'z' );"; 
/* db execute qry (pdo or what ever) */
$adId = // retriev a unique reference for ad.
$days = $_POST['expire'] == 16 ? 16 : 8;

$qry = "CREATE EVENT updateAd_".$adId."
    ON SCHEDULE AT CURRENT_TIMESTAMP + INTERVAL ".$days." DAY
    ON COMPLETION NOT PRESERVE
    DO
    update ads set active = 'false' where ad_id = ".$adId.";";
// db execute qry (pdo or what ever);
?> 
```

该事件存储在 mysql 数据库中，而不是您自己的数据库中，因此您需要一些管理员级别的权限才能实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T02:55:41.733

你可以保留有效期吗？因此，创建一个存储日期的列。当用户创建广告时，计算从现在起 8 天后的日期并将其存储在列中。然后在您的查询中提取广告，您可以限制那些到期日期仍在未来的广告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T03:02:19.597

保存有效期。然后使用查询：

```
select * from table where Expiration_date>now(); 
```

如果您使用的是 PHP，请查看[strtotime](http://php.net/manual/en/function.strtotime.php)函数。您可以使用它来创建您的日期，如下所示：

```
$expiration = date("Y-m-d H:i:s",strtotime('+ '.$num.'days')); 
```

如果您有“Expiration_date”字段，则不需要“活动”字段。该声明

```
select Expiration_date>now() as active from table 
```

将是等效的。

# ios - 自定义表格视图单元格中的 uilabel 未显示在表格视图控制器中

> ID：15400346
> 
> 赞同：0
> 
> 时间：2013-03-14T02:54:09.207
> 
> 标签：ios, ios5, ios6, uitableview

我创建了一个表格视图控制器和自定义单元格。我创建了一个新的 tableviewCell 文件，其中包含自定义单元格中标签的出口。

我已经在 tableviewController 中导入了 tableviewcell 类，并尝试通过以下代码将数组中的值分配给单元格：

```
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier ];
} 
```

cell.name.text= [data objectAtIndex:indexPath.row];

**cell.name** -----------（tableviewcell类中的uilabel名称不显示，即使在帮助中也不存在！，我不知道为什么）

下面的代码通过标记标签来工作

```
 // Configure the cell...

//    UILabel *label = (UILabel *)[cell viewWithTag:111];
//              label.text= [data objectAtIndex:indexPath.row]; 
```

我的问题是如何使插座部分在没有标记的情况下工作，为什么 uilabel 没有显示在 tableviewCONtroller 中？

请帮帮我。我将非常感谢您的帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T03:03:07.987

如果您的自定义单元格的类名是“MyCustomTableCell”，它是 UITableViewCell 的子类，那么代码必须如下所示

```
static NSString *CellIdentifier = @"Cell";
MyCustomTableCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier   forIndexPath:indexPath];

if (cell == nil) {
    cell = [[MyCustomTableCell alloc] initWithStyle:UITableViewCellStyleDefault
    reuseIdentifier:CellIdentifier ];
 } 
```

然后你可以访问它的属性

```
cell.name = @"cell name"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T03:06:57.920

记得加载Nib：

```
static NSString *CellIdentifier = @"CellIdentifier";
 MyCustomTableCell *cell = (MyCustomTableCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[MyCustomTableCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell = [[[NSBundle mainBundle] loadNibNamed:@"MyCustomTableCell" owner:self options:nil] lastObject];
       // UINib *theNib = [UINib nibWithNibName:@"MyCustomTableCell" bundle:nil];
       // cell = [[theNib instantiateWithOwner:self options:nil] lastObject];
    } 
```

# java - 如何从一套 REST 服务管理 HTTP 缓存过期

> ID：15400351
> 
> 赞同：1
> 
> 时间：2013-03-14T02:55:02.950
> 
> 标签：java, http, rest, caching

我在 Web 应用程序的服务器端用 Java 实现了 30 个 REST 服务。它们都有硬编码的缓存过期设置，这些设置被放入 HTTP 响应标头中。管理这些设置的最佳做法是什么？

*   让他们硬编码？
*   如果需要更改，是否有一个配置文件来管理设置？
*   按服务名称将它们保存在数据库表中？
*   是否有现有的框架可以帮助管理这一点？

我确实有一些非常静态且不太可能更改的数据，还有一些我根本不想缓存的数据。

我已经搜索过了，所以我没有看到这样的现有问题。

**编辑：这是**[Wikipedia 定义](http://en.wikipedia.org/wiki/Representational_state_transfer)的 RESTful API 的约束之一。客户端应该能够缓存服务器接收的某些数据。

最佳做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T03:07:13.050

我假设每个服务都有不同但固定的缓存时间。如果您发现需要更改它们，我会在属性文件或 servlet 配置的一部分中使它们可配置。数据库似乎矫枉过正，查找需要时间。

如果设置在请求参数级别更改，而不仅仅是服务级别，则可能需要像现在一样将它们构建为响应的一部分。无论哪种方式，您可能都想做自己的独立缓存服务器端。

# java - Tomcat 错误部署 war 文件 javax.servlet 未找到

> ID：15400356
> 
> 赞同：0
> 
> 时间：2013-03-14T02:55:37.477
> 
> 标签：java, macos, tomcat, servlets

```
Mar 13, 2013 7:36:49 PM org.apache.catalina.util.ExtensionValidator validateManifestResources
INFO: ExtensionValidator[/edu][resin.jar]: Required extension [javax.servlet] not found.
Mar 13, 2013 7:36:49 PM org.apache.catalina.util.ExtensionValidator validateManifestResources
INFO: ExtensionValidator[/edu]: Failure to find [1] required extension(s).
Mar 13, 2013 7:36:49 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Error getConfigured
Mar 13, 2013 7:36:49 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [/edu] startup failed due to previous errors 
```

以上来自 catalina.log 文件。我已经在 mac 上成功加载了 tomcat 7，并将一个 .war 文件放入了我的 webapps 文件夹中。Tomcat 从中构建了一个文件目录，但由于上述错误，我假设它不会部署。第一次使用 .jsp 和 servlet，感谢您的耐心等待。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:38:25.177

感觉很蠢，resin.jar = 树脂服务器。从来没有听说过。显然不适用于Tomcat。

# python - AVG 和 Windows 防火墙使用 PyScripter 2.5.3（32 位）阻止 python 2.7

> ID：15400362
> 
> 赞同：0
> 
> 时间：2013-03-14T02:55:56.980
> 
> 标签：python, pyscripter

我第一次接触 Python；也许正常？已从 Python.org 和 ActivePython (2.7.2.5) 尝试过 Python 2.7.3。当我运行 PyScripter 2.5.3 时，AVG 中断和对象到 python.exe。尝试在几个不同的文件夹中重新安装 python，有时 Windows 防火墙会在 AVG 之前弹出。直接运行 python.exe 不会触发 AVG 或 Windows 防火墙。不知道这里发生了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T03:35:09.527

也不确定。也许 PyScripter 在尝试查找 python.exe 时只是做了一些奇怪而危险的事情。我建议寻找另一个 IDE。

我个人使用 Eclipse 的 PyDev 插件。我喜欢它，因为我还可以在我的 Eclipse 环境中使用其他插件和工具（如 Mercurial 版本控制）。这就是我最成功的地方。

# jquery - Django - 有什么方法可以避免在我的所有视图中重复代码？

> ID：15400369
> 
> 赞同：2
> 
> 时间：2013-03-14T02:56:35.017
> 
> 标签：jquery, django, view, registration

我项目中的所有模板都有一个注册按钮，只有当您以匿名用户身份输入时才能看到该按钮。该按钮打开一个带有两个注册表单的模式窗口。问题是我必须在我的所有视图中都有这个代码才能工作。有什么方法可以避免在我所有的视图中重复与注册表相关的代码？

**澄清：**在我的所有观点中重复的代码被注释为#USER REGISTRATION FORM RELATIVE 和#MERCHANT REGISTRATION FORM RELATIVE

**我的模式窗口**：

![在此处输入图像描述](../Images/e8bc420883c8200c67ee38d792cd078f.png)

**我的观点之一**（75 行）：

```
def patrimonio_view(request, backend_registro_usuario, backend_registro_comerciante, success_url=None, form_class_usuario=None, form_class_comerciante=None,
         disallowed_url='registration_disallowed',
         template_name='home/patrimonio.html',
         extra_context=None):

#PATRIMONIO QUERYS
pat = patrimonio.objects.all()
ciu = ciudad.objects.all()

#USER REGISTRATION FORM RELATIVE
backend_registro_usuario = get_backend(backend_registro_usuario)
if not backend_registro_usuario.registration_allowed(request):
    return redirect(disallowed_url)
if form_class_usuario is None:
    form_class_usuario = backend_registro_usuario.get_form_class(request)

if "Registrar_usuario" in request.POST:
    form_class_usuario = form_class_usuario(data=request.POST, files=request.FILES)
    if form_class_usuario.is_valid():
        new_usuario = backend_registro_usuario.register(request, **form_class_usuario.cleaned_data)
        if success_url is None:
            to, args, kwargs = backend_registro_usuario.post_registration_redirect(request, new_usuario)
            return redirect(to, *args, **kwargs)
        else:
            return redirect(success_url)
else:
    form_class_usuario = form_class_usuario()

if extra_context is None:
    extra_context = {}
context = RequestContext(request)
for key, value in extra_context.items():
    context[key] = callable(value) and value() or value

#MERCHANT REGISTRATION FORM RELATIVE
backend_registro_comerciante = get_backend(backend_registro_comerciante)
if not backend_registro_comerciante.registration_allowed(request):
    return redirect(disallowed_url)
if form_class_comerciante is None:
    form_class_comerciante = backend_registro_comerciante.get_form_class(request)

if "Registrar_comerciante" in request.POST:
    form_class_comerciante = form_class_comerciante(data=request.POST, files=request.FILES)
    if form_class_comerciante.is_valid():
        new_comerciante = backend_registro_comerciante.register(request, **form_class_comerciante.cleaned_data)
        if success_url is None:
            to, args, kwargs = backend_registro_comerciante.post_registration_redirect(request, new_comerciante)
            return redirect(to, *args, **kwargs)
        else:
            return redirect(success_url)
else:
    form_class_comerciante = form_class_comerciante()

if extra_context is None:
    extra_context = {}
context = RequestContext(request)
for key, value in extra_context.items():
    context[key] = callable(value) and value() or value

#WE OBTAIN THE USERS FOR EACH GROUP
usuario_group = Group.objects.get(name="usuario").user_set.all()
comerciante_group = Group.objects.get(name="comerciante").user_set.all()

#RENDER
return render_to_response(template_name,
                          {'form_registro_usuario': form_class_usuario, 
                          'form_registro_comerciante': form_class_comerciante,
                           'patrimonio':pat, 
                           'ciudad':ciu,
                           'usuario_group': usuario_group,
                           'comerciante_group': comerciante_group,
                           },

                          context_instance=context) 
```

**解决方案 - 重构代码**（29 行）：

```
def patrimonio_view(request, 
     template_name='home/patrimonio.html'):

#PATRIMONIO QUERYS
pat = patrimonio.objects.all()
ciu = ciudad.objects.all()

if request.method == 'POST':
    if "Registrar_usuario" in request.POST:
        #USER REGISTRATION FORM RELATIVE
        return register_usuario()

    if "Registrar_comerciante" in request.POST:
        #MERCHANT REGISTRATION FORM RELATIVE
        return register_comerciante()

#WE OBTAIN THE USERS FROM EACH GROUP
usuario_group = Group.objects.get(
   name="usuario").user_set.all()
comerciante_group = Group.objects.get(
   name="comerciante").user_set.all()

#RENDER
return render_to_response(template_name,{
   'patrimonio':pat, 
   'ciudad':ciu,
   'usuario_group': usuario_group,
   'comerciante_group': comerciante_group,
}, context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T03:40:38.987

如果我错过了什么，请告诉我我会修复它。抱歉，我只是无法理解其他代码。

```
def patrimonio_view(request, 
         backend_registro_usuario, backend_registro_comerciante, 
         form_class_usuario=None, form_class_comerciante=None,
         disallowed_url='registration_disallowed', template_name='home/patrimonio.html',
         extra_context=None, success_url=None):

    #PATRIMONIO QUERYS
    pat = patrimonio.objects.all()
    ciu = ciudad.objects.all()

    form_class_usuario = form_class_usuario()
    form_class_comerciante = form_class_comerciante()

    if request.method == 'POST':
        if "Registrar_usuario" in request.POST:
            #USER REGISTRATION FORM RELATIVE
            return user_registration(request, 
                backend_registro_usuario, 
                disallowed_url, 
                form_class_usuario, 
                success_url
                )

        if "Registrar_comerciante" in request.POST:
            #MERCHANT REGISTRATION FORM RELATIVE
            return merchant_registration(request, 
                backend_registro_comerciante, 
                disallowed_url, 
                form_class_comerciante, 
                success_url
                )

    if extra_context is None:
        extra_context = {}
    context = RequestContext(request)
    for key, value in extra_context.items():
        context[key] = callable(value) and value() or value

    #Obtenemos los usuarios de cada grupo
    usuario_group = Group.objects.get(
       name="usuario").user_set.all()
    comerciante_group = Group.objects.get(
       name="comerciante").user_set.all()

    #RENDER
    return render_to_response(template_name,{
       'form_registro_usuario': form_class_usuario, 
       'form_registro_comerciante': form_class_comerciante,
       'patrimonio':pat, 
       'ciudad':ciu,
       'usuario_group': usuario_group,
       'comerciante_group': comerciante_group,
    }, context_instance=context)

def user_registration(request, 
        backend_registro_usuario, form_class_usuario, 
        disallowed_url, success_url):

    backend_registro_usuario = get_backend(backend_registro_usuario)
    if not backend_registro_usuario.registration_allowed(request):
        return redirect(disallowed_url)
    if form_class_usuario is None:
        form_class_usuario = backend_registro_usuario.get_form_class(request)

    form_class_usuario = form_class_usuario(data=request.POST, 
                                            files=request.FILES)
    if form_class_usuario.is_valid():
        new_usuario = backend_registro_usuario.register(request, 
            **form_class_usuario.cleaned_data)
        if success_url is None:
            to, args, kwargs = backend_registro_usuario.post_registration_redirect(request, new_usuario)
            return redirect(to, *args, **kwargs)
        else:
            return redirect(success_url)

def merchant_registration(request, 
        backend_registro_comerciante, form_class_comerciante, 
        disallowed_url, success_url):

    backend_registro_comerciante = get_backend(backend_registro_comerciante)
    if not backend_registro_comerciante.registration_allowed(request):
        return redirect(disallowed_url)
    if form_class_comerciante is None:
        form_class_comerciante = backend_registro_comerciante.get_form_class(request)

    form_class_comerciante = form_class_comerciante(data=request.POST, 
                                                    files=request.FILES)
    if form_class_comerciante.is_valid():
        new_comerciante = backend_registro_comerciante.register(request, 
            **form_class_comerciante.cleaned_data)
        if success_url is None:
            to, args, kwargs = backend_registro_comerciante.post_registration_redirect(request, new_comerciante)
            return redirect(to, *args, **kwargs)
        else:
            return redirect(success_url) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T03:20:57.953

您至少有三个选项可以在多个视图中包含代码：包含标记、上下文处理器和模板继承。这仅取决于哪一个对您的设置最有意义。

[上下文处理器](https://docs.djangoproject.com/en/1.5/ref/templates/api/#writing-your-own-context-processors)可能是将条件逻辑排除在模板之外的最佳选择，因为您需要检查用户是否是匿名的，您可以在处理器中执行服务器端操作：

```
from django.template.loader import render_to_string

def your_context_processor(request):
    if request.user.is_anonymous():
        return {'extra_context': render_to_string('anonymous-only-content.html')}
    else:
        return {} 
```

然后在您的模板中，您可以执行以下操作：

```
{{ extra_context }} 
```

如果填充了该变量，则需要在其中呈现仅匿名代码。这些都是简单的例子，但希望能给你一些想法。

# apache-poi - 使用 Apache POI SXSSF API 使用带有内置格式的模板编写 xlsx

> ID：15400370
> 
> 赞同：0
> 
> 时间：2013-03-14T02:56:40.010
> 
> 标签：apache-poi, xlsx

我正在尝试查看在使用 POI SXSSF API 将数据写入 xlsx 而不是让应用程序使用时，是否可以让模板处理格式（例如：将字符串（数字、日期、十进制值）转换为其本机数据类型）写入数据时使用适当的 setCellValue(Date/int/String/double) 方法。

我测试了这种情况，如下所述，但它似乎不起作用。我会很感激这里的任何建议。

1.  创建了一个 .xlsx 模板，其标题行包含单元格 an_integer、a_decimal_number、a_date 和 a_string。我通过右键单击列并选择“格式化单元格”将标题中的每一列格式化为适当的类型。
2.  使用 SXSSF API 并添加包含数据 121、132.7612、03/13/2013 的行，我是一个字符串，并对所有单元格使用 setCellValue(String) 方法。我期望数据会自动转换为它们各自的类型，因为列被格式化为这样做。但是，这似乎没有发生，生成的 excel 文件仍然将数字和日期视为字符串。

我的模板格式错误吗？我试图做的事情是否可行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:05:10.010

`setCellValue(String)`中的方法[`XSSFCell`](http://poi.apache.org/apidocs/org/apache/poi/xssf/usermodel/XSSFCell.html)会自动将单元格的单元格类型设置为`CELL_TYPE_STRING`，覆盖之前存在的任何单元格类型，从而改变 Excel 格式化单元格值的方式。

尝试使用其中一种重载`setCellValue`方法；他们每个人都根据其参数的类型设置单元格类型：

*   setCellValue(boolean) -`CELL_TYPE_BOOLEAN`
*   setCellValue(Calendar) - `CELL_TYPE_NUMERIC`（Excel 将其日期存储为数字）
*   setCellValue(Date) - `CELL_TYPE_NUMERIC`（Excel 将其日期存储为数字）
*   setCellValue(双) -`CELL_TYPE_NUMERIC`
*   setCellValue(RichTextString) -`CELL_TYPE_STRING`
*   setCellValue(字符串) -`CELL_TYPE_STRING`

# java - 在 Java JFrame 上添加图像 - Netbeans

> ID：15400371
> 
> 赞同：1
> 
> 时间：2013-03-14T02:56:53.060
> 
> 标签：java, image, swing, netbeans, jframe

我正在使用**NetBeans 7.1**编写 Java 代码。我已经创建了一个`JFrame`充满一些`labels, textbox and buttons`. 如何将一些图像`(JPG,PNG,etc...)`从我的 PC 导入到相同的文件中`JFrame`？在框架的特定位置。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T03:04:59.187

1.  在 NetBeans 表单编辑器中打开表单。
2.  从托盘中添加一个`JLabel`到表单
3.  `icon`选择您刚刚添加的标签，然后单击属性旁边的“...”按钮
4.  填写属性。

通常最好将图像驻留在项目文件夹中，从长远来看，这会使部署更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-22T08:52:01.600

1.  将图像复制到您的 Netbeans 项目。
2.  将新标签添加到框架。
3.  选择标签并右键单击->转到属性。
4.  在图标属性中，通过向下箭头选择图像，如图所示。

[![在此处输入图像描述](../Images/db1fd454f0049b2f25c41cc89652e401.png)](https://i.stack.imgur.com/4ZWHn.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-28T19:11:35.557

确保在添加 JLabel 时从 Swing Controls 而不是 AWT 使用它。

# python - 尝试添加 aui 窗格时 wxpython GUI 崩溃

> ID：15400374
> 
> 赞同：0
> 
> 时间：2013-03-14T02:56:57.157
> 
> 标签：python, wxpython

我正在处理的 GUI 有问题。通过单击按钮创建窗格两次，然后每次将其关闭。当我第三次尝试创建它时它会冻结。我已将代码限制为：

```
import wx
import wx.aui as aui

class Controller:
    def __init__(self, app):
        self.view = Frame()
        self.view.btn.Bind(wx.EVT_BUTTON, self.onBtn)

    def onBtn(self, event):
        self.view.CreateTicket()

class Frame(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self, None, wx.ID_ANY, size=(600,400))

        self.panel = wx.Panel(self)

        self.ticketPanel = wx.Panel(self.panel)
        self.ticketPanel.Hide()     
        self.btn = wx.Button(self.panel)

        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add(self.btn)

        self.panel.SetSizer(sizer)

        self.CreatePain()        
        self.Layout()
        self.Show()

    def CreatePain(self):       
        self.mgr = aui.AuiManager(self.panel,
                   aui.AUI_MGR_DEFAULT
                 | aui.AUI_MGR_TRANSPARENT_DRAG
                 | aui.AUI_MGR_ALLOW_ACTIVE_PANE)

    def CreateTicket(self):

        self.mgr.AddPane(self.ticketPanel, aui.AuiPaneInfo().
                         Caption("TradeTicket").
                         Float().FloatingPosition((200,100)).
                         FloatingSize(wx.Size(50, 50)).MinimizeButton(True))
        self.mgr.Update()

if __name__ == "__main__":
    app = wx.App(False)
    controller = Controller(app)
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T06:58:46.627

我认为问题在于您将相同的 wx.Panel 实例 ( `self.ticketPanel`) 添加为窗格。尝试为每个窗格创建一个新窗格。

# android - 如何以编程方式覆盖“由 Vlingo 提供支持的三星”上的“谷歌语音搜索”？

> ID：15400377
> 
> 赞同：13
> 
> 时间：2013-03-14T02:57:22.693
> 
> 标签：android, speech-recognition, android-4.2-jelly-bean

某些设备（如三星 Galaxy S3）预装了[*由 Vlingo 驱动的三星，*](http://www.electricpig.co.uk/2012/06/01/why-every-samsung-galaxy-s3-review-has-missed-the-point-about-s-voice/index.html)而不是[*谷歌语音搜索*](https://play.google.com/store/apps/details?id=com.google.android.voicesearch)。

在我的应用程序中，我想以编程方式覆盖要使用的语音**识别**引擎，以便我的应用程序始终使用 Google 语音搜索。

所以我的问题是：

1.  有没有办法知道**安装了哪些语音****识别**引擎？（如果有，怎么做？）
***   有没有办法判断在用户设置中**选择了哪个语音****识别**引擎？（如果有，怎么做？）***   是否有一种编程方式来**覆盖**用户的选择，以便我的应用程序*始终*调用[Google Voice Search](https://play.google.com/store/apps/details?id=com.google.android.voicesearch)？（如果是这样，如何？）****

 ****帮助将不胜感激

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T16:43:02.320

您所有问题的答案都是“是”。

[createSpeechRecognizer](http://developer.android.com/reference/android/speech/SpeechRecognizer.html#createSpeechRecognizer%28android.content.Context,%20android.content.ComponentName%29)可以指定要使用的识别器的包名。因此，如果您知道包名称，那么您可以覆盖默认值。

要检测可用服务，请使用：

```
List<ResolveInfo> services =
    getPackageManager().queryIntentServices(
        new Intent(RecognitionService.SERVICE_INTERFACE), 0); 
```

有关更多详细信息，请研究[Babble](https://github.com/Kaljurand/babble)的源代码。我不知道这是否是最好的方法（欢迎任何反馈），但它已在我的设备上运行。（Babble 通常假设 Android 4+，但语音识别器检测部分也可能适用于早期版本。）****

# svg - 将动画选项添加到 raphaeljs 饼图

> ID：15400378
> 
> 赞同：1
> 
> 时间：2013-03-14T02:57:22.833
> 
> 标签：svg, raphael, graphael

我想用 raphaeljs 插件绘制动画饼图；我在 g.raphaeljs 库中找到了一个饼图函数（Paper.piechart），这是他们相关的演示

[http://g.raphaeljs.com/piechart2.html](http://g.raphaeljs.com/piechart2.html)

但我不知道如何在不重新渲染这个演示的情节的情况下为这个图表制作动画（当一个事件被执行时）：

[http://raphaeljs.com/growth-pie.html](http://raphaeljs.com/growing-pie.html) draw 换句话说，我想将第二个演示的动画选项添加到第一个演示中。谁能帮我 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-26T11:59:12.917

这是一个拉斐尔饼图的工作演示，它在创建时增长，并在鼠标悬停时具有切片反弹效果：

```
<div id="pie"></div>
<script>
 var paper = Raphael("pie", 400, 200);
 var pie = paper.piechart(
   100, // pie center x coordinate
   100, // pie center y coordinate
   90,  // pie radius
    [18.373, 18.686, 2.867, 23.991, 9.592, 0.213], // values
    {
    legend: ["Windows/Windows Live", "Server/Tools", "Online Services", "Business", "Entertainment/Devices", "Unallocated/Other"]
    }
  );

//animation - grow pie      
pie.each(function(){
    this.sector.scale(0, 0, this.cx, this.cy);
    this.sector.animate({ transform: "s1 1 " + this.cx + " " + this.cy }, 1000, "bounce");
});

// Bounce pie slice
pie.hover(function () {
  this.sector.stop();
  this.sector.animate({ transform: "s1.1, 1.1 " + this.cx + " " + this.cy }, 500, "bounce");
  this.label[0].attr({ r: 7.5 });
  this.label[1].attr({ "font-weight": 800 });
},

function () {
  this.sector.animate({ transform: "s1 1 " + this.cx + " " + this.cy }, 500, "bounce");
  this.label[0].animate({ r: 5 }, 500, "bounce");
  this.label[1].attr({ "font-weight": 400 });

})

</script> 
```

# c++ - C++、count_if 和 equals

> ID：15400382
> 
> 赞同：0
> 
> 时间：2013-03-14T02:57:35.937
> 
> 标签：c++, algorithm, class, countif

我有`struct`一个名字和号码：

```
struct S {
  string name;
  int number;
}; 
```

的对象`S`存储在向量中。向量基于 排序`name`。可能有超过 1 个项目具有相同的`name`.

在遍历向量中的项目时，我试图用来`count_if`检测重复项：

```
for(size_t i = 0; i < v.size(); ++i)
{
  const S& s = v[i];
  int count = count_if(v.begin(), v.end(), XXX);
  // do something with count
} 
```

在上面，我无法弄清楚 XXX 应该是什么。我试图创建一个谓词，但它非常无用，因为没有什么可比较的：

```
bool IsEqualName(const S& s) {
  return s.name == ???;
} 
```

我找到的文档[还有很多不足之处](http://www.cplusplus.com/reference/algorithm/count_if/)。

我觉得我错过了一些非常明显的东西，但我不明白它是什么。谁能指出我的错误？

杰夫

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T03:02:12.757

可以编写一个仿函数来实现这一点：

```
struct FindName
{
  FindName(const std::string& name) : name_(name) {}
  bool operator()(const S& s) { return s.name == name_; }

private:
  std::string name_;
};

int count = count_if(v.begin(), v.end(), FindName("noloader")); 
```

或者如果您使用 C++11，请使用 lambda：

```
int count = count_if(v.begin(), v.end(), 
                     [](const S& s){ return s.name == "noloader"; }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T05:06:20.273

由于您的项目已排序，因此您可以做得比 find_if 更好。在这种情况下，`std::upper_bound`应该可以很好地工作。

由于您的顺序是基于您的`S`，`name`因此从重载开始可能是最简单的`operator<`：

```
struct S { 
    string name;
    int number;

    bool operator<(S const &other) { return name < other.name; }
}; 
```

[顺便说一下，您可以在排序时使用它，如`sort(v.begin(), v.end());`]

要查找每个项目出现的次数，从 v.begin() 开始，并使用`std::upper_bound`找到等于第一个项目的上限，然后将您正在查看的范围的开头更新为`upper_bound`刚刚返回的迭代器，并且重复直到你到达集合的末尾：

```
std::vector<size_t> counts;

auto pos = v.begin();

for (auto prev=v.begin(); prev != v.end(); prev = pos) {
    pos = std::upper_bound(prev, v.end(), *prev);
    counts.push_back(pos - prev);
} 
```

如果您有很多重复项，这至少有可能会更快一些 - 如果您确实有很多重复项（`upper_bound`是对数，其中`find_if`是线性），则速度会更快。

# three.js - 将着色器值传递给全局变量

> ID：15400389
> 
> 赞同：2
> 
> 时间：2013-03-14T02:58:47.417
> 
> 标签：three.js, shader

我在 three.js shadermaterial 中使用这个顶点着色器

```
script id="vs" type="x-shader/x-vertex">

  uniform sampler2D map;
  varying vec2 vUv;

  void main() {

    vUv = uv;
    vec4 color = texture2D( map, vUv );

    float r=color.r;
    float g=color.g;
    float b=color.b;                    

    gl_Position = projectionMatrix * modelViewMatrix ;
  }

</script> 
```

问题是：如何将 r、g 和 b 的值传递给全局变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:55:04.310

从片段着色器获取结果的常用方法似乎是将场景渲染为纹理，然后从该纹理中读取（在您的 javascript 程序中）您想要操作的数据。在文档中查找“渲染到纹理”。

示例： http: [//mrdoob.github.com/three.js/examples/webgl_rtt.html](http://mrdoob.github.com/three.js/examples/webgl_rtt.html)

# function - Haskell 运行时错误：错误：前奏曲。（！！）：索引太大

> ID：15400390
> 
> 赞同：2
> 
> 时间：2013-03-14T02:58:54.550
> 
> 标签：function, haskell, runtime-error, list-comprehension

我在 Haskell 中有一个冗长且有点古怪的函数。

```
(#==#) :: String -> String -> Bool
str1 #==# str2 = (sum[ 1 | index <- [0..(max (length str1) (length str2))], (str1!!index == str2!!index || str1!!index == '$')] == (max (length str1) (length str2))) 
```

**简而言之，此函数检查两个字符串是否相同，如果它们有一个或多个“$”，则认为它们** 相同从 0 到最长字符串的长度。然后将当前索引处的每个字符串的元素与彼此或美元符号进行比较。两者都可以。如果它们是其中之一，则将 1 添加到新列表中，并且如果此新列表的总和等于长度，则该单词是匹配的。

但是，当我尝试运行它时，出现了一个特殊的错误：

```
*Practice> let totals = (sum[ 1 | index <- [1..(max (length str1) (length str2))], (str1!!index == str2!!index || str1!!index == '$')] == (max (length str1) (length str2)))
*Practice> totals
*** Exception: Prelude.(!!): index too large 
```

我一直在做研究，但没有找到任何解决这个特定错误的方法。如果有人对此有所了解，我将不胜感激。

（顺便说一句，错误中的“索引”与我在函数中使用的索引不同）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-14T06:43:22.480

继续`!!`执行此任务表明您正在尝试将另一种语言硬塞到 Haskell 中。请允许我向您指出一个更 Haskelly 的解决方案。据我了解，这个函数执行标准的字符串相等测试，但第一个字符串允许有字符`$`，这是一个可以匹配任何单个字符的“通配符”。

回想一下，`String`在 Haskell 中只不过是一个`Char`. 因此，我们可以在两个列表构造函数上进行模式匹配：空列表和非空列表。匹配两个列表的两种可能性为我们提供了四种可能的组合：

```
(#==#) :: String -> String -> Bool
[]     #==# []     = ???
(x:xs) #==# []     = ???
[]     #==# (y:ys) = ???
(x:xs) #==# (y:ys) = ??? 
```

考虑两个列表是否为空。他们匹配吗？可以肯定地说，他们确实如此。事实证明这是一个重要的基本情况选择，但现在我只是呼吁将空字符串放入原始代码应该产生`True`.

```
[] #==# [] = True 
```

让我们看看中间的两种情况，一种是空的，另一种不是。

```
(x:xs) #==# []     = ???
[]     #==# (y:ys) = ??? 
```

您从未指定长度不均匀的列表应该发生什么。但是，为了保留看起来是您的原始算法的内容，如果第一个列表被填满，`$`那么我们称之为好，否则，它不匹配。所以我们将检查左侧列表的第一个元素，如果是，`$`那么我们将继续检查列表的其余部分。

```
('$':xs) #==# []    = xs #==# []
(x:xs)   #==# []    = False
[]       #==# (_:_) = False 
```

让我们看一个有趣的案例，两者都是非空的。

```
(x:xs) #==# (y:ys) = ??? 
```

如果左边的第一个字符是`$`，那么我们忽略右边的字符，并继续检查。如果绑定到`x`和的字符`y`相等，那么我们继续检查。如果它们不相等，那么我们以 a 停止`False`。

```
('$':xs) #==# (_:ys) = xs #==# ys
(x:xs) #==# (y:ys)
  | x == y    = undefined {- exercise to the reader -}
  | otherwise = False 
```

该技术使用原始递归，而不是列表推导。如果这对您来说似乎很陌生，那么我强烈建议您查看[LYAH > Recursion](http://learnyouahaskell.com/recursion)以了解如何思考 Haskell 方式。

# c++ - 与 c++11 混淆？

> ID：15400391
> 
> 赞同：-7
> 
> 时间：2013-03-14T02:59:09.373
> 
> 标签：c++, c++11

谁能向我彻底解释一下c++11是什么？*而且，我想知道，如果它的本机代码是*c++ ，你将如何在 windows 上升级整个语言。我感到很困惑。谢谢。PS我搜索了几个小时，不要仅仅为此投票。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T03:04:37.873

已经编译的 C++ 程序不受 C++ 更新的影响。只有当您是选择使用支持 C++11 的新版本编译器的**程序员**时， C++ 语言更新才会影响您。它不会影响C++ 程序的**用户**。

此外，它只会影响使用新编译器的个人程序员。它不会影响继续使用旧编译器的程序员。除了极少数情况外，它也不会影响使用新 C++11 编译器但不使用任何 C++11 特定功能的程序员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T07:42:46.317

您可能会将其视为软件的新版本。像 Word 2007 和 Word 2010。

*   较新的版本仍然可以读取旧版本的文档，在极少数情况下您需要进行一些小改动，但一般情况下，您可以继续使用旧文档。
*   当您开始使用 Word 2010 及其提供的新功能时，您的新文档将无法再与 Word 2007 一起使用。
*   没有人强迫您使用 Word 2010，如果您愿意，您仍然可以使用 Word 2007。使用较新版本的人仍然可以阅读您的文档。
*   您偶尔会收到正在使用新版本的人发送的文档，但您无法使用它。

所有这些都以几乎相同的方式适用于 C++03 和 C++11：

*   可以使用 C++11 编译器编译 C++03 程序，仅在极少数情况下您需要进行小的更改，但通常它会起作用。
*   如果您使用 C++11 的功能编写 C++11 程序，C++03 编译器将不会编译您的代码。
*   您不必使用新的 C++11 功能
*   如果其他人的代码正在使用 C++11 特性，而您不想使用 C++11 编译器（或启用编译器的 C++11 模式），则不能简单地使用新代码。

希望这有助于为您创建关于 C++11 的更好的想法！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T03:04:09.297

c++11 是 c++ 的新版本。因为它向后兼容，它仍然可以编译旧的 c++ 代码。此外，向编译器添加新的语言特性不会升级现有代码。

# ruby-on-rails - 如何使用 ruby on rails 构建多维数组

> ID：15400394
> 
> 赞同：2
> 
> 时间：2013-03-14T02:59:21.030
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个带有字段的模型消息：id、message、read、view_count。查看计数是从另一个表计算的，它不在消息模型中

我想要做的是遍历所有消息并跟踪所有未读（读=假）和每个未读的视图计数以输出如下内容：

```
1, "message stuff", false, 14
2, "message stuff", false, 31
3, "message stuff", false, 1 
```

在像这样循环消息时：

```
Messages.each do |m|
end 
```

在循环中，如何构建一个捕获 message.id 和 view_count 的数组。然后如何输出最终结果？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T03:38:27.523

```
mes_fields = Array.new
messages = Array.new
mess = Messages.where("read = ?", false)

mess.each_with_index do |m_row, index|
    m_row.each do |m|
        mes_fields.push(m)
    end
    messages.push(mes_fields[index])
end 
```

然后`message`看起来像

```
[[1, "message stuff", false, 14],
 [2, "message stuff", false, 31],
 [3, "message stuff", false, 1]] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T03:05:34.120

我可以推荐一个哈希吗？

```
message_hash = {}

Messages.where(:read => false).each do |m|
  messages_hash[m.id] = m.view_count
end

puts messages_hash 
```

假设

```
class Messages
  def view_count
    #some view_count calculation code.
  end
end 
```

未经测试，但这应该很接近。

输出

```
{
  11 => 33,
  12 => 11,
  13 => 34,
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T03:30:56.103

尝试这个：

```
Message.where(:read => false).map{ |m| [m.id, m.view_count]}
# => [ [ 1, 14], [ 2, 31], [ 3, 1]] 
```

# jquery - JSON Post 调用错误函数

> ID：15400398
> 
> 赞同：8
> 
> 时间：2013-03-14T03:00:01.177
> 
> 标签：jquery, asp.net-mvc, json

我有这个 jquery post call，它以某种方式调用错误函数，即使它将数据输入数据库非常好。

```
<script type="text/javascript">
    $(document).ready(function () {
        $("#ExtMailCreate").click(function () {
            var url = '@Url.Action("Create")';
            var data = JSON.stringify(SaveExternalMail());
            $.ajax({
                type: "POST",
                url: url,
                data: data,
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    $("#result").append("pass");
                },
                error: function (data) {
                    $("#result").append("error");
                }
            });
        });
    });

    function SaveExternalMail() {
        var costcentrecode = $("#CostCentreCode").val();
        var day = $("#ExtMailDatePicker").val();
        var externalMailItemID = $("#ExternalMailItemID").val();
        var externalMailLocationID = $("#ExternalMailLocationID").val();
        var quantity = $("#Quantity").val();
        return {
            CostCentreCode: costcentrecode,
            Day: day,
            ExternalMailItemID: externalMailItemID,
            ExternalMailLocationID: externalMailLocationID,
            Quantity: quantity
        };
    }
</script> 
```

- 控制器

```
 <HttpPost()> _
    Function Create(ByVal collection As ExternalMail) As JsonResult
        Try
            If ModelState.IsValid Then
                _repositoryForExternalMail.Save(collection, "")
            End If

            Return Json(New ExternalMail With {.CostCentreCode = collection.CostCentreCode, .Day = collection.Day, .Quantity = collection.Quantity}, JsonRequestBehavior.AllowGet)

        Catch ex As Exception
            Return Json("An Error Occurred")
        End Try
    End Function 
```

- - 更新 - -

谷歌浏览器报告以下错误：

> POST localhost/Mail/ExternalMail/Create 403 (Forbidden)
> jquery.min.js:4 send jquery.min.js:4 f.extend.ajax
> jquery.min.js:4 (匿名函数) Create:59 f.event。调度
> jquery.min.js:3 h.handle.i

-- 页面来源

```
 <!DOCTYPE html>
 <html>
 <head>
<meta charset="utf-8" />
<title>Create</title>
<link href="/Mail/Content/Site.css" rel="stylesheet" type="text/css" />
<link rel="stylesheet" type="text/css" href="/Mail/Scripts/jqModal.css" />
<link href="http://cdn.kendostatic.com/2012.2.913/styles/kendo.common.min.css" rel="stylesheet" type="text/css" />
<link href="http://cdn.kendostatic.com/2012.2.913/styles/kendo.dataviz.min.css" rel="stylesheet" type="text/css" />
<link href="http://cdn.kendostatic.com/2012.2.913/styles/kendo.blueopal.min.css" rel="stylesheet" type="text/css" />

     <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js">  </script>
 <script src="/Mail/Scripts/json2min.js" type="text/javascript"></script>
 <script src="/Mail/Scripts/jquery.JSONP.min.js" type="text/javascript"></script>
 <script src="/Mail/Scripts/jquery.validate.min.js" type="text/javascript"></script>
 <script src="/Mail/Scripts/jquery.validate.unobtrusive.min.js" type="text/javascript">         </script>

<script src="http://cdn.kendostatic.com/2012.2.913/js/kendo.all.min.js" type="text/javascript"></script>
<script src="http://cdn.kendostatic.com/2012.2.913/js/kendo.aspnetmvc.min.js" type="text/javascript"></script>
<script src="/Mail/Scripts/modernizr-1.7.min.js" type="text/javascript"></script>
<script type="text/javascript" src="/Mail/Scripts/jqModal.js"></script>

 </head>
 <body>
<div class="page">
    <header>
  <div id="pageheader">
        <div id="pageheader_left">
            <img id="TitleBanner" src=/Mail/Content/Images/titlebanner.jpg alt="TitleBanner"/>
        </div>
        <div id="pageheader_center">

        </div>
        <div id="pageheader_right">
         <a href="/Mail/" title="Click to go to Home Page"><img id="HomeImage" src=/Mail/Content/Images/home.gif alt="Home"/></a>
         <a href="/Mail/Account/About"><img id="AboutImage" src=/Mail/Content/Images/about.gif alt="About"/></a>
          <a href="/Mail/Account/Logoff"><img id="ExitImage" src=/Mail/Content/Images/logoff.gif alt="Exit"/></a>
         </div>    
        <div id="pageheader_lower">
        </div>    
    </div>

     <ul class="k-widget k-reset k-header k-menu" id="Menu"><li class="k-item k-state-default">
 <a class="k-link" href="/Mail/">Home</a></li><li class="k-item k-state-default"><span class="k-link">Manage<span class="k-icon k-i-arrow-s"></span></span><ul class="k-group"><li class="k-item k-state-default"><span class="k-link">External Mail<span class="k-icon k-i-arrow-e"></span></span><ul class="k-group"><li class="k-item k-state-default"><a class="k-link" href="/Mail/ExternalMail">External Mail</a></li><li class="k-item k-state-default"><a class="k-link" href="/Mail/ExternalMailCategory">External Mail Category</a></li><li class="k-item k-state-default"><a class="k-link" href="/Mail/ExternalMailItem">External Mail Item</a></li><li class="k-item k-state-default"><a class="k-link" href="/Mail/ExternalMailCost">External Mail Cost</a></li><li class="k-item k-state-default"><a class="k-link" href="/Mail/ExternalMailLocation">External Mail Location</a></li><li class="k-item k-state-default"><a class="k-link" href="/Mail/ExternalMailInvoice">External Mail Invoice</a></li></ul></li><li class="k-item k-state-default"><span class="k-link">Internal Mail<span class="k-icon k-i-arrow-e"></span></span><ul class="k-group"><li class="k-item k-state-default"><a class="k-link" href="/Mail/InternalMail">Internal Mail</a></li><li class="k-item k-state-default"><a class="k-link" href="/Mail/InternalMailCategory">Internal Mail Category</a></li><li class="k-item k-state-default"><a class="k-link" href="/Mail/InternalMailItem">Internal Mail Item</a></li><li class="k-item k-state-default"><a class="k-link" href="/Mail/InternalMailCost">Internal Mail Cost</a></li><li class="k-item k-state-default"><a class="k-link" href="/Mail/InternalMailLocation">Internal Mail Location</a></li></ul></li><li class="k-item k-state-default"><a class="k-link" href="/Mail/CostCentre">Cost Centre</a></li></ul></li><li class="k-item k-state-default"><span class="k-link">Reports</span></li></ul><script>
jQuery(function(){jQuery("#Menu").kendoMenu({});});
 </script>              
    </header>
    <section id="main">

 <div class="jqmWindow" id="dialog">
     <a href="#" class="jqmClose">Close</a>
 </div>

 <script type="text/javascript">

$(document).ready(function () {

    var exturl = '/Mail/ExternalMail/Create';
    $("#ExtMailCreate").click(function () {

        var dataJSON = JSON.stringify(SaveExternalMail());

        $.ajax({
                    cache: false,
                        type: "POST",
                        url: exturl,
                        data: dataJSON,
                        contentType: 'application/json; charset=utf-8',
                        success: function (data) {
                            showMessage("test", "information");
                        },
                        error: function (xhr, textStatus, errorThrown) {
                            showMessage("An error occurred while adding this record.           Please try again later.", "error");
                        }

                    });

    });

});

function showMessage(message, messageType) {
    $().ready(function () {
        $('#dialog').jqm();

        switch (messageType) {
            case 'information':
                $('#dialog').removeClass("errorMessage");
                $('#dialog').addClass("informationMessage");
                break;
            case 'error':
                $('#dialog').removeClass("informationMessage");
                $('#dialog').addClass("errorMessage");
                break;
            default:
                break;
        }

        $('#dialog').html("<a href=\"#\" class=\"jqmClose\">Close</a><br />" + message);
        $('#dialog').jqmShow();
    });
}

    function SaveExternalMail() {
        var costcentrecode = $("#CostCentreCode").val();
        var day = $("#ExtMailDatePicker").val();
        var externalMailItemID = $("#ExternalMailItemID").val();
        var externalMailLocationID = $("#ExternalMailLocationID").val();
        var quantity = $("#Quantity").val();

        return { CostCentreCode: costcentrecode, Day: day, ExternalMailItemID:      externalMailItemID, ExternalMailLocationID: externalMailLocationID, Quantity: quantity };
    }

 </script>
 <form action="/Mail/ExternalMail/Create" method="post">    <fieldset>
    <legend>ExternalMail</legend>
    <div class="editor-label">
        <label for="ExternalMailLocationID">Please select a Location</label>
    </div>
    <div class="editor-field">
        <select data-val="true" data-val-number="The field ExternalMailLocationID must be a number." data-val-required="The ExternalMailLocationID field is required." id="ExternalMailLocationID" name="ExternalMailLocationID">
 <option value="2">Sydney</option>
 </select>
        <span class="field-validation-valid" data-valmsg-for="ExternalMailLocationID" data-valmsg-replace="true"></span>
    </div>
    <div class="editor-label">
        <label for="CostCentreCode">Please select a CostCentre</label>
    </div>
    <div class="editor-field">
        <select id="CostCentreCode" name="CostCentreCode" size="15"><option value="Test000">Test</option>
      </select>
        <span class="field-validation-valid" data-valmsg-for="CostCentreCode" data-valmsg-replace="true"></span>
    </div>
         <div class="editor-label">
             <label for="ExternalMailItemID">Please select a Mail Item Type</label>
         </div>
         <div class="editor-field">
             <select data-val="true" data-val-number="The field ExternalMailItemID must be a number." data-val-required="The ExternalMailItemID field is required." id="ExternalMailItemID" name="ExternalMailItemID"><option value="4">Test10</option>
      </select>
        <span class="field-validation-valid" data-valmsg-for="ExternalMailItemID" data-valmsg-replace="true"></span>
    </div>
    <div class="editor-label">
        <label for="Day">Please select a Date</label>
    </div>
    <div class="editor-field">
        <input class="k-input" id="ExtMailDatePicker" name="ExtMailDatePicker" type="date" value="19/03/2013" /><script>
     jQuery(function(){jQuery("#ExtMailDatePicker").kendoDatePicker({"format":"d/MM/yyyy","min":new Date(1900,0,1,0,0,0,0),"max":new Date(2099,11,31,0,0,0,0)});});
      </script>
        <span class="field-validation-valid" data-valmsg-for="Day" data-valmsg-replace="true"></span>
    </div>
    <div class="editor-label">
        <label for="Quantity">Please enter the no of Mails</label>
    </div>
    <div class="editor-field">
        <input class="text-box single-line" data-val="true" data-val-number="The field Quantity must be a number." data-val-required="The Quantity field is required." id="Quantity" name="Quantity" type="text" value="" />
        <span class="field-validation-valid" data-valmsg-for="Quantity" data-valmsg-replace="true"></span>
    </div>
    <p>
        <input type="button" value="Create" id="ExtMailCreate" />
    </p>
</fieldset>
 </form><div>
<a href="/Mail/ExternalMail">Back to List</a>
 </div>
      <div id="result">
 </div>

    </section>
    <footer>

    </footer>
</div>
 </body>
 </html> 
```

-- Ajax 请求响应

```
Request URL:http://localhost/Mail/ExternalMail/Create
Request Method:POST
Status Code:403 Forbidden
Request Headersview source
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-GB,en-US;q=0.8,en;q=0.6
Authorization:Negotiate    TlRMTVNTUAADAAAAAAAAAEgAAAAAAAAASAAAAAAAAABIAAAAAAAAAEgAAAAAAAAASAAAAAAAAABIAAAABcKIogUBKAoAAAAP
Connection:keep-alive
Content-Length:113
Content-Type:application/json; charset=UTF-8
Cookie:ASP.NET_SessionId=tg1xrabaigumj3fxooa1satc
DNT:1
Host:localhost
Origin:http://localhost
Referer:http://localhost/Mail/externalmail/Create
User-Agent:Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.22 (KHTML, like Gecko)     Chrome/25.0.1364.172 Safari/537.22
X-Requested-With:XMLHttpRequest
Request Payload
{"CostCentreCode":"B125","Day":"20/03/2013","ExternalMailItemID":"4","ExternalMailLocationID":"1","Quantity":"2"}
Response Headersview source
Cache-Control:private, s-maxage=0
Content-Length:127
Content-Type:application/json; charset=utf-8
Date:Wed, 20 Mar 2013 01:31:21 GMT
Server:Microsoft-IIS/5.1
X-AspNet-Version:4.0.30319
X-AspNetMvc-Version:3.0
X-Powered-By:ASP.NET 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T01:45:00.043

我认为问题在于指定`JsonRequestBehavior.AllowGet`

然后发布到方法：

```
$.ajax({
  type: "POST",
  url: url, 
```

如果数据库正在填充，我们知道存储库代码正在触发。浏览器报告一个 HTTP403，闻起来像是框架抛出了一个安全异常，如果它期望响应 GET 并接收 POST，它可能会这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T20:29:41.337

如果您指定数据类型为 json 但无法将响应解析为 json，则 ajax 请求将进入错误块。

打开chrome并在错误块中放置一个断点并查看数据的值。将内容放在 json 验证器中并检查以确保您的响应是有效的 json。

还将成功和错误函数的方法标志更改为

```
success: function(data, txtStatus, jqxhr){ // code here }
error: function( jqxhr, txtStatus, errorThrown) { // code here } 
```

然后在这些功能中放置断点，您可以检查参数并更清楚地查看发生了什么。

--更新由于您收到403错误代码，请在stackoverflow上查看此答案并检查您指向的文件夹的权限

[发布 asp.net MVC 后禁止 403](https://stackoverflow.com/questions/11043168/403-forbidden-after-publishing-asp-net-mvc)

也看看这个，因为你正在运行 IIS 5.1 它看起来像......它可能是相似的

[在 IIS 5.2 上运行 MVC2 应用程序](https://stackoverflow.com/questions/3506381/running-mvc2-application-on-iis-5-2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T20:55:45.873

尝试将控制器中的方法从 JsonResult 更改为 ActionResult

```
 <HttpPost()> _
    Function Create(ByVal collection As ExternalMail) As ActionResult 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T19:50:42.477

正如 denas 所说，您需要检查返回的 textStatus 和 errorThrown 生成的变量中的内容，因为您可以返回 200 HTTP 代码以外的其他内容，并且您的代码仍然可以正常执行（因为您报告您的记录被添加到数据库）。一个 200 HTTP 代码将触发“成功”功能，我现在不记得了，但 4xx 或 5xx 中的某些内容应该会触发“错误”功能。

这里要考虑的主要是网络服务器的 HTTP 返回代码控制在 jquery ajax 调用中触发什么函数

将您的代码更改为：

```
error: function( jqXHR, textStatus, errorThrown ) {
    console.log(textStatus);
    console.log(errorThrown);
} 
```

并告诉我们你在这些 textStatus 和 errorThrown 变量中有什么。

# html - 未正确调用原型方法

> ID：15400399
> 
> 赞同：0
> 
> 时间：2013-03-14T03:00:11.037
> 
> 标签：html, canvas, timeout, game-loop

对我正在写的这个引擎真的很恼火，但这很好，这就是 Stack Overflow 的用途。所以我有我所有的游戏“实体”原型从一个对象：

```
 function Scene(name, description) {         // Initialize the Scene Object
        /* VARIABLES */
        this.entities = [];

        /* METHODS */
    };

        Scene.prototype.addEntitiy = function(entity) {     // Add an entity to this scene
            this.entities.push(entity);
        } 
```

为了简单起见，我删除了非必要的代码（其他变量和方法）。如您所见，Scene 正在对 addEntity(entity) 进行原型设计。我稍后在代码中实例化两个场景对象（Scene1、Scene2）。场景1似乎没有问题。这是场景2：

```
 // Scene Two
    var Scene2 = new Scene('Play Game', 'Actual game screen for playing Pong!');

    Scene2.addEntity(GameBall);

    Engine.scenes.push(Scene2); 
```

Engine.scenes 包含所有场景。同样，Scene1 完全没有错误（带有一个 addEntity 调用的新场景）。然而，场景二坚持这一点：

```
TypeError: Scene2.addEntity is not a function 
```

Wtf，对 Scene1 工作得很好吗？此外，Scene2 工作正常，直到我添加了第二个要加载的实体（理论上与 GameBall “相同”，除了一些变量值）。因此，为了彻底起见，我在错误出现后立即注释掉了新实体。仍然不是一个功能。我完全删除了新的（有问题的？）行，仍然不是一个函数。从那以后就一直这样。Chrome 和 Firefox 都报告它不是一个函数。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T03:01:41.450

你拼错了`addEntitiy`。
[*那很简单*]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T03:02:53.457

从您的代码看来，您的原型方法拼写错误。它应该是 addEntity，而不是 addEntity。

# javascript - 使用 CSS/Javascript 使背景图像变暗并具有部分透明度

> ID：15400402
> 
> 赞同：7
> 
> 时间：2013-03-14T03:01:23.760
> 
> 标签：javascript, css

我正在使用部分透明的 CSS 精灵（即图像中的对象是不透明的，背景是透明的）。我想使用 CSS 或 Javascript 使图像变暗。我需要让图像改变黑暗程度，为每个黑暗程度制作单独的图像是不切实际的。

如果不是透明背景，我可以在图像顶部添加一个黑色图层并更改该图层的不透明度。

这基本上是我所拥有的：http: [//jsfiddle.net/PXU6j/2/](http://jsfiddle.net/PXU6j/2/)

```
<!-- SO is forcing me to add code -->
<div class=logo>How do I make this darker?</div> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-14T03:14:46.187

将一个带有 alpha 通道的黑色 div 放在它上面：

[http://jsfiddle.net/PXU6j/3/](http://jsfiddle.net/PXU6j/3/)

请注意，我使用

```
background-color: #000000;
opacity: 0.7; 
```

但你也可以使用

```
background-color: rgba(0, 0, 0, 0.7); 
```

改变不透明度，你会得到不同的暗度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T03:10:00.090

那这个呢：

对于每个精灵，**只有一个**完全黑色的图像，但形状与原始图像相同。一个剪影，如果你愿意的话。然后，制作一个容器 div，如下所示：

```
<div class="silhouette">
    <div class="sprite"></div>
</div> 
```

然后，您可以更改`div.sprite`元素的不透明度并达到您想要的效果。我知道这并不能真正解决问题，但我不知道使用 PHP 的另一种方法，它甚至不能完全解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T03:32:51.240

没有跨浏览器兼容的解决方案。

您可以使用[Camanjs](http://camanjs.com/)或[Pixastic 之](http://www.pixastic.com/)类的画布操作，也可以使用[css3 过滤器](https://developer.mozilla.org/en-US/docs/CSS/filter)。这些方法都不适用于非 html5 兼容的浏览器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-16T16:43:42.613

```
Try this:

<!DOCTYPE html>
<html>
    <head>
        <script src="/assets/js/jquery-1.10.2.min.js"></script>
    </head>

    <body>

        <style>
            #testarea1, #testarea2 {
                position:absolute;
                background-color: #666;
                width: 200px;
                height: 200px;
            }
            #testarea2 {
                display: none;
            }
        </style>

        <script>

            $(document).ready(function(){

                $("#testarea1").mouseover(function(){
                    $("#testarea2").css("background-color","yellow");
                    $("#testarea1").fadeOut(500);
                    $("#testarea2").fadeIn(1500);
                });

                $("#testarea2").mouseout(function(){

                    $("#testarea1").css("background-color","#666");
                    $("#testarea2").fadeOut(500);
                    $("#testarea1").fadeIn(1500);
                });

            });

        </script>

        <p>Hover to see effect</p>
        <div id="testarea1">displayarea1</div>
        <div id="testarea2">displayarea2</div>

    </body>

</html> 
```

# php - 从array_search/数组返回结果到字符串错误

> ID：15400413
> 
> 赞同：0
> 
> 时间：2013-03-14T03:02:22.400
> 
> 标签：php

我正在开发一个程序，该程序允许人们通过输入客户 ID 并单击提交按钮来搜索订单记录（姓名、地址、订单金额）。该数组是从前一个屏幕创建的文件中加载的。

我想弄清楚的是如何回显输入的 ID 指定的记录的所有内容。我只做了几个星期的 PHP，任何帮助都会得到帮助。

```
<?php

    $DOCUMENT_ROOT = $_SERVER['DOCUMENT_ROOT'];
    $customers = file("customers.txt");
    $number_of_customers = count($customers);

    if($number_of_customers ==0) {
        echo "<p><No customers found.</strong></p>";

    }
    //$key = array_search('id',$customers); 
    $key = 'id';
    $search=array_search($key,$customers);
    echo $customers;

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T03:19:56.027

首先，正如 Passerby 指出的那样，您*需要*将此信息存储在各种数据库中。这是客户信息这一事实使得对数据库的需求变得更加重要。

现在，就“回声”数据而言..您有什么问题？你可以做你现在正在做的事情并回显纯文本，或者你可以将文本包装在一个元素中并通过 CSS 设置它的样式。

## 数据库

如果您决定采用数据库路线（希望您这样做），您可以运行一个简单的查询，通过传递一个 ID 来检索您想要的所有客户信息：

```
"Select * From Customer Where customer_id = ?" 
```

只是简单的一个例子......

现在回答您的问题：您没有正确使用该功能是对的。`$customers`是数组，因此您的值将存储在`$search`您设置的变量中。

因此：

```
$search = array_search($key, $customer);
echo $search; 
```

[另外，请在此处](http://php.net/manual/en/function.array-search.php)查看该功能的文档

# linux - 了解 setuid 和 sudo

> ID：15400418
> 
> 赞同：6
> 
> 时间：2013-03-14T03:03:00.370
> 
> 标签：linux, linux-kernel, sudo, pam

我试图了解 sudo 在 Linux 用户空间和 Linux 内核中的工作原理。从用户的角度来看，我对它不太感兴趣，但我更感兴趣的是从实现/内核的角度来理解它。（我已经讨论过将它放在 stackexchange 和超级用户上，但我认为这里是最好的。如果我做出错误的选择，请随意移动它......）

因此，当内核完成启动时，它会启动 init 进程，该进程的 uid 为 0。这可能会启动其他进程，例如 ssh 守护进程。这个新进程继承其父进程的 uid，例如 0。sshd 现在还启动子进程，每个连接一个。然后对尝试登录的用户进行身份验证，无论是通过 passwd 文件、影子文件、pam 等。一旦 sshd 通过它使用的任何方法对用户进行身份验证，它就会调用 setuid/seteuid 来更改进程uid。现在我的理解是一个程序只能从 root 到另一个用户，而不是从用户 x 到 root 或用户 x 到用户 y（对吗？）（使用 setuid 调用？）

因此，在这方面，内核实际上只知道分配给文件、进程等的 uid。对用户帐户的身份验证是在用户空间中控制的，并且只允许 root 程序放入非 root 程序中来保证安全。

所以我的问题是，如果上述内容正确，sudo 是如何工作的。我当前正在运行我的非 root 帐户的终端如何临时切换到 root 权限？它是否与 sudo 进程交互？如果以上是错误的，即使有一点我也很想知道我错在哪里。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T03:09:28.557

如果您查看 sudo 二进制文件，您会看到它在可执行文件上设置了 setuid 权限位。这向内核表明它应该始终使用可执行文件所有者的 uid 执行，在 sudo 是 root 的情况下。一旦 sudo 以 root 身份运行，它就可以在 fork/exec 之前进行必要的身份验证和 setuid-syscall。

```
---s--x--x. 2 root root 219272 Jul 17  2012 /usr/bin/sudo 
```

如果您注意“s”和所有者，您就会明白我的意思。

# c# - 单击后更改按钮文本，然后再次单击后将其更改回来

> ID：15400421
> 
> 赞同：14
> 
> 时间：2013-03-14T03:03:15.257
> 
> 标签：c#, .net, oop

我试图在每次单击时更改按钮的文本。

按钮以“ON”开始。当我第一次单击它时，它应该变为“OFF”，当我再次单击它时，它应该变回 On。

我了解如何在单击时将其更改为“OFF”，但我不确定如何检查二次单击，以便将文本更改回“ON”。

到目前为止，这是我的代码：

```
private void OrdersButton_Click(object sender, EventArgs e)
{
       OrdersButton.Text = " Turn Orders Off";
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-14T03:07:55.237

尝试

```
 private void OrdersButton_Click(object sender, EventArgs e)
    {
        if (OrdersButton.Text == "Turn Orders On")
        {
            OrdersButton.Text = "Turn Orders Off";
        }
        else if (OrdersButton.Text == "Turn Orders Off")
        {
            OrdersButton.Text = "Turn Orders On";
        }
    } 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-14T03:16:27.347

我可以看到几个可能的问题，并且可以提供更面向对象的解决方案：添加一个跟踪当前“状态”的属性：

```
 private bool _IsOn;

    public bool IsOn
    {
        get
        {
            return _IsOn;
        }
        set
        {
            _IsOn = value;
            OrdersButton.Text = _IsOn ? "On" : "Off";
        }
    } 
```

并使用事件处理程序来简单地切换属性：

```
private void OrdersButton_Click(object sender, EventArgs e)
{
     IsOn = !IsOn;
} 
```

这样以后更容易访问信息，并且您可以轻松地用您喜欢的任何内容替换开/关 - 如果需要，甚至可以对其进行全球化/本地化。我认为让代码依赖于显示器上的文本是一种非常糟糕的编程习惯......

编辑：另外，使用复选框或切换按钮不会更有意义吗？除了视觉表现不同之外，它可以满足您开箱即用的需求......

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-14T03:05:56.283

只需测试当前文本：

```
OrdersButton.Text = OrdersButton.Text.EndsWith("Off") ? "Turn Orders On" : "Turn Orders Off"; 
```

编辑：正如 Cody 在下面的评论中指出的那样，这不适用于本地化。对于可以更容易本地化的内容，请使用 ViewState（假设初始文本是打开订单）：

```
bool ordersWereOn = (ViewState["OrdersAreOn"] as bool?) ?? false;
ViewState["OrdersAreOn"] = !ordersWereOn;
OrdersButton.Text = ordersWereOn ? "Turn Orders On" : "Turn Orders Off"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-10T11:57:26.410

有很多方法可以做到这一点。
至于我，我可能会使用`Tag`属性，`Control`因为：

1.  它被存储到按钮的变量中。您不需要任何外部变量
2.  所有代码都可以用一个方法编写
3.  您可以随时从其他方法\控件访问它

这是示例代码：

```
private void OrdersButton_Click(object sender, EventArgs e)
{
    bool value = (OrdersButton.Tag as bool?) ?? true;
    OrdersButton.Tag = !value;

    OrdersButton.Text = "Turn Orders " + (value ? "On" : "Off");
} 
```

您还可以设置默认`Tag`值（真或假）并删除对空值的检查。您还可以通过以下方式访问它：

```
public void DoSomeImportantThings()
{
    var areOrdersTurnedOn = (bool)OrdersButton.Tag;
} 
```

这不是最好的方法——它只是另一种方法。
例如，*Roman Gruber*可能已经展示了使用封装在 setter 中的文本更改逻辑的属性的最佳答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-25T10:11:51.167

```
private void button4_Click(object sender, EventArgs e)
{
    if (button4.Text == "Show Password")
    {
        textBox2.PasswordChar = '\0';
        button4.Text = "Hide Password";
    }
    else
    {
        textBox2.PasswordChar = '*';
        button4.Text = "Show Password";
    }
} 
```

# php - 如何使用 php 用句点填充列表项目和价格？

> ID：15400422
> 
> 赞同：1
> 
> 时间：2013-03-14T03:03:16.443
> 
> 标签：php, mpdf

基本上，我使用 mpdf（自定义 PHP 类）为网站用户创建动态 pdf。一切都很好，除了一件事。我在我的网站的 html/css 中使用点前导符来创建这种效果：

[http://jsfiddle.net/j6JWT/7/](http://jsfiddle.net/j6JWT/7/)

```
dl { width: 400px }
dt { float: left; width: 300px; overflow: hidden; white-space: nowrap }
dd { float: left; width: 100px; overflow: hidden }

dt span:after { content: " .................................................................................." } 
```

但是，mpdf 在生成 pdf 时完全忽略了这个 css。如果有人熟悉 mpdf，如果您告诉我为什么会这样，我将不胜感激。

问题是，使用 PHP 实际生成句点可能是一个更好的主意。澄清一下，我想通过PHP实现这个效果[http://jsfiddle.net/j6JWT/7/ 。](http://jsfiddle.net/j6JWT/7/)

我在概念化方面遇到的问题是如何使其动态化。这些项目来自数据库，一些列表项目很长，所以如果你理解的话，它们和价格之间需要更少的点。

任何和所有的帮助都很有价值！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T03:21:26.830

我认为使用 CSS 或 PHP 生成“...”内容不是一个安全的解决方案，因为您不确定策略的行为。这纯粹是一个演示问题。

您可以使用更多 CSS 生成相同的解决方案

```
dl { width: 450px }
dt { float: left; height: 20px; width: 300px; display: block; position: relative; }
dd { float: left; height: 16px; padding-top: 6px; padding-left: 5px; width: 120px; overflow: hidden }
dt { border-bottom: 1px dotted black; }
dt span { border: 0; display: inline-block; height: 20px; position: absolute; left: 0; top: 6px; background-color: #FFFFFF; padding-right: 5px; } 
```

这是一个工作示例：[jsfiddle](http://jsfiddle.net/j6JWT/177/)

您只需检查 PDF 类是否正确处理这些 CSS 规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T03:14:56.173

如果它是等宽字体很容易。

```
echo '<pre>';
// pretend we know the maximum item name strlen, these dots would be that length + 1 at least 
$maxdots='........................................................................';
$maxlen=strlen($maxdots);

$items=array(array('Drug 1', '10ml'), array('Another drug', '20ml'));
foreach ($items as $item){
    $item[1]=substr($maxdots.$item[1], strlen($item[0])-$maxlen);
    echo $item[0].$item[1]."\n";

} 
```

如果不是等宽，另一种方法是使用重复的背景图像

```
<div class="dottedrow">
    <span class="title">Drug 1</span>
    <span class="size">10ml</span>
</div> 
```

使用 CSS

```
.dottedrow{
    background:url(dots.png) bottom left repeat-x; /* or is it repeat-y?*/
    display:block;
}
.dottedrow span{
    background:#fff; /* knock out the image */
    float:left;
}
.dottedrow span.title{
    text-align:left; 
    width:70%;
}
.dottedrow span.size{
        text-align:right; 
        width:30%;
    } 
```

现在我没有想法了。

# ios - 目标 c 中的弱引用会被随机释放吗？

> ID：15400424
> 
> 赞同：0
> 
> 时间：2013-03-14T03:03:50.843
> 
> 标签：ios, objective-c

在下面的示例中，我将 abc 定义为弱引用。

```
@interface myClass : NSObject
    @property (nonatomic, weak) Line *abc

@end

- (id)init
{
    abc = [[Line alloc] init]
} 
```

由于没有人强烈指出 abc 可以随机释放吗？我正在努力理解事物是如何在诸如目标 c 之类的语言中被释放的。由于没有垃圾收集器，究竟是什么将它从内存中删除（只需将其设置为 nil 并调用 dealloc？）？

我想象它的工作方式是当 myClass 设置为 nil 时，它将对所有引用计数为 0 的实例变量调用 dealloc。在 myClass 设置为 nil 之前，abc 将始终在内存中。我对么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T03:30:26.273

`weak`引用是对对象的引用，它不会阻止它被释放。

换句话说，它不会创建所有者关系。而以前你会这样做：

在 ARC 中，您使用 weak 来确保您不拥有它指向的对象。

[在此处](http://longweekendmobile.com/2011/09/07/objc-automatic-reference-counting-in-xcode-explained/)阅读更多信息

# ios - 是否可以以编程方式搜索玩家并使用 gamekit 创建比赛

> ID：15400428
> 
> 赞同：1
> 
> 时间：2013-03-14T03:04:00.987
> 
> 标签：ios, user-interface, game-center, gamekit

我正在尝试创建自己的用户界面来进行匹配，而不是使用游戏中心。我可以通过编程方式找到朋友，但我似乎无法弄清楚是否可以像 wordfeud 一样创建“搜索和请求”用户界面，您可以在其中输入昵称，单击搜索，然后如果玩家使用这个昵称当然存在。

是否可行或者我必须使用本机游戏中心 ui？

谢谢 ：）

# java - hadoop 无法启动从属“致命错误”

> ID：15400430
> 
> 赞同：0
> 
> 时间：2013-03-14T03:04:12.637
> 
> 标签：java, hadoop, startup, fatal-error

我正在用 4 个奴隶启动我的 hadoop，除了一台机器外，一切正常。我以完全相同的方式创建了它们。

运行 ./start-all.sh 时收到的错误是：

```
xxxxx: starting tasktracker, logging to /xxxxx/xxxxx/hadoop/logs/hadoop-xxxxx-tasktracker-xxxxx.out
xxxxx: /xxxxx/xxxxx/hadoop/hadoop-0.20/bin/hadoop: line 413:  7012 Aborted                 nohup $_JAVA_EXEC -Dproc_$COMMAND $JAVA_HEAP_MAX $HADOOP_OPTS -classpath "$CLASSPATH" $CLASS "$@" >"$_HADOOP_DAEMON_OUT" 2>&1 </dev/null 
```

日志的详细信息：

```
/************************************************************
STARTUP_MSG: Starting DataNode
STARTUP_MSG:   host = xxxxx/144.99.120.153
STARTUP_MSG:   args = []
STARTUP_MSG:   version = 0.20.2-cdh3u5
STARTUP_MSG:   build = file:///data/1/xxxxx/topdir/BUILD/hadoop-0.20.2-cdh3u5 -r 580d1d26c7ad6a7c6ba72950d8605e2c6fbc96cc; compiled by 'root' on Mon Aug  6 20:20:46 PDT 2012
************************************************************/
02:29:24.395 [main] DEBUG org.apache.hadoop.security.Groups -  Creating new Groups object
02:29:24.513 [main] DEBUG org.apache.hadoop.security.Groups - Group mapping impl=org.apache.hadoop.security.ShellBasedUnixGroupsMapping; cacheTimeout=300000
02:29:24.529 [main] DEBUG o.a.h.security.UserGroupInformation - hadoop login
02:29:24.529 [main] DEBUG o.a.h.security.UserGroupInformation - hadoop login commit
02:29:24.531 [main] DEBUG o.a.h.security.UserGroupInformation - using local user:UnixPrincipal:xxxxx
02:29:24.533 [main] DEBUG o.a.h.security.UserGroupInformation - UGI loginUser:xxxxx (auth:SIMPLE)
02:29:24.604 [main] DEBUG org.apache.hadoop.fs.FileSystem - Creating filesystem for file:///
02:29:24.627 [main] WARN  org.apache.hadoop.util.DiskChecker - Incorrect permissions were set on /xxxxx/xxxxx/hadoop-hdfs-dev/dfs/data, expected: rwx------, while actual: rwxr-----. Fixing...
02:29:24.630 [main] DEBUG o.a.hadoop.util.NativeCodeLoader - Trying to load the custom-built native-hadoop library...
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  SIGFPE (0x8) at pc=0x0000002a9555d827, pid=6924, tid=1076017504
#
# JRE version: 6.0_25-b06
# Java VM: Java HotSpot(TM) 64-Bit Server VM (20.0-b11 mixed mode linux-amd64 compressed oops)
# Problematic frame:
# C  [ld-linux-x86-64.so.2+0x7827]  double+0xe7
#
# An error report file with more information is saved as:
# /xxxxx/xxxxx/xxxxx/hadoop/hadoop-0.20/hs_err_pid6924.log
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug. 
```

第三个日志的详细信息是：

```
---------------  T H R E A D  ---------------

Current thread (0x0000000040122000):  JavaThread "main" [_thread_in_native, id=6926, stack(0x000000004012b000,0x000000004022c000)]

siginfo:si_signo=SIGFPE: si_errno=0, si_code=1 (FPE_INTDIV), si_addr=0x0000002a9555d827

Registers:
RAX=0x000000000f4d007f, RBX=0x0000002a9d2ab8b8, RCX=0x0000000040228700, RDX=0x0000000000000000
RSP=0x00000000402285e0, RBP=0x00000000402287b0, RSI=0x0000002a9b6c1080, RDI=0x0000002a9b2afe70
R8 =0x0000002a9d2ab8a8, R9 =0x0000000000000000, R10=0x0000000040228838, R11=0x0000000000000000
R12=0x0000002a9b6c1080, R13=0x0000002a9d0a633c, R14=0x0000000000000000, R15=0x0000000000000000
RIP=0x0000002a9555d827, EFLAGS=0x0000000000010246, CSGSFS=0x000000000000a940, ERR=0x0000000000000000
  TRAPNO=0x0000000000000000

Top of Stack: (sp=0x00000000402285e0)
0x00000000402285e0:   0000000040228740 0000002a955919c8
0x00000000402285f0:   0000000040228580 0000001095560de4
0x0000000040228600:   0000000000000000 000000009678c130
0x0000000040228610:   0000002a967f86b8 0000002a967f7f30
...............

Stack: [0x000000004012b000,0x000000004022c000],  sp=0x0000000040228870,  free space=1014k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
C  [ld-linux-x86-64.so.2+0x7827]  double+0xe7
C  [ld-linux-x86-64.so.2+0x8fc0]  _dl_relocate_object+0x410
C  [libc.so.6+0xf8558]  double+0x238
C  [ld-linux-x86-64.so.2+0xae00]  _dl_catch_error+0x60
C  [libdl.so.2+0x1054]  double+0x34

Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
j  java.lang.ClassLoader$NativeLibrary.load(Ljava/lang/String;)V+0
j  java.lang.ClassLoader.loadLibrary0(Ljava/lang/Class;Ljava/io/File;)Z+300
j  java.lang.ClassLoader.loadLibrary(Ljava/lang/Class;Ljava/lang/String;Z)V+347
j  java.lang.Runtime.loadLibrary0(Ljava/lang/Class;Ljava/lang/String;)V+54
j  java.lang.System.loadLibrary(Ljava/lang/String;)V+7
j  org.apache.hadoop.util.NativeCodeLoader.<clinit>()V+25
v  ~StubRoutines::call_stub
j  org.apache.hadoop.io.nativeio.NativeIO.<clinit>()V+17
v  ~StubRoutines::call_stub
j  org.apache.hadoop.io.ReadaheadPool.getInstance()Lorg/apache/hadoop/io/ReadaheadPool;+12
j  org.apache.hadoop.mapred.TaskTracker.<init>(Lorg/apache/hadoop/mapred/JobConf;)V+145
j  org.apache.hadoop.mapred.TaskTracker.main([Ljava/lang/String;)V+52
v  ~StubRoutines::call_stub

---------------  P R O C E S S  ---------------

Java Threads: ( => current thread )
  0x0000002a972d1000 JavaThread "Low Memory Detector" daemon [_thread_blocked, id=7029, stack(0x000000004103a000,0x000000004113b000)]
  0x0000002a972cf000 JavaThread "C2 CompilerThread1" daemon [_thread_blocked, id=7028, stack(0x0000000040f39000,0x000000004103a000)]
  0x0000002a972c9800 JavaThread "C2 CompilerThread0" daemon [_thread_blocked, id=7027, stack(0x0000000040e38000,0x0000000040f39000)]
  0x0000002a972c7800 JavaThread "Signal Dispatcher" daemon [_thread_blocked, id=7026, stack(0x0000000040d37000,0x0000000040e38000)]
  0x0000002a972a6000 JavaThread "Finalizer" daemon [_thread_blocked, id=7025, stack(0x0000000040c36000,0x0000000040d37000)]
  0x0000002a972a4000 JavaThread "Reference Handler" daemon [_thread_blocked, id=7024, stack(0x0000000040b35000,0x0000000040c36000)]
=>0x0000000040122000 JavaThread "main" [_thread_in_native, id=7014, stack(0x000000004012b000,0x000000004022c000)]

Other Threads:
  0x0000002a9729d000 VMThread [stack: 0x0000000040a34000,0x0000000040b35000] [id=7023]
  0x0000002a9b226800 WatcherThread [stack: 0x000000004113b000,0x000000004123c000] [id=7030]

VM state:not at safepoint (normal execution)

VM Mutex/Monitor currently owned by a thread: None

Heap
 PSYoungGen      total 150016K, used 18028K [0x00000000eb2b0000, 0x00000000f5a10000, 0x0000000100000000)
  eden space 128640K, 14% used [0x00000000eb2b0000,0x00000000ec44b318,0x00000000f3050000)
  from space 21376K, 0% used [0x00000000f4530000,0x00000000f4530000,0x00000000f5a10000)
  to   space 21376K, 0% used [0x00000000f3050000,0x00000000f3050000,0x00000000f4530000)
 PSOldGen        total 342848K, used 0K [0x00000000c1800000, 0x00000000d66d0000, 0x00000000eb2b0000)
  object space 342848K, 0% used [0x00000000c1800000,0x00000000c1800000,0x00000000d66d0000)
 PSPermGen       total 21248K, used 9638K [0x00000000bc600000, 0x00000000bdac0000, 0x00000000c1800000)
  object space 21248K, 45% used [0x00000000bc600000,0x00000000bcf69910,0x00000000bdac0000)

Code Cache  [0x0000002a972e7000, 0x0000002a97557000, 0x0000002a9a2e7000)
 total_blobs=321 nmethods=82 adapters=193 free_code_cache=49720000 largest_free_block=21824 
```

我不确定这个问题有人可以帮我吗？我以完全相同的方式创建了奴隶。堆设置为 1GB。太感谢了 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T03:43:57.920

您在本机代码中看到整数溢出或整数除以零（`SIGFPE`由`FPE_INTDIV`. 引起）

[该线程](https://stackoverflow.com/a/4539239/580412)建议添加`-XX:-UseCompressedOops`到 jvm 启动标志可能会有所帮助。

[该线程](http://mail.hdfgroup.org/pipermail/hdf-forum_hdfgroup.org/2011-June/004748.html)表明您的（linux）内核太旧：尝试升级到更新版本。

# actionscript-3 - Flash AS3 读取文本文件

> ID：15400433
> 
> 赞同：2
> 
> 时间：2013-03-14T03:04:47.857
> 
> 标签：actionscript-3, file, load

我只需要从我的电脑或网站上读取一个文本文件。我已经尝试了一切，但到目前为止没有任何效果。它应该非常简单，只需从网站读取文本文件，例如[http://foo.com/foo.txt/](http://foo.com/foo.txt/)，但我已经尝试了所有方法，但我在 Google 上看到的任何内容都无法正常工作。我不在乎如何解决问题，只要我能做到。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T03:22:43.297

要读取文件的内容，只需使用`URLLoader`：

```
// Define the path to the text file.
var url:URLRequest = new URLRequest("file.txt");

// Define the URLLoader.
var loader:URLLoader = new URLLoader();
loader.load(url);

// Listen for when the file has finished loading.
loader.addEventListener(Event.COMPLETE, loaderComplete);
function loaderComplete(e:Event):void
{
    // The output of the text file is available via the data property
    // of URLLoader.
    trace(loader.data);
} 
```

对于另一个域上的内容，您需要托管一个跨域文件才能加载文本文件。

# jquery - 哪个版本的 jQuery 和 jQuery Mobile 一起工作？

> ID：15400436
> 
> 赞同：5
> 
> 时间：2013-03-14T03:04:54.363
> 
> 标签：jquery, jquery-mobile, geolocation

我正在做一个附带项目，并希望它成为一个包含地理定位的移动应用程序。不过，我想从简单的开始。

哪个版本的 jQuery 和 jQuery Mobile 最适合一起使用？我在 iPad 应用程序上使用了一些旧版本，但我想知道更新的版本是否可以真正协同工作。

或者，我最好只使用 jQuery UI 或 Twitter Bootstrap 之类的东西吗？任何有关地理位置的输入都会很好。

非常感谢您的输入，因为我在接下来的 6 个月内对这个应用程序有很大的计划。

非常感谢

感谢任何提供帮助的人，但我决定从头开始构建，使用最新版本的 jQuery，但没有移动或 UI

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T04:49:51.277

根据文档。jquery mobile 1.3.0 是最终的稳定版本。我更喜欢稳定版本，而不是每晚或 alpha 或 beta 版本。在早期推出阶段可能存在错误。 [jQuery手机。](http://api.jquerymobile.com/)

> jQuery Mobile 1.3.0 支持 jQuery 1.7.0 到 1.9.1，

所以我的答案是：使用`Jquery Mobile 1.3.0`和`Jquery 1.9.1`库。

# node.js - 您可以在 Mongoose 中为子文档定义实例方法吗？

> ID：15400440
> 
> 赞同：6
> 
> 时间：2013-03-14T03:05:10.670
> 
> 标签：node.js, mongoose

如果我在 Mongoose 中有一个 Schema，其定义如下：

```
var subSchema = new Schema({
  some: String
});

var topSchema = new Schema({
  subs: [subSchema]
});

var topModel = mongoose.model("Top", topSchema); 
```

是否可以为子文档定义实例方法？我已经尝试了以下（在模型声明之前添加），但它不起作用：

```
subSchema.methods.someFn = function() { 
  return 'blah';
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T19:26:33.413

回答我自己的问题。

我最初想做的是创建一个可用于子文档集合的函数，如：

```
topdoc.subs.someFn(); 
```

但是，我实际上对原始问题中的代码所做的是为子文档本身创建一个函数，如下所示：

```
topdoc.subs[i].someFn(); 
```

这行得通。

据我所知，Mongoose 不支持为子文档集合创建函数。

我通过在 topSchema 中定义一个可以做我想要的方法来解决这个问题。

# sql - 如何在SQL中将同一列中的两个值相除

> ID：15400442
> 
> 赞同：8
> 
> 时间：2013-03-14T03:05:20.920
> 
> 标签：sql, sql-server, sql-server-2008-r2

正如标题所述，我想将同一列中的两个值分开。例如

```
 A             B              C            D
  Shirts         2011           85            0
  Shirts         2012           92      percent change from 2011 to 2012
  Shirts         2013          100      percent change from 2012 to 2013
  Pants          2011           31            0
  Pants          2012           42      percent change from 2011 to 2012
  Pants          2013           55      percent change from 2012 to 2013
  Jacket         2011           10            0
  Jacket         2012           16      percent change from 2011 to 2012
  Jacket         2013           18      percent change from 2012 to 2013 
```

在此示例中，D 列将派生自 C 列，其中 2012 的值从 2011 中减去，然后乘以 100 以获得百分比。

我不知道如何设置查询我尝试做一堆子查询但不知道如何将它们链接在一起。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T03:31:07.620

这是获得您想要的东西的选项

```
SELECT t1.a, t1.b, t1.c,
    CASE WHEN t2.c IS NULL THEN 0 ELSE t1.c - t2.c END AS d,
    CASE WHEN t2.c IS NULL THEN 0 ELSE (1.0 * t1.c - t2.c) / t1.c * 100.0 END AS pct
FROM t t1
LEFT OUTER JOIN t t2 ON t1.a = t2.a
    AND t1.b = t2.b + 1 
```

[SQL 小提琴示例](http://www.sqlfiddle.com/#!3/9fbab/22)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T04:10:29.067

您可以通过自加入来完成此操作：

```
SELECT curr.ClothingType, curr.SalesYear, curr.NumberSold
   , COALESCE((CAST((curr.NumberSold - prev.NumberSold) AS NUMERIC(5,2)) / prev.NumberSold) * 100, 0) AS PercentChange
FROM #Clothes AS curr
LEFT JOIN #Clothes AS prev ON curr.ClothingType = prev.ClothingType
   AND curr.SalesYear = prev.SalesYear + 1 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!3/d6af1/2/0)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T03:21:46.923

如果我正确理解您的要求，您可以使用递归 cte 来完成您的结果。这使用`ROW_NUMBER()`和分区（按）列 A。

*如果您不能保证 B 列中的连续年份，则此方法最有效。如果您始终有连续年份，则 bobs 提供了最佳选择。*

```
with cte as (
  select A, B, C, 
    ROW_NUMBER() OVER (PARTITION BY A ORDER BY B) rn
  from yourtable
  ),
recursive_cte as (
  select A, B, C, 0 prc
  from cte
  where rn = 1
  union all
  select y.A, y.B, y.C, y.C-c.C prc
  from cte y 
    join cte c on y.a=c.a and y.rn=c.rn+1
)
select * 
from recursive_cte
order by a, b 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!3/399ba/1)

这将返回按 A 列分组的每年与上一年之间的差异。为了简单起见，它使用第二个 CTE。如果您想要更改实际百分比，请更新上面的公式。

***- 编辑***

由于听起来您正在寻找百分比增长，请尝试用以下公式替换 yC-cC prc ：

```
cast(y.C as decimal(10,2))/cast(c.C as decimal(10,2)) 
```

`CAST`如果您的数据类型是整数，请使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T03:17:17.043

我同意 Shivan 的观点，但这只是因为我不知道没有 PHP 怎么做。使用 PHP，只需拉出两个总数，进行数学运算并返回带有答案的查询。

**还请务必阅读此内容，因为这是更重要的部分** 您的数学错误。 `(Shirts2011 - Shirts2012) * 100`不会给你百分比变化。它只是给你`100 times the difference of the two`（实际上，基于你的措辞的负面差异）。在数学方面，您想要的是：

```
((Item2012-Item2011)/Item2011)*100 
```

我知道外部括号不是必需的，但它们更容易阅读。百分比变化等于两者之差与初始值之比的 100 倍。

*编辑添加 PHP 代码。*

PHP 看起来很糟糕，但它完成了工作。

```
$conn = new PDO(HOST:DATABASE, USERNAME, PASSWORD);
    $query = "SELECT A, B, C FROM yourTable";
    $st = $conn->prepare($query);
    $st->execute();

$list = array();
while($row = $st->fetch(PDO::FETCH_ASSOC))
    $list[] = $row;

$fill = array();
for($i=1; $i<count($list); $i++)
    if($list[$i]['A'] == $list[$i-1][A])
        $fill[] = $array('A' => $list[$i]['A'],
                         'B' => $list[$i]['B'],
                         'D' => ($list[$i]['C']-$list[$i-1]['C'])/$list[$i-1]['C']*100);

$update = new PDO(HOST:DATABASE, USERNAME, PASSWORD);
    for($i=0; $i<count($fill); $i++){
        $query = "UPDATE yourTable SET D = " . $fill[$i]['D'] . " WHERE A = " . $fill[$i]['A'] . " AND B = " . $fill[$i]['B'];
        $st = $update->prepare($query);
        $st->execute();
    } 
```

只需初始化 2011 D 列 = 0 的表。

```
UPDATE yourTable SET D = 0 WHERE B = 2011; 
```

在火焰开始之前，我知道 foreach 会奏效；我只是认为标准看起来更好（并允许您跳过第一个 2011 值）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T03:23:42.130

尝试这个：

```
select Y2013.*, Y2012.C, Y2013.C, Y2013.C/Y2011.C
from (
  select * from data where B = year(getdate())
) Y2013
left join (
  select * from data where B = year(getdate()) - 1
) Y2012 on Y2012.A = Y2013.A
left join (
  select * from data where B = year(getdate()) - 2
) Y2011 on Y2011.A = Y2012.A
 and  Y2011.A = Y2013.A 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-14T03:14:27.680

尝试这个：

```
SELECT t1.type A, t1.year B, t1.value C,
IF(
  EXISTS(
    SELECT 1 FROM table t2 WHERE t1.type = t2.type AND t1.year = (t2.year - 1)
  ),
  ((SELECT t3.year FROM table t3 WHERE t1.type = t3.type AND t1.year = (t3.year - 1)) - t1.year)/t1.year,
  0
) D
FROM table t1 
```

效率不是很高，但可以做到。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-14T03:38:01.987

你也可以试试这个：

```
UPDATE mytable t1
  INNER JOIN mytable t2 
  ON t1.A = t2.A AND t2.B = t1.B - 1
SET t1.D = ((t1.C - t2.C)  / t2.C) * 100; 
```

见[小提琴](http://sqlfiddle.com/#!2/dbb43/1/0)。

假设您已经将 0 作为 D 的默认值。如果没有，只需在运行此查询之前将所有行的值设置为 0。

# spring-mvc - Spring MVC——java.lang.ClassCastException

> ID：15400445
> 
> 赞同：3
> 
> 时间：2013-03-14T03:05:40.340
> 
> 标签：spring-mvc, tomcat7, classcastexception, http-error

希望这将是这个 Spring MVC 新手的最后一个问题。当我尝试在 Tomcat 7.0 上调用 Spring 3.2 MVC Web 应用程序的首页时，我在控制台中收到 HTTP 错误 500，并出现以下错误。

控制台错误：

```
SEVERE: Servlet.service() for servlet [jcbulboard] in context with path [/jcbulboard] threw exception [Unable to initialize TldLocationsCache: org.apache.tomcat.util.scan.StandardJarScanner cannot be cast to org.apache.tomcat.JarScanner] with root cause
java.lang.ClassCastException: org.apache.tomcat.util.scan.StandardJarScanner cannot be cast to org.apache.tomcat.JarScanner
    at org.apache.jasper.compiler.JarScannerFactory.getJarScanner(JarScannerFactory.java:39)
    at org.apache.jasper.compiler.TldLocationsCache.init(TldLocationsCache.java:222)
    at org.apache.jasper.compiler.TldLocationsCache.getLocation(TldLocationsCache.java:184)
    at org.apache.jasper.JspCompilationContext.getTldLocation(JspCompilationContext.java:607)
    at org.apache.jasper.compiler.Parser.parseTaglibDirective(Parser.java:409)
    at org.apache.jasper.compiler.Parser.parseDirective(Parser.java:475)
    at org.apache.jasper.compiler.Parser.parseElements(Parser.java:1427)
    at org.apache.jasper.compiler.Parser.parse(Parser.java:138)
    at org.apache.jasper.compiler.ParserController.doParse(ParserController.java:242)
    at org.apache.jasper.compiler.ParserController.parse(ParserController.java:102)
    at org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:198)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:373)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:353)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:340)
    at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:646)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:357)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)
    at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:262)
    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1265)
    at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1016)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:965)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:859)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:883)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:781)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:250)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:166)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="2.4"
    xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
    <display-name>Job Connections Bulletin Board</display-name>

    <servlet>
        <servlet-name>jcbulboard</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>jcbulboard</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <welcome-file-list>
        <welcome-file>Welcome.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

jcbulboard-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

    <context:annotation-config />

    <context:component-scan base-package="com" />

    <mvc:annotation-driven />

    <bean id="viewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="suffix">
            <value>.jsp</value>
        </property>
    </bean>
</beans> 
```

Tomcat罐子：

```
annotations-api.jar
catalina-ant.jar
catalina-ha.jar
catalina-tribes.jar
catalina.jar
ecj-3.7.2.jar
el-api.jar
jasper-el.jar
jasper.jar
jsp-api.jar
servlet-api.jar
tomcat-api.jar
tomcat-coyote.jar
tomcat-dbcp.jar
tomcat-i18n-es.jar
tomcat-i18n-fr.jar
tomcat-i18n-ja.jar
tomcat-jdbc.jar
tomcat-util.jar 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T15:52:53.340

通过从我的 lib 和类路径中删除 Tomcat 文件解决了问题，因为 Tomcat 已经包含它们。感谢 DwB 的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T12:11:33.413

我相信这是一个图书馆问题。我发现[这篇文章](http://mail-archives.apache.org/mod_mbox/tomcat-users/201210.mbox/%3CCAL_hNmZJbEddrjzFfNL3Mcz6He1voiSKg2PDhM9ym1UgjM2bRg@mail.gmail.com%3E)可能会提供一种方法来确定违规类的加载位置。

# ruby - 在while循环中运行的ruby Tk应用程序显示两次然后停止响应

> ID：15400447
> 
> 赞同：3
> 
> 时间：2013-03-14T03:05:53.817
> 
> 标签：ruby, loops, tk

我对 ruby​​ 还很陌生，我正在尝试实现一个 Tk 应用程序，该应用程序将显示一个窗口，提示在一定间隔内输入。在间隔之间，我希望窗口不显示在任何任务栏等中，因此我实现了以下代码，第一次似乎可以完美运行，但在窗口第二次显示后，我在TkEntry 并单击 TkButton 窗口被关闭并且永远不会返回。我尝试在关键位置进行一些“放置”调用，以查看发生了什么，似乎它甚至从未超过对“displayUi”的调用。

*编辑：我在 Windows 7 系统上运行 ruby​​ 1.9.3p385 (2013-02-06) [i386-mingw32] （以防有什么不同）

任何帮助（即使它提供不同的机制来实现相同的目标）将不胜感激，但请记住，我是一个红宝石新手。谢谢！

```
require "tk"

class Sample
    attr_accessor :root, :active
    @active = false

    def initialize
        # init
    end

    def entry (task)
        # do some work here

        @active = false
    end

    def displayUi ()
        @active = true

        if (@root.nil?)
            @root = TkRoot.new { title "Sample App" }
        else
            # already running just restart
            Tk.restart
        end

        TkLabel.new(@root) {
            text  'Sample Text'
            pack { padx 15; pady 15; side 'left' }
        }

        statusInput = TkEntry.new(@root) {
            pack('side'=>'left', 'padx'=>10, 'pady'=>10)
        }
        statusInput.focus

        response = TkVariable.new
        statusInput.textvariable = response

        TkButton.new(@root, :text => "Ok", :command => proc { entry(response.value); @root.destroy }) {
            pack('side'=>'left', 'padx'=>10, 'pady'=>10)
        }
        Tk.mainloop
    end
end

i=0
st = Sample.new
while (true)
    if (!st.active)
        st.displayUi()
    end
    sleep(1) 
end 
```

# security - Silex / Symfony2 Remember Me 身份验证用户界面 RedBean Wrapper

> ID：15400450
> 
> 赞同：6
> 
> 时间：2013-03-14T03:06:01.413
> 
> 标签：security, symfony, silex, remember-me, redbean

我一直在尝试使用 RedBean ORM ( [http://redbeanphp.com](http://redbeanphp.com) ) 来实现 Silex 安全提供程序包的 UserInterface 和 UserProviderInterface。

由于 RedBean ORM 为其对象处理函数的方式，我需要将 bean 对象包装在另一个类中。

这对于身份验证非常有用，但无法通过“记住我”功能的测试。

我注意到安全包沿链的某处序列化了对象。

我想这可能是错误的原因，所以我在包装类中为“id”和“password”创建了属性，并使用 __sleep 和 __wakeup 方法在睡眠期间忽略 bean 并在唤醒时重新加载它。尽管在 __wakeup 期间一切似乎都正常加载，但“记住我”功能的测试仍然失败。

我已经为我的代码创建了一个 github 存储库。如果有人有任何想法，我将不胜感激！

**出于某种原因，RedBean、Silex 和 PHPUnit 不允许它们自己包含在存储库中。一个简单的作曲家更新应该为你拉下来。**如果有人对原因有任何想法，我也将不胜感激。

**可以在以下位置找到 github 存储库：**

[https://github.com/christianmagill/silex-redbean-security](https://github.com/christianmagill/silex-redbean-security)

适用的文件是

**在数据库中创建测试用户：**

/setup.php

**要运行测试：**

/index.php

**我的用户界面实现：**

/src/App/Model/UserSecurityWrapper.php

**我的 UserProviderInterface 实现：**

/src/App/Model/UserProvider.php

**我修改后的测试：**

/src/App/Test/RememberMeRedBeanServiceProviderTest.php

**原测试：**

/vendor/silex/silex/tests/Silex/Tests/Provider/RememberMeServiceProviderTest.php

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T23:27:43.780

问题出在我的自定义 UserProvider 的 supportsClass 方法上。我没有考虑命名空间。似乎此函数不是为基本身份验证调用的，而是记住我提供程序所需要的。

# php - 检索数据库时间验证

> ID：15400451
> 
> 赞同：0
> 
> 时间：2013-03-14T03:06:05.130
> 
> 标签：php, mysql

我目前正在使用 PHP 进行课程安排。我想要发生的是通知用户计划是否已经存在或者它是否与数据库中的其他计划重叠。

对于每个时间表，我需要考虑三件事。时间、日期和房间。

例子：

**DB现有：** MWF 9:00am - 10:00am；A室

* * *

**用户输入#1：** MWF 9:00am - 10:00am；A室

*通知：计划现有。*

**用户输入#2：** MWF 8:00 - 10:00am；A室

**用户输入#3：** MWF 9:30 - 10:00am；A室

*通知：计划重叠。*

请出主意。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T03:54:29.460

这是伪代码中的快速而肮脏的解决方案

表房间（Room_id [int]，Room_name [varchar]）
表 room_use（星期日 [bit]，星期一 [bit]，星期二 [bit]，星期三 [bit]，星期四 [bit]，星期五 [bit]，星期六 [bit] , Start_time [时间], End_time [时间])

```
Start transaction;
select count(*) as n from Room_use 
where Room_id=?  and  Time between ? and ?  and
#build this dynamically with php
(Sunday=1 or Monday=1 or Tuesday=1 or Wednesday=1 or Thursday=1 or Friday=1 or Saturday=1)

if n>0 rollback
else insert into room_use (Room_id, Sunday, Monday .......) values (?,?,?......)
commit; 
```

# php - jQuery 超时等待服务器响应

> ID：15400452
> 
> 赞同：0
> 
> 时间：2013-03-14T03:06:08.797
> 
> 标签：php, javascript, jquery

背景：

*   我有两个页面（index.php 和 script.php）。
*   我有一个从 index.php 调用 script.php 的 jQuery 函数。
*   script.php 将进行大量数据处理，然后将该数据返回给 index.php，以便将其显示给用户。

问题：

*   index.php 似乎正在超时，因为 script.php 需要很长时间才能完成。script.php 有时可能需要长达 4 小时才能完成处理，然后才能将数据返回给 index.php。
*   我说 index.php 超时的原因是 b/c 它永远不会更新，并且即使在 script.php 停止处理之后也只是用沙漏坐在那里。
*   我确定 script.php 确实成功完成了处理 b/c 我也在将输出写入日志文件，并看到所有内容都在处理中。
*   如果 script.php 处理的数据不多，那么 index.php 将按预期更新。
*   调用 script.php 时，我没有在 index.php 内的函数中设置任何超时值。

在等待很长时间 script.php 完成后，是否有更好的方法让 index.php 更新？我正在使用 FireFox，这可能是 FireFox 的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T03:11:41.527

您是否真的希望 ajax 调用需要四个小时才能响应？这在网络和浏览器的正常工作方式中没有什么意义。我强烈建议重新设计。

也就是说，jQuery 的`$.ajax()`调用有一个超时值，您可以将其设置为此处描述的选项：http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)。我不知道浏览器是否允许将其设置为长达四个小时并且仍然可以正常运行。在任何情况下，要求保持浏览器连接打开并持续四个小时都不是一个高概率的操作。如果有一个短暂的打嗝，你会怎么做？重新开始？这不是一个好的设计。

作为重新设计，我建议您将问题分解成更小的部分，这些部分可以在更短的 ajax 调用中得到满足。如果你真的想要一个四小时的操作，那么我建议你用一个 ajax 调用开始操作，然后每隔几分钟从浏览器轮询一次，询问工作何时完成。最终完成后，您可以检索结果。这将与 ajax 调用和浏览器的正常工作方式更加兼容，并且如果在四个小时内出现短暂的互联网故障，它也不会受到影响。

如果可能，您的第一个 ajax 调用还可以返回操作可能需要多长时间的近似值，这可以在等待结果的浏览器中提供一些有用的 UI。

这是一种可能性：

步骤 1\. 发送请求作业开始的 ajax 调用。立即收到作业 ID 和有关作业预计时间的任何相关信息。

步骤 2\. 根据作业的估计时间计算轮询间隔。如果估计是四个小时，而且估计通常是准确的，那么您可以设置一个计时器，并在两个小时后再次询问。在请求数据时，您发送第一个 ajax 调用返回的作业 ID。

第 3 步。当您接近预计完成时间时，您可以将轮询间隔缩小到几分钟。最终，您将收到一个轮询请求，说明数据已完成并将数据返回给您。如果我正在设计服务器，我会将数据缓存在服务器上一段时间，以防客户端出于任何原因再次请求它，这样您就不必重复四个小时的过程。

* * *

哦，然后我会考虑更改我服务器上的设计，以便每隔四个小时定期请求任何内容。它应该以某种批处理方式（例如，一天几次）预先构建和预先缓存，或者应该重做整个方案，以便可以在不到一分钟而不是四个小时内满足常见查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T03:11:27.093

是否可以定期将响应发送回 index.php 只是为了“让它保持活力”？如果没有，也许将您的脚本拆分为几个较小的脚本，并以一个小时为单位运行它们，而不是您上面提到的 4 小时。

# c# - 拿不到！此 SqlParameterCollection 不包含具有 ParameterName 的 SqlParameter。存储过程参数

> ID：15400453
> 
> 赞同：1
> 
> 时间：2013-03-14T03:06:18.317
> 
> 标签：c#, asp.net, stored-procedures

我知道这个问题已经被问过很多次了，并且我已经阅读了很多很多答案，但我无法弄清楚什么是错的。已经好几个小时了。任何帮助将不胜感激。我只是想在 ASP 页面中调用存储过程，但无法正确添加参数，得到它不在集合中的异常。

我已按如下方式修改了我的过程，以尝试使其简单并隔离问题。

```
 ALTER PROCEDURE [dbo].[up_validateUserWithClinicCount]     
@HTID       INT = 0,
@ValidUserID    INT OUTPUT,
@MultiClinicFlag    INT OUTPUT
AS
DECLARE @vClinicCount   INT = null
DECLARE @vUserValid     INT = null
BEGIN

SET @ValidUserID = 2
SET @MultiClinicFlag = 1
END; 
```

和 C# 代码

```
String connectionString = System.Configuration.ConfigurationManager.ConnectionStrings["PC3PaymentConnection"].ConnectionString;
        using (SqlConnection connection = new SqlConnection(connectionString))
        {
            connection.Open();
            using (SqlCommand cmd = new SqlCommand("up_validateUserWithClinicCount", connection))
            {

                cmd.CommandType = CommandType.StoredProcedure;

                cmd.Parameters.AddWithValue("@HTID", htId);

                SqlParameter uidOut = new SqlParameter("@ValidUserID", SqlDbType.Int);
                uidOut.Size = 4;
                uidOut.Direction = ParameterDirection.Output;
                cmd.Parameters.Add(uidOut);

                SqlParameter pMultiClinics = new SqlParameter();
                pMultiClinics.ParameterName = "@MultiClinicFlag";
                pMultiClinics.SqlDbType = SqlDbType.Int;
                pMultiClinics.Direction = ParameterDirection.Output;
                cmd.Parameters.Add(pMultiClinics);

                try
                {
                    cmd.ExecuteNonQuery();
    //--> Error points to the next line, and I have tried to use int.parse rather than convert   also, with the same error -- parameter not in collection
                    MultiClinics = Convert.ToInt16(cmd.Parameters["pMultiClinics"].Value);
                    PC3User = Convert.ToInt16(uidOut.Value.ToString());
                }
                catch (SqlException sqlEx)
                {
                    LbMsg.ForeColor = System.Drawing.Color.Red;
                    LbMsg.Text = sqlEx.Message;
                }
            }
        } 
```

谢谢，如果你能看到我错过了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T03:11:57.723

您已经有参数的对象引用，您不需要从参数集合中获取它。此外，sql int 是 32 位的。

```
MultiClinics = (int)pMultiClinics.Value; 
```

要从参数集合中检索，请使用您给它的 ParameterName：

```
MultiClinics = (int)cmd.Parameters["@MultiClinicFlag"].Value; 
```

# java - 在httpclient 4.xx中，当我们配置PoolingClientConnectionManager到httpclient时，需要手动释放连接吗？

> ID：15400458
> 
> 赞同：3
> 
> 时间：2013-03-14T03:06:24.940
> 
> 标签：java, httpclient, apache-httpclient-4.x

# 环境：</h1>

*   爪哇 6
*   Apache HttpClient 4.2.3

# 问题详情：

按照 httpclient 手册，当我使用***DefaultHttpClient***而不配置任何连接管理器时。我们需要让连接管理器关闭。

但是当我在很多服务器上有很多请求时，我会将 PoolingClientConnectionManager 配置为连接管理器。对于这种情况，我在 Apache 网站上没有找到任何参考 -**我应该做些什么来释放特定 httpclient 请求的连接吗？还是httpclient会在框架级别自动完成？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:27:01.567

是的你是。连接管理器将可用连接分配给各个请求，但他们无法知道特定连接是否仍在使用中。处理响应时，HttpClient 仅将消息头读取到内存中，而消息内容直接从底层连接流式传输。消费者有责任通过关闭与响应对象关联的内容输入流来触发返回给管理器的连接释放。

# api - 跨地图 API 的标准化国家代码？

> ID：15400461
> 
> 赞同：0
> 
> 时间：2013-03-14T03:06:39.590
> 
> 标签：api, geolocation, maps, standards

我使用谷歌地图地理定位 API 来获取用户的国家和城市，然后如果失败，作为后备我使用 Maxminds Geo IP City 服务通过 IP 地址获取粗略位置。两个 API 都有国家代码，这些代码在整个地图 API 世界中是否标准化，例如英国是全部是英国还是部分是英国？我试图弄清楚我是否可以将景点与国家代码列表联系起来，就像一个国家代码与许多景点一样。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:10:41.067

我不确定每个 Map API 是否都会使用它，但我发现可能有一个 ISO 标准[http://en.wikipedia.org/wiki/ISO_3166-1，API](http://en.wikipedia.org/wiki/ISO_3166-1) 遵循这样的标准是合乎逻辑的。

# javafx-2 - JavaFX WebView 以编程方式设置缩放

> ID：15400468
> 
> 赞同：4
> 
> 时间：2013-03-14T03:07:47.310
> 
> 标签：javafx-2, javafx

有没有办法以编程方式设置 JavaFX WebView 的缩放？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T10:16:43.100

API 在即将到来的 JavaFX 8 中可用。

```
webView.setZoom(0.5); 
```

您可以在此处下载 JDK 8（包括 FX8）的早期访问版本：[http ://www.oracle.com/technetwork/java/javase/downloads/ea-jsp-142245.html](http://www.oracle.com/technetwork/java/javase/downloads/ea-jsp-142245.html)

# php - Jquery.Ajax POST 更新查询

> ID：15400470
> 
> 赞同：1
> 
> 时间：2013-03-14T03:07:55.313
> 
> 标签：php, javascript, jquery, ajax

我正在寻找一种无需发布整个页面即可更新我的数据库的方法。

我试图让这个尽可能简单。

我正在建立一个表，其中包含相关数据库中的一些信息。当我点击一个 TD 时，我将 TD 中的内容切换到一个文本框，并且在该文本框的 onblur 事件上，我想更新数据库中的特定字段。

我需要在另一个 URL 上请求一个 POST（或者只要它不刷新整个页面）以进行查询以更新该字段。

到目前为止我所拥有的不起作用......（假设函数的参数没问题）

**文件.js**：

```
function update_configs(c_value, c_id, c_field) {
    $.ajax({
        url: "/config_update.php",
        type: "post",
        data: { value: c_value, id: c_id, field: c_field }
    });
} 
```

**config_update.php：**

```
$conn = new PDO('mysql:host=localhost;dbname=myDatabase', $username, $password);

$conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

$conn->query("UPDATE table SET " . $_POST['field'] . " = " . $_POST['value'] . " WHERE id = " . $_POST['id']); 
```

# php - 将 javascript 调用转换为 php 的最有效方法（与 Wordpress 无限滚动/社交按钮问题有关）

> ID：15400471
> 
> 赞同：3
> 
> 时间：2013-03-14T03:08:22.627
> 
> 标签：php, javascript, wordpress, infinite-scroll

**简介：**我是 php 和 Javascript 的新手，并且一直在尝试为我的网站解决[这个问题（](https://stackoverflow.com/questions/10212686/social-icons-not-working-with-infinite-scrolling-on-wordpress)[这里](https://stackoverflow.com/questions/10212686/social-icons-not-working-with-infinite-scrolling-on-wordpress)是这个问题的另一个版本），但是在实施[LocalPCguy](https://stackoverflow.com/users/228429/localpcguy)的答案时遇到了麻烦。（简而言之：问题是激活无限滚动后，社交按钮适用于加载的第一个帖子，但不适用于随后加载的帖子）。

*   我正在使用 WordPress 他们，我已经将我的社交按钮添加到一个现有的 php 文件中，该文件生成每个帖子的大部分外观。我似乎将它们添加到正确的位置，因为按钮出现在我希望它们出现在每个帖子上的位置（仅适用于页面上的第一个）。像其他两个发布这个问题的人一样，我使用[digg digg](http://wordpress.org/extend/plugins/digg-digg/)作为我的社交插件。

*   目前，生成社交按钮的 php 文件中的代码如下所示：

    ```
    <div class="sharing-button">
        <?php dd_google1_generate('Compact (20px)') ?>                                                          
    </div> 
    ```

就像我说的那样，这会使按钮出现在第一个加载的帖子上，但是一旦无限滚动尝试加载其他帖子，社交按钮就不会出现在这些帖子上。

现在我尝试了以下方法：

*   在上面或下面添加代码（取自[这里](https://stackoverflow.com/questions/10212686/social-icons-not-working-with-infinite-scrolling-on-wordpress)的答案），或者在我`<div>`包含 php 文件中的按钮的内部。

    ```
    if (typeof gapi !== "undefined") { gapi.plusone.go(); } 
    ```

*   那没有用，我认为这是因为 .php 文件需要某种信号才能知道它需要运行 javascript 操作。所以我环顾四周，发现了一些关于如何做到这一点的建议，[这里](https://stackoverflow.com/questions/7898570/how-can-i-can-write-javascript-between-two-tags-in-html)和[这里](http://www.frihost.com/forums/vt-109752.html)。在这两种情况下，我都没有设法让按钮正确显示。以下是这些尝试中最不愚蠢的：

    ```
    <?php
        echo '<script type="text/javascript"> 
            if (typeof gapi !== "undefined") { gapi.plusone.go(); }';
        echo '</script>';
    ?> 
    ```

*   我还想也许我需要将一个参数传递给`gapi.plusone.go()`，并且我尝试传递我`<div>`上面的共享按钮，但这也不起作用（php 块中的 javascript 脚本中的 php 代码......并没有寄予厚望）。

在这一点上，我不确定该怎么做——我觉得解决方案可能很简单，但我完全陷入困境，花了几个小时阅读关于 javascript 集成到 php 等的线程。

有谁知道如何将[Javascript 解决方案](https://stackoverflow.com/questions/10212686/social-icons-not-working-with-infinite-scrolling-on-wordpress)应用于我的 .php 依赖的 Wordpress 主题？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-25T09:13:08.663

您需要启动按钮的 javascript 以便它们工作，因为无限滚动使用 ajax 加载下一组帖子。我发现了一个例子，但如果插件使用 FBML，它只适用于 facebook：

```
$(document).ajaxComplete(function(){
    try{
        FB.XFBML.parse(); 
    }catch(ex){}
}); 
```

我正在使用来自 facebook 的自定义实现 Like Box 和无限滚动，这很好用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T23:30:16.427

简短的回答：这是不可能的。

长答案：第一个是 PHP，第二个是 javascript。PHP“程序”在服务器上运行，它是您的网络提供商的服务器。该服务器可以解决所有 PHP 的问题。完成此操作后，网站的文件将发送到您的计算机。除其他内容外，它还包含 javascript。

而这个 javascript 只能在您正在查看的计算机上运行。一旦您的浏览器加载页面并开始运行 javscript，再向服务器询问更多信息已经太迟了。

有一些技术允许这样做（AJAX 是关键字），但这是另一个问题:-)

# android - 我应该扩展 ListActivity 吗？（到目前为止，在没有它的情况下已经运行良好）

> ID：15400476
> 
> 赞同：1
> 
> 时间：2013-03-14T03:08:45.020
> 
> 标签：android, list, listview, android-listview, listactivity

我正在开发一个应用程序，其目的是显示一个包含数据库中一些内容的列表视图。所以我有一个名为 ResultListViewActivity 的活动（扩展了 ListActivity 以外的东西！），其中我有一个 displayListView() 方法。

到目前为止一切正常：我可以看到我的列表视图，我的数据库中的内容完美显示，我可以在我的 XML 文件中按照我想要的方式排列它，所有这些都不需要扩展 ListActivity 类。
我的下一步是设置一个 onClickItemListener 以根据单击的按钮打开一个具有不同内容的新活动。

每次我阅读教程时，总是要使用大量的东西，使用适配器、持有者模式、内容提供者等创建其他类。我不明白其中的一半，在我的应用程序中，我的 ListView 只有一个类，它可以工作不用使用我在教程中读到的所有东西就可以了。所以这是我的问题：我最终是否必须找到一种扩展 ListActivity 的方法（例如使用 onClickItemListener 方法）？

这是我显示列表视图的活动代码：

```
public class ResultListViewActivity extends Base_Activity {

private SimpleCursorAdapter cursorAdapter;
private DatabaseAdapter dbHelper;
ListView listView;
TextView poititle; 
private static String TAG = ResultListViewActivity.class.getSimpleName();

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_result_list_view);

    poititle = (TextView) findViewById(R.id.poititle);
    dbHelper = new DatabaseAdapter(this);
    dbHelper.open();

    displayListView();
}

 private void displayListView() {

    Bundle bundle = getIntent().getExtras();
    String title = bundle.getString("title", "Choose here :");
    String inInterval = bundle.getString("inInterval"); 
    poititle.setText(title);

    Cursor c = dbHelper.findPoiInTable(inInterval);

            String[] columns = new String[] { DatabaseAdapter.COL_NAME, DatabaseAdapter.COL_STREET, DatabaseAdapter.COL_WEBSITE };
    int[] to = new int[] {R.id.name, R.id.street, R.id.website};
    cursorAdapter = new SimpleCursorAdapter(this, R.layout.poi_info, c,
            columns, to, 0);

    ListView listView = (ListView) findViewById(R.id.poilistview);
    // Assign adapter to ListView
    listView.setAdapter(cursorAdapter); 
    }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getSupportMenuInflater().inflate(R.menu.main, menu);
    return true;
}   } 
```

我是否应该添加一个内部类并以这种方式编写代码以允许对列表视图进行进一步操作：

```
 public class ResultListViewActivity extends Base_Activity {

//declaration of variables

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_result_list_view);

    poititle = (TextView) findViewById(R.id.poititle);
    dbHelper = new DatabaseAdapter(this);
    dbHelper.open();

    displayListView();
}

 public class MyListView extends ListActivity {

 @Override 
 protected void onCreate(Bundle savedInstanceState)
 super.onCreate(....)

 listview.setOnClickListener ....
 .....

 private void displayListView() {

    // same method as in the code above

    }

    }    

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getSupportMenuInflater().inflate(R.menu.main, menu);
    return true;
}   } 
```

如您所见，我将添加一个扩展 ListActivity 的“内部”类 MyListView，以便与 listview 相关的所有内容都在此类中，而不是扩展 Base_Activity 的类中。我不知道这是否是正确的做法：我不记得在教程中看到过这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T03:39:57.073

你可以`onClickItemListener`这样添加（你不需要扩展ListActivity）

```
// Click event for single list row
        listView.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position,
                    long id) {
                // Do somthing here
            }
        }); 
```

希望这对您有所帮助。

# android - NotificationManager — 如果在两小时内没有按下通知，如何让通知记录“否”？

> ID：15400477
> 
> 赞同：0
> 
> 时间：2013-03-14T03:08:58.060
> 
> 标签：android, alarmmanager, notificationmanager

我已经设置了在特定时间出现在状态栏中的通知。当您按下它时，它会将“是”记录到数据库中。但是，如果 2 小时后没有按下它，我希望它记录“否”。我了解如何进行日志记录部分，但如果没有在两小时内按下，我不知道如何调用该场景。我知道我可以创建两个日历来比较它们，但是我又会把它们放在哪里呢？请问有什么建议吗？我在下面添加了一些代码。谢谢！

设置报警代码：

```
Intent intent_noti = new Intent(this,Nofi.class);
PendingIntent pendingIntent = PendingIntent.getActivity(this, 12345, intent_noti,
        PendingIntent.FLAG_CANCEL_CURRENT);
AlarmManager am = (AlarmManager)getSystemService(Activity.ALARM_SERVICE);
am.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), setTime,
pendingIntent); 
```

通知代码：

```
Intent intent = new Intent(this, ScanActivity.class);
PendingIntent pIntent = PendingIntent.getActivity(this, 0, intent, 0);
Notification noti = new Notification.Builder(this)
        .setContentTitle("MedScan")
        .setContentText("2\. You should take pills now")
        .setSmallIcon(R.drawable.original)
        .setContentIntent(pIntent)
        .build();
NotificationManager notificationManager = (NotificationManager) getSystemService(
        NOTIFICATION_SERVICE);
noti.defaults |= Notification.DEFAULT_ALL;
// Hide the notification after its selected
noti.flags |= Notification.FLAG_AUTO_CANCEL;

notificationManager.notify(ID, noti); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T03:34:21.417

您可以传递您的通知对象，如果用户明确您`deleteIntent`将调用该对象`Clear``Notification`

因此，为了实现您的目标，您可以执行以下操作：

*   当您显示通知时，启动将在两小时后触发的警报
*   处理用户点击`Notification`或点击`Clear`并取消的两种情况`Alarm`
*   如果警报触发意味着您的通知仍显示`no`在数据库中的日志中

# qt - Qt 4.8.4 mingw (gcc 4.7) 可以编译但不能运行

> ID：15400482
> 
> 赞同：1
> 
> 时间：2013-03-14T03:09:25.067
> 
> 标签：qt, mingw

我是 Qt 的新手。我正在使用带有 MinGW（gcc 4.7.2）的 Wnndows 8 我已经安装了 QtLibrary 4.8.4（官方网站说 Qt 4.84 应该与 mingw 4.4 一起使用）修改 Windows 环境变量后，我安装了 Qt Creator 2.6 并设置了工具包.

现在我可以编译示例程序，但无法运行它，我得到的错误消息是

正在启动 D:\usr\bin\Qt4\examples\opengl\2dpainting-build-Kit_3_14-Debug\debug\2dpainting.exe... 程序意外完成。D:\usr\bin\Qt4\examples\opengl\2dpainting-build-Kit_3_14-Debug\debug\2dpainting.exe 退出，代码为 -1073741502

我在 Qt 5.0.1 + MinGw 4.7.2 上也遇到了同样的问题。我猜“opengl”有问题，但不知道如何解决。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:03:53.423

请尝试将所有必需的 dll 放入您的 exe 所在的目录中（请参见[此处](https://stackoverflow.com/questions/7252583/mingw-reporting-missing-dll-file-in-netbeans-qt/13347157#13347157)）。也使舒尔；如果您在*调试*中编译，则需要例如。QtCore **d** 4.dll，但在*发布*QtCore4.dll。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T08:07:35.787

这都是关于 x32 和 x64 架构的，如果你在 x64 模式下编译 cpp 文件，然后将它们与 x32 qt 链接，就会出现问题。尝试使用适当版本的 windows 和 qt（都是 x32 或两者都是 x64）

# r - 更改ggplot2中x轴刻度之间的距离

> ID：15400486
> 
> 赞同：8
> 
> 时间：2013-03-14T03:09:37.887
> 
> 标签：r, ggplot2, axis, edit-distance

现在我正在制作一个包含三个观察值的折线图。因此，存在三个 x 轴刻度。

我想手动减少 x 轴刻度之间的距离，并基本上强制观察彼此更接近。换句话说，我想减少 x 轴刻度之间的距离。

我的数据：

```
structure(list(Period = c("January 1997 - August 2003", "September 2003 - Jun 2005", 
"Jul 2005 - Dec 2009", "January 1997 - August 2003", "September 2003 - Jun 2005", 
"Jul 2005 - Dec 2009"), Time.Period = structure(c(1L, 3L, 2L, 
1L, 3L, 2L), .Label = c("Jan 1997 - Aug 2003", "Jul 2005 - Dec 2009", 
"Sep 2003 - Jun 2005"), class = "factor"), Variable = structure(c(2L, 
2L, 2L, 1L, 1L, 1L), .Label = c("Significant", "Zscore"), class = "factor"), 
Score = c(8.798129, 4.267268, 7.280275, 1.64, 1.64, 1.64)), .Names = c("Period", 
"Time.Period", "Variable", "Score"), class = "data.frame", row.names = c(NA, 
-6L)) 
```

我的代码：

```
ggplot(glomor, aes(x=Time.Period, y=Score, group=Variable, shape=Variable, color=Variable,        width=0.5)) +
geom_point() +
scale_x_discrete(limits=c("Jan 1997 - Aug 2003","Sep 2003 - Jun 2005","Jul 2005 - Dec 2009"),   expand=c(.08,0)) +
geom_line(aes(linetype=Variable), size=1.3) +
geom_point(size=4.4) +
scale_shape_discrete(name="", label=c("Signficant Z-Score", "Moran's I Z-Score")) +
scale_linetype_manual(values=c(1,3), name="", label=c("Signficant Z-Score", "Moran's I Z-Score"))   +
scale_color_manual(values=c("black", "grey40"), name="", label=c("Signficant Z-Score", "Moran's I Z-Score")) +
scale_fill_discrete(name="", label=c("Signficant Z-Score", "Moran's I Z-Score")) +
theme_classic()+
ylim(0,10) +
xlab("Time Periods") +
ylab("Moran's I Z-Score") +
theme(axis.text.x=element_text(size=11)) +
theme(axis.title.x=element_text(size=14, face="bold")) +
theme(axis.title.y=element_text(size=14, face="bold")) +
theme(legend.position=c(.80, .90)) +
theme(legend.text=element_text(size=12)) +
theme(legend.background = element_rect(fill="white", linetype="dashed")) +
theme(legend.key = element_blank()) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T08:13:21.353

增加 scale_x_discrete 的 expand = 参数的第一个参数：

```
ggplot(glomor, aes(x=Time.Period, y=Score, group=Variable, shape=Variable,     
                   color=Variable, width=0.5)) +
geom_point() +
scale_x_discrete(limits = c("Jan 1997 - Aug 2003",
     "Sep 2003 - Jun 2005","Jul 2005 - Dec 2009"), expand=c(0.2, 0)) +
geom_line(aes(linetype=Variable), size=1.3) +
geom_point(size=4.4) +
scale_shape_discrete(name="", labels=c("Significant Z-Score", "Moran's I Z-Score")) +
scale_linetype_manual(values=c(1, 3), name="", 
                      labels=c("Significant Z-Score", "Moran's I Z-Score"))   +
scale_color_manual(values=c("black", "grey40"), name="",
                   labels=c("Significant Z-Score", "Moran's I Z-Score")) +
scale_fill_discrete(name="", labels=c("Significant Z-Score", "Moran's I Z-Score")) +
theme_classic()+
ylim(0,10) +
xlab("Time Periods") +
ylab("Moran's I Z-Score") +
theme(axis.text.x=element_text(size=11)) +
theme(axis.title.x=element_text(size=14, face="bold")) +
theme(axis.title.y=element_text(size=14, face="bold")) +
theme(legend.position=c(.80, .90)) +
theme(legend.text=element_text(size=12)) +
theme(legend.background = element_rect(fill="white", linetype="dashed")) +
theme(legend.key = element_blank()) 
```

# .net - 如何在 UML 中表示 3 层架构？

> ID：15400490
> 
> 赞同：1
> 
> 时间：2013-03-14T03:09:53.250
> 
> 标签：.net, architecture, uml, winapp

我开发了一个 Windows 应用程序，我需要记录它的架构。我根据 Microsoft 实践和模式制作了一个 3 层图，但我的主管想要从 UML 的角度进行表示。

你如何在 UML 上表示一个 3 层图？

PS：三层基本是，表示层、业务层和数据访问层。以防万一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:09:10.320

您应该使用 UML 包图。有关类似示例，请参阅此链接。特别是“多层Web架构”部分。

[http://www.uml-diagrams.org/package-diagrams-examples.html](http://www.uml-diagrams.org/package-diagrams-examples.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:24:42.330

您可以使用[构造型](http://www.uml-diagrams.org/profile-diagrams.html)来记录每一层中的类。看看[这个例子](http://www.ibm.com/developerworks/rational/library/05/0816_Louis/)（接近文章的中间）

# iphone - 有没有办法在应用程序中控制辅助触摸？

> ID：15400491
> 
> 赞同：-2
> 
> 时间：2013-03-14T03:09:55.467
> 
> 标签：iphone, ios, objective-c

当打开我的应用程序并且应用程序检测到辅助触摸不在左侧时，我希望辅助触摸自动滑动到我的 iPhone 的左侧。

那么有什么方法可以实现这一点吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T04:28:45.743

我认为您无法控制辅助触摸，因为 Apple 没有为此提供任何官方 API。我试着用谷歌搜索它，但我没有找到任何关于控制 Assistive Touch 的相关链接。

# java - 数组排序性能

> ID：15400492
> 
> 赞同：-1
> 
> 时间：2013-03-14T03:09:55.830
> 
> 标签：java, arrays, sorting

这是一个非常简单直接的问题，但是，当然，我已经设法做错了。首先，我生成了 5 个包含 10 个随机数的不同数组——从 1 到 10、1 到 100、最多 1 到 100,000。然后我对每个数组执行 5 种不同类型的排序（总共 25 种），计算执行排序所需的时间。无论 n 的大小如何，我都无法弄清楚为什么每个结果都是 0ms。我究竟做错了什么？

```
public class Lab16Sorting {

public static void main(String[] args) 
{
    final int TOTAL_NUMBERS = 10;
    int count;
    int[] num = new int[TOTAL_NUMBERS];
    Random rand = new Random();

    // Generate 10 numbers from 1 - 10  
    System.out.println("SORT 10");
    System.out.println("----------------");

    for (count = 0; count < TOTAL_NUMBERS; count++)
        num[count] = rand.nextInt(10);

    System.out.println("Array: " + num);
    runSort(num);

    // Generate 10 numbers from 1 - 100     
    System.out.println("\nSORT 100");
    System.out.println("----------------");

    for (count = 0; count < TOTAL_NUMBERS; count++)
        num[count] = rand.nextInt(100);

    System.out.println("Array: " + num);
    runSort(num);

    // Generate 10 numbers from 1 - 1,000       
    System.out.println("\nSORT 1,000");
    System.out.println("----------------");

    for (count = 0; count < TOTAL_NUMBERS; count++)
        num[count] = rand.nextInt(1000);

    System.out.println("Array: " + num);
    runSort(num);

    // Generate 10 numbers from 1 - 10,000  
    System.out.println("\nSORT 10,000");
    System.out.println("----------------");

    for (count = 0; count < TOTAL_NUMBERS; count++)
        num[count] = rand.nextInt(10000);

    System.out.println("Array: " + num);
    runSort(num);

    // Generate 10 numbers from 1 - 100,000     
    System.out.println("\nSORT 100,000");
    System.out.println("----------------");

    for (count = 0; count < TOTAL_NUMBERS; count++)
        num[count] = rand.nextInt(100000);

    System.out.println("Array: " + num);
    runSort(num);
}

/**
 * Run sort algorithms
 */

private static void runSort(int[] num)
{
    long before;
    long after;

    // Run and display selection sort
    before = System.currentTimeMillis();
    selectionSort(num);     
    after = System.currentTimeMillis();
    System.out.println("Selection sort took "+ (after-before) +" milliseconds");

    // Run and display bubble sort
    before = System.currentTimeMillis();
    bubbleSort(num);
    after = System.currentTimeMillis();
    System.out.println("Bubble sort took "+ (after-before) +" milliseconds");

    // Run and display insertion sort
    before = System.currentTimeMillis();
    insertionSort(num);     
    after = System.currentTimeMillis();
    System.out.println("Insertion sort took "+ (after-before) +" milliseconds");

    // Run and display merge sort
    before = System.currentTimeMillis();
    mergeSort(num);
    after = System.currentTimeMillis();
    System.out.println("Merge sort took "+ (after-before) +" milliseconds");

    // Run and display quick sort
    before = System.currentTimeMillis();
    quickSort(num);
    after = System.currentTimeMillis();
    System.out.println("Quick sort took "+ (after-before) +" milliseconds");        
} 
```

我打印出各种数组地址，我发现它们都是一样的（这是有道理的，因为我使用的是同一个数组对象）。我认为这是问题所在，因此我尝试使用不同的数组（`int[] num`，`int[] num2`...），并尝试在每次`runSort()`使用`num = new int[TOTAL_NUMBERS]`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T03:13:52.773

那是因为尺寸`10`太小，无法真正找出各种类型之间的时间差异。尝试将您的尺寸增加到 附近的某个地方`50,000`，`1,00,000`以便真正能够看到差异（即使那样它会在几秒钟内）。

如果您的机器可以承受足够的负载，那么请对范围内的元素进行排序`10,00,000`（非常不建议仅用于测试时差）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T03:22:16.960

RJ 是正确的，您的数组太小以至于排序算法无关紧要。

另请参阅此线程 [插入排序、合并排序和快速排序的测试用例](https://stackoverflow.com/questions/15317384/test-case-for-insertion-sort-mergesort-and-quick-sort)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T03:29:54.627

排序算法是一种调整过的快速排序，改编自 Jon L. Bentley 和 M. Douglas McIlroy 的“Engineering a Sort Function”，Software-Practice and Experience，Vol。23(11) P. 1249-1265（1993 年 11 月）。该算法在许多数据集上提供 n*log(n) 性能，导致其他快速排序降低到二次性能。以上是java doc。

# asp.net - Safari、ASP.NET 4 和 LinkBut ton

> ID：15400493
> 
> 赞同：2
> 
> 时间：2013-03-14T03:09:56.237
> 
> 标签：asp.net, iis-7, .net-4.0, safari, asplinkbutton

我有一个使用 .NET Framework 4 的 ASP.NET Web 应用程序，当我使用我的 Visual Studio Pro 2010 在本地测试它时，它在所有浏览器上都可以正常工作，但是当我们将它部署到我们的服务器（Windows Server 2008 R2 上的 IIS7）时，我的Web 应用程序无法在所有平台上的*Safari 浏览器*`LinkButton`上正常工作。

 *发生的事情是当`LinkButton`具有使用的功能时`Response.Redirect`，它会在某种程度上清除会话或不保存它。我可以检查这一点，因为当我重定向到另一个页面时，我会在重定向之前先保存输入到会话的值，并将其验证到重定向的页面，如果没有会话，则将其带回上一页。

我已经实施[了此修复程序以将`.browser`文件添加到我的 web 应用](http://www.marauderzstuff.com/PermaLink,guid,ebdcf5dd-ecdf-4260-b55a-04708b252e08.aspx)程序，但它不能解决我的问题。我还尝试[了 SO 的这个答案来添加一个`Page_PreInit`和一个配置](https://stackoverflow.com/a/12827863/1115937)，但无济于事。

我的 IIS 配置已启用会话和 Cookie，老实说，我不明白为什么它只会在服务器配置错误时影响*Safari 浏览器。*

我已经为这个错误工作了一整天，但我仍然无法解决这个问题。请帮助，提前谢谢。

**更新：**我忘了提到我的网站在里面`iframe`，在进一步研究之后，我发现这个问题说 Safari[默认情况下](https://stackoverflow.com/questions/9930671/safari-3rd-party-cookie-iframe-trick-no-longer-working)[不允许*第三方 Cookie*](https://stackoverflow.com/questions/9930671/safari-3rd-party-cookie-iframe-trick-no-longer-working)。现在我不能使用上述修复，因为我的应用程序在 ASP.NET 中而不是在 PHP 中。*

# android - 访问安卓 SD 卡

> ID：15400496
> 
> 赞同：1
> 
> 时间：2013-03-14T03:10:02.383
> 
> 标签：android, cordova, file-io

我正在尝试将当前的 webview 保存在 android 的缓存中（我被告知 mnt/sdcard）但是无论是使用文件资源管理器还是尝试在代码中写入它，我都会在我的 avd 模拟器上收到此错误：

`java.io.FileNotFoundException: /mnt/sdcard/imageFolder/page.jpg: open failed: EACCES (Permission denied)`

我也尝试先创建目录，但 mkdir() 函数返回 false。我的清单中有许可行：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

这是我的代码：

```
public class screenCap extends DroidGap {

 private WebView myAppView;
    private DroidGap myGap;

 public screenCap(DroidGap gap, WebView view)
    {
     myAppView = view;
        myGap = gap;
    }   

//Captures the current webview and saves it as a jpeg so it can be loaded into
//the page flip html plugin
public void captureScreen(){

    myAppView.setDrawingCacheEnabled(true);
    Bitmap bitmap = Bitmap.createBitmap(500, 500,  Bitmap.Config.ARGB_8888);
    Canvas canvas = new Canvas(bitmap); 
    myAppView.draw(canvas);

    //Create a directory to hold the temporary image
    File f =    new File(android.os.Environment.getExternalStorageDirectory()+"/imageFolder/"+ "page.jpg");

    if (!f.getParentFile().exists());
    {
        f.getParentFile().mkdir();
        Log.d("DIRECTORY MADE!","!!!");
    }

    try {
        myAppView.getDrawingCache().compress(Bitmap.CompressFormat.JPEG, 100, new FileOutputStream(f));
    } catch (Exception e) {
        Log.e("Error--------->", e.toString());
    }       
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T04:57:43.103

这可能是因为您的 AVD 在创建时可能没有 SD 卡。

选择您的`Virtual Device -> Edit -> Check SD Card field`.

如果为空，请在此处输入尺寸。然后重新运行您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T05:37:01.850

f.getParentFile().exists() 返回 false （我相信这是第一次运行时的预期） f.getParentFile().mkdir(); 我确实有 avd 管理器设置的 2gb 的 sd 卡。不过，我还没有尝试将其保存到我的一个 pc 文件夹中，这是一个选项。

# c - 试图编写一个简单的结构基础代码......没有得到？

> ID：15400497
> 
> 赞同：0
> 
> 时间：2013-03-14T03:10:08.623
> 
> 标签：c

抱歉，我认为我真的把基于结构的几行代码搞砸了……因为我是新手，最近几天努力理解 C。请检查以下代码并指导我哪里错了……谢谢！

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

struct family{

       char name[20];
       int age;
       char father[20];
       char mother[20];

       };

 //Function to compares two strings and returns 1 or 0  

char siblings(struct family member1, struct family member2)
{
     if(strcmp(member1.mother, member2.mother)==0)
         return 1;
     else
         return 0;
 }

int main()
{

//Following structure variables are decleared

    struct family member1;
    struct family member2;

  //structure variables initilized with a string

    member1.mother = "Rosy";
    member2.mother = "Rosy";

//This function compares two strings and returns 1 or 0

    siblings(member1.mother, member2.mother);

//trying to print resulst with respect to return from function 

     printf("%S\n",siblings(member1.mother, member2.mother)?"yes":"No");

    system("PAUSE");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T03:12:04.780

替换以下内容：

1-1：`%S`应该换成`%d`

```
printf("%S\n",siblings(member1.mother, member2.mother)?"yes":"No"); 
```

`bool`1-2：返回或`int`返回 0 或 1会更好。

```
char siblings(struct family member1, struct family member2) 
```

2：“暂停”应该是“暂停”

```
system("PAUSE"); 
```

3：`strcpy`用于以下。

```
member1.mother = "Rosy";
member2.mother = "Rosy"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T03:13:04.937

代替

```
member1.mother = "Rosy";
member2.mother = "Rosy"; 
```

和

```
strcpy(member1.mother, "Rosy");
strcpy(member2.mother, "Rosy"); 
```

这是因为成员`mother`不是指针，它是一个数组

**编辑**

`siblings(member1, member2)`不应该给兄弟姐妹打电话`siblings(member1.mother, member2.mother)`

# oracle - 从数据库中检索变量和方程并求解它们

> ID：15400499
> 
> 赞同：1
> 
> 时间：2013-03-14T03:10:20.867
> 
> 标签：oracle, jsp, equation

我的客户想将公式公式保存在数据库 (Oracle) 中。在此公式中，他们希望使用变量名称的缩写（包含变量的表中的字段）作为描述性字段，以查看公式用于计算结果的内容，但希望能够在所有情况下计算公式的结果变量也有值。

这意味着如果他们稍后更改公式，结果必须反映这些更改。他们有短公式和长公式。例如

```
C=(A+B)/100
D=(E+F)/100
G=(3*C)+(4*D)/7 
```

你知道有什么类似的参考吗？如前所述，我正在使用 jsp 和 Oracle。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:26:59.997

你只能靠自己。Oracle 在解析方程时不会帮助你太多。对于简单的事情，您可以使用 SQL REPLACE 函数迭代变量和值，看看这对您来说是否足够好。

# wifi - WiFi Direct 创建组空指针

> ID：15400503
> 
> 赞同：1
> 
> 时间：2013-03-14T03:11:03.867
> 
> 标签：wifi

我想创建一个组以使当前设备平板电脑作为接入点，但是在回调方法中`onGroupInfoAvailable()`我得到了组的空指针。为什么？

```
manager = (WifiP2pManager) getSystemService(Context.WIFI_P2P_SERVICE);
channel = manager.initialize(this, getMainLooper(), null); 

manager.createGroup(channel, new ActionListener() {
    @Override
    public void onSuccess() {
        manager.requestGroupInfo(channel, new GroupInfoListener() {
             public void onGroupInfoAvailable(WifiP2pGroup group) {
            if(group != null)
               Toast.makeText(SasetBladderPadActivity.this, "Group Passphrase: " 
                                   + group.getPassphrase(), Toast.LENGTH_LONG).show();
            else
               Toast.makeText(SasetBladderPadActivity.this, "Group is null ", 
                                     Toast.LENGTH_LONG).show();
                }
            });
        }

        @Override
public void onFailure(int arg0) {
    // TODO Auto-generated method stub
            Toast.makeText(SasetBladderPadActivity.this, "Create group failed: " + arg0, \
                     Toast.LENGTH_LONG).show();
        }

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-02T05:33:57.650

我认为您需要实现 grouplistener 然后@override ongroupinfoavailable 方法。成功只是异步调用。实际回调需要修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-15T21:52:13.127

是的，该组已创建但未显示。我会建议使用实现倒数计时器的技巧（或者您可以使用任何其他计时器）在一秒钟后启动 requestGroupInfo() 。修改后的代码将是：

```
 manager = (WifiP2pManager) getSystemService(Context.WIFI_P2P_SERVICE);
 channel = manager.initialize(this, getMainLooper(), null); 

 manager.createGroup(channel, new ActionListener() {
    @Override
    public void onSuccess() {
            new CountDownTimer(1000, 1000) {
            public void onTick(long millisUntilFinished) {}
            public void onFinish() {
                manager.requestGroupInfo(channel, new GroupInfoListener() {
                    public void onGroupInfoAvailable(WifiP2pGroup group) {
                    if(group != null)
                    Toast.makeText(SasetBladderPadActivity.this, "Group Passphrase: "
                    + group.getPassphrase(), Toast.LENGTH_LONG).show();
                    else
                    Toast.makeText(SasetBladderPadActivity.this, "Group is null ",
                    Toast.LENGTH_LONG).show();
                    }
                });
            }
        }.start();
    }

    @Override
    public void onFailure(int arg0) {
    ... 
```

# java - C++ 和 Java 中的字符串连接复杂度

> ID：15400508
> 
> 赞同：35
> 
> 时间：2013-03-14T03:11:44.157
> 
> 标签：java, c++, string, time-complexity

考虑这段代码：

```
public String joinWords(String[] words) {
    String sentence = "";
    for(String w : words) {
        sentence = sentence + w;
    }
    return sentence;
} 
```

在每次串联时，都会创建一个新的字符串副本，因此总体复杂度为`O(n^2)`. 幸运的是，在 Java 中，我们可以用 a 来解决这个问题`StringBuffer`，它对每个追加都有`O(1)`复杂性，那么整体复杂性将是`O(n)`。

虽然在 C++ 中，`std::string::append()`具有 的复杂性`O(n)`，但我不清楚`stringstream`.

在 C++ 中，是否有类似`StringBuffer`复杂度相同的方法？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-14T03:43:41.367

C++ 字符串是可变的，并且几乎可以像 StringBuffer 一样动态调整大小。与 Java 中的等价物不同，这段代码不会每次都创建一个新字符串。它只是附加到当前的。

```
std::string joinWords(std::vector<std::string> const &words) {
    std::string result;
    for (auto &word : words) {
        result += word;
    }
    return result;
} 
```

如果您`reserve`事先需要的大小，这将在线性时间内运行。问题是遍历向量以获取大小是否比让字符串自动调整大小要慢。那，我不能告诉你。计时。:)

如果您出于某种原因不想使用`std::string`它自己（您应该考虑一下；它是一个非常受人尊敬的类），C++ 也有字符串流。

```
#include <sstream>
...

std::string joinWords(std::vector<std::string> const &words) {
    std::ostringstream oss;
    for (auto &word : words) {
        oss << word;
    }
    return oss.str();
} 
```

它可能并不比 using 更有效`std::string`，但在其他情况下它更灵活一些——您可以使用它对几乎任何原始类型以及任何指定了`operator <<(ostream&, its_type&)`覆盖的类型进行字符串化。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-14T04:20:02.793

这与您的问题有些相切，但仍然相关。（评论太大了！！）

> 在每次串联时，都会创建一个新的字符串副本，因此总体复杂度为 O(n^2)。

`s1.concat(s2)`在 Java 中， or`s1 + s2`的复杂性在`O(M1 + M2)`哪里`M1`，`M2`是各自的字符串长度。一般来说，将其转化为串联序列的复杂性是很困难的。但是，如果您假设`N`长度为 Strings 的串联`M`，那么复杂性确实`O(M * N * N)`与您在问题中所说的相匹配。

> 幸运的是，在 Java 中，我们可以用 a 来解决这个问题`StringBuffer`，它对每个追加都有`O(1)`复杂性，那么整体复杂性将是`O(n)`。

在这种`StringBuilder`情况下，对大小字符串的调用的*摊销*复杂度为. 这里的关键词是*摊销*。当您将字符附加到 a时，实现可能需要扩展其内部数组。但是扩展策略是将数组的大小加倍。如果您进行数学计算，您会发现缓冲区中的每个字符在整个调用序列中平均将被复制一次。所以整个序列仍然可以计算为......并且，碰巧是总字符串长度。`N``sb.append(s)``M` `O(M*N)`*`StringBuilder``append``O(M*N)``M*N`*

 *所以你的最终结果是正确的，但是你关于单个调用复杂性的陈述`append`是不正确的。（我明白你的意思，但你说的方式表面上不正确。）

最后，我注意到在 Java 中你应该使用`StringBuilder`而不是`StringBuffer`除非你*需要*缓冲区是线程安全的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T03:32:14.953

`O(n)`作为一个在 C++11中具有复杂性的非常简单结构的示例：

```
template<typename TChar>
struct StringAppender {
  std::vector<std::basic_string<TChar>> buff;
  StringAppender& operator+=( std::basic_string<TChar> v ) {
    buff.push_back(std::move(v));
    return *this;
  }
  explicit operator std::basic_string<TChar>() {
    std::basic_string<TChar> retval;
    std::size_t total = 0;
    for( auto&& s:buff )
      total+=s.size();
    retval.reserve(total+1);
    for( auto&& s:buff )
      retval += std::move(s);
    return retval;
  }
}; 
```

采用：

```
StringAppender<char> append;
append += s1;
append += s2;
std::string s3 = append; 
```

这需要 O(n)，其中 n 是字符数。

最后，如果您知道所有字符串的长度，那么只需在`reserve`有足够空间的情况下执行 a 就可以`append`或`+=`总共花费 O(n) 时间。但我同意这很尴尬。

`std::move`与上述`StringAppender`（即）一起使用`sa += std::move(s1)`将显着提高非短字符串的性能（或将其与 xvalues 等一起使用）

我不知道 的复杂性`std::ostringstream`，但`ostringstream`它适用于漂亮的打印格式化输出，或者高性能不重要的情况。我的意思是，它们还不错，它们甚至可以执行脚本/解释/字节码语言，但是如果您赶时间，则需要其他东西。

像往常一样，您需要进行分析，因为恒定因素很重要。

一个 rvalue-reference-to-this operator+ 可能也是一个不错的选择，但很少有编译器实现对 this 的 rvalue 引用。*

# php - Laravel 过滤器在构造中带有参数

> ID：15400510
> 
> 赞同：0
> 
> 时间：2013-03-14T03:11:50.573
> 
> 标签：php, laravel

我在 Stack 上搜索并看到这个问题[How to add filter parameters to controllers in Laravel?](https://stackoverflow.com/questions/13188040/how-to-add-filter-parameters-to-controllers-in-laravel) .

我有一个类似的问题，但是这一次，我需要传递一个灵活的 $myparam 参数，代码如下所示：

在 Route.php 中

```
Route::filter('diffauthor',function($myparam){
    if(Authority::cannot('edit', 'postedit', $myparam))
                        return View::make('permdeny.index');
}); 
```

在控制器中：

```
public function __construct() {
        parent::__construct();
        $this->filter('before','diffauthor', $myparam);
    } 
```

如何根据用户请求传递 $myparam？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T03:20:54.943

您只能将参数作为字符串传递给过滤器：

```
$this->filter('before', 'diffauthor:param1,param2'); 
```

有时为了解决这个限制，我使用 Session 类作为一种临时存储，甚至通过查看`Request::route()`过滤器中返回的对象来检查传递给方法的变量。

# java - 两个 ArrayList 之间的同步排序

> ID：15400514
> 
> 赞同：3
> 
> 时间：2013-03-14T03:12:04.750
> 
> 标签：java, collections, arraylist, sorting

我有两个 ArrayList。

*   第一个包含一组带有大写和标点符号的单词。

*   另一个包含同一组单词，但删除了大写和标点符号。

.

```
ArrayList1 ..... ArrayList2

MURDER! ........ murder

It's ........... its

Hello .......... hello

Yes-Man ........ yesman

ON ............. on 
```

第二个数组将所有单词按字母顺序排列，每个单词中的所有字母按字母顺序排列。它看起来像这样：

```
aemnsy
demrru
ehllo
ist
no 
```

我想这样做，以便当我将 ArrayList 中的单词按字母顺序排列时，ArrayList 中的所有单词都遵循套件：

```
ArrayList1 ..... ArrayList2

Yes-Man ........ aemnsy

MURDER! ........ demrru

Hello .......... ehllo

It's ........... ist

ON ............. no 
```

我试图用一个或两个 for 语句创建一个循环，但它最终不起作用并且变得很长。我该怎么做呢？我如何有效地做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-11T01:24:41.687

这是一个基于单个“键”列表对多个列表进行排序的函数。列表不需要是相同的类型，这里的键列表是类型`String`，它用于对 a `String`、`Integer`和`Double`list 进行排序（[**Ideone 示例**](https://ideone.com/u2OICl)）：

```
List<String> key = Arrays.asList("demrru", "ist", "ehllo", "aemnsy", "no");
List<String> list1 = Arrays.asList("MURDER!","It's", "Hello","Yes-Man", "ON");
List<Integer> list2 = Arrays.asList(2, 4, 3, 1, 5);            // Also use Integer type 
List<Double>  list3 = Arrays.asList(0.2, 0.4, 0.3, 0.1, 0.5);  // or Double type

// Sort all lists (excluding the key)
keySort(key, list1, list2, list3);

// Sort all lists (including the key)
keySort(key, key, list1, list2, list3); 
```

**输出：**

```
// Sorted by key:
[Yes-Man, MURDER!, Hello, It's, ON]
[aemnsy, demrru, ehllo, ist, no]
[1, 2, 3, 4, 5]
[0.1, 0.2, 0.3, 0.4, 0.5] 
```

* * *

## 排序功能

可以在[**此处**](https://ideone.com/u2OICl)找到一个 Ideone 示例，其中包括参数验证和测试用例。

```
public static <T extends Comparable<T>> void keySort(
                                        final List<T> key, List<?>... lists){
    // Create a List of indices
    List<Integer> indices = new ArrayList<Integer>();
    for(int i = 0; i < key.size(); i++)
        indices.add(i);

    // Sort the indices list based on the key
    Collections.sort(indices, new Comparator<Integer>(){
        @Override public int compare(Integer i, Integer j) {
            return key.get(i).compareTo(key.get(j));
        }
    });

    // Create a mapping that allows sorting of the List by N swaps.
    Map<Integer,Integer> swapMap = new HashMap<Integer, Integer>(indices.size());

    // Only swaps can be used b/c we cannot create a new List of type <?>
    for(int i = 0; i < indices.size(); i++){
        int k = indices.get(i);
        while(swapMap.containsKey(k))
            k = swapMap.get(k);

        swapMap.put(i, k);
    }

    // for each list, swap elements to sort according to key list
    for(Map.Entry<Integer, Integer> e : swapMap.entrySet())
        for(List<?> list : lists)
            Collections.swap(list, e.getKey(), e.getValue());
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T03:43:10.400

**第一种方式 - 我使用映射，其键来自 arrayList2，值来自 arrayList1。将数据映射到地图取决于您。对arrayList2 进行排序后，我从map 中获取它的值。**

```
 List<String> arrList1 = new ArrayList<String>();

            arrList1.add("MURDER!");
            arrList1.add("It's");
            arrList1.add("Hello");
            arrList1.add("Yes-Man");
            arrList1.add("ON");

            List<String> arrList2 = new ArrayList<String>();
            arrList2.add("demrru");
            arrList2.add("aemnsy");
            arrList2.add("ist");
            arrList2.add("ehllo");
            arrList2.add("no"); 

            Map<String, String> map1 = new HashMap<String, String>();
            map1.put("aemnsy", "Yes-Man");
            map1.put("demrru", "MURDER!");
            map1.put("ehllo", "Hello");
            map1.put("ist", "It's");
            map1.put("no", "ON");

            Collections.sort(arrList2);

            for (String s : arrList2){
                System.out.println(s + "..........." + map1.get(s));
            } 
```

**第二种方式 - 另一种方式是您只能使用已排序的 TreeMap 而不是两个 ArrayList。**

```
Map<String, String> map2 = new TreeMap<String, String>();
            map2.put("ehllo", "Hello");
            map2.put("aemnsy", "Yes-Man");
            map2.put("demrru", "MURDER!");
            map2.put("no", "ON");
            map2.put("ist", "It's");

            for (Map.Entry<String, String> entry : map2.entrySet())
            {
                System.out.println(entry.getKey() + "/" + entry.getValue());
            } 
```

**第三种方式 - 仅使用 2 个 ArrayList，但我们必须自己编写排序方法。您是否注意到您的 2 个 ArrayList 元素（例如来自 arrayList2 的 aemnsy 和来自 arrayList1 的 Yes-Man）具有相同的索引？我用那个点。**

```
 selectionSort1(arrList2, arrList1);

    for(int i = 0; i < arrList1.size(); i++){
        System.out.println(arrList2.get(i) + "---" + arrList1.get(i));
    }

   public static void selectionSort1(List<String> x, List<String> y) {
    for (int i=0; i<x.size()-1; i++) {
        for (int j=i+1; j<x.size(); j++) {
            if (x.get(i).compareTo(x.get(j)) > 0) {
                //... Exchange elements in first array
                String temp = x.get(i);
                x.set(i, x.get(j));
                x.set(j, temp);

                //... Exchange elements in second array
                temp = y.get(i);
                y.set(i, y.get(j));
                y.set(j, temp);
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T03:47:10.917

一个快速的答案。

```
public class MapAlph {
    public static void main(String[] args) {
        HashMap<String, String> map = new HashMap<String, String>();
        String txt = "Murde!r!";
        ArrayList<Character> alph = new ArrayList<Character>();
        for (int i = 0; i < txt.length(); i++)
            if (Character.isLetter(txt.charAt(i)))
                alph.add(txt.charAt(i));

        Collections.sort(alph);
        Collections.reverse(alph);
        String val = "";
        for (Character c : alph)
            val += c;

        map.put(txt, val);
        System.out.print(txt + " ........ " + map.get(txt));
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T03:52:01.580

[`TreeMap`](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html)如果您愿意，可以使用。

```
Map<String, String> sortedMap = new TreeMap<String, String>();
sortedMap.put("demrru", "MURDER!");
sortedMap.put("ist", "It's");
sortedMap.put("aemnsy", "Yes-Man");
sortedMap.put("ehllo", "Hello");
sortedMap.put("no", "ON"); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-14T03:57:39.427

你可以试试这个：

```
import java.util.HashMap;
import java.util.Map;
import java.util.TreeMap;

public class SortService {

    public static void main(String[] args) {
        Map<String, String> originalMap = new HashMap<String, String>();
        originalMap.put("aemnsy", "Yes-Man");
        originalMap.put("demrru", "MURDER!");
        originalMap.put("ehllo", "Hello");
        originalMap.put("ist", "It's");
        originalMap.put("no", "ON");

        Map<String, String> sortedMap = new TreeMap<String, String>(originalMap);
        System.out.println(sortedMap);
    }

} 
```

**输出：**

```
{aemnsy=Yes-Man, demrru=MURDER!, ehllo=Hello, ist=It's, no=ON} 
```

# unity3d - Unity3D：用鼠标移动游戏对象并检查包含

> ID：15400516
> 
> 赞同：0
> 
> 时间：2013-03-14T03:12:14.067
> 
> 标签：unity3d, touch, mouse, game-physics, gameobject

如何通过鼠标单击/触摸网格来移动对象（例如使用 GUITexture 的游戏对象填充颜色）并检查每个图块是否包含填充颜色？

如果使用 Camera.main.ScreenToWorldPoint 则无法检查包含。当前我要检查的代码包含工作正常但游戏对象不能用鼠标移动:(

链接图片：http: [//i.imgur.com/cHoS0YV.png](https://i.imgur.com/cHoS0YV.png)

我的代码如下：

```
void OnMouseDown()
    {
        Vector2 mousePos = new Vector2(Input.mousePosition.x, Screen.height - Input.mousePosition.y);
        transform.position = mousePos;
        Debug.Log("OnMouseDown: transform.position: " + transform.position);
    }
    void OnMouseDrag()
    {
        Vector2 mousePos = new Vector2(Input.mousePosition.x, Screen.height - Input.mousePosition.y);

        transform.position = mousePos;
        Debug.Log("transform.position: " + transform.position);

        foreach (var x in GameBoard.Instance.listTileInGrid)
        {
            if (x.RectTile.Contains(mousePos))
            {
                Debug.Log("change color");
                x.ColorId = 1;
            }
        }
    } 
```

提前致谢！

# 更新：

我改变：

```
transform.position = mousePos; 
```

至

```
transform.guiTexture.transform.position = Camera.main.ScreenToViewportPoint(Input.mousePosition); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-22T05:54:07.943

这很简单。您可以使用 Vector3.Lerp 函数来实现这一点。使用光线投射获取鼠标点击位置或触摸位置。然后在 lerp 函数中使用初始和最终位置。初始位置是游戏对象现在所在的位置，最终位置是点击/触摸位置。你可以在这里找到 The Game Contriver 的文章

[移动到触摸/点击位置 - The Game Contriver](http://www.thegamecontriver.com/2014/10/move-to-mouse-click-touch-position-unity.html)

# css - 使用精灵的身体背景

> ID：15400522
> 
> 赞同：0
> 
> 时间：2013-03-14T03:13:04.080
> 
> 标签：css

我正在更改我的网站以使用一个精灵图像而不是许多单独的图像。

所以我的精灵（1000 x 2000 像素）上的第一件事是背景图像，即 100 x 2000 像素。

仅对前 100px 执行重复 x 的 css 是什么样的？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T03:20:36.597

实际上最好的解决方案是制作 3 个精灵。

main-sprite.png（所有图标和图像为 1000x2000）

x-sprite.png (1px 宽度) 将它用于所有 repeat-x 背景

y-sprite.png (1px 高度) 将它用于所有重复-y 背景

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T03:59:47.827

三个解决方案：

1-改变你的精灵图像的结构，而不是使用 1000x2000 使用 100xwhatever 你想要精灵图像并将其他图标和图像堆叠在底部

```
<html>
<head>
<style>
body {background:url('yourspriteimage.png'); background-repeat:repeat-x; width:100px;height:2000px;background-position:0px 0px;}
</style>
</head>
<body>
your content here
</body>
</html> 
```

2-不要精灵你的背景图像。

3- 创建三个精灵图像（一个仅用于 x-repeat，一个用于 y-repeat，on 用于不重复）

# android - 加载大图像时 XML 中的 Android ImageView 泄漏

> ID：15400524
> 
> 赞同：0
> 
> 时间：2013-03-14T03:13:09.647
> 
> 标签：android, android-imageview, out-of-memory

这是我的图像视图

```
<ImageView
    android:id="@+id/ads"
    android:layout_width="320dp"
    android:layout_height="48dp"
    android:adjustViewBounds="true"
    android:src="@drawable/my_img" /> 
```

如果 my_img 是 3200 像素 x 480 像素。

我的 ImageView 会泄漏吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T04:14:24.283

内存泄漏通常发生在某些比您的寿命更长的对象`Activity`保留对您的图像、您的`ImageView`或`Activity`. 所以，如果你避免这种情况，你应该没问题。

附带说明一下，在 Gingerbread 及更高版本上，3200 像素 x 480 像素在解码时将占用大约 6MB 的内存（3200 * 480 * 4 字节/像素 = 大约 5.8MB [[来源]](http://developer.android.com/reference/android/graphics/Bitmap.Config.html)）。即使在非常旧的设备上，这也不足以让您面临内存配额不足的危险，假设事情正在得到适当的清理。此外，当您知道不再需要位图时，礼貌地调用[Bitmap.recycle()](https://developer.android.com/reference/android/graphics/Bitmap.html#recycle%28%29) 会很有帮助（但请记住，这只是清理位图的建议，不会立即发生）。

# regex - 正则表达式（url.rewrite）

> ID：15400525
> 
> 赞同：0
> 
> 时间：2013-03-14T03:13:10.397
> 
> 标签：regex, linux

我想为 linux 使用 url rewrite，`lighttpd.conf`但我无法获得正确的正则表达式。

我的网址是 `ip/cgi/aaa/bbb`，我想重写 url 路径。我的目标是`/var/www/cgi/aaa.cgi?par=bbb`

我将规则写为`"^/cgi/([^/]+)\/(.*)?"=> "/var/www/cgi/$1.cgi?par=$2"`
但不知何故我无法获得参数`par`值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T04:35:42.480

"^" 匹配字符串的开头。由于您的 ip 是动态的，因此请尝试从“cgi”匹配，因为它是绝对的。

[我在http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)尝试了以下输入并且工作正常。

```
/cgi/([^/]+)\/(.*)? 
/var/www/cgi/$1.cgi?par=$2
ip/cgi/aaa/bbb 
```

结果是 ip/var/www/cgi/aaa.cgi?par=bbb

如果您不想在结果字符串中出现“ip”，请使用

```
(.*)/cgi/([^/]+)\/(.*)?
/var/www/cgi/$2.cgi?par=$3
ip/cgi/aaa/bbb 
```

结果是 /var/www/cgi/aaa.cgi?par=bbb （没有 ip）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T03:34:04.347

您的问题是因为您在输入开始时锚定。

```
^/cgi 
```

..将不匹配`ip/cgi`，因为`ip`在开始时..不是`/cgi`。修复它..放在`ip`你所拥有的前面：

```
 ^ip/cgi/([^/]+)\/(.*)?
# ^^ this part 
```

以下是进行更改后的输出：

![正则表达式输出](../Images/a1a074461e89f236cf9824e9c28c6e1c.png)

# sql-server - 使用 FOR XML 返回子查询

> ID：15400526
> 
> 赞同：1
> 
> 时间：2013-03-14T03:13:23.630
> 
> 标签：sql-server, xml, performance, for-xml-path

我正在执行下面的子查询作为 SQL Server 2008 中 SELECT 语句中的参数。这样做是否有任何缺点来获取父级的子查询并在返回时在服务器上解析它。似乎很容易。

```
(
    SELECT ag.Name, ag.[Description], ega.Gender, ag.[Order], ag.[Type]
    FROM GrassrootsHoops.EventAgeGrade ega
    INNER JOIN GrassrootsHoops.AgeGrade ag ON ega.AgeGradeId = ag.Id 
    WHERE ega.EventId = ev.Id FOR XML PATH('AgeGrade'), ROOT('AgeGrades')
) AS AgeGrades 
```

# sql - SQL 语句连接表为空查询

> ID：15400527
> 
> 赞同：1
> 
> 时间：2013-03-14T03:13:32.440
> 
> 标签：sql, join

您好我正在使用联接表查询来检索一些数据..

```
USE [AccountingSystem_TEST]
GO
/****** Object:  StoredProcedure [dbo].[spHRLeaveEntitlementBuildTemp]    Script Date: 03/14/2013 09:18:06 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER Procedure [dbo].[spHRLeaveEntitlementBuildTemp]
    (   
     @CreatedUserID as nvarchar(9)
    ,@EmployeeID nvarchar(9) 
    ,@EmpName nvarchar(150)
    )
AS
BEGIN

    Select A.CodeHRLeaveType,
        COALESCE(B.LeaveBalance) LeaveBalance           
    From HRLeaveType A
        LEFT JOIN HRLeaveMaster B 
        On A.CodeHRLeaveType = B.CodeHRLeaveType
    Where   B.EmployeeID = @EmployeeID

    Delete dbo.HrLeaveMasterTemp
    Where UserID = @CreatedUserID 

    INSERT INTO [dbo].[HrLeaveMasterTemp]
       ( [UserID]
        ,[EmployeeID] 
        ,[EmpName]
        ,[CodeHRLeaveType]
        ,[LeaveBalance]
        ,[Status] 
        )
    Select 
         @CreatedUserID             
        ,[EmployeeID]
        ,@EmpName
        ,[CodeHRLeaveType]
        ,[LeaveBalance]
        ,[Status]           
    From dbo.[HRLeaveMaster]
    Where EmployeeID =@EmployeeID
END
--Select * From HRLeaveMasterTemp 
```

如果leavebalance为空，我需要表格显示0..但语句显示错误..请帮助我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T03:32:40.763

在 Oracle 中，空函数的替换与 NVL 函数一起使用。在 MySql 中，空函数的替换与 IFNULL 函数一起使用。

请查看[http://www.w3schools.com/sql/sql_isnull.asp](http://www.w3schools.com/sql/sql_isnull.asp)。这可能会对您有所帮助。

声明应该是——

```
Select A.CodeHRLeaveType,
    IFNULL(B.LeaveBalance,0) LeaveBalance           
From HRLeaveType A
    LEFT JOIN HRLeaveMaster B 
    On A.CodeHRLeaveType = B.CodeHRLeaveType
Where   B.EmployeeID = @EmployeeID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T03:14:18.723

利用`COALESCE`

```
Select  A.CodeHRLeaveType,
        COALESCE(B.LeaveBalance) LeaveBalance           
From    HRLeaveType A
        LEFT JOIN HRLeaveMaster B 
            On A.CodeHRLeaveType = B.CodeHRLeaveType
Where   B.EmployeeID = @EmployeeID 
```

# javascript - 通过电子邮件发送上传的文件而不先保存

> ID：15400530
> 
> 赞同：0
> 
> 时间：2013-03-14T03:13:53.070
> 
> 标签：javascript, file, email, upload

我正在创建一个应用程序，允许用户附加文件，键入消息，然后使用 wordpress 的 PHP 邮件程序插件发送电子邮件。我使用 javascript 从上传 html 表单中获取文件信息，然后使用 php 发送电子邮件。该插件在使用此功能发送保存在服务器上特定位置的文件时起作用：

```
$mail->AddAttachment("./new6.txt","attachment"); 
```

我想知道是否有一种方法可以通过电子邮件发送所选文件而无需将其保存到服务器。换句话说，用户是否可以选择要上传的文件，但使用此 php 函数发送文件而不将其保存在要检索的位置？我知道有一个 $_FILES 数组，您可以获取文件的信息，但该文件是否能够在不先保存在某处的情况下发送？我猜不是因为上传表单的全部目的是“上传”它，而是想知道是否可以用javascript或其他东西完成某些事情。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T03:17:53.867

你不能真正做到这一点，但你可以这样做以获得密切的效果：

```
$filename = $_FILES['file_name']['tmp_name'];
$main->AddAttachment($filename, "attachment");

// Send the email... then:
unset($filename); 
```

这会将文件添加为附件，发送电子邮件，然后删除文件。数组中上传的文件`$_FILES`最终会自动刷新，所以我不确定该`unset()`部分是否有任何重要意义，但它肯定会删除文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T03:21:06.313

如果没有将文件保存在服务器中，则无法将其附加到邮件中。

```
1> Mailing function is executing in Server.
2> It is not possible from Server to get the absolute file path in client machine as in web, the client machines do not have any absolute address.
3> So the file is needed to be uploaded in server to get a real path for the file to have in attachment of Mail. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-16T17:33:10.810

我知道这是一个相当古老的问题，但我认为有一个从未给出过的相当有用的答案。为了像我这样在寻找这个问题或类似问题的答案时遇到这个问题的人，给你。

当您从表单上传文件到服务器时，它会自动保存到 tmp 目录。从技术上讲，在不保存的情况下对表单上传的文件进行任何操作是不可能的，因为它是自动为您完成的。但是，因为 tmp 会在每次重新启动时自动清除，如果您经常重新启动或设置一个 cron 来定期删除您的 tmp 目录内容，这不应该是建立太多积压的问题。

但是，因为它被保存到 tmp，并且因为您可以从那里操作文件，所以可以在不保存任何形式的长寿的情况下发送文件，并且无需实际编写任何内容来保存它。[如果您对文件执行了所有必要的安全检查（验证内容、MIME 类型等，我现在不会介绍，但您可以在此处](https://webcheatsheet.com/php/file_upload.php)阅读如何操作），您可以使用以下 php 函数我从[Codexworld](https://www.codexworld.com/send-email-with-multiple-attachments-php/)得到并修改为使用 tmp 文件。您需要做的就是传递参数，而 $files 是您希望已经审查过的文件数组。

```
function multi_attach_mail($to, $subject, $message, $senderEmail, $senderName, $files = array()){ 

    $from = $senderName." <".$senderEmail.">";  
    $headers = "From: $from"; 

    // Boundary  
    $semi_rand = md5(time());  
    $mime_boundary = "==Multipart_Boundary_x{$semi_rand}x";  

    // Headers for attachment  
    $headers .= "\nMIME-Version: 1.0\n" . "Content-Type: multipart/mixed;\n" . " boundary=\"{$mime_boundary}\"";  

    // Multipart boundary  
    $message = "--{$mime_boundary}\n" . "Content-Type: text/html; charset=\"UTF-8\"\n" . 
    "Content-Transfer-Encoding: 7bit\n\n" . $message . "\n\n";  

    // Preparing attachment 
    if(!empty($files)){ 
        for($i=0; $i<count($files); $i++){
            if(is_file($files[$i]["tmp_name"])){ 
                $tmp_name = basename($files[$i]["tmp_name"]);
                $file_name = $files[$i]["name"];
                $file_size = filesize($files[$i]["tmp_name"]); 

                $message .= "--{$mime_boundary}\n"; 
                $fp =    fopen($files[$i]["tmp_name"], "rb"); 
                $data =  fread($fp, $file_size); 
                fclose($fp); 
                $data = chunk_split(base64_encode($data)); 
                $message .= "Content-Type: application/octet-stream; name=\"".$file_name."\"\n" .  
                "Content-Description: ".$file_name."\n" . 
                "Content-Disposition: attachment;\n" . " filename=\"".$file_name."\"; size=".$file_size.";\n" .  
                "Content-Transfer-Encoding: base64\n\n" . $data . "\n\n"; 
            }
        } 
    } 

    $message .= "--{$mime_boundary}--"; 
    $returnpath = "-f" . $senderEmail; 

    // Send email    
    $mail = mail($to, $subject, $message, $headers, $returnpath);  

    // Return true, if email sent, otherwise return false 
    if($mail){ 
        return true; 
    }else{ 
        return false; 
    } 
} 
```

# php - Paypal 运输和每月重复计费

> ID：15400532
> 
> 赞同：0
> 
> 时间：2013-03-14T03:14:14.583
> 
> 标签：php, codeigniter, paypal

我将建立一个使用贝宝重复计费的网站。我的问题是，如果我有超过 3000 个客户，例如，我如何让我更简单地打印出他们的地址来运送产品，而不是一一进行？我不会为此使用 Paypal api，而是直接链接到 paypal，如本视频所述 [http://www.youtube.com/watch?v=jHC9BoRDEOY&feature=youtube_gdata_player](http://www.youtube.com/watch?v=jHC9BoRDEOY&feature=youtube_gdata_player)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T04:27:25.153

如果我要进行这样的设置，我会使用 PayPal 的 IPN 功能在我的数据库中记录这些重复配置文件的所有交易、交易详细信息和配置文件详细信息。然后我会创建自己的系统来运行报告或对我的数据库进行查询，然后以我想要的任何格式显示信息。

即时付款通知 (IPN) 是一种消息服务，可通知您与 PayPal 交易相关的事件。您可以使用它来自动化后台和管理功能，例如履行订单、跟踪客户以及提供与交易相关的状态和其他信息。

[这里](https://www.x.com/developers/paypal/documentation-tools/paypal-code-samples)有更多关于 IPN的内容。

# r - 我如何知道特定 R 对象的详细信息？

> ID：15400535
> 
> 赞同：1
> 
> 时间：2013-03-14T03:14:21.423
> 
> 标签：r

例如

```
data <- read.csv ("data.csv")
a <- mean(data)
b <- sd(data) 
```

我保存工作区，然后退出。后来，我打开这个工作区，忘记了 a 和 b 是什么。我想让 R 告诉我 a 是数据的平均值，b 是数据的标准差。

我怎么做？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T03:19:32.940

您始终可以将一些属性与您的数据一起存储，如下所示：

```
x <- 1:10
a <- mean(x)
attr(a,"info") <- "mean of x"

> a
[1] 5.5
attr(,"info")
[1] "mean of x"

> attributes(a)
$info
[1] "mean of x" 
```

下面@mnel 指出的另一种方法是使用`comment`. 这些默认情况下不会打印，但可以稍后以类似的方式访问，如下所示：

```
comment(a) <- "mean of x"

> comment(a)
[1] "mean of x" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T03:18:22.837

一个建议是使用 R 环境的脚本功能，而不是直接在控制台中输入命令。

这个想法是，您可以在 a 中键入命令、注释甚至乱码文本（不符合 R 语法的内容），`script window`并使用 Ctrl-R（或菜单中的`Run`命令之一`Edit`）发送当前行，或当前选择的文本的任何部分，到`R Console window` （就像直接在那里输入一样）。

以这种方式，您可以：

*   就您创建的变量的性质添加大量注释
*   将脚本与环境一起保存或独立保存。

除了隐式保存变量起源的记忆之外，脚本还有几个优点，特别是它们可以节省大量输入，并且它们还可以允许“从头开始”重新创建所有内容，逐字逐句或进行一些修改。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-14T03:21:32.243

通常，您将无法从对象本身找出对象是如何创建的。某些`object`类型将具有一个`call`元素，可以保存`call`用于创建它们的元素。

`lm`对象具有此属性。

例如

```
dd <- data.frame(y=runif(10), x= rnorm(10))
model <- lm(y~x,dd)
model$call
lm(formula = y ~ x, data = dd) 
```

在这种情况下`mean`和`sd`它们不会返回原子向量。

你可以看看`history`查看是否可以找到创建它们的命令（这并不理想，这取决于您的 IDE 以及一些环境变量的设置方式）。

Rstudio 有一个历史选项卡，显示项目中调用的先前命令的一些子集。

您也可以按向上键（至少在 Windows 上的 RGui 中有效），滚动浏览先前调用的命令。

这些基于历史记录的命令要求您使用相同的计算机和相同版本的`R`.

可重复的研究或文学编程是克服这些问题的最佳方法。

# registry - Active X 选项的哪些注册表项？

> ID：15400536
> 
> 赞同：4
> 
> 时间：2013-03-14T03:14:23.867
> 
> 标签：registry, activex, autoit

我想以编程方式设置一些注册表项。作为安装例程的一部分，我想启用所有 Active X 选项 - 在受信任区域中。

这些选项位于`HK_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet Settings\Zones\2`（2 是受信任区域），然后具有选项的数字键名。

我能找到的只是[这个页面](http://networkdog.blogspot.sg/2011/04/internet-explorer-9-configurations.html)，但是当我关注它时，然后查看 Inetrnet Explorer (v 9) 的选项，我发现大多数无线电组都没有选择 Active X 选项。

例如，根据那个链接

> ActiveX 控件和插件
> 
> 允许 ActiveX 筛选 REG:HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet Settings\Zones\3\2702

当我的安装程序将此密钥设置为 1（在区域 2，而不是 3）时，更新正确（使用 Regedit 验证），但在 IE 9 中，受信任区域的“允许 ActiveX 过滤”单选组没有选中任何按钮。

因此，我尝试使用[RegScanner](http://www.nirsoft.net/utils/regscanner.html)监视注册表访问，但是当我只单击为受信任区域启用“允许 ActiveX 过滤”时，有数十次写入`HK_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet Settings\Zones\2`并且它们具有数字键名，我不知道哪个是哪个。

任何人都可以帮忙吗？提前致谢。

另外，如果这些选项独立于 MSIE 版本（我认为它们应该是），你会吗？

等等，也许不是，因为IE 6 的[这个页面](http://support.microsoft.com/kb/182569)显示了不同的键。谁能肯定地说？

你能想出任何方法来自动化吗？我不能只记录一个宏，但也许我可以使用[AutoIt](http://www.autoitscript.com/site/autoit/)，运行 MS IE，检查版本号，然后编写一些代码来模拟用户打开对话框和检查单选按钮是否合适？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:22:50.617

我不会编辑注册表（可能涉及很多写入），而是编写一个运行 IE 的 autoit 脚本，打开选项菜单，单击相应的复选框，然后按 OK。

这将使您开始：

```
#include <IE.au3>

$oIE = _IECreate()
ControlSend("Blank Page - Windows Internet Explorer", "", "", "!to") 
```

# c# - 从 C# 将字符数组的数组传递给 Fortran

> ID：15400544
> 
> 赞同：0
> 
> 时间：2013-03-14T03:14:51.930
> 
> 标签：c#, interop, fortran, character, marshalling

我正在尝试调用以下 FORTRAN 方法：

```
subroutine MYMETHOD(THEARRAY) 
```

带参数

```
CHARACTER*200  :: THEARRAY(2) 
```

这看起来很简单，但我遇到了麻烦，因为它是一个字符*数组**数组*。我已经尝试了几种方法，包括封送处理（由于有多个字符串而遇到问题。）我能想到的最好的方法是：

```
[DllImport("theFortranDLL.dll", CallingConvention = CallingConvention.Cdecl)]
static extern void MYMETHOD(THEARRAY);

static void Main(string[] args)
{
    StringBuilder[] theArray = new StringBuilder[2];

    theArray[0] = new StringBuilder("DataA",200);
    theArray[1] = new StringBuilder("DataB",200);

    MYMETHOD(theArray);
} 
```

但是，这不起作用。我将如何从 C# 调用这样的方法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:01:45.257

在 Fortran 中，`CHARACTER*200 :: THEARRAY(2)`不是数组数组。它是一个长度为 200 的定标器字符串的两元素数组。在其他语言中，它可能是一个数组数组。每个 Fortran 字符串的末尾都用空格填充。我不知道 C# 如何处理字符串... C 以空字符终止字符串。对于 Fortran，该空字符必须用空格替换，一直到位置 200。

# ios - 如果我为 facebook 和 Gmail 添加 SSO，那么我应该将使用相同电子邮件 ID 从两者登录的用户视为新用户吗？

> ID：15400547
> 
> 赞同：0
> 
> 时间：2013-03-14T03:14:58.693
> 
> 标签：ios, facebook, single-sign-on

我已经创建了 facebook sso，它运行完美。我将电子邮件 ID 作为我的服务器数据库中的独特因素之一。所以它将第一次登录的用户视为新用户，并在提交带有额外信息的表单后作为已经存在的用户。

我正在考虑添加 gmail sso，但我的查询是，如果 gmail 中的用户与他用来输入 facebook 帐户的电子邮件 ID 相同，那么我应该将他视为现有用户还是新用户，因为电子邮件 ID 是唯一的并且已经存在于服务器数据库中。

或者在上述情况下删除电子邮件 ID 作为唯一因素，或者只检查用户是否从 facebook/gmail 登录，然后进行进一步验证？这个你能帮我吗 。

上述查询的任何帮助或链接都会对我有很大帮助。我将非常感谢任何帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T03:26:23.643

我会说只允许电子邮件成为唯一ID。如果用户对两个帐户使用相同的电子邮件，那就这样吧。所有社交媒体的许多用户都使用一封电子邮件连接到他们的所有帐户。

# css - IE10 悬停菜单显示

> ID：15400548
> 
> 赞同：0
> 
> 时间：2013-03-14T03:15:02.100
> 
> 标签：css, internet-explorer-10

昨天刚刚在 Windows 7 上将我的 IE 升级到版本 10，并且在悬停菜单上遇到问题。

似乎在我尝试过的其他浏览器（包括以前版本的 IE）上可以正常工作，但在 IE10 上，弹出表格菜单会丢失背景和边框。起初在页面加载时还可以，但是在跨项目移动时会丢失表格背景颜色和边框（由于某种原因，表格似乎变成了 0 宽度）。

这是一些示例代码：

```
<!DOCTYPE html>
<html>
    <head>
        <title>IE 10 Menu Test Page</title>
    </head>
    <style>
        li {
            background-color: #cccccc;
            list-style: none;
            position: relative;
            width: 80px;
        }
        li table {
            background-color: #cccccc;
            border: 1px solid #999999;
            display: none;
            left: 75px;
            position: absolute;
            top: 0;
            z-index: 1000;
        }
        li:hover table {
            display: block;
        }
    </style>
    <body>
        <ul>
            <li>Fish
                <table>
                    <tbody>
                        <tr><td>Cod</td></tr>
                        <tr><td>Salmon</td></tr>
                    </tbody>
                </table>
            </li>
            <li>Fruits
                <table>
                    <tbody>
                        <tr><td>Apple</td></tr>
                        <tr><td>Orange</td></tr>
                    </tbody>
                </table>
            </li>
            <li>Grains
                <table>
                    <tbody>
                        <tr><td>Rice</td></tr>
                        <tr><td>Wheat</td></tr>
                    </tbody>
                </table>
            </li>
            <li>Meat
                <table>
                    <tbody>
                        <tr><td>Beef</td></tr>
                        <tr><td>Chicken</td></tr>
                    </tbody>
                </table>
            </li>
            <li>Vegetables
                <table>
                    <tbody>
                        <tr><td>Carrot</td></tr>
                        <tr><td>Tomato</td></tr>
                    </tbody>
                </table>
            </li>
        </ul>
    </body>
</html> 
```

IE版本：10.0.9200.16521

谢谢你的帮助！

*编辑：在这里添加了上面示例的 jsfiddle 供人们试用：http: [//jsfiddle.net/3Babs/](http://jsfiddle.net/3Babs/)*

*编辑2：添加了来自不同浏览器的截图图像进行比较：

1.  铬 (25.0.1364.172)
    ![铬合金](../Images/8acda125d3abfbdb8bb98acfbb9f66d7.png)

2.  火狐 (19.0.2)
    ![火狐](../Images/7bff229995a9b24b8ab43086c734de48.png)

3.  IE10 (10.0.9200.16521)
    ![IE10](../Images/5da2e6a3e0c828e161b374d892481688.png)

4.  歌剧（11.64）
    ![歌剧](../Images/f4f88e7bbc803230e28874d4a13facd6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T21:35:21.947

这应该按预期工作：http: [//jsfiddle.net/ESd8y/1/](http://jsfiddle.net/ESd8y/1/)

从表中删除背景颜色并将其添加到表中`tr`。由于边框没有在表格中折叠，您会看到间隙，因此您需要折叠它们：

```
li table {
        border-collapse: collapse;
        /* other styles here, except background-color */
    }
li table tr {
    background-color: #cccccc;
} 
```

进行这些更改后，它应该可以按预期工作。

# haskell - 如何修复构建 gtk2hs 包中的“外部声明中的不可接受的结果类型：CULong”错误？

> ID：15400549
> 
> 赞同：4
> 
> 时间：2013-03-14T03:15:09.903
> 
> 标签：haskell, gtk2hs

尝试使用 ghc-7.6.1 编译 gtk Haskell 包时，出现以下错误（尝试构建依赖项之一 pango 时，但如果我尝试手动安装它们也会出现在其他依赖项包中）：

```
[ 1 of 14] Compiling Graphics.Rendering.Pango.Types ( dist/build/Graphics/Rendering/Pango/Types.hs, dist/build/Graphics/Rendering/Pango/Types.o )

Graphics/Rendering/Pango/Types.chs:249:1:
    Unacceptable result type in foreign declaration: CULong
    When checking declaration:
      foreign import ccall unsafe "static pango_context_get_type" pango_context_get_type
        :: CULong 
```

我之前安装了旧版本的 gtk2hs，所以在升级过程中会发生这种情况。

如何修复错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T03:15:09.903

如果您安装了旧版本的 gtk2hs-buildtools，则会出现此问题，而旧版本不适用于新版本的 ghc。解决方案是在继续更新之前更新您的 gtk2hs-buildtools 包：

```
sudo cabal install --reinstall gtk2hs-buildtools 
```

# php - foreach 在 while 循环中获取行值...？

> ID：15400559
> 
> 赞同：0
> 
> 时间：2013-03-14T03:16:34.667
> 
> 标签：php, mysql, foreach, while-loop

这是我的代码：

```
$inv = array('field1','field2','field3','field4');
$sql = "select * from table1 where id='1'";
$result = mysql_query($sql);
if(!$result){
    print mysql_error();    
}else{
    while($row = mysql_fetch_array($result)){
        foreach($inv as $i){
            print $row[$i];
        }
    }
} 
```

table1 由以下字段名组成： field1, field2, field3, field4, field5, field6, field7
$inv = explode(',',$item) 其中 $item = table2 $row[value] 返回一个以逗号分隔的字符串可能包含 'field1,field2,field5' 或 'field3,field4,field6'...等。

为什么它只打印field1的值？这段代码有什么问题？

```
 while($row = mysql_fetch_array($result)){
        print $row['field1'];
        print $row['field2'];
        print $row['field3'];
        print $row['field4'];
    } 
```

但如果我这样做，它将打印所有值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T03:20:30.373

您在数组上使用 explode() 。Explode 用于从字符串创建数组。您不必这样做，请参阅手册[http://php.net/explode](http://php.net/explode)了解。更改下面的行

```
$inv = array('field1','field2','field3','field4');
$item = explode(',',$inv); 
```

至

```
$item = array('field1','field2','field3','field4'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T04:06:25.240

根据您的编辑，我猜您的字段名称包含前导空格。您应该使用其中的一个`var_dump()`变量来检查它`$i`，您可以通过修剪它来解决它：

```
$i = trim($i); 
```

# autorun - 是否可以创建一个与自动运行一起使用的文件，以通过闪存驱动器自动输入密码？

> ID：15400561
> 
> 赞同：0
> 
> 时间：2013-03-14T03:16:51.453
> 
> 标签：autorun

我想知道是否有代码或可以与自动运行一起使用的东西来自动输入密码。例如，我是系统管理员，有人偷偷使用键盘记录器来获取管理密码。我想知道是否有一种方法可以自动将密码输入到用户帐户密码框中，而无需实际输入密码，使用闪存驱动器、自动运行和特殊文件。

# html - 显示 div 的内容，但不显示 div“框”

> ID：15400564
> 
> 赞同：0
> 
> 时间：2013-03-14T03:17:11.403
> 
> 标签：html, css, wordpress, wordpress-theming

在我的 wordpress 构建的站点上，具有响应主题的子主题，有一个包含小部件的 div。小部件及其内容显示良好，但“包装” div 未显示我通过 css 设置的样式。如果我使用萤火虫，我可以看到该 div 出现在与另一个“精选”div 相同的位置，但显然在它后面。好吧，我需要它在下面。

该网站是[http://thelawcompany.com.au](http://thelawcompany.com.au)。

问题 div 是`<div id="widgets" class="home-widgets">`. 我希望我在 CSS 中声明的背景和上边框出现在小部件的后面。此外，小部件下方有一个我似乎无法摆脱的巨大差距。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T03:27:22.577

这是因为`#featured`元素是浮动的。

一个解决方案是`widgets`通过添加类来浮动`grid`

演示：[问题](http://jsfiddle.net/arunpjohny/uhM3q/)，[解决方案](http://jsfiddle.net/arunpjohny/uhM3q/1/)

```
<div id="widgets" class="home-widgets grid"> 
```

# javascript - 测试封闭函数

> ID：15400567
> 
> 赞同：0
> 
> 时间：2013-03-14T03:17:25.320
> 
> 标签：javascript, unit-testing, testing

我目前有两个功能，每个功能都有测试：

```
function A(x) {
  // do A things
  return Aresults;
}
function testA() {
  // this put A through its test and make sure it does what it's supposed to
} 
```

和

```
function B(x) {
  // do B things which involve using A
  return Bresults;
}
function testB() {
  // this put B through its test and make sure it does what it's supposed to
} 
```

我现在意识到 A 的唯一用途是在 B 中。所以我想重新考虑以隔离和保护代码：

```
function B(x) {
  function A(x) {
    // do A things
    return Aresults;
  }
  // do B things which involve using A
  return Bresults;
}
function testB() {
  // this put B through its test and make sure it does what it's supposed to
} 
```

我的问题是，既然 A 是 B 的封闭函数，我该如何添加测试？即我的 testA 函数在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T03:21:47.020

你不需要。单元测试的目的是测试*行为*而不是*实现*。

所以你测试的是什么方法，而不是它是怎么做的。

从这个角度来看，您应该只关心函数调用产生的副作用，仅此而已。

# java - MongoDB java驱动程序：线程“main”中的异常java.lang.NoClassDefFoundError：com/mongodb/MongoClient

> ID：15400568
> 
> 赞同：0
> 
> 时间：2013-03-14T03:17:28.580
> 
> 标签：java, ant, classpath

将 jar lib 包含在 ant build.xml 中后，仍然出现错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: com/mongodb/MongoClient 
```

我的ant相关配置如下：

```
<target name="compile" depends="clean">
    <mkdir dir="${classes}"/>
    <javac srcdir="${src}" destdir="${classes}" includeantruntime="false" debug="on">
        <classpath id="classpath">
            <pathelement path="${classpath}"/>
            <fileset dir="lib">
                <include name="mongo-2.10.1.jar"/>
            </fileset>
        </classpath>
    </javac>
</target> 
```

“包含”部分的东西正在工作，因为没有包含部分，甚至我稍微更改了路径名，我都会得到符号未找到错误，这意味着当前类路径确实包含在文件中。但是为什么它仍然不起作用，有人知道吗？

顺便说一句，这是我的java代码的第一行得到错误：

```
MongoClient mongoClient = new MongoClient("localhost",27017); 
```

甚至没有进行插入和查询操作.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:18:48.023

您仅在此处共享了“编译”目标 - 如果您仅将 mongo jar 文件添加到编译目标，那么当您实际运行时，您将丢失依赖项。

检查 mongo jar 是否也在运行时类路径中 - 这可能在“java”ant 目标中配置，具体取决于您的应用程序。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-30T14:34:34.817

您可能想直接检查您的 mongo-java-driver-XXX.jar 文件。旧版本没有 com.mongodb.MongoClient 类。你可以用 Mongo 代替。

代替

```
MongoClient client = new MongoClient(); 
```

输入这个：

```
Mongo client = new Mongo(); 
```

# android - 如何遍历节点并获取它们的属性名称？我正在使用 DOMParser

> ID：15400570
> 
> 赞同：0
> 
> 时间：2013-03-14T03:17:49.220
> 
> 标签：android, domparser

xml 文件如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<parent>
    <child ID="1" Name="CHILD" Order="1">
        <child ID="1" Name="SUB_CHILD" Order="1">
        </child>
    </child>
    <child ID="2" Name="CHILD2" Order="1">
        <child ID="1" Name="SUB_CHILD" Order="1">
        </child>
    </child>
</parent> 
```

代码（新）：

```
 void listNodes(NodeList list) {
    if (list.getLength() > 0) {
        for (int i = 0; i < list.getLength(); i++) {
            System.out.println("-------------------");
            if (list.item(i).hasAttributes()) {
                NamedNodeMap attrs = list.item(i).getAttributes();
                for (int index = 0; index < attrs.getLength(); index++) {
                    Attr attribute = (Attr) attrs.item(index);
                    if(attribute.getName().equals("Name")){
                     names[index] = ????                            
                        }
                }
            }else{
                System.out.println(list.item(i).getNodeName()+ " has no attributes");
            }
            System.out.println("-------------------");
        }
    }
} 
```

我已经编辑了代码。现在我知道`attribute`有属性了。如何提取属性`Name`并将其放入字符串数组中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T03:40:20.590

代码将是这样的。

```
private void usingDOMParser() {
        try {
            DocumentBuilderFactory mDocumentBuilderFactory = DocumentBuilderFactory
                    .newInstance();
            DocumentBuilder mDocumentBuilder = mDocumentBuilderFactory
                    .newDocumentBuilder();
            Document mDocument = mDocumentBuilder.parse(new InputSource(
                    getAssets().open("example.xml")));
            mDocument.getDocumentElement().normalize();
            NodeList mNodeList = mDocument.getElementsByTagName("child");
            for (int i = 0; i < mNodeList.getLength(); i++) {
                Node mNode = mNodeList.item(i);
                Element mElement = (Element) mNode;
                NodeList nameList = mElement.getElementsByTagName("child");
                Element nameElement = (Element) nameList.item(0);
                nameList = nameElement.getChildNodes();
                Log.i("TAG", "ID: " + nameElement.getAttribute("ID"));
                Log.i("TAG", "Name: " + nameElement.getAttribute("Name"));
                Log.i("TAG", "Order: " + nameElement.getAttribute("Order"));
            }
        }
        catch (Exception e) {
            Log.e("TAG", "Exception: " + e.toString());
        }
    } 
```

我把你的`XML`文件放在这里，`Assets folder`但如果你想从 Internet 访问它，你可以这样做。

> 日志

```
03-14 17:58:15.845: I/AllTestActivity(624): ID: 1
03-14 17:58:15.845: I/AllTestActivity(624): Name: CHILD
03-14 17:58:15.845: I/AllTestActivity(624): Order: 1
03-14 17:58:15.845: I/AllTestActivity(624): ID: 1
03-14 17:58:15.845: I/AllTestActivity(624): Name: SUB_CHILD
03-14 17:58:15.845: I/AllTestActivity(624): Order: 1
03-14 17:58:15.845: I/AllTestActivity(624): ID: 1
03-14 17:58:15.845: I/AllTestActivity(624): Name: SUB_CHILD_NODE1
03-14 17:58:15.845: I/AllTestActivity(624): Order: 01
03-14 17:58:15.845: I/AllTestActivity(624): ID: 2
03-14 17:58:15.845: I/AllTestActivity(624): Name: SUB_CHILD_NODE2
03-14 17:58:15.845: I/AllTestActivity(624): Order: 02
03-14 17:58:15.854: I/AllTestActivity(624): ID: 2
03-14 17:58:15.854: I/AllTestActivity(624): Name: CHILD2
03-14 17:58:15.854: I/AllTestActivity(624): Order: 1
03-14 17:58:15.854: I/AllTestActivity(624): ID: 1
03-14 17:58:15.854: I/AllTestActivity(624): Name: SUB_CHILD
03-14 17:58:15.854: I/AllTestActivity(624): Order: 1
03-14 17:58:15.854: I/AllTestActivity(624): ID: 1
03-14 17:58:15.854: I/AllTestActivity(624): Name: SUB_CHILD_NODE1
03-14 17:58:15.854: I/AllTestActivity(624): Order: 01
03-14 17:58:15.854: I/AllTestActivity(624): ID: 2
03-14 17:58:15.854: I/AllTestActivity(624): Name: SUB_CHILD_NODE2
03-14 17:58:15.854: I/AllTestActivity(624): Order: 02 
```

> 进口：

```
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.InputSource;
import android.app.Activity;
import android.os.Bundle;
import android.util.Log; 
```

我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T06:00:47.537

我发现了一种通用解决方案@ [http://www.java2s.com/Code/JavaAPI/org.w3c.dom/NodegetAttributes.htm](http://www.java2s.com/Code/JavaAPI/org.w3c.dom/NodegetAttributes.htm)

我也试过你的xml，它工作正常；只需填充您的 POJO 而不是 Sysout 就可以了。

您需要的方法是

```
static void listNodes(Node node, String indent) {
    String nodeName = node.getNodeName();
    System.out.println(indent + " Node: " + nodeName);
    short type = node.getNodeType();
    //System.out.println(indent + " Node Type: " + nodeType(type));
    if (type == TEXT_NODE) {
        System.out.println(indent + " Content is: "
                + ((Text) node).getWholeText());
    } else if (node.hasAttributes()) {
        System.out.println(indent + " Element Attributes are:");
        NamedNodeMap attrs = node.getAttributes();
        for (int i = 0; i < attrs.getLength(); i++) {
            Attr attribute = (Attr) attrs.item(i);
            System.out.println(indent + " " + attribute.getName() + " = "
                    + attribute.getValue());
        }
    }

    NodeList list = node.getChildNodes();
    if (list.getLength() > 0) {
        System.out
                .println(indent + " Child Nodes of " + nodeName + " are:");
        for (int i = 0; i < list.getLength(); i++) {
            listNodes(list.item(i), indent + "  ");
        }
    }
}

static String nodeType(short type) {
    switch (type) {
    case ELEMENT_NODE:
        return "Element";
    case DOCUMENT_TYPE_NODE:
        return "Document type";
    case ENTITY_NODE:
        return "Entity";
    case ENTITY_REFERENCE_NODE:
        return "Entity reference";
    case NOTATION_NODE:
        return "Notation";
    case TEXT_NODE:
        return "Text";
    case COMMENT_NODE:
        return "Comment";
    case CDATA_SECTION_NODE:
        return "CDATA Section";
    case ATTRIBUTE_NODE:
        return "Attribute";
    case PROCESSING_INSTRUCTION_NODE:
        return "Attribute";
    }
    return "Unidentified";
} 
```

**已编辑**

根据您的要求，我稍微修改了代码，因为您只需要直接子节点而不是子子节点。干得好：

```
 void listNodes(NodeList list) {
    if (list.getLength() > 0) {
        for (int i = 0; i < list.getLength(); i++) {
            System.out.println("-------------------");
            if (list.item(i).hasAttributes()) {
                NamedNodeMap attrs = list.item(i).getAttributes();
                for (int index = 0; index < attrs.getLength(); index++) {
                    Attr attribute = (Attr) attrs.item(index);
                    System.out.println(" " + attribute.getName() + " = "+ attribute.getValue());
                }
            }else{
                System.out.println(list.item(i).getNodeName()+ " has no attributes");
            }
            System.out.println("-------------------");
        }
    }
} 
```

调用这个方法`listNodes(document.getDocumentElement().getChildNodes());`它对我有用。

# objective-c - ARC CCSprite 内存泄漏

> ID：15400576
> 
> 赞同：0
> 
> 时间：2013-03-14T03:18:19.357
> 
> 标签：objective-c, cocos2d-iphone, automatic-ref-counting, ccsprite

我有以下代码

```
__weak CCSprite *paddleSprite = [CCSprite spriteWithFile:@"paddle.png"]; 
```

Instruments 正在检测内存泄漏，并告诉我这条线上有内存泄漏。

有没有人对此有所了解。CCSprite 不是自动释放对象吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T04:58:07.043

我解决了这个问题。问题实际上出在 Box2d 中。对于 b2BodyDef 我有这个：

```
paddleBodyDef.userData = (__bridge_retained void*)paddleSprite; 
```

但这是不正确的（在我的情况下）。正确的是这个

```
paddleBodyDef.userData = (__bridge void*)paddleSprite; 
```

同样在 dealloc 方法中我把

```
paddleBodyDef.userData = NULL; 
```

# ruby-on-rails - 在 Rails 中使用 has_many 关系访问模型数据

> ID：15400581
> 
> 赞同：0
> 
> 时间：2013-03-14T03:18:31.443
> 
> 标签：ruby-on-rails, models, has-many

我有以下型号：

```
class User < ActiveRecord::Base
  devise :database_authenticatable, :registerable,
     :recoverable, :rememberable, :trackable, :validatable

  attr_accessible  :name, :email, :password, :password_confirmation, :remember_me

  has_many :rulesets
end

class Ruleset < ActiveRecord::Base
  attr_accessible :title, :game_id, :user_id

  validates :game_id, presence: true
  validates :user_id, presence: true
  validates :title, presence: true

  belongs_to :user
  belongs_to :game
  has_many :rules
end

class Rule < ActiveRecord::Base
  attr_accessible :description, :ruleset_id
  belongs_to :ruleset

  validates :description, presence: true
  validates :ruleset_id, presence: true
end 
```

我有一个名为 PagesController 的控制器，它控制用户仪表板，我想在其中显示用户拥有的规则集数量和规则数量。这是我的控制器

```
class PagesController < ApplicationController

  def home
  end

  def dashboard
    @rulesets = current_user.rulesets 
  end
end 
```

在我的仪表板视图中，我试图显示规则集和规则计数：

```
<% if current_user.rulesets.any? %>
  <li><%= @rulesets.count %> Ruleset</li>
  <li><%= @rulesets.rules.count%> Rules</li>
<% end %> 
```

如果我只是尝试计算规则集，这将返回正确数量的规则集。当我尝试计算规则时，我得到这个和“未定义的方法‘规则’”错误。我应该如何访问用户规则集中的规则？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T04:47:32.410

您需要计算所有规则集和每个规则集的规则。使用类似的东西：

```
@rulesets.collect {|r| r.rules.count}.sum 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T03:31:05.493

规则将与特定的规则集相关联。您应该通过 id 指定规则集，然后使用“.rules.count”来计算与该规则集关联的所有规则。

# android - 来自孩子的 onBackPressed 总是调用父母 onBackPressed

> ID：15400582
> 
> 赞同：0
> 
> 时间：2013-03-14T03:18:35.937
> 
> 标签：android, android-tabhost, activitygroup, android-tabactivity

我有一个包含 5 个选项卡的选项卡视图。在其中一个选项卡中有一个按钮，单击该按钮将打开一个新活动。直到现在一切正常。但是当我从该活动中单击返回按钮时，它会打开其父活动的 onBackPressed 方法.我想打开它自己的 onBackPressed 方法。提前谢谢..

此父活动正在从 tabview 打开

**家长活动**

```
public class ProgressActivity extends ActivityGroup 
{
private ArrayList<View> history;
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.progress_tabview);
    this.history = new ArrayList<View>();
}
public void showProgress(View v) 
{
    Intent intMyProg = new Intent(this,ShowProgress.class);
    //startActivity(intMyProg);

    View MyView = getLocalActivityManager()
            .startActivity("MyIntent", intMyProg
            .addFlags(Intent.EXTRA_DOCK_STATE_DESK))
            .getDecorView();

    replaceView(MyView);
}

public void replaceView(View v) 
{
    history.add(v);
    setContentView(v);
}

//@Override  
public void onBackPressed() 
{  
    Toast.makeText(getApplicationContext(), "Back button pressed from parent activity", Toast.LENGTH_SHORT).show();
}
} 
```

**儿童活动**

```
public class ShowProgress extends ActivityGroup
{
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.progress);

    AlertDialog alertDialog = new AlertDialog.Builder(ShowProgress.this.getParent()).create();
    alertDialog.setTitle("Hello ...");
    alertDialog.setMessage("Hello world this is Anirban !");
    alertDialog.setIcon(R.drawable.tick);
    alertDialog.setButton("OK", new DialogInterface.OnClickListener() 
    {
        public void onClick(DialogInterface dialog, int which) 
        {
            Toast.makeText(getApplicationContext(), "You clicked on OK", Toast.LENGTH_SHORT).show();
        }
    });
    alertDialog.show();
}

//@Override  
    public void onBackPressed() 
    {  
        Toast.makeText(getApplicationContext(), "Back button pressed from child activity", Toast.LENGTH_SHORT).show();
    }

 } 
```

帮助将不胜感激

# c# - 如何为 ListBoxItems 设置不同的 Horizo ntalAlignment

> ID：15400583
> 
> 赞同：3
> 
> 时间：2013-03-14T03:18:54.283
> 
> 标签：c#, wpf, windows-phone

我昨天发布[了一个问题](https://stackoverflow.com/questions/15376982/how-to-create-different-itemspaneltemplate-for-a-listbox)，但我认为我没有正确解释它。

让我再尝试一次。

所以这是我的目标：

![在此处输入图像描述](../Images/6a16cecedb6b7a93a430c7018088e690.png)

红色气泡代表传入消息，蓝色气泡代表传出消息。我可以使用以下 xaml 代码更准确地描述这一点。请注意，以下代码只是对我的实际 xaml 代码（带有一些 DataTemplates）编译时我期望得到的结果的解释（WPF 将使用 DataTemplates 自动为我填充数据）。：

```
<ListBox>
    <ListBoxItem HorizontalAlignment="Right">
        <Grid Background="Blue">
            <TextBlock Text="Help me please!" FontSize="30"/>
        </Grid>
    </ListBoxItem>
    <ListBoxItem HorizontalAlignment="Left">
        <Grid Background="Red">
            <TextBlock Text="What do you want?" FontSize="30"/>
        </Grid>
    </ListBoxItem>
    <ListBoxItem HorizontalAlignment="Right">
        <Grid Background="Blue">
            <TextBlock Text="I want a ListBox" FontSize="30"/>
        </Grid>
    </ListBoxItem>
    <ListBoxItem HorizontalAlignment="Left">
        <Grid Background="Red">
            <TextBlock Text="Then?" FontSize="30"/>
        </Grid>
    </ListBoxItem>
    <ListBoxItem HorizontalAlignment="Right">
        <Grid Background="Blue">
            <TextBlock Text="But the Grid won't fill" FontSize="30"/>
        </Grid>
    </ListBoxItem>
</ListBox> 
```

为了实现这一点，我写道：

```
<ListBox>
    <ListBox.ItemTemplate>
        <DataTemplate>
            <ListBoxItem>
                <Grid Background="{Binding Color}">
                    <TextBlock Text="{Binding Text}" FontSize="30"/>
                </Grid>
            </ListBoxItem>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

请注意，上面的代码中没有指定对齐方式，因为我真的不知道如何使用模板分别为 ListBoxItem 设置不同的对齐方式。所以这会导致默认情况下所有蓝色和红色网格都向左对齐。

我的第一种方法包括一个数据模板选择器（传入消息的模板被省略）：

```
<ListBox>
    <ListBox>
        <ListBox.ItemTemplate>
            <!-- local:MessageBubbleTemplateSelector.OutgoingMessageTemplate  -->
            <DataTemplate>
                <ListBoxItem>
                    <Grid>
                        <Grid Background="{Binding Color}" HorizontalAlignment="Right">
                            <TextBlock Text="{Binding Text}" FontSize="30"/>
                        </Grid>
                    </Grid>
                </ListBoxItem>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</ListBox> 
```

但这没有用。因为`Grid`包裹语音气泡的那个不会自动膨胀，所以`Grid`里面的对齐`Grid`没关系（紧密贴合）。

然后我去搜索如何在 a`Grid`内部扩展 a `StackPanel`，但没有运气。

经过数小时的谷歌搜索和反复试验，我决定为`ItemsPanelTemplate`自己定义模板。我的`Message`对象中有一个属性，可以帮助我区分传入消息和传出消息。但我不知道如何创建`ItemsPanelTemplate`选择器（作为记录，谷歌告诉我`Style.Trigger`Windows Phone 8 不支持）。

所以我的问题是：*如何设置不同的 Horizo​​ntalAlignment* `ListBoxItems`？

顺便说一句，`ItemsPabelTemplate`看起来像这样：

```
<ListBox.ItemsPanel>
    <ItemsPanelTemplate>
        <StackPanel />
    </ItemsPanelTemplate>
</ListBox.ItemsPanel> 
```

非常感谢您的耐心等待。我已经在这里疯狂绝望了......浪费了这么多时间......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T08:14:54.290

**注意：我没有 Phone SDK，所以只能使用普通的 WPF 应用程序。我没有使用你提到的触发器，它们不起作用。**

所以我敲了一个看起来像这样的简单应用程序

![在此处输入图像描述](../Images/64a42ad77d1b8131f7f852d1b5b95a6b.png)

这是代码：

应用程序.xaml.cs

```
public partial class App : Application
{
    protected override void OnStartup(StartupEventArgs e)
    {
        base.OnStartup(e);

        var mainvm = new MainWindowViewModel();
        var window = new MainWindow
        {
            DataContext = mainvm
        };
        window.Show();

        mainvm.Messages.Add(new OutgoingMessage{ MessageContent = "Help me please!"});

        mainvm.Messages.Add(new IncomingMessage { MessageContent = "What do you want" });

        mainvm.Messages.Add(new OutgoingMessage { MessageContent = "I want a ListBox" });

        mainvm.Messages.Add(new IncomingMessage { MessageContent = "Then?" });

        mainvm.Messages.Add(new OutgoingMessage { MessageContent = "But the Grid won't fill" });
    }
} 
```

主窗口.xaml

```
<Window x:Class="ChatUI.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:ChatUI"
    Title="MainWindow" Height="350" Width="200">
<Window.Resources>
    <DataTemplate DataType="{x:Type local:IncomingMessage}">
        <Grid Margin="0,10">
            <Border CornerRadius="8" Background="Red" BorderBrush="Black" BorderThickness="1" />
            <TextBlock Text="{Binding MessageContent}" HorizontalAlignment="Left" Margin="5" Foreground="White"/>
        </Grid>
    </DataTemplate>

    <DataTemplate DataType="{x:Type local:OutgoingMessage}">
        <Grid Margin="0,10">
            <Border CornerRadius="8" Background="Blue" BorderBrush="Black" BorderThickness="1" />
            <TextBlock Text="{Binding MessageContent}" HorizontalAlignment="Right" Margin="5" Foreground="White"/>
        </Grid>
    </DataTemplate>
</Window.Resources>
<Grid Background="Black">
    <ItemsControl ItemsSource="{Binding Path=Messages}"/>
</Grid> 
```

ViewModelBase.cs

```
public class ViewModelBase : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    protected void OnPropertyChanged(string propertyName)
    {
        this.OnPropertyChanged(new PropertyChangedEventArgs(propertyName));
    }

    protected virtual void OnPropertyChanged(PropertyChangedEventArgs e)
    {
        var handler = this.PropertyChanged;
        if (handler != null)
        {
            handler(this, e);
        }
    }
} 
```

主窗口视图模型：

```
public class MainWindowViewModel : ViewModelBase
{
    public MainWindowViewModel()
    {
        Messages = new ObservableCollection<Message>();
    }
    public ObservableCollection<Message> Messages { get; protected set; }
} 
```

消息.cs：

```
public abstract class Message : ViewModelBase
{
    private string _messageContent;

    public string MessageContent 
    {
        get
        {
            return this._messageContent;
        }
        set
        {
            this._messageContent = value;
            this.OnPropertyChanged("MessageContent");
        }
    }   
} 
```

传出消息.cs

```
public class OutgoingMessage : Message
{
} 
```

传入消息.cs

```
public class IncomingMessage : Message
{
} 
```

**这是如何工作** 的，我覆盖了应用程序启动，以便我可以创建视图模型来填充我的 UI。您可以在 App.xaml.cs 代码中看到我创建窗口并显示它，然后添加消息。我打算使用计时器，但变得懒惰。

如果您查看 MainWindow.xaml，您会注意到我定义了 2 个 DataTemplates。其中一个以我的 IncomingMessageViewModel 为目标，另一个以 OutogingMessageViewModel 为目标。本地前缀是我的应用程序命名空间的别名。我有一个 ItemsControl 可以包含基本类型 Message 类，这样我就可以在同一个集合中同时拥有传入和传出消息。这绑定到我的 MainWindowViewModel 类的 Messages 属性。将传入和传出消息作为 2 个单独的类非常重要，因为这是使这项工作发挥作用的魔力。

另一种技术是使用属性和绑定到属性的样式选择器，正如其他答案之一所建议的那样，但这意味着我必须在我的 ViewModel 中处理 UI 特定逻辑（我不喜欢做）。

要更改任一消息类型的外观，只需更改相应 DataTemplate 中的 xaml 代码。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T03:31:05.493

在 WPF 中，您需要添加

```
 <ListBox.ItemContainerStyle>
        <Style>
            <Setter Property="HorizontalAlignment" Value="{Binding WHATEVER}" />
        </Style>
    </ListBox.ItemContainerStyle> 
```

到您的 ListBox 并将“WHATEVER”设置为具有指定对齐方式的项目的属性...我不知道这是否适用于 Windows Phone，但它似乎值得一试，因为您没有提到 ItemContainerStyle.. .

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T05:19:18.203

不要使用 Grid，而是使用带有 Horizo​​ntalAlignment="Stretch" 的 DockPanel。

至于数据对齐，假设您使用的是 ItemsSource，那么有一些解决方法。

首先，简单的做法是将 Horizo​​ntalAlignment WPF 属性添加到您的消息类中。消息类将确定 Horizo​​ntalAlignment 是左还是右。但是，这将使 UI 的依赖性更高。

代码将是这样的：

```
<TextBlock Text="{Binding Text}" HorizontalAlignment="{Binding MessageHAlign}" /> 
```

其次，更好（或干净）的方法是使用转换器（IValueConverter）进行水平对齐绑定。这更难，您必须定义自己的转换器，但您的代码会更整洁。然后您的消息有一个名为 MessageType 的收入或结果消息的枚举。然后在你的转换器中定义它：

```
public object Convert(object value, Type targetType, 
  object parameter, CultureInfo culture)
{
  if(parameter is MessageType){
    if(((MessageType)parameter) == MessageType.Income){
      return HorizontalAlignment.Left;
    }
    else{
      return HorizontalAlignment.Right;
    }
  }
} 
```

以上代码未经测试，请慎重考虑。关于Converter的实现，请在一些地方搜索。如果没有帮助源，我仍然无法生成 Converter 绑定:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T04:43:23.720

试试这个并根据传入为左和传出为右设置属性

```
<DataTemplate>

<ListBoxItem>

 <Grid>
 <Grid Background="{Binding Color}" HorizontalAlignment="{Binding Property}">
  <TextBlock Text="{Binding Text}" FontSize="30"/>
 </Grid>
 </Grid>
 </ListBoxItem>
 </DataTemplate> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T10:51:04.597

那将是我肮脏的工作示例

## 代码隐藏

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        var l = new List<lItem>();

        for(int i=0;i<5;i++)
        {
        l.Add(new lItem(true,"aaa"+i));
        l.Add(new lItem(false,"bbb"+i));
        }

        sads.ItemsSource = l;

    }
}

public class lItem
{
    public string Text { get; set; }
    public Brush Color { get; set; }
    public HorizontalAlignment alig { get; set; }

    public lItem(bool ss, string str)
    {
        Text = str;
        Color = Brushes.Blue;
        alig = HorizontalAlignment.Right;

        if (ss)
        {
            Color = Brushes.Red;
            alig = HorizontalAlignment.Left;
        }
    }
} 
```

## Xaml

```
<ListBox Name="sads" Width="230">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <ListBoxItem>
                        <Grid Width="200">
                            <Label Background="{Binding Color}" VerticalAlignment="Top" HorizontalAlignment="{Binding alig}" >
                                <TextBlock Text="{Binding Text}" FontSize="30"/>
                            </Label>
                        </Grid>
                    </ListBoxItem>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

**我建议使用触发器而不是在 ViewModel 中定义可视部分**

# html - 如何使用 css 调整颜色渐变以创建闪亮或有光泽的按钮？

> ID：15400584
> 
> 赞同：0
> 
> 时间：2013-03-14T03:18:56.090
> 
> 标签：html, css, button, gradient

是否有任何公式或系统规则来创建这些渐变，而不是多次尝试？通过谷歌有很好的闪亮/光泽按钮演示，但他们使用的渐变颜色仅用于特定颜色。

# algorithm - 对具有 2 个已排序子数组的数组进行就地排序

> ID：15400585
> 
> 赞同：5
> 
> 时间：2013-03-14T03:19:00.603
> 
> 标签：algorithm, sorting

【这是一道面试题。我找不到副本。]

一个数组包含两个子排序数组。给出一个就地算法对两个子数组进行排序。

例如： I/P：1 4 5 7 8 9 2 3 6 10 11 O/P：1 2 3 4 5 6 7 8 9 10 11

我考虑了就地合并排序、插入排序（因为子数组已经排序）和快速排序，但想不出比使用标准排序方法更复杂的解决方案。

请帮助我找到一种算法，该算法允许我们利用排序的子数组属性并导致比在输入上运行 Quicksort 更好的时间复杂度。

这是我想到的合并排序模拟，使用这个例子：

```
 1) For position 0, Comparing 1 & 2, 1 is smaller let it stay at it's original place
  2) For position 1, Comparing 2 & 4, 2 is smaller so swap 2 and 4
  3) For position 2, Comparison now is between 4 and 3 (5 > 4 anyways) swap 3 and 5
  4) For position 3, Comparison between 4 & 5, swap 4 and 7
  5) For position 4, Comparison between 7 & 5, swap 8 and 5 
  6) For position 5, Comparison between 7 & 8 (OUCH!!) it should have been between 7 & 6 
```

似乎这个问题类似于对矩阵的排序行进行排序，其中就地合并太复杂了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T16:42:22.463

请参阅[http://comjnl.oxfordjournals.org/content/38/8/681.full.pdf+html](http://comjnl.oxfordjournals.org/content/38/8/681.full.pdf+html)了解用于解决此确切问题的线性时间算法，并说明在提出该解决方案时花费了多少精力。

我的猜测是面试官有一些他们认为有效的可爱答案，但事实并非如此。第二个最好的猜测是他们没有指定复杂性是有原因的。

在一次采访中，我实际上会说，“我不知道如何有效地做到这一点，尽管我确信有关于这个问题的研究。但这是一个低效的答案。” 然后我会做一些明显有效的事情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T03:48:51.343

有一个就地合并排序具有 O(n log n) 最坏情况的行为，但正如论文所说，“由于涉及的常数因素，该算法主要具有理论意义。” 见[https://stackoverflow.com/a/2571104/56778](https://stackoverflow.com/a/2571104/56778)

如果您不能分配一个与已排序子数组之一一样大的临时缓冲区，则就地合并将非常困难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-25T12:29:19.923

```
 // since both are sorted use array b as min heap
    // if a[i] > b[0] (top of min-heap), exch it and heapify b
    // order : O(nlog(n))
   void inplaceMerge(vector<int>& a, vector<int>& b)
   {
     for (int i=0; i < a.size(); i++)  {
         if (a[i] > b[0]) {
                swap(a[i], b[0]);
                sink(b, 0, b.size()-1); // bubbleDown() operation in heap() 
         }
      }
      sort(b.begin(), b.end());   
    }

   void sink(vector<int>& b, int i, int n)
   {
            int j = 2*i + 1;
            while (j <= n) {
                 if (j+1 < n && b[j+1] < b[j]) j++;
                 if (b[j] < b[i]) swap(b[i], b[j]);
                 else break;
                 i = j;
                 j = 2*i + 1;
            }
   } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T05:23:03.677

对于面试问题，在您的算法中，一旦交换结果数组就不再单独排序。您应该“冒泡”较大的交换元素，直到它到达正确的位置，然后继续。

为简单起见，让我们取 2 个数组，其中 topA 和 topB 作为当前位置（最初都是 0）。令所需的结果数组为 A[1..m]..B[1..n]。这是一个伪代码：

```
if (A[topA] < B[topB]) {
    swap (A[topA], B[topB])
    index = topB;
    while (B[index] < B[index + 1]) {
        swap(B[index], B[index + 1])
    }
    topB++
} else {
  topA++;
} 
```

在上述每次运行结束时，生成的数组被排序并变小。这可以持续到其中一个阵列用完为止。然而，由于冒泡阶段，复杂度将大于 O(m+n)。

# java - 用于拼写和 javadoc 验证的检查工具

> ID：15400586
> 
> 赞同：4
> 
> 时间：2013-03-14T03:19:17.493
> 
> 标签：java, coding-style, documentation, javadoc, checkstyle

如果问题重复，我们深表歉意。

实际上，我正在寻找一种自动检查工具来识别：

*   丢失的 javadoc，
*   不完整的 javadoc 或
*   缺少简报
*   测试和识别 javadoc 注释中的拼写或语法错误。

我知道很少有工具可以做这些事情，例如[checkstyle](http://checkstyle.sourceforge.net/)和[open javadoc check](https://github.com/egonw/ojdcheck)等。但是如果有更多可用的工具，我需要建议，如果是的话，哪一个更适合我的需要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-23T13:33:01.503

关于拼写和语法——在人们签入代码之前你会进行代码审查吗？那么检查拼写和语法怎么样？

对于已经存在的类——如果你真的需要更好的语法检查，你要么必须使用商业工具，要么自己编写工具（例如，解析所有 javadocs 并在其上运行拼写和语法检查器的 python 脚本）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T03:31:23.730

IDE（集成开发环境）通常包括 javadocs 和注释中的拼写检查。我知道 Eclipse 肯定可以（[http://www.eclipse.org/downloads/](http://www.eclipse.org/downloads/) - 为 Java 开发人员选择 IDE 150mb）。

此外，您不必为问题是否重复而道歉 - 您的第一个资源应该是 google，您的第二个资源应该是 SO 搜索，而您的第三个资源应该是您在输入标题时得到的“类似问题”框。

# javascript - Javascript：从默认对象填充对象中的未定义属性

> ID：15400595
> 
> 赞同：0
> 
> 时间：2013-03-14T03:20:27.600
> 
> 标签：javascript, object

我正在尝试使用默认对象中的值将未定义的属性填充到对象中。

我基本上想做一些类似下划线的“_.default”功能的事情。

这是我所拥有的：

```
 defaults: function(anyObject){

      var argArray = Array.prototype.slice.call(arguments,1);

       for(var key in argArray){
        if(anyObject[key] == null){
            anyObject[key] = argArray[key];
          } 
        } return anyObject; 
       } 
```

我通过以下方式调用该函数：

```
defaults({extension : ".jpeg"}, {extension : ".gif", quality : "high"}); 
```

我希望它返回以下内容：

```
=> {extension : ".jpeg", quality : "high"} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T03:26:02.273

我会尝试这样的事情：

```
defaults: function(defaults) {
    var args = Array.prototype.slice.call(arguments, 1);

    for (var i = 0; i < args.length; i++) {
        var arg = args[i];

        for (var key in arg) {
            if (!(key in defaults)) {
                defaults[key] = arg[key];
            }
        }
    }

    return defaults;
} 
```

这只会将新密钥添加到`defaults`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T03:31:48.913

试试这样：

```
defaults: function(obj, def) {
  Object.keys(def).forEach(function(key) {
    obj[key] = obj[key] || def[key]; 
  });
  return obj;
} 
```

# php - 循环多个文件上传索引

> ID：15400612
> 
> 赞同：1
> 
> 时间：2013-03-14T03:21:47.020
> 
> 标签：php, html, file-upload

我正在尝试获取所有上传文件的名称和大小索引，但无法正常工作。它是这样工作的：

```
foreach ($_FILES['file']['name'] as $key => $file){
         echo $file;

         } 
```

但是如果我想在同一个循环中回显多个索引，我会尝试这个，但我会收到“未定义的索引'名称'和'大小'”警告。我究竟做错了什么？谢谢

```
foreach ($_FILES['file'] as $key => $file){
         echo $file['name'].
              $file['size'];

}
    <input name ="file[]" type = "file"  multiple /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T03:31:20.227

```
function handle_image_upload($frmFilesID = false, $thisFile = false) {
        $tmpName = $_FILES["$frmFilesID"]['tmp_name'][$thisFile];
        if (!is_uploaded_file($tmpName)) { return false; }
        $fileName = $_FILES["$frmFilesID"]['name'][$thisFile];
        $fileSize = $_FILES["$frmFilesID"]['size'][$thisFile];
        $fileType = $_FILES["$frmFilesID"]['type'][$thisFile];
            ... 
```

# delphi - 乘以 LongInts。形式的表达： Int64Var := LongIntVar * LongIntVar

> ID：15400622
> 
> 赞同：0
> 
> 时间：2013-03-14T03:23:30.327
> 
> 标签：delphi, pascal

我一直认为这是 Pascal 设计理念的一部分，即在决定用于操作的格式/精度时，它会同时查看表达式的右侧和左侧。因此，与 C 中的表达式不同，

```
Float_Var = 1/3 
```

结果 Float_Var 的值为 0.0，Pascal 总是能正确处理这些内容。:)

因此，当我将两个 LongInts（32 位）相乘得到一个 Int64 结果并发现我得到异常结果时，我有点惊讶。我必须得到所有的 C 喜欢和使用，

```
Int64_Var := Int64(LongIntVar1) * LongIntVar2 
```

使其正常工作。（顺便说一句。这是在Delphi下，测试了各种版本，但都是win32）。

我只是想知道这是否是 Delphi/Pascal 中的一个例外情况？或者是否还有其他示例，通常的 Pascal 方式（使用表达式两侧的类型来决定如何执行操作）不成立。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T06:15:30.543

如果“双方”是指它在分配中查看目标变量的类型以确定表达式类型，那么不，从未如此。在这方面，Delphi 的工作方式与任何其他主流编译器一样——也就是说，表达式的类型是由内而外确定的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T07:02:12.900

> 我一直认为这是 Pascal 设计理念的一部分，即在决定用于操作的格式/精度时，它会同时查看表达式的右侧和左侧。

这是不正确的。表达式赋值目标不影响表达式的计算。

原因是

```
Float_Var = 1/3; 
```

在 C/C++ 中计算为 0 是 / 运算符重载。它可以表示整数除法或浮点除法。如果参数之一是浮点，则运算符是浮点除法，否则，如这里，它是整数除法。

在 Delphi 中，/ 运算符没有重载。它始终是浮点除法。这就是为什么这段代码会出现编译错误：

```
Int_Var := 1/3; 
```

# javascript - 用jquery保存在全局变量img属性位置

> ID：15400625
> 
> 赞同：0
> 
> 时间：2013-03-14T03:23:52.427
> 
> 标签：javascript, jquery, html, hover

我有几个这样的部分：

```
<section class="one">
    <div class="two  over"  element="myelement1">
          <div class="front" >
            <img src="element.jpg" width ="100%;" height ="100%;" alt="">
          </div>
          <div class="back">                        
          </div>
        </div>          
</section>
<section class="one ">
    <div class="two over"  element="myelement2">
          <div class="front" >
            <img src="element2.jpg" width ="100%;" height ="100%;" alt="">
          </div>
          <div class="back">                        
          </div>
        </div>          
</section> 
```

然后我有一个类似的功能：

```
var i = j =0;
$(function () {
    $('.over').hover(function () {
     /*do something*/
    }, function () {
                if ( $(this).attr('element') == 'myelement1'){
            img = $(this).find('img');
            img.attr('src', arr_1[i]);
            i++;
            if(i > arr_1.length-1) i=0;   
        }
                if ( $(this).attr('element') == 'myelement2'){
            img = $(this).find('img');
            img.attr('src', arr_2[j]);
            j++;
            if(j > arr_2.length-1) j=0;   
        } 

     });
}) 
```

如何将每个变量的值存储在全局变量或字典中，`img = $(this).find('img');` 以便我只执行一次，而不是每次用户都执行此操作`.hover`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T03:32:52.140

首先，您可能不需要解决您要解决的问题。现代计算机的速度如此之快，以至于在对象的子对象中搜索 imgs 是一项非常快速的操作（除非可能有数千个）。因此，除非您有实际的性能数据表明这里确实存在问题，否则您可能根本不应该尝试对此进行优化。

始终在优化之前进行测量，以了解实际存在的问题以及实际需要解决的问题。然后，测量任何潜在的解决方案，看看它是否真的在做你需要的事情。

至于您提出的实际问题，有几种选择。

您可以第一次检索它，然后将其保存在全局中：

```
var i = j =0;
var imgs1, imgs2;
$(function () {
    $('.over').hover(function () {
     /*do something*/
    }, function () {
        if ( $(this).attr('element') == 'myelement1'){
            if (!imgs1) {
                imgs1 = $(this).find('img');
            }
            imgs1.attr('src', arr_1[i]);
            i++;
            if(i > arr_1.length-1) i=0;   
        }
        else if ( $(this).attr('element') == 'myelement2'){
            if (!imgs2) {
                imgs2 = $(this).find('img');
            }
            imgs2.attr('src', arr_2[j]);
            j++;
            if(j > arr_2.length-1) j=0;   
        } 

     });
}) 
```

或者，更本着 jQuery 的精神，使用`.data()`而不是全局变量：

```
var i = j =0;
$(function () {
    $('.over').hover(function () {
     /*do something*/
    }, function () {
        var imgs = $(this).data("imgList");
        if (imgs) {
            imgs = $(this).find('img');
            $(this).data("imgList", imgs);
        }
        if ( $(this).attr('element') == 'myelement1'){
            imgs.attr('src', arr_1[i]);
            i++;
            if(i > arr_1.length-1) i=0;   
        }
        else if ( $(this).attr('element') == 'myelement2'){
            imgs.attr('src', arr_2[j]);
            j++;
            if(j > arr_2.length-1) j=0;   
        } 

     });
}) 
```

# ruby - MacRuby 访问/更新文本字段

> ID：15400626
> 
> 赞同：1
> 
> 时间：2013-03-14T03:24:13.837
> 
> 标签：ruby, macruby

我对 Ruby/MacRuby 相当陌生。我遵循 MacRuby 网站上的秒表示例，并使用该示例尝试制作一个简单的应用程序，该应用程序需要 6 个小文本字段，然后在另一个更大的文本字段中显示输入。我发现了几个（虽然含糊不清且记录非常糟糕）的例子

```
class AppDelegate

    attr_accessor :window

    attr_accessor :subjectField, :messageField, :emailTo, :emailFrom, :smtpServerAddress, :smtpPort, :password

    attr_writer :subjectField, :messageField, :emailTo, :emailFrom, :smtpServerAddress, :smtpPort, :password

    def setMessageField(sender)
        @messageField += "SMTP Server Address: #{@smtpServerAddress.to_s}\n")
        @messageField += "SMTP Port: #{@smtpPort.to_s}\n")
        @messageField += "User Email: #{@emailFrom.to_s}\n")
        @messageField += "User Password: #{@password.to_s}\n")
        @messageField += "To Email: #{@emailTo.to_s}\n")
        @messageField += "Subject: #{@subjectField.to_s}\n")
    end

end 
```

显然这里有问题，但谁能给我一个正确方向的提示？我在这里看到了[这个](https://stackoverflow.com/questions/6975325/no-input-to-nstextfield-when-running-macruby)帖子，但我不太了解它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T19:11:10.903

假设连接了 IBOutlets 并且所有这些出口都是 NSTextFields，试试这个：

```
class AppDelegate
    attr_accessor :window
    attr_accessor :subjectField, :messageField, :emailTo, :emailFrom, :smtpServerAddress, :smtpPort, :password

    def setMessageField(sender)
        @messageField.stringValue += "SMTP Server Address: #{@smtpServerAddress.stringValue}\n"
        @messageField.stringValue += "SMTP Port: #{@smtpPort.stringValue}\n"
        @messageField.stringValue += "User Email: #{@emailFrom.stringValue}\n"
        @messageField.stringValue += "User Password: #{@password.stringValue}\n"
        @messageField.stringValue += "To Email: #{@emailTo.stringValue}\n"
        @messageField.stringValue += "Subject: #{@subjectField.stringValue}\n"
    end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T04:01:18.337

弄清楚发生了什么。在该`setMessageField`方法中，`+=`运算符无效。所以我不得不将其更改为以下内容。顺便说一句，我更改了方法名称。

```
attr_accessor :window
attr_accessor :subjectField, :messageField, :emailTo, :emailFrom, :smtpServerAddress, :smtpPort, :password

def setText(sender)
    @messageField.stringValue = "SMTP Server Address: #{@smtpServerAddress.stringValue}\n"
    @messageField.stringValue = "#{@messageField.stringValue}SMTP Port: #{@smtpPort.stringValue}\n"
    @messageField.stringValue = "#{@messageField.stringValue}User Email: #{@emailFrom.stringValue}\n"
    @messageField.stringValue = "#{@messageField.stringValue}User Password: #{@password.stringValue}\n"
    @messageField.stringValue = "#{@messageField.stringValue}To Email: #{@emailTo.stringValue}"
    @messageField.stringValue = "#{@messageField.stringValue}Subject: #{@subjectField.stringValue}\n"
end 
```

现在就像一个魅力。

# sql - 在 SQL Server 中查找常见的拼写错误搜索

> ID：15400629
> 
> 赞同：1
> 
> 时间：2013-03-14T03:24:29.437
> 
> 标签：sql, sql-server

有没有办法在 sql server 中找到常见的拼写错误？例如，如果我有一个合法的搜索……比如“Forclosure”而不是“Foreclosure”，有没有办法在不执行 LIKE 或 CASE WHEN 的情况下找到表中的连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:11:15.553

我不是 100% 确定它会起作用，但您可以尝试使用[SOUNDEX](http://msdn.microsoft.com/en-us/library/ms187384.aspx)功能，看看它是否能给您带来任何结果。

SOUNDEX 将字母数字字符串转换为四字符代码，该代码基于字符串在说出时的发音方式。

例如：

`SELECT SOUNDEX ('Smith'), SOUNDEX ('Smythe');`

两者都给出相同的结果

# vmware - 没有绑定关键字的 SendInput

> ID：15400632
> 
> 赞同：0
> 
> 时间：2013-03-14T03:24:39.983
> 
> 标签：vmware, autohotkey

当我切换到 VMWare Player 时，我正在尝试向它发送输入。这样就不必按下`Ctrl-g`并让 VMWare 获取我的输入。以下是我想出的脚本，但它没有做任何事情。错过了什么？

```
#IfWinActive ahk_class VMPlayerFrame
{
    SendInput, {Ctrl down}g{Ctrl up}
}                                                                               return 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:19:20.693

您可以使用#IfWinActive 更改热键或热字串，但不能创建脚本。

您需要检测窗口变化，并采取行动。

```
#SingleInstance
#installKeybdHook
#Persistent

Gui +LastFound 
hWnd := WinExist()
DllCall( "RegisterShellHookWindow", UInt,Hwnd )
MsgNum := DllCall( "RegisterWindowMessage", Str,"SHELLHOOK" )
OnMessage( MsgNum, "ShellMessage" )
Return

ShellMessage( wParam )
{
    If (wParam = 4 or wParam = 32772) ; Without VMware Player running: wParam = 4, with VMware Player running: wParam = 32772
    {        
        IfWinActive ahk_class VMPlayerFrame
        {
            SendInput, {Ctrl down}g{Ctrl up}
        }
    }
}
Return

; Hotkey {Win}+g launches Chrome
#g::Run "C:\Users\%A_Username%\AppData\Local\Google\Chrome\Application\chrome.exe"

; Hotkeys {Ctrl}+Nr gives you fractures
^2::
    Send, ½
    TrayTip, For 2 Squared,press Ctrl + Shift 2,1,1
Return

^3::
    Send, ¾
    TrayTip, For 3 Cubed,press Ctrl + Shift 3,1,1
Return

^4::Send, ¼

; HotKeys {Shift}+{Ctrl}+Nr gives you the power
+^0::Send, °
+^1::Send, ¹
+^2::Send, ² ; Shift Control 2@
+^3::Send, ³ ; Shift Control 3#

; Hotstrings mvge, mvgd or mvgf will give you my salutations in various languages.
:*:mvge::Regards,{Enter}{Enter}Robert Ilbrink
:*:mvgd::Mit freundlichen Grüßen,{Enter}{Enter}Robert Ilbrink
:*:mvgf::Salutions,{Enter}{Enter}Robert Ilbrink 
```

# bash - 列出文本文件中的所有单词以及出现次数？

> ID：15400638
> 
> 赞同：5
> 
> 时间：2013-03-14T03:25:28.153
> 
> 标签：bash, sed, awk

假设我有`text.txt`如下文件：

`she likes cats, and he likes cats too.`

我希望我的结果看起来像：

```
she 1
likes 2
cats 2
and 1
he 1
too 1 
```

如果放入`space , .`它会使脚本更容易，那很好。

是否有一个简单的 shell 管道可以实现这一点？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-14T03:28:51.830

这是我心中亲近的单线：

```
cat text.txt | sed 's|[,.]||g' | tr ' ' '\n' | sort | uniq -c 
```

sed 去除标点符号（调整正则表达式以适应口味），tr 将结果每行一个单词。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T21:00:08.950

使用 GNU awk，您只需将记录分隔符 (RS) 指定为任何非字母字符序列：

```
$ gawk -v RS='[^[:alpha:]]+' '{sum[$0]++} END{for (word in sum) print word,sum[word]}' file
she 1
likes 2
and 1
too 1
he 1
cats 2 
```

但这并不能解决您一般如何识别“单词”的问题。

# r - 如何使用ggmap获得宽屏分辨率

> ID：15400644
> 
> 赞同：4
> 
> 时间：2013-03-14T03:25:58.177
> 
> 标签：r, ggmap

我有这样的数据：

```
YEAR-STORM-DATETIME-NORTH-WEST-PRESSURE-WIND-SPEED-TRACKDATE
2011-arlene-6/28/2011 6:00-19.9-92.8-1007-30-NA-6/28/2011
2011-arlene-6/28/2011 12:00-20.3-93.1-1006-35-4-6/28/2011
2011-arlene-6/28/2011 18:00-20.7-93.5-1006-40-5-6/28/2011
so on.. 
```

我是 R 新手，我正在**ggmap 上绘制密度图**。我还使用闪亮的 R 在网站上显示它们。问题是输出都是非宽屏（平方）地图。我想要一个矩形地图，比如 Openlayers 或 KML 提供的谷歌地图。我的代码是：

```
library(ggplot2)
library(ggmap)

mydata <- read.csv("C:/R Data/Analytics/dMetrics.csv")
slice_year <- mydata[mydata$YEAR=='2009',]
map <- get_map(c(lon = -55.3632715, lat = 31.7632836), zoom = 3,
               source = 'google', maptype = c("terrain"), messaging = FALSE,
               color = 'color')

world <- ggmap(map) #extent = 'device'
world <- world + 
         stat_density2d(data = slice_year,
                        aes(x = WEST, y = NORTH, fill = ..level.., alpha = ..level..),
                        show_guide = FALSE, geom = "polygon", na.rm = TRUE) + 
         scale_fill_gradient(name = "Density", low = "maroon", high = "yellow", 
                             guide = 'colorbar')
world 
```

请指导我创建宽屏分辨率地图，可能是高分辨率。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T06:02:04.733

要将图像保存为宽屏，请将其添加到末尾：`ggsave(file="map.pdf", width=8, height=4.5)`

要打开宽屏窗口，请在调用之前添加`world`：`windows(800,450)`

**编辑**

看起来 ggmap 只是不支持非方形纵横比。

该文档声称可以将边界框传递给 location 属性，但它似乎只是忽略了它。

```
scale <- 5
ratio <- 16/9
size <- c(ratio, 1) * scale
latlongCenter <- c(0, 45)
latlongBox <- c(latlongCenter - size/2, latlongCenter + size/2)

map <- get_map(location = latlongBox)
ggmap(map) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-05T15:07:25.880

一种解决方案是制作一张更大的地图，然后裁剪不需要的部分。

但我仍在试图弄清楚如何制作一张大的高分辨率地图（我得到的地图是 1280x1280 - 这足以满足大多数需求，但不能打印大地图）。我认为没有这样的功能，或者机器人可能会占用谷歌的所有带宽。一个更简单的解决方案是获取许多方形地图并将它们组装在一起，但是您将在所有这些地图中都拥有 Google 徽标。

我认为这样做的唯一方法是制作小方形地图并切割底部，徽标和版权信息所在的位置。在最终地图的边界上再次添加他们的标志（以不同的方式切割它们）会带来更多的工作......

# mysql - 使用一张巨大的 MySQL 表？

> ID：15400654
> 
> 赞同：1
> 
> 时间：2013-03-14T03:26:55.137
> 
> 标签：mysql, sql, performance, dynamic-tables

假设我有一个包含 25,000 行左右的表：

```
item_id, item_name, item_value, etc... 
```

我的应用程序将允许用户生成动态列表，每个列表包含 2-300 个项目。

我应该将所有这些关系存储在一个带有列的巨型表中`dynamic_list_id, item_id`吗？每个动态列表最终将在此表中包含 2-300 行，并且表的大小可能会膨胀到数百万甚至数十亿。

这个表也将被非常频繁地查询，每秒检索几个这样的动态列表。 **一张大桌子是最好的选择吗？将其拆分为动态表是否有意义，可能由用户命名？**

在为这样的大量数据准备数据库时，我真的很茫然，所以任何见解都将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T03:30:28.083

它是一个关系数据库，它是为这种事情而设计的——去做吧。仅仅几百万行甚至不算“巨大”。不过，请仔细考虑索引 - 您必须平衡插入/更新性能、存储空间和查询性能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T03:33:04.147

是的，我建议您采用您提出的设计：“一个包含 dynamic_list_id、item_id 列的巨型表。”

通过索引选择、增加主轴和读/写臂的数量以及 SSD 缓存，可以根据需要轻松解决性能问题。

而且从整体上看，这个数据库看起来并不是特别大。如今，成为一个 BIG 数据库需要数十或数百 TB。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T03:37:31.567

对于如此大的表，请确保将引擎设置为 InnoDB 以获取行级锁。
确保您明智地使用索引。
如果您的查询开始拖动，请增加 Innodb_buffer_pool 的大小以进行补偿。

# c# - “/”应用程序中的服务器错误。值不能为空问题

> ID：15400662
> 
> 赞同：0
> 
> 时间：2013-03-14T03:27:59.613
> 
> 标签：c#, asp.net, iis

我无法理解我的本地机器上的这个错误可能是什么问题。它说与虚拟路径或其他东西有关，但我尝试过研究，我真的没有开始的想法，因为我仍然处于.net学习曲线的步伐

这是主要问题

> “/”应用程序中的服务器错误。值不能为空。参数名称：virtualPath 描述：当前Web请求执行过程中发生了未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.ArgumentNullException：值不能为空。参数名称：virtualPath
> 
> 源错误：
> 
> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。
> 
> 堆栈跟踪：
> 
> [ArgumentNullException：值不能为空。参数名称：virtualPath] System.Web.VirtualPath.Create(String virtualPath, VirtualPathOptions options) +8956140
> System.Web.Hosting.MapPathBasedVirtualPathProvider.CacheLookupOrInsert(String virtualPath, Boolean isFile) +31
> System.Web.Hosting.MapPathBasedVirtualPathProvider.DirectoryExists(String virtualDir) +6
> Sitecore.Pipelines.HttpRequest.FileResolver.Process(HttpRequestArgs args) +105 (Object , Object[] ) +64
> Sitecore.Pipelines.PipelineMethod.Invoke(Object[] 参数) +36
> Sitecore.Pipelines.CorePipeline.Run (PipelineArgs args) +140
> Sitecore.Pipelines.CorePipeline.Run(String pipelineName, PipelineArgs args, String pipelineDomain, Boolean failIfNotExists) +158
> Sitecore.Pipelines.CorePipeline.Run(String pipelineName, PipelineArgs args, String pipelineDomain) +64
> Sitecore.Pipelines.CorePipeline.Run(String pipelineName, PipelineArgs args) +50 Sitecore.Nexus.Web.HttpModule.(Object sender, EventArgs e) +326
> System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +148 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +75

有什么建议可以从哪里开始调查这个问题，或者这个问题的罪魁祸首是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-16T06:06:21.223

这是在批处理程序中发生在我身上的，这是因为我在没有虚拟路径的服务器上重新创建请求。我在默认网站之外的本地 IIS 中托管，所以路径是`http://localhost/MYAPP/somecontroller`. 当我在批处理处理程序中创建请求时，我试图执行`http://localhost/somecontroller`，这会产生错误。

我在服务器端运行的代码是：

```
var requestUri = new Uri(request.RequestUri, batchRequest.Url); 
```

对于本地发展，我改成了

```
var requestUri = new Uri(request.RequestUri, batchRequest.Url.Substring(1)); 
```

batchRequest.Url 将评估为 /controller/method，删除第一个斜杠会导致本地应用程序名称保留在路径中。

# string - 将字符串数据转换为二进制图像

> ID：15400663
> 
> 赞同：1
> 
> 时间：2013-03-14T03:28:10.723
> 
> 标签：string, image, qt, image-processing

我正在使用 Qt，我是 Qt 的新手。我正在从特定端口的服务器获取字符串数据流。

我收到 1 和 0。每次我收到这样的一行

```
1111110001111111111111111111100000000000011111111111 
```

在获得`n`多次后，我需要从数据中创建二进制图像文件。`1`为白色和`0`黑色。

这该怎么做？我已经实现了接收数据，但我不知道如何将此数据转换为图像。

请帮助我找到解决此问题的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:14:03.780

*   您必须知道图像的尺寸（例如`NxM`）
*   根据图像的尺寸，你必须解析你得到的字符串（思考如何编写正确的循环来`NxM`从一维数组中获取二维数组`NxM`）。
*   为了保存您的图像数据，您可以使用`QImage`类。创建`QImage`对象，传递给构造函数`height`和`width`，使用它的方法来`fill`成像。要设置像素的某些颜色，可以使用`QImage`s 方法`setPixel ( int x, int y, uint index_or_rgb )`。

就这样。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:21:32.287

来自 Qt 文档：“因为 QImage 是 QPaintDevice 的子类，所以 QPainter 可用于直接在图像上绘图。”

因此，您可以创建大小为 500x500 的 QImage

```
QImage image = QImage(500,500) 
```

然后在这张图片上画画

```
QPainter p(&image);
p.drawPoint(0,0);
p.drawPoint(0,1);
etc; 
```

另一种方法是将比特流保存到数组 char[] 中，然后简单地创建格式为 Format_Mono 或 Format_MonoLSB 的 QImage。

```
QImage image = QImage(bitData, 500, 500, Format_Mono); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T08:25:57.717

您可以尝试这样做

```
 QImage Image(500,500, QImage::Format_Indexed8);
    for(int i=0;i<500/*image_width*/;i++)
    {
        for(int j=0;j<500/*image_height*/;j++)
        {
            QRgb value;
            if(data[i*j] == 0)/*the data array should contain all the information*/
            {
                value = qRgb(0,0,0);
                Image.setPixel(i,j,qGray(value))
            }
            else
            {
               value = qRgb(255,255,255);
               Image.setPixel(i,j,qGray(value))
            }
      }
   } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T11:44:32.453

感谢我创建图像的帮助。这里我的代码

```
QImage testClass::GetImage(QString rdata, int iw, int ih)
{
    QImage *Image=new QImage(iw,ih,QImage::Format_ARGB32);
    for(int i=0;i<ih;i++)
    {
        for(int j=0;j<iw;j++)
        {
            if(rdata.at((i*iw)+j) == '0')
                Image->setPixel(QPoint(j,i),qRgb(0,0,0));
            else
               Image->setPixel(QPoint(j,i),qRgb(255,255,255));
        }
   }
    return *Image;
} 
```

# typescript - Webstorm 中的 TypeScript：字符串数组 indexOf 对象错误

> ID：15400665
> 
> 赞同：2
> 
> 时间：2013-03-14T03:28:21.410
> 
> 标签：typescript

这里有两个变量：

```
var stringA : string = "a";
var stringAr : string[] = [ "a", "b", "c" ]; 
```

如果我尝试执行以下操作，我会收到错误：

```
stringAr.indexOf(stringA); 
```

出现以下错误（'stringA'下的红线）：

`Argument type String is not assignable to parameter Object`

有谁知道我为什么会得到这个？我目前正在使用 Webstorm 6.0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T10:47:25.527

这在 Visual Studio 和[操场](http://www.typescriptlang.org/Playground/)上按预期工作：

```
var stringA : string = "a";
var stringAr : string[] = [ "a", "b", "c" ];

var idx:number = stringAr.indexOf(stringA);

console.log("Index: " + idx);  // Logs "Index: 0" 
```

您是否获得了[最新版本的 TS](http://typescript.codeplex.com/)（撰写本文时为 0.8.3），并且您确定那里没有大写字母`String`而不是`string`某处（如此[处](https://stackoverflow.com/questions/14727044/typescript-difference-between-string-and-string)所述）？

# validation - 使用 XSLT 修改 web.xml 并保持模式有效性

> ID：15400666
> 
> 赞同：0
> 
> 时间：2013-03-14T03:28:26.107
> 
> 标签：validation, xslt, xsd, web.xml

我一直在寻找一种方法来检查 Web 应用程序部署描述符 (web.xml) 中是否存在特定的“servlet-mapping”，如果未找到则添加它，同时保持 XSLT 1.0 的架构有效性，但是，我'我会睁一只眼闭一只眼地试图弄清楚它并继续兜圈子，这可能会使它变得更加困难。

根据 Java Servlet 规范，“servlet-mapping”元素必须跟在“servlet”之后（如果存在），而后者又必须跟在“listener”元素之后（如果已定义），依此类推。

那么，仅当“servlet-mapping”不存在时，如何在所有其他“servlet”元素之后添加“servlet-mapping”元素。

这是一个配对的web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  version="2.5"
  xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
  <servlet>
    <servlet-name>default</servlet-name>
    <servlet-class>org.apache.catalina.servlets.DefaultServlet</servlet-class>
    <init-param>
      <param-name>debug</param-name>
      <param-value>0</param-value>
    </init-param>
    <init-param>
      <param-name>listings</param-name>
      <param-value>false</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet>
    <servlet-name>jsp</servlet-name>
    <servlet-class>org.apache.jasper.servlet.JspServlet</servlet-class>
    <init-param>
      <param-name>fork</param-name>
      <param-value>false</param-value>
    </init-param>
    <init-param>
      <param-name>xpoweredBy</param-name>
      <param-value>false</param-value>
    </init-param>
    <load-on-startup>3</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>/</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>jsp</servlet-name>
    <url-pattern>/jsp/*</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>jsp</servlet-name>
    <url-pattern>*.jsp</url-pattern>
  </servlet-mapping>
</web-app> 
```

这是我的 XSLT，不幸的是，它会将“servlet-mapping”元素放在 web.xml 的开头，如果不存在的话：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
        xmlns:jee="http://java.sun.com/xml/ns/javaee"
        xmlns="http://java.sun.com/xml/ns/javaee">
        <xsl:output method="xml" encoding="UTF-8"/>

        <xsl:param name="version.jsp.servlet.name" select="'jsp'"/>
        <xsl:param name="version.jsp.url.pattern" select="'/jsp/*'"/>

        <xsl:template match="@*|node()">
                <xsl:copy>
                        <xsl:apply-templates select="@*|node()"/>
                </xsl:copy>
        </xsl:template>

        <xsl:template match="jee:web-app">
                <xsl:copy>
                        <xsl:apply-templates select="@*"/>

                        <xsl:if test="not(jee:servlet-mapping[jee:servlet-name=$version.jsp.servlet.name and jee:url-pattern=$version.jsp.url.pattern])">
                                <xsl:message>Adding jsp servlet-mapping</xsl:message>
                                <xsl:element name="servlet-mapping">
                                        <xsl:element name="servlet-name">
                                                <xsl:value-of select="$version.jsp.servlet.name"/>
                                        </xsl:element>
                                        <xsl:element name="url-pattern">
                                                <xsl:value-of select="$version.jsp.url.pattern"/>
                                        </xsl:element>
                                </xsl:element>
                        </xsl:if>

                        <xsl:apply-templates select="node()"/>
                </xsl:copy>
        </xsl:template>
</xsl:stylesheet> 
```

我尝试在 XPath 表达式中使用“following-sibling”，但无济于事，如下所示：

```
not(jee:servlet[position()=last()]/following-sibling::jee:servlet-mapping[jee:servlet-name=$version.jsp.servlet.name and jee:url-pattern=$version.jsp.url.pattern]) 
```

我还需要在 XML 中添加一个“过滤器”元素，然后是一个“过滤器映射”元素，但是，在这种情况下，我显然需要在所有“图标”、“显示名称”、“描述”之后添加它们， “distributable”和“context-param”元素（如果它们存在的话）。

如果前面的必需元素完全存在，我将如何构造一个 XPath 表达式来解释它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:57:07.017

我建议使用这个：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
        xmlns:jee="http://java.sun.com/xml/ns/javaee"
        xmlns="http://java.sun.com/xml/ns/javaee"
        exclude-result-prefixes="jee">
  <xsl:output method="xml" encoding="UTF-8"/>

  <xsl:param name="version.jsp.servlet.name" select="'jsp'"/>
  <xsl:param name="version.jsp.url.pattern" select="'/jsp/*'"/>

  <xsl:template match="@*|node()" name="Copy">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="jee:servlet[last()]">
    <xsl:call-template name="Copy" />

    <xsl:if test="not(../jee:servlet-mapping
                        [jee:servlet-name = $version.jsp.servlet.name and
                         jee:url-pattern = $version.jsp.url.pattern])">
      <xsl:call-template name="ServletMapping" />
    </xsl:if>
  </xsl:template>

  <xsl:template name="ServletMapping">
    <servlet-mapping>
      <servlet-name>
        <xsl:value-of select="$version.jsp.servlet.name"/>
      </servlet-name>
      <url-pattern>
        <xsl:value-of select="$version.jsp.url.pattern"/>
      </url-pattern>
    </servlet-mapping>
  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:01:19.810

如果你把你 xsl:if 放在你的应用模板之后，它应该可以工作。

但也许添加这样的模板也可能对您有所帮助：

```
<!-- It's the last servlet of the input -->
<xsl:template match="jee:servlet[not(following-sibling::jee:servlet)]">
    <!-- First do as usual and copy the servlet -->
    <xsl:next-match/>
    <!-- Then test if you need to output some specific mapping -->
    <xsl:if test="not(jee:servlet-mapping[jee:servlet-name=$version.jsp.servlet.name and jee:url-pattern=$version.jsp.url.pattern])">
    ...
    </xsl:if>
 </xsl:template> 
```

但是在您的问题中使用 position() 不能如您所愿，因为您需要“上下文中的最后一个 servlet”，而不是“仅当它是上下文中的最后一个元素时才使用 servlet”。我认为使用模板示例，您将能够解决“过滤器案例”。

如果您被 XSLT 1.0 困住，xsl:next-match 将无法工作。只需为您的通用模板命名（匹配 + 名称属性）并显式调用它而不是 xsl:next-match。

# javascript - 功能展示详情

> ID：15400672
> 
> 赞同：0
> 
> 时间：2013-03-14T03:29:34.760
> 
> 标签：javascript, jquery, html

我正在尝试将 HTML 表格数据显示为详细信息表单。但是我遇到了错误`ReferenceError: showDetails is not defined`

下面是我的 HTML 代码和 java 脚本代码：

```
<!DOCTYPE html>
<!--[if lt IE 7]>  <html class="ie ie6 lte9 lte8 lte7 no-js"> <![endif]-->
<!--[if IE 7]>     <html class="ie ie7 lte9 lte8 lte7 no-js"> <![endif]-->
<!--[if IE 8]>     <html class="ie ie8 lte9 lte8 no-js">      <![endif]-->
<!--[if IE 9]>     <html class="ie ie9 lte9 no-js">           <![endif]-->
<!--[if gt IE 9]>  <html class="no-js">                       <![endif]-->
<!--[if !IE]><!--> <html class="no-js">                       <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <title>ELITE - A Powerfull Responsive Admin Theme</title>

    <style type="text/css">
        body { font-family: Verdana; font-size: 12pt; }
        .container { width: 35%; margin: 0 auto; }
        .search_box { padding: 1.5%; font-family: Verdana; font-size: 12pt; }
    </style>

    <script src="Scripts/jquery-1.4.1.js" type="text/javascript"></script>

    <script language="javascript" type="text/javascript">
    var driverdata = null;

    function showDetails(data){
       var form = $(this).parents('form:first');

       URL = "http://localhost:8888/drivers/find/"+id;
       driverdata = data;

       var cont = data;
    //alert(JSON.stringify(cont));

        $("#id").val(''+cont.id);
        $("#firstname").val(''+cont.firstName);
        $("#lastname").val(''+cont.lastName);
        $("#licenseid").val(''+cont.licenseId);
        $("#telephone").val(''+cont.telephone);
        $("#email").val(''+cont.email);

   }

    function doSearch() {
        var searchText = document.getElementById('searchTerm').value;
        var targetTable = document.getElementById('mytable');
        var targetTableColCount;

        //Loop through table rows
        for (var rowIndex = 0; rowIndex < targetTable.rows.length; rowIndex++) {
            var rowData = '';

            //Get column count from header row
            if (rowIndex == 0) {
                targetTableColCount = targetTable.rows.item(rowIndex).cells.length;
                continue; //do not execute further code for header row.
            }

            //Process data rows. (rowIndex >= 1)
            for (var colIndex = 0; colIndex < targetTableColCount; colIndex++) {
                var cellText = '';

                if (navigator.appName == 'Microsoft Internet Explorer')
                    cellText = targetTable.rows.item(rowIndex).cells.item(colIndex).innerText;
                else
                    cellText = targetTable.rows.item(rowIndex).cells.item(colIndex).textContent;

                rowData += cellText;

            }

            //If search term is not found in row data
            //then hide the row, else show
            if (rowData.indexOf(searchText) == -1)
                targetTable.rows.item(rowIndex).style.display = 'none';
            else
                targetTable.rows.item(rowIndex).style.display = 'table-row';
        }
    }

            var ajax_load = "loading...";

        var loadUrl = "TestPage.htm #dvContainer"; //load part of page
        $(document).ready(function () {
            //editableGrid.onloadJSON("editablegrid/examples/full/datasource/demo.json");  
            $('#tooltip').delay(2000).fadeIn(1200);
            $("#load_basic").click(function () {
                $("#result").html(ajax_load).load(loadUrl, function (response, status, xhr) {
                    if (status == "error") {
                        var msg = "Sorry but there was an error: ";
                        $("#dvError").html(msg + xhr.status + " " + xhr.statusText);
                    }
                }
                );
                return false;
            });

            window.onload = fun;
            function fun(){
                $("#dvAjax").html(ajax_load);

                $.ajax({
                    type: "GET", //GET or POST or PUT or DELETE verb
                    url: "http://localhost:8888/drivers/listAll", // Location of the service
                    success: function (data) {//On Successfull service call

var txtStr = '<table class="datatable"><thead><tr> <th>id</th> <th>firstName</th> <th>lastName</th> <th>licenseId</th> <th>telephone</th> <th>email</th> </tr></thead><tbody>';

for(var i = 0; i < data.length; i++) {

     txtStr += '<tr class="gradeA"> <td><a class="edit_row" href="#tab2" onclick="showDetails(\''+data[i].id+'\');"><span>'+data[i].id+'</span></a></td> <td>'+data[i].firstName+'</td> <td>'+data[i].lastName+'</td> <td>'+data[i].licenseId+'</td> <td>'+data[i].telephone+'</td> <td>'+data[i].email+'</td> </tr>';

    //txtStr = txtStr + '<tr><td>' + json[i].id + '</td><td>' + json[i].firstName + '</td><td>' + json[i].lastName + '</td><td>' + json[i].licenseId + '</td><td>' + json[i].telephone + '</td><td>' + json[i].email + '</td><tr>';

     }

     txtStr += '</tbody></table>';
       $("#tab1").html(txtStr);

     $('.datatable').dataTable({
         'sPaginationType':'full_numbers'    
     });

     document.getElementById('somerow').innerHTML = txtStr;

                    },
                    error: ServiceFailed// When Service call fails
                });

                return false;
            };

        });

        function ServiceFailed(xhr) {
            alert(xhr.responseText);
            if (xhr.responseText) {
                var err = xhr.responseText;
                if (err)
                    error(err);
                else
                    error({ Message: "Unknown server error." })
            }
            return;
        }
    </script>
</head>
<body>
    <!-- <form id="btnAjax" --> 

    <!-- <table id="mytable" -->

    <!-- </table-->

    </form>
</body>

                           <h2>View Drivers</h2>   </br>  

                                        <div class="table" id="tab1"> 

                                            <table class="basic-table" id="mytable">
                                                <thead>

                                         <tr>              
                                        <td><label >Id</label></td>
                                        <td align="left"><input type="text" id="Id" class="medium" name="" value=""></td>
                                        </tr>

                                    <tr>
                                        <td><label>FirstName</label></td>
                                        <td align="left"><input type="text" id="firstName" class="medium" name="" value=""></td>

                   </tr>               
                   <tr>  
                                        <td><label>LastName</label></td>
                                        <td align="left"><input type="text" id="lastName" class="medium" name="" value=""></td>

                                   </tr>
                                   <tr>
                                        <td><label >licenseId</label></td>
                                        <td align="left"><input type="text" id="licenseId" class="medium" name="" value=""></td>

                                    </tr>
                                    <tr>
                                        <td><label>Telephone</label></td>
                                        <td align="left"><input type="text" id="Telephone" class="medium" name="" value=""></td>
                                    </tr>
                                    <tr>
                                        <td><label>Email</label></td>
                                        <td align="left"><input type="text" id="Email" class="large" name="" value=""></td>

                                    </tr>

                                                </thead>

                                                </table>

                                                 <label for="search"> <strong>Search Box</strong>
                        </label> <td alihn="left"><input type="text" id="searchTerm" size="20" width="20" onkeyup="doSearch()" />

                                                </div>

                                <h2>Update Drivers</h2> </div> </br> </br>

                        <div class="tab" id="tab2">
                        <form id="search" action="search" name="search" class="horizontal-form">
                            <!-- Inputs -->
                            <!-- Use class .small, .medium or .large for predefined size -->

                                    <tr>
                                        <td><label >id</label></td>
                                        <td><input type="text" id="id" class="medium" name="" value=""></td>

                                    </tr>
                                    <tr>
                                        <td><label>firstName</label></td>
                                        <td><input type="text" id="firstname" class="medium" name="" value=""></td>

                                    </tr>
                                    <tr>
                                        <td><label>lastName</label></td>
                                        <td><input type="text" id="lastname" class="medium" name="" value=""></td>

                                    </tr>
                                    <tr>
                                        <td><label >licenseId</label></td>
                                        <td><input type="text" id="licenseid" class="medium" name="" value=""></td>

                                    </tr>

                                    <tr>
                                        <td><label>telephone</label></td>
                                        <td><input type="text" id="telephone" class="medium" name="" value=""></td>
                                    </tr>
                                    <tr>
                                        <td><label>email</label></td>
                                        <td><input type="text" id="email" class="large" name="" value=""></td>

                                    </tr>

                                    <tr>
                                       <td colspan="2"><button id="submit" type="button" onClick="Submit();" />Submit</button> or <a href="#">Cancel</a></td>

                                    </tr>

                            </fieldset>
                            </form>
                            </div>

                </html> 
```

我想将 HTML 表格数据显示为详细信息表单。请帮我找出我犯了什么错误。谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T03:57:55.283

您的问题不够清楚，无法为您提供适当的解决方案。我假设这`cont`是一个全局对象，我不知道是什么`$("#detailview").click();`。您必须在这里理解的第一个重要想法是您尝试更新的元素是表单字段（输入类型）。据我所知，输入类型元素不支持`.html()`功能（如果我错了，请纠正我）。因此，如果您想为这些表单字段分配一些值，您必须使用`.attr()`or`.prop()`或`val()`。试试下面的脚本。

```
function ShowDetails(id){    
   $("#id").val(''+cont.id);
   $("#firstName").val(''+cont.firstName);
   $("#lastName").val(''+cont.lastName);
   $("#licenseId").val(''+cont.licenseId);
   $("#telephone").val(''+cont.telephone);
   $("#email").val(''+cont.email);
} 
```

但是请记住，您必须理清`cont`这里的内容，因为这里仍然`cont`很模糊。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T03:31:04.103

Javascript 区分大小写。

显示详细信息与显示详细信息？

你想要这样的东西：

```
txtStr += '<tr class="gradeA"> <td><a class="edit_row" href="#tab2" onclick="showDetails('+json[i]');"><span>'+json[i].id+'</span></a></td> <td>'+json[i].firstName+'</td> <td>'+json[i].lastName+'</td> <td>'+json[i].licenseId+'</td> <td>'+json[i].telephone+'</td> <td>'+json[i].email+'</td> </tr>';

showDetails(obj){
    var cont = obj;
    //other code
} 
```

我很确定这不会那样工作，因为 json[i] 不会像你想要的那样被附加。我不记得没有测试你是否可以那样做，但基本上这就是你想要的。`$this`或者，您可以使用事件处理程序上的方法来获取数据。无论哪种方式，我都会将这个问题的答案标记为正确并提出一个新问题，因为您现在需要解决不同问题的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T04:14:00.897

试试这个，让我知道它是否有效

```
 var ShowDetails = function(id){

        $("#id").html(''+cont.id);
        $("#firstName").html(''+cont.firstName);
        $("#lastName").html(""+cont.lastName);
        $("#licenseId").html(""+cont.licenseId);
        $("#telephone").html(""+cont.telephone);
        $("#email").html(""+cont.email);

        $("#detailview").click(); 
```

}

# c# - 具有拖放功能的 DataGridView -- 根据用户活动更新列表

> ID：15400673
> 
> 赞同：0
> 
> 时间：2013-03-14T03:29:38.893
> 
> 标签：c#, datagridview, drag-and-drop

一个业余爱好者试图完成我的第一个真正的应用程序，所以提前谢谢你，如果这是一个菜鸟问题，我们深表歉意。

我有一个启用拖放的数据网格视图，其中填充了来自团队类的数据和一个字典，它根据索引为列表中的项目分配一个值。我还没有实现绑定，因为我还没有让它与拖放行重新排序一起工作。

```
teamList = new List<Team>(){
    new Team("Redskins","WAS", "Washington"),
    new Team("Cowboys", "DAL", "Dallas"),
    new Team("Eagles", "PHI", "Philadelphia"),
    new Team("Giants", "NYG", "New York"),
    new Team("Packers", "GB", "Green Bay")
 };

class Team
{
    public string Mascot { get; private set; }
    public string Key { get; private set; }
    public string City { get; private set; }
}

Dictionary<int, int> powerValues = new Dictionary<int, int>(){
    {1, 113},
    {2, 110},
    {3, 109},
    {4, 108},
    {5, 107}
};

private void printValues()
{   // add Team to DGV wiht PowerRank as index+1 and PowerValue based on Dictionary
    int i = 0;
    foreach (Team team in TeamList)
    {                
        // add all data to a datagrid view
        dataGridView1.Rows.Add(i+1, team.Mascot,powerValues[teamList.IndexOf(team) + 1]); //set the rank
        i++;
    }
} 
```

一旦达到这一点，我将尝试做两件事：

```
1) Update List<Team> based on drag and drop change
2) Re-assign PowerRank and PowerValue based on new index of Team 
```

我尝试了几件事无济于事-有正确方向的想法或要点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:51:45.747

我已经通过一种新方法绕过了#2，但这并不是我希望如此开放以进行改进的优雅解决方案。仍在工作#2

```
 private void reEstablishRanking()
    {
        for (int i = 0; i < defaultPR.TeamList.Count; i++)
        {
            dataGridView1.Rows[i].Cells["PowerRank"].Value = (i + 1);
            dataGridView1.Rows[i].Cells["PowerValue"].Value = defaultPR.PRScores[i + 1];
        }
    } 
```

# animation - 动画和实例化表演

> ID：15400674
> 
> 赞同：2
> 
> 时间：2013-03-14T03:29:46.247
> 
> 标签：animation, directx, game-engine, skinning

谈论模型和动画的存储和加载，这对于游戏引擎来说会更好：

1 - 每个模型都有一个网格和一个骨骼，都在同一个文件中，每个骨骼系统都有 10~15 个动画。（所以每个模型都有自己的动画）

2 - 有很多网格和少量骨骼，但是文件彼此分开，并且相同的骨骼（动画也是）可以用于多个网格，每个骨骼集可以有很多动画。（请注意，在这种情况下，使用相同的骨骼集和相同的动画会导致唯一性丢失）。

现在，如果我需要在每帧中显示 120~150 个模型（由 GPU 动画和蒙皮），其中 40 个是相同类型的，更好：

1 - 为游戏中的所有模型使用实例化系统，即使每种类型只需要一个模型。

2 - 检测需要实例化的模型（如果它们重复多次）并使用不同的渲染系统（其他着色器程序），对其他模型使用非实例化。

3 - 不要使用实例化，因为对于这个数量的模型，“增益”会非常低。

这里谈到的所有“模型”都是动画模型，目前我使用带有 GPU 蒙皮但没有实例化的 MD5 文件，我会知道是否有更好的方法来完成所有动画过程。

如果有人知道一个好的教程或者可以让我上路...我不知道如何创建一个插值骨架并使用实例化，让我解释一下..：

我可以压缩一个简单纹理中所有帧的所有动画的所有骨骼变换（矩阵）并将其发送到顶点着色器，然后为每个模型的每个顶点读取相应的动画/帧变换。没关系，我可以在这里使用实例化，因为我总是会为相同的模型类型发送相同的数据，但是，当我需要使用插值骨架时，我是否也应该在顶点着色器上进行插值？（来自纹理的更多负载可能会导致一些性能损失）。无论如何，我也需要计算 CPU 上的插值骨架，因为我需要它来进行碰撞...

任何解决方案/想法？

*   我使用的是directX，但我认为这适用于其他系统

* * *

=> 现在我只需要第一个问题的答案，**第二个**问题就**解决**了（但如果有人想提出任何其他建议也可以）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T04:58:18.080

我能想到的最好的例子，我个人使用过的一个例子是 NVidia 的一个叫做 Skinned Instancing。该示例描述了一种渲染同一骨骼网格的多个实例的方法。也有代码和白皮书 :)

[NVidia 的皮肤实例化](http://developer.download.nvidia.com/SDK/10.5/direct3d/samples.html)

# javascript - Angular $routeParams 返回空对象

> ID：15400676
> 
> 赞同：8
> 
> 时间：2013-03-14T03:30:00.820
> 
> 标签：javascript, angularjs

我在一个我无法看透的问题上被困了大约一天。

我在 users.js.coffee 文件中有以下代码：

```
app = angular.module("app", ["ngResource"])
app.config ['$routeProvider', '$locationProvider', ($routeProvider, $locationProvider) ->
  $locationProvider.html5Mode(true)
  $routeProvider.when('/users/:id', {templateUrl: '/users/:id.json', controller: UserCtrl})
  $routeProvider.when('/users/:id/videos', {templateUrl: '/users/:id/videos.json', controller: UserCtrl})
]

app.factory "User", ["$resource", ($resource) ->
  $resource("/users/:id", {id: "@id"}, {
    show: {method: "GET"}, 
    videos: {method: "GET", isArray:true}
    })
]

@UserCtrl = ["$scope", "$location", "$route", "http", "$routeParams", "User", ($scope, $location, $route, $http, $routeParams, User) ->
  console.log($location)//LocationUrl {$$parse: function, $$compose: function, $$rewriteAppUrl: function, $$protocol: "http", $$host: "localhost"…}

  console.log($route)//Object {routes: Object, reload: function}
  console.log($routeParams)//Object {} 

] 
```

为什么 $routeParams 会是一个空对象？如果我在视图中调用 $route.current.params，它会显示适当的参数。但不在控制器中。更重要的是，我不能在控制器中调用 $route.current.params，因为“当前”还没有定义。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-28T20:10:03.563

我有同样的问题。如果没有**ng-view** ，路由将不起作用。刚刚有一个**ng-view**你会得到你的 $routeParams。

问候

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-12T00:07:47.787

如果您使用路由到 ng-view 控制器的外部控制器（如顶栏或页面控制器），您需要订阅“$routeChangeSuccess”发出消息。

如果您不是接收控制器，则路由更改成功是异步的。这个 SO 答案给出了更完整的答案： [$routeParams is empty in main controller](https://stackoverflow.com/questions/17519937/routeparams-is-empty-in-main-controller)

但这是 tldr；

```
$scope.$on('$routeChangeSuccess', function() {
  // $routeParams should be populated here
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-28T01:02:39.617

It looks like $routeParams is not available at controller initialization time to controllers outside of those routed via $routeProvider / ng-view. (At least in angular 1.0.8)

If you want to access the route parameters in those outer controllers you can use `$location.search().<param_name>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-03T02:56:27.853

您的路线指向您的 api 路线。它们应该是要渲染的模板的路径：

```
@App = angular.module('app',['ngResource'])
  .config(['$routeProvider'], ($routeProvider) ->
    $routeProvider
      .when('/users',
        templateUrl: 'users/index.html',
        controller: 'UsersIndexCtrl')
      .when('/users/:id',
        templateUrl: 'users/show.html',
        controller: 'UsersShowCtrl')
      .otherwise(
        redirectTo: '/users'
    )]) 
```

然后，比如说，您的用户索引控制器可能看起来像：

```
App.controller 'UsersIndexCtrl',['$scope','$location','User', ($scope, $location, User) ->

  $scope.users = User.query()

  $scope.onClickHandlerToRoute = (user)->
    $location.path "path/to/show/user/#{user.id}" 
```

您不需要注入 $http，因为您已经在使用 ngResource REST 抽象。

# certificate - iTextPdf PKCS#11 使用 SafeNet USB 令牌 (ikey 4000) 进行 PDF 签名

> ID：15400677
> 
> 赞同：0
> 
> 时间：2013-03-14T03:30:02.147
> 
> 标签：certificate, itext

我目前正在使用最新版本的 iText 并使用 Bruno Lowagie 的数字签名白皮书中的示例。

当我签署 PDF 并在 Adob​​e Reader 中查看它时，不会显示证书链并且无法验证签署者。我需要做什么才能在签名中包含证书链，以便 Adob​​e 自动验证签名？

该证书来自 Entrust..，它是 Adob​​e AATL 计划的成员。因此，我希望无需更改 Adob​​e 阅读器中的信任设置即可自动验证签名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T12:30:09.000

iText 软件不添加中间证书，因此信任链中断。Entrust是aatl的成员，但只卖cds证书

# c# - C#：从 String 转换为 DateTime 时出现未处理的异常

> ID：15400678
> 
> 赞同：-3
> 
> 时间：2013-03-14T03:30:08.160
> 
> 标签：c#, .net, datetime, exception-handling

我正在尝试编写一个简单的 GUI 应用程序，当单击检索按钮时，它将从 Customer 类加载客户数据。然后，当单击保存按钮时，此数据将存储在 Customer 对象中。

我通过测试发现我的清除和检索按钮按预期工作，但是当我按下保存按钮时收到以下错误消息：

> 您的应用程序中发生了未处理的异常。如果单击继续，应用程序将忽略此错误并尝试继续。如果单击退出，应用程序将立即关闭。
> 
> 该字符串未被识别为有效的日期时间。从索引 4 开始有一个未知单词。

我在下面粘贴了我的代码。我将不胜感激您能提供的任何澄清。先感谢您！

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace simple_GUI
{

    public partial class Form1 : Form
    {

        Customer myCustomer = new Customer(); //Declare an instance of the customer class within my Windows form

        public Form1()
        {
            InitializeComponent();
        }

        private void saveButton_Click(object sender, EventArgs e)
        {
            myCustomer.Id = Convert.ToInt32(customerIDTextBox.Text); //How to handle exceptions within my conversions?
            myCustomer.Name = fullNameTextBox.Text;
            myCustomer.Address = addressTextBox.Text;
            myCustomer.Email = emailTextBox.Text;
            myCustomer.Phone = Convert.ToDouble(phoneNumberTextBox.Text);
            myCustomer.AddDate = Convert.ToDateTime(addressTextBox.Text);
            myCustomer.TotalTransactions = Convert.ToInt32(totalTransactionsTextBox.Text);

        }

        private void retrieveButton_Click(object sender, EventArgs e)
        {
            customerIDTextBox.Text = Convert.ToString(myCustomer.Id); 
            fullNameTextBox.Text = myCustomer.Name;
            addressTextBox.Text = myCustomer.Address;
            emailTextBox.Text = myCustomer.Email;
            phoneNumberTextBox.Text = Convert.ToString(myCustomer.Phone);
            addDateTextBox.Text = Convert.ToString(myCustomer.AddDate);
            totalTransactionsTextBox.Text = Convert.ToString(myCustomer.TotalTransactions);

        }

        private void clearButton_Click(object sender, EventArgs e)
        {
            customerIDTextBox.Text = "";
            fullNameTextBox.Text = "";
            addressTextBox.Text = "";
            emailTextBox.Text = "";
            phoneNumberTextBox.Text = "";
            addDateTextBox.Text = "";
            totalTransactionsTextBox.Text = Convert.ToString(""); 

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T03:38:12.680

如果它不起作用，你可以尝试一个演员并做一些事情吗？

```
private bool ValidInteger(string value)
{
    int notUsed=0;
    return Int32.TryParse(value, out notUsed);
} 
```

我删除了 function 关键字。代码现在编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T03:36:01.753

您可以通过添加一些代码来验证输入，以 AddDate 为例：

```
try{
   myCustomer.AddDate = Convert.ToDateTime(addressTextBox.Text);
}
catch
{
   MessageBox.Show("Add Date is not valid");
   return;
} 
```

如果可能，请使用 DatePicker 控件输入日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T03:37:21.783

您可以在直接设置值转换之前检查是否可以转换，使用`TryParse()`类型的方法，您可以进行正确的转换，尝试这样的事情

```
private void saveButton_Click(object sender, EventArgs e)
{
    // check if the Id is a integer
    int convertedId;
    if (!int.TryParse(customerIDTextBox.Text, out convertedId))
    {
        MessageBox.Show("The ID is not a integer value");
        return;
    }

    myCustomer.Id = convertedId;
    myCustomer.Name = fullNameTextBox.Text;
    myCustomer.Address = addressTextBox.Text;
    myCustomer.Email = emailTextBox.Text;
    myCustomer.Phone = phoneNumberTextBox.Text;

    // check if the DateTime is a valid dateTeime
    DateTime convertedDate;
    if (!DateTime.TryParseExact(addressTextBox.Text,"MM/dd/yyyy", null, System.Globalization.DateTimeStyles.AssumeLocal, out convertedDate))
    {
        MessageBox.Show("The filed is not a valid date");
        return;
    }

    myCustomer.AddDate = convertedDate;

    myCustomer.TotalTransactions = Convert.ToInt32(totalTransactionsTextBox.Text);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T07:02:33.907

我建议您在文本框上使用正确的命名。您的代码显示，当您保存日期时，您使用的是 addressTextBox.Text：

```
myCustomer.AddDate = Convert.ToDateTime(addressTextBox.Text); 
```

我认为应该是这样的：

```
myCustomer.AddDate = DateTime.Parse(dateTextBox.Text,"MM/dd/yyyy"); 
```

当用户选择日期时，最好使用 DateTimePicker 控件而不是 TextBox。希望这可以帮助！

# python - 将简单代码解释为python代码

> ID：15400687
> 
> 赞同：1
> 
> 时间：2013-03-14T03:31:06.030
> 
> 标签：python, pyqt

我用 QT python 构建了很多非常基本的 QT 重复程序，然后用 py2exe 编译它们。这些被我在控制器的同事用于另一个程序。我想知道如何构建一个 python 解释器，它将简单的命令转换为实际的 python 代码，类似于 Processing 将简化代码转换为 java 的方式。

例如，“简单代码”文件可能是：

```
slider('Distance', 'dist', 50, 100, 'int')
button('Apply Changes', 'apply') 
```

然后我将使用以下类型将其解释为 pyQT 程序形式：

```
slider(label, name, min, max, type)
button(label, name) 
```

这些都将被写入新的 python 文件，运行时会生成适当的表单。我坚持的部分是如何将“简单代码”解释为python代码。

提前致谢

* * *

**解决方案#1**

下面的代码使用 SPEN-zar 的正则表达式和拆分思想来识别小部件类型，然后解析输入以生成必要的输出。显然，这将被扩展以生成真正的 pyQT 文件，但这是基本逻辑的基本演示。

感谢您的帮助。

```
import re

input = ["slider('Distance', 'dist', 50, 100, 'int')", "button('Apply Changes', 'apply')"]

pattern = r"([a-z]+)\s*\((.*)\)"
rexp = re.compile(pattern)

for line in input:
    content = rexp.findall(line)
    if content[0][0] == 'slider':
        params = content[0][1].split(',')
        name = params[0]
        label = params[1]
        minimum = float(params[2])
        maximum = float(params[3])
        print 'Slider Type: name-%s, label-%s, min-%f, max-%f' % (name, label, minimum, maximum)
    elif content[0][0] == 'button':
        params = content[0][1].split(',')
        name = params[0]
        label = params[1]
        print 'Button Type: name-%s, label-%s' % (name, label)
    else:
        print 'This widget type is not recognized' 
```

* * *

**解决方案#2**

在对搅拌机的建议进行了进一步研究之后，我修改了下面的代码，它使用一个类来定义一个按钮。然后可以根据需要轻松地将此类多次添加到表单中。通过为所有需要的类型构建类，很容易生成表单以及维护和添加到库中。

```
from PyQt4 import QtGui, QtCore
import sys

class Main(QtGui.QMainWindow):
    def __init__(self, parent = None):
        super(Main, self).__init__(parent)

        # main button
        self.addButton = QtGui.QPushButton('button to add other widgets')
        self.addButton.clicked.connect(self.addWidget)

        # scroll area widget contents - layout
        self.scrollLayout = QtGui.QFormLayout()

        # scroll area widget contents
        self.scrollWidget = QtGui.QWidget()
        self.scrollWidget.setLayout(self.scrollLayout)

        # scroll area
        self.scrollArea = QtGui.QScrollArea()
        self.scrollArea.setWidgetResizable(True)
        self.scrollArea.setWidget(self.scrollWidget)

        # main layout
        self.mainLayout = QtGui.QVBoxLayout()

        # add all main to the main vLayout
        self.mainLayout.addWidget(self.addButton)
        self.mainLayout.addWidget(self.scrollArea)

        # central widget
        self.centralWidget = QtGui.QWidget()
        self.centralWidget.setLayout(self.mainLayout)

        # set central widget
        self.setCentralWidget(self.centralWidget)

    def addButton(self):
        self.scrollLayout.addRow(Test())

class Test(QtGui.QWidget):
  def __init__( self, parent=None):
      super(Test, self).__init__(parent)

      self.pushButton = QtGui.QPushButton('I am in Test widget')
      self.pushButton.clicked.connect(self.testPush)

      layout = QtGui.QHBoxLayout()
      layout.addWidget(self.pushButton)
      self.setLayout(layout)

  def testPush(self):
      print "The test button was pushed!"

app = QtGui.QApplication(sys.argv)
myWidget = Main()
for i in xrange(5):
    myWidget.addButton()
myWidget.show()
app.exec_() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T03:39:01.597

您是否尝试过将其解析为 .ui 格式？那就是 XML，它非常简单。

无论您喜欢哪种输出格式，都可以尝试 PLY 进行词法分析和解析。否则，只需使用正则表达式搜索带有“（”“）”的子字符串并使用它`.split(',')`来获取参数。这是我的看法。

# php - 删除文件目录会减慢整个网络服务器的速度

> ID：15400693
> 
> 赞同：2
> 
> 时间：2013-03-14T03:31:20.763
> 
> 标签：php, linux, ubuntu, nginx, ext4

我有一个目录，`/var/www/media`其中的子目录包含一天的许多图像。每天晚上使用删除这些子目录之一`rm -rf /var/www/media/1234`。服务器在 Ubuntu 12.04 上使用带有日志的 ext4 文件系统运行 Nginx/PHP。

**问题：**在执行删除操作时，整个 Web 服务器都会慢下来。和`iotop`显示 99% 的 IO 利用率。我相信正在我们正在删除文件的文件系统上使用 ext4 日志记录。`jbd2/md3-8``md4_raid1``jdb2``/dev/md4``/var/www/media`

![在此处输入图像描述](../Images/977c76f7fc27951a655173cd71bb1939.png) ![在此处输入图像描述](../Images/2430e5bbf6b272b781a71dff42676efe.png)

让删除操作使服务器停止运行是不可接受的。我在这里有什么选择？

我们是否必须设置 ext4 日志来`data=writeback`加快速度并避免破坏我的服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T03:41:12.360

检查手册页`ionice`，它是用于调整这类事情的。但这很繁琐，因为性能工作总是如此。纯磁盘 I/O 正在杀死您的服务器这一事实立即表明您的服务是受磁盘限制的，这不是一个令人愉快的地方（存储比 CPU 更难扩展！）。最好的选择可能是为您的盒子添加 RAM，但显然我们不能说没有细节。

# tfs - 如何从 TFS 源代码管理中删除/删除已删除的项目

> ID：15400696
> 
> 赞同：6
> 
> 时间：2013-03-14T03:31:26.887
> 
> 标签：tfs

我正在使用 TFS 2012（免费预览版）。

我的解决方案中有一堆项目在源代码控制下。

有时，我发现放弃整个项目并重新开始是解决问题的最简单方法。但是，每次我这样做时都会遇到麻烦，因为“已删除”项目以“已删除”状态（显示/隐藏已删除项目按钮）留在源代码管理资源管理器中，并且充其量是垃圾，最坏的情况是线索, 以后发生冲突。

我怎样才能删除它们的所有痕迹？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T03:35:14.080

您可以使用[tf destroy](http://msdn.microsoft.com/en-us/library/bb386005%28v=vs.100%29.aspx)命令。这是不可恢复的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T03:34:54.447

[TFSDeleteProject](http://msdn.microsoft.com/en-us/library/ms181482.aspx)永久销毁团队项目，之后无法恢复。

```
TFSDeleteproject [/q] [/force] [/excludewss] /collection:URL TeamProjectName 
```

# javascript - 表单提交连接到js事件不起作用

> ID：15400697
> 
> 赞同：0
> 
> 时间：2013-03-14T03:31:38.230
> 
> 标签：javascript, html

我有以下代码：

```
 <form action="" id="search-form">
    <fieldset>
      <div class="rowElem">
        <input type="text">
        <a href="#" onClick="document.getElementById('search-form').submit()">
        <div>Search</div>
        </a></div>
    </fieldset>
  </form>

<script>
$(document).ready(function() {
$('#search-form').submit(function(event){
    event.preventDefault();
    alert("test");

});
});
</script> 
```

当我提交表单时，我没有看到警报……我错过了什么？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T03:35:18.837

您需要删除突兀的 onclick 事件并改为绑定到链接。

提交后您无法提醒，因为这将执行您对表单执行的任何操作（很可能会将您从页面上移开。如果您坚持这样做，以下将起作用。

```
<form action="" id="search-form">
    <fieldset>
        <div class="rowElem">
            <input id="name" type="text"></input>
            <a href="#" id="search" >Search</a>
        </div>
    </fieldset>
</form>       

<script>
    $(document).ready(function() {
        $('#search').bind('click', function () {
            // Alert the name BEFORE you do the form post
            alert($('#name).val());
            $('#search-form').submit(function(event){

            });
        });
    });
</script> 
```

我在这里有一个有效的 JSFiddle 示例：http: [//jsfiddle.net/7jqUF/5/](http://jsfiddle.net/7jqUF/5/)

相反，如果您想要一个 AJAX 解决方案，那么您会想要做一些不同于表单帖子的事情，例如 ajax 帖子

```
<script>
    $(document).ready(function() {
        $('#search').bind('click', function () {
            // Alert the name BEFORE you do the form post
            alert($('#name).val());
            $.post('/ServerUrl/method', { name: $('#name').val() });
        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T03:39:58.250

你为什么不做类似的事情

```
<form action="" id="search-form">
    <fieldset>
      <div class="rowElem">
          <input name="query" type="text" /><br />
          <a class="search" href="#">Search</a>
      </div>
    </fieldset>
</form> 
```

和

```
var form = $('#search-form');
$('.search', form).click(function(event){
    event.preventDefault();

    var query = $('input[name="query"]', form).val();

    alert("test: " + query);

}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/qcN6r/6/)

如果您想将参数用作 ajax 请求的一部分，您可以执行类似的操作

```
var form = $('#search-form');
$('.search', form).click(function(event){
    event.preventDefault();

    var params = form.serialize();

    alert("test: " + form.serialize());

$.ajax({
    url: '...',
    data: params,
    ....
})   

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T03:38:51.753

请尝试以下代码。从`$(document).ready`函数中删除提交代码后

```
 <a href="#" onclick="document.getElementById('search-form').submit();"> 
```

# php - 最近的采访 Q - 为多个用户操作页面上的对象？

> ID：15400700
> 
> 赞同：1
> 
> 时间：2013-03-14T03:31:50.740
> 
> 标签：php, jquery, html, mysql

如果这不合适，我很抱歉，但我想就最近在电话采访中被问到的一个问题获得一些反馈。我擅长前端开发，但对后端编程不是很清楚，这是我正在努力解决的问题。

挂断电话后，我有一点*l'esprit de l'escalier*，我想...

> 场景如下：您有一个简单的页面，其中用户正在展示随机图像并允许在页面中移动它，同时用户可以看到同一页面的其他用户也在移动他们自己的随机图像，但不允许任何人与任何其他用户的图像进行交互。

因此，假设**LAMP**堆栈正在运行，并且**jQuery / JavaScript**用于您的前端，请描述您将如何实现它并防止这些用户控制对象。假设用户足够精明，可以在 firebug 中观看帖子调用。

我能够描述一个简单的界面和控件。我能够描述进出数据库的流坐标。

我努力想出一种保护通话时检索到的信息的好方法。

在我挂断电话后不久，我想到了一种简单的方法，通过不公开调用它们的数据库中对象的实际 ID 来防止其他人获得对这些数据的控制权。但我仍然不确定如何准确地做到这一点。我想象使用**php**引擎来抽象变量调用，在每个用户无法交互的对象上使用随机 ID。

这不是我在使用**php / MySQL**时曾经考虑过的事情，但我当然认为我可能应该这样做，即使在击败开源**CMS**或提交其他东西时也是如此。

所以，我的问题是，是否有人可以描述他们自己对此的想法或指向我的资源来帮助我理解这一点，以及我将如何使用**AJAX / PHP**来完成这项工作？我在正确的轨道上吗？

我还没有听说我是否得到了这份工作，但虽然它似乎主要是前端角色，但我认为他们希望对 LAMP 更加熟悉，而不是我能够展示的。

提前感谢您提供的任何帮助。是的，我会自己跟进这件事，而且我已经制定了一些计划来更深入地研究**php**和**MySQL**，以供我自己启迪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T10:48:29.730

我自己只是把它当作一个挑战，尝试新技术，我发现这是一件非常有趣的小事。我采用的方法是在**node.js**中使用**mongodb**作为存储。

使用**socket.io**，操作设置得非常快。至于保护对象免受外部影响，我依赖于会话 ID，我将其链接到对象 ID。这样，您可以安全地公开对象的 ID，而不会受到损害。

请注意，操作仅限于跟随同一页面上的其他光标。

[http://gist.github.com/ThomasHambach/5168951](http://gist.github.com/ThomasHambach/5168951)

# jquery - 动画后jQuery ajax加载的html没有正确的css样式

> ID：15400706
> 
> 赞同：0
> 
> 时间：2013-03-14T03:32:26.833
> 
> 标签：jquery, css, ajax, jquery-animate

我正在使用 jQuery ajax 从 .html 文件加载 html。该 html 文件包含一个宽度均为 200 像素的双列表表单。当我使用 $.ajax 将 html 内容加载到 div 中时，谷歌浏览器无法显示正确的 css 样式，这两个列的宽度都应为 200px。Firefox 和 IE10 在表格动画到 div 之前正确执行正确的 css，由于 td 较小，第一列中的单词现在是一行而不是两行或更多。但是，当我单击表格内的任一标签时，表格在 Chrome 中正确调整大小。

```
function test(){
$.ajax({
    url: "XXX.html",
    success: function(data){
        $("#main").css("position", "absolute");
        $("#main").css("left","200%");
        $("#main").html(data);
        $("#main").animate({left:"5%"},1000);
    }

})
} 
```

在完成像 Firefox 和 IE10 这样的动画之前，Chorme 是否可以正确调整大小？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T04:03:58.787

```
 function test(){
        $.ajax ({
   url: "XXX.html",
  success: function(data){
        $("#main").html(function(i,data){
        $("#main").css({'position':'absolute', 'left':'200px'});
        return data;});
$("#main").animate({left:"5%"},1000);
}
 });
  } 
```

这应该工作或出现可怕的错误。我刚学Jquery！有点。我还将 200 更改为 px，因为这就是您在问题中提到的内容。我现在要设置一个 wway 来测试它，但如果你先得到它，祝你好运！

# c++ - C++构造函数、析构函数、类型转换错误

> ID：15400709
> 
> 赞同：0
> 
> 时间：2013-03-14T03:32:45.800
> 
> 标签：c++, constructor, type-conversion, destructor

嘿伙计们，我正在尝试为模块创建一个实现文件。它有一个我创建的头文件和一个 .CC 文件。在我的 .CC 文件中，我最初有一个 main 函数，但是由于这是一个类的分配，它要求实现中没有 main 函数。

```
 9 #include <curses.h>
 10 #include <sys/time.h>
 11 #include <time.h>
 12 #include "fmttime.h"
 13
 14
 15 struct ExpandedTime
 16 {
 17
 18     int et_usec;
 19     int et_sec;
 20     int et_min;
 21     int et_hour;
 22
 23 };
 24 ExpandedTime* localTime(struct timeval* tv, ExpandedTime* etime);
 25
 26
 27 struct timeval tv;
 28 struct ExpandedTime etime;
 29 gettimeofday(&tv, NULL);
 30 localTime(&tv,&etime);
 31
 32
 33
 34 ExpandedTime* localTime(struct timeval* tv, ExpandedTime* etime)
 35 {
 36     tzset();                                    // Corrects timezone
 37
 38     int epochT = (tv->tv_sec) - timezone;       // Epoch seconds with
 39     int epochUT = tv->tv_usec;                  // Timezone correction
 40
 41     int seconds = epochT % 60;
 42     epochT /= 60;
 43     etime->et_sec = seconds;
 44     etime->et_usec = epochUT;
 45
 46     int minutes = epochT % 60;
 47     epochT /= 60;
 48     etime->et_min = minutes;
 49
 50     int hours = (epochT % 24) + daylight;       // Hours with DST correction 
```

抱歉，最后几行被截断了，在腻子中复制和粘贴 Mcedit 很糟糕。无论如何，第 29 行和第 30 行给了我一个构造函数、析构函数或类型转换错误，我不知道为什么。当我有一个包含这些语句的 main 函数时，一切都很好而且很花哨……但是当我删除 Main 时……它就崩溃了。任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T03:34:27.027

```
27 struct timeval tv;
28 struct ExpandedTime etime;
29 gettimeofday(&tv, NULL);
30 localTime(&tv,&etime); 
```

此代码不在任何函数内。它赤裸裸地坐在全球范围的荒野中。它需要显示回家，回到函数内部，任何函数。外面有狼。

# android - for-loop 查询数据库中的所有行。但结果只显示最后一行

> ID：15400717
> 
> 赞同：0
> 
> 时间：2013-03-14T03:33:08.737
> 
> 标签：android, database, for-loop, arraylist, row

我在数据库中有 4 行纬度，我想获取它的所有行。在`CafeDataSource`我查询它并将其设置为`ArrayList<HashMap<String, Object>>`. 当我`TopActivity`在`for`循环中使用它时，我可以查询所有 4 行。但所有 4 行只有最后一行的一个值。例如，我的数据库 (1,2,3,4) 但我的结果 (4,4,4,4)。

我有 log(db)`getArrCursor()`的价值，它工作正常。

我在循环中有 log(number) 以`for`获取值，但它显示我全部都是最后一行。

如何查询所有内容和不同的行？

CafeDataSource

```
public ArrayList<HashMap<String, Object>> getArrCursor(){
    arrCursor = new ArrayList<HashMap<String,Object>>();
    HashMap<String, Object> map;
    Cursor cursor = database.rawQuery("SELECT * FROM "+CafeDbOpenHelper.TABLE_CAFE, null);

    if(cursor != null){
        while(cursor.moveToNext()){
            map = new HashMap<String, Object>();
            map.put(CafeDbOpenHelper.CAFE_TITLE, cursor.getString(cursor.getColumnIndex(CafeDbOpenHelper.CAFE_TITLE)));
            map.put(CafeDbOpenHelper.CAFE_THUMB, cursor.getString(cursor.getColumnIndex(CafeDbOpenHelper.CAFE_THUMB)));
            map.put(CafeDbOpenHelper.CAFE_LATITUDE, cursor.getDouble(cursor.getColumnIndex(CafeDbOpenHelper.CAFE_LATITUDE)));
            map.put(CafeDbOpenHelper.CAFE_LONGITUDE, cursor.getDouble(cursor.getColumnIndex(CafeDbOpenHelper.CAFE_LONGITUDE)));
            Log.i("db", "" +cursor.getDouble(cursor.getColumnIndex(CafeDbOpenHelper.CAFE_LATITUDE)));
            arrCursor.add(map);
        }
    }
    return arrCursor;
} 
```

热门活动

```
int position = arrCursor.size();
for (int i = 0; i < position; i++) {
    Log.i("number", "" +arrCursor.get(position -1).get(CafeDbOpenHelper.CAFE_LATITUDE));    
    double lat = (Double) arrCursor.get(position -1).get(CafeDbOpenHelper.CAFE_LATITUDE);
    double lng = (Double) arrCursor.get(position -1).get(CafeDbOpenHelper.CAFE_LONGITUDE);
    LatLng latlong = new LatLng(lat, lng);
    map = ((MapFragment) getFragmentManager().findFragmentById(R.id.map)).getMap();
    Marker maker = map.addMarker(new MarkerOptions().position(latlong).title((String) arrCursor.get(position -1).get(CafeDbOpenHelper.CAFE_TITLE)));

    // Move the camera instantly to hamburg with a zoom of 15.
    map.moveCamera(CameraUpdateFactory.newLatLngZoom(latlong, 17));

    LinearLayout includeMap = (LinearLayout) findViewById(R.id.lin_map);
    includeMap.setVisibility(v.VISIBLE);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T03:44:15.033

`Position``Array`永远不会改变，但您每次都在使用它来获取。试试吧

```
double lat = (Double) arrCursor.get(i).get(CafeDbOpenHelper.CAFE_LATITUDE);
double lng = (Double) arrCursor.get(i).get(CafeDbOpenHelper.CAFE_LONGITUDE); 
```

**编辑**

你有没有改变这条线

```
Marker maker = map.addMarker(new MarkerOptions().position(latlong).title((String) arrCursor.get(position -1).get(CafeDbOpenHelper.CAFE_TITLE))); 
```

到

```
 Marker maker = map.addMarker(new MarkerOptions().position(latlong).title((String)                
    arrCursor.get(i).get(CafeDbOpenHelper.CAFE_TITLE))); 
```

你从你的`i`位置开始，`Array`所以每次你想访问那个位置时，你都会使用`i`

# android - setBackgroundDrawable 无法正常工作

> ID：15400720
> 
> 赞同：3
> 
> 时间：2013-03-14T03:33:53.447
> 
> 标签：android, android-actionbar, actionbarsherlock, android-drawable, xml-drawable

在我的应用程序中，我使用的是 actionbarsherlock。我用

`getSupportActionBar().setBackgroundDrwable(R.drawable.test).`

它工作正常，颜色按预期显示，但是当我去另一个活动并回到主要活动时。条形颜色更改为黑色（在我的程序中，我没有为 backgrounddrawble 设置黑色，只是调用`setSupportAction().setBackgroundDrawable`）`onStart()`。但是，如果我将代码更改为

`getSupportActionBar().setBackgroundDrawable(new ColorDrawable(0xff550000)));`

该应用程序运行良好。当我单击后退按钮时，颜色设置为预期的 0xff55000。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T03:44:03.150

当您尝试以编程方式设置颜色时，我建议不要以这种方式直接使用颜色代码。它不会接受它。试试这种方式..

```
getSupportActionBar().setBackgroundDrawable(new ColorDrawable(mContext.getResources().getColor(Color.BLACK))); 
```

希望它对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T08:47:52.070

它也不适合我，特别是如果我与导航抽屉切换列表一起使用。在我的情况下，如果我不使用切换，背景会在一秒钟内变为白色，然后加载背景可绘制对象。如果我使用切换，背景保持白色。

我必须使用自定义视图来实现我想要的效果，而不是更改背景。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-26T11:24:09.040

我有几乎相同的问题，碰巧调用 getActionBar().setBackgroundDrawable 两次不起作用。如果我只在 onCreate 中调用它一次就可以了。如果我将代码放在 onResume 中，它适用于第一个 onResume，但对于任何其他 onResume，它都设置为灰色

# android - 如何用 WebView 处理电话？

> ID：15400727
> 
> 赞同：0
> 
> 时间：2013-03-14T03:34:44.143
> 
> 标签：android, android-webview

我可以显示拨号器，但电话号码不显示。我哪里错了？

这是我的代码。

```
if (url.startsWith("tel:")) { 

                    Intent intent = new Intent(Intent.ACTION_DIAL);

                    startActivity(intent); 
                } 
```

所以我的问题又出在号码上，号码没有出现在拨号器上。所以我的真正问题是，你如何抓住这个数字？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T04:15:26.200

它只需要采用这种格式**Intent (String action, Uri uri)**

```
if (url.startsWith("tel:")) { 

Intent intent = new Intent(Intent.ACTION_DIAL,Uri.parse(url));

startActivity(intent); 
                        } 
```

# c# - 串行消息分离

> ID：15400733
> 
> 赞同：0
> 
> 时间：2013-03-14T03:35:23.410
> 
> 标签：c#, synchronization, serial-port, communication, microcontroller

我正在尝试在微控制器和 ac# windows 应用程序之间实现串行通信。

我在计算机到微控制器的方向上一切正常。但是我很难弄清楚如何在另一个方向上实现通信。

我的消息由 4 个字节组成

*   B0 – 正在发送的值的地址/名称
*   B1 – 高字节
*   B2 – 低字节
*   B3 – 校验和 = 字节 0-2 相加

为了确保接收到完整的消息，如果字节之间的时间超过 20 毫秒，我让微控制器放弃正在接收的当前消息，这似乎运行良好，并且可以容忍可能导致同步丢失的通信故障。

如果完全从 ac# 应用程序中，我不确定如何实现此延迟，因为我知道您对时间的精细控制要少得多。

我见过其他发送开始和停止字符的 ASCII 协议，但我不确定在发送二进制数据时如何实现这一点，其中我的值可以采用字节中可能的任何值，并且可能恰好是开始或停止字符是什么。

由于资源有限，我需要保持微控制器方面的基本功能，并且控制器的主要任务需要非常精确（低于我们的范围），将 ascii 转换为十进制可能具有。

是否有人对我应该如何从微处理器或计算机端实现这一点提出建议。

**编辑**
我在这里查看了其他一些问题，但它们似乎都指的是更大的基于 ASCII 的消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:28:47.863

您可以使用以下命令将[读取超时](http://msdn.microsoft.com/en-au/library/system.io.ports.serialport.readtimeout.aspx)设置为 20ms，

```
serialPort.ReadTimeout = 20; 
```

这将使读取操作在 20 毫秒后超时，在这种情况下，您可以为所欲为。

不要使用`ReadExisting`此超时，因为它不依赖于读取超时，
而是使用[`Read()`](http://msdn.microsoft.com/en-us/library/ms143549.aspx)or[`readByte()`](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.readbyte.aspx)并检查[超时异常](http://msdn.microsoft.com/en-us/library/system.serviceprocess.timeoutexception.aspx)

即使写入成功， [WriteTimeout](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.writetimeout.aspx)也可以这样做。所以要注意这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T13:45:11.523

这是一个非常糟糕的主意。它假设电线另一端的机器能够提供相同的保证。在微控制器上，20 毫秒根本不是问题。一台启动 Linux 或 Windows 的机器，没办法。忙于写入串行端口的线程很容易丢失处理器数百毫秒。C# 中的垃圾收集。

只是不要针对特殊情况进行优化，没有意义。超时应该在*第二个*范围内，比您预期的最坏情况大十倍。通过构建协议使协议更加可靠。总是一个开始字节，让接收者有机会重新同步。还不如包括一个长度字节，你迟早会需要它。优先使用 CRC 而不是校验和。查看 RFC916 以获得可恢复的协议建议，尽管被广泛忽略。我使用它时效果很好，虽然它需要额外的工作才能使连接尝试可靠，但您必须刷新接收缓冲区。

# ios - 在 Xcode 4.6 中编辑工具栏 - 无法添加栏按钮项

> ID：15400736
> 
> 赞同：0
> 
> 时间：2013-03-14T03:35:32.567
> 
> 标签：ios, xcode, ios6, xcode4.6

我正在尝试将工具栏添加为输入附件，因此已通过 xcode 故事板编辑器将其添加到视图控制器（而不是在视图中）。这是本教程中指定的（似乎是为早期版本的 xcode 编写的）：[参考](http://www.theappcodeblog.com/2011/02/27/keyboard-tutorial-part-3-add-a-toolbar-to-the-keyboard/)

我的问题：“8.）现在我们需要打开工具栏项本身。双击文档窗口中的工具栏。”

这在它出现的 Xcode 4.6 中不再有效，所以我问你：如何将按钮项添加到工具栏？我宁愿避免以编程方式进行（对于 xcode 开发来说仍然是相当新的，并且通常使用故事板制作我的 GUI），但如果我必须这样做，我必须这样做。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T04:48:45.220

如果您正在做我认为您正在做的事情，添加`UIBarButtonItems`到 a`UIToolbar`中，那么您只需将 Bar Button Item 拖出工具栏即可。

但是，我认为他们说“双击”时的意思**并不是**人们通常认为双击时的意思。*尝试慢慢*双击，这通常可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T22:59:49.833

发现问题 - 它出现在 UIView 后面。但是，您永远不需要与工具栏进行图形交互，您只需将控件拖放到侧边栏中的工具栏上即可。如果需要有关此消息的更多信息，请联系我或投票。

# less - 多个 box-shadow 参数的混合问题较少

> ID：15400737
> 
> 赞同：3
> 
> 时间：2013-03-14T03:35:39.920
> 
> 标签：less, css, stylus

我在一个项目中工作，如果我必须少用，我个人总是使用手写笔，但我不能用这个项目，所以我有下一个问题。我怎么能做到这一点，我用手写笔做的，用更少的？问题是参数的数量。

在手写笔中：

```
box-shadow()
    -webkit-box-shadow arguments
    -moz-box-shadow arguments
    box-shadow arguments

.div {
    box-shadow 0 2px 8px rgba(0, 0, 0, 0.3), inset 0 1px rgba(255, 255, 255, 0.2), inset 0 10px rgba(255, 255, 255, 0.2), inset 0 10px 20px rgba(255, 255, 255, 0.2), inset 0 -15px 30px rgba(0, 0, 0, 0.2)
}

.div2 {
    box-shadow 0 2px 8px rgba(0, 0, 0, 0.3)
} 
```

输出 ：

```
.div {
  -webkit-box-shadow: 0 2px 8px rgba(0,0,0,0.3), inset 0 1px rgba(255,255,255,0.2), inset 0 10px rgba(255,255,255,0.2), inset 0 10px 20px rgba(255,255,255,0.2), inset 0 -15px 30px rgba(0,0,0,0.2);
  -moz-box-shadow: 0 2px 8px rgba(0,0,0,0.3), inset 0 1px rgba(255,255,255,0.2), inset 0 10px rgba(255,255,255,0.2), inset 0 10px 20px rgba(255,255,255,0.2), inset 0 -15px 30px rgba(0,0,0,0.2);
  box-shadow: 0 2px 8px rgba(0,0,0,0.3), inset 0 1px rgba(255,255,255,0.2), inset 0 10px rgba(255,255,255,0.2), inset 0 10px 20px rgba(255,255,255,0.2), inset 0 -15px 30px rgba(0,0,0,0.2);
}
.div2 {
  -webkit-box-shadow: 0 2px 8px rgba(0,0,0,0.3);
  -moz-box-shadow: 0 2px 8px rgba(0,0,0,0.3);
  box-shadow: 0 2px 8px rgba(0,0,0,0.3);
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T10:11:16.740

## 现在少

当前版本的 LESS 允许您使用逗号作为列表的分隔符，然后在参数末尾放置一个分号以将整个内容作为逗号分隔的列表传递。所以这现在有效（注意右括号之前末尾的额外分号。

```
.box-shadow(0 2px 8px rgba(0, 0, 0, 0.3), inset 0 1px rgba(255, 255, 255, 0.2), inset 0 10px rgba(255, 255, 255, 0.2), inset 0 10px 20px rgba(255, 255, 255, 0.2), inset 0 -15px 30px rgba(0, 0, 0, 0.2););
                                                                                                                                                                                                        ^here 
```

## 原始（LESS 1.3.3 之前）答案

以下是 LESS 需要如何获得相同的输出：

```
.box-shadow(@shadows) {
    -webkit-box-shadow: @shadows;
    -moz-box-shadow: @shadows;
    box-shadow: @shadows;
}

.div {
    .box-shadow(~"0 2px 8px rgba(0, 0, 0, 0.3), inset 0 1px rgba(255, 255, 255, 0.2), inset 0 10px rgba(255, 255, 255, 0.2), inset 0 10px 20px rgba(255, 255, 255, 0.2), inset 0 -15px 30px rgba(0, 0, 0, 0.2)");
}

.div2 {
    .box-shadow(0 2px 8px rgba(0, 0, 0, 0.3));
} 
```

**注意：**要将多个阴影作为您的`.div`，您需要使用转义字符串将它们作为单个参数传递，这就是第一次使用`~" "`围绕整个参数字符串的原因。如果你只是通过一个影子，那是没有必要的。LESS 需要它来获取影子组之间的逗号。

# android - 在Android中多次使用getResources（）的更好方法是什么

> ID：15400738
> 
> 赞同：2
> 
> 时间：2013-03-14T03:35:55.203
> 
> 标签：android, android-resources

我是我的应用程序，我使用了很多`getResources()`这样 的应用程序

```
BitmapFactory.decodeResource(getResources(), resourceid, opts); 
```

我可以使用 Resources res = getResources() 作为全局变量并使用

```
BitmapFactory.decodeResource(res, resourceid, opts); 
```

所以，我的问题是：避免内存泄漏的更好方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T03:59:17.210

我有时会这样做，我认为这很好，但您只需要观看即可。在您的情况下，我不确定`Global`在没有任何变化的情况下创建变量是否值得。我将为函数执行此操作，以根据`context`或其他变量获取特定资源。但是在这里，我不明白如何

```
BitmapFactory.decodeResource(getResources(), resourceid, opts); 
```

比

```
BitmapFactory.decodeResource(res, resourceid, opts); 
```

您似乎正在添加一个额外的不必要的步骤

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T04:03:56.120

我不会尝试对此进行过多的微优化，只需使用尽可能减少垃圾的常见做法即可。我的意思是避免解码某些东西，让它超出范围并再次解码。

真的，除非您继续解码巨大的图像或类似的东西，否则我看不出有任何问题。

# c# - 如何将 Properties.Settings.Default 的副本保存到变量中？

> ID：15400742
> 
> 赞同：3
> 
> 时间：2013-03-14T03:36:03.983
> 
> 标签：c#, winforms, settings

我在选项对话框中有一个**“恢复默认值”**按钮，并且希望仅恢复在此表单中受影响的值，而不是整个 Properties.Settings.Default

所以我尝试了：

```
var backup = Properties.Settings.Default;
Properties.Settings.Default.Reload();
overwriteControls();
Properties.Settings.Default = backup; 
```

但不幸的是，这不起作用，因为备份似乎也发生了变化`Reload()`？为什么以及如何正确执行此操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T02:23:32.643

Settings 类使用单例模式，这意味着它们在任何时候都只能是设置的一个实例。因此，制作该实例的副本将始终引用同一个实例。

理论上，您可以使用反射遍历 Settings 类中的每个属性并提取如下值：

```
 var propertyMap = new Dictionary<string, object>();

        // backup properties
        foreach (var propertyInfo in Properties.Settings.Default.GetType().GetProperties())
        {
            if (propertyInfo.CanRead && propertyInfo.CanWrite && propertyInfo.GetCustomAttributes(typeof(UserScopedSettingAttribute), false).Any())
            {
                var name = propertyInfo.Name;
                var value = propertyInfo.GetValue(Properties.Settings.Default, null);
                propertyMap.Add(name, value);
            }
        }

        // restore properties
        foreach (var propertyInfo in Properties.Settings.Default.GetType().GetProperties())
        {
            if (propertyInfo.CanRead && propertyInfo.CanWrite && propertyInfo.GetCustomAttributes(typeof(UserScopedSettingAttribute), false).Any())
            {
                var value = propertyMap[propertyInfo.Name];
                propertyInfo.SetValue(Properties.Settings.Default, value, null);                    
            }
        } 
```

虽然，它有点棘手，如果您的设置很复杂，可能需要一些工作。您可能需要重新考虑您的策略。您只能在按下 OK 按钮后提交这些值，而不是将这些值恢复为默认值。无论哪种方式，我认为您将需要逐个属性地将每个值复制到某个临时位置。

# c - 这个 C 编译器错误是什么意思？

> ID：15400744
> 
> 赞同：0
> 
> 时间：2013-03-14T03:36:07.423
> 
> 标签：c, function, compiler-construction

每次我编译我的程序时，这个错误都会不断出现：

```
 ch.c: In function 'my_ch':
 ch.c:8:1: error: expected '=', ',', ';', 'asm' or '__attribute__' before '{'
     token
 ch.c:20:1: error: expected '{' at end of input 
```

但我认为我的格式正确：

```
void my_ch ()
{
    /*some initialization stuff here*/

    while ( /*conditions here*/ ) {
        /*insert some code here*/
    }

return;
} 
```

我的第 8 行是之后的那一行，`void my_ch ()`而第 20行是之后的那一行`return;`。有谁知道为什么错误不断出现？非常感谢

**编辑**

```
//ch
#include <stdio.h>
#include "ch.h"
#define BUFLEN 2500
#define MAC 3000
<space> 
```

第七行是`void my_ch()`行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T03:52:43.043

ch.h 可能有一个没有 ';' 的结构声明 在结束“}”之后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T04:01:16.160

ch.h 中有些事情未完成。可能类似于末尾缺少分号的函数原型。ch.h 中有什么？

# c# - 收到错误“输入字符串的格式不正确。” 在选择参数中

> ID：15400745
> 
> 赞同：0
> 
> 时间：2013-03-14T03:36:25.420
> 
> 标签：c#, asp.net, sql-server, tsql, ado.net

询问：

```
SELECT [VehicleId], [VehicleNumber], [VehicleBrand], [VehicleName], [ModelYear], [PurchasePrice]
FROM [VehicleMaster]
WHERE ([VehicleType]=@VehicleType or @VehicleType = '') and 
    ([VehicleNumber]=@VehicleNumber or @VehicleNumber is null) and 
    ([SaleStatus] = @SaleStatus or @SaleStatus = '-Select-') and 
    ([OwnershipStatus]=@OwnershipDetail or @OwnershipDetail = '-Select-')  and
    ([ModelYear] between @YearFrom and @YearTo or (@YearFrom = 'Year' and @YearTo = 'Year')) 
```

标记：

```
<SelectParameters>
    <asp:SessionParameter Name="VehicleType" SessionField="VehicleType" Type="String" />
    <asp:SessionParameter Name="VehicleNumber" SessionField="VehicleNumber" Type="String" />
    <asp:SessionParameter Name="SaleStatus" SessionField="SalesStatus" Type="String" />
    <asp:SessionParameter Name="OwnershipDetail" SessionField="OwnershipStatus" Type="String" />
    <asp:SessionParameter Name="YearFrom" SessionField="YearFrom" Type="Int32"  ConvertEmptyStringToNull="true" />
    <asp:SessionParameter Name="YearTo" SessionField="YearTo" Type="Int32" ConvertEmptyStringToNull="true" />
</SelectParameters> 
```

错误：

> 输入字符串的格式不正确.e....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T03:50:47.137

```
(@YearFrom = 'Year' and @YearTo = 'Year') 
```

将暗示变量`@YearFrom`和`@YearTo`是字符串，但您将它们声明为 Int32

```
<asp:SessionParameter Name="YearFrom" SessionField="YearFrom" Type="Int32"  ConvertEmptyStringToNull="true" />
<asp:SessionParameter Name="YearTo" SessionField="YearTo" Type="Int32" ConvertEmptyStringToNull="true" /> 
```

由于字符串 'Year' 不是 int 类型，因此在执行期间将失败。

# database - PL/SQL 游标不显示结果

> ID：15400746
> 
> 赞同：0
> 
> 时间：2013-03-14T03:36:40.443
> 
> 标签：database, oracle, plsql, cursor

我对 PL/SQL 编程非常陌生。我有一张名为`course`. 当我做：

```
select * from course where branchid = 'B1'; 
```

它返回结果如下：

![在此处输入图像描述](../Images/b506e2bc40fba5945eb4cd807a3748d2.png)

这是我尝试针对此表运行的 PL/SQL 程序：

```
declare 
    v_branchId course.branchid%TYPE := 'B1';
    cursor course_cur is
    select * from course where branchid = v_branchId;

    v_cursor course_cur%ROWTYPE;

BEGIN
    open course_cur;
    LOOP
        FETCH course_cur into v_cursor;
        exit when course_cur%NOTFOUND;

        dbms_output.put_line('The course id is  ' || v_cursor.courseid );

    END LOOP;
END;
/ 
```

该程序已成功执行，但它根本不会打印`courseid`'s，即使对于 branchid`B1`我有几个`courseid`'s。

我在哪里犯错误？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T05:23:06.257

```
set serveroutput on size unlimited 
```

开始。如果需要，还要检查包装选项。
[http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_twelve040.htm#SQPUG099](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_twelve040.htm#SQPUG099)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:35:07.357

你能试试这个，让我知道结果吗：）

```
declare 

cursor course_cur (v_branchId in varchar2) is
select * from course where branchid = v_branchId;

v_cursor course_cur%ROWTYPE; 
```

开始

```
open course_cur ('B1');
LOOP
    FETCH course_cur into v_cursor;
    exit when course_cur%NOTFOUND;

    dbms_output.put_line('The course id is  ' || v_cursor.courseid );

END LOOP; 
```

结尾;

谢谢

# c++ - C++，在for循环中分配空间，可能的内存泄漏验证

> ID：15400747
> 
> 赞同：6
> 
> 时间：2013-03-14T03:36:44.100
> 
> 标签：c++, pointers, memory, orphan

我只是好奇这段代码是否会造成多个内存泄漏，或者它是否会被正确清理。

```
Node *newNode;

for (int i = 0; i < 10; i++)
{
    newNode = new Node();
}

delete newNode; 
```

所以显然代码没有做任何事情，但它确实帮助我解释了我的场景。我是否分配了 10 次内存，当我删除留下 9 个孤儿的指针时？或者我是否重复使用分配的相同空间并正确删除孤儿？提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T03:39:00.027

是的，这是泄漏内存。当你这样做时：

```
newNode = new Node(); 
```

您正在重新定义指针以指向新分配的内存，实际上失去了对先前指向内存的寻址方式以将其删除。

因此，当您离开循环时，`newNode`指针指向最后分配的（第十个）内存/ `Node`。当您`delete newNode`仅删除该内存时。你不再有`delete`其他人的方式。

正如**Zhi Wang**指出的那样，您可以使用某种形式的智能指针（例如[`unique_ptr`](http://en.cppreference.com/w/cpp/memory/unique_ptr)，[`shared_ptr`](http://en.cppreference.com/w/cpp/memory/shared_ptr)在 C++11 中）。这些智能指针基本上是围绕常规指针的包装器，它们具有防止这种泄漏的附加语义。如果您使用其中之一，内存/对象将在超出范围时自动释放（`for`在这种情况下，在循环的当前迭代结束时）。

**但是**，我认为这不会解决您在这种情况下的情况。`delete`我怀疑你一创建它们就想要10 个对象。相反，您可能希望将这些对象存储在像 a 这样的容器中，`std::vector`或者至少有一个指向每个已分配实例的指针数组。这样，您将拥有周围的对象（我相信这是您想要的，因为您正在构建它们）并且还有一种稍后删除它们的方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-14T03:47:09.523

是的，您的代码泄漏了内存。您对行为的第一个猜测是正确的。这段代码

```
Node *newNode;

for (int i = 0; i < 10; i++)
{
    newNode = new Node();  // allocate memory 10 times in a loop...
}

delete newNode;            // ... but free the memory only once! 
```

分配内存 10 次（循环`new`内的运算符`for`），但释放仅由*其中一个*对象（`delete`底部的运算符）使用的内存。自然，这会使其他 9 个对象成为孤立对象——它们消耗的内存仍然被分配，但您现在无法访问它来释放它。当然，这就是内存泄漏的定义。

相比之下，这段代码

```
Node *newNode;

for (int i = 0; i < 10; i++)
{
    newNode = new Node();    // allocate memory 10 times in a loop
    delete newNode;          // ... and free the memory each time
} 
```

不会泄漏任何内存，因为`delete`每次调用`new`. 这是您必须牢记的大规则：**如果您没有将每个调用`new`与相应的调用匹配到`delete`，您将有内存泄漏**。

或者，当您在 C++ 中工作时，也许更好的规则是从一开始就不要使用原始指针。C++ 标准库提供了几个很好的包装类，它们实现了指针的 RAII 惯用语，这确保了指向的对象被正确地销毁，因此它们消耗的内存被释放。[在您最喜欢的 C++ 书籍](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)或[Wikipedia](http://en.wikipedia.org/wiki/Smart_pointer#C.2B.2B_smart_pointers)上开始您的研究。

# java - 我如何将 sqlcipher 应用于 JavaSE

> ID：15400752
> 
> 赞同：2
> 
> 时间：2013-03-14T03:37:13.540
> 
> 标签：java, sqlite, sqlcipher

我发现 sqlcipher 在 Android 开发中使用起来很方便。但这不符合我的需要。最近，我有一个任务是在一个基于 Java SE 的项目中加密一个 sqlite 数据库。我的问题的核心是“我如何将 sqlcipher 应用于 JavaSE”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T13:03:22.417

目前还没有适用于 SQLCipher 的 JDBC 驱动程序。

# google-api - 以编程方式获取 Google 代码项目下载部分中发布的最新文件的 URL？

> ID：15400756
> 
> 赞同：0
> 
> 时间：2013-03-14T03:37:37.837
> 
> 标签：google-api, google-code

我的 C# 应用程序需要在[http://code.google.com/p/cmissync/downloads检查更新](http://code.google.com/p/cmissync/downloads)

我可以废弃 HTML，但有更好的解决方案吗？
我没有找到任何允许这样做的 Google API。

*注意：我不想在某处维护包含版本号的文本文件，因为它会使发布过程变得不那么精简。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:37:52.197

我刚刚找到一个返回最新下载的 Atom 描述的 URL：

[https://code.google.com/feeds/p/cmissync/downloads/basic](https://code.google.com/feeds/p/cmissync/downloads/basic)

摘抄：

```
<?xml version="1.0"?>

<feed xmlns="http://www.w3.org/2005/Atom">
 <updated>2013-03-14T04:37:53Z</updated>
 <id>http://code.google.com/feeds/p/cmissync/downloads/basic</id>
 <title>Downloads for project cmissync on Google Code</title>
 <link rel="self" type="application/atom+xml;type=feed" href="http://code.google.com/feeds/p/cmissync/downloads/basic"/>
 <link rel="alternate" type="text/html" href="http://code.google.com/p/cmissync/downloads/list"/>

 <entry>
 <updated>2013-03-14T04:37:53Z</updated>
 <id>http://code.google.com/feeds/p/cmissync/downloads/basic/CmisSync_0.4.6.msi</id>
 <link rel="alternate" type="text/html" href="http://code.google.com/p/cmissync/downloads/detail?name=CmisSync_0.4.6.msi" />
 <title>
 CmisSync_0.4.6.msi (1.5 MB)
 </title>
 <author>
 <name>nicolas.raoul@gmail.com</name>
 </author>
 <content type="html">
&lt;pre&gt;
CmisSync 0.4.6

&lt;a href=&quot;http://cmissync.googlecode.com/files/CmisSync_0.4.6.msi&quot;&gt;Download&lt;/a&gt;
&lt;/pre&gt;
 </content>
</entry>

 <entry>
 [...] 
```

即使没有 Atom 库，也应该很容易只过滤`<id>`元素，这会给出 100 个最新文件的提要标识符。从这些标识符中，可以推断出下载 URL 的列表：

[http://code.google.com/feeds/p/cmissync/downloads/basic/CmisSync_0.4.6.msi](http://code.google.com/feeds/p/cmissync/downloads/basic/CmisSync_0.4.6.msi) → [http://cmissync.googlecode.com/files/CmisSync_0.4.6.msi](http://cmissync.googlecode.com/files/CmisSync_0.4.6.msi)

另一个更简单的解决方案受到热烈欢迎！

# python - facebook 登录网站 - 为什么选择 facebook 应用程序？

> ID：15400758
> 
> 赞同：0
> 
> 时间：2013-03-14T03:37:56.603
> 
> 标签：python, html, django, facebook, facebook-login

我正在阅读使用 facebook 帐户登录网站的文档。

本文档中的步骤是：
1）创建 facebook 应用程序
2）设置登录的其他步骤。

但我不明白的是：为什么我需要在 facebook 中创建应用程序？我的想法很简单：要求用户登录他的 Facebook 帐户 -> 让他获得授权 -> 并将他登录到网页。为什么我需要这个额外的 Facebook 应用程序？如果用户看到这个 facebook 应用程序，他会害怕登录，因为他不知道这个应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T04:34:14.350

根据我们的聊天讨论，此页面：

[http://developers.facebook.com/docs/howtos/login/getting-started/](http://developers.facebook.com/docs/howtos/login/getting-started/)

包含任何有 FBLogin 问题的人正在寻找的关于 javascript 身份验证的所有答案。

# javascript - 四舍五入到小数点后两位，javascript

> ID：15400760
> 
> 赞同：1
> 
> 时间：2013-03-14T03:38:06.240
> 
> 标签：javascript, tofixed

我想在javascript中将数字四舍五入到小数点后两位。我发现很多关于 SO 的帖子都说`.toFixed`方法的行为对于不同的浏览器是不可预测的。

并在许多地方找到了这个解决方案，无一例外地被接受

```
Math.round(yournumber * 100 ) / 100 
```

但是我从这个计算中也发现了正确但一些错误的结果，比如

```
Math.round( 1.27532423 * 100 ) / 100  = 1.28 // this seems correct
Math.round( 1.275 * 100 ) / 100       = 1.27 // as I understand it should also 1.28
Math.round( 1.276 * 100 ) / 100       = 1.28 
```

我是否遗漏了什么或我的理解不正确？

**编辑**

才发现

`1.275 * 100`正在返回`127.49999999999999`，这就是原因，如果它返回`127.5`，它将产生正确的结果。

但是为什么它会返回这个`127.49999999999999`？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T04:14:44.757

根据@scott.korin 评论已更改

```
Math.round( 1.27532423 * 100 ) / 100 
```

到

```
Math.round( 1.27532423 * 10 * 10) / 100 // changed 100 to 10*10 
```

它就像一个魅力:)

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T03:47:23.507

浮点数学仅精确到第[52 位二进制位](http://en.wikipedia.org/wiki/Floating_point)（大约是第 16 位小数）。虽然 1.275 应该向上舍入到 1.28，但 1.01000110011b == 1.274902d 正确地向下舍入到 1.27。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T04:20:45.967

这是该问题的解决方法：

```
Math.round((1.275*100).toFixed(2))/100 // returns 1.28 
```

问题的解释可以在下面的[问答中找到](https://stackoverflow.com/questions/588004/is-javascripts-floating-point-math-broken)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T04:50:46.443

为避免此浮点数舍入错误，我将最大精度乘以 10^21，如下所示

```
Math.round(1.275*Math.pow(10,21)/Math.pow(10,19))/100 == 1.28 
```

# javascript - How to make div dragable to each other in html?

> ID：15400769
> 
> 赞同：0
> 
> 时间：2013-03-14T03:39:12.253
> 
> 标签：javascript, html, css

```
<div class="player-tab">
    <div class="img-wrap" draggable="true">
        <img src="assets/player.png" alt="">
    </div>
    <div class="img-wrap" draggable="true">
        <img src="assets/player.png" alt="">
    </div>
    <div class="add-recording"> <a href="#">+ Add Recording</a>

    </div>
</div> 
```

In this code anyone can add recording and a player image show them after add. I want to img-wrap draggable to each other.

I means I upload 1 record and 2 record. I can sort it to 2nd first and 1st later. This way it's can be sorting in format as user want. Someone know any good idea to implement this feature.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T03:43:25.560

You can use jQuery:

```
 $(function() {
    $( "#divid" ).draggable();
  }); 
```

see this:[http://jqueryui.com/draggable/](http://jqueryui.com/draggable/)

I think you want this:

```
 $(function() {
$( "#sortable" ).sortable();
$( "#sortable" ).disableSelection();
 }); 
```

check here:[http://jqueryui.com/sortable/](http://jqueryui.com/sortable/)

# sql - SQL , 最常出现的值

> ID：15400772
> 
> 赞同：-3
> 
> 时间：2013-03-14T03:39:36.587
> 
> 标签：sql, frequency

我有两个典型的表，客户和联系人具有一对多关系例如我的表填充如下：

```
Customer
-------------
CustomerId
    1

Contact
---------------
ContactId     CustomerId    FName      LName       Address       CreatedAt
    1             1         John       Smith       Add1         25/01/2013
    2             1         John       Cole        Add1         26/01/2013
    3             1         Alex       Cole        Add1         27/01/2013
    4             1         John       Smith       Add2         28/01/2013 
    5             1         Alex                   Add2         29/01/2013 
```

我想用以下条件从这 5 行中创建一个新行：

对于每个字段（列），选择出现频率最高且不为空或为空的字段。

如果 non 发生的次数多于其他记录，则应使用不为 null 或为空的最新记录。

所以对于上面提到的例子，行应该是这样的：

```
CustomerId    FName      LName       Address 
    1         John       Smith        Add1 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T03:54:58.893

您没有指定哪个 RDBMS，但我认为应该这样做：

```
SELECT CustomerId, FName, LName, Address FROM Contact WHERE CustomerId = 1 GROUP BY FName, LName ORDER BY COUNT(*) DESC LIMIT 1 
```

# dojo - 禁用道场中的转义键

> ID：15400774
> 
> 赞同：3
> 
> 时间：2013-03-14T03:39:41.920
> 
> 标签：dojo, dialog, keypress

我需要在对话框打开时禁用转义键。当前，当我单击转义按钮时，对话框关闭并且事务正在提交。我尝试了以下代码片段，但它无法正常工作。

```
 dojo.connect(dialog, "onKeyPress", function(e){ 
                    var key = e.keyCode || e.charCode; 
                    var k = dojo.keys; 

                    if (key == k.ESCAPE) { 
                         event.preventDefault();

                     d.stopEvent(event);
                    } 
                    }); 
```

你能帮我解决这个问题吗？我搜索了很多，还没有找到适合我的问题的解决方案。提前致谢..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T12:26:00.813

Dojo 使用`_onKey`事件来实现可访问性。您可以使用以下方法覆盖它：

```
dialog._onKey = function() { } 
```

我写了一个示例[JSFiddle](http://jsfiddle.net/tkVnw/)，按 Escape 键应该不再起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-22T20:08:27.687

如果您想在所有对话框（而不是特定实例）中覆盖转义键，您可以使用[dojo/aspect](http://livedocs.dojotoolkit.org/dojo/aspect)：

```
require(['dojo/aspect', 'dijit/Dialog'], function (Aspect, Dialog) {
    Aspect.around(Dialog.prototype, '_onKey', function (original) {
        return function () { }; // no-op
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-30T15:04:03.750

您可以在新文件中为 Dialog 小部件创建扩展，如下所示：

```
define(["dojo/_base/declare", "dijit/Dialog"],
    function(declare, Dialog){
    return declare(Dialog, {

        //Prevents the 'ESC' Button of Closing the dialog
        _onKey: function() { }

    });
}); 
```

将文件保存到 dojo 目录（例如：dojo/my/my_dialog.js），而不是调用：'dijit/Dialog'，只需调用：'my/my_dialog'。
这将为您节省编辑每个 Dialog 调用的繁重工作， **对于“dojox/widget/DialogSimple”小部件也是如此。**

# jquery-ui - Jquery UI 日期选择器。禁用日期数组

> ID：15400775
> 
> 赞同：87
> 
> 时间：2013-03-14T03:39:43.303
> 
> 标签：jquery-ui, jquery-ui-datepicker

我一直在尝试寻找我的 Jquery ui datepicker 问题的解决方案，但我没有运气。这就是我想要做的......

我有一个应用程序，我正在执行一些复杂的 PHP 来返回我希望从 Jquery UI Datepicker 中屏蔽的日期的 JSON 数组。我正在返回这个数组：

```
["2013-03-14","2013-03-15","2013-03-16"] 
```

有没有一种简单的方法可以简单地说：从日期选择器中阻止这些日期？

我已经阅读了 UI 文档，但没有发现任何对我有帮助的东西。有人有想法么？

* * *

## 回答 #1

> 赞同：217
> 
> 时间：2013-03-14T03:42:48.607

您可以使用[beforeShowDay](http://api.jqueryui.com/datepicker/#option-beforeShowDay)来执行此操作

以下示例禁用 2013 年 3 月 14 日至 2013 年 3 月 16 日的日期

```
var array = ["2013-03-14","2013-03-15","2013-03-16"]

$('input').datepicker({
    beforeShowDay: function(date){
        var string = jQuery.datepicker.formatDate('yy-mm-dd', date);
        return [ array.indexOf(string) == -1 ]
    }
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/CxNNh/1/)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-04-30T19:15:09.217

IE 8 没有 indexOf 功能，所以我使用 jQuery inArray 代替。

```
$('input').datepicker({
    beforeShowDay: function(date){
        var string = jQuery.datepicker.formatDate('yy-mm-dd', date);
        return [$.inArray(string, array) == -1];
    }
}); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-05-09T10:14:46.073

如果您还想阻止星期日（或其他日子）以及日期数组，我使用以下代码：

```
jQuery(function($){

    var disabledDays = [
       "27-4-2016", "25-12-2016", "26-12-2016",
       "4-4-2017", "5-4-2017", "6-4-2017", "6-4-2016", "7-4-2017", "8-4-2017", "9-4-2017"
    ];

   //replace these with the id's of your datepickers
   $("#id-of-first-datepicker,#id-of-second-datepicker").datepicker({
      beforeShowDay: function(date){
         var day = date.getDay();
         var string = jQuery.datepicker.formatDate('d-m-yy', date);
         var isDisabled = ($.inArray(string, disabledDays) != -1);

         //day != 0 disables all Sundays
         return [day != 0 && !isDisabled];
      }
   });
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-18T06:26:12.970

```
$('input').datepicker({
   beforeShowDay: function(date){
       var string = jQuery.datepicker.formatDate('yy-mm-dd', date);
       return [ array.indexOf(string) == -1 ]
   }
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-12-14T14:36:06.887

如果您想在 jquery datepicker 中禁用特定日期，那么这里有一个简单的演示。

```
<script type="text/javascript">
    var arrDisabledDates = {};
    arrDisabledDates[new Date("08/28/2017")] = new Date("08/28/2017");
    arrDisabledDates[new Date("12/23/2017")] = new Date("12/23/2017");
    $(".datepicker").datepicker({
        dateFormat: "dd/mm/yy",
        beforeShowDay: function (date) {
            var day = date.getDay(),
                    bDisable = arrDisabledDates[date];
            if (bDisable)
                return [false, "", ""]
        }
    });
</script> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-03-22T10:10:27.677

对于 DD-MM-YY，请使用以下代码：

var 数组 = ["03-03-2017', '03-10-2017', '03-25-2017"]

```
$('#datepicker').datepicker({
    beforeShowDay: function(date){
    var string = jQuery.datepicker.formatDate('dd-mm-yy', date);
    return [ array.indexOf(string) == -1 ]
    }
});

function highlightDays(date) {
    for (var i = 0; i < dates.length; i++) {
    if (new Date(dates[i]).toString() == date.toString()) {
        return [true, 'highlight'];
    }
}
return [true, ''];
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-10-12T20:08:06.413

**beforeShowDate**对我不起作用，所以我继续开发自己的解决方案：

```
$('#embeded_calendar').datepicker({
               minDate: date,
                localToday:datePlusOne,
               changeDate: true,
               changeMonth: true,
               changeYear: true,
               yearRange: "-120:+1",
               onSelect: function(selectedDateFormatted){

                     var selectedDate = $("#embeded_calendar").datepicker('getDate');

                    deactivateDates(selectedDate);
                   }

           });

              var excludedDates = [ "10-20-2017","10-21-2016", "11-21-2016"];

              deactivateDates(new Date());

            function deactivateDates(selectedDate){
                setTimeout(function(){ 
                      var thisMonthExcludedDates = thisMonthDates(selectedDate);
                      thisMonthExcludedDates = getDaysfromDate(thisMonthExcludedDates);
                       var excludedTDs = page.find('td[data-handler="selectDay"]').filter(function(){
                           return $.inArray( $(this).text(), thisMonthExcludedDates) >= 0
                       });

                       excludedTDs.unbind('click').addClass('ui-datepicker-unselectable');
                   }, 10);
            }

            function thisMonthDates(date){
              return $.grep( excludedDates, function( n){
                var dateParts = n.split("-");
                return dateParts[0] == date.getMonth() + 1  && dateParts[2] == date.getYear() + 1900;
            });
            }

            function getDaysfromDate(datesArray){
                  return  $.map( datesArray, function( n){
                    return n.split("-")[1]; 
                });
             } 
```

# html - 贝宝表对齐

> ID：15400777
> 
> 赞同：0
> 
> 时间：2013-03-14T03:39:55.027
> 
> 标签：html, css, paypal, html-table, alignment

我正在尝试制作带有贝宝链接的商店页面来购买商品。我从 PayPal 获得了代码，但无法正确格式化。我希望这两个项目彼此相邻对齐，但无法弄清楚如何做到这一点。

```
#shirt {
width:380px;
margin:0;
clear:both; 
}

#content {
margin:0 0px 0 0;
margin:0 0px 0 0;
border-right:1px solid #000000;
border-left:1px solid #000000;
padding:10px 25px 30px 25px;
}

    <div id="content">
        <!--SHIRT ONE--!>
        <div id="shirt">
            <form action="https://www.paypal.com/cgi-bin/webscr" method="post">
            <input type="hidden" name="cmd" value="_s-xclick">
            <input type="hidden" name="hosted_button_id" value="B2CBLQAD7BJ4J">     
            <table>
                <tr>
                    <td>

            <div class="img">
                <input id="image" type="image" src="cover.png" name="tee" width="250" height="250"></td>
            </div>

            <table>
                <tr>
                    <td><input type="hidden" name="on0" value="Color">Color</td>
                    <td><input type="hidden" name="on1" value="Size">Size</td>
                </tr>
                <tr>
                    <td>
                        <select name="os0">
                            <option value="White">White</option>
                            <option value="Black">Black</option>
                            <option value="Grey">Grey</option>
                        </select>
                    </td>
                    <td>
                        <select name="os1">
                            <option value="S">S </option>
                            <option value="M">M </option>
                            <option value="L">L </option>
                            <option value="XL">XL </option>
                        </select> 
                    </td>
                </tr>
            </table>
            <br />

            <input type="hidden" name="currency_code" value="USD">
            <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_buynowCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
            <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
            </form>
        </div>
        <!--SHIRT TWO--!>
        <div id="shirt">
            <form action="https://www.paypal.com/cgi-bin/webscr" method="post">
            <input type="hidden" name="cmd" value="_s-xclick">
            <input type="hidden" name="hosted_button_id" value="B2CBLQAD7BJ4J">     
            <table>
                <tr>
                    <td>

            <div class="img">
                <input id="image" type="image" src="cover.png" name="tee" width="250" height="250"></td>
            </div>

            <table>
                <tr>
                    <td><input type="hidden" name="on0" value="Color">Color</td>
                    <td><input type="hidden" name="on1" value="Size">Size</td>
                </tr>
                <tr>
                    <td>
                        <select name="os0">
                            <option value="White">White</option>
                            <option value="Black">Black</option>
                            <option value="Grey">Grey</option>
                        </select>
                    </td>
                    <td>
                        <select name="os1">
                            <option value="S">S </option>
                            <option value="M">M </option>
                            <option value="L">L </option>
                            <option value="XL">XL </option>
                        </select> 
                    </td>
                </tr>
            </table>
            <br />

            <input type="hidden" name="currency_code" value="USD">
            <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_buynowCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
            <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
            </form>
        </div>
    </div><!--content--!> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T04:26:45.573

尝试像这样更改您的 css 并为容器提供宽度

```
#shirt {
 float: left;
 margin: 0;
 width: 380px;
} 
```

检查这个演示[http://jsfiddle.net/sanjaymv/9ghZD/](http://jsfiddle.net/sanjaymv/9ghZD/)

# java - 如何从微调器中获取 int 值

> ID：15400781
> 
> 赞同：17
> 
> 时间：2013-03-14T03:40:03.733
> 
> 标签：java, swing, jspinner

我正在使用 NetBeans 7.1 编写 Java 代码。我有一个`JFrame`带有整数值的微调器，我想知道如何在微调器中获取活动值，我的意思是，用户在程序运行时选择的值；在其他方法上使用它。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-14T03:44:20.747

`spinner.getValue()`应该做的伎俩。您可以将其转换为`Integer`，例如

```
int value = (Integer) spinner.getValue(); 
```

**来自[reggoodwin](https://stackoverflow.com/users/2116622/reggoodwin)的注意事项：**您还应该在调用`spinner.commitEdit()`之前调用`getValue()`以确保使用编辑器手动键入的值传播到模型，否则您将只能获得旧值。

因此，它应该如下所示，

```
try {
    spinner.commitEdit();
} catch ( java.text.ParseException e ) { .. }
int value = (Integer) spinner.getValue(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-14T06:57:15.380

```
String value = getSpinner().getValue() + "";

Integer.parseInt(value) 
```

我的解决方案，这对我有用......
不起作用：

```
Integer.parseInt( getSpinner().getValue().toString()) //get object toString 
```

我不明白，但它有效，我留下它以防万一有人需要它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-20T13:19:26.340

```
 String spinner = "catch Value";
    Integer myint = (Integer) jSpinner1.getValue();
    spinner = myint.toString();
    jTextField1.setText(spinner); 
```

这对我有用。想要将整数值从 jSpinner 写入文本字段。

# r - 合并R中的两条数据

> ID：15400783
> 
> 赞同：0
> 
> 时间：2013-03-14T03:40:14.193
> 
> 标签：r, list, vector, concatenation

我不确定如何最好地描述这一点，所以我会告诉你。我有两个变量。
A：

```
 ID
1             121
2             122
3             123
4             124
5             125
6             126
7             127
8             128
9             129 
```

和乙：

```
 var1     var2       var3 
1      57.1     116.5      73.0
2      38.1      15.8      22.7
3      84.2      99.2      72.2 
```

我希望他们以这样的方式结束：

```
 ID
1             121   57.1
2             122   116.5
3             123   73.0
4             124   38.1
5             125   15.8
6             126   22.7
7             127   84.2
8             128   99.2
9             129   72.2 
```

那有意义吗？我想维护原始变量并按顺序添加一个列，该列是另一个变量的行。最好我喜欢这个作为数据框。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T03:44:11.950

默认情况下填充 data.frames 和矩阵`by column`，因为您想创建一个按行填充的数字向量，您需要在强制转换为数字变量之前转置 data.frame，因此它将按照您想要的顺序。

```
A$value <- c(t(B)) 
```

转置 a`data.frame`给出一个矩阵，该矩阵由 强制转换为数值向量`c`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T03:48:05.510

假设`B`是`data.frame`，你可以这样做：

```
cbind(A,var.name=as.vector(as.matrix(B))) 
```

您可以传递新的列名而不是`var.name`

# javascript - 用自定义方法替换原生对象（数组）方法：安全吗？兼容的？

> ID：15400785
> 
> 赞同：0
> 
> 时间：2013-03-14T03:40:19.693
> 
> 标签：javascript

我有一个数组，它有一个我扔给它的方法，称为`add`，我将其用作`push`. 我发现自己`push`在应该使用的时候使用了几次`add`，现在我认为将我的`add`方法的引用分配给数组的 native会很好`push`。因此，调用`push`数组将调用`add`.

内部是否依赖于外部可用的本机方法，例如`push`？这将如何影响兼容性？这是一个坏主意吗？如果是这样，为什么？

*一些代码*：

```
PR.state = {
   views: []
};

_.extend(PR.state.views, {

   add: function(view) {
     var parent = view.parent;
     if ((!this.length && view instanceof PR.Views.App) || (parent && _.contains(this, parent)))
       this.push(view);
   }

});

// I am thinking:
PR.state.views.push = PR.state.views.add; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T04:12:07.550

我强烈建议不要更改标准数组方法的行为。如果您真的想要一个自定义方法，那么只需创建一个新方法并给它自己的唯一名称并使用它。

改变现有方法的行为可能会产生各种不良后果：

1.  与从任何其他来源检索的代码不兼容。
2.  如果其他人曾经在此项目上工作，则会创建一个非标准和意外的实现。这就像添加一个定时炸弹来绊倒一些未来的开发人员。
3.  训练自己使用自己的自定义方法，而不是`.push()`一个体面的开发人员会做的事情。去做就对了。
4.  使用适当的描述性名称创建一个新命名的方法可以提高代码的可读性、可理解性和可维护性。用不同的方法替换现有的方法会适得其反。

如果您只是替换数组的一个实例而不是整个数组原型上的方法，那还不错，但这仍然不是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T04:55:44.253

多么愚蠢的问题。如果我替换`push`为`add`，那么当我`push`从调用时会发生什么`add`？:< :< 我没有测试过，但我怀疑 while`Array.prototype.push`仍然可用，除非我`Array.prototype.push`明确使用，否则调用`add`将导致 mondo 无限循环。

# java - Maven：在 POM 不可解析的父节点上出现错误

> ID：15400787
> 
> 赞同：2
> 
> 时间：2013-03-14T03:40:21.983
> 
> 标签：java, ios, macos, maven

我在尝试运行 mvn 命令时遇到问题。这就是我正在做的事情：

```
 enaxromac:ios enaxro$ mvn -f TTTTT/pom.xml
[INFO] Scanning for projects...
[ERROR] The build could not read 1 project -> [Help 1]
[ERROR]   
[ERROR]   The project com.xxxxxx.xxxxxx.ios.xxxxxx:xxxx:2.0.0-SNAPSHOT (/Users/enaxro/projects/xxxxx/main/xxxxxx/xxx/xxxxxxx/pom.xml) has 1 error
[ERROR]     Non-resolvable parent POM for com.xxxxx.xxxxx.ios:root:2.0.0-SNAPSHOT: Failure to find com.xxxxx.maven.parent:legacy:pom:1.0.11 in http://repo.maven.apache.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced and 'parent.relativePath' points at wrong local POM @ com.xxxx.xxxxxx.ios:root:2.0.0-SNAPSHOT, /Users/enaxro/projects/xxxx/main/xxxxx/ios/pom.xml, line 3, column 13 -> [Help 2]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/ProjectBuildingException
[ERROR] [Help 2] http://cwiki.apache.org/confluence/display/MAVEN/UnresolvableModelException 
```

我的设置如下：

```
enaxromac:ios enaxro$ mvn --version
Apache Maven 3.0.5 (r01de14724cdef164cd33c7c8c2fe155faf9602da; 2013-02-19 08:51:28-0500)
Maven home: /usr/share/maven
Java version: 1.6.0_37, vendor: Apple Inc.
Java home: /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home
Default locale: en_US, platform encoding: MacRoman
OS name: "mac os x", version: "10.7.5", arch: "x86_64", family: "mac" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-04T00:40:45.673

检查您的 settings.xml 文件。它应该在

```
<Userdir>/.m2 
```

存储库目录旁边的目录。这是我们得到不可解决的父错误的主要原因之一。此外，对于其他可能的解决方案，请查看这篇文章：http: [//java.dzone.com/articles/mavens-non-resolvable-parent](http://java.dzone.com/articles/mavens-non-resolvable-parent)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T04:06:46.947

您的父 Pom 正在查看默认的 maven 存储库。您需要更改您的 settings.xml 并在此处添加存储库。

# android - Web 服务 (ASP.NET) 和 android 应用程序 (API) 可通话性

> ID：15400789
> 
> 赞同：1
> 
> 时间：2013-03-14T03:40:46.603
> 
> 标签：android, asp.net, ajax, api, rest

我正在研究一个我目前感兴趣的副项目，它有一个安卓手机的附件，可以扫描指纹并在在线数据库上注册/验证它们。

我想要一个登录系统，以便用户可以访问他们的数据库，并且我已经确定了一个名为 Source AFIS 的优秀开源识别程序。

我在编写 android 应用程序或使用 Source AFIS 创建程序时没有太多问题，但我无法将我的头脑围绕在两者的连接上。

通过研究，我认为最好的方法是为应用程序构建一个 REST API，但由于我希望 Web 服务部分运行程序并返回结果，所以我倾向于用 ASP.NET AJAX 编写它Web 服务，如果是这种情况，是否仍然可以构建一个可以轻松与 Web 服务交互的 REST API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T04:01:03.923

您的 Android 应用程序可以像 Web 浏览器、Web 浏览器中的 JavaScript 以及任何其他应用程序一样发出 HTTP 请求。您只需要在`AndroidManifest.xml`文件中声明一个权限：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

查看[HttpURLConnection](http://developer.android.com/reference/java/net/HttpURLConnection.html)的文档，这是 Android 2.3 及更高版本的推荐类。您可以使用它向任何 URL 发出 GET 和 POST 请求，包括您的 ASP.NET 后端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T03:55:29.887

您可以`ksoap`为此目的使用库，更多帮助请访问[http://www.sacoskun.com/2010/02/sumption-net-web-services-via-ksoap_07.html](http://www.sacoskun.com/2010/02/consuming-net-web-services-via-ksoap_07.html)

# lua - 检测电晕中的物体触摸

> ID：15400792
> 
> 赞同：0
> 
> 时间：2013-03-14T03:40:58.780
> 
> 标签：lua, coronasdk

在一个类中，我有 2 个“按钮”，它们正在调用 2 个类，如下所示：

```
btn1 = display.newImage("1.png")
btn2 = display.newImage("2.png")
btn1:addEventListener("touch", onSceneTouch)
btn2:addEventListener("touch", onSceneTouch2) 
```

问题在于这 2 个方法（onSceneTouch、onSceneTouch2）做同样的事情。唯一的区别是它根据触摸的按钮设置一个标志。我的方法如下所示：

```
function onSceneTouch(  event )
//do something here     
end 
```

我试过搜索，发现[这篇文章](http://www.coronalabs.com/blog/2012/07/24/detecting-object-and-screen-taps/)并尝试关注它。我向按钮添加了一个 id 并在我的方法上调用它们，但 id 为 nil。如果我尝试为按钮设置一个名称，而不是像：btn1.name = "name" 并在我的方法上调用 self.name 但当然，该名称返回“touch”。我如何告诉我的方法触摸了哪个按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T05:38:12.680

根据您链接到的文章，您的代码应如下所示：

```
function onSceneTouch(self, event)
  local button_id = self.id
  --do something here     
end
btn1 = display.newImage("1.png")
btn2 = display.newImage("2.png")
btn1.id = 'Button1'
btn2.id = 'Button2'
btn1.touch = onSceneTouch
btn2.touch = onSceneTouch
btn1:addEventListener("touch")
btn2:addEventListener("touch") 
```

它不起作用吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T01:58:28.937

我知道答案 1 的示例应该可以正常工作，但它比执行函数侦听器而不是表侦听器要多一些工作。我会这样写：

```
function onSceneTouch(event)
    local target = event.target  -- this is the actual button that was touched.
    if event.phase == "ended" then
         -- do your work here 
         print(target.id) -- prints "Button1" or "Button2"
    end
    return true -- important!
end

btn1 = display.newImage("1.png")
btn2 = display.newImage("2.png")
btn1.id = 'Button1'
btn2.id = 'Button2'
btn1:addEventListener("touch", onSceneTouch)
btn2:addEventListener("touch", onSceneTouch) 
```

同样的事情不同的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-18T13:53:00.897

`enter code here`使用单个事件侦听器并使用唯一名称识别谁调用它，例如

```
 function onSceneTouch(  event )
        local objectName=event.target.name    
        if objectName==1 then
            flag1=true
        else
            flag2=true 
        end

    end

btn1 = display.newImage("1.png")
btn1.name=1

btn2 = display.newImage("2.png")
btn1.name=2

btn1:addEventListener("touch", onSceneTouch)
btn2:addEventListener("touch", onSceneTouch) 
```

# php - Zend Framework 2 TableGateway getAdapter 需要接口

> ID：15400804
> 
> 赞同：0
> 
> 时间：2013-03-14T03:42:28.603
> 
> 标签：php, zend-framework2, adapter

嗨，我是 Zend Framework 2 的新手，这行代码有问题：

```
$sql = new Sql($this->tableGateway->getAdapter()); 
```

如果我使用 Phpunit 进行测试，我会收到错误

```
Argument 1 passed to Zend\Db\Sql\Sql::__construct() must implement interface 
Zend\Db\Adapter\AdapterInterface, null given, called in C:\xampp\htdocs\zend2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:28:58.543

检查是否设置了适配器。

`var_dump(get_class($this->tableGateway->getAdapter()));`

还有你怎么申报的`$this->tableGateway`？

# ruby-on-rails - 给定一个具有多条记录的对象，如何确定每个字段的计数？

> ID：15400805
> 
> 赞同：1
> 
> 时间：2013-03-14T03:42:37.607
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

给定 rails 对象@messages，它联系以下内容：

```
<Message id: 6, sender_id: 2, message: "123">
<Message id: 61, sender_id: 2, message: "stuff abc">
<Message id: 631, sender_id: 2, message: "hello world">
<Message id: 3, sender_id: 4, message: "hello world"> 
```

如何确定每个唯一 sender_id 的计数。输出含义：

```
2 | 3
4 | 1 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T03:49:43.550

您可以使用`count`

```
@messages.count(:id, group: :sender_id) 
```

这将输出一个哈希

```
{ 2 => 3, 4 => 1 } 
```

如果你需要像你的问题一样输出它

```
@messages.count(:id, group: :sender_id).each do |sender_id, count|
  puts "#{sender_id} | #{count}"
end 
```

# ruby-on-rails-3 - 如何在所有图像标签中附加/替换 alt/title 属性？

> ID：15400807
> 
> 赞同：0
> 
> 时间：2013-03-14T03:43:01.623
> 
> 标签：ruby-on-rails-3, rack

说我有一个像这样的动作模板

```
# home/index.html.erb
<%= img_tag "logo.gif" %> 
```

如果我想为其添加 alt/title 属性，我可以这样做

```
# home/index.html.erb
<%= img_tag "logo.gif", alt: "alt!!", title: "title!!" %> 
```

但我有 1000 个图像标签，我不想改变每一个。

然后我想到在从服务器输出之前使用机架中间件并修改图像标签。 [http://railscasts.com/episodes/151-rack-middleware?view=asciicast](http://railscasts.com/episodes/151-rack-middleware?view=asciicast)

```
doc = Nokogiri.HTML(@response.body)
doc.search("img").each do |tag|
  [:alt, :title].each{|attribute| tag[attribute] = "changed!!" }
end 
```

但是当我关注 railscast 剧集时，它**会将**整个主体附加到原件的顶部，而不是**替换**它。

我在机架上做错了吗，还是有更聪明的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T11:10:04.580

更新的答案：

```
# /config/initializers/image_tag_helper.rb

module ActionView
  module Helpers
    module AssetTagHelper
      def image_tag(source, options={})
        options[:src] = path_to_image(source)
        options[:alt] = "Default Alt" unless options.has_key?(:alt)
        options[:title] = "Default Title" unless options.has_key?(:title)
        tag(:img, options)
      end
    end
  end
end 
```

这会覆盖`image_tag`帮助器方法来设置默认值`alt`和`title`属性。

# r - 将函数的输出（具有多个输出）存储在矩阵中

> ID：15400812
> 
> 赞同：0
> 
> 时间：2013-03-14T03:43:43.537
> 
> 标签：r

我有一个数据集，分为 20 个组。存储每组数据（2 列数据）的矩阵存储在一个列表中，以便我可以在循环中对每个集合执行函数。我想将可能在另一个矩阵中运行的任何函数的输出存储起来。

例如，如果我在所有 20 个组上运行 fitdistr()，我希望函数的输出存储在一个矩阵中，这样我就可以调用 distribution[1] 来调用第 1 组的结果。我尝试了以下：

```
distribution<-ls()

for(i in (1:20))
  { distribution[[i]]<-fitdistr(as.numeric(data[[i]]$Column2,"normal") } 
```

这成功地存储了输出，我可以调用：

```
distribution[1] 
```

问题是 fitdistr() 会产生 2 列数据 - 平均值和标准差。我检查了我不能调用给定点的平均值：

```
names(distribtuion)
"NULL" 
```

所以我显然不能调用 get 方法，比如：

```
distribution[1]$mean 
```

我将寻找均值和标准差（以及其他分布的其他参数）的趋势，所以如果可能的话，我希望将 fitdistr() 的结果以某种方式存储在矩阵中。即使我只能以某种方式调用平均值，在运行该函数时，我也可以创建一个空向量并将其填充到一个循环中，然后重复标准偏差。

我考虑过创建一个足够大的空矩阵来存储数据（因此它将是 20 行，每组 1 行，2 列，每个计算值 1）。我仍然不确定我将如何规定我希望将计算的平均值存储在第 1 列中，并将计算的标准偏差存储在第 2 列中。同样，这是一次仅向函数询问其多个输出中的一个的问题.

我还研究了其中一个应用功能，但这些似乎不适合我正在做的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T03:50:46.543

ls() 是一个列出给定环境中对象的函数。它返回一个字符向量。

你（可能）的意思是拥有`list()`.

但是你会在一个循环中增加你的列表。这是R地狱的第二圈。

而是使用`lapply`适当的功能（很难说出您想要`as.numeric`去哪里，但在您的示例中不正确）。

就像是..

```
distribution <- lapply(data, function(x) fitdistr(as.numeric(x[['Column2']]),"normal")) 
```

# php - codeigniter captcha helper，当IP地址是动态的时如何将数据保存在数据库中？

> ID：15400819
> 
> 赞同：0
> 
> 时间：2013-03-14T03:44:11.233
> 
> 标签：php, codeigniter, captcha, helper

嗨，我正在使用**codeigniter 验证码**助手，我使用了本指南。

[https://www.codeigniter.com/user_guide/helpers/captcha_helper.html](https://www.codeigniter.com/user_guide/helpers/captcha_helper.html)

但每次我输入的**验证码都不**正确。

我检查了这个查询。

```
// Then see if a captcha exists:
$sql = "SELECT COUNT(*) AS count FROM captcha WHERE word = ? AND ip_address = ? AND captcha_time > ?";
$binds = array($_POST['captcha'], $this->input->ip_address(), $expiration);
$query = $this->db->query($sql, $binds);
$row = $query->row(); 
```

然后我检查了我的`$this->input->ip_address()`，每次它都会变化，这就是为什么我无法获得正确的数据，我尝试使用会话，但服务器不保存会话，我现在如何检查验证码，请帮助，提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T04:10:10.070

您可以尝试创建一个随机令牌并将其存储在数据库中，然后将其传递给客户端，让客户端将其传回并将其与您存储在数据库中的令牌进行比较。

# ios6 - 如何处理 UINavigationControllers 和 UITabBarControllers iOS 6.1

> ID：15400827
> 
> 赞同：0
> 
> 时间：2013-03-14T03:45:21.473
> 
> 标签：ios6, uinavigationcontroller, uitabbarcontroller, uibarbuttonitem, uicollectionview

我需要一个很好的解释，如何使用 StoryBoards 处理 iOS6.1 上的**UINavigationControllers**和**UITabBarControllers**。

1.  当我加载我的应用程序（第一个 ViewController）时，我需要 if（FB 登录 = 成功）它会自动跳转到第二个 ViewController。在这里我想我不能使用`UINavigationController`like root，苹果的HIG不喜欢它。 ![图 1](../Images/0a43a0d086b011eabb96b3d5d183dd9b.png)
2.  我需要一个`UITabBarController`连接到 3的`UICollectionViewControllers`（每个选项卡一个）。我必须把`UITabBarController`like root？如果是，我该如何处理它们之间的其他 Viewontroller？像这样： ![图 2](../Images/71569b793c450ce16fb7e18f240fcf9d.png)
3.  我需要每个 CollectionViewController 上的自定义 BarButtonItem（如您可以在图像 2 上看到的“全部删除”），我需要`UINavigationController`为每个控件使用一个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T20:03:35.070

假设您很乐意使用 unwind segues（如果没有的话，有很多方法可以不用）。

> 1 当我加载我的应用程序（第一个 ViewController）时，我需要 if（FB 登录 = 成功）它会自动跳转到第二个 ViewController。在这里我想我不能使用像 root 这样的 UINavigationController，苹果的 HIG 不喜欢它。

您的第一个 VC（我们称之为 loginVC）..
- 不应包含在导航控制器中。
- 应设置为应用程序的 initialViewController

你的第二个 VC（让我们称之为你的 startVC）
——应该包含在导航控制器
中——在导航控制器的身份检查器中，分配一个故事板 ID：`@"InitialNavController"`

在您的 App Delegate 中，让我们有一个`loggedIn`BOOL 属性：

```
@property (nonatomic, assign) BOOL loggedIn; 
```

现在，在您的 LogInViewController 中...

`viewDidAppear`检查我们是否已经登录，如果是，请立即导航到您的 startVC ：

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    if ([(AppDelegate*)[[UIApplication sharedApplication] delegate] loggedIn]) {
        UINavigationController* navController = 
           [[self storyboard] instantiateViewControllerWithIdentifier:@"InitialNavController"];
        [self presentViewController:navController
                           animated:NO
                         completion:nil];
    }
} 
```

重要的是，将其放在 viewDidAppear 中，而不是（例如）在 viewDidLoad 中 - 除非初始视图正确初始化并显示在屏幕上，否则 segue 将不起作用。

做一个 unwind Segue（并在`loginVC`'s中声明它`@interface`）......如果用户注销，loginVC 将是目标 VC。

```
- (IBAction)unwindOnLogout:(UIStoryboardSegue *)segue 
{
    [(AppDelegate*)[[UIApplication sharedApplication] delegate] setLoggedIn:NO];

} 
```

（*更正 - 删除了这一行：*
`[[self presentedViewController] dismissViewControllerAnimated:YES completion:nil];`
*我们不需要解雇，因为 segue 已经在幕后完成了。这是多余的并记录错误消息*）

在其他视图控制器中，您可以在适当的地方创建一个“注销”按钮。按住 CTRL 键从该按钮拖动到情节提要中 ViewController 底部的“退出”符号，您将能够选择此转场作为展开转场。

> 2 我需要一个连接到 3 个 UICollectionViewControllers 的 UITabBarController（每个选项卡一个）。我必须把 UITabBarController 像 root 一样？如果是，我该如何处理它们之间的其他 Viewontroller？像这样：

我认为您正在尝试弄清楚 tabBarController 与上一个 viewController (startVC) 中的 NavigationController 的关系。答案是，它不应该——你真的不想将 Tab Bar VC 嵌入到以前的 Nav Controller 中，因为它会为 Tab Bar 的子 viewControllers 创建奇怪的情况。

从 startVC 到 tabBarVC 的导航应该通过模态 segue，而不是 push segue。

您可以在 startVC 中进行另一个展开 Segue 以方便从 tabBarController 的 viewControllers 中返回：

```
- (IBAction)unwindToInitialNavFromModal:(UIStoryboardSegue *)segue {

} 
```

（*更正 - 删除了这一行：*   `[[self presentedViewController] dismissViewControllerAnimated:YES completion:nil];`   *此方法不需要任何内容​​来执行解雇*）

> 3 我需要每个 CollectionViewController 上的自定义 BarButtonItem（如您在图像 2 上看到的“全部删除”），我需要为每个 CollectionViewController 使用一个 UINavigationController？

默认情况下，您不会在 tabBarVC 中获得导航栏。

您可以提供两种方式之一
- 将每个子 viewController 嵌入到它自己的导航控制器中；
- 手动将导航栏拖到每个子视图控制器的场景中。

两者都可以，这实际上只取决于您是否想要导航到其他 ViewController。

然后，您可以在左侧或右侧添加 barButtonItem 以连接到 initialVC 的展开 segue（按住 CTRL 键拖动到“退出”符号）。

![在此处输入图像描述](../Images/b9224944663bfe9d1358f467bf7fec0f.png)

# c# - 删除客户端脚本上的只读属性时没有从 TextBox 返回值

> ID：15400828
> 
> 赞同：0
> 
> 时间：2013-03-14T03:45:22.520
> 
> 标签：c#, asp.net

最初，我有一个带有属性 readonly = true 的文本框。当我使用 asyncFileUpload OnClientUploadCompleted 时，我成功地删除了我的 asp 文本框（客户端）上的只读属性。但是，当我尝试从服务器端的文本框中检索值时，它返回一个空字符串或 null，即使它有一个值。这是客户端脚本

```
<script type="text/javascript" language="javascript">

    function OnClientUploadCompleteFn(){document.getElementById('ctl00_ContentPlaceHolder1_txtSponsorFileDesc').removeAttribute('ReadOnly');
    }
</script>

<asp:TextBox ID="txtSponsorFileDesc" runat="server" MaxLength="100" TextMode="MultiLine" Height="70px"  style="resize:none;"></asp:TextBox> 
```

这是一个错误还是我做错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T03:54:22.287

我的猜测是 ASP.NET 没有任何价值，因为就它而言（在服务器端）它仍然是只读的。我建议不要对 ASP.NET 中的 ReadOnly 属性做任何事情，并将其完全保留在客户端上。当页面准备好时，使用 JQuery 将其设置为只读。

```
$(document).ready(function() {
    $("#textBox").attr('readonly','readonly');
}); 
```

然后在适当的时候在客户端激活它：

```
$("#textBox").removeAttr('readonly'); 
```

# python - python找不到GL

> ID：15400830
> 
> 赞同：0
> 
> 时间：2013-03-14T03:45:33.287
> 
> 标签：python, opengl

尝试`pyglet1.2alpha1`在 FreeBSD 下`python3.3`在 amd64 机器上使用，我得到了

```
$ python ~/.local/lib/python3.3/site-packages/pyglet/gl/gl_info.py

Traceback (most recent call last):
  File "~/.local/lib/python3.3/site-packages/pyglet/lib.py", line 111, in load_library
    lib = ctypes.cdll.LoadLibrary(name)
  File "/usr/local/lib/python3.3/ctypes/__init__.py", line 431, in LoadLibrary
    return self._dlltype(name)
  File "/usr/local/lib/python3.3/ctypes/__init__.py", line 353, in __init__
    self._handle = _dlopen(self._name, mode)
OSError: Shared object "GL" not found, required by "python"

During handling of the above exception, another exception occurred:
[…]
  File "~/.local/lib/python3.3/site-packages/pyglet/lib.py", line 118, in load_library
    if ((self.linux_not_found_error not in o.message) and
AttributeError: 'OSError' object has no attribute 'message' 
```

我已经通过运行（工作）测试了我的 Mesa 安装`glxgears`，我尝试安装`PyOpenGL`以进行比较（这不起作用，因为它取决于 PIL，它不适合 python3.3），并且只是为了确保我在`python3.3`之后重新安装安装`mesa-demos`and `freeglut`，仍然没有变化。

在`python2.7`，我得到同样的错误

```
OSError: Shared object "GL" not found, required by "python2" 
```

（没有问题`During handling of the above exception, another exception occurred`），也在安装之后`PyOpenGL`（按预期工作）。

这里有什么问题？怎么`pyglet`去上班？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:10:12.987

各种 python 文件附带`pyglet`并尝试加载外部资源是否在 linux 上运行时显式测试。因此，他们不会在 FreeBSD 上评估正确的东西。在下面列出的文件中替换为时，它似乎可以`sys.platform.startswith('linux')`工作。`sys.platform.startswith('linux') or sys.platform.startswith('freebsd')`

```
pyglet/lib.py
pyglet/app/base.py
pyglet/gl/__init__.py
pyglet/image/codecs/__init__.py
pyglet/input/__init__.py
pyglet/media/drivers/openal/__init__.py 
```

# ios - iOS - 在后台运行的应用程序可以将触摸/手势事件发送到前台的另一个应用程序吗？

> ID：15400835
> 
> 赞同：1
> 
> 时间：2013-03-14T03:46:10.677
> 
> 标签：ios, background-process, gestures, touch-event

我被要求开发一个应用程序，该应用程序将记录并稍后将触摸和手势“回放”到另一个在前台运行的应用程序上。

根据我的经验和知识，除非两个应用程序都设置为通过通知或其他方法在它们之间发送/接收数据，否则这是不可能的。此外，将应用程序及其数据暴露给任何人将是一个巨大的风险。

我 99% 确定这是不可能的，但只是好奇是否有其他人遇到过类似的事情（或明确指出这是被禁止的文档）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T03:47:51.807

不，不可能，没有办法，甚至不要尝试。

扩展答案，如果这在越狱手机上运行.......

是的......但祝你好运，

检查 Saurik 的 Veency 代码以获得此类功能，它必须进行重大重构，但基本上它允许水龙头的虚拟化。

[https://github.com/iceNuts/TouchTest](https://github.com/iceNuts/TouchTest)

[http://gitweb.saurik.com/veency.git](http://gitweb.saurik.com/veency.git)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T05:25:50.170

如果你想在你的 iPhone 中访问另一个应用程序，你可以设置 url 方案参数等等。你可以在你的 url 中添加回调，然后你可以返回你的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-19T00:09:31.643

使用 facebook 的 idb 实际上是可能的： [https ://github.com/facebook/idb/](https://github.com/facebook/idb/)

正如它所说：远程自动化。idb 有一个在 macOS 上运行的“伴侣”和一个可以在任何地方运行的 python 客户端和 cli。这支持诸如数据中心内的“设备实验室”或将命令散播到大量 iOS 模拟器等场景。

由于 facebook 停止对 WebDriverAgent 的支持，这是我们现在拥有的最佳选择

# ruby-on-rails - # 的未定义方法“标题” 我正在尝试为上一篇文章和下一篇文章创建链接。我不使用的原因will_paginate是因为我不想使用“Previous”文本，而是希望将其作为帖子的标题（即 post.title）。 为此，我遵循了另一个答案，并在我的帖子模型中创建了以下关系： def pre 问问题 问问题 2013-03-14T03:46:35.483 710 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我正在尝试为上一篇文章和下一篇文章创建链接。我不使用的原因will_paginate是因为我不想使用“Previous”文本，而是希望将其作为帖子的标题（即 post.title）。 为此，我遵循了另一个答案，并在我的帖子模型中创建了以下关系： def previous Post.where(["id < ?", id].last) end def next Post.where(["id < ?", id].first) end 这就是我的_posts部分。现在我保留 HTML ，因为它具有古怪的样式，而且我不确定如何在 railslink_to标记中包含图像和跨度。 <% if post.previous %> [![](img/arrow_red_right.png) <%= post.previous.title %> ](#) <% end %> 我得到错误： undefined method `title' for # <activerecord::relation:0x007f8145616250>我猜这与我之前在 Post 模型中定义的方式有关。帮助表示赞赏！ 如何让我的 WCF 服务接受内容类型为“text/xml”的肥皂消息？ 如何让 WCF 服务接受内容类型为“text/xml”而不是“application/soap+xml”的肥皂消息。我必须在 SSL 上托管服务。因此，我将 wsHttpBinding 与安全模式“传输”一起使用。因为我使用wsHttpBinding，所以我认为请求的内容类型被强制为“application/soap+xml”。我在这里错过了什么吗？我在做什么错？ ruby-on-railsruby-on-rails-3 4 1 回答 1 This answer is useful 4 您需要修复方法中的括号:) def previous Post.where("id < ?", id).last end def next Post.where("id > ?", id).first end 于 2013-03-14T03:51:30.910 回答 Related 2 asp.net - ASP.net 中的标记 5 security - 暴力破解 PBKDF2 的速度有多快？ 1 javascript - 如何使用 Impress.js 获得完整、无缝的旋转？ 1 c# - 为什么我在pictureBox中得到带有白色背景的大红色X而不是动画gif？ 0 java - Facebook 在墙上发布文本 - 访问令牌始终为 NULL 1 ruby-on-rails - 在一对一关系上创建多个对象 3 javascript - 设置简单倒数计时器时出现问题 2 c++ - 为什么我们只能在类或函数（C++）中使用“静态”？ 2 ruby-on-rails - Ruby on Rails - 如何正确映射和链接到新控制器？ 3 java - 什么功能参数 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</activerecord::relation:0x007f8145616250>

> ID：15400839
> 
> 赞同：0
> 
> 时间：
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试为上一篇文章和下一篇文章创建链接。我不使用的原因`will_paginate`是因为我不想使用“Previous”文本，而是希望将其作为帖子的标题（即 post.title）。

为此，我遵循了另一个答案，并在我的帖子模型中创建了以下关系：

```
 def previous
    Post.where(["id < ?", id].last)
  end

  def next
    Post.where(["id < ?", id].first)
  end 
```

这就是我的`_posts`部分。现在我保留 HTML ，因为它具有古怪的样式，而且我不确定如何在 rails`link_to`标记中包含图像和跨度。

```
 <% if post.previous %>
            <a href="#" class="action-left">
              <img src="img/arrow_red_right.png">
              <span><%= post.previous.title %></span>
            </a>
            <% end %> 
```

我得到错误：

```
undefined method `title' for #<ActiveRecord::Relation:0x007f8145616250> 
```

我猜这与我之前在 Post 模型中定义的方式有关。帮助表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T03:51:30.910

您需要修复方法中的括号:)

```
def previous
  Post.where("id < ?", id).last
end

def next
  Post.where("id > ?", id).first
end 
```

# .net - 如何让我的 WCF 服务接受内容类型为“text/xml”的肥皂消息？

> ID：15400841
> 
> 赞同：1
> 
> 时间：2013-03-14T03:46:44.923
> 
> 标签：.net, wcf, soap, ssl

如何让 WCF 服务接受内容类型为“text/xml”而不是“application/soap+xml”的肥皂消息。我必须在 SSL 上托管服务。因此，我将 wsHttpBinding 与安全模式“传输”一起使用。因为我使用wsHttpBinding，所以我认为请求的内容类型被强制为“application/soap+xml”。我在这里错过了什么吗？我在做什么错？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:14:17.433

是的，wsHttpBinding 确实假设 SOAP 消息传递。但是，如果您定义了自定义绑定，那么您可以将 SOAP 版本更改为“无”。它是文本编码器绑定元素中的一个属性。

这是一个例子。

[http://msdn.microsoft.com/en-us/library/aa738456.aspx](http://msdn.microsoft.com/en-us/library/aa738456.aspx)

如果您打算做很多这样的事情，那么您可能应该查看 ASP.NET Web API。它自动提供对 XML 和 JSON 格式的支持。您可以使用 WCF 来完成，但如果您的目标是构建 REST Web 服务，那么您会发现 ASP.NET Web API 更适合于此。

[http://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-serialization](http://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-serialization)

# arrays - 使用 Mongoose + NodeJS 发送数组以填充地理空间字段

> ID：15400843
> 
> 赞同：0
> 
> 时间：2013-03-14T03:47:07.297
> 
> 标签：arrays, node.js, mongoose, geospatial

我正在尝试将地理空间数组保存到架构中。这是我的架构（我使用的是 Moongose + Express + NodeJS）：

```
var Route = new schema({
    route: String,
    time: Number,
    distance: Number,
    geo: {type: [Number], index: '2d'},
    created: { type: Date, default: Date.now }
}, {collection: 'route'});
var routeModel = mongoose.model('Route', Route); 
```

这是我发送以填充该模式的实例的数据示例：

```
{ 
    distance: 6.899893863658173,
    geo:[ [13.695901, -89.24937], [13.706500876975248, -89.24967010761316], 
          [13.711430396814366, -89.2561502488519] ],
    route: "Running route",
    time: 31
} 
```

第一个菜鸟问题是：有可能做我正在做的事情吗？在地理中发送数组数组？

这是我保存数据的方式：

```
socket.on('new_route', function (data){
   var route = new routeModel();
   route.route = data.route;
   route.time = data.time;
   route.distance = data.distance;
   route.geo = data.geo;
   route.save(function(err) {
       if (err) throw err;
       socket.emit("route_saved", {mensaje: "Well done!"});
       app.listen(8080);
   });  
}); 
```

如果我在地理上发送并清空数组，一切正常。但是，我收到以下错误

```
"Cast to number failed for "13.695901, -89.24937, 13.706500876975248, -89.24967010761316..." at path "geo". 
```

每当我在“geo”上发送一个数组（如上面发布的）时。

所以第二个问题，关于为什么我的阵列像一根大绳子一样受到威胁的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:19:54.197

Mongoose 不支持任何类型的数组 ( `[[Number]]`)。[将来](https://github.com/LearnBoost/mongoose/issues/1361)可能会支持它。

如果您的用例需要此模式，请使用允许临时结构但不提供更改跟踪或转换的混合类型。

```
new Schema({ geo: { type: Schema.Types.Mixed, index: '2d' }}) 
```

至于被视为大字符串的数组，猫鼬将无效参数转换为字符串，您观察到的是 javascript 如何将数组转换为字符串的工件。

```
var a = [3,4,5]
console.log(String(a)) // '3,4,5' 
```

# c - C中的简单字符串密码（const char困难）

> ID：15400847
> 
> 赞同：1
> 
> 时间：2013-03-14T03:47:17.623
> 
> 标签：c, pointers, constants, encryption

大家好，我创建了一个简单的小密码函数，它可以获取一个指向字符串的指针，然后将每个字节更改为其相应的加密字符，如果您通过该函数运行它，它会将文本转换回纯文本。

不过我的问题是我想将此函数与`const char *p = "...";`声明的变量一起使用，但这根本不可能，因为它们在运行时加载到内存中并且不可写。

这是我的功能。

```
char *Cipher(char *str)
{
    char *p = str;

    while(*p)
    {
        if(*p >= ' ' && *p <= 'O')
        {
            *p = ((*p + 48) % 127);
        }
        else if(*p >= 'P' && *p <= '~')
        {
            *p = ((*p - 48) % 127);
        }

        p++;
    }
    return str;
} 
```

它只需要一个指向字符串的指针，然后替换所有字符并将指针返回到字符串（这样我就可以在其他函数中使用它，例如 printf 或任何接受`char*`作为参数的函数）。

现在我知道为了使用这些`const char*`指针，我必须将它们复制到本地内存中以修改它们，但是如何返回指向新编码或解码的字符串的指针，以便我可以将它传递给其他函数。（最终目标是将它包含在一个简单的聊天程序中，我想把它称为类似的东西`send(sock, Cipher(PRE_HEADER), strlen(PRE_HEADER));`）而且我认为我这样做的方式不会是线程安全的，所以以防万一我决定将它与线程一起使用应用程序我必须进行哪些更改？

我也接受简单字符串替换密码的其他替代代码。

任何帮助，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T03:52:46.733

你将不得不使用

```
strncpy( str, All.c_str(), sizeof( str ) ); 
```

在一些辅助函数中或在您调用之前

```
send(sock, Cipher(PRE_HEADER), strlen(PRE_HEADER)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T04:03:44.437

您可以尝试将变量声明为`char`数组而不是`char`指针，例如：

```
char p[] = "..."; 
```

您将获得与以前几乎相同的效果-您可以传递`p`给一个函数，它会很好地衰减为一个指针-但不是存储在只读内存中，而是存储在`p`声明它的位置（或者在堆栈内部一个函数，或者如果您将其设为静态，则在程序的数据段中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T04:04:11.330

您可以使用复制`Cipher`函数中的字符串`strdup`并对其进行处理，并返回新字符串的指针。

就像是：

```
char *Cipher(char *str)
{
    char *new_string = strdup(str);
    char *p = new_string;

    while(*p)
    {
        if(*p >= ' ' && *p <= 'O')
        {
            *p = ((*p + 48) % 127);
        }
        else if(*p >= 'P' && *p <= '~')
        {
            *p = ((*p - 48) % 127);
        }

        p++;
    }
    /* return new_string not p */
    return new_string;
} 
```

此外，您必须如下更改调用方代码才能在`strlen`函数中使用新字符串。但是，如果您真的知道传递给的字符串长度`Cipher`将*始终*与返回字符串相同，那么您仍然可以使用`strlen(PRE_HEADER)`.

```
str = Cipher(PRE_HEADER);
send(sock, str, strlen(str)); 
```

# matlab - 计算函数的特定输出数

> ID：15400849
> 
> 赞同：1
> 
> 时间：2013-03-14T03:47:33.407
> 
> 标签：matlab

如果我有一个矩阵并且我想对矩阵的每一行应用一个函数。这个函数有三个可能的输出，x = 0、x = 1 或 x > 0。有几件事我遇到了麻烦......

1）输出 x = 1 或 x > 0 的情况不同，我不确定在编写脚本时如何区分两者。

2) 我的函数计数不正确？我认为这可能是我如何设置循环的问题？

这就是我想出的。从逻辑上讲，我觉得这应该可行（除了我所说的第一个问题的打嗝）

`[m n] = size(matrix);
a = 0; b = 0; c = 0;
for i = 1 : m
x(i) = function(matrix(m,:));
if x > 0
a = a + 1;
end
if x == 0
b = b + 1;
end
if x == 1
c = c + 1;
end
end`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T03:54:42.473

首先，您可能在第 4 行有一个错误。它可能应该`i`代替`m`.

```
x(i) = function(matrix(i,:)); 
```

您可以计算`a`,`b`并`c`退出循环：

```
a = sum(x>0);
b = sum(x==0);
c = sum(x==1); 
```

如果要区分`x==1`的`x>0`话可以用`sum(xor(x==1,x>0))`。

此外，在将双精度值与 0 和 1 进行比较时，您可能会遇到精度错误问题。

# python - scipy.optimize.curve_fit 无法拟合偏移的偏斜高斯曲线

> ID：15400850
> 
> 赞同：3
> 
> 时间：2013-03-14T03:47:34.283
> 
> 标签：python, scipy, gaussian

我正在尝试使用 scipy 的[curve_fit](http://docs.scipy.org/doc/scipy-0.15.1/reference/generated/scipy.optimize.curve_fit.html)函数来拟合倾斜和偏移的高斯曲线，但我发现在某些条件下拟合效果很差，通常让我接近或完全是一条直线。

下面的代码来自`curve_fit`文档。提供的代码是用于测试目的的任意数据集，但很好地显示了问题。

```
import numpy as np
from scipy.optimize import curve_fit
import matplotlib.pyplot as plt
import math as math
import scipy.special as sp

#def func(x, a, b, c):
#    return a*np.exp(-b*x) + c

def func(x, sigmag, mu, alpha, c,a):
    #normal distribution
    normpdf = (1/(sigmag*np.sqrt(2*math.pi)))*np.exp(-(np.power((x-mu),2)/(2*np.power(sigmag,2))))
    normcdf = (0.5*(1+sp.erf((alpha*((x-mu)/sigmag))/(np.sqrt(2)))))
    return 2*a*normpdf*normcdf + c

x = np.linspace(0,100,100)
y = func(x, 10,30, 0,0,1)
yn = y + 0.001*np.random.normal(size=len(x))

popt, pcov = curve_fit(func, x, yn,) #p0=(9,35,0,9,1))

y_fit= func(x,popt[0],popt[1],popt[2],popt[3],popt[4])

plt.plot(x,yn)
plt.plot(x,y_fit) 
```

当我将高斯从零移得太远（使用`mu`）时，问题似乎出现了。我已经尝试给出初始值，即使是那些与我的原始函数相同的值，但它并没有解决问题。对于 , 的值`mu=10`，`curve_fit`效果很好，但如果我使用`mu>=30`它不再适合数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T08:55:52.870

您可以`curve_fit`使用随机初始猜测多次调用，并选择误差最小的参数。

```
import numpy as np
from scipy.optimize import curve_fit
import matplotlib.pyplot as plt
import math as math
import scipy.special as sp

def func(x, sigmag, mu, alpha, c,a):
    #normal distribution
    normpdf = (1/(sigmag*np.sqrt(2*math.pi)))*np.exp(-(np.power((x-mu),2)/(2*np.power(sigmag,2))))
    normcdf = (0.5*(1+sp.erf((alpha*((x-mu)/sigmag))/(np.sqrt(2)))))
    return 2*a*normpdf*normcdf + c

x = np.linspace(0,100,100)
y = func(x, 10,30, 0,0,1)
yn = y + 0.001*np.random.normal(size=len(x))

results = []
for i in xrange(50):
    p = np.random.randn(5)*10
    try:
        popt, pcov = curve_fit(func, x, yn, p)
    except:
        pass
    err = np.sum(np.abs(func(x, *popt) - yn))
    results.append((err, popt))
    if err < 0.1:
        break

err, popt = min(results, key=lambda x:x[0])
y_fit= func(x, *popt)

plt.plot(x,yn)
plt.plot(x,y_fit)
print len(results) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T13:23:54.380

给出最小化的起点通常会产生奇迹。尝试给最小化器一些关于最大值位置和曲线宽度的信息：

```
popt, pcov = curve_fit(func, x, yn, p0=(1./np.std(yn), np.argmax(yn) ,0,0,1)) 
```

更改代码中的这一行`sigma=10`并`mu=50`生成 ![在此处输入图像描述](../Images/3a094029efaad8772255105a557ecc3e.png)

# opengl-es - LuaJIT 向量库

> ID：15400851
> 
> 赞同：0
> 
> 时间：2013-03-14T03:47:48.527
> 
> 标签：opengl-es, lua, luajit

我正在使用 LuaJIT 和 OpenGL ES 2.0 作为一种快速创建一些 3D 交互式场景的方法。

我一直在忙着重新发明轮子，制作自己的矢量库。我的问题是，还有其他人有这种事情的经验吗？那里有图书馆吗？是否有专门为 LuaJIT 构建的库（使用 LuaJIT 的 FFI）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T05:23:55.300

你可以看看这里： [https ://github.com/Wiladams/TINN/tree/master/src/graphics](https://github.com/Wiladams/TINN/tree/master/src/graphics)

math_matrix.lua 包含一个广义矩阵类。它本质上是不同矩阵类型的“模板”，包括“向量”类型，它们只是一维矩阵。

# database - 修改报表中的打印数据

> ID：15400853
> 
> 赞同：0
> 
> 时间：2013-03-14T03:47:56.327
> 
> 标签：database, winforms, sql-server-2005, reporting

我想为我的程序打印某些数据，但每次我运行程序时，它都会显示所有数据，而不是显示我要打印的特定数据。我该怎么做？谁能告诉我缓解我的问题的方法？

有没有办法在我的 DATA 中选择一个 DATA `DATABASE`？这样我就可以单独打印了。

我正在使用 Visual Studio 2010、Visual Basic 窗口窗体应用程序，我的数据库位于 SQL SERVER 2005 中。并显示我使用报告向导的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T03:13:25.180

我以前也遇到过同样的问题，我做了一些研究。我认为您应该使用“过滤和参数化”

这是[什么](http://www.youtube.com/watch?v=psLVbNx0GtU)

这应该可以帮助你。

# android - Android：我希望我的对话框使用模拟器默认主题；如何调用 setStyle() 函数

> ID：15400855
> 
> 赞同：0
> 
> 时间：2013-03-14T03:48:06.480
> 
> 标签：android, dialog

问题是，对话框的标题背景颜色在我的模拟器和我的真实手机上是不同的（每个制造商默认使用它自己的主题）。

所以我想明确指定我想使用正在使用模拟器的样式。

我想我可以做到

```
setStyle(style, theme) 
```

在 DialogFragment 内部，但我如何找出哪个样式/主题使用模拟器来构建 DialogFragment？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:04:13.987

在您的清单中使用默认手机主题。`Theme.DeviceDefault`

# c++ - 将文件中的信息拉入地图并需要覆盖重复值？

> ID：15400856
> 
> 赞同：0
> 
> 时间：2013-03-14T03:48:11.673
> 
> 标签：c++, map

嗨，所以我有一个家庭作业，除了最后一个要求外，我都完成了。我们从一个 txt 文件中提取数据，其中几个票房值是 0。我们不返回第一个实例 0，而是返回最后一个实例 0。下面是一段代码：

```
long long worldBoxOffice = movie.getWorldBoxOffice();
movieMap.insert(pair<long long, Movie>(worldBoxOffice, movie)); 
```

那么在将这对插入地图之后，我应该做什么？它会重载 [] 运算符吗？有点困惑，所以任何帮助表示赞赏。我没有发布更多代码，因为我不是在寻找代码，只是朝着正确的方向推动如何去做。谢谢。

注意：我们必须使用地图，不允许使用多地图等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T03:56:15.490

也许我误解了，但如果你只是`operator []`在读入数据时使用分配给地图，你最终会得到`0`你读入的最后一个实例，就像这个简单的例子：

```
#include <iostream>
#include <map>

int main()
{
   std::map<int,int>
    m ;

    m[0] = 1 ;

    std::cout << m[0] << std::endl ;

    m[1] = 2 ;

    m[0] = 3 ;

    std::cout << m[0] << std::endl ;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T03:57:44.910

由于`insert` [不替换](https://stackoverflow.com/questions/326062/in-stl-maps-is-it-better-to-use-mapinsert-than)现有密钥，因此您首先不应该使用它。在这样的（无效的）插入之后，没有任何东西可以取回您的数据。

您可以使用`[]`运算符：`movieMap[worldBoxOffice] = movie;`或以相反的顺序进行插入 - 向后读取文件。

# android - Nexus one 设备未显示在 DDMS 中

> ID：15400859
> 
> 赞同：0
> 
> 时间：2013-03-14T03:48:31.557
> 
> 标签：android, eclipse, debugging, ddms

我在我的 Google Nexus One 设备中启用了网络调试。设备已连接到 WiFi 网络。但设备未显示在 Eclipse DDMS 透视图中。

我怎样才能解决这个问题 ？

# inversion-of-control - 将 Autofac 用于 WebForms 和 n 层架构

> ID：15400863
> 
> 赞同：0
> 
> 时间：2013-03-14T03:49:25.107
> 
> 标签：inversion-of-control, webforms, autofac

我正在向现有的 Web 表单应用程序引入单元测试。我正在使用起订量和 Autofac。我试图将代码更改保持在最低限度，但需要实施单元测试。

所以我有一个表示程序集、一个业务层和一个数据访问层。我的业务层如下所示：

```
public class EmployeeBL
{
    public Employee SelectById(int id)
    {
        return new EmployeeDA().SelectById(id);
    }
} 
```

我的数据访问看起来像这样：

```
public class EmployeeDA
{
    // unitOfWork defined in the constructor

    public Employee SelectById(int id)
    {
        return unitOfWork.Employees.Where(e => e.id == id);
    }
} 
```

Autofac 的 webforms 程序集允许您声明公共属性并指定 web.config 设置以通过 HttpModule 自动注入依赖项。为了测试`EmployeeBL`，我对 web.config 进行了更改并声明`EmployeeDA`为属性：

```
// Modified for testing
[InjectProperties]
public class EmployeeBL
{
    // public property to allow Autofac property injection
    public IEmployeeDA EmployeeDA { get; set; }

    public Employee SelectById(int id)
    {
        return EmployeeDA.SelectById(id);
    }
} 
```

这适用于运行 webforms 应用程序，但问题是我需要独立于 webforms 实例对业务层进行单元测试。我想将`[InjectProperties]`属性保留在我的 上`EmployeeBL`，但我无法通过文档告诉我如何获得`EmployeeDA`它的属性注入。

```
public class EmployeeBLTest
{
    private static IContainer { get; set; }

    [TestInitialize]
    public void Initialize()
    {
        var builder = new ContainerBuilder();

        // Use my fake employeeDA for testing
        builder.RegisterType<FakeEmployeeDA>().As<IEmployeeDA>();

        // Something magical happens 
    }

    [TestMethod]
    public void SelectByIdTest(int id) { /* testing stuff */ }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T04:02:33.657

关于什么：

`builder.RegisterType<EmployeeDA>().AsSelf().PropertiesAutowired();`

见这里： [http ://code.google.com/p/autofac/wiki/PropertyInjection](http://code.google.com/p/autofac/wiki/PropertyInjection)

# html - Phonegap - 为什么我的 div 高度返回 0？

> ID：15400864
> 
> 赞同：0
> 
> 时间：2013-03-14T03:49:26.047
> 
> 标签：html, css, cordova, jquery-mobile

我的网站上有一些页面，我把它放在我所有的 html 代码中：

```
<div id="footer" data-role="footer" class="clearfix">
        <div id="footerMenu" class="ui-grid-d">
            <div class="ui-block-a footerBlock">
                <a href="index.html"><img src="images/global/bottom_menu/product_active.png" /></a>
            </div>
            <div class="ui-block-b footerBlock">
                <a href="favorite.html"><img src="images/global/bottom_menu/fav.png" /></a>
            </div>
            <div class="ui-block-d footerBlock">
                <a href="about.html"><img src="images/global/bottom_menu/about.png" /></a>
            </div>
            <div class="ui-block-e footerBlock">
                <a href="settings.html"><img src="images/global/bottom_menu/settings.png" /></a>
            </div>
          </div>
    </div> 
```

CSS：

```
#footerMenu {
    background-color:#23476E;
    position:fixed;
    left:0px;
    bottom:0px;
    width:100%;
    opacity:1 !important;
    display:block;
    z-index:1000;
}

#footerMenu img {
    margin: 0 auto;
    width:96%;
}

.footerBlock a{
    text-align:center;
    display:block;
} 
```

我的 JS：

```
$('#searchResultPage').live('pageshow', function(){
    console.log("height: " + $("#footer").height();
}); 
```

然后，我的应用程序将`index.html`作为第一页加载，我可以通过`$("#footer").height()`上述方法获得页脚高度。`about.html`但是，例如，当我尝试再次从 获取高度时，高度返回 0。

有人可以告诉我为什么高度返​​回 0 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T03:59:46.650

即使 document-ready 已经触发，图像也很可能尚未加载（我最近遇到了这个问题）。由于您没有提供图像尺寸，就浏览器所知，div 高度*为零*。

最简单的解决方案是在`<img...>`标签中包含图像大小。

# android - 我怎么知道视图在 Android 中处于触摸状态

> ID：15400868
> 
> 赞同：2
> 
> 时间：2013-03-14T03:49:51.077
> 
> 标签：android, touch-event

我怎么知道视图处于触摸状态。如果一个视图上有多个触摸点，我如何才能捕捉到最后一个触摸点的事件。请帮忙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T03:54:13.480

您可以覆盖[onTouchEvent()](https://developer.android.com/reference/android/view/View.html#onTouchEvent%28android.view.MotionEvent%29)在您的`View`. `ACTION_DOWN`将在放置第一个“指针”时给出。从那时起，您将获得`ACTION_POINTER_DOWN`或`ACTION_POINTER_UP`随着随后的手指被按下然后松开。然后，当最后一个指针/手指被释放时，您的视图将获得`ACTION_UP`. [这在MotionEvent 文档](https://developer.android.com/reference/android/view/MotionEvent.html)中有清楚的说明。

像这样的东西可能是你正在寻找的东西，只是`View`你正在使用的子类。

```
@Override
public boolean onTouchEvent(MotionEvent event)
{
    if(event.getAction() == MotionEvent.ACTION_DOWN)
        isTouching = true;
    else if(event.getAction() == MotionEvent.ACTION_UP)
        isTouching = false;

    return super.onTouchEvent(event);
} 
```

# iphone - 重用自定义UITableViewCell，如何获取每个单元格文本字段的文本进行保存？

> ID：15400870
> 
> 赞同：-2
> 
> 时间：2013-03-14T03:50:20.390
> 
> 标签：iphone, ios, uitableview, uitextfield

我有一个自定义`UITableViewCell`，它的 Nib 有一个标签、一个分隔符和一个`textfield`（非常像联系人应用程序电话号码单元格）。

我有一个详细的表格视图，它将这个自定义单元格用于很多行。我通过部分和行做一个切换案例，以编程方式设置单元格的标签和文本字段占位符。我想将文本字段文本设置为我`NSManagedObject`在`ViewWillDisappear`. 在不同行/部分的自定义单元格的文本字段中捕获文本的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T06:45:58.167

```
for(int i = 0; i < [tableView numberOfRowsInSection:0]; i++)
    {
        NSIndexPath *index = [NSIndexPath indexPathForRow:i  inSection:0];
        customTableCell *cell = (customTableCell *)[tableView cellForRowAtIndexPath:index];
        NSString *textFieldVal = [cell.textLabel text];
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T18:21:31.710

将控制器设置为文本字段的委托并在每个字段上设置不同的标签，然后我可以通过协议将字段的文本值设置为我的`NSMangedObjects`属性。`textFieldDidEndEditing`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T04:56:32.083

你设置的 textField 标签`indexpath.row`

```
UITableViewCell *theCellSelected = [tableview cellForRowAtIndexPath:[NSIndexPath indexPathForRow:row  inSection:0]];

resultlabl = (UITextField*)[theCellSelected.contentView viewWithTag:your_tag_number]; 
```

# css - 如何使 CSS 按钮中的文本仅在悬停时出现？

> ID：15400871
> 
> 赞同：3
> 
> 时间：2013-03-14T03:50:22.787
> 
> 标签：css, button

我在一个示例网站上制作了一些 CSS div 按钮，这些按钮用于侧边栏导航菜单。我只是想知道如何制作它，以便仅当鼠标悬停在按钮上时才会出现文本。

如果有一种方法可以将文本（例如：“单击此处！”）包含在 CSS 中仅用于 div 的悬停部分下，那将起作用，但我认为您不能这样做。如果我将它包含在 HTML 中，那么无论是否悬停，它都会显示出来。

示例网站在这里：[http ://www.arthiaravind.com/nursery/](http://www.arthiaravind.com/nursery/)

理想情况下，按钮应该是空白的，然后当它们悬停在上面时，它们会扩展并出现链接。

这是第一个按钮的代码：

```
.button1 {
    position: fixed;
    margin-top: 100px;
    margin-left: 730px;
    width:70px;
    height:50px;
    text-align:right;
    padding: 0px 50px 0px 0px;
    background:#75AD38;
    transition:width 2s;
    -moz-transition:width 2s; /* Firefox 4 */
    -webkit-transition:width 2s; /* Safari and Chrome */
    -o-transition:width 2s; /* Opera */
} 
```

这是悬停时的代码：

```
.button1:hover{ 
    width:200px;
} 
```

任何使我的代码更精简的建议也将不胜感激，因为我目前为五个按钮中的每一个都复制粘贴了此代码，我知道这很笨重，但我不知道如何使它们都成为相同类型的按钮，但是分别定位它们。

我也不知道为什么加载页面时按钮会扩展。这不应该发生。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T04:16:42.470

要使 CSS 按钮中的文本仅显示在 上`hover`，您可以使用 CSS`content`属性（您必须查找跨浏览器对此的支持）、使用 JavaScript，或者按照其他人的建议更改悬停时文本的颜色。这是一个解决前两个解决方案的 JS fiddle：

[http://jsfiddle.net/ABHgN/1/](http://jsfiddle.net/ABHgN/1/)

```
/*<div id="button1"></div>*/

#button1{
    width: 200px;
    height: 50px;
    line-height: 50px;
    text-align: center;
    background-color: green;
}

#button1:hover:before{
    content: "viaCSS ";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T03:59:42.793

一种可能的解决方案是将字体颜色设置为背景颜色，然后在悬停时更改它。这个小提琴演示了它：http: [//jsfiddle.net/LXxG3/](http://jsfiddle.net/LXxG3/)

在你的 CSS 添加字体颜色

```
.button1{
    background:#75AD38;
    color:#75AD38;
} 
```

和悬停颜色

```
.button1 hover{
    color:#fff;
} 
```

至于简化你的css，只需将样式应用于基本标签，即`button`，然后按类名单独样式。例如为两个按钮设置单独的背景颜色... **编辑**：将按钮更改为，`.baseButton`以便它可以用作按钮 div 的基类

```
/*style for all button tags */
.baseButton{
    width:70px;
    height:50px;
    margin-top: 100px;
    margin-left: 30px;
    text-align:right;
    padding: 0px 50px 0px 0px;
    background:#75AD38;color:#75AD38;
    transition:width 2s;
    -moz-transition:width 2s; /* Firefox 4 */
    -webkit-transition:width 2s; /* Safari and Chrome */
    -o-transition:width 2s; /* Opera */
}

/*individual styles */
.button1{
    background-color:#afa;
    color:#afa;
}
.button2{
    background-color:#faa;
    color:#faa;
} 
```

这将在 html 中使用：

```
<div class="baseButton button1">Your button</div> 
```

另一种方法是对单个按钮使用 id。

css

```
 /*individual styles */
#button1{background-color:#afa;color:#afa;}
#button2{background-color:#faa;color:#faa;} 
```

html

```
<div class="baseButton" id="button1">Your button</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T04:03:38.060

您可以更改文本的颜色`hover`

并将其置于正常状态，因为它不可见

```
 .button1 {
     position: fixed;
     margin-top: 100px;
     margin-left: 730px;
     width:70px;
     height:50px;
     text-align:right;
     padding: 0px 50px 0px 0px;
     background:#75AD38;
     color:#75AD38;   // same color as background
     transition:width 2s;
     -moz-transition:width 2s; /* Firefox 4 */
     -webkit-transition:width 2s; /* Safari and Chrome */
     -o-transition:width 2s; /* Opera */
}

.button1:hover {
    color:#fff ||#000 //like any suitable color 
} 
```

但这不是正确的方法

你也可以使用`text-indent`

或者我认为`content:"text";`像我们使用的那样悬停`:before`并且`:after` 也可以工作，但我不确定。

* * *

## 笔记：

这在可用性方面也不好，因为当用户必须悬停每个按钮以查看按钮的作用时，他们会感到恼火。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T05:49:51.010

这是一个快速示例，说明文本如何仅在使用 css 子组合器的悬停时显示

```
 <div>
  <p>text</p>
 </div>

/** CSS **/
* {
 margin: 0;
 padding: 0;
}

div {
 width: 60px;
 height: 40px;
 background-color: green;
 border: 1px solid #000;
}

p {
 text-align: center;
 color: #fff;
 vertical-align: middle;
 display: none;
 line-height: 40px;
}

div:hover > p {
 display: block;
} 
```

[jsfiddle](http://jsfiddle.net/w8KAB/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T04:42:56.990

我个人建议你不要这样做，因为它会影响使用体验。人们在搜索内容时可能会发现将鼠标悬停在每个按钮上很烦人。

但是，如果您仍然想继续，这里有一个工作[小提琴](http://jsfiddle.net/TDsouza/CTjXt/)

基本上像这样设计你的文字

```
.button1 p {
display:none; 
```

}

然后让它像这样在悬停时可见

```
.button1:hover p {
    display:inline; 
```

}

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-16T21:58:51.183

使用珍贵的 CSS 代码；

[http://jsfiddle.net/hassaan39/NheFj/](http://jsfiddle.net/hassaan39/NheFj/)

`I use the text visibility hidden, on hover visibility visible.`简直是最好的。

# sencha-touch - Sencha Touch 2：如何确定应用程序处于空闲状态？

> ID：15400874
> 
> 赞同：1
> 
> 时间：2013-03-14T03:51:08.557
> 
> 标签：sencha-touch, sencha-touch-2

我正在使用 Sencha touch 2 处理会话管理。如果应用程序空闲 x 分钟，我想显示会话超时消息。

我想以这样的方式实现它，如果应用程序上发生任何事件然后捕获它，以便可以得出应用程序没有空闲的结论。

如何观察应用程序中的事件？我认为 Observable 方法在这种情况下会有所帮助。有什么建议吗？

谢谢 Gendaful

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T03:46:18.867

我通过捕获 body 上的 touchstart、touchend 和 touchmove 事件来实现它。

```
var docBody = document.getElementsByTagName("body")[0];
docBody.addEventListener('touchstart touchend touchmove', function () {

alert(' Event has happened');

} 
```

谢谢

# java - 如何在 ANE 的 Java 中使用 R.resource？

> ID：15400878
> 
> 赞同：1
> 
> 时间：2013-03-14T03:52:11.780
> 
> 标签：java, air, jar

大家，对不起我的英语不好..

我想问“在ANE中管理资源的适当方法是什么”？？

我已经导出了 jar-library，并制作了 ANE，然后从 Air Mobile 调用。（当我从 Eclipse 导出时，我检查了 include-resource-option。）当我在设备上调试时，Java 的 R.resource 似乎被 R.resource air made 覆盖。

例如，我添加了 FREFunction 返回资源值。如果我引用并显示 string.app_name，它会显示 Air-Project 名称的 string.app_name。在我将 string.test 添加到 Java 中的资源后，然后从 apk 显示它，没有任何价值。

在 ANE 中管理资源的适当方法是什么。

参考： http: [//www.adobe.com/devnet/air/native-extensions-for-air/extensions/vibration.html](http://www.adobe.com/devnet/air/native-extensions-for-air/extensions/vibration.html)

```
public class Native_xxxxxxx implements FREFunction {

    private Resources res;

    public FREObject call(FREContext arg0, FREObject[] arg1) {

        try {

            Activity activity = arg0.getActivity();

            res = activity.getResources();

            return FREObject.newObject(res.getString(arg0.getResourceId("string.app_name ")));

            //return FREObject.newObject(res.getString(arg0.getResourceId("string.test"))) ;

            //return FREObject.newObject(res.getString(R.string.test));

        } catch ( Exception ex ) {

        }
        return null;

    }

} 
```

附加信息：

我意识到一件事，在解压缩 .jar 之后，它包含 res-folder，但在解压缩 .ane 之后，它不包含 res-folder。

我猜，这意味着 adt 命令无法包含 res 文件夹。

我的命令： adt -package -target ane ANExxx.ane ane.xml -swc ANExxx.swc -platform Android-ARM library.swf res Nativexxx.jar -platform default library.swf Nativexxx.jar

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-17T18:38:07.640

像这样创建一个构建文件夹：

```
/build
    /ane
        myANEInterface.swc
        catalog.xml
        extension.xml
        /Android-ARM
                    myANE.jar
                    library.swf
                    /res
                        resource.xml 
```

注意 res 文件夹有你的资源文件的副本。

然后从构建文件夹之外使用它，请注意最后的点：

```
adt -package -storetype PKCS12 -keystore ./mycert.p12 -storepass yourpassword -tsa none -target ane myANE.ane ./build/ane/extension.xml -swc ./build/ane/myANEinterface.swc -platform Android-ARM -C ./build/ane/Android-ARM/ . 
```

# api - 搜索没有艺术家 ID 的艺术家 Itunes Enterprise API

> ID：15400883
> 
> 赞同：0
> 
> 时间：2013-03-14T03:52:46.797
> 
> 标签：api, itunes, enterprise

我正在使用 itunes 企业 api，我正在尝试使用它来提取有关某些艺术家的信息。

阅读他们关于如何使用它的小指南，他们给出了一个示例 url

```
https://itunes.apple.com/artist/scritti-politti/id614113 
```

它返回我需要的确切数据，问题是我不确定在哪里可以找到艺术家 ID，有什么方法可以仅根据艺术家姓名进行搜索？或者根据艺术家姓名在某处搜索以找到艺术家 ID，然后在此 url 中使用它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:14:04.073

首先我使用了这个网址

```
http://ax.phobos.apple.com.edgesuite.net/WebObjects/MZStoreServices.woa/wa/itmsSearch?lang=1&output=json&country=US&term=rhianna&media=music&limit=1 
```

rhianna 可以用你正在查找的任何艺术家代替，

从中我可以从 ArtistLinkUrl 中提取艺术家 ID，然后在企业 api 中使用该艺术家 ID 发出请求。

# c++ - 如何用 C++ 中的引用替换指针？

> ID：15400891
> 
> 赞同：15
> 
> 时间：2013-03-14T03:53:28.863
> 
> 标签：c++, pointers, reference

“我敢肯定有几十个标题相同的问题。其中许多是重复的。我的也可能是重复的，但我找不到任何问题。所以我试着让它变得非常简洁、简短和简单。”

我有这样的层次结构：

```
class Shape {
public:
   virtual void virtualfunc()  { std::cout << "In shape\n"; }
};

class Circle: public Shape {
public:
   void virtualfunc()  { std::cout << "In Circle\n"; };
}; 
```

当我在指针的帮助下使用类时，函数会按我的预期调用：

```
int main() {
   Shape shape_instance;
   Shape* ref_shape = &shape_instance ;
   Circle circle_instance;
   Circle* ref_circle = &circle_instance;

   ref_shape = dynamic_cast<Shape*> (ref_circle);
   ref_shape->virtualfunc();
} 
```

这里程序调用`virtualfunc()`派生类的，结果自然是：`In Circle`

现在，我想摆脱指针，改用引用，并获得相同的结果。所以我做了一些简单的修改`main()`，看起来像这样：

```
int main() {
   Shape shape_instance;
   Shape& ref_shape = shape_instance;
   Circle circle_instance;
   Circle& ref_circle = circle_instance;

   ref_shape = dynamic_cast<Shape&>(ref_circle);
   ref_shape.virtualfunc();
} 
```

但是这一次，程序调用了`virtualfunc()`基类，结果是：`In Shape`

如果您让我知道我缺少哪些引用概念以及如何更改 main() 中的引用以获得我在指针版本中得到的结果，我将不胜感激。

谢谢你

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-14T04:13:06.123

不能重新安装引用。一旦你在初始化中初始化了引用，它就变成了被引用对象的别名，无法与之区分开来。后一个任务：

```
ref_shape = dynamic_cast<Shape&>(ref_circle); 
```

真正意思：

```
shape_instance = dynamic_cast<Shape&>(ref_circle); 
```

另一方面，您可以绑定对对象的新引用（并且您不需要`dynamic_cast`, 因为从引用到派生到对基的引用的转换是隐式的）：

```
Shape & another_ref = ref_circle;
another_ref.virtualfunc();          // Dispatches to Circle::virtualfunc 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-14T04:05:56.520

这就是你`Circle`变成`Shape`.

```
ref_shape = dynamic_cast<Shape&>(ref_circle);
//        ^ here
ref_shape.virtualfunc(); 
```

`ref_shape`已被定义为对 的引用`shape_instance`。

您**没有**复制引用本身，因为无法重新分配引用。您正在将实际对象复制到`Shape`对象。它被存储在`shape_instance`.

您可以通过尝试此代码来验证这一点。它将打印`In Circle`.

```
dynamic_cast<Shape&>(ref_circle).virtualfunc(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-14T04:00:08.787

您应该执行以下操作：

```
#include <iostream>

 class Shape {
  public:
   virtual void virtualfunc()  { std::cout << "In shape\n"; }
 };

 class Circle: public Shape {
   public:
   void virtualfunc()  { std::cout << "In Circle\n"; };
 };

 int main() {
    Shape shape_instance;
    //Shape& ref_shape = shape_instance;
    Circle circle_instance;
    Circle& ref_circle = circle_instance;

    Shape& ref_shape = dynamic_cast<Shape&>(ref_circle);
    ref_shape.virtualfunc();
} 
```

它按照您的预期在 Circle 中输出。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T03:57:34.377

如果我正确理解您要实现/显示的内容（即动态虚函数绑定），也许这段代码会有所帮助：

```
#include <iostream>
using namespace std;

class Shape {
  public:
    virtual void virtualfunc()  { std::cout << "In shape\n"; }
};

class Circle: public Shape {
  public:
    void virtualfunc()  { std::cout << "In Circle\n"; };
};

int main() {
  Circle circle_instance;

  // don't care what kind of Shape
  Shape &someShape = circle_instance;

  someShape.virtualfunc();
} 
```

在这里您可以看到`someShape`可以绑定到`Shape`或任何派生类，并且将在实际**动态类型**上调用虚函数。这将打印`In Circle`. 证明：http: [//ideone.com/A1UvrR](http://ideone.com/A1UvrR)

没必要`dynamic_cast`

# java - 服务器没有启动

> ID：15400895
> 
> 赞同：0
> 
> 时间：2013-03-14T03:54:12.377
> 
> 标签：java, struts2, tomcat7

我正在尝试在 struts2 中创建应用程序，所以我已经下载了 apache-tomcat7.0，eclipse juno 并且我正在尝试在 eclipse juno 中使用这个服务器，我已经在 eclipse 中正确配置它并且它在 eclipse 中启动很好，但是当我`localhost:8080`在我的服务器在 Eclipse 中启动后，我在我的网络浏览器中输入，然后我显示错误

HTTP 状态 404 - /

类型状态报告

信息 /

描述 请求的资源不可用。

Apache Tomcat/7.0.35

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T04:54:48.340

您必须选择正确的服务器位置。请按照以下步骤操作。

1.  选择窗口 => 显示视图 => 服务器
2.  然后根据需要添加服务器。如果已经添加跳过此步骤
3.  双击您添加的服务器
4.  然后将打开服务器**概览**。从那里单击**服务器位置**。
5.  然后选择第二个选项（使用 Tomcat 安装）。
6.  然后保存并重新启动服务器。

现在您应该可以访问您的服务器了。

注意：默认选择是使用工作区元数据。这不会修改 tomcat 安装。但是通过这个选择，您可以在 Eclipse 内部浏览器中运行 Web 应用程序。

# mysql - 如何更改数据库中的日期

> ID：15400897
> 
> 赞同：2
> 
> 时间：2013-03-14T03:54:20.973
> 
> 标签：mysql, database, date

在我的 Mysql 数据库中，我有一组日期。如何将数据库中的每个日期增加 3 年？

例如当前日期是：2001 年 1 月 2 日

我希望日期增加三年：2004 年 1 月 2 日

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T04:04:49.330

试试这个 -

```
UPDATE TABLE set fieldname =  DATE_ADD( fieldname, INTERVAL 3 YEAR ) 
```

有关更多信息并与您一起玩，`dates`可以查看此链接：-

[功能日期添加](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-add)

工作小提琴——http://sqlfiddle.com/#!2/9c669/ [1](http://sqlfiddle.com/#!2/9c669/1)

**编辑**

此解决方案更新日期类型为**VARCHAR**和日期结构，如 -`2 January 2001`

它将`2 January 2004`按时间间隔更新日期`3`

虽然处理日期的最佳方法是使用日期数据类型（例如时间戳、日期时间等）而不是将其保存在`VARCHAR`s

测试代码——

```
UPDATE date 
SET `varchardate`= DATE_FORMAT(DATE_ADD(  str_to_date(`varchardate`, '%d %M %Y'), INTERVAL 3 YEAR ) , '%d %M %Y') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T04:00:00.087

检查 date_add 功能，它应该做的事情 - [http://www.w3schools.com/sql/func_date_add.asp](http://www.w3schools.com/sql/func_date_add.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T06:22:22.927

下面的查询是更新日期列并更改为日期格式。

```
update date1 set dates = 
DATE_ADD( (str_to_date(concat( 
SUBSTRING_INDEX( dates,  ' ', 1 ),'-',
Substring(SUBSTRING_INDEX( SUBSTRING_INDEX( dates,  ' ', 2 ) ,  ' ', -1 ),1,3) ,
'-', 
SUBSTRING_INDEX( dates,  ' ', -1 )),'%d-%M-%Y')), INTERVAL 3 YEAR ) 
```

或者

第二个查询只是将年份更新 3。

```
update date1 set dates = 
concat( SUBSTRING_INDEX( dates,  ' ', 2 )  ,  ' ', 
(SUBSTRING_INDEX( dates,  ' ', -1 ) +3) ) 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/cd8ff/1)

# node.js - 使用 sendgrid 模块部署到 heroku 时出现 npm 错误

> ID：15400901
> 
> 赞同：4
> 
> 时间：2013-03-14T03:54:45.077
> 
> 标签：node.js, heroku, npm, sendgrid

我刚刚安装了 Sendgrid npm 模块以及相应的 Heroku 插件 ( [https://devcenter.heroku.com/articles/sendgrid](https://devcenter.heroku.com/articles/sendgrid) )，但现在我无法部署。不确定依赖错误是什么，但这是我的日志：

```
-----> Removing .DS_Store files
-----> Node.js app detected
-----> Resolving engine versions
       Using Node.js version: 0.10.0
       Using npm version: 1.2.12
-----> Fetching Node.js binaries
-----> Vendoring node into slug
-----> Installing dependencies with npm
   npm http GET https://registry.npmjs.org/express
   npm http 200 https://registry.npmjs.org/express
   npm http GET https://registry.npmjs.org/express/-/express-3.1.0.tgz
   npm http 200 https://registry.npmjs.org/express/-/express-3.1.0.tgz
   npm ERR! Error: spawn ENOENT
   npm ERR!     at errnoException (child_process.js:945:11)
   npm ERR!     at Process.ChildProcess._handle.onexit (child_process.js:736:34)
   npm ERR! If you need help, you may report this log at:
   npm ERR!     <http://github.com/isaacs/npm/issues>
   npm ERR! or email it to:
   npm ERR!     <npm-@googlegroups.com>

   npm ERR! System Linux 2.6.32-350-ec2
   npm ERR! command "/tmp/node-node-2mQ6/bin/node" "/tmp/node-npm-yvGj/cli.js" "rebuild"
   npm ERR! cwd /tmp/build_1y5wgumdk981a
   npm ERR! node -v v0.10.0
   npm ERR! npm -v 1.2.12
   npm ERR! syscall spawn
   npm ERR! code ENOENT
   npm ERR! errno ENOENT
   npm ERR! 
   npm ERR! Additional logging details can be found in:
   npm ERR!     /tmp/build_1y5wgumdk981a/npm-debug.log
   npm ERR! not ok code 0
 !     Failed to rebuild dependencies with npm
 !     Heroku push rejected, failed to compile Node.js app 
```

我的 package.json 具有以下依赖项：

```
 {
    "name": "Test"
  , "version": "0.0.1"
  , "private": true
  , "dependencies": {
      "express": "3.1.*"
  , "stylus": ">= 0.0.1"
  , "jade": ">= 0.0.1"
  , "sendgrid": ">= 0.2.5"
  , "ejs": ">= 0.8.3"
  , "path": ">= 0.4.9"
},
  "engines": {
     "node": ">=0.8.19",
      "npm": ">=1.2.10"
  }
} 
```

我做错了什么或错过了什么？如果我删除 Sendgrid 模块，我的应用程序可以正常部署。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T06:52:54.060

试试低版本的节点？看起来 0.10.0 刚刚发布，可能还有一些问题需要解决。

# c# - C# 中的除法以获得精确值

> ID：15400903
> 
> 赞同：5
> 
> 时间：2013-03-14T03:54:55.477
> 
> 标签：c#, floating-point, integer-division

如果我将 150 除以 100，我应该得到 1.5。但是当我像下面那样划分时，我得到了 1.0：

```
double result = 150 / 100; 
```

谁能告诉我如何获得1.5？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-14T03:59:36.513

尝试：

```
 double result = (double)150/100; 
```

当您像以前一样执行除法时：

```
double result = 150/100; 
```

该除法首先作为一个 Int 完成，然后它被转换为一个 double 因此你得到 1.0，你需要在等式中有一个 double 才能将它除为一个 double。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-14T03:57:34.530

将其中一个整数转换为浮点类型。您应该查看小数和双精度之间的区别并决定您想要哪个，但要使用双精度：

```
double result = (double)150 / 100; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-14T03:58:29.373

打个号码`float`

```
var result = 150/100f 
```

或者您可以通过添加使任何数字浮动`.0`：

```
double result=150.0/100 
```

或者

```
double result=150/100.0 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-14T03:56:59.410

```
double result = (150.0/100.0) 
```

一个或两个数字应该是右侧的浮点数/双精度数`=`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-14T03:59:40.150

如果你只是使用像 150 和 100 这样的文字值，C# 会将它们视为整数，并且整数数学总是“向下舍入”。您可以为浮点数添加一个标志，如“f”或为十进制添加“m”，以不获取整数数学。所以例如`result = 150m/100m`会给你一个不同的答案`result = 150/100`。

# python - 高效搜索海量文件中的字符串

> ID：15400906
> 
> 赞同：4
> 
> 时间：2013-03-14T03:55:22.683
> 
> 标签：python, search, optimization, large-files

我发现了这个想法的变体，但没有一个能让我（对 python 非常陌生）到达我需要的地方。

这是场景：

1.  我有一个巨大的 27 gig，`hashfile.txt`由不同的字符串组成。
2.  我需要逐行解析这个文件，在另一个不太大（~800mb）的`addresses.txt`文件中搜索匹配项
3.  找到匹配项时，需要将其写入`outfile.txt`

我当前的代码已尽我所能优化，但只能达到 150 行/秒左右。考虑到我有超过 15 亿行`hashfile.txt`，任何优化都会有所帮助。

```
fin = 'hashed.txt'
nonzeros = open('addrOnly.txt', 'r')
fout = open('hits.txt', 'w')
lines = nonzeros.read()
i = 0
count = 0

with open(fin, 'r') as f:
    for privkey in f:
            address = privkey.split(", ")[0]
            if address in lines:
                    fout.write(privkey)
            i = i+1
            if i%100 == 0:
                    count = count + 100
                    print "Passed: " + str(count) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T04:01:32.840

您要实现的可能是[Rabin-Karp string search](http://en.wikipedia.org/wiki/Rabin%E2%80%93Karp_algorithm)。当您在某个语料库中同时搜索多个字符串时，它的效率很高。

这篇文章中有关 python 实现的更多信息。[python高效的子字符串搜索](https://stackoverflow.com/questions/12244754/python-efficient-substring-search)

由于您要一次搜索多个地址，因此您可能希望在`addresses.txt`每次迭代中对条目进行散列并将它们与 Rabin-Karp 散列进行比较。阅读更多关于 Rabin-Karp 中的滚动哈希的信息，您将了解它是如何工作的。

由于 Rabin-Karp 要求所有模式的长度相同；实际上，所有地址的长度可能都不可忽略，您可以将它们全部截断到相同（不太短）的长度并使用前缀进行哈希。此外，您可能希望修改 Rabin-Karp 散列，使其不受空格和地址格式的微小差异的影响，并类似地定义一个自定义字符串比较器，以确认匹配。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T05:48:34.213

对于这样的数据大小，我会使用适当的数据库。数据库针对大型数据集的快速处理进行了优化，比人们可能编写的 Python 程序要好得多。

直接字符串比较是昂贵的。让我们对字符串进行哈希处理，以便哈希的完整*二叉树索引*有很好的机会适合内存。md5 是 128 位的，计算速度非常快。

首先，为任一文件中的每条记录计算 md5，并将它们存储在另一个文本文件中：

```
from hashlib import md5
with open('hashfile.txt') as input:
  with open('hashfile-md5.txt', 'w') as output:
    for line in input:
      value = line.rstrip() # cut '\n'
      output.write(value)
      output.write('\t') # let our file be tab-separated
      output.write(int(value).hexdigest(), 16)) # md5 as long number
      output.write('\n') 
```

重复相同的操作`address.txt`，生成`address-md5.txt`。

以 Postgresql、mysql 甚至 SQLite（我将在这里使用）为例，创建两个表和一个索引。

```
$ sqlite3 matching-db.sqlite

create table hashfile (
  txt varchar(64), -- adjust size to line lengths of hashfile.txt
  hash number(38) -- enough to contain 128-bit hash
);

create table address (
  txt varchar(64), -- adjust size to line lengths of address.txt
  hash number(38) -- enough to contain 128-bit hash
); 
```

现在加载我们的数据。本机数据库导入通常比通过 dbapi 从 Python 插入要快得多。

```
.separator \t
.import hashfile-md5.txt hashfile
.import address-md5.txt address 
```

现在我们可以创建一个索引：

```
create index x_address_hash on address(hash); 
```

这是一个`select`将有效地扫描大`hashfile`表并从小表中查找匹配哈希的语句`address`。索引将一直在 RAM 中（希望如此），大多数地址表也是如此。

```
select h.txt
from hashfile h, address a
where h.hash = a.hash and h.txt = a.txt; 
```

这个想法是索引`x_address_hash`将用于有效地匹配散列，如果散列匹配，也会比较实际的文本值。

我没有在 29 MB 的数据上尝试过，但在玩具 2 行示例上它有效:)

# angularjs - AngularJS 主页性能问题

> ID：15400909
> 
> 赞同：0
> 
> 时间：2013-03-14T03:55:54.600
> 
> 标签：angularjs

我是 AngularJS 的新手，正在尝试构建一个移动 Web 应用程序。当我开始为各种功能编写控制器、服务和路由时，index.html JS 和 CSS 包含的似乎每天都在增长。例如，当我开始编写控制器时，任何功能的服务都被迫将它们包含在 index.html 中。我认为编码方法存在根本问题。如果我的主页路径是“/home”或“/”，那么 home.html 应该只下载与主页相关的 JS 和 CSS 文件。但是 home.html(view) 似乎为每个页面下载了整个 Javascript 和 CSS 库。我应该如何设计我的应用程序，以便只为页面下载与功能相关的控制器、服务、指令 Javascript 文件。如果有人能用一个简单的例子来解释，我将不胜感激。

```
<link rel="stylesheet" type="text/css" href="css/reset.css">
<link rel="stylesheet" type="text/css" href="css/common/icomoon.css">
<link rel="stylesheet" type="text/css" href="css/lib/angular/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="css/app.css">
<link rel="stylesheet" type="text/css" href="css/header.css">
<link rel="stylesheet" type="text/css" href="css/menu.css">
<link rel="stylesheet" type="text/css" href="css/carousel.css">
<link rel="stylesheet" type="text/css" href="css/pdp.css">
<link rel="stylesheet" type="text/css" href="css/pdp_751_1.css">

<script src="js/lib/jquery-1.7.1.min.js"></script>
<script src="js/lib/jquery.cycle.all.js"></script>
<script src="js/lib/jquery.touchwipe.js"></script>
<script src="js/lib/angular/angular.min.js"></script>
<!-- This is the route provider for the main app... -->
<script src="js/app.js"></script>
<script src="js/controllers/c-home.js"></script>
<script src="js/controllers/c-browse.js"></script>
<script src="js/controllers/c-product-details.js"></script>
<!--<script src="js/directives/directives.js"></script>-->
<script src="js/directives/d-product-details.js"></script>
<script src="js/services/s-home.js"></script>
<script src="js/services/s-browse.js"></script>
<script src="js/services/s-product-details.js"></script>
<script src="js/lib/angular/angular-resource.min.js"></script>
<script src="js/lib/ui-bootstrap-tpls-0.1.0.js"></script>
<script src="js/lib/iscroll.js"></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:31:58.613

您不应该太担心文件的组合负载大小，而应该更多地关注构建过程并确保尽可能减少 HTTP 请求（您的 home.html 中应该只有 1 个 css，1 个 js）。这更重要。还要缩小一切。我建议您查看 ng-boilerplate。它是 Angular 应用程序的起点，并且拥有您应该采用的大部分最佳实践。

[https://github.com/joshdmiller/ng-boilerplate](https://github.com/joshdmiller/ng-boilerplate)

确保阅读各个目录级别的所有自述文件。

# ld - ld 链接器脚本产生巨大的二进制文件

> ID：15400910
> 
> 赞同：4
> 
> 时间：2013-03-14T03:55:58.547
> 
> 标签：ld, elf, linker-scripts

我正在使用`binutils-2.21.53.0.1-6.fc16.x86_64`.

我有一个小目标文件，`hello.o`只有足够的“东西”来包含所有部分的内容：

```
Section Headers:
  [Nr] Name              Type             Address           Offset
       Size              EntSize          Flags  Link  Info  Align
  [ 0]                   NULL             0000000000000000  00000000
       0000000000000000  0000000000000000           0     0     0
  [ 1] .text             PROGBITS         0000000000000000  00000040
       000000000000005d  0000000000000000  AX       0     0     4
  [ 2] .rela.text        RELA             0000000000000000  00000808
       0000000000000060  0000000000000018          15     1     8
  [ 3] .data             PROGBITS         0000000000000000  000000a0
       0000000000000000  0000000000000000  WA       0     0     4
  [ 4] .bss              NOBITS           0000000000000000  000000a0
       0000000000000053  0000000000000000  WA       0     0     32
  [ 5] .rodata           PROGBITS         0000000000000000  000000a0
       000000000000000f  0000000000000000   A       0     0     1
  [ 6] .data.rel.local   PROGBITS         0000000000000000  000000b0
       0000000000000008  0000000000000000  WA       0     0     8
  [ 7] .rela.data.rel.lo RELA             0000000000000000  00000868
       0000000000000018  0000000000000018          15     6     8
  [ 8] .data.rel         PROGBITS         0000000000000000  000000b8
       0000000000000008  0000000000000000  WA       0     0     8
  [ 9] .rela.data.rel    RELA             0000000000000000  00000880
       0000000000000018  0000000000000018          15     8     8
  [10] .comment          PROGBITS         0000000000000000  000000c0
       000000000000002d  0000000000000001  MS       0     0     1
  [11] .note.GNU-stack   PROGBITS         0000000000000000  000000ed
       0000000000000000  0000000000000000           0     0     1
  [12] .eh_frame         PROGBITS         0000000000000000  000000f0
       0000000000000058  0000000000000000   A       0     0     8
  [13] .rela.eh_frame    RELA             0000000000000000  00000898
       0000000000000030  0000000000000018          15    12     8
  [14] .shstrtab         STRTAB           0000000000000000  00000148
       0000000000000085  0000000000000000           0     0     1
  [15] .symtab           SYMTAB           0000000000000000  00000610
       00000000000001b0  0000000000000018          16    11     8
  [16] .strtab           STRTAB           0000000000000000  000007c0
       0000000000000045  0000000000000000           0     0     1 
```

如果我使用`-pie`并且没有链接器脚本，则结果与预期一致：

```
$ ld -pie -Map hello_pie.map -o hello_pie.elf hello.o 

$ ll hello_pie.elf 
-rwxrwx---. 1 jreinhart jreinhart 3453 Mar 13 23:44 hello_pie.elf 
```

但是，如果我包含任何类型的链接器脚本，输出大小会爆炸：

```
$ cat 1.ld 
SECTIONS
{

}
$ ld -T 1.ld -pie -Map hello_pie.map -o hello_pie.elf hello.o 
$ ll hello_pie.elf 
-rwxrwx---. 1 jreinhart jreinhart 2100070 Mar 13 23:45 hello_pie.elf 
```

如您所见，这个文件变得很大。

请注意，这似乎是因为该`.text`部分坚持从文件中的偏移量 0x200000 开始：

```
$ readelf -l -S hello_pie.elf 
There are 19 section headers, starting at offset 0x200400:

Section Headers:
  [Nr] Name              Type             Address           Offset
       Size              EntSize          Flags  Link  Info  Align
  [ 0]                   NULL             0000000000000000  00000000
       0000000000000000  0000000000000000           0     0     0
  [ 1] .text             PROGBITS         0000000000000000  00200000  <--- Why?
       000000000000005d  0000000000000000  AX       0     0     4
  [ 2] .rodata           PROGBITS         000000000000005d  0020005d
       000000000000000f  0000000000000000   A       0     0     1
  [ 3] .eh_frame         PROGBITS         0000000000000070  00200070
       0000000000000058  0000000000000000   A       0     0     8
  [ 4] .interp           PROGBITS         00000000000000c8  002000c8
       000000000000000f  0000000000000000   A       0     0     1
  [ 5] .dynsym           DYNSYM           00000000000000d8  002000d8
       0000000000000078  0000000000000018   A       6     2     8
  [ 6] .dynstr           STRTAB           0000000000000150  00200150
       0000000000000014  0000000000000000   A       0     0     1
  [ 7] .hash             HASH             0000000000000168  00200168
       0000000000000028  0000000000000004   A       5     0     8
  [ 8] .rela.dyn         RELA             0000000000000190  00200190
       0000000000000078  0000000000000018   A       5     0     8
  [ 9] .data.rel.local   PROGBITS         0000000000000208  00200208
       0000000000000008  0000000000000000  WA       0     0     8
  [10] .data.rel         PROGBITS         0000000000000210  00200210
       0000000000000008  0000000000000000  WA       0     0     8
  [11] .dynamic          DYNAMIC          0000000000000218  00200218
       00000000000000f0  0000000000000010  WA       6     0     8
  [12] .got              PROGBITS         0000000000000308  00200308
       0000000000000018  0000000000000008  WA       0     0     8
  [13] .got.plt          PROGBITS         0000000000000320  00200320
       0000000000000018  0000000000000008  WA       0     0     8
  [14] .bss              NOBITS           0000000000000340  00200338
       0000000000000053  0000000000000000  WA       0     0     32
  [15] .comment          PROGBITS         0000000000000000  00200338
       000000000000002c  0000000000000001  MS       0     0     1
  [16] .shstrtab         STRTAB           0000000000000000  00200364
       000000000000009a  0000000000000000           0     0     1
  [17] .symtab           SYMTAB           0000000000000000  002008c0
       0000000000000258  0000000000000018          18    19     8
  [18] .strtab           STRTAB           0000000000000000  00200b18
       000000000000004e  0000000000000000           0     0     1
Key to Flags:
  W (write), A (alloc), X (execute), M (merge), S (strings), l (large)
  I (info), L (link order), G (group), T (TLS), E (exclude), x (unknown)
  O (extra OS processing required) o (OS specific), p (processor specific)

Elf file type is DYN (Shared object file)
Entry point 0x0
There are 5 program headers, starting at offset 64

Program Headers:
  Type           Offset             VirtAddr           PhysAddr
                 FileSiz            MemSiz              Flags  Align
  PHDR           0x0000000000000040 0x0000000000200040 0x0000000000000000
                 0x0000000000000118 0x0000000000000118  R E    8
  INTERP         0x00000000002000c8 0x00000000000000c8 0x00000000000000c8
                 0x000000000000000f 0x000000000000000f  R      1
      [Requesting program interpreter: /lib/ld64.so.1]
  LOAD       --> 0x0000000000200000 0x0000000000000000 0x0000000000000000
                 0x0000000000000338 0x0000000000000393  RWE    200000
  DYNAMIC        0x0000000000200218 0x0000000000000218 0x0000000000000218
                 0x00000000000000f0 0x00000000000000f0  RW     8
  GNU_STACK      0x0000000000000000 0x0000000000000000 0x0000000000000000
                 0x0000000000000000 0x0000000000000000  RW     8 
```

无论我的链接描述文件的内容如何，​​这种情况一直在发生。有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-06-14T03:54:12.587

我今天在学习链接器脚本时遇到了同样的问题。SIZEOF_HEADERS 是解决它的灵丹妙药。这是我构建要链接的对象的简单源文件：

```
 .section .text
    .global _start
_start:
    mov $1, %eax
    mov $8, %ebx
    int $0x80 
```

使用以下链接器脚本，我得到一个 2+ MB 的可执行文件：

```
SECTIONS
{
    . = 0x400000;
    .text : { *(.text) }
} 
```

如果我添加 +SIZEOF_HEADERS，如下所示，我会得到一个 568 字节的可执行文件：

```
SECTIONS
{
    . = 0x400000 + SIZEOF_HEADERS;
    .text : { *(.text) }
} 
```

根据[LD 文档](https://sourceware.org/binutils/docs/ld/Builtin-Functions.html)，此函数返回输出文件标题的大小。手动设置偏移量以包含标头大小也会产生一个 568 字节的可执行文件：

```
SECTIONS
{
    . = 0x400078;
    .text : { *(.text) }
} 
```

如果我将 .text 进一步向下移动，则可执行文件开始扩展。以下产生一个 65984 字节的可执行文件：

```
SECTIONS
{
    . = 0x410000;
    .text : { *(.text) }
} 
```

所以基本上，据我所知，似乎：

*   第一个输出部分似乎与输出文件头共享一个内存页面。如果第一部分与标题重叠，LD 在输出第一部分之前发出一整页的填充字节以避免冲突
*   要解决此问题，请将第一个输出部分的输出地址设置为 X + SIZEOF_HEADERS。这就是 LD 的内置链接器脚本所做的（您可以通过运行“ld --verbose”来查看）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-01-23T21:51:35.313

使用 ld（或 gcc）尝试以下命令行选项：

```
-z max-page-size=0x1000 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-09-09T23:41:56.370

默认情况下`ld`，页面对齐输入部分。由于您的内核强制执行超级页面（2MB 的页面 = 0x200000 字节），因此您的`.text`部分在偏移量 0x200000 处对齐。这似乎是一个错误，`ld`因为它应该使用偏移量 0x0000000 代替（请参阅下面的编辑以获取可能的解释）

为了防止这种对齐会创建一个更大的文件，您可以使用`--nmagic`ld 标志来防止它对您的 .text 部分进行页面对齐，尽管它有副作用（它也禁用与共享库的链接）。但要小心将其他部分（`.data`, `.rodata`,...）与 2M 页对齐，因为它们不能与 .text 位于同一页中，因为所有这些部分都需要不同的访问位。

编辑：考虑一下，我们都希望访问虚拟地址 0x00000000 会产生异常（段错误）。为此，我看到了两种可能性：内核映射一个没有访问权限（r/w/x）的页面，或者（更有可能）它根本不映射任何东西（没有映射页面=> segfault）并且链接器必须以某种方式知道...这可以解释为什么 ld 跳过地址为零的第一页。这是待定。

# linux - 如何创建 NFS 陈旧文件句柄

> ID：15400914
> 
> 赞同：4
> 
> 时间：2013-03-14T03:56:36.970
> 
> 标签：linux

我想手动在 linux 中重新创建“NFS 陈旧文件句柄错误”。我在此站点上阅读了类似的问题和解决方案，但该解决方案对我不起作用。

请建议是否有简单的方法可以使用命令/工具等重新创建此错误。

提前致谢

# perl - 为什么我不能用 perl 和 LWP 建立 https 连接？

> ID：15400915
> 
> 赞同：-4
> 
> 时间：2013-03-14T03:56:39.280
> 
> 标签：perl, https, lwp

情况：

> 我需要使用作为 https 连接的 perl 脚本登录网站。

我遇到的问题：

> 我应该得到一个 302 的回报，但是我得到了 200 个空标签。我想我有一些代理问题

我的问题是什么：

> 我试图调试导致问题的原因。我在一些问题中读到 LWP 需要 Crypt-SSLeay 来建立 https 连接。但是我发现 LWP 可以用 https 支持构建，Crypt-SSLeay 还需要吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T07:43:51.270

对于 LWP > 6.00，您需要安装[LWP::Protocol::https](https://metacpan.org/module/LWP%3a%3aProtocol%3a%3ahttps)才能使用 https。

但是，如果您完全得到响应，则 https 连接成功。问题可能出在其他地方。

您没有显示任何代码，因此无需多说。

# php - 连续ajax请求中的性能问题？

> ID：15400917
> 
> 赞同：3
> 
> 时间：2013-03-14T03:56:57.790
> 
> 标签：php, ajax

我创建了一个类似这样的 ajax 聊天应用程序来每秒检查和获取消息。它工作正常。

```
 function get_messages(user_id) {
    $.ajax({
      type    : "POST",
      url     : "messages/get_messages", 
      cache   : false,
      data    : {
        user_id : user_id 
      },
      success : function(data) {
        if(data != '') {
          var obj = $.parseJSON(data);
          var messages = obj.messages;
        }
      }
    });
    setTimeout(function() { get_messages(user_id) }, 1000);
  } 
```

我的问题是，当很多人使用此应用程序时，每秒向服务器发出大量 Ajax 请求时，这样做是否存在任何性能问题或服务器问题，. 这样做的最佳做法是什么？

谢谢你的宝贵建议：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T04:37:29.993

进行此类聊天的最佳方法是将“聊天窗口”正确地称为`<iframe>`与脚本的永久连接，该脚本将继续运行并向客户端提供新消息，因此您不必使用 AJAX 压倒服务器要求。这可以通过调用 a `ob_flush()`（只是为了确保）并`flush()`在打印新内容后，使客户端立即接收更新来实现。但首先您必须通过一些设置来准备 PHP 以使其正常运行：

```
ini_set('zlib.output_compression', 'off');
ini_set('output_buffering', 'off');
set_time_limit(0); 
```

如果您要使用会话，请不要忘记会话被锁定以防止并发写入，因此在收集到您需要的信息后，`$_SESSION`您必须通过使用释放会话，`session_write_close()`否则用户将无法发布消息等。

如果聊天窗口保持空闲超过几分钟，您的脚本还应该检查不活动并向客户端输出一些内容。它可以防止连接被浏览器终止。它不必是任何视觉上的东西，像评论一样的东西`<!-- keep alive -->`就可以了。

现在，你从哪里得到新消息？有几个选项可以做到这一点：

1.  插座。您可以让这个聊天服务器应用程序在服务器端运行，所有聊天窗口 PHP 脚本都将连接到该服务器端，以获取新的聊天行。当用户提交一条新消息时，它会发送到聊天服务器并广播到聊天窗口脚本。这个聊天服务器也可以安全地用 PHP 编写！

2.  一份文件。最简单的方法。每个聊天窗口 PHP 脚本都以只读方式打开同一个文件，并`fseek()`一直到其结束。循环检查它是否`!feof()`每秒几次以从中读取新行，如果有的话。当用户发送新消息时，您只需将此消息附加到文件中即可。

3.  SQL。不推荐，因为每个 Chat Window PHP 脚本都会打开到 RDBMS 的新连接并最终达到其限制，但您可以尝试不使用 RDBMS 的 SQLite。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T05:11:39.977

不推荐使用常规的 Ajax/Php 来完成此任务。正如您所说，如果有很多用户怎么办，每个用户每秒都会查询数据库。

这会给您的服务器带来过多的负担，并且用户之间将无法进行实时通信。

我建议你使用 node.js 来完成这个任务。要使其跨浏览器兼容，您需要使用 node.js 框架，即 socket.io

所以最后的判断，使用node.js

你可以学习node.js [http://www.nodebeginner.org/](http://www.nodebeginner.org/)

网络上有非常好的教程。lynda.com 也有关于 node.js 的非常好的教程

# python - 带有分页游标的投影查询？

> ID：15400920
> 
> 赞同：1
> 
> 时间：2013-03-14T03:57:08.897
> 
> 标签：python, google-app-engine, app-engine-ndb

不确定这是我遇到的错误还是一些概念上的误解。我想要做的基本上是按照[此处](https://developers.google.com/appengine/docs/python/ndb/queries#cursors)文档中的概述设置上一个和下一个分页游标，除了我希望查询是投影查询。这可能吗？例如：

```
# Set up.
q = Bar.query()
q_forward = q.order(Bar.key)
q_reverse = q.order(-Bar.key)

# Fetch a page going forward.
bars, cursor, more = q_forward.fetch_page(10, start_cursor=initial_cursor, projection=my_projection)

# Fetch the same page going backward.
rev_cursor = cursor.reversed()
bars1, cursor1, more1 = q_reverse.fetch_page(10, start_cursor=rev_cursor, projection=my_projection) 
```

当我做这样的事情时，我会`BadRequestError: Cursor does not match query`运行第二个`fetch_page`（反向光标上的那个）。

# python - Python 列表和 MongoDB 插入

> ID：15400922
> 
> 赞同：0
> 
> 时间：2013-03-14T03:57:24.187
> 
> 标签：python, mongodb, pymongo

需要帮助了解这里发生的事情以及避免这种情况的建议！

这是我的片段：

```
 result = [list of dictionary objects(dictionary objects have 2 keys and 2 String values)]
      copyResults = list(results);
      ## Here I try to insert each Dict into MongoDB (Using PyMongo)
      for item in copyResults:
        dbcollection.save(item) # This is all saving fine in MongoDB. 
```

但是，当我再次遍历原始结果列表时，它会显示字典对象，其中自动添加了一个新字段，即来自 MongoDB 的 ObjectId！

稍后在代码中，我需要将原始结果列表转换为 json，但是这个 ObjectId 会导致问题。不知道为什么将其添加到原始列表中。

我已经尝试过复制或创建新列表等。保存后它仍然会在原始列表中添加 ObjectId。

请建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T04:14:44.763

保存在 mongodb 中的每个文档都需要`'_id'`字段 - 它在集合中的文档中必须是唯一的。如果你不提供一个，mongodb 会自动创建一个[`ObjectId`](http://docs.mongodb.org/manual/core/object-id/)( `bson.objectid.ObjectId`for pymongo)

如果您需要将文档导出为 json，则必须在对其进行 json 化之前弹出 '_id' 字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:08:51.550

或者你可以使用：
`rows['_id'] = str(rows['_id'])`

如果您需要更新，请记住将其重新设置

# ruby-on-rails - StaticPagesController#home 中的 NoMethodError

> ID：15400924
> 
> 赞同：1
> 
> 时间：2013-03-14T03:57:26.720
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

导轨新手在这里。我在教程的最后一部分，我简直不敢相信我被困在这里。

我在 static_pages_controller 中得到一个 noMethodError ，上面写着这个

```
undefined method `paginate' for #<Array:0x3c22aa0> 
```

```
class StaticPagesController < ApplicationController
  def home
    if signed_in?
      @micropost  = current_user.microposts.build
      @feed_items = current_user.feed.paginate(page: params[:page])
    end
  end

  def help
  end

  def about
  end

  def contact
  end
end 
```

我安装了 will_paginate gem，并且 paginate 函数适用于代码的其他部分。

我在 Michael Hartl Rails 教程第 11.3.4 节。

如果你们能帮助我，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T04:01:04.720

`will_paginate`默认情况下不支持数组分页。为了支持这一点，您需要一个附加文件。创建一个名为`will_paginate_array.rb`inside的文件`config/initializers`。然后添加以下内容

```
require 'will_paginate/array' 
```

重新启动服务器，您应该能够对数组进行分页。

# java - 使用 response.addCookie 时如何阻止 Jetty 更改 HTTP Expires 标头？

> ID：15400931
> 
> 赞同：3
> 
> 时间：2013-03-14T03:57:51.880
> 
> 标签：java, jakarta-ee, cookies, jetty

事实证明，在 Jetty 中，当您附加 cookie 时，它​​不仅将 cookie 添加到 HTTP 响应标头中，还更改了 Expires HTTP 标头的值！

```
((HttpServletResponse)response).addCookie(cookie); 
```

我需要 Jetty 停止使用正确/正确的到期设置。

附带说明一下，是否有特定/充分的理由让它表现得像这样？我的猜测是，Jetty 假设如果设置了 cookie，则内容始终是动态的，因此应该设置为*过期*，以便它不会被缓存。

**更新：**使用*Jetty 8.1.8.v20121106进行测试*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T14:09:03.353

刚刚浏览了 Jetty 8 代码库。以下是代码库中的情况，其中 Expires（作为 HTTP 响应标头）被强制为一个值，或者如果存在则被删除。

*   任何 HTTP 206 响应（强制删除，根据 RFC2616 规范）
*   使用 org.eclipse.jetty.server.handler.MovedContextHandler（如果未设置则强制）
*   在 Form Authentication 期间，如果需要响应错误，通过 Dispatch 处理（强制删除）
*   在表单身份验证质询响应期间（强制删除）

这就是作为 HTTP 响应标头的 Expires。

但是，既然您指出这是 的一部分[`.addCookie()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponse.html#addCookie%28javax.servlet.http.Cookie%29)，我想指出，作为 Cookie 值字符串的一部分，还有一个 Cookie 规范 Expires 标头，可以在响应的 Set-Cookie 逻辑中找到。

[`Cookie.setMaxAge()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/Cookie.html#setMaxAge%28int%29)如果值为 0 或更大，这将强制 Cookie Expires 标头。这样做是为了解决各种浏览器错误，这些错误在 Cookie 值上也提供`Max-Age=`之前不支持。`Expires=`

[Cookie](http://docs.oracle.com/javaee/6/api/javax/servlet/http/Cookie.html)的默认行为：

*   `Cookie.setMaxAge(-1);`将同时禁用`Max-Age=`和`Expires=`
*   `Cookie.setMaxAge(0);`将导致`Expires=00:00:00 UTC on 1 January 1970`（unix 纪元开始）
*   `Cookie.setMaxAge(60000);`将导致`Expires=`未来 1 分钟。

版本 1 Cookie 行为（又名[`Cookie.setVersion(1)`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/Cookie.html#setVersion%28int%29)）：

*   `Cookie.setMaxAge(-1);`将同时禁用`Max-Age=`和`Expires=`
*   `Cookie.setMaxAge(0);`将导致`Max-Age=0`and `Expires=00:00:00 UTC on 1 January 1970`(unix epoch 的开始)
*   `Cookie.setMaxAge(60000);`将导致`Max-Age=60000`未来`Expires=`1 分钟。

# php - 如何验证 reCAPTCHA

> ID：15400933
> 
> 赞同：-2
> 
> 时间：2013-03-14T03:57:56.277
> 
> 标签：php, html, recaptcha

我正在尝试在联系表单上实施 reCAPTCHA，但我被卡住了。该功能显示在我的页面上（这很容易），但现在我对如何验证 CAPTCHA 感到困惑。我有一个“send-mail.php”文件来验证输入数据，然后将其发送到指定的电子邮件地址。我应该以某种方式在此文件中包含 reCAPTCHA 验证吗？如果是这样，我该怎么做？

**[联系表格链接](http://tinyurl.com/cm3zzuw)**

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T04:17:06.220

假设您使用的是“官方”PHP 插件（[http://recaptcha.net/plugins/php/](http://recaptcha.net/plugins/php/)），这就是我以前使用的：

```
<?php
    # Get a key from http://recaptcha.net/api/getkey
    $publickey = "";
    $privatekey = "";

    @require_once( 'path/to/recaptchalib.php' );

    # the response from reCAPTCHA
    $resp = null;

    # was there a reCAPTCHA response?
    if( $_POST["recaptcha_response_field"] ) 
    {
        $resp = recaptcha_check_answer ($privatekey, $_SERVER["REMOTE_ADDR"], $_POST["recaptcha_challenge_field"], $_POST["recaptcha_response_field"]);

        if( $resp->is_valid ) 
        {

        } 
        else {
            if( $resp->error == 'incorrect-captcha-sol') {

            }
        }
    }
?> 
```

如果我记得的话，这几乎是源文档中的复制意大利面 - 老实说，我不久前切换到 Akismet ......

# ios - iOS 上的 Phonegap：只需滚动两个列表？

> ID：15400934
> 
> 赞同：0
> 
> 时间：2013-03-14T03:57:58.637
> 
> 标签：ios, cordova, scroll

我试图在 iOS 上的 phonegap 应用程序中有两个可滚动的列表，而没有反弹等。我将 UIWebBounce 设置为 false，并且我已经捕获了触摸事件，因此只有相关列表（通过element ids) 将响应触摸移动，但如果列表为空或您位于列表的最后一个元素，则向上滚动列表会向上滚动整个页面。iscroll 似乎对我不起作用，因为它在一些快速测试中表现得很奇怪。

所以，问题是：有没有人在PhoneGap / ios中获得一个或两个可滚动的列表，同时完全避免滚动整个页面，如果是这样，如何？

# r - 在没有标签的受约束的排序中绘制向量

> ID：15400935
> 
> 赞同：4
> 
> 时间：2013-03-14T03:58:21.540
> 
> 标签：r, plot, vegan

我想使用`VEGAN`. 我熟悉该`display ="bp"`命令，但这会添加被站点点遮挡的标签。有没有一种简单的方法可以删除这些？我很高兴稍后添加它们，即一旦导出并在 word 中发布。

到目前为止，我的代码如下：

```
plot(mod, scaling = 3, type="n")
     with(data, points(mod, display="sites", cex=Pointsize,   
     pch=ifelse(Cat=="Reference",21,19)) ,bg=Cat,)
     with(data,text(mod,display="bp")) 
```

帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T04:29:31.673

使用`points()`方法而不是`text()`方法：

```
points(mod, display = "bp") 
```

`with(data)`（在您显示的最后一行代码中也应该不需要。）

这是一个*可重现*的示例：

```
require(vegan)
data(varespec)
data(varechem)
ord <- cca(varespec ~ ., data = varechem)
plot(ord, type = "n", display = "sites")
points(ord, display = "sites")
points(ord, display = "bp") 
```

![在此处输入图像描述](../Images/eeebffac751c9e0f12ff22c38c89334f.png)

# php - codeigniter mysql左连接包括选择

> ID：15400938
> 
> 赞同：2
> 
> 时间：2013-03-14T03:58:35.910
> 
> 标签：php, mysql, codeigniter

如何将左连接包括选择转换为codeigniter sql方法？谢谢。我只是想知道。

```
SELECT c1.c1_id, c1.c1_name, c2.c2_id, c2.c2_name, c2.c2_type, c2.c2_status, f.f_id, f.f_name, f2.f2_id, f2.f2_name FROM category2 c2 
LEFT JOIN category1 c1 ON c1.c1_id = c2.c1_id 
LEFT JOIN (
    SELECT DISTINCT c2_id, f_id, f_name FROM file ORDER BY f_id DESC
) f ON f.c2_id = c2.c2_id
LEFT JOIN (
    SELECT DISTINCT c2_id, f2_id, f2_name FROM file2 ORDER BY f2_id DESC
) f2 ON f2.c2_id = c2.c2_id
WHERE c2.c2_status = 1
GROUP BY c2.c2_id 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T06:38:52.797

为此，您可以使用 codeigniter 的子查询方式来执行此操作，您将不得不破解 codeigniter。像这样转到 system/database/DB_active_rec.php 从这些函数中删除 public 或 protected 关键字

```
public function _compile_select($select_override = FALSE)
public function _reset_select() 
```

现在子查询写入可用现在这是您的带有活动记录的查询

```
$select =   array('DISTINCT c2_id','f_id','f_name');
$this->db->select($select);
$this->db->from('file');
$this->db->order_by('f_id','DESC');
$subQuery1 = $this->db->_compile_select();

unset($select);

$this->db->_reset_select();

$select =   array('DISTINCT c2_id','f_id','f2_name');
$this->db->select($select);
$this->db->from('file2');
$this->db->order_by('f2_id','DESC');
$subQuery2 = $this->db->_compile_select();

unset($select); 

$this->db->_reset_select();

// And now your main query

$select =   array(
                  'c1.c1_id',
                  'c1.c1_name',
                  'c2.c2_id',
                  'c2.c2_name',
                  'c2.c2_type',
                  'c2.c2_status',
                  'f.f_id',
                  'f.f_name',
                  'f2.f2_id',
                  'f2.f2_name'
            );

$this->db->select($select);
$this->db->from('category2 c2');
$this->db->join("($subQuery1)",'f.c2_id = c2.c2_id','left');
$this->db->join("($subQuery2)",'f2.c2_id = c2.c2_id','left');
$this->db->where('c2.c2_status',1);
$this->db->group_by('c2.c2_id');
$main_query = $this->db->get(); 
```

事情就完成了。干杯！！！注意：在使用子查询时，您必须使用

```
$this->db->from('myTable') 
```

代替

```
$this->db->get('myTable') 
```

运行查询。

现在，您可以检查已构建为的查询

```
echo $this->db->last_query(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T04:16:42.453

```
$query='SELECT c1.c1_id, c1.c1_name, c2.c2_id, c2.c2_name, c2.c2_type, c2.c2_status, f.f_id, f.f_name, f2.f2_id, f2.f2_name FROM category2 c2 
LEFT JOIN category1 c1 ON c1.c1_id = c2.c1_id 
LEFT JOIN (
    SELECT DISTINCT c2_id, f_id, f_name FROM file ORDER BY f_id DESC
) f ON f.c2_id = c2.c2_id
LEFT JOIN (
    SELECT DISTINCT c2_id, f2_id, f2_name FROM file2 ORDER BY f2_id DESC
) f2 ON f2.c2_id = c2.c2_id
WHERE c2.c2_status = ?
GROUP BY c2.c2_id';
$params=array();
$params[]=1;
$result=$this->db->query($query,$params);
$result=$result->result_array();
print_r($result); 
```

我会避免使用 Codeigniter 的 Active Record 类，除非你的目标是混淆你的代码。

“总是编码，就好像最终维护你的代码的人是一个知道你住在哪里的暴力精神病患者。”

# sql - 从日期范围中提取季度

> ID：15400941
> 
> 赞同：0
> 
> 时间：2013-03-14T03:59:24.863
> 
> 标签：sql, sql-server, sql-server-2008, tsql

请帮助我如何将日期范围分成一年的几个季度。Ex 日期范围 2012 年 1 月 1 日至 2013 年 10 月 31 日应该给我一个包含所有 8 个季度的结果集。结果应该采用以下格式，我使用的是 SQL 服务器2008 年：

```
Quarter Month start Month end

1   Jan-12  Mar-12
2   Apr-12  Jun-12
3   Jul-12  Sep-12
4   Oct-12  Dec-12
1   Jan-13  Mar-13
2   Apr-13  Jun-13
3   Jul-13  Sep-13
4   Oct-13  Oct-13 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T04:24:48.317

您需要查看并以`DATEPART(QUARTER,date)`这种方式分解它们。类似于这样的东西：

```
select datepart(year, dateTarget) as theYear, num as theQuarter, min(dateTarget) as startDate, max(dateTarget) as endDate
from numbers
join dates on datepart(quarter, dateper) = num
where num between 1 and 4
group by datepart(year, dateTarget),num 
```

表格在哪里`dates`是您正在查看的表格，并且`numbers`是一个数字表格（我发现它非常有用）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-14T04:26:48.043

这为您提供了 12 个季度的季度开始日期：

```
with calendar as (
  select 
    --DATEFROMPARTS(year(getdate()),1,1) as [start], 
    convert(datetime, convert(char(4), year(getdate()))+'0101') as [start], 
    qtrsBack = 1
  union all
  select  
    dateadd(mm,-3,[start]), 
    qtrsBack+1
  from calendar
  where qtrsback < 12
)
select * from calendar 
```

生产：

```
start      qtrsBack
---------- -----------
2013-01-01 1
2012-10-01 2
2012-07-01 3
2012-04-01 4
2012-01-01 5
2011-10-01 6
2011-07-01 7
2011-04-01 8
2011-01-01 9
2010-10-01 10
2010-07-01 11
2010-04-01 12 
```

# wordpress - 在 appfog 上托管 wordpress

> ID：15400944
> 
> 赞同：0
> 
> 时间：2013-03-14T03:59:40.657
> 
> 标签：wordpress, appfog

我计划在**AppFog上托管一个***Wordpress*博客。由于我是新手，他们的文档似乎缺乏细节，我想知道如果任何实例出现故障，我的数据是否会被保留？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:46:47.577

他们还没有持久的文件系统，所以它不仅可能，而且会在某个时候下降。您最好使用远程存储库并将其托管在本地计算机上，然后从那里更新您的 wordpress。现在，AppFog 与您最可能习惯的 cpanel 托管完全不同。wp.​​stackoverflow.com 应该有关于 git 和 AppFog 的文档，从那里开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T20:25:32.493

AppFog 使用临时文件存储，这意味着您通过 adim 面板上传的任何媒体文件、插件和主题在重新启动后都不会保留。您需要将插件和主题添加到本地源文件并使用 git 将它们推送到服务器。对于媒体文件（图像等），您需要使用第三方（如 Amazon S3）来存储静态文件。

如果您选择 S3 路线，那么有一个 Wordpress 插件可以帮助您设置 Wordpress 以将文件推送到您的 S3 存储桶：[http ://wordpress.org/extend/plugins/tantan-s3-cloudfront/](http://wordpress.org/extend/plugins/tantan-s3-cloudfront/)**

# ruby-on-rails - strftime('%-d') 在 heroku web dynos 上失败

> ID：15400956
> 
> 赞同：0
> 
> 时间：2013-03-14T04:00:20.303
> 
> 标签：ruby-on-rails, heroku, strftime

在heroku上，我的网络测功机上的rails渲染给了我

```
Time.now.strftime('%a, %b %-d')
=> "Wed, Mar -d" 
```

运行 heroku 控制台给了我预期的行为

```
Time.now.strftime('%a, %b %-d')
=> "Wed, Mar 13" 
```

我有一个修复它的猴子补丁，但如果有人有更清洁的解决方案，我会很感兴趣

# matlab - matlab - 什么是 null / None / nil / NULL 等的等价物？

> ID：15400964
> 
> 赞同：6
> 
> 时间：2013-03-14T04:01:06.827
> 
> 标签：matlab

在大多数 OO 语言中，变量可能指向对象，它们也可能有一个空值，这非常方便。

在 Matlab 中，我有一个函数，它解析一个命令，然后返回一个单元格数组，或者`false`（等于零 - 这是另一种常见模式）如果它失败：

```
function re = parse(s)
    ...
    if (invalid)
        re = false;
        return;
    end
end 
```

问题是当我检查结果时，它给出了一个错误：

```
re = parse(s);
if (false == re)
Undefined function 'eq' for input arguments of type 'cell'. 
```

我已经编写了一个函数来检查它而不会出现错误：`strcmp('logical', class(re)) && false == re`，但是在代码的热点区域使用这似乎真的很慢，而且如果我必须将此函数添加到我正在编写的每个 M 文件中也很不方便。

使用`NaN`更糟糕，因为除了抛出该错误之外，它也不等于自身。

与此模式一起使用的更好选择是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T04:02:05.547

一个不错的选择是使用空数组：`[]`并`isempty(re)`检查。这不会引发错误。

参考： http: [//www.mathworks.com.au/matlabcentral/newsreader/view_thread/148764](http://www.mathworks.com.au/matlabcentral/newsreader/view_thread/148764)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T06:17:20.303

您可以使用该`isequal`函数比较任何两个项目而不会导致该错误。例如：

```
if isequal (re, false)
    %code here
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T04:10:35.630

如果您可以更改函数，`parse`一种解决方案是返回两个输出参数`[re status] = parse(s)`，其中`status`将是逻辑变量。如果成功则将其设置为 true，否则设置为 false。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T07:54:10.900

`{}`如果它不是有效结果，我将使用空单元格数组。使用空矩阵是 MATLAB 标准（请参阅 Evgeni Sergeev 的回答），但使用空元胞数组而不是空数值数组可确保您始终得到相同类型的结果。

另一方面，如果空单元格数组`{}`是您的函数的有效结果，那么我将使用异常来表示问题：

```
if invalid
    error('Parse:InvalidArgumentError', 'The input is invalid.');
end 
```

确保使用适当的错误 ID（ 的第一个参数`error`），以便在调用函数时可以准确捕获该异常：

```
try:
    result = parse(something);
catch ME
    if strcmp(ME.identifier, 'Parse:InvalidArgumentError')
        fprintf('Ooops\n');
    else
        % Some other error
        ME.rethrow();
    end
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T06:34:32.720

我认为问题在于matlab函数不返回指针而是值的副本。

恕我直言，最好的方法是定义自己的“指针”类。在里面你可以定义一个“isNull()”命令，甚至覆盖比较来产生你想要的行为。

# c# - C# 重叠数据网格

> ID：15400968
> 
> 赞同：1
> 
> 时间：2013-03-14T04:01:25.140
> 
> 标签：c#, winforms, datagrid

我在同一位置有两个 DataGrid，所以我只是在启动时隐藏其中一个。当我将编码设置为 DataGrid1.Visible = false 之类的按钮时；DataGrid2.Visible = true;

两个 DataGrid 都只是消失了。

我猜是DataGrid1覆盖了DataGrid2，这样DataGrid2就被隐藏了。我尝试搜索将 DataGrid2 从水中拉出的方式，但无法搜索。

还有我有两个按钮分配相同的位置。并像上面一样做。两个按钮也消失了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T04:07:23.120

您可以在数据网格上尝试 BringToBack() 和 SendToBack() 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T04:35:15.337

试试这个。这个对我有用。如果这不起作用，请设置断点，检查两个 datagridView Visible 属性。

**Form1.designer.cs**

```
namespace WindowsFormsApplication1
{
partial class Form1
{
    /// <summary>
    /// Required designer variable.
    /// </summary>
    private System.ComponentModel.IContainer components = null;

    /// <summary>
    /// Clean up any resources being used.
    /// </summary>
    /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
    protected override void Dispose(bool disposing)
    {
        if (disposing && (components != null))
        {
            components.Dispose();
        }
        base.Dispose(disposing);
    }

    #region Windows Form Designer generated code

    /// <summary>
    /// Required method for Designer support - do not modify
    /// the contents of this method with the code editor.
    /// </summary>
    private void InitializeComponent()
    {
        this.dataGridView1 = new System.Windows.Forms.DataGridView();
        this.Column1 = new System.Windows.Forms.DataGridViewTextBoxColumn();
        this.dataGridView2 = new System.Windows.Forms.DataGridView();
        this.Column2 = new System.Windows.Forms.DataGridViewTextBoxColumn();
        this.button1 = new System.Windows.Forms.Button();
        ((System.ComponentModel.ISupportInitialize)(this.dataGridView1)).BeginInit();
        ((System.ComponentModel.ISupportInitialize)(this.dataGridView2)).BeginInit();
        this.SuspendLayout();
        // 
        // dataGridView1
        // 
        this.dataGridView1.ColumnHeadersHeightSizeMode = System.Windows.Forms.DataGridViewColumnHeadersHeightSizeMode.AutoSize;
        this.dataGridView1.Columns.AddRange(new System.Windows.Forms.DataGridViewColumn[] {
        this.Column1});
        this.dataGridView1.Dock = System.Windows.Forms.DockStyle.Fill;
        this.dataGridView1.Location = new System.Drawing.Point(0, 0);
        this.dataGridView1.Name = "dataGridView1";
        this.dataGridView1.Size = new System.Drawing.Size(284, 262);
        this.dataGridView1.TabIndex = 0;
        // 
        // Column1
        // 
        this.Column1.HeaderText = "Column1";
        this.Column1.Name = "Column1";
        // 
        // dataGridView2
        // 
        this.dataGridView2.ColumnHeadersHeightSizeMode = System.Windows.Forms.DataGridViewColumnHeadersHeightSizeMode.AutoSize;
        this.dataGridView2.Columns.AddRange(new System.Windows.Forms.DataGridViewColumn[] {
        this.Column2});
        this.dataGridView2.Dock = System.Windows.Forms.DockStyle.Fill;
        this.dataGridView2.Location = new System.Drawing.Point(0, 0);
        this.dataGridView2.Name = "dataGridView2";
        this.dataGridView2.Size = new System.Drawing.Size(284, 262);
        this.dataGridView2.TabIndex = 1;
        this.dataGridView2.Visible = false;
        // 
        // Column2
        // 
        this.Column2.HeaderText = "Column2";
        this.Column2.Name = "Column2";
        // 
        // button1
        // 
        this.button1.Location = new System.Drawing.Point(209, 227);
        this.button1.Name = "button1";
        this.button1.Size = new System.Drawing.Size(75, 23);
        this.button1.TabIndex = 2;
        this.button1.Text = "button1";
        this.button1.UseVisualStyleBackColor = true;
        this.button1.Click += new System.EventHandler(this.button1_Click);
        // 
        // Form1
        // 
        this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
        this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
        this.ClientSize = new System.Drawing.Size(284, 262);
        this.Controls.Add(this.button1);
        this.Controls.Add(this.dataGridView2);
        this.Controls.Add(this.dataGridView1);
        this.Name = "Form1";
        this.Text = "Form1";
        ((System.ComponentModel.ISupportInitialize)(this.dataGridView1)).EndInit();
        ((System.ComponentModel.ISupportInitialize)(this.dataGridView2)).EndInit();
        this.ResumeLayout(false);

    }

    #endregion

    private System.Windows.Forms.DataGridView dataGridView1;
    private System.Windows.Forms.DataGridViewTextBoxColumn Column1;
    private System.Windows.Forms.DataGridView dataGridView2;
    private System.Windows.Forms.DataGridViewTextBoxColumn Column2;
    private System.Windows.Forms.Button button1;
}
} 
```

**Form1.cs**

```
namespace WindowsFormsApplication1
{
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        dataGridView1.Visible = !dataGridView1.Visible;
        dataGridView2.Visible = !dataGridView2.Visible;
    }
}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T05:05:23.297

您可以做一件简单的事情，将两个数据网格放在 2 个不同的面板中，然后隐藏和显示该面板。它可能会解决您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T04:08:28.387

您是否在服务器端的 Button_Click() 事件处理程序中执行此操作？您可能需要在 Page_Load() 事件中添加对 IsPostBack 的检查。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T04:12:22.157

您可以尝试 gridView1.BringToFront();

但是，请尝试改用 TabControl。它具有更好的 UI 样式和对功能的内置支持。

# r - R预测函数：为什么它返回零长度预测？

> ID：15400970
> 
> 赞同：3
> 
> 时间：2013-03-14T04:01:33.613
> 
> 标签：r, zero, predict

更新：我正在为 naiveBayes 使用 e1071 包

我是 R 新手，正在尝试围绕玩具数据构建朴素贝叶斯模型。然后我试图在那个模型上调用“predcit”。我看到的问题是：“predict()”的结果长度为零。请参阅简单的 R 复制代码。感谢您的投入！

```
 df<-NULL

 df <- rbind(df, c(0,3))

 df <- rbind(df, c(1,1))

 df <- rbind(df, c(1,3))

 model <- naiveBayes(df[,2], df[,1])

 prediction <- predict(model, df[,-1])

 length(prediction)

 ## [1] 0 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T04:22:42.837

问题似乎是因变量预计是一个*因素*。我将不使用矩阵来存储数据，而是使用可以存储多种变量类型（例如数字和因子）的数据框（下面的 df）。我将一个因子 Y 和一个数字 X 存储到 df 中并运行模型...

```
df<-data.frame(Y=factor(c(0,1,1)),X=c(3,1,3))
model<-naiveBayes(Y~X,df)
predict(model,df) 
```

或者，为了表明它是解决问题的因素（即不是使用公式）......

```
model<-naiveBayes(df[,2],df[,1])
predict(model,df) 
```

仍然有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T04:19:12.513

我认为问题出在`naiveBayes`假设这`y`是一个分类变量的事实。

在您的示例数据中，没有（明显的）分类数据或列联表数据。

如果我们从帮助中获取示例，使用`iris`，第五列是`Species`并且是因子变量。

```
library(e1071)
data(iris)
m <- naiveBayes(iris[,-5], iris[,5])
m
table(predict(m, iris), iris[,5])

            setosa versicolor virginica
  setosa         50          0         0
  versicolor      0         47         3
  virginica       0          3        47 
```

它按预期工作。

# codemirror - 如何捕获 CodeMirror 隐藏/取消隐藏事件？

> ID：15400972
> 
> 赞同：2
> 
> 时间：2013-03-14T04:01:49.853
> 
> 标签：codemirror

我想在删除标记或撤消删除时捕获事件。文档说有“隐藏”和“取消隐藏”事件，但我不知道如何捕获这些事件。任何人都可以提供代码片段吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T23:43:54.240

终于想通了：

```
// Create a marker
var myMark = cm.markText(...)

// Add the listener directly on the marker
CodeMirror.on(myMark, "hide", function(){
    // do stuff
}); 
```

# installation - 构建运行另一个安装程序的安装程序

> ID：15400975
> 
> 赞同：2
> 
> 时间：2013-03-14T04:02:37.963
> 
> 标签：installation, wix, windows-installer

我的公司有一个项目，我用 C# 开发了一个应用程序。我可以为该应用程序创建一个安装程序。但是，该项目要求用户安装另一个用 c++ 构建的应用程序，该应用程序具有使用 Visual Studio 10 构建的安装程序。有没有办法可以构建一个安装程序，包括在安装我的应用程序之前安装第二个产品？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T05:01:40.680

您正在寻找的是引导程序或链接程序。[WiX 工具集在名为Burn](http://robmensching.com/blog/posts/2009/7/14/lets-talk-about-burn)的工具中提供此功能。它允许您在安装所有安装包时提供单一的用户体验。您可以在 WiX .chm 中了解更多信息。

# jquery - 如何在 jquery datepicker 中设置默认的 minDate？

> ID：15400976
> 
> 赞同：2
> 
> 时间：2013-03-14T04:02:45.500
> 
> 标签：jquery, mindate

它设置了我提到的minDate..但我想在jquery datepicker中显示默认的mindate 1970-01-26。在这里我已经这样编码了，但是没有用。任何人都可以帮助我吗..

```
$(function ()
{
  var oldMethod = $.datepicker._generateMonthYearHeader;
  $.datepicker._generateMonthYearHeader = function()
  {
   var html = $("<div />").html(oldMethod.apply(this,arguments));
   var monthselect = html.find(".ui-datepicker-month");
   monthselect.insertAfter(monthselect.next());
   return html.html();
  }
  $('input.datepicker_DOB').datepicker(
  {
   dateFormat: 'yy-mm-dd',
   changeMonth: true,
   changeYear: true,
   minDate: '1970-01-26'
  });
}); 
```

我的html代码是：

```
<input type="text" name="dob"  class="datepicker_DOB" > 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T04:06:42.747

使用`setDate`.

```
var defaultDateInput = new Date(1970, 01, 26);
$("input.datepicker_DOB").datepicker('setDate', defaultDateInput); 
```

**或者**

```
var defaultDateInput = new Date(1970, 01, 26);
$("input.datepicker_DOB").val(defaultDateInput); 
```

# iphone - 分发临时配置文件拒绝访问联系人

> ID：15400978
> 
> 赞同：1
> 
> 时间：2013-03-14T04:03:02.440
> 
> 标签：iphone, ios, objective-c, provisioning-profile, ios-provisioning

我的分发配置文件不允许我访问我的 iPhone 的联系人，我需要获得苹果的一些特殊许可吗？我的开发人员配置文件运行良好，即它可以访问我手机的联系人，而分发配置文件拒绝它。它在 ios 5 模拟器和 iOS 6 模拟器中都运行良好。

提前致谢..

```
__block BOOL accessGranted = NO;
if (ABAddressBookRequestAccessWithCompletion != NULL) { // we're on iOS 6
dispatch_semaphore_t sema = dispatch_semaphore_create(0);
ABAddressBookRequestAccessWithCompletion(addressBook, ^(bool granted, CFErrorRef error)          {
    NSLog(@"Error ref %@",error);
    NSLog(@"Access %i",accessGranted);
    accessGranted = granted;
    dispatch_semaphore_signal(sema);
});
dispatch_semaphore_wait(sema, DISPATCH_TIME_FOREVER);
dispatch_release(sema);
}
else { // we're on iOS 5 or older
addressBook = ABAddressBookCreate();
accessGranted = YES;
}

if (accessGranted) {
//my code
} 
```

# java - 如何在 Eclipse 中自动完成 Drools？

> ID：15400979
> 
> 赞同：1
> 
> 时间：2013-03-14T04:03:05.437
> 
> 标签：java, eclipse, drools

在 Eclipse Juno SR1 中，Drools (5.5.0.Final) 的自动完成似乎不是默认的。

我所做的是

1.  下载eclipse-jee-juno-SR1-win32-x86_64.zip，解压
2.  添加更新站点[http://download.jboss.org/drools/release/5.5.0.Final/org.drools.updatesite/](http://download.jboss.org/drools/release/5.5.0.Final/org.drools.updatesite/)，安装
3.  下载drools-distribution-5.5.0.Final.zip，解压
4.  指定 Drools 运行时
5.  从 drools-distribution-5.5.0.Final\examples\sources 导入现有项目
6.  重新开始
7.  确认我可以编译并运行示例

毕竟，我可以按住Ctrl键点击跳转到类声明，在我输入“。”后立即自动完成。**仅在 java 文件**中。这些都不适用于 drl 文件。

我知道 Drools 还没有自动完成 Drools 文件中定义的类或函数。我不是要求那个。我只是要求自动完成 drl 文件中的 java 类等。

您能否告诉我是否有任何我错过了自动完成和 Ctrl-click 以在 drl 文件中工作的配置？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:24:36.290

我完全按照您在此处描述的做了，而且 afaik，这是有效的。您应该能够在规则条件和结果中获得基本的代码完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T21:14:38.790

对于drl，eclipse+drools插件应该有java类的代码补全。但是这样的功能不适用于 dslr。我不确定 JBoss Developer Studio 是否有额外的。

# ios - 在 iOS 中捕获屏幕视频，尤其是 iPad Ratina

> ID：15400980
> 
> 赞同：1
> 
> 时间：2013-03-14T04:03:10.917
> 
> 标签：ios, uiview, screenshot, calayer, video-capture

在我的一个 iPad 应用程序中，我需要添加在屏幕上录制所有内容并创建视频的功能。我在这里找到了很棒的 ScreenCaptureView：http://aroth.no-ip.org:82/wordpress/archives/673 [，](http://aroth.no-ip.org:82/wordpress/archives/673)它确实有效。但它在我的 iPad 4 上表现不佳。在使用 Instruments 进行分析后，我发现痛点是每 100 毫秒（默认为 10 帧/秒）调用一次“renderInContext”来获取当前屏幕截图。

然后我google了一下，尝试了很多，比如使用[[self.layer representationLayer] renderInContext:context]，甚至还有私有API UIGetScreenImage()。但他们都有糟糕的表现。renderInContext 方法调用每次可能需要超过 300 毫秒。:(

那么，有没有什么高性能的方法来获取当前的截图图像呢？还是有比上面列出的更好的视频捕获方法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T06:33:58.353

尝试 VTMScreenRecorderTest。我已经使用它并且效果很好。！！！

[http://www.subfurther.com/blog/2011/04/](http://www.subfurther.com/blog/2011/04/)

希望它有帮助..

# file - 如何查找附加到 Dreamweaver 模板的页面

> ID：15400983
> 
> 赞同：1
> 
> 时间：2013-03-14T04:03:18.510
> 
> 标签：file, templates, dreamweaver, locate

我有一个包含多个模板 (.dwt) 的站点

两个问题：

有没有一种方法可以轻松找到附加到特定模板的页面或文件，而无需打开每个文件？

有没有办法只更新附加到模板的选定文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T21:33:40.173

这个页面有很多关于使用模板的信息：

[Dreamweaver 模板帮助](http://help.adobe.com/en_US/dreamweaver/cs/using/WScbb6b82af5544594822510a94ae8d65-7a9da.html)

要查找使用特定模板的所有页面，您可以搜索（command+f 或 control+f）`<!-- InstanceBegin template="/Templates/***YourTemplateName***.dwt.php"`，确保从第一个下拉列表中选择整个站点... ![在此处输入图像描述](../Images/46da2a0960af2494861d08d90aa664ab.png)

...和第二个的源代码 ![在此处输入图像描述](../Images/b79ad804f3d168ec42aad1320f714728.png)

您可以通过选择修改 -> 模板 -> 更新当前页面来更新打开的文件

# python-2.7 - 如何在arch linux中用python 2完全替换python 3

> ID：15400985
> 
> 赞同：16
> 
> 时间：2013-03-14T04:03:26.267
> 
> 标签：python-2.7, python-3.x, environment-variables, archlinux

我想在 Arch linux 中用 python 2 完全替换 python 3。我已经阅读了[https://wiki.archlinux.org/index.php/Python](https://wiki.archlinux.org/index.php/Python)但它只提供了一个临时修复。我需要确保当我打电话时

```
#!/usr/bin/python 
```

我的程序使用的是 python 2 而不是 python 3。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-14T04:08:41.897

在 Arch 中，`/usr/bin/python`实际上是一个指向 python3 的符号链接。假设您已经以 root 身份安装了 python2，请将符号链接更改为指向 python2：

```
cd /usr/bin
ls -l python
    lrwxrwxrwx 1 root root 7  5 sept. 07:04 python -> python3
ln -sf python2 python
ls -l python
    lrwxrwxrwx 1 root root 7 Dec 11 19:28 python -> python2 
```

如果您正在使用该`python2-virtualenv`软件包，请对以下内容执行相同操作`/usr/bin/virtualenv`：

```
cd /usr/bin
ln -sf virtualenv2 virtualenv 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-12-16T21:57:52.653

更改默认符号链接是个坏主意，它会在 python3 更新时重新创建。相反，创建一个本地`python`覆盖：

`sudoedit /usr/local/bin/python`

将其粘贴到里面并保存文件：

```
#!/bin/bash
exec python2 "$@" 
```

不要忘记使其可执行：

`sudo chmod +x /usr/local/bin/python`

# algorithm - 多图中的循环检测

> ID：15400993
> 
> 赞同：3
> 
> 时间：2013-03-14T04:04:06.693
> 
> 标签：algorithm, graph

我想在无向多图中列出所有循环。

[Tarjan 的强连通分量算法](http://en.wikipedia.org/wiki/Tarjan%27s_strongly_connected_components_algorithm)是为有向图编写的。它适用于多图吗？如果没有，是否有无向多图的循环列表算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T04:28:05.837

有几种方法可以将您的问题减少到 Tarjan，具体取决于您希望如何计算周期。

首先，对图表应用两个转换：

1.  通过用一对相反的有向边替换每个无向边来转换为有向图。
2.  对于每对节点，将指向相同方向的边折叠成一条边。

您将得到一个有向图。应用 Tarjan 算法。

现在，根据您对周期的看法，您可能完成也可能不完成。如果一个循环是一组节点（恰好拥有所需的边），那么您可以直接从转换后的图中读取循环。

如果一个循环是一组边（共享所需的节点），那么您需要“展开”上面步骤 2 中引入的边。对于每个折叠的边，沿着它替换的一组真实边进行枚举。对每个折叠循环中的每个边缘都这样做将在组合爆炸中产生所有实际循环。请注意，这将产生您需要修剪的虚假两个周期。

为了说明，假设原始图有三个节点和`A`，两条边在和之间，一条在和之间，一条在和之间。折叠图将是一个三角形，有一个循环。`B``C``A``B``B``C``A``C`

找到三个节点之间的循环后，遍历每个边组合以恢复完整的循环集。这里有两个循环：都包括`A`to`C`和`B`to`C`边。`A`他们选择的`B`边缘不同。

`B`如果原始图在和之间也有两条边`C`，则将有四个扩展图。扩展循环的总数是边数的乘积：`4 == 2 * 2 * 1`。

# c - 现实数据库和查询

> ID：15400994
> 
> 赞同：0
> 
> 时间：2013-03-14T04:04:09.990
> 
> 标签：c, database, struct

我想尝试对关系数据库进行一些查询操作。例如

```
relation cars

    brandname     type     year   
       acura        suv       2012
        bmw          sedan     2013 
```

和/或

```
relation transport

transport vehicle       capacity    ticketprice
bus                          40        30
airplane                   300         500
taxi                          3        125

in this database has up to 100 relations.
each relation could has 10 attributes.
each relation could has 10000 row data. 
```

在这个数据库中有一个文本文件。这个文件，2辆汽车运输

第一行在这个文件中有什么关系？和其他行的关系名称。

每个关系有 2 个不同的文件。第一个文本文件，

```
3
brandname  String  20
type       String  10
year       Int     4 
```

第一行是这个关系表中有多少属性其他行属性和类型（字符串/整数）和属性大小（字节）

第二个文件是二进制文件，每行数据都有一个信息。“讴歌 suv 2012”，但它的二进制文件。

所以，

我是这样想的，

首先我必须创建结构，比如，

```
struct relation{
char attribute[10];
char row[10000];
}

struct row {
char type[2]; //string or integer
char title[???];   //i think i have to read from binary file how many title in this file  ??
long size;   //how many bytes size of each attribute
} 
```

但我不确定我的想法是否正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-10T12:10:36.163

您可以根据文件结构对 C 数据结构进行松散的建模。

```
struct attribute
{
    char title[17+1]; // or whatever the max. title string length; e. g. "year"
    char type;
    long size;
    unsigned char **data; // dynamically allocate data[0] up to data[10000-1]
};

struct relation
{
    char name[9+1];   // e. g. "cars", "transport"
    int how_many_attributes;
    struct attribute att[10]; // up to 10
};

struct database
{
    int how_many_relations;
    struct relation rel[100]; // up to 100
}; 
```

# jquery - JQuery Mobile：动态Listview + Checkbox在第一时间显示乱七八糟

> ID：15400997
> 
> 赞同：0
> 
> 时间：2013-03-14T04:04:11.207
> 
> 标签：jquery, mobile

我有以下代码可以在列表视图中动态添加复选框。在第一次显示时，它显示了如图 1 所示的混乱格式。如果我单击刷新按钮，它调用相同的代码来更新列表视图的内容，它就会像图 2 中那样正确。

我错过了什么吗？谢谢

[图1： http](http://postimage.org/image/6bvo8fpdd/) : //postimage.org/image/6bvo8fpdd/图2：http : [//postimage.org/image/gnyuokteb/](http://postimage.org/image/gnyuokteb/)

```
<div data-role="page" id="page2">

<div data-role="content" align="center">    
    <fieldset data-role="controlgroup" data-type="horizontal"><input type="radio" name="q1" id="checkall" value="checkall"/><label for="checkall">Check All</label><input type="radio" name="q1" id="uncheckall" value="uncheckall" checked="checked"/><label for="uncheckall">Uncheck All</label></fieldset>
    <p>
    <fieldset data-role="controlgroup" >                                                             
    <ul id="mylist" data-role="listview" data-inset="true" data-theme="d" data-count-theme="b" data-filter="true" ">            

    </ul>
    </fieldset>
    </p>                   
</div> 
```

```
function showCode(refresh){
var output ='';
var iCounter = 0;

$('#mylist').empty();

for (var i = 0; (i < g_Data.length && iCounter < 10); i+=2 ) {
            iCounter += 1;

            output += '<li><input type="checkbox" name="chk-'+iCounter + 'a" id="chx-'+iCounter +'a" class="custom" />'+ g_Data[i]+'<span class="ui-li-count">' + g_Data[i+1] + '</span></li>';

        }

$('#mylist').append(output).listview('refresh');} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:30:20.953

为您的列表视图调用“刷新”后，尝试为您的页面调用“创建”函数。

像这样的一些事情：

```
// refresh list
$('#mylist').append(output).listview('refresh');

// refresh page
$('#page2').trigger('create'); 
```