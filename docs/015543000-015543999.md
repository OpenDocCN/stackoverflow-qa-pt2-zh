# StackOverflow 问答 15543000-15543999

# excel - 我不知道如何使我的函数工作（CountIF 有 2 个语句和 2 个范围）

> ID：15543007
> 
> 赞同：0
> 
> 时间：2013-03-21T08:55:59.637
> 
> 标签：excel, countif

我不知道如何使我的功能正常工作。这是我尝试实现的功能：

```
=COUNT(IF(Sheet1!$V$6:$V$1026;Sheet2!C7, IF(Sheet1!$J$6:$J$1026;Sheet2!B7))) 
```

这就是我想做的：（示例）

**表 1**

```
 J         V        
6  test      Low 
```

**表 2**

```
 B      C           cell with function
7    test   Low                  1 
```

怎么了？还有其他方法可以做同样的事情吗？

附加问题，当我不想使用 1026 作为最终范围但当我想使用一个范围直到最后一个单元格的值时，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:16:36.267

我认为您要实现的目标是：

```
=SUM(IF(Sheet1!$V$6:$V$1026=C7,IF(Sheet1!$J$6:$J$1026=B7,1,0),0)) 
```

这是一个数组函数，因此您必须使用 Crtl+Shift+Enter 而不是仅使用 Enter 才能使其工作。

公式的主要问题之一是 IF 语句由三个参数组成：一个测试后跟 true，然后 false 用逗号分隔。在您的公式中，您没有测试，并且您使用的是分号。

# android - Javascript 未在 android 的 web 视图中加载

> ID：15543008
> 
> 赞同：1
> 
> 时间：2013-03-21T08:56:03.823
> 
> 标签：android, mobile-webkit

我正在尝试为 android 编写一个混合应用程序。在这个应用程序中，我试图加载 jquery 和一堆其他框架。所有的 javascripts 都位于 assets 文件夹中。现在的问题是，当我尝试加载任何 javascript 时，我没有看到任何异常，但是 javascript 没有加载。

如果我提供了无效文件或方案的路径，我会立即看到一条控制台消息并记录

```
 <script type="text/javascript" charset="utf-8" src="jquery.js" />

    <script type="text/javascript" charset="utf-8" src="js/underscore.js" />
    <script type="text/javascript" charset="utf-8" src="js/backbone.js" />

    <script type="text/javascript" charset="utf-8" src="js/app.js" />

</head>
<body>

    page loaded...

    <script>
        console.log('-----loading-----'); 
```

我从来没有看到页面加载或---正在加载---

但是如果我删除 js 包含我会看到正在执行的脚本。可能出了什么问题

```
<!DOCTYPE HTML>
<html>
<head>
<meta name="viewport" content="width=320; user-scalable=no" />
<meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <script type="text/javascript" src="some.js"/>
    <script type="text/javascript" src="some2.js"/>
</head>
<body>

    page loaded...

    <script>
        console.log('-----loading-----');
</script>

</body> 
```

some.js console.log("!");

和 some2.js console.log("2");

我只看！从不 2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:03:29.467

其中一个 javascript 文件几乎有任何问题。把它们一一拿出来找出是哪一个导致了问题，然后调试脚本。某些不应该在的地方未定义，缺少括号或括号等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:28:43.837

问题出在html中。我将上面的 html 提供给 HTML5 验证器。它建议脚本不能是自包含标签。

我替换为

这一切都开始起作用了。天哪，在我最后浪费了这么多时间。无论如何，感谢所有帮助过的人。

# stream - 将 RTSP 转储到文件，如 rtmpdump

> ID：15543014
> 
> 赞同：1
> 
> 时间：2013-03-21T08:56:17.897
> 
> 标签：stream, rtsp, dump, rtmp

如何将 RTSP 流转储到文件中？

对于 RTMP，我可以这样做：

```
rtmpdump --quiet --start=0 --stop=10 -rtmp=[Path to stream] --flv=dump.f4v 
```

我需要为 RTSP 做同样的事情。我在 OS X 上，可以访问 VLC、python 和 ffmpeg。

我只需要保存一小段 10 秒的流样本来测试服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-26T19:49:56.407

使用 FFmpeg 或其分支 Libav，您确实可以转储“RTSP 流”：

```
avconv -i "rtsp://[Path to stream].sdp" -acodec copy -vcodec copy -f mp4 dump.mp4 
```

稍后您可以使用以下命令回放转储：

```
avplay dump.mp4 
```

您还可以使用“mplayer”或“vlc”进行播放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-11T20:13:40.823

您可以使用以下命令将其与 FFmpeg 一起转储。

> ffmpeg -i "[流的路径]" -t 10 -c 复制转储.f4v

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T17:47:43.727

将“RTSP 流”“转储”到文件是没有用的。RTSP 是客户端和服务器之间的双向对话。每次运行时字节内容都会发生变化，因此您无法以任何有意义的方式重播捕获的数据。

如果您的问题只是关于检查服务器是否正常工作，则 vlc 或 ffplay 都可以充当 RTSP 客户端。在此场景中，您必须已使用媒体文件（通常为 .mov 或 .mp4 格式）配置服务器。请参阅服务器说明以了解如何完成此操作。

启动 ffplay 客户端将具有以下形式：

ffplay rtsp://192.168.1.2/movie/blade.mp4

# visual-studio - 缓慢的 cheetah xml 转换工具正在覆盖原始配置

> ID：15543015
> 
> 赞同：2
> 
> 时间：2013-03-21T08:56:27.633
> 
> 标签：visual-studio, configuration, connection-string, transformation, slowcheetah

我正在使用慢速猎豹网络配置转换工具来根据部署设置转换 connection-string.config。问题是在转换后它也会覆盖转换后配置解决方案中的原始 ConnectionString 。知道我在这里缺少什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T21:19:27.203

我以前听说过这个，但无法弄清楚这里发生了什么。我认为这可能特定于某些特定的环境配置。

如果您受到此影响，您可以通过在下面评论以下信息来帮助我解决这个问题。

1.  操作系统版本
2.  视觉工作室版本
3.  您的家庭驱动器是否映射到网络共享
4.  您的机器设置有什么不寻常的地方吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T15:22:28.823

我遇到了同样的问题，并通过直接在 .csproj 文件中更改以下代码来解决它：

```
<Content Include="Web.config">
  <TransformOnBuild>false</TransformOnBuild>
  <SubType>Designer</SubType>
</Content> 
```

我已将设置更改`TransormOnBuild`为`false`. 部署时，它仍然使用转换后的 Web.config 文件（使用文件系统部署类型测试）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-03T15:44:53.973

问题似乎是您安装了 .NET **4.0**版。升级到**4.5**后，该问题已完全消失。

# java - 当有行跨度时，flextable 会被点击列

> ID：15543021
> 
> 赞同：1
> 
> 时间：2013-03-21T08:56:42.643
> 
> 标签：java, gwt, click, flextable

我有一个带有 rowpan 的 flextable。在表的单击事件上，我试图获取表的行索引和列索引。

如果该行没有行跨度，则没有问题，但是当该行有任何行跨度时，我得到的 col 索引应该更少。我得到这个：

```
idx : the index i am geting
sCnt: span count at that row
clIdx: column index that i click

idx = clIdx - sCnt; 
```

我正在使用这段代码：

```
int row = flexTable.getCellForEvent(event).getRowIndex();
int col = flexTable.getCellForEvent(event).getCellIndex(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:26:34.127

Well I could not find the solution but I've done somethi,ng I didn't like. I've written a new widget extending focuspanel and it keeps column and row indexes. These indexes are set in the constructor and I access indexes via my widget's click event.

# css - 对部分页面使用 YUI 网格 css 样式

> ID：15543024
> 
> 赞同：0
> 
> 时间：2013-03-21T08:56:48.453
> 
> 标签：css, yui

我的页面中有一个菜单栏，我没有为此应用 YUI 样式。在此之下，我想使用 YUI 样式的三个文档部分。示例代码：

```
<?php
include("style.html");
?>

<script src="http://yui.yahooapis.com/3.9.0/build/yui/yui-min.js"></script>
<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/2.9.0/build/grids/grids-min.css">
<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/2.9.0/build/reset-fonts-grids/reset-fonts-grids.css">

</head>
<body>
<div><h1>HEAD</h1></div>

<div id=top>TOP MENU</div> //top is defined in the included style html file

<div class="yui-gb">
  <div class="yui-u first">BODY PART</div>

..... 
```

我使用 YUI 的部分很好，但 yui 也会影响其他 div 部分。我该如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:06:49.573

网格不应该影响其他 div，但您似乎正在加载 reset-fonts-grids，其中的重置部分会影响其他 div。您似乎也正在加载 3.9.0 YUI 但从 2.x (2.9.0) 版本开始的 CSS 我建议避免跨越该障碍，除非您*真的*知道为什么要这样做。

3.9.0 也有重置、字体和网格 CSS 文件。在使用 3.9.0 版本的情况下，您可以使用上下文重置类来约束它所针对的页面部分。为此，您需要加载“cssreset-context/cssreset-context-min.css”，然后将“yui3-cssreset”类添加到要重置的容器中。这记录在这里：

[http://yuilibrary.com/yui/docs/cssreset/#context](http://yuilibrary.com/yui/docs/cssreset/#context)

# java - 我怎么在这个简单的 sqlite 查询中得到一个语法错误代码 1

> ID：15543025
> 
> 赞同：-2
> 
> 时间：2013-03-21T08:56:51.237
> 
> 标签：java, android, sql, sqlite

我有一个这样的 sqlite 查询：

```
String sql_group = "CREATE TABLE group(id VARCHAR(25),name VARCHAR(25),account_id VARCHAR(25));" 
```

当我这样做时：

```
db.execSQL(sql_group); 
```

它会导致致命错误，我在编译时遇到语法错误代码 1。

我不明白它是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T09:01:02.340

因为`GROUP`，这是您的表的名称，是一个保留关键字。你仍然使用它，但你需要用`brackets`,来逃避它

```
String sql_group = "CREATE TABLE [group](id VARCHAR(25), ..."; 
```

*   [SQLite 关键字（*包括转义关键字的方法*）](http://www.sqlite.org/lang_keywords.html)

但我建议你应该避免使用这样的名称，以避免将来出现问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T09:01:19.307

您已使用[group](http://www.w3schools.com/sql/sql_groupby.asp)作为表名，但这是 SQL 运算符 :) 只需使用另一个词

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T09:06:30.013

你可以用这种方式。

```
String table_creation="CREATE TABLE test_Table +" (" +
        " id INTEGER PRIMARY KEY AUTOINCREMENT, " +
        " name TEXT NOT NULL , " + 
        " address TEXT , " + 
        " city TEXT)"; 
```

现在您可以使用此**table_creation**来创建表。

# iphone - 仅设备中的 FB SDK 集成错误 + IOS SDK

> ID：15543027
> 
> 赞同：0
> 
> 时间：2013-03-21T08:56:55.447
> 
> 标签：iphone, ios, facebook

我在 facebook 应用程序设置中添加了应用程序详细信息，例如添加捆绑 ID 并启用 facebook 登录。

但我仍然遇到以下错误：

`error Domain=com.facebook.sdk Code=2 "The operation couldn’t be completed. (com.facebook.sdk error 2.)" UserInfo=0x1d100770`

```
{
    com.facebook.sdk: ErrorLoginFailedReason=com.facebook.sdk: SystemLoginError,
    com.facebook.sdk: ErrorInnerErrorKey=ErrorDomain=NSURLErrorDomainCode=-1202"The certificate for this server is invalid. You might be connecting to a server that is pretending to be “api.facebook.com” which could put your confidential information at risk."UserInfo=0x1d101ea0{
        NSErrorFailingURLStringKey=https: //api.facebook.com/method/auth.iosauthorizeapp,
        NSLocalizedRecoverySuggestion=Wouldyouliketoconnecttotheserveranyway?,
        NSErrorFailingURLKey=https: //api.facebook.com/method/auth.iosauthorizeapp,
        NSLocalizedDescription=Thecertificateforthisserverisinvalid.Youmightbeconnectingtoaserverthatispretendingtobe“api.facebook.com”whichcouldputyourconfidentialinformationatrisk.
    },
    com.facebook.sdk: ErrorSessionKey=<FBSession: 0x1c5a43a0,
    state: FBSessionStateClosedLoginFailed,
    loginHandler: 0x0,
    appID: 504044126326670,
    urlSchemeSuffix: ,
    tokenCachingStrategy: <FBSessionTokenCachingStrategy: 0x1c5d1a70>,
    expirationDate: (null),
    refreshDate: (null),
    attemptedRefreshDate: 0001-12-3000: 00: 00+0000,
    permissions: (null)> } 
```

谢谢

# java - 如何将 Joda 时间 LocalTime 转换为 java.util.Date？

> ID：15543031
> 
> 赞同：1
> 
> 时间：2013-03-21T08:57:05.093
> 
> 标签：java, jodatime

我想将 Joda LocalTime 转换为 java.util.Date 而**不是**LocalDate。如果这有帮助，我已经有了一个 LocalTime 对象。显然，LocalTime 中没有“日期”部分。所以我不能直接将 LocalTime 转换为 Date。有没有一种简单的方法可以做到这一点？

脚步 -

```
LocalTime loct 
LocalDate locd = Todays date + loct
Date da = locd.toDate(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T09:06:23.407

```
Date da = loct.toDateTimeToday().toDate(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T09:06:20.180

你有没有尝试过

```
locd.withFields(loct).toDate(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T09:22:57.623

你也可以用这个——

```
Date dtUtil = DateTime.now(DateTimeZone.getDefault()).toDate(); 
```

通用的方法是-

```
Date dtUtil = DateTime.now(DateTimeZone.forID("TimeZoneString")).toDate(); 
```

其中“TimeZoneString”是您想要获取时间的时区 ID。

DateTimeZone.getDefault() 将返回系统的本地区域。

# security - 尽管提供了 PEM 文件，但连接 AWS EC2 实例仍要求输入密码

> ID：15543032
> 
> 赞同：13
> 
> 时间：2013-03-21T08:57:05.463
> 
> 标签：security, amazon-web-services, amazon-ec2

我刚刚在 AWS 上创建了一个 EC2 实例。在此之前，我创建了我的密钥对，下载了私钥。

我现在正在尝试登录到新创建的实例（使用正确的主机名，当然，为了安全起见，我在这里替换了）。我添加了 -v 开关来获取调试输出：

```
ssh ec2-user@myVirtualHost.compute-1.amazonaws.com -i ~/EC2key.pem -v 
```

虽然我提供了密钥文件，但我被要求输入密码。这是调试输出的摘录，可能显示出了什么问题：

```
debug1: Host 'myVirtualHost.compute-1.amazonaws.com' is known and matches the ECDSA host key.
debug1: Found key in /home/myuser/.ssh/known_hosts:15
debug1: ssh_ecdsa_verify: signature correct
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug1: SSH2_MSG_NEWKEYS received
debug1: Roaming not allowed by server
debug1: SSH2_MSG_SERVICE_REQUEST sent
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug1: Authentications that can continue: publickey,password
debug1: Next authentication method: publickey
debug1: Trying private key: /home/myuser/EC2key.pem
debug1: read PEM private key done: type RSA
debug1: Authentications that can continue: publickey,password
debug1: Next authentication method: password
ec2-user@myVirtualHost.compute-1.amazonaws.com's password:[asks for password here] 
```

为什么在“读取 PEM 私钥完成：键入 RSA”之后得出的结论是“可以继续的身份验证：公钥，密码”？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T22:56:39.697

我很高兴也很谦虚地报告问题是我试图与不存在的用户进行 ssh。我遵循的教程建议使用与相应 AMI 中的用户名不对应的登录名。这是亚马逊支持人员在仔细检查他们的教程时提出的。

I am not sure if there is a way how to discover the default login name from the EC2 Management Console. At least a quick search for the correct user name in the properties did not turn up any matches.

Now I can log on also without providing the key file through -i option, because I've added the key to my keyring with ssh-add command.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T13:49:47.167

好吧，就失败的原因而言，这可能是客户端或服务器端。

客户端：确保您的 .ssh 目录的权限为 0700，EC2key.pem 的权限为 0600。

**服务器端：确保在您的sshd_config**中将“PubkeyAuthentication”设置为“yes” （如果您能够进入的话）。您还可以使用调试模式（-d 标志）手动运行 SSH 服务以捕获其他潜在原因（同样，如果您有权访问）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T08:59:15.063

您是否尝试在 Keyring 中添加密码？

去扔这篇文章

[http://aws.amazon.com/articles/1233](http://aws.amazon.com/articles/1233)

`# vi /etc/ssh/sshd_config`

找到线 `PasswordAuthentication yes`

并将其更改为 `PasswordAuthentication no`

保存文件并重新启动 sshd： `# /etc/init.d/sshd restart`

# android - 如何将 List<> 写入包裹

> ID：15543033
> 
> 赞同：24
> 
> 时间：2013-03-21T08:57:12.837
> 
> 标签：android

```
public class Category implements Parcelable {

    private int mCategoryId;
    private List<Video> mCategoryVideos;

 public int getCategoryId() {
        return mCategoryId;
    }

    public void setCategoryId(int mCategoryId) {
        this.mCategoryId = mCategoryId;
    }

 public List<Video> getCategoryVideos() {
        return mCategoryVideos;
    }

    public void setCategoryVideos(List<Video> videoList) {
        mCategoryVideos = videoList;
    }

@Override
    public void writeToParcel(Parcel parcel, int i) {
        parcel.writeInt(mCategoryId);
        parcel.writeTypedList(mCategoryVideos);
    }

    public static final Parcelable.Creator CREATOR = new Parcelable.Creator() {
        public Category createFromParcel(Parcel parcel) {
            final Category category = new Category();

            category.setCategoryId(parcel.readInt());
            category.setCategoryVideos(parcel.readTypedList()); */// **WHAT SHOULD I WRITE HERE***

            return category;
        }

        public Category[] newArray(int size) {
            return new Category[size];
        }
    };

} 
```

我的代码我正在使用从 parcelable 实现的模型...谁能告诉他们我在这一行中写了什么我`category.setCategoryVideos(parcel.readTypedList())` 找不到任何有用的帖子。

编辑：`category.setCategoryVideos(parcel.readTypedList(mCategoryVideos,Video.CREATOR));`在这里 mCategoryVideos 我无法解决错误。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-21T09:37:58.433

Parcelable 类有列表方法，你可以在这里查看它们：

[readList（列出 outVal，ClassLoader 加载器）](http://developer.android.com/reference/android/os/Parcel.html#readList%28java.util.List,%20java.lang.ClassLoader%29)

[writeList（列表值）](http://developer.android.com/reference/android/os/Parcel.html#writeList%28java.util.List%29)

在您的情况下，它看起来像：

```
List<Object> myList = new ArrayList<>();

parcel.readList(myList,List.class.getClassLoader());
category.setCategoryVideos(myList); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-06-20T11:28:03.497

[从一个好的答案：](https://stackoverflow.com/a/20492948/3994630)

简单的步骤：

```
private List<MyParcelableClass> mList;

protected MyClassWithInnerList(Parcel in) {
    mList = in.readArrayList(MyParcelableClass.class.getClassLoader());
}
@Override
public void writeToParcel(Parcel dest, int flags) {
    dest.writeList(mList);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T09:37:43.560

```
public static final Parcelable.Creator<Category> CREATOR = new Parcelable.Creator<Category>() {
            public Category createFromParcel(Parcel in) {
                return new Category(in);
            }

            public Category[] newArray(int size) {
                return new Category[size];
            }
        };

private Category(Parcel in) {
    String[] data = new String[1];
    in.readStringArray(data);
    mCategoryId = Integer.parseInt(data[0]);
}

public void writeToParcel(Parcel dest, int flags) {
    dest.writeStringArray(new String[]{
            mCategoryId
    });
} 
```

然后在你的活动中。

```
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putParcelableArrayList("mCategoryVideos", (List<? extends Parcelable>) mCategoryVideos);
}

public void onRestoreInstanceState(Bundle inState) {
    super.onRestoreInstanceState(inState);
    if (inState != null) {
        mCategoryVideos = inState.getParcelableArrayList("mCategoryVideos");
        // Restore All Necessary Variables Here
    }
} 
```

# asp.net - 数据库设计和参照完整性

> ID：15543035
> 
> 赞同：3
> 
> 时间：2013-03-21T08:57:18.837
> 
> 标签：asp.net, sql, database

我正在设计一个网站 UI（注册、登录、编辑个人资料、编辑地址等）

我创建了以下表格。我的问题是，是否有多余的列或表？此外，考虑到用户可以添加/编辑另一个地址这一事实，哪些列将是主键，哪些将是外键？

我正在使用三个下拉列表`CountryCode`（对于手机号码）-从`CountryCode`of填充`ACountry`，`Country`（对于地址）-从`Country Name`from`ACountry`和`State`（对于地址）-从`StateName`from填充`Astate`。其中，国家代码下拉菜单出现在注册页面上。另外两个在用户登录后显示的地址簿页面上。`AUser`&`AUserAddress`表将存储数据。

我不知道我将如何加入这些表。我是否包含了足够/更多/更少的列？我应该做些什么改变。

UPDATE1：我已将数据库更新为以下表/列。现在我如何建立 Countrycode 和 Countrycode（标记）之间的关系......或者我应该从 AUser 中删除 CountryCode。如果我保留这两个表，我会将数据存储在两个地方。我不想那样做...问题是 Countrycode 的格式。它需要姓名和拨号代码（例如印度（+91））。如果我从 AUser 中删除该列，我将如何存储手机号码。然后？可能我将不得不打破国家代码字符串并删除拨号代码部分并将其与手机号码一起存储。在移动列中。这听起来太复杂了。

![在此处输入图像描述](../Images/22ac1ade56d2bd72a30d6008b380214e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T08:59:45.197

唯一不正确的关系是`AUser`和之间`ACountry`。目前，您`CountryCode`在`AUser`. 那应该是`CountryID`相反的，因为那是`ACountry`.

另外，不应该`AUserAddress`和`StateID`不应该`State`吗？如果是这种情况，则无需同时拥有`StateID`和在该表上，您可以通过查看列中引用`CountryID`的相应内容来确定用户的国家/地区。`State``StateID`

# unix - 启动脚本时出错：执行 shell 脚本时没有这样的文件或目录

> ID：15543038
> 
> 赞同：1
> 
> 时间：2013-03-21T08:57:27.673
> 
> 标签：unix

我刚刚遇到了与[http://www.unix.com/shell-programming-scripting/84684-getting-no-such-file-directory-while-executing-shell-script.html中所述相同的问题](http://www.unix.com/shell-programming-scripting/84684-getting-no-such-file-directory-while-executing-shell-script.html)

用户提问：“我得到：执行 shell 脚本时没有这样的文件或目录。但我在相应的路径中有相应的文件。它也有可执行权限。”

回答：“你的脚本是用 /directory/scriptname 还是 ./scriptname 开始的？”

这适用于，一旦我使用“./scriptname”启动脚本。我在多台服务器上启动了这个脚本，在某些机器上我可以只使用“scriptname”而在其他机器上我需要使用“./scriptname” 为什么在某些机器上需要“./”而在其他机器上不需要？在所有机器上，文件权限都是相同的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:00:25.033

如果当前目录 ( `.`) 在 中`PATH`，则可以两种方式运行脚本：

```
script.sh        # Shell will look for the script.sh in
                 # every directory listed in $PATH

./script.sh      # Shell will invoke the script.sh located
                 # in the current directory. 
```

如果当前目录不在 中`PATH`，则必须像这样运行它：

```
./script.sh 
```

那是因为 shell 不知道在哪里可以找到这个脚本——它的父文件夹不在`PATH`. 调用它会`./`告诉 shell 在哪里可以找到它。

要将当前目录添加到`PATH`，请发出以下命令：

```
$ export PATH=$PATH:. 
```

该列表以冒号分隔，上面的意思是“新路径将与旧路径相同，但添加了当前目录 ( `.`)”。

**编辑：**注意@Cyrille 评论 -`.`加入`PATH`可能不是一个好主意（出于安全原因）。

# php - 如何在 SQL 中执行 OR 查询

> ID：15543044
> 
> 赞同：0
> 
> 时间：2013-03-21T08:57:52.923
> 
> 标签：php, mysql

我想将某些类别的访问权限仅限于某些组织的用户。

```
User
User_id, Username, Organisation_id

Organisation
Organisation_id, Org_name

Category
Category_id, Cat_name

Category_Organisation
Category_id, Organisation_id 
```

所以我的查询变成了这样-

```
SELECT * FROM category c 
INNER JOIN category_organisation co ON co.category_id = c.category_id 
AND co.organisation_id = 'LOGGED_IN_USERs_ORGANISATION_ID' 
```

如果我要添加一个例外，即也允许一些用户，那么我有这个表

```
Category_user
Category_id, User_id 
```

我的问题是——

1.  如何在此处进行 OR 搜索，以便查询返回属于给定组织 ID 或给定用户 ID 的类别
2.  `Discussions`我想要对表进行类似的限制。所以我创造了..

    讨论

    讨论_id，讨论_标题

    讨论_用户

    Discussion_Id, User_id

    讨论_组织

    Discussion_Id，Organization_id

如您所见，我必须创建类似的表 - 您认为我可以为所有这些产品、类别或任何其他新表实现一个主要权限表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:12:51.060

请试试这个：

```
SELECT * FROM category c 
INNER JOIN category_organisation co ON co.category_id = c.category_id 
AND co.organisation_id = 'LOGGED_IN_USERs_ORGANISATION_ID' OR c.category_id IN( SELECT Category_user.Category_id FROM Category_user WHERE Category_user.User_id = 'LOGGED_IN_USERs_ORGANISATION_ID') 
```

# cygwin - 如何在 Windows 上的 Cygwin 中使用差异和补丁？

> ID：15543046
> 
> 赞同：4
> 
> 时间：2013-03-21T08:57:57.753
> 
> 标签：cygwin, diff, patch

我关注了很多文章，但我仍然不知道如何在 Cygwin 中使用 diff 和 patch

在这里，我在 Windows 资源管理器中创建了 2 个文件

**起源.txt**

```
one
two
three 
```

**新的.txt**

```
one
four
five 
```

然后我`diff -u origin.txt new.txt > file.patch`导致了这个

```
--- origin.txt  2013-03-21 15:53:20.062956800 +0700
+++ new.txt 2013-03-21 15:53:29.191869600 +0700
@@ -1,3 +1,3 @@
 one
-two
-three
\ No newline at end of file
+four
+five
\ No newline at end of file 
```

然后我`patch origin.txt < file.patch`显示错误

```
patching file origin.txt
Hunk #1 FAILED at 1.
1 out of 1 hunk FAILED -- saving rejects to file origin.txt.rej 
```

如何克服这一点？这与 Unix 和 Windows 文件格式有关吗？

**P/S**：我使用的是 CYGWIN_NT-6.1-WOW64 和 Windows 7 64bit

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T11:00:47.373

这几乎可以肯定是一个行尾问题。您可以通过首先运行文件来解决此问题`dos2unix`：

```
$ dos2unix origin.txt new.txt
$ patch origin.txt < file.patch
patching file origin.txt 
```

# forms - 按表格查询：如何合并取自表格的日期范围

> ID：15543049
> 
> 赞同：-1
> 
> 时间：2013-03-21T08:57:59.317
> 
> 标签：forms, vba

以下代码似乎不起作用（在 MS Access 中的查询条件中添加）。当我仅使用 dtDateFrom 尝试该条件时，它可以正常工作，但是当我应用第二个条件时，它永远不会起作用。

> =[Forms]![frm_generate_reports]![dtDateFrom] 和 <=[Forms]![frm_generate_reports]![dtDateTo]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:43:59.930

下面的代码比较两个日期

```
'Check if dates are valid

If Me.dtDateTo <= Me.dtDateFrom Then

    'Pop up message asking the user to change the dates as they are not valid
    MsgBox ("Sorry, the 'To' Date cannot occur before the 'From' date" & vbCrLf & "Please choose a different date range")

      Else
    'Do Something else
End If 
```

您的代码由于 AND 而不起作用 - 通常是为了测试两个条件是否为真。

例子

a = 5

如果 a < 10 AND a > 4 做某事

这两个条件都需要为真才能工作

# javascript - 如何从本地服务器本身为 Google Charts 提供所有依赖项

> ID：15543050
> 
> 赞同：2
> 
> 时间：2013-03-21T08:58:02.377
> 
> 标签：javascript, charts, google-visualization

**场景：**我们正在开发一个 web 应用程序，它基本上在 LAN 上本地工作。它由报告模块组成，而报告模块又包括图表报告。我针对实际数据开发了饼图、条形图、柱形图和许多不同图表的原型。

**问题：** Google [Charts](https://google-developers.appspot.com/chart/interactive/docs/gallery)无法离线工作，我尝试将依赖项转储到本地服务器上，但无法找出所有依赖项。

**问题：** 谁能告诉我如何使它工作？即如何 从本地服务器本身为[谷歌图表提供所有依赖项。](https://google-developers.appspot.com/chart/interactive/docs/gallery)

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:10:05.400

简单的答案：你[不能](https://developers.google.com/chart/interactive/faq#localdownload)在你自己的服务器上托管谷歌图表。

你可能想看看像[highcharts](http://www.highcharts.com/products/highcharts)和[gRaphael这样的库](http://g.raphaeljs.com/)

# java - prunsrv.exe 服务未启动

> ID：15543053
> 
> 赞同：16
> 
> 时间：2013-03-21T08:58:09.517
> 
> 标签：java, apache-commons, procrun

我正在尝试使用 prunsrv.exe 为应用程序安装和启动服务

我可以正常安装服务，但服务无法启动并给我一个错误

![在此处输入图像描述](../Images/1751d70b039cd4deff753829f1bf75fb.png)

以下是用于使用 prunsrv.exe 安装服务的配置

```
set SERVICE_NAME=TestService

REM Service log configuration
set PR_LOGPREFIX=%SERVICE_NAME%
set PR_LOGPATH=D:\setups\Commons_Daemon\commons-daemon-1.0.14-bin-windows\logs
set PR_STDOUTPUT=auto
set PR_STDERROR=auto
set PR_LOGLEVEL=INFO

REM Path to java installation
set PR_JVM=C:\Program Files\Java\jre1.6.0_04\bin\client\jvm.dll
set PR_CLASSPATH=D:\setups\Commons_Daemon\commons-daemon-1.0.14-bin-windows\temp.jar;

REM Startup configuration
set PR_STARTUP=auto
set PR_STARTMODE=java
set PR_STARTCLASS=Trys.AppLauncher
set PR_STARTMETHOD=start

REM Shutdown configuration
set PR_STOPMODE=java
set PR_STOPCLASS=Trys.AppLauncher
set PR_STOPMETHOD=stop

REM JVM configuration
set PR_JVMMS=64
set PR_JVMMX=128
set PR_JVMSS=4000

REM Install service
prunsrv.exe //IS//%SERVICE_NAME% 
```

以上配置打包成批处理文件执行安装服务

**也没有生成日志文件，因此我什至无法调试。**

请告诉我哪里出错了

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-04-01T11:03:02.523

一个可能的问题是使用错误`prunsvr.exe`。对于 64 位 java 安装，使用`amd64/prunsvr.exe`，对于 32 位 java 安装，`/prunsvr.exe`在 commons-deamon-xxx-bin-windows.zip 文件中使用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-05-10T08:41:35.647

这可能是很多事情。首先检查日志。默认是在...

> %SystemRoot%\System32\LogFiles\Apache

从那里你应该能够得到更具体的错误。例如，类路径、Java 路径或其他一些选项无效。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-07-14T15:40:13.740

如果您从服务管理器而不是命令行启动服务，则需要在注册表中设置 CLASSPATH、JAVA_OPTS 等。从[这里](http://commons.apache.org/proper/commons-daemon/procrun.html)：

基本服务定义在注册表项下维护：

```
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\<ServiceName> 
```

其他参数存储在注册表中：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Apache Software Foundation\ProcRun 2.0\<ServiceName>\Parameters 
```

在 64 位 Windows 上，procrun 始终使用 32 位注册表视图来存储配置。这意味着参数将被存储在里面：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Apache Software Foundation\ProcRun 2.0\<ServiceName> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-02-28T11:15:46.780

这个错误的原因是我没有重命名`prunsrv.exe`为`TestService.exe`. 同样，Prunmgr.exe 必须是 TestServicew.exe。

重命名这些文件非常重要。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-10-17T15:20:10.630

我能够在本地计算机上运行该服务，但在运行 Windows 2012R2 的 VM 上遇到了同样的错误。

这个问题是由两个原因引起的：

1.  对 jvm.dll 的引用

在 VM 上，我使用了 JDK 安装而不是简单的 JRE，并且 JAVA_HOME 指向 JDK bin 文件夹。我不得不将 --Jvm 参数从“auto”更改为位于 JRE 子文件夹中的实际 jvm.dll 文件。

2.  amd64 版本的 prunsrv.exe

尽管我更改了 --Jvm 设置，但服务在启动过程中仍然显示错误。我还必须使用 amd64 版本的 prunsrv.exe 来解决这个问题。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-04-22T10:45:20.757

我在我的笔记本电脑上遇到了同样的问题，但它正在其他具有相同配置的笔记本电脑上工作。

我已经检查过了`%SystemRoot%\System32\LogFiles\Apache\commons-daemon.log`。我发现以下错误 **缺少图像文件**，

然后我发现我们需要在所有参数上加上双引号。在你的例子中，如果你尝试

> `pushd %CD%`

在下面试试这个。

> `"prunsrv.exe" //IS//%SERVICE_NAME%` `--Startup="%PR_STARTUP%"` `--Jvm="%PR_JVM%"` `--Classpath="%PR_CLASSPATH%"` `--StartMode="jvm"` `--StopMode="jvm"` `--StartClass="%PR_STARTCLASS%"` `--StartMethod="%PR_STARTMETHOD%"` `--StopClass="%PR_STOPCLASS%"` `--StopMethod="%PR_STOPMETHOD%"`

示例 [http://www.eclipse.org/jetty/documentation/current/startup-windows-service.html](http://www.eclipse.org/jetty/documentation/current/startup-windows-service.html)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-02-05T11:00:03.573

以防有人发现它有帮助。

我有同样的问题“传递给系统调用的数据区域太小”。

这是因为程序在 StartMode=jvm 中找不到 jvm.dll。

**解决方案：**一切都取决于您的`StartMode`：

1.  如果`--StartMode`是`jvm`：
    您必须将`--jvm`参数指定为路径`jvm.dll`
2.  if `--StartMode`is `java`or `exe`:
    set `--jvm`parameter as `auto`(你的程序将作为单独的进程启动`java.exe`)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-10-21T07:31:52.990

我有同样的错误，但我所要做的就是以管理员身份运行脚本（在 Windows Server 2012 上）......显然，Windows 2012 上的权限系统已经改变：例如。在 Windows Server 2008 上没有发生此错误（相同的脚本）。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-03-21T09:24:01.247

只是将它与我​​的设置脚本进行了比较，我看到的唯一直接的事情是你应该让你的内存设置看起来像

```
REM JVM configuration
set PR_JVMMS=64m 
set PR_JVMMX=128m
set PR_JVMSS=128m 
```

顺便说一句，JRE 1.6.0_04 有点过时了......

HTH 陀螺仪

# php - 向 CException 和 CEmailLogRoute 添加信息

> ID：15543054
> 
> 赞同：1
> 
> 时间：2013-03-21T08:58:14.000
> 
> 标签：php, yii

我的 CEmailLogRoute 中有许多错误。没关系，但我想要更具体的信息。

例如，对于 403 access denied 错误，我想知道是哪个 Yii::app()->user->id 发起的。可能我还想添加用户拥有的角色。

是否可以将信息添加到 CEmailLogRoute 或更具体到 CException 或 CHttpException.403？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:15:12.627

您应该使用[`CLogFilter`](http://www.yiiframework.com/doc/api/1.1/CLogFilter)（或扩展它），例如在您的配置中：

```
array(
    'class'=>'CEmailLogRoute',
    'levels'=>'error, warning',
    'emails'=>'admin@example.com',
    'filter' => array(
        'class' => 'CLogFilter',
        'prefixUser' => true,
    ),
), 
```

[http://www.yiiframework.com/doc/guide/1.1/en/topics.logging#logging-context-information](http://www.yiiframework.com/doc/guide/1.1/en/topics.logging#logging-context-information)

# python - Python 无法识别命名元组的类型

> ID：15543055
> 
> 赞同：4
> 
> 时间：2013-03-21T08:58:19.613
> 
> 标签：python, types, tuples, namedtuple

我怀疑以前有人问过这个问题，但我一直找不到，所以这里是：

在 Python（使用 2.7）上，我创建`namedtuple`如下：

```
>>> sgn_tuple = namedtuple('sgnt',['signal','type'])
>>> a = sgn_tuple("aaa","bbb") 
```

然后我想检查类型，`t`我的结果很奇怪：

```
>>> type (a)
<class '__main__.sgnt'>
>>> a is tuple
False
>>> a is namedtuple
False
>>> a is sgnt
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'sgnt' is not defined
>>> a is sgn_tuple
False
>>> 
```

为什么会这样？我希望`a`被识别为元组类型，但事实并非如此。有什么提示吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-21T09:04:04.790

`is`不检查班级成员资格。`is`检查两个对象是否相同`id`

```
>>> isinstance(a, tuple)
True 
```

也不`type(a)`是`tuple`，`a`是的子类`tuple`。

如果您键入`verbose=True`，您可以看到它是如何制作的（文本是动态生成的以创建类）：

```
>>> sgn_tuple = namedtuple('sgnt',['signal','type'],verbose=True)

class sgnt(tuple):
        'sgnt(signal, type)' 

        __slots__ = () 

        _fields = ('signal', 'type') 

        def __new__(_cls, signal, type):
            'Create new instance of sgnt(signal, type)'
            return _tuple.__new__(_cls, (signal, type)) 

        @classmethod
        def _make(cls, iterable, new=tuple.__new__, len=len):
            'Make a new sgnt object from a sequence or iterable'
            result = new(cls, iterable)
            if len(result) != 2:
                raise TypeError('Expected 2 arguments, got %d' % len(result))
            return result 

        def __repr__(self):
            'Return a nicely formatted representation string'
            return 'sgnt(signal=%r, type=%r)' % self 

        def _asdict(self):
            'Return a new OrderedDict which maps field names to their values'
            return OrderedDict(zip(self._fields, self)) 

        __dict__ = property(_asdict) 

        def _replace(_self, **kwds):
            'Return a new sgnt object replacing specified fields with new values'
            result = _self._make(map(kwds.pop, ('signal', 'type'), _self))
            if kwds:
                raise ValueError('Got unexpected field names: %r' % kwds.keys())
            return result 

        def __getnewargs__(self):
            'Return self as a plain tuple.  Used by copy and pickle.'
            return tuple(self) 

        signal = _property(_itemgetter(0), doc='Alias for field number 0')
        type = _property(_itemgetter(1), doc='Alias for field number 1') 
```

这只是`exec`由 Python 编辑的。我希望这能解决问题。

# javascript - 如何确保如果在一个字段中输入值，则必须填写/选择其他（伴随的）字段/下拉列表

> ID：15543057
> 
> 赞同：1
> 
> 时间：2013-03-21T08:58:30.813
> 
> 标签：javascript, validation

我有一个表格，必须在其中输入区域，然后必须从下拉列表中选择其单位。我为此使用了 javascript 验证，但它不起作用。这是我的代码：

```
function check_admin_post_property()
{
 var area=document.post_property.property_area.value;
if(area != "")
{
    if(document.post_property.area_unit.value == "Select")
    {
        alert("Area unit must be selected");
        document.post_property.property_area.focus();
        return false;
    }
}
} 
```

第一行声明一个变量并获取最终用户输入的值。第二行检查字段是否不等于空，表示它有值。第四行检查下拉列表中的值是否等于 Select，因为用户必须选择正确的面积单位。如果是 Select 验证失败。基本上我想要做的是进入区域不是强制性的，但如果是强制性的，它必须伴随一个单元。

这是我的标记：

```
<form name="post_property" action="<?php $_SERVER['PHP_SELF'] ?>" method="post" enctype="multipart/form-data">
<table>
    <tr><td>Other fields</td></tr>
    <tr>
    <td>Property area:</td>
    <td><input type="text" name="property_area" style="border:1px solid red;"><span style="color:red">*</span</td>
    </tr>
    <tr>
        <td>Area unit:</td>
        <td>
            <select name="area_unit">
                <option value="Select">Select</option>
                <option value="square_feet">Square feet</option>
                <option value="square_yards">Square yards</option>
                <option value="square_meter">Square meter</option>
                <option value="acre">Acre</option>
                <option value="hectare">Hectare</option>
            </select>
        </td>

    </tr>
    <tr>
         <td align="center"><input type="submit" name="submit" value="Submit" onclick="return check_admin_post_property()"></td>
</tr> 
```

标记不是格式化的形式，因为 stackoverflow 的标记不能正常工作。甚至在我身边都看不到。

我正在使用脚本元素的 src 属性导入 js。它位于名为 js 的文件夹内，其 js 文件名为 post_property.js 在该文件内有一个函数 check_admin_post_property() ，上面的代码位于其中。我不能发布完整的脚本和 html 文件，因为如果他们（我的工作人员）发现我会离开这里（这个网站是我工作场所检查最多的网站之一）。但我已经发布了相关部分。如果您需要有关它的更多信息，请告诉我或指向已完成此类操作的第三方页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:34:54.670

您的代码的问题在于它使用`<input type='submit'>`. 你应该使用的是`<input type='button'>`. 这是工作代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<script type="text/javascript">
function check_admin_post_property() {
    var area=document.post_property.property_area.value;
    if(area != "")
    {
        if(document.post_property.area_unit.value == "Select")
        {
            alert("Area unit must be selected");
            document.post_property.area_unit.focus();
            return false;
        }
        else
            document.post_property.submit();
    }
    else {
        alert("Area must be entered.");
        document.post_property.property_area.focus();
    }
}
</script>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
<form name="post_property" action="<?php $_SERVER['PHP_SELF'] ?>" method="post" enctype="multipart/form-data">
<table>
    <tr><td>Other fields</td></tr>
    <tr>
    <td>Property area:</td>
    <td><input type="text" name="property_area" style="border:1px solid red;"><span style="color:red">*</span></td>
    </tr>
    <tr>
        <td>Area unit:</td>
        <td>
            <select name="area_unit">
                <option value="Select">Select</option>
                <option value="square_feet">Square feet</option>
                <option value="square_yards">Square yards</option>
                <option value="square_meter">Square meter</option>
                <option value="acre">Acre</option>
                <option value="hectare">Hectare</option>
            </select>
        </td>

    </tr>
    <tr>
         <td align="center"><input type="button" name="submit" value="Submit" onclick="return check_admin_post_property()"></td>
</tr>
</table>
</form>
</body>
</html> 
```

# jquery - 自定义表单的 Jquery 验证

> ID：15543061
> 
> 赞同：0
> 
> 时间：2013-03-21T08:58:52.350
> 
> 标签：jquery, jquery-validate

在网页中，我使用的表单取决于当前选项卡选择显示上传文件输入或文本输入。

由于我对两个选项卡使用相同的表单，因此 jQuery 验证失败。我同时使用 textinput 和 fileinput 进行验证，但如果表单有 textinput 而没有 reportFile 则它没有提交。我认为这是因为在提交时，验证器也在寻找不存在的 reportFile。

我尝试使用依赖，但即使这样也不起作用。

前任：

```
rules: {
    "textInput": "required",
    "reportFile": {
        required: "true",
        accept: "pdf"
    }
}, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:49:31.803

我看不出您在说什么，*“两个选项卡的表单相同”*等，因为您未能向我们展示该代码的任何部分。表单的 HTML 至少在哪里？

但是，[规则`reportFile`将失败，因为您在 boolean 周围加了引号`true`。](http://jsfiddle.net/J9dgD/2/)

这在包含这两个字段的一个表单上非常有效......

```
rules: {
    "textInput": "required",
    "reportFile": {
        required: true,  //<-- remove quotation marks from true
        accept: "pdf"
    }
}, 
```

**HTML**：

```
<form id="myform">
    <input type="text" name="textInput" />
    <input type="file" name="reportFile" />
    <input type="submit" />
</form> 
```

**演示：http: [//jsfiddle.net/J9dgD/3/](http://jsfiddle.net/J9dgD/3/)**

# jquery - 从选择选项字段中获取数据并使用 Jquery 设置逗号分隔格式

> ID：15543062
> 
> 赞同：-2
> 
> 时间：2013-03-21T08:58:52.903
> 
> 标签：jquery, html, css, jquery-ui

我有一张带有选择列表框的表格。我的要求是当我点击提交按钮时，从选择选项列表中获取当前数据并以逗号分隔格式显示值。

在这里，我附上了图像文件供您参考。

![](../Images/a810d45ee14f4736f49f7701cf9c3f87.png)

在这种情况下，我点击提交按钮，数据应显示为 { **d:d,sdf:sdf,d:d** }。

演示页面：[演示](http://jsfiddle.net/FH2HM/)

注意：在我的页面中，我添加`button`了它会`<tr></tr>`在我想要的时候再添加一个。所以它的动态。

感谢您的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:27:50.970

这是一种方法：

```
$("#ok").on("click", function(){
    var output = [],
        $selects = $("#s select"),
        i;
    for (i=0; i < $selects.length; i += 2)
        output.push($selects.eq(i).find("option:selected").text() + ":" +
                    $selects.eq(i+1).find("option:selected").text());

    var outputString = "{" + output.join(",") + "}";
}); 
```

演示：http: [//jsfiddle.net/FH2HM/1/](http://jsfiddle.net/FH2HM/1/)

也就是说，循环遍历选择，获取`.text()`每对中选定选项的值并将该对放入数组中。然后在循环之后将数组元素连接成一个用逗号分隔的字符串。

请注意，如果您要显示的值在选项元素的`value`属性中，它将使代码更简单，因为循环中的行将是：

```
output.push($selects.eq(i).val() + ":" + $selects.eq(i+1).val()); 
```

请注意，由于此代码循环遍历表中的所有选择，因此它将自动处理任何动态添加的行。

# android - 查询id需要整数参数

> ID：15543065
> 
> 赞同：3
> 
> 时间：2013-03-21T08:58:54.960
> 
> 标签：android, eclipse, orm, ormlite

在文档中提到了以下内容：

```
Account account = accountDao.queryForId("John Smith");
if (account == null) {
    // the name "John Smith" does not match any rows
} 
```

但在 Eclipse(android) 中，我只看到将整数作为参数传递的选项？有什么帮助吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-21T21:19:57.393

对象使用泛型来强制 id的`Dao`类型与您的实体相关联。如果您只看到将整数传递给的选项，`dao.queryForId(...)`那么您可能错误地将 dao 定义为：

```
Dao<Account, Integer> accountDao = getDao(Account.class); 
```

第一个通用参数指定实体的类型，第二个通用参数指定该实体中 ID 字段的类型。有了`Integer`，你就会调用`accountDao.queryForId(Integer)`。

正如@Tomas 提到的，您需要使用以下内容定义您的 DOA：

```
Dao<Account, String> accountDao = getDao(Account.class); 
```

然后可以`Account`通过`String`id 查询：

```
Account account = accountDao.queryForId("John Smith"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T11:43:30.093

首先，您应该定义哪些实体 ID 是 String 类型：

```
@DatabaseTable()
public class Account {

    @DatabaseField(id = true)
    private String mFullName;
    ...
} 
```

然后你应该根据实体类型和它的ID类型来声明Dao对象。现在您可以使用 ID 类型为 String 的 queryForId：

```
Dao<Account, String> accountDao = getAccountDao();
Account account = accountDao.queryForId("John Smith");
if (account == null) {
    // the name "John Smith" does not match any rows
} 
```

# javascript - jQuery .load(

> ID：15543068
> 
> 赞同：0
> 
> 时间：2013-03-21T08:59:00.633
> 
> 标签：javascript, jquery, asp.net-mvc

我已经看到这里解决了一些类似的问题，但我还没有找到解决方案。

我有一个 .NET MVC 项目，在某些电脑上我无法在 .load() 调用后执行 javascripts。

我有：

*   页面 RealtimeAlarms
*   ascx 组件 AlarmsList
*   一个javascript文件Alarms.js

RealtimeAlarms 加载所有需要的 js，并使用以下方式渲染 ascx 组件：

```
<script type="text/javascript" src="<%: ResolveUrl("~/Scripts/Alarms.js") %>"></script>
....
....
<input type="text" id="Like" />
<img alt="Filter" src="<%: ResolveUrl("~/Content/Images/Search.png") %>" class="clickable" onclick="FilterAlarms()" />
....
....
Html.RenderAction("AlarmsList", "Alarms", new {Like = ""}); 
```

Alarms.js 看起来像这样：

```
function FilterAlarms() {

    var data = {};
    data.Like = $('#Like').val();

    $("#AlarmsDiv").html("");
    $("#AlarmsDiv").load(BaseUrl + "Alarms/RealtimeAlarms #content", data, function  (responseText, textSatuts, XMLHttpRequest) {    });
}

function ShowUsers(id)
{ 
   ....
} 
```

我的 RealtimeAlarms 组件：

```
foreach(var alarm in ViewData.Model)
   { %>
    <li onclick="ShowUsers(<%: alarm.Id %>)"><%: alarm.Description %></li>
<% } %> 
```

当我第一次加载页面时，它总是运行良好。ShowUsers() 总是有效的。

当我点击过滤器时，我的问题就开始了。FilterAlarms() 总是返回正确的列表。在某些电脑上 ShowUsers() 停止工作，甚至不再调用它。

使用相同的浏览器（我尝试使用 Chrome 和 IE9），在某些电脑上 ShowUsers() 总是可以正常工作，而在其他一些电脑上它在 FilterAlarms() 之后停止工作。使用相同的数据。

感谢大家的任何建议。

# html - css伪类last-child问题

> ID：15543079
> 
> 赞同：3
> 
> 时间：2013-03-21T08:59:43.513
> 
> 标签：html, css

`:last-child`使用伪选择器时遇到问题。

**我有以下标记：**

```
 <div class="apply_container">
        <form class="margin">
            <div class="apply_inn border">
                <span>Tell me why you want the job?</span>
            </div>
            <div class="apply_inn">
                <span>Some other details</span>
            </div>
            <div class="apply_inn location">
                <span>Apply at a particular location</span>
            </div>
            <div class="form-actions">
                <button type="submit" class="pull-right btn btn-info">
                    Submit
                </button>
            </div>
        </form>
    </div> 
```

**并应用这些样式：**

```
.apply_container .apply_inn {
    border-bottom: 1px dashed #E6E6E6;
    margin: auto;
    padding: 18px 0;
    width: 790px;
}

.apply_container .apply_inn:last-child {
    border:none;
} 
```

我的目标是防止最后一个与 s的其余部分一样的`div.apply_inn`样式。该风格似乎没有得到应用。谁能解释发生了什么？`bottom-border``div.apply_inn`

这是我的问题的原始[小提琴](http://jsfiddle.net/QSeU2/)。以及演示该问题的[简化小提琴。](http://jsfiddle.net/hz2c5/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T09:41:22.110

问题是`div`with 类`.apply_inn`不是`last-child`它的父类。CSS`last-child`伪类的操作如下：

> :last-child CSS 伪类表示作为其父元素的最后一个子元素的任何元素。

当从字面上准备好时，它将仅适用于其父元素中的最后一个子元素。当您向其中添加其他类选择器时，它不会考虑您（心理上）创建的上下文。

应用伪类时，浏览器不理解选择器创建的上下文。基本上，它检查元素是否与选择器匹配`.apply_container .apply_inn`，然后提出问题，“这是父项中的最后一个子项吗？”。它在没有考虑上述选择器的情况下提出这个问题。在您的情况下，答案是否定的，因为在 last 之后还有另一个 div `div.apply_inn`。

在您的示例中，带有类的 div`form-actions`实际上是最后一个孩子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T09:33:56.923

`last-child`如果它是父容器的最后一个子容器，则只能使用选择器 - 尽管它是具有该类名的最后一个子容器，但它不是容器的最后一个子容器

[https://developer.mozilla.org/en-US/docs/CSS/:last-child](https://developer.mozilla.org/en-US/docs/CSS/:last-child)

这是一个小提琴，显示您应用了最后一个子样式的代码

[http://jsfiddle.net/QSeU2/7/](http://jsfiddle.net/QSeU2/7/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T09:30:06.630

针对`border-top`并删除`first-child`'s`border-top`

[http://jsfiddle.net/btevfik/QSeU2/6/](http://jsfiddle.net/btevfik/QSeU2/6/)

最后一个孩子不起作用。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-21T09:06:27.307

相关：[使用最后一个子选择器](https://stackoverflow.com/questions/1293369/using-last-child-in-css)

* * *

任何你不想使用的理由

```
.location {border:none;} 
```

?

# css - 未设置背景时固定页眉和页脚的问题

> ID：15543081
> 
> 赞同：0
> 
> 时间：2013-03-21T08:59:45.337
> 
> 标签：css, fixed, sticky-footer

我对固定页眉和页脚的实现有疑问。

在此示例中，当我为固定页眉和页脚设置背景颜色时，一切正常。

见这里 [http://tinyurl.com/brwoeqy](http://tinyurl.com/brwoeqy)

但是当没有设置背景色时（页眉和页脚的背景色与主体的背景色相同），这就是客户端想要的，内容区域与页眉和页脚重叠。

见这里 [http://tinyurl.com/cfecdx5](http://tinyurl.com/cfecdx5)

请问有什么解决办法吗？？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:04:04.043

它正在工作，您只需在#header_container 上将背景颜色设置为#0BB69C

# api - REST API 探索：如何获得与 Foursquare 网站上的搜索相同的列表？

> ID：15543082
> 
> 赞同：1
> 
> 时间：2013-03-21T08:59:45.790
> 
> 标签：api, foursquare

我正在使用 REST API（场地平台）来获取每个目的地和类别的前 5 个场地的列表，就像它们在foursquare 网站上的搜索结果中列出的一样。

例如，我使用 explore api 端点执行以下请求： [https://api.foursquare.com/v2/venues/explore?near=zurich,CH&query=College](https://api.foursquare.com/v2/venues/explore?near=zurich,CH&query=College) %26 University

我正在使用未经身份验证的 apias。我没有通过半径，以获取默认半径。

现在 api 的结果如下： 1\. ETH Hönggerberg HIL 2\. Technopark 3\. Kantonsschule Stadelhofen 4\. Zürcher Hochschule der Künste, Departement Musik 5\. Klubschule Migros

当我在 Foursquare 网站上进行如下搜索时（未登录！）： [https ://foursquare.com/explore?near=Zurich%2C%20CH&q=College%20%26%20University](https://foursquare.com/explore?near=Zurich%2C%20CH&q=College%20%26%20University)

我在网站上得到以下结果：1\. SBB Digital 2\. Technopark 3\. ETH Hönggerberg HIL 4\. EF Education First 5\. Klubschule Migros

是否可以从 api 获得相同的列表，如网站上所示（以相同的顺序）？如是？我怎样才能做到这一点？我如何调用 api 或如何对 api 的结果进行排序以获得相同的列表？

首先，我尝试按评级字段对 api 结果进行排序，但这根本不起作用。因为在此示例中，前 30 个结果中没有一个具有任何评级。

预先感谢您的帮助！问候汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T23:40:10.020

确保您使用与网络上相同的用户帐户发出探索请求。此外，您的查询似乎不完全匹配。一个是“College & University”，另一个是“college”——尝试匹配查询并查看结果是否改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T08:20:04.570

好吧，与此同时，我从foursquare得到了答案。诀窍很简单：只需在 api 调用中添加以下参数：time=any 和 day=any。然后你得到的结果与在foursquare网页上的排序方式完全相同（未经过身份验证时）。谢谢来自foursquare的大卫！:-)

# forms - 当每个字段为空时，Symfony2 强制子表单验证

> ID：15543086
> 
> 赞同：2
> 
> 时间：2013-03-21T09:00:01.170
> 
> 标签：forms, validation, symfony, callback

我有两个实体（我们称它们为 A 和 B）绑定在一对一的关系中，并有一个填充它们的表单。B 实体字段的填充取决于实体 A 中的状态，如下所示：

实体 A：状态 0 实体 B：两个字段都为空

实体 A：状态 1 实体 B：字段 1 已填充 字段 2 为空

实体 A：状态 2 实体 B：字段 1 空 字段 2 已填充

两个字段都填写状态是不允许的。

所以我做了 3 个自定义回调验证器来检查状态 1、2 和不允许。不幸的是，当两个字段都为空时，不会触发对状态 1 和 2 的检查，显然是因为字段为空；事实上，向表单添加虚假隐藏字段会触发验证过程，因为表单已填充！

显然这是一个 hackish 解决方案，所以我想知道是否有一种方法可以强制子表单验证，即使每个表单字段都是空的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:20:04.047

Symfony 不验证表单，它验证实体。你最好的办法是在你的实体中创建一个验证函数，并使用这里描述的 symfony 的“Getters”验证进行验证：

[http://symfony.com/doc/2.1/book/validation.html#getters](http://symfony.com/doc/2.1/book/validation.html#getters)

我相信对于您的情况，具有验证的实体是与表单类型相关联的实体。

# php - 从 Code Igniter HMVC 中的其他模块加载驱动程序

> ID：15543087
> 
> 赞同：0
> 
> 时间：2013-03-21T09:00:08.020
> 
> 标签：php, codeigniter, libraries, hmvc

我正在使用wiredesignz 的Code Igniters HMVC 实现。

我们有两个模块，一个用于管理购物车的实际产品/类别等，另一个用于管理包含产品等的订单。

这一切都很好，但我们正在尝试实现一个共享的运输驱动程序。

运输司机坐在它自己的模块中，所以`modules/shipping/libraries/Shipping/Shipping.php`

所以，我可以从同一个名为“Test.php”的文件夹中加载一个库

```
$this->load->library('shipping/test'); 
```

但试图加载驱动程序

```
$this->load->driver('shipping/shipping') 
```

结果是

> 无法加载请求的类：运输

查看 HMVC 组件，它似乎有一个加载库的覆盖，但不是驱动程序，我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:11:20.390

myabe 问题出在区分大小写的文件夹和文件名中。

改成

```
modules/shipping/libraries/shipping/shipping.php 
```

并尝试加载您的库。

```
$this->load->library('shipping/shipping'); 
```

注意：您的班级名称必须`Shipping`在 shipping.php中

# c# - 使用 tcp 套接字发送 jpg

> ID：15543088
> 
> 赞同：0
> 
> 时间：2013-03-21T09:00:10.087
> 
> 标签：c#, sockets, jpeg

我在使用套接字发送 jpg 数据时遇到了一些问题。

发送方：

```
Socket client_s = new Socket(AddressFamily.InterNetwork, SocketType.Stream,ProtocolType.Tcp);
IPEndPoint serverEP = new IPEndPoint(IPAddress.Loopback, 4567);
client_s.Connect(serverEP);
NetworkStream stream = new NetworkStream(client_s);
bmp.Save(stream, System.Drawing.Imaging.ImageFormat.Jpeg); 
```

接收方：

```
clientSocket = listenSocket.Accept();
NetworkStream s = new NetworkStream(clientSocket); 
Bitmap slice_bmp = new Bitmap(s);
Graphics g = this.CreateGraphics();
g.DrawImage(slice_bmp,0,0); 
```

当我执行上述操作时，`Bitmap slice_bmp = new Bitmap(s);`会被阻塞，直到关闭发件人的套接字。发送方的套接字关闭后，正常绘制图像。我想知道为什么该操作被阻止？

另外，使用 Networkstream 的实例作为 Bitmap 的构造函数的参数是否正确？（我的代码是基于继承的）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:34:06.957

首先，我建议您使用`Flush()`的方法`NetworkStream`来确保所有数据都已发送。

```
 Socket client_s = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
        IPEndPoint serverEP = new IPEndPoint(IPAddress.Loopback, 4567);
        client_s.Connect(serverEP);
        NetworkStream stream = new NetworkStream(client_s);
        bmp.Save(stream, System.Drawing.Imaging.ImageFormat.Jpeg);
        stream.Flush(); //flush everything 
```

在接收方，您应该首先将图像的所有字节读入一个`byte`数组。从该字节数组中，您可以从该流构造`MemoryStream`and than 。`Bitmap`

```
 clientSocket = listenSocket.Accept();
        NetworkStream s = new NetworkStream(clientSocket);
        int bytesRead = 0;
        int howMany = 0;
        byte [] byteBuffer = new byte[100000];
        do
        {
            howMany = s.Read(byteBuffer, bytesRead, 10000);
            bytesRead += howMany;
            if(bytesRead>=byteBuffer.Length)
                byteBuffer = ResizeByteArray(byteBuffer);
        }
        while (howMany > 0 && s.DataAvailable);
        MemoryStream ms = new MemoryStream(byteBuffer);
        Bitmap slice_bmp = new Bitmap(ms);
        Graphics g = this.CreateGraphics();
        g.DrawImage(slice_bmp, 0, 0);
        g.Dispose(); 
```

如果图像大于实例化字节数组的容量，则需要调整它的大小。你可以使用这个辅助方法：

```
 private byte[] ResizeByteArray(byte[] arr)
    {
        byte[] newArr = new byte[arr.Length * 2];
        Array.Copy(arr, newArr, arr.Length);
        return newArr;
    } 
```

作为旁注，请始终调用您手动创建`Dispose`的`Graphics`对象（如本例所示）。我检查了代码，它可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:18:55.827

这是因为位图类等待传输结束：

> 首先单独接收字节数据缓冲区，然后从中创建内存流，然后创建位图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T09:06:51.843

看来您正在处理单线程应用程序，或者至少在多线程应用程序的*UI 线程上工作。*出现阻塞是因为您的位图对象正在等待其*构造完成*。并且由于通过网络从流中读取需要一段时间，因此在您的位图对象完全创建之前，您的程序将不会继续。

如果您希望程序继续运行，则需要*创建一个线程*并从流中读取它并创建位图。当位图准备好时，您可以*触发一个事件*并采取适当的行动。

作为`NetworkStream`它的一个子类`System.IO.Stream`是完全没问题的！您可以使用 any`System.IO.Stream`创建需要流的对象。唯一的结果是，正如您所经历的那样，它可能比创建图像需要更长的时间，例如从`System.IO.FileStream`.

看看[MSDN](http://msdn.microsoft.com/en-us/library/system.io.stream.aspx)大部分的东西都有很好的描述。

# mysql - 获取两个查询之间的数据差异

> ID：15543089
> 
> 赞同：0
> 
> 时间：2013-03-21T09:00:14.873
> 
> 标签：mysql

我有两个查询导致两个结果集我需要比较两个结果集并需要显示它们之间的差异。希望我会得到很好的支持。谢谢。这些是我的查询

查询：1

```
SELECT distinct c.sid_ident,c.fix_ident from corept.std_sid_leg as c INNER JOIN (SELECT sid_ident, transition_ident, max(sequence_num) seq, route_type FROM corept.std_sid_leg  WHERE data_supplier='J' AND airport_ident='KBOS' GROUP BY sid_ident,transition_ident) b ON c.sequence_num=b.seq and c.sid_ident = b.sid_ident and c.transition_ident =b.transition_ident WHERE c.data_supplier='J' and c.airport_ident='KBOS'; 
```

查询：2

```
SELECT name,trans FROM skyplan_deploy.deploy_sids ON d.name=c.sid_ident WHERE apt = 'KBOS' AND name != trans; 
```

将对 corept.std_sid_leg 中的 sid_ident 字段和 skplan_deplay.deploy_sids 中的名称进行比较。由于Mysql不支持完全外连接，我想使用左连接和右连接并将结果结合起来。但我坚持了这一点。请帮助。我在使用左右连接时遇到语法错误。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:59:37.860

以下查询应模拟`FULL OUTER JOIN`MySQL 中的 a。

```
SELECT * 
FROM A
LEFT OUTER JOIN B
  ON A.NAME = B.NAME
WHERE B.ID IS NULL
  UNION ALL
SELECT * 
FROM B
LEFT OUTER JOIN A
  ON B.NAME = A.NAME
WHERE A.ID IS NULL; 
```

[将结果与`FULL OUTER JOIN`SQL Server 中的实际结果进行比较，您会发现它有效。](http://sqlfiddle.com/#!3/99f00/7)

# perl - 为什么不同字符串的解码结 果是一样的？

> ID：15543090
> 
> 赞同：0
> 
> 时间：2013-03-21T09:00:17.697
> 
> 标签：perl

```
$ perl -MMIME::Base64 -e 'print decode_base64("c3luX2Fja0AxNjMuY29t");'
syn_ack@163.com

$ perl -MMIME::Base64 -e 'print decode_base64("AHN5bl9hY2tAMTYzLmNvbQ");'
syn_ack@163.com 
```

编码字符串不同，但解码结果相同，为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T09:09:29.247

您的第二个字符串`AHN5bl9hY2tAMTYzLmNvbQ` [解码为](http://www.base64decode.org/)：

```
�syn_ack@163.com 
```

您的终端软件可能不会打印第一个位置的异常字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T17:42:42.230

与您所说的相反，它们并不相同：

```
$ perl -MMIME::Base64 -E'
   say
      decode_base64("c3luX2Fja0AxNjMuY29t") eq
      decode_base64("AHN5bl9hY2tAMTYzLmNvbQ") ?1:0'
0 
```

那么它们是什么？

```
$ perl -MData::Dumper -MMIME::Base64 -e'
   $Data::Dumper::Useqq = 1;
   print Dumper(decode_base64("c3luX2Fja0AxNjMuY29t"))'
$VAR1 = "syn_ack\@163.com";

$ perl -MData::Dumper -MMIME::Base64 -e'
   $Data::Dumper::Useqq = 1;
   print Dumper(decode_base64("AHN5bl9hY2tAMTYzLmNvbQ"))'
$VAR1 = "\0syn_ack\@163.com"; 
```

# iphone - 将已删除的消息存储在IOS中

> ID：15543091
> 
> 赞同：-1
> 
> 时间：2013-03-21T09:00:18.853
> 
> 标签：iphone, objective-c

我正在尝试创建一个**iPhone 应用程序**，它将使用 Web 服务在我的服务器上备份我的消息（当我删除任何消息时）。是否可以识别用户何时删除某些消息并获取该消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:09:01.197

不，您不能访问这些消息。

所有应用程序都是沙盒化的，您无法访问其他应用程序的数据。

# php - 打破长的源代码行，但仅限于逗号

> ID：15543097
> 
> 赞同：0
> 
> 时间：2013-03-21T09:00:31.577
> 
> 标签：php, coding-style, sed, awk, indentation

背景：我使用 PHPStylist 来缩进 PHP 代码，通常效果很好。但是，当它找到带有许多参数的函数调用时，它会将所有这些参数放在一行中。因此，例如，一个`bind_param()`电话很容易有 300 个字符宽。

这不符合我们的编码风格指南，它规定最大行长为 180 个字符。

我们的缩进脚本已经有一个 sed 命令来清除 PHPStylist 留下的尾随空格，所以我在想，sed 也可以打破太长的行，但只能在逗号​​上？

示例输入：

```
function xyz()
{
    somecall($somevariable1, $somevariable1, $somevariable1, $somevariable1, $somevariable1, $somevariable1, $somevariable1, $somevariable1, $somevariable1);
} 
```

示例输出：

```
function xyz()
{
    somecall($somevariable1, $somevariable1, $somevariable1, $somevariable1,
$somevariable1, $somevariable1, $somevariable1, $somevariable1, $somevariable1);
} 
```

^(（如果脚本也可以漂亮地缩进下一行，则加分，但我认为这在 sed 中很难做到。awk、perl、python 或其他常用工具中的解决方案也将非常感激。）)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:21:13.033

作为第一个建议，像这样的东西？

```
sed 's/.\{70\}[^,]*,/&\
/g' file 
```

- -编辑 - -

对于缩进，您可以尝试：

```
sed -e 's/\(.\{70\}[^,]*,\)[[:blank:]]*/\1\
/g; tend' -e n  -e :end -e 's/\(^[[:blank:]]*\)\(.*\n\)/\1\2\1/ ' file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T22:59:27.170

此 awk 脚本将在最大行长度之前的最后一个逗号处拆分您的行，如果您愿意，可以将其设置为运行时参数。它将分割的行缩进比原始行多 4 个空格：

```
$ cat file
function xyz()
{
    somecall($somevariable1, $somevariable2, $somevariable3, $somevariable4, $somevariable5, $somevariable6, $somevariable7, $somevariable8, $somevariable9);

        somecall($somevariable1, $somevariable2, $somevariable3, $somevariable4, $somevariable5, $somevariable6, $somevariable7, $somevariable8, $somevariable9);
}

$ awk -f tst.awk file
function xyz()
{
    somecall($somevariable1, $somevariable2, $somevariable3,
        $somevariable4, $somevariable5, $somevariable6,
        $somevariable7, $somevariable8,
        $somevariable9);

        somecall($somevariable1, $somevariable2, $somevariable3,
                $somevariable4, $somevariable5, $somevariable6,
                $somevariable7, $somevariable8,
                $somevariable9);
}
$
$ cat tst.awk
BEGIN{ maxLength = (maxLength ? maxLength : 66) }

(length($0) > maxLength) && /,/ {
    indent = $0
    sub(/[^[:space:]].*/,"",indent)

    tail = $0
    while (tail ~ /[^[:space:]]/) {
        head = substr(tail,1,maxLength)
        sub(/,[^,]+$/,",",head)
        tail = substr(tail,length(head)+1)
        sub(/^[[:space:]]*/,indent"    ",tail)
        print head
    }
    next
}
1

$ awk -v maxLength=100 -f tst.awk file
function xyz()
{
    somecall($somevariable1, $somevariable2, $somevariable3, $somevariable4, $somevariable5,
        $somevariable6, $somevariable7, $somevariable8,
        $somevariable9);

        somecall($somevariable1, $somevariable2, $somevariable3, $somevariable4, $somevariable5,
                $somevariable6, $somevariable7, $somevariable8,
                $somevariable9);
}

$ awk -v maxLength=30 -f tst.awk file
function xyz()
{
    somecall($somevariable1,
        $somevariable2,
        $somevariable3,
        $somevariable4,
        $somevariable5,
        $somevariable6,
        $somevariable7,
        $somevariable8,
        $somevariable9);

        somecall($somevariable1,
                $somevariable2,
                $somevariable3,
                $somevariable4,
                $somevariable5,
                $somevariable6,
                $somevariable7,
                $somevariable8,
                $somevariable9);
} 
```

# unicode - 在 SQLite 中使用 UTF8 INSTR

> ID：15543099
> 
> 赞同：0
> 
> 时间：2013-03-21T09:00:33.550
> 
> 标签：unicode, utf-8, sqlite

我正在尝试`INSTR`在 SQLite 中使用函数，但如果我使用 UTF8 字符，它会返回错误的值。我怎样才能避免这个问题？

```
select instr('akçe', 'a'); --returns 1 (Correct)
select instr('akçe', 'k'); --returns 2 (Correct)
select instr('akçe', 'ç'); --returns 0 (Wrong)
select instr('akçe', 'e'); --returns 3 (Wrong) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:14:26.773

为我工作：

```
> select instr('akçe', 'ç');
3
> select instr('akçe', 'e');
4 
```

显然，您实际上并没有使用 UTF-8。

检查输出是否`select quote(cast('ç' as blob));`为`X'C3A7'`。

# python - 使用nose分别运行单元测试和集成测试（位于不同的目录中）

> ID：15543100
> 
> 赞同：2
> 
> 时间：2013-03-21T09:00:33.970
> 
> 标签：python, unit-testing, testing, integration-testing, nose

我想知道这已经有一段时间了，但我无法弄清楚如何传递选项来`nosetests`运行驻留在不同子目录中的不同测试。包目录结构示例：

```
my_package/
|-- my_module1/
   |-- tests/
       |-- unit/
           | ... a bunch of unit tests
       |-- integration/
           |... a bunch of integration tests
|-- my_module2/
   |-- tests/
       |-- unit/
           | ... a bunch of unit tests
       |-- integration/
           |... a bunch of integration tests 
```

如果我只想在我的所有模块中执行单元测试（`tests/unit/`子目录中的所有测试），我将如何使用nosetests 库来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:38:20.823

我认为`--where`或`--match`鼻子测试的论点可以帮助你：

> -w WHERE, --where=WHERE 在此目录中查找测试。可以多次指定。传递的第一个目录将用作工作目录，代替默认的当前工作目录。其他人将被添加到要执行的测试列表中。[NOSE_WHERE]
> 
> -m REGEX, --match=REGEX, --testmatch=REGEX 匹配此正则表达式的文件、目录、函数名和类名被视为测试。默认值：(?:^|[\b_./-])[Tt]est [NOSE_TESTMATCH]

另外，请参阅[任何人都知道nosetest 的-m、-i 和-e 是如何工作的？](https://stackoverflow.com/questions/8054512/anyone-know-how-nosetests-m-i-and-e-work)

但是，实际上，我更喜欢在根级别有测试目录：[如何使用鼻子测试分别组织和运行单元测试和功能测试](https://stackoverflow.com/questions/8043417/how-to-organize-and-run-unittests-and-functional-tests-separately-using-nosetest?rq=1)

# python - Python选项卡完成时的重复输出（OsX 10.8）

> ID：15543102
> 
> 赞同：8
> 
> 时间：2013-03-21T09:00:38.253
> 
> 标签：python, macos, readline, tab-completion

使用下面的代码片段，我向 python 解释器添加了 tab 补全。

```
import readline
import rlcompleter
if 'libedit' in readline.__doc__:
    readline.parse_and_bind("bind ^I rl_complete")
else:
    readline.parse_and_bind("tab: complete") 
```

但是，我遇到了一个奇怪的行为，在点击 TAB 后，解释器会给出这样的重复：

```
Python 2.7.3 (v2.7.3:70274d53c1dd, Apr  9 2012, 20:52:43)
[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> d=dict()
>>> d.
Display all 108 possibilities? (y or n)
d.__class__(         d.__class__(         d.__class__(
d.__class__(         d.__cmp__(           d.__cmp__(
d.__contains__(      d.__contains__(      d.__delattr__(
d.__delattr__(       d.__delattr__(       d.__delitem__(
d.__delitem__(       d.__doc__            d.__doc__
d.__doc__            d.__eq__(            d.__eq__(
d.__format__(        d.__format__(        d.__format__(
d.__ge__(            d.__ge__(            d.__getattribute__(
d.__getattribute__(  d.__getattribute__(  d.__getitem__(
d.__getitem__(       d.__gt__(            d.__gt__(
d.__hash__           d.__hash__           d.__hash__
d.__init__(          d.__init__(          d.__init__(
d.__iter__(          d.__iter__(          d.__le__(
d.__le__(            d.__len__(           d.__len__(
d.__lt__(            d.__lt__(            d.__ne__(
d.__ne__(            d.__new__(           d.__new__(
d.__new__(           d.__reduce__(        d.__reduce__(
d.__reduce__(        d.__reduce_ex__(     d.__reduce_ex__(
d.__reduce_ex__(     d.__repr__(          d.__repr__(
d.__repr__(          d.__setattr__(       d.__setattr__(
d.__setattr__(       d.__setitem__(       d.__setitem__(
d.__sizeof__(        d.__sizeof__(        d.__sizeof__(
d.__str__(           d.__str__(           d.__str__(
d.__subclasshook__(  d.__subclasshook__(  d.__subclasshook__(
d.clear(             d.clear(             d.copy(
d.copy(              d.fromkeys(          d.fromkeys(
d.get(               d.get(               d.has_key(
d.has_key(           d.items(             d.items(
d.iteritems(         d.iteritems(         d.iterkeys(
d.iterkeys(          d.itervalues(        d.itervalues(
d.keys(              d.keys(              d.pop(
d.pop(               d.popitem(           d.popitem(
d.setdefault(        d.setdefault(        d.update(
d.update(            d.values(            d.values(
d.viewitems(         d.viewitems(         d.viewkeys(
d.viewkeys(          d.viewvalues(        d.viewvalues( 
```

108种可能性！最少 2 个，最多 4 个重复项。

此外，

*   如果我对可能性进行子类`dict`化，则可能性总数增加到 160（然后增加到 209、258）。
*   如果我为 TAB 键入足够的字符来确定命令，它会这样做而不显示重复项。

任何指针或调试技巧表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T18:18:50.253

我通过添加自定义完成器解决了这个问题。它现在按预期工作。

```
import readline
import rlcompleter

c = rlcompleter.Completer()

def complete(text, state):
    buffer = readline.get_line_buffer()
    first = c.complete(buffer, 0)
    if state == 0:
        return first
    current = c.complete(buffer, state)
    if current != first:
        return current

readline.parse_and_bind('bind ^I rl_complete')
readline.set_completer(complete) 
```

# javascript - 如何在 JavaScript 的正则表达式的帮助下拆分字符串？

> ID：15543108
> 
> 赞同：0
> 
> 时间：2013-03-21T09:01:10.623
> 
> 标签：javascript, regex

我需要将一个字符串拆分为一个或多个子字符串，每个子字符串包含不超过或少于两个点。例如，如果字符串是，`foo.boo.coo.too"`那么获取以下数组的正则表达式是什么？：`["foo.boo.coo", "boo.coo.too"]`。我希望有人来回答这个问题——我真的很佩服你，因为我已经编程了好几年了，还没有很好地习惯正则表达式来自己解决这个特殊问题。非常感谢您提前。让我知道您的身份，以便我可以将您视为我正在创建的程序的贡献者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:43:12.170

正则表达式本质上会返回不相交的结果，所以如果你想从一个正则表达式中获得“所有匹配”——这是不可能的。

所以基本上你需要找到第一个匹配，然后从下一个位置开始寻找下一个匹配，依此类推；类似于此处描述的这种技术[正则表达式与 C# 中的交集匹配](https://stackoverflow.com/questions/2675035/regex-matches-with-intersection-in-c-sharp)（它不是 JavaScript，但想法是相同的）

例如，您可以使用以下正则表达式：

```
(?<=^|\.)((?:[^.]*\.){2}[^.]*?)(?=$|\.) 
```

它确保它以点开头和结尾，或者在行的开头/结尾，并且内部恰好包含两个点，并在第一次捕获时捕获结果。如果需要，您可以将 * 替换为 + 以确保点之间至少存在一个符号。

但是您需要了解这种方法对于您正在解决的任务的性能确实很差，因此可能使用其他方式（如 split + for）将是更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:04:01.617

正则表达式是针对这个问题的，不是最好的解决方案，这里讨论了一个类似的问题：[split-a-sting-every-3-characters-from-back-javascript](https://stackoverflow.com/questions/14751802/split-a-sting-every-3-characters-from-back-javascript/14751905#14751905)

一个好的 javascript 解决方案是这样的 javascript 函数

```
function splitter(text){
  var parts = text.split(".");
  var times = parts.length - 2;
  var values = [];
  for(var index = 0; index<times;index++)
  {
    values.push(parts.slice(index,index+3).join("."));
  }
  return values;
}

splitter("too.boo.coo.too")
//=> Result tested on Chrome 25+ ["too.boo.coo", "boo.coo.too"] 
```

我希望这有帮助

如果你想使用正则表达式试试 Lookhead Stuff，这可能会有所帮助[http://www.regular-expressions.info/lookaround.html](http://www.regular-expressions.info/lookaround.html)

# php - php IF OR 格式？

> ID：15543109
> 
> 赞同：-1
> 
> 时间：2013-03-21T09:01:12.870
> 
> 标签：php, if-statement, logical-operators

这有效

```
If ($flag != 'u') { stuff.. } 
```

这也有效。

```
If ($id != 0) { stuff.. } 
```

但这些似乎对我不起作用......

```
If ( ($flag != 'u') || ($id != 0) ) { stuff.. }
If ( ($flag != 'u') or ($id != 0) ) { stuff.. }
If ($flag != 'u') || ($id != 0) { stuff.. }
If ($flag != 'u') or ($id != 0) { stuff.. }
If ( $flag != 'u' || $id != 0 ) { stuff.. }
If ( $flag != 'u' or $id != 0 ) { stuff.. } 
```

知道为什么吗？我应该在 PHP 中使用什么格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:15:15.203

您的代码确实有效。我试过这个

```
<?php
$flag= u;
$id= 0;
if ( ($flag != 'u') || ($id != 0) ) 
      { 
          echo "Hi";
      }
?> 
```

代码简单地说`if $flag not equal to u`或`if $id not equals 0`然后`echo hi`在页面中。

这是你的逻辑吗？

我希望问题可能出在您的逻辑中！

# php - 在按对象属性分组的关联数组中对对象进行分类

> ID：15543115
> 
> 赞同：0
> 
> 时间：2013-03-21T09:01:20.140
> 
> 标签：php, arrays, json, iterator

让我先解释一下我的问题。我有一个简单的值对象`Poi`。为了简单起见，本示例中省略了私有属性和 getter/setter。

```
class Poi implements JsonSerializable
{
    public $latitude;
    public $longitude;
    public $category;

    public function __construct($category, $lat, $long)
    {
        $this->category = $category;
        $this->latitude = $lat;
        $this->longitude = $long;
    }

    public function jsonSerialize()
    {
        return array(
            'lat' => $this->latitude,
            'lng' => $this->longitude,
        );
    }
} 
```

一些数据提供者负责返回一组 Poi。IE

```
class PoiProvider1
{
    public function getPois()
    {
        return array(
            new Poi('airport', 10, 10),
            new Poi('airport', 10, 15),
            new Poi('restaurant', 30, 30),
        )
    }
}

class PoiProvider2
{
    public function getPois()
    {
        return array(
            new Poi('hotel', 20, 20),
            new Poi('airport', 30, 30),
        )
    }
} 
```

现在我想要一个结构如下的数组，我可以`json_encode()`

```
array(
    'airport' => array(
        new Poi('airport', 10, 10),
        new Poi('airport', 10, 15),
        new Poi('airport', 30, 30),
    ),
    'restaurant' => array(
        new Poi('restaurant', 30, 30),
    ),
    'hotel' => array(
        new Poi('hotel', 20, 20),
    )
); 
```

在 json_encode 之后，最终会形成以下结构：

```
{
    "airport":[
        {"lat":10,"lng":10},
        {"lat":10,"lng":15},
        {"lat":30,"lng":30}
    ],
    "restaurant":[
        {"lat":30,"lng":30}
    ],
    "hotel":[
        {"lat":20,"lng":20}
    ]
} 
```

我可以使用`array_merge`和一些数组复制来创建这样的结构，如下所示：

```
$provider1 = new PoiProvider1();
$provider2 = new PoiProvider2();
$pois = array_merge($provider1->getPois(), $provider2->getPois());
$poisNew = array();
foreach ($pois as $poi)
{
    $poisNew[$poi->category][] = $poi;
} 
```

显然，在处理大量 poi 时，这会消耗内存并且速度很慢。必须有一些更好更快的方法（即使用迭代器），但我不知道如何解决这个问题。谁能给我一些指示如何进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:23:39.107

为了加快速度，消除后期处理。

**消除后处理：**

您可以为 pois 使用另一个全局或类静态容器，它会在构造过程中自动索引并存储它们，如下所示：

```
class Poi implements JsonSerializable {

public static $json;    // this is our new hero.

public $latitude;
public $longitude;
public $category;

public function __construct($category, $lat, $long){
    $this->category = $category;
    $this->latitude = $lat;
    $this->longitude = $long;
    array_push(self::$json[$category], $this); // this does the trick...
}

public function jsonSerialize()
{
    return array(
        'lat' => $this->latitude,
        'lng' => $this->longitude,
    );
}
}
Poi::$json = array(); 
```

现在在每次创建 poi 时，poi 实例都以您需要的形式存储到 Poi::$json 中。

**生成 POI：**

**如果您不需要处理 poi**，这也将简化您的提供程序：

```
class PoiProvider1 {

public function getPois(){      // no need to return if they are just for json.
   new Poi('airport', 10, 10);  // because each instance will be autoMagically 
   new Poi('airport', 10, 15);  // added to Poi::$json
   new Poi('restaurant', 30, 30);
}
} 
```

但是，如果您在 poi 实例上执行其他操作，请不要使用上面的代码...

**编码：**

由于 $json 是一个关联数组，您可以通过使用获得所需的输出效果

```
json_encode((object)Poi::$json); 
```

缺点是 poi 会留在内存中并在 gc 中存活，因为它们可以通过 Poi::$json 访问。所以在你设置 json_encode 之后

```
Poi::$json  = null; 
```

我希望这有帮助。

# asp.net - 使用 Google Search Appliance 测试中心作为我自己的 aspx 页面

> ID：15543120
> 
> 赞同：1
> 
> 时间：2013-03-21T09:01:27.960
> 
> 标签：asp.net, google-search-appliance

我将如何使用谷歌在测试中心（我测试我的前端）的视图？

当用户浏览到 site/search.aspx 时，我想要查看测试中心显示、搜索框和所有内容。我还想在页面中添加我自己的 javascript 和 css。这可能吗？

现在我创建了一个带有 updatepanel 的搜索框来显示结果，但是这种方法将迫使我为动态导航进行大量解析和设置变量。即很多逻辑谷歌已经在测试中心服务。

顺便说一句，我不想​​使用支持 GSA 6.14 的 McA+ 库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-19T08:16:08.670

我将来自 GSA 的 xml 结果序列化为 C# 对象，然后将它们提供给我可以处理它们的前端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T11:36:11.780

在 C# ASP.NET 中使用 XSL 将 XML 转换为 HTML 的示例可以在以下位置找到：http: [//www.codeproject.com/Articles/469723/Rendering-XML-Data-as-HTML-using-XSL-Transformio](http://www.codeproject.com/Articles/469723/Rendering-XML-Data-as-HTML-using-XSL-Transformatio)

# php - jQuery 中的 getJSON 和 PHP 中的 json_encode 和标头

> ID：15543121
> 
> 赞同：0
> 
> 时间：2013-03-21T09:01:29.483
> 
> 标签：php, javascript, jquery, header, jsonp

我在一个单独的域中有这个 php 文件（courses.php）。

```
<?php
header('content-type: application/javascript; charset=utf-8');

 $array = array();
 $array[0]["id"] = "1";
 $array[1]["id"] = "2";
 $array[2]["id"] = "3";

 $array[0]["coursename"] = "Course Name 1";
 $array[1]["coursename"] = "Course Name 2";
 $array[2]["coursename"] = "Course Name 3";

echo json_encode($array);

?> 
```

我使用 JSONP 在 localhost 中访问如下数据。

```
$.getJSON( 'http://example.info/mobile/courses.php?callback=?', function( result ) {
       console.log(result);
}); 
```

这没用。但是，如果我将 URL 更改为 twitter，如下所示

```
$.getJSON( 'http://search.twitter.com/search.json?q=dogs&callback=?', function( result ) {
       console.log(result);
}); 
```

据我所知，它应该是`courses.php`文件。但我不知道如何解决这个问题。

可能是什么问题？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:04:29.550

您的脚本不返回 JSONP，而是返回 JSON。JSONP 的响应是一个带有一个函数调用的 JavaScript“文件”，其中函数名称来自`callback`参数。

所以不仅仅是返回

```
{"bar": 42} 
```

你必须回来

```
foo({"bar": 42}); 
```

在输出中包含函数名称：

```
echo $_GET['callback'] . '(' . json_encode($array) . ');'; 
```

`$_GET['callback']`如果不存在，您可能还想使用一些合理的默认值，或者简单地返回 JSON。如果您不需要或可以使用 JSONP（例如从另一个服务器端脚本调用 URL），这很有用。

* * *

注意：“JSONP”这个名称有点误导，因为该技术实际上与 JSON 没有任何关系。您生成的响应是纯 JavaScript 代码，您可以将任何内容传递给函数调用，它不必是 JSON 编码和作为对象解释的数据结构（它可以是任何有效的 JavaScript 数据类型）。

# sql-server - 如何使 SSRS 过滤器选择成为可选？

> ID：15543123
> 
> 赞同：0
> 
> 时间：2013-03-21T09:01:37.943
> 
> 标签：sql-server, reporting-services, reportingservices-2005

我正在使用 SQL Server 2005 Reporting Services 创建一个新报告。

此报告有 2 个可选参数可供用户选择或用户可以将其留空。两者都是下拉选择。

我面临的问题是，我将两个参数都设置为允许空值，但不允许空值。当我单击查看报告按钮而不选择任何过滤条件时，报告给我 0 条记录。但是，如果我为两个下拉选择都选择了一个值，报告会给我结果。

`@Package`是`varchar(100)`和`@Plant`是`tinyiny`。

我是这样写`WHERE`子句的。请帮助并非常感谢。

```
WHERE (@Package ='' OR PACKAGE_TYPE LIKE '%' + @Package + '%') AND
 (@Plant IS NULL OR PLANT_ID = @Plant ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:31:16.817

因此，当没有选择过滤条件时，两者`@Package`和`@Plant`都是`NULL`？

在上面的`WHERE`子句中，您只处理`@Plant` `NULL`值。

您还需要检查`NULL` `@Package`类似的内容：

```
WHERE (@Package IS NULL OR @Package ='' OR PACKAGE_TYPE LIKE '%' + @Package + '%') AND
  (@Plant IS NULL OR PLANT_ID = @Plant ) 
```

# jsf - 动态认证授权机制

> ID：15543132
> 
> 赞同：1
> 
> 时间：2013-03-21T09:02:14.580
> 
> 标签：jsf, authentication, spring-security, authorization, spring-ldap

我正在开发一个由不同域组成的 Web 应用程序。我试图实现分层 RBAC 进行授权。每个域在其 bo 实现中都有一些预定义的操作。以下是我的 bo 包层次结构。

com.mycompany.bo
...domain1
...domain2
。
...域N
...rbac

我在第一次部署时预定义了以下角色层次结构，我不想在第一次部署后维护 rbac 操作，我的意思是域 rbac 操作应该由域管理员自行维护。

```
 Root
Domain1Admin Domain2Admin .. DomainNAdmin 
```

root 角色可以授权 bo 实现下的所有操作，每个域管理员也可以授权其所有自己的操作和一些 rbac 操作，如创建用户、编辑用户、创建角色等。
最后，我开发了遵循facelet工具的项​​目的ui部分，例如include标签，以便我可以区分页面的ui片段。结果，我可以根据用户是否有权查看片段来呈现 ui 片段。**任何对系统授权设计的建议都会有很大帮助。**

现在，我来到了项目的身份验证部分。在这个系统中，用户不仅在内部进行身份验证，还应该通过 Web 服务或 ldap 在外部系统上进行身份验证，因为用户可能已经在那里创建。

Spring 框架通过 ldap（在 xml 中静态可配置）提供了一些设施认证。就我而言，我想在运行时添加删除编辑新的 LDAP 定义，并且可以更改用户身份验证方法（可能是从组合框中选择新的 LDAP）。**如何在 Spring 中动态添加新的 LDAP 定义，我应该继续使用 spring 安全性还是自己实现这个功能？**

# asp.net - 通过处理程序下载文件而不结束当前响应

> ID：15543136
> 
> 赞同：1
> 
> 时间：2013-03-21T09:02:31.113
> 
> 标签：asp.net

在我的页面上，我有一个下载文档的按钮。我正在使用步骤构建页面，因此第 1 步是选择类型，第 2 步是下载文档，第 3 步是在文本框中写入一些信息。

我想做的是在按下下载按钮后显示第 3 步。

因此，在 button_click 事件中，我首先放置了一些代码来显示第 3 步，然后我需要做一些事情来下载表单。

要下载该文档，我使用 ASHX 处理程序文件。这很好用。

但我的问题是当我去那个处理程序时，我的页面没有更新。

我用了

```
response.redirect("GiveFile.ashx?file=document.doc",false) 
```

经过一番阅读，我发现使用 response.redirect 会结束当前响应，因此页面不会更新。

我正在考虑创建一个新的响应并将其重定向到处理程序文件，但我找不到一个示例来了解它是如何完成的。我也不知道它是否会起作用。

我也试过

```
server.transferrequest("GiveFile.ashx?file=document.doc",true) 
```

但这也结束了当前的响应。

谁能帮我解决这个问题？

rg，埃里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:06:38.743

Google 正在使用隐藏的 iframe 来“在后台”下载文件。使用代码示例检查本文：

[http://encosia.com/ajax-file-downloads-and-iframes/](http://encosia.com/ajax-file-downloads-and-iframes/)

# jquery - 如何限制飞到购物篮插件中添加到购物篮的物品数量？

> ID：15543137
> 
> 赞同：0
> 
> 时间：2013-03-21T09:02:32.640
> 
> 标签：jquery, shopping-cart

我在这里指的是以前的问题。我在我的网页中的购物车实现中实现了飞到购物车效果，一切正常，但一个问题是，我们可以多次单击添加到购物车链接，我想限制这个或其他我只想将添加到购物篮的商品数量限制为 20，我该如何实现？

我只是在通过ajax将项目添加到购物篮时给出了一个限制，并且在一个一个缓慢地单击时它工作正常。但是当快速点击它时它会崩溃，因为当项目超过限制 20 时它不会停止，它应该只是停止动画和 addtobasket 函数以在超过 20 时将项目添加到数据库

链接在这里：[动画篮子时禁用链接](https://stackoverflow.com/questions/3064886/disable-link-while-animated-basket)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:27:33.520

我认为您可以在达到特定数字时简单地禁用该按钮。我有一个小测试： `[jsfiddle example](http://jsfiddle.net/sanman/YHebP/)`

# mysql - 表特定权限

> ID：15543139
> 
> 赞同：0
> 
> 时间：2013-03-21T09:02:48.410
> 
> 标签：mysql, database, phpmyadmin, database-administration

我想在 phpmyadmin 中实现表级别的权限。我希望某些列只显示给用户。

这是我使用的查询。

```
REVOKE ALL PRIVILEGES ON `resource_test`.`resources` FROM 'test_user'@'%';

GRANT SELECT (`resource_id`, `first_name`) ON `resource_test`.`resources` TO 'test_user'@'%'WITH GRANT OPTION; 
```

但我无法只选择选定的字段/列。

是否可以只向用户显示几列？

供您参考，我正在使用 MySQL - 5.1.50

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:45:35.830

是的

```
GRANT select(col1, col2,...) On tbl To user 
```

就像是

```
 GRANT select (id,name) ON Users To scott 
```

其中 id 和 name 是表用户中的 cols

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:18:00.400

是的，这是可能的。

```
GRANT SELECT (columnname) ON person TO SomeOne 
```

参考[文档](http://dev.mysql.com/doc/refman/5.1/en/grant.html)

# javascript - 传单中圆形标记的标签

> ID：15543141
> 
> 赞同：9
> 
> 时间：2013-03-21T09:02:51.633
> 
> 标签：javascript, leaflet

我可以像这样向圆形标记添加标签

```
L.circleMarker(points[i],{title: 'unselected'}).bindLabel('Destination').addTo(map); 
```

这会添加出现在鼠标悬停在圆形标记上的标签。

但我想添加静态标签，无论鼠标是否在那个圆圈标记上，它都会出现。

我指的是这个演示[http://leaflet.github.com/Leaflet.label/](http://leaflet.github.com/Leaflet.label/)用于将静态标签添加到圆形标记，但有些我无法做到。使用标记可以正常工作，但使用圆形标记静态标签不起作用。

还有其他方法可以在圆形标记上添加标签吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-21T12:54:59.607

`L.CircleMarker``L.Path`从not扩展`L.Marker`，所以如果你比较[https://github.com/Leaflet/Leaflet.label/blob/master/src/Path.Label.js](https://github.com/Leaflet/Leaflet.label/blob/master/src/Path.Label.js)和[https://github.com/Leaflet/Leaflet.label/blob/ master/src/Marker.Label.js](https://github.com/Leaflet/Leaflet.label/blob/master/src/Marker.Label.js)你会发现`Path`没有任何选项，这个逻辑你必须自己实现。例如：

```
L.CircleMarker.include({
    bindLabel: function (content, options) {
        if (!this._label || this._label.options !== options) {
            this._label = new L.Label(options, this);
        }

        this._label.setContent(content);
        this._labelNoHide = options && options.noHide;

        if (!this._showLabelAdded) {
            if (this._labelNoHide) {
                this
                    .on('remove', this.hideLabel, this)
                    .on('move', this._moveLabel, this);
                this._showLabel({latlng: this.getLatLng()});
            } else {
                this
                    .on('mouseover', this._showLabel, this)
                    .on('mousemove', this._moveLabel, this)
                    .on('mouseout remove', this._hideLabel, this);
                if (L.Browser.touch) {
                    this.on('click', this._showLabel, this);
                }
            }
            this._showLabelAdded = true;
        }

        return this;
    },

    unbindLabel: function () {
        if (this._label) {
            this._hideLabel();
            this._label = null;
            this._showLabelAdded = false;
            if (this._labelNoHide) {
                this
                    .off('remove', this._hideLabel, this)
                    .off('move', this._moveLabel, this);
            } else {
                this
                    .off('mouseover', this._showLabel, this)
                    .off('mousemove', this._moveLabel, this)
                    .off('mouseout remove', this._hideLabel, this);
            }
        }
        return this;
    }
});

L.circleMarker([53.902257, 27.541640] ,{title: 'unselected'}).addTo(map).bindLabel('Destination', { noHide: true }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T18:55:32.270

只是想为 tbicr 的出色响应添加更新或更正（不确定 API 是否在他的响应后更新）。

你可以这样做：

```
 // First add your GeoJSON layer
 geojson = L.geoJson(myGeoJson,{
        onEachFeature: onEachFeature
    }).addTo(map);

 // onEachFeature is called every time a polygon is added
 var polys = [];
 function onEachFeature(layer){
     polys.push(layer); // Push the polygons into an array you can call later
 }

 // Now trigger them after they've been added
 $('a').click(function(){
      polys[0].fire('click') // clicks on the first polygon
      polys[1].fire('click') // clicks on the second polygon
 }); 
```

# java - 如何使用 loadDataWithBaseURL 播放嵌入视频

> ID：15543142
> 
> 赞同：1
> 
> 时间：2013-03-21T09:02:55.587
> 
> 标签：java, android, video, video-streaming

## 问题描述

我正在尝试通过调用 loadDataWithBaseURL 方法并将嵌入数据传递给它来播放 SWF 视频。但是视频没有开始播放，只是显示白屏。难道我做错了什么 ？

## 源代码

```
protected void onCreate(Bundle savedInstanceState) {
    // Get Web View from the layout.
    mWebView = (WebView) findViewById(R.id.webViewOnlieWebCams);
    mWebView.getSettings().setJavaScriptEnabled(true);
    mWebView.getSettings().setPluginsEnabled(true);
    mWebView.getSettings().setAllowFileAccess(true);

    String mimeType = "text/html";  
    String encoding = "utf-8";  
    String embed = "<embed type=\"application/x-shockwave-flash\" src=\"/bundles/mymain/swf/player-licensed.swf\" width=\"320\" height=\"390\" style=\"undefined\" id=\"mpl\" name=\"mpl\" quality=\"low\" allowfullscreen=\"true\" allowscriptaccess=\"always\" wmode=\"opaque\" flashvars=\"autostart=true&amp;file=camera39.stream&amp;streamer=rtmp://wss.yerevan.am/axis&amp;logo=/bundles/mymain/images/logo10.png&amp;logo.hide=false&amp;logo.position=bottom-left&amp;logo.timeout=3\">";

    mWebView.loadDataWithBaseURL(null, embed, mimeType, encoding, "");      
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-16T06:04:40.153

尝试使用以下代码：

```
String html = "<object width=\"1008\"height=\"550\"> <param name=\"movie\" value=\"file://"
                        + path
                        + "\"> <embed src=\"file://"
                        + path
                        + "\" width=\"1008\"height=550\"> </embed> </object>";
                String mimeType = "text/html";
                String encoding = "utf-8";
                web.loadDataWithBaseURL("null", html, mimeType, encoding, ""); 
```

# objective-c - 带有背景的 NSView 图像

> ID：15543146
> 
> 赞同：0
> 
> 时间：2013-03-21T09:03:12.053
> 
> 标签：objective-c, macos, cocoa, nsview

我正在尝试获取视图的图像，因此我可以将其放入`NSImageView`.

我正在使用`NSView`s`bitmapImageRepForCachingDisplayInRect:`方法。
但是，此方法只返回视图的内容，没有窗口的背景。

如何获得整个视图的图像，就像它在屏幕上的样子，背景颜色等？

* * *

## 当前代码

```
- (NSImage *)imageOfView:(NSView *)view {
    NSBitmapImageRep* rep = [view bitmapImageRepForCachingDisplayInRect:view.bounds];
    [view cacheDisplayInRect:view.frame toBitmapImageRep:rep];

    return [[NSImage alloc] initWithCGImage:[rep CGImage] size:view.bounds.size];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:14:11.367

[来自项目](http://developer.apple.com/library/mac/#samplecode/ScreenSnapshot/Introduction/Intro.html)的这份声明

```
/* Get the index for the chosen display from the CGDirectDisplayID array. */
NSInteger displaysIndex = [menuItem tag];
/* Make a snapshot image of the current display. */
CGImageRef image = CGDisplayCreateImage(displays[displaysIndex]); 
```

# powershell - PowerShell：使用已创建的对象

> ID：15543147
> 
> 赞同：0
> 
> 时间：2013-03-21T09:03:13.100
> 
> 标签：powershell

$ie = New-Object -com internetexplorer.application

我想在脚本下次运行时重用这个对象。我不想创建一个新对象

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:30:21.473

您应该能够使用此方法附加到进程，检查 Windows() 方法的结果，找到 IE，然后构建正确的 where 子句：

```
$ie = (New-Object -ComObject Shell.Application).Windows() | Where-Object {...} 
```

# c# - 通过 HttpClient 发布文件时 HttpRequest.Files 为空

> ID：15543150
> 
> 赞同：11
> 
> 时间：2013-03-21T09:03:19.033
> 
> 标签：c#, .net, asp.net-web-api, httpclient

服务器端：

```
 public HttpResponseMessage Post([FromUri]string machineName)
    {
        HttpResponseMessage result = null;
        var httpRequest = HttpContext.Current.Request;

        if (httpRequest.Files.Count > 0 && !String.IsNullOrEmpty(machineName))
        ... 
```

客户端：

```
 public static void PostFile(string url, string filePath)
    {
        if (String.IsNullOrWhiteSpace(url) || String.IsNullOrWhiteSpace(filePath))
            throw new ArgumentNullException();

        if (!File.Exists(filePath))
            throw new FileNotFoundException();

        using (var handler = new HttpClientHandler { Credentials=  new NetworkCredential(AppData.UserName, AppData.Password, AppCore.Domain) })
        using (var client = new HttpClient(handler))
        using (var content = new MultipartFormDataContent())
        using (var ms = new MemoryStream(File.ReadAllBytes(filePath)))
        {
            var fileContent = new StreamContent(ms);
            fileContent.Headers.ContentDisposition = new ContentDispositionHeaderValue("attachment")
            {
                FileName = Path.GetFileName(filePath)
            };
            content.Add(fileContent);
            content.Headers.ContentType = new MediaTypeHeaderValue("application/octet-stream");

            var result = client.PostAsync(url, content).Result;
            result.EnsureSuccessStatusCode();
        }
    } 
```

在服务器端 httpRequest.Files 集合始终为空。但是标题（内容长度等......）是正确的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-21T14:14:19.180

您不应该使用 HttpContext 来获取 ASP.NET Web API 中的文件。看看微软编写的这个例子（[http://code.msdn.microsoft.com/ASPNET-Web-API-File-Upload-a8c0fb0d/sourcecode?fileId=67087&pathId=565875642](http://code.msdn.microsoft.com/ASPNET-Web-API-File-Upload-a8c0fb0d/sourcecode?fileId=67087&pathId=565875642)）。

```
public class UploadController : ApiController 
{ 
    public async Task<HttpResponseMessage> PostFile() 
    { 
        // Check if the request contains multipart/form-data. 
        if (!Request.Content.IsMimeMultipartContent()) 
        { 
            throw new HttpResponseException(HttpStatusCode.UnsupportedMediaType); 
        } 

        string root = HttpContext.Current.Server.MapPath("~/App_Data"); 
        var provider = new MultipartFormDataStreamProvider(root); 

        try 
        { 
            StringBuilder sb = new StringBuilder(); // Holds the response body 

            // Read the form data and return an async task. 
            await Request.Content.ReadAsMultipartAsync(provider); 

            // This illustrates how to get the form data. 
            foreach (var key in provider.FormData.AllKeys) 
            { 
                foreach (var val in provider.FormData.GetValues(key)) 
                { 
                    sb.Append(string.Format("{0}: {1}\n", key, val)); 
                } 
            } 

            // This illustrates how to get the file names for uploaded files. 
            foreach (var file in provider.FileData) 
            { 
                FileInfo fileInfo = new FileInfo(file.LocalFileName); 
                sb.Append(string.Format("Uploaded file: {0} ({1} bytes)\n", fileInfo.Name, fileInfo.Length)); 
            } 
            return new HttpResponseMessage() 
            { 
                Content = new StringContent(sb.ToString()) 
            }; 
        } 
        catch (System.Exception e) 
        { 
            return Request.CreateErrorResponse(HttpStatusCode.InternalServerError, e); 
        } 
    } 

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-01T09:38:45.800

除了内容类型应该是`multipart/form-data`. 请尝试更改您的代码以反映正确的内容类型：

```
content.Headers.ContentType = new MediaTypeHeaderValue("multipart/form-data"); 
```

您可能想参考[这篇](https://stackoverflow.com/q/12339770/465053)文章，了解为什么从客户端设置内容类型`application/octet-stream`没有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T09:15:06.983

试试这个方法：

```
 public void UploadFilesToRemoteUrl()
    {
        string[] files = { @"your file path" };

        string url = "Your url";
        long length = 0;
        string boundary = "----------------------------" +
        DateTime.Now.Ticks.ToString("x");

        HttpWebRequest httpWebRequest2 = (HttpWebRequest)WebRequest.Create(url);
        httpWebRequest2.ContentType = "multipart/form-data; boundary=" +
        boundary;
        httpWebRequest2.Method = "POST";
        httpWebRequest2.KeepAlive = true;
        httpWebRequest2.Credentials =
        System.Net.CredentialCache.DefaultCredentials;

        Stream memStream = new System.IO.MemoryStream();

        byte[] boundarybytes = System.Text.Encoding.ASCII.GetBytes("\r\n--" +
        boundary + "\r\n");

        string formdataTemplate = "\r\n--" + boundary +
        "\r\nContent-Disposition: form-data; name=\"{0}\";\r\n\r\n{1}";

        memStream.Write(boundarybytes, 0, boundarybytes.Length);

        string headerTemplate = "Content-Disposition: form-data; name=\"{0}\"; filename=\"{1}\"\r\n Content-Type: application/octet-stream\r\n\r\n";

        for (int i = 0; i < files.Length; i++)
        {

            //string header = string.Format(headerTemplate, "file" + i, files[i]);
            string header = string.Format(headerTemplate, "uplTheFile", files[i]);

            byte[] headerbytes = System.Text.Encoding.UTF8.GetBytes(header);

            memStream.Write(headerbytes, 0, headerbytes.Length);

            FileStream fileStream = new FileStream(files[i], FileMode.Open,
            FileAccess.Read);
            byte[] buffer = new byte[1024];

            int bytesRead = 0;

            while ((bytesRead = fileStream.Read(buffer, 0, buffer.Length)) != 0)
            {
                memStream.Write(buffer, 0, bytesRead);
            }

            memStream.Write(boundarybytes, 0, boundarybytes.Length);
            fileStream.Close();
        }

        httpWebRequest2.ContentLength = memStream.Length;

        Stream requestStream = httpWebRequest2.GetRequestStream();

        memStream.Position = 0;
        byte[] tempBuffer = new byte[memStream.Length];
        memStream.Read(tempBuffer, 0, tempBuffer.Length);
        memStream.Close();
        requestStream.Write(tempBuffer, 0, tempBuffer.Length);
        requestStream.Close();

        WebResponse webResponse2 = httpWebRequest2.GetResponse();

        Stream stream2 = webResponse2.GetResponseStream();
        StreamReader reader2 = new StreamReader(stream2);

        webResponse2.Close();
        httpWebRequest2 = null;
        webResponse2 = null;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-04T12:33:36.590

如果其他人有同样的问题：确保您的边界字符串有效，例如**不**要这样做：

```
using (var content =
    new MultipartFormDataContent("Upload----" + DateTime.Now.ToString(CultureInfo.InvariantCulture)))
{
        ...
} 
```

由于无效的边界字符（可能是“/”日期分隔符），这对我来说失败了。至少这解决了我`Context.Request.Files`在`Nancy`控制器（始终为空）中访问时的问题。

最好使用类似的东西`DateTime.Now.Ticks.ToString("x")`。

# android - 如何更改操作栏标题的颜色？

> ID：15543154
> 
> 赞同：1
> 
> 时间：2013-03-21T09:03:31.410
> 
> 标签：android

```
ActionBar bar = getActionBar();
bar.setTitle(R.string.title);// set application title 
```

我正在通过我的 java 代码设置我的标题。如何更改操作栏标题的颜色。

```
 <style name="ActionBar.Text.Example" parent="@android:style/TextAppearance">
        <item name="android:textColor">@color/actionBarText</item>
    </style>

  <style name="TitleText" parent="@android:style/TextAppearance">
            <item name="android:textColor">@android:color/white</item>
            <item name="android:textSize">18dip</item>
  </style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:06:30.243

在 Android 文档中有操作栏样式的示例：http: [//developer.android.com/guide/topics/ui/actionbar.html#AdvancedStyles](http://developer.android.com/guide/topics/ui/actionbar.html#AdvancedStyles)

# java - 如何在列表中使用 JSON 累积方法？

> ID：15543156
> 
> 赞同：7
> 
> 时间：2013-03-21T09:03:35.963
> 
> 标签：java, json, list

我正在尝试下面的代码....

```
public  String listToJsonString(String keyName, List<StyleAttribute> attrs) {
        JSONObject json = new JSONObject();
        json.accumulate(keyName, attrs);
        return json.toString();
    } 
```

但是当我检查**json**变量时，它包含空值，如下所示

> {“我的钥匙”：[{}，{}，{}，{}，{}，{}，{}，{}，{}，{}，{}，{}，{}，{}，{} ,{},{},{},{},{},{},{}]}

当我检查**attrs**变量时，它包含 22 个元素数据。我在这里做错了什么？我只是将我的列表转换为 Json 对象并保存到数据库。我在用

```
import net.sf.json.JSONArray;
import net.sf.json.JSONException;
import net.sf.json.JSONObject; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T12:28:04.227

您可以使用以下代码

```
public String listToJsonString(List<StyleAttribute> attrs) {
        JSONObject jObject = new JSONObject();
        try {
            JSONArray jArray = new JSONArray();
            for (MyClass myObject: attrs) {
                JSONObject styleJSON = new JSONObject();
                styleJSON.put("name",myObject.getName());
                styleJSON.put("rollNumber", myObject.getRollNumber());

                jArray.add(styleJSON);
            }
            jObject.put("keyName", jArray);
        } catch (Exception jse) {
        }

        return jObject.toString();
    } 
```

它将解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T09:53:50.170

不确定这一点，但您列表中的对象可能是可序列化的。

另外，您使用什么库来管理 JSON？

**编辑 ：**

所以 json-lib 就是这样！

我在 json-lib FAQ 中找到了这个：

> **Json-lib 从我的 bean 类创建空 JSONObjects，帮帮我！**
> 
> Json-lib 使用 JavaBeans 约定来检查您的 bean 并创建 JSONObjects。如果 bean 的属性不符合约定，则生成的 JSONObject 将为空或半空。您必须为每个属性提供一个读/写方法对。

这是讨论 JavaBeans 约定的维基百科页面：

[http://en.wikipedia.org/wiki/JavaBeans#JavaBean_conventions](http://en.wikipedia.org/wiki/JavaBeans#JavaBean_conventions)

希望对你有帮助！

# html - 在悬停时显示特定的div？仅使用 css 和 html

> ID：15543159
> 
> 赞同：2
> 
> 时间：2013-03-21T09:03:41.923
> 
> 标签：html, css, hover

我想在光标悬停在锚标记上时显示第二个`div`（在 HTML 中）类a。`dikh`

HTML 代码：

```
<a>Hover over me!</a>
<div class="faraz"> sdjfg </div>
<div class="dikha">Stuff shown on hover</div> 
```

风格

```
div {
display: none;
}

a:hover > div:nth-child(2) {
display: block;
background-color: RED;
height: 250px;
width: 960px;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T09:06:07.223

像这样写：

```
a:hover ~ .dikha {
    display: block;
    background-color: RED;
    height: 250px;
    width: 960px;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T09:06:52.070

您需要使用相邻的兄弟选择器`~`。此外，您要显示的 div 是第三个孩子，而不是第二个（因为`<a>`是第一个）。

```
div {
    display: none;
}
a:hover ~ div:nth-child(3) {
    display: block;
    background-color: RED;
    height: 250px;
    width: 960px;
} 
```

**演示：http: [//jsfiddle.net/3eFhf/](http://jsfiddle.net/3eFhf/)**

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-21T09:24:03.327

你可以在这里使用javascript函数。

> <onmouseover="document.getElementById('myid').style.display='block'">
> 
> <id="myid" class="dikha">

您的 dikha 类应默认隐藏

> .dikha { 显示：无；}

您也可以使用 jquery slidetoggle 方法来实现这一点

# javascript - 检查对象是否包含具有特定值的属性

> ID：15543161
> 
> 赞同：-1
> 
> 时间：2013-03-21T09:03:53.973
> 
> 标签：javascript

我有一个如下对象：

```
var _obj = { 
    'name1@gmail.com' : { 
        'bob@gmail.com' : {
            channel: 'V2231212', 
            from: 'bob'
        },
        'judy@gmail.com' : {
            channel: 'V223231212', 
            from: 'judy'
        }
    },
    'name2@gmail.com' : { 
        'bill@gmail.com' : {
            channel: 'V123123',
            from: 'bill'
        }
    }
}; 
```

我如何检查对象`channel`中是否存在等于“ ”的“ `V123123`”？

在上述情况下 bill@gmail 等于 V123123 并且应该返回 true。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:10:19.190

尝试一下：

```
console.log(containsPropertyValue(_obj, 'channel', 'V123123'));

function containsPropertyValue(obj, propertyName, propertyValue){
    var contains = false;
    function a(o){
        for(var prop in o)
            if(o.hasOwnProperty(prop)){
                if(prop === propertyName && o[prop] === propertyValue){
                    contains = true;
                    return;
                }
                if(typeof o[prop] === 'object')
                    a(o[prop]);
            }
    }
    a(_obj);
    return contains;
} 
```

[JSFiddle](http://jsfiddle.net/dHS5a/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:34:40.803

另一个解决方案

```
Object.keys(_obj).forEach(function(v, i){
  Object.keys(_obj[v]).forEach(function(w, k){
    if(_obj[v][w].hasOwnProperty('channel')&&_obj[v][w]['channel']=='V123123')
      return true;
  })
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T10:16:24.183

[**使用getOwnPropertyNames 的**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/getOwnPropertyNames)另一种选择[](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/getOwnPropertyNames)

 **```
function hasPropertyWithValue(obj, propertyName, propertyValue) {
    var matchFound = false;
    var _prop;
    var _properties = Object.getOwnPropertyNames(obj);

    for(var i = 0; i < _properties.length; i++){
        _prop = _properties[i];

        if(_prop === propertyName && obj[_prop] === propertyValue){
            return true;
        }

        if(typeof obj[_prop] === 'object'){
            matchFound = hasPropertyWithValue(obj[_prop],  propertyName, propertyValue);
            if (matchFound){
               return true;
            }
        }
    }

    return matchFound;
} 
```

像这样使用：

```
var matched = hasPropertyWithValue(_obj, 'channel', 'V123123'); 
```

* * *

[**演示**](http://jsfiddle.net/4sKdr/)- 使用`getOwnPropertyNames()`

* * *

* * *

`getOwnPropertyNames()`浏览器支持

* * *

*   火狐（壁虎）：4（2.0）
*   铬：5
*   互联网浏览器：9
*   歌剧：12
*   野生动物园：5**

# android - 如何使用 Intent 捕获视频并设置录制路径和限制录制时间

> ID：15543165
> 
> 赞同：6
> 
> 时间：2013-03-21T09:04:04.170
> 
> 标签：android, video, android-intent, capture, filepath

我使用基于意图的录制视频的示例

```
Intent intent = new Intent(android.provider.MediaStore.ACTION_VIDEO_CAPTURE);
startActivityForResult(intent, REQUEST_VIDEO_CAPTURED); 
```

对于我使用的时间限制：`intent.putExtra("android.intent.extra.durationLimit", 5);` 这会记录 5 秒，然后自动停止。

我使用了来自 URL 的示例： [http](http://android-er.blogspot.cz/2011/04/start-video-recording-using.html) ://android-er.blogspot.cz/2011/04/start-video-recording-using.html 这个示例对我来说很有趣，因为它适用于我的所有设备并且易于实现。

是否可以设置保存录制视频的路径？假设很简单，我需要将视频保存到指定的文件“myrecordedvideo.mp4”到指定的文件夹中，并且需要视频正好有 5 秒。是否可以使用此 Intent 轻松实现？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-07-15T09:29:34.547

设置时间限制并设置保存视频的路径

```
Intent takeVideoIntent = new Intent(MediaStore.ACTION_VIDEO_CAPTURE);
takeVideoIntent.putExtra(MediaStore.EXTRA_DURATION_LIMIT, 30);
takeVideoIntent.putExtra(MediaStore.EXTRA_OUTPUT, Environment.getExternalStorageDirectory().getPath()+"videocapture_example.mp4");

startActivityForResult(takeVideoIntent, ACTION_TAKE_VIDEO); 
```

# visual-studio-2012 - 如何为 MS Test 项目设置工作目录

> ID：15543167
> 
> 赞同：16
> 
> 时间：2013-03-21T09:04:06.973
> 
> 标签：visual-studio-2012, mstest

如何为 MS Tests 项目设置工作目录，就像我可以为普通应用程序项目一样？被测试的我的组件需要访问一些也被其他应用程序使用的配置文件。到目前为止，我必须将这些文件复制到我的测试项目的 bin/debug 文件夹中，因为这些文件应该位于工作目录中。

是否可以为测试项目设置工作目录？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-06T02:54:55.300

对于使用 Visual Studio 2012 的用户，如果您在 Properties|Build|OutputPath 下设置测试项目的输出目录，那么当您从 Visual Studio 运行测试时，该目录将成为工作目录（因为它使用的是 Vstest.console.exe） . 如果您不想将测试 dll 等输出到与其他文件相同的目录，并且您不想将其他文件作为测试项目中的内容（如 Schaliasos 所建议），那么您可以设置具有该`[AssemblyInitialize]`属性的方法中的启动路径。`System.Environment.CurrentDirectory`您可以通过照常分配来做到这一点。您可能希望将工作目录作为设置或从配置文件中读取。

**编辑**

正如 Rohit.Net 所指出的，当您选择`Run All Tests`默认路径时，它将位于 TestResults 下。使用`runsettings`文件时也是如此。当您不使用 DeploymentItems 时，输出文件夹将是默认工作目录，并且：-

*   在 Visual Studio 中右键单击测试并选择运行/调试，或者
*   您使用 vstest.console.exe 从命令行运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T09:12:45.827

测试项目的工作目录是在您开始运行测试时创建的。

如果您在本地运行它们，则会在`TestResults`项目文件夹内的文件夹中创建它们。如果您在远程机器上运行它们，则会在以下路径中的每个测试代理中创建一个不同的文件夹：

> C:\Users{userRunsTheTest}\AppData\Local\VSEQT\QTAgent\{GuidForThisRun}

为了将您的文件部署在这些文件夹中并有权访问它们，您必须：

1.  设置`Copy to Output Directory = Copy Always`
2.  在需要这些文件的测试中，将它们设置为[DeploymentItems](http://msdn.microsoft.com/en-us/library/vstudio/ms182475.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-13T09:38:26.293

`Run All tests`当您从 Visual Studio 2012 的测试资源管理器中选择时，Acarlon 的建议不起作用。

您将获得的默认路径类似于`...\TestResults\Deploy_<YourName>2014-01-13 14_48_20\Out`文件夹。

因此，当实体尝试打开连接以运行与实体相关的测试时，您的数据库可能无法访问。

在我的情况下，我使用的是 SQL CE，它被设置为资源文件并且总是被编译并将其自身放入`Bin/Debug/Resource`文件夹中。

# c# - 当进程被杀死时，WCF tcp 连接保持打开状态

> ID：15543173
> 
> 赞同：5
> 
> 时间：2013-03-21T09:04:26.390
> 
> 标签：c#, wcf, tcp

我在这里看到过类似的问题，但找不到答案。我有一个应用程序使用 WCF 打开与远程地址的连接，有时当我从任务管理器中终止应用程序或应用程序不正常关闭时，连接保持打开状态，然后当我重新启动应用程序时，我收到一个异常，告诉我已经存在此端口上的侦听器。

几个问题：

1.  为什么在我终止进程后此类连接保持打开状态？
2.  当进程不正常关闭时，如何关闭此连接？
3.  在尝试创建新连接之前如何关闭连接？

服务端：

```
var url = Config.GetRemoteServerUrl();
var binding = new NetTcpBinding();

binding.Security.Mode = SecurityMode.None;
binding.ReliableSession.Enabled = Config.RelaiableSession;
binding.ReliableSession.InactivityTimeout = TimeSpan.MaxValue;
binding.MaxConnections = Config.MaxConcurrentSessions;
binding.ReaderQuotas.MaxArrayLength = Config.ReaderQuotasMaxArrayLength;
binding.MaxReceivedMessageSize = Config.MaxReceivedMessageSize;
binding.SendTimeout = new TimeSpan(0,0, 0, 0,Config.SendTimeout);
binding.OpenTimeout = new TimeSpan(0,0, 0, 0,Config.OpenTimeout);

host = new ServiceHost(ServerFacade.Instance, new Uri[] { new Uri(url) });

host.AddServiceEndpoint(typeof(ITSOServiceContract), binding, url);

host.Open();

serverFacade = host.SingletonInstance as IServerFacade; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:35:41.620

您可以尝试添加 Channel_Closed 事件处理程序并使用 Abort() 方法强制它处理。

```
 OperationContext.Current.Channel.Closed += channelClosed;

    void Channel_Closed(object sender, EventArgs e)
    {
        var success = false;
        try
        {           
           proxy.Close();
           success = true;
        }
        finally
        {
          if (!success) proxy.Abort();           
        }
    } 
```

# ipad - iPad 中心自定义模态视图

> ID：15543180
> 
> 赞同：1
> 
> 时间：2013-03-21T09:04:32.587
> 
> 标签：ipad, uinavigationcontroller, modalviewcontroller

我有一个带有自定义模式视图控制器的应用程序，这个控制器在导航控制器内，这是我的代码：

```
CalendarViewController *calendarViewController = [[CalendarViewController alloc] initWithNibName:@"CalendarViewController" bundle:nil];

[calendarViewController setDelegate:self];

UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:calendarViewController];
[navigationController setModalPresentationStyle:UIModalPresentationFormSheet];
[navigationController setModalTransitionStyle:UIModalTransitionStyleFlipHorizontal];

[self presentModalViewController:navigationController animated:YES];

navigationController.view.superview.frame = CGRectMake(0, 0, 630, 555);
navigationController.view.superview.center = self.view.center; 
```

问题是这个导航控制器不在屏幕中心。此屏幕的位置在 ipad 的右侧。有没有解决方案如何使这个自定义控制器居中。非常感谢。

# mysql - 从mysql存储过程中选择

> ID：15543181
> 
> 赞同：0
> 
> 时间：2013-03-21T09:04:33.047
> 
> 标签：mysql, stored-procedures

由于这不能像这样完成：

```
select * from (call my_stored_procedure(params)); 
```

上面的陈述有什么替代方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:08:53.637

一个过程可以返回多个结果集，每个结果集都有自己的模式。它不适合在 SELECT 语句中使用。

用户定义的函数可能是一个选项。这是一个例子：

```
CREATE FUNCTION CubicVolume
 -- Input dimensions in centimeters
 (@CubeLength decimal(4,1), @CubeWidth decimal(4,1),@CubeHeight decimal(4,1) )
  RETURNS decimal(12,3) -- Cubic Centimeters.
  AS
  BEGIN
   RETURN ( @CubeLength * @CubeWidth * @CubeHeight )
 END 
```

更多关于这个链接：http: [//msdn.microsoft.com/en-us/library/aa175085%28SQL.80%29.aspx](http://msdn.microsoft.com/en-us/library/aa175085%28SQL.80%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:10:05.567

创建一个临时表变量并将 sp 值插入其中，例如：

```
Declare @t table
(
  --column numbers will be equals to the numbers return by SP
)
Insert Into @t
call my_stored_procedure(params)

Select * From @t 
```

# android - 在帐户菜单中添加项目

> ID：15543184
> 
> 赞同：0
> 
> 时间：2013-03-21T09:04:54.080
> 
> 标签：android, android-syncadapter, android-account

我有一个应用程序，该应用程序在帐户中具有帐户并同步。我可以选择同步日历和联系人。在帐户的右上角有菜单（所有帐户的标准）。您可以在下面的图片中看到我正在谈论的菜单：

![在此处输入图像描述](../Images/24e20df79c80e93cd88d8a29081f0b75.png)

我想要做的是以下内容：

**如何在此菜单中添加项目？****诸如设置**之类的东西。

**或者还有其他方法可以如何编辑此帐户的设置？**

**我不想通过启动应用程序然后进入设置来做到这一点，我想从这里开始。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:27:34.837

您需要了解 a 与 a`SyncAdapter`的组合的用法`Service`。

这是[一个很好的教程（基于 Google I/O）](http://naked-code.blogspot.co.il/2011/05/revenge-of-syncadapter-synchronizing.html)，可以帮助您入门和工作。显示的视频也很好地解释了同步适配器。

[这](http://www.c99.org/2010/01/23/writing-an-android-sync-provider-part-1/)是另一个很好的。

# android - 如何以编程方式创建 ColorStateList？

> ID：15543186
> 
> 赞同：205
> 
> 时间：2013-03-21T09:04:55.017
> 
> 标签：android, android-color

我正在尝试`ColorStateList`使用以下方式以编程方式创建一个：

```
ColorStateList stateList = new ColorStateList(states, colors); 
```

但我不确定这两个参数是什么。

根据文档：

> ```
> public ColorStateList (int[][] states, int[] colors) 
> ```
> 
> 在 API 级别 1 中添加
> 
> 创建一个 ColorStateList，它返回从状态到颜色的指定映射。

有人可以解释一下如何创建这个吗？

状态的二维数组是什么意思？

* * *

## 回答 #1

> 赞同：402
> 
> 时间：2013-07-22T12:52:01.627

有关可用状态的列表，请参阅[http://developer.android.com/reference/android/R.attr.html#state_above_anchor](http://developer.android.com/reference/android/R.attr.html#state_above_anchor)。

如果您想为禁用、未聚焦、未选中状态等设置颜色，只需否定这些状态：

```
int[][] states = new int[][] {
    new int[] { android.R.attr.state_enabled}, // enabled
    new int[] {-android.R.attr.state_enabled}, // disabled
    new int[] {-android.R.attr.state_checked}, // unchecked
    new int[] { android.R.attr.state_pressed}  // pressed
};

int[] colors = new int[] {
    Color.BLACK,
    Color.RED,
    Color.GREEN,
    Color.BLUE
};

ColorStateList myList = new ColorStateList(states, colors); 
```

* * *

## 回答 #2

> 赞同：115
> 
> 时间：2017-06-06T03:26:48.817

有时这就足够了：

```
int colorInt = getResources().getColor(R.color.ColorVerificaLunes);
ColorStateList csl = ColorStateList.valueOf(colorInt); 
```

* * *

## 回答 #3

> 赞同：88
> 
> 时间：2013-03-29T12:36:19.260

第一个维度是状态集数组，第二个维度是状态集本身。颜色数组列出了每个匹配状态集的颜色，因此颜色数组的长度必须匹配状态数组的第一个维度（否则当状态“使用”时它会崩溃）。这里和例子：

```
ColorStateList myColorStateList = new ColorStateList(
                        new int[][]{
                                new int[]{android.R.attr.state_pressed}, //1
                                new int[]{android.R.attr.state_focused}, //2
                                new int[]{android.R.attr.state_focused, android.R.attr.state_pressed} //3
                        },
                        new int[] {
                            Color.RED, //1
                            Color.GREEN, //2
                            Color.BLUE //3
                        }
                    ); 
```

希望这可以帮助。

编辑示例：一个 xml 颜色状态列表，如：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" android:color="@color/white"/>
    <item android:color="@color/black"/>
</selector> 
```

看起来像这样

```
ColorStateList myColorStateList = new ColorStateList(
        new int[][]{
                new int[]{android.R.attr.state_pressed},
                new int[]{}
        },
        new int[] {
                context.getResources().getColor(R.color.white),
                context.getResources().getColor(R.color.black)
        }
); 
```

* * *

## 回答 #4

> 赞同：33
> 
> 时间：2019-02-19T16:23:34.603

下面是一个如何`ColorList`在 Kotlin 中以编程方式创建的示例：

```
val colorList = ColorStateList(
        arrayOf(
                intArrayOf(-android.R.attr.state_enabled),  // Disabled
                intArrayOf(android.R.attr.state_enabled)    // Enabled
        ),
        intArrayOf(
                Color.BLACK,     // The color for the Disabled state
                Color.RED        // The color for the Enabled state
        )
) 
```

* * *

## 回答 #5

> 赞同：29
> 
> 时间：2015-06-07T01:14:16.517

不幸的是，没有一个解决方案对我有用。

1.  如果您一开始没有设置按下状态，它将不会检测到它。
2.  如果你设置它，那么你需要定义空状态来添加默认颜色

```
ColorStateList themeColorStateList = new ColorStateList(
        new int[][]{
                new int[]{android.R.attr.state_pressed},
                new int[]{android.R.attr.state_enabled},
                new int[]{android.R.attr.state_focused, android.R.attr.state_pressed},
                new int[]{-android.R.attr.state_enabled},
                new int[]{} // this should be empty to make default color as we want
        },
        new int[]{
                pressedFontColor,
                defaultFontColor,
                pressedFontColor,
                disabledFontColor,
                defaultFontColor
        }
); 
```

这是来自源代码的构造函数：

```
/**
 * Creates a ColorStateList that returns the specified mapping from
 * states to colors.
 */
public ColorStateList(int[][] states, int[] colors) {
    mStateSpecs = states;
    mColors = colors;

    if (states.length > 0) {
        mDefaultColor = colors[0];

        for (int i = 0; i < states.length; i++) {
            if (states[i].length == 0) {
                mDefaultColor = colors[i];
            }
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：23
> 
> 时间：2019-09-26T16:46:16.237

[引用Jonathan Ellis](https://stackoverflow.com/a/54770772/1916449)的回答，在 Kotlin 中，您可以定义一个辅助函数，以使代码更惯用且更易于阅读，因此您可以改为这样编写：

```
val colorList = colorStateListOf(
    intArrayOf(-android.R.attr.state_enabled) to Color.BLACK,
    intArrayOf(android.R.attr.state_enabled) to Color.RED,
) 
```

`colorStateListOf`可以这样实现：

```
fun colorStateListOf(vararg mapping: Pair<IntArray, Int>): ColorStateList {
    val (states, colors) = mapping.unzip()
    return ColorStateList(states.toTypedArray(), colors.toIntArray())
} 
```

我也有：

```
fun colorStateListOf(@ColorInt color: Int): ColorStateList {
    return ColorStateList.valueOf(color)
} 
```

这样我就可以调用相同的函数名，无论是选择器还是单色。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-01-15T06:45:15.913

我用于创建的构建器类`ColorStateList`

```
private class ColorStateListBuilder {
    List<Integer> colors = new ArrayList<>();
    List<int[]> states = new ArrayList<>();

    public ColorStateListBuilder addState(int[] state, int color) {
        states.add(state);
        colors.add(color);
        return this;
    }

    public ColorStateList build() {
        return new ColorStateList(convertToTwoDimensionalIntArray(states),
                convertToIntArray(colors));
    }

    private int[][] convertToTwoDimensionalIntArray(List<int[]> integers) {
        int[][] result = new int[integers.size()][1];
        Iterator<int[]> iterator = integers.iterator();
        for (int i = 0; iterator.hasNext(); i++) {
            result[i] = iterator.next();
        }
        return result;
    }

    private int[] convertToIntArray(List<Integer> integers) {
        int[] result = new int[integers.size()];
        Iterator<Integer> iterator = integers.iterator();
        for (int i = 0; iterator.hasNext(); i++) {
            result[i] = iterator.next();
        }
        return result;
    }
} 
```

**示例使用**

```
ColorStateListBuilder builder = new ColorStateListBuilder();
builder.addState(new int[] { android.R.attr.state_pressed }, ContextCompat.getColor(this, colorRes))
       .addState(new int[] { android.R.attr.state_selected }, Color.GREEN)
       .addState(..., some color);

if(// some condition){
      builder.addState(..., some color);
}
builder.addState(new int[] {}, colorNormal); // must add default state at last of all state

ColorStateList stateList = builder.build(); // ColorStateList created here

// textView.setTextColor(stateList); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-02-24T22:33:17.587

如果您使用资源 Colors.xml

```
int[] colors = new int[] {
                getResources().getColor(R.color.ColorVerificaLunes),
                getResources().getColor(R.color.ColorVerificaMartes),
                getResources().getColor(R.color.ColorVerificaMiercoles),
                getResources().getColor(R.color.ColorVerificaJueves),
                getResources().getColor(R.color.ColorVerificaViernes)

        };

ColorStateList csl = new ColorStateList(new int[][]{new int[0]}, new int[]{colors[0]}); 

    example.setBackgroundTintList(csl); 
```

# c# - 数据访问设计模式

> ID：15543187
> 
> 赞同：0
> 
> 时间：2013-03-21T09:04:55.740
> 
> 标签：c#, json, mvvm, windows-8, microsoft-metro

我目前正在构建一个 Windows 8 应用商店应用程序，该应用程序需要我进行多个 Web 服务调用。这些调用返回一个我正在反序列化为对象的 json 字符串。我将 MVVM 设计模式与 Caliburn.Micro 一起用于 WinRT。

最初，为了从对我的每个视图模型的 Web 服务调用中获取数据，我创建了一个类 DataStore，它声明了它自身的一个静态实例。该类具有与我的所有模型相对应的属性。当需要进行 Web 服务调用时，我在“APIData”中调用了一个静态类方法，该方法读取参数字典，将这些参数序列化为 JSON，进行 API 调用并将 JSON 结果返回给 DataStore 类。此时 JSON 被反序列化并用于更新 DataStore 属性。在我的每个 ViewModel 中，我引用了该 VM 的数据上下文所需的任何 DataStore 属性。

这导致重复的代码和非常混乱的 DataStore 类。

我的问题是，在必须使用从 web 服务调用返回的 json 来填充模型的情况下，什么是一个好的设计模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:32:16.660

您最初的尝试似乎违反了“[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)”，这导致了非常混乱的 DataStore 类。

我对视图模型数据操作的实现是保存“ViewModelPopulator”类的集合。每个服务填充的视图模型都包含对视图模型填充器的引用，该视图模型填充器的职责是水合视图模型属性。

为了促进代码重用，单个视图模型可能由不同的填充器填充（例如，一个 ' `CarCollectionViewModel`' 由一个 '`HondaCollectionViewModelPopulator` ' 或一个 ' `KiaCollectionViewModelPopulator`' 填充）因此引用实际上是一个`IViewModelPopulator<T>`其中 T 是要填充的视图模型.

这导致视图模型和数据访问层之间的松散耦合。在您的示例中，我会将 Json 反序列化（可能通过一些辅助方法）放在 viewmodelpopulator 类中。

此外，这允许您在设计时从 UI 层以声明方式将填充器注入到视图模型中（如下例所示），或者在运行时在代码隐藏中分配它们。

```
<Page.DataContext>
    <VM:SearchPageViewModel>
        <VM:SearchPageViewModel.ViewModelPopulator>
            <VMP:SearchPageViewModelPopulator />
        </VM:SearchPageViewModel.ViewModelPopulator>
    </VM:SearchPageViewModel>
</Page.DataContext> 
```

# c++ - Visual Studio 6.0 和 VS 2010 编译器之间的主要区别

> ID：15543190
> 
> 赞同：2
> 
> 时间：2013-03-21T09:05:04.847
> 
> 标签：c++, visual-studio-2010, compiler-construction

几个月前，我发布了以下问题 [VS 6.0 中的模板问题](https://stackoverflow.com/questions/14435910/using-template-functions-in-visual-studio-c-6-0)

随后的讨论和您的评论帮助我意识到，让我动手使用一个新的编译器是强制性的——或者基本上它们是让我行动起来的最后火花。经过一个月的公司内部“游说”，我终于得到了 VS 2012 ！（感谢你们）

我必须使用的几个旧工具是用 VS 6.0 开发的。
我担心其中一些工具可能不适用于新的编译器。这就是为什么我想知道这里是否有人可以指出 VS 6 和 VS 2012 之间的主要区别 - 或者至少是 VS 6 和 VS 2010 之间的区别 - 从 2010 年到 2012 年的变化是在线很好的文档。

显然 VS 6.0 和 VS 12 之间的差异一定是巨大的......我主要关心的是基本的东西，比如演员表等。网络上几乎没有任何关于 VS 6.0 的信息 - 我有点不知所措:(

我想我将不得不创建具有相同类的新项目。在第二步中，我将使用旧工具覆盖 .h 和 .cpp 文件。因此，至少我将能够通过新编译器打开文件。仍然可能不支持某些强制转换或类定义，我想大致了解调试时要查找的内容:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T09:44:35.710

自 VS 6.0 出现以来，该语言已经发生了显着变化。VS6.0 是 C++98 之前的版本；VS 2012 是 C++03，具有 C++11 的一些特性。

大多数较新的语言功能都向上兼容；旧代码应该仍然可以工作。尽管如此，VC 6.0 还是准标准，当没有以前的标准时，委员会不太担心破坏现有代码（并且实现确实有所不同）。语言的几个方面（至少）可能会导致问题。

首先是 VC 6.0 仍然使用旧的作用域来定义在`for`. 因此，在 VC 6.0 中，以下内容是合法的：

```
int findIndex( int* array, int size, int target )
{
    for ( int i = 0; i < size && array[i] != target ; ++ i ) {
    }
    return i;
} 
```

这不会在 VC 2012 中编译（除非还有一个全局变量`i`，在这种情况下，它将返回*那个*，而不是本地变量）。

IIRC，VC 6.0 在执行访问控制和 const 方面也不是很严格。但是，在迁移时这可能不是问题，因为 VC 2012 在某些更明显的情况下仍然无法符合 C++98，至少在默认选项下是这样。（例如，您仍然可以将临时对象绑定到非常量引用。）

另一个不向后兼容的主要语言更改是模板中的名称查找。然而，即使在 VC 2012 中，微软也实现了 pre-standanrd 名称查找（我的意思是 pre-C++98）。如果您想将代码移植到其他编译器，这是一个严重的问题，但它确实使从 VC 6.0 迁移到 VC 2012 变得容易得多。

关于库，我不记得 6.0 是否支持 C++98 库，或者它是否仍然是预标准（或者可能同时支持两者）。如果你的代码中有类似`#include <iostream.h>`的东西，请准备好这里的一些差异：minor for direct forward use of `<<`and `>>`; 主要如果你实现一些复杂`streambuf`的 . 当然，所有的库都从全局命名空间移到了 `std::`.

其余的：您的代码显然不会使用 VC 6.0 出现后引入的任何功能。这不会导致迁移问题（因为仍然支持较旧的功能），但是您无疑会想要返回，并在迁移后逐步升级代码。（你提到了强制转换。这是一个很好的例子：C 风格的强制转换仍然是合法的，具有它们一直以来的相同语义，但是在新代码中，你会想要避免它们，至少在涉及指针或引用时。 )

# javascript - Google 电子表格排名值

> ID：15543192
> 
> 赞同：3
> 
> 时间：2013-03-21T09:05:07.317
> 
> 标签：javascript, google-apps-script, google-sheets

我目前正在使用 Google 电子表格设置决策矩阵，并且我想为结果实现排名功能。如果只有 4 个选项，我不会这样做，但就我而言，有 32 个选项可用...

我尝试使用 google script api 执行此操作，但结果有点令人失望：

```
function Ranking() {
var sheet = SpreadsheetApp.getActiveSpreadsheet();  
var alldata = sheet.getDataRange().getValues();
var data = [];
var j = 8;
for (var i = 0; i <= 31; i++) {
data [i] = alldata[18][j];
j= j+2;
}
var sorted = data.slice().sort(function(a,b){return b-a});
var ranks = data.slice().map(function(v){return sorted.indexOf(v)+1});
sheet.getRange("I20").setValue(ranks[0]);
sheet.getRange("K20").setValue(ranks[1]);
sheet.getRange("M20").setValue(ranks[2]);
sheet.getRange("O20").setValue(ranks[3]);
sheet.getRange("Q20").setValue(ranks[4]);
sheet.getRange("S20").setValue(ranks[5]);
sheet.getRange("U20").setValue(ranks[6]);
sheet.getRange("W20").setValue(ranks[7]);
sheet.getRange("Y20").setValue(ranks[8]);
sheet.getRange("AA20").setValue(ranks[9]);
sheet.getRange("AC20").setValue(ranks[10]);
sheet.getRange("AE20").setValue(ranks[11]);
sheet.getRange("AG20").setValue(ranks[12]);
sheet.getRange("AI20").setValue(ranks[13]);
sheet.getRange("AK20").setValue(ranks[14]);
sheet.getRange("AM20").setValue(ranks[15]);
sheet.getRange("AO20").setValue(ranks[16]);
sheet.getRange("AQ20").setValue(ranks[17]);
sheet.getRange("AS20").setValue(ranks[18]);
sheet.getRange("AU20").setValue(ranks[19]);
sheet.getRange("AW20").setValue(ranks[20]);
sheet.getRange("AY20").setValue(ranks[21]);
sheet.getRange("BA20").setValue(ranks[22]);
sheet.getRange("BC20").setValue(ranks[23]);
sheet.getRange("BE20").setValue(ranks[24]);
sheet.getRange("BG20").setValue(ranks[25]);
sheet.getRange("BI20").setValue(ranks[26]);
sheet.getRange("BK20").setValue(ranks[27]);
sheet.getRange("BM20").setValue(ranks[28]);
sheet.getRange("BO20").setValue(ranks[29]);
sheet.getRange("BQ20").setValue(ranks[30]);
sheet.getRange("BR20").setValue(ranks[31]);
} 
```

如您所见，代码确实很草率。那可能是因为我以前从未做过 javascript，而且我的编码知识通常非常基础。

有没有办法直接在电子表格中实现这样的功能，而不需要脚本 api？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:45:14.240

```
for(i=0;i<numRanks;i++)
    sheet.getRange(20, i*2+9).setValue(ranks[i]); 
```

基本上，您只需每隔一列在第 20 行上迭代一个 for 循环。

函数文档[在这里](https://developers.google.com/apps-script/reference/spreadsheet/sheet#getRange%28Integer,Integer%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T14:38:45.587

Jason 的回答是明确而简短的 - 但由于对电子表格服务的调用次数过多，因此效率不高。

有关此问题的背景信息，请参阅[Google Apps 脚本最佳做法](https://developers.google.com/apps-script/best_practices)。您可能还想查看[什么更快：ScriptDb 或 SpreadsheetApp？](https://stackoverflow.com/questions/15145918/what-is-faster-scriptdb-or-spreadsheetapp).

你已经有一个`ranks`;的数组 如果您将其转换为具有行中值的二维数组，那么您可以在一次`setValues()`操作中将其全部写出来。

```
sheet.getRange("I20:BR20").setValues(transpose([ranks])); 
```

这是一个转置函数，来自[Google 电子表格脚本 - 如何转置/旋转多维数组？](https://stackoverflow.com/questions/16621470/google-spreadsheet-script-how-to-transpose-rotate-multi-dimensional-array).

```
function transpose(a)
{
  return Object.keys(a[0]).map(function (c) { return a.map(function (r) { return r[c]; }); });
} 
```

仍在发生迭代，但它现在在转置函数中，而不是在`setValue()`调用周围，所以它会运行得更快。

# c - 检索用户空间 Linux C 代码中 USB 串行写入传输的缓冲区/数据包/有效负载大小

> ID：15543193
> 
> 赞同：16
> 
> 时间：2013-03-21T09:05:07.910
> 
> 标签：c, linux, buffer, packet, usbserial

提前道歉我将无法立即在这里接受答案 - 只是想我想记下来，而我有问题......

简而言之：当我在 Linux 下使用用户空间 C 代码启动对 USB 串行端口的写入时，我可以观察到三种不同的缓冲区大小 - 问题是，我想从用户空间 C 中检索所有这些大小代码本身。

* * *

假设，我有一个带有 FTDI FT232 芯片的 Arduino Duemillanove - 被编程为从 PC 的 USB/串行连接读取传入字节，然后丢弃它们。当我在系统中插入此设备时（在 Ubunty 11.04 Natty 上执行此操作），我可以通过以下方式观察到以下内容`tail -f /var/log/syslog`：

```
Mar 21 08:05:05 mypc kernel: [  679.197982] usbserial: USB Serial Driver core
Mar 21 08:05:05 mypc kernel: [  679.223954] USB Serial support registered for FTDI USB Serial Device
Mar 21 08:05:05 mypc kernel: [  679.227354] ftdi_sio 2-2:1.0: FTDI USB Serial Device converter detected
Mar 21 08:05:05 mypc kernel: [  679.227633] usb 2-2: Detected FT232RL
Mar 21 08:05:05 mypc kernel: [  679.227644] usb 2-2: Number of endpoints 2
Mar 21 08:05:05 mypc kernel: [  679.227652] usb 2-2: Endpoint 1 MaxPacketSize 64
Mar 21 08:05:05 mypc kernel: [  679.227660] usb 2-2: Endpoint 2 MaxPacketSize 64
Mar 21 08:05:05 mypc kernel: [  679.227667] usb 2-2: Setting MaxPacketSize 64
... 
```

这首先告诉我驱动程序（内核模块）`usbserial`并`ftdi_sio`已被挂钩/加载以处理设备；这些创建了一个名为的文件（设备节点）`/dev/ttyUSB0`- 从操作系统的角度来看，本质上是一个串行端口。它还告诉我有`MaxPacketSize`64 个字节归因于设备的端点。我也可以通过以下方式查询获得 MaxPacketSize `lsusb`：

```
$ lsusb | grep FT
Bus 002 Device 002: ID 0403:6001 Future Technology Devices International, Ltd FT232 USB-Serial (UART) IC
$ lsusb -t | grep -B1 ft
/:  Bus 02.Port 1: Dev 1, Class=root_hub, Driver=uhci_hcd/2p, 12M
    |__ Port 2: Dev 2, If 0, Class=vend., Driver=ftdi_sio, 12M
$ sudo lsusb -v -d 0403:6001 | grep 'bEndpointAddress\|wMaxPacketSize\|idVendor\|idProduct'
  idVendor           0x0403 Future Technology Devices International, Ltd
  idProduct          0x6001 FT232 USB-Serial (UART) IC
        bEndpointAddress     0x81  EP 1 IN
        wMaxPacketSize     0x0040  1x 64 bytes
        bEndpointAddress     0x02  EP 2 OUT
        wMaxPacketSize     0x0040  1x 64 bytes 
```

现在，假设我想`/dev/ttyUSB0`使用以下 C 程序写入设备节点**`testusw.c`**：

```
#include <stdio.h>   /* Standard input/output definitions */
#include <string.h>  /* String function definitions */
#include <unistd.h>  /* UNIX standard function definitions */
#include <fcntl.h>   /* File control definitions */
#include <errno.h>   /* Error number definitions */
#include <termios.h> /* POSIX terminal control definitions */

// testusw.c
// build with: gcc -o testusw -Wall -g testusw.c

int main( int argc, char **argv ) {

  char *serportdevfile;
  int serport_fd;
  char writeData[20000*5]; //100000 bytes data
  unsigned char snippet[] = {0xAA, 0xBB, 0xCC, 0xDD, 0xFE};
  int i;
  int bytesWritten;

  if( argc != 2 ) {
    fprintf(stdout, "Usage:\n");
    fprintf(stdout, "%s port baudrate file/string\n", argv[0]);
    return 1;
  }

  //populate write data
  for (i=0; i<20000; i++) {
    memcpy(&writeData[5*i], &snippet[0], 5);
  }
  // for strlen, fix (after) last byte to 0
  writeData[20000*5] = 0x00;

  // show writeData - truncate to 10 bytes (.10):
  fprintf(stdout, "//%.10s//\n", writeData);

  serportdevfile = argv[1];
  serport_fd = open( serportdevfile, O_RDWR | O_NOCTTY | O_NONBLOCK );
  if ( serport_fd < 0 ) { perror(serportdevfile); return 1; }

  // do a write:
  fprintf(stdout, "Writing %d bytes\n", strlen(writeData));
  bytesWritten = write( serport_fd, writeData, strlen(writeData) );
  fprintf(stdout, " bytes written: %d \n", bytesWritten);

  return 0;
} 
```

该程序故意在一次调用中写入大量数据。要查看发生了什么，首先让我们通过 Linux 的`usbmon`工具捕获 USB URB 请求 - 所以在一个终端中，我们运行：

```
$ sudo cat /sys/kernel/debug/usb/usbmon/2u > testusw.2u.mon 
```

...在另一个终端中，编译并运行 testusw 后，我们得到：

```
$ gcc -o testusw -Wall -g testusw.c
$ ./testusw /dev/ttyUSB0
//ª»ÌÝþª»ÌÝþ//
Writing 100000 bytes
 bytes written: 4608
$ 
```

（请注意，`testusw`上面的调用可能会重置 Arduino）。之后`testusw`，我们可以回到第一个终端，并用+中断`cat`进程；我们留下了一个日志文件，. [我们可以使用Virtual USB Analyzer](http://vusb-analyzer.sourceforge.net/tutorial.html)打开此日志文件：`CTRL``C``testusw.2u.mon`

```
$ ./vusb-analyzer testusw.2u.mon 
```

...并获得以下可视化：

[![vusb-analyzer.png](../Images/f4fb9f954bd63affa2a402ddcece2474.png)](https://i.stack.imgur.com/qDFsR.png)

请注意，执行写入的“EP2 OUT”显示了 2*9 = 18 个 URB 请求，每个请求携带 0x0100 = 256 个字节；所以总共写入了 18*256 = 4608 个字节 - 正如上面的“写入的字节数”所报告的那样`testusw`。此外，忽略 EP1 IN 上的数据（这是我的 Arduino 代码发送的一些垃圾 - 以“状态：-2”错误结束）。

* * *

因此，我可以观察到以下内容：

*   从 C 程序中，我发起 100000 字节的写入
*   结果，只**`4608`**写入字节 - 有效地充当第一个缓冲区大小
*   `usbmon`然后报告这个块被排序成 18**`256`**个字节的 URB 请求
*   最后，MaxPacketSize 告诉我每个 URB 请求（可能）被排序为（四个）**`64`**USB 线上的字节包

实际上，我有三个缓冲区大小：`4608`和`256`字节`64`；类似于[Serial HOWTO: Serial Port Basics: 4.7 Data Flow Path 中提到的内容；缓冲器](http://www.tldp.org/HOWTO/Serial-HOWTO-4.html#ss4.7)：

```
application     8k-byte         16-byte        1k-byte        tele-
BROWSER ------- MEMORY -------- FIFO --------- MODEM -------- phone
program         buffer          buffer         buffer         line 
```

所以，我的问题是：如何从用户空间 C 代码本身检索这些缓冲区大小 - 但是，只能从设备节点路径`/dev/ttyUSB0`作为唯一的输入参数？

我可以通过系统`popen`命令运行外部程序并解析输出。例如，我可以通过`lsusb -v -d 0403:6001 | grep MaxPacketSize`- 获得 MaxPacketSize ，但这需要供应商/产品 ID，如果只有一条信息是设备节点路径，我不知道如何获得它`/dev/ttyUSB0`。

鉴于它`/dev/ttyUSB0`本质上被视为串行端口，我认为通过查询`stty`会提供一些东西 - 但是，我看不到任何与缓冲区大小相关的内容：

```
$ stty -a -F /dev/ttyUSB0
speed 115200 baud; rows 0; columns 0; line = 0;
intr = ^C; quit = ^\; erase = ^?; kill = ^U; eof = ^A; eol = <undef>;
eol2 = <undef>; swtch = <undef>; start = ^Q; stop = ^S; susp = ^Z; rprnt = ^R;
werase = ^W; lnext = ^V; flush = ^O; min = 1; time = 0;
-parenb -parodd cs8 hupcl -cstopb cread -clocal -crtscts
-ignbrk -brkint -ignpar -parmrk -inpck -istrip -inlcr -igncr -icrnl -ixon -ixoff
-iuclc -ixany -imaxbel -iutf8
-opost -olcuc -ocrnl -onlcr -onocr -onlret -ofill -ofdel nl0 cr0 tab0 bs0 vt0 ff0
-isig -icanon -iexten -echo -echoe -echok -echonl -noflsh -xcase -tostop -echoprt
-echoctl -echoke 
```

我也知道我可以`udevadm`用来查询与设备节点路径相关的数据`/dev/ttyUSB0`：

```
$ udevadm info --query=all --name=/dev/ttyUSB0
P: /devices/pci0000:00/0000:00:1d.0/usb2/2-2/2-2:1.0/ttyUSB0/tty/ttyUSB0
N: ttyUSB0
S: serial/by-path/pci-0000:00:1d.0-usb-0:2:1.0-port0
S: serial/by-id/usb-FTDI_FT232R_USB_UART_A9007OH3-if00-port0
E: UDEV_LOG=3
E: DEVPATH=/devices/pci0000:00/0000:00:1d.0/usb2/2-2/2-2:1.0/ttyUSB0/tty/ttyUSB0
E: MAJOR=188
E: MINOR=0
E: DEVNAME=/dev/ttyUSB0
E: SUBSYSTEM=tty
E: ID_PORT=0
E: ID_PATH=pci-0000:00:1d.0-usb-0:2:1.0
E: ID_VENDOR=FTDI
E: ID_VENDOR_ENC=FTDI
E: ID_VENDOR_ID=0403
E: ID_MODEL=FT232R_USB_UART
E: ID_MODEL_ENC=FT232R\x20USB\x20UART
E: ID_MODEL_ID=6001
E: ID_REVISION=0600
E: ID_SERIAL=FTDI_FT232R_USB_UART_A9007OH3
E: ID_SERIAL_SHORT=A9007OH3
E: ID_TYPE=generic
E: ID_BUS=usb
E: ID_USB_INTERFACES=:ffffff:
E: ID_USB_INTERFACE_NUM=00
E: ID_USB_DRIVER=ftdi_sio
E: ID_IFACE=00
E: ID_VENDOR_FROM_DATABASE=Future Technology Devices International, Ltd
E: ID_MODEL_FROM_DATABASE=FT232 USB-Serial (UART) IC
E: ID_MM_CANDIDATE=1
E: DEVLINKS=/dev/serial/by-path/pci-0000:00:1d.0-usb-0:2:1.0-port0 /dev/serial/by-id/usb-FTDI_FT232R_USB_UART_A9007OH3-if00-port0

# the below has huge output, so pipe it to `less`
$ udevadm info --attribute-walk --name=/dev/ttyUSB0 | less 
```

...但同样，我看不到与遇到的缓冲区大小相关的太多内容。

总结一下，再次提出问题：我能否从用户空间 C 应用程序检索遇到的与 USB 串行写入传输相关的缓冲区大小？如果是这样 - 如何？

非常感谢您的任何答案，
干杯！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T20:49:02.760

不明白你为什么想知道这个。Linux 允许您使用`TIOCGSERIAL`ioctl 检索`struct serial_struct`具有字段的`xmit_fifo_size`字段。虽然如果许多 USB 串行驱动程序费心在那里写一些有意义的东西，我会感到惊讶。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-21T23:05:17.320

我一直在努力解决与您提出的问题类似的问题。我没有给你的答案，但有一点你可能会觉得有用的信息。

在 Mac OS X 上，您可以使用 ioctl 找出缓冲区中当前有多少字符。下面的代码会给你图

```
uint ioctlBytestInBuffer;
int returnCode = ioctl(fileDescriptor, TIOCOUTQ, &ioctlBytestInBuffer); 
```

我一直在使用它来尝试查找大型文件传输何时通过串行线路完成（微型使用软件流控制，因此很难预测传输速率）。

这种方法效果很好，但并不完美。我不确定 ioctl 调用能够访问哪个缓冲区。当 ioctl 函数调用在缓冲区中返回 0 字节的值时，文件传输仍会继续多几秒钟。我电缆中的 USB 芯片声称只有一个 128 字节的传输缓冲区，以我的波特率应该在 0.3 秒内清空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-07T21:16:55.100

这是一个旧标题，但对于那些想知道的人来说： [here related pdf](https://www.ftdichip.com/Support/Documents/DataSheets/ICs/DS_FT232R.pdf) (About of 0453:6001 ic's)

```
On page (end of)13 and (start) 14 :
TX Size : 256 Bytes
RX Size : 128 Bytes 
```

有美好（+健康）的一天！

# android - 标准图片库应用

> ID：15543194
> 
> 赞同：0
> 
> 时间：2013-03-21T09:05:12.537
> 
> 标签：android, memory, optimization, bitmap, gallery

我正在尝试编写可以在照片之间滑动的简单应用程序（例如每个设备上的标准图库应用程序）。标准版展示了令人印象深刻的性能——它会立即显示下一张照片，而只占用大约 15 MB 的内存。似乎它将下一张和上一张图像保留在内存中，因此不会因从 sd 卡加载它们而产生延迟。我认为，如果应用程序在内存中至少保留 3`Bitmap`个这样大小的对象，则将占用超过 15 MB 的空间。那么它是如何工作的呢？不使用`Bitmap`还是什么？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:47:37.350

请记住，屏幕上的位图可能不是原始文件的大小。

以 720p 的屏幕为例，4096*3072 的图片将被解码并重新调整为屏幕尺寸。

甚至APP也可能使用ARGB8888格式来显示位图，内存大小为1280*720*4 = 3686400字节，也就是3.5M左右。

如果我们使用 RGB565 格式，那么尺寸会小一半。

更重要的是，并非所有图片都是“全屏”。

# c# - 进程 ID 没有出现在 log4net 日志文件名中

> ID：15543197
> 
> 赞同：5
> 
> 时间：2013-03-21T09:05:21.327
> 
> 标签：c#, log4net

我试图在我的日志文件名中包含进程 ID 信息，以便每次重新启动应用程序时都会创建一个新的日志文件。我正在从两个项目登录到同一个文件中。这是我的配置。

```
<configuration>
    <configSections>
        <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />
    </configSections>

    <log4net>
        <appender name="NewLogForEveryRun" type="log4net.Appender.RollingFileAppender">
            <file value="c:\\testLogs\\TwoProjects-[%processid].txt" />
            <layout type="log4net.Layout.PatternLayout">
                <conversionPattern value="%d [%t] %-5p %c - %m%n" />
            </layout>
        </appender>

        <logger name="ClassLibrary1">
            <level value="ERROR" />
            <maximumFileSize value="256KB" />
            <param name="Threshold" value="ERROR"/>
            <appender-ref ref="NewLogForEveryRun" />
        </logger>

        <logger name="ClassLibrary2">
            <level value="ERROR" />
            <maximumFileSize value="256KB" />
            <param name="Threshold" value="ERROR"/>
            <appender-ref ref="NewLogForEveryRun" />
        </logger>
    </log4net>
</configuration> 
```

我提到`%processid`要在日志文件名中获取进程 ID 信息，但是当应用程序运行时，它会将日志文件名创建为`TwoProjects-[%processid].txt`. 文件名中未显示实际的进程 ID。这可能是什么原因？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-21T09:56:23.640

默认情况下，您的文件值不会被解析或处理，除非您指定说它包含模式。

解决办法是换行

```
<file value="c:\\testLogs\\TwoProjects-[%processid].txt" /> 
```

至

```
<file type="log4net.Util.PatternString" value="c:\\testLogs\\TwoProjects-[%processid].txt" /> 
```

# java - 构建war文件时，如何告诉IntelliJ为maven使用文件夹“web”而不是“webapp”？

> ID：15543198
> 
> 赞同：1
> 
> 时间：2013-03-21T09:05:25.360
> 
> 标签：java, jakarta-ee, maven, intellij-idea

我要做的是：

1.  使用带有 Maven 模块的 IntelliJ 创建一个新项目。
2.  向该项目添加框架支持并选择：JSF。
3.  转到 pom.xml 并添加：**包装：战争**。
4.  然后从 IntelliJ 的 Maven 窗口中单击：全新安装。

构建失败，因为 maven 正在寻找一个**webapp**目录而不是一个名为**web**的目录。用于构建项目。

因此，如果我将文件夹**web**重命名为**webapp** build 就可以了。

但是，我想了解更多关于 IntelliJ 和 maven 的信息，所以我想强制 maven 使用文件夹**web**。我怎样才能正确地做到这一点

*   使用命令行？我的意思是根本不涉及 IntelliJ？
*   使用 Intellij？

问候。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T09:13:34.317

您可以在项目的 pom.xml 文件中配置它。

```
<plugins>
  <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-war-plugin</artifactId>
    <configuration>
      <warSourceDirectory>web</warSourceDirectory>
    </configuration>
  </plugin>
</plugins> 
```

[你可以在这里](http://maven.apache.org/plugins/maven-war-plugin/war-mojo.html)找到文档

如果 IntelliJ 的行为符合预期，它应该选择这个新配置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T09:13:58.060

看看[这篇文章](http://blog.miloszikic.com/2010/04/maven-war-plugin-and-non-default-webapp.html)，它解释了如何更改默认`webapp`目录：

```
<build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-war-plugin</artifactId>
        <version>2.3</version>
        <configuration>
          <warSourceDirectory>web</warSourceDirectory>
        </configuration>
      </plugin>
    </plugins>
</build> 
```

# android - 在 NativeActivity 上获取 Android 的 CPU 温度

> ID：15543202
> 
> 赞同：1
> 
> 时间：2013-03-21T09:05:34.857
> 
> 标签：android

如何获取 NativeActivity 的 CPU 温度？我认为，我应该使用 jclass 和 FindClass 方法或类似的方法。我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:08:57.283

您可以将 TYPE_AMBIENT_TEMPERATURE 用于电池或 CPU 温度。TYPE_TEMPERATURE 是已弃用的常量。

```
public class TempSensorActivity extends Activity, implements SensorEventListener {
private final SensorManager mSensorManager;
private final Sensor mTempSensor;

public TempSensorActivity() {
 mSensorManager = (SensorManager)getSystemService(SENSOR_SERVICE);
 mTempSensor = mSensorManager.getDefaultSensor(Sensor.TYPE_AMBIENT_TEMPERATURE);
}

protected void onResume() {
 super.onResume();
 mSensorManager.registerListener(this, mTempSensor, SensorManager.SENSOR_DELAY_NORMAL);
}

protected void onPause() {
 super.onPause();
 mSensorManager.unregisterListener(this);
}

public void onAccuracyChanged(Sensor sensor, int accuracy) {
}

public void onSensorChanged(SensorEvent event) {
} 
```

点击[这里](http://developer.android.com/reference/android/hardware/Sensor.html)参考

# mysql - 如何替换MYSQL中最后一次出现的子字符串？

> ID：15543204
> 
> 赞同：7
> 
> 时间：2013-03-21T09:05:36.740
> 
> 标签：mysql, database

如何在 MYSQL 中用空白字符串替换最后出现的子字符串？我在 MYSQL 中找不到任何这样的直接函数

**字符串：** “American Corp National Corp”

**搜索字符串：** “公司”

**预期输出：** “American Corp National”

有人可以建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-04-02T07:29:07.327

这更短，更易读：

```
SELECT TRIM(TRAILING 'Corp' FROM 'American Corp National Corp') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T09:25:05.147

尝试：

```
select reverse(concat(
               left(reverse('American Corp National Corp'),
                    instr(reverse('American Corp National Corp'),reverse('Corp'))-1),
               substr(reverse('American Corp National Corp'),
                      instr(reverse('American Corp National Corp'),reverse('Corp'))+
                      length('Corp')))) result 
```

( [SQLFiddle](http://sqlfiddle.com/#!2/014de/24) )

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-28T11:21:51.407

在自己研究了这个问题并阅读了上面的答案之后，我创建了以下函数来解决这个问题。就我而言，我需要更改序列中的最后一个分隔符，例如，“Aap, Noot, Mies”将变为“Aap, Noot & Mies”：

```
CREATE DEFINER=`root`@`localhost` FUNCTION `change_last_substring`(
    input_string text,  
    separator_old tinytext, 
    separator_new tinytext
) RETURNS text CHARSET utf8
BEGIN

set @output_string=
trim(
    leading separator_new from
    concat
    (
        left(input_string,length(input_string)-length(substring_index(input_string,separator_old,-1))-2),
        separator_new,
        substring_index(input_string,separator_old,-1)
    )
);

RETURN @output_string;

END 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-06-27T08:07:17.327

这是一个 SQL 查询：

```
select CONCAT(SUBSTRING_INDEX('<TEST_STRING>','<String that you want to replace>',(length('<TEST_STRING>') - length(replace('<TEST_STRING>', '<String that you want to replace>', '')))),'<String to be replaced>',SUBSTRING_INDEX('<TEST_STRING>', '<String that you want to replace>', -1)) as test 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T09:10:36.350

这感觉像是一种糟糕的方法，但是......`reverse`字符串，`reverse`使用 搜索搜索字符串的第一次出现`locate`，然后计算非反转字符串中的索引？

[http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_reverse](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_reverse)

[http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_locate](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_locate)

[http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_char-length](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_char-length)（很确定您需要使用它而不是长度以符合 unicode，但请检查以确保！）

工作示例：

字符串：0123456789（char_length = 10）

搜索字符串：567 (char_length = 3)

反串：9876543210

反向搜索字符串：765

定位返回索引 = 2

实际字符串中的结束索引 = 7 (char_length(string) - 1 - index -> 10 - 1 - 2)

实际字符串中的开始索引 = 5 (char_length(string) - 1 - (char_length(search string) - 1) - index -> 10 - 1 - (3 - 1) - 2)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-23T06:20:45.887

接受的[答案](https://stackoverflow.com/a/15543587)不会替换`@FROM`为`@TO`，而是替换`@FROM`为空字符串。如果您需要替换`@FROM`为`@TO`，这是对该答案的修改：

```
SELECT reverse(
           concat(
               concat(
                   left(reverse(value),
                        instr(reverse(value), reverse(@FROM)) - 1),
                   @TO
                 ),
               substr(reverse(value),
                      instr(reverse(value), reverse(@FROM)) +
                      length(@FROM))))
FROM `table`
WHERE `value` like '%' + @FROM + '%' 
```

注意`WHERE`附加值`like '%' + @FROM + '%'`，因为如果子字符串没有出现在值中，这会删除一个额外的字符，例如在“ccc”中尝试用“b”替换“a”会导致“cc”

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-25T09:20:27.527

更简单可靠

```
CONCAT(SUBSTRING_INDEX('American Corp National Corp','Corp',2), "REPLACE_STRING" ,SUBSTRING_INDEX('American Corp National Corp','Corp',-1)) 
```

> REPLACE_STRING 你可以用替换字符串来改变它，也可以用空来替换。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-06T20:59:51.567

如果您有最新版本的[MySQL (>= v8)](https://dev.mysql.com/doc/refman/8.0/en/regexp.html#function_regexp-replace) / [MariaDB (>= v10.0.5)](https://mariadb.com/kb/en/regexp_replace/)，您可以使用`REGEXP_REPLACE`替换最后一次出现的`needle`with `replacement`，如下所示：

```
REGEXP_REPLACE(haystack, "^.*needle", "\\1replacement") 
```

这利用了`*`.

如果您使用的是 MySQL，并且知道（或可以计算）出现次数，则可以使用[可选`occurence`参数](https://dev.mysql.com/doc/refman/8.0/en/regexp.html#function_regexp-replace).`REGEXP_REPLACE`

# linux - ARM 如何在 IRQ 处理程序中切换到 svc 模式？

> ID：15543205
> 
> 赞同：3
> 
> 时间：2013-03-21T09:05:48.780
> 
> 标签：linux, linux-kernel, kernel, arm, interrupt

以下代码片段取自 linux v2.6.11。v3.8 中也有类似的东西。

```
mrs     r13, cpsr
bic     r13, r13, #MODE_MASK
orr     r13, r13, #MODE_SVC
msr     spsr_cxsf, r13                  @ switch to SVC_32 mode

and     lr, lr, #15
ldr     lr, [pc, lr, lsl #2]
movs    pc, lr                          @ Changes mode and branches 
```

查看以下链接以获取实际文件： http: [//lxr.linux.no/linux+v2.6.11/arch/arm/kernel/entry-armv.S](http://lxr.linux.no/linux+v2.6.11/arch/arm/kernel/entry-armv.S)

我认为写入 CPSR 的模式位可以改变当前的 ARM 模式。但是写入 SPSR（而不是 CPSR）是如何导致切换到 SVC_32 模式的呢？

（或）最后一条指令“movs pc, lr”中是否发生了某些事情。有人可以帮我理解这一点吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T10:03:54.673

带有“S”后缀和程序计数器作为其目标寄存器的指令`mov`或指令意味着异常返回。`sub`

它将 SPSR 的内容复制到 CPSR 并将源寄存器的值移动到程序计数器（在本例中为链接寄存器）。

在您的示例中，这有效地将模式设置为 SVC 模式并一次性从函数返回。

[ARM 参考手册](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0489c/Cjaiacfg.html)中有更多相关信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T21:25:07.597

我在这里回答`SPSR`Vs`CPSR`问题。

`CPSR`是`user/system`模式寄存器，在其他模式下不存在，比如`fiq`or`irq`模式。而，`SPSR`存在于`fiq`和`irq`模式中。在模式更改`CPSR`被复制到`SPSR`并且更改的模式必须用于`SPSR`对处理器的当前状态进行任何更改。`SPSR`在用户模式下不可用。并且在非用户模式下所做的任何更改`CPSR`都不会生效。

```
CPSR - Current Program Status Register
SPSR - Saved Program Status Register 
```

# mysql - 员工详细信息未正确显示

> ID：15543206
> 
> 赞同：1
> 
> 时间：2013-03-21T09:05:50.787
> 
> 标签：mysql, sql, select, join

您好，这是数据库结构。

```
employee (employee-name, street, city)
works (employee-name, company-name, salary)
company (company-name, city)
manages (employee-name, manager-name) 
```

我需要获取以下详细信息，但根据我的培训师的说法，任何人都可以告诉我以下查询有什么问题吗？

查找在 First Bank Corporation 工作且收入超过 10,000 美元的所有员工的姓名、街道地址和居住城市。

```
SELECT e.employee-name, e.city
FROM employee e
INNER JOIN works w
ON e.employee-name = w.employee-name
AND w.company-name = “First Bank Corporation”
GROUP BY e.employee-name
HAVING w.salary > 10000 
```

在数据库中查找与他们工作的公司居住在同一城市的所有员工。

```
SELECT e.employee-name
FROM employee e
INNER JOIN works w
ON e.employee-name = w.emploee-name
INNER JOIN company c
ON w.company-name = c.company-name
GROUP BY e.employee-name
HAVING e.city = c.city 
```

在数据库中查找与其经理居住在同一城市和同一街道上的所有员工。

```
SELECT employee-name, street, city
FROM employee
INTERSECT
SELECT e.employee-name, e.street, e.city
FROM employee e, manages m
WHERE e.employee-name = m.manager-name 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:12:12.133

为避免语句出现语法错误，请将包含非文字字符（*如减号、空格...*）的列名用反引号括起来。

第一次查询，

```
SELECT  e.`employee-name`, e.city
FROM    employee e
        INNER JOIN works w
            ON e.employee-name = w.employee-name
WHERE   w.`company-name` = 'First Bank Corporation' AND
        w.salary > 10000 
```

第二，

```
SELECT  e.`employee-name`
FROM    employee e
        INNER JOIN works w
            ON e.`employee-name` = w.`employee-name`
        INNER JOIN company c
            ON w.`company-name` = c.`company-name`
WHERE   e.city = c.city 
```

第三，

```
SELECT  emp.*
FROM    Manages a
        INNER JOIN employee man
            ON a.`manager-name` = man.`employee-name`
        INNER JOIN employee emp
            ON a.`employee-name` = emp.`employee-name`
WHERE   man.city = emp.city AND
        emp.street = man.street 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T09:11:52.120

你应该使用`WHERE`从句。

查找在 First Bank Corporation 工作且收入超过 10,000 美元的所有员工的姓名、街道地址和居住城市。

```
SELECT e.`employee-name`, e.street, e.city
FROM employee e
INNER JOIN works w ON e.`employee-name` = w.`employee-name`
WHERE w.company-name = "First Bank Corporation"
AND w.salary > 10000 
```

使用 WHERE 子句而不是`GROUP BY`和`HAVING`。

在数据库中查找与他们工作的公司居住在同一城市的所有员工。

```
SELECT e.`employee-name`
FROM employee e
INNER JOIN works w ON e.`employee-name` = w.`employee-name`
INNER JOIN company c ON w.`company-name` = c.`company-name`
WHERE e.city = c.city 
```

在数据库中查找与其经理居住在同一城市和同一街道上的所有员工。

```
SELECT m.`employee-name`
FROM manages m
INNER JOIN employee e ON e.`employee-name` = m.`employee-name`
INNER JOIN employee manager ON manager.`employee-name` = m.`manager-name`
WHERE e.street = manager.street
AND e.city = manager.city 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T09:16:00.400

您可以通过使用 WHERE 而不是 GROUP BY 和 HAVING 来解决前 2 个问题。第一：

```
SELECT e.employee-name, e.city
FROM employee e
INNER JOIN works w
ON e.employee-name = w.employee-name
WHERE w.company-name = “First Bank Corporation”
AND w.salary > 10000 
```

第二个：

```
SELECT e.employee-name
FROM employee e
INNER JOIN works w
ON e.employee-name = w.employee-name
INNER JOIN company c
ON w.company-name = c.company-name
WHERE e.city = c.city 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-21T09:12:01.400

这是我解决第一个问题的方法：

```
SELECT employee-name, street, city 
FROM employee 
WHERE employee-name = (
SELECT employee-name 
FROM works where company-name = "First Bank Corporation" 
AND salary > 10000) 
```

如果您需要其他帮助，请告诉我

# jquery - 从嵌套函数访问当前对象

> ID：15543219
> 
> 赞同：1
> 
> 时间：2013-03-21T09:06:36.800
> 
> 标签：jquery, tinymce, mcimagemanager

如何将 $(this) 对象传递给 click 事件中的函数。

```
$('#mainwrap img').click(function(){      
    mcImageManager.browse({
        oninsert : function(o) {
            src= o.focusedFile.url;
            $(this).attr("src", src );
        }
    });
}); 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T09:15:52.630

`this`是一个特殊变量 - 每次输入一个函数时，它都会采用一个新值。

在这种情况下，为了使外部函数`this`在内部函数中可用，您可以在嵌套函数之外将一个新变量绑定到它：

```
$('#mainwrap img').click(function() {
    var $this = $(this);      // new variable here 
    mcImageManager.browse({
        oninsert : function(o) {
            src= o.focusedFile.url;
            $this.attr("src", src );  // referenced here
        }
    });
}); 
```

# ios - 存档时的代码签名错误

> ID：15543224
> 
> 赞同：0
> 
> 时间：2013-03-21T09:06:48.437
> 
> 标签：ios, iphone-5, code-signing-certificate

`CodeSign error: Certificate identity 'iPhone Distribution: vishnu sivabalan'`在钥匙串中出现不止一次。

协同设计工具只需要一个。我想存档时出现此错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:33:10.993

一旦从您的钥匙串中删除所有**vishnu sivabalan**证书副本，然后再次将其安装在钥匙串中。它会解决你的问题。

希望这可以帮助。谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T09:38:03.513

尝试这个 ：-

*   首先退出 Xcode。
*   如果钥匙串访问已打开，请保持打开状态。
*   立即启动 Xcode。
*   看到 Xcode 抱怨的证书将在启动时从其缓存中重新添加到钥匙串中。
*   继续删除它。
*   运行..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T09:09:55.120

请检查钥匙串访问应用程序。在左上窗格中选择“登录”，在左下窗格中选择“证书”。您的机器中可能安装了多个分发证书。如果是这样，请删除其中一个证书。

# html - 用 n 种颜色为表中的行着色

> ID：15543232
> 
> 赞同：0
> 
> 时间：2013-03-21T09:07:00.550
> 
> 标签：html, css, css-selectors, css-tables

我知道我可以使用*奇数*和*偶数*来为表格中的交替行着色。但是，我希望能够每隔三行着色**一次**，所以着色就像*red-green-blue-red-green-blue*。

此外，我想让它通用并使用*n*种颜色来设置每个 n:th 行的样式。

目前，我动态生成表，并且对于每次迭代，我在每个*td*标签上输入一个类名，如*modulo0*、*modulo1*等。

 *有没有更好的办法？一个更自动的，那就是。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T09:09:34.980

您想使用`:nth-child`选择器`3n`，可以在此处添加一个数字以获取从开始、第二或第三开始的每一秒。

[jsFiddle](http://jsfiddle.net/Tyriar/vuESv/1/)

![具有交替颜色的表](../Images/14cd343db6d14e95965622619f64fd73.png)

**HTML**

```
<table>
    <tr><td>R</td></tr>
    <tr><td>G</td></tr>
    <tr><td>B</td></tr>
    <tr><td>R</td></tr>
    <tr><td>G</td></tr>
    <tr><td>B</td></tr>
</table> 
```

**CSS**

```
tr:nth-child(3n+1) td { 
    background-color:red;
}
tr:nth-child(3n+2) td { 
    background-color:green;
}
tr:nth-child(3n) td { 
    background-color:blue;
} 
```

## 一般来说

更一般地，替换`3`为要更改颜色的行数。

```
tr:nth-child(2n) td { } /* every second row */
tr:nth-child(4n) td { } /* every fourth row */
tr:nth-child(10n) td { } /* every tenth row */ 
```

## 支持

请注意，[对 CSS3 选择器的完全支持](http://caniuse.com/#search=nth-child)仅在 IE9 中提供。如果对 IE8 的支持是必不可少的，则需要替代解决方案，例如手动类或 JavaScript。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T09:14:08.060

只需使用`nth-child(3n+3)`. 请记住，这不是一个跨浏览器的解决方案。这是一个[工作示例](http://codepen.io/anon/pen/Hkbsg)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T10:44:45.577

可能是较旧的方式，但如果您对 javascript 没有任何问题，也可以在下面尝试。

```
<body>
    <script language="JavaScript" type="text/javascript">

    function altrows(tableid,firstcolor,secondcolor,thirdcolor)
    {
          var rows = document.getElementById(tableid).getElementsByTagName("tr");

      for(var i = 0; i < rows.length; i++)
      {
        i -= 1;

        for (var b=0;b<=2;b++) { 
            i +=1; 
            if(b==0){ rows[i].bgColor = firstcolor; }
            if(b==1){ rows[i].bgColor = secondcolor; }  
            if(b==2){ rows[i].bgColor = thirdcolor; }       
            }
        }
    }
    </script>

<body onLoad="altrows('tb_detail','#FF0321','#44FF03','#2103FF')">

<table cellpadding="0" cellspacing="0" border="0" width="90%" id="tb_detail">   
<tr><td>Item1</td></tr>         
<tr><td>Item1</td></tr>         
<tr><td>Item1</td></tr>         
<tr><td>Item1</td></tr>         
<tr><td>Item1</td></tr>         
<tr><td>Item1</td></tr>         
<tr><td>Item1</td></tr>         
<tr><td>Item1</td></tr>         
<tr><td>Item1</td></tr>         
</table>
</body> 
```*

# javascript - 检查 writeFileSync 是否成功写入文件

> ID：15543235
> 
> 赞同：66
> 
> 时间：2013-03-21T09:07:15.590
> 
> 标签：javascript, node.js

我有一个简单的路线定义`express.js`：

```
exports.save = function (request, response)
{
    var file = request.body.file;
    var content = request.body.content;

    var saved = false;

    if (fs.existsSync( file ))
    {
        saved = fs.writeFileSync(file, content, 'utf8');
    }

    console.log( saved ); // undefined or false, never true

    response.send(saved ? 200 : 500, saved ? 'saved' : 'error'); // 500, error
}; 
```

是`if (typeof saved === 'undefined') saved = true;`唯一的选择吗？感觉很hacky。

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2013-03-21T09:24:36.230

根据 node.js[源代码](https://github.com/joyent/node/blob/master/lib/fs.js) [`fs.writeFileSync`](https://github.com/joyent/node/blob/master/lib/fs.js#L941)不返回任何内容。

如果出现问题，它会抛出一个`Error`对象。所以你应该`fs.writeFileSync(file, content, 'utf8');`在一个`try-catch`块内写。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-21T09:29:04.597

fs.writeFileSync 不返回任何值，如果没有发生异常则表示保存成功；否则失败。

您可能想尝试文件读取的异步版本

```
fs.exists(file, function (exists) {
  if (exists) {
    fs.writeFiles(file, content, 'utf-8', function (err) {
      if (err) {
        response.send("failed to save");
      } else {
        response.send("succeeded in saving");
      }
  } else {
    console.log('file does not exists');
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-14T13:28:24.787

```
 fs.exists(file, function (exists) {
  if (exists) {
    fs.writeFiles(file, content,  err=> {
      if (err)   res.status(500).send({error: "failed to save"});
       else    res.status(200).send({message : "succeeded in saving"});
  } else {
    res.status(404).send({error: "file not exists"})
  }
}
```

使用异步而不是同步。这将起作用。

# zend-framework - zend_session 在得到第二个产品后出错

> ID：15543236
> 
> 赞同：0
> 
> 时间：2013-03-21T09:07:17.253
> 
> 标签：zend-framework, zend-session, zend-session-namespace

我是初学者zend。当我搞乱 zend_session 时，我遇到了这样的问题。

一件物品一切正常。但不止一项，它会停止添加更多项或增加匹配项。

这是我的代码

```
// get value from form
            $intQuantity = $this->_request->getPost ( 'intQuantity' );
            $intSize = $this->_request->getPost ( 'intSize' );
            $intProductId = $this->_request->getParam('productId');
            //call model cart
            $cartModel = new Default_Model_cart();

            //input value into cartModel function addItem output array of matched row
            /*
             * Array
            *   (
            *       [0] => Array
            *           (
            *               [product_id] => 7
            *               [product_price] => 1600000
            *               [product_image_url_50] => 50_nike-janoski-new-1363618892.jpg
            *               [product_size_title] => 6.5
            *           )
            *   )
             * 
             * 
             * */
            $cartArrays = $cartModel->addItem($intProductId, $intQuantity, $intSize);

            //add quantity into cartArrays
            /*
             * Array
            *   (
                    *       [0] => Array
                    *           (
                            *               [product_id] => 7
                            *               [product_price] => 1600000
                            *               [product_image_url_50] => 50_nike-janoski-new-1363618892.jpg
                            *               [product_size_title] => 6.5
                            *               [quantity] => 1
                            *           )
                    *   )
            *
            *
            * */
            $cartArrays[0]['quantity'] = $intQuantity;
            //declare session
            $session = new Zend_Session_Namespace();
            /*
             * if true session->product got at least one array of of cartArray
             * */
            if(isset($session->product)) {
                $i=0;
                //foreach arrays into array
                foreach($session->product as $productSessionArray) {
                    /*if in an array got productId and product_size_title matched cartArrays productId and product_size_title
                    * add value from $intQuantity into appropriate $session->product determined by $i
                    */ 
                    if($productSessionArray['product_id'] == $cartArrays[0]['product_id'] && $productSessionArray['product_size_title'] == $cartArrays[0]['product_size_title']) {
                        $session->product[$i]['quantity'] += $intQuantity;
                        /*
                         * if values don't matched add the whole new array into $session->product
                         * */
                    } else {
                        $productSessionArrays[] = $productSessionArray;
                        $productSessionArrays[] = $cartArrays[0];
                        $session->product = $productSessionArrays;
                    }
                    //$i increase by 1
                    $i++;
            }
                //if there is not an array in $session added the array in to it
            } else {
                $session->product = $cartArrays;
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:15:11.103

看起来您只是在测试第一个购物车项目的 id：

```
if($productSessionArray['product_id'] == $cartArrays[0]['product_id'] && $productSessionArray['product_size_title'] == $cartArrays[0]['product_size_title']) 
```

# c - 数组中只有一个元素可以组成子数组吗？

> ID：15543237
> 
> 赞同：0
> 
> 时间：2013-03-21T09:07:23.997
> 
> 标签：c, arrays

我不清楚子数组。

认为：`A[3]={1,2,3}`

1,2 和 3 可以单独成为 A 的子数组吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:16:32.480

答案是肯定的。在 C 中，数组基本上是一个指针及其长度。

你可以这样做：

```
int A[3] = {1,2,3};
int * p1 = A;   // or p1 = &A[0]
int * p2 = A+2; // or p2 = &A[2]; 
```

现在您可以`p1`作为 2 个元素的数组 ( `{1,2}`) 和`p2`1 个元素的数组 ( `{3}`) 进行操作，但您必须自己了解或记住有关子数组长度的信息。

# objective-c - NSURLConnection 得到错误时的不同结果

> ID：15543238
> 
> 赞同：2
> 
> 时间：2013-03-21T09:07:24.353
> 
> 标签：objective-c, nsurlconnection, nsurlrequest

我`-[NSURLConnection initWithRequest...]`用来连接服务器，当服务器端出现故障时，它会响应错误 400 并在正文中显示一条消息。在没有错误的情况下，我可以在 didReceiveData 中获取响应数据。但是当服务器返回错误 400 时，我在 didReceiveData 中没有收到任何错误消息。

但是，如果我`-[NSURLConnection sendSynchronousRequest...]`用来执行相同的请求，我会从`sendSynchronousRequest`的返回值中获取错误数据。

我想从 didReceiveData 获取错误消息，但我不知道为什么我不能得到它。do之间有什么不同，有人可以帮助我吗？

这样我可以得到错误信息：

```
NSURL *url = [NSURL URLWithString:@"http://devapi.xxx.com/v1/debug/error"];
NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] initWithURL:url
                                                              cachePolicy:NSURLRequestUseProtocolCachePolicy
                                                          timeoutInterval:240] autorelease];

[request setHTTPMethod:@"POST"];

[request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];

NSURLResponse *response = nil;
NSError *error = nil;
NSData *data = [NSURLConnection sendSynchronousRequest:request
                                     returningResponse:&response
                                                 error:&error];

NSLog(@"STATUS:%d", [((NSHTTPURLResponse *)response) statusCode]);
NSLog(@"ERROR:%@", error); 
```

这样我就无法得到它：

```
NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:@"http://devapi.xxx.com/v1/debug/error"]
                                                             cachePolicy:NSURLRequestUseProtocolCachePolicy
                                                         timeoutInterval:240] autorelease];

[request setHTTPMethod:@"POST"];

[request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
urlConnection=[[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:YES];

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
    NSLog(@"statusCode:%d",((NSHTTPURLResponse *)response).statusCode);
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
}
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
[receivedData appendData:data];
NSLog(@"DATA:%@",[NSString stringWithCString:[receivedData bytes] encoding:NSASCIIStringEncoding]);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T21:28:02.250

使用此委托方法来处理此类错误。

```
- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
      NSLog(@" Failed with error---%@",error);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T02:12:20.930

我想我发现它是怎么回事，当我在 didReceiveResponse 中得到错误状态码时，我立即尝试获取数据并取消连接，但这是错误的，因为 didReceiveData 在 didReceiveResponse 之后仍在接收中。

非常感谢！

# apache - Comet 如何与客户端协同工作

> ID：15543245
> 
> 赞同：0
> 
> 时间：2013-03-21T09:07:40.793
> 
> 标签：apache, tomcat, comet

我有一个关于彗星实施的问题。我知道它用于处理类似于现在可以通过 Servlet 3.0 异步功能实现的异步请求。然而，我不明白的是如何对调用客户端进行推送。

在 Web 套接字中，我们通过提供 ip 和端口来打开连接。使用 Comet，如何与服务器连接以便在服务器推送数据时接收回调？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:17:49.593

[Comet (programming)](http://en.wikipedia.org/wiki/Comet_%28programming%29)上的维基百科页面是这个问题的一个很好的资源（对不起，它太明显了）。

Comet 是使用 HTTP 来模拟客户端和服务器之间的双向连接的总称。最终，您向服务器发出 HTTP 请求并尝试使其保持打开状态（长轮询和流式传输）。通过长轮询，连接在给定时间间隔后或返回数据时关闭。通过流式传输，连接有助于尽可能长时间地打开，并通过现有连接发送新数据。

这些是如何在网络浏览器之间实现的——这就是为什么 Comet 被归类为黑客的原因。同样，维基百科页面应该提供您需要的几乎所有信息。

我写了一篇文章，涵盖了实时 Web 通信的历史（侧重于客户端）以及为什么[WebSocket 会改变游戏规则](http://pusher.com/websockets)。

# android - 尝试定义设备应使用的布局

> ID：15543246
> 
> 赞同：2
> 
> 时间：2013-03-21T09:07:46.950
> 
> 标签：android, android-layout

我试图了解哪个布局使用哪个设备。

例如，我有不同的布局：

*   布局
*   布局-sw600dp
*   布局-sw720dp

> Nexus 7" (800x1280) 使用 layout-sw600dp
> 
> 三星 GTp3100 7" (600x1.024) 使用 layout-sw600dp
> 
> 三星 Tab 10.1 (1280x800) 使用 layout-sw720dp
> 
> 索尼 XPERIA S 4.3 (1280x720) 使用布局

你们能用你的话解释一下为什么XPERIA S不使用sw600dp或sw720dp吗？SW != 最小宽度？XPERIA S 中最小的是 720。它应该使用 sw720 或 sw600，对吧？还是我错了？

我已经阅读了大量文档，但无法理解为什么会发生这种情况。

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T10:13:20.000

Smallest-Width 限定符主要是指屏幕大小而不是物理像素。

使用`sw720dp`例如意味着设备的最小屏幕宽度必须为 720 `dp`（与设备无关的像素）——这不是大约 720 个物理像素。从文档...

> 与密度无关的像素相当于 160 dpi 屏幕上的一个物理像素，这是系统为“中等”密度屏幕假定的基线密度。

索尼 XPERIA S 4.3 的物理宽度是 2.5 英寸，但我不知道屏幕的实际宽度是多少。

为了计算，让我们假设屏幕覆盖了整个宽度……在这种情况下，`dpi`我们只需使用 . 来计算宽度`720 / 2.5 = 288dpi`。

从文档中`dp`...

> dp 单位到屏幕像素的转换很简单：px = dp * (dpi / 160)。

重新排列上面的公式来计算`dp`我们这样做......

```
dp = px / (dpi / 160) 
```

...这为我们提供了...的宽度`dp`（以及必要的最小宽度限定符）...

```
720 / (288 / 160) = 400dp 
```

简而言之，索尼 XPERIA S 4.3 可能具有高密度屏幕（就其尺寸而言），但它不是大屏幕。

# datetime - SAS 日期时间格式化为 POSIX

> ID：15543249
> 
> 赞同：2
> 
> 时间：2013-03-21T09:07:55.827
> 
> 标签：datetime, posix, sas

我希望 SAS 以 POSIX 格式格式化日期时间。以下给出“2009-11-25 14:44:56”我如何显示毫秒？

```
proc format;
    picture POSIX other='%0Y-%0m-%0d %0H:%0M:%0S' (datatype=datetime);
run;
data test;
  mydatetime='25nov2009 14:44:56.300'dt;
  format newdt POSIX.;
  newdt=mydatetime;
  put mydatetime= newdt=;
run; 
```

编辑：我什至采用任何方式将日期时间格式化为`YYYY-MM-DD HH:M:SS.sss`（ISO8601）惊人的我在不到 1 分钟内找不到这个

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T14:25:28.753

E8601DT23.3 应该按照您的意愿显示您的值，除了额外的“T”分隔符；SAS似乎要求这样做。如果您要输入字符值，则可以轻松删除“ T”；如果您尝试使用格式化的数值，我认为您将不得不忍受它。

```
data test;
  mydatetime='25nov2009 14:44:56.356'dt;
  format newdt E8601DT23.3;
  newdt=mydatetime;
  put mydatetime= newdt=;
run; 
```

ISO8601 SAS 指南：

[http://support.sas.com/documentation/cdl/en/lrdict/64316/HTML/default/viewer.htm#a003169814.htm](http://support.sas.com/documentation/cdl/en/lrdict/64316/HTML/default/viewer.htm#a003169814.htm)

编辑：SAS-L 通过这个（[http://listserv.uga.edu/cgi-bin/wa?A1=ind1303c&L=sas-l#8](http://listserv.uga.edu/cgi-bin/wa?A1=ind1303c&L=sas-l#8)）。如果您有 9.3，这应该可以工作（不是 9.2 或更早版本）。

```
proc format;
    picture POSIX other='%0Y-%0m-%0d %0H:%0M:%0s' (datatype=datetime);
run;
data test;
  mydatetime='25nov2009 14:44:56.300'dt;
  format newdt POSIX23.3;
  newdt=mydatetime;
  put mydatetime= newdt=;
run; 
```

小 s，包括小数，它应该按预期工作。感谢 data *null*的提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-03T19:54:54.123

此解决方案仅适用于 10-59 的秒值。它不适用于秒 0-9 的值。第二个 0-9 的值没有前导零。

# java - xml文件缺少属性

> ID：15543252
> 
> 赞同：1
> 
> 时间：2013-03-21T09:08:03.530
> 
> 标签：java, android

我从这里导入了库：

[https://github.com/47deg/android-swipelistview](https://github.com/47deg/android-swipelistview)

然后我创建了一个带有 from 和 back id 的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical"
             >

    <RelativeLayout 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:id="@+id/front"
            android:tag="front" >

            <ImageView
                android:id="@+id/ImageView01"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_centerInParent="true"
                 />

            <TextView
                android:id="@+id/TextView01"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBottom="@+id/ImageView01"
                android:layout_centerHorizontal="true"
                android:textSize="18sp"
                android:textStyle="bold"
                android:inputType="textMultiLine" />

        </RelativeLayout>

            <LinearLayout
                      android:layout_width="match_parent"
                      android:layout_height="wrap_content"
                      android:orientation="horizontal"
                      android:id="@+id/back"
                     android:tag="back"

                      >

                      <Button
                          android:id="@+id/deleteBtn1"
                          android:layout_width="150dp"
                          android:layout_height="100dp"
                          android:text="Delete" />

                      <Button
                          android:id="@+id/UpdateBtn1"
                          android:layout_width="150dp"
                          android:layout_height="100dp"
                          android:text="Update" />

                  </LinearLayout>

</LinearLayout> 
```

然后我用 swipeListView 创建了 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>

   <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_below="@+id/linearLayout1"
        android:orientation="vertical" >

                <EditText android:id="@+id/EditText01"
                                android:layout_height="wrap_content"
                                android:layout_width="fill_parent"
                                android:hint="Search">                               
                </EditText>

                <ListView android:id="@+id/android:list"
                                android:layout_height="wrap_content"
                                android:layout_width="fill_parent">
                </ListView>

        <main.java.com.fortysevendeg.android.swipelistview.SwipeListView
            xmlns:swipe="http://schemas.android.com/apk/res-auto"
            android:id="@+id/example_lv_list"
            android:listSelector="#00000000"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            swipe:swipeFrontView="@+id/front"
            swipe:swipeBackView="@+id/back"
            swipe:swipeActionLeft="dismiss"
            swipe:swipeCloseAllItemsWhenMoveList="true"
            swipe:swipeMode="both"
            />

    </LinearLayout> 
```

它向我显示了一个错误：

```
The following classes could not be instantiated:
- main.java.com.fortysevendeg.android.swipelistview.SwipeListView (Open Class, Show Error Log)
See the Error Log (Window > Show View) for more details.
Tip: Use View.isInEditMode() in your custom views to skip code when shown in Eclipse

java.lang.RuntimeException: Missed attribute swipeFrontView or swipeBackView
    at main.java.com.fortysevendeg.android.swipelistview.SwipeListView.init(SwipeListView.java:166)
    at main.java.com.fortysevendeg.android.swipelistview.SwipeListView.<init>(SwipeListView.java:121)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(    at sun.reflect.NativeConstructorAccessorImpl.newInstance(    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(    at java.lang.reflect.Constructor.newInstance(    at com.android.ide.eclipse.adt.internal.editors.layout.ProjectCallback.instantiateClass(ProjectCallback.java:422)
    at com.android.ide.eclipse.adt.internal.editors.layout.ProjectCallback.loadView(ProjectCallback.java:179)
    at android.view.BridgeInflater.loadCustomView(BridgeInflater.java:207)
    at android.view.BridgeInflater.createViewFromTag(BridgeInflater.java:135)
    at android.view.LayoutInflater.rInflate_Original(LayoutInflater.java:746)
    at android.view.LayoutInflater_Delegate.rInflate(LayoutInflater_Delegate.java:64)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:718)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:372) 
```

第 166 行是：

```
 throw new RuntimeException("Missed attribute swipeFrontView or swipeBackView");

 if (swipeFrontView == 0 || swipeBackView == 0) {
            throw new RuntimeException("Missed attribute swipeFrontView or swipeBackView");
        } 
```

第 121 行是：

```
init(attrs);

public SwipeListView(Context context, AttributeSet attrs) {
        super(context, attrs);
        init(attrs);
    } 
```

多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:14:40.037

Adir 我相信问题可能是您试图通过使用无效的包名称标识符来实例化错误的类。主.java。**com.fortysevendeg.android.swipelistview.SwipeListView**

从类名中删除 main.java。

# asp.net-mvc - mini-profiler 删除一些步骤

> ID：15543258
> 
> 赞同：1
> 
> 时间：2013-03-21T09:08:50.730
> 
> 标签：asp.net-mvc, mvc-mini-profiler

我开始在我的 ASP MVC 4 Web 应用程序上使用 Stackoverflow MiniProfiler。我只在 BeginRequest 和 EndRequest 中分别放置了 Start 和 Stop 调用。我在一项操作中添加了一些步骤，如下所示：

```
private ActionResult MyAction(string id)
{
  using (MiniProfiler.Current.Step("GatherReportItems")) {
    ...
  }

  using (MiniProfiler.Current.Step("BuildReportViewModel")) {
    ...
  }

  using (MiniProfiler.Current.Step("AddingExtraInfo")) {
    ...
  }
} 
```

问题是，在对该操作的第一个请求中，我可以看到所有 3 个步骤，在任何进一步的请求中，我只看到第一步，而没有看到其他任何步骤。

当我调试我的应用程序时，我可以在 MiniProfiler.Current -> Head -> Children 中看到所有 3 个步骤都在那里。在客户端显示中（单击计时框后），我只能看到部分步骤。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T09:45:51.137

我现在注意到，在分析详细信息弹出窗口的底部有一个小链接名称**show trivial ，它添加了非常短的时间**

# scala - 将 Seq[Future[X]] 转换为 Enumerator[X]

> ID：15543261
> 
> 赞同：11
> 
> 时间：2013-03-21T09:09:00.447
> 
> 标签：scala, playframework-2.0

有没有办法将 Seq[Future[X]] 变成[Enumerator[X]](http://www.playframework.com/documentation/2.1.0/Enumerators)？用例是我想通过爬网来获取资源。这将返回一个期货序列，我想返回一个枚举器，它将按照它们首先完成的顺序将期货推送到 Iteratee。

看起来 Victor Klang 的[Future select gist](https://gist.github.com/viktorklang/4488970)可以用来做到这一点——尽管它看起来效率很低。

注意：有问题的迭代器和枚举器是播放框架版本 2.x 给出的那些，即具有以下导入：`import play.api.libs.iteratee._`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T11:13:07.893

使用[Victor Klang 的 select 方法](https://gist.github.com/viktorklang/4488970)：

```
 `/**
   * "Select" off the first future to be satisfied.  Return this as a
   * result, with the remainder of the Futures as a sequence.
   *
   * @param fs a scala.collection.Seq
   */
  def select[A](fs: Seq[Future[A]])(implicit ec: ExecutionContext): 
      Future[(Try[A], Seq[Future[A]])] = {
    @scala.annotation.tailrec
    def stripe(p: Promise[(Try[A], Seq[Future[A]])],
               heads: Seq[Future[A]],
               elem: Future[A],
               tail: Seq[Future[A]]): Future[(Try[A], Seq[Future[A]])] = {
      elem onComplete { res => if (!p.isCompleted) p.trySuccess((res, heads ++ tail)) }
      if (tail.isEmpty) p.future
      else stripe(p, heads :+ elem, tail.head, tail.tail)
    }
    if (fs.isEmpty) Future.failed(new IllegalArgumentException("empty future list!"))
    else stripe(Promise(), fs.genericBuilder[Future[A]].result, fs.head, fs.tail)
   }
}` 
```

`然后我可以得到我需要的东西`

```
 `Enumerator.unfoldM(initialSeqOfFutureAs){ seqOfFutureAs =>
        if (seqOfFutureAs.isEmpty) {
          Future(None)
        } else {
          FutureUtil.select(seqOfFutureAs).map {
            case (t, seqFuture) => t.toOption.map {
              a => (seqFuture, a)
            }
          }
        }
    }` 
```

* * *

 `## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T17:36:20.720

一个更好、更短且我认为更有效的答案是：

```
 `def toEnumerator(seqFutureX: Seq[Future[X]]) = new Enumerator[X] { 
      def apply[A](i: Iteratee[X, A]): Future[Iteratee[X, A]] = {
        Future.sequence(seqFutureX).flatMap { seqX: Seq[X] => 
            seqX.foldLeft(Future.successful(i)) {
              case (i, x) => i.flatMap(_.feed(Input.El(x)))
            }
        }
      }
    }` 
```

* * *

 `## 回答 #3

> 赞同：1
> 
> 时间：2014-06-26T07:53:57.477

我确实意识到这个问题已经有点老了，但是根据 Santhosh 的回答和内置的 Enumterator.enumerate() 实现，我想出了以下内容：

```
def enumerateM[E](traversable: TraversableOnce[Future[E]])(implicit ec: ExecutionContext): Enumerator[E] = {
  val it = traversable.toIterator
  Enumerator.generateM {
    if (it.hasNext) {
      val next: Future[E] = it.next()
      next map {
        e => Some(e)
      }
    } else {
      Future.successful[Option[E]] {
        None
      }
    }
  }
} 
```

请注意，与第一个基于 Viktor 选择的解决方案不同，这个解决方案保留了顺序，但您仍然可以在之前异步启动所有计算。因此，例如，您可以执行以下操作：

```
// For lack of a better name
def mapEachM[E, NE](eventuallyList: Future[List[E]])(f: E => Future[NE])(implicit ec: ExecutionContext): Enumerator[NE] =
  Enumerator.flatten(
    eventuallyList map { list =>
      enumerateM(list map f)
    }
  ) 
```

当我偶然发现这个线程时，后一种方法实际上是我正在寻找的。希望它可以帮助某人！:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T11:32:05.457

您可以使用 Java 执行器完成服务 ( [JavaDoc](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorCompletionService.html) ) 构建一个。这个想法是使用创建一系列新期货，每个期货`ExecutorCompletionService.take()`用于等待下一个结果。当前一个未来有结果时，每个未来都会开始。

但请注意，这可能效率不高，因为很多同步发生在幕后。使用一些并行 map reduce 进行计算（例如使用 Scala 的 ParSeq）并让 Enumerator 等待完整的结果可能会更有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T16:24:44.890

警告：在回答之前未编译

像这样的东西怎么样：

```
def toEnumerator(seqFutureX: Seq[Future[X]]) = new Enumerator[X] { 
  def apply[A](i: Iteratee[X, A]): Future[Iteratee[X, A]] = 
    Future.fold(seqFutureX)(i){ case (i, x) => i.flatMap(_.feed(Input.El(x)))) }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-03T16:09:13.650

这是我发现很方便的东西，

```
def unfold[A,B](xs:Seq[A])(proc:A => Future[B])(implicit errorHandler:Throwable => B):Enumerator[B] = {
    Enumerator.unfoldM (xs) { xs =>
        if (xs.isEmpty) Future(None)
        else proc(xs.head) map (b => Some(xs.tail,b)) recover {
            case e => Some((xs.tail,errorHandler(e)))
        }
    }
}

def unfold[A,B](fxs:Future[Seq[A]])(proc:A => Future[B]) (implicit errorHandler1:Throwable => Seq[A], errorHandler:Throwable => B) :Enumerator[B] = {

    (unfold(Seq(fxs))(fxs => fxs)(errorHandler1)).flatMap(unfold(_)(proc)(errorHandler))
}

def unfoldFutures[A,B](xsfxs:Seq[Future[Seq[A]]])(proc:A => Future[B]) (implicit errorHandler1:Throwable => Seq[A], errorHandler:Throwable => B) :Enumerator[B] = {

    xsfxs.map(unfold(_)(proc)).reduceLeft((a,b) => a.andThen(b))
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-12T02:12:24.947

我想建议使用广播

```
def seqToEnumerator[A](futuresA: Seq[Future[A]])(defaultValue: A, errorHandler: Throwable => A): Enumerator[A] ={
    val (enumerator, channel) = Concurrent.broadcast[A]
    futuresA.foreach(f => f.onComplete({
      case Success(Some(a: A)) => channel.push(a)
      case Success(None) => channel.push(defaultValue)
      case Failure(exception) => channel.push(errorHandler(exception))
    }))
    enumerator
  } 
```

我添加了 errorHandling 和 defaultValues，但您可以使用 onSuccess 或 onFailure 跳过它们，而不是 onComplete``

# asp.net-mvc-4 - 如何在 Asp.net MVC4 中有 2 个具有相同名称的控制器方法

> ID：15543263
> 
> 赞同：2
> 
> 时间：2013-03-21T09:09:02.980
> 
> 标签：asp.net-mvc-4

是否可以有 2 个具有相同名称的控制器方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:17:39.867

您指的是控制器方法，这使我感到困惑。是 C# 类方法还是控制器操作？让我两个都回答。

## 纯 C# 不允许这样做

在 C# 中不可能有两个具有相同签名的方法。这意味着具有相同类型的相同名称和相同数量的参数。

```
public int Calculate(int a, int b) { ... }
public int Calculate(int first, int second) { ... } // compiler ERROR 
```

## 但是 Asp.net MVC 控制器操作允许它

如果您谈论的是 Asp.net MVC 控制器操作，那当然是可能的。使用`ActionName`属性来完成您所需要的：

```
public ActionResult Common() { ... }

[ActionName("Common")]
public ActionResult CommonAgain() { ... } // C# signature differs 
```

但是其中一个必须有一些其他方法选择器属性，以便动作调用者知道当请求进来时使用哪一个......因为它们是你会有一个 404 运行时错误。可能一个应该是常规请求操作，但另一个应该在 Ajax 请求进入时执行。或类似的。需要进行一些区分。

# php - ZF2中获取mysql表字段名

> ID：15543266
> 
> 赞同：1
> 
> 时间：2013-03-21T09:09:24.473
> 
> 标签：php, mysql, zend-framework2

我想将 csv 数据动态存储到 mysql 表中。根据我的 csv 列标题，我想将数据插入到 mysql 表中的相应列中。为此，我需要从 Zend Framework Controller 或 Model 中获取所有表字段名称。

我尝试过：

**

```
$metadata = new Zend\Db\Metadata\Metadata($adapter);
$table = $metadata->getTable($tableName);
$table->getColumns(); 
```

**

但是，它显示了错误：

**致命错误：找不到类“Import\Model\Zend\Db\Metadata\Metadata”。**

如何使用**Zend Framework 2**获取所有 mysql 表字段名称？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T14:21:25.233

您必须在 zend 正确之前使用反斜杠：

```
$metadata = new \Zend\Db\Metadata\Metadata($adapter); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T14:29:23.347

您还可以使用`use`文件顶部的 -statement。

```
namespace Import\Model;

use Zend; 
```

或者您使用以下内容：

```
namespace Import\Model;

use Zend\Db\Metadata\Metadata;

// ... lots of code here ;-)
$metadata = new Metadata($adapter); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-09T07:51:03.100

**在标题部分**

命名空间导入\模型；

使用 Zend\Db\元数据\元数据；

**在模态函数中**

$元数据=新元数据（$适配器）；

$fields=$metadata->getColumnNames($table);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-27T19:04:34.090

您应该为此使用工厂，而不是创建元数据的新实例（已弃用）

```
use Zend\Db\Metadata\Source\Factory;

$metadata = Factory::createSourceFromAdapter($adapter); 
```

# c# - Path.GetFileName 存储在字符串中或重用方法调用的效率

> ID：15543273
> 
> 赞同：0
> 
> 时间：2013-03-21T09:09:53.810
> 
> 标签：c#, winforms

我很想知道哪种方法是最佳实践/有效的方法。我有一个方法，我有一个 OpenFileDialog。在那里，我必须在方法内的 5 个地方使用 Path.GetFileName(openFileDialog.FileName)。哪种方法最好：要么调用 GetFileName，要么将其保存在字符串变量中，然后使用该字符串变量？

```
" " + Path.GetFileName(openFileDialog.FileName) + " " 

string fileName = Path.GetFileName(openFileDialog.FileName);
" " + fileName + " " 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T09:18:13.190

除了其他答案已经概述的可读性和维护方面的考虑之外，这个小程序将展示字符串存储选项的性能（很少）增益

```
void Main()
{
    string p = @"d:\temp\file.txt";
    string result;

    Stopwatch sw = new Stopwatch();
    sw.Start();
    for(int i = 0; i < 100000; i++)
    {
        result = " " + Path.GetFileName(p) + " ";
    }
    sw.Stop();
    Console.WriteLine("PathGetFileName:" + sw.Elapsed.ToString());
    sw = new Stopwatch();
    sw.Start();
    string file = Path.GetFileName(p);
    for(int i = 0; i < 100000; i++)
    {
        result = " " + file + " ";
    }
    sw.Stop();
    Console.WriteLine("string concat:" + sw.Elapsed.ToString());
} 
```

结果：

```
PathGetFileName: 205632 

string concat: 65234 
```

当然，这是微优化，不应过多考虑。
在这种情况下，代码的可读性更为重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T09:12:26.487

只需将结果存储`Path.GetFileName`在局部变量中。

它将减少代码的大小，更具可读性（如果变量具有有用的名称）并且会消耗更少的 CPU（即使您不会注意到任何差异）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T09:14:09.173

如果您在同一方法中的 5 个位置使用文件名，请使用局部变量`fileName`。这是可读的、高效的并且没有副作用。

如果您可能经常更改文件并且它是（公共）属性或字段 use `Path.GetFileName(openFileDialog.FileName)`，否则该变量可能不是`openFileDialog`.

但是，比起在大多数情况下可以忽略不计的性能，更关心可读性和正常运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T09:11:31.023

如果是相同的文件名（例如，用户只指定一次文件名），则将其保存到变量中。

将其保存到 a`string`更易于阅读、维护并且应该比调用对象的属性更快，因为您调用的是不可变引用类型。但是，我要指出，唯一真正的优势可能是它更容易阅读，因为计算时间可能在纸上有所不同，但我怀疑您的应用程序会显示出速度/性能方面的任何差异。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-21T09:11:53.490

如果您计划在同一代码/范围块中重用文件名，则只需将其保存为字符串并根据需要引用。这不仅更具可读性，而且内存效率更高。例如

```
string fileName = Path.GetFileName(openFileDialog.FileName);
//Reference fileName as needed 
```

# jquery - 如何在 jquery 中随机每个循环项和 ajax / json 数据？

> ID：15543275
> 
> 赞同：2
> 
> 时间：2013-03-21T09:09:57.813
> 
> 标签：jquery, ajax, json, random

如何在 jquery 中随机化每个循环项和 ajax/json 数据？

数据.json

```
{
  "items" : [
    {
      "title" : "new1",
      "content" : "content1"
    },
    {
      "title" : "new2",
      "content" : "content2"
    },
    {
      "title" : "new3",
      "content" : "content3"
    },
    {
      "title" : "new4",
      "content" : "content4"
    }
  ]
} 
```

jquery ajax 获取json

```
 $.ajax({
        url: 'data.json',
        type: 'get',
        dataType: 'json',
        async: false,
        success: function(data){
              $.each(data.items, function(index,item) {
               var template = '<p>' + item.title + '</p>' + item.content + '<br />'; 

                  $('html').append(template);
                  return index < 1 ; // set 2 item 
              });

        }
     }); 
```

如何在 jquery 中随机化每个循环项和 ajax/json 数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:16:24.487

添加`'`并在末尾关闭`.each()`添加 `});``.each()`

```
$.each(data.items, function(index,item) {
    var template = '<p>' + item.title + '</p>' + item.content + '<br />'; }); 
```

**对于随机**

```
var random_index = Math.floor(Math.random()*data.length);
var item = data[random_index]; 
```

# ios - ios应用程序中未显示TabBar后退按钮

> ID：15543277
> 
> 赞同：0
> 
> 时间：2013-03-21T09:10:00.457
> 
> 标签：ios, objective-c, uinavigationcontroller, uinavigationbar

我创建了一个 UINavigationBarButton，我在其中放置了一个名为“更新”的按钮。单击更新按钮时，它正在导航到 SecondViewController。但问题在于 SecondViewController TabBar 没有显示。我想要做的是当我点击SecondViewController 中的后退按钮应该返回到 RootViewController。这里是代码

```
- (void)viewDidLoad {
      [super viewDidLoad];
      self.navigationItem.title=@"GooGle";

      [self.navigationItem setLeftItemsSupplementBackButton:YES];
      [self.navigationController setToolbarHidden:NO];

      UIBarButtonItem *nextView = [[UIBarButtonItem alloc] initWithTitle:@"update" style:UIBarButtonSystemItemPlay target:self action:@selector(updateAddress)];   
      self.navigationItem.rightBarButtonItem = nextView;
      [nextView release];  
}

-(void)updateAddress
{
      SecondViewController *updateView=[[SecondViewController alloc]initWithNibName:@"SecondViewController" bundle:nil];
      [self.navigationController presentViewController:updateView animated:YES completion:Nil];
      [self.navigationItem setLeftItemsSupplementBackButton:YES];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:20:05.000

当您点击 SecondViewController 中的后退按钮时，请使用

```
 [self dismissViewControllerAnimated:YES completion:nil]; 
```

由于您没有使用

```
 [self.navigationController pushViewController:youViewController animated:YES]; 
```

导航栏将不可见，如果这样做，您将拥有自己的导航栏和后退按钮，并且在按下后退按钮时，它本身将移动到上一个视图

分享你的结果

# c# - tabControl 中选项卡的初始化

> ID：15543284
> 
> 赞同：2
> 
> 时间：2013-03-21T09:10:23.553
> 
> 标签：c#, user-controls, initialization, tabcontrol

我正在使用带有许多选项卡（> 10）的 tabControl，每个选项卡都有 UserContol。但是选项卡在启动我的应用程序时初始化每个控件。这让我的程序太慢了。我只想在单击它时运行我的 userControl。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:14:42.007

您应该改进您的用户控件，使其在被激活/可见之前不会执行性能操作。Give them a method `Activate`which the tabcontrol calls when the tabs becomes the selected tab.

或者，您不能将 UserControls 添加到设计器中的 TabPage 内容。而是在选项卡变为活动状态时创建您的 UserControl。但这会使它们在 Designer 中不可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:16:32.747

您可以有一个标记，例如`IsLoaded`，直到一个选项卡被选中，不加载控件。然后选择选项卡时，如果尚未加载，您可以加载控件并在运行时将它们添加到选项卡`Controls`。

或者，您可以添加控件但在选择选项卡之前不对它们执行任何操作，然后每个选项卡将执行计算或其他任何操作并更新正确的控件。

这完全取决于您的设计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-03T17:37:07.660

将处理程序添加到您的用户控件的`Load`事件。然后在处理程序中启动缓慢的活动。

# php - Jquery Autocomplete - 如何在自动完成时将所有数据发送到php文件

> ID：15543285
> 
> 赞同：0
> 
> 时间：2013-03-21T09:10:27.317
> 
> 标签：php, mysql, jquery-autocomplete

我对本教程有疑问。
[http://www.script-tutorials.com/autocomplete-with-php-jquery-mysql-and-xml](http://www.script-tutorials.com/autocomplete-with-php-jquery-mysql-and-xml)

我有 2 个输入：

```
<input id="ra" type="text" autocomplete="off">
<input id="rb" type="text" autocomplete="off"> 
```

我想在输入输入时或在自动完成过程中将 2 个输入的数据发送到 .php 文件，如下所示：

```
 $('#ra).autocomplete('data.php?mode=ra&rb='+$('#rb').val(), {
        width: 200,
        max: 5
    });

 $('#rb).autocomplete('data.php?mode=rb&ra='+$('#ra').val(), {
        width: 200,
        max: 5
    }); 
```

但它不工作，我怎样才能使这个工作？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:16:33.797

你的选择器是错误的。

尝试这个

```
 $('#ra').autocomplete('data.php?mode=ra&rb='+$('#rb').val(), {
        width: 200,
        max: 5
    });

 $('#rb').autocomplete('data.php?mode=rb&ra='+$('#ra').val(), {
        width: 200,
        max: 5
    }); 
```

# ruby - 为什么我们将 0 作为参数传递给“退出”？

> ID：15543287
> 
> 赞同：9
> 
> 时间：2013-03-21T09:10:33.870
> 
> 标签：ruby, exit

在《硬着头皮*学习ruby》*一书中，我找到了退出程序的语法：

```
Process.exit(0) 
```

为什么在我传递另一个整数或不传递任何参数`0`的情况下在方法中传递参数？`exit`有什么意义`0`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-21T09:13:38.923

这是一个“退出代码”。

此退出代码在某些情况下具有特殊含义（例如参见[http://tldp.org/LDP/abs/html/exitcodes.html](http://tldp.org/LDP/abs/html/exitcodes.html)）

你可以传递任何你想要的，如果代码没有被捕获，这将没有任何影响。

这里的“0”代表“一切正常！”

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-21T09:13:50.783

这是因为当子进程启动时（在这种情况下，子进程是您的 Ruby 脚本）父进程（shell、系统等）可以等待它完成。

一旦完成，它可以告诉父进程它的执行状态是什么。零通常意味着执行已成功完成并且没有任何错误。

例如，如果您从 bash shell 运行脚本，它会调用，您可以使用变量`Process.exit(0)`检查它是否成功：`$?`

```
$ ./my_ruby.script        # calls Process.exit(0)
$ echo $?
0                         # ok, script finished with no errors. 
```

# ajax - dojo.xhrpost 获取状态码为 0

> ID：15543288
> 
> 赞同：0
> 
> 时间：2013-03-21T09:10:34.960
> 
> 标签：ajax, dojo

我正在提交一个使用 dojo 的 xhrpost。我的应用程序在 ruby​​ on rails 上运行。在控制器中，我正在执行重定向。我将重定向的 URL 存储在响应标头中。我在客户端访问重定向的 URL，然后在客户端加载重定向的 URL。以下是代码。

在视图中，使用 dojo.xhrpost 执行 ajax 提交

```
 function () {
         var form = dojo.byId("form_id");

         dojo.connect(form, "onsubmit", function(event){
          // Stop the submit event since we want to control form submission.
          dojo.stopEvent(event);

          var xhrArgs = {
            form: dojo.byId("form_id"),
            handleAs: "text",
            load: function(data, ioargs){
            //getting redirected url from response header
             var new_url = ioargs.xhr.getResponseHeader("new_url");

             //redirecting to the url  
             document.location.href = new_url;
            },
            error: function(response){
            //handling error
            }
         }

          //submitting for to action1 of controller
         var deferred = dojo.xhrPost(xhrArgs);
      });
    } 
```

控制器中的代码

```
 def action1
          new_url = url_for(:controller=>"controller", :action => "action2")
          #passing the new URL as parameter in the redirection
          redirect_to :action2, :new_url => new_url
        end

        def action2
          #getting the new url from the params and saving it in respone header so that it can be accesses in client
          response.headers["new_url"] = params[:new_url]
        end 
```

这在我的本地主机上运行良好。但是当我把它放在我的服务器上时它失败了。
我将 ioargs.xhr.status 设为“0”。数据是“”。尽管表单正在保存，但响应是空的，并且没有设置响应标头。
请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T17:20:18.143

我不得不稍微修改一下控制器。

```
def action1
  if request.xhr?
    render :json => new_url.to_json
  else
  #follow normal redirection
  redirect_to :action2
end 
```

也在ajax调用中

```
var xhrArgs = {
        form: dojo.byId("form_id"),
        handleAs: "json",
        load: function(data, ioargs){
        //getting redirected url from data 
         document.location.href = data;
        },
        error: function(response){
        //handling error
        } 
```

基本上我发现以不正确的方式返回整个 HTML 页面作为响应。
响应中只应返回 URL，并且应从视图中完成重定向，

# ember.js - 确保用户在 Ember 应用中登录

> ID：15543297
> 
> 赞同：3
> 
> 时间：2013-03-21T09:10:55.413
> 
> 标签：ember.js

确保用户登录 Ember 应用程序的最佳方法是什么？

我想在路由被激发之前拦截任何 URL，显示一个带有 user_id/password 的模式弹出窗口，然后转到原始 URL。

可能类似于 Rail 的 application_controller#before_filter ，它在任何其他控制器方法之前执行。

我有以下路由：

```
App.Router.map(function(){
    this.resource('folder', {path: '/'}, function(){
        this.resource('files', {path: '/:folder_id'}, function(){
            this.route('index');
        });
    });
}); 
```

我正在尝试设置 ApplicationRoute：

```
App.ApplicationRoute = Ember.Route.extend({
    activate: function(){
        console.log("activating app route");
    }
}); 
```

但问题是，如果我点击`index.html#/folder01`，则在路由`folder`之前执行`application`路由。

理想情况下总结工作流程应该如下所示：

1.  用户点击`index.html#/folder01`网址
2.  应用程序检查用户是否登录。如果没有出现模式弹出窗口
3.  登录后，应用程序应呈现`index.html#/folder01`URL

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T07:05:48.603

看起来我找到了一个可行的解决方案。这里是：

```
App.Router.reopen({
    startRouting: function() {
        if (!App.userProfile.get('loggedIn')) {
            $("#login_dialog").modal('show').one('click', "#login_btn", function(){
                $("#login_dialog").modal('hide');
                App.userProfile.set('loggedIn', true);
                App.startRouting();
            });
        } else {
            this._super();
        }
    }
}); 
```

如果 App 检测到会话超时，它会执行`window.location.reload()`. 能工作会很好，`App.reset()`但是afaik它还没有正确实施。

我不是 100% 确定这个解决方案没有内存泄漏等问题。我很想听听 Ember 专家关于这种方法的任何信息。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T19:31:58.023

您可以使用您的路线来完成此操作：

```
App.DatasetEditRoute = Ember.Route.extend({
  redirect: function() {
    if (this.controllerFor('currentUser').get('isSignedIn') === false) {
      this.transitionTo('user.login');
    }
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-10T23:06:50.447

我创建了[userapp-ember](https://github.com/userapp-io/userapp-ember)，它是一个用于用户身份验证的 Ember.js 模块。它适用于[UserApp](https://www.userapp.io/)，但它是开源的，因此您可以根据需要修改它以使用您自己的服务。

为了简要说明我是如何解决问题的：

```
App.ProtectedRouteMixin = Ember.Mixin.create({
  beforeModel: function(transition) {
    // check if the user if authenticated
    if (!isAuthenticated) {
      transition.abort();
      this.transitionTo('login'); // transition to the login route
    }
  }
});

App.IndexRoute = Ember.Route.extend(App.ProtectedRouteMixin); 
```

我使用了一个 mixin 来扩展我想要保护的所有路由。mixin 监听`beforeModel`事件并在用户未登录时中止转换 ( `isAuthenticated`)。然后，您可以显示一个登录弹出窗口，而不是重定向到登录路由。成功登录后，重新加载页面或转换到相同的路由。

# wicket - Wicket 中默认 DateValidator 的自定义错误消息

> ID：15543300
> 
> 赞同：1
> 
> 时间：2013-03-21T09:11:13.147
> 
> 标签：wicket, wicketstuff

我正在使用 DateValidator 类来验证用户输入的日期。我收到了通用错误消息。我可以在不创建单独的 Validator 类的情况下自定义错误消息吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T11:57:52.893

是的，例如，如果您有以下类型的页面。

**我的页面.html**

```
<wicket:page>
    <form wicket:id="form">
        <input type="text" wicket:id="startDate" />
        <input type="text" wicket:id="endDate" />
    </form>
</wicket:page> 
```

然后在 java 类旁边添加一个名为的属性文件`MyPage.properties`，在其中添加以下条目。

**我的页面属性**

```
form.startDate.DateValidator.minimum=<message for minimum startDate>
form.startDate.DateValidator.maximum=<message for maximum startDate>
form.endDate.DateValidator.minimum=<message for minimum endDate>
form.endDate.DateValidator.maximum=<message for maximum endDate> 
```

您可以在反馈消息中使用`${input}`或`${label}`替换变量。

一个好的起点是在[https://cwiki.apache.org/confluence/x/N1IB的 Apache Wicket 的 Wiki](https://cwiki.apache.org/confluence/x/N1IB)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T09:35:38.650

查看 DateValidator的[API 文档，](http://wicket.apache.org/apidocs/1.5/org/apache/wicket/validation/validator/DateValidator.html)我可以看到，基于失败的检票口使用不同的错误键的条件......比如：DateValidator.range、DateValidator.minimum、DateValidator.maximum。您可以使用此键并为这种情况创建自定义错误消息。

# c# - 筛选 Outlook AppointmentItem 给出奇怪的结果

> ID：15543301
> 
> 赞同：3
> 
> 时间：2013-03-21T09:11:15.923
> 
> 标签：c#, outlook, outlook-2010

我尝试使用某种范围`[Start]`：

```
var calendar = outlookApplication.GetNamespace("MAPI").GetDefaultFolder(OlDefaultFolders.olFolderCalendar);

if (calendar == null || calendar.Items == null)
{
   return null;
}

DateTime appointmentStart = new DateTime(2013, 03, 25, 10, 0 ,0);

string filter = string.Format("[Start] > '{0}' And [Start] < '{1}'", appointmentStart.AddMinutes(-1).ToString("g"), appointmentStart.AddMinutes(+1).ToString("g") );
var calendarItems = calendar.Items.Restrict(filter); 
```

我`AppointemtItem`在. `Outlook`_ `25.03.2013`_ `10:00:00`所以我正在等待得到这个 AppointmentItem 作为结果`calendar.Items.Restrict(filter);`

但我变成了 2 个约会项目：

*   正确的

*   还有一个来自 05.04.2012 - 从 2012 年 4**月**5 日（不是 2013 年）开始 10:30:00 和结束 10:40:00

我不明白 05.04.2012 10:30:00 - 10:40:00 有什么关系

过滤 > 25.03.2013 09:59 和 < 25.03.2013 10:01？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T13:58:56.487

使用`Items.IncludeRecurrences`属性 - [MSDN：IncludeRecurrences 属性](http://msdn.microsoft.com/en-us/library/office/aa171434%28v=office.11%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:27:34.827

`AppointmentItem`从 05.04.2012 开始是经常性的。

我不知道为什么它会在之后显示，`calendar.Items.Restrict(filter)`但我的解决方案是检查`IsRecurring`属性。

# python - numpy roll 和掩码数组的奇怪行为

> ID：15543302
> 
> 赞同：1
> 
> 时间：2013-03-21T09:11:17.793
> 
> 标签：python, numpy

我有以下代码（即它只是一个演示我的问题的虚拟代码）

```
#!/usr/bin/python
import numpy as np

#define array, -999 being a missing value
a=np.array([5.,-999.,7.,8.])
print "array:"
print a
print

a=np.ma.masked_values(a,-999.)
print "masked array:"
print a
print

#define new missing value
bad=1e30
a.set_fill_value(bad)

#roll array
a=np.roll(a,1,axis=0)

#plug-in new missing value 
a=a.filled()

print "array after rolling with new missing value (1e30):"
print a 
```

在我使用 numpy 1.4.1 的 32 位机器上，我得到了预期的输出：

```
array:
[   5\. -999\.    7\.    8.]

masked array:
[5.0 -- 7.0 8.0]

array after rolling with new missing value (1e30):
[  8.00000000e+00   5.00000000e+00   1.00000000e+30   7.00000000e+00] 
```

在我的带有 numpy 1.6.1 的 64 位机器上，我得到了

```
[   5\. -999\.    7\.    8.]

masked array:
[5.0 -- 7.0 8.0]

array after rolling with new missing value (1e30):
[  8.00000000e+00   5.00000000e+00   1.00000000e+20   7.00000000e+00] 
```

所以，我对 1e30 的掩码数组的填充值在滚动数组后更改为 1e20。我做错了什么，或者这是一个已知的错误？

拉斐尔

# ios - 如何从 facebook ios sdk 3.1 中提取 facebook 电子邮件？

> ID：15543303
> 
> 赞同：0
> 
> 时间：2013-03-21T09:11:17.827
> 
> 标签：ios, facebook, facebook-ios-sdk

我正在构建一个`webview ios app`使用 facebook 电子邮件。我用谷歌搜索了我的问题，所有这些答案都来自这个函数：

```
 NSArray *permissions = [NSArray arrayWithObjects:@"email", nil];
    return [FBSession openActiveSessionWithReadPermissions:permissions
                                              allowLoginUI:allowLoginUI
                                         completionHandler:^(FBSession *session, FBSessionState state, NSError *error) {
                                             [self sessionStateChanged:session state:state error:error];
                                         }]; 
```

但我想要的不是来自这个的 facebook 电子邮件地址。有什么办法吗？

如果我使用这个功能，我必须登录两次，这有点烦人。如果除此之外没有其他方法可以获取电子邮件地址，有没有办法避免该`login`过程两次？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:49:58.050

是的，您可以使用 iOS 6 内置的 Facebook 帐户（实际上不使用 FB SDK）来接收电子邮件。如果用户已经在 iOS 设置中登录 Facebook，那么只有第一次会提示他允许您的应用访问 FB 帐户。

首先，将其添加到您的界面：

```
#import <Social/Social.h>
#import <Accounts/Accounts.h>

@property (nonatomic, strong) ACAccountStore *accountStore;
@property (nonatomic, strong) ACAccount *facebookAccount; 
```

然后使用它来实现：

```
- (void)getFacebookPermissions
{
    if ([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) {
        // we have facebook account in ios settings
        NSLog(@"Facebook account exists");

        ACAccountType *facebookTypeAccount = [self.accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];

        [self.accountStore requestAccessToAccountsWithType:facebookTypeAccount
                                                   options:@{ACFacebookAppIdKey: *YOUR_FACEBOOK_APP_ID_HERE!*, ACFacebookPermissionsKey: @[@"email"]}
                                                completion:^(BOOL granted, NSError *error) {
                                                    if (granted) {
                                                        self.facebookAccount = [[self.accountStore accountsWithAccountType:facebookTypeAccount] lastObject];

                                                        NSURL *meURL = [NSURL URLWithString:@"https://graph.facebook.com/me"];

                                                        SLRequest *meRequest = [SLRequest requestForServiceType:SLServiceTypeFacebook
                                                                                                  requestMethod:SLRequestMethodGET
                                                                                                            URL:meURL
                                                                                                     parameters:nil];

                                                        meRequest.account = self.facebookAccount;

                                                        [meRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
                                                            if (error) {
                                                                NSLog(@"[ERROR] %@", [error localizedDescription]);
                                                                // or do some error handling
                                                            } else {
                                                                NSError *jsonError;
                                                                NSDictionary *responseJSON = [NSJSONSerialization JSONObjectWithData:responseData
                                                                                                                             options:NSJSONReadingAllowFragments
                                                                                                                               error:&jsonError];
                                                                if (jsonError)
                                                                {
                                                                    NSLog(@"[FB PARSING ERROR] %@", [error localizedDescription]);
                                                                } else {
                                                                    // here it is!
                                                                    NSString *email = [responseJSON objectForKey:@"email"];
                                                                }
                                                            }

                                                        }];

                                                    } else {
                                                        if (error) {
                                                            NSLog(@"[ERROR] %@", [error localizedDescription]);

                                                        }
                                                        else
                                                        {
                                                            NSLog(@"Access to Facebook was not granted. Please go to the device settings and allow access for *YOUR_APP_NAME*");
                                                        }
                                                    }
                                                }];
    } else {
        NSLog(@"There was an error retrieving your Facebook account, make sure you have an account setup in Settings and that access is granted for *YOUR_APP_NAME*");
    }

} 
```

不要忘记创建 AccountStore 的实例并弱链接 Social 和 Accounts 框架。

PS 这是您的 Facebook 应用程序的设置（您可以在顶部看到您的应用程序 ID）： ![在此处输入图像描述](../Images/e2e372ecf7fef400ace67de8d2e7f577.png)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:55:26.793

您可以`+requestForMe`为此使用：

```
-(void)getUserEmail
{
    [[FBRequest requestForMe] startWithCompletionHandler:^(FBRequestConnection *connection, NSDictionary <FBGraphUser> *user, NSError *error){
            if (!error) {
                NSString *email = [user objectForKey:@"email"];
                NSLog(@"email : %@", email);
            }
        }];
} 
```

# python - 'str' 对象在我的骑行中不可调用

> ID：15543307
> 
> 赞同：3
> 
> 时间：2013-03-21T09:11:23.787
> 
> 标签：python

```
for i in range(1, 27):
    temp=str(i)
    print '%s'(temp.zfill(3))

Traceback (most recent call last):
  File "<ipython console>", line 3, in <module>
TypeError: 'str' object is not callable 
```

不知道为什么？</p>

因为我希望输出像这样：

```
001
002 
```

..

```
021 
```

...

所以我用`zfill`. 但是python告诉我这是“`str`对象不可调用”如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T09:13:02.863

你错过`%`了

```
print '%s' % (temp.zfill(3))
           ^ THIS 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T09:12:45.017

```
print '%s'(temp.zfill(3)) 
```

应该

```
print '%s' % temp.zfill(3) 
```

实际上没有必要`%s` 你可以使用

```
print temp.zfill(3) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T09:41:30.637

正如@jamylak 和@NPE 指出的那样，您忘记了`%`操作员，实际上您不需要它。

但是，如果您想进行字符串格式化，您应该考虑使用[str.format](http://docs.python.org/2/library/stdtypes.html#str.format)，因为它优于使用`%`：

```
for i in range(1, 27):
    print '{0:0{1}}'.format(i, 3) 
```

# elasticsearch - elasticsearch按数组字段的大小过滤

> ID：15543308
> 
> 赞同：64
> 
> 时间：2013-03-21T09:11:28.933
> 
> 标签：elasticsearch

如何过滤具有数组字段且具有 N 个以上元素的文档？

如何过滤具有空数组字段的文档？

方面是解决方案吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-03-21T13:25:23.097

我会看看[脚本过滤器](http://www.elasticsearch.org/guide/reference/query-dsl/script-filter.html)。以下过滤器应仅返回字段中至少包含 10 个元素的文档，该`fieldname`字段是一个数组。请记住，这可能会很昂贵，具体取决于您的索引中有多少文档。

```
"filter" : {
    "script" : {
        "script" : "doc['fieldname'].values.length > 10"
    }
} 
```

关于第二个问题：你那里真的有一个空数组吗？或者它只是一个没有值的数组字段？您可以使用[缺少的过滤器](http://www.elasticsearch.org/guide/reference/query-dsl/missing-filter.html)来获取对特定字段没有值的文档：

```
"filter" : {
    "missing" : { "field" : "user" }
} 
```

否则我猜你需要再次使用脚本，类似于我上面建议的，只是输入不同的长度。如果长度是恒定的，我会将它放在`params`部分中，以便脚本将被 elasticsearch 缓存并重用，因为它总是相同的：

```
"filter" : {
    "script" : {
        "script" : "doc['fieldname'].values.length > params.param1"
        "params" : {
            "param1" : 10
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-02-09T17:42:46.320

javanna 的答案在 Elasticsearch 1.3.x 和更早版本上是正确的，因为 1.4 的默认脚本模块已更改为[groovy](http://groovy-lang.org/)（原为[mvel](http://mvel.codehaus.org/)）。

回答OP的问题。

在 Elasticsearch 1.3.x 及更早版本上，使用以下代码：

```
"filter" : {
    "script" : {
        "script" : "doc['fieldname'].values.length > 10"
    }
} 
```

在 Elasticsearch 1.4.x 及更高版本上，使用以下代码：

```
"filter" : {
    "script" : {
        "script" : "doc['fieldname'].values.size() > 10"
    }
} 
```

此外，在 Elasticsearch 1.4.3 及更高版本上，由于安全问题，您需要启用动态脚本，因为它已被默认禁用。请参阅：[https ://www.elastic.co/guide/en/elasticsearch/reference/1.4/modules-scripting.html](https://www.elastic.co/guide/en/elasticsearch/reference/1.4/modules-scripting.html)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-05-14T07:33:44.490

仍然在这里发布与我相同情况的人。假设您的数据如下所示：

```
{
    "_source": {
        "fieldName" : [
            {
                "f1": "value 11",
                "f2": "value 21"
            },
            {
                "f1": "value 12",
                "f2": "value 22"
            }
        ]
    }
} 
```

然后以长度 > 1 进行过滤`fieldName`，例如：

```
"query": {
    "bool" : {
        "must" : {
            "script" : {
                "script" : {
                    "inline": "doc['fieldName.f1'].values.length > 1",
                    "lang": "painless"
                 }
            }
        }
    }
} 
```

脚本语法与 ES 5.4 文档[https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-script-query.html](https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-script-query.html)一样。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-05-25T09:29:13.453

恕我直言，使用脚本按大小过滤数组的正确方法是：

```
"filter" : {
    "script" : {
        "script" : "_source.fieldName.size() > 1"
    }
} 
```

如果我按照@javanna 的建议那样做，它会抛出异常`groovy.lang.MissingPropertyException: No such property: length for class: java.lang.String`

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-08-26T22:59:14.183

如果您有一组未映射为的***对象***`nested`，请记住 Elastic 会将它们展平为：

```
attachments: [{size: 123}, {size: 456}] --> attachments.size: [123, 456] 
```

因此，您希望将您的字段引用为`doc['attachments.size'].length`，而不是`doc['attachments'].length`，这是非常违反直觉的。

对`doc.containsKey(attachments.size)`.

该`.values`部分已弃用，不再需要。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-05-27T11:16:33.637

基于此： [https ://code.google.com/p/guava-libraries/source/browse/guava/src/com/google/common/collect/RegularImmutableList.java?r=707f3a276d4ea8e9d53621d137febb00cd2128da](https://code.google.com/p/guava-libraries/source/browse/guava/src/com/google/common/collect/RegularImmutableList.java?r=707f3a276d4ea8e9d53621d137febb00cd2128da)

关于lisak在这里的回答。

有 size() 函数返回列表的长度：

```
"filter" : {
    "script" : {
        "script" : "doc['fieldname'].values.size() > 10"
    }
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-05-04T03:24:40.607

最简单的方法是“非规范化”您的数据，以便您拥有一个包含计数和布尔值（如果存在或不存在）的属性。然后你可以搜索这些属性。

例如：

```
{
   "id": 31939,
   "hasAttachments": true,
   "attachmentCount": 2,
   "attachments": [
      {
         "type": "Attachment",
         "name": "txt.txt",
         "mimeType": "text/plain"
      },
      {
         "type": "Inline",
         "name": "jpg.jpg",
         "mimeType": "image/jpeg"
      }
   ]  
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-01-16T08:53:31.247

当您需要查找包含某个大小/长度应大于零的字段的文档时，[@javanna](https://stackoverflow.com/a/15548868/1987830)给出了正确答案。我只想添加如果您的**字段是文本字段**并且您想查找包含该字段中某些文本的文档，您不能使用相同的查询。您将需要执行以下操作：

```
GET index/_search 
{
    "query": {
        "bool": {
            "must": [
                {
                    "range": {
                        "FIELD_NAME": {
                            "gt": 0
                        }
                    }
                }
            ]
        }
    }
} 
```

这不是这个问题的确切答案，因为答案已经存在，但是我遇到了类似问题的解决方案，所以也许有人会发现它很有用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-01-19T10:26:46.040

关于第二个问题的建议：

> 如何过滤具有空数组字段的文档？

```
{
  "query": {
    "bool": {
      "must_not": {
        "exists": {
          "field": "fieldname"
        }
      }
    }
  }
} 
```

将返回带有空`fieldname: []`数组的文档。`must`（而不是`must_not`会返回相反的）。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2022-01-06T17:05:04.270

这对我有用：

```
GET index/search {
    "query": {
       "bool": {
          "filter" : {
             "script" : {
                "script" : "doc['FieldName'].length > 10"
                }
            }
         }
       }
} 
```

# c# - 带有openxml的Excel文件，在单个工作簿中有多个工作表

> ID：15543313
> 
> 赞同：3
> 
> 时间：2013-03-21T09:11:34.800
> 
> 标签：c#, openxml, spreadsheetml

我正在尝试将数据插入到多个工作表中。对于我的 excel，我有两张表格，分别是“图表”和“图表数据”。我能够更新 sheet2、chartdata 表中的数据，但我无法将数据插入到 sheet1。这是我尝试将数据插入到 Excel 工作表中的代码。这里的数据来自数据库。

```
 double ticks = DateTime.Now.Ticks;
         // MarketAnalysis ms = new MarketAnalysis();
         //ms.Marketanalysis();

        File.Copy(Srcpath, @"E:\Works\OpenXML\DownloadTemplates\ExcelGenerated" + ticks + ".xlsx", true);
         using (SpreadsheetDocument myworkbok = SpreadsheetDocument.Open(@"E:\Works\OpenXML\DownloadTemplates\ExcelGenerated" + ticks + ".xlsx", true))
         {
             //Acess the main workbook which contain all the references

            WorkbookPart workbookpart = myworkbok.WorkbookPart;
             //Get sheet by name
             Sheet sheet = workbookpart.Workbook.Descendants<Sheet>().Where(s => s.Name == "ChartData").FirstOrDefault();

            //Worksheet Part by ID
             WorksheetPart worksheetpart = workbookpart.GetPartById(sheet.Id) as WorksheetPart;

            //Sheet data contains all the data
             SheetData sheetdata = worksheetpart.Worksheet.GetFirstChild<SheetData>();
             DataSet ds = db.Chart1Data();

              for (int i = 0; i < ds.Tables[0].Rows.Count; i++)
             {
                 //  if (ds.Tables[0].Rows !=DBNull)
                 //{

                string Rowlabel = ds.Tables[0].Rows[i][0].ToString();
                 // float? FY13Actuval = Convert.ToInt32(ds.Tables[0].Rows[i][1]);

                if (!string.IsNullOrEmpty(ds.Tables[0].Rows[i][1].ToString()))
                 {
                     // string s = ds.Tables[0].Rows[i][1].ToString();
                     //FY13Actuval=float.Parse(ds.Tables[0].Rows[i][1].ToString());

                    FY13Actuval = Convert.ToDouble(ds.Tables[0].Rows[i][1].ToString());
                 }
                 else
                 {

                    FY13Actuval = null;
                 }

                double? Budget = Convert.ToDouble(ds.Tables[0].Rows[i][2].ToString());
                 double? Actuval = Convert.ToDouble(ds.Tables[0].Rows[i][3].ToString());
                 Row contentrow = CreateContentRow(index, Product, Actual, Budget, Forecast);

                index++;
                 sheetdata.AppendChild(contentrow);

                // }
             }
 .......Same code for the other 3 charts
 Sheet sheet1 = workbookpart.Workbook.Descendants<Sheet>().Where(s => s.Name == "Charts").FirstOrDefault();

            WorksheetPart worksheetpart1 = workbookpart.GetPartById(sheet1.Id) as WorksheetPart;

            //Sheet data contains all the data
             SheetData sheetdata1 = worksheetpart1.Worksheet.GetFirstChild<SheetData>();

            DataSet dsTbl = db.Table();
             int SCMTblIndex=5;
             for (int i = 0; i < dsTbl.Tables[0].Rows.Count; i++)
             {
                 Row tblRow = CreateScorecardMetricTblRow(SCMTblIndex, dsTbl.Tables[0].Rows[i][0].ToString(),
                                                                    dsTbl.Tables[0].Rows[i][1].ToString(),
                                                                    dsTbl.Tables[0].Rows[i][2].ToString());
                 SCMTblIndex++;
                 sheetdata1.AppendChild(tblRow);
             }

                myworkbok.WorkbookPart.Workbook.Save();
         } 
```

以及创建单元格的方法：

```
public static string[] headerColumns = new string[]{ "A", "B", "C", "D", "E", "F", "G", "I", "J" };
public static string[] header = new string[] { "D", "E", "F" };

private static Row CreateContentRow(int index, string Product, double? Actual, double? Budget, double? Forecast)
     {

        //Create New ROw
         Row r = new Row();
         r.RowIndex = (UInt32)index;

        //Begin colums
         Cell c0 = new Cell();
         c0.CellReference = headerColumns[0] + index;
         CellValue v0 = new CellValue();
         v0.Text = Product;
         c0.AppendChild(v0);
         r.AppendChild(c0);

        Cell c1 = new Cell();
         c1.CellReference = headerColumns[1] + index;
         CellValue v1 = new CellValue();
         v1.Text = Actual.ToString();
         c1.AppendChild(v1);
         r.AppendChild(c1);

        Cell c2 = new Cell();
         c2.CellReference = headerColumns[2] + index;
         CellValue v2 = new CellValue();
         v2.Text = Budget.ToString();
         c2.AppendChild(v2);
         r.AppendChild(c2);

        Cell c3 = new Cell();
         c3.CellReference = headerColumns[3] + index;
         CellValue v3 = new CellValue();
         v3.Text = Forecast.ToString();
         c3.AppendChild(v3);
         r.AppendChild(c3);

        return r;

    }
public static Row CreateScorecardMetricTblRow(int index, string Act_Data, string Bud_Data, string VarPr_Data)
     {
         Row r = new Row();
         r.RowIndex = (UInt32)index;
         //Begin Colums

        Cell c0 = new Cell();
         c0.CellReference = header[0] + index;
         CellValue v0 = new CellValue();
         v0.Text = Act_Data;
         c0.AppendChild(v0);
         r.AppendChild(c0);

        Cell c1 = new Cell();
         c1.CellReference = header[1] + index;
         CellValue v1 = new CellValue();
         v1.Text = Bud_Data;
         c1.AppendChild(v1);
         r.AppendChild(c1);

        Cell c2 = new Cell();
         c2.CellReference = header[2] + index;
         CellValue v2 = new CellValue();
         v2.Text = VarPr_Data;
         c2.AppendChild(v2);
         r.AppendChild(c2);
          return r;
     } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T04:47:14.373

只更新多张工作表

```
// Open the document for editing.
using (SpreadsheetDocument spreadSheet = SpreadsheetDocument.Open(docName, true)) 
{

   // Insert code here.

} 
```

为需要更新工作表单元格值的两个工作表创建两个类。对于每个类构造函数，传递**SpreadsheetDocument**对象并实现[将文本插入电子表格文档中的单元格。只需](http://msdn.microsoft.com/en-us/library/office/cc861607.aspx)避免插入新工作表的代码并尝试插入仅限单元格代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-14T08:08:21.710

你可以试试这个方法.....它可能会有所帮助..

```
 private static Cell InsertCellInWorksheet(string columnName, int rowIndex, WorksheetPart worksheetPart)
    {
        Worksheet worksheet = worksheetPart.Worksheet;
        SheetData sheetData = worksheet.GetFirstChild<SheetData>();
        string cellReference = columnName + rowIndex;

        Alignment alignment1 = new Alignment() { WrapText = true };

        // If the worksheet does not contain a row with the specified row index, insert one.
        Row row;
        row = new Row() { RowIndex = 3, StyleIndex = 1 };
        if (sheetData.Elements<Row>().Where(r => r.RowIndex == rowIndex).Count() != 0)
        {
            row = sheetData.Elements<Row>().Where(r => r.RowIndex == rowIndex).First();
        }
        else
        {
            row = new Row() { RowIndex = Convert.ToUInt32(rowIndex) };
            sheetData.Append(row);
        }

        // If there is not a cell with the specified column name, insert one.  
        if (row.Elements<Cell>().Where(c => c.CellReference.Value == columnName + rowIndex).Count() > 0)
        {
            Row row2;
            row2 = new Row() { RowIndex = 3, StyleIndex = 1 };
            Cell rCell = null;
            foreach (Cell celld in row.Elements<Cell>())
            {
                if (string.Compare(celld.CellReference.Value, "A3", true) > 0)
                {
                    rCell = celld;
                    break;
                }
            }

            // Add the cell to the cell table at A1.
            Cell newCell = new Cell() { CellReference = "C3" };
            //Cell newCell1 = new Cell() { CellReference = "D3" };
            row.InsertBefore(newCell, rCell);
            //row.InsertBefore(newCell1, rCell);

            // Set the cell value to be a numeric value of 100.
            newCell.CellValue = new CellValue("#GUIDeXactLCMS#");
            //newCell1.CellValue = new CellValue("EN");
            newCell.DataType = new EnumValue<CellValues>(CellValues.Number);

            return row.Elements<Cell>().Where(c => c.CellReference.Value == cellReference).First();
        }
        else
        {
            // Cells must be in sequential order according to CellReference. Determine where to insert the new cell.
            Cell refCell = null;
            foreach (Cell cell in row.Elements<Cell>())
            {
                if (string.Compare(cell.CellReference.Value, cellReference, true) > 0)
                {
                    //string val = cell.CellReference.Value;
                    refCell = cell;
                    break;
                }
            }

            Cell newCell = new Cell() { CellReference = cellReference };
            row.InsertBefore(newCell, refCell);

            return newCell;

        }
        worksheet.Save();
    } 
```

# sharepoint - Access 2010、SharePoint 列表、ASP

> ID：15543315
> 
> 赞同：0
> 
> 时间：2013-03-21T09:11:53.287
> 
> 标签：sharepoint, asp-classic, ms-access-2010

我有一个访问 2010 数据库，它链接到`Sharepoint list`. 我有一个 ASP 页面，它正在查询数据库并在网页上显示数据。页面每 30 秒自动刷新一次，并且有 4 个并发用户。

用户抱怨经常出现以下错误，这阻止了他们有效地使用网页，并阻止他们完成日常工作。

> Microsoft Access 数据库引擎错误“80004005”数据库已被计算机“服务器名”上的用户“用户名”置于阻止它被打开或锁定的状态。

如何解决此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:19:09.347

你可以参考[这个](http://support.microsoft.com/kb/306269)和微软的[这篇](http://support.microsoft.com/kb/926939)文章。我希望它真的会有所帮助

此外，您还可以参考[this](http://www.iis.net/learn/application-frameworks/running-classic-asp-applications-on-iis-7-and-iis-8/using-classic-asp-with-microsoft-access-databases-on-iis)

# tfs - 是否有可以直接向组发送代码审查请求的设置？

> ID：15543318
> 
> 赞同：1
> 
> 时间：2013-03-21T09:11:58.373
> 
> 标签：tfs, tfs-code-review

我刚开始使用 TFS 代码审查插件，它看起来不错。

我想知道是否有任何这样的设置可以直接将代码审查请求发送到组{而不是手动添加每个成员}

在此之前将是另一个问题。我们可以在 TFS 中进行组级别设置吗？就像我们在 Outlook 和其他应用程序中一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T02:45:15.977

我认为您必须为此拥有 Collaborator。TFS 的代码审查功能并没有那么强大...

# javascript - How can I replace the content of a div when I drag and drop

> ID：15543320
> 
> 赞同：0
> 
> 时间：2013-03-21T09:12:06.160
> 
> 标签：javascript, drag-and-drop

How can I drag and replace the content when I drop; in this example: [http://jsbin.com/uvihox/5/edit](http://jsbin.com/uvihox/5/edit) ?

```
function allowDrop(ev){
  ev.preventDefault();
}

function drag(ev){
  ev.dataTransfer.setData("Text",ev.target.id);
}

function drop(ev){
  ev.preventDefault();
  var data=ev.dataTransfer.getData("Text");
  ev.target.appendChild(document.getElementById(data));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:21:49.437

try this:

```
function drop(ev){
    ev.preventDefault();
    var data=ev.dataTransfer.getData("Text");
    var s=document.getElementById(data);
    ev.target.appendChild(s);
    ev.target.src=s.src;
} 
```

update your drop function like this. basically, you need to update the src of dropped img. It works for now.

[updated fiddle](http://jsfiddle.net/manishmishra256/z32Pb/)

# iphone - 选择 UITableView 中的所有单元格，甚至是 iOS 中的不可见单元格

> ID：15543324
> 
> 赞同：2
> 
> 时间：2013-03-21T09:12:24.333
> 
> 标签：iphone, ios, uitableview, selectall

我有一个方法 selectAll 来选择我的所有单元格`UITableView`。此方法检查一个复选框`(UIButton)`。它仅适用于`"visible"`细胞，但不适用于`"invisible"`细胞！

这是我的方法：

```
- (IBAction)selectAll:(id)sender {

    for (NSInteger s = 0; s < self.tableView.numberOfSections; s++) {
        for (NSInteger r = 0; r < [self.tableView numberOfRowsInSection:s]; r++) {

            CustomCell *cell = [self.tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:r inSection:s]];

            if(!cell.checkbox.selected){
                cell.checkbox.selected = !cell.checkbox.selected;
                cell.account.checked = cell.checkbox.selected;
            }

        }
    }   
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T09:25:17.363

从文档中：

```
cellForRowAtIndexPath: 
```

返回值：

> 表示表格单元格`nil if the cell is not visible`或 indexPath 的对象超出范围。

您可以创建一个数组，其中包含选中或未选中的布尔值列表，并在单元格可见时对其进行询问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:15:30.180

您需要在 " " 方法中选中或取消选中单元格的 " `selected`" 或 " `checked`" 状态`cellForRowAtIndexPath`。底层数据源是另一个地方，您可以在其中跟踪您尝试在单元格中表示的数据的状态。

通过这个函数简单地修改 UITableViewCells 只会更新当前在表格视图中可见的单元格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T09:27:43.967

在 cellForRowAtIndexPath 中检查它。只需使用合适的 indexPath.section 检查 if 条件

```
if (indexPath.section== add the section){
cell.accessoryType = UITableViewCellAccessoryCheckmark;
}
else{
cell.accessoryType = UITableViewCellAccessoryNone;
} 
```

# php - 我想使用 PHP 从 wanabee XML 文件中删除无效字符

> ID：15543326
> 
> 赞同：1
> 
> 时间：2013-03-21T09:12:30.293
> 
> 标签：php, xml

我想从从 Web 获取的 HTML 文件中删除无效字符，以将其更改为 XML 格式。

我无法更改源代码，手动操作也不是一种选择，因为我每天必须处理数百个文件。

在某些 HTML 文件出现一个使代码无效的特殊字符之前，我一直做得很好。

当我加载伪装的 XML 文件时，我从浏览器收到警告

```
"This page contains the following errors:

error on line 137 at column 1: PCDATA invalid Char value 7
Below is a rendering of the page up to the first error." 
```

在使用文本编辑器挖掘无效字符后，我发现：⟩，一个显然名为：[&rang、&lang](http://tunes.org/wiki/html_20special_20characters_20and_20symbols.html)或[●](http://bundlr.com/b/special-characters)的字符，这导致了问题。

我试图用 PHP 删除它，但不起作用。

```
//create arrays 
$find = array ('#&nbsp;#','#list#','#&rang;#'); 
$replace = array ('','',''); 

//replace with array values 
$list = preg_replace($find, $replace, $boletin_saveAsXml); 
```

任何建议将不胜感激:)

# java - 在android中获取json时控制空值

> ID：15543333
> 
> 赞同：1
> 
> 时间：2013-03-21T09:12:46.967
> 
> 标签：java, android, android-asynctask, nullpointerexception, rest-client

我在获取 json（空值）时收到此错误：

```
03-21 12:32:02.918: E/AndroidRuntime(20383): FATAL EXCEPTION: AsyncTask #2
03-21 12:32:02.918: E/AndroidRuntime(20383): java.lang.RuntimeException: An error occured while executing doInBackground()
03-21 12:32:02.918: E/AndroidRuntime(20383):    at android.os.AsyncTask$3.done(AsyncTask.java:299)
03-21 12:32:02.918: E/AndroidRuntime(20383):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
03-21 12:32:02.918: E/AndroidRuntime(20383):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
03-21 12:32:02.918: E/AndroidRuntime(20383):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
03-21 12:32:02.918: E/AndroidRuntime(20383):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
03-21 12:32:02.918: E/AndroidRuntime(20383):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
03-21 12:32:02.918: E/AndroidRuntime(20383):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
03-21 12:32:02.918: E/AndroidRuntime(20383):    at java.lang.Thread.run(Thread.java:856)
03-21 12:32:02.918: E/AndroidRuntime(20383): Caused by: java.lang.NullPointerException
03-21 12:32:02.918: E/AndroidRuntime(20383):    at Dic.proj.pkg.notifService$check_last_asyn.doInBackground(notifService.java:253)
03-21 12:32:02.918: E/AndroidRuntime(20383):    at Dic.proj.pkg.notifService$check_last_asyn.doInBackground(notifService.java:1)
03-21 12:32:02.918: E/AndroidRuntime(20383):    at android.os.AsyncTask$2.call(AsyncTask.java:287)
03-21 12:32:02.918: E/AndroidRuntime(20383):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
03-21 12:32:02.918: E/AndroidRuntime(20383):    ... 4 more 
```

这是我的 check_last_asyn AsynTask：

```
// check if notification is available asyntask
class check_last_asyn extends AsyncTask<Void, Integer, Boolean> {
    @Override
    protected Boolean doInBackground(Void... arg0) {

        if(isOnline()){
        RestClient client = new RestClient(
                "http://mysite.org/api/check_last.php");
        client.AddParam("last", String.valueOf(last_notif_no));
        try {
            client.Execute(RequestMethod.GET);
        } catch (Exception e) {
            e.printStackTrace();
        }
        String response = client.getResponse();
        if(!response.equals(null)){
            update_response = response;
        }else{
            update_response= "{'update':'no'}";
        }
        }
        return true;
    }
} 
```

我知道这是因为空值，但我不知道如何在这段代码中控制空值...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:15:48.650

检查应该是这样的：

```
if(response != null && !response.equals("")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T09:18:00.870

这应该做

```
if(response!=null && !(response.trim()).equals("")){
    update_response = response;
}else{
    update_response= "{'update':'no'}";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T09:18:57.767

我认为，`String responce`var 可能为空，所以只需添加对空值的检查：

```
String responce = client.getResponce();

if (responce == null) {
    // As flag, which represents, that there is no answer from service
    // Or other logic
    return false; 
}

// your code 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T09:19:13.803

你可以控制喜欢

```
if(!TextUtils.isEmpty(response)){
        try {
                JSONObject  jobj =  new JSONObject(response);               
                String stolan_id = null;
                Boolean bstolan_id = jobj.has("keyhere");
                if(bstolan_id){             
                    stolan_id = jobj.getString("keyhere"); 
                }
       } catch (JSONException e) {
                e.printStackTrace();
            }

    } 
```

# c - POSIX 正则表达式未编译

> ID：15543341
> 
> 赞同：1
> 
> 时间：2013-03-21T09:13:08.830
> 
> 标签：c, regex, pattern-matching, posix, ip-address

我有此代码用于匹配 IP 地址模式。但它似乎不起作用，我不知道为什么。它总是在终端上打印“不匹配”

```
 regex_t regex;
    int reti;
    char msgbuf[100];
    reti = regcomp(&regex, "^([0-9]{1,3}).([0-9]{1,3}).([0-9]{1,3}).([0-9]{1,3})$", 0);
    if (reti) {
        fprintf(stderr, "Could not compile regex\n"); 
        exit(1);
    }

    reti = regexec(&regex, "124.168.21.3", 0, NULL, 0);
    if (!reti) {
        puts("Match");
    } else if (reti == REG_NOMATCH) {
        puts("No match");
    } else {
        regerror(reti, &regex, msgbuf, sizeof(msgbuf));
        fprintf(stderr, "Regex match failed: %s\n", msgbuf);
        exit(1);
    }
    regfree(&regex); 
```

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:26:58.070

找到了，其实我应该把[regcomp](http://pubs.opengroup.org/onlinepubs/009695399/functions/regcomp.html)函数的cflags字段指定为REG_EXTENDED而不是0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:14:26.357

你应该避开这些点。而且您可能不需要捕获组。代替

```
"^([0-9]{1,3}).([0-9]{1,3}).([0-9]{1,3}).([0-9]{1,3})$" 
```

和

```
"^[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}$" 
```

# c++ - 选择与数组中第 n 个元素对应的字符串

> ID：15543348
> 
> 赞同：0
> 
> 时间：2013-03-21T09:13:22.790
> 
> 标签：c++, arrays, map

我在这里遇到了一个非常烦人的问题。我在这个挑战中的目标是返回一个数组，其中包含按数量计算的 5 个最活跃买家的名称。stockSymbols 持有这些名称，而购买的总数已成功计算并放入 totalBought 数组。然后，我尝试找出前 5 个最大的并将他们的名字放入 totalSold 并返回。

我是 C++ 的绝对新手，所以我知道这种做事方式是不正确的。它也不会编译，它会在所有地方抛出内存错误（从 if(biggest[0] < totalBought[i]) 行开始或周围开始）。

如果你们中的任何人知道成功完成这项工作的更好方法，我将不胜感激您的意见，或者如果您知道如何使这种方式工作，那也将非常有用。不过，我真的很想找到最有效的方法（就速度而言）来计算它。

非常感谢。

```
string* Analyser::topFiveBuyers()
{
    // Your code
string* totalSold;
totalSold = new string[5];

    string stockSymbols[] = {"W Buffet", "P Lynch", "G Soros", "J Neff", "Hargreaves Lansdown",
        "Sippdeal", "Saga", "Halifax", "iWeb", "Alliance Trust", "Clubfinance", "Lloyds TSB", "Saxo" };

    int totalBought[13];

    for(int i = 0; i < nTransactions; i++)
    {
        for(int j = 0; j < 13; j++)
        {
            if(transArray[i].buyerName == stockSymbols[j])
            {
                totalBought[j] += transArray[i].numShares;
            }
        }
    }

    int biggest[] = {-1, -1, -1, -1, -1};

    for(int i = 0; i < 13; i++)
    {
        if(biggest[0] < totalBought[i])
        {
            biggest[4] = biggest[3];
            biggest[3] = biggest[2];
            biggest[2] = biggest[1];
            biggest[1] = biggest[0];
            biggest[0] = totalBought[i];
            totalSold[0] = stockSymbols[i];
        }
        else if(biggest[1] < totalBought[i])
        {
            biggest[4] = biggest[3];
            biggest[3] = biggest[2];
            biggest[2] = biggest[1];
            biggest[1] = totalBought[i];
            totalSold[1] = stockSymbols[i];
        }
        else if(biggest[2] < totalBought[i])
        {
            biggest[4] = biggest[3];
            biggest[3] = biggest[2];
            biggest[2] = totalBought[i];
            totalSold[2] = stockSymbols[i];
        }
        else if(biggest[3] < totalBought[i])
        {
            biggest[4] = biggest[3];
            biggest[3] = totalBought[i];
            totalSold[3] = stockSymbols[i];
        }
        else if(biggest[4] < totalBought[i])
        {
            biggest[4] = totalBought[i];
            totalSold[4] = stockSymbols[i];
        }
    }

    return totalSold;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:42:37.480

我建议使用组合地图和多地图来实现您想要的。我冒昧地将函数的结果更改为字符串向量，老实说应该是：

```
std::vector<string> Analyzer::topFiveBuyers()
{
    typedef map<string, int> xact_map;
    xact_map xacts;
    for (int i=0;i<nTransactions;++i)
        xacts[transArray[i].buyerName] += transArray[i].numShares;

    // enumerate the map, beginning to end, throwing all elements
    //  into a multimap keyed by transaction count rather than name.
    //  note this considers an element "less" (and therefore at the
    //  beginning of the sort order) if the share count is *greater*.

    typedef multimap<int, string, std::greater<int>> highest_map;
    highest_map highest;
    for (xact_map::const_iterator it=xacts.begin(); it != xacts.end(); ++it)
        highest.insert(highest_map::value_type(it->second, it->first));

    // now just peel off the top five elements from the multimap.
    vector<string> results;
    int n=0;
    for (highest_map::const_iterator it=highest.begin(); 
         it != highest.end() && n<5; ++it,++n)
    {
        results.push_back(it->second);
    }

    return results;
} 
```

# c - C中通过TCP / IP套接字的串行数据

> ID：15543349
> 
> 赞同：0
> 
> 时间：2013-03-21T09:13:24.863
> 
> 标签：c, sockets, serial-port

我创建了一个 TCP/IP 套接字作为服务器工作，我的意思是，它等待确定端口上的连接。我的以下任务是能够通过该套接字从连接到我的系统的串行设备发送串行数据。总而言之，一旦服务器套接字接受连接，我需要通过该套接字发送来自连接到系统的串行设备的串行数据。

我以前从未在 C 中使用过串行数据，所以我想知道如何开始，或者是否有人可以向我推荐一个可以找到一些有用信息的地方。谢谢你。

# nginx - Subdomains, nginx and godaddy

> ID：15543350
> 
> 赞同：4
> 
> 时间：2013-03-21T09:13:26.280
> 
> 标签：nginx, subdomain

Here are the preconditions:

*   I've registered domain `example.com` in godaddy.
*   I run a Tomcat on `8080` port with a couple of applications. 8080 port is hidden to the world.
*   I want to map `subdomain.example.com` to `server:8080/subdomain`. I want it be possible to do similar mappings (`subdomain2.example.com` to `server:8080/anotherContext`, for example) in the future.
*   `example.com` should be mapped to `server:8080/mainPageApp`
*   All other applications should be accesible via their context: `example.com/app` -> `server:8080/app`.

For now, I've only configured godaddy (I do not know if this is good):

![Godaddy domain config](../Images/2fd716724a69c6861fca904869cee0a1.png)

Can you help me with nginx config for this case? Here is mine, but it sends infinite redirects:

```
server {
    listen       80;
    server_name  localhost;

    location / {
        root   html;
        index  index.html;
    }
}
server {
    listen       80;
    server_name  subdomain.localhost;

    location / {
        proxy_pass http://127.0.0.1:8080/subdomain;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T00:49:13.297

Ok. I got this work. Not sure the solution is correct but:

First I need to setup a subdomain in Tomcat. [Here is the answer I was inspired with.](https://stackoverflow.com/a/3708876/750510)

```
<Host name="subdomain.example.com" appBase="webapps" unpackWARs="true" autoDeploy="true">
    <Context path="" docBase="subdomain" />
</Host> 
```

Then, configure nginx with:

```
server {
    listen       80;
    server_name  example.com;

    location / {
        root   /path/to/domain/root;
        index  index.html;
    }
}

server {
    listen       80;
    server_name  subdomain.example.com;

    location / {
        proxy_pass        http://subdomain.example.com:8080;
        proxy_set_header  Host             $http_host;
        proxy_set_header  X-Real-IP        $remote_addr;
        proxy_set_header  X-Forwarded-For  $proxy_add_x_forwarded_for;
    }
} 
```

Domain config remains as in the question - it is good.

And finally I just put `subdomain.war` to the `webapp` directory of my Tomcat and it works like a charm!

# ios - IOS - oauth2.0 与 google oauth 库的 Linkedin 集成 - 出现 404 错误（找不到页面）

> ID：15543355
> 
> 赞同：2
> 
> 时间：2013-03-21T09:13:44.927
> 
> 标签：ios, oauth-2.0, linkedin

我在 IOS 中使用 google OAuth2.0 进行 LinkedIn 集成。但是当应用程序尝试获取访问令牌时出现 404 错误。你能看看它并给我一些指导吗？提前致谢

我已经跟踪了请求并将它们放在下面：

1.  生成授权码，http请求如下： [https://www.linkedin.com/uas/oauth2/authorization?client_id=dqabmvt35aee&redirect_uri=http%3A%2F%2Fwww.google.com%2FOAuthCallback&response_type=code&scope=r_emailaddress&state=DCEEFWF45453sdffef424](https://www.linkedin.com/uas/oauth2/authorization?client_id=dqabmvt35aee&redirect_uri=http%3A%2F%2Fwww.google.com%2FOAuthCallback&response_type=code&scope=r_emailaddress&state=DCEEFWF45453sdffef424)

2.  然后获取重定向 URI，如： [http://www.google.com/OAuthCallback?code=AQRnqUBueoz5jZqolVl5suiUQFnLExkmRQSOdndgFK59t4cKC4EjUm38zTbXjDvLwWItUrYrXnOt6KRxTz_SZ5m0Qq3t9rZHG1q-aqltb79m7ZWF4K2Y&stateffefDCEEF7ZWJ5K2Y&state](http://www.google.com/OAuthCallback?code=AQRnqUBueoz5jZqolVl5suiUQFnLExkmRQSOdndgFK59t4cKC4EjUm38zTbXjDvLwWItUrYrXnOt6KRxTz_SZ5m0Qq3t9rZHG1q-aqltb79m7ZJ5K2Y&state=DCEEFWF45453sdffef424)

3.  执行后请求得到的accessToken [https://www.linkedin.com/uas/oauth2/accessToken/](https://www.linkedin.com/uas/oauth2/accessToken/) 要求身体像：CLIENT_ID = dqabmvt35aee＆client_secret = tlsAaUCZ5XtrTfHz＆代码= AQRnqUBueoz5jZqolVl5suiUQFnLExkmRQSOdndgFK59t4cKC4EjUm38zTbXjDvLwWItUrYrXnOt6KRxTz_SZ5m0Qq3t9rZHG1qaqltb79m7ZJ5K2Y＆grant_type = authorization_code＆REDIRECT_URI =的http％3A％2F％2Fwww.google .com%2FOAuthCallback

并在这里得到 404 错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T12:55:03.827

最后我自己想通了。导致此问题的原因与访问令牌 URL 有关。我有导致此问题的此 URL 的 SLASH 结尾。在 google oauth 2.0 库中，我们应该将 accesstoken url 设置为“ [https://www.linkedin.com/uas/oauth2/accessToken](https://www.linkedin.com/uas/oauth2/accessToken) ”，而不应该是“ [https://www.linkedin.com/uas/oauth2/accessToken /](https://www.linkedin.com/uas/oauth2/accessToken/) "

# c#-4.0 - C# 中此代码在 C++ 中的等效代码

> ID：15543363
> 
> 赞同：1
> 
> 时间：2013-03-21T09:14:07.943
> 
> 标签：c#-4.0, memory-management, bluetooth-lowenergy

我是 C# 的新手，所以对你们中的许多人来说可能看起来很简单，但我在这里需要帮助。我必须在 c# 中创建一个桌面应用程序，该应用程序连接到蓝牙低功耗设备并使用[设置特征值函数](http://msdn.microsoft.com/en-us/library/windows/hardware/hh450806%28v=vs.85%29.aspx)向设备发送值。为此，我需要使用[获取特性函数来获取特性缓冲区。](http://msdn.microsoft.com/en-us/library/windows/hardware/hh450795%28v=vs.85%29.aspx)

我有 C++ 代码来做到这一点：

```
USHORT charBufferSize  = 0;
HRESULT hres = BluetoothGATTGetCharacteristics( BLE_Service,NULL, 0,NULL,
                                                 &charBufferSize,BLUETOOTH_GATT_FLAG_NONE);

 if(hres==HRESULT_FROM_WIN32(ERROR_MORE_DATA)) 
   {
      Characteristic_Buffer = new BTH_LE_GATT_CHARACTERISTIC [charBufferSize ];                                                       
   }                                                       
USHORT val = 0;
// get characteristics after allocating required size 
hres = BluetoothGATTGetCharacteristics(BLE_Service,NULL,charBufferSize,
                                 Characteristic_Buffer,&val,BLUETOOTH_GATT_FLAG_NONE); 
```

我必须在 C# 中做同样的事情所以我尝试了这样的事情

```
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Auto)]
    public struct BTH_LE_GATT_CHARACTERISTIC
    {
        public UInt16 ServiceHandle;
        public BTH_LE_UUID CharacteristicUuid;
        public UInt16 AttributeHandle;
        public UInt16 CharacteristicValueHandle;
        public Boolean IsBroadcastable;
        public Boolean IsReadable;
        public Boolean IsWritable;
        public Boolean IsWritableWithoutResponse;
        public Boolean IsSignedWritable;
        public Boolean IsNotifiable;
        public Boolean IsIndicatable;
        public Boolean HasExtendedProperties;
    } 

[DllImport(@"BluetoothApis.dll", SetLastError = true, CharSet = CharSet.Auto)]

public static extern Boolean BluetoothGATTGetCharacteristics(
                                                         IntPtr Device_Handle,
                                                         IntPtr Service,
                                                         UInt16 Char_Buffer_Count,
                                     ref BTH_LE_GATT_CHARACTERISTIC CharBuffer,
                                                         out UInt16 RequiredSize,
                                                         uint Flags
                                                         );
UInt16 Size_Required = 0;
UInt16 NBytes = 0;
BTH_LE_GATT_CHARACTERISTIC gattChar = new BTH_LE_GATT_CHARACTERISTIC();

Success = BluetoothGATTGetCharacteristics(Ble_Device, IntPtr.Zero, 0, IntPtr.Zero, 
                  out Size_Required, (uint)BTH_LE_FLAGS.BLUETOOTH_GATT_FLAG_NONE); 
```

我被困在这里。现在，要对函数进行第二次调用，我应该像在 C++ 中那样为特征缓冲区分配内存

关于如何执行此操作的任何建议或是否有任何其他方法可以在 C# 中获取特征缓冲区？

提前致谢

# c# - Windows XP 中的程序崩溃

> ID：15543368
> 
> 赞同：1
> 
> 时间：2013-03-21T09:14:12.553
> 
> 标签：c#, windows, visual-studio-2008

我在 Windows 7 上使用 Visual Studio 2008 在 C# 中编写代码。但是当我构建发行版并将其带到 Windows XP 时，它崩溃并突然退出程序，无一例外。

在 XP 上调试或在 Windows 7 上发布都没有问题。它运行良好？

我怎么解决这个问题？

# matlab - 在 matlab 区间 [-1 1] 中生成白噪声

> ID：15543369
> 
> 赞同：0
> 
> 时间：2013-03-21T09:14:13.373
> 
> 标签：matlab, spectral

我想创建或生成 [-1 1] 范围内的白噪声，但我不知道具体该怎么做。我选择的编程语言是matlab。据我所知，存在一个名为的函数`randn`和一个名为`wgn`（高斯白噪声）的函数。所以请帮我解决这个问题，澄清一下，例如我想生成以下等式：

```
x(t)=20*sin(2*pi*f1*t)+30*cos(2*pi*f2*t)+A3*white noise 
```

其中`A3=amplitude` ，白噪声在 [-1 1] 范围内。请帮助我并澄清如何做。我的困惑与白噪声有关，与其他人无关，让我们假设 t 从 1 变为 100。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:33:41.253

白噪声是具有**平坦**（恒定）功率谱密度的随机信号。为此，您可以使用[`rand`](http://www.mathworks.com/help/matlab/ref/rand.html). 为了在区间 [-1 1] 中获得白噪声，您可以添加到您的表达式`white_noise=(rand(1,t)*2-1)`中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T09:35:31.950

我不太确定，但正如 natan 所说，您应该能够从随机样本的均匀分布中生成白噪声。

我将按如下方式进行：

```
wn = unifrnd(-seed,seed,[m,n])/seed; 
```

# css - Dojo 对 CSS3 的支持

> ID：15543374
> 
> 赞同：1
> 
> 时间：2013-03-21T09:14:38.400
> 
> 标签：css, dojo

**Dojo**是否有任何解决方法来支持**CSS3**

1.  坡度
2.  盒子阴影
3.  圆角

跨浏览器支持。如果不是你们会建议在 Dojo 上构建应用程序来实现上述目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:06:28.757

它适用于除 IE (AFAIK) 之外的大多数浏览器，使用 claro 主题使其变得容易，因为它建立在 lesscss 框架之上，并且提供了 mixin 来制作渐变、框阴影和圆角...参见[http://download .dojotoolkit.org/release-1.8.3/dojo-release-1.8.3/dijit/themes/themeTester.html?theme=claro](http://download.dojotoolkit.org/release-1.8.3/dojo-release-1.8.3/dijit/themes/themeTester.html?theme=claro)检查它在您定位的不同浏览器中的样子...

您可以轻松扩展这些 lesscss mixins 以使用您需要的任何技巧为 IE 添加垫片（例如 PIE。请参阅[http://css3pie.com/](http://css3pie.com/)）

为了让您快速入门，请查看以下文件：

*   dijit/themes/claro/variables.less ：这是您放置主题的自定义变量（颜色等）的地方
*   dijit/themes/claro/compile.js ：这是您在对 .less 文件进行修改后启动以重新编译主题的脚本。这需要您安装 nodejs。它记录在同一目录中的 README 文件中。

当然，最好不要直接接触任何 claro 主题的文件，因为如果您更新 dojo，它们可能会被覆盖，但是 compile.js 脚本是根据您自己的需要创建自己的主题构建脚本的一个很好的起点，并且结构体。

# c# - 如何在会话中存储多个选定的列表框项目并在另一个表单上查看？

> ID：15543375
> 
> 赞同：1
> 
> 时间：2013-03-21T09:14:41.553
> 
> 标签：c#, asp.net, arrays, string, session

我想做的是我想从列表框中选择 1,2 或 3 个项目并将它们保存到会话中，然后将它们全部显示在列表框中的另一个表单上。

这是我的代码！这是我关于堆栈溢出的第一篇文章，所以请不要讨厌 <3

```
 //WebForm1

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            lstProducts.Items.Add("Soap");
            lstProducts.Items.Add("Schampoo");
            lstProducts.Items.Add("Conditioner");
        }
    }

    protected void cmdBuy_Click(object sender, EventArgs e)
    {
            string[] products = new string[3];

            for (int i = 0; i < lstProducts.Items.Count; ++i)
            {
                if (lstProducts.Items[i].Selected)
                    products[i] = lstProducts.Items[i].Text;
                else
                    products[i] = "0";
            }

            Session["Cart"] = products;

    }

    protected void cmdCart_Click(object sender, EventArgs e)
    {
        if (Session["Cart"] != null)
        {
            Response.Redirect("WebForm2.aspx");
        }
    }
}

    //WebForm2

    protected void Page_Load(object sender, EventArgs e)
    {
        string[] products = (string[])Session["Cart"];

        for (int i = 0; i < 3; ++i)
        {
            if (products[i] != "0")
            {
                lstCart.Items.Add(products[i]);
            }
        }
    }
}
} 
```

问题是我只能在form2的列表框中显示最后一个选定的项目？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:22:15.180

尝试这个

要存储列表框的所有项目，您可以将这些项目添加到数组中：

```
string[] a = new string[]{"item 1","item 2","item 3"};
Session["values"] = a; 
```

在下一页中，您可以像这样检索它。

```
string[] a = (string[])Session["values"] 
```

编辑#1

你的情况你可以这样做

```
 ArrayList al = new ArrayList();
        for (int i = 0; i < ListBox1.Items.Count; i++)
        {
            if (ListBox1.Items[i].Selected == true)
            {
                al.Add(ListBox1.Items[i].Value);
            }
        }
        Session["selectedValues"] = al; 
```

现在您可以在另一个页面中使用这个 sessiom 变量，但不要忘记转换为 ArrayList 类型的对象。

# java - 获取 Mustache 模板，传递 JSON 并转换为 HTML

> ID：15543379
> 
> 赞同：5
> 
> 时间：2013-03-21T09:15:02.140
> 
> 标签：java, html, json, mustache

我正在使用下面的代码将 JSON 数据合并到模板中，以获取 HTML：

模板：

```
String schema = "<h1>{{header}}</h1>"
    + "{{#bug}}{{/bug}}"
    + "{{#items}}"
    + "{{#first}}"
    + "<li><strong>{{title}}</strong>
    + </li>"
    + "{{/first}}"
    + "{{#link}}"
    + "<li><a href=\"{{url}}\">{{name}}
    + </a></li>"
    + "{{/link}}"
    + "{{/items}}"
    + "{{#empty}}"
    + "<p>The list is empty.</p>"
    + "{{/empty}}"; 
```

JSON对象：

```
try {
    String template = "{\"header\": \"Colors\", "
        + "\"items\": [ "
        + "{\"name\": \"red\", \"first\": true, \"url\": \"#Red\"}, "
        + "{\"name\": \"green\", \"link\": true, \"url\": \"#Green\"}, "
        + "{\"name\": \"blue\", \"link\": true, \"url\": \"#Blue\"}"
        + " ], \"empty\": false }";

    JSONObject jsonWithArrayInIt = new JSONObject(template); 
    JSONArray items = jsonWithArrayInIt.getJSONArray("items"); 

    Map<String,String> ctx = new HashMap<String,String>();
    ctx.put("foo.bar", "baz");
    Mustache.compiler().standardsMode(true).compile("{{foo.bar}}").execute(ctx);

    System.out.println("itemised: " + items.toString());
} catch(JSONException je) {
    //Error while creating JSON.
} 
```

我传递了一张数据图来让 Mustache 工作。该方法如下所示：

```
public static Map<String, Object> toMap(JSONObject object)
        throws JSONException {
    Map<String, Object> map = new HashMap();
    Iterator keys = object.keys();

    while (keys.hasNext()) {
        String key = (String) keys.next();
        map.put(key, fromJson(object.get(key)));
    }

    return map;
} 
```

我正在遵循[Mustache Guide](http://mustache.github.com/mustache.5.html)来获得 Mustache 自动化。但我不知道如何得到我期望的结果。输出应如下所示：

```
<h1>Colors</h1>
<li><strong></strong></li>
<li><a href="#Green">green</a></li>
<li><a href="#Blue">blue</a></li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:55:03.563

我认为您需要稍微重新考虑您的 Mustache 模板。jMustache 库（我假设您正在使用）似乎总是将`{{#`实体视为列表并迭代它们的内容，而不管传入的数据类型如何。

像这样的东西应该工作：

```
<h1>{{header}}</h1>
{{#items}}
<li>
    {{#url}}<a href="{{.}}">{{/url}}
    {{^url}}<strong>{{/url}}
        {{caption}}
    {{#url}}</a>{{/url}}
    {{^url}}</strong>{{/url}}
</li>
{{/items}}
{{^items}}
    <p>The list is empty.</p>
{{/items}} 
```

这将仅在提供“链接”值时生成 HMTL 锚点，从而避免 jMustache if 条件问题。所以 JSON 模型看起来像这样：

```
{
"header": "Colors",
"items": [
        {"caption": "title"},
        {"caption": "red", "url": "#Red"},
        {"caption": "green", "url": "#Green"},
        {"caption": "blue", "url": "#Blue"}
    ]
} 
```

最后，您需要将您的 JSON 转换为 jMustache 可以理解的内容。在我使用过的任何库中，我从未见过或听说过“HTTPFunctions”类，但我过去曾使用 Gson 做过一些类似的映射。请注意，这是一个非常简单的实现，您可能需要对其进行扩展以满足您的需求：

```
private Map<String, Object> getModelFromJson(JSONObject json) throws JSONException {
    Map<String,Object> out = new HashMap<String,Object>();

    Iterator it = json.keys();
    while (it.hasNext()) {
        String key = (String)it.next();

        if (json.get(key) instanceof JSONArray) {

            // Copy an array
            JSONArray arrayIn = json.getJSONArray(key);
            List<Object> arrayOut = new ArrayList<Object>();
            for (int i = 0; i < arrayIn.length(); i++) {
                JSONObject item = (JSONObject)arrayIn.get(i);
                Map<String, Object> items = getModelFromJson(item);
                arrayOut.add(items);
            }
            out.put(key, arrayOut);
        }
        else {

            // Copy a primitive string
            out.put(key, json.getString(key));
        }
    }

    return out;
} 
```

这个基本的 JUnit 测试演示了理论： http: [//www.pasteshare.co.uk/p/841/](http://www.pasteshare.co.uk/p/841/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:50:15.453

只需使用

```
Map<String, Object> s =  HTTPFunctions.toMap(new JSONObject(template)); 
```

# java - 如何配置生成的代码在 IntelliJ 中的位置？

> ID：15543381
> 
> 赞同：6
> 
> 时间：2013-03-21T09:15:10.673
> 
> 标签：java, intellij-idea

现在我正在使用 IntelliJ，它很棒。但是有一个烦恼：它总是将生成的 getter setter 放在实际字段之上，我该如何改变这种行为？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T09:18:01.287

将鼠标指针放在所有字段下方。ALT + INSERT -> Getter 和 Setter -> 选择字段 -> 确定。应该是的。

# android - 为什么我不能在自定义对话框中显示图像？

> ID：15543385
> 
> 赞同：0
> 
> 时间：2013-03-21T09:15:21.613
> 
> 标签：android, image, dialog

我想在我的 Android 应用程序中创建某种日志记录程序。我设法检测到用户在屏幕上按下的位置（三次）并从中创建日志记录序列。最后，我想显示 3 个代表所选日志记录序列的图像（来自我的可绘制文件夹）

我已经动态设置了可绘制 ID，当我将图像放在主布局上时它可以工作。但是，如果我将图像放在自定义对话框中，我会强制关闭。从 LogCat 我看到以下内容：**java.lang.NullPointerException** at `image1.setImageResource(iIdSlike);`

如果我将可绘制 ID 显示为文本，则可以，并且 ID 在主对话框布局和自定义对话框布局上是相同的。

即使我这样设置图像（不是动态地），我也会强制关闭：

```
 image1.setImageResource(R.drawable.s11); 
```

为什么我不能在自定义对话框上显示图像？

这是我的 dijalog.xml（自定义对话框布局）：

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content">

     <ImageView
         android:id="@+id/imgDrugi"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_alignRight="@+id/TextView01"
         android:layout_below="@+id/TextView01"
         android:layout_marginRight="27dp"
         android:layout_marginTop="51dp"
          />

     <Button
         android:id="@+id/button1"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_alignParentBottom="true"
         android:layout_alignParentRight="true"
         android:text="Button" />

     <TextView
         android:id="@+id/TextView01"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_alignParentTop="true"
         android:layout_centerHorizontal="true"
         android:layout_marginTop="118dp"
         android:text="@+id/TextView01" />

    </RelativeLayout> 
```

这是我的代码：

```
public class MyWorkLogiranje extends Activity implements OnClickListener
{
    @Override
    public boolean onTouchEvent(MotionEvent event) 
    {
        switch(event.getAction())
        {
          case MotionEvent.ACTION_DOWN:                 
                .
                .
                .               
                      //calculations to get string sPrvi

                   sPrvi="s31"; //For testing purposes sPrvi set manually          

                   //Image and text on main layout (it works)
                   iIdSlike = getResources().getIdentifier(sPrvi, "drawable", getPackageName());
                   ImageView image = (ImageView) findViewById(R.id.imgPrvi);
                   image.setImageResource(iIdSlike);

                   TextView text1 = (TextView)findViewById(R.id.txtPrvi);
                   text1.setText("iIdSlike: " + iIdSlike);

                   //Prikaz dijaloga

                   final Dialog dialog = new Dialog(MyWorkLogiranje.this);
                   dialog.setContentView(R.layout.dijalog);
                   dialog.setTitle("This is my custom dialog box");
                   dialog.setCancelable(true);
                   dialog.getContext();

                   TextView text = (TextView) dialog.findViewById(R.id.TextView01);
                   text.setText("iIdSlike: " + iIdSlike);
                   ImageView image1 = (ImageView) findViewById(R.id.imgDrugi);
                   image1.setImageResource(R.drawable.iIdSlike);
                   //image1.setImageResource(R.drawable.s11);

                   //Podešavanje dugmeta
                   Button button = (Button) dialog.findViewById(R.id.button1);
                   button.setOnClickListener(new OnClickListener() 
                   {
                       @Override
                        public void onClick(View v) 
                        {
                           dialog.dismiss();
                        }
                    });   
                   dialog.show(); 
```

任何人都可以帮我解决这个问题吗？我为此挠了两天的头。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:20:24.210

您的 findViewById 失败了。所以你得到了 NullPointerException。

```
 ImageView image1 = (ImageView) findViewById(R.id.imgDrugi); 
```

应该

```
ImageView image1 = (ImageView) dialog.findViewById(R.id.imgDrugi); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:20:29.297

试试这个：

```
image1.setImageDrawable(getResources().getDrawable(iIdSlike)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T09:20:57.797

在此之前将其添加到您的对话框代码中：

```
ImageView image1 = (ImageView) dialog.findViewById(R.id.imgDrugi); 
```

你可以这样使用：

```
Drawable image = ImageOperations(context,ed.toString(),"image.jpg");
ImageView imgView = new ImageView(context);
imgView = (ImageView)findViewById(R.id.image1);
imgView.setImageDrawable(image); 
```

或者

```
setImageDrawable(getResources().getDrawable(R.drawable.icon)); 
```

或者

这将返回您想要访问的可绘制对象的 id...然后您可以通过执行以下操作在 imageview 中设置图像

```
 int id = getResources().getIdentifier("yourpackagename:drawable/" + StringGenerated, null, null);
imageview.setImageResource(id); 
```

# nginx - nginx 子目录中的柠檬架

> ID：15543386
> 
> 赞同：1
> 
> 时间：2013-03-21T09:15:22.440
> 
> 标签：nginx

我在子目录 www.mysite.com/shop/ 下运行 Lemonstand

这是我的柠檬摊位置规则：

```
# Lemonstand
location /shop {
    root /home/sites/mysite.com/public_html/shop/;
    index index.php;

    include fastcgi_params;
    fastcgi_split_path_info ^(.+\.php)(/.+)$;

    fastcgi_param SCRIPT_FILENAME $document_root/index.php;
    fastcgi_param SCRIPT_NAME index.php;
    fastcgi_param QUERY_STRING url=$uri&$args;

    fastcgi_pass 127.0.0.1:9000;
    fastcgi_index index.php;
    fastcgi_buffer_size 32k;
    fastcgi_buffers 4 32k;
    fastcgi_busy_buffers_size 64k;
} 
```

我可以访问 mysite.com/shop 上的页面。

商店的所有 URL**应该**是这样的：

```
mysite.com/shop/category/freight
mysite.com/shop/products/dog-toy 
```

实际上在页面上时，它们的结构如下：

```
mysite.com/category/freight
mysite.com/products/dog-toy 
```

奇怪的是，即使我将正确的 URL 粘贴到浏览器，它也**只会显示**我的基本 /shop/ 页面，就好像其他页面不存在一样。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:43:34.613

您需要从不同的位置块提供 php。

[**编辑**] 为避免与其他 php 脚本冲突，您可以使用命名位置。

```
location ^~/shop/ {
    root /home/sites/mysite/public_html;

    try_files $uri $uri/ @anotherPhpSite
}

location @anotherPhpSite {
    include fastcgi_params;

    # Defend against arbitrary PHP code execution
    # NOTE: You should have "cgi.fix_pathinfo = 0;" in php.ini
    # More info:
    # https://nealpoole.com/blog/2011/04/setting-up-php-fastcgi-and-nginx-dont-trust-the-tutorials-check-your-configuration/
    fastcgi_split_path_info ^(.+\.php)(/.+)$;

    fastcgi_param SCRIPT_FILENAME $document_root/shop/index.php;
    fastcgi_param SCRIPT_NAME /shop/index.php;
    fastcgi_param QUERY_STRING url=$uri&$args;

    fastcgi_pass 127.0.0.1:9000;
    fastcgi_index index.php;
    fastcgi_buffer_size 32k;
    fastcgi_buffers 4 32k;
    fastcgi_busy_buffers_size 64k;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:47:02.030

我的主要问题是表达式语法和配置结构。

好的。所以这是工作配置文件。最佳做法是将两个位置分开，并为它们使用一个 php 块。

首先是使用 silverstripe CMS 的主控制器块，这里我将数据直接传递给蓝宝石中的主控制器。

```
# Main silverstripe declaration
location / {
    index /sapphire/main.php;
    try_files $uri $uri/ /sapphire/main.php?url=$uri&$args;
} 
```

第二个是我的商店在一个运行柠檬摊的子目录下。这主要是让表达式正确，然后将请求传递到相关路径的情况。我没有在这里设置另一个根或别名，因为该规则是从重写中继承的。

```
# Shop lemonstand files
location /shop/ {
    index index.php;
    rewrite ^/shop(.*)$ /shop/index.php?q=$1 last;
    try_files $uri $uri/ /shop/index.php?q=$1;
} 
```

最后我使用了一个通用的 PHP 块，所以我不必在前两个中复制我的代码。所以任何通过前两个区块的东西都会进入这里。

```
# PHP controller
location ~ ^(.*?\.php)(/.*)?$ {
    fastcgi_split_path_info ^(.+?\.php)(/.+)$;
    include fastcgi_params;
    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;

    fastcgi_pass 127.0.0.1:9000;

    fastcgi_index index.php;
    fastcgi_buffer_size 32k;
    fastcgi_buffers 4 32k;
    fastcgi_busy_buffers_size 64k;
} 
```

# c# - 无法加载 oramts.dll

> ID：15543388
> 
> 赞同：2
> 
> 时间：2013-03-21T09:15:28.773
> 
> 标签：c#, oracle

即使我已经使用 Oracle 客户端安装了 Microsoft Transaction Server 的 Oracle 服务，但仍然出现以下错误： - 无法加载 oramts.dll

我用谷歌搜索了很多错误，我发现所有的目标都是为 oracle 安装事务服务器，但它不起作用。我正在使用 oracle 客户端 11g 11.2

是否需要任何其他配置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:27:24.917

我之前遇到过这种问题，通常卸载现有的 Oracle 客户端，然后使用 Oracle Services For Microsoft Transaction Server 复选框安装 oracle 有帮助。

# actionscript-3 - 使用适用于 Android 的蓝牙 ANE

> ID：15543391
> 
> 赞同：0
> 
> 时间：2013-03-21T09:15:38.963
> 
> 标签：actionscript-3, flash, bluetooth

我对 flash、air 和 AS3 比较陌生，所以如果这是作为初学者的问题，我很抱歉。我已经在 AIR 中创建了一个应用程序，可以在 Windows 上运行，并通过 serproxy 的串行通信与我的 atmega8 芯片进行通信。

现在我想将该应用程序移植到 android 以执行相同的基本功能，但通过蓝牙与 atmega8 通信。因此，我在 Flash CS6 中创建了一个新的 Air for android 文件，从我以前的应用程序中复制了我的代码，不包括通过套接字部分进行的通信，并创建了一个在 android 手机上运行的 apk:)。它按预期完成了除了通信之外的所有操作。

现在我一直在尝试实现 as3breeze.com/bluetooth-ane 并使用它进行通信，但我不太确定如何处理整个事情。我已经通过 actionscript 设置导入了 ane 并实现了这些类，但是当我尝试测试时，我得到了这个错误。

无法加载内容，因为加载扩展时出现问题：错误：扩展命名空间对 C:\Users\AppData\Local\Temp\Tmp_ANE_File_Unzipped_Packages\AndroidBluetooth.ane 无效

因此，经过一番搜索，我发现了有关 as3 sdk 和 flash builder 的帖子。我真的需要所有这些东西吗，或者我可以让我的蓝牙应用程序只用 flash cs6 就可以工作吗？还有我的错误到底是什么意思，我该如何解决。提前感谢您的帮助。几天来，我一直在寻找一个解决方案，我得到的解释要么不起作用，要么我缺乏理解的知识。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T19:34:36.610

无法访问的路径让我相信您尚未提取 ANE（基本上您正在尝试访问临时目录）。尝试将 ANE 文件提取到某个位置，例如“我的文档”或您的 Flash 项目所在的任何位置，并改为包含（在动作脚本设置中）该路径。希望能帮助到你。

# php - 在 PHP 中分隔逗号断词并选择额外信息

> ID：15543396
> 
> 赞同：0
> 
> 时间：2013-03-21T09:15:56.527
> 
> 标签：php, mysql

我一直在尝试对此进行一段时间的研究，但找不到正确解释编码的答案。基本上我有一个 mysql 表，其中包含与用户相关的“连接”。这些连接用逗号分隔：

连接1、连接2、连接3、连接4等

我需要做的是将每个分隔成一个数组，如下所示：

```
$connection1
$connection2
$connection3
$connection4 
```

然后对于其中的每一个，我需要能够从不同的表中选择某些信息，例如：

```
(SELECT name,id FROM users WHERE username = (all of the connections above)) 
```

你们谁能让我知道这怎么可能？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:20:02.217

您可以使用 FIND_IN_SET 进行 JOIN，或者您可以连接整数表并将其与 Substring_index 一起使用以从 CSV 字符串中获取值

通常，数据库中的逗号分隔列表是设计不佳的标志。最好将它们拆分到另一个表中，逗号分隔列表中的每个项目都有一行。

编辑 - 如何使用整数表的示例： -

```
SELECT name,id 
FROM users a
INNER JOIN (SELECT SUBSTRING_INDEX(SUBSTRING_INDEX(concat(Connection, ','), ',', aCnt), ',', -1) AS aConnection
FROM Connections
CROSS JOIN (
SELECT a.i+b.i*10+c.i*100 + 1 AS aCnt
FROM integers a, integers b, integers c) Sub1
WHERE (LENGTH(Connection) + 1 - LENGTH(REPLACE(Connection, ',', ''))) >= aCnt) Sub2
ON a.username = Sub2.aConnection 
```

这依赖于一个名为 integers 的表，其中有一列名为 i，有 10 行，值为 0 到 9。您可以将其与自身交叉连接以获得一系列数字。在这种情况下，从 0 到 999，然后受要拆分的字段中的逗号数量限制。然后使用此值查找 SUBSTRING_INDEX 的逗号以拆分字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:20:43.867

很简单。使用`explode`php的功能。

```
 $text= "connection1, connection2, connection3, connection4";
   $res= explode(",",$text);

    foreach($res as $i=>$id)
    {
       echo $res[$i];
    } 
```

# vba - 排序组合框 VBA

> ID：15543399
> 
> 赞同：6
> 
> 时间：2013-03-21T09:15:59.683
> 
> 标签：vba, sorting, excel, combobox

我一直在考虑如何对组合框中的值进行排序。

当我初始化表单时，我将项目添加到 ComboBox，因为工作表上值的数量不断增加。

我使用下一个代码添加项目：

```
With ComboBox1
lastcell = ThisWorkbook.Sheets("1").Range("F1000000").End(xlUp).Row + 1
For i = 2 To lastcell 
.AddItem ThisWorkbook.Sheets("1").Cells(i, 6)
Next i
End With 
```

我想将我要在 ComoBox 上添加的值复制到另一个工作表中，然后在新工作表中对它们进行排序，它工作正常，但它似乎不是一个聪明的选择，这意味着我创建另一个工作表然后复制值并对它们进行排序，而不是直接对它们进行排序。

我的问题是，任何人都知道如何直接从原始表格中进行操作？我对API一无所知，所以请只使用VBA代码。我已经在 MSDN 上查看过，但我不知道如何使它工作。

谢谢，如果需要更多信息，请告诉我。

PS：我不能直接从原始表格中对它们进行排序，因为这张表格必须是静态顺序

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T09:41:18.490

您可以将工作表中的值读入数组，使用代码对其进行排序，然后添加项目。

此代码将使用 Quicksort 执行此操作：

```
Private Sub UserForm_Initialize()
    Dim varRange() As Variant
    Dim lngLastRow As Long
    Dim i As Long

    lngLastRow = Range("F:F").Find(What:="*", SearchOrder:=xlByRows, SearchDirection:=xlPrevious).Row
    varRange = Range("F:F").Resize(lngLastRow).Cells

    subQuickSort varRange

    Me.ComboBox1.List = varRange
End Sub

Public Sub subQuickSort(var1 As Variant, _
    Optional ByVal lngLowStart As Long = -1, _
    Optional ByVal lngHighStart As Long = -1)

    Dim varPivot As Variant
    Dim lngLow As Long
    Dim lngHigh As Long

    lngLowStart = IIf(lngLowStart = -1, LBound(var1), lngLowStart)
    lngHighStart = IIf(lngHighStart = -1, UBound(var1), lngHighStart)
    lngLow = lngLowStart
    lngHigh = lngHighStart

    varPivot = var1((lngLowStart + lngHighStart) \ 2, 1)

    While (lngLow <= lngHigh)
        While (var1(lngLow, 1) < varPivot And lngLow < lngHighStart)
            lngLow = lngLow + 1
        Wend

        While (varPivot < var1(lngHigh, 1) And lngHigh > lngLowStart)
            lngHigh = lngHigh - 1
        Wend

        If (lngLow <= lngHigh) Then
            subSwap var1, lngLow, lngHigh
            lngLow = lngLow + 1
            lngHigh = lngHigh - 1
        End If
    Wend

    If (lngLowStart < lngHigh) Then
        subQuickSort var1, lngLowStart, lngHigh
    End If
    If (lngLow < lngHighStart) Then
        subQuickSort var1, lngLow, lngHighStart
    End If

End Sub

Private Sub subSwap(var As Variant, lngItem1 As Long, lngItem2 As Long)
    Dim varTemp As Variant
    varTemp = var(lngItem1, 1)
    var(lngItem1, 1) = var(lngItem2, 1)
    var(lngItem2, 1) = varTemp
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T09:36:34.683

这取决于数据的环境、类型和结构。但我更喜欢这样做：
您也可以使用数组和冒泡排序算法:)
稍微修改代码以适合您的情况

```
Option Explicit

Sub WITH_COMBOBOX()

    Dim i As Long
    Dim arr() As String

    Dim lastCell As Long
    lastCell = 500

    ReDim arr(lastCell)
    Call FillAndSortArray(arr)

    For i = 2 To lastCell
        .AddItem arr(i - 2)
    Next i
End Sub

Sub FillAndSortArray(ByRef myArray() As String)

    Dim i As Long

    For i = LBound(myArray) To UBound(myArray)
        myArray(i) = CStr(ThisWorkbook.Sheets(1).Range("F" & i + 2).Value)
    Next i

    Call BubbleSort(myArray)
End Sub

Sub BubbleSort(ByRef myArray() As String)

    Dim i As Long, j As Long
    Dim Temp As String

    For i = LBound(myArray) To UBound(myArray) - 1
        For j = i + 1 To UBound(myArray) - 1
            If myArray(i) > myArray(j) Then
                Temp = myArray(j)
                myArray(j) = myArray(i)
                myArray(i) = Temp
            End If
        Next j
    Next i
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T09:25:36.167

试试下面的代码：

```
Sub GetAction()

    Dim rng As Range, lastcell As Long
    lastcell = Range("F1000").End(xlUp).Row + 1
    Set rng = Range("F1:F" & lastcell)  ' assuming to start from F1

    If Not rng Is Nothing Then
        rng.Sort Range("F1")
        ComboBox1.ListFillRange = rng.Address
    End If

End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-12T15:39:00.050

用于排序 123 的数字

```
For Each cell In ThisWorkbook.Sheets("sheet1").Range("list1")

Me.ComboBox1.AddItem cell

Next cell

With Me.ComboBox1

 For x = LBound(.list) To UBound(.list)

   For y = x To UBound(.list)

   If .list(y, 0) + 0 < .list(x, 0) + 0 Then

     blah = .list(y, 0)

    .list(y, 0) = .list(x, 0)

    .list(x, 0) = blah

   End If

 Next y

Next x

 End With 
```

用于排序文本 abcd

```
For Each cell In ThisWorkbook.Sheets("sheet1").Range("list1")

Me.ComboBox1.AddItem cell

Next cell

With Me.ComboBox1

 For x = LBound(.list) To UBound(.list)

   For y = x To UBound(.list)

   If .list(y, 0)  < .list(x, 0)  Then

     blah = .list(y, 0)

    .list(y, 0) = .list(x, 0)

    .list(x, 0) = blah

   End If

 Next y

Next x

 End With 
```

# android - 如何将数据绑定到自定义日历小部件

> ID：15543404
> 
> 赞同：2
> 
> 时间：2013-03-21T09:16:18.637
> 
> 标签：android, json, calendar

我正在做一个基于从服务器获取事件并将它们显示在日历小部件中的项目。我可以在我的应用程序中显示日历。但无法将服务器数据绑定到日历中。我想要这样的东西： ![在此处输入图像描述](../Images/1f173a755dcc19f7aa6c96271722b8ae.png)

我正在获取日历视图，但我想绑定服务器事件并像上面显示的那样显示它们。

![在此处输入图像描述](../Images/238468f512f068b18d24d3e172f2e453.png)

如果有任何事件，它应该在特定日期可见。建议我最好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T03:54:57.517

我会亲自运行一个后台任务，将所有内容下载到数据库中，然后在单击事件后将它们显示在列表视图中。

# javascript - 使用颜色选择器更改站点背景颜色

> ID：15543405
> 
> 赞同：0
> 
> 时间：2013-03-21T09:16:20.550
> 
> 标签：javascript, jquery

我正在为我的网站使用[这个颜色选择器。](http://jscolor.com/try.php)我需要做的是在选择过程中更改我的网站**主体/html**的背景。就像它改变那里的文本框的背景一样。

我查看了 JS 文件本身，但发现它有点复杂。我`document.body.style.background = styleElement.jscStyle.backgroundColor;`在第 410 - 430 行之间添加，但没有任何改变。

我怎样才能实现它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:37:55.853

在演示页面的[第 8 节](http://jscolor.com/try.php#onchange)中，您有“Onchange 事件”：

您需要创建`input`这样的：

```
<input class="color"
    onchange="document.body.style.backgroundColor = '#'+this.color"> 
```

我的猜测是，在您的示例中，您忘记`#`在颜色 HEX 代码之前添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:32:48.933

将类 ( `.colorPicker`) 添加到颜色选择器输入字段，然后在 jQuery 中执行此操作：

```
'use strict';
$(document).ready(function(){
    $(".colorPicker").change(function(){
        $('body').css('background-color', $(this).css('background-color'));
    });
}); 
```

# linux - 如何列出目录和子目录中的文件？

> ID：15543414
> 
> 赞同：1
> 
> 时间：2013-03-21T09:16:36.307
> 
> 标签：linux, bash, shell

我有一个目录，其中有包含文本文件的子目录，现在我想用路径列出子目录中的所有 .txt 文件。这个怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:22:24.067

使用查找命令

```
find /where/to/search -name "*.txt" -type f 
```

这将仅列出以 .txt 结尾的文件。使用 -type f 它不会列出目录，即使它的名称恰好以 .txt 结尾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T09:24:36.810

尝试这个 ：

```
find / -type f -name \*.txt 
```

它将为您提供“/”目录中的所有 .txt 文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T09:19:18.553

几种方式：

```
echo directory_name/*/*.txt 
```

可能是最有效的：`echo`是内置的 shell，* 扩展由`bash`. 如果您需要更多功率，请使用`ls`而不是`echo`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T09:22:21.963

试试这个：`tree -R | grep ".txt"`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T09:26:52.530

```
ls -R path_of_your_directory | grep "\.txt$" 
```

例子：

```
ls -R /tmp | grep "\.txt$" 
```

# node.js - 如何在 Node.js 中获取 describeTable amazon dynamoDB 方法的结果？

> ID：15543418
> 
> 赞同：1
> 
> 时间：2013-03-21T09:16:44.693
> 
> 标签：node.js, amazon-web-services, amazon-dynamodb

在我的应用程序中，我将 node.js 与亚马逊网络服务 dynamoDB 一起使用。我已经创建了一个表并在其上插入了项目。现在我想使用 describeTable 显示我的表的项目数。我该怎么做。我在下面尝试代码，但它不工作。

```
 var AWS = require('aws-sdk');
     AWS.config.update({accessKeyId: '****', secretAccessKey:  '****',region: 'us-east-1'});
     var svc = new AWS.DynamoDB();
     svc.client.describeTable({TableName:"Users"}, function(err,result) {
     if(!err){

        console.log('result is '+result[ItemCount]);
         console.log('success');
     }
   else{

    console.log("err is "+err);
    }
   }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T19:30:49.127

您的问题的直接答案是您需要在回调函数中使用 result.Table.ItemCount 而不是 result.ItemCount。但是请注意，此计数不会实时更新，并且可能不会反映最近对表的插入或删除。如果您想要当前项目计数，则需要扫描表并使用 Count 属性来获取扫描项目的计数。像这样的扫描可能会消耗您为表配置的所有容量，因此如果这是一项要求，请务必平衡对最近项目计数的需求与可能同时在表上运行的其他操作。

这是返回项目计数的扫描的 node.js 示例。由于扫描被迭代调用，直到所有行都被读取，我使用[异步](https://github.com/caolan/async)模块在发出下一个循环之前等待结果。

```
var async = require('async');
var AWS = require('aws-sdk');

AWS.config.update({accessKeyId: 'AKID',
                   secretAccessKey:  'secret',
                   region: 'us-east-1'});
var svc = new AWS.DynamoDB();

var scanComplete = false,
    itemCountTotal = 0,
    consumedCapacityUnitsTotal = 0;

var scanParams = { TableName : 'usertable',
                   Count : 'true' };

// scan is called iteratively until all rows have been scanned
//  this uses the asyc module to wait for each call to complete
//  before issuing the next.
async.until( function() { return scanComplete; },
             function (callback) {
                svc.scan(scanParams, function (err, result) {
                    if (err) {
                        console.log(err);
                    } else {
                        console.log(result);
                        if (typeof (result.LastEvaluatedKey) === 'undefined' ) {
                            scanComplete = true;
                        } else {
                            // set the start key for the next scan to our last key
                            scanParams.ExclusiveStartKey = result.LastEvaluatedKey;
                        }
                        itemCountTotal += result.Count;
                        consumedCapacityUnitsTotal += result.ConsumedCapacityUnits;
                        if (!scanComplete) {
                            console.log("cumulative itemCount " + itemCountTotal);
                            console.log("cumulative capacity units " + consumedCapacityUnitsTotal);
                        }
                    }
                    callback(err);
                });
             },
             // this runs when the loop is complete or returns an error
             function (err) {
                if (err) {
                    console.log('error in processing scan ');
                    console.log(err);
                } else {
                    console.log('scan complete')
                    console.log('Total items: ' + itemCountTotal);
                    console.log('Total capacity units consumed: ' + consumedCapacityUnitsTotal);
                }
             }
); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-31T09:43:30.587

svc 后删除客户端。[文档](http://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/DynamoDB.html#describeTable-property)

```
var svc = new AWS.DynamoDB();
svc.describeTable(params, function(err, data) {
    if (err) {
       // error
    } else {
        var table = data['Table'];
        console.log(table['ItemCount']);
    }
}); 
```

这对我有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-03T15:12:44.620

托德贝，

[http://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/DynamoDB.html#scan-property](http://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/DynamoDB.html#scan-property)描述了具有**Select参数****的扫描**参数，该参数可以具有值**'COUNT'** ...

 ****> Select —（字符串）要在结果中返回的属性。您可以检索所有项目属性、特定项目属性、匹配项目的计数，或者在索引的情况下，部分或全部属性投影到索引中。
> 
> COUNT：返回匹配项的数量，而不是匹配项本身。

因此，在您的示例中， scanParams 似乎应该是...

```
var scanParams = {
    TableName: 'usertable',
    Select: 'COUNT'
}; 
```****

# ruby-on-rails - 为什么 rails 没有选择 .js.erb 中定义的函数？

> ID：15543421
> 
> 赞同：1
> 
> 时间：2013-03-21T09:16:59.617
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

Rails 无法识别我的 .js.erb 文件，只是忽略了其中的任何内容。

**advanced_search.html.erb**中的相关片段

 **```
<%= render "advanced_search_orders_form" %> 
```

我有另一个文件 _advanced_search_orders_form.html.erb，它显示正确，但有一个小问题。

**_advanced_search_orders_form.html.erb**中的相关片段

 **```
<form id="advancedSearchOrder" name="advancedSearchForm" value="advancedSearch" action="" class=" search line" method="GET" onsubmit="return validateAdvancedSearchForm()" > 
```

这个 validateAdvancedSearchForm() 是在**_advanced_search_orders_form.js.erb**中定义的， 但是 Rails 的行为就好像这个函数没有定义一样。此外，即使我只是在 _advanced_search_orders_form.js.erb 中写了一个警报（“检查”），它也不会呈现。甚至编辑器（RubyMine）也说它找不到这个函数 validateAdvancedSearchForm 的定义。

我根本没有使用 .js.erb 文件，所以我确定我在那里做错了什么。我是否错误地定义了文件名，还是必须包含它等？真的很感谢这里的一点帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:21:33.207

validateAdvancedSearchForm() 必须放在 assets/javascrips 文件夹中的 .js 文件（如果使用咖啡脚本，则为 .js.coffee）中，然后您可以从页面中使用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:26:59.180

默认情况下您`.js.erb`不会渲染。当你写

```
<%= render "advanced_search_orders_form" %> 
```

这将呈现“_advanced_search_orders_form.html.erb”，因为这是您的默认模板格式。

试试这个方法：

```
<%= render :file => "advanced_search_orders_form.js.erb" %> 
```

确保该文件中的脚本在`<script></script>`标记中****

# django - 我想要一个错误消息，该条目已经存在于特定字段的 django 表单中

> ID：15543422
> 
> 赞同：0
> 
> 时间：2013-03-21T09:17:03.003
> 
> 标签：django, django-models, python-2.7, django-forms

我正在使用模型表格。在我的表单中有一个名为`tagid`. `tagid`如果我在字段中输入 a`tagid`然后如果我提交表格。如果输入的内容已经存在于数据库中，则表单不应提交到数据库`tagid`中，并且应在标签 ID 字段上方显示“标签 ID 已存在”。

我怎么能做这个。

我的表格是

```
class InventoryItems(ModelForm):

    class Meta:
        model = item 
```

在我的项目表中，我有一个字段`tagid`。所以如果我输入现有的`tagid`，然后如果我提交。它应该在字段上方抛出提示或文本或其他内容，例如“标签 ID 已存在”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:32:20.727

将此方法添加到您的表单中：

```
 def clean_tagid(self):
        data = self.cleaned_data['tagid']
        if item.objects.filter(tagid = data).count():
            raise forms.ValidationError("TagID already exists")
        return data 
```

# tomcat - 在 tooltwist 工作台中删除 ttsvr

> ID：15543430
> 
> 赞同：1
> 
> 时间：2013-03-21T09:17:30.237
> 
> 标签：tomcat, tooltwist

是否也可以在我的本地 Tooltwist8 工作台中删除或禁用 ttsvr？这意味着即使我的地址栏上没有 /ttsvr，该页面也应该加载。我正在配置一些 urlrewrite.xml，我想直接在我的本地机器上测试它。为此，我需要禁用 ttsvr，这样 url 就只有 /n。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T02:29:37.197

这可以通过编辑 3 件事来实现。

一种。**server.xml** - 在底部，复制上下文标签并将路径更改为“/”。这看起来像这样：

```
<Context docBase="ttsvr" path="/ttsvr" reloadable="false" source="org.eclipse.jst.jee.server:ttsvr"/>
<Context docBase="ttsvr" path="/" reloadable="false" source="org.eclipse.jst.jee.server:ttsvr"/>

```

湾。**tooltwist.conf** - 移除 <webappPrefix>/ttsvr</webappPrefix> 的值

```
<webappPrefix></webappPrefix>
```

C。**Tomcat 配置**

*   在服务器选项下，取消选中“服务模块而不发布”。

*   在发布下，选择“资源更改时自动发布”。

# javascript - 如何在 Javascript 中解析 Javascript 代码以获取不在当前范围内的变量名？

> ID：15543431
> 
> 赞同：4
> 
> 时间：2013-03-21T09:17:31.720
> 
> 标签：javascript, node.js, parsing, scope, v8

```
var code = 'var n = a; x = y; status.show();\n// todo: \nconsole.log(xyz, "todo: // tests.", params);';
function parse (c) {
    var myFunc = new Function("myFunc", c); 
} 
```

我正在使用 V8 NODEJS 环境。那么也许可以获得有关已声明变量及其现有函数范围的信息？

事实上，我需要缺少的变量名`a`、`x`、`y`、`status`和。 谁能指出我正确的方向？`xyz``params`

此致。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T11:20:52.353

我建议使用[UglifyJS](https://github.com/mishoo/UglifyJS)或[esprima](http://esprima.org/)之类的解析器来解析代码，提取变量，然后在当前环境中测试它们。我认为这并不难，因为我已经构建了相当多的 JavaScript 代码分析或编译/评估。

但如果您需要更简单、更快捷的解决方案，您也可以尝试[JSLint](http://www.jslint.com/)。我们可以将其用作库，只需禁用其他规则并仅保留“未定义变量”。我们可以测试当前环境中的每一个错误，看看它们是否被提供。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-08-06T07:55:20.450

这是使用[UglifyJS](https://www.google.com/search?q=uglifyjs)的方法：

```
var UglifyJS = require("uglifyjs");
var parsed = UglifyJS.parse(code);
parsed.figure_out_scope();
parsed.globals.each(function(g) {console.log(g.name)}); 
```

您可以通过在终端中运行`npm install uglifyjs`then来尝试一下。`node`复制并粘贴`var code = (...);`问题中的位，然后是上面的代码；这是我得到的结果：

```
> parsed.globals.each(function(g) {console.log(g.name)});
a
x
y
status
console
xyz
params 
```

# sql - SQL - 从 2 个几乎相同的表中选择

> ID：15543433
> 
> 赞同：0
> 
> 时间：2013-03-21T09:17:34.857
> 
> 标签：sql, join

我有一组 2 个表，我想要实现的是从两者中选择全部，并显示从哪个表中选择 + active=1 从 table2 中获取的值设置（在第一个表中有一个 boolean = active ，table2 中的所有内容都处于活动状态，不需要此列）但是正如我所写的，我仍然希望从 table2 中选择的数据在结果中设置为活动状态。

我完全被卡住了，非常感谢一些帮助。

```
CREATE TABLE `table1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `value` int(11) DEFAULT NULL,
  `active` bool DEFAULT NULL,
)

CREATE TABLE `table2` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `value` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:19:53.257

```
SELECT *, 't1' tableName
FROM table1

UNION ALL

SELECT *, true 'active', 't2' tableName
FROM table2 
```

**[演示](http://sqlfiddle.com/#!2/0b3e3/1)**

# iphone - “self setDoublePicker:nil”和“self.doublePicker = nil”之间的区别

> ID：15543442
> 
> 赞同：-1
> 
> 时间：2013-03-21T09:17:56.220
> 
> 标签：iphone, ios, objective-c, xcode

正如标题所解释的，如果我控制将 xib 文件中的组件拖向 .h 文件以方便地创建一个出口，比如`doublePicker`或其他东西，xcode 将帮助在`viewDidUnloaded:`这样的方法中创建语句：

`[self setDoublePicker:nil];`

那和有什么区别：

`self.doublePicker = nil;`

哪一个表现更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:26:56.520

```
Foo *foo = [[Foo alloc] init];
foo.bar = YES;
[foo setBar:YES]; 
```

最后两行将编译完全相同。唯一改变这一点的是属性是否指定了 getter 和/或 setter 属性；但是，它所做的只是更改发送的消息，而不是是否发送消息：

```
if ([someView isEmpty]) { /* ... */ }
if (someView.empty) { /* ... */ } 
```

两条线都给出相同的结果。. 一次参考这个以更好地理解[点符号](http://qualitycoding.org/dot-notation/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T09:20:32.330

它们是等价的。使用 Objective-C 属性设置值`foo = nil`等同于调用`setFoo:nil`. 看：

*   [http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/EncapsulatingData/EncapsulatingData.html#//apple_ref/doc/uid/TP40011210-CH5-SW2](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/EncapsulatingData/EncapsulatingData.html#//apple_ref/doc/uid/TP40011210-CH5-SW2)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T09:32:34.627

在简单的第一个是调用名称的方法`setDoublePicker`
，第二个是你设置`self.doublePicker`为`nil`。

有关更多信息，请阅读 self.var 和简单 var 之间的问题[差异](https://stackoverflow.com/questions/4627646/difference-between-calling-self-var-vs-var)。

并且还[阅读了这个官方文档。](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/WorkingwithObjects/WorkingwithObjects.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T09:33:22.107

如果您没有对实例变量使用任何自定义 setter 或 getter 方法，则两者都是相同的。如果您使用任何自定义 setter 或 getter，那么您将收到以下代码的警告

```
[self setDoublePicker:nil ]; 
```

# grails - 单选默认情况下正在生成多个“选定”项目

> ID：15543444
> 
> 赞同：2
> 
> 时间：2013-03-21T09:18:00.687
> 
> 标签：grails, gsp, html-select

我`<g:select>`的 GSP 中有一个如下所示：

```
<g:select id="location" name="criteria.location" from="${example.Location.list()}" optionKey="id" required="" value="1" class="many-to-one"/> 
```

预期的结果会是这样的，对吧？

**预期结果：**

```
<select id="location" name="criteria.location" required="" class="many-to-one" >
    <option value="1" selected="selected" >1st Location Name</option>
    <option value="2" >2nd Location Name</option>
    <option value="3" >3rd Location Name</option>
    <!-- entries omitted -->
    <option value="49" >49th Location Name</option>
    <option value="50" >50th Location Name</option>
</select> 
```

但是我得到了什么？我最终选择了*两个*项目。第 49 个选项也被选中，我无法想象为什么！在我的代码中绝对*没有*提到值“49”......

**实际结果：**

```
<select id="location" name="criteria.location" required="" class="many-to-one" >
    <option value="1" selected="selected" >1st Location Name</option>
    <option value="2" >2nd Location Name</option>
    <option value="3" >3rd Location Name</option>
    <!-- entries omitted -->
    <option value="49" selected="selected" >49th Location Name</option>
    <option value="50" >50th Location Name</option>
</select> 
```

例如，如果我将`value`in my更改`<g:select>`为“3”，则选择第 3 个选项，但无论出于何种原因，第 49 个项目仍会被选中。

**编辑：**更奇怪的是，如果我将`value`属性更改为*大于*49 的值，则选择有效，并且只选择了第 n 个选项！

**更新：**我发布了一个答案，详细说明了它是如何工作的，但我仍然不明白`<g:select>`标签的原始行为。

有谁知道这里发生了什么？

* * *

**Grails 版本：** 2.2.0

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-26T15:01:49.373

我知道我有点晚了，但我今天遇到了这个问题。首先，我认为这实际上是一个错误，不知道是否被报告，但可能与数据类型有关。
您的方法工作正常，但仅当我们不需要动态选择值时。为此，只需将绑定值转换为 Integer（Long 或您要查找的任何类型），如下所示：

```
<g:select id="location" name="criteria.location" from="${example.Location.list()}" optionKey="id" required="" value="${yourVarName as Integer}" class="many-to-one"/> 
```

也可以在**fieldValue**之后使用。我希望它可以帮助某人，并回答您关于为什么会发生这种情况的问题。但实际上，它应该被报告为一个错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T09:38:35.053

我想出了如何让它工作，但我仍然无法解释`<g:select>`标签的行为。我将`value`属性更改为“${1}”而不是“1”，如下所示：

```
<g:select id="location" name="criteria.location" from="${example.Location.list()}" optionKey="id" required="" value="${1}" class="many-to-one"/> 
```

我认为标签将我的值解释为字符串而不是数字，但我仍然看不到`<g:select>`标签如何允许*不是*多选的选择控件默认具有多个选定项。对我来说，这看起来像一个错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T09:38:00.297

为它使用 value 属性

```
value="${location ?: 49}" 
```

例如

```
<g:select id="location" name="criteria.location" from="${example.Location.list()}" optionKey="id" required="" value="${location ?: 49}" class="many-to-one"/> 
```

# wpf - 无法使用 Reuxable inc.xaml 主题

> ID：15543448
> 
> 赞同：0
> 
> 时间：2013-03-21T09:18:06.630
> 
> 标签：wpf, themes

有人使用过可重复使用的免费主题，特别是“inc.xaml”吗？如果是的话，你能帮我解决这个问题吗？我从 nukeation 下载的示例正在使用`mercury.xaml`并且工作正常，但是当我更改为 inc.xaml 时，出现了一些错误。问题是编译器无法识别名为“incbutton”的样式。下面是我的代码：

```
<!--App.xaml-->
<Application
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
x:Class="GeminiSampleProject.App"
StartupUri="MainWindow.xaml">
<Application.Resources>
    <!-- Resources scoped at the Application level should be defined here. -->
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="/ReuxablesLegacy;component/inc.xaml" />
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Application.Resources> 
```

```
//fragment of code that fire error
<Button Content="Button" HorizontalAlignment="Left" Height="25" Margin="33,16.08,0,0" VerticalAlignment="Top" Width="80" Style="{StaticResource IncButton}" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:01:48.823

我有同样的问题，我认为静态资源“IncButton”在inc.xml中不存在，但它存在于mercery.xml中。

我的问题是一样的，但是另一个静态资源，我检查了 .dll 文件，发现该资源只存在于 Mercery 中，而不存在于 inc 中。

br/J

# oracle - 从本地网络客户端连接到 Oracle 服务器

> ID：15543452
> 
> 赞同：-1
> 
> 时间：2013-03-21T09:18:44.403
> 
> 标签：oracle, oracle11g, oracle-sqldeveloper

我想通过 SQL 开发人员从客户端 IP 192.168.1.200 连接到 IP 192.168.1.18 上的 oracle

我在服务器上设置 oracle 服务器

除了sql developer，我必须在客户端上设置什么？

请耐心等待我是使用 oracle 的初学者

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:28:52.960

*   如果您使用瘦 JDBC 驱动程序，则无需在客户端机器上安装 Oracle（您只需要 JDBC 驱动程序）。*   检查您的服务器是否正在运行并且监听器是否正在运行（服务器端的“lsnrctl status”）。*   在 SQL Developer 中只需添加新连接并选择 Connect*   如果您无法访问它，请验证 URL 语法、主机/端口和实例名称（或 DBA_SERVICES 中的服务）并确保没有防火墙阻止连接*   使用“tnsping YourDbServer”验证（如果可用，Oracle 客户端安装的一部分）
    祝你好运

# c - 当我尝试释放内存时出现堆错误

> ID：15543455
> 
> 赞同：2
> 
> 时间：2013-03-21T09:18:52.040
> 
> 标签：c

在我的程序中，我使用了一个二维矩阵，其中每个单元代表一个由两个双精度组成的结构。在我的程序结束时，我想释放这个矩阵使用的所有内存。所以我写了一个这样的双循环“for”：

```
if (I != NULL)
{
    for (i = 0; i < nb_prev; i++)
    {
        for (j = 0; j < nb_samples; j++)
        {
            free(&(I[i][j]));
        }
        free(&(I[i]));
    }
} 
```

但是在第二个“for”中的第二个循环之后，我得到了一个堆错误。也许我做错了。有人可以帮我吗？

**从评论更新：**

内存分配如下：

```
Power_time **I; 
I = (Power_vtime)malloc(sizeof(Power_time*)*nb_prev); 
if (I == NULL) exit(0); 
for (i = 0; i < nb_prev; i++) { 
    I[i] = (Power_time*)malloc(sizeof(Power_versus_time)*nb_samples); 
    if (I_arriv[i] == NULL) exit(0); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:21:17.620

由于`I`是结构的二维矩阵（而不是指向结构的指针），因此不应该有内部循环。

你还需要`free(I)`在最后做。

基本上，你如何释放内存应该是你如何分配它的镜像。您有一个单`malloc()`后跟一个`malloc()`s 的一维循环。镜像是一个一维循环，`free()`最后是一个循环`free()`。

# javascript - 在 jsfiddle 中测试一个函数

> ID：15543456
> 
> 赞同：10
> 
> 时间：2013-03-21T09:18:53.867
> 
> 标签：javascript, alert

对不起，这里真的很愚蠢的问题。如果您发布有关 javascript 或 jquery 的问题，人们通常会说 - 创建一个 jsfiddle。

所以我做了。我的问题是关于让 div 使用 jquery 向上滑动，但是，我什至无法在 jsfiddle 中运行基本的 javascript 函数。

[http://jsfiddle.net/ubq6E/](http://jsfiddle.net/ubq6E/)

```
<div onclick="showit()">Hello</div>
function showit()
{
alert('hi');
} 
```

一个div，点击它调用一个javascript函数，但是jsfiddle说这个函数没有定义。你不能在jsfiddle中这样做吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-21T09:26:03.030

您已`onLoad`在 jsfiddle 中选择了默认选项。

这会导致站点将您的整个代码包装在一个回调函数中，这意味着您的`showit`函数不是 DOM0 内联事件处理程序所要求的全局函数。

根据我个人的偏好，有几种解决方法：

1.  不要使用 DOM0 内联处理程序，它们*真的很*老派 -`element.addEventListener()`改为查看并将您的标记与 JS 分开。

2.  `window.showit = function() { ... }`改为强制您的函数出现在全局名称空间中。

3.  选择“不换行”选项之一

# spring - 无法在春季将 bean 注入具有特定名称的 JSF 托管 bean

> ID：15543458
> 
> 赞同：3
> 
> 时间：2013-03-21T09:18:57.553
> 
> 标签：spring, jsf, javabeans, code-injection, managed

在以下代码段中，当我为 @ManagedBean 指定特定名称时，不会注入 userService 和 authenticationService。但是，如果我只使用没有名称的@ManagedBean，则注入工作正常。任何的想法？

```
@Component
@ManagedBean(name="user") // the injection doesn't work
//@ManagedBean // the injection works
@SessionScoped
public class UserManagedBean implements Serializable {

    // Spring User Service is injected...
    @Autowired
    UserService userService;
    @Autowired
    private AuthenticationService authenticationService; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:39:32.903

当您使用时，请`@ManagedBean(name="user")`尝试为组件指定相同的名称，看看是否有效。

```
@Component("user") 
```

# asp.net - 在 Web 应用程序中存储信用余额的最佳实践

> ID：15543462
> 
> 赞同：4
> 
> 时间：2013-03-21T09:19:06.893
> 
> 标签：asp.net, web-applications, database-design

我正在创建一个 Web 应用程序，用户可以在其中购买积分（使用真钱）并将其花在事物上。

我需要保留用户每次购买或花费积分的历史记录。

我经常需要知道用户当前的信用余额。

我通常遵循这样的原则，即两次存储相同的数据是不好的做法，即因为我有信用余额所有增加和减少的历史，我不应该将余额本身存储为单独的字段。

然而，每次用户打开一个新页面（这将显示他们当前的余额）时计算这个余额似乎有点过头了。另一方面，将它存储在数据库或网络服务器的内存中似乎是错误的，只是为了防止系统每次都必须解决它。

有没有人有这方面的经验和/或知道在这种情况下推荐的最佳做法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T09:25:52.697

我从事过几个具有类似要求的项目，即时计算当前余额并没有错——这是最不容易出错的解决方案，而这种查询是大多数数据库的设计目的；除非您在一个具有 Facebook 级别流量的网站上工作，否则类似的东西`"select sum(transactionValue) from transactions where userID = ?"`应该非常快。

将余额存储在其他地方 - 实际上是复制它 - 可能会引入细微的错误和差异，“缓存”值与基础交易不同步；完成这项工作所需的工作量可能很大。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T09:25:29.580

[非规范化](http://en.wikipedia.org/wiki/Denormalization)有它的位置。例如，一个带有论坛主题的表格也有一个列，而不是为每个主题`PostCount`做一个。`COUNT(posts)`如果您担心一致性，并且您应该担心，您可以安排定期检查（例如，对来自给定用户的每笔交易或发往给定用户的每笔交易）来测试每个用户是否`Balance`与他们的交易总和相匹配。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T09:26:31.720

不要计算每个请求的贷方余额。
每个用户的信用余额是您应该维护的。

将其保存在您的数据库中。
这样您就不必担心并发性。
当用户使用您的应用程序时，使用事务来递增递减此值。
数据库确实针对重复选择进行了优化，因此再次让您的数据库来处理它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T09:27:24.730

计算余额需要时间吗？如果没有，只需使用 SQL 实时计算。

但是当您的事务日志变得越来越大（数百万行）时，我预见到将来会出现问题。当从事务日志中选择查询需要时间时，就该缓存和预先计算余额并将其存储在您的数据库中了。

# java - 从 xsd 为特定 xml 创建 JAVA 对象时出现 UnmarshalException

> ID：15543465
> 
> 赞同：0
> 
> 时间：2013-03-21T09:19:11.873
> 
> 标签：java, maven, jaxb

我正在使用 xsd 使用 maven-jaxb-plugin (com.sun.tools.xjc.maven2) 创建 java 对象。从 XML 文件填充这些 JAVA 对象时，出现以下错误。

```
javax.xml.bind.UnmarshalException: Unexpected element "Clients". Expected elements are "{http://www.company.com/enigma/utils/export}Clients". 
```

XSD具有以下结构，

```
targetNamespace="http://www.company.com/enigma/utils/export">
        <xs:element name="Clients">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="Client">
                <xs:annotation>
                  <xs:documentation>Client element represents Client in JSP pages and name attribute for it should be unique</xs:documentation>
                </xs:annotation>
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="column" maxOccurs="unbounded" minOccurs="1">
                      <xs:complexType>
                        <xs:simpleContent>
                          <xs:extension base="xs:string">
                            <xs:attribute type="xs:string" name="header" use="required"/>
                            <xs:attribute type="xs:string" name="metaName" use="required"/>
                            <xs:attribute type="xs:string" name="dataType" use="required"/>
                          </xs:extension>
                        </xs:simpleContent>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>                  
                  <xs:attribute type="xs:string" name="name" use="required"/>
                  <xs:attribute type="xs:string" name="useResource" use="required"/>
                  <xs:attribute type="xs:string" name="resourceFile" use="required"/>
                </xs:complexType>
                <xs:unique name="UniqueClientName">
                    <xs:selector xpath="Client"></xs:selector>
                    <xs:field xpath="@name"></xs:field>
                </xs:unique>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
</xs:schema> 
```

XML如下所示，

```
<?xml version="1.0" encoding="UTF-8"?>
<Clients xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <Client name="ClientDetails" useResource="true">
            <column header="ClientDetails.ClientName" metaName="name" dataType="String"/>
            <column header="ClientDetails.PhysicalAddress" metaName="phyAddress" dataType="String"/>
            <column header="ClientDetails.City" metaName="city" dataType="String"/>
            <column header="ClientDetails.State" metaName="state" dataType="String"/>
    </Client>
</Clients> 
```

所有 JAXB 类都是使用 maven 生成的，位于 enigma/utils/export 文件夹中。我无法解决这个问题。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:35:17.730

请尝试以下代码并提供生成的类包。根据您的 xml，它应该是**com.enigma.utils.export**

```
JAXBContext jaxbContext = JAXBContext.newInstance("com.enigma.utils.export");
Unmarshaller  unmarshaller = jaxbContext.createUnmarshaller(); 
```

这可能会解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T05:47:50.150

谢谢纳伦德拉的回复。我在示例中使用了相同的代码。我发现问题出在目标命名空间上。我在 xml 中添加了与 xsd 相同的目标命名空间，瞧，错误得到了清除。请参阅下面的xml，

```
<?xml version="1.0" encoding="UTF-8"?>
<xsi:Clients xmlns:xsi=""http://www.company.com/enigma/utils/export"">
    <Client name="ClientDetails" useResource="true">
            <column header="ClientDetails.ClientName" metaName="name" dataType="String"/>
            <column header="ClientDetails.PhysicalAddress" metaName="phyAddress" dataType="String"/>
            <column header="ClientDetails.City" metaName="city" dataType="String"/>
            <column header="ClientDetails.State" metaName="state" dataType="String"/>
    </Client>
</Clients> 
```

# macos - 用于选择目录的 Cocoa 控件

> ID：15543468
> 
> 赞同：0
> 
> 时间：2013-03-21T09:19:19.673
> 
> 标签：macos, cocoa

我正在编写一个 OS X 应用程序，它生成大量文件并将它们保存在用户选择的目录中。我想使用类似于您在传输中找到的目录下拉列表。那是什么控制？

![这是什么控制？](../Images/2cf5006768232bfcdaa99a44f3595c52.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:29:20.890

这是带有样式弹出的 NSPathControl。

![在此处输入图像描述](../Images/90fa66570eb124987e6951830e2927b2.png)

编辑：**我对此进行了试验，最后做了一些调整/黑客攻击**

这包含一个具有以下设置的按钮：无标题、未选中拒绝第一响应者和未选中启用。NSPath 控件是在此之上绘制的。只是看起来像一个弹出按钮。

在这里找到[工作模型](http://www.keepandshare.com/doc/6036018/pathcontrol-popup-style-36k?da=y)。

![在此处输入图像描述](../Images/17a68cab07d124d638acca1666ae7b8c.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T10:18:59.743

您可以使用 NSPopupButton。
![在此处输入图像描述](../Images/5a7213104a549437be8cb5553a7eaebd.png)

看一下[传输的](http://www.transmissionbt.com/)[源代码](https://trac.transmissionbt.com/browser#trunk)（PrefWindow.xib 和 PrefsController.m）。

# tomcat - 如何根据 IP 地址停止/启动远程 tomcat

> ID：15543469
> 
> 赞同：0
> 
> 时间：2013-03-21T09:19:30.083
> 
> 标签：tomcat

现在我正在使用下面的脚本来启动和停止服务器中的 tomcat。

现在我想修改它以停止或启动基于 IP 地址的远程 tomcat。

请给我一些建议。

```
CATALINA_HOME=/home/tomcat; export CATALINA_HOME
start() {
        echo -n "Starting Tomcat:  "
        su $TOMCAT_OWNER -c $CATALINA_HOME/bin/startup.sh           
        status=$(tail -50  $CATALINA_HOME/logs/catalina.out | grep "Server startup")
        echo "$status"
}
stop() {
        echo -n "Stopping Tomcat: "
        su $TOMCAT_OWNER -c $CATALINA_HOME/bin/shutdown.sh              
        ps -eaf | grep "$CATALINA_HOME/bin" | grep -v "grep" |awk -F " " '{print $2}' >> proc_id
        cat proc_id | while read line
        do
        kill -9 $line >> Tomcat_stop.log
        done
        rm -rf proc_id
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:24:02.610

您是否有理由不能只 ssh 到服务器并重新启动 tomcat？

那将是远程重新启动tomcat的正常方式。

# paint - 如何在 Chrome 的时间线框架选项卡中找出导致绘制事件的原因

> ID：15543471
> 
> 赞同：8
> 
> 时间：2013-03-21T09:19:45.707
> 
> 标签：paint, google-chrome-devtools

在 Chrome 的“时间轴”选项卡的“帧”选项卡中调试慢速绘制时，是否可以弄清楚绘制了什么以及导致绘制的原因？绘画事件似乎只包含有关绘画时间、尺寸和位置的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-31T05:54:37.610

为了简短起见 - 您应该结合使用**Show paint rectangles**、**Enable Continuous page repainting**和 Timeline 视图。您可以在 Drawer的**Rendering**选项卡下找到 Show paint rectangles 和 Enable Continuous page repainting 。

在 Google 的 Web Fundamentals 网页上有更多信息：[Simplify Paint Complexity and Reduce Paint Areas](https://developers.google.com/web/fundamentals/performance/rendering/simplify-paint-complexity-and-reduce-paint-areas#use_chrome_devtools_to_quickly_identify_paint_bottlenecks)。

# entity-framework - 实体框架代码优先默认数据库位置

> ID：15543474
> 
> 赞同：3
> 
> 时间：2013-03-21T09:19:50.890
> 
> 标签：entity-framework, visual-studio-2012

我正在尝试使用 Visual Studio 2012 Express for Desktop遵循[http://msdn.microsoft.com/en-us/data/jj193542上的视频教程。](http://msdn.microsoft.com/en-us/data/jj193542)

我创建了 POCO 和一个 DbContext，运行了一些示例查询并且它起作用了。但我没有提供任何连接字符串。那么数据库在哪里呢？（可能是 sdf 或 mdf 文件？）

在教程中，这个人使用 SQL Server 对象资源管理器查看数据库，但我在 VS Express 中找不到该视图。

作为参考，这里是生成的默认 App.config。

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
  </configSections>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
  </startup>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
  </entityFramework>
</configuration> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T13:19:37.627

“如果安装了 SQL Express（包含在 Visual Studio 2010 中），则在本地 SQL Express 实例 (.\SQLEXPRESS) 上创建数据库。如果未安装 SQL Express，则 Code First 将尝试使用 LocalDb ((localdb)\v11 .0) - LocalDb 包含在 Visual Studio 2012 中"

欲了解更多信息：http: [//msdn.microsoft.com/en-us/data/jj591621.aspx](http://msdn.microsoft.com/en-us/data/jj591621.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-30T11:59:55.940

@Default 是正确的，默认的 SQL 服务器`(LocalDb)\mssqllocaldb`在 VS 2015 和 2017 中。

# android - Android 操作栏 Sherlock 始终在下拉列表中显示操作项

> ID：15543476
> 
> 赞同：4
> 
> 时间：2013-03-21T09:19:55.817
> 
> 标签：android, android-actionbar, actionbarsherlock, android-menu

我设置了三个通过 XML 菜单添加到 ABS 的操作项，如下所示：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@+id/menu_share_app"
        android:icon="@drawable/share_ab"
        android:showAsAction="collapseActionView"
        android:title="@string/menu_share_app"/>
    <item
        android:id="@+id/menu_search"
        android:icon="@drawable/share_ab"
        android:showAsAction="always"
        android:title="@string/menu_search"/>
    <item
        android:id="@+id/menu_settings"
        android:icon="@drawable/share_ab"
        android:showAsAction="collapseActionView"
        android:title="@string/menu_settings"/>

</menu> 
```

我想始终在下拉列表中显示搜索项和其他两个项，我将 showasaction 设置为“collapseActionView”，但没有得到任何下拉列表。这是预期的示例图片。谢谢！:)![在此处输入图像描述](../Images/a136780be58ca5a1cce11b07ff76da3f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T09:25:23.150

我只是更改了代码和顺序。

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:id="@+id/menu_search"
        android:icon="@drawable/share_ab"
        android:showAsAction="always" 
        android:title="@string/menu_search"/>
    <item
        android:id="@+id/menu_share_app"
        android:icon="@drawable/share_ab"
        android:showAsAction="never"
        android:title="@string/menu_share_app"/>
    <item
        android:id="@+id/menu_settings"
        android:icon="@drawable/share_ab"
        android:showAsAction="never"
        android:title="@string/menu_settings"/>
</menu> 
```

如果您的设备中有物理菜单按钮（例如 Nexus S），则不会显示虚线。即使您的 AVD 模拟具有物理菜单按钮的设备，也会发生同样的事情。当您按下菜单按钮时，它会显示出来。

# yii - 如何仅将 afterSave 方法实现到特定的控制器操作？

> ID：15543477
> 
> 赞同：0
> 
> 时间：2013-03-21T09:19:59.037
> 
> 标签：yii

假设我有模型 A ..那么这个模型 A 被许多控制器使用...现在我想实现 afterSave 方法，只在使用模型 A 的控制器之一中。例如，在控制器 C 中它调用 save() 函数，所以我希望仅在该函数中调用 afterSave。那是怎么回事？

```
protected function afterSave()
{
    parent::afterSave();
    if($this->isNewRecord)
    {
        echo "hello";
        exit;
    }
} 
```

因为： afterSave() 影响所有使用模型 A 的控制器的所有 save() 调用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:29:15.043

你可以在你的`afterSave`函数中尝试这个：

```
if (Yii::app()->controller->id!=='yourcontroller')
{
  // do what you want
} 
```

如果需要，您还可以测试`Yii::app()->controller->action->id`.

**编辑**：或者看看*Jelle de Fries*的回答。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T12:52:28.630

我不明白为什么你需要一个 afterSave() 方法。在您的操作中，您正在调用 $model->save()。打电话后你不能做你必须做的事情吗？像这样：

```
public function actionMyAction(){
    $model=new myModel;
    $model->attribute = 5;
    $model->save();
    $model->doLogicAfterSave(); //<-this
    $this->render('myView',array(
        'model'=>$model,
    ));
} 
```

因为它仅适用于 1 个控制器。

# jquery - 用jQuery改变按钮的功能？

> ID：15543482
> 
> 赞同：5
> 
> 时间：2013-03-21T09:20:11.840
> 
> 标签：jquery, button, click

这可能是一个愚蠢的问题，但我就是无法正确回答。我可以用普通的 JavaScript 改变按钮的功能，但不能用 jQuery。我的目标是一个非常简单的文本调整大小按钮。这个按钮需要两个不同的功能；一个使文本变大并将单击功能更改为另一个功能的功能，另一个功能使文本变小并再次将单击功能更改为第一个功能。由于相同的按钮将用于放大和缩小文本 Sixe，因此我需要它来工作。我现在正在做一个学校项目，我们只能使用 jQuery/jQuery UI 来完成这项任务。

使用普通的 JavaScript，它会是这样的：

```
var button = document.getElementById('click-button');
button.onclick = firstClick;

function firstClick (){ 
    button.onclick=secondClick;
}

function secondClick(){ 
    button.onclick=firstClick;
} 
```

如何使用 jQuery 实现相同的目标？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-21T09:25:01.653

像下面的代码这样的东西会起作用。

```
$("#click-button").on('click', firstClick)

function firstClick() {
    alert("First Clicked");
    $("#click-button").off('click').on('click', secondClick)
}

function secondClick() {
    alert("Second Clicked");
    $("#click-button").off('click').on('click', firstClick)
} 
```

这里的工作示例：http: [//jsfiddle.net/K3Xk4/](http://jsfiddle.net/K3Xk4/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T09:25:20.067

您不需要每次都更改处理程序。您可以使用函数和变量来检查您是否已经单击了按钮（或没有）。

```
var even = false;

$('#click-button').click(function() {
    if(even) {
        doEven();
    } else {
        doOdd();
    }

    even = !even;
});

function doOdd() {
    // first click, third click, fifth click, etc
}

function doEven() {
    // second click, fourth click, sixth click, etc
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T09:33:47.003

你可以简单地这样做

```
<button id="click-button">test</button>

    var flag = 1;
    $("#click-button").click(function(){
        if(flag == 2){
            secondClick(); flag = 1;
        }else{
            firstClick(); flag = 2;
        }
    });

    function firstClick(){
        alert("First Click.");
    }

    function secondClick(){
        alert("Second Click.")
    } 
```

`check here [http://jsfiddle.net/K3Xk4/5/](http://jsfiddle.net/K3Xk4/5/)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T09:27:02.493

我会使用自定义事件和数据处理：

```
$('#click-button').on({
    firstClick : function()
    {
        // do something
        alert(111);

        // switch back
        $(this).data('nextClick', 'secondClick');
    },

    secondClick : function()
    {
        // do something
        alert(222);

        // switch back
        $(this).data('nextClick', 'firstClick');
    },

    click : function()
    {
        var nextClick = $(this).data('nextClick') || 'firstClick';
        $(this).trigger( nextClick );
    }
}); 
```

这里的例子：http: [//jsfiddle.net/psyketom/nbSMg/](http://jsfiddle.net/psycketom/nbSMg/)

您始终使用相同的元素范围，无需在函数之外定义变量。

可能有点矫枉过正，但最容易维护。

# python - 将参数传递给要装饰的类方法的装饰器

> ID：15543484
> 
> 赞同：3
> 
> 时间：2013-03-21T09:20:22.393
> 
> 标签：python, flask, decorator

我正在尝试在烧瓶中定义一个装饰器，它最终将装饰传递该类实例参数的类方法。这是我真正想做的一个例子。

```
from functools import wraps
def user_permission(myname):
    def decorator(f):
        @wraps(f)
        def decorated(*args,**argws):
            if myname == 'My Name':
                return f(*args,**argws)
            else:
                return "Not Permitted"
        return decorated
    return decorator 
```

我的经理类定义为：

```
class Manager(flask.views.MethodView):

def __init__(self,name):
    self.name = name
@user_permission(self.my_name)
def post(self):
    return "Response"

def get(self):
    return "Response" 
```

我想要做的是将类变量传递给装饰器。是的，当时没有定义“self”，但“@decorator.user_permission( **self.my_name** )”实际上是我正在尝试的，因为我的问题还没有解决。

我无法从[HERE](https://stackoverflow.com/questions/1263451/python-decorators-in-classes)找到解决方案。请问有人知道这些东西吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T09:25:37.033

正如你所说，`self`当时没有定义。这永远不会起作用，因为在定义类时会执行装饰器，而您希望在调用实例方法时运行某些东西。

但是，我认为您确实使这一点复杂化了。`self`传递给方法本身。因此没有理由尝试将其作为装饰器的参数，因为装饰器可以访问方法参数。这会简单得多：

```
from functools import wraps
def user_permission():
    @wraps(f)
    def decorated(self, *args, **kwargs):
        if self.myname == 'My Name':
            return f(self, *args, **kwargs)
        else:
            return "Not Permitted"
    return decorated 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T09:25:04.907

`self`只是一个论点。你不需要装饰工厂。

```
def user_permission(f):
    @wraps(f)
    def decorated(self, *args, **kw):
        if self.myname == 'My Name':
            return f(self, *args, **kw)
        else:
            return "Not Permitted"

    return decorated 
```

# python - 裁剪函数 Jython JES

> ID：15543488
> 
> 赞同：1
> 
> 时间：2013-03-21T09:20:31.963
> 
> 标签：python, image, jython, crop, jes

嗨，我正在尝试在 Jython Environment For Students 中创建裁剪功能，这就是我到目前为止所拥有的。

我还试图弄清楚如何使画布成为所有新像素都将占用的大小。

任何帮助

```
def crop(pic, startX, endX, startY, endY):
    canvas = makeEmptyPicture(500, 800)
    for sourceX in range(startX, endX):
        for sourceY in range(startY, endY):
            color = getColor(getPixel(pic, sourceX, sourceY))
            setColor(getPixel(canvas, startX, startY), color)
            startY = startY + 1
        startX = startX + 1
    show(canvas) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-23T23:49:05.533

尝试这个：

*注意：结果画布的大小可以从**(endX - startX) x (endY - startY)获得***

```
def crop(pic, startX, endX, startY, endY):  
    # Check if the cropping bounds are OK with size of the original picture 
    if (endX - startX > 0) and (endY - startY > 0) and \
                         (endX < getWidth(pic)) and (endY < getHeight(pic)):
        # Create a canvas with correct size
        canvas = makeEmptyPicture(endX - startX, endY - startY)
        # Browse the interesting part
        for sourceX in range(startX, endX):
            for sourceY in range(startY, endY):
                color = getColor(getPixel(pic, sourceX, sourceY))
                # Write the pixels, 
                # starting from 0 (=startX(Y)-startX(Y)) to endX(Y)
                setColor(getPixel(canvas, 
                              sourceX - startX, sourceY - startY), color)
        return canvas
    else:
        # Print error when passing wrong bounds
        printNow("Error: bad cropping bounds ! - Expected [0.." + 
            str(getWidth(pic)-1) + "] x [0.." +  str(getHeight(pic)-1) + "]")        
        return None

def main():
  file = pickAFile()
  picture = makePicture(file)
  cropPic = crop(picture, 50, 150, 50, 180)
  if (cropPic):
      show(cropPic)

main() 
```

给予：

* * *

………………………………………………………………………………………………………………………… ![在此处输入图像描述](../Images/88dc351afa2c75e566afcb8d09675ede.png)_ …………………………………………………………………………………… ![在此处输入图像描述](../Images/2f55acd68f6fa968d4984173f1552193.png)_

* * *

输出参数错误：

```
>>> cropPic = crop(picture, 50, 500, 50, 180)
>>> 
======= Loading Progam =======
Error: bad cropping bounds ! - Expected [0..258] x [0..193] 
```

# php - 遍历 mongodb 查询返回的数组

> ID：15543491
> 
> 赞同：2
> 
> 时间：2013-03-21T09:20:37.270
> 
> 标签：php, mongodb, iteration

我有以下格式的 mongodb 集合：

```
{
        "_id" : ObjectId("5141916511e5b498fd2031c4"),
        "itemid" : 1,
        "recommendations" : [
                {
                        "itemid" : 216,
                        "rating" : 0.875297364790784
                },
                {
                        "itemid" : 246,
                        "rating" : 0.8793363655122852
                }
        ]
}
{
        "_id" : ObjectId("5141916511e5b498fd2031c5"),
        "itemid" : 2,
        "recommendations" : [
                {
                        "itemid" : 60,
                        "rating" : 0.9405825249353504
                },
                {
                        "itemid" : 76,
                        "rating" : 0.8822827294664317
                }
        ]
} 
```

我想检索给定 itemid 的推荐，然后对其进行迭代以打印所有推荐的 itemid 和评级。我为此使用 php。

当我尝试迭代返回的游标时，它会抛出“致命错误：在非对象上调用成员函数 hasNext()”错误。查询返回的结果集似乎不是游标类型。

下面是我正在使用的代码：

```
<?php
$mongodb = new Mongo("10.128.170.49:27017");
$database = $mongodb->ProductData;
$collection = $database->Recommendation1;

$cursor1 = $collection->findOne(array("itemid" => 1),array('recommendations'));

var_dump($cursor1);

echo "<hr/><p>iterating over a cursor</p>";
while ($cursor1->hasNext()): $document = $cursor1->getNext(); 
                        $itemid= $document['itemid'];
                        $probable_rating= $document['rating'];                      
                         echo ($itemid)."<br/>";
                         echo ($probable_rating)."<br/>";
                         echo "<hr/>";
endwhile;
?> 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T09:23:59.540

您必须更改`findOne()`为`find()`

*   `findOne()`返回第一个找到的结果
*   `find()`返回一个游标

# sharepoint - SharePoint CAML 查询 Orderby 不支持降序属性。

> ID：15543495
> 
> 赞同：3
> 
> 时间：2013-03-21T09:20:54.993
> 
> 标签：sharepoint, sharepoint-2007, caml

尝试使用 CAML 查询从 SharePoint 列表中获取数据。

我正在使用降序属性，但没有按预期工作。

请在下面找到代码。

```
<OrderBy>
    <FieldRef Name='ID' Descending = 'True'/>
</OrderBy> 
```

上面的代码仍然获取最小的 ID（其中 ID 是 1,2,3..等等），在我的情况下它获取 ID=1

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-21T09:48:00.103

AFAIK，没有用于指定降序的“降序”属性。

相反，您必须使用 Ascending 属性，并指定“false”作为值。

```
<OrderBy>
    <FieldRef Name='ID' Ascending='FALSE'/>
</OrderBy> 
```

从[这个页面可以看出](http://msdn.microsoft.com/en-us/library/ms442728.aspx)

> **升序**——可选的布尔值。这指定了在视图中定义的 FieldRef 元素的排序顺序。默认值是true。

# c++ - 从 Point2f 中提取数据

> ID：15543496
> 
> 赞同：0
> 
> 时间：2013-03-21T09:20:56.160
> 
> 标签：c++, opencv, computer-vision

我正在开发一个需要找到红色部分的代码。我正在使用该功能 `minEnclosingCircle`来获取图像的中心。

该函数给我中心的方式是矢量格式`vector<Point2f>center( contours.size() );`。但是，我需要这些数据来确定感兴趣区域 (ROI)。有什么方法可以从该点提取数据，以便我可以在 X 和 Y 中有两个坐标在一个整数中？

谢谢！

- 更新 -

我将发布一些代码以尝试更好地解释我想要做什么：

```
vector<vector<Point> > contours_poly( contours.size() );
vector<Point2f>center( contours.size() );
vector<float>radius( contours.size() );

for( int i = 0; i < contours.size(); i++ )
{   
    approxPolyDP( Mat(contours[i]), contours_poly[i], 3, true );
    minEnclosingCircle( (Mat)contours_poly[i], center[i], radius[i] );
 } 
```

因此，一旦我从图像中获得轮廓，我就会应用该函数`minEnclosingCicrle`来确定中心。我是 OpenCV 的新手。我想它找到的圆心保存在这个 Point2f 的向量中。我想要做的是访问这些点，以便获得我的对象的位置以确定对象周围的 ROI。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T10:39:47.280

从你的评论

> 假设我有 20 个圆圈，并且我知道第 15 个圆圈是最大的。我想知道中心 [15] 的 de X 和 Y 位置，它是一个 point2f，但在一个向量内。

没有边界检查：

```
float x = center[15].x;
float y = center[15].y; 
```

带边界检查：

```
float x = center.at(15).x;
float y = center.at(15).y; 
```

关于向量的范围，如果索引是`>= center.size()`，则超出范围。所以你可以自己做检查：

```
 int idx = 15;
 if (idx < center.size())
 {
   // OK to access with index 15
 } 
```

请注意，索引从 开始`0`，因此您在这里访问的是第 16 个点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:28:39.363

minEnclosureCircle 返回一个中心作为 Point2f 和一个半径，不知道你是如何得到一个向量..？

在任何情况下，您都可以直接访问 Point2f 的坐标，因为它们是公共成员。

```
Point2f a;
int x = (int)a.x;
int y = (int)a.y; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T09:28:09.873

如果您使用 IDE，那么您可以输入类似

```
Point2f p;
p. 
```

IDE 将帮助您完成课程的正确字段。

如果您编写的程序没有智能自动完成，您只需查看 opencv 的源代码即可查看（这部分代码来自 opencv 源代码并根据许可分发，您可以在 opencv 网站和源代码中找到）：

```
typedef Point_<float> Point2f;
....
template<typename _Tp> class CV_EXPORTS Point_{
....
    _Tp x, y; //< the point coordinates 
```

# javascript - LESS（客户端）不编译某些 CSS 属性

> ID：15543499
> 
> 赞同：1
> 
> 时间：2013-03-21T09:21:06.207
> 
> 标签：javascript, css, internet-explorer, browser, less

我正在开发的网站需要支持 IE7 并且`display: inline-block`无法在那里工作。

通过四处搜索，我看到了这一点`*display: inline;`并且`*zoom: 1;`可以解决这个问题。问题是这并没有出现在我用 LESS 编译的 CSS 中。

甚至`zoom: 1;`不编译（没有星号）。可以肯定的是，我在同一个 CSS 类中添加了一些其他有效属性并且有效。

总之：我无法让`zoom`IE7 CSS 属性选择器 (*) 在我的浏览器中使用 LESS。有什么解决办法吗？

```
<script>less = {env: 'development'};<script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-20T09:08:11.117

少 1.5

```
// IE7 inline-block
// ----------------
.ie7-inline-block() {
  *display: inline; /* IE7 inline-block hack */
  *zoom: 1;
}

p{
.ie7-inline-block();
} 
```

编译为：

```
p {
  *display: inline;
  /* IE7 inline-block hack */
  *zoom: 1;
} 
```

# linux - 将特定的虚拟地址映射到特定的物理地址

> ID：15543502
> 
> 赞同：0
> 
> 时间：2013-03-21T09:21:16.897
> 
> 标签：linux, memory, kernel, memory-address

我正在编写一个 Linux 内核模块，该模块需要将特定的物理地址映射到特定的虚拟地址，但我只是找不到方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T07:48:13.073

好的，这是我目前的解决方案。要映射`phys_addr`到`virt_addr`我使用此代码：

```
page = pfn_to_page(virt_addr >> PAGE_SHIFT);
pte = get_locked_pte(&init_mm, phys_addr, &ptl);
set_pte_at(&init_mm, phys_addr, pte, mk_pte(page, VM_READ | VM_WRITE | VM_EXEC));
spin_unlock(ptl);
flush_tlb_all(); 
```

一些解释：我使用`pfn_to_page`func 来获取与我的`virt_addr`. 我得到了页表条目 ( `pte`) 和`get_locked_pte`func，它需要与想要的物理地址`pte`和未初始化的自旋锁 ( `ptl`) 相对应的物理地址。`set_pte_at`然后，我实际上使用func 和宏映射页面`mk_pte`，解锁自旋锁并刷新 tlb 缓存。

这个解决方案似乎工作得很好，尽管它不能在上下文切换中存活下来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:36:11.483

您能告诉我们您正在使用的内核版本和 CPU 架构/类型吗？一般来说，如果您要映射到的具体虚拟地址不与内核虚拟地址重叠（例如0xC0000000），并且如果您的设备正在使用的物理地址与系统内存物理地址范围不重叠，您可以使用低级函数（如果没有，您可以在内核启动期间使用汇编语言直接设置 MMU TLB 条目）设置 MMU TLB 条目以在内核启动期间将特定地址映射到特定的虚拟地址。我可以提供一个基于 2.6.10 内核版本和 Freescale PowerPC CPU 的示例，有一个函数 io_block_mapping 可以做你想做的事情。

# mysql - 如何在mysql中将2个表加入1个？

> ID：15543505
> 
> 赞同：1
> 
> 时间：2013-03-21T09:21:29.217
> 
> 标签：mysql, sql, join

如何在 mysql 中将 2 个表加入 1 个表？

```
SET FOREIGN_KEY_CHECKS=0;

-- ----------------------------
-- Table structure for `p`
-- ----------------------------
DROP TABLE IF EXISTS `p`;
CREATE TABLE `p` (
  `id` int(11) NOT NULL auto_increment,
  `name` varchar(255) default NULL,
  PRIMARY KEY  (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=3 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of p
-- ----------------------------
INSERT INTO `p` VALUES ('1', 'jimmy');
INSERT INTO `p` VALUES ('2', 'tina'); 
```

```
SET FOREIGN_KEY_CHECKS=0;

-- ----------------------------
-- Table structure for `t`
-- ----------------------------
DROP TABLE IF EXISTS `t`;
CREATE TABLE `t` (
  `id` int(11) NOT NULL,
  `tag` varchar(255) NOT NULL default '',
  `value` varchar(255) default NULL,
  PRIMARY KEY  (`id`,`tag`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of t
-- ----------------------------
INSERT INTO `t` VALUES ('1', 'name', '111');
INSERT INTO `t` VALUES ('1', 'age', '30');
INSERT INTO `t` VALUES ('2', 'bag', 'miki');
INSERT INTO `t` VALUES ('2', 'boy friend', 'jimmy'); 
```

图片显示了我想要得到的东西。![在此处输入图像描述](../Images/595713526e005abe69aba089b9834f1c.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T09:25:32.940

```
SELECT  p.id, p.name,
        GROUP_CONCAT(CONCAT(tag, ':', value)) tags
FROM    p
        INNER JOIN t
            ON p.iD = t.id
GROUP   BY p.id, p.name 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/edbb5/3)
*   [GROUP_CONCAT()](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

输出

```
╔════╦═══════╦═══════════════════════════╗
║ ID ║ NAME  ║           TAGS            ║
╠════╬═══════╬═══════════════════════════╣
║  1 ║ jimmy ║ age:30,name:111           ║
║  2 ║ tina  ║ bag:miki,boy friend:jimmy ║
╚════╩═══════╩═══════════════════════════╝ 
```

# php - 如何将计数信息显示到页面

> ID：15543506
> 
> 赞同：0
> 
> 时间：2013-03-21T09:21:33.007
> 
> 标签：php, sql, count, output

我创建了一个查询来选择和计算一个表中的特定字段以及另一个表中的对应名称，当我在本地主机上的 sql 中运行查询时，该查询有效，但无法弄清楚如何将结果显示到页面

例如

```
Item name1 - count 
tiem name2 - count 
```

这是查询

```
 $objects->connect();

// Count Query
    $countQuery = 'SELECT a.`subId`, b.`subId`, b.`subTitle`, COUNT(a.`subId`) FROM `tbl_list`a, `tbl_subs`b WHERE a.`subId` = b.`subId` GROUP BY a.`subId`';

//Run the query
$objects->query($countQuery); 
```

我将如何将结果显示到页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:24:34.663

首先，您的函数`$objects->query($countQuery);`必须返回结果数组，您可以像这样得到：

```
$result = $objects->query($countQuery); 
```

然后将循环应用于 `$result;`

是添加`COUNT(a.subId) as cnt`以及然后喜欢`echo $result[0]->cnt;` 取决于您的返回数组格式。

# javascript - JavaScript：将字符转换为代码或字符串转换为二进制数组（数字数组）的非标准方法

> ID：15543510
> 
> 赞同：0
> 
> 时间：2013-03-21T09:21:45.303
> 
> 标签：javascript, arrays, string, binary, character

除了 .charCodeAt(i) 之外，JavaScript 中是否有将字符转换为其代码的技巧？我想以最快的方式将字符串转换为二进制数组（即比 charCodeAt 更快）。但我也有兴趣了解慢速方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:46:06.020

你可以做一个查找表，但我怀疑它会更快。就像是：

```
function(str){
    var codes = {},
        output = [];

    for (var i=0; i<256; i++){
        String.codes[fromCharCode(i)] = i;
    }

    for (var i=0; i<str.length; i++){
        output.push(codes[str[i]]);
    }

     return output;
} 
```

一般来说，如果您可以使用本机代码，请使用本机代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:38:28.957

我怀疑你会找到比这段代码更快的东西来完成你想要的：

```
function getCharArray(str)
{
    var chars = [];
    for (var i = 0, n = str.length; i != n; ++i) {
        chars.push(str.charCodeAt(i));
    }
    return chars;
} 
```

您必须这样做，因为 JavaScript 没有单独的字符类型。即使是单个字符仍然是字符串，因此您需要`String.charCodeAt()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T11:03:04.690

javascript 中的字符串是 unicode，而不是 ascii，这意味着单个字符的代码可能超过一个字节。

```
"€".charCodeAt(1) = 8364 
```

这适合两个字节。如果将其转换回二进制，则可以将其解释为一个 2 字节字符或 2 个 1 字节字符。只是没有办法知道。知道 unicode char 的长度很棘手。这可能会帮助您了解为什么这个问题很难解决：[http ://www.joelonsoftware.com/articles/Unicode.html](http://www.joelonsoftware.com/articles/Unicode.html)

当然，我并不是说你不能将 unicode 字符串转换为二进制，而是说这是你需要解决的任务，而不仅仅是将单个字符转换为字节。

# android - 如何将 PictureDrawable 转换为位图

> ID：15543516
> 
> 赞同：4
> 
> 时间：2013-03-21T09:22:03.283
> 
> 标签：android, bitmap, type-conversion, image

如何将 PictureDrawable 对象转换为 Bitmap 对象？我尝试了下面显示的以下代码，它给出了空指针。

```
 //Convert PictureDrawable to Bitmap
            private Bitmap pictureDrawable2Bitmap(PictureDrawable pictureDrawable){
            Bitmap bitmap = Bitmap.createBitmap(pictureDrawable.getIntrinsicWidth(),pictureDrawable.getIntrinsicHeight(), Config.ARGB_8888);
            Toast.makeText(HTMLActivity.this, "bitmap " + bitmap.toString(), Toast.LENGTH_LONG).show();
            Canvas canvas = new Canvas(bitmap);
            canvas.drawPicture(pictureDrawable.getPicture());
            return bitmap;
        } 
```

这是显示我在代码中所做的示例；

```
 private Picture picture;
    private String url;
    private WebView webview;
    private Bitmap HTMLBitmap;
    private PictureDrawable HTMLPicDraw;

     // goal is to convert WebView --> Picture --> PictureDrawable --> Bitmap
        picture = webview.capturePicture();
        HTMLPicDraw = new PictureDrawable(picture);
      // HTMLPicDraw a PictureDrawable object is good, no null pointer exception here
      // what is left is to go from PictureDrawable to Bitmap 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:27:23.870

使用它对我有用的belove代码.....

```
//  get bitmap from view
public static Bitmap getBitmapFromView(View view) {
            Bitmap returnedBitmap = Bitmap.createBitmap(view.getWidth(), view.getHeight(),Bitmap.Config.ARGB_8888);
            Canvas canvas = new Canvas(returnedBitmap);
            Drawable bgDrawable =view.getBackground();
            if (bgDrawable!=null) 
                bgDrawable.draw(canvas);
          /*  else 
                canvas.drawColor(Color.WHITE);*/
            view.draw(canvas);
            return returnedBitmap;
        } 
```

# c# - 来自 C# 的 SQL Server 配置管理器启动参数

> ID：15543519
> 
> 赞同：0
> 
> 时间：2013-03-21T09:22:12.820
> 
> 标签：c#, sql-server

我们需要对大约 100 台计算机进行更改，为什么我希望这可以通过应用程序来实现。

所有计算机都需要：

1.  关闭 MSSQL 服务
2.  更改启动参数（添加 -m）
3.  启动 MSSQL 服务
4.  创建数据库“测试”
5.  关闭 MSSQL 服务
6.  移除参数 -m
7.  启动 MSSQL 服务

所有受影响的计算机都运行 SQL Server 2012

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T09:33:53.210

电源外壳。请参阅[运行远程命令](http://technet.microsoft.com/en-us/library/dd819505.aspx)。

使用通用[`Get-Service`](http://technet.microsoft.com/en-us/library/dd347591.aspx)和[`Set-Service`](http://technet.microsoft.com/en-us/library/dd315324.aspx)配置 Windows 服务，包括 SQL Server 服务。请参阅[管理服务](http://technet.microsoft.com/en-us/library/dd315239.aspx)。将[SQL Server PowerShell](http://technet.microsoft.com/en-us/library/cc281947.aspx)提供程序用于 SQL Server 特定的东西。

网上有很多教程，例如。[适用于 SQL Server 开发人员和 DBA 的实用 PowerShell](https://www.simple-talk.com/sql/database-administration/practical-powershell-for-sql-server-developers-and-dbas-%E2%80%93-part-1/)。

# android - 使用 API 级别 15 目标创建堆叠的操作栏

> ID：15543520
> 
> 赞同：1
> 
> 时间：2013-03-21T09:22:14.280
> 
> 标签：android

我想要使​​用 API 级别 15 目标的操作栏，其中通过按下操作栏，它应该以堆叠方式显示项目 1 在另一个垂直列之后。

```
Item3
Item2
Item1 
```

# java - Log4j 和 commons-logging 的混合使用会导致“类加载死锁”？

> ID：15543521
> 
> 赞同：10
> 
> 时间：2013-03-21T09:22:14.463
> 
> 标签：java, multithreading, log4j, deadlock, apache-commons-logging

我想我发现了一种情况，即 log4j a) 直接和 b) 通过 commons-logging 混合使用会导致某种类加载死锁。我不确定这种情况是否可能发生（JVM 不应该检测到这种情况吗？）以及如何处理它。

### 问题

在我们的构建系统中，我们目前正在按顺序运行我们的单元测试——为了使构建更快，我们显然可以改变它来并行运行我们的单元测试。但是，如果我们这样做，一些构建会遇到执行超时。在分析这种“挂起构建”的线程转储时，我们发现自己在不同的模块中大部分时间都涉及不同的测试。但它总是归结为尝试初始化 Logger 的两个线程：一个使用`Logger.getLogger`（直接使用 log4j），另一个使用`LogFactory.getLog`（使用 commons-logging）。

### 我的分析

所以我们有一个线程（直接使用 log4j 的那个）在这个地方等待：

```
"pool-1-thread-3" prio=10 tid=0x00007f6528ca6000 nid=0x6f8f in Object.wait() [0x00007f64d9ca6000]
  java.lang.Thread.State: RUNNABLE
at org.apache.log4j.LogManager.<clinit>(LogManager.java:82)
at org.apache.log4j.Logger.getLogger(Logger.java:117)
at de.is24.platform.contacts.domain.PhoneNumberFormat.<clinit>(PhoneNumberFormat.java:21) 
```

不幸的是，这是一条相当“拥挤”的路线：

```
Hierarchy h = new Hierarchy(new RootLogger((Level) Level.DEBUG)); 
```

另一个线程（使用 commons-logging）在这里等待：

```
"pool-1-thread-2" prio=10 tid=0x00007f6528bf9800 nid=0x6f8e in Object.wait() [0x00007f64d9da7000]
  java.lang.Thread.State: RUNNABLE
at org.apache.log4j.Priority.<clinit>(Priority.java:45)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:171)
at org.apache.commons.logging.impl.Log4JLogger.class$(Log4JLogger.java:37)
at org.apache.commons.logging.impl.Log4JLogger.<clinit>(Log4JLogger.java:45)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
at org.apache.commons.logging.impl.LogFactoryImpl.newInstance(LogFactoryImpl.java:529)
at org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:235)
at org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:209)
at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:351) 
```

这很简单：

```
final static public Priority FATAL = new Level(FATAL_INT, "FATAL", 0); 
```

所以对我来说，似乎第二个线程正在初始化类`Priority`并等待加载`Level`类。第一个线程可能会尝试加载`Level`类（该行中的其他内容似乎无关），并且随着`Level`类 extends `Priority`，等待`Priority`类被加载。
我们有我们的僵局。

那么，你能告诉我这个分析是否正确吗？还是我错过了什么？

**更新我**

我写了一些测试用例，你可以在这里找到它们：[https ://github.com/sebastiankirsch/classloading](https://github.com/sebastiankirsch/classloading)

有几个测试用例证明了这个问题：

1.  `TestLoadingByClassForName`应该很快导致死锁（在我的机器上每运行三次）
2.  `TestLoadingMixed`表示问题的一个版本被剥离到观察到的堆栈跟踪的最小值；这个失败的频率要低得多（大约是 4 倍）
3.  `TestMixedLoggerInstantiation`模仿行为：一个类使用 log4j 实例化记录器，另一个使用 commons-logging。在这里很难发现死锁，因为涉及更多代码 - 我需要添加一个随机睡眠，这当然需要适应您的机器

`TestMixedLoggerInstantiation`这是挂起的测试用例的堆栈跟踪。

```
Full thread dump Java HotSpot(TM) 64-Bit Server VM (20.1-b02 mixed mode):

"UseLog4JLogger" prio=10 tid=0x00007fa1f017d800 nid=0x7bd8 in Object.wait() [0x00007fa1e5ba4000]
   java.lang.Thread.State: RUNNABLE
    at org.apache.log4j.LogManager.<clinit>(LogManager.java:82)
    at org.apache.log4j.Logger.getLogger(Logger.java:117)
    at net.tcc.classloading.UseLog4JLogger.run(UseLog4JLogger.java:23)

"UseCommonsLoggingLogFactory" prio=10 tid=0x00007fa1f00e5000 nid=0x7bd7 in Object.wait() [0x00007fa1e5ca4000]
   java.lang.Thread.State: RUNNABLE
    at org.apache.log4j.Priority.<clinit>(Priority.java:45)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:169)
    at org.apache.commons.logging.impl.Log4JLogger.class$(Log4JLogger.java:37)
    at org.apache.commons.logging.impl.Log4JLogger.<clinit>(Log4JLogger.java:45)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at org.apache.commons.logging.impl.LogFactoryImpl.newInstance(LogFactoryImpl.java:529)
    at org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:235)
    at org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:209)
    at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:351)
    at net.tcc.classloading.UseCommonsLoggingLogFactory.run(UseCommonsLoggingLogFactory.java:13)

"ReaderThread" prio=10 tid=0x00007fa1f00ed000 nid=0x7bd6 runnable [0x00007fa1e5da6000]
   java.lang.Thread.State: RUNNABLE
    at java.net.SocketInputStream.socketRead0(Native Method)
    at java.net.SocketInputStream.read(SocketInputStream.java:129)
    at sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:264)
    at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:306)
    at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:158)
    - locked <0x00000007d7088a00> (a java.io.InputStreamReader)
    at java.io.InputStreamReader.read(InputStreamReader.java:167)
    at java.io.BufferedReader.fill(BufferedReader.java:136)
    at java.io.BufferedReader.readLine(BufferedReader.java:299)
    - locked <0x00000007d7088a00> (a java.io.InputStreamReader)
    at java.io.BufferedReader.readLine(BufferedReader.java:362)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner$ReaderThread.run(RemoteTestRunner.java:140)

"Low Memory Detector" daemon prio=10 tid=0x00007fa1f009d800 nid=0x7bd4 runnable [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"C2 CompilerThread1" daemon prio=10 tid=0x00007fa1f009b800 nid=0x7bd3 waiting on condition [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"C2 CompilerThread0" daemon prio=10 tid=0x00007fa1f0098800 nid=0x7bd2 waiting on condition [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"Signal Dispatcher" daemon prio=10 tid=0x00007fa1f0096800 nid=0x7bd1 waiting on condition [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"Finalizer" daemon prio=10 tid=0x00007fa1f007a000 nid=0x7bd0 in Object.wait() [0x00007fa1e6c54000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00000007d7001300> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:118)
    - locked <0x00000007d7001300> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:134)
    at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:159)

"Reference Handler" daemon prio=10 tid=0x00007fa1f0078000 nid=0x7bcf in Object.wait() [0x00007fa1e6d55000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00000007d70011d8> (a java.lang.ref.Reference$Lock)
    at java.lang.Object.wait(Object.java:485)
    at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:116)
    - locked <0x00000007d70011d8> (a java.lang.ref.Reference$Lock)

"main" prio=10 tid=0x00007fa1f000c000 nid=0x7bc5 in Object.wait() [0x00007fa1f50b0000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00000007d730dfd8> (a net.tcc.classloading.UseCommonsLoggingLogFactory)
    at java.lang.Thread.join(Thread.java:1186)
    - locked <0x00000007d730dfd8> (a net.tcc.classloading.UseCommonsLoggingLogFactory)
    at java.lang.Thread.join(Thread.java:1239)
    at net.tcc.classloading.TestMixedLoggerInstantiation.test(TestMixedLoggerInstantiation.java:21)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)

"VM Thread" prio=10 tid=0x00007fa1f0071800 nid=0x7bce runnable 

"GC task thread#0 (ParallelGC)" prio=10 tid=0x00007fa1f001f000 nid=0x7bc6 runnable 

"GC task thread#1 (ParallelGC)" prio=10 tid=0x00007fa1f0021000 nid=0x7bc7 runnable 

"GC task thread#2 (ParallelGC)" prio=10 tid=0x00007fa1f0022800 nid=0x7bc8 runnable 

"GC task thread#3 (ParallelGC)" prio=10 tid=0x00007fa1f0024800 nid=0x7bc9 runnable 

"GC task thread#4 (ParallelGC)" prio=10 tid=0x00007fa1f0026800 nid=0x7bca runnable 

"GC task thread#5 (ParallelGC)" prio=10 tid=0x00007fa1f0028000 nid=0x7bcb runnable 

"GC task thread#6 (ParallelGC)" prio=10 tid=0x00007fa1f002a000 nid=0x7bcc runnable 

"GC task thread#7 (ParallelGC)" prio=10 tid=0x00007fa1f002c000 nid=0x7bcd runnable 

"VM Periodic Task Thread" prio=10 tid=0x00007fa1f00a8800 nid=0x7bd5 waiting on condition 

JNI global references: 1168 
```

### 重现死锁

[从https://github.com/sebastiankirsch/classloading](https://github.com/sebastiankirsch/classloading)下载代码。
`TestLoadingByClassForName`应该很容易为您造成死锁（只需运行几次），这是您的系统/JVM 最终会在复杂场景中陷入死锁的先决条件。

现在运行`TestMixedLoggerInstantiation`几次。注意平均运行时间，打开`UseLog4JLogger`并将睡眠定时器总和设置为略小于平均运行时间。这最终会导致死锁，但这种情况很少发生。

因此，像这样在命令行上运行它：

```
for (( ; ; )) do
  testExectution
done 
```

无需`testExecution`手动将它们放在一起，只需在测试中设置断点，调试，键入`ps -ef | grep TestMixedLoggerInstantiation`shell，然后复制 IDE 使用的命令。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T08:33:50.617

*我终于在Java语言规范*中找到了答案，特别是在第[12.4.2章详细初始化过程](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.4.2)中。
那里说

> [...]
> 2) 如果 C 的 Class 对象指示其他线程正在对 C 进行初始化，则 [...]***阻塞当前线程***，直到通知正在进行的初始化已完成，[.. .]
> 7) 接下来，如果 C 是类而不是接口，并且它的超类 SC 尚未初始化，则***递归地执行 SC 的整个过程***
> 10) 如果初始化程序的执行正常完成，[...]将 C 的 Class 对象标记为完全初始化，***通知所有等待线程***，[...]

所以观察到的行为完全符合 JLS 的规定。我仍然有点困惑，没有办法检测到这样的死锁。以及为什么线程被标记为 RUNNABLE - 但我想这不是你要执行的典型字节码，所以谁知道......

### 如何解决问题

该问题的解决方案是摆脱`commons-logging`. 正如[@Robert Johnson](https://stackoverflow.com/users/1086631/robert-johnson)指出的那样，这可以通过使用来*轻松*`org.slf4j:jcl-over-slf4j`完成。我还检查了 SLF 代码：它没有“利用”不幸的 log4j 设计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T08:05:35.403

你的分析是正确的。
您可以尝试在不同的类加载器中运行并发测试，请参阅[此处](https://github.com/junit-team/junit/issues/245)有关如何执行此操作的讨论。[Surefire](https://jira.codehaus.org/browse/SUREFIRE-749)中有一个未解决的错误， [JUnit 组](http://tech.groups.yahoo.com/group/junit/message/23485)中对此问题进行了讨论。
作为一种解决方法，您可以使用*org.apache.myfaces.test.runners.TestPerClassLoaderRunner*，如上面链接中所述。

# c# - 去除左右边框

> ID：15543522
> 
> 赞同：2
> 
> 时间：2013-03-21T09:22:14.537
> 
> 标签：c#, winforms, textbox

我希望我`TextBox`看起来像这样
![在此处输入图像描述](../Images/0edc5f5378e394c3696e9dad2b93e8e9.png)

如何删除`TextBox`控件的左侧和右侧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:30:42.587

通常，您必须覆盖 OnPaint 事件才能执行此操作，但是对于文本框，这将不起作用，因为不会调用 OnPaint。

一种方法是对 TextBox 进行子类化，如此处[所述](http://blogs.msdn.com/b/netcfteam/archive/2005/05/20/420551.aspx)

但是我根本不建议您这样做，这对我来说听起来像是一项艰巨的任务（我自己从来没有这样做过），尤其是当您是编程新手时。

也许只在文本框上方或下方画一条线就足够了？

**-编辑-**

也许这会更好地解释它：

> TextBox 的特殊之处在于您无法自定义绘制它。如果您只想要一个自定义边框，您可以创建一个新的 UserControl 并添加一个边框样式设置为 None 的 TextBox。确保在 TextBox 外部留出足够的空间用于边框。然后在 UserControl 表面上绘制边框。另一种方法是处理 TextBox 的 WM_NCPAINT 消息，然后绘制边框，但这要复杂得多。

来源：msdn 论坛中的 shawn.ohern：[这里](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/986d375e-78bf-45ea-b53f-611a319b3af3/) （抱歉，我不知道如何直接链接到他的帖子）

**-edit2-** 此[链接](http://www.codedblog.com/2007/09/17/owner-drawing-a-windowsforms-textbox/)显示了一种创建自己的文本框的方法，同样，我不会向不熟悉 c# 和编程的人推荐这种方法；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:30:08.613

Windows 窗体基于 Win32 API，与使用声明性语言描述 UI 的 WPF 不同，它使您可以完全控制绘制自己的控件。

看看这里：[自定义控件绘画和渲染](http://msdn.microsoft.com/en-us/library/kxys6ytf.aspx)。

# java - 未知的 SMTP 主机

> ID：15543527
> 
> 赞同：4
> 
> 时间：2013-03-21T09:22:21.870
> 
> 标签：java, smtp, jakarta-mail

我正在使用 tomcat 运行 Java Web 应用程序，以通过电子邮件将生成的报告发送给用户。我可以发送电子邮件，但几个小时后服务器停止发送电子邮件，出现以下错误。

```
javax.mail.MessagingException: Unknown SMTP host: mail.mydomain.co.uk;
nested exception is:
java.net.UnknownHostException: mail.mydomain.co.uk
at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1970)
at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:642)
at javax.mail.Service.connect(Service.java:317)
at javax.mail.Service.connect(Service.java:176)
at javax.mail.Service.connect(Service.java:125)
at javax.mail.Transport.send0(Transport.java:194)
at javax.mail.Transport.send(Transport.java:124)
at com.turnkey.email.SendEmail.sendMail(SendEmail.java:119)
at com.turnkey.thread.CommunicationThread.run(CommunicationThread.java:399)
Caused by: java.net.UnknownHostException: mail.mydomain.co.uk
at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:195)
at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
at java.net.Socket.connect(Socket.java:529)
at java.net.Socket.connect(Socket.java:478)
at com.sun.mail.util.SocketFetcher.createSocket(SocketFetcher.java:319)
at com.sun.mail.util.SocketFetcher.getSocket(SocketFetcher.java:233)
at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1938)
... 8 more 
```

一段时间后，服务器再次开始发送电子邮件。

谁能告诉我可能是什么问题。我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T22:18:02.347

这看起来像是您的名称服务中的故障。JDK 无法查找主机名来查找其 Internet 地址。由于这有时有效，但有时无效，因此它看起来像是名称服务的间歇性故障。名称服务故障可能是由于您的本地操作系统中的某些故障，或者可能是由于与您的 DNS 服务器或其他名称服务服务器通信的某些网络故障，或者可能是该 DNS 服务器或名称服务服务器中的故障本身。确定失败的确切原因将需要一些调试。请注意，JDK 会将名称服务器查找的结果缓存一段时间，因此您需要在调试时将其考虑在内。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-11-26T10:56:48.780

还要确保 smtp 主机名的末尾没有空格，例如。mail.google.comSPACEHERE 。令人惊讶的是，这发生在我身上，最后在删除这个空间后，没有抱怨 smtp host 。电子邮件已成功发送

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-24T10:21:56.480

为主机设置域名的IP地址而不是域名。在 cmd 上使用 nslookup mail.mydomain.co.uk 来查找 IP 地址。它对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-31T16:22:47.873

特别是对于 AIX 或 Linux OS 环境，我们需要在 etc/hosts 文件中添加主机名.. 来解决这个问题。Windows 操作系统，这可能适用于 Windows 系统，因为没有严格的安全检查，但是 AIX 或 Linux 必须将主机名添加到 etc/hosts 文件才能 ping SMTP 服务器。

避免这样做可能会导致未知主机问题

# jquery - jquery-ui-picklist：设置最大选定项

> ID：15543529
> 
> 赞同：0
> 
> 时间：2013-03-21T09:22:27.110
> 
> 标签：jquery

我在我的项目中使用[jquery-ui-picklist](https://code.google.com/p/jquery-ui-picklist/) jquery 插件，我想为用户可以选择的项目设置一个限制。

1.  **如何设置可以选择的最大项目数限制？**
2.  **如何禁用控件上的按钮？**- 如果选择了最大数量的项目，我想禁用“添加”按钮

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:08:17.030

该插件没有这样的属性。不存在最大选定选项的限制。为了添加这一点，我通过自己添加限制来更改代码。

代码很长，我在很多地方都对其进行了更改，所以现在很难（我什至不记得我所做的所有更改）都指向这里。关于我是如何做的一个简短的解释是这样的：

*   a 添加了一个名为*selectLimit*的新内部变量，默认设置为一个大数字。要启用限制，您应该将该值设置为小于选择列表中的总项目的值。
*   在选择一个新项目之前我检查我是否可以选择更多（如果所选项目的计数器，加上右侧面板中已经添加的项目很丰富），当我选择项目时，我会取消选择。
*   我仅在左侧面板上限制选择 - 如果在右侧面板中您的项目多于限制，则从该面板中选择时限制不会影响您。如果您动态填充选择器并且所选项目超出限制，这很好。

完整的代码 - 有限制的插件是：

```
/**
 * jQuery PickList Widget
 *
 * Copyright (c) 2012 Jonathon Freeman <jonathon@awnry.com>
 * Distributed under the terms of the MIT License.
 *
 * http://code.google.com/p/jquery-ui-picklist/
 */
(function($)
{
    $.widget("awnry.pickList",
    {
        widgetEventPrefix: "pickList_",

        options:
        {
            // Container classes
            mainClass:                  "pickList",
            listContainerClass:         "pickList_listContainer",
            sourceListContainerClass:   "pickList_sourceListContainer",
            controlsContainerClass:     "pickList_controlsContainer",
            targetListContainerClass:   "pickList_targetListContainer",
            listClass:                  "pickList_list",
            sourceListClass:            "pickList_sourceList",
            targetListClass:            "pickList_targetList",
            clearClass:                 "pickList_clear",

            // List item classes
            listItemClass:              "pickList_listItem",
            richListItemClass:          "pickList_richListItem",
            selectedListItemClass:      "pickList_selectedListItem",

            // Control classes
            addAllClass:                "pickList_addAll",
            addClass:                   "pickList_add",
            removeAllClass:             "pickList_removeAll",
            removeClass:                "pickList_remove",

            // Control labels
            addAllLabel:                "&gt;&gt;",
            addLabel:                   "&gt;",
            removeAllLabel:             "&lt;&lt;",
            removeLabel:                "&lt;",

            // List labels
            listLabelClass:             "pickList_listLabel",
            sourceListLabel:            "Available",
            sourceListLabelClass:       "pickList_sourceListLabel",
            targetListLabel:            "Selected",
            targetListLabelClass:       "pickList_targetListLabel",

            // Sorting
            sortItems:                  true,
            sortAttribute:              "label",

            // Name of custom value attribute for list items
            listItemValueAttribute:     "data-value",

            // Additional list items
            items:                      [],
            selectLimit:                10000
        },

        _create: function()
        {
            var self = this;

            self._buildPickList();
            self._refresh();
        },

        _buildPickList: function()
        {
            var self = this;

            self._trigger("beforeBuild");

            self.pickList = $("<div/>")
                    .hide()
                    .addClass(self.options.mainClass)
                    .insertAfter(self.element)
                    .append(self._buildSourceList())
                    .append(self._buildControls())
                    .append(self._buildTargetList())
                    .append( $("<div/>").addClass(self.options.clearClass) );

            self._populateLists();

            self.element.hide();
            self.pickList.show();

            self._trigger("afterBuild");
        },

        _buildSourceList: function()
        {
            var self = this;

            var container = $("<div/>")
                    .addClass(self.options.listContainerClass)
                    .addClass(self.options.sourceListContainerClass)
                    .css({
                        "-moz-user-select": "none",
                        "-webkit-user-select": "none",
                        "user-select": "none",
                        "-ms-user-select": "none"
                    })
                    .each(function()
                    {
                        this.onselectstart = function() { return false; };
                    });

            var label = $("<div/>")
                    .text(self.options.sourceListLabel)
                    .addClass(self.options.listLabelClass)
                    .addClass(self.options.sourceListLabelClass);

            self.sourceList = $("<ul/>")
                    .addClass(self.options.listClass)
                    .addClass(self.options.sourceListClass)
                    .delegate("li", "click", { pickList: self }, self._changeHandler);

            container
                    .append(label)
                    .append(self.sourceList);

            return container;
        },

        _buildTargetList: function()
        {
            var self = this;

            var container = $("<div/>")
                    .addClass(self.options.listContainerClass)
                    .addClass(self.options.targetListContainerClass)
                    .css({
                        "-moz-user-select": "none",
                        "-webkit-user-select": "none",
                        "user-select": "none",
                        "-ms-user-select": "none"
                    })
                    .each(function()
                    {
                        this.onselectstart = function() { return false; };
                    });

            var label = $("<div/>")
                    .text(self.options.targetListLabel)
                    .addClass(self.options.listLabelClass)
                    .addClass(self.options.targetListLabelClass);

            self.targetList = $("<ul/>")
                    .addClass(self.options.listClass)
                    .addClass(self.options.targetListClass)
                    .delegate("li", "click", { pickList: self }, self._changeHandler);

            container
                    .append(label)
                    .append(self.targetList);

            return container;
        },

        _buildControls: function()
        {
            var self = this;

            self.controls = $("<div/>").addClass(self.options.controlsContainerClass);

            self.addAllButton = $("<button type='button'/>").click({pickList: self}, self._addAllHandler).html(self.options.addAllLabel).addClass(self.options.addAllClass);
            self.addButton = $("<button type='button'/>").click({pickList: self}, self._addHandler).html(self.options.addLabel).addClass(self.options.addClass);
            self.removeButton = $("<button type='button'/>").click({pickList: self}, self._removeHandler).html(self.options.removeLabel).addClass(self.options.removeClass);
            self.removeAllButton = $("<button type='button'/>").click({pickList: self}, self._removeAllHandler).html(self.options.removeAllLabel).addClass(self.options.removeAllClass);

            self.controls
                    .append(self.addAllButton)
                    .append(self.addButton)
                    .append(self.removeButton)
                    .append(self.removeAllButton);

            return self.controls;
        },

        _populateLists: function()
        {
            var self = this;

            self._trigger("beforePopulate");

            var sourceListItems = [];
            var targetListItems = [];
            var selectItems = self.element.children();

            selectItems.not(":selected").each(function()
            {
                sourceListItems.push( self._createDoppelganger(this) );
            });

            selectItems.filter(":selected").each(function()
            {
                targetListItems.push( self._createDoppelganger(this) );
            });

            self.sourceList.append(sourceListItems.join("\n"));
            self.targetList.append(targetListItems.join("\n"));
            self.insertItems(self.options.items);

            self._trigger("afterPopulate");
        },

        _addAllHandler: function(e)
        {
            var self = e.data.pickList;

            self._trigger("beforeAddAll");

            var items = self.sourceList.children();
            self.targetList.append( self._removeSelections(items) );

            self.element.children().not(":selected").attr("selected", "selected");

            self._refresh();

            self._trigger("afterAddAll", null, { items: items });
            self._trigger("onChange", null, { type: "addAll", items: items });
        },

        _addHandler: function(e)
        {
            var self = e.data.pickList;

            self._trigger("beforeAdd");

            var items = self.sourceList.children(".ui-selected");
            self.targetList.append( self._removeSelections(items) );

            var itemIds = [];
            items.each(function()
            {
                itemIds.push( self._getItemValue(this) );
            });

            self.element.children().filter(function()
            {
                return $.inArray(this.value, itemIds) != -1;
            }).attr("selected", "selected");

            self._refresh();

            self._trigger("afterAdd", null, { items: items });
            self._trigger("onChange", null, { type: "add", items: items });
        },

        _removeHandler: function(e)
        {
            var self = e.data.pickList;

            self._trigger("beforeRemove");

            var items = self.targetList.children(".ui-selected");
            self.sourceList.append( self._removeSelections(items) );

            var itemIds = [];
            items.each(function()
            {
                itemIds.push( self._getItemValue(this) );
            });

            self.element.children().filter(function()
            {
                return $.inArray(this.value, itemIds) != -1;
            }).removeAttr("selected");

            self._refresh();

            self._trigger("afterRemove", null, { items: items });
            self._trigger("onChange", null, { type: "remove", items: items });
        },

        _removeAllHandler: function(e)
        {
            var self = e.data.pickList;

            self._trigger("beforeRemoveAll");

            var items = self.targetList.children();
            self.sourceList.append( self._removeSelections(items) );

            self.element.children().filter(":selected").removeAttr("selected");

            self._refresh();

            self._trigger("afterRemoveAll", null, { items: items });
            self._trigger("onChange", null, { type: "removeAll", items: items });
        },

        _refresh: function()
        {
            var self = this;

            self._trigger("beforeRefresh");

            self._refreshControls();

            // Sort the selection lists.
            if(self.options.sortItems)
            {
                self._sortItems(self.sourceList, self.options);
                self._sortItems(self.targetList, self.options);
            }

            self._trigger("afterRefresh");
        },

        _refreshControls: function()
        {
            var self = this;

            var addBtnEnabled = (self.targetList.children().length < self.options.selectLimit);
            self._trigger("beforeRefreshControls");

            // Enable/disable the Add All button state.
            if(self.sourceList.children().length)
            {
                self.addAllButton.removeAttr("disabled");
            }
            else
            {
                self.addAllButton.attr("disabled", "disabled");
            }

            // Enable/disable the Remove All button state.
            if(self.targetList.children().length)
            {
                self.removeAllButton.removeAttr("disabled");
            }
            else
            {
                self.removeAllButton.attr("disabled", "disabled");
            }

            // Enable/disable the Add button state.
            if(self.sourceList.children(".ui-selected").length && addBtnEnabled)
            {
                self.addButton.removeAttr("disabled");
            }
            else
            {
                self.addButton.attr("disabled", "disabled");
            }

            // Enable/disable the Remove button state.
            if(self.targetList.children(".ui-selected").length)
            {
                self.removeButton.removeAttr("disabled");
            }
            else
            {
                self.removeButton.attr("disabled", "disabled");
            }

            self._trigger("afterRefreshControls");
        },

        _sortItems: function(list, options)
        {
            var items = new Array();

            list.children().each(function()
            {
                items.push( $(this) );
            });

            items.sort(function(a, b)
            {
                if(a.attr(options.sortAttribute) > b.attr(options.sortAttribute))
                {
                    return 1;
                }
                else if(a.attr(options.sortAttribute) == b.attr(options.sortAttribute))
                {
                    return 0;
                }
                else
                {
                    return -1;
                }
            });

            list.empty();

            for(var i = 0; i < items.length; i++)
            {
                list.append(items[i]);
            }
        },

        _changeHandler: function(e)
        {
            var self = e.data.pickList;
            var isClickOnSourcePanel = this.parentNode.attributes["class"].nodeValue.indexOf("pickList_sourceList") >= 0;
            var selectedItems = self.sourceList.children(".ui-selected").length;
            var leftToSelect = self.options.selectLimit - self.targetList.children().length - selectedItems - 1;
            var canSelectMore = isClickOnSourcePanel && leftToSelect >= 0;

            if(e.ctrlKey)
            {
                if(self._isSelected( $(this) ))
                {
                    self._removeSelection( $(this) );
                }
                else
                {
                    if(canSelectMore){
                        self.lastSelectedItem = $(this);
                        self._addSelection( $(this) );
                    }
                    else if(!isClickOnSourcePanel){  //allow to select/deselect without restrictions on right panel.
                        self.lastSelectedItem = $(this);
                        self._addSelection( $(this) );
                    }
                }
            }
            //don't need to select with shift. For a small amount of selectale items
//          else if(e.shiftKey)
//          {
//              var current = self._getItemValue(this);
//              var last = self._getItemValue(self.lastSelectedItem);
//
//              if($(this).index() < $(self.lastSelectedItem).index())
//              {
//                  var temp = current;
//                  current = last;
//                  last = temp;
//              }
//
//              var pastStart = false;
//              var beforeEnd = true;
//
//              self._clearSelections( $(this).parent() );
//
//              $(this).parent().children().each(function()
//              {
//                  if(self._getItemValue(this) == last)
//                  {
//                      pastStart = true;
//                  }
//
//                  if(pastStart && beforeEnd)
//                  {
//                      self._addSelection( $(this) );
//                  }
//
//                  if(self._getItemValue(this) == current)
//                  {
//                      beforeEnd = false;
//                  }
//
//              });
//          }
            else
            {
                if(canSelectMore){
                    self.lastSelectedItem = $(this);
                    self._clearSelections( $(this).parent() );
                    self._addSelection( $(this) );
                }
                else if(!isClickOnSourcePanel){
                    self.lastSelectedItem = $(this);
                    self._clearSelections( $(this).parent() );
                    self._addSelection( $(this) );
                }
            }

            self._refreshControls();
        },

        _isSelected: function(listItem)
        {
            return listItem.hasClass("ui-selected");
        },

        _addSelection: function(listItem)
        {
            var self = this;

            return listItem
                    .addClass("ui-selected")
                    .addClass("ui-state-highlight")
                    .addClass(self.options.selectedListItemClass);
        },

        _removeSelection: function(listItem)
        {
            var self = this;

            return listItem
                    .removeClass("ui-selected")
                    .removeClass("ui-state-highlight")
                    .removeClass(self.options.selectedListItemClass);
        },

        _removeSelections: function(listItems)
        {
            var self = this;

            listItems.each(function()
            {
                $(this)
                        .removeClass("ui-selected")
                        .removeClass("ui-state-highlight")
                        .removeClass(self.options.selectedListItemClass);
            });

            return listItems;
        },

        _clearSelections: function(list)
        {
            var self = this;

            list.children().each(function()
            {
                self._removeSelection( $(this) );
            });
        },

        _setOption: function(key, value)
        {
            switch(key)
            {
                case "clear":
                {
                    break;
                }
            }

            $.Widget.prototype._setOption.apply(this, arguments);
        },

        destroy: function()
        {
            var self = this;

            self._trigger("onDestroy");

            self.pickList.remove();
            self.element.show();

            $.Widget.prototype.destroy.call(self);
        },

        insert: function(item)
        {
            var self = this;

            var list = item.selected ? self.targetList : self.sourceList;
            var selectItem = self._createSelectItem(item);
            var listItem = self._createListItem(item);

            self.element.append(selectItem);
            list.append(listItem);

            self._trigger("onChange");

            self._refresh();
        },

        insertItems: function(items)
        {
            var self = this;

            var selectItems = [];
            var sourceItems = [];
            var targetItems = [];

            $(items).each(function()
            {
                var selectItem = self._createSelectItem(this);
                var listItem = self._createListItem(this);

                selectItems.push(selectItem);

                if(this.selected)
                {
                    targetItems.push(listItem);
                }
                else
                {
                    sourceItems.push(listItem);
                }
            });

            self.element.append(selectItems.join("\n"));
            self.sourceList.append(sourceItems.join("\n"));
            self.targetList.append(targetItems.join("\n"));

            self._trigger("onChange");

            self._refresh();
        },

        _createSelectItem: function(item)
        {
            var selected = item.selected ? " selected='selected'" : "";
            return "<option value='" + item.value + "'" + selected + ">" + item.label + "</option>";
        },

        _createListItem: function(item)
        {
            var self = this;

            if(item.element != undefined)
            {
                var richItemHtml = item.element.clone().wrap("<div>").parent().html();
                item.element.hide();
                return "<li " + self.options.listItemValueAttribute + "='" + item.value + "' label='" + item.label + "' class='" + self.options.listItemClass + " " + self.options.richListItemClass + "'>" + richItemHtml + "</li>";
            }

            return "<li " + self.options.listItemValueAttribute + "='" + item.value + "' label='" + item.label + "' class='" + self.options.listItemClass + "'>" + item.label + "</li>";
        },

        _createDoppelganger: function(item)
        {
            var self = this;
            return "<li " + self.options.listItemValueAttribute + "='" + $(item).val() + "' label='" + $(item).text() + "' class='" + self.options.listItemClass + "'>" + $(item).text() + "</li>";
        },

        _getItemValue: function(item)
        {
            var self = this;
            return $(item).attr(self.options.listItemValueAttribute);
        },

        selectedAssets:function(){
            var self = this;
            var selectedItems = [];
            self.targetList.children().each(function(){
                var a = {};
                a.id = $(this).attr(self.options.listItemValueAttribute);
                a.name = $(this).attr("label");
                selectedItems.push(a);
            });
            return selectedItems;
        }
    });
}(jQuery)); 
```

现在，要使用它，您只需编写以下代码：

```
$("#pckAssets").pickList({
    selectLimit : 5
}); 
```

我希望能帮助某人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T09:37:18.707

jquery-ui-picklist 有多个事件挂钩，您可以将函数绑定到其中，我认为最佳选择取决于具体情况。afterAdd 很可能是最佳选择，因此您可以在达到限制后禁用添加按钮。onChange 对两个方向的事件进行计数，如果您限制数量，您也应该使用 afterRemove 来计算删除。

这是清单。

[https://code.google.com/p/jquery-ui-picklist/wiki/CallbackEvents#onChange](https://code.google.com/p/jquery-ui-picklist/wiki/CallbackEvents#onChange)

按钮控件是具有“addClass”类的常规 HTML 按钮控件。您可以切换或修改此类或 preventDefault。我相信 Jquery 插件默认包含一个“全部添加”按钮以及“添加”。如果您可能添加的数量大于您的限制，则需要在 beforePopulate eventhook 中禁用它。只需使用 .hide() 调用按钮。如果添加按钮再次变为合格显示（）

# c# - 使用 RegEx 将整个文本替换为 XXX

> ID：15543536
> 
> 赞同：-4
> 
> 时间：2013-03-21T09:23:05.420
> 
> 标签：c#, regex

如何在 C# 中使用 RegEx 将整个文本替换为 XXX？它将替换等于字符串长度的 X 的数量。

例如原始文本是**Apple**替换为**XXXXX**

**板球**与**XXXXXX**

**你好**，**XX**

**优秀**的**XXXXXXXXXXXX**

```
String MyText = "Apple";
//For following line i have to written regexp to achieve 
String Output = "XXXXX"; //Apple will replace with 5 times X because Apple.length = 5 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T09:27:33.377

没有正则表达式：

```
string s = "for example original text is Apple replace";

var replaceWord = "Apple";
var s2 = s.Replace(replaceWord , new String('X', replaceWord.Length)); 
```

创建一个由 'X' 字符组成的`new String('X', replaceWord.Length)`字符串，其长度与 相同`replaceWord`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T09:25:30.970

您不需要 Regex 或 Replace 方法，而是可以使用[`Enumerable.Repeat<TResult> Method`](http://msdn.microsoft.com/en-us/library/bb348899.aspx)创建一个字符数组`X` *（原始字符串长度）*，然后将其传递给字符串构造函数。

```
string originalStr = "Apple";    
string str = new string(Enumerable.Repeat<char>('X',originalStr.Length)
                                      .ToArray()); 
```

`str`将举行：`str = "XXXXX"`

**编辑：** 由于您需要与单个字符的原始字符串长度相同的字符串，您可以使用: [`String Constructor (Char, Int32)`](http://msdn.microsoft.com/en-us/library/xsa4321w.aspx)，这是一个更好的选择。

```
string str3 = new string('X', originalStr.Length); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T09:26:32.333

为什么不简单地使用：

```
String.Replace(word, new String('X', word.Length)); 
```

# android - 如何在Android的狭窄文本视图中垂直居中文本？

> ID：15543539
> 
> 赞同：4
> 
> 时间：2013-03-21T09:23:17.357
> 
> 标签：android, textview

我有一个`TextView`30px`height`和`textsize`40px 的。由于文本比 高`View`，我只想显示文本的中间部分。像这样：![在此处输入图像描述](../Images/871aad1c6b56e41a854102b21b1a3da1.png)

但是使用`android:gravity="center_vertical"`，我只能显示文本的上部，而底部的部分被截断。![在此处输入图像描述](../Images/dcf04e53a44de10a154cf48f27655150.png)

这是我的代码：

```
 <TextView
         android:layout_width="wrap_content"
         android:layout_height="30px"
         android:textSize="40px"
         android:text="ABCDEFG" 
         android:gravity="center_vertical"
         /> 
```

任何人都知道有什么方法可以做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T17:31:39.323

您不能简单地将其包装在设置为适当大小的 LinearView 中并将 textview 中的边距调整为大约一半（取决于填充）字体大小吗？

```
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="20dp"
android:background="@android:color/white">

    <TextView
        android:gravity="center"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="@android:color/black"
        android:text="Sliced in half"
        android:textSize="60dp"
        android:layout_marginTop="-30dp"/>

</LinearLayout> 
```

导致：

[http://i.stack.imgur.com/jEdxx.png](http://i.stack.imgur.com/jEdxx.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T10:17:20.140

我非常怀疑你是否能做到这一点。我在处理时遇到的所有选项`TextView`都是针对文本小于视图的情况。这是我遇到的第一个有其他要求的问题。我之前使用的一个选项是`android:scrollHorizontally="true"`在哪里指定文本是否允许比视图宽。

有趣的问题。如果您可以添加一些代码，那就太好了。

# magento - 在导入脚本中获取 Magento 属性集 id

> ID：15543543
> 
> 赞同：2
> 
> 时间：2013-03-21T09:23:22.197
> 
> 标签：magento, import, attributes

我正在尝试修改 magento oscommerce 导入脚本以使用属性和可配置产品。至少可以说这是一个挑战。

但我在进步。目前我正在尝试将属性集名称添加到magento，之后，我正在写入我需要magento属性集ID的tmp表，用于我刚刚创建的属性集。

我的问题是我不知道如何获取该 ID。

我当前的代码：

```
$sql = "select * from ezmage_variant_sets";
$results = $readConnection->fetchAll($sql);

foreach($results as $row) {
    if ($row['variant_imported'] != 'y'){
        $this->createAttributeSet($row['osc_variants_title'],-1);

        // update tmp table
        $sql = "update ezmage_variant_sets set variant_imported='y',mage_variant_id=".$variant->getId()." where osc_variants_id=".$row['osc_variants_id'];              
        $writeConnection->query($sql);  

    }

} 
```

问题是 $variant->getId()。我需要什么才能获得该 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T14:40:49.380

也许不是最有效的，但是：

```
$attrSetCollection = Mage::getModel("eav/entity_attribute_set")->getCollection();
$attrSet = $attrSetCollection->addFieldToFilter("attribute_set_name", $row['osc_variants_title'])->getFirstItem();
echo $attrSet->getAttributeSetId(); 
```

# liferay - 已经运行的作业不要运行

> ID：15543545
> 
> 赞同：0
> 
> 时间：2013-03-21T09:23:31.263
> 
> 标签：liferay, quartz-scheduler, liferay-6

我在 Liferay 中安排了一个工作，例如，如果这个工作每 5 分钟运行一次并且需要超过 5 分钟才能完成，那么 Liferay 是如何处理它的？

我观察到工作将重新开始，这可能会给我带来问题。

当它已经在运行时，是否有可能不触发作业？

*使用liferay 6.0.6

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:32:28.490

尝试`LockLocalServiceUtil`和它的方法`lock()`，`unlock()`和`isLocked()`。像这样的东西：

```
try {
    if (LockLocalServiceUtil.isLocked()) {
        return;
    }
    LockLocalServiceUtil.lock();

    // do your job
} finally {
    LockLocalServiceUtil.unlock();
} 
```

锁存储在数据库中，因此在集群环境中不会有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:27:57.290

这可能不是最佳实践，但这里有

```
 private static boolean runningJob = false;
@Override
public void receive(Message arg0) throws MessageListenerException {

    if(runningJob)
        return;

    runningJob = true; //marking that a job just started
    //Do stuff  { ....... } // this might take a while
    runningJob = false;
} 
```

# asp.net - 如何使用 mono mod 在 Apache 上部署 ASP.Net Web 表单

> ID：15543547
> 
> 赞同：3
> 
> 时间：2013-03-21T09:23:33.927
> 
> 标签：asp.net, apache, mono, mod-mono

我制作了一个 ASP.Net Web Forms 应用程序，它在 Visual Studio 2012 中以调试模式工作。但是当我使用 mod_mono 将应用程序文件夹上传到我的 Apache 中时，我收到一个错误，表明我应该在我的 web.config 中执行此操作：

```
<configuration>
    <system.web>
        <customErrors mode="Off"/>
    </system.web>
</configuration> 
```

我现在的问题是，我应该如何设置我的应用程序从调试到发布？当我单击创建应用程序时，它只是在控制台中给了我一条短消息。当我使用部署应用程序选项时，我得到一个菜单，其中包含一些我不理解和不知道的服务器设置。

**编辑**

现在我收到此错误消息：

> 解析器错误
> 
> 描述：解析服务此请求所需的资源时出错。查看您的源文件并对其进行修改以修复此错误。
> 
> 解析器错误消息：文件 '~/Site1.Master' 不存在
> 
> 源错误：
> 
> 第 1 行：<%@ Page Title="" Language="C#" MasterPageFile="~/Site1.Master" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="WebApplication1.WebForm6" %> 第 2 行：第 3 行：

但我在这个文件夹中有 Site1.Master。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:36:29.953

Linux 中的文件名区分大小写。确保`Site1.Master`具有完全相同的名称，而不是`site1.master`等`site1.Master`。

它包含在[Mono 可移植性指南](http://www.mono-project.com/Guidelines%3aApplication_Portability#Case_sensitivity)和[ASP.NET FAQ](http://www.mono-project.com/FAQ%3a_ASP.NET#Portability)中。

# php - 使用偏移量将 GMT 日期转换为其他时区日期

> ID：15543551
> 
> 赞同：1
> 
> 时间：2013-03-21T09:23:43.333
> 
> 标签：php, datetime, timezone

我想将 GMT 日期转换为其他时区日期。我所拥有的只是该时区的偏移量，格式如下`GMT+05:30`。

我已经解决了很多问题，但其中大部分是使用时区标识符进行转换。

我怎样才能让它工作。谢谢

# javascript - 使用锚点对图像进行比例缩放和拉伸

> ID：15543554
> 
> 赞同：0
> 
> 时间：2013-03-21T09:23:47.310
> 
> 标签：javascript, html, kineticjs

我有一个带有 8 个锚点的图像。多亏了一个[例子](https://stackoverflow.com/questions/13139671/resizing-the-images-while-keeping-proportion-using-kinetic-js-canvas)，我设法让 4 个角上的那些只缩放图片。但我很难让其他 4 个仅拉伸图像。

midTop 和 midBottom 锚点应垂直拉伸；midLeft 和 midRight 锚点应水平拉伸。我认为这可能与那些锚可以移动的界限有关，但我不知道如何进行。

[http://jsfiddle.net/Dppm7/3/](http://jsfiddle.net/Dppm7/3/)（抱歉不能让它在 jsFiddle 中工作）..

输出看起来像[这样。](http://s4.postimage.org/60tdn0k59/mimo_Anchor.png)

请如果有人可以提供帮助。:)

锚点的一些代码（并非所有中间锚点的代码都已实现）：

```
// Update the positions of handles during drag.
// This needs to happen so the dimension calculation can use the
// handle positions to determine the new width/height.
switch (activeHandleName) {
    case "topLeft":
        topRight.setY(activeHandle.getY());
        midRight.setY(activeHandle.getY());
        midTop.setY(activeHandle.getY());
        bottomLeft.setX(activeHandle.getX());
        midLeft.setX(activeHandle.getX());
        midBottom.setX(activeHandle.getX());
        break;
    case "topRight":
        topLeft.setY(activeHandle.getY());
        midLeft.setY(activeHandle.getY());
        midTop.setY(activeHandle.getY());
        bottomRight.setX(activeHandle.getX());
        midBottom.setX(activeHandle.getX());
        midRight.setX(activeHandle.getX());
        break;
    case "bottomRight":
        bottomLeft.setY(activeHandle.getY());
        midBottom.setY(activeHandle.getY());
        midLeft.setY(activeHandle.getY());
        topRight.setX(activeHandle.getX());
        midTop.setX(activeHandle.getX());
        midRight.setX(activeHandle.getX());
        break;
    case "bottomLeft":
        bottomRight.setY(activeHandle.getY());
        midBottom.setY(activeHandle.getY());
        midRight.setY(activeHandle.getY());
        topLeft.setX(activeHandle.getX());
        midTop.setX(activeHandle.getX());
        midLeft.setX(activeHandle.getX());
        break;
    case "midTop":
        topRight.setY(activeHandle.getY());
        topLeft.setY(activeHandle.getY());
        midRight.setY(activeHandle.getY());
        midLeft.setY(activeHandle.getY());
        break;
    case "midBottom":
        bottomRight.setY(activeHandle.getY());
        bottomLeft.setY(activeHandle.getY());
        midRight.setY(activeHandle.getY());
        midLeft.setY(activeHandle.getY());
        break;
    case "midRight":
        topRight.setX(activeHandle.getX());
        bottomRight.setX(activeHandle.getX());
        midTop.setX(activeHandle.getX());
        midBottom.setX(activeHandle.getX());
        break;
    case "midLeft":
        topLeft.setX(activeHandle.getX());
        bottomLeft.setX(activeHandle.getX());
        midTop.setX(activeHandle.getX());
        midBottom.setX(activeHandle.getX());
        break;
}

// Calculate new dimensions. Height is simply the dy of the handles.
// Width is increased/decreased by a factor of how much the height changed.
newHeight = bottomLeft.getY() - topLeft.getY();
newWidth = image.getWidth() * newHeight / image.getHeight();

// Move the image to adjust for the new dimensions.
// The position calculation changes depending on where it is anchored.
// ie. When dragging on the right, it is anchored to the top left,
//     when dragging on the left, it is anchored to the top right.
if (activeHandleName === "topRight" || activeHandleName === "bottomRight") {
    image.setPosition(topLeft.getX(), topLeft.getY());
} else if (activeHandleName === "topLeft" || activeHandleName === "bottomLeft") {
    image.setPosition(topRight.getX() - newWidth, topRight.getY());
}

imageX = image.getX();
imageY = image.getY();

// Update handle positions to reflect new image dimensions
topLeft.setPosition(imageX, imageY);
topRight.setPosition(imageX + newWidth, imageY);
bottomRight.setPosition(imageX + newWidth, imageY + newHeight);
bottomLeft.setPosition(imageX, imageY + newHeight);

midTop.setPosition(imageX + image.getWidth() / 2, imageY);
midBottom.setPosition(imageX + image.getWidth() / 2, imageY + newHeight);
midRight.setPosition(imageX + image.getWidth(), imageY + image.getHeight() / 2);
midLeft.setPosition(imageX, imageY + image.getHeight() / 2);

// Set the image's size to the newly calculated dimensions
if (newWidth && newHeight) {
    image.setSize(newWidth, newHeight);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-02T11:44:52.963

```
<script>
    var imWidth;
    var imHeight;
    var topRight;
    var topLeft;
    var bottomLeft;
    var width;
    var height;
    var group;
    var bottomRight;
    var image;
    var aspectRatio;
    var oldwidth;
    var oldheight;
    var oldtopleftX;
    var oldtopleftY;
    var shrinkLimitBound;

  function update(activeAnchor) {
    group = activeAnchor.getParent();
    var anchorX = activeAnchor.getX();
    var anchorY = activeAnchor.getY();
    actRatio=imWidth/imHeight;
    shrinkLimitBound=100;
    height=bottomLeft.getY() - topLeft.getY();
    width=topRight.getX() - topLeft.getX();
    newRatio=(width)/(height);
    width=actRatio*height;
    switch (activeAnchor.getName()) {
      case 'topLeft':
        if(height<shrinkLimitBound)
        {
          height=shrinkLimitBound;
          width=actRatio*height;;
          topRight.setY(bottomRight.getY()-height);
        }
        else
        { 
          if(anchorY < bottomRight.getY())
            topRight.setY(anchorY);
          else
            topRight.setY(bottomRight.getY()-height);
        }
        topRight.setX(bottomRight.getX());
        bottomLeft.setX(bottomRight.getX()-width);
        bottomLeft.setY(bottomRight.getY());
        topLeft.setX(bottomRight.getX()-width);
        topLeft.setY(bottomRight.getY()-height);
        break;
      case 'topRight':
        if(height<shrinkLimitBound)
        {
          height=shrinkLimitBound;
          width=actRatio*height;;
          topLeft.setY(bottomLeft.getY()-height);
        }
        else
        { 
          if(anchorY < bottomLeft.getY()-shrinkLimitBound)
          {
            topLeft.setY(anchorY)
          }
          else
          {
            topLeft.setY(bottomLeft.getY()-height);
          }
        }
        topLeft.setX(bottomLeft.getX());
        bottomRight.setX(bottomLeft.getX()+width);
        bottomRight.setY(bottomLeft.getY());
        topRight.setX(bottomLeft.getX()+width);
        topRight.setY(bottomLeft.getY()-height);
        break;
      case 'bottomRight':
        if(height<shrinkLimitBound)
        {
          height=shrinkLimitBound;
          width=actRatio*height;;
          bottomLeft.setY(topLeft.getY()+height);
        }
        else
        { 
          if(anchorY > topLeft.getY()+shrinkLimitBound)
          {
            bottomLeft.setY(anchorY);
          }
          else
             bottomLeft.setY(topLeft.getY()+height);
        }
        bottomLeft.setX(topLeft.getX());
        topRight.setX(topLeft.getX()+width);
        topRight.setY(topLeft.getY());
        bottomRight.setX(topLeft.getX()+width);
        bottomRight.setY(topLeft.getY()+height);
        break;
      case 'bottomLeft':
        if(height<shrinkLimitBound)
        {
          height=shrinkLimitBound;
          width=actRatio*height;;
          bottomRight.setY(topRight.getY()+height);
        }
        else
        { 
          if(anchorY > topRight.getY())
            bottomRight.setY(anchorY);
          else
            bottomRight.setY(topRight.getY()+height);
        }
        bottomRight.setX(topRight.getX());
        topLeft.setX(topRight.getX()-width);
        topLeft.setY(topRight.getY());
        bottomLeft.setX(topRight.getX()-width);
        bottomLeft.setY(topLeft.getY()+height);
        break;
    }
    image.setPosition(topLeft.getPosition());
    if(width>0 && height>0)
    {
      image.setSize(width,height);
    }
    oldwidth=width;
    oldheight=height;
    oldtopleftX=topLeft.getX();
    oldtopleftY=topLeft.getY();

  }

  function addAnchor(group, x, y, name) {
    var stage = group.getStage();
    var layer = group.getLayer();
    var anchor = new Kinetic.Circle({
      x: x,
      y: y,
      stroke: '#666',
      fill: '#ddd',
      strokeWidth: 0,
      radius: 4,
      name: name,
      draggable: true,
      dragOnTop: false
    });

    anchor.on('dragmove', function() {

      update(this);
      layer.draw();

    });
    anchor.on('mousedown touchstart', function() {
      group.setDraggable(false);
      this.moveToTop();
    });
    anchor.on('dragend', function() {
      group.setDraggable(true);
      layer.draw();
    });
    // add hover styling
    anchor.on('mouseover', function() {
      var layer = this.getLayer();
      document.body.style.cursor = 'pointer';
      this.setStrokeWidth(4);
      layer.draw();
    });
    anchor.on('mouseout', function() {
      var layer = this.getLayer();
      document.body.style.cursor = 'default';
      this.setStrokeWidth(2);
      layer.draw();
    });

    group.add(anchor);
  }

  function loadImages(sources, callback) {
    var images = {};
    var loadedImages = 0;
    var numImages = 0;
    for(var src in sources) {
      numImages++;
    }
    for(var src in sources) {
      images[src] = new Image();
      images[src].onload = function() {
        if(++loadedImages >= numImages) {
          callback(images);
        }
      };
      images[src].src = sources[src];
    }
  }

  function initStage(images) {
    var conWidth = 578; //container Width.
    var conHeight = 400;    //container Heitgh.
    imWidth = images.dressTrailImage.width;
    imHeight = images.dressTrailImage.height;
    if (imWidth > conWidth)
    {
        imHeight = (imHeight/imWidth)*conWidth; 
        imWidth = conWidth;
    }
    if (imHeight > conHeight)
    {
        imWidth = (imWidth/imHeight)*conHeight; 
        imHeight = conHeight;
    }
    if ((imHeight < conHeight) && (imWidth < conWidth))
    {
        var diffX = conWidth - imWidth;
        var diffY = conHeight - imHeight;

        var diffY2 = (imHeight/imWidth)*diffX;

        if (diffY2 > diffY)
        {
            imWidth = (imWidth/imHeight)*conHeight; 
            imHeight = conHeight;
        }   
        else
        {
            imHeight = (imHeight/imWidth)*conWidth; 
            imWidth = conWidth;
        }       
    }
    images.UsrTrail.width = imWidth;
    images.UsrTrail.height = imHeight;
    var stage = new Kinetic.Stage({
      container: 'container',
      width: imWidth,
      height: imHeight
    });
    var dressTrailImageGroup = new Kinetic.Group({
      x: 0,
      y: 0,
      draggable: true,

      //dragBoundFunc: function(pos) {

        // console.log(pos);
        // // var newX;
        // // var newY;
        // console.log(topLeft.x+","+bottomRight.y);
        // x1=topLeft.x;
        // x2=bottomRight.x;
        // y1=topLeft.y;
        // y2=bottomRight.y;
        // x=pos.x;
        // y=pos.y;
        // var calsign = ((x-x1)*(y-y2))-((y-y1)*(x-x2))
        // if (calsign < 0){
        //   return {
        //   x : pos.x,
        //   y : pos.y
        //   }
        // }else {
        //   return {
        //   x : 50,
        //   y : 50
        //   }
        //  }

        //}
        // if (pos.x < ){
        //   newX=10;
        // } 
        // else if ((pos.x+dressTrailImage.getWidth()) > stage.getWidth()-50){
        //     newX = stage.getWidth()-dressTrailImage.getWidth()-50;
        // }
        // else{
        //     newX = pos.x;
        // };

        // if(pos.y < 10){
        //     newY = 10;
        // }
        // else if((pos.y + dressTrailImage.getHeight()) > stage.getHeight()-50){
        //     newY = stage.getHeight()-dressTrailImage.getHeight()-50;
        // }
        // else {
        //     newY = pos.y;
        // }

        //console.log("newX:"+newX+", newY:"+newY);
        // return {
        //   x : newX,
        //   y : newY,
        // };
      //}
    });
    // UsrTrail
    var UsrTrailImg = new Kinetic.Image({
      x: 0,
      y: 0,
      image: images.UsrTrail,
      width: images.UsrTrail.width,
      height: images.UsrTrail.height,
      name: 'image'
    });
    var layer = new Kinetic.Layer();
    /*
     * go ahead and add the groups
     * to the layer and the layer to the
     * stage so that the groups have knowledge
     * of its layer and stage
     */
    layer.add(dressTrailImageGroup);
    layer.add(UsrTrailImg);
    stage.add(layer);
    UsrTrailImg.moveToBottom();
    intialAspRatio = images.dressTrailImage.width/images.dressTrailImage.height;
    console.log("aspectRatio is :"+intialAspRatio);

    // dress Trail Image

    var inith=200; //set this to the desired height of the dress that shows up initially
    var initw=intialAspRatio*inith;

    var neck_user_x=50;//from backend
    var neck_user_y=20;//from backend
    var neck_dress_x=50;//from backend
    var neck_dress_y=5;//from backend

//for getting the actual width and height of the User's Image
var UsrImgObjActual= new Image();
UsrImgObjActual.src=sources.UsrTrail;
UsrimgWidth=UsrImgObjActual.width;
UsrimgHeight=UsrImgObjActual.height;
//////////////////////////////////////////

    // var UsrimgWidth= 180;
    // var UsrimgHeight=270;
console.log("height Should Be 270 and is:"+UsrimgHeight);
console.log("Width Should Be 180 and is:"+UsrimgWidth);
    var dressimgWidth=initw;
    var dressimgHeight=inith;

    console.log("usertrail image width adn height"+images.UsrTrail.width+"::"+images.UsrTrail.height);
    console.log("neck user and dress resp"+neck_user_x+","+neck_user_y+','+neck_dress_x+','+neck_dress_y);

    var x_draw=((neck_user_x*UsrimgWidth)-(neck_dress_x*dressimgWidth));
    var y_draw=((neck_user_y*UsrimgHeight)-(neck_dress_y*dressimgHeight));

    x_draw=x_draw/100;
    y_draw=y_draw/100;

    console.log("xdraw and ydraw:"+x_draw+','+y_draw);

    //top left corner coordinates of the dress image.
    var initx=x_draw;
    var inity=y_draw;

    var dressTrailImage = new Kinetic.Image({
      x: initx,
      y: inity,
      image: images.dressTrailImage,
      name: 'image',
      width: initw,// images.dressTrailImage.width,
      height: inith //images.dressTrailImage.height
    });

    // dressTrailImage.width = 50;
    // dressTrailImage.height = dressTrailImage.width / intialAspRatio;

    // console.log(dressTrailImage.height);

    dressTrailImageGroup.add(dressTrailImage);
    addAnchor(dressTrailImageGroup, initx , inity, 'topLeft');
    addAnchor(dressTrailImageGroup, initx + initw , inity , 'topRight');
    addAnchor(dressTrailImageGroup, initx + initw , inity + inith, 'bottomRight');
    addAnchor(dressTrailImageGroup, initx , inity + inith, 'bottomLeft');
    topLeft = dressTrailImageGroup.get('.topLeft')[0];
    topRight = dressTrailImageGroup.get('.topRight')[0];
    bottomRight = dressTrailImageGroup.get('.bottomRight')[0];
    bottomLeft = dressTrailImageGroup.get('.bottomLeft')[0];
    image = dressTrailImageGroup.get('.image')[0];
    dressTrailImageGroup.on('dragstart', function() {
      this.moveToTop();
    });
    stage.draw();
  }
  var sources = {
    dressTrailImage: "http://www.html5canvastutorials.com/demos/assets/darth-vader.jpg",
    UsrTrail:  "http://www.html5canvastutorials.com/demos/assets/yoda.jpg"
  };

  loadImages(sources, initStage);
  //function called on clicking the submit button.
  function Sunmit_fn(){
                //neck positions of the trail dress in percentages (assumed for now!).
                neckDressX=50;//in percentage.
                neckDressY=5;//in percentage.
                //height and width of the user image used in the canvas.
        //original here here is refered to the height and width used in the canavs
                var originalUserImgWidth = imWidth; 
                var originalUserImgHeight = imHeight;
                var trailDressWidth = image.getWidth();//Final Image Width
                var trailDressHeight = image.getHeight();//Final Image Height
                imageX=topLeft.getParent().getX()+topLeft.getX()+1;//upper right anchor X Position 
                imageY=topLeft.getParent().getY()+topLeft.getY()+1;//upper right anchor Y Position
                //formula for calculating the final neck positions of the resized and dragged dress 
            //with respect to the user image in percentages
                neckFinalX=(imageX+(trailDressWidth*(neckDressX/100)))/originalUserImgWidth;
                neckFinalY=(imageY+(trailDressHeight*(neckDressY/100)))/originalUserImgHeight;
                //neck in percentages trail pic neck x,y.
                neckFinalX=neckFinalX*100;
                neckFinalY=neckFinalY*100;
        //Just for testing.
    console.log("neck position updated by User:");
        console.log("X:"+neckFinalX+", Y:"+neckFinalY+")");
        console.log("Resized Size of the dress is:");
        console.log("Width:"+trailDressWidth+", Height:"+trailDressHeight);
            }
</script> 
```

此脚本仅沿一个轴调整四个点的大小。您可以为所有点计算出相同的大小

# algorithm - 选择使用 Google Calendar API 的代理缓存方法

> ID：15543558
> 
> 赞同：1
> 
> 时间：2013-03-21T09:23:58.050
> 
> 标签：algorithm, caching, google-calendar-api

我需要一种合适的缓存方法，用于显示来自[Google Calendar API](https://developers.google.com/google-apps/calendar/v3/reference/)的数据的企业门户。哪些算法或设计模式最适用？

Google Calendar API 受每天请求数量（*默认为 10,000 个请求/天* - 我请求更多）和访问速率（*5 个请求/秒/用户*）的限制。

我希望使用两种核心 API 方法，一种是获取[用户日历列表](https://developers.google.com/google-apps/calendar/v3/reference/calendarList/list)（*1 个 API 命中*），另一种是[下载单个日历的事件](https://developers.google.com/google-apps/calendar/v3/reference/events/list)（每个日历*1 个 API 命中*）。

日历列表和单个日历都包含**etag**值，可用于帮助避免不必要的 API 请求。如果您有一个单独的日历**etag**值列表，那么您可以通过查询日历列表来查看其中是否有任何更改。（不幸的是，HTTP *304 Not Modified*响应仍被视为 API 命中）。

此外，我真的不想下载和缓存整个日历内容（所以可能一次只需要几天或几周）。

我需要找到一种方法来尽量减少 API 调用的数量，但不尝试存储所有内容。它还需要能够处理偶尔从未更改的日历中获取数据，因为日历数据上的“时间滑动窗口”已经移动。我希望系统有数据存储支持，以便多个门户实例可以共享相同的数据。

# android - 无法从 Android POST 数据 WCF

> ID：15543559
> 
> 赞同：1
> 
> 时间：2013-03-21T09:23:59.030
> 
> 标签：android, json, wcf, post

我尝试了一天仍然无法将数据发布到 wcf。这是我在 .net 服务器上的代码。当我看到来自 android Logcat 的日志时，它总是停在 response = httpClient.execute(request); 并且在错误日志中没有捕获任何内容，e.getMessage() 返回 null。所以我不知道发生了什么......任何人都可以发现下面的代码有什么问题？

界面：

```
<OperationContract()> _
   <WebInvoke(Method:="POST", 
   RequestFormat:=WebMessageFormat.Json,    
   ResponseFormat:=WebMessageFormat.Json, 
   BodyStyle:=WebMessageBodyStyle.Bare, 
   UriTemplate:="SaveEmail")> _
    Function SaveEmail(ByVal emailreceiver As clsEmailRecipe) As String 
```

代码：

```
 Public Function SaveEmail(emailreceiver As clsEmailRecipe) As String Implements IRestServiceImpl.SaveEmail
        Return "0"
    End Function 
```

安卓客户端代码：

```
public static String SendEmail(String url,String Data) { 
     // POST request to <service>/SaveVehicle
    HttpPost request = new HttpPost(url);
    request.setHeader("Accept", "application/json");
    request.setHeader("Content-type", "application/json");
    String sText ="";
    // Build JSON string
    JSONStringer email;
    try {
        email = new JSONStringer()
            .object()
                .key("clsEmailRecipe")
                    .object()
                        .key("emailAddress").value("11s22@r.com")
                        .key("campaignId").value("1")
                        .key("recipeId").value("2") 
                    .endObject()
                .endObject();
        StringEntity entity;
        entity = new StringEntity(email.toString());
        request.setEntity(entity);

        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpResponse response;
        Log.d("SendEmail","1");
        response = httpClient.execute(request); // This Line Cause error
        Log.d("SendEmail","2");
        sText=response.getStatusLine().toString();

    } catch (Exception e) {
        // TODO Auto-generated catch block
        //Log.d("SendEmail",e.getMessage());
         Log.d("SendEmail","Error with null message");
         if (e.getMessage() !=null){
             Log.d("SendEmail",e.getMessage());  
         }

        e.printStackTrace();
    }

      return sText;

} 
```

日志猫：

```
03-21 17:36:03.735: D/PostVehicle(23079): 1
03-21 17:36:03.740: D/PostVehicle(23079): Error with null message
03-21 17:36:03.740: W/System.err(23079): android.os.NetworkOnMainThreadException
03-21 17:36:03.740: W/System.err(23079):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1118)
03-21 17:36:03.740: W/System.err(23079):    at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
03-21 17:36:03.740: W/System.err(23079):    at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
03-21 17:36:03.740: W/System.err(23079):    at java.net.InetAddress.getAllByName(InetAddress.java:214)
03-21 17:36:03.740: W/System.err(23079):    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
03-21 17:36:03.740: W/System.err(23079):    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
03-21 17:36:03.740: W/System.err(23079):    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
03-21 17:36:03.740: W/System.err(23079):    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
03-21 17:36:03.740: W/System.err(23079):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:670)
03-21 17:36:03.745: W/System.err(23079):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:509)
03-21 17:36:03.745: W/System.err(23079):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
03-21 17:36:03.745: W/System.err(23079):    at com.omg.rc.general.Utils.PostVehicle(Utils.java:168)
03-21 17:36:03.745: W/System.err(23079):    at com.omg.rc.LoginActivity.onClick(LoginActivity.java:340)
03-21 17:36:03.745: W/System.err(23079):    at android.view.View.performClick(View.java:4223)
03-21 17:36:03.745: W/System.err(23079):    at android.view.View$PerformClick.run(View.java:17275)
 03-21 17:36:03.745: W/System.err(23079):   at android.os.Handler.handleCallback(Handler.java:615)
03-21 17:36:03.745: W/System.err(23079):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-21 17:36:03.745: W/System.err(23079):    at android.os.Looper.loop(Looper.java:137)
03-21 17:36:03.745: W/System.err(23079):    at android.app.ActivityThread.main(ActivityThread.java:4898)
03-21 17:36:03.745: W/System.err(23079):    at java.lang.reflect.Method.invokeNative(Native Method)
03-21 17:36:03.745: W/System.err(23079):    at java.lang.reflect.Method.invoke(Method.java:511)
03-21 17:36:03.745: W/System.err(23079):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1008)
03-21 17:36:03.745: W/System.err(23079):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:775)
03-21 17:36:03.745: W/System.err(23079):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:44:47.563

在. `SendEmail(String url,String Data)`_ `AsyncTask`不允许在主线程内运行网络操作。

# wpf - 我的 WPF 应用程序找不到资源“Mainwindow.xaml”

> ID：15543570
> 
> 赞同：29
> 
> 时间：2013-03-21T09:24:27.687
> 
> 标签：wpf, vb.net, xaml

我一直在使用 vb.net 开发 WPF 应用程序，最近遇到了一个问题。

当我构建我的代码时，构建成功，但是在运行代码时 System.IO.IOexception 抛出异常“无法找到资源 ViewModel/ViewModel/Mainwindow.xaml” .Xaml 窗口位于名为 ViewModel 的文件夹中因此我不知道其他 ViewModel/ViewModel... 路径来自哪里，不应该是 viewModel/MainWindow.Xaml 吗？我已经尝试了所有可能的解决方案，包括清理项目，但它似乎不起作用。

唯一可行的解​​决方案是如果我将 StartupUri 从 `StartupUri = "ViewModel\MainWindow.Xaml"`TO更改，`StartupUri = "...\MainWindow.xaml"`但我怀疑这是否是正确的做法。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2014-06-11T09:23:23.653

更改`StartupUri="MainWindow.xaml"`为`StartupUri="FolderName/MainWindow.xaml"`

解决了我的问题，当我将 MainWindow 移动到 View 文件夹时

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-02-28T10:27:37.960

在我的情况下，我需要使用 pack URI 语法将我的 App.xaml 文件的 SrartUpUri 属性设置为指向我的 MainWindow.xaml 的新位置，如下所示：

```
 <Application x:Class="TrafficLights.Controller.App"
                xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                StartupUri="pack://application:,,,/View/MainWindow.xaml"> 
```

更多关于包 URI 的信息：

[http://msdn.microsoft.com/en-us/library/aa970069(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/aa970069(v=vs.110).aspx)

希望能帮助到你。祝你好运！

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-02-11T04:43:09.567

这发生在我身上几次 - 总是当我移动`MainWindow.xaml`到不同的文件夹并忘记更新`StartupUri`时`App.xaml`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-27T06:28:59.837

Visual Studio 以某种方式将 my 重命名`MainWindow.xaml`为`MainWindow(1).xaml`，所以我再次将其重命名为`MainWindow.xaml`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-12-18T16:24:25.653

我将`Mainwindow.xaml`文件重命名为`NameList.xaml`并且没有更新`App.xaml`文件。一旦我这样做了`StartupUri="NameList.xaml"`，就很好了。

# c++ - AllocConsole() 不显示 cout

> ID：15543571
> 
> 赞同：41
> 
> 时间：2013-03-21T09:24:27.637
> 
> 标签：c++, dll

我有一个 DLL，我在其中使用 AllocConsole() 和 cout 来显示数据以进行调试。
它曾经可以正常工作，但是由于我将编译器（Visual Studio 2012）更新到最新版本，因此 dll 仅显示控制台，但不显示打印/输出。
我不知道为什么会这样。
有任何想法吗？

我的部分代码

```
__declspec(dllexport) INT APIENTRY DllMain(HMODULE hDLL, DWORD Reason, LPVOID Reserved)
{
    switch(Reason)
    {
    case DLL_PROCESS_ATTACH:    
        AllocConsole();

        DisableThreadLibraryCalls(hDLL);

        //
        DetourTransactionBegin();
        DetourUpdateThread(GetCurrentThread());
        DetourAttach(&(PVOID&)pSend, MySend);
        if(DetourTransactionCommit() == NO_ERROR)
             cout << "[" << MySend << "] successfully detoured." << endl; 
```

但是什么都没有显示。

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2013-03-21T12:34:56.843

我隐约记得您可能需要将标准输出重定向到控制台。不过我可能是错的（因为你的代码之前工作过）：

```
AllocConsole();
freopen("CONOUT$", "w", stdout);
std::cout << "This works" << std::endl; 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2019-07-28T14:48:27.710

通过 分配新控制台后[`AllocConsole()`](https://docs.microsoft.com/en-us/windows/console/allocconsole)，您需要重新打开标准流（`stdout`、`stderr`、`stdin`）才能使用它们。

您可以通过使用`freopen`（在较新版本的 Visual Studio 中您需要使用`freopen_s`）示例：

```
FILE *fDummy;
freopen_s(&fDummy, "CONIN$", "r", stdin);
freopen_s(&fDummy, "CONOUT$", "w", stderr);
freopen_s(&fDummy, "CONOUT$", "w", stdout); 
```

如果要使用已弃用的`freopen`，可以通过ing[禁用警告](https://docs.microsoft.com/de-de/cpp/c-runtime-library/security-features-in-the-crt?view=vs-2019)。`#define``_CRT_SECURE_NO_WARNINGS`

如果您还想使用宽字符流（`std::wcout`、`std::wcerr`等...），则需要调用[`SetStdHandle()`](https://docs.microsoft.com/en-us/windows/console/setstdhandle)为您的进程设置新的输出句柄。[`CreateFile()`](https://docs.microsoft.com/en-us/windows/win32/api/fileapi/nf-fileapi-createfilea)您可以通过使用`CONOUT$`/`CONIN$`作为文件名调用来获取所需的文件句柄：

```
HANDLE hConOut = CreateFile(_T("CONOUT$"), GENERIC_READ | GENERIC_WRITE, FILE_SHARE_READ | FILE_SHARE_WRITE, NULL, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, NULL);
SetStdHandle(STD_OUTPUT_HANDLE, hConOut); 
```

此外，如果您在重新打开它们之前尝试使用其中一个流，它们将在它们的 中[`std::ios_base::badbit`](http://www.cplusplus.com/reference/ios/ios_base/iostate/)设置 和[`std::ios_base::failbit`](http://www.cplusplus.com/reference/ios/ios_base/iostate/) ，`iostate`因此后续的写入/读取将被忽略。
您可以使用 重置流状态[`.clear()`](https://en.cppreference.com/w/cpp/io/basic_ios/clear)，之后您可以再次读取/写入流：

```
std::cout.clear();
std::cin.clear(); 
```

下面是重新打开所有流之后的完整示例`AllocConsole()`：

```
void CreateConsole()
{
    if (!AllocConsole()) {
        // Add some error handling here.
        // You can call GetLastError() to get more info about the error.
        return;
    }

    // std::cout, std::clog, std::cerr, std::cin
    FILE* fDummy;
    freopen_s(&fDummy, "CONOUT$", "w", stdout);
    freopen_s(&fDummy, "CONOUT$", "w", stderr);
    freopen_s(&fDummy, "CONIN$", "r", stdin);
    std::cout.clear();
    std::clog.clear();
    std::cerr.clear();
    std::cin.clear();

    // std::wcout, std::wclog, std::wcerr, std::wcin
    HANDLE hConOut = CreateFile(_T("CONOUT$"), GENERIC_READ | GENERIC_WRITE, FILE_SHARE_READ | FILE_SHARE_WRITE, NULL, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, NULL);
    HANDLE hConIn = CreateFile(_T("CONIN$"), GENERIC_READ | GENERIC_WRITE, FILE_SHARE_READ | FILE_SHARE_WRITE, NULL, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, NULL);
    SetStdHandle(STD_OUTPUT_HANDLE, hConOut);
    SetStdHandle(STD_ERROR_HANDLE, hConOut);
    SetStdHandle(STD_INPUT_HANDLE, hConIn);
    std::wcout.clear();
    std::wclog.clear();
    std::wcerr.clear();
    std::wcin.clear();
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-02-28T22:30:23.837

这适用于带有线的vs2015`std::cout.clear()`

```
if (!AllocConsole())
    MessageBox(NULL, L"The console window was not created", NULL, MB_ICONEXCLAMATION);

FILE* fp;

freopen_s(&fp, "CONOUT$", "w", stdout);

printf("Hello console on\n");

std::cout.clear();

std::cout << "Cout line one." << std::endl;

cout << "Cout line two." << std::endl;

MessageBox(NULL, (L"Pause to see console output."), (L"Pause Here"), MB_OK | MB_SYSTEMMODAL | MB_ICONEXCLAMATION);

fclose(fp);

if (!FreeConsole())
    MessageBox(NULL, L"Failed to free the console!", NULL, MB_ICONEXCLAMATION); 
```

# c++ - 使用字符串流，我如何解开这些字符串？

> ID：15543577
> 
> 赞同：0
> 
> 时间：2013-03-21T09:24:40.660
> 
> 标签：c++, parsing, tcp

我有一个 tcp 客户端，它从服务器获取数据作为字符串流。服务器将向量（浮点数）打包成一个大字符串，并用标志分隔它们。现在在我的客户端中，我再次分离这些标志，并将它们存储在一个字符串数组中。所以每个“令牌”应该是一个向量。但我只是无法解析它。我得到的字符串看起来很奇怪，看看：![在此处输入图像描述](../Images/216b38c1534c1ea8f42142b737d5e22f.png)

因此，我需要做的就是将其解析回 3 个浮点数。在服务器端它是这样发送的：

```
data.addFlag(11);
data << pelvis.x() << pelvis.y() << pelvis.z();
data.addFlag(12);
data << rhip.x() << rhip.y() << rhip.z(); 
```

运算符重载为

```
operator<<(const float& f)
{
m_buf.append(reinterpret_cast<const char*>(&f), sizeof(f));
return *this;
} 
```

**编辑：**

一个令牌看起来像这样：如果我尝试通过解析它

```
float first = *reinterpret_cast<float*>(value) 
```

我有一个例外。 ![在此处输入图像描述](../Images/bd4f90e286105ecc808b4a3e6c230a63.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:38:05.457

字符串看起来不错，您只需要了解，当您将浮点数重新解释为 char 数组时，您将无法获得人类可读的内容。您可以在这里查看浮点数如何表示为二进制：[浮点教程](http://kipirvine.com/asm/workbook/floating_tut.htm)

因此，如果您有浮点 1.01，您将获得二进制 00111111100000010100011110101110，即十六进制 0x3f8147ae，如果您在 ascii 表中查找每个字节，您会发现这些字节可能看起来是垃圾。

所以对于你的问题：如果你看[这里，](http://en.cppreference.com/w/cpp/language/types)你会看到每个浮点数是 4 个字节。

所以假设你有一个 12 字节的字符串（你应该这样做），你应该意识到那里有 3 个浮点数。要取出它们，一次获取 4 个字节并重新解释它们

（未经测试的代码）

```
string data = (however you got the data)
float first = *reinterpret_cast<float*>(&data[0]);
float second = *reinterpret_cast<float*>(&data[4]);
float third = *reinterpret_cast<float*>(&data[8]); 
```

就是这样。

编辑：似乎我忘记了取消引用指针。

有关工作示例，请参见此处：

[http://ideone.com/FLce6y](http://ideone.com/FLce6y)

# asp.net-web-api - 如何在 WEB API 的响应正文中跨应用程序添加未处理的异常

> ID：15543579
> 
> 赞同：1
> 
> 时间：2013-03-21T09:24:49.837
> 
> 标签：asp.net-web-api

如何在 WEB API 的响应正文中跨应用程序添加未处理的异常。如果没有例外，则需要将成功消息发送到所有响应的响应正文......需要帮助来实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T13:05:08.007

你需要两件事。为了处理异常，您需要在 HttpConfiguration 对象中设置 IncludeDetailErrorPolicy，

您可以将错误策略首选项配置为 IncludeErrorDetailPolicy 属性中配置对象 (HttpConfiguration) 的一部分。这只是一个指示 Web API 如何处理异常的枚举。

此枚举的可能值为，

默认值：如果您使用 ASP.NET 作为主机或使用 LocalOnly 作为自主机，它将使用 customErrors 配置设置。LocalOnly：仅包含本地请求的错误详细信息 Always：始终包含错误详细信息 Never：从不包含错误详细信息

当异常发生时，Web API 将检查此设置的值，以在响应消息中包含有关异常的详细信息。例如，如果启用 Always，Web API 会将异常详细信息序列化为您作为响应获得的消息的一部分。

成功消息没有多大意义，因为您已经有了响应状态代码。状态码等于 OK 表示一切正常。如果您仍想添加其他消息，请使用检查响应状态代码的 HttpMessageHandler。如果状态码正常，则添加消息。但是，响应正文已在此时设置，因此您将无法修改它。您也许可以将消息添加为标题。

# c# - 触摸事件不能在单声道中使用

> ID：15543581
> 
> 赞同：2
> 
> 时间：2013-03-21T09:24:51.220
> 
> 标签：c#, java, android, event-handling, mono

我最近从 Java 转向 C# 和 Mono 以进行 Android 开发。我有一个 ListView，我想从中选择返回 true 或 false，但在 Mono 中似乎没有这样做的选项。以下是一些代码片段：

Java（我试图在 Mono 中重现）

```
ListView listview;
ArrayAdapter<String> adapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    listview = (ListView)findViewById(R.id.listView1);
    adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1);

    for (int i = 0; i < 50; i++)
        adapter.add(Integer.toString(i));

    listview.setAdapter(adapter);
    listview.setOnTouchListener(listenerOnTouch);
}

private OnTouchListener listenerOnTouch = new OnTouchListener() {

    @Override
    public boolean onTouch(View arg0, MotionEvent arg1) {
        return false; // <---- This line doesn't exist in Mono
    }
}; 
```

单声道等效：

```
 ListView listview;
    ArrayAdapter<String> adapter;

    protected override void OnCreate (Bundle bundle)
    {
        base.OnCreate (bundle);

        // Set our view from the "main" layout resource
        SetContentView (Resource.Layout.Main);

        listview = FindViewById(Resource.Id.listView1) as ListView;
        adapter = new ArrayAdapter<string>(this, Android.Resource.Layout.SimpleListItem1);

        for (int i = 0; i < 50; i++)
            adapter.Add (i.ToString());

        listview.Adapter = adapter;
        listview.Touch += ListenerOnTouch;
    }

    private void ListenerOnTouch(object sender, View.TouchEventArgs e)
    {
        // Delegate return type is void, so I can't return true/false
    } 
```

从根本上说，我在这种情况下想要做的是，如果我向上或向下拖动列表视图，它会正常滚动，但如果我向左或向右拖动它会做其他事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:35:18.743

我认为，可能是 e.Handled 需要根据您的要求设置真/假。

[处理触摸事件](http://docs.go-mono.com/index.aspx?link=T%3aAndroid.Views.View.TouchEventArgs)

# python - _BaseModel__view_look_dom_arch

> ID：15543585
> 
> 赞同：0
> 
> 时间：2013-03-21T09:25:02.323
> 
> 标签：python, xml, module, openerp

需要澄清这个错误是什么。？无法安装我自己的开发模块。？也重新检查了我的视图 XML 文件。找不到任何错误

```
 File "/home/priyan/Software/openerp-7.0-20130309-002120/openerp/osv/orm.py", line 1776, in __view_look_dom
    xarch, xfields = relation.__view_look_dom_arch(cr, user, f, view_id, ctx)
AttributeError: 'NoneType' object has no attribute '_BaseModel__view_look_dom_arch'
2013-03-21 09:19:32,668 3683 ERROR bpl_db openerp.tools.convert: Parse error in /home/priyan/Software/openerp-7.0-20130309-002120/openerp/addons/bpl/bpl_view.xml:276: 
<record model="ir.ui.view" id="bpl_work_offer_form">
            <field name="name">bpl.work.offer.form</field>
            <field name="model">bpl.work.offer</field>
            <field name="arch" type="xml">
                <form string="bpl_work_offer" version="7.0">
                    <sheet>

..............................................

  File "/home/priyan/Software/openerp-7.0-20130309-002120/openerp/osv/osv.py", line 144, in wrapper
    raise except_osv(inst.name, inst.value)
except_osv: ('ValidateError', u'Error occurred while validating the field(s) arch: Invalid XML for View Architecture!')
2013-03-21 09:19:32,680 3683 INFO bpl_db werkzeug: 127.0.0.1 - - [21/Mar/2013 09:19:32] "POST /web/dataset/call_button HTTP/1.1" 200 - 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:40:54.827

我的 sequence.xml 文件和模型类中的 onetomany 映射出现问题并根据版本 07 对**openerp** .py 文件进行一些更改

然后问题现在排序..

所有的信用都需要转到**user1576199** 谁，直接参与并帮助我纠正了我的代码中的所有问题

# solr - 根据某个字段中某个值的出现次数检索文档；

> ID：15543588
> 
> 赞同：0
> 
> 时间：2013-03-21T09:25:05.813
> 
> 标签：solr, solrj

所以这是我的问题。我有一个太阳能索引，我在其中添加了具有多个字段的文档，其中一个是“名称”。问题是：鉴于我知道出现次数必须在区间 [a,b] 内，我如何检索具有“名称”字段值的文档一个出现在更多文档中的值， a,b 是已知值。例如我有

```
<doc>
  <field name="name">ana</field>
</doc>
<doc>
  <field name="name">gina</field>
</doc>
<doc>
  <field name="name">ana</field>
</doc>
<doc>
  <field name="name">ana</field>
</doc> 
```

所以我有 3 个文档，a=2 和 b=3。所以我的查询应该返回第一个、第三个和第四个文档，因为它们包含字段名称的值“ana”，并且值 ana 在索引中出现 3 次，并且 3 在区间 [a,b] 中[2,3]。

谢谢

# html - Html电子邮件对齐文本和图像

> ID：15543593
> 
> 赞同：2
> 
> 时间：2013-03-21T09:25:30.553
> 
> 标签：html, css, email, outlook

我无法将图像与文本对齐。该问题仅出现在 Outlook 03,07 和 10 中。请参阅此图片以更好地了解我的问题：![在此处输入图像描述](../Images/1e4f945f4cc397db8e74a25d19daa013.png)

这是我的代码：

```
<td valign="middle" style="color:#fff;  font-size:18px; padding-left:3%;" width="600" height="34" bgcolor="#1a292f">
    <span class="nonmobile_content">
        Onsdag
    </span>                         
    <span style="font-weight: bold">
        21.03
    </span>                     
    <span style="color:#87bcd8;">
        2013
    </span>                     
    <span style="color:#87bcd8;">
        uke 11
    </span>
    <span>
        <img src="retriever-logo-top.png" align="right">
    </span>
</td>
<td bgcolor="#1a292f">
    &nbsp;&nbsp;&nbsp;
</td> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T09:39:36.010

您是否有理由将所有这些都放在一个表格单元格中，而不是将图像放在单独的单元格中？你可以简单地：

```
<tr>
    <td colspan="2">
        Retriever (1), Cision (2), ...
    </td>
</tr>
<tr>
    <td ... >
        <span class="nonmobile_content">
            Onsdag
        </span>                         
        <span style="font-weight: bold">
            21.03
        </span>                     
        <span style="color:#87bcd8;">
            2013
        </span>                     
        <span style="color:#87bcd8;">
            uke 11
        </span>
    </td>
    <td>
        <img src="retriever-logo-top.png" align="right">
    </td>
</tr> 
```

然后添加`width`到每个人`td`只需将其添加到表中：

```
<table width="600"> 
```

# javascript - 使用 Highcharts.js 的可拖动日期范围

> ID：15543594
> 
> 赞同：1
> 
> 时间：2013-03-21T09:25:30.887
> 
> 标签：javascript, svg, charts, highcharts, highstock

有谁知道可以在使用 Highcharts.js 创建的柱形图上使用的任何拖动事件，甚至知道如何在图表上潜在地模仿该事件？

我们有一个拆分柱形图。较小的下部图表控制上面主图表上的日期范围。目前调整范围的唯一方法是单击并选择较小图表的段。下图是我们目前所拥有的：

![在此处输入图像描述](../Images/94054230c249566efe949594e2fbcc55.png)

我们希望能够制作一个带有手柄的可拖动界面，以任意方式拉伸和调整段。

Highstock.js 中也有相同的功能（截图如下）： ![在此处输入图像描述](../Images/4dc6ec2ce42fe672efdba2724cb81dd7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T15:09:05.667

在 highcharts 中，您只能使用主详细信息类型的图表[http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/dynamic-主细节/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/dynamic-master-detail/)

但是您可以使用 highstock.js 并在 navigator / serie 中使用柱形图。看例子

[http://jsfiddle.net/UNBP7/](http://jsfiddle.net/UNBP7/)

```
navigator:{
            series:{
                type:'column'
            }
        }, 
```

[http://api.highcharts.com/highstock#navigator.series](http://api.highcharts.com/highstock#navigator.series)

# android - IntentService 如何在 Service 需要 stopService() 调用来停止它时自动停止？

> ID：15543601
> 
> 赞同：2
> 
> 时间：2013-03-21T09:25:42.460
> 
> 标签：android, android-service

IntentService 是如何自动停止的，而普通的 Service 需要调用 stopService() 来停止它？这在内部如何运作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:29:59.583

当队列中没有要处理的工作（意图）时，IntentService 调用 stopSelf()。只需在 androidxref.com 之类的网站上查看 IntentService.java 源代码即可查看：

[http://androidxref.com/4.2.2_r1/xref/frameworks/base/core/java/android/app/IntentService.java](http://androidxref.com/4.2.2_r1/xref/frameworks/base/core/java/android/app/IntentService.java)

更准确地说（检查提供的链接上的第 66 行）：它实际上并不测试队列，而是每次调用 stopSelf(int) 。以 startid(int) 作为参数的 stopSelf() 版本实际上会检查服务是否没有接收到仍然需要处理的更新的启动命令。因为IntentService只有一个工作线程顺序处理intent，所以这个测试和测试“队列是否为空”是一样的。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-21T09:52:27.463

服务是在后台运行的组件，无需与用户直接交互。Android 平台提供并运行预定义的系统服务，并且每个 Android 应用程序都可以使用它们，只要获得正确的权限。您可以通过以下方式停止。

```
Boolean stop1month = context.stopService(new Intent(context,Service.class));
or 
stopSelf() 
```

在服务类中了解更多信息，[请参阅](http://www.vogella.com/articles/AndroidServices/article.html)

# xpath - 使用 xpath 获取所有属性值

> ID：15543602
> 
> 赞同：0
> 
> 时间：2013-03-21T09:25:47.643
> 
> 标签：xpath

这是我的 xml 文件：-

```
<results value="1">
    <result value="111">
        <Country_Code value="IN"/>
        <Country_Name value="India"/>
        <Region_Name value="Gujarat"/>
        <City  value="Rajkot"/> 
        <loction lat="13.060422" lng="80.24958300000003"/>
    </result>
    <result value="222">
        <Country_Code value="KE"/>
        <Country_Name value="Kenya"/>
        <Region_Name value="Vihiga"/>
        <City value="Kakamega"/> 
        <loction lat="0.1182473" lng="34.7334515999997"/>
    </result>
</results> 
```

这是我的代码：-

```
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script>
        var xml;
        $.get(
        "sea.xml",
        null,
        function (data) {
            xml = data;
        },
        "xml"
    );

        function get_list(ls) {
            var elName = $('#select').val();
            var value = $('#value').val();
            if(elName == "" || value == "")
            {
            }
            else if (elName != "" || value != "")
            {
            var xPath = '//*[ @lat '+ ls +' "'+elName+'" and @lng '+ ls +' "'+value+'"]'+'/../City/@*';

            var iterator = xml.evaluate(xPath, xml.documentElement, null,
                XPathResult.UNORDERED_NODE_ITERATOR_TYPE, null);
            var thisNode = iterator.iterateNext();
            var str = '';
            while (thisNode) {
                if (str) {
                    str += ', ';
                }
                str += thisNode.textContent;
                thisNode = iterator.iterateNext();
            }

            $("#result").text(str);
        }
        else 
        {}
        }
    </script>
</head>
<body>
    <input type="text" id="select">
    <input type="text" id="value">
    <input type="button" name="button" value="Search" onclick="get_list('=')">
    <div id="result">
    </div>
</body>
</html> 
```

使用此代码 xpath 返回属性值`Rajkot`，但我想更改 Xpath 以获取所有属性

如果 xml 文件上的值匹配，则在 xPath 的帮助下仅返回城市属性值。
但我想要所有属性值，例如：-`IN,Inida,Gujarat,Rajkot,13.060422,80.24958300000003`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:32:10.330

以下 XPath：

```
//loction[@lat='13.060422' and @lng='80.24958300000003'][1]/preceding-sibling::City/@value 
```

输出：

```
 value="Rajkot" 
```

* * *

以及以下 XPath：

```
//loction[@lat='13.060422' and @lng='80.24958300000003'][1]/preceding-sibling::*/@* 
```

输出：

```
 value="IN"
-----------------------
value="India"
-----------------------
value="Gujarat"
-----------------------
value="Rajkot" 
```

# debian - 通过 apt-get 在 Debian 中安装 Java 7 (Oracle)

> ID：15543603
> 
> 赞同：78
> 
> 时间：2013-03-21T09:25:51.317
> 
> 标签：debian, java-7, apt-get

通过 apt-get 存储库在 Debian 中安装 Oracle Java 7 似乎不起作用。

```
apt-get install oracle-java7-installer 
```

样子`apt-get`不认识`oracle-java7-installer`。

* * *

## 回答 #1

> 赞同：166
> 
> 时间：2013-03-21T09:27:12.407

做了一些谷歌后设法得到答案..

```
echo "deb http://ppa.launchpad.net/webupd8team/java/ubuntu precise main" | tee -a /etc/apt/sources.list
echo "deb-src http://ppa.launchpad.net/webupd8team/java/ubuntu precise main" | tee -a /etc/apt/sources.list
apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys EEA14886
apt-get update
# Java 7
apt-get install oracle-java7-installer
# For Java 8 command is:
apt-get install oracle-java8-installer 
```

# android - 使用 Proguard 混淆时 Gson EnumTypeAdapter 中的 AssertionError

> ID：15543607
> 
> 赞同：78
> 
> 时间：2013-03-21T09:26:00.430
> 
> 标签：android, gson, proguard

我的项目在序列化/反序列化期间实现了一个`TypeAdapter`in`Gson`来保留对象的多态状态。无论如何，该项目在开发测试期间运行良好，但是当它使用**proguard 混淆**发布并经过测试时，它就崩溃了。

```
03-21 10:06:53.632: E/AndroidRuntime(12441): FATAL EXCEPTION: main
03-21 10:06:53.632: E/AndroidRuntime(12441): java.lang.AssertionError
03-21 10:06:53.632: E/AndroidRuntime(12441):    at com.google.gson.internal.bind.TypeAdapters$EnumTypeAdapter.<init>(SourceFile:724)
03-21 10:06:53.632: E/AndroidRuntime(12441):    at com.google.gson.internal.bind.TypeAdapters$26.create(SourceFile:753)
03-21 10:06:53.632: E/AndroidRuntime(12441):    at com.google.gson.Gson.getAdapter(SourceFile:353)
03-21 10:06:53.632: E/AndroidRuntime(12441):    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.<init>(SourceFile:82)
03-21 10:06:53.632: E/AndroidRuntime(12441):    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.createBoundField(SourceFile:81)
03-21 10:06:53.632: E/AndroidRuntime(12441):    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.getBoundFields(SourceFile:118)
03-21 10:06:53.632: E/AndroidRuntime(12441):    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.create(SourceFile:72)
03-21 10:06:53.632: E/AndroidRuntime(12441):    at com.google.gson.Gson.getAdapter(SourceFile:353)
03-21 10:06:53.632: E/AndroidRuntime(12441):    at com.google.gson.Gson.toJson(SourceFile:578)
03-21 10:06:53.632: E/AndroidRuntime(12441):    at com.google.gson.Gson.toJsonTree(SourceFile:479)
03-21 10:06:53.632: E/AndroidRuntime(12441):    at com.google.gson.Gson.toJsonTree(SourceFile:458)
03-21 10:06:53.632: E/AndroidRuntime(12441):    at com.google.gson.Gson$3.serialize(SourceFile:137) 
```

我的 Gson 特定的 proguard 配置是：

```
##---------------Begin: proguard configuration for Gson  ----------
# Gson uses generic type information stored in a class file when working with fields. Proguard
# removes such information by default, so configure it to keep all of it.
-keepattributes Signature

# For using GSON @Expose annotation
-keepattributes *Annotation*

# Gson specific classes
-keep class sun.misc.Unsafe { *; }
#-keep class com.google.gson.stream.** { *; }

# Application classes that will be serialized/deserialized over Gson
-keep class com.google.gson.examples.android.model.** { *; }

#This is extra - added by me to exclude gson obfuscation
-keep class com.google.gson.** { *; }

##---------------End: proguard configuration for Gson  ---------- 
```

我使用的**TypeAdapter是：**

```
public final class GsonWorkshiftAdapter implements JsonSerializer<IWorkshift>, JsonDeserializer<IWorkshift> {
    private static final String CLASSNAME = "CLASSNAME";
    private static final String INSTANCE  = "INSTANCE";

    @Override
    public JsonElement serialize(IWorkshift src, Type typeOfSrc, JsonSerializationContext context) {
        String className = src.getClass().getCanonicalName();
        JsonElement elem = context.serialize(src);

        JsonObject retValue = new JsonObject();
        retValue.addProperty(CLASSNAME, className);
        retValue.add(INSTANCE, elem);

        return retValue;
    }

    @Override
    public IWorkshift deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context) throws JsonParseException {
        JsonObject jsonObject =  json.getAsJsonObject();
        JsonPrimitive prim = (JsonPrimitive) jsonObject.get(CLASSNAME);
        String className = prim.getAsString();

        Class<?> klass = null;
        try { klass = Class.forName(className); }
        catch (ClassNotFoundException e) { throw new JsonParseException(e.getMessage()); }

        return context.deserialize(jsonObject.get(INSTANCE), klass);
    }
} 
```

我对 Gson 特有的这个错误进行了大量搜索，但找不到任何有用的答案。但是我发现[了另一个](https://stackoverflow.com/questions/15483686/using-proguard-with-gson-and-roboguice-fails-when-using-a-enumtypeadapter)类似问题的问题。

开发者社区的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：198
> 
> 时间：2015-05-11T11:55:42.433

似乎我们必须要求保留枚举的成员。将此添加到 proguard 配置文件对我有用：

```
-keepclassmembers enum * { *; } 
```

或者，如果您想更具体一些，

```
-keepclassmembers enum com.your.package.** { *; } 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-05-04T01:05:10.073

当 GSON 无法从 JSON 数据反序列化枚举常量时抛出这个 AssertionError，对枚举类的字段执行自省。不幸的是，它吞噬了底层 NoSuchFieldException 的细节。

您应该确保保留已序列化的枚举字段（以及一般字段）的名称。默认情况下，ProGuard 可能会重命名甚至删除它们。例如，使用一些通配符：

```
-keepclassmembers class com.example.domain.** {
    <fields>;
} 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-05-16T13:17:48.423

已经建议您需要配置 Proguard，以使与序列化对象相关的每个枚举保持不变。我不太喜欢必须明确列出所有枚举的事实，这种解决方案很难维护。我想出的一个稍微好一点的解决方案如下。

使用空接口表示一个类或枚举参与 Gson 序列化：

```
public interface GsonSerializable { }

public class MyClass implements GsonSerializable {

    public enum MyEnum implements GsonSerializable {
        enumvalue1, enumvalue2
    }

    public MyEnum mydata1;
} 
```

使用同时保留接口和实现它的所有类/枚举的 Proguard 配置：

```
# keep GsonSerializable interface, it would be thrown away by proguard since it is empty
-keep class com.example.GsonSerializable

# member fields of serialized classes, including enums that implement this interface
-keepclassmembers class * implements com.example.GsonSerializable {
    <fields>;
}

# also keep names of these classes. not required, but just in case.
-keepnames class * implements com.example.GsonSerializable 
```

就是这样，只要你的类和枚举使用接口，你应该没问题。您还可以在序列化/反序列化方法中强制存在此接口，因此以后添加新类时不要忘记它：

```
public String serializeWithGson(GsonSerializable object) { ... } 
```

同样在您的配置中使用 'com.google.gson.examples.android.model.** { *; }' 指的是一些谷歌相关的示例代码，所以我认为没有必要。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-02-23T18:09:48.837

在我的例子中，proguard 被配置为`-keep`Gson 接触的单个类，但是当我配置 proguard 以保留这些单个类所在的*包时，错误就消失了：*

```
-keep class com.company.library.model.** { *; } 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-03-21T15:01:05.690

遇到同样的问题后，我仔细检查了反编译后的 APK。我相信这个问题与某些枚举类型在混淆过程中丢失其成员有关。

一定要保留枚举：

```
 -keepclassmembers enum * {
     public static **[] values();
     public static ** valueOf(java.lang.String);
 } 
```

另外 - 确保保留 GSON 中使用的所有类：

```
 -keep public class com.company.ordering.datacontract.** {
     public protected *;
 }

 -keep public class com.company.ordering.service.request.** {
     public protected *;
 }
 -keep public class com.company.ordering.service.response.** {
     public protected *;
 } 
```

查看完整配置@pastebin.com/r5Jg3yY2

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-03T13:27:01.487

请验证以下事项-

1.  在 app 目录中添加了 proguard-rules.pro 文件。

2.  build.gradle(module:app) 文件路径定义中定义的路径是否正确，如下所示 -

    proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'

3.  如果以上 2 个步骤都可以，请在 progaurd 文件中添加以下行（规则）-

    -keepclassmembers 枚举 * { *; }

4.  清理，构建项目并再次运行。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-05T11:56:31.477

在枚举类上应用**androidx.annotation.Keep注释。**像：

```
@Keep
enum class PlayerType {
    PRO,
    INTERMEDIATE,
    BASIC
} 
```

# grails - 控制 Grails .war web.xml

> ID：15543609
> 
> 赞同：0
> 
> 时间：2013-03-21T09:26:01.980
> 
> 标签：grails, web.xml

我使用 create-templates 命令创建了 web.xml 文件。完成文件编辑后，我运行 war 命令，在 war 文件中我发现一个 web.xml 与我之前创建的不一样，它包含以下标签：`<filter-name>urlMapping</filter-name>`和

```
<filter-mapping>
        <filter-name>urlMapping</filter-name>
        <url-pattern>/*</url-pattern>
        <dispatcher>FORWARD</dispatcher>
        <dispatcher>REQUEST</dispatcher>
    </filter-mapping> 
```

当我使用 war 命令时，您知道如何禁用这些标签自动包含在 web.xml 中吗？（我不想手动编辑 .war 文件下的 web.xml） 我应该编辑哪些配置文件？

# cordova - Windows 8 WinRT 的存储 Api 的运行时错误

> ID：15543611
> 
> 赞同：1
> 
> 时间：2013-03-21T09:26:13.263
> 
> 标签：cordova

我正在为 windows 8 WinRT 制作 phonegap 框架。我正在研究存储 API。为此，我已经在线下载了一个带有 c++ 项目的 sqlite，我通过在我的 WinRT 项目中添加该引用在我的项目中使用它。但是当我运行代码并尝试创建一个数据库时，我收到一个运行时错误“sqlite3.dll is not defined”。是phonegap WinRT不支持存储API还是有解决方法？

我能够为 phonegap WinJs 项目成功创建数据库。

# python - alembic 并获取最后插入的值

> ID：15543613
> 
> 赞同：4
> 
> 时间：2013-03-21T09:26:15.773
> 
> 标签：python, sqlalchemy, alembic

我正在使用 alembic 来管理我的数据库结构。

使用 id 作为整数和主键添加表后，id 列将是一个自动增量列。如何查询升级脚本中的数据，以便确定我得到正确的 id（我知道在这种特定情况下它是 1）？

我知道怎么做

```
#creating the table
op.create_table(
    'srv_feed_return_type',
    sa.Column('id', sa.Integer, primary_key=True),
    sa.Column('name', sa.String(50), nullable=False),
    sa.Column('created', sa.DateTime, server_default=func.now(), nullable=False),
    sa.Column('created_by', sa.String(50), nullable=False),
    sa.Column('last_updated', sa.DateTime, nullable=False),
    sa.Column('last_updated_by', sa.String(50), nullable=False)
)

#table for operations
srv_feed_return_type = table('srv_feed_return_type',
                             column('name'),
                             column('created'),
                             column('created_by'),
                             column('last_updated'),
                             column('last_updated_by'))

#bulk insert
op.bulk_insert(srv_feed_return_type,
               [
                   {'name': 'dataset',
                    'created': datetime.now(), 'created_by': 'Asken',
                    'last_updated': datetime.now(), 'last_updated_by': 'Asken'}
               ]) 
```

我知道我可以进行更新，但是如何使用类似下面的内容进行选择？

```
op.execute(
    srv_feed_return_type.update().\
        where(srv_feed_return_type.c.name==op.inline_literal('dataset')).\
        values({'name':op.inline_literal('somethingelse')})
        ) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T18:37:06.117

首先要拥有自动增量列，您需要修改表模式定义以为主键列传递序列：`sa.Column('id', sa.Integer, Sequence('srv_feed_r_t_seq'),primary_key=True),`

```
#creating the table
op.create_table(
    'srv_feed_return_type',
    sa.Column('id', sa.Integer, Sequence('srv_feed_r_t_seq'),primary_key=True),
    sa.Column('name', sa.String(50), nullable=False),
    sa.Column('created', sa.DateTime, server_default=func.now(), nullable=False),
    sa.Column('created_by', sa.String(50), nullable=False),
    sa.Column('last_updated', sa.DateTime, nullable=False),
    sa.Column('last_updated_by', sa.String(50), nullable=False)
) 
```

现在关于如何获取PK id：

`op.execute`并且`op.bulk_insert`不会返回任何结果。但是您可以获得用于这些操作的相同连接。

完成后`bulk_insert`，`execute(table.update ...)`您可以在相同的上下文中运行选择查询并检索感兴趣记录的 PK id：

```
connection = op.get_bind()
r = connection.execute(srv_feed_return_type.select().where(...))
for row in r:
    pk_id = r['id']
    """or something more sophisticated""" 
```

您需要在 where 子句中指定适当的过滤器，以确保您以独特的方式识别了您最近更改的记录。

这是[一些类似功能的示例](https://code.google.com/p/bungeni-portal/source/browse/bungeni.buildout/trunk/data/alembic/versions/2df675e61324_added_group_role_fie.py?spec=svn10645&r=10645)，但它具有硬编码的选择查询

# .net - 我可以写入 FileStream 然后从它读取而不在支持磁盘上等待吗？

> ID：15543621
> 
> 赞同：0
> 
> 时间：2013-03-21T09:26:43.313
> 
> 标签：.net, performance, caching, memory, filestream

我的应用程序对其服务器进行了许多快速的 Web 服务调用。每次调用它都会序列化一个作为参数传递给 Web 服务调用的对象。通常，该对象会序列化为非常小的东西……比如 5KB 或更少……在这种情况下，我宁愿序列化到 MemoryStream，然后从该 MemoryStream 发送字节。但有时该对象会序列化为相当大的东西……比如 50MB (50,000KB)……在这种情况下，序列化到 MemoryStream 会严重损害大对象堆……因此，最好将其序列化为 FileStream。

我突然想到，如果 FileStream 有足够大的缓冲区大小，那么我应该能够写入它，回到开头，然后从中读取，并且永远不会真正离开内存缓冲区......这样我的线程应该（理论上）执行与该缓冲区大小的内存大致相同的速度。真的？

（是的，我要进行一些测量……但我很容易错过表现不同的情况……或可能否定结果的相关问题……这里的集体智慧经常告诉我的事情。谢谢！ ！）

是否有可靠的高性能方法来获得文件支持的内存流，仅在文件需要变大时才使用文件？（我希望答案是“是的，只需使用 FileStream 并将缓冲区大小设置为您想要的内存流的大小。”）

# linq - NHibernate父/子关系中可为空外键的LINQ“等于”运算符

> ID：15543625
> 
> 赞同：1
> 
> 时间：2013-03-21T09:26:52.697
> 
> 标签：linq, nhibernate, hql, linq-to-nhibernate, notsupportedexception

### 的背景

我的模型如下所示：（为简单起见，编写字段而不是属性）

```
public class Entity {
    public long Id;
    public string Name;
    public Entity Parent;
} 
```

基本 FNH 映射

```
 Map(x => x.Name)
            .Not.Nullable()
            .UniqueKey("Child");

        References(x => x.Parent)
            .Cascade.None()
            .UniqueKey("Child"); 
```

SQL

```
create table `Entity` (Id BIGINT not null, Name VARCHAR(255) not null, Parent_id BIGINT, primary key (Id),unique (Name, Parent_id)) 
```

这很好。我不希望同一实体的子代之间存在共性（因此不同父代的两个实体可能具有相同的名称）。顺便说一句，请记住这`Parent_id`是可以为**空的**

### 我需要做什么

我想在将新实体插入数据库之前执行检查。我不想捕获异常，而是想触发一个查询（但我认为它会降低性能......）以检查是否存在具有相同名称和 newcoming 父级的实体，以便抛出一个体面的异常。尽管有性能，但它仍然是学习有关 LINQ 提供程序的新知识的机会

在普通的旧 SQL 中，我会做

```
SELECT Id FROM entity WHERE Name = ? AND Parent_id = ? 
```

这正确地支持 NULL id

### 我尝试了什么（但失败了，否则我不会在这里）

```
var exInput = (from Entity entity in entityRepository.Query()
    where entity.Name.ToLowerInvariant() == _newEntity.Name.ToLowerInvariant()
        && entity.Parent.Equals(_newEntity.Parent)
    select new { ParentName = entity.Parent != null ? entity.Parent.Name : null }).FirstOrDefault(); 
```

我认为 NHibernate 可以足够聪明地接受 null 值`_newEntity.Parent`，也可以足够聪明地读取`entity.Parent.Equals`为表达式而不是方法调用（在 null 的情况下失败）。

无论如何这不是问题

### 错误

```
System.NotSupportedException: Boolean Equals(System.Object) 
```

我知道 NHibernate LINQ 不是完整的 LINQ 提供程序，也不支持实体框架支持的所有方法。所以我可以期待。显然，我**可以**通过首先按名称选择实体然后检查父母双方是否为空或他们是否`Equals()`（我重载`Equals`以检查 Id）来解决

### 问题

鉴于我希望 NHibernate 生成尽可能接近上述`WHERE`子句的 SQL，我该怎么办？是否有不同的 LINQ 语法可供使用，或者我应该扩展 LINQ 提供程序吗？

我正在考虑扩展 LINQ 提供程序，为此我找到了一些文档。我认为，如果比较的操作数具有相同的身份，我们可以简单地匹配它们的 ID（并且如果其中一个实体是在 HQL 中`null`生成`NULL`身份）。在这种情况下，有没有人尝试共享一个实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T09:56:06.197

不要`Equals`在查询中使用，只需使用`entity.Parent == _newEntity.Parent`.

您的 Linq 查询还与您想要获取的 SQL 有一些额外的差异。为什么不简单地使用以下查询？

```
var result = (from Entity entity in entityRepository.Query()
              where entity.Name == _newEntity.Name && entity.Parent == _newEntity.Parent
              select entity.Id).ToArray(); 
```

# android - Amazon IAP - 未调用 PurchaseObserver 回调（onSdkAvailable 除外）

> ID：15543630
> 
> 赞同：3
> 
> 时间：2013-03-21T09:27:03.703
> 
> 标签：android, amazon, billing, in-app-purchase

我使用 ButtonClicker 示例作为基本框架将我们的游戏连接到亚马逊商店。我正在尝试实现店面，因此在`onItemDataResponse`回调中构建可购买项目的目录。但这`onGetUserIdResponse`永远不会被调用。但是 sdk 测试器正在记录成功的项目数据响应广播和用户 ID 响应广播并记录 amazon.sdktester.json 的内容。请注意`onSdkAvailable`正在调用....有其他人经历过吗？如果是这样，你是如何绕过它的？任何帮助或建议都会很棒。谢谢克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-03T13:02:31.117

I just had the same problem you described. ( I was getting no callback in from the purchasing manager )

In my manifest i had:

```
 <receiver android:name = "com.amazon.inapp.purchasing.ResponseReceiver" 
           android:exported="false"  >

        <intent-filter>
            <action android:name = "com.amazon.inapp.purchasing.NOTIFY" android:permission = "com.amazon.inapp.purchasing.Permission.NOTIFY"  />
        </intent-filter>

  </receiver> 
```

Removing the android:exported="false" attribute resolved the problem for me. Originally I had added the android:exported="false" attribute because it removes the warning "exported receiver requires no permission"

Now my manifest looks like this and in app purchasing can be properly tested using the sdk tester:

```
<receiver android:name = "com.amazon.inapp.purchasing.ResponseReceiver"  >

            <intent-filter>
                <action android:name = "com.amazon.inapp.purchasing.NOTIFY" android:permission = "com.amazon.inapp.purchasing.Permission.NOTIFY"  />
            </intent-filter>

      </receiver> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-23T04:01:40.747

首先，如果您正在测试，请确保已安装 SDK Tester 应用程序并且您已将`amazon.sdktester.json`文件上传到`/mnt/sdcard/`您的设备或模拟器上（如此[处](https://developer.amazon.com/sdk/in-app-purchasing/documentation/testing-iap.html)所述）。

`onSdkAvailable`调用回调不需要任何 IPC，因此它并不表示您正在与客户端或测试程序应用程序进行通信。

另外，请确保您已在清单中声明了接收方。来自[亚马逊文档](https://developer.amazon.com/sdk/in-app-purchasing/documentation/developer-guide.html#IAP%20API)：

```
<receiver android:name="com.amazon.inapp.purchasing.ResponseReceiver" >
  <intent-filter>
    <action android:name="com.amazon.inapp.purchasing.NOTIFY"
            android:permission="com.amazon.inapp.purchasing.Permission.NOTIFY" />
  </intent-filter>
</receiver> 
```

（附带说明，标签`android:permission`上的属性`<action>`没有做任何事情。但是，如果您将其移动到`<receiver>`它所属的标签，您将再次不会收到广播 - 至少来自 SDK Tester 应用程序，并且可能来自IAP 客户端也是如此。您可以按照文档的建议保留它，或者直接删除该`android:permission`属性；请参阅[此线程](https://forums.developer.amazon.com/forums/thread.jspa?messageID=5456)。）

# ruby-on-rails - 以有效的方式从数组中拒绝元素

> ID：15543631
> 
> 赞同：1
> 
> 时间：2013-03-21T09:27:04.663
> 
> 标签：ruby-on-rails, arrays

我的数组是

```
 arr = ["wow what", "what anice", "anice day.currently", "day.currently i", "i am", "am in", "in delhi", "delhi but", "but in", "in night", "night i", "i am", "am going", "going to", "to us"]
    arr.each do |el|
     if !el.match('in') && !el.match('is').blank?
      fresh_arr << el
     end 
```

但是我有 110k 元素数组，它给了 8 秒时间，我可以用其他任何方式来做这件事吗

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T09:29:19.033

尝试这个

```
arr.reject { |i| i.match('in') || i.match('is').blank? } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T09:29:14.650

利用`delete_if`

```
arr.delete_if do |e|
  e.match('in') && e.match('is').blank?
end
arr 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T12:21:10.357

您可以通过执行此操作来选择所需的所有元素

```
arr.select{|el| !el.match('in') && !el.match('is').blank?} 
```

# magento - 如何让管理员无法在 Magento 中删除产品？

> ID：15543634
> 
> 赞同：2
> 
> 时间：2013-03-21T09:27:10.253
> 
> 标签：magento, roles

正如标题所说，我不想让管理员无法删除产品，但他可以添加或更新产品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:12:38.287

创建一个覆盖 Mage_Adminhtml_Block_Catalog_Product_Edit 并使用 ACL 的自定义模块。然后创建一个自定义角色并将这些用户分配给它

见/app/code/core/Mage/Adminhtml/Block/Catalog/Product/Edit.php

```
protected function _prepareLayout()
{
  .....
  if ($this->getProduct()->isDeleteable() && <acl>) {
      $this->setChild('delete_button',
      $this->getLayout()->createBlock('adminhtml/widget_button')
            ->setData(array(
                'label'     => Mage::helper('catalog')->__('Delete'),
                'onclick'   => 'confirmSetLocation(\''.Mage::helper('catalog')->__('Are you sure?').'\', \''.$this->getDeleteUrl().'\')',
                'class'  => 'delete'
            ))
    );
} 
```

看看@http [://www.atwix.com/magento/view-product-button/](http://www.atwix.com/magento/view-product-button/)

# php - 取决于 json 响应来获取输入

> ID：15543637
> 
> 赞同：-1
> 
> 时间：2013-03-21T09:27:22.290
> 
> 标签：php, html, json, forms

我会得到一个json格式的服务器响应，下面是这样的json响应，有很多组织，其中只有一个组织是默认组织，所以每次组织变化时都有机会获得更大的json ，对应于组织，在我的 html 表单中有一个位置表单字段，我必须从其中的许多位置中选择一个位置，在选择位置时，还有另一个名为 building 的表单字段在选择一个时会有很多值，会有另一个网络服务

```
[{"location":[{"building":["Default Building"],"name":"Default Location"}],"name":"Default Organization"}] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T09:35:52.990

我已经尝试过了，在这个我应该调用一个Web服务，它将发送一个包含组织名称的json响应，在选择组织名称后，一些组织可以有多个位置，所以只有对应的位置选定的组织必须显示在位置下拉框中，然后有一个称为建筑物的选项，其中某个位置可以有多个建筑物，因此只有选定位置的建筑物必须显示在建筑物组合框中。

这是我完成的代码

```
<head>
    <title>PROFILE INFORMATION OF USER</title>
    <link rel="stylesheet" href="style.css" type="text/css"/>  
</head>
<body>
<div id="contact"><?php
session_start();
$url='my web service';
    $ch=curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($useridofuser));
    curl_setopt($ch, CURLOPT_HTTPHEADER, array("Content-Type: application/json"));
    $response=  curl_exec($ch);
   // echo('\n'."Server response : \n \n".$response);
    curl_close($ch);
    //parsing the json response from server
    $jsonde="$response";
 $org = array();
$loc = array();
$bui = array();
$items = json_decode($response);
foreach( $items as $each ){
$loc[]=$each->location[0]->name;
$bui[]=$each->location[0]->building[0];
$org[]=$each->name;
}
?>
<select name="category_id">
<option value=""></option>
<?php
foreach($org as $key=>$val)
{?>
<option value="<?php echo $key; ?>"><?php 
echo $_SESSION['organisation'];
?></option>

 <?php
 }
 ?>
</select>
<select name="category_id">
<option value=""></option>
<?php
foreach($loc as $key=>$val)
{?>
<option value="<?php //echo $key; ?>"><?php echo $val; ?></option>
<?php
}
?>
</select>
<select name="category_id">
<option value=""></option>
<?php
foreach($bui as $key=>$val)
{?>
<option value="<?php //echo $key; ?>"><?php echo $val; ?></option>
<?php
}
?>
</select>
</body>
</html> 
```

# php - mysql 在开始和/或结束时不断删除零

> ID：15543638
> 
> 赞同：1
> 
> 时间：2013-03-21T09:27:22.343
> 
> 标签：php, mysql

我有一个简单的表格，用户输入一个数字（产品价格），很多时候它以零（1.50）结尾。但 MYSQL 不断删除最后的零，使它们成为 1.5 而不是 1.50。

我在表中使用字段类型 double，php 代码是一个简单的表单，带有 1 个文本框，用于将数字传递给数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:31:30.203

数值*没有*前导零或尾随零。`1.5`是与 相同的值`1.50`与 相同的值`1.5000000000`。数字类型不保存格式，它们保存*value*。如果需要，请在输出上格式化值，如果需要保存文字值，请使用*文本*类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:38:07.247

您可以将 1.5 存储在数据库中，但如果您想将其显示为 1.5000000，那么它是可能的。您可以像这样使用 LPAD 来执行此操作。Lpad 用于在左侧添加零，Rpad 用于在右侧添加零。

```
 SELECT LPAD( '1.5', '10', '0' )
 SELECT RPAD( '1.5', '10', '0' ) 
```

如果有效请回复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T09:31:36.370

DCoder 应该发布评论作为答案。
您需要使用 DECIMAL 来表示价格，然后您将有尾随零。
而且您应该始终格式化输出。

# javascript - 如何设置 Angular JS $resource 路径（我在这里得到 404）

> ID：15543647
> 
> 赞同：1
> 
> 时间：2013-03-21T09:27:54.143
> 
> 标签：javascript, node.js, angularjs

我是 AngularJS 的菜鸟，并尝试设置一个简单的 web 应用程序来测试框架是否满足我们的需求。我已阅读 API 参考并完成了[教程](http://docs.angularjs.org/tutorial/step_11)。不幸的是，在 $resource 上设置和处理路径和位置的方式并没有很好地解释。

我面临的问题是，当我按照教程中的描述为 $resource 提供相对路径时，我总是得到 404。

这是我的设置：

我已经克隆了[AngularJS 电话猫应用程序](https://github.com/angular/angular-phonecat)并扔掉了他们的电话东西，但利用他们的结构引入了我自己的逻辑。我的 index.html 如下所示：

```
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>testapp</title>
  <link rel="stylesheet" href="css/bootstrap.css">
  <script src="lib/angular/angular.js"></script>
  <script src="lib/angular/angular-resource.js"></script>
  <script src="js/app.js"></script>
  <script src="js/controllers.js"></script>
  <script src="js/filters.js"></script>
  <script src="js/services.js"></script>
</head>
<body ng-app="testapp">
    <div class="navbar">
        <div class="navbar-inner">
            <a class="brand" href="#">Testapp using AngularJS</a>
        </div>
    </div>

    <div ng-view></div>

</body> 
```

第一个问题是 AngularJS 似乎没有就如何对 RESTful API 进行 oauth 提供任何建议，而且他们的教程只给出了服务器提供硬编码 JSON 的“梦想场景”，所以我侵入了他们的网络服务器.js 以便让 node.js 服务器处理 API 调用并返回结果 JSON。对于 oauth，我成功地做到了，但对于进一步的 API 调用，它不起作用。

这是我的黑客：

```
StaticServlet.prototype.handleRequest = function(req, res) {
  var self = this;
  var path = ('./' + req.url.pathname).replace('//','/').replace(/%(..)/g, function(match, hex){
    return String.fromCharCode(parseInt(hex, 16));
  });
  var parts = path.split('/');
  if (parts[parts.length-1].charAt(0) === '.')
    return self.sendForbidden_(req, res, path);

  /* Hack for RESTful API calls. */
    var post = '';
    var query = qs.parse(req.url);

    if (req.method === 'POST') {
        var body = '';
        req.on('data', function(data) {
            body += data;
        });
        req.on('end', function () {
            post = JSON.parse(body);
            console.log(post);
            // method name is part of the parameters
            // apiRequests is the module handling the API requests
            apiRequests[post.method](post, res);
        });
    } else if (query.api === 'api') {
        var query = qs.parse(queryString);
        // method name is part of the parameters
        // apiRequests is the module handling the API requests
        apiRequests[query.method](queryString, res);
    } else {
            fs.stat(path, function(err, stat) {
            if (err)
              return self.sendMissing_(req, res, path);
            if (stat.isDirectory())
              return self.sendDirectory_(req, res, path);
            return self.sendFile_(req, res, path);
        });
    }
} 
```

这真的只是一个丑陋的黑客，但无论如何。登录 POST 请求委托给 oauth 调用，api GET 请求委托给适当的 api 请求方法，其余的处理方式与 web-server.js 之前的处理方式相同。

问题是，handleRequest 方法永远不会被调用。

这是我拨打电话的客户端服务代码：

```
return {
        fetchCommunications : function ($scope) {
            var parameters = {
                'api': 'api',
                'method': 'communications',
                'bearer':userData["access_token"],
                'chiffre':userData["chiffre"]
            }
            var resource = {
                r : $resource('communications', {}, {
                    query: {method:'GET', params:parameters}
                })
            }
            var d = resource.r.query();
            console.log("Communications: " + d);
            return d;
} 
```

这是来自服务器控制台的错误消息：

```
GET /app/communications?api=api&bearer=d6a348ea-0fe5-46fb-9b5e-13d3343c368d&chiffre=0000006F&method=communications Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_3) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.172 Safari/537.22
404 Not Found: /app/communications 
```

这正是我期望被调用的路径 - 但为什么是 404？

我可以通过像这样配置 $resource 来避免 404：

```
var resource = {
    r : $resource('index.html#/communications', {}, {
    query: {method:'GET', params:parameters}
}) 
```

这也不起作用，因为哈希之后的所有内容都从路径中省略了。此外，为什么我需要在路径中有 index.html ？

我觉得我在这里遗漏了一些非常明显的东西，因此正在做一些非常愚蠢的事情。有任何想法的人吗？是不是和node.js的配置有关（以前没遇到过这个问题）？

提前谢谢了！

# java - 使用 Hibernate 将浮点值插入 Mysql

> ID：15543649
> 
> 赞同：0
> 
> 时间：2013-03-21T09:27:56.263
> 
> 标签：java, mysql, database, hibernate

我正在尝试将浮点值保存到我的 MySql 数据库中。但是，在没有错误地执行以下代码后，该行不会插入到数据库中。我猜这是因为我的浮点值包含一个“f”。

关于如何克服这个问题的任何想法？

谢谢！

```
UserBean tailbean = new UserBean();

tailbean.setImei(555555559999f);
tailbean.setName("Rao");
tailbean.setPassword("hhh");
session = getSession();
session.beginTransaction();
session.save(tailbean);
session.getTransaction().commit();
session.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:34:40.663

您正在构造一个正确的java浮点数，它的值不包括`f`， f 主要是为了让编译器首先意识到这是一个浮点数，但从那时起它被视为正确的浮点数。

也许这个数字对于 a 来说太大了`float`：它有 32 位，您输入的数字不适合这个范围。

也许你需要使用`double`和后缀`d`？

# java - 在 Java 中读取具有 3 列的写字板文件

> ID：15543656
> 
> 赞同：-3
> 
> 时间：2013-03-21T09:28:17.953
> 
> 标签：java

我想读取一个包含空格分隔值的文本文件。值是整数。我该如何阅读它？我想阅读每一行，然后转到下一个。

内容如示例：

> “2012 年 12 月 11 日” “00.00.01” 0,100
> 
> “2012 年 12 月 11 日” “00.00.05” 0,140
> 
> “2012 年 12 月 11 日” “00.00.09” 0,240
> 
> “2012 年 12 月 11 日” “00.00.13” 0,247

第一列是日期，第二列是第二列，第三列是升。

我怎样才能用 Java 程序做到这一点？

我想使用 Scanner 类。我做了这个程序：

```
import java.io.File;
import java.io.FileNotFoundException;
import java.util.Scanner;

public class ScannerExample {

    public static void main(String args[]) throws FileNotFoundException {

        File text = new File("C:\Users\Desktop\test\test.txt");

        Scanner scnr = new Scanner(text);

        int lineNumber = 1;
        while(scnr.hasNextLine()){
            String line = scnr.nextLine();
            System.out.println("line " + lineNumber + " :" + line);
            lineNumber++;
        }       

    }   

} 
```

但我没有我想要的结果。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:35:24.920

这看起来像一个 CSV 文件。您可以使用[CSV 工具](https://stackoverflow.com/questions/2053761/what-is-a-good-csv-java-utility)来阅读它。

我知道 CSV 表示“逗号分隔值”，您的文件没有逗号，但 CSV 工具也可以读取以空格分隔的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:35:53.890

这也可以通过简单的谷歌搜索来完成。首先你会找到这样的代码：

```
import java.io.*;

class FileRead 
{
 public static void main(String args[])
  {
  try{
  // Open the file that is the first 
  // command line parameter
  FileInputStream fstream = new FileInputStream("textfile.txt");
  // Use DataInputStream to read binary NOT text.
  BufferedReader br = new BufferedReader(new InputStreamReader(fstream));
  String strLine;
  //Read File Line By Line
  while ((strLine = br.readLine()) != null)   {
  // Print the content on the console
  System.out.println (strLine);
  }
  //Close the input stream
  in.close();
    }catch (Exception e){//Catch exception if any
  System.err.println("Error: " + e.getMessage());
  }
  }
} 
```

用一些代码替换 System.out.println 以获取从“到”的所有内容，例如：

```
while ((strLine = br.readLine()) != null)   {

        int start = 1, pos = 0,lastpos= 1;
        String dates, times, values;

        if(strLine.indexOf("\"",lastpos) > 0){
            pos = strLine.indexOf("\"",lastpos);
            dates = strLine.substring(start,pos);
            lastpos = pos+3;//replace through search for \"

            pos = strLine.indexOf("\"",lastpos);
            times = strLine.substring(lastpos,pos);
            lastpos = pos+2;//replace through search for \"

            values = strLine.substring(lastpos,strLine.length());

            System.out.println(dates);//Convert to Date
            System.out.println(times);//Convert to time
            System.out.println(values);//Convert to Integer.valueOf/)

            System.out.println("next line");
        }

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T09:45:32.400

Java 中最简单的方法是使用 Apache Commons Libraries。只需在您的 pom 文件中添加以下依赖项（如果您使用的是 maven）

```
<dependency>
<groupId>org.apache.commons</groupId>
<artifactId>commons-io</artifactId>
<version>1.3.2</version>
</dependency> 
```

然后你可以做

```
File file = new File("yourFile.txt");
List<String> lines = FileUtils.readLines(file); 
```

您将在列表中获得文件的每一行。然后获取文件的内容：

```
for(String line : lines){
    String[] columns = line.split(" ") //because your columns seem to be separated by a white space
} 
```

数组列将包含您的数据

```
DateFormat format = new SimpleDateFormat("dd/mm/yyyy");
//column 1
Date date = format.format(column[0]);
//column 2
//I'm not sure to get your second column, is it just second or can it be more?
//column 3
double litres = Double.parseDouble(column[2]); 
```

# javascript - 将 jQuery 引用传递给回调或插件的标准方法

> ID：15543660
> 
> 赞同：4
> 
> 时间：2013-03-21T09:28:24.213
> 
> 标签：javascript, scope, jquery-callback

传递缓存的 jQuery 引用的推荐方法是什么，例如`$domContainer`，`var $domContainer = $('#container');`如果函数是在之前和之外定义的，则作为回调传入函数`$(document).ready()`？

例子：

```
<script src="/plugins.js"></script> 
```

在这个可重用函数的外部文件中

```
function rowAction ( event ) { // how do I get context here?

  // how can I access $domTable and $domFilters
  // I can access $(event.target) and traverse the dom
  // back to $domTable, but $domTable is not defined
  // in the external file, although a reference is cached
  // in the local scope of $(document).ready();
  // likewise, $domTable could be accessed through event.delegateTarget
  // however, how can I pass $domFilters, and other vars?

} 
```

在主脚本中

```
<script src="/scripts.js"></script> 
```

标准文件准备好了

```
$(document).ready(function(){

    // Cached References
    var $domFilters = $('#form .filter'), // more than 1 reference returned
        $domTable   = $('#results');      // 1 reference returned

    $domTable.on('click','.menu',rowAction);// reference function in plugins.js
    // how do I pass $domFilters to rowAction to avoid dom lookups?
    // I could pass $domFilters to a plugin like $(...).plugin({f:$domFilters});
    // if it had optional arguments, but if it's not a plugin, what's the
    // equivalent way to do it?
}); 
```

解决这个问题的方法是使用内联函数来包装回调函数名称吗？

任何指向标准实践的指针也将受到欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:32:44.130

如果您希望访问 $domTable，您可以使用事件对象的[event.delegateTarget](http://api.jquery.com/event.delegateTarget/)属性，而无需遍历 dom。不过，您必须将其包装在 jQuery 对象中。

**编辑**

将上下文和额外属性传递给外部函数的标准方法是使用[call()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)或[apply()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply) jQuery 有它自己的该行为的包装器，也称为[proxy()](http://api.jquery.com/jQuery.proxy/)

在您的示例中`$domTable`，上下文已经作为选择器的目标传递，因此您可以使用所需的一切。

在您的`$domFilters`示例中，没有事件对象作为上下文传递，因为事件被映射到 dom 中的实际事件，并且您所拥有的只是一个集合，因此您无法使用该函数，因为它依赖于事件对象。

如果我在传递上下文时从集合中调用另一个函数，我会使用这样的东西。

```
$domFilters = $('#form .filter');
$domFilters.each(function(){

    // Call the external function passing the jQuery wrapped item
    // as the context.
    externalFunction.call($(this));

});

// Your external function
function externalFunction(){

// 'this' would now refer to the context passed in call.
// i.e your $(.filter) item.

} 
```

您的实用程序函数必须设计为能够处理作为上下文传递给它的任何内容以及任何其他参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:42:31.243

您可以通过定义命名空间来遵循模块化方法。然后你就不必使用准备好了。

```
//These four will be open
var objects, handlers, bindings,
NameSpace = {

    //This is where you cache references
    objects: {
        domcontainer: $('.domcontainer')
    },

    //Do the events to handlers bindings
    bindings: function(){
        domcontainer.on('click', handlers.clickCallback)
    }

    //The actual handlers
    handlers: {
        clickCallback: function(e){
            //Do something
        }
    },

    //Initial things
    init: function(){
        objects = this.objects;
        handlers = this.handlers;

        //This will start the handler binding.
        this.bindings();
    }
};

$(function () {
NameSpace.init();  
}); 
```

如果您正在动态添加对象，则可以在对象内部添加引用作为返回实际对象引用的函数。每当您需要引用一个对象时，它已经可用，因此避免了 DOM 查找。

# javascript - 在运行时解析 javascript 代码时避免循环

> ID：15543663
> 
> 赞同：0
> 
> 时间：2013-03-21T09:28:37.093
> 
> 标签：javascript, parsing, loops, eval

我实现了一个内置在网页中的 javascript 解析器。用户可以将 javascript 代码放在文本区域中，例如：

```
var i = 0;
i++;
var y = i * 10;
document.write(y); 
```

被解析以生成一些输出（例如，document.write 流等）。

生成textarea*更改*事件时调用函数*parse 。*

 *```
function parse(text) {
    try {
        ....
        eval(text);
    } catch (e) {
        ....
        return {
            status : false, output : ..., ... : ...
        };
    }
    return {
        status : true, output : ...., ... : ...
    };
} 
```

`for(var i=0; i<10; )`一切正常，但是当用户在文本区域（例如, ）中编写循环时我遇到问题，`while(true)`因为应用程序进入循环。

为了避免这个问题，我会问大家一些关于这个问题的问题/解决方案：

1.  是否有一些 javascript 库或函数允许 `eval`使用 javascript 代码但没有循环？
2.  我可以要求在固定时间执行我的解析函数吗？在这段时间之后，我会生成一个停止 eval 函数的异常。
3.  在调用之前，`eval(text)`我可以调用一个`checkIfThereAreLoops`函数来分析文本，寻找类似`for(var i=0; i<10; )`or的模式`while(true)`。这是一个好的解决方案吗？我可以使用正则表达式来寻找这些模式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:42:12.497

如果您试图查看任意代码是否会终止，那么您将在一段时间内遇到[Halting Problem](http://en.wikipedia.org/wiki/Halting_problem) is [NP-Hard](http://en.wikipedia.org/wiki/NP-hard)。

因此，您认为您需要对解析函数采取预防措施以超时或消除不安全输入是正确的。

我不知道在`eval`没有浏览器施加“此脚本运行时间过长”限制的情况下中断的方法，因此您需要清理输入并且不使用循环评估任何内容：这将很棘手，因为您不能只需搜索诸如`for, while`etc 之类的结构并避免递归函数调用。

这是一个很难解决的问题...

一个“hacky”解决方案可能是将一个*唯一的*变量声明插入到输入代码的顶部（当然是隐藏的），并从输入代码中每隔一行递增这个变量（同样，隐藏这些插入并允许语法结构成为坏了。还要在每个增量处插入完整性检查`if unique_var > 99999 exit;`（其中 99999 是您施加的一些限制）。

这至少应该停止无限循环。*

# css - sass如何实例化一个由@if设置的空变量

> ID：15543668
> 
> 赞同：0
> 
> 时间：2013-03-21T09:28:57.460
> 
> 标签：css, variables, if-statement, sass, instantiation

我认为代码不言自明，所以这就是我所拥有的：

```
@mixin btnNoBackgr30($divName, $iconName, $xtypeYesOrNo ){
$xtypeBtn:nil;
@if xtypeYesOrNo == 'yes'{
     $xtypeBtn:x-button-#{$divName};
  }
@if xtypeYesOrNo == 'no'{
   $xtypeBtn:#{$divName};
}

.#{$xtypeBtn}{
    properties:values;
} 
```

我在css中得到的只是这个

```
.nil{
    properties:values;
} 
```

如何在@if 之外实例化变量？如果我在@if ofc 内执行此操作，则不会像正常编程那样在范围之外检测到它并标记为“未定义”

请帮忙。false 做同样的事情， Null 给我错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:42:45.647

给 $xtypeBtn 一些随机的默认值，因为它无论如何都会被重置？如果 $xtypeYesOrNo 可以未定义，是否也给它一个默认值？

```
@mixin btnNoBackgr30($divName, $iconName, $xtypeYesOrNo:default) {

  $xtypeBtn:default;

  @if $xtypeYesOrNo != default {
    // do whatever
  }

  @if xtypeYesOrNo == yes {
    $xtypeBtn: x-button-#{$divName};
  }

  @if xtypeYesOrNo == no {
    $xtypeBtn: #{$divName};
  }

  .#{$xtypeBtn} {
    properties: values;
  }

} 
```

# forms - 介于... 和... 没有价值观的工作

> ID：15543671
> 
> 赞同：1
> 
> 时间：2013-03-21T09:29:01.857
> 
> 标签：forms, ms-access, wildcard, between

我试图以一百万种不同的方式做到这一点。起初我根本无法让它工作，但现在如果我输入值，我已经设法让它工作。我需要做的是让我的查询根据我在表单中输入的内容过滤我的记录。

我在我的 MovieYear 列的“标准”部分中使用了此代码，当我在表单中的 MovieYear1 和 MovieYear2 文本框中输入数字时，它会正确过滤。

```
Between [Forms]![SearchForm]![MovieYear1] And [Forms]![SearchForm]![MovieYear2] 
```

但如果我不输入任何值，它根本不会提供任何记录。有什么帮助吗？我已经尝试了几乎所有的东西（好吧，至少我认为我有）。我试过使用通配符“*”，但后来我发现你实际上不能在函数之间使用它们......

我也尝试过在 VBA 中做 Me.Filter，但它似乎没有用。也许我只是错过了什么？

这是我的[表格](http://i.imgur.com/Ci14n0S.png?1)。

提前致谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:06:22.943

例如，您可以将表单中的 Null 检查添加到查询中

```
SELECT *
FROM table
WHERE Between [Forms]![SearchForm]![MovieYear1] 
      And [Forms]![SearchForm]![MovieYear2]
      OR [Forms]![SearchForm]![MovieYear1] Is Null 
```

如果第一年为空，这将返回所有记录。第二年将被忽略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:37:32.017

您可以使用`conditional`查询构建器，在检查框的值后，您可以根据以下情况构建查询：

1.  如果只`MovieYear1`给出，那么之后所有年份的数据`MovieYear1`都是`date>MovieYear1`.
2.  如果只`MovieYear2`给出，那么之后所有年份的数据`MovieYear2`都是`date<MovieYear2`.
3.  如果两者都给出，则使用`between clause`获取数据。

这可以通过`CASE WHEN`以下方式实现

```
CASE WHEN MovieYear2 IS NULL then date>MovieYear1
else when MovieYear1 IS NULL then date<MovieYear2
else date between MovieYear1  and MovieYear2 
```

# asp.net - asp.net 取消发布

> ID：15543674
> 
> 赞同：0
> 
> 时间：2013-03-21T09:29:08.987
> 
> 标签：asp.net

在服务器上托管该文件夹后，我将我的 Web 应用程序发布到了一个文件夹，但我的项目代码已损坏。现在我将从发布文件夹重新发布（取消发布）我的应用程序。我会看到我的 aspx 页面的 .cs 代码。我怎么能看到

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:47:04.933

您没有选择取消发布您的代码。当您在发布之前处理项目时，您必须获取项目的副本。在发布您的代码时将转换为 dll。无法从 dll 中恢复您的代码。

# numpy - AttributeError：“numpy.ndarray”对象没有属性“_hold”

> ID：15543681
> 
> 赞同：4
> 
> 时间：2013-03-21T09:29:20.413
> 
> 标签：numpy, python-3.x, matplotlib

我在 Python3 中使用 numpy 和 matplotlib。
以下代码导致错误：

```
import matplotlib
from matplotlib.backends.backend_qt4agg import FigureCanvasQTAgg as FigureCanvas
from matplotlib.figure import Figure
from matplotlib.axes import Subplot as plt
from matplotlib import pylab

 a=[1,1]
 b=[1,1]
 fsam = 48000         
 w, h = freqz(b, a, worN=2000)
 plt.plot(((fsam-8000) * 0.5 / np.pi) * w, abs(h), label=" ") 
```

matplotlib 1.3.x 的实际错误：

```
 File "/usr/local/lib/python3.2/dist-packages/matplotlib-1.3.x-py3.2-linux-x86_64.egg/matplotlib/axes.py", line 4119, in plot   
     if not self._hold:   
AttributeError: 'numpy.ndarray' object has no attribute '_hold' 
```

matplotlib 1.2.0 的实际错误：

```
 Traceback (most recent call last):   
   File "/home/christoph/audio_measurement/AudioTools/AudioTools.py", line 222, in <module>   
       main()   
     File "/home/christoph/audio_measurement/AudioTools/AudioTools.py", line 216, in main   
       form = AppForm()   
     File "/home/christoph/audio_measurement/AudioTools/AudioTools.py", line 39, in __init__   
       self.on_draw()   
     File "/home/christoph/audio_measurement/AudioTools/AudioTools.py", line 80, in on_draw   
       self.transfer = Transfer(self.canvas)   
     File "/home/christoph/audio_measurement/AudioTools/Transfer.py", line 42, in __init__   
       plt.plot(((fsam-8000) * 0.5 / np.pi) * w, abs(h), label=" ")   
     File "/usr/local/lib/python3.2/dist-packages/matplotlib/axes.py", line 3995, in plot   
       if not self._hold: self.cla()   
AttributeError: 'numpy.ndarray' object has no attribute '_hold' 
```

Transfer 是在画布上绘制的类。

我查看了系数 a 和 b 的长度，但它们并没有影响结果。
我找不到任何东西。有谁知道出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T00:24:07.123

通常我会使用`import matplotlib.pyplot as plt`with `plt.plot`, `plt.subplot`,`plt.show`等——甚至只是`from pylab import *`. 反正这条线

```
from matplotlib.axes import Subplot as plt 
```

这就是你有一个`plot`试图对`ndarray`参数进行操作的未绑定函数的原因。`Subplot`需要实例化。这应该有效：

```
import numpy as np
from scipy.signal import freqz

import matplotlib
from matplotlib.backends.backend_qt4agg import FigureCanvasQTAgg as FigureCanvas
from matplotlib.figure import Figure
from matplotlib.axes import Subplot

fig = Figure()
ax = Subplot(fig, 111)
fig.add_subplot(ax)
canvas = FigureCanvas(fig)

a=[1,1]
b=[1,1]
fsam = 48000         
w, h = freqz(b, a, worN=2000)

ax.plot(((fsam-8000) * 0.5 / np.pi) * w, abs(h), label=" ")
canvas.show() 
```

# c - 如何使用文件描述符检查文件是否仍然存在

> ID：15543683
> 
> 赞同：5
> 
> 时间：2013-03-21T09:29:27.117
> 
> 标签：c, unix, freebsd, file-descriptor

我有一个文件描述符，它使用 open() 函数的结果设置为正值，所以这个 fd 表示一个文件。当我删除实际文件 fd 仍然是一个正整数。我想知道如果我出于某种原因删除了一个文件，我怎么知道这个文件描述符不再有效。简而言之，我怎么知道 fd 指示的文件是否仍然存在。我正在尝试在 FreeBSD 上的 C 中执行此操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T09:43:15.037

Unix 系统允许您删除打开的文件（或者更确切地说，从文件系统中删除对该文件的所有引用）。但文件描述符*仍然有效*。任何读取和写入调用都将成功，因为它们仍然存在文件名。

换句话说，在文件描述符关闭之前，您无法完全删除文件。关闭后，文件将自动删除。

使用有效的文件描述符，您可以检查文件名是否仍然存在，例如

```
printf("%d\n", buf.st_nlink);  // 0 means no filenames 
```

`buf`用`struct stat`初始化的位置在哪里`fstat`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T10:30:42.593

在写入文件之前，您可以使用检查它是否仍然存在`access()`

```
if (access("/yourfile",W_OK)!=-1) {
    //Write on the file
} 
```

您还可以对描述符执行 fstat：

```
struct stat statbuf;
fstat(fd,&statbuf);
if (statbuf.st_nlink > 0) {
    //File still exists
} 
```

但这会大大降低您的软件速度，并且某些程序可能会将文件链接到其他位置并取消链接原始名称，因此该文件仍然存在但使用不同的名称/位置，并且此方法不会检测到这一点。

更好的选择是`inotify`在 GNU/Linux 上使用，或者在 bsd 上使用 kqueue，但我从未使用过第二个。

您可以使用这些 API 来观察目录中的变化并从内核获取通知，并在您的文件被其他进程删除时获取事件，并对其进行处理。

请记住，此事件不是实时的，因此您仍然可以在获取事件之前使用该文件几毫秒。

# wpf - 测试 WPF MVVM 用户界面的最佳自动化测试方法

> ID：15543689
> 
> 赞同：0
> 
> 时间：2013-03-21T09:29:47.787
> 
> 标签：wpf, mvvm, user-interface, automated-tests

我想知道测试 C# WPF MVVM XBAP 应用程序的最佳自动化测试方法。我知道在视觉工作室中有一种叫做“编码 UI 测试”的方法。我的疑问： 1\. 是否建议使用“Coded UI”或者除了 Visual Studio 的 Coded UI 之外还有其他更好的开源测试工具吗？2.VS2010和VS2012“编码UI测试”有什么区别，我的意思是功能方面？

提前致谢。

# java - 你如何递归替换数组中字符串的出现

> ID：15543690
> 
> 赞同：0
> 
> 时间：2013-03-21T09:29:47.927
> 
> 标签：java, recursion, jexl

所以考虑一个有两个字符串变量“name”和“value”的类A

B 类包含一个变量，它是 A 的集合

```
Set<A> allVariables 
```

是一个看起来像这样的集合

```
A.name="$var1"
A.value = "x+10>2"

A.name="$var2"
A.value="11+y%10==0"

A.name="$var3"
A.value="$var1 && $var2" 
```

我需要做的是评估这些表达式。我为此使用 jexl。我需要遍历 Set 并用它们各自的值替换这些变量名。

在这种情况下，名称为 $var3 的对象需要替换为 "x+10>2 && 11+y%10==0"

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:42:32.757

您创建 2 个 Hashmap，`translated`并且`toTranslate`.

你解析你的集合。

对于你的 Set 中的每个 A，你都会看值。如果 value 包含任意数量的`$element`（以`$`符号开头），则`$element`在翻译的 Hashmap 键中查找它。

如果它在那里，你用`$element`你翻译的哈希图中找到的值替换出现的值。

`$element`您对在 A 对象中找到的每个不同都执行此操作。

如果所有`$element`内容都已翻译，则将对象 A 添加到`translated`哈希图中（键 = 名称，值 = 值）。

否则，您将其添加到您的`toTranslate`哈希图中。

解析完所有 Set 后，您将获得 2 个哈希图。

您创建一个while循环：当`toTranslate`hashmap不为空时，您获取每个值，并尝试`$element`通过`translate`hashmap中的值转换其中的值。

请注意，您可能会以无限循环结束。要做的一件好事是确保每次在`toTranslate`哈希图上循环时，其元素的数量都会减少。如果不是，您将处于无限循环中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:42:55.177

我认为它不需要递归。我认为这会起作用：

布尔型替换；

做：

bool madeReplacement = false

对于集合的每个成员，X：

对于集合中的每个其他成员，Y：

用 X.value 中的 Y.value 替换 Y.name 的所有实例。如果你替换了任何东西，madeReplacement = true。

而（做了替换）

* * *

例子：

$var1 是值 1

$var2 是价值 $var1

$var3 是价值 $var2 + 2

$var3.value 包含 $var2，将 $var2 替换为 $var1 -> $var1 + 2

$var2.value 包含 $var1，将 $var1 替换为 1 -> 1

$var3.value 包含 $var1，将 $var1 替换为 1 -> 1 + 2

没有值包含任何其他名称，执行完成。

* * *

即使我们“评估无序”，我们最终还是得到了正确的答案。然而，这个算法在最坏的情况下可能是 O(n^3)（想象一下，如果你有 n 个变量在一个长链中相互引用，并且你在错误的一端开始替换）。解决此问题的一种方法是，当您的 X.value 包含 Y.name 时，首先递归地评估 Y.value（通过执行相同的 loop-over-the-rest-of-the-set）。这使它成为 O(n^2) 最坏的情况，因此您怀疑递归方法是合适的可能是正确的；）

（我不确定变量名是否保证以 $ 开头，所以我写了它，所以没关系）

# c# - 购物车突然停止工作c#

> ID：15543692
> 
> 赞同：0
> 
> 时间：2013-03-21T09:29:57.600
> 
> 标签：c#, shopping-cart, web-hosting

## 购物车又下来了，是不是因为托管公司提供了新的临时网站功能？

我确实认为这是托管公司在环境中玩耍，购物车又开始工作了，我没有改变任何东西....

## 有没有好的可靠的 Windows 网络托管公司？

有人可以帮帮我吗？托管公司让我发疯。几天前我的网站和购物车运行良好，并且该网站在我的本地主机上运行良好，但我的购物车从昨天开始突然停止工作。我认为这是因为托管公司更改了一些设置，但他们否认了，并说这是我的代码的问题。这是我得到的错误：

> [A]ShoppingCart 不能转换为 [B]ShoppingCart。类型 A 源自 'App_Code.ej8etxbi, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null' 在位置 'C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP 的上下文'Default'中。 NET 文件\root\03050970\f5f76d45\App_Code.ej8etxbi.dll'。类型 B 源自 'App_Code.qoxkmirc, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null' 在位置 'C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP 的上下文 'Default' 中。 NET 文件\root\03050970\f5f76d45\App_Code.qoxkmirc.dll'。
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.InvalidCastException：[A]ShoppingCart 无法转换为 [B]ShoppingCart。类型 A 源自 'App_Code.ej8etxbi, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null' 在位置 'C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP 的上下文'Default'中。 NET 文件\root\03050970\f5f76d45\App_Code.ej8etxbi.dll'。类型 B 源自 'App_Code.qoxkmirc, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null' 在位置 'C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP 的上下文 'Default' 中。 NET 文件\root\03050970\f5f76d45\App_Code.qoxkmirc.dll'。

源错误：

```
{
// we are returning the shopping cart for the given user
return (ShoppingCart)HttpContext.Current.Session["ASPNETShoppingCart"];
}
} 
```

我的网站在不到一个月的时间里就宕机了 11 次，如果有人知道任何好的、可靠的 Windows 网络托管公司，如果你能告诉我，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:40:36.953

您是否在不同的程序集或 DLL 中有 ShoppingCart 类，或者如果您多次加载相同的程序集，那么每个副本也不会被视为相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:48:05.823

类型是每个程序集的，如果您两次加载“相同”程序集，则每个程序集中的类型不被视为相同类型。

因此，请确保您的所有项目都引用包含“ShoppingCart”的相同 dll。

PS 尝试清理“临时 ASP.NET 文件”文件夹并在确保对包含“ShoppingCart”的 dll 的所有引用都相同之后重新部署应用程序的事情。那时应该工作。

# javascript - 使用谷歌应用程序电子邮件ID的passportjs身份验证

> ID：15543695
> 
> 赞同：1
> 
> 时间：2013-03-21T09:30:08.077
> 
> 标签：javascript, node.js, express, passport.js

我正在尝试使用谷歌应用电子邮件 ID 的护照 js。我可以使用 gmail.com 电子邮件 ID 进行身份验证。但是，如果电子邮件 ID 是谷歌应用 ID (google.com/a/companyname.com)，我该如何进行身份验证。

这是我的代码

```
var express = require('express');
var app = express();
var passport = require('passport');
var GoogleStrategy = require('passport-google').Strategy;

passport.use(new GoogleStrategy({
    returnURL: 'http://10.3.0.52:3000/auth/google/return',
    realm: 'http://10.3.0.52:3000/'
},
function(identifier, profile, done) {
    User.findOrCreate({
        openId: identifier
    }, function(err, user) {
        done(err, user);
    });
}
));

app.get('/auth/google', passport.authenticate('google'));

app.get('/auth/google/return', 
    passport.authenticate('google', {
        successRedirect: '/',
        failureRedirect: '/login'
    }));

app.get('/', function(req, res){
    res.writeHead(200);

    res.end("connected");

});

app.listen(process.env.PORT || 3000); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:16:01.400

您的代码缺少一些重要部分：

```
...
passport.use(...); // this you have

// these are required as well.
app.use(passport.initialize());
app.use(passport.session());

// please read docs for the following two calls
passport.serializeUser(function(user, done) {
  done(null, user);
});

passport.deserializeUser(function(obj, done) {
  done(null, obj);
});
... 
```

有了这些，我就可以使用我的 Google App 地址登录了。

**编辑：**它只适用于节点 0.8，但节点 0.10 会出错。我认为`passport-google-oauth`无论如何使用是一个更好的解决方案。为此，您必须向 Google 注册您的应用程序（[此处](https://code.google.com/apis/console#access)）；注册后，您将获得可以使用的 GOOGLE_CLIENT_ID 和 GOOGLE_CLIENT_SECRET 代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T16:53:04.073

我创建了一种方法来验证电子邮件域是否是我要授权的域：

```
UserSchema.method('checkFordomain', function(value) {
    var parts = value.split('@');
    return (parts[1] == 'companyname.com');
}); 
```

这是我使用猫鼬模式模型放入用户模型的方法

```
if (!user.checkForMMdomain(profile.emails[0].value)) {
    return done();
} 
```

在护照谷歌策略的回调中 [https://github.com/jaredhanson/passport-google-oauth](https://github.com/jaredhanson/passport-google-oauth)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-16T01:04:59.520

在您的`passport.use`回调中，您可以根据主电子邮件地址的域（或您正在检查的任何内容）执行额外的检查：

```
if (profile.emails[0].split('@')[1] !== authorizedDomain) {
    return done(null, false);
} 
```

# c - 读取 C 中的字符串，直到遇到整数（在文件中）

> ID：15543697
> 
> 赞同：-1
> 
> 时间：2013-03-21T09:30:10.507
> 
> 标签：c

在遇到整数之前，如何读取 C 中的字符串？例如：1000 圆珠笔 12 15 24 我需要将“圆珠笔”与整数分开。它是如何完成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:33:43.020

*我*这样做的方式可能是用来[`fgets`](http://en.cppreference.com/w/c/io/fgets)获取整行，然后手动解析它，如下所示：

1.  读取初始整数。这可以通过 eg 轻松完成[`strtoul`](http://en.cppreference.com/w/c/string/byte/strtoul)。
2.  读取不是数字的字符（使用[`isdigit`](http://en.cppreference.com/w/c/string/byte/isdigit)）。
3.  循环执行`strtoul`，直到获得所有数字。

# c++builder - Firemonkey：在 Embarcadero C++ Builder XE3 上使用 TGrid

> ID：15543698
> 
> 赞同：1
> 
> 时间：2013-03-21T09:30:16.203
> 
> 标签：c++builder, firemonkey, c++builder-xe, firemonkey-fm2, tgrid

我正在尝试构建一个从数据库读取数据并使用 Firemonkey 中的 TGrid 将其显示为表的工具。我需要使用不同类型的列，例如 TCheckColumn 和 TPopupColumn，但找不到任何关于如何在 C++ Builder 中使用它们的好的指南或示例。

无论如何，我设法了解了 TStringColumn、TProgressColumn 的用法，用于在 TGrid 的事件 onGetValue 中设置单元格的值。

你们中有人知道如何为 TCheckColumn、TImageColumn 和 TPopupColumn 类型的列设置值吗？

谢谢丹尼尔

- -更新 - -

我设法使用了 TProgressColumn。这就是我在表单的构造函数中所做的：

```
// TStringColumn
Grid1->AddObject(new TStringColumn(this));
// TCheckColumn
TCheckColumn* c = new TCheckColumn(this);
Grid1->AddObject(c);
// TPopupColumn
// list of values
TStringList * l = new TStringList(NULL);
l->Add(L"First");
l->Add(L"Second");
l->Add(L"Third");
TPopupColumn* p = new TPopupColumn(this);
// adding the list to the PopupColumn
p->Items = l;
Grid1->AddObject(p);
// TProgressColumn
Grid1->AddObject(new TProgressColumn (this));
Grid1->RowCount = 3 ; 
```

这是 Grid1GetValue 方法：

```
// TStringColumn
if(Col == 0) Value = TValue::From<String>(Row);
// TCheckColumn  !! Can't make it work
if(Col == 1) Value = TValue::From<Boolean>(true);
// TPopupColumn
if(Col == 2)    Value = TValue::From<int>(2);
// TProgressColumn
if(Col == 3)    Value = TValue::From<double>(50.0); 
```

- -更新 - -

如果我使用 OnSetValue 方法保存列的值

```
void __fastcall TForm1::Grid1SetValue(...)
{
if(Col == 1) check = Value;
} 
```

然后用 OnGetValue 方法设置它：

```
void __fastcall TForm1::Grid1GetValue(...)
{
// TCheckColumn  !! Can't make it work
if(Col == 1) Value = check;// TValue::From<Boolean>(true);
} 
```

在我单击一个复选框后，所有其他复选框都会更改状态。所以组件可以正常工作......现在的重点是如何以正确的方式将 Value 设置为 true 或 false。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-24T16:52:51.870

TGris 不存储任何数据，您应该创建自己的数据存储。

示例：带有 TCheckColumn、TStringColumn 和 TPopupColumn 的 TGrid

```
type
  TField = record
    Checked:  Boolean;
    Name:     string;
    Column:   Byte;
  end;

var
  Fields: TList<TField>;

function SetField(const AChecked: Boolean; const AName: string; const AColumn: Byte): TField;
begin
  with Result do begin
    Checked := AChecked;
    Name    := AName;
    Column  := AColumn;
  end;
end;

procedure TForm1.FormCreate(Sender: TObject);
var
  I: Integer;
begin
  Fields := TList<TField>.Create;
  Fields.Add(SetField(True, 'Name', 1));
  Fields.Add(SetField(True, 'Login', 2));
  Fields.Add(SetField(True, 'Password', 3));
  for I := 1 to Fields.Count do
    PopupColumn1.Items.Add('Column ' + IntToStr(I));
  gdFields.RowCount := Fields.Count;
end;

procedure TForm1.FormDestroy(Sender: TObject);
begin
  Fields.Free;
end;

procedure TFormExport.gdFieldsGetValue(Sender: TObject; const Col, Row: Integer; var Value: TValue);
begin
  case gdFields.Columns[Col].TabOrder of
    0:  Value := Fields[Row].Checked;
    1:  Value := Fields[Row].Name;
    2:  Value := Fields[Row].Column - 1;
  end;
end;

procedure TFormExport.gdFieldsSetValue(Sender: TObject; const Col, Row: Integer; const Value: TValue);
var
  FRec: TField;
begin
  FRec := Fields[Row];
  case gdFields.Columns[Col].TabOrder of
    0:  FRec.Checked := Value.AsBoolean;
    1:  FRec.Name    := Value.AsString;
    2:  FRec.Column  := Value.AsInteger + 1;
  end;
  Fields[Row] := FRec;
end; 
```

现在，在编辑 TGrid 后，数据存储中的所有数据都将被更改，但 TGrid 中可能存在错误 - 更改 PopupColumn 后从未收到 OnSetValue

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:27:51.590

I can't give C++ code but a Delphi example should be easy enough to translate.

You get and set all cell values the same way, by listening for the OnGetData and OnSetData events, get take/give values of type TValue (XE3 and later). It's just a case of returning the appropriate type in the TValue:

```
uses System.RTTI;

procedure Form1.Grid1GetValue(Sender: TObject;const Col, Row: Integer;var Value: TValue);
begin
  if Col = 1 then
    Value := TValue.From<Integer>(1)
  else if Col = 2 then
    Value := TValue.From<String>('Hello')
  else if Col = 3 then
    Value := Tvalue.From<Single>(1.0);
end;

procedure Form1.Grid1SetValue(Sender: TObject;const Col, Row: Integer;const Value: TValue);
begin
  if Col = 1 then
    I := Value.As<Integer>
  else if Col = 2 then
    St := Value.As<String>
  else if Col = 3 then
    Si := Value.As<Single>;
end; 
```

As far as I can tell a popup menu can't accept or give data.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-15T07:36:04.507

为了解决您的问题，请`TCheckCell`按以下方式重新定义类：

```
#include <FMX.Grid.hpp>
#include <boost/dynamic_bitset.hpp>

class CheckCellClass:public TCheckCell
{
public:
 __fastcall virtual CheckCellClass(System::Classes::TComponent*AOwner):TCheckCell(AOwner)
 {
 };

 virtual System::Rtti::TValue __fastcall GetData(void)
 {
  return TValue::From<bool>(this->IsChecked);
 };

 virtual void __fastcall SetData(const TValue&Value)
 {
  TValue V(Value);
  this->IsChecked=V.AsBoolean();
 };
};

//Redifine TCheckColumn class
class CheckColumnClass:public TCheckColumn
{
private:
 virtual Fmx::Controls::TStyledControl*__fastcall CreateCellControl(void)
 {
  CheckCellClass*Cell=new CheckCellClass(this);
  Cell->OnChange     =&(this->DoCheckChanged);
  return Cell;
 };

public:
__fastcall CheckColumnClass(System::Classes::TComponent*AOwner):TCheckColumn(AOwner)
 {
 };
};

//global Data for Save curent State Cell

boost::dynamic_bitset<unsigned char>FullDiscreteInputs;

Add To Grid In Constuctor
 FullDiscreteInputs.resize(100);
 DiscreteInputsGrid->RowCount=FullDiscreteInputs.size();    
 CheckColumnClass* DiscreteInPutsCheckColumn        =new CheckColumnClass(DiscreteInputsGrid);
 DiscreteInputsGrid->AddObject(CoilsCheckColumn);

void __fastcall TForm1::DiscreteInputsGridGetValue(TObject*Sender, const int Col, const int Row,TValue&Value)
{
 //...

 if(DiscreteInputsGrid->ColumnByIndex(Col)==DiscreteInPutsCheckColumn)
 {
 Value=TValue::From<bool>(FullDiscreteInputs[Row]);
 }
 //...
}

//---------------------------------------------------------------------------
void __fastcall TForm1::DiscreteInputsGridSetValue(TObject*Sender, const int Col, const int Row, const TValue&Value)
{
 TValue V(Value);
 if(DiscreteInputsGrid->ColumnByIndex(Col)==DiscreteInPutsCheckColumn)
 {
 FullDiscreteInputs[Row]=V.AsBoolean();
 }
}
//--------------------------------------------------------------------------- 
```

# java - Hibernate saveOrUpdate 创建一个对象的两个实例

> ID：15543700
> 
> 赞同：2
> 
> 时间：2013-03-21T09:30:17.133
> 
> 标签：java, sql-server-2008, hibernate

当使用 saveOrUpdate 创建新对象时，休眠将对象存储在数据库中并正确返回。但是在该方法的同一调用中创建了一个带有一些空列的附加对象。

数据库中的对象如下所示：

```
id 因果 isInTopTen propability 责任范围 title
312 测试测试 0 0 NULL 0 NULL
313 测试 测试 0 2 客户 3 测试

```

这是数据类：

```
@Entity
@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)
@Table(name=HibernateConstants.RISK_TABLE)
public class Risk implements Serializable {

    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy = GenerationType.TABLE)
    private int id;
    private boolean isInTopTen;
    private String title;
    private String cause;
    private String effect;
    @Enumerated(EnumType.STRING)
    private Responsibility responsibility;
    private int propability;
    private int scope;
    @OneToMany
    @LazyCollection(LazyCollectionOption.FALSE)
    @Cascade({CascadeType.SAVE_UPDATE, CascadeType.MERGE}) 
    private List<Keyword> keywords;
    @OneToMany
    @LazyCollection(LazyCollectionOption.FALSE)
    @Cascade({CascadeType.SAVE_UPDATE, CascadeType.MERGE}) 
    private List<Action> actions;
    @OneToMany
    @LazyCollection(LazyCollectionOption.FALSE)
    @Cascade({CascadeType.SAVE_UPDATE, CascadeType.MERGE}) 
    private List<ProjectRisk> derivedProjectsRisks;
} 
```

这是我将对象存储到数据库的方式： public class DataUtils { private Session session; 私有静态 DataUtils dataUtils;

```
 private DataUtils() {}

    private void setSession() {
        session = HibernateSessionFactory.getInstance().getCurrentSession();
    }

    public static DataUtils getInstance() {
        if (dataUtils == null) {
            dataUtils = new DataUtils();
        }
        return dataUtils;
    }

    public void storeOne(Object o) {
        setSession();
        Transaction transaction = session.beginTransaction();
        session.saveOrUpdate(o);
        transaction.commit();
    }
} 
```

还有我的休眠配置：

```
public class HibernateSessionFactory {
    // Singleton
    private HibernateSessionFactory() {}

    private static SessionFactory sessionFactory;

    public static SessionFactory getInstance() {
        if (sessionFactory==null) {
            final Configuration configuration = new Configuration();
            configuration.configure("hibernate.cfg.xml");
            ServiceRegistry serviceRegistry = new ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry();
            sessionFactory = configuration.buildSessionFactory(serviceRegistry);
        }
        return sessionFactory;
    }
}

<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
   "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
   "http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
   <session-factory>
    <!-- DB-Connection -->
      <property name="connection.url">jdbc:jtds:sqlserver://localhost:1433/riskManagement</property>
      <property name="connection.username">riskManagement</property>
      <property name="connection.password">riskManagement</property>
      <property name="connection.driver_class">net.sourceforge.jtds.jdbc.Driver</property>
      <property name="dialect">org.hibernate.dialect.SQLServerDialect</property>
      <property name="cache.provider_class">org.hibernate.cache.EhCacheProvider</property>
      <property name="current_session_context_class">thread</property>
      <property name="hibernate.transaction.factory_class">org.hibernate.transaction.JDBCTransactionFactory</property>      

      <property name="hibernate.hbm2ddl.auto">update</property>

      <!-- Classes added to persistence -->
      <mapping class="com.encoway.riskManagement.data.Customer" />
      <mapping class="com.encoway.riskManagement.data.Keyword" />
      <mapping class="com.encoway.riskManagement.data.Project" />
      <mapping class="com.encoway.riskManagement.data.ProjectRisk" />
      <mapping class="com.encoway.riskManagement.data.Risk" />
      <mapping class="com.encoway.riskManagement.data.Action" />
   </session-factory>
</hibernate-configuration> 
```

有关此事务的日志信息：

```
Opening new JDBC connection
Created connection to: jdbc:jtds:sqlserver://localhost:1433/riskManagement, Isolation Level: 2
select sequence_next_hi_value from hibernate_sequences with (updlock, rowlock) where sequence_name = 'KEYWORD'
update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'KEYWORD'
Generated identifier: 4882432, using strategy: org.hibernate.id.MultipleHiLoPerTableGenerator
committing
Processing flush-time cascades
Dirty checking collections
Flushed: 1 insertions, 0 updates, 0 deletions to 1 objects
Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
Listing entities:
com.encoway.riskManagement.data.Keyword{id=4882432, name=abc}
insert into KEYWORD (name, id) values (?, ?)
committed JDBC Connection
HHH000420: Closing un-released batch
Releasing JDBC connection
Released JDBC connection
begin
Obtaining JDBC connection
Obtained JDBC connection
initial autocommit status: false
select sequence_next_hi_value from hibernate_sequences with (updlock, rowlock) where sequence_name = 'RISK'
update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'RISK'
Generated identifier: 4718592, using strategy: org.hibernate.id.MultipleHiLoPerTableGenerator
Loading entity: [com.encoway.riskManagement.data.Keyword#4882432]
select keyword0_.id as id3_0_, keyword0_.name as name3_0_ from KEYWORD keyword0_ where keyword0_.id=?
Result set row: 0
Result row: EntityKey[com.encoway.riskManagement.data.Keyword#4882432]
Resolving associations for [com.encoway.riskManagement.data.Keyword#4882432]
Done materializing entity [com.encoway.riskManagement.data.Keyword#4882432]
Done entity load
committing
Processing flush-time cascades
Dirty checking collections
Collection found: [com.encoway.riskManagement.data.Risk.actions#4718592], was: [<unreferenced>] (initialized)
Collection found: [com.encoway.riskManagement.data.Risk.derivedProjectsRisks#4718592], was: [<unreferenced>] (initialized)
Collection found: [com.encoway.riskManagement.data.Risk.keywords#4718592], was: [<unreferenced>] (initialized)
Flushed: 1 insertions, 0 updates, 0 deletions to 2 objects
Flushed: 3 (re)creations, 0 updates, 0 removals to 3 collections
Listing entities:
com.encoway.riskManagement.data.Risk{id=4718592, title=null, scope=0, keywords=[com.encoway.riskManagement.data.Keyword#4882432], cause=abc, effect=abc, derivedProjectsRisks=[], isInTopTen=false, propability=0, actions=[], responsibility=null}
com.encoway.riskManagement.data.Keyword{id=4882432, name=abc}
insert into RISK (cause, effect, isInTopTen, propability, responsibility, scope, title, id) values (?, ?, ?, ?, ?, ?, ?, ?)
Inserting collection: [com.encoway.riskManagement.data.Risk.actions#4718592]
Collection was empty
Inserting collection: [com.encoway.riskManagement.data.Risk.derivedProjectsRisks#4718592]
Collection was empty
Inserting collection: [com.encoway.riskManagement.data.Risk.keywords#4718592]
insert into RISK_KEYWORD (RISK_id, keywords_id) values (?, ?)
Done inserting collection: 1 rows inserted
committed JDBC Connection
HHH000420: Closing un-released batch
Releasing JDBC connection
Released JDBC connection
begin
Obtaining JDBC connection
Obtained JDBC connection
initial autocommit status: false
Generated identifier: 4718593, using strategy: org.hibernate.id.MultipleHiLoPerTableGenerator
committing
Processing flush-time cascades
Dirty checking collections
Collection found: [com.encoway.riskManagement.data.Risk.actions#4718593], was: [<unreferenced>] (initialized)
Collection found: [com.encoway.riskManagement.data.Risk.derivedProjectsRisks#4718593], was: [<unreferenced>] (initialized)
Collection found: [com.encoway.riskManagement.data.Risk.keywords#4718593], was: [<unreferenced>] (initialized)
Flushed: 1 insertions, 1 updates, 0 deletions to 2 objects
Flushed: 3 (re)creations, 0 updates, 0 removals to 3 collections
Listing entities:
com.encoway.riskManagement.data.Risk{id=4718593, title=abc, scope=3, keywords=[com.encoway.riskManagement.data.Keyword#4882432], cause=abc, effect=abc, derivedProjectsRisks=[], isInTopTen=false, propability=2, actions=[], responsibility=CUSTOMER}
com.encoway.riskManagement.data.Keyword{id=4882432, name=abc}
insert into RISK (cause, effect, isInTopTen, propability, responsibility, scope, title, id) values (?, ?, ?, ?, ?, ?, ?, ?)
update KEYWORD set name=? where id=?
Inserting collection: [com.encoway.riskManagement.data.Risk.actions#4718593]
Collection was empty
Inserting collection: [com.encoway.riskManagement.data.Risk.derivedProjectsRisks#4718593]
Collection was empty
Inserting collection: [com.encoway.riskManagement.data.Risk.keywords#4718593]
insert into RISK_KEYWORD (RISK_id, keywords_id) values (?, ?)
Done inserting collection: 1 rows inserted
committed JDBC Connection
HHH000420: Closing un-released batch
Releasing JDBC connection
Released JDBC connection 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:51:02.663

正如评论中已经提到的：“我解决了这个问题。在保存之前还有另一个类调用 session.merge() 并导致了额外的对象。” 所以这只是一个单独的错误。

# android - 带有 Webview 的 Android ViewPagerIndicator

> ID：15543711
> 
> 赞同：0
> 
> 时间：2013-03-21T09:30:53.353
> 
> 标签：android, webview, tabs, viewpagerindicator

我想创建一个`ViewPagerIndicator`包含`WebViews`每个标题下的应用程序。我无法理解它的逻辑`ViewPagerIndiactor`，有人能给我详细解释一下使用它吗？

[ViewPagerIndicator 网站](http://www.viewpagerindicator.com/)

# android - 三星 Galaxy ace2 中的 GCM 注册错误，但在模拟器中有效

> ID：15543712
> 
> 赞同：1
> 
> 时间：2013-03-21T09:30:55.460
> 
> 标签：android, android-emulator, google-cloud-messaging

我能够第一次在三星 Galaxy ace2 中运行我的应用程序。现在我收到以下错误，因为 GCM 注册失败。我在模拟器中工作正常，但在那个设备中不行。以下是错误和`GCMIntentService.java`。

**错误：**

```
03-21 09:25:33.110: V/GCMBaseIntentService(6018): Acquiring wakelock
03-21 09:25:33.120: V/GCMBaseIntentService(6018): Intent service name: GCMIntentService-1089764589011-11
03-21 09:25:33.130: D/GCMBaseIntentService(6018): handleRegistration: registrationId = null, error = SERVICE_NOT_AVAILABLE, unregistered = null
03-21 09:25:33.130: D/GCMBaseIntentService(6018): Registration error: SERVICE_NOT_AVAILABLE
03-21 09:25:33.130: I/GCMIntentService(6018): Received recoverable error: SERVICE_NOT_AVAILABLE
03-21 09:25:33.130: D/GCMBaseIntentService(6018): Scheduling registration retry, backoff = 98657 (96000)
03-21 09:25:33.200: V/GCMBaseIntentService(6018): Releasing wakelock
03-21 09:26:42.950: D/dalvikvm(6018): GC_CONCURRENT freed 354K, 48% free 3310K/6279K, external 630K/1286K, paused 7ms+9ms
03-21 09:27:11.800: V/GCMBroadcastReceiver(6018): onReceive: com.google.android.gcm.intent.RETRY
03-21 09:27:11.800: V/GCMBroadcastReceiver(6018): GCM IntentService class: com.dorji.finalproject.GCMIntentService
03-21 09:27:11.800: V/GCMBaseIntentService(6018): Acquiring wakelock
03-21 09:27:11.830: V/GCMBaseIntentService(6018): Intent service name: GCMIntentService-1089764589011-12
03-21 09:27:11.840: V/GCMRegistrar(6018): Registering app com.dorji.finalproject of senders 1089764589011
03-21 09:27:11.840: V/GCMBaseIntentService(6018): Releasing wakelock
03-21 09:27:12.010: V/GCMBroadcastReceiver(6018): onReceive: com.google.android.c2dm.intent.REGISTRATION
03-21 09:27:12.010: V/GCMBroadcastReceiver(6018): GCM IntentService class: com.dorji.finalproject.GCMIntentService
03-21 09:27:12.010: V/GCMBaseIntentService(6018): Acquiring wakelock
03-21 09:27:12.020: V/GCMBaseIntentService(6018): Intent service name: GCMIntentService-1089764589011-13
03-21 09:27:12.020: D/GCMBaseIntentService(6018): handleRegistration: registrationId = null, error = SERVICE_NOT_AVAILABLE, unregistered = null
03-21 09:27:12.020: D/GCMBaseIntentService(6018): Registration error: SERVICE_NOT_AVAILABLE
03-21 09:27:12.020: I/GCMIntentService(6018): Received recoverable error: SERVICE_NOT_AVAILABLE
03-21 09:27:12.020: D/GCMBaseIntentService(6018): Scheduling registration retry, backoff = 105051 (192000)
03-21 09:27:12.070: V/GCMBaseIntentService(6018): Releasing wakelock 
```

GCMIntentService.java

```
package com.dorji.finalproject;

import static com.dorji.finalproject.CommonUtilities.SENDER_ID;
import static com.dorji.finalproject.CommonUtilities.displayMessage;
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.util.Log;

import com.dorji.finalproject.R;
import com.google.android.gcm.GCMBaseIntentService;

public class GCMIntentService extends GCMBaseIntentService {

    private static final String TAG = "GCMIntentService";

    public GCMIntentService() {
        super(SENDER_ID);
    }

    /**
     * Method called on device registered
     **/
    @Override
    protected void onRegistered(Context context, String registrationId) {
        Log.i(TAG, "Device registered: regId = " + registrationId);
        displayMessage(context, "Your device registred with GCM");
        ServerUtilities.register(context, registrationId);
    }

    /**
     * Method called on device un registred
     * */
    @Override
    protected void onUnregistered(Context context, String registrationId) {
        Log.i(TAG, "Device unregistered");
        displayMessage(context, getString(R.string.gcm_unregistered));
        ServerUtilities.unregister(context, registrationId);
    }

    /**
     * Method called on Receiving a new message
     * */
    @Override
    protected void onMessage(Context context, Intent intent) {
        Log.i(TAG, "Received message");
        String message = intent.getExtras().getString("message");

        displayMessage(context, message);
        // notifies user
        generateNotification(context, message);

    }

    /**
     * Method called on receiving a deleted message
     * */
    @Override
    protected void onDeletedMessages(Context context, int total) {
        Log.i(TAG, "Received deleted messages notification");
        String message = getString(R.string.gcm_deleted, total);
        displayMessage(context, message);
        // notifies user
        generateNotification(context, message);
    }

    /**
     * Method called on Error
     * */
    @Override
    public void onError(Context context, String errorId) {
        Log.i(TAG, "Received error: " + errorId);
        displayMessage(context, getString(R.string.gcm_error, errorId));
    }

    @Override
    protected boolean onRecoverableError(Context context, String errorId) {
        // log message
        Log.i(TAG, "Received recoverable error: " + errorId);
        displayMessage(context, getString(R.string.gcm_recoverable_error,
                errorId));
        return super.onRecoverableError(context, errorId);
    }

    /**
     * Issues a notification to inform the user that server has sent a message.
     */
    private static void generateNotification(Context context, String message) {
        int icon = R.drawable.ic_launcher;
        long when = System.currentTimeMillis();
        NotificationManager notificationManager = (NotificationManager)
                context.getSystemService(Context.NOTIFICATION_SERVICE);
        Notification notification = new Notification(icon, message, when);

        String title = context.getString(R.string.app_name);

        Intent notificationIntent = new Intent(context, MainActivity.class);
        // set intent so it does not start a new activity
        notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP |
                Intent.FLAG_ACTIVITY_SINGLE_TOP);
        PendingIntent intent =
                PendingIntent.getActivity(context, 0, notificationIntent, 0);
        notification.setLatestEventInfo(context, title, message, intent);
        notification.flags |= Notification.FLAG_AUTO_CANCEL;

        // Play default notification sound
        notification.defaults |= Notification.DEFAULT_SOUND;

        //notification.sound = Uri.parse("android.resource://" + context.getPackageName() + "your_sound_file_name.mp3");

        // Vibrate if vibrate is enabled
        notification.defaults |= Notification.DEFAULT_VIBRATE;
        notificationManager.notify(0, notification);      

    }

} 
```

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.dorji.finalproject"
    android:versionCode="1"
    android:versionName="1.0" >

    <!-- GCM requires Android SDK version 2.2 (API level 8) or above. -->
    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <supports-screens android:largeScreens="true"
        android:normalScreens="true" android:smallScreens="true"
        android:resizeable="true" android:anyDensity="true" />

    <!-- GCM connects to Internet Services. -->
    <uses-permission android:name="android.permission.INTERNET" />

    <!-- GCM requires a Google account. -->
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />

    <!-- Keeps the processor from sleeping when a message is received. -->
    <uses-permission android:name="android.permission.WAKE_LOCK" />

    <!-- Creates a custom permission so only this app can receive its messages. -->
    <permission
        android:name="com.dorji.finalproject.permission.C2D_MESSAGE"
        android:protectionLevel="signature" />

    <uses-permission android:name="com.dorji.finalproject.permission.C2D_MESSAGE" />

    <!-- This app has permission to register and receive data message. -->
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />

    <!-- Network State Permissions to detect Internet status -->
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <!-- Permission to vibrate -->
    <uses-permission android:name="android.permission.VIBRATE" />

    <!-- Main activity. -->
    <application
        android:debuggable="true" 
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <!-- Register Activity -->
        <activity
            android:name="com.dorji.finalproject.LoginLayout"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <!-- Main Activity -->
        <activity
            android:name="com.dorji.finalproject.MainActivity"
            android:configChanges="orientation|keyboardHidden"
            android:label="@string/app_name" >
        </activity>

        <receiver
            android:name="com.google.android.gcm.GCMBroadcastReceiver"
            android:permission="com.google.android.c2dm.permission.SEND" >
            <intent-filter>

                <!-- Receives the actual messages. -->
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <!-- Receives the registration id. -->
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

                <category android:name="com.dorji.finalproject" />
            </intent-filter>
        </receiver>

        <service android:name="com.dorji.finalproject.GCMIntentService" />
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:38:09.307

该错误在[Google 的 GCM 文档](http://developer.android.com/reference/com/google/android/gcm/GCMConstants.html#ERROR_SERVICE_NOT_AVAILABLE)中定义如下：

> 公共静态最终字符串 ERROR_SERVICE_NOT_AVAILABLE
> 
> 设备无法读取响应，或者来自服务器的 500/503 可以稍后重试。应用程序应使用指数退避并重试。

所以看起来这可能是一个暂时的错误，我会再试几次，看看会发生什么。

另外 ass @ol_v_er 提到您需要确保您的设备符合[GCM 文档](http://developer.android.com/google/gcm/gcm.html#intro)中列出的 GCM 要求：

> *   它要求运行 Android 2.2 或更高版本的设备也安装了 Google Play Store 应用程序，或者运行 Android 2.2 和 Google API 的模拟器。但是，您不仅限于通过 Google Play 商店部署您的 Android 应用程序。
> *   它使用现有的 Google 服务连接。对于 3.0 之前的设备，这要求用户在其移动设备上设置其 Google 帐户。运行 Android 4.0.4 或更高版本的设备不需要 Google 帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-15T08:09:38.923

如果您无缘无故地收到此消息 SERVICE_NOT_AVAILABLE 并且 stackoverflow 的答案都没有解决您的问题，请继续阅读，因为可能只需要耐心。所以 selsine 的回答对我有用。

After my app working fine on a nexus it suddenly started generating SERVICE_NOT_AVAILABLE messages and showing the registration id as null. I then tried the app on two different emulators and it worked fine on both.

I tried all the suggestions in the various stackoverflow postings to no avail. I left the app running on the device all evening and filled half a screen with SERVICE_NOT_AVAILABLE messages.

I uninstalled the app and switched off the device and retired to bed. The following morning, I switched on the nexus installed and ran the app again and it worked perfectly.

The strange thing is that the device was registered as a new one with the GCM server. My application server also notched up another device added. Unfortunately, my application server is a bare bones one, no persistence or logging so I'm unable to investigate further.

Has anyone else experienced this phenomenon?

# paypal - 错误：输入的信息不正确。再试一次

> ID：15543714
> 
> 赞同：0
> 
> 时间：2013-03-21T09:31:13.837
> 
> 标签：paypal, payflowlink

我是 PayPal 新手。我已使用 Paypal 管理器在 PayPal Payflow 链接中发布了托管结帐页面。我尝试进行测试交易。我没有按要求设置任何内容。我提供了测试信用卡号（从 Paypal 收集PayFlow 链接用户指南）和到期日期正确。但我收到以下错误。

**错误：输入的信息不正确。再试一次。**

我试图找到解决方案。但是，找不到。

请帮助我获得解决方案。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:43:51.153

我在结帐页面上看到的第一个问题是，您的 Payflow 帐户设置为需要地址和 CSC，但您的帐户仅设置为允许 CSC 字段可编辑。您需要登录到您的 Payflow Manager，然后在服务设置 > 设置和帐单信息下进行设置，以允许帐单地址部分可编辑。这可能是导致您的问题的原因。如果更改后仍然出现错误，我将再次测试。由于无法编辑帐单地址，我无法通过结帐。

# javascript - youtube iframe api 无法在具有骨干网的 Firefox 中工作

> ID：15543717
> 
> 赞同：0
> 
> 时间：2013-03-21T09:31:19.040
> 
> 标签：javascript, backbone.js, youtube-api

所以我试图在主干代码中实现 youtube API。

我将 API 放在视图中并尝试从那里运行所有内容

它在 chrome 中运行良好，但在 Firefox 中没有运行，当 youtube API 完成加载时应该触发的事件没有被触发。如果甚至尝试将警报放在那里以查看它是否与上下文相关，则此警报将在 chrome 中运行，而不是在 Firefox 中。

以前有人见过这样的事情吗？

我正在使用主干 0.9 和 youtube iframe api

现场示例：[http ://alpha.mychannls.com/channel/8](http://alpha.mychannls.com/channel/8)

相关代码

```
App.Views.youtubePlayer = Backbone.View.extend({
defaults: {
    'wmode': 'transparent',
    'height': '420',
    'width': '740',
    'volume': '40',
    'playerVars': {
        'wmode': 'transparent',
        'origin': 'http://www.youtube.com',
        'enablejsapi': 1,
        'autoplay': 0,
        'controls': 1,
        'iv_load_policy': 3,
        'showinfo': 0,
        'rel': 0,
        'allowfullscreen': 1,
        'allowtransparency': 'yes'
    }
},

initialize: function(options) {
    //bind youtubeplay event to play method
    this.collection.bind('youtubePlay', this.play, this);
    //bind youtubestop to stop method
    this.collection.bind('youtubeStop', this.stop, this);
    //extend this.o so the options are globally accessable
    this.o = $.extend(true, this.defaults, options);
    this.render();
},

render: function() {
    //create a new youtube player
    var view = this;
    console.log("this is run by firefox");
    this.ytplayer = new window.YT.Player('ytplayer', {
        'events': {
            'onReady': view.onPlayerReady,
            'onError': view.onError,
            'onStateChange': view.onPlayerStateChange
        }
    });
    return this;
},
//when youtube player is ready to run
onPlayerReady: function(e){
    console.log('this function isent run in firefox');
    //start the first video
    App.videos.youtubeready();

}

}); 
```

在主干代码之外，因为需要将 youtube api 播放器声明为全局

```
var tag = document.createElement('script'); 
tag.src = "https://www.youtube.com/iframe_api";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
function onYouTubeIframeAPIReady() {
    App.youtubeplayer = new App.Views.youtubePlayer( { el: '#ytplayer' , collection :     App.videos }  );
} 
```

完整的代码可以在这里找到

[http://alpha.mychannls.com/js/channel.js](http://alpha.mychannls.com/js/channel.js)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:26:40.947

我想我找到了问题的答案。我实现了这一点，它现在实际上工作得很好。这是它的要点：

Firefox 有 2 个独立的 IFrame 实现。第一个实现是在浏览器触发 onload 事件之前。第二个是在 onload 事件之后。这对于在 onload 事件之后运行的 Backbone/Angular 或其他事件驱动的 javascript 应用程序框架意味着 Youtube IFrame API 实现将 IFrame 动态添加到您的页面将不起作用。

我找到的解决方案也位于 YT IFrame API 文档中，但您不会知道。

[https://developers.google.com/youtube/iframe_api_reference#Loading_a_Video_Player](https://developers.google.com/youtube/iframe_api_reference#Loading_a_Video_Player)

请参阅 JS 之后的部分，关于自己创建 IFrame 标记？完全正确！因此，您需要做的就是在从服务器发送页面（即：您的 index.html）或您正在使用的任何主文件时，在您的页面中添加 IFrame。

在您的情况下，您似乎有一个 Backbone/Marionette 应用程序，因此该解决方案应该适合您。

```
<iframe id="player" type="text/html" width="1" height="1" 
src="http://www.youtube.com/embed/?enablejsapi=1&origin=http://example.com" 
frameborder="0"></iframe> 
```

类似上述代码放置在主文档中并从 Backbone 应用程序引用的内容将起作用。

祝你好运，如果您需要更多帮助，请回复。

Jeff：FWIW - 这个 IFrame/Firefox 问题至少从 2005 年就已经存在（我发现的那个不起眼的帖子的日期）。您可能想在动态单页 Javascript 应用程序开发人员的 IFrame 文档中注明它，因为这不容易调试。

# rally - 使用 RallyLoginkey 的 Html 文件通过 IE 显示错误

> ID：15543721
> 
> 赞同：1
> 
> 时间：2013-03-21T09:31:26.557
> 
> 标签：rally

我创建了一个 html 文件来使用登录密钥访问集会报告。当我通过 IE 打开同一个 html 文件时，我收到以下错误消息，例如完成此操作所需的数据尚不可用，并且由于错误 80020101 而无法完成操作。通过 Google 打开同一个文件时没有发现问题-铬合金。

你们中的一个人可以帮助我或建议我在这方面发表您的意见吗？

# php - 为什么更改标准后 CActiveDataProvider 不起作用

> ID：15543726
> 
> 赞同：0
> 
> 时间：2013-03-21T09:31:37.473
> 
> 标签：php, yii, cactivedataprovider

此代码工作正常：

```
$criteria = new CDbCriteria;
$criteria->compare('id', 1);
$dataProvider = new CActiveDataProvider('User', array('criteria'=>$criteria));
foreach ($dataProvider->getData() as $value) var_dump($value->id); 
```

但是当我在创建 CActiveDataProvider 实例后更改条件时，这不起作用：

```
$criteria = new CDbCriteria;
$criteria->compare('id', 1);
$dataProvider = new CActiveDataProvider('User', array('criteria'=>$criteria));
$criteria->compare('id', 2);
foreach ($dataProvider->getData() as $value) var_dump($value->id); 
```

此返回空！为什么是这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T09:46:15.303

您没有任何结果，因为您正在向条件添加条件：生成的 SQL 将如下所示：`WHERE id='1' AND id='2'`

如果您想列出用户 1 和 2，您应该尝试：

```
$criteria->compare('id', 2, false, 'OR'); 
```

或者干脆使用[`addInCondition`](http://www.yiiframework.com/doc/api/1.1/CDbCriteria#addInCondition-detail).

**编辑**：正如您在评论中所说，您可以[克隆它](http://php.net/manual/en/language.oop5.cloning.php)，而不是使用相同的标准对象。

# ios - 如何创建一个 ios 表，第一列固定，下一列，行水平滚动到 1

> ID：15543728
> 
> 赞同：0
> 
> 时间：2013-03-21T09:31:56.263
> 
> 标签：ios, uitableview

在 iOS 中，我基本上想按如下方式显示图像：

我需要一个表中的 2 列。第一列中的图像是固定的，第二列中的行应该具有水平滚动以滚动图像。在选择图像时，它应该转到另一个视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:35:44.960

您需要遵循[本教程](http://www.raywenderlich.com/4680/how-to-make-an-interface-with-horizontal-tables-like-the-pulse-news-app-part-1)以及类似的教程。

有关如何修复第一个图像的详细信息，没有比[从头开始，按照书本](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/AboutTableViewsiPhone/AboutTableViewsiPhone.html)更好的方法了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:36:47.363

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];
    }

    if(indexPath.row == 0){

        //Normar cell

    }else if(indexPath.row == 1){

        //add ScrollVeiw
    }
} 
```

和单元格的高度

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{

    if (indexPath.row == 1) {
        //height for scrollview

    }
} 
```

希望这会帮助你。

一切顺利 ！！！

# c++ - 列表的迭代器错误

> ID：15543729
> 
> 赞同：1
> 
> 时间：2013-03-21T09:31:58.970
> 
> 标签：c++, list, stl, iterator

所以这是我的程序。这很不言自明。有一个菜单有 4 个选项。每个选项都提供两个不同子菜单的版本。我正在处理列表和向量，但现在列表给了我错误。我对迭代器做错了吗？我很确定这就是我所有的错误。

```
#include <iostream>
#include <vector>
#include <algorithm>
#include <list>
#include <vector>
using namespace std;

template <class T>
void lst(T inglethorp, int a)
{
  list<T> mylist;
  int sel = 10;
  T ins;
  int place;
  list<T>::iterator iter; //is this wrong? 
  //error: expected ';' before 'iter'
  //dependent-name 'std::list::iterator' is parsed as a non-type, but instantiation yields a type

  switch(a)
  {
    case 1:
        cout << "What would you like to load to the front?" << endl;
        cin >> ins;
        mylist.push_front(ins);
        cout << endl << endl;
        break;
    case 2:
        cout << "What would you like to load to the back?" << endl;
        cin >> ins;
        mylist.push_back(ins);
        cout << endl << endl;
        break;
    case 3:
        cout << "Where would you like to insert the value?" << endl;
        cin >> place;
        iter = mylist.begin(); //'iter' was not declared in this scope
        for(int i=0; i < place; i++)
            iter++;
        cout << "What would you like to lod at this point?" << endl;
        cin >> ins;
        mylist.insert(iter, ins);
        cout << endl << endl;
        break;
    case 4:
        cout << "What would you like to search for?" << endl;
        cin >> ins;
        iter = find(mylist.begin(), mylist.end(), ins);
        if(iter==mylist.end())
            cout << ins << " was not founf." << endl << endl;
        else
            cout << ins << " is in the list" << endl << endl;
        break;
    case 5:
        cout << "What would you like to remove?" << endl;
        cin >> ins;
        mylist.remove(ins);
        cout << endl << endl;
        break;
    case 6:
        for(iter = mylist.begin(); iter != mylist.end(); iter++)
            cout << *iter << " " << endl << endl;
        break;
    case 0:
        break;
    default:
        cout << "Enter a valid number between 0 and 6" << endl << endl;
        break;
  }
}

void listsub()
{
    cout << endl << endl << "Linked List Sub-Menu" << endl;
    cout << "+++++++++++++++++++++++++++++++++++++++++++++++++" << endl;
    cout << "1\. Insert a value at the front of the list" << endl;
    cout << "2\. Insert a value at the back of the list" << endl;
    cout << "3\. Insert a value at a given position in the list" << endl;
    cout << "4\. Search the list for a value" << endl;
    cout << "5\. Delete all instances of a value" << endl;
    cout << "6\. Print the list contents" << endl << endl;
    cout << "0\. Return to main homework menu" << endl;
    cout << "+++++++++++++++++++++++++++++++++++++++++++++++++" << endl;
}

int main()
{
  int sel = 10;
  int subsel = 10;
  int a = 1;
  double b = 1.1;
  int sel2 = 19;
  while(sel != 0)
  {
    sel = 10;
    subsel = 10;
    cout << endl << endl << "Welcome to the CS222 Homework 7 Menu!" << endl;
    cout << "=================================================" << endl;
    cout << "1\. Test the vector STL with integers" << endl; //not done yet
    cout << "2\. Test the vector STL with doubles" << endl;  //not done yet
    cout << "3\. Test the list STL with integers" << endl;
    cout << "4\. Test the list STL with doubles" << endl << endl;
    cout << "0\. Exit" << endl;
    cout << "=================================================" << endl << endl;

    cin >> sel;

    switch(sel)
    {
        case 1:
            break;
        case 2:
            break;
        case 3:
            while(sel2 != 0)
            {
                listsub();
                cin >> sel2;
                lst(a, sel2);
            }
            sel2 = 12;
            break;
        case 4:
            while(sel2 != 0)
            {
                listsub();
                cin >> sel2;
                lst(b, sel2);
            }
            sel2 = 12;
            break;
        case 0:
            break;
        default:
            cout << "Select 0-4" << endl;
            break;
    }
  }
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T09:36:06.507

你错过了`typename`应该`list<T>::iterator iter`是：

```
typename list<T>::iterator iter; 
```

这是因为`list<T>`依赖于模板参数`T`，并且编译器默认假定`list<T>::iterator`依赖的任何其他符号`T`是值而不是类型。using`typename`通知编译器它确实是一个类型而不是一个值。

更多信息，谷歌“依赖名称查找”（例如[wiki](http://en.wikipedia.org/wiki/Argument-dependent_name_lookup)）。基本上问题是您可以专门化，说`class list<int>`并定义`iterator`为一个值，并且在第一个编译过程（解析）`T`中没有实例化（没有值）并且编译器还不知道所有可能的专门化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:50:23.957

您需要`typename`关键字才能使其正常工作。但是试图猜测你在做什么，我认为你会想要`mylist`静态化。您的代码始终使用新的空列表，可能不是您想要的。

```
template <class T>
void lst(T inglethorp, int a)
{
  static list<T> mylist;
  int sel = 10;
  T ins;
  int place;
  typename list<T>::iterator iter; //OK 
```

...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T09:37:27.520

放一个`typename`

```
typename typename list<T>::iterator iter; 
```

# symfony - 在 Symfony 2 中向 ACL 添加新属性

> ID：15543733
> 
> 赞同：3
> 
> 时间：2013-03-21T09:32:09.080
> 
> 标签：symfony, acl

我是 Symfony 的新手，对于我的项目，我正在尝试使用 ACL 及其权限属性。在食谱中它说权限映射绝不是静态的，可以随意完全替换。我需要创建另外两个属性，一个 Proposer 和另一个 Acceptance。比如用户可以提出新页面或评论，而另一个人可以决定是否可以发布。就目前而言，我无法找到如何使用 ACL 来实现这一点。有人有我可以开始的线索或参考吗？我已经在说明书中阅读了 ACL 以及它的高级用法，但它对我没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-18T11:07:02.793

您要查找的内容与 ACL 相比与规则引擎更相关。

您可以查看以下链接以快速实施：

[http://knpbundles.com/rezzza/RulerBundle](http://knpbundles.com/rezzza/RulerBundle)

# jstree - 如何从 JSTREE 获取所有 id

> ID：15543734
> 
> 赞同：0
> 
> 时间：2013-03-21T09:32:09.340
> 
> 标签：jstree

我正在尝试从 JSTREE 收集每个节点 ID，以便我可以获得 MAX ID。

我认为这是直截了当的......感谢任何回复谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:38:52.903

```
var ids = [];
$('.jstree-leaf').each(function(){
  ids.push($(this).attr('id'));
}); 
```

# mysql - 在mysql数据库中导入csv文件

> ID：15543736
> 
> 赞同：1
> 
> 时间：2013-03-21T09:32:16.677
> 
> 标签：mysql, csv

我有一个 8 列的 csv 文件。当我将 csv 文件导入 mysql 数据库时，它忽略了第二列并将其余数据从其他列移到左侧，请帮助。

我认为问题出在 csv 文件上，因为一些 csv 文件已成功上传。我该如何解决？

这是我将 csv 文件存储到数据库中的查询：

```
LOAD DATA INFILE '$file_name' INTO TABLE import
FIELDS TERMINATED BY '|'
LINES TERMINATED BY '\n'
IGNORE 1 LINES
(@srno,@customer_name,@date,@mobno,@city,@state,@type,@telecaller)
SET customer_name=@customer_name,date=@date,mobno=@mobno,city=@city,
state=@state,type=@type,telecaller=@telecaller,datetime='$datetime' 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-11-16T23:49:27.853

这段代码对我有用。使用本地数据库对其进行测试。

```
package Example_Import;

import java.sql.*;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.io.*;
import java.lang.String;
import java.util.Scanner;

public class Example {

    //import mysql-connector-java-5.1.32.jar
    //http://www.tutorialspoint.com/jdbc/jdbc-create-tables.htm
    private static String JDBC_URL = "jdbc:mysql://localhost:3306/sakila";
    private static String USER = "root";
    private static String PASSWORD = "2004";

    public static void main(String[] args) throws IOException {

        Connection myConnection = null;
        Statement statement = null;
        PreparedStatement preparedStatement = null;

        try{
            //CONNECTING TO THE DATABASE
            myConnection = DriverManager.getConnection(JDBC_URL, USER, PASSWORD);

            System.out.println("Connected to database"); //CONNECTED

            //CREATING TABLE IN THE DATABASE    
            System.out.println("Creating table in given database...");
            statement = myConnection.createStatement();

            String sql = "CREATE TABLE REGISTRATION " +
                           "(id INTEGER not NULL, " +
                           " last VARCHAR(25), " + 
                           " first VARCHAR(25), " + 
                           " balance FLOAT, " + 
                           " Credit FLOAT," +
                           " Date DATE," +
                           " Rating CHAR," +
                           " PRIMARY KEY ( id ))"; 

             statement.executeUpdate(sql);
             System.out.println("Created table in given database...");
             statement.close(); //closing statement

            //CREATING A PREPARED STATEMENT
            String insertTableSQL = "INSERT INTO REGISTRATION"
                    + "(id, last, first, balance, Credit, Date, Rating) VALUES"
                    + "(?,?,?,?, ?, ?, ?)";

            preparedStatement = myConnection.prepareStatement(insertTableSQL);

            //RETRIEVING INFORMATION FROM CSV FILE

            //opening a file input stream
            BufferedReader reader = new BufferedReader(new FileReader("SAMPLE.csv"));

            String line = null; //line read from csv
            Scanner scanner = null; //scanned line

            SimpleDateFormat date = new SimpleDateFormat("mm/DD/yyyy");

            reader.readLine(); //omits the first line

            //READING FILE LINE BY LINE AND UPLOADING INFORMATION TO DATABASE
            while((line = reader.readLine()) != null){
                scanner = new Scanner(line);
                scanner.useDelimiter(",");
                while(scanner.hasNext()){
                        preparedStatement.setInt(1,Integer.parseInt(scanner.next()));
                        preparedStatement.setString(2, scanner.next());
                        preparedStatement.setString(3, scanner.next());
                        preparedStatement.setFloat(4, Float.parseFloat(scanner.next()));
                        preparedStatement.setFloat(5, Float.parseFloat(scanner.next()));
                        try {
                            java.util.Date d;
                            d = date.parse(scanner.next());
                            preparedStatement.setDate(6, new java.sql.Date(d.getTime()));
                        } catch (ParseException e) {
                            e.printStackTrace();
                        }   
                        preparedStatement.setString(7, scanner.next());
                    }   
                    preparedStatement.executeUpdate();
            }

            preparedStatement.close();
            System.out.println("Data imported");

            reader.close(); //closing CSV reader

        } catch (SQLException e){
            e.printStackTrace();
        }finally{//CLOSING CONNECTION
            try{
                 if(statement!=null)
                    myConnection.close();
              }catch(SQLException se){
              }// do nothing
              try{
                 if(myConnection!=null)
                    myConnection.close();
              }catch(SQLException se){
                 se.printStackTrace();
              }
              System.out.println("Connection closed");
        }
    }
} 
```

# c# - 当我创建一个新类的实例时，我该如何做到这一点，它必须获得一个参数？

> ID：15543742
> 
> 赞同：1
> 
> 时间：2013-03-21T09:32:35.810
> 
> 标签：c#

例如：

```
class WebCrawler
{
    List<string> currentCrawlingSite;
    List<string> sitesToCrawl;
    RetrieveWebContent retwebcontent;

    public WebCrawler()
    {
    }
} 
```

当我做`WebCrawler = new WebCrawler(parameter here)`...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T09:34:13.087

向您的类添加另一个*构造函数*；

```
public WebCrawler(parameter here)
{
} 
```

之后，您需要**删除**一个无参数的构造函数，这样人们就可以在不提供任何参数的情况下创建您的类的实例。

您可以创建它的实例

`WebCrawler w = new WebCrawler(parameter here);`

您可以从以下位置阅读更多信息[`Instance Constructors`](http://msdn.microsoft.com/en-us/library/vstudio/k6sa6h87.aspx)

这是一个[`DEMO`](http://ideone.com/2ViRWt).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T09:33:37.630

使用您希望用户提供的参数创建构造函数：

```
public WebCrawler(string param1, int param2)
{
} 
```

当添加任何这样的构造函数时，默认构造函数（无参数）不再可用，除非您自己编写：

```
public WebCrawler()
{
} 
```

所以只需**删除它**，用户将无法在不提供这些参数的情况下创建您的类实例对象。您也可以进行相同的设置无参数构造函数`private`或`protected`.

[实例构造函数（C# 编程指南）](http://msdn.microsoft.com/en-us/library/vstudio/k6sa6h87.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T09:34:01.987

您可以制作无参数构造函数`private`...

```
private WebCrawler()
{
} 
```

这意味着没有消费者/调用者有能力调用它。

然后，您只有一个可以使用的构造函数：

```
public WebCrawler(string something)
{
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T09:34:12.527

添加另一个接受参数的构造函数：

```
public WebCrawler(string someParameter)
{

} 
```

# c# - Xml 格式错误

> ID：15543765
> 
> 赞同：1
> 
> 时间：2013-03-21T09:34:02.373
> 
> 标签：c#, xml, web-services, serialization, xml-nil

我在我的 C# webservice 项目中遇到了一个可为空的属性问题。

```
public class Header
{
    [DataMember]
    public long Id { get; set; }
    [DataMember]
    public long SportId { get; set; }
    [DataMember]
    public long TournamentId { get; set; }
    [DataMember]
    public string TournamentName { get; set; }
    [DataMember]
    public string TournamentShortName { get; set; }
    [DataMember]
    public long StatusId { get; set; }
    [DataMember]
    public string StatusName { get; set; }
    [DataMember]
    public string StatusShortName { get; set; }
    [DataMember]
    public DateTime MatchDate { get; set; }
    [DataMember]
    public string MatchTime { get; set; }
    [DataMember]
    public DateTime? PeriodStartDate { get; set; }   

    [DataMember]
    public int? Quarter1HomeTeamScore { get; set; }
    [DataMember]
    public int? Quarter1AwayTeamScore { get; set; }
    [DataMember]
    public int Quarter2HomeTeamScore { get; set; }
    [DataMember]
    public int Quarter2AwayTeamScore { get; set; }
    [DataMember]
    public int Quarter3HomeTeamScore { get; set; }
    [DataMember]
    public int Quarter3AwayTeamScore { get; set; }
    [DataMember]
    public int Quarter4HomeTeamScore { get; set; }
    [DataMember]
    public int Quarter4AwayTeamScore { get; set; }

} 
```

这是序列化后的soap xml：

```
<LiveMatchList>
<Items>
    <ListMatch>
        <Header>
        <Quarter1HomeTeamScore xsi:nil="true"/>
        <Quarter1AwayTeamScore xsi:nil="true"/>
        <Quarter2HomeTeamScore xsi:nil="true"/>
        <Quarter2AwayTeamScore xsi:nil="true"/>
        <Quarter3HomeTeamScore xsi:nil="true"/>
        <Quarter3AwayTeamScore xsi:nil="true"/>
        <Quarter4HomeTeamScore xsi:nil="true"/>
        <Quarter4AwayTeamScore xsi:nil="true"/>
        <Id>138906</Id>
        <SportId>2</SportId>
        <TournamentId>8</TournamentId>
        <TournamentName> Eurocup</TournamentName>
        <TournamentShortName> AVK</TournamentShortName>
        <StatusId>12</StatusId>
        <StatusName> 1\. Periyot</StatusName>
        <StatusShortName> 1.P</StatusShortName>
        <MatchDate>2013-03-20T00:00:00</MatchDate>
        <MatchTime> 21:30</MatchTime>
        <PeriodStartDate xsi:nil="true"/>           
    </Header>
</ListMatch> 
```

我试图在[http://www.xmlgrid.net/](http://www.xmlgrid.net/)`xsi:nil = "true"`中查看 xml，但由于节点而无法查看。在另一个使用此 Web 服务的项目中，我在反序列化为对象时遇到了错误的 xml 格式错误。

如何忽略 null 属性？或者有没有其他方法可以解决这个问题？

我试过了 ：

```
[DataMember(EmitDefaultValue = false)]
public int? Quarter1HomeTeamScore { get; set; } 
```

和

```
[DataMember(EmitDefaultValue = false)]
public int Quarter1HomeTeamScore = 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:38:45.010

像这样添加[EmitDefaultValue](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datamemberattribute.emitdefaultvalue.aspx)属性：

```
[DataMember(EmitDefaultValue = false)] 
```

**更新**

尝试**IsRequired**属性，例如

```
 [DataMember(IsRequired = false)] 
```

正如您评论的那样，它对您不起作用，请查看

[如何从 wcf 中的响应中删除 null DataMember 属性](https://stackoverflow.com/questions/2118690/how-to-remove-null-datamember-properties-from-the-response-in-wcf)

# php - php模拟用户

> ID：15543769
> 
> 赞同：1
> 
> 时间：2013-03-21T09:34:15.193
> 
> 标签：php, linux, shell-exec

我想要做的是`root`从网页以系统用户身份运行 shell 命令。

根据我的研究，没有办法在 Linux 上用 PHP 模拟系统用户（准确地说是 CentOS 6.3 和 PHP 5.4.13）。

到目前为止，我已经安装`sudo`并添加了一行`apache ALL=(ALL) :NOPASSWD ALL`（用于测试）到`/etc/sudoers`. 然后，我在网站的根目录中创建了一个简单的 php 文件：

```
<?php shell_exec('sudo -u root touch somefile'); ?> 
```

但是，如果我运行，什么也不会发生：

```
<?php shell_exec('whoami'); ?> 
```

结果我得到`apache`了，所以我知道至少 shell_exec 正在工作。

如果我从 cli 尝试`su apache`，我会得到`This account is currently not available.`我认为是因为 apache 定义了 nologin（？）`apache:x:48:48:Apache:/var/www:/sbin/nologin`

那么，能够从 php 以 root 身份运行命令的正确方法是什么？

作为我试图通过以 root 身份运行来实现的示例，我想`/etc/ssl/certs/https`使用从 Web 控制面板调用的以下命令行添加证书：

```
openssl req -new -nodes -x509 -days 3650 \
 -subj "/emailAddress=${ssl_email}/CN=ca.${domain_name}/OU=${ssl_organisational_unit}/O=${ssl_organisation}/L=${ssl_location}/ST=${ssl_state}/C=${ssl_country}" \
 -keyout "${certroot}/cacert.pem" -out "${certroot}/cacert.pem" 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:45:43.617

啊哈！！！知道了！

在我写完之后不久，我[在 php exec() 中找到了 sudo](https://stackoverflow.com/questions/3173201/sudo-in-php-exec)

`Defaults requiretty`答案是注释掉`/etc/sudoers`

# c - Windows API STARTUPINFO 被破坏？

> ID：15543778
> 
> 赞同：2
> 
> 时间：2013-03-21T09:34:43.333
> 
> 标签：c, winapi, process

创建一个进程并等待它完成后，它的 STARTUPINFO 是否仍然可用或已被破坏？

```
STARTUPINFO si;

bRes = CreateProcess(NULL, command, NULL, NULL, TRUE, 0, NULL, NULL, &si, &pi);

dwRes = WaitForSingleObject(pi.hProcess, INFINITE); 
```

在此之后是否`si`被修改/销毁或保持不变？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:02:57.840

Windows 为新进程创建启动信息结构的副本。这必须发生，因为新进程具有全新的地址空间并且看不到您的结构。

现在，你的结构会发生什么？好吧，[文档](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms682425.aspx)有答案。参数注释如下：

```
_In_ LPSTARTUPINFO lpStartupInfo 
```

这`_In_`意味着结构的内容不会被调用修改`CreateProcess`。因此，您可以确信在`CreateProcess`返回时，启动信息结构没有被修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:46:38.937

Windows 创建的 STARTUPINFO的**副本被销毁。**但是您提供给 CreateProcess 函数的结构仍然存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T10:08:22.013

如果你像以前那样声明它

```
STARTUPINFO si; 
```

然后，当声明它的程序部分完成时，它被 C 销毁（称为“超出范围”）。例如：

```
void myfunct() {
  STARTUPINFO si1;
  if (condition) {
    STARTUPINFO si2;
    //...
  } //si2 destroyed here
  //...
} //si1 destroyed here 
```

即使`CreateProcess()`函数想要保留 si1 或 si2，它也不能。因为无论你做什么，它们都会在那个时候被摧毁。

现在，如果您像这样创建 si：

```
STARTUPINFO *si = malloc(sizeof(STARTUPINFO)); 
```

那么它只会在你明确调用时被销毁

```
free(si); 
```

一些 API 函数需要你给他们一些他们可以保留的东西。对于这些函数，您必须在一秒钟或更复杂的方式中分配参数，并且它们会在文档中告诉您何时必须在稍后销毁它。

但是大多数 API 函数只是复制您传递给它们的任何内容并保留源代码，因此可以将指针传递给以第一种方式声明的结构。

请注意，通常“将某些内容传递给 API 并依赖 API 销毁它”是不合适的。您调用的应用程序和 API 函数很可能使用不同的内存管理器。在一个中分配的东西不能在另一个中释放。

因此，大多数情况下，此类 API 会希望您通过调用某些特定函数来分配数据，或者（更常见）稍后自己删除数据。

```
MYPARAM *p = malloc(sizeof(MYPARAM));
APIOpen(p);
//...much later
APIClose(p);
//It's now safe to free p
free(p); 
```

# android - QEMU 中的 Android 映像

> ID：15543779
> 
> 赞同：2
> 
> 时间：2013-03-21T09:34:43.563
> 
> 标签：android, qemu

如何使用我从源`qemu`构建的 android 图像启动？`Android`

Qemu 返回我的映像不是可引导磁盘。

步骤：
1\. 我已经下载并构建了`qemu`
2\. 我已经下载并构建了`Android image`
3\. 尝试使用以下命令启动 qemu： `qemu-system-i386 system.img`

我有以下错误：

```
Booting from hard Disk
Boot failed: not ad bootable disk 
```

与`-hdd`选项相同的错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-06T19:59:37.400

您似乎使用了错误的架构。改用 qemu-system-arm。

# c# - .NET 3.5CF WebRequest 到 Slim 框架

> ID：15543781
> 
> 赞同：3
> 
> 时间：2013-03-21T09:34:52.007
> 
> 标签：c#, php, rest, .net-3.5, slim

我正在.NET 3.5 Compact Framework 中编写移动应用程序，并尝试向 PHP Slim Framework 页面发出 GET 请求。如果我尝试从本地计算机上的 Web 浏览器访问该页面，它可以工作，但如果我尝试从移动设备 C# 应用程序*或*移动设备的 Web 浏览器访问它，我会得到 HTTP 404。我制作了一个标准 PHP 页面显示当前时间并且适用于上述所有三个，因此将问题专门隔离到 Slim 页面。我还查看了 xampp 中的 access.log，如下所示：

```
[20/Mar/2013:17:07:38 +0000] "GET /SlimTest/ HTTP/1.1" 200 21 "-" "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 2.0.50727; .NET CLR 3.0.04506.648; .NET CLR 3.5.21022)"
[20/Mar/2013:17:09:37 +0000] "GET http://10.0.2.15/SlimTest/ HTTP/1.1" 404 523 "-" "-" 
```

第一个来自本地机器，第二个来自手持设备，如您所见，第一个请求成功完成，后者返回 404。

Slim PHP 代码如下所示：

```
$app->get('/', function () {
    echo "This is the get route";    
}); 
```

C# 看起来像这样：

```
string webResponse = "";
try
{
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://10.0.2.15/SlimTest/");
    WebResponse response = request.GetResponse();
    using (StreamReader streamReader = new StreamReader(response.GetResponseStream()))
    {
        webResponse = streamReader.ReadToEnd();
    }
}
catch (Exception ex)
{
    MessageBox.Show(ex.Message);
} 
```

重要的是要注意，我不是网络开发人员，所以如果这是显而易见的事情，我深表歉意。

速度也是这个项目的本质，所以即使有人可以建议一个替代的 RESTful PHP 框架，它已被证明对他们有用，那么我会非常感激它。

最后，为了快速了解一下，这个项目将有一个基于 Web 的应用程序和一个与 Web 服务通信的手持移动应用程序。我正在尝试使用 slim 用 PHP 编写 Web 服务，以便它可以托管在 Linux 机器上以降低成本。同样，如果有人有任何建议/替代方案，那么我将同样感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T08:45:57.897

*   您是直接从 Visual Studio 还是从移动设备运行您的移动应用程序？
*   您确定您的移动设备可以访问正确的网络 (10.0.2.x) 吗？
*   不用担心 Slim，它完全符合您的需求

# c++ - 在 python 中嵌入 c++ 代码会使你的 python 应用程序更快吗？

> ID：15543783
> 
> 赞同：11
> 
> 时间：2013-03-21T09:34:58.947
> 
> 标签：c++, python, c, ctypes, embedding

使用 ctypes、boost.python 等在 python 中嵌入 c++ 代码是否会使你的 python 应用程序更快？

假设我正在 pygtk 中创建应用程序，并且我需要一些需要快速的功能。因此，如果我在我的应用程序中使用 c++ 来完成某些任务，它会有用吗？

还有哪些其他选项可以让 python 代码更快？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T09:52:29.757

用 C++ 重写代码的性能关键部分可能是一种选择。要有效地做到这一点，您首先需要了解瓶颈在哪里。最好的方法可能是先用纯 Python 编写所有内容，然后再进行分析。

另一种选择可能是使用[`PyPy`](http://pypy.org/).

最后，如果您发现瓶颈是数值计算，那么[`NumPy`](http://www.numpy.org/)值得一看。

值得注意的是，例如，如果您的代码是 I/O 绑定的，那么上述选项都不会有太大帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T09:58:28.730

看情况，没有确定的答案。如果你用 C++ 编写糟糕的代码，它可能比编写好的 Python 代码还要慢。

假设您可以编写高质量的 C++ 代码，您可以预期性能关键部分的加速最高可达 20 倍。

正如另一个答案所说，NumPy 是解决数值瓶颈的好选择（如果您考虑矩阵运算而不是循环！）；SciPy 带有 weaver，它允许您嵌入内联 C++ 和其他好东西。

# php - php javascript json 解析转义字符

> ID：15543786
> 
> 赞同：0
> 
> 时间：2013-03-21T09:35:17.120
> 
> 标签：php, javascript, json, mustache

我目前有一个网页需要使用 javascript 来解析 php 中的变量。
我做这样的事情：

```
data.notices = JSON.parse('<?php echo json_encode($notices) ?>'); 
```

但是，当 $notices 变量中有单引号或双引号时，javascript 控制台会返回错误。

如何正确获取变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:44:53.500

`$a='b'`将转换为`"b"`（注意引号）`json_encode`

只需写`JSON.parse(<?php echo json_encode($notices) ?>);`（删除`'`）就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T09:41:07.080

此代码不返回错误

```
<?
$notices = array('sad'=>'asd as" asd', 'asd"sdf '=>'asdasd" \' asd ads');
?>
<script>
data = new Object();
data.notices = JSON.parse('<?php echo addslashes(json_encode($notices)) ?>');
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T09:57:51.123

我发现这是由于我在插入数据库之前没有转义字符引起的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T10:01:36.797

你是一个额外的操作。如果你想将消息作为 javascript 变量，你可以直接得到

```
data.notices = <?php echo json_encode($notices) ?>;
// and access like this
// data.notices[0] or data.notices['alert'] 
```

# pattern-matching - Ocaml 中的嵌套模式匹配

> ID：15543788
> 
> 赞同：4
> 
> 时间：2013-03-21T09:35:18.023
> 
> 标签：pattern-matching, ocaml, unused-variables

我想在 Ocaml 中编写一个函数，给定一个四元组和一个四元组 (x,y,z,f)，返回一个包含元组 (x',y',z',g) 的列表，使得 x = x' 或 y=y' 或 z = z' （这些是整数）。这是我的第一次尝试

```
let rec constrained_by c list =
   match s with
   | []-> []
   | hd :: tl ->
 begin
   let Cell(x,y,r,_)=  c in  (*warning*)
   begin
     match hd with 
     | Cell(x,_,_,Some(_))-> hd::constrained_by c tl
     | Cell(_, y, _,Some(_)) -> hd::constrained_by c tl
     | Cell(_, _, r,Some(_)) -> hd::constrained_by c tl
     | _ -> constrained_by c tl
   end 
 end 
```

问题：当它被调用时，无论我们匹配什么四元组，它都会返回原始列表。*此外，问题是它返回警告，即行（警告*）处的 x,y,r未使用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T10:29:00.117

正如 Gian 所说，警卫可以解决您的问题。好消息是代码可以更接近您的书面规范：

```
let rec constrained_by ((x,y,z,_) as c) list = match list with
   | [] -> []
   | ((x',y',z',_) as c') :: tl when x = x' or y=y' or z=z' ->
       c' :: constrained_by c tl
    | hd :: tl -> constrained_by c tl
;; 
```

小测试：

```
let _ = constrained_by (1,2,3,"foo") [1,0,0,0; 0,2,0,0; 0,0,3,0; 0,0,0,0];;
- : (int * int * int * int) list = [(1, 0, 0, 0); (0, 2, 0, 0); (0, 0, 3, 0)] 
```

请注意，您还可以使用`List.filter`：

```
let constrained_by (x,y,z,_) = List.filter (fun (x',y',z',_) -> x = x' or y=y' or z=z');; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T09:46:15.683

我认为您在那里滥用模式匹配。像这样的模式`Cell(x,_,_,Some(_))`将匹配任何东西，因为它正在重新绑定`x`。范围内有变量的事实`x`并不意味着它会坚持认为该元组元素具有与 相同的值`x`。您的三个模式在它们匹配的结果上是完全等价的。

如果这是您想要完成任务的方式，您可能需要考虑使用警卫。

# c# - 鼠标悬停时更改按钮图像

> ID：15543790
> 
> 赞同：1
> 
> 时间：2013-03-21T09:35:18.803
> 
> 标签：c#, .net, wpf

我有以下 XAML 代码：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="480" Width="640" ResizeMode="NoResize">
    <Window.Background>
        <SolidColorBrush x:Name="WindowBrush" Color="#202020" />
    </Window.Background>
    <Window.Resources>
        <Style TargetType="Button">
            <Setter Property="BorderBrush" Value="Transparent" />
            <Setter Property="Background">
                <Setter.Value>
                    <ImageBrush ImageSource="Resources/button.png"/>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background">
                        <Setter.Value>
                            <ImageBrush ImageSource="Resources/button-hover.png"/>
                        </Setter.Value>
                    </Setter>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="285*"/>
            <ColumnDefinition Width="349*"/>
        </Grid.ColumnDefinitions>
        <Button Content="Button" HorizontalAlignment="Left" Height="28" Margin="21,20,0,0" VerticalAlignment="Top" Width="79" BorderThickness="1"/>
    </Grid>
</Window> 
```

当然，我的项目中有两张图片 -`button.png`和`button-hover.png`. 但是当光标在我的按钮上时，它会应用默认的 Windows 样式，而不是我的`button-hover.png`图像。我的错误在哪里？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T09:40:50.240

这是一个示例样式：

```
<Style TargetType="Button">
<Setter Property="Template">
    <Setter.Value>
        <ControlTemplate TargetType="Button">
            <Grid>
                <VisualStateManager.VisualStateGroups>
                    <VisualStateGroup x:Name="CommonStates">
                        <VisualState x:Name="Normal"/>
                        <VisualState x:Name="Disabled"/>
                        <VisualState x:Name="MouseOver">
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetName="mouseOverBackgroundImage" Storyboard.TargetProperty="Opacity" Duration="0:0:0.1" To="1"/>
                            </Storyboard>
                        </VisualState>
                        <VisualState x:Name="Pressed">
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetName="pressedBackgroundImage" Storyboard.TargetProperty="Opacity" Duration="0:0:0.1" To="1"/>
                            </Storyboard>
                        </VisualState>
                    </VisualStateGroup>
                </VisualStateManager.VisualStateGroups>
                <Image Name="normalBackgroundImage" Source="{TemplateBinding local:BackgroundImages.NormalBackgroundImage}"/>
                <Image Name="mouseOverBackgroundImage" Source="{TemplateBinding local:BackgroundImages.MouseOverBackgroundImage}" Opacity="0"/>
                <Image Name="pressedBackgroundImage" Source="{TemplateBinding local:BackgroundImages.PressedBackgroundImage}" Opacity="0"/>
                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
            </Grid>
        </ControlTemplate>
    </Setter.Value>
</Setter> 
```

在带有附加属性集的 Button 中使用：

```
<Button local:BackgroundImages.NormalBackgroundImage="C:\Users\Public\Pictures\Sample Pictures\Tulips.jpg"
    local:BackgroundImages.MouseOverBackgroundImage="C:\Users\Public\Pictures\Sample Pictures\Desert.jpg"
    local:BackgroundImages.PressedBackgroundImage="C:\Users\Public\Pictures\Sample Pictures\Penguins.jpg"
    Content="Hello"/> 
```

最后是那些附加属性的定义：

```
public static class BackgroundImages
{
public static readonly DependencyProperty NormalBackgroundImageProperty =
    DependencyProperty.RegisterAttached("NormalBackgroundImage", typeof(ImageSource), typeof(BackgroundImages));

public static readonly DependencyProperty MouseOverBackgroundImageProperty =
    DependencyProperty.RegisterAttached("MouseOverBackgroundImage", typeof(ImageSource), typeof(BackgroundImages));

public static readonly DependencyProperty PressedBackgroundImageProperty =
    DependencyProperty.RegisterAttached("PressedBackgroundImage", typeof(ImageSource), typeof(BackgroundImages));

public static ImageSource GetNormalBackgroundImage(DependencyObject obj)
{
    return (ImageSource)obj.GetValue(NormalBackgroundImageProperty);
}

public static void SetNormalBackgroundImage(DependencyObject obj, ImageSource value)
{
    obj.SetValue(NormalBackgroundImageProperty, value);
}

public static ImageSource GetMouseOverBackgroundImage(DependencyObject obj)
{
    return (ImageSource)obj.GetValue(MouseOverBackgroundImageProperty);
}

public static void SetMouseOverBackgroundImage(DependencyObject obj, ImageSource value)
{
    obj.SetValue(MouseOverBackgroundImageProperty, value);
}

public static ImageSource GetPressedBackgroundImage(DependencyObject obj)
{
    return (ImageSource)obj.GetValue(PressedBackgroundImageProperty);
}

public static void SetPressedBackgroundImage(DependencyObject obj, ImageSource value)
{
    obj.SetValue(PressedBackgroundImageProperty, value);
}
} 
```

对于触发器，尝试这样的事情。我不确定：（只需将图像添加到项目中的 /Images 文件夹）

```
<ControlTemplate TargetType="Button">
<Border Name="border" BorderThickness="0" 
            Background="Transparent">
      <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
</Border>
<ControlTemplate.Triggers>
    <Trigger Property="IsMouseOver" Value="True">
        <Setter Property="Background">
           <Setter.Value>
               <ImageBrush ImageSource="/MyProjectName;component/Images/MyImage.jpg" />
           </Setter.Value>
        </Setter>
    </Trigger>
</ControlTemplate.Triggers> 
```

您可以为 Normal、MouseOver 和 Pressed（可能更多）状态的背景图像定义附加属性。您可以将这些附加属性用于控件模板中单独 Image 控件的 Sourceproperty，并在 VisualState 更改时修改例如 Image 的 Opacity。

# javascript - 将 jquery 插件配置存储在数据中是一种好习惯吗？

> ID：15543795
> 
> 赞同：12
> 
> 时间：2013-03-21T09:35:30.557
> 
> 标签：javascript, jquery, plugins

我想用配置创建 jQuery 插件（例如 plugin `myplugin`）。比调用`$(elem).myplugin(config);`之后，我想从这个插件调用方法，就像`$(elem).myplugin().method()`已经存储的配置一样。

我的报价是这样的：

```
(function($) {
    $.fn.myplugin = function(options) { 
        var $this = $(this);

        var getOptions = function() {
            return $this.data('myplugin');
        };

        var initOptions = function(opt) {
            $this.data('myplugin', opt);
        };

        var setOption = function(key, value) {
            $this.data('myplugin')[key] = value;
        }

        var updateBorderWidth = function() {  
            $this.css('border-width', 
                      getOptions().borderWidth * getOptions().coeficient);
        };

        var init = function(opt) {
            initOptions(opt);
            updateBorderWidth();
        }        

        function changeBorder(width) {            
            setOption('borderWidth', width)
            updateBorderWidth();
        }

        if(options) {
            init(options);            
        }        

        return {
            changeBorder : changeBorder
        };
    }        
})(jQuery); 
```

和用法：

```
 $(function() {
     var item1 = $('#test1').myplugin({ coeficient: 1, borderWidth: 1 });
     var item1 = $('#test2').myplugin({ coeficient: 2, borderWidth: 1 });

     $('#btn').click(updateBorder);     
});

function updateBorder() {
    $('#test1').myplugin().changeBorder($('#inpt').val());
    $('#test2').myplugin().changeBorder($('#inpt').val());
} 
```

示例：http: [//jsfiddle.net/inser/zQumX/4/](http://jsfiddle.net/inser/zQumX/4/)

我的问题：这样做是一个好习惯吗？

可能是不正确的方法。你能提供更好的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T19:25:08.783

编辑：

[在jQuery 插件模板](https://stackoverflow.com/questions/11449538/jquery-plugin-template)上搜索线程后，我发现这些[Boilerplate 模板](https://github.com/jquery-boilerplate/jquery-boilerplate)（更新）比我在下面提供的更通用和广泛的设计。最终，您选择什么取决于您的需求。Boilerplate 模板涵盖的用例比我提供的要多，但根据要求，每个模板都有自己的优点和注意事项。

* * *

通常 jQuery 插件在将值传递给它们时返回一个 jQuery 对象，如下所示：

```
.wrap(html) // returns a jQuery object 
```

或者在没有传入参数时返回一个值

```
.width() // returns a value

.height() // also returns a value 
```

* * *

要阅读您的示例调用约定：

> `$('#test1').myplugin().changeBorder($('#inpt').val());`

对于任何使用 jQuery 的开发人员来说，似乎两个单独的插件正在串联使用，第`.myplugin()`一个假设将返回一个 jQuery 对象，并在 上执行了一些默认的 DOM 操作`#test1`，然后`.changeBorder($('#inpt').val())`也可能返回一个 jQuery 对象但是在您的示例中，整行没有分配给变量，因此不使用任何返回值 - 再次看起来像 DOM 操作。但是您的设计不遵循我所描述的标准调用约定，因此如果他们不熟悉您的插件，任何查看您的代码的人可能会对它的实际作用感到困惑。

* * *

过去，我考虑过与您所描述的问题和用例类似的问题和用例，我喜欢有一个方便的约定来调用与插件关联的单独函数的想法。选择完全取决于你——它是你的插件，你需要根据谁将使用它来决定，但我决定的方式是简单地传递函数的名称和它的参数作为单独的`.myplugin(name, parameters)`或在对象中作为`.myplugin(object)`.

我通常这样做：

```
(function($) {
    $.fn.myplugin = function(fn, o) { // both fn and o are [optional]
        return this.each(function(){ // each() allows you to keep internal data separate for each DOM object that's being manipulated in case the jQuery object (from the original selector that generated this jQuery) is being referenced for later use
            var $this = $(this); // in case $this is referenced in the short cuts

            // short cut methods
            if(fn==="method1") {
                if ($this.data("method1"))  // if not initialized method invocation fails
                    $this.data("method1")() // the () invokes the method passing user options
            } else if(fn==="method2") {
                if ($this.data("method2"))
                    $this.data("method2")()
            } else if(fn==="method3") {
                if ($this.data("method3"))
                    $this.data("method3")(o) // passing the user options to the method
            } else if(fn==="destroy") {
                if ($this.data("destroy"))
                    $this.data("destroy")()
            }
            // continue with initial configuration

            var _data1,
                _data2,
                _default = { // contains all default parameters for any functions that may be called
                    param1: "value #1",
                    param2: "value #2",
                },
                _options = {
                    param1: (o===undefined) ? _default.param1 : (o.param1===undefined) ? _default.param1 : o.param1,
                    param2: (o===undefined) ? _default.param2 : (o.param2===undefined) ? _default.param2 : o.param2,

                }
                method1 = function(){
                    // do something that requires no parameters
                    return;
                },
                method2 = function(){
                    // do some other thing that requires no parameters
                    return;
                },
                method3 = function(){
                    // does something with param1
                    // _options can be reset from the user options parameter - (o) - from within any of these methods as is done above
                    return;
                },
                initialize = function(){
                    // may or may not use data1, data2, param1 and param2
                    $this
                        .data("method1", method1)
                        .data("method2", method2)
                        .data("method3", method3)
                        .data("destroy", destroy);
                },
                destroy = function(){
                    // be sure to unbind any events that were bound in initialize(), then:
                    $this
                        .removeData("method1", method1)
                        .removeData("method2", method2)
                        .removeData("method3", method3)
                        .removeData("destroy", destroy);
                }
            initialize();
        }) // end of each()
    } // end of function        
})(jQuery); 
```

* * *

以及用法：

```
var $test = $('#test').myplugin(false, {param1: 'first value', param2: 'second value'}); // initializes the object
$test.myplugin('method3', {param1: 'some new value', param2: 'second new value'}); // change some values (method invocation with params) 
```

或者你可以说：

```
$('#test').myplugin(); // assume defaults and initialize the selector 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T10:51:14.613

通过数据属性将参数传递给 javascript 是一种很好的模式，因为它有效地将 Javascript 代码和服务器端代码解耦。它也不会对 Javascript 代码的可测试性产生负面影响，这是解决该问题的许多其他方法的副作用。

我想说这是服务器端代码与 Web 应用程序中的客户端代码进行通信的最佳方式。

# git - Git 不同分支中的两个竞争提交

> ID：15543798
> 
> 赞同：1
> 
> 时间：2013-03-21T09:35:35.813
> 
> 标签：git

我的情况是：

1.  我正在准备修复一个问题。
2.  我确实将请求拉到上游远程。
3.  另一个人正在准备修复一个问题。
4.  另一个人正在做更好的修复；他们的拉取请求已被接受。
5.  我的拉取请求被拒绝。

我现在能做的最好的事情是让我的起源回到远程头部？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:08:03.607

您只需要获取原点，并将当前分支重新设置在它之上。
这可能就足够了。

```
git pull --rebase upstream 
```

但是，您可能想要签出另一个分支，而不是您用于修复的分支，因为重新应用已被接受的修复的提交是没有意义的（来自不同拉取请求的不同提交）。

这假设您在本地 repo 中声明了一个名为“upstream”的远程 repo 地址，指的是您分叉的原始 repo。
在更新的上游基础上重新调整正在进行的工作后，您可以推回原点（您的分叉）。

![在 GitHub 上分叉](../Images/ef055344a54e6d5fd9afba5a060c9456.png)

# iphone - 我如何在超类目标 c 中获取子类 UIButton 标题

> ID：15543803
> 
> 赞同：0
> 
> 时间：2013-03-21T09:35:47.200
> 
> 标签：iphone, ios, objective-c, ipad, inheritance

这是我的代码。

```
@interface MasterViewController : UIViewController{

}
-(void) initCallService;
@end

@implementation MasterViewController
-(void) initCallService{

}
@end 
```

上述子类的其他类

```
@interface DetailViewController : MasterViewController{
    IBOutlet UIButton *btn;
}
@end

@implementation DetailViewController
-(void) btntitle_changed{
    [btn setTitle:[self.arr objectAtIndex:recordIndex] forState:UIControlStateNormal];
}
@end 
```

每当类`btntitle_changed`方法中的标题更改时，我都需要`DetailViewController`将其发送到`MasterViewController`'s`initCallService`方法。我不知道如何通过类层次结构实现这一点。任何人都可以指导我吗？有效的答案将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:48:17.823

可以通过设置协议

在你的 DetailViewController.h

```
 @protocol TitleChange <NSObject>
          -(void)initCallService:(NSString *)title;
         @end 
```

并将属性设置为

```
 @property(nonatomic,assign) id <TitleChange> delegate;

      In DetailViewController.m

     -(void) btntitle_changed
       {
      [btn setTitle:[self.arr objectAtIndex:recordIndex] forState:UIControlStateNormal];
      [self.delegate initCallservice: btn.title]
       } 
```

在您的 MasterViewContoller.h 添加 TitleChange 委托为

```
 @interface MasterViewController : UIViewController<TitleChange>{

    } 
```

在您启动 DetailViewController 时的 MasterViewContoller.m

```
 DetailViewController *vc =[[DetailViewController alloc] :@"DetailViewController"   bundle:nil];
    vc.delegate=self
    [self presentViewController:vc animated:YES completion:nil]; 
```

这就是你的协议和委托的方式，它被广泛用于传递数据，只需了解它的基础知识

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:48:57.577

只需将您更改`-(void)initCallService`为`-(void)initCallServiceWithButtonTitle:(NSSTring*)title`. 然后改变`btntitle_changed`函数如下：

```
-(void) btntitle_changed{
    [btn setTitle:[self.arr objectAtIndex:recordIndex] forState:UIControlStateNormal];
    [super initCallServiceWithButtonTitle:btn.title];
}

-(void)initCallServiceWithButtonTitle:(NSString*)title{
 //do whatever you want with 'title'
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T09:47:05.527

你需要 MasterViewController 中的一个属性说`NSString *buttonTitle`

```
-(void) btntitle_changed{
    [btn setTitle:[self.arr objectAtIndex:recordIndex] forState:UIControlStateNormal];
    [super setButtonTitle:btn.title];
} 
```

# javascript - Javascript普通函数和函数对象的区别

> ID：15543804
> 
> 赞同：0
> 
> 时间：2013-03-21T09:35:50.323
> 
> 标签：javascript, jquery, prototypal-inheritance

在 Javascript 中，创建类（或对象）的方式是使用；

```
function MyObj()
{
    this.someVar = "xyz";
    this.someMethod = function(){}
} 
```

我的简单问题是这个函数与普通的 JavaScript 函数有什么不同......比如说一个添加 2 个数字的函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T09:38:16.353

功能不一样。不同之处在于您如何称呼它们。

例如，它们具有相同的效果：

```
function MyObj(){
    this.someVar = "xyz";
    this.someMethod = function(){
        console.log(this.someVar);
    }
}
var obj = new MyObj();
obj.someMethod(); 
```

和

```
function someMethod(){
    console.log(this.someVar);
}
function MyObj(){
    this.someVar = "xyz";
}
var obj = new MyObj();
someMethod.call(obj); 
```

和

```
function someMethod(){
    console.log(this.someVar);
}
function MyObj(){
    this.someVar = "xyz";
}
var obj = new MyObj();
obj.f = someMethod;
obj.f(); 
```

当你标记你的问题[prototypal-inheritance](/questions/tagged/prototypal-inheritance "显示标记为“原型继承”的问题")时，我将通过说构建你的函数的最佳方法来完成这个：

```
function MyObj(){
    this.someVar = "xyz";
}
MyObj.prototype.someMethod = function(){
    console.log(this.someVar);
}
var obj = new MyObj();
obj.someMethod(); 
```

这样，所有实例`MyObj`共享相同的功能，因此更轻。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T09:43:02.943

区别不在于函数的内容，而在于你如何调用它。

如果您调用`var myObj = new MyObj()`，则会创建一个新对象。按照惯例，打算像这样使用的函数以大写字母开头。

如果您要在没有`new`关键字的情况下调用函数，那么函数内部会发生完全相同的事情，除了`this`它将是全局对象而不是新创建的对象。这在简单的“添加 2 个数字”函数中无关紧要，但如果您忘记它可能会导致非常奇怪的错误。

确保忘记调用无关紧要的一种方法`new`是将其放在函数的顶部：

```
function MyObj() {
     if (! (this instanceof MyObj)) {
         return new MyObj();
     }
     ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T09:46:22.707

没有任何。重要的是`new`关键字的使用。

看这里：

```
function Fun(){
    this.method = function(){
        return "Bar";
    }
    return "Foo";
}

var value = Fun(); // assigns the return value of Fun() to value
alert(value); // "Foo"
// alert(value.method()); // won't work because "Foo".method doesn't exist

var instance = new Fun(); // assigns a new instance of Fun() to instance
alert(instance); // [object Object]
alert(instance.method()); // "Bar" 
```

# java - 当我从 oracle DB 读取并将检索到的数字存储在字符串中时，为什么值会有所不同。

> ID：15543806
> 
> 赞同：1
> 
> 时间：2013-03-21T09:35:54.870
> 
> 标签：java, oracle, jdbc

为什么当我从 oracle DB 读取列值（在 DB 中存储为浮点数据类型）并将检索到的数字存储在字符串中时，值会有所不同。例如。该列存储 .0286949901125447，但是当使用 Java JDBCTemplate 从数据库中读取它时，它会输出 .028694990112544703。我正在使用 Oracle 10.2。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:39:18.027

很难给你一个准确的答案，因为你没有与我们分享任何代码。但是我相信 DB 和 string 的值是相同的。只需您用于查看 DB 中数据的工具格式化值并可能删除尾部，因此您只是看不到最后 2 个字符`02`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:38:37.877

查看本指南： http: [//floating-point-gui.de/basic/](http://floating-point-gui.de/basic/)

在 java 中使用 BigDecimal 来避免舍入错误。

# jquery-ui - jQuery UI 对话框：单击标题栏（包括关闭按钮）使整个对话框向上滚动

> ID：15543807
> 
> 赞同：3
> 
> 时间：2013-03-21T09:36:02.480
> 
> 标签：jquery-ui, jquery-ui-dialog

每次我单击 jQuery UI 对话框标题栏或关闭按钮时，整个对话框首先会滚动到屏幕顶部，而不会触发任何 ui 事件。然后我必须再次单击才能触发关闭事件。

这是我的代码：

```
var dialog = $(selector).dialog(

    {
        autoOpen : true,
        modal : true,
        title : title,
        overlay : {
            opacity : "0.1",
            background : "black"
        },
        width : dWidth,
        height : dHeight,
        autoResize: false,
        resizable : true,
        effect: 'fade',
        zIndex: 100,
        close: function(ev, ui) {
            if(callback){
                callback();
            }
        } 
```

我试图删除所有属性，但仍然遇到错误。我在 jQuery UI 1.8.23 上，但同样的错误出现在 1.9.1 上。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:57:16.133

我认为您在关闭时遇到了一些问题：选项。尝试删除或编辑它，看看发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T23:57:46.733

尝试把宽度：dWidth + 'px'，

还尝试在回调中删除分号。

```
close: function(ev, ui) {
        if(callback){
            callback()
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-15T00:35:00.760

这是一个错误：[http](http://bugs.jqueryui.com/ticket/3623) ://bugs.jqueryui.com/ticket/3623 升级你的 jqueryui

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-27T10:36:03.847

这在 IE 中发生在我身上，不仅仅是单击按钮时，而是向下滚动后的任何单击。解决方案是更新 jQuery UI [http://code.jquery.com/ui/1.11.4/jquery-ui.js](http://code.jquery.com/ui/1.11.4/jquery-ui.js)

# c# - 如何在运行时创建插入新生成的 HTML 的新控件？

> ID：15543810
> 
> 赞同：0
> 
> 时间：2013-03-21T09:36:09.350
> 
> 标签：c#, asp.net, html

我对 ASP.NET 还是很陌生，但我发现自己陷入了一个不应该成为太大问题的问题。

现在我有一个包含这个 div 的页面：

```
<div id="EditSurveySetID" class="EditSurveySet" runat="server">
        <div class="cell">
                <div class="cell_title">Survey Set(s)</div>
                <table id="surveySetTableData" runat="server" style="margin: 10px;">
                    <tbody>
                        <tr>
                            <td class="form_labelSurveySet" style="width: 330px;">
                                <input type="button" value="-"> Survey Set 1: 
                                <input id="EditSurveySetTitle" runat="server" style="width: 200px;" value="Netherlands">
                            </td>
                            <td>
                                <asp:DropDownList ID="DDLSurveySetSurveys" runat="server">
                                </asp:DropDownList>
                                <asp:Button ID="addAdditionalDDLColumns" runat="server" Text="+" />
                            </td>
                        </tr>
                   </tbody>
            </table>
        </div>
    </div> 
```

看起来像这样： ![在此处输入图像描述](../Images/bd412a2cb5e0f902b646cacb03936bc3.png)

我希望用户按下 + 按钮（addAdditionalDDLColumns）。按下该按钮后，我希望出现一个新的表格行，其中包含相同的控件，以便在运行时，此时它看起来像这样：

```
<div id="EditSurveySetID" class="EditSurveySet" runat="server">
        <div class="cell">
                <div class="cell_title">Survey Set(s)</div>
                <table id="surveySetTableData" runat="server" style="margin: 10px;">
                    <tbody>
                        <tr>
                            <td class="form_labelSurveySet" style="width: 330px;">
                                <input type="button" value="-"> Survey Set 1: 
                                <input id="EditSurveySetTitle" runat="server" style="width: 200px;" value="Netherlands">
                            </td>
                            <td>
                                <asp:DropDownList ID="DDLSurveySetSurveys" runat="server">
                                </asp:DropDownList>
                                <asp:Button ID="addAdditionalDDLColumns" runat="server" Text="+" />
                            </td>
                        </tr>

                        <tr>
                            <td class="form_labelSurveySet" style="width: 330px;">
                                <input type="button" value="-"> Survey Set 2: 
                                <input id="Text1" runat="server" style="width: 200px;" value="Netherlands">
                                </td>
                            <td>
                                <asp:DropDownList ID="DropDownList1" runat="server">
                                </asp:DropDownList>
                                <asp:Button ID="Button1" runat="server" Text="+" />
                            </td>
                        </tr>
                                       </tbody>
            </table>
        </div>
    </div> 
```

或在图像中： ![在此处输入图像描述](../Images/6f721f17777232c85b78c280efc48422.png) 所以我看到的方式是，在 + 按钮单击事件上生成了一些新的 HTML 代码，以及一些控件（下拉列表、另一个具有相同功能的 + 按钮（？），可能是文本字段而不是输入字段）。

现在想到的问题：

*   如何生成将创建新表格行的 HTML 代码
*   如何控制生成的 HTML 代码的添加位置（在这种情况下，它应该在现有的
*   [模糊/抽象问题]最终，用户可能拥有 1 到无限的“调查集”。如果用户要创建 4 个调查集，他最终会按下保存按钮或类似的东西。按下此按钮后，我将保存属于 4 个调查集的 4 个下拉列表的 4 个选定值。我将如何调用每个单独的下拉列表以获取数据？我认为，我实际上要问的是，是否可以在我前两个问题的自动生成的下拉列表创建时以编程方式分配一个 ID。

我该怎么做呢？非常欢迎任何建议和提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:46:52.693

我建议你使用[GridView](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.aspx)。
它提供了添加行的选项。它提供了一个 Rows 集合，因此您可以获取绑定到每一行的数据。

以下是[一些](http://msdn.microsoft.com/en-us/library/aa479339.aspx)帮助您入门的示例。

动态地创建、添加和维护控件需要付出一些努力。您将需要一个 PlaceHolder 并且必须为其添加控件。您必须为它们中的每一个分配唯一的 id，并使用它们来检索值。这必须在每个 PostBack 上完成。
当您不觉得自己对 asp.net 很陌生时，试试这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T09:44:46.253

您可以使用 UpdatePanel 并在代码隐藏中动态添加新的 asp 控件。

但是，这可能会很昂贵，因为这意味着每次用户单击“添加”按钮时您的应用程序都会返回到服务器，但是我不确定您将如何在客户端严格实现这一点。但是没有什么能阻止您使用 asp.net 在服务器端动态创建新控件。

如果您想用自定义 HTML 包围新控件，您可以使用 PlaceHolder 组件并在回调期间将其替换为原始文本（您的 HTML）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T10:03:38.867

protected void Button1_Click(对象发送者，EventArgs e)

{

```
 HtmlTableRow tr = new HtmlTableRow();
    HtmlTableCell td = new HtmlTableCell();
    Button btn=new Button();
    btn.Text="gdfgd"; /* here u can create ur contol and add it in cell*/
    td.Controls.Add(btn); /*add controls to colum*/
    tr.Cells.Add(td); /*add column to row*/
    surveySetTableData.Rows.Add(tr); /*ad row to table*/
} 
```

而不是使用这个，我还建议你使用像 nunespaqscal bcz dataretrival 这样的 gridview 变得非常容易......在 gridview

# android - UIL 加载精确图像

> ID：15543811
> 
> 赞同：1
> 
> 时间：2013-03-21T09:36:12.247
> 
> 标签：android, universal-image-loader

我对通用图像加载器有另一个问题。尝试在列表视图和网格视图中使用它来显示大量图像。传递给 UIL 的 url 包含高分辨率图像。我已经尝试使用几乎所有的 scaletypes，它在移动网络上加载图像的速度仍然比 Original LazyList 慢得多。据我了解，它首先加载确切的图像，然后调整它的大小。有没有办法下载更少量的数据来显示这个非常缩放的图像。此外，它有时会在加载图像时出现两个不同的异常。EOFException 和 SocketTimeoutException。有什么想法我在这里做错了吗？

**更新：** 适配器类：

```
public class LazyAdapter extends BaseAdapter {

    private Activity activity;
    private List<String[]> data;
    private static LayoutInflater inflater=null;
    public ImageLoade1r imageLoader; 
    public boolean show;
    public final String webs = "http://www";
    public DisplayImageOptions options;
    public ImageLoader nostra;
    public LazyAdapter(Activity a, List<String[]> d, boolean flag) {
        activity = a;
        data=d;
        show=flag;

        ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(a.getApplicationContext())
        .enableLogging()
        .build();

        nostra = ImageLoader.getInstance();
        nostra.init(config);

        options = new DisplayImageOptions.Builder()
        .cacheOnDisc()
        .showImageOnFail(R.drawable.failed)
        .imageScaleType(ImageScaleType.EXACTLY)
        .bitmapConfig(Bitmap.Config.RGB_565)
        .build();

        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader=new ImageLoade1r(activity.getApplicationContext());
    }

    public int getCount() {
        return data.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

 public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;

        String[] url = data.get(position);
        if(convertView==null)
            vi = inflater.inflate(R.layout.item, null);

        TextView text=(TextView)vi.findViewById(R.id.text);;
        ImageView image=(ImageView)vi.findViewById(R.id.image);
        ProgressBar spinner = (ProgressBar) vi.findViewById(R.id.prgrsItem);
        RelativeLayout layo = (RelativeLayout) vi.findViewById(R.id.thelayout);
        if(url[1].trim().equals("folder"))
        {
         String img = webs+url[3].trim() + url[2] +"title"+".jpg";
         display(image, img, spinner);
         text.setText(url[2].replaceAll("_", " "));
        }
        else
        {
         String img;
         if(show==true)
          img = webs+url[3] + url[2]+"title"+".jpg";
         else
          img = webs+url[0];
         display(image, img, spinner);
         text.setText(url[2].replaceAll("_", " "));
        }
        if(show==true)
        {
         text.setVisibility(View.VISIBLE);
        }
        else
        {
         text.setVisibility(View.GONE);
        }
        return vi;
    }
    public void display(ImageView img, String url, final ProgressBar spinner)
    {
        nostra.displayImage(url, img, options, new ImageLoadingListener() {
            @Override
            public void onLoadingStarted(String imageUri, View view) {
             spinner.setVisibility(View.VISIBLE);
            }
            @Override
            public void onLoadingFailed(String imageUri, View view, FailReason failReason) {
             spinner.setVisibility(View.GONE);
             EasyTracker.getTracker().sendException(failReason.toString(), false);
            }
            @Override
            public void onLoadingComplete(String imageUri, View view, Bitmap loadedImage) {
             spinner.setVisibility(View.GONE);
            }
            @Override
            public void onLoadingCancelled(String imageUri, View view) {

            }
    });
    }
} 
```

**更新**EOFException：

```
03-21 13:51:55.800: E/ImageLoader(31605): null
03-21 13:51:55.800: E/ImageLoader(31605): java.io.EOFException
03-21 13:51:55.800: E/ImageLoader(31605):  at libcore.io.Streams.readAsciiLine(Streams.java:203)
03-21 13:51:55.800: E/ImageLoader(31605):  at libcore.net.http.HttpEngine.readResponseHeaders(HttpEngine.java:544)
03-21 13:51:55.800: E/ImageLoader(31605):  at libcore.net.http.HttpEngine.readResponse(HttpEngine.java:784)
03-21 13:51:55.800: E/ImageLoader(31605):  at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:274)
03-21 13:51:55.800: E/ImageLoader(31605):  at libcore.net.http.HttpURLConnectionImpl.getResponseCode(HttpURLConnectionImpl.java:479)
03-21 13:51:55.800: E/ImageLoader(31605):  at com.nostra13.universalimageloader.core.download.BaseImageDownloader.getStreamFromNetwork(BaseImageDownloader.java:113)
03-21 13:51:55.800: E/ImageLoader(31605):  at com.nostra13.universalimageloader.core.download.BaseImageDownloader.getStream(BaseImageDownloader.java:84)
03-21 13:51:55.800: E/ImageLoader(31605):  at com.nostra13.universalimageloader.core.LoadAndDisplayImageTask.saveImageOnDisc(LoadAndDisplayImageTask.java:299)
03-21 13:51:55.800: E/ImageLoader(31605):  at com.nostra13.universalimageloader.core.LoadAndDisplayImageTask.tryLoadBitmap(LoadAndDisplayImageTask.java:237)
03-21 13:51:55.800: E/ImageLoader(31605):  at com.nostra13.universalimageloader.core.LoadAndDisplayImageTask.run(LoadAndDisplayImageTask.java:149)
03-21 13:51:55.800: E/ImageLoader(31605):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
03-21 13:51:55.800: E/ImageLoader(31605):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
03-21 13:51:55.800: E/ImageLoader(31605):  at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:20:08.073

使用时应使用视图支架来提高性能。

[http://developer.android.com/training/improving-layouts/smooth-scrolling.html](http://developer.android.com/training/improving-layouts/smooth-scrolling.html)

您的代码可能会在 ListView 滚动期间频繁调用 findViewById()，这会降低性能。即使适配器返回一个膨胀的视图进行回收，您仍然需要查找元素并更新它们。重复使用 findViewById() 的一种方法是使用“视图持有者”设计模式。

[http://www.youtube.com/watch?v=wDBM6wVEO70](http://www.youtube.com/watch?v=wDBM6wVEO70)。主题是 abot listview 和 view holder。

SokectTimeOut 在套接字读取或接受操作超时时引发异常。

```
 ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(a.getApplicationContext())
    .enableLogging()
    .build();
    .imageDownloader(new URLConnectionImageDownloader(5 * 1000, 20 * 1000)) // connectTimeout (5 s), readTimeout (20 s) 
```

对于 EOFException 检查链接。

[http://code.google.com/p/libs-for-android/issues/detail?id=14](http://code.google.com/p/libs-for-android/issues/detail?id=14)。

```
 System.setProperty("http.keepAlive", "false"). 
```

提出了类似的问题，有人建议在打开 HTTP url 连接之前尝试上述操作。

可能与您的代码无关。

# iphone - 应用程序因事件存储更改而崩溃？

> ID：15543814
> 
> 赞同：2
> 
> 时间：2013-03-21T09:36:19.630
> 
> 标签：iphone, objective-c, ekeventkit, ekeventstore

我搜索了 SO，但没有找到任何准确的答案。

我在我的应用程序中实现事件工具包。我以编程方式实现事件的创建，但我没有在那里指定任何日历。然后我使用`EKEventViewController`编辑我的事件。我也使用**Kal 库**来显示日历。每个当我编辑第二个或第三个事件时，或者事件删除事件时，我的应用程序崩溃了，这就是说事件存储已更改。我无法解决这个问题。

任何人都可以在这方面帮助我。

这是崩溃日志..

```
terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSArrayM eventStoreChanged:]: unrecognized selector sent to instance 0x1fc7f040 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-30T05:45:13.627

我自己找到了答案......如果有人面临同样的情况......那么你去......你需要将 eventstorechanged 委托设置为 nil。你的问题就会得到解决。

干杯桑杰

# machine-learning - 如何确定机器学习技术中距离测量的质量？

> ID：15543817
> 
> 赞同：-2
> 
> 时间：2013-03-21T09:36:36.317
> 
> 标签：machine-learning, data-mining

如何确定给定的距离度量是否合适？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T19:11:50.687

分类还是聚类？

对于分类，使用提供最高交叉验证准确度的任何一个（或您需要的任何质量度量）。

对于集群，您需要为集群质量选择一个标准，并选择能够为您提供最佳集群质量的标准：

[http://www.jstor.org/discover/10.2307/2284239?uid=3739448&uid=2&uid=3737720&uid=4&sid=21101924573361（jstor](http://www.jstor.org/discover/10.2307/2284239?uid=3739448&uid=2&uid=3737720&uid=4&sid=21101924573361)，不是免费的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:24:51.070

该指标很好，如果它**适用于您的问题**。

在分类上，就这么简单。如果它给出了很好的结果，那就去吧。否则，请尝试不同的指标。

# python - 在 tkinter 中一次更改四个按钮的字体

> ID：15543819
> 
> 赞同：1
> 
> 时间：2013-03-21T09:36:38.053
> 
> 标签：python, tkinter

**目标**

我在 Tkinter 中创建了 4 个默认字体的按钮。现在我决定所有四个按钮都太小了。所以我想增加它们的字体大小。

**面临的问题**

我不想在所有四个语句中添加`font=custom`where的东西。`custom=tkFont.Font(family='Helvetica',size='18')`

有没有办法为这些按钮所在的整个框架执行此操作？

**代码**

```
f = self.frame
custom = Font(family='Helvetica',size=15)

start = Button(f,text='START',command=self.startrunning)

start.pack(side="top")

stop =Button(f,text='STOP',command=self.stoprunning)
stop.pack(side="top")

lap = Button(f,text='LAP',command=self.endlap)
lap.pack(side='top')

reset = Button(f,text="RESET",command = self.reset)
reset.pack(side="top")

close = Button(f,text="QUIT",bg="black",fg = "red",command=self.quitwin)
close.pack(side="top") 
```

**请**帮助我实现目标的一些捷径。如果没有捷径也请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:49:04.597

```
buttons = [stop, lap, reset, close]
my_font = tkFont.Font(family='Helvetica',size='18')
for button in buttons:
    button.config(font=my_font) 
```

# php - 使用 PHP 计划更新 SQL 查询

> ID：15543820
> 
> 赞同：0
> 
> 时间：2013-03-21T09:36:39.390
> 
> 标签：php, sql, schedule

我有一个手机价格网站，所有价格都是从外部网站手动收集的，我想要的只是`$emag, $koyos`每 3 天安排一次更新价格（ ）。

我的手动更新查询是这样的：

```
$editare = "UPDATE modele SET koyos='$koyos', emag='$emag' WHERE id ='{$id}' ";

if ($dbh->query($editare))
 {
   print "<div><h2><img src=\"http://mysite.com/images/ok.png\"/><br /><br /Succes!</h2><br />
  Vei fi redirectionat in cateva momente inspre adaugarea unui nou model de tableta sau telefon!
<meta http-equiv=\"refresh\" content=\"2; URL=index.php\"/>";
}
 else mysql_error(); 
```

如何在 3 天内自动执行此查询？

！我的虚拟主机不支持`cronjob SSH, cPanel or Plesk`！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T09:41:44.060

首先，您需要用 PHP 编写一个脚本来执行您想做的事情（基本上，它只是您想要在预定时间运行的 PHP 代码，不需要添加）。

然后，使用**cron 作业**，您可以根据需要安排其运行频率。

`*/4 * * * * wget --spider file.php`在 crontab 中每 4 分钟运行一次。您可能想阅读一些[crontab 教程](http://www.linuxweblog.com/crotab-tutorial)。

这是来自以下链接之一的图片，描述了如何安排您想要的时间：

![在此处输入图像描述](../Images/2e1dd2d22cb89f20210be859d6715b71.png)

* * *

Cronjobs 基本上是每隔一段时间运行一次的时间表。它们真的很有用，我一直在 Linux 上使用它们。

上面的链接对于解释每 x 分钟执行一次脚本需要输入哪些数字非常有用，但是您可能需要谷歌“Cronjob 计算器”来自动为您计算正确的数字（我有时自己这样做）。

在安装了 crontab 的 linux 中，键入**crontab -l**以查看所有 cronjobs 的列表。键入**crontab -e**以编辑当前用户的 cronjob 列表。这是你粘贴我上面给你的代码的地方。

编辑：要了解基本的 cronjobs，首先安装 crontab。然后，使用上面的代码执行写入文件的脚本。然后，只需**tail -f**那个文件，并观察它是如何（在 cronjob 启动后四分钟内）在你眼前更新的。

从基础开始。然后让它执行你的 MySQL 脚本。

有用的链接：

[http://www.linuxweblog.com/crotab-tutorial](http://www.linuxweblog.com/crotab-tutorial)
[http://clickmojo.com/code/cron-tutorial.html](http://clickmojo.com/code/cron-tutorial.html)（这看起来不错）
[http://www.tutorial5.com/content/view/95/51 /](http://www.tutorial5.com/content/view/95/51/)
[http://www.thegeekstuff.com/2011/07/cron-every-5-minutes/](http://www.thegeekstuff.com/2011/07/cron-every-5-minutes/)（分钟/天解释）

*注意：你不能少于一分钟。最后一个链接建议了一个`sleep()`命令来解决这个问题，所以检查一下。*

* * *

OP 的问题在于，由于他使用非常受限的共享主机，他无法访问 SSH、cPanel、cronjobs 或其他类似的东西。

这里的一个选项是分离一个单独的过程来使用`exec()`, 或`shell_exec()`, 最后带有 `nohup`和符号 (&) 来获取 PHP 文件，以及`sleep()`OP 想要的天数的很长一段时间。这将导致 PHP 脚本在服务器的后台运行。

上述示例需要采取安全措施，即：如果服务器重新启动，则脚本将不再运行，必须重新启动。相反，如果用户在错误的时间意外点击了脚本（或其他人这样做），则会产生多个进程，因此可能会发生检查进程是否已经运行的安全措施（或者基本的密码输入要求可能会有所帮助以免意外击中）。

# hadoop - 使用 FileInputFormat 在 map 方法中获取行号

> ID：15543827
> 
> 赞同：2
> 
> 时间：2013-03-21T09:36:57.570
> 
> 标签：hadoop, mapreduce, cloudera

我想知道是否可以在我的地图方法中获取行号？我的输入文件只是一列值，例如，

```
苹果
橙子
香蕉

```

是否可以在我的地图方法中获取 key: 1, Value: Apple , Key: 2, Value: Orange ...？

使用 CDH3/CDH4。更改输入数据以使用 KeyValueInputFormat 不是一种选择。提前谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T11:00:03.300

TextInputFormat 等 InputFormats 的默认行为是给出记录的字节偏移量而不是实际的行号——这主要是由于当输入文件可拆分并被两个或多个处理时无法确定真实的行号映射器。

您可以创建自己的 InputFormat （基于`TextInputFormat`和关联`LineRecordReader`）来生成行号而不是字节偏移量，但是您需要将输入格式配置为从该`isSplittable`方法返回 false （这意味着大型输入文件不会被多个映射器）。如果您有小文件，或者大小接近 HDFS 块大小的文件，那么这应该不是问题。不可分割的压缩格式（例如 GZip .gz）也意味着整个文件将由单个映射器处理。

# c# - MySqlHelper 类中的事务锁

> ID：15543829
> 
> 赞同：0
> 
> 时间：2013-03-21T09:37:07.413
> 
> 标签：c#, mysql, .net, c#-4.0

我将在我的 .net 代码中调用 mysql Db，为此我正在使用`MySql.Data.dll`. 在我的场景中，我使用了`MySqlHelper`类。`commit`但在这种情况下，有两个插入语句，如果只有两个都正确插入，我想记录。否则我想要`rollback`它。

```
 internal bool AddCutomer(Customer c)
        {
            string sqlCustomerQuery = "INSERT INTO tab_customer VALUES('" + c.Barcode + "','" + c.custxml + "')";
            int result = MySqlHelper.ExecuteNonQuery(connectionString, sqlCustomerQuery);
            if (result > 0)
            {
                string sqlProjCustomer = "INSERT INTO tab_project_customers VALUES('" + c.Barcode + "','" + c.ProjectID + "')";
                MySqlHelper.ExecuteNonQuery(connectionString, sqlProjCustomer);

                return true;
            }
            else
            return false;

        } 
```

**我的问题：**

1.  在这种情况下，我如何提交或回滚？
2.  我发现[MySqlTransaction](http://dev.mysql.com/doc/refman/5.6/en/connector-net-ref-mysqlclient.html#connector-net-ref-mysqlclient-mysqltransaction)可以用来提交和回滚。如果我要使用它，我该如何使用它？还是有其他方法可以做到这一点？
3.  我们什么时候可以使用`MySqlHelper`类以及传统方法（创建连接、命令等）和`MySqlHelper`类方法之间的区别？
4.  助手会`MySqlHelper`自动处理锁吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:42:14.367

您可以在 c# 中使用事务范围。

> [在c#中回滚](https://stackoverflow.com/questions/13947274/roll-back-in-c-sharp/13947342#13947342)

# php - 在打印函数之前打印结果？

> ID：15543831
> 
> 赞同：-1
> 
> 时间：2013-03-21T09:37:13.013
> 
> 标签：php, function

我有一个带有循环 foreach 的函数，它在每一轮中打印一个文本行，并将 1 添加到标记中。例如：

```
function write(){
 $score = 0;
 Foreach ($array as $arr){
   echo "line 1";
   $score++;
 }
} 
```

我想先打印 $score，然后在我将调用该函数的页面中打印文本行。

如何在 $score 之前打印？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:41:33.220

```
function write(){
 $score = 0;
 $echo = '';
 Foreach ($array as $arr){
   $echo .= "line 1";
   $score++;
 }
 echo $score;
 echo $echo;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:44:19.803

您需要像这样在 Foreach 之外回显：

```
function write(){
    $score = 0;
    foreach ($array as $arr){
        $score++;
    }
    echo "Total score is: ".$score;
} 
```

但是，如果您所做的只是计算数组中的项目数，那么您可以简单地使用它来代替：

```
echo count($array); 
```

# java - Xtend“电影示例”最佳答案

> ID：15543833
> 
> 赞同：1
> 
> 时间：2013-03-21T09:37:20.847
> 
> 标签：java, reduce, xtend

我遵循了 Xtend 教程和电影示例。在本教程的最后，您可以找到以下问题：

```
 @Test def void sumOfVotesOfTop2() {
      val long sum = movies.sortBy[ -rating ].take(2).map[ numberOfVotes ].reduce[ a, b | a + b ]
      assertEquals(47_229L, sum)
    } 
```

> 首先，电影按评级排序，然后我们选择最好的两部电影。接下来，使用 map 函数将电影列表转换为他们的 numberOfVotes 列表。现在我们有一个列表，可以通过添加值将其简化为单个 Long。
> 
> **您也可以使用 reduce 代替 map 和 reduce**。你知道如何？

我的问题是：最后一个问题的最佳答案是什么？

我找到了一种不使用 map() 扩展方法来计算相同“总和”值的方法，但这对我来说似乎很糟糕。这是我的解决方案：

```
assertEquals(47229, this.movies.sortBy[ -rating ].take(2).reduce[m1, m2 | new Movie('', 0, 0.0, m1.numberOfVotes + m2.numberOfVotes,null)].numberOfVotes) 
```

有没有更好（和更清洁）的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:16:00.377

您可以使用`fold(R seed, (R,T)=>R function)`而不是`reduce((T,T)=>T)`：

```
assertEquals(47229, 
  movies
    .sortBy[rating]
    .reverseView
    .take(2)
    .fold(0L) [ result, movie | result + movie.numberOfVotes ]) 
```

请注意，`map((T)=>R)`它不执行任何急切计算，而是按需评估，因此对于使用 map 函数的解决方案，性能应该无关紧要。尽管如此，`fold`如果您需要为一组值累积结果类型与元素类型不同的结果，这将非常方便。

# php - 在php中，我如何从某个值范围内的字符串生成一个固定数字

> ID：15543834
> 
> 赞同：0
> 
> 时间：2013-03-21T09:37:24.577
> 
> 标签：php, random

假设我有一个包含 100,000 个或多或少随机字符串的数据库，我想从每个字符串中生成一个介于 1 到 500 之间的数字。

我的方法应该始终生成相同的数字（给定相同的字符串），并且应该是从 1 到 500 的数字的均匀分布。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:46:39.340

好像你需要一个散列函数。您可以使用[`crc32`](http://php.net/manual/en/function.crc32.php)和[模运算符](http://php.net/manual/en/language.operators.arithmetic.php)：

```
echo abs(crc32("hello world")) % 500 + 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-11T15:36:19.823

你也可以使用类似的东西：

```
function string_to_decimal($hex_str)
{
    $arr = str_split($hex_str, 4);
    foreach ($arr as $grp) {
        $dec[] = str_pad(hexdec($grp), 5, '0', STR_PAD_LEFT);
    }
    return implode('', $dec);
} 
```

# json - JSON.parse、Sinatra 和 Webrick

> ID：15543837
> 
> 赞同：1
> 
> 时间：2013-03-21T09:37:28.890
> 
> 标签：json, sinatra

试图弄清楚为什么会这样

```
get '/json_test' do
  j = '{"key1": "val1"}'
  JSON.parse(j)
end 
```

导致此错误

> 内部服务器错误
> 
> 无法将数组转换为字符串

使用 pry gem 我可以在解析之前打断点。从那里我可以调用 JSON.parse(j) 并且它工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:47:57.830

因为您正在从路线提供*代码。*`JSON.parse`将 JSON 字符串转换为 Ruby 数据类型。Sinatra 路由的最后一个表达式应该是主体字符串，或者是符合 Rack `[status_code, headers, body]`（或几乎）的数组。如果您希望路由接收 JSON，请尝试以下操作：

```
get '/json_test' do
  j = '{"key1": "val1"}'
  JSON.parse(j)
  halt 200
end 
```

但它不应该是 GET，除非你要用身体中有意义的东西来回应。

# javascript - 如何在 cocos2d-x 中从 c++ 调用 javascript 函数

> ID：15543840
> 
> 赞同：-2
> 
> 时间：2013-03-21T09:37:33.523
> 
> 标签：javascript, cocos2d-x

在我的 cocos2d-x js 项目中，我使用 cxx-generator 将 c++ 函数绑定到 js，这样，我创建了一个 ios alertView 并从我的 js 代码中显示它，但是当用户按下 OK 按钮时，我可以将事件传递给 js现在，我尝试并搜索了所有 2 天，但我无法做到，如果有人知道解决方案是什么，请帮助我，非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T03:55:34.527

你没有提供任何代码，所以很难给你具体的帮助，但这样的事情应该提供一些方向：

呸

```
class JSObject;
class Poo : cocos2d::CCNode {
  public:
    static void hello(JSObject *target, std::string selector);
} 
```

便便.cpp

```
Poo::hello(JSObject *target, std::string selector) {
    if (target) {
        js_proxy_t * p;
        JS_GET_PROXY(p, target);
        if (!p) {
            return;
        }

        jsval retval;
        jsval dataVal = std_string_to_jsval(ScriptingCore::getInstance()->getGlobalContext(), "Hello World");

        ScriptingCore::getInstance()->executeFunctionWithOwner(OBJECT_TO_JSVAL(p->obj), selector.c_str(), 1, &dataVal, &retval);
    }
} 
```

然后，在您的 JS 文件中：

```
var Demo = cc.Node.extend({
  ctor: function() {
    this._super();
    // The usual init stuff
    Poo.hello(this, "myCallback");
  },

  myCallback: function(msg) {
    cc.log("I got a message back from C++: " + msg);
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T05:12:00.220

请调用 this._super(); 在ctor方法中。

```
ctor: function()
{
    this._super();
    // The usual init stuff
    Poo.hello(this, "myCallback");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-02T11:46:08.717

这个答案不再适用于最新的 Cocos2dx 版本。3.12 没有“JS_GET_PROXY”...

我花了几天时间试图弄清楚如何从 C++ 触发对 JS 函数的调用，但无济于事。因此，最终我找到了一种在两者之间发送和接收消息的巧妙方法，方法是创建自定义 cc.nodes 并使用已经实现的 getter 和 setter 函数在其字段中发送信息。

# asp.net-mvc-3 - MVC4 Razor 中可能出现的重大更改，可以使用“@:@”修复

> ID：15543841
> 
> 赞同：15
> 
> 时间：2013-03-21T09:37:41.987
> 
> 标签：asp.net-mvc-3, razor, asp.net-mvc-4, razor-2

我最近将我的网站从 ASP.NET MVC3 (Razor) 升级到 MVC4 (Razor2)，在这样做的过程中发现 Razor 视图引擎似乎发生了重大变化。

场景（大大简化）如下所示。

```
@model IEnumerable<string>

@{ Layout = null; }

<!DOCTYPE html>

<html>
    <body>
        <div>
              @foreach (var x in Model)
              {
                  @string.Format("Foo bar: {0}", x) // Errors in MVC4/Razor2
              }
        </div>
    </body>
</html> 
```

这在 MVC3/Razor 中运行良好，但是在 MVC4/Razor2 中，该`string.Format`行会导致以下错误：

> “@”字符后出现意外的“字符串”关键字。进入代码后，您无需在“字符串”之类的结构前面加上“@”。

如果您删除`@`，则视图引擎会要求您`string.Format`使用分号终止该行。但是，ReSharper 然后警告（正确地如此）：

> 不使用纯方法的返回值。

我为此找到的两个修复程序可以使用`<text>`：

```
<text>@string.Format("The value {0}", x)</text> 
```

或者使用更奇怪的方法`@:@`：

```
@:@string.Format("The value {0}", x) 
```

这是 Razor 视图引擎中已知且记录在案的更改吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-21T09:53:44.517

似乎是一个错误。它适用于`String`：

```
@foreach (var x in Model)
{
    @String.Format("Foo bar: {0}", x)
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-14T17:14:27.320

This is indeed a bug we decided not to fix, note that the syntax is incorrect as there is no transition between C# and markup in this case.

I understand that resharper shows a warning here but I believe the warning is wrong.

Here is the bug for future reference [https://aspnetwebstack.codeplex.com/workitem/458](https://aspnetwebstack.codeplex.com/workitem/458)

# java - iBatis 多个查询结果到单个模型实例

> ID：15543844
> 
> 赞同：1
> 
> 时间：2013-03-21T09:37:50.363
> 
> 标签：java, sql, database, orm, ibatis

通常，iBatis 选择查询会返回 resultMap 类的新实例。是否有可能以某种方式将一个类的实例传递给 SQLMapper 的 queryForObject 方法，因此选择查询不是返回一个新实例，而是填充传递的实例中的数据并返回。

谢谢

# math - 数学：doxygen 中的字段

> ID：15543854
> 
> 赞同：3
> 
> 时间：2013-03-21T09:38:09.707
> 
> 标签：math, field, doxygen

有谁知道如何使用 Doxygen、IR、IC、IP 等 iow 符号获取真实和复杂场或投影平面的符号？

例如，我尝试了 \f$ \field{R} \f$，但无法识别。

非常感谢您的帮助，G。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T09:41:45.260

标准数学字体命令在 Doxygen 中不起作用吗？和？_ `mathbf`_ 其中之一是否适合您的需求？`mathcal``mathbb`

# apache-flex - 如何从flex自动登录到另一个html页面

> ID：15543855
> 
> 赞同：0
> 
> 时间：2013-03-21T09:38:14.127
> 
> 标签：apache-flex, redirect, autologin

我有一个弹性应用程序。从这个应用程序我想导航到另一个 url，它是一个 html 页面。为此，我可以使用 navigateToURL() 方法。在新网址中，我必须登录。我需要自动登录到页面。例如，如果我在一个 flex 应用程序中，然后单击一个按钮，我应该在另一个选项卡中自动登录到我的 gmail 页面。我在 flex 应用程序本身中拥有所有必要的凭据有人这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:29:33.173

如果您使用 OpenId，您可以一次登录多个站点。您必须*从*GMail、FBook 或类似的供应商开始，然后您可以转移到您的 Flex 站点。不过，我不知道反过来。

更多信息：

*   [打开ID](https://stackoverflow.com/questions/3995011/log-in-the-user-with-lightopenid)
*   [Facebook登入](http://developers.facebook.com/docs/concepts/login/)

# php - 我设计多语言网站的技术有什么缺点吗

> ID：15543857
> 
> 赞同：3
> 
> 时间：2013-03-21T09:38:16.697
> 
> 标签：php, css, web, multilingual

我正在设计一个多语言网站，它同时支持`ltr`和`rtl`.

1.  语言：

    我将语言存储在这样的数组中`$lan=array('browse'=>'تصفح','add'=>'إضافة','signin'=>'تسجيل دخول');`，并将它们保存在单独的 php 文件中，我`include`选择了语言。我在 HTML 代码中使用它，例如`<?php echo $lan['browse'];?>`

2.  方向：

    大部分方向问题都可以通过 CSS 属性来解决`dir`。但是，有时您需要为不同的方向指定不同的属性。因此，我给了主体一个类名，它要么是“rtl”，要么是“ltr”，然后我使用它如下：

    ```
    .brs_search_box{
         display: inline-block;
         width: 199px;
         border: 1px solid #d3d3d3;
         height: 500px;
    }
    .rtl .brs_search_box{
         border-left: 0;
    }
    .ltr .brs_search_box{
         border-right: 0;
    } 
    ```

这种技术有缺点吗？例如，大尺寸数组会产生不良影响吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T09:46:21.073

您可能会发现的唯一问题是，如果您没有明确翻译您正在回显的文本的每个部分。

例如，您可以`echo $lan['this is some text'];`，但如果您还没有翻译此文本怎么办？如果您没有为要使用的默认文本设置某种回退，这将在屏幕上显示为空白。

我使用的 PHP 多语言网站的最佳系统之一是`gettext`，您可以在以下链接的 PHP 手册中查看它：

[http://php.net/manual/en/book.gettext.php](http://php.net/manual/en/book.gettext.php)

我承认当我第一次开始使用它时，它的设置并不那么直观，你需要一些额外的工具来让它运行，但是一旦你学会了它并设置它，在我看来它工作得很好，你会您的弓上也有一根新弦，以备将来制作。

例如，您基本上将所有文本包装在函数`__()`中，`__('This is some text')`然后它会搜索您的翻译文件并显示相关文本。

这会将所有内容分成单独的文件，然后您可以使用这些文件轻松翻译文本。这对于交给翻译公司/朋友/隔壁邻居的猫进行翻译也很有用，而无需他们接触您的任何实际应用程序文件。

此外，如果它没有找到您指定文本的翻译字符串，那么它只会按照`__()`函数内部提供的方式输出它。

它使得随着时间的推移添加新语言变得非常可扩展。

我认为您也可以查看其他选项，并且您的选项也可以，但是对于行业接受的、可扩展的方法来说，看看`gettext`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T09:54:23.000

您缺少的是用于处理翻译的适当*工具链。*你的数组支持复数吗？语境？域？类别？评论？最重要的是：它们是否支持*自动提取*？

如果您只是手动将每个新字符串添加到数组中，那么您添加的每个新字符串都会有大量工作。翻译系统支持全自动提取字符串很重要。您只需在源代码中标记字符串，运行脚本并自动获取带有可翻译字符串的文件。每次运行它时，文件都会更新并与源代码中的最新更改合并。没有这个，这个过程很快就会变得难以管理。

此外，由于您将来可能不得不与外部的非技术翻译人员合作，因此具有多种工具支持的格式的字符串很重要。

正如@Peter 指出的那样，gettext 和类似的已建立工具具有所有这些。你的数组没有。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T09:50:21.257

使用语言数组的想法很好。但是根据经验，我建议使用 2 种技术：

语言配置文件。所以你会说 en_gb.php 和 arabaic.php 并且每个都包含一个翻译数组。然后可以根据用户的语言偏好或 IP 地址预加载这些文件，这种技术非常无限，因为翻译保存在一个中心位置，您可以添加任意多种语言，即 french.php

一个数据库。您可以按照自己的意愿进行设计，但理想情况下，您将拥有一个表格，其中包含模板词列和每个翻译列。由于此表不太可能经常更改，因此您可以使用基于磁盘或基于内存的缓存来提高速度。

使用上述任何一种技术，您只需使用模板系统并在页面加载时插入相应的翻译。但是根据经验，我建议用两种语言彻底测试网站，因为不可能逐字翻译语言。以一种语言显示需要 200 像素的内容，在另一种语言中可能需要 400 像素。所以网站的设计必须考虑到这一点。

# jquery - 如何从事件函数中访问其他方法？

> ID：15543867
> 
> 赞同：0
> 
> 时间：2013-03-21T09:38:45.537
> 
> 标签：jquery, design-patterns, scoping

我开始了解更多关于 jQuery 插件模式的信息，但我遇到了一些问题。请参阅下面的代码。我想使用 onclick 功能访问我的插件选项/默认值，但我不确定如何。

```
function SomePlugin(element,options)
{
    this.$el = $(element);

    this.options = $.extend({},
    {
        button: '#button',
        someVariable:'fuu',
        anotherVariable:'bar'

    },options);

    this.init();
}

SomePlugin.prototype =
{
    init:function()
    {
        var button = this.$el.find(this.options.button)

        button.on('click', this.onClick);
    },
    onClick: function(event){
        // Need to access the options (someVariable, anotherVariable) here... how?
    }
};

$.fn.somePlugin = function(options)
{
    return this.each(function()
    {
        if( !$.data(this,'somePlugin') )
        {
            $.data(this,'somePlugin',new SomePlugin(this,options));
        }
    });
}; 
```

我已经尝试了下面的代码，但是由于某种原因感觉不对。有没有更好的办法？另外，您对我的插件结构有任何其他建议或提示，请告诉我。顺便说一句，为了便于阅读，我省略了 jQuery 包装器

```
function SomePlugin(element,options)
{
    this.el = element;
    this.$el = $(element);

    this.options = $.extend({},
    {
        button: '#button',
        someVariable:'fuu',
        anotherVariable:'bar'

    },options);

    this.init();
}

SomePlugin.prototype =
{
    init:function()
    {
        var button = this.$el.find(this.options.button)

        button.on('click', {instance:this}, this.onClick);
    },
    onClick: function(event){
        // Options can be accessed using event.data.instance.options ... is there an easier way?
    }
};

$.fn.somePlugin = function(options)
{
    return this.each(function()
    {
        if( !$.data(this,'somePlugin') )
        {
            $.data(this,'somePlugin',new SomePlugin(this,options));
        }
    });
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:59:52.973

当我想学习写作或理解插件时，我使用了 jeffery way tuts 并且它确实有效。值得一看。试试下面的链接

[https://tutsplus.com/lesson/head-first-into-plugin-development/](https://tutsplus.com/lesson/head-first-into-plugin-development/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:13:07.697

我已经回答了我自己的问题。诀窍是像这样使用 jQuery 的 $.proxy() 方法：

```
button.on('click', $.proxy(this.onClick), this); 
```

并引用单击的按钮（因为“this”现在指的是 SomePlugin 类）：

```
onClick: function(event){
    // This now refers to SomePlugin class, yay!
    // Use event.target instead of this to refer to the clicked element
    $(event.target).text(this.options.someVariable); 
} 
```

# sql - sql server 将列分组为行（pivot？）

> ID：15543871
> 
> 赞同：0
> 
> 时间：2013-03-21T09:39:05.257
> 
> 标签：sql, sql-server-2008, pivot, unpivot

我在 SQL Server 2008 R2 中有这个结果数据

```
id      Size    Acted   Sum     Avg1    Avg2    A1       A2      A3
1       3921    39      690     17.69   0.18    NULL      NULL   NULL
40      11979   301     5944.26 19.75   0.5 10000.00 2000.00 1000.00
41      11714   289     5060    17.51   0.43 10000.00 3000.00 2000.00
42      11599   265     4107.98 15.5    0.35 10000.00 5000.00 500.00 
```

我想根据 id 将列移动到行中，所以我会收到这个结果：

```
id1        id40       id41         id42
1          40         41           42
3921       11979      11714        11599
39         301        289          265
690        5944       5060         4107
17.69      19.75      17.51        15.5
0.18       0.5        0.43         0.35
           10000.00   2000.00      1000.00
           10000.00   3000.00      2000.00
           10000.00   5000.00      500.00 
```

有没有办法做到这一点？我尝试了枢轴，但就我而言，我只能转换 1 列，并且在这种情况下不需要太多。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T10:40:15.217

为了得到这个结果，您首先需要*将*数据从列中转为行，然后应用该`PIVOT`函数。

由于您使用的是 SQL Server 2008，因此您可以使用`CROSS APPLY`和`VALUES`取消透视数据。这会从您的众多列中获取值并将它们转换为行：

```
select 'id'+cast(t.id as varchar(10)) p_id,
  c.col, 
  c.value,
  c.sort_order
from yourtable t
cross apply
(
  values 
    (1, 'id', id),
    (2, 'size', size),
    (3, 'acted', acted),
    (4, 'sum', sum),
    (5, 'avg1', avg1),
    (6, 'avg2', avg2),
    (7, 'a1', a1),
    (8, 'a2', a2),
    (9, 'a3', a3)
) c (sort_order, col, value) 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/3432e/1)。取消透视数据后，您可以使用作为`id`值的新列进行透视。所以完整的代码是：

```
select col, 
  id1, 
  id40, 
  id41, 
  id42
from
(
  select 'id'+cast(t.id as varchar(10)) p_id,
    c.col, 
    c.value,
    c.sort_order
  from yourtable t
  cross apply
  (
    values 
      (1, 'id', id),
      (2, 'size', size),
      (3, 'acted', acted),
      (4, 'sum', sum),
      (5, 'avg1', avg1),
      (6, 'avg2', avg2),
      (7, 'a1', a1),
      (8, 'a2', a2),
      (9, 'a3', a3)
  ) c (sort_order, col, value)
) src
pivot
(
  max(value)
  for p_id in (id1, id40, id41, id42)
) piv
order by sort_order; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/f6486/15)。

如果您不能使用`CROSS APPLY`and `VALUES`，那么也可以使用以下`UNPIVOT`函数来完成：

```
select col, 
  id1, id40, id41, id42
from
(
  select 'id'+cast(id_piv as varchar(10)) id,
    col,
    value,
    case col
      when 'id' then 1
      when 'size' then 2
      when 'acted' then 3
      when 'sum' then 4
      when 'avg1' then 5
      when 'avg2' then 6
      when 'a1' then 7
      when 'a2' then 8
      when 'a3' then 9 end sort_order
  from
  (
    select id id_piv,
      cast(id as numeric(10, 2)) id, 
      cast(size as numeric(10, 2)) size,
      cast(acted as numeric(10, 2)) acted,
      sum, avg1, avg2, A1, A2, A3
    from yourtable
  ) d
  unpivot
  (
    value
    for col in (id, size, acted, sum, avg1, avg2, a1, a2, a3)
   ) unpiv
) src
pivot
(
  max(value)
  for id in (id1, id40, id41, id42)
) piv
order by sort_order; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/f6486/20)

最后，如果您想要将未知数量的`id`值转换为列，那么您将需要使用动态 sql：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT ',' + QUOTENAME('id'+cast(id as varchar(10))) 
                    from yourtable
                    group by id
                    order by id
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT col, ' + @cols + ' 
              from 
             (
                select ''id''+cast(t.id as varchar(10)) p_id,
                  c.col, 
                  c.value,
                  c.sort_order
                from yourtable t
                cross apply
                (
                  values 
                    (1, ''id'', id),
                    (2, ''size'', size),
                    (3, ''acted'', acted),
                    (4, ''sum'', sum),
                    (5, ''avg1'', avg1),
                    (6, ''avg2'', avg2),
                    (7, ''a1'', a1),
                    (8, ''a2'', a2),
                    (9, ''a3'', a3)
                ) c (sort_order, col, value)
            ) x
            pivot 
            (
                max(value)
                for p_id in (' + @cols + ')
            ) p 
            order by sort_order'

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/3432e/2)

所有版本的结果：

```
|   COL |    ID1 |    ID40 |  ID41 |    ID42 |
----------------------------------------------
|    id |      1 |      40 |    41 |      42 |
|  size |   3921 |   11979 | 11714 |   11599 |
| acted |     39 |     301 |   289 |     265 |
|   sum |    690 | 5944.26 |  5060 | 4107.98 |
|  avg1 |  17.69 |   19.75 | 17.51 |    15.5 |
|  avg2 |   0.18 |     0.5 |  0.43 |    0.35 |
|    a1 | (null) |   10000 | 10000 |   10000 |
|    a2 | (null) |    2000 |  3000 |    5000 |
|    a3 | (null) |    1000 |  2000 |     500 | 
```

# ios - 视图控制器之间的交互转换？

> ID：15543874
> 
> 赞同：4
> 
> 时间：2013-03-21T09:39:20.687
> 
> 标签：ios, cocoa-touch, uiviewcontroller

由于`UIView`动画 API 和视图控制器包含，当前的 Cocoa Touch 堆栈非常适合视图控制器之间的自动转换。

我发现很难写的是视图控制器之间的*交互转换。*例如，当我只想使用推送动画将一个视图替换为另一个视图时，我可以使用`UINavigationController`或使用包含 API 并自己编写转换。但我希望过渡是交互式的、触摸控制的，这很常见：用户开始拖动当前视图，传入的视图从侧面出现，过渡由平移触摸手势控制。用户只需平移一点以“窥视”传入的视图，然后向后平移，保持当前视图可见。如果手势在某个阈值以下结束，则取消转换，否则完成。

（如果这还不够清楚，我说的是 iBooks 中的翻页，但在不同的视图控制器之间，并泛化到任何此类交互式转换。）

我知道如何编写这样的转换，但是当前的视图控制器必须对转换了解太多——它占用了太多的代码。更不用说很容易有两种不同的交互式转换，在这种情况下，所讨论的控制器充满了转换代码，与它紧密耦合。

是否有一种模式可以抽象、概括交互式转换代码并将其移动到单独的类或代码块中？甚至可能是图书馆？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T07:03:36.247

我不知道有任何库可以做到这一点，但我已经用 UIViewController 上的一个类别或通过为我的视图控制器创建一个包含转换代码的基类来抽象出转换代码。我将所有杂乱的转换代码保留在基类中，在我的控制器中，我只需要添加一个手势识别器并从其操作方法中调用基类方法。

```
-(IBAction)dragInController:(UIPanGestureRecognizer *)sender {
    [self dragController:[self.storyboard instantiateViewControllerWithIdentifier:@"GenericVC"] sender:sender];
} 
```

**编辑后：**

这是我的尝试之一。这是 DragIntoBaseVC 中的代码，它是另一个控制器需要继承的控制器，以便使用上述代码将视图拖入其中。这仅处理拖入（仅从右侧），而不是拖出（仍在处理那个，以及如何使这个在方向方面更通用）。很多代码都在那里处理旋转。它适用于任何方向（倒置除外），适用于 iPhone 和 iPad。我通过动画布局约束而不是设置框架来制作动画，因为这似乎是 Apple 的发展方向（我怀疑他们将来会贬低旧的支柱和弹簧系统）。

```
#import "DragIntoBaseVC.h"

@interface DragIntoBaseVC ()
@property (strong,nonatomic) NSLayoutConstraint *leftCon;
@property (strong,nonatomic) UIViewController *incomingVC;
@property (nonatomic) NSInteger w;
@end

@implementation DragIntoBaseVC

static int first = 1;

-(void)dragController:(UIViewController *) incomingVC sender:(UIPanGestureRecognizer *) sender {
    if (first) {
        self.incomingVC = incomingVC;
        UIView *inView = incomingVC.view;
        [inView setTranslatesAutoresizingMaskIntoConstraints:NO];
        inView.transform = self.view.transform;
        [self.view.window addSubview:inView];
        self.w = self.view.bounds.size.width;
        NSLayoutConstraint *con2;

        switch ([UIDevice currentDevice].orientation) {
            case 0:
            case 1:
                self.leftCon = [NSLayoutConstraint constraintWithItem:inView attribute:NSLayoutAttributeLeft relatedBy:0 toItem:self.view attribute:NSLayoutAttributeLeft multiplier:1 constant:self.w];
                con2 = [NSLayoutConstraint constraintWithItem:self.view attribute:NSLayoutAttributeTop relatedBy:0 toItem:inView attribute:NSLayoutAttributeTop multiplier:1 constant:0];
                break;
            case 3:
                self.leftCon = [NSLayoutConstraint constraintWithItem:inView attribute:NSLayoutAttributeBottom relatedBy:0 toItem:self.view attribute:NSLayoutAttributeBottom multiplier:1 constant:self.w];
                con2 = [NSLayoutConstraint constraintWithItem:self.view attribute:NSLayoutAttributeLeft relatedBy:0 toItem:inView attribute:NSLayoutAttributeLeft multiplier:1 constant:0];
                break;
            case 4:
                self.leftCon = [NSLayoutConstraint constraintWithItem:inView attribute:NSLayoutAttributeTop relatedBy:0 toItem:self.view attribute:NSLayoutAttributeTop multiplier:1 constant:-self.w];
                con2 = [NSLayoutConstraint constraintWithItem:self.view attribute:NSLayoutAttributeRight relatedBy:0 toItem:inView attribute:NSLayoutAttributeRight multiplier:1 constant:0];
                break;
            default:
                break;
        }

        NSLayoutConstraint *con3 = [NSLayoutConstraint constraintWithItem:self.view attribute:NSLayoutAttributeWidth relatedBy:0 toItem:inView attribute:NSLayoutAttributeWidth multiplier:1 constant:0];
        NSLayoutConstraint *con4 = [NSLayoutConstraint constraintWithItem:self.view attribute:NSLayoutAttributeHeight relatedBy:0 toItem:inView attribute:NSLayoutAttributeHeight multiplier:1 constant:0];

        NSArray *constraints = @[self.leftCon,con2,con3,con4];
        [self.view.window addConstraints:constraints];
        first = 0;
    }

    CGPoint translate = [sender translationInView:self.view];
    if ([UIDevice currentDevice].orientation == 0 || [UIDevice currentDevice].orientation == 1 || [UIDevice currentDevice].orientation == 3) { // for portrait or landscapeRight
        if (sender.state == UIGestureRecognizerStateBegan || sender.state == UIGestureRecognizerStateChanged) {
            self.leftCon.constant += translate.x;
            [sender setTranslation:CGPointZero inView:self.view];

        }else if (sender.state == UIGestureRecognizerStateEnded){
            if (self.leftCon.constant < self.w/2) {
                [self.view removeGestureRecognizer:sender];
                [self finishTransition];
            }else{
                [self abortTransition:1];
            }
        }

    }else{ // for landscapeLeft
        if (sender.state == UIGestureRecognizerStateBegan || sender.state == UIGestureRecognizerStateChanged) {
            self.leftCon.constant -= translate.x;
            [sender setTranslation:CGPointZero inView:self.view];

        }else if (sender.state == UIGestureRecognizerStateEnded){
            if (-self.leftCon.constant < self.w/2) {
                [self.view removeGestureRecognizer:sender];
                [self finishTransition];
            }else{
                [self abortTransition:-1];
            }
        }
    }
}

-(void)finishTransition {
    self.leftCon.constant = 0;
    [UIView animateWithDuration:.3 animations:^{
        [self.view.window layoutSubviews];
    } completion:^(BOOL finished) {
        self.view.window.rootViewController = self.incomingVC;
    }];
}

-(void)abortTransition:(int) sign {
    self.leftCon.constant = self.w * sign;
    [UIView animateWithDuration:.3 animations:^{
        [self.view.window layoutSubviews];
    } completion:^(BOOL finished) {
        [self.incomingVC.view removeFromSuperview]; // this line and the next reset the system back to the inital state.
        first = 1;
    }];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T19:23:07.513

试图回答这个问题我觉得有点奇怪......就像我只是不理解这个问题，因为你无疑比我更了解这一点，但这里就可以了。

您使用了包含 API 并自己编写了转换，但您对结果不满意？到目前为止，我发现它非常有效。我创建了一个没有视图内容的自定义容器视图控制器（将子视图设置为全屏）。我将此设置为我的`rootViewController`.

我的包含视图控制器带有一堆预先设定的转换（在 中指定`enum`），并且每个转换都有预先确定的手势来控制转换。我使用 2 指平移来实现左/右滑动，3 指捏合/缩放来实现增长/缩小到屏幕中间效果以及其他一些效果。有一种设置方法：

```
- (void)addTransitionTo:(UIViewController *)viewController withTransitionType:(TransitionType)type; 
```

然后我调用方法来设置我的视图控制器交换。

```
[self.parentViewController addTransitionTo:nextViewController withTransitionType:TransitionTypeSlideLeft];
[self.parentViewController addTransitionTo:previousViewController withTransitionType:TransitionTypeSlideRight];
[self.parentViewController addTransitionTo:infoViewController withTransitionType:TransitionTypeSlideZoom]; 
```

父容器为过渡类型添加适当的过渡手势并管理视图控制器之间的交互移动。如果您正在平移并且在中间放开，它将弹回覆盖大部分屏幕的任何一个。当一个完整的转换完成时，容器视图控制器会移除旧的视图控制器和所有的转换。您还可以随时使用以下方法删除转换：

```
- (void)removeTransitionForType:(TransitionType)type; 
```

虽然交互式过渡很好，但在某些情况下我也确实想要非交互式过渡。我为此使用了不同的类型，因为我确实有一些只是静态的过渡，因为我不知道哪种手势适合它们进行交互（如交叉淡入淡出）。

```
- (void)transitionTo:(UIViewController *) withStaticTransitionType:(StaticTransitionType)type; 
```

我最初为幻灯片类型的应用程序编写了容器，但从那时起我转身并在几个应用程序中重新使用它。我还没有把它拉到图书馆重新使用，但这可能只是时间问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T15:11:18.853

这是我得到的 API。它包含三个组件——想要创建到另一个的转换的常规视图控制器、自定义容器视图控制器和转换类。过渡类如下所示：

```
@interface TZInteractiveTransition : NSObject

@property(strong) UIView *fromView;
@property(strong) UIView *toView;

// Usually 0–1 where 0 = just fromView visible and 1 = just toView visible
@property(assign, nonatomic) CGFloat phase;
// YES when the transition is taken far enough to perform the controller switch
@property(assign, readonly, getter = isCommitted) BOOL committed;

- (void) prepareToRun;
- (void) cleanup;

@end 
```

从这个抽象类中，我派生了用于推动、旋转等的具体转换。大部分工作都在容器控制器中完成（稍微简化了一点）：

```
@interface TZTransitionController : UIViewController

@property(strong, readonly) TZInteractiveTransition *transition;

- (void) startPushingViewController: (TZViewController*) controller withTransition: (TZInteractiveTransition*) transition;
- (void) startPoppingViewControllerWithTransition: (TZInteractiveTransition*) transition;

// This method finishes the transition either to phase = 1 (if committed),
// or to 0 (if cancelled). I use my own helper animation class to step
// through the phase values with a nice easing curve.
- (void) endTransitionWithCompletion: (dispatch_block_t) completion;

@end 
```

为了让事情更清楚一点，这是过渡的开始方式：

```
- (void) startPushingViewController: (TZViewController*) controller withTransition: (TZInteractiveTransition*) transition
{
    NSParameterAssert(controller != nil);
    NSParameterAssert([controller parentViewController] == nil);

    // 1\. Add the new controller as a child using the containment API.
    // 2\. Add the new controller’s view to [self view].
    // 3\. Setup the transition:    
    [self setTransition:transition];
    [_transition setFromView:[_currentViewController view]];
    [_transition setToView:[controller view]];
    [_transition prepareToRun];
    [_transition setPhase:0];
} 
```

这`TZViewController`只是一个简单的`UIViewController`子类，它包含一个指向转换控制器的指针（非常类似于`navigationController`属性）。我使用自定义手势识别`UIPanGestureRecognizer`器来驱动转换，这就是视图控制器中手势回调代码的样子：

```
- (void) handleForwardPanGesture: (TZPanGestureRecognizer*) gesture
{
    TZTransitionController *transitionController = [self transitionController];
    switch ([gesture state]) {
        case UIGestureRecognizerStateBegan:
            [transitionController
                startPushingViewController:/* build next view controller */
                withTransition:[TZCarouselTransition fromRight]];
            break;
        case UIGestureRecognizerStateChanged: {
            CGPoint translation = [gesture translationInView:[self view]];
            CGFloat phase = fabsf(translation.x)/CGRectGetWidth([[self view] bounds]);
            [[transitionController transition] setPhase:phase];
            break;
        }
        case UIGestureRecognizerStateEnded: {
            [transitionController endTransitionWithCompletion:NULL];
            break;
        }
        default:
            break;
    }
} 
```

我对结果很满意——它相当简单，不使用任何技巧，很容易通过新的转换进行扩展，并且视图控制器中的代码相当短且简单。我唯一的抱怨是我必须使用自定义容器控制器，所以我不确定它如何与标准容器和模态控制器一起使用。

# optimistic-concurrency - Lightswitch 2011 并发控制

> ID：15543882
> 
> 赞同：0
> 
> 时间：2013-03-21T09:39:49.670
> 
> 标签：optimistic-concurrency, pessimistic-locking

我有两个问题。

1.  Lightswitch **2011**是否也支持悲观并发控制？如果是这样，怎么做？
2.  乐观控制是否支持来自外部数据源的表上的 ROWVERSION 列或仅使用行状态（使用原始值）？

感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:06:44.523

1.  Lightswitch 2011 仅支持乐观并发。但是，我成功地将悲观并发集成到 Lightswitch 中。我使用了来自企业应用程序架构模式 (Martin Fowler) 的粗粒度锁和已经包含 UnitOfWork (ObjectContext) 和 Repository (ObjectSet) 的实体框架。使用 EF 的 ExecuteStoreCommand 和 ExecuteStoreQuery 获取、释放和检查锁。为根和子实体实施了具有 CRUD 操作的自定义 RIA 服务。

2.  使用 EF 模型的自定义 RIA 服务可以使用 ROWVERSION 进行乐观控制。

# ruby-on-rails - 用空的覆盖方法

> ID：15543886
> 
> 赞同：0
> 
> 时间：2013-03-21T09:39:56.710
> 
> 标签：ruby-on-rails, ruby, oop

是否有在 Ruby 中*清空*方法的最佳实践？

即在一个子类中，如果我想重写一个没有任何内容的方法，是否有除此之外的另一种语法：

```
class A
  def XX
    [..do something..]
  end
end

class B < A
  def XX
    # Do Nothing
  end
end 
```

我想知道是否有类似的关键字...

```
class B < A
  void_method :XX
end 
```

...因为它更便于代码维护。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T09:43:16.860

没有，而且实际上击键次数比

```
def XX; end 
```

但是您可以轻松添加这样的方法

```
class A
  def self.void_method name
    define_method(name) {}
  end
end 
```

或者显然，如果您要在更多地方使用它，您可以将它添加到对象中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T09:56:37.063

从您的问题中不清楚您想要什么。如果您希望它不返回任何方法错误，请执行以下操作：

```
class B < A
  undef_method :XX
end 
```

如果您希望它返回`nil`，请执行以下操作：

```
class B < A
  def XX *args, &pr; end
end 
```

如果您希望它返回接收器，请执行以下操作：

```
class B < A
  def XX *args, &pr; self end
end 
```

# java - GWT DOM 不工作

> ID：15543888
> 
> 赞同：0
> 
> 时间：2013-03-21T09:40:06.973
> 
> 标签：java, javascript, gwt

我想在**GWT**中的< **TH** >内附加**div**

 ****```
Element tr = DOM.createTR();

DOM.appendChild(thead, tr);
for (int index = 0; index < headers.size(); index++) {
Element th = DOM.createTH();

Element div = DOM.createDiv();

DOM.appendChild(th, div);   // this is not working !
DOM.appendChild(tr, th);

} 
```

我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-21T10:22:15.920

我认为它会给你编译时错误，因为方法 `DOM.appendChild(th, div);' 第二个参数应该是包结构的一部分：

```
com.google.gwt.user.client.Element 
```

代替

```
com.google.gwt.dom.client.Element 
```****

# ruby-on-rails - Rails 关联.创建和关联.创建！返回零

> ID：15543891
> 
> 赞同：2
> 
> 时间：2013-03-21T09:40:23.523
> 
> 标签：ruby-on-rails, factory-bot

我只是把它扔在那里，因为我真的无法弄清楚。例如，当我调用`user.articles.create! { title: 'blah' }`nil 时，返回但创建了对象。我以前从未见过这样的事情，想知道其他人是否有过？

我已经尝试过 rails 3.2.13 和 3.2.12 并且它们都做同样的事情。

**编辑**

在活动记录中创建和创建！最终以应该返回记录或引发异常的这种方法结束。

```
def create_record(attributes, options, raise = false, &block)
  unless owner.persisted?
    raise ActiveRecord::RecordNotSaved, "You cannot call create unless the parent is saved"
  end

  if attributes.is_a?(Array)
    attributes.collect { |attr| create_record(attr, options, raise, &block) }
  else
    transaction do
      add_to_target(build_record(attributes, options)) do |record|
        yield(record) if block_given?
        insert_record(record, true, raise)
      end
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:09:23.693

如果我没记错的话， [Factory Girl](https://github.com/thoughtbot/factory_girl)通过预定义的工厂模拟您正在处理的实际对象。因此`User#articles`，在工厂调用时可能不会返回您认为的内容。

改变

```
user.articles.create! { title: 'blah' } 
```

至

```
create(:article, user: user, title: 'blah') 
```

应该通过 Factory Girl 的界面强制执行关联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T09:54:36.823

`attr_accessible`我相信你或`attr_accessor`你的`Article`班级发生了什么事。我你可能没有包括`user_id`或其他东西......

这里也有一个类似的问题：[rails Model.create(:attr=>"value") returns model with uninitialized fields](https://stackoverflow.com/questions/5136521/rails-model-createattr-value-returns-model-with-uninitialized-fields)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-17T15:29:47.580

我有同样的症状，这个问题是我能找到的唯一相关问题。我会把我的解决方案混在一起，以防它帮助其他人。

该代码在现实生活中有效，仅在`rspec`. 我所做的所有故障排除都毫无意义，指向`create!`被破坏，我从不相信。

事实证明，我在嘲笑它，`create!`所以它从来没有被调用过。添加`.and_call_original`到我的模拟中解决了这个问题。

我的模型是这样的：（不是真的......但与这个答案兼容）

```
class Flight < ApplicationRecord
  has_many :seats

  def create_seats(seat_count)
    seat_count.times { Seat.create!(flight: self) }
    seats.each(&:raise_seatback_and_lock_tray)
  end 
```

我的测试是：

```
it 'creates enough empty seats' do
  expect(LicenseFile).to receive(:create!).twice
  flight.create_seats(2)
end 
```

达到了预期（手动确认），但出现了错误：

```
 NoMethodError:
   undefined method `raise_seatback_and_lock_tray=' for nil:NilClass 
```

更改我的模拟以允许`create!`实际调用解决了问题：

```
it 'creates a LicenseFile for each destination rule' do
  expect(LicenseFile).to receive(:create!).twice.and_call_original
  flight.create_seats(2)
end 
```

现在通过了：

```
 creates enough empty seats
1 example, 0 failures 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-21T09:43:05.493

如果您希望返回对象，请使用

```
user.articles.create { title: 'blah' } 
```

为什么有些方法有爆炸（！），你可以阅读这个主题 [为什么在Ruby方法中使用感叹号？](https://stackoverflow.com/questions/612189/why-are-exclamation-marks-used-in-ruby-methods)

# ruby - Ruby：在数组中搜索某些条件的简单方法是什么？

> ID：15543893
> 
> 赞同：2
> 
> 时间：2013-03-21T09:40:30.717
> 
> 标签：ruby, arrays, criteria

我有一个数组，我想确保所有数字都在 1 到 6 之间。这是我的数组：

```
guess = [2, 5, 6, 8] 
```

或类似的东西。用户输入序列。无论如何，我想要一种方法来检查它，如果数字不都在 1 到 6 之间，它就不会跳出循环。也可以简单点！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T09:51:43.210

```
guess.all?{|i| (1..6).include?(i)} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-06T04:11:25.317

```
guess.count{|i| i.between?(1,6)} == guess.size 
```

# python - python子进程popen运行多个命令

> ID：15543894
> 
> 赞同：0
> 
> 时间：2013-03-21T09:40:31.403
> 
> 标签：python, amazon, popen

我想在 Python 中调用多个命令。我在 Windows 上安装了腻子。

1.  ssh 到 Linux 机器

    ```
    ssh_command_string: plink -i yourppk.ppk ec2-user@instanceIp 
    ```

2.  从该机器调用将生成文件的命令

    ```
    export_project_command_string: ./AppManage -export -out /opt/notme-Facebook.xml -app "Silver Fabric/notme-FacebookPostsExtraction0118" -user username-pw password -domain ion 
    ```

3.  下载这个文件

    ```
    download_command_string: pscp -scp -i yourppk.ppk ec2-user@instanceIp:/opt/notme-Facebook.xml d:\ 
    ```

这些命令在我一一测试时是可以的，但我不知道如何在 Python 中一次调用它们。

我尝试了以下代码，但没有运气：

```
LINE_BUFFERED = 1
    #NOTE: the first argument is a list
    p = Popen(['cat'], shell = True, bufsize=LINE_BUFFERED, stdin=PIPE, stdout = PIPE, stderr = PIPE)
    for cmd in [ssh_command_string, cd_command_string, export_project_command_string, download_command_string]:
        time.sleep(1) # a delay to see that the commands appear one by one
        p.stdin.write(cmd)
        p.stdin.flush()
    # even without .flush() it works as expected on my machine
    p.stdin.close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:15:55.787

查看[结构](http://docs.fabfile.org/en/1.6/ "织物")以在服务器上执行重复/自动任务。

# javascript - 检查 window.onerror 是否可用

> ID：15543901
> 
> 赞同：0
> 
> 时间：2013-03-21T09:40:47.127
> 
> 标签：javascript, logging, developer-tools

在我的 javascript 日志框架中，我正在通过 window.onerror 处理程序捕获未处理的异常。

我如何检查 window.onerror 是否可用。因为在少数浏览器中它无法识别 window.onerror。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:48:42.363

您可以检查：

```
if(typeof window.onerror === 'undefined'){
// you can't use window.onerror
}else{
//you can
} 
```

查看 MDN 文档，了解如何覆盖或创建某种可以跨浏览器工作的 polyfill：

[https://developer.mozilla.org/en/docs/DOM/window.onerror](https://developer.mozilla.org/en/docs/DOM/window.onerror)

# javascript - 通过正则表达式拆分 JS 字符串？

> ID：15543903
> 
> 赞同：2
> 
> 时间：2013-03-21T09:40:55.733
> 
> 标签：javascript, regex

我有 `MMYY`模式（信用卡到期）

我需要分析每个部分（01 和 14）：所以我尝试了：

```
'0114'.split(/\d{2}/i) //  ["", "", ""] 
```

它实际上将 2 个数字视为分隔符，因此我什么也得不到。

但是，我设法做到了：

```
'0114'.match(/\d{2}/ig) //["01", "14"] 
```

但我想知道`split`。

我*也*可以这样做吗`split`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T09:42:39.037

例如：

```
"1234".split(/(?=..$)/) => ["12", "34"] 
```

任意长度字符串的通用解决方案似乎是不可能的，我们能得到的最好的解决方案是：

```
str.split(str.length & 1 ? /(?=(?:..)*.$)/ : /(?=(?:..)+$)/) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T09:43:25.287

这应该这样做：

```
 '0114'.split(/(?=..$)/) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T09:45:22.293

没有理由使用正则表达式 - 我只是使用子字符串：

```
var str = '0114';
var month = str.substr(0, 2);
var year = str.substr(2, 2);
console.log(month, year); // 01 14 
```

# sql - 每个订单只有最后日期结果？如何？

> ID：15543906
> 
> 赞同：0
> 
> 时间：2013-03-21T09:41:08.577
> 
> 标签：sql, tsql, reporting-services, where

所以基本上我得到了这张桌子

```
OrderID|       ChangeDate      | 
-------|-----------------------|
Order1 |2013-03-17 14:40:47.000|
Order1 |2013-03-20 16:09:09.000|
Order2 |2013-03-12 12:34:09.000|
Order3 |2013-03-20 18:30:12.000|
Order2 |2013-03-20 12:39:49.000| 
```

我想要和需要的是每个 OrderID 的前一个，（现在我得到大约 28000 个结果[整个表]，每个订单 100 次左右）我只需要前一个（最后更改日期）我当前的查询看起来像这样：

```
Select
     a.AuftragID
    ,a.Kunde
    ,max(ChangeDate)
From Orders O innerJoin
     factTable F on O.OrderID = F.OrderID
Group by a.AuftragID
        ,a.Kunde 
```

我该怎么做才能像往常一样只获得每个订单的最佳结果（最新更改日期结果），非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:44:44.090

使用`ROW_NUMBER`：

```
WITH cte 
     AS (SELECT F.auftragid, 
                F.kunde, 
                changedate, 
                rn = Row_number() 
                     OVER( 
                       partition BY O.orderid 
                       ORDER BY changedate DESC) 
         FROM   orders O 
                INNER JOIN facttable F 
                        ON O.orderid = F.orderid) 
SELECT auftragid, 
       kunde, 
       changedate 
FROM   cte 
WHERE  rn = 1 
```

（请注意，我假设您的示例查询中的别名是一种类型，`a`实际上是`f`）

[**TSQL 排名函数**](http://msdn.microsoft.com/en-us/library/ms189798.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:12:45.820

将返回限制为一个：

```
Select
     a.AuftragID
    ,a.Kunde
    ,max(ChangeDate)
From Aufträge a, factTable F
where a.AuftragID = F.OrderID
Group by a.AuftragID
     ,a.Kunde
order by a.AuftragID DESC
limit 1 
```

# macos - 架构 x86_64 的未定义符号：_MSImageSelectionIsDoneNotification

> ID：15543907
> 
> 赞同：0
> 
> 时间：2013-03-21T09:41:08.757
> 
> 标签：macos, cocoa, x86-64

我一直在尝试解决这个问题，但找不到解决方案。

我有一个 MSCropImageView 定义

```
extern NSString * const MSImageSelectionIsDoneNotification; 
```

在其标题中，并且

```
NSString * const MSImageSelectionIsDoneNotification = @"MSApp.MSImageSelectionIsDoneNotification"; 
```

在 MSCropImageView.m

但是当我打电话时

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(selectionIsDone:) name:MSImageSelectionIsDoneNotification object:self.imageView]; 
```

从另一个文件中，我得到错误未定义的符号架构 x86_64。我已经包含了定义符号的头文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:46:47.590

这不仅仅是需要的头文件，我的猜测是 MSCropImageView.m 实际上并未包含在您构建的应用程序中。

换句话说，转到项目的文件列表，然后打开“文件检查器”视图（位于右侧）。对我来说，它看起来像这样：

![确保为您的 .m 文件选择了 Target Membership](../Images/77aadfbd6f649c902ca57a67c935f6af.png)

确保为您构建的应用选中了带圆圈的复选框。

# sql - 将表中列的值分配为另一个表的列名

> ID：15543908
> 
> 赞同：0
> 
> 时间：2013-03-21T09:41:10.923
> 
> 标签：sql, asp.net-mvc, sql-server-2008, pivot

我有一个父表`SalType`，该表`Saltype_name`中是列名。另一个`StaffSal`与 有外键关系的表`SalType`。在`StaffSal`我为每个 SalType_name 输入值

表结构是这样的

```
SalType --table1
SS_id  SalType_name
1      Basic
2      HRA
3      DA

StaffSal  --table2
SV_id  SS_id  SV_value   U_id
2       1       15000    11
3       2       0.1      11
4       3       0.75     11
5       1      10000     12
6       2       0.01     12
7       3       0.5      12 
```

我需要这样显示

```
U_id  Basic  HRA   DA ...
11    15000  .1    .75
12    10000  .01   .5 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:18:24.283

有几种方法可以将数据从行转换为列。

SQL Server 具有`PIVOT`可用于旋转数据的功能。

如果您希望将有限数量的值转换为列，则可以对查询进行硬编码：

```
select u_id, Basic, HRA, DA
from
(
  select t.saltype_name,
    s.u_id,
    s.sv_value
  from saltype t
  left join staffsal s
    on t.ss_id = s.ss_id
) src
pivot
(
  max(sv_value)
  for saltype_name in (Basic, HRA, DA)
) piv; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/8151f/4)。

但是，如果您有未知数量的值，那么您将需要实现动态 SQL 来生成结果：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT ',' + QUOTENAME(SalType_name) 
                    from SalType
                    group by SS_id, SalType_name
                    order by SS_id 
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT u_id, ' + @cols + ' 
              from 
             (
                select t.saltype_name,
                  s.u_id,
                  s.sv_value
                from saltype t
                left join staffsal s
                  on t.ss_id = s.ss_id
            ) x
            pivot 
            (
                max(sv_value)
                for saltype_name in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/8151f/2)。

两个查询都给出了结果：

```
| U_ID | BASIC |  HRA |   DA |
------------------------------
|   11 | 15000 |  0.1 | 0.75 |
|   12 | 10000 | 0.01 |  0.5 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T10:09:48.400

可以使用 sql server 中的 Pivot 来获得上述结果。

```
SELECT * FROM 
          (SELECT
               SV_value,
               SalType_name,
               U_id
           FROM 
              StaffSal
           INNER JOIN SalType 
                   ON StaffSal.SS_id= SalType.SS_id) AS SalaryDetails
PIVOT (SUM(SV_value) FOR SalType_name IN (HRA,Basic,DA)) AS PVT 
```

# sql - 从 Oracle 提取数据时 SQL Server 2005 的表锁定行为

> ID：15543912
> 
> 赞同：0
> 
> 时间：2013-03-21T09:41:18.250
> 
> 标签：sql, sql-server-2005, linked-server, type-conversion

我试图了解以下情况下的 SQL Server 行为。

我使用在 SQL Server 中创建的链接服务器将大约 50 万行从 Oracle 提取到 SQL Server 2005 数据库中。我正在使用大约 50 个奇数列进行`Insert Into select`查询。

我发现查询没有完成，它曾经无限期地运行，直到我手动停止它。但是大约 1 小时后，如果我检查目标表，我就能找到表中的行。但是查询既没有停止执行，也没有释放目标表上的排他锁。

当我使用 Oracle 链接服务器发起一个简单查询时，我发现 Oracle 和 SQL Server 中的一些数据类型必须显式转换（尤其是 Oracle`numeric`到 SQL Server `Varchar`）。

在所有出现此问题的数据类型都被显式转换后，我能够毫无问题地完成整个提取，即查询正常停止并释放表上的排他锁。

我的问题是，尽管查询中存在数据类型转换问题，为什么查询仍会获取所有数据，为什么即使在获取所有数据后仍保持锁定？对此的任何解释将不胜感激（即使问题已解决:)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:32:46.883

MS SQL 使用各种锁，行、列、表。它可能将锁升级到表。它还将更新每行插入的每个相关索引，除非您告诉它不要这样做。解决这个问题有两种方法： 批量插入行：比如 1000 或 10000，尝试为您的列宽度找到合适的批量大小。或者，禁用索引（并记住重新启用它们）。MSSQL 将不得不对整个选择进行所有类型转换，并且可能会使用 tempdb 或内存，因此如果那里有任何限制，这也会减慢速度：内存交换文件等，但分批进行会消除这种情况瓶颈。此外，每个插入都将是一个隐式转换，为了保持一致性，SQL 需要能够回滚......不要忘记将所有这些写入日志文件。

# java - 无法在不同的机器上运行 RMI 客户端

> ID：15543915
> 
> 赞同：0
> 
> 时间：2013-03-21T09:41:23.690
> 
> 标签：java, rmi, classnotfoundexception

我正在尝试在 LAN 中的远程计算机上运行 RMI 客户端。我已经在局域网中的另一台机器上实现了服务器和注册表。它在同一台机器上运行良好。但是当我尝试在不同的机器上运行客户端程序时，它显示以下异常： java.rmi.UnmarshalException: error unmarshalling return; 嵌套异常是：java.lang.ClassNotFoundException：CalculatorImpl_Stub（无安全管理器：RMI 类加载器已禁用）

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T23:00:17.000

您尚未将存根文件分发给客户端。

# oracle - PL/SQL 编程：使用块标签来区分变量

> ID：15543916
> 
> 赞同：2
> 
> 时间：2013-03-21T09:41:24.783
> 
> 标签：oracle, plsql, plsqldeveloper

我已经编写了下面的代码行并从 PL/SQL Developer Tool 执行它。

我还在我的 Oracle 11g 数据库中创建了 HR 模式。

**代码**

```
CREATE TABLE employees2 AS SELECT last_name FROM employees;
<<MAIN>>
DECLARE
last_name VARCHAR2(10) := 'King';
my_last_name VARCHAR2(10) := 'King';
BEGIN

-- Deletes everyone, because both LAST_NAMEs refer to the column
DELETE FROM employees2 WHERE last_name = last_name;
dbms_output.put_line('Deleted ' || SQL%ROWCOUNT || ' rows.');
ROLLBACK;

-- OK, column and variable have different names
DELETE FROM employees2 WHERE last_name = my_last_name;
dbms_output.put_line('Deleted ' || SQL%ROWCOUNT || ' rows.');
ROLLBACK;

-- OK, block name specifies that 2nd LAST_NAME is a variable
DELETE FROM employees2 WHERE last_name = main.last_name;
dbms_output.put_line('Deleted ' || SQL%ROWCOUNT || ' rows.');
ROLLBACK;
END;
/
DROP TABLE employees2; 
```

但是在执行第一个声明语句时，它会引发如下错误

```
ORA-06550: line 4, column 0:
PLS-00103: Encountered the symbol "end-of-file" when expecting one of the following:

   * & = - + ; < / > at in is mod remainder not rem
   <an exponent (**)> <> or != or ~= >= <= <> and or like like2
   like4 likec between || multiset member submultiset 
```

请指导我，因为我对 PL/SQL 很陌生，目前正在自学。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-26T04:01:52.943

这是 PL/SQL Developer 词法分析器或解析器的错误。您可以通过将整个块包含在另一个块中来解决它`begin ... end;`。

* * *

SQL 窗口适用于 SQL 和 PL/SQL，但两种语句类型有不同的语法。编辑器窗口不需要完整的解析器。但它必须对一个语句有足够的了解，才能知道一个语句何时结束，另一个语句何时开始。启动 SQL 语句的方法有很多，而启动 PL/SQL 块的方法很少。该代码可能使用这样的分类算法：“如果它以 PL/SQL 开头，`begin`否则`end`它就是 SQL”。程序员可能忘记了 PL/SQL 可以以标签开头。由于解析器认为这是一条 SQL 语句，因此它在第一个分号处停止。

您可以在错误中看到并在下面突出显示它正在根据第一个分号拆分语句：

[![在此处输入图像描述](../Images/1ef72147bdd225bd2080a631cdaa51de.png)](https://i.stack.imgur.com/QqpBM.png)

弗兰克施密特的想法很好，通常可以解决这类问题。但在这种情况下，无论是命令行窗口还是突出显示整个表达式都无法解决问题。

唯一的解决方法似乎是像这样添加一个额外的`begin`和`end`块：

```
--Add extra begin/end to work around PL/SQL Developer parser bug.
begin
    <<main>>
    declare
        v_test number := 1;
    begin
        main.v_test := 1;
    end;
end;
/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T08:25:07.643

你的代码很好，所以我想这是一个客户端问题。

PL/SQL Developer 有不同种类的窗口——对于这种查询，您应该使用“命令窗口”（本质上是一个 SQL/Plus 提示符）。

如果运行整个脚本不起作用，请尝试单独运行每个语句（在“SQL 窗口”中，您可以选择一个代码块并仅运行所选内容）。

# visual-studio-2010 - 应用程序在 Visual Studio 中工作，但发布/调试 exe 不能

> ID：15543918
> 
> 赞同：0
> 
> 时间：2013-03-21T09:41:26.650
> 
> 标签：visual-studio-2010, directx-11, directsound

我正在使用`dx11`. 当我在 Visual Studio 中编译和运行代码时，它可以正常工作，但是如果我尝试从调试或发布文件夹中的 .exe 文件运行代码，则会出现以下错误：

```
"Could not initialize direct sound" 
```

我根本没有移动文件夹/目录。

这与直接声音不兼容有关`dx11`吗？如果是这样，为什么它仍会在 Visual Studio 中运行。

我正在使用 MS Visual Studio 10。我的直接声音类具有以下内容：

```
#pragma comment(lib, "dsound.lib")
#pragma comment(lib, "dxguid.lib")
#pragma comment(lib, "winmm.lib")
#include <windows.h>
#include <mmsystem.h>
#include <dsound.h>
#include <stdio.h> 
```

提前谢谢

# java - Android Parcelable - 当 IA 为接口时写入和读取 ArrayList<ia></ia>

> ID：15543924
> 
> 赞同：22
> 
> 时间：2013-03-21T09:41:40.830
> 
> 标签：java, android, interface, arraylist, parcelable

我有一个实现它们的接口**IA**和类**B**和**C。**B 和 C 都实现`Parcelable`了。

然后我有棘手的部分：

**D**类有一个`ArrayList< IA >`。我也需要这个在`arraylist`. 它们共享相同的结构，但**“IS-A”**关系不适用。

我需要将 D 作为包裹从一项活动传递到另一项活动。

我试过写`(ArrayList<IA>) in.readSerializable`，但我得到了一个**`IOException`**. 我知道如果 IA 不是接口问题很容易，但我似乎找不到一个简单的解决方案。

有任何想法吗？

```
@SuppressWarnings("unchecked")
public D (Parcel in) {
    list = new ArrayList<IA>();
    (...)    
    list = (ArrayList<IA>) in.readSerializable 
    }

@SuppressWarnings("rawtypes")
public static final Parcelable.Creator CREATOR =
new Parcelable.Creator() {
    public D createFromParcel(Parcel in) {
        return new D(in);
    }

    public D[] newArray(int size) {
        return new D[size];
    }
};

public int describeContents() {
    return 0;
}

public void writeToParcel(Parcel dest, int flags) {
    (...)
    dest.writeList(list);
} 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-12-10T11:14:58.660

```
 @SuppressWarnings("unchecked")
public D (Parcel in) {
    list = new ArrayList<IA>();
    (...)    
    //ERROR -> list = (ArrayList<IA>) in.readSerializable 
    list = in.readArrayList(IA.class.getClassLoader());
}

@SuppressWarnings("rawtypes")
public static final Parcelable.Creator CREATOR =
new Parcelable.Creator() {
    public D createFromParcel(Parcel in) {
        return new D(in);
    }

    public D[] newArray(int size) {
        return new D[size];
    }
};

public int describeContents() {
    return 0;
}

public void writeToParcel(Parcel dest, int flags) {
    (...)
    dest.writeList(list);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-13T14:32:27.023

我建议您安装“Android Parcelable 代码生成器”插件。在此之后，您可以生成`writeToParcel`函数、构造函数，它仅通过单击`Alt+Insert`按钮从包裹和创建者类中读取。

# string - Racket 中的列表到字符串的转换

> ID：15543935
> 
> 赞同：6
> 
> 时间：2013-03-21T09:42:10.207
> 
> 标签：string, list, scheme, racket

如何在 DrRacket 中将列表转换为字符串？例如，如何将'（红黄蓝绿）转换为“红黄蓝绿”？我尝试使用 list->string 但这似乎只适用于字符。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-21T14:11:22.220

这里的技巧是映射作为输入接收的*符号*列表，将每个符号依次转换为字符串，注意在每个符号之间添加一个空格，除了最后一个。像这样的东西：

```
(define (slist->string slst)
  (cond ((empty? slst) "")
        ((empty? (rest slst)) (symbol->string (first slst)))
        (else (string-append (symbol->string (first slst))
                             " "
                             (slist->string (rest slst)))))) 
```

或者更简单，使用高阶过程：

```
(define (slist->string slst)
  (string-join (map symbol->string slst) " ")) 
```

无论哪种方式，它都按预期工作：

```
(slist->string '(red yellow blue green))
=> "red yellow blue green" 
```

为了彻底，如果输入列表是*字符串*列表（不是问题中的符号），答案将是：

```
(define strlist (list "red" "yellow" "blue" "green"))
(string-join strlist " ")
=> "red yellow blue green" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-21T16:02:43.817

Racket 支持许多实用功能，使这变得容易。如果您只想查看列表中的内容，您可能会对“显示”感到满意。如果您关心没有括号，可以使用字符串连接。

```
#lang racket

(define my-list '(a big dog))

;; the easy way (has parens):
(~a my-list)

;; slightly harder
(string-join (map ~a my-list) " ") 
```

# iphone - 核心文本分页符

> ID：15543937
> 
> 赞同：0
> 
> 时间：2013-03-21T09:42:12.570
> 
> 标签：iphone, ios, core-text

如何在 NSAtributedString 中应用手动分页符？

例如，我想在一章结束后有一个分页符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:44:47.057

在您的字符串中使用`\n`以开始新行。

# c# - C# 随机密码生成器

> ID：15543939
> 
> 赞同：6
> 
> 时间：2013-03-21T09:42:21.243
> 
> 标签：c#, random, encoding, ascii, numericupdown

下面是代码：（passwordLengthBox 是 NumericUpDown Box，r 和 k 是随机数）

```
 private void generateButton_Click(object sender, EventArgs e)
            {
                int r, k;
                int passwordLength = (Int32)passwordLengthBox.Value;
                string password = "";
                char[] upperCase = { 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z' };
                char[] lowerCase = { 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z' };
                int[] numbers = { '0', '1', '2', '3', '4', '5', '6', '7', '8', '9' };
                Random rRandom = new Random();

                for (int i = 0; i < passwordLength; i++)
                {
                    r = rRandom.Next(3);

                    if (r == 0)
                    {
                        k = rRandom.Next(0, 25);
                        password += upperCase[k];
                    }

                    else if (r == 1)
                    {
                        k = rRandom.Next(0, 25);
                        password += lowerCase[k];
                    }

                    else if (r == 2)
                    {
                        k = rRandom.Next(0, 9);
                        password += numbers[k];
                    }

                }

                textBox.Text = password;
            } 
```

该程序所做的是创建一个随机密码，其中包含我选择的长度的字母（大写和小写）和数字。问题是程序没有**按照**我的选择设置密码长度。

例如：如果我在设置密码长度的 NumericUpDown 框 (passwordLengthBox) 中键入 5，有时它会给我 5 个字符长的密码，有时是 6/7/8 个字符长的密码。

我的错误是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-21T09:46:44.067

问题在这里：

```
int[] numbers = { '0', '1', '2', '3', '4', '5', '6', '7', '8', '9' }; 
```

使用该声明，每次将数字附加到`password`其中时，都将其视为 ASCII 数字，而不是实际值。因此，您要添加从 48 到 57 的整数，这使得结果字符串比预期的要长。

例如，当`6`作为随机数生成时，您将添加如下内容：`((int)'6').ToString()`到您的`password`变量中，实际添加的内容`54`而不是`6`.

将该数组声明为`char[]`，它将正常工作。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-21T09:51:15.967

你可以试试这个小方法。

```
public static string Random(int length)
{
    try
    {
        byte[] result = new byte[length];
        for (int index = 0; index < length; index++)
        {
            result[index] = (byte)new Random().Next(33, 126);
        }
        return System.Text.Encoding.ASCII.GetString(result);
     }
     catch (Exception ex)
     {
        throw new Exception(ex.Message, ex);
     }
} 
```

唯一的区别是它也会使用字母数字字符，例如它可能会生成类似的字符串`f6Dx3$5d£4hG7`

查看[www.asciitable.com](http://www.asciitable.com/)并计算出您要使用的字符范围。

对于[Nathan](https://stackoverflow.com/users/1012969/nathan)，如果您确切知道想要哪些字符，这是您可以做到的另一种方式...

```
public static string Random(int length)
{
    string allowed = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";
    return new string(allowed
        .OrderBy(o => Guid.NewGuid())
        .Take(length)
        .ToArray());
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-04-21T07:46:01.277

这是我的完整功能，用于生成具有所需长度的随机密码（感谢 Viacheslav Smityukh）

```
 private String GeneratePassword(int genlen = 21, bool usenumbers = true, bool uselowalphabets = true, bool usehighalphabets = true, bool usesymbols = true)
    {

        var upperCase = new char[]
            {
                'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U',
                'V', 'W', 'X', 'Y', 'Z'
            };

        var lowerCase = new char[]
            {
                'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u',
                'v', 'w', 'x', 'y', 'z'
            };

        var numerals = new char[] { '0', '1', '2', '3', '4', '5', '6', '7', '8', '9' };

        var symbols = new char[]
            {
                '~', '`', '!', '@', '#', '$', '%', '^', '&', '*', '(', ')', '{', '[', '}', ']', '-', '_', '=', '+', ':',
                ';', '|', '/', '?', ',', '<', '.', '>'
            };

        char[] total = (new char[0])
                        .Concat(usehighalphabets ? upperCase : new char[0])
                        .Concat(uselowalphabets ? lowerCase : new char[0])
                        .Concat(usenumbers ? numerals : new char[0])
                        .Concat(usesymbols ? symbols : new char[0])
                        .ToArray();

        var rnd = new Random();

        var chars = Enumerable
            .Repeat<int>(0, genlen)
            .Select(i => total[rnd.Next(total.Length)])
            .ToArray();

        return new string(chars);
    } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-08-06T16:54:17.643

这是对[series0ne](https://stackoverflow.com/users/1033686/series0ne)答案的轻微改进。该答案给出了具有相同字符的密码。（例如 %%%%%）

```
 var random = new Random((int) DateTime.Now.Ticks);
        try
        {
            var result = new byte[length];
            for (var index = 0; index < length; index++)
            {
                result[index] = (byte) random.Next(33, 126);
            }
            return System.Text.Encoding.ASCII.GetString(result);
        }
        catch (Exception ex)
        {
            throw new Exception(ex.Message, ex);
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T09:59:35.027

您可以尝试以下代码：

```
var numberOfChars = 6;

var upperCase = new char[] { 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z' };
var lowerCase = new char[] { 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z' };
var numbers = new char[] { '0', '1', '2', '3', '4', '5', '6', '7', '8', '9' };
var rnd = new Random();

var total = upperCase
    .Concat(lowerCase)
    .Concat(numbers)
    .ToArray();

var chars = Enumerable
    .Repeat<int>(0, numberOfChars)
    .Select(i => total[rnd.Next(total.Length)])
    .ToArray();

var result = new string(chars); 
```

# magento - Magento - 如何将 Mageworx 下载块放入 Template master - 简单的标签，自定义标签

> ID：15543941
> 
> 赞同：0
> 
> 时间：2013-03-21T09:42:25.760
> 
> 标签：magento, tabs

我已经安装了 Mageworx 下载扩展和 Template master - Easy tabs 扩展。可以通过管理员进行配置，将下载信息放在产品视图页面上，但无法告诉它将其放置在“简易标签”自定义标签中。

我找到了需要进行编辑的地方，但我不确定语法是否正确：

下载.xml：

```
<?xml version="1.0"?>
<layout version="0.1.0">
    <default>
        <reference name="head">
            <action method="addJs" ifconfig="mageworx_cms/downloads/enabled"><script>mageworx/downloads.js</script></action>
            <action method="addCss" ifconfig="mageworx_cms/downloads/enabled"><stylesheet>css/mageworx/downloads.css</stylesheet></action>
        </reference>
        <reference name="after_body_start">
            <block type="core/template" template="downloads/init_popup.phtml" name="init_video_popup" />
        </reference>
        <reference name="before_body_end">
            <block type="core/template" template="downloads/video_popup.phtml" name="video_popup" />
        </reference>
    </default>

    <catalog_product_view>
        <reference name="product.info">
            <block type="downloads/product" name="downloads.product" />
        </reference>
    </catalog_product_view>

    <!--catalog_category_layered>
        <reference name="product_list">
            <action ifconfig="mageworx_cms/downloads/enable_files_on_category_pages" method="setTemplate"><template>downloads/catalog-product-list.phtml</template></action>
        </reference>
    </catalog_category_layered>

    <catalog_category_default>
        <reference name="product_list">
            <action ifconfig="mageworx_cms/downloads/enable_files_on_category_pages" method="setTemplate"><template>downloads/catalog-product-list.phtml</template></action>
        </reference>
    </catalog_category_default>

    <catalogsearch_result_index>
        <reference name="search_result_list">
            <action ifconfig="mageworx_cms/downloads/enable_files_on_category_pages" method="setTemplate"><template>downloads/catalog-product-list.phtml</template></action>
        </reference>
    </catalogsearch_result_index>

    <catalogsearch_advanced_result>
        <reference name="search_result_list">
            <action ifconfig="mageworx_cms/downloads/enable_files_on_category_pages" method="setTemplate"><template>downloads/catalog-product-list.phtml</template></action>
        </reference>
    </catalogsearch_advanced_result-->
</layout> 
```

TM_EasyTabs.xml：

```
<?xml version="1.0"?>
<config>
    <modules>
        <TM_EasyTabs>
            <active>true</active>
            <codePool>community</codePool>
            <tm_link><![CDATA[http://templates-master.com/magento-extensions/magento-easy-tabs.html]]></tm_link>
            <depends>
                <Mage_Catalog />
            </depends>
            <!-- Add custom tab for downloads -->
            <action method="addTab" translate="title" module="catalog">
                <alias>downloads</alias>
                <title>Downloads test</title>
                <block>downloads/product</block>
                <template>downloads/block_file_links.phtml</template>
            </action>
         </TM_EasyTabs>   
    </modules>
</config> 
```

如您所见，我已尝试输入正确的语法，但我弄错了，因为当我取消注释时，选项卡会从产品页面消失。

编辑：

原来我编辑了错误的 xml 文件，我需要编辑的是布局文件夹中的 easytabs.xml。

我已经设法添加了一个包含下载内容的选项卡，但是因为我无法在管理员中完全禁用下载的添加，所以我现在得到了两个下载选项卡，一个用于我的自定义选项卡，一个用于下载扩展程序应该加入，但由于某种原因没有加入。

easytabs.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<layout version="0.1.0">
    <default>
        <reference name="head">
            <action method="addItem" ifconfig="easy_tabs/general/enabled"><type>skin_css</type><name>css/easytabs.css</name></action>
        </reference>
    </default>

    <catalog_product_view>
        <reference name="product.info">
            <action method="unsetChild" ifconfig="easy_tabs/general/descriptiontabbed"><name>description</name></action>
            <action method="unsetChild" ifconfig="easy_tabs/general/additionaltabbed"><name>additional</name></action>
            <action method="unsetChild" ifconfig="easy_tabs/general/upsellproductstabbed"><name>upsell_products</name></action>
        </reference>
        <reference name="right">
            <action method="unsetChild" ifconfig="easy_tabs/general/relatedtabbed"><name>catalog.product.related</name></action>
        </reference>
        <reference name="product.info.additional">
            <action method="unsetChild" ifconfig="easy_tabs/general/tagstabbed"><name>product_tag_list</name></action>
            <block type="catalog/product_view_tabs" name="product.info.tabs" as="info_tabs">
                <action method="setTemplate" ifconfig="easy_tabs/general/enabled"><template>easytabs/tabs.phtml</template></action>
                <action method="addTab" translate="title" module="catalog" ifconfig="easy_tabs/general/descriptiontabbed"><alias>description_tabbed</alias><title>Description</title><block>catalog/product_view_description</block><template>easytabs/description.phtml</template></action>
                <action method="addTab" translate="title" module="catalog" ifconfig="easy_tabs/general/additionaltabbed"><alias>additional_tabbed</alias><title>Specification</title><block>catalog/product_view_attributes</block><template>easytabs/attributes.phtml</template></action>
                <action method="addTab" translate="title" module="catalog" ifconfig="easy_tabs/general/upsellproductstabbed"><alias>upsell_products_tabbed</alias><title>We Also Recommend</title><block>catalog/product_list_upsell</block><template>catalog/product/list/upsell.phtml</template></action>
                <action method="addTab" translate="title" module="catalog" ifconfig="easy_tabs/general/relatedtabbed"><alias>related_tabbed</alias><title>Related Products</title><block>catalog/product_list_related</block><template>easytabs/catalogproductrelated.phtml</template></action>
                <action method="addTab" translate="title" module="tag"     ifconfig="easy_tabs/general/tagstabbed"><alias>tags_tabbed</alias><title>Product Tags</title><block>tag/product_list</block><template>easytabs/catalogproducttags.phtml</template></action>
                <action method="addTab" translate="title" module="review"  ifconfig="easy_tabs/general/reviewtabbed"><alias>review_tabbed</alias><title>Reviews</title><block>review/product_view_list</block><template>easytabs/catalogproductreview.phtml</template></action>
                <action method="addTab" translate="title" module="catalog" ifconfig="easy_tabs/custom/customtab"><alias>custom</alias><title>Custom tab</title><block>catalog/product_view</block><template>downloads/block_file_links.phtml</template></action>
                <action method="addTab" translate="title" module="catalog" ifconfig="easy_tabs/custom/customtab1"><alias>custom1</alias><title>Custom tab</title><block>catalog/product_view</block><template>easytabs/catalogproductcustom1.phtml</template></action>
                <action method="addTab" translate="title" module="catalog" ifconfig="easy_tabs/custom/customtab2"><alias>custom2</alias><title>Custom tab</title><block>catalog/product_view</block><template>easytabs/catalogproductcustom2.phtml</template></action>
                <action method="addTab" translate="title" module="catalog" ifconfig="easy_tabs/custom/customtab3"><alias>custom3</alias><title>Custom tab</title><block>catalog/product_view</block><template>easytabs/catalogproductcustom3.phtml</template></action>
                <action method="addTab" translate="title" module="catalog" ifconfig="easy_tabs/custom/customtab4"><alias>custom4</alias><title>Custom tab</title><block>catalog/product_view</block><template>easytabs/catalogproductcustom4.phtml</template></action>
                <action method="addTab" translate="title" module="catalog" ifconfig="easy_tabs/customcms/tabcms"><alias>cms</alias><title>CMS tab</title><block>core/template</block><template>easytabs/catalogproductcms.phtml</template></action>
                <action method="addTab" translate="title" module="catalog" ifconfig="easy_tabs/customcms/tabcms1"><alias>cms1</alias><title>CMS tab</title><block>core/template</block><template>easytabs/catalogproductcms1.phtml</template></action>
                <action method="addTab" translate="title" module="catalog" ifconfig="easy_tabs/customcms/tabcms2"><alias>cms2</alias><title>CMS tab</title><block>core/template</block><template>easytabs/catalogproductcms2.phtml</template></action>
                <action method="addTab" translate="title" module="catalog" ifconfig="easy_tabs/customcms/tabcms3"><alias>cms3</alias><title>CMS tab</title><block>core/template</block><template>easytabs/catalogproductcms3.phtml</template></action>
                <action method="addTab" translate="title" module="catalog" ifconfig="easy_tabs/customcms/tabcms4"><alias>cms4</alias><title>CMS tab</title><block>core/template</block><template>easytabs/catalogproductcms4.phtml</template></action>
                <action method="addTab" translate="title" module="downloads">
                    <alias>downloads_test</alias>
                    <title>Downloads test</title>
                    <block>downloads/product</block>
                    <template>downloads/block_file_links.phtml</template>
                </action>
            </block>
        </reference>
    </catalog_product_view>
</layout> 
```

我现在需要删除额外的选项卡，但删除我的引用会删除它们...

解决了：

在我的 addTab 操作之后添加了这个，它删除了额外的选项卡：

```
<action method="unsetChild"><name>downloads_test</name></action> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:29:13.920

布局/easytabs.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<layout version="0.1.0">
    <default>
        <reference name="head">
            <action method="addItem" ifconfig="easy_tabs/general/enabled"><type>skin_css</type><name>css/easytabs.css</name></action>
        </reference>
    </default>

    <catalog_product_view>
        <reference name="product.info">
            <action method="unsetChild" ifconfig="easy_tabs/general/descriptiontabbed"><name>description</name></action>
            <action method="unsetChild" ifconfig="easy_tabs/general/additionaltabbed"><name>additional</name></action>
            <action method="unsetChild" ifconfig="easy_tabs/general/upsellproductstabbed"><name>upsell_products</name></action>
        </reference>
        <reference name="right">
            <action method="unsetChild" ifconfig="easy_tabs/general/relatedtabbed"><name>catalog.product.related</name></action>
        </reference>
        <reference name="product.info.additional">
            <action method="unsetChild" ifconfig="easy_tabs/general/tagstabbed"><name>product_tag_list</name></action>
            <block type="catalog/product_view_tabs" name="product.info.tabs" as="info_tabs">
                <action method="setTemplate" ifconfig="easy_tabs/general/enabled"><template>easytabs/tabs.phtml</template></action>
                <action method="addTab" translate="title" module="catalog" ifconfig="easy_tabs/general/descriptiontabbed"><alias>description_tabbed</alias><title>Description</title><block>catalog/product_view_description</block><template>easytabs/description.phtml</template></action>
                <action method="addTab" translate="title" module="catalog" ifconfig="easy_tabs/general/additionaltabbed"><alias>additional_tabbed</alias><title>Specification</title><block>catalog/product_view_attributes</block><template>easytabs/attributes.phtml</template></action>
                <action method="addTab" translate="title" module="catalog" ifconfig="easy_tabs/general/upsellproductstabbed"><alias>upsell_products_tabbed</alias><title>We Also Recommend</title><block>catalog/product_list_upsell</block><template>catalog/product/list/upsell.phtml</template></action>
                <action method="addTab" translate="title" module="catalog" ifconfig="easy_tabs/general/relatedtabbed"><alias>related_tabbed</alias><title>Related Products</title><block>catalog/product_list_related</block><template>easytabs/catalogproductrelated.phtml</template></action>
                <action method="addTab" translate="title" module="tag"     ifconfig="easy_tabs/general/tagstabbed"><alias>tags_tabbed</alias><title>Product Tags</title><block>tag/product_list</block><template>easytabs/catalogproducttags.phtml</template></action>
                <action method="addTab" translate="title" module="review"  ifconfig="easy_tabs/general/reviewtabbed"><alias>review_tabbed</alias><title>Reviews</title><block>review/product_view_list</block><template>easytabs/catalogproductreview.phtml</template></action>
                <action method="addTab" translate="title" module="catalog" ifconfig="easy_tabs/custom/customtab"><alias>custom</alias><title>Custom tab</title><block>catalog/product_view</block><template>downloads/block_file_links.phtml</template></action>
                <action method="addTab" translate="title" module="catalog" ifconfig="easy_tabs/custom/customtab1"><alias>custom1</alias><title>Custom tab</title><block>catalog/product_view</block><template>easytabs/catalogproductcustom1.phtml</template></action>
                <action method="addTab" translate="title" module="catalog" ifconfig="easy_tabs/custom/customtab2"><alias>custom2</alias><title>Custom tab</title><block>catalog/product_view</block><template>easytabs/catalogproductcustom2.phtml</template></action>
                <action method="addTab" translate="title" module="catalog" ifconfig="easy_tabs/custom/customtab3"><alias>custom3</alias><title>Custom tab</title><block>catalog/product_view</block><template>easytabs/catalogproductcustom3.phtml</template></action>
                <action method="addTab" translate="title" module="catalog" ifconfig="easy_tabs/custom/customtab4"><alias>custom4</alias><title>Custom tab</title><block>catalog/product_view</block><template>easytabs/catalogproductcustom4.phtml</template></action>
                <action method="addTab" translate="title" module="catalog" ifconfig="easy_tabs/customcms/tabcms"><alias>cms</alias><title>CMS tab</title><block>core/template</block><template>easytabs/catalogproductcms.phtml</template></action>
                <action method="addTab" translate="title" module="catalog" ifconfig="easy_tabs/customcms/tabcms1"><alias>cms1</alias><title>CMS tab</title><block>core/template</block><template>easytabs/catalogproductcms1.phtml</template></action>
                <action method="addTab" translate="title" module="catalog" ifconfig="easy_tabs/customcms/tabcms2"><alias>cms2</alias><title>CMS tab</title><block>core/template</block><template>easytabs/catalogproductcms2.phtml</template></action>
                <action method="addTab" translate="title" module="catalog" ifconfig="easy_tabs/customcms/tabcms3"><alias>cms3</alias><title>CMS tab</title><block>core/template</block><template>easytabs/catalogproductcms3.phtml</template></action>
                <action method="addTab" translate="title" module="catalog" ifconfig="easy_tabs/customcms/tabcms4"><alias>cms4</alias><title>CMS tab</title><block>core/template</block><template>easytabs/catalogproductcms4.phtml</template></action>
                <action method="addTab" translate="title" module="downloads">
                    <alias>downloads_test</alias>
                    <title>Downloads test</title>
                    <block>downloads/product</block>
                    <template>downloads/block_file_links.phtml</template>
                </action>
                <action method="unsetChild"><name>downloads_test</name></action>
            </block>
        </reference>
    </catalog_product_view>
</layout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-01T10:14:27.847

MageWorx 的文件下载扩展应该与 TM_EasyTabs 完全兼容。问题的最可能原因是 FileDownloads 扩展在 EasyTabs 之前加载。要解决它，请尝试编辑文件 app/etc/modules/MageWorx_Downloads.xml

```
From:
<config>
    <modules>
        <MageWorx_Downloads>
            <active>true</active>
            <codePool>local</codePool>
            <extension_name><![CDATA[File Downloads & Product Attachments]]></extension_name>
        </MageWorx_Downloads>
    </modules>
</config>

To:
<config>
    <modules>
        <MageWorx_Downloads>
            <active>true</active>
            <codePool>local</codePool>
            <extension_name><![CDATA[File Downloads & Product Attachments]]></extension_name>
            <depends><TM_EasyTabs /></depends>
        </MageWorx_Downloads>
    </modules>
</config> 
```

如果这没有帮助，请随时联系 MageWorx 的支持团队。

# box-api - Box.net API 有没有办法延长访问令牌的到期时间？

> ID：15543943
> 
> 赞同：0
> 
> 时间：2013-03-21T09:42:27.913
> 
> 标签：box-api

有没有办法延长 Box API 的访问令牌的到期时间？

“每个 access_token 有效期为 1 小时”对我的应用程序来说太短了，“刷新令牌”用处不大。

我真的需要很长的到期时间。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:25:39.887

访问令牌的有效期为一小时，但刷新令牌可用于检索在额外一小时内有效的新访问令牌。目前没有办法延长个人访问令牌的寿命。

# javascript - 如何获得只有 来自具有 html 代码的内容的标记的 innnerHTML

> ID：15543950
> 
> 赞同：2
> 
> 时间：2013-03-21T09:42:47.987
> 
> 标签：javascript

我是 JavaScript 新手。任何人都可以提供如何在数组中获取 li 标记 innerHTML 的想法。例如：

```
var content = '<li>Item 1</li>
<li>Item 2
 <ol>
  <li>Item 3</li>
  <li>Item 4</li>
 </ol>
</li>
<li>Item 5</li>' 
```

我想迭代它，以便我可以得到如下输出：

```
arr[0]='<li>Item 1</li>'
arr[1]='<li>Item 2
 <ol>
  <li>Item 3</li>
  <li>Item 4</li>
 </ol>
</li>'
arr[2]='<li>Item 5</li>' 
```

此外，嵌套的 li 也可以通过在嵌套的 ol 中迭代来类似地使用。

我想使用类似的东西，`document.getElementsByTagName("li");`但它应该只使用内容变量数据。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:00:06.020

尝试使用 jQuery

```
var el = $('<div />').append( content  ),
    ar  = [];

el.find('>li').each( function(){
    ar.push(
        $(this).clone().wrap('<p>').parent().html()
    )
});

console.log( ar ); 
```

并在控制台中打印`console.log( ar );`

```
[
 "<li>Item 1</li>" , 
 "<li>Item 2<ol><li>Item ...i>Item 4</li></ol></li>","<li>Item 5</li>" ,
 "<li>Item 5</li>"
] 
```

所以你可以访问它 ar[0] 或 1 .. 2 等等 ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:46:17.103

您可以尝试使用 [JQuery API](http://api.jquery.com/each/)

```
<ul>
<li>foo</li>
<li>bar</li>
</ul>

$( "li" ).each(function( index ) {
console.log( index + ": " + $(this).text() );
}); 
```

因此，列表中的每个项目都会记录一条消息：

0: 富 1: 酒吧

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T09:54:29.107

看看这个，让我知道 [http://jsfiddle.net/MrTJM/](http://jsfiddle.net/MrTJM/)

```
 $(document).ready(function() {
     // Handler for .ready() called.

     $( "li" ).each(function( count ) {
    console.log( count + ": " + $(this).text() );
    }); 
```

});

# javascript - 如何让浏览器记住通过 ajax 和 jquery 生成的多标签分页内容中显示的最后一页？

> ID：15543953
> 
> 赞同：1
> 
> 时间：2013-03-21T09:42:56.660
> 
> 标签：javascript, jquery, ajax, browser

我有一个选项卡式内容。基于以下 HTML：

```
<ul class="tabContainer">
</ul>

<div id="tabContent">
     <div id="contentHolder">
        <!-- The AJAX fetched content goes here -->
     </div>
   <div id="pagination"></div>
</div> 
```

f_tab 是管理上述 HTML 内容的函数，包括以下操作：

*   生成选项卡。
*   执行获取 php 页面并在选项卡持有者中返回结果的 AJAX。
*   使用 jPaginator 插件（[https://github.com/remylab/jpaginator](https://github.com/remylab/jpaginator)）对内容持有者内的每个内容进行分页：

    ```
     function f_tab(str){
    $(document).ready(function(){

            var Tabs = {
            '1' : 'page1.php?p='+var,
            '2' : 'page2.php?p='+var,
            '3' : 'page3.php?p='+var,

        }

     var topLineColor = {
        blue:'lightblue',
        blue:'lightblue',
        blue:'lightblue',}

    $.each(Tabs,function(i,j){

        var tmp = $('<li><a href="" class="tab">'+i+' <span class="left" /><span class="right" /></a></li>');

        tmp.find('a').data('page',j);

        $('ul.tabContainer').append(tmp);
    })

    var the_tabs = $('.tab');

    the_tabs.click(function(e){

        var element = $(this);

        if(!element.data('cache'))
        {   

            $.get(element.data('page'),function(msg){
                $('#contentHolder').html(msg);
                element.data('cache',msg);
            });
        }
        else {
        $('#contentHolder').html(element.data('cache'));

        }
        e.preventDefault();

    })

    the_tabs.eq(2).click();    });       return false;        } 
    ```

分页功能（仅供参考）是：

```
 (function($){

    $.fn.extend({ 
        MyPagination: function(options) {
            var defaults = {
                height: 600,
                fadeSpeed: 1000
            };
            var options = $.extend(defaults, options);

            //Creating a reference to the object
            var objContent = $(this);

            // other inner variables
            var fullPages = new Array();
            var subPages = new Array();
            var height = 0;
            var lastPage = 1;
            var paginatePages=null;
            var numero=0;

            // initialization function
            init = function() {
                objContent.children().each(function(i){
                    if (height + this.clientHeight > options.height) {
                        fullPages.push(subPages);
                        subPages = new Array();
                        height = 0;
                    }

                    height += this.clientHeight;
                    subPages.push(this);
                });

                if (height > 0) {
                    fullPages.push(subPages);
                }

                // wrapping each full page
                $(fullPages).wrap("<div class='page'></div>");

                // hiding all wrapped pages

                objContent.children().hide();

                // making collection of pages for pagination
                paginatePages = objContent.children();

                numero=$(paginatePages).length;

                // show first page
                showPage(lastPage);

            };

            // show page function
            showPage = function(page) {
                i = page - 1; 
                if (paginatePages[i]) {

                    // hiding old page, display new one
                    $(paginatePages[lastPage]).hide();
                    lastPage = i;
                    $(paginatePages[lastPage]).fadeIn(options.fadeSpeed);

                }
            };

            // show pagination function (draw switching numbers)

            // perform initialization
            init();

            //$(document).ready(function(){
            $("#pagination").jPaginator({ 
                nbPages:numero,
                marginPx:5,
                nbVisible:8, 
                overBtnLeft:'#over_backward', 
                overBtnRight:'#over_forward', 
                maxBtnLeft:'#max_backward', 
                maxBtnRight:'#max_forward', 
                onPageClicked: function(a,num) {

                    showPage(num);
                } 
            });
            //});

        }
    });
})(jQuery); 
```

**问题：** 如何让浏览器在从一个选项卡传递到另一个选项卡时记住选项卡中最后显示的页面。比如tab1显示的最后一页是page5，点击另一个tab后又回到tab1，怎么才能看到tab1的page5呢？

感谢您的时间。帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:08:59.187

因为您正在 AJAX 加载每个选项卡，所以它会丢失所有状态信息。据我所知，您有以下选择：

1.  不要 AJAX 加载选项卡。这意味着页面的加载时间更长，但更改选项卡之间的等待时间更少。

2.  **理想：**更改您的选项卡更改功能以检查内容是否已加载。如果尚未完成，则仅在内容中使用 AJAX。

3.  将页面状态保存在变量中，并在每次加载选项卡时将页面更改为变量值。

# python - 肥皂错误：错误 SOAP-ENV：服务器：不能使用 stdClass 类型的对象作为数组

> ID：15543960
> 
> 赞同：0
> 
> 时间：2013-03-21T09:43:11.040
> 
> 标签：python, web-services, soap, python-2.7, soap-client

我想用肥皂访问我的互联网提供商的网络服务。

这是来自 Soap 服务提供商的 php 示例：http: [//kasapi.kasserver.com/dokumentation/ ?open=soap](http://kasapi.kasserver.com/dokumentation/?open=soap)

但我没有变得聪明，让它在 python 中运行。我总是收到此错误消息：“不能将 stdClass 类型的对象用作数组”

任何想法如何解决这个问题？！我的程序有 34 行....

这是代码：

```
from SOAPpy import WSDL
from SOAPpy.Errors import HTTPError as SoapHTTPError
from SOAPpy.Types import faultType
import hashlib
from array import array

class KASSystem(object):

    def __init__(self):
        WSDL_AUTH = 'https://kasapi.kasserver.com/soap/wsdl/KasAuth.wsdl'
        WSDL_API = 'https://kasapi.kasserver.com/soap/wsdl/KasApi.wsdl'

        userpass = ['mylogin','mypassword']
        m = hashlib.sha1()
        m.update(userpass[1])

        userpass[1] = m.hexdigest()
        loginData = {'user':userpass[0],'pass':userpass[1]}

        self.__SoapServer = WSDL.Proxy(WSDL_AUTH)

        try:
            self.__CredentialToken = self.__SoapServer.KasAuth({
                'KasUser':loginData['user'],
                'KasAuthType':'sha1',
                'KasPassword':loginData['pass'],
                'SessionLifeTime':1800,'SessionUpdateLifeTime':'Y'})

        except (SoapHTTPError), e:
            print "Fehlermeldung:", e.code,e.msg

KasObj = KASSystem() 
```

我收到此错误消息：

```
Traceback (most recent call last):
  File "/storage/PyProjects/toolsAPP/KASUpdate.py", line 33, in <module>
    KasObj = KASSystem()
  File "/storage/PyProjects/toolsAPP/KASUpdate.py", line 28, in __init__
    'SessionLifeTime':1800,'SessionUpdateLifeTime':'Y'})
  File "build/bdist.linux-x86_64/egg/SOAPpy/Client.py", line 540, in __call__
  File "build/bdist.linux-x86_64/egg/SOAPpy/Client.py", line 562, in __r_call
  File "build/bdist.linux-x86_64/egg/SOAPpy/Client.py", line 475, in __call
SOAPpy.Types.faultType: <Fault SOAP-ENV:Server: Cannot use object of type stdClass as array> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T07:25:13.257

方法的第一个参数必须是消息名称，第二个参数是带有所有参数的字典......

# oracle - 这些 oracle 查询之间有什么区别吗？

> ID：15543970
> 
> 赞同：2
> 
> 时间：2013-03-21T09:43:45.160
> 
> 标签：oracle

我有两个 oracle 查询

1) created_dt 在 sysdate+7 和 sysdate 之间

2) sysdate 和 sysdate+7 之间的 created_dt

这两个查询会给出相同的结果吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:50:50.537

第一个永远不会返回任何行。

你可以考虑一个介于

```
where col between A and B 
```

与

```
where col >= A and col <= B 
```

所以你的第一个是不合逻辑的

```
created_dt >= sysdate+7 and created_dt <= sysdate 
```

这两个条件永远都不成立。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T09:51:06.067

在 SQL 中，构造`x BETWEEN a AND b`等价于`a <= x AND x <= b`.

显然，如果`a > b`，此约束将产生空结果。

换句话说，交换间隔结束确实很重要：first 必须小于或等于 second。

# ios - Get a child from a certain class

> ID：15543973
> 
> 赞同：1
> 
> 时间：2013-03-21T09:43:57.927
> 
> 标签：ios, objective-c

I'm using a ViewController `@interface PagerViewController : UIViewController <UIScrollViewDelegate>` where I add other ViewControllers as a child ( `addChildViewController` ) Those ViewControllers that I add are from difference classes but they all inherit from UIViewController. I can loop thru them using this code:

```
 for(NSUInteger i = 0; i<(unsigned int)[_app.windows count]; i++) {

    NSLog(@"%@",((MyViewController*)[self.childViewControllers objectAtIndex:i]).getQAnswer);

} 
```

However, I always need to cast it to the correct one (in the above example I cast it to MyViewController. The problem is that there are many childs from different classes on it, so what if I only want the childs from the class "anotherViewController" instead of "MyViewController"?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:47:22.697

You can use isKindOfClass to filter those objects which are instances of a certain class. for example:

```
if ([object isKindOfClass:[anotherViewController class]]) {

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:54:49.350

If you want objects from certain class, use `isMemberOfClass:`, if you want to include descendant classes, use `isKindOfClass:`.
E.g. if arr is NSMutableArray then `[arr isKindOfClass:[NSArray class]]` is TRUE and`[arr isMemberOfClass:[NSArray class]]` is FALSE.

# c# - 从控制器调用管理器选择哪个参数

> ID：15543976
> 
> 赞同：0
> 
> 时间：2013-03-21T09:44:13.070
> 
> 标签：c#, parameters

我正在创建一个方法，实现到将要从控制器 ReqController 调用的管理器（如 ReqManager）中，

定义可以是：

```
public void LockTransDetail(IRow detailRow, DataSet data, string fieldName, bool lockYN)

public void LockTransDetail(IRow detailRow, IDecorator decorator, string fieldName, bool lockYN) 
```

所以我可以执行第一个，然后执行，

```
public void LockTransDetail(IRow detailRow, DataSet data, string fieldName, bool lockYN)
{
    IDecorator decorator = GetDecorator(data);
    ...... 
} 
```

或者第二个选项是，进入控制器做：

```
IDecorator decorator = GetDecorator(data); 
```

然后调用该方法，

```
ReqControllerInstance.LockTransDetail(detailRow, decorator, fieldName, lockYN) 
```

那么将 DataSet 或 de 装饰器作为参数传递给 created 方法，有什么更好的方法呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:51:32.660

第二个选项似乎更通用且可测试：您的类实现将与具体`data`表示分离，这意味着您将能够轻松地`DataSet`用其他任何东西替换并且不必更改`LockTransDetail()`合同，因为它仅取决于`IDecorator`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:55:01.907

我不完全确定我理解了你的问题，但如果我理解了，你会问控制器是否更好地在管理器上调用一个单一方法（`Manager.DoSomething`），或者是否将其分解为几个步骤（`Manager.ConvertData`、、`Manager.GetDecorator`和然后`Manager.DoSomethingWithDecorator`）。

这将取决于这些步骤是什么。在您带来的示例中，我可能会选择第一个选项。Controller 的作用是编排工作流——它知道当前的操作需要转移到`RequestManager`'s 的职责中。它不应该做的是`RequestManager`为它做的工作。如果您使用 DataSets 是您的标准数据传输对象，那么这就是您应该传递给 Manager 的内容。任何进一步的处理都应在 Manager 中完成。

# sql - MS SQL Server 2008：获取一周的开始日期和结束日期到接下来的 8 周

> ID：15543977
> 
> 赞同：2
> 
> 时间：2013-03-21T09:44:14.960
> 
> 标签：sql, sql-server-2008, tsql

我是 SQL 新手，谁能给我这个场景的查询，“我需要显示从今天开始到接下来 8 周的一周的开始日期和结束日期”。例如，如果我选择今天的日期，它应该显示

1.  开始日期 | 结束日期
2.  2012 年 3 月 17 日 | 23/03/2012
3.  2012 年 3 月 24 日 | 29/03/2012
4.  .. ETC
5.  2012 年 4 月 28 日 |2013 年 3 月 5 日

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:24:06.490

试试这个：

```
DECLARE @startDate DATETIME
DECLARE @currentDate DATETIME
DECLARE @numberOfWeeks INT

DECLARE @dates TABLE(
    StartDate DateTime,
    EndDate DateTime 
)

SET @startDate = GETDATE()--'2012-01-01' -- Put whatever you want here
SET @numberOfWeeks = 8 -- Choose number of weeks here
SET @currentDate = @startDate

while @currentDate < dateadd(week, @numberOfWeeks, @startDate)
begin
    INSERT INTO @Dates(StartDate, EndDate) VALUES (@currentDate, dateadd(day, 6, @currentDate))
    set @currentDate = dateadd(day, 7, @currentDate);
end

SELECT * FROM @dates 
```

这会给你这样的东西：

```
StartDate           EndDate 
21/03/2013 11:22:46 27/03/2013 11:22:46 
28/03/2013 11:22:46 03/04/2013 11:22:46 
04/04/2013 11:22:46 10/04/2013 11:22:46 
11/04/2013 11:22:46 17/04/2013 11:22:46 
18/04/2013 11:22:46 24/04/2013 11:22:46 
25/04/2013 11:22:46 01/05/2013 11:22:46 
02/05/2013 11:22:46 08/05/2013 11:22:46 
09/05/2013 11:22:46 15/05/2013 11:22:46 
```

或者，如果您不想要时间组件，您可以调整最终选择，如下所示：

```
SELECT CONVERT(VARCHAR, StartDate, 103), CONVERT(VARCHAR, EndDate, 103) FROM @dates 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:36:13.870

你可以看看这个 StackOverFlow 帖子： [在 TSQL 中生成递增日期的结果集](https://stackoverflow.com/questions/1478951/tsql-generate-a-resultset-of-incrementing-dates)

或者

以下应该给你这个结果：

```
declare @dateIterator datetime = getdate();
declare @endDate datetime = dateadd(week, 8, getdate());
declare @dateRange varchar(max) = '';

while @dateIterator < @endDate
begin
    set @dateIterator = dateadd(day, 1, @dateIterator);
    set @dateRange = @dateRange + ' ' + convert(varchar(10), @dateIterator, 3)
end

select @dateRange 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T11:20:01.337

如果您想避免迭代（例如，如果您需要在视图中使用此数据），您可以使用以下技术：

```
;WITH w(weeknumber) AS
    (SELECT 0
        UNION SELECT 1
        UNION SELECT 2
        UNION SELECT 3
        UNION SELECT 4
        UNION SELECT 5
        UNION SELECT 6
        UNION SELECT 7), 
 f(firstdayofweek) AS
     (SELECT DATEADD(ww,DATEDIFF(ww,0,GETDATE()),0)),
 o(offsetweekdate) AS
     (SELECT DATEADD(ww,w.weeknumber,f.firstdayofweek) FROM w,f)
SELECT
    DATEADD(d,0,o.offsetweekdate) AS firstdayofweek,
    DATEADD(d,6,o.offsetweekdate) AS lastdayofweek
FROM o 
```

在这里，`w`生成一个从 0 到 7 的数字列表，`f`找到一周的第一天，并将`o`这两者结合起来给出接下来 8 周的一周的开始和结束日期。

这样做的缺点是，要增加预计向前的周数，您需要在 w 的定义中添加额外的一行。这是因为没有内置方法可以在不使用循环的情况下使用 TSQL 生成一系列值。

[Jeff Moden在 StackOverflow 的其他地方](https://stackoverflow.com/questions/10819/sql-auxiliary-table-of-numbers)发布了一个非常有用的范围函数 ，我喜欢在这些场景中使用它。

```
CREATE FUNCTION [dbo].[Range](@startvalue integer,@endvalue integer)
RETURNS TABLE
AS 
RETURN(
WITH E00(N) AS (SELECT 1 UNION ALL SELECT 1),
     E02(N) AS (SELECT 1 FROM E00 a, E00 b),
     E04(N) AS (SELECT 1 FROM E02 a, E02 b),
     E08(N) AS (SELECT 1 FROM E04 a, E04 b),
     E16(N) AS (SELECT 1 FROM E08 a, E08 b),
     E32(N) AS (SELECT 1 FROM E16 a, E16 b),
cteTally(N) AS (SELECT ROW_NUMBER() OVER (ORDER BY N) FROM E32)
SELECT TOP (@endvalue-@startvalue+1) (N+@startvalue-1) AS Number
    FROM cteTally
WHERE N <= (@endvalue-@startvalue+1)) 
```

这允许您使用简单的`SELECT Number FROM RANGE(0,10)`. 定义此函数后，原始代码可以简化为以下内容：

```
;WITH w(weeknumber) AS
    (SELECT Number FROM Range(0,7)), 
 f(firstdayofweek) AS
     (SELECT DATEADD(ww,DATEDIFF(ww,0,GETDATE()),0)),
 o(offsetweekdate) AS
     (SELECT DATEADD(ww,w.weeknumber,f.firstdayofweek) FROM w,f)
SELECT
    DATEADD(d,0,o.offsetweekdate) AS firstdayofweek,
    DATEADD(d,6,o.offsetweekdate) AS lastdayofweek
FROM o 
```

然后，将其扩展为采用参数表示向前投射的周数将是一个简单的更改。

# java - 当我从服务器运行 Web 服务时，Java 代码中的空日期

> ID：15543978
> 
> 赞同：1
> 
> 时间：2013-03-21T09:44:19.367
> 
> 标签：java, date

我创建了一个 Web 服务，客户端将一个文件发送到服务器。然后服务器必须保存文件。我想要的文件名类似于 message_2013.03.20.13.55.43.xml (yyyy.mm.dd.hh.mm.ss)。我部署了 Web 服务，但文件保存为 message_.xml（覆盖文件），这意味着日期字符串为空。这是我的代码的一部分：

```
DateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");
Date date = new Date();
String current_date = dateFormat.format(date).toString().replaceAll(":", ".");
current_date = current_date.replaceAll(" ", ".");
current_date = current_date.replaceAll("/", ".");;
String pathname = "C:\\soap_downloads\\message_"+current_date+".xml"; 
```

当我在我的本地主机上测试它时，它运行完美。服务器的操作系统是windows 2008 R2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:53:17.913

我想你只是*看到*文件名`message_`，它的图标可能就像`xml`文件的图标。Windows 文件管理器可能只是对您隐藏扩展名。它可能认为第一个点之后的所有内容都是扩展名，并对您隐藏这部分文件名。由于您在文件名中使用点是可能的。首先尝试仔细检查。

# android - 使用 Android 注解时显示对话框

> ID：15543983
> 
> 赞同：1
> 
> 时间：2013-03-21T09:44:35.027
> 
> 标签：android, android-alertdialog, android-annotations

在我的名为**TestAPIActivity_**的活动中，有一个点击事件来显示一个对话框：

```
@Click(R.id.test_account_edit_avatar_btn)
void editAvatar() {
    pickDialog = DialogFactory.createPickPhotoDialog(this);
    pickDialog.show();
} 
```

单击该按钮时，会抛出异常：

```
android.view.WindowManager$BadTokenException: Unable to add window -- token null is    not for an application. 
```

我已经检查了传递给 createPickPhotoDialog()的“ **this ”是一个****TestAPIActivity_**。有人在使用 Android Annotation 时遇到这个问题吗？这样做的正确方法是什么？

# perl - 使用 Windows 登录单点登录

> ID：15543994
> 
> 赞同：0
> 
> 时间：2013-03-21T09:45:03.337
> 
> 标签：perl, authentication, active-directory, ldap, kerberos

现在，我正在开发单点登录，以便可以使用windows登录来访问本地网站，我正在用Perl编写代码，我没有这样做的经验，因为会有一些复杂的步骤比如作为; 使用 kerberos 验证用户和密码。我不知道该怎么做，谁能给我一个教程链接或想分享想法？甚至教我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:18:06.767

我不知道 perl，但我在 java 中使用 curl 和 urlconnect 完成了它

由于您希望使用 Windows 登录凭据进行 SSO，因此您希望使用默认凭据。这意味着您不需要直接使用 kerberos API 来获取凭证并将其转换为 GSSAPI 凭证。

您需要的是访问 gssapi 凭据。所以你使用： -

[http://metacpan.org/pod/GSSAPI](http://metacpan.org/pod/GSSAPI)

GSSAPI 可用于创建上下文对象并传递身份验证所需的令牌。在 SSO 的情况下，只需在凭据参数中使用默认凭据 (GSS_C_NO_CREDENTIAL)。

就 url 访问而言，您需要了解如何在 perl 中将 url 连接库与上下文对象一起使用。这可能很困难，我不知道该怎么做。但是，您可以将 libcurl 与 perl 绑定交替使用。Libcurl 在内部使用 GSS-API 来完成它的工作。

[http://curl.haxx.se/libcurl/perl/](http://curl.haxx.se/libcurl/perl/)

如果您希望在工作中使用 libcurl，您应该使用 GSS-Negotiate（MIT Kerberos）和 SPNEGO（openssl 和 fbopenssl）构建 libcurl。这需要时间和耐心。

这应该让你继续前进。请记住，被保护的资源（或者更确切地说是保护程序）也必须使用 GSS-API（或等效的 SSPI，因为它们是兼容的）

# c# - 时间：2019-04-01 标签：c#streamwriter add line on file creation

> ID：15543995
> 
> 赞同：0
> 
> 时间：2013-03-21T09:45:05.623
> 
> 标签：c#, streamwriter

我在控制台应用程序中成功地将数据写入 csv 文件（耶！）。到目前为止，Streamwriter 对我来说非常好。

```
using (StreamWriter writer = new StreamWriter(file, true))
{
    writer.WriteLine(strToSave);
} 
```

此代码附加到现有文件，或者，如果它不存在，则先创建一个新文件然后写入。

我想要它做的是，如果文件不存在，则创建文件，为 csv 列写入标题行，然后正常写入数据。我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T09:48:53.797

您可以首先使用方法检查文件是否存在`File.Exists()`。如果文件已经存在，则不需要写头部，如果存在值是`false`，则写头部（假设 的头部`.csv`在变量 中`header`），然后写你想要的文本。

```
 bool exists = File.Exists(file);
        using (StreamWriter writer = new StreamWriter(file, true))
        {
            if(!exists)
                writer.WriteLine(header);
            writer.WriteLine(strToSave);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:51:55.607

您可以检查流的长度属性

```
using(var stream = new FileStream("file.name", FileMode.OpenOrCreate, FileAccess.ReadWrite))
using (var writer = new StreamWriter(stream))
{
    if (stream.Length == 0)
    {
        // Write header here
    }
} 
```

# file - 在另一个进程写入时读取文件

> ID：15543997
> 
> 赞同：0
> 
> 时间：2013-03-21T09:45:11.357
> 
> 标签：file, sametime

我有一个应用程序使用 C://root 文件夹。此文件夹包含图像。这些图像由 Pictureboxes 读取。

1.  图像通过 FTP 来自一台 linux 机器。一台 linux 机器使用 ftp 打开 Windows 中的 C://root。保存 IMAGE_1.jpg。
2.  IMAGE_1.jpg 由 C# windows 窗体应用程序读取以显示在图片框中。

图像每 10 秒从 linux 机器传来。Windows 在一个线程中显示这些图像。

有时，linux 或 windows 会发送异常。因为其中一个试图读取图像以显示（windows），另一个试图保存图像（linux）

因此，我必须明白，如果Image_1.jpg是linux机器使用的，不要试图以win形式显示图像。

但是怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:21:10.690

在您的 Win Forms 应用程序中，打开文件进行读取，并与其他进程共享文件，以便他们可以继续读取/写入文件。

使用[File.Open 方法（String、FileMode、FileAccess、FileShare）](http://msdn.microsoft.com/en-us/library/y973b725.aspx)来执行此操作。

如果您只使用[File.Open Method (String, FileMode)](http://msdn.microsoft.com/en-us/library/b9skfh7s.aspx)或[File.Open Method (String, FileMode, FileAccess)，](http://msdn.microsoft.com/en-us/library/s67691sb.aspx)则文件将被取消共享。

通过共享，您应该让 ftp 方面的事情保持愉快。

如果您在尝试在 Windows 中打开文件时遇到异常，那很好。只需捕获异常并尽快重试。

成功打开文件后，检查最后两个字节是否为 FF D9。在这种情况下，您的 JPG 已完成上传。

这是一些伪代码。

```
 success = false
    using (FileStream fs = File.Open(path,  // eg your Image1.jpg
                                     FileMode.Open,
                                     FileAccess.Read, // we just need to read
                                     FileShare.ReadWrite)) // important to share!
    {
       // if last two bytes are FF D9 then
       //    success = true... can display image now
    }
    if (!success)
    {
       // file is being uploaded, or some other problem occurred
       // try again later
    } 
```

# c - 释放大量指针时出现分段错误

> ID：15543998
> 
> 赞同：0
> 
> 时间：2013-03-21T09:45:18.650
> 
> 标签：c, arrays, pointers, malloc, free

我的代码在小文件上运行没有错误。但是我在大输入（数百万行）上遇到了段错误。请看下面的一些代码：

```
element* unionFind(void *data)
{
    element *retVal = NULL;
    retVal = (element *)malloc(sizeof(element));
    retVal->data = data;
    retVal->rank = 0;
    retVal->leader = retVal;
    return retVal;
} 
```

主要：
...

```
int main (int argc, char* argv[])
{   
char str[2048]; 
char* v_S = NULL; 
struct set *s_v = NULL; 
```

***计算输入的行数

```
long *v_L = (long *)malloc(sizeof(long)*ct_lines);
element **v = malloc(sizeof(element)*ct_lines) ;

while(fgets(str,sizeof(str),fp) != NULL)
{
     v_S = strtok(str,":");        

     v_L[i] = atol(v_S);
         v[i] = unionFind(&v_L[i]);
     s_v = add_vertex(v_L[i], v[i]);

     i++;
}

fclose(fp);

for (i = 0; i < ct_lines; i++) //Here segfault
    {
    free(v[i]); v[i] = NULL;
    }

free(v); v = NULL;
free(v_L); v_L = NULL;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:58:04.023

在每个 malloc 之后，您应该检查 malloc 是否返回 NULL（这意味着由于堆已满而无法分配内存）。如果返回 NULL，一般会打印错误信息。如果您仍然想分配内存，则必须在释放一些已分配的内存后重试。

由于您的程序因大文件而失败，因此无需详细阅读代码，它一定会失败，因为它的可用内存不足并且 malloc 返回 NULL，然后您试图将结构元素保存在顶部函数 findUnion 中的 NULL 地址处。