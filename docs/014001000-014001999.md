# StackOverflow 问答 14001000-14001999

# linux - 批处理脚本在 Linux 上删除日期之前的文件

> ID：14001006
> 
> 赞同：3
> 
> 时间：2012-12-22T07:39:21.387
> 
> 标签：linux, batch-file

我正在尝试找到一种方法来编写批处理脚本以删除`x-xxx.jpg`在某个日期之前创建的批处理脚本。

这将如何完成？所以基本上说我有`20k.jpg`并且我想在 Linux 上创建一个批处理脚本来运行，它将删除所有创建的图像，比如说在 2011 年 12 月 12 日之前。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T09:29:18.127

为什么我们不能删除“N”天前的文件，而不是依赖日期？

例如，这里是用于“打印”*.jpg 文件的“查找”命令，这些文件是在 2 天之前创建的。

```
find /folder_path/ -iname '*.jpg' -type f -ctime  +1 -print 
```

注意：如果要删除从搜索结果返回的文件，请将“-print”选项替换为“-delete”。

这是“查找”命令的[出色教程](http://find.unixpin.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T07:54:19.983

以下脚本使用`-ot`测试（“旧于”）：

```
#/bin/bash
touch -d "$1" /tmp/D
shift
for file in "$@" ; do
    [[ $file -ot /tmp/D ]] && rm "$file"
done
rm /tmp/D 
```

将其另存为`delete-older.sh`，使其可执行`chmod u+x delete-older.sh`，运行为

```
path/to/script/delete-older.sh 2011/12/12 *.jpg 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T17:13:29.530

`find . -name "*.jpg" -mtime +1 -ok rm {} \;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T08:17:10.020

要删除 20 天之前的 jpg 文件，请执行以下操作：

```
find . -mtime +1 -name '*.jpg' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T03:31:19.157

在 centos 4.4 上，您必须使用单引号`{}`，例如

```
# delete the "log/*.log" files that are 7 days ago. 
find log/*.log -mtime +7 -exec rm '{}' \; 
```

# c# - 重置 Kinect 传感器

> ID：14001027
> 
> 赞同：0
> 
> 时间：2012-12-22T07:43:12.240
> 
> 标签：c#, .net, wpf, kinect, kinect-sdk

我正在开发一个基于 Kinect 的项目，我想`Kinect sensor`在`Button`点击事件中重置我的，但只有两种方法`sensor.start()`& `sensor.stop()`。就像暂停传感器并重新启动它一样，它不会重置或重新初始化。那么，有什么办法可以做到这一点..？？

提前致谢..

**编辑：**

有一个事件处理程序 kinectSensorChooser1 += kinectSensorChooser1_KinectSensorChanged，这将帮助我初始化传感器的新实例，所以我想在函数中显式调用它。

```
kinectSensorChooser1_KinectSensorChanged(object sender, DependencyPropertyChangedEventArgs e)
{
      KinectSensor old = (KinectSensor)e.OldValue;
      StopKinect(old);
      KinectSensor sensor = (KinectSensor)e.NewValue;
} 
```

我不知道怎么称呼它，因为

```
private void ResetSensor()
{
    // this doesn't work like others so what parameters should I pass then..
    kinectSensorChooser1_KinectSensorChanged(null, null);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T14:07:38.090

您不需要重置传感器。

听起来您在坐姿模式下使用骨架跟踪：

```
this.kinect.SkeletonStream.TrackingMode = SkeletonTrackingMode.Seated; 
```

在坐下模式下，Kinect 使用移动来检测用户。因此，如果骨架未被跟踪（例如，由于超出视野），用户将需要再次移动，以便传感器可以跟踪用户。这可能会给应用程序带来传感器处于空闲状态的印象。

# jquery - 加载时验证表单

> ID：14001028
> 
> 赞同：1
> 
> 时间：2012-12-22T07:43:39.050
> 
> 标签：jquery, jquery-validate, onload

我在这个链接
[http://alittlecode.com/files/jQuery-Validate-Demo/](http://alittlecode.com/files/jQuery-Validate-Demo/)中实现了相同的验证 所以我在成功的元素旁边显示复选标记，有没有办法在表单加载时显示复选标记默认输入有效，仅在提交时显示错误？这是代码

```
 $("#frmsubmit").validate({
        rules: {
            citstyle: "required",
            spelling: "required",
            uploadfile: {required: function (element) {
                 if($("#filesent").is(':checked'))
                 {
                   return false;  
                 } 
                     else
                     {
                        return true;
                     } 

              }  ,
                        filesize: 8388608},
            wordsno: "required",
            cellphone: "required",
            country: "required",
            address: "required",
            paytype: "required"
        },

        highlight: function(label) {
            $(label).closest('.control-group').addClass('error');
          },
          success: function(label) {
            label
              .text('OK!').addClass('valid')
              .closest('.control-group').addClass('success');
          }
    }); 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T15:18:59.230

这是一个工作示例：http: [//jsfiddle.net/Gajotres/TthG9/](http://jsfiddle.net/Gajotres/TthG9/)。我的示例是根据您的链接中的代码示例创建的。

代码：

```
$(document).ready(function(){
    $('#contact-form').validate(
    {
        rules: {
            name: {
                minlength: 2,
                required: true
            },
            email: {
                required: true,
                email: true
            },
            subject: {
                minlength: 2,
                required: true
            },
            message: {
                minlength: 2,
                required: true
            }
        },
        highlight: function(label) {
            $(label).parent().find('.valid').each(function(){
                $('label[class^="valid"]').remove();       
            });
        },        
        success: function(label) {
            if(label.text('OK!').parent().find('.valid').html() == null) {
                label.removeClass('error').addClass('valid');  
            } else {
                label.remove();
            }
        }        
    });
    $("#contact-form").validate().form();
    $('label[class^="error"]:not(.valid)').remove();
}) 
```

方法[.form()](http://docs.jquery.com/Plugins/Validation/Validator/form)可用于以编程方式触发表单验证

# c++ - RAII 是否会导致内存泄漏？

> ID：14001029
> 
> 赞同：0
> 
> 时间：2012-12-22T07:43:39.073
> 
> 标签：c++, visual-c++, memory-leaks, raii

```
#define _CRTDBG_MAP_ALLOC
#include <stdlib.h>
#include <crtdbg.h>

struct A
{
    A(char* p)
        : p(p)
    {}

    ~A()
    {   
        delete this->p;
    }

    char* p;
};

int main()
{
    A a(new char);
    _CrtDumpMemoryLeaks();
} 
```

在调试模式下运行后，Visual Studio 2012 的输出窗口显示：

```
Detected memory leaks!
Dumping objects ->
{142} normal block at 0x007395A8, 1 bytes long.
 Data: < > CD 
Object dump complete. 
```

原因是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-22T07:47:41.207

也许它在实际调用析构函数之前转储了内存泄漏？尝试：

```
int main()
{
     {
         A a(new char);
     }
     _CrtDumpMemoryLeaks();
} 
```

我建议使用标准的（或 boost 的）智能指针类，例如`unique_ptr`or `shared_ptr`，而不是直接使用原始指针处理 new/delete。

**编辑：** 删除了将指针设置为的建议`NULL`，因为`delete`处理了这个问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-22T07:47:37.073

在析构函数有机会运行之前，即在块结束之前，您正在转储内存。试试这个，看看有什么不同：

```
int main()
{
    {
        A a(new char);
    }
    _CrtDumpMemoryLeaks();
} 
```

# excel - NVL函数出错，有没有类似NVL的等效函数

> ID：14001035
> 
> 赞同：0
> 
> 时间：2012-12-22T07:45:15.970
> 
> 标签：excel, vbscript, ado, adodb, vba

下面的代码是用 VBScript 编写的。但是该行会`Set rs = cmd.Execute`抛出一个错误，说明`NVL`未定义。那么你能推荐一个相当于这样的“NVL”吗？

```
 Option Explicit

        Dim conn, cmd, rs
         Dim clauses(34), i
    Dim xlApp, xlBook
    Dim tempDate,LenDate

    Set conn = CreateObject("ADODB.Connection")
    With conn
    .Provider = "Microsoft.ACE.OLEDB.12.0"
    .ConnectionString = "Data Source=""D:\AravoVB\GE_Wing_To_Wing_Report - Copy.xlsx"";" & _
        "Extended Properties=""Excel 12.0;HDR=Yes"""
    .Open
    End With
    tempDate="[Business Process ID],"
    For i = 0 To 34
    clauses(i) = "[Task" & i + 1 & " Start Date] > [Task" & i + 2 & " Start Date]"
    tempDate=tempDate & "NVL([Task" & i + 1 & " Start Date],sysdate+"& i &"),"
    Next
    LenDate=Len(tempDate)-1
    tempDate=Mid(tempDate,1,LenDate)
    MsgBox(tempDate)

    Set cmd = CreateObject("ADODB.Command")
    cmd.CommandText = "SELECT " & tempDate &" FROM [GEWingToWingMay25$] WHERE [Business Process ID] NOT IN (" & "SELECT [Business Process ID] FROM [GEWingToWingMay25$] WHERE " & Join(clauses, " AND ") & ")"
    MsgBox(cmd.CommandText)
    cmd.ActiveConnection = conn 
    Set rs = cmd.Execute

    Set xlApp = CreateObject("Excel.Application")
    xlApp.Visible = True
    Set xlBook = xlApp.Workbooks.Add
    xlBook.Sheets(1).Range("A1").CopyFromRecordset cmd.Execute 
```

![新西兰的错误](../Images/5e13a3fd0da8c4fbb0dfe9b2d9976b7f.png)

***编辑：***

```
 For i = 0 To 1
      clauses(i) = "IIf(IsNull([Task" & i + 1 & " Start Date]),sysdate+"& i &",[Task" & i + 1 & " Start Date]) > IIf(IsNull([Task" & i + 2 & " Start Date]),sysdate+"& i &",[Task" & i + 2 & " Start Date])"
'tempDate=tempDate & "NVL([Task" & i + 1 & " Start Date],sysdate+"& i &"),"
      Next 
```

***错误***：获取`No value given for one or more required parameters`

`MsgBox(cmd.CommandText):`

![ADO 错误](../Images/492ff3555c8d255921ff62f35f4d355d.png)

![ADO 错误 2](../Images/f348a01c575fd832156a22931c91b9da.png)

***SQL***

```
 `SELECT * FROM [GEWingToWingMay25$] WHERE [Business Process ID] NOT IN (SELECT [Business Process ID] FROM [GEWingToWingMay25$] WHERE IIf(IsNull([Task1 Start Date]),Date()+0,[Task1 Start Date]) < IIf(IsNull([Task2 Start Date]),Date()+0,[Task2 Start Date]) OR IIf(IsNull([Task2 Start Date]),Date()+1,[Task2 Start Date]) < IIf(IsNull([Task3 Start Date]),Date()+1,[Task3 Start Date]) OR IIf(IsNull([Task3 Start Date]),Date()+2,[Task3 Start Date]) < IIf(IsNull([Task4 Start Date]),Date()+2,[Task4 Start Date]) OR IIf(IsNull([Task4 Start Date]),Date()+3,[Task4 Start Date]) < IIf(IsNull([Task5 Start Date]),Date()+3,[Task5 Start Date]) OR IIf(IsNull([Task5 Start Date]),Date()+4,[Task5 Start Date]) < IIf(IsNull([Task6 Start Date]),Date()+4,[Task6 Start Date]) OR IIf(IsNull([Task6 Start Date]),Date()+5,[Task6 Start Date]) < IIf(IsNull([Task7 Start Date]),Date()+5,[Task7 Start Date]) OR IIf(IsNull([Task7 Start Date]),Date()+6,[Task7 Start Date]) < IIf(IsNull([Task8 Start Date]),Date()+6,[Task8 Start Date]) OR IIf(IsNull([Task8 Start Date]),Date()+7,[Task8 Start Date]) < IIf(IsNull([Task9 Start Date]),Date()+7,[Task9 Start Date]) OR IIf(IsNull([Task9 Start Date]),Date()+8,[Task9 Start Date]) < IIf(IsNull([Task10 Start Date]),Date()+8,[Task10 Start Date]) OR IIf(IsNull([Task10 Start Date]),Date()+9,[Task10 Start Date]) < IIf(IsNull([Task11 Start Date]),Date()+9,[Task11 Start Date]) OR IIf(IsNull([Task11 Start Date]),Date()+10,[Task11 Start Date]) < IIf(IsNull([Task12 Start Date]),Date()+10,[Task12 Start Date]) OR IIf(IsNull([Task12 Start Date]),Date()+11,[Task12 Start Date]) < IIf(IsNull([Task13 Start Date]),Date()+11,[Task13 Start Date]) OR IIf(IsNull([Task13 Start Date]),Date()+12,[Task13 Start Date]) < IIf(IsNull([Task14 Start Date]),Date()+12,[Task14 Start Date]) OR IIf(IsNull([Task14 Start Date]),Date()+13,[Task14 Start Date]) < IIf(IsNull([Task15 Start Date]),Date()+13,[Task15 Start Date]) OR IIf(IsNull([Task15 Start Date]),Date()+14,[Task15 Start Date]) < IIf(IsNull([Task16 Start Date]),Date()+14,[Task16 Start Date]) OR IIf(IsNull([Task16 Start Date]),Date()+15,[Task16 Start Date]) < IIf(IsNull([Task17 Start Date]),Date()+15,[Task17 Start Date]) OR IIf(IsNull([Task17 Start Date]),Date()+16,[Task17 Start Date]) < IIf(IsNull([Task18 Start Date]),Date()+16,[Task18 Start Date]) OR IIf(IsNull([Task18 Start Date]),Date()+17,[Task18 Start Date]) < IIf(IsNull([Task19 Start Date]),Date()+17,[Task19 Start Date]) OR IIf(IsNull([Task19 Start Date]),Date()+18,[Task19 Start Date]) < IIf(IsNull([Task20 Start Date]),Date()+18,[Task20 Start Date]) OR IIf(IsNull([Task20 Start Date]),Date()+19,[Task20 Start Date]) < IIf(IsNull([Task21 Start Date]),Date()+19,[Task21 Start Date]) OR IIf(IsNull([Task21 Start Date]),Date()+20,[Task21 Start Date]) < IIf(IsNull([Task22 Start Date]),Date()+20,[Task22 Start Date]) OR IIf(IsNull([Task22 Start Date]),Date()+21,[Task22 Start Date]) < IIf(IsNull([Task23 Start Date]),Date()+21,[Task23 Start Date]) OR IIf(IsNull([Task23 Start Date]),Date()+22,[Task23 Start Date]) < IIf(IsNull([Task24 Start Date]),Date()+22,[Task24 Start Date]) OR IIf(IsNull([Task24 Start Date]),Date()+23,[Task24 Start Date]) < IIf(IsNull([Task25 Start Date]),Date()+23,[Task25 Start Date]) OR IIf(IsNull([Task25 Start Date]),Date()+24,[Task25 Start Date]) < IIf(IsNull([Task26 Start Date]),Date()+24,[Task26 Start Date]) OR IIf(IsNull([Task26 Start Date]),Date()+25,[Task26 Start Date]) < IIf(IsNull([Task27 Start Date]),Date()+25,[Task27 Start Date]) OR IIf(IsNull([Task27 Start Date]),Date()+26,[Task27 Start Date]) < IIf(IsNull([Task28 Start Date]),Date()+26,[Task28 Start Date]) OR IIf(IsNull([Task28 Start Date]),Date()+27,[Task28 Start Date]) < IIf(IsNull([Task29 Start Date]),Date()+27,[Task29 Start Date]) OR IIf(IsNull([Task29 Start Date]),Date()+28,[Task29 Start Date]) < IIf(IsNull([Task30 Start Date]),Date()+28,[Task30 Start Date]) OR IIf(IsNull([Task30 Start Date]),Date()+29,[Task30 Start Date]) < IIf(IsNull([Task31 Start Date]),Date()+29,[Task31 Start Date]) OR IIf(IsNull([Task31 Start Date]),Date()+30,[Task31 Start Date]) < IIf(IsNull([Task32 Start Date]),Date()+30,[Task32 Start Date]) OR IIf(IsNull([Task32 Start Date]),Date()+31,[Task32 Start Date]) < IIf(IsNull([Task33 Start Date]),Date()+31,[Task33 Start Date]) OR IIf(IsNull([Task33 Start Date]),Date()+32,[Task33 Start Date]) < IIf(IsNull([Task34 Start Date]),Date()+32,[Task34 Start Date]) OR IIf(IsNull([Task34 Start Date]),Date()+33,[Task34 Start Date]) < IIf(IsNull([Task35 Start Date]),Date()+33,[Task35 Start Date]) OR IIf(IsNull([Task35 Start Date]),Date()+34,[Task35 Start Date]) < IIf(IsNull([Task36 Start Date]),Date()+34,[Task36 Start Date]))` 
```

**编辑**

选项显式

```
Dim conn, cmd, rs
     Dim clauses(34), i
Dim xlApp, xlBook
Dim tempDate,LenDate

Set conn = CreateObject("ADODB.Connection")
With conn
.Provider = "Microsoft.ACE.OLEDB.12.0"
.ConnectionString = "Data Source=""D:\AravoVB\Final Scripts\GE_Wing_To_Wing_Report - Copy.xlsx"";" & _
    "Extended Properties=""Excel 12.0;HDR=Yes"""
.Open
End With
'tempDate=""
For i = 0 To 34
clauses(i) = "IIf(IsNull([Task" & i + 1 & " Start Date]),Date()+"& i &",[Task" & i + 1 & " Start Date]) < IIf(IsNull([Task" & i + 2 & " Start Date]),Date()+"& i &",[Task" & i + 2 & " Start Date])"
tempDate=tempDate & "NVL([Task" & i + 1 & " Start Date],Date()+"& i &"),"
Next
'LenDate=Len(tempDate)-1
'tempDate=Mid(tempDate,1,LenDate)
MsgBox(tempDate)

Set cmd = CreateObject("ADODB.Command")
cmd.CommandText = "SELECT * FROM [GEWingToWingMay25$] WHERE [Business Process ID] NOT IN (" & "SELECT [Business Process ID] FROM [GEWingToWingMay25$] WHERE " & Join(clauses, " OR ") & ")"
MsgBox(cmd.CommandText)
cmd.ActiveConnection = conn 
Set rs = cmd.Execute

Set xlApp = CreateObject("Excel.Application")
xlApp.Visible = True
Set xlBook = xlApp.Workbooks.Add
xlBook.Sheets(1).Range("A1").CopyFromRecordset cmd.Execute
'xlBook.Sheets(1).Cells(1,25).Value=cmd.CommandText 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T12:34:48.943

## This answers your question on NVL, Nz Equivalent.

Just use `IIF(IsNull())..`

Because `Nz` is only supported within Access.

[Here is the reference article :](http://ewbi.blogs.com/develops/2007/11/why-no-nz-via-j.html)

The only non-intrinsic SQL functions available in JET database queries outside of Access are those found in the VBA library, whose objects are exposed for use via the underlying JET database engine (with consideration for certainsandbox restrictions). You can perform some crazy-complex calculations in your queries using functions like VBA'sIPmt() and PPmt(), **and you can evaluate conditional logic using VBA's IIf(), but you cannot Nz() a column to overcome a Null value, because Nz() is a method of the Access.Application object**.

So what are the alternatives to Nz()? Well, you could combine VBA's IIf() and IsNull() to do the same thing:

```
select IIf(IsNull(SomePossiblyNullField), '', SomePossiblyNullField) 
from SomeTable 
```

Or, if you're dealing with potentially Null string values, you can take advantage of the non-conforming JET SQL syntax's explicit concatenation operator (&), which it shares with VBA, and pound an empty string onto your value. The following query will produce the same result as the previous one:

```
select SomePossiblyNullField & '' 
from SomeTable 
```

I say non-conforming because in most cases combining Null with anything via an operator results in a Null; however, the concatenation operator works differently, treating Nulls like empty strings. Mathematical operators, like +, -, *, etc., do conform with standard tri-value Null logic in that their application to any Null value results in a Null expression, including the unfortunate case where + is applied to strings, which JET's SQL syntax and VBA still allow for historical reasons.

* * *

## Here are possible reasons for the error: NO VALUE GIVEN FOR ONE OR MORE PARAMETERS.

[Reference article:](http://www.xtremevbtalk.com/showthread.php?t=275002&highlight=newc0m0r)

*   Reason 1: If the worksheet contain columnnames in the first row or not. If yes then the connection string should include the Extended Property `HDR=YES` otherwise to `HDR=NO`. **Which you already have set.**

*   Reason 2: SQL Expressions and column names used in `Where` clause. This seems to be the most possible cause of your error.

Can you edit your query string as the following: `SYSDATE` needs to be treated as an Excel Date() and add days using `DateSerial()` and then maintain the date format using `Format()`.

`Format(DateSerial(Year(Date),Month(Date),Day(Date) + i), "yyyy-mm-dd")`

AS for the `where` clause, may be it's best to use a `Switch` statment and make sure add a default condition such as `Date < Date + 1` or as it deems.

# asp.net - 模式设置为“SQLServer”的 URL 中的会话 ID

> ID：14001036
> 
> 赞同：0
> 
> 时间：2012-12-22T07:45:31.597
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, forms-authentication, session-state

我正在开发一个使用 Webmatrix 进行身份验证的 ASP.Net MVC 4 应用程序。我的 web.config 文件中有以下内容

```
<sessionState mode="SQLServer" cookieless="true" allowCustomSqlDatabase="true"
     sqlConnectionString="Data Source=server;Initial Catalog=ASPState;Persist
                          Security Info=True;User ID=user;Password=password" 
     timeout="2880" sqlCommandTimeout="10" /> 
```

我可以看到正在填充 ASPState 数据库，但我仍然在 URL 中获取会话 ID。当我尝试通过 Chrome 访问它时，它会错误地告诉许多重定向。当我通过 IE 访问它时，即使我看到它重定向（尽管会话 ID 在 url 中），它仍然有效，但是当我尝试登录时出现以下错误：

> *无法序列化会话状态。在“StateServer”和“SQLServer”模式下，ASP.NET 将序列化会话状态对象，因此不允许不可序列化的对象或 MarshalByRef 对象。如果自定义会话状态存储在“自定义”模式下完成类似的序列化，则适用相同的限制。*

我没有对 Webmatrix 进行任何自定义，这都是默认设置。我需要会话 ID 远离 URL 并使用数据库，就像我在`web.config`文件中设置的一样

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T07:55:07.740

首先，尝试将 cookieless 设置为 false。其次，使用 ASPState 时，allowCustomSqlDatabase 应设置为 false，第三，不要在连接字符串中指定 Initial Catalog。SQLState 将在后台自动执行此操作。第四，我不知道您要序列化的是什么，但您应该将`[Serializable]`属性放在您试图存储在会话中的类之上。

至于 URL 字符串中的会话 ID，您使用的是 IIS 还是 IIS Express？IIS 使用一个小实用程序`aspnet_filter.exe`来接受带有会话 ID 的 URL，并在内部将您重定向到正确的地址。当它向您返回信息时也是如此。URL 再次经过修饰过程。但是，我不确定 IIS Express 是否使用该实用程序。在某种程度上，在开发人员机器上关闭 cookie 并没有太大意义。

# iphone - 使用 NSFetchResultsController 更改模型时行不移动

> ID：14001039
> 
> 赞同：2
> 
> 时间：2012-12-22T07:45:52.733
> 
> 标签：iphone, ios, uitableview, core-data, nsfetchedresultscontroller

我正在开发我的第一个 iPhone 应用程序（一个基本的待办事项列表应用程序），并且刚刚将 NSFetchResultsController 添加到我的表格视图中。我有 2 个行部分，添加行没有问题，它们按目标的已完成属性是否为 true 进行排序 - 如果是，则它进入底部并被划掉。

每当您在顶部的一行上向右滑动时，它会将目标的 complete 属性更改为 true 并将其移动到底部：

```
 RegimenGoal *goal = [_fetchedResultsController objectAtIndexPath:swipedIndexPath];
  goal.completed = [NSNumber numberWithBool:YES];

  [context save:&error]; 
```

这是我的[视图控制器代码](https://github.com/sayem/regimen/blob/master/Regimen/RegimenDayController.m)。

出于某种原因，这仅适用于我刚刚创建的目标，但不适用于我添加的现有目标。经过一些调试，我意识到 NSFetchedResultsChangeMove 并没有被触发，而是 NSFetchedResultsChangeUpdate 是每当我对不是新的现有目标执行此操作时。

在 Apple 文档中也遇到过这个问题，[“Moved Objects有时报告为已更新”](http://developer.apple.com/library/ios/#releasenotes/iPhone/NSFetchedResultsChangeMoveReportedAsNSFetchedResultsChangeUpdate/_index.html)。我通过简单地检查完成的属性是否为真来尝试了那里列出的解决方法。

当我这样做时，我发现 newIndexPath 不是新的——它只是旧的 indexPath，这让我很困惑……知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T10:26:37.273

创建获取的结果控制器时出错。如果通过指定将结果分组为部分`sectionNameKeyPath:@"completed"`，则必须使用相同的键添加第一个排序描述符：

```
NSSortDescriptor *completeSort = [[NSSortDescriptor alloc] initWithKey:@"completed" ascending:YES];
NSSortDescriptor *daySort = [[NSSortDescriptor alloc] initWithKey:@"dateCreated" ascending:YES];
[dayRequest setSortDescriptors:[NSArray arrayWithObjects:completeSort, daySort, nil]]; 
```

另一个问题在`tableView:cellForRowAtIndexPath:`

```
[self configureCell:cell atIndexPath:indexPath];
[cell formatCell:indexPath.section]; 
```

在这里，您假设第 0 部分包含所有带有 的项目，`completed = NO`而第 1 部分包含所有带有 的项目`completed = YES`。但如果所有项目都完成了，那么只有一个部分（第 0 部分）包含所有已完成的项目。因此，您不能将`indexPath.section`其用作`formatCell`. 您应该改用 of 的值`goal.completed`。例如，您可以将`formatCell`调用移动到`configureCell:atIndexPath:`方法中：

```
- (void)configureCell:(RegimenCell *)cell atIndexPath:(NSIndexPath *)indexPath {
    RegimenGoal *goal = [self.fetchedResultsController objectAtIndexPath:indexPath];
    cell.label.text = goal.text;
    [cell formatCell:goal.completed.intValue];
} 
```

`reuseIdentifier`现在让表格单元格依赖于节和行号已经没有多大意义了。我认为你可以更换

```
NSString *CellIdentifier = [NSString stringWithFormat:@"%d-%d", indexPath.row, indexPath.section]; 
```

通过固定字符串

```
NSString *CellIdentifier = @"YourCellIdentifer"; 
```

方法中也存在类似问题`setNavTitle`：

```
int goalsCount = [_tableView numberOfRowsInSection:0];
int completedCount = [_tableView numberOfRowsInSection:1]; 
```

同样，如果所有目标都已完成，则它们都在第 0 节中，并且没有第 1 节。在这种情况下，您当前的代码将显示“(0%)”而不是“(100%)”。

*进一步说明：*

*   “移动的对象有时报告为更新”的解决方法在这里似乎不是必需的。
*   对于`NSFetchedResultsChangeUpdate`事件，您可以调用`[self configureCell:...]`或`[[_tableView reloadRowsAtIndexPaths:...]`。不需要调用两者。
*   实例变量`_fetchedResultsController`应仅在`fetchedResultsController`方法中使用，该方法根据需要创建获取的结果控制器 (FRC)。在所有其他地方，您应该使用`self.fetchedResultsController`以确保在必要时创建 FRC。

# c# - 在sql数据库表中插入新行

> ID：14001040
> 
> 赞同：8
> 
> 时间：2012-12-22T07:45:54.657
> 
> 标签：c#, .net, sql, insert

我的应用程序中有文本框。在这些文本框中输入的数据将被插入到数据库中。commandString 只接受字符串类型。那么，如何实现插入语句呢？

```
string cmdString="INSERT INTO books (name,author,price) VALUES (//what to put in here?)" 
```

我需要为每个值加入 cmdString 和 textBox.Text 还是有更好的选择？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-22T07:48:45.943

使用`Command`和`Parameter`防止`SQL Injection`

```
// other codes
string cmdString="INSERT INTO books (name,author,price) VALUES (@val1, @va2, @val3)";
using (SqlCommand comm = new SqlCommand())
{
    comm.CommandString = cmdString;
    comm.Parameters.AddWithValue("@val1", txtbox1.Text);
    comm.Parameters.AddWithValue("@val2", txtbox2.Text);
    comm.Parameters.AddWithValue("@val3", txtbox3.Text);
    // other codes.
} 
```

*   [加值](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.addwithvalue.aspx)
*   [添加（*推荐使用方法*）](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.add.aspx)

完整代码：

```
string cmdString="INSERT INTO books (name,author,price) VALUES (@val1, @va2, @val3)";
string connString = "your connection string";
using (SqlConnection conn = new SqlConnection(connString))
{
    using (SqlCommand comm = new SqlCommand())
    {
        comm.Connection = conn;
        comm.CommandString = cmdString;
        comm.Parameters.AddWithValue("@val1", txtbox1.Text);
        comm.Parameters.AddWithValue("@val2", txtbox2.Text);
        comm.Parameters.AddWithValue("@val3", txtbox3.Text);
        try
        {
            conn.Open();
            comm.ExecuteNonQuery();
        }
        Catch(SqlException e)
        {
            // do something with the exception
            // don't hide it
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T07:53:44.080

您想保护自己免受 SQL 注入。从字符串构建 sql 是一种不错的做法，至少非常可怕。

如何：防止 ASP.NET 中的 SQL 注入 [http://msdn.microsoft.com/en-us/library/ff648339.aspx](http://msdn.microsoft.com/en-us/library/ff648339.aspx)

注入 sql 的 50 种方法 [http://www.youtube.com/watch?v=5pSsLnNJIa4](http://www.youtube.com/watch?v=5pSsLnNJIa4)

实体框架 [http://msdn.microsoft.com/en-us/data/ef.aspx](http://msdn.microsoft.com/en-us/data/ef.aspx)

# model-view-controller - 在 Zend 1.11 中，我是否将验证检查放在模型或数据库模型映射器中？

> ID：14001050
> 
> 赞同：1
> 
> 时间：2012-12-22T07:48:00.577
> 
> 标签：model-view-controller, zend-framework

在以下我有一个模型和一个模型映射器的情况下，我对应该将验证函数放在哪里有点困惑，例如考虑以下内容：

```
models
-> User
-> UserMapper

Class User{

  private $id;
  private $name;
  private $email;

  }

Class UserMapper extends Zend_Db_Table_Abstract{

  function findById($id){
  }

  function save(User $user){
  }

} 
```

我需要设置它，以便新用户对象不能与现有用户对象具有相同的电子邮件 - 我将验证逻辑放在哪里来检查这一点，即在模型或模型映射器中？会不会是：

```
Class UserController{

  function doAction(){
    $user = new User();
    $u = new UserMapper();
    ...
    // is this the right way to do this?
    if($user->validate()){

    }

    // or is this the right way to do this?

   if($u->validate($user)){

   }

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T09:59:31.217

很多时候，您会在注册表单中看到此验证，您可以使用注册表单对象进行验证，也可以使用 User 对象。

无论哪种方式[`Zend_Validate::DbNoRecordExists`](http://framework.zend.com/manual/1.12/en/zend.validate.set.html#zend.validate.Db)或[`Zend_Validate::DbRecordExists`](http://framework.zend.com/manual/1.12/en/zend.validate.set.html#zend.validate.Db)可能被证明是有用的，并且可以用作表单验证器：

```
//form demo
class Reg_Form extends Zend_Form
{  
public function init() {
   $name = new Zend_Form_Element_Text('name');
        $name->setLabel('Name');
        $name->setAttrib('placeholder', 'Username');
        $name->setOptions(array('size' => 20));
        $name->addFilter('StringToLower');
        //truncated for brevity
        $name->addValidator(new Zend_Validate_Db_NoRecordExists(array(
                    'table' => 'users',
                    'field' => 'name'
                )));
        $this->addElement($name);
    }
} 
```

或模型中的独立验证器。

```
//Entity Model demo, This is used to check against MP3 database
/**
 * Does record already exist in DB
 *
 * Pass in the mapper to use as a string.
 * Will trigger predefined validator DbNoRecordExists
 *
 * @param string $mapper accepted values are: 'album' 'artist' 'track'
 * @return boolean returns true if no record exists
 */
protected function dbNoExist($mapper)
{
    switch ($mapper) {
        case 'album':
            $value = $this->taginfo->getAlbum();
            $options = array(
                'table'  => 'album',
                'field'  => 'title'
            );
            break;
        case 'artist':
            $value = $this->taginfo->getArtist();
            $options = array(
                'table'  => 'artist',
                'field'  => 'name'
            );
            break;
        case 'track':
            $value = $this->taginfo->getMd5();
            $options = array(
                'table' => 'track',
                'field' => 'hash'
            );
    }
    $validator = new Zend_Validate_Db_NoRecordExists($options);
    if ($validator->isValid($value)) {
        //no record exists
        return TRUE;
    } else {
        //record exists
        return FALSE;
    }
} 
```

我尝试在我的项目中回答这些问题的方式是：

如果我将数据持久性从 MySql 更改为平面文件（或其他方法），我还需要执行此操作（验证）吗？

如果是这样，代码将进入实体模型（用户）。如果不是，那么代码将进入映射器。我意识到这有点简单，但它通常会让我朝着正确的方向前进。

**[编辑]**

就我个人而言，如果可能的话，我什至会在表单发布之前进行这一小部分验证。我想在用户发布表单之前让他知道他是否已经拥有该电子邮件的帐户，这样可以节省我们双方的时间和挫败感。最终验证始终可以在用户模型中完成。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T08:40:02.097

任何与数据库表相关的复杂逻辑或验证都应转到“模型”类（用户）。不要将它们放在 Table 类（UserMapper）中。

在您的情况下，模型类名称是“用户”；

我按照以下方法进行重复电子邮件检查。

1.  在模型文件 (User.php) 中包含“模型映射器”文件 (UserMapper.php)
2.  在 Model 类 (User) 中创建一个名为“isEmailDuplicate($emailAddress)”的公共 STATIC 方法。在这个函数中，创建 Mapper 类 (UserMapper.php) 的对象，并在 Mapper 类对象 (UserMapper.php) 上使用 'Zend_Db_select'( [help link](http://framework.zend.com/manual/1.12/en/zend.db.select.html) ) 执行选择查询。最后将布尔结果返回给调用者。
3.  从 UserController 调用模型函数。$isEmailDuplicate = 用户::isEmailDuplicate($emailAddress);

# json - 从 Flex 中的资产访问 JSON 文件

> ID：14001052
> 
> 赞同：3
> 
> 时间：2012-12-22T07:48:22.260
> 
> 标签：json, actionscript-3, apache-flex, flex4.5

如何解码 Json 文件。我的代码

```
var bytes:ByteArray = new json_file();
var json:String = bytes.readUTFBytes(bytes.length);
var arr:Object = JSON.decode(json); 
```

运行上述命令时出现以下错误

```
Access of undefined property JSON.
-JSON 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T07:53:56.077

使用下面的代码对我有用。

插入此代码

```
var arr:Object = com.adobe.serialization.json.JSON.decode(json); 
```

用这个

```
var arr:Object = JSON.decode(json); 
```

和`import`下面的包

```
import com.adobe.serialization.json.JSON; 
```

# c# - Kendo UI MVC 和 ServiceStack Razor - 没有 HtmlHelpers

> ID：14001054
> 
> 赞同：4
> 
> 时间：2012-12-22T07:48:55.483
> 
> 标签：c#, asp.net-mvc, kendo-ui, servicestack

我正在尝试将 Kendo UI MVC 包装器与 ServiceStack Razor Views 一起使用。

我按照[Kendo UI 说明](http://docs.kendoui.com/getting-started/using-kendo-with/aspnet-mvc/introduction#manually-add-kendo-ui-to-aspnet-mvc-applications)遵循了指示，希望它是直截了当的。

@HTML。没有在我的 cshtml 页面中显示 Kendo 扩展。

有人可以提供一些指导吗？

*   我按照 Atanas Korchev 的要求更新了这些部分

    ```
    <compilation debug="true" targetFramework="4.5">
      <!-- Service Stack Razor View Build Provider -->
      <buildProviders>
        <add extension=".cshtml" type="ServiceStack.Razor.CSharpRazorBuildProvider, ServiceStack.Razor, Version=2.1.*, Culture=neutral" />
      </buildProviders>
      <assemblies>
        <add assembly="ServiceStack"/>
        <add assembly="ServiceStack.Razor"/>
        <add assembly="ServiceStack.Text" />
        <add assembly="Kendo.Mvc"/>
        <add assembly="WebApplication1" />
    <!-- MVC 3 Added at Atanas Korchev's request -->
    <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
      </assemblies>
    </compilation> 
    ```

*   （由于某种原因，它拒绝显示代码示例，但我也将 Mvc 命名空间添加到了正确的部分）

它现在抛出错误：

```
'ServiceStack.Html.HtmlHelper<dynamic>' does not contain a definition for 'Kendo' and the best extension method overload 'Kendo.Mvc.UI.HtmlHelperExtension.Kendo(System.Web.Mvc.HtmlHelper)' has some invalid arguments} 
```

*   我将 @(Html.Kendo().DatePicker().Name("Birthday")) 粘贴到我的视图中并尝试编译，按照 Atanas 的请求获取此错误

*   我认为如果没有一些源代码更改来处理 ServiceStack 的 HtmlHemlper，解决方案是不可能的？

原始 Web.config

```
<?xml version="1.0"?>

<configuration>

  <!-- Separate config section for each at the bottom of web.config -->
  <configSections>
    <sectionGroup name="system.web.webPages.razor" type="System.Web.WebPages.Razor.Configuration.RazorWebSectionGroup, System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <section name="host" type="System.Web.WebPages.Razor.Configuration.HostSection, System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
      <section name="pages" type="System.Web.WebPages.Razor.Configuration.RazorPagesSection, System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
    </sectionGroup>
  </configSections>

  <system.web>
    <compilation debug="true" targetFramework="4.5">
      <!-- Service Stack Razor View Build Provider -->
      <buildProviders>
        <add extension=".cshtml" type="ServiceStack.Razor.CSharpRazorBuildProvider, ServiceStack.Razor, Version=2.1.*, Culture=neutral" />
      </buildProviders>
      <assemblies>
        <add assembly="ServiceStack"/>
        <add assembly="ServiceStack.Razor"/>
        <add assembly="ServiceStack.Text" />
        <add assembly="Kendo.Mvc"/>
        <add assembly="WebApplication1" />
      </assemblies>
    </compilation>
    <httpRuntime targetFramework="4.5" />
  </system.web>

  <!-- Register ServiceStack to listen on root path of web server -->
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <handlers>
      <add path="*" name="ServiceStack.Factory" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*" preCondition="integratedMode" resourceType="Unspecified" allowPathInfo="true" />
    </handlers>
  </system.webServer>

  <appSettings>
    <!-- Enables ServiceStack.Razor pages -->
    <add key="webPages:Enabled" value="false" />
  </appSettings>

  <!-- ServiceStack.Razor Config -->
  <system.web.webPages.razor>
    <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <pages pageBaseType="ServiceStack.Razor.ViewPage">
      <namespaces>
        <!-- Make these namespaces available to razor views-->
        <!-- Required for ServiceStack -->
        <add namespace="ServiceStack.Html" />
        <add namespace="ServiceStack.Razor" />
        <add namespace="ServiceStack.Text" />

        <!-- Business -->
        <add namespace="WebApplication1" />

        <!-- Kendo UI MVC Wrappers -->
        <add namespace="Kendo.Mvc.UI" />
      </namespaces>
    </pages>
  </system.web.webPages.razor>

</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T10:12:56.790

*注意：以下内容无意反映对 ServiceStack 或 KendoUI 的负面评价。他们都**很棒**。这些产品本质上是不相容的。这个问题的预期目的是调查这种性质的可行性*

* * *

在详细查看了 Kendo.Mvc 的源代码后，我得出的结论是，Kendo.Mvc 不适合也不适合与 ServiceStack Razor 一起使用。

这是因为：

*   ServiceStack 的 Razor 对 System.Web.Mvc 没有依赖，而 Kendo.Mvc 重新引入了它
*   ServiceStack 有自己的类实现，如 HtmlHelper、ViewPage 和 Kendo.Mvc 依赖于 System.Web.Mvc 等价物的其他关键类。
*   我还没有找到一种清晰的方法来轻松分离 Kendo.Mvc 对 MVC 控制器的依赖（ServiceStack razor 视图不使用）。希望能够以类型安全的方式简单地配置 razor 中的小部件，以呈现到与模型相关联的 html。

我将求助于编写自己的 Helpers，使用类似[StackOverflow Q&A](https://stackoverflow.com/questions/10635063/mvc-3-htmlhelper-extension-method-to-wrap-around-content)这样的方法作为方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-01T13:11:26.723

我有同样的问题，但通过将以下命名空间添加到我的`web.config`.

```
<add namespace="Kendo"/>
<add namespace="Kendo.Mvc"/>
<add namespace="Kendo.Mvc.Extensions"/>
<add namespace="Kendo.Mvc.Ui"/> 
```

我认为这里的关键是`add namespace="Kendo.Mvc.Ui"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-01T11:22:18.940

更新 Views 文件夹中的 web.config

```
<add namespace="Kendo.Mvc.UI"/> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-22T10:12:42.030

您需要在**Views**文件夹的 web.config 文件中添加相关的命名空间，而不是在顶层文件夹的主 web.config 文件中。只需仔细阅读说明。

# jsp - 从动作类中获取多选 struts2 的值

> ID：14001058
> 
> 赞同：0
> 
> 时间：2012-12-22T07:49:49.297
> 
> 标签：jsp, struts2

我正在尝试从操作类中检索多选值。我确实喜欢这样，并且从动作类中为 cat Object 获取 null 。

```
<s:select key="cat" id="cat_multi" name="cat" listKey="catID"
            list="catList" listValue="catName" multiple="multiple" size="5" />

public String getCat() {
        return cat;
    }

    public void setCat(String cat) {
        this.cat = cat;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T10:19:31.990

首先`multiple`属性的正确用法是`multiple="true"`. 第二：为了工作多选需要`multiselect`拦截器包含在你的拦截器堆栈中。

只需`defaultStack`在您的声明中使用，`struts.xml`您的`<s:select>`声明应该是这样的。

```
<s:select key="cat" id="cat_multi" name="cat" listKey="catID"
        list="catList" listValue="catName" multiple="true" size="5" /> 
```

# configuration - 如何根据用于 URL 的协议（http/https）动态更改 Joomla 1.5 基本 URL

> ID：14001061
> 
> 赞同：2
> 
> 时间：2012-12-22T07:51:18.353
> 
> 标签：configuration, joomla, https

我在 Joomla 1.5.25 上开发了网站。我已经在我的服务器上设置了 ssl，以便为支付部分提供安全交易。我想将 https 应用到网站的特定部分（支付/登录页面），并希望其余的都在 HTTP 上。我想出了一种通过 htaccess 在 https 上拥有特定页面的方法。但问题是页面链接/资源仍然引用 HTTP，并且由于该浏览器显示该页面不安全。问题是 configuration.php 中的实时站点 URL 是设置为http。如果我将其更改为 https，它的工作正常。但它对 HTTP 页面也一样。我不确定这对 seo 是否有好处。

我认为如果系统可以根据当前协议动态处理它，这可以解决。所以如果有人使用 HTTP，那么它应该使用 HTTP 版本，如果是 https，则使用 https。我不确定 joomla 是否已经为此提供任何解决方案.如果是，那么为什么它不适用于我的网站。请提出一些处理方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T01:09:33.943

在 Joomla！1.5 您可以指定`HTTPS`用于特定菜单项的那个。此选项适用于每种菜单类型，因为它是“系统”参数。

如果您查看下图，您将看到最后一行`SSL Enabled`带有`Off`, `Ignored`（默认）和`On`.

将此设置为**On**以在该页面上强制 SSL( `HTTPS`)。（**Off**将强制`HTTP`使用）并且**Ignore**将允许浏览器要求的任何内容。

![Joomla！ 1.5 菜单项系统参数](../Images/e742962e9c55a32ed9994d19b5f6a43f.png)

*SEO 不受协议是否安全的影响。*

# php - 无法处理jquery ajax发送的json

> ID：14001062
> 
> 赞同：2
> 
> 时间：2012-12-22T07:51:22.013
> 
> 标签：php, mysql, jquery

我似乎无法让以下工作

```
restoJSON = { "name" : "Bloesem", "qName" : "bloesem", "address" : "Binnen Dommersstraat 13", "area" : "Jordaan", "tel" : "770 0407", "cuisine" : "European", "comment" : "Ver``rassingsmenu - slow service but 'gezellig' atmosphere", "booking" : "", "website" : "http://www.restaurantbloesem.nl/", "link" : "/?p=6", "rating" : 3, "price" : "3", "lat" : "52.382917", "lng" : "4.8854370000000245", "heading" : "0", "pitch" : "0", "zoom" : "0" };

     jQuery.ajax({
       type: "POST",
       url: "updateDatabase.php",
       data: restoJSON,
       dataType: "text",
       success: function(response, stat)
       {
         console.log("Response: " + response);
       },
       error: function()
        {
           console.log(arguments);
        }       
     }); 
```

然后 updateDatatbase.php 在这些行上有变化以进行调试

```
echo "name: " . $_POST['qName'];
$json = json_decode($_POST['data'], true);
echo " " . $json['qName'];
foreach($_POST as $key=>$val) {
echo $key . "-x-" . $val;
} 
```

我是一个相对的菜鸟，通过复制这个论坛的建议来完成工作，而不是完全理解。控制台日志如下 -*请注意它是如何拆分链接行中的 = 的*。

```
Response: name: 
{"name":"Bloesem",
"qName":"bloesem",
"address":"Binnen_Dommersstraat_13",
"area":"Jordaan",
"tel":"770_0407",
"cuisine":"European",
"comment":"Verrassingsmenu_-_slow_service_but_'gezellig'_atmosphere",
"booking":"",
"website":"http://www_restaurantbloesem_nl/",
"link":"/?p-x-6\",
\"rating\" : 3,
\"price\" : \"3\",
\"lat\" : \"52.382917\",
\"lng\" : \"4.8854370000000245\",
\"heading\" : \"0\",
\"pitch\" : \"0\",
\"zoom\" : \"0\"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T07:56:06.377

如果您查看代码，您会回显两个字符串。您需要删除其中一个，很可能是`echo $query;`

所以尝试改变：

```
echo "name: " . $json['qName'];
echo $query; 
```

只是：

```
echo "name: " . $json['qName']; 
```

您还在末尾缺少分号，`restoJSON`并且未使用 . 将其声明为变量`var`。

改变这个：

```
restoJSON = { "name" : "Bloesem", "qName" : "bloesem", "address" : "Binnen Dommersstraat 13", "area" : "Jordaan", "tel" : "770 0407", "cuisine" : "European", "comment" : "Ver``rassingsmenu - slow service but 'gezellig' atmosphere", "booking" : "", "website" : "http://www.restaurantbloesem.nl/", "link" : "/?p=6", "rating" : 3, "price" : "3", "lat" : "52.382917", "lng" : "4.8854370000000245", "heading" : "0", "pitch" : "0", "zoom" : "0" } 
```

至：

```
var restoJSON = { "name" : "Bloesem", "qName" : "bloesem", "address" : "Binnen Dommersstraat 13", "area" : "Jordaan", "tel" : "770 0407", "cuisine" : "European", "comment" : "Ver``rassingsmenu - slow service but 'gezellig' atmosphere", "booking" : "", "website" : "http://www.restaurantbloesem.nl/", "link" : "/?p=6", "rating" : 3, "price" : "3", "lat" : "52.382917", "lng" : "4.8854370000000245", "heading" : "0", "pitch" : "0", "zoom" : "0" }; 
```

最后，您将数据`key/value`成对发送，因此没有理由向`json_decode()`他们发送数据。

改变这个：

```
$json = json_decode($_POST['data'], true); 
```

至：

```
$json = $_POST; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T08:05:17.733

当通过 jQuery.ajax 发送数据时，POST 变量被设置为 restoJSON 中的键/值。因此，在 PHP 中不需要 JSON 解码。只需执行以下操作：

```
echo "name: " . $_POST['qName']; 
```

看到“qName”已通过。此外，您的 UPDATE 语句目前似乎没有设置任何字段（请参阅：[PHP 更新语法](http://www.w3schools.com/php/php_mysql_update.asp)）。

# asp.net-mvc - 对 Global.asax 中的方法使用依赖注入

> ID：14001063
> 
> 赞同：0
> 
> 时间：2012-12-22T07:51:33.693
> 
> 标签：asp.net-mvc, asp.net-mvc-3, dependency-injection, structuremap

使用 DI 容器并使用 StructureMap 创建了一个 ASP.Net MVC3 应用程序。一切都在控制器方法中工作。但是我该怎么做一个 global.asax 方法呢？

这里我设置了依赖解析器，global.ascx 的 Application_Start

```
 protected void Application_Start()
    {
    DependencyResolver.SetResolver(new StructureMapDependencyResolver(container));
    LoadApplicationMetaData(?,?,?);
    }

      private void LoadApplicationMetaData(IMetaDataService metaService, ITenantService tenantService, ICacheStorage store)
    {
        store.Add("TenantMeta", tenantService.GetAllTenants());

    }

    public class TenantService : ITenantService
    {
    private readonly ITenantRepository TenantRepsitory;

    public TenantService(ITenantRepository _tenantRepository)
    {
        TenantRepsitory = _tenantRepository;
    }
    } 
```

在下面的这一行中，我如何为方法调用进行松散耦合。

```
 **LoadApplicationMetaData(?,?,?); what should be passed** 
```

***注意：TenantService 类需要 ITenantRepository***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T10:42:13.577

```
DependencyResolver.SetResolver(new StructureMapDependencyResolver(container)); 
```

您显然有对 StructureMap 容器（您的变量`container`）的引用，所以只需调用`container.GetInstance<IMetaDataService>()`etc。

# iphone - 如何在iphone应用程序开发中根据时间日期月份和年份生成唯一ID

> ID：14001064
> 
> 赞同：0
> 
> 时间：2012-12-22T07:51:41.650
> 
> 标签：iphone, ios, ios4

我想要一个`Test_id`基于当前时间、日期、月份和年份的唯一测验应用程序，在此基础上我可以计算一些其他信息。

# jpa-2.0 - 遍历 jpa 中的结果列表并设置 firstResult,maxResults

> ID：14001067
> 
> 赞同：0
> 
> 时间：2012-12-22T07:52:30.163
> 
> 标签：jpa-2.0

我有一个查询，它给出的结果很大，假设它是 1,00,000。我需要在 UI 的网格中显示所有这些记录。所以我正在使用

```
TypedQuery<Object> typedQuery =  entityManager.createQuery(cq); 
   typedQuery.setFirstResult(0);
   typedQuery.setMaxResults(1000);
List<Object> resultList = typedQuery.getResultList(); 
```

执行此查询时，我只能在 UI 中看到 1000 条记录。它没有获取下一组结果。但是无论该查询返回什么，我都需要查看所有记录。我该怎么做。谁能告诉我。这对我来说非常紧急。我正在使用 JPA 标准 API。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T07:12:38.513

您如何尝试获取下一组结果？

如果您按原样使用帖子中显示的查询，您将始终获得前 1000 条记录，因为这就是您所要求的。

您需要通过设置`setFirstResult`为 0 然后 1000 然后 2000 等等来重复调用此查询，直到结果列表为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T09:06:15.937

如果您想要所有内容而不仅仅是前 1000 个结果，为什么要调用`setFirstResult()`and `setMaxResults()`？删除它们，查询将检索所有内容：

```
TypedQuery<Object> typedQuery = entityManager.createQuery(cq); 
List<Object> resultList = typedQuery.getResultList(); 
```

# git - 初始化 github 仓库

> ID：14001069
> 
> 赞同：0
> 
> 时间：2012-12-22T07:53:14.473
> 
> 标签：git, github

我刚刚创建了一个新的 Github 存储库，但显然忘记了允许 Github 创建 README 等，它有助于初始化存储库。

我尝试在本地创建它并使用以下命令推送它：

```
git remote add origin
git push -u origin master 
```

但是，它一直给我错误：

`https://github.com/Arkaaito/<repo>/info/refs not found: did you run git update-server-info on the server?`

我不知道如何在 Github 上运行 git update-server-info 因为 Github 不提供通过 ssh 的 shell 访问；在某个地方必须有一些 UI 选项，但我不知道在哪里。任何人都可以帮我找到令人眼花缭乱的明显吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T07:59:43.963

你能发布结果吗？`git remote show origin`从你得到的错误的外观来看，你只是忘记在你的用户名后面包含 repo 名称......

此外，[此 GitHub 帮助文章](https://help.github.com/articles/https-cloning-errors)中提到了该错误，原因是使用了非常旧的 git 版本或没有对 repo 的推送访问权限。（它也可能是不正确的远程源 URL 的结果，例如大小写不正确的 URL。）

**编辑**：刚刚注意到它的格式`<repo>`显示为空白，很可能您只有旧版本的 git，所以更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T08:36:40.083

1.  在 Github 上创建一个 repo。
2.  在本地机器上创建一个 repo：

    ```
    $ cd Foo  
    $ touch README.md  
    $ git init  
    $ git add .
    $ git commit -m "Initial commit" 
    ```

3.  在本地和远程之间链接您的仓库，然后推送到远程：

    ```
    $ git remote add origin git@github.com:<your_username>/Foo.git
    $ git push -u origin master 
    ```

如果您遇到冲突，请在推送之前从远程仓库中提取：

```
$ git pull 
```

# ant - 如何使用 ant 脚本在 Eclipse 中将外部 jars/ant 库添加到 buildpath

> ID：14001070
> 
> 赞同：0
> 
> 时间：2012-12-22T07:53:34.507
> 
> 标签：ant

我从早上开始搜索如何在我的项目构建路径中包含外部依赖项/jar。我正在使用 ant 和 ivy 构建我的项目。Ant 正在下载依赖项并在项目根文件夹中创建一个名为 lib 的文件夹。当我尝试编写代码并使用 eclipse 自动建议查看下载的依赖项中的类时，eclipse 无法显示它们。然后我意识到罐子在 lib 文件夹中，但不在类路径/构建路径中。我是蚂蚁新手，我不知道一个简单的方法来做到这一点。我用这个

```
<target name="resolve">
    <ivy:retrieve />
    <path id="gwtlibs">
        <fileset dir="lib">
            <include name="*.jar" />
        </fileset>
    </path>
</target> 
```

甚至这个

```
<target name="resolve">
    <ivy:retrieve />
    <path id="gwtlibs">
        <fileset dir="lib">
            <include name="*.jar" />
        </fileset>
    </path>
</target> 
```

但是我所有的努力都失败了。在我的项目结构中，我看不到任何类似“引用库”的东西。我是否需要手动添加通过转到 buildpath 下载的 jars 并添加外部 jars 选项？我有 Maven 的经验。当我进行 Maven 构建时，所有外部依赖项都会被下载并自动添加到项目构建路径中。但是我怎样才能用蚂蚁达到同样的效果呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T11:05:36.963

我建议使用 ivy [cachepath](http://ant.apache.org/ivy/history/latest-milestone/use/cachepath.html)任务。它旨在使用 ivy 配置创建 ANT 路径。

有关其使用的示例，请参见：

*   [如何避免使用 Ivy 复制依赖项](https://stackoverflow.com/questions/2609465/how-to-avoid-copying-dependencies-with-ivy/2611353#2611353)

对于 Eclipse 集成，我建议使用[ivyIDE](http://ant.apache.org/ivy/ivyde/)插件，这将确保 Eclipse 使用 ivy 来配置它的内部类路径。

最后，下面的答案有一个如何直接从 ANT 生成 Eclipse“.classpath”的示例。

*   [用于在多个版本的类路径之间进行选择的 Ant 脚本](https://stackoverflow.com/questions/10794813/ant-script-to-choose-between-multiple-version-of-classpaths/10824812#10824812)

# git - 不删除之前的提交和更改。

> ID：14001079
> 
> 赞同：1
> 
> 时间：2012-12-22T07:55:16.997
> 
> 标签：git, github, git-svn

嘿，我是 github 的新手，所以请帮帮我。

我有四个提交。

```
commit4 eh87eg87

commit3 e3e983jj

commit2 de6d6e3d

commit1 du3qw6y1 
```

我想回到commit2并对其进行更改并提交（commit 5）并且不会丢失其余的提交，如commit4、commit3、commit2和commit1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T08:02:15.927

你可以尝试两件事：

1.  `git rebase --interactive <ID of the commit before commit1>`. 阅读 git 为您打印的文档。基本上，你必须使用你的提交`edit`而不是`pick`for `commit1`，`amend`然后继续 rebase。
2.  记下提交的 ID `git reset --hard <ID of the commit before commit1>`，然后按顺序获取每个提交并使用复制它们`git cherry-pick <ID of commit>`，然后更改要更改的文件，然后`git commit --ammend`转到下一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T08:02:05.107

您可以只创建另一个分支，它将用作“悬空”提交的标识符，然后将当前分支重置为提交 2：

1.  `git branch temp_branch`（您可以在此处选择任何名称）
2.  `git reset --hard de6d6e3d`（提交 2 的 SHA）

在步骤 1 中创建临时分支后，您仍将位于原始分支上。重置后，您可以继续处理提交 2，如果您需要其他两个提交，只需检查 temp_branch（或将其用于 rebase、cherry-pick 等）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T15:35:11.020

你可能会尝试

```
git revert --no-commit de6d6e3d
... hack ...
git commit -m "re commit2" 
```

如果你找到了最好的解决方案，你可能想在这里添加它：[https](https://git.wiki.kernel.org/index.php/GitSvnClient_(git-svn) ://git.wiki.kernel.org/index.php/GitSvnClient_(git-svn )

# jquery - jsFiddle - 不能使简单的脚本正确

> ID：14001080
> 
> 赞同：-2
> 
> 时间：2012-12-22T07:55:28.107
> 
> 标签：jquery, jsfiddle

请告诉我，为什么单击锚点后，“opened”类未附加到#myheader 元素内的第一个子 div？

```
$('#showhide').click(function(){
    if ( $('#myheader>div').hasClass('opened') ) {
        $('#myheader>div').removeClass('opened');
        //$('#header>div.wrap>div.showme').removeClass('visible');
    } else {
        $('#myheared>div').addClass('opened');

    }
})​ 
```

JSFiddle[链接](http://jsfiddle.net/Cyberek/UrqnR/3/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T07:58:33.430

因为你打错了：

```
$('#myheared>div').addClass('opened');
//       ^^^ 
```

应该：

```
$('#myheader>div').addClass('opened'); 
```

不过，它可以通过使用更简单的方式完成[`toggleClass()`](http://api.jquery.com/toggleClass/)

```
$('#showhide').click(function() {
    $('#myheader > div').toggleClass('opened');
}); 
```

# java - 更新链表/向量的属性

> ID：14001085
> 
> 赞同：0
> 
> 时间：2012-12-22T07:56:17.377
> 
> 标签：java, algorithm, vector, linked-list

当另一个列表循环通过时，我有一些对象（`Rank`s）被添加到列表中。

这些对象中的每一个都有一个“up”和一个“down”属性，需要分别设置为下一个和上一个元素。如果元素位于列表的顶部，“up”属性应该指向自身，底部元素也是如此。

我正在使用 Vector ( `java.util.Vector`)，因此我可以使用索引来查找以下和以前的元素。这是添加过程，向上/向下操作：

```
public void addToRanksInOrderWithUpDown(Rank r) {
    ranksInOrder.addElement(r);
    if (ranksInOrder.size() != 1) {
        Rank ru, rd;
        try {
            ru = ranksInOrder.elementAt(ranksInOrder.indexOf(r)+1);
        } catch (ArrayIndexOutOfBoundsException e) {
            ru = r;
        }
        try {
            rd = ranksInOrder.elementAt(ranksInOrder.indexOf(r)-1);
        } catch (ArrayIndexOutOfBoundsException e) {
            rd = r;
        }
        r.setUp(ru);
        r.setDown(rd);
        ru.setDown(r);
        rd.setUp(r);
    }
} 
```

`r`作为一个传递的实例`Rank`。这是循环：

```
if (g.getRanksInOrder().size() == 1) {
    g.addToRanksInOrder(currentRank);
} else {
    g.addToRanksInOrderWithUpDown(currentRank);
} 
```

`addToRanksInOrder``addToRanksInOrderWithUpDown`只需执行,的第一步`ranksInOrder.addElement(r);`。

**不幸的是，“up”和“down”通常最终是 Null 或错误的东西。有什么更好的方法来解决这个问题？我可以修复我的代码，还是需要废弃它？**

编辑：对不起，但没有一个答案真的有效。问题仍然像以前一样，各种起伏保持为空或错误。

* * *

这是一个[SSCCE](http://sscce.org/)：

```
public class Rank {
    private Rank up;
    private Rank down;
    private String name;
    public Rank getUp() {
        return up;
    }
    public Rank getDown() {
        return down;
    }
    public Rank getName() {
        return name;
    }
    public void setUp(Rank r) {
        up = r;
    }
    public void setDown(Rank r) {
        down = r;
    }
    public Rank(String s) {
        name = s;
    }
}

public class Ranker {
    private Set<Rank> ranks = new HashSet<Rank>();
    private Vector<Rank> ranksInOrder = new Vector<Rank>(); 
    public Vector<Rank> sort() {
        for (Rank r : ranks) {
            if (ranksInOrder.size == 1) {
                addToRanksInOrder(r);
            } else {
                addToRanksInOrderWithUpDown(r);
            }
        }
        return ranksInOrder;
    }
    private void addToRanksInOrderWithUpDown(Rank r) {
        ranksInOrder.addElement(r);
        if (ranksInOrder.size() != 1) {
            Rank ru, rd;
            try {
                ru = ranksInOrder.elementAt(ranksInOrder.indexOf(r)+1);
            } catch (ArrayIndexOutOfBoundsException e) {
                ru = r;
            }
            try {
                rd = ranksInOrder.elementAt(ranksInOrder.indexOf(r)-1);
            } catch (ArrayIndexOutOfBoundsException e) {
                rd = r;
            }
            r.setUp(ru);
            r.setDown(rd);
            ru.setDown(r);
            rd.setUp(r);
        }
    }
    private void addToRanksInOrder(Rank r) {
        ranksInOrder.addElement(r);
    }
    private String displayAsList(Vector<Rank> vr) {
        String list = "";
        for (Rank r : vr) {
            list += "~" + r.getName() + "\n";
            if (r.getUp() == null) {
                list += " +NULL\n";
            } else {
                list += " +" + r.getUp().getName() + "\n";
            }
            if (r.getDown() == null) {
                list += " -NULL\n";
            } else {
                list += " -" + r.getDown().getName() + "\n";
            }
            list += "----\n";
        }
        return list;
    }
    public static void main(String[] args) {
        for (int i=0;i<11;i++) {
            ranks.add(new Rank("Rank " + i));
        }
        System.out.println(displayAsList(sort()));
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T08:17:21.483

而不是捕获代码块，只需尝试

```
r.setDown(r); 
```

在您的捕获代码中。

由于`addElement`总是将元素添加到 Vector 的末尾，因此根本不需要拥有`ru`。

```
public void addToRanksInOrderWithUpDown(Rank r) {
    ranksInOrder.addElement(r);
    if (ranksInOrder.size() != 1) {
        Rank rd;
        try {
            rd = ranksInOrder.elementAt(ranksInOrder.indexOf(r)-1);
            r.setUp(rd);
            r.setDown(r);
            rd.setDown(r);
        } catch (ArrayIndexOutOfBoundsException e) {
            r.setUp(r);
            r.setDown(r);
        }

    }
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T08:27:39.967

试试这个

```
void addToRanksInOrderWithUpDown(Rank r) {
    r.setUp(r);
    if (ranksInOrder.isEmpty()) {
        r.setDown(r);
    } else {
        Rank last = ranksInOrder.get(ranksInOrder.size() - 1);
        r.setDown(last);
        last.setUp(r);
    }
    ranksInOrder.add(r);
} 
```

**备注**：

使用 Vector 似乎很奇怪，它是一个遗留类，请改用 ArrayList。

您不应该对控制流使用异常，这是一种已知的反模式。参见 J.Bloch 的“Effective Java”，第 57 条：“仅在异常情况下使用异常”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T08:44:02.480

向量列表上的第一个元素对于 Rank.up() 将始终为 null，因为没有更多的“向上”元素。除非您同意拥有像 Rank r 这样的第一个元素；r.setUp(r);

向量上的最后一个元素对于 Rank.down() 将始终为 null，因为没有更多的“向下”元素。除非您同意拥有像 Rank r 这样的最后一个元素；r.setDown(r);

因此，解决方案之一是：

```
public void addToRanksInOrderWithUpDown(Rank r) {

    r.setDown(r); // r will always be the last element for the moment.

    if(ranksInOrder.isEmpty()) {
        // Link r to itself.
        r.setUp(r);
    } else {
        // Link former last element to r and vice versa.
        Rank last = ranksInOrder.lastElement();
        last.setDown(r);
        r.setUp(last);
    }

    ranksInOrder.addElement(r);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T15:21:17.633

```
import java.util.HashSet;
import java.util.Set;
import java.util.Vector;

class Rank {
    private Rank up;
    private Rank down;
    private String name;
    public Rank getUp() {
        return up;
    }
    public Rank getDown() {
        return down;
    }
    public String getName() {
        return name;
    }
    public void setUp(Rank r) {
        up = r;
    }
    public void setDown(Rank r) {
        down = r;
    }
    public Rank(String s) {
        name = s;
    }
}

public class Ranker {
    private Set<Rank> ranks = new HashSet<Rank>();
    private Vector<Rank> ranksInOrder = new Vector<Rank>();
    public Vector<Rank> sort() {
        for (Rank r : ranks) {
            *if (ranksInOrder.size() == 0) {*
                addToRanksInOrder(r);
            } else {
                addToRanksInOrderWithUpDown(r);
            }
        }
        return ranksInOrder;
    }
    private void addToRanksInOrderWithUpDown(Rank r) {
        ranksInOrder.addElement(r);
        *int ruEx =0;int rdEx = 0;*
        if (ranksInOrder.size() != 1) {
            Rank ru, rd;
            try {
                ru = ranksInOrder.elementAt(ranksInOrder.indexOf(r)-1);
            } catch (ArrayIndexOutOfBoundsException e) {
                ru = r;
                *ruEx = 1;*
            }
            try {
                rd = ranksInOrder.elementAt(ranksInOrder.indexOf(r)+1);
            } catch (ArrayIndexOutOfBoundsException e) {
                rd = r;
                *rdEx = 1;*
            }
            r.setUp(ru);
            r.setDown(rd);
            *if(ruEx == 0){
                ru.setDown(r);
            }
            if(rdEx == 0){
                rd.setUp(r);
            }*

        }
    }
    private void addToRanksInOrder(Rank r) {
        *r.setDown(r);
        r.setUp(r);*
        ranksInOrder.addElement(r);
    }

    private String displayAsList(Vector<Rank> vr) {
        String list = "";
        for (Rank r : vr) {
            list += "~" + r.getName() + "\n";
            if (r.getUp() == null) {
                list += " +NULL\n";
            } else {
                list += " +" + r.getUp().getName() + "\n";
            }
            if (r.getDown() == null) {
                list += " -NULL\n";
            } else {
                list += " -" + r.getDown().getName() + "\n";
            }
            list += "----\n";
        }
        return list;
    }
    public static void main(String[] args) {

        Ranker r = new Ranker();
        for (int i=0;i<11;i++) {
            r.getRanks().add(new Rank("Rank " + i));
        }
        System.out.println(r.displayAsList(r.sort()));
    }
    public Set<Rank> getRanks() {
        return ranks;
    }
    public void setRanks(Set<Rank> ranks) {
        this.ranks = ranks;
    }
} 
```

# android - 重力中心不适用于梵文字体

> ID：14001086
> 
> 赞同：1
> 
> 时间：2012-12-22T07:56:21.277
> 
> 标签：android, android-layout, fonts, alignment

我需要使用居中对齐的梵文字体。我可以使用以下代码显示梵文字体，但文本不在屏幕中心。

```
TextView tv = new TextView(this);
tv.setGravity(Gravity.CENTER_HORIZONTAL| Gravity.CENTER_VERTICAL);
Typeface font = Typeface.createFromAsset(getAssets(), "mangal.ttf");
tv.setTypeface(font);
tv.setText(R.string.string1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T08:08:06.520

尝试设置

```
android:layout_gravity=center 
```

在文本视图的父布局中。

# javascript - jquery timer 不显示被点击的 div，而是根据计时器导航到 div

> ID：14001092
> 
> 赞同：0
> 
> 时间：2012-12-22T07:57:57.127
> 
> 标签：javascript, jquery

我使用这个基于`a href id`值的 jQuery 函数将每个 4 个 div 切换 10 秒。

计时器工作正常，它每 10 秒更改 4 个 div，但是当用户单击特定 div 时，它不会导航到特定 div 并停留在给定时间段（例如 10 秒）并从当前 div 进入下一个 div 而不是它根据计时器值进入 div。

任何人都可以帮我解决这个问题吗？

```
$(function() {
    $("a.menu").click(function() {
        $("div.featuredposts_content").hide();
        $($(this).attr('href')).show();
        return false;
    });
});

$(function() {
    var counter = 0,
        divs = $('#cat1, #cat2, #cat3,#cat4');

    function showDiv() {
        divs.hide() // hide all divs
        .filter(function(index) {
            return index == counter % 4;
        }) // figure out correct div to show
        .show('fast'); // and show it
        counter++;
    }; // function to loop through divs and show correct div
    showDiv(); // show first div    
    setInterval(function() {
        showDiv(); // show next div
    }, 15 * 1000); // do this every 10 seconds    
});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T10:28:28.863

我假设评论中发布的片段的确切标记。

首先，我认为你应该在每个完整周期后重新设置你的计数器，否则它会增长，增长，增长并最终可能导致异常，可能不是在前 2-3 天内，而是最终。没有必要让`counter`变量超出`divs.length`.

除此之外，您的代码中唯一真正缺少的是点击事件中计数器值的设置：

```
$("a.menu").click(function() {
    $("div.featuredposts_content").hide();
    var $divToShow = $($(this).attr('href'));
    $divToShow.show();

    // save the index of the new div +1 to ensure it moves on to the div thereafter
    counter = divs.index($divToShow) + 1; 

    return false;
}); 
```

### [演示](http://jsfiddle.net/u78Uc/)- 计时器从选定的 div 继续

（出于演示目的，我缩短了 DEMO 中的计时器，您当然应该将其重新设置为原始值）

我使用了以下假定的 HTML：

```
<a href="#cat1" class="menu">cat1</a>
<a href="#cat2" class="menu">cat2</a>
<a href="#cat3" class="menu">cat3</a>
<a href="#cat4" class="menu">cat4</a>
<div id="cat1" class="featuredposts_content">Category1</div>
<div id="cat2" class="featuredposts_content">Category2</div>
<div id="cat3" class="featuredposts_content">Category3</div>
<div id="cat4" class="featuredposts_content">Category4</div> 
```

​ 这是完整的脚本：

```
$(function() {
    var counter = 0;
    var divs = $('#cat1, #cat2, #cat3, #cat4');

    function showDiv() {
        divs.hide() // hide all divs
        .filter(function(index) {
            return index == counter % divs.length;
        }) // figure out correct div to show
        .show('fast'); // and show it
        if(counter == divs.length){
            counter = 1;
        } else {
            counter++
        }
    }; // function to loop through divs and show correct div
    showDiv(); // show first div    
    setInterval(function() {
        showDiv(); // show next div
    }, 2000); // do this every 10 seconds    

    $("a.menu").click(function() {
        $("div.featuredposts_content").hide();
        var $divToShow = $($(this).attr('href'));
        $divToShow.show();

        counter = divs.index($divToShow) + 1;

        return false;
    });
}); 
```

# sencha-touch - 使用 Sencha 的 Android 后退按钮事件映射

> ID：14001093
> 
> 赞同：1
> 
> 时间：2012-12-22T07:58:19.710
> 
> 标签：sencha-touch, sencha-touch-2, sencha-architect

有没有办法在不使用phonegap/cordova的情况下将android中的默认后退按钮事件映射到sencha touch？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:08:31.623

可能是这样，有帮助：

```
 if (Ext.os.is('Android')) {
      document.addEventListener("backbutton", Ext.bind(onBackKeyDown, this), false);  // add back button listener
      function onBackKeyDown(e) {
          e.preventDefault();
          // You are at the home screen
          if (Ext.Viewport.getActiveItem().xtype == selectedHomePage.xtype ){
                Ext.Msg.confirm(
                    "",
                    Are You sure, exit?,
                    function(buttonId) {
                        if(buttonId === 'yes') {
                            navigator.app.exitApp();
                        }
                }, this);
          } else {
          }
      }
   } 
```

# postgresql - Postgres TIMESTAMP 查询

> ID：14001096
> 
> 赞同：0
> 
> 时间：2012-12-22T07:59:13.077
> 
> 标签：postgresql

我正在使用复制将 csv 文件导入 postgres，其中一个字段包含 HH:MM:SS 格式的时间值。我希望能够将其设置为 TIMESTAMP 字段，我查看了很多文档，但我正在努力确定将其设置为哪种字段类型。我看到很多关于创建带时区或不带时区、日期等的字段的参考，而不是我真正想要的。最终目标是根据时间间隔创建报告，例如 00:00:00 和 06:30:00 之间的所有数据等

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T08:31:34.007

postgres 中的时间戳是日期和时间的组合。对于时间，仅使用类型时间或带时区的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T10:24:07.567

这是一个例子：

```
CREATE TABLE table01
(
  rowid bigint NOT NULL,
  time_field time without time zone,
  CONSTRAINT table01_pkey PRIMARY KEY (rowid)
)
WITH (
  OIDS=FALSE
); 
```

这是一个文件示例：

```
100,12:30:59
200,08:59:01 
```

您可以将最后一个文件导入到`table01`使用`copy`如下命令：

```
COPY table01 from 'c:/tmp/table01.txt' with csv 
```

考虑到名为的文件`table01.txt`位于：`c:/tmp/`文件夹。

参考： [复制](http://www.postgresql.org/docs/9.2/static/sql-copy.html)

# mysql - MySQL 服务器配置失败

> ID：14001097
> 
> 赞同：0
> 
> 时间：2012-12-22T07:59:16.633
> 
> 标签：mysql, installation

我正在尝试在我的计算机上安装最新版本的 MySQL 社区服务器，出现以下错误：

```
mysql-server-5.5-win32:6 - Looking for valid template
mysql-server-5.5-win32:12 - Found valid template.
mysql-server-5.5-win32:18 - Attempting to process template.
mysql-server-5.5-win32:25 - Processed template.
mysql-server-5.5-win32:31 - Attempting to configure service.
mysql-server-5.5-win32:37 - Configured service.
mysql-server-5.5-win32:43 - Attempting to start service.
mysql-server-5.5-win32:100 - Unable to configure service.
mysql-server-5.5-win32:100 - Product configuration controller finished configuration. 
```

我试图取消重新安装并更改数据和安装的路径，没有区别。有谁有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T08:05:50.633

有一些不同的事情可能是错误的，但这里有一个非常好的分步指南，以确保您不会遗漏一些小东西。

[http://www.webdevelopersnotes.com/how-do-i/install-mysql-windows-7.php](http://www.webdevelopersnotes.com/how-do-i/install-mysql-windows-7.php)

祝你好运，我敢肯定这是小事。

# javascript - 如何将事件附加到新添加的 html 元素

> ID：14001098
> 
> 赞同：2
> 
> 时间：2012-12-22T07:59:20.867
> 
> 标签：javascript, html

如果我有这样的功能：

```
document.someElement.click = function(){alert(555);} 
```

而且我没有在`someElement`HTML页面本身的元素中，所以在我添加`someElement`到页面之后，但是之前的代码不起作用。

将事件侦听器添加到（新）动态添加的 HTML 元素的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T08:06:53.463

这里有两种常见的策略。

1.  将元素添加到 DOM 后，将事件挂钩到元素上。

2.  使用*事件委托*。

第一个相当简单，所以我将重点关注第二个：

事件委托的想法是，大多数 DOM 事件从它们发生的元素“冒泡”到文档，您可以在任何级别处理它们。

例如，假设你有

```
<div id="container">
</div> 
```

您可以在容器 div 上挂钩`click`事件，然后如果您执行以下操作：

```
var span = document.createElement('span');
span.innerHTML = "Hi there";
document.getElementById("container").appendChild(span); 
```

...然后，当您单击 时`span`，事件将冒泡到容器中，并且您会在容器的`click`处理程序中看到单击。

`target`您可以使用对象上的属性来判断是哪个元素启动了事件`event`。

这是一个例子：

HTML：

```
<button id="theButton">Click To Add</button>
<div id="container"></div> 
```

JavaScript：

```
// Note that this code is at the end of the document
(function() {
  var container = document.getElementById("container");

  // Hook clicks on the button
  document.getElementById("theButton").onclick = buttonClick;

  // Hook clicks on the container
  container.onclick = containerClick;

  // Handle button clicks
  function buttonClick() {
    var child = document.createElement('div');
    child.id = ('d' + container.childNodes.length) +
      Math.floor(Math.random() * 10000);
    child.innerHTML = "I'm child div '" + child.id + "'";
    container.appendChild(child);
  }

  // Handle container clicks
  function containerClick(event) {
    event = event || window.event;

    alert("You clicked child '" + event.target.id + "'");
  }

})(); 
```

[实例](http://jsbin.com/icofar/1)| [资源](http://jsbin.com/icofar/1/edit)

注意：我习惯于`onclick`保持简单。在生产中，我建议使用`addEventListener`（或`attachEvent`在 IE 上）。事实上，我通常建议使用像[jQuery](http://jquery.com)、[YUI](http://developer.yahoo.com/yui/)、[Closure](http://code.google.com/closure/library)或[任何其他](http://en.wikipedia.org/wiki/List_of_JavaScript_libraries)库这样的优秀库来提供它们提供的重要实用功能（包括平滑`addEventListener`/`attachEvent`事物）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T08:05:42.723

您可以使用[`addEventListener()`](https://developer.mozilla.org/en/docs/DOM/element.addEventListener)( [`attachEvent()`](http://msdn.microsoft.com/en-sg/library/ie/ms536343%28v=vs.85%29.aspx)for IE) 在新创建的元素上注册点击处理程序，例如：

```
var x = document.createElement('div');
x.innerText = 'click me';

x.addEventListener('click', function() {
  alert('i am clicked');
});

document.body.appendChild(x); 
```

[**演示**](http://jsbin.com/uhomey/2/)

**更新**

看看[TJ的回答](https://stackoverflow.com/a/14001143/1338292)；他基本上是说您可以设置一个容器，在该容器上定义一个单击处理程序；添加到内部的任何元素都会将其事件冒泡到容器中。这样，您只需要一个点击处理程序，而不是每个元素一个。

# c# - 删除字符串元素的最优雅方法

> ID：14001112
> 
> 赞同：6
> 
> 时间：2012-12-22T08:02:33.143
> 
> 标签：c#, string

我正在从输出文件中获取字符串，该字符串始终为`Ok`or `Err`。之后，我将这个结果`Ok`或`Err`Enum 属性转换，这没关系，一切正常，但我确信一定有比我更好的方法。

由于我要获取 3 个字符以防万一，`Ok`我需要从中删除第三个元素`Ok`；结果。

```
string message = File.ReadAllText(@"C:\Temp\SomeReport.txt").Substring(411, 3);
 if (message == "Ok;") // `;` character should be removed in case that Ok is fetched
 {
    message = "Ok";
 } 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T08:12:55.363

您可以只使用`String.Trim()`删除 ';' 如果它在那里。

```
string message = File.ReadAllText(@"C:\Temp\SomeReport.txt").Substring(411, 3).TrimEnd(';') 
```

结果：

```
"Err" = "Err"
"Ok;" = "Ok" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T08:23:21.857

你可以这样做：

```
switch (message)
{
  case "Err":
    SomeProperty = EnumName.Err;
    break;

  case "Ok;":
    SomeProperty = EnumName.Ok;
    break;

  default:
    throw new Exception("Unexpected file contents: " + message);
} 
```

如果你不喜欢这样，你可以`TryParse`在修剪分号后使用：

```
EnumName result;
if (Enum.TryParse(message.TrimEnd(';'), out result))
  SomePropery = result;
else
  throw new Exception("Unexpected file contents: " + message); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T08:35:20.410

```
 Enum message = Enum.Err;
     if (Regex.Match(File.ReadAllText(@"C:\Temp\SomeReport.txt"), "(ok.+?){3}", RegexOptions.Singleline).Success)
     {
        message = Enum.OK;
     } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T08:25:21.187

如果您有以下枚举

```
public enum State
{
    Err, OK
} 
```

使用修剪，如 sa_adam213 所说，您可以通过这种方式将其转换为您的枚举：

```
string message = File.ReadAllText(@"C:\Temp\SomeReport.txt").Substring(411, 3).TrimEnd(';')
State state = (State)Enum.Parse(typeof(State),message);
MessageBox.Show(state.ToString());  //should show OK or Err 
```

并将其转换为int：

```
int i = (int)state;
MessageBox.Show(i.ToString());  //should show 1 or 0 
```

# sql - T-SQL 日期格式

> ID：14001114
> 
> 赞同：1
> 
> 时间：2012-12-22T08:02:42.857
> 
> 标签：sql, sql-server, tsql

如何转换`19 Dec 2012`为 getdate() 返回的日期格式`2012-12-22`。我需要这个用于日期比较，因为如果我将**19 Dec 2012**与**19 Nov 2012**进行比较，由于字母比较，2012 年 11 月**19 日**将变成更大的日期。

**编辑**

我不是这个表的数据库设计者，被给定的表是要工作的。否则不会使用 varchar 来存储日期

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-22T08:03:38.863

 ~~试试看，*但这会返回一个字符串而不是日期*

```
SELECT convert(varchar, getdate(), 106) 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/d41d8/7400)

 ~~您需要先将其转换为日期，然后再与`GETDATE`.

```
SELECT convert(date, '19 Dec 2012', 106) 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/d41d8/7403)

你是设计数据库的人吗？如果是，那么在您下次设计时（*或者如果您有时间进行更改*），请使用适当的数据类型。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-22T08:11:22.217

将两者都转换为日期。不要使用字符串来存储日期值！更好的是，更改您的数据库架构，字符串不匹配问题就完全消失了。

另外，请注意 Getdate() 不返回字符串。它返回 datetime 数据类型的日期。*客户端*将其转换为字符串表示形式。

有关详细信息，请阅读 SQL Server 联机丛书中的“cast and convert”。

```
Convert (datetime, stringdate1) 
```

要修复损坏的数据库列，请执行以下操作：

```
ALTER TABLE YourTable ALTER COLUMN BadStringDate datetime; 
```~~~~

# python - 未找到 Psycopg2 符号：_PQbackendPID 预期在：动态查找

> ID：14001116
> 
> 赞同：1
> 
> 时间：2012-12-22T08:02:59.347
> 
> 标签：python, django, postgresql, heroku, psycopg2

安装 psycopg2 后尝试运行 python / django 时出现此错误：

错误：dlopen（/Users/macbook/Envs/medint/lib/python2.7/site-packages/psycopg2/_psycopg.so，2）：找不到符号：_PQbackendPID 引用自：/Users/macbook/Envs/medint/lib /python2.7/site-packages/psycopg2/_psycopg.so 预期在：动态查找

任何人？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2019-11-27T05:50:37.353

在 Mojave macOS 上，我通过运行以下步骤解决了它：

*   点卸载 psycopg2
*   pip install psycopg2-binary

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T17:49:17.027

我想我可能已经解决了这个问题......但我不确定因为我跑了多少步并重新跑了一遍，但我想给其他人留下提示，以防他们遇到同样的问题。

我在 Mountain Lion 10.8.2 上我结束了：

```
Install Brew  ( going thru all the brew doctor clean ups )
Install postgresql ( using Brew )
Install psycopg2 via pip install 
Install postgresApp ( native OSX app from Heroku )
Launch postgresApp
python manage.py runserver 
```

现在它起作用了……或者似乎起作用了。

# web-applications - 在一个网站上使用相同的用户名多次登录

> ID：14001118
> 
> 赞同：0
> 
> 时间：2012-12-22T08:03:17.777
> 
> 标签：web-applications, web

我在两台不同的机器上登录了一个网站。我在其中一台机器上注销。奇怪的是，我在另一台机器上“自动”退出了。怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T08:15:09.907

在任何 web 应用程序中处理身份验证的方法有很多，像这样的一些 web 应用程序在数据库中存储了一些称为登录 ID 的东西，它将在后续登录时重用，当用户注销时，数据库中的登录 ID 被删除，并且他的会话将被清除。

当您在其他机器上刷新页面时用户注销后，它将检查该人是否在数据库中具有有效的登录ID，如果他没有，则将调用注销过程。这是为了向用户提供安全浏览。

有一些网络应用程序允许用户注销所有其他现有会话，例如 GMail 。当您登录时，您可以看到查看现有会话的链接，并允许您注销所有现有会话。

# jquery-ui - 对话框销毁后 JQuery 保留旧的输入值

> ID：14001120
> 
> 赞同：0
> 
> 时间：2012-12-22T08:03:45.813
> 
> 标签：jquery-ui

我已经定义了 a`function`用于在 a 中显示一些`html`内容`jqueryui dilaog`：

```
function ui_window(title, dialogWidth, content,buttons,className)
{
  $('<div id="window">').html(content).
  dialog({
      title: title,
      show: 'drop',
      hide: 'drop',
      width: dialogWidth,
      buttons: buttons,
      close: function (ev, ui) { $(this).remove(); },
      position: { my: 'center', at: 'center', of: window }
}
   ).addClass(className);
  return false;
} 
```

这是另一个`function`调用上述内容的javascript `function`：

```
function checkForValidCommand()
{
var content = getInnerHTML("#checkForValidCommand");
var myFunc = function ()
{
    var pensionerID = $('#txtID').val();
        alert(pensionerID);
        $(this).dialog('destroy');
    }
    else
        $('#txtID').focus();
}
var buttons = [{ text: 'OK', click: myFunc}];
ui_window("Pensioner", 410, content, buttons);

} 
```

当我`checkForValidCommand`第一次调用“”并`input`进入`value`唯一`textbox`并按确定时，我会收到一个警报，其中包含`textbox`. 然后，当我`function`再次调用并按 OK 而不在其中输入任何内容时，`textbox`我仍然得到`alert` 旧的`value`. 我的代码有什么问题？

编辑：如果您想查看，这是 html 内容：

```
<table>
  <tr>
    <td align="right">
       <label>
           Insert the pensioiner's ID:
       </label>
    </td>
    <td>
     <input id="txtID" type="text" onkeydown="return onlyNumbers(event);" maxlength="8"/>
    </td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T12:42:01.057

好的。我很高兴自己回答这个问题。所以问题是每次我打开一个带有文本框的新 jquery 对话框时，文本框的值就是第一个对话框中的值。不知何故，jquery 保留了旧值。即使put`$(this).dialog('destroy');`也没有解决问题。（为什么这个命令不能完全删除对话框是另一回事）。然后我突然想起了它的工作原理`$('#id')`：

`It goes and selects the first matching element with the specified id.`

这是需要的线索。我确信之前的对话框没有从正文中删除。当我检查身体时，我发现我是对的。所有的对话都在那里，在正文中。我尝试了很多方法来完全删除 div 并停止了我发现唯一有效的方法。我所做的是在显示对话框之前输入以下代码行：

```
 $('body').find("#window").remove(); 
```

所以显示 jquery 对话框的包装函数现在看起来像这样：

```
function ui_window(title, dialogWidth, content,buttons,className)
{
  $('body').find("#window").remove();
$('<div id="window">').html(content).
  dialog({
      title: title,
      show: 'drop',
      hide: 'drop',
      width: dialogWidth,
      buttons: buttons,
      position: { my: 'center', at: 'center', of: window }
}
   ).addClass(className);
  return false;
} 
```

现在一次只有一个对话框。快乐的 jQuerying。

# php - 在 CodeIgniter 中跨不同文件重用函数的正确方法是什么？

> ID：14001121
> 
> 赞同：2
> 
> 时间：2012-12-22T08:03:52.410
> 
> 标签：php, codeigniter

我是 CodeIgniter 的新手，我有这个功能，我在多个模型中使用。

```
// Returns TRUE if the array of values supplied
// each correspond to a column in the database table.
// Else returns the value of the bad column.
private function _columns_exist( $columns, $table ) {

    foreach( $columns as $key => $value ) {

        if( !$this->db->field_exists( $key, $table ) ) {

            return $key;

        }

    }

    return TRUE;

} 
```

什么被认为是编写一次函数并从许多不同文件中重用它的正确方法？

我想为这个功能创建一个完整的库吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T08:27:26.483

如果您在模型之间使用通用功能，则可以首先扩展核心模型，然后让所有其他模型对其进行扩展。在此处阅读有关扩展核心类的更多信息：http: [//ellislab.com/codeigniter/user-guide/general/core_classes.html](http://ellislab.com/codeigniter/user-guide/general/core_classes.html)

```
class MY_Model extends CI_Model {

  public function __construct()
  {
      parent::__construct();
  }

  public function common_func()
  {
    // content
  }
} 
```

那么您可以在所有其他模型中使用此功能

```
class Some_model extends My_Model {

  public function __construct()
  {
      parent::__construct();
  }

  public function some_func()
  {
    // use the common function here
    $result = $this->common_func();
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T08:58:02.703

CodeIgniter 的重点是自定义函数基本上有两种类型。那些作为库方法存在于库中的那些，以及作为简单函数存在于帮助器中的那些。

它们之间的差异很小，由您决定将它们保存在哪里，但最佳实践是辅助函数大多是独立的，而库方法是使用 CI 库（如数据库、会话、其他模型）的方法。

对于您的功能，最好制作一个库并将其保留在那里，但您也可以制作一个助手，因为您不会过度使用任何数据库查询。如果是我，我会做一个帮手：

`helpers`在名为的目录中创建一个文件，`db_helper.php`并将一个元素添加`db`到文件中的辅助数组`autoload.php`。请注意，您不需要写全名`db_helper`，只需`db`.

将此代码放入`db_helper.php`您创建的文件中：

```
<?php
if(!function_exists('_columns_exist')) {
    function _columns_exist( $columns, $table ) {
        $CI =& get_instance();
        foreach( $columns as $key => $value ) {
            if( !$CI->db->field_exists( $key, $table ) ) {
                return $key;
            }
        }
        return TRUE;
    }
} 
```

现在你可以在任何地方使用这个函数——在你的控制器、模型甚至视图文件中，就像它是一个简单的函数一样：

```
_columns_exist($columns, $table) 
```

请注意，您不要`$this`在帮助程序或库中使用，您必须先获取 CodeIgniter 单例对象的实例，然后再对其进行操作。您可以在用户指南或 StackOverflow 上找到更多信息。

另请参阅我对**darkdad**答案的评论，这是我会采用的另一种好方法。

# php - 我想显示警报框，但要显示一定的时间间隔。可以在javascript或php中使用吗？

> ID：14001127
> 
> 赞同：1
> 
> 时间：2012-12-22T08:05:06.220
> 
> 标签：php, javascript, jquery

现在我正在使用 java-script 来显示警报消息框。如果我单击按钮，它包含确定按钮，然后只有它隐藏。但我的要求是只显示几秒钟，然后它应该自动关闭并重定向到我的页面。

```
?>
<script type="text/javascript">
alert("Enter Mandatory fields");document.location='productsegment.php';
</script>
 <? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T08:10:37.450

您应该使用 jQuery[对话框](http://jqueryui.com/dialog/)功能而不是警报，因为它可以轻松控制并且您不能自动关闭警报。见下面的链接

[http://dotnetguts.blogspot.fi/2012/02/how-to-open-and-auto-close-jquery-ui.html](http://dotnetguts.blogspot.fi/2012/02/how-to-open-and-auto-close-jquery-ui.html)

下面是来自上面链接的代码示例

```
 <script>
    $(function() {
            $( "#dialog" ).dialog();
    });

 setTimeOut(function() {
 $( "#dialog" ).dialog( "close" )
 }, 5000);

 </script>

<div id="dialog" title="Basic dialog">
<p>This is the default dialog which is useful for displaying information. The dialog window can be           moved, resized and closed with the 'x' icon.</p>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T08:13:52.513

这是纯 JavaScript 的工作。因此，流程将是，假设您之前输入的表单有一个空的 mandarory 字段：

1.  检查必填字段是否为空
2.  如果是这样，`warn()`在我们的示例中调用一个显示警告的函数。[以工具提示](http://craigsworks.com/projects/qtip/)或[模态](http://jqueryui.com/dialog/#modal)的形式更好
3.  `n`几秒钟后隐藏该自定义工具提示/模式
4.  重定向

所以：

```
function warn(){
    //show modal/tooltip
    setTimeout(function(){
        //hide modal/tooltip after 5000ms
        window.location = 'productsegment.php';
    },5000);
}

//call warn when you determined that mandatory field is empty 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T08:18:55.213

在撰写本文时，大多数其他答案基本上都是错误的！

**不可能**只显示`alert()`几秒钟；一旦显示，**只有用户交互才能关闭它**。

对于应该自动关闭的消息，您可以使用[jQuery UI Dialog](http://jqueryui.com/dialog/)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-22T08:08:29.087

你为什么不使用定时器，setTimeout()。

# r - 从 R 包中导出环境

> ID：14001134
> 
> 赞同：6
> 
> 时间：2012-12-22T08:05:43.930
> 
> 标签：r, mongodb, devtools, proto, testthat

我正在开发一个 R 包，它封装了该`rmongodb`包并创建了一个开发人员友好的界面来使用 MongoDB。该包在`proto`内部使用。

我想通过一个名为 的原型对象（一个环境）导出一个工厂方法`MongoDB`，其定义是：

```
MongoDB <- proto(
  new = function(., ...) {
    # Good stuff in here...
  }
) 
```

在使用 RStudio & 进行开发`devtools`期间以及在本地测试期间，这似乎不是问题。但是，我遇到了几个问题：

*   `devtools::check()`坚持`import(MongoDB)`在我的 NAMESPACE 文件中放入一个`R CMD check`失败的文件，并显示“不需要命名空间依赖：'MongoDB'”。

*   当我删除此导入指令`R CMD check`时`testthat`，即使我手动添加`export(MongoDB)`. 但是，`devtools::test()`在 RStudio 中工作正常。

从 R 包中导出`proto`对象（环境）的推荐方法是什么？

**更新：**

根据 Gabor 在下面的建议，我确保[`MongoDB.Rd`](http://pastie.org/5566930)声明`MongoDB`为数据（链接有来源）。我仍然`MongoDB`无法在测试中不可见（使用`testthat`）。我的`DESCRIPTION`文件在[这里](http://pastie.org/5566937)，`NAMESPACE`在[这里](http://pastie.org/5566940)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T11:38:33.120

试试这个：

1.  `export("MongoDB")`在您的文件中指定`NAMESPACE`以使`MongoDB`proto 对象公开可用。
2.  `LazyData: yes`在您的文件中指定，`DESCRIPTION`以便在访问时自动加载。
3.  添加一个`.Rd`文件，将其记录为数据集。

然后它应该通过`R CMD check`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T10:16:37.197

该指令：

```
import(MongoDB) 
```

意味着您将`MongoDB`命名空间导入到您的包中。如果我理解正确，可能不是你想要的。

我想你想导出`MongoDB`对象，然后

```
export(MongoDB) 
```

应该可以正常工作。

# c++ - 将字符串转换为日期：未找到 strptime 标识符

> ID：14001141
> 
> 赞同：3
> 
> 时间：2012-12-22T08:06:49.000
> 
> 标签：c++, windows, string, visual-studio, time

> **可能重复：**
> [Windows 上的 strptime() 等效项？](https://stackoverflow.com/questions/321849/strptime-equivalent-on-windows)

我正在尝试将字符串转换为日期。`strptime`从[这里](https://stackoverflow.com/a/308399/279982)采取的正是我想要的。但是，当我尝试在我的代码中使用它时，编译器会抱怨它：

> 错误 C2065：“strptime”：未声明的标识符

我已经包含了`time.h`标题。我正在使用visual studio 2003，也尝试过2008。
这真的是标准功能吗？我是否可以使用其他功能而无需安装其他库（如 boost）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T08:21:50.860

`strptime`不是标准的 C 或 C++；它是 Unix。如果您使用的是非 Unix 机器，它*可能*存在，但更有可能的是，您必须为它找到一个开放源代码，然后自己安装它。（在Visual Studio的情况下，有很多Unix特定的功能可用，但名称前有一个下划线。我不知道是不是这种情况`strptime`，但你可以尝试 `_strptime`。）

# php - 单击下一页上的链接和回显语句？

> ID：14001144
> 
> 赞同：0
> 
> 时间：2012-12-22T08:07:25.080
> 
> 标签：php, hyperlink, echo

嗨，我正在尝试一种方法，如果用户单击某个链接，它会将他们带到一个新页面，只有当用户来自该父链接时，它才会在新打开的页面上回显一条语句？

这可能吗？如果可以，有人知道我该怎么做吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T08:12:15.067

我不知道我是否正确理解了您的问题，但试一试...
`HTTP_REFERER`可以帮助您做到这一点，但这并不可靠。

```
<?php
$referer = $_SERVER['HTTP_REFERER'];
$referer_parse = parse_url($referer);

if($referer_parse['host'] == "yoursite.com" || $referer_parse['host'] == "www.yoursite.com") 
{
     //from expected page
     //echo here

} else {

     //not from expected page
     //do something else
}
?> 
```

**笔记**

这是一个显示逻辑的示例代码，您仍然需要修改它以满足您的需求。

* * *

**信息**

我建议尝试找到一种方法/逻辑来使用秘密/会话密钥来实现它。

祝你好运，
马兹

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T08:29:03.957

如果我正确理解了这个问题

```
<a href="abc.php?link=1">Link 1</a>
<a href="abc.php?link=2">Link 2</a>
<a href="abc.php?link=3">Link 3</a> 
```

然后在**abc.php**

```
$link = $_GET['link']; // Don't forget to sanitize the data

if($link == 1)
{
  // user clicked Link 1
}
else if($link == 2)
{
  // user clicked Link 2
}
else if($link == 3)
{
  // user clicked Link 3
}
else
{
   // came from somewhere else; i.e. did not click the links
} 
```

# java - 错误 ebay [CDATA [应用程序内部错误]]

> ID：14001145
> 
> 赞同：0
> 
> 时间：2012-12-22T08:07:41.790
> 
> 标签：java, android, ebay-api

我必须在 android 中获得 SessionID ebay。我用过xml解析器。

代码是，

```
static final String url = "https://api.sandbox.ebay.com/ws/api.dll";

HttpClient httpClient = new DefaultHttpClient();
final HttpParams httpParams = httpClient.getParams();
HttpConnectionParams.setConnectionTimeout(httpParams, 100000);
HttpPost httpPost = new HttpPost(url);

StringEntity se = new StringEntity("<RuName>\"your runame\"</RuName>",HTTP.UTF_8);

//StringEntity entity = new StringEntity(sb.toString(),"UTF-8");
httpPost.setEntity(se);
httpPost.setHeader("X-EBAY-API-COMPATIBILITY-LEVEL","673");
httpPost.setHeader("X-EBAY-API-APP-NAME", Constants.EBAY_APP_ID);
httpPost.setHeader("X-EBAY-API-DEV-NAME",Constants.EBAY_DEV_ID);
httpPost.setHeader("X-EBAY-API-CERT-NAME", Constants.EBAY_CERT_ID);
httpPost.setHeader("X-EBAY-API-SITEID","0");
httpPost.setHeader("X-EBAY-API-CALL-NAME","GetSessionID");
httpPost.setHeader("Content-Type","text/xml");
//httpPost.addHeader("Content-Length","4392");

HttpResponse httpResponse = httpClient.execute(httpPost);
HttpEntity httpEntity = httpResponse.getEntity();

xml = EntityUtils.toString(httpEntity);
Log.e("xml", xml); 
```

但它显示了响应，

```
12-22 14:52:57.327: ERROR/xml(422):
<?xml version="1.0" encoding="UTF-8" ?>
<eBay>
  <EBayTime>2012-12-22 07:52:57</EBayTime>
  <Errors>
   <Error>
   <Code>10007</Code>
   <ErrorClass>SystemError</ErrorClass>
   <SeverityCode>1</SeverityCode>
   <Severity>SeriousError</Severity>
   <Line>0</Line>
   <Column>0</Column>
   <ShortMessage><![CDATA[ Internal error to the application ]]></ShortMessage>
  </Error>
 </Errors>
</eBay> 
```

任何解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T14:04:10.100

[来自http://developer.ebay.com/devzone/xml/docs/Reference/eBay/Errors/ErrorMessages.htm](http://developer.ebay.com/devzone/xml/docs/Reference/eBay/Errors/ErrorMessages.htm)的引用：

> 错误 10007（“应用程序的内部错误”）表示 eBay 服务器端的错误，而不是您的应用程序中的错误。

你试过现场直播吗？eBay 沙箱有时会有点问题。

# iphone - 从数据数组中提取唯一对象

> ID：14001146
> 
> 赞同：-2
> 
> 时间：2012-12-22T08:07:43.703
> 
> 标签：iphone, objective-c, ios, xcode, ipad

仅当名称以前不存在于数据数组中时，我才想在数据数组中添加名称。当我尝试打印这些名称时，我确实得到了重复。有没有办法解决这个问题？

```
-(NSMutableArray *)autoComplete
{
    NSMutableArray *dataArray = [[NSMutableArray alloc] init];

    NSString *url = [NSString stringWithFormat:@"%@45.25,-95.25&limit=100&client_id=Von0J4Bu6INiez5bGby2R&client_secret=50sUjSbg7dba8cQgtpdfr5Ns7wyYTqtmKpUU3khQ",kWSURL];
    NSDictionary * returnDict = (NSDictionary *) [self callWebService:url];
    if([returnDict objectForKey:@"success"])
    {
       NSArray *responceArray = [returnDict objectForKey:@"response"];
        for (NSDictionary *dict in responceArray) {

             placeDC *place = [[placeDC alloc]init];
            NSDictionary *placeDict = (NSDictionary *)[dict objectForKey:@"place" ];
            NSDictionary *loctionDict =(NSDictionary *)[dict objectForKey:@"loc"];
            NSString * name =[placeDict objectForKey:@"name"];
            NSString * stateFull =[placeDict objectForKey:@"stateFull"];
            NSString * countryFull =[placeDict objectForKey:@"countryFull"];

            NSString *latitude =[loctionDict objectForKey:@"lat"];
            NSString *longitude = [loctionDict objectForKey:@"long"];
            place.placeNmae=name;
            place.countryFullName=countryFull;
            place.stateFullName=stateFull;
            NSLog(@"%@ ",stateFull);

            place.latitude=[latitude doubleValue];
            place.longitude=[longitude doubleValue];

             [dataArray addObject:place];

        }

    }

    return dataArray;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T08:19:42.747

您可以将名称添加`NSString`到 an`NSSet`并检查每个循环是否包含它。

在您的内部，您`if`可以编写如下内容：

```
NSArray *responceArray = [returnDict objectForKey:@"response"];
NSSet *names = [[NSSet alloc] init];
for (NSDictionary *dict in responceArray) {
     NSDictionary *placeDict = (NSDictionary *)[dict objectForKey:@"place" ];
     NSString * name =[placeDict objectForKey:@"name"];
     if (![names containsObject:name]) {
          [names addObject:name];
          placeDC *place = [[placeDC alloc]init];
          NSDictionary *loctionDict =(NSDictionary *)[dict objectForKey:@"loc"];
          NSString * stateFull =[placeDict objectForKey:@"stateFull"];
          NSString * countryFull =[placeDict objectForKey:@"countryFull"];

          NSString *latitude =[loctionDict objectForKey:@"lat"];
          NSString *longitude = [loctionDict objectForKey:@"long"];
          place.placeNmae=name;
          place.countryFullName=countryFull;
          place.stateFullName=stateFull;
          NSLog(@"%@ ",stateFull);

          place.latitude=[latitude doubleValue];
          place.longitude=[longitude doubleValue];
          [dataArray addObject:place];
     }
} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T09:34:26.527

首先检查服务器端是否有任何响应，检查响应使用 NSLog() 或断点。

如果响应正常，则进行以下检查，检查您的代码

```
if (![dataArray containsObject:@"Some Name"])
{

    // add Object

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T10:49:06.477

做一件事，将你`dict`的添加到另一个数组中并在这个数组中搜索数据是否已经存在，

```
[tempAry addObject: dict]; 
```

在插入之前

```
 NSPredicate *predicate = [NSPredicate predicateWithFormat:@"name == %@", name];
    NSArray *filteredArray = [tempAry filteredArrayUsingPredicate:predicate];
    if ([filteredArray count] == 0)
    {
        [dataArray addObject:place];
    }
    else{
        //Already exist
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T09:04:22.177

为什么不创建一个单独的字典，作为类的 ivar 或属性，用于存储我们所需的值，例如：

```
NSMutableDictionary *uniqueValueDict=[NSMutableDictionary new]; 
```

并继续将您所需的值和密钥存储为：

```
[uniqueValueDict setObject:stateFull forKey:uniqueValueDict]; 
```

你的工作会完成的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-22T10:06:08.990

这是我应用的最简单的解决方案，这应该让您从数组中提取独特的元素。

```
 NSArray * claimedOfferArray = [[NSArray alloc]initWithObjects:@"A",@"B",@"A",@"C",@"B" nil];
  NSArray * distinctArray = [[NSArray alloc]init]; 
  distinctArray =[[NSSet setWithArray:claimedOfferArray] allObjects]; 
```

此代码也适用于`NSMutableArray` 让我知道它是否适合您..:)。

# iphone - 如何给 UILabel 添加效果

> ID：14001148
> 
> 赞同：1
> 
> 时间：2012-12-22T08:08:10.007
> 
> 标签：iphone, ios, uilabel, effects

我很久以前就一直在寻找，但我找不到解决方案。我有一个横跨 iPhone 屏幕的动画标签（就像音乐[应用程序](https://www.dropbox.com/s/gi3xdlvr7nawz0c/musica.jpg)中的歌曲标题一样。嗯，我想像音乐应用程序一样添加“淡入/淡出”效果。简单的解决方案是打开Photoshop，创建[这个简单的图像](https://www.dropbox.com/s/ea9wkfy3fu6xoog/efecte_profunditat%402x.png)，然后将它添加到标签。好吧，在标签下我有一个黑色背景的图像。图像可以放大，然后可以看到带有淡入/淡出效果的图像,而且看起来不太好。有没有可能以编程方式做到这一点？谢谢

PD：如果有另一种可能性，而不是以编程方式执行此操作，我也会感谢答案。

编辑：这是[问题的图像捕获](https://www.dropbox.com/s/dpb924mku12ntgv/Captura%20de%20pantalla%202012-12-27%20a%20les%2010.08.05.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T09:30:08.877

我将以非编程方式处理它。

您为我们似乎正在模拟的音乐应用程序提供的图像参考与您在第二张图像中绘制的渐变具有不同的渐变。如果您在图像中注意到，渐变还没有完全完成从透明到黑色的过渡，然后文字就被切断了。[我会说在 Photoshop 中运行从透明到 80% alpha black 的渐变，然后根据image](http://imageshack.us/a/img42/7519/musicoverlayexample.png)绘制一个 100% alpha black 矩形来完成它。白色只是向您展示没有黑色背景的情况。

现在至于缩放。如果我错了，请纠正我，但听起来你想要一个图像的查看窗口，这样一旦你放大它，它就会消失到任一侧，但仍然可以在中心查看/移动。这意味着图像必须是可缩放的，但是一旦您放大了“淡入/淡出”*就不能*缩放。

只要确保你没有通过将推子与背景图像的滚动视图分开来缩放推子。

# java - Windows 7（32 位）上的 Jpcap

> ID：14001157
> 
> 赞同：0
> 
> 时间：2012-12-22T08:09:17.050
> 
> 标签：java, winpcap, jpcap

我的笔记本电脑上安装了 Windows 7（32 位）。我在 Eclipse Juno 上运行以下代码：

```
import jpcap.JpcapCaptor;     
import jpcap.NetworkInterface;

public class Network {

   public static void main(String[] args) {

   NetworkInterface[] devices = JpcapCaptor.getDeviceList();

   System.out.println("No. of Network devices : "+devices.length);    
   }    
} 
```

我有 2 个网络适配器并具有管理权限

但我得到的结果是：`No. of Network devices : 0`

有人可以帮忙解决可能出现的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T17:27:59.270

好的。我终于得到了答案。仅仅拥有具有管理权限的用户帐户是不够的，我仍然必须右键单击 eclipse 并选择“以管理员身份运行”，然后当我执行上述程序时，我得到了正确的编号。网络设备

# machine-learning - 实例提取中的 cleartk 错误

> ID：14001158
> 
> 赞同：0
> 
> 时间：2012-12-22T08:09:18.337
> 
> 标签：machine-learning, nlp, uima, cleartk

我正在尝试运行介绍性 cleartk 示例，以对具有一些修改和不同数据集的文档进行分类。我收到以下错误：

```
 Exception in thread "main" java.lang.NoSuchMethodError: org.uimafit.util.JCasUtil.selectCovered(Lorg/apache/uima/jcas/JCas;Ljava/lang/Class;
Lorg/apache/uima/cas/text/AnnotationFS;)Ljava/util/List;
    at org.cleartk.classifier.feature.extractor.CleartkExtractor$Covered.extract(CleartkExtractor.java:543)
    at org.cleartk.classifier.feature.extractor.CleartkExtractor$Count.extract(CleartkExtractor.java:744)
    at org.cleartk.classifier.feature.extractor.CleartkExtractor.extract(CleartkExtractor.java:128)
    at org.cleartk.classifier.feature.extractor.CleartkExtractor.extract(CleartkExtractor.java:92)
    at org.cleartk.classifier.feature.transform.extractor.TfidfExtractor.extract(TfidfExtractor.java:98)
    at org.cleartk.classifier.feature.extractor.simple.CombinedExtractor.extract(CombinedExtractor.java:72)
    at com.mesh.classification.tests.DocumentClassificationAnnotator.process(DocumentClassificationAnnotator.java:233)
    at org.apache.uima.analysis_component.JCasAnnotator_ImplBase.process(JCasAnnotator_ImplBase.java:48)
    at org.apache.uima.analysis_engine.impl.PrimitiveAnalysisEngine_impl.callAnalysisComponentProcess(PrimitiveAnalysisEngine_impl.java:377)
    at org.apache.uima.analysis_engine.impl.PrimitiveAnalysisEngine_impl.processAndOutputNewCASes(PrimitiveAnalysisEngine_impl.java:295)
    at org.apache.uima.analysis_engine.asb.impl.ASB_impl$AggregateCasIterator.processUntilNextOutputCas(ASB_impl.java:567)
    at org.apache.uima.analysis_engine.asb.impl.ASB_impl$AggregateCasIterator.<init>(ASB_impl.java:409)
    at org.apache.uima.analysis_engine.asb.impl.ASB_impl.process(ASB_impl.java:342)
    at org.apache.uima.analysis_engine.impl.AggregateAnalysisEngine_impl.processAndOutputNewCASes(AggregateAnalysisEngine_impl.java:267)
    at org.apache.uima.analysis_engine.asb.impl.ASB_impl$AggregateCasIterator.processUntilNextOutputCas(ASB_impl.java:567)
    at org.apache.uima.analysis_engine.asb.impl.ASB_impl$AggregateCasIterator.<init>(ASB_impl.java:409)
    at org.apache.uima.analysis_engine.asb.impl.ASB_impl.process(ASB_impl.java:342)
    at org.apache.uima.analysis_engine.impl.AggregateAnalysisEngine_impl.processAndOutputNewCASes(AggregateAnalysisEngine_impl.java:267)
    at org.apache.uima.analysis_engine.impl.AnalysisEngineImplBase.process(AnalysisEngineImplBase.java:267)
    at org.uimafit.pipeline.SimplePipeline.runPipeline(SimplePipeline.java:98)
    at com.mesh.classification.tests.DocumentClassificationEvaluation.train(DocumentClassificationEvaluation.java:193)
    at com.mesh.classification.tests.TrainModel.main(TrainModel.java:75) 
```

显然是由以下行引起的：

```
 public void process(JCas jCas) throws AnalysisEngineProcessException {
    DocumentAnnotation doc = (DocumentAnnotation) jCas.getDocumentAnnotationFs();
    Instance<String> instance = new Instance<String>();
    instance.addAll(this.extractor.extract(jCas, doc));

    if (isTraining()) {
      Question question = JCasUtil.selectSingle(jCas, Question.class);
      instance.setOutcome(question.getCategory());
      this.dataWriter.write(instance);
    } else {
      // This is classification, so classify and create UsenetDocument annotation
      String result = this.classifier.classify(instance.getFeatures());
      Question question = new Question(jCas, 0, jCas.getDocumentText().length());
      question.setCategory(result);
      question.addToIndexes();
      // System.out.println("classified " + ViewURIUtil.getURI(jCas) + " as " + result + ".");
    } 
```

更具体地说：

```
instance.addAll(this.extractor.extract(jCas, doc)); 
```

注释 Question.xml 定义为：

```
<?xml version="1.0" encoding="UTF-8"?>
<typeSystemDescription xmlns="http://uima.apache.org/resourceSpecifier">
  <name>Question</name>
  <version>1.0</version>
  <vendor>All Rights Reserved.</vendor>
  <types>
    <typeDescription>
      <name>com.mesh.classification.tests.type.Question</name>
      <description/>
      <supertypeName>uima.tcas.Annotation</supertypeName>
      <features>
        <featureDescription>
          <name>category</name>
          <description>The category label for the question (ABBREVIATION, ENTITY, DESCRIPTION, HUMAN, LOCATION)</description>
          <rangeTypeName>uima.cas.String</rangeTypeName>
        </featureDescription>
      </features>
    </typeDescription>
  </types>
</typeSystemDescription> 
```

有什么线索吗？我发现这个问题可能有点相关

[http://code.google.com/p/uimafit/issues/detail?id=104](http://code.google.com/p/uimafit/issues/detail?id=104)

# php - 将复选框值传递给 php 脚本页面 jquery

> ID：14001159
> 
> 赞同：-1
> 
> 时间：2012-12-22T08:09:34.133
> 
> 标签：php, jquery

我有以下代码，它正在获取选中复选框的值并在按钮单击时提交数据。请查看代码并让我在哪里出错。它不起作用

```
$(document).ready(function() {
$(function(){
  $('#btnClick').click(function(){
    var val = [];
    $(':checkbox:checked').each(function(i){
      val[i] = $(this).val();
      $.ajax({
            url: 'server.php',
            type: "POST",
           data: ({val[i]}), ????
           success: function(data){

            }
        });

    });
  });
});
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T08:21:52.677

[使用serialize](http://api.jquery.com/serialize/)更容易，它就是为这种情况而设计的。

```
$(function(){
  $('#btnClick').click(function(){
   var val = $('input[type=checkbox]:checked').serialize();
   $.ajax({
        url: 'server.php',
        type: "POST",
        data: val,
        success: function(data){

        }
    });

   });
 }); 
```

此外，最好`$(input[type=checkbox]:checked)`用作选择器而不是`$(':checkbox:checked')`. 来自 jQuery 文档：

> $(':checkbox') 等价于 $('[type=checkbox]')。与其他伪类选择器（以“：”开头的选择器）一样，建议在其前面加上标签名称或其他选择器；否则，*隐含通用选择器 (" ")。换句话说，裸 $(':checkbox') 等价于 $('* :checkbox')，所以应该使用 $('input:checkbox') 来代替。
> 
> 因为 :checkbox 是一个 jQuery 扩展而不是 CSS 规范的一部分，所以使用 :checkbox 的查询不能利用原生 DOM querySelectorAll() 方法提供的性能提升。为了在现代浏览器中获得更好的性能，请改用 [type="checkbox"]。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T08:16:42.260

*   将 ajax 函数保持在`each`循环之外。
*   `$(function(){})`&`$(document).ready(function(){})`是一回事。前者是一种速记形式。

    ```
    $(function(){
      var val[], i=0;
      $('#btnClick').click(function(){
          $('input:checkbox:checked').each(function(){
          val[i] = $(this).val();
          i++;
        });
         $.ajax({
                url: 'server.php',
                type: "POST",
               data: {'checked_values':val},
               success: function(data){
                    // do something with returned data
                }
         });
      });

    }); 
    ```

在**server.php**页面中

```
$checked = $_POST['checked_values']; // will contain an array with checked values
// proceed to do something with $checked array 
```

# c++ - 如何在元组上使用 boost::algorithm::join？

> ID：14001160
> 
> 赞同：3
> 
> 时间：2012-12-22T08:09:36.550
> 
> 标签：c++, algorithm, boost, c++11

`boost::algorithm::join`提供了一个方便的连接`std::vector<std::string>`。

`std::vector<std::tuple<std::string,bool>>`如果为真，在进行联接之前，您将如何扩展此功能以使用单引号（用于字符串）包围结果。

这对循环来说并不难，但我正在寻找一种能够**充分利用标准算法和 C++11 特性**（例如 lambdas）的解决方案。

如果可行，继续使用 boost 的 join： **优雅/可读性/简洁**性更重要。

**代码**

```
#include <string>
#include <vector>
#include <tuple>
#include <boost/algorithm/string/join.hpp> 

int main( int argc, char* argv[] )
{
  std::vector<std::string> fields = { "foo", "bar", "baz" };
  auto simple_case = boost::algorithm::join( fields, "|" );

  // TODO join surrounded by single-quotes if std::get<1>()==true
  std::vector<std::tuple< std::string, bool >> tuples =
   { { "42", false }, { "foo", true }, { "3.14159", false } };

  // 42|'foo'|3.14159 is our goal
} 
```

**编辑**

好的，我在下面接受了 kassak 的建议并查看了`boost::transform_iterator()`- 我被 boost 自己的文档中示例的冗长所推迟，所以我尝试`std::transform()`了 - 它没有我想要的那么短，但它似乎有效。

**回答**

```
#include <string>
#include <vector>
#include <tuple>
#include <iostream>
#include <algorithm>
#include <boost/algorithm/string/join.hpp> 

static std::string
quoted_join( 
    const std::vector<std::tuple< std::string, bool >>& tuples, 
    const std::string& join
)
{
    std::vector< std::string >  quoted;
    quoted.resize( tuples.size() );
    std::transform( tuples.begin(), tuples.end(), quoted.begin(),
        []( std::tuple< std::string, bool > const& t ) 
        {
            return std::get<1>( t ) ? 
                "'" + std::get<0>(t) + "'" :
                std::get<0>(t);
        }
    );
  return boost::algorithm::join( quoted, join );
}

int main( int argc, char* argv[] )
{
  std::vector<std::tuple< std::string, bool >> tuples =
  { 
    std::make_tuple( "42", false ), 
    std::make_tuple( "foo", true ), 
    std::make_tuple( "3.14159", false ) 
  };

  std::cerr << quoted_join( tuples, "|" ) << std::endl;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T12:50:41.167

先写`make_transform_range( old_range, functor )`。对于第一个版本，假设`old_range`是 a `std::pair`of 迭代器，但理想情况下它应该是任何承认`begin(c)`.

然后答案变得非常干净和高效。获取您正在处理的范围，在不实际调用函数的情况下对其进行转换，然后对其调用 join 。

在我的手机上，所以输入相当多毛`make_transform_range`的东西超出了我的范围。而且它很毛茸茸。

这是一个不太抽象的尝试。

```
auto functor = []( my_pair const&p )->std::string {
  if (p.second) return quote( p.first );
  return p.first;
};
auto tbegin = boost::make_transform_iterator( b, functor );
auto tend = boost::make_transform_iterator( e, functor );
join(…); 
```

...如果可行的话，它没有我担心的那么讨厌。我仍然认为这`make_transform_range`是值得的，但也许不是一次。

另一种方法是使用所有时髦语法的 boost range 库。它已经具有基于范围的变换。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T03:30:34.363

It's easiest to use [Boost.Range](http://boost.org/libs/range)'s `transformed` adaptor:

```
#include <string>
#include <vector>
#include <tuple>
#include <iostream>
#include <algorithm>
#include <boost/algorithm/string/join.hpp> 
#include <boost/range/adaptor/transformed.hpp>

int main()
{
    std::vector<std::tuple< std::string, bool >> tuples =
    { 
        std::make_tuple( "42", false ), 
        std::make_tuple( "foo", true ), 
        std::make_tuple( "3.14159", false ) 
    };

  std::cout
      << boost::algorithm::join( 
                tuples | boost::adaptors::transformed(
                    [](std::tuple< std::string, bool > const &tup){
                        return std::get<1>(tup) ? 
                            "'" + std::get<0>(tup) + "'" :
                                  std::get<0>(tup);
                    }
                ), "|" )
      << std::endl;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T08:23:54.303

如果您想使用连接，您可以将集合包装起来`boost::transform_iterator`并在需要时添加引号

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T13:12:43.347

Your requirement is not a generic one for that why not just loop through the vector and append the strings ?

```
std::vector<std::tuple<std::string, bool>> coll;
coll.push_back(make_tuple("foo", false));
coll.push_back(make_tuple("bar", true));
coll.push_back(make_tuple("foo", false));
std::string result;
result.reserve(coll.size());

for(auto& val : coll)
{
  result += std::get<1>(val) ? ("'" + std::get<0>(val) + "'|") 
                             : std::get<0>(val) + "|";
}

boost::trim_if(result, boost::is_any_of("|"));
std::cout << result << "\n"; 
```

# xml - 标头和数据大小不同

> ID：14001161
> 
> 赞同：0
> 
> 时间：2012-12-22T08:09:49.577
> 
> 标签：xml, header, size, corrupt

当我尝试在 google play 上上传我的 apk 时出现此错误消息：无法使用“aapt dump badging”分析您的 APK。错误输出：

无法运行 aapt 转储标记：W/ResourceType(23432)：错误的 XML 块：标头大小 28257 或总大小 1936025193 大于数据大小 3069 错误：AndroidManifest.xml 已损坏如果您知道什么，请帮助我！

我的 manifest.xml 是：

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
         package="com.test"
         android:versionCode="1"
         android:versionName="1.0">
         <uses-sdk
         android:minSdkVersion="8"
         android:targetSdkVersion="15" />
         <uses-permission android:name="com.android.vending.CHECK_LICENSE" />
         <uses-permission android:name="android.permission.INTERNET"/>
         <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
         <application
      android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.NoTitleBar"
    >
    <activity
        android:name=".activities.SplashActivity"
        android:screenOrientation="portrait"
        android:launchMode="singleInstance"
        >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity 
        android:name=".activities.StartActivity" 
        android:screenOrientation="portrait"
        android:launchMode="singleInstance"/>
    <activity 
        android:name=".activities.SafeUseCategoryActivity" 
        android:screenOrientation="portrait"
        android:launchMode="singleInstance"/>
    <activity
        android:name=".activities.SafeUseActivity" 
        android:screenOrientation="portrait"
        android:launchMode="singleInstance"/>
    <activity 
        android:name=".activities.ProtractorActivity" 
        android:screenOrientation="portrait"
        android:launchMode="singleInstance"/>
    <activity 
        android:name=".activities.LoadChartsCategoryActivity" 
        android:screenOrientation="portrait"
        android:launchMode="singleInstance"/>
    <activity 
        android:name=".activities.ChartsActivity" 
        android:screenOrientation="portrait"
        android:launchMode="singleInstance"/>
    <activity 
        android:name=".activities.CertmaxPlusActivity" 
        android:screenOrientation="portrait"
        android:launchMode="singleInstance"/>
    <activity 
        android:name=".activities.AboutActivity" 
        android:screenOrientation="portrait"
        android:launchMode="singleInstance"/>
    <activity 
        android:name=".activities.NewsActivity" 
        android:screenOrientation="portrait"
        android:launchMode="singleInstance"/>
    <activity 
        android:name=".activities.ContactActivity" 
        android:screenOrientation="portrait"
        android:launchMode="singleInstance"/>
    <activity 
        android:name=".activities.LoadWireChartCategory" 
        android:screenOrientation="portrait"
        android:launchMode="singleInstance"/>
    <activity 
        android:name=".activities.ChangeUserInfoActivity" 
        android:screenOrientation="portrait"
        />
    <activity 
        android:name=".activities.SetupActivity" 
        android:screenOrientation="portrait"
        />
</application> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-23T04:44:22.873

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
     package="com.test"
     android:versionCode="1"
     android:versionName="1.0">
     <uses-sdk
     android:minSdkVersion="8"
     android:targetSdkVersion="15" />
     <uses-permission android:name="com.android.vending.CHECK_LICENSE" />
     <uses-permission android:name="android.permission.INTERNET"/>
     <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
     <application
  android:icon="@drawable/ic_launcher"
android:label="@string/app_name"
android:theme="@android:style/Theme.NoTitleBar"
>
<activity
    android:name=".activities.SplashActivity"
    android:screenOrientation="portrait"
    android:launchMode="singleInstance"
    >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity>
<activity 
    android:name=".activities.StartActivity" 
    android:screenOrientation="portrait"
    android:launchMode="singleInstance"/>
<activity 
    android:name=".activities.SafeUseCategoryActivity" 
    android:screenOrientation="portrait"
    android:launchMode="singleInstance"/>
<activity
    android:name=".activities.SafeUseActivity" 
    android:screenOrientation="portrait"
    android:launchMode="singleInstance"/>
<activity 
    android:name=".activities.ProtractorActivity" 
    android:screenOrientation="portrait"
    android:launchMode="singleInstance"/>
<activity 
    android:name=".activities.LoadChartsCategoryActivity" 
    android:screenOrientation="portrait"
    android:launchMode="singleInstance"/>
<activity 
    android:name=".activities.ChartsActivity" 
    android:screenOrientation="portrait"
    android:launchMode="singleInstance"/>
<activity 
    android:name=".activities.CertmaxPlusActivity" 
    android:screenOrientation="portrait"
    android:launchMode="singleInstance"/>
<activity 
    android:name=".activities.AboutActivity" 
    android:screenOrientation="portrait"
    android:launchMode="singleInstance"/>
<activity 
    android:name=".activities.NewsActivity" 
    android:screenOrientation="portrait"
    android:launchMode="singleInstance"/>
<activity 
    android:name=".activities.ContactActivity" 
    android:screenOrientation="portrait"
    android:launchMode="singleInstance"/>
<activity 
    android:name=".activities.LoadWireChartCategory" 
    android:screenOrientation="portrait"
    android:launchMode="singleInstance"/>
<activity 
    android:name=".activities.ChangeUserInfoActivity" 
    android:screenOrientation="portrait"
    />
<activity 
    android:name=".activities.SetupActivity" 
    android:screenOrientation="portrait"
    /> 
```

# java - Java Class Rectangle 并使用演示类对其进行测试

> ID：14001163
> 
> 赞同：2
> 
> 时间：2012-12-22T08:10:02.577
> 
> 标签：java

我创建了一个名为的 Java 类`Rectangle`，它具有两个实例变量（宽度和高度）和两个实例方法（面积和周长），这两个方法都不接受参数，而是返回双精度值。area 方法返回矩形的面积（宽*高），而圆周返回（2*宽+2*高）。然后使用 main 方法创建 Demo 类，通过实例化 4 个对象来测试 Rectangle 类，并提示用户输入每个实例的宽度和高度。然后打印出每个实例的面积和周长。

我创建了两个类，第一个类是 Rectangle ：

```
public class Rectagle {

    private double width;
    private double height;

    public double area() {
        return width * height;
    }

    public double circumference() {
        return 2*width+2*height;
    }
} 
```

我创建了第二个类 Demo 来测试这个类：

```
import java.util.Scanner;
public class Demo {
    public static void main(String []args){
        Scanner console=new Scanner(System.in);
    Rectagle R1=new Rectagle();
    Rectagle R2=new Rectagle();
    Rectagle R3=new Rectagle();
    Rectagle R4=new Rectagle();

    }
} 
```

我的问题，我不明白这一点”并提示用户输入每个实例的宽度和高度。然后打印出每个实例的面积和周长。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T08:13:30.607

您的构造函数没有参数。没有办法为宽度和高度分配一个值。

我建议你有这种构造函数

```
public Rectangle(double w, double h){
     width = w;
     height = h;
} 
```

并以这种方式使用它：

```
 Rectagle R1=new Rectagle(30.0, 40.0); 
```

或者，如果您需要，为您的实例变量添加一个 setter 和 getter，如下所示：

```
public void setWidth(double w){
   width = w
}

public double getWidth(){
   return width;
} 
```

现在你的课已经完成了。请参阅正确使用`Scanner`类以了解如何从控制台读取。例如阅读：[How to read integer value from the standard input in Java](https://stackoverflow.com/questions/2506077/how-to-read-integer-value-from-the-standard-input-in-java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T08:34:34.660

愿这对你有帮助

```
public class Rectangle {

    private double width;
    private double height;

    public Rectangle(double width, double height) {
        this.width = width;
        this.height = height;
    }

    public double getArea() {
        return width * height;
    }

    public double getCircumference() {
        return 2*width+2*height;
    }

    @Override
    public String toString() {
        return "Rectangle["+width+","+height+"]Area:"+getArea()+",Circumference:"+getCircumference();
    }

    public static void main(String[] args) {
         Scanner console=new Scanner(System.in);
        double width = getValue(console, "Width");
        double height = getValue(console, "Height");
        Rectangle rectangle = new Rectangle(width, height);
        System.out.println(rectangle);

    }

    public static double getValue(Scanner console, String name) {
        System.out.println("Enter "+name + " : ");
        String widthStr = console.nextLine();
        double parseDouble;
        try {
            parseDouble = Double.parseDouble(widthStr);
        }catch(NumberFormatException ne) {
            System.out.println("Unable to parse your input, enter correct value ");
            return getValue(console, name);
        }
        return parseDouble;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-12T15:13:17.117

公共类矩形{

```
private double width;
private double height;

public Rectangle(double width, double height) {
    this.width = width;
    this.height = height;
}

public double getArea() {
    return width * height;
}

public double getCircumference() {
    return 2*width+2*height;
}

@Override
public String toString() {
    return "Rectangle["+width+","+height+"]Area:"+getArea()+",Circumference:"+getCircumference();
}

public static void main(String[] args) {
     Scanner console=new Scanner(System.in);
    double width = getValue(console, "Width");
    double height = getValue(console, "Height");
    Rectangle rectangle = new Rectangle(width, height);
    System.out.println(rectangle);
}

public static double getValue(Scanner console, String name) {
    System.out.println("Enter "+name + " : ");
    String widthStr = console.nextLine();
    double parseDouble;
    try {
        parseDouble = Double.parseDouble(widthStr);
    }catch(NumberFormatException ne) {
        System.out.println("Unable to parse your input, enter correct value ");
        return getValue(console, name);
    }
    return parseDouble;
} 
```

}

# iphone - 如何计算电池时间，3g 游戏等，iOS

> ID：14001165
> 
> 赞同：0
> 
> 时间：2012-12-22T08:10:44.900
> 
> 标签：iphone, ipad

我想根据当前电池电量计算 3D 游戏、3G 通话时间、视频使用、WiFi 互联网、2G 通话时间、音频使用和待机时间。有很多应用程序这样做，但我没有在 iOS 中找到任何资源来计算它。

我计算了电池电量

> [myDevice setBatteryMonitoringEnabled:YES]; 浮动 batLeft = [myDevice 电池电量]; int i=[我的设备电池状态]；
> 
> ```
> int batinfo=(batLeft*100); 
> ```

现在根据batinfo，我需要计算其他参数的剩余时间。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T08:37:10.380

Apple 在设备规格中提供了一些数据。您可以将其用于计算。

例如苹果说，app。[3G ( Iphone 5](http://www.apple.com/iphone/specs.html) ) 8 小时通话时间。现在，

```
int batinfo=(batLeft*100);
int minutes3G=480; //minutes of 8 hour (static)

int talk3G=(minutes3G*batinfo)/100; 
hour=talk3G/60;
min=talk3G%60;
lbl3Gtalk.text=[lbl3Gtalk.text stringByAppendingFormat:@"Remaining Time : %dh %dmin",hour,min]; 
```

# python - 自动设置变量的名称python

> ID：14001170
> 
> 赞同：0
> 
> 时间：2012-12-22T08:12:23.713
> 
> 标签：python, variables, loops

我正在研究 python 程序，我想要这样的东西：

```
for i in range(1,n+1):
    var(a+str(i)) = input()
    #do something 
```

所以变量是a1，a2，a3等。这可以做到吗，怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T08:14:38.720

你不想那样做，相信我。你想用字典

```
vars = {}
for i in range(1,n+1):
    vars[i] = input()
    #do something 
```

或者，由于在您的特殊情况下所有数字都是连续的，因此列表：

```
vars = [None]  #  initialize vars[0] with None
for i in range(n):
    vars.append(input())
    #do something 
```

现在您可以访问您的变量`vars[2]`，例如`vars[5]`等。

# java - 如何从文本文件中解析由分隔符“|”分隔的每个字段。文本文件必须逐行读取

> ID：14001173
> 
> 赞同：-4
> 
> 时间：2012-12-22T08:12:54.027
> 
> 标签：java, parsing, field, bufferedreader, delimiter

假设一个文本文件包含 3 个字段，最后一个字段是逗号分隔的多参数字段。如何从文本文件中解析由分隔符“|”分隔的每个字段。文本文件必须逐行读取。假设文件中有 20 行。必须解析每个字段，以识别必须打印显示所有 3 个字段的整行。我需要这个java代码。如果可能的话，它甚至应该在第三个字段中显示以逗号分隔的参数的数量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T08:35:44.653

您可以使用[Bean IO](http://www.beanio.org/)。

像这样配置你的 XML

```
<stream name="employees" format="delimited" strict="true">
  <parser>  
    <property name="delimiter" value="|" />
  </parser>
  <record name="test" class="example.Pojo" minOccurs="1" maxOccurs="1">
      <field name="member1" />
      <field name="member2" />
      <field name="member3" type="int" />
    </record>
 </stream> 
```

有关详细信息，请参阅[此处](http://www.beanio.org/2.0/docs/reference/index.html#Introduction)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T08:20:25.270

[http://www.javapractices.com/topic/TopicAction.do?Id=42](http://www.javapractices.com/topic/TopicAction.do?Id=42)

[http://www.java-samples.com/showtutorial.php?tutorialid=330](http://www.java-samples.com/showtutorial.php?tutorialid=330)

[http://www.caveofprogramming.com/java/java-file-reading-and-writing-files-in-java/](http://www.caveofprogramming.com/java/java-file-reading-and-writing-files-in-java/)

此链接为您提供不同类型的读取和写入文本文件

这将是你的起点。一切顺利。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T09:50:39.203

You probably want to use something like [Commons CSV](http://commons.apache.org/csv/).

They give decent examples of how to use it in their [javadocs](http://commons.apache.org/csv/apidocs/index.html), but basically it sounds like you just want to use different field delimiters (see the [CSVFormat class](http://commons.apache.org/csv/apidocs/org/apache/commons/csv/CSVFormat.html)).

# vb.net - 捕获设备的 Directshow 音频/视频

> ID：14001175
> 
> 赞同：1
> 
> 时间：2012-12-22T08:13:12.807
> 
> 标签：vb.net, directshow, audiovideoplayback

# Directshow 音频/视频捕获

在**VB.Net**中，我可以从连接的设备捕获视频，但无法接收任何声音，因为连接了扬声器。我可以从 MediaPlayer 播放电影和 mp3。但是，困惑，为什么声音不来。请指导我在以下代码中设置音频过滤器。请帮助，请在以下代码中进行相关更改...

```
 Public Function FindCaptureDevice() As IBaseFilter
        Debug.WriteLine("Start the Sub FindCaptureDevice")
        Dim hr As Integer = 0
        Dim classEnum As IEnumMoniker = Nothing
        'Dim classEnum1 As IEnumMoniker = Nothing
        Dim moniker As IMoniker() = New IMoniker(0) {}
        Dim source As Object = Nothing
        Dim devEnum As ICreateDevEnum = CType(New CreateDevEnum, ICreateDevEnum)

        hr = devEnum.CreateClassEnumerator(FilterCategory.VideoInputDevice, classEnum, 0)
        DsError.ThrowExceptionForHR(hr)
        Marshal.ReleaseComObject(devEnum)

        If classEnum Is Nothing Then
            Throw New ApplicationException("No video capture device was detected.\r\n\r\n" & _
                           "This sample requires a video capture device, such as a USB WebCam,\r\n" & _
                           "to be installed and working properly.  The sample will now close.")
        End If

        If classEnum.Next(moniker.Length, moniker, IntPtr.Zero) = 0 Then
            Dim iid As Guid = GetType(IBaseFilter).GUID
            moniker(0).BindToObject(Nothing, Nothing, iid, source)
        Else
            Throw New ApplicationException("Unable to access video capture device!")
        End If
        Marshal.ReleaseComObject(moniker(0))
        Marshal.ReleaseComObject(classEnum)
        Return CType(source, IBaseFilter)
    End Function 
```

# android - 行驶距离

> ID：14001177
> 
> 赞同：1
> 
> 时间：2012-12-22T08:13:43.010
> 
> 标签：android, jquery, cordova, google-maps-api-3

我正在创建一个与旅行相关的 Phonegap 应用程序（使用 jQuery 和 Google Maps API V3），并希望向用户显示他/她自启动应用程序以来所走过的距离。

是否有任何谷歌功能？或者任何人都可以推荐我可以做些什么来获得总行驶距离？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T10:22:56.970

它可以很容易地完成。您必须了解，通过使用适用于 jQuery 的 Google Maps API，您拥有自己完成所需的所有工具。

首先，您需要定义一个时间段（比如说 1 分钟）。我们将需要它来创建我们运动的参考点。下一步是使用 phonegap/cordova geolocation API 来计算我们的位置（纬度和经度）：

[http://docs.phonegap.com/en/1.0.0/phonegap_geolocation_geolocation.md.html](http://docs.phonegap.com/en/1.0.0/phonegap_geolocation_geolocation.md.html)

此时选择你想要：

1.  *在某个js数组中每1分钟存储一个位置（纬度和经度）*
2.  *或者像第 1 点那样做同样的事情，并使用 gmap addMarker 能力在地图上显示它。*

最后，您需要计算距离。遍历位置数组并使用纬度和经度来计算每个可用点之间的距离。在这里，您将找到用于此类计算的函数（带有 js 示例）：

[http://www.movable-type.co.uk/scripts/latlong.html](http://www.movable-type.co.uk/scripts/latlong.html)

或者您可以使用 Google Maps APi 功能：

***google.maps.geometry.spherical.computeDistanceBetween (latLngA, latLngB);***

**编辑**：

这是一个适合您的工作示例：http: [//jsfiddle.net/Gajotres/6YpAG/](http://jsfiddle.net/Gajotres/6YpAG/)

代码：

```
$(document).ready(function(){
    // Chicago
    var coordinateObject= new Object();
    coordinateObject.lat = '41.83682786072714';
    coordinateObject.lng = '-87.626953125';
    geoLocationHandler.addLocation(coordinateObject);
    // New York
    var coordinateObject= new Object();    
    coordinateObject.lat = '40.58058466412761';
    coordinateObject.lng = '-74.00390625';
    geoLocationHandler.addLocation(coordinateObject);
    // Toronto
    var coordinateObject= new Object();    
    coordinateObject.lat = '43.70759350405294';
    coordinateObject.lng = '-79.365234375';
    geoLocationHandler.addLocation(coordinateObject);

    var len = geoLocationHandler.arrLocations.length;
    for (var i = 0; i < len; i++) {
        if(i == 1){
            geoLocationHandler.distance += geoLocationHandler.calcDistance(geoLocationHandler.arrLocations[i-1].lat,geoLocationHandler.arrLocations[i-1].lng,geoLocationHandler.arrLocations[i].lat,geoLocationHandler.arrLocations[i].lng);
        }
    }

    alert(geoLocationHandler.distance);
});

var geoLocationHandler = {
    arrLocations : [],
    distance : 0,
    addLocation:function(obj){
        geoLocationHandler.arrLocations.push(obj);
    },
    calcDistance:function(fromLat, fromLng, toLat, toLng) {
        return google.maps.geometry.spherical.computeDistanceBetween(new google.maps.LatLng(fromLat, fromLng), new google.maps.LatLng(toLat, toLng));
    }
}; 
```

最终结果是以米为单位的距离。

每次你有一个新的协调使用它来创建一个新对象并将其添加到数组中：

```
var coordinateObject= new Object();
coordinateObject.lat = '41.83682786072714'; // Change with your latitude
coordinateObject.lng = '-87.626953125'; // Change with your longitude
geoLocationHandler.addLocation(coordinateObject); 
```

# c# - 用于读取字节的 C# 自定义数据转换器 []

> ID：14001181
> 
> 赞同：1
> 
> 时间：2012-12-22T08:14:10.513
> 
> 标签：c#, c#-4.0

这是我的自定义数据转换器帮助器类，它可以帮助我从 DataReader 读取值并返回

```
 public class DataConvertor<T> where T : IhasIndexer
{
    public DataConvertorField<string, T> String;
    public DataConvertorField<int, T> Int;        
    T reader;

    public void Initialise(T reader)
    {
        this.reader = reader;
        String = new DataConvertorField<string, T>(reader, Convert.ToString);
        Int = new DataConvertorField<int, T>(reader, Convert.ToInt32);

    }
    public bool has(string name)
    {
        try
        {
            object o = reader[name];
            return true;
        }
        catch
        {
            return false;
        }

    }
  }

   public class DataConvertorField<T, O> where O : IhasIndexer
{
    O parent;
    DataConvertorMethod convertor;

    public DataConvertorField(O parent, DataConvertorMethod convertor)
    {
        this.parent = parent;
        this.convertor = convertor;
    }

    public T this[string name]
    {
        get
        {
            if (parent[name] == DBNull.Value)
            {
                if (typeof(T).Equals(typeof(string)))
                    return (T)(object)string.Empty;
                else
                    return default(T);
            }
            else
                return convertor(parent[name]);
        }
    }
    public delegate T DataConvertorMethod(object o);

}

public interface IhasIndexer
{
    object this[string key] { get; }
} 
```

然后我只需在我的**ADO.Net 代码**中使用如下

```
 using (DBDataReaderWrapper reader = cmd.ExecuteReader())
        {
            while (reader.Read())
            {

                user.UserId = reader.Int["UserId"];
                user.UserName = reader.String["UserName"];
    }

   public class DBDataReaderWrapper : DataConvertor<DBDataReaderWrapper>, 
                                     IDisposable, IhasIndexer
{
    SqlDataReader reader;

    public DBDataReaderWrapper(SqlDataReader reader)
    {
        Initialise(this);
        this.reader = reader;
    }        

    public object this[string name]
    {
        get
        {
            return reader[name];
        }
    }

    public bool Read()
    {
        return reader.Read();
    }

    public bool NextResult()
    {
        return reader.NextResult();
    }

    public void Dispose()
    {
        reader.Close();
        reader.Dispose();

    }

} 
```

}

问题是我如何使用我的帮助类从数据库中读取图像。我想像添加 DataConverter

```
 public DataConvertorField<byte[], T> Bytes; 
```

在 Initialise() 方法中

```
 Bytes = new DataConvertorField<byte[]>(reader, Convert.to??????); 
```

我怎样才能做到这一点？任何可满足我需要的 c# 内置或辅助方法？所以我可以像在 ADO.Net 代码中一样使用

```
 reader.Bytes["UserImage"]; //use custom data covertor and gives bytes[] 
```

# node.js - 如何使用 Passport 验证 Supertest 请求？

> ID：14001183
> 
> 赞同：74
> 
> 时间：2012-12-22T08:14:51.383
> 
> 标签：node.js, mocha.js, supertest, passport.js

我正在使用 Passport.js 进行身份验证（本地策略）并使用 Mocha 和 Supertest 进行测试。

如何使用 Supertest 创建会话并发出经过身份验证的请求？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-08-27T13:11:04.867

正如 zeMirco 指出的那样，底层`superagent`模块支持会话，自动为您维护 cookie。但是，可以通过未记录的功能使用 中的功能`superagent.agent()`。`supertest`

只需使用`require('supertest').agent('url')`而不是`require('supertest')('url')`：

```
var request = require('supertest');
var server = request.agent('http://localhost:3000');

describe('GET /api/getDir', function(){
    it('login', loginUser());
    it('uri that requires user to be logged in', function(done){
    server
        .get('/api/getDir')                       
        .expect(200)
        .end(function(err, res){
            if (err) return done(err);
            console.log(res.body);
            done()
        });
    });
});

function loginUser() {
    return function(done) {
        server
            .post('/login')
            .send({ username: 'admin', password: 'admin' })
            .expect(302)
            .expect('Location', '/')
            .end(onResponse);

        function onResponse(err, res) {
           if (err) return done(err);
           return done();
        }
    };
}; 
```

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2012-12-22T10:04:14.233

You should use [superagent](https://github.com/visionmedia/superagent) for that. It is lower level module and used by `supertest`. Take a look at the section [Persisting an agent](https://github.com/visionmedia/superagent#persisting-an-agent-with-cookies-ie-sessions):

```
var request = require('superagent');
var user1 = request.agent();
user1
  .post('http://localhost:4000/signin')
  .send({ user: 'hunter@hunterloftis.com', password: 'password' })
  .end(function(err, res) {
    // user1 will manage its own cookies
    // res.redirects contains an Array of redirects
  }); 
```

Now you can use `user1` to make authenticated requests.

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2013-06-14T15:39:21.997

尝试这个，

```
 var request=require('supertest');
  var cookie;
  request(app)
  .post('/login')
  .send({ email: "user@gluck.com", password:'password' })
  .end(function(err,res){
    res.should.have.status(200);
    cookie = res.headers['set-cookie'];
    done();        
  });

  //
  // and use the cookie on the next request
  request(app)
  .get('/v1/your/path')
  .set('cookie', cookie)
  .end(function(err,res){  
    res.should.have.status(200);
    done();        
  }); 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-03-03T23:30:54.447

作为 Andy 答案的补充，为了让 Supertest 为您启动服务器，您可以这样做：

```
var request = require('supertest');

/**
 * `../server` should point to your main server bootstrap file,
 * which has your express app exported. For example:
 * 
 * var app = express();
 * module.exports = app;
 */
var server = require('../server');

// Using request.agent() is the key
var agent = request.agent(server);

describe('Sessions', function() {

  it('Should create a session', function(done) {
    agent.post('/api/session')
    .send({ username: 'user', password: 'pass' })
    .end(function(err, res) {
      expect(req.status).to.equal(201);
      done();
    });
  });

  it('Should return the current session', function(done) {
    agent.get('/api/session').end(function(err, res) {
      expect(req.status).to.equal(200);
      done();
    });
  });
}); 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-06-03T08:38:19.473

抱歉，建议的解决方案都不适用于我。

由于`supertest.agent()`我不能使用`app`实例，我需要事先运行服务器并指定`http://127.0.0.1:port`，而且我不能使用 supertest 的期望（断言），我不能使用`supertest-as-promised`lib 等等......

这个`cookies`案子对我根本不起作用。

所以，我的解决方案是：

如果您使用的是**Passport.js**，它使用“Bearer token”机制，您可以在您的规范中使用以下示例：

```
var request = require('supertest');
var should = require('should');

var app = require('../server/app.js'); // your server.js file

describe('Some auth-required API', function () {
  var token;

  before(function (done) {
    request(app)
      .post('/auth/local')
      .send({
        email: 'test@example.com',
        password: 'the secret'
      })
      .end(function (err, res) {
        if (err) {
          return done(err);
        }

        res.body.should.to.have.property('token');
        token = res.body.token;

        done();
      });
  });

  it('should respond with status code 200 and so on...', function (done) {
    request(app)
      .get('/api/v2/blah-blah')
      .set('authorization', 'Bearer ' + token) // 1) using the authorization header
      .expect(200)
      .expect('Content-Type', /json/)
      .end(function (err, res) {
        if (err) {
          return done(err);
        }

        // some `res.body` assertions...

        done();
      });
  });

  it('should respond with status code 200 and so on...', function (done) {
    request(app)
      .get('/api/v2/blah-blah')
      .query({access_token: token}) // 2) using the query string
      .expect(200)
      .expect('Content-Type', /json/)
      .end(function (err, res) {
        if (err) {
          return done(err);
        }

        // some `res.body` assertions...

        done();
      });
  });
}); 
```

您可能希望有一个辅助函数来验证用户：

`test/auth-helper.js`

```
'use strict';

var request = require('supertest');
var app = require('app.js');

/**
 * Authenticate a test user.
 *
 * @param {User} user
 * @param {function(err:Error, token:String)} callback
 */
exports.authenticate = function (user, callback) {
  request(app)
    .post('/auth/local')
    .send({
      email: user.email,
      password: user.password
    })
    .end(function (err, res) {
      if (err) {
        return callback(err);
      }

      callback(null, res.body.token);
    });
}; 
```

有一个富有成效的一天！

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-08-05T12:36:50.820

我将假设您使用的是 CookieSession 中间件。

正如 grub 提到的，您的目标是获取 cookie 值以传递给您的请求。但是，无论出于何种原因（至少在我的测试中）， supertest 都不会在同一个测试中触发 2 个请求。因此，我们必须对如何获得正确的 cookie 值进行逆向工程。首先，您需要 require 用于构建 cookie 的模块：

```
var Cookie          = require("express/node_modules/connect/lib/middleware/session/cookie")
  , cookieSignature = require("express/node_modules/cookie-signature") 
```

是的，这很丑陋。我把它们放在我的测试文件的顶部。

接下来，我们需要构造 cookie 值。我将其放入`beforeEach`需要经过身份验证的用户的测试中：

```
var cookie = new Cookie()
  , session = {
      passport: {
        user: Test.user.id
      }
    }

var val = "j:" + JSON.stringify(session)
val = 's:' + cookieSignature.sign(val, App.config.cookieSecret)
Test.cookie = cookie.serialize("session",val) 
```

`Test.user.id`之前在我的`beforeEach`链的一部分中定义了我要“登录”的用户。的结构`session`是 Passport（至少目前）如何将当前用户信息插入到您的会话中。

如果您使用基于 cookie 的会话，则 Passport 将回退的 Connect CookieSession 中间件中删除`var val`带有`"j:"`和的行。`"s:"`最后，我们序列化 cookie。我放在`"session"`那里，因为这就是我配置我的 cookie 会话中间件的方式。此外，`App.config.cookieSecret`在其他地方定义，它必须是您传递给 Express/Connect CookieSession 中间件的秘密。我把它藏起来，`Test.cookie`以便以后可以访问它。

现在，在实际测试中，您需要使用该 cookie。例如，我有以下测试：

```
it("should logout a user", function(done) {
  r = request(App.app)
    .del(App.Test.versionedPath("/logout"))
    .set("cookie", Test.cookie)
    // ... other sets and expectations and your .end
} 
```

注意对`set`with`"cookie"`和的调用`Test.cookie`。这将导致请求使用我们构建的 cookie。

现在，您已经假装您的应用程序认为用户已登录，并且您不必保持实际的服务器运行。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-08T11:07:03.297

这是一种简洁的方法，它具有可重用的额外好处。

```
const chai = require("chai")
const chaiHttp = require("chai-http")
const request = require("supertest")

const app = require("../api/app.js")

const should = chai.should()
chai.use(chaiHttp)

describe("a mocha test for an expressjs mongoose setup", () => {
  // A reusable function to wrap your tests requiring auth.
  const signUpThenLogIn = (credentials, testCallBack) => {
    // Signs up...
    chai
      .request(app)
      .post("/auth/wizard/signup")
      .send({
        name: "Wizard",
        ...credentials,
      })
      .set("Content-Type", "application/json")
      .set("Accept", "application/json")
      .end((err, res) => {
        // ...then Logs in...
        chai
          .request(app)
          .post("/auth/wizard/login")
          .send(credentials)
          .set("Content-Type", "application/json")
          .set("Accept", "application/json")
          .end((err, res) => {
            should.not.exist(err)
            res.should.have.status(200)
            res.body.token.should.include("Bearer ")
            // ...then passes the token back into the test 
            // callBack function.
            testCallBack(res.body.token)
          })
      })
  }

  it.only("flipping works", done => {
    // "Wrap" our test in the signUpThenLogIn function.
    signUpLogIn(
      // The credential parameter.
      {
        username: "wizard",
        password: "youSHALLpass",
      },
      // The test wrapped in a callback function which expects 
      /// the token passed back from when signUpLogIn is done.
      token => {
        // Now we can use this token to run a test... 
        /// e.g. create an apprentice.
        chai
          .request(app)
          .post("/apprentice")
          .send({ name: "Apprentice 20, innit" })
           // Using the token to auth! 
          .set("Authorization", token)
          .end((err, res) => {
            should.not.exist(err)
            res.should.have.status(201)
            // Yep. apprentice created using the token.
            res.body.name.should.be.equal("Apprentice 20, innit")
            done()
          })
      }
    )
  })
}) 
```

**奖金材料**

为了使其更加可重用，将该函数放入一个名为“myMochaSuite.js”的文件中，您可以在测试 api 服务器时将“describe”替换为该文件。做一个向导，把你之前/之后的所有东西都放在这个“套件”中。例如：

```
// tests/myMochaSuite.js  
module.exports = (testDescription, testsCallBack) => {
  describe(testDescription, () => {
    const signUpThenLogIn = (credentials, testCallBack) => {
      // The signUpThenLogIn function from above
    }

    before(async () => {
      //before stuff like setting up the app and mongoose server.
    })
    beforeEach(async () => {
      //beforeEach stuff clearing out the db
    })
    after(async () => {
      //after stuff like shutting down the app and mongoose server.
    })

    // IMPORTANT: We pass signUpLogIn back through "testsCallBack" function.
    testsCallBack(signUpThenLogIn)
  })
} 
```

```
// tests/my.api.test.js
// chai, supertest, etc, imports +
const myMochaSuite = require("./myMochaSuite")

// NB: signUpThenLogIn coming back into the tests.
myMochaSuite("my test description", signUpThenLogIn => {
   it("just works baby", done => {
     signUpThenLogIn(
       {username: "wizard", password: "youSHALLpass"},
       token => {
         chai
           .request(app)
           .get("/apprentices/20")
           // Using the incoming token passed when signUpThenLogIn callsback.
           .set("Authorization", token)
           .end((err, res) => {
             res.body.name.equals("Apprentice 20, innit")
             done()
           })
       }
     )
   })
}) 
```

现在，您为所有测试提供了一个更加可重用的套件“包装器”，让它们变得整洁。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-08-20T09:02:12.800

GraphQl 完整示例：

```
const adminLogin = async (agent) => {
  const userAdmin = await User.findOne({rol:"admin"}).exec();
  if(!userAdmin) return new Promise.reject('Admin not found')
  return agent.post('/graphql').send({
    query: ` mutation { ${loginQuery(userAdmin.email)} }`
  })//.end((err, {body:{data}}) => {})
}

test("Login Admin", async (done) => {
  const agent = request.agent(app);
  await adminLogin(agent);
  agent
    .post("/graphql")
    .send({query: `{ getGuests { ${GuestInput.join(' ')} } }`})
    .set("Accept", "application/json")
    .expect("Content-Type", /json/)
    .expect(200)
    .end((err, {body:{data}}) => {
      if (err) return done(err);
      expect(data).toBeInstanceOf(Object);
      const {getGuests} = data;
      expect(getGuests).toBeInstanceOf(Array);
      getGuests.map(user => GuestInput.map(checkFields(user)))
      done();
    });
}) 
```

# c# - “程序集相同的简单名称已被导入”错误

> ID：14001185
> 
> 赞同：14
> 
> 时间：2012-12-22T08:15:11.233
> 
> 标签：c#, visual-studio, dll, namespaces, clr

这是一个 CLR 项目。我正在导入两个同名的 DLL 文件`quizz.dll`（我将旧版本重命名为`legacyquizz.dll`），并将新版本作为`quizz.dll`旧版本转换器测试项目包含在内。（正在测试的旧转换器项目仅导入旧的`quizz.dll`）。

这是我得到的错误。. .

> 已导入具有相同简单名称 'Quizz, Version=2.0.0.1, Culture=neutral, PublicKeyToken=null 的程序集。
> 
> 尝试删除其中一个引用或对其进行签名以并排启用。C：\ 。. . \测验.dll

它指向的路径是较新版本的 quizz.dll 的目的地。

我在 legacyquizz.dll 文件上使用了外部别名：

```
extern alias legacy; 
```

在这种情况下，什么是“简单名称”？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-22T08:33:27.893

您可以通过打开项目属性并选择装配信息来查看简单名称：

![在此处输入图像描述](../Images/09353a2d1bc2983c2074fbbacde5d221.png)

要签署程序集，您需要选择签名选项卡并创建或选择签名密钥：

![在此处输入图像描述](../Images/9bd6b1d53f25f012328d4e137a73f32f.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-22T08:34:14.647

你有两个同名的程序集（不是文件名，程序集名）。有两种解决方案：

1.  重命名项目属性中的一个程序集并重新编译。
2.  在程序集上设置[强名称签名](http://msdn.microsoft.com/en-us/library/h4fa028b%28v=vs.80%29.aspx)，以允许同一程序集的两个不同版本共存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-27T17:01:28.863

如果您使用的是新的 .csproj 版本，则在添加对另一个解决方案项目的引用后，如果该引用已作为程序集依赖项存在（此引用可能已由 Visual Studio 自动添加），则可能会遇到此问题。

在解决方案资源管理器中，展开冲突项目，导航到*Dependencies->Assemblies*并检查是否存在对引发冲突的程序集的引用。如果存在，只需将其删除即可解决冲突。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-09-19T05:01:47.580

我的项目中也出现了这个问题。我已将我的 dll 路径更改为另一个文件夹，并更改了相同的引用路径（依赖层）。它会起作用的。不会发生重复。

# c++ - 关于使用 C++ 使用命令行参数调用 CreateProcessAsUser 的说明

> ID：14001186
> 
> 赞同：5
> 
> 时间：2012-12-22T08:15:28.700
> 
> 标签：c++, winapi, process

我对使用命令行参数调用[CreateProcessAsUser的正确方法有些困惑。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682429%28v=vs.85%29.aspx)因此，无需详细说明填写其余参数的详细信息，有人可以确认这是应该如何完成的吗？（换句话说，我应该将exe文件路径作为第一个命令行参数，还是指定它就`lpApplicationName`足够了？）

```
LPCTSTR pExePath = L"c:\\program files\\sub dir\\program.exe";
LPCTSTR pCmdLine = L"v=\"one two\"";

TCHAR buff[MAX_PATH];
StringCchCopy(buff, MAX_PATH, _T("\""));
StringCbCat(buff, MAX_PATH, pExePath);
StringCbCat(buff, MAX_PATH, _T("\" "));
StringCbCat(buff, MAX_PATH, pCmdLine);

CreateProcessAsUser(hToken, pExePath, buff, NULL, NULL, FALSE, dwFlags, NULL, NULL, &si, &pi); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-22T08:31:24.790

如果第二个参数`CreateProcessAsUser`是`NULL`，那么模块名称必须是第三个参数中第一个空格分隔的标记。

如果第二个参数`CreateProcessAsUser`不是`NULL`，那么它将被视为可执行文件来执行。在这种情况下，第三个参数可以是

一个）`"EXENAME p1 p2"`

或者它可以是

b)`"p1 p2"`

如果您选择a)，那么子进程将具有以下内容

`argv[0] --> EXENAME`

`argv[1] --> p1`

`argv[2] --> p2`

如果您选择 b)，那么子进程将拥有

`argv[0] --> p1`

`argv[1] --> p2`

无论哪种方式，要执行的过程都是`EXENAME`（第二个参数`CreateProcessAsUser`）。然而，被调用的进程应该知道命令行参数的传入方式。

如果您使用 b)，您还可以选择将第二个参数传递给`CreateProcessAsUser`as `NULL`。

# javascript - Javascript 数组长度行为

> ID：14001187
> 
> 赞同：1
> 
> 时间：2012-12-22T08:15:57.440
> 
> 标签：javascript

让`arr = [1,2,3,4]`. 如果我设置`arr[x]`where `x >= arr.length`，`arr.length`就会变成`x + 1`。

这发生在 Firefox 和 Chrome 上。我有两个问题：

1.  这是定义的行为吗？（欢迎来源）
2.  推荐这样做吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T08:21:21.883

> 这是定义的行为吗？

是的，请参阅[规范的 §15.4](http://www.ecma-international.org/ecma-262/5.1/#sec-15.4)。

> 推荐这样做吗？

这完全取决于您想要的最终结果。这样做没有错。

你会很常见地看到这样构建的数组：

```
var a = [];
for (/*...some loop over things...*/) {
    a[a.length] = /* ...something to put on the array... */;
} 
```

...与以下内容完全相同：

```
var a = [];
for (/*...some loop over things...*/) {
    a.push(/* ...something to put on the array... */);
} 
```

一些 JavaScript 引擎的处理`a[a.length] = ...`速度比其他引擎快`a.push(...)`（其他则相反）。

请注意，JavaScript 数组是*稀疏*的，它们中可能有间隙，这是造成这种行为的部分原因。（事实上​​，JavaScript 数组[根本不是真正的数组](http://blog.niftysnippets.org/2011/01/myth-of-arrays.html)。）您可以将 assign 分配给`length`属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T08:18:31.933

数组索引从零开始。

```
arr[0] == 1
arr[1] == 2
arr[2] == 3
arr[3] == 4 
```

当您设置`arr[4]`时，它成为第 5 个元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T08:18:51.493

当然，你可以在 JavaScript 中做到这一点。

*   该数组将扩展到第 x 个索引，并将您的值放在那里。
*   数组的长度为 x+1。
*   从未定义过的索引中的值（在您的情况下为 4 到 x-1）将为`undefined`.

# python - 为什么 Python 请求在尝试与 Tumblr 一起使用时会抛出此错误？

> ID：14001188
> 
> 赞同：4
> 
> 时间：2012-12-22T08:16:07.053
> 
> 标签：python, oauth, tumblr, python-requests

这是我的 Oauth 代码：

```
auth = OAuth1(client_key=consumer_key,
              client_secret=consumer_secret,
              resource_owner_key=access_key,
              resource_owner_secret=access_secret,
              signature_type='auth_header')

r = requests.get(url, auth=auth)
print r 
```

错误：

```
 r = requests.get(url,auth = auth)
  File "/usr/local/lib/python2.7/dist-packages/requests/api.py", line 49, in get
    return request('get', url, **kwargs)
  File "/usr/local/lib/python2.7/dist-packages/requests/api.py", line 38, in request
    return session.request(method=method, url=url, **kwargs)
  File "/usr/local/lib/python2.7/dist-packages/requests/sessions.py", line 259, in request
    prep = req.prepare()
  File "/usr/local/lib/python2.7/dist-packages/requests/models.py", line 197, in prepare
    p.prepare_auth(self.auth)
  File "/usr/local/lib/python2.7/dist-packages/requests/models.py", line 329, in prepare_auth
    r = auth(self)
  File "/usr/local/lib/python2.7/dist-packages/requests_oauthlib/core.py", line 41, in __call__
    decoded_body = extract_params(r.data)
AttributeError: 'PreparedRequest' object has no attribute 'data' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T16:01:44.040

我猜你正在使用 Requests 1.0.0 或更高版本。这是一个向后不兼容的版本，发生此错误是因为[requests-oauthlib](https://github.com/requests/requests-oauthlib)尚不兼容。已经做了一些工作来解决这个问题，但还没有一个新版本。请参阅requests-oauthlib 的[问题 #1](https://github.com/requests/requests-oauthlib/issues/1)。

现在你的选择是：

1.  降级到 requests 0.14.2，它应该与 request_oauthlib 0.2.0 一起使用。
2.  升级到request_oauthlib[的 git 版本](https://github.com/requests/requests-oauthlib)，它可能足以满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T03:32:08.070

如果您愿意尝试包装 Requests 的库，那么可以使用[rauth](https://github.com/litl/rauth)。我什至可以给你一个有效的 Tumblr 示例：

```
from rauth import OAuth1Service

import re
import webbrowser

# Get a real consumer key & secret from http://www.tumblr.com/oauth/apps
tumblr = OAuth1Service(
    consumer_key='gKRR414Bc2teq0ukznfGVUmb41EN3o0Nu6jctJ3dYx16jiiCsb',
    consumer_secret='DcKJMlhbCHM8iBDmHudA9uzyJWIFaSTbDFd7rOoDXjSIKgMYcE',
    name='tumblr',
    request_token_url='http://www.tumblr.com/oauth/request_token',
    access_token_url='http://www.tumblr.com/oauth/access_token',
    authorize_url='http://www.tumblr.com/oauth/authorize',
    base_url='https://api.tumblr.com/v2/')

request_token, request_token_secret = tumblr.get_request_token()

authorize_url = tumblr.get_authorize_url(request_token)

print 'Visit this URL in your browser: ' + authorize_url
webbrowser.open(authorize_url)
authed_url = raw_input('Copy URL from your browser\'s address bar: ')
verifier = re.search('\oauth_verifier=([^#]*)', authed_url).group(1)

session = tumblr.get_auth_session(request_token,
                                  request_token_secret,
                                  method='POST',
                                  data={'oauth_verifier': verifier})

user = session.get('user/info').json()['response']['user']

print 'Currently logged in as: {name}'.format(name=user['name']) 
```

Rauth 0.5.3 将适用于 Requests 1.1.0（可能还有 1.0.0）。如果您试一试，如果您还有其他问题，请告诉我！

完全披露，我保持沉默。

# javascript - 如何从动态谷歌地图中识别和存储特定字符串？

> ID：14001189
> 
> 赞同：-2
> 
> 时间：2012-12-22T08:16:11.127
> 
> 标签：javascript, google-maps

我有一个特定的问题，我似乎无法找到解决方案。我正在尝试识别在动态谷歌地图的标记中找到的特定字符串（finnkode）。

谷歌地图在这个网站上：[http](http://www.finn.no/finn/realestate/pulse/priceinfo/) ://www.finn.no/finn/realestate/pulse/priceinfo/ 在标签“Solgte boliger”下。（放大代表首都奥斯陆的红色区域）

该地图显示特定的“属性”或聚合属性（标有加号）。如果您单击其中一个图标，则会出现一个弹出窗口，其中包含指向特定属性的链接。在这个链接中存储了一个“finnkode”。我想识别所有可用的 finnkode 并将其存储在数据库中。

目前我没有找到办法做到这一点？我希望有人能帮帮忙

![奥斯陆地图视图示例](../Images/192c1d3ea9bf5cc7139ed75271a76554.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T20:55:10.087

It looks like each property overlay box is stored on the html page like this:

```
<map id="poiImageMap-1" name="poiImageMap-1">
<area id="poi_93955716" class="type_10002 group" shape="rect" coords="630,168,646,184" title="FINN-eiendom-solgt" href="">
<area id="poi_93955715" class="type_10002 group" shape="rect" coords="578,50,594,66" title="FINN-eiendom-solgt" href="">
[...]
</map> 
```

And once you click on one of the overlays, the box pops up that contains the information you want, and is displayed somewhere in the html code (example too long to post here).

You could write a parser to scrape through this page, clicking each overlay and then recording the data that appears in the popup box.

# javascript - 您可以跨多个模板共享数据吗？

> ID：14001191
> 
> 赞同：5
> 
> 时间：2012-12-22T08:16:31.280
> 
> 标签：javascript, meteor, handlebars.js

我有时会发现自己向多个模板声明相同的数据。例如：

```
Template.auction_page.auctionDurations = function () {
  return [ 30, 60, 120 ];
};

Template.auction_editor.auctionDurations = function () {
  return [ 30, 60, 120 ];
}; 
```

我可以通过使用全局使其变得更好：

```
Template.auction_page.auctionDurations = function () {
  return global.auctionDurations;
};

Template.auction_editor.auctionDurations = function () {
  return global.auctionDurations;
}; 
```

但是有没有办法完全摆脱声明？换句话说，有没有办法默认将一些全局数据共享给多个模板？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T17:28:35.237

找到了一个好的解决方案（在 Helper 的帮助下！）。

您的全球：

```
global = _.extend({}, {
  regions: [ "Americas", "Europe", "Asia" ]
} 
```

帮手：

```
Handlebars.registerHelper("global", function(name) {
    return global[name];
}); 
```

现在您的所有模板都可以使用它：

```
<select>
  {{#each global "regions"}}
  <option>{{this}}</option>
  {{/each}}
</select> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T03:40:54.160

使用辅助函数是一个很好的通用解决方案。为了完整起见，您还可以做一个简单的分配：

```
Template.auction_page.auctionDurations = Template.auction_editor.auctionDurations; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T12:40:40.427

您可以[`Session`](http://docs.meteor.com/#session)为此使用：

```
 Template.auction_page.auctionDurations = function() {
    return Session.get("auctionDurations");
  }
  Template.auction_editor.auctionDurations = function() {
    return Session.get("auctionDurations");
  } 
```

使用 Session 的一个好处是，因为它是一个反应数据源，设置它会导致所有依赖它的模板被重新渲染。因此，您的拍卖持续时间将在您致电后立即更新`Session.set("auctionDurations", [ 30, 60, 120 ]);`

# ios - 如何更改 UITableView 部分颜色和文本颜色

> ID：14001194
> 
> 赞同：5
> 
> 时间：2012-12-22T08:16:54.323
> 
> 标签：ios, xcode, uitableview

我有`UITableView`它从 plist 中填充日期，甚至部分的标题是从 plist 中填充的。`UITableView`它给了我默认的`blue`部分颜色和`White`文本颜色。像这样......

```
-(NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {

NSString *key = nil;
if ([tableView isEqual:self.searchDisplayController.searchResultsTableView])
{
    key = [self.searchResults objectAtIndex:section];
}
else{
    key = [self.mySections objectAtIndex:section];
}

//    NSString *key = [self.mySections objectAtIndex:section];
return [NSString stringWithFormat:@"%@", key];

 } 
```

. 现在我需要更改此默认文本颜色和部分的颜色，为此我正在实现下面显示的代码。但它给了我自己的`UIView`.

```
-(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    UIView *tempView=[[UIView alloc]initWithFrame:CGRectMake(0,200,300,244)];
    tempView.backgroundColor=[UIColor clearColor];

    UILabel *tempLabel=[[UILabel alloc]initWithFrame:CGRectMake(15,0,300,44)];
    tempLabel.backgroundColor=[UIColor clearColor]; 
    tempLabel.shadowColor = [UIColor blackColor];
    tempLabel.shadowOffset = CGSizeMake(0,2);
    tempLabel.textColor = [UIColor redColor]; //here you can change the text color of header.
    tempLabel.font = [UIFont fontWithName:@"Helvetica" size:fontSizeForHeaders];
    tempLabel.font = [UIFont boldSystemFontOfSize:fontSizeForHeaders];
        tempLabel.text=@"Header Text";

    [tempView addSubview:tempLabel];

    [tempLabel release];
    return tempView;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-22T09:34:55.807

为了最好地自定义表格部分标题的外观，您确实需要实现两种方法：第一种方法是您已经拥有的，它应该可以工作，尽管结果不会很有用。

第二种方法是`tableView:heightForHeaderInSection:`，它告诉`UITableView`新部分的高度是多少，它可以像这样简单：

```
- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section {
    return 50.0f; 
} 
```

编辑：根据评论，这是您的代码和定义标题高度的结果：

![最终标题标签外观](../Images/359fcf8f5c6ec74b303f2e71c3a28663.png)

编辑2：如果您想要黑色背景的红色文本，请将您的代码更改为`tableView:viewForHeaderInSection:`：

```
-(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    UIView *tempView=[[UIView alloc]initWithFrame:CGRectMake(0,200,300,244)];
    tempView.backgroundColor=[UIColor blackColor];

    UILabel *tempLabel=[[UILabel alloc]initWithFrame:CGRectMake(15,0,300,44)];
    tempLabel.backgroundColor=[UIColor clearColor]; 
    tempLabel.textColor = [UIColor redColor]; //here you can change the text color of header.
    tempLabel.font = [UIFont fontWithName:@"Helvetica" size:fontSizeForHeaders];
    tempLabel.font = [UIFont boldSystemFontOfSize:fontSizeForHeaders];
        tempLabel.text=@"Header Text";

    [tempView addSubview:tempLabel];

    [tempLabel release];
    return tempView;
} 
```

编辑 3：好的，所以我将尝试将您的代码从第一种方法与第二种方法合并。它看起来像这样：

```
-(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    UIView *tempView=[[UIView alloc]initWithFrame:CGRectMake(0,200,300,244)];
    tempView.backgroundColor=[UIColor blackColor];

    UILabel *tempLabel=[[UILabel alloc]initWithFrame:CGRectMake(15,0,300,44)];
    tempLabel.backgroundColor=[UIColor clearColor]; 
    tempLabel.textColor = [UIColor redColor]; //here you can change the text color of header.
    tempLabel.font = [UIFont fontWithName:@"Helvetica" size:fontSizeForHeaders];
    tempLabel.font = [UIFont boldSystemFontOfSize:fontSizeForHeaders];

    NSString *key = nil;
    if ([tableView isEqual:self.searchDisplayController.searchResultsTableView])
    {
        key = [self.searchResults objectAtIndex:section];
    }
    else{
        key = [self.mySections objectAtIndex:section];
    }

    tempLabel.text=[NSString stringWithFormat:@"%@", key];
    [tempView addSubview:tempLabel];

    [tempLabel release];
    return tempView;
} 
```

这应该返回具有正确标签和正确外观的表格视图部分标题。

编辑 4：请注意所有这些是如何工作的：如果您使用您`tableView:viewForHeaderInSection:`输入的任何代码，`tableView:titleForHeaderInSection:` *则将被忽略*。因此，您需要对节标题进行整个设置，包括`tableView:viewForHeaderInSection`方法中的正确文本。

# mysql - servlet 数据库连接

> ID：14001198
> 
> 赞同：0
> 
> 时间：2012-12-22T08:17:11.650
> 
> 标签：mysql, jsp, servlets

大家好，我正在开发简单的 jsp 文件，该文件从学生那里获取一些信息，如姓名、性别、技能等，我将其定向到 servlet 并给她提供数据库连接。但是当我运行代码时，它没有连接到数据库。有人可以帮帮我吗。这是我的 servlet 代码

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) 
throws ServletException, IOException 
{
    response.setContentType("text/html");
    PrintWriter out = response.getWriter();
    Connection con=null;
    String url ="jdbc:mysql://localhost:3306/";
    String dbName="student_db";
    String driver = "com.mysql.jdbc.Driver";
    String username = "root";
    String password = "admin";

    String bttn_value = request.getParameter("submit");
    if(bttn_value.equalsIgnoreCase("submit"))
    {
        String name = request.getParameter("fname");

        String gender = request.getParameter("gender");
        String skill ="";
        System.out.println("2222222222");
        String skills[]= request.getParameterValues("skill");
        for(int i=0;i<skills.length;i++)
        {
            skill +=skills[i]+",";
        }
        String addr=request.getParameter("adname");
        String country = request.getParameter("country");
        Statement stmt;

    try
    {
        System.out.println("444444444444");
        Class.forName(driver).newInstance();
        System.out.println("333333333");
        con = DriverManager.getConnection(url + dbName, username,
                password);

        System.out.print("Connected to database");
        String query1= "insert into student values  name='"
             +name +"',gender='"+gender+ "',skills='"+skill + "',addname='" 
             +addr +"',country='" +country +"'";
        stmt =con.createStatement();
        stmt.executeUpdate(query1);
        out.print("<br>");
        response.sendRedirect("std.jsp");
        con.close();
        System.out.print("Disconnected from DB");

    }
    catch (Exception e)
    {
        out.println(e.getMessage());
        System.out.println("123456");

    } 
```

这是我的控制台 ![在此处输入图像描述](../Images/fa36bb7928a94d4f5bcf9af31a00a244.png)

和我得到的输出

![在此处输入图像描述](../Images/6be12f77c40fd0fdd8b493d4da7322ff.png)

预先感谢您，任何帮助都是可观的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T08:22:20.793

代码不需要创建新实例来注册驱动程序。 `Class.forName(driver);`就足够了。

```
try
{
    System.out.println("444444444444");
    Class.forName(driver);
    System.out.println("333333333");
    con = DriverManager.getConnection(url + dbName, username,
            password);

    System.out.print("Connected to database");
    String query1= "insert into student values  name='"
         +name +"',gender='"+gender+ "',skills='"+skill + "',addname='" 
         +addr +"',country='" +country +"'";
    stmt =con.createStatement();
    stmt.executeUpdate(query1);
    out.print("<br>");
    response.sendRedirect("std.jsp");
    con.close();
    System.out.print("Disconnected from DB");

} 
```

还要确保 MySql JDBC 驱动程序在您的类路径中。您可以下载 jar 或从 maven 中将其拉入。

**马文**

```
<dependency>
    <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
    <version>5.1.21</version>
</dependency> 
```

[直接下载](http://mirrors.ibiblio.org/pub/mirrors/maven2/mysql/mysql-connector-java/5.1.9/mysql-connector-java-5.1.9.jar)

要导入 jar，首先下载 jar 文件并将其放在文件系统中，最好放在项目中。

1.  在 Eclipse 中右键单击您的项目并选择属性，然后选择 `Java Build Path`.
2.  接下来单击`Libraries`选项卡并单击 Add JARs（如果 .jar 在您的项目中）或 Add External Jars（如果 .jar 在外部）。
3.  找到 jar 文件并单击确定。

![在此处输入图像描述](../Images/e9dba1999b62fa8928843341c3b05f37.png)

要获得更多有用的调试信息，请尝试在您的 catch 中打印堆栈跟踪，一旦问题解决，就可以将其删除。我怀疑它会告诉你它找不到 mysql 驱动程序。

```
catch (Exception e)
{
    e.printStackTrace();
    out.println(e.getMessage());
    System.out.println("123456");

} 
```

如果您的问题仍未解决，请将此堆栈跟踪与您的问题一起发布。

# c# - 在 C# 中解析 Json 图像的问题

> ID：14001199
> 
> 赞同：1
> 
> 时间：2012-12-22T08:17:16.423
> 
> 标签：c#, json, visual-studio-2010, parsing

净 C#。我正在尝试从 Web 服务中解析 Json。我已经用文本完成了它，但解析图像有问题。这是我从中获取 Json 的网址

```
http://collectionking.com/rest/view/items_in_collection.json?args=122 
```

这是我解析它的代码

```
using (var wc = new WebClient()) {
JavaScriptSerializer js = new JavaScriptSerializer();
var result = js.Deserialize<ck[]>(wc.DownloadString("http://collectionking.com/rest/view/items_in_collection.json args=122"));
foreach (var i in result) {
lblTitle.Text = i.node_title;
imgCk.ImageUrl = i.["main image"];
lblNid.Text = i.nid; 
```

任何帮助都会很棒。提前致谢。PS：它返回标题和 Nid 但不返回图像。我的班级如下：

```
public class ck
{    
public string node_title;
public string main_image;
public string nid;  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T08:24:16.083

您的问题是您将 ImageUrl 设置为类似这样的内容`<img typeof="foaf:Image" src="http://...`，而不是实际的 url。您将需要进一步解析`main image`和提取 url 以正确显示它。

**编辑**

由于空白，这是一个难以解决的问题。我能找到的唯一解决方案是在解析字符串之前删除空格。这不是一个很好的解决方案，但我找不到使用内置类的任何其他方法。不过，您也许可以使用[JSON.Net](http://json.net)或其他一些库正确解决它。

我还添加了一个正则表达式来为您提取 url，尽管没有错误检查这里的内容，因此您需要自己添加。

```
using (var wc = new WebClient()) {
    JavaScriptSerializer js = new JavaScriptSerializer();
    var result = js.Deserialize<ck[]>(wc.DownloadString("http://collectionking.com/rest/view/items_in_collection.json?args=122").Replace("\"main image\":", "\"main_image\":")); // Replace the name "main image" with "main_image" to deserialize it properly, also fixed missing ? in url
    foreach (var i in result) {
        lblTitle.Text = i.node_title;
        string realImageUrl = Regex.Match(i.main_image, @"src=""(.*?)""").Groups[1].Value;  // Extract the value of the src-attribute to get the actual url, will throw an exception if there isn't a src-attribute
        imgCk.ImageUrl = realImageUrl;
        lblNid.Text = i.nid;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T13:02:31.033

尝试这个

```
 private static string ExtractImageFromTag(string tag)
 {
 int start = tag.IndexOf("src=\""),
    end = tag.IndexOf("\"", start + 6);
return tag.Substring(start + 5, end - start - 5);
}
private static string ExtractTitleFromTag(string tag)
{
int start = tag.IndexOf(">"),
    end = tag.IndexOf("<", start + 1);
return tag.Substring(start + 1, end - start - 1);
} 
```

它可能会有所帮助

# hibernate - 根据 GORM 查询中的字段过滤对象

> ID：14001201
> 
> 赞同：1
> 
> 时间：2012-12-22T08:17:42.503
> 
> 标签：hibernate, grails, groovy, grails-orm

我是 grails 的新手，遇到了性能问题。我有三个域类：

```
User{
Set authorities
static hasMany = [authorities: Role]
}

Organization{
//more code
}

UserOrganization{
User user
Organization organization
} 
```

有许多角色（权限）分配给用户（'ROLE_ADMIN'、'ROLE_MANAGER'）

在一种情况下，我有一个组织列表，我需要找出这些组织的所有具有管理员权限 (ROLE_MANAGER) 的用户。

我尝试像这样使用 GORM：

```
UserOrganization.createCriteria().list{
inList('organizaton',organizationList)
//but do not know how to filter out users with ROLE_MANAGER authority
} 
```

有没有办法在这样的单个 GORM 查询中完成它？我可以获取这些组织的所有用户的列表并运行retainAll{closure} 以过滤掉经理，但这将是一个两步过程并造成性能瓶颈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T11:33:20.047

```
UserOrganization.createCriteria().list{
    inList('organizaton',organizationList)
    user {
        inList('authorities',authoritiesList)
    }
} 
```

顺便提一句。您不需要显式编写`authorities`GORM 会为您创建它：

```
User {
    static hasMany = [authorities: Role]
} 
```

如果您想确保权限属于`Set`或其他集合类型，则应编写：`Set authorities`

# linker - 为什么生成可执行文件需要目标文件？

> ID：14001202
> 
> 赞同：9
> 
> 时间：2012-12-22T08:17:42.103
> 
> 标签：linker, executable, object-files

当我们编译代码时，会生成一个目标文件。从该目标文件，在链接过程中生成一个可执行文件。

为什么我们需要一个目标文件？目标文件有什么用？不能直接生成可执行文件吗？毕竟，我们使用的是可执行文件来运行程序。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-22T08:27:55.643

目标文件是链接器用来构建完整的可执行文件（或库）的文件。

您通常可以让编译器“直接”输出可执行文件，语法将取决于编译器。以 GCC 为例：

```
gcc foo.c bar.c ... 
```

将生成一个可执行文件，并且不会保留任何中间目标文件（但可能已经生成了一个 - 随后将其删除）。

目标文件用于进行增量构建。您将每个源文件（或一组源文件）编译为目标文件，然后将它们全部链接到一个可执行文件中。这允许您仅重新编译自上次构建以来已更改的源文件，从而可能节省大量时间。
或者您可以使用相同的目标文件来链接不同的可执行文件（例如，重新使用构建的部分来生成可执行文件和共享库），与每次编译所有内容相比再次节省时间和资源。

从理论的角度来看，目标文件不是“需要的”。它们非常实用（实际上对于某些（大多数？）工具链在技术上是必需的，即汇编器知道如何生成而链接器知道如何链接的东西）。

# jquery - 如何在 jQuery Mobile 中检测滑动位置

> ID：14001203
> 
> 赞同：2
> 
> 时间：2012-12-22T08:17:58.757
> 
> 标签：jquery, jquery-mobile, swipe

我正在构建一个 jQuery Mobile 应用程序，我需要一种在滑动事件期间跟踪用户手指移动的方法。我找到[了 jGestures](http://jgestures.codeplex.com/)，它似乎在他们的`swipemove`活动中提供了这个功能，但我希望不必导入另一个库。jQuery Mobile`swipe`事件是否返回此类信息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-22T09:24:30.267

只能使用 jQM 来完成。我为您创建了一个示例：http: [//jsfiddle.net/Gajotres/cnuGy/](http://jsfiddle.net/Gajotres/cnuGy/)。我已经在 Windows Firefox、Android 4.1 堆栈浏览器和 iPad 上对其进行了测试。

```
$('#index').on('touchstart vmousedown', function(){
    $('#start').val('Touch start');
})

$('#index').on('touchmove vmousemove', function(event){
    $('#move-x').val(event.pageX);
    $('#move-y').val(event.pageY);
})

$('#index').on('touchend vmouseup', function(){
    $('#end').val('Touch end');
}); 
```

vmousedown 之类的 V 事件仅适用于鼠标，而触摸事件适用于触控设备（iPad、Android...）。

# soap - 通往肥皂服务的骆驼路线

> ID：14001211
> 
> 赞同：1
> 
> 时间：2012-12-22T08:19:21.070
> 
> 标签：soap, apache-camel, endpoint

我是骆驼的新手。

我想将以下代理路由添加到soap服务作为运行时。

```
from("cxf://http://localhost:8081/CentrelServer/NewWebService?" +                        
                    "serviceClass=com.vnitt.webservice.axis.NewWebService" +
                    "&serviceName={http://axis.webservice.vnitt.com/}NewWebService" +
                    "&portName={http://axis.webservice.vnitt.com/}NewWebServicePort" +
                    "&wsdlURL=src/conf/NewWebService.wsdl").
                            process(new Processor() {

                public void process(Exchange arg0) throws Exception {
                    System.out.println("code run here");

                }
            }).to(clientService); 
```

在上面的代码中，我希望 clientService 指向地址处的肥皂服务：`http://localhost:9091/Client/NewWebService`

我不知道如何创建 EndPoint clientService。

请帮我。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T17:45:39.303

[官方文档](http://camel.apache.org/cxf.html)中有一些不错的例子。

例如这个例子（取自上面的文档）（假设你可以在春天配置它）。

```
<cxf:cxfEndpoint id="serviceEndpoint" address="http://localhost:9000/SoapContext/SoapPort"
        wsdlURL="testutils/hello_world.wsdl"
        serviceClass="org.apache.hello_world_soap_http.Greeter"
        endpointName="s:SoapPort"
        serviceName="s:SOAPService"
        xmlns:s="http://apache.org/hello_world_soap_http" /> 
```

或直接在 DSL 路由中：

```
to("cxf://http://localhost:9000/SoapContext/SoapPort?" +                        
                "serviceClass=org.apache.hello_world_soap_http.Greeter" +
                "&serviceName={http://apache.org/hello_world_soap_http/}SOAPService" +
                "&endpointName={http://apache.org/hello_world_soap_http/}SoapPort" +
                "&wsdlURL=testutils/hello_world.wsdl") 
```

在此配置中替换您的目标 Web 服务设置应该相当简单。不过，您需要为此代码生成 Java 类等。

# objective-c - OS X 正常运行时间历史

> ID：14001213
> 
> 赞同：0
> 
> 时间：2012-12-22T08:19:59.853
> 
> 标签：objective-c, macos, uptime

如何查找 os x 正常运行时间历史记录？终端上有“上次重新启动”命令，它报告上次重新启动历史记录。如何编写具有目标 C 的程序来获取所有正常运行时间历史记录？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T09:06:58.403

该`last`命令是 Darwin 的一部分并且是[开源的](http://www.opensource.apple.com)。[这是代码。](http://www.opensource.apple.com/source/adv_cmds/adv_cmds-149/last/last.c)

# javascript - 如何在 JavaScript 中求两个数字的对数？

> ID：14001214
> 
> 赞同：-1
> 
> 时间：2012-12-22T08:20:03.740
> 
> 标签：javascript, math

基本上跟相反的`Math.pow()`。

我想要一个可以用作对数的函数：

```
var mynum = findpower(36, 6); // 2, because 6 squared is 36 
```

如何构建这样的功能？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-22T08:25:24.753

这是一个[对数](http://en.wikipedia.org/wiki/Logarithm)

```
Math.log(36) / Math.log(6) = 2 
```

一般情况下

```
Math.log(number) / Math.log(base) 
```

对数具有以下性质：如果 a = log(n = number, b = base)（通常表示为 log [b] (n)）则 b ^a = n。在上面的代码中，我使用了对数属性： log [y] (x) = log [c] (x) / log [c] (y) 其中 c 是任何正数。

`Math.log`在上面的例子中是自然对数，即底数 = e 的对数（≈ 2.718281828…，参见 Math.E）。显然，如果我们有自然对数（通常表示为 ln(n) 或 log(n)），那么我们可以通过上面给出的等式得到任何其他底的对数：log [y] (x) = log(x) / log (y)

# python - 使用 Node.js/python 的 Producer/Consumer + Worker 架构

> ID：14001216
> 
> 赞同：1
> 
> 时间：2012-12-22T08:20:17.770
> 
> 标签：python, node.js, express, ipc

我们有 2 个组件 1 个生产者/消费者，2 个流程

Producer/Consumer 是 i/o 激励，除了接受 web 请求并根据输入参数进入 mongodb 之外别无他法。

进程是单独的进程（在 python 中），它处理来自 mongodb 的数据并对它们进行分组（配对）。

这种配对可能需要很少的时间，一旦配对完成，我们想通知节点对于给定的连接，“处理完成”，因此节点可以将数据发送回客户端。

我不确定“如何通知 Node 的连接该过程已完成，这是输出。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T08:38:04.467

我会使用 RabbitMQ 甚至 ZeroMQ 之类的消息传递服务来通知或让 Node.JS 进程轮询此通知。

因此，Python 进程将执行它的处理，然后它会发送一条消息，Node.JS 进程将从那里读取此消息，然后知道它可以完成它的工作并处理 MongoDB 中的数据。

# java - 如何使用 Jsoup 将嵌套的 Div 解析为表结构

> ID：14001217
> 
> 赞同：0
> 
> 时间：2012-12-22T08:20:19.847
> 
> 标签：java, jsoup, html

我有这样的div结构

```
<div class="DivClass-1"> Div One 
    <div class="DivClass-A"> Div A  </div>
 </div>
    <div class="DivClass-2"> Div Two
    <div class="DivClass-A"> Div B   </div>
 </div>

    <div class="DivClass-3"> Div Three
    <div class="DivClass-A"> Div C   </div>
 </div>
    <div class="DivClass-4"> Div Four 
    <div class="DivClass-A"> Div D   </div>
 </div> 
```

我想解析它并将这个 div 结构转换为表结构，任何人都可以给出一个想法如何实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T05:16:35.113

使用 replaceall() 替换所有 div 标签

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-21T04:23:29.830

我不清楚`<div>`您要转换为哪个标签`<tr>`并进行`<td>`标记。

但是，我假设 DivClass-1、DivClass-2、DivClass-3、DivClass-4 转换为`<tr>`标签。其他的则转换为`<td>`标签。
我希望下面的代码能给你一点想法。

```
StringBuffer myHTML = new StringBuffer();
myHTML.append("<div class=\"DivClass-1\"> Div One <div class=\"DivClass-A\"> Div A  </div> </div>" +
                "<div class=\"DivClass-2\"> Div Two<div class=\"DivClass-A\"> Div B   </div></div>" +
                "<div class=\"DivClass-3\"> Div Three<div class=\"DivClass-A\"> Div C   </div></div>" +
                "<div class=\"DivClass-4\"> Div Four <div class=\"DivClass-A\"> Div D   </div></div>");

Document myDoc = Jsoup.parse(myHTML.toString());
//get DivClass-1, DivClass-2, etc. 
Elements DivClass = myDoc.select("div").not("div.DivClass-A");
Elements DivClass_A = myDoc.select("div.DivClass-A");

//rename the tag <div class="DivClass-1"> to <tr class="DivClass-1">
DivClass.tagName("tr");
//renamed the tag <div class="DivClass-A"> to <td class="DivClass-A">
DivClass_A.tagName("td");
System.out.println(myDoc.toString()); 
```

这是打印输出-

```
<tr class="DivClass-1">
            Div One 
     <td class="DivClass-A"> Div A </td> 
</tr>
<tr class="DivClass-2">
            Div Two
    <td class="DivClass-A"> Div B </td>
</tr>
 <tr class="DivClass-3">
            Div Three
     <td class="DivClass-A"> Div C </td>
 </tr>
 <tr class="DivClass-4">
            Div Four 
     <td class="DivClass-A"> Div D </td>
 </tr> 
```

# css - 最上面的“固定”位置 div 与非位置 div 一起移动

> ID：14001219
> 
> 赞同：2
> 
> 时间：2012-12-22T08:20:22.407
> 
> 标签：css, html, css-position

考虑以下代码：

```
div {
    width:100%;
    height:64px;
    border:1px solid #000;
}

.top-fixed {
    position:fixed;
}

.middle-fixed {
    position:fixed;
    top:64px;
}

.bottom {
    margin-top:128px; #64+64
}
```

```
<html>
    <head></head>
    <body>
        <div class="top-fixed">Top Fixed</div>
        <div class="middle-fixed">Middle Fixed</div>
        <div class="bottom">Bottom</div>
    </body>
</html>
```

对于 div.bottom，我使用了 margin-top 属性，这样它就不会与最顶层的 div 重叠。但它本身也带来了 div.top-fixed 的“向下”（参见小提琴）。

我该如何纠正它？一种方法可能是使用 div.bottom 的 padding-top 属性而不是 margin-top，但这听起来并不优雅。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T08:24:25.727

您错过了顶部固定 div 中的前 0 名。

尝试这个

```
.top-fixed {
  position:fixed;
  top:0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T08:23:27.423

将 .bottom 元素的 CSS 更改为：

```
.bottom {
    position:relative;
    top:128px; #64+64
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T08:31:09.950

添加`top:0;`到您的 .top-fixed 类。

# django - 使用带有 django-crispy 和 formset 的模型实例

> ID：14001221
> 
> 赞同：0
> 
> 时间：2012-12-22T08:20:42.367
> 
> 标签：django, django-crispy-forms

我有一个使用 django-crispy 渲染的 modelform_formset。在使用的表单布局内，我有以下内容：

```
self.helper.layout = Layout(
    Field('remove', css_class="inline"),
    HTML('{{ form.instance.user.get_full_name|title }} ({{ form.instance.user }})'),
    Field('is_admin')
) 
```

请注意`{{form.instance}}`- 这没有得到正确绑定。有没有办法获得特定模型的价值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-26T23:17:33.930

I would recommend you do this. This captures the case where you don't have an instance :D

```
class XYXForm(forms.ModelForm):
    def __init__(self, *args, **kwargs):
        super(XYXForm, self).__init__(*args, **kwargs)
        label = "New Object"
        if self.instance:
            label = '{0} {1}'.format(
                self.instance.user.get_full_name.capitalize(), 
                self.instance.user)
        self.helper = FormHelper()
        self.helper.form_id = 'community_form'
        self.helper.form_method = 'post'
        self.helper.layout = Layout(
            Field('remove', css_class="inline"),
            HTML(label),
            Field('is_admin')
        ) 
```

HTH

# android - 适用于 Android 的自定义 Tabwiget

> ID：14001222
> 
> 赞同：0
> 
> 时间：2012-12-22T08:20:46.820
> 
> 标签：android, tabs

我设计了一个用于选项卡（自定义全局活动）的活动，此活动有不同的按钮，如选项卡和单击按钮调用相应的活动，所以如果我调用 A（假设）活动，然后调用 B（假设）活动并返回 A，在这种情况下，再次创建活动。我希望此活动的行为应该像`tabwidget`并从 开始`onResume()`。这是否可能，如果是，那么请如何建议我。`Thanks`

**全局选项卡布局**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#1a1a1a"
    android:gravity="center_vertical"
    android:orientation="horizontal"
    android:weightSum="100" >

    <ImageView
        android:id="@+id/liveTV"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="20"
        android:padding="5dp"
        android:src="@drawable/tab_livetv_selector" />

    <ImageView
        android:id="@+id/movies"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="20"
        android:padding="5dp"
        android:src="@drawable/tab_movie_selector" />

    <ImageView
        android:id="@+id/vod"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="20"
        android:padding="5dp"
        android:src="@drawable/tab_vod_selector" />

    <ImageView
        android:id="@+id/events"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="20"
        android:padding="5dp"
        android:src="@drawable/tab_event_selector" />

    <ImageView
        android:id="@+id/playlist"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="20"
        android:padding="5dp"
        android:src="@drawable/tab_playlist_selector" />

</LinearLayout> 
```

**全局选项卡的 Java 代码**

```
public class Header extends LinearLayout implements OnClickListener {
    private Context mContext;
    private ImageView liveTV;
    private ImageView movies;
    private ImageView vod;
    private ImageView events;
    private ImageView playlist;
    public static String tab = null;
    public static boolean destroy = false;

    public Header(Context context, AttributeSet attrs) {
        super(context, attrs);

        mContext = context;

        String infService = Context.LAYOUT_INFLATER_SERVICE;
        LayoutInflater li;

        li = (LayoutInflater) getContext().getSystemService(infService);
        li.inflate(R.layout.header, this, true);
        liveTV = (ImageView) findViewById(R.id.liveTV);
        movies = (ImageView) findViewById(R.id.movies);
        vod = (ImageView) findViewById(R.id.vod);
        events = (ImageView) findViewById(R.id.events);
        playlist = (ImageView) findViewById(R.id.playlist);
        liveTV.setOnClickListener(this);
        movies.setOnClickListener(this);
        vod.setOnClickListener(this);
        events.setOnClickListener(this);
        playlist.setOnClickListener(this);
    }

    public void init() {
        // setting selector for selected tab
        if (tab.equals("movies")) {
            destroy = true;
            movies.setSelected(true);
            liveTV.setSelected(false);
            vod.setSelected(false);
            events.setSelected(false);
            playlist.setSelected(false);
        } else if (tab.equals("vod")) {
            destroy = true;
            vod.setSelected(true);
            liveTV.setSelected(false);
            movies.setSelected(false);
            events.setSelected(false);
            playlist.setSelected(false);
        } else if (tab.equals("events")) {
            destroy = true;
            events.setSelected(true);
            liveTV.setSelected(false);
            movies.setSelected(false);
            vod.setSelected(false);
            playlist.setSelected(false);
        } else if (tab.equals("playlist")) {
            destroy = true;
            playlist.setSelected(true);
            liveTV.setSelected(false);
            movies.setSelected(false);
            vod.setSelected(false);
            events.setSelected(false);
        } else {
            destroy = true;
            liveTV.setSelected(true);
            movies.setSelected(false);
            vod.setSelected(false);
            events.setSelected(false);
            playlist.setSelected(false);
        }
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        switch (v.getId()) {
        //have to put here code for click
        }
    }

} 
```

然后只需要像另一个视图一样将以下代码放在 xml 中

```
<com.media.ui.Header
            android:id="@+id/layoutHeader"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:gravity="bottom" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T08:57:16.813

如果你想在你的应用程序中引入标签的使用，那么最好的方法，IMO，是[`FragmentTabHost`](http://developer.android.com/reference/android/support/v4/app/FragmentTabHost.html)从支持库中使用，因为该标准[`TabActivity`](http://developer.android.com/reference/android/app/TabActivity.html)已被弃用。

还有一个例子展示了如何使用这个组件，它位于里面`<your_sdk_folder_location>/extras/android/support/samples/Support4Demos`。

这个标准组件允许您根据需要自定义标签，而不是发明自行车。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T08:53:14.463

请编写以下代码而不是您的代码以在一个 TabActivity 中添加多个活动，它将解决您的问题。

ActivityStack.java

```
private Stack<String> stack;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    if (stack == null)
        stack = new Stack<String>();
    // start default activity
    push("FirstStackActivity", new Intent(this, Tab_SampleActivity.class));
}

@Override
public void finishFromChild(Activity child) {
    pop();
}

@Override
public void onBackPressed() {
    pop();
}

public void push(String id, Intent intent) {
    Window window = getLocalActivityManager().startActivity(id, intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));
    if (window != null) {
        stack.push(id);
        setContentView(window.getDecorView());
    }
}

public void pop() {
    if (stack.size() == 1)
        finish();
    LocalActivityManager manager = getLocalActivityManager();
    manager.destroyActivity(stack.pop(), true);
    if (stack.size() > 0) {
        Intent lastIntent = manager.getActivity(stack.peek()).getIntent();
        Window newWindow = manager.startActivity(stack.peek(), lastIntent);
        setContentView(newWindow.getDecorView());
    }
} 
```

TabActivity.java

```
public class TabActivity extends TabActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tab_screen);
        TabHost tabHost = getTabHost();
        Intent intent = new Intent().setClass(this, ActivityStack.class);
        TabHost.TabSpec spec = tabHost.newTabSpec("tabId").setIndicator("Temp", getResources().getDrawable(R.drawable.home));
        spec.setContent(intent);

        tabHost.addTab(spec);

        Intent intent1 = new Intent().setClass(this, ActivityStack.class);
        TabHost.TabSpec spec1 = tabHost.newTabSpec("tabId").setIndicator("Temp", getResources().getDrawable(R.drawable.invoice));
        spec1.setContent(intent1);
        tabHost.addTab(spec1);

        tabHost.setCurrentTab(0);
    }
} 
```

第一活动.java

```
public class FirstActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        TextView textView = new TextView(this);
        textView.setText("Tab Sample Activity ");
        textView.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                Intent intent = new Intent();
                intent.setClass(getParent(), SecondActivity.class);
                ActivityStack activityStack = (ActivityStack) getParent();
                activityStack.push("SecondActivity", intent);
            }
        });
        setContentView(textView);
    }
} 
```

SecondActivity.java

```
public class SecondActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        TextView textView = new TextView(this);
        textView.setText("First Stack Activity ");
        textView.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                Intent intent = new Intent();
                intent.setClass(getParent(), ThirdActivity.class);
                ActivityStack activityStack = (ActivityStack) getParent();
                activityStack.push("ThirdActivity", intent);
            }
        });
        setContentView(textView);
    }
} 
```

第三活动.java

```
public class ThirdActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
} 
```

将以下 XML 文件添加到您的 res/layout 文件夹中。

1) tab_screen.xml

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:padding="3dp" >

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_above="@android:id/tabs"
            android:layout_weight="1" />

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true" />
    </RelativeLayout>

</TabHost> 
```

2) main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

</LinearLayout> 
```

AndroidManifest.xml:-

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.android.tabsample"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".FirstActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".TabActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".ActivityStack"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".SecondActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".ThirdActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

有关在一个 TabActivity 下添加多个活动的更多信息，请参阅下面的链接，并附上完整的示例。

[Android - 一个 TabActivity 下的多个 Android 活动](http://androidcodeexamples.blogspot.in/2012/08/multiple-android-activities-in.html)

# performance - 循环遍历此代码的最优化方法是什么？

> ID：14001223
> 
> 赞同：1
> 
> 时间：2012-12-22T08:21:01.370
> 
> 标签：performance, loops, python-2.7, while-loop

股票是一个字典（）：

```
stocks[0]: [u'portfolio1', u'Active']
stocks[1]: [u'portfolio2', u'Active']
stocks[2]: [u'portfolio3', u'Inactive'] 
```

我正在尝试检查投资组合的状态，即股票[0][1]、股票[1][1] 和股票[2][1]，并创建一个仅包含活动投资组合的元素列表。

而且，我正在使用计数器进行迭代，这似乎是一个非常缓慢的过程。循环遍历此代码的最有效方法是什么？

```
a = 0
test = {}
while a <= 500:
    try:
        if stocks[a][1] == 'Active':
            test[a] = stocks[a][0]
            print test[a]
            a +=1
        else:
            pass
            a +=1
    except KeyError:
        break

test = list(test.values())
test = str(','.join(test)).split(',') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T09:42:35.233

您可以尝试的一件事是不使用计数器，而是遍历字典值本身，只返回状态为`Active`. 当您发现自己需要检查特定数据结构中的所有项目时，通常最容易迭代结构本身而不是使用计数器（即说`for item in iterable`代替`for x in range(len(iterable)): iterable[x]`）：

```
In [1]: stocks = {
   ...:     0: [u'portfolio1', u'Active'],
   ...:     1: [u'portfolio2', u'Active'],
   ...:     2: [u'portfolio3', u'Inactive']
   ...: }

In [2]: actives = [x[0] for x in stocks.itervalues() if x[1] == 'Active']

In [3]: actives
Out[3]: [u'portfolio1', u'portfolio2'] 
```

`actives`在这个原因是使用[列表](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)推导生成的，该列表推导遍历`stocks`字典的值并仅返回那些`x[1]`（在您的情况下为状态）等于的值`Active`。

# html - 浏览器编码 URL 的行为是什么？

> ID：14001224
> 
> 赞同：1
> 
> 时间：2012-12-22T08:21:02.290
> 
> 标签：html, http, browser, encoding

我正在做一个测试，Firefox 是如何编码字符的。

但事实让我很困惑。

HTML 代码：

```
<html lang="zh_CN">
<head>
<title>some Chinese character</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<img src="http://localhost/xxx" />
</body> 
```

xxx是一些汉字。这些字符必须编码为 %xx 之类的格式才能通过 HTTP 传输。

首先，我将**源文件**编码为UTF-8。使用firefox打开html文件。img 标签会发送一个请求，“xxx”字符是 UTF8 编码的。

*   （*用UTF8编码HTML源文件，charset=utf8*，浏览器用UTF编码URL）

我将元数据更改为 `<meta http-equiv="Content-Type" content="text/html; charset=gbk">` 但没有任何改变。

*   （*HTML 源文件用 UTF8 编码，charset=gbk*，浏览器用 UTF 编码 URL）

其次，我将**源文件保存在 ANSI 中**，可能是 GBK 或 GB2312。

当 charset=gbk 时，仍然使用 UTF8 对字符进行编码。

*   （*用GBK编码HTML源文件，charset=gbk*，浏览器用UTF编码URL）

但是，当 charset=utf8 时，字符由 GBK 编码。顺便说一句，其他汉字不能正确显示，例如标题中的字符串。

*   （*HTML源文件用GBK编码，charset=utf8*，浏览器用GBK编码URL）

如何控制浏览器的编码行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T08:33:03.043

UTF-8 是URL 编码[的标准](https://www.rfc-editor.org/rfc/rfc3986)。如果您在 GBK 中对源文件进行物理编码，但`utf-8`在 content-type 中使用，您只是在对浏览器撒谎，并且会得到不一致或无效的结果。

> 当一个新的 URI 方案定义了一个表示由通用字符集 [UCS] 中的字符组成的文本数据的组件时，数据应首先根据 UTF-8 字符编码 [STD63] 编码为八位字节；那么只有那些与未保留集中的字符不对应的八位字节应该进行百分比编码。例如，字符 A 将表示为“A”，字符 LATIN CAPITAL LETTER A WITH GRAVE 将表示为“%C3%80”，字符 KATAKANA LETTER A 将表示为“%E3%82%A2

# zend-form - 不能在我的项目中使用 $this->form()->***() 助手

> ID：14001225
> 
> 赞同：1
> 
> 时间：2012-12-22T08:21:14.900
> 
> 标签：zend-form, zend-framework2, zend-view

我在 composer.json 中指定了 zend 组件列表

```
"zendframework/zend-xmlrpc": "2.0.*",
"zendframework/zend-config": "2.0.*",
"zendframework/zend-log": "2.0.*",
"zendframework/zend-db": "2.0.*",
"zendframework/zend-inputfilter": "2.0.*",
"zendframework/zend-json": "2.0.*",
"zendframework/zend-form": "2.0.*",
"zendframework/zend-mvc" :  "2.0.*",
"zendframework/zend-session" :  "2.0.*",
"zendframework/zend-view" :  "2.0.*" 
```

但是当我尝试在视图脚本中输出表单时：

```
<?php

   use Zend\Form\Form;
   use Zend\Form\Element;

   $form = new Form();

   $form->setAttribute('action', '/contact/process'); 
   $form->setAttribute('method', 'post');

   $form->prepare();
   echo $this->form()->openTag($form);

   echo $this->form()->closeTag();
   ?> 
```

我得到例外：

```
ServiceNotFoundException: Zend\ServiceManager\ServiceManager::get was unable to fetch or create an instance for form

#in /var/www/projectdir/vendor/zendframework/zend-servicemanager/Zend/ServiceManager/ServiceManager.php line 452
#at ServiceManager->get('form', true) in /var/www/projectdir/vendor/zendframework/zend-servicemanager/Zend/ServiceManager/AbstractPluginManager.php line 110
#at AbstractPluginManager->get('form', null) in  /var/www/projectdir/vendor/zendframework/zend-view/Zend/View/Renderer/PhpRenderer.php line 340
#at PhpRenderer->plugin('form') in /var/www/projectdir/vendor/zendframework/zend-view/Zend/View/Renderer/PhpRenderer.php line 359
#at PhpRenderer->__call('form', array()) in /var/www/projectdir/views/editWorker.phtml line 19
#at PhpRenderer->form() in /var/www/projectdir/views/editWorker.phtml line 19
..... 
```

但是其他视图助手，例如 $this->htmlList($items) 可以正常工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T16:49:11.387

表单视图助手都位于[`Zend\Form\View\Helper`](https://github.com/zendframework/zf2/tree/master/library/Zend/Form/View/Helper)命名空间中。有一个单独的[配置](https://github.com/zendframework/zf2/blob/master/library/Zend/Form/View/HelperConfig.php)，其中所有表单视图助手都注入到视图助手插件管理器中。

通常这会自动发生。至少，当您需要`"zendframework/zendframework"`而不是所有单独的组件时，这是开箱即用的。在`Zend\Mvc`命名空间中有一个[特殊的工厂](https://github.com/zendframework/zf2/blob/master/library/Zend/Mvc/Service/ViewHelperManagerFactory.php)，可以帮助实例化视图助手的插件管理器。它还尝试从其他组件注入视图助手：`navigation`和`i18n`视图`form`助手。

话虽这么说，有两个选项对您来说出错了：

1.  工厂`class_exists()`调用那些额外的视图助手配置。`Zend\Form\View\HelperConfig`如果由于自动加载问题而无法找到该类，则不会初始化表单视图助手。

2.  工厂甚至没有被调用。如果您使用`Zend\Mvc\Application`这可能是一个错误，请提供有关您的案例的更多信息，以便其他人可以重现它。如果您不使用应用程序，则必须手动连接这些东西。

在后者的情况下，您想自己连接这些东西，实例化助手配置，获取视图助手管理器并注入它：

```
// $renderer is the Zend\View\Renderer\PhpRenderer

$plugins = $renderer->getHelperPluginManager();
$config  = new Zend\Form\View\HelperConfig;
$config->configureServiceManager($plugins); 
```

# apache - htaccess deny from all 获取 apache 服务器测试页

> ID：14001228
> 
> 赞同：4
> 
> 时间：2012-12-22T08:21:34.773
> 
> 标签：apache, .htaccess

我已经安装`zpanel`了`centos 6.3`. 现在有什么问题。

我添加了域`mydomain.com`并添加了空白`index.php`文件。我也添加了`.htaccess`带有“全部拒绝”的文件现在当我在浏览器中打开页面时，我得到了 Apache 2 测试页面`403 Forbidden` 但是如果我打开`http://mydomain.com/index.php`，现在我得到 403 Forbidden。

我试图编辑 apache 配置文件`Directoryindex`，但没有积极的结果。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-09T10:52:56.353

尝试禁用默认的 Apache CentOS 欢迎页面：

```
#
# This configuration file enables the default "Welcome"
# page if there is no default index page present for
# the root URL.  To disable the Welcome page, comment
# out all the lines below.
#
<LocationMatch "^/+$">
    Options -Indexes
    ErrorDocument 403 /error/noindex.html
</LocationMatch> 
```

编辑文件`/etc/httpd/conf.d/welcome.conf`并评论所有内容。只需删除`welcome.conf`文件（或`.conf.disabled`例如重命名它）也应该可以解决问题。

然后，重新加载 apache 配置 ( `service httpd restart`)，一切都应该按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-20T05:39:12.323

同样的问题，当 apache 更新时，文件 welcome.conf 已经创建。我已将其重命名为禁用它，现在我可以看到我的拒绝所有指令的禁止页面

# asp.net - windows/wpf 和 asp.net 模型中的绑定

> ID：14001232
> 
> 赞同：2
> 
> 时间：2012-12-22T08:22:24.107
> 
> 标签：asp.net, wpf, winforms, data-binding

winforms和wpf vs Asp.Net中将数据绑定到DataBound控件略有不同

WPF/Winforms

```
dataBoundControl.DataSource = someDataSource; 
```

网络

```
dataBoundControl.DataSource = someDataSource;
dataBoundControl.DataBind();  //<----- the difference 
```

问题：这两种型号有什么区别，一种需要使用`.DataBind()`，另一种不需要？为什么 winforms/wpf 不需要`.DataBind()`，为什么 Asp.Net 需要它？

谢谢。

# php - 如何使 PHP 只处理从同一服务器提交的变量？

> ID：14001235
> 
> 赞同：0
> 
> 时间：2012-12-22T08:23:08.360
> 
> 标签：php

我有这个案例：

我有一个名为 form.php 的文件，它只包含带有 POST 方法的简单 HTML 表单，并且该表单的“动作”文件总是在不同的文件上，比如说：action.php。所有这些脚本都存储在一个名为 realdomain.com 的域下（只是一个示例）。

今天，我从另一个域（例如：fakedomain.com）创建了一个假表单，然后我输入了这个：`action="http://realdomain.com/action.php"`然后点击提交按钮，realdomain.com 上的 action.php 无法区分它是来自 realdomain.com 还是 fakedomain.com让它就这样过去……

然后我有一个想法，在 action.php 上放置一些“过滤器”，仅在引用的域是 realdomain.com 时处理提交的变量`$_SERVER['HTTP_REFERER']`。

但同样，在某些论坛或博客文章中，这种方法根本不可靠，因为 HTTP_REFERER 也可以伪造。

那么，如何验证这一点呢？我的意思是，如何使 action.php 只处理从同一服务器提交的变量？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T08:30:16.440

你可以在你的表单中实现 CSRF 保护，一个很好的教程： http: [//phpmaster.com/preventing-cross-site-request-forgeries/](http://phpmaster.com/preventing-cross-site-request-forgeries/)

很抱歉简短的回答，但我在 iPhone 上写。

# jquery - 如何在 jQuery 中为单个 id 编写两个类？

> ID：14001237
> 
> 赞同：2
> 
> 时间：2012-12-22T08:23:14.670
> 
> 标签：jquery

我有 ID 为“searchBtn”的按钮。每次单击按钮时，类都应更改。我想在每次点击时旋转预定义数量的类。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T08:31:39.487

你可以试试jquery的[toggleClass](http://api.jquery.com/toggleClass/)函数如下：

```
$(document).ready(function(){
    $('#searchBtn').click(function () {
        $(this).toggleClass('class_x','class_y');
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T08:27:03.177

试试这样的东西：

```
$('#searchBtn').on('click', function () {
    if ($(this).hasClass('classA')) {
        $(this).removeClass('classA').addClass('classB');
    } else {
        $(this).removeClass('classB').addClass('classA');
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T08:26:36.143

```
$('#searchBtn').on('click', function() {
  $(this).removeClass('oldClass');
  $(this).addClass('newClass');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T08:27:55.510

```
var counter = 0;

$("#searchBtn").click(function(){

 $(SELECTOR).removeClass("class"+counter++);
 $(SELECTOR).addClass("class"+counter);

}); 
```

# flash - 将 Flash 网站转换为 html

> ID：14001242
> 
> 赞同：0
> 
> 时间：2012-12-22T08:24:01.713
> 
> 标签：flash

我想将 Flash 网站转换为 HTML。我丢失了 swf 文件，因为其中无法使用 google 和其他工具进行转换。还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T17:15:47.540

有一个相当新的工具也可以处理更高级的 Flash 文件（例如包含 AS2 或 AS3）：[将 Flash 转换为 HTML5，](http://www.pixelplant.com/) 随时查看。我目前在业务建模等领域为团队提供支持。因此，非常感谢任何反馈。

[@ideasenabled](http://www.ideasenabled.com)

# ruby - Ruby正则表达式方法！~

> ID：14001250
> 
> 赞同：2
> 
> 时间：2012-12-22T08:25:07.647
> 
> 标签：ruby, regex, string, rdoc

我不记得我在哪里学到了课堂的`!~`方法。`String`但是我知道它将字符串与正则表达式进行比较并检查字符串是否与正则表达式不匹配。请参阅下面的示例。

```
C:\>irb
irb(main):001:0> "abba" =~ /(\w)(\w)\2\1/i
=> 0
irb(main):002:0> "xxxx" =~ /(\w)(\w)\2\1/i
=> 0
irb(main):003:0> "asdf" =~ /(\w)(\w)\2\1/i
=> nil
irb(main):004:0> "asdf" !~ /(\w)(\w)\2\1/i
=> true
irb(main):005:0> "asdf" !~ /asdf/i
=> false
irb(main):006:0> 
```

`String`我想找到该方法的更多信息，但在和的 rdoc 中都找不到`Regexp`。任何人都可以提供一些帮助吗？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-22T08:32:52.683

由于这是您可以在“方法”过滤器中找到它的方法[。](http://ruby-doc.org/core-1.9.3/)我找到[了这个](http://ruby-doc.org/core-1.9.3/Object.html#method-i-21-7E)描述。

> **obj !~ 其他 → 真或假**
> 
> 如果两个对象不匹配（使用 =~ 方法），则返回 true，否则返回 false。

# python - python将行写入文件避免文件末尾的换行符

> ID：14001259
> 
> 赞同：-1
> 
> 时间：2012-12-22T08:26:52.633
> 
> 标签：python, text

我在windows下用python处理文本文件，源文件的一些内容是这样的：

* * *

```
FSZHB1  04  2012-11-24  1346    S000009106  BC14D01137      0   788 0   0   0   788 
FSZHB1  04  2012-11-24  1425    S000009107  BC14D01587      0   1088    0   0   0   1088    
FSZHB1  04  2012-11-24  1425    S000009107  BC14D99998      0   -8468   0   0   0   -8468   
FSZHB1  04  2012-11-24  1425    S000009107  BC14D02045      0   3690    0   0   0   3690    
FSZHB1  04  2012-11-24  1425    S000009107  BC14D02087      0   3690    0   0   0   3690    
FSZHB1  04  2012-11-24  1702    S000009108  BC14D01900      0   1690    0   0   0   1690    
FSZHB1  04  2012-11-24  1702    S000009108  BC14D02106      0   4690    0   0   0   4690    

FSZHB1  04  2012-11-24  1702    S000009108  BC14D00653      0   1680    0   0   0   1680    
FSZHB1  04  2012-11-24  1702    S000009108  BC14D99996      0   -10000  0   0   0   -10000  
FSZHB1  04  2012-11-24  1702    S000009108  BC14D99996      0   10000   0   0   0   10000   

FSZHB1  04  2012-11-24  1702    S000009108  BC14D01601      0   228 0   0   0   228 
FSZHB1  04  2012-11-24  1702    S000009108  BC14D99998      0   -5968   0   0   0   -5968   
FSZHB1  04  2012-11-24  1702    S000009108  BC14D02046      0   3990    0   0   0   3990    
FSZHB1  04  2012-11-24  1702    S000009108  BC14D02045      0   3690    0   0   0   3690    

FSZHB1  04  2012-11-24  2041    S000009109  BC14D01721      0   1183    0   0   0   1183    
FSZHB1  04  2012-11-24  2041    S000009109  BC14D01892      0   903 0   0   0   903 
FSZHB1  04  2012-11-24  2121    S000009110  BC14D02114      0   16900   0   0   0   16900   
FSZHB1  04  2012-11-24  2121    S000009110  BC14D01898      0   256 0   0   0   256 
FSZHB1  04  2012-11-24  2121    S000009110  BC14D99998      0   -7284   0   0   0   -7284   

FSZHB1  04  2012-11-24  2121    S000009110  BC14D99997      0   5000    0   0   0   5000    
FSZHB1  04  2012-11-24  2121    S000009110  BC14D99996      0   -10000  0   0   0   -10000  
FSZHB1  04  2012-11-24  2121    S000009110  BC14D01652      0   128 0   0   0   128 
```

我将使用 python 代码删除所有空行：

* * *

```
def rem_blanklines(fings = None,c_path =None):
    if os.path.isfile(fings):
        tf = tempfile.NamedTemporaryFile(dir = c_path,delete = False)
        blank_p = re.compile('\S')
        with tf,open(fings) as f_obj:
            for fl in f_obj:
                if blank_p.match(fl):
                    fl = (fl.strip() + '\r\n').encode('UTF-8')
                    tf.write(fl)
        bakfile = fings + '.bak'
        os.rename(fings,bakfile)
        os.rename(tf.name,fings)
        os.remove(bakfile)

for x in os.listdir(wkd):
    xx = os.path.join(wkd,x)
    if os.path.isfile(xx):
        rem_blanklines(fings = xx,c_path = wkd) 
```

我的问题是：

1.  已处理文件末尾有一个换行符，我该如何避免它？
2.  我还想删除这样的行：
    *   第五列相等
    *   和第八列的和等于0

多谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T09:05:23.457

您可以通过“.rstrip()”消除句子末尾的“换行”条目。网上有很多关于此类字符串处理工具的教程。“tutorialspoint.com”可以是一个好的开始。

如果您熟悉 linux 并且能够将您的代码与 shell 脚本集成，那么您可以使用内置的正则表达式工具“sed”进行字符串检测，使用“awk”轻松处理列。

如果你不是，我建议你熟悉它，如果在你的工作中使用 windows 没有什么特别的。在文本处理中，shell 和 python 的混合使用产生了相当大的优势。

# ios - Interface Builder 中的一系列 Push Segues

> ID：14001261
> 
> 赞同：1
> 
> 时间：2012-12-22T08:27:12.110
> 
> 标签：ios, uinavigationcontroller, uistoryboardsegue

我有一个序列`UIViewControllers`。应用程序中的初始视图是`UINavigationController`a`UIViewController`作为 rootviewcontroller。

每个视图控制器都有推送序列，如下所示：

```
UINV ----> RVC --Push1--> VC1 --Push2--> VC2 --Push3--> VC3 
```

其中 UINV 是`UINavigationController`， RVC 是`RootViewController`， VC1,2,3 是`UIViewControllers`。

Push1 Segue 工作得很好。Push2 Segue 给了我一个 EXC_BAD_ACCESS。

任何线索这里有什么问题？我需要这个序列，这样我就可以使用 UINavigationItem 按钮（返回和下一步）在页面之间来回切换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T09:19:40.277

没关系。我解决了这个问题。EXC_BAD_ACCESS 是由另一个问题引起的。

发生的事情是我在 VC2 中有一个容器视图。故事板中的嵌入 segue 不小心指向了它自己，而不是另一个要作为子视图控制器嵌入的视图控制器。这是导致崩溃的原因。

我会把它留在这里，以防有人发现问题。

不要乱用故事板中的嵌入 segue 链接。

# shopify - 应用充电和测试模式

> ID：14001266
> 
> 赞同：0
> 
> 时间：2012-12-22T08:27:55.483
> 
> 标签：shopify

如果我在测试期间在我的 Shopify 应用中为（定期）收费启用测试模式

```
charge = ShopifyAPI::RecurringApplicationCharge.create(:name => 'myplan', 
  :price => 4.99, :return_url => 'http://yourapp.com/charges/confirm',
  :test => true) 
```

当应用程序退出测试版时，我该怎么办？我可以只更新现有的（经常性）费用，还是必须创建新的（经常性）费用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T17:16:20.707

您应该取消测试费用并创建一个新费用。您需要将店主重定向到新的收费确认网址，因为他们需要接受新的收费。据我所知，未经店主许可，不能更改收费，除非取消收费。

# php - 注销脚本上的语法错误？

> ID：14001273
> 
> 赞同：-1
> 
> 时间：2012-12-22T08:30:08.490
> 
> 标签：php, mysql, logout

我的注销脚本有问题。它工作正常，如果用户按下注销它会终止会话并转到 logout.php，用户被告知他们已被注销。

但是当浏览器缓存被清空或者网站不应该连接到互联网并且如果用户单击注销按钮时，它会出现以下错误消息：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 1 
```

它失败了，因为它无法将注销设置为“1”，所以我想知道如何将 else 语句放在某个地方说重定向到 logout.php，这样我就不会收到那个可怕的语法错误消息。

这是我的代码：

```
<?php   
ob_start();
    require('includes/_config/connection.php');
    require('includes/functions.php');  
?>

<?php
session_start();

$result = mysql_query("UPDATE ptb_users SET user_online='Offline' WHERE id=".$_SESSION['user_id']."") 
or die(mysql_error()); 
?>

<?php
    // Four steps to closing a session
    // (i.e. logging out)

    // 1\. Find the session

    // 2\. Unset all the session variables
    $_SESSION = array();

    // 3\. Destroy the session cookie
    if(isset($_COOKIE[session_name()])) {
        setcookie(session_name(), '', time()-42000, '/');
    }

    // 4\. Destroy the session
    session_destroy();

    redirect_to("login.php?logout=1");

    ob_end_flush()
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T08:32:36.350

你有双引号，你应该使用单引号

改变这个：

```
$result = mysql_query("UPDATE ptb_users SET user_online='Offline' WHERE id=".$_SESSION['user_id']."") 
```

至：

```
$result = mysql_query("UPDATE ptb_users SET user_online='Offline' WHERE id='" . $_SESSION['user_id'] . "'") 
```

**请注意**您应该替换所有`mysql_*`功能。由于`PHP 5.5.0`它们已被弃用。使用[PDO](http://php.net/manual/en/book.pdo.php)或[MySQLi 之类的东西](http://php.net/manual/en/book.mysqli.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T08:37:18.137

是的，您的引号有问题：只要 user_id 是整数值，您就可以这样做：

```
$result = mysql_query("UPDATE ptb_users SET user_online='Offline' WHERE id=".$_SESSION['user_id']); 
```

如果是字符串，请切换到单引号：

```
$result = mysql_query('UPDATE ptb_users SET user_online="Offline" WHERE id="'.$_SESSION['user_id'].'"'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T08:39:21.067

发送输出后您不能调用 session_start() - 您需要输出任何内容吗？

还要确保 $_SESSION['user_id'] 实际上有一个值；`print_r($_SESSION)`

# c++ - 在 C++ 中使用 Qt 代码

> ID：14001276
> 
> 赞同：-1
> 
> 时间：2012-12-22T08:30:18.547
> 
> 标签：c++, .net, visual-studio, qt

我在 Qt Creator 中有一些可以正常工作的代码。我需要使用此代码，但在 .net 框架中的 win32 应用程序中。有谁知道我该怎么做？我对 Qt 完全陌生，不知道如何在 c++ 项目中使用这些有用的代码？

我提前感谢任何帮助

我想我无法传达我的信息。Qt 是 c++，但它与我们在 .net 框架中使用的原生 c++ 应用程序存在一些差异。所以我不能只复制项目中的所有代码来正确运行它。我们可以制作一个 dll 或库来在.net 中使用这个 qt 代码吗？我该怎么做？

我真的需要帮助。非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T17:08:06.323

对于几乎所有情况，您都不想在同一个应用程序中混合使用 .net 和 Qt。只需采用逻辑并将其重写为 .net（托管 C++ 或 C#），工作量就会减少。

下一个最佳选择可能是保持部件分开并让它们通过某种 IPC 机制进行通信。

这是因为任何重要的 Qt 代码都依赖于它自己的事件循环，所以让现有的 Qt 代码与其他事件循环很好地配合总是一件麻烦事，并且试图让它在实际应用程序托管时很好地运行 .net 代码。 .. 不，只是不，除非你有非常令人信服的理由，是 Qt 和 .net 方面的专家，并且有额外的时间让它正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T08:45:19.267

我不确定您是否不知道如何下载和安装 Qt 或如何在 Visual Studio IDE 中创建 Qt 项目。试试这个[安装指南](http://portfolio.delinkx.com/files/Qt.pdf)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T09:26:25.727

您想将 Qt 库链接到您的 win32 c++ 应用程序吗？我认为您应该首先使用您的 win32 编译器构建 qt 源代码。我认为您可以包含 qt 标头，然后将该库作为普通的 win32 库链接到您的应用程序。

# algorithm - 为什么平滑排序不更常见？

> ID：14001278
> 
> 赞同：44
> 
> 时间：2012-12-22T08:30:38.410
> 
> 标签：algorithm, sorting, timsort, smoothsort

从维基百科上阅读[这篇](http://en.wikipedia.org/wiki/Sorting_algorithm)关于排序算法的文章，smoothsort 似乎是最好的排序算法。它在所有类别中都具有最佳性能：最佳、平均和最差。在任何类别中都没有什么能比得上它。它还具有恒定的内存要求。唯一的缺点是不稳定。

它在内存方面胜过 timsort，在最坏情况下的性能和内存方面都胜过 quicksort。

但我从来没有听说过smoothsort。没有人提到它，而且大多数讨论似乎都围绕着其他排序算法。

这是为什么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-22T09:22:08.047

Big-O 性能非常适合发表论文，但在现实世界中，我们也必须查看常量。长期以来，快速排序一直是不稳定、就地、内存中排序的首选算法，因为我们可以非常有效地实现它的内部循环，并且它对缓存非常友好。即使您可以像快速排序一样高效或几乎同样高效地实现平滑排序的内循环，您也可能会发现它的缓存未命中率使其变慢。

我们通过花更多的精力选择好的支点（以减少病理病例的数量）和检测病理病例来减轻快速排序的最坏情况性能。查找[introsort](http://en.wikipedia.org/wiki/Introsort)。Introsort 首先运行快速排序，但如果检测到过度递归（这表明快速排序的病态情况），则切换到堆排序。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-22T09:14:32.147

更好的渐近并不意味着更好的性能（尽管通常结果如此）。隐藏常数可能大几倍，导致在*相对较小的数组（实际上，**相对*较小的数组可能是任意大小，10 ^(100)，对于例子。那是渐近分析）。但我对平滑排序隐藏常量一无所知。

 *例如，[有](http://en.wikipedia.org/wiki/Selection_algorithm#Linear_general_selection_algorithm_-_Median_of_Medians_algorithm)一个 O(n) 最坏情况时间算法来查找 k 阶统计量，但它非常复杂，以至于 O(n log n) 最坏情况版本在大多数情况下都优于它。

此外，还有一个有趣的[比较](http://www.altdevblogaday.com/2012/06/15/smoothsort-vs-timsort/)：

> …如您所见，Timsort 和 Smoothsort 都没有切芥末。Smoothsort 在所有情况下都比 STL 排序差（即使将 std:bitset 替换为原始位操作）......</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T08:36:20.933

好吧，首先我要说的是，它不像 Smoothsort 没有名气。这取决于用户的需要，也取决于用户是否使用它。

平滑排序的优点是，如果输入已经排序到某种程度，它会更接近 O(n) 时间，而不管初始排序状态如何，堆排序平均 O(n log n)。

从[文档](http://en.wikipedia.org/wiki/Smoothsort)中： -

> 平滑排序算法需要能够在内存中保存字符串中所有堆的大小。由于所有这些值都是不同的，因此通常使用位向量来完成。此外，由于序列中最多有 O(log n) 个数，因此这些位可以用 O(1) 个机器字编码，假设是跨二分机器模型。*

# javascript - 如何在倒数第二条记录处停止 JS 循环？（xml数据）

> ID：14001287
> 
> 赞同：0
> 
> 时间：2012-12-22T08:31:47.647
> 
> 标签：javascript, xml, loops

我有以下代码来循环遍历少量 XML 记录，我希望它执行以下操作，但在最后一条记录上不包括最后的管道。

我是一个热心的新手，所以欢迎所有的评论。谢谢你。

```
xmlMan=loadXMLDoc("myxmlurl.xml");
y=xmlMan.getElementsByTagName("manager");

for(j=0;j<y.length;j++)
{
groupname=y[j].getAttribute("name");
flair=y[j].getAttribute("flair");
color=y[j].getAttribute("colour");

document.write("<a href=\"#" + groupname + "\">" + flair + "<\/a> |");

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T08:41:03.953

将结束的“a”标签替换为：

```
"<\/a>" + ((j == y.length-1) ? "" : " |")); 
```

这是一个条件运算符，它是一个三元运算符（if else）

# python - 为什么 Python 中的这个字典只存储最后一个输入？

> ID：14001289
> 
> 赞同：0
> 
> 时间：2012-12-22T08:32:21.120
> 
> 标签：python, dictionary

```
while (lines < travels + 1):
    data = lines + 1
    startFrom = raw_input ('The package travels from: ')
    startFrom = str(startFrom)
    arriveIn = raw_input ('The package arrives to: ')
    arriveIn = str(arriveIn)
    pack = raw_input('Number of packages: ')
    pack = int(pack)
    print startFrom, '--->', arriveTo, ': ', pack
    capacity = {}
    if capacity.has_key(startFrom):
        capacity[startFrom] = capacity[startFrom] + pack
    else:
        capacity[startFrom] = pack
print capacity 
```

最后，它只打印（并且只存储）给定的最后一个输入，并且不会增加值或将新数据添加到字典中。我也尝试过 defaultdic 但结果是一样的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T08:34:35.667

您通过循环将每次迭代重置`capacity`为空。`dict`

```
capacity = {} #Create it before the loop and use this through out the below loop.
while (lines < travels + 1):
 data = lines + 1
 startFrom = raw_input ('The package travels from: ')
 startFrom = str(startFrom)
 arriveIn = raw_input ('The package arrives to: ')
 arriveIn = str(arriveIn)
 pack = raw_input('Number of packages: ')
 pack = int(pack)
 print startFrom, '--->', arriveTo, ': ', pack
 if startFrom in capacity:#Style change and more pythonic
  capacity[startFrom] = capacity[startFrom] + pack
 else:
  capacity[startFrom] = pack
print capacity 
```

那应该解决它。

# c# - 使用c#从mvc3中的控制器下载自动生成的pdf文件

> ID：14001290
> 
> 赞同：0
> 
> 时间：2012-12-22T08:32:29.443
> 
> 标签：c#, asp.net-mvc-3

我在从控制器下载自动生成的 pdf 文件时遇到问题。

我创建了一个 pdf 文件，我希望它通过浏览器下载。

我的代码如下 -

```
 [pdf.IAMEViewPdf(this, null, "Voluntaryletter_pdf", Equiplist);] 
```

这里我生成一个pdf，现在我想在浏览器中下载它。

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T10:25:40.110

When you have dynamically generated your PDF file, you probably have it in a byte array. Then just write (in the MVC controller):

```
byte[] pdfFile = ...;
return File(buffer, "application/pdf", "Voluntaryletter.pdf"); 
```

# javascript - JavaScript / jQuery 不在元素上

> ID：14001293
> 
> 赞同：0
> 
> 时间：2012-12-22T08:32:39.313
> 
> 标签：javascript, jquery

我如何为一个元素创建一个动作，当用户不在它上面时它会改变。`mouseover`并且`mouseleave`不能在这种情况下应用，因为元素在页面加载时被激活并且鼠标位置可以在元素之外。

这是条件：

```
if mouse is not over element:
   close element
else:
   do nothing 
```

所以我想知道的是，如果当前鼠标位置不在特定元素上，我如何使用 jQuery/JavaScript 检查。

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T08:51:06.823

您可以将事件处理程序绑定到正文并检查请求的目标：

```
$().ready(function() {
    $("body").on('mouseover',function(event) {
        if($(event.target).attr('id') === 'yourid' ) {
            console.log('do close this element');
        } else {
            console.log('do nothing');
        }
    }); 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T08:39:55.473

我会使用全局布尔值来跟踪鼠标当前是否悬停在元素上。然后，您可以定期检查该布尔值使用`setInterval`（具有一些合理的时间间隔），这将决定是否应该隐藏元素。

```
var mouseIsOver = false;

$('#elementId').hover(
  function () {
    mouseIsOver = true;
  }, 
  function () {
    mouseIsOver = false;
  }
);

setInterval(function() {
  if (mouseIsOver == false) {
    $('#elementId').fadeOut();
  }
}, 250); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T09:01:47.560

有一个出色的 jQuery 插件可以解决这个问题。它被称为 jQuery 外部事件。

在此处查看主页：http: [//benalman.com/code/projects/jquery-outside-events/docs/files/jquery-ba-outside-events-js.html](http://benalman.com/code/projects/jquery-outside-events/docs/files/jquery-ba-outside-events-js.html)

用法非常简单直接。我会推荐这个，之前有丰富的经验。

# c++ - 关于windows窗体中多线程和后台工作线程的一些问题

> ID：14001298
> 
> 赞同：2
> 
> 时间：2012-12-22T08:33:31.043
> 
> 标签：c++, winforms, multithreading, c++-cli, backgroundworker

我遇到了使用 C++ 在我的 Windows 窗体 GUI 应用程序中使用多线程的需要。从我对该主题的研究来看，后台工作线程似乎是我的目标。根据我的示例代码

```
System::Void backgroundWorker1_DoWork(System::Object^ sender, System::ComponentModel::DoWorkEventArgs^ e) 
{
    BackgroundWorker^ worker = dynamic_cast<BackgroundWorker^>(sender);
    e->Result = SomeCPUHungryFunction( safe_cast<Int32>(e->Argument), worker, e );
} 
```

但是，我需要弄清楚一些事情并弄清楚

*   后台工作线程会让我的多线程生活更轻松吗？
*   为什么我需要 e->Result？
*   传递给 backgroundWorker1_DoWork 函数的参数是什么？
*   参数 safe_cast(e->Argument) 的用途是什么？
*   我应该在我的 CPUHungryFunction() 中做什么？
*   如果我的 CPUHungryFunction() 有一个无限循环的 while 循环怎么办？
*   我可以控制我的工作线程获得的处理器时间吗？
*   可以更具体地控制循环在设定周期内循环的次数吗？当我只需要每秒循环 30 次时，我不想使用 cpu 每秒循环 1000 次。*是否需要控制 GUI 的更新速率？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T12:59:20.333

> 后台工作线程会让我的多线程生活更轻松吗？

是的，非常如此。它可以帮助您处理无法从工作线程更新 UI 的事实。特别是 ProgressChanged 事件让您可以显示进度，而 RunWorkerCompleted 事件让您可以使用工作线程的结果来更新 UI，而无需处理跨线程问题。

> 为什么我需要 e->Result？

将您所做工作的结果传回给 UI 线程。您可以在 RunWorkerCompleted 事件处理程序 e->Result 属性中取回该值。然后，您可以从中使用结果更新 UI。

> 传递给函数的参数是什么？

告诉工作线程做什么，它是可选的。否则与将参数传递给任何方法相同，只是更尴尬，因为您无法选择参数。例如，您通常会从您的 UI 传递某种值，如果您需要传递多个值，请使用一个小助手类。总是喜欢这个而不是试图在工作人员中获取 UI 值，这非常麻烦。

> 我应该在我的 CPUHungryFunction() 中做什么？

当然会消耗 CPU 周期。或者通常做一些需要很长时间的事情，比如 dbase 查询。这不会消耗 CPU 周期，但需要很长时间才能让 UI 线程在等待结果时死机。粗略地说，每当你需要做一些超过一秒钟的事情时，你应该在工作线程而不是 UI 线程上执行它。

> 如果我的 CPUHungryFunction() 有一个无限循环的 while 循环怎么办？

然后你的工人永远不会完成，也永远不会产生结果。这可能有用，但并不常见。您通常不会为此使用 BGW，而只是将其 IsBackground 属性设置为 true 的常规线程。

> 我可以控制我的工作线程获得的处理器时间吗？

您可以通过调用 Thread.Sleep() 人为地减慢它的速度。这不是一件常见的事情，启动工作线程的目的是做工作。休眠的线程以非生产方式使用昂贵的资源。

> 可以更具体地控制循环在设定周期内循环的次数吗？当我只需要每秒循环 30 次时，我不想使用 cpu 每秒循环 1000 次。

和上面一样，你必须睡觉。通过执行循环 30 次然后休眠一秒钟来做到这一点。

> 是否有必要控制 GUI 的更新速率？

是的，这非常重要。ReportProgress() 可以是一个消防水带，每秒生成数千次 UI 更新。当 UI 线程跟不上这个速度时，你很容易遇到这个问题。您会注意到，UI 线程不再处理其常规职责，例如绘制 UI 和响应输入。因为它必须处理另一个调用请求才能运行 ProgressChanged 事件处理程序。副作用是 UI 看起来*冻结*了，你已经得到了你试图与工作人员一起解决的确切问题。它实际上并没有被冻结，它只是看起来那样，它仍在运行事件处理程序。但是您的用户不会看到差异。

要记住的一件事是 ReportProgress() 只需要保持人眼快乐。它看不到每秒发生 20 次以上的更新。除此之外，它只会变成难以理解的模糊。因此，不要将时间浪费在无论如何都没有用的 UI 更新上。您也将自动避免消防软管问题。调整更新率是你必须编程的东西，它不是内置在 BGW 中的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T09:36:12.020

我将尝试逐个问题地回答你

1.  是的
2.  DoWork 是一种 void 方法（并且必须如此）。也在`DoWork`与调用线程不同的线程中执行，因此您需要有一种方法将某些内容返回给调用线程。e->Result 参数将被传递给`RunWorkerCompleted`事件内部`RunWorkerCompletedEventArgs`
3.  sender 参数是 backgroundworker 本身，您可以使用它来为 UI 线程引发事件，`DoWorkEventArgs`最终包含从调用线程（调用的线程`RunWorkerAsync(Object)`）传递的参数
4.  无论您需要做什么。注意不能从 DoWork 线程访问的用户界面元素。通常，计算完成的工作百分比并更新 UI（进度条或类似的东西）并调用 ReportProgress 与 UI 线程进行通信。（需要将`WorkerReportProgress`属性设置为 True）
5.  没有什么是无限期运行的。您可以随时拔下电源线。说真的，它只是另一个线程，操作系统会处理它并在您的应用程序结束时破坏一切。
6.  不知道你是什么意思，但它可能与下一个问题有关
7.  您可以使用 Thread.Sleep 或 Thread.Join 方法在一个循环后释放 CPU 时间。睡眠的确切时间应根据您正在执行的操作、当前系统的工作负载和处理器的原始速度进行微调

请参阅有关[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)和[Thread](http://msdn.microsoft.com/en-us/library/bkb1k2x8%28v=vs.100%29.aspx)类的 MSDN 文档

# xml - 不正确的 xsl：复制输出

> ID：14001300
> 
> 赞同：2
> 
> 时间：2012-12-22T08:34:09.507
> 
> 标签：xml, xslt

我需要从我的 xml 文件中复制所有信息（实际上我需要将新信息添加到我的 xml 文件中）。

我使用标准模板：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()" />
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

我写了测试 xml 文件：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <!DOCTYPE products SYSTEM "products.dtd" >
    <?xml-stylesheet type="text/xsl" href="../xsl/copy.xsl"?>
    <products>
        <category name="Audio And Video">
            <subcategory name="Audio">
                <good>
                    <producer>Dell</producer>
                    <model>QQ678</model>
                    <color>White</color>
                    <date_of_issue>12-12-2012</date_of_issue>
                    <not_in_stock>true</not_in_stock>
                </good>
            </subcategory>
            <subcategory name="Video">
                <good>
                    <producer>Samsung</producer>
                    <model>VH500</model>
                    <color>Black</color>
                    <date_of_issue>12-12-2006</date_of_issue>
                    <price>200</price>
                </good>
                <good>
                    <producer>Toshiba</producer>
                    <model>GP436</model>
                    <color>White</color>
                    <date_of_issue>12-12-2004</date_of_issue>
                    <not_in_stock>true</not_in_stock>
                </good>
            </subcategory>
        </category>
        <category name="Computers">
            <subcategory name="Pocket">
                <good>
                    <producer>HP</producer>
                    <model>rx371</model>
                    <color>Black</color>
                    <date_of_issue>31-01-2006</date_of_issue>
                    <not_in_stock>true</not_in_stock>
                </good>
            </subcategory>
        </category>
</products> 
```

当我在浏览器中打开这个 xml 文件时，我想我会看到相同的 xml 文件，但它会显示我：![在此处输入图像描述](../Images/f66b847859c0c150a1cb29ded6b36c38.png)

所以我犯了错误。请帮我解决我的问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T09:05:53.877

您的样式表除了将输入复制到输出之外什么都不做。从浏览器输出中可以看出，它是正确的。这里没有问题的证据。尝试输出一些 HTML 而不仅仅是复制。

# windows-mobile - 如何在 windows mobile 6.5 中动态更改标签的高度

> ID：14001304
> 
> 赞同：0
> 
> 时间：2012-12-22T08:34:22.347
> 
> 标签：windows-mobile, compact-framework, windows-mobile-6.5, windows-mobile-6

在我的应用程序中，我将从长度未知的服务器获取文本。有人可以给出如何改变标签高度的想法，这样如果大于标签的长度，文本就不会被截断。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T19:17:20.067

使用`Graphics.MeasureString`. 这是一个简化的示例：

```
public class MyForm : Form
{
    private string m_text;

    public string NewLabelText 
    { 
        get { return m_text; }
        set 
        {
             m_text = value;
             this.Refresh();
        }
    }

    protected override void OnPaint(PaintEventArgs e)
    {
        if (NewLabelText != null)
        {
            var size = e.Graphics.MeasureString(NewLabelText, label1.Font);
            label1.Width = (int)size.Width;
            label1.Height = (int)size.Height;
            label1.Text = NewLabelText;
            NewLabelText = null;
        }

        base.OnPaint(e);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T09:34:20.897

使用 ctacke 对问题采用的解决方案（标签的恒定宽度）：

```
protected override void OnPaint(PaintEventArgs e)
{
    if (NewLabelText != null)
    {
        //get the width and height of the text
        var size = e.Graphics.MeasureString(NewLabelText, label1.Font);
        if(size.Width>label1.Width){
            //how many lines are needed to display the text
            int iLines = (int)(System.Math.Round((size.Width / label1.Width)+.5));
            //multiply with using the normal height of a one line text
            //label1.Height=iLines*label1.PreferredHeight; //preferredHeight not supported by CF
            label1.Height=(int)(iLines*size.Height*1.1); // add some gutter
        }
        label1.Text = NewLabelText;
        NewLabelText = null;
    }

    base.OnPaint(e);
} 
```

我无法用 CF 进行测试。可能 PreferredHeight 在 CF 中不可用，如果有，请改用 label1.height。

# javascript - Javascript：匹配文件类型时出现错误？

> ID：14001307
> 
> 赞同：-1
> 
> 时间：2012-12-22T08:34:34.600
> 
> 标签：javascript, file-type

我今天正在编写一个小脚本，遇到了一个我似乎无法修复的错误（或一开始就无法正确定位。）

这基本上是脚本的重要部分：

```
function handleFiles(files,e) {
    var imageType = /image.*/;  
    var file = files[0];
    if (!file.type.match(imageType)) {  
      return false; 
    }  
} 
```

尝试使用它时，它根本不起作用。谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T08:49:40.287

`.`在 RegExp（任何字符）中具有特殊含义。如果你想检测一个点，你需要像这样转义它：

```
var imageType = /image\.*/; 
```

# java - 如何通过捆绑发送双倍价值

> ID：14001308
> 
> 赞同：2
> 
> 时间：2012-12-22T08:34:39.537
> 
> 标签：java, android, eclipse

String 工作正常，那么 double 呢？

这是我的代码

```
ImageView protect_me_btn=(ImageView) findViewById(R.id.protect_me_btn);
protect_me_btn.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        pbupdate.setVisibility(4);
        String lat= Double.toString(latitude);
        Intent inte=new Intent(getApplicationContext(),set_alaram.class);
        Bundle lati=new Bundle();
        lati.putString("first",lat);
        inte.putExtras(lati);
        startActivity(inte);                    
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T08:39:58.950

使用 Bundle 向 set_alaram Activity 发送 Double 值：

```
protect_me_btn.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            pbupdate.setVisibility(4);
            String lat= Double.toString(latitude);
            Intent inte=new Intent(getApplicationContext(), set_alaram.class);
            Bundle lati=new Bundle();
            lati.putString("first",lat);
            lati.putDouble("lat", latitude); //<< send double using putDouble
            inte.putExtras(lati);
            startActivity(inte);                    
        }
    }); 
```

并在`set_alaram`Activity 中从 Bundle 中获取 Double 值

```
Bundle bundle = this.getIntent().getExtras();

Double lat = bundle.getDouble("lat"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T08:38:30.710

您可以通过这种方式在 bundle 中发送双精度值。

```
Intent intent = new Intent(CurrentActivity.this, DestinationActivity.class);
    Bundle bundle = new Bundle();
    bundle.putDouble("key", yourDoubleValue);
    intent.putExtras(bundle);
    startActivity(intent); 
```

在您的另一项活动中：

```
Bundle bundle = getIntent().getExtras();
double passedDoubleValue = bundle.getDouble("key"); 
```

希望这可以帮助。

# php - 通过 GET 减少请求的任何想法

> ID：14001309
> 
> 赞同：1
> 
> 时间：2012-12-22T08:34:48.597
> 
> 标签：php, get, request

我制作了一个 video.php 页面，该页面将根据 youtube 上视频的 ID 显示来自 youtube 的视频，所以我做了类似的东西

```
if($_GET['id']=="jquery11"){
    ?>
<div id="video" ><iframe   width="640" height="360" src="http://www.youtube.com/embed/6PM6t5RFR2w?autoplay=1&controls=2" frameborder="5" allowfullscreen></iframe></div>

    <?
    }

if($_GET['id']=="jquery12"){
    ?>
<div id="video" ><iframe   width="640" height="360" src="http://www.youtube.com/embed/fE0GC7KFIno?autoplay=1&controls=2" frameborder="5" allowfullscreen></iframe></div>

    <?
    }

if($_GET['id']=="jquery13"){
    ?>
<div id="video" ><iframe   width="640" height="360" src="http://www.youtube.com/embed/xuFa2R4c6Gc?autoplay=1&controls=2" frameborder="5" allowfullscreen></iframe></div>

    <?
    }

if($_GET['id']=="jquery14"){
    ?>
<div id="video" ><iframe   width="640" height="360" src="http://www.youtube.com/embed/M971xYWiS7M?autoplay=1&controls=2" frameborder="5" allowfullscreen></iframe></div>

    <?
    }

if($_GET['id']=="jquery15"){
    ?>
<div id="video" ><iframe   width="640" height="360" src="http://www.youtube.com/embed/oZ_J422z4WI?autoplay=1&controls=2" frameborder="5" allowfullscreen></iframe></div>

    <?
    }

if($_GET['id']=="jquery16"){
    ?>
<div id="video" ><iframe   width="640" height="360" src="http://www.youtube.com/embed/tYJMitUfSvs?autoplay=1&controls=2" frameborder="5" allowfullscreen></iframe></div>

    <?
    }

if($_GET['id']=="jquery17"){
    ?>
<div id="video" ><iframe   width="640" height="360" src="http://www.youtube.com/embed/wZPhQzqGzls?autoplay=1&controls=2" frameborder="5" allowfullscreen></iframe></div>

    <?
    }

if($_GET['id']=="jquery18"){
    ?>
<div id="video" ><iframe   width="640" height="360" src="http://www.youtube.com/embed/Cdwn2JoCYQ0?autoplay=1&controls=2" frameborder="5" allowfullscreen></iframe></div>

    <?
    }

if($_GET['id']=="jquery19"){
    ?>
<div id="video" ><iframe   width="640" height="360" src="http://www.youtube.com/embed/cKCiNf23Atg?autoplay=1&controls=2" frameborder="5" allowfullscreen></iframe></div>

    <?
    }

?> 
```

有什么想法可以改变这种方法来减少获取请求吗？我尝试制作关联数组，但我认为它是一样的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T08:53:29.657

```
$map = array(
    "jquery11" => "6PM6t5RFR2w",
    "jquery12" => "fE0GC7KFIno",
    "jquery13" => "xuFa2R4c6Gc",
    "jquery14" => "M971xYWiS7M",
    "jquery15" => "oZ_J422z4WI",
    "jquery16" => "tYJMitUfSvs",
    "jquery17" => "wZPhQzqGzls",
    "jquery18" => "Cdwn2JoCYQ0",
    "jquery19" => "cKCiNf23Atg"                 
);

$id = $_GET['id'];

if( array_key_exists( $id, $map ) ) {
    echo <<<HTML
    <div id="video" >
        <iframe   width="640" height="360" src="http://www.youtube.com/embed/{$map[$id]}?autoplay=1&controls=2" frameborder="5" allowfullscreen>
        </iframe>
    </div>
HTML;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T08:38:03.410

创建一个可能的 id 数组，然后在 if 语句下使用 in_array 检查传递的变量是否在数组中，然后从那里分配正确的 url。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T08:51:19.710

未经测试 - 应该可以工作：

```
<?php

$request = $_GET['request'];

$accepted_requests = array(1 =>'jquery1', 2 => 'jqery2', 3 => 'jquery3');

$utube_urls = array(1 => 'url', 2 => 'url', 3 => 'url');

    if(in_array($request, $accepted_requests)){

                foreach($accepted_requests as $k=>$v){

                    if($request === $v){

                            foreach($utube_urls as $keys => $vals){

                                    if($k == $keys){
                                        echo $vals;
                                    }

                            }

                    }

                }

    } 
```

?>

更新了代码：错过了 $val 上的 's' - 现已修复

# python - 在 python 和 arduino 之间实时绘制串行数据

> ID：14001312
> 
> 赞同：0
> 
> 时间：2012-12-22T08:34:56.407
> 
> 标签：python, matplotlib, serial-port, arduino, pyserial

对于区域障碍物的映射，我计划使用与 Arduino Mega 连接的 Sharp IR 测距仪，然后尝试使用 python 和 matplotlib 在极坐标直方图类型地图上实时绘制它。我对如何通过串行连接进行 Arduino 和 python 的接口感到有点困惑。

任何帮助都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T10:31:18.717

这可能是一个好的开始：[Arduino 和 Python](http://playground.arduino.cc/Interfacing/Python)。摘要：使用 pySerial 并读取/写入`/dev/tty.usbserial`.

也可以看看：

[如何将值从 Arduino 发送到 Python，然后使用该值](https://stackoverflow.com/questions/6118890/how-to-send-a-value-from-arduino-to-python-and-then-use-that-value?rq=1)

[通过 pyserial 接收多个值并在 Python GUI 中显示](https://stackoverflow.com/questions/6154341/receive-multiple-values-via-pyserial-and-display-in-python-gui?rq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T22:14:18.423

如果你可以跳过 Python，你可以在 Processing 中做同样的事情。如果您只是设法通过无线方式发送数据，例如 xbee 或蓝牙，那么将其连接到这样的绘图软件将是小菜一碟[http://sebastiannilsson.com/en/k/projekt/realtime-plotter/](http://sebastiannilsson.com/en/k/projekt/realtime-plotter/)

# php - 如何在 preg_split (PHP) 中的一对第二分隔符内停止拆分？

> ID：14001313
> 
> 赞同：0
> 
> 时间：2012-12-22T08:35:14.333
> 
> 标签：php, regex, preg-split

我需要用 生成一个数组`preg_split`，因为`implode('', $array)`可以重新生成原始字符串。`preg_split 的

```
$str = 'this is a test "some quotations is her" and more';
$array = preg_split('/( |".*?")/', $str, -1, PREG_SPLIT_DELIM_CAPTURE); 
```

生成一个数组

```
Array
(
    [0] => this
    [1] =>  
    [2] => is
    [3] =>  
    [4] => a
    [5] =>  
    [6] => test
    [7] => 
    [8] => 
    [9] => "some quotations is here" 
    [10] => 
    [11] => 
    [12] => and
    [13] =>  
    [14] => more
) 
```

我还需要注意引号前后的空格，以生成具有原始字符串确切模式的数组。

例如，如果字符串是`test "some quotations is here"and`，则数组应该是

```
Array
(
        [0] => test
        [1] => 
        [2] => "some quotations is here" 
        [3] => and
) 
```

注意：编辑是根据与@mikel 的初步讨论进行的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T08:40:01.397

这对你有用吗？

```
preg_split('/( ?".*?" ?| )/', $str, -1, PREG_SPLIT_DELIM_CAPTURE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T09:08:27.200

这应该可以解决问题

```
$str = 'this is a test "some quotations is her" and more';
$result = preg_split('/(?:("[^"]+")|\b)/', $str, -1, PREG_SPLIT_DELIM_CAPTURE);
$result = array_slice($result, 1,-1); 
```

输出

```
Array
(
    [0] => this
    [1] =>  
    [2] => is
    [3] =>  
    [4] => a
    [5] =>  
    [6] => test
    [7] =>  
    [8] => "some quotations is her"
    [9] =>  
    [10] => and
    [11] =>  
    [12] => more
) 
```

重建

```
implode('', $result);
// => this is a test "some quotations is her" and more 
```

# c# - 如何静态分配字典 价值观

> ID：14001327
> 
> 赞同：1
> 
> 时间：2012-12-22T08:36:42.563
> 
> 标签：c#, collections

如何将值静态分配给字典，其中值是另一个类/对象。就像下面的链接：[C#：Dictionary<K,V> 如何在没有 Add(KeyValuePair<K,V>) 的情况下实现 ICollection<KeyValuePair<K,V>>？](https://stackoverflow.com/questions/268064/c-how-can-dictionaryk-v-implement-icollectionkeyvaluepairk-v-without-hav)

```
class Settings
{
    public Dictionary<SettingKey, SettingItem> List =
        new Dictionary<SettingKey, SettingItem>()
    {
        {SettingKey.userDBName,{ theValue = "user-name", theID = 1 }},
        {SettingKey.realName,{ theValue = "real-name", theID = 2 }}   
    };
}

enum SettingKey
{
    userDBName,
    realName 
}

class SettingItem
{
    public string theValue { get; set; }
    public int theID { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T08:39:23.033

您必须初始化对象：

```
public Dictionary<SettingKey, SettingItem> List =
    new Dictionary<SettingKey, SettingItem>()
{
    {SettingKey.userDBName, new SettingItem { theValue = "user-name", theID  = 1 }},
    {SettingKey.realName,   new SettingItem { theValue = "real-name", theID  = 2 }}   
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T08:39:16.063

使用[对象初始化器](http://msdn.microsoft.com/en-us/library/bb397680.aspx)来设置对象的`SettingItem`值

```
public Dictionary<SettingKey, SettingItem> List =
    new Dictionary<SettingKey, SettingItem>()
{
    {SettingKey.userDBName, new SettingItem { theValue = "user-name", theID = 1 }},
    {SettingKey.realName, new SettingItem { theValue = "real-name", theID = 2 }}   
}; 
```

# javascript - 使用带有复选框的 jQuery 委托 (on) 会导致响应的巨大延迟 - 为什么？

> ID：14001331
> 
> 赞同：2
> 
> 时间：2012-12-22T08:37:30.070
> 
> 标签：javascript, jquery, performance

嗨，我有一个动态创建的表，该表充当使用复选框的选择列表。我希望这些复选框是互斥的。因此，在选中一个框时，我需要清除任何其他选中的框。

```
$(document).on("keydown", "#list_Instructors input.allocate",function(event){   
    alert("hit");
    $("#list_Instructors input.allocate").removeAttr('checked');
    $(event.target).attr('checked', 'checked');
}); 
```

这种工作，但在点击和发生任何不好的事情之间存在巨大的延迟。我尝试了各种组合都没有成功。

是否有简单的解释说明为什么会造成延迟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T08:58:13.753

你的问题是你绑定了**整个 DOM****的方法**，这**真的很糟糕**。因此，请始终尝试将其绑定到您的控件所在的**最近的 div**（最近的父元素）。

 ******第二件事是**始终缓存**您的选择器以获得更好的性能。如下所示

```
var dataTable=$('#dataTable');

dataTable.on("click", function(event){
    alert($(this).text());
}); 
```

关于[**Jquery API**](http://api.jquery.com/on/)的**事件性能**如下所示。[](http://api.jquery.com/on/)

 **> 在文档树顶部附近附加许多委托事件处理程序会降低性能。每次事件发生时，jQuery 必须将该类型的所有附加事件的所有选择器与从事件目标到文档顶部的路径中的每个元素进行比较。为了获得最佳性能，请将委托事件附加到尽可能靠近目标元素的文档位置。避免过度使用 document 或 document.body 来处理大型文档的委托事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T08:42:58.677

您可能会看到，在解除警报框之前，不会执行之后的代码。alert 命令是一个阻塞命令。

也许您可以使用`console.log()`此功能进行调试。这不会阻止您的代码，它将在`keydown`事件中执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T09:05:57.933

您需要使用`$(this)`而不是通过另一个查找。如上所述，如果可能，请尝试绑定到最近的父元素，例如容器 div。话虽如此，这应该会加快您的速度：

```
$(document).on('keydown', '#list_Instructors input.allocate', function (event) {   
    //alert("hit");
    console.log('hit');
    $(this).removeAttr('checked');
    $(event.target).attr('checked', 'checked');
}); 
```

但是您应该尝试`document`用容器 div 或另一个父元素替换********

# html - 带有字体的自定义字体

> ID：14001335
> 
> 赞同：0
> 
> 时间：2012-12-22T08:37:57.667
> 
> 标签：html, css, fonts

我在[这里](http://www.fontsquirrel.com/fontface/generator)使用字体生成器 来生成自定义字体欧洲粗体。如果我只使用英文字母，一切正常，但我的网站是俄文的，我的自定义字体对俄文字符没有影响。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T10:34:24.830

字体不包含西里尔字母，或者字体不是 Unicode 编码的。后者的可能性更大。例如，一种名为 Europe 并在[http://www.broble.com/download-free-font/europe/](http://www.broble.com/download-free-font/europe/)分发（可能是非法的）的字体具有一些 8 位编码，因此它包含西里尔字母但不在适当的位置. 如果您在文本中包含诸如“ä”或“é”之类的字母，您会看到这一点——它们显示为西里尔字母。

解决方案是找到更好的、正确编码的字体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-29T19:34:21.083

你还没有添加

```
<meta charset="utf-8" /> 
```

对于您的 html 标题，或者您使用的字体不支持俄罗斯。

# objective-c - 正方体 OCR 仅数字

> ID：14001338
> 
> 赞同：0
> 
> 时间：2012-12-22T08:38:20.787
> 
> 标签：objective-c, ios, xcode, ocr, tesseract

我正在为 iOS 使用 tesseract，我似乎无法弄清楚如何获取它只是为了尝试和读取数字。我正在使用从 tesseract 网站下载的最新英文版本。有谁知道如何做到这一点？

这些是我拥有的文件：

![在此处输入图像描述](../Images/1a9f397206fa3aeb75a5077141e69b4a.png)

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T15:57:07.767

如果是命令行执行，您还需要有`tessdata\configs\digits`file. 如果您正在使用 API，请调用`SetVariable("tessedit_char_whitelist", "0123456789-.");`

# c# - .NET Charting - 通过拖动 X 轴来缩放图表

> ID：14001340
> 
> 赞同：3
> 
> 时间：2012-12-22T08:38:37.277
> 
> 标签：c#, .net, charts, zooming, dundas

我正在尝试通过将 X 轴上的值向右拖动然后将其放到新位置来使用 .NET 图表来实现图表缩放。它有点工作，但我有一些问题。这是我的代码：

```
public partial class ChartForm : Form
{
    public ChartForm()
    {
        InitializeComponent();
    }

    private Axis AxisX { get; set; }
    private double InitialAxisValue { get; set; }

    protected override void OnLoad(EventArgs e)
    {
        chart1.Series.Add(CreateDataSeries());
        AxisX = chart1.ChartAreas[0].AxisX;
        InitialAxisValue = double.NaN;
        chart1.MouseMove += OnChartMouseMove;
        chart1.MouseDown += OnChartMouseDown;
        chart1.MouseUp += OnChartMouseUp;
    }

    private static Series CreateDataSeries()
    {
        var dataSeries = new Series
                             {
                                 ChartType = SeriesChartType.Line,
                             };

        for (double spotPrice = 1100; spotPrice < 1300; spotPrice++)
        {
            dataSeries.Points.Add(new DataPoint(spotPrice, spotPrice));
        }

        return dataSeries;
    }

    private void OnChartMouseUp(object sender, MouseEventArgs e)
    {
        InitialAxisValue = double.NaN;
    }

    private void OnChartMouseDown(object sender, MouseEventArgs e)
    {
        if (!MouseOnXAxis(e.X, e.Y))
            return;

        double valueX = AxisX.PixelPositionToValue(e.X);
        InitialAxisValue = valueX;
    }

    private void OnChartMouseMove(object sender, MouseEventArgs e)
    {
        try
        {
            Cursor = MouseOnXAxis(e.X, e.Y) ? Cursors.Hand : Cursors.Default;
            HandleZoom(e);
        }
        catch (Exception exception)
        {
            Console.WriteLine(exception);
        }
    }

    private void HandleZoom(MouseEventArgs e)
    {
        if (double.IsNaN(InitialAxisValue))
            return;

        AxisX.Maximum = GetNewAxisMaximumValue(e.X, InitialAxisValue);
    }

    private double GetNewAxisMaximumValue(double currentAxisCoordinate,
                                          double initialAxisZoomPointValue)
    {
        double axisMinimumValue = AxisX.Minimum;
        double axisMaximumValue = AxisX.Maximum;
        double axisMinimumCoordinate = AxisX.ValueToPixelPosition(axisMinimumValue);
        double axisMaximumCoordinate = AxisX.ValueToPixelPosition(axisMaximumValue);
        double relativePos = (currentAxisCoordinate - axisMinimumCoordinate) /
                             (axisMaximumCoordinate - axisMinimumCoordinate);
        double newAxisWidth = ((initialAxisZoomPointValue - axisMinimumValue)/relativePos);
        return axisMinimumValue + newAxisWidth;
    }

    private bool MouseOnXAxis(int xCoor, int yCoor)
    {
        HitTestResult hitTestResult = chart1.HitTest(xCoor, yCoor);
        return hitTestResult.ChartElementType == ChartElementType.AxisLabels &&
               hitTestResult.Axis == AxisX;
    }
} 
```

实际的缩放效果是通过在 HandleZoom() 中改变 AxisX 的最大值来实现的：

```
AxisX.Maximum = GetNewAxisMaximumValue(e.X, InitialAxisValue); 
```

其中“InitialAxisValue”是初始拖动值，“eX”是当前鼠标 x 轴坐标。

它有效，但我有一个问题：有时拖动移动不顺畅，有时在图表/网格中出现来回不希望的移动/闪烁（您可以通过将鼠标缓慢向右拖动来轻松查看）。

问题可能出在 HandleZoom() 和 GetNewAxisMaximumValue() 的实现中。

任何帮助都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T22:18:47.157

**解决了**！

我的缩放计算基于 X 轴宽度（以像素为单位）是固定的假设，并且显然当 InnerPlotPosition 属性设置为 TRUE 时，以像素为单位的 X 轴宽度可​​能会在运行时发生变化，例如在缩放时。

所以解决方法是将[InnerPlotPosition](http://msdn.microsoft.com/en-us/library/system.windows.forms.datavisualization.charting.chartarea.innerplotposition%28v=vs.100%29.aspx)属性设置为 FALSE 并手动设置内部绘图区域：

```
 chart1.ChartAreas[0].InnerPlotPosition.Auto = false;
        chart1.ChartAreas[0].InnerPlotPosition.Height = 80.29209F;
        chart1.ChartAreas[0].InnerPlotPosition.Width = 85F;
        chart1.ChartAreas[0].InnerPlotPosition.X = 15F;
        chart1.ChartAreas[0].InnerPlotPosition.Y = 5.07246F; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T10:49:56.583

我可以看到您已经解决了缩放功能，但为什么不使用内置的 .net 图表缩放选项呢？

```
chart.ChartAreas[0].CursorX.IsUserSelectionEnabled = true; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T14:05:49.830

图形控件上的“DoubleBuffer = true”有帮助吗？

# facebook - 使用 Javascript SDK 登录 Facebook 后自动重定向

> ID：14001347
> 
> 赞同：0
> 
> 时间：2012-12-22T08:39:50.230
> 
> 标签：facebook, facebook-javascript-sdk, facebook-login

请帮我。我知道这很简单，但我的运气不好:(

我正在尝试按照[facebook 官方文档](https://developers.facebook.com/docs/howtos/login/getting-started/)在我的网站中使用 JavaScript SDK 实现 facebook 登录。当我进入 mysite 登录页面时，Facebook 登录窗口会自动弹出。但我想在点击登录按钮后。

登录按钮：

```
<p class="fb_login">or <img src="assets/img/fb-login-button.jpg" onClick="FB.login()" onlogin="alert( 'Logged In' );"></p> 
```

Javascript：

```
window.fbAsyncInit = function() {
    FB.init({
      appId      : '486435991400780', // App ID
      channelUrl : '//http://localhost/ride/assets/channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    // Additional init code here
    FB.getLoginStatus(function(response) {
        if (response.status === 'connected') {
            // connected
            replace_login();
            FB.api('/me', function(response) {
                console.log('Good to see you, ' + response.name + '.');
                alert('Good to see you, ' + response.name + '.');
            });
        } else if (response.status === 'not_authorized') {
            // not_authorized
            login();
        } else {
            // not_logged_in
            login();
        }
    });
  };

  function login() {
      FB.login(function(response) {
          if (response.authResponse) {
              // connected
              window.location.reload();
          } else {
              // cancelled
              alert('User cancelled login or did not fully authorize.');
          }
      });
  }

  function replace_login(){
       FB.api('/me', function(response) {
           $('.fb_login').html('<span class="fb_logged_in">' + response.name + ', You are already logged in with Facebook!</span>');
       });
  }

  // Load the SDK Asynchronously
  (function(d){
       var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
       if (d.getElementById(id)) {return;}
       js = d.createElement('script'); js.id = id; js.async = true;
       js.src = "//connect.facebook.net/en_US/all.js";
       ref.parentNode.insertBefore(js, ref);
   }(document)); 
```

在我的 html 上：

```
<div id="fb-root"></div>
<script src="assets/js/fb-login.js" type="text/javascript"></script> 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T08:49:44.033

检查登录状态后删除 javascript 中的“login()”调用，以便不会出现登录弹出窗口：

```
// Additional init code here
FB.getLoginStatus(function(response) {
    if (response.status === 'connected') {
        // connected
        replace_login();
        FB.api('/me', function(response) {
            console.log('Good to see you, ' + response.name + '.');
            alert('Good to see you, ' + response.name + '.');
        });
    }
}); 
```

添加一个按钮（最好使用 CSS 样式）：

```
<button onclick="login();">Login with Facebook</button> 
```

注意：如果用户已登录，则该按钮可能会被 javascript 隐藏（或者如果未登录，则添加该按钮）。

# javascript - 如何使用 jquery 选择：after 元素

> ID：14001350
> 
> 赞同：13
> 
> 时间：2012-12-22T08:39:57.997
> 
> 标签：javascript, jquery, html, css

贝娄是我的代码。我尝试过的。当这个弹出窗口出现时，我想使用这个关闭按钮来关闭整个弹出框。

CSS 代码

```
.bigdiv{
    display:none;
    background-color:#efefef;
    box-shadow: 10px 10px 10px 100000px rgba(0, 0, 0, 0.4);
    border:2px solid #efefef;
    width:400px;
    height:300px;
    position:fixed;
    z-index:500;
    top:25%;
    left:25%;
    margin:0 auto;
    padding:20px;
    }
    .bigdiv:after {
        cursor:pointer;
        content:url('http://static.doers.lk/img/closebox.png');
        position: relative;
        right: -195px;
        top: -310px;
        z-index: 999;
    } 
```

查询

```
$(".left div").click(function () {

   $(".bigdiv").show("slow");

    $(".bigdiv").click(function () {
   $(".bigdiv").hide();
   }) ;  }) ; 
```

HTML

```
<div class="left">
<div>intro text here</div><div></div><div></div>
</div>

<div class="bigdiv">some content</div> 
```

我想选择：元素之后。如何使用 jquery 做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-22T08:44:43.193

> 我想选择：元素之后。如何使用 jquery 做到这一点？

你不能，生成的伪元素在 DOM 中不存在（但遗憾的是）。

我们可以这样证明：

CSS：

```
#foo:before {
  content: '[Before]'
}
#foo:after {
  content: '[After]'
} 
```

HTML：

```
<body><div id="foo">Foo</div></body> 
```

JavaScript：

```
(function() {

  var msgs = [];
  var child;
  var div;

  for (child = document.body.firstChild;
       child;
       child = child.nextSibling) {
    if (child.id) {
      msgs.push("Child " + child.nodeName + "#" + child.id);
    }
    else {
      msgs.push("Child " + child.nodeName);
    }
  }

  div = document.createElement('div');
  div.innerHTML = msgs.join("<br>");
  document.body.appendChild(div);

})(); 
```

从上面得到的页面（如果我们假设`script`元素被添加到`body`最后）是：

```
[之前]Foo[之后]
子 DIV#foo
子脚本
```

[实时复制](http://jsbin.com/etirax/1)| [来源](http://jsbin.com/etirax/1/edit)

如您所见，就 DOM 而言，生成的伪元素根本不存在。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-09T23:42:48.533

您可以使用 getComputedStyle 功能，大多数主流浏览器 - IE9、IE10、Chrome、FF 都支持该功能。不过，我还没有找到在 IE8 中执行此操作的方法。

```
var attrContent = getComputedStyle(this,':after').content;
var attrWidth = getComputedStyle(this,':after').width; 
```

如果您发现此函数未定义，请尝试使用 window.getComputedStyle。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T08:47:08.500

不幸的是，您不能在 jQuery（或一般的 JavaScript）中选择伪元素。

不过， jQuery 的`appendTo()`方法与 CSS 完全一样`:after`，因此它可以作为替代品（尽管不如纯 CSS 解决方案那么优雅）。

例如，而不是：

```
.bigdiv:after {
    cursor:pointer;
    content:url('http://static.doers.lk/img/closebox.png');
    position: relative;
    right: -195px;
    top: -310px;
    z-index: 999;
} 
```

像这样试试

CSS：

```
.bigdivAfter {
    cursor:pointer;
    position: relative;
    right: -195px;
    top: -310px;
    z-index: 999;
} 
```

JS：

```
$("<div class=bigdivAfter><img src='http://static.doers.lk/img/closebox.png'></div>").appendTo(".bigdiv"); 
```

然后您可以正常选择closebox图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T10:02:40.933

您可以使用 jquery 附加关闭按钮，并可以为其分配关闭事件。这个 jquery 和 css 将为您工作。

**CSS**

```
.bigdivAfter {
    cursor:pointer;
    position: absolute;
    right: //as you want;
    top: //as you want;
    z-index: 999;
} 
```

**查询**

```
$(document).ready(function(){ 
$(".bigdiv").append('<img class="closeButton" src="http://static.doers.lk/img/closebox.png"/>');
$(".bigdiv .closeButton").click(function () {
   $(".bigdiv").hide();
   }) ;
$(".left div").click(function () {
   $(".bigdiv").show("slow");
}) ; 
```

我还建议您在 html 本身上添加图像，而不是通过 jquery 添加它

# ruby-on-rails - 在委托属性上显示验证错误

> ID：14001353
> 
> 赞同：3
> 
> 时间：2012-12-22T08:40:17.027
> 
> 标签：ruby-on-rails, delegates, simple-form

我有以下内容（其中 Venue 是 Actor 的 CTI 后代）：

```
class Actor < ActiveRecord::Base
  has_one :profile, validate: true, autosave: true
end

class Venue < ActiveRecord::Base
...
  %w{description address website phone}.each do |attr|
    delegate attr.to_sym, "#{attr}=".to_sym, to: :profile!
  end

  def profile!
    actor.profile || actor.build_profile
  end
...
end 
```

我将这些代表属性的字段直接包含在 Venue 表单中。当其中一个属性验证失败时，我看到的只是顶部的通知，而不是字段周围的包装。我想这一定是因为 Venue 实例的错误哈希中的键与属性名称不完全匹配，被设置为`:"actor.profile.website"`而不是只是`:website`.

有什么办法可以让这些错误正确显示吗？

**编辑**

这是表格：

```
<%= simple_form_for @venue do |f| %>
  <%= f.error_notification %>

  <%= f.input :name %>
  <%= f.input :address, required: true %>
  <%= f.input :phone %>
  <%= f.input :website %>
  <%= f.input :members, collection: [], class: "form_tag" %>
  <%= f.input :tag_list, as: :string, class: "form_tag", hint: t("misc.hint.tag"),
              input_html: { "data-pre" => @venue.tag_list.map {|t| { id: t, name: t }}.to_json } %>
  <%= f.input :description, as: :text, input_html: {rows: 6, cols: 53, class: "form_tag"} %>

  <div class="actions center">
<%= f.submit class: "btn btn-success" %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T23:47:25.280

这是正确的。纠正的方法是使用这样的东西：

```
class Venue < ActiveRecord::Base
...
  after_validation do
    if errors.any?
      errors.messages.keys.each do |key|
        errors.messages[key.to_s.gsub(/actor.profile./, "").to_sym] = errors.messages.delete(key)
      end
    end
  end
...
end 
```

* * *

更新：

**如何使用 div class="field_with_error" 包装内容**

*注意：Rails 仅在基础对象有错误并且错误具有与属性名称（实际上是方法*名称）相等的适当键时才包装字段。对于嵌套的关联属性，它根据关联序列使用前缀键（actor.profile.website）。

顺便说一下，常用的方法：

```
<%= field_error_proc.call(content) %>

# where content is any string/symbol stuff. 
```

错误处理触发器：

```
<%= form_for... do |f| %>
  <% website_field = capture do %>
    <%= f.text_field :website %>
  <% end %>

  <% if f.object.errors[:"actor.profile.website"] %>
    <%= website_field %>
  <% else %>
    <%= field_error_proc.call(website_field) %>
  <% end %>
<% end %> 
```

有点乏味吧？最好使用 Rails 的原生包装机制。

看下一个答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T16:03:32.563

```
module OtherValidation
  extend ActiveSupport::Concern

  module ClassMethods
    def delegate_with_validations(*attr_names)
      options = attr_names.extract_options!
      delegate *attr_names, options
      attr_names.each {|a| validate_using(options[:to], a)}
    end      

    def validate_using(target, *args)
      options = args.extract_options!
      args.each do |attr_name|
        class_eval <<-EOV
          dup = #{target}._validators[:#{attr_name}].dup
          validate do
            dup.each do |v|
              validator = v.dup
              validator.attributes.delete(:#{attr_name})
              validator.attributes << :#{options[:to]||attr_name}
              validator.validate(self)
            end
          end
        EOV
      end
    end
  end

end 
```

现在在场地模型中：

```
class Venue < ActiveRecord::Base
  include OtherValidation
  delegate_with_validations :website, :to => :profile!
end

# venue = Venue.new(:website => nil)
# venue.valid? # Profile validates presence of :website
#=> false
# venue.errors
#=> #<ActiveModel::Errors....., @messages={:website=>["can't be blank"]}> 
```

* * *

更新：

对于任何自定义属性：

```
class Venue < ActiveRecord::Base
  include OtherValidation
  attr_accessor: title

  validate_using("Profile", :website, :to => :title)
end

# :website validation behavior constraints to :title attribute

# venue = Venue.new(:title => nil)
# venue.valid? # Profile validates presence of :website
#=> false
# venue.errors
#=> #<ActiveModel::Errors....., @messages={:title=>["can't be blank"]}> 
```

config/initializers/other_delegation.rb

```
module OtherValidation
  ...
end

ActiveSupport.on_load :active_record do
  include OtherValidation
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T19:33:42.567

你可以用我的 gem 避免这些东西：

```
gem 'delegate_attributes'

class Blog < ActiveRecord::Base
  delegate_attributes :theme, :errors => :fit, :writer => true, :to => :category
end 
```

选项**`:errors => :fit`**声明现在可以在下面定义错误消息的 i18n 翻译：

```
en:
  activerecord:
    errors:
      models:
        blog:
          attributes:
            theme:
              blank: "Can not be blank" 
```

选项**`:writer => true`**委托编写器方法：**`.theme=`**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T13:20:40.923

[Valery](https://stackoverflow.com/users/1222782/valery-kvon)的回答对我来说是有效的，但对于带前缀的代表来说并不适用。另外，我正在寻找一种方法来隔离解决方案，这样它只会影响有错误的表单字段的 HTML 生成。结束了这个（可能不是最干净的代码，但似乎可以完成这项工作）：

```
initializers/delegate.rb

module MappedDelegation
  extend ActiveSupport::Concern

  included do
    cattr_reader :delegation_mappings
    @@delegation_mappings ||= {}

    def self.delegate_with_mappings(*methods)
      delegate_without_mappings(*methods)

      options = methods.pop
      prefix, to = options.values_at(:prefix, :to)
      method_prefix = \
        if prefix
          "#{prefix == true ? to : prefix}_"
        else
          ''
        end

      methods.each do |method|
        @@delegation_mappings["#{method_prefix}#{method}"] = to
      end
    end

    self.class_eval do
      class << self
        alias_method_chain :delegate, :mappings
      end
    end
  end
end

initializers/simple_form_delegate_errors.rb

module SimpleForm
  module Components
    module Errors
      def errors
        @errors ||= (errors_on_attribute + errors_on_delegate + errors_on_association).compact
      end

      def errors_on_delegate
        delegated_to = ( object.class.respond_to?(:delegation_mappings) ? object.class.delegation_mappings : {} )[attribute_name.to_s]
        delegated_to ? object.send(delegated_to).errors[attribute_name] : []
      end
    end
  end
end

app/models/venue.rb

class Venue < ActiveRecord::Base
  include MappedDelegation
  ... 
```

# c++ - 我需要一个抽象类的 .cpp 文件吗？

> ID：14001356
> 
> 赞同：25
> 
> 时间：2012-12-22T08:41:21.723
> 
> 标签：c++, visual-studio-2010

首先，我是 C++ 新手。我为每个 C++ 类打开一个头文件。现在我需要创建一个抽象类。以下是我的代码

**魔法.h**

```
#pragma once
class Magic
{
public:
    Magic(void);
    ~Magic(void);
    virtual void display()=0;
}; 
```

**魔术.cpp**

```
#include "Magic.h"

Magic::Magic(void)
{
}

Magic::~Magic(void)
{
} 
```

现在，如您所知，我无法将以下内容添加到 cpp 文件中。

```
Magic::display()
{
} 
```

那么，我真的需要一个抽象类的 .cpp 文件吗？或者，我是否错误地调用`display()`了 .cpp 文件？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-22T08:50:30.967

您*不需要*实现文件。只需内联定义所有必需的成员（如果不需要，请不要定义纯虚拟成员）。

```
class Magic
{
public:
    Magic(void) {};
    ~Magic(void) {};
    virtual void display()=0;
}; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-22T08:49:41.977

如果您遵循`2-files-per-class`and约定，那么即使您正在编写抽象类`one-class-in-each-set-of-files`，也最好有一个文件。`.cpp`

除了保持一致性之外，还有其他一些优点：拥有一个`.cpp`或实现文件为您提供了未来扩展的空间，如果您要向您的类家族添加非虚拟通用行为，则基类是正确的地方添加它。与从多个位置包含的文件相比，文件中的微小编辑也`.cpp`将导致编译时间短得多。`.h`

除了约定之外，您可以很好地将一个类（抽象或非抽象）放在一个`.h`文件中。诸如 STL 之类的库一直都在这样做。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-22T09:08:03.007

您不需要抽象类（即接口）的源文件。

此外，如果您有任何类型的虚拟方法，您也应该添加一个**虚拟**析构函数（或使析构函数受保护）。您也可以简单地让编译器为您生成一个默认构造函数。如果你想要一个纯虚函数（派生类必须重写），你不应该添加函数体，所以不要添加`void Magic::display() {}`。由于你必须为析构函数提供一个主体，你可以内联定义它：

```
struct Magic {
    // use default constructor
    virtual void display() =0; // pure virtual function
    virtual ~Magic(); // virtual destructor
};

inline Magic::~Magic()
{
} 
```

甚至更简单：

```
#pragma once

struct Magic {
    virtual void display() =0;
    virtual ~Magic() {}
}; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-22T08:42:52.333

不，您可以`definition`为纯虚函数添加函数，但通常您不需要为纯虚函数提供函数定义。请注意，您缺少的函数返回类型`Magic::display()`应该是：

```
void Magic::display()
{
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-22T09:01:34.657

如果你的类只包含*虚*方法，它实际上定义了一个接口。接口本质上代表 2 个实体之间的契约，没有任何实现依赖。因此，作为一种良好的设计实践，您不仅不需要该`.cpp`文件，而且最好没有它。

由于您使用的是 VS，因此您还可以将 MS 扩展[__interface](http://msdn.microsoft.com/en-us/library/50h7kwtb%28v=vs.100%29.aspx)用于接口而不是具有纯虚拟方法的类（请注意，它不可移植）。

# mysql - MySQL：添加主键后数据丢失

> ID：14001357
> 
> 赞同：1
> 
> 时间：2012-12-22T08:41:48.887
> 
> 标签：mysql, insert, primary-key

在将主键添加到表后，我刚刚发现了一些非常奇怪的行为。在创建键之前，表中有 6,672 行。创建键后，有 103 行。但是，如果在空表上创建键，然后添加相同的数据，则有 6,672 行。是的，用于制作主键的所有值都是/是唯一的。我运行的代码如下。

表是“WC”：

```
CREATE TABLE `wc` (
  `gvkey` bigint(20) NOT NULL,
  `date_fin` date NOT NULL,
  `wc` double DEFAULT NULL,
  `wc_less_debt_st` double DEFAULT NULL,
  `curr_liab_x` double DEFAULT NULL,
  `wc_adj` double DEFAULT NULL,
  `wc_adj_v2` double DEFAULT NULL,
  PRIMARY KEY (`gvkey`,`date_fin`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

创建表后，运行以下代码：

```
ALTER TABLE wc
DROP PRIMARY KEY;

DELETE FROM wc;

INSERT INTO wc (date_fin, gvkey)
SELECT DISTINCT u.udate, g.gvkey 
FROM gvkey as g INNER JOIN udate as u
WHERE g.flag = TRUE;

ALTER TABLE wc
ADD PRIMARY KEY `gvkey-date` (gvkey asc, date_fin asc); 
```

测试表的大小：

```
SELECT COUNT(gvkey) FROM (SELECT gvkey FROM wc GROUP BY gvkey) AS x; 
```

如果在添加主键之前运行测试，则结果为 6,672。创建密钥后运行时，结果为 103。如果我再移动呼叫

```
ALTER TABLE wc
    ADD PRIMARY KEY `gvkey-date` (gvkey asc, date_fin asc); 
```

紧接着`delete from wc`然后运行`INSERT`​​then 它工作正常，导致表中有 6,672 行。

我以前遇到过一些问题，将主键添加到已经填充了数据的表中，但从来没有这么明显过。

这是已知的行为吗？将主键添加到填充的表中是否是不好的做法？我按此顺序执行此操作（填充然后创建 PK）的动机是因为我认为插入会在没有主键的情况下运行得更快。虽然这张表无关紧要，但我正在处理一些记录超过 3m 的表。我对数据库管理相当陌生，因此任何建议或解释都将不胜感激。我在其他任何地方都没有发现任何提及这一点。

谢谢，

# php - 在下拉菜单中创建复选框

> ID：14001360
> 
> 赞同：1
> 
> 时间：2012-12-22T08:42:20.723
> 
> 标签：php, javascript, html

这是我的选择下拉数组，我如何在每个选项前面设置复选框，并限制用户使用 javascript 选择最多 3 个选项。

```
<select  onclick="document.getElementById('cand_qual4').style.display='none'; " name="oca2[]" id="oca2"  multiple="multiple">
  <?php
 $odrop = array('B ','M C','D','A','L','k','P','I','OTHER');
 foreach ($odrop as $odrop1)
 {
     echo '<option value="' . $odrop1 . '"' . (isset($_POST['oca2']) && $_POST['oca2'] == $odrop1 ? ' selected' : '') . '>' . $odrop1 . '</option>';
  } 
 ?>         
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T08:45:53.633

您不能放置`<input type="checkbox" />`在`<select />`元素中；您必须编写一些 javascript 来模拟此功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T17:05:12.170

这是一个示例插件，您可以使用它来实现：[http ://www.erichynds.com/jquery/jquery-ui-multiselect-widget/](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/)

正如您通过复选框描述的那样，它提供多选。

（旁注：我只花了 2 分钟用谷歌搜索它。谷歌是你的朋友；）

# extjs - ExtJS4.2 中 MVC 的主要变化？

> ID：14001361
> 
> 赞同：7
> 
> 时间：2012-12-22T08:42:25.267
> 
> 标签：extjs, extjs4, extjs-mvc, extjs4.2

我最近听说 4.2 版对 MVC 应用程序的工作方式进行了一些重大更改。我下载了测试版，但 API 看起来都一样。谁能解释一下即将发生的变化以及这一切？如果我更新，我是否需要担心我所有的控制器都会停止工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T22:46:26.793

是的，我认为我们在 4.2 中对 MVC 所做的更改非常重要。然而，向后兼容一直是我们的首要任务。我确实承认，在 4.2 之前，MVC 实现存在许多长期未解决的问题，这促使人们跳过各种障碍来做他们需要的事情。我们一直在尝试解决这些问题并简化 MVC 体验，同时添加一些针对手头有大型应用程序的开发人员的功能。4.2 beta 2 将包括其中的大部分，我们很想听听您对它们的反馈。

我计划在 4.2 发布之前写下这些改进，但这里有一个快速列表：

*   `Ext.app.EventBus`，就像@sra 提到的那样，现在是一个单例，并且始终在您的应用程序中可用 - 尽管直接使用它没有多大意义
*   `Ext.app.Controller`不再依赖于`Ext.app.Application`做事，并且可以在不打开整个依赖树的情况下进行实例化——这意味着您可以对控制器进行单元测试！
*   现在可以创建您自己的扩展自 的应用程序类`Ext.app.Application`，并将您的逻辑包含在此类中
*   `Ext.application()`不再做无法言说的黑魔法；当传递您的应用程序类名称时，它只是实例化它。如果你像以前一样向它传递一个配置对象，它将使用这些配置选项声明新的应用程序类，并实例化它 - 与上面相同的逻辑，有点不同的执行
*   由于上述两项的结果，`Ext.application()`不再需要*同步*所有依赖关系树（它曾经），所以这是需要注意的一件事
*   现在可以在 Application 类中显式声明所有命名空间（项目部分），以避免在解析依赖项时出现任何歧义
*   `Ext.app.Application`现在可以*正确*处理自己的祖先，并且可以在您的应用程序中用作顶级控制器
*   *引入了事件域*的新概念；现在可以触发和监听与组件无关的事件。我们提供了几个开箱即用的域，并且很容易添加您自己的域 - 就像我前段时间在[我的文章中描述的那样，但更简洁、更强大](http://nohuhu.org/development/improving-ext-js-mvc-implementation/)

对于向后兼容性，还有一些小的改进和技巧，主要与依赖跟踪有关。如果你不做一些过于疯狂的事情，这些不应该让你绊倒。如果你这样做了，那就是 Beta 的用途。:)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-22T08:51:55.657

**不**，除非你在做完全奇怪的事情，否则你不必害怕。

那么主要的变化是控制器不再需要一个`Ext.app.Application`实例。这是由于改变了`Ext.app.EventBus`现在的单例，因此所有控制器都可以使用相同的实例。

这就是我现在所知道的。如果我得到新信息，我可能会更新我的帖子

# c - 我如何调用这个函数c

> ID：14001362
> 
> 赞同：0
> 
> 时间：2012-12-22T08:42:30.180
> 
> 标签：c, gnu

首先为提出这个愚蠢的问题道歉：

如何在 c (GNU C) 中调用此函数

```
char *ftoa(float f, char *buf, int places) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T08:54:22.340

这就是你所说的：

```
int decimal_places = 10;
char* result = malloc(decimal_places + 1);
ftoa(SOME_FLOAT_VALUE, result, decimal_places); 
```

该函数返回其`buf`参数。与往常一样，完成后不要忘记 free()`result`字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T12:02:52.233

我更喜欢：

```
#define DECIMALS 10
char result[DECIMALS+1];
ftoa(SOME_FLOAT_VALUE, result, decimal_places); 
```

我也建议使用 sprintf 以获得更大的灵活性。

我更喜欢静态分配的原因是这会占用更少的空间，当你离开函数时它会自动取消分配[如果这不是你想要的，显然，你可能需要 malloc，但在小变量的堆栈分配上，并且11字节很小！，应该是首选方式。我看到太多的代码分配毫无意义——它浪费了内存，并添加了额外的代码。[从堆中分配 11 个字节的开销可能超过 11 个字节，因为它必须四舍五入到 12 个字节，然后是一个“标题”来说明分配，在许多系统中是 16 或 32 个字节，在某些情况下 12 个字节]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T13:15:23.973

我认为 C 的 GNU 实现没有预定义的函数 ftoa()

您可以使用 sprintf() 如下：

```
float f;
char *a = (char *)malloc(10*sizeof(char)); //assuming you need 10 characters to store f
sprintf(a, "%f", f); 
```

如果您只想有特定的小数位数，您可以使用“%0.2f”（小数点后两位数）等代替“%f”

sprintf() 可以代替 itoa() 函数派上用场。例如：

```
char *a = (char *)malloc(10*sizeof(char);
int x = 10;
float f = 12.4;
sprintf(a, "%d", x);  //=itoa() function
sprintf(a, "%f", f); 
```

祝你好运！

# javascript - 无法检查正方形是否为空 tictactoe 游戏 jquery

> ID：14001366
> 
> 赞同：2
> 
> 时间：2012-12-22T08:42:52.833
> 
> 标签：javascript, jquery, tic-tac-toe

我正在编写一个tictactoe游戏，但是我用来检查用户是点击一个空方块还是已经填充的代码对我不起作用请看看我在做什么错误

```
function startgame(){
    var $board=$('#board');
    $('div.square').remove();

    for(var i=0;i<9;i++)
    $board.append($('<div/>').addClass('square').addClass('empty'));
    $('div.square.empty').click(function(){
        $this=$(this);

        if($('div.square.empty').length==0){

            displayendmsg();
        }
        else {
            $this.removeClass('empty');

            if(currentplayer=="X")
                $this.append($('<div><img src="cross.jpg">       </div>').addClass('cross').css('visibility','visible'));
            else
                $this.append($('<div><img src="circle.jpg">  </div>').addClass('circle').css('visibility','visible'));

            flipturn();
        }

    });
}; 
```

即使点击已经占据的广场，我进入处理程序也不知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T09:18:51.370

我拼凑了一个小[小提琴](http://jsfiddle.net/axelmichel/7PSwc/)来让这个东西活着。您仅为空元素（选择器：div.square.empty）捕获事件，像这样您只会找到空元素，您无法在内部对 .empty 长度进行测试，因为此函数仅对空元素做出反应。无论如何，我修改了你的功能是这样的：

```
function startgame(){
    var $board=$('#board');
    $('div.square').remove();
    for(var i=0;i<9;i++) {
        $board.append($('<div/>').addClass('square empty'));
    }
    $board.on('click','.square',function() {
        var elm = $(this);
        if(elm.hasClass('empty')) {
            elm.removeClass('empty');
            if(player === 'x') {
               elm.addClass('x');
               player = 'c';
            } else {
               elm.addClass('c'); 
               player = 'x';
            }
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T09:29:53.573

或者，您可以检查该字段是否有文本。

```
if($.trim($("handler").text()) == '') //Then it is obviously empty. 
```

# matlab - 如何将对象插入到单元格中？

> ID：14001369
> 
> 赞同：1
> 
> 时间：2012-12-22T08:43:12.690
> 
> 标签：matlab, insert, cell-array

我用谷歌搜索但找不到任何东西，尽管我认为这是一个普遍的需求。
我在 Matlab 中使用此函数将对象插入到单元格中：

```
function ce = insertInCell(ce,toInsert,idexx)
    ce = [ce(1:idexx-1,1); cellToInsert; ce(idexx:end,1);];
end 
```

我认为这个函数的工作原理是这样的：
**第一：**通过复制 ce(1:idexx-1,1) 创建一个新单元
**第二：**将 cellToInsert 添加到这个新单元
**第三：**复制并添加 ce(idexx:end,1); 到新细胞

我想知道是否有更有效的方法来做到这一点？我的意思是一个只更新元素索引的函数（或者我错了，这个函数有效吗？）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T16:11:44.850

MATLAB 不公开指针，因此您不能只更新索引（指针），除非您为此目的编写 MEX 文件。

您的代码中有一个错误：在代码中您引用了一个变量`cellToInsert`，但在函数定义中您只有`toInsert`.

您的代码仅适用于垂直元胞数组。它不适用于水平元胞数组或 n 维元胞数组。对于垂直元胞数组，它与`toInsert`-> `cellToInsert`fix 一起使用。

修正版：

```
function ce = insertInCell(ce,cellToInsert,idexx)
    ce = [ce(1:idexx-1); cellToInsert; ce(idexx:end) ];
end 
```

# c - 如何将中缀表达式转换为后缀表达式？

> ID：14001370
> 
> 赞同：0
> 
> 时间：2012-12-22T08:43:29.683
> 
> 标签：c, infix-notation

我正在尝试编写一个`C`程序来将中缀表达式转换为后缀并使用输入的值进行计算。当我输入 (2+14)*5 时，我得到 (2 14) 5 * + 但它应该是 2 14 + 5 *。所以我的问题：

1.  我哪里做错了？
2.  如何更改代码以删除最后一个表单（后缀）的括号？

谢谢你的帮助。

```
#include<stdio.h>
#include<string.h>
#include<math.h>

#define oper(x) (x=='+' || x=='-' || x=='*' || x=='/')

char in[30], post[30], stack[30];
int top=-1;

void push(char x)
{
    stack[++top]=x;
}

char pop()
{
    return stack[top--];
}

int precedence(char c)
{
    if (c=='+' || c=='-')
        return 1;
    if (c=='*' || c=='/')
        return 2;
    if (c=='(')
        return 3;
}

main()
{
    char c;
    int l,i,j=0,st1[20],k,h,f,eval,s,N;
    printf("Enter the infix expression : ");
    scanf("%s",&in);
    l=strlen(in);
    for(i=0;i<=l;i++)
    {
        if(oper(in[i]))
        {
            post[j++]=' ';
            while(precedence(in[i])<precedence(stack[top]))
            {
                post[j++]=stack[top];
                pop();
                post[j++]=' ';

            }
            push(in[i]);
        }
        else if(in[i]=='\0')
        {
            while(top!=-1)
            {
                post[j++]=' ';
                post[j++]=stack[top];
                pop();
            }
        }
        else
            post[j++]=in[i];
    }
    post[j]='\0';
    printf("Postfix Expression : %s\n",post);
    i=0;top=-1;f=0;k=0;
    while(i<j)
    {
        if(oper(post[i]))
        {
            f=1;
            c=post[i];
            eval=0;
            switch(c)
            {
                case '+':
                    eval=st1[top-1]+st1[top];
                    break; 
                case '-':
                    eval=st1[top-1]-st1[top];
                    break;
                case '*':
                    eval=st1[top-1]*st1[top];
                    break;
                case '/':
                    eval=st1[top-1]/st1[top];
                    break;
            }
            top--;
            st1[top]=eval; 
        }
        else if(post[i]==' ')
        {
            if(f==0)
            {
                h=i-k;
                s=0;
                while(post[h]!=' ')
                {
                    N=(int)post[h];
                    N=N-48;
                    s=s+N*(pow(10,(k-1)));
                    k--;
                    h++;
                }
                st1[++top]=s;
            }
            k=0;
        }
        else 
        {
            k++;
            f=0;
        }
        i++; 
    }
    printf("Value : %d\n",st1[top]);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T09:42:23.233

我没有详细查看您的代码，但您似乎没有以任何特殊方式处理输入中的括号；它们具有非常具体的含义 WRT 操作顺序。

我的猜测是您的程序将括号视为数字，并将输入解析为（分别用 L 和 R 代替左括号和右括号）L2 + (14R * 5)，在这种情况下输出是正确的.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-04-06T14:34:32.430

在函数`precedence`中，你应该尝试

```
if((c=='(') || (c==')')) {
  return 3;
} 
```

# opencv - 实现 OpenCV 特征匹配的具体过程，例如 match() 和 radiusMatch()

> ID：14001371
> 
> 赞同：1
> 
> 时间：2012-12-22T08:43:39.133
> 
> 标签：opencv, matching, knn

你好，我想改进特征匹配算法，所以我需要了解目前的特征匹配方法`OpenCV`。我对它的实施有些怀疑。

鉴于此方法：

```
void DescriptorMatcher::match(const Mat& queryDescriptors, const Mat& trainDescriptors, vector<DMatch>& matches, const Mat& mask = Mat()) const 
```

如何找到最佳匹配特征？

```
DescriptorMatcher::knnMatch() 
```

谁能告诉我这两种方法的具体算法或过程？

# ruby-on-rails - 是否可以一次自定义路由路径？

> ID：14001373
> 
> 赞同：0
> 
> 时间：2012-12-22T08:43:52.303
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing

如果我像下面这样设置路由，它会自动创建路径，例如 **community_community_topic**、 **new_community_community_topic**、 **edit_community_community_topic**

```
resources :communities, :path => "community" do
    resources :community_topics, :path => "topic"
end 
```

如果我想要这样的路径
**community_topic**而不是**community_community_topics**

如何编码我的 routes.rb？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T08:49:06.717

你试过用`:as`吗？请参阅[有关路由的 Railsguides](http://guides.rubyonrails.org/routing.html#nested-names)：

```
resources :magazines do
  resources :ads, :as => 'periodical_ads'
end 
```

# c# - 骑士之旅查找路径算法

> ID：14001378
> 
> 赞同：0
> 
> 时间：2012-12-22T08:44:13.963
> 
> 标签：c#, algorithm, path-finding, knights-tour

我必须从 [0,0] 开始并访问所有广场然后返回/坐在 [0,0]

图片来自我的董事会

![http://i.stack.imgur.com/muddG.png](../Images/02c622673542060e9160c6d71c54d22e.png)

这是我尝试过的代码：

```
public class chess_F
{
    // save my current position
    struct position
    {
        public int row;
        public int col;
    };

    const int NOT_VISITED = 0;

    // my board
    private int[,] cols = new int[8, 8];

    // main function 
    public void Do()
    {
        position start;
        start.row = 0;
        start.col = 0;

        initializeBoard(ref cols);

        move(start, cols);
    }

    private void initializeBoard(ref int[,] board)
    {
        for (int i = 0; i < 8; i++)
            for (int j = 0; j < 8; j++)
                board[i, j] = NOT_VISITED;
    }

    private bool visited(int[,] board, position square)
    {
        return board[square.row, square.col] != NOT_VISITED;
    }

    /*  |---|---|-0-|---|-1-|---|---|---|
     *  |---|-7-|---|---|---|-2-|---|---|
     *  |---|---|---|-X-|---|---|---|---|
     *  |---|-6-|---|---|---|-3-|---|---|
     *  |---|---|-5-|---|-4-|---|---|---|
     *  |---|---|---|---|---|---|---|---|
     *  |---|---|---|---|---|---|---|---|
     *  |---|---|---|---|---|---|---|---|
     */

    // find all cols for my knight - can sit on
    private position[] findPath(position present, int[,] cols)
    {
        position[] temp = new position[8];
        position mytemp;

        for (int i = 0; i < 8; i++)
        {
            try
            {
                //path 0
                switch (i)
                {
                    case 0:
                        {
                            if (cols[present.row - 1, present.col - 2] == 0)
                            {
                                mytemp.row = present.row - 1;
                                mytemp.col = present.col - 2;
                                temp[i] = mytemp;
                            }
                            break;
                        }

                    //path 1
                    case 1:
                        {
                            if (cols[present.row + 1, present.col - 2] == 0)
                            {
                                mytemp.row = present.row + 1;
                                mytemp.col = present.col - 2;
                                temp[i] = mytemp;
                            } break;
                        }

                    //path 2
                    case 2:
                        {
                            if (cols[present.row + 2, present.col - 1] == 0)
                            {
                                mytemp.row = present.row + 2;
                                mytemp.col = present.col - 1;
                                temp[i] = mytemp;
                            } break;
                        }
                    //path 3
                    case 3:
                        {
                            if (cols[present.row + 2, present.col + 1] == 0)
                            {
                                mytemp.row = present.row + 2;
                                mytemp.col = present.col + 1;
                                temp[i] = mytemp;
                            } break;
                        }

                    //path 4
                    case 4:
                        {
                            if (cols[present.row + 1, present.col + 2] == 0)
                            {
                                mytemp.row = present.row + 1;
                                mytemp.col = present.col + 2;
                                temp[i] = mytemp;
                            } break;
                        }

                    //path 5
                    case 5:
                        {
                            if (cols[present.row - 1, present.col + 2] == 0)
                            {
                                mytemp.row = present.row - 1;
                                mytemp.col = present.col + 2;
                                temp[i] = mytemp;
                            } break;
                        }

                    //path 6
                    case 6:
                        {
                            if (cols[present.row - 2, present.col - 1] == 0)
                            {
                                mytemp.row = present.row - 2;
                                mytemp.col = present.col - 1;
                                temp[i] = mytemp;
                            } break;
                        }

                    //path 7
                    case 7:
                        {
                            if (cols[present.row - 2, present.col - 1] == 0)
                            {
                                mytemp.row = present.row - 2;
                                mytemp.col = present.col - 1;
                                temp[i] = mytemp;
                            } break;
                        }
                }
            }
            catch
            {
                mytemp.row = -1;
                mytemp.col = -1;
                temp[i] = mytemp;
            }
        }
        return temp;
    }

    // check all cols and row to check ...
    private bool allVisited(int[,] cols)
    {
        for (int i = 0; i < 8; i++)
            for (int j = 0; j < 8; j++)
                if (cols[i, j] != 1)
                    return false;
        return true;

    }

    // save true path
    int[,] truepath;
    private void move(position present, int[,] cols)
    {
        int[,] tempCols = cols;
        tempCols[present.row, present.col] = 1;
        position[] avaliable = findPath(present, tempCols);

        if (avaliable.Count() < 1)
            return;

        for (int i = 0; i < avaliable.Count(); i++)
        {
            if (allVisited(tempCols))
            {
                truepath = tempCols;
            }
            else
            {
                if (avaliable[i].row != -1 && avaliable[i].row != 0)
                    move(avaliable[i], tempCols);
            }
        }
    }
} 
```

我的问题是 truepath 变量总是为空，我不能给出三元组

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T06:19:35.157

也许你在*移动*功能中犯了一些错误。以下声明：</p>

```
if (avaliable[i].row != -1 && avaliable[i].row != 0)
                    move(avaliable[i], tempCols); 
```

你不是说：

```
if (avaliable[i].row != -1 && avaliable[i].col!= -1)
                    move(avaliable[i], tempCols); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T17:55:12.863

一旦我回顾了骑士之旅，也许这可以给你一个想法：

```
import java.awt.*;
import javax.swing.*;

@SuppressWarnings("serial")
public class KnightTour extends JComponent
{
    private int maxRows;    // number of rows (and cols!) on board
    private int move=0;     // how many successful moves we've made
    private int board[][];  // contains move number
    private static final int CELLSIZE = 30;  // graphical size of each cell of board

    public KnightTour(int maxRows)
    {
        JFrame frame = new JFrame("Knight Tour");
        this.maxRows = maxRows;
        board = new int[maxRows][maxRows];

        // clear the board
        for  (int i=0; i<maxRows; ++i)
         for (int j=0; j<maxRows; ++j)
           board[i][j] = 0;

        setPreferredSize(new Dimension(maxRows*CELLSIZE, maxRows*CELLSIZE));
        frame.getContentPane().add(this);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setVisible(true);
    }

    private void showBoard()
    {
        repaint();
        try {
            Thread.sleep(0);
        } catch (InterruptedException e)
        { /* ignore, shouldn't happen */ }
    }

    @Override
    public void paintComponent(Graphics g)
    {
        for (int i=0; i<=maxRows; ++i) { // draw grid
             g.drawLine(0,i*CELLSIZE, CELLSIZE*maxRows,i*CELLSIZE);
             for (int j=0; j<=maxRows; ++j)
                g.drawLine(j*CELLSIZE, 0, j*CELLSIZE, CELLSIZE*maxRows);
        }
        for (int i=0; i<maxRows; ++i) // draw moves
            for (int j=0; j<maxRows; ++j)
                if (board[i][j] != 0)
                    g.drawString(""+board[i][j], CELLSIZE/4+i*CELLSIZE, CELLSIZE*3/4+j*CELLSIZE);
    }

    public boolean solve(int row, int column)
    {
        if (row < 0 || column < 0 || row >= maxRows || column >= maxRows || board[row][column]!=0)
            return false; // out of range or already been to this cell
        board[row][column] = ++move;
        showBoard();

        if (move == maxRows*maxRows)
            return true; // filled the board!

        // try all possible moves from here
        if (   solve(row-2, column-1)
            || solve(row-2, column+1)
            || solve(row+2, column-1)
            || solve(row+2, column+1)
            || solve(row-1, column-2)
            || solve(row+1, column-2)
            || solve(row-1, column+2)
            || solve(row+1, column+2)) {
           repaint(); // in case not showing each move separately
           return true; // success!
        }

        board[row][column] = 0; // failed - remove current move
        --move;
        showBoard();
        return false;
    }

    public static void main(String args[])
    {
        KnightTour board = new KnightTour(6);
        if (board.solve(0,0))  // try solution starting at upper left
            System.out.println("Solution found.");
        else
            System.out.println("No solution found.");
    }
} 
```

最重要的是这个方法，看一看，试试你的动作

```
public boolean solve(int row, int column)
    {
        if (row < 0 || column < 0 || row >= maxRows || column >= maxRows || board[row][column]!=0)
            return false; // out of range or already been to this cell
        board[row][column] = ++move;
        showBoard();

        if (move == maxRows*maxRows)
            return true; // filled the board!

        // try all possible moves from here
        if (   solve(row-2, column-1)
            || solve(row-2, column+1)
            || solve(row+2, column-1)
            || solve(row+2, column+1)
            || solve(row-1, column-2)
            || solve(row+1, column-2)
            || solve(row-1, column+2)
            || solve(row+1, column+2)) {
           repaint(); // in case not showing each move separately
           return true; // success!
        }

        board[row][column] = 0; // failed - remove current move
        --move;
        showBoard();
        return false;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T16:00:36.717

如果您的矩阵尺寸相等，那么也许您可以使用以下方法：
将矩阵划分为 4 个象限。然后你有
2 | 1
3 | 4、象限。
第二象限的路径很简单：第一行第一列。
其他的也很简单。所有作为圆点的元素（中心=矩阵的中心，如果 nxn 则 (n/2,n/2)，并且 r=n/2）。
难点是如何确定一个点是否是圆的一部分。

```
 public static PointF PointOnCircle(float radius, float angleInDegrees, PointF origin)
{
    // Convert from degrees to radians via multiplication by PI/180        
    float x = (float)(radius * Math.Cos(angleInDegrees * Math.PI / 180F)) + origin.X;
    float y = (float)(radius * Math.Sin(angleInDegrees * Math.PI / 180F)) + origin.Y;

    return new PointF(x, y);
} 
```

参考[https://stackoverflow.com/a/839904/349007](https://stackoverflow.com/a/839904/349007)

# php - 在 url 上使用页面/帖子的标题

> ID：14001380
> 
> 赞同：2
> 
> 时间：2012-12-22T08:44:40.547
> 
> 标签：php

我用来显示在 [http://www.mywebaddress.com/bids/display.php?id=id](http://www.mywebaddress.com/bids/display.php?id=id)之类的网站上创建的页面 ，但我想在 url 上显示带有页面标题的页面，比如 [http:// www.mywebaddress.com/bids/title-of-the-bid/](http://www.mywebaddress.com/bids/title-of-the-bid/)或 bids/title-of-the-bid.html

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T11:07:14.417

这是一个可用于创建 URL 的函数

```
/**
     * 创建 URL 标题
     *
     * 将“title”字符串作为输入并创建一个
     * 带有破折号的人性化 URL 字符串
     * 或下划线作为单词分隔符。
     *
     * @访问公共
     * @param string 字符串
     * @param 字符串分隔符：破折号或下划线
     * @return 字符串
     */
函数 urlTitle($str, $separator = '下划线', $lowercase = TRUE)
    {
        if ($separator == '破折号')
        {
            $搜索 = '_';
            $replace = '-';
        }
        别的
        {
            $搜索 = '-';
            $replace = '_';
        }

        $trans = 数组（
                '&\#\d+?;' => '',
                '&\S+?;' => '',
                '\s+' => $替换，
                '[^a-z0-9\-\._]' => '',
                $replace.'+' => $replace,
                $replace.'$' => $replace,
                '^'.$replace => $replace,
                '\.+$' => ''
        );

        $str = strip_tags($str);

        foreach ($trans as $key => $val)
        {
            $str = preg_replace("#".$key."#i", $val, $str);
        }

        if ($小写 === TRUE)
        {
            $str = strtolower($str);
        }

        返回修剪（rtrim（stripslashes（$str），$replace））；
    }

```

这与 codeigniter 框架中的 url 辅助函数中使用的代码非常相似。

*如何使用？*

```
$title = "很好的表达方式";

echo urlTitle($title);//输出：“nice_way_to_put_it”

```

其余的自定义取决于您，但这肯定是一个好的开始

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T09:33:37.580

看看这个页面的网址。

你可以让你的网址像

```
http://www.mywebaddress.com/bids/1234/title-of-the-bid/ 
```

其中 1234 是您传递的帖子 ID，下一个参数可帮助您构建对 seo 友好的 url。

另外，如果你想喜欢

```
http://www.mywebaddress.com/bids/title-of-the-bid/ 
```

然后尝试使帖子的标题在数据库中唯一，您可以通过该字段查询以检索数据。第一个选项会更好。如果您仍想采用第二种方法，请在使标题独一无二后尝试使用[本文执行此操作。](http://www.seomoz.org/ugc/using-mod-rewrite-to-convert-dynamic-urls-to-seo-friendly-urls)

为了做同样的事情，你必须在 apache [mod_rewrite的帮助下编写一个 url 重写规则](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T09:43:13.287

这将非常有帮助，不仅适用于这个示例，还适用于任何其他干净的 url 内容。

[http://www.generateit.net/mod-rewrite/](http://www.generateit.net/mod-rewrite/)

# python - 正则表达式解析电子邮件 Python

> ID：14001382
> 
> 赞同：1
> 
> 时间：2012-12-22T08:45:11.290
> 
> 标签：python, regex

因此，这是我要解析的电子邮件示例，仅提取其正文。

```
RECEIVED: 2012-11 20 09:59:24
SUBJECT: Get Boddy
--- Original Sender: Mark Twain. ---

----- Original Message -----
From: Boby Indo
To: Obum Hunter 
At: 11/20  9:59:22

***NEW ISSUE SUPPORTED THROUGH UNIVERSALITY   vs 104-13 on AY 3s JAN   
10+BB {MYXV ABC 4116    SM  MYXV YA 102-15 <DO>} | 2010/11 4.0s             4.0s
6+ BB {MYXV ABC 4132    NS  MYXV YT 102-22 <DO>} | 2010 4.5s                4.5s
ABO 2006-OP1 M1     00442PAG5     19-24      p5 
***SECOND SUPPORTED TRHOUGH INVERSALITY GEVINGS                      
10+BB  {NXTW VXA 4061   SL  MYXV YA 103-22 <DO>} | 11 wala 3.5s             3.5s
10+BB  {NXTW VXA 12-47  SP  MYXV YA 106-20 <DO>} | 22 wala 4.0s             4.0s

------------------------------------------------------------
© Copyright 2012 The Ridgly Group, Inc. All rights reserved. See
http://www.examply.html for important information disclosure. 
```

这是我的期望：

```
***NEW ISSUE SUPPORTED THROUGH UNIVERSALITY   vs 104-13 on AY 3s JAN   
10+BB {MYXV ABC 4116    SM  MYXV YA 102-15 <DO>} | 2010/11 4.0s             4.0s
6+ BB {MYXV ABC 4132    NS  MYXV YT 102-22 <DO>} | 2010 4.5s                4.5s
ABO 2006-OP1 M1     00442PAG5     19-24      p5 
***SECOND SUPPORTED TRHOUGH INVERSALITY GEVINGS                      
10+BB  {NXTW VXA 4061   SL  MYXV YA 103-22 <DO>} | 11 wala 3.5s             3.5s
10+BB  {NXTW VXA 12-47  SP  MYXV YA 106-20 <DO>} | 22 wala 4.0s             4.0s 
```

如果`***`线条也可以消除就好了。

这就是我到目前为止所得到的`(?P<header>[\S+\s]+At:.*)\n+(?P<body>[\S+\s]([\d\.\d]+[a-z]?$))`。这似乎做得不好，因为它在最后 4.0 秒后抓住了虚线并卡在了非 ascii 字符`©`上。谢谢！

PS：我认为最好的方法是用组切断电子邮件的标题和尾部。所以剩下的就是身体了。因为标题和尾部始终保持不变，但正文在不同的电子邮件中会发生变化。解决方案不需要特定于电子邮件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T09:01:44.750

看看这是否适合您，您想要的行以数字开头，后跟加号：

```
^[0-9]*\+.*$ 
```

这将匹配预期的输出：

```
\*{3}[^\*]*(?:(?=\*{3})|(?=^-*$)) 
```

> 1.  **^** 匹配字符串的开头。
> 2.  **[0-9]**匹配 0-9 范围内的任何单个字符。
> 3.  *****匹配 0 个或多个前面的令牌。这是一个贪心匹配，在满足下一个标记之前会匹配尽可能多的字符。
> 4.  **\+**匹配一个 + 字符。
> 5.  **.** 匹配任何字符。
> 6.  **$**匹配字符串的结尾。

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-
import re
with open("/path/to/file", "r") as fileInput:
    listLines = [   line.strip()
                    for line in fileInput.readlines()
                    if re.match("^[0-9]*\+.*$", line)
                    ] 

for line in listLines:
    print line

>>> 10+BB {MYXV ABC 4116    SM  MYXV YA 102-15 <DO>} | 2010/11 4.0s             4.0s
>>> 6+ BB {MYXV ABC 4132    NS  MYXV YT 102-22 <DO>} | 2010 4.5s                4.5s
>>> 10+BB  {NXTW VXA 4061   SL  MYXV YA 103-22 <DO>} | 11 wala 3.5s             3.5s
>>> 10+BB  {NXTW VXA 12-47  SP  MYXV YA 106-20 <DO>} | 22 wala 4.0s             4.0s 
```

更新以满足新要求：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-
import re
with open("/path/to/file", "r") as fileInput:
    regex = re.compile(r"\*{3}[^\*]*?(?:(?=^-*$)|(?=\*))", re.MULTILINE)

    listMsg = [ [   line.strip()
                    for line in message.split("\n")
                    if not line.startswith("*") and line.strip()
                    ]
                for message in regex.findall(fileInput.read())
                ]

>>> 10+BB {MYXV ABC 4116    SM  MYXV YA 102-15 <DO>} | 2010/11 4.0s             4.0s
>>> 6+ BB {MYXV ABC 4132    NS  MYXV YT 102-22 <DO>} | 2010 4.5s                4.5s
>>> ABO 2006-OP1 M1     00442PAG5     19-24      p5
>>> 10+BB  {NXTW VXA 4061   SL  MYXV YA 103-22 <DO>} | 11 wala 3.5s             3.5s
>>> 10+BB  {NXTW VXA 12-47  SP  MYXV YA 106-20 <DO>} | 22 wala 4.0s             4.0s 
```

更新以提取电子邮件的整个正文：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-
import re
with open("/path/to/file", "r") as fileInput:
    regex = re.compile(r"(?<=^At:)([^\n\r]*)(.*?)(?=^-*-$)", re.MULTILINE|re.DOTALL)

    print regex.search(fileInput.read()).groups()[1]

>>> ACE 2006-OP1 ZZ 111111111 19-24 Z5 ZZW 2012-0P1 SD 222222222 77-00 150
>>> ***NEW ISSUE SUPPORTED THROUGH UNIVERSALITY   vs 104-13 on AY 3s JAN   
>>> 10+BB {MYXV ABC 4116    SM  MYXV YA 102-15 <DO>} | 2010/11 4.0s             4.0s
>>> 6+ BB {MYXV ABC 4132    NS  MYXV YT 102-22 <DO>} | 2010 4.5s                4.5s
>>> ABO 2006-OP1 M1     00442PAG5     19-24      p5 
>>> ***SECOND SUPPORTED TRHOUGH INVERSALITY GEVINGS                      
>>> 10+BB  {NXTW VXA 4061   SL  MYXV YA 103-22 <DO>} | 11 wala 3.5s             3.5s
>>> 10+BB  {NXTW VXA 12-47  SP  MYXV YA 106-20 <DO>} | 22 wala 4.0s             4.0s 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T09:01:56.187

```
>>> s="""RECEIVED: 2012-11 20 09:59:24
... SUBJECT: Get Boddy
... --- Original Sender: Mark Twain. ---
... 
... ----- Original Message -----
... From: Boby Indo
... To: Obum Hunter 
... At: 11/20  9:59:22
... 
... ***NEW ISSUE SUPPORTED THROUGH UNIVERSALITY   vs 104-13 on AY 3s JAN   
... 10+BB {MYXV ABC 4116    SM  MYXV YA 102-15 <DO>} | 2010/11 4.0s             4.0s
... 6+ BB {MYXV ABC 4132    NS  MYXV YT 102-22 <DO>} | 2010 4.5s                4.5s
... ABO 2006-OP1 M1     00442PAG5     19-24      p5 
... ***SECOND SUPPORTED TRHOUGH INVERSALITY GEVINGS
... 10+BB  {NXTW VXA 4061   SL  MYXV YA 103-22 <DO>} | 11 wala 3.5s             3.5s
... 10+BB  {NXTW VXA 12-47  SP  MYXV YA 106-20 <DO>} | 22 wala 4.0s             4.0s
... 
... ------------------------------------------------------------
... © Copyright 2012 The Ridgly Group, Inc. All rights reserved. See
... http://www.examply.html for important information disclosure."""
>>> r=r'(?P<header>\*\*\*[^\n]*)\n(?P<body>[\s\S]*?\n)\n'
>>> for match in re.finditer(r, s):
...     print match.group('body')
... 
10+BB {MYXV ABC 4116    SM  MYXV YA 102-15 <DO>} | 2010/11 4.0s             4.0s
6+ BB {MYXV ABC 4132    NS  MYXV YT 102-22 <DO>} | 2010 4.5s                4.5s

10+BB  {NXTW VXA 4061   SL  MYXV YA 103-22 <DO>} | 11 wala 3.5s             3.5s
10+BB  {NXTW VXA 12-47  SP  MYXV YA 106-20 <DO>} | 22 wala 4.0s             4.0s 
```

# c++ - 如何将 asio 与设备文件一起使用

> ID：14001387
> 
> 赞同：9
> 
> 时间：2012-12-22T08:45:56.613
> 
> 标签：c++, linux, boost, boost-asio

我在整个项目中都在使用 boost asio。我现在想读取设备文件 ( `/dev/input/eventX`)。在 boost asio 文档中，它指出普通文件 IO 是不可能的，但使用支持设备文件或管道`asio::posix::stream_descriptor.`

我通过 open 打开文件描述符并将其分配给 stream_descriptor。我现在发出一个`async_read()`永远不会返回的电话。

是否可以将 boost asio 与输入事件一起使用？在通过 ioctl 与 asio 一起使用之前，我是否需要配置文件句柄？

编辑：添加一些示例代码 -> 添加了一些示例代码。

以下代码打开 /dev/input/event12 并调用 io_service 对象的 run 方法。

```
#include <boost/asio.hpp>
#include <string>
#include <iostream>
#include <boost/bind.hpp>
#include <linux/input.h>

namespace asio = boost::asio;
#ifdef BOOST_ASIO_HAS_POSIX_STREAM_DESCRIPTOR
typedef asio::posix::stream_descriptor stream_descriptor;
#else // BOOST_ASIO_HAS_POSIX_STREAM_DESCRIPTOR
typedef asio::windows::stream_handle stream_descriptor;
#endif // BOOST_ASIO_HAS_POSIX_STREAM_DESCRIPTOR

class FileReader
{
    typedef boost::shared_ptr<asio::streambuf> StreambufPtr;
    typedef boost::shared_ptr<FileReader> FileReaderPtr;
    typedef boost::weak_ptr<FileReader> FileReaderWeakPtr;
    public:
    static FileReaderWeakPtr Create(asio::io_service& io_service, const std::string& path);
    virtual ~FileReader();

    void HandleRead(FileReaderPtr me, StreambufPtr sb,
                    const boost::system::error_code &error);
private:
    FileReader(asio::io_service& io_service, const std::string& path);
    stream_descriptor m_InputStream;
};

FileReader::FileReaderWeakPtr FileReader::Create(asio::io_service& io_service,
                                                 const std::string& path){
    FileReaderPtr ptr(new FileReader(io_service, path));
    StreambufPtr sb(new boost::asio::streambuf());

    asio::async_read(ptr->m_InputStream, *sb,
            boost::bind(&FileReader::HandleRead, ptr.get(),
            ptr, sb, asio::placeholders::error));
    return ptr;
}

FileReader::FileReader(asio::io_service& io_service, const std::string& path)
    :m_InputStream(io_service)
{
    int dev = open(path.c_str(), O_RDONLY);
    if (dev == -1) {
        throw std::runtime_error("failed to open device " + path);
    }

    m_InputStream.assign(dev);
}

void FileReader::HandleRead(FileReaderPtr me, StreambufPtr sb,
                    const boost::system::error_code &error) {
    if(!error) {
        //Inform all of a sucessfull read
        std::istream is(sb.get());
        size_t data_length = sb->size();
        asio::async_read(m_InputStream, *sb,
            boost::bind(&FileReader::HandleRead, this, me, sb, asio::placeholders::error));
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T18:42:12.457

问题是我在没有任何完整条件的情况下使用 async_read。因此，从未调用过回调。更改对 async_read_some 的调用后，一切都按预期工作。

# java - 用于在 Java 中与 USB 设备交互的跨平台库

> ID：14001388
> 
> 赞同：1
> 
> 时间：2012-12-22T08:46:00.900
> 
> 标签：java, usb, cross-platform

**任何用于Java中USB交互的API或库，我将用来编写的函数都不需要随着它们运行的​​平台的变化而改变？这样我的应用程序将在 Windows、Linux 和 Mac 上运行吗？**

我的应用程序将完成的工作基本上是

*   获取 USB 设备的名称
*   能够在用户注销之前判断设备是否仍停靠在计算机上
*   弹出 USB 设备 [好吧，不是从字面上看，那将是荒谬的]，例如安全删除 Windows。
*   实时检测 USB 设备上的已用空间和可用空间。

我在[javax.usb - JSR080 项目](http://javax-usb.sourceforge.net/)上找到 但是在他们的页面上，说：

`javax-usb-ri-windows : This is an ABANDONED Windows implementation. it does not work, it needs a kernel driver.`

和 ：`The OS-independent Reference Implementation contains a common partial implementation of javax.usb`

我只需要一个跨平台的 API 并且.. 只需阅读第一行。

我还尝试查看用于 C++ 的 libusb，以及它的 Python 包装器 PyUSB，[我喜欢 Python，必须检查一下]。但是客户端需要 Java 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T08:42:46.057

**看看[JavaHIDAPI](https://code.google.com/p/javahidapi/)**

这是一个跨平台的人机接口设备 (HID) 库，适用于 Windows、Mac 和 Linux。它为每个库提供了所有本地库，并在 Java 中具有易于使用的界面。文档有点稀疏，但它应该可以让您快速启动并运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T08:54:07.787

JVM 没有对主机操作系统的那种控制。唯一的方法是使用足够的权限运行 shell 命令（每个平台不同），并解析结果（同样，每个平台）。这肯定涉及不同平台的不同代码。

# node.js - Sequelize QueryChainer 语法

> ID：14001389
> 
> 赞同：1
> 
> 时间：2012-12-22T08:46:28.793
> 
> 标签：node.js, chain, sequelize.js

Sequelize QueryChainer 遇到一些困难。通常我不需要这样做，但我很早就决定处理我自己的关联，而不是使用关联管理中内置的模块（结果证明这是相当惩罚的）。

我正在写出我的 REST 例程，并尝试根据已经获取或需要获取的其他记录删除一些记录。我决定使用 QueryChainer 和串行运行，而不是使用 4-5 个嵌套回调。

在此示例中，我正在使用一个用户，如果找到一个用户，我想将一行查询拼接在一起以处理特定关联的删除。我遇到的问题主要是理解链接器的语法，而不仅仅是使用模型 EventEmitting 方法。

```
 // Find user, destroy it and associations
    db.Models.user.find({ where: {STUID: id} })
        .success(function (user) {
            if (!user) {
                res.locals.err = {
                    status: 'FAILED',
                    message: 'Could not delete user',
                    reason: 'No user resource found'
                }
            } else {
                chain = new db._sqlize.Utils.QueryChainer();
                chain.add(user.destroy())

                // Check and destroy author association
                if (user.AUTHOR) {
                    // Would like to fetch the specific author model
                    // db.models.author.find({})
                    // ... and destroy it too,
                    // author.destroy()
                    // without having to nest
                }

            }
        }); 
```

sequelize[查询链](http://sequelizejs.com/#query-chainer)语法指定执行如下操作：

```
.add(Model, 'function', [param1, param2]) 
```

但我不太确定这到底意味着什么。我可以在这里定义内联函数吗？函数只是一个寻找已经在别处定义的字符串，还是我正在“添加”的模型的函数？医生们觉得这里有点匆忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T06:58:33.737

queryChain 需要的语法是：

```
.add(sequelize, 'sync', [ {force: true} ])
.add(Partner, 'create', [ {name: 'foo'} ]) 
```

我犯了同样的错误，你可以在这里看到：[https ://github.com/sdepold/sequelize/issues/385#issuecomment-11690183](https://github.com/sdepold/sequelize/issues/385#issuecomment-11690183)

# java - 在服务器启动时出现弹簧自动装配错误

> ID：14001390
> 
> 赞同：0
> 
> 时间：2012-12-22T08:46:55.237
> 
> 标签：java, spring

我正在通过创建 spring3 restful 项目来处理测试示例。我配置并创建了所有必要的文件，但是当我启动我的服务器时，我得到了以下错误-----

```
 org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:486)
        at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:92)
        Truncated. see log file for complete stacktrac

    --------------------applicationContext.xml file--------------------------
  below is my applicationContext.xml file

    <?xml version="1.0" encoding="UTF-8"?>

    <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:context="http://www.springframework.org/schema/context"
        xmlns:mvc="http://www.springframework.org/schema/mvc"   
        xsi:schemaLocation="http://www.springframework.org/schema/beans
            http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
            http://www.springframework.org/schema/context
            http://www.springframework.org/schema/context/spring-context-3.0.xsd
            http://www.springframework.org/schema/mvc
            http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

    <!-- Activates various annotations to be detected in bean classes-->
    <context:annotation-config />

    <!-- Scans the classpath for annotated components that will be auto-registered as Spring beans.
    For example @Controller and @Service. Make sure to set the correct base-package -->
    <context:component-scan base-package="org.nea.rest.abc" />
    <context:component-scan base-package="org.nea.spring.services.interfaces.test" />

     <bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping" />  

    <!-- Configures the annotation-driven Spring MVC Controller programming model.
    Note that, with Spring 3.0, this tag works in Servlet MVC only! -->
    <mvc:annotation-driven />

    </beans>

    -------------------------<abc>-servlet.xml file(spring bean) file-------------------

    <?xml version="1.0" encoding="UTF-8"?>

    <beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

    <!-- Specify a view resolver for JSP files-->
    <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver"
    p:prefix="/WEB-INF/jsp/" p:suffix=".jsp" />

    </beans>

    -----------------------java file --------------------------- 
```

下面是我制作方法的文件，我必须通过 restful 公开

```
 package org.nea.rest.unsr;

    import java.util.ArrayList;
    import java.util.List;

    import org.apache.commons.logging.Log;
    import org.apache.commons.logging.LogFactory;

    import org.springframework.beans.factory.annotation.Autowired;
    import org.springframework.stereotype.Component;
    import org.springframework.stereotype.Controller;
    import org.springframework.web.bind.annotation.PathVariable;
    import org.springframework.web.bind.annotation.RequestMapping;
    import org.springframework.web.bind.annotation.RequestMethod;
    import org.springframework.web.bind.annotation.ResponseBody;

    @Controller 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T09:35:28.613

扩展@jbnizet 评论...“实现类必须是 Spring bean。通过在 XML 文件中声明它，或者使用 Spring 注释（例如组件或服务）对其进行注释。”

您可以将其添加到 appContext ：

```
<context:component-scan base-package="com.yourbasepackage"/> 
```

这将允许您添加注释

```
@Service("uniservService")
public class UniservServiceJPAImpl implements UniservSearchInterface {
} 
```

然后您可能还希望这些用于更全面的注释处理：

```
<!--Indicates that transaction configuration is defined by Java 5
    annotations on bean classes -->
<tx:annotation-driven transaction-manager="yourtransactionManager"/>

 <!-- Activates various annotations to be detected in bean classes: Spring's @Required and
    @Autowired, as well as JSR 250's @PostConstruct, @PreDestroy and @Resource (if available) -->
    <context:annotation-config/> 
```

# audio - iPhone 3G 中的 Cocos2D 音量低？

> ID：14001391
> 
> 赞同：1
> 
> 时间：2012-12-22T08:47:00.793
> 
> 标签：audio, cocos2d-iphone, box2d, avaudiorecorder, iphone-3gs

我有一个包含 AVAudioRecorder 对象（麦克风监听）的 Cocos2D(Box2D) 项目。iPhone 4 的音频我没有问题，但 iPhone 3G 的音频音量非常低！我确实将设备音量增加到最大音量，但音频音量仍然没有改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T11:46:23.890

我发现了问题！音频音量低，因为在电话扬声器（不是主扬声器）中播放音频。

要在主扬声器中播放音频，我们需要以下代码：

```
UInt32 doChangeDefaultRoute = 1;     
AudioSessionSetProperty(
   kAudioSessionProperty_OverrideCategoryDefaultToSpeaker,
   sizeof(doChangeDefaultRoute),
   &doChangeDefaultRoute
); 
```

# javascript - 似乎无法从 D3js 工作中获得示例？

> ID：14001394
> 
> 赞同：0
> 
> 时间：2012-12-22T08:47:22.477
> 
> 标签：javascript, html, d3.js, frontend

我是 D3 的新手，我在从[d3.js](https://d3js.org/)站点获取示例时遇到了一些麻烦。例如，这里有一个来自该站点的 git gist。然而，克隆 gist ( [https://gist.github.com/3887051](https://gist.github.com/3887051) )，或在本地复制代码 ( [http://bl.ocks.org/3887051#index.html](http://bl.ocks.org/3887051#index.html) ) 似乎无法在浏览器？我编写了一些简单的 d3 代码，效果很好，但是由于 d3 完全是客户端，我还需要设置什么吗？

**[编辑]**由于使用 XMLHttpRequest 数据，这些示例似乎需要从服务器提供。当更简单的 d3 代码在没有它的情况下工作时，有人可以解释这是什么以及为什么它是必要的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T09:55:39.677

我假设您正在使用 Chrome 运行示例并收到以下错误：

```
XMLHttpRequest cannot load file://.../data.csv. Cross origin requests are only supported for HTTP. 
```

试试 Firefox，这个例子应该可以工作。[跨站点 HTTP 请求](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS?redirectlocale=en-US&redirectslug=HTTP_access_control)会导致此问题。

如果您想使用 Chrome，请使用`-allow-file-access-from-files`. 但不推荐这样做，所以从长远来看，启动您自己的网络服务器并从那里运行代码。

# cuda - 奇怪的 cudaMemcpyAsync 同步行为

> ID：14001397
> 
> 赞同：1
> 
> 时间：2012-12-22T08:47:32.853
> 
> 标签：cuda

以下代码用于测试 cudaMemcpyAsync 的同步行为。

```
#include <iostream>
#include <sys/time.h>

#define N 100000000

using namespace std;

int diff_ms(struct timeval t1, struct timeval t2) 
{
    return (((t1.tv_sec - t2.tv_sec) * 1000000) +
            (t1.tv_usec - t2.tv_usec))/1000;
}

double sumall(double *v, int n)
{
    double s=0;
    for (int i=0; i<n; i++) s+=v[i];
    return s;
}

int main()
{
    int i;

    cudaStream_t strm;
    cudaStreamCreate(&strm);

    double *h0;
    double *h1;
    cudaMallocHost(&h0,N*sizeof(double));
    cudaMallocHost(&h1,N*sizeof(double));

    for (i=0; i<N; i++) h0[i]=99./N;
    double *d; 
    cudaMalloc(&d,N*sizeof(double));

    struct timeval t1, t2; gettimeofday(&t1,NULL);
    cudaMemcpyAsync(d,h0,N*sizeof(double),cudaMemcpyHostToDevice,strm);
    gettimeofday(&t2, NULL); printf("cuda H->D %d takes: %d ms\n",i, diff_ms(t2, t1)); gettimeofday(&t1, NULL);
    cudaMemcpyAsync(h1,d,N*sizeof(double),cudaMemcpyDeviceToHost,strm);
    gettimeofday(&t2, NULL); printf("cuda D->H %d takes: %d ms\n",i, diff_ms(t2, t1)); gettimeofday(&t1, NULL);

    cout<<"sum h0: "<<sumall(h0,N)<<endl;
    cout<<"sum h1: "<<sumall(h1,N)<<endl;

    cudaStreamDestroy(strm);
    cudaFree(d);
    cudaFreeHost(h0);
    cudaFreeHost(h1);

    return 0;
} 
```

h0/h1 的打印输出提示 cudaMemcpyAsync 与主机同步

```
sum h0: 99
sum h1: 99 
```

但是，包含 cudaMemcpyAsync 调用的时间差表明它们与主机不同步

```
cuda H->D 100000000 takes: 0 ms
cuda D->H 100000000 takes: 0 ms 
```

因为 cuda-profiling 结果不支持这一点：

```
method=[ memcpyHtoDasync ] gputime=[ 154896.734 ] cputime=[ 17.000 ] 
method=[ memcpyDtoHasync ] gputime=[ 141175.578 ] cputime=[ 6.000 ] 
```

不知道为什么...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T11:54:40.603

这里（至少）发生了两件事。

您的第一个观察结果是：

```
sum h0: 99
sum h1: 99 
```

*向同一流发出的*CUDA 调用将按顺序执行。如果您希望CUDA 调用*相互**重叠*，则必须将它们发布到单独的流中。由于您在同一流中向设备和从设备发出 cuda memcpy，因此它们将按顺序执行。第二个在第一个完成之前不会开始（即使两者都立即排队）。因此数据是完整的（在第一个 cudaMemcpy 之后），并且您观察到两个数组都生成了正确的总和。

 *您剩余的观察结果也彼此一致。您正在报告：

```
cuda H->D 100000000 takes: 0 ms
cuda D->H 100000000 takes: 0 ms 
```

这是因为这两个异步调用都会*立即将控制权返回给主机线程，*并且调用排队等待与主机执行异步执行。然后调用与进一步的主机执行并行进行。由于控制权立即返回给主机，并且您正在使用基于主机的计时方法对操作进行计时，因此它们似乎花费了零时间。

当然，它们实际上并不需要零时间，您的分析器结果表明了这一点。由于 GPU 与 CPU 异步执行（在这种情况下包括 cudaMemcpyAsync），因此分析器显示了 cudaMemcpy 操作所花费的实际“实时”时间，报告为`gputime`CPU 上的“表观时间”，即时间量启动操作所需的 CPU 报告为`cputime`. 请注意，与 gputime 相比，cputime 非常小，即它几乎是瞬时的，因此基于主机的计时方法报告零时间。但它们实际上并不是零时间完成的，分析器报告了这一点。

如果您使用 cudaEvent 计时方法，您当然会看到不同的结果，这将更接近您的分析器`gputime`结果。*

# c++ - 如何在列表框右键单击上创建上下文菜单？

> ID：14001398
> 
> 赞同：3
> 
> 时间：2012-12-22T08:48:06.697
> 
> 标签：c++, winapi

我有一个带有列表框的窗口，我想右键单击列表框中的条目并在上下文菜单中显示某些选项。我在网上看过，但似乎我只能在 MFC C++ 或简单的 c# 中获得示例。

这在标准 Win32 c++ 中是否可行？我可以通过 WM_CONTEXTMENU 消息处理对列表框的右键单击，但是如何使菜单出现？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-22T09:26:31.757

我想通了，感谢 Bhargav Bhat 对相关问题的评论。

通过检查 WndProc 中的 WM_CONTEXTMENU 来处理右键单击列表框。

通过 wParam 参数获取窗口句柄，将其与列表框进行比较，以查看用户是否右键单击了列表框。

从那里，通过 CreatePopupMenu() 创建弹出菜单。

通过 InsertMenu()/AppendMenu() 插入/追加到菜单中。

最后，调用 TrackPopupMenu()。

```
case WM_CONTEXTMENU:
        if ((HWND)wParam == m_hListBox) {
            m_hMenu = CreatePopupMenu();
            InsertMenu(m_hMenu, 0, MF_BYCOMMAND | MF_STRING | MF_ENABLED, 1, "Hello");
            TrackPopupMenu(m_hMenu, TPM_TOPALIGN | TPM_LEFTALIGN, GET_X_LPARAM(lParam), GET_Y_LPARAM(lParam), 0, m_hWnd, NULL); 
        } 
```

# eclipse - 使用代码完成查看 PyDoc

> ID：14001399
> 
> 赞同：4
> 
> 时间：2012-12-22T08:48:16.460
> 
> 标签：eclipse, pycharm, pydoc

![在此处输入图像描述](../Images/7730902ec6b951b8b85262fbf61d6d26.png)

上面是 PyCharm，下面是带有 PyDev 的 Eclipse。

如何在 Eclipse+PyDev 中显示 PyDoc 工具提示以及自动完成窗口？我已经看到了一些 PyCharm 的屏幕截图，它们正好显示了这一点（例如[http://i.imgur.com/wIvAt.png](https://i.imgur.com/wIvAt.png)），但我无法弄清楚如何让我的工作以这种方式工作。我尝试了IDE设置>>编辑器>>代码完成>>自动弹出文档，设置为0，但是好像没有效果，我还是要按Ctrl-Q才能查看PyDoc。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T07:00:25.970

此功能仅适用于显式代码完成（当您按`Ctrl`+`Space`开始完成时）。它不会出现在自动代码完成上。设置对话框提到它：

![仅显式调用](../Images/9ec61761e93555101b88ef591c97c36f.png)

# multithreading - 我考虑对以下内容使用多处理是否正确？

> ID：14001401
> 
> 赞同：1
> 
> 时间：2012-12-22T08:49:16.110
> 
> 标签：multithreading, python-2.7, multiprocessing

我有一段代码通过按顺序访问链接来检索一系列股票的目标 URL。我读过可以考虑多处理来加快整个过程。

任何专家都可以解释我可以做些什么来将代码更改为多处理模式？

在我看来，如果代码必须按顺序爬到每个目标 URL，瓶颈将是浏览器的访问速度。只是想知道使用多处理是否是加速它的方法，因为程序可以生成相同代码的多个版本并同时转到 3-4 个 URL 并将结果传递回代码等。

```
index = 0
stop = len(stock) - 1
stockURL = {}
stockmap = {}

while index <= stop:
    tag = str(int(2) + index)
    if index <= 7:
        w.iimPlayCode(path to my file)
        w.iimPlayCode('WAIT SECONDS=5')
        w.iimPlayCode('ADD !EXTRACT {{!URLCURRENT}}')
        stockURL[index] = w.iimGetExtract(1)
        w.iimPlayCode('BACK')        
        index +=1
    else:
        w.iimPlayCode(path to my file)
        w.iimPlayCode('WAIT SECONDS=5')
        w.iimPlayCode('ADD !EXTRACT {{!URLCURRENT}}')
        stockURL[index] = w.iimGetExtract(1)
        w.iimPlayCode('BACK')
        index += 1  

stockURL = list(stockURL.values())
stockURL = str(u','.join(stockURL))
stockURL = stockURL.replace('http', 'URL GOTO=http').split(',')
stockURL = list(stockURL)

stockmap = dict(zip(stocks, stockURL)) 
```

# javascript - 搜索以 javascript 对象开头的特定名称

> ID：14001402
> 
> 赞同：0
> 
> 时间：2012-12-22T08:49:16.790
> 
> 标签：javascript, jquery, json, search

我有一个 json 对象，如下所示，其中包含 id-to 名称映射：

```
 idToNamesMap =  {"1":"name5","2":"name6","3":"name7","4":"name8"} 
```

现在我想在这个 id-to name 映射对象中搜索名称。例如，搜索并返回所有以字符串“name”开头的名称以及相应的 id。你能建议怎么做吗？

* * *

我使用 jQuery 1.7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T08:54:32.863

如果我理解正确，您想要过滤以开头的项目`"name"`，然后翻转对象键/值：

```
var idToNamesMap =  {"1":"name5","2":"name6","3":"name7","4":"name8"},
searchPattern = /^name/;

function searchMap(map, pattern)
{
    var res = {};

    $.each(map, function(i, name) {
        if (pattern.test(name)) {
            res[name] = i;
        }
    });

    return res;
}

console.log(searchMap(idToNamesMap, searchPattern)); 
```

输出：

```
{"name5": "1", "name6": "2", "name7": "3", "name8": "4"} 
```

也可以看看：[`jQuery.each()`](http://api.jquery.com/jQuery.each/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T08:56:37.133

也许这样。它为您提供了一种使用正则表达式搜索条目的方法：

```
var idToNamesMap =  {"1":"name5","2":"name6","3":"name7","4":"name8"};

idToNamesMap.search = function( pattern ) {
    var result = {};
    for ( var k in this ) {
        if ( 'function' != typeof this[ k ] ) {
            if ( this[ k ].test( pattern ) ) {
                result[ k ] = this[ k ];
            }
        }
    }
    return result;
}

console.log( idToNamesMap.search( /^name/ ) );​ 
```

在这里试试：http: [//jsfiddle.net/XaWqd/1/](http://jsfiddle.net/XaWqd/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T08:54:07.800

```
var newObject = {};

for (key in idToNamesMap) {
    if (idToNamesMap[key].substring(0,4)=='name') 
       newObject[idToNamesMap[key]] = key;
} 
```

[**小提琴**](http://jsfiddle.net/adeneo/ZSEwJ/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T09:06:53.820

尝试这样的事情：

# 示例代码

```
$(document).ready(function(){
    var jarr = {'a':'one', 'b':'two', 'c':'3'}
    $.each(jarr, function(key, value){
        if((/^one/).test(value)){
            alert(key + ' -> ' + value);
        }
    });
});​ 
```

# 工作小提琴

这是一个有效的[JSFiddle](http://jsfiddle.net/AGBwb/)

# 选项

您可以使用 3 个选项来实现此目的。

1.  使用简单的正则表达式（如上）：

    `var match = /^name/.test(myString);`

2.  使用`indexOf`方法：

    `var match = string.length => 7 && string.indexOf("name") == 0;`

3.  使用`substring`方法：

    `var match = string.length => 7 && string.substr(0, 4) == "name";`

# android - 过滤Listview数据后勾选（选中）复选框的位置发生变化

> ID：14001403
> 
> 赞同：3
> 
> 时间：2012-12-22T08:49:16.963
> 
> 标签：android, listview, filter, baseadapter

我正在尝试在扩展的自定义适配器上应用过滤器`BaseAdapter`，在我根据文本过滤输入`EditText`并检查`CheckBox`以选择一个值以及如果我删除文本`EditText`以搜索其他一些值之后，我遇到了一些问题选中复选框的位置会自动更改，如下图所示。我目前面临两个问题

1 - 勾选复选框的位置自动更改

`EditText`2 - 如果我在`ListView`空白处输入大写。

```
public class MyCustomAdapter extends BaseAdapter implements Filterable {

Context mContext;
private LayoutInflater mInflater;
SparseBooleanArray mSparseBooleanArray;
private ArrayList<Map<String,String>> mAdapData = new ArrayList<Map<String, String>>();
private ArrayList<Map<String,String>> mOriginalData = new ArrayList<Map<String, String>>();

public MyCustomAdapter(Context mContext) {
    mInflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    mSparseBooleanArray = new SparseBooleanArray();
}

public ArrayList<String> getCheckedItems() {
    ArrayList<String> mTempArry = new ArrayList<String>();
    for (int i = 0; i < mAdapData.size(); i++) {
        if (mSparseBooleanArray.get(i)) {
            Map<String, String> map = (Map<String, String>) mAdapData.get(i);
            final String numbr = map.get("Phone").toString();
            mTempArry.add(numbr);
        }
    }
    return mTempArry;
}

@Override
public int getCount() {
    return this.mAdapData.size();
}

public void addItem(String paramString1, String paramString2) {
    Map<String, String> NameNumber = new HashMap<String, String>();
    NameNumber.put("Name", paramString1);
    NameNumber.put("Phone", paramString2);
    this.mAdapData.add(NameNumber);
    this.mOriginalData.add(NameNumber);
    notifyDataSetChanged();
}

@SuppressWarnings("unchecked")
public Object getItem(int paramInt) {
    return (ArrayList<Map<String, String>>) this.mAdapData.get(paramInt);
}

@Override
public long getItemId(int paramInt) {
    return paramInt;
}

@Override
public View getView(final int paramInt, View paramView, ViewGroup paramViewGroup) {

    ViewHolder viewHolder;

    if (paramView == null) {
        viewHolder = new ViewHolder();
        paramView = mInflater.inflate(R.layout.multiplecontactview, null);
        viewHolder.tvName = (TextView) paramView.findViewById(R.id.txtContactName);
        viewHolder.tvNumber = (TextView) paramView.findViewById(R.id.txtContactNumber);
        viewHolder.cb = (CheckBox) paramView.findViewById(R.id.checkBox1);
        viewHolder.cb.setTag(paramInt);
        viewHolder.cb.setChecked(mSparseBooleanArray.get(paramInt));
        viewHolder.cb.setOnCheckedChangeListener(mCheckedChangeListener);
        viewHolder.tvName.setTextColor(Color.BLACK);
        viewHolder.tvNumber.setTextColor(Color.BLACK);
        for (int i = 0; i < mAdapData.size(); i++) {
            Map<String, String> map = (Map<String, String>) mAdapData.get(paramInt);
            final String name = map.get("Name").toString();
            final String numbr = map.get("Phone").toString();
            viewHolder.tvName.setText(name);
            viewHolder.tvNumber.setText(numbr);
        }
        paramView.setTag(viewHolder);
    } else {
        viewHolder = (ViewHolder) paramView.getTag();
    }       
    return paramView;
}

OnCheckedChangeListener mCheckedChangeListener = new OnCheckedChangeListener() {
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
        mSparseBooleanArray.put((Integer) buttonView.getTag(), isChecked);
    }
};

public static class ViewHolder {
    TextView tvName;
    TextView tvNumber;
    CheckBox cb;
}

@Override
public Filter getFilter() {
    return new MyContactFilter();
}

@SuppressLint("DefaultLocale")
private class MyContactFilter extends Filter {

    @Override
    protected FilterResults performFiltering(CharSequence constraint) {
        FilterResults results = new FilterResults();
        ArrayList<Map<String, String>> mFilteredData = new ArrayList<Map<String, String>>();

        if (!TextUtils.isEmpty(constraint)) { 
            for(int i = 0; i < mAdapData.size(); i++) {
                Map<String, String> map = (Map<String, String>) mAdapData.get(i);
                final String names = map.get("Name").toString();
                final String numbr = map.get("Phone").toString();
                if(names.toLowerCase().contains(constraint.toString().toLowerCase())) {
                    Map<String, String> FilNameNumber = new HashMap<String, String>();
                    FilNameNumber.put("Name", names);
                    FilNameNumber.put("Phone", numbr);
                    mFilteredData.add(FilNameNumber);
                }
            }
            results.values = mFilteredData;
            results.count = mFilteredData.size();

        } else {
            synchronized (mOriginalData) {
                results.values = mOriginalData;
                results.count = mOriginalData.size();
            }
        }
        return results;
    }

    @SuppressWarnings("unchecked")
    @Override
    protected void publishResults(CharSequence cs, FilterResults fr) {
        mAdapData = (ArrayList<Map<String, String>>) fr.values;
        notifyDataSetChanged();
    }
}
} 
```

![截屏](../Images/5741c627a4766935b388ff90b5221959.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T09:17:36.230

摆脱复杂的映射来跟踪属性，将数据存储在这样的类中，以及检查状态：

```
public class Data {
 private final String text;
 private boolean checked;

 public Data(String text){
   this.text = text;
   this.checked = false;
 }

 public void setChecked(boolean b){
   this.checked = b;
 }

 public boolean isChecked(){
   return this.checked;
 }

 public String getText(){
   return this.text;
 }
} 
```

里面`getView()`，根据数据状态设置复选框，添加监听器修改数据状态：

```
final Data data = getItem(position);

cb.setOnCheckedChangeListener(null); //important 
cb.setChecked(data.isChecked());
cb.setOnCheckedChangeListener(new OnCheckedChangeListener() {
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
        data.setChecked(isChecked);
    }
}); 
```

关于过滤：

`names.toLowerCase().contains(cs)`

[`Contains`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#contains%28java.lang.CharSequence%29)*在char 值*上进行区分大小写的匹配。尝试`names.toLowerCase().contains(cs.toLowerCase())`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T09:16:12.633

如果您更仔细地查看您的代码，特别是在 上`getView()`，您会发现您`ViewHolder`每次都在独立于`convertView`存在的情况下创建对象。

这是错误使用`ViewHolder`模式。与其每次都创建，不如只在`convertView`为 null 时创建，并将其设置为`convertView`by的标记`setTag()`，否则获取`ViewHolder`using的引用`getTag()`。像这样：

```
 ViewHolder viewHolder;

    if (paramView == null) {
        paramView = mInflater.inflate(R.layout.multiplecontactview, null);
        viewHolder = new ViewHolder();
        viewHolder.tvName = (TextView) paramView.findViewById(R.id.txtContactName);
        viewHolder.tvNumber = (TextView) paramView.findViewById(R.id.txtContactNumber);
        viewHolder.cb = (CheckBox) paramView.findViewById(R.id.checkBox1);
        paramView.setTag(viewHolder);
    } else {
        viewHolder = (ViewHolder) paramView.getTag();
    }

    viewHolder.cb.setTag(paramInt);
    viewHolder.cb.setChecked(mSparseBooleanArray.get(paramInt));
    viewHolder.cb.setOnCheckedChangeListener(mCheckedChangeListener);
    viewHolder.tvName.setTextColor(Color.BLACK);
    viewHolder.tvNumber.setTextColor(Color.BLACK);
    for (int i = 0; i < mAdapData.size(); i++) {
        Map<String, String> map = (Map<String, String>) mAdapData.get(paramInt);
        final String name = map.get("Name").toString();
        final String numbr = map.get("Phone").toString();
        viewHolder.tvName.setText(name);
        viewHolder.tvNumber.setText(numbr);
    }
    return paramView; 
```

同样在您`preformFiltering()`尝试更改此代码段时：

`if (names.toLowerCase().contains(cs))`

至

`if (names.toLowerCase().contains(cs.toString().toLowerCase()))`

# 更新

有一段奇怪的代码：

```
OnCheckedChangeListener mCheckedChangeListener = new OnCheckedChangeListener() {
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
        mSparseBooleanArray.put((Integer) buttonView.getTag(), isChecked);
    }
}; 
```

这意味着如果您第一次检查列表中第 0 位的列表项，则`SparseArray`表示第一项`ListView`应该始终有一个复选框，因为您没有在代码中的任何地方取消选中它，不要' t 将该值设置为 false，但仅在用户手动取消选中该复选框时才这样做。

# c# - Linq查询过去7天的不同日期值，运行查询时抛出异常

> ID：14001404
> 
> 赞同：3
> 
> 时间：2012-12-22T08:49:32.703
> 
> 标签：c#, .net, linq, entity-framework

我有一个 Employee 表，我通过以下方式检索了 Id 和 Name 字段：

```
var users = context.Employees.ToList()
                   .Select(employee => new KeyValuePair<int, string>(employee.Id,employee.Name)); 
```

那部分工作正常，我的问题是有另一个表出席，其中设置了外键，并且有一个字段 LoginDate 是一个 DateTime 值。一个用户可以多次登录，所以我想获得一个用户在过去 7 天内登录多少次的不同值。

```
foreach (var user in users)
{
    var days = context.Attendances.Where(x => x.Id == user.Key && x.LoginDate.Date > DateTime.Now.AddDays(-7)).Distinct().ToList();
     int count = days.Count();
     _attendanceTable.Rows.Add(user.Key, user.Value, count);
 } 
```

运行出勤表查询时出现异常：

> LINQ to Entities 不支持指定的类型成员“日期”。仅支持初始化程序、实体成员和实体导航属性。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T09:06:08.940

您可以在单个查询中完成所有操作：

```
var date = DateTime.Now.AddDays(-7).Date; // I think you need date only here
var query = from e in context.Employees
            join a in context.Attendances on e.Id equals a.Id into g
            select new
            {
                e.Id,
                e.Name,
                Count = g.Where(x => x.LoginDate > date)
                         .GroupBy(x = > new {
                               x.LoginDate.Year,
                               x.LoginDate.Month,
                               x.LoginDate.Day 
                          }).Count()
            };

foreach(var user in query)
   _attendanceTable.Rows.Add(user.Id, user.Name, user.Count); 
```

EntityFramework`Date`也不支持 DateTime 的属性。您应该使用匿名对象按日期部分对出勤进行分组。

生成的 SQL 查询将如下所示：

```
SELECT [Extent1].[Id] AS [Id], 
       [Extent1].[Name] AS [Name], 
    (SELECT 
        COUNT(1) AS [A1]
        FROM ( SELECT DISTINCT 
            DATEPART (year, [Extent2].[LoginDate]) AS [C1], 
            DATEPART (month, [Extent2].[LoginDate]) AS [C2],
            DATEPART (day, [Extent2].[LoginDate]) AS [C2],
            FROM [dbo].[Attendances] AS [Extent2]
            WHERE [Extent1].[Id] = [Extent2].[Id]
        )  AS [Distinct1]) AS [C1]
FROM [dbo].[Employees] AS [Extent1] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T08:54:41.690

您可以在代码中执行的某些操作不会（至少不是干净地）转换为 SQL，您需要移动某些操作以便它们更好地转换。

```
//Figure out the day you want in advance
var sevenDaysAgo = DateTime.Now.Date.AddDays(-7);
var results = users.Select(user => new {
     user.Key,
     user.Value,
     Count = users.Join(context.Attendances, 
                        user => user.Key,
                        attendance => attendance.EmployeeId,
                        (user, attendance) => attendance.LoginDate)
                  .Where(date => date > sevenDaysAgo)
                  .Select(date => date.Day)
                  .Distinct()
                  .Count()
});

foreach (var result in results)
{        
    _attendanceTable.Rows.Add(result.Key, result.Value, result.Count);
} 
```

# php - 我的 PHP 脚本中的 3 个错误？

> ID：14001409
> 
> 赞同：-6
> 
> 时间：2012-12-22T08:49:47.870
> 
> 标签：php, html

> **可能重复：**
> [mysql_fetch_array() 期望参数 1 是资源，选择中给出的布尔值](https://stackoverflow.com/questions/2973202/mysql-fetch-array-expects-parameter-1-to-be-resource-boolean-given-in-select)

**已编辑！** 好的，我的网站上有 3 个错误。[这些是弹出的错误。](http://insanityrp.com/bans/) 连接信息：

```
$dbhost     = '127.0.0.1';
$dbdatabase = 'bans';
$dbuser     = 'dsfhalsfdh';
$dbpassword = 'lfhdjklfdf';
$webname    = 'InsanityRP.Com' 
```

这是错误：

> `Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given in /home/klayplex/public_html/insanityrp.com/bans/index.php on line 41`
> 
> `Warning: mysql_fetch_assoc() expects parameter 1 to be resource, boolean given in /home/klayplex/public_html/insanityrp.com/bans/index.php on line 68`

我的代码按顺序排列：

```
 $result = mysql_fetch_array(mysql_query($query)); 
```

然后

```
 while($row=mysql_fetch_assoc($result)){ 
```

有什么看起来很奇怪吗？我根本不懂 PHP，所以如果可以的话，请告诉我要编辑什么，或者只是给我复制和粘贴的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T08:55:15.023

1.  第一个你有 $resul1 而不是 $result
2.  第二个错误是因为您期待结果，但是[mysql_query()](http://php.net/manual/en/function.mysql-query.php)在错误时返回一个布尔值，所以您的查询可能有问题
3.  最后，您的最后一个查询与第一个查询的拼写错误相同，使用 $resul1 而不是 $result。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T09:23:35.120

这很有趣。
您对 mysql_fetch_array 有一个额外的调用，它返回一个**数组**，而不是一个资源。

另外，不要像这样在一行中尝试尽可能多的运算符

```
$result = mysql_fetch_array(mysql_query($query)); 
```

*分别*编写它们，**以及一些错误检查**

```
$query = "SELECT ...";
$result = mysql_query($query) or trigger_error(mysql_error()."[$query]");
while($row=mysql_fetch_assoc($result)){ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T08:58:06.907

改成`$resul1`这样`$result`的问题，不要再问了。只有那个错误很难发现问题。考虑使用`mysql_error()`它可以帮助找到正确的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T08:54:41.127

您`$result`的拼写错误为`$resul1`. 这是一个错字。

编辑： **失败时****返回 false**（这是一个*布尔值*）。用于找出错误所在。我建议你重写[`mysql_query()`](http://php.net/manual/en/function.mysql-query.php) *****[`mysql_error()`](http://php.net/manual/en/function.mysql-error.php)*****

 *****```
$result = mysql_fetch_array(mysql_query($query)); 
```

进入

```
$resultSet = mysql_query($query);
print mysql_error();    // Print the error message.
$result = mysql_fetch_array($resultSet); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-22T08:54:49.757

而($row=mysql_fetch_assoc( **$resul1** )){

至

而($row=mysql_fetch_assoc( **$result** ))*****

# jquery-validate - jQuery - 从服务器捕获验证错误回调

> ID：14001410
> 
> 赞同：0
> 
> 时间：2012-12-22T08:49:49.023
> 
> 标签：jquery-validate, jquery

我正在尝试捕获 jquery validate 插件错误回调。我知道如果我直接调用 validate，您可以轻松地参与其中：

```
$('#form').validate({ 
    invalidHandler: function(form, validator) {
       var errors = validator.numberOfInvalids();
       if (errors) {
           //etc
       }
    }
}); 
```

但我不是。相反，我的表单被提交到服务器，如果`!Model.IsValid`服务器返回无效模型并使用错误消息填充占位符：

```
<span data-valmsg-replace="true" data-valmsg-for="Email" class="field-validation-error">This field is required</span> 
```

我需要知道这个 span 何时用错误消息更新，因为我有以下包装器：

```
<div class="errorContainer">
     @Html.ValidationMessageFor(m => m.Email)  /*This is the span above*/
</div> 
```

Where`div.errorContainer { visibility : hidden; }`和我只需要在出现错误消息时使其可见（因为它有背景并且不属于，除非里面有错误）。

我怎样才能做到这一点？最佳解决方案是我可以响应来自客户端和服务器端验证的错误，因为我计划在确保覆盖服务器端之后构建客户端验证。我想更好的问题是，有没有办法让`invalidHandler`服务器返回错误的回调触发？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T20:45:35.013

我只是想到了这一点，还没有测试过，但我认为它会起作用。会回来汇报的。谢谢巴尼，你的评论给了我一个灯泡。

```
$.ajax({
    url : '/Account/Login',
    dataType: $('#form').serialize(),
    beforeSend : function(xhr, opts){

        ... form validation ...

        if(formNotValid){
             xhr.abort(); /*Abort request*/
             /*Display client generated errors*/
        }

    },
    success: function(result){  // return from server is a JsonResult(new { success = true/false, viewResult = this.RenderPartialView("Login", model)})  

        if(result.success){
            //No errors
        }
        else{

            /*Display server generated errors*/

            $('#form').empty().html(result.viewResult);
            $('span.field-validation-error').each(function () {
                 $(this).parent().css({ "visibility": "visible" });
            });

            $('span.field-validation-valid').each(function () {
                 $(this).parent().css({ "visibility": "hidden" });
            });
        }

    }
}); 
```

注意：this.RenderPartialView("Login", model) 是在[这里找到的自定义扩展方法](https://stackoverflow.com/a/3027713/1267778)

# vb.net - 带有命令参数的 vb.net 按钮中的 MVVM Light

> ID：14001413
> 
> 赞同：1
> 
> 时间：2012-12-22T08:50:19.773
> 
> 标签：vb.net, mvvm, mvvm-light

我对 MVVM 和 MVVM light 非常陌生，而且我来自 vb.net 背景。我设法创建了一些简单的学习项目，在一个视图中，按钮没有调用命令。我的视图 xaml 如下（为便于阅读而缩短）：

```
<UserControl x:Class="FTC.View.NavigationView"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008"  
         xmlns:vm="clr-namespace:FTC_Application.FTC.ViewModel"
         mc:Ignorable="d" 
         d:DesignWidth="900"
         Height="161"
         DataContext="{Binding NavigationView, Source={StaticResource Locator}}" >

<UserControl.Resources>
    <vm:ViewModelLocator x:Key="Locator" d:IsDataSource="True" />
</UserControl.Resources>

<Grid>
        <Button HorizontalAlignment="Left" Margin="10" VerticalAlignment="Top"   
                 Command="{Binding SwapParent}"
                CommandParameter="{Binding Parent1}" Background="{x:Null}" BorderBrush="{x:Null}" Width="130" Height="45">
            <TextBlock Text="{Binding Parent1}" Foreground="#FFE4E4E4"/>
        </Button> 
```

以下是按钮功能的viewmodel类中的代码

```
Private _sNavs() As String = {"Dashboard", "Jobs", "People", "Products", "Financials", "Admin"}
Private _sParentNavs() As String
Public Property SwapParent As RelayCommand
Private Property ParentNavs() As String()
        Get
            Return _sParentNavs
        End Get

        Set(value As String())
            If _CurrentParent = String.Empty Then
                _CurrentParent = "Dashboard"
            Else
                If _sParentNavs.Contains(_CurrentParent) = False Then
                    Return
                End If
            End If

            RefreshParents(_CurrentParent)
            RaisePropertyChanged(ParentNavsPropertyName)

        End Set
    End Property

Public Sub New()

        If _CurrentParent = String.Empty Then
            _CurrentParent = "Dashboard"
        End If
        RefreshParents(_CurrentParent)
        SwapParent = New RelayCommand(Sub()
                                          ParentNavs = _sParentNavs
                                      End Sub)

    End Sub

Private Sub RefreshParents(sCurrent)

        If _sNavs.Contains(sCurrent) = True Then
            _sParentNavs = Filter(_sNavs, sCurrent, False, CompareMethod.Text)
        Else
            _sParentNavs = Filter(_sNavs, "Dashboard", False, CompareMethod.Text)
        End If

        Parent1 = _sParentNavs(0)
        Parent2 = _sParentNavs(1)
        Parent3 = _sParentNavs(2)
        Parent4 = _sParentNavs(3)
        Parent5 = _sParentNavs(4)

    End Sub 
```

因此，此代码旨在根据提供的值更改父数组以包含除提供的值之外的所有项目。然后它将数组值分配给页面上的按钮。一切都在按钮内容绑定方面起作用，但由于某种原因，命令没有触发。我已经在另一个视图模型上使用了这种精确的方法并且它有效，

我需要一些帮助才能知道为什么这不适用于此视图模型

提前致谢

约旦国王

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T07:30:56.173

我改变了他们定义我的命令对象的方式。

我重新设计了我的项目，不再使用上面的代码，但他下面是一些在 vb 中使用 lambda 来定义命令对象的示例，其中 addressof 指的是类中的公共子/函数。

"Of String" 接收一个 string 类型的命令参数给由 addressof 命名的函数。的第二个地址是一个返回布尔值的函数，该函数会针对命令的 canexecute 方法进行评估。

```
NavigateShellCommand = New RelayCommand(Of String)(AddressOf NavigateShell)
NavigateChildCommand = New RelayCommand(Of String)(AddressOf NavigateChild)
IsParentEnabled = New RelayCommand(Of String)(AddressOf NavigateChild, AddressOf ParentEnabled)
IsChildEnabled = New RelayCommand(Of String)(AddressOf NavigateChild, AddressOf ChildEnabled) 
```

我希望这可以帮助某人，我花了一段时间才真正理解它

# css - 社交精灵图像与前面的跟随我们文字相同的行

> ID：14001418
> 
> 赞同：0
> 
> 时间：2012-12-22T08:51:46.807
> 
> 标签：css

无论如何要使“跟随我们”文本与精灵图像内联？

[http://jsfiddle.net/e2ScF/66/](http://jsfiddle.net/e2ScF/66/)

```
<ul class="social_Emp">&nbsp;&nbsp;&nbsp;Follow us:
  <li class="Emp_twitter"><a href="{if $userInfo.TwitterPage} {$userInfo.TwitterPage}{else}#{/if}" alt="Twitter"></a></li>
  <li class="Emp_facebook"><a href="{if $userInfo.FBPage}{$userInfo.FBPage}{else}#{/if}" alt="Facebook"></a></li>
  <li class="Emp_google"><a href="{if $userInfo.GooglePage}{$userInfo.GooglePage}{else}#{/if}" alt="Google"></a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T08:56:33.537

由于*Follow us:*文本不是列表的一部分，因此将其带出`ul`块在语义上会更正确。然后，只需添加`display: inline-block;`到`.social_Emp`类中，使`ul`行为就像文本一样：

[http://jsfiddle.net/qeYQ4/](http://jsfiddle.net/qeYQ4/)

为了使文本与图标对齐，您可能还希望将文本包装在一个 span 中，并使用`position: relative`and `top: 5px`（或任何您喜欢的像素值）：

[http://jsfiddle.net/qeYQ4/1/](http://jsfiddle.net/qeYQ4/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T08:57:10.853

**HTML**

```
<ul class="social_Emp"><li>Follow us:</li>
              <li class="Emp_twitter"><a href="{if $userInfo.TwitterPage}{$userInfo.TwitterPage}{else}#{/if}" alt="Twitter"></a></li>
              <li class="Emp_facebook"><a href="{if $userInfo.FBPage}{$userInfo.FBPage}{else}#{/if}" alt="Facebook"></a></li>
              <li class="Emp_google"><a href="{if $userInfo.GooglePage}{$userInfo.GooglePage}{else}#{/if}" alt="Google"></a></li>
            </ul> 
```

**CSS**

```
.social_Emp {position: relative;margin: 10px auto;}
.social_Emp li {background: url(http://www.bestjob.my/mod/CSS/sprites/Sprite_vertical.png) no-repeat;
position: absolute;display: block;list-style: none;}
.social_Emp a {height:24px;display: block;}
.social_Emp .Emp_twitter {left:76px;background-position: 0 -600px;width:24px;height:24px;}
.social_Emp .Emp_facebook {left:106px;background-position: 0 -645px;width:24px;height:24px;}
.social_Emp .Emp_google {left:136px;background-position: 0 -844px;width:24px;height:24px;} 
```

[演示](http://jsfiddle.net/e2ScF/67/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T08:58:04.573

```
.social_Emp {position: relative;margin: 10px}
.social_Emp li {background: url(http://www.bestjob.my/mod/CSS/sprites/Sprite_vertical.png) no-repeat;
}
.social_Emp a {height:24px;display: block;}
.social_Emp .Emp_twitter {left:20px;background-position: 0 -600px;width:24px;height:24px;float:left}
.social_Emp .Emp_facebook {left:50px;background-position: 0 -645px;width:24px;height:24px;float:left}
.social_Emp .Emp_google {left:80px;background-position: 0 -844px;width:24px;height:24px;float:left} 
```

请试试这个

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T09:03:47.420

您正在使用绝对位置进行 li 定位。您无法通过绝对定位获得任何内联内容。默认情况下，它会从常规文档流中取出一个元素。

这是一个带有修复程序的 JS Fiddle：

[http://jsfiddle.net/e2ScF/68/](http://jsfiddle.net/e2ScF/68/)

所做的更改：

```
.social_Emp li {
    display: inline-block;
    position: relative;

} 
```

# c++ - 为什么向量 push_back > 不适用于我定义的类的 for 循环

> ID：14001420
> 
> 赞同：1
> 
> 时间：2012-12-22T08:52:10.860
> 
> 标签：c++, vector, for-loop, shared-ptr, push-back

我想使用 std::vector.push_bask 在 for 循环中存储 20 个 shared_ptr 数。但从输出来看：它似乎只推了一个。并且 vector::push_back> 20 次按设计工作。

有人能帮我吗？

```
class IObserver{
public:
    int virtual  notify() = 0;
};

class CAdsUser
{
public:
    int do_ads() {cout << __FUNCTION__<<endl;m_observer->notify(); return 0;}
    CAdsUser(tr1::shared_ptr<IObserver> b):m_observer(b){cout << __PRETTY_FUNCTION__<<endl;};
    ~CAdsUser() {cout << __PRETTY_FUNCTION__<<endl;}
private:
    tr1::shared_ptr<IObserver> m_observer;
};

class CMgr:public IObserver
{
public:
    int virtual notify() { cout << __PRETTY_FUNCTION__<<endl; return 0;};
    virtual ~CMgr(){cout << __PRETTY_FUNCTION__<<endl;};
};

using namespace std;

typedef vector<tr1::shared_ptr<CAdsUser> >VecType;
int main() {
    tr1::shared_ptr<CMgr> g(new CMgr());
    VecType m_online_user;
    int i = 0;
    for(i = 0; i < 20; i++);
    {
        tr1::shared_ptr<CAdsUser> ads_temp(new CAdsUser(g));
        cout <<&ads_temp<<endl;
        m_online_user.push_back((ads_temp));
        //m_online_user.insert(m_online_user.begin(),1,ads_temp);
    }
    tr1::shared_ptr<CAdsUser> ads_temp1(new CAdsUser(g));
    cout <<&ads_temp1<<endl;
    m_online_user.push_back(ads_temp1);

    /// CAdsUser *p =  m_online_user[7];
    VecType::iterator vi;
    for(vi = m_online_user.begin();vi != m_online_user.end(); vi++)
        (*vi)->do_ads();

    vector<tr1::shared_ptr<string> > test_string;
    for(i = 0; i< 20; i++)
    {
        tr1::shared_ptr<string> temp(new string());
        temp->append("sdfsdfsfd");
        test_string.push_back(temp);
    }

    vector<tr1::shared_ptr<string> >::iterator vs;
    for(vs = test_string.begin();vs != test_string.end(); vs++)
        cout<<*(*vs)<<endl;

    return 0;
} 
```

程序输出：

```
CAdsUser::CAdsUser(std::tr1::shared_ptr<IObserver>)
0xbfbf3084
CAdsUser::CAdsUser(std::tr1::shared_ptr<IObserver>)
0xbfbf30a0
do_ads
virtual int CMgr::notify()
do_ads
virtual int CMgr::notify()
sdfsdfsfd
sdfsdfsfd
sdfsdfsfd
sdfsdfsfd
sdfsdfsfd
sdfsdfsfd
sdfsdfsfd
sdfsdfsfd
sdfsdfsfd
sdfsdfsfd
sdfsdfsfd
sdfsdfsfd
sdfsdfsfd
sdfsdfsfd
sdfsdfsfd
sdfsdfsfd
sdfsdfsfd
sdfsdfsfd
sdfsdfsfd
sdfsdfsfd
CAdsUser::~CAdsUser()
CAdsUser::~CAdsUser()
virtual CMgr::~CMgr() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T08:57:40.300

```
for(i = 0; i < 20; i++);
                    // ^ this little guy is killing you 
```

删除它`;`，你有一个空主体的 for 循环。

# c# - 如何在 GridView 中禁用内联编辑？

> ID：14001423
> 
> 赞同：5
> 
> 时间：2012-12-22T08:52:52.670
> 
> 标签：c#, asp.net

我正在使用 ASP.NET C# 网格视图，我想在控制中编辑显示在同一页面上的数据。但是当我编写网格视图行编辑事件时，它会在网格视图行中显示文本框，谁能帮助我如何使用 rowediting 事件禁用网格视图中的内联编辑？

```
<asp:GridView ID="gvItems" runat="server" AutoGenerateColumns="False" AllowPaging="True"
            BorderStyle="Solid" BorderWidth="1px" CellPadding="4" ForeColor="#333333" GridLines="None"
            OnPageIndexChanging="gvItems_PageIndexChanging" Width="901px"
            OnRowCommand="gvItems_RowCommand" OnSelectedIndexChanged="gvItems_SelectedIndexChanged" OnRowDataBound="gvItems_RowDataBound" OnRowEditing="gvItems_RowEditing">
            <AlternatingRowStyle BackColor="White" />
            <Columns>
                <asp:ButtonField  Text="Edit" CommandName="Change" />
                <asp:ButtonField  Text="Addend" CommandName="Addend"  />
                <asp:BoundField DataField="ItemID" HeaderText="ID" />
                <asp:BoundField DataField="Project" HeaderText="Project" SortExpression="Project" />
                <asp:BoundField DataField="Type" HeaderText="Type" />
                <asp:BoundField DataField="Release" HeaderText="Release" />
                <asp:BoundField DataField="Priority" HeaderText="Priority" />
                <asp:BoundField DataField="Severity" HeaderText="Severity" />
                <asp:BoundField DataField="Client" HeaderText="Client" />
                <asp:BoundField DataField="Status" HeaderText="Status" />
                <asp:BoundField DataField="Subject" HeaderText="Subject" />
                <asp:BoundField DataField="CreatedDate" DataFormatString="{0:d}" HeaderText="Created Date" />

                <asp:TemplateField>
                    <ItemTemplate>
                        <!--To fire the OnRowEditing event.-->
                        <asp:LinkButton ID="lbView" runat="server" CommandName="View"
                            Text="View" CommandArgument="<%# Container.DataItemIndex %>">
                        </asp:LinkButton>
                      <asp:HiddenField runat="server" ID="hdnItemID" Value='<%#Eval("ItemID") %>'>
                                    </asp:HiddenField>
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>

            <FooterStyle BackColor="#990000" Font-Bold="True" ForeColor="White" />
            <HeaderStyle BackColor="#990000" Font-Bold="True" ForeColor="White" HorizontalAlign="Left" />
            <PagerSettings Mode="NumericFirstLast" />
            <PagerStyle BackColor="#FFCC66" ForeColor="#333333" HorizontalAlign="Center" />
            <RowStyle BackColor="#FFFBD6" ForeColor="#333333" />
            <SelectedRowStyle BackColor="#FFCC66" Font-Bold="True" ForeColor="Navy" />
            <SortedAscendingCellStyle BackColor="#FDF5AC" />
            <SortedAscendingHeaderStyle BackColor="#4D0000" />
            <SortedDescendingCellStyle BackColor="#FCF6C0" />
            <SortedDescendingHeaderStyle BackColor="#820000" />
        </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-02T07:11:05.450

我遇到了同样的问题，经过一番挣扎，我发现问题出`CommandName`在我的情况下。

我将**Edit**更改为**edt**并将**Delete**更改为**del**，从那时起该`gridViewName_RowEditing`事件就再也没有触发过。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-22T09:06:04.130

`<EditItemTemplate></EditItemTemplate>`从网格视图中删除`<asp:TemplateField></asp:TemplateField>`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T09:05:10.477

你会尝试使用下面的链接

[http://csharpdotnetfreak.blogspot.no/2008/12/hide-gridview-columns-in-normal-mode.html?m=1](http://csharpdotnetfreak.blogspot.no/2008/12/hide-gridview-columns-in-normal-mode.html?m=1)

# css - 如何使用带有 Web Essentials 的 VS2012 将简单的 less 代码编译为 css？

> ID：14001426
> 
> 赞同：0
> 
> 时间：2012-12-22T08:52:58.943
> 
> 标签：css, visual-studio-2012, less

我有以下更少的代码：

```
.aa {
    > {
        li { color: red;}
    }
} 
```

当我在 Visual Studio 2012 中使用最新的 Web Essentials 运行它时，它告诉我第 2 行出现编译器错误。这是正确的吗？我认为它的有效性较低。想知道为什么它不能编译为 CSS。请注意，这与使用 css2less.cc 生成的代码的语法相同。我只是减少了行数：

```
.favorites {
    > {
        li:hover {

... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T12:50:58.783

我不认为这是有效的 LESS 语法。单独拥有`>`选择器对于代码块定义无效。您需要将其后面的选择器放在后面：

```
.aa {
    > li {
        color: red;
    }
} 
```

# php - 将php数组的每一项增加相同值的最佳方法

> ID：14001427
> 
> 赞同：0
> 
> 时间：2012-12-22T08:53:03.373
> 
> 标签：php, arrays, string, reference, foreach

将php数字数组的每一项增加相同值的最佳方法是什么？

基于 SO 中的这个[问题](https://stackoverflow.com/questions/1596988/fastest-way-to-iterate-array-in-php)，这个问题的最佳答案之一是：

```
foreach($array as $key => &$val) { 
  $val+=5;//   typo   $val[$key]+=5; was just fixed.
} 
```

正确的？

有没有更好/更短/更快的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T08:58:40.323

您的代码~~实际上~~是错误的；它不起作用，但这会：

```
foreach ($array as &$val) { 
  $val += 5;
} 
```

这可能也是最快的，一个简单`foreach`且无函数调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T08:54:05.103

这是~~较短~~的oneliner：

```
array_walk($array, function(&$i) { $i += 5; }); 
```

并且它不是您需要以最快的速度优化和查找的代码，因此请为您选择更具可读性的代码。

# ruby-on-rails-3 - 如何在 Rails 的控制器中使用由嵌套路由调用的自定义操作

> ID：14001433
> 
> 赞同：0
> 
> 时间：2012-12-22T08:54:04.603
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.1

我想在同一个控制器中添加一个名为“campaign”的自定义操作，其行为方式与 REST 的“new”类似，但目的不同，所以我想将它们分开。因为，这个活动表格会有一些额外的字段。另一种选择是将额外参数传递给“新”操作，并为常规“新”操作和自定义“活动”呈现不同的模板。但是，我想弄清楚为什么它没有成功。

因此，我想出了以下路线（“消息”是具有“新”和“活动”操作的控制器）：

```
get 'users/:user_id/messages/campaign', as: :campaign_user_message 
```

或者

```
resources :users do
   resources: messages do
      member do
        get 'campaign'
      end
   end
end 
```

在控制台输出，我得到 ActiverRecord:RecordNotFound 因为它这样做：

```
Started GET "/users/1/messages/campaign" for 127.0.0.1 at 2012-12-22 00:14:38 -0800
Processing by MessagesController#show as HTML
Parameters: {"user_id"=>"1", "id"=>"campaign"} 
```

我以这种方式调用动作：

```
link_to campaign_user_message_path(@user) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T09:36:41.623

如果你想拥有诸如“/users/1/messages/campaign”之类的路线，你应该这样写：

```
resources :users do
 resources :messages do
    collection do
      get 'campaign'
    end
 end
end 
```

如果您以自己的方式编写（使用成员 do ... end），您的代码将生成 url“/users/:user_id/messages/:id/campaign”。你应该通过@user和@message：

```
link_to campaign_user_message_path(@user, @message) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T00:46:08.247

对于提到的问题，我已经做了类似的事情：

```
resources :users do
    get 'messages/new_campaign' => 'messages#new_campaign'
    post 'messages/create_campaign' => 'messages#create_campaign'
end 
```

因此，我可以使用 url 帮助程序“user_messages_new_campaign”来获取操作 /users/:user_id/messages/new_campaign”

# c++ - boost::noncopyable 的 unordered_map 不能从 operator[] 返回引用

> ID：14001437
> 
> 赞同：8
> 
> 时间：2012-12-22T08:54:15.103
> 
> 标签：c++, boost

为了演示我的问题，请考虑这个无法编译的简单程序：

```
#include <boost/noncopyable.hpp>
#include <unordered_map>

class foo : boost::noncopyable { };

int main()
{
    std::unordered_map<int, foo> m;
    auto & element = m[0];

    return 0;
} 
```

使用当前版本的 boost (1.52)，Visual Studio 2012 返回错误： `cannot access private member declared in class 'boost::noncopyable_::noncopyable`.

std::unordered_map 的运算符 [] 返回对所提供键处元素的引用，乍一看似乎应该可以工作——我要求的是对元素的引用，而不是它的副本。

我对这个问题的理解是这样的（这可能是错误的，因为我有一段时间没有使用 C++）。如果未找到该键，unordered_map 将创建一个新元素并返回对新元素的引用。boost::noncopyable 定义了一个（私有）复制构造函数，但没有定义一个移动构造函数，因此编译器不会生成移动构造函数。在其 operator[] 中，std::unordered_map 使用了 std::move，但由于 boost::noncopyable 没有定义移动构造函数，所以它回退到复制构造函数。由于复制构造函数是私有的，因此编译失败。

促使这篇文章的原因是我试图创建一个 boost::signal2::signal 的 unordered_map，它继承自 boost::noncopyable。除了破解 boost 库，我能做一个简单的解决方法吗？将信号包装在 unique_ptr 中是一种选择，但在我看来，我可能在这里做错了什么。

## 更新：

我可能发布得太早了！似乎不可能将 boost::noncopyable 的子类添加到 unordered_map。Insert、operator[] 和 emplace 都使用复制构造函数（私有）或移动操作（对于 boost::noncopyable 不存在）。对我来说，这似乎是一个主要限制。甚至可以创建一个包含 boost::noncopyable 对象的 unordered_map 吗？我明确地*不想*复制它们——我希望它们在 unordered_map 中度过他们的整个生命周期。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-22T09:36:33.580

`boost::noncopyable`使用in 的子类并非不可能`unordered_map`，您只需为您的类型定义一个移动构造函数。如果您创建了自己的复制构造（就是这样做的），C++ 不会创建默认的移动构造函数`boost::noncopyable`。此外，如果它确实定义了默认移动构造函数，它会尝试调用父级的私有复制构造函数。因此，您必须定义一个不尝试调用`boost::noncopyable`的复制构造函数的移动构造函数。例如，这很好用：

```
#include <boost/noncopyable.hpp>
#include <unordered_map>

struct foo : public boost::noncopyable
{
    foo() = default;
    foo(foo&&) {}
};

int main()
{
    std::unordered_map<int, foo> m;
    auto & element = m[0];

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T10:02:10.253

这可能不是您想要的，但我想我会把它扔在那里。需要注意的一点是`second`from 的返回对的值`emplace()`，这表明第二次调用不会*引入*新成员，也不会复制现有成员。

同样，我不知道这是否更接近您想要的，但值得一试。我可能做错了什么，因为我不像其他人那样熟悉 C++11 标准库。如果是这样，我很抱歉。

最后，请注意，这*并不是*试图解决 OP 使用`operator []()`插入+访问的请求。相反，它试图简单地将`boost::noncopyable`推导构造成`unordered_map<>`. 要访问，您可能需要结合以下内容以及首字母`find()`来确定标签最初是否存在。

反正...

```
#include <boost/noncopyable.hpp>
#include <iostream>
#include <unordered_map>

class Foo : public boost::noncopyable
{
public:
    Foo(int value) : value(value) {};

    void setValue(int value) { this->value = value; }
    int getValue() const { return value; }

private:
    int value;
};

int main(int argc, char *argv[])
{
    typedef std::unordered_map<std::string, Foo> MyMap;
    MyMap mymap;

    // throw ("test".1) into the map
    auto p = mymap.emplace("test", 1);
    auto q = mymap.emplace("test", 2); // should not overwrite the first.

    // dump content
    cout << p.first->second.getValue() << '(' << p.second << ')' << ' '
         << q.first->second.getValue() << '(' << q.second << ')' << endl;

    // modify through the second returned iterator/bool pair.
    q.first->second.setValue(3);

    // dump again, see if p was also updated.
    cout << p.first->second.getValue() << '(' << p.second << ')' << ' '
         << q.first->second.getValue() << '(' << q.second << ')' << endl;

    return 0;
} 
```

**输出**

```
1(1) 1(0)
3(1) 3(0) 
```

# java - 使用嵌套异常是一种好习惯吗？

> ID：14001439
> 
> 赞同：14
> 
> 时间：2012-12-22T08:54:22.357
> 
> 标签：java, exception, exception-handling

这可能是一个广泛的问题，不是那么风格，但如果可能的话，我仍然想获得一些提示或指导。

我一直在查看一些遗留代码，发现其中的一部分包含异常嵌套 3 或 4 层的方法。
这是否被认为是一种正常的做法，还是应该尽可能避免这种代码风格？如果应该避免，除了增加异常处理的成本和降低可读性之外，还有哪些负面影响？有没有常见的重构代码的方法来避免这种情况？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-24T09:46:47.557

我个人更喜欢以下意识形态

**包装外星人异常**

“外星人”异常是由 Java API 或第三方库引发的异常。换句话说，您无法控制的异常。

最好捕获所有外来异常并将它们包装在适当的应用程序特定异常中。一旦外来异常转换为您自己的异常，您可以以任何您喜欢的方式传播该异常。

**重新抛出检查的异常可能会变得混乱**

如果您的应用程序使用已检查异常，则重新抛出原始异常意味着重新抛出它的方法也必须声明它。

您越接近调用层次结构的顶部，将声明抛出的异常越多。除非你只是声明你所有的方法来抛出异常。但是，如果这样做，您不妨使用未经检查的异常，因为无论如何您并没有真正从编译器异常检查中获得任何好处。

这就是为什么我更喜欢在将它们传播到调用堆栈之前**捕获非应用程序特定异常并将它们包装在应用程序特定异常中的原因。**

**包装指南：**异常发生的上下文可能与异常本身的位置一样重要。应用程序中的给定位置可以通过不同的执行路径到达，如果发生错误，执行路径可能会影响错误的严重性和原因。

如果在将异常向上传播到调用堆栈时需要将上下文信息添加到异常中，则需要使用主动传播。换句话说，您需要在调用堆栈的各个相关位置捕获异常，并将相关的上下文信息添加到其中，然后再重新抛出或包装它。

```
public void doSomething() throws SomeException{

    try{

        doSomethingThatCanThrowException();

    } catch (SomeException e){

       e.addContextInformation(“more info”);
       throw e;  //throw e, or wrap it – see next line.

       //throw new WrappingException(e, “more information”);

    } finally {
       //clean up – close open resources etc.
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T09:27:46.447

如果可能，不应将检查的异常向上传播或链接。如果一个方法抛出一个检查异常，它的调用者应该处理它，如果调用者没有处理它并将它传播给它的调用者，那么整体复杂性就会增加。

在一个三层的例子中：Dao、Service、Controller

DAO 层将抛出 DAOException 服务层不应该将 DAOException 暴露给 Controller，而是应该抛出相关的 BuinessExceptions，而 Controller 应该处理这些异常。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-28T07:02:55.313

**我一直在查看一些遗留代码，发现其中的一部分包含异常嵌套 3 或 4 层的方法。**

**这是否被认为是一种正常的做法，还是应该尽可能避免这种代码风格？**

这不是以这种方式处理您的异常的必要过程，因为它会增加您的应用程序开销，直到您确实需要处理非常具体的异常（已检查或 Alien Exceptions）并且您可以忽略开销以获取特定信息来处理该异常.

**如果应该避免，除了增加异常处理的成本和降低可读性之外，还有哪些负面影响？**

正如我所提到的，您不会获得有关异常的具体信息，如果您不打算使用嵌套异常处理（向上层处理程序抛出一些附加信息），您可能/可能不会代表一些棘手的异常执行特定操作，但在嵌套情况下，您可以通过处理特定情况来执行操作。

**有没有常见的重构代码的方法来避免这种情况？**

如果你的程序设计得很糟糕，可以做你想做的事情并且没有严重的错误，看在上帝的份上，别管它！当您需要修复错误或添加功能时，您会无情地重构您在努力中遇到的代码。覆盖自定义异常处理程序中的异常类并添加一些附加功能来处理您的问题。

重写方法不得抛出比重写方法声明的新异常或更广泛的已检查异常。例如，声明 FileNotFoundException 的方法不能被声明 SQLException、Exception 或任何其他非运行时异常的方法覆盖，除非它是 FileNotFoundException 的子类。

跳这会帮助你。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-24T09:43:51.477

异常处理往往是一种处理流控制的昂贵方式（当然对于 C# 和 Java）。

构建异常对象时，运行时会做很多工作——将堆栈跟踪放在一起，找出处理异常的位置等等。

如果使用流控制语句进行流控制，则所有这些内存和 CPU 资源的成本都不需要扩展。

此外，还有一个语义问题。例外是针对特殊情况，而不是针对正常的流量控制。应该使用异常处理来处理意外/异常情况，而不是作为正常的程序流程，因为否则，未捕获的异常会告诉您更少。

除了这两个之外，还有其他人阅读代码的问题。大多数程序员不会期望以这种方式使用异常，因此代码的可读性和可理解性会受到影响。当一个人看到“异常”时，人们会想——发生了一件不好的事情，一件不应该正常发生的事情。因此，以这种方式使用异常只会令人困惑。

请查看以下链接

[**异常处理：Java 1.4 的常见问题和最佳实践 - pdf**](https://www.google.com.kw/url?sa=t&rct=j&q=&esrc=s&source=web&cd=8&ved=0CGkQFjAH&url=http%3A%2F%2Fciteseerx.ist.psu.edu%2Fviewdoc%2Fdownload%3Fdoi%3D10.1.1.11.4355%26rep%3Drep1%26type%3Dpdf&ei=PiHYUNPLMpOAhQf7zIC4BQ&usg=AFQjCNG4hU1o2ZMPs_z0HH5JNuONbJCzyQ&sig2=XgOOMKcohS2CWYfqxTrU2w&bvm=bv.1355534169,d.ZG4&cad=rja)

[**为什么不使用异常作为常规控制流？**](https://stackoverflow.com/questions/729379/why-not-use-exceptions-as-regular-flow-of-control?answertab=votes#tab-top)

[**异常处理的最佳实践**](http://onjava.com/pub/a/onjava/2003/11/19/exceptions.html?page=1)

[**错误处理**](https://softwareengineering.stackexchange.com/questions/107723/arguments-for-or-against-using-try-catch-as-logical-operators)

[**谷歌链接先生**](https://www.google.com.kw/search?q=Is+it+a+good+practice+to+use+nested+exceptions%3F&rlz=1C5CHFA_enKW503KW503&oq=Is+it+a+good+practice+to+use+nested+exceptions%3F&aqs=chrome.0.57j60.879&sugexp=chrome,mod=13&sourceid=chrome&ie=UTF-8)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T10:11:02.423

有两种方法：

```
To generate a separate exception for each event.
To create a generic exception and describe what caused it 
```

第一种方法允许您编写不同的代码来处理不同的事件，但它需要您编写大量的异常类，并且在某些情况下可能太多了。

第二种方法更简洁，但很难处理不同的情况。

正如在编程中经常发生的那样，最好的解决方案是在中间，在这里您可以平衡生成单独的异常和将一个异常用于其他情况。

在这种情况下，经验法则可能是为要使用单独代码专门处理的异常生成单独的异常类。

与抛出什么类似，**我们也应该控制捕获什么**。我们可以对 catch 块使用两种方法：

一个单一的 catch 块。例如：

```
catch (Throwable e) {
throw new CommandExecutorException(e);
} 
```

许多 catch 块为每个异常提供一个。例如：

```
} catch (ClassCastException e1) {
 ...
} catch (FileNotFoundException e) {
... 
} catch (IOException e) {
...
} 
```

第一种方法非常紧凑，但基本上将每个异常分组在同一个案例中，它仅在所有异常被平等管理并做同样事情的情况下才有用。这种方法通常不鼓励使用，因为它无法控制捕获的异常，有时会导致难以发现的严重错误。

第二种方法需要更多的代码行，但您可以根据发生的异常执行不同的操作。这种方法更灵活，但在某些情况下，由于异常处理，您的方法会变得很长。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-24T09:23:20.493

关于处理遗留代码，我建议您看一下涵盖该主题的书： [http](https://rads.stackoverflow.com/amzn/click/com/0131177052) ://www.amazon.com/Working-Effectively-Legacy-Michael-Feathers/dp/0131177052 您甚至不必阅读整个书，只看你此刻关心的事。

还有一本关于良好做法的好书： [http ://www.amazon.com/Clean-Code-Handbook-Software-Craftsmanship/dp/0132350882/ref=sr_1_1?s=books&ie=UTF8&qid=1356340809&sr=1-1&keywords=clean +代码](https://rads.stackoverflow.com/amzn/click/com/0132350882)

处理嵌套异常的最佳方法是重构代码并使用运行时而不是检查异常，并在需要时处理那些异常。这样代码更易读也更容易维护。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-24T09:23:46.267

它取决于业务逻辑。您可以对异常本身采取行动，或者您可以将其一直传播到调用者并将其留给调用者以执行他想要的操作。

例如，有很多第三方 API 不处理异常，而是从方法中抛出异常，从而方便 API 用户根据需要采取行动。

eq oracle JDBC 驱动程序。Driver.getConnection() 抛出异常。现在调用者/API 用户可以根据需要处理它。一个可能只是打印堆栈跟踪，一个可能会通知管理员请求他的注意，或者一个可能选择只是静默退出应用程序。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-22T09:03:25.140

您应该取消异常嵌套。您应该首先避免将异常链接起来，或者（有选择地）展开然后重新将嵌套的异常重新抛出堆栈。

# iphone - 从 NSString 中删除前导和尾随换行符

> ID：14001448
> 
> 赞同：0
> 
> 时间：2012-12-22T08:55:16.153
> 
> 标签：iphone, ios, xcode, nsstring

我有一个`NSString`由用户输入的文本组成`UITextView`。因此，字符串可能有前导和尾随换行符，以及字符串中的换行符（如果他们按回车键在新行上键入）。我想从字符串的开头和结尾删除任何换行符，使字符串中的任何字符保持不变。

解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-22T09:01:13.317

```
text = [text stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]]; 
```

这也修剪了空白。如果要保留空格，只需使用 the`newlineCharacterSet`代替。

已编辑，根据@ghettopia 关于使用 newlineCharacterSet 而不是创建的正确建议。定制一个。

# android - 如何将铃声存储为字符串？

> ID：14001451
> 
> 赞同：2
> 
> 时间：2012-12-22T08:55:58.330
> 
> 标签：android, uri, ringtone

在我的应用程序中，我需要用户选择铃声作为应用程序声音。我`RingtoneManager.ACTION_RINGTONE_PICKER`用来获取选定的铃声。它返回铃声`Uri`，我可以把它变成铃声，一切都很好。但这是棘手的部分：

我所有的应用程序数据都保存在一个 XML 文件中，所以我需要一种将铃声保存为`String`. 我正在考虑使用`Uri.getPath()`并在我的应用程序中保存路径来获取铃声的路径。但是当我需要使用它时，我找不到将路径转换回铃声的方法。这是我尝试将 Uri 转换为 String 并返回的代码：

```
String ringtonePath = ringtoneUri.getPath();
ringtoneUri = Uri.parse(ringtonePath);
Ringtone ringtone = RingtoneManager.getRingtone(getActivity(), ringtoneUri); 
```

它不起作用。LogCat 输出：

```
Failed to open ringtone /internal/audio/media/13 
```

和铃声得到`null`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T09:02:26.943

`Uri.path`只返回`path`URL 的一部分。例如，如果 URI 是“http://hello.com/world/1”，那么`path`它只是 URI 的“/world/1”部分。您应该将结果存储`Uri.toString()`在您的 XML 中。

# javascript - 功能范围和上下文的差异

> ID：14001452
> 
> 赞同：0
> 
> 时间：2012-12-22T08:56:01.023
> 
> 标签：javascript

javascript 中的函数是否具有全局和本地范围？请参阅下面的代码

```
function doSomething()
{
    function foo()
{
    alert(this);
}

foo();
}
foo(); 
```

这里函数`foo()`没有被执行。但是函数中的“this”关键字指向全局窗口对象，如果函数`doSomething()`被执行。这意味着函数`foo()`在全局范围内执行。既然它是在全局范围内执行的，为什么我们不能直接执行嵌套函数而不先执行`doSomething()`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T08:58:07.110

您混淆了范围和上下文。第一个对于给定函数是固定的（除非它由某个函数返回，有效地被注入到外部作用域中），第二个（其中定义了`this`在这个函数内部引用的内容）在函数被调用时被赋予- 实际上可以用`call`和改变`apply`。

考虑一下：

```
var someObj = function() {
    var internalObj = {
        nam: 'internal',
        doSomething: function() {
            console.log('Called from ' + this.name);
        }
    }
    internalObj.doSomething('Internal');      // 1
    var someFunc = internalObj.doSomething;
    someFunc();                               // 2
    return {
        nam: 'external',
        doSomething: internalObj.doSomething
    }        
}
var x = new someObj();
x.doSomething();                              // 3
setTimeout(x.doSomething, 1000);              // 4
setTimeout(x.doSomething.bind({nam:'a new one'}), 2000); // 5 
```

[**JSF**](http://jsfiddle.net/reEz5/)中。

在这个例子中，我们将方法 'doSomething' 定义为`internalObj`变量的属性，它是这个构造函数的本地属性——如果你试图在外部访问它`someObj`，你会得到 ReferenceError。

当在构造函数本身 (1) 中调用方法时，您将记录“从内部调用” - 正如方法的上下文对象 ( `this`) 现在所指的那样`internalObj`。

当我们将此方法（其引用）分配给另一个局部变量并从那里调用它时（2），“未定义”被记录下来。Scope 在这里显然没有改变，但是上下文变量改变了：它现在引用了全局对象。

然后我们将这个方法作为构造函数的结果返回 - 事情开始变得更加有趣：我们的函数现在在外部范围内可用！但请注意，(3) 和 (4) 中其调用结果之间的差异：前者给了我们`external`（因为这里的上下文对象是由构造函数创建的），后者再次返回我们，`undefined`即使语法是一样的。) 发生这种情况是因为发送到超时和事件处理程序的函数“丢失”了它们的上下文，简而言之......除非我们用`Function.prototype.bind`方法修复它，就像在 (5) 中一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T08:58:03.990

JavaScript 具有函数级范围。

任何函数*声明*都将自动限定到其最近的包含函数。

函数表达式只返回一个值（即一个函数），因此您可以以您选择的任何方式对它们进行作用域。

> 这意味着函数 foo() 正在全局范围内执行

您混淆了范围和上下文。

范围由声明变量的位置确定（使用`var`或特殊规则，如“函数声明有范围”）。它影响变量可见的位置。

上下文由函数的调用方式决定。它影响的价值`this`是什么。

两者没有联系。

# c++ - 如何在不崩溃应用程序的情况下使上下文菜单消失？

> ID：14001456
> 
> 赞同：0
> 
> 时间：2012-12-22T08:56:48.943
> 
> 标签：c++, qt, contextmenu, qt-creator

请看这张照片：

![在此处输入图像描述](../Images/6f7e7f0f3756f3654b50e751da86aea2.png)

您可以看到一个 QTableView，其中包含一些愚蠢的内容和一个位于其中心的上下文菜单。我的问题是，如果我在上下文菜单打开时单击表格（无论按下哪个按钮）视图（并且我希望上下文菜单会在 Windows 程序中发生时消失，然后如果右键按钮又出现在新位置被按下）我的程序立即崩溃。我这样创建它：

```
 connect(tableView, SIGNAL(customContextMenuRequested(const QPoint&)),
              this, SLOT(showContextMenu(const QPoint&)));

void MainWindow :: showContextMenu(const QPoint &_point)
{
   QPoint      pos   = tableView->mapToGlobal(_point);
   QModelIndex index = tableView->currentIndex();
   int         row   = index.row();

   QMenu menu;
   menu.addAction("Test 1");
   menu.addAction("Test 2");

   QAction *action =  menu.exec(pos);
   QString text    = action->text();

   if (text == "Test 1")
      qDebug("Test 1");
   else
      if (text == "Test 2")
          qDebug("Test 2");
   else
      qDebug("Vzdroch");
 } 
```

我不知道它为什么会崩溃。QtCreator 中没有调试器之类的东西，即它是，但安装它就像向太空发射火箭一样复杂。我需要的只是像往常一样处理超出上下文菜单区域的鼠标点击。

我知道您可能很难找出它崩溃的原因，所以我会稍微缓和一下我的问题。当鼠标超出其区域时，有没有办法使该上下文菜单消失？`hovered()`在 Qt 中有一个名为的信号。它在用户鼠标悬停在小部件上时发出，所以我正在搜索一个信号，我们称之为它`unhovered()`，当用户将鼠标从小部件上移开时发出。不幸的是，我没能找到这样的信号。有没有办法让我的程序知道鼠标已关闭？

希望我已经完全描述了我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T09:03:32.427

[`QMenu::exec`](http://doc.qt.digia.com/qt/qmenu.html#exec)如果没有选择菜单项，则返回 0。

您需要`action` 在取消引用之前进行检查，否则您将取消引用导致未定义行为的空指针。

```
QAction *action =  menu.exec(pos);
if (!action) {
  qDebug() << "no menu selected";
} else {
  QString text  = action->text();
  ...
} 
```

# ruby-on-rails - 是否可以通过 RailsAdmin 中的 CanCan 和 Rolify 限制访问？

> ID：14001457
> 
> 赞同：0
> 
> 时间：2012-12-22T08:56:57.140
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-admin

我正在使用 Devise、Rolify 和 CanCan 进行身份验证和授权。

我也在为我的`superadmin`.

但是，我想授予对我其他角色的访问权限（例如`admin`, `agent`, `client`）。

其中每个角色只能访问 RailsAdmin 中的某些模型/功能。

我可以这样做吗？如果是这样，怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T12:44:42.850

github上有一个wiki。阅读[https://github.com/sferik/rails_admin/wiki/CanCan](https://github.com/sferik/rails_admin/wiki/CanCan)

# matlab - 如何从目录中选择一个文本文件并在 GUI matlab 中读取它

> ID：14001460
> 
> 赞同：0
> 
> 时间：2012-12-22T08:57:19.420
> 
> 标签：matlab, user-interface

我有一个 GUI 系统，它应该从目录中选择一个文本文件，打开它并在代码中读取它。我有这个代码（获取文本文件的部分）：

```
function FindCallback(source,eventdata)
     [FileName,PathName]= uigetfile('*.txt','browse')
 s={};
           fid = fopen('*.txt'); 
    tline = fgetl(fid); 
        while ischar(tline) 
           s=[s;tline]; 
           tline = fgetl(fid); 
        end 
```

它向我显示了一个错误：

```
Invalid file identifier.  Use fopen to generate a valid file
identifier.
Error in ==> GUI_oo>FindCallback at 77
    tline = fgetl(fid);
??? Error while evaluating uicontrol Callback 
```

任何建议..

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T12:15:26.923

这是你的问题：

```
fid = fopen('*.txt'); 
```

没有文件名“*.txt”，fopen 的参数应该是您在上面的 FileName 中存储的真实文件名。

所以这应该是：

```
fid = fopen([PathName FileName]); 
```

您可能还想在 fopen 之前检查 FileName 是否为 0 (IIRC)，因为用户可能会取消文件选择。试试这个：

```
if FileName == 0
   % maybe display a warning here
   return
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T12:08:48.463

它应该改为

```
path = fullfile([FileName PathName])
fid = fopen(path); 
```

打开 *.txt 是错误的

# linux - 在 QNAP NAS 上安装 node.js 时显示“flock: Command not found”

> ID：14001461
> 
> 赞同：2
> 
> 时间：2012-12-22T08:57:23.133
> 
> 标签：linux, node.js, flock, qnap

我想在 QNAP NAS 上安装 node.js，它是一个 linux 操作系统，我可以使用 ipkg 安装包。但 ipkg 没有 node.js ......

我将网络论坛称为[http://forum.qnap.com/viewtopic.php?p=248556](http://forum.qnap.com/viewtopic.php?p=248556)，安装了 V8 JavaScript 引擎。

然后安装 node.js

当我在 /opt/node 上输入**make**时，会显示如下错误消息：

> make -C out BUILDTYPE=Release V=1 make[1]: Entering directory `/share/HDA_DATA/.qpkg/Optware/node/out' flock /share/HDA_DATA/.qpkg/Optware/node/out/Release/linker.lock g++ -pthread -rdynamic -o /share/HDA_DATA/.qpkg/Optware/node/out/Release/mksnapshot -Wl,--start-group /share/HDA_DATA/.qpkg/Optware/node/out/Release/obj.target/mksnapshot/deps/v8/src/mksnapshot.o /share/HDA_DATA/.qpkg/Optware/node/out/Release/obj.target/deps/v8/tools/gyp/libv8_base.a /share/HDA_DATA/.qpkg/Optware/node/out/Release/obj.target/deps/v8/tools/gyp/libv8_nosnapshot.a -Wl,--end-group make[1]: flock: Command not found make[1]: *** [/share/HDA_DATA/.qpkg/Optware/node/out/Release/mksnapshot] Error 127 make[1]: Leaving directory`/share/HDA_DATA/.qpkg/Optware/node/out' make: *** [node] Error 2

QNAP NAS(TS-119P2) 没有flock 命令行，怎么办？有人可以帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T11:44:34.217

```
ipkg install util-linux 
```

它包含flock 命令。

转到节点源目录。

```
./configure --prefix=/opt
...

LINK=g++ make
...

LINK=g++ make install 
```

为我工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-30T16:47:11.650

我不得不将 CC 作为我的编译器导出，然后运行 ​​babalooi 建议的命令：

```
export CC=/opt/bin/gcc
./configure --prefix=/opt 
```

...

```
LINK=g++ make 
```

...

```
LINK=g++ make install 
```

# android - 在Android中像曲线形状一样裁剪位图图像

> ID：14001465
> 
> 赞同：1
> 
> 时间：2012-12-22T08:57:56.750
> 
> 标签：android, image, bitmap

我想在 android 中裁剪图像。它可能在 I-phone 中使用 Bezier 曲线，有没有办法在 android 中裁剪图像或使用 Bezier 曲线。

![曲线形状图像](../Images/215a31e2360c542e14d76b1ee494fe4b.png)

# javascript - 如何在旧版本之上显示较新的 Google Map InfoWindows

> ID：14001475
> 
> 赞同：0
> 
> 时间：2012-12-22T08:58:42.570
> 
> 标签：javascript, jquery, html, css, google-maps

我正在动态添加带有 InfoWindows 的 Google Map。问题是，当两个 InfoWindows 重叠时，最近的一个不会总是在旧的之上。

如何确保后一个 InfoWindow 始终显示在使用 Javascript/jQuery 的所有其他 InfoWINdows 之上？

当我通过 websocket 接收到新图像和坐标时，会添加 InfoWindows。这是我的代码：

```
function addToMap(image) {
    console.log("In addToMap...");

    coordinates = image[2].split(',');
    pin=new google.maps.LatLng(coordinates[0], coordinates[1]);

    if(marker) {
        marker.setMap(null);
    }

    var markerIcon = image_car_icon;

    marker=new google.maps.Marker({
        position:pin,
        zIndexProcess: function( m )
        {
            return 9999999 + pin_count;
        },
        icon:markerIcon
    });

    marker.setMap(map);

    map.setCenter(marker.getPosition());

    pin_count++;

    if(image[0] != "NOP") {
        popup = new google.maps.InfoWindow({
            content:'<image id="pin_' + pin_count + '" src="data:image/png;base64,' + image[1] +'"/>',
        });

        popup.open(map, marker);
    }
} 
```

popup 是我获得新图像时创建的信息窗口。假设两个图像具有几乎相同的坐标，我希望第二个 InfoWindow 位于顶部（z-index）。但是，大多数时候，第一个窗口保持在顶部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:41:17.203

我找到了解决方案。我通过使用图像作为句柄来手动修改标记的 z-index。`marker_count`是一个正在运行的标记，因此`z-index`将大于前一个标记。

```
google.maps.event.addListener(popup, 'domready', function() {
    console.log("DOM READY...........................");

    // Bring latest Image to top            
    e = $('#pin_' + img_count).parent().parent().parent().parent();

    e.css({
        'z-index' : (99999 + marker_count),
    });
}); 
```

# objective-c - [__NSCFConstantString pointSize]: 无法识别的选择器发送到 instanc

> ID：14001477
> 
> 赞同：8
> 
> 时间：2012-12-22T08:59:22.957
> 
> 标签：objective-c, macos, cocoa, nsattributedstring, nsalert

我正在尝试将 Attributed 字符串放入 NSTextField 中，该字符串本身位于 NSAlert 中 这是我的代码：

```
NSTextField *label1 = [[NSTextField alloc]initWithFrame:NSMakeRect(0, 23, 50, 20)];
[label1 setEditable:FALSE];
[label1 setAllowsEditingTextAttributes:TRUE];
[label1 setBezeled:FALSE];
label1.backgroundColor = [NSColor clearColor];
NSString *login = @"Username";
NSMutableAttributedString *attrString = [[NSMutableAttributedString alloc] initWithString:login];
NSString *boldFontName = [[NSFont boldSystemFontOfSize:12] fontName];
[attrString beginEditing];
NSRange ran = NSMakeRange(0, 8);
[attrString addAttribute:NSFontAttributeName
                   value:boldFontName
                   range:ran];

[attrString endEditing];
NSLog(@"%@",attrString);
[label1 setAttributedStringValue:attrString];
[alert setAccessoryView:label1];
[alert runModal]; 
```

但是，一旦调用 [alert runModal]，我的应用程序就会崩溃

```
"[__NSCFConstantString pointSize]: unrecognized selector sent to instance 0x7fff74035bb0" 
```

我不确定为什么会这样。看来它与字符串有关，因为只要我删除 [alert setAccessoryView:label1] 或给 label1 一个标准的 nsstring，它就可以正常工作。请帮忙！

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-22T09:24:34.100

你做得对。但是你犯了一个小错误。您已`NSString`作为属性传递，`NSFontAttributeName`但它期望`NSFont`.

尝试这个。

```
 NSFont *boldFontName = [NSFont boldSystemFontOfSize:12];
[attrString beginEditing];
NSRange ran = NSMakeRange(0, 8);
[attrString addAttribute:NSFontAttributeName
                   value:boldFontName
                   range:ran]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-30T09:15:21.867

上面的答案是绝对正确的。我遇到了同样的崩溃，它曾经只在 iOS 7.0.3 和 7.0.4 中崩溃，并且在所有其他版本中都能完美运行。经过这么多调查，我才知道@"HelveticaNeue-Italic" 在 iOS 7.0.3 和 7.0.4 版本中不可用，所以我曾经在这些版本中遇到过崩溃。

我已经用下面的代码解决了这个问题：

```
self.headerFont = [UIFont fontWithName:@"HelveticaNeue-Italic" size:16.0f];
if (self.headerFont == nil) {
    self.headerFont = [UIFont fontWithName:@"HelveticaNeue" size:16.0f];
} 
```

# git - Git post-receive 没有运行

> ID：14001482
> 
> 赞同：3
> 
> 时间：2012-12-22T08:59:42.583
> 
> 标签：git, redmine

我在这里搜索了几个问题并没有得到答案，所以我将询问我的具体情况。

真正简单的 post-receive 钩子，它只是卷曲到 Redmine 以强制 Redmine 在提交时更新 repo 的视图。（为了调试，我也在回显“Post Receive Hook Go”以查看

设置：裸仓库 /git/repos/test.git

```
$ cd ~/
$ git clone file:///git/repos/test.git
$ cd test/
$ vim somefile_gets_updated
$ git commit -a -m 'Tackling bug #1, include the bug number so Redmine will pick it up and associate it'
$ git push origin master 
```

这按预期提交和推送，但 post-receive 钩子不会触发

如果我这样做 `$ curl http://localhost:3000/sys/fetch_changesets?key=cGdcUaRr8u4Rr4zXzXhr`并刷新我的 redmine 问题页面，它会起作用，万岁！

如果在推动后我这样做：

```
$ ./.git/hooks/post-receive 
```

我得到：

```
$ Post Receive Hook Go 
```

它有效，万岁！

所以我知道 curl 有效，即使是 post-receive 也有效，Git 只是不会触发它

这是钩子

```
 $ cd .git/hooks
 $ ls -l | grep post-receive
 $ -rwxr-xr-x  1 bobbydown  staff   109 Dec 22 03:42 post-receive 
```

我只是不明白为什么git没有运行钩子......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T09:39:00.940

The post-receive hook fires after a repo *receives* pushed commits.

In your scenario, your hook should be in your *bare* repo, not the clone.

# javascript - document.body.clientHeight 不工作？(JavaScript)

> ID：14001483
> 
> 赞同：10
> 
> 时间：2012-12-22T08:59:43.160
> 
> 标签：javascript

document.body.clientHeight 没有返回正确的值（在下面的代码中返回 0 onload 和 20 onresize ）

```
<html>
<head>
<title>Untitled</title>
<script type="text/javascript" >
function height1()
{
    document.getElementById("viewheight").innerHTML = document.body.clientHeight;
}
</script>
</head>

<body onload="height1();" onresize="height1();">
<span id="viewheight"></span>
</body>
</html> 
```

任何评论.....请帮助！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-22T09:07:54.760

试试看`document.getElementById("viewheight").innerHTML = window.innerHeight;`

您的脚本的行为是完全正确的。一开始，您的身体高度实际上为零（身体高度是文档的高度）。因为没有显示任何内容，所以高度结果为零。调整大小后打印的“0”跨越 20 像素，因此结果将保持在 20 像素。

如果您想获得可以使用的窗口或主体的最大高度`Math.max( window.innerHeight, document.body.clientHeight )`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-01-17T13:21:07.347

`.clientHeight`只给我们一个整数值。但是这里缺少 scale-type 的大小，这就是为什么它不能正常工作，`+ "px"`只是在`document.body.clientHeight`.

```
<script>
    function height1() {
        document.getElementById("viewheight").innerHTML = document.body.clientHeight + "px";
    }
</script> 
```

# javascript - jQuery end() 函数

> ID：14001484
> 
> 赞同：0
> 
> 时间：2012-12-22T08:59:49.697
> 
> 标签：javascript, jquery

调用 end() 会从 jQuery 堆栈中弹出最后一项，所以

```
$("div") 
```

返回相同的东西

```
$("div").children().end() 
```

我在调试器中看不到与返回的内容有任何区别，但我注意到

```
divs1 = $("div")
divs2 = $("div").children().end()
console.log(divs1 == divs2) // false 
```

为什么这两个对象不相等？javascript中的对象是否有某种唯一标识符，就像Ruby中的那样？还是我在控制台中看不到区分两者的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T09:05:32.217

通过选择器获取 jQuery 对象时，jQuery 每次都会将结果包装在一个新对象中。所以目标对象是相同的，包装 jQuery 对象不是。

您应该以这种方式直接比较 DOM 节点：

```
console.log(divs1[0] == divs2[0]) // true 
```

（`...[0]`可以访问第一个节点）

# sql-server - SQL Server 2008 外键冲突

> ID：14001486
> 
> 赞同：3
> 
> 时间：2012-12-22T08:59:58.217
> 
> 标签：sql-server, sql-server-2008, foreign-key-relationship

我们有很多行的表。我想在这两个表之间创建外键，但出现以下错误。

> *'CMEvent' 表保存成功；
> “BaseEvent”表
> 无法创建关系“FK_CMEvent_Oid”。
> ALTER TABLE 语句与 FOREIGN KEY 约束“FK_CMEvent_Oid”冲突。冲突发生在数据库“CMO_RestoredData”、表“dbo.BaseEvent”、列“Oid”中。`*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T04:32:39.190

当我在 CMEvent 表中有一行在 BaseEvent 中不存在时，我能够复制此错误。

尝试运行此查询：

```
SELECT * 
FROM CMEvent c
WHERE NOT EXISTS (
  SELECT * 
  FROM BaseEvent
  WHERE oid = c.oid ) 
```

如果您取回任何行，则必须先删除这些行，然后才能应用外键约束。

如果您需要保留这些孤立的行，您可以使用[WITH NOCHECK](http://msdn.microsoft.com/en-us/library/ms177463%28v=sql.105%29.aspx)仅将约束应用于新行。

# android - 发布免费和付费版本的库方法

> ID：14001488
> 
> 赞同：2
> 
> 时间：2012-12-22T09:00:17.340
> 
> 标签：android, google-play

我将向 Android 市场/Google Play 商店发布多个版本的应用程序。现在我正在寻找最好的方法来做到这一点。

我在这里阅读了很多关于如何以最简单的方式实现这一目标的问题。我不想创建特定于应用程序版本的活动，因为这很容易导致不同版本之间的代码不一致。所以我想使用[图书馆](https://stackoverflow.com/questions/10090671/using-a-library-to-maintain-free-paid-for-app-versions)的方法。这似乎也是最简单的方法，而不是我见过的所有需要​​大量 ANT 脚本等的示例

为了论证的缘故，我将拥有：

*   com.app.library
*   com.app.free
*   com.app.paid
*   com.app.paidmore

我的想法是将库中的代码基于包名称。我的部分活动不会显示或仅基于包名称禁用功能。这种方法有什么缺点？我似乎找不到任何东西，但我对这些意见感到好奇。当然，所有应用程序版本在某种意义上都包含所有功能，但该功能会被代码动态禁用。我认为修改代码以破解应用程序以获得完整功能将是很多工作，但我是对的吗？

[这种](https://stackoverflow.com/questions/6822672/android-app-versions-free-and-paid-tell-library-project-classes-if-app-is-fr)方法似乎是错误的，因为很容易修改 apk 并以修改后的方式分发它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T14:07:21.007

> 这种方法有什么缺点？

您的应用程序最终变得比它需要的更大（例如，驻留在免费用户设备上的付费功能）。而且，正如您所注意到的，它将所有功能都放在用户的设备上。

> 我认为修改代码以破解应用程序以获得完整功能将是很多工作，但我是对的吗？

如果超过五分钟，脚本小子打字太慢了。反编译，搜索并替换你的包名，重新编译。

> 这种方法似乎是错误的，因为很容易修改 apk 并以修改后的方式分发它。

这种方法实际上可能需要更多时间——可能整整十分钟——因为脚本小子可能需要更长的时间才能准确找出需要更改的资源。

当然，脚本小子可以抓取您的`paidmore`版本并对其进行攻击，因此您`free`和`paid`应用程序恰好具有`paidmore`功能这一事实并不是什么大问题。因此，恕我直言，最大的区别是 APK 大小，只有您知道版本之间的差异有多大以及是否存在问题。

# iphone - 从终端归档项目

> ID：14001490
> 
> 赞同：2
> 
> 时间：2012-12-22T09:00:22.570
> 
> 标签：iphone, xcode, cocoa-touch

我看过关于从终端构建项目的帖子。但我想存档项目并`.ipa`在我希望的指定文件夹中创建一个文件。

为此，我认为我需要开发人员证书、配置文件、sdk、架构、项目名称等。

```
I could specify below things,
Project Name: I go to project folder or I will give the path
SDK: ios4.0, likewise.
architecture: arm6,7 etc. 
```

但是我应该如何指定证书？我应该给出带有名称或 ID 的路径吗？还需要为此做些什么吗？我的意思是对必须做的事情进行简单的布局，这将非常有帮助。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T18:36:16.897

认为这就是您要查找的内容：Xcode “Build and Archive” from command line] [1](https://stackoverflow.com/questions/2664885/xcode-build-and-archive-from-command-line)

# c# - 如何从 GridView 向所选事件中的注册用户发送电子邮件提醒？

> ID：14001493
> 
> 赞同：-1
> 
> 时间：2012-12-22T09:00:50.447
> 
> 标签：c#, asp.net, sql-server-2008-r2, sendmail

我是一个新的 ASP.NET 开发人员，我正在开发一个简单的注册系统。我现在正在尝试让系统管理员能够在活动开始日期之前向注册用户发送提醒。所有可用的事件都将列在 GridView 中，并带有一个用于向该事件中的注册用户发送提醒的按钮。供您参考，我有以下数据库设计：

```
Employees Table: NetID, Name
Events Table: ID, Title
BookingDetails Table: BookingID, EventID, NetID 
```

* ***请注意，NetID 是员工的用户名**

ASP.NET 代码：

```
<asp:GridView ID="ListOfAvailableEvents_GrivView" runat="server" 
            AutoGenerateColumns="False" CellPadding="4" DataSourceID="SqlDataSource1" ForeColor="#333333"
                    GridLines="None" AllowPaging="True">
                    <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
                    <RowStyle BackColor="#F7F6F3" ForeColor="#333333" CssClass="generaltext" />
                    <Columns>
                        <asp:BoundField DataField="Title" HeaderText="Title" SortExpression="Title" />
                        <asp:BoundField DataField="Description" HeaderText="Description" SortExpression="Description" />
                        <asp:BoundField DataField="Location" HeaderText="Location" SortExpression="Location" />
                        <asp:BoundField DataField="StartDateTime" HeaderText="Start Date & Time" SortExpression="StartDateTime" />
                        <asp:BoundField DataField="EndDateTime" HeaderText="End Date & Time" SortExpression="EndDateTime" />
                        <asp:BoundField DataField="NumberOfSeats" HeaderText="Number of Seats" SortExpression="NumberOfSeats" />
                        <asp:BoundField DataField="Number of Bookings" HeaderText="Number of Bookings" ReadOnly="True"
                            SortExpression="Number of Bookings" />
                        <asp:TemplateField HeaderText="">
                            <ItemTemplate>
                                <asp:Button ID="sendButton" runat="server" CssClass="button" Text="Send Reminder &rarr;"
                                    OnClick="btnSend_Click" />
                            </ItemTemplate>
                        </asp:TemplateField>
                    </Columns>
                    <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
                    <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
                    <HeaderStyle Font-Bold="True" CssClass="complete" />
                    <EditRowStyle BackColor="#999999" />
                    <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
                </asp:GridView>

                <asp:HiddenField ID="HiddenField1" runat="server" />

                <asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:PM_RegistrationSysDBConnectionString %>"

            SelectCommand="SELECT Events.Title, Events.Description, Events.Location, Events.StartDateTime, Events.EndDateTime, Events.NumberOfSeats, COUNT(BookingDetails.BookingID) AS [Number of Bookings] FROM Events INNER JOIN BookingDetails ON Events.ID = BookingDetails.EventID WHERE (Events.IsActive = 1) GROUP BY Events.Title, Events.Description, Events.Location, Events.StartDateTime, Events.EndDateTime, Events.NumberOfSeats ORDER BY Events.StartDateTime DESC"></asp:SqlDataSource> 
```

C#代码：

```
protected void btnSend_Click(object sender, EventArgs e)
    {
        GridViewRow gvrow = (GridViewRow)(((Button)sender)).NamingContainer;
        HiddenField1.Value = ListOfAvailableEvents_GrivView.DataKeys[gvrow.RowIndex].Value.ToString();

        string title = gvrow.Cells[0].Text;
        string description = gvrow.Cells[1].Text;
        string location = gvrow.Cells[2].Text;
        string startDateTime = gvrow.Cells[3].Text;
        string endDateTime = gvrow.Cells[4].Text;

        string connString = ".............................;";

        using (SqlConnection conn = new SqlConnection(connString))
        {
            var sbEmailAddresses = new System.Text.StringBuilder(2000);
            int eventID = Convert.ToInt32(HiddenField1.Value);

            //Open DB connection
            conn.Open();

            string cmdText = @"SELECT     dbo.Events.Title, dbo.Employees.NetID
                                FROM         dbo.BookingDetails INNER JOIN
                                        dbo.Events ON dbo.BookingDetails.EventID = @EventID INNER JOIN
                                        dbo.Employees ON dbo.BookingDetails.NetID = dbo.Employees.NetID";
            using (SqlCommand cmd = new SqlCommand(cmdText, conn)) 
            {
                cmd.Parameters.AddWithValue("@EventID", eventID);
                cmd.ExecuteNonQuery();

                SqlDataReader reader = cmd.ExecuteReader();
                if (reader != null)
                {
                    while (reader.Read())
                    {
                        var sName = reader.GetString(0);
                        if (!string.IsNullOrEmpty(sName))
                        {
                            if (sbEmailAddresses.Length != 0)
                            {
                                sbEmailAddresses.Append(", ");
                            }
                            sbEmailAddresses.Append(sName).Append("@appServer.com");
                        }
                    }
                }
                reader.Close();

                var sEMailAddresses = sbEmailAddresses.ToString();
                string body = "..........................";

                int sendCount = 0;
                List<string> addressList = new List<string>(sEMailAddresses.Split(','));
                StringBuilder addressesToSend = new StringBuilder();

                for (int userIndex = 0; userIndex < addressList.Count; userIndex++)
                {
                    sendCount++;
                    if (addressesToSend.Length > 0)
                        addressesToSend.Append(",");

                    addressesToSend.Append(addressList[userIndex]);
                    if (sendCount == 10 || userIndex == addressList.Count - 1)
                    {
                        SendEmail(addressesToSend.ToString(), "", "Registration REMINDER Notification", body, true);
                        addressesToSend.Clear();
                        sendCount = 0;
                    }
                }

                cmd.ExecuteNonQuery();
            }
            //reset the value of hiddenfield
            HiddenField1.Value = "-1";
        }
    }

    protected void SendEmail(string toAddresses, string fromAddress, string MailSubject, string MessageBody, bool isBodyHtml)
    {
        SmtpClient sc = new SmtpClient("MAIL ADDRESS");
        try
        {
            MailMessage msg = new MailMessage();
            msg.From = new MailAddress("app@appServer.com", "Registration System");

            // In case the mail system doesn't like no to recipients. This could be removed
            //msg.To.Add("app@appServer.com");

            msg.Bcc.Add(toAddresses);
            msg.Subject = MailSubject;
            msg.Body = MessageBody;
            msg.IsBodyHtml = isBodyHtml;
            sc.Send(msg);
        }
        catch (Exception ex)
        {
            throw ex;
            // something bad happened
            //Response.Write("Something bad happened!");

        }

    } 
```

但我无法发送任何电子邮件。你能告诉我为什么吗？

更新：

我编写了代码，当我运行它时，我没有收到任何错误。我试图调试它，当我这样做时，我发现对`SendEmail(string toAddresses, string fromAddress, string MailSubject, string MessageBody, bool isBodyHtml)`方法的调用不起作用，我不知道为什么。

**那么您能告诉我如何向所选活动的注册用户发送电子邮件吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T09:14:14.123

```
for (int userIndex = 0; userIndex < addressList.Count-1; userIndex++)
                { 
```

检查这个for循环一次

# database-design - 3NF 以上的归一化

> ID：14001494
> 
> 赞同：-1
> 
> 时间：2012-12-22T09:00:53.757
> 
> 标签：database-design, normalization

为什么我们不规范我们上面的数据库设计`3NF`。为什么 4NF 和 5NF 处理的异常很少见，在什么情况下我们归一化为 5NF。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T12:44:21.637

高于 3NF 的范式并不适用于所有关系。并不是说我们*并不*总是应用更高的范式——除非你的关系具有使它们适用的特定品质，否则你*不能应用它们。*

不是高范式*处理的异常*很少见，而是使这些高范式适用的条件不一定普遍。

至于何时*应该*标准化为 4NF 或 5NF，答案是“总是，*如果*适用 -*除非*你有充分的理由不这样做”。

# android - Android：AutoCompleteTextView 上边距 ListView

> ID：14001496
> 
> 赞同：2
> 
> 时间：2012-12-22T09:01:10.850
> 
> 标签：android, listview, margin, padding, autocompletetextview

AutoCompleteTextView 在弹出窗口中显示一个 ListView 用于自动完成。在弹出窗口的顶部，在 ListView 开始之前，有一点边距，实际上 ListView 中的第一行看起来比其他条目高。有没有办法去除边距。对我来说，这只是一个问题，因为将 AutoCompleteTextView 的“dropDownVerticalOffset”更改为位于 TextView 的底部，否则会有负偏移，如果第一行的高度，您看不到差异。

我怎样才能删除这个边距？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:43:41.227

尝试将 XML 属性添加到您的 AutoCompleteTextView：

```
android:popupBackground="color_what_you_want_to_background" 
```

希望对你有帮助

# c# - Devexpress SearchLookUpEdit 获取列值

> ID：14001499
> 
> 赞同：1
> 
> 时间：2012-12-22T09:01:25.610
> 
> 标签：c#, devexpress

我无法从中获取列值`SearchLookUpEdit`。我`LookUpEdit`可以得到它

```
cbMarket.GetColumnValue("MarketId") 
```

在我`SearchLookUpEdit`有两个表字段。我可以得到`displaytext`或`valuemember`。但我不能指定字段。感谢帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T07:30:50.053

要获取任何列的值，请使用 SearchLookUpEdit 视图的 GetRowCellValue 方法或其变体：

```
object marketId = this.searchLookUpEdit1.Properties.View.GetFocusedRowCellValue("MarketId"); 
```

# javascript - 发送请求以下载文件，在 Javascript 中捕获响应

> ID：14001502
> 
> 赞同：0
> 
> 时间：2012-12-22T09:01:39.147
> 
> 标签：javascript, ruby-on-rails, forms, jquery, download

在 Rails2 Webapp 中，我正在用 javascript 创建一个表单来伪造下载文件的请求。在控制器中，我使用 send_file 呈现响应，以便下载文件。

查找要下载的文件有一个相当长的过程，同时我让客户端等待文件开始下载。出于这个原因，只要客户端单击下载按钮，我就会显示一条小消息，上面写着“正在请求文件...”。

问题：我如何（在 javascript 端）知道响应何时呈现（也就是文件开始下载），以便我可以隐藏我正在显示的消息？我在任何地方都使用 ajax，我在调用的“之前”部分中抛出 showMessage 方法，在 jquery ajax 调用的“完整”部分中抛出 hideMessage。但是由于我无法请求使用 ajax 调用下载文件，所以我必须通过表单来完成，但是我不知道如何在收到回复时实现（或文件开始下载）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T09:36:36.013

基本思想是随文件一起发送 cookie。一些 javascript 代码会定期检查 cookie。当 javascript 获取 cookie 时，您就知道下载开始了。

[您可以在此处](https://stackoverflow.com/questions/11120121/file-download-start-event-in-struts)（Java 中的服务器代码）和[此处](http://geekswithblogs.net/GruffCode/archive/2010/10/28/detecting-the-file-download-dialog-in-the-browser.aspx)（ASP.NET 中的服务器代码）找到示例 javascript 代码。

在 Rails 中，cookie 可以这样发送：

```
cookies['download_token'] = params[:download_token]
send_data ... 
```

# php - 我的PHP消息系统消息都给朋友了吗？

> ID：14001509
> 
> 赞同：0
> 
> 时间：2012-12-22T09:02:02.127
> 
> 标签：php, html, mysql, pdo

我正在开发一个 PHP 消息传递系统，但我遇到了一个问题，无论如何我似乎都无法解决，我已经尝试修复它几个小时。

这是我的代码：

```
function show_friends($db){
    $friends = Array();
    $email = $_SESSION['ml'];
    $check = $db->prepare("SELECT ID FROM users WHERE Email = ?");
    $check->execute(array($email));
    $line = $check->fetch(PDO::FETCH_ASSOC);
    $ID = $line['ID'];
    $query = $db->prepare("SELECT * FROM friends WHERE UserID = ?");
    $query->execute(array($ID));
    echo "<b>Friends:</b> <br/>";
    foreach($query as $row){
        $FriendID = $row['FriendID'];
        $sentfrom = $row['SentFrom'];
        if($row['Status'] === "Friends"){
            $friend = $row['FriendName'];
            $html = '
                <html>
                    <form action method = "post" >
                        <input type = "submit" value = '.$friend.' name = '.$FriendID.' />
                        <br/>
                    </form>
                </html>
            ';
            echo $html;
            $friends[] = $FriendID;
        }
    }
    $counter = 0;
    $iterations = count($friends);
    while($counter <= $iterations){
        $person = $friends[$counter];
        if(isset($_POST[$person])){
            return $person;
        }
        $counter += 1;
    }
}

function message($message, $to, $from, $db){
    $query2 = $db->prepare("INSERT INTO messages (Message, ToID, FromID, Time) VALUES(?, ?, ?, ?)");
    $query2->execute(array($message, $to, $from, date("Y-m-d h:i:s")));
} 
```

然后使用它的页面是：

```
$person = show_friends($db);
if(isset($person)){
    $html = '
        <html>
            <form action method = "post" >
                Message '.$person.' <input type = "text" name = "message" />
                <input type = "submit" value = "Message!" name = "sendto'.$person.'" />
            </form>
        </html>
    ';
    echo $html;
}
if(isset($_POST['sendto'.$person])){
    $message = $_POST['message'];
    if($message != "" or $message != null){
        message($message, $person, $ID, $db);
    }
} 
```

每次我向朋友发送消息时，消息都会发送给我所有的朋友，如果我尝试返回某些内容，它只会将其发送给朋友数组中的第一个朋友，知道吗？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T09:08:06.313

在语句中使用您朋友的名字的`WHERE`子句`INSERT INTO`

```
Eg: WHERE `name`='friendname' 
```

利用

```
 INSERT INTO messages (Message, ToID, FromID, Time) VALUES(?, ?, ?, ?) WHERE `to`='$to' 
```

# python - Python从文件中提取数据并写入另一个

> ID：14001510
> 
> 赞同：-3
> 
> 时间：2012-12-22T09:02:05.230
> 
> 标签：python, file-io

我是 python 新手，需要帮助。我有一个文件，想将文本提取到另一个文件。

输入文件如下所示：

```
<Datei Kennung="4bc78" Titel="Morgen 1" Bereich="I847YP"> Morgen 1

Here is text, contains numbers and text.
Here is text, contains numbers and text.
Here is text, contains numbers and text.
Here is text, contains numbers and text.
Here is text, contains numbers and text.

</Datei>
<Datei Kennung="469" Titel="Trop Hall W " Bereich="izr"> Trop Hall W

Here is text, contains numbers and text.
Here is text, contains numbers and text.    

</Datei> 
```

对于我文件中的第一个区域，我需要输出包含以下内容的文件 Morgen 1.txt：

```
Morgen 1

Here is text, contains numbers and text.
Here is text, contains numbers and text.
Here is text, contains numbers and text.
Here is text, contains numbers and text.
Here is text, contains numbers and text. 
```

我从其他用户那里得到了这个代码：

```
import re
REG_PARSE=re.compile(r'<Datei[^>]*Titel="\s*([^"]*?)\s*"[^>]*>\s*\1\s*(.*?</Datei>',re.dotall)
with open(filename) as infile:
for outfilename, text = REG_PARSE.finditer(infile.read()):
    with open('%s.txt'%outfilename,'w') as outf:
        outf.write(text) 
```

但它不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T09:55:48.510

看看这是否适合你：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-
from xml.dom import minidom
xmldoc  = minidom.parse('/path/to/file')
items   = xmldoc.getElementsByTagName('Datei') 

for s in items:
    if s.attributes['Titel'].value == "Morgen 1":
        with open("Morgen 1.txt", "w") as fileOutput:
            listLines = [   line.strip()
                            for line in s.firstChild.nodeValue.strip().split("\n")
                            if line.strip()
                            ]

            fileOutput.write("\n".join(listLines))
            break 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-22T09:23:30.847

如果您想要一种快速而肮脏的方式来做到这一点，而不使用 xml（推荐），这将完成这项工作：

```
with open('path/to/input') as infile:
    found = False
    outfile = open("Morgen 1.txt", 'w')
    for line in infile:
        if line.startswith("<Datei") and 'Titel="Morgen 1"' in line:
            found = True
        elif line.startswith("</Datei"):
            found = False
        if found:
            if not line.startswith("<Datei"):
                outfile.write(line) 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-22T09:16:40.153

试试这个……它有效……

```
fp = open("data.txt", "r")
data = fp.read();

data = data.split(">");

i = 0;

while True:
    filename = data[i].split('" ')[1].split('"')[1]
    text = data[i+1].split('<')[0].strip()

    fp1 = open(filename + ".txt", "w")
    fp1.write(text)
    fp1.close()

    i += 2
    if i >= (len(data) - 1):
        break; 
```

# php - PHP表单验证返回奇怪的值

> ID：14001511
> 
> 赞同：1
> 
> 时间：2012-12-22T09:02:16.147
> 
> 标签：php

我最近为自己制作了一个非常简单的 MVC'ish 框架。现在我试图用一些类来扩展这个框架，这样我将来可以节省一些时间。我现在要创建的类是表单验证类。我认为它工作得很好，直到我创建了一个函数来检查字符串的最小长度。

班上 ：

```
<?php
/**
 * Form Validation Class
 */
class formValidation
{
    private $errorMessages = array();
    private $method;
    public $errorString;
    public $validationRules = array();

    public function setMethod($method)
    {
        $this->method = $method;
    }
    public function setRules($rules)
    {
        $this->validationRules = $rules;
    }
    public function run()
    {
        if (!empty($this->method)) {
            foreach ($this->method as $fieldname => $fieldvalue) {
                foreach ($this->validationRules as $rule) {
                    if ($rule['field'] == $fieldname) {
                        foreach ($rule as $option => $rulevalue) {
                            switch ($option) {
                                case 'required':
                                    if (!$this->checkRequired($fieldvalue)) {
                                        $this->errorMessages[] = $rule['name'] . " is a required field";
                                    }
                                    break;
                                case 'letters_numbers':
                                    if (!$this->checkLettersNumbers($fieldvalue)) {
                                        $this->errorMessages[] = $rule['name'] . " may only contain letters and numbers";
                                    }
                                case 'min_length':
                                    if (!$this->checkMinLength($fieldvalue, $rulevalue)) {
                                        $this->errorMessages[] = $rule['name'] . " must contain at least $rulevalue characters";
                                    }
                            }
                        }
                    }
                }
            }
            if (!empty($this->errorMessages[0])) {
                return false;
            } else {
                return true;
            }
        } else {
            return false;
        }
    }
    // Checks
    private function checkRequired($value) // Makes a field mandatory
    {
        if ($value == "") {
            return false;
        } else {
            return true;
        }
    }
    private function checkLettersNumbers($value) // Allow Letters and Numbers only
    {
        return preg_match('/^[A-Za-z\s ]+$/', $value);
    }
    private function checkMinLength($value, $minlength) // Check input for minimum length
    {
        if (strlen($value) < $minlength) {
            return false;
        } else {
            return true;
        }
    }
    // Error Handling Functions
    private function makeErrorString($prelimiter = '<li>', $delimiter = '</li>') // Build all the errors into a string
    {
        if (!empty($this->errorMessages[0])) {
            $errors = "";
            foreach ($this->errorMessages as $message) {
                $errors .= $prelimiter;
                $errors .= $message;
                $errors .= $delimiter;
            }
            $this->errorString = $errors;
            return true;
        }
    }
    public function ValidationErrors() // Return the error string
    {
        if ($this->makeErrorString()) {
            return $this->errorString;
        }
    }
    /**
     * End of Class
     **/
}
/**
 * End of formValidation.php
 **/
?> 
```

我的控制器文件：

```
<?php
/**
 * Homepage Controller
 * @copyright 2012
 */
class home extends SimpleController
{
    public function index()
    {
        $view = new view('home');
        $val  = new formValidation();
        $val->setMethod($_POST);
        $rules = array(
                        array(
                            'field' => 'test',
                            'name' => 'Test',
                            'required' => true,
                            'letters_numbers' => true,
                            'min_length' => '5'
                        ),
                        array(
                            'field' => 'bla',
                            'name' => 'Trololol',
                            'required' => true
                        )
                     );

        $val->setRules($rules);
        if (!$val->run()) {
            echo $val->ValidationErrors();
        }
    }
}
?> 
```

在我看来，我有一个包含 2 个字段的表单，test 和 bla。当我在表单为空时提交表单时，checkMinLength() 函数返回 2 个值：

测试必须包含至少 1 个字符 测试必须包含至少 5 个字符

首先，它从哪里得到 1，第二为什么它显示相同功能的 2 条消息？我只是不知道为什么。

希望你们能帮帮我！（控制器中的回声仅用于演示）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T09:07:19.400

你忘记了一个`break`，`switch`所以你从`letters_numbers`箱子里掉进`min_length`箱子里了。

您的规则的“规则值”`letters_numbers`是`true`，它转换为字符串为`1`。

# android - android代码通过通话选择语音

> ID：14001512
> 
> 赞同：0
> 
> 时间：2012-12-22T09:02:18.273
> 
> 标签：android, voice-recognition, speech-to-text

是否有任何android代码可以在通话中从另一端挑选声音？意思是当我在我的电话中与另一个人交谈时，我可以播放一个选择语音的扬声器，我可以将此语音定向到我的应用程序以进行录制、识别或转换为文本吗？因为我的目标是将通话中的语音转换为文本。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T09:57:00.300

使用广播接收器处理呼叫

```
public void onReceive(Context context, Intent intent) {

    String state = intent.getStringExtra(TelephonyManager.EXTRA_STATE);

    if(state.equals(TelephonyManager.EXTRA_STATE_RINGING)){

    }else if(state.equals(TelephonyManager.EXTRA_STATE_OFFHOOK){
        //apply recording here

    }else if (state.equals(TelephonyManager.EXTRA_STATE_IDLE)){
        //stop recording

    }

} 
```

要将语音转换为文本，请点击此[链接](https://stackoverflow.com/questions/2319735/voice-recognition-on-android-with-recorded-sound-clip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T09:16:19.140

您可以从[AudioSource.VOICE_DOWNLINK 录制](http://developer.android.com/reference/android/media/MediaRecorder.AudioSource.html)。请记住，虽然这可能不适用于那里的每一部 Android 手机，并且语音通话音频被高度压缩，因此可能无法从 Speech-To-Text 引擎给您带来任何好的结果。

# django - 了解 Django 分页：它是否在内部限制获取的条目？

> ID：14001514
> 
> 赞同：0
> 
> 时间：2012-12-22T09:02:36.823
> 
> 标签：django, comments

我正在对 django 评论进行分页。

```
def listing(request):
    contact_list = Contacts.objects.all()
    paginator = Paginator(contact_list, 25) # Show 25 contacts per page

    page = request.GET.get('page')
    try:
        contacts = paginator.page(page) 
```

分页器会导致获取 25 个条目还是获取所有条目并仅返回所需的条目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T09:17:29.167

> **什么时候评估查询集？**
> 
> 在内部，可以构造、过滤、切片和传递 QuerySet，而无需实际访问数据库。在您执行某些操作来评估查询集之前，实际上不会发生任何数据库活动。

来源：[https ://docs.djangoproject.com/en/dev/ref/models/querysets/#when-querysets-are-evaluated](https://docs.djangoproject.com/en/dev/ref/models/querysets/#when-querysets-are-evaluated)

# c# - C#获取结构体的大小

> ID：14001522
> 
> 赞同：2
> 
> 时间：2012-12-22T09:03:58.847
> 
> 标签：c#

好吧，这是关于PE的。我想知道 IMAGE_DOS_HEADER 结构和 NT Header 结构的确切大小。我使用 Marshal.SizeOf 但它不起作用。

Image_Dos_Header 结构

```
 public struct IMAGE_DOS_HEADER
    {      // DOS .EXE header
        [MarshalAs(UnmanagedType.ByValArray, SizeConst = 2)]
        public UInt16 e_magic;              // Magic number
        public UInt16 e_cblp;               // Bytes on last page of file
        public UInt16 e_cp;                 // Pages in file
        public UInt16 e_crlc;               // Relocations
        public UInt16 e_cparhdr;            // Size of header in paragraphs
        public UInt16 e_minalloc;           // Minimum extra paragraphs needed
        public UInt16 e_maxalloc;           // Maximum extra paragraphs needed
        public UInt16 e_ss;                 // Initial (relative) SS value
        public UInt16 e_sp;                 // Initial SP value
        public UInt16 e_csum;               // Checksum
        public UInt16 e_ip;                 // Initial IP value
        public UInt16 e_cs;                 // Initial (relative) CS value
        public UInt16 e_lfarlc;             // File address of relocation table
        public UInt16 e_ovno;               // Overlay number
        public UInt16 e_res_0;              // Reserved words
        public UInt16 e_res_1;              // Reserved words
        public UInt16 e_res_2;              // Reserved words
        public UInt16 e_res_3;              // Reserved words
        public UInt16 e_oemid;              // OEM identifier (for e_oeminfo)
        public UInt16 e_oeminfo;            // OEM information; e_oemid specific
        public UInt16 e_res2_0;             // Reserved words
        public UInt16 e_res2_1;             // Reserved words
        public UInt16 e_res2_2;             // Reserved words
        public UInt16 e_res2_3;             // Reserved words
        public UInt16 e_res2_4;             // Reserved words
        public UInt16 e_res2_5;             // Reserved words
        public UInt16 e_res2_6;             // Reserved words
        public UInt16 e_res2_7;             // Reserved words
        public UInt16 e_res2_8;             // Reserved words
        public UInt16 e_res2_9;             // Reserved words
        public UInt32 e_lfanew;             // File address of new exe header
    } 
```

这是 NTHeader 结构

```
 [StructLayout(LayoutKind.Sequential)]
    public struct IMAGE_NT_HEADERS
    {
        public IMAGE_FILE_HEADER FileHeader;
        public IMAGE_OPTIONAL_HEADER32 OptionalHeader32;
        public IMAGE_NT_HEADERS32 INTSIGN;
     }

    [StructLayout(LayoutKind.Explicit)]
    public struct IMAGE_NT_HEADERS32
    {
        [FieldOffset(0)]
        [MarshalAs(UnmanagedType.ByValArray, SizeConst = 4)]
        public char[] Signature;

        [FieldOffset(4)]
        public IMAGE_FILE_HEADER FileHeader;

        [FieldOffset(24)]
        public IMAGE_OPTIONAL_HEADER32 OptionalHeader;
    }
[StructLayout(LayoutKind.Sequential, Pack = 1)]
    public struct IMAGE_OPTIONAL_HEADER32
    {
        public UInt16 Magic;
        public Byte MajorLinkerVersion;
        public Byte MinorLinkerVersion;
        public UInt32 SizeOfCode;
        public UInt32 SizeOfInitializedData;
        public UInt32 SizeOfUninitializedData;
        public UInt32 AddressOfEntryPoint;
        public UInt32 BaseOfCode;
        public UInt32 BaseOfData;
        public UInt32 ImageBase;
        public UInt32 SectionAlignment;
        public UInt32 FileAlignment;
        public UInt16 MajorOperatingSystemVersion;
        public UInt16 MinorOperatingSystemVersion;
        public UInt16 MajorImageVersion;
        public UInt16 MinorImageVersion;
        public UInt16 MajorSubsystemVersion;
        public UInt16 MinorSubsystemVersion;
        public UInt32 Win32VersionValue;
        public UInt32 SizeOfImage;
        public UInt32 SizeOfHeaders;
        public UInt32 CheckSum;
        public UInt16 Subsystem;
        public UInt16 DllCharacteristics;
        public UInt32 SizeOfStackReserve;
        public UInt32 SizeOfStackCommit;
        public UInt32 SizeOfHeapReserve;
        public UInt32 SizeOfHeapCommit;
        public UInt32 LoaderFlags;
        public UInt32 NumberOfRvaAndSizes;

        public IMAGE_DATA_DIRECTORY ExportTable;
        public IMAGE_DATA_DIRECTORY ImportTable;
        public IMAGE_DATA_DIRECTORY ResourceTable;
        public IMAGE_DATA_DIRECTORY ExceptionTable;
        public IMAGE_DATA_DIRECTORY CertificateTable;
        public IMAGE_DATA_DIRECTORY BaseRelocationTable;
        public IMAGE_DATA_DIRECTORY Debug;
        public IMAGE_DATA_DIRECTORY Architecture;
        public IMAGE_DATA_DIRECTORY GlobalPtr;
        public IMAGE_DATA_DIRECTORY TLSTable;
        public IMAGE_DATA_DIRECTORY LoadConfigTable;
        public IMAGE_DATA_DIRECTORY BoundImport;
        public IMAGE_DATA_DIRECTORY IAT;
        public IMAGE_DATA_DIRECTORY DelayImportDescriptor;
        public IMAGE_DATA_DIRECTORY CLRRuntimeHeader;
        public IMAGE_DATA_DIRECTORY Reserved;
    }
        [StructLayout(LayoutKind.Sequential, Pack = 1)]
        public struct IMAGE_FILE_HEADER
    {
        public UInt16 Machine;
        public UInt16 NumberOfSections;
        public UInt32 TimeDateStamp;
        public UInt32 PointerToSymbolTable;
        public UInt32 NumberOfSymbols;
        public UInt16 SizeOfOptionalHeader;
        public UInt16 Characteristics;
    } 
```

感谢您的帮助！我从几个小时前就开始尝试寻找，但仍然找不到解决方案。对不起英语不好，很抱歉问这个。我还是 C# 的新手

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-22T09:15:09.990

这对我来说很好。

注意该方法的`unsafe`修饰符`Main`，您需要添加它才能正常`sizeof`工作。您还需要在项目中启用不安全代码才能编译。

```
unsafe public static void Main(string[] args)
{
    Console.WriteLine(sizeof(IMAGE_DOS_HEADER)); //64
    Console.Read();
}

public struct IMAGE_DOS_HEADER
{      // DOS .EXE header
    [MarshalAs(UnmanagedType.ByValArray, SizeConst = 2)]
    public UInt16 e_magic;              // Magic number
    public UInt16 e_cblp;               // Bytes on last page of file
    public UInt16 e_cp;                 // Pages in file
    public UInt16 e_crlc;               // Relocations
    public UInt16 e_cparhdr;            // Size of header in paragraphs
    public UInt16 e_minalloc;           // Minimum extra paragraphs needed
    public UInt16 e_maxalloc;           // Maximum extra paragraphs needed
    public UInt16 e_ss;                 // Initial (relative) SS value
    public UInt16 e_sp;                 // Initial SP value
    public UInt16 e_csum;               // Checksum
    public UInt16 e_ip;                 // Initial IP value
    public UInt16 e_cs;                 // Initial (relative) CS value
    public UInt16 e_lfarlc;             // File address of relocation table
    public UInt16 e_ovno;               // Overlay number
    public UInt16 e_res_0;              // Reserved words
    public UInt16 e_res_1;              // Reserved words
    public UInt16 e_res_2;              // Reserved words
    public UInt16 e_res_3;              // Reserved words
    public UInt16 e_oemid;              // OEM identifier (for e_oeminfo)
    public UInt16 e_oeminfo;            // OEM information; e_oemid specific
    public UInt16 e_res2_0;             // Reserved words
    public UInt16 e_res2_1;             // Reserved words
    public UInt16 e_res2_2;             // Reserved words
    public UInt16 e_res2_3;             // Reserved words
    public UInt16 e_res2_4;             // Reserved words
    public UInt16 e_res2_5;             // Reserved words
    public UInt16 e_res2_6;             // Reserved words
    public UInt16 e_res2_7;             // Reserved words
    public UInt16 e_res2_8;             // Reserved words
    public UInt16 e_res2_9;             // Reserved words
    public UInt32 e_lfanew;             // File address of new exe header
} 
```

# java - Java中的无序对

> ID：14001525
> 
> 赞同：5
> 
> 时间：2012-12-22T09:04:45.167
> 
> 标签：java, data-structures

我需要一个 Java*泛型*类来表示任何类型的无序对。同时我看到两个解决方案：

*   `HashSet`存储对元素
*   一个`Pair`具有覆盖`hashCode`和`equals`（使`Pair(a, b)`和`Pair(b, a)`相等）的类。

是否有意义？你有什么建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T10:08:18.563

In your place I would roll out my own class. As long as you are interested in sets of only two objects, using `HashMap`, `HashSet` (which, incidentally, uses a `HashMap` internally anyway) or any other class designed for sets of arbitrary [cardinality](http://en.wikipedia.org/wiki/Cardinality) is a waste of resources and adds unneeded complexity.

Just create your own class with proper `equals()` and `hashCode()` implementations. Having a `contains()` operation, or even implementing parts of the `Set` interface, might also make sense.

One important note: make sure you *document* your class extensively - at least specify whether `equals()` performs an identity or an equality comparison for the contained objects, and what is the meaning of a `null` contained reference...

# java - Android -- 使用 hashmap 从 uri 解析图像给了我错误

> ID：14001529
> 
> 赞同：0
> 
> 时间：2012-12-22T09:05:27.330
> 
> 标签：java, android, json, image, parsing

我需要在我的 xml 中解析 json 输出。解析完成，但在 xml 中看不到图像。Android日志这样说 -

```
12-22 14:26:34.472: I/System.out(6037): resolveUri failed on bad bitmap uri: "base_url"/sites/default/files/pictures/picture-6175010166.jpg 
```

我的以下代码有什么问题吗？任何人都可以建议我吗？

```
HashMap<String, String> listview = new HashMap<String, String>();
String title = "";
String teaser="";
String createdon = "";
String profile_image = "";      
try {
  title = jListview.getString("title");
  teaser = jListview.getString("teaser");
  createdon = jListview.getString("created");
  profile_image = jListview.getString("profile_image");
  listview.put("title", title);
  listview.put("teaser", teaser);
  listview.put("created", createdon);
  listview.put("profile_image", profile_image);
  //listview.put("profile_image", picture);
} catch (JSONException e) { 
  System.out.println( "Bad Error" + e.toString());
  e.printStackTrace();
} 
return listview; 
```

这是我显示结果的主要活动代码

```
 try{
        /** Getting the parsed data as a List construct */
            lists = listJsonParser.parse(obj);
            int imageCount = lists.size();
            }

        }catch(Exception e){
            Log.d("Exception Main",e.toString());
        }          

        /** Keys used in Hashmap */
        String[] from = { "title","teaser","created","profile_image"};

        /** Ids of views in listview_layout */
        int[] to = { R.id.title,R.id.teaser,R.id.createdon,R.id.list_image};

        /** Instantiating an adapter to store each items
        *  R.layout.listview_layout defines the layout of each item
        */
        SimpleAdapter adapter = new SimpleAdapter(getBaseContext(), countries, R.layout.home_layout, from, to);  

        return adapter;

            LoGcat:12-22 14:26:34.382: I/System.out(6037): resolveUri failed on bad bitmap uri: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T09:16:36.473

您不能将 Direct web url 设置为`ImageView`用于设置 ImageView src。您首先通过扩展 ListView 创建一个自定义适配器`BaseAdapter`，在 getView 中，您需要首先从 Url 下载图像作为位图，然后将其设置为 ImageView 为：

```
public class CustomAdapter extends BaseAdapter{

        @Override
        public View getView(int position, View convertView,
                                 ViewGroup parent) {

        if(convertView == null){
        LayoutInflater layoutInflater = (LayoutInflater) 
                                getSystemService(LAYOUT_INFLATER_SERVICE);
        convertView = layoutInflater.
                                     inflate(R.layout.layout_row, null);
         }

        Bitmap test = getbitpam(maptemp.get("profile_image"));
        imgview=(ImageView) convertView.findViewById(R.id.img_list);
        imgview.setImageBitmap(test);
        return convertView;
    }
}
//get image from server 
public  Bitmap getbitpam(String url) {
    Bitmap bitmap = null;
    InputStream in = null;
    BufferedOutputStream out = null;

    try {
        in = new BufferedInputStream(new URL(url).openStream(), IO_BUFFER_SIZE);

        final ByteArrayOutputStream dataStream = new ByteArrayOutputStream();
        out = new BufferedOutputStream(dataStream, IO_BUFFER_SIZE);
        copy(in, out);
        out.flush();

        final byte[] data = dataStream.toByteArray();
        BitmapFactory.Options options = new BitmapFactory.Options();
        //options.inSampleSize = 1;

        bitmap = BitmapFactory.decodeByteArray(data, 0, data.length,options);
    } catch (IOException e) {
        Log.e(TAG, "Could not load Bitmap from: " + url);
    } finally {
        closeStream(in);
        closeStream(out);
    }

    return bitmap;
}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T09:17:30.343

您的错误如下：

```
12-22 14:26:34.472: I/System.out(6037): resolveUri failed on bad bitmap uri: "base_url"/sites/default/files/pictures/picture-6175010166.jpg 
```

您需要下载图像，然后将其设置为位图。[这](http://android-developers.blogspot.com/2010/07/multithreading-for-performance.html)是众多示例之一。

# android - iphone上已经存在的安卓应用

> ID：14001532
> 
> 赞同：-1
> 
> 时间：2012-12-22T09:05:51.570
> 
> 标签：android, iphone

我可以开发一个已经存在于 iphone 市场上的 android 应用程序（当然不是我）。这基本上是在窃取想法，但这合法吗？

我需要检查什么以及在哪里检查。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T09:37:43.873

快速免责声明 - 我不是律师。在你真正做这些事情之前去问一个，以确保。

这取决于您对“同一应用程序”含义的定义。

1.  同样的想法 - 这可能是合法的，除非该想法已获得专利。如果您的客户群不同意复制，您可能会付出一些代价。
2.  相同的名称和/或品牌和/或艺术资产 - 这是多种非法行为。复制原始应用程序创建者拥有的艺术资产是侵犯版权的行为。复制原始应用程序的名称或徽标是商标侵权 - 您将冒充其他应用程序的作者。

长话短说，只要您不复制任何代码或艺术资产并且不要试图欺骗用户认为您是制作原始应用程序的同一个人，为 Android 重新制作 iPhone 应用程序可能是可以的。为了安全起见，您应该尝试使您的应用在外观上与原始应用不同，以避免对视觉设计提出版权主张。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T10:08:00.150

> This is basically stealing the idea, but is this legal?

**Yes**, But I will still recommand you to Do little R&D stuff for Checking about `Non-Disclosure Agreement (or NDA)` which will prevent you from stealing the idea. or they have `Hire an attorney`.

About `Non-Disclosure Agreement (or NDA)`

According to Me, There is nothing wrong in it. But if the **Developer of that app has spending time signing, scanning, and sending an NDA to App Store**

then As `NDA(Non-Disclosure Agreement)` is signed Developer has prevent it from stealing the idea by any other **`you can not able to copy it`**.

About `Hire an attorney`

if Developer don’t like the NDA suggested by the developer or they are not comfortable about the process? **they can Hire an attorney to get advise about your rights and how to protect them.** then also **`you can not able to copy it`**.

**Finally, Yes you can Go ahead but you have to go through with above suggestions first and Make Sure it is not the case. and If it has, then either think of something else or find a unique selling point in your app that will make it stand out from the crowd.**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T09:08:45.680

这取决于很多因素。这涉及版权和知识产权法。请咨询精通这些问题的优秀律师。

# wordpress - Wordpress 作者个人资料页面 URL

> ID：14001538
> 
> 赞同：0
> 
> 时间：2012-12-22T09:06:28.453
> 
> 标签：wordpress

我的wordpress博客有问题（[http://muraliprashanth.me](http://muraliprashanth.me)）一切似乎都工作正常，但问题是在每篇文章之后我都在附加作者信息，如下图所示

![穆拉利·普拉尚斯](../Images/95307352d8101fe11ad07064f13cb06e.png)

但是当我点击

> 查看 Murali Prashanth 的所有帖子超链接

它正在将我重定向到这个 URL [http://muraliprashanth.me/author/Murali%20Prashanth/](http://muraliprashanth.me/author/Murali%20Prashanth/) 我不知道在哪里创建作者个人资料页面或者我的 wordpress 主题是否支持作者个人资料页面 请建议我我正在努力从过去 3 个月解决此问题，非常感谢帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T09:36:27.943

这两个链接包含有关作者个人资料链接的详细信息以及模板信息。看看你是否能够修复它。

[http://codex.wordpress.org/Author_Templates](http://codex.wordpress.org/Author_Templates) [http://codex.wordpress.org/Function_Reference/the_author_url](http://codex.wordpress.org/Function_Reference/the_author_url)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T11:15:10.793

试试看。我已经给出了我的 author.php 文件以供使用。

```
<?php
/**
 * The template for displaying Author Archive pages.
 *
 * @package WordPress
 */

get_header(); ?>

<?php
    if ( have_posts() )
        the_post();
?>

                <h1><?php printf( __( 'Author Archives: %s' ), "<span class='vcard'><a class='url fn n' href='" . get_author_posts_url( get_the_author_meta( 'ID' ) ) . "' title='" . esc_attr( get_the_author() ) . "' rel='me'>" . get_the_author() . "</a></span>" ); ?></h1>

<?php
// If a user has filled out their description, show a bio on their entries.
if ( get_the_author_meta( 'description' ) ) : ?>
                <?php echo get_avatar( get_the_author_meta( 'user_email' ), apply_filters( 'avatar_size', 60 ) ); ?>
                <h2><?php printf( __( 'About %s', 'theme' ), get_the_author() ); ?></h2>
                <?php the_author_meta( 'description' ); ?>
<?php endif; ?>

<?php
    rewind_posts();

    get_template_part( 'loop', 'author' );
?>

<?php get_sidebar(); ?>
<?php get_footer(); ?> 
```

# r - 使用 xpathSApply 进行网页抓取

> ID：14001539
> 
> 赞同：1
> 
> 时间：2012-12-22T09:06:31.833
> 
> 标签：r, xml-parsing, web-scraping

我正在使用包 XML 和 html 进行一些网络抓取，我需要隔离国家名称以及您在下面看到的两个数值：

```
<tr><td>Tonga</td>

    <td class="RightAlign">3,000</td>

    <td class="RightAlign">6,000</td>

    </tr> 
```

这是我到目前为止编写的代码 - 我认为我只需要正确的正则表达式？

```
# a vector to store the results
pages<-character(0)
country_names<-character(0)

# go through all 6 pages containing the info we want, and store
# the html in a list
for (page in 1:6) {
  who_search <- paste(who_url, page, '.html', sep='')
  page = htmlTreeParse(who_search, useInternalNodes = T)
  pages=c(page, pages)

  # extract the country names of each tweet
  country <- xpathSApply(page, "????", xmlValue)

  country_names<-c(country, country_names)
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T11:08:48.633

这里不用用`xmlSpathApply`，`readHTMLTable`改用

```
library(XML)
library(RCurl)
page = htmlParse('http://www.who.int/diabetes/facts/world_figures/en/index4.html')
readHTMLTable(page)

                                              Country       2000       2030
1                                               Albania     86,000    188,000
2                                                Andora      6,000     18,000
3                                               Armenia    120,000    206,000
4                                               Austria    239,000    366,000
5                                            Azerbaijan    337,000    733,000
6                                               Belarus    735,000    922,000 
```

using `xpathSApply`（注意使用 gsub 来清理结果）

```
country <- xpathSApply(page, '//*[@id="primary"]/table/tbody/tr', 
                         function(x) gsub('\n','' ,xmlValue(x))
+ )
> country
 [1] "Albania        86,000        188,000        "                                                  
 [2] "Andora        6,000        18,000        "                                                     
 [3] "Armenia        120,000        206,000        "                                                 
 [4] "Austria        239,000        366,000        "                                                 
 [5] "Azerbaijan        337,000        733,000        " 
```

编辑正如评论中提到的，我们可以在没有 gsub 的情况下使用 xpathSApply

```
 val = xpathSApply(page, '//tbody/tr/td', xmlValue) ##gets a vector of table   
    as.data.frame(matrix(val, ncol=3, byrow=TRUE)) ##transform to matrix 
```

# performance - “按名称呼叫”会减慢 Haskell 的速度吗？

> ID：14001541
> 
> 赞同：2
> 
> 时间：2012-12-22T09:06:39.133
> 
> 标签：performance, haskell, implementation, callbyname

我认为它没有。

我的原因是 Haskell 是纯函数式编程（没有 I/O Monad），如果“名称”相同，他们可以让每个“按名称调用”使用相同的评估值。

我对实现细节一无所知，但我真的很感兴趣。
详细的解释将不胜感激:)

顺便说一句，我试过谷歌，很难得到任何有用的东西。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-22T19:03:07.663

首先，Haskell 是一个规范，而不是一个实现；该报告实际上并不要求使用点名评估或惰性评估。Haskell 实现只需要是非严格的，这确实排除了按值调用和类似策略。

所以，严格来说（哈，哈），评估策略不能减慢 Haskell 的速度。我不确定什么*会*减慢 Haskell 的速度，尽管很明显有些东西已经发生了，否则在 Haskell 98 之后发布下一个版本的报告不会花费 12 年。我的猜测是它以某种方式涉及委员会。

* * *

无论如何，“惰性评估”是指“按需调用”策略，这是 Haskell 最常见的实现选择。这与按名称调用的不同之处在于，如果一个子表达式在多个地方使用，它最多会被计算一次。

有资格作为共享子表达式的细节有点微妙，可能有点依赖于实现，但使用 GHC Haskell 中的示例：考虑函数`cycle`，它无限重复输入列表。一个天真的实现可能是：

```
cycle xs = xs ++ cycle xs 
```

这最终导致效率低下，因为没有`cycle xs`可以共享的单个表达式，因此结果列表必须在遍历时不断构建，每次分配更多内存并进行更多计算。

相比之下，[实际的实现](http://hackage.haskell.org/packages/archive/base/4.6.0.0/doc/html/src/GHC-List.html#cycle)是这样的：

```
cycle xs = xs' where xs' = xs ++ xs' 
```

在这里，名称`xs'`被递归地定义为自身附加到输入列表的末尾。这个时间`xs'`是共享的，并且只评估一次；生成的无限列表实际上是内存中的有限循环链表，一旦评估了整个循环，就不需要进一步的工作了。

* * *

一般来说，GHC 不会为你*记住函数*：给定`f`和`x`，每次使用`f x`都会被重新评估，除非你给结果一个名字并使用它。在任何一种情况下，结果值都是相同的，但性能可能会有很大差异。这主要是为了避免悲观——GHC 很容易为你记住事情，但在许多情况下，这将花费大量内存来获得微小或根本不存在的速度。

另一方面是保留了共享值。如果您有一个计算成本非常高的数据结构，则命名构造它的结果并将其传递给使用它的函数可确保不会重复任何工作——即使它被不同的线程同时使用。

你也可以用这种方式自己悲观——如果一个数据结构计算成本低并且使用大量内存，你可能应该*避免*共享对完整结构的引用，因为这将使整个事物在内存中保持活力，只要有任何可能以后可能会用到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T12:12:26.670

是的，在某种程度上确实如此。问题是 Haskell 通常不能过早地计算值（例如，如果它会导致异常），所以它有时需要保留一个 thunk（用于计算值的代码）而不是值本身，这使用更多内存并减慢速度。编译器尝试检测可以避免这种情况的情况，但不可能检测到*所有*情况。

# vim - 如何在 VIM 中走高/走低并保持在同一列？

> ID：14001547
> 
> 赞同：3
> 
> 时间：2012-12-22T09:07:53.163
> 
> 标签：vim

如何降低（或升高）一行并保持在同一列？

例如，在 C++ 中定义多行宏时，我需要它来添加许多对齐的反斜杠，如下所示：

```
#define MACRO(X)        \
     line1              \
                        \
     long long line3    \
     line4 
```

如果我`j`在添加后在 line1 上执行`\`，光标将跳转到第 2 行的第 1 列。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T09:18:41.897

自己找到的：

```
set virtualedit=all 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-07T08:22:09.420

`virtualedit`每次切换值可能不是最佳的。在 vimrc 中设置它`all`可能很疯狂；）我更喜欢`set virtualedit=block`在我的 vimrc 中使用，这无论如何都非常有用。设置好后，可以通过以下方式进行编辑：

1.  `f\`在上一行将光标放在`\`
2.  `Ctrl-v`进入视觉块模式
3.  `j`（或几个 j 的）
4.  `r\`替换选择`\`（你也可以`c`用来放置更多字符）

# css - CSS3 Animation Sink Backwards 然后向左移动

> ID：14001549
> 
> 赞同：0
> 
> 时间：2012-12-22T09:07:57.987
> 
> 标签：css, transform, css-animations

我目前正在尝试创建一个动画，使 div 看起来像是向后下沉，然后（在完成后退后）被推到左边。

我现在正在使用 CSS3，但我对动画属性不是很熟悉并且遇到了一些问题。目前我正在使用：

```
@-webkit-keyframes sinkBack
{
    50% {
        -webkit-transform: scale(.9);
        margin-left: 0;
    }
    100% {
        margin-left: -100px;
    }
} 
```

这样做的结果是它缩小了，然后在 50% 之后，在被推向左的同时开始放大。我希望它在被向左推时保持在比例（.9）。

我也愿意用 jQuery 来做这件事，但 animate 不支持转换，我不想使用启用这些动画的插件之一。所以 CSS3 感觉它会是一个更好的选择。

**编辑**

感谢 gion 的帮助。下面的最终代码（切换出margin-left）：

```
@-webkit-keyframes sinkBack /* Safari and Chrome */
{
50% {
    -webkit-transform: scale(.9);
}
100% {
    -webkit-transform: translateX(-100px) scale(.9);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T09:12:49.243

保持规模：

```
@-webkit-keyframes sinkBack
{
    50% {
        -webkit-transform: scale(.9);
        margin-left: 0;
   }
    100% {
       -webkit-transform: scale(.9);
        margin-left: -100px;
    }
} 
```

# asp.net - 通过 Web 用户控件使用存储在 web.config 中的连接字符串

> ID：14001554
> 
> 赞同：2
> 
> 时间：2012-12-22T09:08:26.523
> 
> 标签：asp.net, user-controls

我创建了一个 Web 用户控件来操作我的数据库操作，并且我想使用存储在 web.config 中的连接字符串 .... 我以前在 asp.net 页面中使用的方式（如 deafult.aspx.cs）是添加

```
using System.Web.Configuration; 
```

然后使用下面的代码：

```
private string connectionString =
             WebConfigurationManager.ConnectionStrings["Pubs"].ConnectionString; 
```

问题是我无法添加`using System.Web.Configuration;`到我的 WebUserControl ... 是否可以通过 webUserControl 从 Web.Config 读取数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T10:49:11.193

You probably just have to add the assembly reference for `System.Configuration` and you can then use

```
private string connectionString = 
    ConfigurationManager.ConnectionStrings["Pubs"].ConnectionString; 
```

It will always read the connectionstring from web.config (and not from the app.config of the project as you might think). If you want to use the `WebConfigurationManager`, you will have to add a reference to the assembly `System.Web`, but that should be already there in a web control library project

# java - Maven 在运行测试用例 Eclipselink 和 hsqldb 时挂起

> ID：14001558
> 
> 赞同：8
> 
> 时间：2012-12-22T09:09:31.733
> 
> 标签：java, maven, eclipselink, hsqldb, perfectjpattern

使用`jps`并且`jstack`我可以到达有问题的等待线程，但不知道如何解决它或导致它的原因。请参阅下面的 Maven 依赖项和`jstack`结果以及带有`tid=0x000000000022c000`. 进一步分析，对于所选版本，Eclipselink 和 hsqldb 之间似乎存在问题。我在升级这两个库时遇到了这个问题，因为它曾经分别适用于 Eclipselink 和 hsqldb 的 2.0.1 和 1.8.0.10 版本。

```
<dependencies>
 <dependency>
    <groupId>org.eclipse.persistence</groupId>
    <artifactId>eclipselink</artifactId>
    <version>2.4.0</version>
  </dependency> 
 <dependency>
   <groupId>org.hsqldb</groupId>
   <artifactId>hsqldb</artifactId>
   <version>2.2.9</version>
   <scope>test</scope>
 </dependency>                
</dependencies>
<repositories>
<repository>
   <id>EclipseLink</id>
   <url>http://download.eclipse.org/rt/eclipselink/maven.repo</url>
</repository> 
```

堆栈跟踪是：

```
$ jstack 7552
2012-12-21 22:48:53
Full thread dump Java HotSpot(TM) 64-Bit Server VM (20.12-b01 mixed mode):

"Low Memory Detector" daemon prio=6 tid=0x0000000006a19000 nid=0x1e00 runnable [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"C2 CompilerThread1" daemon prio=10 tid=0x0000000006a0a800 nid=0x2184 waiting on condition [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"C2 CompilerThread0" daemon prio=10 tid=0x00000000069f5000 nid=0x754 waiting on condition [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"Attach Listener" daemon prio=10 tid=0x00000000069f3800 nid=0x219c waiting on condition [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"Signal Dispatcher" daemon prio=10 tid=0x00000000069a1800 nid=0x2198 runnable [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"Finalizer" daemon prio=8 tid=0x000000000699f000 nid=0x2384 in Object.wait() [0x00000000075ef000]
   java.lang.Thread.State: WAITING (on object monitor)
        at java.lang.Object.wait(Native Method)
        - waiting on <0x00000007aef280e0> (a java.lang.ref.ReferenceQueue$Lock)
        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:118)
        - locked <0x00000007aef280e0> (a java.lang.ref.ReferenceQueue$Lock)
        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:134)
        at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:159)

"Reference Handler" daemon prio=10 tid=0x0000000006990800 nid=0x21cc in Object.wait() [0x00000000074ef000]
   java.lang.Thread.State: WAITING (on object monitor)
        at java.lang.Object.wait(Native Method)
        - waiting on <0x00000007aef38070> (a java.lang.ref.Reference$Lock)
        at java.lang.Object.wait(Object.java:485)
        at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:116)
        - locked <0x00000007aef38070> (a java.lang.ref.Reference$Lock)

"main" prio=6 tid=0x000000000022c000 nid=0xbc0 waiting on condition [0x000000000220c000]
   java.lang.Thread.State: WAITING (parking)
        at sun.misc.Unsafe.park(Native Method)
        - parking to wait for  <0x00000007acd840a0> (a java.util.concurrent.CountDownLatch$Sync)
        at java.util.concurrent.locks.LockSupport.park(LockSupport.java:156)
        at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:811)
        at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedInterruptibly(AbstractQueuedSynchronizer.java:969)
        at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireSharedInterruptibly(AbstractQueuedSynchronizer.java:1281)
        at java.util.concurrent.CountDownLatch.await(CountDownLatch.java:207)
        at org.hsqldb.lib.CountUpDownLatch.await(Unknown Source)
        at org.hsqldb.Session.executeCompiledStatement(Unknown Source)
        at org.hsqldb.Session.execute(Unknown Source)
        - locked <0x00000007acd83f70> (a org.hsqldb.Session)
        at org.hsqldb.jdbc.JDBCPreparedStatement.fetchResult(Unknown Source)
        at org.hsqldb.jdbc.JDBCPreparedStatement.executeQuery(Unknown Source)
        - locked <0x00000007acdb2518> (a org.hsqldb.jdbc.JDBCPreparedStatement)
        at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeSelect(DatabaseAccessor.java:938)
        at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.basicExecuteCall(DatabaseAccessor.java:609)
        at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeCall(DatabaseAccessor.java:537)
        at org.eclipse.persistence.internal.sessions.AbstractSession.basicExecuteCall(AbstractSession.java:1800)
        at org.eclipse.persistence.sessions.server.ServerSession.executeCall(ServerSession.java:566)
        at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeCall(DatasourceCallQueryMechanism.java:207)
        at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeCall(DatasourceCallQueryMechanism.java:193)
        at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeSelectCall(DatasourceCallQueryMechanism.java:264)
        at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.selectAllRows(DatasourceCallQueryMechanism.java:648)
        at org.eclipse.persistence.internal.queries.ExpressionQueryMechanism.selectAllRowsFromTable(ExpressionQueryMechanism.java:2681)
        at org.eclipse.persistence.internal.queries.ExpressionQueryMechanism.selectAllRows(ExpressionQueryMechanism.java:2634)
        at org.eclipse.persistence.queries.ReadAllQuery.executeObjectLevelReadQuery(ReadAllQuery.java:420)
        at org.eclipse.persistence.queries.ObjectLevelReadQuery.executeDatabaseQuery(ObjectLevelReadQuery.java:1149)
        at org.eclipse.persistence.queries.DatabaseQuery.execute(DatabaseQuery.java:852)
        at org.eclipse.persistence.queries.ObjectLevelReadQuery.execute(ObjectLevelReadQuery.java:1108)
        at org.eclipse.persistence.queries.ReadAllQuery.execute(ReadAllQuery.java:392)
        at org.eclipse.persistence.internal.sessions.AbstractSession.internalExecuteQuery(AbstractSession.java:2946)
        at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1602)
        at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1584)
        at org.eclipse.persistence.sessions.server.ServerSession.executeQuery(ServerSession.java:621)
        at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1448)
        at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1423)
        at org.perfectjpattern.jee.integration.dao.ReadQueryAdapter.getResultList(ReadQueryAdapter.java:79)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.perfectjpattern.core.structural.AbstractSurrogate.invoke(AbstractSurrogate.java:115)
        at $Proxy2.getResultList(Unknown Source)
        at org.perfectjpattern.jee.integration.dao.JpaBaseDao.findByNamedQuery(JpaBaseDao.java:158)
        at org.perfectjpattern.support.test.AbstractTestBaseReadOnlyDao.testFindByNamedQueryPositional(AbstractTestBaseReadOnlyDao.java:100)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at junit.framework.TestCase.runTest(TestCase.java:168)
        at junit.framework.TestCase.runBare(TestCase.java:134)
        at junit.framework.TestResult$1.protect(TestResult.java:110)
        at junit.framework.TestResult.runProtected(TestResult.java:128)
        at junit.framework.TestResult.run(TestResult.java:113)
        at junit.framework.TestCase.run(TestCase.java:124)
        at junit.framework.TestSuite.runTest(TestSuite.java:232)
        at junit.framework.TestSuite.run(TestSuite.java:227)
        at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:83)
        at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:53)
        at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:123)
        at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:104)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164)
        at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110)
        at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:175)
        at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcessWhenForked(SurefireStarter.java:107)
        at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:68) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-22T10:03:13.107

**It does indeed look like a hsqldb issue.** Following directions [from here](http://sourceforge.net/mailarchive/message.php?msg_id=27069722) the solution was to append the following to the connection-url `;hsqldb.tx=mvcc` whatever that means :/

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-16T02:27:54.667

For me this meant that I was using hibernate.hbm2ddl.auto "update" as well as using raw connections to connect to the same HSQL in memory DB. Separating the two into separate in-memory HSQL db's and it started working. Current theory: maybe something is holding onto a session or transaction (esp. one that modifies a whole table) and not closing it? (unfortunately the mvcc fix mentioned didn't help in my case)

hsqldb version 2.3.4, hibernate 4.0.1.Final

my trace:

```
"main" #1 prio=5 os_prio=31 tid=0x00007fb636001000 nid=0x1303 waiting on condition [0x000000010a68c000]
   java.lang.Thread.State: WAITING (parking)
    at sun.misc.Unsafe.park(Native Method)
    - parking to wait for  <0x00000007957cbd18> (a org.hsqldb.lib.CountUpDownLatch$Sync)
    at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:836)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedInterruptibly(AbstractQueuedSynchronizer.java:997)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireSharedInterruptibly(AbstractQueuedSynchronizer.java:1304)
    at org.hsqldb.lib.CountUpDownLatch.await(Unknown Source)
    at org.hsqldb.Session.executeCompiledStatement(Unknown Source)
    at org.hsqldb.Session.execute(Unknown Source)
    - locked <0x00000007957cbbe0> (a org.hsqldb.Session)
    at org.hsqldb.jdbc.JDBCPreparedStatement.fetchResult(Unknown Source) 
```

also ran into it even more with hsqldb version 2.3.4, hibernate 4.1.12.Final

4.0.1.Final worked OK though weird.

# python - 将字符串插入字符串

> ID：14001560
> 
> 赞同：-3
> 
> 时间：2012-12-22T09:10:07.437
> 
> 标签：python, string

我有

```
a='Samsung'
b='Nokia' 
```

我想将 b 插入 a，最后结果是`'SNaomksiuang'` 如何在 Python 中更快地做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-22T09:12:47.403

```
In [183]: ''.join(itertools.chain.from_iterable(itertools.izip_longest(a,b, fillvalue='')))
Out[183]: 'SNaomksiuang'

In [184]: a='Samsung'

In [185]: b='Nokia'

In [186]: ''.join(itertools.chain.from_iterable(itertools.izip_longest(a,b, fillvalue='')))
Out[186]: 'SNaomksiuang' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-22T09:15:57.653

```
>>> from itertools import izip_longest
>>> a='Samsung'
>>> b='Nokia'
>>> ''.join([''.join(i) for i in izip_longest(a,b,fillvalue='')])
'SNaomksiuang' 
```

# arrays - Ocaml - 访问记录数组中的组件

> ID：14001569
> 
> 赞同：6
> 
> 时间：2012-12-22T09:11:31.717
> 
> 标签：arrays, ocaml, record

我有一个记录类型 tt 的数组 - 最初包含更多组件;-) - 并且喜欢在 for 循环中更改其值：

```
type tt={mutable x: int};;
let f0={x= -1};;
let max=10;;
let ff=Array.create max f0;;
for i=0 to max-1 do ff.(i).x <- i;done;; 
```

然而，ff 的所有字段的值都是 9，而不是从 0 到 9。ff.(i).x 是否正确？我也试过

```
for i=0 to max-1 do f0.x <- i;ff.(i) <- f0;done;; 
```

但结果相同...（我使用的是 OCaml 版本 4.00.1）有什么问题？如果有人能给我提示，我会很高兴！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-22T09:37:12.117

这是初学者常犯的一个典型错误，`Array.create`并且是可变状态。我已经详细解释了[那里](http://yquem.inria.fr/~protzenk/caml-faq/doku.php?id=array_make_bug)。总结是，`Array.create n foo`它不会创建`foo`（怎么可能？）的副本，它会创建一个 case 数组，它们都指向同一个`foo`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-22T09:38:54.173

问题是`ff`数组的所有单元都包含*相同*的元素，即`f0`. 您需要`tt`为每个单元格创建一个新的类型元素。这是一种方法：

```
type tt={mutable x: int};;
let max=10;;
let ff=Array.init max (fun i -> {x= i});; 
```

现在您可以修改一个单元格而不影响其他单元格。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-22T09:46:24.183

问题是，由于记录是可变的，它是*通过引用*而不是*按值*存储的，正如您对非可变数据类型（作为整数）所期望的那样，所以当您这样做时

```
let ff=Array.create 10 f0;; 
```

您实际上存储了对同一记录的 10 个引用。然后每次迭代

```
for i=0 to max-1 do ff.(i).x <- i;done;; 
```

只是多次更新相同的引用，所以由于最后一次迭代是`i = 9`在数组中包含的唯一真实记录获取该值。

您需要做的是创建 10 条不同的记录，例如：

```
# type tt = {mutable x: int};;
type tt = { mutable x : int; }
# let f = Array.init 10 (fun i -> { x = -1});;
val f : tt array =
  [|{x = -1}; {x = -1}; {x = -1}; {x = -1}; {x = -1}; {x = -1}; {x = -1};
    {x = -1}; {x = -1}; {x = -1}|]
# f.(2).x <- 2;;
- : unit = ()
# f;;
- : tt array =
[|{x = -1}; {x = -1}; {x = 2}; {x = -1}; {x = -1}; {x = -1}; {x = -1};
  {x = -1}; {x = -1}; {x = -1}|] 
```

# java - 检票口自定义错误消息

> ID：14001571
> 
> 赞同：0
> 
> 时间：2012-12-22T09:12:31.413
> 
> 标签：java, wicket, feedbackpanel

我有一个上传字段。我只想上传图片。我已经申请了相同的验证。但是如果出现错误，我希望将错误添加到表单上的反馈面板中。

上传面板.html

```
<form wicket:id="frmProduct" >
        <div wicket:id="feedback"></div>
        <label>Category1 *:</label><br/>
        <input type="text" wicket:id="Category1"><br/>
        <label>Category2 *:</label><br/>
        <input type="text" wicket:id="Category2"><br/>
        <label>ProductName *:</label><br/>
        <input type="text" wicket:id="ProductName"><br/>
        <label>TaxAmount *:</label><br/>
        <input type="text" wicket:id="TaxAmount"><br/>
        <label>UnitPrice *:</label><br/>
        <input type="text" wicket:id="UnitPrice"/><br/>
        <label>Description</label><br/>
        <textarea wicket:id="Description" id ="Description" rows="6" cols="20"></textarea><br/>
        <label>Description</label><br/>
        <input wicket:id="uploadField" size="40" type="file"/><br/>
        <input type="submit" wicket:id="submit" value="Save"/>
</form> 
```

上传面板.java

```
 if(uploadField.getFileUpload() != null && uploadField.getFileUpload().getClientFileName() != null){
                    FileUpload upload = uploadField.getFileUpload();
                    String ct = upload.getContentType();

                    if (!imgctypes.containsKey(ct)) {
                        hasError = true;
                    }

                    if(upload.getSize() > maximagesize){
                        hasError = true;
                    }

                    if(hasError == false){
                        System.out.println("######################## Image can be uploaded ################");
                        imageEntry.setContentType(upload.getContentType());
                        imageEntry.setImageName(upload.getClientFileName());
                        imageEntry.setImageSize(upload.getSize());
                        if(imageEntry != null){
                            try {
                                save(imageEntry,upload.getInputStream());
                            } catch (IOException e) {
                                e.printStackTrace();
                            }
                        }
                    }else{
                        target.appendJavaScript("$().toastmessage('showNoticeToast','Please select a valid image!!')");
                        System.out.println("#################### Error in image uploading ###################");
                    }
                }else{
                    System.out.println("########################### Image not Selected #####################");
                } 
```

任何帮助和建议表示赞赏！提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T10:21:51.540

[FileUploadField](https://wicket.apache.org/apidocs/1.5/org/apache/wicket/markup/html/form/upload/FileUploadField.html)是一个表单组件，所以你可以简单地做一个

```
fileUploadField.error("error with file upload"); 
```

PS：代替

```
if(hasError == false) 
```

做一个

```
if (!hasError) 
```

它更好:)

# java - 在 Java 中解析具有特殊字符的 JSON 对象

> ID：14001573
> 
> 赞同：0
> 
> 时间：2012-12-22T09:12:47.787
> 
> 标签：java, json, parsing

我陷入了一种情况，我的`JSONString`（**ruleFormJSONString**）看起来像：

```
{
"ruleDescription":"Test Rule2 Description",
"urlId":"1",
"listOfBusinessdays":["1","2","5","6","7"],
"status":"1",
"hierarchyId":"3",
"fromTime":"08:00",
"toTime":"18:00",
"dcnid":"1",
"eventId":"1",
"rowstate":"1",
"listOfLocations":["ASM","DEL"],
"ruleName":"Test Rule2",
"ruleId":"7","msgId":"1"
} 
```

如您所见，有 2 个属性被命名`fromTime`，`toTime`其中有一个`:`

所以在用 Java 解析这个时，我使用了

```
JSONObject  ruleFormJSON    =   JSONObject.fromString(ruleFormJSONString);
String      fromTime        =   (String)ruleFormJSON.getString("fromTime");
String      toTime          =   (String)ruleFormJSON.getString("toTime"); 
```

我得到了`NumberFormatException`一个

**java.lang.NumberFormatException：对于输入字符串：“18:00”**

所以请建议我如何获取相应`String`变量中的值。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T09:23:45.387

这一行似乎有错误：

```
"listOfBusinessdays":"1","2","5","6","7"], 
```

一个封闭的方括号，但之前没有开放的括号。可能是这挂断了解析器。

# python - 在 tox.ini 中指定 hg 依赖项

> ID：14001578
> 
> 赞同：2
> 
> 时间：2012-12-22T09:14:05.857
> 
> 标签：python, mercurial, tox

在 .hg 中指定 hg 依赖项的正确方法是什么`tox.ini`？例如

```
[testenv]
deps =
    hg+https://code.google.com/p/python-progressbar/ 
```

不幸的是，这不起作用，并且喷出以下内容：

```
ERROR: invocation failed, logfile: /Users/brad/project/.tox/py33-dj/log/py33-dj-1.log
ERROR: actionid=py33-dj
msg=getenv
cmdargs=[local('/Users/brad/project/.tox/py33-dj/bin/pip'), 'install', '--download-cache=/Users/brad/.pip/downloads', 'hg+https://code.google.com/p/python-progressbar/', 'https://github.com/dag/attest/tarball/master', 'django-attest', 'django-celery', 'coverage', 'https://github.com/django/django/tarball/master']
env={'PYTHONIOENCODING': 'utf_8', 'TERM_PROGRAM_VERSION': '309', 'LOGNAME': 'brad', 'USER': 'brad', 'PATH': '/Users/brad/project/.tox/py33-dj/bin:/usr/local/share/python:/usr/local/bin:/usr/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/X11/bin:/usr/texbin', 'HOME': '/Users/brad', 'DISPLAY': '/tmp/launch-zayh2U/org.macosforge.xquartz:0', 'TERM_PROGRAM': 'Apple_Terminal', 'LANG': 'en_AU.UTF-8', 'TERM': 'xterm-256color', 'SHLVL': '1', '_': '/usr/local/share/python/tox', 'TERM_SESSION_ID': 'E8FC4113-C18B-4DB4-9594-C0909A132D76', 'SSH_AUTH_SOCK': '/tmp/launch-kia8RP/Listeners', 'SHELL': '/bin/bash', 'TMPDIR': '/var/folders/zr/m_ys6vwd1z19rqh73jd8z88w0000gn/T/', '__CF_USER_TEXT_ENCODING': '0x1F5:0:15', 'PWD': '/Users/brad/project', 'PIP_DOWNLOAD_CACHE': '/Users/brad/.pip/downloads', 'COMMAND_MODE': 'unix2003'}
abort: couldn't find mercurial libraries in [/usr/local/Cellar/mercurial/2.4.1/libexec /Users/brad/project/.tox/py33-dj/lib/python3.3/site-packages/distribute-0.6.31-py3.3.egg /Users/brad/project/.tox/py33-dj/lib/python3.3/site-packages/pip-1.2.1-py3.3.egg /Users/brad/project/.tox/py33-dj/lib/python33.zip /Users/brad/project/.tox/py33-dj/lib/python3.3 /Users/brad/project/.tox/py33-dj/lib/python3.3/plat-darwin /Users/brad/project/.tox/py33-dj/lib/python3.3/lib-dynload /usr/local/Cellar/python3/3.3.0/Frameworks/Python.framework/Versions/3.3/lib/python3.3 /usr/local/Cellar/python3/3.3.0/Frameworks/Python.framework/Versions/3.3/lib/python3.3/plat-darwin /Users/brad/project/.tox/py33-dj/lib/python3.3/site-packages]
(check your install and PYTHONPATH)
Downloading/unpacking hg+https://code.google.com/p/python-progressbar/
  Cloning hg https://code.google.com/p/python-progressbar/ to /var/folders/zr/m_ys6vwd1z19rqh73jd8z88w0000gn/T/pip-88u_g0-build
  Complete output from command /usr/local/bin/hg clone --noupdate -q https://code.google.com/p/python-progressbar/ /var/folders/zr/m_ys6vwd1z19rqh73jd8z88w0000gn/T/pip-88u_g0-build:

----------------------------------------
Command /usr/local/bin/hg clone --noupdate -q https://code.google.com/p/python-progressbar/ /var/folders/zr/m_ys6vwd1z19rqh73jd8z88w0000gn/T/pip-88u_g0-build failed with error code 255 in None
Storing complete log in /Users/brad/.pip/pip.log

ERROR: could not install deps [hg+https://code.google.com/p/python-progressbar/]
_________________________________________ summary _________________________________________
ERROR:   py33-dj: could not install deps [hg+https://code.google.com/p/python-progressbar/] 
```

最后一行`pip.log`是：

```
pip.exceptions.InstallationError: Command /usr/local/bin/hg clone --noupdate -q https://code.google.com/p/python-progressbar/ /var/folders/zr/m_ys6vwd1z19rqh73jd8z88w0000gn/T/pip-dakkvs-build failed with error code 255 in None 
```

但是运行`pip install hg+https://code.google.com/p/python-progressbar/`有效。

tox 测试环境以 Python 3.3 为目标。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-22T21:12:58.247

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-22T18:02:23.777

通常这是指 env python 的损坏的 mercurial 安装的工件

在 python 3 的 virtualenv 中，env python 是最糟糕的事情

# android - 未创建 SQLite 数据库

> ID：14001581
> 
> 赞同：0
> 
> 时间：2012-12-22T09:14:34.353
> 
> 标签：android, database, android-sqlite

我试图将所有电话记录复制到创建的数据库并且代码运行良好，但是`.db`在以下包中没有生成文件，

```
data/data/your.application.package/databases/ 
```

班级代码：

```
import java.text.SimpleDateFormat;
import java.util.TimeZone;
import java.util.Date;
import java.text.DateFormat;
import android.content.BroadcastReceiver;
import android.content.ContentValues;
import android.content.Context;
import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Handler;
import android.provider.CallLog;
import android.telephony.TelephonyManager;
import android.util.Log;
import android.widget.Toast;

public class logs extends BroadcastReceiver
 {
    SQLiteDatabase calllog;
    String get_number, get_type, get_duration, Current_time, get_date,logTypecode;
    Handler hand = new Handler();

Cursor cursor;
LocalDb dbex;
ContentValues cm;
int logtype;

@Override
public void onReceive(final Context context, Intent intent) {
    // TODO Auto-generated method stub

    String state=intent.getStringExtra(TelephonyManager.EXTRA_STATE);
    if(intent.getAction().equals("android.intent.action.PHONE_STATE"))
    {
        if(state.equals(TelephonyManager.EXTRA_STATE_IDLE))
        {
            hand.postDelayed(new Runnable() {

                public void run() {
                    // TODO Auto-generated method stub
                String number=android.provider.CallLog.Calls.NUMBER;
                String date=android.provider.CallLog.Calls.DATE;
                String type=android.provider.CallLog.Calls.TYPE;
                String duration=android.provider.CallLog.Calls.DURATION;

                Log.i("ddd", ""+duration);
                Cursor cursor=context.getContentResolver().query(CallLog.Calls.CONTENT_URI, null, null, null, null);

                if(cursor.moveToNext()){
                    cursor.moveToPrevious();
                    while(cursor.moveToNext()){

                    get_number=cursor.getString(cursor.getColumnIndex(number));
                    get_date=cursor.getString(cursor.getColumnIndex(date));
                    get_type=cursor.getString(cursor.getColumnIndex(type));
                    get_duration=cursor.getString(cursor.getColumnIndex(duration));
                    SimpleDateFormat dateFormat=new SimpleDateFormat("yyyy-dd-mm  HH:mm:ss");
                    dateFormat.setTimeZone(TimeZone.getTimeZone("GMT"));
                    logtype=Integer.parseInt(get_type);
                    Current_time=DateFormat.getDateTimeInstance().format(new Date());
                    Log.i("ddd", ""+get_duration);

                    try
                    {
                    switch (logtype) {
                    case CallLog.Calls.OUTGOING_TYPE:
                        logTypecode="O";
                           dbex.open();
                           Log.i("ddd", ""+get_duration);
                           cm.put("number",get_number);
                           cm.put("type",get_type);
                           cm.put("time",Current_time);
                           cm.put("duration",get_duration);
                           cm.put("date",get_date);
                           dbex.insert_values("Logs",cm);
                           dbex.close();

                                break;

                        case CallLog.Calls.INCOMING_TYPE:
                            logTypecode="I";
                               dbex.open();
                               cm.put("number",get_number);
                               cm.put("type",get_type);
                               cm.put("time",Current_time);
                               cm.put("duration",get_duration);
                               cm.put("date",get_date);
                               dbex.insert_values("Logs",cm);
                               dbex.close();

                                    break;

                        case CallLog.Calls.MISSED_TYPE:
                            logTypecode="M";
                               dbex.open();
                               cm.put("number",get_number);
                               cm.put("type",get_type);
                               cm.put("time",Current_time);
                               cm.put("duration",get_duration);
                               cm.put("date",get_date);
                               dbex.insert_values("Logs",cm);
                               dbex.close();

                                    break;
                                }
                            }

                        catch(Exception e)
                        {
                            Toast.makeText(context, e.getMessage(), Toast.LENGTH_LONG).show();
                        }

                    }
                }
                    cursor.close();

                    }
                },2000);

            }
        }

    }

} 
```

logs.java 的 DBAdapter Helper 类

```
public class LocalDb {

private static final int DATABASE_VERSION=3;
private DatabaseHelper dbhelp;
public SQLiteDatabase mdb;
static final String DATABASE_NAME ="DBImage";
static final String Logs =" Logs";

Context context;

private static final String Table1 = "create table if not exists " + Logs + "( id  integer primary key autoincrement ," + "number text,type text,time text,duration text,date text )";

private static class DatabaseHelper extends SQLiteOpenHelper{

    public DatabaseHelper(Context context) {
        super(context,DATABASE_NAME,null, DATABASE_VERSION);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        db.execSQL(Table1);

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
        db.execSQL("DROP TABLE IF EXISTS"+Table1);

    }

}

public LocalDb(Context ctx){
    this.context=ctx;
}

public LocalDb open() throws SQLException{

    dbhelp=new DatabaseHelper(context);
    mdb=dbhelp.getWritableDatabase();

    return this;

}
public void close(){
    dbhelp.close();
}

public long insert_values(String Table,ContentValues initialvalues){

    return mdb.insert(Table, null, initialvalues);

}
public Cursor fetchMainLists(){

    String sql = "SELECT id,number,type,time,duration,date FROM Logs ";
    Cursor cur = mdb.rawQuery(sql, null);
    return cur ;

}
} 
```

安卓清单

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.ekp.call_log_db"
    android:versionCode="1"
    android:versionName="1.0" >
 <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.READ_CONTACTS" />
    <uses-permission android:name="android.permission.READ_LOGS" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.READ_INPUT_STATE" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <receiver android:name="logs" >
            <intent-filter android:priority="100" >
                <action android:name="android.intent.action.PHONE_STATE" />
            </intent-filter>
        </receiver><activity android:name=".MainActivity" android:label="@string/title_activity_main">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

日志猫

```
12-22 15:18:29.965: E/Database(1676): android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the cursor or database object that was opened here
12-22 15:18:29.965: E/Database(1676):   at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:1847)
12-22 15:18:29.965: E/Database(1676):   at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:820)
12-22 15:18:29.965: E/Database(1676):   at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:854)
12-22 15:18:29.965: E/Database(1676):   at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:847)
12-22 15:18:29.965: E/Database(1676):   at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:544)
12-22 15:18:29.965: E/Database(1676):   at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:203)
12-22 15:18:29.965: E/Database(1676):   at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:203)
12-22 15:18:29.965: E/Database(1676):   at com.ekp.call_log.logs.onReceive(logs.java:35)
12-22 15:18:29.965: E/Database(1676):   at android.app.ActivityThread.handleReceiver(ActivityThread.java:1794)
12-22 15:18:29.965: E/Database(1676):   at android.app.ActivityThread.access$2400(ActivityThread.java:117)
12-22 15:18:29.965: E/Database(1676):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:981)
12-22 15:18:29.965: E/Database(1676):   at android.os.Handler.dispatchMessage(Handler.java:99)
12-22 15:18:29.965: E/Database(1676):   at android.os.Looper.loop(Looper.java:123)
12-22 15:18:29.965: E/Database(1676):   at android.app.ActivityThread.main(ActivityThread.java:3683)
12-22 15:18:29.965: E/Database(1676):   at java.lang.reflect.Method.invokeNative(Native Method)
12-22 15:18:29.965: E/Database(1676):   at java.lang.reflect.Method.invoke(Method.java:507)
12-22 15:18:29.965: E/Database(1676):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-22 15:18:29.965: E/Database(1676):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-22 15:18:29.965: E/Database(1676):   at dalvik.system.NativeStart.main(Native Method) 
```

数据库-不将值插入数据库表

```
12-22 16:53:55.145: E/Database(30202): close() was never explicitly called on database '/data/data/com.ekp.call_log_db/databases/DBImage' 
12-22 16:53:55.145: E/Database(30202): android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the cursor or database object that was opened here
12-22 16:53:55.145: E/Database(30202):  at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:1847)
12-22 16:53:55.145: E/Database(30202):  at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:820)
12-22 16:53:55.145: E/Database(30202):  at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:854)
12-22 16:53:55.145: E/Database(30202):  at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:847)
12-22 16:53:55.145: E/Database(30202):  at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:544)
12-22 16:53:55.145: E/Database(30202):  at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:203)
12-22 16:53:55.145: E/Database(30202):  at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:203)
12-22 16:53:55.145: E/Database(30202):  at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:118)
12-22 16:53:55.145: E/Database(30202):  at com.ekp.call_log_db.LocalDb.open(LocalDb.java:56)
12-22 16:53:55.145: E/Database(30202):  at com.ekp.call_log_db.logs$1.run(logs.java:46)
12-22 16:53:55.145: E/Database(30202):  at android.os.Handler.handleCallback(Handler.java:587)
12-22 16:53:55.145: E/Database(30202):  at android.os.Handler.dispatchMessage(Handler.java:92)
12-22 16:53:55.145: E/Database(30202):  at android.os.Looper.loop(Looper.java:123)
12-22 16:53:55.145: E/Database(30202):  at android.app.ActivityThread.main(ActivityThread.java:3683)
12-22 16:53:55.145: E/Database(30202):  at java.lang.reflect.Method.invokeNative(Native Method)
12-22 16:53:55.145: E/Database(30202):  at java.lang.reflect.Method.invoke(Method.java:507)
12-22 16:53:55.145: E/Database(30202):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-22 16:53:55.145: E/Database(30202):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-22 16:53:55.145: E/Database(30202):  at dalvik.system.NativeStart.main(Native Method) 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T10:57:17.560

在下面写下接收器代码而不是您的广播接收器代码，它将解决您的问题。

```
public class logs extends BroadcastReceiver {
    SQLiteDatabase calllog;
    String get_number, get_type, get_duration, Current_time, get_date,logTypecode;
    Handler hand = new Handler();
    Cursor cursor;
    LocalDb dbex;
    ContentValues cm;
    int logtype;

    @Override
    public void onReceive(final Context context, Intent intent) {
        // TODO Auto-generated method stub

        dbex = new LocalDb(context);

        String state=intent.getStringExtra(TelephonyManager.EXTRA_STATE);
        if (intent.getAction().equals("android.intent.action.PHONE_STATE")) {
            if(state.equals(TelephonyManager.EXTRA_STATE_IDLE)) {
                hand.postDelayed(new Runnable() {

                    public void run() {
                        // TODO Auto-generated method stub
                        String number=android.provider.CallLog.Calls.NUMBER;
                        String date=android.provider.CallLog.Calls.DATE;
                        String type=android.provider.CallLog.Calls.TYPE;
                        String duration=android.provider.CallLog.Calls.DURATION;

                        Log.i("ddd", ""+duration);
                        dbex.open();
                        Cursor cursor=context.getContentResolver().query(CallLog.Calls.CONTENT_URI, null, null, null, null);

                        if(cursor.moveToNext()) {
                            cursor.moveToPrevious();

                            while(cursor.moveToNext()) {

                                get_number=cursor.getString(cursor.getColumnIndex(number));
                                get_date=cursor.getString(cursor.getColumnIndex(date));
                                get_type=cursor.getString(cursor.getColumnIndex(type));
                                get_duration=cursor.getString(cursor.getColumnIndex(duration));
                                SimpleDateFormat dateFormat=new SimpleDateFormat("yyyy-dd-mm  HH:mm:ss");
                                dateFormat.setTimeZone(TimeZone.getTimeZone("GMT"));
                                logtype=Integer.parseInt(get_type);
                                Current_time=DateFormat.getDateTimeInstance().format(new Date());
                                Log.i("ddd", ""+get_duration);
                                try {
                                    switch (logtype) {
                                        case CallLog.Calls.OUTGOING_TYPE:
                                            logTypecode="O";
                                            dbex.open();
                                            Log.i("ddd", ""+get_duration);
                                            cm.put("number",get_number);
                                            cm.put("type",get_type);
                                            cm.put("time",Current_time);
                                            cm.put("duration",get_duration);
                                            cm.put("date",get_date);
                                            dbex.insert_values("Logs",cm);
                                            dbex.close();

                                            break;

                                        case CallLog.Calls.INCOMING_TYPE:
                                            logTypecode="I";
                                            dbex.open();
                                            cm.put("number",get_number);
                                            cm.put("type",get_type);
                                            cm.put("time",Current_time);
                                            cm.put("duration",get_duration);
                                            cm.put("date",get_date);
                                            dbex.insert_values("Logs",cm);
                                            dbex.close();

                                            break;

                                        case CallLog.Calls.MISSED_TYPE:
                                            logTypecode="M";
                                            dbex.open();
                                            cm.put("number",get_number);
                                            cm.put("type",get_type);
                                            cm.put("time",Current_time);
                                            cm.put("duration",get_duration);
                                            cm.put("date",get_date);
                                            dbex.insert_values("Logs",cm);
                                            dbex.close();

                                            break;
                                    }
                                } catch(Exception e) {
                                    Toast.makeText(context, e.getMessage(), Toast.LENGTH_LONG).show();
                                }
                            }
                        }
                        cursor.close();
                        dbex.close();

                    }
                },2000);
            }
        }
    }
} 
```

# cmake - 带有 GDCM 配置的 ITK 的 Cmake 错误

> ID：14001584
> 
> 赞同：0
> 
> 时间：2012-12-22T09:14:54.387
> 
> 标签：cmake, itk, gdcm

使用 GDCM2.2 配置 ITK 时发现以下错误

```
CMake Error at Modules/ThirdParty/GDCM/itk-module-init.cmake:5 (find_package):
  By not providing "FindGDCM.cmake" in CMAKE_MODULE_PATH this project has
  asked CMake to find a package configuration file provided by "GDCM", but
  CMake did not find one.

  Could not find a package configuration file provided by "GDCM" with any of
  the following names:

    GDCMConfig.cmake
    gdcm-config.cmake

  Add the installation prefix of "GDCM" to CMAKE_PREFIX_PATH or set
  "GDCM_DIR" to a directory containing one of the above files.  If "GDCM"
  provides a separate development package or SDK, be sure it has been
  installed.
Call Stack (most recent call first):
  CMakeLists.txt:558 (include) 
```

我已经安装了 GDCM2.2 [不是存储库] 并手动设置了 gdcm 目录的路径，但 Cmake 仍然返回此错误。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T10:46:37.813

使用 gdcm 构建 ITK 下载 gdcm2.2.1 或最新版本的 .zip 文件，因为通过 exe 安装 gdcm 不包括任何 GDCMconfig.cmake 文件，但 zip 有它。在 ITK 配置中，我们必须给出 GDCMconfig.cmake 所在目录的路径。

# .net - linq 等效 sql 查询“不在（选择查询）”

> ID：14001588
> 
> 赞同：6
> 
> 时间：2012-12-22T09:15:32.197
> 
> 标签：.net, sql, linq

我的sql代码如下：

```
select UserId,UserName 
from aspnet_Users 
where UserId not in (select UsersId from tbluser  where active='true') 
```

什么是等效的 linq 表达式？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-22T09:21:53.417

我第一次尝试`LiNQ`使用`C#`

```
var result = from y in aspnet_Users
            where !(
                        from x in tblUser
                        where  x.active == "true"
                        select x.UsersID
                    ).Contains(y.UserId)
            select y;                
            -- OR // select new { y.UserId, y.UserName}; 
```

资源

*   [LINQ to SQL 中的 NOT IN 子句](http://programminglinq.com/blogs/marcorusso/archive/2008/01/14/the-not-in-clause-in-linq-to-sql.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T09:28:33.010

```
var query =
    from c in aspnet_Users 
    where !(from o in tbluser where o.active=="true" 
            select o.UserId)
           .Contains(c.UserId)
    select c; 
```

# xcode - Xcode - 分段控制更改为默认值

> ID：14001589
> 
> 赞同：0
> 
> 时间：2012-12-22T09:15:43.823
> 
> 标签：xcode, view, controller

我有这个 xcode 应用程序，主要有 2 个视图控制器，有 2 个按钮（第一个是弹出警报视图的按钮，第二个是在视图之间移动的按钮）。在第二个视图中，我有一个带有 4 个段的分段控制器，当您选择其中一个时，返回到第一个视图，然后返回到分段控制器视图，分段控制器返回到第一个段......我该如何修复这个 ？

这是 .m 文件中的代码

```
//
//  ViewController.m
//  iBored
//
//  Created by Yannai on 12/15/12.
//  Copyright (c) 2012 Yannai Harel. All rights reserved.
//

#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    boredInt = arc4random()%30+1;
    boredString = [[NSString alloc]init];
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (IBAction)weatherButton:(id)sender {

}

-(void)iBoredAction {
    switch (boredInt) {
        case 1:
            boredString = @"Draw!";
            break;
        case 2:
            boredString = @"Try to earn money!";
            break;
        case 3:
            boredString = @"Climb on trees!";
            break;
        case 4:
            boredString = @"Do homework!";
            break;
        case 5:
            boredString = @"Watch TV!";
            break;
        case 6:
            boredString = @"Go on a run!";
            break;
        case 7:
            boredString = @"Connect to your innerself - meditate!";
            break;
        case 8:
            boredString = @"Play on the computer!";
            break;
        case 9:
            boredString = @"Call a friend!";
            break;
        case 10:
            boredString = @"Go to a friend!";
            break;
        case 11:
            boredString = @"Play with your pet!";
            break;
        case 12:
            boredString = @"Take your pet on a walk!";
            break;
        case 13:
            boredString = @"Play on an instrument - if you don't know try to learn!";
            break;
        case 14:
            boredString = @"Watch youtube videos!";
            break;
        case 15:
            boredString = @"Listen to music!";
            break;
        case 16:
            boredString = @"Read a book!";
            break;
        case 17:
            boredString = @"Go to iFunny!";
            break;
        case 18:
            boredString = @"Watch a movie!";
            break;
        case 19:
            boredString = @"Do some experiments!";
            break;
        case 20:
            boredString = @"Play soccer!";
            break;
        case 21:
            boredString = @"Play basketball!";
            break;
        case 22:
            boredString = @"Go for a ride on your bike!";
            break;
        case 23:
            boredString = @"Do some exercises!";
            break;
        case 24:
            boredString = @"Build a treehouse!";
            break;
        case 25:
            boredString = @"Build a fort!";
            break;
        case 26:
            boredString = @"Record short and cool films!";
            break;
        case 27:
            boredString = @"Start programming!";
            break;
        case 28:
            boredString = @"Go online!";
            break;
        case 29:
            boredString = @"Do some research about a subject you like!";
            break;
        case 30:
            boredString = @"Go outside and stare at the sky!";
            break;

        default:
            break;
    }
    UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"iBored" message:boredString delegate:self cancelButtonTitle:@"Nice Idea" otherButtonTitles:@"Pass",nil];
    [alert show];
}

-(IBAction)switchWeatherSwitch:(id)sender {
    if (weatherSwitch.on) {
        weatherOut.enabled = YES;
        NSLog(@"on");
    }
    else {
        weatherOut.enabled = NO;
        NSLog(@"off");
    }
}

- (IBAction)iBored:(id)sender {
    if (weatherOut.selectedSegmentIndex == 0) {
        NSLog(@"Sunny");
    }
    else if (weatherOut.selectedSegmentIndex == 1) {
        NSLog(@"Rainy");
    }
    else if (weatherOut.selectedSegmentIndex == 2) {
        NSLog(@"Windy");
        [self iBoredAction];
    }
    else if (weatherOut.selectedSegmentIndex == 3) {
        NSLog(@"Snowy");
    }

}

-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{
    if (buttonIndex == 1) {
        [self iBoredAction];
    }
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T09:50:30.503

If I understand your question, this will be your answer.

```
@interface firstViewController : UIViewController{

    firstViewController *secondView;
}

//add this where you push to the secondView

if(!secondView)
    secondView = [[secondViewController alloc] init];
//This will init the second view only one time. So the position of your segments will retain its state.
    [[self navigationController]pushViewController:photocontent animated:YES] 
```

# c - VC++中栈的大小是多少？

> ID：14001590
> 
> 赞同：5
> 
> 时间：2012-12-22T09:15:53.323
> 
> 标签：c, recursion, stack, callstack, visual-c++

我想要有关 VC++（32 位和 64 位）中堆栈溢出的准确信息，特别是在递归中。在调试模式下，这种情况在递归中很快发生（就像 4500 运行一个简单的递归函数不做任何事情或类似的事情）。但是，似乎发布模式有所不同。很难理解，我现在还没有测试它，因为优化删除了不做任何事情的代码（显然删除了递归），因为我的代码或函数是如此..我应该做更多..我测量在优化发布的正确时间，我不知道优化在递归实现的更复杂的快速排序中是否相同？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-22T09:20:56.497

正如 Andreas Brinck[在他的相关回答中所说](https://stackoverflow.com/questions/1825964/c-c-maximum-stack-size-of-program/1825996#1825996)：

> 在 VC++ 中，我认为默认堆栈大小为 1 MB，因此递归深度为 10.000 时，每个堆栈帧最多可以有 100 个字节。

可以使用以下方法修改此堆栈大小限制：

**项目→属性→配置属性→链接器→系统→堆栈保留大小。**

**![项目→属性→配置属性→链接器→系统→堆栈保留大小。](../Images/34dbe4c09136daeebdc785fb2b608180.png)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T09:24:10.690

VC++ 中的堆栈大小选项位于，

```
Properties -> Configuration Properties -> Linker -> System -> Stack Reserve Size. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T12:13:14.387

虽然增加堆栈并不是一个糟糕的主意，但堆栈空间并不是无限的，而且您可能已经注意到，用完堆栈并不容易恢复。如果您必须使用递归数千级的递归函数，那么一定要增加堆栈。

为安全起见，请确保您确实测试了最大安全递归级别，然后在您的函数中设置一个限制[即使在生产代码中，即使它让它变得有点慢并且可能占用更多的堆栈空间]。否则，你可以打赌，某个地方的某个人会以你没有预料到的方式使用你的代码，并且当它运行到比你预期的更深的递归级别时会崩溃——kablam，不可能恢复。

另一种可能的解决方案是在单独的线程中运行递归，如果该线程崩溃，您仍然可以让您的主线程以某种理智的方式从崩溃中恢复（如果没有别的，只需记录您的代码崩溃的事实）堆栈失败，以及当时的情况）。

我当然更喜欢有一个非递归的，或者至少是有限的递归级别，并使用其他机制，例如动态分配的 lifo 数据结构来记录“我们在哪里”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T09:22:31.420

您可以迭代每个递归算法，例如使用单独的堆栈。

# python - PyQt - QTableView 不响应 dataChanged 信号？

> ID：14001592
> 
> 赞同：1
> 
> 时间：2012-12-22T09:16:02.877
> 
> 标签：python, qt, user-interface, qt4, pyqt

`QSqlQueryModel`是一个很棒的数据库模型，但它是只读的。所以我重写了它的`setData()`和`flags()`方法。现在，我可以编辑我的数据库表`QTableView`

但是 QTableView 在我发出 a 时不会自行刷新`dataChanged()`，当我在 中编辑文本框`QTableView`并单击其他地方时，新值成功写入数据库，但文本框的值恢复为旧值。我必须重新选择整张桌子，性能真的很差......

为什么？

```
class StudentsTableModel(QtSql.QSqlQueryModel):
    def __init__(self):
        QtSql.QSqlQueryModel.__init__(self)
        self.LockedColumns = []

    def flags(self, index):
        flags = QtSql.QSqlQueryModel.flags(self, index)
        if index.column() not in self.LockedColumns:
            flags |= QtCore.Qt.ItemIsEditable
        return flags

    def setData(self, index, value, role):
        primary_key_index = self.index(index.row(), 0)
        name = self.data(primary_key_index)
        field = self.record().fieldName(index.column())
        self.update(name, field, value)

        self.dataChanged.emit(self.index, self.index)

        # Why DataView isn't refresh automatically when
        # a dataChanged signal emited? Force re-select...
        self.select(self.week)

        return True

    def update(self, name, field, value):
        query = QtSql.QSqlQuery()
        sql = ("UPDATE student_info SET '%s' = '%s' WHERE 学生姓名 = '%s'"
                % (field, value, name))
        query.exec(sql)

    def select(self, week):
        self.week = week
        sql = ("SELECT 学生姓名,第%s周,小组 FROM student_info" % (week))
        self.setQuery(sql) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T11:14:53.470

看看这个模型是否适合你：

```
class sqlTableModel(QSqlTableModel):
    def __init__(self, parent=None):
        super(sqlTableModel, self).__init__(parent)

    def setData(self, index, value, role=Qt.EditRole):
        if role == Qt.EditRole:
            value = value.strip() if type(value) == str else value

        return super(sqlTableModel, self).setData(index, value, role)

    def flags(self, index):
        itemFlags = super(sqlTableModel, self).flags(index)

        if index.column() != 0:
            return itemFlags | Qt.ItemIsEditable

        return itemFlags ^ Qt.ItemIsEditable #  First column not editable 
```

而不是`setQuery`，要设置表，我会在主类中有这样的东西：

```
def setDatabase(self, nameDatabase):
    self.database = QSqlDatabase.addDatabase("QSQLITE")
    self.database.setDatabaseName(nameDatabase)

    return self.database.open()

def setTable(self, nameTable):
    self.model = sqlTableModel(self)
    self.model.setEditStrategy(QSqlTableModel.OnManualSubmit)
    self.model.setTable(nameTable)
    self.model.select()

    self.view.setModel(self.model)

def saveTable(self):
    if self.model.submitAll():
        return True

    self.model.database().rollback()
    return False 
```

# java - Java静态元素被不同的类访问

> ID：14001598
> 
> 赞同：0
> 
> 时间：2012-12-22T09:16:44.507
> 
> 标签：java, types, static, primitive-types, modifiers

在 Java 中，静态元素是通过仅指定类名后跟`dot`运算符来访问的。

假设，我有一个名为**ClassA**的类，它具有静态原始类型`int a = 10;`

如果我有其他两个类**ClassB**和**ClassC 同时**访问元素`a`并进行一些更改，**ClassB**所做的更改是否也会影响**ClassC**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T09:20:44.483

静态字段与类相关，与实例无关。对静态字段的修改将导致对该字段的所有引用返回最后分配的值。从某种意义上说，`A`现在在你的应用程序中定义为全局变量，在大多数用例下这并不是一件好事。

```
public class App {

    public static void main(String[] args) {
        B b = new B();
        C c = new C();

        System.out.println(A.a); //outputs 10
        b.changeA();
        System.out.println(A.a); //outputs 30
        c.changeA();
        System.out.println(A.a); //outputs 20
    }
}

class A{
    static int a = 10;
}

class B{
    public void changeA(){
        A.a = 30;
    }
}

class C{
    public void changeA(){
        A.a = 20;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T09:26:16.513

> 如果我有其他两个类`ClassB`并同时`ClassC`访问元素 a 并进行一些更改，那么所做的更改是否`ClassB`也会影响`ClassC`？

只有一个`ClassA.a`，因为它是静态成员。`ClassB`影响所带来的变化**`ClassA.a`**。`ClassC`将看到更改，因为它正在查看同一成员。

您描述的场景用代码和图表更好地表达：

课程：

```
class ClassA {
    static int a = 10;
}

class ClassB {
    static void look() {
        System.out.println("B sees " + ClassA.a);
    }
    static void change() {
        ClassA.a = 42;
    }
}

class ClassC {
    static void look() {
        System.out.println("C sees " + ClassA.a);
    }
    static void change() {
        ClassA.a = 67;
    }
} 
```

使用它们：

```
ClassB.look(); // "B sees 10"
ClassC.look(); // "C sees 10"
ClassB.change();
ClassB.look(); // "B sees 42"
ClassC.look(); // "C sees 42"
ClassC.change();
ClassB.look(); // "B sees 67"
ClassC.look(); // "C sees 67" 
```

图表：

```
                         +----------+
                         | 甲级 |
                         +----------+
                  +-+--->| 静态a |
                  | | +----------+
+-----------+ | |
| B类 | | |
+-----------+ | |
| （方法）|-使用-+ |
+-----------+ |
                    |
+-----------+ |
| C类 | |
+-----------+ |
| （方法）|-使用---+
+-----------+
```

# core-data - 如何将 UIImageView 保存到 CoreData 数据库

> ID：14001600
> 
> 赞同：1
> 
> 时间：2012-12-22T09:17:02.370
> 
> 标签：core-data, uiimageview, uiimage, nsdata

将 a 保存到 CoreData 数据库的**最简单**方法是什么。`UIImageView`我试过这个：

**节省：**

```
 UIImage *image = imageView.image;
    NSData *imageData = UIImagePNGRepresentation(image);
    [newContact setValue:imageData forKey:@"imageViewFinal"]; 
```

**检索：**

```
 imageView.image = [matches valueForKey:@"imageViewFinal"]; 
```

我添加了一个`Attribute`名为“imageViewFinal”的`Binary Data`类型。

**问题**：

当我去构建它并单击保存按钮时，应用程序崩溃了，这是什么问题？

谢谢，赛博。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T04:02:57.170

@ShermanLo 说的是对的，崩溃日志显示您已经修改了模型，但没有以正确的方式处理新旧商店模型版本之间的冲突。

因此，只需在您的设备/模拟器中删除您的应用程序，然后重新构建/运行它。

**注意**：每当您修改模型时，除非您提供处理方法，否则您需要这样做。SO上有很多相关的QA。:)

# c++ - 函数在 C++ 中不保持独立？

> ID：14001608
> 
> 赞同：0
> 
> 时间：2012-12-22T09:18:39.087
> 
> 标签：c++, function

```
int evens(int x,int y);
int pdiv(int x,int y,int z);

void main(void)
{
  clrscr();
  cout<<"Enter the number x an y";
  int x,y;
  cin>>x>>y;
  evens(x,y);
  getch();
}

int evens(int x,int y)
{
  cout<<"Even Numbers between x and y are"<<endl;
  for (int z=x;z<y;z++)
  {
  if(z%2==0) cout<<z<<"  "<<pdiv(z,x,y);
  }
  return 0;
}

int pdiv(int x,int y,int z)
{
  cout<<"Positive divisors of the given number are"<<endl;
  for(int a=y;a<=z;a++)
  {
    if(x%a==0)
    cout<<a<<"  ";
  }
} 
```

在上面的程序中，每当我`pdiv(z,x,y)`在`evens(x,y)`函数中使用**x**和**y**的值时都会`evens(x,y)`开始改变。当我不打电话时，它不会`pdiv()`发生`evens()`。我被告知函数是独立的，它们不应该改变另一个函数的值，我在这个程序上花了几个小时，我不知道我做错了什么。

为什么我的函数不表现为独立函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T09:42:56.143

C++ 中的函数是“独立的”，它们不能更改另一个函数中变量的值，除非您通过引用传递参数或进行一些 hack（可能您不这样做）。但是，您可能需要改进几件事：

1.  `pdiv`应该返回一些`int`结果

2.  您调用的方式`pdiv(z,x,y)`有点误导，因为在函数内部，您将拥有`x`值为`z`from的变量`evens()`。在 C++ 中，您不按名称传递参数，顺序很重要。如果您不更改变量的含义并调用它会更清楚`pdiv(x,y,z)`。

3.  在你应该为变量和`main()`分配一些初始值。`x``y`

4.  为什么你甚至认为变量在变化？

# xml - 如何使用只有一个命名空间的大量 xsd 文件并在 IntelliJ Idea 中查看工具提示？

> ID：14001617
> 
> 赞同：1
> 
> 时间：2012-12-22T09:19:58.280
> 
> 标签：xml, spring, xsd, intellij-idea

IntelliJ Idea 11.1.4 中的工具提示存在一些问题

我有一个项目，我在其中使用**spring**进行配置。

当我想将很多 xsd 文件组合在一起时，工具提示不起作用。我给你举个例子。在**spring.schemas**我们有两条记录

```
http\://www.example.com/schema/test.xsd=test-schema.xsd
http\://www.example.com/schema/test-in.xsd=test-schema-in.xsd 
```

**测试模式 in.xsd**

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<xsd:schema xmlns="http://www.example.com/schema/test"
            xmlns:xsd="http://www.w3.org/2001/XMLSchema"
            xmlns:beans="http://www.springframework.org/schema/beans"
            targetNamespace="http://www.example.com/schema/test"
            elementFormDefault="qualified">

    <xsd:element name="name-element" type="type1"/>

    <xsd:complexType name="type1">
        <xsd:complexContent>
            <xsd:extension base="beans:identifiedType">
                <xsd:all>
                    <xsd:element name="name" type="xsd:string"/>
                </xsd:all>
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>

</xsd:schema> 
```

**测试模式.xsd**

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<xsd:schema xmlns="http://www.example.com/schema/test"
            xmlns:xsd="http://www.w3.org/2001/XMLSchema"
            xmlns:beans="http://www.springframework.org/schema/beans"
            targetNamespace="http://www.example.com/schema/test"
            elementFormDefault="qualified">

    <xsd:include schemaLocation="http://www.example.com/schema/test-in.xsd"/>

    <xsd:element name="age-element" type="type2"/>

    <xsd:complexType name="type2">
        <xsd:complexContent>
            <xsd:extension base="beans:identifiedType">
                <xsd:all>
                    <xsd:element name="age" type="xsd:integer"/>
                </xsd:all>
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>

</xsd:schema> 
```

我们有这么简单的xml文件

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:ex="http://www.example.com/schema/test"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.example.com/schema/test
       http://www.example.com/schema/test.xsd">

    <ex:age-element>
        <ex:age>
            3
        </ex:age>
    </ex:age-element>

    <ex:name-element>
        <ex:name >
            Simple Name
        </ex:name>
    </ex:name-element>

</beans> 
```

在工具提示中，我可以看到**age-element**，但看不到**name-element**。

有没有一种解决方案可以在一个命名空间（包含）中使用大量 xsd 文件并查看**Idea 工具提示**中的元素？

# performance - 启用 Mod_rewrite 引擎会减慢我专用的盒子野兽爬行

> ID：14001623
> 
> 赞同：0
> 
> 时间：2012-12-22T09:21:16.660
> 
> 标签：performance, apache, mod-rewrite, timeout

我一直在解决`.htaccess`我购买的脚本的一个问题，这给我带来了很大的冲突。如果我启用了重写并使用 Blitz.io 进行 1-250 测试，那么在所有请求超时之前它会到达大约 5 个用户。当此事件发生时，我看不到任何服务器资源争用，但我偶尔会看到来自 Apache 的事件，即我已经使用了最大连接数。这不可能是正确的，因为我已将其设置为处理数千个连接。

进一步支持重写理论，如果我禁用重写并针对同一个 php 页面运行 Blitz，它将完成测试而不会出现任何重要的错误或超时（它也会破坏大部分脚本 :)）。我还注意到，我在 Blitz 中重写关闭的响应时间最长约为 250 毫秒，而如果我启用重写引擎，它会超过一秒。

任何建议将不胜感激，我已经搜索了很多并没有想出太多，当然我是重写 n00b。

提前谢谢，现在要去冰我的头......

```
 # enable apache morRewrite module #
    RewriteEngine on

    RewriteBase /

    # set files headers
    <IfModule mod_headers.c>
    <FilesMatch "\.(css|js|png|gif|jpg|jpeg|htc)$">
    Header set Cache-Control "max-age=2678400, public, must-revalidate"
    </FilesMatch>
    </IfModule>

    # allow request methods
    <Limit POST PUT DELETE GET OPTIONS HEAD>
       Order deny,allow
       Allow from All
    </Limit>

    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f

    ErrorDocument 404 /404.html

    # non last slash redirect
    RewriteCond %{REQUEST_URI} !(\.php|\.html|\.xml|\.txt|[\/])$ [NC]
    RewriteRule ^(.*)$ http://%{HTTP_HOST}/$1/ [NC,L,R=301]

     # define system languages
    #RewriteRule ^([a-zA-Z]{2})$ index.php?page=$1 [QSA,L]

    # define paging
    RewriteRule ^([^//]+)/?(.*)?/index([0-9]*).ht(m?ml?)$ index.php?           page=$1&rlVareables=$2&pg=$3 [QSA,L]

    # define listing
    RewriteRule ^(([\w\-\_]+)?/)(.+)-l?([0-9]+).ht(m|ml)$ index.php? page=$2&rlVareables=$3&listing_id=$4 [QSA,L]

    # wildcard request
    RewriteCond %{HTTP_HOST} ^((?!www\.|m\.|mobile\.).*)\..+\.[^/]+$ [NC]
    #RewriteCond %{HTTP_HOST} ^((?!www\.|m\.|mobile\.).*)\..+$ [NC] # FIRST LEVEL         DOMAIN (localhost) USAGE
    RewriteRule (.*) index.php?page=%1&wildcard&rlVareables=$1 [QSA,L]

    # account request (sub-directory)
    RewriteRule ^((\w{2})/)?([\w-_]{3,})$ index.php?page=$3&lang=$2&account_request [QSA,L]

    # define single pages
    RewriteRule ^([^//]+)/?(^/*)?.ht(m?ml?)$ index.php?page=$1 [QSA,L]

    # define other pages
    RewriteRule ^([^//]+)/?(.*)?/?(.*)?(.ht(m?ml?)|/+)$ index.php?page=$1&rlVareables=$2 [QSA,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T17:43:03.103

您是否查看过您的访问日志和 rewrite.logs（如果您可以临时启用后者）？

跳出来的一件事是您的家具（css、jpeg 等）的 Header 指令，特别是必须重新验证标志。这将强制客户端浏览器为每个图像等发出条件 GET。这不是默认行为。浏览器将假定任何静态文件的 10% 的可缓存寿命（也就是说，如果它是 10 周，浏览器将只重新验证文件每周一次）。好的，大多数这些 GET 将导致 304“未修改”响应，但这仍然意味着 Apache 必须验证这些请求，这可以轻松地将对服务器的整体请求率提高 5-10 倍。

“非最后一个斜杠重定向”将触发除 php、html、xml 和 txt 文件（包括 jpeg 等）之外的所有 URI。这两个 REQUEST_FILENAME 条件应紧接在 REQUEST_URI 条件之前。即 ErrorDocument 指令需要向上移动 4 行。

您还需要使用测试向量来检查单页和其他页面正则表达式。它们是有效的语法，但不会给你我认为你想要的东西（例如`[^//]`，与`[^/]`;`.ht(m?ml?)`匹配`shtmml`； ^/* 可能应该读取`[^/]*`，因此该规则当前仅匹配`^([^//]+)/?`空字符串并因此退化为`(^/*)?.ht(m?ml?)$`.

如果我是你，我会要求退钱:-(

# git - 在服务器上使用 git 有一个用于实时和开发的分支

> ID：14001630
> 
> 赞同：1
> 
> 时间：2012-12-22T09:22:32.817
> 
> 标签：git, ftp, web-deployment

因此，我对 git 相当陌生，并且一直在将 if 用于我正在从事的 java 项目。我还管理一个网站的开发，并想开始使用 git。似乎应该有办法做到这一点，但我不完全确定是否有可能。无论如何，这就是我所希望的。

1.  有一个实时（分支？）存储库，我可以将其推送到该商店网站上的实时内容
2.  有一个生产（分支？）存储库，我可以推送到该存储库以查看该站点的分阶段版本。这将包含在服务器根目录的子目录中。

我读了一篇关于如何制作 git 服务器的文章。但是我上面概述的可能吗？我认为这会让我的生活更轻松，而不必记住我将哪些文件更改为 FTP 到我的服务器上。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T09:28:24.250

您的想法是拥有一个主分支和一个开发分支。一般来说，按照惯例推送到主分支的任何内容都意味着您的应用程序应该使用该代码。当您推送到开发分支时，代码应该是针对您的应用程序的小修复和改进。稍后可以将这些小修复合并到您的主分支中，以便您的应用程序使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T13:15:17.267

请注意，您在服务器上推送到的任何 git 存储库都应该是*裸*存储库（这样，您推送的内容与工作树之间没有同步问题，因为裸存储库没有工作树）。

您通常将（您想要的分支）推送到裸仓库，并且您有一个 post-receive 挂钩，它将将该分支的内容检出到（您的一个）网站目录，具体取决于您刚刚推送的分支。

具体示例请参见“[如何在 git 中的 post-receive 挂钩中处理分支上的文件”。](https://stackoverflow.com/a/11323004/6309)

# testing - 我可以使用 MyEclipse IDE 而不是 Eclipse IDE (Eclipse for Testers) 来使用 Selenium 进行测试吗

> ID：14001631
> 
> 赞同：1
> 
> 时间：2012-12-22T09:22:46.290
> 
> 标签：testing, selenium, automation, selenium-webdriver

我是 Selenium 的新手，并且有 Java 开发经验。

我已经安装了 Selenium IDE 作为 Firefox 的插件。

我有 MyEclipse IDE。我是否应该下载另一个 Eclipse IDE 以使用 Selenium Webdriver 进行测试。如果是，那么请建议哪个版本的 Eclipse 最适合我的目的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T11:16:41.023

如果您想学习 selenium IDE 的基础知识，最好在 Firefox 中使用 selenium IDE。如果您具备 Java、python、ruby、c#、PHP 等任何编程语言的知识，您可以使用 Selenium Webdriver 以及上述任何一种编程语言来编写自动化测试脚本。

来到 Eclipse IDE，当你开始使用 Selenium Webdriver 时，你需要使用 Eclipse IDE。否则，如果您在 Firefox 中使用 Selneium IDE，则无需使用 Eclipse，因为 Selenium IDE 只是一个记录和播放工具（您也可以添加和修改 selenium 命令）。

您可以将 Eclipse IDE 用于以下链接中的 Java EE 开发人员。 [http://eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/junosr1](http://eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/junosr1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-07T16:43:24.757

不，也许我们不能将 MyEclipse 与 selenium 一起使用。此外，IDE 与 Eclipse 无关。

# c++ - 不能被 K 整除的两个和的最大子集

> ID：14001634
> 
> 赞同：10
> 
> 时间：2012-12-22T09:23:19.117
> 
> 标签：c++, algorithm, formula

我得到了集合 {1, 2, 3, ... ,N}。我必须找到给定集合的子集的最大大小，以便子集中的任何 2 个数字的总和不能被给定的数字 K 整除。N 和 K 可以达到 2*10^9，所以我需要一个非常快的算法。我只想出了一个复杂度为 O(K) 的算法，它很慢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T11:55:33.793

首先计算所有集合元素 mod k。并解决简单的问题：找到给定集合的子集的最大大小，使得子集中的任何 2 个数字的总和不等于给定数字 K。我划分这个集合到不能同时选择 set(i) 和 set(ki) 的两组（i 和 ki）。

```
int myset[]
int modclass[k]

for(int i=0; i< size of myset ;i++)
{
    modclass[(myset[i] mod k)] ++;
} 
```

选择

```
for(int i=0; i< k/2 ;i++)
{ 
    if (modclass[i] > modclass[k-i])
    {
        choose all of the set elements that the element mod k equal i
    }
    else
    {
        choose all of the set elements that the element mod k equal k-i
    }
} 
```

最后，您可以从元素 mod k 等于 0 或 k/2 中添加一个元素。

这个解决方案的算法复杂度为 O(K)。

您可以使用动态数组改进这个想法：

```
for(int i=0; i< size of myset ;i++)
{
    x= myset[i] mod k;
    set=false;
    for(int j=0; j< size of newset ;j++)
    {
        if(newset[j][1]==x or newset[j][2]==x)
        {
            if (x < k/2)
            {
                newset[j][1]++;
                set=true;
            }
            else
            {
                newset[j][2]++;
                set=true;
            }
        }
    }
    if(set==false)
    {
        if (x < k/2)
        {
            newset.add(1,0);
        }
        else
        {
            newset.add(0,1);
        }
    }
} 
```

现在你可以选择复杂度为 O(myset.count) 的算法。你的算法比 O(myset.count) 更多，因为你需要 O(myset.count) 来读取你的集合。该解决方案的复杂度为 O(myset.count^2)，您可以根据输入选择算法。比较 O(myset.count^2) 和 o(k)。为了获得更好的解决方案，您可以根据 mod k 对 myset 进行排序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-22T09:59:00.347

我假设对于某些 N，数字集始终是 1 到 N。

考虑前 N-(N mod K) 个数。K 个连续数的形式 floor(N/K) 序列，从 0 到 K-1 减少 mod K。对于每个组，必须删除 floor(K/2) 以获得归约 mod K，它是 floor(K/2) 的另一个子集的否定 mod K。您可以从每组 K 个连续数字中保留上限（K/2）。

现在考虑剩余的 N mod K 数。他们从 1 开始减少 mod K。我还没有计算出确切的限制，但如果 N mod K 小于 K/2 左右，您将能够保留所有这些限制。如果没有，您将能够保留其中的第一个上限（K/2）。

==================================================== =========================

我相信这里的概念是正确的，但我还没有弄清楚所有的细节。

==================================================== =========================

以下是我对问题的分析和答案。在接下来的 |x| 是地板（x）。此解决方案类似于@Constantine 的答案中的解决方案，但在某些情况下有所不同。

考虑第一个 K*|N/K| 元素。它们由 |N/K| 组成 减少模 K 的重复。

一般来说，我们可以包括|N/K| k 模 K 的元素受到以下限制：

如果 (k+k)%K 为零，我们可以只包含一个 k 模 K 的元素。这就是 k=0 和 k=(K/2)%K 的情况，这只能发生在偶数 K 中。

这意味着我们得到 |N/K| * |(K-1)/2| 重复的元素。

我们需要纠正省略的元素。如果 N >= K 我们需要为 0 mod K 元素加 1。如果 K 是偶数且 N>=K/2，我们还需要为 (K/2)%K 个元素加 1。

最后，如果 M(N)!=0，我们需要添加重复元素的部分或完整副本 min(N%K,|(K-1)/2|)。

最终公式为：

```
|N/K| * |(K-1)/2| +
(N>=K ? 1 : 0) +
((N>=K/2 && (K%2)==0) ? 1 : 0) +
min(N%K,|(K-1)/2|) 
```

这与@Constantine 的版本不同，在某些情况下甚至涉及 K。例如，考虑 N=4，K=6。正确答案是 3，即集合 {1, 2, 3} 的大小。@Constantine 的公式给出 |(6-1)/2| = |5/2| = 2\. 上面的公式前两行各取 0，第三行取 1，最后一行取 2，给出正确答案。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-22T10:26:12.697

公式是

```
|N/K| * |(K-1)/2| + ost 

ost =
if n<k:
  ost =0
else if n%k ==0 :
  ost =1    
else if n%k < |(K-1)/2| :
  ost = n%k
else:
  ost = |(K-1)/2| 
```

在哪里 |a/b| 例如 |9/2| = 4 |7/2| = 3

例如 n = 30 , k =7 ;

1 2 3 4 5 6 7
8 9 10 11 12 13 14
15 16 17 18 19 20 21
22 23 24 25 26 27 28
29 30

1 2 3 |4| 5 6 7\. - 是第一行。8 9 10 |11| 12 13 14 - 第二行如果我们在每行中获得前 3 个数字，我们可能会获得该子集的大小。我们也可以从 (7 14 28) 中添加一个数字

获得前 3 个数字 (1 2 3) 是一个数字 |(k-1)/2| . 这一行的编号是|n/k| . 如果没有剩余，我们可以添加一个数字（例如最后一个数字）。如果残差 < |(k-1)/2| 我们得到最后一行的所有数字，否则得到|(K-1)/2|。

感谢例外情况。ost = 0 如果 k>n

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-07T21:46:37.537

## 这是对 ABRAR TYAGI 和 amin k 解决方案的解释。

该解决方案的方法是：

*   创建一个包含 K 个桶的数组 L，并将输入数组 D 中的所有元素分组到 K 个桶中。每个桶 L[i] 包含 D 的元素，使得 ( element % K ) = i。
*   所有能被 K 整除的元素都在 L[0] 中。所以只有这些元素中的一个（如果有的话）可以属于我们的最终（最大）子集。这些元素中的任何两个之和都可以被 K 整除。
*   如果我们将 L[i] 中的一个元素添加到 L[Ki] 中的一个元素，那么总和可以被 K 整除。因此，我们可以仅将这些桶中的一个元素添加到我们的最终集合中。我们选择最大的桶。

代码：d 是包含大小为 n 的初始数字集的数组。这段代码的目标是找到 d 的最大子集的计数，使得没有两个整数之和可以被 2 整除。

l 是一个包含 k 个整数的数组。这个想法是将数组d中的每个（元素）减少到（元素％k）并保存它们在数组l中出现的频率。

例如 l[1] 包含所有元素的频率 % k = 1

我们知道 1 + (k-1) % k = 0 因此必须丢弃 l[1] 或 l[k-1] 以满足没有两个数字 % k 之和应为 0 的标准。

但由于我们需要 d 的最大子集，我们选择 l[1] 和 l[k-1] 中的较大者

我们遍历数组 l 使得 for (i=1; i<=k/2 && i < ki; i++) 并执行上述步骤。

有两个异常值。l[0] 组中任意两个数字的总和 % k = 0。因此，如果 l[0] 非零，则加 1。

如果 k 是偶数，则循环不处理 i=k/2，并使用与上述相同的逻辑将计数加一。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-13T13:10:48.523

```
n,k=(raw_input().split(' '))
n=int(n)
k=int(k)
l=[0 for x in range(k)]
d=[int(x) for x in raw_input().split(' ')]
flag=0
for x in d:
   l[x%k]=l[x%k]+1

sum=0

if l[0]!=0:
    sum+=1 
if (k%2==0):
    sum+=1

if k==1:
    print 1
elif k==2:
    print 2 
else:       
    i=1
    j=k-1
    while i<j:
        sum=sum+(l[i] if l[i]>=l[j] else l[j])
        i=i+1
        j=j-1
     print sum 
```

# firefox - Firefox 的 webdriver 点击事件很慢

> ID：14001635
> 
> 赞同：1
> 
> 时间：2012-12-22T09:23:29.523
> 
> 标签：firefox, onclick, watir-webdriver, performance

我正在使用`ruby 1.8.7`and `watir-webdriver 0.6.1`，发现点击下面的某个链接元素时，下面的脚本很慢，但是在and`windows 2003/2008 server`下同样的脚本很快： `win7``windows2008 R2`

```
log "try table menuitem, sub_menu_area=#{@sub_menu_area.inspect}"
link=@sub_menu_area.link(:text => name, :class => "SGLeftPanelText")  
log link.inspect  
link.fire_event("onclick")   
log "menu link clicked." 
```

日志显示：

```
I, [2012-12-22T01:02:46.944250 #5672] INFO -- : Info: sub_menu_area=#"td", :id=>"tables_cell"}> 

I, [2012-12-22T01:02:46.944250 # 5672] 信息--：信息：尝试表 menuitem，sub_menu_area=#"td"，：id=>"tables_cell"}> 

I，[2012-12-22T01:02:46.944250 #5672] INFO--：信息：# "SGLeftPanelText", :tag_name=>"a", :text=>"Support Cases"}> 

I, [2012-12-22T01:03:03.100500 #5672] INFO -- : Info: 菜单链接被点击。

```

从日志中，点击事件需要`16 secs`，但在另一台机器上`win7`，它只需要`2 secs`，有人可以给我一些建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T13:00:12.300

您是否尝试使用该`click`方法而不是`fire_event`？

尝试更换：

```
link.fire_event ("onclick") 
```

和：

```
link.click 
```

# php - Joomla 管理登录自定义错误

> ID：14001638
> 
> 赞同：2
> 
> 时间：2012-12-22T09:23:43.343
> 
> 标签：php, joomla, joomla2.5, recaptcha

我在 joomla admini 登录部分使用 Google reCAPTCHA，验证工作正常。

验证码添加到`administrator/components/com_login/models/login.php`

```
 $privatekey = "myprivatekey";
 $resp = recaptcha_check_answer (
        $privatekey,
        $_SERVER["REMOTE_ADDR"],
        JRequest::getVar('recaptcha_challenge_field', '', 'method', 'recaptcha_challenge_field'),
        JRequest::getVar('recaptcha_response_field', '', 'method', 'recaptcha_response_field')
    );

 if (!$resp->is_valid) {
    //die('Incorrect Captcha...');
 }else{     
    $credentials = array(
        'username' => JRequest::getVar('username', '', 'method', 'username'),
        'password' => JRequest::getVar('passwd', '', 'post', 'string', JREQUEST_ALLOWRAW)
    );
    $this->setState('credentials', $credentials);
 } 
```

我应该使用什么来代替`//die('Incorrect Captcha...');`输出**Invalid Captcha！**登录页面出错？

![错误样本图像](../Images/0a31abfe4d2803c65637506405033b49.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T09:29:49.187

尝试这个-

```
$app = JFactory::getApplication();
$app->enqueueMessage('Incorrect Captcha...', 'error');
$app->redirect(JURI::base()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T09:31:14.103

当输出无效时，您可以使用它`JError`来显示错误。

例如：

```
JError::raiseError( JText::_( 'Invalid Captcha' )); 
```

有关更多方法，您可以查看此[JError](http://docs.joomla.org/JError/11.1)

# ubuntu - Make xmlrpc-c 上的 SegFault

> ID：14001645
> 
> 赞同：-1
> 
> 时间：2012-12-22T09:24:41.433
> 
> 标签：ubuntu, makefile

我正在尝试安装 xmlrpc-c 但我有这个问题（配置很好）

> make -C include/ -f /home/sampa/tmp/xmlrpc -c//include/Makefile \ all make[1]:进入目录`/home/sampa/tmp/xmlrpc-c/include' make[1]: Nothing to be done for` all'。make[1]: 离开目录`/home/sampa/tmp/xmlrpc-c/include' make -C lib/ -f /home/sampa/tmp/xmlrpc-c//lib/Makefile \ all make[1]: Entering directory`/home/sampa/tmp/xmlrpc-c/lib' make -C util/ -f /home/sampa/tmp/xmlrpc-c/lib/util/Makefile \ all make[2]:进入目录`/home/sampa/tmp/xmlrpc-c/lib/util' gcc -c -DNDEBUG -Wall -W -Wno-uninitialized -Wundef -Wimplicit -Winline -Wno-unknown-pragmas -Wmissing-declarations -Wstrict-prototypes -Wmissing-prototypes -fno-common -g -O3 -Isrcdir/lib/util/include -I/home/sampa/tmp/xmlrpc-c cmdline_parser.c cmdline_parser.c: In function ‘cmd_processOptions’: cmdline_parser.c:297:1: internal compiler error: Segmentation fault Please submit a full bug report, with preprocessed source if appropriate. See <file:///usr/share/doc/gcc-4.6/README.Bugs> for instructions. Preprocessed source stored into /tmp/cc1uevda.out file, please attach this to your bugreport. make[2]: *** [cmdline_parser.o] Error 1 make[2]: Leaving directory`/home/sampa/tmp/xmlrpc-c/lib/util' make[1]: *** [util/all] Error 2 make[1]: Leaving directory `/home/sampa/tmp/xml rpc-c/ lib' make: *** [lib/all] 错误 2

任何想法？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-22T11:06:14.760

将 Ubuntu 升级到 12.04 后解决

# c - 标准c库是否提供链表等数据结构？

> ID：14001652
> 
> 赞同：53
> 
> 时间：2012-12-22T09:27:02.087
> 
> 标签：c, gcc, data-structures, glibc

做标准 C 库实现，特别是**glibc**（GNU C 库）提供链表、堆栈等。数据结构，还是我们必须自己动手？

谢谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-22T09:29:41.623

C 标准不提供链表和堆栈之类的数据结构。一些编译器实现可能会提供自己的版本，但它们的使用在不同的编译器之间是不可移植的。

所以是的，你必须自己写。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-12-22T09:40:42.973

C 标准没有，但 glibc`<sys/queue.h>`根据来自 BSD 而不是 POSIX的[队列手册页提供了列表、尾队列和循环队列。](http://linux.die.net/man/3/queue)

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-12-23T15:12:27.887

glibc 中有哈希表、二叉树和二叉搜索的东西。这些是 C89、C99 和/或 POSIX.1 标准的一部分。某些原因链表不存在。

来自手册页的更多信息：[hsearch](http://linux.die.net/man/3/hsearch)、[tsearch](http://linux.die.net/man/3/tsearch)和[bsearch](http://linux.die.net/man/3/bsearch)

**注意：**其中一些设计不佳。例如：`hsearch`每个进程只允许一个哈希表。GNU 编译器 gcc/glibc 提供可重入版本[`hcreate_r`、`hsearch_r`、 ，并且`hdestroy_r`](http://linux.die.net/man/3/hcreate_r)允许多个哈希表。另请参阅 Stack Overflow 的[如何使用`hcreate_r`](https://stackoverflow.com/questions/10551366/how-to-use-the-gnu-hcreate-r).

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-22T09:29:59.397

因此 C 不提供数据结构，但您可以使用Gnome 提供的[glib](http://developer.gnome.org/glib/stable/)

[Queue.h](http://www.openbsd.org/cgi-bin/cvsweb/src/sys/sys/queue.h)和[Tree.h](http://www.openbsd.org/cgi-bin/cvsweb/src/sys/sys/tree.h)还提供了一些数据结构

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-23T14:03:24.367

POSIX（和 GLibc）中有一个哈希表实现；请参阅 hcreate/hdestroy/hsearch 的手册页。

但是，如前所述，使用 glib 可能是避免重新实现基本数据结构的最简单方法。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-05-29T18:04:58.743

正如其他答案已经说明的那样，标准库中没有链表库。

不久前我写了一个供我自己使用。您可以自由使用它或使用代码作为参考。

你可以在这里找到它：[libllist](http://mellowcandle.github.io/liblist/ "库列表")

# c# - 如何在 Linq 中使用动态创建的字符串作为 WHERE 条件

> ID：14001654
> 
> 赞同：1
> 
> 时间：2012-12-22T09:27:24.990
> 
> 标签：c#, criteria

我必须创建返回 IQueryable 的方法，并且 tor 取决于确切的类型。是否可以准备任何可以在 WHERE 语句之后使用的标准来获得它？

例如，`if T == License i use "c.fkCustomer == Organization.Customer"`

`if T== People`，我使用`"c.fkPeople== Organization.People"`等。

```
XPQuery<T> cQuery = new XPQuery<T>(cSession);
IQueryable CurrQr = from c in cQuery 
                    where "c.fkCustomer == Organization.Customer" 
                    select c; 
```

有人可以提出一些建议，如何实现这个目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T09:45:18.940

我认为你最好在这里使用 lambda 作为参数，而不是动态 linq，例如。

```
public IQueriable<T> MyQuery<T>(Expression<Func<T, bool>> predicate)
{
    return new XPQuery<T>(cSession).Where(predicate)/*and any other bits you want at the moment this is a straight up where clause so kinda pointless*/;
} 
```

那么你可以调用它：

```
MyQuery(c=> c.fkCustomer == Organization.Customer) 
```

或者

```
MyQuery(c=> c.fkPeople == Organization.People) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T09:33:19.800

是的，这是可以做到的。一种方法是使用动态查询库，您可以在此处找到有关如何使用它的详细信息： [http ://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq -part-1-using-the-linq-dynamic-query-library.aspx](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

# arrays - Bash：将数组作为参数传递，然后添加新元素

> ID：14001656
> 
> 赞同：0
> 
> 时间：2012-12-22T09:27:42.660
> 
> 标签：arrays, bash, argument-passing

我想将一个数组作为参数传递给一个函数并向数组中添加一个新元素。然后将数组传递给另一个函数并打印其内容。（所有这些都在 Bash 中。）

```
syntax error near unexpected token `"$2"'
`        $1+=("$2")' 
```

这就是我得到的全部，可能是因为在为变量赋值`$`时无法使用。我不知道如何解决这个问题。你能帮助我吗？

这是我的方法：

```
#/bin/bash

add_element()
{
    $1+=("$2")
}

print_array()
{
    for i in "${$1[@]}"
    do
        echo "$i"
    done
}

declare -a ARRAY

add_element ARRAY "a"
add_element ARRAY "b"
add_element ARRAY "1,2"
add_element ARRAY "d"

print_array ARRAY 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T09:54:47.690

Here's a possibility, using *indirect expansion*.

```
#/bin/bash

add_element()
{
    local a="$1[@]"
    a=( "${!a}" )
    printf -v "$1[${#a[@]}]" "%s" "$2"
}

print_array()
{
    local a="$1[@]"
    printf '%s\n' "${!a}"
}

declare -a array

add_element array "a"
add_element array "b"
add_element array "1,2"
add_element array "d"

print_array array 
```

Comments:

*   It's really ugly. I don't know why you want that. Please realize that bash isn't designed to do things like these. Maybe you want to use php or perl or java or something else instead.
*   Don't use upper-case variable names in bash. It's considered very bad bash practice. It's ugly. It's terrible, especially when it potentially clashes with other variables, and it could be the case here if someone uses the `mapfile` builtin (which by default stores in an array named `ARRAY`).
*   Please consider using something different to achieve what you're trying to. Really, you don't need functions like these in bash.

# ebay-api - 向 eBay API 发出包含多个请求的单个请求

> ID：14001662
> 
> 赞同：0
> 
> 时间：2012-12-22T09:28:49.180
> 
> 标签：ebay-api

我向 eBay API 发送请求以获取我的 eBay 购买。我还想获得有关每个项目的一些额外信息，假设是`itemCondition`和`itemCategory`（父母和孩子）。`GetMyeBayBuyingResponse`不包含这些字段。所以我必须打电话`GetItemRequest` **给每个退回的物品**才能得到它们。

但这很糟糕，需要更多的流量和时间。有没有更有效的方法呢？

我还在 eBay 的某个地方读到，有一种能力可以将多个请求打包到一个请求中，然后发送它以减少流量和工作量。这是真的吗？

**PS**请注意，我不只是询问`itemCondition`和`itemCategory`字段。可能还有其他领域。目标是**只发出一个**包含许多调用的请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T13:55:18.983

有项目数据的调用：

*   如果您是商品的卖家，ebay 建议使用**[GetSellerList](http://developer.ebay.com/devzone/xml/docs/Reference/eBay/GetItem.html)**。
*   如果您想要最近出价/购买的所有物品，可以使用**[GetBidderList](http://developer.ebay.com/devzone/xml/docs/Reference/eBay/GetBidderList.html)**。

对于有很多产品的卖家，ebay 提供[LMS (Marge Merchant Services)](https://www.x.com/developers/ebay/products/large-merchant-services)，但我认为这主要适用于卖家，我认为没有电话检索购买的物品。

# android - 绑定 MediaPlayer 在特定时间播放

> ID：14001664
> 
> 赞同：0
> 
> 时间：2012-12-22T09:28:56.120
> 
> 标签：android, android-mediaplayer, timing

使用 MediaPlayer 时，我注意到每当我的手机卡住时，MediaPlayer 就会出现故障，然后从出现故障的音频位置继续播放。
这对我的实施不利，因为我希望在特定时间播放音频。

如果我有一首 1000 毫秒长度的歌曲，我想要的是能够将 MediaPlayer 设置为在某个特定时间**t**开始播放，然后在时间**t+1000**准确停止。

这意味着我实际上需要两件事：
1）在特定时间以非常小的延迟启动 MediaPlayer。
2) 让 MediaPlayer 出现故障忽略它们出现故障的音频并继续播放以按时完成歌曲。

功能的延迟对我来说非常重要，我需要在应该播放的时间准确播放音频（~）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T21:27:48.103

感谢迈克的回答。但不幸的是，这对我没有帮助。

假设我让 MediaPlayer 在 00:00 开始播放长度为 3:45 的歌曲。
在 01:00，我开始使用手机的资源，由于使用量很大，我的手机出现故障，导致 MediaPlayer 暂停 2 秒。

时间：

00:00-01:00 **-**我在 00:00-01:00 听到了音频
01:00-01:02 **-**我听到了静音，因为电话出现故障
01:02-03:47 **-**我在 01 听到了音频： 00-03:45 with 2 second time skew

现在据我了解，MediaPlayer 在这个问题域上是一个不好的使用选择，因为`MediaPlayer`它提供了一个高级 API。
我目前正在尝试 `AudioTrack`应该为我提供所需内容的课程：

```
//Creating a new audio track
AudioTrack audioTrack = new AudioTrack(...)

//Get start time
long start = System.currentTimeMillis();

// loop until finished
for (...) {
    // Get time in song
    long now = System.currentTimeMillis();
    long nowInSong = now - start;
    // get a buffer from the song at time nowInSong with a length of 1 second
    byte[] b = getAudioBuffer(nowInSong);
    // play 1 second of music
    audioTrack.write(b, 0, b.length);
    // remove any unplayed data
    audioTrack.flush();
} 
```

现在，如果我出现故障，我只会出现 1 秒钟的故障，然后我会通过在正确的时间播放正确的音频来纠正自己！

**笔记**

我还没有测试过这段代码，但它似乎是正确的方法。如果它真的有效，我会再次更新这篇文章。

PS 搜索`MediaPlayer`是： 1\. 肯定会延迟我的音乐的繁重操作（这里每毫秒都很重要） 2\. 不是线程安全的，不能从多个线程中使用（搜索、启动等...）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T04:30:24.877

您可能需要使用`mp.getDuration();`和/或`mp.getCurrentPosition();`尽管不可能确切地知道“我需要在应该播放的时间准确播放音频（~）”是什么意思。

这样的事情应该让你开始：

> ```
>  int a = (mp.getCurrentPosition() + b); 
> ```

# ios - ViewDidLoad 和 ViewDidUnload 总是导致

> ID：14001668
> 
> 赞同：-6
> 
> 时间：2012-12-22T09:29:27.713
> 
> 标签：ios, ios5

请告诉我如何或写什么，以便总是导致 ViewDidLoad ViewDidUnload？

IOS5 和故事板。

阅读了一个类似的主题，但不明白这样做需要什么。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T09:34:09.237

每当加载视图控制器的视图对象时（从 nib、情节提要或手动使用 loadView），都会调用 viewDidLoad。

viewDidUnload 不保证会被调用，实际上在 iOS6 及更高版本中，它甚至不存在。它仅在视图控制器的视图不在屏幕上并且系统处于内存压力下时调用。您不应该有任何*需要*调用的代码。这应该在 dealloc 或 viewDidDisappear 中，具体取决于代码的作用。

# algorithm - 重新平衡任意 BST？

> ID：14001676
> 
> 赞同：46
> 
> 时间：2012-12-22T09:31:07.927
> 
> 标签：algorithm, data-structures, binary-search-tree

**参考：** 我被问到这个问题@MS SDE 面试，第三轮。这不是作业问题。我也考虑了一下，并在下面提到了我的方法。

**问题：** 修改 BST 使其尽可能平衡。不用说，您应该尽可能高效地进行操作。

**提示：** 面试官说这是一个合乎逻辑的问题，如果你有不同的想法就会得到答案。不涉及困难的编码。
--> 话虽如此，我不认为他希望我指向 AVL/RB Trees。

**我的解决方案：** 我建议，我会按顺序遍历树，将中间元素作为新树的根（我们称之为新根）。然后到中间元素的左边，把它的中间元素作为树根新根的左子树的根。同样做正确的部分。递归执行此操作将给出最佳平衡 BST。

**为什么我在这里发布它：** 但他对答案不满意:(那么，真的有办法做到这一点而无需使用权重/RB着色策略，还是他只是在和我开玩笑？请输入你的专家想法。

***复制？不！*** 我知道有这个[问题](https://stackoverflow.com/questions/10439681/balancing-a-binary-search-tree-bst)，但是请求者提出的解决方案太复杂了，另一个人谈到了 AVL 树。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-12-25T05:07:50.683

您可能想研究**[Day-Stout-Warren](http://en.wikipedia.org/wiki/Day%E2%80%93Stout%E2%80%93Warren_algorithm)**算法，它是一种 O(n) 时间、O(1) 空间算法，用于将任意二叉搜索树重塑为完整的二叉树。直观地说，该算法的工作原理如下：

1.  使用树旋转，将树转换为退化链表。
2.  通过对链表应用选择性旋转，将链表转换回完全平衡的树。

该算法的美妙之处在于它以线性时间运行并且只需要恒定的内存开销；实际上，它只是重塑底层树，而不是创建新树并复制旧数据。编写代码也相对简单。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-22T09:46:50.173

“尽可能平衡” =[​​ 完整（或完整）二叉树](http://en.wikipedia.org/wiki/Binary_tree#Types_of_binary_trees)¹。你不能比它更平衡。

解决方案很简单 - 构建一个“空”完整二叉树，并以中序遍历的方式迭代新树和输入树（同时）以填充完整树。

完成后，您可以获得最平衡的树，这种方法的时间复杂度为`O(n)`.

* * *

**编辑：**
这应该按照以下步骤完成：

1.  构建一个带有`n`节点的虚拟完整树。每个节点的所有值都将被初始化为一些垃圾值。
2.  创建两个迭代器：(1)`originalIter`用于原始树，(2)`newIter`用于新的（用垃圾初始化的）树。两个迭代器都将按顺序遍历返回元素。
3.  执行以下操作以使用原始值填充树：

    ```
     while (originalIter.hasNext()):
          newIter.next().value = originalIter.next().value 
    ```

* * *

（1）（来自维基百科）：完全二叉树是一棵二叉树，其中除了可能的最后一层之外，每一层都被完全填满，并且所有节点都尽可能靠左

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-08-30T08:44:06.447

DSW算法可以解决这个是O(n)时间。算法如下：

```
1] Using right-rotation operations, turn the tree into a linked list
   (a.k.a. backbone or vine)
2] Rotate every second node of the backbone about its parent to turn
   the backbone into a perfectly balanced BST. 
```

[参考](http://www.geekviewpoint.com/java/bst/dsw_algorithm "参考")

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-03T11:44:36.340

这会将您的正常 BST 转换为在 O(n) 中具有最小可能高度的平衡 BST。首先，保存所有排序到向量中的节点。然后，根是中间元素，递归地从 0 到 mid-1 构建一棵树作为它的左边，并从 mid+1 到 vector.size()-1 构建一棵树作为它的右孩子。在所有这些步骤之后，根保持平衡的 BST 与最小高度。

```
 import java.util.Vector;

        public class ConvertBSTIntoBalanced {

            public static void main(String[] args) {
                TreeNode node1 = new TreeNode(1);
                TreeNode node2 = new TreeNode(2);
                TreeNode node3 = new TreeNode(3);
                TreeNode node4 = new TreeNode(4);
                node1.right = node2;
                node2.right = node3;
                node3.right = node4;
                ConvertBSTIntoBalanced convertBSTIntoBalanced = new ConvertBSTIntoBalanced();
                TreeNode balancedBSTRoot = convertBSTIntoBalanced.balanceBST(node1);
            }

            private void saveNodes(TreeNode node, Vector<TreeNode> nodes) {
                if (node == null)
                    return;
                saveNodes(node.left, nodes);
                nodes.add(node);
                saveNodes(node.right, nodes);
            }

            private TreeNode buildTree(Vector<TreeNode> nodes, int start, int end) {
                if (start > end)
                    return null;
                int mid = (start + end) / 2;
                TreeNode midNode = nodes.get(mid);
                midNode.left = buildTree(nodes, start, mid - 1);
                midNode.right = buildTree(nodes, mid + 1, end);
                return midNode;
            }

            public TreeNode balanceBST(TreeNode root) {
                Vector<TreeNode> nodes = new Vector<>();
                saveNodes(root, nodes);
                return buildTree(nodes, 0, nodes.size() - 1);
            }

        public class TreeNode {

        public Integer val;
        public TreeNode left;
        public TreeNode right;

        public TreeNode(Integer x) {
            val = x;
        }

    }

        } 
```

我希望它有所帮助。

# symfony - 如何自动更新学说实体的属性？

> ID：14001679
> 
> 赞同：-1
> 
> 时间：2012-12-22T09:31:48.320
> 
> 标签：symfony, doctrine-orm

我在我的 symfony 2 项目中创建了一个学说实体类，现在我想在实体管理器保存之前自动设置一个属性。是否有一些钩子可以实现，或者我该如何解决我的问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T11:22:39.330

是的你可以：

[http://symfony.com/doc/master/book/doctrine.html#lifecycle-callbacks](http://symfony.com/doc/master/book/doctrine.html#lifecycle-callbacks)

```
<?php

namespace MyNS\Dummy;

use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity
 * @ORM\HasLifecycleCallbacks
*/  
class Dummy
{
    protected $property;

    /**
     * @ORM\PrePersist
     * @ORM\PreUpdate
     */
    public function automaticProperty()
    {
        $this->property = 'whatever';
    }
} 
```

# analytics - 如何将 Webtrekk 与 Google 跟踪代码管理器集成

> ID：14001681
> 
> 赞同：0
> 
> 时间：2012-12-22T09:32:23.200
> 
> 标签：analytics, noscript, google-tag-manager

我目前正在使用 Webtrekk 进行分析。

最近，我实施了谷歌标签管理器来管理和整合所有标签。我正在考虑将 Webtrekk 添加到 Google 跟踪代码管理器中，我想知道是否存在任何兼容性问题。

根据[http://support.google.com/tagmanager/answer/2787990](http://support.google.com/tagmanager/answer/2787990)，Google 跟踪代码管理器不支持在代码段或链接的 JavaScript 中使用 document.write 的代码。我发现链接的Javascript（webtrekk_v3.2js）包含“document.write”。

你有什么建议作为解决方法？

我可以只使用标签内的跟踪代码并完全跳过 javascript 吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:53:39.323

"document_write" 仅适用于旧浏览器，不再需要。向 webtrekk 询问最新的 js 版本，并且不再有“document_write”。

我们成功实施了 webtrekk。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-17T13:43:43.570

知道已经晚了，但以防万一有人搜索过：Webtrekk 被 Mapp 收购，现在称为 Mapp Intelligence。有一个名为 Mapp Cloud 的 Google Tag ManagerTemplate 可以使用，更多信息在这里：[https ://documentation.mapp.com/1.0/en/how-to-integrate-mapp-intelligence-with-google-tag-manager- 7239473.html](https://documentation.mapp.com/1.0/en/how-to-integrate-mapp-intelligence-with-google-tag-manager-7239473.html)

# ios - 控制器没有标识符的segue

> ID：14001682
> 
> 赞同：1
> 
> 时间：2012-12-22T09:32:46.293
> 
> 标签：ios, uitableview, didselectrowatindexpath

我用 ctrl 将 UITableViewController 连接到 NavigationController，将 segue 定义为“modal”并定义 segue 标识符“DetailEvent”。

在我的 UITableViewController 类中，我添加了以下代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{    
    NSLog(@"Row Selected = %i",indexPath.row);
    [self performSegueWithIdentifier:@"DetailEvent" sender:self.view];
} 
```

错误：

```
Row Selected = 1
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Receiver (<AvailableEventsController: 0xa335500>) has no segue with identifier 'DetailEvent''
*** First throw call stack:
(0x175b012 0x1580e7e 0x5aa492 0xa6b53fa 0x103a0 0x5778d5 0x577b3d 0xf7ee83 0x171a376 0x1719e06 0x1701a82 0x1700f44 0x1700e1b 0x23ee7e3 0x23ee668 0x4c865c 0xbf7d 0x2755)
libc++abi.dylib: terminate called throwing an exception 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T09:43:32.653

我正在 StoryBoard 中处理不同的 UIViewController。

# android - 有没有办法用 GPS 坐标制作通用意图？

> ID：14001683
> 
> 赞同：0
> 
> 时间：2012-12-22T09:33:03.330
> 
> 标签：android, android-intent, location

在我的应用程序中，当我点击一个地方时，我想触发意图选择器，让用户使用 GPS 坐标进行游戏......

我希望让用户可以在谷歌地图、导航、街景或任何已安装的 GPS 之间进行选择......

到目前为止，这些应用程序中的每一个都可以以不同的意图启动......比如：

**导航：**

```
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("google.navigation:q=" +mLat+","+mLong)); 
```

**谷歌地球：**

```
Intent intent = new Intent(Intent.ACTION_VIEW,
Uri.parse("geo:"
+ "?q="
+ e.latitude
+ ","
+ e.longitude))); 
```

**谷歌地图：**

```
Intent intent = new Intent(Intent.ACTION_VIEW,
Uri.parse("geo:"
+ e.latitude
+ ","
+ e.longitude
+ "?q="
+ e.latitude
+ ","
+ e.longitude))); 
```

**街景：**

有些不同

**导航：**

```
<action android:name="android.intent.action.navigon.START_PUBLIC" />
Location coordinates.
String INTENT_EXTRA_KEY_LATITUDE = "latitude";
String INTENT_EXTRA_KEY_LONGITUDE = "longitude"; 
```

**任何 GPS 应用程序：**

有没有办法为所有这些应用程序使用单一意图并让用户选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T13:58:31.370

> 有没有办法为所有这些应用程序使用单一意图并让用户选择？

大概不会。欢迎您使用`PackageManager`和`queryIntentActivities()`构建您自己的选择器，它结合了各种`Intent`对象的结果。

# ios - sqlite中经纬度的sql更新查询

> ID：14001687
> 
> 赞同：-1
> 
> 时间：2012-12-22T09:33:56.150
> 
> 标签：ios, sql, database, xcode, sqlite

在我的 SQLite DB 中，我有一个表，其中包含每个名称的纬度和经度值

**产品**

id , name (1000 条记录) , latitude(float) , longitude (float)

我必须从课堂上更新我的数据库，但我对运行查询有点困惑。我要做的是：我必须将所有 Lat、Long 值限制为小数点后四位，因此我需要一个查询来更新所有 lat、long 值，以便每个名称的 lat 或 long 值不得大于四位小数.

例如：UPDATE products set products.latitude upto .4f , products.longitude upto .4f where (选择product.latitude,product.longitude from products where latitude value >.4f or longitude value >.4f)

我没有得到确切的查询来做这件事。对此有何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T11:41:11.193

```
UPDATE products
SET latitude = round(latitude, 4),
    longitude = round(longitude, 4) 
```

这只是更新所有记录，因为浮点舍入错误使得无法确定实际位数。（SQLite 没有定点数。）

# php - 搜索引擎错误

> ID：14001688
> 
> 赞同：-2
> 
> 时间：2012-12-22T09:34:00.287
> 
> 标签：php, search-engine

我似乎在下面的代码中遇到了问题。出现的问题是

> “注意：未定义的变量：我在第 21 行的 C:\wamp\www\search\search.php 中”

和

> “警告：mysql_num_rows() 期望参数 1 是资源，布尔值在第 34 行的 C:\wamp\www\search\search.php 中给出”。

第 21 行是`$i++;`

第 34 行是`$num_rows = mysql_num_rows($query)`

```
<body>
    <h2>Search Engine</h2>
    <form action='./search.php' method='get'>
        <input type='text' name='k' size='50' value='<?php echo $_GET['k'] ?>' />
        <input type='submit' value='Search'/>
    </form>
    <hr />
    <?php
    $k = $_GET['k'];
    $terms = explode(" ", $k);
    $query = "SELECT * FROM search WHERE ";

    foreach ($terms as $each){
        $i++;

        if($i == 1)
            $query .= "keywords LIKE '%$each%' ";
        else
            $query .= "OR keywords LIKE '%$each%' ";
    }

    //connect
    mysql_connect("localhost", "root", "password");
    mysql_select_db("search");

    $query = mysql_query($query);
    $num_rows = mysql_num_rows($query);

    if ($num_rows > 0){

        while($row = mysql_fetch_assoc($query)){
            $id = $row['id'];
            $title = $row['title'];
            $description = $row['description'];
            $keywords = $row['Keywords'];
            $link = $row['link'];

            echo "<h2><a href='$link'>$title</a></h2>
            $description<br /><br />";
        }

    }
    else
        echo "No results found for \"<b>$k</b>\"";

    //disconnect
    mysql_close();

    ?>
</body> 
```

有谁知道如何修理它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T09:52:27.933

You are just incrementing the variable which is not assigned yet

```
$i = 1;
foreach ($terms as $each){
        $i++;

        if($i == 1)
            $query .= "keywords LIKE '%$each%' ";
        else
            $query .= "OR keywords LIKE '%$each%' ";
    } 
```

or else simply do

```
foreach ($terms as $each){
        $selects[] = "keywords LIKE '%$each%' ";

}
$query .= implode(" OR ",$selects); 
```

i think this will be the reason for warning `mysql_num_rows()` too

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T09:56:55.150

**错误1：** 使用for循环：

```
foreach ($terms as $each)
{
    //....
} 
```

或者

```
for($i = 0; i < count($terms); i++)
{
    $each = $terms[i];
    //....
} 
```

$i++ 在 foreach 中没用

**错误 2：** 如果用户无权访问查询引用的表，[mysql_query()将失败并返回 FALSE。](http://php.net/manual/en/function.mysql-query.php)所以这是一个修复它的示例代码：

```
$num_rows = 0;
if($query){
    $num_rows = mysql_num_rows($query);
} 
```

# vb.net - VB.NET 禁用表单的淡入

> ID：14001694
> 
> 赞同：1
> 
> 时间：2012-12-22T09:35:20.020
> 
> 标签：vb.net, pinvoke

我想禁用窗口的表单淡入效果。我想我找到了正确的功能

```
<DllImport("dwmapi.dll", PreserveSig:=True)> _
Private Shared Function DwmSetWindowAttribute(ByVal hwnd As IntPtr, ByVal attr As Integer, ByRef attrValue As Integer, ByVal attrSize As Integer) As Integer
End Function 
```

标志应该是

```
DWMWA_TRANSITIONS_FORCEDISABLED 
```

但我不知道如何从 VB.NET 调用它。这是我到目前为止所拥有的：

```
Imports System.Runtime.InteropServices

Public Class Form1

Public Enum DWMWINDOWATTRIBUTE
    DWMWA_ALLOW_NCPAINT = 4
    DWMWA_CAPTION_BUTTON_BOUNDS = 5
    DWMWA_FLIP3D_POLICY = 8
    DWMWA_FORCE_ICONIC_REPRESENTATION = 7
    DWMWA_LAST = 9
    DWMWA_NCRENDERING_ENABLED = 1
    DWMWA_NCRENDERING_POLICY = 2
    DWMWA_NONCLIENT_RTL_LAYOUT = 6
    DWMWA_TRANSITIONS_FORCEDISABLED = 3
End Enum

<DllImport("dwmapi.dll", PreserveSig:=True)> _
Private Shared Function DwmSetWindowAttribute(ByVal hwnd As IntPtr, ByVal attr As Integer, ByRef attrValue As Integer, ByVal attrSize As Integer) As Integer
End Function

Private Sub Form1_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    If Environment.OSVersion.Version.Major >= 6 Then
        DwmSetWindowAttribute Me.Handle, 'here I don't know how to go on...
    End If
End Sub
End Class 
```

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T11:13:13.387

文档[`DWMWA_TRANSITIONS_FORCEDISABLED`](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa969530.aspx)内容如下：

> 与 DwmSetWindowAttribute 一起使用。启用或强制禁用 DWM 转换。pvAttribute 参数指向值 TRUE 以禁用转换或 FALSE 以启用转换。

宏`TRUE`和`FALSE`声明为：

```
#define FALSE 0
#define TRUE  1 
```

所以你需要传递参数`1`。`attrValue`

Windows 原生使用的布尔类型是`BOOL`. 这是这样声明的：

```
typedef int BOOL; 
```

既然`sizeof(int)`是`4`，`attrSize`你需要通过的是`4`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T12:26:25.043

由于属性值参数类型，该函数很尴尬。它使用 void*，这是接受不同大小值的 C 函数的典型特征。这实际上是您可以在 VB.NET 中轻松处理的事情，您可以使用不同类型的参数编写同一函数的不同重载。然后编译器会根据您传递的参数自动确定要调用哪一个。

让我们关注您要更改的特定属性，它是一个 BOOL 值。因此，编写一个采用布尔值的函数的重载，它会自动封送为 BOOL ，而无需您提供帮助：

```
<DllImport("dwmapi.dll")> _
Private Shared Function DwmSetWindowAttribute(ByVal hwnd As IntPtr, _
            ByVal attr As Integer, ByRef attrValue As Boolean, _
            ByVal attrSize As Integer) As Integer
End Function 
```

让我们简化枚举，您只需要其中一个：

```
Private Const DWMWA_TRANSITIONS_FORCEDISABLED As Integer = 3 
```

然后你需要改变你调用这个函数的地方，一个窗口可以被创建多次但Load事件只运行一次。您需要在创建窗口后立即调用它。添加错误处理，以便您可以诊断运行时问题：

```
Protected Overrides Sub OnHandleCreated(ByVal e As System.EventArgs)
    MyBase.OnHandleCreated(e)
    If Environment.OSVersion.Version.Major >= 6 Then
        Dim hr = DwmSetWindowAttribute(Me.Handle, _
                    DWMWA_TRANSITIONS_FORCEDISABLED, True, 4)
        If hr < 0 Then Marshal.ThrowExceptionForHR(hr)
    End If
End Sub 
```

当我测试它时效果很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T09:45:38.313

对我有用的是

```
 If Environment.OSVersion.Version.Major >= 6 Then
        DwmSetWindowAttribute(Me.Handle, DWMWINDOWATTRIBUTE.DWMWA_TRANSITIONS_FORCEDISABLED, 1, 4)
    End If 
```

但这只是一个猜测。我不确定“1”是否代表 YES，也不确定长度 4 在所有情况下是否正确。确认这一点会很棒。谢谢！

# javascript - 使用javascript在splunk中更改onContext

> ID：14001697
> 
> 赞同：0
> 
> 时间：2012-12-22T09:35:44.653
> 
> 标签：javascript, drop-down-menu, splunk

我有一个 splunk 应用程序，现在我想为这些应用程序添加一个 oncontext 更改选项。我有 6 个表格，每个表格都有**单独的下拉列表/下拉列表**，
有人可以帮我创建一个 javascript*（实际上我很困惑是否可以用 javascript 完成）* 以更新所有下拉列表，如果其中任何一个的上下文下拉列表更改，实际上所有下拉列表都填充相同的输入，即源文件名。
请 帮忙
谢谢斯鲁西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:30:56.070

[这很好地解释了它。](http://splunk-base.splunk.com/answers/70764/how-to-have-one-or-more-pulldown-or-textfield-selections-be-sticky-across-all-the-views-in-an-app)感谢你的协助。附加 t 中指定的 javascript

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T04:31:54.310

您甚至不需要自定义 javascript 在 Splunk 中完成此操作。您可以在 Splunk 高级 XML 视图中执行此操作。我建议查看此应用程序中的示例：http: [//splunk-base.splunk.com/apps/64805/splunk-dashboard-examples](http://splunk-base.splunk.com/apps/64805/splunk-dashboard-examples)

# qt - QGradient椭圆混合

> ID：14001699
> 
> 赞同：3
> 
> 时间：2012-12-22T09:35:53.963
> 
> 标签：qt, qpainter

我目前正在使用 QPainter 和 QImage 生成“热图”。我的方法包括用黑色到透明的 QRadialGradients 绘制多个圆圈作为 QBrush（参见“强度图”）。然后我将梯度图应用于强度图以获得所需的“热图”效果（参见“梯度图之后”）。

我遇到的问题（在“渐变图之后”图像中更为明显）是圆圈没有正确混合。圆圈重叠的地方似乎部分混合，但在边缘你可以清楚地看到圆圈结束的地方（几乎是外发光）。我想要一个在圆圈之间没有可见边界并且正确混合的效果。

**强度图**

![强度图](../Images/2339181fcc146a5910f03ef27823f4d5.png)

**梯度图后（不同强度图）**

![渐变映射后](../Images/278a545b8a6aa432b084919ec7cc6a7c.png)

**代码**

```
// Setup QImage and QPainter
QImage *map = new QImage(500, 500, QImage::Format_ARGB32);
map->fill(QColor(255, 255, 255, 255));
QPainter paint(map);
paint.setRenderHint(QPainter::HighQualityAntialiasing);

// Create Intensity map
std::vector<int> record = disp_data[idx]; // Data
for(int j = 1, c = record.size(); j < c; ++j) {
    int dm = 150 + record[j] * 100 / 255; // Vary the diameter

    QPen g_pen(QColor(0, 0, 0, 0));
    g_pen.setWidth(0);
    QRadialGradient grad(sensors[j-1].x, sensors[j-1].y, dm/2); // Create Gradient
    grad.setColorAt(0, QColor(0, 0, 0, record[j])); // Black, varying alpha
    grad.setColorAt(1, QColor(0, 0, 0, 0)); // Black, completely transparent
    QBrush g_brush(grad); // Gradient QBrush
    paint.setPen(g_pen);
    paint.setBrush(g_brush);
    paint.drawEllipse(sensors[j-1].x-dm/2, sensors[j-1].y-dm/2, dm, dm); // Draw circle
}

// Convert to heat map
for(int i = 0; i < 500; ++i) {
    for(int j = 0; j < 500; ++j) {
        int b = qGray(map->pixel(i, j));
        map->setPixel(i, j, grad_map->pixel(b, 0)); //grad_map is a QImage gradient map
    }
} 
```

如您所见，圆圈没有 QPen。我一直在尝试各种混合模式，但没有成功。我还将渲染提示更改为 HighQualityAntialiasing。我也尝试过使圆比径向渐变大得多，因此无法将渐变截断或将边框应用于圆的外部。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T13:08:25.923

我认为这是马赫条纹的一种形式，这是一种视觉错觉，视觉系统会增强亮度的变化，从而导致图像中实际不存在的亮带或暗带的出现。通常这些可以在两个不同区域之间的边界上看到，但在这里的情况下，我相信这是观察到的梯度的明显不连续性。

这里有一些图片来演示这个问题：

第一个图像是在软件中计算的，由三个圆圈组成，每个圆圈都用径向线性渐变绘制。马赫带效应应该在圆之间重叠的边缘可见，因为这些是梯度急剧变化的点。

![灰度，带状](../Images/4752b2c034ec66813026bee6a43bdf4c.png)

第二张图像是*完全相同*的计算，但不是沿半径呈线性，而是将梯度映射到曲线（我使用了第一个 Hermite 基函数）。乐队应该几乎完全消失了：

![灰度，平滑](../Images/2c3c839963611b39fe85eb12d3216e70.png)

至于为什么这会更多地影响彩色图像，我不确定它是否会这样做。我认为在上述情况下，可能由于着色实际上是调色板查找而导致了额外的条带，从而导致了额外的条带。

我在本地进行了大致相同的着色，也简单地映射了一个调色板，效果相似：

![在此处输入图像描述](../Images/6543a4bfb5e86758b51eb5d4f2206516.png) ![在此处输入图像描述](../Images/743e7ff2b2162015c664499b10a5677c.png)

使用 QT 的线性渐变解决这个问题可能并不简单（您可以尝试向渐变添加更多控制点，但您必须添加很多...），但在软件中计算这样的图像并不难. 您还可以考虑其他一些后处理效果，例如添加模糊和/或添加噪点。任何打破梯度不连续性的东西都可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T16:03:03.970

我同意 JasonD 的观点。

此外，请记住 Qt 在 sRGB 颜色空间中进行线性混合，它不是线性的（它应用了 gamma 2.2）。

要做到这一点，您需要在线性光中进行混合或插值，然后转换为 sRGB（应用伽玛）进行显示。

# jquery - 在页面加载而不是单击事件时显示弹出窗口

> ID：14001700
> 
> 赞同：-1
> 
> 时间：2012-12-22T09:35:57.040
> 
> 标签：jquery, popup

我的问题很简单：我有这个弹出代码，我想在页面加载后立即加载。目前它在点击时加载。

```
<script type="text/javascript" src="jquery-1.6.1.min.js"></script>
<script type="text/javascript">

$(document).ready(function(){
//open popup
$("#pop").click(function(){
$("#overlay_form").fadeIn(1000);
positionPopup();
});

//close popup
$("#close").click(function(){
$("#overlay_form").fadeOut(500);
});
}); 
```

我的完整代码位于此处-`http://jsfiddle.net/VVZch/1/`

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T09:38:47.620

只需将您的弹出代码保留在点击功能之外

```
$(document).ready(function(){
//open popup
var popupFun=function(){
$("#overlay_form").fadeIn(1000);
positionPopup();
}
popupFun();
//to add on click event also
$("#pop").click(function(){popupFun()};

//close popup
$("#close").click(function(){
$("#overlay_form").fadeOut(500);
});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T09:39:07.640

如果您想在不单击的情况下加载弹出窗口，为什么不删除单击事件

然后写

```
$("#overlay_form").fadeIn(1000); 
positionPopup(); 
```

# node.js - node npm local install 将文件放入 ~/node_modules

> ID：14001702
> 
> 赞同：1
> 
> 时间：2012-12-22T09:36:26.137
> 
> 标签：node.js, installation, package, npm

当我使用**npm install**命令安装软件包时，它会将文件安装到 ~/node_modules 中。当我运行包时，我得到**command not found**错误。

如何将它安装到我要调用包的文件夹中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T10:08:54.090

```
npm install <name_of_package> -g 
```

这将全局安装包。如果该程序在您的 中`PATH`，那么您应该能够像运行任何其他程序一样运行它。

例如： `npm install nodemon -g`

然后`nodemon`从命令提示符运行，它应该可以工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-30T02:23:31.447

如果您不想全局安装，正确答案是选中答案中的最后一条评论：

只需将 ./node_modules/.bin 添加到您的 PATH 中，npm 本地安装的所有命令都将可用。– H_I 2012 年 12 月 24 日 9:54

您可以使用以下命令将其添加到 .bashrc 文件中的路径：export PATH="$PATH:/home/login/node_modules/.bin"

重新加载你的 .bashrc 使用： source .bashrc

# c++ - 将 tr1::function 转换为 void*

> ID：14001709
> 
> 赞同：2
> 
> 时间：2012-12-22T09:36:39.573
> 
> 标签：c++

我有以下 tr1::function 原型，我试图将其转换为 void*：

```
typedef std::tr1::function<cv::Mat (const cv::Mat,const void*)> preprocessingFunc; 
```

在这个函数中，我将它存储在一个向量中，该向量包含表示函数类型和函数指针的结构：

```
void ImageGraph::addNode(preprocessingFunc func)
{
    NodeFunction nodeFunction = { typeid(func), (void*)func };
    //nodes.push_back(nodeFunction);
} 
```

我得到的错误：

> ImagePipeline.cpp：在成员函数“void IP::ImageGraph::addNode(IP::preprocessingFunc)”中：ImagePipeline.cpp:32：错误：从类型“IP::preprocessingFunc”到类型“void*”/usr 的无效转换/include/c++/4.2.1/typeinfo:135: 错误：'std::type_info::type_info(const std::type_info&)' 是私有的 ImagePipeline.cpp:32: 错误：在此上下文中

是否可以将此函数类型转换为指针（void *）？如果没有，有没有更好的方法来实现我正在做的事情？

为了清楚起见，我存储了函数指针以供以后调用，它们目前是 3 种类型的函数指针，但是我想将它们全部存储在同一个向量中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T11:42:22.500

指向成员函数的指针不能存储在函数指针中，因为本质上，成员函数有一个隐藏参数（“this”指针）。

有两种解决方案：要么是真正的“指向成员函数的指针”（这需要正确类型的函数指针），要么将函数设为静态，并将对象本身作为指针传入（例如 void）。

对我来说，这似乎是一种奇怪的解决方案，我认为有更好的解决方案，例如使用接口类，并将您的接口对象添加为“节点”，也许？

有关“指向成员函数的指针”的更多信息，请查看此处： http: [//www.parashift.com/c++-faq/fnptr-vs-memfnptr-types.html](http://www.parashift.com/c++-faq/fnptr-vs-memfnptr-types.html)

但是鉴于下面的评论，您实际上是在尝试将对象存储在指针中。这类似于`(void *)3.1415926;`- 它没有意义。您可能不应该在此处使用 void * ，而是使用其他东西，例如指向 function<> [并更改您的 addNode 以获取指向 preprocessingFunc 对象的指针]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T13:16:46.480

你似乎从错误的一端接近它。你为什么用`void*`？您声明您有“当前 3 种类型的函数指针”。要存储可调用的东西，请使用`tr1::function<>`. 它可以从最合理的来源初始化：函数指针、指向成员函数的绑定指针、函子，显然还有`tr1::function`其他

# java - mysql批量更新限制

> ID：14001714
> 
> 赞同：2
> 
> 时间：2012-12-22T09:37:40.560
> 
> 标签：java, spring, batch-updates

`batchUpdate()`中的函数是否有最大记录限制`SimpleJdbcTemplate`？链接[在这里](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/jdbc/core/simple/SimpleJdbcTemplate.html)。

我需要一次插入大约 100,000 条记录。目前我在以下行中超时

```
MapSqlParameterSource[] batchArgs = batchArguements.toArray(new MapSqlParameterSource[0]);
simpleJdbcTemplate.batchUpdate(SQL_INSERT, batchArgs); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-22T11:50:01.657

这是我们使用的类。有关说明，请参见 Javadoc：

```
import java.util.ArrayList;
import java.util.List;
import javax.persistence.EntityManager;
import javax.persistence.Query;
import org.apache.commons.collections.CollectionUtils;
import org.apache.commons.lang.StringUtils;
import com.google.common.base.Function;

/**
 * Performs a MySQL bulk insert.
 * <p>
 * A MySQL bulk insert statement allows for performing multiple insertions with
 * one insert statement:
 * 
 * <pre>
 *     INSERT INTO tbl (col1, col2, ..., colN) VALUES
 *        (val1.1, val1.2, ..., val1.N),
 *        (val2.1, val2.2, ..., val2.N),
 *           ...,
 *        (valM.1, valM.2, ..., valM.N);
 * </pre>
 * </p>
 * 
 * @param <T> the entity type to work on.
 */
public class MySqlBulkInsert<T extends Object> {
  private final EntityManager entityManager;
  private final String tableName;

  /**
   * Constructor.
   * 
   * @param entityManager the entity manager
   * @param tableName the name of the table
   */
  public MySqlBulkInsert(final EntityManager entityManager, final String tableName) {
    this.entityManager = entityManager;
    this.tableName = tableName;
  }

  /**
   * Executes the bulk insert.
   * 
   * @param entities the entities to insert
   * @param csvColumns the columns to insert as a comma separated values string
   * @param entityToValuesFunction the entity to values function.
   * Please note: Values have to be correct formatted. For example String values
   * must contain apostrophes.
   * @return the number of records inserted
   */
  public int execute(List<T> entities,
      String csvColumns,
      Function<T, Object[]> entityToValuesFunction) {
    return execute(entities, csvColumns.split("\\s*,\\s*"), entityToValuesFunction);
  }

  /**
   * Executes the bulk insert.
   * 
   * @param entities the entities to insert
   * @param columns the columns to insert
   * @param entityToValuesFunction the entity to values function
   * Please note: Values have to be correct formatted. For example String values
   * must contain apostrophes.
   * @return the number of records inserted
   */
  public int execute(List<T> entities,
      String[] columns,
      Function<T, Object[]> entityToValuesFunction) {
    if (CollectionUtils.isEmpty(entities)) {
      return 0;
    }

    final StringBuilder sql = new StringBuilder();
    sql.append("insert into ");
    sql.append(tableName);
    sql.append(" (");
    sql.append(StringUtils.join(columns, ','));
    sql.append(") values ");
    List<String> records = new ArrayList<String>();
    for (T entity : entities) {
      Object[] values = entityToValuesFunction.apply(entity);
      String csvValues = StringUtils.join(values, ',');
      if (columns.length != values.length) {
        throw new IllegalArgumentException("Number of values doesn't match number of columns ("
            + columns.length + "): " + csvValues);
      }
      records.add("(" + csvValues + ")");
    }
    sql.append(StringUtils.join(records, ','));
    Query query = entityManager.createNativeQuery(sql.toString());
    return query.executeUpdate();
  }
} 
```

# grails - 在 gsp 中显示字节数组

> ID：14001718
> 
> 赞同：1
> 
> 时间：2012-12-22T09:38:44.750
> 
> 标签：grails, grails-orm

我想遍历这个类并显示在一个表格中。显示图像的最简单方法是什么？

```
class Crop {
    static hasMany = [diseases: Disease]
    int id
    String commonName
    String scientificName
    byte[] image
}

static mapping = {
    table: 'Crops'
    commonName length : 100
    scientificName length: 100
    image sqlType: "longblob"
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T11:33:49.087

如果您不介意缺乏浏览器兼容性，您可以使用`data:`uri 编码：

```
<img src="data:image/png;base64,${crop.image.encodeBase64()}"/> 
```

请参阅有关[数据 URI 编码方案的 Wikipedia 页面](http://en.wikipedia.org/wiki/Data_URI_scheme#Format)

@Xeon 建议使用更传统的方法，即创建一个控制器，该控制器返回具有正确 mime 类型和字节数组作为主体的图像响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T11:26:11.323

[您可以执行与此答案](https://stackoverflow.com/a/943751/639753)相同的操作。

或者您可以创建从您的实体提供图像数据流的控制器。在 GSP 上，您可以编写：

```
<img src="${request.contextPath}/imageController/actionName?id=${entity.id}" ... 
```

但这是不寻常的——将图像存储为`byte[]`. 您应该考虑将其更改为`String`指示图像的路径/文件名。

# c++ - 多次更新同一个变量

> ID：14001731
> 
> 赞同：2
> 
> 时间：2012-12-22T09:41:01.100
> 
> 标签：c++, while-loop, cin

> **可能重复：**
> [两次使用 cin 的问题](https://stackoverflow.com/questions/2525352/problem-of-using-cin-twice)

这段代码有效，但不是我想要的。每次我想通过`1`在命令提示符下按输出来输入新工资时，都会变成这样：

```
Comic books             : USD Input error! Salary must be in positive integer. 
```

代码应该在第 4 行停止，`cout<<"\n\nComic books\t\t: USD ";`但它只是使用内部 while 循环执行。这是代码：

```
 double multiplePay =0;

    cout<<"\n\nEnter employee pay for each job";
    while (1){
    cout<<"\n\nComic books\t\t: USD ";
    //cin.get(); if enable, the first user input will be 0\. this is not working.

    std::string comic_string;
    double comic_double;
    while (std::getline(std::cin, comic_string))
    {
        std::stringstream ss(comic_string); // check for integer value

        if (ss >> comic_double)
        {
            if (ss.eof())
            {   // Success so get out
                break;
            }
        }

        std::cout << "Input error! Salary must be in positive integer.\n" << std::endl;
        cout<<"Employee salary\t: ";
    }

    comic = strtod(comic_string.c_str(), NULL);

        multiplePay = comic + multiplePay; // update previous salary with new user input
        cout << multiplePay;
    cout << "Add other pay?"; // add new salary again?
    int y;

    cin >> y;
    if (y == 1){

        cout << multiplePay;
    }
    else{
        break;
    }
    } // while

cout << multiplePay;  //the sum of all salary 
```

使用`cin.get()`会解决问题，但是第一个用户的薪水输入会变成`0`并且只计算下一个输入。请帮帮我。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T09:47:40.067

您的问题是`cin >> y;`它将读取一个 int，但将行尾留`\n`在输入缓冲区中。下次你使用`getline`时，它会立即找到这个行尾，不再等待任何输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T09:45:53.500

[`std::basic_ios::eof()`](http://en.cppreference.com/w/cpp/io/basic_ios/eof)(in `ss.eof()`) 不起作用，因为您可能认为它起作用。

```
 if (ss >> comic_double)
    {
        if (ss.eof())
        {   // Success so get out
            break;
        }
    } 
```

`ss.eof()``ss.get()`仅当由于您位于文件末尾而导致调用或其他提取失败时才为真。光标当前是否位于末尾并不重要。

请注意，您可以使用以下方法轻松解决此问题`ss.get()`：

```
 if (ss >> comic_double)
    {
        ss.get(); // if we are at the end ss.eof() will be true after this op

        if (ss.eof())
        {   // Success so get out
            break;
        }
    } 
```

# android - OpenGL 中的 2D 游戏 - 坐标

> ID：14001734
> 
> 赞同：0
> 
> 时间：2012-12-22T09:41:20.460
> 
> 标签：android, opengl-es

我怎样才能像在 2D 游戏中那样做坐标（所以 X = 0 Y = 0 在右上角）？左边是这样的： ![在此处输入图像描述](../Images/43a259cab86cbc0501829d6925c9261c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T10:05:44.230

You simply have to use some formulas to convert between the two coordinate systems.

```
openGL_x = (screen_x - width/2)/(width/2)   == a*x + b;
openGL_y = (height/2 - screenY)/(height/2)  == c*y + d; 
```

With openGL you can embed these two linear equations into the ViewMatrix and work with pixel coordinates.

# javascript - Java脚本到jquery mobile：提交点击时更改值？

> ID：14001735
> 
> 赞同：2
> 
> 时间：2012-12-22T09:41:19.307
> 
> 标签：javascript, jquery, html, jquery-mobile, mobile

你好 Stackoverflow 人！

我正在使用最新的 jquery mobile (1.2.0) 制作一个移动网站。我有一个表单，我希望提交按钮在单击时更改文本/值。我有一个在空 html 页面中工作的代码：

```
<body>
    <form method="get" action="/show.php?" target="showframe">
        <select name="week">
            <option value="1">Week</option>
        </select>
        <select name="id">
            <option value="1">ID</option>
        </select>
        <input type="hidden" name="type" value="2">
        <input type="submit" value="Load" id="show" onclick="javascript:document.getElementById('show').value='Refresh'"> 
    </form>
    <iframe id="showframe" width="100%" height="1000px" frameborder="0" scrolling="no" sandbox="allow-forms"></iframe>
<body> 
```

但是当我复制并通过我的 jquery 页面中的 submut 按钮时，它不会改变值。我的问题是：我如何让它在 jquery mobile 中工作？什么是替代方案？

提前致谢

编辑：

我试过jivings的答案，就是这样：

```
<html>

<head>
    <title>Infoweb Mobiel - Dominicus College</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/jquery.mobile-1.2.0.min.css" />
    <link rel="stylesheet" href="css/layout.css" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
    <script src="js/jquery.min.js"></script>
    <script src="js/jquery.mobile-1.2.0.min.js"></script>
    <script src="js/style.js"></script>
    <script>
        $("#show").click(function () {
            $(this).val('Refresh');
        });
    </script>
</head>

<body>
    <form method="get" action="/show.php?" target="showframe">
        <select name="week">
            <option value="1">Week</option>
        </select>
        <select name="id">
            <option value="1">ID</option>
        </select>
        <input type="hidden" name="type" value="2">
        <input type="submit" value="Load" id="show" $("#show").button("refresh");> 
    </form>
    <iframe id="showframe" width="100%" height="1000px" frameborder="0" scrolling="no" sandbox="allow-forms"></iframe>
<body> 
```

但它不起作用..我认为我做错了什么。我必须在哪里以及如何放置`$("#show").button("refresh");`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T09:59:45.357

这是因为您看到的文本实际上并不是按钮元素的一部分。JQuery Mobile 用它自己的元素填充按钮以创建您看到的样式。如果您希望它在进行更改时刷新这些元素，那么您需要调用`refresh()`按钮上的方法：

```
$("#show").button("refresh"); 
```

此外，由于这是 jQuery，您应该正确使用处理程序。您的 onclick 应该与 JavaScript 逻辑的其余部分一起使用，无论是在外部文件中`head`还是在外部文件中，如下所示：

```
$("#show").click(function() {
   $(this).val('Refresh');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T16:36:53.793

首先你需要了解一些关于 jQuery Mobile 的知识：

*   您在 EDIT 部分所做的事情是错误的，您不能在 HTML 块中使用 $("#show").button("refresh") 。Java 脚本不能与这样的 HTML 混合。

*   这是一个应该如何工作的例子：http: [//jsfiddle.net/Gajotres/K8nMX/](http://jsfiddle.net/Gajotres/K8nMX/)。

代码：

```
 $('#index').live('pagebeforeshow',function(e,data){    
        $(document).on('click', '#show', function(){
            $('#show').attr('value','Show');
            $('#show').button("refresh");
            $('#custom-form').submit();
        });    
    }); 
```

在我的示例中，***索引***是我的 jQuery Mobile 页面的 id。***Pagebeforeshow***是在页面可以显示之前触发的事件：

```
 $('#index').live('pagebeforeshow',function(e,data){ 
```

您的按钮类型已更改为按钮。原因是，当表单将数据提交到 php 服务器时，您不能更改按钮文本（或其他任何内容）：

```
 <input type="button" value="Load" id="show"> 
```

这就是为什么我们将点击事件绑定到这一行中的按钮：

```
 $(document).on('click', '#show', function(){ 
```

下一行，我们正在更改按钮文本：

```
 <input type="button" value="Load" id="show"> 
```

因为这是一个 jQuery Mobile 样式的按钮，我们需要刷新他，以便可以应用新样式：

```
 $('#show').button("refresh"); 
```

最后我们触发表单提交：

```
 $('#show').button("refresh"); 
```

在继续之前，请阅读这篇文章：http: [//jquerymobile.com/test/docs/api/events.html](http://jquerymobile.com/test/docs/api/events.html)。在那里，您将找到您需要了解的有关 jQuery Mobile 页面事件的所有信息。

另请阅读这篇关于 jQuery Mobile 页面剖析的文章：http: [//jquerymobile.com/test/docs/pages/page-anatomy.html](http://jquerymobile.com/test/docs/pages/page-anatomy.html)

由于您是此页面的新手，请查看[本文](https://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work)，它将帮助您在未来获得更好的响应。我希望这是对您问题的回答。如果您有更多问题，请随时发表评论。

# javascript - 使用 JavaScript 对动态创建的 HTML 表的列进行排序

> ID：14001737
> 
> 赞同：1
> 
> 时间：2012-12-22T09:41:33.190
> 
> 标签：javascript

我正在寻找可以帮助我对动态创建的 html 表的列进行排序的代码。在我的代码中，html 表是在 Web 服务中动态创建的，我需要对列进行排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T10:18:50.837

[jQuery tablesorter 插件](http://tablesorter.com/docs/)非常好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T10:24:05.773

如果表格内容不是由 javascript 生成的，我建议最好在服务器端脚本进行排序，然后加载排序后的表格内容。

或者如果内容是由 javascript 或 ajax 调用生成的，那么尝试使用插件而不是重新发明轮子[看看 datatables](http://www.datatables.net/)一个 JQuery 插件。

# wpf - WPF Tab_selectionChanged

> ID：14001739
> 
> 赞同：0
> 
> 时间：2012-12-22T09:42:04.767
> 
> 标签：wpf, tabcontrol

我目前面临这个奇怪的问题。

我创建了一个基于 WPF 页面导航的 WPF 应用程序。我有几个按钮，根据按钮单击，用户将导航到相应的 WPF 页面。

在这些 WPF 页面中，我有 Tab 控件并使用 selectionchanged 事件处理程序来执行某些任务。

现在谈到这个问题，

当我尝试转到特定页面时，甚至在页面完全加载之前也会执行 selectionchanged 事件，我尝试使用 windows.loaded （基于对我之前的问题提供的答案 -[这里](https://stackoverflow.com/questions/12946854/wpf-page-navigationservice-how-to-load-ui-completely-before-executing-page-eve/12946879#12946879)） - 我没有运气.

[我正在使用 WPF 导航框架]

不知何故， selectionchanged 事件执行了两次。

我该如何阻止这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T09:52:50.233

I think you should check `SelectionChange.AddedItems` and `SelectionChange.RemovedItems` to find the difference between these to firings. I guess that when you select a page, `SelectionChange.RemovedItems==0` while when you click on a tabItem to select it, `SelectionChange.RemovedItems==1`. if so just write:

```
if (SelectionChange.RemovedItems==0)
return; 
```

**Edit1: Please see the first comment.**

**Edit 2**

```
void tablcontrol_SelectionChange(object sender, SelectionChangedEventArgs e)
{
     if (e.RemovedItems.Count == 0)
     {
          // I guess this is the event that happens when a page is selected
          // in this case just a TabItem is added to the selection 
          // and nothing is removed, so do nothing
          return; 
     }

     // if you are here, it means that this is another selection changed event
     // so Perform those tasks that you mentioned in your question
} 
```

# c# - 关闭后如何从项目集合中删除智能部分？

> ID：14001740
> 
> 赞同：0
> 
> 时间：2012-12-22T09:42:10.743
> 
> 标签：c#, scsf

我在 SCSF 项目中工作，并`TabWorkSpace`使用以下代码添加了多个视图：

```
ControlledWorkItem<MyController> controller;
                controller = WorkItem.Items.AddNew<ControlledWorkItem<MyController>>();
                controller.Controller.Run(WorkItem.Workspaces[WorkspaceNames.RightWorkspace]);
                controller.Activate(); 
```

当我单击它时我有一个按钮，它将使用以下代码关闭所有打开的选项卡：

```
foreach (var item in WorkItem.RootWorkItem.Workspaces[WorkspaceNames.RightWorkspace].SmartParts)
{
    itemToclose = (UserControl)item;
    if (itemToclose.InvokeRequired)
    {
        itemToclose.Invoke(new MethodInvoker(delegate
        {
            WorkItem.RootWorkItem.Workspaces[WorkspaceNames.RightWorkspace].Close(itemToclose);
        }));
    }
} 
```

单击该按钮后，所有智能部件都将关闭，但仍会在 Items 集合中找到。
如何在项目集合中删除这些智能部件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:33:38.503

根据您提供的代码，最简单的解决方案是在您的委托中添加 WorkItem.RootWorkItem.Items.Remove(itemToClose)。

您应该注意的一件事是，您的基础 Presenter 类（如果您使用 SCSF 指导创建模块）包含一个 Dispose 方法，该方法从工作项的 Items 集合中删除相关视图。

他们设置它的方式是，当属于特定工作项的所有工作区都关闭时，我调用 Workitem.Dispose 以确保从集合中删除所有 SmartPart。

希望这可以帮助！

# arrays - 列表和数组有什么区别？

> ID：14001741
> 
> 赞同：12
> 
> 时间：2012-12-22T09:42:16.297
> 
> 标签：arrays, perl, list

在[这个](http://www.tutorialspoint.com/perl/perl_arrays.htm)页面上，它展示了如何初始化一个数组，如果你向下滚动一点，在名为“列表”的部分下，它会“解释”什么是列表以及它们与数组的不同之处。

除了它使用了一个与声明数组完全相同的示例，并且没有对其进行任何解释。

有什么不同？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-22T20:00:12.693

看看[`perldoc -q "list and an array"`](http://learn.perl.org/faq/perlfaq4.html#What-is-the-difference-between-a-list-and-an-array-)。最大的区别是数组是一个*变量*，但是 Perl 的所有数据类型（标量、数组和散列）都可以提供一个*列表*，它只是一组有序的标量。

考虑这段代码

```
use strict;
use warnings;

my $scalar = 'text';
my @array = (1, 2, 3);
my %hash = (key1 => 'val1', key2 => 'val2');

test();
test($scalar);
test(@array);
test(%hash);

sub test { printf "( %s )\n", join ', ', @_ } 
```

输出这个

```
(  )
( text )
( 1, 2, 3 )
( key2, val2, key1, val1 ) 
```

Perl 子例程将*列表*作为其参数。在第一种情况下，列表是空的；在第二个中它有一个元素`( $scalar)`；在第三个中，列表的大小与`@array`和 contains相同`( $array[0], $array[1], $array[2], ...)`，在最后一个中，它的bug 是和 contains中元素数量的*两倍*。`%hash``( 'key1', $hash{key1}, 'key2', $hash{key2}, ...)`

很明显，该列表可以通过多种方式提供，包括标量变量、标量常量和子例程调用的结果的混合，例如

```
test($scalar, $array[1], $hash{key2}, 99, {aa => 1, bb => 2}, \*STDOUT, test2()) 
```

我希望很清楚这样的列表与数组有很大不同。

*将数组视为列表变量*会有所帮助吗？区分标量文字和标量变量很少有问题。例如：

```
my $str = 'string';
my $num = 99; 
```

很明显，`'string'`and`99`是文字，而`$str`and`$num`是变量。这里的区别是一样的：

```
my @numbers = (1, 2, 3, 4);
my @strings = qw/ aa bb cc dd /; 
```

其中`(1, 2, 3, 4)`和`qw/ aa bb cc dd /`是列表文字，而`@numbers`和`@strings`是变量。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-22T09:43:54.840

[**实际上，这个问题在Perl 的 FAQ**](http://learn.perl.org/faq/perlfaq4.html#What-is-the-difference-between-a-list-and-an-array)中得到了很好的回答。列表是在 Perl 源代码中组织数据的（一种）方法。数组是存储数据的*一种*类型；哈希是另一个。

区别在这里很明显：

```
my @arr = (4, 3, 2, 1);
my $arr_count  = @arr;
my $list_count = (4, 3, 2, 1);

print $arr_count, "\n"; # 4
print $list_count;      # 1 
```

乍一看，这里有两个相同的列表。但是请注意，只有分配给`@arr`变量的那个才能通过标量分配正确计数。`$list_count`商店 1 - 使用运算符评估表达式的结果（`comma`基本上为我们提供了该枚举中的最后一个表达式 - 1）。

请注意，列表运算符/函数和数组运算符/函数之间存在细微（但非常重要）的区别：前者是杂食动物，因为它们不会更改源数据，而后者则不会。例如，您可以安全地切片并加入您的列表，如下所示：

```
print join ':', (4,2,3,1)[1,2]; 
```

...但试图“弹出”它会给你一个很有说服力的信息：

```
pop (4, 3, 2, 1);
### Type of arg 1 to pop must be array (not list)... 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-22T18:06:14.810

数组是一种变量。它在单调递增的索引处包含 0 个或多个标量。例如，以下创建数组`@a`：

```
my @a; 
```

作为变量，您可以操作数组。您可以添加元素，更改元素的值等。

* * *

“列表”意味着很多东西。它的两个主要用途是引用列表值和列表运算符的实例。

列表值是堆栈上零个或多个标量的有序集合。例如，以下代码中的 sub 返回要分配给`@a`（数组）的列表。

```
my @a = f(); 
```

列表值不能被操纵；它们被传递给它们的任何操作员全部吸收。它们就是在 subs 和操作符之间传递值的方式。

* * *

列表运算符 ( `,`) 是一个 N 元运算符*，它依次计算其每个操作数。在列表上下文中，列表运算符返回一个列表，该列表由其操作数返回的列表的合并组成。例如，以下代码段中的列表运算符返回由数组的所有元素组成的列表值`@a`和`@b`：

```
my @c = ( @a, @b ); 
```

（顺便说一句，parens 不会创建列表。它们只是为了覆盖优先级。）

您不能操纵列表运算符，因为它是代码。

* * *

* - 文档说它是一个二元运算符（至少在标量上下文中），但事实并非如此。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-22T21:23:42.457

差异的简单演示。

```
sub getarray{ my @x = (2,4,6); return @x; }

sub getlist { return (2,4,6); } 
```

现在，如果你这样做：

```
 my @a = getarray();
 my @b = getlist(); 
```

然后`@a`和`@b`都将包含相同的值 - 列表`(2,4,6)`。但是，如果您这样做：

```
my $a = getarray();
my $b = getlist(); 
```

然后`$a`将包含值 3，而`$b`将包含值 6。

所以是的，您可以说数组是包含列表值的变量，但这并不能说明全部情况，因为数组和文字列表有时的行为完全不同。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-18T09:18:18.567

列表是逗号分隔值 (csv) 或表达式 (cse)。数组（和哈希）是容器。

可以通过列表初始化数组或哈希：

```
@a = ("profession", "driver", "salary", "2000");
%h = ("profession", "driver", "salary", "2000"); 
```

可以返回一个列表：

```
sub f {
    return "moscow", "tel-aviv", "madrid";
}

($t1, $t2, $t3) = f();
print "$t1 $t2 $t3\n"; 
```

($t1, $t2, $t3) 是标量容器 $t1, $t2, $t3 的列表。

列表是编写 perl 表达式的一种形式（语法的一部分），而数组是数据结构（内存位置）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-04-07T01:34:10.393

列表和数组之间的区别让很多人感到困惑。Perl 本身错误地命名了它的内置函数[wantarray()](http://perldoc.perl.org/functions/wantarray.html)：“这个函数应该被命名为 wantlist() 。” perlfaq4 中有一个答案，[“列表和数组有什么区别？”](http://perldoc.perl.org/perlfaq4.html#What-is-the-difference-between-a-list-and-an-array%3F) ，但这并没有结束我的困惑。

我现在相信这些是真的：

*   标量上下文中的数组成为其元素的计数。
*   标量上下文中的*逗号运算符*返回最后一个元素。
*   您不能引用列表；`\(2, 4, 6)`返回对列表中标量的引用列表。您可以使用`[2, 4, 6]`来引用匿名数组。
*   如果您制作列表切片，则可以索引列表（以获取其第*n*个元素）而不制作数组，`(2, 4, 6)[1]`4 也是如此。

但是如果我想计算列表中的元素，或者获取数组的最后一个元素怎么办？我应该以某种方式在数组和列表之间进行转换吗？

您始终可以使用语法**将列表转换为数组。**`[...]`计算列表中元素的一种方法是创建一个匿名数组，然后立即在标量上下文中取消引用它，如下所示：

```
sub list { return qw(carrot stick); }
my $count = @{[list()]};
print "Count: $count\n";  # Count: 2 
```

另一种方法是使用列表赋值运算符，如下所示：

```
sub list { return qw(carrot stick); }
my $count = (()=list());
print "Count: $count\n";  # Count: 2 
```

这段代码中*没有数组*，但是列表赋值运算符返回被赋值的事物的数量。我将它们分配给一个空的变量列表。在代码高尔夫中，我编写`()=$str=~/reg/g`来计算某个字符串中的正则表达式匹配。

您无需**将数组转换为列表**，因为列表上下文中的数组已经是列表。如果您想要数组的最后一个元素，只需说`$array[-1]`.

逗号运算符将返回列表的最后一个元素，但我不能使用它来获取数组的最后一个元素。如果我`((),@array)`在标量上下文中说，那么`@array`是在标量上下文中，我得到了计数。

您无需创建数组来**索引列表**。您可以创建一个匿名数组，如 中`[list()]->[1]`，也可以创建一个列表切片，如中`(list())[1]`。我在使用列表切片时遇到了麻烦，因为它们有不同的语法。列表切片需要括号！在 C 或 Python 或 Ruby 中，`func()[1]`会对函数的返回值做数组索引，但在 Perl 中，`func()[1]`是语法错误。你必须说`(func())[1]`。

例如，我想打印数组中第三大的数字。因为我很懒，所以我对数组进行排序并取倒数第三个元素：

```
my @array = (112, 101, 114, 108, 32, 104, 97, 99, 107);
print +(sort { $a <=> $b } @array)[-3], "\n";  # prints 108 
```

一元`+`防止 print() 函数窃取我的括号。

您可以在数组上使用列表切片，如`(@array)[1]`. 这是有效的，因为数组是一个列表。列表和数组的区别在于数组可以做`$array[1]`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-19T07:41:43.897

**数组与列表**

列表是一种不同于数组的数据结构。

最大的区别在于直接访问与顺序访问的思想。数组允许两者；直接和顺序访问，而列表只允许顺序访问。这是因为这些数据结构存储在内存中的方式。

此外，列表的结构不像数组那样支持数字索引。而且，元素不需要像数组那样在内存中彼此相邻分配。

**数组**

数组是项的有序集合，其中数组中的每个项都有一个索引。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-12-22T11:28:40.053

[这是我关于印记和背景的回答](https://stackoverflow.com/questions/11754351/difference-of-and-in-perl/11757344#11757344)

但主要区别在于：

数组有一个`scalar-context-value`like `count of elements`。

列表有一个`scalar-context-value`like `LAST element in list`。

所以，你需要了解`goat-operator`：`=()=`。

用法？

```
perl -e '$s =()= qw(a b c); print $s' # uh? 3? (3 elements, array context)

perl -e '$s = qw(a b cLastElementThatYouSee); print $s' # uh? cLastElementThatYouSee? (list context, last element returned) 
```

如您所见，`=()=`将上下文更改为`array`

# salesforce - 无法将资源 src 同步到服务器：ClassCastException

> ID：14001746
> 
> 赞同：1
> 
> 时间：2012-12-22T09:43:09.770
> 
> 标签：salesforce, salesforce-service-cloud

当我与您的 Force.com Developer Edition 组织同步并且我将其与我的开发人员组织同步时，我正在按照本教程为 salesforce 组织设置[google 工具包](http://wiki.developerforce.com/page/Google_Data_APIs_Toolkit_Setup)，突然出现信息对话框错误：

Unable to synchronize resource src to server:ClassCastException:com.salesforce.ide.api.metadata.types.MetaData$JaxbAccessorF_full_Name can't be cast to com.sun.xml.Internal.bind.v2.runtime.reflect.Accessor

原因：com.salesforce.ide.api.metadata.types.Metadata$JaxbAccessorF_full_Name 无法转换为 com.sun.xml.internal.bind.v2.runtime.reflect.Accessor

如何通过此错误解决此错误任何一个g0t然后请帮助解决它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T16:03:42.303

而不是使用 jdk7 安装 java runtime enviorment6 并解决错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:41:37.747

以管理员身份运行 Force.com IDE 也可以工作。

# javascript - 信息窗口和地理编码器

> ID：14001753
> 
> 赞同：1
> 
> 时间：2012-12-22T09:44:18.257
> 
> 标签：javascript, jquery, google-maps-api-3, google-geocoder

我在获取经度和纬度值地理编码然后在信息窗口中显示相关地址时遇到问题。我尝试了多种方法都没有成功，但是我必须承认我对 javascript 不是很熟悉。我不断地找回价值：“未定义”。

这是我的代码片段，显示了主要组件：

`var position = new google.maps.LatLng(position.coords.latitude, position.coords.longitude); var geocoder = new google.maps.Geocoder(); var address;`

 ````
if (geocoder) {
    geocoder.geocode({ 'latLng': position }, function (results, status) {       
       if (status == google.maps.GeocoderStatus.OK) {
            address = (results[0].formatted_address);
       } else { 
            address = (position.coords.latitude + ', ' +  position.coords.longitude);
       }           
    }); 
}

var info = 
          ('<span class="txt_bld">Location:</span> '         + address                      + '<br />' +
          '<span class="txt_bld">Accuracy:</span> '          + position.coords.accuracy     + '<br />' +
          '<span class="txt_bld">Time:</span> '              +  position.timestamp); 
````  `谁能告诉我如何将 lat/lng 位置转换为地址以便在我的信息窗口中显示它们？

**编辑**

更新代码：
`var position = new google.maps.LatLng(position.coords.latitude,position.coords.longitude); var geocoder = new google.maps.Geocoder(); var infowindow = new google.maps.InfoWindow(); var address;`

 ````
if (geocoder) {
    geocoder.geocode({ 'latLng': position }, function (results, status) {       
       if (status == google.maps.GeocoderStatus.OK) {
            address == (results[0].formatted_address);
       } else { 
            address == (position.coords.latitude + ', ' +  position.coords.longitude);
       }    
       var info = 
          ('<span class="txt_bld">Location:</span> '         + address                      + '<br />' +
          '<span class="txt_bld">Accuracy:</span> '          + position.coords.accuracy     + '<br />' +
          '<span class="txt_bld">Time:</span> '              + position.timestamp); 

        if(!infowindow){
            infowindow = new google.maps.InfoWindow({
                content: info
            });
        }else{
            infowindow.setContent(info);
        }

        google.maps.event.addListener(marker, 'click', function() {
          infowindow.open(map,marker);    
          setTimeout(function () { 
            infowindow.close(); 
          }, 5000);
        });            
    }); 
} 
````  ``if(!marker){ marker = new google.maps.Marker({ position: position, map: this.map, icon: markericon, draggable:false }); }else{ marker.setPosition(point);
}`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T12:43:55.207

地理编码器是异步的。您需要在回调函数中使用它返回的数据。像这样的东西（未经测试）：

```
var position = new google.maps.LatLng(position.coords.latitude,position.coords.longitude); 
var geocoder = new google.maps.Geocoder();
var infowindow = new google.maps.InfoWindow();
var address;

if (geocoder) {
  geocoder.geocode({ 'latLng': position }, function (results, status) {       
   if (status == google.maps.GeocoderStatus.OK) {
        address = (results[0].formatted_address);
   } else { 
        address = (position.coords.latitude + ', ' +  position.coords.longitude);
   }           
   var info = 
      ('<span class="txt_bld">Location:</span> '         + address
       + '<br />' +
      '<span class="txt_bld">Accuracy:</span> '          + position.coords.accuracy
      + '<br />' +
      '<span class="txt_bld">Time:</span> '              +  position.timestamp);
    infowindow.setContent(info);
    infowindow.setPosition(position);
    infowindow.open(map);
  }); 
} 
```

[工作示例](http://www.geocodezip.com/v3_simpleMap_revGeocodeIW.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-27T19:20:08.073

我们使用地理编码器通过地址获取纬度，因为我们没有纬度，所以我们需要通过地理编码器找到纬度。如果我们有纬度长坐标，那么我们可以直接使用

```
 var position = new google.maps.LatLng(markers[i][1], markers[i][2]);
            bounds.extend(position);
            marker = new google.maps.Marker({
                position: position,
                map: map,
                title: markers[i][0]
            });
`````

# database-design - 1:N关系的主要项目

> ID：14001761
> 
> 赞同：0
> 
> 时间：2012-12-22T09:45:36.083
> 
> 标签：database-design

我有`Product`很多`Images`. `Product`有一个**主要** 的`Image`。

我将这个主要存储在表`Image`的`main_image_id`列中`Products`。

一切正常，但我不确定这个设计。

# php - Facebook Graph API getAccessToken() / 访问令牌过期

> ID：14001768
> 
> 赞同：1
> 
> 时间：2012-12-22T09:46:10.747
> 
> 标签：php, facebook, facebook-graph-api

我将编写一个将作为 cron 运行的 Facebook Graph 脚本/应用程序。我之前尝试过这样做，但它说访问令牌已过期。我尝试使用`getAccessToken()`，但它告诉我必须使用有效的访问令牌来请求有关当前用户的信息。如何自动更新我的访问令牌，这样我的 cron 工作就不会中断？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T09:53:41.580

The normal access token expires in 2 hours, and the extended token lasts for 2 months. For the extended token guide, go though this: [How to extend access token validity since offline_access deprecation](https://stackoverflow.com/questions/8982025/how-to-extend-access-token-validity-since-offline-access-deprecation/9035036#9035036)

Now, the best thing you can do is to update regularly this extended token of the user when he log-in the app/website. So, you can use this token in your cron job. This will fail only when the user didn't visit your app for 2 months.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T10:00:19.100

您是否在以下链接中验证了您的访问令牌已过期？

[https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)

此外，您可以通过访问类似问题获得详细答案：

[如何使用 PHP 更新/扩展 facebook 访问令牌？](https://stackoverflow.com/questions/10021892/how-to-renew-extend-facebook-access-tokens-with-php)

# database - 从模型中获取数据的问题

> ID：14001771
> 
> 赞同：-1
> 
> 时间：2012-12-22T09:46:28.720
> 
> 标签：database, django, django-models

我的一个模型是抽象模型，它被另一个模型继承。

```
class SelectedProduct(models.Model):

    sku = fields.SKUField()
    description = CharField(_("Description"), max_length=200)
    quantity = models.IntegerField(_("Quantity"), default=0)
    unit_price = fields.MoneyField(_("Unit price"), default=Decimal("0"))
    total_price = fields.MoneyField(_("Total price"), default=Decimal("0"))

    class Meta:
        abstract = True 
```

继承模型

```
class OrderItem(SelectedProduct):

    order = models.ForeignKey("Order", related_name="items") 
```

现在，如果我在我的视图中运行这个命令 `orderItem=OrderItem.objects.all()`并在我的模板`{{passed_variable}}`中返回

`[<OrderItem: >, <OrderItem: >, <OrderItem: >, <OrderItem: >, <OrderItem: >, <OrderItem: >, <OrderItem: >, <OrderItem: >, <OrderItem: >, <OrderItem: >, <OrderItem: >, <OrderItem: >, <OrderItem: >, <OrderItem: >, <OrderItem: >, <OrderItem: >, <OrderItem: >, <OrderItem: >, <OrderItem: >, <OrderItem: >, '...(remaining elements truncated)...']`

表示没有 id、描述等，如果我`{{passed_variable.id}}`在模板中指定，则它什么也不显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T10:26:42.123

`orderItem=OrderItem.objects.all()`返回项目的列表（查询集）

您需要遍历项目

在蟒蛇中：

```
for one_order_item in orderItem:
    print one_order_item.id 
```

在 Django 模板中：

```
{% for one_order_item in passed_variable %}
       {{ one_order_iten.id }}
{% endfor %} 
```

# c# - 我可以覆盖模拟器并直接在我的 Windows Phone 8 上调试应用程序吗？

> ID：14001772
> 
> 赞同：0
> 
> 时间：2012-12-22T09:46:34.000
> 
> 标签：c#, sdk, emulation, windows-phone-8, windows-phone-8-emulator

我的笔记本电脑有一个没有虚拟化和二级地址转换功能的处理器，这是运行新的 Windows Phone 8 SDK 所必需的。

不过，我可以使用 Windows Phone 8 sdk，但为了测试我的应用程序，我将使用 Windows Phone 8 设备。

是否可以不启动模拟器并直接在我的 WP8 设备上调试应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T10:05:51.440

在 Visual Studio 中，在调试按钮（绿色播放按钮）的下拉菜单中选择“设备”。

如果调试按钮不可见，请右键单击工具栏/菜单栏的区域并选中“标准”。

[这](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff928362%28v=vs.105%29.aspx#BKMK_DeployingtoaPhysicalWindowsPhoneDevice)是一篇关于在物理设备上调试 windows phone 应用程序的文章（在底部）。

# javascript - 当用户从 asp.net 中的 gridview 中删除一行时显示警告消息

> ID：14001776
> 
> 赞同：0
> 
> 时间：2012-12-22T09:46:54.040
> 
> 标签：javascript, asp.net, gridview

我在 web 表单上有一个 gridview。我向 gridview 添加了一个命令字段以进行删除和编辑。

我希望当用户单击 del 按钮时，应使用 javascript 显示警报（警告）消息：

> 您确定要删除这条记录吗？

当用户点击`Yes`时，记录被删除。

我怎样才能做到这一点？

这是我的命令字段：

```
<asp:CommandField ButtonType="Image" 
     CancelImageUrl="~/styles/img/cancel.png" 
     DeleteImageUrl="~/styles/img/trash.png" 
     EditImageUrl="~/styles/img/edit.png" 
     ItemStyle-Width="50px" 
     ShowDeleteButton="True" ShowEditButton="True" 
     UpdateImageUrl="~/styles/img/update.gif"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T09:49:48.260

您应该使用`OnClientClick`Delete 按钮上的属性将其连接到 javascript。

```
<asp:Button ID="deleteButton" runat="server" CommandName="Delete" Text="Delete"
OnClientClick="return confirm('Are you sure to delete this record?');" /> 
```

这是一个解释更多的[链接。](http://forums.asp.net/t/1045957.aspx/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T10:00:57.507

使用下面的代码执行...

```
<asp:LinkButton ID="lbtnDelete" runat="server" CommandName="delete" 
Text="Delete" OnClientClick="return confirm('Do you Want to Delete this   Record?');" 
CommandArgument='<%#Eval("ID") %>'>
</asp:LinkButton>` 
```

# bash - 通过命令退出代码打印不同的消息

> ID：14001778
> 
> 赞同：2
> 
> 时间：2012-12-22T09:47:03.327
> 
> 标签：bash, exit-code

所以我在我的 .sh 文件中有这个：

```
#!/bin/bash

echo "Building Space Cubes X for Mac...."
make OS=APPLE -k

if [$? -eq 0]
then
    echo "Build completed."
    echo "You can find the build under (THIS_FOLDER)/bin/build."
else
    echo "Build failed! Check above for error messages!"
fi 
```

问题是，bash 打印出我什至不明白的消息：

```
./build-mac.sh: line 7: [0: command not found 
```

任何帮助或建议表示赞赏！

我在带有 Bash 的 Mac 上运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T09:57:50.227

您需要`if`在方括号周围的行上添加额外的空格。将您的代码更改为：

```
if [ $? -eq 0 ] 
```

这是必需的原因是`[`命令本身（*nix for 的同义词`test`），您需要执行`[`命令而不是（不存在的）`[$?`命令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T10:01:09.637

还不如根本不使用`$?`：

```
#!/bin/bash

echo "Building Space Cubes X for Mac...."

if make OS=APPLE -k ; then
    echo "Build completed."
    echo "You can find the build under (THIS_FOLDER)/bin/build."
else
    echo "Build failed! Check above for error messages!"
fi 
```

# php - Phpseclib 密钥使用

> ID：14001781
> 
> 赞同：1
> 
> 时间：2012-12-22T09:47:20.923
> 
> 标签：php, ssl, certificate, ssl-certificate, phpseclib

PhpSecLib 创建的默认证书文件的 keyUsage 设置为：`All rules of applications`. 我如何将 keyUsage 设置为`digitalSignature`Windows Crypto Shell 将显示：`Ensures the Identity of a remote computer`

**编辑**

这是我的代码：

```
<?php
include('File/X509.php');
include('Crypt/RSA.php');
$c = $_POST['csr'];

$CAPrivKey = new Crypt_RSA();
$CAPrivKey->setPassword('[...]');
$CAPrivKey->loadKey("-----BEGIN RSA PRIVATE KEY-----
[...]
-----END RSA PRIVATE KEY-----
");

$issuer = new File_X509();
$issuer->setPrivateKey($CAPrivKey);
$issuer->loadX509("-----BEGIN CERTIFICATE-----
[...]
-----END CERTIFICATE-----
");

$subject = new File_X509();

$subject->loadCSR($c); 

$x509 = new File_X509();
$x509->setStartDate('-1 month');
$x509->setEndDate('+1 year');
$x509->setSerialNumber('125');
$result = $x509->sign($issuer, $subject);

$x509->loadX509($result);
$x509->setExtension('id-ce-keyUsage', array_merge($x509->getExtension('id-ce-   keyUsage'), array('digitalSignature')));
$result = $x509->sign($issuer, $x509);
//echo $x509->saveX509($result);

header('Content-Type: application/x-x509-ca-cert');
header("Content-Disposition: attachment; filename='ssl.cer'");
echo $x509->saveX509($result);

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T18:01:44.070

除非您要辞去证书，否则您需要先执行 $x509->sign() 来创建证书。然后您需要重新加载该证书，设置扩展名，将其退出并保存。例如。

```
<?php
include('File/X509.php');
include('Crypt/RSA.php');

$privKey = new Crypt_RSA();
$privKey->loadKey('...');

$pubKey = new Crypt_RSA();
$pubKey->loadKey($privKey->getPublicKey());
$pubKey->setPublicKey();

$subject = new File_X509();
$subject->setDNProp('id-at-organizationName', 'demo cert');
$subject->setPublicKey($pubKey);

$issuer = new File_X509();
$issuer->setPrivateKey($privKey);
$issuer->setDN($subject->getDN());

$x509 = new File_X509();
//$x509->makeCA();
$x509->setSerialNumber('1');

$result = $x509->sign($issuer, $subject);
$x509->loadX509($result);
$x509->setExtension('id-ce-keyUsage', array('digitalSignature'));
//$x509->setExtension('id-ce-keyUsage', array_merge($x509->getExtension('id-ce-keyUsage'), array('digitalSignature')));
$result = $x509->sign($issuer, $x509);
echo $x509->saveX509($result);
?> 
```

如果整个辞职的事情是不必要的，那就太好了，但无论如何。我会看看我是否可以让 phpseclib 作者在某个时候对其进行一些修改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T17:06:14.350

你可以发布你的证书吗？因为当我使用你的程序时，它完全不是为我做的。我的代码：

```
<?php
include('File/X509.php');
include('Crypt/RSA.php');

$c = '-----BEGIN CERTIFICATE REQUEST-----
MIIBVjCBwgIAMB4xHDAaBgNVBAoME3BocHNlY2xpYiBkZW1vIGNlcnQwgZ0wCwYJKoZIhvcNAQEB
A4GNADCBiQKBgQDF+1/N2DwvdkhoHsLq8LnH99AEGVOGpooSpbPCewbuZeqr/Djb9ySPar2PLySo
Y+kB2QAbxUgpO/57IpWIabQ9jDFIznqLCcLzXKiKOWnMv4KMf55yJ6pwlqoTbUPgyQ67CRAfjcaD
W9VQ/TzdKahdxLFPBAEIEpEX23YpLhTLNQIDAQABMAsGCSqGSIb3DQEBBQOBgQALjJE4OygjvLm0
rzFyMPvAo7Ux6z5qTOi//HQzzmjNun7MV09GTfZgcYeWvuLosJXcn7CPALF5FqHWePs98WioTA7K
WsvdZzm+yJ5UcmzdJ/Jq9X8o1KTsMELN0SQwiNk502a1wbiXotF4OgCsjSdno96PCV9VSF4w69HM
1eXfvg==
-----END CERTIFICATE REQUEST-----';

$CAPrivKey = new Crypt_RSA();
$CAPrivKey->loadKey('-----BEGIN RSA PRIVATE KEY-----
MIICXAIBAAKBgQCqGKukO1De7zhZj6+H0qtjTkVxwTCpvKe4eCZ0FPqri0cb2JZfXJ/DgYSF6vUp
wmJG8wVQZKjeGcjDOL5UlsuusFncCzWBQ7RKNUSesmQRMSGkVb1/3j+skZ6UtW+5u09lHNsj6tQ5
1s1SPrCBkedbNf0Tp0GbMJDyR4e9T04ZZwIDAQABAoGAFijko56+qGyN8M0RVyaRAXz++xTqHBLh
3tx4VgMtrQ+WEgCjhoTwo23KMBAuJGSYnRmoBZM3lMfTKevIkAidPExvYCdm5dYq3XToLkkLv5L2
pIIVOFMDG+KESnAFV7l2c+cnzRMW0+b6f8mR1CJzZuxVLL6Q02fvLi55/mbSYxECQQDeAw6fiIQX
GukBI4eMZZt4nscy2o12KyYner3VpoeE+Np2q+Z3pvAMd/aNzQ/W9WaI+NRfcxUJrmfPwIGm63il
AkEAxCL5HQb2bQr4ByorcMWm/hEP2MZzROV73yF41hPsRC9m66KrheO9HPTJuo3/9s5p+sqGxOlF
L0NDt4SkosjgGwJAFklyR1uZ/wPJjj611cdBcztlPdqoxssQGnh85BzCj/u3WqBpE2vjvyyvyI5k
X6zk7S0ljKtt2jny2+00VsBerQJBAJGC1Mg5Oydo5NwD6BiROrPxGo2bpTbu/fhrT8ebHkTz2epl
U9VQQSQzY1oZMVX8i1m5WUTLPz2yLJIBQVdXqhMCQBGoiuSoSjafUhV7i1cEGpb88h5NBYZzWXGZ
37sJ5QsW+sJyoNde3xH8vdXhzU7eT82D6X/scw9RZz+/6rCJ4p0=
-----END RSA PRIVATE KEY-----');

$issuer = new File_X509();
$issuer->setPrivateKey($CAPrivKey);
$issuer->loadX509("-----BEGIN CERTIFICATE-----
MIIDITCCAoqgAwIBAgIQT52W2WawmStUwpV8tBV9TTANBgkqhkiG9w0BAQUFADBM
MQswCQYDVQQGEwJaQTElMCMGA1UEChMcVGhhd3RlIENvbnN1bHRpbmcgKFB0eSkg
THRkLjEWMBQGA1UEAxMNVGhhd3RlIFNHQyBDQTAeFw0xMTEwMjYwMDAwMDBaFw0x
MzA5MzAyMzU5NTlaMGgxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlh
MRYwFAYDVQQHFA1Nb3VudGFpbiBWaWV3MRMwEQYDVQQKFApHb29nbGUgSW5jMRcw
FQYDVQQDFA53d3cuZ29vZ2xlLmNvbTCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkC
gYEA3rcmQ6aZhc04pxUJuc8PycNVjIjujI0oJyRLKl6g2Bb6YRhLz21ggNM1QDJy
wI8S2OVOj7my9tkVXlqGMaO6hqpryNlxjMzNJxMenUJdOPanrO/6YvMYgdQkRn8B
d3zGKokUmbuYOR2oGfs5AER9G5RqeC1prcB6LPrQ2iASmNMCAwEAAaOB5zCB5DAM
BgNVHRMBAf8EAjAAMDYGA1UdHwQvMC0wK6ApoCeGJWh0dHA6Ly9jcmwudGhhd3Rl
LmNvbS9UaGF3dGVTR0NDQS5jcmwwKAYDVR0lBCEwHwYIKwYBBQUHAwEGCCsGAQUF
BwMCBglghkgBhvhCBAEwcgYIKwYBBQUHAQEEZjBkMCIGCCsGAQUFBzABhhZodHRw
Oi8vb2NzcC50aGF3dGUuY29tMD4GCCsGAQUFBzAChjJodHRwOi8vd3d3LnRoYXd0
ZS5jb20vcmVwb3NpdG9yeS9UaGF3dGVfU0dDX0NBLmNydDANBgkqhkiG9w0BAQUF
AAOBgQAhrNWuyjSJWsKrUtKyNGadeqvu5nzVfsJcKLt0AMkQH0IT/GmKHiSgAgDp
ulvKGQSy068Bsn5fFNum21K5mvMSf3yinDtvmX3qUA12IxL/92ZzKbeVCq3Yi7Le
IOkKcGQRCMha8X2e7GmlpdWC1ycenlbN0nbVeSv3JUMcafC4+Q==
-----END CERTIFICATE-----");

$subject = new File_X509();

$subject->loadCSR($c); 

$x509 = new File_X509();
$x509->setStartDate('-1 month');
$x509->setEndDate('+1 year');
$x509->setSerialNumber('125');
$result = $x509->sign($issuer, $subject);

$x509->loadX509($result);
$x509->setExtension('id-ce-keyUsage', array('digitalSignature'));
//$x509->setExtension('id-ce-keyUsage', array_merge($x509->getExtension('id-ce-keyUsage'), array('digitalSignature')));
$result = $x509->sign($issuer, $x509);
//echo $x509->saveX509($result);

header('Content-Type: application/x-x509-ca-cert');
header("Content-Disposition: attachment; filename='ssl.cer'");
echo $x509->saveX509($result); 
```

截屏：

![windows中显示的证书](../Images/89880f1c6dfa4a75ce57bb1a7eee1348.png)

证书本身：

```
-----BEGIN CERTIFICATE-----
MIICCzCCAXagAwIBAgIDMTI1MAsGCSqGSIb3DQEBBTBoMQswCQYDVQQGEwJVUzET
MBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxQNTW91bnRhaW4gVmlldzETMBEG
A1UEChQKR29vZ2xlIEluYzEXMBUGA1UEAxQOd3d3Lmdvb2dsZS5jb20wIhgPMjAx
MjExMjUwNzE0MTJaGA8yMDEzMTIyNTA3MTQxMlowHjEcMBoGA1UECgwTcGhwc2Vj
bGliIGRlbW8gY2VydDCBnTALBgkqhkiG9w0BAQEDgY0AMIGJAoGBAMX7X83YPC92
SGgewurwucf30AQZU4amihKls8J7Bu5l6qv8ONv3JI9qvY8vJKhj6QHZABvFSCk7
/nsilYhptD2MMUjOeosJwvNcqIo5acy/gox/nnInqnCWqhNtQ+DJDrsJEB+NxoNb
1VD9PN0pqF3EsU8EAQgSkRfbdikuFMs1AgMBAAGjDzANMAsGA1UdDwQEAwIHgDAL
BgkqhkiG9w0BAQUDgYEAMtVKyBpbvD2txhlRtA3VHoL1Zp9E7CN/EqFxpAG7bwZT
8D1gifeff4tGH0zkbGvv+5kb5exBZ+PhGsaaHVZoBQVO33Rkr32rfMeMa7PYb76L
i+f0mOp1QfPbrQuvT/uJx8AUv/Owsk5zLyE7JznsvYQ7VeGARRAike2ThHGcZQ8=
-----END CERTIFICATE----- 
```

所以就像我说的，它对我来说很好。

也许您可以在尝试运行它时发布您获得的证书？也许您也可以发布您正在使用的 CSR？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T07:13:00.943

当我尝试运行您的代码时，我遇到了一堆错误。主要是因为这条线：

```
$x509->setExtension('id-ce-keyUsage', array_merge($x509->getExtension('id-ce-   keyUsage'), array('digitalSignature'))); 
```

有两个问题：

1.  id-ce- 和 keyUsage 之间有空格。那些空间不应该在那里。

2.  如果 getExtension 返回 NULL，array_merge 将返回 NULL。IE。如果该扩展名未定义。因此，您需要做的是：

    ```
    $x509->setExtension('id-ce-keyUsage', array('digitalSignature')); 
    ```

# android - how to stop the garbage collector from being called in android

> ID：14001783
> 
> 赞同：3
> 
> 时间：2012-12-22T09:47:30.093
> 
> 标签：android, garbage-collection

I'm writing an app that generates a fair amount of garbage but nowhere near enough to hit the memory limit. That is, even though garbage is generated, there is no need to collect garbage. However, in spite of this, and in spite of the fact that a very small percentage of the total memory available is being used, the garbage collector is constantly being called and lagging my application.

As you can see from this output, I'm using only 2% of my available memory and yet the garbage collector is constantly running:

```
12-22 04:36:08.219: D/dalvikvm(12033): WAIT_FOR_CONCURRENT_GC blocked 61ms
12-22 04:36:08.359: D/dalvikvm(12033): GC_CONCURRENT freed 1012K, 98% free 11865K/405196K, paused 4ms+13ms, total 73ms
12-22 04:36:08.359: D/dalvikvm(12033): WAIT_FOR_CONCURRENT_GC blocked 38ms
12-22 04:36:08.479: D/dalvikvm(12033): GC_CONCURRENT freed 1020K, 98% free 11862K/405196K, paused 3ms+13ms, total 66ms
12-22 04:36:08.479: D/dalvikvm(12033): WAIT_FOR_CONCURRENT_GC blocked 36ms
12-22 04:36:08.649: D/dalvikvm(12033): GC_CONCURRENT freed 1015K, 98% free 11863K/405196K, paused 2ms+16ms, total 78ms
12-22 04:36:08.649: D/dalvikvm(12033): WAIT_FOR_CONCURRENT_GC blocked 66ms
12-22 04:36:08.789: D/dalvikvm(12033): GC_CONCURRENT freed 1017K, 98% free 11861K/405196K, paused 2ms+13ms, total 66ms
12-22 04:36:08.789: D/dalvikvm(12033): WAIT_FOR_CONCURRENT_GC blocked 58ms 
```

Avoiding this unnecessary garbage collection entirely will make or break my app.

Why is the garbage collector running if I have plenty of free memory? Is there any way I can keep the garbage collector from running until absolutely necessary? I should also mention I'm running on a rooted phone.

Thanks!

Edit: Ugh.. I've been trying to eliminate all garbage using factories and various techniques but there's still a fair amount being generated and I think it's due to some string concatenation of the form s1 + s2 + s3 . I've converted such expressions into forms where I can save references to each component but I'm not sure it's air-tight. Do you see any garbage being generated by the following lines?

```
String ss1 = input.substring(m, m+k1);
String ss2 = ss1 + possible_perturbations1.charAt(p1);
String ss3 = input.substring(m+k1+1, m+k2);
String ss4 = ss2 + ss3;
String ss5 = ss4 + possible_perturbations2.charAt(p2);
String ss6 = input.substring(m+k2+1, m+i+1);
String current_str = ss5 + ss6;

allStrs.add(ss1);
allStrs.add(ss2);
allStrs.add(ss3);
allStrs.add(ss4);
allStrs.add(ss5);
allStrs.add(ss6);
allStrs.add(current_str); 
```

A couple notes: the remove functions of most of the standard library containers generate garbage, as do most binary operations between objects that generate temporary variables such as Strings, Integers, Doubles, etc... Obvious to most, I guess, but still good to make clear.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T09:55:05.820

如果没有您的代码，很难说为什么要调用垃圾收集器，这不是错误，而是 GC 有责任收集空闲的内存块。

当您拥有已创建但不再使用的对象时，垃圾收集器将激活。

不被 GC 滞后的最好方法是避免一直收集垃圾的需要。例如，您可以重用对象，而不是将它们归零并创建新对象。

*但仅供参考，你不能阻止垃圾收集器运行，甚至不要尝试。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T10:23:16.860

即使应用程序仅使用一小部分可用堆内存，它也会运行 Android 的 GC 是正常的。

一个可能的原因是：几毫秒长的 GC 运行优于几秒长的 GC 运行（用户会注意到这一点）。

你是如何制造垃圾的？在大多数情况下，您可以只创建固定数量的对象并重用它们（可能通过对象池）。

如果您 100% 确定自己知道自己在做什么并且不存在更好的解决方案，则可以保留对垃圾对象的引用以防止 GC 删除它们。但你几乎可以肯定不想这样做。

**更新：**

通常，您应该避免字符串连接（每个连接都会创建新对象）并使用 StringBuilder 代替：

```
String abc = a + b + c; // Wrong
String abc = new StringBuilder(a).append(b).append(c).toString(); // Right 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T10:26:58.997

垃圾收集器将随时运行。没有办法停止垃圾收集器。甚至没有真正的方法来调用垃圾收集器，你只问垃圾收集器是否想运行，但即使那样它也有可能不会运行。

垃圾收集器不仅会在内存不足时运行，它还会始终尝试防止“OutOfMemory”异常。据我所知，GC 将以给定的时间间隔运行，并查看范围内不再需要的变量。

正如 Sahil Mahajan Mj 已经说过的，最好的方法是重用你的对象。这不会阻止垃圾收集器运行（如前所述，它无论如何都会运行），但它会确保 GC 没有太多工作要做（这样可以节省时间）。

# android - hiding the address bar in ios and android browsers

> ID：14001785
> 
> 赞同：0
> 
> 时间：2012-12-22T09:47:47.737
> 
> 标签：android, iphone, web

I am developing a mobile web application for iOS and android phones using `iscroll`. I need the ability to hide the address bar of the browser as soon as the page loads. After doing much research I found that the `window.scrollat(0,1)` needs to be invoked. However, even this is not working.

Any help is appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T10:20:36.333

您无法从网页中隐藏地址栏。隐藏地址栏（如果可能由浏览器本身）需要由浏览器完成。所以没有命令可以做到这一点

# api - 如何比较来自不同 API 的价格数据馈送？

> ID：14001788
> 
> 赞同：1
> 
> 时间：2012-12-22T09:48:17.677
> 
> 标签：api, parsing, amazon-web-services, commission-junction

我正在努力将联属网络营销整合到少数现有网站中。我们正在使用一些通过不同网络（cj、shareasale、linkshare、亚马逊）工作的商家。

现在我的观察是，所有这些网络都提供不同格式的数据馈送。但这不是一个大问题。我主要关心的是商家在同一产品上使用不同的标题。我不想遇到这些情况：

1) 来自 N 个商家的相同产品的两个列表（如果标题略有不同）

2）一份商家N种不同产品的listing（如果我们不使用严格的比较算法）

我们希望尽可能地自动化一切，希望避免操作员一直扫描有问题的列表。

这个问题通常是如何处理的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T16:13:46.943

我相信这里的一个常见解决方案是使用一些通用标识符（UPC 代码、书籍的 ISBN 代码等）。如果你不能做到这一点，它就会成为一个难题，而且你可能无法做到 100% 正确。这可能是一个愚蠢（且昂贵）的想法，但也许考虑使用 Amazon Mechanical Turk API 让人们为您做这件事（至少在您的算法无法正确处理的困难情况下）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T00:41:37.743

所有联属网络订阅源都有一个共同点：它们都按该产品唯一的 SKU / MPN 编号列出产品，而不管联属网络或分销渠道如何。这是您在跨网络匹配不同产品目录时的唯一标识符。

![在此处输入图像描述](../Images/1292f51e22b035741c23620e5fcc7a91.png)

# ajax - 经典 ASP - 使用 Ajax 提交查询表单而不刷新

> ID：14001792
> 
> 赞同：3
> 
> 时间：2012-12-22T09:49:34.937
> 
> 标签：ajax, asp-classic, cdo.message

我已经通过 Google 等查看过，但找不到任何我想要的东西，所以请我的 SE 同事寻求帮助。

我有一个包含在我的页面上的表单，并且在整个站点中都是一致的。我想在不刷新页面的情况下提交查询表单，这是 Classic ASP 的正常路线。

我有一个单独的 ASP 页面，其中包含我的邮件脚本，可以正常工作并发送电子邮件，但是我想使用 Ajax 调用该页面，发送电子邮件，然后通知用户它已发送。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-22T10:24:37.343

经典的 ASP、ASP.NET、PHP 或任何其他动态语言，与您真正在做的一样是**FORM POST** ing，那是 HTML，而不是真正的 ASP。

假设你有一个像

```
<form id="frm-submit" action="/SendEmail.asp" action="POST">

   ...

   <input type="submit" value="Submit form" />
</form> 
```

在页面中添加一点 jQuery 作为

```
$(function() {

   $("#frm-send").submit(function() {
      var data = $(this).serialize(),
          action = $(this).attr("action"),
          method = $(this).attr("method");

      $(".loading").show(); // show loading div
      $.ajax({
         url: action,
         type: method,
         data: data,
         success: function(data) {
             // all went well...
         },
         error: function(err) {
             // there was something not right...
         },
         complete: function() {
            $(".loading").hide(); // hide the loading
         }
      });

      return false; // don't let the form be submitted
   });

}); 
```

你准备好了。

* * *

在您的`sendMail.asp`页面中，您发送到的所有内容都`Response.Write`将在方法的`data`变量中`success`，因此在您发送电子邮件后，您将拥有：

```
Response.Write("done")
Responde.Flush()
Response.End() 
```

在 javascript 部分，您可以像这样处理它：

```
success(data) {
    if(data === "done")
    {
       // Super duper! let's show the user a Thank you for submit page
       document.location = "/ThankYou.asp";
    }
} 
```

# javascript - 为什么 settimeout 不延迟函数执行？

> ID：14001795
> 
> 赞同：10
> 
> 时间：2012-12-22T09:49:54.790
> 
> 标签：javascript, jquery, ajax, liferay, settimeout

```
function tryToDownload(url)
{

       oIFrm = document.getElementById('myIFrm');
       oIFrm.src = url;
      // alert(url);
      // url=escape(url);

      setTimeout(deletefile(url), 25000); 
} 
```

以下是删除文件功能

```
function deletefile(url){

$.ajax({
    type:'post',
    url: "<%= addToDoDeleteDownloadFile %>",
    data:{filename:url},
    type : "GET",
    timeout : 20000,
    dataType : "text",
    success : function(data) {
        alert("success");

    }
    });
} 
```

上面是我的 jQuery，我在 25 秒后最后调用了一个函数，但是它没有延迟 deletefile(url) 函数并在之后执行。那么应该是什么问题？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-22T09:51:23.410

在这一行中，您正在调用您的函数并将其*结果*传递给[`setTimeout()`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout).

```
setTimeout(deletefile(url), 25000); 
```

如果要延迟执行，请添加包装函数：

```
setTimeout( function(){ deletefile(url); }, 25000); 
```

**编辑**

@Petah 提出的替代方案：

```
setTimeout(deletefile, 25000, url); 
```

延迟后传递给的所有参数`setTimeout()`，将在执行时传递给函数。因此，在这种情况下，您按顺序将对函数的*引用* 、延迟和参数传递给函数！

请注意，根据[MDN](https://developer.mozilla.org/en-US/docs/Web/API/Window.setTimeout)，这种传递参数的方式在 IE9 之前的 IE 中不起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-22T09:52:31.113

那是因为您正在调用该函数，并在 setTimeout 调用中使用返回值。将其包装在一个匿名函数中，以便由 setTimeout 调用它：

```
function tryToDownload(url) {

    oIFrm = document.getElementById('myIFrm');
    oIFrm.src = url;
   // alert(url);
   // url=escape(url);

   setTimeout(function() { deletefile(url); }, 25000);

} 
```

# c# - Windows Phone - using DependencyProperty within UserControl xaml

> ID：14001796
> 
> 赞同：1
> 
> 时间：2012-12-22T09:49:57.537
> 
> 标签：c#, silverlight, windows-phone-7, xaml, dependency-properties

WindowsPhoneControl1.xaml.cs:

```
public partial class WindowsPhoneControl1
{
    public static readonly DependencyProperty MyDpProperty =
        DependencyProperty.Register("MyDp",
                                    typeof (Color),
                                    typeof (WindowsPhoneControl1),
                                    new PropertyMetadata(default(Color)));

    public Color MyDp
    {
        get { return (Color) this.GetValue(MyDpProperty); }
        set { this.SetValue(MyDpProperty, value); }
    }
...
} 
```

WindowsPhoneControl1.xaml:

```
<UserControl x:Class="MyProj.WindowsPhoneControl1" x:Name="Uc" ...>
    <Rectangle Width="200" Height="200" Fill="{Binding MyDp, ElementName=Uc}" />

    <!--<Rectangle Width="200" Height="200" Fill="Red" /> Works fine-->
</UserControl> 
```

MainPage.xaml:

```
<Grid x:Name="LayoutRoot">
    <myProj:WindowsPhoneControl1 MyDp="SandyBrown" />
</Grid> 
```

So why `{Binding MyDp, ElementName=Uc}` doesn't work and what to do in this case?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T09:57:06.000

它不起作用的原因是您绑定`Fill`到 type 的属性`Color`- 而`Fill`应该采用 type 的属性`Brush`。这是在您使用原始 xaml 时为您处理的转换 - 也就是说，如果您放置`Fill="Red"`运行时实际上会根据您指定的颜色名称创建一个`SolidColorBrush`。

您应该修改您的控件以使属性 a `Brush`，或者改为`Brush`从您设置的颜色自动创建 a 。

您可以使用一个属性来标记您的属性，该属性会向 Xaml 提示应该使用此转换，但我不记得它是什么。（如果我以后能找到它，我会编辑它。）

# linux - How to sort files by name using a shell script

> ID：14001797
> 
> 赞同：7
> 
> 时间：2012-12-22T09:50:05.547
> 
> 标签：linux, shell, sorting

I would like to sort all files by date with a Shell script.

For example, in `/Users/KanZ/Desktop/Project/Test/` there are the files `M1.h`, `A2.h` and `F4.h`.

Each file has a different time. How do I sort all these files from oldest to current by date and time?

Currently I have a rename script:

```
cd /Users/KanZ/Desktop/Project/Test/ 
n=1
for file in *.jpg;
do 
  echo $file prefix=M file_name=M$n.jpg 
  echo $file_name n=$(( $n+1 ))
  mv $file $file_name 
done 
```

The first time I run script the JPG files will be `M1.jpg`, `M2.jpg` and `M3.jpg` but if I add a new file named `A1.jpg` to this directory and run the script again, `M1.jpg`, `M2.jpg` and `M3.jpg` will be replaced by `M4.jpg` (before running the script, this file was named `A1.jpg`) because the first letter is `A` and came before `M`.

I would like to get `M1`, `M2`, `M3` and `M4.jpg`.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-22T09:52:26.540

The `ls` command can easily sort by last modified time:

```
$ ls -1t /Users/KanZ/Desktop/Project/Test 
```

To reverse the sort, include the `-r` option:

```
$ ls -1tr /Users/KanZ/Desktop/Project/Test 
```

Including the `1` tells `ls` to output one file per line without extra metadata (like the length, modification time, etc), which is often what you need in a shell script if you need to send the list to other commands for further processing.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-22T09:53:33.813

(Completely new because the question changed)

Try this:

```
cd /Users/KanZ/Desktop/Project/Test
n=1
for f in `ls -tr *.jpg`; do
  mv $f M$n.jpg
  n=$(( n + 1 ))
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-09T16:51:43.810

如果您需要按升序对文件路径进行排序

```
ls -tUr -d $PWD/* 
```

可能有用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-02T16:47:05.433

您需要将`-t`选项传递给`ls`命令。该`-t`选项按修改时间排序，即在按字典顺序对操作数进行排序之前最先修改的时间。换句话说，可以使用以下命令显示上次下载的文件。

打开终端并键入以下命令。

```
ls -t 
```

# linux - Why CRT gets separated from kernel?

> ID：14001798
> 
> 赞同：0
> 
> 时间：2012-12-22T09:50:11.710
> 
> 标签：linux, glibc, msvcrt

We all know that when a C program executes, there are lots of plumbing jobs done by the OS under the hood, before entering **main**, such as allocating a stack, initiating some resources, loading the binary,etc.

So intuitively I regard these jobs part of the OS. However, the fact is that all these jobs are in an important module called **CRT**(C runtime library), like glibc in linux, or msvcrt.dll in Windows. I wanna know its whereforce.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T09:59:42.563

重要的是要了解为什么操作系统中存在[用户模式和内核模式的分离。](http://www.codinghorror.com/blog/2008/01/understanding-user-and-kernel-mode.html)简而言之，它提高了系统的稳定性。C-Runtime 库只是一个利用操作系统服务的库。它与进程一起加载。我们的程序大多是用户模式程序（与驱动程序和其他操作系统核心服务不同）。资源分配由其他操作系统服务完成，这些库是访问它们的安全方式！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T10:22:22.523

无论是 C 程序、Java 还是 PHP 程序，都可以完成这些例行进程创建任务。

另外，用 C（甚至 C）以外的语言编写的程序**没有必要使用 C 标准库。**因此，我们不能将所有这些常规任务放在 C 标准库中。

例如，在 Linux 系统中，“程序加载器”和[“动态链接器”](http://linux.die.net/man/8/ld-linux)不是 gnu c 库的一部分。它们是单独的[“binutils”](http://www.gnu.org/software/binutils/)包的一部分。

[这个](http://www.linuxjournal.com/article/6463?page=0,0)链接虽然有点过时，但会为您提供大量关于将程序编写到正在运行的进程的过程的信息。它使用 gcc/Linux，但主要任务在其他平台上是相似的。

编辑 /* 动态链接器是 GLIBC 的一部分...感谢employeesrussian */

# java - Does ArrayList.clear() resize the array to the smallest possible size?

> ID：14001799
> 
> 赞同：9
> 
> 时间：2012-12-22T09:50:28.407
> 
> 标签：java, arraylist

If I understand ArrayLists, they're backed by an array which is automatically resized when its full. On calling clear() is the ArrayList resized to the smallest possible array size?

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-22T13:50:05.877

不，不是，这是一个需要牢记的问题。假设 ArrayList 的内部 Object[] 增长到 1000000 个元素。现在调用 ArrayList.clear()。这会将所有 1000000 个元素设置为 null，并将内部大小设置为 0。将 1000000 归零是一个耗时的操作，ArrayList 仍将占用堆上的 1000000 x 4 字节 Object[]。您可以在 clear() 之后调用 ArrayList.trimToSize() 但有一个问题 - 您首先清除了 1000000 个元素，然后将它们扔掉。在这种情况下，更好的解决方案是重新创建您的 ArrayList - new ArrayList()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T09:53:08.973

**The size is set to 0 but there's no resize that happens explicitly**
Here's the actual code.

```
 public void  clear() {
         modCount++;
         // Let gc do its work
         for (int i = 0; i < size; i++)
             elementData[i] = null;
         size = 0;
     } 
```

Please check this [link](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/ArrayList.java#ArrayList.clear%28%29).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T09:52:21.377

The size is set to zero. `arrayList.clear()` sets all the objects contained in an arraylist to null. But this does not ensure that all the objects contained in the arraylist will be garbage collected.The objects which have references elsewhere will not be Garbage collected till all references are removed.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T11:13:42.590

要减小您可能需要在清除后使用 trimToSize () 的大小。通常这不会完成，因为除非您希望节省许多 MB，否则它不会产生太大影响。更常见的解决方案是在这种情况下替换 ArrayList。（我不是说那更好）

# .net - What sound formats can the .NET library handle?

> ID：14001803
> 
> 赞同：4
> 
> 时间：2012-12-22T09:51:17.133
> 
> 标签：.net, audio, media-player

I'm thinking of writing my own media player, just something basic to suit my own needs. I'm just wondering what formats the .NET libs can handle? All I can find in the libraries is WAV support, which is no surprise. Are there any other libraries that abstract other formats or what? Or can I do it better in another language?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T09:56:19.333

**解决方案 1**

.NET Framework 仅处理 wav 文件，因此您应该为各种格式使用其他解码器

例如对于 MP3 文件，您可以使用 LAME

[.NET 跛脚 MP3](http://www.i-programmer.info/projects/38-windows/2033-net-mp3.html)

对于其他格式，您可以使用 FFDSHOW

[FFDSHOWAPI](http://ffdshow-tryout.sourceforge.net/wiki/devel%3acontrolling?s%5b%5d=ffdshowapi)

**解决方案 2**

如果可以，您可以使用 C++ 开发您的应用程序，这样您就不需要任何包装器

**解决方案 3**

这不是您问题的答案，但如果您不想从头开始。您可以使用

[Windows 媒体播放器 COM 对象](http://msdn.microsoft.com/en-us/library/windows/desktop/dd564679%28v=vs.85%29.aspx?ppud=4)

或者

[VLC COM 对象](http://wiki.videolan.org/C_Sharp)

并以更简单的方式将 Windows Media Player 或 VLC Player 嵌入到您的 .NET 应用程序中，因此您不必处理解码器或文件格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T07:57:02.700

如果您使用的是 WPF，那么它`MediaElement`可以用来播放 Windows 可以播放的几乎所有内容。

Windows 带有各种用于解码和编码音频的 API，要将它们与 .NET 一起使用，您需要互操作包装器。我已经写过如何利用 NAudio 附带的互操作包装器在 Windows 支持的任何格式之间进行[转换](http://www.codeproject.com/Articles/501521/How-to-convert-between-most-audio-formats-in-NET)。

# twitter-bootstrap - Using Twitter bootstrap's img-circle class in IE8

> ID：14001807
> 
> 赞同：1
> 
> 时间：2012-12-22T09:52:13.167
> 
> 标签：twitter-bootstrap, internet-explorer-8, css

I am working on a project using the twitter's bootstraps css framework. I need to make it work in IE8\. The one class am having trouble with is img-circle. Since the border-radius doesn't work in IE8, how do i make it work for the number of instances of border radius in the css file.

# php - Opencart 获取产品的父类别

> ID：14001808
> 
> 赞同：0
> 
> 时间：2012-12-22T09:52:16.340
> 
> 标签：php, opencart

我怎么能把它变成一个递归函数。这样它会获得所选 parent_id 的所有类别的列表？

```
public function getProductCategoryPath($product_id) {
    $query = $this->db->query("SELECT category_id FROM " . DB_PREFIX . "product_to_category WHERE product_id = '" . (int)$product_id . "' LIMIT 1");

    if($query->row['category_id']){

        // Parent category
        $path = $query->row['category_id'];

        // Category parent 
        $query = $this->db->query("SELECT parent_id FROM " . DB_PREFIX . "category WHERE category_id = '" . $query->row['category_id'] . "' AND parent_id != 0");           
        if($query->num_rows){
            $path = $query->row['parent_id'] . "_" . $path;

            // Sub-category parent 
            $query = $this->db->query("SELECT parent_id FROM " . DB_PREFIX . "category WHERE category_id = '" . $query->row['parent_id'] . "' AND parent_id != 0");         
            if($query->num_rows){
                $path = $query->row['parent_id'] . "_" . $path;
            } 
        } 

        return $path;
    }

    return false;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T22:20:06.983

我不完全了解您要打印的内容，但是对于递归，您将使用 while

```
public function getProductCategoryPath($product_id) {
$query = $this->db->query("SELECT category_id FROM " . DB_PREFIX . "product_to_category WHERE product_id = '" . (int)$product_id . "' LIMIT 1");

if($query->row['category_id']){

    // Parent category
    $path = $query->row['category_id'];

    // Category parent 
    $query = $this->db->query("SELECT parent_id FROM " . DB_PREFIX . "category WHERE category_id = '" . $query->row['category_id'] . "' AND parent_id != 0");           
    while($query->num_rows){
        $path = $query->row['parent_id'] . "_" . $path;

        // Sub-category parent 
        $query = $this->db->query("SELECT parent_id FROM " . DB_PREFIX . "category WHERE category_id = '" . $query->row['parent_id'] . "' AND parent_id != 0");    
    } 

    return $path;
}

return false;
} 
```

# git - Github 同一文件的不同版本：一个用于开发，一个用于 repo

> ID：14001816
> 
> 赞同：1
> 
> 时间：2012-12-22T09:52:54.327
> 
> 标签：git, github, gitignore, gitattributes

我正在创作一个 PHP CMS，需要安装才能工作。
安装会生成一个配置文件。

在本地主机上，我使用已安装的版本（带有特定的配置文件），
但是从 github 下载 CMS 的用户将有一个空的配置文件（= 卸载版本）。

我想要什么： -本地主机上的
特定配置文件（`config.php`）（要处理）
-github上的空配置文件（`config.php`）（要下载）

我遇到过这篇文章：[git 可以自动在空格和制表符之间切换吗？](https://stackoverflow.com/questions/2316677/can-git-automatically-switch-between-spaces-and-tabs/2316728#2316728)
不确定这是否真的是我要找的。
瞧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T10:01:46.157

首先，不建议将配置文件存储在存储库中，主要是因为配置只适用于一个环境。

[这个](https://gist.github.com/1423106)要点列出了这个问题的一些解决方案。

在您的情况下，我会将空配置文件重命名为`config.template.php`，其他人可以复制`config.php`并填写详细信息。`config.php`然后添加到`.gitignore`文件中。

这样，配置文件只是本地的，而不是存储库的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T10:02:16.597

一种常见的方法是[根本不在 git 中跟踪](https://help.github.com/articles/ignoring-files)配置文件并提供`config.php.default`文件（签入）。当然，您必须告诉用户接下来要做什么。

# linux - 如何检查某个端口是否打开且未使用？

> ID：14001825
> 
> 赞同：20
> 
> 时间：2012-12-22T09:54:47.173
> 
> 标签：linux

我想在使用端口号 80 的 Linux 平台上安装 webserver-apache，但我不确定端口是否打开，是否正在被其他应用程序使用。

1.  的输出`grep 80 /etc/services`是：

```
http  80/tcp  www www-http   #World Wide web Http
http  80/udp  www www-http   #Hypertext transfer protocol 
```

2.  `netstat -an | grep 80 | more`：

它提供了一些 IP，其中之一是

```
IP:80 TIME_WAIT 
```

能否请您帮忙并告诉我如何确定端口 80 是否已打开且未使用，以便我可以开始安装。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2017-09-18T06:58:56.803

```
sudo netstat -anp | grep ':80 ' 
```

那应该给你 pid 和持有端口 80 的进程的名称

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2018-12-24T13:40:52.703

这可以使用`nc`如下命令来实现：

`# nc -z IP PORT`

如果端口已被使用，它将返回 TRUE，否则返回 FALSE（即，当前可用但未侦听）。

我不推荐`lsof`或`netstat`方法，因为它首先尝试扫描所有正在运行的 PID 以获取所有有界端口：

```
# time lsof -i:8888
real    0m1.194s
user    0m0.137s
sys 0m1.056s```

# time nc -z 127.0.0.1 8888
real    0m0.014s
user    0m0.011s
sys 0m0.004s 
```

这里 8888 是一个未使用的端口。在上面的示例中，该`nc`命令快了约 85 倍。

### 例如1：

```
$ nc -z 127.0.0.1 80 && echo "IN USE" || echo "FREE"
IN USE

$ nc -z 127.0.0.1 81 && echo "IN USE" || echo "FREE"
FREE 
```

### 例如 2：

如果您尝试使用远程 IP，如果在指定时间内不接受连接，最好添加超时以自动退出。

`$ nc -w 2 -z 216.58.196.174 81`

它的谷歌IP没有被使用，所以它会在尝试2秒后超时。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-12-05T10:16:48.753

```
netstat -tln | tail -n +3 | awk '{ print $4 }' 
```

这个显示 TCP 监听端点的绑定地址。所有其他端点都是免费的；此外，如果在 Unix 上并且您不是 root，那么您不能绑定到“特权”端口号（端口号低于 1024）。

更详细地解释：

*   `netstat -tln` - 所有监听 tcp 端口

*   `tail -n +3` - 切断 netstat 命令的头部

*   `awk '{ print $4 }'` - 打印由 [ip]:[port] 组成的第四列

对于一般情况，您仍然需要注意删除所有不相关的接口；监听地址 0.0.0.0 正在监听所有网卡，如果有 IP 地址，则这是网卡/网络接口的特定 IP。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-09-18T06:15:07.477

作为脚本的一部分，您可能希望使用如下内容：

```
resp=`netstat -tunl | grep ":80 "`
if [ -z "$resp" ]; then
    echo "80 Port is free"
else
    echo "80 Port is not free"
fi 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-12-22T09:59:17.493

尝试通过管道将 lsof 导入 grep 并搜索端口号：

```
lsof|grep <port> 
```

如果没有显示，则表示该端口未在使用中

您可以使用终止特定端口上的进程

```
kill -9 <pid> 
```

其中 pid 是从第一个命令获得的进程 ID。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2022-01-07T04:46:15.397

```
#!/bin/bash
#this function will exist from bash script if any of the port in argument list is in used 
function seek_port()  {
for i in $@
do
 echo $i
 netstat -nat | grep LISTEN | grep -E "\b:$i\b"
 if [ $? -eq 0 ]
 then
   echo "TCP port $i opened"
   exit 0
 fi
done
}
#calling function
seek_port 80 443 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-07-25T10:21:13.560

这是您需要杀死的命令

```
netstat -tulpno | grep ':80' 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-07-01T14:03:55.500

以下*带有输出*的命令表示 **端口已打开**，*没有输出*表示端口**未打开**

```
 sudo fuser -i 80/tcp 
```

您可以使用以下命令终止侦听进程：

```
sudo fuser -k 80/tcp 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-12-20T12:43:04.787

```
grep  '443' /etc/httpd/conf.d/* 
```

# java - 答案中的未知因素

> ID：14001829
> 
> 赞同：-1
> 
> 时间：2012-12-22T09:55:20.287
> 
> 标签：java, sum-of-digits

我找不到我写的问题。我正在尝试 Project Euler #16，我需要对 2^1000 的所有数字求和。我的程序适用于小数字，但随着数字达到 18 位左右，它会中断。有什么帮助吗？

```
public static double digit(double n){

    return n % 10;

}

public static double sumofDigits(double n){

    double sum = 0;

    while(n > 1){

        sum += digit(n);
        n = Math.floor(n/10);

    }

    return sum;

}

public static void main(String[] args) {

    double x = Math.pow(2,1000);

    double y = 22222222222222222222d;

    System.out.println(sumofDigits(x));

            System.out.println(sumofDigits(y));

} 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T10:02:16.110

double 的精度约为 16 位十进制数字。由于 2 power 1000 有更多的数字（大约 300），你根本无法使用双精度数。

看看 BigInteger 类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T09:59:40.947

你不能`double`在这里使用：它们只有有限的精度。（参见[Java 原始数据类型](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)）

所以`Math.pow(2,1000)`只计算一些（第一个）数字和指数。

您必须使用一些处理任意长整数的库。（例如[大整数](http://docs.oracle.com/javase/1.4.2/docs/api/java/math/BigInteger.html)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T10:49:35.363

我现在明白了。我已经用代表该十进制数的 BigDecimal 对象替换了这里的所有双精度数，以便实现 # 的十进制精度 && 大小。谢谢大家。

# c# - Windows XP SP3 上将旧的 C++/DirectX 7-8 代码从书本更新到 C#/SlimDX 或 DirectX 9 的最佳过程？

> ID：14001833
> 
> 赞同：0
> 
> 时间：2012-12-22T09:55:56.053
> 
> 标签：c#, c++, directx, port, porting

我又回到了编程的世界。几个月后，在我熟练掌握 C# 之后，我将使用一本旧书，即 Charles Rivers 发布的 C++ 地形引擎，也许还有我拥有的其他几本书。

问题是我使用的是 C# 而不是 C++。另外，我不在乎 C++ 会好多少。同样，我不希望或不需要诸如“制作游戏引擎需要不止一个人......”或“在（某些条件）......之前你不应该这样做”或其他任何陈述。

**注意好！**在我的脑海里，在我的想象中。我自己用 C# 构建并创建了自己的 GCS。一段时间以来，我一直梦想着它，清楚地看到它的特征。换句话说，我已经做了这个，它的物理形状只是时间问题。我现在所做的只是显化我创造的现实。为了采取措施，我正在学习编程和提前计划，这样我就可以测试我所说的流程。我不希望你同意我在这里的心态，我只是要求你尊重它。

那么，在您看来，从旧书中获取 C++ 代码并编写 C# 等价物的最佳过程是什么？

接下来，因为微软在 DirectX 上搞砸了，我相信你们中的许多人都知道，这些书中的大部分代码在 DirectX 部门都无法工作。那么，将旧的 DirectX 命令更改为适用于 Windows XP 的新 DX9 命令的最佳方法是什么？或者也许是 SlimDX？

我认为必须有某种方式，某种过程，允许编码人员拿一本 2-10 年前的书并从中编写功能代码。本质上我是在问这个过程是什么？

感谢您的阅读。感谢您的帮助--DreamBliss

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:00:37.407

好吧，我最终又回到了 C++。而且我已经弄清楚如何让旧的 DirectX 代码运行。您可以在此处观看我的新视频教程系列，详细说明如何操作：http: [//adifferentpath.blog.com/using-old-directx-code-links-and-resources/](http://adifferentpath.blog.com/using-old-directx-code-links-and-resources/)

# java - 如何裁剪图像以分离其中包含的文本？

> ID：14001834
> 
> 赞同：0
> 
> 时间：2012-12-22T09:56:08.410
> 
> 标签：java, android, image, image-processing, tesseract

如果您查看附加的图像，您会发现它上面有图像+文本。我想要的是裁剪此图像，使包含其中一部分的文本分离出来，其余部分被丢弃。我该怎么做![在此处输入图像描述](../Images/bc0fd3c147c7165afe01beb6b543443d.png)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T10:01:35.087

你所要求的非常困难。图像识别库可以帮助您入门，但很难从中获得一致的结果。这类问题进入研究领域。这是一篇可能会有所帮助的博客文章：

[http://rmtheis.wordpress.com/2011/08/06/using-tesseract-tools-for-android-to-create-a-basic-ocr-app/](http://rmtheis.wordpress.com/2011/08/06/using-tesseract-tools-for-android-to-create-a-basic-ocr-app/)

# jquery - 有没有办法对匹配正则表达式的所有文本执行回调函数？

> ID：14001845
> 
> 赞同：3
> 
> 时间：2012-12-22T09:57:29.300
> 
> 标签：jquery, regex

我正在创建一个书签，它使用正则表达式从页面（比如亚马逊）中提取价格，我希望能够提取有关每个价格的字体大小的附加信息，作为对其重要性进行排名的一种方式。

下面是我生成的代码，它与我正在寻找的内容接近。match() 创建一个价格数组， :contains 返回并重新搜索找到的每个价格的字体大小。但是，如果相同的价格出现两次，这将是一个问题。

我正在寻找一种方法来一步完成。任何意见，将不胜感激。

```
var prices = jQuery('body').text().match(/[\$€£]\s*(?:\d[\d,]*(?:\.\d+)?)/g);
    jQuery.each(prices, function() {
        var size = parseInt(jQuery(":contains('" + this + "')").css('fontSize'));
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T10:07:17.563

您必须遍历容器元素的结果

```
var prices = jQuery('body').text().match(/[\$€£]\s*(?:\d[\d,]*(?:\.\d+)?)/g);
var results = [];
jQuery.each(prices, function() {
    var price = this;
    results[ price ] = [];
    jQuery(":contains('" + this + "')").each( function() {
        var size = parseInt( $( this ).css( 'fontSize' ), 10 );
        results[ price ].push( size );
    } );
}); 
```

`results`现在是一个数组，其中以价格为键，所有相应的字体大小作为键的值

# php - RubyOnRails 上是否有像 phpmyadmin 这样的可视化数据库编辑器 SQL？

> ID：14001851
> 
> 赞同：1
> 
> 时间：2012-12-22T09:58:24.067
> 
> 标签：php, ruby-on-rails

> **可能重复：**
> [Ruby on Rails 是否有“phpmyadmin”？](https://stackoverflow.com/questions/8554676/is-there-a-phpmyadmin-for-ruby-on-rails)

我来自 php，所以如果没有 phpmyadmin 之类的东西，我就无法对我的工作进行成像。ROR 上有类似的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T10:03:12.593

What you want is DB explorer. It is an application similar to phpMyAdmin, but written in Ruby on Rails. Check it out: [https://github.com/robinbortlik/db_explorer](https://github.com/robinbortlik/db_explorer)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-12-22T10:00:41.930

试试postgresql。它是 mysql 之类的开源数据库，您可以将其用作 ROR 应用程序的后端。

# paypal - 贝宝链式支付

> ID：14001854
> 
> 赞同：1
> 
> 时间：2012-12-22T09:59:18.473
> 
> 标签：paypal

我正在尝试使用 PayPal 链式支付 API。我想知道的是我可以有多个接收器 2，如果我是在线商店并且我所做的基本上是帮助他们卖东西，我可以根据销售管理接收器 2 的付款。

例如，在我的商店里，我有两个卖家

1.  卖鞋
2.  卖衬衫

是否可以创建一个配置文件，卖家可以在其中注册并输入系统自动接受的必要信息，并通过链式支付 API 完成支付？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T16:24:01.347

是的，这是人们使用链式支付最多的方式之一。

当人们创建要在您的网站上销售的帐户时，您可以让他们在控制面板中输入他们的 PayPal 帐户电子邮件地址。然后，当订单上有不同的卖家时（您可以将付款拆分为最多 6 个接收者），您只需将每个接收者相应地添加到 API 请求中。

当付款发生时，每个收款人都会收到您指定的应收到的金额，因此您当然需要处理所有逻辑，以便在买家结账时根据购物车中的商品构建此请求.

# actionscript-3 - 新的 Math.random's / Restarting swf / 常量随机数

> ID：14001858
> 
> 赞同：0
> 
> 时间：2012-12-22T09:59:32.720
> 
> 标签：actionscript-3

我有一个掷 2 个骰子的骰子游戏。一个是你的，一个是“计算机的”。如果“计算机的”骰子高于或等于你的骰子，你就输了。

每个掷骰子都有 12 个单独的符号（你的骰子有 1-6 个，“计算机的”骰子有 1-6 个）。每次重新打开 swf 时，我都使用此代码随机掷骰子：

```
var diceplayer:int = 1;
diceplayer = Math.random()*6 + 1; //(the +1 so you don't get 0) 
```

如何使用不同的 Math.random 制作一个重掷 2 个骰子的重试按钮？通常当我声明一个 Math.random 时，它会一直保持不变，直到我重新启动 swf。

我希望我提供足够的信息。

谢谢你能给我的任何支持！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T10:51:00.533

使用数组获取随机数

> var testArr:Array = new Array(1,2,3,4,5,6);
> var gotRandonNumber:int = testArr[int(Math.random() * testArr.length)];

愿这些会有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T10:51:48.353

对 Math.random() 的新调用确实会返回一个新的随机数。我刚刚在这里尝试过：[http](http://wonderfl.net/c/rrv3) ://wonderfl.net/c/rrv3 。

代码：

```
package {
    import flash.text.TextField;
    import flash.display.Sprite;
    public class FlashTest extends Sprite {
        public function FlashTest() {

            mText = new TextField();
            addChild(mText);

            mText.text = Math.random().toString();
            mText.text = mText.text + '\n' + Math.random().toString();
        }

        private var mText:TextField;
    }
} 
```

我认为您需要为某人发布更多代码来识别和解决您可能面临的问题。

# android - 无法通过 Android Share Intent 与链接共享文本

> ID：14001859
> 
> 赞同：5
> 
> 时间：2012-12-22T09:59:36.457
> 
> 标签：android, facebook, android-intent

现在我想用下面的链接分享文本是我的代码

```
String myText = "Hey!\nThis is a my Text!";

Intent share = new Intent(Intent.ACTION_SEND);
share.setType("text/plain");
String extraText = "www.mylink.com\n\n" + myText ;
share.putExtra(Intent.EXTRA_TEXT, extraText);
startActivity(Intent.createChooser(share, "Share with Friends")); 
```

所以它适用于 gmail、twitter 等，但它不适用于 facebook

**在 facebook 上它只分享链接，但没有显示我的文字**

我想要这种类型的分享

```
www.mylink.com

here is my text 
```

任何帮助将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T10:15:37.877

您在这里遇到的问题可能是 Facebook 没有查看 Intent 中提供的额外信息。因为它适用于 Gmail 和 Twitter。

顺便看看[Android 和 Facebook 的分享意图](https://stackoverflow.com/questions/7545254/android-and-facebook-share-intent)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T09:46:45.980

您无法使用 Share Intent 在 FB 上共享文本链接，您必须尝试使用​​ FB graph API for wall post 执行此操作。

# node.js - 流星兼容性

> ID：14001866
> 
> 赞同：14
> 
> 时间：2012-12-22T10:00:32.663
> 
> 标签：node.js, websocket, socket.io, meteor, yeoman

我正在考虑使用 Meteor 来创建我的下一个应用程序，但我之前有几个问题。

*   据我了解，服务器和客户端之间的通信使用 DDP 协议/WebSockets。哪些浏览器支持 Meteor？

*   Meteor 通信协议和 socket.io 有什么区别？

*   如果没有区别，是否有可能使用 socket.io 代替本机 Meteor DDP 协议 / WebSockets ？

*   Meteor 可以与 Yeoman（Paul Irish 开发的工作流框架）结合使用吗？

非常感谢您！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-24T18:14:45.687

让我们看看我是否可以按照它们出现的顺序回答你的问题......

*   Meteor 支持所有主流浏览器。IE、Chrome、Safari。有关 IE 的版本，请参见上面 Rahul 的指针。
*   `socket.io`是一个消息级协议，负责发送、接收和路由消息。相比之下，DDP（Meteor 协议）是一个更高级别的协议，它模拟了将数据库部分复制到浏览器和 RPC 调用。实际上，DDP在幕后*使用*了消息级协议：`sockjs`.
*   打破 Meteor 的消息级传输以实现插入式替换目前需要进行一些重构，并且需要对 Meteor 的源代码进行修改和弄脏。将来，消息级传输可能会更加封装，但 Meteor 通常会在那里提供一个合理的默认值——这可能是也可能不是总是`sockjs`基于 - 的。
*   虽然我没有同时尝试过 Meteor 和 Yeoman，但它们涵盖了很多相同的领域。两者都想为您运行本地网络服务器；两者都对您的项目布局有意见，都可以选择缩小您的 javascript，都想管理您的包（Meteor 中对此的更多支持正在开发中），都为您的应用程序提供初始样板等。我怀疑它在开发 Meteor 应用程序时，使用纯 Meteor 工作流程会容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-19T00:21:49.267

有一些包可以帮助实现普通的 websocket 功能 -`Streamy`并且`Streamy-rooms`浮现在脑海中。但是 Web 套接字功能和 DDP 之间存在很大差异。DDP 使用 websockets，但更多。websockets 中不包含诸如乐观更新之类的东西。此外，通过在客户端和服务器上都有一部分数据库，您不必连接套接字发射器和接收器。这使得开发更加直观和快速。如果您想要该特定行为，您还可以使用列出的包，例如，如果您不想将某些更改保留到数据库但仍要将它们发送给特定用户。

# php - json_decode 响应是否为空

> ID：14001867
> 
> 赞同：0
> 
> 时间：2012-12-22T10:00:40.143
> 
> 标签：php, mysql, json

我刚刚开始真正使用 json 并尽可能地学习！我想分享我所做的这项工作，我觉得这可能需要一些改进，如果不是很多的话。

好吧，我使用 twitch.tv REST_API。这是我的代码。基本上我想通过我的网络托管公司每分钟运行一次 crontab。我知道您可以通过这种方式获取（编码的）json数据：“http://api.justin.tv/api/stream/list.json?channel=example,example2,example3”；也是。它可能更快？但后来我不知道如何在数据库中将我的流设置为离线。

所以我想我要问的是如何改进这一点。

```
$result = mysql_query("SELECT streamname FROM streams") or die(mysql_error());

$ids=array(); 
while($row = mysql_fetch_assoc($result))  
{
    $ids[]=$row["streamname"]; 
}

$mycurl = curl_init();
for($i=0;$i<count($ids);$i++)
{

    curl_setopt ($mycurl, CURLOPT_HEADER, 0);
    curl_setopt ($mycurl, CURLOPT_RETURNTRANSFER, 1); 

    $url = "http://api.justin.tv/api/stream/list.json?channel=$ids[$i]";
    curl_setopt ($mycurl, CURLOPT_URL, $url);

    $web_response =  curl_exec($mycurl);
    $result = json_decode($web_response);

    if(empty($result))
    {
        $sql = "UPDATE streams SET online = '0' WHERE streamname = '" . $ids[$i] . "'";
    }
    else
    {
        $sql = "UPDATE streams SET online = '1' WHERE streamname = '" . $ids[$i] . "'";
    }
    mysql_query($sql) or die(mysql_error());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T10:29:44.233

显然，您想将未出现在 API 结果中的频道标记为离线，反之，将仍然出现的频道标记为在线。

首先是评论中已经说过的注释。**请不要再使用 PHP 的 mysql 扩展。这已被弃用，将在 PHP 的未来版本中删除**我推荐 MySQLi：[http://php.net/manual/en/book.mysqli.php](http://php.net/manual/en/book.mysqli.php)

目前，您正在为每个频道获取数据，这当然会减慢进程并不必要地给 justin.tv 服务器增加负载。

查询状态时，限制是 GET 请求的最大大小，在大多数服务器上为 8192 字节。

现在，改为对照`empty`您检查结果，可以将所有通道视为离线，然后循环遍历结果并再次将结果中的通道标记为在线。在数组或对象中执行此操作（可以是您为频道列表获取的数据库结果）并在一个查询中更新所有频道。

# javascript - Node.js：对象在响应对象中转换为未定义

> ID：14001884
> 
> 赞同：4
> 
> 时间：2012-12-22T10:02:53.280
> 
> 标签：javascript, node.js

我有一个如下定义的简单函数

```
function upload(response, postData) {
    console.log("Received: " + postData);
    response.writeHead(200,{"Content-Type":"text/plain"});
    response.write("You've sent text: " + querystring.parse(postData).text);
    response.end();
} 
```

当我将数据登录到控制台时，它会正确显示，但在写入响应对象时显示为“未定义”。为什么会发生这种情况？我的代码有什么错误吗？

# 整个代码

## 路由.js

```
function route(handle, pathname, response, postData) {
    console.log("About to route a request for " + pathname);
    if(typeof(handle[pathname]) === 'function') {
        console.log(postData);
        handle[pathname](response, postData);
    } else {
        console.log("no request handler found for " + pathname);
        response.writeHead(404, {"Content-Type": "text/plain"});
        response.write("404 Not found");
        response.end();
    }
}

exports.route = route; 
```

## requestHandler.js

```
var exec = require("child_process").exec;
var querystring = require("querystring");

function start(response, postData) {
    console.log("request handler 'start' was called");
    var body = '<html>' +
    '<head>' +
        '<meta http-equiv="Content-Type" content="text/html; ' +
        'charset=UTF-8" />' +
    '</head>'+
    '<body>'+
        '<form action="/upload" method="post">'+
            '<textarea name="text" rows="20" cols="60"></textarea>'+
            '<input type="submit" value="Submit text" />'+
        '</form>'+
    '</body>' + '</html>';

    response.writeHead(200,{"Content-Type": "text/html"});
    response.write(body);
    response.end();
}

function upload(response, postData) {
    console.log("Received: " + querystring.parse(postData).text);
    response.writeHead(200,{"Content-Type":"text/plain"});
    response.write("You've sent text: " + querystring.parse(postData).text);
    response.end();
}

exports.start = start;
exports.upload = upload; 
```

## 服务器.js

```
var http = require("http");
var url = require("url");

function start(route,handle) {

    function onRequest(request,response) {
        var postData = "";
        var pathname = url.parse(request.url).pathname;
        console.log("Request received for " + pathname + " received.");
        request.setEncoding("utf8");
        request.addListener("data", function(postDataChunk) {
            postData += postDataChunk;
            console.log("Received POST data chunk '" + postDataChunk + "'.");
            });
        request.addListener("end", function() {
            console.log(postData);
            route(handle, pathname, response, postData);
            });
        route(handle,pathname,response);
    }

    http.createServer(onRequest).listen(8888);
    console.log("Server has started...");
}

exports.start = start; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T12:25:47.670

代码在有和没有的情况下执行两次`postData`。谢谢莱纳斯 G 泰尔。在发布之前，我应该更清楚地了解代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-25T21:52:55.390

我认为这是一个错字 - 使用

```
querystring.parse(postData).undefinedtext 
```

用于 requestHandler.js 中的上传功能

我正在学习相同的教程，也被困在这里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-09T03:57:14.060

这显然有点晚了，但我和你有同样的错误，但我没有执行两次路由。我的错误是我的 postData 变量未定义，因此它给出了

```
undefinedtext=sometext+querttest 
```

这个问题很容易解决我初始化你的postData =“”。希望这可以帮助任何被困在这里的未来访客。

# php - Paypal 多个 IPN 设置

> ID：14001885
> 
> 赞同：1
> 
> 时间：2012-12-22T10:03:00.223
> 
> 标签：php, paypal-ipn

在将 IPN 用于 3 个网站时，我并不是 100% 清楚这一点，如果有知识的人可以根据我的情况向我解释这一点，我将不胜感激。

我已经设置了我的 sanbox 测试业务帐户以使用 IPN 侦听器：site1.com/listener.php（工作得很好）。

我想知道如何使用相同的贝宝帐户为我的其他网站设置更多听众。

在我的场景中，我**只为所有网站使用订阅付款**。

**问题 1：****ipn_notification_url** 变量。如果设置了此变量，是否会在付款时告诉贝宝，始终将其用作侦听器 ipn url？例子; 如果下个月付款时订阅失败或类似情况？

因此，当贝宝需要 IPN 我的侦听器时，它将使用变量中的侦听器而不是帐户配置文件设置中的设置 url？或者这个变量是否只用于处理蜜蜂时的实际付款？

**问题 2：** 如果需要有一个主侦听器来处理转发到正确的侦听器 url，是否可以区分网站？示例：custom = userId，receiver_id = Sitename

问题 2 实际上与问题 1 类似。将**POSTED 变量**从初始付款、**STICK 到**将来自动为我的订阅进行的付款。这样当贝宝需要向我发送 IPN 更新时，它将始终使用我在初始付款时设置的变量中的 url？

感谢您对此的任何启发。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T23:58:12.997

您可以通过表单中的隐藏输入元素提供三个 URL，它们的名称如下：

1.  notify_url：这是*此购买*的所有通知将发送到的 URL。
2.  return：这是用户成功完成结帐后返回的 URL。
3.  cancel_return：这是用户在 paypal 取消结帐时返回的 URL。

因此，如果您`notify_url`在按钮中使用，则每个站点、每个按钮甚至每个按钮渲染都可能不同，如果您有这样的用途的话。

请注意，这`notify_url`会覆盖您在“付款首选项”中设置的任何内容。

关于（2），您还可以提供`rm`如下变量：

0：通过 GET 返回用户 1：通过 GET 返回用户，没有支付变量。2\. 通过 PUT 返回用户，返回所有支付变量，即作为按钮发送到 PayPal 的回声。

我不清楚0和1之间的区别。

请参阅[PayPal HTML 变量](https://cms.paypal.com/au/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_Appx_websitestandard_htmlvariables)。

**编辑**在我现在找不到的 SO 的另一个答案中，一个 PayPal 人员表示您可以在 notify_url 本身中传递任意参数，这将与您发送它们的方式相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-26T21:50:25.390

[我从http://codeseekah.com/](http://codeseekah.com/)找到了这个脚本，它可以让你设置多个 PayPal IPN 监听器。它允许您过滤通知，这意味着您可以根据设置的条件发送给不同的侦听器（非常有用！）：

```
<?php

    ini_set( 'max_execution_time', 0 ); // Do not abort with timeouts
    ini_set( 'display_errors', 'Off' ); // Do not display any errors to anyone
    $urls = array(); // The broadcast session queue

    // List of IPN listener points ** ADJUST THESE TO POINT TO YOUR LISTENERS
    $ipns = array(
            'first' => 'http://www.yourwebsite1.co.uk//paypal/ipn.php',
            'second' => 'http://www.yourwebsite2.co.uk//paypal/ipn.php',
            'third' => 'http://www.yourwebsite3.co.uk//paypal/ipn.php'
        );

    // ** ADJUST THESE CONDITIONS TO FILTER 
    if($_POST['txn_type']!='cart') $urls []= $ipns['first']; // Choose this IPN URL if all conditions have been met
    if(isset($_POST['auction_buyer_id'])) $urls []= $ipns['second']; // Choose this IPN URL if all conditions have been met
    $urls []= $ipns['third']; // maybe this one is always sent to

    // Broadcast
    if ( !sizeof($urls) ) $urls = $ipns; // No URLs have been matched
    $urls = array_unique( $urls ); // Unique, just in case

    // Broadcast (excluding IPNs from the list according to filter is possible
    foreach ( $urls as $url ) broadcast( $url );

    header( 'HTTP/1.1 200 OK', true, 200 );
    exit();

    // Perform a simple cURL-powered proxy request to broadcast
    function broadcast( $url ) {

        // Format POST data accordingly
        $data = array();
        foreach ($_POST as $key => $value) $data []= urlencode($key).'='.urlencode($value);
        $data = implode('&', $data);

        // Log the broadcast
        file_put_contents('_logs/'.time().'.'.reverse_lookup( $url ).'-'.rand(1,100), $data);

        $ch = curl_init(); // Initialize

        curl_setopt($ch, CURLOPT_URL, $url);
        curl_setopt($ch, CURLOPT_POST, count($data));
        curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

        curl_exec($ch); // Execute HTTP request
        curl_close($ch); // Close
    }

    function reverse_lookup( $url ) {
        global $ipns;
        foreach ( $ipns as $tag => $_url ) {
            if ( $url == $_url ) return $tag;
        }
        return 'unknown';
    }
?> 
```

只需自定义您需要的部分（使用 **s），将其保存在一个文件中，例如名为“multiple-paypal-ipn.php”，然后将其放在您的一台服务器上。然后在您的 PayPal IPN URL 设置（在 PayPal 中）输入您刚刚放置的完整 URL，例如[http://www.yourwebsite/paypal/multiple-paypal-ipn.php](http://www.yourwebsite/paypal/multiple-paypal-ipn.php)

这为我节省了很多时间，所以希望对其他人有用！_g

# visual-studio-2010 - 使用 FPU 组件计算对数 ln(x)

> ID：14001889
> 
> 赞同：0
> 
> 时间：2012-12-22T10:03:35.523
> 
> 标签：visual-studio-2010, assembly, masm, masm32, fpu

我在使用 FPU 进行简单对数计算时遇到问题。我正在使用与 Visual Studio 2012 集成的 MASM 编译器。

```
LOCAL log_e_120 : REAL8;

MOV     eax, 120
MOVD    mm0, eax
MOVQ    log_e_120, mm0

FINIT

FLDLN2              ; load log_e(2)
FLD     log_e_120   ; load x
FYL2X               ; compute log_e(2)*log_2(x) = log_e(x)
FSTP    log_e_120   ; store the result

nop 
```

我在 NOP 操作处设置了一个断点来查看寄存器/本地的状态等等。

当进程处于 NOP 时，我正在调试 VS2010 手表中本地 log_e_120 的值。看起来像： ![调试结果](../Images/3bc32f85d12a3852e1c556f12c47146d.png)

我所有 FLD 的操作都已正确组装：

```
fld         qword ptr [log_e_120] 
```

屏幕上半部分为 REAL8 类型，底部第二个为调试 QWORD 类型的结果。

我也把log_e_120的类型改成了REAL8，QWORD，效果差不多。

另外：我无法正确调试代码的值。

当然，结果应该是大约 4.7874917427820458（[wolframapha 计算](http://www.wolframalpha.com/input/?t=crmtb01&f=ob&i=loge%282%29*log2%28120%29)）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T10:19:55.057

您必须提供从整数表示转换为双精度表示的说明

```
 fild local_var_120  ; where the variable is stored as integer 
```

或者您可以简单地使用您的汇编程序为您完成：

```
 LOCAL log_e_120: REAL8 120.0 
```

# windows-8 - 如何将自定义授权标头添加到 Windows Store App OData 客户端？

> ID：14001890
> 
> 赞同：6
> 
> 时间：2012-12-22T10:03:55.893
> 
> 标签：windows-8, windows-runtime, wcf-data-services, odata, windows-store-apps

我正在使用 Windows 运行时构建 Windows 应用商店应用程序。我正在访问使用基本身份验证的 OData 服务。我正在使用适用于 Windows 应用商店应用程序库的[WCF 数据服务工具](http://www.microsoft.com/en-us/download/details.aspx?id=30714)`Microsoft.Data.Services.Client.WindowsStore`( )。

身份验证字符串是自定义格式，所以我不能只使用`NetworkCredential(username, password)`. 我需要自己将标头添加到来自`DataServiceContext`.

我尝试使用以下代码：

```
proxy.SendingRequest += (s, e) =>
{
   e.RequestHeaders.Add("Authorization", authHeader);
} 
```

但我收到错误：

```
'System.Net.WebHeaderCollection' does not contain a definition for 'Add' and no extension method 'Add' accepting a first argument of type 'System.Net.WebHeaderCollection' could be found 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-22T10:03:55.893

您可以使用新的[SendingRequest2](http://msdn.microsoft.com/en-us/library/system.data.services.client.dataservicecontext.sendingrequest2.aspx)事件，该事件在构建请求之后发送到服务器之前触发。

有一个[RequestMessage.SetHeader(headername, value)](http://msdn.microsoft.com/en-us/library/microsoft.data.odata.iodatarequestmessage.setheader)方法可用于设置标头。将值设置为`null`以删除标题。

```
proxy.SendingRequest2 += (sender, eventArgs) =>
{
    eventArgs.RequestMessage.SetHeader("Authorization", authHeader);
}; 
```

[WCF 数据服务团队博客](http://blogs.msdn.com/b/astoriateam/archive/2012/09/26/wcf-data-service-5-1-0-rc2-released.aspx)对此进行了更多讨论：

> SendingRequest2（及其已弃用的前身 SendingRequest）在构建请求后触发。WebRequest 不允许您在构建后修改 URL。新事件允许您在我们构建基础请求之前修改 URL，从而让您完全控制请求。

# android - MoveModifire Help in andengine

> ID：14001904
> 
> 赞同：0
> 
> 时间：2012-12-22T10:06:12.143
> 
> 标签：android, andengine

I' m new in andengine. I have a question regarding movemodifier method.

I have successfully moved a sprite using MoveModifier method from one point(x=0) to another point(x=100).

Can I stop the sprite before reaching to the target point(x=100) and then restart the sprite from where it was stopped ?

Sorry for my bad English.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T08:54:35.873

感谢您的所有回复。我解决了我的问题

PhysicsHandler handler = new PhysicsHandler(sprite);

sprite.registerUpdateHandler(handler);

handler.setVelocity(x,y);

而不是 MoveModifier 方法。

当汽车与来自屏幕顶部到底部的任何移动物体发生碰撞时，我会使用 (handler.setVelocity(0,0);) 。因此，移动物体会停止。现在几秒钟​​后，当汽车不在对象中时，我使用 handler.setVelocity(x,y); 重置速度；所以现在物体开始从它停止的地方移动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T12:28:10.453

这可能不是您正在寻找的答案，但最简单的方法是使用两个 MoveModifier - 一个获得第一个位置，然后在准备好完成剩下的过程时，使用新的 MoveModifier。

这真的取决于您的需求 - 如果它们像您所说的那样简单，那么 2 MoveModifiers 就可以了 - 但是我怀疑您有我们不知道的更苛刻的需求。

# c - 在 C/C++ 中从文件读取数据直到行尾

> ID：14001907
> 
> 赞同：6
> 
> 时间：2012-12-22T10:06:51.237
> 
> 标签：c, fopen, eof, eol

读取到文件末尾是很常见的，但我感兴趣的是如何从文本文件中读取数据（一系列数字）直到*行*尾？我的任务是从文件中读取几个系列的数字，这些数字位于新行中。这是一个输入示例：

```
1 2 53 7 27 8
67 5 2
1 56 9 100 2 3 13 101 78 
```

第一个系列：1 2 53 7 27 8

第二个：67 5 2

第三个：1 56 9 100 2 3 13 101 78

我必须将它们与文件分开阅读，但每一个都读到行尾。我有这个代码：

```
 #include <stdio.h>
    FILE *fp;
    const char EOL = '\\0';
    void main()
    {
        fp = fopen("26.txt", "r");
        char buffer[128];
        int a[100];
        int i = 0;
        freopen("26.txt","r",stdin);
        while(scanf("%d",&a[i])==1 && buffer[i] != EOL)
             i++;
        int n = i;
        fclose(stdin);
     } 
```

它会一直读取到文件末尾，所以它并没有达到我的预期。你有什么建议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-22T11:08:13.643

使用[fgets()](http://pubs.opengroup.org/onlinepubs/9699919799/functions/fgets.html)读取整行，然后解析该行（可能使用[strtol()](http://pubs.opengroup.org/onlinepubs/9699919799/functions/strtol.html)）。

```
#include <stdio.h>
#include <stdlib.h>

int main(void) {
  char buffer[10000];
  char *pbuff;
  int value;

  while (1) {
    if (!fgets(buffer, sizeof buffer, stdin)) break;
    printf("Line contains");
    pbuff = buffer;
    while (1) {
      if (*pbuff == '\n') break;
      value = strtol(pbuff, &pbuff, 10);
      printf(" %d", value);
    }
    printf("\n");
  }
  return 0;
} 
```

您可以*看到*[在 ideone 运行](http://ideone.com/gcErYZ)的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T10:11:27.267

\n 应该是换行符的转义符，试试这个

```
const char EOL = '\n'; 
```

你让它工作了吗？这应该有帮助：

```
#include <stdio.h>
FILE *fp;
const char EOL = '\n'; // unused . . .

void main()
{
    fp = fopen("26.txt", "r");
    char buffer[128];
    int a[100];
    int i = 0;
    freopen("26.txt","r",stdin);

    while(scanf("%i",&a[i])==1 && buffer[i] != EOF)
        ++i;

    //print values parsed to int array.    
    for(int j=0; j<i; ++j)
        printf("[%i]: %i\n",j,a[j]);

    fclose(stdin);
} 
```

# jsoup - 如何为转义字符正确配置 jsoup？

> ID：14001909
> 
> 赞同：0
> 
> 时间：2012-12-22T10:07:30.067
> 
> 标签：jsoup

```
<div id="virtualPath">
<a href='/'>text</a> >> 
<a href='' title=''>More text</a> >> 
<a href=''>Some text</a> >> 
<span class="boldFont">some more text</span>
</div> 
```

我有如上图所示的 html。当我使用选择器时，我得到以下 html。

```
<div id="virtualPath"> 
<a href="/">text</a> &gt;&gt; 
<a href="" title="">more text</a> &gt;&gt; 
<span class="boldFont">some more text</span>
</div> 
```

我应该使用什么配置来获得正确的 html？我知道 html 格式不正确，但是由于生成 html 不在我的控制之下，我需要在我的代码中处理这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T14:35:18.913

您可以使用[Apache Commons Lang的](http://commons.apache.org/lang/)[unescapeHtml](http://commons.apache.org/lang/apidocs/org/apache/commons/lang3/StringEscapeUtils.html#unescapeHtml4%28java.lang.String%29) -Method来转义/取消转义您的 html。

# c++ - 这个“异常数据”是关于什么的？- C++

> ID：14001910
> 
> 赞同：25
> 
> 时间：2012-12-22T10:07:41.983
> 
> 标签：c++, floating-point, hardware, cpu

我想对*“非规范数据”*及其含义有一个广泛的看法，因为我认为我唯一正确的是，从程序员的角度来看，它与浮点值特别相关，并且与一般情况有关-从 CPU 角度计算的方法。

有人可以帮我解密这两个字吗？

*编辑*

*请记住，我面向 C++ 应用程序并且只面向 C++ 语言。*

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-22T11:21:57.710

您询问 C++，但浮点值和编码的细节是由浮点规范决定的，特别是 IEEE 754，而不是 C++。IEEE 754 是迄今为止使用最广泛的浮点规范，我将使用它来回答。

在 IEEE 754 中，二进制浮点值由三部分编码：符号位*s*（0 表示正，1 表示负）、偏置指数*e*（表示的指数加上固定偏移量）和有效位字段*f*（分数部分）。对于普通数，这些精确地表示数字 (-1) ^(*s*) • 2 ^(*e* -<i>bias) • 1\. *f*，其中 1\. *f*是通过在“1.”之后写入有效位而形成的二进制数字。（例如，如果有效数字字段有十位 0010111011，则它表示有效数字 1.0010111011 [2]，即 1.182617175 或 1211/1024。）

偏差取决于浮点格式。对于 64 位 IEEE 754 二进制，指数字段有 11 位，偏差为 1023。当实际指数为 0 时，编码的指数字段为 1023。实际指数为 -2、-1、0、1 和 2编码指数为 1021、1022、1023、1024 和 1025。当有人说次正规数的指数为零时，他们的意思是编码指数为零。实际指数将小于 -1022。对于 64 位，正常指数间隔为 -1022 到 1023（编码值 1 到 2046）。当指数超出此区间时，会发生特殊情况。

在这个区间之上，浮点数停止表示有限数。2047 的编码指数（全为 1 位）表示无穷大（有效位字段设置为零）。低于此范围，浮点数变为次正规数。当编码指数为零时，有效位字段表示 0\. *f*而不是 1\. *f*。

这有一个重要的原因。如果最低指数值只是另一种正常编码，那么其有效数字的低位将太小而无法单独表示为浮点值。如果没有前面的“1.”，就无法说出第一个 1 位在哪里。例如，假设您有两个数字，它们的指数都最低，有效数字为 1.0010111011 [2]和 1.0000000000 [2]。当你减去有效数字时，结果是 .0010111011 [2]. 不幸的是，没有办法将其表示为正常数字。因为您已经处于最低指数，所以您无法表示在此结果中第一个 1 所在位置所需的较低指数。由于数学结果太小而无法表示，因此计算机将被迫返回最接近的可表示数字，该数字为零。

这会在浮点系统中创建不受欢迎的属性，`a != b`但`a-b == 0`. 为了避免这种情况，使用了次正规数。通过使用次正规数，我们有一个实际指数不减少的特殊区间，我们可以执行算术而不创建太小而无法表示的数字。当编码指数为零时，实际指数与编码指数为一时相同，但有效数字的值变为 0\. *f*而不是 1\. *f*。当我们这样做时，`a != b`保证计算的值`a-b`不为零。

以下是 64 位 IEEE 754 二进制浮点编码中的值组合：

| 符号 | 指数 ( *e* ) | 有效位 ( *f* ) | 意义 |
| --- | --- | --- | --- |
| 0 | 0 | 0 | +零 |
| 0 | 0 | 非零 | +2 ^(-1022) •0。*f*（次正常） |
| 0 | 1 至 2046 | 任何事物 | +2 ^(*e* −1023) •1。*f*（正常） |
| 0 | 2047 | 0 | +无穷大 |
| 0 | 2047 | 非零但高位关闭 | +，信号 NaN |
| 0 | 2047 | 高位开启 | +, 安静的 NaN |
| 1 | 0 | 0 | -零 |
| 1 | 0 | 非零 | -2 ^(-1022) •0。*f*（次正常） |
| 1 | 1 至 2046 | 任何事物 | -2 ^(*e* -1023) •1。*f*（正常） |
| 1 | 2047 | 0 | −无穷大 |
| 1 | 2047 | 非零但高位关闭 | −, 信号 NaN |
| 1 | 2047 | 高位开启 | −, 安静的 NaN |

一些注意事项：

+0 和 -0 在数学上相等，但符号被保留。精心编写的应用程序可以在某些特殊情况下使用它。

NaN 的意思是“不是数字”。通常，这意味着发生了一些非数学结果或其他错误，应该放弃计算或以其他方式重做。通常，使用 NaN 的操作会产生另一个 NaN，从而保留出现问题的信息。例如，`3 + NaN`产生一个 NaN。信号 NaN 旨在引起异常，或者指示程序出错或允许其他软件（例如，调试器）执行某些特殊操作。安静的 NaN 旨在传播到进一步的结果，允许完成大型计算的其余部分，在 NaN 只是大量数据的一部分并且稍后将单独处理或将被丢弃的情况下。

符号 + 和 - 与 NaN 一起保留，但没有数学价值。

在正常编程中，您不应该关心浮点编码，除非它告诉您浮点计算的限制和行为。对于次正规数，您不需要做任何特别的事情。

不幸的是，一些处理器被破坏，因为它们要么违反 IEEE 754 标准，将次正规数更改为零，要么在使用次正规数时执行速度非常慢。在为此类处理器编程时，您可能会尽量避免使用次正规数。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-22T11:44:42.880

要了解非正常浮点值，您首先必须了解正常浮点值。浮点值具有尾数和指数。在十进制值中，如 1.2345E6，1.2345 是尾数，6 是指数。浮点表示法的一个好处是您始终可以将其标准化。像 0.012345E8 和 0.12345E7 与 1.2345E6 的值相同。或者换句话说，你总是可以让尾数的第一个数字为非零数字，只要值不为零。

计算机以二进制形式存储浮点值，数字为 0 或 1。因此，非零二进制浮点值的一个属性是它始终可以从 1 开始写入。

这是一个非常有吸引力的优化目标。由于该值始终以 1 开头，*因此存储该 1 没有意义*。它的好处是您实际上可以免费获得额外的精度。在 64 位双精度上，尾数具有 52 位存储空间。由于隐含的 1，实际精度为 53 位。

我们必须讨论可以以这种方式存储的最小可能浮点值。首先以十进制执行，如果您有一个十进制处理器，尾数存储 5 位，指数存储 2，那么它可以存储的非零的最小值是 1.00000E-99。1 是未存储的隐含数字（不适用于十进制，但请耐心等待）。所以尾数存储 00000，指数存储 -99。您不能存储较小的数字，指数在 -99 处达到最大值。

嗯，你可以。您可以放弃规范化表示并忘记隐含的数字优化。您可以将其存储为*de-normalized*。现在您可以存储 0.1000E-99 或 1.000E-100。一直到 0.0001E-99 或 1E-103，这是您现在可以存储的绝对最小数字。

这通常是可取的，它扩展了您可以存储的值的范围。这在实际计算中往往很重要，在微分分析等实际问题中，非常小的数字非常常见。

然而，它也有一个大问题，你会失去非规范化数字的准确性。浮点计算的准确性受到您可以存储的位数的限制。我以假十进制处理器为例，它很直观，它只能用 5 个有效数字进行计算。只要将值标准化，您总是会得到 5 个有效数字。

但是当你去规范化时你会丢失数字。0.1000E-99 和 0.9999E-99 之间的任何值都只有 4 个有效数字。0.0100E-99 和 0.0999E-99 之间的任何值都只有 3 个有效数字。一直到 0.0001E-99 和 0.0009E-99，只剩下一位有效数字。

这会大大降低最终计算结果的准确性。更糟糕的是，它以一种高度不可预测的方式这样做，因为这些非常小的非标准化值往往会出现在更复杂的计算中。这当然需要担心，当它只剩下 1 个有效数字时，你不能再真正相信最终结果了。

浮点处理器有办法让您知道这一点，或者以其他方式绕过问题。例如，它们可以在值变得非规范化时生成中断或信号，让您中断计算。他们有一个“清零”选项，状态字中的一个位告诉处理器自动将所有非正常值转换为零。这往往会产生无穷大，一个结果告诉你结果是垃圾，应该被丢弃。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-11-08T08:16:47.673

**IEEE 754 基础知识**

首先让我们回顾一下 IEEE 754 号码组织的基础知识。

让我们首先关注单精度（32 位）。

格式为：

*   1位：符号
*   8 位：指数
*   23 位：分数

或者如果你喜欢图片：

[![在此处输入图像描述](../Images/cd4766111a4e5b1068c7d28ae0823620.png)](https://i.stack.imgur.com/x3va3.png)

[来源](https://en.wikipedia.org/wiki/File:Float_example.svg)。

符号很简单：0 是积极的，1 是消极的，故事结束。

指数是 8 位长，因此它的范围是 0 到 255。

指数被称为有偏的，因为它的偏移量为`-127`，例如：

```
 0 == special case: zero or subnormal, explained below
  1 == 2 ^ -126
    ...
125 == 2 ^ -2
126 == 2 ^ -1
127 == 2 ^  0
128 == 2 ^  1
129 == 2 ^  2
    ...
254 == 2 ^ 127
255 == special case: infinity and NaN 
```

**领先位约定**

在设计 IEEE 754 时，工程师注意到除了 之外的所有数字`0.0`都有一个`1`二进制数字作为第一个数字

例如：

```
25.0   == (binary) 11001 == 1.1001 * 2^4
 0.625 == (binary) 0.101 == 1.01   * 2^-1 
```

两者都从那个烦人的`1.`部分开始。

因此，让该数字几乎占据每个数字的精度位是浪费的。

出于这个原因，他们创建了“领先位约定”：

> 总是假设数字以一开头

但是接下来怎么处理`0.0`呢？好吧，他们决定创建一个例外：

*   如果指数为 0
*   分数为 0
*   那么数字代表正负`0.0`

这样字节`00 00 00 00`也代表`0.0`，看起来不错。

如果我们只考虑这些规则，那么可以表示的最小非零数将是：

*   指数：0
*   分数：1

由于前导位约定，它在十六进制分数中看起来像这样：

```
1.000002 * 2 ^ (-127) 
```

其中`.000002`是 22 个零，`1`最后是 a。

我们不能拿`fraction = 0`，否则那个数字就是`0.0`。

但随后同样具有敏锐艺术感的工程师们想：这不丑吗？我们从直接跳到`0.0`甚至不是 2 的正确幂的东西？我们不能以某种方式代表更小的数字吗？

**非正规数**

工程师们挠了挠头，然后像往常一样，带着另一个好主意回来了。如果我们创建一个新规则会怎样：

> 如果指数为 0，则：
> 
> *   前导位变为 0
> *   指数固定为-126（不是-127，好像我们没有这个例外）
> 
> 这样的数字称为次正规数（或同义的非正规数）。

这条规则立即暗示了这样的数字：

*   指数：0
*   分数：0

is `0.0`，这有点优雅，因为它意味着要跟踪的规则更少。

所以`0.0`根据我们的定义实际上是一个次正规数！

有了这个新规则，最小的非次正规数是：

*   指数：1（0 为次正态）
*   分数：0

这代表：

```
1.0 * 2 ^ (-126) 
```

那么，最大的次正规数是：

*   指数：0
*   分数：0x7FFFFF（23 位 1）

这等于：

```
0.FFFFFE * 2 ^ (-126) 
```

where`.FFFFFE`又是点右侧的 23 位。

这非常接近最小的非次正规数，这听起来很正常。

最小的非零次正规数是：

*   指数：0
*   分数：1

这等于：

```
0.000002 * 2 ^ (-126) 
```

这看起来也很接近`0.0`！

由于找不到任何合理的方法来表示小于该数字的数字，工程师们很高兴，于是又回到了网上查看猫的图片，或者他们在 70 年代所做的任何事情。

如您所见，次正规数在精度和表示长度之间进行权衡。

作为最极端的例子，最小的非零次正规：

```
0.000002 * 2 ^ (-126) 
```

本质上具有一位而不是 32 位的精度。例如，如果我们将其除以二：

```
0.000002 * 2 ^ (-126) / 2 
```

我们实际上达到`0.0`了！

**可运行的 C 示例**

现在让我们使用一些实际代码来验证我们的理论。

在几乎所有当前和台式机中，C`float`表示单精度 IEEE 754 浮点数。

我的 Ubuntu 18.04 amd64 笔记本电脑尤其如此。

有了这个假设，所有断言都通过以下程序：

不正常的.c

```
#if __STDC_VERSION__ < 201112L
#error C11 required
#endif

#ifndef __STDC_IEC_559__
#error IEEE 754 not implemented
#endif

#include <assert.h>
#include <float.h> /* FLT_HAS_SUBNORM */
#include <inttypes.h>
#include <math.h> /* isnormal */
#include <stdlib.h>
#include <stdio.h>

#if FLT_HAS_SUBNORM != 1
#error float does not have subnormal numbers
#endif

typedef struct {
    uint32_t sign, exponent, fraction;
} Float32;

Float32 float32_from_float(float f) {
    uint32_t bytes;
    Float32 float32;
    bytes = *(uint32_t*)&f;
    float32.fraction = bytes & 0x007FFFFF;
    bytes >>= 23;
    float32.exponent = bytes & 0x000000FF;
    bytes >>= 8;
    float32.sign = bytes & 0x000000001;
    bytes >>= 1;
    return float32;
}

float float_from_bytes(
    uint32_t sign,
    uint32_t exponent,
    uint32_t fraction
) {
    uint32_t bytes;
    bytes = 0;
    bytes |= sign;
    bytes <<= 8;
    bytes |= exponent;
    bytes <<= 23;
    bytes |= fraction;
    return *(float*)&bytes;
}

int float32_equal(
    float f,
    uint32_t sign,
    uint32_t exponent,
    uint32_t fraction
) {
    Float32 float32;
    float32 = float32_from_float(f);
    return
        (float32.sign     == sign) &&
        (float32.exponent == exponent) &&
        (float32.fraction == fraction)
    ;
}

void float32_print(float f) {
    Float32 float32 = float32_from_float(f);
    printf(
        "%" PRIu32 " %" PRIu32 " %" PRIu32 "\n",
        float32.sign, float32.exponent, float32.fraction
    );
}

int main(void) {
    /* Basic examples. */
    assert(float32_equal(0.5f, 0, 126, 0));
    assert(float32_equal(1.0f, 0, 127, 0));
    assert(float32_equal(2.0f, 0, 128, 0));
    assert(isnormal(0.5f));
    assert(isnormal(1.0f));
    assert(isnormal(2.0f));

    /* Quick review of C hex floating point literals. */
    assert(0.5f == 0x1.0p-1f);
    assert(1.0f == 0x1.0p0f);
    assert(2.0f == 0x1.0p1f);

    /* Sign bit. */
    assert(float32_equal(-0.5f, 1, 126, 0));
    assert(float32_equal(-1.0f, 1, 127, 0));
    assert(float32_equal(-2.0f, 1, 128, 0));
    assert(isnormal(-0.5f));
    assert(isnormal(-1.0f));
    assert(isnormal(-2.0f));

    /* The special case of 0.0 and -0.0\. */
    assert(float32_equal( 0.0f, 0, 0, 0));
    assert(float32_equal(-0.0f, 1, 0, 0));
    assert(!isnormal( 0.0f));
    assert(!isnormal(-0.0f));
    assert(0.0f == -0.0f);

    /* ANSI C defines FLT_MIN as the smallest non-subnormal number. */
    assert(FLT_MIN == 0x1.0p-126f);
    assert(float32_equal(FLT_MIN, 0, 1, 0));
    assert(isnormal(FLT_MIN));

    /* The largest subnormal number. */
    float largest_subnormal = float_from_bytes(0, 0, 0x7FFFFF);
    assert(largest_subnormal == 0x0.FFFFFEp-126f);
    assert(largest_subnormal < FLT_MIN);
    assert(!isnormal(largest_subnormal));

    /* The smallest non-zero subnormal number. */
    float smallest_subnormal = float_from_bytes(0, 0, 1);
    assert(smallest_subnormal == 0x0.000002p-126f);
    assert(0.0f < smallest_subnormal);
    assert(!isnormal(smallest_subnormal));

    return EXIT_SUCCESS;
} 
```

[GitHub 上游](https://github.com/cirosantilli/cpp-cheat/blob/91b136707f64f99c0aba3f01a445a3337d394967/c/interactive/subnormal.c).

编译并运行：

```
gcc -ggdb3 -O0 -std=c11 -Wall -Wextra -Wpedantic -Werror -o subnormal.out subnormal.c
./subnormal.out 
```

**可视化**

对我们所学的东西有几何直觉总是一个好主意，所以就这样吧。

如果我们为每个给定的指数在一条线上绘制 IEEE 754 浮点数，它看起来像这样：

```
 +---+-------+---------------+
exponent  |126|  127  |      128      |
          +---+-------+---------------+
          |   |       |               |
          v   v       v               v
          -----------------------------
floats    ***** * * * *   *   *   *   *
          -----------------------------
          ^   ^       ^               ^
          |   |       |               |
          0.5 1.0     2.0             4.0 
```

从中我们可以看到对于每个指数：

*   表示的数字之间没有重叠
*   对于每个指数，我们有相同的数字 2^32 数字（这里用 4 表示`*`）
*   给定指数的点等距
*   更大的指数覆盖更大的范围，但点更分散

现在，让我们一直把它降低到指数 0。

没有次正规（假设）：

```
 +---+---+-------+---------------+
exponent  | ? | 0 |   1   |       2       |
          +---+---+-------+---------------+
          |   |   |       |               |
          v   v   v       v               v
          ---------------------------------
floats    *   ***** * * * *   *   *   *   *
          ---------------------------------
          ^   ^   ^       ^               ^
          |   |   |       |               |
          0   |   2^-126  2^-125          2^-124
              |
              2^-127 
```

与次正规：

```
 +-------+-------+---------------+
exponent  |   0   |   1   |       2       |
          +-------+-------+---------------+
          |       |       |               |
          v       v       v               v
          ---------------------------------
floats    * * * * * * * * *   *   *   *   *
          ---------------------------------
          ^   ^   ^       ^               ^
          |   |   |       |               |
          0   |   2^-126  2^-125          2^-124
              |
              2^-127 
```

通过比较两张图，我们可以看到：

*   subnormals 将指数范围的长度加倍`0`，从`[2^-127, 2^-126)`到`[0, 2^-126)`

    低于正常范围的浮点数之间的空间与 for 相同`[0, 2^-126)`。

*   该范围`[2^-127, 2^-126)`的点数是没有次正规线的点数的一半。

    这些点的一半用于填充范围的另一半。

*   该范围`[0, 2^-127)`有一些低于正常值的点，但没有。

*   范围`[2^-128, 2^-127)`有一半的点比`[2^-127, 2^-126)`。

    这就是我们所说的次正规是大小和精度之间的权衡时的意思。

`0`在这个设置中，我们在和之间会有一个空白`2^-127`，这不是很优雅。

然而，该区间填充得很好，并且包含`2^23`像其他任何浮点数一样的浮点数。

**实现**

x86_64 直接在硬件上实现 IEEE 754，C 代码转换为硬件。

TODO：有没有什么值得注意的现代硬件没有次规范的例子？

TODO：是否有任何实现允许在运行时控制它？

在某些实现中，次法线似乎不如法线快：[为什么将 0.1f 更改为 0 会使性能降低 10 倍？](https://stackoverflow.com/questions/9314534/why-does-changing-0-1f-to-0-slow-down-performance-by-10x)

**无穷大和 NaN**

这是一个简短的可运行示例：[C 中浮点数据类型的范围？](https://stackoverflow.com/questions/10108053/ranges-of-floating-point-datatype-in-c/53204544#53204544)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-22T10:12:30.550

来自[IEEE 文档](http://steve.hollasch.net/cgindex/coding/ieeefloat.html)

> 如果指数全为 0，但分数非零（否则将被解释为零），则该值是非规范化数字，在二进制点之前没有假定的前导 1。因此，这表示一个数字 (-1)s × 0.f × 2-126，其中 s 是符号位，f 是小数。对于双精度，非规格化数的形式为 (-1)s × 0.f × 2-1022。由此，您可以将零解释为一种特殊类型的非规范化数字。

# hsqldb - HSQL 数据存储

> ID：14001915
> 
> 赞同：2
> 
> 时间：2012-12-22T10:09:30.843
> 
> 标签：hsqldb

我第一次使用 HSQL。当我使用 HSQL 数据库服务器引擎连接 DatabaseMAnagerSwing 时，我看到一个**PUBLIC**模式已经存在，并且它包含该模式下的一些表，例如客户等。

**我想知道当我将模式用作HSQL 数据库服务器引擎**时，数据（即公共模式和该模式的表）存储在哪里？

有人可以解释一下吗？

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T12:15:32.453

数据存储在文件中，就像在嵌入式模式下运行 HSQLDB 一样。要为服务器管理的每个数据库配置文件的存储位置，您可以在启动服务器时提供[命令行参数：](http://hsqldb.org/doc/2.0/guide/running-chapt.html#rgc_hsql_server)

```
java -cp ../lib/hsqldb.jar org.hsqldb.server.Server --database.0 file:mydb --dbname.0 xdb 
```

或求助于[属性文件](http://www.hsqldb.org/doc/guide/ch04.html#N10A68)：

```
database.0=file:/opt/db/accounts
dbname.0=an_alias

database.1=file:/opt/db/mydb
dbname.1=enrollments

database.2=mem:adatabase
dbname.2=quickdb 
```

连接层独立于物理层。这意味着您可以访问最初由服务器进程以嵌入式模式创建的数据库文件，反之亦然。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T14:48:08.427

Anthony 的回答涵盖了如何指定数据库文件的位置。

回复：“看到一个 PUBLIC 模式已经存在，并且它包含该模式下的一些表，例如客户等。”

PUBLIC 模式已存在于新数据库中。但是，当您单击 DatabaseManager 菜单中的“选项”项并从下拉菜单中选择“插入测试数据”时，您看到的表是由您创建的。

当 HSQLDB 的 Server 实例在未指定数据库文件位置的情况下启动时，文件将在执行用于启动服务器的 Java 命令的目录中创建。

A database can contain multiple schemas. All schemas are stored in the same set of database files.

# php - PHP Web Service NuSOAP complex type

> ID：14001916
> 
> 赞同：0
> 
> 时间：2012-12-22T10:09:40.913
> 
> 标签：php, soap, wsdl, nusoap, complextype

I wrote php web service using NuSOAP and client script. I used array complex type to return an array of complex type, but it's print nothing!!

**server.php**

```
<?php
        // Pull in the NuSOAP code
        require_once('nusoap-php5-0.9/lib/nusoap.php');
        ini_set ('soap.wsdl_cache_enabled', 0);
        // Create the server instance
        $server = new soap_server();
        // Initialize WSDL support
        $server->configureWSDL('GetCus', 'urn:GetCus');

        $server->wsdl->addComplexType(
    'Product',
    'complexType',
    'struct',
    'all',
    '',
    array(
        'Name' => array('name'=>'name','type'=>'xsd:string'),
        'Code' => array('name'=>'product_number','type'=>'xsd:string'),
    'Price' => array('name'=>'price','type'=>'xsd:int'),
        'Ammount' => array('name'=>'quantity','type'=>'xsd:int')
    )
);

$server->wsdl->addComplexType(
    'ProductArray',
    'complexType',
    'array',
    '',
    'SOAP-ENC:Array',
    array(),
    array(
        array('ref'=>'SOAP-ENC:arrayType','wsdl:arrayType'=>'tns:Product[]')
    ),
    'tns:Product'
);

           // Register the method to expose
        $server->register('GetProductsByCode',                    // method name
            array(),          // input parameters
            array('return' => 'tns:ProductArray'),    // output parameters tns:Customer
            'urn:GetCus',                         // namespace
            'urn:GetCus#GetProductsByCode',                   // soapaction
            'rpc',                                    // style
            'encoded',                                // use
            'Get Customer Information'        // documentation
        );

   function GetProductsByCode()
   {
        $productArray=array();
        for($i=0; $i<5 ; $i++)
        {
          $product=array('Name' => 'somthing'.$i,
            'Code' => '23456yui'.$i,
            'Price' => 222*($i+1),
            'Ammount' => 5+$i
            );  
            $productArray[]=$product;
        }
     return $productArray;
   }
?> 
```

server.php return product array

**client.php**

```
<?php
require_once('nusoap-php5-0.9/lib/nusoap.php');
ini_set ('soap.wsdl_cache_enabled', 0);
try{
  $sClient = new nusoap_client('http://localhost/DataBaseTest/nusoap_server2.php?wsdl','wsdl','','','','');
  $response = $sClient->call('GetProductsByCode',array(),'','', false,true);
  print_r($response);
} catch(SoapFault $e){
  var_dump($e);
}
?> 
```

the client.php print the function result

pleas help me. thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T03:23:20.630

在这里，您的 WSDL 不起作用。转到您的 ..../server.php?wsdl。什么都没有显示。使用**$server->service(isset($HTTP_RAW_POST_DATA) ? $HTTP_RAW_POST_DATA : '');** 在 php 结束标记（？>）之前。那会做你的事情。保存后只需运行您的客户端。它将显示您的数组。

# android - 勘误通知活动

> ID：14001917
> 
> 赞同：0
> 
> 时间：2012-12-22T10:09:51.820
> 
> 标签：android

我有 2 个以警报管理器开头的通知。运行完美，但我有一个问题：当第一个通知处于活动状态时（在通知栏中），如果我不点击它，并且第二个通知开始，我会看到新通知，但如果我点击新活动显示第一个通知。

```
String ns = Context.NOTIFICATION_SERVICE;
NotificationManager mNotificationManager = (NotificationManager) context.getSystemService(ns);

int icon = R.drawable.ic_launcher;
CharSequence tickerText = not1[x];
long when = System.currentTimeMillis();

Notification notification = new Notification(icon, tickerText, when);

CharSequence contentTitle = "title";
CharSequence contentText = not1[x];

Intent notificationIntent = new Intent("org.gortcloud.perledisaggezza", null, context, Notify.class);
notificationIntent.putExtra("notify", not1[x]);
PendingIntent contentIntent = PendingIntent.getActivity(context, 0, notificationIntent, 0);
notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);

notification.defaults |= Notification.DEFAULT_SOUND;
notification.defaults |= Notification.DEFAULT_VIBRATE;
notification.defaults |= Notification.FLAG_AUTO_CANCEL;
notification.flags |= Notification.FLAG_AUTO_CANCEL | Notification.FLAG_SHOW_LIGHTS;

final int HELLO_ID = 1;

mNotificationManager.notify(HELLO_ID, notification); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T10:24:16.467

尝试将以下标志添加到您的待处理意图中， `PendingIntent.FLAG_CANCEL_CURRENT`

像这样的东西，

```
PendingIntent.getActivity(context,1, IntentObj, PendingIntent.FLAG_CANCEL_CURRENT); 
```

在您的代码中，

```
PendingIntent contentIntent = PendingIntent.getActivity(context, 1, notificationIntent,PendingIntent.FLAG_CANCEL_CURRENT); 
```

# c# - WCF Post 操作遇到 400 错误请求 - 本地主机 IIS 7.5 上的主机名无效

> ID：14001918
> 
> 赞同：2
> 
> 时间：2012-12-22T10:10:01.557
> 
> 标签：c#, wcf, post

我可以使用一些帮助，因为我已经被困 2 天了。我用谷歌搜索，但找不到正确的解决方案。

任何人都可以帮助解决如何修复或如何更好地调试吗？

发送到本地主机的内容

```
POST /Service1.svc/addt HTTP/1.1
Content-Type: application/json
Host: localhost.:13309
Content-Length: 25 
Expect: 100-continue
Connection: Keep-Alive 
```

响应（使用提琴手查看）

```
> <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN""http://www.w3.org/TR/html4/strict.dtd">
<HTML><HEAD><TITLE>Bad Request</TITLE>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=us-ascii"></HEAD>
<BODY><h2>Bad Request - Invalid Hostname</h2>
<hr><p>HTTP Error 400\. The request hostname is invalid.</p>
</BODY></HTML> 
```

GET 操作运行正常，所以我觉得确实是 POST 操作出错了。

有关 Web.config 和 Post 操作下方的信息

```
string requestData = "{\"ID\":1,\"Make\":\"Ferrari\"}";
byte[] data = Encoding.UTF8.GetBytes(requestData);
request = (HttpWebRequest)WebRequest.Create("http://localhost.:13309/Service1.svc/addt");
request.Method = "POST";
request.ContentType = "application/json";
request.ContentLength = data.Length;
Stream dataStream = request.GetRequestStream();
dataStream.Write(data, 0, data.Length);
dataStream.Close();
WebResponse webr = request.GetResponse();

<system.web>
    <compilation debug="true" targetFramework="4.5" />
    <customErrors mode="Off"/>
    <httpRuntime requestPathInvalidCharacters="&lt;,&gt;,*,%,:,\,?" maxRequestLength="2097151" />
  </system.web>
  <system.serviceModel>
    <services>
      <service name="FinanceService.Service1" behaviorConfiguration="ServiceBehaviour">
        <!-- Service Endpoints -->
        <!-- Unless fully qualified, address is relative to base address supplied above -->
        <endpoint address ="" binding="webHttpBinding" contract="FinanceService.IService1" behaviorConfiguration="web">
          <!-- 
              Upon deployment, the following identity element should be removed or replaced to reflect the 
              identity under which the deployed service runs.  If removed, WCF will infer an appropriate identity 
              automatically.
          -->
        </endpoint>
      </service>
    </services>

    <behaviors>
      <serviceBehaviors>
        <behavior name="ServiceBehaviour">
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="web">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T10:33:58.093

自己解决了 - 从教程中的文件开始，让它们工作，然后逐步进行更改，直到我得到所需的结果。

赞美本[教程](http://www.codeproject.com/Articles/201901/CREATE-RESTful-WCF-Service-API-Using-POST-Step-By)

结合 WCF Post 查看 400 bad request 上的大量项目，这里有一些指示。

1.  Web.Config 似乎不需要太多关注。如果它适用于 GET，则很可能已为 POST 操作正确配置

2.  您要发布的正文/数据的格式非常烦躁！如果您声称它是 JSON，请确保它是正确的 JSON。我的（天真）印象是，无论我放入身体中的什么，都会在另一端出来，但显然服务器会进行检查，并返回“错误请求”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T19:49:39.757

您在问如何更好地调试。我强烈建议不要添加 . 之后`localhost`。在这种情况下，您很可能会遇到另一个错误。

请参考“[为什么我看不到发送到 http://localhost 或 http://127.0.0.1 的流量](http://www.fiddler2.com/fiddler/help/hookup.asp#Q-LocalTraffic)”

> 最简单的解决方法是使用您的机器名称作为主机名，而不是使用 Localhost 或 127.0.0.1。因此，例如，与其点击 http:// **localhost** :8081/mytestpage.aspx，不如访问 http:// **machinename** :8081/mytestpage.aspx。

希望能帮助您发现与使用 POST 方法相关的真正错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-26T06:59:03.083

如果你使用 NInject 来激活它，你应该使用 NinjectServiceHostFactory。

# vb.net - 使用 windows 窗体执行 .exe 文件

> ID：14001922
> 
> 赞同：1
> 
> 时间：2012-12-22T10:11:51.383
> 
> 标签：vb.net, winforms, node.js

我想执行一个 .exe 文件，该文件在单击按钮时使用 windows forms(vb.net) 启动我的 node.js 应用程序。我在用

```
 Process.Start("C:\Users\PROG21\Desktop\chat\start.exe") 
```

问题是它启动命令窗口并在 3-4 秒内自动关闭。为什么会这样？这仅在 Node.js 应用程序中发生，其他 .exe 文件通过此代码顺利运行。

在其他按钮上单击我想关闭终止 Node.js 应用程序的命令窗口。我该如何实现它？

任何帮助，将不胜感激

干杯吉夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T14:36:40.300

不同之处在于您使用命令解释器从命令行启动它。在程序终止后保持窗口打开。当您从自己的程序启动它时，不会发生这种情况。

像这样更改 Process.Start() 调用：

```
Process.Start("cmd.exe", "/k C:\Users\PROG21\Desktop\chat\start.exe") 
```

/k 选项在程序完成后保持控制台窗口打开。

# regex - 将字符串拆分为参数和值

> ID：14001923
> 
> 赞同：2
> 
> 时间：2012-12-22T10:12:08.187
> 
> 标签：regex, vb.net

我知道基本的拆分字符串操作，但作为 VB.NET 初学者，我想知道这里是否存在一些方便的方法来拆分带有参数（令牌）的字符串。
字符串的大小和内容可能不同，但始终具有相同的模式“[参数]->值”。
像这样：

```
[name] John [year]   1990 [gender]M[state] Washington[married] No[employed] No 
```

如何解析这个语法错误的写入字符串以获取参数->值对？

编辑：请提供代码、正则表达式或类似的示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T10:49:46.693

您可以使用正则表达式执行此操作：

```
Dim RegexObj As New Regex( _
    "\[         # Match an opening bracket"                         & chr(10) & _
    "(?<name>   # Match and capture into group ""name"":"           & chr(10) & _
    " [^[\]]*   # any number of characters except brackets"         & chr(10) & _
    ")          # End of capturing group"                           & chr(10) & _
    "\]         # Match a closing bracket"                          & chr(10) & _
    "\s*        # Match optional whitespace"                        & chr(10) & _
    "(?<value>  # Match and capture into group ""value"":"          & chr(10) & _
    " [^[\]]*?  # any number of characters except brackets"         & chr(10) & _
    ")          # End of capturing group"                           & chr(10) & _
    "(?=        # Assert that we end this match either when"        & chr(10) & _
    " \s*\[     # optional whitespace and an opening bracket"       & chr(10) & _
    "|          # or"                                               & chr(10) & _
    " \s*$      # whitespace and the end of the string"             & chr(10) & _
    ")          # are present after the current position", _
    RegexOptions.IgnorePatternWhitespace)
Dim MatchResults As Match = RegexObj.Match(SubjectString)
While MatchResults.Success
    parameter = MatchResults.Groups("name").Value
    value = MatchResults.Groups("value").Value
    ' do something with the parameter/value pairs
    MatchResults = MatchResults.NextMatch()
End While 
```

# jquery - Jquery一次移动列表框中的所有项目

> ID：14001924
> 
> 赞同：2
> 
> 时间：2012-12-22T10:12:17.553
> 
> 标签：jquery, listbox

我正在处理一个小的 jquery 脚本，这里是链接[http://jsfiddle.net/RbLVQ/60/](http://jsfiddle.net/RbLVQ/60/)我想将选定的项目从一个列表框移动到另一个列表框到另一个列表框，但是现在我想移动**所有项目一次**，意味着我将在点击后放置一个**“全选”**项目/按钮所有项目必须转到其他列表框任何人都可以帮助解决这个问题

JavaScript

```
$(document).ready(function() {
    $('#btnRight').click(function(e) {
        var selectedOpts = $('#lstBox1 option:selected');
        if (selectedOpts.length == 0) {
            alert("Nothing to move.");
            e.preventDefault();
        }

        $('#lstBox2').append($(selectedOpts).clone());
        $(selectedOpts).remove();
        e.preventDefault();
    });

    $('#btnLeft').click(function(e) {
        var selectedOpts = $('#lstBox2 option:selected');
        if (selectedOpts.length == 0) {
            alert("Nothing to move.");
            e.preventDefault();
        }

        $('#lstBox1').append($(selectedOpts).clone());
        $(selectedOpts).remove();
        e.preventDefault();
    });
}); 
```

HTML

```
<table style='width:370px;'>
    <tr>
        <td style='width:160px;'>
            <b>Group 1:</b><br/>
           <select multiple="multiple" id='lstBox1'>
              <option value="ajax">Ajax</option>
              <option value="jquery">jQuery</option>
              <option value="javascript">JavaScript</option>
              <option value="mootool">MooTools</option>
              <option value="prototype">Prototype</option>
              <option value="dojo">Dojo</option>
        </select>
    </td>
    <td style='width:50px;text-align:center;vertical-align:middle;'>
        <input type='button' id='btnRight' value ='  >  '/>
        <br/><input type='button' id='btnLeft' value ='  <  '/>
    </td>
    <td style='width:160px;'>
        <b>Group 2: </b><br/>
        <select multiple="multiple" id='lstBox2'>
          <option value="asp">ASP.NET</option>
          <option value="c#">C#</option>
          <option value="vb">VB.NET</option>
          <option value="java">Java</option>
          <option value="php">PHP</option>
          <option value="python">Python</option>  
        </select>
    </td>
</tr>
</table> 
```

和一些 CSS

```
body
{
    padding:10px;
    font-family:verdana;
    font-size:8pt;
}

select
{
    font-family:verdana;
    font-size:8pt;
    width : 150px;
    height:100px;
}
input
{
    text-align: center;
    v-align: middle;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T10:17:28.833

你可以这样做

[你更新的小提琴](http://jsfiddle.net/RbLVQ/62/)

HTML：

```
<input type='button' id='btnRightAll' value ='  >>  '/> 
```

JavaScript：

```
$('#btnRightAll').click(function(e) {
    var selectedOpts = $('#lstBox1 option');
    if (selectedOpts.length == 0) {
        alert("Nothing to move.");
        e.preventDefault();
    }

    $('#lstBox2').append($(selectedOpts).clone());
    $(selectedOpts).remove();
    e.preventDefault();
}); 
```

`:selected`从选择器中删除`$('#lstBox1 option')`，然后将选择第一个列表框中的所有选项

# java - How wait and get lock on file

> ID：14001928
> 
> 赞同：3
> 
> 时间：2012-12-22T10:13:08.380
> 
> 标签：java, nio, filelock, filechannel

I want wait till other program releases lock on particular file, then I want to proceed to open that unlocked file.

I came across many solutions, but none are useful, here is my code -

```
File file = new File("c:\\somelockedfile.txt");
    FileChannel channel = null;
    try{
        channel = new RandomAccessFile(file, "rw").getChannel();
    }catch(Exception e){
        e.printStackTrace();
    }
    try {
        // Get an exclusive lock on the whole file
        FileLock lock = channel.lock();
        try {
            doWithLockedFile(file);
        } finally {
            lock.release();
        }
    }catch(Exception e){
        e.printStackTrace();
    } finally {
        try{
            channel.close();
        }catch(Exception e){
            e.printStackTrace();
        }
    } 
```

I know when I will be running this code, file will be locked by some other Windows process, so I want to wait till other process releases lock and then I will proceed with unlocked file. If I try to open locked file I will get `FileNotFoundException` like "`(The process cannot access the file because it is being used by another process)`".

In above code I can't wait for getting lock because same exception will be thrown in line "`channel = new RandomAccessFile(file, "rw").getChannel();`"

Please help me on this, basically I want to get notified that other process has released lock on file, and till that time, I want to wait().

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T18:21:46.417

我通过观察者收到的一些睡眠和排队文件名来等待和获取锁。

**解决方案：**

```
package dirwatch;

import java.nio.file.*;
import static java.nio.file.StandardWatchEventKinds.ENTRY_CREATE;
import static java.nio.file.StandardWatchEventKinds.OVERFLOW;
import static java.nio.file.LinkOption.*;
import java.nio.file.attribute.*;
import java.io.*;
import java.util.*;
import java.util.concurrent.ArrayBlockingQueue;
import java.util.concurrent.BlockingQueue;
import java.util.concurrent.TimeUnit;

public class WatchDir {
    private final WatchService watcher;
    private final Map<WatchKey,Path> keys;
    private final boolean recursive;
    private boolean trace = false;

    private BlockingQueue<String> fileProcessingQueue;

    //******* processedFileQueue **** will be used by other threads to retrive unlocked files.. so I have 
    // kept as public final
    public final BlockingQueue<String> processedFileQueue;
    private volatile boolean closeProcessingThread;
    private volatile boolean closeWatcherThread;

    private void processFiles(){
        System.out.println("DirWatchProcessingThread Started");
        String fileName;
        outerLoop: while(!closeProcessingThread || !fileProcessingQueue.isEmpty()){
            try{
                fileName = fileProcessingQueue.poll(1000, TimeUnit.MILLISECONDS);
            }catch(InterruptedException ie){
                fileName = null;
            }

            if(fileName == null || fileName.equals("")){
                continue outerLoop;
            }

            long startTime = System.currentTimeMillis();
            innerLoop: while(true){
                FileInputStream fis = null;
                File file = new File(fileName);
                try{
                    fis = new FileInputStream(fileName);
                    break innerLoop;
                }catch(FileNotFoundException fnfe){
                    if(!file.exists() || file.isDirectory()){
                        System.out.println("File: '"+fileName+"has been deleted in file system or it is not file. Not processing this file.");
                        continue outerLoop;
                    }
                    try{
                        Thread.sleep(WatchDirParameters.millisToPuaseForFileLock);
                    }catch(InterruptedException ie){
                    }
                    if((System.currentTimeMillis() - startTime) > WatchDirParameters.millisToSwapFileForUnlocking){
                        if(fileProcessingQueue.offer(fileName)){
                            continue outerLoop;
                        }else{
                            startTime = System.currentTimeMillis();
                            continue innerLoop;
                        }
                    }
                }finally{
                    if(fis != null){
                        try{
                            fis.close();
                        }catch(IOException ioe){
                            ioe.printStackTrace();
                        }
                    }
                }
            }

            System.out.println("Queuing File: "+fileName);
            processedLoop:while(true){
                try{
                    if(processedFileQueue.offer(fileName, 1000, TimeUnit.MILLISECONDS)){
                        break processedLoop;
                    }
                }catch(InterruptedException ie){
                    //ie.printStackTrace();
                }
            }
        }
        closeWatcherThread = true;
        closeProcessingThread = true;
        System.out.println("DirWatchProcessingThread Exited");
    }

    /**
     * Process all events for keys queued to the watcher
     */
    private void processEvents(){
        System.out.println("DirWatcherThread started.");
        while(!closeWatcherThread) {
            // wait for key to be signalled
            WatchKey key;
            try {
                key = watcher.take();
            } catch (InterruptedException x) {
                // if we are returning from these method, it means we no longer wants to watch directory
                // we must close thread which may be waiting for file names in queue
                continue;
            }catch(ClosedWatchServiceException cwse){
                break;
            }

            Path dir = keys.get(key);
            if (dir == null) {
                System.err.println("WatchKey not recognized!!");
                continue;
            }

            try{
                for (WatchEvent<?> event: key.pollEvents()) {
                    WatchEvent.Kind kind = event.kind();

                    if (kind == OVERFLOW) {
                        continue;
                    }

                    // Context for directory entry event is the file name of entry
                    WatchEvent<Path> ev = cast(event);
                    Path name = ev.context();
                    Path child = dir.resolve(name);
                    if(kind.equals(ENTRY_CREATE)){
                        // if directory is created, and watching recursively, then
                        // register it and its sub-directories
                        if (recursive) {
                            try {
                                if (Files.isDirectory(child, NOFOLLOW_LINKS)) {
                                    registerAll(child);
                                    continue;
                                }
                            } catch (IOException x) {
                                // ignore to keep sample readbale
                            }
                        }
                        while(true){
                            if(fileProcessingQueue.remainingCapacity() < 2){
                                // if only one last can be inserted then don't queue this we need 1 empty space in queue
                                // for swaping file names..
                                // sleep for some time so processing thread may have made some rooms to queue in fileQueue
                                // this logic will not create any problems as only one this thread is inserting in queue
                                try{
                                    Thread.sleep(200);
                                }catch(InterruptedException ie){
                                }
                                continue;
                            }
                            if(!fileProcessingQueue.offer(child.toString())){
                                // couldn't queue this element by whatever reason.. we will try to enqueue again by continuing loop
                                continue;
                            }else{
                                // file name has been queued in queue
                                break;
                            }
                        }
                    }
                }
                // reset key and remove from set if directory no longer accessible
                boolean valid = key.reset();
                if (!valid) {
                    keys.remove(key);

                    // all directories are inaccessible
                    if (keys.isEmpty()) {
                        break;
                    }
                }
            }catch(ClosedWatchServiceException cwse){
                break;
            }

        }
        closeProcessingThread = true;
        closeWatcherThread = true;
        System.out.println("DirWatcherThread exited.");
    }

    public void stopWatching(){
        try{
            watcher.close();
        }catch(IOException ioe){
        }
        closeProcessingThread = true;
        closeWatcherThread = true;
    }

    public static WatchDir watchDirectory(String dirName, boolean recursive) throws InvalidPathException, IOException, Exception{
        try{
            Path dir = Paths.get(dirName);
            final WatchDir watchDir = new WatchDir(dir, recursive);
            watchDir.closeProcessingThread = false;
            watchDir.closeWatcherThread = false;
            new Thread(new Runnable() {
                public void run() {
                    watchDir.processFiles();
                }
            }, "DirWatchProcessingThread").start();
            new Thread(new Runnable() {
                public void run() {
                    watchDir.processEvents();
                }
            }, "DirWatcherThread").start();
            return watchDir;
        }catch(InvalidPathException ipe){
            throw ipe;
        }catch(IOException ioe){
            throw ioe;
        }catch(Exception e){
            throw e;
        }
    }

    @SuppressWarnings("unchecked")
    private static <T> WatchEvent<T> cast(WatchEvent<?> event) {
        return (WatchEvent<T>)event;
    }

    /**
     * Register the given directory with the WatchService
     */
    private void register(Path dir) throws IOException {
        //WatchKey key = dir.register(watcher, ENTRY_CREATE, ENTRY_DELETE, ENTRY_MODIFY);
        WatchKey key = dir.register(watcher, ENTRY_CREATE);
        if (trace) {
            Path prev = keys.get(key);
            if (prev == null) {
                System.out.format("register: %s\n", dir);
            } else {
                if (!dir.equals(prev)) {
                    System.out.format("update: %s -> %s\n", prev, dir);
                }
            }
        }
        keys.put(key, dir);
    }

    /**
     * Register the given directory, and all its sub-directories, with the
     * WatchService.
     */
    private void registerAll(final Path start) throws IOException {
        // register directory and sub-directories
        Files.walkFileTree(start, new SimpleFileVisitor<Path>() {
            @Override
            public FileVisitResult preVisitDirectory(Path dir, BasicFileAttributes attrs) throws IOException {
                register(dir);
                return FileVisitResult.CONTINUE;
            }
        });
    }

    /**
     * Creates a WatchService and registers the given directory
     */
    private WatchDir(Path dir, boolean recursive) throws IOException {
        fileProcessingQueue = new ArrayBlockingQueue<String>(WatchDirParameters.fileQueueSize, false);
        processedFileQueue = new ArrayBlockingQueue<String>(WatchDirParameters.fileQueueSize, false);
        this.watcher = FileSystems.getDefault().newWatchService();
        this.keys = new HashMap<WatchKey,Path>();
        this.recursive = recursive;
        //CreateTxtFile.createFile(dir, 1);
        if (recursive) {
            System.out.format("Scanning %s ...\n", dir);
            registerAll(dir);
            System.out.println("Done.");
        } else {
            register(dir);
        }

        // enable trace after initial registration
        this.trace = true;
    }
} 
```

**配置类：**

```
package dirwatch;

public class WatchDirParameters {
    public static final int millisToPuaseForFileLock = 200;
    public static final int fileQueueSize = 500;
    public static final int millisToSwapFileForUnlocking = 2000;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T16:02:46.567

也许创建一个布尔值，在 catch 部分将其设置为 true（锁定），如果您到达代码的最后一个，则将其设置为 false，这意味着它已解锁并且一切正常。最后把整个事情放在一个 do{}while(locked); 祝你好运。

# delphi - How to read a VCF (contact) file using Delphi?

> ID：14001933
> 
> 赞同：3
> 
> 时间：2012-12-22T10:14:19.167
> 
> 标签：delphi, contacts, vcf-vcard

We need a way to read (and, optionally, write) a .vcf file by using Delphi/Pascal code. A free library with source code would be perfect.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-10T15:22:03.473

AceVCard 是兼容 VCard 3.0 规范的 delphi 2009 的免费开放组件： [http ://www.torry.net/pages.php?id=524](http://www.torry.net/pages.php?id=524)

# c# - How to generate valid Sudoku board? [ and difficulty rating ]

> ID：14001935
> 
> 赞同：1
> 
> 时间：2012-12-22T10:14:30.830
> 
> 标签：c#, algorithm, sudoku

I'm working on a Sudoku programm. For the moment, I can generate a valid Sudoku board, but I can't know if I generate an easy or hard one.

Here is my aproach:

I start with generating the full board. The final board is empty.

I start fill 21 random cells with values from full board.

I find all solutions of the final board, and for each cell, count how many times the solutions differ by the full board, pick the one with the most, and fill it. ( This idea is taken from here : [How to generate Sudoku boards with unique solutions](https://stackoverflow.com/questions/6924216/how-to-generate-sudoku-boards-with-unique-solutions) first answer )

Do this, untill you have only one solution.

Now, I don't know if this aproach with 21 random cells is the right one. Sometimes I have a lot of solutions after first 21 random cells, other times a few.

For the moment I generate a final board on an average time of: 0,3 seconds.

I would like to tell me a different and fast method, beside this one, with 21 random cells, maybe where I can rank the difficulty of the board.

Thank you!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T19:34:09.380

看看这段代码，它实现了 3 个难度级别{Easy、Medium、Hard}

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace SuperSudoku
{
    public enum Difficulty
    {
        Easy, Medium, Hard
    }

    class PuzzleGenerator
    {
        private PuzzleSolver puzzleSolver;

        /// <summary>
        /// 
        /// </summary>
        public PuzzleGrid PermaGrid;

        /// <summary>
        /// 
        /// </summary>
        public PuzzleGrid SolutionGrid;

        /// <summary>
        /// 
        /// </summary>
        private Difficulty difficulty;

        /// <summary>
        /// This constructs a puzzle generator class.
        /// </summary>
        /// <param name="difficultyIn">The difficulty to generate a new puzzle.</param>
        public PuzzleGenerator(Difficulty difficultyIn)
        {
            puzzleSolver = new PuzzleSolver();
            difficulty = difficultyIn;
        }

        public PuzzleGrid InitGrid()
        {                 //Randomly fill in the first row and column of puzzlegrid
            PuzzleGrid tempGrid = new PuzzleGrid { };      //temporary grid to assign values into
            int row = 0;                           //variable for navigating 'rows'
            int col = 0;                        //variable for navigating 'columns'
            int newVal;                                  //value to place into grid
            bool solved;
            List<int> valueSet = new List<int>(Enumerable.Range(-9, 9));   //range 
                                     //of numbers that can be added to the grid
            List<int> valueSet2 = new List<int>(); //placeholder values in column 0
            Random rnd = new Random(); //random variable for choosing random number
            int randIndex = 0;       //index in valueSet/valueSet2 that is accessed
            randIndex = rnd.Next(0,8); //get a random number and place in grid(0,0)
            newVal = valueSet[randIndex]; 
            tempGrid.InitSetCell(row,col,newVal);
            valueSet.Remove(newVal);              //remove paced value from options
            for(row = 1; row < 9; row++)
            { //fills in column 0 with remaining possible values, storing in place-
              //holder as it goes so as to preserve when placing in row 0 later
                randIndex = rnd.Next(0,valueSet.Count);
                newVal = valueSet[randIndex];
                valueSet2.Add(newVal);
                valueSet.Remove(newVal);
                tempGrid.InitSetCell(row,col,newVal);
            }
               row = 0;                                               //reset row to 0
            for(col = 1; col < 3; col++)
            {        //fills in col 1,2 of row 0, checking that don't duplicate the
                                                  //values in rows 1,2 of col 0
                randIndex = rnd.Next(0,valueSet2.Count);
                newVal = valueSet2[randIndex];
                while((newVal == tempGrid.Grid[1,0]||(newVal == tempGrid.Grid[2,0])))
                {
                    randIndex = rnd.Next(0,valueSet2.Count);
                    newVal = valueSet2[randIndex];
                }
                valueSet2.Remove(newVal);
                tempGrid.InitSetCell(row,col,newVal);
            }
            for(col = 3; col < 9; col++)
            {           //fill in remainder of row 0 with remaining possible values
                randIndex = rnd.Next(0,valueSet2.Count);
                newVal = valueSet2[randIndex];
                valueSet2.Remove(newVal);
                tempGrid.InitSetCell(row,col,newVal);
            }
            do
            {
                puzzleSolver = new PuzzleSolver();
                puzzleSolver.SolveGrid((PuzzleGrid)tempGrid.Clone(), false); //Slv to fill remainder of grid
                SolutionGrid = puzzleSolver.SolutionGrid;
            } while (SolutionGrid == null || SolutionGrid.IsBlank());
            PermaGrid = Blanker(SolutionGrid);       //call Blanker to carry out the
            return PermaGrid;         //blanking of fileds,then return the grid to user to solve
        }
        //  Call SolveGrid to solve puzzlegrid
        //Store solved gamegrid as the correct solution in solutiongrid

        public PuzzleGrid Blanker(PuzzleGrid solvedGrid)
        {                          //enable blanking of squares based on difficulty
            PuzzleGrid tempGrid; 
            PuzzleGrid saveCopy;
                                        //temporary grids to save between tests
            bool unique = true;          //flag for if blanked form has unique soln
            int totalBlanks = 0;                          //count of current blanks
            int tries = 0;                  //count of tries to blank appropriately
            int desiredBlanks;            //amount of blanks desired via difficulty
            int symmetry = 0;                                       //symmetry type
            tempGrid = (PuzzleGrid)solvedGrid.Clone(); 
                                                //cloned input grid (no damage)
            Random rnd = new Random();         //allow for random number generation

            switch (difficulty)           //set desiredBlanks via chosen difficulty
            {
            case Difficulty.Easy: //easy difficulty
                desiredBlanks = 40;
                break;
            case Difficulty.Medium: //medium difficulty
                desiredBlanks = 45;
                break;
            case Difficulty.Hard: //hard difficulty
                desiredBlanks = 50;
                break;
            default: //easy difficulty
                desiredBlanks = 40;
                break;
            }

            symmetry = rnd.Next(0, 2);                   //Randomly select symmetry
            do
            {          //call RandomlyBlank() to blank random squares symmetrically
                saveCopy = (PuzzleGrid)tempGrid.Clone();     // in case undo needed
                tempGrid = RandomlyBlank(tempGrid, symmetry, ref totalBlanks);
                           //blanks 1 or 2 squares according to symmetry chosen
                puzzleSolver = new PuzzleSolver();
                unique = puzzleSolver.SolveGrid((PuzzleGrid)tempGrid.Clone(), true);         // will it solve uniquely?
                if(!unique)
                {
                    tempGrid = (PuzzleGrid)saveCopy.Clone();
                    tries++;
                }
            } while((totalBlanks < desiredBlanks) && (tries < 1000));
            solvedGrid = tempGrid;
            solvedGrid.Finish();
            return solvedGrid;
        }

        public PuzzleGrid RandomlyBlank(PuzzleGrid tempGrid, int sym, ref int blankCount)
        {
            //blank one or two squares(depending on if on center line) randomly
            Random rnd = new Random(); //allow random number generation
            int row = rnd.Next(0, 8); //choose randomly the row
            int column = rnd.Next(0, 8); //and column of cell to blank
            while (tempGrid.Grid[row, column] == 0) //don't blank a blank cell
            {
                row = rnd.Next(0, 8);
                column = rnd.Next(0, 8);
            }
            tempGrid.InitSetCell(row, column, 0); //clear chosen cell
            blankCount++; //increment the count of blanks
            switch (sym)
            {
                    //based on symmetry, blank a second cell
                case 0: //vertical symmetry
                    if (tempGrid.Grid[row, 8 - column] != 0) //if not already blanked
                        blankCount++; //increment blank counter
                    tempGrid.InitSetCell(row, 8 - column, 0); //blank opposite cell
                    break;
                case 1: //horizontal symmetry
                    if (tempGrid.Grid[8 - row, column] != 0)
                        blankCount++;
                    tempGrid.InitSetCell(8 - row, column, 0);
                    break;
                case 2: //diagonal symmetry
                    if (tempGrid.Grid[column, row] != 0)
                        blankCount++;
                    tempGrid.InitSetCell(column, row, 0);
                    break;
                default: //diagonal symmetry
                    if (tempGrid.Grid[row, 8 - column] != 0)
                        blankCount++;
                    tempGrid.InitSetCell(column, row, 0);
                    break;
            }
            return tempGrid;
        }

    }
} 
```

其余[代码在这里](http://super-sudoku.googlecode.com/svn-history/r61/trunk/SuperSudoku/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-20T02:05:26.833

斯威夫特 5 版本

我有的简单代码，给你

首先，创建函数：

```
func getNumberSudoku() -> [[Int]] {
    // Original number
    let originalNum = [1,2,3,4,5,6,7,8,9]
    // Create line 1 to 9 and shuffle from original
    let line1 = originalNum.shuffled()
    let line2 = line1.shift(withDistance: 3)
    let line3 = line2.shift(withDistance: 3)
    let line4 = line3.shift(withDistance: 1)
    let line5 = line4.shift(withDistance: 3)
    let line6 = line5.shift(withDistance: 3)
    let line7 = line6.shift(withDistance: 1)
    let line8 = line7.shift(withDistance: 3)
    let line9 = line8.shift(withDistance: 3)
    // Final array
    let renewRow = [line1,line2,line3,line4,line5,line6,line7,line8,line9]
    // Pre-shuffle for column
    let colSh1 = [0,1,2].shuffled()
    let colSh2 = [3,4,5].shuffled()
    let colSh3 = [6,7,8].shuffled()
    let rowSh1 = [0,1,2].shuffled()
    let rowSh2 = [3,4,5].shuffled()
    let rowSh3 = [6,7,8].shuffled()
    // Create the let and var
    let colResult = colSh1 + colSh2 + colSh3
    let rowResult = rowSh1 + rowSh2 + rowSh3
    var preCol: [Int] = []
    var finalCol: [[Int]] = []
    var prerow: [Int] = []
    var finalRow: [[Int]] = []
    // Shuffle the columns
    for x in 0...8 {
        preCol.removeAll()
        for i in 0...8 {
            preCol.append(renewRow[x][colResult[i]])
        }
        finalCol.append(preCol)
    }
    // Shuffle the rows
    for x in 0...8 {
        prerow.removeAll()
        for i in 0...8 {
            prerow.append(finalCol[x][rowResult[i]])
        }
        finalRow.append(prerow)
    }
    // Final, create the array into the [[Int]].
    return finalRow
} 
```

然后用法：

```
var resultSudoku = [[Int]]
resultSudoku = getNumberSudoku() 
```

# php - Send date by Radio-check to other page

> ID：14001938
> 
> 赞同：2
> 
> 时间：2012-12-22T10:15:17.260
> 
> 标签：php

i have form to send data to other page like:

```
<input name="ShowBuy" id="ShowBuy" type="radio" value="1" checked = "checked"> Show Buy
<input name="ShowBuy" id="ShowBuy" type="radio" value="0"> Hide Buy <br>
<input name="ShowSale" id="ShowSale" type="radio" value="1" checked = "checked"> Show Sale
<input name="ShowSale" id="ShowSale" type="radio" value="0"> Hide Sale<br> 
```

when i checked Hide Buy and print the result, it show value "1" !!! why, it must show me value "0" . there are code to send :

```
<script language="JavaScript">
  $(function(){
           $('#Normal').click(function(){
               sessionStorage.ShowSale = $("#ShowSale").val();
               sessionStorage.ShowBuy = $("#ShowBuy").val();
              window.open('Print.php', '_blank')  
           }); 
       });   
</script> 
```

where problem here.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T10:29:17.990

jquery 代码的问题在于您使用的是 ID 选择器，ID 应该是一个元素的唯一标识符，jquery 将匹配具有该 id 的第一个元素并返回值

这是一个解决方案：

```
<input name="ShowBuy" class="ShowBuy" type="radio" value="1" checked = "checked"> Show Buy
<input name="ShowBuy" class="ShowBuy" type="radio" value="0"> Hide Buy <br>
<input name="ShowSale" class="ShowSale" type="radio" value="1" checked = "checked"> Show Sale
<input name="ShowSale" class="ShowSale" type="radio" value="0"> Hide Sale<br> 
```

上面我已将`id`属性替换为`class`

然后你需要改变你的jquery：

```
<script language="JavaScript">
  $(function(){
           $('#Normal').click(function(){
               sessionStorage.ShowSale = $("input.ShowSale:checked").val();
               sessionStorage.ShowBuy = $("input.ShowBuy:checked").val();
              window.open('Print.php', '_blank')  
           }); 
       });   
</script> 
```

现在选择一个输入`class="ShowBuy"`并检查并获取值

# php - CakePHP serving cached controller actions, regarding to user agent

> ID：14001941
> 
> 赞同：2
> 
> 时间：2012-12-22T10:15:57.940
> 
> 标签：php, cakephp, caching, cakephp-2.0

I can cache controller actions in my CakePHP 2 application by using [CacheHelper](http://book.cakephp.org/2.0/en/core-libraries/helpers/cache.html). And this helper provides me to select cache duration, "nocache" parts of page etc.

But is it possible to serve cached actions regarding to User agent of the visitor. For instance I plan to show cached page to crawlers/bots, but construct the page if visitor is not bot. I don't want to select which parts of the page will be cached / nocached. Taking the page as a whole.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T13:21:12.590

我认为这对你有用：

假设您使用的是最新版本的 cakephp 将其添加到您的 core.php 波纹管到您配置 Cache.check 的行

示例和代码：

```
/**
 * Enable cache checking.
 *
 * If set to true, for view caching you must still use the controller
 * public $cacheAction inside your controllers to define caching settings.
 * You can either set it controller-wide by setting public $cacheAction = true,
 * or in each action using $this->cacheAction = true.
 *
 */
    // Configure::write('Cache.check', true);
    $UAs = array(
        'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.101 Safari/537.11'
    );

    if (in_array(env('HTTP_USER_AGENT'), $UAs)) {
        define('USE_CACHE', '1 hour');
        Configure::write('Cache.check', true);
    } else {
        define('USE_CACHE', false);
        Configure::write('Cache.check', false);
    } 
```

$UAs 是指机器人的用户代理

这是一个示例控制器，您可以使用它来测试代码：

```
<?php
App::uses('AppController', 'Controller');

class HomeController extends AppController {

    public $name = 'Home';

    public $uses = array();

    public $helpers = array(
        'Cache'
    );

    public $cacheAction = USE_CACHE;

    public function index() {}

} 
```

# opengl - 分辨率不兼容时如何捕获 glTexImage2D 错误？

> ID：14001944
> 
> 赞同：2
> 
> 时间：2012-12-22T10:16:12.033
> 
> 标签：opengl, textures, texture-mapping, texture2d, glteximage2d

我试图捕捉来自不兼容的图像纹理分辨率的错误

```
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, img->width, img->height, 0, GL_RGB, GL_UNSIGNED_BYTE, imgdata);

1\. Compatible resolution, working fine = 1024x1024, 1920x1200, 1920x1080, 704x891
2\. Incompatible resolutions, all giving error = 2058x1734, 1018x1280, 591x602, etc. 
```

我不知道为什么 glTexImage2D 在 #1 分辨率下工作正常，而在 #2 分辨率下会出错。我无法提取它遵循的分辨率模式，这意味着某些分辨率工作正常，而另一些则不行。我不知道为什么。

现在的问题是，如果用户尝试创建分辨率不兼容的纹理，那么 OpenGL 应该会捕获错误，如果未创建纹理但 glTexImage2D 没有返回任何内容，我应该得到 0，因此我们无法为用户确定安全的内容。“不支持此分辨率，请勿使用。” 但问题是 OpenGL 没有捕捉到 glTexImage2D 错误。

在运行时执行期间

```
cout<<until here working fine..<<endl;

glTexImage2D(......) run-time execution stops here and windows gives not responding error.

cout<<"output of something that never executed"<<endl;
Here If I use glGetError() it never works. Because windows gives error in glTexImage2D. 
```

那么，有谁知道我怎么能捕捉到 glTexImage2D 错误。如果它给出错误，那么我会显示“不使用此图像，使用另一个图像”。并返回 0。

如何完成这个任务？我还考虑过仅以某些分辨率限制用户，但这不是解决方案。正确的 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T12:32:34.383

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T10:31:41.680

这看起来像一些奇怪的驱动程序错误。无论您传递什么，OpenGL 调用都不应崩溃（只要它不是无效指针或指针操作的大小错误）。此外，我在无法加载的纹理上看不到任何图案。

通常应该只有三个关于有效纹理的限制能力：纵横比和尺寸：

*   纹理可能太高或太宽而无法处理。
*   较旧的卡片可能要求纹理为方形（宽度 = 高度）。
*   较旧的卡片可能要求纹理尺寸为 2 的幂（宽度 = 2 ^n；高度 = 2 ^m）。

我在您的纹理尺寸中看不到任何真实的图案。

纹理格式（即颜色深度/颜色通道）可能是另一个问题，但不要认为这实际上涉及到这里。

# php - 在 value='' 字段中添加 $_POST

> ID：14001949
> 
> 赞同：1
> 
> 时间：2012-12-22T10:17:07.833
> 
> 标签：php

我正在继续使用 PHP，我想做的是将变量从一种形式传递到另一种形式。

但是，我无法让输入字段正常工作！我想我错误地输入了 $_POST 。非常感谢帮助解决这个问题

下面的代码有什么问题？

```
echo "<input type='text' name='amount' value='$_POST['amount']' />"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T10:18:52.667

您不需要使用引号来分隔双引号字符串内的数组键，因此：

```
echo "<input type='text' name='amount' value='$_POST[amount]' />"; 
```

...就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T10:19:00.027

给它喜欢

```
echo "<input type='text' name='amount' value='".$_POST['amount']."' />"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T10:19:22.070

`echo "<input type=\"text\" name=\"amount\" value=\"$_POST['amount']\" />";`

# python - python xlwt中从右到左的excel页面布局

> ID：14001952
> 
> 赞同：4
> 
> 时间：2012-12-22T10:17:20.287
> 
> 标签：python, excel, xlwt

如何使用 xlwt 设置工作表布局（从右到左）？

我正在使用 xlwt 编写 Excel 工作表，但我的数据是从右到左的，我想从右到左设置工作表布局（与 microsoft excel 的页面布局选项卡相同）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T07:56:22.537

```
import xlwt
wb = xlwt.Workbook()
for shx in 0, 1:
    ws = wb.add_sheet("S%d" % shx)
    # Excel 2003: Tools > Options > International > View current sheet right-to-left
    # Excel 2007: Page Layout > Sheet Right-to-Left
    ws.cols_right_to_left = shx
    ws.write(0, 0, "qwerty")
wb.save("colsR2L.xls") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-06T06:38:46.327

默认情况下，从右到左的工作表为 false，将其设置为 true：

```
import xlwt
wbk = xlwt.Workbook()
sheet = wbk.add_sheet("sheet", cell_overwrite_ok=True)
sheet.cols_right_to_left = True
wbk.save("testRTL.xls") 
```

# html - 用两个盒子简单响应？

> ID：14001954
> 
> 赞同：2
> 
> 时间：2012-12-22T10:17:34.060
> 
> 标签：html, css, responsive-design

我有以下示例：http: [//jsfiddle.net/dwDZx/10/](http://jsfiddle.net/dwDZx/10/)

**html**

```
<div id="container">
    <div id="div1" class="regularContainer">
        <div>one</div>
    </div>
    <div id="div2" class="regularContainer">
        <div>two</div>
    </div>
</div>​ 
```

**css**

```
* {
  margin:0;
  padding:0;
}

#div1 {
  float:left;
  margin-right:2%;
  margin-bottom:10px;
  max-width:300px;
  width:47%;
  background-color:#d3edff;
  border-color:#00b5ff;
  padding-bottom:8px;
}

#div2 {
  float:left;
  max-width:300px;
  width:47%;
}

.regularContainer {
  float:left;
  padding:7px;
  background-color:#fff;
  border:1px solid #00b5ff;
  width:784px;
} 
```

​ 问题是直到第二个盒子连续下降后盒子才调整大小？我需要的是始终调整大小并且永远不会掉下来的盒子。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T10:24:38.517

仅使用百分比，它将变得响应。

这是响应[式 http://jsfiddle.net/dwDZx/11/](http://jsfiddle.net/dwDZx/11/)

我将宽度更改为 45% 并将填充更改为之前的 1%

```
* { margin: 0; padding: 0; }

#div1
{
    float:              left;
    margin-right:       2%;         
    margin-bottom:      10px;
    max-width:          300px;
    width:              45%;
    background-color:   #d3edff;
    border-color:       #00b5ff;
    padding-bottom:     8px;
}

#div2
{
    float:              left;
    max-width:          300px;
    width:              45%; 
}

.regularContainer
{
    float:                      left;
    padding:                    1%;
    background-color:           #ffffff;
    border:                     1px solid #00b5ff;
    width:                      784px;
} 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T10:23:00.830

你为什么不直接使用 Twitter Bootstrap？它非常适合响应式设计。它有 container-fluid、row-fluid、spanxx 等类，可以解决您的问题。

# django - 语法错误：关键字 arg 之后的非关键字 arg

> ID：14001955
> 
> 赞同：0
> 
> 时间：2012-12-22T10:17:39.240
> 
> 标签：django, django-models, python-2.7

我正在开发我的第一个 Python/Django 应用程序并遇到以下问题：

我的应用程序维护一个使用`Calendar`模型类和`CalendarDay`模型类实现的预订日历。在预订时，我想查询以下`CalendarDay`实例：

```
dates = CalendarDay.objects.filter(calendar = booking.calendar, calendar_date >= booking.arrival_date, calendar_date <= booking.departure_date) 
```

这`'SyntaxError: non-keyword arg after keyword arg'`会在第二个和第三个参数上生成。从 Django 文档中，我了解到您应该能够做到这一点，并且条件是 AND-ed，这就是我所追求的。

或者，当我尝试时：

```
dates = CalendarDay.objects.filter(calendar = booking.calendar, calendar_date__ge = booking.arrival_date, calendar_date__le = booking.departure_date) 
```

我`FieldError: Join on field 'calendar_date' not permitted`从 Django 得到一个。

我已经完成了 Django 文档，但是 - 显然 - 我遗漏了一些东西。我究竟做错了什么？

编辑：

我最终得到了以下解决方案：

```
dates = CalendarDay.objects.filter(calendar = booking.calendar, calendar_date__range = [self.arrival_date, self.departure_date]) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T10:29:15.897

```
dates = CalendarDay.objects.filter(calendar = booking.calendar, calendar_date__ge = booking.arrival_date, calendar_date__le = booking.departure_date) 
```

ge 和 le 无效，使用**lt**（小于）或**gt**（大于），或**gte**（大于等于）和**lte**（小于等于）

（当你写 le - Django 尝试在名为“le”的字段上运行 sql join 但没有一个，因此你得到的错误）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T10:50:59.753

第一次尝试

```
dates = CalendarDay.objects.filter(calendar = booking.calendar, calendar_date >= booking.arrival_date, calendar_date <= booking.departure_date) 
```

`calender_date >= booking.arrival_date`并`calender_date <= booking.departure_date`评估为`True`or `False`。因此，您会 `'SyntaxError: non-keyword arg after keyword arg'`在第二个和第三个参数上得到错误。

第二次尝试

```
dates = CalendarDay.objects.filter(calendar = booking.calendar, calendar_date__ge = booking.arrival_date, calendar_date__le = booking.departure_date) 
```

SQL 连接在字段“le”和“ge”上运行，但它们不存在。因此你得到`FieldError: Join on field 'calendar_date' not permitted`

您应该使用`gte`or `lte`which 分别表示大于或等于和小于或等于。

所以你的代码应该是

```
dates = CalendarDay.objects.filter(calendar = booking.calendar, calendar_date__gte = booking.arrival_date, calendar_date__lte = booking.departure_date) 
```

# android - 一次完成所有活动

> ID：14001963
> 
> 赞同：71
> 
> 时间：2012-12-22T10:18:35.400
> 
> 标签：android, android-activity, activity-finish

我有一个包含多个页面的应用程序，即多个活动，其中一些保持打开状态。

有没有办法一次关闭所有活动？

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2012-12-22T10:28:11.030

每当您希望退出所有打开的活动时，您应该按下一个按钮，该按钮会加载应用程序启动时运行的**第一个活动**，然后清除所有其他活动，然后完成最后一个剩余活动。为此，在您的项目中应用以下代码

```
Intent intent = new Intent(getApplicationContext(), FirstActivity.class);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
intent.putExtra("EXIT", true);
startActivity(intent); 
```

上面的代码完成了除 FirstActivity 之外的所有活动。然后我们需要完成FirstActivity的在FirstActivity的oncreate中输入下面的代码

```
if (getIntent().getBooleanExtra("EXIT", false)) {
    finish();
} 
```

你完成了....

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2015-08-25T11:39:15.587

有一种[`finishAffinity()`](https://developer.android.com/reference/android/app/Activity.html#finishAffinity())方法`Activity`可以完成当前活动和所有父活动，但它仅适用于 Android 4.1 或更高版本。

对于 API 16+，请使用

```
finishAffinity(); 
```

对于更低版本（Android 4.1 更低版本），请使用

```
ActivityCompat.finishAffinity(YourActivity.this); 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2014-04-24T09:59:15.240

The best solution i have found, which is compatible with devices having API level <11

```
Intent intent = new Intent(getApplicationContext(), HomeActivity.class);
ComponentName cn = intent.getComponent();
Intent mainIntent = IntentCompat.makeRestartActivityTask(cn);
startActivity(mainIntent); 
```

This solution requires Android support library

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2017-01-20T00:10:21.517

对于 API 16+，请使用

```
finishAffinity(); 
```

对于较低的，使用

```
ActivityCompat.finishAffinity(YourActivity.this) 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2012-12-22T10:46:06.513

There are three solution for clear activity history.

1) You can write `finish()` at the time of start new activity through intent.

2) Write `android:noHistory="true"` in all `<activity>` tag in Androidmanifest.xml file, using this if you are open new activity and you don't write finish() at that time previous activity is always finished, after write your activity look like this.

```
<activity
    android:name=".Splash_Screen_Activity"
    android:label="@string/app_name"
    android:noHistory="true">

</activity> 
```

3) write `system.exit(0)` for exit from the application.

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2018-06-02T21:28:04.993

您可以使用`finishAffinity()`将完成当前活动和所有父活动的方法。但它仅适用于`API 16+`.

**API 16+ 使用：**

```
finishAffinity(); 
```

**API 16 以下使用：**

```
ActivityCompat.finishAffinity(this); //with v4 support library 
```

**要退出整个应用程序：**

```
finishAffinity(); // Close all activites
System.exit(0);  // closing files, releasing resources 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2014-07-21T18:07:55.590

我正在努力解决同样的问题。打开关于页面并`finish();`从那里调用并没有关闭应用程序，而是转到以前的活动，我想从关于页面本身关闭应用程序。

这是对我有用的代码：

```
Intent startMain = new Intent(Intent.ACTION_MAIN); 
startMain.addCategory(Intent.CATEGORY_HOME); 
startMain.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
startActivity(startMain); 
finish(); 
```

希望这可以帮助。

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2016-05-29T07:58:28.247

以下两个标志对我有用。他们将**清除所有**以前的活动并**开始新的活动**

```
 Intent intent = new Intent(getApplicationContext(), MyDetails.class);
  intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK);
  intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
  startActivity(intent); 
```

希望这可以帮助。

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2018-07-17T20:24:03.577

其他答案都不适合我。但我研究了更多，终于得到了答案。

您实际上要求根据我的需要关闭应用程序。因此，添加以下代码：

```
finishAffinity();
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2014-06-15T18:28:30.610

如果您正在寻找一种似乎更“按书本”和方法设计（使用广播接收器）的解决方案，您最好查看以下链接：[http ://www.hrupin.com/2011/10 /how-to-finish-all-activities-in-your-android-application-through-simple-call](http://www.hrupin.com/2011/10/how-to-finish-all-activities-in-your-android-application-through-simple-call)。

该链接中出现的建议实现需要稍作更改 - 您应该使用 sendStickyBroadcast(Intent) 方法（不要忘记将 BROADCAST_STICKY 权限添加到您的清单）而不是 sendBroadcast(Intent)，以便启用您的暂停活动以便能够接收广播并对其进行处理，这意味着您还应该在重新启动应用程序时删除该粘性广播，方法是在打开活动的 onCreate() 方法中调用 removeStickyBroadcast(Intent) 方法。

尽管上面提到的基于 startActivity(...) 的解决方案，乍一看 - 似乎非常好、优雅、简短、快速且易于实现 - 他们觉得有点“错误”（开始一个活动 - 尽一切可能可能需要和参与其中的开销和资源，只是为了杀死它？...）

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2015-04-01T09:34:22.153

您可以尝试 finishAffinity() ，它关闭所有当前活动以在 v4.1 以上工作

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2018-01-28T17:16:28.887

问题`finishAffinity()`是只有当前任务中的活动被关闭，但具有`singleInstance`启动模式和其他任务的活动仍然打开并在`finishAffinity()`. 问题`System.exit(0)`是您使用所有后台服务和所有分配的内存完成您的应用程序进程，这可能导致不良副作用（例如不再接收通知）。

以下是**解决这两个问题的其他两种选择**：

1.  在您的应用程序类中使用`ActivityLifecycleCallbacks`来注册创建的活动并在需要时关闭它们：[https ://gist.github.com/sebaslogen/5006ec133243379d293f9d6221100ddb#file-myandroidapplication-kt-L10](https://gist.github.com/sebaslogen/5006ec133243379d293f9d6221100ddb#file-myandroidapplication-kt-L10)
2.  在测试中，您可以使用`ActivityLifecycleMonitorRegistry`：[https ://github.com/sebaslogen/CleanGUITestArchitecture/blob/master/app/src/androidTest/java/com/neoranga55/cleanguitestarchitecture/util/ActivityFinisher.java#L15](https://github.com/sebaslogen/CleanGUITestArchitecture/blob/master/app/src/androidTest/java/com/neoranga55/cleanguitestarchitecture/util/ActivityFinisher.java#L15)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-07-18T20:51:08.113

您可以存储一个布尔标志来表示是否所有活动都应该完成（在您的共享首选项中更优选）然后`onStart()`每个活动的方法应该具有如下内容：

```
SharedPreferences pref=PreferenceManager.getDefaultSharedPreferences(this);
boolean needToDestroyFlag=pref.getBoolean("destroyFlag", false);
if(needToDestroyFlag)
{
    finish();
}else
{
    //...
} 
```

显然，当您需要完成所有活动（在当前活动中）之后，您可以像下面这样设置此标志，您可以在当前活动上调用 finish() 方法，这将导致终止当前活动并从堆栈中弹出活动一个一，每个人的onStart()方法执行并导致终止它：

```
SharedPreferences.Editor editor=PreferenceManager.getDefaultSharedPreferences(this).edit();
editor.putBoolean("destroyFlag", true);
editor.apply(); 
```

如果您使用@letsnurture 建议的方法，您将面临@gumuruh 提出的问题。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-02-24T20:21:08.003

利用

```
finishAffinity (); 
```

代替：

```
System.exit(); or finish(); 
```

它退出完整的应用程序或所有活动。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-07-17T14:22:37.053

您可以使用以下代码：

```
Intent i = new Intent(OldActivity.this, NewActivity.class);

i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);

startActivity(i); 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-05-15T13:58:24.803

如果扎根：

```
Runtime.getRuntime().exec("su -c service call activity 42 s16 com.example.your_app"); 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-09-14T05:35:07.350

```
in LoginActivity

@Override
    public void onBackPressed() {
        Intent startMain = new Intent(Intent.ACTION_MAIN);
        startMain.addCategory(Intent.CATEGORY_HOME);
        startMain.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        startActivity(startMain);
        finish();
        super.onBackPressed();
    } 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-01-23T12:31:35.450

moveTaskToBack(true);

//将此添加到点击列表

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-08-17T08:30:53.217

关闭应用程序

```
Intent intent = new Intent(getApplicationContext(), Splash_Screen.class);
                intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                intent.putExtra("EXIT", true);
                startActivity(intent); 
```

把它放在打开的第一个活动的 oncreate 和 onResume 中。前任。正在启动屏幕活动

```
if (getIntent().getBooleanExtra("EXIT", false)) {
            this.finish();
            System.exit(0);
        } 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-11-11T12:16:03.607

```
@Override
    public void onBackPressed(){
        MaterialAlertDialogBuilder alert = new MaterialAlertDialogBuilder(BorrowForm.this, MyTheme);
        alert.setTitle("Confirmation");
        alert.setCancelable(false);
        alert.setMessage("App will exit. Data will not be saved. Continue?");
        alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                Toast toast = Toast.makeText(BorrowForm.this, "App terminated.", Toast.LENGTH_SHORT);
                toast.getView().setBackgroundColor(Color.parseColor("#273036"));
                toast.setGravity(Gravity.CENTER_HORIZONTAL,0,0);
                TextView toastMessage=(TextView) toast.getView().findViewById(android.R.id.message);
                toastMessage.setTextColor(Color.WHITE);
                toast.show();
                finishAffinity();
            }
        });
        alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {

            }
        });
        alert.setCancelable(false);
        alert.show();
    } 
```

* * *

## 回答 #21

> 赞同：-9
> 
> 时间：2014-11-20T12:42:11.547

我是 java/android 的初学者，可能这个简单的解决方案对你有帮助

**首先**，创建静态类

```
public class ActivityManager {

    static Activity  _step1;
    static Activity _step2;
    static Activity _step3;

    public static void setActivity1(Activity activity)
    {
        _step1 = activity;
    }

    public static void setActivity2(Activity activity)
    {
        _step2 = activity;
    }

    public static void setActivity3(Activity activity)
    {
        _step3 = activity;
    }

    public static void finishAll()
    {
        _step1.finish();
        _step2.finish();
        _step3.finish();
    }

} 
```

**然后** 当您运行新的活动保存链接到您的经理时（在步骤 1 中）：

```
ActivityManager.setActivity1(this);
AddValuesToSharedPreferences();
Intent intent = new Intent(Step1.this, Step2.class);
startActivity(intent); 
```

**然后**在你的最后一步完成所有：

```
 public void OkExit(View v) throws IOException {
        ActivityManager.finishAll();
    } 
```

# javascript - FireFox 中的奇怪边框错误

> ID：14001969
> 
> 赞同：4
> 
> 时间：2012-12-22T10:19:04.773
> 
> 标签：javascript, css

我一直在搞搞 JS 和 CSS。我有一个带有一般按钮样式的锚。在造型方面，我有一个`border-bottom: 5px dotted blue;`. 那么JS是：

```
onmouseover = "this.style.borderBottom = '5px solid red';" 
```

他是 JSFiddle 示例： http: [//jsfiddle.net/MichaelMitchell/f4Ud4/](http://jsfiddle.net/MichaelMitchell/f4Ud4/) **将鼠标悬停在按钮上**

边界似乎重叠，有人可以解释一下吗？由于 Chrome 处理虚线边框的方式，这仅在 FireFox 中可见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T10:29:00.507

我无法解释错误的行为。显然，当绘制另一个边框时，Firefox 不会清除绘图区域。

但这是一个（肮脏的）解决方案

```
<a class = 'testButton' href = '#'
    onmouseover =
    "var button = this; button.style.borderBottom = '0px'; setTimeout( function() { button.style.borderBottom = '5px solid red'; }, 1 )">
    Button!
</a> 
```

# mysql - MySQL - 带有日期的多个 MAX 值

> ID：14001970
> 
> 赞同：-1
> 
> 时间：2012-12-22T10:19:11.257
> 
> 标签：mysql, select, max

我有表结构：

**一个 | 乙| C | 日期**

我想选择 MAX(A), MAX(B), MAX(C) 并为每个 MAX 分配 Date ... 可以在 MySQL 中只用 1 个 SELECT 完成吗（没有像 SELECT * FROM (SELECT .. ..)) ?

例子：

```
A  | B  | C  | Date
------------------------
10 | 20 | 0  | 25.5.2012
0  | 13 | 7  | 25.3.2012
70 | 5  | 15 | 25.4.2012

Result:
A -> 70 - 25.4.2012
B -> 20 - 25.5.2012
C -> 15 - 25.4.2012 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T10:31:29.577

```
 ( SELECT 'A' AS ColumnM
          , a  AS Result
          , Date
    FROM tableX  
    ORDER BY a DESC
        LIMIT 1 
  )
UNION ALL
  ( SELECT 'B'
          , b 
          , Date
    FROM tableX  
    ORDER BY b DESC
        LIMIT 1 
  )
UNION ALL
  ( SELECT 'C'
          , c 
          , Date
    FROM tableX  
    ORDER BY c DESC
        LIMIT 1 
  ) ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T10:22:04.387

我想你需要这个::

```
Select
MAX(a),
MAX(b),
MAX(c)
from table
GROUP BY `Date` 
```

# parsing - PDF表格数据

> ID：14001973
> 
> 赞同：2
> 
> 时间：2012-12-22T10:19:36.470
> 
> 标签：parsing, pdf, text-extraction

我有一个关于从 pdf 文件中提取文本、精确的表格数据的一般问题。

pdf 查看器如何能够阅读和显示表格？为什么我们不能以同样的方式获取必要的列信息？

我现在正在搜索一个星期，主要是使用 pdftoxml 卡住令牌坐标和太宽的表格单元格（这样一个准确的中间空表格单元格识别变得不可能）。

我通过正则表达式文本来解决我的一堆pdf文件（顺便说一句。如果忽略一些行间距离并“粘贴回一起”，那么逐行非常成功），但这当然只是一个实例解决方案。

这让我很头疼。pdf 查看器为单元格绘制线条并知道单元格的开始和结束位置，但我们无法从 pdf 源中读取它。这怎么可能？他们知道什么是我们无法推断的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T12:20:09.637

您的误解是一列作为一列存储在 PDF 文件中。事实并非如此。PDF 查看器不理解表格、列、段落、文本行或单词。

PDF 是作为页面描述语言创建的，它非常擅长在许多不同的设备上复制完全相同的页面。因为这是它的目标，所以它不关心结构，你所指的都是结构。

PDF 绘制文本的方式非常非常简单。页面上的说明将是这样的：

*   设置此字体
*   转到页面上的这一点
*   渲染这些字符。
*   转到页面上的其他点
*   渲染更多字符。

虽然也可以将一些结构信息与这些说明一起存储在 PDF 中，但通常不会这样做，并且无论如何都是在事后才以 PDF 格式实现的。

当您查看上面的（伪）说明时，很容易理解表格是如何绘制的。文件中将简单地说明将一个单元格移动到某个位置并绘制文本。然后更多的指令移动到另一个单元格并绘制该文本。

如果要反转操作并从 PDF 页面中提取结构化信息，则必须“重新发明”结构信息。这意味着诸如找出哪些文本在同一基线上并因此可能属于同一行之类的事情。哪个文本在该基线上足够接近，以至于它可能是单词或列......等等......

正如您所想的那样，这根本不是一件容易的事！

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-22T21:47:15.930

在未压缩的 pdf 文档中，存在以下不确定格式的“流对象”（(0,0) 为左下角），伪正则表达式形式：

```
(x1 y1 m x2 y2 l [whitespace or blank or newline seperator symbol])* S (BT .* ET)* 
```

在哪里

```
x1, y1, x2, y2 are coordinates
l probably for "draw line"
m move to, "from to" or "merge"
S is the command for "draw" or the like
BT Begin Text
ET End Text 
```

所有命令后缀。

编辑：

一种可能的 Java 正则表达式是（参考 PDF32000_2008.pdf），在未压缩的 pdf 源中用空格替换换行符后：

```
((\s+\d+(\.\d+)?){2}(\s+m|\s+l|(\s+\d+(\.\d+)?){2}(\s+re|\s+y|\s+v|(\s+\d+(\.\d+)?){2}\s+c))\s+)+([SsFn]|[fBb](\*)?) 
```

流中还有其他元素，如“W*”或“Q q”，它们似乎在一般情况下调整线条粗细或字体属性。由于我无法找到特定的语言规范，这就是我从实验中推断出来的。

使用此信息和文本标记的坐标（在 ET 和 BT 之间），可以推断表格单元格宽度、表格起始结束位置（用于识别不同表格）。

问题仍然是解压缩任何类型的流。使用 pdftk 我能够解压缩从 openoffice writer 创建的 pdf 文件，但任意 pdf 文件中仍然有神秘符号。

更多信息：

[http://www.gnupdf.org/Introduction_to_PDF](http://www.gnupdf.org/Introduction_to_PDF)

[http://blog.idrsolutions.com/2011/05/understanding-the-pdf-file-format-%E2%80%93-carriage-returns-spaces-and-other-gaps/](http://blog.idrsolutions.com/2011/05/understanding-the-pdf-file-format-%E2%80%93-carriage-returns-spaces-and-other-gaps/)

[http://blog.idrsolutions.com/2012/03/understanding-the-pdf-file-format-names-locations/](http://blog.idrsolutions.com/2012/03/understanding-the-pdf-file-format-names-locations/)

[http://blog.idrsolutions.com/2011/05/understanding-the-pdf-file-format-%E2%80%93-pdf-xref-tables-explained/](http://blog.idrsolutions.com/2011/05/understanding-the-pdf-file-format-%E2%80%93-pdf-xref-tables-explained/)

[PDF页面流优化器库？](https://stackoverflow.com/questions/4150069/pdf-page-stream-optimizer-library)

[http://www.gnupdf.org/Stream](http://www.gnupdf.org/Stream)

# android - Eclipse的全新安装，R无法解析为变量

> ID：14001974
> 
> 赞同：7
> 
> 时间：2012-12-22T10:19:42.103
> 
> 标签：android, linux, eclipse, development-environment, adt

我无数次遇到“R 无法解决”错误，但总是有一个简单的解决方法。很抱歉给你添麻烦了，但这次我被难住了……

我最近决定将我的计算机双启动到 Windows 7/Ubuntu（以前只有 Windows 7）并加载 Eclipse 以进行我的 Android 应用程序开发，但是我遇到了臭名昭著的 R 无法解决错误。

全新安装 Ubuntu 12.10 后，我从 Android 开发者网站设置了[Google 的 ADT Bundle 。](http://developer.android.com/sdk/installing/bundle.html)我安装了上述下载包中包含的 Eclipse、SDK 和 ADB（ADT 已预先安装/设置）。这是由 Google 提供的 Eclipse 特殊版本，在 Eclipse 启动时包含文本“Android Developer Tools”。

Eclipse 可以正常运行 Java 项目，SDK 管理器似乎设置正确，因为我可以直接从 Eclipse 启动它（我还安装了所有 Android SDK 1.5-4.2），AVD 管理器几乎可以正常工作（它启动并允许我创建新设备，但不会以消息“PANIC：无法打开：some_device”开始），但是任何 Android 项目都不会编译，并出现错误“R 无法解析为变量”。

我曾尝试使用我的两个旧工作区中的现有 Android 项目以及创建一个新工作区，但它们都诉诸相同的错误。

有什么建议吗？我真的很想开始在基于 Linux 的环境中工作，并且花了几个小时试图让它工作......

我将非常感谢任何人的想法/建议/解决方案/遗憾/等。

编辑：我开始认为这个问题可能与我在启动 Android 虚拟设备时的其他错误有关，其中显示“PANIC：无法打开：some_device”。可悲的是，我不知道是什么原因造成的，也不知道如何解决它......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-21T19:23:26.453

我遇到过同样的问题。全新安装 ADT Bundle，使用向导创建一个新项目，给我“R 无法解析为变量”错误。我尝试了上一篇文章中解释的所有内容。

在我的特殊情况下，我有另一个 Android SDK 工具副本，而 ADT Bundle 指向的是那个，而不是捆绑包附带的那个。我只是改变了这一点，所有项目都重新开始了。希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-06T06:45:15.233

```
sudo apt-get install ia32-libs 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T10:27:55.657

您的问题的一些快速解决方案可能是，

*   使用`Ctrl`++`Shift`命令`O`“组织导入”并生成任何缺少的导入语句。有时这会生成不正确的导入语句，这会隐藏`R.java`构建时自动生成的类。
*   `R`是一个生成的类。如果您使用的是[Android 开发工具 (ADT)](http://developer.android.com/guide/developing/eclipse-adt.html)，它会在项目构建时生成。您可能已关闭“自动构建”。打开它并构建您的项目。
*   您的 xml 视图中的错误可能会导致无法生成 R.java。浏览您的视图文件并确保所有 xml 都是正确的！
*   删除，如果有的话`import android.R;`
*   重新启动您的 IDE（如果它刚刚安装）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T10:53:11.397

所有其他答案都是正确的，但要确保其中`layout`没有任何错误，否则eclipse不会生成`R.java`文件。因此，首先尝试解决任何`layout`错误，然后再应用`Clean Project`和构建一次。

如果出现错误，请删除`gen`和`bin`目录，然后再尝试构建项目。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-02T22:13:46.453

我在 Eclipse 中遇到过这个问题，这是因为我删除了 bin 和 gen 目录，而 Eclipse 没有重新创建这些目录的权限。用 chmod 修复。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-04T02:07:51.303

确保所有*SDK*都已更新。在*Eclipse*中，转到**Help -> Updates**并使用***SDK Manager***确保所有内容都已更新。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-22T10:28:54.947

有两种解决方案，它将解决您的问题。

1）构建你的项目。

2）转到项目>清理和清理你的项目。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-12-22T10:22:35.320

重新启动您的 IDE。R - 一种资源处理程序 - 将自动生成。

# ruby-on-rails - 如何根据其他属性值添加自定义验证消息？

> ID：14001976
> 
> 赞同：4
> 
> 时间：2012-12-22T10:20:20.153
> 
> 标签：ruby-on-rails, ruby, validation, implementation, state-machine

我正在使用 Ruby on Rails 3.2.9，我只是想使用[state_machine](https://github.com/pluginaweek/state_machine) gem。我有以下陈述：

```
# Model class attributes are:
#
# [String]  status
# [Boolean] checkin_1
# [Boolean] checkin_2
#
class Article < ActiveRecord::Base
  state_machine :attribute => :status, :initial => :unconfirmed do
    state :confirmed, :value => 'confirmed'
    state :unconfirmed, :value => 'unconfirmed'

    event :confirm do
      transition :unconfirmed => :confirmed
    end

    event :unconfirm do
      transition :confirmed => :unconfirmed
    end
  end
end 
```

我想在`confirm`触发事件`checkin_1`和/或`checkin_2`值为`false`. 也就是说，鉴于我正在尝试`confirm`以下每个对象：

```
<#Article id: 1, :status: 'unconfirmed', checkin_1: false, checkin_2: false>
<#Article id: 1, :status: 'unconfirmed', checkin_1: false, checkin_2: true>
<#Article id: 1, :status: 'unconfirmed', checkin_1: true, checkin_2: false> 
```

然后我想避免保存对象并分别添加错误消息，如下所示：

```
"can not be confirmed if it is not checked for 1 and 2"
"can not be confirmed if it is not checked for 1"
"can not be confirmed if it is not checked for 2" 
```

我该怎么做*？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T11:42:22.313

这样做怎么样：

```
state confirmed do
  validate do
    if !checkin_1 and !checkin_2
       msg = "can not be confirmed if it is not checked for 1 and 2"
       errors.add(:checkin_1, msg)
       errors.add(:checkin_2, msg)
    elsif !checkin_1
       errors.add(:checkin_1, "can not be confirmed if it is not checked for 1")
    elsif !checkin_2
       errors.add(:checkin_2, "can not be confirmed if it is not checked for 2")
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T13:37:03.893

```
 class Article < ActiveRecord::Base
      attr_accessor :checkin_1
      attr_accessor :checkin_2

      state_machine :attribute => :status, :initial => :unconfirmed do
        state :confirmed, :value => 'confirmed'
        state :unconfirmed, :value => 'unconfirmed'

        before_transition any => :confirm do |article|
          return false unless article.custom_validate?
        end

        event :confirm do
          transition :unconfirmed => :confirmed
        end

        event :unconfirm do
          transition :confirmed => :unconfirmed
        end
      end

      private

      def custom_validate?
        validate_flag = true

        if self.checkin_1 and self.checkin_2
          msg = "can not be confirmed if it is not checked for 1 and 2"
          errors.add(:checkin_1, msg)
          errors.add(:checkin_2, msg)
          validate_flag = false
        elsif !checkin_1
          errors.add(:checkin_1, "can not be confirmed if it is not checked for 1")
          validate_flag = false
        elsif !checkin_2
          errors.add(:checkin_2, "can not be confirmed if it is not checked for 2")
          validate_flag = false
        end

        validate_flag
      end
    end 
```

# c# - 部分声明不得在 Silverlight 小工具中指定不同的基类

> ID：14001977
> 
> 赞同：3
> 
> 时间：2012-12-22T10:20:25.837
> 
> 标签：c#, silverlight, widget

我正在为 Windows 小部件开发 Silverlight 小工具。当我在我的小部件中添加另一个页面时，我发现了这个错误。我在 Stack Overflow 中发现了同样的问题，但它不适用于小部件。

我的示例代码在这里 XAML 代码

```
<navigation:Page x:Class="SilverlightGadgetDocked.Test" 
           xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
           xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
           xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
           xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
           mc:Ignorable="d"
           xmlns:navigation="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Navigation"
           d:DesignWidth="359" d:DesignHeight="225"
           Title="Test Page">
    <Grid x:Name="LayoutRoot">
        <Button Content="Button" Height="23" HorizontalAlignment="Left" Margin="182,103,0,0" Name="button1" VerticalAlignment="Top" Width="75" Click="button1_Click" />
    </Grid>
</navigation:Page> 
```

和cs代码在这里，

```
public partial class Test:UserControl
    {
        public Test()
        {
            MessageBox.Show("af");
            InitializeComponent();
        }

        // Executes when the user navigates to this page.
        protected override void OnNavigatedTo(NavigationEventArgs e)
        {
        }

        private void button1_Click(object sender, RoutedEventArgs e)
        {

        }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T10:26:00.590

您后面的代码指定了一个基类，`UserControl`但您的 XAML 文件指定了一个基类`Page`（文档的根节点对应于该类型的基类）。

改变

```
public partial class Test:UserControl 
```

到

```
public partial class Test 
```

一切都会好起来的。值得注意的是，您实际上不必在分部类的所有部分上指定基类。由于基类是在 XAML 文件中设置的，因此无需在后面代码中的类上再次指定它（但是，如果这样做，它必须与 XAML 中指定的类型匹配）。

# java - 验证 NRIC

> ID：14001980
> 
> 赞同：1
> 
> 时间：2012-12-22T10:20:43.960
> 
> 标签：java

我尝试对 NRIC 进行验证。仅当首尾为字母且身份证长度为9时有效。例如S1234567G。

当用户输入错误的格式时会弹出错误的格式信息，例如 S123D 和 S12345678G。这是我的代码。

```
 boolean isLetter = true;
    } else if (nric.equals("")) {
        JOptionPane.showMessageDialog(null, "Please enter NRIC");
    } else if (isLetter == false) {
        for (int count = 0; count < nric.length(); count++) {
            char i = nric.charAt(count);
            if ((i != 9) && (!Character.isLetter(nric.charAt(0)))
                    && (!Character.isLetter(nric.length() - 1)))
                isLetter = false;
        }
        if (isLetter == false) {
            JOptionPane.showMessageDialog(null, "NRIC wrong format");
        } 
```

这不是全部代码。我也对其他文本字段进行了其他验证。我只是将 NRIC 部分分开，因为我知道这里有一些错误。

无论我输入什么，它都会在我的数据库中创建一条记录。即使格式错误，它也不会显示错误消息。有人可以帮我检查一下吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T10:24:41.697

您可以只使用正则表达式`matches`，例如

```
nric.matches("\\p{Alpha}.{7}\\p{Alpha}") 
```

但是，根据您的示例，您似乎只想考虑以大写字母开头，后跟七个数字，以另一个大写字母结尾的有效字符串，在这种情况下，您将使用

```
nric.matches("\\p{Upper}\\d{7}\\p{Upper}") 
```

（回想一下，在正则表达式中`X{n}`意味着`X`重复的`n`时间。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T10:25:15.557

# javascript - 保持检查条件而不是一次性检查 jquery/js

> ID：14001981
> 
> 赞同：6
> 
> 时间：2012-12-22T10:21:07.257
> 
> 标签：javascript, jquery, if-statement, hover

我想要实现的是当鼠标没有悬停menu3时，系统会不断检查aboutMenu是否悬停，如果是，则警报'h'，否则警报'nh'。问题是鼠标离开menu3时只检查一次，如何解决这个问题？谢谢。

```
$('#menu3').live('mouseout',function() {

$("#aboutMenu").hover(function() {
    $(this).data("hovered", true);
}, function() {
    $(this).data("hovered", false);
}); 

if ( $("#aboutMenu").data("hovered") ) {
    alert ('h');
} else {
    alert ('nh');
}
}); 
```

**更新：**

或者另一种方法是系统不断检查 menu3 或 aboutMenu 是否悬停，如果不是，则弹出悬停消息。但是，这只会在页面初始化时运行一次，如何让它保持检查？谢谢

```
$(document).ready(function() {
$("#aboutMenu,#menu3").hover(function() {
$(this).data("hovered", true);
}, function() {
    $(this).data("hovered", false);
}); 

if ( $("#aboutMenu,#menu3").data("hovered") ) 
alert ('hovered');
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T11:01:06.370

```
function checkHover() {
  if ($("#aboutMenu,#menu3").hasClass("hovered")) {
    alert ('hovered');
    //other stuff if hovered
  }
  else {
    //other stuff if not hovered
  }
}

$(document).ready(function() {
  $("#aboutMenu,#menu3").hover(function() {
    $(this).addClass("hovered");
  }, function() {
    $(this).removeClass("hovered");
  }); 

  setInterval(checkHover, 1000);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T11:00:08.417

定期检查悬停状态是个好主意吗？

```
function chkhover(){
    if ($('#aboutMenu').is(':hover')){
        alert('#aboutMenu hoverstate is: hovered');
    }
    setTimeout(chkhover, 500);
}

$(document).ready(chkhover); 
```

看到这个[**jsfiddle**](http://jsfiddle.net/KooiInc/JYXm7/)。顺便说一下，它也演示了一个纯 CSS 的解决方案。

# google-drive-api - 使用 python 客户端库正确使用可恢复上传

> ID：14001982
> 
> 赞同：0
> 
> 时间：2012-12-22T10:21:08.937
> 
> 标签：google-drive-api, google-api-python-client

我对可恢复上传到谷歌驱动器有点困惑，我希望有人能善意地澄清一下。

在此页面： [https](https://developers.google.com/api-client-library/python/guide/media_upload)
://developers.google.com/api-client-library/python/guide/media_upload 它指出：

> 对于大型媒体文件，您可以使用可恢复媒体上传来发送文件，这允许文件以较小的块上传。

还描述了使用 next_chunk() 执行此操作、检查错误和使用指数重试的方法。

所有其他对上传的引用，无论是插入还是更新文件，都使用“resumable=True”，但没有实现“next_chunk”功能。就像在这个页面中一样：[https ://developers.google.com/drive/v2/reference/files/insert#examples](https://developers.google.com/drive/v2/reference/files/insert#examples)

这是否意味着“可恢复”由库处理？
如果不是，如果出现错误，是否与前面的示例相同（使用 next_chunk）？
如果我的应用程序应该捕获错误，那么唯一的方法是从头开始上传，因为没有返回成功字节或其他内容。这是正确的方法吗？

同样在此页面：[https://developers.google.com/drive/manage-uploads](https://developers.google.com/drive/manage-uploads)
它指出：

> 通过可恢复上传，您可以将文件分成块并发送一系列请求以按顺序上传每个块。这不是首选方法，因为存在与额外请求相关的性能成本，并且通常不需要。

这两种说法中哪一种是正确的？

提前感谢您的任何意见。
安德烈亚斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T22:22:10.563

安德烈亚斯，

我相信带有 resumable=true 属性的 service.files.insert().execute() 的作用类似于您发布的示例中的手册 next_chunk ...我不确定它是如何处理它的，因为我不能找不到读取源代码的方法（我只是从 python 开始），但是如果我使用 .insert().execute() 方法和 resumable=true 中断大文件的上传，则其中一行输出是这样的：

```
File "/usr/lib/python2.5/site-packages/apiclient/http.py", line 656, in execute
  _, body = self.next_chunk(http=http) 
```

但是，我找不到使用此方法获取进度指示器的方法，因此我更喜欢使用手动 request.next_chunk() 来代替。

关于可恢复上传的性能成本，有额外的信息被发送，但我认为它不会减慢这个过程......你可以使用更大的块大小（一些 MiB），这样额外的请求字节可以忽略不计。在某些情况下，SDK 文档确实支持可恢复上传：

“为了更可靠地上传数据文件，您可以使用可恢复上传协议。该协议允许您在通信故障中断数据流后恢复上传操作。如果您正在传输大文件并且可能网络中断或其他一些传输故障很高，例如，从移动客户端应用程序上传时。它还可以在网络故障时减少您的带宽使用，因为您不必从头开始重新启动大文件上传。 "

# jquery - 选项中的jquery静态内容

> ID：14001985
> 
> 赞同：2
> 
> 时间：2012-12-22T10:21:50.520
> 
> 标签：jquery, plugins

我为两个jQuery写了一个插件，首先接收数据并添加

1.

```
$(function () {

    $.fn.mlData = function(params,callback) {

        $.getJSON(params.url, function(result) {
            callback(result,add);
        });

        function add (dataValue,dataText,dataName) {
            $(mlThis).append('<option dataName="'+dataName+'" value="'+dataValue+'">'+dataText+'</option>');
        }
    }

}); 
```

并使用它

```
$('#select').mlData({
    url:'ajax.php',
},function (result,add) {
    $.each(result.regions,function(k,v) {
        add(v.id,v.region,'region');
        if(v.cities.length > 0) {
            $.each(v.cities, function(i,c) {
                add(c.id,c.name,'city');
            });
        }
    });
}); 
```

**它可以工作，但是 2 个插件可以处理相同的元素，但使用新数据**

插件 2

```
$.fn.mlSelector = function(params) { 
    $('option',this).each(function() {  
        alert($(this).text());  
    }); 
}; 
```

而且不行，调用第二个插件，但是他没有看到新的

```
$('#ss').mlData({
    url:'ajax.php',
},function (result,add) {
    $.each(result.regions,function(k,v) {
        add(v.id,v.region,'region');
        if(v.cities.length > 0) {
            $.each(v.cities, function(i,c) {
                add(c.id,c.name,'city');
            });
        }
    });
}); 

$('#ss').mlSelect(); // NOT WORK :( 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T10:51:43.947

正如我在评论中提到的，`$.getJSON`是一个异步函数。数据不会在你调用后立即可用，而是在你处理完服务器在`success`回调中返回的响应之后。

换句话说：

```
$('#ss').mlData({
  url:'ajax.php',
}, function(result,add) {
  ...
  /* At his point the data should be available */
  /* You can call it onwards */
  $('#ss').mlSelect();
}); 
```

这就是为什么您看不到新数据的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T10:42:28.580

您必须在第一个回调中使用第二个插件。

```
$('#ss').mlData({
    url:'ajax.php',
},function (result,add) {
    $.each(result.regions,function(k,v) {
        add(v.id,v.region,'region');
        if(v.cities.length > 0) {
            $.each(v.cities, function(i,c) {
                add(c.id,c.name,'city');
            });
        }
    });

    $('#ss').mlSelect();
}); 
```

# c# - 使用 GSM 服务器发送和接收短信

> ID：14001988
> 
> 赞同：0
> 
> 时间：2012-12-22T10:22:05.477
> 
> 标签：c#, sms, sms-gateway

[我从这个链接](http://www.codeproject.com/Articles/20420/How-To-Send-and-Receive-SMS-using-GSM-Modem)下载使用 GSM server.program 发送和接收短信

但是当从手机发送短信到GSM服务器时，短信没有显示在GSM服务器中。为什么？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T06:32:12.093

您可以使用 gsm 调制解调器在这里发送和接收我使用了两个示例，它们都可以正常工作：
[通过 gsm 调制解调器发送短信](http://sharp-coders.blogspot.com/2011/12/send-sms-using-at-commands-via-gms.html)

[通过 gsm 调制解调器发送和接收短信](http://www.codeproject.com/Articles/20420/How-To-Send-and-Receive-SMS-using-GSM-Modem)

# php - 将带有“&”字符的字符串保存到数据库

> ID：14001992
> 
> 赞同：0
> 
> 时间：2012-12-22T10:22:35.913
> 
> 标签：php

当我有一个带有“&”字符的 PHP 字符串时，例如 Dolce & Gabanna，并且我将这个字符串保存到数据库中，他只保存了 Dolce 部分而不保存部分“& Gabanna”。这是由 & 字符引起的。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T10:26:01.137

您的问题与数据库无关。
在其他地方，您正在丢失字符串的其余部分。可能在 HTML 部分的某个地方。

您必须遵循您的应用程序逻辑并找到字符串被破坏的地方。
保存前检查一下。
在以 HTML 显示之前检查它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T10:30:01.707

这不是因为您的数据库。这是因为，您需要使用[escape](http://www.w3schools.com/jsref/jsref_escape.asp)或[encodeURIComponent](http://www.w3schools.com/jsref/jsref_encodeuricomponent.asp)函数对字符串进行 urlencode。

**问题：-**

> 文本框中的示例文本：-“大家好，解决我的问题”
> 
> 在下一页，你会得到“大家好”
> 
> 如果您通过 get 或 post 方法，将缺少剩余的文本

**请求参数**

```
index.php?id=2489&user=tom  //normal querystring 
```

可以看到，`&`用于连接两个参数。所以这就是为什么你缺少那些字符串。

# c# - OleDbCommand 溢出异常

> ID：14001993
> 
> 赞同：0
> 
> 时间：2012-12-22T10:22:41.433
> 
> 标签：c#, ms-access, insert

我正在从文件中读取并将值插入到我的表中。但是我没有插入所有列。我得到一个我无法放置的溢出异常。文件内容如下：

**Huseyin Sabirli 13/11/1978 Nicosia MBRh+ 05333768275 Kelebek Street, No:11, Taskinkoy, Nicosia, KKTC**

创建表的代码

```
c.CommandText = "CREATE TABLE patients (patientid AUTOINCREMENT PRIMARY KEY, firstlastname CHAR, birthdate CHAR, birthplace CHAR, gender CHAR, bloodtype CHAR, telnum long, address CHAR)"; 
```

插入代码是：

```
 c.CommandText = "INSERT INTO patients (" +
                            "firstlastname, birthdate, birthplace, bloodtype, telnum, address" +
                                ") VALUES ('" +
                                info.Substring(0, 15) + "', '" +
                                info.Substring(24, 10) + "', '" +
                                info.Substring(35, 9) + "', '" +
                                info.Substring(47, 5) + "', '" +
                                info.Substring(53, 11) + "', '" +
                                info.Substring(64) + "')";

            c.ExecuteNonQuery(); 
```

在行抛出溢出异常`c.ExecuteNonQuery();`。

注意：实际文件中的间距与上面显示的不同。这解释了 substring 函数中的变体长度。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T11:19:19.850

我认为您的子字符串表达式有问题。这不太对。
@Remou 的评论还确定了异常的当前原因。
当然，字符串连接存在很大问题。
将值传递给数据库引擎时，这不是正确的做法。
（引用问题，Sql Injection Attacks）

正确的方法应该是：（
创建表后将 telnum 字段更改为 char 数据类型，因为它不是实数值）

```
CREATE TABLE patients 
     (patientid AUTOINCREMENT PRIMARY KEY, 
     firstlastname CHAR(15), 
     birthdate CHAR(10), 
     birthplace CHAR(8), 
     gender CHAR(1), 
     bloodtype CHAR(4), 
     telnum CHAR(12), 
     address CHAR(255))
......

string info = "Huseyin Sabirli 13/11/1978 Nicosia MBRh+ 05333768275 " + 
              "Kelebek Street, No:11, Taskinkoy, Nicosia, KKTC";

string name = info.Substring(0, 15);
string date = info.Substring(16, 11)
string place = info.Substring(27, 8);
string blood = info.Substring(37, 4);
string num = info.Substring(41, 12);
string address = info.Substring(53);

string cmdText = "INSERT INTO patients (" +
                 "firstlastname, birthdate, birthplace, bloodtype, telnum, address) " +
                 "VALUES (?,?,?,?,?,?)"
using(OleDbConnection cn = getConnection())
{
    cn.Open();
    using(OleDbCommand cmd = new OleDbCommand(cmdText, cn))
    {
        cmd.Parameters.AddWithValue("name", name);
        cmd.Parameters.AddWithValue("date", date);
        cmd.Parameters.AddWithValue("place", place);
        cmd.Parameters.AddWithValue("blood", blood);
        cmd.Parameters.AddWithValue("num", num);
        cmd.Parameters.AddWithValue("address", address);
        cmd.ExecuteNonQuery();
    }
} 
```

# python - distutils.core.setup 控制台脚本入口点？

> ID：14001995
> 
> 赞同：5
> 
> 时间：2012-12-22T10:22:57.593
> 
> 标签：python, python-3.x, installation, distutils

我曾经用`setuptools.setup`. 但现在我想使用`distutils.core.setup`.

`setuptools`我使用了与此类似的代码：

```
setup(
    name = "radish",
    version = "0.01.00",
    description = "Behaviour-Driven-Development tool for python",
    author = "Timo Furrer",
    author_email = "tuxtimo@gmail.com",
    url = "http://github.com/timofurrer/radish",
    packages = [ "radish", "radish/Writers" ],
    entry_points = { "console_scripts": [ "radish = radish.main:main", ] },
    package_data = { "radish": [ "*.md" ] }
    ...
) 
```

我想对`distutils`- 但没有`entry_points`可用的做同样的事情。我该如何管理？如何指定我的新命令？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-22T10:32:19.653

你不能，不能`distutils`。它不支持`entry_points`，这是一个 setuptools-only 功能。

改为使用[`setuptools`](http://pypi.python.org/pypi/setuptools/)；它支持 Python 3。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T19:34:31.523

使用 distutils，脚本只是文件，就像这个例子：

```
#!/usr/bin/env python
from radish.main import main
main() 
```

在您的安装脚本中，您使用脚本参数列出这些文件。

这在 Unix 上很好用，如果人们/安装者正确设置文件关联（不生成二进制包装器，就像 setuptools 所做的那样），它也可以在 Windows 上工作。Windows 需要一个 .py 扩展名，在 Unix 上也可以（不需要，对很多人来说很丑）。

远非完美，但如果您的受众是开发人员，或者不使用 Windows，则可以使用。

# php - 使用 orderby=rand 时拆分 Wordpress 循环

> ID：14001996
> 
> 赞同：1
> 
> 时间：2012-12-22T10:22:57.797
> 
> 标签：php, wordpress

我非常感谢您提供以下帮助：

*   我有一个显示帖子的 Wordpress 页面`query_posts('cat=10&tag=parties&orderby=rand');`

*   我想做的是将列表分成两半并在中间插入文本。理想情况下，文本将来自 Wordpress 中页面的 WYSIWYG 编辑器。我想我需要两组“php 查询帖子”，第二个查询不包括第一个查询的帖子？

有人能帮忙吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T11:20:52.377

而不是使用`query_posts`你为什么不使用 a `WP_Query`？这将为您提供一个可以查询其大小的数组，然后您可以拥有一个递增的计数器，一旦它达到中间标记，您就可以插入任何您想要的内容并继续前进。

像这样设置它：

```
// first, run the main loop to get the text editor content
while(have_posts()) : the_post(); 
  // we just assign it to a variable at this point without printing it
  $content_to_insert = get_the_content(); 
endwhile;

// now we set up the query to get out all the party posts
$parties_query = array( 
  'cat' => 10, 
  'tag' => 'parties', 
  'orderby' => 'rand', 
  'posts_per_page' => -1 
);

// NB. you will not get ALL your results unless you use 'posts_per_page' or 'showposts' set to -1

// Now run a new WP_Query with that query
$parties = new WP_Query($parties_query);

// get the halfway point - needs to be a whole number of course!
$half = round( sizeof($parties)/2 );

// this is our counter, initially zero
$i = 0

while($parties->have_posts()) : $parties->the_post(); ?>

<?php if ($i == $half) : ?>

// we are halfway through - print the text!
<?php echo apply_filters('the_content', $content_to_insert); ?>

<?php else : ?>

// render your party stuff
// you can use tags reserved for use in the loop, eg.

<div class="party">
  <h2><?php the_title(); ?></h2>
</div>

<?php endif; ?>

<?php $i++; endwhile; ?> 
```

希望有效。昨晚是圣诞晚会的一个深夜。

# php - php，获取当前用户的密码

> ID：14001997
> 
> 赞同：2
> 
> 时间：2012-12-22T10:23:00.327
> 
> 标签：php, windows-7, active-directory

> **可能重复：**
> [在 php 中使用 windows 身份验证？](https://stackoverflow.com/questions/2501729/using-windows-authentication-with-php)

我构建了一个 php Intranet Web 应用程序，允许用户显示他们存储在 Active Directory 中的信息。

我的应用程序运行良好，但在用户看到他的信息之前，他必须使用他的 Windows 凭据登录。

我想使用他在登录到 Windows 时输入的 Windows 凭据通过 Active 目录对用户进行自动身份验证。

我成功地获得了使用 NTLM 女巫的当前用户的用户名，在本文中进行了描述：http: [//siphon9.net/loune/2007/10/simple-lightweight-ntlm-in-php/](http://siphon9.net/loune/2007/10/simple-lightweight-ntlm-in-php/)

我知道我必须使用 LDAP 从 AD 中检索用户属性。

我知道该怎么做，但问题是：

我需要当前用户密码才能在 @ldap_bind 函数中使用它。

**有没有办法找回当前用户的密码？？？**

我正在使用 Windows 7 我正在使用 Apatch 2.2、php5

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T14:12:14.843

不，您无法从 Active Directory 获取用户密码。如果可能的话，任何程序都可以获取您的密码，然后更改它。

如果您想在不询问密码的情况下查询 Active Directory，您有一些选择。

1.  我不知道如何在 php 中执行此操作，但使用 IIS，您可以使用集成的 Windows 身份验证和委派。这很难设置。

2.  由于您所做的只是查询，因此只需为没有任何特殊权限的网站创建一个帐户。使用此硬编码密码。

3.  启用对 Active Directory 的匿名访问。这将允许您使用 null 作为用户名和密码。最佳实践说不要这样做。

# android - 使用 java 邮件 API 或任何其他语言发送批量邮件，而不在服务器上存储用户密码

> ID：14001999
> 
> 赞同：3
> 
> 时间：2012-12-22T10:23:00.797
> 
> 标签：android, gmail, openid, jakarta-mail, yahoo

我不知道该问题的适当标题应该是什么，但我的问题摘要如下。

我正在开发一个 android 应用程序，用户只需单击一次即可在不同邮件服务器的各种电子邮件 ID 上发送电子邮件。现在，我的应用程序设计就像用户单击发送邮件时的 . 首先，用户的查询将访问我在远程服务器上运行的 Web 服务。该 Web 服务将在不同服务器的不同 ID 上发送电子邮件。我尝试过使用 ssl 的 java 邮件 API，但是要发送邮件，我们必须将用户名和密码都作为参数传递。现在，我的问题是我应该在我的网络服务器上保存不同用户的密码。因为我认为这将是用户的安全漏洞。而且我认为我们不能使用 java 邮件 API 发送没有密码的邮件。如果是，比如何？我也听说过 open id ，但我认为它只是用于身份验证。或者我可以使用 open id 概念来发送邮件而不存储密码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T16:37:50.830

有几个概念可以帮助你确定你能做什么和不能做什么......

**SMTP现状**

现在所有的 SMTP 服务器（这些是接收和发送电子邮件的服务器）都使用 ESMTP 标准并且需要用户身份验证。这样做的原因是为了避免使用这些服务器`spam`代表用户发送。

**你能做什么**

因此，作为起点，要访问受信任的电子邮件服务器，您需要有效的用户凭据。

您有两个主要选择：

1.  使用您自己的电子邮件帐户，使用您的凭据并将字段设置`replyTo`为`sentFrom`用户电子邮件帐户。最终结果可能取决于接收电子邮件的人使用的电子邮件提供商和电子邮件客户端，因为其中一些可能会将邮件分类为`spam`.

2.  使用用户自己的凭据。您在问题中说用户首先连接到您的服务器，因此您可以在那时请求用户登录名和密码，而您不需要将其存储在您的服务器中。为了避免用户每次都输入密码，用户只需在您的应用程序中输入登录名和密码一次，您将其存储在本地（最好加密），并且每次都发送凭据（再次最好加密），用户连接到您的服务器以发送电子邮件。

使用上述任何一种方法，您都可以降低泄露用户邮件凭据的风险。

问候。