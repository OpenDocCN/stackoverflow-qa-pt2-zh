# StackOverflow 问答 15507000-15507999

# jquery - JQuery 数据表使用 fnClose() 关闭每个打开的行

> ID：15507000
> 
> 赞同：1
> 
> 时间：2013-03-19T17:58:48.680
> 
> 标签：jquery, datatables

我正在尝试在我的数据表中制作一个关闭*onClick*所有打开的*tr*的按钮。

我正在使用以下命令打开行：

```
oTable.fnOpen(nTr, fnFormatDetails(oTable, nTr), 'newtr'); 
```

是否有可能关闭我的数据表中所有打开的*tr*行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T09:10:43.883

初始化数据表后，您可以在所有 tr 上绑定单击事件并使用以下方法关闭所选行：

```
oTable.$('tr').click(function(){
   if ( oTable.fnIsOpen(this) ) {
      oTable.fnClose( this );
   }
}); 
```

有关数据表 API 的更多文档，请参阅[此处。](http://www.datatables.net/api)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T18:03:50.323

我认为您试图完成与我相同的事情，即当我打开第二行时，我希望前一行关闭。

这意味着我一次只能显示一行详细信息。

```
$(document).ready(function () {
    var previousTr;
    oTable = $('#bookingstable').dataTable
         ({
             "aoColumnDefs": [
                 { "bVisible": false, "aTargets": [2, 6, 7, 8, 9, 12, 13, 14, 15] }
             ]
         });

    $('#bookingstable tbody td').live('click', function () {
        var selectedTr = $(this).parents('tr')[0];
        if (oTable.fnIsOpen(previousTr)  && previousTr != selectedTr)) {
            oTable.fnClose(previousTr);
        }
        if (oTable.fnIsOpen(selectedTr)) {
            oTable.fnClose(selectedTr);
        }
        else {
            oTable.fnOpen(selectedTr, fnDetailsRow(selectedTr), 'details-row');
            previousTr = selectedTr;
        }
    });
});
function fnDetailsRow(selectedTr) {
    var TrData = oTable.fnGetData(selectedTr);
    var detailsRow = '<table border="0">';
    detailsRow += '<tr><td class="space" rowspan="4"><br /><h1>⇉&lt;/h1></td><td     class="LabelField">Passenger Name</td><td class="ValueField">' + TrData[3] + '</td><td class="LabelField" rowspan="2">Pickup Details</td><td class="ValueField" rowspan="2">' + TrData[14] + '</td><td class="LabelField" rowspan="2">Customer Notes</td><td class="ValueField" rowspan="2">' + TrData[9] + '</td></tr>';
    detailsRow += '<tr><td class="LabelField">Phone Number</td><td class="ValueField">' + TrData[2] + '</td></tr>';
    detailsRow += '<tr><td class="LabelField">Car Type</td><td class="ValueField">' + TrData[6] + '</td><td class="LabelField" rowspan="2">Dropoff Details</td><td class="ValueField"  rowspan="2">' + TrData[15] + '</td><td class="LabelField" rowspan="2">Office Notes</td><td class="ValueField" rowspan="2">' + TrData[12] + '</td></tr>';
    detailsRow += '<tr><td class="LabelField">Pax and Bags</td><td class="ValueField">' + TrData[7] + ' Paxs & ' + TrData[8] + ' Bags' + '</td></tr>';
    return detailsRow;
} 
```

请注意，我`var previousTr`在打开任何第 2 行之前声明准备好文档并检查它。当然记得在打开新行后再次设置它。

# matlab - 提取至少某个值的值和关联字符串

> ID：15507003
> 
> 赞同：0
> 
> 时间：2013-03-19T17:58:54.557
> 
> 标签：matlab

我正在尝试编写代码以提取 1x1000 的数据向量，这些值的倍数变化为 2 或更多。倍数变化 2 相当于 -1。我想提取我的基因名称（在向量 C 中编码）和值（在向量 fcsites 中编码）。到目前为止，这是我想出的，但我的问题之一是我不知道将什么指定为新向量的长度。有谁知道更好的方法来解决这个问题？

```
atleast = {C,fcsites}
Z = zeros(length(C),1);
for i2=1:length(C)
Z(i2)=C(fcsites<=-1);
end 
```

我得到错误：

```
atleast = 

    {602x1 cell}    [602x1 double]

The following error occurred converting from cell to double:
Error using double
Conversion to double from cell is not possible. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:25:32.567

Find the desired elements in `fcsites`, and use their corresponding indices as a subscript for `C`:

```
idx = (fcsites <= -1);
X = C(idx) 
```

or shorter:

```
X = C(fcsites <= -1) 
```

Now `X` contains all the names from `C` that correspond to values in `fcsites` that are less than or equal to -1.

# ios - iOS 在 PDF 中嵌入页面缩略图

> ID：15507006
> 
> 赞同：-1
> 
> 时间：2013-03-19T17:59:12.190
> 
> 标签：ios, pdf, thumbnails

我需要在大型 hq PDF 文件中嵌入缩略图，这些文件是使用 UIGraphicsBeginPDFContextToFile 和 UIGraphicsBeginPDFPage 创建的，并在其上绘制文本和图像。

有谁知道，如何嵌入页面拇指？

乔，阿诺

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T22:03:28.580

如果您想从 PDF 创建缩略图，则可以使用下面的代码。此代码将其写入磁盘。很容易更改它，以便该方法返回图像。

```
- (void)createPDFThumbnailForFile:(NSString *)theFilename {
    if (!theFilename) {return;}
    @try {
        NSString *path = [FileInfo fullPathForFile:theFilename];
        NSURL *pdfFileUrl = [NSURL fileURLWithPath:path];
        CFURLRef pdfFileRef = (__bridge CFURLRef) pdfFileUrl;
        CGPDFDocumentRef pdf = CGPDFDocumentCreateWithURL(pdfFileRef);
        CGPDFPageRef page;
        CGRect aRect = CGRectMake(0, 0, 70, 100); // thumbnail size
        UIGraphicsBeginImageContext(aRect.size);
        CGContextRef context = UIGraphicsGetCurrentContext();
        UIImage *thumbnailImage;
    //    NSUInteger totalNum = CGPDFDocumentGetNumberOfPages(pdf);
        //we only want the first page
        for (int i = 0; i < 1; i++) {
            CGContextSaveGState(context);
            CGContextTranslateCTM(context, 0.0, aRect.size.height);
            CGContextScaleCTM(context, 1.0, -1.0);
            CGContextSetGrayFillColor(context, 1.0, 1.0);
            CGContextFillRect(context, aRect);
            // Grab the first PDF page
            page = CGPDFDocumentGetPage(pdf, 1);
            CGAffineTransform pdfTransform = CGPDFPageGetDrawingTransform(page, kCGPDFMediaBox, aRect, 0, true);
            // And apply the transform.
            CGContextConcatCTM(context, pdfTransform);

            CGContextDrawPDFPage(context, page);

            // Create the new UIImage from the context
            thumbnailImage = UIGraphicsGetImageFromCurrentImageContext();
            CGContextRestoreGState(context);
        }
        CGPDFDocumentRelease(pdf);
        NSString *pngPath = [path stringByReplacingOccurrencesOfString:@".pdf" withString:@".png"];
    //    [@"test" writeToFile:pngPath atomically:YES encoding:NSUTF8StringEncoding error:nil];
        [UIImagePNGRepresentation(thumbnailImage) writeToFile:pngPath atomically:YES];
    }
    @catch (NSException *exception) {
        DebugLog(@"Could not write thumbnail to : %@ /n --> %@", theFileToSave, exception.description);
    }

} 
```

# linux - 打开终端以发出一个命令

> ID：15507007
> 
> 赞同：1
> 
> 时间：2013-03-19T17:59:17.883
> 
> 标签：linux, bash, terminal

为了启动带参数的 gui 程序，我经常发现自己打开一个终端（在我的例子中是 urxvt）：用 'nohup' 或 'disown' 启动相应的程序，然后退出终端。这使程序按需要运行，但不太舒服。我不使用任何像 tmux 或 screen 这样的多路复用器，这样可以规避这个问题。我希望能够启动一个终端，它会在发出一个命令后自动拒绝并退出。有什么想法可以实现吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:28:27.177

There are more elegant ways of solving this problem, but here's a solution based on what you've described:

$ (xclock &); exit

Replace xclock with the GUI program you want to run.

# python - python可以制作Matlab风格的GUI吗

> ID：15507009
> 
> 赞同：0
> 
> 时间：2013-03-19T17:59:20.250
> 
> 标签：python, matlab, wxpython, tkinter

我真的很想爱上 Python 并远离 Matlab。是否可以在 Python 中制作 Matlab 风格的 GUI？相比之下，这有多容易？（我以编程方式制作matlab GUI，不敢使用GUIDE）我可以将matplotlib 图形放在这些GUI 中吗？tk 或 wx（或其他东西）对此更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:59:46.057

之前没用过Matlab，不知道是不是GUI。但如果您倾向于以交互方式使用 Python，您可能想尝试一下 iPython。带有 Qt 的 Ipython 可以为您呈现一个优雅的 GUI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T19:10:07.640

wxPython 具有选项卡、网格或 ListCtrls（即表格）并支持 matplotlib 和 PyPlot 用于图形。您可以在以下链接中阅读有关使用 matplotlib 的信息：

*   [http://eli.thegreenplace.net/2008/08/01/matplotlib-with-wxpython-guis/](http://eli.thegreenplace.net/2008/08/01/matplotlib-with-wxpython-guis/)
*   [在 WxPython 面板中嵌入 matplotlib 图](https://stackoverflow.com/questions/10737459/embedding-a-matplotlib-figure-inside-a-wxpython-panel)
*   [http://www.scipy.org/Cookbook/Matplotlib/EmbeddingInWx](http://www.scipy.org/Cookbook/Matplotlib/EmbeddingInWx)
*   [http://wiki.wxpython.org/MatplotlibFourierDemo](http://wiki.wxpython.org/MatplotlibFourierDemo)

要查看 wxPython 包含的所有小部件，请访问 www.wxpython.org 并单击左侧的下载链接。您会发现他们有一个独立的 Docs & Demo 包，可以向您展示几乎每个小部件及其工作原理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T21:04:59.137

对于简单的界面，您可能需要查看 matplotlib 提供的 GUI 中性小部件，记录在此 -- [http://matplotlib.org/api/widgets_api.html](http://matplotlib.org/api/widgets_api.html)

这是一个使用这些 GUI 中性小部件绘制具有可变参数的函数的简单示例，这些参数由三个滑块小部件控制：

```
import functools
import numpy as np
import pylab
import matplotlib.pyplot as plt
from matplotlib.widgets import Slider, Button, RadioButtons, MultiCursor

def hillfxn(x, B, K, n):
    xn = float(x**n)
    return (B * xn)/(K**n + xn)

def draw_function(x, y, xlabel="Activator concentration (X)", 
                  ylabel="Promoter activity"):
    fig, ax = plt.subplots(1, 1, sharex=True)
    plt.subplots_adjust(left=0.15, bottom=0.25)
    lines = ax.plot(x, y)
    ax.set_xlabel(xlabel)
    ax.set_ylabel(ylabel)
    ax.set_ylim(0,max(y)*1.1)
    return fig, ax, lines

def draw_interactive_controls(n, B, K):
    axcolor = 'lightgoldenrodyellow'
    axK = plt.axes([0.1, 0.01, 0.75, 0.03], axisbg=axcolor)
    axB  = plt.axes([0.1, 0.06, 0.75, 0.03], axisbg=axcolor)
    axN  = plt.axes([0.1, 0.11, 0.75, 0.03], axisbg=axcolor)
    Nslider = Slider(axN, "$n$", 1, 10, valinit=n, valfmt='%1.3f')
    Bslider = Slider(axB, "$\\beta$", 0, 20, valinit=B, valfmt='%1.3f')
    Kslider = Slider(axK, "$K$", 0.01, 20, valinit=K, valfmt='%1.3f')       
    return Nslider, Bslider, Kslider

def update_plot(val, x=None, lines=None, ax=None, 
                Nslider=None, Bslider=None, Kslider=None):
    n = Nslider.val
    B = Bslider.val
    K = Kslider.val
    y = [hillfxn(i, B, K, n) for i in x]  
    lines[0].set_ydata(y)
    ax.set_ylim(0,max(y)*1.1)  
    pylab.draw()

if __name__ == "__main__":
    # initial values
    B, K, n = 5, 5, 1
    x= np.linspace(0,30,250)
    y = [hillfxn(i, B, K, n) for i in x]

    # setup initial graph and control settings
    fig, ax, lines = draw_function(x,y)
    Nslider, Bslider, Kslider = draw_interactive_controls(n, B, K)

    # specify updating function for interactive controls
    updatefxn = functools.partial(update_plot, x=x, lines=lines, ax=ax, 
                    Nslider=Nslider, Bslider=Bslider, Kslider=Kslider)

    Nslider.on_changed(updatefxn)
    Bslider.on_changed(updatefxn)
    Kslider.on_changed(updatefxn)
    pylab.show() 
```

这将产生如下界面：

![matplotlib GUI 中性小部件](../Images/911b250f5da1b6f8ddbce50494047f0a.png)

# prolog - Prolog中列表连接程序的声明式解释

> ID：15507010
> 
> 赞同：2
> 
> 时间：2013-03-19T17:59:20.747
> 
> 标签：prolog, declarative

我有一个非常简单的问题：**编写一个实现 append Prolog 函数的 Prolog 程序，它连接两个字符串并以下列方式工作：**

1.  追加（[a，b]，[c，d]，X）。---> X = [a,b,c,d]
2.  追加（[a，b]，X，[a，b，c，d]）。---> X = [c,d]
3.  追加（[a,b],[X,d],[a,b,c,d]）。---> X=c
4.  追加（X，Y，[a，b，c，d]）。---> X=[] 和 Y=[a,b,c,d)

所以我有以下两种解决方案，我不太确定我的声明性解释是否正确：

**1）解决方案1：**

```
myappend1([],L,L).

myappend1([X|L1],L2,[X|L3]) :- myappend1(L1,L2,L3). 
```

我认为我可以以声明性方式阅读它，如下所示：

事实是：如果第一个列表 (L1) 为空且第二个列表 (L2) 不为空，则L1*L2 的串联为 L2**为 TRUE**

如果事实不正确，则意味着第一个列表不为空，因此第一个列表和第二个列表的连接不正确，即第二个列表

所以，让我称第一个列表 L1、第二个列表 L2 和第三个列表 L3 如果 L3 是 L1 和 L2 的串联，则规则响应 TRUE，否则返回 false

我认为这条规则的声明性含义是：如果规则的主体为真，则规则的头部为真。

*   在头部从L1列表和L3列表中提取第一个X元素（并尝试统一，如果匹配则继续，否则意味着第三个列表它不是第一个和第二个列表的串联）
*   在正文中调用第一个没有 X 元素的列表、第二个列表和 L3 列表（表示连接）上的函数

当它达到我已证明的事实**myappend1([],L,L) 的基本情况时。**这是真的，程序在前一个过去进行回溯，并且因为第一个列表的 X 元素与第三个列表的 X 元素统一它可以做到这一点，这个计算通过它是 TRUE 并返回直到到达第一个断言

这是一个正确的声明性解释吗？

**2）第二种解决方案：**

```
myappend2([],L,L).

myappend2(L1,L2,L3) :-  L1=[X|T],               % Dimostra questo predicato AND
                    L3=[X|L4],      % Dimostra questo predicato AND
            myappend2(T,L2,L4).     % Dimostra questa funzione 
```

与前面的解决方案一样，事实简单地说：如果第一个列表 (L1) 为空且第二个列表 (L2) 不为空，则L1*L2 的串联为 L2**为 TRUE**

如果事实不正确，则意味着第一个列表不为空，因此第一个列表和第二个列表的连接不正确，即第二个列表

如果事实不正确，则 Prolog 调用规则，该规则意味着：如果规则主体为真，则规则的头部为真。

在这种情况下，我可以这样阅读：

如果满足以下条件，则 L1 和 L2 的串联 L3 为 TRUE：

*   L1 的当前第一个 X 元素与连接列表的当前第一个元素和 myappend2 在第一个子列表、L2 和第三个子列表上调用它是 true

这是对的吗？

对我来说，以声明的方式进行推理是如此困难:-(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:48:38.253

当你试图弄清楚一个谓词的声明性含义时，你会问：这个谓词适用于哪些解决方案？

Prolog 的¹子句独立地为解决方案集做出贡献。因此，在条款之间建立任何联系都需要进行一些额外的审查。很容易做出一些并非如此的假设：

> `myappend1([],L,L).` 如果事实~~并非~~如此，则意味着第一个列表不为空，因此...

考虑一个目标，`myappend1([],[],[a]).`事实并不适用，第一个列表仍然是空的。在这里，您正在尝试操作该子句的含义。这样做非常诱人，因为编程语言的大部分内容只能通过想象事情是如何一步步发生的来理解的。Prolog 的困难在于试图忽略这些细节，而不是完全忽略程序方面。

> `myappend1([X|L1],L2,[X|L3]) :- myappend1(L1,L2,L3).`

要阅读规则，特别是递归规则，查看`:-`1970 年代 ← 的渲染会很有帮助。所以它是一个箭头，但它是从右到左的。因此，您可以按如下方式阅读此规则，从右侧开始：

*假设`myappend(L1,L2,L3)`成立，[现在越过`:-`左侧]也`myappend([X|L1],L2,[X|L3])`成立。*

有时，阅读此类规则的更好方法是完全遮住头部并询问

> `??? :- myappend1(L1,L2,L3).`

*假设，我知道一些`L1`，我能从`L2`中`L3`得出`myappend1(L1,L2,L3).`什么结论？有什么有趣的吗？有什么相关的东西我可以很容易地从这 3 个值中构建出来吗？*

这是一开始有点令人反感的事情，因为你可能会说：但是我怎么知道这样的存在呢？好吧，你没有。你只是*假设*它存在。如果它永远不会存在，那么您将永远无法得出这个结论。

许多人试图从左到右阅读规则，但虽然 Prolog 实际上是从左到右执行它们，但它们所涵盖的含义更容易理解为结论方向。当 Prolog 从左到右执行规则时，它不知道这是否会成功。因此，执行可能完全是推测性的。想想`append(L1,[z],[a,b,c,d,e])`。在这里，Prolog 将对列表的每个元素应用此规则。但所有这些申请都是徒劳的。也就是说，最终它会失败。

* * *

印刷精美

1 实际上，Prolog 的纯单调子集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T18:58:11.230

与上次一样，您正在添加代码中不存在的限制。不要为此感到难过，Prolog 非常不同，需要时间来适应它。

开始吧。

```
append([], L, L). 
```

你说：

> 如果第一个列表 (L1) 为空且第二个列表 (L2) 不为空，则 L1*L2 的串联为 L2 为 TRUE

事实上，这条规则并*没有*说明 L2 是否为空——甚至是一个列表！——或者不是。它只是说附加到其他东西的空列表是其他东西。观察：

```
?- append([], foo, X).
X = foo. 
```

这里的声明性阅读是“附加到 L 的空列表是 L”。

> 如果事实不正确，则意味着第一个列表不为空，因此第一个列表和第二个列表的连接不正确，即第二个列表

是的，这是正确的，但 Prolog 并没有深入研究身体。它只是说“第一个列表不为空，因此此规则不匹配；继续前进。”

下一条规则：

```
myappend1([X|L1], L2, [X|L3]) :- myappend1(L1,L2,L3). 
```

你的评论对我来说似乎过于复杂。我想说这条规则说：“如果列表 L1 到 L2 的 myappend1 是 L3，则列表 [X 后跟 L1] 到 L2 的 myappend1 是列表 [X 后跟 L3]。” 然而，这种阅读的后果与你所描述的完全一样。

因此，您对第一个版本中发生的事情的理解是正确的。

第二种解决方案在机械上与第一种解决方案完全相同。唯一的区别是我们将统一从子句的头部移到了主体。在我看来，这个版本明显逊色，因为它所做的只是为读者创造了额外的工作。

到目前为止，我认为您遇到的问题是您的声明性推理与 Prolog 的计算引擎密切相关。像我提供的那些更纯粹的声明性阅读更简单，看起来更像 Prolog 所说的（并且与它的评估方式无关）。

你需要练习来区分这些概念，但我认为它会帮助你变得更好（显然这是你关心的事情）。与此同时，来这里寻求帮助并没有错，就像你在困惑时所做的那样。:)

让我知道我是否可以提供更多帮助！

# perl - DBIx::Class 和搜索

> ID：15507015
> 
> 赞同：1
> 
> 时间：2013-03-19T17:59:31.603
> 
> 标签：perl, catalyst, dbix-class

我正在尝试返回今天的生日。这就是我现在所拥有的，它有效，但我需要获取月份和日期才能输入到语句中。我想也许我可以从本地时间获取它们，但这并没有成功。任何建议，将不胜感激。

```
sub author_birth {
    my ($self) = @_;
    my ($day,$month) = (localtime())[3..4];
    my $author_result = $self->search_like(
        {
            birth => '%03-20'
        },
        {
            select => [
                'id',
                'complete_name',
            ],

            #result_class => 'DBIx::Class::ResultClass::HashRefInflator'
        }
    );

    my @author_ids = ();
    while (my $row = $author_result->next) {
        push @author_ids, $row->id;
    }

    return $self->get_author_info_by_id(\@author_ids);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:12:37.450

我最终做了这样的事情。

```
my ($self) = @_;
my $conc = '%';
my $datetime = Time::Piece->new->strftime('%m-%d');
my $date = $conc . $datetime;
my $author_result = $self->search_like(
    {
        birth => $date,
    },
    {
        select => [
            'id',
            'complete_name',
        ],

        #result_class => 'DBIx::Class::ResultClass::HashRefInflator'
    }
); 
```

# javafx-2 - 如果任务线程本身被阻塞，那么它怎么能从那里取消呢？（Java7、JavaFX2）

> ID：15507016
> 
> 赞同：2
> 
> 时间：2013-03-19T17:59:32.220
> 
> 标签：javafx-2, java-7

我有两个线程；任务线程，背景线程。

TaskThread 在“接收数据”信号量上阻塞。

```
synchronized (receiveSemaphore) {
    while (!dataIsReady) {
        try {
            receiveSemaphore.wait();
        } catch (InterruptedException e) {
        }
    }
    ...
} 
```

BackgroundThread 通知所有等待“接收数据”信号量的线程

```
receiveSemaphore.notifyAll(); 
```

不幸的是，在生活中，事情有时会出错，BackgroundThread 永远不会执行通知等待线程的语句。当用户厌倦了等待时，如何取消？

我的 JavaFX2 UI 上有一个“取消”按钮 - 但是接下来呢？在 JavaFX2 中，显示的唯一示例有一个线程在循环中运行并检查 isCancelled() 标志。

[http://docs.oracle.com/javafx/2/api/javafx/concurrent/Task.html](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Task.html)

同样，如果任务线程本身被阻塞，那么它怎么能从那里取消呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:23:16.037

按下取消按钮时，对任务调用取消。如果任务正在等待，这将中断任务，并且执行将流向 InterruptedException 块，您可以在其中检查中断原因是否是取消调用，如果是，则从任务的调用方法返回，有效地取消并结束任务.

您的示例实际上与[任务文档](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Task.html)中标题为“带有进度通知和阻塞调用的简单循环”的示例非常相似，但是您的示例更简单，因为不涉及循环，因此您只需要担心阻塞调用。

在幕后，当您在任务上调用取消时，会向线程发送[中断](http://docs.oracle.com/javase/tutorial/essential/concurrency/interrupt.html)以在`Task`线程上生成`InterruptedException`。

这是一些示例代码。

```
// Task cancel button logic.
cancelButton.setOnAction(new EventHandler<ActionEvent>() {
    @Override public void handle(ActionEvent t) {
        task.cancel();
    }
})
....
// Task call method logic
synchronized (receiveSemaphore) {
    while (!dataIsReady) {
        try {
            receiveSemaphore.wait();
        } catch (InterruptedException e) {
            if (isCancelled()) {
                return;
            }
        }
    }
    ...
} 
```

# java - Java：是否存在磁盘与内存一样快的情况？

> ID：15507017
> 
> 赞同：4
> 
> 时间：2013-03-19T17:59:38.413
> 
> 标签：java, io, bigdata

我正在编写一些代码来访问[倒排索引](http://en.wikipedia.org/wiki/Inverted_index)。我有两个可互换的类，它们对索引执行读取。一个从磁盘读取索引，缓冲其中的一部分。另一个将索引完全加载到内存中，作为 byte[][]（索引大小约为 7Gb）并从这个多维数组中读取。人们期望在将整个数据保存在内存中的同时具有更好的性能。但我的测量表明，使用磁盘上的索引与在内存中使用索引一样快。（在内存中加载索引所花费的时间不计入性能）

为什么会这样？有任何想法吗？

**更多信息**：我已经运行了启用 HPROF 的代码。无论是“在磁盘上”还是“在内存中”工作，最常用的代码并不是与读取直接相关的代码。此外，就我的（有限）理解而言，gc 分析器没有显示任何与 gc 相关的问题。

**更新#1**：我已经检测了我的代码来监控 I/O 时间。似乎大多数内存寻道需要 0-2000ns，而大多数磁盘寻道需要 1000-3000ns。第二个指标对我来说似乎有点太低了。是由于Linux的磁盘缓存吗？有没有办法排除磁盘缓存以进行基准测试？

**更新#2**：我已经绘制了对索引的每个请求的响应时间。内存线和磁盘线几乎完全匹配。我已经使用 O_DIRECT 标志进行了一些其他测试来打开文件（感谢 JNA！），在这种情况下，代码的磁盘版本（显然）比内存慢。所以，我的结论是“问题”是因为激进的 Linux 磁盘缓存，这非常了不起。

**更新#3**：[http ://www.nicecode.eu/java-streams-for-direct-io/](http://www.nicecode.eu/java-streams-for-direct-io/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T18:02:16.677

三种可能性在我脑海中浮现：

*   操作系统已经通过其文件系统缓存将所有索引文件保存在内存中。（请注意，我仍然希望有开销。）
*   索引不是您正在测试的代码的瓶颈。
*   您的基准测试方法不太正确。（很难做好基准测试。）

对我来说，中间选项似乎最有可能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T18:02:12.420

不，磁盘永远不会像 RAM 一样快（RAM 实际上比磁盘快 100,000 倍）。操作系统很可能正在为您将文件映射到内存中。

# c# - C# XNA SpriteBatch 为空？

> ID：15507028
> 
> 赞同：0
> 
> 时间：2013-03-19T18:00:01.577
> 
> 标签：c#, c#-4.0, xna, xna-4.0, spritebatch

嘿伙计们，我真的需要一些帮助，我的 spriteBatch 不断返回 NullReference 异常，我不知道我做错了什么！？（我正在制作一个破砖游戏），每当在 Game1.cs 中创建我的砖块时，它都可以正常工作，但是当我将它移动到 Wall.cs（我想在其中显示砖块图案的地方）时，游戏就会崩溃并给出一个空引用异常。这是我的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;

namespace BrickBreaker
{
    /// <summary>
    /// This is the main type for your game
    /// </summary>
    public class Game1 : Microsoft.Xna.Framework.Game
    {
        GraphicsDeviceManager graphics;
        SpriteBatch spriteBatch;
        private Paddle paddle;
        private Ball ball;
        private Texture2D background;
        private static int screenWidth = 750;
        private static int screenHeight = 600;
        private int leftBorder = 20;
        private int rightBorder = 28;
        private int topBorder = 20;
        private readonly int normalBrickResist = 2;
        private readonly int normalBrickPoints = 10;
        private Wall wall;

        //DELETE this shit
        private Brick brick;

        /// <summary>
        /// Contructor for the Game1 class.
        /// </summary>
        public Game1()
        {
            graphics = new GraphicsDeviceManager(this);
            Content.RootDirectory = "Content";
        }

        /// <summary>
        /// Read only property for the screen height.
        /// </summary>
        public static int ScreenHeight
        {
            get { return screenHeight; }
        }

        /// <summary>
        /// Read only property for the screen width.
        /// </summary>
        public static int ScreenWidth
        {
            get { return screenWidth; }
        }

        /// <summary>
        /// Allows the game to perform any initialization it needs to before starting to run.
        /// This is where it can query for any required services and load any non-graphic
        /// related content.  Calling base.Initialize() will enumerate through any components
        /// and initialize them as well.
        /// </summary>
        protected override void Initialize()
        {
            graphics.PreferredBackBufferHeight = screenHeight;
            graphics.PreferredBackBufferWidth = screenWidth;
            graphics.ApplyChanges();

            paddle = new Paddle(this);
            Components.Add(paddle);

            wall = new Wall(this);
            Components.Add(wall);

            ball = new Ball(this, paddle, leftBorder, rightBorder, topBorder, brick);
            Components.Add(ball);

            base.Initialize();
        }

        /// <summary>
        /// LoadContent will be called once per game and is the place to load
        /// all of your content.
        /// </summary>
        protected override void LoadContent()
        {
            spriteBatch = new SpriteBatch(GraphicsDevice);

            background = Content.Load<Texture2D>("background");
        }

        /// <summary>
        /// UnloadContent will be called once per game and is the place to unload
        /// all content.
        /// </summary>
        protected override void UnloadContent()
        {
            // TODO: Unload any non ContentManager content here
        }

        /// <summary>
        /// Allows the game to run logic such as updating the world,
        /// checking for collisions, gathering input, and playing audio.
        /// </summary>
        /// <param name="gameTime">Provides a snapshot of timing values.</param>
        protected override void Update(GameTime gameTime)
        {
            // Allows the game to exit
            if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
                this.Exit();

            base.Update(gameTime);
        }

        /// <summary>
        /// This is called when the game should draw itself.
        /// </summary>
        /// <param name="gameTime">Provides a snapshot of timing values.</param>
        protected override void Draw(GameTime gameTime)
        {
            GraphicsDevice.Clear(Color.CornflowerBlue);

            spriteBatch.Begin();
            Vector2 position = new Vector2(0, 0);
            spriteBatch.Draw(background, position, Color.White);
            spriteBatch.End();

            base.Draw(gameTime);
        }

        public void RemoveComponent(IGameComponent obj)
        {
            this.Components.Remove(obj);
        }
    }
} 
```

* * *

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;

namespace BrickBreaker
{

    /// <summary>
    /// This is a game component that implements IUpdateable.
    /// </summary>
    public class Wall : Microsoft.Xna.Framework.DrawableGameComponent
    {
        private Brick brick;
        private Brick[,] brickLayout = new Brick[5, 8];
        private Game game;
        SpriteBatch spriteBatch;
        private Texture2D brickImg;

        public Wall(Game game)
            : base(game)
        {
            this.game = game;
        }

        /// <summary>
        /// Allows the game component to update itself.
        /// </summary>
        /// <param name="gameTime">Provides a snapshot of timing values.</param>
        public override void Draw(GameTime gameTime)
        {
            foreach (var item in brickLayout)
            {
                if (item != null)
                {
                    item.Draw(gameTime);
                }

            }

            base.Draw(gameTime);
        }

        /// <summary>
        /// Allows the game component to update itself.
        /// </summary>
        /// <param name="gameTime">Provides a snapshot of timing values.</param>
        public override void Update(GameTime gameTime)
        {
            foreach (Brick item in brickLayout)
            {
                item.Update(gameTime);
            }

            base.Update(gameTime);
        }

        /// <summary>
        /// Allows the game component to perform any initialization it needs to before starting
        /// to run.  This is where it can query for any required services and load content.
        /// </summary>
        public override void Initialize()
        {
            // TODO: Add your initialization code here
            foreach (var item in brickLayout)
            {
                if (item != null)
                {
                    item.Initialize();
                }
            }
            base.Initialize();
        }

        protected override void LoadContent()
        {

            int x = 0;
            int y = 0;
            Vector2 startPosition;
            for (int i = 0; i < brickLayout.GetLength(0); i++)
            {
                for (int j = 0; j < brickLayout.GetLength(1); j++)
                {
                    startPosition = new Vector2(x, y);
                    brickLayout[i, j] = new Brick(game, 20, 1, startPosition);
                    x += 20;
                }
                y += 20;
            }

            base.LoadContent();
        }
    }
} 
```

* * *

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;

namespace BrickBreaker
{
    /// <summary>
    /// This is a game component that implements IUpdateable.
    /// </summary>
    public class Brick : Microsoft.Xna.Framework.DrawableGameComponent
    {
        enum brickType
        {
            Regular1,
            Regular2,
            Regular3,
            Regular4,
            Regular5,
            PowerUp,
            Unbreakable
        }

        private Texture2D brick;
        private SpriteBatch spriteBatch;
        private Game game;
        private int brickValue;
        private Vector2 startPosition, position;
        private Rectangle collisionBox;
        private int brickWidth;
        private bool isBroken = false;
        private int resistance;

        public Brick(Game game, int brickValue, int resistance, Vector2 startPosition)
            : base(game)
        {
            this.brickValue = brickValue;
            this.game = game;
            this.resistance = resistance;
            this.startPosition = startPosition;
        }

        public Boolean IsBroken
        {
            get
            {
                return this.isBroken;
            }
            set
            {
                this.isBroken = value;
            }
        }

        /// <summary>
        /// Property for the paddle collision box.
        /// </summary>
        public Rectangle CollisionBox
        {
            get { return collisionBox; }
        }

        /// <summary>
        /// Read only property for the paddle width.
        /// </summary>
        public int BrickWidth
        {
            get { return brickWidth; }
        }

        /// <summary>
        /// Allows the game component to perform any initialization it needs to before starting
        /// to run.  This is where it can query for any required services and load content.
        /// </summary>
        public override void Initialize()
        {
            // TODO: Add your initialization code here

            base.Initialize();
        }

        /// <summary>
        /// Allows the game component to update itself.
        /// </summary>
        /// <param name="gameTime">Provides a snapshot of timing values.</param>
        public override void Update(GameTime gameTime)
        {
            // TODO: Add your update code here

            base.Update(gameTime);
        }

        /// <summary>
        /// Allows the game component to update itself.
        /// </summary>
        /// <param name="gameTime">Provides a snapshot of timing values.</param>
        public override void Draw(GameTime gameTime)
        {

            if (isBroken == false)
            {
                spriteBatch.Begin();
                spriteBatch.Draw(brick, this.position, Color.White);
                spriteBatch.End();
            }

            base.Draw(gameTime);
        }

        /// <summary>
        /// Comment
        /// </summary>
        protected override void LoadContent()
        {
            spriteBatch = new SpriteBatch(GraphicsDevice);
            brick = game.Content.Load<Texture2D>("brick");

            collisionBox = new Rectangle(0, 0, brick.Width, brick.Height);

            position = startPosition;
            collisionBox.X = (int)position.X;
            collisionBox.Y = (int)position.Y;

            base.LoadContent();
        }

        public void TakeHit()
        {
            resistance--;

            if (resistance == 0)
                IsBroken = true;

        }

    }
} 
```

* * *

编辑：通过在 wall.cs 中添加这个来修复旧问题

```
 for (int i = 0; i < brickLayout.GetLength(0); i++)
    {
        for (int j = 0; j < brickLayout.GetLength(1); j++)
        {
            startPosition = new Vector2(x, y);
            brickLayout[i, j] = new Brick(game, 20, 1, startPosition);
            //Added this line:
            brickLayout[i, j].Initialize();
            x += 45;
        }
        x = 150;
        y += 25;
    } 
```

但是现在碰撞箱根本不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:06:40.413

仔细看看你的积木课。在您的墙类中，您没有初始化`spriteBatch`，也没有调用`Begin`和`End`

你的`LoadContent`方法需要这个：

```
spriteBatch = new SpriteBatch(GraphicsDevice); 
```

你需要确保调用这是你的`Draw`方法：

```
spriteBatch.Begin(); 
```

和

```
spriteBatch.End(); 
```

编辑：您永远不会在您的砖类上调用 LoadContent，这就是 spriteBatch 永远不会被初始化的原因。尝试：

```
 protected override void LoadContent()
    {

        int x = 0;
        int y = 0;
        Vector2 startPosition;
        for (int i = 0; i < brickLayout.GetLength(0); i++)
        {
            for (int j = 0; j < brickLayout.GetLength(1); j++)
            {
                startPosition = new Vector2(x, y);
                brickLayout[i, j] = new Brick(game, 20, 1, startPosition);
                // This new line...
                brickLayout[i, j].LoadContent();
                x += 20;
            }
            y += 20;
        }

        base.LoadContent();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:08:19.460

它在 Draw 方法的 SpriteBatch.Begin() 行的 Brick 类中给出 NullReferenceException。

# javascript - 如何从文本文件中复制一行并将其粘贴到基于字符串的新文本文件中？

> ID：15507029
> 
> 赞同：-1
> 
> 时间：2013-03-19T18:00:02.030
> 
> 标签：javascript, actionscript-3, shell, powershell

我有这些长日志文件，我需要在其中搜索特定字符串，然后如果该行包含该字符串，则复制该行并将其粘贴到新文档中。我有多个日志需要运行并弄清楚，所以任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:07:56.240

尝试这个。

```
Get-ChildItem | Foreach{Get-Content -Path $_.fullname} |Select-String "Pattern"|Out-file -FilePath C:\Temp\NewFile.log -Append -NoClobber 
```

将“模式”替换为您要查找的文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T18:03:10.347

假设所有日志文件都在当前目录中，这样的事情可能会奏效：

```
grep 'a specific string' *.log >> log_summary.txt 
```

这会将所有日志文件中的所有匹配行附加到 log_summary.txt 中。从那里您可以将它们复制到其他地方或对它们做任何您需要的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T18:02:03.923

这很容易，`grep`但你可能在 Windows 上？

`grep <string> <input file> >> <output file>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T18:05:58.093

您没有指定语言，但由于 powershell 是您的标签之一，请查看 Select-String CmdLet

[http://technet.microsoft.com/en-us/library/ff730968.aspx](http://technet.microsoft.com/en-us/library/ff730968.aspx)

# awk - 使用一个 awk 命令在匹配的字符串中搜索字符串

> ID：15507030
> 
> 赞同：3
> 
> 时间：2013-03-19T18:00:05.590
> 
> 标签：awk

我想使用 awk 在匹配的字符串中搜索字符串。但是我发现的 awk[指南](http://en.wikibooks.org/wiki/An_Awk_Primer/Search_Patterns_%281%29)和[示例只使用了一个匹配项，或者](http://www.unix.com/shell-programming-scripting/158891-awk-multiple-line-search-replace-one-liner.html)[听起来很有希望的 SO 问题](https://stackoverflow.com/questions/11570253/nested-awk-commands)的答案非常[具体](https://stackoverflow.com/questions/10206418/how-to-use-awk-to-search-for-a-complete-match-of-text-within-one-column-of-a-csv)，以至于我无法轻易地从中得出一般原则来解决我的问题。

例如，我想从`cat /proc/bus/input/devices`带有如下文本的命令中获取“Thinkpad Extra Buttons”设备的事件处理程序编号：

```
I: Bus=0011 Vendor=0001 Product=0001 Version=ab54
N: Name="AT Translated Set 2 keyboard"
H: Handlers=sysrq kbd event3 
B: KEY=402000000 3803078f800d001 feffffdfffefffff fffffffffffffffe

I: Bus=0019 Vendor=17aa Product=5054 Version=4101
N: Name="ThinkPad Extra Buttons"
P: Phys=thinkpad_acpi/input0
H: Handlers=rfkill kbd event7 
B: KEY=18040000 0 10000000000000 0 101501b00102004 8000000001104000 e000000000000 0

I: Bus=0003 Vendor=04f2 Product=b2ea Version=0518
N: Name="Integrated Camera"
P: Phys=usb-0000:00:1a.0-1.6/button 
```

产生看起来像的输出

```
H: Handlers=rfkill kbd event7 
```

使用[记录范围模式](http://www.chemie.fu-berlin.de/chemnet/use/info/gawk/gawk_9.html#SEC92)，我可以只提取“Thinkpad Extra Buttons”块，然后尝试添加另一个搜索模式，如下所示：

```
cat /proc/bus/input/devices | awk '/Think/,/event/ {print}; /event/ {print $2} 
```

我得到了所有不相关的 Handlers 行，而不仅仅是“Thinkpad Extra Buttons”的行

```
Handlers=event0
Handlers=kbd
Handlers=kbd
Handlers=sysrq
N: Name="ThinkPad Extra Buttons"
P: Phys=thinkpad_acpi/input0
S: Sysfs=/devices/platform/thinkpad_acpi/input/input7
U: Uniq=
H: Handlers=rfkill kbd event7 
Handlers=rfkill
Handlers=kbd
Handlers=event9
Handlers=event10 
```

我意识到我可以将该范围模式的结果通过管道传输到单独的 awk 命令中并在 H: Handlers 行上进行搜索。但是，当我想查找多个 Thinkpad 命名设备时，这不起作用，但实际上 awk 似乎应该能够做这种事情，但它让我感到困扰，我还没有弄清楚。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T20:57:13.057

这种问题很适合逐段处理，而不是逐行处理。使用 GNU awk：

```
gawk -v RS='' '
    /N:.*ThinkPad Extra Buttons/ {
        match($0, /(H:.*event[0-9]+)/, a)
        print a[0]
        exit
    }
' /proc/bus/input/devices 
```

如果您愿意超越 awk：

```
perl -00 -lne 'if (/^N: Name=.ThinkPad Extra Buttons/m) {print /^(H:.*)$/m; exit}' /proc/bus/input/devices 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T18:41:47.660

这是一个可能对您有用的快速解决方案：

```
awk '
/^N: Name="ThinkPad Extra Buttons"$/ { found = 1; }
/^H: Handlers=/ { handlers = $0; }
$0 == "" { endRecord(); }
END { endRecord(); }
function endRecord() {
    if (found) {
        print handlers;
        found = 0;
    }
}
' file.txt 
```

这是做什么的：

*   准确地查找“ThinkPad”行，用它来标记您正在查看您关心的记录。

*   注意所有“H”处理程序行的内容。

*   在每个“记录”的末尾打印出处理程序行，其中每个“记录”由空行分隔。（注意：这不是 Awk 记录；就 Awk 而言，每一行都是一条记录。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T17:09:57.387

上述两个答案都有效，但它一直在咬我，应该有一个超短的方法来做到这一点。

这就是我想出的：

```
awk '/Think/,/event/ {if(/event/) {print $4}}' /proc/bus/input/devices 
```

这背后的原理是它在一个范围内匹配，然后在第一组花括号内，我可以对那些捕获的行进行逐行处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-20T08:54:10.347

这可以像下面这样实现.... 1) 假设我有以下排序的输出，我需要使用 awk 对其进行处理。

```
$ grep mouse /proc/bus/input/devices
N: Name="Macintosh mouse button emulation"
H: Handlers=mouse0 event1
H: Handlers=mouse1 event3

   $ awk '/Macintosh /,/event/ {if(/event/) {print $2,$3}}' /proc/bus/input/devices
    Handlers=mouse0 event1 
```

下面对我不起作用...

```
$ awk '/Macintosh /,/event/ {if(/event/) {print $4}}' /proc/bus/input/devices 
```

# algorithm - 是否可以从 Excel 中的多行获取平均值？

> ID：15507039
> 
> 赞同：0
> 
> 时间：2013-03-19T18:00:36.990
> 
> 标签：algorithm, excel, math

如何在excel中产生多个数据的平均值？

如果我有以下内容：

![在此处输入图像描述](../Images/59cceb3606d099c732ebd82841cf8c54.png)

如果不对“AvgBest”和“AvgMean”下的每个区域进行编程，我将如何计算表格每一行的平均值？如果它变得更容易，我很乐意在单独的电子表格中计算最佳值和平均值，因为它们可以在之后重新组合在一起。

我正在尝试生成所有样本数据的平均值。

这在 Excel 中可行吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T18:16:45.600

要计算简单的平均值，您可以执行以下操作。对于平均最佳：

```
 =AVERAGE(A2,D2,G2,J2) 
```

在单元格 M2 中，然后复制到数据的末尾。

对于平均平均值：

```
 =AVERAGE(B2,E2,H2,K2) 
```

在单元格 N2 中，然后复制到数据的末尾。

# c++ - 地图不对比较器c ++进行排序

> ID：15507040
> 
> 赞同：3
> 
> 时间：2013-03-19T18:00:38.273
> 
> 标签：c++, mingw

我正在尝试解决一个问题，即我将字符插入到 type 的地图中`<char, int>`。如果 char 已经存在于地图中，我会将 int 增加 1。我创建了自己的比较器，用于对地图中的元素进行优先级排序。优先级不能以我希望的方式起作用，因为最终输出不遵循顺序。

```
#include <iostream>
#include <string>
#include <map>
#include <iterator>

using namespace std;

struct classcomp {
  bool operator()(const int& a, const int& b) const {
        return a < b;
    }
};

bool isPresent(map<char,int,classcomp> mymap, char c){
    return (mymap.find('b') != mymap.end());
}

int main(){
    string input="dadbadddddddcabca";
    map<char,int,classcomp> mymap;
    char temp;

    for(string::iterator it = input.begin(); it!=input.end(); ++it){
        temp = *it;
        if(!isPresent(mymap, temp))
            mymap.insert(pair<char,int>(*it,1));
        else
            mymap[temp]++;
    }

    for (auto& x: mymap) {
        cout << x.first << ": " << x.second << '\n';
    }

    return 0;
} 
```

给出以下输出：

```
a: 4
b: 2
c: 2
d: 8 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:04:03.347

比较器用于排序`char`s 而不是`int`s。

它正在对键进行排序，并且似乎工作得很好 - `a b c d`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T18:21:11.647

std::map 被设计为按键排序，并且为值类型提供比较器不会改变任何内容。想象一下`std::map<char,char>`，您认为如何提供价值比较器（如果可能的话）？
所以解决方案是使用允许按多个键排序的容器，如 boost::multi_index 或只是创建另一个映射 - 反转：

```
#include <iostream>
#include <string>
#include <map>
#include <iterator>

using namespace std;

int main(){
    string input="dadbadddddddcabca";
    map<char,int> mymap;

    for(string::iterator it = input.begin(); it!=input.end(); ++it){
        mymap[*it]++;
    }
    map<int,char> reversemap;
    for (auto& x: mymap) {
        reversemap.insert( make_pair( x.second, x.first ) );
    }

    for (auto& x: reversemap ) {
        cout << x.first << ": " << x.second << '\n';
    }

    return 0;
} 
```

请注意，您对元素存在的预检查是完全多余的，如果它不存在，std::map operator[] 会创建新元素并对其进行初始化。您可能会注意到，在输出中您现在缺少一些值（尽管它们已排序），如果这不是您需要的，请将 reversemap 类型从 map 更改为 multimap，这允许键重复。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T18:03:03.420

`map`按键而不是值对其条目进行排序。`char`钥匙被默默地投射到`int`你的`classcomp::operator()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T18:05:29.640

为什么

```
mymap.find('b') != mymap.end()); 
```

并不是

```
mymap.find(c) != mymap.end()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T18:21:39.577

也许这就是你想要的

```
int main() {
    std::string input="dadbadddddddcabca";
    typedef std::map< char, int > map_t;
    map_t mymap;
    char temp;

    for ( std::string::const_iterator it = input.begin(), e = input.end(); it != e; ++it ) {
        temp = *it;
        mymap[ temp ] = mymap[ temp ] + 1; // Hopufuly operator[] inserts zero initialized value, if can't find a key
    }
    typedef std::pair< typename map_t::key_type, typename map_t::mapped_type > pair_t;
    std::vector< pair_t > sortedByValue;
    sortedByValue.assign( mymap.begin(), mymap.end() );
    std::sort( sortedByValue.begin(), sortedByValue.end(), []( const pair_t & left, const pair_t & right ) {
        return left.second < right.second;
        // change to
        // return left.second > right.second;
        // for descend order
    } );

    for ( const auto & x: sortedByValue ) {
        std::cout << x.first << ": " << x.second << std::endl;
    }    
} 
```

[LWS链接](http://liveworkspace.org/code/WizwG%245)

# ios - NS_ENUM, NS_OPTIONS, NSArray[dereferencing] 不工作 XCode 4.6

> ID：15507043
> 
> 赞同：0
> 
> 时间：2013-03-19T18:00:45.233
> 
> 标签：ios, xcode, xcode4.6

我正在尝试使用 XCode 4.6 编译[PSTCollectionView](https://github.com/steipete/PSTCollectionView)库，但由于某种原因，我遇到了大量编译器错误。它们都以Objective-C 的新特性为中心。

几个例子：

![NS_ENUM 未定义](../Images/01743763dce6f32593ee280dc7641e57.png)

![NSArray 取消引用不起作用](../Images/0b37c7b7567207fd25ed3edfafe81736.png)

*但是，定义*了新的数组/字典/NSNumber 宏：

![NSArray 创建宏定义](../Images/2dbafedb2f9ce77fcdf5a3224acf3f4f.png)

我正在使用 Apple LLVM 编译器

![编译器](../Images/b1ebb6ecb684a10675ceca01fd8b6ed2.png)

我对此有点难过……有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T23:18:15.173

这显然是使用错误的 SDK 引起的问题。我使用的是 iOS 5.1 SDK，它不允许使用 Apple 添加的这些方便的新快捷方式。当我更改为 iOS 6.1 SDK 时，它不再抱怨这种用法。

[Apple 在本文](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/ObjCAvailabilityIndex/index.html)中让您知道。

# java - jhat 抛出无法识别的幻数

> ID：15507047
> 
> 赞同：5
> 
> 时间：2013-03-19T18:00:49.623
> 
> 标签：java, jmap, jhat

我正在尝试分析从遇到内存问题的 java 进程中提取的堆转储。转储是使用 jmap 进行的。我在转储文件上使用 jhat - 我得到

`java.io.IOException: Unrecognized magic number: 169897589 at com.sun.tools.hat.internal.parser.Reader.readFile(Reader.java:94) at com.sun.tools.hat.Main.main(Main.java:159)`

jdk 1.6 和 1.7 都给出相同的错误。我在我的 Windows 机器上本地运行 jhat（在复制转储文件之后）并且转储文件是在 Linux 服务器上获取的。

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T18:44:18.933

如果您查看[com.sun.tools.hat.internal.parser.Reader](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/com/sun/tools/hat/internal/parser/Reader.java)的源代码，您会发现它正在寻找幻数[0x4a415641](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/com/sun/tools/hat/internal/parser/HprofReader.java#HprofReader.0MAGIC_NUMBER)。

此值用于帮助识别有效的堆转储文件。`jmap`应该将此值附加为它创建的任何堆转储文件的前四个字节。

我建议在十六进制编辑器中打开您的堆转储并检查前四个字节是否为`0x4a415641`. 在您的 Linux 和 Windows 机器上检查该文件。传输文件时，文件可能已损坏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-20T15:04:27.750

可能，您生成 jvm 转储文件的方法错误。使用 jmap -histo {pid} > dump.log 时发生错误。

尝试

```
   jmap -dump:live;file=文件名 pid

```

祝你好运。

# svn - Netbeans 删除损坏的 svn 项目条目

> ID：15507051
> 
> 赞同：0
> 
> 时间：2013-03-19T18:01:04.587
> 
> 标签：svn, netbeans

我有 2 个项目用于链接到我不再使用的 svn 服务器。在 Netbeans 中创建项目后，Netbeans 在项目中找到了 .svn 文件夹，并假设它仍然链接到 SVN 服务器。

然后我从 netbeans 中删除了项目（但保留了源代码），关闭了 Netbeans 并转到项目文件夹并删除了项目文件夹中的所有 .svn 文件夹和其他配置文件。

我回到 Netbeans 并重新创建了项目。这次似乎 Netbeans 认为它​​没有链接到 SVN 服务器，但是当我转到 Team > Subversion > Import into repository 时，什么也没有发生。没有对话框或错误消息或任何东西，只是没有任何反应。

如果我将源文件复制到另一个文件夹（或重命名项目文件夹），我就可以完美地导入存储库，但这意味着我必须以不同的方式命名项目文件夹，这是一种解决方法，但不是解决方案。

我假设 Netbeans 用来“记住”哪些项目（或文件夹）链接到 Subversion 的某些配置文件中有一个条目，如果我可以编辑它并删除该条目，我想它会起作用。

有没有人遇到类似的问题或知道我可以在哪里或如何纠正这个问题？

**附加信息：**

我还可以确认，如果我将同一个项目复制到一个新文件夹中（比如第一个项目名为 projectname.com，我复制同一个文件夹及其内容并将其命名为 projectsname2.com）我能够导入到存储库中。它肯定与链接的原始 projectname.com 文件夹名称或提供损坏的 svn 配置有关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T20:10:19.240

我还没有看到这个特殊问题，但解决 NetBeans 中许多 SVN 问题的旧解决方案是删除与 Subversion 相关的缓存。

这是一个名称和位置最近更改的文件夹：

*   在 7.2 之前的 Netbeans 中，它是一个文件夹`svn`，完整路径：`%HOME%\.netbeans\7.x\var\cache\svn`

*   在 Netbeans 7.2+ 中，它是一个`svncache`具有完整路径的文件夹：`%HOME%\AppData\Local\NetBeans\Cache\7.x\svncache`

*   有关其他系统中的位置，请参阅[userdir/cachedir 上的 Netbeans wiki 条目](http://wiki.netbeans.org/FaqWhatIsUserdir)

删除缓存文件夹（请注意，当 NetBeans 关闭时）会强制 NetBeans 从工作副本中重新读取 SVN 信息。因此，Subversion 操作在下一次被调用时可能会多花几秒钟。

链接的 wiki 页面指出：

> NetBeans cachedir 是一个目录，其中包含可能会变大、可能经常更改并且可以随时删除和重新创建的文件。

# typo3 - TYPO3 fe_user：可以同时以两个不同的用户身份登录吗？

> ID：15507056
> 
> 赞同：0
> 
> 时间：2013-03-19T18:01:21.310
> 
> 标签：typo3

我们的一位客户希望使用一个浏览器同时以两个不同用户的身份进行 FE 登录。我认为这只有在使用两个不同的浏览器时才有可能。有什么解决方法吗？

背景是这样的：我们编写了一个 FE 扩展，用户可以在其中登录并更新他们的一些数据。一个客户端是一种超级用户/管理员。他想同时比较和编辑多个用户的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:55:01.067

TYPO3 中的身份验证由 cookie **fe_typo_user**执行，因此*不可能*有两个用户同时从同一个浏览器登录。

您可能会建议为您的客户端使用不同的浏览器或虚拟机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T22:15:57.400

正如**维克托**所写的那样——这是不可能的。在这里我应该完成答案。

无论如何...当您创建自己的插件时，您可以轻松添加“模拟模式”，使用示例自定义 cookie...块模式是：

```
[IF isAdmin AND simulateMode == false] {
    Display admin's version
} [ELSE] {
    Display common user's version
} 
```

您可以走得更远并切换管理员以模拟某些选择的“普通”用户，无论如何确保不会违反某些隐私政策。

# php - 如何操作这个数组

> ID：15507057
> 
> 赞同：-2
> 
> 时间：2013-03-19T18:01:22.323
> 
> 标签：php, arrays

我想弄清楚如何操作这个数组。这是我的例子：

```
$color = "red,yellow,green,black";
$stock = "10,20,30,40"; 
```

如果用户选择黄色且数量为 5，则黄色商品的库存变为 15。

我的问题是，如何更改黄色的库存商品变成这样：

```
$color = "red,yellow,green,black";
$stock = "10,15,30,40"; 
```

我的想法是，我得到一个颜色为黄色的数组位置，它将返回 1。并更新数组位置为 1 的库存。但我不知道该怎么做。任何人都可以给我一个建议或解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:04:54.660

这些不是数组，而是字符串。您应该首先熟悉[数组](http://php.net/manual/en/language.types.array.php)。

您可以使用 将字符串转换为数组[`explode`](http://www.php.net/manual/en/function.explode.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T18:05:19.230

这是一个示例，您可以对其进行修改以适合您。这假设您的字符串将转换为相同大小的数组并且顺序正确

```
// transform $color to array using comma as delimiter and return key position for yellow
$position = array_search('yellow', explode(',', $color));
// transform $stock to array
$stock = explode(',', $stock);
// change value at the same position
$stock[$position] = 15;
// put it back into string
$stock = implode(',', $stock);
echo $stock; 
```

您还可以使用键 -> 值对将数据存储在单个数组中，在这种情况下，操作它是微不足道的。

# javascript - 将 Safari javascript 控制台保存到文件？

> ID：15507059
> 
> 赞同：12
> 
> 时间：2013-03-19T18:01:25.087
> 
> 标签：javascript, safari

是否可以将 Safari Web Inspector 中的 javascript 控制台保存到文件中？我找不到任何方法，选择全部的唯一方法是用光标拖动（当我有很长的连续日志输出流时非常困难）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T22:45:37.880

我想通了一些事情：

按住 SHIFT 的同时，选择所需部分的开头。然后释放 SHIFT 并使用滚动条向下滚动。

在选择的末尾再次按住 Shift 并单击。然后您可以根据需要复制/粘贴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-04-19T19:30:03.837

单击控制台内部，`⌘</kbd>`s`. There is no step 3.`

请注意，这会将输出保存为纯文本，因此没有着色、突出显示的字段等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-22T16:16:55.447

在开发人员工具中单击控制台选项卡右侧的齿轮图标然后取消选中“将行换行到编辑器宽度”后，我可以使用全选上下文菜单选中此选项后，我只能复制第一行，未选中我可以全选并复制/粘贴成一个文本文件。

# clojure - 如何让 Korma 输出它要执行的 SQL？

> ID：15507062
> 
> 赞同：10
> 
> 时间：2013-03-19T18:01:34.157
> 
> 标签：clojure, korma

我试图让 Korma 输出它将执行的 SQL，这样我就可以调试我遇到的问题，但是文档非常简洁地介绍了如何使用 as-sql 函数。谁能给我一个如何让 Korma 为 INSERT 查询输出 SQL 的示例？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-19T19:44:29.340

来自：[http ://sqlkorma.com/api/0.3.0/korma.core.html](http://sqlkorma.com/api/0.3.0/korma.core.html)

```
dry-run
(dry-run & body)
Wrap around a set of queries to print to the console all SQL that would 
be run and return dummy values instead of executing them. 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-01T15:30:17.067

如果要将 SQL 查询作为字符串获取，还有`sql-only`

```
(println     
    (sql-only
        (select users))) 
```

# spring-mvc - 在spring mvc @ResponseBody中返回文字JSON字符串

> ID：15507064
> 
> 赞同：38
> 
> 时间：2013-03-19T18:01:39.573
> 
> 标签：spring-mvc, jackson

我将对象作为 JSON 字符串存储在我的数据库中。我想制作一个公开这些字符串的 REST 服务。然而，当我编写我的方法时，我得到的字符串的引号被转义了。例如，我包含了一个返回字符串的方法，

```
@RequestMapping(value = "test", method = RequestMethod.GET)
public @ResponseBody
String getTest() {
    return "{\"a\":1, \"b\":\"foo\"}";
} 
```

但是当我在浏览器中调用此方法时，当我真正想要发生的是 {"a":1 , "b": "foo"}。我认为“字符串”作为返回类型可能是问题所在，但我还能做什么？包装类做同样的事情：

```
{
  "value" : "{\"a\":1, \"b\":\"foo\"}"
} 
```

我可以序列化它然后返回对象，但这似乎有点荒谬。这可能是我的配置文件的相关部分：

```
@Override
public void configureMessageConverters(List<HttpMessageConverter<?>> converters) {
    super.configureMessageConverters(converters);
    converters.add(mappingJacksonHttpMessageConverter());
}

@Bean
MappingJacksonHttpMessageConverter mappingJacksonHttpMessageConverter() {
    MappingJacksonHttpMessageConverter mappingJacksonHttpMessageConverter = new MappingJacksonHttpMessageConverter();
    ObjectMapper objectMapper = new ObjectMapper();
    objectMapper.setSerializationInclusion(JsonSerialize.Inclusion.NON_NULL);
    mappingJacksonHttpMessageConverter.setObjectMapper(objectMapper);
    mappingJacksonHttpMessageConverter.setPrettyPrint(true);
    return mappingJacksonHttpMessageConverter;
} 
```

谢谢

编辑：正如下面所建议的，字符串似乎被双重编码。注释掉我的配置中的 2 个类可以解决这个问题。但是，我仍然有其他地方想要返回对象，并希望让那些通过我知道在哪里配置的通用序列化 bean 运行。所以我认为我的选择是：a）自己做所有的序列化。所有的方法都返回字符串，那些已经是 JSON 的返回自己，那些是对象的都返回 JSONUtil.toJson(object)。我不喜欢这种方法，但我知道它会起作用。b) 使用一个看起来像这样的包装类：

```
public static class Wrapper {

    @JsonRawValue
    private final String value;
} 
```

这导致前面有一个尴尬的“价值”，尽管这没有真正的意义。

基本上我想要的是@JsonRawValue，但是让它在 RequestMapping 方法而不是属性上工作。想法？意见？其他建议？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-04-16T18:22:30.927

这适用于杰克逊 2（至少）：

```
@Controller
public class YourController {

    @RequestMapping(..)
    public @ResponseBody Json get() {
        return new Json("{ \"attr\" : \"value\" }");
    }
}

class Json {

    private final String value;

    public Json(String value) {
        this.value = value;
    }

    @JsonValue
    @JsonRawValue
    public String value() {
        return value;
    }
} 
```

不是特别漂亮，但很有效。我只希望 Spring 支持这个：

```
@RequestMapping(..)
public @JsonRawValue @ResponseBody String get() {
    // ...
} 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-11-13T11:02:05.507

我猜您想要的是使用 content-type 生成响应`application/json`。在您的情况下，当您将 json-data 作为原始字符串时，请执行以下操作：

在您的控制器中添加`produces="application/json"`到您的`@RequestMapping`属性：

```
@RequestMapping(value = "test", method = RequestMethod.GET, produces="application/json")
public @ResponseBody
String getTest() {
    return "{\"a\":1, \"b\":\"foo\"}";
} 
```

然后你必须配置`StringHttpMessageConverter`接受 application/json 媒体类型。

使用 Java 配置：

```
@Override
public void configureMessageConverters(
        List<HttpMessageConverter<?>> converters) {
    StringHttpMessageConverter stringConverter = new StringHttpMessageConverter(
            Charset.forName("UTF-8"));
    stringConverter.setSupportedMediaTypes(Arrays.asList( //
            MediaType.TEXT_PLAIN, //
            MediaType.TEXT_HTML, //
            MediaType.APPLICATION_JSON));
    converters.add(stringConverter);
} 
```

使用 XML 配置：

```
<bean class = "org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
    <property name="messageConverters">
        <array>
            <bean class = "org.springframework.http.converter.StringHttpMessageConverter">
                <property name="supportedMediaTypes" value="application/json; charset=UTF-8" />
            </bean>
        </array>
    </property>
</bean> 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-07-17T20:46:49.000

我用这个：

```
@RequestMapping(..)
@ResponseBody
public JsonNode myGetRequest(){
...
//rawJsonString is the raw Json that we want to proxy back to the client
return objectMapper.readTree(rawJsonString);
} 
```

Jackson 转换器知道如何将 JsonNode 转换为普通的 Json。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-06-08T07:14:03.533

如果您想在浏览器中将 JSON 字符串转换为 JSON 对象，请将字符串转换器放在 Jackson 转换器之前。
按照此[链接](https://stackoverflow.com/questions/26289981/jackson-converter-and-javax-validation-annotation-not-working-together/37388093#37388093)获取完整示例。它适用于自定义转换器配置和弹簧验证。

## 有用

```
converters.add(stringConverter());
converters.add(mappingJackson2HttpMessageConverter());
super.configureMessageConverters(converters); 
```

## 它没有

```
converters.add(mappingJackson2HttpMessageConverter());
converters.add(stringConverter());
super.configureMessageConverters(converters); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-07-20T15:38:24.157

就我而言，我希望响应类型由请求参数确定，因此必须在代码中指定内容类型，例如：

```
@RequestMapping("/myurl")
public void radiusSearch(@RequestParam responseType, HttpServletResponse response) throws IOException {
    String jsonResponse = makeSomeJson();
    response.setContentType(responseType);
    try {
        response.getOutputStream().write(jsonResponse.getBytes());
    } finally {
        response.getOutputStream().close();
    }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-09-23T09:03:06.973

今天我们遇到了同样的问题，并用多个转换器解决了它。现在每个`String`将被视为一个字符串，并且每个其他`Object`都将被杰克逊序列化。这允许`String`在 Spring 控制器中手动（通过返回）或自动（通过返回其他内容）进行序列化。

```
@Override
public void configureMessageConverters(List<HttpMessageConverter<?>> converters) {
    converters.add(stringConverter());
    converters.add(mappingJackson2HttpMessageConverter());
    super.configureMessageConverters(converters);
}

@Bean
public StringHttpMessageConverter stringConverter() {
    final StringHttpMessageConverter stringConverter = new StringHttpMessageConverter(UTF_8);
    stringConverter.setSupportedMediaTypes(Arrays.asList(
            MediaType.TEXT_PLAIN,
            MediaType.TEXT_HTML,
            MediaType.APPLICATION_JSON));
    return stringConverter;
}

@Bean
public GenericHttpMessageConverter<Object> mappingJackson2HttpMessageConverter() {
    final ObjectMapper objectMapper = objectMapperBuilder().build();
    final MappingJackson2HttpMessageConverter converter = new MappingJackson2HttpMessageConverter(objectMapper);
    return converter;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-19T18:04:41.277

`\"`表示字符`"`正在被转义，这是标准的。如果它是这样打印的，那么您可能正在对对象进行双重序列化。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-05-14T19:26:43.550

我知道这是一个老问题，但我自己只是在处理相反的问题（我正在返回一个字符串并希望它转换为 JSON）。在您的情况下，听起来您只是想让您的 String 被视为纯字符串，而不是像您已经拥有 JSON 那样对其进行任何类型的 JSON 转换。

因此，在您的情况下，您不想使用`MappingJacksonHttpMessageConverter`（或者`MappingJackson2HttpMessageConverter`如果您现在正在使用 Jackson2）。您根本不希望进行任何转换，并且该转换器将 Java 对象转换为 JSON 或从 JSON 转换。因此，您应该只使用 plain `StringHttpMessageConverter`。您可以通过更改设置方法来做到这一点，如下所示：

```
@Override
public void configureMessageConverters(List<HttpMessageConverter<?>> converters) {
    converters.add(new StringHttpMessageConverter());
} 
```

该转换器适用于`*/*`类型（文档不正确`text/*`，我在调试器中发现了困难的方法）。因此，无论您的内容类型是否`application/json`，如果您使用此转换器，Spring 都不会弄乱您的字符串。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-01-10T21:46:30.733

您的问题的解决方案是，无需更改任何配置即可完美运行

```
import com.fasterxml.jackson.databind.JsonNode;
import com.github.fge.jackson.JsonLoader;

JsonNode getTest() {
    return JsonLoader.fromString("{\"a\":1, \"b\":\"foo\"}");
} 
```

# c# - 将 Json 对象输出转换为 Jquery 数组格式

> ID：15507066
> 
> 赞同：0
> 
> 时间：2013-03-19T18:01:42.220
> 
> 标签：c#, asp.net, .net, wcf

下面是我在客户端得到的 Json 输出：

```
jsonp1363710839478({"Comment":[{"Author":"Plan_A","CommentText":"AI like hay almost as much as I like sun. Just joking","Title":"AMaking hay when the sun shines"},{"Author":"Plan_B","CommentText":"I like hay almost as much as I like sun. Just joking","Title":"Making hay when the sun shines"}]}); 
```

如何将其转换为以下示例：

```
var sample= [
                       { Title: "The Red Violin", Author: "1998" },
                       { Title: "Eyes Wide Shut", Author: "1999" },
                      { Title: "The Inheritance", Author: "1976" }
                      ]; 
```

以下是我的完整代码：

后面的代码：

```
 [OperationContract]
    [WebGet(ResponseFormat = WebMessageFormat.Json)]
    public CommentList GetComments()
    {
        Comments oComment1 = new Comments();
        oComment1.Title = "AMaking hay when the sun shines";
        oComment1.Author = "Plan_A";
        oComment1.CommentText = "AI like hay almost as much as I like sun. Just joking";

        Comments oComment2 = new Comments();
        oComment2.Title = "Making hay when the sun shines";
        oComment2.Author = "Plan_B";
        oComment2.CommentText = "I like hay almost as much as I like sun. Just joking";

        CommentList oCommentList = new CommentList();
        oCommentList.Comment.Add(oComment1);
        oCommentList.Comment.Add(oComment2);

        return oCommentList;
    } 
```

客户端调用 Jquery：

```
 $('#CommentsButton').click(function () {
        $.getJSON('http://localhost:55679/RESTService.svc/GetComments?callback=?', function (data) {

            for (var i = 0; i < data.Comment.length; i++) {

                alert(data.Comment[i].Author);

            }

        }); 
```

我是 Jquery 的新手，因此将不胜感激详细的解释/代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:11:27.950

```
 public Comments[] GetComments()
 {
    .....
    return new Comments[]{oComment1, oComment2};
 } 
```

**编辑**

```
[OperationContract]
[WebGet(ResponseFormat = WebMessageFormat.Json)]
public Comments[] GetComments()
{
    Comments oComment1 = new Comments();
    oComment1.Title = "AMaking hay when the sun shines";
    oComment1.Author = "Plan_A";
    oComment1.CommentText = "AI like hay almost as much as I like sun. Just joking";

    Comments oComment2 = new Comments();
    oComment2.Title = "Making hay when the sun shines";
    oComment2.Author = "Plan_B";
    oComment2.CommentText = "I like hay almost as much as I like sun. Just joking";

    return new Comments[]{oComment1, oComment2};
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:58:49.357

您的 JSON 响应中的数据与您的第二个代码示例的数据无关的任何原因？

你不只是需要省略你不想要的字段（`CommentText`）并更改评论文本的值吗？

```
[OperationContract]
[WebGet(ResponseFormat = WebMessageFormat.Json)]
public CommentList GetComments()
{
    Comments oComment1 = new Comments();
    oComment1.Title = "Your Title";
    oComment1.Author = "Your Date";

    Comments oComment2 = new Comments();
    oComment2.Title = "Your Title";
    oComment2.Author = "Your Date";

    Comments oComment2 = new Comments();
    oComment3.Title = "Your Title";
    oComment3.Author = "Your Date";

    CommentList oCommentList = new CommentList();
    oCommentList.Comment.Add(oComment1);
    oCommentList.Comment.Add(oComment2);
    oCommentList.Comment.Add(oComment3);

    return oCommentList;
} 
```

# c# - 遇到实体框架 CodeFirst 延迟

> ID：15507067
> 
> 赞同：2
> 
> 时间：2013-03-19T18:01:47.820
> 
> 标签：c#, entity-framework, delay

我正在学习实体框架，我目前面临一个问题，我需要大约 10 秒来从数据库中检索数据或更新一行，就好像我的代码实际上被卡了一段时间一样，即使调试它一切正常了。

除了这种延迟之外，代码本身实际上按预期工作。

在 Google 和此处搜索，我没有找到其他与实体框架相关的问题。

我认为这可能与我的`CodeFirstMySQLEntities`类构造函数有关，但不确定。

如果有人可以为我提供指导，我将不胜感激。

这是主要代码：

```
namespace CodeFirstMySQL
{
    class Program
    {
        static void Main(string[] args)
        {
            UserRepository userRepository = new UserRepository();

            userRepository.Update("Klein", "OtherName");

            //delay experienced here

            Console.WriteLine("done");
            Console.ReadLine();
        }
    }
} 
```

这是 DbContext 代码：

```
namespace CodeFirstMySQL.Database
{
    public class CodeFirstMySQLEntities : DbContext
    {
        public CodeFirstMySQLEntities() : base("CodeFirstMySQLEntities") { }

        public DbSet<UserModel> Users { get; set; }
    }
} 
```

这是用户模型代码：

```
namespace CodeFirstMySQL.Database.Models
{
    public class UserModel
    {
        [Key, StringLength(100)]
        public string firstName { get; set; }

        [StringLength(100)]
        public string lastName { get; set; }
    }
} 
```

这是存储库代码：

```
namespace CodeFirstMySQL.Database.Repositories
{
    public class UserRepository
    {
        public void Insert(UserModel user)
        {
            using (var context = new CodeFirstMySQLEntities())
            {
                context.Users.Add(user);
                context.SaveChanges();
            }
        }

        public void Delete(string firstName)
        {
            using (var context = new CodeFirstMySQLEntities())
            {
                UserModel user = context.Users.FirstOrDefault(x => x.firstName == firstName);
                context.Users.Remove(user);
                context.SaveChanges();
            }
        }

        public void Update(string lastNameOld, string lastNameNew)
        {
            using (var context = new CodeFirstMySQLEntities())
            {
                UserModel user = context.Users.FirstOrDefault(x => x.lastName == lastNameOld);
                user.lastName = lastNameNew;
                context.SaveChanges();
            }
        }

        public IList<UserModel> GetUsers()
        {
            using (var context = new CodeFirstMySQLEntities())
            {
                return context.Set<UserModel>().ToList();
            }
        }
    }
} 
```

连接字符串：

```
<connectionStrings>
    <add name="CodeFirstMySQLEntities" connectionString="Server=localhost; Database=CodeFirst; Uid=root; Pwd=" providerName="MySql.Data.MySqlClient"/>
  </connectionStrings> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T18:07:09.227

延迟几乎可以肯定是由于实体框架启动所需的时间。您可以通过在退出代码之前尝试第二次更新来确认这一点。

[以下摘录解释了正在发生的事情](http://vbfeeds.com/post.aspx?id=7511)

> 模型缓存
> 
> 发现模型、处理数据注释和应用流畅的 API 配置需要一些成本。为了避免每次实例化派生的 DbContext 时产生此成本，模型在第一次初始化期间被缓存。然后，每次在同一个 AppDomain 中构造相同的派生上下文时，都会重新使用缓存的模型。

# llvm - 程序中的加载指令数

> ID：15507072
> 
> 赞同：-1
> 
> 时间：2013-03-19T18:01:57.620
> 
> 标签：llvm, llvm-clang, llvm-3.0

如何通过 LLVM 计算一个简单的“hello world”程序的加载指令总数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T20:42:08.267

编写一个遍历模块中所有指令的通道，然后计算完成的指令数`isa<LoadInst>(I)`。

有关如何迭代所有指令的信息，请参阅[程序员手册。](http://llvm.org/docs/ProgrammersManual.html#iterating-over-the-instruction-in-a-function)

如果您不确定如何编写通行证，请查看[这个方便的指南](http://llvm.org/docs/WritingAnLLVMPass.html)。

# wordpress - Drupal 7 块中来自 Wordpress 的博客标题

> ID：15507077
> 
> 赞同：0
> 
> 时间：2013-03-19T18:02:04.693
> 
> 标签：wordpress, drupal, drupal-blocks

我们有一个关于 Drupal 7 的网站和一个在 Wordpress 上运行的单独博客。我很好奇是否可以创建一个显示博客标题并链接到博客条目的块。此外，一旦添加了新的博客条目，它应该会自动更新。

请告知是否可以实现此功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T23:21:43.897

我确信您的 Wordpress 博客可以提供其内容的一个或多个 RSS 提要。在 Drupal 站点中，您可以激活聚合器模块（它在核心中）并从这些提要中提取内容。还有一堆其他的 contrib 模块可以扩展（或替换）该功能。

# jquery - 延迟的ajax不起作用

> ID：15507078
> 
> 赞同：1
> 
> 时间：2013-03-19T18:02:10.323
> 
> 标签：jquery, knockout.js

我正在使用使用 jquery 的延迟 Ajax。在按钮“TestAjax”的单击事件上，我将调用 2 个 WCF 服务。当他们完成加载时，我将执行一些逻辑。我的代码如下

```
this.TestAjax = function () {
        debugger;
        var flattened1;
        var flattened2;

        function callFirstService() {

            ViewModel.loadFirstService(1));

       }

        function callSecondService() {

            ViewModel.loadSecondService(2);
       }

        // Multiple Ajax Requests 
       $.when(callFirstService(), callSecondService()).done(function () {

           console.log("now we are will start logic);

           // logic here                

        });

}; 
```

在不同视图模型中调用服务的代码如下

```
 this.loadFirstService = function (id) {

        var input =
            {
                Id: id

            };

        $.ajax({
            url: "../RestService/someService",
            type: "PUT",
            contentType: 'application/json',
            processData: false,
            data: JSON.stringify(input),
            error: function(XMLHttpRequest, textStatus, errorThrown) {

                alert(errorThrown);
            },

            success: function(allData) {
                var test = $.map(allData, function(item) {

                    return new Data1(item);
                });

                self.List1(test);

            }
        });

 };

 this.loadSecondService = function (id) {

        var input =
            {
                Id: id

            };

        $.ajax({
            url: "../RestService/someService",
            type: "PUT",
            contentType: 'application/json',
            processData: false,
            data: JSON.stringify(input),
            error: function(XMLHttpRequest, textStatus, errorThrown) {

                alert(errorThrown);
            },

            success: function(allData) {
                var test = $.map(allData, function(item) {

                    return new Data2(item);
                });

                self.List2(test);

            }
        });

}; 
```

问题是它进入 $.when 并打印 console.log("now we are will start logic); 然后调用服务。我如何先调用服务，然后在成功命中服务时执行一些逻辑？

让我知道它是否不够清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:07:02.640

您需要您的方法来返回延迟对象。

```
this.loadSecondService = function (id) {
    var input = {
        Id: id
    };
    return $.ajax({
        ...
    }); 
```

接下来，您需要处理接收数据的逻辑`.done()`

```
$.when(callFirstService(), callSecondService()).done(function (firstService,secondService) {
    console.log("Both services are done");
}) 
```

# javascript - 一个 html 部分中的 js 代码不起作用

> ID：15507081
> 
> 赞同：0
> 
> 时间：2013-03-19T18:02:12.217
> 
> 标签：javascript, jquery, html, css, jquery-ui

当您缩小浏览器窗口时，将会有不同的 iphone 布局...

当我将 js 放入一个 html 部分时，它不起作用....但是如果我将 js 放在小提琴 js 部分中，它可以正常工作....你能说出原因吗....问题是我的 li 标签没有得到来自 js 的值......你能告诉我是什么原因......在下面提供我的代码......

工作代码....

[http://jsfiddle.net/YZYp5/7/](http://jsfiddle.net/YZYp5/7/)

不工作的代码....

[http://jsfiddle.net/YZYp5/3/](http://jsfiddle.net/YZYp5/3/)

```
<li style="display: table-cell; width: 417px; vertical-align: top; border: 1px solid red; left: -417px; -webkit-transition: 300ms; -webkit-transform: translate(0px, 0px) translateZ(0px);" data-index="1"> 
```

问题出在这个功能上

```
function translate(index, dist, speed) {

    var slide = slides[index];
    var style = slide && slide.style;

    if (!style) return;

    style.webkitTransitionDuration = 
    style.MozTransitionDuration = 
    style.msTransitionDuration = 
    style.OTransitionDuration = 
    style.transitionDuration = speed + 'ms';

    style.webkitTransform = 'translate(' + dist + 'px,0)' + 'translateZ(0)';
    style.msTransform = 
    style.MozTransform = 
    style.OTransform = 'translateX(' + dist + 'px)';

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:04:15.007

问题似乎在这里：

```
var style = slide && slide.style; 
```

这将产生`style`一个布尔值，而不是一个对象。您可能正在寻找这样的东西：

```
var style = slide && slide.style ? slide.style : {}; 
```

# web-services - 设置方法的输入参数

> ID：15507086
> 
> 赞同：1
> 
> 时间：2013-03-19T18:02:22.643
> 
> 标签：web-services, abap

我有一个`X`使用方法调用的对象`GET_BANK`，如下图所示：

![在此处输入图像描述](../Images/9eb0ab2d6320d4e06a90d56dc50f74d6.png)

我想调用该函数`GET_BANK`，并尝试将输入参数设置`BLZ`为某个值。

**我不太了解此处介绍的数据结构以及如何访问它。**

此时我的代码如下所示（简单版）：

```
data: testobj type ref to ZCO_BLZSERVICE_PORT_TYPE .
data: input type ZGET_BANK .
input-BLZ = '10070000'. 
```

我认为我得到的错误是“数据对象“INPUT”没有名为“BLZ”的组件。” 不相关，因为我显然不知道如何设置 BLZ 参数。

**编辑：**可以通过链接多个参数/对象来完成 BLZ：

`input-PARAMETERS-BLZ = '10070000'.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:35:58.673

据我所知，您的输入数据应参考`TYPE ZGET_BANK_TYPE`. 尝试在您显示的屏幕中双击包含该内容的字段，以查看它是否导致具有名为 的组件的结构`BLZ`。

# asp.net - asp.net ajax 复制而不是加载部分视图

> ID：15507087
> 
> 赞同：0
> 
> 时间：2013-03-19T18:02:28.547
> 
> 标签：asp.net, ajax, asp.net-mvc

嘿，我的 ajax 有问题，我只是想更新部分视图，但不是重新创建部分视图，而是复制显示部分视图的整个页面

控制器

```
[HttpGet]
    public PartialViewResult updatelist()
    {
        return PartialView("ForumTopicList");
    } 
```

看法

```
 using (Ajax.BeginForm("updatelist", "Forums", new AjaxOptions
 {
            InsertionMode = InsertionMode.Replace, UpdateTargetId = "topiclist"
        }))
 {
       <div>
    <input type="submit" value="refresh" />
</div>
 }   

 <div id="topiclist">
     @{Html.RenderPartial("ForumTopicList", this.Model.Topics);}
 </div> 
```

希望它很明显，谢谢大家

更新：我现在做的就是

```
using (Ajax.BeginForm(new AjaxOptions { HttpMethod = "GET", InsertionMode = InsertionMode.Replace, UpdateTargetId = "topiclist" }))
 {
 <input type="submit" value="refresh" />
 }  

  <div id="topiclist">
 @{Html.RenderPartial("ForumTopicList", this.Model.Topics);}
 </div> 
```

仍然只是复制整个视图一次，然后视图按钮和 div 中的复制视图都可以正常工作：s

# c# - Json.NET：反序列化 json 数组

> ID：15507088
> 
> 赞同：7
> 
> 时间：2013-03-19T18:02:32.603
> 
> 标签：c#, json, json.net

我正在尝试使用 Json.NET 处理 JSON 结构并遇到了一些问题：

当 JSON 包含未命名的数组时，我的类不起作用。

**json示例：**

```
{
    "graph_property" : [{
            "name" : "calculation_method",
            "value" : "Arithmetic"
        }, {
            "name" : "graph_type",
            "value" : "TIME"
        }
    ],
    "measurement" : [{
            "id" : "9997666",
            "alias" : "Measurement (TxP)[IE]-Home Page - Total Time (seconds)",
            "bucket_data" : [{
                    "name" : "2013-MAR-18 12:00 AM",
                    "id" : 1,
                    "perf_data" : {
                        "value" : "2.244",
                        "unit" : "seconds"
                    },
                    "avail_data" : {
                        "value" : "99.67",
                        "unit" : "percent"
                    },
                    "data_count" : {
                        "value" : "299",
                        "unit" : "#"
                    }
                }
            ],
            "graph_option" : [{
                    "name" : "perfwarning",
                    "value" : "-",
                    "unit" : "seconds"
                }, {
                    "name" : "perfcritical",
                    "value" : "-",
                    "unit" : "seconds"
                }, {
                    "name" : "availwarning",
                    "value" : "-",
                    "unit" : "percent"
                }, {
                    "name" : "availcritical",
                    "value" : "-",
                    "unit" : "percent"
                }, {
                    "name" : "bucketsize",
                    "value" : "86400",
                    "unit" : "seconds"
                }, {
                    "name" : "rows",
                    "value" : "1",
                    "unit" : "#"
                }, {
                    "name" : "pagecomponent",
                    "value" : "Total Time",
                    "unit" : "seconds"
                }, {
                    "name" : "avg_perf",
                    "value" : "2.244",
                    "unit" : "seconds"
                }, {
                    "name" : "avg_avail",
                    "value" : "99.67",
                    "unit" : "percent"
                }, {
                    "name" : "total_datapoint_count",
                    "value" : "300",
                    "unit" : "#"
                }, {}

            ]
        }, {
            "id" : "9997666",
            "alias" : "Measurement (TxP)[IE]-Women - Total Time (seconds)",
            "bucket_data" : [{
                    "name" : "2013-MAR-18 12:00 AM",
                    "id" : 1,
                    "perf_data" : {
                        "value" : "0.979",
                        "unit" : "seconds"
                    },
                    "avail_data" : {
                        "value" : "100.00",
                        "unit" : "percent"
                    },
                    "data_count" : {
                        "value" : "299",
                        "unit" : "#"
                    }
                }
            ],
            "graph_option" : [{
                    "name" : "perfwarning",
                    "value" : "-",
                    "unit" : "seconds"
                }, {
                    "name" : "perfcritical",
                    "value" : "-",
                    "unit" : "seconds"
                }, {
                    "name" : "availwarning",
                    "value" : "-",
                    "unit" : "percent"
                }, {
                    "name" : "availcritical",
                    "value" : "-",
                    "unit" : "percent"
                }, {
                    "name" : "bucketsize",
                    "value" : "86400",
                    "unit" : "seconds"
                }, {
                    "name" : "rows",
                    "value" : "1",
                    "unit" : "#"
                }, {
                    "name" : "pagecomponent",
                    "value" : "Total Time",
                    "unit" : "seconds"
                }, {
                    "name" : "avg_perf",
                    "value" : "0.979",
                    "unit" : "seconds"
                }, {
                    "name" : "avg_avail",
                    "value" : "100.00",
                    "unit" : "percent"
                }, {
                    "name" : "total_datapoint_count",
                    "value" : "299",
                    "unit" : "#"
                }, {}

            ]
        }
    ],
    "link" : {
        "type" : "application/json",
        "href" : "http://api.website.tld?format=json",
        "rel" : "slotmetadata"
    }
} 
```

**Json.NET 类：**

```
using System;
using System.Collections.Generic;

namespace CAKR.Graph
{
    /// <summary>
    /// Description of KN_Graph.
    /// </summary>
    public class GraphProperty
    {
        public string name { get; set; }
        public string value { get; set; }
    }

    public class PerfData
    {
        public string value { get; set; }
        public string unit { get; set; }
    }

    public class AvailData
    {
        public string value { get; set; }
        public string unit { get; set; }
    }

    public class DataCount
    {
        public string value { get; set; }
        public string unit { get; set; }
    }

    public class BucketData
    {
        public string name { get; set; }
        public int id { get; set; }
        public PerfData perf_data { get; set; }
        public AvailData avail_data { get; set; }
        public DataCount data_count { get; set; }
    }

    public class GraphOption
    {
        public string name { get; set; }
        public string value { get; set; }
        public string unit { get; set; }
    }

    public class Measurement
    {
        public string id { get; set; }
        public string alias { get; set; }
        public List<BucketData> bucket_data { get; set; }
        public List<GraphOption> graph_option { get; set; }
    }

    public class Link
    {
        public string type { get; set; }
        public string href { get; set; }
        public string rel { get; set; }
    }

    public class RootObject
    {
        public List<GraphProperty> graph_property { get; set; }
        public List<Measurement> measurement { get; set; }
        public Link link { get; set; }
    }
} 
```

**我的代码：**

```
var myObject = JsonConvert.DeserializeObject<CAKR.Graph.Measurement>(MyJsonString); 
```

我不确定为什么我没有得到一个包含“测量”子数组数据的对象。如果我插入命名值，它可以工作......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-02-01T13:05:11.650

所以我努力了很长一段时间才能让它发挥作用。然而最终解决方案并没有那么困难。希望我的回答能帮助一些人。

我的解决方案是

1.  使用 nu.get 将 JSON.net 安装到您的项目中
2.  使您的 JSON 对象包括数组中的数组等。确保对象的格式正确！例子...

> {“产品明细”：[
> 
> ```
>  {
>       "ProjectImg"    : "http://placehold.it/400x300",
>       "Category"      : "Cars",
>       "ProjectTitle"  : "Cars of the future",
>       "ProjectDesc"   : "Test project",
>       "GenSpecList"   : ["Specs1", "Specs2", "Specs3", "Specs4"],
>       "OptionList"    : [{    "OptionNr"  : "1",
>                               "Options"   : ["Opt1", "Opt2", "Opt3"]
>                           },
>                           {   "OptionNr"  : "2",
>                               "Options"   : ["Opt1", "Opt2", "Opt3"]
>                           },
>                           {   "OptionNr"  : "3",
>                               "Options"   : ["Opt1", "Opt2", "Opt3"]
>                           },
>                           {   "OptionNr"  : "4",
>                               "Options"   : ["Opt1", "Opt2", "Opt3"]
>                           },
>                           {   "OptionNr"  : "5",
>                               "Options"   : ["Opt1", "Opt2", "Opt3"]
>                           },
>                           {   "OptionNr"  : "6",
>                               "Options"   : ["Opt1", "Opt2", "Opt3"]
>                           }
>                         ],
>       "Articles"      : [{    "tileImg" : "'Images/Project/1.jpg'",
>                               "tileTit" : "Title1",
>                               "tileArt" : "Article text here..."
>                           },
>                           {
>                               "tileImg" : "'Images/Project/2.jpg'",
>                               "tileTit" : "Title2",
>                               "tileArt" : "Article text here..."
>                           },
>                           {
>                               "tileImg" : "'Images/Project/3.jpg'",
>                               "tileTit" : "Title3",
>                               "tileArt" : "Article text here..."
>                           },
>                           {
>                               "tileImg" : "'Images/Project/4.jpg'",
>                               "tileTit"   : "Title4",
>                               "tileArt"   : "Article text here..."
>                           }
>                          ]
>   }
> ]
> } 
> ```

1.  转到 json2csharp.com 并将您的 JSON 对象复制到输入框中，然后单击生成按钮。将生成的 csharp 模型（这实际上是解决我的难题的关键！）复制到您的 ViewModel 中。
2.  就我而言，json2csharp.com 生成的所有类的主要类是 RootObject，如下所示

    ```
    public class Article
    {
        public string tileImg { get; set; }
        public string tileTit { get; set; }
        public string tileArt { get; set; }
    }

    public class OptionList
    {
        public string OptionNr { get; set; }
        public List<string> Options { get; set; }
    }

    public class ProductDetail
    {
        public string ProjectImg { get; set; }
        public string Category { get; set; }
        public string ProjectTitle { get; set; }
        public string ProjectDesc { get; set; }
        public List<string> GenSpecList { get; set; }
        public List<OptionList> OptionList { get; set; }
        public List<Article> Articles { get; set; }
    }

    public class RootObject
    {
        public List<ProductDetail> ProductDetail { get; set; }
    } 
    ```

3.  然后在控制器中使用以下代码（这里只是复制了完整的文件）

    ```
    using Project.Details; //<-- this is my ViewModel namespace name
    using Newtonsoft.Json;
    using System.IO;
    using System.Threading.Tasks;

    namespace WebApplication.Controllers
    {
        public class JSONController : Controller
        {
            //
            // GET: /JSON/
            public async Task<ActionResult> Index()
            {
                StreamReader file = new StreamReader("C:\\Users\\YourName\\etc\\File.json");
                String json = await file.ReadToEndAsync();

                var Project = JsonConvert.DeserializeObject<RootObject>(json);

                return View();
            }
        }
    } 
    ```

现在一切正常，数组中的数组等。希望您发现我的解决方案有帮助，请注意我不是一个顽固的程序员，所以如果我错过了效率方面的事情，我希望从您那里得到一些改进此代码的提示...

最好的问候，雷蒙德

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T18:22:42.853

You are almost there. Just use

```
var myObject = JsonConvert.DeserializeObject<CAKR.Graph.RootObject>(MyJsonString); 
```

instead of

```
var myObject = JsonConvert.DeserializeObject<CAKR.Graph.Measurement>(MyJsonString); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T18:30:01.530

首先，您并不需要`Measurement`完全按照`MyJsonString`. 您可以使用`JsonProperty`属性并装饰您的类属性。

另一件事是，如果您想反序列化您的部分`MyJsonString`并仅提取数组`Measurement`，您应该为方法提供正确的 T 类型`Deserialize`（在您的情况下是`IEnumerable<Measurement>`.

以下代码应该会有所帮助：

```
 dynamic context = JObject.Parse(MyJsonString);
    var myObject = JsonConvert.DeserializeObject<IEnumerable<Measurement>>(context.measurement.ToString()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-02T16:38:48.327

我使用一种非常简单的方法来反序列化 Json 数组。而不是使用具有大量公共变量的大量公共类。我只是使用一个动态对象并将 json 作为对象传递给 JSONConvert.DeserializeObject。

这就是它的工作方式。假设我有以下 JSON：

```
string json = { 'Name': 'John Doe', 
  'Address': { 'City': 'Atlanta', 'State': 'GA' }, 
  'Age': 30} 
```

我可以将字符串 json 传递给 JSONConvert.DeserializeObject。

```
dynamic outputArray = JsonConvert.DeserializeObject(json); 
```

然后使用刚刚创建的动态项目，我可以像这样收集 Json 数据。

```
string getName = outputArray.Name //This will return "John Doe" 
```

如果您的 Json 中有一个数组，您可以使用

```
string getCity = outputArray.Address.City; //This will return "Atlanta". 
```

在没有公共变量集群的情况下，很容易更改从哪里提取数据……如果需要，您仍然可以将值保存到公共变量中。

以下是我如何使用完整方法：

```
using (var client = new WebClient())
        {
            string json = client.DownloadString(url);
            string output = json.ToString();

            dynamic outputArray = JsonConvert.DeserializeObject(output);

            string _age = outputArray.age;
            string appID = outputArray.data.app_id;

            Debug.Write(outputArray.Something); //Just match value of json        
        } 
```

# intellij-idea - JetBrains IDEA：更改 Darcula LAF 中代码完成菜单选择突出显示的颜色

> ID：15507090
> 
> 赞同：10
> 
> 时间：2013-03-19T18:02:35.380
> 
> 标签：intellij-idea, phpstorm

达库拉和我正在努力达成协议。整体上易读性很差，但有些事情我只需要改变：

![截屏](../Images/04ee3b327c1d8e9ab5a48d410514ae8e.png)

在此代码完成建议菜单中，所选项目不清晰。

在首选项或首选项 XML 文件中，所选项目文本集的背景颜色位于何处？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2021-08-10T12:06:17.417

您可以从以下位置找到更改代码自动完成窗口颜色的选项。

`Open your settings > Editor > Color Scheme > General > Popups and Hints > Completion.`

注意：您也可以在设置页面搜索关键字`completion`以快速找到选项。

然后调整背景颜色并单击应用。

您可以查看屏幕截图以获得视觉参考。

[![在此处输入图像描述](../Images/52177eeb2278ce375c959f386ba3293b.png)](https://i.stack.imgur.com/O0O6r.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T19:26:18.567

我在 3 天前修复了这个问题。[http://youtrack.jetbrains.com/issue/IDEA-103104](http://youtrack.jetbrains.com/issue/IDEA-103104) 现在看起来这个 [想法完成了 http://img32.imageshack.us/img32/6516/ss20130319202811.png](http://img32.imageshack.us/img32/6516/ss20130319202811.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-16T13:29:27.913

我通过下载一个名为 Gradianto 的新 INTELLIJ 主题解决了这个问题，效果很好，

Gradianto 允许您在安装在 intellij 中后选择 beetween 3 darcula 主题，所有这些主题将通过代码完成清楚地突出显示所选项目。

您使用以下方法安装主题：IntellijIDEA --> Preferences --> Plugins --> 然后搜索并安装 Gradianto 主题

这是我看到的 youtube 教程： [https ://www.youtube.com/watch?v=NsZZm5f5JD0](https://www.youtube.com/watch?v=NsZZm5f5JD0)

希望这会有所帮助

谢谢

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-11-25T10:46:29.033

你的问题我得到了很好的答案。

这是链接：[java - 在 IDEA 代码完成窗口中更改字体颜色 - 代码日志](https://stackoverflow.com/questions/17283638/changing-the-font-colour-in-idea-code-completion-window)

```
You just need unable this option : 

[ 
Settings —— Editor —— Code Completion 
—— Insert selected variant by typing dot , space ,etc . 
]

No doubt of it , it works very well for me ! 
```

# java - GAE Servlet 调用 Tibco BusinessWorks http 接收器

> ID：15507093
> 
> 赞同：0
> 
> 时间：2013-03-19T18:02:44.280
> 
> 标签：java, google-app-engine, tibco

我想问一下，托管在谷歌应用引擎上的 servlet 是否可以通过 http 接收器调色板选项调用和启动 tibco businessworks 进程。

我在确定如何设置 http 连接（要监听的端口和主机等）时迷失了方向

将不胜感激任何帮助指出我的方向。

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:52:00.457

您可能必须**在 Businessworks 中开发 Web 服务（使用服务面板）并将其部署在可通过 Internet 访问的服务器中（由外部世界）**。您还可以使用业务工作引擎中可用的内置资源提供程序公开您的 WSDL。

一旦服务暴露给外界，您就可以像使用 Appengine servlet 中的任何其他服务一样使用这些服务。

我相信上述解决方案应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T20:55:31.843

如果进程未运行，您如何调用它？无论如何，您无法通过 http 启动它

这里有一个关于 http 调色板的简单教程 [http://teknoscope.com/data/tibco/tibco-http-messaging-palette-tutorial/](http://teknoscope.com/data/tibco/tibco-http-messaging-palette-tutorial/)

# javascript - 获取标签之间的内容

> ID：15507098
> 
> 赞同：0
> 
> 时间：2013-03-19T18:02:57.893
> 
> 标签：javascript, regex

我必须提取标签的内容，这就是我所拥有的：

```
<?xml version="1.0" encoding="utf-8"?>
<string xmlns="http://tempuri.org/">iVBORw0KGgoAAAANSUhEUgAAAU0AAAD6CAYAAAAlSBW9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAP+lSURBVHhehP1lnB3H1a4P75Ely8zMzOyYHcccjsNOHNtx7IDtJCbJgtEwM4tG0kgzghnRaEgMI2aWLNlisMVMlgxa73Wv2tvJ85xz ...
</string> 
```

这就是我想要的：

```
iVBORw0KGgoAAAANSUhEUgAAAU0AAAD6CAYAAAAlSBW9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAP+lSURBVHhehP1lnB3H1a4P75Ely8zMzOyYHcccjsNOHNtx7IDtJCbJgtEwM4tG0kgzghnRaEgMI2aWLNlisMVMlgxa73Wv2tvJ85xz ... 
```

我试过这个正则表达式：

```
iframeContents.match(/<string[^>]*>(.*?)<\/string>/i); 
```

但我不断得到字符串标签，而不再是 xml 了：

```
<string xmlns="http://tempuri.org/">iVBORw0KGgoAAAANSUhEUgAAAU0AAAD6CAYAAAAlSBW9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAP+lSURBVHhehP1lnB... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:35:43.557

尝试

```
iframeContents.match( /<string[^>]*>([\s\S]*?)<\/string>/i )[1] 
```

匹配返回一个数组，或者`null`如果没有匹配。
数组的第一个元素是整个匹配，第二个元素是第一个捕获组匹配的文本`()`。

`.`不匹配换行符，但匹配`[\s\S]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:42:18.777

[从这里](https://stackoverflow.com/questions/649614/xml-parsing-of-a-variable-string-in-javascript/8412989#8412989)使用 parse xml 方法

```
var parseXml;

if (typeof window.DOMParser != "undefined") {
    parseXml = function(xmlStr) {
        return ( new window.DOMParser() ).parseFromString(xmlStr, "text/xml");
    };
} else if (typeof window.ActiveXObject != "undefined" &&
       new window.ActiveXObject("Microsoft.XMLDOM")) {
    parseXml = function(xmlStr) {
        var xmlDoc = new window.ActiveXObject("Microsoft.XMLDOM");
        xmlDoc.async = "false";
        xmlDoc.loadXML(xmlStr);
        return xmlDoc;
    };
} else {
    throw new Error("No XML parser found");
})

var xml = parseXml("...");
var text = xml.documentElement.firstChild.nodeValue; 
```

# css - CSS定位div彼此相邻

> ID：15507100
> 
> 赞同：0
> 
> 时间：2013-03-19T18:03:01.303
> 
> 标签：css

我在 div 中定位 2 个 div 时遇到问题。我想有 2 个 div 并排，但我不知道怎么做。这是我的html

```
<div id="game">
    <div id="choice" onmouseover="npcRoll()">
        <p>Chosse your weapon!</p>
        <button id="rock" onClick="choose(1)">Rock</button>
        <button id="paper" onClick="choose(2)">Paper</button>
        <button id="scissors" onClick="choose(3)">Scissors</button>
        <p>You chose <span id="userChoice">none</span>!</p>
    </div>
    <div id="confirm">    
    </div>
</div> 
```

这是我的 CSS：

```
#choice {
    border: 2px solid #87231C;
    border-radius: 12px;
    border-top-right-radius: 0px;
    border-bottom-right-radius: 0px;
    background-color: #FF5A51;
    width: 350px;
}
#game {
    border: 2px solid #fff;
    border-radius: 15px;
    background-color: white;
    width: 500px;
    margin: 0 auto;
}
#confirm {
    border: 2px solid #00008B;
    border-radius: 12px;
    border-top-left-radius: 0px;
    border-bottom-left-radius: 0px;
    background-color: #1E90FF;
    width: 142px;
    height: 100px;
}
body {
    background-color: #DFEFF0;
    text-align: center;
}

button {
    font-size: 22px;
    border: 2px solid #87231C;
    border-radius: 100px;
    width: 100px;
    height: 100px;
    color: #FF5A51;
    text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;
    padding-top: 36px;
}

button:active {
    font-size: 22px;
    border: 2px solid #328505;
    color: #32A505;
    border-radius: 100px;
    width: 100px;
    height: 100px;
    padding-top: 36px;
} 
```

你可以在这里查看它的外观。[http://jsfiddle.net/VcU7J/](http://jsfiddle.net/VcU7J/)

**感谢您的任何帮助！**

**编辑：**我还尝试将浮动元素添加到 CSS 中，但它搞砸了。：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:07:37.227

有几种方法可以做到这一点。最传统的方法是`float`在两个 div 中使用 CSS 的属性：

**CSS**

```
#choice {
    border: 2px solid #87231C;
    border-radius: 12px;
    border-top-right-radius: 0px;
    border-bottom-right-radius: 0px;
    background-color: #FF5A51;
    width: 350px;

     float:left; 
}
#game {
    border: 2px solid #fff;
    border-radius: 15px;
    background-color: white;
    width: 500px;
    margin: 0 auto;

    /* this is needed to make sure your container background 
      "contains" your floated divs */ 
    overflow:auto; 

}
#confirm {
    border: 2px solid #00008B;
    border-radius: 12px;
    border-top-left-radius: 0px;
    border-bottom-left-radius: 0px;
    background-color: #1E90FF;
    width: 142px;
    height: 100px;

    float:left      
} 
```

[小提琴](http://jsfiddle.net/PHVrd/)

更多关于花车的[信息在这里](http://css-tricks.com/all-about-floats/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T18:08:06.647

使用[css 浮动](http://css-tricks.com/all-about-floats/)将 div 定位在彼此旁边，但不要忘记在完成后清除浮动。

```
#game {
    float:left;
}
#confirm {
    float: right;
}
.clear {
    clear: both;
} 
```

然后html看起来像：

```
<div id="game">
    <div id="choice" onmouseover="npcRoll()">
        <p>Chosse your weapon!</p>
        <button id="rock" onClick="choose(1)">Rock</button>
        <button id="paper" onClick="choose(2)">Paper</button>
        <button id="scissors" onClick="choose(3)">Scissors</button>
        <p>You chose <span id="userChoice">none</span>!</p>
    </div>
    <div id="confirm">    
    </div>
    <div class="clear"></div>
</div> 
```

# java - 在 Scala 中使用 Java 库

> ID：15507101
> 
> 赞同：26
> 
> 时间：2013-03-19T18:03:01.493
> 
> 标签：java, scala, scala-java-interop

我是 Scala 的新手。到目前为止，我只能编写基本代码，但我想开始更具体地使用它，而不仅仅是学习理论。

假设我在*HelloWorld.java*中有以下 Java 代码：

```
public class HelloWorld {

    public static void main(String[] args) {
        System.out.println("Hello, World");
    }

} 
```

从 Scala 调用它的代码是什么？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-19T18:09:49.860

在您的示例中，您只有一个主函数，而不是您必须从其他地方调用的函数。但是假设你确实有一个像

```
package com.example.hello;

public class HelloWorld {
  public static void sayHello() {
    System.out.println("Hello, world!");
  }
} 
```

（为了完整起见，我还为您的示例添加了一个包）。然后在您的 Scala 代码中，您可以执行以下操作：

```
import com.example.hello._

object GreetWorld extends App {
  (0 until 10).foreach {
    HelloWorld.sayHello()
  }
} 
```

在 Scala 中使用 Java 函数打招呼 10 次。在导入包`._`的`import`所有成员，或者你可以只是`import com.example.hello.HelloWorld`. 您甚至可以导入方法本身，`import com.example.hello.HelloWorld.sayHello`这样您就不需要`HelloWorld`在代码中引用该对象。

两种语言都编译为 JVM 字节码，因此从 Scala 调用 Java 代码非常简单，尽管如果涉及隐式参数，从 Java 调用 Scala 可能会比较棘手。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T14:55:34.010

等效代码为：

```
object HelloWorld extends App {
  println("Hello, world!")
} 
```

如果您将该代码保存在一个名为的文件中，`HelloWorld.scala`那么您可以像这样编译和运行它：

```
$ scalac HelloWorld.scala

$ scala HelloWorld
Hello, world! 
```

或者，如果您在 REPL 中工作：

```
scala> :paste
// Entering paste mode (ctrl-D to finish)

object HelloWorld extends App {
  println("Hello, world!")
}

// Exiting paste mode, now interpreting.

defined module HelloWorld

scala> HelloWorld.main(Array.empty[String])
Hello, world! 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-16T08:46:14.740

```
object HelloWorld{
      def main(args: Array[String]): Unit = {
      println("hello world")
    }

} 
```

或者

```
object HelloWorld extends App {
  println("Hello, world!")
} 
```

# css - CSS边框图像左侧和边框图像底部或2个背景

> ID：15507102
> 
> 赞同：1
> 
> 时间：2013-03-19T18:03:02.773
> 
> 标签：css

我有一堂课，我想做的是应用一个border-image-left和border-image-right（这是两个不同的图像）

我能做的就是这个

```
background:url(http://jamessuske.com/freelance/heyheyandco/images/nav-border-bottom.png) bottom no-repeat;
background:url(http://jamessuske.com/freelance/heyheyandco/images/nav-border-left.png) left no-repeat; 
```

但它只会显示其中一个:(

我正在尝试做的事情可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:11:23.410

你可以在 CSS3 中做到这一点：

[http://www.css3.info/preview/multiple-backgrounds/](http://www.css3.info/preview/multiple-backgrounds/)

但是对于不支持 CSS3 的浏览器，你可以这样做：

HTML：

```
<body>
    <div class="container">
        copy
    </div>
</body> 
```

CSS：

```
body{background: url(path/left.png) left;}
.container {background: url(path/right.png) right;} 
```

如果需要在内容站点容器中，您可以尝试伪元素：

```
<div><pseudo-element:before />site content<pseudo-element:after /></div> 
```

# mfc - Visual Studio 2012 MFC 应用程序的 htmlhelp.lib？

> ID：15507105
> 
> 赞同：1
> 
> 时间：2013-03-19T18:03:04.610
> 
> 标签：mfc, visual-studio-2012, html-help

有人知道 MS 旧 htmlhelp.lib 库的第三方或开源替代品吗？它是用旧版本的 Visual Studio 编译的，显然不再受支持。我正在将一个旧程序移植到 VS.2012。

看起来这样做的官方方法有点骇人听闻……您必须使用 MFC 向导创建一个带有 HTML 帮助的新应用程序，然后将所有旧代码合并到其中：-P [http://social.msdn。 microsoft.com/Forums/en-US/vcgeneral/thread/045a2e45-01cb-4be3-afc5-f1473496760f/](http://social.msdn.microsoft.com/Forums/en-US/vcgeneral/thread/045a2e45-01cb-4be3-afc5-f1473496760f/)

编辑：注意：我的应用程序是 64 位的..

# script# - ScriptSharp 初学者设置

> ID：15507106
> 
> 赞同：2
> 
> 时间：2013-03-19T18:03:08.550
> 
> 标签：script#

我已经阅读了几个小时关于 Script# 的文章，在看了作者在 MIX11 上的演讲后，我决定试一试。老实说，我不能说这是一种享受。

1) 首先，当我创建一个 Script# 项目时，我不会被问到将脚本放置在哪里，就像在其他地方看到的那样。两者都在 VS2010 和 VS2012 上进行了测试。西班牙语版本。

2) 我可以创建一个基本的页面脚本，但我不得不手动将生成的 .js 文件复制到我的 MVC 脚本文件夹中，这可能是由于错误 #1。这可以以某种方式自动化吗？

3) 我看到，在 Script# 项目模板下，我可以添加不同数量的项目，但描述对我来说似乎有点误导。例如，它说可以在“与特定页面关联的 Web 应用程序项目中”创建 jQuery 页面脚本。我知道这可以添加到标准的 Web 应用程序项目类型中，而不是脚本#，我错了吗？

现在，如果我将 Nugget 包（Script#、Script# HTML、Script# jQuery、Script# Knockout 等）添加到我的标准 MVC 项目中，由于 Properties/AssemblyInfo.cs 中的错误（特别是组装：ComVisible 和组装：Guid 属性），所以我猜添加这些包有点破坏标准参考。我无法发现错误，因此该项目确实变得无法使用。很高兴我在一个测试项目中做到了。:)

所以，为了总结成一个问题：

**有人可以解释一下可以用 Script# 创建的不同项目，应该在哪些项目类型中创建它们，以及要求是什么？**

附带说明一下，我的目标是使用 Script# 来生成我广泛使用的 Knockout 视图模型。我的第一次尝试没有产生任何脚本，这就是为什么我开始研究应该在*哪里创建这些类。*

在此先感谢，任何教程 URL 将不胜感激。我发现的那些现在似乎已经过时了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:04:26.823

我会尝试回答问题...

我正在编写更新的介绍文档 - 产品中最近发生了一些变化，希望能够简化事情，它们现在已经准备好，这样就可以解除障碍。在此期间的一小段时间内，您需要构建存储库（这应该相当简单）。请参阅[https://github.com/nikhilk/scriptsharp/wiki/Building,-Installing-and-Testing](https://github.com/nikhilk/scriptsharp/wiki/Building,-Installing-and-Testing)上的说明……这只是为了获取最新和最强大的内容，这直接有助于下面的第 4 步。

一旦构建并安装了生成的 vsix（并设置了指向本地构建的本地 nuget 包源）...

1.  从项目模板之一开始 - 例如。jQuery 应用程序之一。
2.  任何 script# nuget 包和 script# 项目进入 script# 项目（不是 web 项目）
3.  在其中添加您的代码。
4.  添加您的 Web 项目，并将您的 Web 项目中的项目到项目引用添加到 script# 项目。

成功编译后，生成的脚本将自动部署到 Web 应用程序中的 Scripts 文件夹中。

我还建议查看 github 存储库中的示例 - 您应该能够在 VS 中打开任何示例解决方案并查看它们的设置方式、它们使用的包等。

您的问题之间有一些很好的反馈。我希望看到一些作为问题提出的痛点/困惑，以便更好地跟踪它们。如果您想在 github ( [https://github.com/nikhilk/scriptsharp](https://github.com/nikhilk/scriptsharp) ) 上帮助改进项目，那就更好了。

希望这会有所帮助，并感谢您的耐心等待！

# c++ - std::vector 容纳超过 2^32 个元素

> ID：15507107
> 
> 赞同：-3
> 
> 时间：2013-03-19T18:03:09.320
> 
> 标签：c++, vector, containers

`std::vector::size`返回 a`size_t`所以我猜它最多可以容纳 2^32 个元素。

是否有一个标准容器可以容纳**更多**元素，例如 2^64**或**一种调整方式以`std::vector`通过例如 a 进行“索引” `unsigned long long`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T18:09:09.107

当然。编译一个 64 位程序。`size_t`然后将是 64 位宽。

但实际上，你*应该*做的是退后一步，考虑一下为什么需要这么大的向量。因为你很可能不会，而且有更好的方法来解决你正在处理的任何问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-19T18:09:58.967

`size_t`没有预定义的大小，尽管在 32 位计算机上通常上限为 2 ^(32 。)

由于`std::vector`必须为所有元素保存连续的内存，因此您*将在超出大小之前耗尽内存。*

为 64 位计算机编译您的程序，您将拥有更多空间。

更好的是，重新考虑是否`std::vector`合适。 **为什么要在内存中直接保存数万亿个相邻对象？**

`std::map<unsigned long long, YourData>`如果您只想要大索引而不是真正尝试存储数万亿个对象，请考虑使用 a 。

# mongodb - MongoDB嵌入相同的对象

> ID：15507109
> 
> 赞同：0
> 
> 时间：2013-03-19T18:03:12.163
> 
> 标签：mongodb, morphia

我有一个产品集合，想嵌入这样的图片仅供参考，我正在使用 Morphia 框架。你预见到像这样两次嵌入图像有什么问题吗？

或者我应该做图像参考？

```
@Embedded
public ArrayList<Image> MainImages
public ArrayList<Image> SecondaryImages 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T22:33:18.323

您可能会遇到一些将图像嵌入到产品文档中的问题。考虑：

*   文档大小限制为 16 MB
*   在更新期间移动大文档的开销
*   不能分享类似产品的图片

我建议使用`GridFS`MongoDB 的文件系统来存储图像。GridFS 包含两个集合：

*   块：将二进制数据（图像，在你的情况下）存储在块中，默认情况下，256k
*   文件：存储索引和元数据

GridFS 可以分片，可能只有块集合

您可以考虑嵌入和使用 GridFS 之间的“混合模式”：嵌入缩略图以快速交付并将较大的图像存储在 GridFS 上。

有关 GridFS 的更多信息，请参阅[概述](http://docs.mongodb.org/manual/applications/gridfs/)、[操作参考](http://docs.mongodb.org/manual/core/gridfs/)和[分片](http://docs.mongodb.org/manual/tutorial/shard-gridfs-data/)。

# java - 为什么在公共主类的情况下用相同的主类名保存java程序的名称

> ID：15507110
> 
> 赞同：1
> 
> 时间：2013-03-19T18:03:13.053
> 
> 标签：java

为什么java程序的名字需要用主类名保存，当那个类是public的时候，如果这个类不是public的，那么我们可以用任何名字保存程序然后编译它。为什么在公共主要课程的情况下我们不能这样做。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:09:09.997

我认为这个问题的意思是，为什么公共类名需要与声明它的文件名相匹配。

我认为 Bill K 的这个回答会回答你的问题：

[https://stackoverflow.com/a/2134888/1401409](https://stackoverflow.com/a/2134888/1401409)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:15:31.870

不，没有必要。您可以保存包含类say的文件，包含`MainClass`任何`main method`其他名称say `NonMainClass.java`（假设该文件不包含任何其他公共类）。您可以使用`javac NonMainClass.java`. 但是在执行它时，您需要使用`java MainClass`.

例如。考虑下面给出的代码：

```
class MainsClass 
{
    public static void main(String[] args) 
    {
        System.out.println("Hello World!");
    }
} 
```

此文件另存为`NoMainClass.java`. 它被编译为`javac NoMainClass.java`. 它生成`MainClass.class`工作目录。要执行程序，您需要运行以下命令`java MainClass`。

# ruby - Ruby 显示 unicode 字符

> ID：15507113
> 
> 赞同：2
> 
> 时间：2013-03-19T18:03:26.363
> 
> 标签：ruby, eclipse, unicode

我正在尝试打印一些 Unicode 字符：

```
# encoding: utf-8
puts "ử ậ ắ ặ ố ồ" 
```

如果我通过 Powershell 运行它，这就是我得到的：

![在此处输入图像描述](../Images/6cfdf0e070dccec73a9add68a55dc5de.png)

如果我通过 cmd 运行它，这就是我得到的：

![在此处输入图像描述](../Images/ee49d40441388eeeeebe01d1ef671871.png)

如果我在 Eclipse 中运行它（使用 Aptana Studio 3 插件），这就是我得到的：

![在此处输入图像描述](../Images/7c3b2bf6fedb73fdcfd7406e2aa639ac.png)

是我的系统/软件的问题还是 Ruby 的问题？我怎样才能让它工作？

它适用于 Ideone：http: [//ideone.com/PdycKH](http://ideone.com/PdycKH)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T18:09:32.010

Ruby 支持它没问题，并且在文件顶部设置格式是要走的路。

问题是通过命令行窗口显示。您需要同时使用支持 Unicode 显示的字体和字符页面。

请参阅有关在 Windows 命令行中执行此操作的[问题。](https://stackoverflow.com/questions/388490/unicode-characters-in-windows-command-line-how)

[关于 chcp 命令](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/chcp.mspx?mfr=true)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T18:48:53.497

我想到了：

*   对于`cmd`and `Powershell`，我必须更改字体（我更改为 Consolas）
*   在 Eclipse 中，我必须更改编码：转到 Run/Run 配置，选择 Common 选项卡，更改`Encoding`为`Other: UTF-8`

# php - 如何从 PHP 获取图像文件并在 Android 中显示？

> ID：15507119
> 
> 赞同：0
> 
> 时间：2013-03-19T18:03:38.050
> 
> 标签：php, android, json, image, blob

我想从 php.ini 获取图像文件。在我的情况下，我尝试先将图像转换为 BLOB，然后在从 JSONObject 获取图像后将其转换回来。它在 Logcat 中说 JSONObject 不能转换为 java.sql.Blob。

如果有其他方法请告诉。

这是我的代码：

```
 JSONArray array = new JSONArray(getJSONUrl(url));
            for (int i = 0; i < products.length(); i++) {
                JSONObject jsonObj = products.getJSONObject(i);

                placeName = jsonObj.getString(TAG_PlaceName);
                placeDesc = jsonObj.getString(TAG_PlaceDesc);
                placeID = jsonObj.getString(TAG_PlaceID);
                try {
                    Blob blob = (Blob) jsonObj.get(TAG_placeIcon);
                    byte[] byteBlob = blob.getBytes(0,
                                   (int) blob.length());
                    Bitmap bmp = BitmapFactory.decodeByteArray(byteBlob, 0,
                               byteBlob.length);
                    rowItems.add(new RowItem(placeID,placeName,placeDesc,bmp));
                } catch (SQLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } 
```

# javascript - firebug 脚本面板未显示任何脚本

> ID：15507122
> 
> 赞同：3
> 
> 时间：2013-03-19T18:03:49.710
> 
> 标签：javascript, jquery, firebug

我正在尝试调试我的 javascript 和 jQuery 并使用 firebug 逐步完成它。我在 Windows 机器上的 Apache 服务器（2.4）上运行我的代码。我用的是firefox浏览器18版。

当我去运行我的代码时，我在脚本面板中看不到我的 javascript（外部文件）。我在面板上看到了链接的 jQuery 库，但没有看到我的 javascript 代码。

在 Firebug 上，脚本清楚地链接在 HTML 面板中。但是在脚本面板上，只有 jQuery.js 是可见的。我会发布一个屏幕截图，但我现在没有足够的声誉。

我不知道发生了什么以及我必须做什么才能单步执行我的 javascript 代码。

**更新**

我将“调试器”放在我的 javascript 代码上，但它仍然没有显示在“脚本面板”上。

```
debugger;
$(document).ready(function () {
var email_default = "Enter your email address...";
$(':input[type="email"]').val(email_default).on('focus', function () {
if ($(this).val() == email_default) {
    $(this).val(' ');
}
}); 
```

我还尝试刷新浏览器，禁用并重新启用所有萤火虫面板 - 但它仍然不会显示我的外部 javascript。我还仔细检查了我的文件位置和目录，以确保我正确链接它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-19T00:24:21.430

如果 Firebug（或其他浏览器开发工具）没有在可用脚本列表中显示 JavaScript，这意味着它存在语法错误。

在这种情况下，您需要切换到*控制台*面板并在那里检查错误。

*笔记：*

如[相关答案](https://stackoverflow.com/a/31645823/432681)中所述，列表中未显示脚本也可能有其他原因：

从 Firefox 49.0 和 Firebug 2.0.18 开始，*脚本*面板完全损坏。这是由于一些内部 Firefox API 更改所致。而且由于[Firebug 已正式停产](https://hacks.mozilla.org/2016/12/firebug-lives-on-in-firefox-devtools/)，不幸的是，这将不再得到修复。

Firebug 2.0.11（及更低版本）中还有一个与 Firefox 39.0 结合的错误导致了这个问题。此错误已作为[问题 7918](https://github.com/firebug/firebug/issues/7918)提交并在 2.0.12 版中修复。
当启用*脚本*面板并且您关闭 Firebug 然后重新打开它时，就会发生这种情况。

# c - pthread 错误编号：是否否定？

> ID：15507123
> 
> 赞同：0
> 
> 时间：2013-03-19T18:03:56.570
> 
> 标签：c, pthreads, errno, error-code

查看`pthread_*`诸如[`pthread_rwlock_destroy`](http://pubs.opengroup.org/onlinepubs/009695399/functions/pthread_rwlock_destroy.html)和许多其他功能的文档，这就是文档的措辞：

> ### 返回值
> 
> 如果成功，pthread_rwlock_destroy() 和 pthread_rwlock_init() 函数将返回零；否则，应返回错误号以指示错误。
> 
> [EBUSY] 和 [EINVAL] 错误检查（如果实施）就像在函数处理开始时立即执行一样，并在修改 rwlock 指定的读写锁的状态之前导致错误返回。

这表示如果发生错误，应返回*错误号。*然后，它解释了错误代码：

> ### 错误
> 
> 如果出现以下情况，pthread_rwlock_destroy() 函数可能会失败：
> 
> [EBUSY]
> 实现检测到尝试在锁定时销毁 rwlock 引用的对象。
> ...

其中没有提到`EBUSY`本身是返回还是`-EBUSY`. 当函数返回错误代码时，几乎在我看到的所有地方，它们都会返回`-E*****`.

这是否意味着`pthread_*`函数也遵循这个约定？我应该检查返回值`-EBUSY`还是`EBUSY`本身？

在同一主题上，他们会存储`EBUSY`在`errno`or中`-EBUSY`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T18:09:10.790

它们返回正数的错误代码。应用程序不可见的任何内容都不会返回否定的错误代码。这是内核的实现细节。

# performance - 如何在 Firefox 的 watir-webdriver 中测量加载时间

> ID：15507127
> 
> 赞同：1
> 
> 时间：2013-03-19T18:04:04.680
> 
> 标签：performance, watir-webdriver

我需要通过测量应用程序中点击和导航的加载时间来进行性能测试。我使用了 Watir-webdriver-performance gem。它适用于 Chrome，不支持 firefox。请让我知道有关如何在 Firefox 上执行此操作的任何指导？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T15:52:50.963

我就是这样做的：

```
require 'watir-webdriver-performance'

$response = $browser.performance.summary[:response_time]
$first_byte = $browser.performance.summary[:time_to_first_byte]
$last_byte = $browser.performance.summary[:time_to_last_byte]

def performance_check
    puts ("#{$browser.url}: Response time: #{$response}ms.")

    puts ("#{$browser.url}: Time to first byte: #{$first_byte}ms.")

    puts ("#{$browser.url}: Time to last byte: #{$last_byte}ms.")
end

def test_site_01
  $browser.goto("http://www.google.com/")
  performance_check 
end 
```

请参阅我关于 watir-webdriver-performance gem 的问题。gem 的开发人员会根据第一次/最后一次的时间和响应时间之间的差异做出响应。

[watir-webdriver-performance gem 中的 :response_time、:time_to_first_byte 和 :time_to_last_byte 有什么区别？](https://stackoverflow.com/questions/13711653/what-is-the-difference-between-response-time-time-to-first-byte-and-time-to)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:50:58.293

在我发现性能宝石之前，我也遇到了同样的问题。

我发现只有在加载操作完成时才会出现的元素

并等待它可用：

```
browser.element.present? 
```

我知道这是一个非常粗略的解决方法，但这是我唯一想到的。它为您提供了有关操作时间的粗略估计。

# javascript - 函数中的“this”关键字

> ID：15507128
> 
> 赞同：0
> 
> 时间：2013-03-19T18:04:10.710
> 
> 标签：javascript, function, object, this

取自 ejohn.org：

```
function katana(){ 
  this.isSharp = true; 
} 
katana(); 
assert( isSharp === true, "A global object now exists with that name and value." ); 
```

这是真的。

谁能解释一下？在我们看到的函数内部`this.isSharp = true`，这不是创建了一个`object`应该有属性的`isSharp`，它的值是`true`？（我认为对象是 katana，因为它调用函数，所以`katana.isSharp`会是`true`）。换句话说，究竟`this`指的是什么？

怎么会`isSharp`被创建为对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T18:06:37.000

`this`在 JavaScript 中真的很不稳定。

`this`是根据围绕函数调用的上下文确定的，而不是作为函数的属性。如果这样调用函数：

```
f() 
```

然后`this`将引用全局对象。如您所见，向全局对象添加属性等同于添加全局变量。如果这样调用函数：

```
foo.f() 
```

然后`this`会参考`foo`。例子：

```
> function printx() { console.log(this.x); }
> x = 300
> obj1 = {x: 20, printx: printx};
> obj2 = {x: 50, printx: printx};
> printx();
300
> obj1.printx();
20
> obj2.printx();
50 
```

最后，如果一个函数是这样调用的：

```
new f() 
```

然后创建一个新对象，`this`引用该新对象，并且表达式`new f()`计算为该新对象，或者`f()`if`f()`返回的对象返回一个对象。

这一切都在规范中。很奇怪。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T18:05:43.693

您不使用`new`，函数`this`中的全局对象 ( `window`) 也是如此。

```
katana(); 
```

是真的

```
window.katana(); // the passed context is window 
```

`isSharp===true`这就是实际测试的断言`window.isSharp`返回的原因`true`。

如果要创建 的新实例`katana`，请使用`new katana()`，然后`this`将成为函数内部的新实例，保持`window.isSharp`不变。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T18:07:06.673

> 这不是创建一个应该具有属性 isSharp 的对象，并且它的值是真的吗？

不，因为该函数没有作为构造函数调用。如果你有`var obj = new katana()`，那么你会得到一个带有`isSharp`属性的对象。否则，它只是一个函数调用，那应该`this`是什么？JavaScript 不知道，所以它决定它是未定义的并回退到全局对象（除非在严格模式下）。

在 JavaScript 中确定内部函数的值`this`可能会令人困惑，因为它是动态确定的，取决于函数的调用方式。基本规则是，`this`将是全局对象，除非：

*   该函数被称为对象方法（然后 this 将是对象），或者
*   该函数被称为构造函数，带有 new 运算符（在这种情况下， this 将指向正在构造的新对象）

[有关MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)的更多详细信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T18:08:52.363

`this`指调用的对象上下文。

在您的情况下，它`window.katana();` 是`this`指`window`

# php - htaccess 删除 .php 并保留查询字符串

> ID：15507132
> 
> 赞同：4
> 
> 时间：2013-03-19T18:04:20.707
> 
> 标签：php, .htaccess, get

这是我现在的 .htaccess 文件。

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ $1.php [NC,L,QSA] 
```

这是因为它使我的页面在不使用 .php 扩展名时可以访问。

```
Old = domain.com/test.php
New = domain.com/test 
```

不好的是，当我使用以下链接发送获取数据时，数据没有传递。我认为 QSA 选项可以做到这一点，这是怎么回事？

```
domain.com/test?id=1 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T18:26:09.997

匹配整个查询字符串并使用反向引用将其附加到您的新 URL 应该可以工作。

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{QUERY_STRING} ^(.*)$
RewriteRule ^(.*)$ $1.php?%1 [NC,L,QSA] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-19T21:39:12.557

这是一个更简单的解决方案。我们在团队项目中使用它。它不仅适用于根目录，而且适用于您网站的任何目录。

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T18:08:52.697

如果您通过，`id`那么您必须使用此代码

```
Options +FollowSymLinks
RewriteEngine on
RewriteRule ^test/(.*)$ /test.php?id=$1 
```

现在您可以访问

```
domain.com/test?id=1 
```

从

```
domain.com/test/1 
```

# html - 我的响应式网站上的图像在手机上显示质量低下

> ID：15507133
> 
> 赞同：1
> 
> 时间：2013-03-19T18:04:31.553
> 
> 标签：html, image, mobile, blurry

我正在制作一个响应式工作网站，并设计了一个漂亮的**294x104 (px) 矢量徽标**。我有一个 .PNG、一个 .SVG 和一个 .EPS 文件。

在网站上显示时，相同的图像会缩小到*115x40 (px)*。它在我的桌面上看起来很棒，但是当我在我的 Android 980p 屏幕上加载它时，我注意到图像看起来非常模糊和扭曲。

我一直在搞乱视口，这非常适合我的网站：

```
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0" /> 
```

但它仍然是模糊的。然后，当我将矢量图像的大小调整为 115x40 像素时，它仍然显得模糊。我希望它像在台式机和移动设备上一样清晰。这样做有什么建议？

* * *

![桌面](../Images/c056073ec6aeaf0ded987d3d2c686b56.png) ![移动的](../Images/096ceb05ee9a9db0d020ff1ea1884bc6.png)

# dynamic - Groovy：使用字符串作为路径设置动态嵌套方法

> ID：15507135
> 
> 赞同：5
> 
> 时间：2013-03-19T18:04:34.507
> 
> 标签：dynamic, groovy

我在对象中的对象中有一个对象的路径，我想使用 Groovy 的动态功能来设置它。通常，您只需执行以下操作即可：

```
class Foo {
  String bar
}

Foo foo = new Foo
foo."bar" = 'foobar' 
```

这行得通。但是如果你有嵌套对象呢？就像是：

```
class Foo {
  Bar bar
}

class Bar {
  String setMe
} 
```

现在我想使用动态设置，但是

```
Foo foo = new Foo()
foo."bar.setMe" = 'This is the string I set into Bar' 
```

返回一个 MissingFieldException。

有什么提示吗？

更新：感谢蒂姆为我指明了正确的方向，那里的初始代码在检索属性方面效果很好，但我需要使用路径字符串设置值。

这是我从蒂姆建议的页面中得出的结论：

```
 def getProperty(object, String propertyPath) {
    propertyPath.tokenize('.').inject object, {obj, prop ->
      obj[prop]
    }
  }

  void setProperty(Object object, String propertyPath, Object value) {
    def pathElements = propertyPath.tokenize('.')
    Object parent = getProperty(object, pathElements[0..-2].join('.'))
    parent[pathElements[-1]] = value
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:57:56.660

以下工作正常。

```
foo."bar"."setMe" = 'This is the string I set into Bar'; 
```

如果不覆盖 getProperty，您可以使用 GString 的“${}”语法获得相同的结果，如下面的代码所示

```
class Baz {
    String something
}

class Bar {

    Baz baz

}

class Foo {
    Bar bar
}

def foo = new Foo()
foo.bar = new Bar()
foo.bar.baz = new Baz()

def target = foo
def path = ["bar", "baz"]
for (value in path) {
    target = target."${value}"
}

target."something" = "someValue"
println foo.bar.baz.something 
```

最终 println 按预期打印“someValue”

# android - Android 菜单显示在用户点击的位置

> ID：15507138
> 
> 赞同：1
> 
> 时间：2013-03-19T18:04:37.080
> 
> 标签：android, android-layout, android-4.0-ice-cream-sandwich, android-menu, google-now

我想实现与 Google Now 相同的功能，您可以在其中点击卡片溢出图标，并在其旁边出现一个带有选项的菜单（[如图所示](http://i.imgur.com/R0l8lVU.png)）。

有谁知道如何实现这种东西以实现相同的风格等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:31:47.113

我认为您可以通过在按钮下放置一个列表视图并将其可见性设置为不可见来做到这一点。然后在您的按钮上放置一个 onclicklistener 以将您的可见性变为可见。

# jquery - Jquery body 点击停止切换

> ID：15507139
> 
> 赞同：2
> 
> 时间：2013-03-19T18:04:40.673
> 
> 标签：jquery, click, toggle

我有一个 div 需要在单击按钮时向上/向下设置动画，并且，如果它已向下（或打开）动画，则在单击主体时必须关闭。这很好用，但是如果我使用主体将其关闭，则切换按钮在第一次单击时将不再起作用。我希望有一个简单的解决方法，非常感谢任何帮助，谢谢！

```
$('#button').toggle(function(event){
        event.preventDefault();
        $('#box').animate({top: '0'}, 300);
    },function(event){  
        event.preventDefault();    
        $('#box').animate({top: '-100px'}, 300);
    });

    $("body").click(function(event) {
        if ($(event.target).closest('#box').length === 0) {
            $('#box').animate({top: '-100px'}, 300);
        }
    }); 
```

[http://jsfiddle.net/user1688604/ve7VA/1/](http://jsfiddle.net/user1688604/ve7VA/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:10:54.203

`toggle`不推荐使用事件方法，您可以使用`click`方法代替。使用`click`and 和一个条件语句可以解决这个问题。

```
$('#button').click(function (event) {
    event.preventDefault();
    var $box = $('#box'),
        val = $box.css('top') === '0px' ? '-100px' : '0px';
    $box.stop().animate({
        top: val
    }, 300);
}); 
```

[http://jsfiddle.net/Wdjys/](http://jsfiddle.net/Wdjys/)

# c# - 使用 Autofac 进行流利验证

> ID：15507142
> 
> 赞同：0
> 
> 时间：2013-03-19T18:04:49.610
> 
> 标签：c#, autofac, fluentvalidation

我们刚刚开始使用 FluentValidation 并关注这篇文章以允许我们使用我们的全球化值： http: [//fluentvalidation.codeplex.com/discussions/394471](http://fluentvalidation.codeplex.com/discussions/394471)。

然而，我们被困在如何获得对包含我们现有全球化价值观的翻译服务接口的引用。这包含在一个单独的项目中，因为它不直接与 ASP.NET MVC 耦合，因此我们不能使用 DependencyResolver。

有谁知道我们可以将 Interface 或 autofac 容器放入 TranslationServiceStringSource 类以用于获取翻译值的方法？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-19T19:49:09.427

我假设在某处你有一些类似于：

```
var container = builder.Build();
var resolver = new AutofacDependencyResolver(container);
DependencyResolver.SetResolver(resolver); 
```

如果您将对该容器的引用存储在某处，我通常会在 MvcApplication 类 (global.asax.cs) 中创建一个引用：

```
public static IContainer Container { get; set; } 
```

那么你就可以：

```
public TranslationServiceStringSource(string text) {
    _text = text;
    _translator = new MvcApplication.Container.Resolve<ITranslationService>(); 
} 
```

虽然让翻译服务字符串源由 AutoFac 管理会很好。

# c++ - 在控制台应用程序中显示图像

> ID：15507146
> 
> 赞同：0
> 
> 时间：2013-03-19T18:04:59.743
> 
> 标签：c++, image

我正在编写一个程序，我认为使用图像会更好（我正在创建控制台应用程序）。所以我想知道这是否可能？如果是我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T18:08:22.520

你可以通过[ASCII art](http://en.wikipedia.org/wiki/ASCII_art)来实现，有很多开源库可以将图像转换为 ASCII，例如[libcaca](http://caca.zoy.org/wiki/libcaca)。

![在此处输入图像描述](../Images/5268af55bd8ceb27aceeddcaf993c64f.png)

如果你想使用彩色图像，你可以使用[rlutil](https://stackoverflow.com/a/7881314/952747)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T18:13:43.103

控制台设计为仅显示字符。除了一些[非常粗略的例外](https://stackoverflow.com/a/15507226/5987)，除非您打开另一个窗口，否则无法显示图像。

# php - 使用 PHP 连接到服务器并查看该服务器是否可以 ping 另一台服务器

> ID：15507148
> 
> 赞同：0
> 
> 时间：2013-03-19T18:05:02.903
> 
> 标签：php, network-programming, ping

即使这些是我的服务器，我个人也不知道如何做到这一点。但我想知道我的服务器是否可以访问外部站点——例如 ping 一个通用网站——具有传出通信。也就是说，我想在一台服务器上执行 PHP 脚本，连接到我的另一台服务器，并测试第二台服务器是否可以 ping 一个网站，例如。所以我知道如何在我的脚本正在执行的服务器上使用 PHP 来使用 fopensocket ping 一个网站。我只是不知道如何设置它来测试另一个服务器的 pingability。我的意思是我有凭据，但唯一的方法是在每台服务器上都有我的脚本，然后访问脚本并执行它们。那不是我想要的。我想从一个/外部服务器执行此操作，只需将我要测试的服务器的 ip/port/uid/pwd 提供给我的脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:28:37.163

An easy API would look something like:

SERVER1:

```
// get response from server2
$response = file_get_contents('http://www.server2.com/api.php?method=ping&ip=IP&port=PORT&uid=UID&pwd=PWD');
// do json_decode() if response is json string 
```

SERVER2 (api.php):

```
// respond to API call
if (isset($_GET['method']) && $_GET['method'] == 'ping') {
    // get other params and do your ping function
    echo $pingresult; // perhaps a json encoded array
    exit;
} 
```

There is no security so you could send an API password or do it with OAuth or [HMAC](http://www.layer7tech.com/tutorials/how-to-implement-hmac-api-security)

# javascript - HTML5 应用程序缓存是否相关？

> ID：15507150
> 
> 赞同：3
> 
> 时间：2013-03-19T18:05:10.233
> 
> 标签：javascript, html

这是[htmlrocks 的 2010 年教程](http://www.html5rocks.com/en/tutorials/appcache/beginner/)。

我在我的应用程序中添加了应用程序缓存，并注意到 FireFox 开始请求我存储数据的权限。

这让我注意到 Facebook 和 Twitter 等其他大型网站不使用 HTML5 应用程序缓存。事实上，我想不出还有哪个网站要求我允许存储数据。我猜这是因为其他网站不使用它。

因为它已经存在了很长时间，所以我想知道它是否相关或永远不会真正飞行？

这是[caniuse](http://caniuse.com/#search=app%20ca)。

**更新：**

从我的应用程序中删除。

# javascript - 基本 jQuery .data() 调用返回未定义

> ID：15507157
> 
> 赞同：3
> 
> 时间：2013-03-19T18:05:37.490
> 
> 标签：javascript, jquery, custom-data-attribute

这是以下 HTML：

```
<div style="visibility: hidden;">
 <span id="myId" data-recipientId="2"></span>
</div> 
```

这是jQuery：

```
var recipientId = $("#myId").data("recipientId"); 
```

我注意到这`recipientId`总是***未定义***的......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T18:08:41.303

数据属性是小写的。

```
$("#myId").data("recipientid") 
```

使用它会更正确：

```
<div style="visibility: hidden;">
 <span id="myId" data-recipient-id="2"></span>
</div> 
```

和

```
$("#myId").data("recipientId") 
```

[**小提琴**](http://jsfiddle.net/BTtN8/1/)

# wpf - 如何摆脱 WPF 中项目自己的类的虚假“缺少参考”错误？

> ID：15507161
> 
> 赞同：0
> 
> 时间：2013-03-19T18:05:52.390
> 
> 标签：wpf, visual-studio, xaml, visual-studio-2008

我创建了一个自定义值转换器或其他任何东西，把它放在 XAML 中，它都编译并运行良好，但 Visual Studio 一直显示虚假

```
The type 'local:PortValidationRule' was not found. Verify that you are not
missing an assembly reference and that all referenced assemblies have been built. 
```

错误。它们令人眼花缭乱，并且会在错误列表中发送垃圾邮件，并且往往会弄乱可视化编辑器。我该如何摆脱它们？

我正在运行 Visual Studio 2008 Standard SP1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:19:10.420

为了防止这种情况，唯一的选择是`PortValidationRule`在与使用它的 XAML 文件不同的程序集中定义该类。

# linux - Linux Shell 脚本执行而不保存到临时变量

> ID：15507168
> 
> 赞同：3
> 
> 时间：2013-03-19T18:06:09.077
> 
> 标签：linux, bash

如果我想执行一个包含变量的命令，我总是必须先将字符串存储在一个变量中，然后才能执行它......

例子：

```
path_fasta="/home/xxx/yyy/zzz/qqq/"
name_fasta="CTA_Mix_DNA.fna"
path_outp"/some/Path/"

temp='find . -maxdepth 1 -not -name '$name_fasta' -not -name letsgo.sh -delete'
$temp

temp=$path_mothur'mothur #set.dir(output='$path_outp');summary.seqs(fasta='$path_fasta''$name_fasta')'
$temp 
```

如何直接执行此操作**而不先将其存储在 temp 中**？一定很简单，但没有找到解决方案......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T18:08:25.193

代替：

```
temp='find . -maxdepth 1 -not -name '$name_fasta' -not -name letsgo.sh -delete'
$temp 
```

...只需使用：

```
find . -maxdepth 1 -not -name "$name_fasta" -not -name letsgo.sh -delete 
```

# sql - Openquery 的输出参数

> ID：15507169
> 
> 赞同：0
> 
> 时间：2013-03-19T18:06:09.950
> 
> 标签：sql, sql-server

我需要使用 Openquery 插入一条记录并返回 ID 值，createddate 作为输出参数。

例如。我需要使用 openquery 将客户名称插入远程服务器，然后重新调整客户 ID 值，创建日期作为输出参数。插入语句

插入 OPENQUERY(TestServer, 'select CustomerName from dbo.Customers') 选择 'Testing'

我们如何通过 openquery 实现这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:26:15.137

This is the only way I could get it to work...

```
Insert  Into OpenQuery([Servername],'Select colToPopulate From [Server].[Schema].[Table];')
Select  'ValToAdd'

Select  *
From    OpenQuery([Servername],'Select Ident_Current(''[Server].[Schema].[Table]'')') 
```

SQL was being a punk when trying to use an `OUTPUT` clause.

# django - Django过滤器查询外键

> ID：15507171
> 
> 赞同：32
> 
> 时间：2013-03-19T18:06:18.563
> 
> 标签：django

我正在努力为我的项目获取正确的查询。这是一个示例或我的模型：

```
from django.db import models

class Publisher(models.Model):
    name = models.CharField(max_length=30)
    address = models.CharField(max_length=50)
    city = models.CharField(max_length=60)
    state_province = models.CharField(max_length=30)
    country = models.CharField(max_length=50)
    website = models.URLField()

    def __unicode__(self):
        return self.name

class Author(models.Model):
    first_name = models.CharField(max_length=30)
    last_name = models.CharField(max_length=40)
    email = models.EmailField()

    def __unicode__(self):
        return u'%s %s' % (self.first_name, self.last_name)

class Book(models.Model):
    title = models.CharField(max_length=100)
    authors = models.ManyToManyField(Author)
    publisher = models.ForeignKey(Publisher)
    publication_date = models.DateField()

    def __unicode__(self):
        return self.title 
```

如何从图书类中获取出版商，例如，我想获取所有标题以“hello”开头的图书的所有出版商？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-03-19T18:11:21.887

如果你想获得 Publishers，你必须从`Publisher`. 这意味着您必须向后查询 Book → Publisher 关系。这是文档所说的：

[跨越关系的查找](https://docs.djangoproject.com/en/dev/topics/db/queries/#lookups-that-span-relationships)

> 要跨越关系，只需跨模型使用相关字段的字段名称，用双下划线分隔，直到找到您想要的字段
> 
> ...
> 
> 要引用“反向”关系，只需使用模型的小写名称。

查询：

```
Publisher.objects.filter(book__title__startswith='hello') 
```

# python - 如何从文本数据中获取词袋？

> ID：15507172
> 
> 赞同：20
> 
> 时间：2013-03-19T18:06:22.760
> 
> 标签：python, machine-learning, text-processing

我正在使用大型文本数据集解决预测问题。我正在实施[词袋模型。](http://en.wikipedia.org/wiki/Bag-of-words_model)

获得词袋的最佳方式应该是什么？现在，我有各种单词的[tf-idf](http://en.wikipedia.org/wiki/Tf%E2%80%93idf)，但单词数量太大，无法用于进一步的作业。如果我使用 tf-idf 标准，获取词袋的 tf-idf 阈值应该是多少？或者我应该使用其他一些算法。我正在使用python。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-05-08T19:49:53.793

使用[collections.Counter 类](http://docs.python.org/dev/library/collections#collections.Counter)

```
>>> import collections, re
>>> texts = ['John likes to watch movies. Mary likes too.',
             'John also likes to watch football games.']
>>> bagsofwords = [collections.Counter(re.findall(r'\w+', txt))
                   for txt in texts]
>>> bagsofwords[0]
Counter({'likes': 2, 'watch': 1, 'Mary': 1, 'movies': 1, 'John': 1, 'to': 1, 'too': 1})
>>> bagsofwords[1]
Counter({'watch': 1, 'games': 1, 'to': 1, 'likes': 1, 'also': 1, 'John': 1, 'football': 1})
>>> sumbags = sum(bagsofwords, collections.Counter())
>>> sumbags
Counter({'likes': 3, 'watch': 2, 'John': 2, 'to': 2, 'games': 1, 'football': 1, 'Mary': 1, 'movies': 1, 'also': 1, 'too': 1})
>>> 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2017-09-22T20:50:41.120

词袋可以定义为一个矩阵，其中每一行代表一个文档，列代表单个标记。还有一件事，没有保持文本的顺序。构建“词袋”包括 3 个步骤

1.  标记化
2.  数数
3.  规范化

要记住的限制： 1\. 无法捕捉短语或多词表达 2\. 对拼写错误敏感，可以使用拼写校正器或字符表示来解决这个问题，

例如

```
from sklearn.feature_extraction.text import CountVectorizer
vectorizer = CountVectorizer()
data_corpus = ["John likes to watch movies. Mary likes movies too.", 
"John also likes to watch football games."]
X = vectorizer.fit_transform(data_corpus) 
print(X.toarray())
print(vectorizer.get_feature_names()) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-06-07T08:48:05.973

词袋模型是一种很好的文本表示方法，可以应用于不同的机器学习任务。但在第一步中，您需要从不必要的数据中清理数据，例如标点符号、html 标记、停用词……对于这些任务，您可以轻松利用[Beautiful Soup](https://www.crummy.com/software/BeautifulSoup/bs4/doc/)（删除 HTML 标记）或[NLTK](http://www.nltk.org/)（在 Python 中删除停用词）。清理数据后，您需要创建向量特征（用于机器学习的数据的数值表示），这就是词袋发挥作用的地方。**scikit-learn**有一个模块（**feature_extraction**模块），可以帮助您创建词袋特征。

[您可能会在本教程](https://www.kaggle.com/c/word2vec-nlp-tutorial/details/part-1-for-beginners-bag-of-words)中找到所有您需要的详细信息，这[也](http://radimrehurek.com/data_science_python/)很有帮助。我发现它们都非常有用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-07T09:01:36.587

正如其他人已经提到的那样，`nltk`如果您想要稳定且可扩展的东西，那么使用将是您的最佳选择。它是高度可配置的。

但是，如果您想调整默认值，它的缺点是学习曲线非常陡峭。

我曾经遇到过想要一袋话的情况。问题是，它涉及有关技术的文章，这些技术具有充满异国情调的名称`-`，`_`等等。例如`vue-router`或`_.js`等。

例如，nltk 的默认配置`word_tokenize`是拆分`vue-router`为两个单独`vue`的`router`单词。我什至不谈论`_.js`。

因此，为了它的价值，我最终编写了这个小例程`list`，根据我自己的标点符号标准将所有单词标记为 a 。

```
import re

punctuation_pattern = ' |\.$|\. |, |\/|\(|\)|\'|\"|\!|\?|\+'
text = "This article is talking about vue-router. And also _.js."
ltext = text.lower()
wtext = [w for w in re.split(punctuation_pattern, ltext) if w]

print(wtext)
# ['this', 'article', 'is', 'talking', 'about', 'vue-router', 'and', 'also', '_.js'] 
```

这个例程可以很容易地与 Patty3118 answer about 结合使用，例如，这可以让您知道文章中提到`collections.Counter`的次数。`_.js`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-17T18:56:06.157

从一本书“机器学习python”中：

```
import numpy as np
from sklearn.feature_extraction.text import CountVectorizer
count = CountVectorizer()
docs = np.array(['blablablatext'])
bag = count.fit_transform(docs) 
```

# javascript - 如何知道什么 javascript 文件操作像“javascript:void(0)”这样的代码？

> ID：15507174
> 
> 赞同：0
> 
> 时间：2013-03-19T18:06:23.173
> 
> 标签：javascript, html, debugging, breakpoints

我需要帮助来调试代码。如果我们有这样的代码：

```
<a href="javascript:void(0)">My link</a> 
```

我怎么知道是什么 javascript 文件操纵了对这个元素的点击？我正在尝试搜索 js 可用文件，但我找不到操纵点击的文件。这个手动搜索的过程非常烦人和缓慢。

我怎么知道是什么 js（文件，行）操纵这样的代码？

# c# - 从选项卡控件中删除时，用户控件未完成

> ID：15507175
> 
> 赞同：0
> 
> 时间：2013-03-19T18:06:24.177
> 
> 标签：c#, wpf, garbage-collection

我已经实现了 WPF `UserControl`。此实现包括析构函数。

如果我将此控件作为窗口的一部分，然后销毁此窗口，然后强制垃圾回收（GC.Collect()），则调用析构函数。

如果我将此控件添加到 a 中，`TabItem`然后将其添加到 a中，然后从 中`TabControl`删除它，然后强制垃圾回收（GC.Collect()），则不会调用析构函数。`TabItem``TabControl`

澄清：

这是添加选项卡项的代码：

```
 TabItem tabItem = new TabItem();
            tabItem.Header = "User";
            UserControl1 userControl1 = new UserControl1();
            tabItem.Content = userControl1;
            userControl1.Width = Double.NaN;
            userControl1.Height = Double.NaN;
            userControl1.HorizontalAlignment = System.Windows.HorizontalAlignment.Stretch;
            userControl1.VerticalAlignment = System.Windows.VerticalAlignment.Stretch;
            tc1.Items.Add(tabItem); 
```

这是删除它的代码：

```
 TabItem item = tc1.SelectedItem as TabItem;
            if (item != null)
            {
                item.Content = null;
                tc1.Items.Remove(item);
            } 
```

鉴于不应再有任何对 TabItem 或 UserControl1 的引用，我希望为 UserControl1 调用析构函数。

这显然不是这样，所以我的下一个问题是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:07:18.903

除非您的类拥有非托管资源，否则不应依赖或使用析构函数。

在您的示例中，诸如事件订阅者之类的东西可能持有对 TabItem 的引用，从而阻止它进行垃圾收集。

# scroll - 如何滚动到打开的div

> ID：15507176
> 
> 赞同：1
> 
> 时间：2013-03-19T18:06:26.740
> 
> 标签：scroll

HTML：

```
<a class="targetLink" href="#">LINK1</a>
<div id="text1" style="display: none;">text1 div</div>

<a class="targetLink" href="#">LINK2</a>
<div id="text2" style="display: none;">text2 div</div>

<a class="targetLink" href="#">LINK3</a>
<div id="text3" style="display: none;">text3 div</div> 
```

JS：

```
$("a.targetLink").toggle(function() {
    $(".open").slideUp(350);
    $(this).next("div").slideDown(350).addClass("open");
}, function() {
    $(this).next("div").slideUp(350).removeClass("open");
}); 
```

它是这样工作的：当你按下一个带有“targetLink”类的链接时，它会在它下面打开一个 DIV。现在我需要将 js 代码修改为：当我单击然后链接时，它会滚动到打开的 div 的开头。我怎样才能实现它？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:25:25.320

Use scrollTop on the element that you want to scroll to the top of. [http://api.jquery.com/scrollTop/](http://api.jquery.com/scrollTop/)

example:

```
$(this).next("div").scrollTop(0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-03T02:45:54.463

试试这个非常棒且简单的 jQuery 插件 - [https://github.com/Ashwell/jquery-scrollThis](https://github.com/Ashwell/jquery-scrollThis)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-22T11:49:01.713

这应该可以满足您的要求：

```
self.scrollToDiv = function scrollToDiv(element,minus){
    element = element.replace("link", "");
    if(minus==null){
        minus=0;
    }
    $('html,body').unbind().animate({scrollTop: $(element).offset().top+minus},'slow');
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T12:34:23.563

我认为这是您需要的，也许更多：[**我的 jsfiddle**](http://jsfiddle.net/tpressley1/fccCJ/59/)。我不确定到目前为止你在做什么，但这就是我认为你想要的，不需要额外的 jquery 插件等。

这是 JS（检查 jsfiddle 的 html）：

```
$(".pop").hide();
$(".targetLink").on("click", function(e) {
    e.preventDefault();
    var n = $(this).next();
    if(!$(n).hasClass('open')){ 
        $(".open").removeClass('open').slideUp(200);
        $(n).addClass('open').slideDown(200); 
    } 
});

$(".nav").on("click", function(event){
    event.preventDefault(); 
    var dest=null;
    if(($($(this.hash)).offset().top) > ($(document).height()-$(window).height())){
        dest= $(document).height()-$(window).height();
    }else{
        dest=$($(this.hash)).offset().top;
    }
    $($(this.hash)).trigger("click");
    $('html,body').animate({scrollTop:dest}, 500, 'swing' );

}); 
```

# java - Java 数组索引越界异常

> ID：15507177
> 
> 赞同：0
> 
> 时间：2013-03-19T18:06:27.647
> 
> 标签：java, arrays, bounds, out

当我需要将 5 个用户输入的值存储到一个数组中，将其发送到一个方法，并找到并显示最小值时，我一直在研究这个基本的 java 程序。

该程序很简单，并且可以运行，但是当我输入最后一个数字时，出现错误：

线程“main”中的异常 java.lang.ArrayIndexOutOfBoundsException: 4 at minNumber.main(minNumber:14)

帮助？

```
import java.util.*;

class minNumber {

    public static void main(String args[]){

    Scanner input = new Scanner(System.in);

    int numberArray[] = new int[4];
    int findLowest;

    for (int i = 0; i <= numberArray.length; i++){
        System.out.println("Enter a value for slot "+(i+1)+ ":");
        numberArray[i] = input.nextInt();   
    }
    findLowest = getMin(numberArray);
    displayOutput(findLowest);
}

public static int getMin(int num[]){

int lowestNum = 0;
for (int j = 0; j <= num.length; j++){
    if (num[j] < num[j+1]){

        lowestNum = num[j];
    }
}
return lowestNum;
}

public static void displayOutput(int lowest){

System.out.println("The lowest number is: "+lowest);
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T18:08:11.677

首先，如果你想要一个数组中有 5 个值，那么用 5 声明它：

```
int numberArray[] = new int[5]; 
```

其次，你要离开阵列的末端。改变

```
for (int i = 0; i <= numberArray.length; i++){ 
```

至

```
for (int i = 0; i < numberArray.length; i++){ 
```

您还需要以`j` `for`这种方式更改其他循环。

`getMin`顺便说一句，除了我上面提到的更改之外，您的方法还需要进行另一项更改，因为`num[j+1]`即使您进行了上述更改，说仍然会超出数组的末尾。我认为您需要比较当前数组元素与`lowestNum`，而不是下一个数组元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:09:26.090

删除两个循环中的 =。

```
public static void main(String args[]){
   .......
   for (int i = 0; i < numberArray.length; i++){
       ........
   }
   .........
} 
```

和

```
public static int getMin(int num[]){
 .....
   for (int j = 0; j < num.length -1 ; j++){

   }
   ....
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T18:07:52.550

`<= numberArray.length`应该成为 `< numberArray.length`

因为数组是 0 索引的。

# python - Python：赋值错误之前引用的局部变量

> ID：15507179
> 
> 赞同：2
> 
> 时间：2013-03-19T18:06:31.877
> 
> 标签：python, boids

我一直有错误

> UnboundLocalError：分配前引用的局部变量“new_speedDx”

在尝试运行以下功能时：

```
def new_speedD(boid1):
    bposx = boid1[0]
    if bposx < WALL:
        new_speedDx = WALL_FORCE
    elif bposx > WIDTH - WALL:
        new_speedDx = -WALL_FORCE

    bposy = boid1[1]
    if bposy < WALL:
        new_speedDy = WALL_FORCE
    elif bposx > WIDTH - WALL:
        new_speedDy = -WALL_FORCE

    return new_speedDx, new_speedDy 
```

在这个函数中，boid1 是一个有 4 个元素（xpos、ypos、xvelocity、yvelocity）的向量，所有大写的变量都是常数（数字）。有人知道如何解决这个问题吗？我在互联网上找到了许多可能的解决方案，但似乎没有任何效果..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T18:10:56.673

bposx 必须有可能既不小于 WALL 也不大于 WIDTH - WALL。

例如：

```
bposx = 10
WALL = 9
WIDTH = 200

if bposx < WALL:    # 10 is greater than 9, does not define new_speedDx 
    new_speedDx = WALL_FORCE
elif bposx > WIDTH - WALL:   # 10 is less than (200 - 9), does not define new_speedDx
    new_speedDx = -WALL_FORCE 
```

如果没有看到程序的其余部分，很难建议一个合理的后备值，但您可能想要添加如下内容：

```
else:
    new_speedDx = 0 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T18:10:40.147

如果这些条件都不成立，会发生什么？

```
if bposx < WALL:
    new_speedDx = WALL_FORCE
elif bposx > WIDTH - WALL:
    new_speedDx = -WALL_FORCE 
```

...`new_speedDx`从未分配过，因此它的值是不确定的。

您可以通过指定`new_speedDx`在这种情况下应该是什么来缓解这种情况：

```
if bposx < WALL:
    new_speedDx = WALL_FORCE
elif bposx > WIDTH - WALL:
    new_speedDx = -WALL_FORCE
else:
    new_speedDx = 0. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T18:27:07.270

# 解释

正如其他人指出的那样，您没有处理`WALL <= pos <= WIDTH - WALL`.

# 建议更改

据推测，如果小体没有撞到墙壁，它会以当前速度继续​​前进。如果 boid 没有撞到墙上，其他人的代码会将速度设置为 0。该解决方案在使用现有速度方面是独特的。我认为这对你的情况很重要。

# 代码

```
def new_speedD(boid1):
    def new_speed(pos, velocity):
        return WALL_FORCE if pos < WALL \
            else (-WALL_FORCE if pos > WIDTH - WALL \
            else velocity)
    xpos, ypos, xvelocity, yvelocity = boid1
    new_speedDx = new_speed(posx, xvelocity)
    new_speedDy = new_speed(posy, yvelocity)
    return new_speedDx, new_speedDy 
```

有些人认为这段代码很难理解。下面是一个简短的解释：

1.  如果 pos < WALL，则返回 WALL_FORCE
2.  否则，如果 pos > WIDTH - WALL，则返回 -WALL_FORCE
3.  否则，返回速度

这是[关于三元运算符的一般问题](https://stackoverflow.com/questions/394809/ternary-conditional-operator-in-python)。记住，想，“它被一些 pythonistas 所反对。”

# 如果您不使用此代码...

返回您的原始文件并修复错字`yvelocity`以防万一：`bposx > WIDTH - WALL`。`yvelocity`不依赖`xpos`于.

# c - x86_64处理器的sync(2) Linux函数调用的定义在哪里

> ID：15507185
> 
> 赞同：3
> 
> 时间：2013-03-19T18:06:42.970
> 
> 标签：c, linux, linux-kernel, glibc, libc

我正在尝试查找*unistd.h*标头中声明的 Unix 函数的**Linux 3.2.21 x86_64**实现。查看 Linux *unistd.h*会产生这个原型：[`sync(2)`](http://linux.die.net/man/2/sync)

 **```
/* Make all changes done to all files actually appear on disk.  */
extern void sync (void) __THROW; 
```

所以我认为这意味着它`sync`是在 Linux 内核之外定义并在**glibc 2.7**内部定义的，这给了我在[*glibc-2.17/misc/sync.c*](http://fossies.org/dox/glibc-2.17/misc_2sync_8c_source.html)中的定义：

```
/* Make all changes done to all files actually appear on disk. */
void
sync ()
{
  __set_errno (ENOSYS);
} 
```

所以这意味着`sync`除了设置`errno`.

但是，当我在系统上反汇编**/usr/lib/x86_64-linux-gnu/libc.a**时，我发现*同步*部分进行了系统调用，并传递了值`162`（所以它正在做某事）。

[在arch/x86/include/asm/unistd_64.h](http://lxr.free-electrons.com/source/arch/x86/include/asm/unistd_64.h?v=3.2#L370)再次查看 Linux 源代码，我看到：

```
#define __NR_sync               162
__SYSCALL(__NR_sync, sys_sync) 
```

现在我真的很困惑。

如果`sync(2)`是在 Linux 之外定义的，为什么会有系统调用呢？`sync`x86_64 架构的定义在哪里？

**PS**：我确实`__SYSCALL`在[arch/x86/kernel/syscall_64.c](http://lxr.free-electrons.com/source/arch/x86/kernel/syscall_64.c?v=3.2#L10)找到了预处理器定义，但这似乎意味着`sync`系统调用只是调用了一个声明为`void sys_sync(void)`. 这个函数的定义在哪里？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T18:15:24.010

您正在寻找`fs/sync.c`. 看：

```
SYSCALL_DEFINE0(sync)
{
... 
```

* * *

您发布的`glibc`版本可能是在内核不公开`sync`系统调用的非常尴尬的情况下编译的。换句话说，它是一个几乎从未使用过的存根。**

# java - 从小部件打开应用程序

> ID：15507188
> 
> 赞同：0
> 
> 时间：2013-03-19T18:06:47.607
> 
> 标签：java, android, widget

我有一个小部件，但我不确定如何通过单击它来打开一个应用程序。我在布局上设置了一个ID，所以布局上有一个setOnClickPendingIntent监听器。目前，我不确定我在做什么，但到目前为止这是我的代码..

```
 //Intent to open app on click
    Intent intent = new Intent(context, AddPersonActivity.class);
    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, intent, 0, null);
    widgetview.setOnClickPendingIntent(R.id.mainwidget, pendingIntent);
    widgetview.setOnClickPendingIntent(R.id.widget_logo, pendingIntent); 
```

我的清单目前是这样的

```
 <receiver
        android:name=".MyWidgetProvider"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
        </intent-filter>

        <meta-data
            android:name="android.appwidget.provider"
            android:resource="@xml/widget_info" />
    </receiver> 
```

我不知道，请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:17:28.610

```
Intent active = new Intent(context, ExampleProvider.class);
    active.setAction(ACTION_WIDGET_REFRESH);
    PendingIntent actionPendingIntent = PendingIntent.getBroadcast(context, 0, active, 0);
    widgetview.setOnClickPendingIntent(R.id.mainwidget, actionPendingIntent); 
```

# ajax - 以编程方式获取由项目显示动态视图显示的 portlet 的 portlet 分配

> ID：15507191
> 
> 赞同：1
> 
> 时间：2013-03-19T18:06:53.757
> 
> 标签：ajax, plone, portlet

在 ajax 回调浏览器视图中更新文件系统上开发的自定义 portlet 我有以下代码来检索生成 ajax 请求的 portlet 的关联 portlet 分配：

```
def getPortletById(self, content, portletManager, key, name):
    manager = getUtility(IPortletManager, name=portletManager, context=content)
    retriever = getMultiAdapter((content, manager,), IPortletRetriever)

    print "getPortletById:  ",content, portletManager, key, name
    print "iterating portlet assignements:"
    for assignment in retriever.getPortlets():
        print assignment["key"], assignment["name"]
        if assignment["key"] == key and assignment["name"] == name:
            return assignment["assignment"]
    return None

def getPortletManager(self, column):
    manager = getUtility(IPortletManager, name=column)
    return manager

def render(self):
    print "refreshment of moonphase portlet"
    content = self.context.aq_inner

    print self.context
    name = self.request.form.get("portletName")
    managername = self.request.form.get("portletManager")
    key = self.request.form.get("portletKey")

    print name, managername, key
    portlet = self.getPortletById(content, managername, key, name)
    manager = self.getPortletManager(managername)
    managerRenderer = manager(content, self.request, self)
    renderer = managerRenderer._dataToPortlet(portlet.data)
    renderer.update()
    return renderer.render() 
```

只要将生成请求的 portlet 直接分配给内容或其父文件夹并显示出来，这种方法就可以很好地工作。但是，当我将文件夹的默认视图设置为分配给它的 portlet 的内容项时，迭代不会找到在页面上呈现的 portlet 作为默认文件夹视图的一部分。

```
<PloneSite at naturfreundeskreis>
moonphase-portlet plone.rightcolumn /naturfreundeskreis/naturfreundeskreis
getPortletById:   <PloneSite at naturfreundeskreis> plone.rightcolumns /naturfreundeskreis/naturfreundeskreis moonphase-portlet
iterating portlet assignements
/naturfreundeskreis calendar
2013-03-19 13:48:31 ERROR Zope.SiteErrorLog 1363715311.150.739587723624 http://midgard.user.openhosting.com:8280/naturfreundeskreis/@@refreshMoonphase
Traceback (innermost last):
Module ZPublisher.Publish, line 126, in publish
Module ZPublisher.mapply, line 77, in mapply
Module ZPublisher.Publish, line 46, in call_object
Module kuehnel.portlets.moonphase.moonphaseview, line 21, in __call__
Module kuehnel.portlets.moonphase.moonphaseview, line 59, in render
AttributeError: 'NoneType' object has no attribute 'data' 
```

最初的 portlet 呈现过程确实以某种方式找到了 portlet，因为它被显示并生成了请求。但是我不能。我做错了什么？

使用浏览器视图传递 ajax 请求的内容片段是一种好习惯吗？

我将在一天结束时在[https://github.com/tdkuehnel/kuehnel.portlets.moonphase](https://github.com/tdkuehnel/kuehnel.portlets.moonphase)更新整个 portlet 的 github 存储库，以反映当前的开发状态。

在 Centos 上构建 Plone 4.2.4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T01:51:34.237

好的，我有问题。

Portlet 渲染机器被启动了两次*它看起来*要渲染

*   a：当前文件夹的portlet

*   b：该文件夹上设置为 default_page 的文档的 portlet

不知何故。我不确切知道机器如何避免在此过程中再次呈现*父*portlet，但这条信息本身足以在浏览器视图中调整我的 ajax 回调例程，如下所示：

```
def render(self):
    ...
    portlet = self.getPortletById(content, managername, key, name)
    if not portlet:
        # let's try to find it assigned on the default_page view
        defaultpage = getattr(content,getattr(content,"default_page",None),None)
        if defaultpage:
            portlet = self.getPortletById(defaultpage, managername, key, name)
            content = defaultpage
        else:
            logger.warn('cannot find an assignment for a portlet of type %s in ajax update request' % name)
            return None
    ... 
```

现在可以了。但我想知道开发人员是否真的需要在他们的代码中处理这种特殊情况，并使用所有适配器和接口的东西来*处理*所有事情。我怎么知道有人开发了什么 PortletManagers 和/或 Retrievers 来显示我的 portlet。我无法处理*甚至没有开发*的特殊情况，所以我想我在 find-the-way-to-my-portlet 代码中遗漏了一些东西. 希望吧。或者需要调整 portlet 机制。有人请对此有所了解。

# c# - 代表缺少整个文本 C# 的循环

> ID：15507193
> 
> 赞同：-2
> 
> 时间：2013-03-19T18:07:02.983
> 
> 标签：c#, delegates

这段代码没有给我我期望的结果。

经过一番研究，我发现在循环中使用委托时，您必须捕获计数器的值——如通过`inneri`and所见`innerj`。但是，由于某种原因，我`for`的 j 循环`,`字符串`stringThisRoll`只有掷骰子的前两个数字。

我似乎无法弄清楚为什么会这样。给出的`intThisRoll`数字与应掷骰子的数量正确，但`stringThisRoll`并没有全部。

我在stackoverflow上查看了其他一些问题，但似乎没有一个可以解决这个问题，只是需要捕获计数器。

谢谢

这是我的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace Better_Betrayal_Dice_Roller
{
    public partial class Form1 : Form
    {
        TextBox txtBox = new TextBox();
    List<Button> buttons = new List<Button>();
    List<Label> labels = new List<Label>();

    public Form1()
    {
        int NumberOfOptions = 9;

        /*Makes the controls*/
        for (int i = 0; i < NumberOfOptions; i++)
        {
            Button tmpButton = new Button();
            Label tmpLabel = new Label();

            buttons.Add(tmpButton);
            labels.Add(tmpLabel);
        }
        /*Add the controls to the form*/
        for (int i = 0; i < NumberOfOptions; i++)
        {
            buttons[i].Visible = true;
            labels[i].Visible = true;

            buttons[i].Text = "Roll " + (i + 1).ToString();
            labels[i].Text = "Please Roll";

            buttons[i].Location = new Point(10, (30 * i) + 10);
            labels[i].Location = new Point(100, (30 * i) + 15);

            labels[i].Size = new Size(100, 20);

            this.Controls.Add(buttons[i]);
            this.Controls.Add(labels[i]);
        }

        /*delegates for the buttons*/
        for (int i = 0; i < NumberOfOptions; i++)
        {
            int inneri = i;
            int numberOfDice = inneri + 1;

            buttons[i].Click += delegate(Object send, EventArgs e)
            {
                labels[inneri].Text = "";
                string stringThisRoll = "";
                int intThisRoll = 0;
                var tempResults = diceResults(inneri+1);
                for (int j = 0; j < tempResults.Count; j++)
                {
                    int innerj = j;
                    intThisRoll += tempResults[innerj];
                    stringThisRoll += tempResults[innerj].ToString() + " ";
                }
                labels[inneri].Text = intThisRoll.ToString();
                labels[inneri].Text += " Made of: " + stringThisRoll;
                //MessageBox.Show(inneri.ToString());
                //labels[inneri].Text += "Last one: " + tempResults[tempResults.Count-1].ToString();
            };
        }
        InitializeComponent();
    }

    List<int> diceResults(int numDice)
    {
        Random rnd = new Random();
        List<int> resultList = new List<int>();
        int total = 0;
        for (int i = 0; i < numDice; i++)
        {
            resultList.Add(rnd.Next(0, 3));
        }
        return resultList;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:51:37.790

> intThisRoll 给出的数字与应该掷出的骰子数相符，但 stringThisRoll 并没有全部。

确保标签控件足够大。

```
 //labels[i].Size = new Size(100, 20);
   labels[i].AutoSize = true; 
```

# javascript - 有条件的可滚动 Div

> ID：15507196
> 
> 赞同：0
> 
> 时间：2013-03-19T18:07:10.717
> 
> 标签：javascript, jquery, html, scroll

我有一个可滚动的 div，它通过 Jquery 附加了数据。我试图让它仅在某些条件下自动滚动到底部。

*   首次加载数据（.append）时，它应该滚动到底部。
*   当 div 滚动到底部时，它应该在每个 .append 之后保持在 div 的底部
*   当 div 不在底部并且加载后（.append）它不会滚动。

我发现了很多关于如何在每次加载数据时将 div 保持在底部的主题，但我还没有找到与第三个条件相关的任何内容。如果有人能指出我正确的方向，将不胜感激。

**更新**

这是我现在所拥有的，它工作得很好，但是如果你在顶部阅读一些东西，它会让你失望，非常烦人：

```
$("#chatroom").scrollTop($("#chatroom")[0].scrollHeight); 
```

如果我能告诉滚动条在哪里，似乎我可以做一个 if 语句并阻止它在滚动条不在底部时执行。

**更新#2**

我发现了一个似乎对我不起作用的脚本 XD；它似乎适用于其他人。我正试图让它立即工作。经过测试，如果您不移动滚动条，它似乎可以工作，如果您移动滚动条，那么 IF 永远不会返回 true 并且永远不会移动到底部。

```
function divbottom() {
              var chatroom = document.getElementById (chatroom);
              if (chatroom.offsetHeight + chatroom.scrollTop >= chatroom.scrollHeight) {
                $("#chatroom").scrollTop($("#chatroom")[0].scrollHeight);
              }
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T00:33:16.403

解决方案是使用 height、scrollTop 和 scrollHeight 属性（正如您在第二次更新中所说）。

但是，请务必在添加内容**之前获取这些值：**

```
var height = $("#chatroom").height(),
    scrollTop = $("#chatroom")[0].scrollTop,
    scrollHeight = $("#chatroom")[0].scrollHeight;
$("#chatroom").html($("#chatroom").html() + content);
if(height + scrollTop >= scrollHeight) {
    divbottom();
} 
```

[这是jsfiddle](http://jsfiddle.net/487RA/)的一个工作脚本，可以满足您的需求（在 Firefox、Chromium 和 Opera 上测试）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-13T18:39:56.433

为了扩展 antoyo 的答案......我会小心这一行：

```
$("#chatroom").html($("#chatroom").html() + content); 
```

我最近也在做类似的事情。您可以通过这种方式快速使浏览器崩溃。我建议这样做：

```
$("#chatroom").append(content); 
```

# mongodb - 如何在 MongoDB 中实现缓存？

> ID：15507203
> 
> 赞同：2
> 
> 时间：2013-03-19T18:07:31.727
> 
> 标签：mongodb, caching

我正在研究一个现有的应用程序，它的设计方式是，即使对于一些静态数据，它也会查询 MongoDB。（已对 MongoDB 集合进行索引），由于此应用程序很慢。

（MongoDB中数据量很大，我们使用的Mongo DB版本是2.1）

我已阅读有关 MongoDB 缓存的信息，但我不确定如何实现它？

请让我知道如何在 Mongo DB 中进行缓存？

请提出解决此问题的更好方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:18:41.760

您是否尝试过使用[覆盖查询](http://docs.mongodb.org/manual/applications/indexes/#create-indexes-that-support-covered-queries)？

**涵盖的查询**是一种查询，其中 ：

*   查询中的所有字段都是索引的一部分，并且*   结果中返回的所有字段都在同一个索引中。

`config`或者，只要不是密码，您就可以维护用于存储静态数据的文件。[YAML](http://www.yaml.org/)很容易上手。

# sql - 没有按 SELECT 中的所有非聚合列分组的 HAVING 子句

> ID：15507204
> 
> 赞同：1
> 
> 时间：2013-03-19T18:07:33.283
> 
> 标签：sql, sas, proc-sql

在没有按所有非聚合列分组的 HAVING 子句中，`SELECT` 我经常遇到具有 id 列和月份列以及许多其他指标的表。我根据其他列清除了某些行。我只想识别拥有所有 12 个月数据的 ID，所以我执行以下操作：

```
proc sql;
   create table t as
   SELECT *
   FROM  T1
   GROUP BY id
   HAVING COUNT(id) = 12
quit; 
```

它似乎对我有用，但我想知道这种方法是否有任何危险。我知道我可以加入只有 id 和 id 计数的聚合子查询，但是这种方法更容易向非 sql 用户解释。

一般来说，您可以使用`HAVING`仅在语句中包含几个列`GROUP BY`且在语句中没有聚合函数的子句`SELECT`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:23:34.307

这取决于数据库。在我的一个（红砖）上，您提出的查询将引发错误。为了让它发挥作用，我必须改变

```
select * 
```

至

```
select id. 
```

但是，您可能有错误的动机。我通常对获得正确答案的最有效方法感兴趣。对我自己和其他任何可能需要维护它的人来说清楚也很重要，但对非专业人士来说清楚并不是我的优先事项之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-20T10:04:14.540

```
select t.* from (
  select id
  from T1
  group by id
  having count(id) = x) as g
left join T1 as t
on t.id = g.id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T19:19:29.703

使用 GROUP BY 子句时，所选值*必须*¹来自为组选择的列之一或聚合函数的结果。这是因为在关系代数模型中不能保证将选择哪条记录——一些 SQL 方言，例如 SQL Server，会拒绝这样的构造并出现错误！

现在，假设我们希望*所有记录*负责使该条件成立（即“选择非分组/聚合列”），我们可以使用连接。连接是处理这种展示 RA 的一种简单方法，但不同的数据库可能支持具有不同构造的相同结果。

```
select t.* from (
  select id
  from T1
  group by id
  having count(id) = x) as g
left join T1 as t
on t.id = g.id 
```

但是，这与以下*不同*（在 SQL Server 中无效）：

```
select * -- ONLY the id column value is "well-defined" !!
from T1
group by id
having count(id) = x 
```

*因为在后一种情况下，每组*只选择一个记录。这也是为什么只使用定义组或从该组聚合的列才有意义的原因。

* * *

¹这并不总是强制执行（取决于实施）或要求（取决于具体情况），但我一直喜欢可预测的结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T14:59:34.740

SAS 将允许您这样做，当然，在其 SQL 实现中（您的标签表明您正在使用 SAS 的实现）。您将在日志中收到一条注释：

`NOTE: The query requires remerging summary statistics back with the original data`.

`pst`SAS 实际上执行与's answer中相同的查询：

```
select t.* from (
  select id
  from T1
  group by id
  having count(id) = x) as g
left join T1 as t
on t.id = g.id 
```

在幕后。没有技术原因不这样做，除非您在工作现场要求拥有干净的日志（在这种情况下您不会）。这不是非常冒险，但同时，为什么不明确地写加入呢？

# jquery - Jquery 验证器未运行

> ID：15507209
> 
> 赞同：1
> 
> 时间：2013-03-19T18:07:51.287
> 
> 标签：jquery, validation

我绝不是专家，但我以前做过，由于某种原因，我的表格这次没有验证存在问题。

我在另一个页面上做了这个，它工作得很好，所以我只是把它剪切粘贴到另一个部分并做了一些小的改动，现在它停止工作了。

这是我的[小提琴](http://jsfiddle.net/hsSQY/)，欢迎任何提示。

html:

```
<form action="" id="ad_brochure_form" method="post" enctype="multipart/form-data" language="JavaScript" name="FrontPage_Form2">
    <fieldset>
        <legend style="margin-left:8em;" class="big">Contact Information</legend>
        <p id="required">All Fields Are Required</p>

        <label>First Name</label><input placeholder=" Jane or John" id="firstname" name="firstName" size="25" style="border: 1px solid #FFFFFF; width: 235px;" tabindex="1" type="text" />                                  
        <label>Last Name</label><input placeholder=" Doe" id="lastname" name="lastName" size="25" style="border: 1px solid #FFFFFF; width: 235px;" tabindex="1" type="text" />                                    
        <label>Title</label><input placeholder="RN" id="firsttitle" maxlength="100" name="title" size="50" style="border: 1px solid #FFFFFF; width: 235px;" tabindex="2" type="text" />                                     
        <label>Email</label><input placeholder=" example@example.com" id="firstemail" maxlength="100" name="email" size="50" style="border: 1px solid #FFFFFF; width: 235px;" tabindex="2" type="text" />                                 
        <label>Work Phone</label><input placeholder=" 000-0000" id="firstphone" maxlength="100" name="phone" size="50" style="border: 1px solid #FFFFFF; width: 102px;" tabindex="3" type="text"/>

     </fieldset>
     <fieldset>
         <legend style=" margin-left:12em;">Facility Information</legend>

         <label>Facility Name</label><input maxlength="100" id="firstfacility" placeholder=" NIFA" name="facility" size="50" style="border: 1px solid #FFFFFF; width: 232px;" tabindex="4" type="text" />                               
         <label>Address</label><input maxlength="100" id="firstaddress" placeholder=" 555 Example St." name="address" size="50" style="border: 1px solid #FFFFFF; width: 232px;" tabindex="4" type="text" />                                
         <label>City</label><input placeholder=" City" id="firstcity" name="city" size="20" style="border: 1px solid #FFFFFF; width: 232px;" tabindex="5" type="text" />                                    
         <label>State</label><input placeholder=" State" id="firststate" name="state" size="20" style="border: 1px solid #FFFFFF; width: 232px;" tabindex="5" type="text" />                        
         <label>Zip</label><input placeholder=" 00000" id="firstzip" name="zip" style="border: 1px solid #FFFFFF;" tabindex="7" type="text" />

     </fieldset>
     <input id="brochure_submit" name="Submit" tabindex="8" type="submit" value="Submit" /> 
 </form> 
```

JavaScript：

```
$(document).ready(function () {
    console.log("test");

    $('#ad_brochure_form >form').validate({
        errorPlacement: function (error, element) {
            error.insertAfter(element);
        },
        errorElement: "em",
        rules: {
            firstname: {required: true},
            lastname: {required: true},
            firsttitle: {required: true},
            firstphone: {required: true,
            firstfacility: {required: true},
            firstaddress: {required: true},
            firstcity: {required: true},
            firststate: {required: true},
            firstzip: {required: true},
            firstemail: {required: true, email: true}
        },
        messages: {
            firstname: {required: "Please enter your first name<br />"},
            lastname: { required: "Please enter your first name<br />"},
            firstaddress: {required: "Please enter your street address<br />"},
            firstcity: {required: "Please enter the city in which the facility is <br />"},
            firststate: {required: "Please enter the state"},
            firstfacility: {required: "Please enter a facility name<br />" },
            firstzip: { required: "Please enter the zipcode of the facility<br />"},
            firstemail: {email: "Please enter a valid email<br />",required: "A valid email is required<br />"},
            firstphone: {required: "Please enter a valid number<br />"}
        },
        success: function (element) {
            element.remove();
        }
    });
}); 
```

# c# - IIS7 上的 WCF 服务是否能够处理服务器文件系统？

> ID：15507210
> 
> 赞同：0
> 
> 时间：2013-03-19T18:07:51.617
> 
> 标签：c#, .net, wcf, iis-7, filesystems

我有一个 winservice，监听 MSMQ 并调用 .Net 命令行进程，我想将与这两者（WinService 和 CommandLine）关联的代码迁移到 WCF 服务。

与 WinService 关联的代码不是问题（我认为），除了*MSMQ 侦听*我不确定如何从服务中执行此操作。（很可能我仍然需要 WinService 来调用 WCF Svc）

我发现自己不知道的问题是处理命令行相关代码的文件系统。

在里面我

*   从数据库下载重的东西 (>50mb)
*   创建目录（或*工作文件夹*和*子文件夹*），
*   建立拉链，
*   并使用 SVN 应用程序下载和/或上传内容...
*   （除其他外它确实......）

处理完所有内容后，删除服务器工作文件夹中剩余的内容。

**我还能做这一切吗？**如果可以的话，**你能给我从 IIS7/IIS7.5 上的 WCFSvc 处理文件系统的例子吗？**

*（顺便说一句，我*从来没有从 IIS 完成文件系统的工作，所以除了安全方面之外，我并不完全意识到这样做的缺点）

蒂亚！

@EDIT：由于这个问题，我选择了 WCFService：[如何自杀控制台应用程序？](https://stackoverflow.com/q/15487170/684646)

# gradle - 复制不包括某些配置的依赖项

> ID：15507215
> 
> 赞同：3
> 
> 时间：2013-03-19T18:08:02.420
> 
> 标签：gradle

假设一个项目布局是这样的：

```
allprojects {
    apply plugin: "java"

    configurations {
        provided
        compile.extendsFrom(provided)
    }
}

project("a") {
    dependencies {
        compile("foo:bar:1.0")
        ...
        provided("bar:baz:3.14")
        ...
    }
}

project("b") {
    dependencies {
        compile("abc:def:1.0")
        ...
        provided("xyz:foo:3.14")
        ...
    }
}

dependencies {
    compile(project(":a"))
    compile(project(":b"))
} 
```

现在，我需要一个任务，将根项目的所有依赖项（传递地）复制到某个目录，但不包括`provided`配置。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T22:10:25.857

要仅将编译依赖项（不在提供的依赖项集中）复制到目录，这应该有效：

```
task copyDependencies(type:Copy) {
    from (configurations.compile - configurations.provided)
    into 'build/dependencies'
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T08:01:18.627

对此有点着迷，并试图弄清楚如何去做。我让它与以下 gradle 文件一起工作。请注意配置部分以及我复制依赖项的位置。

```
allprojects {
    apply plugin: "java"

    configurations {
        provided
    }

    sourceSets {
        main { 
            compileClasspath += configurations.provided 
        }
    }

    repositories {
        mavenCentral()
    }
}

project("a") {
    dependencies {
        compile("jdom:jdom:1.0")
        provided("javax.servlet:servlet-api:2.5")
    }
}

project("b") {
    dependencies {
        compile("javax.jcr:jcr:2.0")
        provided("commons-logging:commons-logging:1.0")
    }
}

dependencies {
    compile(project(":a"))
    compile(project(":b"))
}

task copyDependencies(type:Copy) {
    from configurations.compile
    into 'build/dependencies'
} 
```

我认为这是解决此问题的更简单方法，但没有弄清楚。但这一个有效。唯一的事情是您必须将提供的配置添加到idea/eclipse 类路径中，以使ide 集成按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-10T13:58:52.297

也看看[提供的Compile without war 插件](https://stackoverflow.com/questions/13925724/providedcompile-without-war-plugin)问题。

[SpringSource propdeps Gradle 插件](https://github.com/SpringSource/gradle-plugins/tree/master/propdeps-plugin)的概念具有提供的配置支持。

# jquery - jQuery *= 选择器在 IE8 中不起作用

> ID：15507221
> 
> 赞同：0
> 
> 时间：2013-03-19T18:08:16.297
> 
> 标签：jquery, internet-explorer, jquery-selectors

出于某种原因，我无法让它在 IE8 下工作。在 Chrome 中运行良好。

这是我正在寻找的元素：

```
<input type="text" captures_name="default" name="firstname" required="S01 S02"/> 
```

这是我正在使用的 jQuery (1.9.1)：

```
$("input[captures_name='default'][name='firstname']") //Match

$("input[captures_name='default'][required*='S01']") //Does Not Match

$("input[captures_name='default'][required*='S02']") //Does Not Match

$("input[captures_name='default'][required='S01 S02']") //Does Not Match 
```

我希望能够根据`required`属性中的单个值找到元素。我确定我只是在看东西……有人可以借我一双眼睛吗？

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T18:20:14.413

根据 HTML5 的 W3C 规范， required 属性是一个布尔属性，这意味着它是真或假。

> required = "required" 或 ""（空字符串）或空。
> 
> 指定该元素是表单提交的必需部分。

所以你可以这样设置：

```
<input type="text" name="firstname" required />
<input type="text" name="firstname" required="required" /> 
```

它不能真正保存任何其他值，即使 jQuery 可能能够使用`attr()`. 检查或设置它的正确方法是`.prop('required')`等等`.prop('required', true)`。

换句话说，您的选择器基于无效标记，这不是一个好主意。

# c# - MVC c#中的静态html处理

> ID：15507223
> 
> 赞同：1
> 
> 时间：2013-03-19T18:08:17.547
> 
> 标签：c#, html, sql, asp.net-mvc-4

我正在创建一个用 C# 编写的 MVC 4 Web 应用程序。在其他功能中，一个功能应该允许用户导航到这样的页面：

```
/pagecontroller/some-specific-page-name 
```

或者，或者，

```
/pagecontroller/12345 
```

这些页面的内容主要是静态 html。它很少改变。

我将是唯一一个添加新页面的人，我很高兴我是用 html 还是通过 CMS 来做的。

建议使用什么方法存储和处理此类内容？

我应该将 html 存储在数据库中并以这种方式交付吗？我当然想要数据库中的一些特定于页面的信息（例如页面类别等），但是在数据库中放入一大块 html 对我来说似乎不合适。或者，我可以创建一个数据库，其中的文章名称与可以通过 ajax 提取的静态 html 文档相对应。样式不会在这些页面上进行，因此我认为那里没有问题。尽管如此，随着文章的增加，感觉也不是 100% 正确。第三个相当愚蠢的想法是一个称为元素的表。每行将包含一个或多个元素，并且代码可以使用某种模板将元素放置在所需的位置。

真正的诀窍是我希望它能够根据需要从一个小项目扩展到一个更大的项目。

我没有使用 webkit。

你建议我怎么做？非常感谢。

编辑：我应该说 - 这些页面都不包含任何形式或需要服务器端可能的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T22:04:14.390

或者，您可以覆盖 mvchandler 并执行以下操作：

[https://github.com/noogen/phuncms/blob/master/src/Phun/Routing/PhunMvcRouteHandler.cs](https://github.com/noogen/phuncms/blob/master/src/Phun/Routing/PhunMvcRouteHandler.cs)

或者您可以编写自己的模块并在 web.config 中进行设置，类似于 stackoverflow 实现：

[http://samsaffron.com/archive/2011/10/13/optimising-asp-net-mvc3-routing](http://samsaffron.com/archive/2011/10/13/optimising-asp-net-mvc3-routing)

请参阅具有指向某些静态文件的链接的 phuncms azure 演示示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T18:20:13.220

我相信如果我了解您的 deima，您可以使用mvc 控制器提供的[HandleUnknownAction功能。](http://msdn.microsoft.com/library/system.web.mvc.controller.handleunknownaction)

您基本上可以对其进行设置，以便您重定向到您喜欢的任何 url，如果它没有找到匹配的控制器，那么它会抛出一个 UnknownAction 异常，并且您的覆盖只会将它重定向到您一直想要的静态页面......如果确实存在控制器操作，则一切正常运行。

我对此唯一的评论是，如果您的应用程序的绝大多数将是静态 html 页面，那么几乎每个页面都会抛出一个未知操作错误，并且您将首先违背运行 w/mvc 的目的。

另请参阅： [在没有控制器或 ASP.net MVC 中的操作的文件夹中显示视图](https://stackoverflow.com/questions/8372499/display-view-in-folder-without-controller-or-action-in-asp-net-mvc)

# sql-server-2008-r2 - 重建 LOB_DATA 分配单元

> ID：15507229
> 
> 赞同：0
> 
> 时间：2013-03-19T18:08:28.650
> 
> 标签：sql-server-2008-r2, blob, rebuild

有谁知道重建 LOB_DATA 分配单元的任何方法。我有一个 IMAGE 数据类型的列，现在占用了 2500 GB 的空间。但是，其中存储的实际数据只有大约四分之一。

该表需要在此期间保持在线，因此标准索引重建不起作用。表中的数据每 30 天循环一次，所以如果我能做些什么来更好地填充新数据的页面，那已经有帮助了。但是，驱动器将在 4 天内装满。

任何想法，无论多么复杂，都会受到赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:47:57.333

如果您使用的是 SQL Server Enterprise，则可以使用 ONLINE 选项，它将在不使表脱机的情况下进行重建。这在 SQL Server Standard 中不可用。您的另一个选择是重组而不是重建。

# angularjs - 如何评估指令中的属性值？

> ID：15507233
> 
> 赞同：14
> 
> 时间：2013-03-19T18:08:49.617
> 
> 标签：angularjs, angularjs-scope

有没有一种让 AngularJS 指令评估作为参数传入的属性的好方法？

这是一个显示我的问题的[简化示例](http://jsfiddle.net/3gytU/2/)（我认识到您可以在没有指令的情况下实现此行为）：

```
link: function postLink(scope, element, attrs) {    
      debugger; // scope.$parent already knows the value of teacher here
      scope.sendEmail = function(){
          alert(attrs.recipient);
          //window.open("mailto:" + attrs.recipient);
      }
    } 
```

我希望指令使用的值`teacher.email`（请注意，链接函数具有正确的值`scope.$parent.teacher`）而不是字符串`teacher.email`。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-19T18:48:42.840

正如@Ajay 在评论中已经提到的那样，您可以使用`scope.recipient`. 这是有效的，因为您在指令中创建了一个隔离范围：

```
scope: {    
   recipient: "="
}, 
```

这将创建一个名为的指令范围属性`recipient`，它是双向数据绑定到父范围属性的。哪个父属性？由您的属性定义的一个：`recipient="teacher.email"`- 因此父范围属性`teacher.email`绑定到隔离范围属性`recipient`。

如果你的指令不会改变 的值`recipient`，你应该使用 '@' 而不是 '='。'@' 给了我们“单向字符串”：

```
scope: {    
   recipient: "@"
}, 
```

不过，您需要更改 HTML：

```
<sendemail recipient="{{teacher.email}}"></sendemail> 
```

在 sendEmail() 函数中，我们仍然可以使用`scope.recipient`，就像我们对 '=' 所做的那样。

* * *

如果我们`scope: true`改为使用，该指令将创建一个“正常”子范围，而不是隔离范围。在指令中，我们将使用

```
scope.$eval(attrs.recipient) 
```

来获取价值。这是因为 JavaScript 原型继承的工作方式。$eval 将查找属性`teacher.email`，而不是在指令子范围内找到它。然后它沿着原型链到达父范围并在那里找到它。

# jquery - 展开后的 EasyUI & JQuery Animate

> ID：15507236
> 
> 赞同：1
> 
> 时间：2013-03-19T18:08:57.547
> 
> 标签：jquery, jquery-animate, jquery-easyui

我需要在 Jquery 动画发生后执行一个动作。我知道使用回调函数可以做到这一点，但关键在于：我使用的是 EasyUI 框架。我的函数被插入到布局“OnExpand”事件中。

从他们的文档来看，这个事件说它发生在扩展事件发生之后，但实际上没有。它与动画不同步......因此它在动画事件完成之前触发。

我不知道是否有任何解决方法...任何想法将不胜感激...我尝试访问 EasyUI 论坛，但他们不批准我的加入请求。

谢谢

```
$(regionPanel).panel({
onExpand : function() {
       ...do something here after expand event completes...
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:44:01.407

尝试在jquery.easyui.min.js中修改如下方法，

```
function _30f(_310,_311){
    var _312=$.data(_310,"layout").panels;
    var _313=_314();
    var p=_312[_311];
    if(p.panel("options").onBeforeExpand.call(p)==false){
    return;
     }
   var _315="expand"+_311.substring(0,1).toUpperCase()+_311.substring(1);
   _312[_315].panel("close");
   p.panel("panel").stop(true,true);
   p.panel("expand",false).panel("open").panel("resize",_313.collapse);
   p.panel("panel").animate(_313.expand,function(){
   _2e9(_310);
    p.panel("options").onExpand.call(p);//this is the added line
 }); 
```

# php - PHP：使用嵌套的“foreach”循环从 SOAP 响应中输出 XML 数据不起作用

> ID：15507251
> 
> 赞同：2
> 
> 时间：2013-03-19T18:09:39.727
> 
> 标签：php, xml, soap, xml-parsing, foreach

好的，所以我使用 SOAP 从服务中请求状态和城市，并使用“foreach”循环来输出状态，并且在每次迭代中，我使用另一个“foreach”循环来输出每个州内的城市.

首先，SOAP 调用：

```
$client = new SoapClient("https://devxml.#####.com/golfService.asmx?wsdl", array(‘features’ => SOAP_SINGLE_ELEMENT_ARRAYS));

$regionList = $client->Areas(
    array(
        'Hdr' => array(
            'ResellerId' => '#####', 
            'SourceCd' => 'A', 
            'UserIp' => '207.58.123.121', 
            'gsDebug' => '1'
          ),
        'Req' => array(
            'CountryID' => 'USA',
            'RegionID' => ''
        )
    )
) 
```

...返回以下 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<soap:Body>
<AreasResponse xmlns="http://xml.####.com/">
<AreasResult>
<RetCd>0</RetCd>
<RetMsg />
<Countries>
    <Country>
        <id>USA</id>
        <nm>United States</nm>
        <Regions>
            <Region>
                <id>AZ</id>
                <nm>Arizona</nm>
                <Areas>
                    <Area>
                        <id>Phoenix Northeast</id>
                        <nm>Phoenix Northeast</nm>
                    </Area>
                </Areas>
            </Region>
            <Region>
                <id>FL</id>
                <nm>Florida</nm>
                <Areas>
                    <Area>
                        <id>Ft. Myers/Naples</id>
                        <nm>Ft. Myers/Naples</nm>
                    </Area>
                    <Area>
                        <id>Miami / Ft. Lauderdale</id>
                        <nm>Miami / Ft. Lauderdale</nm>
                    </Area>
                </Areas>
            </Region>
        </Regions>
    </Country>
</Countries>
</AreasResult>
</AreasResponse>
</soap:Body>
</soap:Envelope> 
```

现在，这是我在 PHP 中处理这个问题的方式：

```
foreach ($regionList->AreasResult->Countries->Country->Regions->Region as $region):
    echo $region->nm . ": ";
    foreach ($region->Areas->Area as $area):
        echo $area->nm . ", ";
    endforeach;
    echo "<br />";
endforeach; 
```

理想情况下，这将输出为：

> 亚利桑那州：凤凰城东北部，
> 佛罗里达州：英尺。迈尔斯/那不勒斯，迈阿密/英尺。劳德代尔，

但不是！它是这样显示的：

> 亚利桑那州：，
> 佛罗里达州：英尺。迈尔斯/那不勒斯，迈阿密/英尺。劳德代尔，

“Arizona:”后面的两个逗号表示有两条记录，但只有一条。更可气的是它不会输出dang Area值。**我究竟做错了什么？**帮助我，StackOverflow，你是我唯一的希望！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:24:47.993

这可能与未正确转换数组有关，即使您使用的是单数组元素功能。我过去使用过这个功能，它可能适用于这种情况：

```
function forceList($obj, $prop)
{
    $r = &$obj->$prop;
    return isset($r) ? is_array($r) ? $r : array($r) : array();
}

foreach (forceList($region->Areas, 'Area') as $area) { ... } 
```

我知道，它使用了两个三元运算符，但我确实对其进行了测试；-)

# c# - 使用 LINQ 将新用户添加到 sql

> ID：15507254
> 
> 赞同：-1
> 
> 时间：2013-03-19T18:09:48.223
> 
> 标签：c#, asp.net, linq, linq-to-sql

我正在尝试使用 Linq to SQL 访问我的 sql 服务器。我有一个用户表，其中包含字段的 uid、用户名和密码。我为我的 dbcontext 创建了 linq to sql 类。

我可以使用 login.aspx.cs 中的登录屏幕连接到我的网站：

```
 protected void Login1_Authenticate(object sender, AuthenticateEventArgs e)
        {
            bool authenticated = false;
            TrackToolDataContext data = new TrackToolDataContext();
            authenticated = IsValidUser(Login1.UserName, Login1.Password);
            e.Authenticated = authenticated;

            if (e.Authenticated == true)
            {
                Session["username"] = Login1.UserName;
                Response.Redirect("Welcome.aspx");
            }
        }

        private bool IsValidUser(string un, string pw)
        {
            TrackToolDataContext data = new TrackToolDataContext();
            var userResults = from u in data.UserDetails
                              where u.username == un
                              && u.password == pw
                              select u;

            return Enumerable.Count(userResults) > 0;

        } 
```

但是当我尝试创建一个新的用户屏幕时，我遇到了困难。我在模仿我的表的 User 类中创建了常规的用户名、密码字段，在我的新用户页面中，我尝试从 User 类中获取所有字段并尝试将其 linq 到 sql，我收到此错误：![在此处输入图像描述](../Images/1d1cd49f6fade1ad802ae9c74f322092.png)

这是我创建新用户的代码：

```
 protected void CreateUser_Click(object sender, EventArgs e)
    {
        // CreateUser(TextBox1.Text, TextBox2.Text);
        User u = new User();
        u.username = TextBox1.Text;
        u.password = TextBox2.Text;

        TrackToolDataContext data = new TrackToolDataContext();
        data.UserDetails.InsertOnSubmit(u);
        data.SubmitChanges();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:58:32.717

错误消息应该有第二部分，它应该确切地告诉您出了什么问题。

如果您的登录屏幕正常工作，那么您的表是 UserDetails 而不是 User，因此错误可能是“无法从 User 转换为 UserDetail”，这表明您应该创建 UserDetails 的实例而不是 User，例如

```
 UserDetails u = new UserDetails();
    u.username = TextBox1.Text;
    u.password = TextBox2.Text;

    TrackToolDataContext data = new TrackToolDataContext();
    data.UserDetails.InsertOnSubmit(u);
    data.SubmitChanges(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T18:21:28.340

你有这行：

```
data.UserDetails.InsertOnSubmit(u); 
```

但是`u`被声明为 a `User`，而不是 a `UserDetail`，因此您将其添加到错误的表中。尝试：

```
data.Users.InsertOnSubmit(u); 
```

话虽如此，我希望这是一个测试应用程序，因为您不应该像其他人所说的那样以明文（或根本）存储密码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T19:03:25.300

在@Kirk 指出我在 L2S 中的一个重要说明之后，我能够解决这个问题，所以向他指出：

这段代码有效并保存到我的 sql 中。

```
 UserDetail u = new UserDetail();

        u.username = TextBox1.Text;
        u.password = TextBox2.Text;

        TrackToolDataContext data = new TrackToolDataContext();
        data.UserDetails.InsertOnSubmit(u);
        data.SubmitChanges(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-19T18:17:16.447

```
data.UserDetails.Add(u);
data.SaveChanges(); 
```

# html - 如何让一个 HTML 元素停留在多个 html 页面上

> ID：15507257
> 
> 赞同：0
> 
> 时间：2013-03-19T18:09:58.213
> 
> 标签：html, html5-audio, browser-refresh

我有一个网页 - 一个在线漫画：prophetsangel.net，我有一个播放音乐的 html 播放器。这个播放器的目的是为漫画添加额外的大气内容。现在每个单独的漫画页面都有自己的 html 页面：slide00001.html slide00002.html slide00003.html slide00004.html 等。

我目前正在使用一项预先开发的服务，该服务在每个页面上显示一个音乐播放器。不刷新它。在这里你可以找到它的代码：[http ://scmplayer.net/](http://scmplayer.net/)

现在我想切换到使用标准 HTML5 标签来播放我的声音，但我想指定特定播放器将显示在哪些 html 页面上。

例如，我希望播放器 1 显示在 slide00001.html slide00002.html 和 slide00003.html 上，但我希望播放器 2 的音乐完全不同，显示在 slide00004.html 和 slide00005.html

我需要持续显示，这样当用户从 slide00001.html 转到 slide00002.html 时，就不必重新启动播放器音乐。

也许有一个代码我会放在我希望播放器开始播放的 html 页面中 - 例如。我希望播放器一开始在 slide00002.html 中播放，我在头部或主体部分插入代码，并指定“保持播放器打开 slide00003.html，slide00004.html slide00005.html”。现在，当它到达 slide00006.html 时，之前的代码将不再处于活动状态，我将指定相同的代码，但使用不同的音乐和不同的跟踪页面“保持播放器打开 slide00007.html、slide00008.html slide00009.html”

只是认为这可能有助于正确传达信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:14:54.513

你应该考虑让你的整个站点成为一个单独的 html 页面，并使用[AngularJS](http://angularjs.org/)、[Moustache.js](http://mustache.github.com/)或类似的技术将你的用户路由到不同的部分（可以在 javascript 中创建/删除的小 HTML 片段），而无需实际导航到另一个页面。这样，您网站的某些部分就可以在不刷新所有内容的情况下进行更改。

我实际上是为我的网络漫画查看器做了这个（正在进行中）：[http ://ucfpawn.dyndns.info/WebComicService/new.html#/login](http://ucfpawn.dyndns.info/WebComicService/new.html#/login)

# objective-c - 将 Objective-C 应用程序切换到 x86_64 并且 sizeof 返回错误的结果

> ID：15507260
> 
> 赞同：0
> 
> 时间：2013-03-19T18:10:02.713
> 
> 标签：objective-c, c, sizeof

所以我有一个结构，我通常只执行 sizeof(mystruct) 并且在为 x86 编译时它会返回 0x2C，但是一旦我将编译器切换到 JUST x86_64，它就会告诉我大小为 0x30，这对我来说毫无意义。

这是结构：

```
typedef struct Struct
{
    int32_t unk1;       // 0x0
    int32_t unk2;       // 0x4
    int32_t unk3;       // 0x8
    int32_t unk4;       // 0xC

    int64_t    guid;       // 0x10
    int32_t  entryID;   // 0x18
    int32_t  bytes;     // 0x1C
    int32_t  duration;  // 0x20
    int32_t  expiration;   // 0x24

    int32_t  unk5;      // 0x28
} Struct; 
```

然后我做：

```
Struct mystruct;
NSLog(@"0x%X", sizeof(mystruct)); 
```

它打印出 0x30，但不应该是 0x2C 吗？我看不出我的问题出在哪里

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T18:13:56.260

它是[结构填充](https://www.google.com/search?q=struct+padding+site%3Astackoverflow.com)，以确保您的类型的数组与您的架构正确对齐。如果你有一个数组：

```
Struct myarray[2]; 
```

然后每个元素在 x86 上需要 4 字节对齐，但在 x86-64 上需要 8 字节对齐。为了保证这一点，总结构大小必须是 8 字节的倍数，因此编译器在末尾添加了额外的填充。

# php - 在相同的内容中不时显示文本文件更改为另一个文本文件

> ID：15507261
> 
> 赞同：-1
> 
> 时间：2013-03-19T18:10:05.030
> 
> 标签：php, javascript, file, text, time

在我的 index.php 中，我的内容通过一个名为 txt1 的文本文件显示。因此，位于服务器上的 txt1 上的所有内容都将显示到内容 index.php 中。我想要的是将显示的内容不会仅从一个文本文件中显示，而是我希望每隔几秒钟将其更改为另一个名为 txt2 的文本文件。所以它会变成不同的内容进入文本框。

```
<div id="content">
    <br> 
    <font align="center" color="white" size="3"><b>
    <?php
                        $myFile = "txt1.txt";
                        $fh = fopen($myFile, 'r');
                        $theData = fgets($fh);
                        fclose($fh);
                        echo $theData;
                    ?>  
    </b></font></div> 
```

这是我们得到的代码，所以基本上只是读取文本文件上的内容。那么我如何读取不同的文本文件并每秒更改相同内容的文本文件。

我需要在 JavaScript 中使用 PHP。所以PHP里面的JavaScript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:22:46.767

You'll need to create two different divs. One contains the data for txt1.txt.
The other contains the data for txt2.txt and is hidden.

```
<div class="content"><?=file_get_contents('txt1.txt')?></div>
<div class="content" style="display:none"><?=file_get_contents('txt2.txt')?></div> 
```

Then, just use javascript to hide the first dive and show the other div.

```
//using Jquery
$(document).ready(function(){
    $(document).ready(function(){
        var time=2; //Number of seconds
        setInterval(toggle_content, time*1000);
    })
    function  toggle_content() {
        $('.content').toggle()
    }
}) 
```

# git - 我可以在 .git/config 中指定获取多个 refspecs 吗？

> ID：15507264
> 
> 赞同：38
> 
> 时间：2013-03-19T18:10:26.687
> 
> 标签：git

我不想从原点获取每个分支，因为有很多。我只想跟踪一些（例如，`master`）和我的分支（在`my_name`子目录下组织）。我可以执行以下操作：

```
$ git fetch origin refs/heads/my_name/*:refs/remotes/origin/my_name/* refs/heads/master:refs/remotes/origin/master refs/heads/some_branch:refs/remotes/origin/some_branch 
```

我想将上述“集合”的 refspecs 指定为`git fetch`. 我试过了

```
$ git config remote.origin.fetch refs/heads/my_name/*:refs/remotes/origin/my_name/*
$ git config --add remote.origin.fetch refs/heads/master:refs/remotes/origin/master 
```

它失败：

```
$ git config remote.origin.fetch
refs/heads/my_name/*:refs/remotes/origin/my_name/*
error: More than one value for the key remote.origin.fetch: refs/heads/master:refs/remotes/origin/master 
```

我也尝试了以下方法，但它也失败了：

```
$ git config remote.origin.fetch 'refs/heads/my_name/*:refs/remotes/origin/my_name/* refs/heads/master:refs/remotes/origin/master refs/heads/some_branch:refs/remotes/origin/some_branch'
$ git fetch
fatal: Invalid refspec 'refs/heads/my_name/*:refs/remotes/origin/my_name/* refs/heads/master:refs/remotes/origin/master refs/heads/some_branch:refs/remotes/origin/some_branch' 
```

注意：Git 1.7.11

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-19T19:31:20.080

您可以在您的中添加以下行`.git/config`以指定多个 refspecs 进行提取：

```
[remote "origin"]
       fetch = refs/heads/my_name/*:refs/remotes/origin/my_name/*
       fetch = refs/heads/master:refs/remotes/origin/master
       fetch = refs/heads/some_branch:refs/remotes/origin/some_branch 
```

`+`如果您还想覆盖获取非快进引用，则可以在 refspec 之前添加前缀，如下所示：

```
[remote "origin"]
       fetch = +refs/heads/my_name/*:refs/remotes/origin/my_name/*
       fetch = +refs/heads/master:refs/remotes/origin/master
       fetch = +refs/heads/some_branch:refs/remotes/origin/some_branch 
```

请注意，不支持部分通配（即`a/b/ca*`不支持，但支持`a/b/*`）。

[10.5 Git 内部结构——Refspec](https://git-scm.com/book/it/v2/Git-Internals-The-Refspec)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2017-04-07T14:32:00.577

要覆盖现有的 fetch refspec(s)，而无需手动编辑`.git/config`，您可以根据需要使用`--unset-all`后跟`--add`。

对于问题中所需的参考规范示例，它将是：

```
git config --unset-all remote.origin.fetch
git config --add remote.origin.fetch +refs/heads/my_name/*:refs/remotes/origin/my_name/*
git config --add remote.origin.fetch +refs/heads/master:refs/remotes/origin/master 
```

然后用于`git config --get-all remote.origin.fetch`验证结果。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-08-02T18:12:40.097

注意：如果您想*在一次调用*中从不同的 refspec获取（临时覆盖配置中注册的 fetch refspec），您可以从 Git 2.1（2014 年 8 月）开始这样做。

请参阅[Junio C Hamano (](https://github.com/gitster) [)](https://github.com/gitster)的[提交 c5558f8](https://github.com/git/git/commit/c5558f80c3a34f411022f1bc67f8364556ca3922)：[`gitster`](https://github.com/gitster)

> 自从引入远程跟踪分支的机会性更新以来，大约[从 f269048](https://github.com/git/git/commit/f269048754f3b835f4f7287c5a132714a059efce) ( `fetch`: opportunistically update tracking refs, 2013-05-11) 开始，在 v1.8.4 时代进行了一些更新，**即使在指定 refspec 时，配置也总是会****启动`remote.*.fetch`要获取的内容在命令行中给出，并且无法在每次调用时禁用或覆盖它**。
> 
> 教命令时要注意`--refmap=<lhs>:<rhs>`命令行选项，可用于覆盖配置`remote.*.fetch`为 refmap 的使用。

这为您提供了新的选择：

```
--refmap=<refspec> 
```

> 获取命令行上列出的 refs 时，使用指定的 refspec（可以多次给出）将 refs 映射到远程跟踪分支，而不是`remote.*.fetch`远程存储库的配置变量的值。
> 有关详细信息，请参阅“配置的远程跟踪分支”部分。

（那个 Git “配置的远程跟踪分支”部分也可以追溯到 Git 2.1：请参阅“[很难理解`git fetch`](https://stackoverflow.com/a/25097913/6309)”）

* * *

在 Git 2.25.1（2020 年 2 月）中，“git fetch --refmap=" 选项获得了更好的文档。

请参阅[Derrick Stolee ( ) 的](https://github.com/derrickstolee)[提交 b40a502](https://github.com/git/git/commit/b40a50264acab504faa2b444dab3603682dc1785)（2020 年 1 月 21 日[）](https://github.com/derrickstolee)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([4b69f29 提交中](https://github.com/git/git/commit/4b69f2927165521df85cea1b90b982074d93c9ec))^(，2020 年 1 月 30 日）)[`derrickstolee`](https://github.com/derrickstolee)
^([`gitster`](https://github.com/gitster))

> ## [`fetch`](https://github.com/git/git/commit/b40a50264acab504faa2b444dab3603682dc1785): 记录和测试 --refmap=""
> 
> ^(签字人：Derrick Stolee)
> 
> 为了防止在 ' ' 调用期间长时间阻塞`git fetch`，用户可能希望为后台 ' `git fetch`' 进程设置时间表。
> 但是，由于 Git 添加远程时配置中设置的默认 refspec，这些运行将更新 refs/remotes 分支。
> 因此，用户在前台获取期间不会注意到远程 refs 何时更新。事实上，他们可能*希望*这些 refs 保持原样，以便他们可以使用上次前台 fetch 调用中的 refs。
> 
> 这可以通过使用 ' `--refmap=`' 和自定义 refspec 覆盖配置的 refspec 来完成：
> 
> ```
> git fetch --refmap='' <remote> +refs/heads/*:refs/hidden/<remote>/* 
> ```
> 
> 填充自定义参考空间并下载一组新的可达对象。
> 这种调用允许发生一些事情：
> 
> 1.  如果 refs 已更新，我们会下载一个新包。2、由于存在refs/hidden分支，GC不会删除新下载的数据。
> 2.  启用后，`fetch.writeCommitGraph`参考/隐藏参考用于更新提交图文件。
> 
> 为了避免 refs/hidden 目录被无限制填充，`--prune`可以包含该选项。当提供这样的 refspec 时，该`--prune`选项不会删除远程 refs，而只会删除目标 refspace 中的 refs。
> 
> 更新文档以阐明 ' `--refmap=""`' 的工作原理并创建测试以保证这种行为在未来仍然存在。

所以[`git fetch`选项手册页](https://github.com/git/git/blob/b40a50264acab504faa2b444dab3603682dc1785/Documentation/fetch-options.txt#L132-L142)现在包括：

> ```
> --refmap=<refspec>: 
> ```
> 
> 获取命令行上列出的 refs 时，使用指定的 refspec（可以多次给出）将 refs 映射到远程跟踪分支，而不是`remote.*.fetch`远程存储库的配置变量的值。
> 
> `<refspec>`为选项提供空`--refmap`值会导致 Git 忽略配置的 refspecs 并完全依赖作为命令行参数提供的 refspecs。
> 有关详细信息，请参阅“[配置的远程跟踪分支](https://git-scm.com/docs/git-fetch#_configured_remote_tracking_branches_a_id_crtb_a)”部分。

* * *

请注意，我们在过去 7 年左右对远程跟踪分支进行的更积极的更新并未反映在文档中，该文档已在 Git 2.27（2020 年第二季度）中得到纠正。

请参阅[Philippe Blain ( ) 的](https://github.com/phil-blain)[commit a440884](https://github.com/git/git/commit/a44088435c37ccf91920ab18076db888cff1fc76)和[commit f6a65de](https://github.com/git/git/commit/f6a65de6214e48812cb245975cdb75e5649992b3)（2020 年 4 月 5 日[）](https://github.com/phil-blain)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 fdee8b1](https://github.com/git/git/commit/fdee8b170d42d3502aa461208436102cf68a95f8))^(中，2020 年 4 月 22 日）)[`phil-blain`](https://github.com/phil-blain)
^([`gitster`](https://github.com/gitster))

> ## [`pull doc`](https://github.com/git/git/commit/a44088435c37ccf91920ab18076db888cff1fc76)：更正过时的示例描述
> 
> ^(签字人：Philippe Blain)
> 
> 由于[f269048754](https://github.com/git/git/commit/f269048754f3b835f4f7287c5a132714a059efce) (" `fetch`: opportunistically update tracking refs", 2013-05-11, Git v1.8.4-rc0 -- [merge在](https://github.com/git/git/commit/db400949b31a5d2cec923b4c9da710fbdd52cca2)[批次#0](https://github.com/git/git/commit/)中列出) `git fetch`，`[`git pull中的底层`](https://git-scm.com/docs/git-pull) <remote> <branch>`更新了配置的远程跟踪分支。
> 
> 但是，文档的“示例”部分中的示例`git pull`仍然表明情况并非如此。
> 
> 更正此示例的描述。

所以，而不是，对于`git pull origin next`：

> 这会在 FETCH_HEAD 中临时留下一个副本`next`，但不会更新任何远程跟踪分支。
> 使用远程跟踪分支，同样可以通过调用 fetch 和 merge 来完成：

[你现在有](https://github.com/git/git/blob/a44088435c37ccf91920ab18076db888cff1fc76/Documentation/git-pull.txt#L228-L234)：

> `next`这会在 FETCH_HEAD中临时留下一个副本，**并更新远程跟踪分支`origin/next`**。
> 同样可以通过调用 fetch 和 merge 来完成：

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-14T01:54:41.040

回答我自己关于缺乏示例的抱怨`refmap`。这是一个在不与配置交互的情况下从 VSO（Visual Studio Online）签出拉取请求的示例。

`$ git fetch --refmap='+refs/pull/*/merge:refs/remotes/origin/pr/*' origin refs/pull/1415/merge $ git checkout pr/1415`

# c - 自定义过滤器功能不会产生预期的输出

> ID：15507265
> 
> 赞同：0
> 
> 时间：2013-03-19T18:10:26.923
> 
> 标签：c, filter

我正在尝试制作一个仅在屏幕上打印我想要的数据的过滤器。这就是我所说的：

```
Cost* FilterSum(Controller* ctrl, int n)
{
    int i;
    DynamicVector* CostList=getAll(ctrl->repo);
    for(i=0;i<getLen(CostList);i++)
    {
        Cost* c=getElementAtPosition(CostList,i); //returns the element on one position
        if((c->sum)<n)
        {
            return c; //if the element(Cost in my case) has the sum<20 return it
        }
    }

return 0;
} 
```

所以，我有以成本为元素的动态数组。如果成本总和小于 n（从键盘给出 n），我只想在屏幕上打印这些成本。:) 这是控制台中的打印功能：

```
void PrintCost(Cost* c) //this function prints one cost
{
    printf("\nID: %d\n", getID(c));
    printf("Day: %s\n", getDay(c));
    printf("Type: %s\n", getType(c));
    printf("Sum: %d\n\n", getSum(c));
}

void PrintCosts(Console* console) //this one prints all the costs in the list
{
    DynamicVector* CostList=getAllCosts(console->ctrl);
    if (getLen(CostList))
    {
        int i;
        for(i=0;i<getLen(CostList);i++)
        {
            Cost *c=(Cost*)getElementAtPosition(CostList,i);
            PrintCost(c);
        }

    }
    else printf("No cost in the list!");
} 
```

这是控制台中控制器的调用函数：

```
void FilterCostsBySum(Console* console)
{
    int n;
    printf("See the costs that have the sum less than: ");
    scanf("%d",&n);
    Cost* c = FilterSum(console->ctrl,n);
    PrintCost(c);
} 
```

现在，问题来了。如果我有 sum=10 的星期一，sum=20 的星期五和 sum=40 的星期六，并且我只想打印 sum<30 的那些日子，它只打印星期一，仅此而已，它也不打印星期五。我在哪里做错了？在我返回 c 的控制器的 FilterSum 函数中？我尝试了一切，但它根本没有用......也许你可以帮助我！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:16:52.257

它只打印一个，因为您在`PrintCost`通过`FilterSum`. 您需要将`FilterCostsBySum`函数循环和打印成本推送到`DynamicVector`.

编写一个返回 a 的函数，其中`DynamicVector`包含满足您想要的条件的所有成本。您可以通过更改`FilterSum`函数来做到这一点，而不是返回 one `Cost`，而是将满足给定条件的任何成本添加到 a`DynamicVector`并返回它。之后重命名函数`GetFilteredCosts`。

最后，在`FilterCostsBySum`函数内部，您将遍历返回的元素`DynamicVector`并打印成本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T18:14:32.563

```
if((c->sum)<n)
    {
        return c; //if the element(Cost in my case) has the sum<20 return it
    } 
```

`return`语句中断循环并退出函数，因此`FilterSum`函数只返回`Cost`与条件匹配的第一个。您应该将其更改为返回一个`Const**`，一个指向 列表的指针`Const *`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T18:17:10.520

```
if((c->sum)<n)
{
  return c; //if the element(Cost in my case) has the sum<20 return it
} 
```

这将立即只返回 10。而不是立即返回，将 10 添加到列表中。然后当您获得 20 时，将其添加到列表中。一旦 FilterSum() 中的 for 循环完成，您就可以返回此列表。

# codeigniter - codeigniter 自动加载配置文件在库中不起作用

> ID：15507266
> 
> 赞同：1
> 
> 时间：2013-03-19T18:10:31.537
> 
> 标签：codeigniter, config, autoload

我创建了一个名为 config2 的自定义配置文件，并在 autoload.php 中自动加载它。在我的模型中，我只是使用`$this->config->item('item_in_config2')`，它运行良好。但是，在我的贝宝库中，我尝试使用类似的东西：

```
$this->PROXY_HOST = $this->config->item['paypal_proxy_host']; 
```

发生错误：未定义的属性 $config。然后我尝试添加 parent::__construct(); 在库构造函数下，显示服务器错误。以前，我手动加载 config2 并且效果很好，但我现在真的想自动加载它。有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:59:40.930

我认为您必须调用库中的 CI 实例：

贝宝库构造函数：

```
$CI =& get_instance();

$proxy_host = $CI->config->item('paypal_proxy_host'); 
```

# android - 如何在没有持续通知的情况下保持服务活动

> ID：15507268
> 
> 赞同：0
> 
> 时间：2013-03-19T18:10:34.670
> 
> 标签：android, service

我知道我可以使用持续通知来保持我的服务处于活动状态，但我有一个服务正在持有广播接收器。我不想使用通知来简单地持有我的广播接收器。我也知道我可以在我的应用程序清单中注册我的接收器，但我希望用户能够控制接收器是否处于活动状态。

这是不断重启的服务。

```
public class DockServiceListener extends Service{

IntentFilter filter;
BroadcastReceiver mReceiver;

public void onCreate() {
    super.onCreate();

    Toast.makeText(getApplicationContext(), "Receiver started!", Toast.LENGTH_SHOR

    filter = new IntentFilter(Intent.ACTION_DOCK_EVENT);
    mReceiver = new DockReceiver();

}

public int onStartCommand(Intent intent, int flags, int id) {
    super.onStartCommand(intent, START_STICKY, id);

    registerReceiver(mReceiver, filter);

    return id;
}

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
} 
```

很简单。我也知道这可能是 android 清理，但 Facebook Messenger 和其他服务怎么没有被关闭？除非我只是不知道它，因为它没有吐司消息？或者有没有办法只运行一次 onCreate ？

无论如何，感谢大家观看！希望有人能更好地教育我！:)

编辑：新方法想知道这是否正确？

```
startBtn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            PackageManager pm = getApplicationContext().getPackageManager();
            ComponentName dockReceiver = new ComponentName(getApplicationContext(), DockReceiver.class);
            pm.setComponentEnabledSetting(dockReceiver, PackageManager.COMPONENT_ENABLED_STATE_ENABLED, 0);
            finish();

        }
    });

    stopBtn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            PackageManager pm = getApplicationContext().getPackageManager();
            ComponentName dockReceiver = new ComponentName(getApplicationContext(), DockReceiver.class);
            pm.setComponentEnabledSetting(dockReceiver, PackageManager.COMPONENT_ENABLED_STATE_DISABLED, 0);
            finish();

        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:13:00.333

> 我也知道我可以在我的应用程序清单中注册我的接收器，但我希望用户能够控制接收器是否处于活动状态。

然后使用`PackageManager`and`setComponentEnabledSetting()`启用或禁用您`BroadcastReceiver`在清单中注册的内容。您无需为了控制“接收器是否处于活动状态”而将用户的 RAM 浪费在服务上。

# java - Javah 未找到错误

> ID：15507269
> 
> 赞同：8
> 
> 时间：2013-03-19T18:10:35.093
> 
> 标签：java, fedora, java-7

我已经在 Fedora 中安装了 Java 7，但是当我从命令提示符尝试**javah**时，它显示为**javah:command not found** where as javac,java else are working。当我在 /usr/bin 中搜索时，可执行文件中有 javac、java、javaws 但不是 javah。Javah 在 Java/JDK/bin 文件夹中可见。我怎样才能运行 javah 命令。

提前谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2019-09-17T00:03:15.200

对于使用 Java 更新版本的任何人（在我撰写本文时这篇文章已有 6 年历史）`javah`，您的 Java/JDK/bin 文件夹中不再存在。相反，使用命令`javac -h`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-19T18:16:52.543

使用`export PATH=$PATH:/path/to/java/JDK/bin/folder`. 要将其永久保存在您的路径中，您可以将该行添加到您的 .bashrc 中。

# .net - 使用 .NET 的 SQL 连接超时的实际限制是多少？

> ID：15507270
> 
> 赞同：1
> 
> 时间：2013-03-19T18:10:39.717
> 
> 标签：.net, sql-server-2008

我们正准备将新系统推广到生产环境，并且遇到了与 SQL 的连接超时的问题。

该产品主要由不熟悉 .NET 功能的 SQL 开发人员编写。我们发现超时的存储过程的复杂性非常高。发生了很多事情，比如决策制定、控制流以及调用其他 10 个存储过程进行计算。

我的直觉是，这需要重构为一个 .NET 引擎来进行决策，然后简化 SQL 语句来处理数据和数据质量。我需要帮助来提出这个论点。SQL 开发人员指出，10 分钟的超时适用于生产中的该系统。

.NET 设置了一个在大多数情况下都合理的默认超时...设置 SQL 连接超时的实际上限是多少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:18:30.527

我相信您所说的不是 SQLConnection 超时，而是 SQLCommand 超时，这取决于您的应用程序。

有大的时间是不切实际的，特别是如果你正在执行复杂的逻辑，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:05:09.497

首先，在您考虑将代码移动到 C# 之前，我会检查存储过程和所有嵌套过程是否已正确优化。SQL Profiler、执行计划和统计信息都有助于诊断这一点。

如果 sql 已经是最佳的，您可能需要考虑用户如何与站点交互，例如操作是否可以被安排/排队，并且用户在完成收集结果后稍后再回来。

用 C# 重写听起来需要做很多工作，你真的需要了解 sql 在做什么以及重写它会有什么帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T18:14:27.700

我认为您除了创建超时之外别无选择，没有实际限制。我猜你没有时间用 C# 重写所有东西。唯一的问题是看到它是脆弱的系统，如果连接中断，你必须确保你的数据库保持在有效状态。

# php - Yii通过多个属于关系查询

> ID：15507273
> 
> 赞同：1
> 
> 时间：2013-03-19T18:10:47.183
> 
> 标签：php, yii

我有以下表格：

**病人**

*   ID
*   名
*   姓

**事件**

*   ID
*   患者编号
*   事件描述

**通知**

*   ID
*   event_id
*   通知描述

我的模型中定义了以下关系：

**通知.php**

```
public function relations()
{
    return array(
                'event' => array(self::BELONGS_TO, 'Event', 'event_id'),
            );
} 
```

**事件.php**

```
public function relations()
{
    return array(
                'patient' => array(self::BELONGS_TO, 'Patient', 'patient_id'),
    );
} 
```

我想获得名字为“Joe”和姓氏为“Smith”的患者的所有通知。有没有办法在不写出 SQL 语句的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:24:56.737

you need a custom search function, like:

```
 public function searchCandidates() {
// Warning: Please modify the following code to remove attributes that
// should not be searched.

        $criteria = new CDbCriteria;

        $criteria->with = array('candidate_relation');//this is a relation; you can pute here, relation_a.relation_b.relation_c
        $criteria->compare('id', $this->id);
        $criteria->compare('email', $this->email, true);
        $criteria->compare('password', $this->password);
        $criteria->compare('created', $this->created);
        $criteria->compare('lastmodified', $this->lastmodified);
        $criteria->compare('confirmed', $this->confirmed);
        $criteria->compare('is_candidate', 1);
        $criteria->compare('username', $this->username, true);
        $criteria->compare('candidate_relation.first_name', $this->full_name, true);//and another relation here ...
        $criteria->compare('candidate_relation.last_name', $this->full_name, true, 'OR');

        return new CActiveDataProvider($this, array(
            'criteria' => $criteria,
        ));
    } 
```

where `full_name` is a custom property for the model: `public $full_name;`

# content-management-system - 如何让自定义图像内容类型显示在 Ephox 编辑器中？

> ID：15507274
> 
> 赞同：0
> 
> 时间：2013-03-19T18:10:49.773
> 
> 标签：content-management-system

使用 Percussion CM System，我有一个自定义的图像内容类型，实际上是使用 PSOImageEditor imedImage 类型。当用户单击 Edit Live 中的插入 CMS Image 图标时，如何让该类型的图像显示在 Content Browser 选择列表中？我已经浏览了文档和配置文件，但没有任何东西跳出来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:22:43.217

You need to edit the sys_inline_image slot in workbench under Assembly Design and add the content type/template pair you want to add.

Most slots you are adding a snippet template as the allowed template but for sys_inline_link and sys_inline_variant you add the binary template(s), this is because the system just generates the link to the item based on its published location scheme for these slots.

You can add more than one template for the same type if you have more than one image field on the type you may have a binary template for each.

# ruby-on-rails - 如何在 Windows 7 上完全卸载 git 和 Railsinstaller 以重新安装

> ID：15507278
> 
> 赞同：0
> 
> 时间：2013-03-19T18:10:54.237
> 
> 标签：ruby-on-rails, windows, git, github

（Windows 7 64 位）我之前安装了 Railsinstaller，但没有继续使用它。我使用 Revo Uninstaller 卸载了它，但现在我想重新安装它。运行 .exe 后，会出现应有的命令提示，但没有提示我按照说明中列出的方式执行以下操作：( [http://railsinstaller.org/windows](http://railsinstaller.org/windows) )

“安装完成后，它应该会打开 Windows 命令行（DOS 提示符），询问您的姓名和电子邮件地址。

输入两者后，您应该会看到生成的公共 SSH 密钥，稍后您将需要它。”

它已经抓取了我之前的 git 信息。我不想使用我以前的信息，我有一个新帐户并想使用它。

有关如何删除 git 信息的任何信息都会有所帮助。

我做过的事情：用 Revo 卸载 Railsinstaller。

删除 C:\Users\/.git

删除了所有与 git 相关的 appdata

删除了一个注册表项（不记得是哪一个）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T20:38:43.530

从环境变量`.gitconfig`指向的目录中删除您的文件。`$HOME`

# silverlight - Silverlight MEF 出口工厂 调用 Dispose 不处理

> ID：15507282
> 
> 赞同：0
> 
> 时间：2013-03-19T18:11:05.767
> 
> 标签：silverlight, prism, mef

在使用 Prism 和 MEF 的 Silverlight 5 应用程序中，NonShared 对象存在内存泄漏问题，因此尝试使用 ExportFactory< T > 创建我的 ViewModels，这应该是我所读到的解决方案。但是，在 ExportLifetimeContext 上调用 Dispose 也不会从内存中删除对象。下面的代码创建了一个 DataEntryViewModel 的实例，但在两行之后调用 dispose 的 ExportLifetimeContext 没有任何效果。有什么建议么？

```
[Export("DataEntry", typeof(UserControl)), PartCreationPolicy(CreationPolicy.NonShared)]
public partial class DataEntry
{
    private readonly ExportFactory<DataEntryViewModel> _ExportFactory;
    [ImportingConstructor]
    public DataEntry(ExportFactory<DataEntryViewModel> exportFactory)
    {
        _ExportFactory = exportFactory;
        var context = _ExportFactory.CreateExport();
        DataContext = context.Value;
        context.Dispose();
        InitializeComponent();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T22:37:52.423

Dispose 不会从内存中删除对象。那是垃圾收集器的工作。按照 dispose 模式，您可以释放非托管资源。

您在以下部分中所做的事情将导致问题：

```
var context = _ExportFactory.CreateExport();
DataContext = context.Value;
context.Dispose(); 
```

因为您正在处理`context`，但您保留了对`context.Value`on的引用`DataContext`。

在[ExportLifetimeContext.Dispose](http://msdn.microsoft.com/en-us/library/ff382762%28v=vs.95%29.aspx)的文档中指出：

> 使用完 ExportLifetimeContext 后调用 Dispose。Dispose 方法使 ExportLifetimeContext 处于不可用状态。调用 Dispose 后，您必须释放对 ExportLifetimeContext 的所有引用，以便垃圾收集器可以回收 ExportLifetimeContext 占用的内存。

您可以做的是在 DataEntry 类中覆盖[Component.Dispose(bool)](http://msdn.microsoft.com/en-us/library/d9yzd5cx.aspx)`context.Dispose`并在那里调用。因此，当`UserControl`被处置时，`ExportLifetimeContext`也将被处置。

# wpf - 将组合框值更新到数据库中

> ID：15507283
> 
> 赞同：0
> 
> 时间：2013-03-19T18:11:07.717
> 
> 标签：wpf, silverlight, data-binding, combobox

所以，我可能会以错误的方式解决这个问题，但我认为无论如何它都应该起作用。我有一个 ListBox 从数据库中加载它的项目。

```
<UserControl.Resources>
    <DataTemplate x:Key="DataTemplateListBox">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="60" />
                <ColumnDefinition Width="130" />
            </Grid.ColumnDefinitions>

            <CheckBox Grid.Column="0" x:Name="cbNonFat" VerticalAlignment="Center" Margin="14,0,10,0" IsChecked="{Binding IsNonFat, Mode=TwoWay}">
            </CheckBox>

            <ComboBox HorizontalAlignment="Left" Width="120" Grid.Column="4" Name="cbbSeason"  Margin="0,0,10,0" Tag="{Binding Season, Mode=TwoWay}" Loaded="cbbSeason_Loaded" SelectionChanged="cbbSeason_SelectionChanged">
                <ComboBoxItem Content="Year Round" Tag="0"/>
                <ComboBoxItem Content="Spring/Summer" Tag="1"/>
                <ComboBoxItem Content="Fall/Winter" Tag="2"/>
                <ComboBoxItem Content="Featured" Tag="3"/>
            </ComboBox>

        </Grid>
    </DataTemplate>
</UserControl.Resources>
<Grid x:Name="LayoutRoot" Background="White">
    <ListBox Name="lbFlavors" ItemTemplate="{StaticResource DataTemplateListBox}"/>
</Grid> 
```

在代码隐藏中，我将 Tag 更改为 Selected Index：

```
 private void cbbSeason_Loaded(object sender, RoutedEventArgs e)
    {
        foreach (ComboBoxItem cbi in (sender as ComboBox).Items)
        {
            if (cbi.Content.ToString() == (sender as ComboBox).Tag.ToString())
            {
                (sender as ComboBox).SelectedIndex = Convert.ToInt16(cbi.Tag);
                break;
            }
        }
    } 
```

Then, when the selection is changed, I update the Tag:

```
 private void cbbSeason_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        (sender as ComboBox).Tag = (cbbSeason.SelectedItem as ComboBoxItem).Content.ToString();
    } 
```

当我将更改保存回数据库时，复选框更改成功，但组合框不成功。如果我在 cbbSeason_SelectionChanged 事件上设置断点，则标签根本不会更新，所以显然这就是问题所在，但我不知道为什么它没有更新。

# api - 获取 LinkedIn 用户的联系人的个人资料？

> ID：15507285
> 
> 赞同：0
> 
> 时间：2013-03-19T18:11:12.860
> 
> 标签：api, linkedin

我有一个客户，他有兴趣让新用户访问他的网站，同时引入他们的 LinkedIn 联系人信息（个人资料、技能、电子邮件、位置等......）

这是可能的还是用户明确需要授予访问其个人资料信息的权限？

从我在以下链接中阅读的内容来看，您似乎只能获取有关授权用户连接的基本个人资料信息。

[连接 API](http://developer.linkedin.com/documents/connections-api)

[配置文件 API](http://developer.linkedin.com/documents/profile-api)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T21:00:19.607

您对此的唯一选择确实是用户联系人的基本个人资料信息。您可以代表那里向那里的联系人发送消息。

# javascript - VS2012 的 JSLint 扩展无法识别 JSON

> ID：15507295
> 
> 赞同：1
> 
> 时间：2013-03-19T18:11:36.080
> 
> 标签：javascript, visual-studio-2012, jslint

我刚刚为 VS2012 安装了 JSLint 扩展，并且我使用的一些 JSON 设置文件出现异常。使用默认设置会导致我的构建被自动取消，因此由于 JSLint 错误，我不得不关闭取消构建的选项。没有理由不识别 JSON，因为它是有效的 Javascript。我得到的例外情况是“预期：';'”。我检查了 JSLint 选项，但找不到解决此问题的选项，有人知道方法吗？示例设置文件是：

```
{
  "SharePath": "\\\\172.26.168.60\\main\\Temp\\Webclient",
  "LocalFilePath": "C:\\\\Builds\\WebClient",
  "BuildCount": "10", 
  "AppVersions": [
    {
      "VersionName": "hotfix",
      "BuildPath": "\\\\10.18.0.53\\Builds\\WebClient_hotfix"
    },
    {
      "VersionName": "main",
      "BuildPath": "\\\\10.18.0.53\\Builds\\WebClient_main"
    },
    {
      "VersionName": "master",
      "BuildPath": "\\\\10.18.0.53\\Builds\\WebClient_master"
    }
  ]
} 
```

谢谢！

本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:17:09.690

根据伟大的道格拉斯·克罗克福德 (Douglas Crockford) 规定的 JSLint 更严格的规则，所有表达式的末尾都应该有一个分号。JSON 对象的声明是一个表达式——在末尾添加一个分号，你应该是金色的。虽然 JavaScript 本身并不强制你用分号结束每个表达式，但如果你不这样做，它会在一些奇怪的情况下导致编译问题，所以 JSLint 会强制你这样做。您应该认识到，通过使用 JSLint，您同意使用更严格的 JavaScript 子集，然后是语言规范所规定的。然而，权衡是这个子集比全套语言更不容易出错，因此使用起来更安全。

```
{
  "SharePath": "\\\\172.26.168.60\\main\\Temp\\Webclient",
  "LocalFilePath": "C:\\\\Builds\\WebClient",
  "BuildCount": "10", 
  "AppVersions": [
    {
      "VersionName": "hotfix",
      "BuildPath": "\\\\10.18.0.53\\Builds\\WebClient_hotfix"
    },
    {
      "VersionName": "main",
      "BuildPath": "\\\\10.18.0.53\\Builds\\WebClient_main"
    },
    {
      "VersionName": "master",
      "BuildPath": "\\\\10.18.0.53\\Builds\\WebClient_master"
    }
  ]
}; // <--- ';' HERE 
```

网上的 JSLint 似乎在这里传递了对象，而 VS2012 JSLINT 没有的原因是在线的 JSLint 将对象视为 JSON 对象，并且只检查对象的那部分。您正在使用的 VS2012 将您的 JSON 文件视为完整的 javascript 文件，并将该 JSON 对象视为更大 JS 表达式的一部分（所有 JSON 对象最终都必须如此），因此它检查的内容比在线 JSLint 编辑器要多. （它正在检查在线 JSLint 不存在的表达式语法。简单来说，JSLint 在线工具默认为更简单的模式，然后 VS2012 正在运行。我已经更新了我的答案，这将强制在线 JSLint 运行完整JS 表达式检查。尝试将其粘贴到 onlie 工具中，看看会发生什么。（提示 JSLint 不高兴）

```
var test2 = "Hey JSLint Im a JS file, not a JSON object danm it!"; 
{
    "SharePath" : "\\\\172.26.168.60\\main\\Temp\\Webclient",
    "LocalFilePath" : "C:\\\\Builds\\WebClient",
    "BuildCount" : "10",
    "AppVersions" : [
        {
            "VersionName": "hotfix",
            "BuildPath": "\\\\10.18.0.53\\Builds\\WebClient_hotfix"
        },
        {
            "VersionName": "main",
            "BuildPath": "\\\\10.18.0.53\\Builds\\WebClient_main"
        },
        {
            "VersionName": "master",
            "BuildPath": "\\\\10.18.0.53\\Builds\\WebClient_master"
        }
    ]
} 
```

# php - INNER JOIN 帮助和表 mysql

> ID：15507301
> 
> 赞同：-1
> 
> 时间：2013-03-19T18:11:58.087
> 
> 标签：php, mysql, sql, join

我目前正在尝试使用来自两个mysql表“order”和“order_items”的信息制作一个表，因为它们都共享订单ID

命令

![http://gyazo.com/b5761696c5650d0f24d883fd914f3564.png](../Images/8e26e972a266743c13a749f0eab4b1a0.png)

order_items

![在此处输入图像描述](../Images/0993e71312381ccc2ed3dc3484edfd43.png)

我想在同一行显示这样的表格，其中产品名称可能会循环

![在此处输入图像描述](../Images/0bf30767618a296dd3d8565228ab78ac.png)

我想通过内部连接来做到这一点，因为它更多地标志着我在做什么

这是我目前拥有的，但目前不起作用

```
$query = "SELECT order.date_bought, order.total_price, order_items.product_name FROM order INNER JOIN order_items ON order.order_id = order_items.order_id WHERE order.student_id = $id ORDER BY order_id DESC";

$result = mysql_query($query);

$num = mysql_num_rows($result);

$i=0;

while($i < $num){
$date_bought = mysql_result($result,$i,"date_bought");

echo $date_bought;

} 
```

错误：mysql_num_rows() 期望参数 1 是资源，给定的布尔值

但我很确定这是因为查询

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:14:43.203

`order`是一个保留字，转义它：

```
SELECT 
  o.order_id,
  o.date_bought, 
  o.total_price, 
  oi.product_name 
FROM `order` AS o
INNER JOIN order_items AS oi ON o.order_id = oi.order_id 
WHERE o.student_id = $id 
ORDER BY o.order_id DESC; 
```

尽量避免使用这些名称。

* * *

如果要在每个订单的同一行中显示产品名称，请使用`GROUP_CONCAT`函数：

```
SELECT 
  o.order_id,
  o.date_bought, 
  o.total_price, 
  GROUP_CONCAT(oi.product_name SEPARATOR ' ') AS ProdcutNames
FROM `order` AS o
INNER JOIN order_items AS oi ON o.order_id = oi.order_id 
WHERE o.student_id = $id 
GROUP BY o.order_id,
         o.date_bought, 
         o.total_price
ORDER BY o.order_id DESC; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:34:37.033

我看到你是 mysql 的初学者。尝试一下：

```
SELECT * FROM order o INNER JOIN order_items oi ON o.order_id = oi.order_id WHERE order.student_id = $id GROUP BY o.order_id ORDER BY o.order_id DESC 
```

“组”是不重复结果。

# magento - Magento 1.7 导入/导出挂起

> ID：15507302
> 
> 赞同：4
> 
> 时间：2013-03-19T18:12:01.833
> 
> 标签：magento, import, magento-1.7, freeze

将我的类别结构导入 Magento 1.7.0.2 后，当我尝试使用 System->Import/Export Import 功能进行任何操作时，它只是在按下“检查数据”按钮后挂起。

为了测试这是否与我尝试处理的 csv 的大小有关，我最近使用 5 行 2 列 csv 对其进行了测试。“请稍候”消息与旋转的加载轮一起显示。这种情况会无限期地持续下去。

非常感谢任何建议/建议。

![在此处输入图像描述](../Images/5b50b2be158b883cff58d7d51288e3df.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-18T10:45:53.073

在我的情况下，256MB 的默认内存限制是问题所在。即使 Feed 中只有 50 种产品，Magento 仍然需要大量内存。增加内存限制`.htaccess`为我解决了这个问题：

```
php_value memory_limit 2048M 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-25T18:12:15.103

我的经验是，有时 csv 文件通过“检查数据”步骤但随后挂起，因为文件中实际上存在无效的内容。要诊断这一点，您可以将 csv 文件构建几个条目并继续尝试成功重新导入它，直到它再次挂起，然后您就知道错误条目在哪里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-09T12:08:07.973

很简单，你的标题应该是

_address_middlename,firstname,lastname,email,password_hash,middlename,_address_firstname,_address_lastname,_address_street,_address_postcode,_address_city,_address_country_id,_address_region,_address_telephone,created_at,_website,_store,created_in,group_id,reward_update_notification,reward_warning_notification,_address_default_billing_,_address_default

您必须将 csv 文件的编码更改为 UFT-8 或 ansi。然后它将起作用。

你可以使用edit plus来解决这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-14T15:25:45.730

可能你尝试加载大的导入文件和 php 挂起并抛出关于 memory_limit 的致命错误你可以在 apache 错误日志上检查它，通常它们位于 /var/log/httpd/error.log

谢谢！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-19T22:47:47.520

我也遇到了同样的问题，只有 9 种产品的清单很短。这是我经过大量尝试错误后解决问题的方法

1.  检查您在导出选项时是否使用 CSV 和 UTF-8
2.  如果您的文件正确，但导入仍然失败，请复制原始文件并将记录分成两个文件，确保保留两个文件的第一行（命名所有列的那个）
3.  上传第一个文件，然后继续下一个。就我而言，这两个文件都有效——想想为什么，正如我所说：这是一个相当短的列表。
4.  如果其中一个文件再次失败，但另一个文件通过，则将该文件中的信息再次切成两半，直到您可以查明导致您在导入过程中感到悲伤的记录

# node.js - Node.js util.inherits 问题

> ID：15507304
> 
> 赞同：1
> 
> 时间：2013-03-19T18:12:03.067
> 
> 标签：node.js

我正在尝试创建一个扩展 EventEmitter 的类，并且我使用的是 Node.js 文档中的相同示例。

```
var events, http, https, util;
events = require('events');
util = require('util');

function Feeder() { events.EventEmitter.call(this); }

util.inherits(Feeder, events.EventEmitter); 
```

然后，当我创建 Feeder 对象的实例时，出现以下错误： feeder = new Feeder();

**TypeError：对象不是函数**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:27:09.603

[乔纳森·洛诺夫斯基](https://stackoverflow.com/users/15031/jonathan-lonowski)

发现了我的问题。我不得不补充：

```
module.exports = Feeder; 
```

在我的 feeder.js 中。

# head - 使用 libgit2 获取远程 HEAD？

> ID：15507305
> 
> 赞同：2
> 
> 时间：2013-03-19T18:12:04.187
> 
> 标签：head, git-remote, libgit2

我似乎无法弄清楚如何获得`git_reference *`特定遥控器的 HEAD。

我有：

```
git_repository * repo = NULL;
git_reference *   ref = NULL;

/* ...load repository... */

if(git_reference_lookup(&ref, repo, "remotes/origin/HEAD"))
    printf("Error obtaining reference to remote HEAD!"); 
```

运行应用程序时会显示错误消息，指示未找到引用。但是，远程 HEAD 确实存在：

```
$: 查找 .git/refs/*
.git/refs/heads
.git/refs/heads/master
.git/refs/remotes
.git/refs/remotes/origin
.git/refs/remotes/origin/HEAD
.git/refs/tags
```

为什么我无法获得`git_reference *`远程 HEAD？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T18:17:46.583

您需要指定引用的完整路径。例如：

```
int error = git_reference_lookup(&ref, repo, "refs/remotes/origin/HEAD"); 
```

libgit2 无法`refs/`为您添加前缀，否则您将无法在其他地方打开引用，尤其是`HEAD`引用。

# php - 如何访问对象的这一部分

> ID：15507310
> 
> 赞同：-2
> 
> 时间：2013-03-19T18:12:36.117
> 
> 标签：php, object, curl

我正在使用 curl 将数据发布到 drupal 服务器上的 json 文件。我有这个工作，它返回一个像这样的字符串：

```
{
  "result":"success",
  "user":{
    "uid":"15",
    "theme":"",
    "signature":"",
    "signature_format":"plain_text",
    "created":"1335991710",
    "access":"1363715947",
    "login":1363716262,
    "status":"1",
    "timezone":"America/Los_Angeles",
    "language":"",
    "picture":"0",
    "data":false,
    "uuid":"89847add-54c8-c4b4-5dfc-bddc96e99919",
    "roles":{
      "2":"authenticated user",
      "4":"dOP staff"
    },
    "field_user_client":{
      "und":[
        {
          "nid":"17740"
        }
      ]
    }
  }
} 
```

我正在尝试获取`result`json 字符串的一部分。我尝试将字符串转换为对象，但这没有用。我尝试了以下方法：

```
<?php
$curlResult = curl_exec($ch);
echo $curlResult->result; //fails
?> 
```

我需要做什么才能完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:17:34.710

CURL 真的需要吗？这应该可以正常工作：

```
<?
$resArray = json_decode($ch, true);
$result = $resArray['result'];
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T18:18:47.690

我对 Curl 不太了解，但它看起来像一个 JSON 数组。您可能需要使用 php 函数[json_decode()](http://php.net/manual/en/function.json-decode.php)。尝试类似：

```
<?php
$curlResult = curl_exec($ch);
$array = json_decode($curlResult->result);
echo $array->result;
?> 
```

如果您需要将数组放回 JSON，还有[json_encode() 。](http://php.net/manual/en/function.json-encode.php)

# javascript - 在 iframe 的内容上使用 Javascript

> ID：15507314
> 
> 赞同：0
> 
> 时间：2013-03-19T18:12:42.750
> 
> 标签：javascript, jquery, iframe

我有一个页面，上面有一些选项卡式内容。几个选项卡包含 iframe，我使用一个方便的小脚本来调整 iframe 的大小以适应其内容。它是

```
function autoResize(id){
    var newheight;

    if(document.getElementById){
        newheight=document.getElementById(id).contentWindow.document.body.scrollHeight;
    }
newheight=(newheight)+40; // Makes a bit of extra room
    document.getElementById(id).height= (newheight) + "px";
} 
```

今天我添加了一个小 jQuery 脚本来停止显示选项卡区域，直到它完全加载。当加载完成时，这会阻止选项卡进行难看的小跳跃。这是脚本：

```
$(document).ready(function(){
    $("#tabber").hide();
    $("#loading").hide();
    $("#loading").fadeIn(1000);
 });
$(window).load(function(){
    $("#loading").hide();
    $("#tabber").fadeIn(300);
 }); 
```

加载 div 包含一个加载图标，tabber div 是选项卡区域的全部内容。

该脚本还停止了 iframe 调整大小的工作。为了更好地理解它，我添加了另一个脚本：

```
function checkResize(id){
      var win=document.getElementById(id).contentWindow.document.body.scrollHeight;
      alert(win); 
```

果然，“赢”出现为零。如果我删除 $("#tabber").hide() 行，“win”会显示 iframe 高度的合理数字。

有没有另一种方法可以使两者兼容？

Vlad 提出了解决方案：我必须使用 jQuery 版本的 visibility=hidden 而不是 jQuery 版本的 display:none。这在 jQuery 中实际上并不存在，所以我从[另一个 StackOverflow 问题](https://stackoverflow.com/questions/9614622/equivalent-of-jquery-hide-to-set-visibility-hidden)中发现了如何编写我自己的函数来做到这一点。

最终脚本是

```
(function($) {
    $.fn.invisible = function() {
        return this.each(function() {
            $(this).css("visibility", "hidden");
        });
    };
    $.fn.visible = function() {
        return this.each(function() {
            $(this).css("visibility", "visible");
        });
    };
}(jQuery));
    $(document).ready(function(){
        $("#tabber").invisible();
        $("#loading").hide();
        $("#loading").fadeIn(1000);
     });
    $(window).load(function(){
        $("#loading").hide();
        $("#tabber").visible();
     }); 
```

感谢 Vlad 和 RAS，感谢他们不厌其烦地查看我的问题并提出他们的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:35:02.963

如果不先将其设置为可见，您似乎无法获得 iframe 的正确高度或宽度。那是它的样式`display`设置为`none`（通过调用`hide()`方法）的时候。您是否尝试将“可见性”设置为`hidden`，看看它是否有所作为？

如果不是，那么其中一种解决方案是用绝对定位的 div 覆盖选项卡区域，然后在 iframe 加载时隐藏该 div 并调整选项卡的大小：

```
$('#iframeID').load(function () {
    $('#coverDivID').hide();
    checkResize(); // or autoResize();
}); 
```

或者，您可以在 iframe 内完成所有工作，而不是覆盖 div。这意味着在完全加载之前不显示 iframe 的内容。也就是说，在 iframe 中有一个小 div，它显示加载进度（一个图标或“请等待...”消息）。当 iframe 的内容被加载时，它会移除进度 div 并显示其内容。然后使用上面的方法调整选项卡的大小。如果 iframe 的内容没有与容器不同的可见边框或背景，这将起作用。否则你仍然会看到跳跃。

# c++ - 引入可变时间步的麻烦

> ID：15507320
> 
> 赞同：7
> 
> 时间：2013-03-19T18:13:04.317
> 
> 标签：c++, timer

我目前在大学做计算机游戏编程，正在用 C++ 创建物理引擎。

我被要求通过 GetTickCount() 方法引入时间步长，尽管存在不准确之处，因为它适合我们要进入时间步长的当前深度

我的问题是，现在我引入了基于时间步长的运动，通过更新函数的两个不同覆盖绘制到屏幕的对象似乎不起作用。

通过在代码中添加断点，看起来 mElapsedTime 似乎没有传递任何值，我被难住了。

抱歉，如果这篇文章太罗嗦或有些离题，我试图提供尽可能多的上下文，这是我的第一篇文章，感谢任何帮助。

（frameStartTime 参数在更新和绘制帧之前只需要一个滴答计数）

编辑：浮点类型的 mElapsed 时间，以便更容易在粒子类的更新中相乘（例如 pos.x = velocity.x * timeStep），这就是从无符号长转换为浮点的原因，它仍然是多余的吗?

```
void Simulation::gameLoopDelay(DWORD frameStartTime)
{
    DWORD presetFrameInterval = 16;
    DWORD frameProcessingTime = GetTickCount() - frameStartTime;

    if (frameProcessingTime < presetFrameInterval)
    {
        Sleep(presetFrameInterval - frameProcessingTime);
    }

    mElapsedTime = (float)frameProcessingTime / 1000.0f;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T20:11:21.293

我认为，基本上，您需要将代码更改为：

```
void Simulation::gameLoopDelay(DWORD frameStartTime)
{
    DWORD presetFrameInterval = 16;
    DWORD frameProcessingTime = GetTickCount() - frameStartTime;

    if (frameProcessingTime < presetFrameInterval)
    {
        Sleep(presetFrameInterval - frameProcessingTime);
    }

    frameProcessingTime = GetTickCount() - frameStartTime;

    mElapsedTime = (float)frameProcessingTime / 1000.0f;
} 
```

这不是最推荐的方法，因为`Sleep`这里可能锁定了整个线程。只在部分时间内完成框架可能会更好，但我认为这将修复您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T20:12:12.807

我不确定（因为你没有提供足够的信息），但我看到的第一个问题是你`mElapsedTime = (float)frameProcessingTime / 1000.0f;`不管`Sleep(...)`. 换句话说，你忘了考虑睡眠。为此，您必须`GetTickCount()`在调用`Sleep(...)`. 但即便如此，您的代码也会变得过于样板且容易出错。

通过编写执行简单任务的小型、灵活且可重用的类开始解决您的问题：

```
class Stopwatch {
public:
  Stopwatch(): _start(0), _elapsed(0), _running(false) {}

  void
  start() {
    if (_running)
      return;

    _running = true;
    _start   = GetTickCount();
  }

  void
  stop() {
    if (!_running)
      return;

    _elapsed += GetTickCount() - _start;
    _running  = false;
  }

  void
  reset() {
    _running = false;
    _elapsed = 0;
  }

  void
  restart() {
    _running = true;
    _elapsed = 0;
    _start   = GetTickCount();
  }

  bool
  isRunning() const {
    return _running;
  }

  DWORD
  elapsed() const {
    return _running ? _elapsed + (GetTickCount() - _start) : _elapsed);
  }

  bool
  hasExpired(DWORD interval) const {
    return elapsed() > interval;
  }

private:
  DWORD _start;
  DWORD _elapsed;
  bool  _running;
}; 
```

如何利用这个类来满足您的需求很简单。

其次，我真的不明白你为什么要使用`Sleep`. 我最后一次看到帧延迟的例子 - 大约是 5 年前在一些关于编写玩具游戏的蹩脚教程中。这玩意在旧游戏中确实很流行，但在现代游戏中却毫无意义。当然，如果这是你的任务要求，那么我很抱歉，但这句话仍然适用。

最后，我想根据我自己在实时可视化方面的经验给你一些额外的建议。**永远不要**`GetTickCount`使用Windows API（或 Linux API，无关紧要）程序员中的原始工具或其他流行的废话来编写与时间相关的代码，因为它再次闻起来像是关于创建玩具游戏的过时教程。

你问那用什么？好吧，这些天我们很幸运，因为那里有精心设计的、可靠的、跨平台的库，比如[Boost](http://www.boost.org/)。您可能应该熟悉它，但是如果您不熟悉 - 您绝对应该这样做。对于您的特定问题，有一个经过精心设计的模块[Boost.Chrono可以正确处理时间。](http://www.boost.org/doc/libs/1_53_0/doc/html/chrono.html)我在几个涉及实时渲染的项目中都使用过它，不得不承认它非常健壮，值得学习。

另一个库 - [Boost.Units](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_units.html) - 这是编写稳定和准确的物理引擎所**必需的。**该库为各种单位系统模型（例如，SI 或 CGS）的单位（力、质量、速度、加速度等）和数量提供类型安全的支持。它基于模板元编程，因此不会产生运行时开销。

再一次，我明白你的任务可能不允许这样的事情。但是，我相信我在这里提到的所有内容将来都会对您有价值。顺便说一句，这是一个很好的例子，说明你应该知道多少比大学作业提供的知识能够解决现实生活中的问题。

如果您仍然特别需要有关您的问题的更多帮助 - 我需要更多信息。例如，首先向我们展示游戏循环的整个代码。

# c++ - 恶魔 iluErrorString() 导致访问冲突

> ID：15507321
> 
> 赞同：2
> 
> 时间：2013-03-19T18:13:16.780
> 
> 标签：c++, access-violation, devil

请看一下我第一天 VC++ 的结果。它包含一个我知道的错误。我的问题是，devil 想出了一个错误，但尝试使用 iluErrorString() 将此错误解码为字符串会导致访问冲突......

```
#pragma comment(lib, "ILU.lib")
#pragma comment(lib, "ILUT.lib")

#include <iostream>
#include <conio.h>
#include <stdio.h>

#include <IL/il.h>
#include <IL/ilu.h>
#include <IL/ilut.h>

using namespace std;

int main(){
FILE *myFile;
ILuint fileSize;
ILubyte *Lump;

ilInit();

ILuint ImageName; // The image name to return.
ilGenImages(1, &ImageName); // Grab a new image name.

ilBindImage(ImageName); //bind the image

myFile = fopen("C:/Documents and Settings/Bartjan/Desktop/c++ meuq/test/Debug/image.png", "r"); //open the file for reading
if (myFile != NULL){
    fseek(myFile, 0, SEEK_END); //get file size
    fileSize = ftell(myFile);

    Lump = (ILubyte*)malloc(fileSize); //allocate mem
    fseek(myFile, 0, SEEK_SET); //set the file pointer
    fread(Lump, 1, fileSize, myFile); //read the entire file into mem

    fclose(myFile);

    ilLoadL(IL_PNG, Lump, fileSize);
    free(Lump);
}

ilDeleteImages(1, &ImageName); //delete the image

ILenum error;
while ((error = ilGetError()) != IL_NO_ERROR) {
    cout << error << ": " << iluErrorString(error);
}

_getch();
return 0;
} 
```

它咳出一个错误 1285，这意味着它不明白这一点：

```
ilLoadL(IL_PNG, Lump, fileSize); 
```

这是我知道的。问题在这里：

```
cout << error << ": " << iluErrorString(error); 
```

这会导致访问冲突，我不知道为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-21T20:50:47.573

如果您没有像对 IL 那样初始化 ILU，则会出现此问题：

```
iluInit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-02T12:29:11.453

这是因为 iluErrorString 和 ilGetString 一样总是返回 0。

# xcode - XCode中的前缀Subversion注释？

> ID：15507326
> 
> 赞同：0
> 
> 时间：2013-03-19T18:13:31.893
> 
> 标签：xcode, svn, commit

有谁知道您是否可以将 XCode 配置为在尝试提交文件时为注释条目添加前缀？我正在使用 XCode 4.6。

我问的原因是我有多个项目与多个开发人员并行进行。我想要一种对提交评论进行分类的方法。带有项目名称的前缀注释会很有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-13T12:04:51.933

你不能，不是在 XCode 5 中。让我有点吃惊的是，你的团队使用 Xcode 来提交任何东西，也许使用第三方解决方案管理提交可以解决问题？

# ruby-on-rails - 无法识别可安装在导轨上的发动机路线

> ID：15507327
> 
> 赞同：3
> 
> 时间：2013-03-19T18:13:37.997
> 
> 标签：ruby-on-rails, rails-routing, rails-engines

我做了一个可安装的引擎。在引擎中，我创建了一个助手（位于 /app/helpers/my_engine），如下所示：

```
module MyEngine
  module ApplicationHelper
    def link_to_login(label = "Login", options = {})
        link_to label, some_path, options
    end
  end
end 
```

在 engine.rb 我添加了这段代码：

```
 initializer 'my_engine.action_controller' do |app|
      ActiveSupport.on_load :action_controller do
        helper MyEngine::ApplicationHelper
      end
    end 
```

一切正常，但是，当我在另一个应用程序中加载引擎并使用辅助函数时，我收到此错误：

```
Undefined method `some_path' for MyEngine:Module 
```

当我在父应用程序中使用引擎的路径时，我以这种方式调用路径：`my_engine.some_path`，我在 routes.rb 中为命名空间的别名执行此操作：

```
mount MyEngine::Engine => "/my_engine", :as => "my_engine" 
```

我应该如何调用引擎助手中的路径？`my_engine.some_path`因为任何人都可以更改路由的别名，所以放在helper 里面不是一个好主意；这样做的方法是什么？

**更新**：引擎的路线。

```
 MyEngine::Engine.routes.draw do

      #Devise for Users
      devise_for :users, {
        class_name: 'MyEngine::User',
        path_names: {sign_in: "login", sign_out: "logout"}, 
        :path => "u", 
        :controllers => { :registrations => "my_engine/users/registrations", :sessions => "my_engine/users/sessions" },
        module: :devise
      }

      match 'auth/:provider/callback', to: 'auth#create'
      match 'auth/failure', to: redirect('/')

      #Management of Users
      resources :users

      #Devise for Admins
      devise_for :admin_users, {
        :class_name => "MyEngine::AdminUser", 
        path_names: {sign_in: "login", sign_out: "logout"}, 
        :path => "d", 
        :controllers => { :registrations => "my_engine/admin_users/registrations", :sessions => "my_engine/admin_users/sessions" },
        module: :devise
      }

      #Management of Admins
      resources :admin_users

    end 
```

**更新#2**：也许，正确的方法是使用代理路径。检查[http://edgeapi.rubyonrails.org/classes/Rails/Engine.html](http://edgeapi.rubyonrails.org/classes/Rails/Engine.html)和[已安装的 Rails 引擎中的命名路线](https://stackoverflow.com/questions/8029192/named-routes-in-mounted-rails-engine)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-16T04:52:04.317

您是否尝试过`engine.some_path`这样做会引用引擎内部的 some_path。假设 some_path 在引擎内部；或者`main_app.some_path`如果 some_path 在您的主应用程序中

# curl - Filepicker.io - 通过 URL 和 cURL 上传

> ID：15507331
> 
> 赞同：0
> 
> 时间：2013-03-19T18:13:44.727
> 
> 标签：curl, filepicker.io

是否可以执行以下操作？

1.  通过给它一个 URL 将图像上传到 Filepicker.io
2.  通过 cURL 完成

我在文档中找不到提到其中任何一个的地方

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T21:15:26.927

是的，这是可能的：

```
>>> curl -X POST -F fileUpload=@filename.txt https://www.filepicker.io/api/store/S3?key=MY_API_KEY
{"url": "https://www.filepicker.io/api/file/WmFxB2aSe20SGT2kzSsr", "size": 234, "type": "text/plain", "filename": "tester.txt", "key": "1ilWxmaRRqhMd2vSbSyB_tester.txt"} 
```

或者

```
>>> curl -X POST -d url="https://www.filepicker.io/static/img/watermark.png" https://www.filepicker.io/api/store/S3?key=MY_API_KEY
{"url": "https://www.filepicker.io/api/file/N49i6hPRBeropWnCWOLw", "size": 8331, "type": "image/png", "filename": "watermark.png", "key": "a1RyBxiglW92bS2SRmqM_watermark.png"} 
```

[https://developers.filepicker.io/docs/web/#fpurl-store](https://developers.filepicker.io/docs/web/#fpurl-store)上的完整文档

# ios - 修复视图 ios 6 的方向问题

> ID：15507339
> 
> 赞同：0
> 
> 时间：2013-03-19T18:14:06.577
> 
> 标签：ios, ios6.1

我正在尝试创建一个简单的 ios 6 应用程序。我在我的初始视图控制器中添加了一个视图和一个按钮，这是由故事板创建的。

我试图了解方向如何与视图/按钮/图像/等一起使用。

1.  当我启动模拟器时，我看到的第一个问题是由于某种原因它默认为横向。我本来希望默认是纵向的。我该如何调整？在我的视图控制器中，我有以下内容：

    -(NSUInteger)supportedInterfaceOrientations { 返回 UIInterfaceOrientationMaskPortrait; }

    -(BOOL) shouldAutorotate { 返回 YES; }

    -(UIInterfaceOrientation)preferredInterfaceOrientationForPresentation { return UIInterfaceOrientationMaskPortrait; /* 我得到一个隐式转换。我也在这里警告。*/ }

我还尝试在“摘要”选项卡中修改“支持的界面方向”以支持，但那里也没有运气。

2.  当我通过模拟器或手机改变方向时，视图消失或变得非常薄。无论我处于什么方向，如何将宽度保持在 100%？我附上了一些屏幕截图。

这是它的样子： ![在此处输入图像描述](../Images/9663aee0b410e95d3f1c88e8848392a4.png)

但是当我改变方向时，会发生这种情况： ![在此处输入图像描述](../Images/bf490c4bd348194bbd5c076c462dc6d1.png) ![在此处输入图像描述](../Images/fb4e1c51c686edeadacb3d56cfbb7568.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T20:06:33.473

模拟器将始终以 plist 中支持的方向下列出的第一个方向启动。如果您先放置横向，它将以横向模式启动。

对于调整大小问题，您需要在按钮上设置高度约束。转到 storyboard ，选择按钮，然后使用 storyboard 视图底部的约束菜单。

# css - 将阴影添加到剪切框

> ID：15507345
> 
> 赞同：2
> 
> 时间：2013-03-19T18:14:34.570
> 
> 标签：css

我可以使用 CSS 制作下面的框及其剪切三角形（带有边框技巧），只是没有带有轻微噪音的背景图案。

![在此处输入图像描述](../Images/8caaaea56d1a5c9b5e09ff5cad127b31.png)

可以用背景图案制作镂空三角形吗？

也被阴影卡住了！我怎样才能添加它？

我是否应该更好地切换回旧方法，在盒子周围使用跨度和背景图像？

编辑：具有一张背景图像的解决方案。

![在此处输入图像描述](../Images/89f7c64d17038e8b1da82fb2ca0db873.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:47:51.470

我刚刚使用了一点 CSS`box-shadow`魔法；所以这是我认为你想要的近似值。

[http://jsfiddle.net/jMEL8/](http://jsfiddle.net/jMEL8/)

# android - 在 Android 上通过 i-jetty 公开 WSDL

> ID：15507346
> 
> 赞同：2
> 
> 时间：2013-03-19T18:14:35.697
> 
> 标签：android, wsdl, service-reference, ijetty, java2wsdl

我想将 android 用作公开 WSDL 的 Web 服务，我将能够在 Visual Studio 中“添加服务引用”。

我需要在 android 上构建一个 web 服务，我检查了[i-jetty](https://code.google.com/p/i-jetty/ "安卓移动平台的网络服务器")，解决方案可能有效，

如何通过 i-jetty 公开 WSDL

（我将通过 LAN 使用 android，它始终连接到电源，因此 web 服务是正确的解决方案，我只需要它类似于 WCF 服务的工作）

谢谢！伊扎尔。

# mysql - 多对多选择：缺少数据

> ID：15507348
> 
> 赞同：0
> 
> 时间：2013-03-19T18:14:48.777
> 
> 标签：mysql, sql, select, many-to-many, relational-database

**在大学数据库中，我在学生**和他们注册的**模块**之间建立了多对多的关系：使用**status**的桥接表。

桥接表**状态**有一个多字段主键（使用*student*和*module*的唯一组合；stud_id 和 mod_id）

但是，当从旨在列出所有这些数据的一般选择查询返回数据时：

```
SELECT status.stud_id, student.fname, student.sname, status.mod_id, modle.mtitle, status.grades
FROM status
INNER JOIN modle
ON status.mod_id=modle.mod_id 
INNER JOIN student
ON status.stud_id=student.stud_id 
GROUP BY status.stud_id 
```

该查询不会考虑学生可能有*许多*模块，并且只会将学生显示为具有*单个*模块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:17:21.030

你为什么用`GROUP BY status.stud_id`？这就是为什么学生只有一个结果的原因。

我在您的查询中看不到任何聚合函数，因此您可能只需删除`GROUP BY`：

```
SELECT status.stud_id, student.fname, student.sname, status.mod_id, modle.mtitle, status.grades
FROM status
INNER JOIN modle
ON status.mod_id=modle.mod_id 
INNER JOIN student
ON status.stud_id=student.stud_id 
```

# javascript - 无法在 .js 文件中命中断点

> ID：15507349
> 
> 赞同：6
> 
> 时间：2013-03-19T18:14:50.200
> 
> 标签：javascript, debugging, windows-8, visual-studio-2012, visual-studio-debugging

我升级到 win 8。现在我在管理员权限下运行我的 VS 2012，我正在 MVC 4 中创建一个网站。我在网上检查了不同的解决方案，但没有一个有效。我的解决方案中有一个 javascript 文件，但是当我在其中放置断点时，在运行时我看到“没有为此文档加载任何符号”。几年前，我在 VS 2008 中遇到了这个问题，并以某种方式解决了。我不记得我是否真的改变了什么。现在它回来了！除了我不在win XP和VS 2008上。.pdb文件就位（bin\Debug），在互联网选项中启用了脚本调试，我可以毫无问题地调试我的c#代码。我在 2008 年遇到的情况完全一样。不管是什么，都是关于 javascript 的，因为内联 javascript 也会发生这种情况！

奇怪的是js代码正在运行，但我无法在vs 2012中调试它。

我已经知道解决方法，即使用 f12 工具或类似工具。情况并非如此，两周前我在 win 7 上安装了 VS 2012，我在 VS 本身中调试我的 js，没有任何问题。这是相同的安装，所以它必须与win 8相关。

那么我该如何解决呢？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-19T18:25:15.870

您可以使用调试器来访问您的代码。写吧

```
debugger; 
```

在您要调试的线路之前，这将起作用。我认为这将使您的生活变得轻松。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-24T14:55:20.797

**关闭您的用户帐户控制设置！**

如果这不起作用，请创建一个新应用程序（不要更改任何内容！）。确保在 Internet Explorer 中启用了 JavaScript 调试。

如果*这*不起作用，请确保在当前 Internet 安全区域（IE 选项）中启用了 JavaScript。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-07-13T17:24:36.277

通过使用 Visual Studio 2015，我发现断点仅在您在 Internet Explorer 中运行项目时才有效。

它不适用于 Firefox 和 Chrome。

对于 Firefox，您可以使用 Firebug（Firefox 的插件）来调试 JavaScript，如下所示：

[![在此处输入图像描述](../Images/08ab67c4a41bb1d0de2a0405acb89847.png)](https://i.stack.imgur.com/gdyZi.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-19T18:27:50.367

要检查的一件事是项目的属性页，以确保您的调试器类型是**Script Only**。只需右键单击解决方案资源管理器中的项目并检查**调试**页面。

![在此处输入图像描述](../Images/45fe221c96e27e5da42b1f5acc9f357b.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-27T17:36:00.077

尝试将断点放在 JavaScript 文件的第一条指令中，您的断点可能位于未到达的代码中。

# c# - 无法在 IIS 中托管 Web 服务

> ID：15507350
> 
> 赞同：2
> 
> 时间：2013-03-19T18:14:50.673
> 
> 标签：c#, web-services, iis, wcf-hosting

我一直在开发一个 web 服务，并通过直接从 VS2012 在浏览器中查看它来测试它，但现在我需要将它托管在 IIS 中，并且由于某种原因，它根本无法工作。

我已经尝试在本地 IIS 下将其发布为新的 Web 应用程序。它按原样显示，但是当我在 IIS 中切换到内容视图时，右键单击该`MyService.svc`文件，然后选择“浏览”，我得到的只是一个新的 Web 浏览器窗口，显示找不到该站点。

为了检查问题是否与我的服务中的某些内容有关，或者是一般问题，我尝试从我编译的 VS 项目模板（一个新的**WCF 服务应用程序**）创建一个新的测试服务，在我的浏览器中运行良好，然后尝试发布到 IIS，结果相同。

一些额外的信息：

*   我正在使用 64 位 Windows 8
*   这两个项目都在 .Net 4.0 中
*   我的配置将平台目标设置为任何 CPU
*   在 IIS 中，服务使用具有默认设置的**DefaultAppPool**

我最近能够在 IIS 中发布一个网站，并且运行良好 - 我真的认为该过程应该与服务几乎相同，但显然我遗漏了一些东西。

***更新***：针对以下评论的一些额外信息：

*   我目前正在尝试在本地查看服务
*   发布服务的文件夹中没有`.asmx`文件，只有一个`.svc`文件、一个`web.config`、一个文件夹。`bin/`
*   我确实有一个在同一个 IIS 网站（“默认网站”）下运行的网站，并且工作正常。

任何有关我可以尝试解决此问题的提示将不胜感激......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T11:52:26.230

作为记录，这就是为我解决问题的原因：

![启用 HTTP 激活](../Images/827d903b5f881737b1df6e29aa4e06f4.png)

# javascript - 获得“五月最后一个星期一”的最佳方式

> ID：15507352
> 
> 赞同：1
> 
> 时间：2013-03-19T18:15:00.243
> 
> 标签：javascript, date

使用 javascript 获得 5 月最后一个星期一的最佳方式是什么？我知道我可以得到这个月的最后一天，然后他们减去我想要的那一天的差。但是，有一种更简短、更优雅、更有效的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:43:27.583

```
function getLastMonday(month, year) {
  var d = new Date();
  if (year) { d.setFullYear(year); }
  d.setDate(1); // Roll to the first day of ...
  d.setMonth(month || d.getMonth() + 1); // ... the next month.
  do { // Roll the days backwards until Monday.
    d.setDate(d.getDate() - 1);
  } while (d.getDay() !== 1);
  return d;
}

getLastMonday();        // => Mon Mar 25 2013 12:44:39 GMT-0600 (MDT)
getLastMonday(5);       // => Mon May 27 2013 12:41:52 GMT-0600 (MDT)
getLastMonday(1, 2000); // => Mon Jan 31 2000 12:43:15 GMT-0700 (MST) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:56:44.527

所以，我只是意识到其他答案的问题是我的问题是错误的。我首先想要的是检查某一天是否是五月的最后一个星期一（或任何其他月份）。不是如何得到五月的最后一个星期一。对于那个很抱歉。

我相信我自己的问题的最佳答案是这个：

```
function lastMondayOfMay() {
    var d = new Date(2013, 5, 0); //last day of desired month
    return d.getDate() - (d.getDay() - 1);//1 here represents monday
} 
```

对于其他月份，只需创建指向所需月份最后一天的日期。

感谢大家努力回答这个问题。但我的问题仍然存在：这是了解给定日期是否是本月最后一个星期一的最佳方法。使用我的解决方案和他们比较日期是我目前正在做的事情。有没有更直接的方法？

我相信这也将回答我的第二个问题：

```
function isLastMonday(date) {//date format: 'DD/MM/YYYY'
    var d = new Date(date);
    return d.getDay() === 1 && (d.getDate() + 7) > 30; //1 here represents monday
}

isLastMonday('05/27/2013');//true
isLastMonday('05/26/2013');//false
isLastMonday('02/25/2013');//true
isLastMonday('03/24/2013');//false 
```

我实际上正在测试更多的日期，它们似乎很好。任何人都可以提出我的代码将失败的情况吗？

好的，我也将回答第三个问题。唯一可能发生这种情况的月份是二月。这是因为如果我的测试不及格，最后一个星期一应该在 24 日之前发生。由于我只担心可能（我用它来计算阵亡将士纪念日假期），我相信我的解决方案会做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-11T16:06:41.730

发布我的解决方案。如果最后一天是星期天，我发现另一个解决方案有一些问题（它返回 32 作为最后一个星期一的日期 - 请参阅 2015 年 5 月 31 日星期日。

```
 function lastMondayOfMay(year, month) {
            var d = new Date(year, month, 0); //last day of desired month
            if (d.getDay() == 0) {
                //deals with sunday - subtracts 6 instead of adding 1
                return d.getDate() - 6;  
                } else {
                return d.getDate() - (d.getDay() - 1);
                }
            return d.getDate() - (d.getDay() - 1);//1 here represents monday
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-08T22:35:22.747

在没有 momentjs 的情况下使用 javascript。

```
/**
 * @param {number} month - From 0 to 11.
 * @param {number} year
 */
function lastMondayOfMonth(month, year) {
    var WEEK_DAYS = 7;
    var DAY_OF_WEEK = 1; // 1 for monday
    var day;
    var lastDateOfMonth = new Date(year, (month + 1), 0);
    var lastDay = lastDateOfMonth.getDate();
    var lastWeekDay = lastDateOfMonth.getDay();

    if (lastWeekDay === DAY_OF_WEEK) {
        day = lastDay;
    } else if (lastWeekDay < DAY_OF_WEEK) {
        day = lastDay - (WEEK_DAYS - DAY_OF_WEEK);
    } else {
        day = lastDay - (lastWeekDay) + DAY_OF_WEEK;
    }

    return day;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-19T18:32:38.940

我不知道比这更短或更有效的方法（但是，我不是 JavaScript 大师）：

```
var d = new Date( 2013, 5, 0 );
while( d.getDay() != 1 )
{
    d.setDate( d.getDate() - 1 ); 
}
console.log( d.toString() ); 
```

（部分受到[这个答案](https://stackoverflow.com/a/9481478/165154)的启发， 评论中提到的[sachleen](https://stackoverflow.com/users/219118/sachleen)）

但这基本上是你在你的问题中已经提出的。

# javascript - 对 javascript 行为使用数据属性和类/ID 有什么区别？

> ID：15507354
> 
> 赞同：16
> 
> 时间：2013-03-19T18:15:07.257
> 
> 标签：javascript, jquery, css, design-patterns, unobtrusive-javascript

我一直在开发一个应用程序，前端主要使用 jQuery。

我们依赖页面上存在的某些分类元素，以便我们可以将行为附加到它们。例如：

```
$('.block').on('click', clickHandler); 
```

其他开发人员之一说我们应该将表示与逻辑分离（我同意）。因为类是用来展示的，他建议使用数据属性：

```
$('[data-attribute-name~=value]').on('click', clickHandler); 
```

但是，我对这种方法有以下了解：

*   它的性能明显低于基于类的选择器
*   HTML 类用于向 DOM 元素赋予语义含义，因此不限于表示用途。

[在阅读不引人注目的 javascript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)时，我没有看到任何特别提及。

**`[data-attribute]`使用over 类/ID的主要区别是什么？**

严格来说是性能/偏好问题吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-19T18:20:55.570

> 因为这些类用于演示

这只是部分正确。类用于表示和行为。使用类将行为附加到多个元素并没有错。

数据属性非常适合携带额外的元素特定信息，但我强烈建议不要将数据属性用于附加行为的唯一目的。

如果您真的需要将类的使用分开用于表示和行为目的，我建议您适当地命名它们。例如，您可以这样做：

```
<div class="pres-alert">Watch Out!</div> 
```

对比

```
<div class="behav-alert">Watch Out!</div> 
```

或者

```
<div class="pres-alert behav-alert">Watch Out!</div> 
```

但是，我觉得这有点矫枉过正。我经常发现自己对行为和表现都使用相同的类名。最后，行为和表现往往密切相关。

更新：

为了让您的共同开发人员的评论更进一步，我相信他将`class`属性与表示相关联实际上是错误的。`class`属性的 HTML5 规范甚至声明：

> 作者可以在类属性中使用的标记没有其他限制，但鼓励作者使用描述内容性质的值，而不是描述所需内容呈现的值。

[http://www.w3.org/html/wg/drafts/html/master/dom.html#classes](http://www.w3.org/html/wg/drafts/html/master/dom.html#classes)

因此`class="big-red-box"`，您应该使用而不是使用`class="alert"`. 现在，您可以将样式附加到`alert`该类 ( `color:red;font-size:bold`) 以及行为（即悬停时弹出）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T18:25:00.513

如果没有其他原因，您绝对应该尽可能坚持使用 ID，因为它是最快的选择器。我会更多地扩展您的第二点：HTML 类应该*只*用于向 DOM 元素传递语义含义。那是使用我假设您在上面的 CSS 类，例如：

```
.block {
    display: block;
} 
```

实际上违背了 HTML/CSS 的精神。这并不是说我们不都这样做，但关键是您至少应该在要绑定到的类名后面具有语义含义：

```
$(".show-popup").on('click', showPopup); 
```

根据您的具体问题，“主要区别是什么：”正如您所说，使用该类更快/性能更高。语法当然更干净。该规范[似乎没有具体](http://www.w3.org/TR/html5-author/global-attributes.html#embedding-custom-non-visible-data-with-the-data-%2a-attributes)说明使用 data- 属性作为选择器。但是，我一直将 data- 属性解释为旨在存储其值用于算法的标量数据。这意味着值可能会经常更改，并且数据可能会频繁地添加到元素中/从元素中删除，这会使它们不适合选择器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T18:16:44.660

一个类可以与多个元素相关联，而一个 id 仅与一个元素相关联。

我只是更仔细地阅读了您的问题，发现您需要更多信息：

我个人使用`data`属性来存储可以在处理事件时使用的必要变量，并且我将“事件”类用于任何将由 jQuery 而不是 CSS 使用的东西。例如：

```
<a class="event" data-action="Alert" data-id="123" href="#">Foo</a>

<script>

var Event = {
  Alert: function(ele){
     alert(ele.attr("data-id")); //alerts "123"
  };
};

$(".event").on("click",function(){
   var ele = $(this);
   Event[ele.attr("data-action")](ele);
});

</script> 
```

希望有帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T18:19:17.270

您可以有多个类，您可以将一些名称与**逻辑**关联，将其他名称与**表示**关联，并保持类选择器的性能。

```
<el class="block logicClass" /> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-19T18:20:56.113

数据属性不仅适用于选择器。有时您想为脚本可能使用的标签赋予额外的含义。

例如，您可以`data-attribute-validate-repeat="firstpassword"`在密码重复字段上设置一个，其中的值是指第一个密码。然后表单验证器可以读取此属性以通过 ID 查找其他字段。除非您使用特殊的命名约定，否则这不能仅通过类和 ID 来完成，这不是很整洁。

# highcharts - xAxis 标签和 useHTML #1 的问题

> ID：15507355
> 
> 赞同：3
> 
> 时间：2013-03-19T18:15:08.723
> 
> 标签：highcharts

我遇到了 xAxis 标签和 useHTML 的问题：

我们使用 onclick 方法将 xAxis 标签包装在一个 div 中，以调用另一个 JS 函数。这可以在这里看到...

[http://jsfiddle.net/yg2SF/1/](http://jsfiddle.net/yg2SF/1/)

但是，如果您单击 xAxis 标签，则不会发生任何事情...

为了解决这个问题，我将 useHTML 标志更改为 true，如此处所示……您会注意到现在 onclick 方法有效。

```
useHTML:true 
```

[http://jsfiddle.net/yg2SF/2/](http://jsfiddle.net/yg2SF/2/)

但是，现在标签不必要地换行了……您可以看到 xAxis 标签现在跨越 2 行。为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T10:48:03.650

为内联标签设置样式宽度，请参阅：http: [//jsfiddle.net/yg2SF/8/](http://jsfiddle.net/yg2SF/8/)

```
 formatter: function() {
                return '<div style="width:70px" onclick="alert(\''+this.value+'\')">'+this.value+'</div>';    
            } 
```

对您的评论：
`<a>`标签被翻译成 SVG，`<div>`带有自定义 onclick 的标签不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T20:45:54.413

Highchart 的默认行为是将标签值包装在`<tspan>`标签内的`<text>`标签中。这两个标签似乎都将“空白：nowrap”作为默认浏览器行为，因此它们不会换行。

您的 jsFiddle 示例专门将空白设置为“正常”，这将在适当时允许文本换行。在连字符上换行是可以接受的，这样带有“Jan-2005”（等）的标签就会换行。如果您只是从样式块中删除“whiteSpace: 'normal'”元素，它们将不再换行。如果您真的想确保它们不换行，您甚至可以将其更改为“whiteSpace: 'nowrap'”。

此外，您在评论中链接的示例不使用 HTML，因此 Highchart 实际上是在剥离您的`<a>`标签，但足以将您的 href="javascript:alert()" 代码转换为 onclick 事件`<tspan>`

# android - 将 OnTouchListener 设置为包含在膨胀的 xml 中的多个按钮

> ID：15507356
> 
> 赞同：1
> 
> 时间：2013-03-19T18:15:11.050
> 
> 标签：android, ontouchlistener, android-inflate

我需要在主布局活动上膨胀这个布局 15 次（按 3 行 5 列排列），并为每个按钮实例设置 OnTouchListener `padButton`，这是最好的方法吗？我尝试膨胀布局但不知道将侦听器设置为分隔...

膨胀drumpad.xml的布局

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/padLayout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/pad"
    android:orientation="vertical"
    android:padding="3dp" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center_vertical|clip_horizontal|top"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/padButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/titles2" />

        <Button
            android:id="@+id/padSelect"
            style="?android:attr/buttonStyleSmall"
            android:layout_width="15dp"
            android:layout_height="wrap_content" />

    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="21dp" >

        <Button
            android:id="@+id/padName"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_margin="2dp"
            android:background="#0f0f0f"
            android:padding="2dp"
            android:text="@string/pad"
            android:textColor="#dfdfdf"
            android:textSize="10sp" />

    </LinearLayout>

</LinearLayout> 
```

主布局（容器）activity_drum.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/DrumLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#999"
    android:gravity="center"
    android:orientation="vertical"
    tools:context=".Drum" >

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:46:35.883

我不确定您是否可以拥有多个具有相同 ID 的按钮。但是，您可以获取根视图，将其转换为`ViewGroup`. 根据需要使用`getChildCount()`and`getChildAt()`和递归。像这样：

```
//we start from the root view
ViewGroup rootViewGroup = findViewById(R.id.rootLinearLayout);

for (int i = 0; i < this.getChildCount(); i++) {
    View childView = this.getChildAt(i);

    //is it a button?
    if (childView instanceof Button) {
        Button button = (Button) childView;
        button.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                //insert here the code
            }
        });
    }

    if (childView instanceof ViewGroup) {
        //iterate throught childView children
    }
} 
```

好的，您不能毫无痛苦地使用此代码并将其投入使用。这只是一个起点。但...

我认为您需要**重新考虑您的方法**并尝试开发自己的自定义视图，我会使用**复合视图**，请看这里：

[http://developer.android.com/guide/topics/ui/custom-components.html#compound](http://developer.android.com/guide/topics/ui/custom-components.html#compound)

你需要一点练习，但我认为这对你的目的很有帮助。

**编辑**

也许你可以在这里找到一些有用的信息：

[将一组按钮添加到 Android 应用程序中的 GridView](https://stackoverflow.com/questions/775188/add-an-array-of-buttons-to-a-gridview-in-an-android-application)

和这里：

[http://developer.android.com/guide/tutorials/views/hello-gridview.html](http://developer.android.com/guide/tutorials/views/hello-gridview.html)

在这里（**鼓机**）：

[http://mindtherobot.com/blog/420/android-beatz-making-a-drum-machine-app/](http://mindtherobot.com/blog/420/android-beatz-making-a-drum-machine-app/)

# java - InputStream 返回 NullPointerException (Java)

> ID：15507357
> 
> 赞同：0
> 
> 时间：2013-03-19T18:15:11.867
> 
> 标签：java, android, nullpointerexception, inputstream

这是获取 NullPointerException 错误的代码：

```
InputStream is = getAssets().open("twentyone.txt");
InputStreamReader iz=new InputStreamReader(is);
BufferedReader br = new BufferedReader(iz); 
```

可能出了什么问题？

*编辑：printStackTrace

```
03-19 18:20:18.662: E/AndroidRuntime(929): Caused by: java.lang.NullPointerException 
```

编辑2：代码直到异常：

```
public class ListViewAa3 extends ListViewA{

public String[] process(String cti)throws IOException{
    String ctid=cti;
    Log.d("Outside try invoked","tag1");
    try{
        Log.d("beginning of try invoked","tag2");
        try{
    InputStream is = getAssets().open("USCOUNTIES.txt");
    InputStreamReader iz=new InputStreamReader(is);
    BufferedReader br = new BufferedReader(iz);}catch(Exception e){e.printStackTrace();} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:09:09.093

好，我知道了。我必须将主要活动的上下文传递给这个类，然后使用`context.getAssets.open("twentyone.txt");`

对于有相同问题的任何人，请执行以下操作：将其放入具有活动的类的 onCreate 函数中： `Context context=getApplicationContext();`

将上下文传递给新类的函数（在我的例子中是“process(String a,Context context)”）然后在 process 函数中输入：

```
InputStream is = context.getAssets().open("twentyone.txt"); 
```

我花了 4 个小时才弄清楚这么愚蠢的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:19:26.977

Maybe`getAssets()`为 null 并尝试检查文件 twinone.txt 是否存在，如果存在则尝试输入完整的文件路径并重新运行您的应用程序！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-19T18:22:19.590

您打开的文件没有完整路径，这就是错误的原因。尝试

```
new File("twentyone.txt").getAbsolutePath() 
```

# android - 循环PC到Android Socket通信？

> ID：15507358
> 
> 赞同：0
> 
> 时间：2013-03-19T18:15:14.293
> 
> 标签：android, multithreading, sockets, tcp

首先，我是 Android 和 Java 的新手……我正在研究一个机器人，需要向它发送无线命令。在尝试了几种方法来做到这一点并得到很多错误和时间调试之后（不理解示例代码中发生的一半......）我发现最简单的通信方式是使用套接字。我按照[http://android-er.blogspot.com/2011/01/simple-communication-using.html上的教程进行操作](http://android-er.blogspot.com/2011/01/simple-communication-using.html)，而且效果很好！它完全按照预期的方式进行，没有错误，令人欣慰，但不是我想要的。它从 Android 开始，向 PC 发送消息，然后等待 PC 的响应，然后结束，直到再次单击该按钮。我希望它朝相反的方向发展。我试着只是切换代码，但不断逼近。我终于明白了，所以在你从 android 发送消息后，PC 会响应，然后 android 会自动发送另一条消息，所以它总是在等待 PC。它工作得不是很好，有时会因为按钮而崩溃。它也不再显示来自 PC 的消息！我正在尝试将代码的重要部分放入一个线程中，以便永远不需要触摸 android 并且它一直在循环......我不知道为什么这不起作用，我收到以下错误：

```
 11-24 13:21:11.492: E/AndroidRuntime(2656): android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views. 
```

我的整个程序是一门课：

```
import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.IOException;
import java.net.Socket;
import java.net.UnknownHostException;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class MainActivity extends Activity {

EditText textOut;
TextView textIn;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

//textOut = (EditText)findViewById(R.id.textout);
//Button buttonSend = (Button)findViewById(R.id.send);
textIn = (TextView)findViewById(R.id.textin);
//buttonSend.setOnClickListener(buttonSendOnClickListener);

 // start a loop
new Thread(new Runnable()
{
  public void run()
  {
    while (true)
    {
     Socket socket = null;
     DataOutputStream dataOutputStream = null;
     DataInputStream dataInputStream = null;

     try {
      socket = new Socket("192.168.0.9", 8888);
      dataOutputStream = new DataOutputStream(socket.getOutputStream());
      dataOutputStream.writeUTF("Received!");
      dataInputStream = new DataInputStream(socket.getInputStream());
      textIn.setText(dataInputStream.readUTF());

     } catch (UnknownHostException e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
     } catch (IOException e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
     }
     finally{
      if (socket != null){
       try {
        socket.close();
       } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
       }
      }

      if (dataOutputStream != null){
       try {
        dataOutputStream.close();
       } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
       }
      }

      if (dataInputStream != null){
       try {
        dataInputStream.close();
       } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
       }
      }
     }
    }
  }
}).start();
}} 
```

任何关于更好方法的帮助或建议都会很棒！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:26:24.247

它不起作用，因为您试图从后台线程更新用户界面，这是不可能的。

```
textIn.setText(dataInputStream.readUTF()); 
```

一个可能的解决方案是使用一个[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)可以在消息交换后轻松更新 UI 的地方。

编辑：找到这个非常好的[答案](https://stackoverflow.com/questions/4369537/update-ui-from-thread#4370785)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:59:51.147

尝试将新线程更改为

```
 runOnUiThread(new Runnable() { 
```

# php - 从外部站点进行身份验证

> ID：15507359
> 
> 赞同：0
> 
> 时间：2013-03-19T18:15:18.840
> 
> 标签：php, asp.net, http, session, authentication

首先，我试图用谷歌搜索我所有的问题，但没有找到我的答案的解决方案。如果会话不存在，我正在尝试使用现有的浏览器会话或进行身份验证。

我有站点 A：[https](https://mysite.com/Login.aspx) ://mysite.com/Login.aspx 该站点是我尝试使用现有浏览器会话或在不存在会话时进行身份验证的站点

站点 B： http: [//myinternalsite.com/work.php](http://myinternalsite.com/work.php) 这是我正在尝试构建的内部站点，因此我可以针对站点 A 执行某些功能

我首先认为我可以使用 jquery jsonp 发布到我认为我可以做到的站点，但它必须首先经过身份验证，否则站点 A 只会将所有帖子重定向到登录页面。我使用了使用基本 http 身份验证的外部第三方 ui 测试站点来截取我的站点 A 的屏幕截图，但我不确定如何在我的端复制该身份验证过程。

我正在寻找一个方向或示例来让我朝着正确的方向前进，看起来应该很容易，但我从未在 php 中使用过身份验证，所以我迷路了:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:42:28.423

不知道你想做什么，但我会给你一个我认为你想做的例子。

站点 1

您的 aspx 表单，向站点 2 发送登录信息或会话信息

站点 2

检索该信息对其进行清理，并检查该用户是否存在，或者站点 1 发送的用户会话是否已登录。您可以使用身份验证功能，检查数据库以查看会话或用户是否存在

站点 2

```
<?php
    $user_is_loggedin = 1; // this should come from database or function check user
    if ($user_is_loggedin == TRUE) {
     echo 1; // return user id, current session stored in database on site2
    } else {
     echo 0;
    }
?> 
```

站点1：不知道aspx所以..

```
if (reponse == FALSE ) {
 //REDIRECT TO LOGIN
} ELSE {
 // Do whatever you would like with that reponse
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:19:54.457

我不确定这是否是确切的解决方案，但它可能会引导您走向正确的道路。我有类似的问题。

我有 2 个网站，我想从第二个网站监控网站 1。这意味着我想获取从网站 1 到网站 2 的所有统计数据、在线用户、更新、页面访问等。

为了实现这一点，我在网站 1 中创建了一个 Sender.php 控制器（注意我使用 MVC 框架）。Sender.php 正在获取上面的所有信息，并使用**cron job**发布到网站 2 。

我在网站 2 中有 Reciever.php，其中发布了所有上述数据。我在 Reciever.php 中所要做的就是抓取数据，对其进行清理并作为统计数据显示在屏幕上。

# openstack - 使用 jcloud 在 OpenStack 中从 ovf 文件创建图像

> ID：15507362
> 
> 赞同：0
> 
> 时间：2013-03-19T18:15:25.900
> 
> 标签：openstack, occi, jclouds, openstack-nova

我一直在阅读[http://www.jclouds.org/documentation/quickstart/openstack/](http://www.jclouds.org/documentation/quickstart/openstack/)和[https://groups.google.com/forum/?fromgroups#!forum/jclouds](https://groups.google.com/forum/?fromgroups#!forum/jclouds)但我没有找到任何示例从 OpenStack 存储库中的 OVF 文件创建映像。有谁有想法吗？我真的很感激任何帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T00:36:23.493

这对于 jclouds 是不可能的，因为它还不支持图像服务（又名 Glance）API。不过，您可以使用 Glance 客户端[添加新图像。](http://docs.openstack.org/cli/quick-start/content/glance_client.html#glance-image-create)您还需要查看有关[容器格式](http://docs.openstack.org/developer/glance/formats.html#container-format)的此页面。

这是否真的有效可能取决于您的 OpenStack 部署和管理程序的选择。

# perl - 排序是否有助于提高 Perl 中 grep 的效率

> ID：15507367
> 
> 赞同：7
> 
> 时间：2013-03-19T18:16:05.010
> 
> 标签：perl, grep

我正在寻找有关 Perl`grep`功能如何工作的一些细节。我正在这样做：

```
if ( grep{ $foo == $_ } @bar ) {
  some code;
} 
```

假设`@bar`很大（数十万个元素）。对于我的数据，如果我 sort `@bar`，值`$foo`更可能出现在数组的开头附近而不是结尾附近。我想知道这是否有助于提高性能。

换句话说，使用上面的代码，是否通过检查是否`grep`顺序移动，然后在发现任何值为真后立即退出？或者它会在返回值之前检查每个元素吗？`@bar``$foo == $_``@bar`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T18:37:35.833

`grep`不会短路，因此元素的顺序无关紧要。

虽然 List::MoreUtils`first`确实会短路，但整个列表必须在调用之前放入堆栈。

这将是最好的：

```
for (@bar) {
   if ($foo == $_) {
      some code;
      last;
   }
} 
```

**更新**：我最初迭代索引，因为它使用 O(1) 内存，但正如 ysth 提醒我的那样`for (@bar)`（与一般情况相反）。`for (LIST)`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-19T18:20:03.773

由于您的使用`grep`是在标量上下文中，因此它返回匹配元素的数量。为了计算这个，Perl 无论如何都必须访问每个元素，因此从这个角度来看，排序不太可能有助于提高性能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T20:29:45.100

在您的示例中， **grep**将迭代整个数组，无论匹配多少元素。

如果您能够保持此数组排序 - 使用二进制搜索来搜索您的值会更快。您也可以将数组转换为哈希（使用键 = 数组元素）并以恒定时间进行检查，但这会占用额外的内存。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T19:52:58.830

With regard to your question

> With my data, if I sort @bar, values of $foo are more likely to appear near the beginning of the array than near the end. I'm wondering if this will help performance.

If the list is sorted in numerical order then you can write

```
sub contains {
  my ($list, $item) = @_;
  for (@$item) {
    return $_ == $item if $_ >= $item;
  }
  return !1;
}

some_code() if contains(\@bar, $foo); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T05:42:51.610

这取决于。A`grep { $x == $_ } @a`不会从分支预测中受益，但`grep { $x < $_ } @a`可以！

```
#!/usr/bin/env perl

use strict;
use warnings;

use Time::HiRes qw( clock_gettime CLOCK_MONOTONIC );

use constant MIN => 0;
use constant MAX => 1000;
use constant AVG => int(MIN  + (MAX - MIN) / 2);
use constant N_LOOPS => 40000;
use constant ARRAY_LEN => 10000;

## is grep faster for sorted arrays?

##
## RANDOM ARRAY VALUES
##
my $n = 0;
my @a = map { int(rand() * (MAX - MIN) + MIN) } 1 .. ARRAY_LEN;
my $duration = -clock_gettime ( CLOCK_MONOTONIC );
for(my $i = 0; $i < N_LOOPS; $i++) {
    $n += grep { AVG < $_ } @a;
}
$duration += clock_gettime ( CLOCK_MONOTONIC );
print "duration: $duration secs, n = $n".$/;

##
## PREDICTABLE ARRAY VALUES
##
$n = 0;
@a = sort {$a <=> $b} @a;
$duration = -clock_gettime ( CLOCK_MONOTONIC );
for(my $i = 0; $i < N_LOOPS; $i++) {
    $n += grep { AVG < $_ } @a;
}
$duration += clock_gettime ( CLOCK_MONOTONIC );
print "duration: $duration secs, n = $n".$/;

## and now we try to eliminate side effects by repeating

##
## RANDOM ARRAY VALUES
##
$n = 0;
@a = map { int(rand() * (MAX - MIN) + MIN) } 1 .. ARRAY_LEN;
$duration = -clock_gettime ( CLOCK_MONOTONIC );
for(my $i = 0; $i < N_LOOPS; $i++) {
    $n += grep { AVG < $_ } @a;
}   
$duration += clock_gettime ( CLOCK_MONOTONIC );
print "duration: $duration secs, n = $n".$/; 

##
## PREDICTABLE ARRAY VALUES
##
$n = 0;
@a = sort {$a <=> $b} @a;
$duration = -clock_gettime ( CLOCK_MONOTONIC );
for(my $i = 0; $i < N_LOOPS; $i++) {
    $n += grep { AVG < $_ } @a;
}   
$duration += clock_gettime ( CLOCK_MONOTONIC );
print "duration: $duration secs, n = $n".$/; 
```

结果：

```
duration: 27.7465513650095 secs, n = 199880000 <-- unsorted
duration: 26.129752348992 secs, n = 199880000  <-- sorted
duration: 28.3962040760089 secs, n = 202920000 <-- unsorted
duration: 26.082420132996 secs, n = 202920000  <-- sorted 
```

另请参阅[为什么处理排序数组比处理未排序数组更快？](https://stackoverflow.com/questions/11227809/why-is-processing-a-sorted-array-faster-than-an-unsorted-array)

# php - 将 HTML 表格行转换为 PHP 数组并将其保存到数据库？

> ID：15507368
> 
> 赞同：4
> 
> 时间：2013-03-19T18:16:06.220
> 
> 标签：php, html, html-parsing, php-parser

我正在尝试将 html 表行保存到 php 数组中，然后将数组保存在数据库中。

```
<form action="" method="post">
        <table class="widefat" id="theTable">
                        <thead>
                                <tr>
                                   <th>Level Identifier</th>
                                    <th>Non-logged in message</th>
                                    <th>Logged in message</th>
                                </tr>
                        </thead>
                        <tbody>

                                  <tr>
                                    <td><input type="text" value="" style="height: 19px;background-color: white;font-size:10px;"/></td>
                                    <td><textarea style="font-size:10px;" name="promo_msg_free" cols="43" rows="1">This is your custom message template</textarea></td>
                                    <td><textarea style="font-size:10px;" name="promo_msg_free" cols="43" rows="1">This is your custom message template</textarea></td>
                                  </tr>

                                   <tr>
                                    <td><input type="text" value="" style="height: 19px;background-color: white;font-size:10px;"/></td>
                                    <td><textarea style="font-size:10px;" name="promo_msg_free" cols="43" rows="1"></textarea></td>
                                    <td><textarea style="font-size:10px;" name="promo_msg_free" cols="43" rows="1"></textarea></td>
                                  </tr>

                        </tbody>    
                    </table> 
                </form> 
```

如何检索每一行数据并将其保存到数组元素，最后我将数组保存到数据库？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T18:24:43.780

**如果您想保存每一行的 HTML，请执行以下操作：**

使用 jQuery。

```
var rowsArray = {};
var i = 0;
$('#theTable tr').each(function({
    rowsArray[i] = $(this).html(); // if you want to save the htmls of each row
    i++;
}); 
```

然后使用**ajax**发布这些数据

```
$.ajax({
   type: 'post',
   url: URL_TO_UR_SCRIPT,
   data: { myarray : rowsArray },
   success: function(result) {
     //ur success handler OPTIONAL
   }
}); 
```

在 PHP 方面，您可以：

```
$array = isset($_POST['myarray']) ? $_POST['myarray'] : false;
if ($array) { 
  $array = serialize($array);
  //UPDATE YOUR DATABASE WITH THIS SERIALIZED ARRAY
} 
```

您不能将 php 数组保存到数据库中，因此您需要对其进行序列化，并且当您从数据库中检索它时使用**unserialize** ()

**如果您的意思是要保存输入和文本区域的值**，那么您需要为每个元素设置名称，然后使用 $_POST 在脚本中访问它们。

```
 $array = array;
 foreach($_POST as $key => $value) {
    //sanitize your input here
    $array[$key] = $value;
 }
 $serialized = serialize($array);
 //save serialized array in your DB 
```

**注意/提示：** 仅供参考，不要使用 html 表格来布置表单元素。表应该用于数据表示。您可以使用**div**和**css轻松地做同样的事情**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:20:46.887

这是基本的 PHP 用法。您提供输入名称，当您提交表单时，提交页面中的脚本将完成这项工作。

您的价值观将驻留在

```
$_POST 
```

大批。所以你通过

```
$_POST['input_name'] 
```

您必须通过调用其名称来遍历每个值，然后将其相应地放入数据库中。

# wcf - * 在设置 OperationContext.Current.ClaimsPrincipal 之后，是否有 WCF 的事件或钩子发生？

> ID：15507371
> 
> 赞同：2
> 
> 时间：2013-03-19T18:16:24.973
> 
> 标签：wcf, security, hook

我正在寻找一个钩子、事件或其他一些可用于在`OperationContext.Current.ClaimsPrincipal`设置之后但在调用实际方法之前运行一些自定义代码的扩展点。我尝试过使用以下内容：

*   `IDispatchMessageInspector`(`AfterReceiveRequest`方法)
*   `IParameterInspector`(`BeforeCall`方法)
*   `IAuthorizationPolicy`(`Evaluate`方法)
*   `ICallContextInitializer`(`BeforeInvoke`方法)

这些点都没`OperationContext.Current.ClaimsPrincipal`有价值。

如何在设置传入声明之后但在方法本身运行之前运行一些代码（在我的情况下，它是授权和审计代码，基于传入的声明）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:39:31.487

对于 RP（您的应用程序）的授权代码，实现 ClaimsAuthorizationManager 来进行授权检查。具体来说，重写 CheckAccess 方法并根据您的授权检查返回 true/false。ClaimsPrincipal 可以从传递给您的 CheckAccess 方法的上下文中访问。

更多背景和示例在这里：

[http://msdn.microsoft.com/en-us/library/system.security.claims.claimsauthorizationmanager.aspx](http://msdn.microsoft.com/en-us/library/system.security.claims.claimsauthorizationmanager.aspx)

# javascript - 正则表达式如何匹配没有字符的单词

> ID：15507374
> 
> 赞同：2
> 
> 时间：2013-03-19T18:16:34.677
> 
> 标签：javascript, regex

如何匹配类似`{anyWord}`但排除开头有下划线的任何内容，例如：`{_doNotMatchThis}`？

输入：

```
hi there {matchPlease}{andThis}, just doing some regex {_notThis} 
```

期望的匹配：

```
{matchPlease}
{andThis} 
```

如果没有排除 start 的条件`{_`，我知道这个正则表达式模式运行良好：`\{\w+\}`

我试图将其修改为`\{!_\w+\}`，基本上是说，“匹配任何以 开头`{`，然后有一个*不*以 开头的单词`_`，然后以”结尾的单词`}`。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T18:19:35.187

这个怎么样？

```
/\{([^_].*?)\}/ 
```

如果您只想要文字，请根据评论中的@Geo 和@nhahtdh：

```
/\{([^_]\w*)\}/ 
```

# javascript - 功能在 Code Playground 中按预期工作，而不是在生产服务器上。

> ID：15507377
> 
> 赞同：0
> 
> 时间：2013-03-19T18:16:44.557
> 
> 标签：javascript, google-visualization

任何想法为什么它在代码游乐场而不是我的生产网络服务器上加载和运行？它应该都具有相同的功能吗？我是 js 新手。我可能只需要一些指示？

```
 <script type="text/javascript" src="https://www.google.com/jsapi"></script>
  <script type="text/javascript">
      google.load('visualization', '1', { packages: ['corechart'] });
</script>
 <script type="text/javascript">
     function drawVisualization() {
         // Create and populate the data table.
         var data = new google.visualization.DataTable();
         data.addColumn('string', 'x');
         data.addColumn('number', '% Und Sizer');
         data.addColumn('number', '% Und QC');
         data.addRow(["1-11", 1, 1]);
         data.addRow(["2-9.5", 2, 1]);
         data.addRow(["3-10", 4, 1]);
         data.addRow(["4-11", 8, 10]);
         data.addRow(["5-10.5", 7, 1]);
         data.addRow(["ELM-11.5", 7, 1]);
         data.addRow(["UND-11.5", 8, 1]);
         // Create and draw the visualization.
         new google.visualization.ColumnChart(document.getElementById('visualization')).
  draw(data, { curveType: "function", width: 900, height: 400,
      vAxes: { 0: { logScale: false, maxValue: 30 },
          1: { logScale: false, maxValue: 50 }
      },
      series: {
          0: { targetAxisIndex: 0 },
          1: { targetAxisIndex: 1 }
      }
  }
      );
     }
     google.setOnLoadCallback(drawVisualization);
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T22:39:24.983

我想到了。我调用了错误的元素。

# php - 开关 每2条记录之后？

> ID：15507383
> 
> 赞同：1
> 
> 时间：2013-03-19T18:17:03.727
> 
> 标签：php

我有这个代码：

```
 for ($i = 0; $i < count($listings); $i++)
    {
                if ($i != 0 && $i%2 == 0)
                   {
                      $endul .= $arr[$i] . '</ul> <hr /> <ul class="listing">';
                   }
                   else
                   {
                      $endul .= $arr[$i];
                   } 
```

我试图在 2 条记录后关闭一条记录，然后为接下来的 2 条记录重新打开，等等……到目前为止，代码似乎“在某种程度上”正常工作，但它正在获取前 3 条记录，然后关闭 UL 和不只是前2个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:43:47.167

这是我的第一篇 StackOverflow 帖子，请多多包涵 :)

问题在于这种情况：

```
if ($i != 0 && $i%2 == 0) 
```

如果您在循环过程中跟踪 $i 的值，您将获得以下信息：

```
$i = 0 ==> false
$i = 1 ==> false
$i = 2 ==> true
$i = 3 ==> false
$i = 4 ==> true 
```

所以它正在打印出来

```
 $arr[0] .
    $arr[1] .
    $arr[2] . '</ul> <hr /> <ul class="listing">' .
    $arr[3] .
    $arr[4] . '</ul> <hr /> <ul class="listing">' 
```

为了解决这个问题，你需要改变if条件

```
if ($i%1 == 1) 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T18:41:52.567

您可以先尝试将它们分组

```
$group = 2;
$listings = range("A", "Z");

foreach ( array_chunk($listings, 2) as $set ) {
    printf('<ul class="listing">%s</ul>', implode(array_map(function ($v) {
        return sprintf('<li>%s</li>', $v);
    }, $set)));
} 
```

或者

```
foreach ( array_chunk($listings, 2) as $set ) {
    printf('<ul class="listing">');
    foreach ( $set as $v ) {
        printf('<li>%s</li>', $v);
    }
    printf('</ul>');
} 
```

你会得到相同的结果

```
<ul class="listing">
    <li>A</li>
    <li>B</li>
</ul>
<ul class="listing">
    <li>C</li>
    <li>D</li>
</ul>
<ul class="listing">
    <li>E</li>
    <li>F</li>
</ul>
<ul class="listing">
    <li>G</li>
    <li>H</li>
</ul>
<ul class="listing">
    <li>I</li>
    <li>J</li>
</ul>

 ....... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T18:20:34.717

好吧，0 是第一条记录，而您的 if 语句专门排除了它。所以它直到第三条记录之后才会关闭，即 $i = 2。

例子：

```
for ($i = 1; $i < 10; $i++) {
    if ($i % 2 == 0) {
        echo '</ul>';
    }
} 
```

这对我来说很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T18:21:29.543

更改此行：

```
$endul .= $arr[$i] . '</ul> <hr /> <ul class="listing">'; 
```

对此：

```
$endul .= '</ul> <hr /> <ul class="listing">'.$arr[$i]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T18:41:49.770

这是 Perl 或 PHP，对吧？也许将来用那些语言标记它？无论如何，我怀疑您的问题是您的数组以零索引开头。

我在推测，但让我们假设您的 @arr 数组包含带有 HTML 标记的元素

```
<li>whatever</li> 
```

行项目。

让我们数一数你的元素：

元素 0 - 我是否通过了测试？否：添加第一个行项目，但不添加关闭、规则和打开。

要素 1 - 我能通过考试吗？否：添加第二个行项目，但不要添加关闭、规则和打开。

要素 2 - 我能通过考试吗？是：添加第三行项目，然后添加关闭、规则和打开。

要素 3 - 我能通过考试吗？否：添加新的第一个行项目，但不添加关闭、规则和打开。

要素 4 - 我是否通过了考试？是：添加新的第二行项目，然后添加关闭、规则和打开。

元素 5 - 您知道模式：我们在结束前重复两个订单项的组。

因为此代码以零开头，所以我们在第一组项目中有零和两个的额外情况。

指数的模数可以测试奇数而不是偶数：

```
if ($i%2 == 1) 
```

而且我认为该测试会以您想要的方式构建格式，您可以在每个奇数元素之后添加“记录关闭”标记。我假设您必须在循环之外进行逻辑来执行最终的关闭标记。当然，在最终元素为奇数的情况下，您仍然会有一个额外的空无序列表容器，但也许可以为此添加一些东西？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-16T18:44:32.263

这是最好的方法：

```
 $rows = range(1,10);
        $i=1;
        echo "<ul>";
        foreach($rows as $key=>$row)
        {
            echo "<li>$row</li>";
            if($i%2==0)
            {
              echo "</ul><ul>"; 
            }
            $i++;
        }
       echo "</ul>"; 
```

# vb.net - 如何使用此代码创建 DataGridView 列

> ID：15507390
> 
> 赞同：0
> 
> 时间：2013-03-19T18:17:26.367
> 
> 标签：vb.net, datagridview

几个月前我在网上找到了这段代码。它非常适合创建 datagridview 列。我从未使用它来创建组合框列。现在我需要这样做并且无法弄清楚如何为列分配值。而且，我找不到我第一次找到这段代码的地方。我现在可以找到它的片段，但没有完整的。

创建 textboxcolumn 并创建包含值的 dgv 行很容易。但是，我不知道如何创建一个组合框列。顺便说一句，在这种情况下，列可以对每一行使用相同的组合框值。

这是我的代码：

我创建了一个数据表来保存要绑定到 dgv 的数据：

```
Dim dt As New DataTable("Grid")
Dim dr As DataRow
dtSetupColumns(dt)

Public Sub dtSetupColumns(ByRef dt As DataTable)
        dt.Columns.Add("name_l", GetType(String))
        dt.Columns.Add("name_f", GetType(String))
        dt.Columns.Add("state", GetType(String))
End Sub 
```

为数据表赋值：

```
dr = dt.NewRow()
dr("name_l") = ' from query table
dt.Rows.Add(dr) 
```

创建 DataGridView 列：

```
dgvCreateColumns(dgv)

Public Sub dgvCreateColumns(ByRef inDataGridView As DataGridView)
  With inDataGridView.Columns
    .Add(dgvCreateColumn(ColumnStyle.TextBoxColumn, String.Empty, "Last Name", "name_l", 80, DataGridViewContentAlignment.MiddleLeft))
    .Add(dgvCreateColumn(ColumnStyle.TextBoxColumn, String.Empty, "First Name", "name_f", 80, DataGridViewContentAlignment.MiddleLeft))
    .Add(dgvCreateColumn(ColumnStyle.ComboBoxColumn, String.Empty, "State", "state", 80, DataGridViewContentAlignment.MiddleLeft))
  End With
End Sub

Public Shared Function dgvCreateColumn(ByVal ColumnType As ColumnStyle, ByVal format As String, ByVal headerText As String, ByVal dataPropertyName As String, ByVal width As Integer, ByVal alignment As DataGridViewContentAlignment, Optional ByVal bMakeVisible As Boolean = True, Optional ByVal inReadOnly As Boolean = False) As DataGridViewColumn
        Dim dgvC As DataGridViewColumn = Nothing

        Select Case ColumnType
            Case ColumnStyle.ButtonColumn
                dgvC = New DataGridViewButtonColumn
            Case ColumnStyle.CheckBoxColumn
                dgvC = New DataGridViewCheckBoxColumn
            Case ColumnStyle.ComboBoxColumn
                dgvC = New DataGridViewComboBoxColumn
            Case ColumnStyle.ImageColumn
                dgvC = New DataGridViewImageColumn
            Case ColumnStyle.LinkColumn
                dgvC = New DataGridViewLinkColumn
            Case ColumnStyle.TextBoxColumn
                dgvC = New DataGridViewTextBoxColumn
        End Select

        With dgvC
            .DataPropertyName = dataPropertyName
            .DefaultCellStyle.Alignment = alignment
            .DefaultCellStyle.Format = format
            If ColumnType = ColumnStyle.ButtonColumn Then
                '.colum()
            End If
            .HeaderText = headerText
            .Name = headerText
            .ReadOnly = inReadOnly
            If width = 0 Then
                .Visible = False
            Else
                .Width = width
                If bMakeVisible = False Then
                    .Visible = False
                Else
                    .Visible = True

                End If
            End If
        End With

        Return dgvC
    End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:18:46.247

您必须遍历每一行中的每个单元格

```
For i as Integer = 0 to dgv.Rows.Count -1 
   Dim gridComboBox As New DataGridViewComboBoxCell
   gridComboBox.DataSource = dt
   gridComboBox.ValueMember = dt.Columns(0).ColumnName
   dgv.Item(2, i) = gridComboBox 'Change the Cell in Column:2 Row:i to ComboBox
Next 
```

# controller - CakePHP 控制器创建一个空文件夹

> ID：15507392
> 
> 赞同：0
> 
> 时间：2013-03-19T18:17:32.990
> 
> 标签：controller, directory, add, cakephp-2.3

一旦我获得有关“添加”投资的新记录，我将很乐意自动创建一个文件夹。另外，如果这是文件夹也会获得记录的ID，我仍然更喜欢它。这可能吗？

目前我有以下。但他甚至没有给我一个文件夹。

```
$dir = new Folder(WWW_ROOT . 'files' . DS . 'images'); 
```

你可能有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:19:44.757

Folder 构造函数不会自动在磁盘上创建文件夹，您必须提供第二个参数为 true，请参阅[api](http://book.cakephp.org/2.0/en/core-utility-libraries/file-folder.html)

在你的情况下，这将是

```
$dir = new Folder(WWW_ROOT . 'files' . DS . 'images', true); 
```

您可以添加第三个参数来为新目录提供权限

# android - Android MediaPlayer 仅播放 m3u8 音频流

> ID：15507398
> 
> 赞同：1
> 
> 时间：2013-03-19T18:17:38.223
> 
> 标签：android, streaming, media-player, android-mediaplayer, m3u8

大家好，提前感谢，

经过一整天的寻找，搜索和尝试，我什至不知道这是否可能，或者问题是否出在代码中，或者问题是否出在服务器中....

首先MediaPlayer可以播放m3u8文件吗？

如果是...它仅在大于 3.0 或 4.0 的版本中？

如果我只是尝试在真实设备 4.0.4 中播放 url，我会收到错误 (1,-1010) 或错误 100 或 -214 .... 代码很简单：

```
MediaPlayer mp = new MediaPlayer();
fich="http://devimages.apple.com/iphone/samples/bipbop/gear1/prog_index.m3u8"; //e.g.
mp.setDataSource(localContext, Uri.parse(fich));
mp.setAudioStreamType(AudioManager.STREAM_MUSIC);
mp.setVolume(((float)volumenAudio / 100), ((float)volumenAudio / 100));
mp.prepare(); 
```

我这样做的方式是否存在基本错误？我不知道的事情？

最好的问候和感谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T23:59:27.367

对于您的第一个问题，*MediaPlayer 可以播放`m3u8`文件吗？*，答案是**肯定**的。`MediaPlayer`确实支持播放`MP3`列表文件的播放。

对于您的下一个问题，*它仅在大于 3.0 或 4.0 的版本中？*，我们需要仔细考虑答案。`Android 3.0`aka`HoneyComb`不是一个开放的发行版，因此，我不确定您的问题的答案。它可能被支持，但只是一个猜测。从/开始`m3u8`支持文件的播放。请找到源链接，其中为文件创建了播放器[http://androidxref.com/4.0.4/xref/frameworks/base/media/libmediaplayerservice/MediaPlayerService.cpp#583](http://androidxref.com/4.0.4/xref/frameworks/base/media/libmediaplayerservice/MediaPlayerService.cpp#583)`Android 4.0``ICS``m3u8`

如果你得到一个错误`error(1, -1010)`，这意味着在你的播放器的某个地方，引擎正在返回一个`ERROR_UNSUPPORTED`返回码。作为参考，您可以在[此处](http://androidxref.com/4.0.4/xref/frameworks/base/include/media/stagefright/MediaErrors.h#37)查看来源。

您将不得不进一步调试并定位问题。

# oracle - 这是 PL/SQL 中的表吗（如果不是，这段代码是怎么回事？）

> ID：15507399
> 
> 赞同：2
> 
> 时间：2013-03-19T18:17:41.903
> 
> 标签：oracle, plsql

有人可以澄清下面的 PL/SQL 代码在做什么吗？看起来 assets_type 是 base_Asset 的表。这是否使它成为一个表？

当彗星填充数据时，我很难将其可视化：

```
assets(v_ref_key)(dbfields(i).field) := rtrim(replace(strbuf_long2,'''','''''')); 
```

这类似于二维数组吗？这是否意味着用 v_ref_key 的索引填充 assets（临时）表中的字段列？

```
 PROCEDURE LOAD 
 IS

 TYPE dbfields_rec IS RECORD (field         dbfields.field%TYPE,
                         article_title dbfields.title%TYPE,  
                         image_title   dbfields.title%TYPE); 
 TYPE dbfields_type IS TABLE OF dbfields_rec INDEX BY BINARY_INTEGER;
 TYPE base_Asset IS TABLE OF VARCHAR2(4000) INDEX BY VARCHAR2(32);
 TYPE assets_type IS TABLE OF asset_type INDEX BY VARCHAR2(4000);
 dbfields                       dbfields_type;
 assets                  assets_type;
 v_ref_key               assets.ref_key%TYPE;

 -- CLIPPED Populate dbfields array code 
 -- It correctly populates

  FOR i IN 1..dbfields.COUNT LOOP
    BEGIN
        sqlbuf := '(select rtrim(ufld3), ' || dbfields(i).field ||
                  ' as col_label from assetstable ' ||
                        '  where  rtrim(ufld3) = ' || '''' || in_id || '''' || ' )';
       OPEN assets_cur FOR  
            sqlbuf;
       LOOP
          FETCH assets_cur INTO v_ref_key, strbuf_long2; 
          EXIT WHEN assets_cur%NOTFOUND;                 

          IF (trim(strbuf_long2) is not null and dbfields(i).field is not null) THEN
             assets(v_ref_key) (dbfields(i).field)
               := rtrim(replace(strbuf_long2,'''',''''''));
          END IF;
       END LOOP;
       close assets_cur;
    END;
  END LOOP;
END LOAD; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T03:28:20.667

PL/SQL 实际上只提供一维数组——但是如果你想使数组表现得像多维数组，那么数组的每个元素都可以是*另一个数组。*

这是一个非常人为的例子来说明：

```
DECLARE

  TYPE rows_type IS TABLE OF VARCHAR2(4000) INDEX BY VARCHAR2(4000);

  TYPE spreadsheet_type IS TABLE OF row_type INDEX BY VARCHAR2(4000);

  spreadsheet spreadsheet_type;

BEGIN

  spreadsheet ('row 1') ('column A') := 'XYZ';

END; 
```

第一个`('row 1')`是电子表格类型数组的索引，它将保存特定“行”的所有列；第二个`('column A')`是 rows_type 数组的索引。

但是，此实现的“多维”方面并不完美：虽然您可以根据需要使用整行，例如：

```
my_row rows_type;
...
my_row := spreadsheet ('row 1'); 
```

您无法选择特定列 - 无法将特定索引的行中所有元素的集合引用到 rows_type。你必须做一些事情，比如制作另一种类型并遍历第一个数组。

# html - 如何使用 CSS 应用反向文本掩码

> ID：15507401
> 
> 赞同：12
> 
> 时间：2013-03-19T18:17:46.193
> 
> 标签：html, css, mask, clipping

我会尝试用图片来解释我的问题。开始了。

1 - 此图像显示了屏蔽图像的文本，到目前为止一切顺利，我可以使用以下代码：

![在此处输入图像描述](../Images/2ee37d185e26afe234e0d10d5b34dbd7.png)

```
font-size: 120px;
background: url(image-to-be-masked.jpg) repeat 0 0, white;
-webkit-background-clip: text;
-webkit-text-fill-color: transparent; 
```

2 - 这另一个图像，文本创建相反的效果，只留下透明的文本区域。这就是我要的：

![在此处输入图像描述](../Images/c5b5f7353b853c290f30fc30a9cda49d.png)

有人试过吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T18:58:00.260

我不认为 CSS 可以做到这一点。但是您可以使用三个不同的嵌套元素将其组合在一起：

*   最外面的元素包含背景图像
*   中间元素包含中间图像
*   内部元素包含文本，并且具有与最外部元素相同的背景图像，`background-clip:text;`在您的第一个示例中使用 like 掩蔽。

这可行，但有点麻烦，因为您必须补偿蒙版背景位置才能达到所需的效果。这是一个例子：http: [//jsfiddle.net/dzkTE/](http://jsfiddle.net/dzkTE/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-09T10:03:50.367

我已经设法通过几种不同的方法实现了这一目标。在这里查看我的答案：[https ://stackoverflow.com/a/32476482/2315496](https://stackoverflow.com/a/32476482/2315496)

见下文：

您在 HTML/CSS/JavaScript 中寻找的内容有 3 种方式，其中一些比其他的更老套。

1.  用于`<canvas>`绘制您的形状和类型，并设置您的画布上下文`ctx.globalCompositeOperation="xor";`在哪里。`ctx`

```
var c=document.getElementById('myCanvas');
var ctx=c.getContext('2d');
ctx.font = "bold 36px Proxima Nova";
ctx.fillStyle='blue';
ctx.fillText("MORE",100,87);
ctx.globalCompositeOperation='xor';
ctx.beginPath();
ctx.fillStyle='white';
ctx.arc(150,75,75,0,2*Math.PI);
ctx.fill();
```

```
body{
  background: -webkit-radial-gradient(top left,rgb(23, 39, 34) 4%,rgb(56, 99, 99) 37%,rgb(22, 27, 15) 73%,rgb(22, 27, 14) 93%,#232323 100%);
  width:100%;
  height:100%;
}

html{
  height:100%
}
```

```
<canvas id='myCanvas'></canvas>
```

2.  使用`mix-blend-mode: screen`并将文本的颜色设置为黑色。

```
.blend-mode {
  background:white;
  border-radius:100%;
  width:150px;
  height:150px;
  line-height:155px;
  float:left;
  margin:20px;
  font-family: "Proxima Nova", Hevetica, sans-serif;
  font-weight:bold;
  color:black;
  text-align:center;
  vertical-align:middle;
  font-size:36px;
  mix-blend-mode: screen;
}

body{
  background: -webkit-radial-gradient(top left,rgb(23, 39, 34) 4%,rgb(56, 99, 99) 37%,rgb(22, 27, 15) 73%,rgb(22, 27, 14) 93%,#232323 100%);
  width:100%;
  height:100%;
}

html{
  height:100%;
}
```

```
<div class="blend-mode">MORE</div>
```

3.  使用`-webkit-text-fill-color:transparent`和`-webkit-background-clip:text`显示其背后的背景副本。这需要对背景副本进行一些对齐以匹配“原始”背景。

```
.wrap{
  margin:20px;
  float:left;
  position:relative;
}

.background {
  width: 150px;
  height: 150px;
  border-radius: 100%;
  background: white;
  position:absolute;
  top:0;
  left:0;
  z-index:4;

}

.text {
  position:absolute;
  top: 25px;
  left: 25px;
  z-index:5;
  background: -webkit-radial-gradient(top left, rgb(23, 39, 34) 4%, rgb(56, 99, 99) 37%, rgb(22, 27, 15) 73%, rgb(22, 27, 14) 93%, #232323 100%);
  font-family: Proxima Nova, Helvetica, sans-serif;
  font-weight:bold;
  line-height:100px;
  font-size: 36px;
  color: #666;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

body{
  background: -webkit-radial-gradient(top left,rgb(23, 39, 34) 4%,rgb(56, 99, 99) 37%,rgb(22, 27, 15) 73%,rgb(22, 27, 14) 93%,#232323 100%);
  width:100%;
  height:100%;
}

html{
  height:100%;
}
```

```
<div class="wrap">
  <div class="background"></div>
  <div class="text">MORE</div>
</div>
```

**这些都不太可能在跨浏览器上运行得很好，而且我还没有测试过它们！**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-05-24T05:26:51.527

```
* { margin: 0; padding: 0 }

header {
    overflow: hidden;
    height: 100vh;
    background: url(https://s3-us-west-2.amazonaws.com/s.cdpn.io/2017/17_04_art_bw_butterfly_bg.jpg) 50%/ cover
}

h2 {
    color: white;
    mix-blend-mode: difference;
    font: 900 35vmin/35vh cookie, cursive;
    text-align: center
}
```

```
<header>
    <h2 contentEditable role='textbox' aria-multiline='true'>And stay alive...</h2>
</header>
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-19T18:32:34.633

[对不起，我看错了。我尝试相反，认为：P]我认为你可以通过使用背景剪辑来做到这一点。

```
background-clip:text; 
```

[在这里](http://css-tricks.com/image-under-text/)检查（请尝试使用 chrome 或添加供应商前缀）。您可以查看[演示页面](http://css-tricks.com/examples/ImageUnderText/)表单 chris。

# r - 多变量 GARCH 包

> ID：15507405
> 
> 赞同：2
> 
> 时间：2013-03-19T18:18:02.837
> 
> 标签：r

我正在寻找一个包，它可以让我估计一个向量自回归模型，它的平均方程由一个 ARIMA 组成，然后是一个 GARCH 部分。使用什么多元 GARCH 方法并不重要，因此可以是从 VECH 到 BEKK 的任何方法。我知道那里有一个名为 mgarch 的软件包，但它似乎不在 CRAN 中。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T18:26:18.073

该`mgarch`软件包托管在 Github 上。它在[这里](https://github.com/vst/mgarch/)可用。

为了从 Github 安装 R 包，您可以使用Hadley 的[devtools](https://github.com/hadley/devtools)。这个先前的问题解决了如何做到这一点：[如何安装 R 包 github 存储库的开发版本](https://stackoverflow.com/questions/9656016/how-to-install-development-version-of-r-packages-github-repository)。

* * *

还有[rugarch](http://cran.r-project.org/web/packages/rugarch/index.html)提供外部回归器的可能性，还有[ccgarch](http://cran.r-project.org/web/packages/ccgarch/index.html)处理条件相关 GARCH 模型。

深入了解 CRAN Finance 的 TaskView 将很好地了解该领域的可用软件包。

# jquery - 有两个选择器 each() 无法使用 this:first-child 和 this:second-child

> ID：15507406
> 
> 赞同：0
> 
> 时间：2013-03-19T18:18:05.580
> 
> 标签：jquery, this, each

我有以下代码：

```
var tabla_szam = 1;
var etk_szam = 1;
$(".etrend_ossze, .tabla_sel").each(function () {
   if (etk_szam == 5) {
      tabla_szam++;
      etk_szam = 1;
   }
$((this).find(":first-child")).attr("id", "tabla_" + tabla_szam + "_" + etk_szam); //i want to reach the actual .etrend_ossze and .tabla_sel
$((this).find(":second-child")).attr("id", "tabla_sel" + tabla_szam + "_" + etk_szam);
etk_szam++;
}); 
```

控制台给了我这个错误：TypeError: this.find is not a function。我想通过 $this 作为第一个和第二个元素来达到实际的 .etrend_ossze 和实际的 .tabla_sel 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:20:06.160

代替

```
$((this).find(":first-child"))
$((this).find(":second-child")) 
```

经过

```
$(this).find(":first-child")
$(this).find(":nth-child(1)") //:second-child doesn't exist 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:26:26.653

这不是正确的方法：

```
 $((this).find(":first-child")).attr("id"..... 
```

它应该是：

无论是这种方式：

```
$(this).find(":first-child").attr("id".... 
```

或者这样：

```
$(":first-child",this).attr("id"..... 
```

嗯...但是，我从未听说过或读过`:second-child`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T18:22:53.587

Let's have a look at this line:

```
$((this).find(":first-child")) 
```

Now let's break it up a bit:

```
$(
    (this).find(":first-child")
) 
```

So the browser first does `(this)` (which returns the DOM element object) and then tries to call `find`. It would only call the jQuery function `$` on the result of the call to `find`. However, it never gets as far as calling `$`, because there is no `find` method on a native DOM element, so there is an error, as you show.

The solution is to get rid of the extra brackets:

```
$(this).find(":first-child") 
```

# asp.net-mvc - Kendo.editor 不解码 Html

> ID：15507407
> 
> 赞同：3
> 
> 时间：2013-03-19T18:18:15.180
> 
> 标签：asp.net-mvc, kendo-ui

我将 Kendo.EditorFor 用于文本框，但在视图中。它显示来自编辑器的 htmls 标签，这是我的控制器：

```
public ActionResult Create(OpininonModel opininonmodel)
{
    var addOpinion =
        new OpininonModel
        {
            Title=opininonmodel.Title,
            Content=Server.HtmlDecode(opininonmodel.Content),
            Id=opininonmodel.Id,
            IdUser=user,
        };
    db.Opinions.Add(addOpinion);
    db.SaveChanges();
    return RedirectToAction("Index");
} 
```

我`&lt;strong&gt;123123&lt;/strong&gt;`认为。我应该`HtmlDecode`在其他地方还是？

我在我的视图中试过这个：

```
@(Html.Kendo().EditorFor(model => model.Content).Encode(false)) 
```

但这给了我错误：

`A potentially dangerous Request.Form value was detected from the client`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T12:26:35.907

如果您使用 html 帮助程序，您可以在将值从视图接收到控制器后对其进行解码。

它来自他们的文档：这是[链接](http://docs.kendoui.com/getting-started/using-kendo-with/aspnet-mvc/helpers/editor/overview)

**处理服务器上的编辑器值**

编辑器值将作为字符串发布并映射到具有小部件名称的变量。请注意，默认情况下发布的值是 HTML 编码的，以规避 ASP.NET 请求验证。为了解码该值，请使用**HttpUtility.HtmlDecode**方法。

```
[HttpPost]
public ActionResult Save(string editor)
{
    string value = HttpUtility.HtmlDecode(editor);

    return View();
} 
```

我想这就是你要找的

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T18:25:33.087

Could you please try with `encoded: false`

```
$('.editor').kendoEditor({
     encoded: false
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-14T00:29:25.577

当您使用 $('.editor').kendoEditor() //without encoded:false 时，您应该在控制器中执行以下操作：

```
model.data = WebUtility.HtmlDecode(model.data);
ModelState.Clear(); 
```

# ios - 使用 Google Maps SDK for iOS 后应用程序大小增加

> ID：15507408
> 
> 赞同：6
> 
> 时间：2013-03-19T18:18:21.797
> 
> 标签：ios, maps, google-maps-sdk-ios

我尝试使用适用于 iOS 的 Google Maps SDK，它似乎为我们的应用程序增加了相当大的大小（96MB），目前只有 26MB（使用 Apple 地图）。

我会欣赏有关如何解决的任何反馈/经验。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T18:20:52.713

There isn't a way to resolve this. Its one of the cons of working with Google Maps SDK vs Apple maps.

Google Maps SDK is its own static framework that isn't preloaded on the device. Apple Maps are build into the OS as a dynamic framework.

**Another Possibility:** This is going to sound silly, but be sure you didn't copy the documentation or example code when downloading the Google Maps SDK into your app as well.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T23:30:55.080

现在使用适用于 iOS 的 Google Maps SDK 版本：1.3.1.3848，SDK 大小仅为 15 MB，而之前的版本 1.3.0 为 157 MB。这很奇怪。我什至下载了 3 次以确保这是完整的文件大小。这是从 157MB 到 15MB 的大幅减少，发行说明中没有任何内容。

# python - Python PowerPoint SaveAs 任务计划程序

> ID：15507409
> 
> 赞同：0
> 
> 时间：2013-03-19T18:18:24.647
> 
> 标签：python, task, powerpoint, scheduler, win32com

我已经通过 Python 自动创建了一个 PowerPoint 幻灯片，并在任务计划程序中设置了一个触发器以生成每日报告。

当我的计算机登录时这一切都很好，但是当设置：“运行是否登录”时脚本失败。

我检查了哪条线路有问题，结果是这条线路：

```
Presentation.SaveAs('C:\\Users\\me\\Desktop\\test.pptx') 
```

我正在以最高优先级运行任务计划程序，但它仅以“用户已登录”状态运行此任务。

以下是整个基本代码段供参考：

```
import win32com.client, MSO, MSPPT, sys, os
g = globals()
for c in dir(MSO.constants):    g[c] = getattr(MSO.constants, c)
for c in dir(MSPPT.constants):  g[c] = getattr(MSPPT.constants, c)

error_file = open('C:\\Users\\me\\Desktop\\error_file.txt', 'wb')

run = False

try:
    Application = win32com.client.Dispatch("PowerPoint.Application")
    Application.Visible = True
    Presentation = Application.Presentations.Add()
    Slide = Presentation.Slides.Add(1, ppLayoutBlank)
    Presentation.SaveAs('C:\\Users\\me\\Desktop\\test.pptx')
    Presentation.Close()
    Application.Quit()
    run = True

except:
    run = False

if run == True:
    error_file.write('ok')
else:
    error_file.write('fail') 
```

对此的任何帮助将不胜感激。

谢谢，JP

# android - 使用 Foursquare 作为场地位置，而不是照片

> ID：15507410
> 
> 赞同：0
> 
> 时间：2013-03-19T18:18:29.967
> 
> 标签：android, iphone, ios, api, foursquare

我正在制作一个应用程序（iOS 和 android），它将显示校园内和校园附近的选定场所，即仅食品价格低于 10 美元的地方（我在 CSV 文件中有商店的名称）。

这是我的计划：

获取所有这些商店的场地 ID 并将它们存储在应用程序中。该应用程序将获取附近所有场地的 JSON 提要，我的应用程序将过滤掉本地数据库中没有场地 ID 的场地。

在应用程序的未来版本中，我想添加 Foursquare 的所有功能（签到、提示和徽章），但我不想使用他们的场地照片。我只想显示我的应用用户添加的照片。

我有哪些选项可以过滤掉不使用我的应用程序的人的照片？

我是否必须使用 parse.com 之类的东西将我的用户照片存储在云上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:48:13.307

当您将照片上传到 Foursquare 时，从响应中获取照片 URL。将其存储到您的数据库并绑定到 Foursquare 场地 ID。

当您显示 Foursquare 场地时，通过使用 Foursquare 场地 ID 过滤从数据库中获取照片。

如果您使用 Parse 或您自己的数据库，则应使用以下列存储：FoursquareVenueId、PhotoUrl。

# java - Java，如果选择后无法读取变量

> ID：15507413
> 
> 赞同：1
> 
> 时间：2013-03-19T18:18:45.940
> 
> 标签：java

我这里有问题，我想打印`hp2`但它说错误。我怎么解决这个问题？我怎样才能打印`hp2`没有错误？谢谢你，对不起我的英语不好。

```
import java.util.Scanner;

public class lala {

    public static void main (String []args) {

        Scanner scan = new Scanner(System.in);
        int hp=100;
        int hp1;
        int go=10;  
        int a;

        hp1=hp-go;
        System.out.println(hp1);
        a=scan.nextInt();

        int hp2;
        if (a==1) {
            hp2=hp1-10;
        } else {}

        System.out.println(hp2);
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T18:20:30.480

初始化局部变量。如果不初始化局部变量，则会出现编译时错误。

```
int hp1 = 0;
int hp2 = 0;
int a = 0; 
```

初始化所有局部变量和 hp1，因为如果条件变为假，则该变量将变为未初始化，并且您正在打印它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:23:11.240

```
import java.util.Scanner;

public class Test

{

public static void main (String []args)

{

    Scanner scan = new Scanner(System.in);

    int hp=100;

    int hp1;

    int go=10;  

        int a;

    hp1=hp-go;

    System.out.println(hp1);

    a=scan.nextInt();

    int hp2 = 0;

    if (a==1)

    {

        hp2=hp1-10;

    }

    else

    {

    }

    System.out.println(hp2);

}
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T18:24:15.317

在您在应用程序的任何部分使用它之前初始化每个变量

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T18:47:56.873

初始化每个变量。至少给每个当前没有赋值的变量赋值为 0。

# jquery - Fancybox，简单的缩略图库，并在点击时应用灯箱链接和新图像 src

> ID：15507415
> 
> 赞同：1
> 
> 时间：2013-03-19T18:18:54.290
> 
> 标签：jquery, fancybox, thumbnails, image-gallery

我无法思考如何将 Fancybox 应用于缩略图库，以便在加载主图像时，可以单击它以打开该图像的更大版本。

我不知道，言语逃脱了我。这是一个具体的例子：[http ://bloc-nc.com/projects/gateway.html](http://bloc-nc.com/projects/gateway.html)

如果您从一个拇指切换到另一个拇指，打开的大图像仍然是第一个图像，而不是新图像。

我的代码如下所示：

```
$('#thumbs').delegate('img','click', function(){                
    $('#largeImage').attr('src',$(this).attr('src').replace('thumb','large'));
});

$('#largeImage').wrap(function() {
    return '<a class="zoom" href="' + $(this).attr('src').replace('large','zoom') + '" />'}); 
```

我错过了什么？非常非常感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:54:22.463

不同的方法呢？...因此，`.replace()`我们将使用`.each()`将`click`事件绑定到每个缩略图并替换容器 中的*大*图像，而不是使用：`#panel`

```
$("#thumbs img").each(function (i) {
    $(this).click(function () {
        var imgPanel = '<a href="http://bloc-nc.com/projects/images/gateway/gateway' + (i + 1) + '_zoom.png" class="zoom" tabindex="' + (i + 1) + '"><img src="http://bloc-nc.com/projects/images/gateway/gateway' + (i + 1) + '_large.png" id="largeImage" /></a>';
        $("#panel").html(imgPanel);
    }); // click
}); // each 
```

**请注意**，我们正在构建`imgPanel`实际替换*缩放*图像（在标签中）和*大*图像（在标签中）的数量`(i+1)`的变量*`href``<a>`*`src``<img>`**

 **然后，`<div id="panel">`根据单击的缩略图替换容器的内容。

另一方面，将`$("a.zoom").fancybox();`fancybox绑定到链接很容易`class="zoom"`，但是您使用的是fancybox v1.3.4并且该版本**不支持动态添加元素**，**[请参阅此帖子](https://stackoverflow.com/q/9081571/1055987)**以供参考。

所以我们需要以不同的方式初始化fancybox来支持那些动态元素（每次我们替换*大*图像时，我们都会`.zoom`动态地改变链接）

这个脚本应该可以解决问题：

```
$(".gallery").delegate("#panel", "focusin", function () {
    $("a.zoom").fancybox();
}); 
```

请注意，我们在参考帖子中使用`.delegate()`而不是`.on()`as，因为您使用的是低于 v1.7.x 的 jQuery 版本

所以，总的来说

```
$(document).ready(function () {
    $("#thumbs img").each(function (i) {
        $(this).click(function () {
            var imgPanel = '<a href="http://bloc-nc.com/projects/images/gateway/gateway' + (i + 1) + '_zoom.png" class="zoom" tabindex="' + (i + 1) + '"><img src="http://bloc-nc.com/projects/images/gateway/gateway' + (i + 1) + '_large.png" id="largeImage" /></a>';
            $("#panel").html(imgPanel);
        }); // click
    }); // each
    // initialize fancybox for dynamically added elements
    $(".gallery").delegate("#panel", "focusin", function () {
        $("a.zoom").fancybox();
    });
}); // ready 
```

见**[JSFIDDLE](http://jsfiddle.net/DeE4X/)****

# r - 两个数据帧的条件操作 (R)

> ID：15507417
> 
> 赞同：0
> 
> 时间：2013-03-19T18:18:58.050
> 
> 标签：r, dataframe, plyr

我在两个数据帧上执行条件操作时遇到了一些困难。为了说明问题，我有三个变量：Price、State 和 Item，它们存储在具有这些列名称的数据框 (data1) 中。我使用 ddply 生成一个数据框（data2），其中包括 State 和 Item 列，以及该 State/Item 组合的平均价格（或其他一些函数）。

然后我想要做的是在原始数据框中填写一列（即一个简单的预测向量），其中列的值是 data1 中状态和项目的给定观察组合的平均值。（例如，如果 data1 中的观察具有**state="Arizona"**和**item="pen"**，那么我想检索存储在 data2 中与该状态/项目组合相对应的平均价格，并将其插入列中。）

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:40:33.937

plyr 包带有一个很棒的小函数，叫做`join`. 您可以使用它来完成您的任务。

```
join(dat1,dat2, by=c('State','Item')) 
```

查看 ?join 以查看可能的不同类型的连接。我很确定你想`left`加入。

# java - 在 ConcurrentSkipListMap / ConcurrentSkipListSet 中重新排序键的原子方式？

> ID：15507418
> 
> 赞同：2
> 
> 时间：2013-03-19T18:18:59.733
> 
> 标签：java, data-structures, concurrency, sortedmap, concurrentskiplistmap

这篇文章的摘要：我有一组订购的物品，它们的顺序可能会随着时间而改变。我需要能够从多个线程迭代这个集合，每个线程可能还想更新项目的顺序。

例如，多个线程需要以`String`任意排序顺序访问键。它们的字符串不是根据它们的自然顺序排序的，而是根据一些可能改变的值（因此，一个 custom `Comparator`）。我最初的实现是使用 a`TreeSet`并在其上同步。如果任何键需要重新排序，线程将从映射中删除键，更新比较值，然后重新插入键。为了实现这一点，键是原生`String`的，但比较器可以访问值。这是一种奇怪的安排，其中键的顺序可能会随着时间而改变，但是由于更改的键总是在更改时被删除并重新插入，因此它似乎可以工作。`String`（我想如果s 被包裹在另一个对象中，它也可以工作。）

我最近意识到`ConcurrentSkipListSet`/`ConcurrentSkipListMap`实现基本上是线程安全的排序集（分别是映射）。现在看来我可以遍历键而不必锁定整个数据结构。但是，有没有一种方法可以使用它们原子地删除一个键并将其替换为另一个键，就像我在上面所做的操作一样，以便其他迭代线程不会错过该项目，而不必使用`synchronize`块？

如果有人可以为这种类型的操作提出更好的数据结构，我也全神贯注！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T18:22:00.977

> 有没有一种方法可以使用它们原子地删除一个键并将其替换为另一个键，就像我在上面所做的操作一样，以便其他迭代线程不会错过该项目，而不必使用同步块？

最简洁的答案是不。如果您需要删除并重新插入，我知道的任何集合都没有原子方法可以做到这一点。

也就是说，一种可能性是您在将其从跳过列表中删除*之前重新插入该项目。*这会导致重复，但可能比丢失条目更容易处理。您将在更改对象后重新插入它，以便它以不同的方式排序。这假设对象也将不相等。但是，如果正在处理列表的其他线程无法处理重复项，那么我认为您是 SOL。

# javascript - Java 应用程序中的 Envjs 和 Rhino - 在哪里可以找到 env.rhino.js？

> ID：15507419
> 
> 赞同：3
> 
> 时间：2013-03-19T18:19:08.240
> 
> 标签：javascript, rhino, envjs

我正在尝试在 java 应用程序中运行[envjs](https://github.com/thatcher/env-js)和 Rhino 以使用 D3.js 呈现 SVG。

到目前为止，我可以使用 Rhino 评估较小的函数，但是在设置 envjs 时，问题就开始了。最重要的是，关于 envjs 的唯一教程谈到了一个名为 env.rhino.js 的文件。但我不知道在哪里可以找到它。

有人可以帮帮我吗？

（是的，谷歌显示了一些结果，但它们不是正式属于 Rhino 或 envjs）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-02T11:46:59.530

我知道这个答案已经很晚了。但我也想做同样的事情并且遇到了同样的问题——也许这会对下一个问题有所帮助。花了一段时间才弄清楚 env-js 上的数百个 github 分支中的哪一个可以完成这项工作。我发现这种组合适用于一个简单的测试：

```
git clone https://github.com/thatcher/envjs-site.git
#note the different fork!
wget https://raw.github.com/thatcher/env-js/master/src/dom/sizzle.js 
wget http://d3js.org/d3.v3.min.js

java -jar dist/env-js-1.1.jar
load("lib/env.rhino.js");
load("sizzle.js");
load("d3.v3.min.js");
d3.select("body").append("svg").selectAll("line").data([1,2]).enter().append("line").attr("x1", function(d){return d;});
document.innerHTML;

<html><head/><body><line/><line/><svg xmlns="http://www.w3.org/2000/svg"><line x1="1"/><line x1="2"/></svg></body><line/><line/></html> 
```

j

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-09T12:19:35.250

首先，下载`env.rhino.js`.

然后，使用这段 Java 代码启动一个 Rhino 实例并加载 Env.js：

```
import org.mozilla.javascript.Context;
import org.mozilla.javascript.tools.shell.Global;
import org.mozilla.javascript.tools.shell.Main;

Context cx = Context.enter();
Global scope = new Global(cx);
cx.setOptimizationLevel(-1); 
cx.setLanguageVersion(Context.VERSION_1_5); 
```

现在您可以加载和运行 JavaScript 文件（使用其绝对文件系统路径）

```
Main.processFile(cx, scope, ABSOLUTE_PATH_TO_SOME_JAVASCRIPT_FILE); 
```

和/或评估 JavaScript 代码并获得其字符串结果

```
(String)cx.evaluateString(scope, "alert('Its WORKING!')", "js", 1, null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T21:03:46.930

我确实尝试过，但不能走得很远。我还想在服务器端生成 SVG，请求是从 java 发起的（在我的例子中是 Glassfish）。你可以做到这一点的唯一方法是使用 jsdom 和 Node.js。我能够成功地做到这一点。可悲的是，除了 Node.js + jsdom 之外，似乎没有其他方法可以做到这一点。

一旦你让它工作，如果你试图用 SVG 生成请求大量加载 Node.js，就会出现更大的问题。

# javascript - 键值对列表的 JSON 表示

> ID：15507420
> 
> 赞同：0
> 
> 时间：2013-03-19T18:19:16.640
> 
> 标签：javascript, jquery, asp.net-mvc, json

我有一个从前端调用的 MVC JSON 控制器方法。它看起来像这样：

`public JsonResult FacetedSearch(string searchString, List<KeyValuePair<string,string>> facets)`

我在前端通过 jQuery ajax 调用它，我以以下方式序列化数据：

`JSON.stringify({searchString: "the matrix", facets: [{Key: "TypeName", Value: "Feature Film"}, {Key:"TypeName", Value:"Series"}]}`

当我通过我的应用程序代码进行调试时，我看到 searchString 已成功传递给 MVC 方法，但该变量`facets`为我提供了 2 个 KeyValuePair 的列表，其中 Key 和 Value 为空。

我查看了我的序列化，它似乎是有效的，但无论出于何种原因，它都没有正确地转到我的应用程序。是什么赋予了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:25:04.430

Rather than expect two objects in your signature, it would make more sense to expect a single object that contains both of your parameters. This would be something like the following.

```
public JsonResult FacetedSearch(RequestObject requestObject)
{ }

public class RequestObject
{
    public string searchString { get; set; } 
    public List<KeyValuePair<string,string>> facets { get; set; }
} 
```

This way, when you send your JSON object, the signature is an object with two properties, just like the object that you are sending.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T21:13:13.930

Per [.NET 中是否有可序列化的通用键/值对类？](https://stackoverflow.com/questions/83232/is-there-a-serializable-generic-key-value-pair-class-in-net)

我发现了为什么它没有序列化它。显然它是不可序列化的。

# ios - 如果我有一个 UITableViewController 类，我在哪里初始化它的实例变量？

> ID：15507422
> 
> 赞同：0
> 
> 时间：2013-03-19T18:19:21.890
> 
> 标签：ios, objective-c, xcode, ios5, ios6

如果我把它放进去，它会起作用，`viewDidLoad`但我无法想象这是最好的地方。我试着把它放在这里：

```
- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // HERE
    }
    return self;
} 
```

但这没有用。我应该把它放在哪里？

在这个例子中，我正在谈论为这个类创建 NSMutableArray（分配并初始化它）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:29:28.143

您有 4 种初始化方法：

```
- (id)init
- (id)initWithCoder:(NSCoder *)aDecoder 
- (id)initWithStyle:(UITableViewStyle)style
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil 
```

这完全取决于您如何实例化该类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T18:47:31.430

您可以使用 A-Live 在评论中建议的延迟加载技术，这样您的数组将在您实际需要时被初始化。这个想法是，在属性 getter 中，您首先检查您的数组是否已初始化。如果没有，初始化然后返回它。

**例子**

> 注意：这是一个粗略且未经测试的示例，您可能需要根据是否使用 ARC 进行必要的更改。

**MyViewController.h**

```
@interface MyViewController : UITableViewController
{
    NSArray *_myArray;
}
@property (nonatomic, readonly) NSArray *myArray;
-(void)doSomething;
@end 
```

**我的视图控制器.m**

```
@interface MyViewController()
-(NSArray *)fetchArrayData;
@end

@implementation MyViewController

@synthesize myArray = _myArray;

#pragma mark - Property Getter
-(NSArray *)myArray
{
    if (_myArray==nil)
        _myArray = [[self fetchArrayData] retain];
    return _myArray;
}
#pragma mark - Cleanup
-(void)dealloc
{
    [_myArray release];
    [super dealloc];
}
#pragma mark - Instance Methods
-(void)doSomething
{
    NSLog(@"myArray: %@", self.myArray);
}

#pragma mark - Private Methods
-(NSArray *)fetchArrayData
{
    NSArray *arrayData = [NSArray arrayWithObjects:@"Apples", @"Oranges", nil];
    return arrayData;
}
@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T18:29:56.363

`initWithStyle:`如果您以编程方式创建控制器，或者`initWithCoder:`如果`awakeFromNib`它是从 nib/storyboard 加载的，则可以在 in 中初始化您的实例变量。

# hibernate - Hibernate 查询未映射的表

> ID：15507425
> 
> 赞同：4
> 
> 时间：2013-03-19T18:19:25.810
> 
> 标签：hibernate, object

有没有办法在未映射的表上使用 java bean 功能？

所以，我有一个只用于读取的表，它永远不会被修改。我只需要查询它来显示数据。但是我不希望在查询未映射的对象时休眠默认的 Object [] 返回类型。我想将结果检索到自定义类型的集合中。但我必须创建 hbm 文件才能做到这一点。无论如何只创建自定义类型而没有hbm文件？

加载结果的 Businessobj 方法：

```
loadResults()
{
    String qry = "select col1, col2 from table";                
    List<CustomType> result = (ArrayList<CustomType>) dao.HQLWithTransformer(qry, new CustomTransformer()); 
} 
```

定制变压器：

```
public class CustomTransformer implements ResultTransformer {

@Override
public Object transformTuple(Object[] rowdata, String[] arg1) 
{       

        return new CustomType(String.valueOf(rowdata[0]),String.valueOf(rowdata[1]));

    return null;
}

@Override
public List transformList(List arg0) {
    return null;
} 
```

}

道法：

```
public Collection HQLWithTransformer(String qry, ResultTransformer rt){     

    List<?> al=null;
      try
      {            
       Query q = sess.createQuery(qry);
       q.setResultTransformer(rt);
       al = (ArrayList<?>)q.list();                   
      }
      catch(HibernateException he) 
      {       
      log.debug("Hibernate Exception", he);
      }
      finally 
      {
        sess.close();        
      }

    return al;
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:28:48.740

您还可以使用构造函数表达式，如下所示：

```
List<MyClass> dtos = session.createQuery("SELECT NEW com.example.MyClass( e.name, e.data) FROM Entity e").list(); 
```

缺点是您还必须创建`Entity`, 映射表才能查询它。您可以使用注释来完成，因此您不必创建`hbm`文件。

从技术上讲，这并不完全符合您的要求。我发现它对于映射类似报告的查询很有用，所以也许它就是你要找的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-25T11:56:04.027

您可以使用 NativeCriteria 库（[github 上的项目，maven central 上提供](https://github.com/pnowy/NativeCriteria)）。示例代码如下所示：

```
NativeCriteria c = new NativeCriteria(new HibernateQueryProvider(hibernateSession), "table_name", "alias");
c.setProjection(NativeExps.projection().addProjection("alias.column_name"));  
c.add(NativeExps.isNull("alias.column_name"));
c.setOrder(NativeExps.order().add("alias.column_name", OrderType.ASC));
CriteriaResult res = c.criteriaResult();
while (res.next())
{
    resp.add(res.getLong(0, null));
} 
```

[图书馆的官方页面](http://pnowy.github.io/NativeCriteria/)。这个库基于 hibernate session 和 createSQLQuery，但提供了非常干净和简单的 API 来生成动态和复杂的查询，这些查询没有与映射类等效。

您可以在测试模块上看到更多示例（以及与 Spring / Spring Boot 的集成）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T18:39:26.563

您可以[`ResultTransformer`](http://docs.jboss.org/hibernate/core/4.2/javadocs/org/hibernate/transform/ResultTransformer.html)为您的查询设置一个。

Hibernate 提供了各种可以将查询结果转换为未映射类型的转换器。例如，[AliasToBeanResultTransformer](http://docs.jboss.org/hibernate/core/4.2/javadocs/org/hibernate/transform/AliasToBeanResultTransformer.html)根据所选字段的别名进行转换。

# c# - 真实不真实？

> ID：15507431
> 
> 赞同：-3
> 
> 时间：2013-03-19T18:19:42.117
> 
> 标签：c#, arrays, foreach, boolean, console-application

我有一个问题，真实不真实。这听起来有点奇怪，我也这么认为，这就是为什么我想我会就此展开讨论。

这是我的精简代码：

```
static void Main(string[] args)
    {
        bool[] myValuesBls = new bool[10];

        for (int i = 1; i < 10; i++)
        {
            if (i == 7)
                myValuesBls[i] = true;
            else
                myValuesBls[i] = false;
        }

        bool myIsShouldBeTrue = false;
        foreach (bool valueBl in myValuesBls)
        {
            myIsShouldBeTrue = valueBl;
        }

        Console.WriteLine(myIsShouldBeTrue);
        Console.ReadLine();
    } 
```

这些值返回 false，我很确定这是不可能的。我的数组中的第七项是 TRUE。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:21:13.973

The 7th value is `true`, but then the 8th value is `false`, overwriting the `true` value in `myIsShouldBeTrue`

You could OR each value, so if a `true` exists, it will be persisted:

```
foreach (bool valueBl in myValuesBls)
{
    myIsShouldBeTrue = myIsShouldBeTrue || valueBl;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T18:44:44.657

当你尝试这个时会发生什么？

```
private static void Main(string[] args)
{
bool[] myValuesBls = new bool[10];

for (int i = 1; i <= 9; i++) {
    if (i == 7) {
        myValuesBls[i] = true;
    } else {
        myValuesBls[i] = false;
    }
}

bool myIsShouldBeTrue = false;
foreach (bool valueBl in myValuesBls) {
    myIsShouldBeTrue = valueBl;
    if (myIsShouldBeTrue == true)
        break;
}

Console.WriteLine(myIsShouldBeTrue);
Console.ReadLine();
} 
```

这应该做的是在您的值为 TRUE 时退出 FOR 循环。

注意：它可能无法像我期望的那样工作，因为我已经从 VB 转换了代码，因为我的 VB 技能更好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T18:27:56.020

如果将 foreach 循环的内容更改为

```
if(valueBl == true)
{
    myIsShouldBeTrue = valueBl;
} 
```

然后它将输出true。但正如其他人所说，这是一个 for 循环，所以控制台输出数组中的 LAST 值，这是错误的。

实际上，如果您希望在循环内达到某个条件时结束循环，您应该使用 while 或 do/while 循环。for 循环实际上是为了遍历整个数组。但是，如果您很懒惰，也可以通过返回来退出 for 循环；在其中，但您仍然需要返回的测试条件

编辑：Java版本

```
public static void main(String[] args)
    {
        boolean[] myValuesBls = new boolean[10];

        for (int i = 1; i < 10; i++)
        {
            if (i == 7)
                myValuesBls[i] = true;
            else
                myValuesBls[i] = false;
        }

        boolean myIsShouldBeTrue = false;
        for(boolean valueBl : myValuesBls)
        {
            if(valueBl == true)  // condition
            {
                myIsShouldBeTrue = valueBl;
            }
        }

        System.out.println(myIsShouldBeTrue);
    } 
```

这将输出真。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T18:23:15.050

`myIsShouldBeTrue = valueBl[9]`到底应该`FALSE` 这么 `Console.WriteLine(myIsShouldBeTrue)`输出`FALSE`！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T18:56:08.470

您拥有的循环：

```
bool myIsShouldBeTrue = false;
foreach (bool valueBl in myValuesBls)
{
    myIsShouldBeTrue = valueBl;
} 
```

遍历数组中的每一项，并将 的值设置`myIsShouldBeTrue`为当前项的值。这样做的效果是`myIsShouldBeTrue`它将始终是数组中的最后一项。

根据您的评论，您似乎想确定数组中的任何值是否为真。我们可以通过多种方式做到这一点。与您的代码密切相关，我们可以将其设置为与当前项目`myIsShouldBeTrue`进行 ORed 的结果。`myIsShouldBeTrue`这样，该行将显示为“要么我已经找到了一个真实的价值，要么这个项目是真实的”。代码更改非常简单：

```
bool myIsShouldBeTrue = false;
foreach (bool valueBl in myValuesBls)
{
    myIsShouldBeTrue |= valueBl;
} 
```

运算符将该`|=`值设置为该值与操作数进行或运算的结果。

如果我们愿意，我们可以改进此代码。对于初学者来说，一旦我们找到了一个真实的项目，就真的没有必要继续循环遍历集合了。我们知道那个时候结果会是真的，所以我们可以退出。这被称为关于布尔运算的“短路”。

```
bool myIsShouldBeTrue = false;
foreach (bool valueBl in myValuesBls)
{
    if (valueBl)
    {
        myIsShouldBeTrue = true;
        break;//exit the loop
    }
} 
```

LINQ 也是一个很棒的工具，可以在这里使用。它具有旨在根据数据序列聚合结果的操作。在这种特殊情况下，我们想知道任何布尔值是否为真。我们可以把它写成：

```
myIsShouldBeTrue = myValuesBls.Any(value => value); 
```

如果任何值是真的，那么`myIsShouldBeTrue`将是真的。最终的结果是代码与我们之前的循环并没有太大的不同，尽管它更容易应用于`Any`更棘手的问题，而且它在阅读方面做得*很好*，就像我们的要求一样。一旦你习惯了语法，就会更容易看出作者的意图是什么。

# c++ - 如何检查int类型的变量，cin不接受数字以及字符

> ID：15507432
> 
> 赞同：0
> 
> 时间：2013-03-19T18:19:52.960
> 
> 标签：c++, visual-c++, cin

我是 C++ 新手。我写了一个函数，我希望用户在其中输入一个整数值。我知道如何使用以下方法防止输入字符：

```
 if(!(cin>>a)) 
```

或者

```
 if (cin.fail()) 
```

哪里`a`是类型`int`。如果用户先输入字符，然后输入数字，例如：`ab12`代码有效，但如果用户输入相反的方式，例如`12ab`，`12`将作为输入值。我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T18:24:52.660

Try this:

```
#include <sstream>
#include <string>

std::string line;
int n;

if (std::getline(std::cin, line))
{
    std::istringstream iss(line);
    if (iss >> n >> std::ws && iss.get() == EOF)
    {
        // success, n is now a valid int
    }
} 
```

Or perhaps more usefully in a loop:

```
for (std::string line; std::getline(std::cin, line); )
{
    std::istringstream iss(line);

    if (!(iss >> n >> std::ws && iss.get() == EOF))
    {
        std::cout << "Sorry, did not understand, please try again.";
        continue;
    }

    std::cout << "Thanks. You said: " << n << std::endl;
} 
```

# eclipse - Eclipse 代码崩溃错误

> ID：15507434
> 
> 赞同：2
> 
> 时间：2013-03-19T18:19:58.590
> 
> 标签：eclipse

多年来，我一直在使用 Eclipse Indigo，但我最近遇到了一个问题，即代码行会随机消失。最重要的是，对于仍然存在的代码，侧面的折叠/展开按钮正在消失。

行号示例：

```
50
51
78
79 
```

此外，有人捐赠了这张图片，也显示了问题，尽管线条较少

![错误的屏幕截图](../Images/d324da815f57661a6400dcdd2b92deeb.png)

方法只是被吞没了，它们*不会*像折叠它们时那样显示第一行。现在对于一些不会消失的方法，它们缺少侧面的小 +/- 符号来折叠/展开它们。但是，如果您单击标志所在的位置，它仍然有效。

据我所知，这些问题会影响没有模式的随机方法。这是 Eclipse 的一些特殊“功能”吗？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T06:24:47.083

如果您可以在没有代码折叠的情况下解决此问题，您可能希望在首选项中禁用它。

*   仅限 Java：首选项 -> Java -> 编辑器 -> 折叠 -> 启用折叠
*   所有文本编辑器：首选项 -> 常规 -> 编辑器 -> 结构化编辑器 -> 启用折叠

# python - 获取插入对象的id

> ID：15507435
> 
> 赞同：1
> 
> 时间：2013-03-19T18:20:02.340
> 
> 标签：python, google-app-engine, google-cloud-endpoints, endpoints-proto-datastore

我正在定义一个对用户进行建模的端点，如下所示。我可以通过 id 查询用户。但是插入用户时如何获取该ID？我的客户端是用 java 编写的，但我想知道如何使用 python 以及生成的 java 客户端库来检索 id。

```
from google.appengine.ext import endpoints
from google.appengine.ext import ndb 
from protorpc import remote
from endpoints_proto_datastore.ndb import EndpointsModel

class User(EndpointsModel):
    email = ndb.StringProperty(required=True)
    phone_number = ndb.StringProperty()
    reg_id = ndb.StringProperty()
    created = ndb.DateTimeProperty(auto_now_add=True)

@endpoints.api(name='whereareyoudroid', 
               version='v1', description='Where Are You Users')
class UserApi(remote.Service):

    @User.method(name='user.insert', path='user')
    def insert(self, user):
        user.put()
        return user

    @User.method(request_fields=('id',), 
                 path='user/{id}', 
                 http_method='GET', name='user.get')
    def get(self, user):
        if not User.from_datastore:
            raise endpoints.NotFoundException('User not found.')
        return user 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T20:06:26.923

# 首先，回答你的问题：

默认情况下，请求和响应的消息模式将是模型上的字段：`email`、`phone_number`、`reg_id`和`created`。正如在[简单的 get 示例](http://endpoints-proto-datastore.appspot.com/examples/simple_get.html)中所做的那样，您可以将此默认值更改为包含`id`via

```
class User(EndpointsModel):
    _message_fields_schema = ('id', 'email', 'phone_number', 
                              'reg_id', 'created')
    email = ndb.StringProperty(required=True)
    ... 
```

或通过在以下指定您想要返回的[响应字段](http://endpoints-proto-datastore.appspot.com/examples/matching_queries_to_indexes.html)`insert method`：

```
 @User.method(response_fields=('id', 'email', 'phone_number', 
                                  'reg_id', 'created'),
                 name='user.insert', path='user')
    def insert(self, user):
        user.put()
        return user 
```

# 其次，您有一个错字/错误`get`：

该语句`if not User.from_datastore:`将检查类`User.from_datastore`上的属性对象`User`是否是“真实的”，它是。您想要用户对象上此属性的实际值：`user.from_datastore`。

# c# - 使用 WHERE IN 子句的 SQL 数据源

> ID：15507440
> 
> 赞同：1
> 
> 时间：2013-03-19T18:20:09.880
> 
> 标签：c#, .net, visual-studio-2010, sqldatasource, where-in

将 Studio 2010 C# 与 DB2 UDB 9.7.5 一起使用

我有一个从带有 WHERE IN 子句的 DataSource 填充的网格视图，如下所示：

```
<asp:SqlDataSource ID="LUWAccts" runat="server" onSelecting="gvGrid01_Selecting"
ConnectionString="<%$ ConnectionStrings:LUWHAConnect %>" 
ProviderName="<%$ ConnectionStrings:LUWHAConnect.ProviderName %>" 

SelectCommand="SELECT mycolumns FROM mytables WHERE GROUP_NAME IN ? ">
<SelectParameters>
  <asp:Parameter Name="grpList" Type="String" /> 
</SelectParameters> 
```

硬编码 WHERE 子句可以正常工作（即 WHERE GROUP_NAME IN ('GROUP1','GROUP2','GROUP3')

但是我正在尝试在后面的代码中使用我的数据源的 onSelecting 事件来构建组列表，如下所示：

```
protected void gvGrid01_Selecting(object sender, SqlDataSourceSelectingEventArgs e)
{
  string gpList = Get_SVCACCT_Auth_Groups(Session["ThisUser"].ToString());
              //This routine returns the string "('GROUP1','GROUP2','GROUP3')"
} 
```

当我显示 grpList 字符串时，我确实有 ('GROUP1','GROUP2','GROUP3')。

但我没有显示任何数据。我已经搜索并尝试了各种技术来更改 SELECT 语句、使用 e.Command.Parameters.Add 修改参数列表、使用 ControlParemers 等。

我还阅读了一篇关于 WHERE IN 子句如何无法处理逗号分隔列表参数的文章，但 IN 关键字可以查询表。

我的 gpList 不是从另一个 SELECT 语句构建的——但我仍然尝试了一些这样的例子，但没有运气。作为一个新手 - 我似乎在围绕解决方案跳舞。

如果我错过了有助于回答这个问题的帖子，请告诉我。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T07:22:11.083

最后我决定使用 Like 并将它们与 OR 连接起来。所以我会迭代项目列表并添加类似过滤器并将它们附加到或类似这样的东西：

```
string[] allStr = recieveFilter.Split(',');
string filterRecieverItem = "";
foreach (string recieveItem in allStr)
{
   filterRecieverItem += "(sampleField like '%" + recieveItem.Trim() + "%') OR ";
}
filterRecieverItem = filterRecieverItem.Remove(filterRecieverItem.Length - 3, 3);
ds_Sample.FilterExpression = filterStr; 
```

希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:34:03.703

您可以在 gvGrid01_Selecting 事件中尝试此操作

```
LUWAccts.SelectCommand = 
String.Format("SELECT mycolumns FROM mytables WHERE GROUP_NAME IN {0})",
Get_SVCACCT_Auth_Groups(Session["ThisUser"].ToString())); 
```

[检查此链接](http://forums.asp.net/t/1553050.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-27T03:12:19.690

我还建议您通过用户 VisDev String.Format("SELECT mycolumns FROM mytables WHERE GROUP_NAME IN ({0})", yourparamlist)

你的paramlist在哪里

“value1，value2，value3”只是一个提示，因此您可以根据您的要求实现它。

希望它能解决你的问题。

# razor - Razor 中的类属性

> ID：15507446
> 
> 赞同：1
> 
> 时间：2013-03-19T18:20:29.467
> 
> 标签：razor

我正在构建一个 MVC4 应用程序（我的第一个）并且也是第一次使用 Razor。我目前正在构建一个简单的站点，并将 MVCSitemapProvider 用于菜单和面包屑。

在我的菜单中，我需要根据当前项目是否处于活动状态以及我添加到 mvc.sitemap 的自定义类来输出一些 css 类。

这就是我所拥有的；

```
<li class="
@if (node.IsCurrentNode){<text>active </text>}
@if (node.Children.Any()){<text>has-sub</text>}
"> 
```

上面的工作按预期工作 - 但例如在视图源中看起来并不好。总是显示类属性——即使它是空的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:51:45.680

您可以使用[Web Pages 2](http://www.mikesdotnetting.com/Article/201/Cleaner-Conditional-HTML-Attributes-In-Razor-Web-Pages) (MVC 4) 中的条件属性来使类属性及其值仅在您传入的表达式未导致时呈现`null`：

```
<li class="@(node.IsCurrentNode ? "active" : null)"> 
```

# android - 在 AccessibilityService 中调用 unregisterReceiver 的位置

> ID：15507449
> 
> 赞同：0
> 
> 时间：2013-03-19T18:20:31.290
> 
> 标签：android, broadcastreceiver, accessibility

我有点困惑。AccessibilityService 可以获取所有新的传入通知，并通过广播将信息发送到广播接收器。我的 AccessibilityService 这样做

```
public void onServiceConnected() {
    // ...
    Communication c = new Communication();
    IntentFilter filter = new IntentFilter();

    filter.addAction("com.cilenco.lockscreen.notification.send");
    registerReceiver(c, filter);
}   

Intent intent=new Intent("com.cilenco.lockscreen.notification.send");

intent.putExtra("string1", string1);
intent.putExtra("string2", string2);

sendBroadcast(intent); 
```

在我发送广播后，AccessibilityService 仍然存在。如果检测到新通知 onServiceConnected 再次被调用，但接收器再次连接在我从未调用过

```
unregisterReceiver(c); 
```

我必须在哪里称呼这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:22:31.293

You call `unregisterReceiver()` when you no longer want to receive broadcasts. Convention is that it is called in your `onPause()`. Or sonner if you have no need for it anymore.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T18:58:54.993

当您不再需要侦听意图或调用服务的 onDestroy() 时，应调用 unregisterReceiver()，以先到者为准。

# c# - ListViewItems 的通用列表

> ID：15507458
> 
> 赞同：0
> 
> 时间：2013-03-19T18:20:56.160
> 
> 标签：c#, listviewitem

对不起标题，我想不出更描述/简洁的方式来表达我的问题。

我的问题是我有一个函数，它通过 foreach 循环对 ListViewItems 集合进行操作，并且它将操作的项目列表取决于函数的布尔参数，称为**bSelected**。

如果这是真的，我想使用列表视图中的 SelectedItems，否则我想使用列表视图中的 Items。

我无法确定代表项目列表的对象应该是什么，或者如何获取它。我尝试了几种不同的方法（注意 ListView 称为**lvList**）：

```
IList<ListViewItem> listItems = 
  ( bSelected ? (IList<ListViewItem>)lvList.SelectedItems 
              : (IList<ListViewItem>)lvList.Items );
foreach ( ListViewItem lvi in listItems ) { ... } 
```

和

```
IEnumerator<ListViewItem> listEnumerator = 
  ( bSelected ? (IEnumerator<ListViewItem>)lvList.SelectedItems.GetEnumerator() 
              : (IEnumerator<ListViewItem>)lvList.Items.GetEnumerator() );
while ( listEnumerator.MoveNext() ) { ... } 
```

我已经尝试过类似同类的其他解决方案，但是我遇到了与应用于 SelectedItems 的类型转换有关的运行时错误。

我知道必须有一种方法，因为直接在一个列表或另一个列表上使用 foreach 循环，即：

```
foreach ( ListViewItem lvi in lvList.SelectedItems ) { ... } 
```

和

```
foreach ( ListViewItem lvi in lvList.Items ) { ... } 
```

我没有太多 C# 经验，因此不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:26:07.430

尝试使用无类型无类型 IEnumerable：

```
IEnumerable listEnumerable = 
  ( bSelected ? lvList.SelectedItems 
              : lvList.Items);
foreach ( ListViewItem lvi in listEnumerable ) { ... } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T18:27:21.287

您可以使用 IList，因为它们都实现了它。尝试以下操作：

```
IList listItems = 
  ( bSelected ? (IList)lvList.SelectedItems 
              : (IList)lvList.Items );
foreach ( ListViewItem lvi in listItems ) { ... } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T18:29:32.217

您可以强制它成为一个强类型列表，如下所示：

```
List<ListViewItem> listItems = 
  ( bSelected ? lvList.SelectedItems.Cast<ListViewItem>().ToList()
              : lvList.Items.Cast<ListViewItem>().ToList() ); 
```

去[这里](http://msdn.microsoft.com/en-us/library/bb341406.aspx)了解更多信息`Cast`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T18:24:27.020

在文档中，它说它们是类型`ListViewItemCollection`：

[http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.items.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.items.aspx)

# coldfusion - 在 ColdFusion 中处理 500 个 JRun servlet

> ID：15507460
> 
> 赞同：2
> 
> 时间：2013-03-19T18:21:00.523
> 
> 标签：coldfusion, coldfusion-8, jrun

全部 -

有没有办法在 ColdFusion 中处理 500 JRun servlet 错误？我尝试`cferror`在 ColdFusion 管理员中使用以及使用站点范围的处理程序，但它似乎不起作用。

这是错误消息

```
500

ROOT CAUSE:  java.lang.IllegalArgumentException     at
coldfusion.filter.FormScope.parseName(FormScope.java:408)   at
coldfusion.filter.FormScope.parseQueryString(FormScope.java:360)    at
coldfusion.filter.FormScope.parsePostData(FormScope.java:328)   at
coldfusion.filter.FormScope.fillForm(FormScope.java:278)    at
coldfusion.filter.FusionContext.SymTab_initForRequest(FusionContext.java:438)   at 
coldfusion.filter.GlobalsFilter.invoke(GlobalsFilter.java:33)   at
coldfusion.filter.DatasourceFilter.invoke(DatasourceFilter.java:22) at
coldfusion.filter.RequestThrottleFilter.invoke(RequestThrottleFilter.java:126)  at 
coldfusion.CfmServlet.service(CfmServlet.java:200)  at
coldfusion.bootstrap.BootstrapServlet.service(BootstrapServlet.java:89) at 
jrun.servlet.FilterChain.doFilter(FilterChain.java:86)  at
coldfusion.monitor.event.MonitoringServletFilter.doFilter(MonitoringServletFilter.java:42)  at
coldfusion.bootstrap.BootstrapFilter.doFilter(BootstrapFilter.java:46)  at 
jrun.servlet.FilterChain.doFilter(FilterChain.java:94)  at
jrun.servlet.FilterChain.service(FilterChain.java:101)  at
jrun.servlet.ServletInvoker.invoke(ServletInvoker.java:106)     at
jrun.servlet.JRunInvokerChain.invokeNext(JRunInvokerChain.java:42)  at
jrun.servlet.JRunRequestDispatcher.invoke(JRunRequestDispatcher.java:286)   at
jrun.servlet.ServletEngineService.dispatch(ServletEngineService.java:543)   at
jrun.servlet.jrpp.JRunProxyService.invokeRunnable(JRunProxyService.java:203)    at
jrunx.scheduler.ThreadPool$ThreadThrottle.invokeRunnable(ThreadPool.java:428)   at 
jrunx.scheduler.WorkerThread.run(WorkerThread.java:66)

javax.servlet.ServletException: ROOT CAUSE: 
java.lang.IllegalArgumentException  at
coldfusion.filter.FormScope.parseName(FormScope.java:408)   at
coldfusion.filter.FormScope.parseQueryString(FormScope.java:360)    at
coldfusion.filter.FormScope.parsePostData(FormScope.java:328)   at
coldfusion.filter.FormScope.fillForm(FormScope.java:278)    at
coldfusion.filter.FusionContext.SymTab_initForRequest(FusionContext.java:438)   at 
coldfusion.filter.GlobalsFilter.invoke(GlobalsFilter.java:33)   at
coldfusion.filter.DatasourceFilter.invoke(DatasourceFilter.java:22) at
coldfusion.filter.RequestThrottleFilter.invoke(RequestThrottleFilter.java:126)  at 
coldfusion.CfmServlet.service(CfmServlet.java:200)  at
coldfusion.bootstrap.BootstrapServlet.service(BootstrapServlet.java:89) at 
jrun.servlet.FilterChain.doFilter(FilterChain.java:86)  at
coldfusion.monitor.event.MonitoringServletFilter.doFilter(MonitoringServletFilter.java:42)  at
coldfusion.bootstrap.BootstrapFilter.doFilter(BootstrapFilter.java:46)  at 
jrun.servlet.FilterChain.doFilter(FilterChain.java:94)  at
jrun.servlet.FilterChain.service(FilterChain.java:101)  at
jrun.servlet.ServletInvoker.invoke(ServletInvoker.java:106)     at
jrun.servlet.JRunInvokerChain.invokeNext(JRunInvokerChain.java:42)  at
jrun.servlet.JRunRequestDispatcher.invoke(JRunRequestDispatcher.java:286)   at
jrun.servlet.ServletEngineService.dispatch(ServletEngineService.java:543)   at
jrun.servlet.jrpp.JRunProxyService.invokeRunnable(JRunProxyService.java:203)    at
jrunx.scheduler.ThreadPool$ThreadThrottle.invokeRunnable(ThreadPool.java:428)   at 
jrunx.scheduler.WorkerThread.run(WorkerThread.java:66)  at
coldfusion.monitor.event.MonitoringServletFilter.doFilter(MonitoringServletFilter.java:70)  at
coldfusion.bootstrap.BootstrapFilter.doFilter(BootstrapFilter.java:46)  at 
jrun.servlet.FilterChain.doFilter(FilterChain.java:94)  at
jrun.servlet.FilterChain.service(FilterChain.java:101)  at
jrun.servlet.ServletInvoker.invoke(ServletInvoker.java:106)     at
jrun.servlet.JRunInvokerChain.invokeNext(JRunInvokerChain.java:42)  at
jrun.servlet.JRunRequestDispatcher.invoke(JRunRequestDispatcher.java:286)   at
jrun.servlet.ServletEngineService.dispatch(ServletEngineService.java:543)   at
jrun.servlet.jrpp.JRunProxyService.invokeRunnable(JRunProxyService.java:203)    at
jrunx.scheduler.ThreadPool$ThreadThrottle.invokeRunnable(ThreadPool.java:428)   at 
jrunx.scheduler.WorkerThread.run(WorkerThread.java:66) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T12:31:31.650

您收到的错误发生在 JRun 级别。这种类型的错误发生在 ColdFusion 错误处理程序可以捕获它之前。您将需要在 JRun 级别创建并分配一个错误处理程序。这可以通过编辑 web.xml 文件来完成。（进行更改后，您需要重新启动 JRun 服务器。）

详细信息可以在此页面上找到，[JRun 4 程序员指南 - Servlet 编程技术 - 处理异常](http://livedocs.adobe.com/jrun/4/Programmers_Guide/techniques_servlet12.htm)。

> `error-page`您可以使用WEB-INF/web.xml 文件中的元素定义 Web 应用程序如何处理错误。您还可以通过将`error-page`元素添加到 SERVER-INF/default-web.xml 文件来为 JRun 服务器上的所有 Web 应用程序定义错误处理。
> 
> **处理 HTTP 错误代码**
> 
> web.xml 文件中的`error-code`子元素`error-page`定义了 JRun 如何处理在处理 servlet 期间生成的 HTTP 错误代码。
> 
> 您为元素定义 HTTP 状态代码，`error-code`然后将代码映射到`location`元素中的目标。以下示例将 HTTP 500（内部服务器错误）状态代码映射到 servererror.jsp 页面：
> 
> ```
> <error-page>
>     <error-code>500</error-code>
>     <location>/error-pages/servererror.jsp</location>
> </error-page> 
> ```
> 
> 下表列出了常见的与错误相关的 HTTP 状态代码：
> 
> ```
> HTTP error code    Description
>   400              Bad Request
>   401              Unauthorized
>   403              Forbidden
>   404              Not Found
>   408              Request Time-out
>   500              Internal Server Error 
> ```
> 
> **访问错误属性**
> 
> `HttpServletRequest`和对象提供对错误信息的`HttpServletResponse`访问，以便您可以生成有意义的调试信息或有针对性的异常处理程序。有关更多信息和示例，请参阅我上面包含的链接。
> 
> 当抛出错误时，JRun 会在请求对象上设置几个属性。下面描述了这些属性：
> 
> *   `javax.servlet.error.status_code`- 将 HTTP 错误代码（如果适用）定义为 int 对象。如果 servlet 抛出与 HTTP 无关的异常，则状态码通常设置为 500（Internal Server Error）。
> *   `javax.servlet.error.message`- 返回异常或错误消息。
> *   `javax.servlet.error.exception_type`- 定义异常的类型。
> *   `javax.servlet.error.exception`- 定义实际抛出的异常。您可以使用 printStackTrace 方法查看异常的堆栈跟踪。
> *   `javax.servlet.error.request_uri`- 在抛出异常之前定义请求 URI。

# javascript - Access PDF Bookmarks from Browser with Javascript

> ID：15507464
> 
> 赞同：2
> 
> 时间：2013-03-19T18:21:17.293
> 
> 标签：javascript, pdf, web

OK, here's the scoop. I have an almost completely locked-down (view only) PDF from the post office. I must create a web application where a user can type in a bookmark name that will bring up the correct page in the PDF. I know that there is no way to programmatically jump to a particular bookmark. There are no named destinations in the document and no way to create them. Is there a way to programmatically extract page numbers from the bookmarks in a PDF document via JavaScript? Can I loop through the bookmarks to find the right one and read the page number? Why should this be so blasted difficult?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:56:01.037

我的公司[Atalasoft](http://www.atalasoft.com)制作了一个[Ajax/asp.net 控件](http://www.atalasoft.com/products/dotimage/html-viewer-sdk)，它可以做你想做的事。它可以让您显示 PDF，在服务器端，拉出书签和目的地并将它们发送到客户端控件并不难。

本质上，您正在用基于图像的查看器替换 Acrobat（或其他）查​​看器，该查看器在服务器端已经剖析了 PDF 并可以告诉查看器去哪里。

这是一些用于提取书签的示例代码 - 此代码看起来比您想象的要复杂，这是因为 PDF 中的书签是一棵完整的树。

```
delegate void BookmarkReceiver(PdfBookmark bookmark);

public void VisitBookmarks(PdfBookmarkList bookmarks, BookmarkReceiver receiever)
{
    foreach (PdfBookmark mark in bookmarks)
    {
        receiver(mark);
        VisitBookmarks(mark.Children);
    }
}

// here's a matcher:

IList<PdfBookmark> FindBookmarksWithName(string s, PdfBookmarkTree tree)
{
    List<PdfBookmark> marks = new List<PdfBookmark>();
    VisitBookmarks(tree.Bookmarks, mark => if (mark.Text == s) marks.Add(mark));
    return marks;
} 
```

当然，如果您只想找到一个谓词，可以修改访问者以采用谓词和短路。

现在要弄清楚如果你有一个特定的书签你应该去哪个页面并不像拉出页面索引那么简单。这是因为书签不必转到特定页面。书签有一个与之关联的动作，并且该动作可能是单击书签时要做的事情的列表。例如，我可以创建一个单击操作，它是两个操作的列表，首先交换第一页和最后一页，然后转到第一页。

因此，您要做的是获取单击操作并遍历列表并尝试找到“转到查看”操作，然后将目标标识为页面索引并抓取它。

是的，这比您想象的要多得多，因为 PDF 的指定比它需要的更丰富。目标页面可以是索引页面，但也可以是本地文件系统上不同文档中的页面，因此我们确实需要检查每一步都有什么。

# javascript - 由于闭包，OOP Jquery 丢失值

> ID：15507465
> 
> 赞同：0
> 
> 时间：2013-03-19T18:21:19.030
> 
> 标签：javascript, jquery, oop

点击一个对象后，我用来处理一些数据的对象失去了它的所有值，我知道这是因为闭包，但我不知道如何修复它，这是我第一次在 Js 中使用 OOP。

我的代码是这个：

```
function control_hermes(){
    this.url_base="http://domain.com";
    this.action="";
    this.set_id_to_update; 
    //private
    function set_action(parameter_to_control){
        this.action=parameter_to_control;
     }
     //private
    function get_full_url(){
          console.log(this.action); //undefined?????, should be the id of the button
          console.log(this.url_base);  //undefined?????, is on the top!!!
          return this.url_base+"?"+this.action;             
     }              
     //public
      this.execute_instruction=function(id_button){ 
          set_action(id_button);
          var url=get_full_url();   
     }
}//end class    

//use class
var manager_hermes=new control_hermes(); 
jQuery('input').click(function(){
     manager_hermes.execute_instruction(jQuery(this).attr("id"));
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:24:03.707

当一个函数作为点击事件的回调被调用时，`this`将引用该事件绑定到的元素。为了解决这个问题，将对`this`外部的引用存储在不同的变量中。这通常使用名为 的变量来完成`self`。

```
var self = this;
this.url_base="http://domain.com";
this.action="";
this.set_id_to_update; 
//private
function set_action(parameter_to_control){
    this.action=parameter_to_control;
 }
 //private
function get_full_url(){
      console.log(self.action); //undefined?????, should be the id of the button
      console.log(self.url_base);  //undefined?????, is on the top!!!
      return self.url_base+"?"+self.action;             
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T19:47:22.213

[http://jsfiddle.net/sujesharukil/25bcG/1/](http://jsfiddle.net/sujesharukil/25bcG/1/)

创造了一个小提琴。添加

```
var self = this; 
```

在您的班级中名列前茅。然后引用了那个。

```
 function set_action(parameter_to_control){
    self.action=parameter_to_control;
 }

//private
function get_full_url(){
      console.log(self.action); //undefined?????, should be the id of the button
      console.log(self.url_base);  //undefined?????, is on the top!!!
      return this.url_base+"?"+this.action;             
 } 
```

希望有帮助。

苏杰

# jquery - add css on current div if prev div has class

> ID：15507467
> 
> 赞同：0
> 
> 时间：2013-03-19T18:21:27.050
> 
> 标签：jquery, css

I just want to add css on current div if prev div has some class.

My html

```
<div class="views-field views-field-field-1-image"></div>
<div class="views-field views-field-title"></div> 
```

if div `.views-field-title` before has this div `.views-field-field-1-image` then add width on `.views-field-title` div.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T18:22:45.500

Use the [adjacent sibling selector](http://meyerweb.com/eric/articles/webrev/200007a.html):

```
.views-field.views-field-field-1-image + .views-field.views-field-title {
    /* ... */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:25:00.023

```
.views-field.views-field-field-1-image + .views-field.views-field-title {
    width: #px;
} 
```

Documentation: [http://www.w3.org/TR/CSS21/selector.html#adjacent-selectors](http://www.w3.org/TR/CSS21/selector.html#adjacent-selectors)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T18:24:20.433

您可以为此使用[相邻的兄弟选择器](http://www.w3.org/TR/2001/CR-css3-selectors-20011113/#adjacent-combinators)：

```
.views-field-field-1-image + .views-field-title {
    YOUR CSS
} 
```

# c++ - 如何表示一组任意长度和类型组合的值？

> ID：15507473
> 
> 赞同：2
> 
> 时间：2013-03-19T18:21:49.513
> 
> 标签：c++, data-structures

我正在编写代码来分析 n 维数据集。我写了一个代表任意数据集轴的类。每个轴可以有不同的数据类型，所以我选择使用模板编程。

```
class BaseAxis
{
};

template <class T>
class Axis : public BaseAxis
{
public:
    Axis(const T &begin, const T &end);

    const T begin;
    const T end;
}; 
```

这允许我创建任意类型的新 Axis 对象。用户可以通过添加正确的轴来配置表示整个数据集的更高级别的类 NTree，如下所示：

```
ntree = new ntree::NTree<float>();
ntree->AddAxis<int>(0, 8);
ntree->AddAxis<float>(-100.0f, 200.0f); 
```

这将创建一个二维浮点数据集，整数轴范围从 0 到 8，浮点轴范围从 -100.0f 到 200.0f。要从数据集中获取值，您应该能够按如下方式查询数据结构：

```
ntree->Query(2, 2.5f); 
```

我目前正在尝试弄清楚如何编写这样的函数（或可以表示这些参数的对象），因为它们可以是任意数量和类型。我读过关于 boost::variant 的文章，但我不确定如何在这种情况下应用它，因为我在 c++ 模板和库方面经验不足。

这是 NTree 类的代码的相关部分。

```
template <class T>
class NTree
{
public:
    NTree();
    ~NTree();

    template <class A>
    void AddAxis(const A &start, const A &end);

protected:
    std::vector<BaseAxis*> *axes;
};

template <class T>
template <class A>
void NTree<T>::AddAxis(const A &start, const A &end)
{
    BaseAxis* newAxis = new Axis<A>(start, end);
    this->axes->push_back(newAxis);
} 
```

因此我的问题如下：如何表示一组任意长度和类型组合的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:33:37.100

您可以使用[Typelist](http://books.google.co.uk/books?id=aJ1av7UFBPwC&lpg=PA64&ots=YRgG1oOi6Y&dq=loki%20typelists&pg=PA64#v=onepage&q=loki%20typelists&f=false)或[可变参数模板](http://www.cplusplus.com/articles/EhvU7k9E/)定义您的容器。这样你就可以在不使用不透明容器的情况下保持强类型安全。您可以从容器中添加和远程轴，可能以复制缓冲区为代价。

一个干净的实现可以使用每种类型的专用分配器和一个代理类来聚合它们。然后，您可以在代理类中使用模板化访问器，该访问器将使用参数将分配器转换回并调用它们的访问函数。

这是 N 维容器的（非常截断的）实现。在这种情况下，卷由相同维度但类型不同的数组列表定义，因此不是您需要的，而是关闭：

```
 // opaque base class for allocator
 class UnsafeAllocator{...};

 // specialized allocator:
 template<class T>
 class Allocator : public UnsafeAllocator {
      ...
      virtual T& operator[] (const size_t * position) { ... }
 };

 // proxy class for the container:
 template<class TL>
 class Volume {
 protected:
     // each field has its own allocator, allocated in the constructor
     UnsafeAllocator *opaque_allocator[Length<TL>::value];
 public:
     // put a constuctor with the current dimensions here and fill in the array of allocators using the typelist

     // typesafe getter
     template <int index> 
     typename TypeAt<TL, index>::Result &
     get(const std::initializer_list<size_t> &position){
           typedef typename TypeAt<TL, index>::Result FieldType;
           typedef Allocator<FieldType> SafeAllocator;
           SafeAllocator* allocator = dynamic_cast<SafeAllocator *>(opaque_allocator[index]);
           assert(allocator != NULL);
           return (*allocator)[position];
      }
  };

  // usage would be:
  typedef MakeTypeList(float, int, double) types;
  // define a two dimensional volume for each type
  Volume<types> volume({1024,1024});
  // example of typesafe access for the first type at position 0,0:
  float f = volume.get<0>({0,0}); 
```

此实现的主要缺点是您需要在编译时了解所有类型列表。我不知道这是否是您的规范的一部分。

如果不是，我认为没有任何方法可以让容器具有可变数量的可变参数类型，而无需在任何地方使用不透明的代理，这会破坏代码的可读性（以及可能的安全性）。

# ios - Pass through CMSampleBufferRef data to audio output jack

> ID：15507479
> 
> 赞同：13
> 
> 时间：2013-03-19T18:22:08.513
> 
> 标签：ios, avfoundation, core-audio

I am developing one app in which I need to pass through audio capturing through output audio jack at the same time record and save video.

I have looked into aurio touch apple sample code and implemented audio passthrough.

I have also implemented the video recording through `AVCaptureSession`. Above both functionality individually done and works pefectly.

But when I merge functionality audio pass through not working because of audio session of the `AVCapturesession`.

I have also tried to pass through audio data which I am getting from `AVCaptureSession` delegate methods. Below is my code :

```
OSStatus err = noErr;

AudioBufferList audioBufferList;
CMBlockBufferRef blockBuffer;
CMSampleBufferGetAudioBufferListWithRetainedBlockBuffer(sampleBuffer, NULL, &audioBufferList, sizeof(audioBufferList), NULL, NULL, 0, &blockBuffer);
CMItemCount numberOfFrames = CMSampleBufferGetNumSamples(sampleBuffer); // corresponds to the number of CoreAudio audio frames

currentSampleTime += (double)numberOfFrames;

AudioTimeStamp timeStamp;
memset(&timeStamp, 0, sizeof(AudioTimeStamp));
timeStamp.mSampleTime = currentSampleTime;
timeStamp.mFlags |= kAudioTimeStampSampleTimeValid;

AudioUnitRenderActionFlags flags = 0;
aurioTouchAppDelegate *THIS = (aurioTouchAppDelegate *)[[UIApplication sharedApplication]delegate];
 err = AudioUnitRender(self.rioUnit, &flags, &timeStamp, 1, numberOfFrames, &audioBufferList);

if (err) { printf("PerformThru: error %d\n", (int)err); } 
```

But it is giving error. Please advise what can be done further as soon as possible. I have looked into so many docs and so many codes but couldn't find any solution. Please help..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-14T22:56:17.257

这是一些更好的错误处理代码。它返回什么错误？您可以通过在文档中搜索来查找错误描述。

```
static void CheckError (OSStatus error, const char *operation) {
    if (error == noErr) return;

    char str[20] = {};
    // see if it appears to be a 4 char code
    *(UInt32*)(str + 1) = CFSwapInt32HostToBig(error);
    if (isprint(str[1]) && isprint(str[2]) && isprint(str[3]) && isprint(str[4])) {
        str[0] = str[5] = '\'';
        str[6] = '\0';
    } else {
        sprintf(str, "%d", (int)error);
    }

    fprintf(stderr, "Error: %s(%s)\n", operation, str);
    exit(1);
}

- (void)yourFunction
{
    AudioBufferList audioBufferList;
    CMBlockBufferRef blockBuffer;
    CMSampleBufferGetAudioBufferListWithRetainedBlockBuffer(sampleBuffer, NULL, &audioBufferList, sizeof(audioBufferList), NULL, NULL, 0, &blockBuffer);
    CMItemCount numberOfFrames = CMSampleBufferGetNumSamples(sampleBuffer); // corresponds to the number of CoreAudio audio frames

    currentSampleTime += (double)numberOfFrames;

    AudioTimeStamp timeStamp;
    memset(&timeStamp, 0, sizeof(AudioTimeStamp));
    timeStamp.mSampleTime = currentSampleTime;
    timeStamp.mFlags |= kAudioTimeStampSampleTimeValid;

    AudioUnitRenderActionFlags flags = 0;
    aurioTouchAppDelegate *THIS = (aurioTouchAppDelegate *)[[UIApplication sharedApplication]delegate];
    CheckError(AudioUnitRender(self.rioUnit, &flags, &timeStamp, 1, numberOfFrames, &audioBufferList),
               "Error with AudioUnitRender");
} 
```

# mysql - IF ELSE statement to join table sql

> ID：15507481
> 
> 赞同：0
> 
> 时间：2013-03-19T18:22:13.770
> 
> 标签：mysql, sql, if-statement, inner-join

I have one supertype table where I have to pick 1 subtype table from 2 subtypes a,b. A subtype cannot go with the other one so for me to query I have to check whether if the supertype id is contained on one of the subtypes. I have been doing experiment queries but cannot get it right.

This is what somehow I thought of:

```
SELECT * from supertypetable INNER JOIN 
IF  (a.id = given.id) then a ON a.id = supertypetable.id
ELSE  b ON b.id = supertetable.id

job Table
________________________________
|job_id| blach2x....
________________________________
|    1  |
|    2  |
|    3  |
________________________________

partime Table
________________________________
|job_id| blach2x....
________________________________
|    2  |
|    3  |
________________________________

fulltime Table
________________________________
|job_id| blach2x....
________________________________
|    1  |
|       |
________________________________ 
```

I want to join tables that satisfy my given id

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:27:46.227

这看起来很像 rails/activerecord 中的多态连接。它在那里实现的方式是，“超类型”表有两个字段：subtype_id 和 subtype_type。subtype_type 表有一个字符串，可以很容易地变成正确的子类型表的名称；subtype_id 具有该表中行的 id。像这样构建表格可能会有所帮助。

您要问的下一个问题是您希望在结果中看到什么？如果您想查看超类型表和所有子类型表，您可能必须一次将它们连接起来，然后将它们合并在一起。换句话说，首先连接一个子类型表，然后连接下一个，等等。如果这不是你想要的，也许你可以进一步澄清你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:29:53.167

如果 a.id 永远不能等于 b.id 您可以在两个表上进行连接，然后执行 UNION 并且只有 id 匹配的表才会返回结果：

```
SELECT * from supertypetable 
INNER JOIN 
a ON a.id = supertypetable.id
UNION
SELECT * from supertypetable 
INNER JOIN 
b ON b.id = supertypetable.id 
```

如果 a.id 可以等于 b.id，那么这将不起作用。但这是一个想法

编辑评论：这种方法只有在 a 和 b 的结构相同的情况下才有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T18:45:18.473

所以一个简单的建议可能就是：

```
 SELECT * FROM job
    left join parttime on parttime.job_id = job.job_id
    left join fulltime on fulltime.job_id = job.job_id
where job.job_id = @job_id 
```

然后让您的应用程序找出两个连接表中的哪一个没有 NULL 数据并显示它。

如果您不介意不一致的数据集并且总是想要正确的返回集（尽管您仍然需要某种应用程序逻辑，因为正如您所说，parttime 和 fulltime 的结构是不同的，那么您怎么样在没有某种检查的情况下有条件地显示/使用他们的数据？如果你要进行检查，你不妨先做，找出给定的 job_id 子类型是什么，然后选择适当的查询在那里运行。）

对不起！题外话！

存储过程可以为您执行此逻辑（删除所有连接，仅作为示例）：

```
CREATE PROCEDURE getSubTypeDATA (@job_id int)
BEGIN

IF (SELECT EXISTS(SELECT 1 FROM parttime WHERE job_id = @job_id)) = 1
BEGIN
SELECT * from parttime
END
ELSE
BEGIN
SELECT * from fulltime
END

END 
```

或者，如果您想要一个一致的数据集（非常适合应用程序逻辑），为什么不将全职和兼职之间的公共列放入 UNION 语句，并为它们不共享的列创建硬编码的 NULL。例如，如果 fullTime 看起来像

EmployeeID、DepartmentID、Salary

和partTime看起来像

EmployeeID、DepartmentID、HourlyRate

你可以做

```
SELECT job.*, employeeid, departmentid, salary, null as hourlyrate FROM job inner join fulltime on fulltime.job_id = job.job_id
where job.job_id = ?
union
  SELECT job.*, employeeid, departmentid, null as salary, hourlyrate FROM job inner join parttime on parttime.job_id = job.job_id
where job.job_id = ? 
```

如果有一百个不同的列，这可能会很笨拙。此外，如果这不明显，具有完全不同结构但使用相同外键的子类型是您打破第三范式的一个很好的线索。

# iphone - 在没有游戏中心视图控制器的情况下处理对 GKTurnBasedMatch 的邀请

> ID：15507482
> 
> 赞同：5
> 
> 时间：2013-03-19T18:22:17.650
> 
> 标签：iphone, ios, game-center, gamekit, gkturnbasedmatch

我正在开发一个简单的回合制文字游戏，但我很难弄清楚邀请是如何工作的。当用户 A 邀请用户 B 参加游戏时，我希望用户 B 能够在我的自定义匹配界面（即列出用户 B 的所有游戏的屏幕）中看到该游戏。如果用户 B 在被邀请参加游戏时单击通知，一切都很好，但如果用户 B 只是自己导航到应用程序，我仍然希望游戏通过我自己的界面可见。

每当出现此比赛界面屏幕时，我都会使用`[GKTurnBasedMatch loadMatchesWithCompletionHandler:]`它来获取本地玩家的所有比赛。有了这个，我假设用户 B 可以看到他被邀请参加的比赛，但是这个新的比赛没有出现。如果我通过 接受邀请`GKTurnBasedMatchmakerViewController`，则用户按预期进入游戏，但更令人费解的是，如果我打开我的`GKTurnBasedMatchmakerViewController`然后取消而不接受邀请，现在我的自定义匹配界面中会出现一个新的匹配，但它缺少用户 A 发送的匹配数据。

总而言之，我真的只是想知道如何`GKTurnBasedMatch`使用自定义界面（而不是必须使用`GKTurnBasedMatchmakerViewController`）正确显示和接受邀请。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:16:05.977

这个问题似乎有几个人感兴趣，所以这里是我最终做的一个粗略的近似。

首先，新比赛根本没有出现的原因只是我没有`[GKTurnBasedMatch loadMatchesWithCompletionHandler:]`像我想的那样每次都想刷新视图时打电话。所以我记得没有真正的问题。

真正的问题是我收到并显示新的`GKTurnBasedMatch`，但没有任何数据（即对方玩家的第一步）可用。从本质上讲，`[GKTurnBasedMatch loadMatchesWithCompletionHandler:]`似乎不能保证为您提供最新的`GKTurnBasedMatch`可用对象。为了确保匹配是最新的，我还必须`[match loadMatchDataWithCompletionHandler:]`在返回的每个匹配上调用 , `[GKTurnBasedMatch loadMatchesWithCompletionHandler:]`（其中`match`一个是 GKTurnBasedMatches）。这会将与该匹配关联的最新匹配数据作为`NSData`对象返回。然后我可以使用它`NSData`来确保我的比赛表中的所有比赛都被刷新，以反映游戏中心的最新变化。

简而言之，`loadMatchDataWithCompletionHandler`在您的`GKTurnBasedMatch`对象上使用以确保它们的数据是最新的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-07T20:19:25.543

**更新：现在包括接收邀请的实际答案。**

近一周来，我一直在努力以编程方式处理回合制比赛的邀请。我终于找到了答案。我要特别强调它，因为我花了*很*长时间才找到：

> Game Center 将回合制邀请视为*回合事件。*它们的*处理*方式与其他邀请不同。

基于回合的事件在协议中的此函数中处理`GKLocalPlayerListener`：

```
player(_ player: GKPlayer, receivedTurnEventFor match: GKTurnBasedMatch, 
       didBecomeActive: Bool) 
```

当您收到比赛时，请检查您是否被邀请参加比赛，然后立即进行。您已收到邀请。

**但：**

通过令人沮丧的反复试验，我发现了一些注意事项，希望可以为您节省一些宝贵的时间：

1.  它只是简单*并不总是有效。*信不信由你，Game Center 是不可靠的。这意味着您需要一个备份系统来查看本地球员的公开比赛并搜索他们以寻找新的邀请。这本身与警告＃2有关。
2.  被邀请参加比赛的玩家（例如，playerJake 被邀请参加 matchFoo）实际上不会收到该邀请，也不会在轮到他们*返回的比赛中看到该比赛。`loadMatches`*显然，在轮到他们之前，Game Center 实际上不会*以任何方式让任何玩家参与比赛的邀请名单。*
3.  如果您可以确定您被邀请参加但尚未回复的比赛，则必须`acceptInvite(...)` *直接致电该比赛*。因此，如果 playerJake 检查了由 检索到的匹配`loadMatches`项，并且能够检测到 matchFoo 仍然有一个开放的邀请，则 playerJake 必须调用`matchFoo.acceptInvite( /* ...completion handler stuff here... */)`，然后快乐的 playerJake 关闭并运行。

从这里你应该能够让你自己的程序匹配系统工作。*祝你好运，我是认真的！*

# bash - 扩展 bash 脚本以接收更多参数？

> ID：15507486
> 
> 赞同：1
> 
> 时间：2013-03-19T18:22:29.547
> 
> 标签：bash, shell, parameters, arguments

我有以下 bash 脚本，称为垃圾.sh。在我的脚本中，我向用户请求一个参数，只是一个文件名。并将文件移动到位于用户主目录中的垃圾箱文件夹中。如果该目录不存在，它只是创建一个然后将文件移到那里。另一方面，如果文件不存在，它会通知用户。

```
#!/bin/bash

FILE=$1
FOLDER="$HOME/Trash"
ARGS=1

if [ $# -ne $ARGS ]
then
    echo "Error: You are missing an argument!"
    echo "Usage: ./trash.sh <file_name>"
else
    if [ -s $FILE ]
    then
        if [ -d $FOLDER ]
        then
            mv -v $FILE $FOLDER
        else
            mkdir $FOLDER
            mv -v $FILE $FOLDER
        fi
    else
        echo "The file you have entered does not exist!"
    fi
fi 
```

现在，我想以以下方式扩展我的脚本，但我不知道如何，因为我对 bash 脚本没有太多经验。首先，我想让用户输入多个参数，只需多个文件名，并移动 Trash 文件夹中的所有文件。如果一个或多个文件不存在，它将通知用户哪些文件或哪些文件不存在。简单地说，我希望我的脚本能够接收用户想要的尽可能多的参数。

例如，如果用户像这样调用脚本：

```
./trash.sh file1 file2 file3 
```

假设 file2 不存在，我希望输出是。

```
file1 -> /home/user/Trash/file1
file3 -> /home/user/Trash/file3
file2 doesn't exist! 
```

最后，我还希望它接受这样的参数：

```
./trash *.txt 
```

简单地说，这将移动所有以 .txt 扩展名结尾的文件。如果有人可以帮助我实现这些目标/扩展我的脚本，我会很高兴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:25:52.453

```
[ $# = 0 ] && { echo "Usage: $0 file [...]" >&2; exit 1; }

FOLDER="$HOME/Trash"
mkdir -p "$FOLDER" || exit 1

for file in "$@"
do
    if [ -s "$file ]
    then mv -v "$file" "$FOLDER"
    else echo "$0: $file does not exist" >&2
    fi
done 
```

您可以检测零参数并在循环之前发出使用消息。使用`"$@"`对于处理包含空格等的文件名至关重要；同上 using`"$file"`来引用文件。如果目标目录已经存在，则使用`mkdir -p`不会失败；如果无法创建目录或存在具有给定名称的文件（而不是目录），它确实会失败。请注意，错误消息都包含`$0`; 请注意，“找不到文件”消息指定了文件名。

正如评论中所讨论的，您可以通过两个步骤来简化它：

```
[ $# = 0 ] && { echo "Usage: $0 file [...]" >&2; exit 1; }

FOLDER="$HOME/Trash"
mkdir -p "$FOLDER" || exit 1

for file in "$@"
do  mv -v "$file" "$FOLDER"
done 
```

进而：

```
[ $# = 0 ] && { echo "Usage: $0 file [...]" >&2; exit 1; }
FOLDER="$HOME/Trash"
mkdir -p "$FOLDER" || exit 1
mv -v "$@" "$FOLDER" 
```

请注意，如果您删除三个目录中的 makefile，则只有其中一个会在垃圾箱中。

# java - java中的声音 - 播放声音时游戏冻结

> ID：15507488
> 
> 赞同：0
> 
> 时间：2013-03-19T18:22:34.703
> 
> 标签：java, audio, javasound

每当我在游戏中播放声音时，线程都会冻结，然后在声音播放完毕后继续。声音引擎的代码：

```
package com.kgt.platformer;

import java.io.File;
import java.io.IOException;    
import javax.sound.sampled.AudioFormat;
import javax.sound.sampled.AudioInputStream;
import javax.sound.sampled.AudioSystem;
import javax.sound.sampled.DataLine;
import javax.sound.sampled.LineUnavailableException;
import javax.sound.sampled.SourceDataLine;

public class Sound {
    private final static int BUFFER_SIZE = 12800000;
    private static File soundFile;
    private static AudioInputStream audioStream;
    private static AudioFormat audioFormat;
    private static  SourceDataLine sourceLine;

    /**
     * 
     * @param filename the name of the file that is going to be played
     *
     */
    public static void playSound(String filename){

        String strFilename = filename;

        try {
            soundFile = new File(strFilename);
        } catch (Exception e) {
            e.printStackTrace();
            System.exit(1);
        }

        try {
            audioStream = AudioSystem.getAudioInputStream(soundFile);
        } catch (Exception e){
            e.printStackTrace();
           System.exit(1);
        }

        audioFormat = audioStream.getFormat();

        DataLine.Info info = new DataLine.Info(SourceDataLine.class, audioFormat);
        try {
            sourceLine = (SourceDataLine) AudioSystem.getLine(info);
            sourceLine.open(audioFormat);
        } catch (LineUnavailableException e) {
            e.printStackTrace();
            System.exit(1);
        } catch (Exception e) {
            e.printStackTrace();
            System.exit(1);
        }

        sourceLine.start();

        int nBytesRead = 0;
        byte[] abData = new byte[BUFFER_SIZE];
        while (nBytesRead != -1) {
            try {
                nBytesRead = audioStream.read(abData, 0, abData.length);
            } catch (IOException e) {
                e.printStackTrace();
            }
            if (nBytesRead >= 0) {
                @SuppressWarnings("unused")
                int nBytesWritten = sourceLine.write(abData, 0, nBytesRead);
            }
        }

        sourceLine.drain();
        sourceLine.close();
    }
} 
```

最终发生的是我开始游戏，它播放声音，游戏冻结然后继续。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T18:31:16.520

您可以启动一个线程来处理流的读取和写入。看看这里： [如何在 Java 中播放声音？](https://stackoverflow.com/questions/26305/how-can-i-play-sound-in-java)

示例代码：

```
new Thread(new Runnable() {
  public void run() {
    Sound.playSound("Test.wav");
  }
}).start(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T02:55:27.837

基于 Java 声音的`Clip`使用它自己的 (daemon) `Thread`。请参阅此示例，该示例将循环播放 2 个剪辑（尽管被警告，请调低音量）。另请注意，第二个剪辑需要一些时间才能加载。等到你看到`JOptionPane`- 然后两个剪辑都应该循环播放。

```
import java.net.URL;
import javax.swing.*;
import javax.sound.sampled.*;

public class LoopSounds {

    public static void main(String[] args) throws Exception {
        URL url1 = new URL(
            "http://pscode.org/media/leftright.wav");
        URL url2 = new URL("http://pscode.org/media/100_2817-linear.wav");
        Clip clip1 = AudioSystem.getClip();
        Clip clip2 = AudioSystem.getClip();
        // getAudioInputStream() also accepts a File or InputStream
        AudioInputStream ais1 = AudioSystem.
            getAudioInputStream( url1 );
        clip1.open(ais1);
        clip1.loop(Clip.LOOP_CONTINUOUSLY);

        AudioInputStream ais2 = AudioSystem.
            getAudioInputStream( url2 );
        clip2.open(ais2);
        clip2.loop(Clip.LOOP_CONTINUOUSLY);
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                // A GUI element to prevent the Clip's daemon Thread
                // from terminating at the end of the main()
                JOptionPane.showMessageDialog(null, "Close to exit!");
            }
        });
    }
} 
```

# javascript - Django gives TypeError at /loadFcs expected string or buffer

> ID：15507489
> 
> 赞同：0
> 
> 时间：2013-03-19T18:22:38.953
> 
> 标签：javascript, django, typeerror

In my js I make a simple request as below

```
$.post('/loadFcs', function(data) {alert('hi');}); 
```

In my urls.py, I have

```
from views import loadFcs
  urlpatterns = patterns('',
  ('^$', direct_to_template, { 'template': 'index.html' }),
  ('^loadFcs$', loadFcs)
 ) 
```

In my views I have

```
@require_POST
def loadFcs(request):
  results = {}
  //do some calculation and calucalte results, results looks like {"a":["avalue", "bvalue"], "b":["avalue", "bvalue"]}
  return HttpResponse(json.dumps(results),mimetype="application/json") 
```

But I see the following error in my Firebug console under the 'Response' tab

TypeError at /loadFcs expected string or buffer

Request Method: POST

Where am I making a mistake? I also tried just

```
 return HttpResponse(json.dumps(results)) 
```

but did not work either.

# breeze - 为什么 Breeze Web API 实现使用字符串而不是 JSON 对象来响应元数据请求？

> ID：15507497
> 
> 赞同：2
> 
> 时间：2013-03-19T18:22:58.967
> 
> 标签：breeze

对任何元数据请求的响应的 Breeze Web API 实现是否有任何理由[返回字符串](http://www.breezejs.com/sites/all/apidocs/classes/MetadataStore.html)而不是 JSON 对象？

将元数据作为文本发送会在网络上（由于“编码”）和由于手动 JSON.parse 而在客户端增加很多开销。

我认为您的[控制器](http://www.breezejs.com/documentation/web-api-controller)可以通过指定 contentType 标头简单地将元数据返回为 JSON：即

```
[HttpGet]
public HttpResponseMessage Metadata()
{
    var result = new HttpResponseMessage { Content = new StringContent(_contextProvider.Metadata())};
    result.Content.Headers.ContentType = new MediaTypeHeaderValue("application/json");
    return result;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T23:59:49.267

从 v 1.2.7 开始，**BreezeController**属性现在自动执行此操作....感谢您的想法。

# html - 如何从窗口中心的画布中获取 x 和 y

> ID：15507498
> 
> 赞同：0
> 
> 时间：2013-03-19T18:22:59.787
> 
> 标签：html, canvas

我试图在位于具有自动边距的 div 中的画布上获取鼠标坐标，但没有成功。我设置了一个小提琴，我希望有人能看到问题所在。

如果我删除边距，画布背后的逻辑是正确的，但边距会因偏移量的尺寸而偏离。

[http://jsfiddle.net/mcgraw73/Mfafz/](http://jsfiddle.net/mcgraw73/Mfafz/)

```
function init() {
    FGcanvas.addEventListener('mousedown', mouseDown, false);
    FGcanvas.addEventListener('mouseup', mouseUp, false);
    FGcanvas.addEventListener('mousemove', mouseMove, false);
}

function mouseDown(e) {
  rect.startX = e.clientX - FGcanvas.offsetLeft
  rect.startY = e.clientY - FGcanvas.offsetTop;
  drag = true;
}

function mouseUp() {
  drag = false;
}

function mouseMove(e) {
  if (drag) {
    rect.w = (e.clientX - rect.startX) - FGcanvas.offsetLeft; //(event.clientX - rect.start.x) - canvas.offsetLeft
    rect.h = (e.clientY - rect.startY) - FGcanvas.offsetTop;
    FGcontext.clearRect(0,0,FGcanvas.width,FGcanvas.height);
    draw();
  }
}

function draw() {
  FGcontext.clearRect(0,0,FGcanvas.width,FGcanvas.height);
  FGcontext.fillRect(rect.startX, rect.startY, rect.w, rect.h);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:55:20.050

我不太确定，因为我非常依赖 jQuery，但我认为当它是绝对值时，你无法获得元素的偏移值。

那么为什么不从不在 absolute 的父 div 中获取位置呢？我替换了这个：

```
FGcanvas.offsetLeft
FGcanvas.offsetTop 
```

和 ：

```
document.getElementById('ramRod').offsetLeft
document.getElementById('ramRod').offsetTop 
```

我还删除了您在此处指定的位置：相对：

```
body, header, aside, footer, div {
    display: block;
    position: relative;
} 
```

它只影响主体，因为您再次为所有其他元素指定它。

希望这有帮助！（这个网站上的第一个答案！）

编辑：哦，是的，忘记了链接，这是我更新的小提琴：http: [//jsfiddle.net/ZDXWP/](http://jsfiddle.net/ZDXWP/)

# java - Java：即使满足条件，do/while 循环也会重复

> ID：15507499
> 
> 赞同：0
> 
> 时间：2013-03-19T18:23:00.330
> 
> 标签：java, do-while

我正在尝试一个简单的 do while 循环，假设输入小于 1 且大于 1000 时运行。它应该要求用户输入正确的数字，否则在循环中。它现在似乎正在做的是再重复一次循环，要求正确的输入，然后显示结束消息。如果满足条件，不确定为什么会重复它

```
String name = JOptionPane.showInputDialog(null,
        "Please enter students lastname");

int input = Integer.parseInt(JOptionPane.showInputDialog(null,
        "Please enter students ID"));

do {
    JOptionPane.showMessageDialog(null,
            "Please enter a student ID within the correct parameters");
    input = Integer.parseInt(JOptionPane.showInputDialog(null,
            "Please enter students ID"));
} while (input < 1 && input > 1000);

// Output dialog with user input
JOptionPane.showMessageDialog(null, "StudentID: " + input
        + "\nStudent Last: " + name); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T18:24:43.753

您至少要展示两次对话框——一次在循环之前，一次在循环内。

直到循环至少执行一次之后，do-while 才会测试条件。

您可以：

*   消除第一次调用以显示输入对话框。
*   或者将您的 do-while 循环更改为 while 循环。

此外，请参阅@GrailsGuy 对循环测试的评论。您当前的测试将始终失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T18:27:23.447

我认为您虽然 CONDITION 不正确，因为我阅读了打印声明中的评论，我相信您需要

```
 while (input > 1 && input < 1000); 
```

因为ID不能是负数。

请记住，如果 ID 值介于 之间，则此条件为真`2 to 999`。

**正如您评论**的那样：*只是为了澄清，如果用户输入范围之外的数字（1-1000），即 2005，我希望循环循环，要求用户输入范围内的数字，直到满足该条件*

喜欢，阅读评论以了解我的代码是什么：

```
input = -1;
while(input < 1 || input > 1000){ 
//    ^              ^ OR greater then 1000
// either small then 1   
} 
```

**注意：**我选择了 OR 而不是 AND，因为任一条件失败，您的循环都应该继续。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-19T18:27:36.763

我会用一个来改变它`while`：

```
int input = Integer.parseInt(JOptionPane.showInputDialog(null,
    "Please enter students ID"));
while(input < 1 || input > 1000) {
    // Your stuff
} 
```

* * *

**说明**

我认为错误的是，首先，任何数字都不能（同时）小于 1 和大于 1000，所以很明显，有效输入应该在指定范围*之外*（也就是说，从`-Infinity`到`0` ***或***从`1001`到`Infinity`)。

其次，另一个答案中提到的内容：`do...while`循环总是至少运行一次，只要`while`条件为真，它就会重复。由于输入是在进入循环*之前*`always takes place... What's the need to request a correction on a possibly correct`被读取的，“确认输入”的值？

我认为错误的是对验证规则的含义的误解：

> *我正在尝试一个简单的 do while 循环，如果输入小于 1**并且**大于 1000则假设运行*

**和**这个词是什么意思？我认为这意味着输入必须在给定范围*之外。*

# css - 应用较低特异性样式，而不是较高特异性悬停

> ID：15507503
> 
> 赞同：1
> 
> 时间：2013-03-19T18:23:16.263
> 
> 标签：css, google-chrome, css-selectors, less, css-specificity

正如你在这里看到的： ![什么？](../Images/9573cadc26ad143dffeaf7c39d44c407.png)

`.wrapper-dropdown .label`正在应用选择器，而不是更高的特异性`.wrapper-dropdown .dropdown li div.liwrap:hover`

这是为什么？如果相关的话，我在 osx 10.8 上使用 chrome

-编辑

这个[少](http://lesscss.org/)：[http](http://hastebin.com/feyurojusa.avrasm)
://hastebin.com/feyurojusa.avrasm 编译成这个 css：[http ://hastebin.com/dihimuquju.css](http://hastebin.com/dihimuquju.css)

还有这个[Jade](http://jade-lang.com/)：[http](http://hastebin.com/sipetaqigu.vhdl)
://hastebin.com/sipetaqigu.vhdl 编译到这个 html：[http ://hastebin.com/sufavolumo.xml](http://hastebin.com/sufavolumo.xml)

Addtionally 我有这个小 JavaScript 处理点击事件：[http ://hastebin.com/sufavolumo.xml](http://hastebin.com/sufavolumo.xml)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T18:50:13.107

指定的元素与 指定的`.label`元素不同`div.liwrap`；相反，`.label`是`div.liwrap`的后代之一。然后特异性变得无关紧要，因为选择器完全匹配不同的元素。

删除线仅仅意味着`div.liwrap`祖先的`color`被取消而不是被继承，因为你给出`.label`了自己的`color`声明。

如果`.label`要从`div.liwrap`悬停继承，则需要在 LESS 代码中修改以下规则：

```
 .dropdown li div.liwrap:hover {
    border-color: #00aeef;
    color: #00aeef;
  } 
```

对于这样的事情：

```
 .dropdown li div.liwrap:hover {
    border-color: #00aeef;
    color: #00aeef;
    .label {
      color: #00aeef; // Or color: inherit;
    }
  } 
```

# ubuntu-12.04 - vagrant puppet 模块路径

> ID：15507506
> 
> 赞同：11
> 
> 时间：2013-03-19T18:23:32.313
> 
> 标签：ubuntu-12.04, puppet, vagrant

```
Puppet 2.7.19
Vagrant version 1.0.6
VM OS Ubuntu 12.04 
```

我正在尝试从 vagrant 设置 puppet 模块路径。这看起来应该很简单。

在我的流浪文件中，我有：

```
Vagrant::Config.run do |config|
  config.vm.provision :puppet, :module_path => "my_modules"
  config.vm.provision :puppet, :options => ["--modulepath", "my_modules"]
end 
```

当我更改模块路径的值时，它似乎没有效果（之后`vagrant reload`）

这是一个片段`vagrant up`

```
[default] -- v-root: /vagrant
[default] -- manifests: /tmp/vagrant-puppet/manifests
[default] -- v-pp-m0: /tmp/vagrant-puppet/modules-0 
```

注意`/tmp/vagrant-puppet/modules-0`? 这是关于什么的？

然后从 vagrant 内部：

```
vagrant@precise64:~$ puppet apply --configprint modulepath
/home/vagrant/.puppet/modules:/usr/share/puppet/modules 
```

所以当我这样做时：`puppet module install puppetlabs/mysql`

我收到此错误：

```
Preparing to install into /home/vagrant/.puppet/modules ...
Error: Could not install module 'puppetlabs-mysql' (latest)
  Directory /home/vagrant/.puppet/modules does not exist 
```

所以我必须要：

```
vagrant@precise64:~/.puppet$ mkdir /home/vagrant/.puppet/modules
vagrant@precise64:~/.puppet$ puppet module install puppetlabs/mysql
Preparing to install into /home/vagrant/.puppet/modules ...
Downloading from http://forge.puppetlabs.com ...
Installing -- do not interrupt ...
/home/vagrant/.puppet/modules
└─┬ puppetlabs-mysql (v0.6.1)
  └── puppetlabs-stdlib (v3.2.0) 
```

然后我必须将模块移动到 vagrant 可以看到它们的位置......

```
mv /home/vagrant/.puppet/modules/mysql /tmp/vagrant-puppet/modules-0 
```

似乎这可能是一个错误，或者我真的错过了一些东西。看起来很基本，所以我想听听其他人是如何解决这个问题的。

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-06-04T15:08:57.653

您有效地指定了 module_path 两次：

```
Vagrant::Config.run do |config|
  config.vm.provision :puppet, :module_path => "my_modules"
  config.vm.provision :puppet, :options => ["--modulepath", "my_modules"]
end 
```

我不确定哪个最终会覆盖另一个，但是您不应该以两种方式指定模块路径。

我认为最好使用 vagrant 对 module_path 的支持而不是`:options`数组，就像你的第一行一样。我更喜欢以下风格：

```
Vagrant::Config.run do |config|
  ...
  config.vm.provision :puppet do |puppet|
    puppet.manifests_path = "manifests"
    puppet.module_path = ["modules-contrib","modules-custom"]
    puppet.manifest_file  = "site.pp"
  end # puppet
end # config 
```

你问了关于`/tmp/vagrant-puppet/modules-0`. 这是 modulepath 数组中的第一项，其中`0`是数组索引。即在我上面的示例中，我的 vagrant 项目中的`modules-contrib`和`modules-custom`目录分别安装在`/tmp/vagrant-puppet/modules-0`和`/tmp/vagrant-puppet/modules-1`。

您不应该在 vagrant box 中安装 puppet 模块。相反，将它们安装在主机环境中 vagrant 项目的模块目录中。

我建议不要一个一个地安装它们，而是使用图书馆员`gem install librarian-puppet`木偶`Puppetfile`（您用于自定义 puppet 模块的那个。我使用`modules-contrib`第三方模块的目录，并将我自己的放在`modules-custom`.

告诉图书馆员把它的模块放在哪里：

```
librarian-puppet config --local path modules-contrib 
```

有关 Puppetfile 的布局，请参阅[https://github.com/rodjek/librarian-puppet](https://github.com/rodjek/librarian-puppet)。它非常简单，可以让你随意混合 puppet-forge 和 git 源。

您应该将`modules-contrib`文件夹添加到`.gitignore`文件中（假设您使用 git），并依赖`Puppetfile`文件的版本控制。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-03T01:41:20.703

[正如它从Vagrant Documentation](http://docs-v1.vagrantup.com/v1/docs/provisioners/puppet.html)中读取的那样：

> Vagrant Puppet 配置器允许您将模块的本地文件夹挂载到 VM 上，并将配置 Puppet 以自动识别它们。

**本地文件夹**是指主机上的文件夹。

接着：

> 模块路径相对于包含 Vagrantfile 的文件夹展开。

包含 VagrantFile 的文件夹在您的主机上。

因此，您尝试使用设置主机上文件夹路径的选项来控制 VM 上文件夹的路径。

您必须将模块放在主机上，而不是虚拟机上。这是一个例子：

**主机**

~/Dev/mybox/ -> “mybox” Vagrant VM 的基本路径

~/Dev/mybox/VagrantFile -> 控制“mybox”的 Vagrant 文件

~/Dev/mybox/puppet/modules -> "mybox" 上使用的 puppet 模块的路径

~/Dev/mybox/puppet/modules/apache -> 要在“mybox”上应用的 apache 模块的路径

流浪文件：

```
 # Enable puppet provisioning
  config.vm.provision :puppet do |puppet|
     puppet.module_path = "puppet/modules"
     puppet.manifests_path = "puppet"
     puppet.manifest_file  = "mybox.pp"
  end 
```

**虚拟机**

当我启动 mybox 时：

```
[default] Mounting shared folders...
[default] -- v-root: /vagrant
[default] -- manifests: /tmp/vagrant-puppet/manifests
[default] -- v-pp-m0: /tmp/vagrant-puppet/modules-0 
```

然后

```
vagrant@mybox:~$ cd /tmp/vagrant-puppet/modules-0
vagrant@mybox:/tmp/vagrant-puppet/modules-0$ ls
apache 
```

如您所见，主机上的 ~/Dev/mybox/puppet/modules/apache 目录安装在 Vagrant VM 上的 /tmp/vagrant-puppet/modules-0 上。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-30T13:08:43.547

所以，如果你像我一样一直盯着这个问题和答案，想知道你的情况有什么不同，这就是我所缺少的：

从关于配置的 vagrant 文档中，我选择了这个片段：

```
config.vm.provision :puppet do |puppet|
  puppet.manifests_path = "my_manifests"
  puppet.manifest_file = "default.pp"
end 
```

在尝试让来宾识别模块时，我拿起了这一行（可能来自[这里](http://docs-v1.vagrantup.com/v1/docs/provisioners/puppet.html "这里")）：

```
config.vm.provision :puppet, :module_path => "my_modules" 
```

不太了解 ruby​​ 或 vagrant，我把它放在第一个片段下面，假设它会以某种方式添加到它。那没有用。

然而，起作用的**是**：

```
config.vm.provision :puppet do |puppet|
  puppet.manifests_path = "my_manifests"
  puppet.manifest_file  = "default.pp"
  puppet.module_path = "my_modules"
end 
```

有时最简单的解决方案是最难找到的。

[编辑]

它还有助于理解在来宾 VM 上执行“puppet apply --configprint modulepath”命令不会向您显示 puppet 在 Vagrant 调用时将使用的模块路径。

# string - 指针中的字符数

> ID：15507511
> 
> 赞同：0
> 
> 时间：2013-03-19T18:23:45.580
> 
> 标签：string, pointers, char, sizeof

这很简单，但我忘记了，因为我上次这样做是两个月前。我想知道如何找到字符串指针中的字符（字母）数。我尝试使用 sizeof() 和 strlen() 但它们返回错误的值。例如，当 insert="-dh o output -i input" 时，sizeof() 函数返回 210。非常感谢您的帮助。我的功能：

```
int find(char* insert, char* check)
{

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:27:24.283

`strlen()`应该给出以空字符结尾的字符串的正确答案（字符串的长度）。`sizeof`是一个运算符，在这种情况下，它将返回表示`char`指针所需的字节数。

# sql - SQLDEveloper 中的 CASE 语句错误

> ID：15507518
> 
> 赞同：0
> 
> 时间：2013-03-19T18:24:02.957
> 
> 标签：sql, oracle, oracle-sqldeveloper

我的案例陈述中有一个错误，有人可以帮忙吗

```
Case
When length(cat) < 3
Then SubStr(cat,1,1) || '0' || SubStr(cat,-1,1)
Else cat
End cat1,hd0,
Case
When GEMS_CMN_HD1_ABREV.hd1 <>"00"
then " / "
**else HD1_ABR,null**
end, 
```

好像我在 Else hd1_ABR, NULL 中的错误

ORA-00905：缺少关键字 00905。00000 - “缺少关键字” *原因：
*操作：第 11 行错误第 18 列

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:31:15.763

If I am right you are trying to replace `NULL`, try `ISNULL`

```
Case
When length(cat) < 3
Then SubStr(cat,1,1) || '0' || SubStr(cat,-1,1)
Else cat
End cat1,hd0,
Case
When GEMS_CMN_HD1_ABREV.hd1 <>"00"
then " / "
else isnull(HD1_ABR,'')
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:26:29.477

将 " 替换为 ' 并删除 *。将 END 放在 null 之前。为了清楚起见，请使用 ()，这也是一种很好的做法：

```
...(CASE When GEMS_CMN_HD1_ABREV.hd1 <>'00' then ' / ' else HD1_ABR end) As some_alias, null.... 
```

# css - 页面上的中心按钮

> ID：15507523
> 
> 赞同：0
> 
> 时间：2013-03-19T18:24:17.143
> 
> 标签：css, html

text-align:center 无法使我的按钮居中。我也尝试过“margin:0px auto”，但这也没有用。我只是想将按钮垂直堆叠在页面中间，并在它们之间留出很小的空间。我该怎么做？

```
<!DOCTYPE html>
<html>
<head>
<style>
body {
text-align:center;
margin:0px auto;
background-image:url("one1.jpg");
background-repeat:repeat-x;
}

.bf_button {  
  display:block; 
  background: url(bf_button_fon_right.gif) no-repeat 100%; 
  float: left; 
  outline: none; 
  padding-right: 32px; 
  text-decoration: none; 
 } 

.bf_button:hover {  
  text-decoration: none; 
} 

.bf_button span{  
  display:block; 
  background: url(bf_button_fon_left.gif) no-repeat;  
  white-space: nowrap; 
  line-height: 74px; 
  padding: 0 0 0 32px; 
  font-family: Arial, Verdana; 
  font-size: 34px; 
  font-weight: normal;  
  color: rgb(0,0,0);  
  text-transform: none;  
 }

</style>
</head>
<body>
<img src="one.jpg"></img>
</body>
<div style="text-align:center;">
<br /> <br /> <br />
<a href="http://" class="bf_button"><span>Time & Attendance (Kronos)</span></a>
<br /> <br /> <br />
<a href="http://"  class="bf_button"><span>401K</span></a>
<br /> <br /> <br />
<a href="http://www.bcbsil.com/"  class="bf_button"><span>Medical: </span></a>
<br /> <br /> <br />
<a href="https://"  class="bf_button"><span>Dental, Vision, Life, AD&D: </span></a>
<br /> <br /> <br />
<a href="https://"  class="bf_button"><span>Flex Programs: </span></a>
</div>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:27:52.793

您将按钮向左浮动，这意味着它们会自然地向左移动。

1.  `float: left;`从_`.bf_button`
2.  添加静态宽度`.bf_button`（因为您将其定义为块）。
3.  添加`margin: 0 auto;`到`.bf_button`

最终的 CSS 定义应如下所示：

```
.bf_button {  
  display:block; 
  background: url(bf_button_fon_right.gif) no-repeat 100%; 
  outline: none;
  margin: 0 auto;
  padding-right: 32px; 
  text-decoration: none;
  width: 150px;
 } 
```

You can also remove the `<br /> <br /> <br />` as it's not needed when setting the buttons to `display: block;`. Block elements (or those with display: block) will automatically drop to a new line and stack. To add spacing, simply add a bottom or top margin to your buttons.

Another note. You are closing your `<body>` tag too soon. Your `</body>` tag should be directly before your `</html>` tag.

# android - 使用对象和 localStorage 在 Phonegap 页面周围传递数据

> ID：15507526
> 
> 赞同：0
> 
> 时间：2013-03-19T18:24:23.363
> 
> 标签：android, jquery, ios, cordova, jquery-mobile

我需要在两页左右传递一些数据。这是我用于此的代码示例：

```
myContentObject = {

    content: new Array(),

    import: function(dados){
        this.Content = JSON.parse(window.localStorage.getItem("myContentObject.content"));
        return this;
    },

    export: function(){
        window.localStorage.setItem("myContentObject.content", JSON.stringify(this.content));
        return this;
    },
} 
```

该对象在 JS 执行期间被初始化，在 'pageinit' 事件上调用导入函数，当用户点击导航按钮时调用导出函数。

这些功能确实会触发，您可以在其中放置警报并看到它们弹出。但是，数据不会保留。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:49:08.757

我解决了。

`localStorage`键不能包含`.`

# c# - 维护同步和异步实现

> ID：15507530
> 
> 赞同：4
> 
> 时间：2013-03-19T18:24:30.823
> 
> 标签：c#, .net, async-await

维护该方法的同步和异步版本的最佳实践是什么？

```
Let's suppose we have the following method:
public ImportData Import(ZipFile zipFile)
{
  ... //Step 1\. Initialization
  var extractedZipContent = zipFile.Extract(); //Step 2
  ... //Step 3\. Some intermediate stuff
  var parsedData = ParseExtractedZipContent(extractedZipContent); //Step 4
  ... //Step 5\. Some code afterwards
} 
```

第 2 步和第 4 步需要长时间运行，因此我们希望在 Import 方法的异步版本中异步调用它们：

```
public async Task<ImportData> ImportAsync(ZipFile zipFile)
{
  ... //Step 1\. Initialization
  var extractedZipContent = await zipFile.Extract(); //Step 2
  ... //Step 3\. Some intermediate stuff
  var parsedData = await ParseExtractedZipContentAsync(extractedZipContent); //Step 4
  ... //Step 5\. Some code afterwards
} 
```

现在我们有同步和异步实现。但是我们也有代码重复。我们怎样才能摆脱它？

我们可以提取步骤 1、3 和 5 并从两个实现中调用它们。但是 1\. 我们仍然重复方法调用的顺序 2\. 在真实代码上并不是那么容易

我想到的最好的主意是异步实现。而同步实现只会等待异步实现完成：

```
public ImportData Import(ZipFile zipFile)
{
  var importAsyncTask = ImportAsync(zipFile);
  importAsyncTask.Wait();
  return importAsyncTask.Result;
} 
```

但我不确定这个解决方案。有没有关于这个问题的最佳实践？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T18:29:16.537

> 我们怎样才能摆脱它？

你不能。

Stephen Toub 有一些优秀的博客文章解释了[异步方法的同步包装器](https://devblogs.microsoft.com/pfxteam/should-i-expose-synchronous-wrappers-for-asynchronous-methods/)和[同步方法的异步包装](https://devblogs.microsoft.com/pfxteam/should-i-expose-asynchronous-wrappers-for-synchronous-methods/)器的缺陷。简短的回答是：不要。

你最好的选择是暂时保持两者。几年后，同步方法可以被认为是过时的。

另请参阅[此问题](https://stackoverflow.com/questions/14870478/write-a-well-designed-async-non-async-api)。

# javascript - 发生错误时创建弹出对话框 Jquery Mobile

> ID：15507533
> 
> 赞同：3
> 
> 时间：2013-03-19T18:24:34.013
> 
> 标签：javascript, jquery-mobile

我希望在发生错误时出现一个对话框，但是我不知道该怎么做。我希望代码出现在下面的代码中。因此，当调用此函数时，会出现一个弹出对话框。

`.fail(function(){ alert("$.get failed!"); //replace with failed dialog }) });`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T18:33:07.457

所以我猜这就是你所说的。

[http://api.jquerymobile.com/popup/](http://api.jquerymobile.com/popup/)

将此嵌入到您的 html 中的某个地方。

```
 <div data-role="popup" id="popupCloseLeft" class="ui-content" style="max-width:280px">
 <a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-left">Close</a>
 <p>I have a close button at the top left corner with simple HTML markup.</p>
 </div> 
```

然后在你的失败函数中调用它。

```
$( "#popupCloseLeft" ).popup("open"); 
```

# jquery - 带有事件的jQuery日历

> ID：15507535
> 
> 赞同：0
> 
> 时间：2013-03-19T18:24:42.930
> 
> 标签：jquery, events, calendar

我正在使用 jquery 日历。我想在日历之后突出显示不同的日期并显示日期事件。以下是显示事件的图像。

![在此处输入图像描述](../Images/980caf1a314c28bea2f499a132d0cea1.png)

```
<script type="text/javascript" src="js/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="js/jquery.ui.datepicker.min.js"></script>
<script>
$(document).ready(function(e) {
    $('#calendar').datepicker({
        inline: true,
        firstDay: 1,
        showOtherMonths: true,
        dayNamesMin: ['S', 'M', 'T', 'W', 'T', 'F', 'S']
    });
});
</script>

<div class="my">
<div id="calendar"></div>
</div>
<script type="text/javascript">
 var dates = [
    [2013, 3, 7],
    [2013, 3, 9],
    [2013, 3, 25]
];

$('#calendar').datepicker({
    beforeShowDay: function (date){
        var year = date.getFullYear(), month = date.getMonth(), day = date.getDate();
        for (var i=0; i < dates.length; ++i)
            if (year == dates[i][0] && month == dates[i][2] - 1 &&  day == dates[i][2])
                return [false, 'ui-state-highlight ui-state-active'];

        return [false];
    }
});
</script> 
```

我已经到达下图。

![在此处输入图像描述](../Images/a01dfce5fb5cb1b9f99946fa1561bcb8.png)

在第一张图片中，您可以看到日历之后的事件。我想在日历之后显示一个选定的事件，就像在第一张图片中一样。

# php - Jquery Radio Button Submit Form

> ID：15507540
> 
> 赞同：2
> 
> 时间：2013-03-19T18:24:46.927
> 
> 标签：php, jquery, serialization, radio-button, submit

I have multiple forms on one page all are like this: The ID value changes but the options can be similar.

```
<form class="test"><td>4000</td>
<td align='center'><input type='radio' name='radio' value='car' checked></td>
<td align='center'><input type='radio' name='radio' value='boat' ></td>
<td align='center'><input type='radio' name='radio' value='Plane' ></td>
<input type='hidden' name='id' value='4000'/>
<input type='hidden' name='location' value='local'/>
<div class="form" style="display: none;">
</div></form> 
```

Using JQuery I'm trying to submit this when any of the 3 radio buttons are selected.

```
<script>
$("input[name='radio']").click(function() {
    var CurrectForm=$(this).parents('.test:first');
    $.post(
        'do.php',
        CurrectForm.serialize(),
        function( response ) {
            CurrectForm.find('#form').html( response );
               show( response );
        }
    );
} );
</script> 
```

I've used similar to the above with checkboxes and dropdown lists, which have worked fine. But this doesn't seem to submit the values to the do.php page. The values that are submitted are show in the div form. Doing a `var_dump($_POST);` results in an empty array.

Can someone point me in the right direction ? Thanks

Changing the form ti this seems to work ?

```
<td><form class="test">
<input type='radio' name='radio' value='car' checked>
<input type='radio' name='radio' value='boat' >
<input type='radio' name='radio' value='Plane' >
<input type='hidden' name='id' value='4000'/>
<input type='hidden' name='location' value='local'/>
<div class="form" style="display: none;">
</div></form></td> 
```

Why does changing the cause it to work ?

Jfiddle with working example :) [http://jsfiddle.net/QvpH5/](http://jsfiddle.net/QvpH5/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:39:21.537

我的猜测是，您的页面上有多个带有 class 的表单`test`。发生的事情是，当您使用 时`parents()`，您没有意识到**它首先找到所有祖先**，**然后搜索** `.test:first`. 这将返回第一个表单的值，无论单击哪个表单。

查看此 jsFiddle 以查看修复（将 .parents 更改为 .parent）：http: [//jsfiddle.net/SDzzr/](http://jsfiddle.net/SDzzr/)

# mysql - 统计 SQL 查询结果的出现次数

> ID：15507542
> 
> 赞同：1
> 
> 时间：2013-03-19T18:24:54.990
> 
> 标签：mysql, sql, database, count

我有一个名为“订单”的`MySQL`数据库，其中包含我所有的订单。`table`在此表中，我有不同的字段，例如：

```
id
userId  
dateOrder 
```

我想只为执行订单的用户获取按用户分组的所有`between 2 and 5`订单。

但是我的 SQL 查询不起作用。考虑这些条目：

```
id  userId dateOrder  
1    138    2013-03-19  
2    138    2013-03-19
3    222    2013-03-19 
```

我想要一个 SQL 请求，它只选择至少完成 2 个订单的用户所下的订单。

对于此示例，SQL 应返回：

```
userId 138 
```

我尝试了 with `GROUP BY`， with `DISTINCT`，但这些都不起作用。你能帮我吗 ？谢谢 ！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:27:39.273

您应该能够使用`HAVING`子句来获得结果：

```
select userid
from orders
group by userid
having COUNT(*) >= 2
    and COUNT(*) <= 5 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/11595/1)

如果您想返回每个订单的所有详细信息，可以将查询扩展为：

```
select o1.id, o1.userid, o1.dateorder
from orders o1
where exists (select userid
              from orders o2
              where o1.userid = o2.userid
              group by userid
              having COUNT(*) >= 2
                  and COUNT(*) <= 5) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/11595/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T18:28:35.413

我认为这应该这样做......

```
Select * from orders where userid in
(
Select userid from orders
group by userid having count(1) between 2 and 5
) 
```

# jquery - How do I open a dialog from a jqplot pie chart using jqplotDataClick?

> ID：15507546
> 
> 赞同：0
> 
> 时间：2013-03-19T18:24:57.997
> 
> 标签：jquery, dialog, jqplot

I am trying to open a dialog window whenever a pie slice is clicked in JQPlot pie chart. I've tried many different ways to try and get this to work but no luck. I know it needs to be bound to the jqplotDataClick function but I can't get it work that way.

Here is my script for the chart:

```
 $(document).ready(function(){
      plot1 = $.jqplot('chart1', [[[2,1], [4,2], [6,3], [3,4]]], {
      seriesDefaults: {
        // Make this a pie chart.
        renderer: jQuery.jqplot.DonutRenderer,
        rendererOptions: {
          // Put data labels on the pie slices.
          // By default, labels show the percentage of the slice.
          showDataLabels: true
        }
      },
      legend: { show:false, location: 'e' },
      grid: {background:'transparent', borderColor: 'none', shadow: false} 
    }
  );

      plot1 = $.jqplot('chart2', [[[2,1,'medical.htm'], [4,2,'link1.html'], [6,3,'link1.html'], [3,4,'link1.html']]], {

      seriesDefaults: {
        // Make this a pie chart.
        renderer: jQuery.jqplot.DonutRenderer,
        rendererOptions: {
          // Put data labels on the pie slices.
          // By default, labels show the percentage of the slice.
          showDataLabels: true
        }
      },
      legend: { show:false, location: 'e' },
      grid: {background:'transparent', borderColor: 'none', shadow: false} 
    }
  );

      plot1 = $.jqplot('chart3', [[[2,1], [4,2], [6,3], [3,4]]], {

      seriesDefaults: {
        // Make this a pie chart.
        renderer: jQuery.jqplot.DonutRenderer,
        rendererOptions: {
          // Put data labels on the pie slices.
          // By default, labels show the percentage of the slice.
          showDataLabels: true
        }
      },
      legend: { show:false, location: 'e' },
      grid: {background:'transparent', borderColor: 'none', shadow: false} 
    }
  );

      plot1 = $.jqplot('chart4', [[[2,1], [4,2], [6,3], [3,4]]], {

      seriesDefaults: {
        // Make this a pie chart.
        renderer: jQuery.jqplot.DonutRenderer,
        rendererOptions: {
          // Put data labels on the pie slices.
          // By default, labels show the percentage of the slice.
          showDataLabels: true
        }
      },
      legend: { show:false, location: 'e' },
      grid: {background:'transparent', borderColor: 'none', shadow: false} 
    }
  );

         $('#chart1, #chart2, #chart3, #chart4').bind('jqplotDataHighlight', 
            function (ev, seriesIndex, pointIndex, data) {
                $('#info1').html('series: '+seriesIndex+', point: '+pointIndex+', data: '+data+ ', pageX: '+ev.pageX+', pageY: '+ev.pageY);
            }
        );    
        $('#chart1, #chart2, #chart3, #chart4').bind('jqplotDataClick', 
            function (ev, seriesIndex, pointIndex, data) {
                $("#medical1").html('series: '+seriesIndex+', point: '+pointIndex+', data: '+data);
                //alert();
                /* To open in a NEW window use: */
                /* window.open(data[2]); */
                /* To open in the same window use: */
                //window.location.href=neighbor.data[2];
            }
    );
        $('#chart1, #chart2, #chart3, #chart4').bind('jqplotDataUnhighlight', 
            function (ev) {
                $('#info1').html('Nothing');
            }
       );
    }); 
```

This is the dialog script. This dialog opens a window that is supposed to coincide with the pie chart slices. The premise is this - I have a pie chart that is made up of data submitted by the user by way of choosing options that appear in a dialog window. Once the pie chart is made up with this data, the user can then click on the pie chart and open a dialog window for each slice to change the options for that portion of the chart.

```
<script type="text/javascript">
    $(document).ready(function() {
        var $loading = $('<img src="img/loading.gif" alt="loading" class="loading">');
        $('#prod-dialog td a').each(function() {
            var $dialog = $('<div></div>')
                .append($loading.clone());
            var $link = $(this).one('click', function() {
                var $cnt = $(this).attr('href') + " #" + $(this).attr('id')
                $dialog
                    .load($cnt)
                    .dialog({
                        title: $link.attr('title'),
                        width: 300,
                        height: 200,
                        buttons: [
                        {
                            text: "Ok",
                            click: function() {
                                $( this ).dialog( "close" );
                            }
                        },
                        {
                        text: "Cancel",
                            click: function() {
                        $( this ).dialog( "close" );
                            }
                        }
                        ]
                    });

                $link.click(function() {
                    $dialog.dialog('open');
                    return false;
                });
                return false;
            });
        });
    }); 
```

This is part of the HTML for a category and button to open a dialog window - there are many more of these but way too much code to put up here.

```
<table id="prod-dialog">
            <tr>
              <td><div><img src="img/medical-icon.png" />
                <p>Medical</p>
                </div></td>
              <td><a href="medical.htm" title="Medical 1" id="medical1"><img src="img/dialog-icon_08.png"/></a></td>
              </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T20:12:04.053

如果您的绘图数据像这样增加（类似于您在问题中的方式）：

```
plot1 = $.jqplot('chart1', [[[2,1,'#medical1'], [4,2,'#medical1'], [6,3,'#medical1'], [3,4,'#medical1']]], { 
```

然后我们可以访问`jqplotDataClick`事件中的链接Id，进而触发它的点击事件。请注意，在上面的代码中，我每次都使用相同的链接 ID - 您显然需要为每个链接提供正确的 ID。

然后在这种情况`jqplotDataClick`下，可以像这样打开对话框：

```
$(data[2]).trigger('click'); 
```

使用链接 ID 很重要，因为我认为每个链接的点击事件都在使用`dialog`它在关闭时收到的对象。看起来这些对话框并没有添加到 DOM 中，因此您将无法通过它们的 Id 访问它们，因此触发每个链接的单击事件是可行的方法。

我认为对您来说棘手的部分是确保您的服务器端代码生成的数据包含需要单击的链接的 ID。

# jquery - Notification & WebViewBounce option not working - Phonegap

> ID：15507549
> 
> 赞同：0
> 
> 时间：2013-03-19T18:25:00.437
> 
> 标签：jquery, ios, cordova, mobile, jquery-mobile

I'm creating my app on Phonegap Build, at the current version (2.3.0) and I got two problems:

The notification and WebViewBounce (I'm trying to disable) do not work.

I tried to use on config.xml:

```
<preference name="webviewbounce" value="false"/>
<!-- Plugins -->
<plugins>
<plugin name="Notification" value="CDVNotification" />
</plugins> 
```

I have tried it on iOS 6.1.2 and was not successfull. Does anyone know how to get it working?

Thanks since now.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-18T13:00:12.590

PhoneGap 的配置文件（位于 www/config.xml 中）带有此首选项设置：

```
<preference name="webviewbounce" value="true" /> 
```

我以为你会设置为 false 来修复，但这不起作用。经过一番挖掘后，我发现您需要`DisallowOverscroll`为 iOS 设置为 true，`disallowOverscroll`为 Android 设置为 true。所以我的配置文件现在包含：

```
<preference name="webviewbounce" value="false" />
<preference name="DisallowOverscroll" value="true" />
<preference name="disallowOverscroll" value="true" /> 
```

涵盖所有可能发生的情况。

我还注意到我需要从我的视口元标记中删除 height=device-height 。所以在我之前：

```
<meta name="viewport" content="user-scalable=no, initial-scale=1, 
maximum-scale=1, minimum-scale=1, width=device-width, 
height=device-height, target-densitydpi=medium-dpi" /> 
```

我改为：

```
<meta name="viewport" content="user-scalable=no, initial-scale=1, 
maximum-scale=1, minimum-scale=1, width=device-width, 
target-densitydpi=medium-dpi" /> 
```

如果不这样做，我的 100% 高度会在其高度中包含状态栏（或通话状态栏稍高）。删除此值会完全删除滚动条。

`overflow: auto`然后，如果我需要滚动条，我会在我的应用程序中使用 div 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T11:27:14.737

尝试将：添加 `<script type="text/javascript" src="cordova.js"></script>`到您的 HTML 中。

# python - How to get the output of XMLRPC server (Python 2.7.3)?

> ID：15507552
> 
> 赞同：3
> 
> 时间：2013-03-19T18:25:05.967
> 
> 标签：python, xml-rpc, simplexmlrpcserver, xmlrpcclient

I got XMLRPC server/client from python website. When I run simple methods like pow(),add(),div() from Windows, the client gets the result correctly. However, when I run brocade() which gets the configuration information from Brocade switch using python modules(PyCrypto, Paramiko), and returns the string output as return value which takes a little like 2-3 seconds (it might take longer depending on the switch command). I observed that the server executes correctly and prints the output, but the client gets a message like below.

```
C:\CVS\Python\MyTestProject\src>python xmlrpcclient2.py
8
5
2
Traceback (most recent call last):
  File "xmlrpcclient2.py", line 8, in <module>
    print s.brocade('sh ver')
  File "c:\Python27\lib\xmlrpclib.py", line 1224, in __call__
    return self.__send(self.__name, args)
  File "c:\Python27\lib\xmlrpclib.py", line 1578, in __request
    verbose=self.__verbose
  File "c:\Python27\lib\xmlrpclib.py", line 1264, in request
    return self.single_request(host, handler, request_body, verbose)
  File "c:\Python27\lib\xmlrpclib.py", line 1297, in single_request
    return self.parse_response(response)
  File "c:\Python27\lib\xmlrpclib.py", line 1473, in parse_response
    return u.close()
  File "c:\Python27\lib\xmlrpclib.py", line 793, in close
    raise Fault(**self._stack[0])
xmlrpclib.Fault: <Fault 1: "<type 'exceptions.TypeError'>:cannot marshal None unless allow_none is enabled"> 
```

The server displays

```
T06CORE - - [19/Mar/2013 11:11:33] "POST /RPC2 HTTP/1.1" 200 -
T06CORE - - [19/Mar/2013 11:12:04] "POST /RPC2 HTTP/1.1" 200 -
T06CORE - - [19/Mar/2013 11:12:05] "POST /RPC2 HTTP/1.1" 200 -
T06CORE - - [19/Mar/2013 11:12:06] "POST /RPC2 HTTP/1.1" 200 -
All jobs enqueued.
Waiting for the queue to finish.

You have reached Brocade FCF195

   cmsh
gets you into the IOS-style management shell.
-----------------------------------------------------------------
broc150_jack:admin> switchshow | grep switchType
switchType:     76.7
broc150_jack:admin> cmsh
broc150_jack#sh ver
←[?1h←=←[K            Fabric Operating System Software
Fabric Operating System Version: 7.0
Copyright (c) 1995-2008 Brocade Communications Systems, Inc.
Build Time: 21:52:25 Oct 10, 2012
broc150_jack uptime: 12w4d19h
Firmware name: v7.0.2a

Switch Model Name: Brocade 8000
Control Processor: Freescale Semiconductor 8548E with 1016 MB of memory

4MB of boot flash memory.

  8 FC Port(s)
 24 Ten GigabitEthernet/IEEE 802.3 interface(s)
←[K            ←[?1l←&gt;broc150_jack#10.0.0.150 job is done.
Destroying queue...
Queue destroyed.
T06CORE - - [19/Mar/2013 11:12:08] "POST /RPC2 HTTP/1.1" 200 - 
```

Do you have any idea how the client can get the result of brocade()?

Thank you, Spark.

xmlrpcserver2.py

```
from SimpleXMLRPCServer import SimpleXMLRPCServer
from SimpleXMLRPCServer import SimpleXMLRPCRequestHandler

# Restrict to a particular path.
class RequestHandler(SimpleXMLRPCRequestHandler):
rpc_paths = ('/RPC2',)

# Create server
listening_port = 8002
server = SimpleXMLRPCServer(("localhost", listening_port),
                           requestHandler=RequestHandler)
print "Listening on port %d..." % listening_port
server.register_multicall_functions()                           
server.register_introspection_functions()

# Register pow() function; this will use the value of
# pow.__name__ as the name, which is just 'pow'.
server.register_function(pow)

# Register a function under a different name
def adder_function(x,y):
    return x + y
server.register_function(adder_function, 'add')

def brocade(str):
    import brocade
    return brocade.MySwitch().do_something_cool(str)
server.register_function(brocade, 'brocade')

# Register an instance; all the methods of the instance are
# published as XML-RPC methods (in this case, just 'div').
class MyFuncs:
    def div(self, x, y):
        return x // y
server.register_instance(MyFuncs())

# Run the server's main loop
server.serve_forever() 
```

xmlrpcclient2.py

```
import xmlrpclib

s = xmlrpclib.ServerProxy('http://localhost:8002')

print s.pow(2,3)  # Returns 2**3 = 8
print s.add(2,3)  # Returns 5
print s.div(5,2)  # Returns 5//2 = 2
print s.brocade('sh ver') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T19:56:07.693

XMLRPC 在技术上不允许空值，当您尝试序列化 a`None`时，它会正确地告诉您它不能。许多 xmlrpc 服务违反了这一细节，并以通常理解的方式发送它们。要在 python 中启用此行为，请在服务器代码或客户端中传递`allow_none=True`给构造函数。[`SimpleXMLRPCServer()`](http://docs.python.org/2/library/simplexmlrpcserver.html#SimpleXMLRPCServer.SimpleXMLRPCServer)[`ServerProxy()`](http://docs.python.org/2/library/xmlrpclib.html#xmlrpclib.ServerProxy)

```
server = SimpleXMLRPCServer(("localhost", listening_port),
                            requestHandler=RequestHandler,
                            allow_none=True) 
```

和

```
s = xmlrpclib.ServerProxy('http://localhost:8002', allow_none=True) 
```

# arrays - Matlab Multidimensional matrices: Most efficient way to perform addition on one of the dimensions

> ID：15507553
> 
> 赞同：0
> 
> 时间：2013-03-19T18:25:08.587
> 
> 标签：arrays, matlab, matrix

I have got a three-dimensional matrix

```
sigma = zeros(3, 3, 1000) 
```

and a single matrix

```
result = [0.5 0.5 0.5; 0.2 0.2 0.2; 0.1 0.1 0.1] 
```

My question would be: What is the most effective way to add my matrix 'result' to every single matrix along the third dimension of 'sigma'?

Currently I am looping over all 1000 matrices and add them one by one. Is there a Matlab-optimized way?

Thanks!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T18:28:19.983

Use [`bsxfun`](http://www.mathworks.com/help/matlab/ref/bsxfun.html):

```
bsxfun(@plus, sigma, result) 
```

It automatically replicates the smaller matrix along its singleton dimension to match the other matrix.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T18:43:21.000

sigma + repmat（结果，[1,1,1000]）

一般来说，传递函数的调用（尽管比循环更有效）在底层的优化不如只涉及本机代码的调用。

# scrapy - 如何直接访问 Scrapy httpcache 中间件数据

> ID：15507556
> 
> 赞同：0
> 
> 时间：2013-03-19T18:25:12.557
> 
> 标签：scrapy

我怎么能直接从scrapy访问httpcache中间件？

伪代码中的类似内容

```
URL = 'http://scrapedsite.com/category1/item1'
print retrieveRawHtml(URL) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T22:16:56.383

```
from scrapy.utils.response import open_in_browser
from scrapy.http import HtmlResponse
url = 'http://scrapedsite.com/category1/item1'
body = '<html>hello</html>'
response = HtmlResponse(url, body=body)
open_in_browser(response) 
```

或从您的回调中：

```
def parse_cb(self, response):
    from scrapy.utils.response import open_in_browser
    open_in_browser(response) 
```

如果打开缓存，它将从缓存中提取。

# css - 鼠标悬停时显示 div

> ID：15507560
> 
> 赞同：0
> 
> 时间：2013-03-19T18:25:22.863
> 
> 标签：css, html, hover, block

当鼠标悬停在主要区域（如 youtube 评论）上时，如何创建一个显示的链接。

我有这段代码 - 但是当鼠标悬停在 .showme 类上时，它不像 showhim 元素那样可见。

```
<div class="showhim">HOVER ME<div class="showme">hai</div></div>

.showme{ 
display: none;
}
.showhim:hover .showme{
display : block;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:29:52.027

也许您希望内部 div 在外部的流动中。在这种情况下使用

```
.showhim:hover .showme{
    display : inline-block;
} 
```

或者，如果您也想为内部 div 显示内部`:hover`div，请使用

```
showme{ 
    visibility: hidden;
}
.showhim:hover .showme{
    visibility: visible;
} 
```

`:hover`只有一件事：也许您使用 IE 6 进行了测试。来自 Redmond 的肮脏的不知道`<a/>`. 顺便说一句，他也不知道`display: inline-block`。

# django - 使用rest api的django应用程序-将代码放在哪里

> ID：15507577
> 
> 赞同：2
> 
> 时间：2013-03-19T18:26:28.547
> 
> 标签：django, boto

我有一个 django 应用程序，该模型存储用户通过 Web 界面输入的数据。

查看/保存模型实例时，我需要使用第三方 REST api。我知道该怎么做，但是我不确定这段代码应该与 django 应用程序一起放在哪里。

我的直觉是将这段代码放在模型类中，但是你也可以使用视图......我只是不确定。

以前是如何做到的，有很多帖子询问如何做到这一点，但没有一个说明放置代码的最佳位置。

任何指导将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T19:06:20.103

这是一个主观的问题，所以这里是一个主观的答案。

首先，确保与此外部 REST API 交互的任何代码都驻留在单独的模块中。例如，如果您从字典 API 中获取单词定义，那么与该 API 对话的所有代码理想情况下都应该位于一个单独的`dictionary`模块中，然后您可以将其导入到您的视图中。

其次，您`models.py`应该只声​​明您的应用程序的数据模型并定义此模型上的操作，其他的不多。他们不应该关心请求/响应周期、读取文件、渲染模板、进行 HTTP 调用或其他任何事情。按照这种逻辑，您应该从您的视图中进行这些 REST API 调用，并在需要时将返回的数据传递到您的模型中。

最后，请三思而后行从您的 Django 应用程序进行 REST 调用。Python 默认执行同步（阻塞）I/O，这意味着只要应用程序在等待 REST 调用完成，它就无法为任何传入的 HTTP 请求提供服务。如果您没有太多用户，这不是问题，但对于需要扩展的应用程序，请记住这一点。您可能想研究 Python 的异步 I/O 库。

# sql - 选择是否为空

> ID：15507579
> 
> 赞同：-3
> 
> 时间：2013-03-19T18:26:37.857
> 
> 标签：sql, sql-server, sql-server-2008, inner-join

我需要对两个表进行内部连接，但是，我想知道如何解决这种情况：

如果第二个表中的字段为 NULL，他会与另一个字段进行内部连接。

你可以给我一个例子吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T20:15:34.127

取决于您要达到的目标...

```
CREATE TABLE #X 
(
[Id] INT,
[Name] VARCHAR(100)
)
INSERT INTO #X VALUES
(1,'michaeljackson'),
(2,'jim'),
(3,'jill'),
(4,'j')

CREATE TABLE #Y 
(
[Id] INT,
[AlternateId] INT,
[Score] INT
)
INSERT INTO #Y VALUES
(1,1,10),
(2,2,20),
(3,3,30),
(4,4,40),
(NULL,2,50)

--will join all of the records in #x to the null record
SELECT *
FROM   #X x
       INNER JOIN #Y y
       ON 
       x.Id = COALESCE(y.Id,x.Id)

--will join just to the ID = 4 record
SELECT *
FROM   #X x
       INNER JOIN #Y y
       ON 
       x.Id = COALESCE(y.Id,4)

--redirect and let join use alternative field
SELECT *
FROM   #X x
       INNER JOIN #Y y
       ON 
       x.Id = COALESCE(y.Id,y.AlternateId)

--maybe you want to actually do a FULL OUTER JOIN!
SELECT  *
FROM    #X x
    FULL OUTER JOIN #Y y
    ON 
    x.Id = y.Id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T18:29:48.260

最容易将第二个表视为两个不相交的表，如下所示：

```
select *
from a
join (
    select NewKey = key1, * from b where b.key1 is null
  union all
    select NewKey = key2, * from b where b.key1 is not null
) b on b.NewKey = a.key 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T18:31:09.000

我相信以下内容应该可以充分发挥作用。

```
SELECT *
  FROM tblA a
    INNER JOIN tblB b ON (b.Col1 IS NOT NULL AND b.Col1 = a.Col1) OR (b.Col1 IS NULL AND b.Col2 = a.Col2) 
```

如果 b.Col1 不为 NULL，则它加入 Col1，否则如果它为 NULL，则它加入 Col2。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T18:51:32.767

试试这个：

```
 select * from a 
    inner join b on 
    (case when b.columntojoin is null then b.alternatecolumn else b.columntojoin end) 
    = a.columntojoin 
```

# jquery - 将 Cascade 函数绑定到尚未在 DOM 中的元素

> ID：15507580
> 
> 赞同：0
> 
> 时间：2013-03-19T18:26:47.500
> 
> 标签：jquery, asp.net-mvc, razor

如何将级联函数绑定到 DOM 中尚未包含的元素：

```
(function ($) {
    $.fn.cascade = function (options) {
        var defaults = {};
        var opts = $.extend(defaults, options);

     // REST OF THE CODE NOT IMPORTANT FOR THE QUESTION //

    };
})(jQuery); 
```

将被加载的 Partialview 将具有：

```
@Html.DisplayNameFor(m => m.PTDistrict_Id)
@Html.DropDownListFor(m => m.PTDistrict_Id, Model.PTDistrictList, HeelpResources.PTDistrictViewDropDownListFirstRecord, new { id = "districtDropdown" })
@Html.ValidationMessageFor(m => m.PTDistrict_Id) 
```

我试过这个但没有运气：

```
$(document).on("change", "#districtDropdown", function () {
    $.cascade({
        url: "/Address/ListCouncilByDistrict",
        paramName: "districtId",
        firstOption: 'Selecione o Concelho...',
        childSelect: $("#councilDropdown")
    });
}); 
```

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:28:18.197

像那样

```
$(document).on("change", "#districtDropdown", function () {
    $(this).cascade({
      ...
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:33:08.767

这样的事情可能适用于您的情况：

```
<select>
    <option class="event" data-action="Cascade" data-someParameter="fooBar">Foo</option>
</select>  
    <script>

    var Event = {
      Cascade: function(ele){
      //enter your actual cascade function.
         alert(ele.attr("data-someParameter")); //alerts "123"
      };
    };

    $(".event").on("click",function(){
       var ele = $(this);
       Event[ele.attr("data-action")](ele);
    });

    </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T18:29:23.400

你就是做不到。时期...

但是您可以使用[实时](http://api.jquery.com/live/)事件处理程序。正如它的描述所说：

> 为匹配当前选择器的所有元素附加一个事件处理程序，现在和**将来**。

# php - php服务设置错误

> ID：15507581
> 
> 赞同：1
> 
> 时间：2013-03-19T18:26:50.983
> 
> 标签：php, mysql, apache-flex, wampserver

当我尝试在 flex 中连接到 php 服务时，我遇到了这样的错误。（我正确地给出了 root、密码、数据库名称）

```
Warning: mysqli_connect() [<a href='function.mysqli-connect'>function.mysqli-connect</a>]: MySQL server has gone away in C:\wamp\www\harisample\services\SamplePhp.php on line 54 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:33:52.230

当您收到`MySQL server has gone away`错误时，这意味着正在发生以下情况之一：

1.  客户端无法向服务器发送问题。
2.  客户端在写入服务器时没有收到错误，但它没有得到问题的完整答案（或任何答案）。
3.  您尝试在关闭与服务器的连接后运行查询。这表明应用程序中存在需要纠正的逻辑错误。
4.  在不同主机上运行的客户端应用程序没有从该主机连接到 MySQL 服务器的必要权限。
5.  MYSQL_OPT_READ_TIMEOUT 或 MYSQL_OPT_WRITE_TIMEOUT 变量太低
6.  你在服务器端遇到了超时，客户端的自动重连被禁用（MYSQL结构中的重连标志等于0）。
7.  您正在使用 Windows 客户端，并且服务器在发出命令之前已断开连接（可能是因为 wait_timeout 已过期）。

解决这个问题可能很简单，但前提是您对服务器具有完全的 root 访问权限。

1.  您可以通过在启动 mysqld 时设置 wait_timeout 变量来更改时间限制。有关详细信息，请参阅[此链接](http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html)。
2.  如果您有脚本，您只需再次发出查询，客户端即可自动重新连接。这假设您在客户端启用了自动重新连接（这是 mysql 命令行客户端的默认设置）。

# javascript - Knockoutjs：从嵌套在视图模型中的数组中删除/添加元素

> ID：15507584
> 
> 赞同：0
> 
> 时间：2013-03-19T18:27:06.207
> 
> 标签：javascript, knockout.js

我想从嵌套在 ko.observable 对象中的数组中删除和添加一个元素。我正在使用 ko.mapping 实用程序将 json 数据映射到我的视图模型。在 json 数据中，我有一个数组，我想从中删除并添加一个元素。

add 和 remove 函数是从 HTML 绑定调用的。

请参阅我当前的代码以执行此操作。这一点都不优雅，我知道，这就是我寻求帮助的原因。我怎么看更聪明？

```
function BaseViewModel() {
    var self = this;

    self.newItem = null;
    self.selectedItem = ko.observable();

    self.getNewItem = function () {
        return self.newCleanItem(self.newItem);
    }

    self.read = function (search, callback) {
        self.baseService.read(search, callback);
    }

    self.readCallback = function (data) {
        if (self.newItem == null)
            self.newItem = data;
        self.selectedItem(data);
        showInputContainer();
    }

    self.addLog = function () {
        var item = new self.getNewItem();
        var newItem = item.tLogs[0];
        var currentSelectedItem = ko.mapping.toJS(self.selectedItem);
        currentSelectedItem.tLogs.push(newItem);
        self.selectedItem(currentSelectedItem);
        showInputContainer(activeTab);
    };

    self.removeLog = function (item) {
        var currentSelectedItem = ko.mapping.toJS(self.selectedItem);
        currentSelectedItem.tLogs.pop(item);
        vm.selectedItem(currentSelectedItem);
        showInputContainer();
    }

    self.newCleanItem = function (data) {
        for (var d in data) {
            if (Object.prototype.toString.call(data[d]) === '[object Array]') {
                var array = data[d];
                for (var item in array) {
                    if (framework.baseFunctions().isNumeric(item)) {
                        for (var i in array[item]) {
                            array[i] = "";
                        }
                    }
                }
                data[d] = array;
            }
            else {
                data[d] = "";
            }
        }

        return data;
    }
} 
```

我的 jsondata 看起来是这样的：

```
jsondata = {
    caseName: "test",
    caseDescription: "This is a test",
    tLogs: [
        {
            name: "log1",
            date: "2013-03-19"
        },
        {
            name: "log2",
            date: "2013-02-02"
        }
    ]
} 
```

# html - 将图像与基线对齐

> ID：15507587
> 
> 赞同：0
> 
> 时间：2013-03-19T18:27:09.560
> 
> 标签：html, css

我需要构建如下布局

```
+-------+-----------------------------+-------+
|       |                             |       |
|       |                             |       |
|   A   |             B               |   C   |
|       |                             |       |
|       |                             |       |
|       |                             |       |
+-------+-----------------------------+-------+ 
```

在区域中，AI 想放置一个应与右上角对齐的图像。在区域 BI 中想要放置一个应该居中的图像（垂直和水平） 在区域 CI 中想要放置一个应该在左下角对齐的图像

我有以下标记。

```
<div style="float: left;">
    <img src="/images/sx.jpg" alt="sx" height="100" width="90" />
</div>
<div class="slideshow" style="float: left;">
    [...]
</div>
<div style="float: right;">
    <img src="/images/dx.jpg" alt="dx" height="100" width="90" />
</div> 
```

我曾尝试使用 CSS `vertical-align`，但它不起作用。我怎样才能得到我想要的？感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:37:22.340

```
 <div style="float: left;">
    <img src="/images/sx.jpg" alt="sx" height="100" width="90" />
</div>
<div class="slideshow" style="padding:25% 50%; ">
    [...]
</div>
<div style="float: right; margin-top: -51.5%;">
    <img src="/images/dx.jpg" alt="dx" height="100" width="90" />
</div> 
```

而且，请不要问为什么 51.5% - 它工作得很好（在 Chrome 中检查），为什么 - 我不知道自己）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T18:40:18.537

在中心栏中水平和垂直对齐图像的最佳方法是使用背景图像。

```
background:url(yourimage.gif) no-repeat center center; 
```

我会使用绝对定位将图像放置在您的左右列上。

```
.leftcolumn { height:400px; width:100px; float:left; position:relative; border:1px solid blue; overflow:auto; }
.leftcolumn img { position:absolute; top:0px; right:0px; }
.rightcolumn { height:400px; width:100px; float:right; position:relative; border:1px solid red; overflow:auto; }
.rightcolumn img { position:absolute; bottom:0px; left:0px; } 
```

HTML 标记：

```
<div class="leftcolumn">
    <img src="/images/sx.jpg" alt="sx" height="100" width="90" />
</div>
<div class="slideshow" ></div>
<div class="rightcolumn">
    <img src="/images/dx.jpg" alt="dx" height="100" width="90" />
</div> 
```

[这是 .js 小提琴](http://jsfiddle.net/n5Qmz/3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T18:49:19.247

布局是否流畅？不同的高度？宽度不像高度那么难处理

A区：什么都不做，图片会在页面的正常流程中去那里

B区：
选项1）如果盒子是固定尺寸的：使用margin:100px auto 0；其中 100px 是与顶部的差
选项 2）如果盒子是流动的：使用绝对位置 + 负边距技术。对于此示例，图像的高度为 200 像素，宽度为 300 像素，因此上边距和左边距为 -0.5 * 这些尺寸

```
.slideshow { position:relative; }
.slideshow img { position:absolute; top:50%; left:50%; margin:-100px 0 0 -150px; } 
```

C区：

```
div.zoneC { position:relative; }
div.zoneC img { position:absolute; right:0; bottom:0; } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T18:49:56.200

使用的解决方案`table-row`，`table-cell`这将允许您使用`vertical-align`.

[显示属性 MDN](https://developer.mozilla.org/en-US/docs/CSS/display)。

**HTML**

```
<div class="area">
    <div style="width:250px;display:table-cell;text-align:right;">
        <img src="/images/sx.jpg" alt="sx" height="100" width="90" />
    </div>
    <div class="slideshow" style="display:table-cell;width:500px;vertical-align:middle;text-align:center;">[...]
    </div>
    <div style="display:table-cell;width:250px;vertical-align:bottom;text-align:left;">
        <img src="/images/dx.jpg" alt="dx" height="100" width="90" />
    </div>
</div> 
```

**CSS**

```
.area{
    height:600px; /* some fixed height */
    display:table-row;
 }

div{
    border: 1px solid red;
} 
```

[JSF](http://jsfiddle.net/n5Qmz/8/)中。

表格单元格宽度也是*固定*的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T18:35:31.497

您可以使用表格布局：

HTML：

```
<div class="wrapper">
    <div class="a">A section</div>
    <div class="b">B section</div>
    <div class="c">C section</div>
</div> 
```

CSS：

```
.wrapper {
    display: table;
    width: 100%;
}

.a,
.b,
.c {
    display: table-cell;
}

.a,
.c {
    width: [what you want];
} 
```

# gnuplot - Gnuplot 动态设置标题

> ID：15507589
> 
> 赞同：1
> 
> 时间：2013-03-19T18:27:11.533
> 
> 标签：gnuplot, ns-3

我正在尝试从 .dat 文件的最后一行设置我的 gnuplot 图表的标题，但我不确定该怎么做。

我的 .dat 文件内容如下：

```
Column1 Column2
1 0.5
2 1.5
3 2.5
4 3.5
5 4.5
6 5.5   
Average is ?????? 
```

有人知道使用最后一行的文本设置标题的命令吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:14:46.440

gnuplot 允许 shell 样式的反引号扩展。将它与 unix 实用程序结合起来`tail`应该可以正常工作：

```
set title "`tail -1 myfile.dat`"
plot 'myfile.dat' u 1:2 
```

# c# - 从文本框更改为组合框

> ID：15507604
> 
> 赞同：1
> 
> 时间：2013-03-19T18:27:51.313
> 
> 标签：c#, .net, wpf, xaml, mvvm

我有一个自定义样式应用于我的 WPF 页面中的文本框，但是我现在已将 TextBoxes 更改为可编辑的 ComboBoxes，并且需要应用样式以适应新的可编辑 ComboBoxes。这是当前代码：

```
<Style TargetType="ComboBox">
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="BorderBrush" Value="Silver"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="SnapsToDevicePixels" Value="True"/>
            <Setter Property="OverridesDefaultStyle" Value="True"/>
            <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
            <Setter Property="AllowDrop" Value="true"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type TextBoxBase}">
                        <Border Name="Border" Padding="1" Background="#FFFFFF" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" >
                            <ScrollViewer Margin="0" x:Name="PART_ContentHost"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="Border" Property="Background" Value="#EEEEEE"/>
                                <Setter TargetName="Border" Property="BorderBrush" Value="#EEEEEE"/>
                                <Setter Property="Foreground" Value="#888888"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style> 
```

以上是我设法改变的，但是我不确定还有什么需要改变的。可编辑的 ComboBox 本质上是一个带有下拉菜单的文本框，所以我认为它几乎保持不变。`TextBoxBase`似乎是最大的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T20:57:19.330

创建新的示例项目后，问题似乎是 Windows 8 的错误。

# javascript - 在 javascript 中访问子节点的子节点

> ID：15507605
> 
> 赞同：3
> 
> 时间：2013-03-19T18:27:51.377
> 
> 标签：javascript, html

如何在javascript中访问子节点的子节点？我需要定位每个 li 内部的 img 并获取它的宽度和高度。我想在不使用 jquery 的情况下做到这一点。只是纯JavaScript。

```
<ul id="imagesUL">
<li>
   <h3>title</h3>
   <img src="someURL" />
</li>
</ul>

var lis = document.getElementById("imagesUL").childNodes; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T18:38:47.033

理想的方法是使用该`querySelectorAll`功能，前提是您可以保证它可用（例如，如果您正在为移动浏览器设计网站）。

```
var imgs = document.querySelectorAll('#imagesUL li img'); 
```

但是，如果您不能保证，则必须自己执行循环：

```
var = lis = document.getElementById("imagesUL").childNodes,
      imgs = [],
      i, j;

for (i = 0; i < lis.length; i++) {
    for (j = 0; j < lis[i].childNodes.length; j++) {
        if (lis[i].childNodes[j].nodeName.toLowerCase() === 'img') {
            imgs.push(lis[i].childNodes[j]);
        }
    }
} 
```

上面的代码片段是使用像 jQuery 这样的库来保持理智的一个很好的论据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T18:38:20.893

这对我有用：

```
var children = document.getElementById('imagesUL').children;
var grandChildren = [];
for (var i = 0; i < children.length; i++)
{
    var child = children[i];
    for (var c = 0; c < child.children.length; c++)
        grandChildren.push(child.children[c]);
} 
```

`grandChildren`包含所有孩子的孩子。

像 jQuery 和 UnderscoreJS 这样的库使这更容易以更具声明性的方式编写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T18:31:33.640

您可以为`$()`函数提供第二个参数以指定搜索图像的范围：

```
var lis = $('#imagesUL').children();
var images = $('img', lis)
images.each(function() {
    var width = $(this).attr('width');
    // ...
}); 
```

# android - 使用 Robotium Solo 4.0 更改系统时钟

> ID：15507613
> 
> 赞同：1
> 
> 时间：2013-03-19T18:28:14.713
> 
> 标签：android, android-ui, robotium, android-testing

Robotium Solo 4.0 中是否有任何方法可以更改系统时钟时间？

我知道我可能会编写一些代码来打开设置应用程序，导航到时钟并更改时间，但如果 R​​obotium 内置了一些东西来做到这一点，那将非常有用。设置菜单因操作系统版本而异，因此编写一个在所有 Android 操作系统上正确执行此操作的方法需要大量工作。

我的应用程序中有一些日期选择器只允许您在工作时间选择日期，所以我需要假装我手机的系统时间在正常工作时间内，以便日期选择器允许我选择任何内容。

如果没有内置任何内容并且有人编写了自己的机器人脚本来导航到设置应用程序，我会很感激你分享你的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T07:44:59.463

有几个解决方案。

以编程方式你可以

仅仅因为您不能轻易更改电话时钟并不妨碍您能够轻松更改您认为的营业时间，这样您就可以将营业时间更改为基于当前时间，例如将其更改为允许或禁止当前时间范围，然后将其用作测试的基础。它并不完美，但即使您没有测试确切的时间范围，它也可以让您测试包含/排除的代码是否有效（尽管您应该能够正确测试以检查数据通常是正确的值，因此组合通过之前的测试，这可能会给您足够的保证。

或者...

您可以使用 PC 上的命令在非 root 手机上设置日期，但如何将其集成到测试中取决于您（您必须设置运行测试的日期、运行测试的日期等）。为此，请使用“adb shell date”命令（您可以在 stackoverflow 上搜索其用法）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:16:36.717

> 我可能会写一些代码来打开设置应用程序，导航到时钟并更改时间

你不能用机器人来做到这一点。Robotium（以及 Robotium 所基于的 Instrumentation）只能访问经过测试的应用程序。

老实说，没有生根设备就无法以编程方式更改系统时钟。如何在有根设备上更改它，你可以在这里找到：[设置ROOTED手机的系统时间](https://stackoverflow.com/questions/8739074/setting-system-time-of-rooted-phone)

# javascript - 如何在javascript中从mysql中检索用户列表

> ID：15507614
> 
> 赞同：0
> 
> 时间：2013-03-19T18:28:14.780
> 
> 标签：javascript, mysql

嗨，我正在向网页上的表单添加动态验证，以停止不必要的页面重新加载。该表格用于注册帐户，我希望能够检查用户选择的用户名是否已被使用，但是据我所知，我只能从 php.ini 中的 mysql 检索数据。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:29:59.967

当注册页面加载时，使用 PHP 将现有用户列表加载到数组中，然后使用该数组进行 Javascript 验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:35:22.647

你可以使用ajax。这是 php 中的函数：

```
function check_registration() {
            if ($_POST['val']) {
                $query = "select user from member where user = '" . $_POST['val'] . "'";
                $row = $this->countRow($query);
                if ($row > 0) {
                    echo "user has been taken";
                }
            }
        } 
```

这是你可以放入html的ajax

```
<script>
            $(document).ready(function(){

                $('#input1').keyup(function(){
                    var values = $('#input1').val();
                    var dataString = 'val='+ values;

                    $.ajax
                    ({
                        type: "POST",
                        url: "http://localhost/authentication/check",
                        data: dataString,
                        cache: false,
                        success: function(html)
                        {
                            $("#error1").html(html);
                        } 
                    });
                });
            });
        </script> 
```

# tsql - Union all - 3 tables, 2 will never contain duplicates, the other will

> ID：15507617
> 
> 赞同：2
> 
> 时间：2013-03-19T18:28:24.443
> 
> 标签：tsql, sql-server-2005, union, union-all

I know the union all questions gets asked a lot, but I have a slight variation. I will be doing a union all on three different queries/tablesets. The first 2, by definition of their queries, will never have duplicates, but the third will definitely have duplicates.

My question is, does the order I do my union/union alls matter. For instance, should I do a UNION ALL on my first 2 tables that won't have duplicates (and never ever will) and then do a UNION to the third table since it will have duplicates? Or is the order better if its reversed? Or does it not matter?

Not a real pressing matter, just wondering if there was a best practice in this type of scenario.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T18:35:12.497

UNION ALL 返回所有行，不进行额外处理。一个简单的 UNION 对整个行集进行排序以消除重复。虽然优化器可能能够通过研究索引和约束来解决所有问题，但您总是可以像这样帮助它：

```
 select * from table1
union all
  select * from table2
union all
  select *
  from (
    SELECT DISTINCT * from table3
  ) T 
```

这确保了排序和消除重复项仅在 table3 上执行。

任何时候意图都可以简单而清晰地传达给人类用户和编译器，这几乎可以肯定是编写代码的正确方法。在这种情况下，性能也可以提高，而不能降低。

# xcode - My XCode workspace doesn't remember added projects when restarted

> ID：15507624
> 
> 赞同：3
> 
> 时间：2013-03-19T18:29:11.170
> 
> 标签：xcode, macos, project

I've added Google's GTL project to my project's workspace. It works fine, but every time I open XCode it disappears and I have to add it again. Why can't it remember this project? Is there a cache file or derived data I need to delete and rebuild?

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-21T22:19:42.220

确保您打开的是 .xcworkspace，而不是 .xcodeproj。

当您第一次添加额外项目以创建工作区时，XCode 会要求您保存一个 .xcworkspace 文件。这是您必须打开的文件。

# php - How to make an element of an array bold in fpdf?

> ID：15507628
> 
> 赞同：3
> 
> 时间：2013-03-19T18:29:20.100
> 
> 标签：php, fpdf

I am using fpdf I want to make an element of an array look bold.

```
$cell3[8][0] = 'Improved Yield : Farmer Business School Training'; 
```

After Assigning all those values I will print them in pdf document

```
$pdf->FancyTable_2c($head3,$cell3);
$pdf->Cell(8,5,'',0,1); 
```

How to do this?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-22T11:09:38.537

您需要设置所需的字体，然后添加单元格，然后将样式改回：

```
//declare a style
$pdf->SetFont('Arial', '', 10);
$pdf->Cell(20,10,"This will be regular Arial");

//declare another style, overwrites previous one
$pdf->SetFont('Arial', 'B', 10);
$pdf->Cell(20,10,"This will be Arial Bold");

//set it back to normal
$pdf->SetFont('Arial', '', 10);
$pdf->Cell(20,10,"This will be regular Arial once more") 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T18:32:54.433

使用[`SetFont`](http://www.fpdf.org/en/doc/setfont.htm). 该`style`参数是您正在寻找的。

# android - 在没有按钮的android中使用viewflipper翻转图像

> ID：15507633
> 
> 赞同：1
> 
> 时间：2013-03-19T18:29:25.510
> 
> 标签：android, viewflipper

我正在使用以下翻转图像的方法：[How to set dymanic images to ViewFlipper in android?](https://stackoverflow.com/questions/8908862/how-to-set-dymanic-images-to-viewflipper-in-android)

我不想使用按钮翻转。当用户触摸图像或滑动图像时，我想翻转到下一张图像。有没有办法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:40:41.360

您可以使用 ViewPager。请参阅以下链接：

[在 Android 中使用 ViewPager 和 FragmentPagerAdapter 实现水平视图滑动](http://wptrafficanalyzer.in/blog/implementing-horizontal-view-swiping-using-viewpager-and-fragmentpageradapter-in-android/)

[使用 ViewPager 滑动水平视图，更新](http://android-developers.blogspot.com/2011/08/horizontal-view-swiping-with-viewpager.html)

[Android Viewpager 作为图片幻灯片库（Swipe Gallery）](http://manishkpr.webheavens.com/android-viewpager-as-image-slide-gallery-swipe-gallery/)

还有这个图书馆

[支持库](http://developer.android.com/tools/extras/support-library.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-05T21:20:50.467

这可能会有所帮助..... animator 是 res 中的一个文件夹，而 s_out_ ***是一个带有翻译的 xml 文件

公共布尔 onTouchEvent（MotionEvent 触摸事件）{

```
 switch (touchevent.getAction()) {
    case MotionEvent.ACTION_DOWN: {
        lastX = touchevent.getX();
        break;
    }
    case MotionEvent.ACTION_UP: {
        float currentX = touchevent.getX();

        if (lastX < currentX) {
            if (viewFlipper.getDisplayedChild() == 0)
                break;

            viewFlipper.setInAnimation(this, R.animator.s_in_fleft);
            viewFlipper.setOutAnimation(this, R.animator.s_out_right);
            viewFlipper.showNext();
        }

        if (lastX > currentX) {
            if (viewFlipper.getDisplayedChild() == 1)
                break;

            viewFlipper.setInAnimation(this, R.animator.s_in_fright);
            viewFlipper.setOutAnimation(this, R.animator.s_out_left);
            viewFlipper.showPrevious();
        }
        break;
    }
}
    return false; 
```

}

# session - 使用 Cookie 与会话进行登录

> ID：15507635
> 
> 赞同：2
> 
> 时间：2013-03-19T18:29:31.283
> 
> 标签：session, cookies, login

我正在从一本书中构建一个基本的登录脚本，该脚本使用会话来管理用户是否登录。

这很好，但是当我关闭浏览器然后重新打开它时，我必须重新登录。而以 Facebook 为例，即使我关闭了浏览器，我仍然保持登录状态。我猜这是使用cookies完成的。使用 cookie 安全吗？这个饼干应该持续多久？有时网站会明确表示“请记住在访问结束时退出”。为什么这是必要的？

目前我的脚本有点像这样：

```
session_start();

if (is_set($_POST["login_button_pressed"])){
     if (form_verified_successfully()){
          $user_details = get_user_details_from_database();
          $_SESSION['username'] = $user_details['username'];
     }
} 
```

修改上述内容以使用 cookie 会很容易吗？如果是这样，怎么办？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T18:41:11.947

A`cookie`是一个小文本文件，保存在用户硬盘上的临时目录中。放置它的浏览器可以访问此 cookie。它可以保存数据，例如以前访问过的 URL（用户阅读与未阅读的帖子）、用户的凭据甚至用户购物车的内容或他们在论坛中未完成的帖子。您将选择 cookie 对该系统的有效期，我见过的最常见的是 24 小时、7 天、14 天和 30 天。

A`session`附加到与 Web 服务器交互的实际软件，即浏览器、命令提示符或其他应用程序。一旦浏览器关闭或应用程序关闭，会话数据将丢失。

您可能希望用户再次登录的原因，您已授予访问权限的数据是非常私密的信息，15 分钟后抓取计算机的另一个用户不应访问（银行、帐户设置）或您提供的数据对用户是时间敏感的，您希望强制用户再次登录并在他们回来时获得新数据。

大多数社交网站，如 Facebook、LinkedIn、Google+、Twitter 和其他几个论坛和博客都会给你一个 cookie，让你保持登录状态长达一个月或更长时间，这样你就可以轻松地返回并浏览网站并发布到你的个人资料。但是，如果您更改帐户设置，他们会提示您再次登录，并且只会让您在当前会话期间访问网站的这些部分。这是出于安全原因。

我希望这会有所帮助。如需快速参考，请在 上运行 Google 搜索`sessions vs cookies`。您应该能够找到与您使用的任何语言/平台相关的文章。有很多关于 PHP、Java、.net 和其他讨论优点、缺点和最佳实践的文章。

**更改为 cookie：** 至于您的最后一个问题，更改为使用 cookie 应该不难。很可能它将通过`_COOKIE`而不是引用`_SESSION`，但您必须告诉 cookie 保留哪些信息以及保持活动多长时间。一个快速的谷歌搜索`setting cookie [language]`应该提供大量的教程。替换`[language]`为 PHP、Java、Spring、.net 等。

# javascript - jQuery.ajax 的高分：如何初始化/范围问题

> ID：15507637
> 
> 赞同：0
> 
> 时间：2013-03-19T18:29:32.703
> 
> 标签：javascript, highcharts

我是一个关于 JS 的新手，所以这可能是一个愚蠢的问题......

我尝试做一个高分主/详细图表（参见示例[http://jsfiddle.net/VhqaQ/](http://jsfiddle.net/VhqaQ/)）。`data`数组应该填充一个 jQuery.ajax 调用：

```
$(function () {

    var masterChart,
        detailChart,
        data=[],
        chatter=[],
        indizies=[];

    $(document).ready(function() {

        $.ajax({
            url: 'index.php',
            data: 'type=1363435001',
            dataType: 'json',
            success: function(json) {
                data = json.range;
                scatter =  json.scatter;
                indizies = json.indizies;

            },
            error: function (xhr, status, error) {
               alert('Status: ' + status +' Error: ' + error);
            }
        });

        // create the master chart
        function createMaster() {
            masterChart = new Highcharts.Chart({

            .......
                series: [{
                    type: 'columnrange',
                    name: 'Intervall',
                    pointInterval: 1,
                    pointStart: 0,
                    data: data
                }],
            });
        }

            ........

        createMaster();
   });
}); 
```

但像这样，图表保持空白。这是`data`阵列的范围问题吗？或者调用`data`时还没有初始化？`new Highcharts.Chart( ...)`

我测试了 ajax 部分 - 数据已正确填充。所以这不是问题...

也许我应该把ajax调用放在别的地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:31:41.230

在 $.ajax 调用的回调中调用 createMaster() 并将数据传递给它。您当前假设在初始化 ajax 调用时已返回数据，但很可能并非如此。将函数调用放在回调内部，确保您的数据存在。

```
$.ajax({
    url: 'index.php',
    data: 'type=1363435001',
    dataType: 'json',
    success: function(json) {
        data = json.range;
        scatter =  json.scatter;
        indizies = json.indizies;

        createMaster(data);
    },
    error: function (xhr, status, error) {
        alert('Status: ' + status +' Error: ' + error);
    }
});

// create the master chart
    function createMaster(data) {
        masterChart = new Highcharts.Chart({

        .......
            series: [{
                type: 'columnrange',
                name: 'Intervall',
                pointInterval: 1,
                pointStart: 0,
                data: data
            }],
        });
    } 
```

# c# - Task.Factory.StartNew 依赖父线程？

> ID：15507638
> 
> 赞同：0
> 
> 时间：2013-03-19T18:29:35.183
> 
> 标签：c#, multithreading, task, taskfactory

我在 WCF 服务库的方法中运行这个线程。

下面的代码在方法结束时执行。我这样做是因为我不希望用户等待不影响从 WCF 到客户端的输出的后台进程完成。

我现在遇到的问题是，如果我执行该线程并且客户端得到响应，则父线程被杀死；也杀死这个线程。我如何使父线程等待该线程完成，同时执行其余操作？

```
 class Program
{
    static void Main(string[] args)
    {
        Dictionary<string, string> sampleDict = getPopulatedDictionary();
        var result = run(sampleDict);
    }

    public static int run(Dictionary<string, string> sampleDict_)
    {

        PerformCalculations(sampleDict_);
        if (sampleDict_.Keys.Count > 10)
        {
            System.Threading.Tasks.Task.Factory.StartNew(() =>
            {
                backgroundprocess(sampleDict_);
            });
        }
        //after returning i still want it to run
        return sampleDict_.Keys.Count;
    }

    private static void backgroundprocess(Dictionary<string,string> dict)
    {
        foreach (var k in dict.Keys)
        {
            dict[k] = new Random().Next(2666).ToString();
        }
    }
} 
```

简而言之，我希望此方法启动该线程并继续返回值 X，但仍等待该线程在它返回值后完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:38:17.947

如果您除了等待后台线程完成之外什么都不做，那么您最好不要一开始就创建新的后台线程并在线执行代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T20:35:18.793

你不能把它作为父任务的延续。所以执行

`FameMappingEntry.SaveFameDBMap(toSaveIdentifiers);`作为成功完成父任务的延续。然后你可以等待继续。

```
var childTask = parentTask.ContinueWith((pt) =>
{
   FameMappingEntry.SaveFameDBMap(toSaveIdentifiers);
}, TaskContinuationOptions.OnlyOnRanToCompletion); 
```

然后您可以决定是要等待子任务还是使用另一个延续。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T18:36:26.717

试试这个：

```
var task = System.Threading.Tasks.Task.Factory.StartNew(() =>
{
  lock (toSaveIdentifiers)
  {
      FameMappingEntry.SaveFameDBMap(toSaveIdentifiers);
  }
);

int x = dosomething();

task.Wait();
return x; 
```

您还应该将对象锁定在使用它们的线程中，而不是其他一些随机线程。

# java - 如何使 JTextfield 居中

> ID：15507639
> 
> 赞同：6
> 
> 时间：2013-03-19T18:29:35.227
> 
> 标签：java, swing, awt, jtextfield, layout-manager

我在我的程序中将 JTexfield 居中时遇到问题。Textfield 没有与 JButton 对齐。我试过使用 x.setHoriontalAlignment(JTextfield.CENTER); 但无济于事。有任何想法吗？

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.BoxLayout;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JTextField;
import javax.swing.JPanel;
import java.awt.Container;
import java.awt.GridLayout;
import java.awt.GridBagLayout;

public class WidgetProject implements ActionListener
{
 //class constants
private static final Color BUTTON_COLOUR1 = Color.WHITE;
private static final int BUTTON_HEIGHT = 75;
private static final int BUTTON_WIDTH = 400;
private static final int TEXTFIELD_HEIGHT = 400;
private static final int TEXTFIELD_WIDTH = 50;
private static final String SECONDS_PER_MINUTE = "Seconds to Minutes or Minutes to Seconds";
private static final String BUTTON2_MODIFIED_LABEL = "yes";
private static final String POUNDS_PER_KILOGRAM = "Pounds to Kilograms or Kilograms to Pounds";
private static final String CHANGE_MY_LABEL = "1";
private static final int HEIGHT = 400;
private static final int WIDTH = 400;

// instance fields
 private JButton button1;
private JButton button2;
private JButton button3;
private JButton button4;
private JFrame frame;
private JTextField textInput;
private JPanel panel;

/**
 * A free-standing frame with two buttons.
 * 
 * @param title the title of this frame
 */
public WidgetProject(String title)
{
    // Establish the frame.
    frame = new JFrame(title);
    frame.setLayout(new BoxLayout(frame.getContentPane(), BoxLayout.Y_AXIS));
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setPreferredSize(new Dimension(WIDTH, HEIGHT));

    // Establish button dimensions.
    Dimension buttonDimension = new Dimension(BUTTON_WIDTH, BUTTON_HEIGHT);

    // Establish Textfield dimensions.
    Dimension textDimension = new Dimension(TEXTFIELD_HEIGHT, TEXTFIELD_WIDTH);

    // Create and add the first button.
    button1 = new JButton(SECONDS_PER_MINUTE);
    button1.setActionCommand(CHANGE_MY_LABEL);
    button1.addActionListener(this);
    button1.setPreferredSize(buttonDimension);
    button1.setMinimumSize(buttonDimension);
    button1.setMaximumSize(buttonDimension);
    button1.setBackground(BUTTON_COLOUR1);
    frame.add(button1);

     // Create and add the second button.
    button2 = new JButton(POUNDS_PER_KILOGRAM);
    button2.setActionCommand(CHANGE_MY_LABEL);
    button2.addActionListener(this);
    button2.setPreferredSize(buttonDimension);
    button2.setMinimumSize(buttonDimension);
    button2.setMaximumSize(buttonDimension);
    button2.setBackground(BUTTON_COLOUR1);
    frame.add(button2);

    // Create an input text field.
    textInput = new JTextField(20);
    textInput.setPreferredSize(textDimension);
    textInput.setMinimumSize(textDimension);
    textInput.setMaximumSize(textDimension);
    textInput.setHorizontalAlignment(JTextField.CENTER);
    panel = new JPanel();
    panel.add(textInput);
    String string = textInput.getText();

    // Display the frame and text field.
    frame.pack();
    frame.setLocationRelativeTo(null);
    frame.setVisible(true);
    frame.add(textInput); 
```

} // 构造函数 ButtonDuo 结束

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T19:06:18.457

第一：`x.setHorizontalAlignment(JTextField.CENTER);`将文本设置在中心而不是 JTextField

如果您想在中心创建 JTextField，只需创建`panel = new JPanel();`并在其上添加按钮，如下所示：`panel.add(button1);`

`panel.add(button2);`

`panel.add(textInput, BorderLayout.CENTER);`---> 这里我设置`textInput`在 jpanel 的中心

然后：将“Jpanel”添加到 Jframe：`frame.add(panel);`

尝试这个 ：

```
package javaapplication1;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.BoxLayout;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JTextField;
import javax.swing.JPanel;

class WidgetProject implements ActionListener {
    //class constants

    private static final Color BUTTON_COLOUR1 = Color.WHITE;
    private static final int BUTTON_HEIGHT = 75;
    private static final int BUTTON_WIDTH = 400;
    private static final int TEXTFIELD_HEIGHT = 400;
    private static final int TEXTFIELD_WIDTH = 50;
    private static final String SECONDS_PER_MINUTE = "Seconds to Minutes or Minutes to Seconds";
    private static final String BUTTON2_MODIFIED_LABEL = "yes";
    private static final String POUNDS_PER_KILOGRAM = "Pounds to Kilograms or Kilograms to Pounds";
    private static final String CHANGE_MY_LABEL = "1";
    private static final int HEIGHT = 400;
    private static final int WIDTH = 400;
// instance fields
    private JButton button1;
    private JButton button2;
    private JButton button3;
    private JButton button4;
    private JFrame frame;
    private JTextField textInput;
    private JPanel panel;

    /**
     * A free-standing frame with two buttons.
     * 
     * @param title the title of this frame
     */
    public WidgetProject(String title) {
        // Establish the frame.
        frame = new JFrame(title);
        panel = new JPanel();
        frame.setLayout(new BoxLayout(frame.getContentPane(), BoxLayout.Y_AXIS));
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setPreferredSize(new Dimension(WIDTH, HEIGHT));

        // Establish button dimensions.
        Dimension buttonDimension = new Dimension(BUTTON_WIDTH, BUTTON_HEIGHT);

        // Establish Textfield dimensions.
        Dimension textDimension = new Dimension(TEXTFIELD_HEIGHT, TEXTFIELD_WIDTH);

        // Create and add the first button.
        button1 = new JButton(SECONDS_PER_MINUTE);
        button1.setActionCommand(CHANGE_MY_LABEL);
        button1.addActionListener(this);
        button1.setPreferredSize(buttonDimension);
        button1.setMinimumSize(buttonDimension);
        button1.setMaximumSize(buttonDimension);
        button1.setBackground(BUTTON_COLOUR1);
        panel.add(button1);

        // Create and add the second button.
        button2 = new JButton(POUNDS_PER_KILOGRAM);
        button2.setActionCommand(CHANGE_MY_LABEL);
        button2.addActionListener(this);
        button2.setPreferredSize(buttonDimension);
        button2.setMinimumSize(buttonDimension);
        button2.setMaximumSize(buttonDimension);
        button2.setBackground(BUTTON_COLOUR1);
        panel.add(button2);

        // Create an input text field.
        textInput = new JTextField(20);
        textInput.setPreferredSize(textDimension);
        textInput.setMinimumSize(textDimension);
        textInput.setMaximumSize(textDimension);
        textInput.setHorizontalAlignment(JTextField.CENTER);

        panel.add(textInput, BorderLayout.CENTER);
        String string = textInput.getText();

        frame.add(panel);
        // Display the frame and text field.
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    } // end of constructor ButtonDuo

    @Override
    public void actionPerformed(ActionEvent e) {
        throw new UnsupportedOperationException("Not supported yet.");
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T18:42:52.137

```
 import javax.swing.*;
import java.awt.*;

public class JTableComponent{
  public static void main(String[] args) 
{
  new JTableComponent();
  }

  public JTableComponent(){
  JFrame // Establish the frame.
  frame = new JFrame("title");
  frame.setLayout(new BoxLayout(frame.getContentPane(), BoxLayout.Y_AXIS));
  frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
  frame.setPreferredSize(new Dimension(700, 700));

  // Establish button dimensions.
  Dimension buttonDimension = new Dimension(120, 120);

  // Establish Textfield dimensions.
  Dimension textDimension = new Dimension(110, 110);

  // Create an input text field.
  JTextField textInput = new JTextField(20);
  textInput.setPreferredSize(textDimension);
  textInput.setMinimumSize(textDimension);
  textInput.setMaximumSize(textDimension);
  textInput.setHorizontalAlignment(JTextField.CENTER);
  JPanel  panel = new JPanel();
  panel.add(textInput);
  String string = textInput.getText();

  // Display the frame and text field.
  frame.pack();
  frame.setLocationRelativeTo(null);
  frame.setVisible(true);
  frame.add(textInput);
  }
} 
```

我已经检查了你的代码。它已经在中间了..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-30T01:01:37.237

只需使用`setBounds`属性。

```
Jtextfield.setBounds(x,x,x,x); 
```

第一个 x`TextField`向左或向右移动。第二个向上或向下移动它。第三个是宽度，最后一个是长度。

# java - Netbeans Clean And Build Jar 文件在 Win XP 上返回“找不到主类”

> ID：15507640
> 
> 赞同：1
> 
> 时间：2013-03-19T18:29:36.900
> 
> 标签：java, netbeans, jar, classpath

我编写了一个小型 Java 应用程序并使用 Netbeans 制作了一个 jar 文件，它在我的 Windows 7 电脑上运行良好，但在 Win XP 上却无法运行。它返回“找不到主类”错误。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:32:14.103

使用运行你的主类`java -classpath . your_main_class_name`，或者在 Windows XP 中使用 NetBeans 重新构建和运行您的应用程序，jar 文件中的清单文件可能具有适用于 Windows XP 的有效类路径

# python - Scrapy 嵌套数组

> ID：15507651
> 
> 赞同：6
> 
> 时间：2013-03-19T18:30:08.663
> 
> 标签：python, json, web-scraping, scrapy, nested

我是scrapy的新手，想了解如何抓取对象以输出到嵌套的JSON中。现在，我正在生成看起来像

```
[
{'a' : 1, 
'b' : '2',
'c' : 3},
] 
```

我更喜欢这样：

```
[
{ 'a' : '1',
'_junk' : [
     'b' : 2,
     'c' : 3]},
] 
```

---我将一些东西放在`_junk`子字段中以便稍后进行后期处理。

我的解析器定义文件下的当前代码`scrapername.py`是...

```
item['a'] = x
item['b'] = y
item['c'] = z 
```

它看起来像

```
item['a'] = x
item['_junk']['b'] = y
item['_junk']['c'] = z 
```

---可能会解决这个问题，但我收到关于`_junk`密钥的错误：

```
 File "/usr/local/lib/python2.7/dist-packages/scrapy/item.py", line 49, in __getitem__
    return self._values[key]
exceptions.KeyError: '_junk' 
```

这是否意味着我需要以`items.py`某种方式改变我的？目前我有：

```
class Website(Item):
    a = Field()
    _junk = Field()
    b = Field()
    c = Field() 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T18:38:04.740

在将项目存储在其中之前，您需要创建垃圾字典。

```
item['a'] = x
item['_junk'] = {}
item['_junk']['b'] = y
item['_junk']['c'] = z 
```

# asp.net - 自定义 GridView 服务器控件 DataBind 导致重复控件 ID 的错误

> ID：15507653
> 
> 赞同：1
> 
> 时间：2013-03-19T18:30:32.703
> 
> 标签：asp.net, c#-4.0, custom-server-controls

好的。我长期以来一直将此站点用作参考，但现在我遇到了自己的问题。

我正在创建一个继承自 System.Web.UI.WebControls.GridView 类的自定义服务器控件。它的目的只是显示具有非常明确的格式的网格。它可以很好地绑定和加载数据，但尝试激活任何分页都会引发异常，提示“找到具有相同 ID 'lblHdrText_2' 的多个控件。FindControl 要求控件具有唯一 ID。”。

我可以将事件扔给用户并让他们进行分页，但目标之一是让该控件能够处理自己的分页，就像 GridView 控件已经做的那样。

我在排序和更改页面大小时也遇到了同样的问题。基本上任何时候我在控件中调用“DataBind”之后它已经被渲染。

以下是处理这些事件的代码：

```
 protected void OnFirstPageClicked(EventArgs e)
    {
        if (this.FirstPageClicked != null)
            this.FirstPageClicked.Invoke(this, e);

        GridViewPageEventArgs pgea = new GridViewPageEventArgs(0);
        this.OnPageIndexChanging(pgea);
        if (pgea.Cancel)
            return;

        this.PageIndex = 0;
        this.RefreshData();

        this.OnPageIndexChanged(e);
    }
    protected void OnLastPageClicked(EventArgs e)
    {
        if (this.LastPageClicked != null)
            this.LastPageClicked.Invoke(this, e);

        GridViewPageEventArgs pgea = new GridViewPageEventArgs(this.PageCount - 1);
        this.OnPageIndexChanging(pgea);
        if (pgea.Cancel)
            return;

        this.PageIndex = this.PageCount - 1;
        this.RefreshData();

        this.OnPageIndexChanged(e);
    }
    protected void OnPreviousPageClicked(EventArgs e)
    {
        if (this.PageIndex > 0)
        {
            if (this.PreviousPageClicked != null)
                this.PreviousPageClicked.Invoke(this, e);

            GridViewPageEventArgs pgea = new GridViewPageEventArgs(this.PageIndex++);
            this.OnPageIndexChanging(pgea);
            if (pgea.Cancel)
                return;

            this.PageIndex--;
            this.RefreshData();

            this.OnPageIndexChanged(e);
        }
    }
    protected void OnNextPageClicked(EventArgs e)
    {
        if (this.PageIndex < this.PageCount - 1)
        {

            if (this.NextPageClicked != null)
                this.NextPageClicked.Invoke(this, e);

            GridViewPageEventArgs pgea = new GridViewPageEventArgs(this.PageIndex++);
            this.OnPageIndexChanging(pgea);
            if (pgea.Cancel)
                return;

            this.PageIndex++;
            this.RefreshData();

            this.OnPageIndexChanged(e);
        }
    }
    protected void OnPageSizeChanged(EventArgs e)
    {
        this.RefreshData();
        if (this.PageSizeChanged != null)
            this.PageSizeChanged.Invoke(this, e);
    }
    protected override void OnDataBound(EventArgs e)
    {
        base.OnDataBound(e);
    }
    private void RefreshData()
    {
        this.DataBind();
    }
    private void imgPg_OnCommand(object sender, CommandEventArgs e)
    {
        switch (e.CommandName)
        {
            case "FirstPage":
                this.OnFirstPageClicked(EventArgs.Empty);
                break;
            case "LastPage":
                this.OnLastPageClicked(EventArgs.Empty);
                break;
            case "PrevPage":
                this.OnPreviousPageClicked(EventArgs.Empty);
                break;
            case "NextPage":
                this.OnNextPageClicked(EventArgs.Empty);
                break;
        }
    }
    private void drpPageSz_SelectedIndexChanged(object sender, EventArgs e)
    {
        DropDownList drpPgSz = (sender as DropDownList);

        if (drpPgSz != null)
        {
            this.PageSize = int.Parse(drpPgSz.SelectedValue);
            this.OnPageSizeChanged(e);
        }
        else
            throw new Exception("Unable to determine page size: cannot cast sender as DropDownList.");
    } 
```

实际的事件处理程序位于底部。“RefreshData”方法就在那里，因为我在调用“DataBind”之前尝试了不同的方法来清除网格中的控件。到目前为止，我尝试过的所有操作都导致整个网格在回发后没有呈现。

我在 Render 和 CreateChildControls 上做了很多工作，但标头生成本身完全是 System.Web.UI.WebControls.GridView 控件的内部。这是我的渲染代码，如果它有帮助的话：

```
 protected override void OnPreRender(EventArgs e)
    {
        Control link = this.Page.Header.FindControl("CustomGridViewCss");
        if (link == null)
        {
            System.Web.UI.HtmlControls.HtmlLink newLink = new System.Web.UI.HtmlControls.HtmlLink();
            newLink.ID = "CustomGridViewCss";
            newLink.Attributes.Add("href", this.Page.ClientScript.GetWebResourceUrl(typeof(ITCWebToolkit.Web.UI.Controls.GridView), "ITCWebToolkit.Web.UI.Controls.style.CustomGridView.css"));
            newLink.Attributes.Add("type", "text/css");
            newLink.Attributes.Add("rel", "stylesheet");
            this.Page.Header.Controls.Add(newLink);
        }

        base.OnPreRender(e);
        this.EnsureChildControls();
    }
    protected override void Render(HtmlTextWriter writer)
    {

        if (this._imgFPg != null)
            this.Page.ClientScript.RegisterForEventValidation(this._imgFPg.UniqueID);
        if (this._imgPrevPg != null)
            this.Page.ClientScript.RegisterForEventValidation(this._imgPrevPg.UniqueID);
        if (this._imgNextPg != null)
            this.Page.ClientScript.RegisterForEventValidation(this._imgNextPg.UniqueID);
        if (this._imgLastPg != null)
            this.Page.ClientScript.RegisterForEventValidation(this._imgLastPg.UniqueID);
        if (this._drpPageSz != null)
            this.Page.ClientScript.RegisterForEventValidation(this._drpPageSz.UniqueID);

        if (this.HeaderRow != null)
            for (int i = 1; i < this.HeaderRow.Cells.Count - 2; i++)
                if (i < this.Columns.Count && this.Columns[i] is SortableField && ((this.Columns[i] as SortableField).ShowSort))
                {
                    ImageButton img = (this.HeaderRow.Cells[i].FindControl("imgSort_" + i.ToString()) as ImageButton);
                    if (img != null)
                        this.Page.ClientScript.RegisterForEventValidation(img.UniqueID);
                }
        base.Render(writer);
    }
    protected override Table CreateChildTable()
    {
        this.PagerSettings.Visible = false;
        this.GridLines = GridLines.None;
        Table tbl = base.CreateChildTable();
        tbl.Attributes.Add("name", this.UniqueID);
        return tbl;
    }
    protected override int CreateChildControls(System.Collections.IEnumerable dataSource, bool dataBinding)
    {
        this.GridLines = GridLines.None;
        int iCount = base.CreateChildControls(dataSource, dataBinding);

        // Modify footer row
        System.Web.UI.WebControls.GridViewRow ftr = this.FooterRow;
        // NOTE: We're modifying the footer first, because we're looking at the
        //   total number of rows in the header for the ColSpan property we
        //   use in the footer and we want the row count *before* we modify
        //   the header.
        ftr.Cells.Clear();
        this.BuildFooter(this.FooterRow);

        // Modify Header Row
        System.Web.UI.WebControls.GridViewRow hdr = this.HeaderRow;
        hdr.CssClass = "GridViewHeader";

        for (int c = 0; c < hdr.Cells.Count; c++)
        {
            hdr.Cells[c].CssClass = "GridViewHeaderTC";
            if (c > 0)
                hdr.Cells[c].Style.Add("border-left", "solid 1px #ccccd3");

            if (c < this.Columns.Count && this.Columns[c] is SortableField && ((this.Columns[c] as SortableField).ShowSort))
            {
                hdr.Cells[c].Controls.Clear();

                Label lblHdrText = new Label();
                lblHdrText.ID = "lblHdrText_" + c.ToString();
                lblHdrText.Text = hdr.Cells[c].Text;
                hdr.Cells[c].Controls.Add(lblHdrText);

                ImageButton imgSort = new ImageButton();
                imgSort.ID = "imgSort_" + c.ToString();
                imgSort.CssClass = "GridViewHeaderSort";
                imgSort.ImageUrl = this.Page.ClientScript.GetWebResourceUrl(typeof(ITCWebToolkit.Web.UI.Controls.GridView), "ITCWebToolkit.Web.UI.Controls.images.gridView.Sort.png");
                imgSort.AlternateText = "";
                imgSort.CommandArgument = (this.Columns[c] as BoundField).DataField;
                imgSort.CommandName = "Sort";
                imgSort.Command += new CommandEventHandler(this.imgSort_OnCommand);
                hdr.Cells[c].Controls.Add(imgSort);
                imgSort.Attributes.Add("name", imgSort.UniqueID);
            }
        }

        TableCell tdTL = new TableCell();
        tdTL.Style.Add(HtmlTextWriterStyle.Width, "6px");
        tdTL.CssClass = "GridViewHeaderTL";
        hdr.Cells.AddAt(0, tdTL);

        TableCell tdTR = new TableCell();
        tdTR.Style.Add(HtmlTextWriterStyle.Width, "6px");
        tdTR.Style.Add("border-left", "1px solid #ccccd3;");
        tdTR.CssClass = "GridViewHeaderTR";
        hdr.Cells.Add(tdTR);

        // Modify individual rows
        for (int i = 0; i < this.Rows.Count; i++)
        {
            System.Web.UI.WebControls.GridViewRow tr = this.Rows[i];
            tr.CssClass = (i % 2 == 0) ? "GridViewLineAlt" : "GridViewLine";

            for (int c = 0; c < tr.Cells.Count - 1; c++)
                tr.Cells[c].Style.Add("border-right", "solid 1px #ccccd3");

            TableCell tdL = new TableCell();
            tdL.CssClass = "GridViewLineLeft";
            tr.Cells.AddAt(0, tdL);

            TableCell tdR = new TableCell();
            tdR.CssClass = "GridViewLineRight";
            tr.Cells.Add(tdR);
        }

        return iCount;
    }
    protected void BuildFooter(GridViewRow tr)
    {
        TableCell tdBL = new TableCell();
        tdBL.Style.Add(HtmlTextWriterStyle.Width, "6px");
        tdBL.CssClass = "GridViewFooterBL";
        tr.Cells.Add(tdBL);

        int colCount = this.HeaderRow.Cells.Count;

        TableCell td = new TableCell();
        td.ID = "tdFooterControls";
        td.CssClass = "GridViewFooterBC";
        td.ColumnSpan = colCount;

        this._spanPgBtns = new Label();
        this._spanPgBtns.ID = "spanPgButtons";
        this._spanPgBtns.Style.Add("float", "right");
        this._spanPgBtns.Style.Add("margin-right", "20px");

        this._imgFPg = new ImageButton();
        this._imgFPg.ID = "imgFPg";
        this._imgFPg.CssClass = "FirstPg";
        this._imgFPg.ImageUrl = this.Page.ClientScript.GetWebResourceUrl(typeof(ITCWebToolkit.Web.UI.Controls.GridView), "ITCWebToolkit.Web.UI.Controls.images.gridView.FstPg.png");
        this._imgFPg.ImageAlign = ImageAlign.Middle;
        this._imgFPg.CommandName = "FirstPage";
        this._imgFPg.Command += new CommandEventHandler(this.imgPg_OnCommand);
        this._spanPgBtns.Controls.Add(this._imgFPg);

        this._imgPrevPg = new ImageButton();
        this._imgPrevPg.ID = "imgPrevPg";
        this._imgPrevPg.CssClass = "PrevPg";
        this._imgPrevPg.ImageUrl = this.Page.ClientScript.GetWebResourceUrl(typeof(ITCWebToolkit.Web.UI.Controls.GridView), "ITCWebToolkit.Web.UI.Controls.images.gridView.PrevPg.png");
        this._imgPrevPg.ImageAlign = ImageAlign.Middle;
        this._imgPrevPg.CommandName = "PrevPage";
        this._imgPrevPg.Command += new CommandEventHandler(this.imgPg_OnCommand);
        this._spanPgBtns.Controls.Add(this._imgPrevPg);

        Label lblPageNum = new Label();
        lblPageNum.ID = "lblPageNum";
        lblPageNum.Width = new Unit("50px");
        lblPageNum.Text = string.Format("{0} / {1}", this.PageIndex + 1, this.PageCount);
        lblPageNum.Style.Add(HtmlTextWriterStyle.TextAlign, "center");
        this._spanPgBtns.Controls.Add(lblPageNum);

        this._imgNextPg = new ImageButton();
        this._imgNextPg.ID = "imgNextPg";
        this._imgNextPg.CssClass = "NextPg";
        this._imgNextPg.ImageUrl = this.Page.ClientScript.GetWebResourceUrl(typeof(ITCWebToolkit.Web.UI.Controls.GridView), "ITCWebToolkit.Web.UI.Controls.images.gridView.NextPg.png");
        this._imgNextPg.ImageAlign = ImageAlign.Middle;
        this._imgNextPg.CommandName = "NextPage";
        this._imgNextPg.Command += new CommandEventHandler(this.imgPg_OnCommand);
        this._spanPgBtns.Controls.Add(this._imgNextPg);

        this._imgLastPg = new ImageButton();
        this._imgLastPg.ID = "imgLastPg";
        this._imgLastPg.CssClass = "LastPg";
        this._imgLastPg.ImageUrl = this.Page.ClientScript.GetWebResourceUrl(typeof(ITCWebToolkit.Web.UI.Controls.GridView), "ITCWebToolkit.Web.UI.Controls.images.gridView.LstPg.png");
        this._imgLastPg.ImageAlign = ImageAlign.Middle;
        this._imgLastPg.CommandName = "LastPage";
        this._imgLastPg.Command += new CommandEventHandler(this.imgPg_OnCommand);
        this._spanPgBtns.Controls.Add(this._imgLastPg);

        td.Controls.Add(this._spanPgBtns);

        Label spanPageSz = new Label();
        spanPageSz.ID = "spanPageSz";
        spanPageSz.Style.Add("margin-left", "20px");

        this._drpPageSz = new DropDownList();
        this._drpPageSz.ID = "drpPageSzSelect";
        this._drpPageSz.AutoPostBack = true;
        this._drpPageSz.SelectedIndexChanged += new EventHandler(drpPageSz_SelectedIndexChanged);
        this._drpPageSz.Items.Add(new ListItem("10", "10"));
        this._drpPageSz.Items.Add(new ListItem("25", "25"));
        this._drpPageSz.Items.Add(new ListItem("50", "50"));
        this._drpPageSz.Items.Add(new ListItem("100", "100"));
        spanPageSz.Controls.Add(this._drpPageSz);
        td.Controls.Add(spanPageSz);

        Label lblRecVis = new Label();
        lblRecVis.ID = "lblRecordsCount";
        lblRecVis.Style.Add("margin-left", "20px");
        lblRecVis.Text = string.Format("Displaying {0} of {1} records.", Math.Min(this.PageSize, this.Rows.Count - (this.PageIndex * this.PageSize)), this.Rows.Count);
        lblRecVis.Text = "Total Record Display";
        td.Controls.Add(lblRecVis);
        tr.Cells.Add(td);

        TableCell tdBR = new TableCell();
        tdBR.Style.Add(HtmlTextWriterStyle.Width, "6px");
        tdBR.CssClass = "GridViewFooterBR";
        tr.Cells.Add(tdBR);

        this._imgFPg.Attributes.Add("name", this._imgFPg.UniqueID);
        this._imgPrevPg.Attributes.Add("name", this._imgPrevPg.UniqueID);
        this._imgNextPg.Attributes.Add("name", this._imgNextPg.UniqueID);
        this._imgLastPg.Attributes.Add("name", this._imgLastPg.UniqueID);
        this._drpPageSz.Attributes.Add("name", this._drpPageSz.UniqueID);
    } 
```

我在自定义服务器控件上只有大约 6/10，所以我确信我在这里至少做错了一件事:)

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-28T20:04:46.900

好的。我终于找到了参考并回答了我自己的问题。诀窍在于覆盖“PerformSelect”方法并在那里处理 DataSource 与 DataSourceID。

可以在此 MSDN 页面上找到有关如何执行此操作的详细信息：

[http://msdn.microsoft.com/en-us/library/ms366539(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms366539(v=vs.90).aspx)

在中途查找标题为“启动数据检索”的部分。

# node.js - 如何在 Typescript 中声明 NodeJs 模块？

> ID：15507654
> 
> 赞同：1
> 
> 时间：2013-03-19T18:30:34.607
> 
> 标签：node.js, typescript

我的消费节点代码如下所示：

```
var helloworld = require('helloworld');
helloworld.sayhello(); 
```

使用 Typescript 的优点，我将如何声明导出`sayhello()`函数的模块？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T19:12:57.233

**helloworld.ts**

```
export function sayhello() {
    console.log('hello, world!');
} 
```

请注意，您不会编写包含`module`块（文件本身就是模块）。

# php - BigCommerce api循环中的多个商店

> ID：15507655
> 
> 赞同：2
> 
> 时间：2013-03-19T18:30:36.090
> 
> 标签：php, api, foreach, bigcommerce

我目前正在创建一个需要遍历多个 BigCommerce 商店的网络应用程序。不幸的是，在使用 BigCommerce API 时，我无法让它循环。

我正在使用来自 GitHub 的最新版本的 BC API PHP 库（使用命名空间的库），请参阅下面的代码：

```
require_once( 'autoload.php' );

use Bigcommerce\Api\Client as Bigcommerce;

$stores[1]['url'] = 'https://www.store1.co.uk';
$stores[1]['api_key'] = 'e01e16e6b51d70f6de213fd7445dc0f4';
$stores[1]['user'] = 'admin';
$stores[2]['url'] = 'https://www.store2.co.uk';
$stores[2]['api_key'] = '7b8b934e157eac734b7f7b4311b7cd81';
$stores[2]['user'] = 'admin';

foreach ( $stores as $store ){

    echo $store['url'] . ' - ';

    Bigcommerce::configure(array(
        'store_url' => $store['url'],
        'username'  => $store['user'],
        'api_key'   => $store['api_key'],
    ));

    Bigcommerce::setCipher('RC4-SHA');
    Bigcommerce::verifyPeer( false );

    $products = Bigcommerce::getProductsCount();

    echo $products . ' products<br />;

} 
```

预期的输出应该是：

```
https://www.store1.co.uk - 301 products
https://www.store2.co.uk - 235 products 
```

我实际上得到的是：

```
https://www.store1.co.uk - 301 products
https://www.store2.co.uk - 
```

我之前使用过 API 几次，但每次/每个项目只连接到一个商店。在连接到 foreach 循环中的下一个商店之前，我是否需要关闭连接或其他东西？

非常感谢所有帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T19:01:54.743

查看 Bigcommerce PHP 库中的以下代码。

```
/**
     * Get an instance of the HTTP connection object. Initializes
     * the connection if it is not already active.
     *
     * @return Connection
     */
    private static function connection()
    {
        if (!self::$connection) {
            self::$connection = new Connection();
            self::$connection->authenticate(self::$username, self::$api_key);
        }

        return self::$connection;
    } 
```

这是来自 Client.php - [https://github.com/bigcommerce/bigcommerce-api-php/blob/master/src/Bigcommerce/Api/Client.php](https://github.com/bigcommerce/bigcommerce-api-php/blob/master/src/Bigcommerce/Api/Client.php)

如果你看看你在做什么，它不会起作用，因为现有的连接将迫使库忽略新值。仅当您第一次设置时才会形成新的商店连接。

对于您的特殊用例，一个简单的解决方法是覆盖上述功能以重新连接到新商店，而不管现有连接如何。

希望这行得通！

# android - 如何通过按创建日期命名拍摄的屏幕截图来自动命名它们？

> ID：15507658
> 
> 赞同：2
> 
> 时间：2013-03-19T18:30:44.650
> 
> 标签：android, unix, date, filenames

我的应用程序需要一系列屏幕截图，但我没有得到很多，而是得到一个一直覆盖自身的屏幕截图。我想获取以拍摄日期命名的屏幕截图（我认为这将使它们独一无二并解决问题）。

为此，我执行以下操作：

```
$(date +%m.%d.%Y-%H:%M) 
```

全线：

```
os.write(("/system/bin/screencap -p /sdcard/fly/$(date +%m.%d.%Y-%H:%M).png").getBytes("ASCII")); 
```

但是文件没有出现。

我尝试过`/sdcard/fly/screenshot%d.png`，但文件的名称与代码“screenshot%d”中的名称完全相同。

如何根据拍摄日期正确命名我的文件？

完整代码：

```
package ru.startandroid.develop.p0921servicesimple;

import java.io.IOException;
import java.io.OutputStream;

import android.app.Service;
import android.content.Intent;
import android.os.IBinder;
import android.util.Log;

public class MyService extends Service {

    final String LOG_TAG = "myLogs";

    public void onCreate() {
        super.onCreate();
        Log.d(LOG_TAG, "onCreate");
    }

    public int onStartCommand(Intent intent, int flags, int startId) {
        Log.d(LOG_TAG, "onStartCommand");
        someTask();
        return super.onStartCommand(intent, flags, startId);
    }

    public void onDestroy() {
        super.onDestroy();
        Log.d(LOG_TAG, "onDestroy");
    }

    public IBinder onBind(Intent intent) {
        Log.d(LOG_TAG, "onBind");
        return null;
    }

    void someTask() {
        new Thread(new Runnable() {
            public void run() {
                for (int i = 1; i <= 25; i++) {
                    Log.d(LOG_TAG, "i = " + i);
                    try {
                        Process sh = Runtime.getRuntime().exec("su", null);

                        OutputStream os = sh.getOutputStream();
                        os.write(("/system/bin/screencap -p /sdcard/fly/bob.png").getBytes("ASCII"));
                        os.flush();
                        os.close();
                        sh.waitFor();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }
            }
        }).start();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-25T22:51:27.300

1.  当您不在 shell 中运行它们时，Shell 指令将不起作用。这只是字符串`exec`。
2.  在 Java 中生成文件名怎么样？`date +%m.%d.%Y-%H:%M`肯定有很简单的方法可以得到与写出相同的字符串。

# c++ - 为什么被视为偏专业

> ID：15507659
> 
> 赞同：0
> 
> 时间：2013-03-19T18:30:44.867
> 
> 标签：c++, templates, g++

拥有以下代码，我有点困惑为什么第二个`foo`被视为部分专业化，而后者不是（IMO 两者都不应该是*partial*）。

```
template <bool IS_TRUE>
int foo();

// Doesn't work!?
template <bool IS_TRUE>
int foo<IS_TRUE>() {
    return 0;
}

template <>
int foo<true>() {
    return 0;
}

int main() {
    return foo<true>();
} 
```

在第二个`foo`gcc 抱怨：

> 错误：不允许函数模板部分特化“foo”

有人可以解释一下，我缺少什么细节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T08:24:59.600

名称后带有模板参数的语法保留用于部分特化：

```
template<typename T> struct foo {};
template<typename T> struct foo<T *> {}; 
```

如果部分特化未能特化任何参数，您将收到如下错误：

```
template<typename T> struct foo {};
template<typename T> struct foo<T> {};
error: partial specialization 'foo<T>' does not specialize any template arguments 
```

函数模板不允许部分特化（使用重载代替），所以编译器检查特化是否真的特化了任何模板参数是没有意义的；在任何情况下都是非法的。如果要将函数的声明和定义分开，则应在声明和定义中省略模板参数：

```
template<bool IS_TRUE> int foo();
template<bool IS_TRUE> int foo() { return 0; }
template<> int foo<true>() { return 0; } 
```

# php - 如何在 PHP 函数中添加另一个页面 ID - 新手问？

> ID：15507663
> 
> 赞同：0
> 
> 时间：2013-03-19T18:30:56.130
> 
> 标签：php

我需要一些帮助来看看我哪里出错了。

我正在尝试将页面 ID 添加到此原始功能：

```
<?php if( $post->ID != '91' )
    {
        get_sidebar();
    } ?>
> 
```

还要排除 ID 1267。我正在尝试这个，但没有成功。

```
<?php
    $pageIDs_to_exclude=array("91","1267");

    if( $post->ID != $pageIDs_to_exclude )
    {
        get_sidebar();
    }
?> 
```

当然必须有更好的方法来做到这一点？或者我错过了什么？感谢任何帮助/Anders

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T18:34:07.347

```
$pageIDs_to_exclude = array("91","1267");

// in_array will return false if it doesn't find $post->ID within the $pageIDs_to_exclude array 
if( ! in_array($post->ID, $pageIDS_to_exclude) )
{
    get_sidebar();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T18:35:07.397

您正在尝试直接比较`$post->ID`,`$pageIDs_to_exclude`一个数组。由于`$post->ID`不是数组（它是字符串），因此这是不可能的。相反，看看是否`$post->ID`在`$pageIDs_to_exclude`.

```
if (!in_array($post->ID, $pageIDs_to_exclude)) {

    get_sidebar();

} 
```

`in_array()``true`是一个在数组中找到对象时返回的函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T18:34:21.060

您可以使用 php 的 in_array。它将返回真或假。

```
$pageIDs_to_exclude=array("91","1267");

if(!in_array($post->ID,$pageIDs_to_exclude))
{
    get_sidebar();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T18:37:17.300

使用 PHP 函数`in_array()`( [http://php.net/manual/en/function.in-array.php](http://php.net/manual/en/function.in-array.php) ) 在数组中搜索值：

```
<?php
  $page_ids = array("91", "1271");
  if(!in_array($post->ID, $page_ids))
   {
    get_sidebar();
   }
?> 
```

# aforge - Aforge Canny 边缘检测以及我如何获得像素值

> ID：15507665
> 
> 赞同：1
> 
> 时间：2013-03-19T18:31:03.093
> 
> 标签：aforge

精明的边缘检测是否仅适用于 8bppIndexed？我想获得给定像素前的值。(x,y)。我该怎么做

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:20:08.080

是的，它仅适用于 8bpp 索引图像。见[这里](http://www.aforgenet.com/framework/docs/html/e08cae30-7a37-db9f-cede-05cf6521343f.htm)。

> 过滤器接受 8 bpp 灰度图像进行处理。

您可能希望保留原件并将灰度副本传递给过滤器。这样，您可以检索基于原始位置的过滤值，或基于过滤位置的原始值。

# c# - 使用 XML 数据更新数据库中的行

> ID：15507670
> 
> 赞同：0
> 
> 时间：2013-03-19T18:31:19.550
> 
> 标签：c#, sql-server, sql-server-2005, datagridview

这是我第一次使用 XML 将数据插入表中。我将前端的数据（所有 Datagridview 行）保存到 xml 文件中，并将其发送到数据库以插入表 SD_ShippingDetails。下面是查询用于读取 XML 数据和保存数据。从查询中可以看到，我正在删除相关的 ShippingID 详细信息并再次插入。（从 SD_ShippingDetails WHERE ShippingID=@ShippingID 删除）。我们可以通过获取更新 SD_ShippingDetails 中的现有行吗？来自 XML 的数据。如果是，请帮我查询。

```
CREATE PROCEDURE SD_Insert_ShippingDetails    
@PBMXML as varchar(Max),      
@ShippingID as INT      

AS      
BEGIn      

declare @i int      

exec sp_xml_preparedocument @i output,@PBMXML      

DELETE FROM SD_ShippingDetails WHERE ShippingID=@ShippingID      

INSERT INTO  SD_ShippingDetails(ShippingID,Weight,Height,TotalBoxes,Price)      
SELECT ShippingID,Weight,Height,TotalBoxes,Price FROM OPENXML(@i,'Root/ShippingBox',2)      
WITH (      
ShippingID int,Weight varchar(20),Height varchar(20),TotalBoxes varchar(20),Price numeric(18,2))    

exec sp_xml_removedocument @i      

END 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T06:36:52.850

您使用的是 SQL Server 2005，因此您可以使用 XML 数据类型而不是 openxml，因此此答案使用它。解决方案不需要使用 XML 数据类型。如果您愿意，可以使用 openxml 重写。

您在评论中指定 SD_ShippingDetails 中有一个 ID 标识字段（我假设这是主键），但您还说 ShippingID 和 Weight 的组合是唯一的。这给我们留下了一个看起来像这样的表结构。

```
create table dbo.SD_ShippingDetails
(
  ID int identity primary key,
  ShippingID int not null,
  Weight varchar(20) not null,
  Height varchar(20),
  TotalBoxes varchar(20),
  Price numeric(18,2),
  unique (ShippingID, Weight)
); 
```

存储过程首先需要更新 SD_ShippingDetails 中已存在的所有行，然后插入缺失的行。

```
create procedure dbo.SD_Insert_ShippingDetails
  @PBMXML as xml
as

update dbo.SD_ShippingDetails 
set Height = T.N.value('(Height/text())[1]', 'varchar(20)'),
    TotalBoxes = T.N.value('(TotalBoxes/text())[1]', 'varchar(20)'),
    Price = T.N.value('(Price/text())[1]', 'numeric(18,2)')
from @PBMXML.nodes('Root/ShippingBox') as T(N)
where ShippingID = T.N.value('(ShippingID/text())[1]', 'int') and
      Weight = T.N.value('(Weight/text())[1]', 'varchar(20)');

insert into dbo.SD_ShippingDetails(ShippingID, Weight, Height, TotalBoxes, Price)
select T.N.value('(ShippingID/text())[1]', 'int'),
       T.N.value('(Weight/text())[1]', 'varchar(20)'),
       T.N.value('(Height/text())[1]', 'varchar(20)'),
       T.N.value('(TotalBoxes/text())[1]', 'varchar(20)'),
       T.N.value('(Price/text())[1]', 'numeric(18,2)')
from @PBMXML.nodes('Root/ShippingBox') as T(N)
where not exists (
                 select *
                 from dbo.SD_ShippingDetails
                 where ShippingID = T.N.value('(ShippingID/text())[1]', 'int') and
                       Weight = T.N.value('(Weight/text())[1]', 'varchar(20)')
                 ); 
```

[SQL小提琴](http://sqlfiddle.com/#!3/602a0/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:41:26.283

如果您有 Sql Server 2005，则最好将值放在 #temp 或 @variables 表中。

在 2008 及更高版本中，您可以搭载 MERGE 功能。

[http://msdn.microsoft.com/en-us/library/bb522522(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/bb522522(v=sql.105).aspx)

这是 xml 粉碎的一个很好的链接。注意，您使用的是旧版本的 OPENXML。那是一个更多的 Sql Server 2000 命令。查看下面 Plamen 的博客，了解 2005 及更高版本的语法。

[http://pratchev.blogspot.com/2007/06/shredding-xml-in-sql-server-2005.html](http://pratchev.blogspot.com/2007/06/shredding-xml-in-sql-server-2005.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T18:45:03.903

我会将您的 XML 填充到变量表中，然后使用`Update`Statement 和`Insert`带有`Not Exists`.

如果你有 SQL 2008，你可以用这个替换你的删除和插入语句......

```
MERGE   SD_ShippingDetails AS Target
USING  (SELECT  ShippingID,
                Weight,
                Height,
                TotalBoxes,
                Price 
        FROM    OPENXML(@i,'Root/ShippingBox',2)      
                WITH   (ShippingID int,
                        Weight varchar(20),
                        Height varchar(20),
                        TotalBoxes varchar(20),
                        Price numeric(18,2)) ) AS source (ShippingID,Weight,Height,TotalBoxes,Price)
        ON (target.ShippingID = source.ShippingID)
WHEN    MATCHED THEN 
        UPDATE  SET Weight = source.Weight,
                    Height = source.Height,
                    TotalBoxes = source.TotalBoxes,
                    Price = source.Price
WHEN    NOT MATCHED THEN    
        INSERT (ShippingID,Weight,Height,TotalBoxes,Price)
        VALUES (source.ShippingID,source.Weight,source.Height,source.TotalBoxes,source.Price); 
```

# silverlight-4.0 - 过滤不适用于 Telerik RadGridView Silverlight

> ID：15507673
> 
> 赞同：1
> 
> 时间：2013-03-19T18:31:31.497
> 
> 标签：silverlight-4.0, filtering, telerik-grid, raddatapager

我正在使用telerik radgridview，其项目集合是绑定到datapager的域源我有20页，当我在列上过滤时它只是在当前页面上过滤，我如何让它过滤整个集合。下面是我的代码

```
 <telerikRad:RadGridView>
 ItemsSource="{Binding ElementName=stddata, Path=Data}" 
           <telerikRad:RadGridView.Columns>
           <telerik:GridViewDataColumn Header="stuName" DataMemberBinding="{Binding Name}" />
            <telerik:GridViewDataColumn Header="StuId" DataMemberBinding="{Binding StudentId}" />
              <telerikRad:RadGridView.Columns>
           <telerikRad:RadGridView>

            <sdk:DataPager Grid.Row="2"                                            
           x:Name="SSSS"                                            
          Source="{Binding Data, ElementName=stddata}"                                           
           IsTotalItemCountFixed="True" />

          <riaControls:DomainDataSource Name="stddata"                                                    
               AutoLoad="True"                                                                                                                    
               PageSize="9"                                                        
              QueryName="GetStudentsQuery"                                                        
              DomainContext="{Binding DomainContext}">
</riaControls:DomainDataSource> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T17:11:22.033

Telerik 通过将过滤器从 RadGridView 应用到控件绑定到的集合来间接获取过滤后的项目。

这是一个解决方案，它允许人们使用 Telerik RadGridView 控件中的当前过滤器和排序设置来获取已过滤、排序的数据项列表。

```
using Telerik.Windows.Data;
.
.
.
IEnumerable<MyClass> itemsToDisplay { get; set; }  //The RadGridView is bound to this property

public void DoSomethingWithFilteredAndSortedDisplayItems(RadGridView rgv)
{
    IQueryable<MyClass> iqItems = itemsToDisplay.AsQueryable();
    FilterDescriptorCollection filter = rgv.FilterDescriptors;
    SortDescriptorCollection sort = rgv.SortDescriptors;
    List<MyClass> fsItems = iqItems.Where(filter).Sort(sort).ToIList() as List<MyClass>;

    if (fsItems != null && fsItems.Count > 0)
    {
        DoSomethingWithDisplayItems(fsItems);
    }
}

public void DoSomethingWithDisplayItems(IEnumerable<MyClass> list)
{
    ... //Do something
} 
```

这是为了说明。在我自己的代码中，我将过滤器和排序实现为 RadGridView 控件的扩展方法。

# c# - 将数据行项从 DBNull 更改为字符串值

> ID：15507675
> 
> 赞同：0
> 
> 时间：2013-03-19T18:31:35.923
> 
> 标签：c#, asp.net, datatable, datarow

我可能做错了，但这里是：

```
 OleDbDataAdapter adapter = new OleDbDataAdapter("SELECT * FROM [CRPRList$]", XLSConnect);
    //the XLSConnect is from a spreadsheet. I've confirmed the data is there.
    DataSet ds = new DataSet();
    adapter.Fill(ds);
    DataTable thisTable = ds.Tables[0];
    //The table exists and it does populate
    thisTable.Columns.Add("Summary");
    //The new column is added and I am able to populate it (below)

    for (int rowNum = 0; rowNum < thisTable.Rows.Count; rowNum++) { 
        //Here I'm cycling through the row items

        DataRow row = thisTable.Rows[rowNum];
        string pr = row["PR"].ToString();
        string cr = row["CR"].ToString();
        //The first two column values are grabbed and examined

        if ((pr != "" && pr != null)&&(cr == null || cr == "")) {
           //if the first column is empty then the second is examined and I am attempting
           //to populate the first column using the searchForCRNumber method
           //This method returns a string

            cr = this.searchForCRNumber(pr); //assignment works
            row[0] = cr; //Here is the problem, this assignment does not work (more explained below)
        }
        row["Summary"] = this.searchForSummary(cr);
        row.AcceptChanges();
    }
    this.showResults(thisTable);//works, except the changes above are not applied 
```

该行`row[0] = cr;`自然是一个空值，因此它作为类型出现`DBNull`并且不接受 `cr`字符串。

我得到的错误是`System.FormatException: Input string was not in a correct format.`

我已经搜索了转换`row[0]`为空字符串的方法或其他一些转换的方法，`cr`到目前为止我还没有找到一种方法来做到这一点。

**编辑** *我正在添加更多内容以帮助了解围绕此问题发生的情况。我以为我在上面已经足够彻底了，但也许不是......*

数据`XLSConnect`来自：

```
private bool XSLConnection(string filePath, string fileType) { // returns false if XSL or XSLX is not the fileType
    string strConn;
    if (fileType.ToLower() == "xls" || fileType.ToLower() == "xlsx") {
        strConn = (fileType == "xlsx") ? string.Format("Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};Extended Properties=\"Excel 12.0\"", filePath) : string.Format("Microsoft.Jet.OLEDB.4.0;Data Source={0};Extended Properties=\"Excel 8.0\"", filePath);

        XLSConnect = new OleDbConnection(strConn);
        return true;
    } else return false;
} 
```

这是`searchForCRNumber`方法：

```
private string searchForCRNumber(string PRNumber) {
    return this.getProperty("MyReturnColumn", PRNumber, "MyMatchColumn");
} 
```

这是`getProperty`方法：

```
private string getProperty(string searchProperty, string searchVal, string rtrnProperty) {
    string undefined = "Undefined";
    string rtrn = null;
    string query = "SELECT " + rtrnProperty + " FROM MySQLTable WHERE " + searchProperty + " = '" + searchVal + "'";
    this.QCConn.Open();

    SqlDataReader reader = this.runQCConnect(query).ExecuteReader();
    reader.Read();
    rtrn = (!reader.HasRows)?
        undefined :
        reader[0].ToString();

    if (rtrn == "" || rtrn == null) rtrn = undefined;
    this.QCConn.Close();

    return rtrn;
} 
```

**更多编辑** 我仍在研究这个，我开始怀疑我是否还没有发现错误。我发现了问题所在，并且仍在努力解决问题。上传的 xls(x) 可以有空单元格。我发现那些空单元格会导致 DataTable 有空单元格，但它们的类型是 DBNull ......当然，它不能（自然地）被分配一个字符串值。

当我在 try/catch 中应用以下内容时：

```
throw new Exception("PR = " + pr + " and typeof = " + pr.GetType().ToString() + " && CR = " + cr + " and typeof = " + cr.GetType().ToString() + "\nCell typeof = " + row["CR"].GetType().ToString()); 
```

我得到这个回应：

```
PR = 7800 and typeof = System.String && CR = Undefined and typeof = System.String
Cell typeof = System.DBNull 
```

如您所见，该单元格是 System.DBNull 并且不接受字符串值。这是我错误的根源。但我仍然不知道如何使这项工作。有什么我想念的吗？无论 DBNull 值如何，如何将字符串值分配给这些单元格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:38:32.633

`DBNull`不是空字符串，将其转换为字符串不会给你`null`.

如果这是您想要的，您可能应该在将其转换为字符串之前进行检查。执行以下操作：

```
string pr = (row["PR"] == System.DBNull.Value) ? null : row["PR"].ToString();
string cr = (row["CR"] == System.DBNull.Value) ? null : row["CR"].ToString(); 
```

# java - Java URL 计数器不工作

> ID：15507679
> 
> 赞同：0
> 
> 时间：2013-03-19T18:31:46.737
> 
> 标签：java, regex, url

我正在尝试计算任何给定 Java 字符串中的 URL 数量：

```
String test = "Hello World!";
String urlRegex = "<\\b(https?|ftp|file)://[-a-zA-Z0-9+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9+&@#/%=~_|]>";
pattern = Pattern.compile(urlRegex);
matcher = pattern.matcher(test);
numUrls = matcher.groupCount();
System.err.println("numUrls = " + numUrls); 
```

我惊讶地发现这`numUrls`不是零。关于为什么的任何想法？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:35:15.530

来自 javadoc[`Matcher#groupCount()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Matcher.html#groupCount())

> 返回此匹配器模式中的捕获组数。

您的模式有一组`...(https?|ftp|file)...`，因此它返回 1。

# c - x++ 和 x+1 到底有什么区别？

> ID：15507682
> 
> 赞同：5
> 
> 时间：2013-03-19T18:31:53.013
> 
> 标签：c, operators

我一直在考虑增加一个指针，但我想现在我一般不知道这两个操作/运算符之间的语义差异。例如，我的教授说如果你有 int a[10] 你不能说 a++ 来指向下一个元素，但我从经验中知道 a+1 确实有效。我问为什么，他说“a++ 是一个动作，a+1 是一个表达式”。他所说的“行动”是什么意思？如果有人能告诉我更多关于这一点以及这两种操作之间的内在差异，我将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-19T18:35:04.943

**x++ 和 ++x**

增量运算符`x++`将修改并通常返回旧的副本`x`。附带说明，前缀`++x`仍会修改`x`，但会返回新的`x`.

实际上`x++`可以看作是一种：

```
{
    int temp = x; 
    x = x + 1; 
    return temp;
} 
```

而`++x`将更像：

```
{
    x = x + 1;
    return x;
} 
```

**x + 1**

该`x+1`操作只会返回表达式的值，**不会**修改`x`. 它可以被视为：

```
{
    return (x + 1);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T18:33:27.553

`x++`是一个动作，它改变了`x`

`x+1`不变`x`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T18:34:43.757

`x++`是一个 const 表达式，它修改`x`(It 将其增加`1`) 的值。如果引用，则表达式将在递增之前`x++`返回 的值。`x`

表达式将在递增后`++x`返回 的值。`x`

`x + 1`但是，是表示 的值的表达式`x + 1`。它不会修改 的值`x`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-19T18:35:22.997

a++ 将转换为 a=a+1 这是一个动作（由于包含的赋值操作） a+1 只是一个引用 a+1 的表达式（在指针术语或数字方面，取决于 a 的类型）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-19T18:34:34.073

x++ 等价于 x = x + 1。这是一个动作，因为它实际上是在改变 x 的值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-19T18:50:58.583

每个表达式都会返回一个结果（除非它是`void`）。

`x + 1`返回 x + 1 的值。

`x++`返回 x 的值，作为副作用，x 的值在某个点递增，不一定立即递增。

这意味着您可以拥有：

`x = x + 1;`

但这是非法的：

`x = x++;`

# mysql - 如何在 mySQL 中动态选择列名

> ID：15507683
> 
> 赞同：5
> 
> 时间：2013-03-19T18:31:54.333
> 
> 标签：mysql, sql, metadata, dynamic-sql

我想选择列名，但我不提前知道表结构，它可能会改变，所以我不能只用列名硬编码 select 语句。我也不想选择每一列。有没有简单的方法可以做到这一点？

我的想法是这是这两个查询的某种组合，但我的 SQL 不是那么好。

```
SHOW COLUMNS FROM table_name;
SELECT * FROM table_name; 
```

我尝试使用子选择，但它没有用。似乎什么都没有发生，我没有收到错误，我只是没有结果

```
SELECT (SELECT column_name 
        FROM information_schema.columns 
        WHERE table_name ='table_name') 
FROM table_name; 
```

也许我需要加入？..无论如何，任何帮助都会很棒，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T19:09:53.000

试试这个[SQLFiddle](http://sqlfiddle.com/#!9/924e8/1)：

```
CREATE TABLE atable (
  prefix1 VARCHAR(10)
  ,prefix2 VARCHAR(10)
  ,notprefix3 INT
  ,notprefix4 INT
);

INSERT INTO atable VALUES ('qwer qwer', 'qwerqwer', 1, 1);
INSERT INTO atable VALUES ('qwer qwer', 'asdfaasd', 1, 1);
INSERT INTO atable VALUES ('qwer qwer', 'qrt vbb', 1, 1);
INSERT INTO atable VALUES ('qwer qwer', 'sdfg sdg', 1, 1);

SELECT CONCAT('SELECT ', GROUP_CONCAT(c.COLUMN_NAME), ' FROM atable;')
INTO @query
FROM INFORMATION_SCHEMA.COLUMNS c
WHERE c.TABLE_NAME = 'atable'
  AND c.COLUMN_NAME LIKE 'prefix%'
ORDER BY c.ORDINAL_POSITION;

PREPARE stmt FROM @query;

EXECUTE stmt; 
```

一些问题：

您可能希望在结果集上使用某种 ORDER BY。

在连接和事物方面，您可以做的事情是有限度的。

您将验证移动到运行时，在那里它更有可能被测试遗漏。

您希望能够轻松处理架构更改。此技术将仅处理您可以预见的某种类型的架构更改，而其他您可能无论如何都必须更改此代码。

# asp.net-mvc - 使用来自不同控件的相同视图？

> ID：15507684
> 
> 赞同：0
> 
> 时间：2013-03-19T18:31:55.400
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我有一个`Member`和`Staff`控制器，这两个控件都需要使用通用代码视图`Search`和`SearchResults`视图。现在这些视图在`Member`控制器中。

所以我的问题是我如何管理像`Member/Search`和`Staff/Search` 和 这样的 URL`Member/SearchResults`and之类的 URL `Staff/SearchResults`？因为我需要保护这些网址免受安全产品的侵害。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:38:08.513

您可以像拥有它们一样保留您的控制器/操作，您只需要指定要将搜索结果返回到的视图。

**工作人员控制器**

```
//Get Staff/SearchResults
public ActionResult SearchResults(){
     var model = StuffToGetResults();
     return View("~/Views/Shared/SearchResults", model);
} 
```

**成员控制器**

```
//Get Member/SearchResults
public ActionResult SearchResults(){
     var model = StuffToGetResults();
     return View("~/Views/Shared/SearchResults", model);
} 
```

这假设您有一个通用的视图模型，您将结果返回到该模型中。搜索视图也可以这样做。

# batch-file - .bat 通过 javascript 代码调用

> ID：15507685
> 
> 赞同：0
> 
> 时间：2013-03-19T18:31:56.273
> 
> 标签：batch-file

我试图通过我的java脚本代码调用一个.bat文件...bat文件依次调用一个java文件..但是我在调​​用.bat文件时遇到错误请帮助....它也给出了mi错误与java类....这是代码仪式吗？

```
 <html> 
       <head> 
                 <script language="JavaScript" type="text/javascript">  
                 MyObject = new ActiveXObject( "WScript.Shell" )  
                 function Runbat()   
                 {  
                  MyObject.Run("C:\\Documents and        Settings\\shraddha\\Desktop\\test.bat") ;  
       }  

          </script> 
            </head> 
           <body> 
          <h1>Run a Program</h1> 
                    This script launch the file any bat File<p> 
            <button onclick="Runbat()">Run bat File</button> 
        </body> 
              </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T20:35:39.803

这是您正确格式化的代码。请注意，您的 HTML 缺少结束`</p>`标记和 DOCTYPE。

```
<html>
    <head>
        <script language="JavaScript" type="text/javascript">
            MyObject = new ActiveXObject("WScript.Shell")
            function Runbat()
            {
                MyObject.Run("\"C:\\Documents and Settings\\shraddha\\Desktop\\test.bat\"");
            }
        </script>
    </head>
    <body>
        <h1>Run a Program</h1>
        This script launch the file any bat File<p>
        <button onclick="Runbat()">Run bat File</button>
    </body>
</html> 
```

有关您的 HTML 问题，请参阅[http://validator.w3.org/](http://validator.w3.org/)。

# go - 为什么 go 要求你在变量名之前添加 & ？

> ID：15507689
> 
> 赞同：1
> 
> 时间：2013-03-19T18:32:15.070
> 
> 标签：go

这是我正在查看的一个片段：

```
var t txn
t.c = c
err := c.read(&t.req) 
```

为什么你必须写 &t 而不仅仅是 t.req？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T18:40:58.547

您不必总是使用 & 符号。在您的示例中，它取决于 c.read 的签名，它要求一个指针（`*`在类型之前，例如`*MyStruct`）。`&`返回一个值的地址，给你一个指向它的指针，所以`&t.req`满足读取的签名。

如需进一步阅读，请参阅[关于指针的常见问题解答和关于](http://golang.org/doc/faq#Pointers)[地址运算符](http://golang.org/ref/spec#Address_operators)的规范。

# html - 堆叠浮动css

> ID：15507691
> 
> 赞同：0
> 
> 时间：2013-03-19T18:32:17.937
> 
> 标签：html, css

**问题**：不能仅使用 CSS 堆叠浮点数。

在示例[http://jsfiddle.net/9YQXP/7/](http://jsfiddle.net/9YQXP/7/)中，我有 3 个 div，其宽度是其容器的 35%。我不会提前知道每个 div 的高度，但我希望第三个 div 堆叠在第一个 div 的正下方。

**HTML**

```
<div id="a1">a1</div>
<div id="a2">a2</div>
<div id="a3">a3</div> 
```

**CSS**

```
div {
    text-align: center;
    float: left;
    width: 35%;
    border: 1px solid #000;
}
#a1, #a3 {
    height:20px
}
#a2 {
    height:30px
} 
```

**其他答案：**已通过指向[http://masonry.desandro.com/](http://masonry.desandro.com/)的链接回答了类似的问题（[Float stacking css](https://stackoverflow.com/questions/12880308/float-stacking-css) ） 。但是，它已通过 javascript 解决方案得到解答，我也更喜欢仅使用 CSS（或使用砖石的工作示例）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:35:08.100

仅靠 CSS 无法做到这一点。根据[花车的规格](http://www.w3.org/TR/CSS2/visuren.html#floats)：

> 5) The outer top of a floating box may not be higher than the outer top of any block or floated box generated by an element earlier in the source document.

# asp.net-mvc - ASP.NET MVC ActionResult 方法混淆

> ID：15507692
> 
> 赞同：0
> 
> 时间：2013-03-19T18:32:26.627
> 
> 标签：asp.net-mvc, methods, return-value, actionresult

在我的 ASP.NET MVC 应用程序中，我只想更新 Register 方法中的两个变量。

我的控制器中的注册方法如下所示（它没有自己的视图，所以我不确定在这种情况下要返回什么）：

```
[HttpPost]
public ActionResult Register(Container c)
{

String email = c.register.Email.ToString();
String password = c.register.Password.ToString();
return view();
} 
```

我的索引视图如下所示；

```
@model VoterMvcTest.Models.Container    

@using(Html.BeginForm("Register", "Default1")) 
{
@Html.LabelFor(o => o.register.Email)
@Html.EditorFor(o => o.register.Email)
@Html.LabelFor(o => o.register.Password)
@Html.EditorFor(o => o.register.Password)
<input class="button" type="submit" value="Register" />
} 
```

我的模型看起来像这样；

```
public class Container
{
    public Login login { get; set; }
    public Register register { get; set; }

}

public class Login
{
    public string Email { get; set; }
    public string Password { get; set; }
}

public class Register
{
    public string Email { get; set; }
    public string Password { get; set; }

} 
```

当您单击按钮时，我希望设置电子邮件和密码这两个变量，并且可以在另一种方法中使用。我不确定我应该返回什么（目标是保持相同的观点）。我试图重定向到我当前所在的同一视图（索引视图），但似乎这会导致回发并且变量丢失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:32:53.883

```
ASP.NET MVC does not have ViewState as you would have when using WebForms. So if you 
perform a post and do not persist the data in either a database or a temporary memory 
(session object for instance) you'll lose that data as soon as the request has finished.
If you do some kind of validation and determine that the user was well registered you
could redirect him to another view using: 

    return RedirectToAction("Index") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-15T19:00:11.847

试试这个

```
return View("Index",c) 
```

它会起作用的

# android - 如何正确执行托管查询？

> ID：15507698
> 
> 赞同：0
> 
> 时间：2013-03-19T18:32:43.677
> 
> 标签：android, android-cursor

我正在针对 API 11 进行开发，所以我认为没有必要使用`LoadCursor`.

我有三个类：`MainActivity extends Activity`、`Columns extends PagerAdapter`和`GetMp3Tag`

**`MainActivity`**

```
miAdapter = new Columns ();
columnas = (ViewPager) findViewById(R.id.columnas);
columnas.setAdapter(miAdapter); 
```

**`Columns`**

```
GetMP3Tag MP3TAG = new GetMP3Tag();
MP3TAG.GetCount(types_ID.ALL_ARTIST); 
```

**`GetMp3Tag`**

```
public String GetCount(types_ID Type_First) {
    Cursor cursor;
    cursor = managedQuery(Path_Normal, STAR , audioselection, null, null);
} 
```

**日志猫**

```
FATAL EXCEPTION: main
java.lang.NullPointerException at android.content.ContextWrapper.getContentResolver(ContextWrapper.java:99) 
```

# c# - 这种 Context-Per-Request 实现安全吗？

> ID：15507700
> 
> 赞同：0
> 
> 时间：2013-03-19T18:32:44.473
> 
> 标签：c#, asp.net, entity-framework

假设我有一个这样的助手类：

```
public static class RequestHelper {
    private const String DbContextKey = "DbContext";

    public static DbContext CurrentDbContext {
        get { return HttpContext.Current.Items[DbContextKey] as DbContext; }
        set { HttpContext.Current.Items[DbContextKey] = value; }
    }
} 
```

然后在我的`Global.asax.cs`我有：

```
protected void Application_BeginRequest() {
    RequestHelper.CurrentDbContext = new DbContext("some_conn_string_name");
} 
```

这种设计在所有请求中是否安全？如果我总是通过 进行数据访问，我会遇到任何问题`RequestHelper.CurrentDbContext`吗？

我问的原因是我已经看到了依赖于依赖注入的更复杂的每个请求的上下文实现。我觉得我一定遗漏了一些明显的东西，而且我担心在应用程序中有足够多的用户之前我不会注意到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:53:40.283

应该没问题，实际上您提到的大多数解决方案可能在引擎盖下都做了非常相似的事情。一个问题是，也可以为静态资源（js、css 等）调用此代码。

另一个问题是，如果你这样做会有所收获。如果您的系统非常复杂，您可以考虑使用 DI 容器之一。如果它不是那么复杂，那么仅在需要时才创建 DbContext 可能更易于维护。

# c - 逐行读取csv文件并输出第五列以用于c中的匹配

> ID：15507701
> 
> 赞同：0
> 
> 时间：2013-03-19T18:32:45.113
> 
> 标签：c, string, csv, line

我是 C 新手，我正在尝试找到一种方法来读取`csv`文件并输出行中的第五个文本，直到 eof

我的数据如下所示：

> 05/02/2012 00:00:01.548,XOLT,1ZE86V280394811433,trackthepack,23.22.11.82,en_US, 2012 年 5 月 2 日 00:00:01.605,XOLT,1ZVzVrZVhOaGNtUnZi,hadees,50.16.401/en_US. /2012 00:00:01.647,XOLT,1ZbWhoY21GMGFHRnVY,hadees,50.19.203.230,en_US,VE 05/02/2012 00:00:02.275,XOLT,1Z4217060300279193,trackthepack,107.22,059/_.246,en :00:02.599,XOLT,1Z9X98040398954479,Cascademfg,66.117.15.81,en_US,NF 05/02/2012 00:00:02.639,XOLT,1Z3X252W0363295735,trackthepack,107.22.101.79,en

我需要读取这个文件并存储第五个文本的值（例如 23.22.11.82）并使用它进一步处理匹配。

在java中，我使用下面的代码来拆分出csv行

```
String delims = "[,]"; 

while ((s1 = in.readLine()) != null && s1.length() != 0){

            String[] tokens = s1.split(delims); 
```

C中有类似的方法吗？如果我在 C 中运行它，我的代码运行得更快，这就是原因。

我能够尝试一些 c 代码，并且能够读取文件（3 条记录），但它似乎没有看到行尾，并且我遇到了分段错误。我正在使用 fgets 和 strtok

输入文件是由逗号（，）分隔的可变长度文件分隔符，我想获取每行中的第五个标记，然后将其用作查找键

这是代码：

```
 #include "GeoIP.h"
#include "GeoIPCity.h"

static const char * _mk_NA( const char * p ){
 return p ? p : "N/A";
}

int 
main(int argc, char *argv[])
{
  FILE           *f;
  FILE           *out_f;
  GeoIP          *gi;
  GeoIPRecord    *gir;
  int             generate = 0;
  char            iphost[50];
  char            *nextWordPtr = NULL;
  int             wordCount =0;
  char            *rechost;
  char            recbuffer[1000];
  char delims[]=",";
  const char     *time_zone = NULL;
  char          **ret;
  if (argc == 2)
    if (!strcmp(argv[1], "gen"))
      generate = 1;

  gi = GeoIP_open("../data/GeoIPCity.dat", GEOIP_MEMORY_CACHE);

  if (gi == NULL) {
    fprintf(stderr, "Error opening database\n");
    exit(1);
  }

  f = fopen("city_test.txt", "r");

  if (f == NULL) {
    fprintf(stderr, "Error opening city_test.txt\n");
    exit(1);
  }

  out_f = fopen("out_city_lookup_test.txt", "w");

  if (out_f == NULL) {
    fprintf(stderr, "Error opening out_city_lookup_test.txt\n");
    exit(1);
  }

//** Read the file line by line and get the ip address to use to lookup GeoIP **//
//*     while (!feof(f)) {
   while (fgets(recbuffer,1001,f) != NULL {
         nextWordPtr = strtok (recbuffer,delims); 
         while (nextWordPtr != NULL & wordCount < 5) {
           printf("word%d %s\n",wordCount,nextWordPtr);
           if (wordCount == 4 ) {
               printf("nextWordPtr %s\n",nextWordPtr);
               strcpy(iphost, nextWordPtr);
               printf("iphost %s\n",iphost);
           }    
           wordCount++;
           nextWordPtr = strtok(NULL,delims);
         }
    gir = GeoIP_record_by_name(gi, (const char *) iphost);

    if (gir != NULL) {
      ret = GeoIP_range_by_ip(gi, (const char *) iphost);
      time_zone = GeoIP_time_zone_by_country_and_region(gir->country_code, gir->region);
      printf("%s\t%s\t%s\t%s\t%s\t%s\t%f\t%f\t%d\t%d\t%s\t%s\t%s\n", iphost,
         _mk_NA(gir->country_code),
         _mk_NA(gir->region),
         _mk_NA(GeoIP_region_name_by_code(gir->country_code, gir->region)),
         _mk_NA(gir->city),
         _mk_NA(gir->postal_code),
         gir->latitude,
         gir->longitude,
         gir->metro_code,
         gir->area_code,
         _mk_NA(time_zone),
         ret[0],
         ret[1]);
      fprintf(out_f,"%s\t%s\t%s\t%s\t%s\t%s\t%f\t%f\t%d\t%d\t%s\t%s\t%s\n", iphost,
         _mk_NA(gir->country_code),
         _mk_NA(gir->region),
         _mk_NA(GeoIP_region_name_by_code(gir->country_code, gir->region)),
         _mk_NA(gir->city),
         _mk_NA(gir->postal_code),
         gir->latitude,
         gir->longitude,
         gir->metro_code,
         gir->area_code,
         _mk_NA(time_zone),
         ret[0],
         ret[1]);
      GeoIP_range_by_ip_delete(ret);
      GeoIPRecord_delete(gir);
    }
  }
  GeoIP_delete(gi);

  fclose(out_f);

  return 0; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:41:47.570

对于您想要的，更好的方法是[lexer](http://westes.github.io/flex/manual/)。如果您的最终目标很复杂，您可能还需要一个[解析器](http://www.gnu.org/software/bison/manual/html_node/index.html#Top)。

我在[这里](https://github.com/srathbun/example-parser)有一个示例词法分析器和解析器。它比你需要的更复杂。如果你想要一些简单的东西，[strtok](http://en.cppreference.com/w/c/string/byte/strtok)可以完成这项工作，但你会有一些令人讨厌的惊喜需要提防。除了您在此处介绍的简单案例之外，它也很难使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:36:39.657

是的，没有那么优雅，但您可以使用[strtok](http://pubs.opengroup.org/onlinepubs/009604599/functions/strtok.html)来完成工作。

# css - 总是级联 CSS 背景颜色

> ID：15507702
> 
> 赞同：1
> 
> 时间：2013-03-19T18:32:45.600
> 
> 标签：css, background-color

无法让背景颜色始终层叠：http: [//jsfiddle.net/yHgTt/](http://jsfiddle.net/yHgTt/)

```
<html>
  <head>
    <style>
      td { background-color: blue; } 
    </style>
  </head>
  <body>
    <div style="background-color: yellow">
      yellow
      <span>
        and yellow too
      </span>
    </div>
    <span style="background-color: yellow !important ">
      yellow
      <div>
        not yellow but expecting to be
      </div>
    </span>
    <table>
      <thead>
      </thead>
      <tbody>
        <tr style="background-color: yellow !important">
          <td>
            expecting to be yellow
          </td>
        </tr>
      </tbody>
    </table>
  </body>
</html> 
```

**编辑**

用例是使用 chrome 扩展突出显示第三方网站的部分内容。虽然我可以操作 html，但我根本不想这样做，以便突出显示/注释尽可能简单且无错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T18:40:04.833

`background-color`不会被继承！

> 背景属性不会被继承，但由于 'background-color' 上的初始 'transparent' 值，父框的背景默认会发光。

[http://www.w3.org/TR/CSS21/colors.html#background](http://www.w3.org/TR/CSS21/colors.html#background)

但是，没有背景颜色的嵌套元素可能会显示其后面元素的背景颜色。

所以对于你的情况：

*   第一个示例有效，因为内部跨度没有背景颜色，并且 div 的背景会发光。

*   第二个例子不起作用，因为只有`<span>`(inline element) 部分获得背景颜色，但不包裹嵌套的`<div>`(block element)。

*   第三个例子不起作用，因为它`<td>`有自己的背景颜色，因此没有任何东西可以透过

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:35:30.183

<span> 不能包含 <div>。浏览器很可能通过将 <div> 放在 <span> 之后为您“纠正”此问题，您的 CSS 规则将不适用。

如果您将 <span> 更改为 <div> 您的示例按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T18:43:00.773

你有几个问题。

1.  您在`<div>`标签内有一个`<span>`标签，这是不正确的。

2.  您的 CSS 是`td { background-color: #8AE; }`，但您将黄色背景颜色应用于`<tr>`标记，它是`<td>`.

我已将您的 CSS 更新为：

```
tr { background-color: #8AE; } 
```

和你的 HTML 到这个：

```
<body>
    <div style="background-color: yellow">
        yellow <span>and yellow too</span>
    </div>
    <div style="background-color: yellow !important ">
        yellow <span>not yellow but expecting to be</span>
    </div>
    <table>
      <thead>
      </thead>
      <tbody>
        <tr style="background-color: yellow !important">
          <td> expecting to be yellow </td>
        </tr>
      </tbody>
    </table>
</body> 
```

您可以在这里看到它按预期工作：http: [//jsfiddle.net/yHgTt/2/](http://jsfiddle.net/yHgTt/2/)

# jquery - 使用 Jquery BBQ 哈希后获取值

> ID：15507706
> 
> 赞同：0
> 
> 时间：2013-03-19T18:33:02.130
> 
> 标签：jquery, jquery-bbq

我正在使用 Jquery BBQ，因为我想在 url 中获取哈希后的值。所以我有：

```
 var url = $(this).attr('href');

            console.log(jQuery.deparam.fragment(url)); 
```

当我浏览日志时，我看到：

```
Object
131: undefined
__proto__: Object
__defineGetter__: function __defineGetter__() { [native code] } 
```

等等等等。

数字 131 是我想要的哈希后的值，我似乎无法理解它（我对 Jquery 很陌生）。那么我怎样才能得到这个值，在这种情况下是 131？这可能很容易......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:25:59.397

来自[jQuery BBQ 文档](http://benalman.com/code/projects/jquery-bbq/docs/files/jquery-ba-bbq-js.html)：

> *`jQuery.deparam.fragment( [ url ] [, coerce ] )`*
> 
> 从 URL 或当前 window.location 解析片段（哈希），将其反序列**化为 object**，可选择强制数字、布尔值、null 和未定义值。
> 
> **返回：** (Object) 一个表示反序列化的 params 字符串的对象。

因此，如果您只想将整个片段作为字符串，则可以使用：

> *`jQuery.param.fragment( [url] )`*
> 
> 从 URL 中检索片段（哈希），或者如果没有传递参数，则返回当前 window.location。
> 
> **返回：（**字符串）已解析的片段（哈希）字符串，删除了任何前导“#”。

# python - 用于url路由的python Django命名vs位置参数

> ID：15507709
> 
> 赞同：1
> 
> 时间：2013-03-19T18:33:06.973
> 
> 标签：python, django, url

我的应用程序中有以下用于 url 路由的内容：

网址.py

```
urlpatterns = patterns('rocflavors.views',
   url('^detail/(?P<content_type>[^/]+)/(?P<slug>[^/]+)/(?P<asset_id>\d{1,32})$', 'flavors_detail', name='flavors_detail'),
) 
```

视图.py

```
def flavors_detail(request, slug, asset_id, content_type, format="html"): 
```

我使用的参数似乎是命名参数。(content_type、slug、asset_id)。

Django/python 如何知道何时传递位置参数和关键字参数？

该`flavors_detail`函数接受 5 个参数，但在 url 中它们是无序的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:38:07.007

要回答您的问题，`flavor_detail`将接受四个参数（按顺序）和一个关键字参数。正则表达式 in`url`将按顺序传递它找到的匹配项，但由于您还为每个 arg 定义了一个关键字，它将改为传递一个`kwarg`字典。由于您保持变量名称一致，这`dict`将在正确的位置传递正确的参数（如果您使用了不同的变量名称，这将不起作用）。您可以通过简单地指定关键字参数来避免这种“魔术”，`flavors_detail`如下所述。

你`url`是一个定义它们的正则表达式：

```
 ?P<content_type> 
```

将产生`kwarg` `content_type`. 查看`re`python ( [docs](http://docs.python.org/2/library/re.html) ) 中的模块。

> `(?P<name>...)` 与正则括号类似，但组匹配的子字符串可通过符号组名在正则表达式的其余部分中访问。组名必须是有效的 Python 标识符，并且每个组名只能在正则表达式中定义一次。符号组也是一个编号组，就好像该组没有命名一样。所以下例中名为 id 的组也可以引用为编号组 1。

当您将变量定义为关键字 args`kwargs`时，您可以更改视图声明以接受 kwargs：

```
def flavors_detail(request, slug=slug, asset_id=asset_id, content_type=content_type, format="html"): 
```

但是，Python 也将接受您之前的定义（我的评论为时过早），只要您小心保留参数顺序！[这里](http://docs.python.org/2/reference/expressions.html#calls)有更多关于这是如何发生的信息- 引用

> 如果存在关键字参数，它们首先被转换为位置参数

# web - Apache“订单”指令的基本原理

> ID：15507714
> 
> 赞同：0
> 
> 时间：2013-03-19T18:33:15.987
> 
> 标签：web, apache, httpd.conf

听起来“命令拒绝，允许”和“命令允许，拒绝”之间的基本区别是前者是允许的（“允许”指令优先，默认允许任何人）而后者是禁止的（“拒绝”指令有优先级，默认情况下不允许使用任何指令）。

假设我理解正确，这是非常不直观的，我想知道 Order 指令为什么会这样工作。基本原理是什么？例如，这是某人对表达访问控制的好方法的想法吗？以不同的顺序处理请求在计算上是否有利？这更多是为了可扩展性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:43:26.147

如果您正在执行重要的访问控制，则有时两条规则会匹配相同的请求。当它们发生冲突时（即：一个说“拒绝”，另一个说“允许”），您需要某种方式来决定哪个优先。或者，会出现没有规则匹配的情况，您需要一个默认策略来涵盖这些情况。

在 Apache 中，它被称为`Order`，并且像它一样工作，主要是因为 Apache 决定如何处理访问控制。它处理它们的方式，规则分为“允许”规则和“拒绝”规则。当一个请求进来时，处理在概念上是这样发生的：

1.  如果顺序是， Apache 首先运行拒绝规则，如果顺序是`deny,allow`，则首先运行允许规则`allow,deny`。
2.  Apache 运行其他规则。
3.  最后一场比赛获胜。如果没有匹配项，则 中的最后一个操作`Order`是策略。

（这个过程显然有一些优化。假设在 中`allow,deny`，如果不匹配允许规则，Apache 甚至不会打扰拒绝规则，因为它已经拒绝了请求。同样，如果没有拒绝规则匹配在 中`deny,allow`，请求是允许的（因为没有任何东西可以阻止它）。但从概念上讲，您可以考虑运行两组规则。）

我想可以给每个规则一个优先级参数或其他东西，并让管理员决定给所有东西的优先级。不过，坦率地说，当您只想知道是允许还是拒绝某事时，那么麻烦就不值得了。由于通过给“允许”或“拒绝”规则一个根据处理顺序覆盖另一个规则的机会，这很容易完成，这就是他们所做的。但是不同的站点可能要求其他规则集优先，因此他们将其设置为可配置的。

# django - Django分页对表格数据进行分页

> ID：15507715
> 
> 赞同：2
> 
> 时间：2013-03-19T18:33:21.080
> 
> 标签：django, paginator

我是 django 的新手，我正在使用 django 分页在我的 html 页面中添加分页。我的问题是我想使用分页对不同的表行进行分页，但是当我为自动分页添加模板标签时，prev/next/和页面得到显示，但在选择下一页时，它被重定向到另一个页面（弹出分配错误之前引用的列表）。我希望下一个按钮显示下一组 20 个条目，而不是转到任何 html 页面。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T04:29:31.427

由于问题中提供的信息有限，我只能提供两个可能的错误原因：

1.  您的 urls.py 配置正在将页面发送到其他地方。
2.  您正在使用分页构建要在模板中呈现的列表。并且构造列表的逻辑可能存在于条件语句（if、try 等）中并且没有被执行。因此出现错误“分配前引用的列表”。

请分享更多信息，代码片段和错误日志会更好。

# java - 根据选择列表中的用户选择加载新的 JSP 页面

> ID：15507717
> 
> 赞同：0
> 
> 时间：2013-03-19T18:33:26.973
> 
> 标签：java, jsp, servlets

提前感谢您的帮助，希望在这里只是一个快速的问题。

我希望根据用户从选择列表中所做的选择链接到另一个页面。

例如，如果用户应该从列表中选择“Injection”，他将在单击时立即转发到“Injection”JSP 页面。在 JSP 中是否有任何与 .getSelectedIndex 等效的 jsp？刚开始，所以不太了解。

```
<%@page contentType="text/html" pageEncoding="UTF-8"%> 
```

```
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <%@include file ="headerJSP.jsp" %>

    <center>
    Please select an OWASP topic:
    <select id="OWASPTopicList">
        <option value="" selected>Choose a topic</option>
        <option value="injectionJSP.jsp">Injection</option>
        <option value="https://www.google.ie/">Cross-Site Scripting (XSS)</option>
        <option value="TopicThree">Broken Authentication and Session Management</option>
        <option value="TopicFour">Insecure Direct Object References</option>
        <option value="TopicFive">Cross Site Request Forgery (CSRF)</option>
        <option value="TopicSix">Security Misconfiguration</option>
        <option value="TopicSeven">Insecure Cryptographic Storage</option>
        <option value="TopicEight">Failure to Restrict URL Access</option>
        <option value="TopicNine">Insufficient Transport Layer Protection</option>
        <option value="TopicTen">Unvalidated Redirects and Forwards</option>
    </select>
    </center>

    <script>
        $(function(){
        // bind change event to select
        $('#OWASPTopicList').bind('change', function () {
        var url = $(this).val(); // get selected value
        if (url) // require a URL
              { 
              window.location = url; // redirect
              }
        return false;
         });
       });
   </script>

    <%@ include file="footerJSP.jsp" %> 
```

编辑：感谢您的帮助，使用了建议的代码，但它不起作用。编辑了我的代码以反映其当前状态，有什么想法有什么问题吗？页面编译并运行良好，但选择“注入”或“跨站点脚本 (XSS)”不会按需要重定向（这是我的两个测试选项，主要目标是所有选项都重定向到其他 jsp 页面）。

编辑 2：完美的 Hadrik，现在正在工作，非常感谢：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:45:06.143

```
<script>
    $(function(){
      // bind change event to select
      $('#dynamic_select').bind('change', function () {
          var url = $(this).val(); // get selected value
          if (url) { // require a URL
              window.location = url; // redirect
          }
          return false;
      });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T07:42:13.357

您需要在代码中包含`js`for `jQuery`。在这里，我的.So`jquery.min.js`下有`js`目录下，它是这样的`webapps`

```
<script type="text/javascript" src="js/jquery.min.js"></script> 
```

然后使用绑定`id`到事件`select``onchange`

```
<script type="text/javascript">
        $(function(){
           $('#OWASPTopicList').bind('change', function () {
             var url = $(this).val(); // get selected value
             alert(url); // This will help to check whether JS is getting executed.
             if (url) { // require a URL
                window.location = url; // redirect
             }
             return false;
           });
       });
</script> 
```

# java - 不使用数据库存储表数据的最佳方式？

> ID：15507720
> 
> 赞同：1
> 
> 时间：2013-03-19T18:33:33.513
> 
> 标签：java, android, data-structures

我需要存储来自 parsed 的数据`XML`，我可以处理的解析没有问题。问题是我收到一个表数据，基本上每次列名、列号和它自己的数据都不同。现在我不想使用`SQLite`数据库，因为我的条目数量很少，而且我认为它不适合这种情况。我什至认为我不能使用它，因为我必须为我将收到的每个数据集创建一个新表。现在更清楚的是这里有一些例子：

```
 <Details1_Collection>
    <Details1 ProductName="Bicycle" Units="2341" DefectedUnits="125" />
    <Details1 ProductName="Television" Units="3154" DefectedUnits="75" />
    <Details1 ProductName="Keyboard" Units="2413" DefectedUnits="12" />
    ...
  </Details1_Collection> 
```

或另一个`XML`：

```
 <Details_Collection>
    <Details HireDate="2003-02-15T00:00:00" JobTitle="Chief Executive Officer"  BirthDate="1963-03-02T00:00:00" />
    <Details HireDate="2002-03-03T00:00:00" JobTitle="Vice President of Engineering" BirthDate="1965-09-01T00:00:00" />
    <Details HireDate="2001-12-12T00:00:00" JobTitle="Engineering Manager" BirthDate="1968-12- 13T00:00:00" />
    ...
 <Details_Collection> 
```

现在您可以注意到 XML 标记是不同的：`Details1_Collection`and `Details_Collection` , `Details1`and `Details`and 我几乎每次都会收到一个新的标记集。但这对我来说不是问题，因为我会在更早的调用服务器时收到它们，所以我知道应该解析哪些标签。我不需要存储属性和名称，因为我也已经有了这些。我只需要存储值。

**问题：**

我应该如何存储基本上是表数据但每次都是具有不同列名和编号的不同表的属性数据？我宁愿不将这些数据作为`String/Dom`其父对象内的元素存储，而是将其解析为可以在 UI 线程上轻松访问的一些 java 数据结构。

**简而言之：**

这些数据是更大对象的一部分，我的目标是将其解析为某种数据结构并将其作为父类的一部分附加。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:44:26.777

我偶然发现了以下论坛帖子：

[http://www.javaprogrammingforums.com/java-programming-tutorials/696-multi-dimension-arraylist-example.html](http://www.javaprogrammingforums.com/java-programming-tutorials/696-multi-dimension-arraylist-example.html)

ArrayLists有一个ArrayList的实现，代码如下：

```
import java.util.ArrayList;

public class ArrayList2d<Type>
{
ArrayList<ArrayList<Type>>  array;

public ArrayList2d()
{
    array = new ArrayList<ArrayList<Type>>();
}

/**
 * ensures a minimum capacity of num rows. Note that this does not guarantee
 * that there are that many rows.
 * 
 * @param num
 */
public void ensureCapacity(int num)
{
    array.ensureCapacity(num);
}

/**
 * Ensures that the given row has at least the given capacity. Note that
 * this method will also ensure that getNumRows() >= row
 * 
 * @param row
 * @param num
 */
public void ensureCapacity(int row, int num)
{
    ensureCapacity(row);
    while (row < getNumRows())
    {
        array.add(new ArrayList<Type>());
    }
    array.get(row).ensureCapacity(num);
}

/**
 * Adds an item at the end of the specified row. This will guarantee that at least row rows exist.
 */
public void Add(Type data, int row)
{
    ensureCapacity(row);
    while(row >= getNumRows())
    {
        array.add(new ArrayList<Type>());
    }
    array.get(row).add(data);
}

public Type get(int row, int col)
{
    return array.get(row).get(col);
}

public void set(int row, int col, Type data)
{
    array.get(row).set(col,data);
}

public void remove(int row, int col)
{
    array.get(row).remove(col);
}

public boolean contains(Type data)
{
    for (int i = 0; i < array.size(); i++)
    {
        if (array.get(i).contains(data))
        {
            return true;
        }
    }
    return false;
}

public int getNumRows()
{
    return array.size();
}

public int getNumCols(int row)
{
    return array.get(row).size();
}
} 
```

这是我目前发现的存储我想要存储的数据的最佳方式。Java 专家，你怎么看？

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:52:27.777

您是否有不能执行典型的 Java 序列化的原因？如，创建代表您的数据的类，让它们实现，然后使用s?`Serializable`读取整个对象图并将其写入文件？`Object(Input|Output)Stream`

请记住，这仅在您的整个对象图适合内存时才有效。

# nginx - 如何使用 Nginx 通过文件 RIFF 标头设置 MIME？

> ID：15507723
> 
> 赞同：3
> 
> 时间：2013-03-19T18:33:44.103
> 
> 标签：nginx

我的文件以不带扩展名的哈希名称保存。但我确定它是 RIFF 文件，如 WAV、MP3。如何使用 nginx 添加 MIME 取决于它的 RIFF 标头？

编辑：大部分文件是 mp3 格式，所以我使用下面的位置块。

```
config
location /audio/ {
     #default_type "audio/mpeg";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T13:48:34.023

> 如何添加 MIME 取决于使用 nginx 的 RIFF 标头？

你不能。Nginx 不支持检查文件，然后根据其内容发送适当的标头。

但是，您可以执行以下几个选项：

1) 将请求发送到您的网络服务器，检查代码中的文件，然后使用将[X-Accel 标](http://wiki.nginx.org/XSendfile)头发送到 nginx`header("X-Accel-Redirect: ".$filenameToProxy);`

这将使 nginx 为文件提供服务，只需少量处理时间来检查文件。

2) 在文件的 URL 中保留扩展名，即使它存储时没有扩展名。当您提供指向文件的链接时，您应该保留附加的扩展名，因为这允许用户查看将要提供的文件类型，并且它还允许 nginx 提供适当的 mime 类型。（我想虽然我还在测试这个）

```
location ~* /audio/(.*)(wav|mp3|avi|ani) {
    add_header Content-Type $content_type
    try_files  /audio/$1
} 
```

3）只需为所有文件保留扩展名。严重地。为什么要去掉文件的扩展名？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T13:33:48.183

RIFF 是一种 WAV 文件，因此您应该能够使用：

```
wav audio/wav
wav audio/x-wav 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T15:26:57.247

下面的呢？它不会产生预期的效果吗？

```
location /audio/ {
    default_type audio/mpeg;
} 
```

还是以下？

```
location /audio/ {
    default_type audio/wav;
} 
```

# actionscript-3 - 从由多个链接触发的 htmlloader 对象内部运行 AS3 函数

> ID：15507726
> 
> 赞同：0
> 
> 时间：2013-03-19T18:33:53.887
> 
> 标签：actionscript-3, air

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T08:19:14.377

嗨，您可以使用`LocationChangeEvent`JS->AS3 进行相反的“对话”，这样您就可以准备链接，从而提供使用 JSON 传递的大量参数。以下是我的程序的摘录，它在`StageWebView`(`HTMLLoader`具有相同的事件) 中呈现长列表并返回单击事件以及有关它的一些详细信息：

```
webView.addEventListener(LocationChangeEvent.LOCATION_CHANGE, onWebLocationUpdate, false, 0, true);
webView.addEventListener(LocationChangeEvent.LOCATION_CHANGING, onWebLocationUpdate, false, 0, true);

protected function onWebLocationUpdate(e:LocationChangeEvent):void
{
   trace(e);
    //JS->AS
    if (e.location.indexOf("message://") != -1)
    {
        var jsonString:String = e.location.substr("message://".length);
        var myObject:Object = JSON.parse( jsonString );
        for (var name:String in myObject)
        {
            trace(name + ":" + myObject[name]);
        }
        e.preventDefault();
    }
} 
```

JS

```
jQuery(document).ready(function() {
    // do something here
    //alert("Ready");
    $(".rowItem").click(function(e)
    {
        $(this).toggleClass("rowItemSelected");
        $(this).bridgeSend($(this).attr("id"),$(this).hasClass("rowItemSelected"));
    });
});

(function( $ ){
    $.fn.bridgeSend = function(id, selected)
    {
        var method = "select";
        var json = "{\"item\":{\"selected\":"+selected+",\"name\":\""+id+"\"},\"method\":\""+method+"\"}";
        window.location = "message://"+json;
    };
})( jQuery ); 
```

HTML

```
 <div class="rowItem" id="entry2">
        <div class="top">
            <div class="icon"><img src="css/clock.png" /></div>
            <div class="date"><h3>Fri, 04-09-2010</h3></div>
        </div><!-- end of the top -->
        <div class="desc">
            <p><strong>Title</strong></p>
            <p>The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English.</p>
        </div><!-- end of the desc -->
        <div class="times">
            <div class="col1">09:00</div>
            <div class="col2">09:30</div>
            <div class="col3">0.50</div>
        </div>
    </div><!-- end of the rowItem --> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-18T17:38:32.830

# javascript - Safari 不像其他浏览器那样对对象数组进行排序

> ID：15507729
> 
> 赞同：14
> 
> 时间：2013-03-19T18:33:58.940
> 
> 标签：javascript, jquery, arrays, object, safari

```
var myArray = [{date:"2013.03.01"},{date:"2013.03.08"},{date:"2013.03.19"}]; 
```

我试过：

```
function(a,b){
  return b.date > a.date;
} 
```

和

```
function(a,b){
  return b.date - a.date;
} 
```

**Chrome 和 Firefox**中的 console.log给了我想要的输出：

```
"2013.03.19", "2013.03.08", "2013.03.01" 
```

但**Safari**给出了原始排序：

```
"2013.03.01", "2013.03.08", "2013.03.19" 
```

为什么？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-19T18:43:38.543

JavaScript 中的排序函数应该返回一个实数——不是真或假，也不是字符串或日期。该数字是正数、负数还是零都会影响排序结果。

试试这个排序功能（它也可以正确地以反向字母顺序对*任何字符串进行排序）：*

```
myArray.sort(function(a,b){
  return (b.date > a.date) ? 1 : (b.date < a.date) ? -1 : 0;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T18:43:39.597

`"2013.03.01"`不是日期。这是一个字符串。

为了正确按日期排序，您需要将它们转换为日期（时间戳）。

```
var myArray = [{date:"2013.03.01"},{date:"2013.03.08"},{date:"2013.03.19"}];

myArray.sort(function(a,b){
    return Date.parse(b.date) - Date.parse(a.date);
}); 
```

您也可以使用直接字符串比较对它们进行排序：

```
myArray.sort(function(a,b){
    return b.date.localeCompare(a.date);
}); 
```

# scheme - 仅提取列表中的数字

> ID：15507732
> 
> 赞同：2
> 
> 时间：2013-03-19T18:34:04.023
> 
> 标签：scheme, racket

有没有办法只提取列表中的数字？我正在使用初学者语言包，所以我不能使用过滤器，这很糟糕。

（列出 1 2 bd 3 5）=> 1 2 3 5 等我想将其用作我的辅助函数的一部分，但我无法弄清楚！

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T19:37:05.157

理想情况下，这个问题应该使用[`filter`](http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28lib._racket%2Fprivate%2Flist..rkt%29._filter%29%29)高阶过程来解决，如下所示：

```
(filter number? '(a 1 2 b d 3 5))
=> '(1 2 3 5) 
```

...但是因为这看起来像一个家庭作业，我会给你一些关于如何手动解决问题的提示，只需填写空白：

```
(define (only-numbers lst)
  (cond (<???>                        ; is the list empty?
         <???>)                       ; return the em´pty list
        (<???>                        ; is the 1st element in the list a number?
         (cons <???>                  ; then cons the first element
               (only-numbers <???>))) ; and advance the recursion
        (else                         ; otherwise
         (only-numbers <???>))))      ; simply advance the recursion 
```

请注意，此解决方案遵循众所周知的模板，一种用于递归处理列表并反过来创建新列表作为输出的排序方法*。*不要忘记测试您的程序：

```
(only-numbers '(a 1 2 b d 3 5))
=> '(1 2 3 5)

(only-numbers '(1 2 3 4 5))
=> '(1 2 3 5)

(only-numbers '(a b c d e))
=> '() 
```

# javascript - 从 Leaflet.js 地图添加/删除 L.control

> ID：15507737
> 
> 赞同：4
> 
> 时间：2013-03-19T18:34:19.697
> 
> 标签：javascript, jquery, leaflet

我有一张基于四个单选按钮更改图块的地图。我需要在您滚动图块时出现的弹出窗口，以便随着不同地图图层的变化而变化。我已经让它出现了，但是当我切换图层时，地图只会添加另一个弹出窗口。我尝试使用 control.removeFrom(map) 但它似乎不起作用。我想我的逻辑可能在某个地方搞砸了。这是 if 语句之一：

```
if (two == true && black == true) { 
                function blkNineStyle(feature) {
                    return {
                    fillColor: getColor(feature.properties.pctBlack9000),
                    weight: 2,
                    opacity: 1,
                    color: '#666',
                    dashArray: '2',
                    fillOpacity: 0.9
                    };
                }
                                    //Tried to us this to take off the control.
                info.removeFrom(map);
                map.removeLayer(geojson);
                geojson = L.geoJson(tracts, {style: blkNineStyle, onEachFeature: onEachFeature}).addTo(map);

                var info = L.control();

                info.onAdd = function (map) {
                    this._div = L.DomUtil.create('div', 'info');
                    this.update();
                    return this._div;
                };

                info.update = function (props) {
                    this._div.innerHTML = '<h4>Percent White population change</h4>' + (props ? '<b>' + props.name + '</b><br />' + props.pctBlack9000 + '%' : 'Hover over a tract');
                };

                info.addTo(map);
            } 
```

您可以在此处查看（损坏的）地图[。](http://media.hamptonroads.com/media/content/pilotonline/leaflet/Portsmouthdiversity/index.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-13T20:07:04.080

我自己也有同样的问题，我刚刚解决了。

我必须在全局环境中定义一个空变量（在您使用的任何函数之外）。这不是一个完整的脚本或任何东西，但我描述的一般想法如下：

```
 var info;  // CREATING INFO VARIABLE IN GLOBAL ENVIRONMENT
    function makeMap() {
    ..... geojsons, styles, other stuff ....

    // REMOVING PREVIOUS INFO BOX
    if (info != undefined) {
    info.removeFrom(map)
    }

    // making current layer's info box
    info = L.control();

    info.onAdd = function (map) {
    this._div = L.DomUtil.create('div', 'info');
    this.update();
    return this._div;
    };

    info.update = function (props) {
    this._div.innerHTML = '<h4>Data by Zip Code</h4>' + (props ?
    '<b>Zip Code:  ' + props.id + '</b><br />Value:  ' + matchKey(props.id, meanById)
    : 'Hover over a zip code');
    };

    info.addTo(map);

    ..... other stuff again ......

    } // end function 
```

我对 Leaflet 和 javascript 都很陌生，所以我不得不说我不确定在你提供的地图链接上发布的代码中的 info.removeFrom(map) 行的位置，但你在'info.removeFrom(map)' 的正确轨道。

我可以通过在这里摆弄来解决动态图例和信息框的问题：http: [//jsfiddle.net/opensas/TnX96/](http://jsfiddle.net/opensas/TnX96/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-19T12:56:14.950

我相信你想删除控件，就像你添加它一样。

在这种情况下，传单提供了**`remove()`**类似于方法的直接**`addTo(map)`**方法。

[![在此处输入图像描述](../Images/1f0c28af7d87378e7152029387716840.png)](https://i.stack.imgur.com/7Iccw.png)

**例子-**

每当您想删除图例控件时，请使用以下代码-

**创建控制-**

```
var legendControl = L.control({position: 'bottomleft'});
    legendControl.addTo(mymap); 
```

**删除控制-**

```
legendControl.remove(); 
```

有关详细信息[，请参阅/单击此处...](http://leafletjs.com/reference-1.2.0.html#control)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-08T16:45:59.703

Despite the fact that this question was asked a year ago, I recently had to come up with a solution to a similar problem myself so feel as if I should share in case anybody else ends up here like I did.

The `L.control()` object in Leaflet isn't technically a layer, and this is why trying to add and remove it some times doesn't work in the same way as for layers.

[http://leafletjs.com/reference.html#icontrol](http://leafletjs.com/reference.html#icontrol)

As the `L.control` constructor requires you only to "create all the neccessary DOM elements for the control", the HTML content of the `div` itself can be updated and deleted as and when required. Thus, to make a control feature appear and disappear from the map, and instead of adding and removing the `L.control` object, just adjust the HTML contents of the `div` contained by it. An empty `div` would result in no control feature being shown by the map.

Thus the above snippet would become:

```
//construct control, initialize div

info = L.control();
info.onAdd = function (map) {
this._div = L.DomUtil.create('div', 'info');
this.update();
return this._div;
};
if (two == true && black == true) { 
            function blkNineStyle(feature) {
                return {
                fillColor: getColor(feature.properties.pctBlack9000),
                weight: 2,
                opacity: 1,
                color: '#666',
                dashArray: '2',
                fillOpacity: 0.9
                };
            }

//set div content to empty string; makes control disappear from map

            info.getContainer().innerHTML='';

            map.removeLayer(geojson);
            geojson = L.geoJson(tracts, {style: blkNineStyle, onEachFeature: onEachFeature}).addTo(map);

//update content of control to make the control reappear

            info.update = function (props) {
                this._div.innerHTML = '<h4>Percent White population change</h4>' + (props ? '<b>' + props.name + '</b><br />' + props.pctBlack9000 + '%' : 'Hover over a tract');
            };

        }

 //other cases...
if (two == false && black == true) { 

//delete and update control where necessary

    info.getContainer().innerHTML=''; 
```

# php - 如何将作为 MySQL 查询结果返回的列名的所有行存储在字符串数组中

> ID：15507743
> 
> 赞同：0
> 
> 时间：2013-03-19T18:34:38.980
> 
> 标签：php, mysql, arrays, string

我想将作为 MySQL 查询结果返回的列名的所有行存储在字符串数组中。我是 PHP 新手。我已经检索了行，但是如何将列的所有行存储在数组中？

我的意思是如何迭代行的计数器并将列存储在数组中？还是有任何直接的函数/方法调用？请参阅下面的代码及其在数组中存储的可能方式：

```
$dbhost = 'localhost';
$dbuser = 'user';
$dbpass = 'password';

$conn = mysql_connect($dbhost, $dbuser, $dbpass) or die('Error connecting to mysql');
$dbname = 'users';
mysql_select_db($dbname);

$result = mysql_query("SELECT users.email FROM users");

//  AND THEN FINALLY STORING IN A STRING ARRAY:

$array = $result;

//  OR SOMETHING LIKE:

Store($array, $result);

//  OR SOMETHING LIKE:

for(int i = 0; i < $result.Rows.Count; i++)
{
    if (null != $row[0])
    {
        $array[i] = $result[i];
    }
}

//  OR SOMETHING LIKE:

while($null != result.read())
{
    $array.Add($result.Read());
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:38:44.433

这是你可以做到的

```
$rec = mysqli_query("SELECT users.email FROM users");
$data   =   array();
$i=0;
while($row = mysql_fetch_assoc($rec)){
    $data[$i]['column1']    =   $row['column1_from_table'];
    $data[$i]['column2']    =   $row['column2_from_table'];
    $data[$i]['column3']    =   $row['column3_from_table'];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T18:38:56.653

[MySQL 获取数组](http://php.net/manual/en/function.mysql-fetch-array.php)

```
$result = mysql_query("SELECT users.email FROM users");

while($row = mysql_fetch_array($result)){
    $array[] = $row;
} 
```

这将返回一个关联数组的数组。将`$row`包含列名的索引以及整数索引。

例如：

```
echo $row['email'];
//or
echo $row[0]; 
```

最后，您可以通过以下方式获得第一行：

```
$array[0]['email']; //or $array[0][0]; 
```

**注意：**不要使用 MySQL_*，因为它在 PHP 5.5 中已被弃用。请改用 MySQLi_* 或 PDO。

# xcode - 运行动作失败

> ID：15507744
> 
> 赞同：0
> 
> 时间：2013-03-19T18:34:40.883
> 
> 标签：xcode, cocos2d-iphone

所以在我的游戏中，我想要一个简单的逐帧动画。当我在 init 函数中使用它时，动画效果很好，但是一旦我停止动作并尝试重新启动它，什么都没有发生。

这是在初始化

```
[[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:
         @"Dubstep Dan_default.plist"];
        CCSpriteBatchNode *spriteSheet = [CCSpriteBatchNode
                                          batchNodeWithFile:@"Dubstep Dan_default.png"];
        [self addChild:spriteSheet];

        walkAnimFrames = [NSMutableArray array];
        for(int i = 1; i <= 8; ++i) {
            [walkAnimFrames addObject:
             [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:
              [NSString stringWithFormat:@"1-%d.png", i]]];
        }
        walkAnim = [CCAnimation animationWithFrames:walkAnimFrames delay:0.1f];

        self.character = [CCSprite spriteWithSpriteFrameName:@"1-1.png"];
        _character.position = ccp(80, 260);
        self.walkAction = [CCRepeatForever actionWithAction:
                           [CCAnimate actionWithAnimation:walkAnim restoreOriginalFrame:NO]];
       // self.walkAction = [CCAnimate actionWithAnimation:walkAnim];
        [_character runAction:_walkAction];
        [_walkAction retain]; 
        [spriteSheet addChild:_character]; 
```

这是我的游戏勾选功能

```
if(gp.isControlling && (gp.controlQuadrant == 0 || gp.controlQuadrant == 1) && (_character.position.x < 250))
    {

        if([_walkAction isDone]) {
            [_character runAction:_walkAction];
            NSLog(@"TEST"); 
        }
        targetX = 7;
        _character.scale = 1;
    }
else {
        [_character stopAction:_walkAction];
        targetX = 0; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T00:14:47.583

我能够用一个简单的布尔值解决这个问题

```
 if(!_moving) {
            [_character runAction:_walkAction];
            _moving = TRUE;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:22:55.837

Cocos2d 动作不可重入（可重用）。跑一次就忘了。需要再次运行吗？创建一个新动作。

已经尝试过解决这个问题，但我通常建议不要这样做，因为根据被重用的操作，通过再次调用它们的 init 方法来重用操作可能会泄漏内存。另外，在对象上再次调用 init 是一种不好的风格。

# maven - javax.el.E LContext 添加 FaceletContext jsf maven 构建时无法解析错误

> ID：15507751
> 
> 赞同：1
> 
> 时间：2013-03-19T18:34:51.293
> 
> 标签：maven, jsf-2, build, compiler-errors

当我在托管 bean 的一种方法中添加这些行时出现此错误：我修复了项目的导入但没有结果我使用 maven spring jsf 和 hibernate

这是错误：

```
Unresolved compilation problem: The type javax.el.ELContext cannot be resolved. It is indirectly referenced from required .class files 
```

这里是导致错误的行：

```
FaceletContext faceletContext = (FaceletContext) FacesContext.getCurrentInstance().getAttributes().get(FaceletContext.FACELET_CONTEXT_KEY);
    String formId = (String) faceletContext.getAttribute("hiddenIds"); 
```

你有什么主意吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-19T07:28:13.243

我也遇到了同样的错误，并通过添加包含 javax.el.E​​LContext 类的 el-api-2.2 jar 解决了这个问题。上述错误的原因是 javax.faces.view.facelets.FaceletContext 类在内部调用了 javax.el.E​​LContext 类。

# android - Android 位图看不到黑色（astgmatic ？）

> ID：15507752
> 
> 赞同：1
> 
> 时间：2013-03-19T18:34:51.453
> 
> 标签：android, colors, bitmap

我有一个`bitmap`，只包含一个黑色像素。我拿`bitmap`文件和双循环（如矩阵）控制每个像素的颜色。如果是黑色（常量值：-16777216 (0xff000000)），则将它们放入一个`array`of 中`integers`，值为 1，否则为 0

问题是Android显然模糊了图像。因为黑色像素周围的 8 个像素，即使它们是白色的，它们也将它们视为白色以外的像素（我不知道确切是什么颜色），而中心像素则不会将其视为黑色，而是另一种颜色.. 然后到所有意图和目的都是散光......关于如何解决的想法？我必须计算图片中的黑色像素...

放置我使用的代码

```
 public int[][] DisegnaImpronta(Bitmap immagine) {

            int[][] matrice;

            matrice = new int[immagine.getWidth()][immagine.getHeight()];

            for(int i = 0; i <immagine.getWidth() ; i++) {
                    for(int j = 0; j < immagine.getHeight() ; j++) {

                            int colore = immagine.getPixel(i, j);

                            /* bianco se il valore è 1, nero se il valore è 0 */
                            if(colore!=-1)System.out.println("coordinate: "+ i + " " + j + " c: " +colore); //qui mi notifica quando il colore è diverso da bianco

                            if(colore==-16777216){
                                    System.out.println("Un punto nero...");
                                    matrice[i][j]=1;

                            }else{
                                    matrice[i][j]=0;
                            }

                    }
            } 
```

对不起英语

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:44:49.537

您的`else`子句为空：`else {}`

This means your code always executes the line `matrix [i] [j] = 0;`. So you set all your pixels to 0.

# cocoa - 动画支持图层的视图时缩放图层内容

> ID：15507753
> 
> 赞同：5
> 
> 时间：2013-03-19T18:34:51.980
> 
> 标签：cocoa, animation, core-animation, autolayout, appkit

我正在为包含多个子视图的图层支持视图制作动画。一切都使用自动布局进行布局。目前，当我为视图设置动画时，子视图不会随之缩放：

![动画片](../Images/d19ee60dfa03584e3a7a255f306f1e1e.png)

我希望以最终大小将整个事物绘制一次，然后在动画时进行缩放。和属性似乎是我正在寻找的`layerContentsPlacement`，`layerContentsRedrawPolicy`但改变它们似乎没有任何效果。

这是我如何制作动画的基本流程：

```
// Add itemView to canvas
NSView *itemView = // ...
itemView.layerContentsPlacement = NSViewLayerContentsPlacementScaleProportionallyToFit;
itemView.layerContentsRedrawPolicy = NSViewLayerContentsRedrawBeforeViewResize;
[parentView addSubview:itemView];

// Add constraints for the final itemView frame ...

// Layout at final state
[parentView layoutSubtreeIfNeeded];

// Set initial animation state
itemView.alphaValue = 0.0f;
itemView.frame = // centered zero'ed frame

// Set final animation state
[NSAnimationContext runAnimationGroup:^(NSAnimationContext *context) {
  context.duration = 0.25f;
  context.allowsImplicitAnimation = YES;

  itemView.alphaValue = 1.0f;
  [parentView layoutSubtreeIfNeeded];
} completionHandler:nil]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T16:50:28.860

感谢大卫的评论，我转而在视图层上使用变换。

基本思想是像往常一样创建和布局视图，然后创建一些 CA 动画并将其添加到视图层。

```
// Add item view to canvas
NSView *itemView = // ...
[parentView addSubview:itemView];

// Add constraints for the final item view positioning

// Layout at final state
[parentView layoutSubtreeIfNeeded];

// Animate
CABasicAnimation *animation = [CABasicAnimation animation];
CATransform3D transform = CATransform3DMakeScale(0.5f, 0.5f, 0.5f);
animation.fromValue = [NSValue valueWithCATransform3D:transform];
animation.duration = 1.0f;
[itemView.layer addAnimation:animation forKey:@"transform"];

// create any other animations... 
```

# html - CSS Margin 和 Padding 不适用于 IMG 元素，除非它们是 display:block

> ID：15507776
> 
> 赞同：0
> 
> 时间：2013-03-19T18:36:08.517
> 
> 标签：html, css

为什么填充和边距在块 img 上有效，但在内联无效。

我在 CSS 中的图像有布局问题。我想要每个图像之间没有像素（没有边距，没有填充），并且我想要一行 4 张图像。

填充或边距（设置为 0）的唯一方法是如果我使用 display:block 作为图像样式的一部分。一旦我使用内联，每个图像之间就有几个像素，并且填充和边距被忽略。

无论如何，我可以在内联图像中获得自己的填充和边距？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:07:13.717

如果你想在一行中有更多图像，`display: block`你可以使用。`float:left`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:42:57.950

我发现将所有内容包装`img`为`div`一种非常有用的做法。

```
<div class="image">
    <img src="/path/to/image.jpg">
</div> 
```

使用图像添加任何其他操作很有用。例如，您想裁剪所有这些以适合 400x200 块。你只需这样做：

```
<style>
    .-crop {
        overflow: hidden;
    }
    .-crop img {
        min-width: inherit;
        min-height: inherit;
    }
    .image {
        width: 400px;
        height: 200px;
        min-width: 400px;
        min-height: 200px;
    }
</style>

<div class="image -crop">
    <img src="/path/to/image1.jpg">
</div>
<div class="image -crop">
    <img src="/path/to/image2.jpg">
</div> 
```

包装图像时，更容易解决一些任务。您需要在悬停时使图像更大吗？它们被包裹，你改变`img`大小，但不是`div`，所以你的布局是好的。您需要图像在点击时以 20px 向上滑动吗？同样的故事。您希望它们位于某个 400x200 区域的中心吗？它们被包装，添加`vertical-align`和`text-align`到`div`。

当然，在一般情况下就`img`可以了。但是当突然你必须添加一些额外的动作时——你需要包装它们。所以我每次都把它们包起来，即使现在不需要。只为未来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T19:15:02.867

因此，您希望图像内联显示，但充当块？

你试过`display: inline-block;`吗？

# html - 带图像的三分之一/二分之一布局

> ID：15507780
> 
> 赞同：0
> 
> 时间：2013-03-19T18:36:33.690
> 
> 标签：html, css, image, zurb-foundation

我是这个新手 - 所以这是我的问题：

我正在尝试使用基础 4.0.8 制作三分之一/三分之二的布局。（整个事情需要响应）在移动设备上应该是这样的：1 张图片 - 2 张小图片 - 1 张图片。

桌面布局：

![](../Images/25d767691f69da4cd17a76994e0a8d2d.png)

到目前为止，我的方法是：使用正确的网格设置制作 div -> 插入第二个 div，其中包含大 12 网格，其中是图像。

到目前为止一切都很好，但现在我对图像感到困惑：大 4 div 的高度与另一个不同。:(

html:

```
<div class="row">
  <div class="large-8 small-12 columns">
      <div class="large-12">
          <a href="#"><img src="http://placehold.it/800x300"></a>
      </div>
  </div>
  <div class="large-4 small-6 columns">
      <div class="large-12">
          <a href="#"><img src="http://placehold.it/800x300"></a>
      </div>
  </div>
  <div class="large-4 small-6 columns">
      <div class="large-12">
          <a href="#"><img src="http://placehold.it/800x300"></a>
      </div>
  </div>
  <div class="large-8 small-12 columns">
      <div class="large-12">
          <a href="#"><img src="http://placehold.it/800x300"></a>
      </div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T02:15:10.467

这是因为每个网格元素的实际内容控制了高度和宽度（内容区域）。看看我的意思是`img`用 a 替换你的每个元素`panel`并写一些不同的文本。您会看到每个面板的高度不同。这是一个例子：

```
<div class="row">
      <div class="large-8 small-12 columns">
          <div class="large-12">
              <div class="panel">
                  <p>Chocolate cake jujubes donut pudding. Jujubes gummies soufflé topping chupa chups chocolate cake. Halvah carrot cake icing dragée. Donut caramels lemon drops cupcake. Pudding sugar plum lemon drops sesame snaps icing dessert. Tootsie roll caramels chupa chups marzipan sweet roll wafer. Jelly-o icing lemon drops cake chupa chups marshmallow bear claw. Oat cake bonbon tiramisu bonbon. Chocolate bar tart ice cream macaroon cake dragée gingerbread.</p>              
                </div>
          </div>
      </div>
      <div class="large-4 small-6 columns">
          <div class="large-12">
              <div class="panel">
              <p>Caramels tiramisu liquorice. Chocolate faworki brownie dragée wafer. Lemon drops tart bear claw wafer. Tootsie roll candy canes faworki lollipop bear claw bonbon sesame snaps jelly-o.  Danish sesame snaps toffee lollipop tootsie roll. Macaroon lollipop jelly-o pie gummi bears danish gummies jelly-o gingerbread. Pie croissant jujubes lollipop fruitcake icing. Fruitcake sweet roll cotton candy halvah gummi bears oat cake powder. Danish pudding toffee wypas bonbon macaroon lollipop faworki tiramisu.</p>
                </div>
          </div>
      </div>
      <div class="large-4 small-6 columns">
          <div class="large-12">
              <div class="panel">
              <p>Biscuit marshmallow wypas tootsie roll tart candy icing. Halvah faworki danish brownie chocolate cake candy. Carrot cake cotton candy donut lollipop pie oat cake. Sweet toffee pudding soufflé marshmallow donut chocolate bar. Gummi bears gummi bears brownie halvah cookie liquorice biscuit tart. Halvah cupcake tiramisu jelly beans apple pie liquorice fruitcake jelly beans. </p>
                </div>
          </div>
      </div>
      <div class="large-8 small-12 columns">
          <div class="large-12">
              <div class="panel">
              <p>Sesame snaps marzipan sugar plum wypas soufflé danish. Candy jelly-o topping biscuit sesame snaps gingerbread chocolate soufflé chupa chups. Jelly marshmallow wypas apple pie candy canes halvah cake. Ice cream biscuit icing jujubes lemon drops. Marshmallow biscuit cotton candy muffin. Bear claw pudding cookie. Soufflé jujubes gummi bears jujubes muffin. Wafer croissant marzipan apple pie tootsie roll jelly beans tootsie roll pudding.</p>
                </div>
          </div>
      </div>
    </div> 
```

现在，如果您想为所有图像具有相同的高度，那么您可以为每个 img 添加一个类，`grid-img`比如这样`<img src="http://placehold.it/800x300" class="grid-img">`，然后将其定义为：

```
.grid-img {
    height: 150px;
    width: 100%;
} 
```

请注意，图像可能会变形，看起来不太好，因为它们将被拉伸到网格的最大宽度（例如 8 列）和高度（例如 150 像素）。这是图像大小调整工具派上用场的地方。

# php - .setInterval 函数将不同的文本文件请求到相同的内容中

> ID：15507782
> 
> 赞同：0
> 
> 时间：2013-03-19T18:36:43.190
> 
> 标签：php, javascript, setinterval

```
<div id="content">
<br> 
<font align="center" color="white" size="3"><b>
<?php
    $myFile = "txt1.txt";
    $fh = fopen($myFile, 'r');
    $theData = fgets($fh);
    fclose($fh);
    echo $theData;
?>  
</b></font></div> 
```

这是代码，所以基本上，我只想阅读文本文件上的内容。那么我如何读取不同的文本文件并每秒更改相同内容的文本文件。所以基本上是在 30 秒秒内更改为 txt2。

我需要在 JavaScript 中使用 PHP。所以PHP里面的JavaScript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:56:30.440

`file_get_contents()`比fopen好。

将此脚本保存在单独的页面中，然后使用：

这应该是工作。

```
$(document).ready(function() {
    setInterval(function() {
        $.ajax({
            type: 'GET',
            url: 'pageYouCreated.php',
            success: function(data) {
                $('#content font b').html(data);
            }
        });
    }, 1000);
}); 
```

# c# - 重构代码以获得更好的递归

> ID：15507783
> 
> 赞同：0
> 
> 时间：2013-03-19T18:36:44.740
> 
> 标签：c#, bitmap

我正在尝试编写一些代码来查看 pdf 文件并调用 Process 方法（以在 pdf 中查找 qr 代码图像），如果找不到，则它会旋转文件并再次运行 Process 方法。目前，我认为我实际上并没有在旋转后检查文件，而是检查原始格式的相同原始文件。如何将旋转后的图像正确传递到 Process 方法中：

```
 using (var fullImg = new Bitmap(workGif))
                {
                    var bandImg = fullImg.Clone(new System.Drawing.Rectangle(0, 0, 375, 375), fullImg.PixelFormat);

                    Bitmap result = fullImg;
                    if (Process(bandImg) == null)
                    {
                          fullImg.RotateFlip(RotateFlipType.Rotate270FlipNone);
                          bandImg = fullImg.Clone(new System.Drawing.Rectangle(0, 0, 375, 375), fullImg.PixelFormat);
                        if (Process(bandImg) == null)
                        {
                             fullImg.RotateFlip(RotateFlipType.Rotate90FlipNone);
                             bandImg = fullImg.Clone(new System.Drawing.Rectangle(0, 0, 375, 375), fullImg.PixelFormat);
                            if (Process(bandImg) == null)
                            {
                                fullImg.RotateFlip(RotateFlipType.Rotate180FlipNone);
                                bandImg = fullImg.Clone(new System.Drawing.Rectangle(0, 0, 375, 375), fullImg.PixelFormat);
                                //Process(bandImg);
                                string QRinfo = Process(bandImg);
                                MessageBox.Show(QRinfo);
                                string[] qcode = QRinfo.Split('/');
                                string gid = qcode[qcode.Count() - 1];
                                Guid pgGuid = new Guid(gid);
                                var ar = dc.Assessments.FirstOrDefault(c => c.ID == pgGuid);
                                if (ar != null)
                                {
                                    var p = inputDocument.Pages[pg];
                                    string opdName = FILESTORELOCATION + pgGuid.ToString() + ".pdf";
                                    PdfDocument opd = new PdfDocument(opdName);
                                    opd.Pages.Add(p);
                                    opd.Close();

                                    ar.StoragePath = opdName;
                                    ar.LastUploadedDT = DateTime.UtcNow;
                                    ar.UploadedByUserID = uploadingUser;
                                    dc.SubmitChanges();
                                }
                            }
                        }
                    } 
```

**工艺方法：**

```
public string Process(Bitmap bitmap)
{
    var reader = new com.google.zxing.qrcode.QRCodeReader();

    try
    {
        LuminanceSource source = new RGBLuminanceSource(bitmap, bitmap.Width, bitmap.Height);
        var binarizer = new HybridBinarizer(source);
        var binBitmap = new BinaryBitmap(binarizer);
        return reader.decode(binBitmap).Text;
    }
    catch (Exception e)
    {
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:56:17.607

如果您想要一个递归解决方案，请检查此（当然未经测试的代码）：

```
string ReadQrCode(Bitmap img, int n = 0) {
    if(n == 4) return null;

    var bandImg = img.Clone(new System.Drawing.Rectangle(0, 0, 375, 375), 
        img.PixelFormat);
    string text = Process(bandImg);

    if(text == null) {
        img.RotateFlip(RotateFlipType.Rotate90FlipNone);
        text = ReadQrCode(img, n + 1);
    }

    return Text;
} 
```

例子：

```
string qrCode;
using (var fullImg = new Bitmap(workGif)) {        
    qrCode = ReadQrCode(bandImg);
} 
```

**解释：**
实际上不需要递归来解决这类问题，事实上，正如 Alexei Levenkov 在下面的评论中指出的那样，循环更容易和清晰：

```
string text = null;
for(int i = 0; i < 4; i++) {
    var bandImg = img.Clone(new System.Drawing.Rectangle(0, 0, 375, 375), 
            img.PixelFormat);
    text = Process(bandImg)

    if(text != null) break;
    else img.RotateFlip(RotateFlipType.Rotate90FlipNone);
} 
```

在递归解决方案中，n 的行为类似于循环中的计数器，这意味着递归将（最多）有四次调用的深度，就像循环将迭代四次（最多）一样。

# javascript - 通过上一个输入框的onClick函数使输入字段可见只工作一次

> ID：15507784
> 
> 赞同：0
> 
> 时间：2013-03-19T18:36:47.800
> 
> 标签：javascript, css, html, asp-classic, vbscript

我已经构建了一个包含 16 个输入框的表单，供用户输入特征列表。

现在，我正在努力做到这一点，因此当您单击其中一个要键入的文本字段时，会出现下一个字段。

它可以使第二个框出现，仅此而已。

我使用 for next 循环来执行此操作。下面是代码，为什么它不适用于第二个之后的任何连续框？

```
1) <input type="text" name="objective1" size="50" onClick="document.getElementById('obj2').style.display='inline';" /><br />

<%

Dim i, b
b = 0

For i = 2 To 16
   b = i+1
   Response.Write("<span id='obj" & i & "' style='display:none'>")
   Response.write(i & ") <input type='text' name='objective" & i & "' size='50' onClick='document.getElementById('obj" & b & "').style.display='inline';' /><br />")
   Response.Write("</span>")
Next

%> 
```

我在工作中/为了工作而开发它，我们使用的是 IE8，因此请记住这一点以获取功能。

任何输入都会很棒。我认为这段代码有意义......？它可能缺少一小段代码，我会因为没有意识到大声笑而感到愚蠢。

谢谢

** 解决方案： **

我解决了这个问题。这是引用的问题，例如提到的@John 和@Vlad。

除了他提出的解决方案代码给了我一个语法错误，所以我不得不采取不同的方法：

```
Response.write(i & ") ") %><input type="text" name="objective<%=i%>" size="50" onClick="document.getElementById('obj<%=b%>').style.display='inline';" /><br /><% 
```

我在 For Next 循环中修复了上述行。

或@Martyn0627 提交：

```
Response.write(i & ") <input type='text' name='objective" & i & "' size='50' onClick=""document.getElementById('obj" & b & "').style.display='inline';"" /><br />") 
```

谢谢你们的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:50:10.687

您在`onclick`属性中有引号问题：

```
<input 
type='text' 
name='objective" & i & "' 
size='50' 
onClick='document.getElementById('obj" & b & "').style.display='inline';'  <~~~ HERE
/> 
```

`onclick`尝试转义它们（将属性值周围的单引号替换为双引号）：

```
Response.write(i & ") <input type='text' name='objective" & i & "' size='50' onClick=""document.getElementById('obj" & b & "').style.display='inline';"" /><br />") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:01:47.347

当您需要在输出中使用双引号时，请在 ASP response.write 语句中使用双双引号。

```
Response.write(i & ") <input type=""text"" name=""objective" & i & """ size=""50"" onClick=""document.getElementById('obj" & b & "').style.display='inline';"" /><br />") 
```

编辑 - 我的整个页面，我已经测试过

```
<html>
<head>
<title> New Document </title>

</head>

<body>
1) <input type="text" name="objective1" size="50" onClick="document.getElementById('obj2').style.display='inline';" /><br />

<%

Dim i, b
b = 0

For i = 2 To 16
b = i+1
Response.Write("<span id=""obj" & i & """ style=""display:none"">")
Response.write(i & ") <input type=""text"" name=""objective" & i & """ size=""50"" onClick=""document.getElementById('obj" & b & "').style.display='inline';"" /><br />")
Response.Write("</span>")
Next

%>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T19:09:19.870

我认为您不需要全部逃避它们，只需要更改 onclick 的一轮。它需要一个“但得到一个'。用这个替换你的代码行并且应该没有问题：

```
Response.write(i & ") <input type='text' name='objective" & i & "' size='50' onClick=""document.getElementById('obj" & b & "').style.display='inline';"" /><br />") 
```

# java - 无法以 UTF-8 格式获取 URL 内容

> ID：15507785
> 
> 赞同：0
> 
> 时间：2013-03-19T18:36:49.047
> 
> 标签：java, url, utf-8, inputstream

我正在尝试从 URL 读取内容，但它确实返回了奇怪的符号而不是“è”、“à”等。

这是我正在使用的代码：

```
public static String getPageContent(String _url) {
    URL url;
    InputStream is = null;
    BufferedReader dis;
    String line;
    String text = "";
    try {
        url = new URL(_url);
        is = url.openStream();

        //This line should open the stream as UTF-8
        dis = new BufferedReader(new InputStreamReader(is, "UTF-8"));

        while ((line = dis.readLine()) != null) {
            text += line + "\n";
        }
    } catch (MalformedURLException mue) {
        mue.printStackTrace();
    } catch (IOException ioe) {
        ioe.printStackTrace();
    } finally {
        try {
            is.close();
        } catch (IOException ioe) {
            // nothing to see here
        }
    }
    return text;
} 
```

我看到了其他类似的问题，所有问题的回答都像

```
Declare your inputstream as 
new InputStreamReader(is, "UTF-8") 
```

但我无法让它工作。

例如，如果我的 url 内容包含

```
è uno dei più 
```

我明白了

```
Ã¨ uno dei piÃ¹ 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:58:36.603

从你的例子来看。您确实收到了多字节 UTF-8 字节流，但您的文本编辑器读取为 ISO-8859-1。告诉您的编辑器将字节读取为 UTF-8！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:48:38.540

我真的不知道为什么这不起作用，但是 Java 7 方法是使用 StandardCharsets.UTF_8 见

[http://docs.oracle.com/javase/7/docs/api/java/nio/charset/StandardCharsets.html](http://docs.oracle.com/javase/7/docs/api/java/nio/charset/StandardCharsets.html)

在（新）构造函数 InputStreamReader(InputStream in, Charset cs) 中，请参阅

[http://docs.oracle.com/javase/7/docs/api/java/io/InputStreamReader.html](http://docs.oracle.com/javase/7/docs/api/java/io/InputStreamReader.html)。

# html - 如何让句子的某些单词斜体并保持句子在 HTML 中保持在一行？

> ID：15507786
> 
> 赞同：1
> 
> 时间：2013-03-19T18:36:49.900
> 
> 标签：html, line, nowrap, italics

我有以下 HTML 代码：

```
<a href="https://www.nothing.com/link" style="font-size:42px;text-decoration:none; color: #FFFCFC;white-space:nowrap;">this is just a <i>test sentence</i></a> 
```

如您所见，我输入了“white-space:nowrap”以确保无论浏览器窗口大小如何，句子都保持在一行上。但是，似乎将句子中的某些单词斜体可以防止这种情况发生。在较小的浏览器窗口上，结果是在一行中显示“这只是一个”，然后在下一行显示“*测试句子”。*如何使句子始终保持在一行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T20:44:08.773

斜体不会导致换行。*问题出在问题中未*公开的样式表的某些部分（发布的代码未说明问题）。这可能是一个“杀手级 CSS 重置”，它真的很容易把事情搞砸。它可能类似于`* { white-space: normal }`，这自然会导致`i`元素内的正常换行，而不是让它`white-space`从其父级继承。

所以你应该清理你对 CSS 的使用，最好摆脱“CSS 重置”。仅重置真正需要重置的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-16T16:30:23.470

我在 FF 中也遇到过这个问题——同样的情况。

最快的解决方法是将字体大小设置为小一点，例如 90%。

我也没有任何CSS重置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T18:50:10.453

您可以尝试添加`inline-block`至少在 chrome 中有效的 href

```
<a href="https://www.nothing.com/link" style="font-size:42px;text-decoration:none; color: red;white-space:nowrap;display:inline-block">this here is a very long is just a<span style="font-style: italic"> test sentence</span></a> 
```

# png - 使用 Xlib 和 Cairo 库制作屏幕截图 [失败]

> ID：15507788
> 
> 赞同：1
> 
> 时间：2013-03-19T18:37:02.660
> 
> 标签：png, screenshot, x11, cairo, xlib

我正在尝试使用**Xlib**和**Cairo**制作屏幕截图，但是我不确定这样做的好方法，“步幅”真的让我感到困惑。

这是代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <malloc.h>
#include <cairo.h>
#include <X11/Xlib.h>
#include <X11/Xutil.h>

int main(int argc, char** argv) {

    int x, y;

    Display *disp;
    Window root;
    XWindowAttributes watts;
    XImage *image;
    cairo_surface_t *surface;
    unsigned int width;
    unsigned int height;
    int stride;

    disp = XOpenDisplay(NULL);
    root = DefaultRootWindow(disp);
    XGetWindowAttributes(disp, root, &watts);
    width = watts.width;
    height = watts.height;

    image = XGetImage(disp, root, watts.x, watts.y, width, height, AllPlanes, ZPixmap);
    stride = cairo_format_stride_for_width(CAIRO_FORMAT_RGB24, width);
    unsigned char *data = malloc(width * height * 3);

    for (y = 0; y < height; ++y)
        for (x = 0; x < width; ++x) {

            unsigned long pixel = XGetPixel(image, x, y);

            unsigned char red = (image->red_mask & pixel);
            unsigned char green = (image->green_mask & pixel) >> 8;
            unsigned char blue = (image->blue_mask & pixel) >> 16;

            data[(y * width + x) * 3] = red;
            data[(y * width + x) * 3 + 1] = green;
            data[(y * width + x) * 3 + 2] = blue;
        }

    surface = cairo_image_surface_create_for_data(
            data,
            CAIRO_FORMAT_RGB24,
            width, height,
            stride);

    cairo_surface_write_to_png(
            surface,
            "test.png");

    cairo_surface_destroy(surface);
    free(data);

    return (EXIT_SUCCESS);
} 
```

当我编译并运行程序时，一切似乎都运行良好。然而，这是生成的图像：

![相当混乱](../Images/14acae2aa278ae4c183fd8fdd81384e6.png)

相当混乱对吗？.. **我可能做错了什么？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T13:04:42.980

与其做所有这些复杂的魔法，不如让 cairo 为你做：

```
#include <cairo.h>
#include <cairo-xlib.h>
#include <X11/Xlib.h>

int main(int argc, char** argv) {
    Display *disp;
    Window root;
    cairo_surface_t *surface;
    int scr;

    disp = XOpenDisplay(NULL);
    scr = DefaultScreen(disp);
    root = DefaultRootWindow(disp);

    surface = cairo_xlib_surface_create(disp, root, DefaultVisual(disp, scr),
            DisplayWidth(disp, scr), DisplayHeight(disp, scr));
    cairo_surface_write_to_png(
            surface,
            "test.png");
    cairo_surface_destroy(surface);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T19:08:03.603

调频：

```
CAIRO_FORMAT_RGB24
    each pixel is a 32-bit quantity, with the upper 8 bits unused 
```

调频：

```
stride = cairo_format_stride_for_width (format, width);
data = malloc (stride * height); 
```

因此，正确的指数计算是

```
data[y * stride + x * 4 + 0] = blue;
data[y * stride + x * 4 + 1] = green;
data[y * stride + x * 4 + 2] = red;    /* yes, in this order */ 
```

此外，蒙版是从图像中获取的，而变化是硬编码的，这绝对没有意义。计算掩码的偏移量。

# php - 使用 Javascript 缩短 html 页面的长度

> ID：15507790
> 
> 赞同：1
> 
> 时间：2013-03-19T18:37:07.673
> 
> 标签：php, javascript, html

如果有人可以提供帮助。我一直在用 html 和 css 开发我的页面。现在我有了这个页面，滚动并获得你想要的东西变得冗长乏味。我使用`:target`css 上的标签将页面分成几个部分，但它在某些浏览器上不起作用。我一直在玩javascript，但没有成功。任何人都可以帮助我使用我应该在页面中使用的 js 脚本，这样当有人加载页面时，它只显示将用作目录的内部链接，并且当用户单击内部链接时，只有该部分是与 div 显示链接还是弹出？

或者，有没有办法可以使用 PHP？

```
 <div>
            <ul>
            <li><a href="#introduction">Introduction to 
antimicrobials</a></li>
            <li><a href="#antifungals">Antifungal Drugs</a></li>
            <li><a href="#antiprotozoals">Antiprotozoal Drugs</a></li>
            <li><a href="#antihelminthics">Antihelminthic Drugs</a></li>
            <li><a href="#antibacterials">Antibacterials</a></li>
            <li><a href="#aminoglycosides">Aminoglycosides</a></li>
            <li><a href="#antifolates">Antifolate Drugs</a></li>
            <li><a href="#fluoroquinolones">Fluoroquinolones</a></li>
            <li><a href="#antimycobacterials">Antimycobacterial 
Drugs</a></li>            

            </ul>

            <div id="introduction">
            Viruses: Smallest pathogens, programmed to infect only certain 
body cells. Virus uses a body cells to reproduce itself it cannot be 
treated with medication.

Bacteria: single celled microorganism, 1000 different bacteria, but 100 
cause disease.
- Bacteria can be treated with antibiotics.
- Some bacteria are becoming immune to certain antibiotics.
- Bacterial Diseases: Strep throat, Tuberculosis Gonorrhea, Syphilis

Fungi: single celled or multicellular plantlike organism
- Fungi can cause diseases of the skin, mucous membrane, and lungs.
- Fungi Diseases: Athlete’s foot, Ringworm, Jock itch, Nail infections, 
Candidiasis</div>

<div id="antifungals">
Amphotericin B continues to be an important drug for the treatment of 
systemic fungal infections. However, several azoles and echinocandins are 
proving to be just as effective in some systemic mycoses with less risk of 
toxic effects.
</div>

<div id="antiprotozoals">
Drugs for Malaria:

Malaria is one of the most common diseases worldwide and a leading cause of 
death. Plasmodium species that infect humans (P falciparum, P malariae, P 
ovale, P vivax) undergo a primary developmental stage in the liver and then 
parasitize erythrocytes. P falciparum and P malariae have only 1 cycle of 
liver cell invasion. The other species have a dormant hepatic stage 
responsible for recurrent infections and relapses. Primary tissue 
schizonticides (eg, primaquine) kill schizonts in the liver, whereas blood 
schizonticides (eg, chloroquine, quinine) kill these parasitic forms only 
in the erythrocyte. Sporonticides (proguanil, pyrimethamine) prevent 
sporogony and multiplication in the mosquito.

Drugs: Chloroquine, Quinine, Mefloquine, Primaquine, pyrimethamine, 
proguanil, Sulfadoxine, Dapsone, Doxycycline, Amodiaquine, Atovaquone, 
Halofantrine, Artesunate, Artemether, Dihydroartemisinin

</div>

<div id="antihelminthics">
Antihelminthic drugs have diverse chemical structures, mechanisms of 
action, and properties. Most were discovered by empiric screening methods; 
many act against specific parasites, and few are devoid of significant 
toxicity to host cells. In addition to the direct toxicity of the drugs, 
reactions to dead and dying parasites may cause serious toxicity in 
patients.
</div>

<div id="antibacterials">
Beta-Lactam Antibiotics & Other Cell Wall Synthesis Inhibitors

Penicillins and cephalosporins are the major antibiotics that inhibit 
bacterial cell wall synthesis. They are called beta-lactams because of the 
unusual 4-member ring that is common to all their members. The beta-lactams 
include some of the most effective, widely used, and well-tolerated agents 
available for the treatment of microbial infections. Vancomycin, 
fosfomycin, and bacitracin also inhibit cell wall synthesis but are not 
nearly as important as the beta-lactam drugs. More than 50 antibiotics that 
act as cell wall synthesis inhibitors are currently available, with 
individual spectra of activity that afford a wide range of clinical 
applications.
</div>

<div id="aminoglycosides">
Aminoglycosides are structurally related amino sugars attached by 
glycosidic linkages. They are polar compounds, not absorbed after oral 
administration and must be given intramuscularly, or intravenously for 
systemic effect. They have limited tissue penetration and do not readily 
cross the blood-brain barrier. Glomerular filtration is the major mode of 
excretion, and plasma levels of these drugs are greatly affected by changes 
in renal function. Excretion of aminoglycosides is directly proportional to 
creatinine clearance. With normal renal function, the elimination half-life 
of aminoglycosides is 2–3 h. Dosage adjustments must be made in renal 
insufficiency to prevent toxic accumulation. Monitoring of plasma levels of 
aminoglycosides is important for safe and effective dosage selection and 
adjustment. For traditional dosing regimens (2 or 3 times daily), peak 
serum levels are measured 30–60 min after administration and trough levels 
just before the next dose. With once-daily dosing, peak levels are less 
important since they will naturally be high.
    </div>

    <div id="fluoroquinolones">
  The fluoroquinolones interfere with bacterial DNA synthesis by inhibiting 
topoisomerase II (DNA gyrase), especially in gram-negative organisms and 
topoisomerase IV, especially in gram-positive organisms. They block the 
relaxation of supercoiled DNA that is catalyzed by DNA gyrase, a step 
required for normal transcription and duplication. Inhibition of 
topoisomerase IV by fluoroquinolones interferes with the separation of 
replicated chromosomal DNA during cell division. Fluoroquinolones are 
usually bactericidal against susceptible organisms. Like aminoglycosides, 
the fluoroquinolones exhibit postantibiotic effects, whereby bacterial 
growth continues to be inhibited even after the plasma concentration of the 
drug has fallen below the minimum inhibitory concentration of the bacterium
</div>

<div id="antimycobacterials">
Drugs for Tuberculosis

The major drugs used in tuberculosis are isoniazid (INH), rifampin, 
ethambutol, pyrazinamide, and streptomycin. Actions of these agents on M 
tuberculosis are bactericidal or bacteriostatic depending on drug 
concentration and strain susceptibility. Appropriate drug treatment 
involves antibiotic susceptibility testing of mycobacterial isolates. 
Initiation of treatment of pulmonary tuberculosis usually involves a 3- or 
4-drug combination regimen depending on the known or anticipated rate of 
resistance to isoniazid (INH). Directly observed therapy (DOT) regimens are 
recommended in noncompliant patients and in drug-resistant tuberculosis.
 </div>  

        </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:47:31.447

我建议使用[jquery](http://jquery.com/)

有一些插件可以很容易地使用哈希：

[http://www.asual.com/jquery/address/](http://www.asual.com/jquery/address/)

[http://benalman.com/projects/jquery-bbq-plugin/](http://benalman.com/projects/jquery-bbq-plugin/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T18:49:13.637

使用 CSS。将所有内部 div 嵌套到一个容器中，并向该 div 添加一个类或 id 属性。例如：

```
<div id="container">
    <div id="introduction">asdfasdfasdfasd</div>
    <div id="fluoroquinolones">more stuff</div>
</div> 
```

默认情况下，将所有嵌套的 div 显示为无

```
<style type="css/text">
    #container div { display: none; }
</style> 
```

我还建议将标识符附加到包含链接的列表中。并使用 JavaScript，因此当您单击链接时，它将打开。我会推荐 JQuery 以加快开发速度和简化开发。

您可以使用 JavaScript 命令选择所有元素，如下所示：

```
document.getElementById("test").getElementsByTagName("a") 
```

并添加一个 onclick 来打开选定的 div 元素，但关闭其他所有元素（更改 CSS 显示）。

-- 编辑：示例 JavaScript

```
<script type="javascript/text">
var x = document.getElementById("test").getElementsByTagName("a");
var last = "";
for (i in x) {
    x[i].onclick = function(e) {
        var current = this.hash.substr(1);
        if (last!="")
            document.getElementById(last).style.display = "none";
        document.getElementById(this.hash.substr(1)).style.display = "block";
        last = current;
        e.preventDefault();
        return false;
    };
}
</script> 
```

这假设您使用 id “test”标识了列表元素容器。

使用 JQuery 将节省大量击键。

-- 用小提琴编辑：http: [//jsfiddle.net/7B9sP/](http://jsfiddle.net/7B9sP/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T18:50:44.733

用这个：

```
$(document).ready(function() {
    $('li a').click(function() {
        var getID = $(this).attr('href');
        $('.alldivs').fadeOut();
        $(getID).fadeIn();
        // or $(getID).slideDown();
        // or something you want. see in jquery.com
        // don't forget to use a plugin jquery in you head page html.
        return false;
    });
}); 
```

div“介绍”，赋值`class="alldivs"`为隐藏然后显示选中的div。我希望我有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T18:58:23.200

```
 <div>
        <ul>
            <li><a name="introduction" href="#introduction">Introduction to antimicrobials</a></li>
            <li><a name="introduction" href="#antifungals">Antifungal Drugs</a></li>
        </ul>

        <div id="introduction" class="description">
            Viruses: Smallest pathogens, programmed to infect only certain 
            body cells. Virus uses a body cells to reproduce itself it cannot be 
            treated with medication.
        </div>

        <div id="antifungals" class="description">
            Amphotericin B continues to be an important drug for the treatment of 
             systemic fungal infections. However, several azoles and echinocandins are 
             proving to be just as effective in some systemic mycoses with less risk of 
             toxic effects.
        </div>
     </div> 
```

现在考虑这是您的 html，然后添加以下 CSS

```
 .description {
       display: none;
    }

    .displaying {
       display: block;
    } 
```

然后在您的正文中添加以下 jquery 代码。确保在页面上导入 jquery 库。

```
 $('.data-link').on('click', function(event) {
     var id = $(this).attr('name');
     if($('#' + id).hasClass('description')) {
        $('#' + id).removeClass('description').addClass('displaying');
      } else {
        $('#' + id).removeClass('displaying').addClass('description');
      }
   }); 
```

我写了一个简单的 jsfiddle 来证明这一点。

[http://jsfiddle.net/kG9wn/](http://jsfiddle.net/kG9wn/)

如果再次单击，该代码也会隐藏 div。

# asp.net-web-api - 使用 asp.net webapi 的 Ninject 引导程序

> ID：15507794
> 
> 赞同：1
> 
> 时间：2013-03-19T18:37:23.343
> 
> 标签：asp.net-web-api, ninject, bootstrapper

我正在尝试使用 Bootstrapper 为我的应用程序、ioc、automapper、配置等进行初始化。

我需要一些关于如何使用引导程序在 asp.net webapi 中正确设置 ninject 的指导。使用以下配置，我的 apicontroller 无法解析 IMyService 依赖项。看起来它正在使用不同的ninject内核。

**我的 NinjectWebCommon**

```
public static class NinjectWebCommon 
{
    private static readonly Bootstrapper bootstrapper = new Bootstrapper();

    /// <summary>
    /// Starts the application
    /// </summary>
    public static void Start() 
    {
        DynamicModuleUtility.RegisterModule(typeof(OnePerRequestHttpModule));
        DynamicModuleUtility.RegisterModule(typeof(NinjectHttpModule));
        bootstrapper.Initialize(CreateKernel);
    }

    /// <summary>
    /// Stops the application.
    /// </summary>
    public static void Stop()
    {
        bootstrapper.ShutDown();
    }

    /// <summary>
    /// Creates the kernel that will manage your application.
    /// </summary>
    /// <returns>The created kernel.</returns>
    private static IKernel CreateKernel()
    {
        var kernel = new StandardKernel();
        kernel.Bind<Func<IKernel>>().ToMethod(ctx => () => new Bootstrapper().Kernel);
        kernel.Bind<IHttpModule>().To<HttpApplicationInitializationHttpModule>();

        GlobalConfiguration.Configuration.DependencyResolver = new MyResolver(kernel);

        RegisterServices(kernel);
        return kernel;
    }

    /// <summary>
    /// Load your modules or register your services here!
    /// </summary>
    /// <param name="kernel">The kernel.</param>
    private static void RegisterServices(IKernel kernel)
    {
    }        
} 
```

**引导程序 ninject 注册**

```
public class DIRegistration : INinjectRegistration
{
    public void Register(IKernel container)
    {
        container.Bind<IMyService>().To<MyService>().InTransientScope();
    }
}

public class MyService: IMyService
{
    public string GetString()
    {
        return "My String!!!!!";
    }
}

public interface IMyService 
{
    string GetString();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:07:38.873

我为解决这个问题所做的就是转向`bootstrapper.Initialize(CreateKernel);`我为 NinjectWebBootstrap 创建的 IStartupTask 实现。基本上使用由 Bootstrapper 框架注入的 IKernal 并运行我的注册，最后设置 asp.net webapi，然后使用接受注入的 IKernal 实例的自定义解析设置 DepdendencyResolver。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T21:52:26.347

`DIRegistration`从未使用过。所以这种绑定不存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T22:43:26.990

我试图直接在数据库中更新值，但在我的 WCF 中没有更新值，它使用实体框架在 svc 文件中使用 Ninject - 与[https://github.com/ninject/ninject.extensions.wcf/tree中的方式相同/master/src/Examples/WcfTimeService](https://github.com/ninject/ninject.extensions.wcf/tree/master/src/Examples/WcfTimeService)并使用引导。

If found out that if I recycle the IIS app pool, the data gets refreshed and it works as expected. I guess it IIS and Ninject which is creating this caching issue. Do you have any idea about it?

# c++ - 成员函数中声明的变量与成员变量相同

> ID：15507797
> 
> 赞同：0
> 
> 时间：2013-03-19T18:37:26.207
> 
> 标签：c++

想知道这是否可行，以及如何：

```
class sample
{
 int i;
 int func1()
  {
   int i = 0;
   i++;
   return i;
  }
} 
```

我问的原因是因为我有很多成员函数和错误的名称约定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:39:11.963

当您说`int i = 0`您正在创建一个名为`i`隐藏类成员的新变量时。如果你想访问类的`i`，你可以做`this->i`。但通常最好不要一开始就引起这种混乱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T18:39:20.480

在 的主体内`func1`，您将引用本地声明的`int i`. 为了引用类成员，您需要使用`this`指针显式引用它：

```
this->i 
```

`this`是一个常量指针，传递给类中的所有方法以表示当前实例。当然，当您有`static`成员函数时，它不会传入。

首先使用本地声明的原因`int i`是因为它与 and 处于相同的范围`i++`内`return i`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T18:39:04.790

它工作正常。函数内部名称的所有使用均`i`指该函数`i`内部声明的名称。也就是说，该函数每次都会返回 1。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T18:40:46.417

你在 func1() 中对 i 的意图是什么。你想增加函数外部的 i 还是函数内部的 i。如果您希望外部 i 增加，那么这将不起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T18:42:36.867

范围变得很奇怪：

```
int func1()
{
    int i = 0;
    i++;
    { //1
        int i = 41;
        i++;
    }
    { //2
        int j = i + 1;
        cout << j << endl // this prints 2
    }
    return i;
} 
```

在作用域中使用变量时的规则是，它总是首先引用最局部的作用域并向上工作。所以在你的例子中，`i`你的函数内部不会引用`i`类中的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-19T18:50:58.533

return 实际上将引用 in 中`i`声明的内容`func1()`。这都是关于范围的。

范围以 开头`{`和结尾`}`。在一个范围内声明的所有变量只有在您停留在该范围内或进入另一个范围内时才会被定义。因此

```
{ int i = 0; { int i = 1; { int i = 2; }}} 
```

完全有可能。如果您`i`在其中一个范围内使用，您将始终`i`在同一范围内引用。指代`i`更高范围的更困难。

在您的示例中，您仍然可以`i`使用 来引用顶部`this->i`，其中`this`是指向您正在使用的对象的指针。[这](http://www.cplusplus.com/doc/tutorial/functions/)是更多信息（向下滚动）。

# javascript - 如何找出脚本的来源

> ID：15507798
> 
> 赞同：0
> 
> 时间：2013-03-19T18:37:26.207
> 
> 标签：javascript, debugging, console

如果我有一个元素在单击时启动脚本，我如何确定脚本的来源？（js的源代码，保存函数的文件）。没有像 onclick 这样的事件，也没有处理更多的 jq，WayneR，所以我猜它来自某个地方的 js 函数，但是太多了，我希望将来学习这个。

```
 <a href="#Robinson" class="more" id="WayneR">
<div class="more-text-style">More</div>
<img width="21" height="21" src="http://war-mobile.h2client.com/wp-content/plugins/get-all-users/images/bios-more-btn.png">
</a> 
```

所以我猜来自开发者控制台的一些东西......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:41:49.123

你是对的！确实来自开发者控制台的东西！

```
console.dir($('#WayneR').data('events')); 
```

如果将其输入到 Firefox 或 Webkit 控制台（并且存在 jQuery），它将告诉您绑定到特定元素的事件。

此外，另一种选择是使用控制台手动搜索 Javascript 文件以查找#WayneR 并查看是否可以找到绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:43:22.633

“保存”包含所有相关文件的页面（在 Chrome 或 FF 中，不确定 IE 如何让您这样做）并搜索文件以查找您需要的功能。至少这会让你开始。

# javascript - 轻松添加多级深度 JSON

> ID：15507799
> 
> 赞同：1
> 
> 时间：2013-03-19T18:37:28.937
> 
> 标签：javascript, json

我正在创建一个 json 来解释对话框创建。

我最初的尝试是这样的：

```
var dialog = {};
dialog.warning.nextEle["key"] = "value"; 
```

希望它只会产生“警告”和“nextEle”。我可以做这样的事情：

```
dialogMsg["warning"] = {"nextEle" : {"key" : "value"}}; 
```

但我想要的是能够使其添加到 dialog.warning.nextEle 如果它已经存在，如果它不存在则添加该深度......即：

{} 会成为

```
{ "warning" : { "nextEle" : { "key" : "value"}}} 
```

并使用相同的格式，我可以添加来制作它

```
{ "warning" : { "nextEle" : { "key" : "value", "key2" : "value2"}}} 
```

是否可以在不使用条件的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:10:09.653

如果您使用 jQuery，请使用该[`extend`](http://api.jquery.com/jQuery.extend/)功能，它会自动添加必要的组件。

```
$.extend(true, dialog,{ 
    "warning" : { 
        "nextEle" : { 
            "key" : "value"
        }
    }
}); 
```

# regex - 正则表达式验证器 - 数字、字母和破折号和空格？

> ID：15507802
> 
> 赞同：0
> 
> 时间：2013-03-19T18:37:40.187
> 
> 标签：regex

我有一个`RegularExpressionValidator`我正在尝试验证所有字符（大写和小写）、数字、空格和破折号。

我现在有这个：

```
<asp:RegularExpressionValidator
    ID="RegularExpressionValidator1"
    runat="server" 
    ControlToValidate="txtCase"
    ValidationExpression="^[A-Z0-9 _]*$" 
    ForeColor= "Red"
    ErrorMessage="No Special Characters allowed">
</asp:RegularExpressionValidator> 
```

现在它只适用于小写字母和数字组合。

如何添加大写字母和破折号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T18:52:47.073

如果要**所有**字母，则需要使用 Unicode 代码属性：

```
ValidationExpression="[\p{L}\d -]+" 
```

`\p{L}`是一个[Unicode 代码属性](http://www.regular-expressions.info/unicode.html)，匹配每种语言中的所有字母

`\d` [是一个数字](http://www.regular-expressions.info/charclass.html)（也基于 Unicode）

# java - Java 内存模型

> ID：15507814
> 
> 赞同：1
> 
> 时间：2013-03-19T18:38:16.437
> 
> 标签：java

在最近的一次采访中，面试官让我解释 Java 内存模型。所以我开始解释堆（新一代，老一代等）堆栈。但他说这是垃圾收集器。我对此不感兴趣。面试更糟糕的是他没有给我机会问一个问题。

谁能告诉我那家伙到底在找什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:53:43.967

很可能他指的[是并发模型](http://en.wikipedia.org/wiki/Java_Memory_Model)，即内存更改如何以及何时对其他线程可见。正如维基百科文章所示，这通常以“Java 内存模型”的名义出现。

不过，将问题建立在一个术语上似乎有点愚蠢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T18:55:12.887

我想这是他们问的东西。它解释了java内存管理。

[http://www.oracle.com/technetwork/java/javase/memorymanagement-whitepaper-150215.pdf](http://www.oracle.com/technetwork/java/javase/memorymanagement-whitepaper-150215.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T18:43:04.633

也许他想让你说垃圾收集器管理对象占用的内存，并在不再需要时将其回收。

# sql-server - 缺少 Sql Server Compact？不在 Sql Server 2012 中？

> ID：15507815
> 
> 赞同：0
> 
> 时间：2013-03-19T18:38:16.857
> 
> 标签：sql-server, sql-server-ce, sql-server-2012

我有 Sql Server 2012 SP1，但找不到如何创建 sql compact 服务器。它不像在 sql server 2008 中那样处于连接状态。

他们移动了它还是我必须安装其他东西？根据网络平台安装程序，我的机器上安装了 sql compact server 4.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:43:29.213

SQL Server 2012 不附带精简版。

我相信它随 Visual Studio 2012 SP1 一起提供，并且可以通过它看到。

鲍里克

[msdn 文章 - 使用 SQL Server Compact (Visual Studio)](http://msdn.microsoft.com/en-us/library/vstudio/aa983321.aspx)

[你可以在这里下载 SQL 精简版](http://www.microsoft.com/en-us/sqlserver/editions/2012-editions/compact.aspx%20as)

# dynamic - Sencha Touch 2中动态设置视图标题的正确方法是什么

> ID：15507818
> 
> 赞同：0
> 
> 时间：2013-03-19T18:38:27.673
> 
> 标签：dynamic, text, view, sencha-touch-2

我目前在 sencha touch 2 视图中设置视图标题，如下所示：

```
initialize: function() {
     this.callParent();
     var translator = Ext.create('MyApp.util.Translation');
     this.config.title = translator.translateData('pagetitle.detail');
} 
```

翻译类只是根据函数中提供的键从 javascript 对象中查找字符串`translator.translateData`。

使用这种方法，当视图加载时，标题会稍微向右移动（40 px 左右）。

我还尝试将其放置在`activate`具有类似结果的视图侦听器中。

在 ST2 中动态设置视图标题的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:58:39.307

您可以通过控制器执行此操作

```
Ext.define('MyApp.controller.MyController', {
    extend: 'Ext.app.Controller',

    config: {
        refs: {
            titlebar: {
                autoCreate: true,
                selector: '#mytitlebar',
                xtype: 'titlebar'
            }
        },

        control: {
            "titlebar#mytitlebar": {
                initialize: 'onTitlebarInitialize'
            }
        }
    },

    onTitlebarInitialize: function(component, options) {
        var me = this;
        me.getTitlebar().setTitle("Second Title");
       // OR IN YOUR CASE:
       var translator = Ext.create('MyApp.util.Translation');
       me.getTitlebar().setTitle(translator.translateData('pagetitle.detail'));
    }
}); 
```

意见：

```
Ext.define('MyApp.view.MyContainer', {
    extend: 'Ext.Container',

    config: {
        items: [
            {
                xtype: 'titlebar',
                docked: 'top',
                itemId: 'mytitlebar',
                title: 'First Title'
            }
        ]
    }

}); 
```

# facebook - 在 facebook 登录中请求某些扩展权限 (read_stream) 不起作用

> ID：15507819
> 
> 赞同：0
> 
> 时间：2013-03-19T18:38:29.460
> 
> 标签：facebook, oauth, facebook-javascript-sdk

我的目标是让我的应用程序能够使用扩展权限“read_stream”读取我的用户流，但是在请求该权限时，对话框不会显示我已请求该权限。

我可以毫无问题地请求电子邮件或 publish_actions 权限，但 read_stream 以及其他各种扩展权限都是不行的。这是我用于 facebook 登录的示例：

```
https://www.facebook.com/dialog/oauth?scope=publish_actions%2Cread_stream&redirect_uri=http%3A%2F%2Fwww.MYDOMAIN.com%2Fsocialregistration%2Ffacebook%2Fconnect%2F&display=popup&client_id=MYAPPID 
```

请求 read_stream 时我需要请求其他权限吗？我需要在我的 Facebook 应用程序设置中专门针对范围权限请求进行更改吗？我的目标是能够获得“read_stream”的许可。

感谢您的任何意见！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:00:16.597

我描述的方法确实有效！问题是在初始权限提示之后出现了第二个 facebook 扩展权限提示。

令人困惑的是，facebook 在第一个 facebook 对话框上显示电子邮件和 publish_actions 的权限，而不是所有扩展权限的一致方式......但这是 facebook 的选择！

所以希望这可以帮助像我一样困惑的其他人！

# ios - UITableViewRowAnimationTop 没有完成动画

> ID：15507820
> 
> 赞同：0
> 
> 时间：2013-03-19T18:38:31.147
> 
> 标签：ios, animation, uitableview

在表格视图中插入行时，我在使用 UITableViewRowAnimationTop 时遇到问题。如果 UITableView 中插入的单元格的高度大于 100 px，则动画无法正常工作。

即，如果您插入一个高度为 200 像素的单元格，那么它将立即显示该单元格的 100 像素，然后为该单元格的剩余 100 像素设置动画。

有没有人可以解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-19T20:35:35.660

这真的很奇怪。我建议使用免费的 Sensible TableView 之类的框架，并让它自动处理所有这些操作。

# sql - Sybase：HAVING 对行进行操作？

> ID：15507825
> 
> 赞同：1
> 
> 时间：2013-03-19T18:38:37.977
> 
> 标签：sql, sap-ase

我遇到了以下 SYBASE SQL：

```
-- Setup first
create table #t (id int, ts int)
go

insert into #t values (1, 2)
insert into #t values (1, 10)
insert into #t values (1, 20)
insert into #t values (1, 30)

insert into #t values (2, 5)
insert into #t values (2, 13) 
insert into #t values (2, 25)
go

declare @time int select @time=11
-- This is the SQL I am asking about
select * from (select * from #t where ts <= @time) t group by id having ts = max(ts)
go 
```

此 SQL 的结果是

```
 id          ts          
 ----------- ----------- 
           1          10 
           2           5 
```

这看起来像 HAVING 条件应用于行而不是组。有人可以指点我一个地方是描述这种情况的 Sybase 15.5 文档吗？我所看到的只是“HAVING 对组进行操作”。我在文档中看到的最接近的是：

> have 子句可以包括不在选择列表中和 group by 子句中的列或表达式。

[（从这里](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.ase_15.0.commands/html/commands/commands60.htm)引用）。

但是，他们并没有准确地解释当你这样做时会发生什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:11:16.857

我没有做过 Sybase，因为它与 MS SQL Server ....90 共享代码，但我对你所做的事情的解释是这样的：

首先，列表被过滤为 <= 11

```
id   ts
1    2
1    10
2    5 
```

其他所有内容都被过滤掉了。

接下来，您将列表过滤到 TS = 该组的 Max(TS) 的行。

```
id   ts
1    10
2    5 
```

10 是组 1 的 Max(TS)，5 是组 2 的 Max(TS)。这两行是剩下的行。否则你会期待什么结果？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T20:39:21.167

如果您阅读[此处](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.ase_15.0.commands/html/commands/commands60.htm)的文档，似乎 Sybase 对子`having`句中未出现在`group by`子句中的列的使用与 MySQL 不同。

他们给出的例子有这样的解释：

> Transact-SQL 扩展列 price（在选择列表中，但不是聚合且不在 group by 子句中）导致所有合格的行显示在每个合格的组中，即使标准的 group by 子句每次生成一行团体。group by 仍然影响矢量聚合，它计算显示在每个组的每一行上的每个组的平均价格（它们与例如 a 计算的值相同）：

所以，`ts = max(ts)`本质上是这样做的：

```
select *
from (select t.*,
             max(ts) over (partition by id) as maxts
      from #t
      where ts <= @time
     ) t
where ts = maxts 
```

子查询很重要，因为`where`子句用于`max()`计算*并且*将返回所有行。

我发现这种行为相当混乱和不标准。我会用更典型的结构来代替它。它们的复杂程度大致相同，并且对于更多的受众来说似乎更清晰。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T10:40:55.480

我的理解：是的，从根本上说，HAVING 对行进行操作。通过省略 GROUP BY，它对单个“超组”内的所有结果行进行操作，而不是对组内的行进行操作。阅读最初链接的 Sybase docco 中的*“分组方式和使用聚合查询如何工作”部分：-*

> **分组和查询聚合的工作原理**
> 
> *   **where**子句排除不满足其搜索条件的行；对于分组或非分组查询，其功能保持不变。
> *   **group by**子句针对**group by**表达式中的每个唯一值将剩余的行收集到一个组中。省略**group by**会为整个表创建一个组。
> *   选择列表中指定的聚合函数计算每个组的汇总值。对于标量聚合，表只有一个值。矢量聚合计算不同组的值。
> *   **have**子句从不满足其搜索条件的结果中排除组。尽管**having子句只测试行，但****group by**子句的存在或不存在可能使其看起来像是在对组进行操作：
>     *   当查询包括**group by****时**，排除结果组行。这就是为什么**have**似乎对组起作用的原因。
>     *   当查询没有**group by**时，从（单组）表**中排除结果行。**这就是为什么**have**似乎对行进行操作（结果类似于**where**子句结果）。

其次，一个简短的摘要出现在[“拥有，分组依据和位置子句如何相互作用”](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.ase_15.0.sqlug/html/sqlug/sqlug122.htm)部分中：-

> **have、group by 和 where 子句如何交互**
> 
> 当您在查询中包含**have**、**group by**和**where**子句时，每个子句影响行的顺序决定了最终结果：
> 
> *   **where**子句排除不满足其搜索条件的行。
> *   **group by**子句针对**group by**表达式中的每个唯一值将剩余的行收集到一个组中。
> *   选择列表中指定的聚合函数计算每个组的汇总值。
> *   have子句从最终结果**中**排除不符合其搜索条件的行。

@SQLGuru 的解释就是一个例证。

## 编辑...

在相关的一点上，我对使用 TSQL“扩展列”的不符合 ANSI 的查询的行为感到惊讶。Sybase在 WHERE 子句之后处理扩展列*(i)* *(ii)*通过创建与原始表的额外连接和*(iii)* WHERE 子句未在连接中使用。此类查询可能返回比预期更多的行，然后 HAVING 子句需要额外的条件来过滤掉这些行。

请参阅最初链接的 docco 页面上的*“Transact-SQL extensions to group by and* have”下的示例***b***、***c***和***d 。****我发现从 Sybase 安装pubs2*示例数据库以与示例一起使用很有用。

# jquery - 使用多个选择框更新单个跨度值

> ID：15507833
> 
> 赞同：3
> 
> 时间：2013-03-19T18:39:01.517
> 
> 标签：jquery, ajax, select

如何使用多个选择框的输入更新单个跨度值，如下例所示：

```
 <html>
<head>
      <script type="text/javascript" src="js/jquery.js"></script>
      <script type="text/javascript">
            $(document).ready(function(){
                  $("#option1").change(onSelectChange);
                  $("#option2").change(onSelectChange);
          $("#option3").change(onSelectChange);
                  $("#option4").change(onSelectChange);
            });
            function onSelectChange(){

                  var Value1 = $("#option1").val();
                  var Value2 = $("#option2").val();
                  var Value3 = $("#option3").val();
                  var Value4 = $("#option4").val();
                  output =  Value1 + Value2 + Value3 + Value4;

                  $("#output").html(output);
            }
      </script>
</head>
<body>

      <select name="option1" id="option1">
            <option value="0">No Quarters</option>
            <option value=".25">1 Quarter</option>
            <option value=".50">2 Quarters</option>
            <option value=".75">3 Quarters</option>
      </select>

      <select name="option2" id="option2">
            <option value="0">No Dimes</option>
            <option value=".10">1 Dime</option>
            <option value=".20">2 Dimes</option>
      </select>

<select name="option3" id="option3">
        <option value="0">No Nickles</option>
        <option value=".05">1 Nickel</option>

</select>
<select name="option4" id="option4">
  <option value="0">No Pennies</option>
  <option value=".01">1 Penny</option>
  <option value=".02">2 Pennies</option>
  <option value=".03">3 Pennies</option>
  <option value=".04">4 Pennies</option>
</select>
<div>You have: $<span id="output">0</span></div>
</body>
</html> 
```

这个想法是用户可以在他的口袋里输入硬币的数量和类型，并在他更新它们时查看所有硬币的总价值。我似乎不知道如何添加所选选项的值。

感谢您帮助新手！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T18:43:55.933

它可以工作，但您需要将输入字符串转换为浮点数。改变：

```
output =  Value1 + Value2 + Value3 + Value4; 
```

到

```
output =  parseFloat(Value1) + parseFloat(Value2) + parseFloat(Value3) + parseFloat(Value4); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/6BgL8/)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T18:44:57.090

就像是

```
 $('select').change(function(){
   output += parseFloat(this.value);
   $("#output").html(output);
}); 
```

最好添加一些类并将事件绑定到只需要的元素。

[**现场演示**](http://jsfiddle.net/fb8gY/2/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T18:44:17.793

您只需要将“Value”字符串转换为浮点数。像这样：

```
output =  parseFloat(Value1) + parseFloat(Value2) + parseFloat(Value3) + parseFloat(Value4); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-19T18:46:40.167

将一些类添加到您的选择中，您可以大量简化代码：http: [//jsfiddle.net/Wv6Br/](http://jsfiddle.net/Wv6Br/)

```
var totalValue = 0;

$(".money").change(function() {
    totalValue+=Number(this.value);
    $("#output").text(totalValue);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T18:45:21.900

您只是连接字符串而不是将它们作为值添加。因此，您只需要将值字符串转换为浮点数即可。

所以你的

```
output =  Value1 + Value2 + Value3 + Value4; 
```

会成为

```
output =  parseFloat(Value1) + parseFloat(Value2) + parseFloat(Value3) + parseFloat(Value4); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-19T18:45:57.320

当你这样做时，`.val()`你得到一个字符串，当你`+`字符串时，你做连接而不是加法。您需要将值转换为数字：

```
 var Value1 = +$("#option1").val();              //unary + converts to a number
              var Value2 = +$("#option2").val();
              var Value3 = +$("#option3").val();
              var Value4 = +$("#option4").val();
              output =  Value1 + Value2 + Value3 + Value4;    //this is now addition 
```

# jquery - 使用 jQuery Mobile、后退按钮和远程脚本调用两次的无限滚动（航点）

> ID：15507844
> 
> 赞同：4
> 
> 时间：2013-03-19T18:39:40.410
> 
> 标签：jquery, jquery-mobile, infinite-scroll, duplicate-data, jquery-waypoints

我正在构建一个 jQuery Mobile 站点以供将来与 PhoneGap 一起使用，因此我的所有内容都是通过 AJAX 从远程 PHP/MySQL 东西中提取数据来加载的

在主页中，我最初只加载前 10 条新闻；然后，使用“更多...”按钮，我加载下一个 10，依此类推，直到从数据库中提取所有记录

[http://www.media-italia.eu/app/index2.html](http://www.media-italia.eu/app/index2.html)

单击新闻并使用“返回”按钮返回，恢复初始状态（加载的前 10 个项目）。没关系，到目前为止一切都很好

现在到了棘手的部分：我想在我的页面上有一个“无限滚动”，所以我利用了[jQuery Waypoints](http://imakewebthings.com/jquery-waypoints/)插件，结果如下：

[http://www.media-italia.eu/app/index.html](http://www.media-italia.eu/app/index.html)

一切看起来都很好，但是奇怪的事情来了（请打开控制台查看）
当我点击一个新闻，然后返回滚动，PHP页面被调用两次，导致重复项

我已经尝试了一些东西（包括在.on（）之前使用.off（）），但一点运气都没有
真的不知道问题可能是什么，请你帮忙吗？

我还准备了一个可下载的脚本：[http ://www.media-italia.eu/app/app.rar](http://www.media-italia.eu/app/app.rar)

先感谢您！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T12:48:20.317

解决方案来自插件作者：我不得不销毁并重新创建航点，所以这个：

```
$('#home .content').waypoint(function(direction) {
    if (direction === 'down'){
        $('#next').trigger('click');
    }
}, { offset: 'bottom-in-view' }); 
```

变成这样：

```
$('#home .content').waypoint('destroy');
$('#home .content').waypoint(function(direction) {
    if (direction === 'down'){
        $('#next').trigger('click');
    }
}, { offset: 'bottom-in-view' }); 
```

# powershell - 数据集中的 sp_msforeachdb

> ID：15507846
> 
> 赞同：0
> 
> 时间：2013-03-19T18:39:46.830
> 
> 标签：powershell, dataset, sp-msforeachdb

有人能告诉我为什么下面的代码只从 DataSet（用于主数据库）返回一行，而不是为服务器上的每个数据库返回一行吗？

```
 $SQLConn = New-Object System.data.SqlClient.SqlConnection
 $SQLConn.ConnectionString = "Data Source = $SQLServer; Initial Catalog = master;
                             Integrated Security = True"
 $SQLConn.Open()

 $query = "exec sp_msForEachDb 'use [?] SELECT TOP 1 [name] FROM sysusers'"

 $SQLCmd = New-Object System.Data.Sqlclient.SqlCommand($query, $SQLConn);
 $SQLAdapter = New-Object System.Data.SqlClient.SqlDataAdapter
 $SQLAdapter.SelectCommand = $SQLCmd
 $DataSet = New-Object System.Data.Dataset
 $SQLAdapter.Fill($DataSet) | out-null

 ForEach ($row in $DataSet.Tables[0])
 {
    $Name = $row["name"]
    write-host $Name
 }

 $SQLConn.Close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:24:30.213

我想我需要做这样的事情来将*所有*记录放入*一个*数据集中：

```
 $query = "DECLARE @users TABLE ([name] varchar(100)) INSERT @db_roles 
           exec sp_msForEachDB 'USE [?] SELECT [name] FROM sysusers'
           SELECT [name] FROM @db_roles" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:06:24.203

您将返回结果集中的多个数据表，但仅显示第一个表 [0]。尝试这个：

```
$DataSet.Tables | foreach {$_.name} 
```

下面是一些完整且经过测试的代码来组合结果集：

```
$SQLServer = ".\SQL1"
$query = @"
create table #output
(DB varchar(128),
name varchar(128)

)
exec sp_MSforeachdb  @command1='USE [?];
insert #output SELECT TOP 1 ''?'' AS ''DB'', [name]
FROM sysusers';
select * from #output
"@

$SQLConn = New-Object System.data.SqlClient.SqlConnection
 $SQLConn.ConnectionString = "Data Source = $SQLServer; Initial Catalog = master;
                             Integrated Security = True"
 $SQLConn.Open()

 $SQLCmd = New-Object System.Data.Sqlclient.SqlCommand($query, $SQLConn);
 $SQLAdapter = New-Object System.Data.SqlClient.SqlDataAdapter
 $SQLAdapter.SelectCommand = $SQLCmd
 $DataSet = New-Object System.Data.Dataset
 $SQLAdapter.Fill($DataSet) | out-null

 $DataSet.Tables[0]

 $SQLConn.Close() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T18:42:29.037

您的代码显示您使用 $dataset.tables 的索引位置 0。将其更改为`$DataSet.Tables`

```
ForEach ($row in $DataSet.Tables[0])
 {
    $Name = $row["name"]
    write-host $Name
 } 
```

改成...

```
 ForEach ($row in $DataSet.Tables)
     {
        $Name = $row["name"]
        write-host $Name
     } 
```

# c - 在 C 中将“直接”结构作为函数传递

> ID：15507847
> 
> 赞同：3
> 
> 时间：2013-03-19T18:39:53.740
> 
> 标签：c, function, structure

我有一个关于 C 中结构的简单问题。

我有这个结构和这个功能：

```
struct Vec2
{
  int x;
  int y;
}

void draw(Sprite* sprite, struct Vec2 pos); 
```

反正有没有在 c++ 中做同样的事情？

```
draw(foo, new Vec2(10, 20)); 
```

我试过了，但编译器不同意我的观点：

```
draw(foo, {10, 20} ); 
```

有人帮忙吗？

编辑：我在 C++ 模式下使用 Visual C++ 2008 Express，但对于我的学校，我必须直接用 C 编码，而不是 C++

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T18:43:45.703

如果您的编译器支持 C99 或更高版本，则可以使用*复合文字*：

```
draw(foo, (struct Vec2){10, 20}); 
```

或者，如果您想更明确地了解成员名称：

```
draw(foo, (struct Vec2){.x = 10, .y = 20}); 
```

（请注意，Microsoft 的 C 编译器不支持 C99，这可能会限制代码的可移植性。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T18:46:26.700

我通常做的是：

```
struct Vec2 make_Vec2( int x, int y ) {
  struct Vec2 vec;
  vec.x = x; vec.y = y;
  return vec;
}

...
draw( foo, make_Vec2( 10, 20 ) ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T18:50:42.660

只需使用@Keith Thompson 的回答添加一个工作示例：

```
#include <stdio.h>
#include<string.h>
struct two{
 int x;
 int y;
};
draw(struct two t){
    printf("\nx=%d y=%d\n", t.x, t.y);
}
int main(){
 draw((struct two){1,2});
 draw((struct two){.y = 1, .x = 2});
} 
```

输出：

```
:~$ ./a.out 

 x=1 y=2

 x=2 y=1 
```

# python - 覆盖 __dir__ 方法的正确方法是什么？

> ID：15507848
> 
> 赞同：27
> 
> 时间：2013-03-19T18:39:57.033
> 
> 标签：python, inheritance, python-2.7, introspection

*这个问题的意思是`__dir__`比 about更多`numpy`。*

我有一个`numpy.recarray`（在 python 2.7，numpy 1.6.2 中）的子类，并且我注意到ing 对象`recarray`时未列出 的字段名称`dir`（因此 ipython 的自动完成功能不起作用）。

试图修复它，我尝试`__dir__`在我的子类中覆盖，如下所示：

```
def __dir__(self):
    return sorted(set(
               super(MyRecArray, self).__dir__() + \
               self.__dict__.keys() + self.dtype.fields.keys())) 
```

结果是：`AttributeError: 'super' object has no attribute '__dir__'`。（我在[这里](http://bugs.python.org/issue12166)发现这实际上应该在 python 3.3 中工作......）

作为一种解决方法，我尝试了：

```
def __dir__(self):
    return sorted(set(
                dir(type(self)) + \
                self.__dict__.keys() + self.dtype.fields.keys())) 
```

据我所知，这个工作，但当然，不是那么优雅。

问题：

1.  在我的情况下，后一种解决方案是否正确，即对于`recarray`?
2.  有没有办法让它在一般情况下工作？在我看来，它不适用于多重继承（打破`super`-call 链），当然，对于没有`__dict__`...的对象
3.  你知道为什么`recarray`不支持列出它的字段名开头吗？仅仅是疏忽？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-09-08T08:46:08.913

Python 2.7+、3.3+ 类 mixin，简化了子类中*__dir__*方法的实现。希望它会有所帮助。[要点](https://gist.github.com/katyukha/c6e5e2b829e247c9b009)。

```
import six
class DirMixIn:
    """ Mix-in to make implementing __dir__ method in subclasses simpler
    """

    def __dir__(self):
        if six.PY3:
            return super(DirMixIn, self).__dir__()
        else:
            # code is based on
            # http://www.quora.com/How-dir-is-implemented-Is-there-any-PEP-related-to-that
            def get_attrs(obj):
                import types
                if not hasattr(obj, '__dict__'):
                    return []  # slots only
                if not isinstance(obj.__dict__, (dict, types.DictProxyType)):
                    raise TypeError("%s.__dict__ is not a dictionary"
                                    "" % obj.__name__)
                return obj.__dict__.keys()

            def dir2(obj):
                attrs = set()
                if not hasattr(obj, '__bases__'):
                    # obj is an instance
                    if not hasattr(obj, '__class__'):
                        # slots
                        return sorted(get_attrs(obj))
                    klass = obj.__class__
                    attrs.update(get_attrs(klass))
                else:
                    # obj is a class
                    klass = obj

                for cls in klass.__bases__:
                    attrs.update(get_attrs(cls))
                    attrs.update(dir2(cls))
                attrs.update(get_attrs(obj))
                return list(attrs)

            return dir2(self) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-10-29T12:02:49.713

你有没有尝试过：

```
def __dir__(self):
    return sorted(set(
               dir(super(MyRecArray, self)) + \
               self.__dict__.keys() + self.dtype.fields.keys())) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-20T16:27:44.643

1.  和 3：是的，您的解决方案是正确的。`recarray`没有定义`__dir__`仅仅因为默认实现是好的，所以他们没有费心去实现它，而且`numpy`'s 的开发人员没有设计要子类化的类，所以我不明白他们为什么应该打扰。

    子类化内置类型或不是专门为继承而设计的类通常是一个坏主意，因此我建议您使用委托/组合而不是继承，除非有特殊原因（例如，您想传递它到一个`numpy`用 ) 明确检查的函数`isinstance`。

2.  不。正如您在 python3 中指出的那样，他们更改了实现，以便有一个`object.__dir__`，但在其他 python 版本上，我看不到您可以做的任何事情。同样，使用`recarray`多重继承简直是疯狂的，事情*会*破裂。应该仔细设计多重继承，并且通常专门设计类来与它一起使用（例如混合）。所以我不会费心处理这个案例，因为任何尝试它的人都会被其他问题所困扰。

    我不明白为什么你应该关心没有的类`__dict__`......因为你的子类有它应该如何打破？当您更改子类实现时，例如使用`__slots__`您也可以轻松更改`__dir__`。如果您想避免重新定义`__dir__`，您可以简单地定义一个检查`__dict__`then for`__slots__`等的函数。但是请注意，属性可以通过微妙的方式生成，`__getattr__`因此`__getattribute__`您根本**无法**可靠地捕获所有这些属性。

# c - C 代码打印十六进制值但非常不同

> ID：15507852
> 
> 赞同：0
> 
> 时间：2013-03-19T18:40:21.217
> 
> 标签：c, printing

```
int main() {
        int i;
        int four_ints[4];
        char* c;

        for(i=0; i<4; i++) four_ints[i] = 18;

        c = (char*)four_ints;
        for(i=0; i<4; i++) c[i] = 24;

        printf("%x\n", four_ints[2]);
    } 
```

所以如果我这样打印，它只会打印 12。

但是，如果我将其更改为`printf("%x\n", four_ints[11])`

它突然打印`28ac90`

为什么会这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T19:04:46.270

在第二个语句中`printf("%x\n", four_ints[11])`，您访问了未为您的程序保留的数组位置 ( `int four_ints[4]`)。也就是说，您无法保证存储在未保留的内存部分上的内容。

# php - 在php中使用正则表达式测试管道分隔格式

> ID：15507855
> 
> 赞同：1
> 
> 时间：2013-03-19T18:40:28.857
> 
> 标签：php, regex

我需要验证字符串是否为以下格式，否则需要返回警告信息。

> 紫色|葡萄汁
> 绿色|生菜适合沙拉
> 黄色|猴子喜欢香蕉
> 红色|西瓜好吃

我需要它在上面的管道分隔数据中，每行分成两个块，然后是一个新行。

如果在一条线上有 3 个管道，那么它是不正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:16:26.260

此 RegEx 将根据您的规范验证整个字符串：`^(\w+\|[\w ]+(\n|$))+$`
如果其中一行无效，`preg_match()`将返回`false`.
*注意：我假设左边的部分只有数字和字母，第二个相同的加空格*
在这里看到它：[http ://regex101.com/r/iV0tC4](http://regex101.com/r/iV0tC4)

所以你需要的所有代码是：

```
if (!preg_match($regex,$string)) trigger_error("Invalid string!",E_USER_WARNING); 
```

实时代码：[http ://codepad.viper-7.com/i3Hcjs](http://codepad.viper-7.com/i3Hcjs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:19:13.650

RegExp 匹配就是您所需要的。用新行拆分字符串，然后在每一行上运行 RegExp 匹配，如果匹配返回 false，则提前结束函数（短路）。RegExp 本质上是 START_OF_LINE (^) 和任何非管道 ([^\|] *) 和管道 (\|) 以及任何非管道 ([^\|]* ) 和 END_OF_LINE ($)。

```
function verify($str) {
    $regex = '/^[^\|]*\|[^\|]*$/';
    $all = explode("\n", $str);
    foreach($all as $line) {
        if(preg_match($regex, $line) == false) 
            return false;
    }
    return true;
}

echo verify("bad") === false;
echo verify("bad|bad|bad") === false;
echo verify("abc|123\nbad") === false;
echo verify("abc|123\nbad|bad|bad") === false;
echo verify("good|good") === true;
echo verify("good|good\nnice|nice") === true; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T18:48:13.037

我不确定你想要得到什么，但如果我猜你需要这样的东西：

```
<?
$lines = explode("\n",$str);

foreach ($lines as $lineIndex => $oneLine)
    if (count(explode('|',$oneLine))>2) echo "You have an error in line ".$lineIndex;

?> 
```

# asp.net - asp.net 无法发布 asp 命名空间？

> ID：15507858
> 
> 赞同：1
> 
> 时间：2013-03-19T18:40:38.327
> 
> 标签：asp.net, compiler-construction

我使用了一些带有 asp 命名空间的语句，它在构建时喜欢 ASP.controls1，它很好，并且运行良好。但是当我发布时，这是一个错误：

错误 120 c:\Projects\TideWeb\Controls\Common\ExceptionHelper\ExceptionHelper.ascx.cs(53)：错误 CS0234：命名空间“ASP”中不存在类型或命名空间名称“controls_common_errorlist_errorlist_ascx”（您是否缺少程序集参考？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T12:03:10.437

在没有示例代码的情况下，我尝试通过列出我在 ASP 命名空间中发现的所有错误来帮助您。

1) 当前页面/用户控件中未使用用户控件“ExceptionHelper.ascx.cs”。您可以尝试一下：只有在当前页面（或 UserControl）中提到了一个或多个 UserControl 时，ASP 命名空间才会出现在智能感知中。如果您提到的 UserControl 代码包含编译错误，则智能感知（和编译器）会忽略其名称。修复编译错误，你的控件的名字就回来了。

2）UserControl注册到web.config文件中，在同一目录下的一个页面（或UserControl）中使用。在这种情况下，您必须通过此标记在当前页面中重新注册您的 UserControl：

```
<%@ Register Src="~/MyControls/MyControl.ascx" TagPrefix="MyControls" TagName="MyControl" %> 
```

添加此标签，错误已修复。

3）你提到：

> “但是当我发布时，这是一个错误”

在某些情况下，我的 webApp 无法在目标服务器中正确编译，但在测试中一切正常。

该编译错误可能是配置错误、临时 ASP.NET 目录的权限以及应用程序池使用的标识。

如果您可以发布一些代码，我可以为您提供更好的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-30T09:39:03.507

你说的可以，但还不够。我有同样的问题并解决了，但删除了 ASP。部分，因此在示例中更改此代码

```
ASP.ascx_buscador buscador = new ASP.ascx_buscador(); 
```

对于这个 ASCX_buscador = new ASCX_buscador();

现在一切都很好。请注意，在新代码中 ASCX_ 现在大写（智能感知会帮助您）

在这里找到解决方案： [Getting namespace name not found for ASP.net user control](https://stackoverflow.com/questions/826129/getting-namespace-name-not-found-for-asp-net-user-control)

# c - 无法在矩阵乘法中指定开始行和结束行

> ID：15507859
> 
> 赞同：0
> 
> 时间：2013-03-19T18:40:40.687
> 
> 标签：c, loops, matrix-multiplication

我为矩阵乘法编写了 ac 程序。现在我想将行数分成 5 个 N/5 的块。函数应在第一次迭代中计算第一行块，在第二次迭代中计算第二部分，依此类推。如何在每次迭代中指定起始行和结束行？我在下面试过了。任何人都可以帮我纠正它。

```
#include <stdio.h>
#include <stdlib.h>
int main()
{
    int i, m, n, p, q, c, d, k,g, sum = 0,start=0,end=m/5;
    int **first, **second, **multiply;
    printf("Enter the number of rows and columns of first matrix\n");
    scanf("%d%d", &m, &n);
    printf("Value entered %d%d \n",m,n);
    first = malloc(m*sizeof(int*));
    for ( i =0;i <m; i++)
        first[i] =malloc(n*sizeof(int));
    printf("Enter the number of rows and columns of second matrix \n");
    scanf("%d%d", &p,&q);
    printf("value entered %d%d \n",p,q);
    second = malloc(p*sizeof(int*));
    for( i=0;i<p;i++)
        second[i] = malloc(q*sizeof(int));
    multiply = malloc(m*sizeof(int*));
    for ( i=0;i<m;i++)
        multiply[i] = malloc(q*sizeof(int));
    printf("Enter the elements of first matrix\n");
    for( c = 0 ; c < m ; c++ )
        for ( d = 0 ; d < n ; d++ )
            scanf("%d", &first[c][d]);
    if ( n != p )
        printf("Matrices with entered orders can't be multiplied with each other.\n");
    else {
        printf("Enter the elements of second matrix\n");
        for ( c = 0 ; c < p ; c++ ){
            for ( d = 0 ; d < q ; d++ )
                scanf("%d", &second[c][d]);
        }
        for(g=0;g<5;g++){
            for ( c = start ; c < end ; c++ ) {
                for ( d = 0 ; d < q ; d++ ) {
                    for ( k = 0 ; k < p ; k++ ) {
                        sum = sum + first[c][k]*second[k][d];
                    }
                    multiply[c][d] = sum;
                    sum = 0;
                }
            }
            start=start+m/5+1;
            end=end+m/5;
        }

        printf("Product of entered matrices:-\n");
        for ( c = 0 ; c < m ; c++ ) {
            for ( d = 0 ; d < q ; d++ )
                printf("%d\t", multiply[c][d]);
            printf("\n");
        }
        for ( i = 0; i < p; i++)
            free(second[i]);
        free(second);
        for ( i = 0; i < m; i++)
            free(multiply[i]);
        free(multiply);
    } 
    for ( i = 0; i < m; i++)
        free(first[i]);
    free(first);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:49:36.620

开始索引*通常*是`0`（*总是*阅读），但关于结束索引，

当您分配/构造矩阵时，您必须将它们保存在变量`rows`/中。`cols`

# mongodb - 副本集分片。第二个数据中心可以进行故障转移吗？

> ID：15507867
> 
> 赞同：0
> 
> 时间：2013-03-19T18:41:04.537
> 
> 标签：mongodb, replication, sharding, failover

我们有 3 个分片，每个分片复制超过 3 个盒子（总共 9 个盒子）。2 个副本位于我们的主要托管服务提供商（站点 A），我们在另一个托管服务提供商（站点 B）有第三个副本（仅设置为辅助）。如果站点 A 失败，（如何）我们可以自动接受站点 B 的请求？

[我们已按照http://docs.mongodb.org/manual/core/replication/](http://docs.mongodb.org/manual/core/replication/)中的建议将站点 B 的副本配置为仅辅助副本我知道您可以在这些框上执行 rs.SlaveOk() 并接受请求，但这只会做本地分片，占数据库的三分之一。

所有帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:02:48.273

当大部分副本集不可用时，您无法自动进行故障转移。

丢失站点 A 意味着您丢失了 2/3 的副本节点。为了让站点 B 节点接受读取和写入，您必须重新配置副本集。您可以从配置中删除站点 A 上的节点，也可以添加仲裁器以恢复“多数”。

请注意，您不会以这种方式运行任何冗余，因此我建议您不要尝试自动或尽快启动，以防服务器出现重大损失，您需要花时间启动新的服务器来提供新配置的冗余。

如果您的应用程序需要在丢失数据中心时幸存下来，建议的配置是在 DC1 和 DC2 中拥有相同数量的节点，然后在第三个位置使用仲裁器（这样无论哪个数据中心出现故障，您都可以确保大多数副本集仍然存在并且可以选择新的主节点）。

# windows - “program.exe param:value param2:value”是 Windows 命令行应用程序的好格式吗？

> ID：15507870
> 
> 赞同：0
> 
> 时间：2013-03-19T18:41:12.977
> 
> 标签：windows, command-line-arguments

今天我看到了一个 Windows 应用程序的命令行参数格式，就像

```
program.exe format:xml input:some-file.xml output:other-file.xml 
```

我知道某些 Windows 程序（由 Microsoft 或第三方开发）使用`/key value /key2 value2`cmd-line 参数的格式。那么这个冒号表示法也是可接受的表示法还是那个人只是编造的？

什么是约定？（或者根本没有约定？）

# sql - 创建关联实体表

> ID：15507878
> 
> 赞同：1
> 
> 时间：2013-03-19T18:41:31.840
> 
> 标签：sql, oracle

下表已成功实施：

```
CREATE TABLE Patient (
Patient_ID  CHAR(5)     CONSTRAINT Patient_PK PRIMARY KEY,
First_Name  VARCHAR2(20)    NOT NULL,
Last_Name   VARCHAR2(20)    NOT NULL,
DoB     DATE,
 Sex        CHAR(1),
 Phone      NUMBER(10),
 Address    VARCHAR2(40)
);

CREATE TABLE Physician (
Physician_ID    CHAR(5)     CONSTRAINT Physician_PK PRIMARY KEY,
First_Name  VARCHAR2(20)    NOT NULL,
Last_Name   VARCHAR2(20)    NOT NULL,
Department_ID   CHAR(5) ,
  CONSTRAINT physician_FK_dept
   FOREIGN KEY (Department_ID)
   REFERENCES Department (Department_ID)
   ON DELETE SET NULL
); 
```

但是当我尝试在两个表之间创建关联实体时：

```
CREATE TABLE Visit (
Visit_ID    CHAR(5)     CONSTRAINT Visit_PK PRIMARY KEY,
Visit_date  DATE        NOT NULL,
Patient_ID  VARCHAR2(20)    NOT NULL,
Physician_ID    VARCHAR2(20),
  CONSTRAINT visit_FK_patient
   FOREIGN KEY (Patient_ID)
   REFERENCES Patient (Patient_ID)
   ON DELETE SET CASCADE,
  CONSTRAINT visit_FK_physician
   FOREIGN KEY (Physician_ID)
   REFERENCES Physician (Physician_ID)
   ON DELETE SET NULL
); 
```

由于错误而失败：

> ORA-00908: 缺少 NULL 关键字"

通常，缺少 NULL 是一件简单的事情。但是这一次，无论我如何看待 SQL，它看起来都不是错误。任何人都可以帮忙看看他们是否可以从另一个角度找到问题所在？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T18:47:50.150

我想你在哪里

```
ON DELETE SET CASCADE 
```

这应该是

```
ON DELETE CASCADE 
```

参考[这个](http://www.orafaq.com/wiki/Foreign_key#ON_DELETE_CASCADE)

# tfs - TF GET 不会重新填充目录

> ID：15507879
> 
> 赞同：0
> 
> 时间：2013-03-19T18:41:32.867
> 
> 标签：tfs, get, tf-cli

我设置了我的 TFS 工作区并做了`TF GET`，它下载了大量的文件，完全符合预期。

然后我想将我的本地副本修剪为我应该使用的文件夹。所以我删除了工作区本地副本上的所有其他内容（不使用 TF 命令，只使用 Windows 和 DOS 命令）

其中一个目录已添加到我的工作清单中。

如何在不重新下载*所有内容*的情况下取回该目录？

```
C:
cd \TFS
TF GET Zebra
(All Files are up to date) 
```

我所有不存在的文件显然与 TF 服务器上的现有文件是最新的。我很困惑怎么`FileExists`等于`FileNotExists`！

在尝试了这种方法的大约 20 种变体之后，我投降了。

```
C:
cd \TFS
TF GET /FORCE 
```

它正在下载一吨的东西。据我所知，它正在下载所有内容。有趣的是输出的格式与我的原始格式不同`TF GET`（但这确实分散了问题的注意力，下面重复了）。

如何让 TFS 仅从 Zebra 文件夹下载当前内容并重新填充它，以便我实际拥有的内容与服务器匹配？

我想一个附带问题 - 如果在不告诉 TFS 的情况下删除文件是清理本地磁盘空间的错误方法，那么我的方法应该是什么？

对不起，如果这个问题像菜鸟一样。但我想当谈到 TFS 时，我实际上是一个菜鸟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:54:30.840

使用 TFS2010，您将拥有一个基于服务器的工作区，这意味着服务器存储有关您的工作区的信息。这些信息包括您已经下载了哪些版本的文件。如果您使用命令行或 Windows 资源管理器删除它们，TFS 将无法识别您的更改。如果您随后执行“获取最新”，它会使用您应该（！）拥有的版本检查文件的实际版本。因此，如果没有新内容，TFS 不会向您发送任何内容，因为它应该已经存在。

您可以使用 force 选项，因此无论您的工作区中已有什么（或没有），您都将获得最新的文件

```
C:
cd \TFS
TF GET Zebra /FORCE 
```

您面临的问题是工作空间映射的结果，但这取决于您的工作方式。例如，我是 TFS 管理员，所以我为整个 TeamProjectCollection 提供了一个工作区，并且从未进行递归获取最新，我只获取我需要的那些文件/文件夹。你可以对你的 TeamProject 做同样的事情，但是你总是需要对特定文件夹使用 VS 源代码管理资源管理器或命令行，这不是很方便。我建议为您正在工作的分支/文件夹创建一个工作区，并隐藏您不需要的文件夹。在这种情况下，您可以在根目录上执行 GetLastest，但仍然只能获取您感兴趣的文件。

# c# - 如何在获取 Topic.Name 时避免 2019 MQRC_HOBJ_ERROR

> ID：15507883
> 
> 赞同：0
> 
> 时间：2013-03-19T18:41:44.863
> 
> 标签：c#, .net, ibm-mq

以下是使用时

```
int topicOptions = MQC.MQOO_OUTPUT + MQC.MQOO_FAIL_IF_QUIESCING;
MQTopic mqTopic = qmgr.AccessTopic(mqCloneSpecs.topicString, "", 
    MQC.MQTOPIC_OPEN_AS_PUBLICATION, topicOptions); 
```

程序的上述部分构建了一个 QueueManager 列表和一个 Topics 列表，用于调用 Windows 服务中的侦听器类。

```
int tLoopCounter = 0;
foreach (MQTopic topic in topicOut)
{
    tLoopCounter++;
    // NOTE: We blow up here with 2019 MQRC_HOBJ_ERROR if we access the property topic.Name 
    //Console.WriteLine("Loop through topics topic.IsOpen: " + topic.IsOpen); 
    //Console.WriteLine(" OpenOptions:" + topic.OpenOptions); 
    debugLocation = "4053";
    Console.WriteLine(" OpenStatus=" + topic.OpenStatus);

    debugLocation = "4054";
    i = tLoopCounter - 1;
    Console.WriteLine("i=" + i);
    debugQueueInfo = " topicPut #" + tLoopCounter + " QueueMgr:" + queueManagerForTopicsOut[i].Name.TrimEnd();

    // currently getting 2019 : MQRC_HOBJ_ERROR on the line below 
    debugLocation = "4055";
    debugQueueInfo += "Topic:" + topic.Name; 
    Console.WriteLine("Pump:Topic.Put:" + debugLocation + ":" + debugQueueInfo);

    debugLocation = "4057";
    topic.Put(mqMessage);
    Console.WriteLine("Pump:Topic.Put completed"); 

} 
```

当我尝试添加查询选项时，如下所示：

```
int topicOptions = MQC.MQOO_OUTPUT + MQC.MQOO_FAIL_IF_QUIESCING + MQC.MQOO_INQUIRE; 
```

然后我死于此错误：

> DebugLocation=Q3012 异常：System.ApplicationException：访问队列中的 MQException ---> IBM.WMQ.MQException：MQRC_OPTIONS_ERROR

此外，来自 Console.WriteLIne 的 OpenStatus=True，位于 debugLocation=4053。我的第一个想法是，如果它被关闭，那会导致这个错误。

# c++ - 递归。return func() 和 if (func()) return true 有什么区别？

> ID：15507890
> 
> 赞同：0
> 
> 时间：2013-03-19T18:42:03.490
> 
> 标签：c++, recursion

我正在写一个数独求解器，并且我有工作求解功能。

```
bool Sudoku::solve(int row, int col){
    while (board[row][col] != 0){
        col++;

        if (col > 8){
            col = 0;
            row ++;
        }

        if (row > 8){
            return true;
        }
    }

    for (int number = 1; number <= 9; number++){
        board[row][col] = number;

        if (check_row(row,number) && check_col(col,number) && check_box(row,col,number)){
            int next_row = row;
            int next_col = col;

            next_col++;

            if (next_col > 8){
                next_col = 0;
                next_row++;
            }

            if (next_row > 8)
                return true;

            // return solve(next_row, next_col);
            if (solve(next_row, next_col))
                return true;
        }
    }

    board[row][col] = 0;
    return false;
} 
```

而且我真的不明白两者之间有什么区别

```
if (solve(next_row, next_col))
    return true; 
```

和

```
return solve(next_row, next_col); 
```

但是第二行我的功能不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:43:48.183

如果`solve(next_row, next_col)`为假，第一个将继续执行函数。第二个只会返回假。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:45:15.797

如果为假，`if (solve(next_row, next_col)) return true;`则继续执行下一行。仅在为 true 时才评估返回值。这意味着`board[row][col] = 0;`如果条件在第一个中为假但在第二个中不为假，则将执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T18:50:11.707

在一般情况下，两者之间有两个区别

> 如果（解决（））返回真；

和

> 返回解决（）；

第一个区别是，如果 solve 的返回值为 true，则函数将继续而不是退出。第二个区别是，在第二行中，solve() 不必返回`true`，或者`false`可以返回非零值，而不是`true`（如果 solve() 函数没有返回`bool`值）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T18:51:14.890

第一种情况：

```
if (solve(next_row, next_col))
    return true; 
```

在这种情况下，当求解函数返回 true 并且永远不会返回 false 时，它​​会返回 true。

第二种情况：

```
return solve(next_row, next_col); 
```

如果`solve`返回 true，则返回 true，否则返回 false。

# android - 无法使用路径中有空格的 URLConnection 从 FTP 服务器下载文件

> ID：15507891
> 
> 赞同：0
> 
> 时间：2013-03-19T18:42:11.430
> 
> 标签：android, urlconnection

我无法使用在 pat 中有空格的 URLConnection 从 FTP 服务器下载文件

```
String s = "ftp://username:password@ftpclient:21/AAB BBC/hhhh 0001.jpg"; 
```

URL u = 新 URL；URLConnection uc = u.openConnection(); BufferedOutputStream bos = new BufferedOutputStream(uc.getOutputStream());

不想要 FTP 客户端解决方案。

使用 URLencoder 获取 550 错误文件未找到。

谢谢，高拉夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:54:17.963

[根据RFC1738](http://www.ietf.org/rfc/rfc1738.txt)第 2.2 节，您的 URL 本身不应该有空格通过 URL Encode 方法运行以对其进行编码：

```
String s = "ftp://username:password@ftpclient:21/AAB BBC/hhhh 0001.jpg";
String encodedUrl = URLEncoder.encode(s,"UTF-8"); 
```

我意识到您说您已经在进行编码，但是返回了 550 错误。我没有看到编码，所以只是提到它应该是需要的。

我真的会从浏览器中尝试一下，看看你是否可以使用它。我还将转储它正在使用的 URL，并从浏览器（或 wget、curl，无论你有什么方便）尝试。550 被列为“权限”问题，而不是文件未找到，所以我对此有点惊讶，但这可能是短代码，并作为错误出现，以防止人们四处寻找测试用户/密码组合。很难说。

我要问您的另一个问题是您提到您不想要客户端解决方案，但您似乎正在编写客户端而不是服务器。您将使用端口 21，这是服务器的默认 FTP 端口。

我会尝试各种编码组合，看看您是否没有对所有内容进行编码……您应该对 url 路径进行编码。密码中是否有任何时髦的字符？

直接从浏览器进行测试会给你很多洞察力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:03:02.863

您在使用 Apache 公共库吗？如果是这样，请使用此代码

```
try {
    FileOutputStream desFileStream = new FileOutputStream(desFilePath);;
    status = FTP_object.retrieveFile(srcFilePath, desFileStream);
    desFileStream.close();

    return status;
} catch (Exception e) {
    Log.d(TAG, "download failed");
} 
```

# c# - DLL 中的 CreateWindowEx() 创建一个带有奇怪标题的窗口

> ID：15507892
> 
> 赞同：1
> 
> 时间：2013-03-19T18:42:12.473
> 
> 标签：c#, c++, windows, string, dll

感谢您花费大量时间尝试回答这个问题。

我正在尝试创建一个从 DLL 中打开一个窗口的 DLL。我正在使用 C# 运行创建的 DLL。DLL 在 VSC 中创建，C# 代码使用 VSC# 编译。

该窗口通过调用`Initalize(const char* title)`或`Initalize(string title)`在 C# 中进行集成。无论我如何尝试，创建的窗口都会被创建、运行，但它的标题不是传递的字符串。我试过用`const wchar_t*`, `LPCSTR`, `LPCWSTR`, `System.String`, `[MarshalAs(UnmanagedType.LPStr)]`, `[MarshalAs(UnmanagedType.LPWStr)]`. 我尝试将传递的字符串复制到一个动态分配的数组中，该数组使用 new/delete 和 malloc/free 进行分配。

我认为这是一个指针错误，但最让我感动的是，`printf("passed string: %s", title)`在我的 C++ 代码中，在控制台中打印了正确的标题，但我的窗口看起来像： ![带有非英文文本的窗口](../Images/29ff6483675f5d37e05e72cfc7a4635a.png)

我的 C++ 代码是：

```
// GameInterface.cpp : Defines the exported functions for the DLL application.
//

#include "GameInterface.h"

#include <Windows.h>

      // OpenGL was origionally implimented into here, and removed to be asked on StackOverflow.

LRESULT WINAPI DLLWindowProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam);

HINSTANCE   hInstance = NULL;
ATOM        wclAtom = NULL;
HWND        hWnd = NULL;
HDC         hDC = NULL;
HGLRC       hRC = NULL;
bool        running = false;

#if _DEBUG
    #include <stdio.h>
#endif

BOOL APIENTRY DllMain( HMODULE hModule,
           DWORD  ul_reason_for_call,
           LPVOID lpReserved
                     )
{
    #if _DEBUG
        printf("GameInterface.dll::DllMain()\n");
    #endif

    switch (ul_reason_for_call)
    {
        case DLL_PROCESS_ATTACH:
        case DLL_THREAD_ATTACH:
            hInstance = hModule;
            break;
        case DLL_THREAD_DETACH:
        case DLL_PROCESS_DETACH:
            Shutdown();
            break;
    }
    return TRUE;
}

GAMEINTERFACE_API int Initalize(const char* title)
{
    if (hWnd != NULL)
        return 0;

    #if _DEBUG
        printf("GameInterface.dll::Initalize(\"%s\")\n", title);
    #endif

    int length = strlen(title);
    char* name = new char[length+1];
    strcpy(name, title);

    WNDCLASSEXA wcl;
    wcl.cbSize        = sizeof(WNDCLASSEXA);
    wcl.style         = CS_OWNDC;
    wcl.lpfnWndProc   = DLLWindowProc;
    wcl.cbClsExtra    = 0;
    wcl.cbWndExtra    = 0;
    wcl.hInstance     = hInstance;
    wcl.hIcon         = LoadIcon(NULL, IDI_APPLICATION);
    wcl.hCursor       = LoadCursor(NULL, IDC_ARROW);
    wcl.hbrBackground = (HBRUSH)COLOR_APPWORKSPACE;
    wcl.lpszMenuName  = NULL;
    wcl.lpszClassName = name;
    wcl.hIconSm       = LoadIcon(NULL, IDI_APPLICATION);

    wclAtom = RegisterClassExA(&wcl);

    #if _DEBUG
        printf("  Registering Class\n");
    #endif

    if (!wclAtom)
    {
        #if _DEBUG
            printf("  Error: Could not Register Class.\nExiting with error: %i\n", GetLastError() );
        #endif

        return 1;
    }

    #if _DEBUG
        printf("  Creating Window\n");
    #endif

    hWnd = CreateWindowExA(0,
                          (LPCSTR)wclAtom,
                          (LPCSTR)name,
                          WS_OVERLAPPEDWINDOW,
                          CW_USEDEFAULT, CW_USEDEFAULT,
                          512, 512,
                          NULL, NULL,
                          hInstance, NULL);

    if (hWnd == NULL)
    {
        #if _DEBUG
            printf("  Error: Window could not be created.\nExiting with error: %i\n", GetLastError() );
        #endif

        return 2;
    }

    #if _DEBUG
        printf("  Displaying Window\n");
    #endif

                // to reduce size removed the code to initalize an OpenGL 3.1 context

    ShowWindow(hWnd, SW_SHOW);
    UpdateWindow(hWnd);

    running = true;

    delete [] name;

    #if _DEBUG
        printf("Returning from GameInterface.dll::Initalize(const char*) with errors: %i\n", GetLastError() );
    #endif

    return 0;
}

GAMEINTERFACE_API void Shutdown()
{
    if (running = false)
        return;

    #if _DEBUG
        printf("GameInterface.dll::Shutdown()\n");
    #endif

    running = false;

    wglMakeCurrent(NULL, NULL);
    if (hRC != NULL) wglDeleteContext(hRC);
    if (hDC != NULL) ReleaseDC(hWnd, hDC);

    hRC = NULL;
    hDC = NULL;

    DestroyWindow(hWnd);
    UnregisterClassA( (LPCSTR)wclAtom, hInstance);
    wclAtom = NULL;

    hWnd = NULL;

    running = false;
}

GAMEINTERFACE_API int Update()
{
    if ( (running == false) && (hWnd == NULL) )
        return 1;

    MSG msg;
    if ( PeekMessage(&msg, NULL, 0, 0, PM_REMOVE) )
    {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }

    if (running == false)
        return 1;

    return 0;
}

GAMEINTERFACE_API void DrawFrame()
{
    // Contained some OpenGL code that has now been removed.
}

LRESULT WINAPI DLLWindowProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam)
{
    switch (msg)
    {
        case WM_DESTROY:
            PostQuitMessage(0);
            running = false;
            break;

        // handle other messages.

        default: // anything we dont handle.
            return DefWindowProc(hwnd, msg, wParam, lParam);
    }

    return 0; // just in case
}

// GameInterface.h : Outlines the exported functions for the DLL application.
//

#pragma once

#ifdef GAMEINTERFACE_EXPORTS
    #define GAMEINTERFACE_API __declspec(dllexport)
#else
    #define GAMEINTERFACE_API __declspec(dllimport)
#endif

extern "C"
{

GAMEINTERFACE_API int  Initalize(const char* title);
GAMEINTERFACE_API void Shutdown();
GAMEINTERFACE_API int  Update();
GAMEINTERFACE_API void DrawFrame();

}; 
```

和 C# 代码：

```
// GameInterface.cs
//

using System;
using System.Runtime.InteropServices;

class GameInterface
{
    const string GameInterfaceFile = "GameInterface_d.dll";

    [DllImport(GameInterfaceFile)] public extern static int  Initalize(string title);
    [DllImport(GameInterfaceFile)] public extern static void Shutdown();
    [DllImport(GameInterfaceFile)] public extern static int  Update();
    [DllImport(GameInterfaceFile)] public extern static void DrawFrame();
};

// Program.cs
//

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

class Program
{
    public static void Main()
    {
        string title = "OpenGL Window Title";
        if (GameInterface.Initalize(title) != 0)
            return;

        while ( GameInterface.Update() == 0 )
        {
            // game logic.
            GameInterface.DrawFrame();
        }

        GameInterface.Shutdown();
    }
} 
```

我被难住了，已经有一段时间了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T18:46:59.493

您是否正在定义`UNICODE`并`_UNICODE`在您的 C++ 构建中？您需要这样，C# 才能像这样与它交谈。

在 C++ 项目的 Visual Studio 属性中，在**General**下，将**Character Set 设置**为**Use Unicode Character Set**。仔细检查`/D "UNICODE"`并`/D "_UNICODE"`显示在**C/C++ / 命令行**页面上。

（相反的方法是将您的导出声明为 ANSI，但这是一个较差的解决方案。您应该支持 Unicode。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T18:48:01.900

这可能是因为代码需要 ANSI。

如果你尝试这个会发生什么：

```
[DllImport(GameInterfaceFile, CharSet=CharSet.Ansi)] public extern static int  Initalize(string title) 
```

# objective-c - NSTask 在 xcode 运行中有效，但在我在 xcode 之外运行时无效

> ID：15507898
> 
> 赞同：0
> 
> 时间：2013-03-19T18:42:44.460
> 
> 标签：objective-c, xcode, nstask

我创建了这个应用程序，它使用 OS X 中的 /usr/bin/say 命令。

此方法从文本字段中获取值并使用“say”来保存它。但是当我在 xcode 之外运行它时。我没有得到保存的文件。

```
- (IBAction)save:(id)sender
{
    NSString *path;
    path = @"/usr/bin/say";

    NSArray *args;
    args = [NSArray arrayWithObjects: @"-o", @"text.wav", @"--data-format=LEF32@8000", [textField stringValue], nil];

    [[NSTask launchedTaskWithLaunchPath:path arguments:args] waitUntilExit];

    NSLog(@"Saved");
} 
```

有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:48:44.127

也许它正在被保存，但你不知道在哪里。路径*text.wav*是部分路径，因此将保存在“当前目录”中。但是“当前目录”*是什么目录呢？*你可能不知道。

# android - 按钮未在 Android 中展开

> ID：15507899
> 
> 赞同：0
> 
> 时间：2013-03-19T18:42:46.817
> 
> 标签：android, button, android-orientation

我的布局有以下代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/background_color"
    android:gravity="center_horizontal"
    android:orientation="vertical"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin" >

    <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:fillViewport="true">

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/textView0"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="left|center_vertical"
                android:text=""
                android:textColor="@color/text_color"
                android:textSize="@dimen/nav_text_size" >
            </TextView>

            <Button
                android:id="@+id/ProceedToScreen31"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:drawableRight="@drawable/ic_action_name"
                android:gravity="left|center_vertical"
                android:text="@string/TA1"
                android:textColor="@color/btn_text_color"
                android:textSize="@dimen/button_text_size" >
            </Button>

            <Button
                android:id="@+id/ProceedToScreen32"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:drawableRight="@drawable/ic_action_name"
                android:gravity="left|center_vertical"
                android:text="@string/TA2"
                android:textColor="@color/btn_text_color"
                android:textSize="@dimen/button_text_size" >
            </Button>

            <Button
                android:id="@+id/ProceedToScreen33"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:drawableRight="@drawable/ic_action_name"
                android:gravity="left|center_vertical"
                android:text="@string/TA3"
                android:textColor="@color/btn_text_color"
                android:textSize="@dimen/button_text_size" >
            </Button>

            <Button
                android:id="@+id/ProceedToScreen34"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:drawableRight="@drawable/ic_action_name"
                android:gravity="left|center_vertical"
                android:text="@string/TA4"
                android:textColor="@color/btn_text_color"
                android:textSize="@dimen/button_text_size" >
            </Button>

            <View
                android:layout_width="match_parent"
                android:layout_height="2dip"
                android:background="@color/line_color" >
            </View>

            <TextView
                android:id="@+id/textView2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/copyright"
                android:textColor="@color/text_color"
                android:textSize="@dimen/small_text_size" >
            </TextView>
        </LinearLayout>
    </ScrollView>

</LinearLayout> 
```

这样做的问题是，当我将手机转为横向时，按钮不会展开并且只填满屏幕的一半。

如何让我的按钮展开以填满屏幕的其余部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:38:38.413

您的按钮没问题，但它们的父级（线性布局）没有屏幕那么大，因为它的宽度设置为 wrap_content。只需更改为 match_parent 即可。

**match_parent** = 设置尺寸以匹配父元素的尺寸。在 API 级别 8 中添加以弃用 fill_parent。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:52:28.617

如何将您的`LinearLayout`宽度设置为`match_parent`

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:tools="http://schemas.android.com/tools"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
     android:background="@color/background_color"
     android:gravity="center_horizontal"
     android:orientation="vertical"
     android:paddingBottom="@dimen/activity_vertical_margin"
     android:paddingLeft="@dimen/activity_horizontal_margin"
     android:paddingRight="@dimen/activity_horizontal_margin"
     android:paddingTop="@dimen/activity_vertical_margin" >

<ScrollView
    android:layout_width="match_parent"
    android:layout_height="wrap_content" 
    android:fillViewport="true">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView0"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left|center_vertical"
            android:text=""
            android:textColor="@color/text_color"
            android:textSize="@dimen/nav_text_size" >
        </TextView>

        <Button
            android:id="@+id/ProceedToScreen31"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:drawableRight="@drawable/ic_action_name"
            android:gravity="left|center_vertical"
            android:text="@string/TA1"
            android:textColor="@color/btn_text_color"
            android:textSize="@dimen/button_text_size" >
        </Button>

        <Button
            android:id="@+id/ProceedToScreen32"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:drawableRight="@drawable/ic_action_name"
            android:gravity="left|center_vertical"
            android:text="@string/TA2"
            android:textColor="@color/btn_text_color"
            android:textSize="@dimen/button_text_size" >
        </Button>

        <Button
            android:id="@+id/ProceedToScreen33"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:drawableRight="@drawable/ic_action_name"
            android:gravity="left|center_vertical"
            android:text="@string/TA3"
            android:textColor="@color/btn_text_color"
            android:textSize="@dimen/button_text_size" >
        </Button>

        <Button
            android:id="@+id/ProceedToScreen34"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:drawableRight="@drawable/ic_action_name"
            android:gravity="left|center_vertical"
            android:text="@string/TA4"
            android:textColor="@color/btn_text_color"
            android:textSize="@dimen/button_text_size" >
        </Button>

        <View
            android:layout_width="match_parent"
            android:layout_height="2dip"
            android:background="@color/line_color" >
        </View>

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/copyright"
            android:textColor="@color/text_color"
            android:textSize="@dimen/small_text_size" >
        </TextView>
    </LinearLayout>
</ScrollView> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T18:59:59.523

将android布局宽度设置为填充父项：

```
 android:layout_width="fill_parent" 
```

请记住，无论您想完全适应屏幕宽度，请将其布局宽度设置为 fill_parent 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-30T17:03:28.183

创建一个名为**layout-land**的文件夹现在创建一个与您为纵向创建的布局同名的布局，在横向模式下每个组件具有相同的 id。由于您正在使用文件夹“layout-land”，因此您的屏幕将处于横向模式。根据您的要求设计布局。现在，当您更改显示模式时，android 将在显示模式之间切换。谢谢你 。玩得开心

# javascript - 在jquery中生成3维动态数组

> ID：15507902
> 
> 赞同：-2
> 
> 时间：2013-03-19T18:42:51.383
> 
> 标签：javascript, jquery

如何在 jquery 中生成 3 维动态数组（如果数组应该是动态的并从变量输入的长度）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:49:17.650

javascript 中的数组本质上是动态的。

要添加维度，只需将数组放入您想要具有下一个维度的项目中。

```
var 1D = [0, 0];

var 2D = [ 
    [0, 0], 
    [0, 0] 
];

var 3D = [ 
    [ 
        [0, 0], 
        [0 ,0], 
        [0, 0] 
    ], 
    [ 
        [0, 0], 
        [0 ,0], 
        [0, 0] 
    ], 
    [ 
        [0, 0], 
        [0 ,0], 
        [0, 0] 
    ]
]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:56:18.733

你不需要jquery，只需要普通的JS

```
 var threeDarr = [];

    var firstArr = [];
    var secondArr = ['x','y','z'];

    firstArr.push(secondArr);
    threeDarr.push(firstArr);

     console.log(threeDarr[0][0][0]); //prints x
     console.log(threeDarr[0][0]); // prints ["x", "y", "z"] 
```

这是[小提琴](http://jsfiddle.net/sDbBx/)

# ninject - UnitOfWork 与 NInject 设计问题

> ID：15507915
> 
> 赞同：2
> 
> 时间：2013-03-19T18:43:26.087
> 
> 标签：ninject, unit-of-work

我在 DataAccess 项目中有我的 UnitOfWork 类并解析我的 IUnitOfWork 接口（使用 UnitOfWork 类），我需要使用 Ninject 在我的 Web 项目中将 IUnitOfWork 接口与 UnitOfWork 类绑定。

为此，我需要在 Web 项目中引用我的 DataAccess 项目（其中包含 UnitOfWork 类）。这个好的设计明智吗？我的意思是在 web 项目中引用 DataAccess 似乎是个坏主意，我从来没有这样做过。

所以，请告诉我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T21:57:46.463

如果您不习惯参考 DataAccess 项目（*恕我直言，这不是一个大问题*），您可以创建单独的项目（我们称之为 ModuleProject），其中包含`NinjectModule`s. ModuleProject 将引用 DataAccess 和`IUnitOfWork`定义的项目。在您的 Web 项目中，您将引用 ModuleProject 并使用它的类来注册模块。

**模块**

```
public class NinjectConfiguration : NinjectModule
{
    public override void Load()
    {
        Bind<IUnitOfWork>().To<UnitOfWork>();
    }
} 
```

**在 Web 项目中注册**

```
kernel.Load(new Mod.NinjectConfiguration()); 
```

更多关于模块的信息在[这里](https://github.com/ninject/ninject/wiki/Modules-and-the-Kernel)。

# java - 如何解决 java.awt.HeadlessException？

> ID：15507919
> 
> 赞同：0
> 
> 时间：2013-03-19T18:43:29.963
> 
> 标签：java, tomcat

我正在尝试将桌面应用程序 JCBIR（[http://code.google.com/p/jcbir/](http://code.google.com/p/jcbir/)）转换为网络应用程序（SpringMVC）。在我的开发环境 Windows 7、64 位 Jdk jdk1.7.0_09 Tomcat 6.18

工作没有任何错误。

但是当我尝试在其他机器 Windows 7、32 位 Jdk 6.0.21 Tomcat 6.18 上部署相同的

它给出了 java.awt.HeadlessException

任何指针来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-02T09:36:49.373

不确定，但是用新的 tomcat 重新配置所有环境，现在它对我有用。

# html - 跨引导列垂直对齐 div

> ID：15507920
> 
> 赞同：2
> 
> 时间：2013-03-19T18:43:32.447
> 
> 标签：html, css, twitter-bootstrap

我是 html 和 css 的新手，所以请耐心等待。我在引导程序中有一行，有两列。我想将左列中的 div 与右列中的 div 垂直对齐。我怎样才能做到这一点？

具体来说，我想在左边有文本的 div 来解释右边的某些元素。例如，假设正在阅读一本书，但在页面的左边距有一些标注，这些标注定义了与这些单词对齐的单词。

右栏中的内容是动态的。我知道某些 div 会出现，我只是不知道它们在垂直方向上的确切位置。

这是一个 jsfiddle：http: [//jsfiddle.net/dylanlingelbach/C73ap/](http://jsfiddle.net/dylanlingelbach/C73ap/)。这应该是我正在尝试做的事情的一个相当小的复制品。在我的实际情况下，中断是我不知道大小的 html 内容。

我正在使用引导程序 2。

如果可能的话，我宁愿在没有 javascript 的情况下这样做。我确信我可以通过在右列中找到 div 的位置并动态调整左列中 div 的绝对位置来动态地做到这一点，但我觉得纯 CSS 解决方案会更优雅。

HTML：

```
<div class="modal">
  <div class="modal-header">
    <button type="button" class="close cancel" aria-hidden="true">×</button>
    <h2 id="invite-modal-label">Some text</h2>
  </div>
  <div class="modal-body">
    <div class="row-fluid">
      <div class="span3">
        <div class="one">
          Align with #anchor1
        </div>
        <div class="two">
          Align with #anchor2
        </div> 
      </div>
      <div class="span9 padded">
          Content 
          <br/><br/><br/><br/><br/><br/>
          <div id="anchor1">
              #anchor1
          </div>
          <br/><br/><br/><br/><br/><br/>
          <br/><br/><br/><br/><br/><br/>
          <br/><br/><br/><br/><br/><br/>
          <br/><br/><br/><br/><br/><br/>
          <br/><br/><br/><br/><br/><br/>
          <div id="anchor1">
              #anchor2
          </div>
          <br/><br/><br/><br/><br/><br/>
          <br/><br/><br/><br/><br/><br/>
          <br/><br/><br/><br/><br/><br/>
          Text at the end
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button class="btn btn-success confirm">Send</button>
    <button class="btn btn-danger cancel">Cancel</button>
  </div>
</div> 
```

CSS：

```
@import url('http://twitter.github.com/bootstrap/assets/css/bootstrap.css');

.modal {
  width: 60%; 
  left: 5%; 
  margin: auto auto auto auto;
}

.one {
  border:1px solid black;
}

.two {
  border:1px solid black;
} 
```

**更新：** 我不想重新格式化我的 html。右栏中的内容是单独呈现的。本质上，这些数据显示在几个地方，并非所有地方都有左栏。我想保持我的代码将右列的内容与标记的其余部分分开。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:52:41.363

对于您要垂直对齐的每个项目，它们需要位于各自的行中：

```
<div class="row-fluid">
    <div class="span6"></div>  
    <div class="span6">content content content content content content content content content content content content content content content content content content</div>  
</div>
<div class="row-fluid">
    <div class="span6">Align with #anchor1</div>  
    <div class="span6">#anchor1</div>  
</div> 
```

[这是正确的jsfiddle](http://jsfiddle.net/C73ap/39/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:53:35.230

您可能应该修改您的 HTML 以支持您尝试实现的更多格式。

我建议将每个锚标签及其内容分成自己的行。

我所做的是将每个部分分成自己的部分`.fluid-row`，如下所示：

```
<div class="modal">
    <div class="modal-header">
        <button type="button" class="close cancel" aria-hidden="true">×</button>
        <h2 id="invite-modal-label">Some text</h2>
    </div>
    <div class="modal-body">
        <div class="row-fluid">
            <div class="span3">
                <div class="one">Align with #anchor1</div>
            </div>
            <div class="span9 padded"> 
                Content for anchor 1
                <br /><br /><br /><br /><br /><br />
            </div>
        </div><!-- end .row-fluid -->
        <div class="row-fluid">
            <div class="span3">
                <div class="two">Align with #anchor2</div>
            </div>
            <div class="span9 padded"> 
                Content for anchor 2
                <br /><br /><br /><br /><br /><br />
            </div>
        </div><!-- end .row-fluid -->        
    </div>
    <div class="modal-footer">
        <button class="btn btn-success confirm">Send</button>
        <button class="btn btn-danger cancel">Cancel</button>
    </div>
</div> 
```

你可以在这里看到这个结果：http: [//jsfiddle.net/C73ap/38/](http://jsfiddle.net/C73ap/38/)

# c# - 深度合并两个已经存在的实体框架实体

> ID：15507921
> 
> 赞同：3
> 
> 时间：2013-03-19T18:43:35.820
> 
> 标签：c#, entity-framework, ef-code-first, entity-framework-5, code-first

这是我的场景。我们有一个 Customers 表，具有各种导航属性（1-1、1-many、many-many 等）来表示 Orders，其中包含 OrderItems 等。（阅读非常深入的对象图）

非常简单的例子： **Customer1 有 Orders[1..5] 而 Customer2 有 Orders[6..9]**

现在有一段时间我们发现这两个客户实际上是同一个客户，我们想合并这两个客户：**Customer1.Merge(Customer2);**

合并后，我们应该看到**Customer1 具有 Orders[1..9] 以及 Customer2 的所有其他属性，并且 Customer2 为空并且可以安全地删除。**

现在我遇到了一篇关于深度克隆的相当老的帖子（[http://www.urmanet.ch/?p=11](http://www.urmanet.ch/?p=11)），它产生了一个**新实体**，但我有两个**现有实体**需要减少到**一个现有实体添加了第二个实体的对象图，然后我可以在其中删除第二个实体并提交工作单元。** 这个例子起源于 2008 年，并且现在有新版本的 EF，我想知道实现这一目标的**正确方法是什么？**

我喜欢一个扩展方法的想法，它可以通用地执行此任务（意味着反射），这样当/如果实体模型发生变化（添加新属性/关系等），**这个通用的 Merge 方法就不需要改变**......

这是我开始的基本代码，我想对其进行修改，以便它可以合并两个实体，而不是创建一个新实体（克隆）。

```
/// This class is used to store self references for
/// back tracking
public class SelfReferencesTracking
{
    public string EntitySetName;
    public EntityObject NewEntityObject;
    public EntityKey OriginalKeys;
}

/// Extension method class for the EntityObject class
public static class EntityObjectExtension
{
    //Enable tracking
    private static readonly List<SelfReferencesTracking> Tracking =
        new List<SelfReferencesTracking>();

    /// These method makes a 1:1 copy of the original entity object
    /// 
    /// The original entity object /// The copied entity object
    public static EntityObject Clone(this EntityObject entityObject)
    {
        //Get constructor for new object
        object newEntityObject = entityObject.GetType().GetConstructor(new Type[0]).Invoke(new object[0]);

        Tracking.Add(new SelfReferencesTracking
            {
                EntitySetName = entityObject.EntityKey.EntitySetName,
                OriginalKeys = entityObject.EntityKey,
                NewEntityObject = (EntityObject) newEntityObject
            });

        //Copy all properties and its values of the given type
        PropertyInfo[] properties = entityObject.GetType().GetProperties();
        foreach (PropertyInfo property in properties)
        {
            try
            {
                object propertyValue = property.GetValue(entityObject, null);
                PropertyInfo myProperty = property;
                if (!entityObject.EntityKey.EntityKeyValues.Any(x => x.Key == myProperty.Name))
                {
                    //Ignore all properties of these types
                    if (property.PropertyType != typeof (EntityKey) &&
                        property.PropertyType != typeof (EntityState) &&
                        property.PropertyType != typeof (EntityReference<>))
                    {
                        //Check, if the property is a complex type (collection), in that
                        //case, some special calls are necessary
                        if (
                            property.GetCustomAttributes(typeof (EdmRelationshipNavigationPropertyAttribute), false)
                                    .Count() == 1)
                        {
                            //Check for self referencing entities
                            if (propertyValue.GetType() == entityObject.GetType())
                            {
                                //Get the self referenced entity object
                                var selfRefrencedEntityObject = (EntityObject) property.GetValue(entityObject, null);

                                //This variable is used to store the new parent entity objects
                                EntityObject newParentEntityObject = null;

                                //This loops might be replaced by LINQ queries... I didn't try that
                                foreach (
                                    SelfReferencesTracking tracking in
                                        Tracking.Where(
                                            x =>
                                            x.EntitySetName == selfRefrencedEntityObject.EntityKey.EntitySetName))
                                {
                                    //Check, if the key is in the tracking list
                                    foreach (
                                        EntityKeyMember newKeyValues in
                                            selfRefrencedEntityObject.EntityKey.EntityKeyValues)
                                    {
                                        //Iterate trough the keys and values
                                        foreach (
                                            EntityKeyMember orgKeyValues in tracking.OriginalKeys.EntityKeyValues)
                                        {
                                            //The key is stored in the tracking list, which means, this is
                                            //the foreign key used by the self referencing property
                                            if (newParentEntityObject == null)
                                            {
                                                if (orgKeyValues.Key == newKeyValues.Key &&
                                                    orgKeyValues.Value == newKeyValues.Value)
                                                {
                                                    //Store the parent entity object
                                                    newParentEntityObject = tracking.NewEntityObject;
                                                }
                                            }
                                            else
                                            {
                                                break;
                                            }
                                        }
                                    }
                                }

                                //Set the value to the new parent entity object
                                property.SetValue(newEntityObject, newParentEntityObject, null);
                            }
                            else
                            {
                                //Entity collections are always generic
                                if (propertyValue.GetType().IsGenericType)
                                {
                                    //Don't include self references collection, e.g. Orders1, Orders2 etc.
                                    //Check for equality of the types (string comparison)
                                    if (
                                        !propertyValue.GetType()
                                                      .GetGenericArguments()
                                                      .First()
                                                      .FullName.Equals(entityObject.GetType().FullName))
                                    {
                                        //Get the entities of the given property
                                        var entities = (RelatedEnd) property.GetValue(entityObject, null);

                                        //Load underlying collection, if not yet done...
                                        if (!entities.IsLoaded) entities.Load();

                                        //Create a generic instance of the entities collection object
                                        Type t =
                                            typeof (EntityCollection<>).MakeGenericType(new[]
                                                {property.PropertyType.GetGenericArguments()[0]});

                                        object newEntityCollection = Activator.CreateInstance(t);

                                        //Iterate trough the entities collection
                                        foreach (object entity in entities)
                                        {
                                            //Add the found entity to the dynamic generic collection
                                            MethodInfo addToCollection =
                                                newEntityCollection.GetType().GetMethod("Add");
                                            addToCollection.Invoke(newEntityCollection,
                                                                   new object[] {Clone((EntityObject) entity)});
                                        }

                                        //Set the property value
                                        property.SetValue(newEntityObject, newEntityCollection, null);
                                    }
                                }
                            }
                        }
                        else
                        {
                            var baseType = propertyValue.GetType().BaseType;
                            if (baseType != null && baseType.Name == "EntityReference")
                            {
                                //Simply copy the EntityKey to the new entity object’s EntityReference
                                ((EntityReference) property.GetValue(newEntityObject, null)).EntityKey =
                                    ((EntityReference) property.GetValue(entityObject, null)).EntityKey;
                            }
                            else
                            {
                                //Common task, just copy the simple type property into the new entity object
                                property.SetValue(
                                    newEntityObject,
                                    property.GetValue(entityObject, null), null);
                            }
                        }
                    }
                }
            }
            catch (InvalidCastException ie)
            {
                //Hmm, something happend...
                Debug.WriteLine(ie.ToString());

                continue;
            }
            catch (Exception ex)
            {
                //Hmm, something happend...
                Debug.WriteLine(ex.ToString());

                continue;
            }
        }
        return (EntityObject) newEntityObject;
    }
} 
```

**回顾一下：在将这个 Clone 扩展方法转换为 Merge 扩展方法时，我需要一些帮助，我希望专家可以介入并帮助完成图片。任何帮助是极大的赞赏！**

# c# - 获取当前默认的 maxConcurrentSessions 设置

> ID：15507924
> 
> 赞同：4
> 
> 时间：2013-03-19T18:43:40.683
> 
> 标签：c#, wcf

任何人都知道我如何通过代码获得基于会话的 WCF 服务上 maxConcurrentSessions 的当前设置？

即使 maxConcurrentSessions 没有在服务配置文件中设置，我也想获得这个值，换句话说，我想在这种情况下获得默认值。

基本上，我试图毫无疑问地证明，在我当前的环境中 maxConcurrentSessions 的默认值是什么。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T20:31:10.877

诀窍是在配置文件中设置一些 throttlingBehavior 属性，但将 maxConcurrentSessions 排除在外：

```
 <serviceThrottling maxConcurrentCalls="100" maxConcurrentInstances="100"/> 
```

然后在服务器上：

```
ServiceHost host = new ServiceHost(typeof(MyService));

string msg = "Service Behaviors:" + Environment.NewLine;
foreach (IServiceBehavior behavior in host.Description.Behaviors)
{
    msg += behavior.ToString() + Environment.NewLine;

    if (behavior is ServiceThrottlingBehavior)
    {
        ServiceThrottlingBehavior serviceThrottlingBehavior = (ServiceThrottlingBehavior)behavior;
        msg += "     maxConcurrentSessions =   " + serviceThrottlingBehavior.MaxConcurrentSessions.ToString() + Environment.NewLine;
    }
}
EventLog.WriteEntry("My Log Source", msg,  EventLogEntryType.Information); 
```

这给我800。它支持那里的文档，该文档说 WCF 4.0 及更高版本的默认处理器为 100 * nb。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T19:06:07.507

[这篇](http://www.alltechnicalfaqs.com/2010/08/servicethrottlingbehavior-in-wcf.html)文章可能会有所帮助......在底部有一个关于读取限制值的部分。

您需要在服务器端进行（例如，在您的一种服务方法中）。此外，在示例中，它获得了第一个 ChannelDispatcher....对于您的特定场景，您可能有超过 1 个（不确定），具体取决于您正在做什么，这可能是您还需要考虑的一个条件。

HTH，弥敦道

# c# - C# System.Net.WebRequest HTTP 请求无法从传输连接读取数据：现有连接被远程主机强行关闭

> ID：15507930
> 
> 赞同：2
> 
> 时间：2013-03-19T18:43:52.260
> 
> 标签：c#, http, httpwebresponse, parse-platform, system.net.httpwebrequest

**在我开始之前**

首先让我提前道歉，如果这是一个重复的问题，因为似乎有几个与“现有连接被远程主机强制关闭”相关的问题，但是我似乎无法从这些其他问题中获得任何帮助，因为它们相同要么与 FTP（不是 HTTP）有关，似乎是由请求长度问题引起的，或者我根本不明白答案。

**目标**

我正在尝试使用 System.Net.WebRequest 对第三方服务移动应用程序推送服务[Parse.com](http://parse.com)进行 REST API 调用。尽管这个请求在大约 95% 的时间里都有效，但它会间歇性地抛出一个 System.Net.Web 异常。

我读过的一些类似帖子表明这可能与发送的请求的大小有关，但是这对我来说似乎不太可能，因为每次请求的大小大致相同（*注意：这可能是一个无知的假设*）。

**这是我用来发出 Web 请求的方法**

```
public static WebResponse SendPushHttpRequest(
            string payload, string apiID, string apiKey)
    {

        WebRequest request = WebRequest.Create("https://some.api.com/1/endpoint");

        request.ContentType = "application/json";
        request.Method = "POST";
        request.Headers["Application-Id"] = apiID;
        request.Headers["API-Key"] = apiKey;

        byte[] buffer =
            System.Text.Encoding.GetEncoding("UTF-8").GetBytes(payload);
        //string result = Convert.ToBase64String(buffer);
        Stream reqstr = request.GetRequestStream();
        reqstr.Write(buffer, 0, buffer.Length);
        reqstr.Close();

        try
        {
            using (WebResponse response = request.GetResponse())
            {
                return response;
            }
        }
        catch (Exception ex)
        {
            throw ex;
        }
    } 
```

**这是引发的 System.Net.Web 异常** 底层连接已关闭：接收时发生意外错误。

*内部异常* 无法从传输连接读取数据：现有连接被远程主机强行关闭。”} System.SystemException {System.IO.IOException}

*异常状态* 接收失败

*堆栈跟踪*

```
at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size)
   at System.Net.FixedSizeReader.ReadPacket(Byte[] buffer, Int32 offset, Int32 count)
   at System.Net.Security._SslStream.StartFrameHeader(Byte[] buffer, Int32 offset, Int32 count, AsyncProtocolRequest asyncRequest)
   at System.Net.Security._SslStream.StartReading(Byte[] buffer, Int32 offset, Int32 count, AsyncProtocolRequest asyncRequest)
   at System.Net.Security._SslStream.ProcessRead(Byte[] buffer, Int32 offset, Int32 count, AsyncProtocolRequest asyncRequest)
   at System.Net.TlsStream.Read(Byte[] buffer, Int32 offset, Int32 size)
   at System.Net.PooledStream.Read(Byte[] buffer, Int32 offset, Int32 size)
   at System.Net.Connection.SyncRead(HttpWebRequest request, Boolean userRetrievedStream, Boolean probeRead) 
```

**来自 Web 服务器的响应**

```
 GenericParameterAttributes '(((System.Reflection.RuntimeMethodInfo)(((System.Exception)(ex)).TargetSite)).ReturnType).GenericParameterAttributes' 
```

引发了“System.InvalidOperationException”System.Reflection.GenericParameterAttributes {System.InvalidOperationException} 类型的异常

消息：“只能在 Type.IsGenericParameter 为 true 的类型上调用方法。” 细绳

**最后但并非最不重要的原始 HTTP 请求**

```
POST http://localhost:58746/mobile/SendPushV2 HTTP/1.1
Host: localhost:58746
Connection: keep-alive
Content-Length: 140
Accept: */*
Origin: http://localhost:58746
X-Requested-With: XMLHttpRequest
User-Agent: Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.172 Safari/537.22
Content-Type: application/x-www-form-urlencoded; charset=UTF-8
Referer: http://localhost:58746/Mobile
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie: .Admin=3B704FD9ECC241F670F57DA43341FBE8A68BDD64F0E863363F31FF75F676EB8AC78D978DE8F1672D34D5C775B49A42E0F6E0F2FB8F867F9F963B0C0AC6C0F1EDD169AB171B8EE0B6A9ACFCBEF1491AAC8FF623DC9874D514EAE7FCF3407C582EBFE0EF4C4A7D495DF38D8F155A2C6275A884BD0F10CFBF6E4B2232641394E9992999755E9F7CD268747DCD7C81A2062DC8D290E99F0A97E0D6594986936DA9BD643D3814EF3621A671103F55EF85E8B648D68E778D1E21D65C22528CE44A3E980A0C2E8BD35B840189A6D9F11B363E69A310A20A7B554FB2C6BFEB7D81784C273DD1DFDBFF2D0FD91A41B522128C1C5156F22FB84007375682013F08372C580A7A2E85C0; ASP.NET_SessionId=nsmooq2pwg04ursg4aly25bs; .AppRoles=bJt49nUK2-dUVVz5AZH2QrG0VHUGrCXpD6FJ3KU4Q5EI9LbvSP1eUCza3g_3dfdkXqgdHJ19C5xVVWO5oByXPFXL5ateafVmbEH9FX5C10pQsOPrGXEe4DZTVzhFd464zydJG5OMCHvO_sTaRFTRAlX5OfyxG6K8J1yL00FnejVZElH51Zm55zhEjbHnkDlxursOZ55skBu9KmxFWe0tgU-9ieuQIo1TUOHe4sTUQec0LyPPaWd7c_cGFjbHqyzoTcVyBf2v86isy5dXaQmIptstKfl8yE6EU1WzVZ15I-N8J3vJKT_ojRKhrDyGyibkb4S0STvGuaqmGAUE27uaBhkafJVkgvP-yU-GA_TMSffq7DWOzezzPldc5LdpxEymFAjeyuzqSc-OVN0cw1uGXm60xgtFnQSUkXMpCFXgYvcUGNb1757gGcTen-zOyBx5KR8-TNE-Z39J3tpljwax_nUDElogSzaQ_9gR5-59ds1KW_LUsQ-quKA1pFqp8SQv-_F_kzRQvIjLsFozGuwkWybvhMpQvg81uPuZsHEIiOEnajIk0

message=Test%5Cn+%5Cn0n77ap&token=0d14611b5ea03c7301bf6aaa0658fb1373192db85c5805aa1058884b9c994839&date=2013-03-19+13%3A41%3A02&platform=ios 
```

如果有人可以帮助我了解这个问题，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:53:46.227

一种可能性是您过早关闭 WebResponse。这段代码似乎很可疑：

```
using (WebResponse response = request.GetResponse())
{
  return response;
} 
```

这将在方法返回后立即处理您的响应。我会将 using 语句放在此方法的调用者中。

如果您尝试发送推送通知，则使用 Parse 时的另一种选择是编写一个简单的云代码函数，该函数获取有效负载并使用 Parse 的 Javascript API 发送推送通知。这将允许您使用 Parse 的 .NET SDK 调用云函数和 Parse 的 Javascript SDK 发送推送通知，而无需直接处理 REST API。

# performance - 计算双精度的 gflops

> ID：15507932
> 
> 赞同：1
> 
> 时间：2013-03-19T18:43:56.130
> 
> 标签：performance, nvidia, flops

我有一个提供峰值 GFLOPS 规格的设备，我想测量我的程序离它有多远。由于我使用的所有数据都是双精度的，我是否应该将操作数乘以 2 以获得 GLOPS 值并进行比较？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T18:54:08.120

No. 1 双精度浮点运算仍然是一种浮点运算。

大多数 GPU 处理双精度数据的速度比单精度慢，因此峰值 GFLOPS 应该有两种规格。一个峰值单精度 GFLOPS 规格和一个峰值双精度 GFLOPS 规格。有时它会被进一步破坏，因此（例如）峰值分割性能与峰值附加性能分开列出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-08T14:05:15.280

> “ ... ，我应该将操作数乘以 2 以获得 GLOPS 值并进行比较吗？”

不，不适用于这些卡中的任何一张（但一张）：[http](http://www.geeks3d.com/20140305/amd-radeon-and-nvidia-geforce-fp32-fp64-gflops-table-computing/) ://www.geeks3d.com/20140305/amd-radeon-and-nvidia-geforce-fp32-fp64-gflops-table-computing/ 。

请注意，在大多数情况下，该比率从 1/24 到 1/3 不等，另请注意，“工作站显卡”的比率为 1/2 - 它专门设计用于提高 DP 性能。

您需要阅读卡中硬件的规格，并确定从 SP 切换到 DP 时应该预期的性能损失。将额外的精度加载到寄存器（硬件将在其中执行操作的内存）并在每次操作后检索额外的精度将会有少量额外的开销。

# arrays - VHDL 简单代码优化

> ID：15507939
> 
> 赞同：1
> 
> 时间：2013-03-19T18:44:22.340
> 
> 标签：arrays, loops, optimization, vhdl, fpga

这是我的代码：

```
 variable input: array(0 to 3, 0 to 3) of unsigned(7 downto 0);
             variable outt: array(0 to 3, 0 to 175) of unsigned(7 downto 0);
           for i in 0 to 3 loop
              outt(0,i) :=input(0,i);
     outt(1,i) :=input(1,i);
     outt(2,i) :=input(2,i);
      outt(3,i) :=input(3,i);

      end loop; 
```

有没有更好的方法来做到这一点？我的意思是一个有效的代码将所有输入数组复制到较大的 outt 数组的一部分中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T05:23:38.260

根据经验，VHDL 中的循环是展开的，因为循环的目的是合成循环体中描述的多个硬件副本。控制逻辑不会出现在综合硬件中。

出于这个原因，编写多个赋值的更紧凑的方法是执行两个嵌套循环。

```
 for i in 0 to 3 loop
  for j in 0 to 3 loop
    out(i,j) := in(i,j);  // there will be 16 wires / flipflops synthesized
  end loop;
 end loop; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:48:05.543

尝试

```
outt(0 to 3, 0 to 3) := input; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T11:49:34.590

为了获得最大的灵活性，您可以使用嵌套循环和属性来应对 的大小变化`i`：

```
for i in i'range(1) loop
  for j in i'range(2) loop
    outt(i,j) := input(i,j);  
  end loop;
end loop; 
```

# css - 在 CSS 中转换后的位置？

> ID：15507941
> 
> 赞同：18
> 
> 时间：2013-03-19T18:44:37.173
> 
> 标签：css, transform

考虑以下尝试将段落旋转 90 度并将其定位，以使最初是其左上角（因此在旋转后成为其右上角）的角最终位于该段落的右上角父块。

HTML：

```
<!DOCTYPE html>
<html>
<body>
  <div id="outer">
    <p id="text">Foo bar</p>
  </div>
</body>
</html> 
```

CSS：

```
#outer {
    border: solid 1px red;
    width:600px;
    height: 600px;
    position: relative;
}

#text {
        transform: rotate(90deg); 
        position: absolute;
        top: 0;
        right: 0;
} 
```

在 OS X 10.6.8 上的 Firefox 19.0.2 中，它失败了。这似乎是因为，尽管给出了 CSS 属性的顺序，但转换是在定位**之后**应用的。换句话说，浏览器：

1.  `#text`使其右上角位于父块的右上角的位置，但只有*这样*
2.  旋转它，结果*现在*它的右上角**不在**父块的右上角。

结果，该`transform-origin`属性在这里没有多大用处。例如，如果使用的一个`transform-origin: top right;`则`#text`需要向下移动它在旋转之前的宽度。

**我的问题：**有没有办法告诉浏览器在旋转**后应用 CSS 定位属性；**如果没有，那么是否有一种方法可以`#text`向下移动（例如使用`top:`）*它在旋转****之前****的宽度***？**

 **注意。理想情况下，该解决方案不应该要求为 设置一个固定`width:`的`#text`，并且一定不需要 JavaScript。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-06-18T17:58:15.560

您可以对一个元素应用多个变换，并且顺序确实很重要。这是最简单的解决方案：http: [//jsfiddle.net/aNscn/41/](http://jsfiddle.net/aNscn/41/)

```
#outer {
    border: solid 1px red;
    width:600px;
    height: 600px;
    position: relative;
}

#text {
    background: lightBlue;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;

    transform: translate(100%) rotate(90deg);
    transform-origin: left top;

    -webkit-transform: translate(100%) rotate(90deg);
    -webkit-transform-origin: left top;
} 
```

变换原点是应用变换的点。例如，rotate() 函数的变换原点是旋转中心 - [https://developer.mozilla.org/en-US/docs/Web/CSS/transform-origin](https://developer.mozilla.org/en-US/docs/Web/CSS/transform-origin)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-11-22T12:57:44.627

旋转-90度。

```
 .rotate {
        position:absolute;
       -webkit-transform-origin: left top;   
        /* Safari */
        -webkit-transform: rotate(-90deg) translateX(-100%);

        /* Firefox */
        -moz-transform: rotate(-90deg) translateX(-100%);

        /* IE */
        -ms-transform: rotate(-90deg) translateX(-100%);

        /* Opera */
        -o-transform: rotate(-90deg) translateX(-100%);
   } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T16:20:00.407

您可能想尝试使用 CSS3 @keyframes 动画。它将允许您以您喜欢的任何顺序旋转和重新定位。这是一个可能有帮助的教程：[CSS-Tricks][1]

```
.container {
  position: relative;
  width: 200px;
  height: 200px;
  border: 1px solid red;
}
p {
  border: 1px solid blue;
  position: absolute;
  top: auto;
  right: 0;
  display: inline-block;
  margin: 0;
  animation: 1s rotate 1s both;
}
@keyframes rotate {
  0% {
    transform-origin: top left;
    transform: rotate(0deg);
    right:0;
  }
  50% {
    right:0;
  }
  100% {
    transform-origin: top left;
    transform: rotate(90deg);
    right: -64px;
  }
}
```

```
<div class="container">
  <p>some text</p>
</div>
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-10T16:02:33.967

已解决：[这里](http://jsfiddle.net/aNscn/24/)

这是我添加的代码：

```
left: 100%;
width: 100%;
-webkit-transform-origin: left top; 
```

我还添加了一些前缀转换属性，因此它将是跨浏览器

```
-webkit-transform:rotate(90deg);
-moz-transform:rotate(90deg);
-ms-transform:rotate(90deg);
-o-transform:rotate(90deg);
transform:rotate(90deg); 
```

我是怎么做到的：

我发现[了这个](https://stackoverflow.com/questions/7668703/how-do-you-align-270deg-rotated-text-to-top-left)问题，并且正如网站名称所说，“摆弄”了代码以获得这种行为。我想解决方案是`left: 100%;`而不是`right: 0;`.

（`width: 100%;`因为某种原因它不是 100% 并且文本会溢出到下一行）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-13T18:17:44.847

您可能想要使用 translate 选项，您可以将其应用为旋转后的第二个变换函数，并将元素放置在您想要的确切位置。我猜没有其他方法可以告诉浏览器在使用纯 css 使用转换函数后使用位置属性。

看到这个演示 - [http://codepen.io/anon/pen/klImq](http://codepen.io/anon/pen/klImq)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-19T21:14:35.923

将“！important”放在变换线的末尾。**

# apache-camel - 设置 TTL Apache Camel JAva DSL

> ID：15507948
> 
> 赞同：0
> 
> 时间：2013-03-19T18:45:01.477
> 
> 标签：apache-camel

使用 Java DSL 时如何设置消息的 TTL？

我有这样的事情：

```
...
from ("timer:something?delay=3000&period=15000")
   ...
   .to("{{some.property}}")
   .end()
... 
```

我想设置一个时间来处理正在发送的消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:18:31.723

我最终设置了正在创建的消息的 JMSExpiration 标头字段，类似于以下内容

```
.setHeader("JMSExpiration", constant(System.currentTimeMillis() + 1000)) 
```

我们使用的是 Apache ActiveMQ 5.7。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:08:32.990

我假设 TTL 意味着生存时间。

在 Camel 中，这是特定于组件的处理方式。一些组件支持这一点，而另一些则不支持。

你应该检查你使用的组件的文档，它支持什么。

如果您使用 JMS 组件，则它具有 timeToLive 选项，如下所述：[http ://camel.apache.org/jms](http://camel.apache.org/jms)

请注意“客户端和服务器时钟可能不同步”的问题。Camel JMS 页面上有一些详细信息。一些消息代理有同步时钟的方法，例如 Apache ActiveMQ 及其时间戳插件：[http ://activemq.apache.org/timestampplugin.html](http://activemq.apache.org/timestampplugin.html)

# java - Java 中的 2D 软件照明问题

> ID：15507949
> 
> 赞同：0
> 
> 时间：2013-03-19T18:45:02.630
> 
> 标签：java, 2d, pixel, lighting

我正在用纯 Java 创建一个 2D 自上而下的平铺游戏，现在我正在尝试实现一种照明方式。

首先，关于我如何渲染的一些细节：有一个处理所有渲染的屏幕类。像素被放入一个数组中，该数组使用 a和`int[width * height]`绘制在实际屏幕上。`BufferedImage``Graphics.drawImage()`

我现在进行照明的方式是创建第二个`int[width * height]`数组，该数组包含应该从实际像素中减去的所有亮度。我尝试仅使用从`0f`到的浮点数`1f`来表示 RGB 强度。

因此，例如，环境照明为 0.3f。我所做的是一个像素到像素的操作，对于将要绘制的每个像素，它的 RGB 值被分解，减少 70% (1f - 0.3f)，重新组合成单​​个 int 并存储在辅助`int[width * height]`数组中。将像素传输到 BufferedImage 时，我减去辅助数组中的相应值并得到更暗的图像，正如预期的那样。

这是一个使图像变暗的示例，它工作正常，当实际点亮它们时出现问题：我给了玩家一个 lightRadius 和 3 个浅色分量浮点 (RGB)。在渲染播放器时，我还通过执行以下操作在辅助阵列内渲染它的照明：

```
int mask = subtractMask[xx + yy * width];

int mr = (mask >> 16) & 255;
int mg = (mask >> 8) & 255;
int mb = mask & 255;

mr -= (int) (dist * light.r * mr);
mg -= (int) (dist * light.g * mg);
mb -= (int) (dist * light.b * mb);

subtractMask[xx + yy * width] = mr << 16 | mg << 8 | mb; 
```

其中 dist 是一个数字，范围从`0f`到`1f`，使光随着与光源的距离而衰减，并且`light.r/g/b`是来自播放器的光的每个组成部分。这段代码所做的基本上是“将一点点从像素中取出的光还给它”。如您所见，mr、mg 和 mb 变小（-=），然后组合回将从相应像素中减去的数字内，从而使减法的结果更大（更轻）。对于白光，我得到了想要的结果：

![半径为 50 像素的光](../Images/eac0af475f40d9c7dcb42ff3f74ac9d2.png)

问题是当我只使用蓝色分量（r = 0f，g = 0f，b = 1f）时，得到这个：![具有相同 50 像素半径的蓝光](../Images/1081db755492307ad9ae245c873d1aa5.png)

当然，这可以通过瓷砖的蓝色值非常少的事实来解释，使环境光带走一小部分并让照明将这一小部分返回（如您所见，最大的效果是球员的裤子，是蓝色的）。我仍然无法想到的是一种使照明独立于从像素中带走多少亮度以及以任何方式组合组件看起来都不错的方法（我对第二张图像的预期结果是亮度，例如在第一个，但颜色为蓝色）。那么如何实现这样的效果呢？

另外，为了使光照循环，我简单地计算了光照 x^2 + y^2 <= radius^2，如果这句话是真的，像素应该点亮，执行我之前展示的代码。有没有更快的方法来计算这个？（我在这个效果上损失了近 50 FPS）。

编辑：我想要的效果类似于 2D 游戏胫骨。这是棕色像素上的蓝光：![胫骨 - 蓝光](../Images/1f269e7cdbca849921b8c88c086b7667.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T20:17:04.570

我认为最好的方法是首先*添加*环境光和玩家光值，将其限制在 [0...1] 范围内，*然后*将像素值相乘。

所以：

环境光： [ 0.3, 0.3, 0.3 ]
玩家光（在某个位置）： [ 0.0, 0.0, 1.0 ]
总光： [0.3, 0.3, 1.0 ]

原始像素值：[100,200,100]
输出像素值：[30,60,100]

如果这样做，您还可以只使用一个静态 float[] 来表示每个像素的光量，仅在环境光或播放器光发生变化时更改它。然后，您不需要计算每一帧的光，只需在整个图像上一次性应用它。

# asp.net - IE 中的表单身份验证

> ID：15507952
> 
> 赞同：1
> 
> 时间：2013-03-19T18:45:04.887
> 
> 标签：asp.net, forms-authentication

我似乎有一些人在问同样的问题，但到目前为止，没有一个解决方案对我有用，所以我想看看我是否做错了什么。我有一个使用 asp.net MVC 创建的站点，目前我正在使用表单身份验证来防止匿名用户浏览该站点。那段代码如下。

```
<authentication mode="Forms" >
  <forms loginUrl="~/login" timeout="15"/>
</authentication> 
```

然后我有一个登录控制器，让用户输入他们的用户名和密码，然后如果信息准确，则创建一个 authcookie。

```
if (password == encryptedPassword)
{
   FormsAuthentication.SetAuthCookie("user", true, model.userName);
} 
```

所有这些都可以在 Firefox 和 Chrome 中运行，并且在用户登录后，他就可以浏览该站点。但是在 IE 中，它不断返回登录屏幕，因为它不断将用户识别为匿名用户。我检查过，Auth cookie 要么从未创建，要么在您进入下一页时不会持续存在。我解决此问题的一些尝试涉及在 web.config 中使用 cookieless。唯一有效的是实际将 cookie 放入 URI 中的那个，而我们不能为站点提供它。然后我尝试设置 ticketCompatibilityMode="Framework40" 但那里也没有运气。

我确实看到了一个带有非字母数字字符的域名的错误。我目前使用 IP 直接访问域，所以我不知道周期是否会出现这个问题，但即使是我的本地主机也会遇到同样的问题。任何输入将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:26:49.320

参数应按以下顺序排列。

`FormsAuthentication.SetAuthCookie(model.userName, true, ...);`

或者

`FormsAuthentication.SetAuthCookie(model.userName, true);`

[http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.setauthcookie.aspx](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.setauthcookie.aspx)

# google-closure - jQuery to Closure（在屏幕上保留标题）

> ID：15507959
> 
> 赞同：0
> 
> 时间：2013-03-19T18:45:18.840
> 
> 标签：google-closure

我正在一个广泛使用 Closure 的网站上工作。当其他所有内容滚动时，我需要制作标题行。我只用几行代码就知道如何在 jQuery 中做到这一点：

```
$(window).load(function(){
    $('#main_box').scroll(function() {
        $('#header').css({
            'top':$('#main_box').scrollTop()
        });
    });
}); 
```

但是对于我的一生，我无法弄清楚或找到任何解释如何在 Closure 中做类似事情的文档/教程/示例。我该如何将 over 转换为 Closure？

更新：这是使用的 HTML 结构：

```
<div id="main_box">
    <div id="header"></div>
    <div id="content"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T01:00:51.860

如果您试图在页面滚动过去时将某些东西粘在视口的顶部，请查看 goog.ui.ScrollFloater -> [http://closure-library.googlecode.com/svn/docs/class_goog_ui_ScrollFloater.html](http://closure-library.googlecode.com/svn/docs/class_goog_ui_ScrollFloater.html)

但是对于这个特定的例子，你可以做......

```
var mainBox = goog.dom.getElement("main_box");
goog.events.listen(mainBox, goog.events.EventType.SCROLL, function(){
    goog.dom.getElement("header").style.top = goog.style.getPageOffsetTop(mainBox); 
}, false, this); 
```

我不确定 getPageOffsetTop 是否类似于 jQuery 中的 scrollTop() 方法，但我猜测样式库中的某些内容是（可能是 goog.style.getClientPosition()）-> [http://closure-library.googlecode。 com/svn/docs/closure_goog_style_style.js.html](http://closure-library.googlecode.com/svn/docs/closure_goog_style_style.js.html)

# java - 从动态模型生成视图

> ID：15507962
> 
> 赞同：0
> 
> 时间：2013-03-19T18:45:22.250
> 
> 标签：java, swing, oop, model-view-controller, polymorphism

我有一个可以在运行时修改的模型。这是一个例子：

```
public class JavaMethod
{
   private String            name;
   private List<Parameter>   parameters;
   private boolean           isConstructor; // this is an example
} 
```

参数可以有不同的类型（`integer`, `boolean`, `string`, `float`...）和不同的有效值。例如，一个名为*age*的整数参数只能保存正整数。

问题是我想用 Swing 生成一个视图来配置该`JavaMethod`对象，但我不确定正确的方法。

例如，作为正整数的*年龄*参数将链接到一个类扩展`JTextField`，以防止输入负任何字母。*另一个名为numberOfFingers*的整数参数的范围可以从 8 到 12 将链接到一个`JComboBox`允许在该范围内选择选项的类扩展。

我可以通过将生成适当的 Swing 组件的任务交给 Parameter 对象来使用多态性来做到这一点，但是我的模型会知道视图是如何生成的。

为这样的模型生成视图的正确方法是什么？我能想到的（不涉及视图生成的模型）是控制器中的一种巨大开关，它通过读取参数的详细信息来选择好的组件。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:27:21.033

为此，您需要创建 Customized `PlainDocument`。例如，对于`JTextField`仅包含年龄值，您应该创建`AgeDocument`如下所示的类：

```
import javax.swing.text.Document;
import javax.swing.text.PlainDocument;
import javax.swing.text.AttributeSet;
import javax.swing.text.BadLocationException;
class AgeDocument extends PlainDocument 
{
    @Override
    public void insertString(int offs, String str, AttributeSet a) throws BadLocationException 
    {
        /**Write your logic here**/
        if (str == null) 
        {
            return;
        }
        char[] arr = str.toCharArray();
        for (int i = 0; i < arr.length; i++) 
        {
            if (!Character.isDigit(arr[i]))//Checking for Non Numeric.
            {
                return;
            }
            if (Character.getNumericValue(arr[i])==0 )
            {
                try
                {
                    int val = Integer.parseInt(getText(0,offs));
                    if (val == 0) 
                    {
                        super.insertString(offs,"", a);//Don't allow to put 0 as age.
                        return;
                    }
                }
                catch (Exception ex){return;}
            }
        }
        super.insertString(offs, new String(str), a);
    }
} 
```

每当您想将此`AgeDocument`属性设置为`JTextField`对象时，您只需编写`JTextFieldOBject.setDocument(new AgeDocument ())`

同样，您可以独立创建多个模型。并且可以在代码中的任何地方使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T19:35:42.407

解决此问题的最佳方法是使用访问者模式。

例如 ：

```
import java.awt.EventQueue;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.WindowConstants;

public class Main
{
    public static class JavaMethod implements Iterable<Parameter>
    {
        private List<Parameter> parameters;

        public JavaMethod()
        {
            this.parameters = new ArrayList<>();
            // This is an example
            this.parameters.add(new IntegerParameter());
            this.parameters.add(new StringParameter());
        }

        @Override
        public Iterator<Parameter> iterator()
        {
            return this.parameters.iterator();
        }
    }

    public static interface Parameter
    {
        public void accept(ParameterVisitor visitor);
    }

    public static class IntegerParameter implements Parameter
    {
        public int value = 10;

        @Override
        public void accept(final ParameterVisitor visitor)
        {
            visitor.visit(this);
        }
    }

    public static class StringParameter implements Parameter
    {
        public String value = "Hello";

        @Override
        public void accept(final ParameterVisitor visitor)
        {
            visitor.visit(this);
        }
    }

    public static interface ParameterVisitor
    {
        void visit(StringParameter stringParameter);
        void visit(IntegerParameter integerParameter);
    }

    public static class ParameterSwingVisitor implements ParameterVisitor
    {
        private final JComponent container;

        public ParameterSwingVisitor(final JComponent container)
        {
            this.container = container;
        }

        @Override
        public void visit(final StringParameter stringParameter)
        {
            this.container.add(new JTextField(stringParameter.value));
        }

        @Override
        public void visit(final IntegerParameter integerParameter)
        {
            // This could be a custom component to pick numbers
            this.container.add(new JLabel(String
                    .valueOf(integerParameter.value)));
        }

    }

    public static void main(final String[] args)
    {
        EventQueue.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                JPanel myPanel = new JPanel(); // view
                JavaMethod myMethod = new JavaMethod(); // model

                final ParameterVisitor visitor = new ParameterSwingVisitor(
                        myPanel);

                for (final Parameter picked : myMethod)
                {
                    picked.accept(visitor); // This will add the appropriate
                                            // swing
                                            // component
                }

                JFrame myFrame = new JFrame("Visitor pattern");
                myFrame.setContentPane(myPanel);
                myFrame.setVisible(true);
                myFrame.setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
                myFrame.setSize(500, 500);
            }
        });
    }
} 
```

有关此模式的更多信息，请[点击此处](http://en.wikipedia.org/wiki/Visitor_pattern)。

# android - android应用程序中多个用户的应用内计费

> ID：15507964
> 
> 赞同：1
> 
> 时间：2013-03-19T18:45:27.320
> 
> 标签：android, in-app-purchase, in-app-billing, android-multiple-users

是否可以在我的应用程序中使用谷歌的应用内计费机制为多个用户购买订阅？我在自己的服务器上实现了登录/注册机制，用户可以购买订阅以获取新闻。但是当我注销并为另一个用户登录时，我没有那个订阅并且必须再次付费。我认为IAB android机制不可能，但我宁愿问

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:33:53.453

我想我有一个解决方案。订阅实际上只是可以购买的简单一次性项目，我自己的服务器将处理到期日期。

# php - MySQL 新库和记事本++

> ID：15507968
> 
> 赞同：1
> 
> 时间：2013-03-19T18:45:39.797
> 
> 标签：php, mysql, mysqli, notepad++

据我了解，普通的 mysql`mysql.*`方法库已被该库所取代`mysqli.*`。从本质上讲，我的理解是新库使用了所有旧方法，只是在方法名称的末尾加上了字母“i”。三个问题：

1.  为什么 MySQL 更新了这个库，它包含了哪些新特性？
2.  对于 Notepad++ 的用户，可以从下拉菜单中选择语言，然后像 IDE 一样突出显示代码，例如方法为蓝色并以粗体显示。当我第一次写一些 MySQL 代码时，我使用了旧的库方法，没有意识到进步。当我将其转换为新的库方法时，蓝色/粗体突出显示消失并恢复为正常字体。当我删除方法名称中的“i”时，它再次突出显示。为什么 Notepad++ 不能识别新方法？
3.  新方法是必需的吗（即旧方法在 PHP 中是否仍然有效）？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-09-30T18:34:55.857

使用记事本++，突出显示mysqli，然后

1.  打开记事本选择设置
2.  选择样式配置器
3.  在语言中选择 php
4.  在样式中选择 WORD
5.  在用户定义的关键字中输入要突出显示的关键字。
    确保在假（第一项）之后有一个空格。
    下面是一个列表（这是我使用的。）
6.  保存并关闭。

True false
mysqli_affected_rows
mysqli_autocommit
mysqli_change_user
mysqli_character_set_name
mysqli_close
mysqli_commit
mysqli_connect_errno
mysqli_connect_error
mysqli_connect
mysqli_data_seek
mysqli_debug
mysqli_dump_debug_info
mysqli_errno
mysqli_error_list
mysqli_error
mysqli_fetch_all
mysqli_fetch_array
mysqli_fetch_assoc
mysqli_fetch_field_direct
mysqli_fetch_field
mysqli_fetch_fields
mysqli_fetch_lengths
mysqli_fetch_object
mysqli_fetch_row
mysqli_field_count
mysqli_field_seek
mysqli_field_tell
mysqli_free_result
mysqli_get_charset
mysqli_get_client_info
mysqli_get_client_stats
mysqli_get_client_version
mysqli_get_connection_stats
mysqli_get_host_info
mysqli_get_proto_info
mysqli_get_server_info
mysqli_get_server_version
mysqli_info
mysqli_init
mysqli_insert_id
mysql_kill
mysqli_more_results
mysqli_multi_query
mysqli_next_result
mysqli_num_fields
mysqli_num_rows
mysqli_options
mysqli_ping
mysqli_prepare
mysqli_query
mysqli_real_connect
mysqli_real_escape_string
mysqli_real_query
mysqli_reap_async_query
mysqli_refresh
mysqli_rollback
mysqli_select_db
mysqli_set_charset
mysqli_set_local_infile_default
mysqli_set_local_infile_handler
mysqli_sqlstate
mysqli_ssl_set
mysqli_stat
mysqli_stmt_init
mysqli_store_result
mysqli_thread_id
mysqli_thread_
安全
mysqli_use

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T18:54:02.310

我不能为你回答第一个问题，因为我不知道细节。

2：不知道为什么默认不包含，但是可以手动添加。
转到设置-> 样式配置器，然后在语言下选择 php。在样式下选择 WORD。
在名为“用户定义的关键字”的框中添加您使用的所有 mysqli_* 函数。从现在开始，它们将被突出显示。

3：目前，它们会起作用。它在 5.5 中已被弃用，这意味着当您使用它时它会发出警告。最终，它将被完全删除。不过，切换到 mysqli 以便升级时不会中断。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T18:51:30.787

来自 PHP.net 关于[数据库的常见问题解答](http://www.php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated)

> **为什么不鼓励使用我使用了 10 多年的 MySQL 扩展 (ext/mysql)？是否已弃用？我改用什么？我该如何迁移？**
> 
> [如选择 MySQL API](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)部分所述，共有三个 MySQL 扩展。旧的 API 不应该被使用，总有一天它会被弃用并最终从 PHP 中删除。这是一个流行的扩展，因此这将是一个缓慢的过程，但强烈建议您使用[mysqli](http://www.php.net/manual/en/book.mysqli.php)或 [PDO_MySQL](http://www.php.net/manual/en/ref.pdo-mysql.php)编写所有新代码。
> 
> 迁移脚本目前不可用，尽管 mysqli API 包含过程和 OOP API，过程版本类似于 ext/mysql。
> 
> 不能混合扩展。因此，例如，将 `mysqli`连接传递给`PDO_MySQL`or`ext/mysql`将不起作用。

* * *

至于您关于 Notepad++ 功能的问题，您必须在他们的官方论坛/社区上提问。

* * *

您的第三个问题的答复隐藏在上面的摘录中：

旧的 API**不应该被使用**，总有一天它会被*弃用*并*最终*从 PHP 中删除。这是一个流行的扩展，所以*这将是一个缓慢的过程*，但**强烈建议**您使用or**编写**所有**新代码**。[`mysqli`](http://www.php.net/manual/en/book.mysqli.php)[`PDO_MySQL`](http://www.php.net/manual/en/ref.pdo-mysql.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T18:51:43.610

> 从本质上讲，我的理解是新库使用所有旧方法，只是在方法名称的末尾标记了字母“i”。

不必要。`mysqli`函数现在有两种形式，一种是过程式的（如旧`mysql`的），一种是面向对象的。（例如`$result->fetch_array()`）。

来自[php.net](http://www.php.net/manual/en/mysqli.quickstart.dual-interface.php)

> mysqli 扩展具有双重接口。它支持过程和面向对象的编程范式。

一些新`mysqli`函数还接受与旧函数不同的参数。最普遍的是，大多数函数现在都需要一个`mysqli`链接（`mysqli`连接）作为它们的参数。

至于为什么要改，显然有几个原因。最重要的是安全性和稳定性，引入新的 OO 样式一定是原因之一。

看看这个的好处：[MySQLi 扩展的好处](https://stackoverflow.com/questions/1171344/advantages-of-mysqli-over-mysql)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T18:55:59.023

1）根据[php.net的概述](http://php.net/manual/en/mysqli.overview.php)

*   面向对象的接口
*   支持准备好的报表
*   支持多个语句
*   交易支持
*   增强的调试功能
*   嵌入式服务器支持

2）我从来没有用过Notepad++，我用的是Sublime Text 2。文本编辑器可能不适合每种语言，所以也许有一个用于mysqli的Notepad++插件？

3) [MySql 概述](http://www.php.net/manual/en/intro.mysql.php)说：

> 此扩展自 PHP 5.5.0 起已弃用，不推荐用于编写新代码，因为它将在未来被删除。

进行切换可能是一个好主意，它肯定不会受到伤害，并且及时了解 PHP 与 MySql 交互的方式肯定会很好。

* * *

编辑：对我来说，编写 MySqli 比 MySql 更流畅，因为在使用 MySqli 类时我不必在查询末尾包含连接。

```
$query = $mysqli->query("SELECT * FROM table"); 
```

代替

```
$query = mysql_query("SELECT * FROM table",$link); 
```

# css - Twitter-Bootstrap 中的响应井？

> ID：15507975
> 
> 赞同：0
> 
> 时间：2013-03-19T18:46:21.550
> 
> 标签：css, html, twitter-bootstrap, responsive-design

鉴于这种包装：

```
<div class="container">
    <div class="row-fluid swell">
    <div class="span9">
        hello world
    </div>
</div>
</div> 
```

使用这种样式（在 twitter-bootstrap 上）：

```
.swell {
    background-color: #F5F5F5;
    border: 1px solid #E3E3E3;
    border-radius: 4px 4px 4px 4px;
    box-shadow: 0 1px 1px rgba(0, 0, 0, 0.05) inset;
    margin-bottom: 20px;
    min-height: 20px;
    padding: 19px;
} 
```

### 如何获得优雅的响应？

（在[Plnkr](http://embed.plnkr.co/NuUnyNvTJ0JzBEftdkJI)中您可以看到网站正在运行；拖动浏览器窗口的一侧以查看问题）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:02:22.147

不要让 div 既成行又成井：

```
<div class="row-fluid">
  <div class="swell">
    <div class="span9">
     hello world
    </div>
  </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:42:36.420

想出了解决办法：

```
<div class="swell">
    <div class="row-fluid">
        <div class="span9">
            Hello world!
        </div>
    </div>
</div> 
```

# ios - 无法显示子视图全屏尺寸和横向

> ID：15507976
> 
> 赞同：0
> 
> 时间：2013-03-19T18:46:21.927
> 
> 标签：ios, uiview, orientation, landscape, subview

我正在向视图控制器添加一个子视图，其尺寸为 1024(W) x 768(H)。我的应用程序设置为仅支持 plist 中的横向，但我的子视图将始终以纵向显示，其底部从屏幕上消失。

我的监督：

```
#import "TSTViewController.h"
#import "TSTContentViewController.h"

@interface TSTViewController ()
@property (nonatomic, strong) TSTContentViewController *tcvc;
@end

@implementation TSTViewController

- (void)loadView
{
    UIView *rootView = [[UIView alloc] initWithFrame:CGRectMake(0.0f, 0.0f, 1024.0f, 768.0f)];
    [rootView setBackgroundColor:[UIColor yellowColor]];
    self.view = rootView;
    _tcvc = [[TSTContentViewController alloc] initWithNibName:@"TSTContentViewController" bundle:nil];
    [rootView addSubview:_tcvc.view];
}

- (void)viewDidAppear:(BOOL)animated
{
    NSLog(@"H:%f W:%f; H:%f W:%f", self.view.frame.size.height, self.view.frame.size.width, _tcvc.view.frame.size.height, _tcvc.view.frame.size.width);
}

@end 
```

我的应用委托：

```
#import "TSTAppDelegate.h"

#import "TSTViewController.h"

@implementation TSTAppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.viewController = [[TSTViewController alloc] init];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
}

@end 
```

我的子视图 (TSTContentViewController) 没有自定义代码，并且笔尖尺寸为 (1024W X 768H)，背景为灰色。

结果似乎无条件地看起来像：

（黄色超视图，灰色子视图） ![在此处输入图像描述](../Images/f64b3ad409cb2231c2d51c86c03530ce.png)

viewDidAppear 中的 NSLog 打印出两个视图都有纵向尺寸，即使是黄色的，实际上看起来就像是横向的。

有任何想法吗？

**编辑以获取更多详细信息：**

如果子视图的宽度只小了一个像素，视图就会像它应该的那样变成横向的（见下面的黄色细条）。

![在此处输入图像描述](../Images/09d5811e4fe655d4db43519ea1800bad.png)

根据我的观察，只有完全全屏才会导致这种子视图旋转。越来越小的框架保留了笔尖中定义的尺寸。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:24:45.813

如果您使用自动布局，那么您只需要为您的子视图添加几个约束：

```
- (void)loadView
{
    UIView *rootView = [[UIView alloc] initWithFrame:CGRectMake(0.0f, 0.0f, 1024.0f, 768.0f)];
    [rootView setBackgroundColor:[UIColor yellowColor]];
    self.view = rootView;
    TSTContentViewController* _tcvc = [[TSTContentViewController alloc] initWithNibName:@"TSTContentViewController" bundle:nil];
    [self.view addSubview:_tcvc.view];
    [_tcvc.view setTranslatesAutoresizingMaskIntoConstraints:NO];
    [self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"|[view]|" options:0 metrics:nil views:@{@"view":_tcvc.view}]];
    [self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[view]|" options:0 metrics:nil views:@{@"view":_tcvc.view}]];
} 
```

# jquery - 使用 jQuery 为动画添加下划线

> ID：15507979
> 
> 赞同：0
> 
> 时间：2013-03-19T18:46:22.617
> 
> 标签：jquery, animation, underline

我正在尝试在没有成功的情况下在链接上悬停动画，这是我的代码：

HTML

```
<ul>
    <li>
        <a class="border" href="#">HOME</a>
    </li>
    <li>
        <a class="border" href="#">TOUR</a>
    </li>
    <li>
        <a class="border" href="#">CONTACTUS</a>
    </li>
</ul> 
```

脚本

```
$(document).ready(function () {
    $(".border").hover(function () {
        $(this).animate({
            borderBottom: '2px solid #3399FF',
            width: '46%'
        }, 500);
    });
}); 
```

[小提琴](http://jsfiddle.net/2GJrW/3/)

我知道它看起来很糟糕，但是请帮忙！

感谢您的考虑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T18:48:27.730

你还没有包含 jQuery 库... [http://jsfiddle.net/2GJrW/4/](http://jsfiddle.net/2GJrW/4/)

```
$(document).ready(function () {
    $(".border").hover(function () {
        $(this).animate({
            borderBottom: '2px solid #3399FF',
            width : '46%'
        }, 500);
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T18:51:19.770

它有效，看到没有加载 jQuery。

现在看：http: [//jsfiddle.net/2GJrW/6/](http://jsfiddle.net/2GJrW/6/)

```
$(document).ready(function(){

        $(".border").hover(function(){
            $(this).animate({ 

                borderBottom :'2px solid #3399FF',
                width:'46%' 

            }, 500 );
        });

    }); 
```

# ruby-on-rails - Gemfile 组依赖项

> ID：15507982
> 
> 赞同：1
> 
> 时间：2013-03-19T18:46:40.457
> 
> 标签：ruby-on-rails, ruby, rake, capistrano, gemfile

简而言之，我有一个 gemfile 包含

```
group :assets do
  gem 'my_gem'
end 
```

`my_rake_task`，一个依赖于的 rake 任务`:environment`，一个需要的 Rails 初始化程序`my_gem`，以及以下 Capistrano 片段：

```
task :run_my_rake_task, :roles => :db do
  run "cd #{release_path} && bundle exec rake RAILS_ENV=#{rails_env} my_rake_task"
end 
```

就目前情况而言，调用 Capistrano 配方会导致初始化程序引发错误，指出常量 from`my_gem`不可用。我怎样才能使 rake 任务拉入`:assets`组 gems 或将另一个组添加到 gemfile 以便这个初始化程序停止破坏？（请注意，我当然可以移出`my_gem`小组`:assets`，一切正常，但这似乎是我确信可以避免的廉价黑客答案。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:29:56.427

Open `config/application.rb`. Look at the top of it. Comment out this line:

```
Bundler.require(*Rails.groups(:assets => %w(development test))) 
```

And uncomment this:

```
Bundler.require(:default, :assets, Rails.env) 
```

So it will load your assets group gems when app loading.

But I think that if you need to use your `my_gem` right in the initializer of the application, then you need to move it out from assets group.

You can get more information about bundler grouping from this article: [http://iain.nl/getting-the-most-out-of-bundler-groups](http://iain.nl/getting-the-most-out-of-bundler-groups)

# c# - xbap 写入服务器

> ID：15507990
> 
> 赞同：1
> 
> 时间：2013-03-19T18:47:09.787
> 
> 标签：c#, file, file-io, xbap

使用 XBAP 我知道可以从服务器读取文件，但是无论如何可以将文件写入服务器吗？

# ios - 检查自午夜以来是否已加载视图

> ID：15507992
> 
> 赞同：5
> 
> 时间：2013-03-19T18:47:16.850
> 
> 标签：ios, objective-c

我有一个 ViewController 对数组执行随机洗牌并将文本吐出到标签（在`viewDidLoad`方法中）。问题是，每当我导航到同一个 ViewController 时，它都会再次执行随机播放，我只需要它每天随机播放一次。

所以我需要检查这个 ViewController 是否已经在同一天（即从午夜开始）加载，然后我可以将 shuffle 放入 if 语句中。无论应用程序是否打开，我都可以在午夜安排随机播放吗？

我已经研究过将布尔值设置为`NSUserDefaults`：类似`hasLoadedSinceMidnight`但无法弄清楚如何在午夜重置布尔值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T01:18:20.840

您可以实现 AppDelegate 的显着TimeChange 方法：

```
-(void)applicationSignificantTimeChange:(UIApplication *)application {
    //tell your view to shuffle
} 
```

此方法在每个午夜和重要的时间更改期间（例如时区更改）调用。如果您的应用在收到事件时关闭，则该方法将在您的应用下一次打开时调用。

更多信息可以在[这里查看](http://developer.apple.com/library/ios/documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIApplicationDelegate/applicationSignificantTimeChange:)

在 ViewController 中而不是在 AppDelegate 中执行相同操作的另一种方法是添加：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(performAction) name:UIApplicationSignificantTimeChangeNotification object:nil]; 
```

然后您可以在`-(void)performAction;`该 ViewController 的方法中执行您的随机播放操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:22:52.330

`BOOL`您可以存储`NSDate`上次随机播放的日期/时间 ( )，而不是存储 a 。

然后通过比较存储的日期和`viewDidAppear`.

请参阅`NSTime`文档：http: [//developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html)

和`NSDateFormatter`文档： [https ://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40003643](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40003643)

* * *

更新：

根据要求，这里是一些示例代码。诚然，可能有更好的解决方案，但我相信这段代码片段将帮助您解决问题。这样做是检查是否有使用 保存的日期`NSUserDefaults`，然后与当前日期进行比较。如果日期不匹配，则打乱数组，然后保存当前日期（再次使用`NSUserDefaults`）。（我冒昧地假设时间确实会继续向前发展，所以它不会检查以确保它`lastSavedDate`在. ）**之前**`currentDate`。）

```
NSDate *currentDate = [[NSDate alloc] init];
NSDate *lastShuffleDate = [[NSUserDefaults standardUserDefaults] objectForKey:@"lastShuffleDate"];

// check to see if there is a prior shuffle date
// if there is not, shuffle the array and save the current date
if (!lastShuffleDate) {
    NSLog(@"No object set for 'lastShuffleDate'");

    //[self shuffleMyArray];

    [[NSUserDefaults standardUserDefaults] setObject:currentDate forKey:@"lastShuffleDate"];
    return;
}

// set up the date formatter
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
NSLocale *usLocale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US"];
[dateFormatter setLocale:usLocale];
[dateFormatter setDateStyle:NSDateFormatterShortStyle];

NSLog(@"Current Date: %@", [dateFormatter stringFromDate:currentDate]);
NSLog(@"Saved Date: %@", [dateFormatter stringFromDate:lastShuffleDate]);

// check to see if the dates are the same by comparing the dates as a string
if (![[dateFormatter stringFromDate:currentDate] isEqualToString:[dateFormatter stringFromDate:lastShuffleDate]]) {
    NSLog(@"Dates are different...!");

    //[self shuffleMyArray];

} else {
    NSLog(@"Dates are the same... (midnight has not passed)");
}

// save the time of the last shuffle
[[NSUserDefaults standardUserDefaults] setObject:currentDate forKey:@"lastShuffleDate"]; 
```

在这一点上，您没有真正的理由查看时间，但我已将其包括在内以防您好奇。

```
// remote dateStyle and set timeStyle to check times
[dateFormatter setDateStyle:NSDateFormatterNoStyle];
[dateFormatter setTimeStyle:NSDateFormatterShortStyle];
NSLog(@"Current Time: %@", [dateFormatter stringFromDate:currentDate]);
NSLog(@"Saved Time: %@", [dateFormatter stringFromDate:lastShuffleDate]); 
```

# python - 在 Numpy/Python 中快速稀疏矩阵

> ID：15507993
> 
> 赞同：3
> 
> 时间：2013-03-19T18:47:29.303
> 
> 标签：python, numpy

我需要（快速）稀疏矩阵。

Rarefaction - 将丰度矩阵转换为均匀的采样深度。

在此示例中，每一行是一个样本，采样深度是该行的总和。我想按样本随机抽样（替换）矩阵`min(rowsums(matrix))`。

假设我有一个矩阵：

```
>>> m = [ [0, 9, 0],
...       [0, 3, 3],
...       [0, 4, 4] ] 
```

`min(rowsums(matrix))`稀疏函数以替换时间（在本例中为 6）逐行随机抽样。

```
>>> rf = rarefaction(m)
>>> rf
    [ [0, 6, 0],  # sum = 6
      [0, 3, 3],  # sum = 6
      [0, 3, 3] ] # sum = 6 
```

结果是随机的，但行总和始终相同。

```
>>> rf = rarefaction(m)
>>> rf
    [ [0, 6, 0],   # sum = 6
      [0, 2, 4],   # sum = 6
      [0, 4, 2], ] # sum = 6 
```

[PyCogent](https://github.com/pycogent/pycogent/blob/master/cogent/maths/stats/rarefaction.py#L85-L98)有一个函数可以逐行执行此操作，但是在大型矩阵上非常慢。

我感觉 Numpy 中有一个函数可以做到这一点，但我不确定它会被调用什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-23T19:26:00.327

```
import numpy as np
from numpy.random import RandomState

def rarefaction(M, seed=0):
    prng = RandomState(seed) # reproducible results
    noccur = np.sum(M, axis=1) # number of occurrences for each sample
    nvar = M.shape[1] # number of variables
    depth = np.min(noccur) # sampling depth

    Mrarefied = np.empty_like(M)
    for i in range(M.shape[0]): # for each sample
        p = M[i] / float(noccur[i]) # relative frequency / probability
        choice = prng.choice(nvar, depth, p=p)
        Mrarefied[i] = np.bincount(choice, minlength=nvar)

    return Mrarefied 
```

例子：

```
>>> M = np.array([[0, 9, 0], [0, 3, 3], [0, 4, 4]])
>>> M
array([[0, 9, 0],
       [0, 3, 3],
       [0, 4, 4]])
>>> rarefaction(M)
array([[0, 6, 0],
       [0, 2, 4],
       [0, 3, 3]])
>>> rarefaction(M, seed=1)
array([[0, 6, 0],
       [0, 4, 2],
       [0, 3, 3]])
>>> rarefaction(M, seed=2)
array([[0, 6, 0],
       [0, 3, 3],
       [0, 3, 3]]) 
```

干杯，戴维德

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T02:32:48.690

我认为这个问题并不完全清楚。我想稀疏矩阵为您提供了从原始矩阵的每个系数中获取的样本数量？

查看链接中的代码，可能会加快速度。对转置矩阵进行操作并重写链接代码以对列而不是行进行操作。因为这将允许您的处理器更好地缓存它采样的值，即内存中的跳转更少。

其余的就像我会做的那样，使用 numpy （不一定意味着这是最有效的方法）。

如果您需要它更快，您可以尝试用 C++ 编写函数并使用 scipy.weave 将其包含到您的 python 中。在 C++ 中，我会查找每一行并构建一个大于 0 的位置查找表，生成`min(rowsums(matrix))`范围内等于查找表中项目数的整数。我会累积查找表中每个位置的绘制频率，然后将这些数字放回数组中的正确位置。该代码应该只是几行代码。

# java - @WebServlet 注释 web.xml 欢迎文件

> ID：15507996
> 
> 赞同：7
> 
> 时间：2013-03-19T18:47:36.290
> 
> 标签：java, jsp, servlets, web.xml, deployment-descriptor

我想设置我的 JSP/JavaBeans 项目的欢迎文件。我有一个名为“Controller.java”的 servlet，带有以下 @WebServlet 注释：

```
@WebServlet(name="Controller", urlPatterns={"/login", "/show_dbs"}) 
```

我有一个包含以下内容的 web.xml 文件：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
         http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0">

    <welcome-file-list>
        <welcome-file>Controller</welcome-file>
    </welcome-file-list>
</web-app> 
```

几乎一切顺利，我可以打开`http://localhost:8080/PROJECT/login`并`http://localhost:8080/PROJECT/show_dbs`来到Controller.java。但是当我打开`http://localhost:8080/PROJECT/`我得到一个 404 错误。

我正在使用带有“动态 Web 项目”的 Eclipse，Controller.java 文件位于 /src（默认包）下，web.xml 文件位于 /WebContent/WEB-INF 下。

我希望你能给我一个小费。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T14:29:39.790

感谢您的帮助。我的解决方案来了：

如果要将 servlet 设置为欢迎文件，则必须执行以下操作：

在 web.xml 中将标准 html 定义为欢迎文件，例如 index.html：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
         http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0">

    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
    </welcome-file-list>
</web-app> 
```

确保此文件 (index.html)**不存在**。

在@WebServlet 中定义您的 urlPatterns，如下所示：

```
@WebServlet(name="Controller", urlPatterns={"/index.html", "/login", "/show_dbs"}) 
```

现在对 (root) 的每个请求都`http://.../PROJECT/`将被重定向到`http://.../PROJECT/index.html`，这将调用 servlet。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-20T20:18:45.183

在欢迎文件列表中，您必须**指定 URI**。但是您已经指定**了 servlet 的名称**。

引用[**Java™ Servlet Specification 3.0 版**](http://download.oracle.com/otndocs/jcp/servlet-3.0-mrel-eval-oth-JSpec/)（强调我的）：

> ## 10.10 欢迎文件
> 
> Web 应用程序开发人员可以 在 Web 应用程序部署描述符中定义称为欢迎文件**的部分 URI 的有序列表。**Web 应用程序部署描述符模式中描述了列表的部署描述符语法。
> 
> 此机制的目的是允许部署者指定部分 URI 的有序列表，以便容器在请求对应于未映射到 Web 组件的 WAR 中的目录条目的 URI 时使用附加到 URI . 这种请求称为有效的部分请求。
> 
> 通过以下常见示例可以清楚地说明此工具的用途：`'index.html'`可以定义欢迎文件，以便返回对类似 URL 的请求 `host:port/webapp/directory/`，其中`'directory'`WAR 中的条目未映射到 servlet 或 JSP 页面给客户`'host:port/webapp/directory/index.html'`。
> 
> 如果 Web 容器接收到有效的部分请求，则 Web 容器必须检查部署描述符中定义的欢迎文件列表。欢迎文件列表是**部分 URL 的有序列表，没有尾随或前导 /。**Web 服务器必须按照部署描述符中指定的顺序将每个欢迎文件附加到部分请求，并检查 WAR 中的静态资源是否映射到该请求 URI。如果未找到匹配项，**Web 服务器必须再次按照部署描述符中指定的顺序将每个欢迎文件附加到部分请求并检查 servlet 是否映射到该请求 URI。**Web 容器必须将请求发送到 WAR 中匹配的第一个资源。容器可以使用转发、重定向或与直接请求无法区分的容器特定机制将请求发送到欢迎资源。
> 
> 如果以所描述的方式没有找到匹配的欢迎文件，则容器可以以它认为合适的方式处理请求。对于某些配置，这可能意味着返回目录列表或对于其他配置返回 404 响应。

* * *

附言

另请参阅第 10.10 章规范中的示例

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T19:56:57.910

这就是您的 web.xml 应该是的。创建一个 index.jsp。使用 index.jsp 作为欢迎文件。控制器类是您的 sevlet。因此，在您的 web.xml 中定义一个 servlet，如下所示。这应该会导致所有请求都被定向到 Controller 类。而且您应该仍然可以访问 localhost:8080/PROJECT/，在这种情况下，它将被定向到您的欢迎文件。

如果你不想创建 index.jsp，你可以使用你现有的 jsp 文件，可能是你的 login.jsp 文件作为你的欢迎文件。在这种情况下，只需将 index.jsp 替换为 login.jsp

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
         http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0">

    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>
    <servlet>   
        <servlet-name>Controller</servlet-name>
        <servlet-class>com.company.Controller</servlet-class>   
    </servlet>
    <servlet-mapping>
        <servlet-name>Controller</servlet-name>
        <url-pattern>*</url-pattern>
    </servlet-mapping>  
</web-app> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-12T22:24:14.073

默认欢迎文件是`index.html`，因此只需添加 URL 模式。

```
@WebServlet(name="Controller", urlPatterns={"/index.html","/login", "/show_dbs"}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-18T13:40:41.430

您可以在@WebServlet 注释中的 urlPatterns 中指定 url“/Controller”。我认为它会起作用。

# java - 如何防止 Gson 将整数表示为浮点数

> ID：15507997
> 
> 赞同：81
> 
> 时间：2013-03-19T18:47:49.930
> 
> 标签：java, android, gson

当我尝试将字符串转换为 json 时，Gson 有一些奇怪的行为。下面的代码将字符串草稿转换为 json 响应。有没有办法阻止 gson 将 '.0 添加到所有整数值？

```
ArrayList<Hashtable<String, Object>> responses;
Type ResponseList = new TypeToken<ArrayList<Hashtable<String, Object>>>() {}.getType();
responses = new Gson().fromJson(draft, ResponseList);

draft:
[ {"id":4077395,"field_id":242566,"body":""},
  {"id":4077398,"field_id":242569,"body":[[273019,0],[273020,1],[273021,0]]},
  {"id":4077399,"field_id":242570,"body":[[273022,0],[273023,1],[273024,0]]}
]

responses:
[ {id=4077395.0, body=, field_id=242566.0},
  {id=4077398.0, body=[[273019.0, 0.0], [273020.0, 1.0], [273021.0, 0.0]], field_id=242569.0},
  {id=4077399.0, body=[[273022.0, 0.0], [273023.0, 1.0], [273024.0, 0.0]], field_id=242570.0}
] 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-03-19T19:04:55.623

您告诉 Gson 它正在寻找字符串到对象的映射列表，这实质上是为了对对象的类型做出最佳猜测。由于[JSON 不区分整数和浮点字段，](http://json.org/)因此 Gson 必须默认为数字字段的 Float/Double。

Gson 从根本上构建是为了检查您要填充的对象的类型，以确定如何解析数据。如果你不给它任何提示，它就不会很好地工作。一种选择是定义一个自定义的 JsonDeserializer，但最好不要使用 HashMap（并且绝对不要使用 Hashtable！），而是向 Gson 提供有关它所期望的数据类型的更多信息。

```
class Response {
  int id;
  int field_id;
  ArrayList<ArrayList<Integer>> body; // or whatever type is most apropriate
}

responses = new Gson()
            .fromJson(draft, new TypeToken<ArrayList<Response>>(){}.getType()); 
```

同样，Gson 的重点是将结构化数据无缝转换为结构化对象。如果您要求它创建一个几乎未定义的结构，例如对象映射列表，那么您就完全违背了 Gson 的观点，还不如使用一些更简单的 JSON 解析器。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2013-12-27T15:40:30.813

这有效：

```
 Gson gson = new GsonBuilder().
        registerTypeAdapter(Double.class,  new JsonSerializer<Double>() {   

    @Override
    public JsonElement serialize(Double src, Type typeOfSrc, JsonSerializationContext context) {
        if(src == src.longValue())
            return new JsonPrimitive(src.longValue());          
        return new JsonPrimitive(src);
    }
 }).create(); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2018-03-28T08:40:24.370

基本上，这个问题没有完美的答案。所有“解决方案”仅适用于某些情况。这是向 gson 团队报告的问题，不幸的是，他们似乎坚持认为“javascript 没有整数类型”，好像他们没有意识到 gson 是用于 java 而不是 javascript。所以他们直到今天（现在是 2018 年）都拒绝修复它，尽管像杰克逊这样的其他库根本没有这样的问题，尽管修复它很容易。因此，您可能必须自己从 gson 源代码解决问题并构建自己的 gson.jar。源文件是`gson/src/main/java/com/google/gson/internal/bind/ObjectTypeAdapter.java`

```
case NUMBER:
   return in.nextDouble(); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2021-12-04T20:29:35.717

该库从 2.8.9 版本开始提供了一个解决方案。

我们可以使用 setObjectToNumberStrategy 设置如何将 Object 转换为数字

在这种情况下，LONG_OR_DOUBLE 的实现将起作用。可以用作

```
GsonBuilder()
    .setObjectToNumberStrategy(ToNumberPolicy.LONG_OR_DOUBLE)
    .create() 
```

详情请参考以下链接

[https://github.com/google/gson/pull/1290](https://github.com/google/gson/pull/1290)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-12-11T16:10:31.960

我参加聚会迟到了，但我自己也遇到了。就我而言，我不想在我的 ArrayList 中指定 Integer 类型 - 因为它可能是 String 或 Integer。

我的解决方案如下：

```
GsonBuilder gsonBuilder = new GsonBuilder();
gsonBuilder.registerTypeAdapter(Double.class,  new JsonSerializer<Double>() {

    public JsonElement serialize(Double src, Type typeOfSrc,
                JsonSerializationContext context) {
            Integer value = (int)Math.round(src);
            return new JsonPrimitive(value);
        }
    });

Gson gs = gsonBuilder.create(); 
```

我没有使用默认的 Gson 定义`Gson gs = new Gson();`，而是重写了 Double.class 序列化以返回一个整数。

就我而言，我的 JSON 中有字符串和整数，但我没有任何双精度数，所以这不会造成问题。

如果您需要双精度或浮点值，我想可以添加一些逻辑来测试每种数据类型特定属性的值并返回适当的值。就像是

```
if(/*source has a decimal point*/){
  return new JsonPrimitive(src); 
} else if (/* source has some attribute of a Float */){
  Float value = /*convert the src value from double to a Float */;
  return new JsonPrimitive(value);
} else {
  //it looks like an integer
  Integer value = (int)Math.round(src);
  return new JsonPrimitive(value);
} 
```

我不知道如何测试或转换这些数据类型，但这应该会让你走上正确的道路。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-09-09T02:22:59.467

这对我有用。

第一步：将gson中的ObjectTypeAdapter复制到项目中，保持路径和gson中的一样这样

```
com
  - xxx
    - xxx
com
  - google
    - gson
      - internal
        - bind
          ObjectTypeAdapter 
```

第二步：修改 ObjectTypeAdapter

```
case NUMBER:
  return in.nextDouble(); 
```

修改为

```
case NUMBER:
  String number = in.nextString();
  try {
    return Long.valueOf(number);
  } catch (NumberFormatException e) {
    return Double.valueOf(number);
  } 
```

好的。 **Gson 将优先考虑项目中的 ObjectTypeAdapter。**

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-12-02T01:05:13.443

Kotlin 中的自定义序列化器解决方案，这有点棘手，因为您必须区分 java.lang.Double 和 Double (kotlin.Double)。

```
private val Gson: Gson = GsonBuilder().registerTypeAdapter(java.lang.Double::class.java, object : JsonSerializer<Double> {
    override fun serialize(src: Double, typeOfSrc: Type, context: JsonSerializationContext): JsonElement {
        return if (src == src.toLong().toDouble()) JsonPrimitive(src.toLong()) else JsonPrimitive(src)
    }
}).create() 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-07-10T15:07:06.503

```
 fun jsonToMap(json: JSONObject): Map<String, Any> {
        val doubles = Gson().fromJson<Map<String, Any>>(json.toString(), Map::class.java)
        fun doublesToLong(doubles: Map<String, Any>): Map<String, Any> = doubles
                .map { entry ->
                    Pair(entry.key, entry.value.let {
                        when (it) {
                            is Map<*, *> -> doublesToLong(it as Map<String, Any>)
                            is Double -> it.toLong()
                            else -> it
                        }
                    })
                }
                .toMap()
        return doublesToLong(doubles)
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-12-16T10:23:54.887

使用杰克逊

```
 public static Map<String, Object> jsonToMap(final String jsonString) {
    try {
        final ObjectMapper objectMapper = new ObjectMapper();
        return objectMapper.convertValue(objectMapper.readTree(jsonString), new TypeReference<Map<String, Object>>() {
        });
    } catch (final Exception e) {
        throw new InternalServiceException("lol");
    }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-01-06T07:09:53.100

谷歌修复问题[https://github.com/google/gson/commit/fe30b85224316cabf19f5dd3223843437c297802#diff-9bf510cca1fa5b32b008e7daa417abf15602571dbc87f5436d9f3558ded492a5](https://github.com/google/gson/commit/fe30b85224316cabf19f5dd3223843437c297802#diff-9bf510cca1fa5b32b008e7daa417abf15602571dbc87f5436d9f3558ded492a5) 请将gson版本更新为`2.8.9`