# StackOverflow 问答 14820000-14820999

# javascript - JavaScript 在调用之间花费额外的时间

> ID：14820002
> 
> 赞同：-1
> 
> 时间：2013-02-11T20:10:44.637
> 
> 标签：javascript, jquery, performance

```
console.log("FADIG");
console.log(modal);
modalBG.delay(options.animationspeed).fadeOut(options.animationspeed);
console.log("background GONE!");
modal.animate({
    "opacity": 0
}, 300, function () {
    console.log("FADED OUT MODAL");
    modal.css({
        'opacity': 1,
        'visibility': 'hidden',
        'top': topMeasure
    });
    unlockModal();
}); 
```

那是我的 JavaScript 代码。我知道它可以找到命名的对象`modal`。然后它立即吐出来，`background GONE!`然后我需要大约 10 秒才能看到`FADED OUT MODAL`。这意味着动画没有运行好 10 秒。

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:22:07.810

超级简单...我认为一些动画正在排队，所以我将其更改为：

`modal.stop().animate`一切都很好

# c - Linux 上 C blueZ 中的蓝牙配对

> ID：14820004
> 
> 赞同：16
> 
> 时间：2013-02-11T20:10:53.500
> 
> 标签：c, linux, bluetooth, bluez

我找不到任何关于如何在使用 BlueZ 蓝牙库的 C 语言编写的程序中配对 Linux 上的蓝牙设备的参考资料。我已经设法进行 HCI 级别查询以获取设备以及它们的 RSSI 级别（在设备发现期间），但目前我被困住了。我看到了将 DBUS api 用于 blueZ-simple-agent 的建议——但有没有办法避免这种情况，只使用 BlueZ 的一些 C 级方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-09-26T22:06:05.170

认证代码来自`hcitool` *（原始源代码可以在[http://git.kernel.org/cgit/bluetooth/bluez.git/tree/tools/hcitool.c](http://git.kernel.org/cgit/bluetooth/bluez.git/tree/tools/hcitool.c)看到）*

```
/* Request authentication */

static void cmd_auth(int dev_id, int argc, char **argv)
{
        struct hci_conn_info_req *cr;
        bdaddr_t bdaddr;
        int opt, dd;

        for_each_opt(opt, auth_options, NULL) {
            switch (opt) {
            default:
                printf("%s", auth_help);
                return;
            }
        }
        helper_arg(1, 1, &argc, &argv, auth_help);

        str2ba(argv[0], &bdaddr);

        if (dev_id < 0) {
            dev_id = hci_for_each_dev(HCI_UP, find_conn, (long) &bdaddr);
            if (dev_id < 0) {
                fprintf(stderr, "Not connected.\n");
                exit(1);
            }
        }

        dd = hci_open_dev(dev_id);
        if (dd < 0) {
            perror("HCI device open failed");
            exit(1);
        }

        cr = malloc(sizeof(*cr) + sizeof(struct hci_conn_info));
        if (!cr) {
            perror("Can't allocate memory");
            exit(1);
        }

        bacpy(&cr->bdaddr, &bdaddr);
        cr->type = ACL_LINK;
        if (ioctl(dd, HCIGETCONNINFO, (unsigned long) cr) < 0) {
            perror("Get connection info failed");
            exit(1);
        }

        if (hci_authenticate_link(dd, htobs(cr->conn_info->handle), 25000) < 0) {
            perror("HCI authentication request failed");
            exit(1);
        }

        free(cr);

        hci_close_dev(dd);
} 
```

并设置 PIN

```
/* Activate encryption */

static void cmd_enc(int dev_id, int argc, char **argv)
{
    struct hci_conn_info_req *cr;
    bdaddr_t bdaddr;
    uint8_t encrypt;
    int opt, dd;

    for_each_opt(opt, enc_options, NULL) {
        switch (opt) {
        default:
            printf("%s", enc_help);
            return;
        }
    }
    helper_arg(1, 2, &argc, &argv, enc_help);

    str2ba(argv[0], &bdaddr);

    if (dev_id < 0) {
        dev_id = hci_for_each_dev(HCI_UP, find_conn, (long) &bdaddr);
        if (dev_id < 0) {
            fprintf(stderr, "Not connected.\n");
            exit(1);
        }
    }

    dd = hci_open_dev(dev_id);
    if (dd < 0) {
        perror("HCI device open failed");
        exit(1);
    }

    cr = malloc(sizeof(*cr) + sizeof(struct hci_conn_info));
    if (!cr) {
        perror("Can't allocate memory");
        exit(1);
    }

    bacpy(&cr->bdaddr, &bdaddr);
    cr->type = ACL_LINK;
    if (ioctl(dd, HCIGETCONNINFO, (unsigned long) cr) < 0) {
        perror("Get connection info failed");
        exit(1);
    }

    encrypt = (argc > 1) ? atoi(argv[1]) : 1;

    if (hci_encrypt_link(dd, htobs(cr->conn_info->handle), encrypt, 25000) < 0) {
        perror("HCI set encryption request failed");
        exit(1);
    }

    free(cr);

    hci_close_dev(dd);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-26T15:47:31.020

您可以在此处下载最新版本的源代码：http: [//www.bluez.org/](http://www.bluez.org/) 有“btmgmt”工具和可用于配对的 bluez-simple-agent。代码都在源代码中，还有一些文档（在 docs 文件夹中）。也许您可以根据需要使用其中一种工具的代码，或者它可以帮助您理解配对。

我想首先将 2 个设备与 bluez 蓝牙库配对，但我碰巧在 bluez-tools 的源代码中找到了有用的代码。有文件“btmgmt.c”和其中包含的一些文件来实现配对。

对我来说不幸的是它不起作用，我不明白为什么。但也许你会取得更大的成功。这是您可以测试它的方法。

如果您还没有，请在此处下载最新版本的源代码：http: [//www.bluez.org/](http://www.bluez.org/) 解压并在 bluez 文件夹中打开终端。

然后在终端中运行以下命令：

```
./configure --prefix=/usr    \
        --sysconfdir=/etc    \
        --localstatedir=/var \
        --enable-tools       \
        --disable-test       \
        --disable-systemd 
```

我不记得你需要安装的所有包，但你可以运行这个命令并检查它失败的原因，然后安装包并重新运行它直到它工作。如果您不知道需要安装哪个软件包，请询问 google。然后：

```
make 
```

现在您可以从终端切换到工具文件夹并输入 ./btmgmt 以查看如何使用它。无论您身在何处，您都可以通过键入“btmgmt”来安装它以使用它。

```
sudo /usr/bin/install -c tools/btmgmt /usr/bin/btmgmt 
```

您需要 sudo 权限才能使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-11T00:01:15.070

此 dbus 命令可用于启动配对

```
 dbus-send --system --print-reply --dest=org.bluez /org/bluez/1301/hci0 org.bluez.Adapter.CreatePairedDevice string:"XX:XX:XX:XX:XX:XX" objpath:/org/bluez/agent_1317 string:"NoInputNoOutput" 
```

这里1301是bluetoothd的进程id

/org/bluez/agent_1317 是蓝牙配对代理。bluez/test 中 agent.c 中的 bluezagent 可用于此目的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-12T08:57:39.137

我曾经在 C/C++ 中玩过 Bluez。据我了解，C/C++ 接口在 BlueZ 中对用户来说并不受欢迎，它确实更喜欢 python。

所以主要的想法是看一下 BlueZ repo，在目录 /tools 中实现了 C 中一些必需的特性。

此外，您可以查看这篇文章，它展示了从纯 C 语言使用 BlueZ 的一些可能性：[https ://people.csail.mit.edu/albert/bluez-intro/c404.html](https://people.csail.mit.edu/albert/bluez-intro/c404.html)

这是我想出的（基于 hcidump）： https [:](https://github.com/IGR2014/Alsa-BlueZ-Example) [//github.com/IGR2014/Alsa-BlueZ-Example](https://git.kernel.org/pub/scm/bluetooth/bluez.git)（灵感来自[https://github.com/pauloborges/bluez，https://git.kernel](https://github.com/pauloborges/bluez) [.org/pub/scm/bluetooth/bluez.git](https://git.kernel.org/pub/scm/bluetooth/bluez.git)）

连接功能可能实现的小例子：

```
// Connect to device
bool btCore::connect(const char* address) {

    std::cout << "Connecting to device\t" << address << " ..." << std::endl;
    std::cout << std::endl;

    uint16_t     handle;
    unsigned int ptype      = HCI_DM1 | HCI_DM3 | HCI_DM5 | HCI_DH1 | HCI_DH3 | HCI_DH5;

    char         addr[19]   = {0};

    bdaddr_t     bdaddr;

    str2ba(address, &bdaddr);

    // Open local HCI device
    int sk      = hci_open_dev(dev_id);
    if (sk < 0) {

        std::cerr << "HCI open device:\t\t" << strerror(errno) << std::endl;
        return false;

    }

    // Establish HCI connection with device
    if (hci_create_connection(sk, &bdaddr, htobs(ptype), 0, 0, &handle, 0) < 0) {

        std::cerr << "HCI create connection:\t" << strerror(errno) << std::endl;
        close(sk);
        return false;

    } else {

        std::cout << "Connection:\t\tOK" << std::endl;

    }

    // Authenticate HCI link (without pin)
    if (hci_authenticate_link(sk, handle, 0) < 0) {

        std::cerr << "HCI authenticate connection:\t" << strerror(errno) << std::endl;
        close(sk);
        return false;

    } else {

        std::cout << "Authentication:\t\tOK" << std::endl;

    }

    // Encrypt HCI link
    if (hci_encrypt_link(sk, handle, 1, 0) < 0) {

        std::cerr << "HCI encrypt connection:\t" << strerror(errno) << std::endl;
        close(sk);
                return false;

    } else {

        std::cout << "Encryption:\t\tOK" << std::endl;

    }

    close(sk);

    return true;

} 
```

接下来你要做的是发现服务（[https://www.bluetooth.com/specifications/assigned-numbers/service-discovery](https://www.bluetooth.com/specifications/assigned-numbers/service-discovery)）

这也是我的老问题，它可以引导你回答：[Linux over BlueZ 下的 C++ 蓝牙耳机](https://stackoverflow.com/questions/48932249/c-bluetooth-headphones-under-linux-over-bluez)

**请注意：所有 API（如果我们可以将这些内部函数命名为“API”）不保证与其他版本的 BlueZ 相同。至少，对这种行为没有任何保证。**

# magento - magento 清理我的类别到 2000 种产品

> ID：14820005
> 
> 赞同：0
> 
> 时间：2013-02-11T20:10:55.103
> 
> 标签：magento, categories, product

更新我的类别或子类别产品后消失。奇怪，因为总是只剩下 2000 件产品。缓存，索引没有帮助。如果这更有意义，那么实际上类别从产品中消失了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-20T08:42:05.830

打开你的日志，有一个关于**max_input_vars**的 PHP 错误。

# c++ - 关于 string.c_str() 生命周期

> ID：14820008
> 
> 赞同：3
> 
> 时间：2013-02-11T20:11:13.013
> 
> 标签：c++, string

如果我写如下，我想知道`void func(const char *str);`引用是否有效：`str`

```
auto str = string("hello").c_str();
func(str); 
```

它与下面的代码有何不同？

```
func(string("hello").c_str()) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-11T20:14:16.993

在这两种情况下，`string`对象都是临时的，在语句结束时被销毁。

在第一种情况下，`str`最终悬空指向由临时管理`string`但现在已被销毁的内存。用它做任何事情都是错误的，会给出未定义的行为。

在第二种情况下，`string`直到函数返回后才会销毁临时对象。所以这很好，只要函数不保留指针以供以后使用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-11T20:15:04.513

不同之处在于第一个创建了一个临时`string`对象，该对象在第一条语句的末尾被销毁，因此`str`成为一个悬空指针。第二个也创建了一个临时对象，但它存在于整个调用过程中，`func`因为在调用返回之前临时对象不会被销毁`func`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-11T20:21:12.193

来自 C++11 标准的第 12.2/3 段：

> [...] 临时对象作为评估完整表达式 (1.9) 的最后一步被销毁，该完整表达式 (从词法上) 包含创建它们的点。即使评估以抛出异常结束也是如此。[...]

这意味着在包含调用的表达式中创建的临时`func()`变量将一直存在，直到函数调用返回。

另一方面，第一个代码片段中临时的生命周期将在`func()`被调用之前结束，并且`str`将是悬空的。这将导致未定义的行为。

# c++ - 在 C++ 中实现一个向其注册非静态成员函数的工厂

> ID：14820010
> 
> 赞同：0
> 
> 时间：2013-02-11T20:11:28.450
> 
> 标签：c++, function, factory, member

我有一个名为 MemMgr 的 C++ 单例工厂类，它负责管理库中对象的堆内存：

```
#include <vector>
class MemMgr
{
    public:

        // Callback interface of functions to register with MemMgr
        typedef size_t (*MemSizeFunc)(void);

        void Register(MemSizeFunc memSizeFunc);

        static MemMgr & GetInst(void);

        // more public functionality related to managing memory

    private:

        // a vector (not a map) of functions pointers to keep track of
        std::vector<MemSizeFunc> m_memSizeFuncs;

        MemMgr(void);
        MemMgr(MemMgr const &);
        MemMgr & operator= (MemMgr const &);

        // more private functionality related to managing memory
}; 
```

我想做的是让任何想要使用托管内存的类的对象都能够通过（**非静态**）成员函数向 MemMgr 注册自己，该函数将计算并返回托管内存的数量该特定对象需要的。类似于以下内容：

```
class MemMgrUser
{
    public:

        MemMgrUser(void)
        {
            MemMgr::GetInst().Register(GetManagedMemSize);
        }

    private:

        size_t GetManagedMemSize(void)
        {
            // calculations involving member variables
        }
}; 
```

（然后，在 MemMgr 实际分配任何内存之前，它会查询注册到它的与大小相关的函数，以找出要分配的内存量。）

但是，当我尝试上述方法时，编译器会对我大喊大叫 b/c 我试图注册成员函数指针，而不是普通的函数指针。

有人对我如何实现此类功能有任何建议吗？我在查看如何实现模板实现（或多态实现）时遇到问题。

谢谢，

亚伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:39:01.600

您甚至不会尝试注册成员函数指针。那必须指定为`&MemMgrUser::GetManagedMemSize`. 不能使用成员函数的普通名称，除非在调用它的表达式中。

但是，即使您有一个成员函数指针，它也不能以与具有相同明显签名的普通函数指针相同的方式使用。调用成员函数总是需要一个对象来调用它。函数中可用的`this`指针是一个附加的隐藏参数。

如果您可以使用 C++11 标准库的功能，则可以`typedef std::function<size_t (void)> MemSizeFunc;`代替当前的 typedef。这使您可以将可使用该签名调用的各种函数和函数对象存储为`MemSizeFunc`. 特别是，您可以注册`GetManagedMemSize`绑定到合适`MemMgrUser`对象的成员函数，例如：

```
MemMgrUser()
{
   MemMgr::GetInst().Register(std::bind(&MemMgrUser::GetManagedMemSize, *this));
} 
```

# ember.js - 删除记录时，转换到另一条路线失败

> ID：14820016
> 
> 赞同：7
> 
> 时间：2013-02-11T20:11:50.797
> 
> 标签：ember.js, ember-data

我对 ember.js 还很陌生，我正在做一些实验。我最近在尝试删除记录时碰了壁。这是我的编辑路线（我称之为删除）

```
App.PostsEditRoute = Ember.Route.extend({
  model: function(params){
    return App.Post.find(params.id);
  },
  exit: function() {
    this._super();
    tx = this.get('currentModel.transaction');
    if(tx)
      tx.rollback();
  },
  setupController: function(controller, model){
    controller.set('content', model);
  },
  events: {
    save: function(post){
      post.one('didUpdate', this, function(){
        this.transitionTo('posts.show', post);
      });
      post.get('transaction').commit();
    },
    cancel: function(){
      this.transitionTo('posts.show', post);
    },
    destroyPost: function(context) {
      var post = context.get('content');
      post.deleteRecord();
      post.get('store').commit();
      this.transitionTo('posts.index');
     }
  }
}); 
```

所以我有一个链接，通过它我触发了destroyPost。记录删除成功，我开始过渡到索引路由，但是出现错误...

未捕获的错误：尝试`rollback`在 rootState.deleted.inFlight 状态下处理事件。未定义调用

在此之后，为索引页面加载模型停止，我得到一个空页面。我可以提供所需的任何其他代码。这是索引路线。

```
App.PostsIndexRoute = Em.Route.extend({
  model: function(){
    return App.Post.find();
  },
  setupController: function(controller, model){
    controller.set('content', model);
  }
}); 
```

我应该注意，这两条路线都可以自行正确加载。只有在过渡中我才会失败。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T13:05:36.910

您需要`didDelete`像`didUpdate`在保存方法中那样绑定。

```
destroyPost: function(context) {
  var post = context.get('content');
  post.one('didDelete', this, function () {
      this.transitionTo('posts.index');
  });
  post.deleteRecord();
  post.get('transaction').commit();
 } 
```

此外，您的代码似乎有点不一致：在 save 方法中，您提交了一个单独的事务，而在`destroyPost`您提交了整个商店。

# objective-c - 重写 init 方法为实例变量对象分配内存

> ID：14820020
> 
> 赞同：1
> 
> 时间：2013-02-11T20:12:07.820
> 
> 标签：objective-c, initialization, overriding, alloc, ivar

我试图重写`init`一个类的方法，以便初始化对象也初始化 ivar 对象：

```
-(id)init 
  {
    if (self = [super init])
    {
       someIVarObject = [SomeClass alloc] init];
    }
    return self;
  } 
```

1）这个代码甚至可以工作，即便如此，这个解决方案是否不鼓励？
2）为什么`if`条件不是`==`？是任务吗？如果是这样，为什么`if`？

对不起，如果这很明显！>_<

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T20:21:43.893

是的，它会起作用，而且它仍然是它应该做的方式。

它所做的是调用`[super init]`并允许它做三件事之一；

*   返回自我（即相同的对象`self`已经设置为。
*   返回一个全新的对象。
*   以失败告终`nil`。

然后将结果分配给`self`，以确保构造函数的其余部分对正确的对象进行操作，以防它发生更改。`if`那里是为了捕捉返回 nil 的情况，`[super init]`在这种情况下应该跳过构造函数的其余部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T20:18:37.620

1）在这里，您声明了一个局部变量`someIVarObject`。您应该在大括号中的类的接口或实现中声明它，然后将其分配为`someIvarObject = ...`. 一个例子：

```
@implementation MyClass {
    SomeClass *someIvarObject;
}

- (id)init
{
    if(self = [super init])
    {
        someIvarObject = [[SomeClass alloc] init];
    }
    return self;
}

@end 
```

2）这是一个任务。这个习语背后有很长的历史，但它主要归结为处理返回与最初调用`[super init]`不同的对象的可能性。`init`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T20:25:58.590

这...

```
if(self = [super init]) 
```

会起作用，但它会给你一个编译器警告（除非你关闭了这个警告）。

您还可以通过使用双括号来抑制警告：

```
if((self = [super init])) 
```

我目前的偏好：

```
self = [super init];
if(self) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-11T20:30:15.160

你有一些拼写错误，不平衡的括号，你说的是 ivar 不是 ivar（你在 内声明它`if`，这使得它的范围在那个块本地。你想把实例变量放在你的or`{}`之后的 s中声明）。但是，是的，这通常是如何工作的。`@implementation``@interface`

但是，我会仔细研究您是否真的需要 ivar。我不记得上次在我的代码中使用它是什么时候了。我曾经在 99% 的情况下使用它们，a`@property`现在是一个更好的解决方案。

作为一个额外的好处，`@property`s 合成了自己的 getter 和 setter，（通常）避免了编写手动`alloc`样板的需要，从而使这个问题变得毫无意义。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-11T20:20:58.227

1）这段代码可以工作，但这一行：

```
SomeClass *someIVarObject = [SomeClass alloc] init]; 
```

有点道理。在 .h 文件中声明`SomeClass *someIVarObject`并在 init 中初始化，如下所示：

```
someIVarObject = [SomeClass alloc] init]; 
```

2）这一行`if (self = [super init])`相当于：

```
self = [super init]; if (self != nil) 
```

即它确保基类的 init 方法返回了正确的值

# java - 日期和军事时间的 Java 正则表达式失败

> ID：14820025
> 
> 赞同：0
> 
> 时间：2013-02-11T20:12:25.263
> 
> 标签：java, regex

我正在尝试构建一个支持日期时间的 Java 正则表达式（其中时间组件是军事时间）：

> MM/dd/YYYY HH:mm:ss

```
@Test
public void testRegexPattern() {
    String regex = "([0-9]{2})/([0-9]{2})/([0-9]{4}\\s^([01]\\d|2[0-3]):?([0-5]\\d):?([0-5]\\d)$)";

    String supposedDateTime = "12/31/1969 19:00:00";

    Assert.assertTrue(supposedDateTime.matches(regex));
} 
```

此测试失败，因为`supposedDateTime`与正则表达式不匹配。任何正则表达式大师都可以发现为什么吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T20:15:43.623

为什么你`caret(^)`在中间`\\s`呢？去掉它。这就是造成问题的原因。此外，使用`String#matches`方法，您甚至不需要使用`anchors`.

所以，你可以使用这个正则表达式：

```
"([0-9]{2})/([0-9]{2})/([0-9]{4}\\s([01]\\d|2[0-3]):?([0-5]\\d):?([0-5]\\d))" 
```

* * *

讨论了正则表达式中的实际问题后，您真的不应该使用正则表达式测试日期。而是对日期字符串使用[`SimpleDateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)适当的模式。`parse`

# linux - sed 用 NULL 替换空白空间

> ID：14820028
> 
> 赞同：4
> 
> 时间：2013-02-11T20:12:45.333
> 
> 标签：linux, bash, sed

使用 sed

1.  如何用 NULL 替换 \N

2.  我怎样才能替换空白空间|| 与 NULL。

    ```
    |200|0||0|\N||^A|0|\N|| 
    ```

期望的输出

```
 |200|0|NULL|0|NULL|NULL|^A|0|NULL|NULL| 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T20:23:11.350

你需要一个稍微修改的[版本](https://stackoverflow.com/questions/14724643/repeating-regex-replace-with-sed)。像这样的东西适用于 GNU sed：

```
sed ':a; s:|\(\\N\)\?|:|NULL|:g; ta' 
```

或更便携：

```
sed -e ':a' -e 's:|\(\\N\)\?|:|NULL|:g' -e 'ta' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T20:23:49.830

我认为您正在寻找的命令可能称为“tr”。尝试

```
tr \\n \\0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T01:13:58.937

用 awk

```
awk 'gsub("\\\\N","NULL");gsub("\\|\\|","|NULL|")' temp.txt 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T20:25:32.540

```
<file sed 's/\\N/NULL/g' | awk -F\| '{for(i=2;i<=NF;i++){ if($i==""){ printf "|NULL"} else{  printf "|%s", $i}}; printf "|\n"}' 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-03-09T22:59:27.917

`sed -i 's/ /NULL/g' temp.txt`

这会将任何空格字符替换为`NULL`.

# r - 在R中获取分数的分子和分母

> ID：14820029
> 
> 赞同：6
> 
> 时间：2013-02-11T20:12:48.037
> 
> 标签：r, fractions

使用`fractions`库 MASS 中的函数，我可以将小数转换为分数：

```
> fractions(.375)
  [1] 3/8 
```

但是那么我如何提取分子和分母呢？的帮助`fractions`提到了一个属性“fracs”，但我似乎无法访问它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-11T20:19:52.017

分数的字符表示存储在属性中：

```
x <- fractions(0.175)
> strsplit(attr(x,"fracs"),"/")
[[1]]
[1] "7"  "40" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T20:21:38.757

您可以通过`fracs`以下方式从您的 fraction 对象中获取属性，但它只是您的 fraction 的字符表示：

```
x <- fractions(.375)
attr(x, "fracs")
# [1] "3/8" 
```

如果要访问分子和分母值，可以使用以下函数拆分字符串：

```
getfracs <- function(frac) {
  tmp <- strsplit(attr(frac,"fracs"), "/")[[1]]
  list(numerator=as.numeric(tmp[1]),denominator=as.numeric(tmp[2]))
} 
```

您可以这样使用：

```
fracs <- getfracs(x)
fracs$numerator
# [1] 3
fracs$denominator
# [1] 8 
```

# r - 重塑数据框

> ID：14820030
> 
> 赞同：0
> 
> 时间：2013-02-11T20:12:49.883
> 
> 标签：r, dataframe, reshape

我有一个看起来像这样的数据框：

```
variable=c("alpha","beta1","beta2")
value=c(22,11,33)

df=data.frame(variable=variable,
              value=value)

df

variable value
alpha    22
beta1    11
beta2    33 
```

我希望它看起来像这样：

```
coef   alpha  beta1  beta2
value   22    11      33 
```

什么是 reshape/cast/dcast 逻辑？

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T20:39:49.373

Using `reshape2`

```
library(reshape2)
(d <- dcast(df, 'value' ~ variable, value.var='value')) 
```

However, to get the name of you first column right you will still need to do

```
names(d)[1] <- "coef" 
```

don't know if its possible to do this in one statement.

# php - imagejpeg() 无法打开写入 - 有时有效，有时无效

> ID：14820031
> 
> 赞同：4
> 
> 时间：2013-02-11T20:12:53.190
> 
> 标签：php

我尝试通过以下代码将图像资源保存到图像中：

```
imagejpeg ($destination_res, $destination, 100); 
```

该脚本还包含一个文件上传，它确实有效（文件始终存在于目标文件夹中） - 在此文件上传后，我想将此文件用于`imagejpeg()`. 问题是有时我的代码确实有效，有时则无效。如果不工作，我会通过 PHP 收到以下错误：

```
Warning: imagejpeg(): Unable to open [path] for writing: Invalid argument in script on line xy 
```

我猜是复制过程有问题 - 可能文件上传后的复制过程没有完全完成，因此它是不可写的。

但我也尝试在命令之前检查 if`file_exists($destination)`和 if 文件。即使出现警告错误，这两项检查也会返回。`is_writable($destination)``imagejpeg()``TRUE`

如果我`sleep(2)`在文件上传和`imagejpeg()`更少的错误发生之间放置一个。睡眠时间越长，发生的错误就越少。

谁能帮我？

我正在使用操作系统的 PC 上工作`Windows 8`- 我使用`IIS 8`和`PHP 5.3.3`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T09:03:52.690

PHP有一个用于使用路径的内部缓存，当您创建文件时，即使文件存在（几毫秒后），缓存也可能会过时并且PHP会抛出错误......

避免创建的文件在实时使用中找不到的问题[**`clearstatcache()`**](http://php.net/manual/function.clearstatcache.php)。它重置路径的内部 PHP 缓存。

在创建文件之后调用`clearstatcache()`，在访问创建的文件之前调用。

```
clearstatcache();
imagejpeg ($destination_res, $destination, 100); 
```

# c# - 实体框架映射一对一 Aspnet_Membership 表

> ID：14820032
> 
> 赞同：0
> 
> 时间：2013-02-11T20:12:55.853
> 
> 标签：c#, entity-framework, entity-framework-5

我正在使用带有默认 aspnet_Membership 架构的 EF5。

我有一个自定义 User 对象，其外键引用 aspnet_Membership 表。

User 对象中的外键称为“AspnetID”

我需要将这种一对一的关系与流利的 API 映射，但我没有运气

对象如下所示：

```
public class aspnet_Membership
{
    [Key]
    public Guid UserId { get; set; }
    public string Email { get; set; }
    public DateTime CreateDate { get; set; }

    public aspnet_Users aspnet_User { get; set; }
    public User User { get; set; }
}

public class User
{
    public int UserID { get; set; }

    [MaxLength(50)]
    public string FirstName { get; set; }

    [MaxLength(50)]
    public string LastName { get; set; }

    public Guid AspnetID { get; set; } //This is the foreign key referencing aspnet_Membership

    public virtual aspnet_Membership Aspnet_Membership { get; set; }
} 
```

我试过这个：

```
modelBuilder.Entity<User>().HasRequired(u => u.Aspnet_Membership).WithOptional(u => u.User); 
```

但我知道我需要以某种方式映射外键名称......有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:02:08.413

您需要使用 WithRequiredPricipal() 而不是 WithOptional()

```
 modelBuilder.Entity<User>()
        .HasRequired(t => t.Aspnet_Membership)
        .WithRequiredPrincipal(t => t.User); 
```

# c++ - 了解指针的使用

> ID：14820033
> 
> 赞同：1
> 
> 时间：2013-02-11T20:12:58.437
> 
> 标签：c++, arrays, pointers, dynamic-memory-allocation, double-pointer

嗨，我遇到了一个代码，我很难理解它为什么工作，如果有人能解释我，我将不胜感激 这是代码 这实际上是真实代码的一个非常简化的版本，可以在这里找到[http ://acts.nersc.gov/hypre/example10/ex10.cxx.html](http://acts.nersc.gov/hypre/example10/ex10.cxx.html)

```
#include <iostream>
int main(int argc, char *argv[]){
double ***elemStiff = new double**[10];
int i, k;

for (i = 0; i < 10; i++){
    elemStiff[i] = new double*[4];
    for (k = 0; k < 4; k++){
        elemStiff[i][k] = new double[4];
    }

    double **A = elemStiff[i];
    for (k = 0; k < 4; k++)
        A[k][k] = 2/3.;

    A[0][1] = A[1][0] = -1/6.;
    A[0][2] = A[2][0] = -1/3.;
    A[0][3] = A[3][0] = -1/6.;
    A[1][2] = A[2][1] = -1/6.;
    A[1][3] = A[3][1] = -1/3.;
        A[2][3] = A[3][2] = -1/6.;
    }
    std::cout << elemStiff[1][0][0] << std::endl;
} 
```

简而言之，这里我们初始化并填充 elemStiff 数组的值，该数组有 10 行，每行是一个 4x4 矩阵。

对我来说非常奇怪的是代码在 double **A = elemStiff[i]; 的帮助下填写了 elemStiff 数组的条目。

当我第一次看到我虽然它会给出一个错误但它有效！在 A 上传递的值，它们同时在 elemStiff 数组上传递，但我不明白它为什么起作用

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T20:31:51.197

让我们从更简单的版本开始：

```
int* array = new int[10];
int* ptr = array;            // equivalent to ptr = &array[0]

for (int i = 0; i < 10; ++i)
    ptr[i] = i;              // writing into the memory that ptr points to

for (int i = 0; i < 10; ++i)
    std::cout << array[i];   // outputs: 0123456789 
```

在这个例子中，我们创建了一个指向`ptr`的第一个元素的指针`array`。然后当我们写入`ptr`指向的内存时，我们实际上是在写入那个`array`。因此，当我们检查`array`元素的值时，我们可以看到它们已正确初始化。

您的代码几乎相同，只有一个由 10 个二维数组组成的数组：

```
double ***elemStiff = new double**[10]; 
```

然后就像我们`ptr`在我的简单示例中使用的那样，使用临时指针`A`使其指向这 10 个二维数组中的每一个：

```
for (i = 0; i < 10; i++)
    double **A = elemStiff[i]; 
```

# java - Java有没有办法初始化一个类型安全的通用数组？

> ID：14820038
> 
> 赞同：2
> 
> 时间：2013-02-11T20:13:14.067
> 
> 标签：java, generics

我有以下代码

```
public class Container<T> {
    private T element;
    private T[] tarray;

    public T getElement() {
        return element;
    }

    public void setElement(T element) {
        this.element = element;
    }

    public void add(T element) {
        tarray[0] = element;
    }

    public void CreateArray(int size) {
        //Can this be cleaned up better?
        tarray = (T[]) new Object[size];
    }

    public T get() {
        return tarray[0];
    }

    public Container(T someElement) {
        this.element = someElement;
    }

    public Container() {
    }

    public static void main(String[] args) {
        Container<String> myContaier1 = new Container<String>();
        myContaier1.setElement("Hello");
        myContaier1.CreateArray(1);
        myContaier1.add("GoodBye");
        System.out.println(myContaier1.get());
    }
} 
```

**有没有办法初始化一个类型安全的泛型数组？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T20:15:03.277

除非您`T`以`Class<T>`表示`T`. 这是因为数组类型**被**具体化了，而通用类型没有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T20:27:52.387

这里有两个问题：

首先，数组的实际类型始终是`Object[]`. 您将其投射到`T[]`，但这仅适用`T[]`于擦除到`Object[]`。例如，如果您的类定义说 ，`<T extends Number>`那么`(T[])new Object[]`将失败并带有`ClassCastException`。

您可以通过传递`Class<T>`给集合的构造函数并将其保存在字段中来解决此问题：

```
private Class<T> componentClass;
...
tarray = (T[]) Array.newInstance(componentClass, size); 
```

现在实际的内存类型`tarray`是`T[]`，但您仍然会收到未经检查的强制转换错误。即使您有组件类，据我所知，也没有等效于`Class.cast()`对数组实例进行检查强制转换的方法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-11T20:17:35.773

你可以做`private T[] tarray;`，但你不能把它分配给`(T[]) new Object[size];`。对象数组如何与任何其他类的数组相同。 `T`编译后甚至不存在。它被称为类型擦除。例如，如果你这样做

```
List<Person> persons = new ArrayList<Person>(); 
```

`List persons = new ArrayList()`编译后就变成了。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-12T17:36:08.067

类似于问“有没有办法初始化通用对象：`new T()`？”

当然这是不可能的，因为编译器不知道它的类型是什么。

Array 也是一样，它的类型依赖于它的元素。如果其元素的类型未知，则其自身的类型未知。

那些可以采用 , , 等泛型类型的类`List`是`Set`不同`Map`的。它们有自己的类作为类型并且它们是动态的，所以你可以初始化一个像`new ArrayList<T>()`.

* * *

你可以试试这个：

```
public class Test {
    public static void main (String args[]) {
        int[] i = new int[3];
        short[] s = new short[4];
    ArrayList<String> a = new ArrayList<String>();

        System.out.println(i.getClass().getName());
        System.out.println(s.getClass().getName());
        System.out.println(args.getClass().getName());
        System.out.println(a.getClass().getName());
    }
} 
```

您将看到元素的类型已经与数组组合，而不是与 ArrayList 组合。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-12-19T21:06:01.370

在 JVM 上可以做到这一点，但是在 Java 中做这样的事情需要编写大量的样板代码。在 Scala 中，您可以使用 Manifest 绕过类型擦除，并且可以在不强制转换的情况下实例化泛型数组。

一个例子：

```
class Container[T : Manifest]() { 
  def createArray(size:Int) = Array.ofDim[T](size) 
}

scala> val f = new Container[String]
f: Container[String] = Container@12f3aa66

scala> f.createArray(5)
res7: Array[String] = Array(null, null, null, null, null) 
```

Scala 代码编译为与 Java 相同的字节码类文件（这意味着如果您跳过了足够多的障碍并且可能编写了自己的清单，这在 Java 中应该是可能的）。Scala 类可以导入到 Java 项目中......虽然我不确定从 Java 实例化这样的类有多难。

如果您经常发现自己希望能够处理更复杂的类型情况，请查看 Scala，您可能会喜欢它。

# mysql - 将篮子转换为单个

> ID：14820045
> 
> 赞同：0
> 
> 时间：2013-02-11T20:13:51.203
> 
> 标签：mysql, database, r, excel

我目前有一个以篮子格式设置的表格，以便不规则数量的数据与表格的每一行相关联。如：

```
01,item1,item2,item3
02,item1,item2,
03,item1,item2,item3,item4
04,item1 
```

但是，我需要将其更改为规范化的事务格式，每行只有一个项目。如：

```
01,item1
01,item2
01,item3
02,item1
02,item2
03,item1 
```

...等等。有没有一种简单的自动化或程序化方式来做到这一点？数据当前位于 MySQL 数据库中，我可以将其导出为各种文件类型，并且我还可以访问 RStudio 和 Microsoft Excel 来尝试执行此操作。我可以为 RStudio 找到的所有事务资源都假定数据已经是第二种格式，这就是我想要得到的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:35:28.247

我假设我了解您的数据集在将其读入 R 后的外观，即，它将是一个矩形数据框，其中填充了 NA 以使行的长度相同。所以这应该可以解决问题：

```
#Create your dataset (this step is not for you)
row1 = c("01","item1","item2","item3",NA)
row2 = c("02","item1","item2",NA,NA)
row3 = c("03","item1","item2","item3","item4")
row4 = c("04","item1",NA,NA,NA)

Data = rbind(row1,row2,row3,row4)

#Now do the reconstruction (this step is for you)
col1 = NULL
col2 = NULL

for(i in 1:nrow(Data)){
    col1 = c(col1,rep(Data[i],ncol(Data)-1))
    col2 = c(col2,Data[i,-1])
}

NewData = cbind(col1,col2)[!is.na(col2),] 
```

所以，你得到的是以下

```
> Data
     [,1] [,2]    [,3]    [,4]    [,5]   
row1 "01" "item1" "item2" "item3" NA     
row2 "02" "item1" "item2" NA      NA     
row3 "03" "item1" "item2" "item3" "item4"
row4 "04" "item1" NA      NA      NA     
> 
> NewData
      col1 col2   
 [1,] "01" "item1"
 [2,] "01" "item2"
 [3,] "01" "item3"
 [4,] "02" "item1"
 [5,] "02" "item2"
 [6,] "03" "item1"
 [7,] "03" "item2"
 [8,] "03" "item3"
 [9,] "03" "item4"
[10,] "04" "item1" 
```

所以希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T22:14:48.217

[这个问题和这个问题](https://stackoverflow.com/questions/13773770/split-comma-separated-column-into-separate-rows)真的很相似。正如@DWin 在他的评论中提到的，您需要申请拆分`paste( . , . sep=",")`列表。

```
xx <- read.table(text ='01,item1,item2,item3
02,item1,item2,
03,item1,item2,item3,item4
04,item1')

unlist(lapply(strsplit(as.character(xx$V1), ','), 
       function(x) paste(x[1],x[-1],sep=',')))

[1] "01,item1" "01,item2" "01,item3" "02,item1" "02,item2" "03,item1" "03,item2" "03,item3" "03,item4" "04,item1" 
```

# ember.js - 如何使用 Ember 1.0.pre4 在新/编辑视图之间共享逻辑

> ID：14820063
> 
> 赞同：1
> 
> 时间：2013-02-11T20:14:59.087
> 
> 标签：ember.js

在之前的 Ember 版本中，我使用单数`PostController`来管理新的/显示和编辑视图。

但是现在随着控制器和路由的分离以及使用`post.new/post.edit/post`控制器的约定，我不确定跨视图共享逻辑的约定是什么。请记住，我的编辑/新路线没有嵌套在`posts`路线内，因为出口没有嵌套，所以我不能将逻辑放在父路线中。

*   我是否覆盖路由中的控制器并使用我的旧单数控制器？
*   我是否`{{with controllers.post}}`在车把模板中使用块？
*   我在`PostNewRoute/PostEditRoute`and之间使用共享 mixin`PostNewController/PostEditController`吗？
*   我继承`PostEditController`自`PostNewController`?
*   将所有发布路线包装在模板中的路线中，`{{outlet}}`以便我可以继承共享事件？
*   还有什么我错过的吗？

我怀疑是否有适当的约定，但我想听听其他人是如何做到的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:21:17.453

使用渲染助手：

[https://gist.github.com/dagda1/4758119](https://gist.github.com/dagda1/4758119)

然后您可以使用路由器中的模型挂钩来创建记录或在路由中检索它：

[https://gist.github.com/dagda1/4758144](https://gist.github.com/dagda1/4758144)

# asp.net - WebForms、ASP.NET 验证器和 JS 验证框架

> ID：14820069
> 
> 赞同：1
> 
> 时间：2013-02-11T20:15:18.990
> 
> 标签：asp.net, webforms, parsley.js

我是一名长期的网络表单开发人员。我习惯于使用 asp.net 验证器控件来验证用户输入。

虽然我喜欢 asp.net 有可能在客户端和服务器端验证输入的事实，但我觉得验证器呈现的方式并不理想。我一直羡慕地看着 javascript 验证库（如 Parsley.js），并希望 asp.net 验证器能像这样工作。例如，我希望能够更改未通过验证的字段的 css 类。或者我想根据验证逻辑隐藏或显示一个 img。

但是，迁移到 Parsley.js 之类的库的问题是我失去了服务器端验证，出于安全目的，这是最重要的一层。

有没有办法将服务器端验证与客户端框架集成？以一种不需要大量重复工作的方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:20:59.433

在 asp.net 中，您始终可以通过**validator1.Validate()**方法触发验证，该方法将进行服务器端比较。检查**Page.IsValid**以查看是否未执行服务器端验证？我认为您可以通过**Page.Validate()**调用它。或者重载的**Page.Validate(string)**以针对您的验证组之一。

[http://msdn.microsoft.com/en-us/library/aa479013.aspx](http://msdn.microsoft.com/en-us/library/aa479013.aspx)

# python - Python 与 xampp

> ID：14820071
> 
> 赞同：0
> 
> 时间：2013-02-11T20:15:20.163
> 
> 标签：python, apache

我想创建一个 .py 文件并显示简单的 html 代码，就像我只是打开任何 php 文件一样。我已经将 file.py 放在 c:/xampp/cgi-bin 目录中，我已经在 apache 配置中启用了 .py 扩展名，但是......我这样做是否正确？接下来是什么？

如何打开这个文件？localhost/cgi-bin/file.py 显示内部服务器 500 错误，底部带有注释“Apache/2.4.2 (Win32) OpenSSL/1.0.1c PHP/5.4.4”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:22:26.457

你需要选择一个 web 框架。樱桃派。塔架。姜戈。

# php - 重定向阻止了 PHP 抓取

> ID：14820081
> 
> 赞同：1
> 
> 时间：2013-02-11T20:15:50.917
> 
> 标签：php, dom, scrape

我正在尝试将图书馆搜索引擎转换为 php 脚本中的移动友好网站。计划是抓取结果并呈现一个简化的表单，因为该站点目前仅在大型浏览器中看起来不错。

我在使用[http://simplehtmldom.sourceforge.net](http://simplehtmldom.sourceforge.net)时遇到了一点麻烦，因为每次我尝试通过加载此页面来加载查询时，`www.librarywebsite.com/search.php?query=BOOKTITLE`它都会经过多次重定向，然后显示一个最终结果页面，该页面在 url 中有一组类似的参数但是，如果刷新，无论如何都会坚持重定向。

有谁知道只有在所有重定向完成后才能执行 DOM 抓取？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T20:22:37.533

您可以考虑使用启用跟随重定向的 cURL 之类的东西。我相信 cURL 选项是**CURLOPT_FOLLOWLOCATION**。见： http: [//php.net/manual/en/function.curl-setopt.php](http://php.net/manual/en/function.curl-setopt.php)

# sql - Sqlite：LIKE 匹配值，但不相等

> ID：14820085
> 
> 赞同：2
> 
> 时间：2013-02-11T20:16:06.180
> 
> 标签：sql, sqlite

我有非常简单的 SQLite 表：

```
CREATE TABLE IF NOT EXISTS `settings` (`Name` TEXT PRIMARY KEY, `Value` TEXT); 
```

我使用以下 2 个查询：

```
SELECT `Value` FROM `settings` WHERE `Name` LIKE 'MainTabControl.active'; 
```

（返回 1 行）

和

```
SELECT `Value` FROM `settings` WHERE `Name` = 'MainTabControl.active'; 
```

（返回 0 行）

具有`Name`列值的行`MainTabControl.active`肯定存在（我在 do 时看到它`SELECT *`），开头和结尾没有任何空格，并且所有字符的大小写相同。相等运算符的不同行为的原因是什么`LIKE`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T00:32:11.437

你可能会遇到 sqlite 的类型系统。完整的详细信息在[http://www.sqlite.org/datatype3.html](http://www.sqlite.org/datatype3.html)上，但相关位是这样的：

```
A TEXT value is less than a BLOB value 
```

我的猜测是您（有意或无意）将名称列存储为 BLOB 而不是 TEXT。这不是`=`文本值，而是`LIKE`它。

```
$ sqlite3
SQLite version 3.7.15 2012-10-15 18:02:57
Enter ".help" for instructions
Enter SQL statements terminated with a ";"
sqlite> create table settings (name, value) ;
sqlite> insert into settings values ('MainTabControl.active','textname') ;
sqlite> insert into settings values (cast ('MainTabControl.active' as blob),'blobname') ;
sqlite> select value from settings where name = 'MainTabControl.active' ;
textname
sqlite> select value from settings where name like 'MainTabControl.active' ;
textname
blobname
sqlite> select value, typeof(name) from settings where name like 'MainTabControl.active' ;
textname|text
blobname|blob
sqlite> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T20:37:29.550

LIKE 运算符的大小写敏感性由 PRAGMA case_sensitive_like 命令确定。LIKE 运算符的默认行为是忽略 ASCII 字符的大小写。

```
sqlite> SELECT 'A' = 'a';
0         
sqlite> SELECT 'A' LIKE 'a';
1           
sqlite> PRAGMA case_sensitive_like = TRUE;
sqlite> SELECT 'A' LIKE 'a';
0 
```

如果我们将其设置为 TRUE，则结果等于 = 运算符。见[http://www.sqlite.org/pragma.html#pragma_case_sensitive_like](http://www.sqlite.org/pragma.html#pragma_case_sensitive_like)

# android - 如何启用登录 facebook SDK 3.0？

> ID：14820087
> 
> 赞同：4
> 
> 时间：2013-02-11T20:16:26.490
> 
> 标签：android, facebook

最近我正在尝试为使用 facebook 的 android 应用程序获取我的哈希键。

问题是通过命令提示符的方法对我不起作用。

所以我找到了一个新的解决方案，它说你可以使用 facebook 消息来产生一个错误消息，它会给你哈希键本身。

他们说你应该设置 private boolean ENABLE_LOGGING = false; 在 facebook util.java 类中为 true。问题是我在应该启用日志记录的类中看不到。

谁能告诉我如何让 sdk 打印出 logcat 中的日志记录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T19:02:09.317

To enable logging call the function `Settings.addLoggingBehavior(LoggingBehavior behavior)`

For example if you want to display Request information call

```
Settings.addLoggingBehavior(LoggingBehavior.REQUESTS); 
```

You can check the class LoggingBehavior to debug other operations: [https://developers.facebook.com/docs/reference/android/3.0/LoggingBehavior](https://developers.facebook.com/docs/reference/android/3.0/LoggingBehavior)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-31T07:33:59.260

通常，Android 库可以`BuildConfig.DEBUG`用来确定应用程序是否处于调试模式。但是，由于 Gradle 中的一个错误，Android 库总是在构建时`DEBUG`设置为 false。作为一种解决方法，有一个**FacebookSdk.setIsDebugEnabled(boolean)**方法，因此您可以直接从您的应用程序设置调试模式。这将启用来自 SDK 的调试日志记录。

您还可以使用**FacebookSdk.addLoggingBehavior(LogginBehavior)**设置日志记录行为，以启用不同类别消息的日志记录。请参阅 Android SDK 参考[LoggingBehavior](https://developers.facebook.com/docs/reference/android/current/class/LoggingBehavior/)。

从[这里](https://developers.facebook.com/docs/android/troubleshooting)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T20:54:40.403

根据 Pascal 对类似线程的评论，这种方法自 2012 年 12 月以来就不起作用了。所以你必须使用命令提示符方法来获取正确的哈希键。

“自 2012 年 12 月以来，ENABLE_LOG 无法再更改 – Pascal Klein 2 月 24 日 3:41”这里是线程的链接：[Android：Facebook 登录不起作用](http://facebook.stackoverflow.com/questions/13049346/android-facebook-login-doesnt-work/13059177#13059177/ "Android：Facebook 登录不起作用")

我在命令提示符下尝试了几个命令，现在我终于找到了一个对我有用的命令。我希望它也对你有用。（我使用 x64 Windows 7）

下载此版本的 openssl：[openssl for x64 Windows](https://code.google.com/p/openssl-for-windows/downloads/detail?name=openssl-0.9.8e_X64.zip&can=2&q=)

在 C:\ 目录中创建一个名为**openssl的文件夹。**

解压openssl文件夹中的**openssl zip。**

转到**keytool.exe**的位置(C:\Program Files (x86)\Java...\bin)

在按住 shift 的同时，右键单击 bin 文件夹并打开命令提示符窗口。

输入以下内容：

```
keytool -exportcert -alias androiddebugkey -keystore "C:\Users\"username"\.android\debug.keystore" | "C:\openssl\bin\openssl" sha1 -binary | "C:\openssl\bin\openssl" base64 
```

（**用您的用户名替换“用户名”**。当然没有引号）

您必须输入密码：android

您的哈希键应该出现。（如果您在密钥中获得“=”，请不要删除它。它是密钥的一部分）

祝您构建应用程序好运！

感谢[C Abernathy](https://stackoverflow.com/questions/13966906/app-is-misconfigured-for-facebook-login-not-returning-the-logcat-after-setti/ "原线")发布此方法。

# java - 检测 CSV 文件中出现的行数

> ID：14820095
> 
> 赞同：0
> 
> 时间：2013-02-11T20:17:24.820
> 
> 标签：java, parsing, csv, file-io, conditional-statements

您将如何从使用 OpenCSV 库解析的文件中获取行号，其中出现特定条件？我希望在他们的 CSV 文件中用行号警告用户，只要该行上检测到潜在的错误值。

这是一段代码，我将文件解析为字符串数组：

```
try 
{
    CSVReader reader = new CSVReader(new FileReader(filePath), ',');

    // Reads the complete file into list of tokens.
    List<String[]> rowsAsTokens = null;

    try 
    {
        rowsAsTokens = reader.readAll();
    } 

    for(String[] row: rowsAsTokens) 
    {
        //Check for conditions within CSV file
    }

    catch (IOException e1)
    {
        e1.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:22:53.850

为您的循环设置一个计数器，以在解析 CSV 时计算行号。

```
try 
{
    CSVReader reader = new CSVReader(new FileReader(filePath), ',');

    // Reads the complete file into list of tokens.
    List<String[]> rowsAsTokens = null;

    int lineNum = 0;

    try 
    {
        rowsAsTokens = reader.readAll();
    } 

    for(String[] row: rowsAsTokens) 
    {
        lineNum++; // increment the line number
        //Check for conditions within CSV file
        if (ERRONEOUS VALUE) {
            // save the lineNum. possibly to an array or a string. whatever you need
        }
    }

    catch (IOException e1)
    {
        e1.printStackTrace();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T20:21:43.457

关于什么：

```
 int line = 0;
   for(String[] row: rowsAsTokens) 
   {

        //Check for conditions within CSV file
        if (isErro) {
            String errMsg = "error in line: " + line;
            // output errrMsg;
        }
        line++;
   } 
```

# javascript - 可以使用 Node.js 通过 Google API 在地图上进行真正的实时更新

> ID：14820098
> 
> 赞同：0
> 
> 时间：2013-02-11T20:17:44.360
> 
> 标签：javascript, node.js, google-maps, meteor, javascript-framework

是否可以使用 Node.js 通过 Google Maps API 在地图上进行真正的实时更新，或者 Google 是否有一些回调限制，例如 5 秒。或 30 秒等？

因为几乎实时的东西是 node.js 的真正力量，例如流星延迟补偿等。

但我很好奇这是否可能，谷歌让我这样做。如果不允许使用“真正的”实时更新，那么最大值是多少。在网络应用程序中允许谷歌地图的回调时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:23:21.890

使用 Google 地理编码 API 的查询限制为每天 2,500 个地理定位请求。（Google Maps API for Business 的用户每天最多可以执行 100,000 个请求。）强制执行此限制是为了防止滥用和/或重新利用 Geocoding API，并且此限制将来可能会更改，恕不另行通知。此外，我们强制执行请求速率限制以防止滥用服务。如果您超过 24 小时限制或以其他方式滥用服务，Geocoding API 可能会暂时停止为您工作。如果您继续超过此限制，您对 Geocoding API 的访问可能会被阻止。

[https://developers.google.com/maps/documentation/geocoding/](https://developers.google.com/maps/documentation/geocoding/)

此上下文中的请求是对地理定位 API 的单个 http 请求，例如

```
http://maps.googleapis.com/maps/api/geocode/json?address=1600+Amphitheatre+Parkway,+Mountain+View,+CA&sensor=true_or_false 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T21:53:45.903

听起来，您并不真的需要 Geolocation API，您只需使用 Javascript Maps API 就可以了。地理位置 API 有助于在地址和坐标之间进行转换。如果您的用户正在插入新的目击但不知道坐标，或者如果您有坐标但需要有关区域名称的帮助，它会有所帮助。如果您确实使用它，您只需请求一次，因此限制为 2500 次，您每天可以进行 2500 次目击。如果这让您陷入困境，您还可以查看没有限制的 OpenStreetMap。

您可以使用地图、谷歌地图、OpenStreetMap 等，基本上可以根据您的要求动态移动/更新地图上的这些项目。

您可以将 UFO 位置存储在一个集合中。您可以更新地图的方式是使用[Meteor.autorun](http://docs.meteor.com/#meteor_autorun)。一旦将新文档添加/更新/编辑到您的集合中，它就可以实时更新所有客户端地图。

```
Meteor.autorun(function() {
    var ufos = UFOs.find({}).fetch();
    ufos.forEach(function(ufo) {
        //draw the ufo onto your map or edit the existing one already on.
    });
}); 
```

当您的 UFO 集合更新时，将调用此函数，您可以让它使用新内容更新地图/编辑现有内容。

# python - 不进行非规范化的 GAE 结构化模型

> ID：14820099
> 
> 赞同：0
> 
> 时间：2013-02-11T20:17:45.213
> 
> 标签：python, google-app-engine, google-cloud-datastore

我正在尝试为 Google App Engine 重构一个关系数据库，但在对一组关系进行建模时遇到了问题，这种方式可以让我以一种有效的方式查询我需要的数据。

作为一个人为的例子，假设我有以下模型：

```
class Rental(db.Model):
    # ancestor of one or more RentalDatas
    date = db.DateProperty()
    location = db.IntegerProperty()
    # + customer, etc

class RentalData(db.Model):
    # a Rental is our parent
    unicorn = db.ReferenceProperty(Unicorn, collection_name='rentals')
    mileage_in = db.FloatProperty()
    mileage_out = db.FloatProperty()
    # + returned_fed, etc

class Unicorn(db.Model):
    name = db.StringProperty()
    color = db.IntegerProperty()
    # 'rentals' collection from RentalData 
```

每次出租都可以包括多个独角兽，所以如果我能帮上忙，我宁愿不合并`Rental`和模型。`RentalData`我几乎总是从一个给定的开始`Unicorn`，并且我希望能够查询，比如说，独角兽是否是在最后**x**租赁中返回的，而不必遍历`RentalData`独角兽`rentals`集合中的每一个并查询父母，只是为了得到排序的日期。

我只需要硬着头皮去规范化吗？我尝试复制`date`in `RentalData`，并根据需要使用 parent() 以在我需要其中的属性时获取相应的`Rental`属性。它有效，但我担心我只是采取简单的方法。

# python - python中的//=有什么作用？

> ID：14820104
> 
> 赞同：3
> 
> 时间：2013-02-11T20:18:14.480
> 
> 标签：python

我正在阅读[http://learnpythonthehardway.org/book/ex37.html](http://learnpythonthehardway.org/book/ex37.html)但我不明白该`//=`符号的作用。 `/=`我感觉合理：

```
a = 9
a /= 3
a == 3 # => True 
```

但`//=`

```
a = 9
a //= 3
a == 3 # => Also True 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T20:19:05.213

`//`在 python3 中用作“整数除法”，看看[这个答案](https://stackoverflow.com/q/1282945/118150)。

在 C 中，`/`对整数的除法作为“带地板的除法”或“整数除法”。为了提供这种能力，python 提供了`//`运算符，不像`/`它会给出浮点结果。

权威参考当然是[pep-238](http://www.python.org/dev/peps/pep-0238/)。

从命令行版本（当你试图弄清楚这样的事情时很有用）：

```
Python 3.2.3 (default, Apr 11 2012, ...
Type "help", "copyright", "credits" or "license" for more information.
>>> a = 10
>>> a/3
3.3333333333333335
>>> a//3
3
>>> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T20:19:34.070

`/`如您所知，*经典除法*。`//`运算符是在 Python 2.2 中添加的，它执行*地板除法*，并且通过添加此运算符，您可以使用该运算符`from __future__ import division`使`/`运算符进行`true`除法。

`a //= 3`相当于`a = a // 3`。

所以，这里是总结：

```
Python Version       operator /       operator //
-------------------------------------------------
2.1x and older        classic           Not Added

2.2 and newer         classic           floor
(without import)      

2.2 and newer          true             floor
(with import) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T20:24:58.647

`//`是地板除法：它除法并向下舍入，但如果操作数是浮点数，它仍然会产生一个浮点数。在 Python 2 中，它与整数的常规除法相同，除非您使用它`from __future__ import division`来获得 Python 3 的“真正”除法行为。

所以，是的，这有点复杂。本质上，它存在通过将两个整数相除来重新创建您在 Python 2 中获得的行为，因为这在 Python 3 中发生了变化。

在 Python 2 中：

*   `11 / 5`→`2`
*   `11.0 / 5.0`→`2.2`
*   `11 // 5`→`2`
*   `11.0 // 5.0`→`2.0`

在 Python 3**或**带有 的 Python 2**或**`from __future__ import division`带有的Python 2 中运行：**`-Q new`**

 ***   `11 / 5`→`2.2`
*   `11.0 / 5.0`→`2.2`
*   `11 // 5`→`2`
*   `11.0 // 5.0`→`2.0`

而且，当然，添加`=`just 会将其变成一个组合赋值运算符，例如`/=`.**

# migration - Facebook 2013 年 2 月重大变化 - 如何摆脱 App 中的“立即修复”消息？

> ID：14820105
> 
> 赞同：4
> 
> 时间：2013-02-11T20:18:15.757
> 
> 标签：migration, facebook-apps

48 分钟前，我收到一条警报，上面写着：

2013 年 2 月的重大变更现已修复 48 分钟前 您的应用需要针对 2013 年 2 月的重大变更进行更新。一旦您的应用程序合规，请在应用程序仪表板的“高级”部分中将迁移设置设置为“已启用”。

您的应用需要在 2013 年 2 月 5 日星期二之前更新

我今天是在 2 月 11 日星期一收到的。我发现一些说明说转到您的迁移设置并选中 2 月重大更改框，但我没有相应的框，因为很明显截止日期已经过去。我有一个用于 3 月和 4 月更改的框，我在警报页面中检查了这些更改，它们显示为已解决，但 2 月的仍然显示“立即修复”。

我的应用程序仅用于为我的 Facebook 页面标签创建“关于”页面，并使用名为 Facebook 标签管理器的 Wordpress 插件进行设置。它所做的只是显示我在 WP 插件中输入的文本，并将其显示为 FB 选项卡中的关于页面。据我所知，它仍在工作 - 我可以看到它。访问我页面的人可以单击选项卡并阅读文本。这就是它所做的一切。

但是我怎样才能摆脱二月份的“立即修复”警报或让它消失呢？它是否仍然存在，因为我仍然需要在应用程序设置中更改某些内容，因为我看不到它会是什么。

我想联系 Facebook 说明为什么在截止日期过去 6 天后向我发送警报，但似乎也没有办法做到这一点。

谢谢你的帮助

# c# - UDP 服务器重置

> ID：14820108
> 
> 赞同：0
> 
> 时间：2013-02-11T20:18:32.673
> 
> 标签：c#, udp

我有一个非常简单的 C# 应用程序，它应该侦听 UDP 端口并将任何传入数据写入列表框。整个事情如下：

```
public partial class frmMain : Form
{
    UdpClient udpc = new UdpClient(44557);

    public frmMain()
    {
        InitializeComponent();
    }

    private void ReceiveCallback(IAsyncResult ar)
    {
        IPEndPoint ipep = null;
        var rcv = udpc.EndReceive(ar, ref ipep);
        string s = Encoding.ASCII.GetString(rcv);
        this.Invoke((Action)(()=>lsbLog.Items.Add(s)));
    }

    private void frmMain_Load(object sender, EventArgs e)
    {
        udpc.BeginReceive(new AsyncCallback(ReceiveCallback), udpc);
    }
} 
```

它获取第一个数据包并记录它，但仅此而已。我如何“重置”它以继续接收？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:20:04.780

每个接收都以 a 开始`BeginReceive`并通过 完成`EndReceive`。您需要`BeginReceive`在第一次接收完成后再次调用才能继续接收入站数据。

[在此处](http://www.codeproject.com/Articles/132623/Basic-UDP-Receiver)查看“处理收到的 UDP 数据包”以查看您需要的模式。

# java - 使用数组作为参数返回多个值是一种不好的做法吗

> ID：14820115
> 
> 赞同：3
> 
> 时间：2013-02-11T20:18:48.993
> 
> 标签：java

我有时（实际上，经常）发现自己使用单元素数组从方法返回多个值。像这样的东西：

```
public static int foo(int param1, int param2[], String param3[])
{
    // method body
    ....
    // set return values
    param2[0] = <some value>;
    param3[0] = <some value>;

    return <some value>;
} 
```

这是一个不好的做法吗？（似乎是因为我的一些朋友说他们不知道它在 2 秒内做了什么！）但我首先使用它的原因是因为它看起来最接近`pass-by-reference`C++ 中的已知内容。而且这种做法并没有被劝阻`C++`，所以......

但是，如果这真的是一种错误的做事方式，那么知道如何以干净的方式重写它吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T20:21:56.253

创建一个包含要返回的数据的对象。

然后您可以返回该对象的一个​​实例。

```
class FooData {
    private int someInt;
    private int anotherInt;
    private String someString;

    public FooData(int a, int b, String c) {
        someInt = a;
        anotherInt = b;
        someString = c;
    }
}

public FooData foo() {
    // do stuff
    FooData fd = new FooData(blah, blahh, blahhh);
    return fd;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-11T21:12:10.367

虽然我同意这里的普遍观点，即出于这样的目的使用数组是不好的做法，但我想补充几点。您确定“通过引用传递”真的是您首先需要的吗？许多人说你的代码风格不好，但现在让我告诉你为什么这是恕我直言。“通过引用传递”主要是“副作用编程”的同义词，这是您一直想要避免的事情。它使代码更难调试和理解，并且在多线程环境中，这种态度的不良影响确实会给你带来沉重的打击。要在 Java 中编写可伸缩和线程安全的代码，您应该尽可能使对象“只读”，即理想情况下，您同时创建一个对象并对其进行初始化，然后在整个应用程序中以这种不可修改的状态使用它. 对状态的逻辑更改几乎总是可以被认为是新状态的“创建”，即创建一个初始化为然后需要的状态的新实例。许多现代脚本语言只允许您以这种方式工作，它使事情更容易理解。与 C++ 相比，Java 在分配和释放短期对象方面效率更高，因此这里其他人的建议实际上并没有错：创建一个特殊类的实例来保存函数结果，只是为了达到目的的返回结果。即使您在循环中执行此操作，JVM 也将足够智能以有效地处理该问题。Java 只会在需要时从操作系统中以非常大的块分配内存，并且会在内部处理对象创建和释放，而无需像 C/C++ 这样的语言所涉及的开销。"

编辑：我建议你在这个论坛或网络上搜索“副作用”、“函数式编程”或“不变性”等术语。这很可能会为您的问题打开一个新的视角。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-11T20:22:19.083

我认为使用作为方法参数的单元素数组“返回”值是不好的做法。

这是关于这个主题的[另一个 SO 问题。](https://stackoverflow.com/questions/2970984/java-assigning-a-new-value-to-a-parameter-is-this-considered-a-bad-practice)简而言之，它对可读性非常不利。

有一个简单的解决方法：将您希望返回的所有值包装在专门为此目的定义的类中，并返回该类的实例。

```
return new ValueHolder(someValue1, someValue2, someValue3); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-11T20:46:25.757

这不是很惯用的java。通常有更好的软件设计方法。

你真正用“单元素数组”做的是创建一个可变对象（因为 String 是不可变的，像 int 这样的原语也是不可变的）并通过引用传递它。修改这个可变对象称为该方法的“副作用”。一般来说，你应该尽量减少可变性（[Effective Java Item 15](http://books.google.com/books?id=ka2VUBqHiWkC&lpg=PA76&ots=yYIfOfr6OX&dq=effective%20java%20immutable&pg=PA73#v=onepage&q=effective%20java%20immutable&f=false)）并且你的方法应该没有副作用。这里有几种方法。

### 1\. 将方法拆分为两个（或三个）都采用相同参数的方法：

```
public static int foo1(int param1)
{
    // method body
    ....
    return <some value>;
} 
```

同样，您可能有

`public static int foo2(int param1) { ... }`

和

`public static String foo3(int param1) { ... }`.

### 2\. 返回一个复合对象。

```
public Container {
    private final int originalReturn;
    private final int param2;
    private final String param3;

    public Container(int originalReturn, int param2, String param3) {
        this.originalReturn = originalReturn;
        this.param2 = param2;
        this.param3 = param3;
    }

    // getters
}

public static Container foo(int param1, int param2[], String param3[])
{
    // method body
    ....
    // set return values
    return new Container(<some value>, <some value>, <some value>);
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-11T20:20:44.953

如果值不相关，这确实是不好的做法。这通常是一个指示符，您可以将该函数拆分为两个，每个返回一个值。

编辑：

我假设您要返回在数组中的方法中计算的两个值。不是这样吗？

例如

```
public int[] getStatistics(int[] nums)
{
    //code

    int[] returns = new int[2];
    returns[0] = mean;
    returns[1] = mode;

    return returns;
} 
```

上述函数可以拆分为`getMean()`和`getMode()`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-11T20:24:21.187

通过引用传递变量允许函数“合法地”改变它们的值。请参阅[这篇文章](http://www.javaworld.com/javaqa/2000-05/03-qa-0526-pass.html)以消除在 Java 中什么时候可以实现这一点的困惑，什么时候不可以......

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-11T20:55:51.590

如果值具有不同的类型和不同的实体（例如名称和地址等），这是不好的做法。创建具有相同数据类型的数组（例如地址列表）很好。

# html - 将 div 与底部对齐并应用边距

> ID：14820117
> 
> 赞同：0
> 
> 时间：2013-02-11T20:18:52.707
> 
> 标签：html, css

我们如何将所有列表项对齐到父项的底部，并用边距分隔。

如果我申请位置：绝对；底部：0，所有元素都与底部对齐，但边距被丢弃。

```
 #bars0 {
width: 472px;
height: 258px;
position: relative;
 }
 #bars0 li {
border: solid red 1px;
width: 30px;
height: 50px;
margin-right: 95px;
position: absolute;
    bottom: 0   
}

  <div id="bars0">
   <ul><!-- update: added ul -->
  <li></li>
  <li></li>
  <li></li> 
  <li></li>
  </ul>
  </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:43:04.030

为什么你不能`<li>`用`<ul>`标签包围并绝对定位`<ul>`？这样你就可以控制内部的边距`<li>`？？

的HTML：

```
<div id="bars0">
    <ul>
        <li></li>
        <li></li>
        <li></li> 
        <li></li>
    </ul>
</div> 
```

CSS：

```
#bars0 {
    width: 472px;
    height: 258px;
    position: relative;
}

#bars0 ul {
    position: absolute;
    bottom: 0;
}

#bars0 li {
    border: solid red 1px;
    width: 30px;
    height: 50px;
    margin-right: 95px;
    vertical-align: bottom;
    display: block;
    float: left;
}

#bars0 li:last-child {
    margin-right: 0;
} 
```

因此：http : [//jsfiddle.net/RYBFF/1/](http://jsfiddle.net/RYBFF/1/)

要解决您最近对评论的要求：只需使用 :last-child 删除列表中最后一项的边距，`<li>`如上所示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T20:26:11.833

我认为你正在尝试做这样的事情：

```
<style type="text/css">
#container {
    position: relative;
    height:200px;
    border:1px solid red;
}
#bars{
    position:absolute;
    bottom: 5px;    
}
#bars ul li {
    float: left;
    min-width:100px;
}
</style>
<div id="container">
    <div id="bars">
        <ul>
            <li>Test</li>
            <li>Test 2</li>
        </ul>
    </div>
</div> 
```

这是一个 jsFiddle 来演示：http: [//jsfiddle.net/YYCZc/2/](http://jsfiddle.net/YYCZc/2/)

# java - 在 build.xml 中指定一个外部 jar 以在编译后添加到生成的 jar 中

> ID：14820119
> 
> 赞同：0
> 
> 时间：2013-02-11T20:19:02.387
> 
> 标签：java, ant, jar, build.xml

我正在尝试修改 build.xml 文件以指定要添加到最终编译的 jar 的外部 jar 。

这是我的 build.xml 文件

```
 <project name="cmmdcservice" default="all">
  <property name="kf.dir" location="E:\knopflerfish_osgi_3.4.0"/>
  <property name="framework.jar"
   location="${kf.dir}/osgi/framework.jar"/>

  <target name="all" depends="init,compile,jar"/>

  <target name="init">
  <mkdir dir="out/classes"/>
  </target>

  <target name="compile">
  <javac destdir = "out/classes"
  debug = "on"
  srcdir = "src"
  includeantruntime="false">
  <classpath>
    <pathelement location="${framework.jar}"/>
  </classpath>
  </javac>
  </target>

  <target name="jar">
  <jar basedir = "out/classes"
  jarfile = "out/${ant.project.name}.jar"
  compress = "true"
  includes = "**/*"
  manifest = "manifest.mf"/>
  </target>

  <target name="clean">
  <delete dir = "out"/>
  </target>
  </project> 
```

我想在 target name="jar" 部分我需要参考我的外部 jar，但实际上不知道如何......有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:05:34.220

您需要添加一个 post-jar 部分。这是一个例子：

```
<target name="-post-jar">
  <jar update="true" destfile="${dist.jar}">
    <!-- Path to your jar. -->
    <zipfileset src="/home/user/javalibs/myjar.jar"/>
 </jar>
</target> 
```

# c# - 将列表框绑定到绑定列表，过滤项目属性

> ID：14820122
> 
> 赞同：0
> 
> 时间：2013-02-11T20:19:15.967
> 
> 标签：c#, winforms, data-binding, listbox, bindinglist

我正在开发一个 Winforms 应用程序，并且我有一个要绑定到列表框的对象的绑定列表。我得到了这个工作，但我接下来要做的只是显示特定属性为真的项目。

所以我有一个带有绑定列表的类

```
class DataBuilder
{    
    public BindingList<TableSet> allTableSets = new BindingList<TableSet>();
} 
```

还有一个`TableSet`具有一些属性的类

```
class TableSet
{
    public string TableSetName {get; set;}
    public bool IsPopulated {get; set;}
} 
```

现在在我的表单上，我想将一个列表框绑定到 allTableSets，但只显示其中的项目 `IsPopulated == true`

到目前为止，我在表单上的内容只显示了 allTableSets 列表中的所有项目

```
public partial class MainForm : Form
{
    DataBuilder dataBuilder = new DataBuilder();
    {
        this.populatedTableSetsListBox.DataSource = dataBuilder.allTableSets;
        this.populatedTableSetsListBox.DisplayMember = "TableSetName";
    }
} 
```

我一直在网上寻找，但没有发现任何与我正在尝试做的类似的事情。非常感谢任何建议或替代方法。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:11:18.103

试试这个：在你的`DataBuilder`类中，有一个函数可以根据你的过滤条件返回你的项目的一个子集。

例如，在您的`DataBuilder`班级中：

```
 public BindingList<TableSet> someTableSets()
    {
        BindingList<TableSet> someTableList = new BindingList<TableSet>();
        foreach (TableSet TS in allTableSets)
            if (TS.IsPopulated == true)
                someTableList.Add(TS);
        return someTableList;
    } 
```

然后，在您的 中`MainForm`，而不是设置`DataSource`to `allTableSets`，将其设置为等于`someTableSets()`函数的结果：

```
 this.populatedTableSetsListBox.DataSource = dataBuilder.someTableSets(); 
```

# python - 如何生成带有文本作为 ytick 标签的绘图

> ID：14820124
> 
> 赞同：2
> 
> 时间：2013-02-11T20:19:21.177
> 
> 标签：python, matplotlib, pandas

我刚刚开始了解 Python 库`pandas`和`matplotlib`. 你能告诉我一个例子如何产生一个类似于这个的情节`matplotlib`：

![在此处输入图像描述](../Images/4897f49868b419e2200d9e48f30a7a67.png)

在右侧的 y 轴上列出了数据实例的名称。下面的 x 轴是与每个实例相关的一些值。

数据采用 .csv 格式，类似于：

```
name;value1;value2
uk-2007-05;0.01;1000 
```

理想情况下，两者`value1`和`value2`都应该用不同的颜色或标记绘制在同一个图中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T20:53:03.087

```
import random
import matplotlib.pyplot as plt

labels = [chr(j) for j in range(97, 115)]

fake_data1 = [random.random() for l in labels]
fake_data2 = [random.random() for l in labels]
y_data = range(len(labels))

figure()
ax = gca()

ax.grid(True)
ax.scatter(fake_data1, y_data, color='r')
ax.scatter(fake_data2, y_data, color='b')

ax.set_yticks(range(len(labels)))
ax.set_yticklabels(labels)
ax.invert_xaxis()
plt.draw() 
```

Where`labels`是您的标签列表，`y_data`是每个数据点的标签索引，`fake_data1`并且`fake_data2`是您的`x`值。

![输出](../Images/7252a755edad348984eec4d76e170d49.png)

# css - CSS 均匀分布图像行，适用于 IE8

> ID：14820135
> 
> 赞同：2
> 
> 时间：2013-02-11T20:20:09.133
> 
> 标签：css, internet-explorer-8, grid

我想知道是否有人对此有解决方案。我想要一个 6 列乘两行的图像网格。目前它工作正常： http: [//oaeyewear.4pixels.co.uk/brands.html](http://oaeyewear.4pixels.co.uk/brands.html) 我正在使用：

```
.gallery {
   list-style-type: none;
}
.gallery li {
    float: left;
    height: 130px;
    width: 130px;
    margin-bottom: 26px;
    margin-right: 26px;
}
.gallery li:nth-of-type(6n+0) {
    margin-right: 0px;
} 
```

但我知道 IE8 不会识别第 n 个类型的选择器。有没有办法

1.  让 IE8 一起玩。Selectivizr 不会用 jQuery 做这个，我不想引入另一个库
2.  只为 IE8 使用其他一些条件 CSS
3.  javascript？

理想情况下，该解决方案需要响应式工作，因为该站点基于 Foundation Framework。目前它运行良好，因为它可以缩小到两列，我可以`<li>`使用媒体查询更改它以跨 300 像素工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:24:59.220

在这种情况下，我将使用负边距方法。

```
 .gallery {
       list-style-type: none;
       margin-left: -26px;
    }
    .gallery li {
        float: left;
        height: 130px;
        width: 130px;
        margin-bottom: 26px;
        margin-left: 26px;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T20:37:01.787

您可以尝试使用[ie7.js | ie8.js | ie9.js](http://code.google.com/p/ie7-js/)而不是 Selectivizr。

这确实支持`nth-of-type`为 IE 添加，而不需要任何其他库。

另一方面，它还实现了一大堆其他功能并修复了 IE，这可能是您想要的，也可能不是您想要的。如果您使用其他 polyfill，则需要检查它是否不冲突。不过值得一试。

# c# - 找零计算器

> ID：14820137
> 
> 赞同：-1
> 
> 时间：2013-02-11T20:20:17.773
> 
> 标签：c#

我有一个象牙，我被要求编写一个程序来计算现金交易后给客户的零钱，并确定每种面额的纸币和硬币的数量。

用户必须输入商品成本和从客户那里收到的金额。

我必须有一个类，它的方法接受十进制参数、Cost 和 Chashreceived，以及整数参数：Hunderds、Fifties、Twenties、Tens、Fives、Twos、Ones、50c、10c、5c、2c 和 1c。

我从收到的现金中减去成本，并计算需要作为找零退回的纸币和硬币的确切数量。

我已经尝试过了，但是当我必须放入硬币时它变得有问题。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ChangeCalculator
{
class Program
{
    static void Main(string[] args)
    {
        clsCash Money = new clsCash();
        clsCash Paid = new clsCash();
        Console.WriteLine("What is the cost of the goods?");
        Money.Cost = Convert.ToDecimal(Console.ReadLine());
        Console.WriteLine("How much was recived?");
        Paid.CashRecieved = Convert.ToDecimal(Console.ReadLine());
        Money.GetChange(Money.Cost, Paid.CashRecieved);
        Console.Read();
    }
}

class clsCash
{

private decimal cost;
private decimal cashRecieved;
public decimal Cost
{
    get
    {
        return cost;
    }
    set
    {
        cost = value;
    }
}
public decimal CashRecieved
{
    get
    {
        return cashRecieved;
    }
    set
    {
        cashRecieved = value;
    }
}

public void GetChange(decimal Cost, decimal CashRecieved)
{

    decimal change = CashRecieved - Cost;
    int hundreds = 0;
    int fifty = 0;
    int twenty = 0;
    int ten = 0;
    int five = 0;
    int two = 0;
    int one = 0;
    int centsfifty = 0;
    int centsten = 0;
    int centsfive = 0;
    int centstwo = 0;
    int centsone = 0;
    do
   {

    if (change >= 100)
    {
         hundreds = (int)change / 100;
         change = (int)change % 100;
    } //while (change > 0);
    else if (change >= 50)
    {
        fifty = (int)change / 50;
        change = change % 50;
    }
    else if (change >= 20)
    {
        twenty = (int)change / 20;
        change = change % 20;
    }
    else if (change >= 10)
    {
        ten = (int)change / 10;
        change = change % 10;
    }
    else if (change >= 5)
    {
        five = (int)change / 5;
        change = change % 5;
    }
    else if (change >= 2)
    {
        two = (int)change / 2;
        change = change % 2;
    }

    else if (change >= 1)
    {
        one = (int)change / 1;
        change = change % 1;
    }
    else if (change > 1)
    {
        decimal fhu = change / 0.5m;
        centsfifty = (int)fhu;
        change = change % 0.5m;
        Console.WriteLine("YOUR CHANGE IS:");
    }

    } while (change >= 0);

    Console.WriteLine("YOUR CHANGE IS:");
    Console.WriteLine("---------------");
    Console.WriteLine("HUNDREDS RANDS \t:  {0}", hundreds);
    Console.WriteLine("FIFTY RANDS \t:  {0}", fifty);
    Console.WriteLine("TWENTY RANDS \t:  {0}", twenty);
    Console.WriteLine("TEN RANDS \t:  {0}", ten);
    Console.WriteLine("FIVE RANDS \t:  {0}", five);
    Console.WriteLine("TWO RANDS \t:  {0}", two);
    Console.WriteLine("ONE RANDS \t:  {0}", one);
    Console.WriteLine("50 CENTS \t:  {0}", centsfifty);

}
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-16T02:51:41.860

帮助简化代码并提高其可读性的一种方法是消除条件和嵌套算术运算，这几乎总是使代码更难理解。

我看到 int 被施放了太多次，这可能意味着最好从一开始就使用 int 。即使您将 cost 和 cashreceived 变量声明为十进制类型，它们都被强制转换为 int。因此，最好从一开始就将它们都声明为 int，这将有助于简化转换。

你可以做这样的事情

```
hundreds = change / 100;
change %= 100;

fifty = change / 50;
change %= 50;

ten = change / 10;
change %= 10;

five = change / 5;
change %= 5;

two = change / 2;
change %= 2;

one = change; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T20:51:12.467

您可以使用一种模式来获得这样的金额，

这是一个帮助您入门的小示例，您可能可以将其包装在一个函数或其他东西中，但它可以让您了解从哪里开始。

```
// number to find values from
int change = 254;

int _hundreds = 100;
int _fifty = 50;
int _twenty = 20;
int _ten = 10;
int _five = 5;
int _two = 2;
int _one = 1;

int hundreds = (int)(change / _hundreds);
int fifty = (int)((change % _hundreds) / _fifty);
int twenty = (int)(((change % _hundreds) % _fifty) / _twenty);
int ten = (int)((((change % _hundreds) % _fifty) % _twenty) / _ten);
int five = (int)(((((change % _hundreds) % _fifty) % _twenty) % _ten) / _five);
int two = (int)((((((change % _hundreds) % _fifty) % _twenty) % _ten) % _five) / _two);
int one = (int)(((((((change % _hundreds) % _fifty) % _twenty) % _ten) % _five) % _two) / _one); 
```

退货

```
hundreds = 2
fifty = 1
twenty = 0
ten = 0
five = 0
two = 2
one = 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-01T21:36:30.170

代替

```
 if (change >= 100)
     {
     hundreds = (int)change / 100;
     change = (int)change % 100;

     } 
```

尝试使用

```
 if (change >= 100)
        {
            decimal rand = change / 100;
            hundred= (int)rand;
            change = change % 100;
        }

        if (change >= 50)
        {
            decimal rand = (int)change / 50;
            fifty = (int)rand;
            change = change % 50;
        }

        if (change >= 20)
        {
            decimal rand = change / 20;
            twenty = (int)rand;
            change = change % 20;
        } 
```

我希望这有帮助。

# haskell - 理解 Haskell 中的递归

> ID：14820138
> 
> 赞同：7
> 
> 时间：2013-02-11T20:20:24.447
> 
> 标签：haskell

我很难理解如何以递归方式思考问题，并使用 Haskell 解决它们。我花了几个小时阅读试图围绕递归来解决问题。我最常从理解它的人那里得到的解释永远不清楚，就像“你传递一个函数，函数的名称作为参数，然后函数将执行，解决一小部分问题并调用一次又一次地发挥作用，直到你达到基本情况”。

有人可以请足够好心，并引导我完成这三个简单递归函数的思考过程吗？与其说是它们的功能，不如说是代码如何递归地执行和解决问题。

提前谢谢了！

功能一

```
maximum' [] = error "maximum of empty list"
maximum' [x] = x
maximum' (x:rest) = max x(maximum' rest) 
```

功能二

```
take' n _  
    | n <= 0   = []  
take' _ []     = []  
take' n (x:xs) = x : take' (n-1) xs 
```

功能 3

```
reverse' [] = []  
reverse' (x:xs) = reverse' xs ++ [x] 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-11T22:44:56.073

## 指导方针

在尝试理解递归时，您可能会发现更容易思考算法对于给定输入的*行为方式。*很容易对执行路径的样子感到困惑，所以问自己以下问题：

*   如果我传递一个空列表会发生什么？
*   如果我通过一个包含一个项目的列表会发生什么？
*   如果我传递一个包含许多项目的列表会发生什么？

或者，对于数字的递归：

*   如果我传递一个负数会发生什么？
*   如果我通过 0 会发生什么？
*   如果我传递一个大于 0 的数字会怎样？

递归算法的结构通常只是覆盖上述情况。因此，让我们看看您的算法如何表现以了解这种方法：

## 最大'

```
maximum []     = error
maximum [1]    = 1
maximum [1, 2] = 2 
```

如您所见，唯一有趣的行为是#3。其他人只是确保算法终止。看定义，

```
maximum' (x:rest) = max x (maximum' rest) 
```

调用它`[1, 2]`扩展为：

```
maximum [1, 2]    ~ max 1 (maximum' [2])
                  ~ max 1 2 
```

`maximum'`通过返回一个数字来工作，这种情况下知道如何使用`max`. 我们再看一个案例：

```
maximum [0, 1, 2] ~ max 0 (maximum' [1, 2]) 
                  ~ max 0 (max 1 2)
                  ~ max 0 2 
```

您可以看到，对于此输入，`maximum'`第一行中的递归调用与前面的示例完全相同。

## 逆转'

```
reverse []     = []
reverse [1]    = [1]
reverse [1, 2] = [2, 1] 
```

反向工作通过获取给定列表的头部并将其粘贴在末尾。对于一个空列表，这不涉及任何工作，所以这是基本情况。所以给出定义：

```
reverse' (x:xs) = reverse' xs ++ [x] 
```

让我们做一些替换。鉴于这`[x]`相当于`x:[]`，您可以看到实际上有两个值需要处理：

```
reverse' [1]    ~ reverse' [] ++ 1
                ~ []          ++ 1
                ~ [1] 
```

很容易。对于两元素列表：

```
reverse' [0, 1] ~ reverse' [1] ++ 0
                ~ [] ++ [1] ++ 0
                ~ [1, 0] 
```

## 拿'

此函数引入了对整数参数和列表的递归，因此有两种基本情况。

1.  如果我们取 0 或更少的物品会发生什么？我们不需要拿任何物品，所以只返回空列表。

    ```
    take' n _   | n <= 0    = [] 

    take' -1 [1]  = []
    take' 0  [1]  = [] 
    ```

2.  如果我们传递一个空列表会发生什么？没有更多的项目可以采取，所以停止递归。

    ```
    take' _ []    = []

    take' 1 []    = []
    take  -1 []   = [] 
    ```

该算法的核心实际上是遍历列表，拉开输入列表并减少要获取的项目数量，直到上述任一基本情况停止该过程。

```
take' n (x:xs) = x : take' (n-1) xs 
```

因此，在首先满足数字基本情况的情况下，我们在到达列表末尾之前停止。

```
take' 1 [9, 8]  ~ 9 : take (1-1) [8]
                ~ 9 : take 0     [8]
                ~ 9 : []
                ~ [9] 
```

在首先满足列表基本情况的情况下，我们会在计数器达到 0 之前用完项目，然后返回我们能做的。

```
take' 3 [9, 8]  ~ 9 : take (3-1) [8]
                ~ 9 : take 2     [8]
                ~ 9 : 8 : take 1 []
                ~ 9 : 8 : []
                ~ [9, 8] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T22:48:41.890

递归是将某个函数应用于集合的一种策略。您将该函数应用于该集合的第一个元素，然后对其余元素重复该过程。

举个例子，您想将列表中的所有整数加倍。首先，您考虑我应该使用哪个功能？答案 -> `2*`，现在你必须递归地应用这个函数。让我们称之为它`apply_rec`，所以你有：

```
apply_rec (x:xs) = (2*x) 
```

但是这只改变了第一个元素，你想改变集合上的所有元素。因此，您还必须将 应用于`apply_rec`其余元素。因此：

```
apply_rec (x:xs) = (2*x) : (apply_rec xs) 
```

现在你有一个不同的问题。什么时候`apply_rec`结束？当您到达列表末尾时，它就结束了。换句话说`[]`，因此您也需要涵盖这种情况。

```
apply_rec [] = []
apply_rec (x:xs) = (2*x) : (apply_rec xs) 
```

当您到达终点时，您不想应用任何功能，因此该功能`apply_rec`应该“返回” `[]`。

让我们看看这个函数在 set = 中的行为`[1,2,3]`。

1.  `apply_rec [1,2,3] = (2 * 1) : (apply_rec [2,3])`
2.  `apply_rec [2,3] = 2 : ((2 * 2) : (apply_rec [3]))`
3.  `apply_rec [3] = 2 : (4 : ((2 * 3) : (apply_rec []))`
4.  `apply_rec [] = 2 : (4 : (6 : [])))`

导致`[2,4,6]`.

由于您可能不太了解递归，因此最好从比您提供的示例更简单的示例开始。还可以看看[学习递归](http://learnyouahaskell.com/recursion)和这个[Haskell 教程 3-递归](http://www.youtube.com/watch?v=ByLk29XADww)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-16T10:53:46.350

您问的是“思维过程”，大概是程序员，而不是计算机，对吗？所以这是我的两分钱：

考虑`g`使用递归编写一些函数的方法是，假设***您******已经编写了该函数***。就这样。

这意味着您可以在需要时使用它，并且它“会做”它应该做的*任何事情。*所以只要写下*那*是什么——**制定它必须遵守的*法律***，写下你所知道的一切。说点什么*吧*。

现在，只是说`g x = g x`不是说什么。当然这是真的，但它是一个毫无意义的重言式。如果我们说它`g x = g (x+2)`不再是同义反复，但无论如何都是没有意义的。我们需要说一些更明智的话。例如，

```
g :: Integer -> Bool
g x | x<=0 = False
g 1 = True
g 2 = True 
```

在这里我们*说点什么*。还，

```
g x = x == y+z  where
          y = head [y | y<-[x-1,x-2..], g y]    -- biggest y<x that g y
          z = head [z | z<-[y-1,y-2..], g z]    -- biggest z<y that g z 
```

我们是否已经说出了我们不得不说的一切`x`？无论我们做了还是没有，我们都说过*任何* `x`可能的事情。这就是我们的递归定义——***一旦所有的可能性都用尽了，我们就完成了***。

但是***终止***呢？我们想从我们的函数中得到一些结果，我们希望它完成它的工作。这意味着，当我们使用它来计算 时`x`，我们需要***确保我们以***递归方式使用它，其中一些是***“之前”***`y`定义的，即***“更接近”我们拥有的最简单定义的案例之一***。 *`x`*

 **在这里，我们做到了。现在我们可以惊叹于我们的手艺，

```
filter g [0..] 
```

最后一件事是，为了理解一个定义，不要试图追溯它的步骤。只需阅读方程式本身。如果我们看到上面的定义`g`，我们会简单地把它理解为：`g`是一个布尔函数，它是一个数字，它`True`代表 1 和 2，以及任何`x > 2`它前面两个`g`数字的和。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T20:47:36.233

看功能3：

```
reverse' [] = []  
reverse' (x:xs) = reverse' xs ++ [x] 
```

假设你调用了 reverse' [1,2,3] 然后......

```
1\. reverse' [1,2,3] = reverse' [2,3] ++ [1]

   reverse' [2,3] = reverse' [3] ++ [2] ... so replacing in equation 1, we get:

2\. reverse' [1,2,3] = reverse' [3] ++ [2] ++ [1]

   reverse' [3] = [3] and there is no xs ...

  ** UPDATE ** There *is* an xs!  The xs of [3] is [], the empty list. 

   We can confirm that in GHCi like this:

     Prelude> let (x:xs) = [3]
     Prelude> xs
     []

   So, actually, reverse' [3] = reverse' [] ++ [3]

   Replacing in equation 2, we get:

3\. reverse' [1,2,3] = reverse' [] ++ [3] ++ [2] ++ [1]

   Which brings us to the base case: reverse' [] = []
   Replacing in equation 3, we get:

4\. reverse' [1,2,3] = [] ++ [3] ++ [2] ++ [1], which collapses to:

5\. reverse' [1,2,3] = [3,2,1], which, hopefully, is what you intended! 
```

也许你可以尝试对其他两个做类似的事情。选择小参数。
取得成功！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-11T23:02:58.413

也许您提出问题的方式不是很好，我的意思是这不是通过研究现有递归函数的实现，您将了解如何复制它。我更愿意为您提供一种替代方式，它可以被视为一个有条不紊的过程，可以帮助您编写递归调用的标准框架，然后促进对它们的推理。

您所有的示例都是关于列表的，那么使用列表时的第一件事就是详尽无遗，我的意思是使用模式匹配。

```
rec_fun [] = -- something here, surely the base case
rec_fun (x:xs) = -- another thing here, surely the general case 
```

现在，基本情况不能包含递归，否则你肯定会以无限循环结束，那么基本情况应该返回一个值，掌握这个值的最好方法是查看函数的类型注释。

例如 ：

```
reverse :: [a] -> [a] 
```

可以鼓励您将基本情况视为 [a] 类型的值，将 [] 视为反向

```
maximum :: [a] -> a 
```

可以鼓励您将基本情况视为 a 类型的最大值

现在对于递归部分，如上所述，该函数应该包括对她自己的调用。

```
rec_fun (x:xs) = fun x rec_fun xs 
```

用 fun 表示使用另一个函数负责实现递归调用的链接。为了帮助您的直觉，我们可以将其呈现为操作员。

```
rec_fun (x:xs) = x `fun` rec_fun xs 
```

现在考虑（再次）您的函数的类型注释（或更简单地说是基本情况），您应该能够推断出此运算符的性质。对于反向，因为它应该返回一个列表，所以运算符肯定是连接（++）等等。

如果你把所有这些东西放在一起，最终得到所需的实现应该不难。

当然，与任何其他算法一样，您总是需要稍微思考一下，并且没有神奇的秘诀，您必须思考。例如，当您知道列表尾部的最大值时，列表的最大值是多少？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-26T09:25:10.387

我也一直发现很难递归思考。浏览[http://learnyouahaskell.com/](http://learnyouahaskell.com/)递归章节几次，然后尝试重新实现他的重新实现有助于巩固它。[此外，一般来说，通过仔细阅读Mostly Adequate Guide](https://mostly-adequate.gitbooks.io/mostly-adequate-guide/)并练习柯里化和组合来学习功能性编程使我专注于解决问题的核心，然后以其他方式应用它。

回到递归......基本上这些是我在考虑递归解决方案时经历的步骤：

1.  递归必须停止，因此请考虑一个或多个基本案例。在这些情况下，不再需要进一步调用该函数。
2.  考虑**最简单**的非基本情况（递归情况），并考虑如何以会导致基本情况的方式再次调用函数......这样函数就不会继续调用自己。关键是关注最简单的非基本案例。这将帮助您解决问题。

因此，例如，如果您必须反转列表，则基本情况将是一个空列表或一个元素的列表。转到递归情况时，不要考虑`[1,2,3,4]`. 而是考虑最简单的情况 ( `[1,2]`) 以及如何解决该问题。答案很简单：取尾巴并附加头部以获得相反的效果。

我不是haskell专家......我刚开始学习自己。我从这个有效的开始。

```
 reverse' l
  | lenL == 1 || lenL == 0 = l
  where lenL = length l
reverse' xs ++ [x] 

```

守卫检查它是长度为 1 还是 0 的列表，如果是则返回原始列表。

当列表的长度不是 0 或 1 并获得尾部的反转，附加头部时，就会发生递归情况。这种情况会一直发生，直到列表长度为 1 或 0 并且您得到答案。

然后我意识到你不需要检查单例列表，因为一个元素列表的尾部是一个空列表，我去了这个，这是 learnyouahaskell 中的答案：

```
 reverse' :: [a] -> [a]
reverse' [] = []
reverse' (x:xs) = reverse' xs ++ [x] 

```

我希望这会有所帮助。归根结底，熟能生巧，所以继续尝试递归地解决一些问题，你就会得到它。**

# haskell - Haskell 中的函子与范畴论中的函子有何关系？

> ID：14820139
> 
> 赞同：23
> 
> 时间：2013-02-11T20:20:24.483
> 
> 标签：haskell, functor, category-theory

据我了解，仿函数是两个类别之间的映射，例如从对象 in[![C](../Images/575516685849271ed249b6d1905f2920.png)](https://i.stack.imgur.com/ysDmA.png)到[![D](../Images/05e65d486efeb4e46fb6f29307950fd9.png)](https://i.stack.imgur.com/gzNCB.png)where[![C](../Images/575516685849271ed249b6d1905f2920.png)](https://i.stack.imgur.com/ysDmA.png)和[![D](../Images/05e65d486efeb4e46fb6f29307950fd9.png)](https://i.stack.imgur.com/gzNCB.png)are 类别的对象。

在 Haskell 中有**Hask**，其中对象是 Haskell 类型，而态射是 Haskell 函数。但是，`Functor`类型类有一个函数`fmap`在这些*类型*之间进行映射（因此它们是对象而不是类别本身）：

```
fmap :: (a -> b) -> f a -> f b 
```

`f a`并且`f b`都是**Hask**中的对象。这是否意味着 Haskell 中的每个实例`Functor`都是一个内函子，如果不是`Functor`真的代表一个函子？

我在这里想念什么？Haskell中的类型也是类别吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-11T20:26:03.743

的实例`Functor`指定了两件事：`F`kind的类型构造函数`* -> *`，即从 Hask 的对象到 Hask 的对象的映射，以及 type 的函数`(a -> b) -> (F a -> F b)`，即从 Hask 的箭头到与对象兼容的 Hask 的箭头的映射-映射`F`。所以，是的，所有的实例`Functor`都是内函子。在 Hackage 上有几个可用的概括，例如[Control.Categorical.Functor](http://hackage.haskell.org/packages/archive/categories/1.0.5/doc/html/Control-Categorical-Functor.html)。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-02-11T20:31:36.763

是的，所有`Functor`实例都是 Hask 上的**endofunctors——**事实上，所有 Hask 的**endofunctor**到一个适当的子类别，其对象是通过应用特定类型构造函数获得的类型。该类型构造函数是`Functor`实例关联的对象，并提供对象的映射；态射的映射是`fmap`，它（因为我们只关心笛卡尔闭范畴上的内函子）本身就是**Hask**中的一个态射族。

除了可以有实例的函子之外，考虑其他函子确实是有意义的`Functor`，例如[逆变函子](http://hackage.haskell.org/packages/archive/contravariant/0.4/doc/html/Data-Functor-Contravariant.html)（从**Hask**到其相反的类别）。[类](http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Control-Arrow.html)[中](http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Control-Arrow.html)的`arr`函数也对应一个函子，从Hask的所有**对象到其对象与****Hask**相同的类，其态射由实例关联的类型构造函数描述。[`Arrow`](http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Control-Arrow.html)****`Arrow`****

 ****进一步的概括也是可能的（正如 Daniel Wagner 所指出的），但使用起来往往变得越来越尴尬。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-13T10:45:06.473

关于这一点的重要一点是，您真正想要的是在**Hask中****丰富**的函子，而不仅仅是普通的旧函子。**Hask**是笛卡尔封闭的（[不是真的](http://blog.sigfpe.com/2009/10/what-category-do-haskell-types-and.html?showComment=1255861175804#c3365363734200015962)，但它努力成为一个封闭的），因此它本身自然丰富。

 ****现在，丰富的 endofunctor 为您提供了一种限制*语言内可实现的*方法：丰富的仿函数**Hask -> Hask**是对象（类型）级别的函数，`f a`并且对于每对对象， **Hask*****中***`a, b`的态射*f :* Hask *( a,b) ->****哈斯克****(fa,fb)*。当然，这只是******`fmap :: (a -> b) -> f a -> f b`**************

# wpf - 在 WPF PRISM 应用程序视图之间导航

> ID：14820141
> 
> 赞同：2
> 
> 时间：2013-02-11T20:20:29.873
> 
> 标签：wpf, prism

我正在开发一个具有以下结构的 WPF PRISM 应用程序（我已经简化以更好地解释而无需额外的层）。我使用 Unity 作为我的 DI/IOC

*   AppMain - 引导程序
*   Gui - 视图和视图模型
*   数据 - 使用 EF 的数据。

在 Gui 中，我的视图名称如下：

*   家
*   员工视图
*   订单查看
*   报告

我在外壳中有三个区域。MainRegion - 主要内容 TopRegion - 导航菜单 BottomRegion - 状态栏

我正在使用以下方法将视图注册到区域

```
IRegion region = _regionManger.Regions[RegionNames.MainRegion];
var mainView = _container.Resolve<Home>();
region.Add(mainView, ViewNames.HomeViewName);
region.Activate(mainView); 
```

第一个激活发生在 Top、Main 和 Bottom 的 Module Initialize 方法中。

在此之后，我在单击按钮时激活其他视图。现在只是后面的代码。示例代码在这里：

```
 IRegion region = _regionManger.Regions[RegionNames.MainRegion];
 var reportView = region.GetView(ViewNames.ReportsViewName);
 if (reportView == null)
 {
    reportView = _container.Resolve<ReportsView>();
    region.Add(reportView, ViewNames.ReportsViewName);
    region.Activate(reportView);
 }
 else
 {
        region.RequestNavigate(ViewNames.ReportsViewName);
 } 
```

**问题1**：任何关于如何做到这一点或我正在做的方式的建议都很好。顶部菜单有主页、员工、订单、报告按钮。

在主页中，我在 datagrid 中将员工最近的订单设置为只读。我想双击导航到 OrderView 并将所选订单传递给用户。**问题2**我不确定在哪里进行导航。

**问题3：**另一个问题是如果将 RegionMemberLifeTime keepAlive 设置为 false，INavigationAware 方法不会触发。如果我没有将 KeepAlive 设置为 false，则不会刷新页面，因为不会调用视图模型。

我需要在导航到页面时刷新页面并且不会过时，并且还需要在视图导航离开时向用户处理任何确认提示。

非常感激你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-05T12:31:04.467

确实为时已晚，但是……</p>

问题 1/2：在模块初始化程序中向区域添加内容是否有特殊原因？常见的方式更像是 -> 在 xaml 中：

```
<ContentControl prism:RegionManager.RegionName="MainRegion" /> 
```

并在 ModuleInit.cs -> Initialize()

```
_regionManager.RegisterViewWithRegion("MainRegion", () => _container.Resolve<MainView>()); 
```

问题 3：视图必须实现 INavigationAware、IRegionMemberLifetime 和切换区域，在 viewModel 中您执行以下操作：

```
_regionManager.RequestNavigate("RegionWhatever", new Uri("TestView", UriKind.Relative)); 
```

但要工作，您必须在 ModulInit.cs 中将其注册为具有 viewName 的对象，如下所示：

```
_container.RegisterType<Object, TestView>("TestView"); 
```

当然还有一个在 xaml 中定义的具有正确 RegionName 的 contentControl

# wpf - WPF TouchDevice 获取绝对坐标

> ID：14820143
> 
> 赞同：2
> 
> 时间：2013-02-11T20:20:34.017
> 
> 标签：wpf, multi-touch

我尝试创建一个可以通过多点触控手势移动或调整大小的窗口。我试过这样。我捕获了窗口的 TouchDown-Event 并将所有活动的 TouchDevices 保存在一个列表中，以了解哪些 TouchDevices 是活动的。我捕捉到 TouchDevices 的更新和停用事件，以了解它们何时被移动以及何时被停用。我保存了 Window 的 Left 和 Top 属性以及 TouchDevice 开始的位置，每次调用 Updated 事件时，我都会将 Window 移动到相对于 TouchDevice 的新位置的新位置。如果我移动手指，这将起作用。但是，如果我不移动手指（或只是很少移动），窗口会突然开始摇晃（移动混乱），然后很快消失到屏幕外的某个位置。

我认为这里的问题是，TouchDevice 的函数“GetTouchPoint”只给出与窗口相关的相对坐标（即使我将参数设置为 null 而不是窗口引用）。并且因为 Window 移动了 TouchDevice 的相对位置（即不移动）也发生了变化。所以我做了一个研究，但没能找到一种方法来确定触摸设备的屏幕坐标。

所以我希望任何人都可以帮助我如何获得TouchDevice的绝对坐标。或者可以帮助我找到另一种通过触摸“拖动”窗口的方法。（我尝试了 DragMove，但这仅适用于鼠标点击，而不适用于 TouchDowns）此外，我喜欢在两个触摸设备处于活动状态时调整窗口大小，因此我也需要绝对坐标，否则会发生相同的效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-25T21:15:57.083

我遇到了这个问题，因为我的任务栏位于屏幕的右边缘，有效地将最大化的窗口推到了右侧。当应用程序的窗口未最大化并浮动在屏幕上的某个位置时，也会出现此问题。

这是一个**扩展方法，它根据应用程序窗口的位置固定坐标**。

```
public static Point FixCoordinates(this Point point)
{
    var left = Application.Current.MainWindow.Left;
    var top = Application.Current.MainWindow.Top;
    return new Point(point.X + left, point.Y + top);
} 
```

您可能希望将托管您的触摸控件的窗口作为参数传递。就我而言，它是应用程序的主窗口。

此外，由于您用“多点触控”标记了问题，这里有一个平均多个触摸坐标的方法：

```
public static Point GetAverage(this IEnumerable<Point> points)
{
    var averageX = points.Average(p => p.X);
    var averageY = points.Average(p => p.Y);
    return new Point(averageX, averageY);
} 
```

我在这样的代码中使用它：

```
private void TouchAdornment_TouchDown(object sender, TouchEventArgs e)
{
    var touchPosition = (sender as UIElement).TouchesOver.Select(t => t.GetTouchPoint(null).Position).GetAverage().FixCoordinates();
} 
```

# android - 与 Android 计时器斗争

> ID：14820148
> 
> 赞同：0
> 
> 时间：2013-02-11T20:20:42.773
> 
> 标签：android, timer

嗨，我正在尝试开始制作一个 android 应用程序（初学者的东西），**我希望用户在文本框中输入的任何内容都可以转到我拥有的文本视图，我已经**通过引用所有 id 来启动我的代码并搜索了所有在互联网上，但每次我尝试它时，我都会遇到错误，有人可以帮助我使用一些可以做到这一点的简单代码。

```
public class BitActivity extends Activity {

EditText INPUT;
TextView byte1;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_bit);

    INPUT = (EditText) findViewById(R.id.input);
    byte1 = (TextView) findViewById(R.id.byte1);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:50:28.717

在你做你的 findVIewById 之后把它放在你的 onCreate 中

```
INPUT.addTextChangedListener(new TextWatcher() {
    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {
        byte1.setText(blah.getText());
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
    }

    @Override
    public void afterTextChanged(Editable s) {
    }
}); 
```

# gtk - 如何手动绘制 GtkTreeView 扩展器

> ID：14820151
> 
> 赞同：0
> 
> 时间：2013-02-11T20:20:50.487
> 
> 标签：gtk, gtktreeview

我正在使用一个`GtkTreeView`小部件，我想更改打开和关闭子行的“扩展器”图标的外观：我希望这些图标是我们都熟悉的三角形，但它们显示为盒装“ +" 和 "-" 符号代替。

起初我认为必须有一个我可以设置的样式枚举，但我找不到。然后，我想也许我可以在我的主题的 gtkrc 文件中设置一个样式属性，但我认为没有。最后，我尝试手动覆盖 draw 方法，如下所示：

```
GtkWidget *pTreeView = gtk_tree_view_new_with_model((GtkTreeModel *)pTreeModel);
(GTK_STYLE_GET_CLASS(pTreeView->style))->draw_expander = my_draw_expander_override; 
```

但`my_draw_expander_override()`永远不会被调用，扩展器仍然是盒装的“+”和“-”图标。

有谁知道如何更改`GtkTreeView`扩展器图标的外观或自己绘制它们？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:16:49.600

这里是如何覆盖draw_expander的示例代码。您肯定必须查看手册才能正确设置所有参数。

```
#include <gtk/gtk.h>
#include <cairo.h>

enum {
  COL_1,
  N_COLS
};

void draw_expander (GtkStyle        *style,
                    GdkWindow       *window,
                    GtkStateType         state_type,
                    GdkRectangle    *area,
                    GtkWidget       *widget,
                    const gchar     *detail,
                    gint         x,
                    gint         y,
                    GtkExpanderStyle     expander_style) {

  cairo_t *cr;

  cr = gdk_cairo_create (window);

  cairo_set_source_rgb(cr, 0, 0, 0);

  cairo_move_to (cr, 0, 0);
  cairo_line_to (cr, 0, 10);
  cairo_line_to (cr, 10, 5);
  cairo_close_path (cr);

  cairo_stroke  (cr);
}

GtkWidget *build_view (); /* just supply your own */

int main (int argc, char *argv[]) {
  gtk_init (&argc, &argv);

  GtkWidget *window;
  GtkWidget *view;

  window = g_object_new (GTK_TYPE_WINDOW, NULL);  
  view = build_view ();
  gtk_container_add (GTK_CONTAINER (window), view);

  GtkStyle *style = gtk_widget_get_style (view);
  GtkStyleClass *klass = GTK_STYLE_GET_CLASS (style);

  klass->draw_expander = draw_expander;

  gtk_widget_show_all (window);
  gtk_main ();

  return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T21:33:44.757

也许您应该尝试切换到以您希望它们显示的方式绘制扩展器的主题，因为我很确定如果您“强迫”他们批准三角形是一个，您的一些用户可能会觉得有点粗鲁并且唯一的方法是吸引扩展器并拒绝他们任何改变这一点的机会。

这尤其是主题的目的 - 这样每个人都可以拥有她想要的外观。

好吧，无论如何不幸的是实际上 GTK 正处于从版本 2 到版本 3 的过渡中，因此根据您使用的版本，您将不得不覆盖另一个信号。

在 GTK 3 中应该更容易一些，因为您已经在“draw”信号中获得了 cairo 上下文，但在 GTK 2 中也是可能的，在这里您必须使用“expose-event”信号。

这里作为示例，这里是如何使用 GTK 版本 2 进行操作的片段。由于我不是真正的艺术家，它可能看起来不太好，但我相信你会想出一个不错的设计。

......啊，别忘了根据它的状态改变它的绘制方式......

```
#include <gtk/gtk.h>
#include <cairo.h>

gboolean draw (GtkWidget *widget, GdkEventExpose *event, gpointer data) {

  cairo_t *cr;

  cr = gdk_cairo_create (widget->window);

  cairo_set_source_rgb(cr, 0, 0, 0);

  cairo_move_to (cr, 0, 0);
  cairo_line_to (cr, 0, 10);
  cairo_line_to (cr, 10, 5);
  cairo_close_path (cr);

  cairo_stroke  (cr);

  return TRUE;
}

int main (int argc, char *argv[]) {
  gtk_init (&argc, &argv);

  GtkWidget *window;
  GtkWidget *expander;

  window = g_object_new (GTK_TYPE_WINDOW, NULL);  
  expander = g_object_new (GTK_TYPE_EXPANDER, NULL);
  gtk_container_add (GTK_CONTAINER (window), expander);

  g_signal_connect (expander, "expose-event", draw, NULL);

  gtk_widget_show_all (window);
  gtk_main ();

  return 0;
} 
```

编辑：

正如我所看到的，您似乎不想仅更改一个实例的外观，而是更改所有扩展器的外观。为此，您必须像这样覆盖默认处理程序：

```
#include <gtk/gtk.h>
#include <cairo.h>

gboolean draw (GtkWidget *widget, GdkEventExpose *event) {

  cairo_t *cr;

  cr = gdk_cairo_create (widget->window);

  cairo_set_source_rgb(cr, 0, 0, 0);

  cairo_move_to (cr, 0, 0);
  cairo_line_to (cr, 0, 10);
  cairo_line_to (cr, 10, 5);
  cairo_close_path (cr);

  cairo_stroke  (cr);

  return TRUE;
}

int main (int argc, char *argv[]) {
  gtk_init (&argc, &argv);

  GtkWidget *window;
  GtkWidget *expander;
  GtkWidgetClass *klass;

  window = g_object_new (GTK_TYPE_WINDOW, NULL);  
  expander = g_object_new (GTK_TYPE_EXPANDER, NULL);
  gtk_container_add (GTK_CONTAINER (window), expander);

  klass = g_type_class_peek (GTK_TYPE_EXPANDER);
  klass->expose_event =  draw;

  gtk_widget_show_all (window);
  gtk_main ();

  return 0;
} 
```

# playframework - Play Framework：无法从 application.conf 读取 URL

> ID：14820158
> 
> 赞同：4
> 
> 时间：2013-02-11T20:21:06.833
> 
> 标签：playframework, playframework-2.0

我需要为我的 Play 应用程序配置一些 URL，所以我将它们添加到`application.conf`：

```
application.url="http://www.mydomain.com"
application.url.images="http://www.anotherdomain.com"
application.url.images.logo="${application.url.images}/logo.png"
... 
```

下面是我在视图中用于访问上述条目的代码：

```
@(title: String)
@import play.api.Play.current

<!DOCTYPE html>

<html>
    ...

    <img src="@{ currrent.configuration.getString("application.url.images.logo") }" />

    ...
</html> 
```

嗯......我快疯了，因为每当我运行应用程序时，我总是收到以下错误消息：

```
/home/j3d/Projects/test-app/conf/application.conf: 14-19: application.url.images.logo has type OBJECT rather than STRING 
```

任何的想法？我错过了什么吗？或者它是一个错误？

非常感谢你。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-12T08:24:34.863

[Play 中使用的Typesafe 配置](https://github.com/typesafehub/config)库中的Config表示类似 JSON 的结构。点表示法是创建嵌套对象（`{ ... }`在 JSON 中）的语法糖。例如：

```
application.url="http://example.com"
application.images.logo="http://example.com/img/1.png"
application.images.header="http://example.com/img/3.png" 
```

相当于以下 JSON：

```
{
  "application": {
    "url": "http://example.com",
    "images": {
      "logo": "http://example.com/img/1.png",
      "header": "http://example.com/img/3.png"
    }
  }
} 
```

在您的示例中，您首先将字符串分配给`application.url`，然后尝试向其添加键（键`url`in `application.url.images`），就像它是 JSON 对象，而不是字符串。在这种情况下，我不知道 Typesafe Config 的确切行为，以及为什么它在读取配置文件时不会立即引发错误。

尝试重新排列配置键的层次结构，即：

```
application.url.prefix="http://www.mydomain.com"
application.url.images.prefix="http://www.anotherdomain.com"
application.url.images.logo="${application.url.images}/logo.png" 
```

这里`application.url`将是带有键`prefix`和的对象`images`，并且`application.url.images`将是带有键`prefix`和的对象`logo`。

# matlab - 重命名 MATLAB 结构中的多个字段

> ID：14820163
> 
> 赞同：1
> 
> 时间：2013-02-11T20:21:32.513
> 
> 标签：matlab, struct, rename, field, batch-rename

我需要通过基本上更改其前缀来重命名结构中的一堆字段。

例如

```
MyStruct.your_firstfield
MyStruct.your_secondfield
MyStruct.your_thirdfield
MyStruct.your_forthfield
%etc.... 
```

到

```
MyStruct.my_firstfield
MyStruct.my_secondfield
MyStruct.my_thirdfield
MyStruct.my_forthfield
%etc... 
```

无需逐个输入...因为有很多并且可能会增长。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T20:44:01.937

您可以通过为输出结构[动态生成字段名称来做到这一点。](http://www.mathworks.com/help/matlab/matlab_prog/generate-field-names-from-variables.html)

```
% Example input
MyStruct = struct('your_firstfield', 1, 'your_secondfield', 2, 'your_thirdfield', 3 );

% Get a cell array of MyStruct's field names
fields = fieldnames(MyStruct);

% Create an empty struct
temp = struct;

% Loop through and assign each field of new struct after doing string 
% replacement. You may need more complicated (regexp) string replacement
% if field names are not simple prefixes
for ii = 1 : length(fields) 
  temp.(strrep(fields{ii}, 'your', 'my')) = MyStruct.(fields{ii}); 
end

% Replace original struct
MyStruct = temp; 
```

# c# - 使用 scintilla NET 不冻结 GUI 时在后台工作线程中停止

> ID：14820169
> 
> 赞同：0
> 
> 时间：2013-02-11T20:22:11.343
> 
> 标签：c#, multithreading, user-interface, backgroundworker, scintilla

后台工作人员在被调用以将文本附加到闪烁控件时停止，这是部分代码。添加try catch逻辑后，我仍然没有得到任何异常！

```
 private delegate void DWrite(string text);
    private void Write(string text)
    {
        try
        {
            scintilla1.AppendText(text);
        }
        catch (Exception ex) { MessageBox.Show(ex.ToString()); }

    }

    private void bw_DoWork(object sender, DoWorkEventArgs e)
    {
        BackgroundWorker worker = sender as BackgroundWorker;
        string x;
        while (true)
        {
            x = tcw.Read();
           // MessageBox.Show(x);
            Thread.Sleep(100);
            try
            {
                scintilla1.Invoke(new DWrite(Write), x);
            }
            catch (Exception ex) { MessageBox.Show(ex.ToString()); }
        //    scintilla1.Update();
        } 
```

我添加了这个逻辑：

```
 static void MyHandler(object sender, UnhandledExceptionEventArgs args)
    {
        Exception e = (Exception)args.ExceptionObject;
        MessageBox.Show("MyHandler caught : " + e.Message);
    }

    public void doworkstuff()
    {
        AppDomain currentDomain = AppDomain.CurrentDomain;
        currentDomain.UnhandledException += new UnhandledExceptionEventHandler(MyHandler);
        try
        {
            for (int i = 0; i < 5; i++)
                scintilla1.Invoke(new DWrite(Write), tcw.Read());
        }
        catch (Exception ex)
        { MessageBox.Show(ex.ToString()); }
    } 
```

问题似乎在于它自己的控制，不允许外部线程访问以避免死锁。有没有一种方法可以让我在不使用 BGWorker 的情况下获得相同的功能？tcw.read() 是一个 telnet 客户端，可以将输入流式传输到控件，我希望流式传输（即 tcw.read()）继续直到用户在表单上按下停止！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T21:42:06.597

您在 ScintillaNET 中发现了一个错误。

为了处理托管 Scintilla 包装器和本机 Scintilla 控件之间的互操作，ScintillaNET 重写了 WndProc 方法。这样一来，用于封送回 UI 线程的调用的 Windows 窗体机制似乎已被破坏。

同时，您可以使用[BackgroundWorker.ProgressChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.progresschanged.aspx)事件来精确地执行您正在尝试的定期 UI 更新类型。

确保已将 BackgroundWorker.WorkerReportsProgress 属性设置为 后`true`，修改代码以便使用[BackgroundWorker.ReportProgress](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.reportprogress.aspx)方法代替 Invoke 方法并处理 ProgressChanged 事件。

```
private void bw_DoWork(object sender, DoWorkEventArgs e)
{
    BackgroundWorker worker = sender as BackgroundWorker;
    string x;
    while (true)
    {
        x = "Your telnet data";
        Thread.Sleep(100);
        worker.ReportProgress(-1, x);
    }
}

private void bg_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    string text = e.UserState as string;
    scintilla1.AppendText(text);
} 
```

（全面披露：我是一名 ScintillaNET 开发人员）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T20:51:21.827

你应该设置一些中断条件，你的 while 循环是一个无限循环！如果您使用 BeginInvoke 而不是 Invoke，后台工作人员不会停止！

```
scintilla1.BeginInvoke(new DWrite(Write), x); 
```

# java - 如何将参数传递给 android junit 测试（参数化测试）

> ID：14820175
> 
> 赞同：8
> 
> 时间：2013-02-11T20:22:25.463
> 
> 标签：java, android, eclipse, testing, junit

我正在使用命令行或 eclipse 运行我的 android junit 测试，具体取决于我是处于开发模式还是设备测试。

Java 应用程序有一个 Main (String[] args) 方法，并且很容易将参数传递给它（在运行配置部分的参数选项卡中使用 eclipse，或通过命令行）

对于 android junit 测试它是不同的，没有 Main 方法，也没有我可以设置一些参数的地方。

我在这里读过，有一个解决方案是使用属性文件。这是唯一的方法吗？如果您有一个快速简单的示例，将不胜感激。

谢谢

```
>>> Edit <<< 
```

我正在使用 Robotium，而 junit 扩展了 ActivityInstrumentationTestCase2 请参见下面非常基本的 junit 测试：

```
import android.test.ActivityInstrumentationTestCase2;
import android.util.Log;

import com.jayway.android.robotium.solo.Solo;

public class Test_arg extends ActivityInstrumentationTestCase2 {    
    private static final String TARGET_PACKAGE_ID                = "com.myapp.test";
    private static final String LAUNCHER_ACTIVITY_FULL_CLASSNAME = "com.myapp";
    private static Class        launcherActivityClass;
    private Solo solo;

    static {
        try {
            launcherActivityClass = Class.forName(LAUNCHER_ACTIVITY_FULL_CLASSNAME);
        } catch (ClassNotFoundException e) {
            throw new RuntimeException(e);
        }
    }

    public Test_arg() throws ClassNotFoundException {
        super(TARGET_PACKAGE_ID, launcherActivityClass);

    }

    @Override
    protected void setUp() throws Exception {
        solo = new Solo(getInstrumentation(), getActivity());
    }

    @Override
    public void tearDown() throws Exception {
        try {
            solo.finishOpenedActivities();
            solo.finalize();
        } catch (Throwable e) {
            e.printStackTrace();
        }
        super.tearDown();
    }

    public void test_01() throws InterruptedException { 
        Log.i("TEST", "test");   
    }    
} 
```

和 android 清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.myapp.test"
    android:versionCode="1"
    android:versionName="1.0" >
    <uses-sdk android:minSdkVersion="5" />

    <instrumentation        
        android:name="android.test.InstrumentationTestRunner"                      
        android:targetPackage="com.slacker.radio" android:functionalTest="true"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <uses-library android:name="android.test.runner" />
    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-11T22:18:04.483

您可以扩展 InstrumentationTestRunner 并在 onCreate 中获取参数：

```
public class MyTestRunner extends InstrumentationTestRunner {

    private static final String TAG = null;
    private String mArgument;

    /* (non-Javadoc)
     * @see android.test.InstrumentationTestRunner#onCreate(android.os.Bundle)
     */
    @Override
    public void onCreate(Bundle arguments) {
        super.onCreate(arguments);

        if (arguments != null) {
            mArgument = arguments.getString("myarg");
        }
    }

    public String getArgument() {
        return mArgument;
    }

} 
```

在您的情况下，将仪器添加到`AndroidManifest.xml`：

```
<instrumentation        
        android:name="com.example.my.test.MyTestRunner"                      
        android:targetPackage="com.slacker.radio" android:functionalTest="true"/> 
```

在您的**仪器**（即`ActivityInstrumentationTestCase2`）测试中，您可以执行以下操作：

```
public void testSomething() {
    MyTestRunner myTestRunner = (MyTestRunner)getInstrumentation();
    Log.d(TAG, "argument=" + myTestRunner.getArgument());
} 
```

并获取您可以在命令行中指定的参数

```
$ adb shell am instrument -e myarg MYARG com.example.my.test/.MyTestRunner -w 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-25T14:39:14.447

在扩展ActivityInstrumentationTestCase2的类的Setup函数中，添加如下代码：

```
MyTestRunner myTestRunner = (MyTestRunner)getInstrumentation();
String argument = myTestRunner.getArgument();
solo = new Solo(myTestRunner, getActivity()); 
```

目录结构应该是：

```
src
  package.x.y.z.test
      MainTest.java
      CustomInstrumentationRunner.java 
```

然后在AndroidManifest.xml中，设置

```
<manifest package="package.x.y.z" ...

<instrumentation
        android:name="package.x.y.z.test.CustomInstrumentationRunner" 
```

使用命令行调用上述包：

```
adb shell am instrumentation -w package.x.y.z/package.x.y.z.test.CustomInstrumentationRunner 
```

# git - 为什么我在尝试将 git 与 svn 一起使用时出现此错误

> ID：14820178
> 
> 赞同：1
> 
> 时间：2013-02-11T20:22:32.183
> 
> 标签：git, git-svn

为什么我在尝试将 git 与 svn 一起使用时出现此错误。我正在执行以下步骤并遇到一些疯狂的错误。

```
git svn clone -s http://svn/java/project project
cd project
git svn show-ignore > .gitignore
git checkout -b dev 
```

我得到以下输出

```
M   src/main/java/app.properties
M   src/main/java/messages.properties
M   src/main/java/org/xxxxx/enrollment/dao/projectDao.java
M   src/main/resources/app.properties
M   src/main/webapp/WEB-INF/flows/start/footer.jsp
M   src/main/webapp/WEB-INF/flows/start/header_edit.jsp
M   src/main/webapp/WEB-INF/flows/start/tobe.jsp
M   src/main/webapp/WEB-INF/spring/mvc.xml
M   src/main/webapp/index.jsp
M   src/test/resources/app.properties
M   src/test/resources/messages.properties
M   src/test/resources/mvc.xml
Switched to a new branch 'dev 
```

'

```
git svn rebase 
```

我得到这个输出

```
src/main/java/app.properties: needs update
src/main/java/messages.properties: needs update
src/main/java/org/xxxx/enrollment/dao/projectDao.java: needs update
src/main/resources/app.properties: needs update
src/main/webapp/WEB-INF/flows/start/footer.jsp: needs update
src/main/webapp/WEB-INF/flows/start/header_edit.jsp: needs update
src/main/webapp/WEB-INF/flows/start/tobe.jsp: needs update
src/main/webapp/WEB-INF/spring/mvc.xml: needs update
src/main/webapp/index.jsp: needs update
src/test/resources/app.properties: needs update
src/test/resources/messages.properties: needs update
src/test/resources/mvc.xml: needs update
update-index --refresh: command returned error: 1 
```

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T06:55:16.883

如[twalberg](https://stackoverflow.com/questions/14820178/why-am-i-getting-this-error-trying-to-use-git-with-svn#comment20764483_14820178)[所述](https://stackoverflow.com/users/1253222/twalberg)，并在[issue 103](http://code.google.com/p/msysgit/issues/detail?id=103)中说明，请确保在克隆和变基*之前键入：*

```
git config --global core.autocrlf false 
```

您不希望 git 自动更改任何内容（如“[错误变基/更新`git-svn`存储库](https://stackoverflow.com/a/7090618/6309)”）。

# ios - ios 6.0 仅针对 UINavigationController 中的某些视图控制器进行旋转？

> ID：14820180
> 
> 赞同：0
> 
> 时间：2013-02-11T20:22:35.333
> 
> 标签：ios, ios6, autorotate

我有一个 UINavigationController，它的第一个 ViewController 是一个 UITabBarController，它不应该旋转......然后推 UIViewController 应该旋转......

到目前为止，我已经将 UINavigationController 子类化并实现了这些方法：

```
- (BOOL) shouldAutorotate {
    return [self.visibleViewController shouldAutorotate];
}

- (NSUInteger)supportedInterfaceOrientations {
    return [self.visibleViewController supportedInterfaceOrientations];
} 
```

所以它是子控制器选择它是否应该自动旋转......到目前为止，我已经设法阻止 UITabBarController 的旋转并允许推送的 UIViewController 旋转。

唯一的问题是，如果 UIViewController 处于横向模式，当我弹出它时，UITabBarController 也将处于横向模式，直到手机进入纵向模式，它会恢复正常并且不再旋转.. .

我希望当我弹出 Landscape UIViewController 时，UITabBarController 已经处于纵向模式。

这个新的 iOS 6.0 UI 旋转管理似乎很痛苦！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:47:04.943

正如您所说的那样，设备尚未旋转，因此在弹出旧视图控制器时，显示的视图控制器不会坚持旋转方向。如果这是您想要的行为，请改用呈现的视图控制器。

您可以通过旋转状态栏来强制界面旋转，但前提是`supportedInterfaceOrientations`返回 0。

# python - django orm：检索对象并检查它是否在一个查询中具有关系

> ID：14820184
> 
> 赞同：2
> 
> 时间：2013-02-11T20:22:46.353
> 
> 标签：python, sql, django, orm

我有一个应用程序，用户可以在其中将帖子设置为他们的最爱。模型定义如下：

```
class UserProfile(models.Model):  
    user = models.OneToOneField(User)
    favorites = models.ManyToManyField('Post', through='Favorite', related_name='favorited_by')

class Post(models.Model):
    created_by = models.ForeignKey(UserProfile)
    body = models.TextField()

class Favorite(models.Model):
    created_by = models.ForeignKey(UserProfile)
    post = models.ForeignKey(Post) 
```

现在我正在寻找一种简单的方法来查询帖子，同时检查帖子是否被当前用户收藏。目前我正在使用以下，远非优雅的解决方案：

```
query = """
    SELECT p.id, p.body, p.created_by_id, f.created_by_id AS favorited 
        FROM main_post p LEFT OUTER JOIN main_favorite f
        ON 
            p.id = f.post_id AND     
            f.created_by_id = %s
    """;

posts = Post.objects.raw(query, [request.user.userprofile.id]) 
```

如果帖子未被当前用户收藏，则这将产生一个名为“favorited”的列，如果该帖子未被收藏，则该列具有空值；如果该帖子被收藏，则该列具有当前用户的 id。

无论如何，这可以使用 django 的 ORM 更简单、更优雅地完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:43:24.930

Django 提供了可能对您有用的[内容类型框架。](https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/)它还使用通用外键以更优雅的方式完成相同的工作。

**检查[https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/](https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/)上的示例，它们与您要实现的目标非常相似

# ios - 在 iOS 上使用 resizableImages 时避免混合图层

> ID：14820185
> 
> 赞同：6
> 
> 时间：2013-02-11T20:22:47.590
> 
> 标签：ios, uitableview, uiimage, core-animation, instruments

我试图避免在 iOS 上混合图层以提高性能。但是，我注意到我用于我的可调整大小的图像`backgroundView`被`UITableViewCell`标记为混合图层：

![UITableViewCell 被视为混合层](../Images/45d20117cbe592f5272fe04e4cf38c5c.png)

事实上，使用任何可调整大小的图像——即使是没有透明度的 JPEG——都会导致图层混合，如此屏幕截图所示，其中首先使用 PNG，然后使用 JPEG 作为`UIImageView`. 唯一不需要混合图层的可调整大小的图像是 1x1 像素图像，见底部：

![第一张图片是 PNG，第二张是 JPEG，第三张是 1x1 像素 PNG](../Images/7128292220f2eb6919aacea53a2d377e.png)

有没有办法避免这种情况？核心动画分析是不精确的艺术（至少对我来说），但我认为它是滚动我的表格视图时下降到大约 25 FPS 的主要贡献者。

Edit2：经过更多实验，我发现如果我只垂直或水平拉伸图像（PNG 或 JPG），它们不会被标记为混合图层。然而，在更多的实验中，我认为这可能是因为仅在一维上拉伸的图像更小。我的图像没有被视为 100x100 的混合，但它是 150x100。

![在此处输入图像描述](../Images/1de38fd55f7fa66dfaffa7c2a9e87b4f.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T05:32:15.977

我创建了一个非常宽的图像，并且只垂直拉伸它。这不需要混合图层，并为我的表格视图单元格实现了正确的效果。这并不理想，但由于高度较小，视网膜图像仍然只有 236 字节。

![不被视为混合图层的非常宽的可拉伸图像](../Images/ae109f8985605faee2dcdb3963082887.png)

# c - 在c中为趋势线分配权重

> ID：14820192
> 
> 赞同：0
> 
> 时间：2013-02-11T20:23:17.673
> 
> 标签：c, arrays, permutation

我正在尝试为一组趋势线分配一组权重。权重在数组中，趋势线在数组中。我想以所有排列结束：即，数组中的每个趋势线都被分配了每个权重。在我的代码中，我目前得到这个输出：

```
output: 1 combination per line:
1.00, 1.00, 1.00, 1.00 
1.50, 1.50, 1.50, 1.50 
2.00, 2.00, 2.00, 2.00, 
```

但我想要得到的是所有排列，不包括重复项。那就是我想获得权重/趋势线的所有不同可能组合：

```
output: 1 combination per line:
1.00, 1.00, 1.00, 1.00
1.50, 1.00, 1.00, 1.00, 
2.50, 1.00, 1.00, 1.00, 
1.00, 1.50, 1.00, 1.00, 
1.50, 1.50, 1.00, 1.00, 
2.50, 1.50, 1.00, 1.00, 
....etc 
```

编辑：
所以我的问题是：如何更改下面的代码，以便生成趋势线和权重的所有不同组合。例如，如果我有 2 个趋势线和 3 个权重 (1,2,3)，则所有组合将是：

```
1,1
1,2
1,3
2,1
2,2
2,3
3,1
3,2
3,3 
```

这是代码：

```
#define TRENDLINE_COUNT 4
#define WEIGHT_COUNT 3
void hhour(void)
{   
    int trendLine[TRENDLINE_COUNT];
    double weight[] = { 1, 1.5, 2 };
    FILE *myFile = fopen("s:\\data\\testdump\\ww.txt", WRITE);

    fprintf(myFile, "output: 1 combination per line :\n"    );
    for (int weightIndex = 0; wei`enter code here`ghtIndex < WEIGHT_COUNT; weightIndex++)
    {
        double currentWeight = weight[weightIndex];
        double cumulativeTrendValue = 0;

        for (int trendLineIndex = 0; trendLineIndex < TRENDLINE_COUNT; trendLineIndex++)
        {
            cumulativeTrendValue += trendLine[trendLineIndex] * currentWeight;

            fprintf(myFile, "%.02lf, ", currentWeight);
        }
        fprintf(myFile, "\n");

        // do something with cumulativeTrendValue
    }

    fclose(myFile);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:00:55.443

我想这就是你想要的。那里可能有更清洁的解决方案，但如果可能的话，我非常喜欢暴力破解解决方案。如果你想改变趋势线......呃，也许是具有递归可变参数函数的东西......但我在面对那种疯狂程度时开始收费。

```
#include <stdio.h>
#include <string.h>

#define TRENDLINE_COUNT 4
#define WEIGHT_COUNT 3

double weight[] = { 1, 1.5, 2 };

int addOne(int counter[TRENDLINE_COUNT])
{
  int i=0;
  while(1)
  {
    if(counter[i]+1 >= WEIGHT_COUNT)
    {
      if( i+1 >= TRENDLINE_COUNT)
      {  return 1;}
      else
      { 
        counter[i]=0;
        i++;
      }
    }
    else
    {
      counter[i]++;
      return 0;
    }
  }
  return 0;
}

void hhr()
{
  int i;
  int counter[TRENDLINE_COUNT];  

  memset(counter, 0, sizeof(int)*TRENDLINE_COUNT);
  do 
  {
    for(i=0; i<TRENDLINE_COUNT; i++)
    { 
      //printf("%d ", counter[i]);
      printf("%f ", weight[counter[i]]);
    }
    printf("\n");
  }while(!addOne(counter));
}

int main(int argc, char **argv)
{
  hhr();
} 
```

# lamp - 在不同目录中删除大量具有相同文件名的文件 - cpanel/LAMP

> ID：14820195
> 
> 赞同：1
> 
> 时间：2013-02-11T20:23:27.360
> 
> 标签：lamp, cpanel, putty

我正在工作的网站上有一堆旧的已弃用页面。

假设该站点有不同的产品页面：site.com/product1 site.com/product2 site.com/product3 ...... site.com/product450

在每个目录中都有一个名为 productreveiw.php 的页面

由于初始设计不佳，此页面存在于每个目录中。很久以前，这指向一个单一的产品评论页面 (site.com/productreview.php)。

一切都很好，但是有 450 个这些旧文件，每个目录中都有一个。

我想删除它们而不进入 ftp 中的每个目录并手动删除它们。

有没有办法在 cpanel-> 文件管理器中做到这一点？我能够搜索并找到它们，但在那之后我无法采取任何行动，除了打开它们所在的目录。我希望能够全选并一口气删除它们。

我确信有一种方法可以在 SSH 中执行此操作，但我在其中不太舒服，并希望通过 cpanel 或 ftp 获得更用户友好的路由。

一如既往地提前感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:17:51.570

这个问题没有人接受。

我最终通过 SSH 删除了所有内容，这在我习惯之后并不难。

我搜索了这样的文件：

> 寻找 。-名称“index1.php”-删除

# javascript - 使用 jQuery 一键单击多个可编辑字段

> ID：14820197
> 
> 赞同：0
> 
> 时间：2013-02-11T20:23:30.723
> 
> 标签：javascript, jquery, forms, onclick

我正在尝试创建一个允许用户编辑它的表单，类似于旧式的 Facebook 个人资料编辑。我不知道如何同时更改一个部分中的所有元素。我可以一次编辑一个，但不是全部。

**HTML：**

```
<div id="wrapper">
    <section id="core">
        <div class="profileinfo">

            <div class="gear">
                <label>Primary E-Mail:</label><br />
                <span id="pemail" class="datainfo">myaddress@googlemail.com</span>
                <a href="#" class="editlink">Edit Info</a>
                <a class="savebtn">Save</a>
            </div>

            <div class="gear">
                <label>Full Name:</label><br />
                <span id="first" class="datainfo">Johnny</span>
                <span id="middle" class="datainfo">James</span>
                <span id="last" class="datainfo">Appleseed</span>
                <a href="#" class="editlink">Edit Info</a>
                <a class="savebtn">Save</a>
            </div>

            <div class="gear">
                <label>Birthday:</label><br />
                <span id="birthday" class="datainfo">August 21, 1989</span>
                <a href="#" class="editlink">Edit Info</a>
                <a class="savebtn">Save</a>
            </div>

            <div class="gear">
                <label>Address:</label><br />
                <span id="address1" class="datainfo">123 Test Lane</span><br />
                <span id="address2" class="datainfo">APT 104</span><br />
                <span id="city" class="datainfo">Anywhere</span>
                <span id="state" class="datainfo">FL</span>
                <span id="zip" class="datainfo">55555</span>
                <a href="#" class="editlink">Edit Info</a>
                <a class="savebtn">Save</a>
            </div>

            <div class="gear">
                <label>Occupation:</label><br />
                <span id="occupation" class="datainfo">Freelance Web Developer</span>
                <a href="#" class="editlink">Edit Info</a>
                <a class="savebtn">Save</a>
            </div>
        </div>
    </section>
</div> 
```

**Javascript：**

```
$(document).ready(function(){
$(".editlink").on("click", function(e){
  e.preventDefault();
    var dataset = $(this).prev(".datainfo");
    var savebtn = $(this).next(".savebtn");
    var theid   = dataset.attr("id");
    var newid   = theid+"-form";
    var currval = dataset.text();

    dataset.empty();

    $('<input type="text" name="'+newid+'" id="'+newid+'" value="'+currval+'" class="hlite">').appendTo(dataset);

    $(this).css("display", "none");
    savebtn.css("display", "block");
});
$(".savebtn").on("click", function(e){
    e.preventDefault();
    var elink   = $(this).prev(".editlink");
    var dataset = elink.prev(".datainfo");
    var newid   = dataset.attr("id");

    var cinput  = "#"+newid+"-form";
    var einput  = $(cinput);
    var newval  = einput.attr("value");

    $(this).css("display", "none");
    einput.remove();
    dataset.html(newval);

    elink.css("display", "block");
});
}); 
```

**编辑**

这是一个类似于我希望它看起来像的图像：

![老脸书风格](../Images/3253fb6b4fe22f4788099339bce899e9.png)

如何建立编辑每个部分的能力？这是一个[JSFiddle](http://jsfiddle.net/hhKZU/1/)供您查看。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:39:54.927

这可能不是最好的方法，但这会做你想要的。

```
$(document).ready(function(){
  $(".editlink").on("click", function(e){
    e.preventDefault();
    var datasets = $(this).prevAll(".datainfo");
    var savebtn = $(this).next(".savebtn");
    datasets.each(function(){
      var theid   = $(this).attr("id");
      var newid   = theid+"-form";
      var currval = $(this).text();
      $(this).html('<input type="text" name="'+newid+'" id="'+newid+'" value="'+currval+'" class="hlite">');
    });

    $(this).css("display", "none");
    savebtn.css("display", "block");
  });

  $(".savebtn").on("click", function(e){
    e.preventDefault();
    var elink   = $(this).prev(".editlink");
    var datasets = $(this).prevAll(".datainfo");
    datasets.each(function(){
      var newid   = $(this).attr("id");
      var einput  = $("#"+newid+"-form");
      var newval  = einput.val();
      einput.remove();
      $(this).html(newval);
    });

    $(this).css("display", "none");
    elink.css("display", "block");
  });
}); 
```

# jdbc - 扩展 WSO2 Identity Server JDBCUserStoreManager 以适应外部用户数据库

> ID：14820198
> 
> 赞同：0
> 
> 时间：2013-02-11T20:23:47.940
> 
> 标签：jdbc, wso2, identity, user-management

我们需要针对现有的外部数据库对部署在 WSO2 应用程序服务器中的 Web 应用程序的用户进行身份验证。我们正在尝试为此使用 WSO2 身份服务器。

我们包含用户的数据库表有两列使用户名唯一，clientid 和 usercode。即 usercode 本身不是唯一的，但 clientid+usercode 是唯一的。我们的密码也用 PBKDF2 加盐。因此，我扩展了 JDBCUserStoreManager 以与我们的数据库通信，并且能够在 PBKDF2 中存储和检索密码。

但我不知道如何从登录页面获取客户端 ID 到我们扩展的 JDBCUserStoreManager。即如何从我们的自定义 JDBCUserStoreManager 内部访问存储在用户会话中的 clientid？如果我可以从那里的会话中获取 clientid，我可以在 sql 查询中使用它来做必要的事情。

任何帮助解决这个问题都非常感谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T03:33:00.063

您可以在登录页面输入“clientid+usercode”组合作为用户名。然后身份验证器将该组合作为用户名传递给自定义用户存储管理器的 doAuthenticate() 方法。在那里，您可以从用户名中拆分客户端 ID 和用户代码。

# wpf - 在多个 View 之间共享一个 ViewModel 实例有什么好处吗？

> ID：14820200
> 
> 赞同：2
> 
> 时间：2013-02-11T20:23:50.770
> 
> 标签：wpf, mvvm

我的一位同事提供了一种非常奇怪的方法，其中 VM 像单例一样使用，并且每个都同时附加到多个视图。
除了一种数据共享而不是在数据访问层缓存之外，我认为这种怪异没有任何优点。
我在实践中从未见过这种情况，但我不想仅仅因为这个而拒绝这些想法。

PS 我说的是共享一个实例，而不是对一个 VM 应用不同的视图。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T20:38:16.163

我想如果要使视图保持同步并使其看起来相同，这种方法可能会很有用。否则，我同意这是令人困惑的。

我唯一一次看到现实世界中使用的单例视图模型是当您有一个也是单实例的视图时，这意味着在任何给定时间只允许打开视图的一个副本。在这种情况下，有一个性能优势，因为每次重新打开视图时都不必重新创建视图模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T22:29:57.013

我不确定我是否一定会称它为“单例”视图模型，但在某些情况下，我喜欢在多个视图控件之间共享视图模型实例。例如，这在主/细节场景中非常有用，您对细节所做的更改可能会改变主零件的视觉外观。例如，列表/树视图旁边有一个编辑面板，显示所选项目的详细信息。当然，您可以通过在两个 VM 之间传递消息来做这种事情，但这*似乎*更有可能添加额外的代码而不是 VM 重用。

我不建议使用完全单例 VM 的地方是，如果您需要某种主/细节场景，其中细节编辑是模态的，例如在您打开以进行更改的对话框中。在那里，您将希望将编辑封装在一个单独的实例中，以使取消支持更容易。应用程序全局（例如静态）单例实现只会让这种事情变得更加混乱。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T21:10:29.613

理论上，每个视图都必须有一个视图模型，但我认为在某些情况下，将相同的视图模型用于不同的视图可能很有用。例如，假设您在不同应用程序的位置显示用户，并且您希望当用户名称在应用程序的位置更改时，以及在显示用户的所有其他位置，用户名称也发生更改。对于这个通知问题，最好只有一个视图模型，然后使用该`INotifyPropertyChanged`接口通知所有视图。我认为这是您的同事可能想要的，但也不好过度使用它，因为会增加应用程序的复杂性，和/或可能带来一些意想不到的行为。

# web-services - Microsoft 同步框架身份验证

> ID：14820201
> 
> 赞同：0
> 
> 时间：2013-02-11T20:23:52.630
> 
> 标签：web-services, authentication, asp-classic, synchronization

我对 Web 应用程序和 ASP 非常陌生。

最近，我一直在尝试使用 Microsoft Sync Toolkit 通过 OData Web 服务同步数据库。

这里明显的问题是：一旦服务设置并发布——因此它对任何知道 URL 的人开放——如何防止未经授权的用户访问该服务。

请注意：表单身份验证的基本身份验证 - 就我所知的少量 Web 开发知识而言 - 似乎不适合此任务，因为它不是客户端试图访问的网页 - 页面可以显示/或重定向登录请求 - 这是我们在此处访问的服务。

为了使事情变得更加困难，对于客户端同步，我使用了仅接受服务 URL 的 3rd 方库/同步提供程序。所以，没有办法（我认为）我可以尝试将登录凭据合并到请求标头等中。

我认为最好的选择是将登录凭据嵌入到 URL 中，并将其用于 3rd 方库。

有人可以指导我如何在服务器上设置这样的东西吗？我希望在服务器端代码的某个地方有一个地方，我可以检查凭据并根据它继续或中止（返回 401）服务请求。

我找不到将此类代码挂接到同步服务的任何地方。尽管 MSDN 中有人建议处理 _OnBeginSyncRequest 事件，但无法从该方法中访问 web-request 标头。

是否有一个可以从任何地方访问的全局对象，我可以从中访问请求标头？有人可以帮忙吗？

最后，我更喜欢普通的用户/密码字符串对。它不一定（或宁可不）与 Windows 或目录帐户有任何关系。我希望在我的代码中简单地检查纯字符串，例如 if(userStr == "Authenticated user" && passwordStr == "Correct Password")。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T23:05:49.787

如果您使用的是 SOAP Web 服务，您可以使用 WS-Security usernametoken 将您的用户名和密码添加到请求标头中，否则您可以将用户名和密码作为参数添加到您的 Web 服务中，然后简单地在服务器端进行验证。IE

代替

```
bool SyncData(datatable) 
```

它成为了

```
bool SyncData(datatable, username, password) 
```

对于 Web 服务的注意事项，您将在每次调用时进行身份验证，如果您想在每个会话中进行身份验证，您需要先使用用户名密码登录，然后检索令牌，而不是在每次后续调用您的服务时使用令牌。

您还可以使用 SSL 来保护通道，因此用户名和密码不会以纯文本形式传输。

# r - 模拟掷两个骰子

> ID：14820203
> 
> 赞同：9
> 
> 时间：2013-02-11T20:23:57.473
> 
> 标签：r

我正在尝试模拟滚动两个骰子。我用了：

```
d2 <- sample(1:6, 10^6, replace = T) + sample(1:6, 10^6, replace = T) 
```

并得到预期的结果。我也试过

```
s2d <- c()
for (i in 1:6) { 
  for (j in 1:6){ 
    s2d <- c(s2d, (i+j)) 
  } 
}
d2 <- sample(s2d, 10^6, replace=T) 
```

这也有效，但这些感觉有点“蛮力”。有没有更简单、更优雅的方法呢？

更一般地说，是否有一个函数需要 2 个（或更多）独立事件并对它们进行操作（加法、乘法）？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-11T20:28:20.603

如果您的问题是您无法掷出任意数量的骰子，例如：

```
rowSums(replicate(2, sample(6, 10^6, replace=T))) 
```

会更灵活。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T20:31:18.593

我同意大卫的观点，你的第一个选择似乎没有什么特别的问题。如果你真的只是在两个骰子的总和之后，另一种方法可能是这样：

```
sample(2:12,size = 100,replace = TRUE, prob = table(outer(1:6,1:6,"+")) / 36) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-11T21:21:33.437

TeachingDemos 包中有一个`dice`模拟掷骰子的函数（甚至还有一个选项来绘制结果，但 1000 次掷骰不会产生有意义的绘图）。这可能看起来不那么蛮力，但在内部它与已经发布的内容相似。您可以使用 apply 或相关函数对返回的列进行求和等操作。

# java - 如何获取与原始类型对应的引用类型？

> ID：14820205
> 
> 赞同：0
> 
> 时间：2013-02-11T20:24:00.533
> 
> 标签：java

我想要一个将类映射到类的函数，例如 int.class -> Integer。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T20:26:52.153

这在原版 JDK 中没有专门提供，但如果您不想自己编写，[Guava](http://guava-libraries.googlecode.com)提供[`Primitives.wrap(Class)`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/primitives/Primitives.html#wrap%28java.lang.Class%29)了采用原始类型并返回相应的包装器类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T20:25:22.297

对于整数：

```
int.class or the equivalent: Integer.TYPE; 
```

其他原始类型相同

```
double.class or Double.TYPE
float.class or Float.TYPE
char.class or Character.TYPE
long.class or Long.TYPE
boolean.class Boolean.TYPE 
```

按如下方式使用它：

```
Class intClass = int.class; 
```

这是一个代表原始类型 int 的类。

有了这些信息，您只需编写自己的映射器：（您不想为 8 行代码包含外部库）

```
public Class getClassForPrimitiveType(Class clazz) {
  if (clazz == int.class) return Integer.class;
  if (clazz == float.class) return Float.class;
  // TODO other primitives
} 
```

# eclipse - NoClassDefFoundError: StoppedByUserException 与 Eclipse 和 Quick JUnit

> ID：14820206
> 
> 赞同：1
> 
> 时间：2013-02-11T20:24:03.173
> 
> 标签：eclipse, maven, junit, quick-junit

当我尝试使用`Ctrl`+运行 JUnit 测试时，带有 Quick JUnit 插件的 Eclipse 给了我以下错误`0`：

```
java.lang.NoClassDefFoundError: org/junit/runner/notification/StoppedByUserException
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.createTest(JUnit4TestLoader.java:48)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.loadTests(JUnit4TestLoader.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:452)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: java.lang.ClassNotFoundException: org.junit.runner.notification.StoppedByUserException
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 6 more 
```

JUnit 位于`pom.xml`：

```
<dependencies>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.9</version>
        <scope>test</scope>
    </dependency>
    ...
</dependencies> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:24:03.173

安装 m2e - Maven Integration for Eclipse 插件（在之前的 Eclipse 升级期间消失）修复了该错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T11:21:26.093

我通过安装 Ive DE 解决了。问题基本上是没有解决依赖关系。在运行 Junit 之前我没有注意到，因为该项目已经用较旧的 Eclipse 编译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-03T19:02:37.517

我发现这可能是由于使用 eclipse luna 打开了 eclipse mars 工作区。我这样做了，直到我记得我已经更新了 eclipse 但没有更新到 eclipse 的链接时才让它工作。使用 eclipse mars 打开所有单元测试再次工作。

# php - 如何将html的输入类型文本的值获取到php并打印？

> ID：14820208
> 
> 赞同：3
> 
> 时间：2013-02-11T20:24:04.707
> 
> 标签：php, html

我被困在一个地方，我无法将 html 的输入类型的值获取到 php。我正在使用 Aptana 开发一个网站。

我在stackoverflow中也没有找到任何有效的答案。

我只是在浏览器中查看 HTML 文件，有问题吗？

我的代码如下：

FirstWebPage.html

```
<!DOCTYPE html>
<html>
<body bgcolor="#ffffff">
<h1 style="font-size:44pt" align="center">myPersonals.com</h1>

<h2 align="center">Welcome to your personal data center </h2>
<form action="welcome.php" method="get">
<div align="center">
<h3>Login</h3>
<input style="height:20px; width:200px; font-size:14pt" type="text" name="email" placeholder="Email" style="#b8b9c8">
<br>
<br>
<input style="height:20px; width:200px; font-size:14pt" type="text" name="password" placeholder="Password">
<br>
<br>
<select name="sex" style="height:30px; width:200px; font-size:14pt">
<option value="m">Male</option>
<option value="f">Female</option>
</select>
<br>
<br>
<input style="height:30px; width:200px; font-size:14pt" type="submit" value="Submit">
<br>
</div>
</form>
<a href="bigDB.jpg">
<img src="smallDB.jpg">'
</a>
</body>
</html> 
```

这是我的welcome.php

```
 <html>
 <body>
 Welcome php Surendra Reddy your email id is <?php echo $_GET['email']; ?><br>
 and you are password is <?php echo $_GET['password']; ?><br>
 and your gender id <?php echo $_GET["sex"]; ?>
</body>
</html> 
```

但它没有打印值。

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-02-11T20:31:42.980

/// 如果你使用 post 而不是 get

我使用 post 和 get 方法尝试了您的代码并且运行良好，您需要尝试 xampp 中的代码或其他与 aptana 不同的代码，该代码有效，可能与 aptana 服务器配置有关

# python - 图像处理 - MATLAB 或 OpenCV 与 Python，哪个更快？

> ID：14820210
> 
> 赞同：2
> 
> 时间：2013-02-11T20:24:05.883
> 
> 标签：python, image, matlab, opencv

我在 MATLAB 中有这个图像处理项目，可能有几千行代码。它广泛使用图像处理工具箱。我需要将此代码移植到 C 或 C++ 以提高速度。该代码已在 MATLAB 中进行了分析。计划是使用 OpenCV 和其他一些 C/C++ 库。但是，我对 C 或 C++ 不是很精通。

我的问题是，如果我在 python 中编写代码而不是使用 OpenCV 库，我能提高速度吗？如果是，多少钱？

此外，在谈论图像处理计算时，这三种方法如何比较速度：

1.  按原样使用 OpenCV 库
2.  将 OpenCV 与 Python 绑定一起使用
3.  使用 MATLAB

谢谢。

# json - 使用带有冒号的 GSON 创建 JSON 作为字段名称的一部分

> ID：14820212
> 
> 赞同：2
> 
> 时间：2013-02-11T20:24:11.170
> 
> 标签：json, gson

我创建了一组需要转换为 json 的类 (pojos)。因为我有 json 字段名称遵循某种格式的约束，所以我选择 gson 作为我的选择库，因为它允许对字段名称进行注释。

所以，我有 json 字段名称，如`asset_type`,`preview_image_thumbnail`等。除此之外，任何元数据字段都必须具有格式 , `metadata:<metadata-field-name>`。

所以，这归结为 my`metadata:tags`和`metadata:site`annotations 不会被 gson 转换，因为它们不是有效的 json 字段名称，至少根据 gson。

一切都很好，除了那些该死的元数据字段名称。我的目标是获得如下输出：

```
{
  "name": "Test Remote Asset",
  "description": "test-remote-asset",
  "asset_type": "remote_asset",
  "duration": 172360,
  "stream_urls": {
    "flash": "http://www.test-site.com/videos/a-video.flv",
    "iphone": "http://www.test-site.com/videos/a-video.3gp",
    "ipad": "http://www.test-site.com/videos/a-video.3gp",
    "source_file": "http://www.test-site.com/videos/a-video.mp4"
  },
  "metadata:tags": "tag1,tag2,tag3",
  "metadata:site": "test-site"
} 
```

这是我尝试将我的类转换为 json 时遇到的异常：

```
java.lang.IllegalArgumentException: metadata:tags is not a valid JSON field name. 
```

这是我要转换的课程：

```
public class RemoteAsset {

/** The video's name **/
private String name;

/** The video's description **/
private String description;

/** The video asset type **/
@SerializedName("asset_type")
private String assetType;

/** The video's duration, in milliseconds **/
private long duration;

/** The video's thumbnail preview URL **/
@SerializedName("preview_image_url")
private String previewImageUrl;

/** The video's OpenCms Structure ID **/
@SerializedName("external_id")
private String externalId;

/** The video's various streaming URLs **/
@SerializedName("stream_urls")
private StreamUrls streamUrls;

/** The video's tags, coma-separated **/
@SerializedName("metadata:tags")
private String metadataTags;

/** The video's host site **/
@SerializedName("metadata:site")
private String metadataSite;

public String getMetadataTags() {
    return metadataTags;
}

public void setMetadataTags(String metadata_tags) {
    this.metadataTags = metadata_tags;
}

public String getMetadataSite() {
    return metadataSite;
}

public void setMetadataSite(String metadata_site) {
    this.metadataSite = metadata_site;
}

public RemoteAsset() {

    this.streamUrls = null;
    this.assetType = null;
    this.previewImageUrl = "";
    this.metadataSite = "";
    this.metadataTags = "";
    this.externalId = "";
    this.description = "";
    this.duration = 0L;
    this.name = "";
}

public String getName() {
    return this.name;
}

public void setName(String name) {
    this.name = name;
}

public String getDescription() {
    return this.description;
}

public void setDescription(String description) {
    this.description = description;
}

public String getAssetType() {
    return this.assetType;
}

public void setAssetType(ASSET_TYPE asset_type) {
    this.assetType = asset_type.getTypeName();
}

public long getDuration() {
    return this.duration;
}

public void setDuration(long duration) {
    this.duration = duration;
}

public String getPreviewImageUrl() {
    return this.previewImageUrl;
}

public void setPreviewImageUrl(String preview_image_url) {
    this.previewImageUrl = preview_image_url;
}

public String getExternalId() {
    return this.externalId;
}

public void setExternalId(String external_id) {
    this.externalId = external_id;
}

public StreamUrls getStreamUrls() {
    return this.streamUrls;
}

public void setStreamUrls(StreamUrls stream_urls) {
    this.streamUrls = stream_urls;
}

@Override
public String toString() {
    StringBuilder builder = new StringBuilder();
    builder.append("RemoteAsset [name=").append(this.name)
            .append(", description=").append(this.description)
            .append(", assetType=").append(this.assetType)
            .append(", duration=").append(this.duration)
            .append(", previewImageUrl=").append(this.previewImageUrl)
            .append(", externalId=").append(this.externalId)
            .append(", streamUrls=").append(this.streamUrls).append("]");
    return builder.toString();
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:34:02.243

问题是这些不能直接映射到 Java 变量，因为变量名中不能有冒号。您需要使用 Gson`@SerializedName`注释。以下至少在 Gson 版本 2.2.2 中有效：

```
public static void main( String[] args ) 
{
    String json = "{\"some:field\":\"foo\"}";
    Gson gson = new Gson();

    MyClass mc = gson.fromJson(json, MyClass.class);

    json = gson.toJson(mc);
    System.out.println(json);
}

class MyClass
{
    // String some:field;  <- You can do that!
     @SerializedName("some:field")
     String someField;
} 
```

输出：

> {“一些：字段”：“foo”}

# java - 如何指示 Windows 报告我的 java 应用程序的名称而不是 java.exe

> ID：14820217
> 
> 赞同：4
> 
> 时间：2013-02-11T20:24:31.487
> 
> 标签：java, windows, security, firewall

防火墙问题：
当我在 windows 中运行 jar 或类时，windows 将其报告为 java.exe。如何指示 Windows 使用 jar 或类的名称来报告它。

例如。java -jar myapp.jar

防火墙将其视为 java.exe。问题是我不能让任何罐子通过防火墙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T21:07:09.993

您可以将 Java 应用程序包装在其自己的可执行文件中。

有许多工具可以为您生成这个可执行文件。我最喜欢的是[exe4j](http://www.ej-technologies.com/products/exe4j/overview.html)。其他问题列在有关为 Java 程序创建可执行文件的许多其他 stackoverflow 问题中，[例如这个](https://stackoverflow.com/questions/147181/how-can-i-convert-my-java-program-to-an-exe-file)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T21:35:49.293

您必须有一个正确命名的启动程序 EXE 来运行您的代码。如果配置正确，Launch4j 可以做到这一点，但在启动时需要额外的临时文件步骤。

# javascript - 如何仅在客户端使用 JSON

> ID：14820220
> 
> 赞同：1
> 
> 时间：2013-02-11T20:24:36.453
> 
> 标签：javascript, jquery, json

我创建了一个对象..如果我做得对，请告诉我：

```
{"images": {

    image1 : {
        "small_image" : "images/1.png",
        "large_image" : "images/big/1.png"
    },

    image2 : {
        "small_image" : "images/2.png",
        "large_image" : "images/big/2.png"
    },

    image3 : {
        "small_image" : "images/3.png",
        "large_image" : "images/big/3.png"
    },

} 
```

现在，我用名称**images.json保存它**

我将如何使用 jQuery 在我的 HTML 文件上调用它？..我想先在控制台上测试它..

我使用此代码，它不会在控制台上显示任何内容..

```
$.getJSON("js/images.json", function(data){
   $.each(data, function (index, value) {
     console.log("asdfasdf " +value);
   });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:26:17.473

您需要修改您的对象 Literal 以使其成为 JSON 字符串。它应该看起来更像这样：

```
{"images": {

    "image1" : {
        "small_image" : "images/1.png",
        "large_image" : "images/big/1.png"
    },

    "image2" : {
        "small_image" : "images/2.png",
        "large_image" : "images/big/2.png"
    },

    "image3" : {
        "small_image" : "images/3.png",
        "large_image" : "images/big/3.png"
    }

}} 
```

假设您的网络服务器设置为正确提供 .json 文件，那么您已经拥有的 javascript 应该可以工作。

# c# - 计算列作为上限值

> ID：14820231
> 
> 赞同：0
> 
> 时间：2013-02-11T20:25:25.220
> 
> 标签：c#, sql-server, sql-server-2008

正如我被建议使用计算列来解决[此处描述](https://stackoverflow.com/questions/14819871/create-trigger-after-insert)的问题，我需要建议或实际示例如何创建计算列`UpperEmail`，该列将在电子邮件插入时将`Email`值转换为大写字母。

谢谢大家

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T20:27:27.877

假设您的表已经存在，那么这应该可以工作：

```
ALTER TABLE YourTable
ADD UpperEmail AS (UPPER(Email)) 
```

# c# - 简单的 MVC 错误流

> ID：14820233
> 
> 赞同：1
> 
> 时间：2013-02-11T20:25:38.367
> 
> 标签：c#, asp.net, asp.net-mvc

我正在使用 ASP MVC 4.0 并且想了解自定义验证的基础知识。在这种特殊情况下，模型根本没有使用控制器或视图进行强类型化，所以我需要一些不同的东西。

我想做的是在注册我的服务时接受一个新的用户名，查看数据库，如果使用该用户名，则重新显示带有消息的原始表单。

这是我的输入表单：

```
@{
    ViewBag.Title = "Index";
}

<h2>New account</h2>

<form action= "@Url.Action("submitNew", "AccountNew")" method="post">
    <table style="width: 100%;">
        <tr>
            <td>Email:</td>
            <td>&nbsp;</td>
            <td><input id="email" name="email" type="text" /></td>
        </tr>
        <tr>
            <td>Password:</td>
            <td>&nbsp;</td>
            <td><input id="password" name="password" type="password" /></td>
        </tr>
        <tr>
            <td>Confirm Password:</td>
            <td>&nbsp;</td>
            <td><input id="passwordConfirm" name="passwordConfirm" type="password" /></td>
        </tr>
        <tr>
            <td></td>
            <td>&nbsp;</td>
            <td><input id="Submit1" type="submit" value="submit" /></td>
        </tr>
    </table>
</form> 
```

这是我提交时的控制器方法：

```
 public ActionResult submitNew()
        {
            SomeService service = (SomeService)Session["SomeService"];

            string username = Request["email"];
            string password = Request["password"];

            bool success = service.guestRegistration(username, password);

            return View();
        } 
```

如果成功为假，我只想用一条消息重新显示表单。我缺少此错误流的基础知识。你能帮忙吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:30:30.553

您*可以*添加一个 ViewBag 项目

```
bool success = service.guestRegistration(username, password);
if (!success)
{
  ViewBag.Error = "Name taken..."
}
return View(); 
```

但是你*应该*创建一个视图模型......

```
public class ViewModel
{
  public string UserName {get; set;}
  //...other properties
} 
```

...强烈键入您的视图并使用内置的 html 帮助程序...

```
@model ViewModel
//...
@using BeginForm("SubmitNew", "AccountNew", FormMethod.Post)()
{
  //...
  <div>@Html.LabelFor(m => m.Username)</div>
  <div>@Html.TextBoxFor(m => m.Username)</div>
  <div>@Html.ValidationMessageFor(m => m.Username)</div>
} 
```

...并在控制器中利用 ModelState

```
[HttpPost]
 public ActionResult SubmitNew(ViewModel viewModel)
 {
     if(ModelState.IsValid)
     {
       SomeService service = (SomeService)Session["SomeService"];
       bool success = service.guestRegistration(viewModel.username, viewModel.password);
       if (success)
       {
          return RedirectToAction("Index");
       }
       ModelState.AddModelError("", "Name taken...")"
       return View(viewModel);
     }
 } 
```

...甚至编写您自己的验证器并装饰您的模型属性，从而无需在控制器中检查成功。

# javascript - Python 发送到 javascript

> ID：14820235
> 
> 赞同：0
> 
> 时间：2013-02-11T20:25:43.627
> 
> 标签：javascript, python, nfc

我的问题真的很简单，但我还没有找到它。

我的服务器上运行了一个 python 脚本。此脚本读取 NFC 卡。(pyscard) 每当有卡片时，cardID 必须发送到网页。我的本地主机上有 index.html 文件。

```
<head>
  <title>Hello!</title>
</head>
   <script language="JavaScript" type="text/javascript">
   function card(Cardid){
     alert(Cardid);
   }
   </script>
<body>
</body>
</html> 
```

有一种方法可以通过 selenium (driver.execute_script(command) ) Selenium 很重。有没有其他简单而轻松的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:35:41.083

如果我说得对，您需要实现 AJAX。这是最简单的示例[如何在 Python 中为 AJAX 实现最小服务器？](https://stackoverflow.com/questions/336866/how-to-implement-a-minimal-server-for-ajax-in-python)

如果您需要更复杂的东西 - 选择其中一个 python web 框架（Flask 或 Django）并寻找如何使用它们实现 AJAX 的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T02:39:56.823

如果你想将 cardId 推送到网页，你需要在两者之间使用一些东西，比如 socket.IO，然后在监听通道上将数据推送到所有 websocket 客户端。从那里你可以将它传递给像你这样的函数。

另一种方法是有点限制。您可以对 python 进行 Ajax 调用，该调用读取当前卡持有数据并使用该 ID。但是当另一张卡在读卡器上时，您必须刷新才能看到新卡的数据。

# java - 二维码解码器，解决变量问题

> ID：14820238
> 
> 赞同：0
> 
> 时间：2013-02-11T20:25:53.310
> 
> 标签：java, android, qr-code

我如何能够将字符串从一个活动调用到另一个活动？我的代码不起作用，我正在尝试实现一个可以浏览手机 SD 卡上的图像并返回图像地址的程序。我正在开发一个基于 zxing 库的二维码解码器。

```
 private void onFileClick(Option o)
{
    //Toast.makeText(this, "File Clicked: "+o.getName(), Toast.LENGTH_SHORT).show();
    Toast.makeText(this, "File Clicked: "+o.getPath(), Toast.LENGTH_SHORT).show();
    QRDecoder qr = null;
    str = o.getPath();
    qr.setFile(str);
    Intent intent = new Intent(this, QRDecoder.class);
    Log.d("filter", str);
    Log.d("filter", qr.my_url);
    startActivity(intent);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:51:11.213

在调用 startActivity 之前 `intent.putExtra("path", str);`

在 QRDecoder 的 onCreate 中

`String path = getIntent().getStringExtra("path");`

# javascript - 复制下拉值

> ID：14820239
> 
> 赞同：3
> 
> 时间：2013-02-11T20:25:57.200
> 
> 标签：javascript, drop-down-menu, copy

我正在尝试复制两个下拉值并将它们添加到文本区域。我复制一个很好，但不能复制两个。我正在尝试复制“数量”的值和“类型”的值将它们组合起来并插入到文本区域中。我的代码：

```
function copy() {
    var sel = document.getElementById("amount");

    var text = sel.options[sel.selectedIndex].value;
    var out = document.getElementById("textarea");
    out.value += text + "\n";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:29:36.273

```
var sel1 = document.getElementById("amount");
var sel2 = document.getElementByid("type");
var amt = sel1.options[sel1.selectedIndex].value;
var typ = sel2.options[sel2.selectedIndex].value;
var out = document.getElementById("textarea");
out.value += amt + " " + typ + "\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T20:32:54.107

您可能想要重命名名为“type”的字段，因为它很可能是保留的变量名称。

另外，我看不到您在哪里提取类型的值？尝试这个：

```
function copy() {
    var sel = document.getElementById("amount");
    var textInput = document.getElementById("some_type");
    var text = sel.options[sel.selectedIndex].value + textInput.value;
    var out = document.getElementById("textarea");
    out.value += text + "\n";
} 
```

# coffeescript - 解构赋值的逆：重组赋值？

> ID：14820247
> 
> 赞同：0
> 
> 时间：2013-02-11T20:26:41.963
> 
> 标签：coffeescript, variable-assignment

除了方便的[解构赋值](http://coffeescript.org/#destructuring)语法外，CoffeeScript 还支持类似的构造对象字面量的语法：

```
a = 1
b = 2
o = {a, b}

> {a: 1, b: 2} 
```

我在任何地方都找不到这种语法的提及，所以我把它称为[重组分配](http://bytes.goodeggs.com/post/41935904836/restructuring-assignment-in-coffeescript)。这个结构有一个传统的名字吗？如果不是，其他人怎么称呼它？

### 更新

*结构化表达式*是我的新名字 du jour。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T22:34:10.157

这与分配无关；这只是对 JavaScript 对象字面量语法的补充。

有趣的是，您似乎将其视为“派生自”解构赋值，因为实际上情况恰恰相反：解构赋值来自对象文字符号，并且不限于您所描述的无键子集。例如，`{foo: asdf} = bar`完全符合您的预期：

```
asdf = bar.foo 
```

所以这`{a: b, b: a} = {a, b}`是一种非常混乱的写法`[a, b] = [b, a]`。

你也可以写到`{@foo}`producer `{foo: @foo}`，这是另一个有用的速记（当然它也适用于解构赋值语句）。

如果你真的需要一个名字，“对象文字键推断”可能更准确。

# javascript - 为什么添加的电子邮件地址不会显示在消息框中？

> ID：14820248
> 
> 赞同：1
> 
> 时间：2013-02-11T20:26:41.570
> 
> 标签：javascript, innerhtml

我有一个 html 文件：

```
 <!DOCTYPE html>
<html>
<head>

<link rel="stylesheet" type="text/css" href="C:\Users\matthew\AppData\Local\Temp\fz3temp-1\email picker.css"> 
<script src="email picker.js" type="text/javascript"></script>

</head>
<body>
    <div id="main">

        <form>
        <h4>Enter the email addresses in the input box below</h4>
            email:<input id="emailIn" type="text" placeholder=" email" />
            <input type="submit" value="Show entry" onsubmit="insert()" />
        </form>

        <div id="display"></div>
    </div>

</body>
</html> 
```

和一个javascript文件：

```
 var entries = [];
    var emailInput = document.getElementById("emailIn");
    var messageBox = document.getElementById("display");

    function insert() {
        entries.push(emailInput.value);
        clearAndShow();
    };

    function clearAndShow() {

    emailInput.value = "";
    messageBox.innerHTML = "";

      messageBox.innerHTML += "Emails: " + entries.join(", ") + "<br/>";
    }; 
```

和一个简单的 .css 文件。

当我在浏览器中运行代码时，最后一个电子邮件输入不显示。我错过了什么？非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:30:27.083

您的问题是您提交了表单，因此页面被重置（并且您`insert`无论如何都不会绑定该函数，因为输入没有接收到`submit`事件）。

你可以更换

```
 <input type="submit" value="Show entry" onsubmit="insert()" /> 
```

和

```
 <input type="button" value="Show entry" onclick="insert()" /> 
```

# ios - 在 iOS 和 OS X 中获取系统范围通知的状态

> ID：14820249
> 
> 赞同：8
> 
> 时间：2013-02-11T20:26:47.883
> 
> 标签：ios, macos, architecture, nsnotificationcenter, iphone-privateapi

我正在尝试编写一个代码来处理 iOS 上的打开/关闭屏幕（您可以查看讨论类似问题的[这个](https://stackoverflow.com/questions/14352228/is-there-a-away-to-detect-the-event-when-ios-device-goes-to-sleep-mode-when-the)问题）。我为这个问题添加了 OSX 标签，因为 OSX 具有相同的系统范围通知工具。下面描述的问题是继承到通知工具（相对于 iOS 或 OSX）。

有一种众所周知的注册系统范围通知的方法**com.apple.springboard.hasBlankedScreen**在屏幕关闭或打开时接收通知。

仅供参考（这里是用于注册系统范围通知的 API）：

*   notify_post、notify_check_ notify_get_state 和[朋友](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man3/notify_post.3.html)
*   CFNotificationCenterPostNotification、CFNotificationCenterAddObserver 和[朋友](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Reference/CFNotificationCenterRef/Reference/reference.html)（内部使用 notify_post 等）

但是，这种方法存在两个相互关联的问题：

*   屏幕关闭和打开的通知具有相同的名称 (com.apple.springboard.hasBlankedScreen)
*   观察者不会收到作为通知一部分的状态。

因此，我们需要实现一些不同的屏幕打开和关闭的解决方案（因为将调用相同的通知回调并且没有参数将具有状态）。

**一般来说，状态与通知回调解耦的核心问题。我不知道如何优雅地处理这个问题。**

我提出了两种直接的方法（每种方法都有缺陷）。并寻找另一种方法的想法或对这种方法的改进。

# 计数解决方案

我们可以实现一个计数器来计算我们已经收到了多少通知，并根据这些信息我们将知道它是打开还是关闭屏幕的通知（基于我们的计数器的奇数）。

但是，它有两个缺点：

1）在这种情况下，如果系统（由于设计时原因未知）将发送额外的同名通知，我们的逻辑将被搞砸，因为它会破坏奇怪的检查。

2）另外，我们需要正确设置初始状态。所以在代码的某个地方我们会有这样的东西：

> ```
> counter = getInitialState(); 
> registerForNotification(); 
> ```

在这种情况下，我们有一个竞争条件。如果系统会在我们执行 getInitialState() 之后发送通知并更改状态，但在 registerForNotification() 之前，我们将得到错误的计数器值。

如果我们将执行以下代码：

> ```
> registerForNotification();
> counter = getInitialState(); 
> ```

在这种情况下，我们有另一个竞争条件。如果系统在我们做了 registerForNotification() 之后，但在 getInitialState() 之前发送通知并改变状态，我们会得到一个计数器，将进入通知回调并增加一个计数器（这会出错）。

# 确定收到通知时的状态解决方案

在这种情况下，我们不存储任何计数器，而是在通知回调中使用 API notify_get_state 来获取当前状态。

这有它自己的问题：

1) 通知异步传递给应用程序。因此，如果您非常快速地关闭和打开屏幕，您可以在屏幕已经打开时收到这两个通知。因此， notify_check 将获得当前状态（与发送通知时的状态相比）。

结果，当应用程序在通知回调中使用 notify_get_state 时，它​​将确定有两个通知“屏幕已打开”，而不是一个通知“屏幕已关闭”和另一个“屏幕已打开”。

PS 一般来说，所有描述的问题并不特定于屏幕开/关情况。它们对于具有不同状态并使用相同通知名称发送的任何系统范围的通知都是实际的。

* * *

*更新 1*

我没有测试非常快速地打开/关闭屏幕并从 notify_get_state() 获得相同结果的场景。

*但是，当我收到两个通知com.apple.springboard.lockstate*（通过 CFNotificationCenterAddObserver 订阅）并且我使用另一个 API 获取当前设备锁定状态并收到两个通知的相同值时，我遇到了类似的情况。

所以这只是我的假设 notify_get_state 也会返回相同的值。但是，我认为这是有根据的猜测。notify_get_state 的输入参数对于两个调用将是相同的（它不会改变）。而且我不认为系统存储应该由 notify_get_state 返回的 FIFO 状态队列。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-21T00:20:06.050

所以，我做了一个非常简单的实验。我在调试器之外的越狱 iOS 6.1 iPhone 5 上运行了它。

## 代码

我使用以下代码构建了一个消费者应用程序：

```
#define EVENT "com.mycompany.bs"

- (void)registerForNotifications {
    int result = notify_register_dispatch(EVENT,
                                          &notifyToken,
                                          dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0l),
                                          ^(int info) {
                                              uint64_t state;
                                              notify_get_state(notifyToken, &state);
                                              NSLog(@"notify_register_dispatch() : %d", (int)state);
                                          });
    if (result != NOTIFY_STATUS_OK) {
        NSLog(@"register failure = %d", result);
    }
    CFNotificationCenterAddObserver(CFNotificationCenterGetDarwinNotifyCenter(), //center
                                    NULL, // observer
                                    notifyCallback, // callback
                                    CFSTR(EVENT), // event name
                                    NULL, // object
                                    CFNotificationSuspensionBehaviorDeliverImmediately);
}

static void notifyCallback(CFNotificationCenterRef center, void *observer, CFStringRef name, const void *object, CFDictionaryRef userInfo) {
    uint64_t state;
    notify_get_state(notifyToken, &state);
    NSLog(@"notifyCallback(): %d", (int)state);
} 
```

因此，如您所见，它使用两种不同的方法来注册同一个自定义事件。我启动这个应用程序，让它注册事件，然后把它放到后台（按下主页按钮）。

然后是生产者应用程序，它可以让我通过按下按钮来生成事件：

```
double delayInSeconds = 0.001;

dispatch_queue_t q = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0l);
dispatch_async(q, ^(void) {
    notify_set_state(notifyToken, 2);
    notify_post(EVENT);        
});

dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInSeconds * NSEC_PER_SEC));
dispatch_after(popTime, q, ^(void){
    notify_set_state(notifyToken, 3);
    notify_post(EVENT);
}); 
```

## 结果

然后我运行生产者应用程序，大约每两秒手动生成一对事件。如您所见，生产者快速发布状态为 的事件`2`，然后立即发布另一个状态为 的事件`3`。因此，对于**这两种**回调方法，消费者应该打印出`2`then ，如果这工作正常的话。它不会（正如您所担心的那样）：`3`

 **```
Feb 13 21:46:12 iPhone5 MyApp[1971] <Warning>: notifyCallback(): 3
Feb 13 21:46:12 iPhone5 MyApp[1971] <Warning>: notify_register_dispatch() : 3
Feb 13 21:46:12 iPhone5 MyApp[1971] <Warning>: notify_register_dispatch() : 3
Feb 13 21:46:12 iPhone5 MyApp[1971] <Warning>: notifyCallback(): 3

Feb 13 21:46:18 iPhone5 MyApp[1971] <Warning>: notifyCallback(): 3
Feb 13 21:46:18 iPhone5 MyApp[1971] <Warning>: notify_register_dispatch() : 3
Feb 13 21:46:18 iPhone5 MyApp[1971] <Warning>: notify_register_dispatch() : 3
Feb 13 21:46:18 iPhone5 MyApp[1971] <Warning>: notifyCallback(): 3

Feb 13 21:46:22 iPhone5 MyApp[1971] <Warning>: notifyCallback(): 3
Feb 13 21:46:22 iPhone5 MyApp[1971] <Warning>: notify_register_dispatch() : 3
Feb 13 21:46:22 iPhone5 MyApp[1971] <Warning>: notify_register_dispatch() : 3
Feb 13 21:46:22 iPhone5 MyApp[1971] <Warning>: notifyCallback(): 3

Feb 13 21:46:26 iPhone5 MyApp[1971] <Warning>: notifyCallback(): 2
Feb 13 21:46:26 iPhone5 MyApp[1971] <Warning>: notify_register_dispatch() : 3
Feb 13 21:46:26 iPhone5 MyApp[1971] <Warning>: notify_register_dispatch() : 3
Feb 13 21:46:26 iPhone5 MyApp[1971] <Warning>: notifyCallback(): 3

Feb 13 21:46:30 iPhone5 MyApp[1971] <Warning>: notifyCallback(): 3
Feb 13 21:46:30 iPhone5 MyApp[1971] <Warning>: notify_register_dispatch() : 3
Feb 13 21:46:30 iPhone5 MyApp[1971] <Warning>: notify_register_dispatch() : 3
Feb 13 21:46:30 iPhone5 MyApp[1971] <Warning>: notifyCallback(): 3

Feb 13 21:46:33 iPhone5 MyApp[1971] <Warning>: notifyCallback(): 3
Feb 13 21:46:33 iPhone5 MyApp[1971] <Warning>: notify_register_dispatch() : 3
Feb 13 21:46:33 iPhone5 MyApp[1971] <Warning>: notify_register_dispatch() : 3
Feb 13 21:46:33 iPhone5 MyApp[1971] <Warning>: notifyCallback(): 3

Feb 13 21:46:36 iPhone5 MyApp[1971] <Warning>: notifyCallback(): 2
Feb 13 21:46:36 iPhone5 MyApp[1971] <Warning>: notify_register_dispatch() : 3
Feb 13 21:46:36 iPhone5 MyApp[1971] <Warning>: notify_register_dispatch() : 3
Feb 13 21:46:36 iPhone5 MyApp[1971] <Warning>: notifyCallback(): 3 
```

我尝试更改要使用的一种消费者注册方法`CFNotificationSuspensionBehaviorCoalesce`（而不是立即交付）。结果：

```
Feb 13 21:48:17 iPhone5 MyApp[1990] <Warning>: notifyCallback(): 3
Feb 13 21:48:17 iPhone5 MyApp[1990] <Warning>: notify_register_dispatch() : 3
Feb 13 21:48:17 iPhone5 MyApp[1990] <Warning>: notify_register_dispatch() : 3
Feb 13 21:48:17 iPhone5 MyApp[1990] <Warning>: notifyCallback(): 3

Feb 13 21:48:20 iPhone5 MyApp[1990] <Warning>: notifyCallback(): 2
Feb 13 21:48:20 iPhone5 MyApp[1990] <Warning>: notify_register_dispatch() : 3
Feb 13 21:48:20 iPhone5 MyApp[1990] <Warning>: notify_register_dispatch() : 3
Feb 13 21:48:20 iPhone5 MyApp[1990] <Warning>: notifyCallback(): 3

Feb 13 21:48:24 iPhone5 MyApp[1990] <Warning>: notifyCallback(): 2
Feb 13 21:48:24 iPhone5 MyApp[1990] <Warning>: notify_register_dispatch() : 2
Feb 13 21:48:24 iPhone5 MyApp[1990] <Warning>: notify_register_dispatch() : 3
Feb 13 21:48:24 iPhone5 MyApp[1990] <Warning>: notifyCallback(): 3

Feb 13 21:48:29 iPhone5 MyApp[1990] <Warning>: notifyCallback(): 2
Feb 13 21:48:29 iPhone5 MyApp[1990] <Warning>: notify_register_dispatch() : 3
Feb 13 21:48:29 iPhone5 MyApp[1990] <Warning>: notify_register_dispatch() : 3
Feb 13 21:48:29 iPhone5 MyApp[1990] <Warning>: notifyCallback(): 3

Feb 13 21:48:32 iPhone5 MyApp[1990] <Warning>: notifyCallback(): 2
Feb 13 21:48:32 iPhone5 MyApp[1990] <Warning>: notify_register_dispatch() : 2
Feb 13 21:48:32 iPhone5 MyApp[1990] <Warning>: notify_register_dispatch() : 3
Feb 13 21:48:32 iPhone5 MyApp[1990] <Warning>: notifyCallback(): 3

Feb 13 21:48:35 iPhone5 MyApp[1990] <Warning>: notifyCallback(): 2
Feb 13 21:48:35 iPhone5 MyApp[1990] <Warning>: notify_register_dispatch() : 2
Feb 13 21:48:35 iPhone5 MyApp[1990] <Warning>: notify_register_dispatch() : 3
Feb 13 21:48:35 iPhone5 MyApp[1990] <Warning>: notifyCallback(): 3

Feb 13 21:48:38 iPhone5 MyApp[1990] <Warning>: notifyCallback(): 2
Feb 13 21:48:38 iPhone5 MyApp[1990] <Warning>: notify_register_dispatch() : 2
Feb 13 21:48:38 iPhone5 MyApp[1990] <Warning>: notify_register_dispatch() : 3
Feb 13 21:48:38 iPhone5 MyApp[1990] <Warning>: notifyCallback(): 3

Feb 13 21:48:39 iPhone5 MyApp[1990] <Warning>: notifyCallback(): 2
Feb 13 21:48:39 iPhone5 MyApp[1990] <Warning>: notify_register_dispatch() : 3
Feb 13 21:48:39 iPhone5 MyApp[1990] <Warning>: notify_register_dispatch() : 3
Feb 13 21:48:39 iPhone5 MyApp[1990] <Warning>: notifyCallback(): 3 
```

然后我尝试将`notify_register_dispatch()`消费者的队列优先级更改为**high**，而不是**后台**优先级。结果：

```
Feb 13 21:49:51 iPhone5 MyApp[2006] <Warning>: notifyCallback(): 3
Feb 13 21:49:51 iPhone5 MyApp[2006] <Warning>: notify_register_dispatch() : 3
Feb 13 21:49:51 iPhone5 MyApp[2006] <Warning>: notify_register_dispatch() : 3
Feb 13 21:49:51 iPhone5 MyApp[2006] <Warning>: notifyCallback(): 3

Feb 13 21:49:53 iPhone5 MyApp[2006] <Warning>: notifyCallback(): 2
Feb 13 21:49:53 iPhone5 MyApp[2006] <Warning>: notify_register_dispatch() : 2
Feb 13 21:49:53 iPhone5 MyApp[2006] <Warning>: notifyCallback(): 3
Feb 13 21:49:53 iPhone5 MyApp[2006] <Warning>: notify_register_dispatch() : 3

Feb 13 21:49:55 iPhone5 MyApp[2006] <Warning>: notifyCallback(): 2
Feb 13 21:49:55 iPhone5 MyApp[2006] <Warning>: notify_register_dispatch() : 2
Feb 13 21:49:55 iPhone5 MyApp[2006] <Warning>: notify_register_dispatch() : 3
Feb 13 21:49:55 iPhone5 MyApp[2006] <Warning>: notifyCallback(): 3

Feb 13 21:49:59 iPhone5 MyApp[2006] <Warning>: notifyCallback(): 2
Feb 13 21:49:59 iPhone5 MyApp[2006] <Warning>: notify_register_dispatch() : 2
Feb 13 21:49:59 iPhone5 MyApp[2006] <Warning>: notify_register_dispatch() : 3
Feb 13 21:49:59 iPhone5 MyApp[2006] <Warning>: notifyCallback(): 3

Feb 13 21:50:01 iPhone5 MyApp[2006] <Warning>: notifyCallback(): 2
Feb 13 21:50:01 iPhone5 MyApp[2006] <Warning>: notify_register_dispatch() : 3
Feb 13 21:50:01 iPhone5 MyApp[2006] <Warning>: notify_register_dispatch() : 3
Feb 13 21:50:01 iPhone5 MyApp[2006] <Warning>: notifyCallback(): 3

Feb 13 21:50:04 iPhone5 MyApp[2006] <Warning>: notify_register_dispatch() : 2
Feb 13 21:50:04 iPhone5 MyApp[2006] <Warning>: notifyCallback(): 2
Feb 13 21:50:04 iPhone5 MyApp[2006] <Warning>: notify_register_dispatch() : 3
Feb 13 21:50:04 iPhone5 MyApp[2006] <Warning>: notifyCallback(): 3

Feb 13 21:50:06 iPhone5 MyApp[2006] <Warning>: notifyCallback(): 2
Feb 13 21:50:06 iPhone5 MyApp[2006] <Warning>: notify_register_dispatch() : 2
Feb 13 21:50:06 iPhone5 MyApp[2006] <Warning>: notify_register_dispatch() : 3
Feb 13 21:50:06 iPhone5 MyApp[2006] <Warning>: notifyCallback(): 3

Feb 13 21:50:09 iPhone5 MyApp[2006] <Warning>: notifyCallback(): 2
Feb 13 21:50:09 iPhone5 MyApp[2006] <Warning>: notify_register_dispatch() : 2
Feb 13 21:50:09 iPhone5 MyApp[2006] <Warning>: notify_register_dispatch() : 3
Feb 13 21:50:09 iPhone5 MyApp[2006] <Warning>: notifyCallback(): 3

Feb 13 21:50:10 iPhone5 MyApp[2006] <Warning>: notifyCallback(): 2
Feb 13 21:50:10 iPhone5 MyApp[2006] <Warning>: notify_register_dispatch() : 3
Feb 13 21:50:10 iPhone5 MyApp[2006] <Warning>: notify_register_dispatch() : 3
Feb 13 21:50:10 iPhone5 MyApp[2006] <Warning>: notifyCallback(): 3 
```

## 结论（？）

*   正如您所怀疑的那样，存在问题，而不仅仅是`SBGetScreenLockStatus`电话。有时，消费者从未看到状态设置为`2`。
*   如果我将生产者时间延迟增加到 5 毫秒，我永远不会发现问题。因此，这可能只是时间真正接近的事件的问题。屏幕锁定/解锁可能没什么大不了的。显然，速度较慢的手机（iPhone < 5）会有不同的反应。
*   静态`notifyCallback()`方法似乎**首先**被回调，除非 GCD 回调块被放在高优先级队列中。即便如此，通常还是先调用静态回调函数。很多时候，第一个回调方法得到了正确的状态（`2`），而第二个没有。所以，如果你不得不忍受这个问题，你可能会选择似乎表现最好的回调机制（或者至少，在你的应用程序中自己制作原型）。
*   我不能说这个`suspensionBehavior`参数有很大的不同。也就是说，根据 iOS**发布**事件的方式，他们可能会使用[CFNotificationCenterPostNotification](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Reference/CFNotificationCenterRef/Reference/reference.html)之类的调用，该调用可能会忽略消费者的行为请求。
*   如果您查看[此 Apple 文档](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/DarwinNotify/Reference/reference.html)，您会看到两件事。

    1.  首先，`notify_set_state`不是原始 API 的一部分
    2.  其次，该文件的第一段说

> **达尔文通知 API 参考**
> 
> 这些例程允许进程交换*无状态*通知事件。

所以，也许我们只是在尝试做一些与原始设计不一致的事情:(

*   如果您还查看[Apple 的 NotificationPoster 示例](https://developer.apple.com/library/mac/#samplecode/NotificationPoster/Listings/NotificationPost_c.html#//apple_ref/doc/uid/DTS40008835-NotificationPost_c-DontLinkElementID_3)，您会发现它们不使用`notify_get_state`and`notify_set_state`来传达状态。他们将**通知**作为用户信息字典传递。显然，如果您正在观察 Apple 的 iOS 事件，则无法控制事件的发布方式。但是，在您可以创建生产者**和**消费者的应用程序中，我会远离`notify_set_state`.**

# cmake - 是否可以将 Inno Setup 与 cmake/cpack 一起使用？

> ID：14820251
> 
> 赞同：3
> 
> 时间：2013-02-11T20:26:54.790
> 
> 标签：cmake, inno-setup, cpack

我正在将我们工作中的一些项目移植到 cmake/cpack，虽然我们目前的东西正在使用 Inno Setup，但似乎没有用于 Inno Setup 的内置 CPack 生成器。它似乎是 zip 文件或 NSIS。是否有任何使用 Inno Setup 的 CPack 生成器（如果有，我在哪里可以找到它们）？如果没有，除了编写脚本并让cmake为其`package`目标运行之外，还有其他方法可以将Inno Setup与cmake一起使用吗？

# wordpress - 使用 jquery.validate.min.js 的 Wordpress 表单验证不起作用

> ID：14820252
> 
> 赞同：1
> 
> 时间：2013-02-11T20:27:03.940
> 
> 标签：wordpress, jquery-validate, validation

我在 Wordpress 中有一个自定义构建的表单（我考虑使用表单插件，但它是一个 3 步表单，我看到的插件似乎都不合适）。我正在尝试按照此处的步骤实现表单验证插件：http: [//www.problogdesign.com/wordpress/validate-forms-in-wordpress-with-jquery/](http://www.problogdesign.com/wordpress/validate-forms-in-wordpress-with-jquery/)

这是我的 wordpress 模板中的内容：

```
<form name="lpsOrderForm" id="lpsOrderForm" method="post" class="contact-form" action="/payment-information/">
<input name=action type=hidden value=lps_calc>
<input name=page type=hidden value=2>
<input name=size type=hidden value=2>
<ul class=form-list>
<li><label>Paper</label></li>
<li><select name=paper id=paper onchange="lps_calcprice()">
<option value=4 >70# Gloss</option>
<option value=5 >7 Pt Reply/Uncoated</option>
</select></li>
</ul>
<ul class=form-list>
<li><label>Ink</label></li>
<li><select name=ink id=ink onchange="lps_calcprice()">
<option value=6 >Full Color Both Sides</option>
<option value=7 >Full Color One Side</option>
</select></li>
</ul>
<ul class=form-list>
<li><label>Bleed</label></li>
<li><select name=bleed id=bleed onchange="lps_calcprice()">
<option value=8 >Yes Bleed</option>
<option value=9 >No Bleed</option>
</select></li>
</ul>
<ul class=form-list>
<li><label>Fold</label></li>
<li><select name=fold id=fold onchange="lps_calcprice()">
<option value=0>None</option>
<option value=10 >Half-Fold</option>
<option value=11 >Quarter-Fold</option>
<option value=12 >Tri-Fold</option>
<option value=13 >Double Parallel-Fold</option>
</select></li>
</ul>
<ul class=form-list>
<li><label>Bindery</label></li>
<li><select name=bindery id=bindery onchange="lps_calcprice()">
<option value=0>None</option>
<option value=14 >One Perf</option>
<option value=15 >Two Perfs</option>
<option value=16 >Three Perfs</option>
<option value=17 >Four Perfs</option>
<option value=18 >Five Perfs</option>
<option value=19 >L Perf</option>
</select></li>
</ul>
<ul class=form-list>
<li><label>Quantity</label></li>
<li><select name=quantity id=quantity onchange="lps_calcprice()">
<option value=0>0</option>
<option value=20 >1000</option>
<option value=21 >2000</option>
<option value=22 >3000</option>
<option value=23 >4000</option>
<option value=24 >5000</option>
<option value=25 >10000</option>
<option value=31 >15000</option>
<option value=26 >25000</option>
<option value=27 >50000</option>
<option value=28 >75000</option>
<option value=29 >100000</option>
</select></li>
</ul>
    <ul class="form-list">
        <li><label>Company/Name:</label></li>
        <li><input class="fws4" type="text" name="lps_deliveryname" id="lps_deliveryname"/></li>
    </ul>
    <ul class="form-list">
        <li><label>Address Line 1:</label></li>
        <li><input class="fws4" type="text" name="lps_deliveryadd1" id="lps_deliveryadd1"/></li>
    </ul>
    <ul class="form-list">
    <li><label>Address Line 2:</label></li>
        <li><input class="fws4" type="text" name="lps_deliveryadd2" id="lps_deliveryadd2"/></li>
    </ul>
    <ul class="form-list">
        <li><label for="city">City:</label></li>
        <li><input class="small-tbox" type="text" name="lps_deliverycity" name="lps_deliverycity" id="lps_deliverycity"/></li>
       <li><label for="states">State:</label></li>
       <li><label for="zip">Zip:</label></li>
       <li><input class="small-tbox" type="text" name="lps_deliveryzip" id="lps_deliveryzip"/></li>
    </ul>
    <input class="checkout-button-blue" type="submit" /></fieldset>
</div>
<div class="clear"></div>
</form> 
```

您会注意到选择中的 onchange 调用。该函数计算价格并通过 AJAX 显示并且工作正常。它通过适当的 add_action 调用在我的插件中排队和本地化。这是 lps_calcprice 函数的 javascript 文件：

```
function lps_calcprice(){
jQuery.post(myAjax.ajaxurl, jQuery("#lpsOrderForm").serialize()
,
function(response_from_the_action_function){
    jQuery("#lps_price").html(response_from_the_action_function);
}
); 
```

}

这是插件文件，我称之为 trace_validate_form：

```
<?php
/**
 * Plugin Name: Trace Validate Form
 * Description: Validate form data instantly with jQuery. Uses <a     href="http://bassistance.de/jquery-plugins/jquery-plugin-validation/">jQuery Form Validation</a> plugin by Jörn Zaefferer.
 * Version: 1.0
 * Author: Pro Blog Design
 * Author URI: http://www.problogdesign.com/
 * Lic
*/

/**
 * Add jQuery Validation script on posts.
 */
function trace_vc_scripts() {
//  if(is_single() ) {
        wp_enqueue_script( "jquery-validate",     WP_PLUGIN_URL.'/trace_validate_form/js/jquery.validate.min.js', array('jquery') );
    wp_enqueue_style(
        'jquery-validate',
        plugin_dir_url( __FILE__ ) . 'css/style.css',
        array(),
        '1.0'
    );
//  }
}
add_action('init', 'trace_vc_scripts');

/**
 * Initiate the script.
 * Calls the validation options on the comment form.
 */
function trace_vc_init() { ?>
    <script type="text/javascript">
    jQuery(document).ready(function($) {

        $('#lpsOrderForm').validate({
            rules: {

                lps_deliveryName: {
                    required: true,
                },

                lps_deliveryAdd1: {
                    required: true
                },

                lps_deliveryCity: {
                    required: true
                },

                lps_deliveryZip: {
                    required: true,
                    maxlength: 5,
                    digits: true
                },
            },
            messages: {
                lps_deliveryName: "Please enter a name for the sample/delivery address.",
                lps_deliveryAdd1: "Please enter a street address for the sample/delivery address.",
                lps_deliveryCity: "Please enter a city for the sample/delivery address.",
                lps_deliveryZip: "Please enter a 5 digit zip code for the sample/delivery address."
            }
        });
    });
</script>
<?php }
add_action('wp_footer', 'trace_vc_init', 999);
?> 
```

当我没有在字段中输入任何内容并单击提交时，它只是转到下一页。我对 Wordpress 相当陌生，所以很可能这是一个简单的修复。我怀疑它与表单操作有关，但我不确定要更改它以使表单验证正常工作。当我查看源代码时，我在头部看到了 JS 文件，并且在 Firebug 中没有任何错误。任何投入将不胜感激！

*注意：我故意删除了状态输入，因为它是从 Wordpress 的 php 评估器插件内部加载的，我不想让它变得更加混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T05:26:27.403

我继续做这个项目需要完成的其他事情，然后回到验证表格。原来我需要在输入中添加“class=required”。现在就像一个魅力！愚蠢的...

# iphone - 如何区分用户点击我的表格视图单元格和用户点击单元格中包含的子视图？

> ID：14820253
> 
> 赞同：0
> 
> 时间：2013-02-11T20:27:16.053
> 
> 标签：iphone, ios, ipad, cocoa-touch, cocoa

我的一个视图控制器包含一个带有自定义 UITableViewCell 的 UITableView。我的自定义 UITableView 单元格包含代表可点击图标的 UIImageView 子*视图*。当用户点击自定义单元格上的任何位置时，除了图标子视图，我希望我的`didSelectRowAtIndexPath`方法像正常一样被调用。但是当我的图标子视图被点击时，我想要一种不同的方法来调用，但我不知道如何做到这一点。我是否在 touchesDidBegin 方法中捕获了触摸位置并手动检查用户是否点击了图标？那感觉太hacky了。其他更清洁的想法？

非常感谢你的智慧！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:32:49.657

只需将 tapGestureRecognizer 添加到单元格中的 UIImageView

# ruby - 通过参数或字符串调用类方法的替代方法

> ID：14820255
> 
> 赞同：0
> 
> 时间：2013-02-11T20:27:20.650
> 
> 标签：ruby

我想将一个类方法作为参数传递给另一个对象调用它，即

```
do_this(Class.method_name) 
```

接着：

```
def do_this(class_method)
  y = class_method(local_var_x)
end 
```

我能看到的唯一方法是将其作为字符串传递并使用 eval，或者将类和方法作为字符串传递，然后进行常量化并发送。eval 的缺点似乎是速度和调试？

有没有更简单的方法来做到这一点？

编辑：

很好的答案，但意识到我问的问题略有错误，想使用方法未传递的参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T20:30:05.890

我建议采用类似于您提出的第二种解决方案的方法。

```
do_this(Class.method(:name), x) 
```

接着：

```
def do_this(method, x)
   y = method.call(x)
end 
```

另请参阅 的文档[`Object#method`](http://www.ruby-doc.org/core-1.9.3/Object.html#method-i-method)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T20:39:15.937

考虑使用 proc 对象：

```
def do_this(myproc)
    y = myproc.call
end 
```

接着

```
do_this( Proc.new { klass.method(x) } ) 
```

尽管您还应该考虑使用块，这更像是 ruby​​ 风格。那看起来像：

```
def do_this
   y = yield
end 
```

并通过以下方式致电：

```
do_this { klass.method(x) } 
```

# django - Django管理页面中的分层数据

> ID：14820261
> 
> 赞同：9
> 
> 时间：2013-02-11T20:27:43.990
> 
> 标签：django, django-mptt, feincms

在一个 Django 项目中，我有一个使用 MPTT 的分层模型，在 models.py 中定义如下：

```
class Structure(MPTTModel):
    name = models.CharField(max_length=200, unique=True)
    parent = TreeForeignKey('self', null=True, blank=True, related_name='children')
    [...] 
```

我正在使用 FeinCMS 在管理页面中显示此分层数据。我在 admin.py 中这样做：

```
class StructureAdmin(tree_editor.TreeEditor):
    search_fields = ('name',)

[...]

admin.site.register(Structure, StructureAdmin) 
```

在管理模型页面中，它可以完美运行，并且可以看到层次结构： ![在此处输入图像描述](../Images/dd6f90af54052cfcb9e4a3ca2391e6a5.png)

它在编辑或添加时也有效：

![在此处输入图像描述](../Images/6b1fcf6918213f982b9d807f79589655.png)

我在 models.py 中有另一个模型：

```
class Track(models.Model):
    initialStructure = models.ForeignKey(Structure , related_name='track_initialStructure')
    finalStructure = models.ForeignKey(Structure, related_name='track_finalStructure')
    [...] 
```

但是，当添加此类新元素时，无法看到层次结构：

![在此处输入图像描述](../Images/93255384122162c59da1aa659e6a2381.png)

我尝试将 tree_editor.TreeEditor 用于 Track 的管理视图，但它给出了很多错误，因为 Track 不是分层的，但它的一些 ForeignKey 是。编辑模型轨道的元素时如何显示层次结构？

非常感谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T23:44:52.937

尝试改变：

```
finalStructure = models.ForeignKey(Structure, related_name='track_finalStructure') 
```

到：

```
finalStructure = TreeForeignKey(Structure, related_name='track_finalStructure') 
```

当然，`TreeForeignKey`从*django-mptt*导入后：

```
from mptt.fields import TreeForeignKey 
```

# javascript - How to get image size dyamically w/ mutliple instances?

> ID：14820265
> 
> 赞同：1
> 
> 时间：2013-02-11T20:27:59.697
> 
> 标签：javascript

I am using a FileReader to populate my images.

```
// i.e. .... e.target.result 
```

If i set an image element source like this:

```
pic_upload_area.src = some_image; 
```

I can get its dimensions like this:

```
width = pic_upload_area.clientWidth; 
```

And things work fine. However if I now reset it to a new image like this:

```
pic_upload_area.src = '';
pic_upload_area.src = new_image; 
```

and once again get the image like this:

```
width = pic_upload_area.clientWidth; 
```

I find that it still has the old image width, and the new image has been malformed to fit the old image's dimensions.

I find it strange that it works only on the first attempt. How can I get `clientWidth` to update when I update the `.src` attribute of the image?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:32:02.927

最简单的方法是删除并重新创建`pic_upload_area`. 设置尺寸后，新图像`src`将符合旧尺寸。

# ios - iOS Finding the time passed since a specific date

> ID：14820270
> 
> 赞同：1
> 
> 时间：2013-02-11T20:28:05.173
> 
> 标签：ios, nsdate, nstimeinterval

I have been playing with NSDate and NSTimeInterval to try and get the time passed since a specific date, but I am not having much luck.

I want to specify an exact constant date (Jan 5th 2012 2PM) and calculate the time passed in Years, Hours, Min, Sec and display this on the screen as a counter.

It seems simple enough; however, browsing through code has yet to prove successful for me.

I also want to see total time in a years months days mins secs format. I appreciate any help, thanks!

This an example I have found that I don't know how to customize:

```
NSCalendar *c = [NSCalendar currentCalendar];
NSDate *d1 = [NSDate date];
NSDate *d2 = [NSDate dateWithTimeIntervalSince1970:1340323201];//2012-06-22
NSDateComponents *components = [c components:NSHourCalendarUnit fromDate:d2 toDate:d1 options:0];
NSInteger diff = components.minute;

NSDayCalendarUnit|NSHourCalendarUnit|NSMinuteCalendarUnit 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:14:19.423

就像[特坎扎基奇](https://stackoverflow.com/users/1411844/tkanzakic)所说，

```
NSDateComponents* components = [c components:(NSYearCalendarUnit|NSHourCalendarUnit|NSMinuteCalendarUnit|NSSecondCalendarUnit) fromDate:d1 toDate:d2 options:0] ;
NSLog(@"%ld years, %ld hours, %ld minutes, %ld seconds",  components.year, components.hour, components.minute, components.second) ; 
```

# jenkins - Is there a way to prevent a project from not having access to another project files in Jenkins CI?

> ID：14820271
> 
> 赞同：1
> 
> 时间：2013-02-11T20:28:05.257
> 
> 标签：jenkins, continuous-integration, hudson, master-slave

I am trying to setup a Jenkins/Hudson CI in a distributed environment. I am curious about the following questions:

1) does the slave account need to be a root/administrator account? If lower privilege can run whats the minimum access?

2) On a slave node, does one projects jobs have access to another project files that previously built on the same node? How would you prevent this?

3) How do you secure someone from not being able to format your disk with a bat file running in a pre or post build script?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:59:44.727

1) 从属帐户不必是 root 或管理员。它只需要完全访问您在从配置的“远程 FS 根”字段中提供的文件夹。

2) 是的。每个项目文件夹都归用于运行从站的用户所有。您可以使用相对路径访问其他项目文件夹：$WORKSPACE/../OTHER_PROJECT/。我不确定是否有默认的方法来防止这种情况。但是，您有两种选择：

*   构建后删除工作区（使用插件[Workspace Cleanup Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Workspace+Cleanup+Plugin)）
*   为每个项目创建一个单独的从机/用户组合 - 从机可以相同，但您必须为每个项目创建一个单独的用户。

3) 完全格式化磁盘需要特权访问。你不应该给你的奴隶用户这些权利。我不确定您的奴隶是基于 Unix 还是基于 Windows，但无论哪种方式，您都应该能够阻止您的用户被允许执行任何此类任务。如 A1 中所述，从属用户只需要足够的访问权限即可在其“远程 FS 根”文件夹中读取/写入/执行。

只是出于好奇 - 你在你的奴隶上运行什么操作系统？

# python - Confused by chain enumeration

> ID：14820273
> 
> 赞同：2
> 
> 时间：2013-02-11T20:28:19.157
> 
> 标签：python

I wanted to gather all of the header files in a list of subdirectories. However, if I do

```
from glob import glob
from itertools import chain

subDirs = ['FreeRTOS', 'Twig']
for each in chain(glob(eachDir+'/*.h') for eachDir in subDirs):
  print each 
```

What I get is

```
['FreeRTOS/croutine.h', 'FreeRTOS/FreeRTOS.h', 'FreeRTOS/FreeRTOSConfig.h', 'FreeRTOS/list.h', 'FreeRTOS/mpu_wrappers.h', 'FreeRTOS/portable.h', 'FreeRTOS/portmacro.h', 'FreeRTOS/projdefs.h', 'FreeRTOS/queue.h', 'FreeRTOS/semphr.h', 'FreeRTOS/StackMacros.h', 'FreeRTOS/task.h', 'FreeRTOS/timers.h']
['Twig/twig.h'] 
```

But what I wanted to see was

```
'FreeRTOS/croutine.h'
'FreeRTOS/FreeRTOS.h'
'FreeRTOS/FreeRTOSConfig.h'
'FreeRTOS/list.h'
'FreeRTOS/mpu_wrappers.h'
'FreeRTOS/portable.h'
'FreeRTOS/portmacro.h'
'FreeRTOS/projdefs.h'
'FreeRTOS/queue.h'
'FreeRTOS/semphr.h'
'FreeRTOS/StackMacros.h'
'FreeRTOS/task.h'
'FreeRTOS/timers.h'
'Twig/twig.h' 
```

I thought that was what the chain() would do for me. What am I missing?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T20:30:11.713

我认为您正在寻找[itertools.chain.from_iterable](http://docs.python.org/2/library/itertools.html#itertools.chain.from_iterable)：

```
import os
import glob
import itertools

for each in itertools.chain.from_iterable(
        glob.glob(os.path.join(eachDir,'/*.h')) 
        for eachDir in subDirs):
    print each 
```

* * *

它展平了一个可迭代的迭代：

```
In [6]: import itertools as IT
In [7]: list(IT.chain.from_iterable([['a', 'b', 'c'], [1, 2, 3]]))
Out[7]: ['a', 'b', 'c', 1, 2, 3] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T20:37:43.583

可能比 unutbu 的回答慢，但这也可以：

```
import collections
def flattenIter(l):
    """
        Iterator that flattens a list by one each iteration
        To get a fully flattened list of L do:
            list(flattenIter(L))
    """
    for el in l:
        if isinstance(el, collections.Iterable) and not isinstance(el, basestring):
            for sub in flattenIter(el):
                yield sub
        else:
            yield el 
```

**请注意，与 unutbu 的答案相比，与他的方法相反，这会使列表中的任何数量的列表变平。**例子：

```
print list(IT.chain.from_iterable([['a', 'b', 'c'], [1, 2, 3],"aap",["beer",[1]]]))
# ['a', 'b', 'c', 1, 2, 3, 'a', 'a', 'p', 'beer', [1]]
print list(flattenIter([['a', 'b', 'c'], [1, 2, 3],1,"aap",["beer",[1]]]))
# ['a', 'b', 'c', 1, 2, 3, 1, 'aap', 'beer', 1] 
```

* * *

与 unutbu 的答案相同的“出局”。

```
In : list(flattenIter([['a', 'b', 'c'], [1, 2, 3]]))
Out: ['a', 'b', 'c', 1, 2, 3] 
```

* * *

这是与 unutbu 版本的速度比较：

```
import timeit
import collections
import time
import itertools as IT

class Timer:
    def __enter__(self):
        self.start = time.clock()
        return self

    def __exit__(self, *args):
        self.end = time.clock()
        self.interval = self.end - self.start

def flattenIter(l):
    """
        Iterator that flattens a list by one each iteration
        To get a fully flattened list of L do:
            list(flattenIter(L))
    """
    for el in l:
        if isinstance(el, collections.Iterable) and not isinstance(el, basestring):
            for sub in flattenIter(el):
                yield sub
        else:
            yield el

with Timer() as t:
    for x in xrange(10000):
        list(IT.chain.from_iterable([['a', 'b', 'c'], [1, 2, 3]]))

print t.interval
# result: 0.0220727116414

with Timer() as t:
    for x in xrange(10000):
        list(flattenIter([['a', 'b', 'c'], [1, 2, 3]]))

print t.interval
# result: 0.147218201587 
```

* * *

**另请查看：**

[从 Python 中的列表列表中制作一个平面列表](https://stackoverflow.com/questions/952914/making-a-flat-list-out-of-list-of-lists-in-python)

它被标记为重复，尽管其中也有一些其他可靠的链接。;)

# android - Authorize Android Instrumentation Test for Root Access on Emulator

> ID：14820278
> 
> 赞同：0
> 
> 时间：2013-02-11T20:28:34.587
> 
> 标签：android, android-emulator, integration-testing, instrumentation, root-access

I have developed an Android app that requires root access, and it works fine. I am trying to test the app using instrumentation tests with `ActivityInstrumentationTestCase2` and cover the parts of the app that utilize root access. The tests should be fully automated as they will run on our CI. The CI build creates a fresh emulator, and then it roots the emulator using the following commands:

```
adb -e install superuser.apk
adb shell mount -o rw,remount -t yaffs2 /dev/block/mtdblock03 /system 
adb push su /system/xbin/su 
adb shell chmod 06755 /system 
adb shell chmod 06755 /system/xbin/su 
```

It works OK, but at some point I have to click "Allow" button on the Superuser's root access prompt when the test requires it. My problem is how to execute those tests without manual clicking the "Allow" button and gain the root access.

If I try to click this button from instrumentation test using the following code

```
instrumentation.sendKeyDownUpSync(KeyEvent.KEYCODE_DPAD_CENTER); 
```

I get

```
java.lang.SecurityException: 
Injecting to another application requires INJECT_EVENTS permission 
```

Apparently, this privilege is used only by system apps, and I cannot authorize my apps with this permission. Maybe I am doing something wrong here?

Another idea is to pre-authorize the app during the emulator boot from command line, but I haven't found the way for this.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:58:40.070

您的方法会遇到很多问题，您可以使用除仪器以外的其他框架（例如猴子/ [http://developer.android.com/tools/testing/testing_ui.html](http://developer.android.com/tools/testing/testing_ui.html)）自动按下按钮，但我的投票因为你会为你的模拟器使用快照/自定义磁盘映像，创建你自己的具有手机根的快照/映像，然后你可能应该能够启动模拟器并告诉它使用已经具有 root 访问权限的快照.

# jquery - 从“var somthing =”定义的函数中获取外部变量值

> ID：14820285
> 
> 赞同：1
> 
> 时间：2013-02-11T20:28:58.123
> 
> 标签：jquery, jquery-ui, function, var

这是 jQuery UI 小部件和插件中使用的函数 -

```
var select = function( event, ui ) {
        var somevariable = 4;
    } 
```

我怎样才能得到`var somevariable =`这个函数之外的值？

将其用作全局变量不起作用：

```
var somevariable;
var select = function( event, ui ) {
        var somevariable = 4;
    } 
```

在这段代码`var somevariable`中，当它放在之前或之后时，它不会得到值“4”`var select =`

**编辑：**为了更详细，我想在另一个函数中使用这个变量，比如下面的 jQuery UI 插件：

```
 $( "#id" ).autocomplete({
    minLength: 0,
    source: function( request, response ) {

        if (somevariable == 5)
        {
        //do something
        }

    },
    open: function( event, ui ) {

    somevariable = 5;

    }
}); 
```

在这种情况下，当`open:`事件被触发时，值不会被`source:`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T20:48:29.410

也许这就是你想要的？

```
var somevariable;
var select = function( event, ui ) {
    somevariable = 4;
} 
```

通过没有`var`在第 3 行，而不是作为内部的新变量`select`，`somevariable`现在指的是在第 1 行声明的变量。

如果一个变量在函数内声明为局部变量，则不能从函数外访问它（但可以从该函数内声明的函数访问它，并且它的值可以像往常一样传递）。事实上，它不能做到这一点是一个非常强大的功能，它可以作为在 Javascript 中创建私有作用域的一种手段。

* * *

另外，考虑通过函数声明来声明你的方法：

```
var somevariable;
function select(event, ui) {
  somevariable = 4
}; 
```

（优点：稍短，提升到顶部 - 您可以在定义它的位置上方调用它；缺点：稍微不直观，可以将其视为一等公民）。

# r - 获取响应头

> ID：14820286
> 
> 赞同：6
> 
> 时间：2013-02-11T20:28:57.830
> 
> 标签：r, rcurl, httr

我想从 GET 或 POST 获取响应标头。

我的例子是：

```
 library(httr)
    library(RCurl)
    url<-'http://www.omegahat.org/RCurl/philosophy.html'
    doc<-GET(url)
    names(doc)

[1] "url"         "handle"      "status_code" "headers"     "cookies"     "content"     "times"       "config" 
```

但没有响应标头，只有请求标头。

结果应该是这样的：

```
Connection:Keep-Alive
Date:Mon, 11 Feb 2013 20:21:56 GMT
ETag:"126a001-e33d-4c12cf2702440"
Keep-Alive:timeout=15, max=100
Server:Apache/2.2.14 (Ubuntu)
Vary:Accept-Encoding 
```

我可以用 R 和 httr/RCurl 包做到这一点，还是 R 不足以解决这类问题？

**编辑**：我想获取所有响应标头。我主要对不在此示例中的**位置响应感兴趣。**

**Edit2**：我忘了告诉我在哪个系统上工作 - 它是 Windows 7

我的会话信息

```
> sessionInfo()
R version 2.15.2 (2012-10-26)
Platform: x86_64-w64-mingw32/x64 (64-bit)

locale:
[1] LC_COLLATE=Polish_Poland.1250  LC_CTYPE=Polish_Poland.1250    LC_MONETARY=Polish_Poland.1250
[4] LC_NUMERIC=C                   LC_TIME=Polish_Poland.1250    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] rjson_0.2.12 RCurl_1.95-3 bitops_1.0-5 httr_0.2     XML_3.95-0.1

loaded via a namespace (and not attached):
[1] digest_0.6.2  stringr_0.6.2 tools_2.15.2 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T20:43:00.633

你可以这样做：

```
h <- basicHeaderGatherer()
doc <- getURI("http://www.omegahat.org/RCurl/index.html", headerfunction = h$update)
h$value() 
```

这会给你一个命名的向量：

```
 Date                           Server 
 "Mon, 11 Feb 2013 20:41:58 GMT"         "Apache/2.2.14 (Ubuntu)" 
                   Last-Modified                             ETag 
 "Wed, 24 Oct 2012 15:49:35 GMT" "\"3262089-10bf-4ccd0088461c0\"" 
                   Accept-Ranges                   Content-Length 
                         "bytes"                           "4287" 
                            Vary                     Content-Type 
               "Accept-Encoding"                      "text/html" 
                          status                    statusMessage 
                           "200"                             "OK" 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-11T20:34:46.137

curl -I [http://www.google.com](http://www.google.com)

```
HTTP/1.1 200 OK
Date: Mon, 11 Feb 2013 20:36:06 GMT
Expires: -1
Cache-Control: private, max-age=0
Content-Type: text/html; charset=ISO-8859-1
Set-Cookie: PREF=ID=ec3eb1b4b4f31100:FF=0:TM=1360614966:LM=1360614966:S=EjQCjjdv07A6PRtw; expires=Wed, 11-Feb-2015 20:36:06 GMT; path=/; domain=.google.com
Set-Cookie: NID=67=neiRZQ9fctd6NqzdKNdRMzfBqk-yAaxxxruYrnsvTcJeG7q8TJm5Ybv1UZ2ZV_ZheYhy-RwgAppHUh1VhIz4KOcFbcl8-0DvtPYXxaiSQmYvXGEKqeh4glhqvhOdxJKB; expires=Tue, 13-Aug-2013 20:36:06 GMT; path=/; domain=.google.com; HttpOnly
P3P: CP="This is not a P3P policy! See http://www.google.com/support/accounts/bin/answer.py?hl=en&answer=151657 for more info."
Server: gws
X-XSS-Protection: 1; mode=block
X-Frame-Options: SAMEORIGIN
Transfer-Encoding: chunked 
```

curl -v [http://google.com/](http://google.com/)

```
$ curl -v http://google.com/
* About to connect() to google.com port 80 (#0)
*   Trying 66.102.7.104... connected
* Connected to google.com (66.102.7.104) port 80 (#0)
> GET / HTTP/1.1
> User-Agent: curl/7.16.4 (i386-apple-darwin9.0) libcurl/7.16.4 OpenSSL/0.9.7l zlib/1.2.3
> Host: google.com
> Accept: */*
> 
< HTTP/1.1 301 Moved Permanently
< Location: http://www.google.com/
< Content-Type: text/html; charset=UTF-8
< Date: Thu, 15 Jul 2010 06:06:52 GMT
< Expires: Sat, 14 Aug 2010 06:06:52 GMT
< Cache-Control: public, max-age=2592000
< Server: gws
< Content-Length: 219
< X-XSS-Protection: 1; mode=block
< 
<HTML><HEAD><meta http-equiv="content-type" content="text/html;charset=utf-8">
<TITLE>301 Moved</TITLE></HEAD><BODY>
<H1>301 Moved</H1>
The document has moved
<A HREF="http://www.google.com/">here</A>.
</BODY></HTML>
* Connection #0 to host google.com left intact
* Closing connection #0 
```

# php - 我收到一个 PHP 错误，但我不明白为什么我得到它

> ID：14820287
> 
> 赞同：0
> 
> 时间：2013-02-11T20:29:00.293
> 
> 标签：php

我正在制作我的第一个网站，其中涉及一些 PHP，每次按下前一页上的操作按钮时都会出现错误。这是错误的文本：

> 警告：require_once(./include/config.php) [function.require-once]：无法打开流：/var/www/u5161155/data/www/sh0rt.ru/submit.php 中没有这样的文件或目录2号线
> 
> 致命错误：require_once() [function.require]：在 /var/www/u5161155/data/www/sh0rt.ru/submit 中打开所需的 './include/config.php' (include_path='.:') 失败。第 2 行的 php

这是我的代码

```
<?php
require_once "./include/config.php";
require_once "./include/ShortUrl.php";

if ($_SERVER["REQUEST_METHOD"] != "POST" || empty($_POST["url"])) {
    header("Location: shorten.html");
    exit;
} 

try {
    $pdo = new PDO(DB_PDODRIVER . ":host=" . DB_HOST . ";dbname=" . DB_DATABASE,
        DB_USERNAME, DB_PASSWORD);
}
catch (\PDOException $e) {
    header("Location: error.html");
    exit;
}

$shortUrl = new ShortUrl($pdo);
try {
    $code = $shortUrl->urlToShortCode($_POST["url"]);
}
catch (\Exception $e) {
    header("Location: error.html");
    exit;
}
$url = SHORTURL_PREFIX . $code;

echo <<<ENDHTML
<html>
 <head>
  <title>URL Shortener</title>
 </head>
 <body>
  <p><strong>Short URL:</strong> <a href="$url">$url</a></p>
 </body>
</html>
ENDHTML; 
```

我理解一个错误，但我不明白为什么它没有打开它。我在正确的目录中得到了正确的文件。这就是我寻求帮助的原因

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:38:30.460

尝试更改第一行：

```
 require_once "./include/config.php";
     require_once "./include/ShortUrl.php"; 
```

至

```
 require_once "/var/www/u5161155/data/www/sh0rt.ru/include/config.php";
     require_once "/var/www/u5161155/data/www/sh0rt.ru/include/ShortUrl.php"; 
```

# html - 如何在我的网站上居中导航栏

> ID：14820289
> 
> 赞同：0
> 
> 时间：2013-02-11T20:29:10.403
> 
> 标签：html, css

我已经检查了很多教程，但我不知道如何在我的网站上集中 ul 列表。

```
<!DOCTYPE HTML>
<html lang="eng">
<head>
<meta charset="utf-8">
<title>test website</title>
<meta name="viewport" content="width=device-width; initial-scale=1.0">

<!-- html5.js for IE less than 9 -->
<!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<!-- css3-mediaqueries.js for IE less than 9 -->    
<!--[if lt IE 9]>
    <script src="http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js"></script>
<![endif]-->

<link href="styles/styles.css" rel="stylesheet" type="text/css">
</head>
<body>
<div id="pagewrap">
    <header id="header">

        <nav>
        <ul id="main-nav">
        <li><a href="#">test1</a></li>
        <li><a href="#">test2</a></li>
        <li><a href="#">test3</a></li>
        <li><a href="#">test4</a></li>
        <li><a href="#">test5</a></li>

        </ul>
        </nav>
     </header>   

</div>

</body>
</html>

/* CSS Document */

/*RESET*****************************/
html,body,div,h1,h2,p,img,nav{
margin:0;
padding:0;  
}

body{
background-color:#D1D1D1;
}

#pagewrap{
background-color:#FFF;
width:980px;
margin:60px auto auto;
padding: 10px;
-webkit-box-shadow:0 0 3px 2px rgba(0, 0, 0, 0.15);
-moz-box-shadow:0 0 3px 2px rgba(0, 0, 0, 0.15);
box-shadow:0 0 3px 2px rgba(0, 0, 0, 0.15);
}

#header{
    position:relative;
    width:80%;
    height:180px;
}

/*.nav{
    position:absolute;
    text-align:center;
    top:100px;
}*/

#main-nav{
    position: absolute;
    text-align:center;
    margin:0; 
    padding:0;
    list-style-type:none;
    border: 2px solid red;
}

#main-nav li {
    margin: 0;
    padding: 0;
    display:block;
    float: left;

}

#main-nav a{
    text-decoration: none;
    text-align:center;
    padding:0 1em;
} 
```

这是代码 [http://jsfiddle.net/YS58q/13/](http://jsfiddle.net/YS58q/13/)

我试图用 .nav 将其居中，但没有成功。如果有人可以提出更好的解决方案，我将不胜感激。我使用了相对/绝对定位。是否可以仅通过相对定位来做到这一点。我计划使用媒体查询进行响应式设计，非常感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:34:22.850

一种选择是：http: [//jsfiddle.net/YS58q/18/](http://jsfiddle.net/YS58q/18/)

```
nav {
    width: 1px;
    margin: 0 auto;
} 
```

# architecture - Azure 上的高流量、每天 5 亿次以上的点击（类似分析）应用程序架构

> ID：14820290
> 
> 赞同：1
> 
> 时间：2013-02-11T20:29:10.887
> 
> 标签：architecture, azure, analytics, azure-table-storage

这个问题是针对有经验的建筑师的——大男孩是怎么做的？:)

**概述**

我正在构建这个基于 .NET 的高流量、类似分析的解决方案，它最终将托管在 Azure 上。假设这个 Web 应用程序每天将收到 5 亿+“事务”，这些对我们的服务器的访问速度非常快，几乎不需要对每个数据库进行查询，几乎所有繁重的工作都将在服务器端按设定的时间间隔完成. 我很确定我必须实现某种队列来存储所有传入的命中并在后端实现“聚合器”，该后端将每分钟左右运行一次以处理队列中的新项目。

**建议的解决方案**

如果我错了，请纠正我，但我认为将这些事务直接写入数据库（某种日志表）将是一个错误，所以我将使用 Azure 存储帐户（表）作为我的队列并分拆几个Azure 工作角色（根据需要）来处理数据和更新数据库。想法？

重要的是要记住，Azure 存储主要基于每个事务模型，因此我必须为所有传入事务（写入）和聚合器（读取）的事务付费。因此，每天 5 亿次写入和 5 亿次读取，这大约是 100 美元/天。那有意义吗？此外，通过使用 Azure 存储，我可以读取一组行（以考虑单个事务）还是我必须同时读取队列一条记录？

最后，为每一行执行数据库插入/更新对于我的聚合器来说是一种过度杀伤，所以我认为每个聚合器都应该聚合内存中的工作负载，然后将其清除到数据库中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T21:02:41.663

我同意更新存储中的分析数据的请求应该通过丢弃到队列的消息来完成，以便工作角色可以在后台处理这些消息而不会影响实时用户。您甚至可以使用 AzureWatch @ [http://www.paraleap.com之类的工具，根据队列中的数据量自动扩展服务器](http://www.paraleap.com)

我敦促您考虑每个队列每秒最多可以支持 500 个事务的事实。如果您需要更多，请考虑托管多个队列并为您的队列设置一个模式（可能就像拥有可以随机连接的 X 个队列一样简单：“Queue001..Queue100”。工作角色将检查所有 100 个队列，而您的 Web 服务器将生成 1 到 100 之间的随机数并连接到该队列

交易量实际上可能要大得多：每天 5 亿次点击您的服务可能意味着：

*   500M 写入队列
*   从队列中读取 500M
*   n * 500M 写入存储（其中 n 可能是倍数，如果您的存储结构要求您在写出之前先读取内容，允许批量事务等）
*   x * 24*60*60/delay 检查队列以查看是否存在新消息（x 是队列数，延迟是每次检查之间的延迟秒数）

现在，如果您希望最小化队列的写入/读取量，请考虑将来自 Web 服务器的请求缓冲到队列中，以便不是每个数据点都作为单独的消息发送，而是将一堆一起发送。这将限制对也算作事务（读取和写入）的队列的命中。您可以在您的网站中使用带有静态变量的锁来捕获命中，以便所有内容都存储在内存中，然后不时刷新到队列中

如果您希望最小化表存储的存储事务量，请考虑尽可能使用本地存储来预聚合数据，并且只将预聚合的数据同步到表存储。这可能会有所帮助

每当我们缓冲数据写入时，假设如果带有缓冲数据的机器由于某种原因出现故障并且缓冲区尚未被刷新，则可能会丢失一些数据。由于我们在这里不处理货币交易，我假设您对数据丢失的容忍度略高于 0，并且写入缓冲所节省的成本抵消了潜在的罕见数据丢失

高温高压

# android - Android ViewPagerIndicator Checkboxes 错误标记

> ID：14820293
> 
> 赞同：1
> 
> 时间：2013-02-11T20:29:27.563
> 
> 标签：android, viewpagerindicator

我正在开发一个使用 ViewPagerIndicator 的小型列表应用程序。每个页面使用相同的 LIstFragment，但填充了来自数据库的不同数据。每个 Listitem 包含一个复选框、文本视图和一个 ImageButton。

一切正常，但列表中位于内存 (0, 1) 中的复选框具有不同的标记。它们是蓝色的，但其他列表上的复选框带有绿色标记。

我认为自定义复选框图像可以解决此问题，但没有帮助。现在复选框看起来像这样：

![在此处输入图像描述](../Images/2033279f2a05d019bb4ef33430ee712a.png)

也许有人有线索，可以给我一个提示或我可以阅读的东西。

# ios - iOS View Controller Containment 父/子调用跳舞

> ID：14820295
> 
> 赞同：0
> 
> 时间：2013-02-11T20:29:41.663
> 
> 标签：ios, uiviewcontroller

我正在尝试制作一个与导航控制器类似的容器视图控制器。当我向堆栈添加一些东西时，我该如何处理已经存在的视图控制器？

它仍然是我的孩子，但我不希望它是视图层次结构中的视图。我是否应该在其上调用 removeFromParentViewController，并在该堆栈中保留一个单独的堆栈？所以当上面的视图被弹出时，我可以检查我应该推回哪个视图以返回到前一个视图。

或者我应该只删除它的视图，而不调用 removeFromParentViewController，然后添加另一个子控制器，并将它的视图添加到容器视图层次结构中？

基本上我该怎么处理不在屏幕上的控制器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:44:00.250

“堆栈”只是导航控制器用来跟踪其视图控制器的数组。如果您要构建自己的，则还需要一个数组。导航控制器的工作方式，当一个控制器被推入时，该控制器被添加到数组中，如果一个被弹出，那个控制器被从数组中删除。当你进行转换时，离开屏幕的那个应该调用 removeFromParentViewController，所以它不再在层次结构中（但如果它因为另一个被推送而消失，你会把它留在你的数组中——这就是控制器知道的方式在流行音乐中回到哪个）。您应该使用 transitionFromViewController:toViewController:duration:options:animations:completion: 来进行从一个控制器到下一个控制器的转换。

# mysql - 在 group_concat 中包含空结果

> ID：14820298
> 
> 赞同：2
> 
> 时间：2013-02-11T20:29:49.010
> 
> 标签：mysql, group-concat, isnull, ifnull

我有两张这样的桌子

**profile_answers**

```
+---------+------------+
|      id | class_name |
+---------+------------+
|       1 | Class 1    |
|       2 | Class 2    |
|       3 | Class 1    |
+---------+------------+ 
```

**教育**

```
+---------+--------------------+------------+
|      id | profile_answers_id |  sample    |
+---------+--------------------+------------+
|       1 | 1                  |     1234   |
|       2 | 1                  |     2334   |
|       3 | 1                  |     3434   |
+---------+------------+--------------------+ 
```

我运行了查询，

```
select educations.profile_answer_id, GROUP_CONCAT(educations.sample) from educations
LEFT JOIN profile_answers ON educations.profile_answers_id = profile_answers.id 
```

我有

```
+--------+--------------------+-------------+
|      id | sample                          | 
+---------+--------------------+------------+
|       1 | 1234,2334,3434                  |
+---------+------------+--------------------+ 
```

其实我想要

```
+--------+--------------------+-------------+
|      id | sample                          | 
+---------+--------------------+------------+
|       1 | 1234,2334,3434                  |
|       2 | NULL                            |
|       3 | NULL                            |  
+---------+------------+--------------------+ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T20:57:03.343

```
SELECT id,IFNULL(samples,'NULL') sample FROM 
(
    SELECT
        AA.id,
        GROUP_CONCAT(DISTINCT BB.sample) samples
    FROM
        profile_answers AA LEFT JOIN educations BB
        ON AA.id = BB.profile_answers_id
    GROUP BY AA.id
) A; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T20:33:09.180

看起来您缺少 GROUP BY：

```
select profile_answers.id, GROUP_CONCAT(educations.sample) 
from profile_answers
LEFT JOIN educations ON educations.profile_answers_id = profile_answers.id
GROUP BY profile_answers.id 
```

我还更改了您的 JOIN 以使 profile_answers 表成为您的主表。

祝你好运。

# xaml - 在gridview中绑定用户控件DataContext

> ID：14820299
> 
> 赞同：1
> 
> 时间：2013-02-11T20:29:56.723
> 
> 标签：xaml, windows-runtime, winrt-xaml

我希望这真的很明显。我在已连接到 gridview 的可观察集合中有一个视图模型列表。该视图很复杂，带有动画等，因此我将其包装在用户控件中。

我的 xml 看起来像这样：-

```
<GridView Grid.Row="1" ItemsSource="{Binding Tiles, Mode=OneWay}">                              
    <GridView.ItemTemplate>
        <DataTemplate>
                <local:Tile DataContext="{Binding}" />
        </DataTemplate>
    </GridView.ItemTemplate>
</GridView> 
```

但瓦片数据上下文始终为空。

有没有一种简单的方法可以让这段代码工作？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:32:38.513

尝试删除`DataContext="{Binding}"`. 默认情况下，项目`DataContext`是`ItemsSource`集合中的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T02:26:39.597

你怎么知道`DataContext`总是空的？例如，如果您要在 的构造函数中检查它`Tile`，它应该始终为 null，因为绑定过程直到控件被实例化后才会发生。

`DataContext="{Binding}"`本质上是没有意义的，就像在代码中给自己分配一个局部变量一样。它没有做任何有用的事情，但也不应该伤害任何东西。如果您的项目出现在您的内部`GridView`并且没有弄乱`DataContext`内部的任何地方，`Tile`那么`DataContext`它将是该项目的数据。

# c++ - 何时使用 addressof(x) 而不是 &x？

> ID：14820307
> 
> 赞同：83
> 
> 时间：2013-02-11T20:30:22.077
> 
> 标签：c++, addressof

我如何决定是否需要`addressof(x)`而不是`&x`在获取对象的地址时？

* * *

似乎这个问题令人困惑，因此需要澄清一下：

`addressof`显然绕过了重载的地址运算符。**我已经意识到这一点。**

我想知道的是：
**我怎么知道这是否是我真正想做的？（特别是在模板内等时）**

是否有某种“规则”可以帮助我确定何时需要`addressof`而不是`&`？
毕竟，它们都返回对象的“地址”，那么我什么时候使用哪个呢？

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2013-02-11T20:46:42.220

必要时使用`std::addressof`。可悲的是，“当你必须”包括任何时候你在模板代码中工作，并且想要将一个未知类型的变量`T`转换`T&`为一个指向该变量内存的诚实指针。

因为 C++ 委员会愚蠢地允许引用运算符的重载（几乎没有合法目的），所以用户可以用某种类型来实例化您的模板，而您不能使用引用运算符来获取实际的指针。`std::addressof`是一种解决使用这种可疑 C++ 功能的用户的方法，以便执行该语言应该保证的工作。

简而言之，这是一个针对语言愚蠢的库修复。`&`如果您想确保用户不会破坏您的代码，请在模板代码中使用它。如果可以信任您的用户不会使用这个考虑不周的功能，那么您可以使用`&`.

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-11T20:31:14.910

如果它是重载 unary 的用户定义类型`operator&`，并且您想要它的地址，请使用`addressof`.

我会说你应该总是使用`&`，因为正如你所说，如果你不这样做，它就会破坏超载的目的。*当然，除非*你对重载做了一些有意义的事情，在这种情况下你需要`addressof`（在课堂之外，你可以在里面使用`this`），但你必须非常确定你在做什么。

这里还有更多——如果你想`operator&`在类外重载（你可以），你**必须**使用`addressof`返回地址，否则会导致无限递归：

```
struct Class
{
   virtual ~Class() {}
   int x;
};

void* operator&(const Class& x)
{
    //return &x; <---- infinite recursion
    return addressof(x) + 4; //I know this isn't safe
                             //but I also know the intrinsics of my compiler
                             //and platform to know this will actually return
                             //the address to the first data member
} 
```

**我知道这不安全。**

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-11T20:31:02.807

当您想知道对象的实际地址而不是地址`operator&`重载的结果时使用它。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-02-11T20:38:40.753

仅我个人意见：

除非您是设计类及其接口的团队的一员，否则永远不要。我个人从未见过重载该运算符的充分理由。但是，如果有人设计了一个有意义的类，并假设该类是供公众使用的（也就是说，该类不仅仅在特定库中供内部使用），我希望该类可以在正常代码中工作那自然期望这`&`意味着“地址”。如果重载运算符的类没有以如此明智的方式设计，那么我就不会使用那个类。因为该类要么被破坏，要么不打算在它所属的库之外使用。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-02-11T21:34:58.710

> 毕竟，它们都返回对象的“地址”，那么我什么时候使用哪个呢？

您绝对不能保证重载`operator&`是对象的“地址”，很可能不是，或者类作者可能不会费心重载它。他们本可以重载它以返回不同的类型，或者`void`如果他们不明智地试图阻止人们获取其地址，甚至可以返回。

如果您想要一个指向*可能*已重载的对象的指针`&`（例如，因为它的类型是模板参数所以您不知道），那么请使用`std::addressof`或记录您的模板不支持不返回对象真实地址的类型作为正确的类型。

# math - 使用 DirectX 进行 3D 透视“抓取”平移

> ID：14820311
> 
> 赞同：1
> 
> 时间：2013-02-11T20:30:36.240
> 
> 标签：math, 3d, directx, direct3d

我在我们软件的 3D 视图中实现了一个平移工具，它应该很像 Photoshop 或 Acrobat Reader 的抓取工具。也就是说，当鼠标移动时，用户用鼠标抓住的点（单击并按住，然后移动鼠标）保持在鼠标光标下方。

这是一种常见的范例，之前在 SO 上被问过，[最好的答案是这个关于 OpenGL 中技术的问题](https://stackoverflow.com/questions/12097693/3d-scene-panning-in-perspective-projection-opengl)。还有[另一个也有一些提示](https://stackoverflow.com/questions/6219917/implementing-a-grab-camera-panning-tool-in-a-3d-scene)，我一直在阅读这篇内容丰富的[CodeProject 文章](http://www.codeproject.com/Articles/43005/Perfect-Panning-in-3D-Zoom-Too)。（它没有解释它的许多代码示例的变量等，但通过阅读文本，我认为我理解了这项技术。）但是，我有一些实现问题，因为我的 3D 环境的导航设置与那些文章完全不同，并且我正在寻求一些指导。

我的技术——这可能存在根本缺陷，所以请这样说——是：

*   场景“相机”存储为两个`D3DXVECTOR3`点：眼睛位置和注视点。视图矩阵是这样构造的`D3DXMatrixLookAtLH`：

    ```
    const D3DXVECTOR3 oUpVector(0.0f, 1.0f, 0.0f); // Keep up "up", always.
    D3DXMatrixLookAtLH(&m_oViewMatrix, &m_oEyePos, &m_oLook, &oUpVector); 
    ```

*   当按下鼠标按钮时，通过该像素射出一条光线并找到： 被点击的像素的坐标（在未投影的场景/世界空间中）；该射线与近平面的交点；以及近平面点与物体之间的距离，即这两点之间的长度。存储这个和鼠标位置，以及原始导航（眼睛和外观）。

    ```
    // Get the clicked-on point in unprojected (normal) world space
    D3DXVECTOR3 o3DPos;
    if (Get3DPositionAtMouse(roMousePos, o3DPos)) { // fails if nothing under the mouse

    // Mouse location when panning started
    m_oPanMouseStartPos = roMousePos;

    // Intersection at near plane (z = 0) of the ray from camera to clicked spot
    D3DXVECTOR3 oRayVector;
    CalculateRayFromPixel(m_oPanMouseStartPos, m_oPanPlaneZ0StartPos, oRayVector);

    // Store original eye and look points
    m_oPanOriginalEyePos = m_oEyePos;
    m_oPanOriginalLook = m_oLook;

    // Store the distance between near plane and the object, and the object position
    m_dPanPlaneZ0ObjectDist = fabs(D3DXVec3Length(&(o3DPos - m_oPanPlaneZ0StartPos)));
    m_oPanOriginalObjectPos = o3DPos; 
    ```

    `Get3DPositionAtMouse`是一种在鼠标下选取 3D 坐标的已知方法。`CalculateRayFromPixel`是一种已知可行的方法，它采用屏幕空间鼠标坐标并投射光线，并用近平面 (Z = 0) 处的光线交点和归一化的光线矢量填充其他两个参数。

*   当鼠标移动时，在新位置投射另一条射线，但使用旧的（原始）视图矩阵。（感谢下面的 Nico 指出这一点。）通过从近平面延伸光线来计算对象应该在哪里，计算对象和近平面之间的距离（这样，原始对象和新对象点应该在平行平面上）近平面。）移动眼睛并看坐标这么多。Eye 和 Look 是根据其原始值（开始平移时）设置的，不同之处在于原始鼠标位置和新鼠标位置。这是为了减少随着鼠标移动而通过粒状（整数）像素移动而增加或减少的任何精度损失，即它每次都计算导航的整体差异。

    ```
    // Set navigation back to original (as it was when started panning) and cast a ray for the mouse
    m_oEyePos = m_oPanOriginalEyePos;
    m_oLook = m_oPanOriginalLook;
    UpdateView();
    D3DXVECTOR3 oRayVector;
    D3DXVECTOR3 oNewPlaneZPos;
    CalculateRayFromPixel(roMousePos, oNewPlaneZPos, oRayVector);

    // Now intersect that ray (ray through the mouse pixel, using the original navigation)
    // to hit the plane the object is in.  Function uses a "line", so start at near plane
    // and the line is of the length of the far plane away
    D3DXVECTOR3 oNew3DPos;
    D3DXPlaneIntersectLine(&oNew3DPos, &m_oPanObjectPlane, &oNewPlaneZPos, &(oRayVector * GetScene().GetFarPlane()));

    // The eye/look difference /should/ be as simple as:
    //  const D3DXVECTOR3 oDiff = (m_oPanOriginalObjectPos - oNew3DPos);
    // But that lags and is slow, ie the objects trail behind.  I don't know why.  What does
    // work is to scale the from-to difference by the distance from the camera relative to
    // the whole scene distance
    const double dDist = D3DXVec3Length(&(oNew3DPos - m_oPanOriginalEyePos));
    const double dTotalDist = GetScene().GetFarPlane() - GetScene().GetNearPlane();
    const D3DXVECTOR3 oDiff = (m_oPanOriginalObjectPos - oNew3DPos) * (1.0 + (dDist / dTotalDist));

    // Adjust the eye and look points by the same amount, so orthogonally changed
    m_oEyePos = m_oPanOriginalEyePos + oDiff;
    m_oLook = m_oPanOriginalLook + oDiff; 
    ```

## 图表

这张图是我实现这个的工作草图：

![3D 平移草图](../Images/a0bef4d3f32ef91855428905943023d2.png)

并希望比文字更简单地解释上述内容。您可以看到一个移动点，以及相机必须移动的位置以使该点保持在相同的相对位置。点击的点（从相机到对象的光线）就在代表中心像素的直线前方光线的右侧。

## 问题

但是，正如您可能已经猜到的那样，这并不像我希望的那样工作。我想看到的是被点击的对象随着鼠标光标移动。我实际看到的是对象向鼠标的方向移动，但还不够，即它没有将点击的点保持在光标下方。其次，运动会闪烁和跳跃，有时会抖动多达二十或三十个像素，然后会闪烁回来。如果我`oDiff`用不变的东西代替，这不会发生。

任何展示如何使用 DirectX（D3DX、DX 矩阵顺序等）实现此功能的想法或代码示例将不胜感激。

## 编辑

下面的评论者 Nico 指出，在使用鼠标光标移动的位置计算新位置时，我需要使用原始视图矩阵。这样做有很大帮助，并且对象保持在鼠标位置附近。但是，它仍然不准确。我注意到的是，在屏幕的中心，它是精确的；随着鼠标从中心移动得越来越远，它会越来越多地离开。这似乎也根据物体的距离而改变。通过纯粹的“我不知道自己在做什么”的猜测，我将其缩放了近/远平面的一个因子以及物体的距离，这使它非常接近鼠标光标，但仍然有一些像素距离（1 到，例如，屏幕最边缘的 30 像素，这足以让人感觉不对。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T19:15:07.657

这是我解决这个问题的方法。

```
float fieldOfView = 45.0f;

float halfFOV = (fieldOfView / 2.0f) * (DEGREES_TO_RADIANS);
float distanceToObject = // compute the world space distance from the camera to the object you want to pan
float projectionToWorldScale = distanceToObject * tan( halfFov );
Vector mouseDeltaInScreenSpace = // the delta mouse in pixels that we want to pan

Vector mouseDeltaInProjectionSpace = Vector( mouseDeltaInScreenSpace.x * 2 / windowPixelSizeX, mouseDeltaInScreenSpace.y * 2 / windowPixelSizeY ); // ( the "*2" is because the projection space is from -1 to 1)

// go from normalized device coordinate space to world space (at origin)
Vector cameraDelta = -mouseDeltaInProjectionSpace * projectionToWorldScale;

// now translate your camera by "cameraDelta". 
```

请注意，这适用于视野纵横比为 1，如果垂直视野与水平视野不同，我认为您必须将“比例”分解为单独的 x 和 y 分量

另外，您提到了“查看”向量。我不确定我的数学需要如何改变，因为我的相机总是直视 z 轴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T23:36:58.040

一个问题是您计算新的 3d 位置。我不确定这是否是根本原因，但您可以尝试一下。如果没有帮助，请发表评论。

问题是您的偏移矢量不平行于 znear 平面。这是因为两条光线不平行。因此，如果 znear 后面的长度相同，则端点到 znear 平面的距离不可能相等。

您可以使用相交线定理计算偏移矢量。如果 zNearA 和 zNearB 分别是 znear 平面与射线 A 和射线 B 的交点，则定理表明：

```
Length(original_position - cam_position) / Length(offset_vector) = Length(zNearA - cam_position) / Length(zNearB - zNearA) 
```

因此

```
offset_vector = Length(original_position - cam_position) / Length(zNearA - cam_position) * (zNearB - zNearA) 
```

然后，您可以确保在平行于 znear 平面的直线上移动。

试试看它是否有帮助。

# php - 在 XML 结果中解析数组

> ID：14820314
> 
> 赞同：1
> 
> 时间：2013-02-11T20:30:50.997
> 
> 标签：php, xml, arrays, simplexml

我无法理解使用 SimpleXMLElement 打印数组结果的正确语法。从我的 xml 结果中，我必须要求用户将自己与数组中找到的一个人匹配，并且不确定执行此操作的最佳方法是什么。

示例 XML 结果：

```
[authentication] => SimpleXMLElement Object
    (
        [age] => SimpleXMLElement Object
            (
                [code] => 5
                [ambiguous] => SimpleXMLElement Object
                    (
                        [person] => Array
                            (
                                [0] => SimpleXMLElement Object
                                    (
                                        [name] => Paul  Foreman
                                        [question] => SimpleXMLElement Object
                                            (
                                                [id] => dcalc3
                                                [prompt] => What+do+the+%3Cb%3Elast+four%3C%2Fb%3E+digits+of+your+Social+Security+Number+add+up+to%3F
                                                [answer] => 5
                                            )

                                    )

                                [1] => SimpleXMLElement Object
                                    (
                                        [name] => Paul  Foreman
                                        [question] => SimpleXMLElement Object
                                            (
                                                [id] => dcalc3
                                                [prompt] => What+do+the+%3Cb%3Elast+four%3C%2Fb%3E+digits+of+your+Social+Security+Number+add+up+to%3F
                                                [answer] => 6
                                            )

                                    )

                            )

                    )

            )

    ) 
```

我正在寻找的解决方案：

```
<?php
$string = $xml_result;

$xml = new SimpleXMLElement($string);

$is_age_code = $xml->authentication->{'age'}->code;

if($x_is_age_code == '5'){
// code 5 means more than one match found
    // Ask user verification question
        // If answer matches question
               // Set current user as that person
}
?> 
```

我如何找出数组中有多少“人”并用数字标识它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:15:31.497

要计算使用人数：

```
echo count($xml->authentication->age->ambiguous->person); 
```

要访问一个人的子节点，请使用

```
echo $xml->authentication->age->ambiguous->person[0]->question->prompt; 
```

或使用循环：

```
foreach ($xml->authentication->age->ambiguous->person as $person) {
    echo $person->question->prompt;
} 
```

# c# - 正则表达式 - 通过换行符预测模式

> ID：14820315
> 
> 赞同：0
> 
> 时间：2013-02-11T20:30:54.240
> 
> 标签：c#, regex

仍在学习正则表达式，并且无法让我的头脑围绕前瞻概念。与我的问题类似的数据 -[匹配多行直到分隔线？](https://stackoverflow.com/questions/14738742/matching-multiple-lines-up-until-a-sepertor-line)，假设我有以下几行由用户交给我：

```
 0000AA.The horizontal coordinates are valid at the epoch date displayed above.
 0000AA.The epoch date for horizontal control is a decimal equivalence
 0000AA.of Year/Month/Day.
 0000AA
 [..] 
```

所以一个非常简单的正则表达式是`@^[0-9]{4}[A-Z]{2}\.(?<noteline>.*)`， where 会给我每一行。极好的。:) 但是，我想要一个前瞻（或条件？），它会查看下一行并告诉我该行是否包含没有“。”的代码。（即如果 NEXT 行匹配`@^[0-9]{4}[A-Z]{2}[^\.]`

尝试前瞻，我在前两行得到命中（因为下一行在代码后面有'。'）但不是最后一行。

*编辑*：使用上面的正则表达式，或者下面提供的正则表达式给了我所有的行，但我想知道是否有一个空行（带有 AA0000 代码的行，但之后没有'.'）。例如，当我到达 line 上的匹配项时`of Year/Month/Day`，我想知道**该**行是否后跟一个空行（或没有）。（例如，对于高级示例，分组名称不是空格或空。）

*编辑 2*：我可能误用了“前瞻”术语。回顾 .NET 的正则表达式，我看到了一种称为交替构造的东西，但不确定是否可以在这里使用。

谢谢！
麦克风。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:42:08.453

应用选项`RegexOptions.Multiline`。它改变了的含义`^`并使`$`它们匹配每行的开头和结尾，而不是整个字符串的开头和结尾。

```
var matches = Regex.Matches(input, 
                            @"^[0-9]{4}[A-Z]{2}\..*$?(?!^[0-9]{4}[A-Z]{2}[^.])",
                            RegexOptions.Multiline); 
```

负面展望是

```
find(?!suffix) 
```

它匹配不位于后缀之前的位置。不要逃避括号内的点`[ ]`。无论如何，括号会禁用大多数字符的特殊含义。

我还添加了`.*$?`使模式匹配直到当前行结束。`?`为了使`*` *懒惰*，这是必需的。否则它是*贪婪*的，这意味着它将尝试获取尽可能多的字符并可能一次匹配多行。

* * *

如果您只需要数字部分，则可以通过将其括在括号中来将其捕获在一个组中。

```
(^[0-9]{4}[A-Z]{2})\..*$?(?!^[0-9]{4}[A-Z]{2}[^.]) 
```

然后你可以得到这样的组

```
string number = match.Groups[1].Value; 
```

注意：#0 组代表整场比赛。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T18:31:46.287

在做了很多研究，碰巧失败之后，我现在确定它不能完成 - 或者更确切地说 - 它可以但会非常困难 - 更容易在代码中完成。

为了避免，我正在查看一个多行字符串（文档），其中*每一*行前面都有一个 6 位代码。有些行——我感兴趣的行——有一个“。” 在 6 位代码之后，然后打开文本。我希望有一种方法可以让我在一个组中的每一行，以及一个标志，让我知道下一行是否没有自由文本条目。（在 6 位代码之后没有“.”。）即两行数据输入会给我在文档上的两个匹配项。第一个匹配将在名为“notetext”的组中包含该行的文本，而“lastline”组将为空。第二行将在“notetext”中包含输入注释的第二部分，而“lastline”组将包含某些内容（任何内容，内容都无关紧要。）

据我了解，前瞻是零宽度断言，因此如果匹配，可返回值仍然为空。如果不使用前瞻，“lastline”的匹配将消耗下一行的代码，使“notetext”跳过该行（给我每隔*一行*文本。）所以，我需要一些反向引用才能恢复到.

到这个时候，简单地获取所有行并添加文本直到我到达他们笔记的末尾会更容易（代码方面）。（然后循环整个文档，它不能超过 200 行，而不是循环通过正则表达式匹配的行，并且易于阅读代码以进行未来修改将超过正则表达式可以让我获得的任何轻微的速度优势.

谢谢你们——迈克。

# unix - bsd 内核用户空间事件 kqueue

> ID：14820316
> 
> 赞同：2
> 
> 时间：2013-02-11T20:30:58.683
> 
> 标签：unix, kernel, freebsd, bsd

一开始，我想说明我并不精通 BSD 内部。现在来回答这个问题。

在 bsd 中有一种使用 kqueues 在用户空间和内核空间之间进行通信的机制。但是，我的理解是，我们可以使用 kqueue 和 kevents 来预定义事件。可以使用相同的机制来定义自定义事件吗？例如。在 Linux 中，我也许可以使用 netlink 套接字。如果我的理解有误，请纠正我。

如果 Kqueue 不是正确的解决方案，那么是否有任何其他机制允许我从内核通知用户空间。我正在寻找除自定义信号之外的其他东西。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T00:15:56.400

您可以使用 EVFILT_USER 过滤器发送用户定义的事件。参见 kqueue(2)。

# iphone - 如何在 UITableView 上加载 50 多个 youtube 视频？

> ID：14820317
> 
> 赞同：0
> 
> 时间：2013-02-11T20:31:00.617
> 
> 标签：iphone, objective-c, json, uitableview, youtube-api

我正在使用 AFNetworking 解析 UITableView 上的 JSON 数据。YouTube api 为最多 50 个视频提供 JSON 数据。我需要加载 100 多个视频，但我不知道该怎么做。

这是我用来从 API 获取文件的 url：

[http://gdata.youtube.com/feeds/api/playlists/PL7CF5B0AC3B1EB1D5?v=2&alt=jsonc&max-results=50](http://gdata.youtube.com/feeds/api/playlists/PL7CF5B0AC3B1EB1D5?v=2&alt=jsonc&max-results=50)

这是我的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSString *urlAsString = @"http://gdata.youtube.com/feeds/api/playlists/PL7CF5B0AC3B1EB1D5?v=2&alt=jsonc&max-results=50";

    NSURL *url = [NSURL URLWithString:urlAsString];

    NSURLRequest *request = [NSURLRequest requestWithURL:url];

    // This will initiate the request and parse the data using apples JSONSerialization

    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {

        self.videoMetaData = [JSON valueForKeyPath:@"data.items.video"];

        // This will have all the sq and hq thumbnails

        self.allThumbnails = [JSON valueForKeyPath:@"data.items.video.thumbnail"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:35:02.347

提供`start-index`- 选项。例如：

1.  使用此 URL 获得 50 个结果：
    `http://gdata.youtube.com/feeds/api/playlists/PL7CF5B0AC3B1EB1D5?v=2&alt=jsonc&max-results=50`
2.  通过添加以下 50 个结果`&start-index=51`：
    `http://gdata.youtube.com/feeds/api/playlists/PL7CF5B0AC3B1EB1D5?v=2&alt=jsonc&max-results=50&start-index=51`

请参阅[YouTube API v. 2.0 参考](https://developers.google.com/youtube/2.0/reference#start-indexsp)。

# android - Android JNI：根本原因 deadd00d (dvmAbort)

> ID：14820320
> 
> 赞同：8
> 
> 时间：2013-02-11T20:31:02.523
> 
> 标签：android, java-native-interface

对许多 StackOverflow 问题的评论指出，deadd00d 的故障地址表示 VM 故意中止。

```
I DEBUG   : signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr deadd00d 
```

事实上，当通过 ndk-stack 运行日志时，我看到堆栈帧的顶部解码为：

```
Stack frame #00  pc 00050b0e  /system/lib/libdvm.so (dvmAbort) 
```

然后评论说要在您的日志中更早地查看问题。我到底在寻找什么——是否有特定的标签或字符串要搜索？（也许是dalvikvm？）我滚动浏览了很多页的日志，但没有找到任何相关的东西——这正常吗，还是应该在故障发生之前？

deadd00d 最常发生在对 GetObjectClass() 的特定调用中。我曾尝试在该行之前立即调用 env->ExceptionCheck ，但它没有报告任何先前的错误。

我也试过打开 CheckJNI

```
adb shell setprop debug.checkjni 1 
```

根据[此处](http://android-developers.blogspot.com/2011/07/debugging-android-jni-with-checkjni.html)和[此处](http://developer.android.com/training/articles/perf-jni.html#extended_checking)的说明，但是在杀死并重新启动应用程序时，我没有看到预期的消息

```
D Late-enabling CheckJNI 
```

反而

```
D AndroidRuntime: CheckJNI is OFF 
```

Using`adb shell getprop`表示该属性确实已打开，因此我不确定那里发生了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-07T09:15:26.353

如果是原生崩溃，你可以搜索“回溯”，它会指向你原生代码方法崩溃的地方，而不是你应该分析方法，

# neo4j - 如何加快解析 Neo4j ExecutionResult 集？

> ID：14820325
> 
> 赞同：0
> 
> 时间：2013-02-11T20:31:16.670
> 
> 标签：neo4j

我正在运行表现良好的两部分 Neo4j 搜索。但是，ExecutionResult 集的实际解析比 Cypher 查询花费的时间长 8 或 10 倍。我正在循环执行 ExecutionResult 映射，如下所示：

```
result = engine.execute("START facility=node({id}), service=node({serviceIds}) WHERE    facility-->service RETURN facility.name as facilityName, service.name as serviceName", cypherParams);

for ( Map<String, Object> row : result )
{           
    sb.append((String) row.get("facilityName")+" : " + (String) row.get("serviceName") + "<BR/>" );
} 
```

有什么建议可以加快速度吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:04:03.800

您需要访问实体还是使用节点就足够了（从而使用核心 API）？在后一种情况下，您可以使用比 Cypher 更快的遍历 API。

我不确定你的用例是什么，但根据场景，你可能会做这样的事情：

```
 for (final Path position : Traversal.description().depthFirst()
       .relationships(YOUR_RELATION_TYPE, Direction.INCOMING)
       .uniqueness(Uniqueness.NODE_RECENT)
       .evaluator(Evaluators.toDepth(1)
       .traverse(facilityNode,serviceNode)) {
        // do something like e.g. position.endNode().getProperty("name")
    } 
```

# linux - mkdir $HOME/ 错误

> ID：14820329
> 
> 赞同：0
> 
> 时间：2013-02-11T20:31:37.843
> 
> 标签：linux, bash

我尝试了一个在基于 Linux 的发行版（Linux mint）中工作但在另一个（Fedora）中不起作用的单行脚本。我在我的 bash 脚本中输入了以下行。

```
mkdir $HOME/folder123 
```

我收到的错误：

```
bash: create.sh: No such file or directory 
```

我尝试自己创建一个文件夹，它给了我一个权限被拒绝？

希望清除事物：mkdir 在脚本 create.sh 中，我在终端中使用命令 bash create.sh 运行它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:41:53.490

如果我正确解释了您的帖子，则您有一个`create.sh`包含的文件`mkdir $HOME/folder123`，并且您正在尝试通过键入来运行它`create.sh`。

要执行一个脚本，`chmod +x yourscript.sh`然后运行它，`./yourscript.sh`如果它在当前目录中，或者`/home/whatever/yourdir/yourscript.sh`如果它在另一个目录中。

为了使其`yourscript.sh`正常工作，您必须将它放在 $PATH 中的目录中侦听。

您可以通过将其复制到 中列出的任何目录来执行此操作`echo $PATH`。

或者，您可以创建一个新目录，例如`mkdir /home/you/bin`然后`export PATH="$PATH:/home/you/bin"`在`~/.bashrc`. 还要确保`~/.bash_profile`包含该行`source .bashrc`。然后注销并重新登录。

# mysql - MySQL将列更改为唯一

> ID：14820333
> 
> 赞同：0
> 
> 时间：2013-02-11T20:31:44.410
> 
> 标签：mysql, sql, database, unique, alter

我有一个保存用户个人资料信息的数据库表。有时，当用户注册时，他们会因具有相同记录的额外列而重复，有时则不会。

所以，我想知道我是否将唯一性放在电子邮件列上，以确保用户在注册时不会重复。

我认为应该是这样的：

```
ALTER TABLE users ADD UNIQUE idx_row_unique(email); 
```

但是如果唯一给出错误，我该如何撤消它？

就是怕我改了之后不知道怎么撤销了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:35:06.253

如果有重复的电子邮件，alter table 应该会失败。所以你是安全的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T20:36:37.740

我会先导出表结构和数据。这样，如果你需要把它放回去，你就有了 SQL。

# objective-c - NSAlert 调整窗口大小

> ID：14820335
> 
> 赞同：4
> 
> 时间：2013-02-11T20:31:47.453
> 
> 标签：objective-c, cocoa, nsalert

我有几个带有不同文本的 NSAlert 对话框。我想将警报窗口宽度调整为文本，以使文本不换行。因此我使用这段代码来计算字符串的宽度：

```
NSSize size = [myString sizeWithAttributes:@{NSFontAttributeName: [NSFont systemFontOfSize:[NSFont systemFontSize]]}]; 
```

然后我尝试调整警报的窗口：

```
NSAlert *alert = [NSAlert alertWithMessageText:...
...
NSPanel *panel = alert.window;
NSRect frame = panel.frame;
float x = ((NSTextField*)[[((NSPanel*)(alert.window)).contentView subviews] objectAtIndex:5]).frame.origin.x;    //the x-position of the NSTextField
frame.size.width = size.width + x;
[alert.window setFrame:frame display:YES]; 
```

此代码有效，但只是第一次，我使用此代码调用该方法。如果我使用另一个字符串并再次调用该方法，则窗口将不会调整大小（尽管计算出的宽度会有所不同）。

有什么想法，我如何调整 NSAlert 窗口的大小？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-10-22T07:13:16.907

可以通过添加足够宽度的附件视图来扩大 NSAlert：

```
NSAlert *alert = [[[NSAlert alloc] init] autorelease];
alert.accessoryView = [[[NSView alloc] initWithFrame:NSMakeRect(0, 0, 500, 0)] autorelease]; 
```

# android - Google Maps Android Api v2 的问题

> ID：14820339
> 
> 赞同：0
> 
> 时间：2013-02-11T20:31:58.950
> 
> 标签：android, google-maps-android-api-2

我一直在尝试实现一个示例应用程序以研究 Google 地图 API 的工作原理。我对配置本身感到震惊。我似乎无法运行该应用程序。

这是我在 Github 上的代码：-

[https://github.com/siva54/SampleMapApplication](https://github.com/siva54/SampleMapApplication)

这是我的日志：-

```
02-11 15:09:07.492: I/Process(10080): Sending signal. PID: 10080 SIG: 9
02-11 15:09:17.012: E/dalvikvm(10364): Could not find class 'com.google.android.gms.maps.model.MarkerOptions', referenced from method     com.myapp.gasapplication.MainActivity.setUpMap
02-11 15:09:17.012: W/dalvikvm(10364): VFY: unable to resolve new-instance 455 (Lcom/google/android/gms/maps/model/MarkerOptions;) in Lcom/myapp/gasapplication/MainActivity;
02-11 15:09:17.012: D/dalvikvm(10364): VFY: replacing opcode 0x22 at 0x0004
02-11 15:09:17.012: E/dalvikvm(10364): Could not find class 'com.google.android.gms.maps.SupportMapFragment', referenced from method com.myapp.gasapplication.MainActivity.setUpMapIfNeeded
02-11 15:09:17.012: W/dalvikvm(10364): VFY: unable to resolve check-cast 452 (Lcom/google/android/gms/maps/SupportMapFragment;) in Lcom/myapp/gasapplication/MainActivity;
02-11 15:09:17.012: D/dalvikvm(10364): VFY: replacing opcode 0x1f at 0x000e
02-11 15:09:17.012: D/dalvikvm(10364): DexOpt: unable to opt direct call 0x0cd0 at 0x06 in Lcom/myapp/gasapplication/MainActivity;.setUpMap
02-11 15:09:17.022: D/dalvikvm(10364): DexOpt: unable to opt direct call 0x0ccf at 0x0b in Lcom/myapp/gasapplication/MainActivity;.setUpMap
02-11 15:09:17.072: D/AndroidRuntime(10364): Shutting down VM
02-11 15:09:17.072: W/dalvikvm(10364): threadid=1: thread exiting with uncaught exception (group=0x40e02930)
02-11 15:09:17.082: E/AndroidRuntime(10364): FATAL EXCEPTION: main
02-11 15:09:17.082: E/AndroidRuntime(10364): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.myapp.gasapplication/com.myapp.gasapplication.MainActivity}: android.view.InflateException: Binary XML file line #7: Error inflating class fragment
02-11 15:09:17.082: E/AndroidRuntime(10364):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
02-11 15:09:17.082: E/AndroidRuntime(10364):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
02-11 15:09:17.082: E/AndroidRuntime(10364):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
02-11 15:09:17.082: E/AndroidRuntime(10364):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
02-11 15:09:17.082: E/AndroidRuntime(10364):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-11 15:09:17.082: E/AndroidRuntime(10364):    at android.os.Looper.loop(Looper.java:137)
02-11 15:09:17.082: E/AndroidRuntime(10364):    at android.app.ActivityThread.main(ActivityThread.java:5039)
02-11 15:09:17.082: E/AndroidRuntime(10364):    at java.lang.reflect.Method.invokeNative(Native Method)
02-11 15:09:17.082: E/AndroidRuntime(10364):    at java.lang.reflect.Method.invoke(Method.java:511)
02-11 15:09:17.082: E/AndroidRuntime(10364):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-11 15:09:17.082: E/AndroidRuntime(10364):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-11 15:09:17.082: E/AndroidRuntime(10364):    at dalvik.system.NativeStart.main(Native Method)
02-11 15:09:17.082: E/AndroidRuntime(10364): Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class fragment
02-11 15:09:17.082: E/AndroidRuntime(10364):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704)
02-11 15:09:17.082: E/AndroidRuntime(10364):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
02-11 15:09:17.082: E/AndroidRuntime(10364):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
02-11 15:09:17.082: E/AndroidRuntime(10364):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
02-11 15:09:17.082: E/AndroidRuntime(10364):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
02-11 15:09:17.082: E/AndroidRuntime(10364):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
02-11 15:09:17.082: E/AndroidRuntime(10364):    at android.app.Activity.setContentView(Activity.java:1881)
02-11 15:09:17.082: E/AndroidRuntime(10364):    at com.myapp.gasapplication.MainActivity.onCreate(MainActivity.java:25)
02-11 15:09:17.082: E/AndroidRuntime(10364):    at android.app.Activity.performCreate(Activity.java:5104)
02-11 15:09:17.082: E/AndroidRuntime(10364):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
02-11 15:09:17.082: E/AndroidRuntime(10364):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
02-11 15:09:17.082: E/AndroidRuntime(10364):    ... 11 more
02-11 15:09:17.082: E/AndroidRuntime(10364): Caused by: android.support.v4.app.Fragment$InstantiationException: Unable to instantiate fragment com.google.android.gms.maps.SupportMapFragment: make sure class name exists, is public, and has an empty constructor that is public
02-11 15:09:17.082: E/AndroidRuntime(10364):    at android.support.v4.app.Fragment.instantiate(Fragment.java:401)
02-11 15:09:17.082: E/AndroidRuntime(10364):    at android.support.v4.app.Fragment.instantiate(Fragment.java:369)
02-11 15:09:17.082: E/AndroidRuntime(10364):    at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:272)
02-11 15:09:17.082: E/AndroidRuntime(10364):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:676)
02-11 15:09:17.082: E/AndroidRuntime(10364):    ... 21 more
02-11 15:09:17.082: E/AndroidRuntime(10364): Caused by: java.lang.ClassNotFoundException: Didn't find class "com.google.android.gms.maps.SupportMapFragment" on path: /data/app/com.myapp.gasapplication-1.apk
02-11 15:09:17.082: E/AndroidRuntime(10364):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:65)
02-11 15:09:17.082: E/AndroidRuntime(10364):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
02-11 15:09:17.082: E/AndroidRuntime(10364):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
02-11 15:09:17.082: E/AndroidRuntime(10364):    at android.support.v4.app.Fragment.instantiate(Fragment.java:391)
02-11 15:09:17.082: E/AndroidRuntime(10364):    ... 24 more
02-11 15:10:58.032: E/dalvikvm(10887): Could not find class 'com.google.android.gms.maps.model.MarkerOptions', referenced from method com.myapp.gasapplication.MainActivity.setUpMap
02-11 15:10:58.032: W/dalvikvm(10887): VFY: unable to resolve new-instance 455 (Lcom/google/android/gms/maps/model/MarkerOptions;) in Lcom/myapp/gasapplication/MainActivity;
02-11 15:10:58.032: D/dalvikvm(10887): VFY: replacing opcode 0x22 at 0x0004
02-11 15:10:58.032: E/dalvikvm(10887): Could not find class 'com.google.android.gms.maps.SupportMapFragment', referenced from method com.myapp.gasapplication.MainActivity.setUpMapIfNeeded
02-11 15:10:58.032: W/dalvikvm(10887): VFY: unable to resolve check-cast 452 (Lcom/google/android/gms/maps/SupportMapFragment;) in Lcom/myapp/gasapplication/MainActivity;
02-11 15:10:58.032: D/dalvikvm(10887): VFY: replacing opcode 0x1f at 0x000e
02-11 15:10:58.032: D/dalvikvm(10887): DexOpt: unable to opt direct call 0x0cd0 at 0x06 in Lcom/myapp/gasapplication/MainActivity;.setUpMap
02-11 15:10:58.032: D/dalvikvm(10887): DexOpt: unable to opt direct call 0x0ccf at 0x0b in Lcom/myapp/gasapplication/MainActivity;.setUpMap
02-11 15:10:58.092: D/AndroidRuntime(10887): Shutting down VM
02-11 15:10:58.092: W/dalvikvm(10887): threadid=1: thread exiting with uncaught exception (group=0x40e02930)
02-11 15:10:58.092: E/AndroidRuntime(10887): FATAL EXCEPTION: main
02-11 15:10:58.092: E/AndroidRuntime(10887): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.myapp.gasapplication/com.myapp.gasapplication.MainActivity}: android.view.InflateException: Binary XML file line #7: Error inflating class fragment
02-11 15:10:58.092: E/AndroidRuntime(10887):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
02-11 15:10:58.092: E/AndroidRuntime(10887):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
02-11 15:10:58.092: E/AndroidRuntime(10887):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
02-11 15:10:58.092: E/AndroidRuntime(10887):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
02-11 15:10:58.092: E/AndroidRuntime(10887):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-11 15:10:58.092: E/AndroidRuntime(10887):    at android.os.Looper.loop(Looper.java:137)
02-11 15:10:58.092: E/AndroidRuntime(10887):    at android.app.ActivityThread.main(ActivityThread.java:5039)
02-11 15:10:58.092: E/AndroidRuntime(10887):    at java.lang.reflect.Method.invokeNative(Native Method)
02-11 15:10:58.092: E/AndroidRuntime(10887):    at java.lang.reflect.Method.invoke(Method.java:511)
02-11 15:10:58.092: E/AndroidRuntime(10887):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-11 15:10:58.092: E/AndroidRuntime(10887):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-11 15:10:58.092: E/AndroidRuntime(10887):    at dalvik.system.NativeStart.main(Native Method)
02-11 15:10:58.092: E/AndroidRuntime(10887): Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class fragment
02-11 15:10:58.092: E/AndroidRuntime(10887):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704)
02-11 15:10:58.092: E/AndroidRuntime(10887):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
02-11 15:10:58.092: E/AndroidRuntime(10887):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
02-11 15:10:58.092: E/AndroidRuntime(10887):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
02-11 15:10:58.092: E/AndroidRuntime(10887):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
02-11 15:10:58.092: E/AndroidRuntime(10887):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
02-11 15:10:58.092: E/AndroidRuntime(10887):    at android.app.Activity.setContentView(Activity.java:1881)
02-11 15:10:58.092: E/AndroidRuntime(10887):    at com.myapp.gasapplication.MainActivity.onCreate(MainActivity.java:25)
02-11 15:10:58.092: E/AndroidRuntime(10887):    at android.app.Activity.performCreate(Activity.java:5104)
02-11 15:10:58.092: E/AndroidRuntime(10887):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
02-11 15:10:58.092: E/AndroidRuntime(10887):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
02-11 15:10:58.092: E/AndroidRuntime(10887):    ... 11 more
02-11 15:10:58.092: E/AndroidRuntime(10887): Caused by: android.support.v4.app.Fragment$InstantiationException: Unable to instantiate fragment com.google.android.gms.maps.SupportMapFragment: make sure class name exists, is public, and has an empty constructor that is public
02-11 15:10:58.092: E/AndroidRuntime(10887):    at android.support.v4.app.Fragment.instantiate(Fragment.java:401)
02-11 15:10:58.092: E/AndroidRuntime(10887):    at android.support.v4.app.Fragment.instantiate(Fragment.java:369)
02-11 15:10:58.092: E/AndroidRuntime(10887):    at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:272)
02-11 15:10:58.092: E/AndroidRuntime(10887):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:676)
02-11 15:10:58.092: E/AndroidRuntime(10887):    ... 21 more
02-11 15:10:58.092: E/AndroidRuntime(10887): Caused by: java.lang.ClassNotFoundException: Didn't find class "com.google.android.gms.maps.SupportMapFragment" on path: /data/app/com.myapp.gasapplication-2.apk
02-11 15:10:58.092: E/AndroidRuntime(10887):    at     dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:65)
02-11 15:10:58.092: E/AndroidRuntime(10887):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
02-11 15:10:58.092: E/AndroidRuntime(10887):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
02-11 15:10:58.092: E/AndroidRuntime(10887):    at android.support.v4.app.Fragment.instantiate(Fragment.java:391)
02-11 15:10:58.092: E/AndroidRuntime(10887):    ... 24 more 
```

你能帮忙吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:03:55.690

看起来它在运行时没有找到 Google Maps 类。您是在设备还是模拟器上运行它，因为您目前无法在模拟器上使用 Google Maps v2。

如果您在设备上运行，请确保您已安装 Google Play 服务。它包含 Google Maps v2 的运行时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:51:09.680

解决了我的问题。出现问题是因为即使我引用了 google play 库，eclipse 也没有考虑该引用，并且它由一个十字标记显示。我已经在以下stackoverflow帖子的帮助下解决了这个问题：-

[在eclipse中，无法在另一个android项目中引用一个android库项目](https://stackoverflow.com/questions/5167273/in-eclipse-unable-to-reference-an-android-library-project-in-another-android-pr)

# javascript - 图像更改，在onClick函数中？可能使用jQuery？

> ID：14820341
> 
> 赞同：0
> 
> 时间：2013-02-11T20:32:03.093
> 
> 标签：javascript, jquery, html, onclick

我有一个用于更改文本区域中文本样式的工作按钮。该按钮使文本在第二次单击时变为粗体和非粗体，这很有效。

但是，我想要的是每次按下按钮时图像都会发生变化，以表明文本已应用了该格式。

按钮的 HTML 如下

```
<a href="#" class="ButtonStyling" type="button" onclick="boldTextArea()" value="Bold"}><img alt='Bold Button' src='BButton.gif'></a> 
```

我会对使用 Javascript 或 JQuery 的任何响应感兴趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T20:33:42.137

在没有看到您的 HTML 的情况下，我不得不猜测您的图像是如何显示的。

如果是图片，则通过 src 更改来源。

```
var image = document.getElementById("yourImage");
image.src = "newImage.png"; 
```

如果是背景图片，改变样式

```
image.style.backgroundImage = "url(newImage.png)"; 
```

# java - ListView OnLongClick 奇怪的行为

> ID：14820342
> 
> 赞同：0
> 
> 时间：2013-02-11T20:32:04.113
> 
> 标签：java, android, mobile, onlongclicklistener

我的项目中有一个 ListView。它有很多元素，并且它使用自定义适配器，因为它是从 Rails 服务器动态填充的。

我想在长按项目时更改 ListItem 的内容。为了实现这一点，我在 ListItem 中有 2 个布局，一个可见，一个隐藏。

问题是当我长按一个项目时，布局会发生变化（正如预期的那样），但其他 ListItems 也会受到影响，并且以相同的方式发生变化。这似乎每 5 个项目发生一次，我不知道为什么。

这是我正在使用的 LongClickListener，它位于自定义适配器的 de GetView 方法中：

```
View v = convertView;

if (v == null){
   LayoutInflater vi =
      (LayoutInflater)getActivity().getSystemService(
         Context.LAYOUT_INFLATER_SERVICE);
   v = vi.inflate(R.layout.list_item, null);
}

final LinearLayout placeInfo =
   (LinearLayout) v.findViewById(R.id.list_item_info);

final RelativeLayout placeBrief =
   (RelativeLayout)v.findViewById(R.id.list_item_brief);

v.setOnLongClickListener(new OnLongClickListener(){

   @Override public boolean onLongClick(View v) {
      placeInfo.setVisibility(View.GONE);
      placeBrief.setVisibility(View.VISIBLE);
      return false;
   }}); 
```

我将不胜感激任何帮助，非常感谢提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:25:56.843

ListViews 回收视图，因此您的所有项目只有几个视图。您正在直接更改这些视图实例之一以在 info|brief 之间切换。您需要将受影响位置的 info|brief 标志的状态保存在*其他地方*（例如，在适配器中应该是“简介”的位置列表）。这样，当您返回时，`getView()`您可以显示正确的。

# mysql - 在 group_concat 中显示空记录

> ID：14820347
> 
> 赞同：-1
> 
> 时间：2013-02-11T20:32:14.437
> 
> 标签：mysql, performance, group-concat

我有两张这样的桌子

**profile_answers**

```
+---------+------------+
|      id | class_name |
+---------+------------+
|       1 | Class 1    |
|       2 | Class 2    |
|       3 | Class 1    |
+---------+------------+ 
```

**教育**

```
+---------+--------------------+------------+
|      id | profile_answers_id |  sample    |
+---------+--------------------+------------+
|       1 | 1                  |     1234   |
|       2 | 1                  |     2334   |
|       3 | 1                  |     3434   |
+---------+------------+--------------------+ 
```

我运行了查询，

```
select educations.profile_answer_id, GROUP_CONCAT(educations.sample) from educations
LEFT JOIN profile_answers ON educations.profile_answers_id = profile_answers.id 
```

我有

```
+--------+--------------------+-------------+
|      id | sample                          | 
+---------+--------------------+------------+
|       1 | 1234,2334,3434                  |
+---------+------------+--------------------+ 
```

其实我想要

```
+--------+--------------------+-------------+
|      id | sample                          | 
+---------+--------------------+------------+
|       1 | 1234,2334,3434                  |
|       2 | NULL                            |
|       3 | NULL                            |  
+---------+------------+--------------------+ 
```

我尝试了 ISNULL、IFNULL 的组合，`group_by profile_answers.id`它们给了我正确的结果，但结果证明它在运行时间方面非常昂贵

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:37:06.707

这是我在你之前的问题中的回答...

看起来您缺少 GROUP BY：

```
select profile_answers.id, GROUP_CONCAT(educations.sample) 
from profile_answers
LEFT JOIN educations ON educations.profile_answers_id = profile_answers.id
GROUP BY profile_answers.id 
```

我还更改了您的 JOIN 以使 profile_answers 表成为您的主表。

祝你好运。

# junit - 如何在使用页面对象模型时并行运行 Junit 测试？

> ID：14820348
> 
> 赞同：0
> 
> 时间：2013-02-11T20:32:17.503
> 
> 标签：junit, testng, parallel-testing

请分享一些有价值的信息。我没有在互联网上看到任何对此进行详细解释的文档或标准参考。即使您有与 TestNG 相关的信息（使用页面对象模型），我也会很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:50:20.687

在您使用静态变量作为驱动程序对象或页面对象之前，您可以并行运行您的测试脚本，而不管您使用的是什么单元测试框架。

对于 Junit3：您必须使用构建工具来并行运行它。您只能基于类而不是方法多线程运行它

对于 Junit4：

[如何让 JUnit 测试用例并行执行？](https://stackoverflow.com/questions/5529087/how-to-make-junit-test-cases-execute-in-parallel)

在 TestNG 中：您在 testng.xml 本身中有线程选项。

# php - 如果 $_POST['a'] 是字母，如何在表单中显示“0”？

> ID：14820349
> 
> 赞同：2
> 
> 时间：2013-02-11T20:32:28.797
> 
> 标签：php, post, if-statement

所以这是我的代码，到目前为止，表单接受各种输入（字符串和整数）。例如，我如何指定：如果`$_POST['a']`是字母，则设置`$_SESSION['a']`为 0 ？

截至目前，如果我将一封信传递给表格，`$_SESSION`当我点击“更新”时，这封信仍然会被传递并被记录下来。我需要它忽略并将表单中的字母设置为 0。

index.php 是同一个文件

谢谢！

```
<?php
session_start();
if ( isset($_POST["a"]) && isset($_POST["b"]) && isset($_POST["c"]) ) {
    $_SESSION['a'] = $_POST['a'];
    $_SESSION['b'] = $_POST['b'];
    $_SESSION['c'] = $_POST['c'];
    header( 'Location: index.php' ) ;
    return;
}
?>

// ( some code... )

$a = isset($_SESSION['a']) ? $_SESSION['a'] : '0';
$b = isset($_SESSION['b']) ? $_SESSION['b'] : '0';
$c = isset($_SESSION['c']) ? $_SESSION['c'] : '0';   

// ( some code...)

<form method="post">
    <p><input type="text" name="a" size="3" value="<?php echo(htmlentities($a)); ?>"> A </p>
    <p><input type="text" name="b" size="3" value="<?php echo(htmlentities($b)); ?>"> B </p>
    <p><input type="text" name="c" size="3" value="<?php echo(htmlentities($c)); ?>"> C </p>
    <p><input type="submit" value="Update">
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T20:34:06.073

我通常使用[ctype_*](http://www.php.net/manual/en/ref.ctype.php)函数来确定 PHP 字符串中的字符类型。在这种情况下，[ctype_alpha](http://www.php.net/manual/en/function.ctype-alpha.php)。

```
if (ctype_alpha($_POST['a'])) { 
    $_SESSION['a'] = 0;
} 
```

# angularjs - 在 Angular.js 中需要移除一个特定的字符串

> ID：14820354
> 
> 赞同：0
> 
> 时间：2013-02-11T20:32:48.830
> 
> 标签：angularjs

在渲染到模板之前，我需要从我正在使用的 json 数据中删除所有 br 标记。我想知道是否有一个预先存在的角度指令可以用于此，或者是否有办法通过创建自定义过滤器来做到这一点。过滤器的文档似乎不容易适应这个用例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T03:14:38.197

您是否需要从特定对象属性中删除 <br>s，例如[从字符串中删除 HTML（在 JSON 响应中）](https://stackoverflow.com/questions/11784703/remove-html-from-a-string-in-json-response)，还是需要从 JSON 对象的所有属性中删除它们？

您应该能够将一些 JavaScript 代码放入[自定义过滤器](http://docs.angularjs.org/guide/dev_guide.templates.filters.creating_filters)（自定义过滤器将返回修改后的 JSON 对象或新对象），然后在您想要显示 JSON 时从您的 HTML 调用该过滤器。

如果您使用不同的 ng-repeat、ng-show 等指令显示 JSON 对象的不同部分，则在控制器中过滤 JSON 一次，然后在 HTML/模板中使用过滤后的版本可能更有意义。有关您的实际用例的更多信息会有所帮助。

# jquery - 个人上的 jQuery .hover()

> ID：14820356
> 
> 赞同：0
> 
> 时间：2013-02-11T20:32:51.953
> 
> 标签：jquery, hover, html-lists

我有一个关闭按钮，我想在悬停的 li 元素上显示，但我的脚本针对列表中的每个 li 而不仅仅是悬停的那个。

```
$("#sortable li").hover(function () {
$(".close").show();
},

function () {
$(".close").hide();
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T20:34:33.490

```
$("#sortable li").hover(function () {
    $(this).find(".close").show();
},

function () {
    $(this).find(".close").hide();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T20:37:37.440

```
$("#sortable li").hover(function() {
  $(".close", this).show();
},
function() {
  $(".close", this).hide();
}); 
```

# c++ - 这段代码必须有效吗？

> ID：14820358
> 
> 赞同：2
> 
> 时间：2013-02-11T20:32:55.833
> 
> 标签：c++, templates, forward-declaration

我有下一个使用 gcc 编译的示例代码（4.7.2 使用 -std=c++11）：

```
template<class C>
struct template_test
{
    C testing() const
    {
        return C();
    }
};

class A;

struct test : public template_test<A> // (1)
{};

struct A
{};

int main()
{
    test t;
} 
```

在点 (1) 处，函数`template_test<A>::testing()`被实例化，并使用 的函数`A`，特别是其默认构造函数。因此，`test`包含这个实例化的函数作为函数成员。但是，此时`A`是不完整类型，C++ 禁止使用不完整类型的成员。

这是`positive`gcc 的错误还是有其他解释？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T20:43:41.927

不仅 template_test::testing() 没有在 (1) 处实例化，它也*从未*在这个程序中实例化。模板成员仅在使用时被实例化，而 testing() 不被使用。为了使这一点更清楚，将代码稍微更改为：

```
template<class C>
struct template_test
{
    C testing() const
    {
        return C::foo();
    }
};

class A;

struct test : public template_test<A> // (1)
{};

struct A
{};

int main()
{
    test t;
} 
```

它也可以编译并运行良好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T20:38:26.470

没关系。在`testing()`您实际调用它之前，成员函数不会被实例化。要看到这一点，请尝试将其重写如下：

```
C testing() const
{
    static_assert(C::value, "Error!");
    return C();
} 
```

您会看到在您尝试调用该函数之前不会发出编译错误，但是当您添加`t.testing()`到您的`main()`函数时会触发静态断言。

换句话说，您*“在第 (1) 点`template_test<A>::testing()`实例化*函数”的前提是不正确的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T20:40:15.347

您正在实例化具有不完整类型的模板，这没关系。

成员函数`testing`返回*一个不完整类型的实例*，这是*不*正确的（但是否正确只有在实例化时才会讨论）。但是，您永远不会调用该函数，因此它永远不会被实例化，因此不会出现错误。单独实例化结构（并调用其构造函数/析构函数）是无害的。

因此，GCC 让您编译它是正确的。当您尝试调用时，它会失败`testing`。

# php - 难以获得 2 个数组的差异

> ID：14820361
> 
> 赞同：0
> 
> 时间：2013-02-11T20:33:05.063
> 
> 标签：php, arrays

我试图从 2 个数组中找出差异。但我很难做到这一点。

```
$test1 = array();
$test2 = array();

    $sizeUniqMembers1 = sizeof($test1);
    $sizeUniqMembers2 = sizeof($test2);

    print_r($test1);
    print_r($sizeUniqMembers1); 
```

我对 test1 的输出：有 50 个元素。

```
Array ( [47457] => 4 [32089] => 16 [47555] => 1 [38479] => 15 [47641] => 1 [38601] => 3 [38619] => 3 [38493] => 1 [38458] => 1 [47644] => 5 [37545] => 8 [47632] => 3 [47330] => 1 [41088] => 2 [47499] => 4 [47502] => 2 [47617] => 5 [38556] => 5 [47520] => 2 [47611] => 3 [38639] => 1 [47523] => 3 [38582] => 9 [43198] => 1 [38544] => 1 [47483] => 1 [47458] => 2 [47504] => 2 [36165] => 1 [36858] => 8 [38658] => 1 [38436] => 1 [38656] => 2 [47479] => 1 [38611] => 4 [47585] => 2 [47407] => 1 [47332] => 1 [38655] => 1 [47497] => 1 [43199] => 1 [41141] => 1 [47584] => 3 [47472] => 9 [47541] => 2 [47530] => 1 [47582] => 2 [47452] => 4 [38635] => 3 [41107] => 1 )

print_r($test2);
    print_r($sizeUniqMembers2); 
```

我对 test2 的输出：有 89 个元素。

```
Array ( [47457] => 4 [32089] => 61 [47555] => 5 [38479] => 65 [47641] => 1 [38601] => 7 [38619] => 9 [38493] => 12 [38458] => 3 [47644] => 5 [37545] => 35 [47632] => 8 [47330] => 4 [41088] => 4 [47499] => 6 [47502] => 6 [47617] => 10 [38556] => 10 [47520] => 2 [47611] => 12 [38639] => 5 [47523] => 12 [38582] => 53 [43198] => 3 [38544] => 1 [47483] => 7 [47458] => 12 [47504] => 3 [36165] => 2 [36858] => 20 [38658] => 1 [38436] => 1 [38656] => 5 [47479] => 2 [38611] => 7 [47585] => 2 [47407] => 2 [47332] => 5 [38655] => 12 [47497] => 10 [43199] => 1 [41141] => 2 [47584] => 18 [47472] => 31 [47541] => 8 [47530] => 2 [47582] => 11 [47452] => 7 [38635] => 14 [41107] => 6 [41149] => 6 [38585] => 4 [41100] => 8 [38652] => 3 [37747] => 3 [47331] => 11 [47620] => 5 [47533] => 2 [47448] => 2 [47615] => 2 [384] => 1 [37206] => 4 [43159] => 1 [47460] => 6 [38584] => 1 [37146] => 1 [47521] => 1 [36599] => 1 [47531] => 1 [38462] => 3 [38651] => 7 [38451] => 2 [36333] => 5 [38452] => 1 [47495] => 1 [38554] => 3 [43175] => 6 [38501] => 6 [38576] => 2 [47323] => 1 [38612] => 1 [38489] => 5 [36110] => 1 [47410] => 1 [38437] => 1 [47490] => 1 [37219] => 2 [47540] => 1 [38430] => 1 ) 
```

这将留下 39 个元素。所以我正在使用array_diff

```
$new_array = array_diff($test2,$test1); 
    $sizenew_array = sizeof($new_array);

print_r($new_array); 
```

但该声明只给了我 30 个元素，其中一些甚至没有什么不同。为什么会这样

这是我对 new_array 的输出：

```
Array ( [32089] => 61 [38479] => 65 [38601] => 7 [38493] => 12 [37545] => 35 [47499] => 6 [47502] => 6 [47617] => 10 [38556] => 10 [47611] => 12 [47523] => 12 [38582] => 53 [47483] => 7 [47458] => 12 [36858] => 20 [38611] => 7 [38655] => 12 [47497] => 10 [47584] => 18 [47472] => 31 [47582] => 11 [47452] => 7 [38635] => 14 [41107] => 6 [41149] => 6 [47331] => 11 [47460] => 6 [38651] => 7 [43175] => 6 [38501] => 6 ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:37:36.880

array_diff() 作用于 VALUES，并忽略 KEYS。例如

```
php > $x = array(10 => 1, 100 => 2);
php > $y = array(3 => 1);
php > var_dump(array_diff($x, $y));
array(1) {
  [100]=>
  int(2)
} 
```

只返回`2`值，因为`2`$y 数组中没有。但请注意，这`1`不是作为差异返回的，因为它存在于两个数组中，即使其对应的键不同。

# android - 强制 Horizo ntalScrollView 占据全宽和居中的孩子

> ID：14820365
> 
> 赞同：-1
> 
> 时间：2013-02-11T20:33:11.957
> 
> 标签：android, android-layout

我希望水平滚动视图占据屏幕的整个宽度并使其子视图居中。到目前为止，我最终只是将孩子们包裹起来，一切都保持对齐。我的观点是这样的：

```
<HorizontalScrollView
    android:id="@+id/mainMenu"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:background="#CD000000"
    android:fillViewport="true"
    android:gravity="center_horizontal"
    android:scrollbars="none" >

</HorizontalScrollView> 
```

在里面我们膨胀了一些看起来像这样的东西：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:gravity="center_horizontal"
    android:orientation="horizontal">

<LinearLayout
      android:id="@+id/mode_panzoom"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:orientation="vertical"
      android:paddingBottom="5dip"
      android:paddingLeft="5dip"
      android:paddingRight="5dip"
      android:minWidth="75dip"
      android:gravity="center_horizontal">

    <ImageView
            android:src="@drawable/ic_pan"
            android:layout_width="25dip"
            android:layout_height="wrap_content"
            android:text="@string/mode_panzoom"
            android:scaleType="centerInside"/>

</LinearLayout>

<LinearLayout
        android:id="@+id/mode_annotate"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:paddingBottom="5dip"
        android:paddingLeft="5dip"
        android:paddingRight="5dip"
        android:minWidth="75dip"
        android:gravity="center_horizontal">
    <ImageView
            android:src="@drawable/ic_annotate"
            android:layout_width="25dip"
            android:layout_height="wrap_content"
            android:text="@string/mode_panzoom"/>

</LinearLayout>

<LinearLayout
        android:id="@+id/mode_measure"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:paddingBottom="5dip"
        android:paddingLeft="5dip"
        android:paddingRight="5dip"
        android:minWidth="75dip"
        android:gravity="center_horizontal">
    <ImageView
            android:src="@drawable/ic_measure"
            android:layout_width="25dip"
            android:layout_height="wrap_content"
            android:text="@string/mode_panzoom"
            android:gravity="center"/>

</LinearLayout> 
```

fillviewport 似乎什么都不做，并且应用重力似乎没有效果，可能是因为它的包装内容，即使我将 fill_parent 设置为宽度。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-11T21:28:52.200

我发现了我的问题，它最终与 xml 无关。事实是我夸大了 Horizo​​ntalScrollView 的内容。之后，如果你想让你的父母正确地填充_parent，你需要通过 request_layout 强制它再次布局。否则它不会得到正确的尺寸。

# javascript - 除 IE8 / Opera 之外的所有浏览器中的不同 Margin-Top

> ID：14820366
> 
> 赞同：0
> 
> 时间：2013-02-11T20:33:18.993
> 
> 标签：javascript, html, css, gsap

我在除 IE/OPera 之外的所有浏览器中都遇到了 margin-top 这个问题，我在 -800px 上设置了一个 div 的 margin-top，如果我跟踪 IE 中的 div 位置是 -800px，就像在 Opera 中一样，但在 FF/ Chrome 它增加了 300px，所以它说 Div 在顶部边缘为 -1100px。

我已经看到最佳实践是使用填充而不是边距，但我对整个概念还是很陌生。到目前为止，我无法看到这 300 额外像素是从哪里来的。实际上，我将这个 div 放在了我的 html 的开头和 html 的末尾，就在开始正文标记的正下方（就像现在一样），就在结束正文标记上方的底部，两者都具有相同的结果额外的像素。

您可以在这里看到问题：[http](http://www.kassandrafoto.com/) ://www.kassandrafoto.com/如果您在顶部的主菜单中单击 Kassandra Cruz，您将看到额外的边距或 300 px 的间隙，我想要 FireFox 中的设计或Chrome，但在这种情况下，IE 正在按照我的意愿工作很奇怪：margin-top 是 -800 而不是 -1100（动画是正确的，因为我玩的是这种差异，但我的问题是 ¿ 那些 300 px从哪里来？

这是有问题的 div 的 CSS：

```
#kassaInfo{

width:745px;
height:671px;
color:#74CCE5;
position:absolute;
margin:0px;
z-index:1000;
left:50%;
margin-top:-800px;
background-image:url(http://www.kassandrafoto.com/images/kassaInfo.png);
background-repeat:no-repeat;

}

body{

margin:0;
width:100%;
height:100%;
background-color:#fff;
font-family:Arial, Helvetica, sans-serif;
background-image:url(http://www.kassandrafoto.com/images/bg.jpg);
background-repeat:repeat-x;
overflow:hidden;
} 
```

这是 html 代码，您可以看到 div 是第一个：

```
<body id='body'>

<div id="kassaInfo">
<div id="closeKassaBtn"></div>
</div><!--The rest of the Code-->
</body> 
```

这是第一个 Js 动作，它仅将 div 基础集中在其 witdh 的其余一半（这工作正常）所以因为它的 50% leftleft 将始终位于中心。PS。我使用了 Greensock TweenMax JS 库，但只是边距的补间运动。

```
var $kassaInfo = document.getElementById('kassaInfo');
var $kassaMargin = findMargin('kassaInfo');
TweenMax.to($kassaInfo,1,{css:{alpha:0.6, marginLeft:$kassaMargin},ease:Expo.easeOut}); 
```

这是点击事件的功能：

```
var $kassaInfo= document.getElementById('kassaInfo');
TweenMax.to($kassaInfo,1{css{alpha:1, marginTop:220},ease:Expo.easeOut}); 
```

好吧，事情来了，因为您可以看到 div 在任何人之外并且是绝对的，我不知道为什么 FF/Chrome 中有额外的空间。

感谢您提供任何可以帮助我的帮助或提示。问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T23:21:24.107

使用 top 而不是 margin-top 是正确的方法，正如我所说的，我是个新手，所以在使用 position:absolute 时我不知道有什么不同。就像是绝对的时候没有边距，只是简单的左边，顶部等。

无论如何，我无法弄清楚为什么额外的 300 像素，如果有人可以添加一些有关此的信息，将不胜感激。

问候。

# facebook-graph-api - 使用 Graph API 搜索用户 Facebook 相册

> ID：14820369
> 
> 赞同：0
> 
> 时间：2013-02-11T20:33:46.140
> 
> 标签：facebook-graph-api

我正在使用 Facebook Graph API 来查询用户相册（我正在使用适用于 Android 的 Facebook SDK）。我正在向 Facebook 发送请求我/专辑，我收到了所有专辑。收到我的结果后，我必须过滤结果列表，因为我不想显示具有属性 can_upload=false 的专辑。

我可以将任何参数与我的请求一起发送到 Facebook，它只返回属性 can_upload=true 的专辑吗？

问候

迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:40:41.617

如果您希望 Facebook 为您过滤结果，则需要使用[FQL](https://developers.facebook.com/docs/reference/fql/album)。

```
SELECT name, object_id FROM album WHERE owner= USER_ID AND can_upload = true 
```

# python - 我的表格被调用了两次，但为什么？

> ID：14820370
> 
> 赞同：1
> 
> 时间：2013-02-11T20:33:49.913
> 
> 标签：python, django, django-forms

当我尝试保存我的表单时，我遇到了这个错误：

```
Exception Value:    

Cannot assign None: "TriggerService.user" does not allow null values.

Exception Location:     /usr/local/lib/python2.6/dist-packages/django/db/models/fields/related.py in __set__, line 362 
```

这是我的模型、表格和视图

**模型.py**

```
class TriggerService(models.Model):
    """
        TriggerService
    """
    provider = models.ForeignKey(TriggerType, related_name='+', blank=True)
    consummer = models.ForeignKey(TriggerType, related_name='+', blank=True)
    description = models.CharField(max_length=200)
    user = models.ForeignKey(User)
    date_created = models.DateField(auto_now_add=True) 
```

**表格.py**

```
class TriggerServiceForm(forms.ModelForm):
"""
    TriggerService Form
"""
    class Meta:
    """
        meta to add/override anything we need
    """
    model = TriggerService
    widgets = {
        'description':\
        TextInput(attrs={'placeholder':\
                         _('A description for your new service')}),
    }
    exclude = ('user',
               'date_created')

    provider = forms.ModelChoiceField(queryset=TriggerType.objects.all())
    consummer = forms.ModelChoiceField(queryset=TriggerType.objects.all())

    def save(self, user=None):
        myobject = super(TriggerServiceForm, self).save(commit=False)
        print "i am:"
        print user
        myobject.user = user
        myobject.save() 
```

**视图.py**

```
class TriggerServiceCreateView(CreateView):
    form_class = TriggerServiceForm
    template_name = "triggers/add_trigger.html"

    @method_decorator(login_required)
    def dispatch(self, *args, **kwargs):
        return super(TriggerServiceCreateView, self).dispatch(*args, **kwargs)

    def form_valid(self, form):
        self.object = form.save(user=self.request.user)
        return super(TriggerServiceCreateView, self).form_valid(form)

    def get_context_data(self, **kwargs):
        context = super(TriggerServiceCreateView, self).get_context_data(**kwargs)
        context['action'] = 'add_trigger'
        return context 
```

就像你在我的表格中看到的那样，我添加了一个打印来跟踪这里发生的事情

奇怪的是我保存了我的表格两次，为什么？以及如何避免这种行为？

```
i am:
foxmask
i am:
None 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T20:58:06.753

这：

```
def form_valid(self, form):
    # call form.save manually: creates "i am: foxmask"
    self.object = form.save(user=self.request.user)

    # Call parent form_valid(), CreateView.form_valid() ...
    # ... which also calls form.save() without user argument !!
    # So, it should create "i am: None" because the default value for 
    # the user argument of the save() method of your form is None.
    return super(TriggerServiceCreateView, self).form_valid(form) 
```

并[`CreateView.form_valid()`](https://github.com/django/django/blob/1.4.3/django/views/generic/edit.py#L111)调用. `TriggerServiceForm.save()`_`user=None`

所以你不能在这里使用 super() ，因为它会调用直接父级。

为什么不保持简单：

```
from django import http

# ...

def form_valid(self, form):
    self.object = form.save(user=self.request.user)
    return http.HttpResponseRedirect(self.get_success_url()) 
```

# sql - 在特定情况下使用 CASE - 如何

> ID：14820381
> 
> 赞同：0
> 
> 时间：2013-02-11T20:34:43.767
> 
> 标签：sql, sql-server-2008

我正在尝试为以下情况找到合适的 SQL：

假设我们有两个表：

```
TABLE A
ID int,
TEXT varchar(200)

TABLE B
ID int,
A_NO int,
B_NO int 
```

两个表上名为“ID”的字段可以连接到链接表。

下面的 SQL：

```
SELECT
 A.ID,
 B.A_NO,
 B.B_NO
FROM
 A
LEFT JOIN
 B
ON A.ID = B.ID
ORDER BY A.ID, B.A_NO, B.B_NO 
```

给出以下结果：

![在此处输入图像描述](../Images/ab78fb6fcfe767adc7a96435c2f41339.png)

现在，问题。所要求的是在 B_NO 列中，A_NO 列的 MIN 值的值 = 1，具有相同 A_NO 值的所有其他行的值 = 0。预期结果如下：

![在此处输入图像描述](../Images/86ed7102db57ad98614f6dec1dbe678d.png)

请注意，在此示例中，我们可以为每个 B_NO 值找到两行，但也有可能超过 2 行。

我试图通过使用 CASE 来重现这些结果，但没有成功。提前感谢您的帮助，布祖基。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:54:03.683

尝试使用`CTE`and `ROW_NUMBER()`; （[演示](http://sqlfiddle.com/#!3/deac3/1)）

**请注意：**出于演示目的，我已将您的查询和表格视为您*的*`myT`联合*查询。*所以替换为 as yours 。`A` *`B`*`myT`**`A LEFT JOIN B ON A.ID = B.ID`**

 *```
;with cte as (
  select id, a_no, b_no, 
         row_number() over(partition by id,b_no order by a_no) rn
  from myT
)
select id,a_no, case when rn=1 then b_no else 0 end b_no
from cte
order by a_no

--RESULTS FROM DEMO TABLE
|      ID | A_NO | B_NO |
-------------------------
| 1031014 |    1 |    1 |
| 1031014 |    2 |    0 |
| 1031014 |    3 |    2 |
| 1031014 |    4 |    0 |
| 1031014 |    5 |    3 |
| 1031014 |    6 |    0 |
| 1031014 |    7 |    4 |
| 1031014 |    8 |    0 |
| 1031014 |    9 |    5 |
| 1031014 |   10 |    0 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T20:52:33.947

就像是

```
 select ID, a_no, b_no, 
           case when a_no = min_a_no then b_no else 0 end as new_b_no
    from 
           a left join b on a.id = b.id left join
           (Select ID, B_no, min(a_no) as min_a_no
            from  a left join b on a.id = b.id
            group by id, b_no) m on a.id = m.id and b.b_no = m.b_no
    ORDER BY A.ID, B.A_NO 
```*

# ios - 如何在 BDD 风格的 Cocoa 单元测试中共享断言方法？

> ID：14820383
> 
> 赞同：0
> 
> 时间：2013-02-11T20:34:57.687
> 
> 标签：ios, cocoa, unit-testing, bdd

在尝试 BDD 风格的单元测试时，我碰壁了，这让我退出了整个事情：每个人都使用的基本示例不包括在多个单元测试之间共享公共断言方法的方法。

通常，您可能需要设置一组条件，然后对它们执行几个参数化断言。但是块式 BDD 不允许您添加它，就像您可以在 vanilla SenTestCase 中一样。基本示例，使用 Specta，尽管这可能适用于其中任何一个：

```
// PossiblePlace 1

SpecBegin(ClassUnderTest)

    describe(@"ClassUnderTest", ^{
        __block ClassUnderTest* _target;

        beforeEach(^{
            _target = [[ClassUnderTest alloc] init];
        });

        // PossiblePlace 2

        it(@"does thing 1 under some circumstances", ^{
            // Lots of assertions
        });

        it(@"does thing 1 under some other circumstances", ^{
            // Lots of assertions again
        });

        afterEach(^{
            [_target release];
        });
    });

SpecEnd 
```

假设您有 10 个断言。我不想在每次测试中都欺骗那些人。这样，每个测试都很好并且可读，只是每个测试用例之间的内容*不同。*通常它会是这样的：

```
- (void)assert_LotsOfStuff:(BOOL)expectedResult
{
    BOOL result = [_target someOp];
    STAssertEquals(result, expectedResult, nil);
    // Etc.
} 
```

但在这里你不能这样做。如果您尝试放入`assert_LotsOfStuff`PossiblePlace 1，则断言不起作用，因为它是静态的，而不是在类中。所以你没有得到`self`所有 STAsserts 都需要的 。如果您尝试将其放入 PossiblePlace 2 中，则不能，因为它不是一个块。

我最终想出的唯一可能性是在 上做一个类别`SPTSenTestCase`，但是你必须传入每个参数。即，您不能使用 _target 或任何模拟，因为您不在测试类的上下文中。如果每个测试之间有 4 件事不同，那么 4 个参数已经足够理解了，而无需传递对这 4 件事有设置器的每一件事。

希望我解释了这个问题并说明了为什么需要它。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-03T21:34:41.990

Specta 支持共享示例，这些可用于跨多个类共享期望。此问题中的示例：[何时使用 specta 的“sharedExamplesFor”？](https://stackoverflow.com/questions/21500343/when-to-use-spectas-sharedexamplesfor)

# php - Codeignitier“set_cookie”不工作

> ID：14820391
> 
> 赞同：1
> 
> 时间：2013-02-11T20:35:23.577
> 
> 标签：php, codeigniter, session, cookies

我试图在 CodeIgnitier 中设置一个 cookie，但没有成功。我正在寻找解决方案，我在 Stackoverflow 上也发现了一些帖子，但没有一个真正为我解决了这个问题。

代码是：

```
$this->load->helper('cookie');
set_cookie('username',$this->input->post('username')); 
```

执行后没有设置 cookie。

为了避免错误的答案：'secure' 在配置文件中设置为 FALSE，其他一切也都是默认设置。根据浏览器，没有设置 cookie。只有 Codeignitier 本地 cookie - ci_session 列在那里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T21:31:22.437

通过数组设置它，如下所示：

```
$cookie = array(
    'name' => 'username',
    'value' => $this->input->post('username'),
    'expire' => '0', // expiration time 0 is until browser closes, set to large number for 'remember me' cookie
    'domain' => '.mysite.com', // set this to the domain the cookie will be under with a leading .
    'path' => '/',
    'prefix' => '',
    'secure' => FALSE
); 
$this->input->set_cookie($cookie); 
```

# html - 水平菜单中文本的垂直对齐

> ID：14820397
> 
> 赞同：1
> 
> 时间：2013-02-11T20:35:50.457
> 
> 标签：html, css, menu, vertical-alignment

我有一个菜单，其中一些链接是一行，有些是 2。我找不到垂直对齐文本的方法，它粘在顶部。任何如何修复我的代码的想法都会很棒。

的CSS：

```
ul {
    margin: 0;
    padding: 0;

}
ul.menu {
    height: 100px;
    border-left: 1px solid rgba(0,0,0,0.3);
    border-right: 1px solid rgba(255,255,255,0.3);
    float:left;
    display: table-row;   
}

ul.menu li {
    list-style: none;
    float:left;
    height: 99px;
    text-align: center;
    display: table-cell;
    vertical-align: middle;
    background: rgba(191,232,108,1);

    }

ul li a {
    display: block;
    padding: 0 20px;
    border-left: 1px solid rgba(255,255,255,0.1);
    border-right: 1px solid rgba(0,0,0,0.1);
    text-align: center;
    height:99px;
    text-decoration: none;
    font-family: Georgia, "Times New Roman", Times, serif;
    font-size: 21px;
    color: #371C1C;
    background : rgb(168,168,168);

    }

ul li a:hover {
    background: transparent none;
    color: #fff;
}

ul li.active a{
    color: #0f0;
    background:rgba(31,169,244,1);
}
span {
  display: table-cell;
  vertical-align: middle;
  } 
```

html，在这里我尝试了几种方法来打破这一行：

```
 <div class="wrapper">
<div class="container">
<ul class="menu">
<li class="active"><a href="#">Home</a></li>
<li><a href="#">About</a></li>
<li><a href="#">Contacts</a></li>
<li><a href="#"><span>bla bla<br/> blabla bla</span></a></li>
<li><a href="#">Twitter bla<br/> blabla bla</a></li>
<li><a href="#">Twitter bla blabla bla</a></li>

</ul>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T20:37:53.777

移动：

```
display: table-cell;
vertical-align: middle; 
```

.. 进入`A`-tag CSS 声明，退出`LI`.

通常，您会发现，如果将所有样式（除`display:` `position:`and之外`float:`）放在 A 标记而不是列表上，总体上您的头痛就会减少。

请参阅我的教程，[我喜欢列表](http://preview.moveable.com/jm/ilovelists/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T20:45:07.260

您可以使标签的行高与您的标签`a`的高度相同`li`

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-27T01:48:44.820

```
<div id="midalign">
    <ul>
        <li><a>Home</a></li>
        <li><a>About Us a very long link </a></li>
        <li><a>Forum</a></li>
    </ul>
</div>

CSS code:
#midalign ul {
    display:table-cell;
    vertical-align:middle;
    list-style:none;
    height:100px;
}

#midalign li {
    float:left;
    margin-right:30px;
    width:100px;
} 
```

# regex - 宝石国家使用正则表达式

> ID：14820399
> 
> 赞同：1
> 
> 时间：2013-02-11T20:35:56.420
> 
> 标签：regex, ruby-on-rails-3, country

我使用来自 hexorx 的国家宝石，这里是宝石
[国家宝石的链接](https://github.com/hexorx/countries)

我在代码 country.rb 中看到，将 Regexp 作为搜索国家/地区的参数是可能的。问题是，我什至不知道如何使用正则表达式。
例如，我想做的是给我所有以“T”开头的国家。我试试这个

```
1.9.3-p327 :013 > c = Country.find_all_countries_by_name("/(T*)/")
 => [] 
```

你怎么看，根本不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:42:55.260

所有以 T 开头的国家都类似于：

```
c = Country.find_all_countries_by_name("/^T[A-Za-z ]*/") 
```

在这种情况下，您正在执行以下操作：

```
/ - start of the match
^ - matches the start of the string (so the next character MUST be first)
T - literal T 
[A-Za-z ] - a "character class" allowing any a-z upper or lower plus space
* - repeat previous character (or character class) 0-many times 
```

这是学习正则表达式的绝佳资源：[http ://www.regular-expressions.info/](http://www.regular-expressions.info/)

# java - Java：JAI 与 JIMI

> ID：14820401
> 
> 赞同：1
> 
> 时间：2013-02-11T20:36:15.053
> 
> 标签：java, image, image-loading

我正在使用 JAI 加载 ImageIO 不支持的图像格式（例如 CUR、TIFF 等）。我从来没有尝试过 JIMI，因为它似乎使用的是本地程序（而且我不应该使用基于 JNI 的库，因为我正在制作*完全跨操作系统的*东西），而且它似乎是一个“图像操纵器” ，而不是“图像加载器”（这是我想要的），即使它可以加载图像，但我不需要任何图像操纵器。

那么，对于我尽可能*完全跨操作系统*的应用程序，我应该使用 JAI 还是 JIMI？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:57:35.720

据我所知，JAI 和 JIMI 都是跨平台的，但是 JIMI 很老了，JAI 也不是那么好用...

我会考虑 Apache [Imaging](http://commons.apache.org/imaging/formatsupport.html)项目（以前称为 Sanselan）。从链接页面可以看出，它支持 TIFF 和 ICO，这[实际上与](http://en.wikipedia.org/wiki/ICO_%28file_format%29)CUR 相同。

# css - CSS 菜单过渡

> ID：14820403
> 
> 赞同：0
> 
> 时间：2013-02-11T20:36:22.323
> 
> 标签：css, menu, navigation, css-transitions

JSFiddle：http: [//jsfiddle.net/x6bM3/](http://jsfiddle.net/x6bM3/)

如果您将鼠标悬停在产品链接上，您会看到我创建了一个下拉效果，但我试图做的是给它一个很好的过渡，而不是仅仅出现。我曾尝试在菜单的各个部分使用 :hover 和 css 过渡，但在研究之后我意识到动画不适用于 display: none; 在上面。请帮忙，

在此先感谢，亚当

CSS：

```
nav ul ul {
    display: none;
}
nav ul li:hover > ul {
    display: block;
}
nav ul {
    list-style: none;
    position: relative;
    display: inline-table;
    margin-top: 23px;
    padding: 0;
    float: left;
}
nav ul:after {
    content:"";
    display: block;
}
nav ul li {
    float: left;
    height: 50px;
    width: auto;
    padding: 5px;
    margin-left: 22px;
}
nav ul li a {
    display: block;
    text-decoration: none;
}
nav ul ul {
    background: #363c43;
    border-radius: 3px;
    border: 1px solid #2e363f;
    padding: 7px;
    position: absolute;
    font-size: 0.9em;
}
nav ul ul:before {
    content:'';
    display:block;
    width:0;
    height:0;
    position:absolute;
    border-right: 7px solid transparent;
    border-left: 7px solid transparent;
    border-bottom:10px solid #363c43;
    top:-8px;
    left: 30px;
}
nav ul ul li {
    height: 30px;
    float: none;
    position: relative;
    padding: 0px 0px 5px 0px;
    margin: 0px;
}
/* Other base styles */
 * {
    font-family: arial;
}
a:link, a:visited {
    color: #979797;
    font-size: 1.145em;
    /* 18px */
    text-decoration: none;
    font-weight: lighter;
    -webkit-transition: all .25s linear;
    transition: color .25s linear;
}
a:hover {
    color: #c4c1c1;
    font-size: 1.145em;
    /* 22px */
    text-decoration: none;
} 
```

HTML：

```
<nav>
    <ul class="menu">
        <li><a href="index.php">home</a>
        </li>
        <li><a href="index.php">products</a>

            <ul>
                <li><a href="#">product 1</a>
                </li>
                <li><a href="#">product 2</a>
                </li>
            </ul>
        </li>
        <li><a href="index.php">solutions</a>
        </li>
    </ul>
</nav> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T21:01:01.560

我可以详细解释，但是这个人做得很好：[https ://stackoverflow.com/a/3332179/363605](https://stackoverflow.com/a/3332179/363605)

```
nav ul ul {
    display: block;
    -webkit-transition: opacity 1s ease-in;
    -moz-transition: opacity 1s ease-in;
    -o-transition: opacity 1s ease-in;
    transition: opacity 1s ease-in;
    opacity: 0; 
    height: 0;
    overflow: hidden;
}
nav ul li:hover > ul {
    height: auto;
    opacity: 1;
} 
```

[http://jsfiddle.net/pYhrk/](http://jsfiddle.net/pYhrk/)

# ruby - Sublime、Ruby 和 RSpec（天哪！）

> ID：14820406
> 
> 赞同：0
> 
> 时间：2013-02-11T20:36:40.877
> 
> 标签：ruby, rspec, sublimetext2

我将 Sublime 和 Rspec 与 Ruby 一起使用。我可以通过按 Command-B (Mac) 在 Sublime 中运行代码。

有谁知道如何在 IDE 中运行 Rspec 测试？

我用我的规范文件尝试 Command-B，但它给了我这个错误：

```
./spec_helper.rb:7: uninitialized constant RSpec (NameError) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T20:52:54.850

这有效： [http ://robdodson.me/blog/2012/04/29/how-to-run-tests-in-sublime-text/](http://robdodson.me/blog/2012/04/29/how-to-run-tests-in-sublime-text/)

安装 Sublime 包管理器

安装 RubyTest

Command-Shift-R

# java - stackoverflow 如何影响 mule 中的池化组件？

> ID：14820411
> 
> 赞同：0
> 
> 时间：2013-02-11T20:37:02.700
> 
> 标签：java, multithreading, mule

这个问题几乎说明了一切！

如果其中一个组件有 StackOverflowError，我有一个包含池化组件流的 mule 流，这对正在执行的其他线程有何影响？

线程是否分配了特定的堆栈？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:41:12.243

是的，每个线程都有自己的堆栈。请参阅[为什么要减小 Java JVM 线程堆栈的大小？](https://stackoverflow.com/questions/2623453/why-reduce-the-size-of-the-java-jvm-thread-stack)

# html - 滚动后绝对div的位置

> ID：14820412
> 
> 赞同：1
> 
> 时间：2013-02-11T20:37:04.963
> 
> 标签：html

我有一个 div，它有 200 行数据（页面的内容）。这个 div 使用 css position:absolute 定位。

向下滚动后，我想得到这个 div 顶部的位置。目前它给了我 0。据我说这是错误的，因为它在可视屏幕区域之外。应该是一些负数吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:43:34.460

不，位置仍然是 0，因为那是您放置它的位置。文档的顶部是 0 所在的位置，而不是当前视口的顶部。我认为您想要的是`window.scrollY`，它将告诉您用户从顶部滚动页面的距离。此 ( ) 的负数`-scrollY`将为您提供所需的数字。

# css - 如何在复杂的未知级别 ul li 菜单中确定最后一个锚点

> ID：14820415
> 
> 赞同：1
> 
> 时间：2013-02-11T20:37:06.480
> 
> 标签：css, jquery-selectors, css-selectors

我正在寻找一种方法来确定菜单中显示的最后一个锚点。我正在尝试使用 css 赶上它，但没有用。在我的示例中，我试图将写为“是”女巫的锚定在列表中的最后一个，而不是“父母”的最后一个。

html：

```
<div class="container">
<ul>
    <li><a href="#">no</a></li>
    <li><a href="#">no</a></li>
    <li>
        <ul>
            <li><a href="#">no</a></li>
            <li><a href="#">no</a>
                <ul>
                    <li><a href="#">no</a></li>
                    <li><a href="#">no</a>
                        <ul>
                            <li><a href="#">no</a></li>
                            <li><a href="#">yes</a></li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>
    </li>
</ul>
</div>
<hr/>
<div class="container">
<ul>
    <li><a href="#">no</a></li>
    <li><a href="#">no</a></li>
    <li>
        <ul>
            <li><a href="#">no</a></li>
            <li><a href="#">no</a>
                <ul>
                    <li><a href="#">no</a>
                        <ul>
                            <li><a href="#">no</a></li>
                            <li><a href="#">no</a></li>
                        </ul>
                    </li>
                    <li><a href="#">yes</a></li>
                </ul>
            </li>
        </ul>
    </li>
</ul>
</div> 
```

jsfiddle：http: [//jsfiddle.net/u2BTz/2/](http://jsfiddle.net/u2BTz/2/)

无论如何，我将接受 jQuery 解决方案，任何**仅使用 css 来确定范围的**帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T21:02:34.333

Diodeus 的答案是正确的，但如果你想利用[last()](http://api.jquery.com/last/) ，你必须实现两步匹配操作：

```
$(".container").each(function() {
    $(this).find("a").last().css("background-color", "red");
}); 
```

否则，`<a>`无论容器如何，所有元素都将被匹配，并且`last()`只会返回最后一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T20:44:48.987

忘记图层，直接选择锚标签。

```
$('.container a').last().css('background-color', 'red'); 
```

# objective-c - 使用 Dropbox API Objective-C 重命名文件

> ID：14820418
> 
> 赞同：0
> 
> 时间：2013-02-11T20:37:25.040
> 
> 标签：objective-c, dropbox-api

我还没有找到正确的方法来做到这一点。我可以重新创建文件并使用新名称上传它，然后我会删除旧名称的文件，但这似乎不是最好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:26:17.540

你可以做这样的事情

```
NSString *fromPath = <old_path>
NSString *toPath   = <new_path>
BRestClient *dbClient = [[DBRestClient alloc] initWithSession:[DBSession sharedSession]];
[dbClient moveFrom:fromPath toPath:toPath]; 
```

# php - HTML 表单未发送 $_POST 值

> ID：14820421
> 
> 赞同：3
> 
> 时间：2013-02-11T20:37:29.133
> 
> 标签：php, html, forms, post

我正在尝试在 PHP 中创建一个表单创建器。这是其中一个非常愚蠢的“需要再看看”的问题。我知道这种形式应该可以工作，但它根本没有发送任何 $_POST 值。这是代码。

```
<form method="post" action="http://projects.zesty-designs.co.uk/orderform" class="generatedform">
<label>Ebay Username</label><br />
<input type="text" name="ebay_username" value="" /><br />
<label>Email Address</label><br />
<input type="text" name="email_address" value="" /><br />
<label>Full Name</label><br />
<input type="text" name="full_name" value="" /><br />
<input type="submit" value="Submit" /><input type="reset" value="Start Again" />
</form> 
```

如果有人想尝试，这里是实时链接。[http://projects.zesty-designs.co.uk/orderform](http://projects.zesty-designs.co.uk/orderform)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T20:44:20.313

看来大部分评论都是对的。

发送信息的 URL 似乎需要尾部斜杠`/`或对直接文件的引用。

感谢您的回复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T20:39:42.127

尝试在 action 方法中传递完整的 url；

```
http://projects.zesty-designs.co.uk/orderform/index.php 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T20:42:44.660

您应该添加 .php 后缀，例如 action="domain.com/somepage.php" （如果它实际上是文件名）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-21T15:25:25.463

试着`escape your caracters`喜欢这样：

`http:\/\/projects.zesty-designs.co.uk\/orderform`

反斜杠字符有多种用途。首先，如果它后跟一个非字母数字字符，它将带走该字符可能具有的任何特殊含义。这种将反斜杠用作转义字符的做法适用于内部和外部字符类。

检查链接以获取更多信息：[转义序列@ Php.net 手册](http://php.net/manual/en/function.htmlspecialchars.php)

基本上在 PHP 中，您的`\`角色用于回显标志或转义字符

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-01T01:03:55.297

我在使用经典 asp 时遇到了完全相同的问题。我将 IIS RULE REWRITE 和 web.config 设置如下：

```
<rule name="arulename">
 <match url="somematch" />
 <conditions>
  <add input="{REQUEST_METHOD}" matchType="Pattern" pattern="POST" negate="false" />
 </conditions>
 <action redirectType="Temporary" type="Rewrite" url="someurl" />
</rule> 
```

我的问题是，当我单击提交按钮时，表单没有提交。我的表单是完美的 action="http://website.extension/someshorturl" 但没有发布数据。换句话说，一切都是正确的，但发布数据丢失或丢弃，并且没有配置或编码错误。我发现是因为我已经设置了我的服务器本身，所以该域使用 www。前缀，它正在重定向没有 www 的所有内容。先加前缀。我只需将表单更改为 action="http://www.website.extension/someshorturl" 并出现帖子数据。

如果有人和我有同样的问题，我希望这会对他们有所帮助。

我搜索了高低，使用“POST DATA BEING LOST”并没有得到任何帮助，直到我来到这里，这让我找到了问题所在。

# python - 使用 Python 创建 2D 等高线图的最佳方法

> ID：14820425
> 
> 赞同：5
> 
> 时间：2013-02-11T20:37:45.763
> 
> 标签：python, numpy, matplotlib, maps, matplotlib-basemap

我正在尝试在 Python 中创建一个 2D 轮廓图，如下所示：

![等化学等值线图](../Images/d6333b3c5ddb8ae139f3908561206a93.png)

在这种情况下，它是地图上许多点的化学浓度图。但为了简单起见，我们只能说它是海拔。

我得到了地图，在本例中为 562 x 404 像素。在该点，我得到了一些具有给定值的 X 和 Y 坐标。我没有得到足够的点来平滑连接线，有时可以从中提取的数据点很少。我的理解是应该使用样条图来平滑连接点。

我看到有许多 Python 库可以帮助创建与此类似的等高线图。

1.  [Matplotlib 的 Pyplot Contour](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.contour)看起来很有希望。
2.  [Numpy](http://msemac.redwoods.edu/~darnold/math50c/python/contours/index.xhtml)看起来也有一些潜力

但对我来说，我没有看到明显的赢家。我真的不知道从哪里开始，对这种编程图形数据不熟悉。

所以我的问题真的是，最好使用什么库？更简单的将是首选。您可以提供的任何见解都可以帮助我以正确的方式开始工作，这将是很棒的。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T20:48:46.797

在您展示的 numpy 示例中，作者实际上使用的是 Matplotlib。虽然有几个绘图库，但 Matplotlib 对于像这样的简单 2D 绘图是最流行的。除非有令人信服的理由不这样做，否则我可能会使用它。

一般的策略是尝试在 Matplotlib 示例库中找到您想要的内容，然后修改源代码。我喜欢的另一个高质量 Matplotlib 示例的好来源是： [http ://astroml.github.com/book_figures/](http://astroml.github.com/book_figures/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T04:59:23.680

Numpy 实际上是一个 N 维数组对象，而不是绘图包。您不需要每个像素都有数据。只需[屏蔽](http://docs.scipy.org/doc/numpy/reference/maskedarray.html)您的数据数组。Matplotlib 将自动绘制它可以绘制的区域并将其他区域留空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-16T09:55:14.523

我也有同样的问题。我发现 matplotlib 具有插值功能，可用于平滑连接离散的 XY 点。

请参阅以下文档了解帮助我完成的内容：

*   Matplotlib 的[`matplotlib.tri.LinearTriInterpolator`](https://matplotlib.org/stable/api/tri_api.html#matplotlib.tri.LinearTriInterpolator)文档。
*   Matplotlib 的[不规则间隔数据等高线图](https://matplotlib.org/stable/gallery/images_contours_and_fields/irregulardatagrid.html)示例
*   [我如何使用上述资源](https://clayb.net/blog/generating-a-topographic-map/)从 CSV 加载 x、y、z 点来制作端到端的拓扑图

# python - 如何在 Python 3 中 .decode('string-escape') ？

> ID：14820429
> 
> 赞同：71
> 
> 时间：2013-02-11T20:37:59.063
> 
> 标签：python, python-3.x, escaping

我有一些需要转义的转义字符串。我想在 Python 中做到这一点。

例如，在 Python 2.7 中，我可以这样做：

```
>>> "\\123omething special".decode('string-escape')
'Something special'
>>> 
```

我如何在 Python 3 中做到这一点？这不起作用：

```
>>> b"\\123omething special".decode('string-escape')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
LookupError: unknown encoding: string-escape
>>> 
```

我的目标是能够接受这样的字符串：

```
s\000u\000p\000p\000o\000r\000t\000@\000p\000s\000i\000l\000o\000c\000.\000c\000o\000m\000 
```

并将其变成：

```
"support@psiloc.com" 
```

完成转换后，我将检查我拥有的字符串是用 UTF-8 还是 UTF-16 编码的。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-02-11T20:40:08.423

您必须`unicode_escape`改用：

```
>>> b"\\123omething special".decode('unicode_escape') 
```

如果您*从*一个`str`对象开始（相当于 python 2.7 unicode），您需要先编码为字节，然后使用`unicode_escape`.

如果您需要字节作为最终结果，则必须再次编码为合适的编码（`.encode('latin1')`例如，如果您需要保留文字字节值；前 256 个 Unicode 代码点一对一映射）。

您的示例实际上是带有转义的 UTF-16 数据。从 解码`unicode_escape`，返回以`latin1`保留字节，然后从`utf-16-le`（UTF 16 little endian without BOM）解码：

```
>>> value = b's\\000u\\000p\\000p\\000o\\000r\\000t\\000@\\000p\\000s\\000i\\000l\\000o\\000c\\000.\\000c\\000o\\000m\\000'
>>> value.decode('unicode_escape').encode('latin1')  # convert to bytes
b's\x00u\x00p\x00p\x00o\x00r\x00t\x00@\x00p\x00s\x00i\x00l\x00o\x00c\x00.\x00c\x00o\x00m\x00'
>>> _.decode('utf-16-le') # decode from UTF-16-LE
'support@psiloc.com' 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2014-04-18T09:57:07.660

旧的“字符串转义”编解码器将字节串映射到字节串，关于如何处理此类编解码器存在很多争论，因此目前无法通过标准编码/解码接口使用它。

但是，代码仍然存在于 C-API (as `PyBytes_En/DecodeEscape`) 中，并且仍然通过未记录的`codecs.escape_encode`和`codecs.escape_decode`.

```
>>> import codecs
>>> codecs.escape_decode(b"ab\\xff")
(b'ab\xff', 6)
>>> codecs.escape_encode(b"ab\xff")
(b'ab\\xff', 3) 
```

这些函数返回转换后的`bytes`对象，加上一个表示处理了多少字节的数字……你可以忽略后者。

```
>>> value = b's\\000u\\000p\\000p\\000o\\000r\\000t\\000@\\000p\\000s\\000i\\000l\\000o\\000c\\000.\\000c\\000o\\000m\\000'
>>> codecs.escape_decode(value)[0]
b's\x00u\x00p\x00p\x00o\x00r\x00t\x00@\x00p\x00s\x00i\x00l\x00o\x00c\x00.\x00c\x00o\x00m\x00' 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2019-11-13T02:33:00.560

如果您想对转义序列进行**str**到**str**解码，那么输入和输出都是 Unicode：

```
def string_escape(s, encoding='utf-8'):
    return (s.encode('latin1')         # To bytes, required by 'unicode-escape'
             .decode('unicode-escape') # Perform the actual octal-escaping decode
             .encode('latin1')         # 1:1 mapping back to bytes
             .decode(encoding))        # Decode original encoding 
```

测试：

```
>>> string_escape('\\123omething special')
'Something special'

>>> string_escape(r's\000u\000p\000p\000o\000r\000t\000@'
                  r'\000p\000s\000i\000l\000o\000c\000.\000c\000o\000m\000',
                  'utf-16-le')
'support@psiloc.com' 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-20T15:59:08.850

你不能`unicode_escape`在字节字符串上使用（或者更确切地说，你可以，但它并不总是返回与`string_escape`Python 2 相同的东西）——当心！

此函数`string_escape`使用正则表达式和自定义替换逻辑来实现。

```
def unescape(text):
    regex = re.compile(b'\\\\(\\\\|[0-7]{1,3}|x.[0-9a-f]?|[\'"abfnrt]|.|$)')
    def replace(m):
        b = m.group(1)
        if len(b) == 0:
            raise ValueError("Invalid character escape: '\\'.")
        i = b[0]
        if i == 120:
            v = int(b[1:], 16)
        elif 48 <= i <= 55:
            v = int(b, 8)
        elif i == 34: return b'"'
        elif i == 39: return b"'"
        elif i == 92: return b'\\'
        elif i == 97: return b'\a'
        elif i == 98: return b'\b'
        elif i == 102: return b'\f'
        elif i == 110: return b'\n'
        elif i == 114: return b'\r'
        elif i == 116: return b'\t'
        else:
            s = b.decode('ascii')
            raise UnicodeDecodeError(
                'stringescape', text, m.start(), m.end(), "Invalid escape: %r" % s
            )
        return bytes((v, ))
    result = regex.sub(replace, text) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-02-22T15:22:19.947

py2

```
"\\123omething special".decode('string-escape') 
```

py3

```
"\\123omething special".encode('utf-8').decode('unicode-escape') 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-13T15:50:14.020

至少在我的情况下这是等价的：

```
Py2: my_input.decode('string_escape')
Py3: bytes(my_input.decode('unicode_escape'), 'latin1') 
```

转换工具.py：

```
def string_escape(my_bytes):
    return bytes(my_bytes.decode('unicode_escape'), 'latin1') 
```

# php - 如何在视图中使用变量而不分配它们php

> ID：14820434
> 
> 赞同：0
> 
> 时间：2013-02-11T20:38:19.850
> 
> 标签：php, model-view-controller, view

我有个问题。我为我的网站做了一些 mvc'ish 结构。我希望能够在我的视图中使用我的变量而不分配它们。

让我通过一个例子来解释一下，这是我的控制器的一小部分：

```
class members extends controller{

public function _construct()
{
    parent::__construct();        

}
public function index()
{
    $test = 'test variable';
    $data['test2'] = 'test variable 2';

    view::setTemplate('header');
    view::setTemplate('homepage', $data);
    view::setTemplate('footer');
}
} 
```

在我的视图类的 setTemplate() 函数中，我使用`extract($data)`然后包含视图文件。这样，我可以回显 $test2 并按预期将“测试变量 2”作为输出。

但是，有没有办法让视图“记住”第一个 $test 变量而无需将其添加到 setTemplate 函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:53:36.537

**免责声明：此代码尚未经过测试**

您可以使用变量变量在 setTemplate 方法中定义变量，并直接从那里包含视图。

```
<?php
function setTemplate($view, $data) {
  if(is_array($data)){
    foreach($data as $var => $val){
      $$var = $val;
    }
  }
  include('views/'.$view.'.php');
}
?> 
```

# css - 带有 CSS 背景颜色的 HTML5 标记

> ID：14820437
> 
> 赞同：0
> 
> 时间：2013-02-11T20:38:34.840
> 
> 标签：css, html

我正在尝试用 HTML5 编写代码，我`<header>`有 3 个部分：例如`<div id="topHeader">`，`<nav>`&`<div id="mainHeader">`

`<topHeader>`和`<nav>`具有跨越视口宽度（100％）的单独背景颜色。

我真的很感激以最好的方式为我正在尝试做的事情提供一些帮助，因为我无法弄清楚，而且我想以最有效的方式来做。

![](../Images/380aaa10ad765b78cfda181d878db95e.png)

这是一个现有的网站，这几乎就是它的完成方式。不过，我想将这 3 个部分包装成一个“标题”标签。不确定我是否应该将“标题”标签设为全宽？

```
<div id="topHeader">
<div class="contentArea">

    </div><!-- e contentArea -->
</div><!-- e topHeader -->
<div id="mainmenu">
<div class="contentArea">

    </div><!-- e contentArea -->
</div><!-- e menu -->
<div id="header">
    <div class="contentArea">

    </div><!-- e contentArea -->
</div><!-- e header -->

#topHeader {background-color: #9c140a;}
#topHeader .contentArea {width: 990px;}
#mainmenu {background:#b1140b;}
#mainmenu .contentArea {width:990px;}
#header .contentArea {width: 990px;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:57:28.980

好的，我有你想要的东西，虽然它显然与你的图像不完全一样，因为它缺乏填充它的内容。

```
<html>
    <body>
        <div class="topHeader">
            <p>Test</p>
        </div>
        <nav>
            <a href="http://google.com">Google Link</a>
        </nav>
        <div class="mainHeader">
            <p>Test. Lots 'o Text. Test. Lots 'o Text. Test. Lots 'o Text. Test. Lots 'o Text. Test. Lots 'o Text. Test. Lots 'o Text. Test. Lots 'o Text. Test. Lots 'o Text. Test. Lots 'o Text. Test. Lots 'o Text. Test. Lots 'o Text. Test. Lots 'o Text. Test. Lots 'o Text. Test. Lots 'o Text. Test. Lots 'o Text. Test. Lots 'o Text. Test. Lots 'o Text. Test. Lots 'o Text. Test. Lots 'o Text. Test. Lots 'o Text. Test. Lots 'o Text. Test. Lots 'o Text. Test. Lots 'o Text. Test. Lots 'o Text. Test. Lots 'o Text. Test. Lots 'o Text. Test. Lots 'o Text. Test. Lots 'o Text. Test. Lots 'o Text. Test. Lots 'o Text. </p>
        </div>
    </body>
</html> 
```

和

```
.topHeader {
    background-color: DarkRed;
    width:100%;
}

.topHeader a.left {
    margin-left:10%;
}

.topHeader a.right {
    float:right;
    margin-right:10%;
}
nav {
    clear:both;
    background-color: red;
    width:100%;
}
.mainHeader {
    width:80%;
    margin-left: auto;
    margin-right: auto;
}

.mainHeader p {
    border: dotted;
}

nav a {
    margin-left: 10%;
} 
```

结果：http: [//jsfiddle.net/Ej47Q/8/](http://jsfiddle.net/Ej47Q/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T21:07:01.713

这个[http://jsfiddle.net/bMySg/怎么样](http://jsfiddle.net/bMySg/)

```
 <!DOCTYPE html>
    <html>
    <head>
        <style>
            body, html{
                margin:0px;
                padding:0px;
                height:100%;
                width:100%;
                font-family:'verdana', sans-serif, arial;
            }

            header{
                width:100%;
                background:#E10000;
                height:300px;
                padding-top:50px; /* height of header:before */
            }

            header:before{
                content:"";
                width:100%;
                height:50px;
                background:#7C0000;
                position:absolute;
                top:0px;
                left:0px;
                z-index:0;
            }

            .top_nav{
                width:75%;
                border:dotted #FFFFFF;
                color:#FFFFFF;
                position:absolute;
                top:0px;
                padding:10px;
                margin-left:12.5%;
                border-top:none;
                border-bottom:none;
            }

            .right{
                float:right;
            }

            .left{
                float:left;
            }

            .head_text{
                font-size:50px;
                color:white;
                text-align:center;
                padding-top:20px;
            }
        </style>
    </head>
    <body>
        <header>
            <nav class="top_nav">
                <a href="#" class="left">Links</a>
                <a href="#" class="right">Links</a>
            </nav>
            <h1 class="head_text">Navigation</h1>
        </header>
    </body>
    </html> 
```

# asp.net - 在 asp.net 中以编程方式登录 http://waec2013.com/waecexam/

> ID：14820444
> 
> 赞同：0
> 
> 时间：2013-02-11T20:39:01.820
> 
> 标签：asp.net, web-scraping

伙计们，我尝试使用以下方式登录[http://waec2013.com/waecexam/](http://waec2013.com/waecexam/)网站

1.  HttpWebRequest
2.  饼干容器

还有另一种技术我可以使用 webbrowser，但由于这是 web 应用程序，所以我不能使用 webbrowser。但是，我可以登录到该网站并获取特定数据是不是很幸运？

我进行逆向工程并进行一些编码，但没有达到我的结果。

有什么建议么

```
 string formUrl = "http://waec2013.com/waecexam/"; 
     string formParams = string.Format("adminName={0}&adminPass={1}&act={2}",
     "passwaec", "cee660","login");
     string cookieHeader;
     WebRequest req = WebRequest.Create(formUrl);
     req.ContentType = "application/x-www-form-urlencoded";
     req.Method = "POST";
     byte[] bytes = Encoding.ASCII.GetBytes(formParams);
     req.ContentLength = bytes.Length;
     using (Stream os = req.GetRequestStream())
     {
         os.Write(bytes, 0, bytes.Length);
     }
     WebResponse resp = req.GetResponse();
     cookieHeader = resp.Headers["Set-cookie"];

     string pageSource;
     string getUrl = "http://waec2013.com/waecexam/Leads.php";
     WebRequest getRequest = WebRequest.Create(getUrl);
     getRequest.Headers.Add("Cookie", cookieHeader);
     WebResponse getResponse = getRequest.GetResponse();
     using (StreamReader sr = new StreamReader(getResponse.GetResponseStream()))
     {
        pageSource = sr.ReadToEnd();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:08:56.473

最后，我已经解决了我自己的问题，并在需要时为你们发帖。

```
 public class CookiesAwareWebClient : WebClient
 {
    public CookieContainer CookieContainer { get; private set; }

    public CookiesAwareWebClient()
    {
        CookieContainer = new CookieContainer();
    }

    protected override WebRequest GetWebRequest(Uri address)
    {
        var request = base.GetWebRequest(address);
        ((HttpWebRequest)request).CookieContainer = CookieContainer;
        return request;
    }
  }

   using (var client = new CookiesAwareWebClient())
    {
        var values = new NameValueCollection
        {
            { "adminName", "passwaec" },
            { "adminPass", "cee660" },
            { "x", "0" }, 
            { "y", "0" }, 
            { "act", "login" },
        };

        // We authenticate first
        client.UploadValues("http://waec2013.com/waecexam/index.php", values);

        // Now we can download
        client.DownloadFile("http://waec2013.com/waecexam/leadExp.php?act=export",
        @"c:\abc.txt");
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T07:33:51.273

在方法的开头添加：

```
var cookies = new CookieContainer(); 
```

在创建 webrequest 的每一行之后，将 cookie 分配给实例化的请求：

```
WebRequest req = WebRequest.Create(formUrl);
req.CookieContainer = cookies; 
```

这将存储所有传入的 cookie，并在 GET POST 时将容器中的所有 cookie 发送到网络服务器。

在这种情况下，您不需要使用 Set-Cookie 标头。

# objective-c - Facebook SDK 3.1：无法为 IOS6 中的 publish_stream 重新授权用户

> ID：14820447
> 
> 赞同：1
> 
> 时间：2013-02-11T20:39:10.153
> 
> 标签：objective-c, facebook, ipad, permissions, authorization

我在为 IOS6 中的 publish_stream 重新授权用户时遇到问题。当用户第一次将应用程序添加到 Facebook 时，我能够让它工作。如果用户删除了 Facebook 应用程序设置“发布您的行为”的权限，那么我重新运行该应用程序仍然可以访问的 iPad 应用程序，但它不会向用户弹出 publish_stream 权限的对话框。

这是我写的代码：

```
if ([[FBSession activeSession] isOpen])
{
    //if ([[[FBSession activeSession]permissions]indexOfObject:@"publish_stream"] == NSNotFound) {
        [[FBSession activeSession] reauthorizeWithPublishPermissions:[NSArray arrayWithObjects:@"publish_stream", nil]
                                                     defaultAudience:FBSessionDefaultAudienceFriends
                                                   completionHandler:^(FBSession *session, NSError *error) {
                                                       [self sessionStateChanged:session
                                                                           state:session.state
                                                                          error:error
                                                                         success:success failure:failure];
                                                   }];

        return false;
    //}
    //else
    //    return TRUE;
}
else
{

return [FBSession openActiveSessionWithReadPermissions:[NSArray arrayWithObjects:@"user_photos", nil]
                  allowLoginUI:allowLoginUI
                 completionHandler:^(FBSession *session, FBSessionState state, NSError *error) {
                                          switch (state)
                 {
                     case FBSessionStateCreated:
                     case FBSessionStateCreatedTokenLoaded:
                     case FBSessionStateOpen:

                          [[FBSession activeSession] reauthorizeWithPublishPermissions:[NSArray arrayWithObjects:@"publish_stream", nil]
                                      defaultAudience:FBSessionDefaultAudienceFriends
                                      completionHandler:^(FBSession *session, NSError *error) {
                                            [self sessionStateChanged:session
                                                                state:session.state
                                                                error:error
                                                              success:success
                                                              failure:failure];
                                            }];

                         break;
                  }

         }];

} 
```

有谁知道我做错了什么？

# opencv - 实时光流

> ID：14820448
> 
> 赞同：3
> 
> 时间：2013-02-11T20:39:13.167
> 
> 标签：opencv, image-processing, computer-vision, emgucv, opticalflow

我正在使用光流作为视障人士的实时障碍物检测和避让系统。我正在用 c# 开发应用程序并使用 Emgu Cv 进行图像处理。我使用 Lucas 和 Kanade 方法，我对算法的速度非常满意。我使用的是单目视觉，因此很难准确计算每个被跟踪特征的深度并相应地提醒用户。我计划使用超声波传感器来帮助检测障碍物，因为单目相机很难计算深度。关于如何单独使用相机准确估计深度的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T10:16:05.873

您可能想查看这篇论文：[A Robust Visual Odometry and Precipice Detection System Using Consumer-grade Monoocular Vision](http://free.download4.org/A-Robust-Visual-Odometry-and-Precipice-Detection-System-Using-download-w2838.pdf)。他们使用了一个很好的技巧来检测视野中的障碍物和孔洞。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T16:09:44.837

讨厌给出这样一个笼统的答案，但你最好先从关于结构的标准文本开始，以了解技术的概述。一个很好的是 Richard Szeliski 最近的[在线](http://szeliski.org/Book/)书籍（第 7 章）及其参考资料。之后，对于您的应用程序，您可能需要查看最近在 SLAM 中的工作——牛津的[Active Vision 小组](http://www.robots.ox.ac.uk/~lav/)已经发表了一些很棒的作品，[Andrew Davison 的小组](http://www.doc.ic.ac.uk/~ajd/)也发表了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T21:18:11.870

在下面对 RobAu 的回答发表更多评论，“来自运动的结构”可能比“来自视频的 3d”提供更好的搜索结果

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T20:43:40.427

仅当您移动相机时，一次护理的深度才会起作用。您可以从视频方法中查看一些**3d 。**这是一个非常困难的问题，尤其是当相机视野中的物体也在移动时。

# hadoop - Hadoop 输入的最佳可拆分压缩 = bz2？

> ID：14820450
> 
> 赞同：27
> 
> 时间：2013-02-11T20:39:19.960
> 
> 标签：hadoop, gzip, hdfs, bzip2

我们意识到为 Hadoop 处理以 GZip 格式归档文件并不是一个好主意，这有点太晚了。GZip 不可拆分，作为参考，以下是我不会重复的问题：

*   [关于 Hadoop 和压缩输入文件的非常基本的问题](https://stackoverflow.com/questions/2078850/very-basic-question-about-hadoop-and-compressed-input-files)
*   [Hadoop gzip 压缩文件](https://stackoverflow.com/questions/5630245/hadoop-gzip-compressed-files)
*   [Hadoop gzip 输入文件仅使用一个映射器](https://stackoverflow.com/questions/7388436/hadoop-gzip-input-file-using-only-one-mapper)
*   [为什么 hadoop 不能拆分大文本文件，然后使用 gzip 压缩拆分？](https://stackoverflow.com/questions/6511255/why-cant-hadoop-split-up-a-large-text-file-and-then-compress-the-splits-using-g)

我的问题是：BZip2 是允许 Hadoop 并行处理单个存档文件的最佳存档压缩吗？Gzip 肯定不行，而且从我的阅读来看 LZO 有一些问题。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2014-09-17T10:43:35.067

**BZIP2**在 hadoop 中是可拆分的——它提供了非常好的压缩比，但从 CPU 时间和性能来看并没有提供最佳结果，因为压缩非常消耗 CPU。

**LZO**在 hadoop 中是可拆分的——利用**[hadoop-lzo](https://github.com/twitter/hadoop-lzo)**你有可拆分的压缩 LZO 文件。您需要有外部 .lzo.index 文件才能并行处理。该库提供了以本地或分布式方式生成这些索引的所有方法。

**LZ4**在 hadoop 中是可拆分的——利用**[hadoop-4mc](https://github.com/carlomedas/4mc)**你有可拆分的压缩 4mc 文件。您不需要任何外部索引，您可以使用提供的命令行工具或通过 Java/C 代码在 hadoop 内部/外部生成档案。4mc 可以在任何级别的速度/压缩比下在 hadoop LZ4 上使用：从达到 500 MB/s 压缩速度的快速模式到提供更高压缩比的高/超模式，几乎可以与 GZIP 相媲美。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-11T23:54:51.273

这里有五种使用 gzip 的方法，三种需要索引，两种不需要。

可以为任何 gzip 文件创建索引，即不是专门构造的，如[zran.c](https://github.com/madler/zlib/blob/master/examples/zran.c)所做的那样。然后您可以在块边界处开始解压缩。该索引包括每个入口点的 32K 未压缩数据历史记录。

如果您正在构建 gzip 文件，则可以使用周期性入口点来制作它，其索引不需要在这些入口点处未压缩的历史记录，从而使索引更小。这是通过zlib 中的`Z_FULL_FLUSH`选项来完成的。`deflate()`

您还可以在每个此类点执行 a`Z_SYNC_FLUSH`后跟 a ，这将插入两个标记。`Z_FULL_FLUSH`然后你可以搜索九字节模式`00 00 ff ff 00 00 00 ff ff`来找到那些。这与在 bzip2 文件中搜索 6 字节标记没有什么不同，除了 9 字节时误报的可能性要小得多。那么你就不需要单独的索引文件了。

gzip 和 xz 都支持简单的连接。这使您可以轻松地以另一种方式为并行解压缩准备存档。简而言之：

```
gzip < a > a.gz
gzip < b > b.gz
cat a.gz b.gz > c.gz
gunzip < c.gz > c
cat a b | cmp - c 
```

将导致比较成功。

然后，您可以简单地压缩成所需大小的块并连接结果。将索引保存到每个 gzip 流开始的偏移量。从这些偏移中解压缩。您可以根据自己的应用选择块的大小。但是，如果将它们设置得太小，则会影响压缩。

通过 gzip 文件的简单连接，如果您将每个块设置为固定的未压缩大小，您也可以放弃索引。然后每个块以相同的四个字节结束，未压缩的长度以小端顺序排列，例如`00 00 10 00`对于 1 MiB 块，然后是`1f 8b 08`下一个块，它是 gzip 标头的开始。然后可以像 bzip2 标记一样搜索该 7 字节标记，但误报的可能性更小。

可以对连接的 xz 文件执行相同的操作，其标头是七个字节：`fd 37 7a 58 5a 00 00`.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-04-14T17:10:21.370

我不认为另一个答案是正确的，bzip2 根据这个：

[http://comphadoop.weebly.com/](http://comphadoop.weebly.com/)

是可拆分的。*如果索引*LZO 也是如此。

所以答案是肯定的，如果你想使用比文件更多的映射器，那么你会想使用 bzip2。

为此，您可以编写一个简单的 MR 作业来读取数据，然后再次将其写出，然后您需要确保设置`mapred.output.compression.codec`为`org.apache.hadoop.io.compress.BZip2Codec`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-09-07T10:13:35.437

我的 2cents，bzip 写起来很慢。用 Apache Spark 1.6.2、Hadoop 2.7 测试，压缩一个简单的 50Go 的 JSON 文件，bzip 比 gzip 需要 2 倍的时间。

但是使用 bzip，50Go ==> 4 Go！

# jquery - 编辑大表中的一行（网格视图）

> ID：14820452
> 
> 赞同：0
> 
> 时间：2013-02-11T20:39:27.697
> 
> 标签：jquery, html, knockout.js

我有以下代码（为便于阅读而简化）用于编辑大网格视图。淘汰脚本将为每一行生成隐藏的*编辑*行。单击“编辑”按钮将取消隐藏该行，以便用户可以编辑该值。几个 html`<select>`控件有很多`<option>`标签，所以生成的 html 很大。

单击“编辑”按钮后是否可以动态插入*编辑行？*或者有没有更好的方法来使用敲除/jQuery 来处理这种常见情况？

```
<table>
    <thead>.... </thead>
    <tbody data-bind="foreach: Contacts">
        <tr data-bind="visible: isEditing==false">
            <td><span data-bind="text:Name"></span></td>
            <td><span data-bind="text: Phone"></span></td>
            <td><span data-bind="text: State"></span></td>
            <td><a href="#" data-bind="click: startEdit">Edit</a></td>
        </tr>
        <tr data-bind="visible: isEditing">
            <td>
                First Name:<input data-bind="value: FirstName" />
                Last Name:<input data-bind="value: LastName" />
            </td>
            <td><input data-bind="value: Phone" /></td>
            <td><select data-bind="value: State">...huge options...</select></td>
            <td><a href="#" data-bind="click: updateContact">Done</a></td>
        </tr>
    </tbody> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:53:19.920

我会使用你想要的[模板，并在你的视图模型中放置一个 observable 来返回你的模板的名称。](http://knockoutjs.com/documentation/template-binding.html)当您单击编辑按钮时，您将可观察到的 currentTemplate 的名称更改为您的编辑模板，它应该会自动换出您的 html。

```
<tbody data-bind="foreach: Contacts">
    <div data-bind="template: currentTemplate"></div>
</tbody>

<script type="text/html" id="contact-view-template">
    <tr>
         <td><span data-bind="text:Name"></span></td>
         ...
    </tr>
</script>

<script type="text/html" id="contact-edit-template">
    <tr>
        <td>
        First Name:<input data-bind="value: FirstName" />
        Last Name:<input data-bind="value: LastName" />
        </td>
        ...
    </tr>
</script>

var Contact = function () {
    var self = this;

    self.currentTemplate = ko.observable( 'contact-view-template' );

    self.onEditClicked = function () {
        self.currentTemplate( 'contact-edit-template' );
        // Some other logic
    };

    self.onSaveClicked = function () {
        self.currentTemplate( 'contact-view-template' );
        // Some other logic
    };
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T04:34:21.637

查看您的代码，我不确定 startEdit 按钮是否会显示所有联系人的编辑行或仅显示您单击的那个。如果它只在编辑行上出现，请考虑使用*If*绑定而不是*Visible*。

```
<tr data-bind="if: isEditing==false">...</tr>
...
<tr data-bind="if: isEditing">...</tr> 
```

当您使用 Visible 时，编辑行仍然存在并且应用了所有数据绑定，它只是不可见。通过使用如果编辑行根本不存在，除非 isEditing 为真。在大数据网格上，这可以显着加快页面加载速度。

有关更多详细信息，请参阅有关 If 绑定的淘汰赛文档[http://knockoutjs.com/documentation/if-binding.html](http://knockoutjs.com/documentation/if-binding.html)

# python - 如何在 Ubuntu 上安装 Socks / SocksIPy？

> ID：14820453
> 
> 赞同：17
> 
> 时间：2013-02-11T20:39:28.367
> 
> 标签：python, ubuntu, installation, socks

我是 python 新手，想`SocksIPy`在 Ubuntu 上安装（在 VirtualBox vm 中运行）。自述文件说将`socks.py`文件放入我的`lib/site-packages`目录中。我不知道在哪里可以找到这个目录。来自根的终端命令 `python socks.py install`运行，但没有正确安装（当我`import socks`在 python 脚本中运行时出现错误“没有名为 socks 的模块”）

SocksIPy 链接 [http://socksipy.sourceforge.net/](http://socksipy.sourceforge.net/)

有人可以建议一种让袜子/袜子在我的机器上运行的方法吗？谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-11T21:10:25.277

安装它的最简单方法 - 如果 VM 具有有效的 Internet 连接 - 可能是让它`apt-get`为您完成。从终端：

```
sudo apt-get install python-socksipy 
```

它位于 Universe 存储库中，默认情况下应启用。如果没有，您可以[自己启用它](https://askubuntu.com/questions/148638/how-do-i-enable-the-universe-repository)。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-03-01T13:29:52.427

[`PySocks`](https://github.com/Anorov/PySocks)又是一个`SocksiPy`分叉：

```
$ pip install PySocks 
```

它适用于 Python 2/3。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-15T17:15:16.223

对于 Python3

```
$ sudo apt-get install python3-socks 
```

# jquery - 如何停止播放视频 when switch tabs in Jquery?

> ID：14820455
> 
> 赞同：0
> 
> 时间：2013-02-11T20:39:43.363
> 
> 标签：jquery, video, jquery-ui-tabs

I am new to jquery - if someone can could help please!

I have this jquery on my html page that has two tabs Tab1 has text and image Tab2 has video in an iframe. How can I stop the video playing when I switch tabs and the video is blank box until i refresh the page or drag the video cursor to the start.

The script on the page:

```
<script>  $(function() {    $( "#tabs" ).tabs();  }); </script> 
```

The div:

```
<div id="tabs">  
<ul>
<li><a href="#tabs-1">Project Description</a></li>
<li><a href="#tabs-2">Video</a></li>
</ul> 
```

The html

```
<div id="tabs-1">  <p>Contrary to popular belief, Lorem Ipsum is not simply random text.....</p>
    <div id="tabs-2"> <iframe src="http://fast.wistia.net/embed/iframe/xxxxxxx?controlsVisibleOnLoad=true&endVideoBehavior=reset&fullscreenButton=false&playerColor=005293&hidden code xxxxxxx&version=v1&videoHeight=360&videoWidth=640&volumeControl=true" allowtransparency="true" frameborder="0" scrolling="no" class="wistia_embed" name="wistia_embed" width="600" height="386"></iframe> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:41:32.500

您无法控制 iframe 的内容……这在跨域策略下是不允许的

# machine-learning - SGD模型“过度自信”

> ID：14820458
> 
> 赞同：2
> 
> 时间：2013-02-11T20:40:00.930
> 
> 标签：machine-learning, classification, mahout

我正在使用 Apache Mahout 解决二进制分类问题。我使用的算法是 OnlineLogisticRegression 并且我目前拥有的模型强烈倾向于产生没有任何中间值的 1 或 0 预测。

请提出一种调整或调整算法的方法，以使其在预测中产生更多的中间值。

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T11:08:49.293

分类器的测试错误率是多少？如果它接近于零，那么自信是一个特征，而不是一个错误。

如果测试错误率很高（或至少不低），那么分类器可能会过度拟合训练集：测量训练错误和测试错误之间的差异。在这种情况下，像 rrenaud 建议的那样增加正则化可能会有所帮助。

如果您的分类器没有过度拟合，则概率校准可能存在问题。逻辑回归模型（例如使用 logit 链接函数）应该产生足够好的概率校准（如果问题近似线性可分并且标签不太嘈杂）。[您可以按照本文](http://www.machinelearning.org/proceedings/icml2005/papers/079_GoodProbabilities_NiculescuMizilCaruana.pdf)中的说明使用绘图检查概率的校准。如果这确实是一个校准问题，那么实施基于 Platt 缩放或等渗回归的自定义校准可能有助于解决该问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T07:14:30.240

通过阅读[Mahout AbstractOnlineLogisticRegression](https://builds.apache.org/job/Mahout-Quality/javadoc/org/apache/mahout/classifier/sgd/AbstractOnlineLogisticRegression.html#lambda(double))文档，您似乎可以控制正则化参数 lambda。增加 lambda 应该意味着您的权重更接近于 0，因此您的预测更加对冲。

# python - Python 3.2.2，错误（脚本到 exe）

> ID：14820461
> 
> 赞同：2
> 
> 时间：2013-02-11T20:40:05.013
> 
> 标签：python, executable

您好，我按照此说明（[如何使用 py2exe 将 python3.2 的代码更改为 exe](https://stackoverflow.com/questions/6425869/how-can-i-use-the-py2exe-to-change-the-python3-2s-code-to-exe)）创建 exe 形式的 python 脚本（版本 3.2.2），但它报告我一个错误：

```
Traceback (most recent call last):
  File "C:\Python32\Scripts\setup.py", line 7, in <module>
    executables = [Executable("ochranka.py")])
  File "C:\Python32\lib\site-packages\cx_Freeze\dist.py", line 365, in setup
    distutils.core.setup(**attrs)
  File "C:\Python32\lib\distutils\core.py", line 136, in setup
    raise SystemExit(gen_usage(dist.script_name) + "\nerror: %s" % msg)
SystemExit: usage: setup.py [global_opts] cmd1 [cmd1_opts] [cmd2 [cmd2_opts] ...]
   or: setup.py --help [cmd1 cmd2 ...]
   or: setup.py --help-commands
   or: setup.py cmd --help
error: no commands supplied 
```

这是我的 setup.py 文件：

```
from cx_Freeze import setup, Executable
setup(
    name = "Ochranka",
    version = "1.0",
    description = "test",
    executables = [Executable("ochranka.py")]) 
```

我是初学者，我不知道该怎么办。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T20:50:57.023

您必须将命令传递给`setup.py`; 在这种情况下，`build`*：

```
python setup.py build 
```

我敢打赌你忘了这`build`部分。

*注意：我不是 100% 确定`build`你想要的命令（我使用 cx_freeze 已经有一段时间了）。请参阅[文档](http://cx_freeze.readthedocs.org/en/latest/distutils.html#distutils)。

# javascript - 如何在 JavaScript 中选择这个元素？

> ID：14820470
> 
> 赞同：0
> 
> 时间：2013-02-11T20:40:43.053
> 
> 标签：javascript

我无法修改以下 html：

```
<iframe src="http://google.com/foo" width="600" height="338" frameborder="0" webkitAllowFullScreen allowFullScreen></iframe>
<div style="padding:5px 0; text-align:center; width:600px;"><p>
<a href="http://www.foobar.com/lol/wut">Some Link</a></p></div> 
```

我需要定位这个元素：

```
<a href="http://www.foobar.com/lol/wut">Some Link</a> 
```

要求是：

*   iframe 之后的第一个链接，其 src 以域[http://google.com开头](http://google.com)

由于我无法编辑 html，因此无法简单地添加 id 并使用 document.getElementById。那么如何仅使用纯 js 来定位链接呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:45:11.393

查看[选择器](http://www.w3.org/TR/selectors/)，尤其是属性选择器和兄弟组合器：

```
iframe[src^="http://google.com"] ~ a 
```

您可以在 jQuery 选择器表达式或[`document.querySelector`](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelector).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T20:44:42.573

阅读编辑。

未经测试，但假设您使用的是 jQuery，这样的东西应该可以解决问题。

```
var link = null;
$('iframe:first').siblings().each(function() {
    if (link !== null) return;
    if ($(this).attr('href') && $(this).attr('href').search('http://www.google.com') > -1) {
        link = $(this);
    }
}); 
```

不是最好的解决方案，但我觉得这是一个奇怪的场景。

**编辑：如果 Bergis 选择器有效，请使用它。花哨的东西，我刚刚学到了一些东西。**

**编辑 2：我也注意到你想检查 iframe src 而不是链接源，所以我的帖子基本上是完全错误的。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T21:03:22.747

```
function aSrcAfterIFrame(document) {
    var elements, result, looking, item, tagName, i, n;
    elements = document.getElementsByTagName('*');
    looking = false;
    for (i = 0, n = elements.length; i < n; i++) {
        item = elements[i];
        tagName = item.tagName.toLowerCase();
        if (looking && tagName === 'a') {
            result = item.href;
            break;
        }   
        if (tagName === 'iframe') {
            if (item.src.indexOf('http://google.com/foo') === 0) {
                looking = true;
            }   
        }   
    }   
    return result;
}

aSrcAfterIFrame(document);
"http://www.foobar.com/lol/wut" 
```

# indexing - RavenDB 计数总和

> ID：14820476
> 
> 赞同：0
> 
> 时间：2013-02-11T20:41:08.063
> 
> 标签：indexing, ravendb

我正在尝试对 Raven 查询中的子集合进行计数。它返回的计数为 0。如果我直接在对象上使用相同的 LINQ，那么它的计数为 2。

这个查询是否可以在 Raven 上使用自动索引？如果我需要创建一个 map-reduce 索引，有人可以帮我吗？

```
 [TestMethod]
        public void CalculateUserClickCount()
        {
            var db = new EmbeddableDocumentStore { RunInMemory = true };
            db.Initialize();
            using (var session = db.OpenSession())
            {
                var user = new User();
                var product = new Product();
                product.Clicks.Add(new Click());
                product.Clicks.Add(new Click());
                user.Storefront.EndoProducts.Add(product);
                session.Store(user);
                session.SaveChanges();

                var users = session.Query<User>()
                    .Customize(t => t.WaitForNonStaleResults())
                    .Select(t => new
                    {
                        StoreFrontId = t.Storefront.StorefrontID,
                        itemCount = t.Storefront.EndoProducts.Count,
                        updateDate = t.Storefront.LastUpdateDate,
                        clickCount = t.Storefront.EndoProducts.Sum(r => r.Clicks.Count), // this is improperly set to 0
                        TotalAffiliateRevenue = t.Storefront.SaleReports.Sum(r => r.TotalAffiliateEarnings) // this works
                    })
                    .ToList();

                int clickCount = user.Storefront.EndoProducts.Sum(t => t.Clicks.Count); // this is properly set to 2

                Assert.AreEqual(2, users[0].clickCount);
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:31:10.717

为此，您不需要 map/reduce，因为您在任何时候都只对单个文档进行操作。你需要它的转换结果，很可能，这样做。

# python - 将 CSV 转换为 txt 并使用 Python 每 10 个值开始新行

> ID：14820480
> 
> 赞同：3
> 
> 时间：2013-02-11T20:41:19.447
> 
> 标签：python, file, text, csv, split

我有一个 csv 文件，其中包含 324 行和 495 列的值数组。每行和每列的所有值都相同。

我需要拆分这个数组，以便每 10 个值放在一个新行中。因此，对于 324 行中的每一行，将有 49 个完整的列有 10 个值，1 列有 5 个值（495 col / 10 个值 = 49 个新行有 10 个值和 1 个新行有 5 个值）。然后转到下一行，依此类推，共 324 行。

我遇到的问题如下：

1.  line.split(",") 似乎没有做任何事情
2.  line.split 之后的所有内容似乎也没有做任何事情
3.  我不确定我的 for newrow in range ...是否正确
4.  我还没有将写入输出放入文本文件，我认为它应该是 outFile.write（这里有东西，不确定是什么）
5.  我在打印语句后放了“\ n”，但它只是打印出来了

我是一个初学者程序员。

脚本：

```
import string
import sys

# open csv file...in read mode
inFile= open("CSVFile", 'r')
outFile= open("TextFile.txt", 'w')

for line in inFile:
    elmCellSize = line.split(",")
    for newrow in range(0, len(elmCellSize)):
        if (newrow/10) == int(newrow/10):
            print  elmCellSize[0:10]   

outFile.close()
inFile.close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:34:50.687

你真的应该使用 csv 模块，但无论如何我可以提供一些建议。

您遇到的一个问题是，当您说 时`print elmCellSize[0:10]`，您总是采用前 10 个元素，而不是最近的 10 个元素。根据您想要执行此操作的方式，您可以保留一个字符串来记住最近的 10 个元素。在提到您可以使用代码修复的一些问题之后，我将在下面展示一个示例。

首先注意`line.split(',')`返回一个列表。所以你选择的变量名`elmCellSize`有点误导。如果你说它`lineList = line.split(',')`可能更有意义？或者如果你要说`lineSize = len(line.split(','))`并使用它？

另外（虽然我对 Python 2.x 一无所知）我认为`xrange`它是 Python 2.x 的一个函数，它比 更有效`range`，尽管它的工作方式完全相同。

而不是说`if (newrow/10) == int(newrow/10)`，你实际上可以说`if index % 10 == 0`，检查索引是否是 10 的倍数。 `%`可以被认为是“余数”，所以它会`newrow`在除以时给出余数`10`。（例如：5 % 10 = 5；17 % 10 = 7；30 % 10 = 0）

现在`[0:10]`，您希望从当前索引向后打印 10 个空格，而不是始终打印前 10 个元素的打印。所以你可以说`print lineList[index-10:index]`为了打印最近的 10 个元素。

最后你会有类似的东西

```
...
lineList = line.split(',') # Really, you should use csv reader
# Open the file to write to
with open('yourfile.ext', 'w') as f:
    # iterate through the line
    for index, value in enumerate(lineList):
        if index % 10 == 0 and index != 0:
            # Write the last 10 values to the file, separated by commas
            f.write(','.join(lineList[index-10:index]))
            # new line
            f.write('\n')
            # print
            print lineList[index-10:index] 
```

我当然不是专家，但我希望这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T15:47:01.297

好的，我认为这个脚本几乎可以工作。

现在的问题是它在第 49 行之后停止写入 outFile。它使 10 列 49 行，但应该有第 50 行只有 5 列，因为 CSV 文件中的每一行是 495 列。因此，当前脚本将最后 10 个值写入新行 49 次，但它没有得到额外的 5 个。另外，它必须再执行 323 次，因为原始 CSV 文件有 324 行。

所以，我认为现在的问题可能出在最后一个 if 语句中，也许需要一个 else 语句，但我的 elif 语句没有做任何事情。我想说如果列表中的第 6 个值是行尾字符（'\n'），然后将列表中的 5 个值写入行尾之前......它不起作用。

感谢到目前为止的所有帮助，我很感激！

这是脚本：

```
import string
#import sys
#import csv

# open csv file...in read mode
inFile= open("CSVFile.csv", 'r')
outFile= open("TextFile.txt", 'w')

for line in inFile:
    lineList = line.split(',') # Really, you should use csv reader
# Open the file to write to
    with open('outFile', 'w') as outFile:
        # iterate through the line
        for index, value in enumerate(lineList):
            if index % 10 == 0 and index != 0:
                # Write the last 10 values to the file, separated by space
                outFile.write('\t'.join(lineList[index-10:index]))
                # new line
                outFile.write('\n')
                # print
                print lineList[index-10:index]
elif lineList[6] == '\n':
            # Write the last 5 values to the file, separated by space
                outFile.write(' '.join(lineList[index-5:index]))
                # new line
                outFile.write('\n')
                # print
                print lineList[index-:index]

outFile.close()
inFile.close() 
```

# arrays - Perl：按第一个字段对输入数据进行分组

> ID：14820482
> 
> 赞同：0
> 
> 时间：2013-02-11T20:41:28.090
> 
> 标签：arrays, perl, hash

我有一个包含接口名称和目标的数据文件。我想按界面对所有目的地进行分组，以便我可以遍历并存储结果。这是我的输出示例：

```
eth0,1.1.1.1
eth0,1.1.1.2
eth1,1.1.1.1
eth1,1.1.1.2 
```

如何将唯一的接口值转储到哈希中并构建目标数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:51:09.300

```
my %ifs;

while ( my $line = <STDIN> ) {
    chomp $line;
    my ( $iface, $destination ) = split /,/, $line;
    push @{ $ifs{ $iface } }, $destination;
} 
```

应该管用。

# html - Youtube https 嵌入在 Firefox 中导致警告

> ID：14820486
> 
> 赞同：17
> 
> 时间：2013-02-11T20:41:43.423
> 
> 标签：html, http, firefox, https, youtube

我正在开发一个需要登录并包含嵌入式 Youtube 视频的网站。由于登录，我需要让 SSL 工作，这在很大程度上是。不过，我在 Youtube 嵌入方面遇到了一个意想不到的问题。[指向https://www.youtube.com](https://www.youtube.com)很容易，但 Firefox 仍然抱怨加密页面上有未加密的内容。根据 Firebug 的说法，唯一未加密的负载来自[http://[stuff].youtube.com/videoplayback?[more](http://[stuff].youtube.com/videoplayback?[more) stuff]。

现在，完全可以理解 Youtube 不想要加密其视频流的开销，而且我认为这不会构成实际的安全漏洞。我只需要让浏览器满意。（当然，我知道可以禁用该警告，但我不能在用户的机器上这样做。）必须有办法做到这一点，因为[https://www.youtube.com](https://www.youtube.com)本身并没有即使视频流也使用 http: ，也会弹出此错误。

我没有在其他浏览器中看到类似的错误，但我还没有看起来很努力。

如果重要的话，我的开发机器没有有效的 SSL 证书；我刚刚添加了一个例外。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-15T11:11:38.597

如果您正在`<iframe>`使用`<embed>`或检查 YouTube API 提供的其他嵌入代码选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-23T14:54:38.330

我有一个 ssl 安全网站，这适用于 Firefox

```
<iframe id="player" src="https://www.youtube.com/embed/XfI....Ctpo?enablejsapi=1&origin=https://yourdomain.com&showinfo=0&iv_load_policy=3&modestbranding=1&theme=light&color=white&rel=0" frameborder="0"></iframe>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-12T13:36:25.797

尝试使用 Firefox“检查器/网络分析”(shift-ctrl-I) 的页面来分析请求的元素。我猜这是您无法控制的一些javascript INSIDE。在任何情况下，您都应该能够使用此工具查明特定的触发器。

检查将浏览器切换到 HTML5 而不是 Flash 来播放视频时是否会有所不同，反之亦然。YouTube 最近将默认协议更改为 HTML5。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-28T01:31:34.583

我没有解决方案，而是提出建议：您确定没有有效的 SSL 证书与此无关吗*？*你不会这么想，但你永远不会知道。如果你得到了一个，但它仍然不起作用，那么无论如何你都不必这样做。我经历了为我的家庭服务器获取/安装和配置 SSL 密钥和证书的过程，*每件小事*似乎都会对 SSL 的行为/反应方式产生影响。

另外，您是否尝试过访问它所在的本地网络之外的站点？听起来您与托管站点的服务器（安装了 SSL 的服务器）在同一个网络上，这可能会由于 NAT 遍历而本身产生问题（我相信，但如果我错了，请纠正我 - 我们'都在这里学习）。有时使用 HTTPS，您可能会在连接到本地网络中的资源时遇到问题，而互联网上的人根本不会遇到任何问题。只是我的两美分。如果我提供了任何不正确的信息，我们深表歉意。对这一切持保留态度，但希望你能找到问题的答案。像这样的事情可能会让人头疼。

您可能对此也无能为力……因为 Youtube 似乎没有通过 HTTPS 提供内容……这超出了您的控制范围。我知道你不会质疑你得到的错误，只是想要一个解决方法。

顺便说一句，我认为他们的主页启用了 HTTPS，而不是他们的视频内容......所以这就是嵌入主页不会产生错误的原因。

编辑：另外，我看到其他人写使用嵌入而不是 iframe，我也建议这样做。浏览器将 iframe 视为另一个页面，但您得到的错误表明不安全的内容实际上与安全内容相结合，所以一切都应该没问题......但你永远不知道。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-04-15T11:57:03.887

Please remove http then u check..

for example

```
<iframe id="player" src="www.youtube.com/embed/XfI....Ctpo?enablejsapi=1&origin=https://yourdomain.com&showinfo=0&iv_load_policy=3&modestbranding=1&theme=light&color=white&rel=0" frameborder="0"></iframe> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-10-01T01:07:55.017

您的网站设计是否有可能尝试通过 http 调用而不是 https 来获取 youtube 视频？我不知道您网站的布局，但如果您只是希望它停止抱怨，那应该这样做。

也就是说，youtube 确实有有效的 https 证书，但这是由于谷歌集成。由于您不是 google，因此在访问 youtube 的内容时，您不会被视为有效的证书持有者（这正是 SSL 旨在防止的事情）。

所以，基本上，如果可以的话，只需通过 http 而不是 https 嵌入。您的网站仍然可以是 https，而不是对 youtube 的调用。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-05-12T06:43:05.293

只需用冒号删除（ http 或 https ），它将完美运行

例子

`<iframe id="player" src="//www.youtube.com/embed/XfI....Ctpo?enablejsapi=1&origin=https://yourdomain.com&showinfo=0&iv_load_policy=3&modestbranding=1&theme=light&color=white&rel=0" frameborder="0"></iframe>`

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2014-03-30T18:13:50.630

一个更简单的方法是下载视频本身，然后在您的服务器上本地链接到它，例如将其保存在与您的页面相同的目录中，然后直接链接到那里。

# scala - Akka 2.1 异常处理 (Scala)

> ID：14820489
> 
> 赞同：2
> 
> 时间：2013-02-11T20:41:58.630
> 
> 标签：scala, akka, actor, akka-supervision

我有一个监督 Akka 演员，它使用路由器将消息转发给工作演员。

我有一个包装主管的类，当我在该类上调用一个方法时，它“要求”主管做某事，然后我`Await.result(theFuture)`用来等待结果（没有结果我无法继续）。

如果工作人员抛出异常，我想重新启动抛出异常的工作人员，并且我希望调用包装类的代码捕获异常。

我将 a 传递`OneForOneStrategy`给路由器构造函数，它`RESTART`在 a 的情况下返回`Exception`。在`postRestart`worker的方法中，我记录了重启，所以我可以验证worker是否真的被重启了。

当工作人员抛出异常时，它会重新启动，但异常会消失。这`Future`是询问主管的结果，包含一个异常，但它是 a `akka.pattern.AskTimeoutException`，仅在 5 秒而不是 20 秒后抛出，这是我一直徘徊的隐式超时。异常实际上在工作程序启动后不到一秒发生。

**问题 1：**如何从调用我的包装类的代码中的工作人员那里获取异常？

另外，worker的receive方法是这样的：

```
def receive = {
    case r: Request => 
        val response = ??? //throws an exception sometimes
        sender ! response
} 
```

有些东西正在将异常记录到控制台，但这不是我的代码。堆栈跟踪是：

```
[ERROR] [02/11/2013 21:34:20.093] [MySystem-akka.actor.default-dispatcher-9]  
[akka://MySystem/user/MySupervisor/MyRouter/$a] Something went wrong!
    at myApp.Worker.$$anonfun$receive$1.applyOrElse(Source.scala:169)
at akka.actor.ActorCell.receiveMessage(ActorCell.scala:425)
at akka.actor.ActorCell.invoke(ActorCell.scala:386)
at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:230)
at akka.dispatch.Mailbox.run(Mailbox.scala:212)
at akka.dispatch.ForkJoinExecutorConfigurator$MailboxExecutionTask.exec(AbstractDispatcher.scala:502)
at scala.concurrent.forkjoin.ForkJoinTask.doExec(ForkJoinTask.java:262)
at scala.concurrent.forkjoin.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:975)
at scala.concurrent.forkjoin.ForkJoinPool.runWorker(ForkJoinPool.java:1478)
at scala.concurrent.forkjoin.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:104) 
```

第 169行是上面方法列表中显示`Source.scala`的行。`val response = ???``receive`

**问题 2：**谁将该异常记录到控制台，我该如何阻止它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T18:08:56.357

1)

```
try somethingThatCanFail() catch {
    case e: Exception => sender ! Status.Failure(e); throw e
} 
```

“告诉失败”会导致调用者获得包含异常的失败。投掷“e”会导致调用 oneForOneStrategy 重新启动工作程序。

2)

> 记录故障的是参与者系统本身，唯一让它安静下来的方法是通过创建和配置您自己的 LoggingAdapter 来过滤掉事情，如此处所述 [http://doc.akka.io/docs/akka/2.1。 0/scala/logging.html](http://doc.akka.io/docs/akka/2.1.0/scala/logging.html)有一张票可以改变这个 [https://www.assembla.com/spaces/akka/tickets/2824](https://www.assembla.com/spaces/akka/tickets/2824)但它是针对 Akka 2.2

[由https://groups.google.com/forum/#!topic/akka-user/fenCvYu3HYE](https://groups.google.com/forum/#!topic/akka-user/fenCvYu3HYE)回答

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T01:25:20.793

为了收到您的孩子失败的通知，您需要

*   首先`watch`是孩子
*   然后，当演员死亡时，您将收到一个`Terminated()`对它的引用。

就像是：

```
class ParentActor extends Actor {
   // this is sample of how to watch for death of one of your children 
   val childActor = context.actorOf(Props[SomeService], "SomeService")
   val dyingChild = context.watch(context.actorOf(childActor))

   def receive = {
     case Terminated(`dyingChild`) =>
        println("dyingChild died") 
     case Terminated(terminatedActor) => 
        println(s"This child just died $terminatedActor")
   }
 } 
```

希望这可以帮助。

# javascript - 从 JQuery Mobile 站点切换到 PC 站点时如何加载新样式表

> ID：14820490
> 
> 赞同：2
> 
> 时间：2013-02-11T20:42:00.340
> 
> 标签：javascript, css, ruby-on-rails

[我正在为我的移动站点使用 JQuery Mobile，并通过Railscast#199](http://railscasts.com/episodes/199-mobile-devices?view=asciicast)`mobile_device?`中的方法在该站点和我正常的完整 PC 站点之间切换

**application_controller.rb**

```
before_filter :prepare_for_mobile

def mobile_device?
  if session[:mobile_param]
    session[:mobile_param] == "1"
  else
    request.user_agent =~ /Mobile/
  end
end
helper_method :mobile_device?

def prepare_for_mobile
  session[:mobile_param] = params[:mobile] if params[:mobile]
  if mobile_device?
    if request.format == :js
      request.format = :mobilejs
    else
      request.format = :mobile
    end
  end
end 
```

这种方法允许我从我的 JQuery 移动站点切换到我的 PC 站点。

```
<%= link_to "PC Site", :mobile => 0 %> 
```

但是，它不加载 PC 站点样式表。因此，必须第二次重新加载页面才能使 CSS 生效。

如何在第一次尝试时加载 CSS？

**编辑：**

我的样式表分别添加到`application.html.erb`和`application.mobile.erb`

**应用程序.html.erb**

```
<%= stylesheet_link_tag "application" %>
<%= javascript_include_tag "application" %> 
```

**应用程序.mobile.erb**

```
<%= stylesheet_link_tag "mobile" %>
<%= javascript_include_tag "mobile" %> # this is where my jquery mobile js file is 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T00:31:16.940

问题是 jquery Mobile 默认为 AJAX，所以我需要做的就是按如下方式禁用它。

```
<%= link_to "PC Site", :mobile => 0, "data-ajax" => "false" %> 
```

# asp.net-mvc - 使用@html.validationmessagefor 显示验证错误

> ID：14820492
> 
> 赞同：0
> 
> 时间：2013-02-11T20:42:07.323
> 
> 标签：asp.net-mvc, model-view-controller, asp.net-mvc-4, validation

我正在尝试`@Html.ValidationMessageFor()`用于在 MVC 中显示错误，并且正在尝试执行以下操作：`@Html.ValidationMessageFor(@ViewBag.Price)`但出现语法错误。我想要验证这个输入：

`input type="number" value="@ViewBag.Price" name="CurrentPrice"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:48:05.780

您收到语法错误，因为`ValidationMessageFor`接受了`Func`. 您不能只在其中使用 @ViewBag.Price 并假设它会起作用。该方法的 MSDN 定义[就在这里](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.validationextensions.validationmessagefor%28v=vs.98%29.aspx)。

您需要做的是将该方法映射到您的模型类中的特定字段（即不是 ViewBag），以便 MVC 准确地知道在提交后返回验证消息的位置。

您也可以只使用`ValidationMessage`，它将采用一个字段而不是`Func`. 可以在[这里](http://msdn.microsoft.com/en-us/library/dd410404%28v=vs.90%29.aspx)找到一个很好的使用示例。

# c - 如何测试简单的http服务器

> ID：14820495
> 
> 赞同：0
> 
> 时间：2013-02-11T20:42:21.727
> 
> 标签：c, httpserver

我正在尝试测试我用 c 编写的小型非持久 http 服务器。问题是当我尝试测试它时，我无法将套接字（80）绑定到端口。例如（我尝试通过本地主机访问我的电脑，然后我指定端口；本地主机：端口）。我收到错误地址已在使用中。如果我尝试通过另一个端口访问电脑，比如 localhost:7000，那么我可以绑定并且程序运行，但是页面没有加载，我无法发送内容。

编辑：我正在使用 Ubuntu。

```
 port = 6788;

 fd = socket(AF_INET, SOCK_STREAM, 0); 

  memset(&serv_addr, 0, sizeof(serv_addr));
  serv_addr.sin_family = AF_INET;
  serv_addr.sin_addr.s_addr = INADDR_ANY;
  serv_addr.sin_port = htons(port);

  bind(fd, (struct sockaddr*)&serv_addr, sizeof(serv_addr))
  listen(fd,3);

  (inf loop)
  {
        afd =  accept(......); 
   .
   .
   .  
  } 
```

# c# - 我的 cmdlet 无法注册

> ID：14820500
> 
> 赞同：0
> 
> 时间：2013-02-11T20:42:41.900
> 
> 标签：c#, powershell, cmdlets, cmdlet

基本上代码来自 msdn.microsoft.com

构建代码后，我打开命令提示符并输入：Installutil -i %path%/Mycmdlets.dll

结果表明安装阶段成功完成，提交阶段也成功完成。但是，如果我去：

Get-PSSnapin -Registered ，仅显示 sqlServerCmdletSnapin，但我的 cmdlet 不存在。添加 pssnapin 也不起作用。

```
using System;
using System.Management.Automation;
using System.Management.Automation.Runspaces;
using System.ComponentModel;

namespace Mycmdlets
{

[Cmdlet("hy", "Hello")]
public class GetHelloCommand : Cmdlet
{
    protected override void EndProcessing()
    {
        WriteObject("Hello", true);
    }
}

[RunInstaller(true)]
public class GetProcPSSnapIn01 : PSSnapIn
{
    /// <summary>
    /// Create an instance of the GetProcPSSnapIn01 class.
    /// </summary>
    public GetProcPSSnapIn01()
        : base()
    {
    }

    /// <summary>
    /// Specify the name of the PowerShell snap-in.
    /// </summary>
    public override string Name
    {
        get
        {
            return "GetProcPSSnapIn01";
        }
    }

    /// <summary>
    /// Specify the vendor for the PowerShell snap-in.
    /// </summary>
    public override string Vendor
    {
        get
        {
            return "Microsoft";
        }
    }

    /// <summary>
    /// Specify the localization resource information for the vendor. 
    /// Use the format: resourceBaseName,VendorName. 
    /// </summary>
    public override string VendorResource
    {
        get
        {
            return "GetProcPSSnapIn01,Microsoft";
        }
    }

    /// <summary>
    /// Specify a description of the PowerShell snap-in.
    /// </summary>
    public override string Description
    {
        get
        {
            return "This is a PowerShell snap-in that includes the get-proc cmdlet.";
        }
    }

    /// <summary>
    /// Specify the localization resource information for the description. 
    /// Use the format: resourceBaseName,Description. 
    /// </summary>
    public override string DescriptionResource
    {
        get
        {
            return "GetProcPSSnapIn01,This is a PowerShell snap-in that includes the get-proc cmdlet.";
        }
    }
}
} 
```

# 编辑：

对于任何有兴趣了解解决方案的人来说，原因只是系统不支持 x64。解决方案只是在 c# 项目的属性中，将平台目标设为“任何 CPU”而不是 x86 或 x64。

此外，Get-PSSnapin 不会显示错误消息，但如果您从 Visual Studio 的命令提示符运行它，它会说它工作正常；但是在 powershell 命令提示符下运行它会显示失败消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T16:11:34.340

根据 Nacht 评论，我将答案粘贴到：

对于任何有兴趣了解解决方案的人来说，原因只是系统不支持 x64。解决方案只是在 c# 项目的属性中，将平台目标设为“任何 CPU”而不是 x86 或 x64。

此外，Get-PSSnapin 不会显示错误消息，但如果您从 Visual Studio 的命令提示符运行它，它会说它工作正常；但是在 powershell 命令提示符下运行它会显示失败消息。

# ios - stringByAppendingString 未连接

> ID：14820508
> 
> 赞同：3
> 
> 时间：2013-02-11T20:43:06.667
> 
> 标签：ios, objective-c

我正在尝试获取一个字符串数组并获取每个项目并将其转换为字符串格式。我编写了一个方法来执行此操作，因为我需要将列出的数组值连接到另一个字符串中。由于某种原因，我无法正确列出数组值，因此返回了一个空白字符串。

```
- (NSString*)listParameters:(NSArray*)params
{
NSString *outputList = @"";

if (params) {
    for (int i=0; i<[params count]; i++) {
        NSLog(@"%@",[params objectAtIndex:i]);
        [outputList stringByAppendingString:[params objectAtIndex:i]];
        if (i < ([params count] - 1)) {
            [outputList stringByAppendingString:@", "];
        }
    }
}
NSLog(@"outputList: %@", outputList);
return outputList;
} 
```

第一条日志语句正确返回了一个字符串（因此数组中肯定有一个字符串），但第二条日志语句仅返回“outputList：”。

我尝试让 outputList 开始不仅仅是一个不起作用的空字符串。我也尝试分配`[params objectAtIndex:i]`给一个字符串然后附加它，也没有工作。

我觉得我在这里遗漏了一些明显的东西，但我无法让它发挥作用。

我怎样才能让这个字符串数组打印成一个用逗号分隔的字符串？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-11T20:50:24.987

您可能希望使用[NSMutableString](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableString_Class/Reference/Reference.html)来代替它的 appendString 方法。NSString 是不可变的。

```
- (NSString*)listParameters:(NSArray*)params
{
    NSMutableString *outputList = [[NSMutableString alloc] init];

    if (params) {
        for (int i=0; i<[params count]; i++) {
            NSLog(@"%@",[params objectAtIndex:i]);
            [outputList appendString:[params objectAtIndex:i]];
            if (i < ([params count] - 1)) {
                [outputList appendString:@", "];
            }
        }
    }

    NSLog(@"outputList: %@", outputList);
    return outputList;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T20:44:05.303

您需要将结果`[outputList stringByAppendingString:[params objectAtIndex:i]]`分配`[outputList stringByAppendingString:@", "]`给`outputList`.

如果您使用 NSMutableString 的实例来代替，那会更好`outputList`，因为否则您将在该循环中创建很多自动释放的对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T20:47:10.793

尝试：

```
outputList = [outputList stringByAppendingString:@", "]; 
```

as stringByAppendingString 通过返回一个新字符串来工作

# asp.net-mvc - 在 Asp.Net MVC 网站中维护状态

> ID：14820509
> 
> 赞同：2
> 
> 时间：2013-02-11T20:43:21.450
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我目前正在设计一个基于 MVC 的新网站，我想知道管理状态的正确方法是什么。
状态应该包含 userId 和用户信息的一些结构，并且应该在用户登录的整个会话期间保持（跨 http 请求）

重要标准：
1) 支持可扩展性
2) 性能

最简单的方法是使用 Session 对象，但它不支持可伸缩性。如果会话期间的不同请求通过不同的 IIS 服务器，则不会保留会话。虽然我听说过负载平衡工具通过同一台机器路由单个会话的所有请求，但我不确定依赖它是否是一个好习惯（不是吗？）

我读过的另一个选择是将状态数据保存在运行 RAM DB 的特殊状态服务器中（如 Linux 的 Cassandra 或 Windows 的 Redis）。但在我看来，在开发的这个阶段有点矫枉过正。

你有什么其他的建议？我想从现在简单的东西开始，但要为将来更高级的解决方案做好准备。

任何最佳实践或代码/设计建议将不胜感激。

谢谢，
艾迪。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T20:57:09.587

**（1）**使用[Sql Server](http://support.microsoft.com/kb/317604)存储Session State

**(2)**使用[Memcached 作为 Session State Provider](http://memcachedproviders.codeplex.com/)

**(3)**在外部缓存提供程序上使用缓存来制作您自己的解决方案：考虑使用类似[ServiceStack 缓存框架](https://github.com/ServiceStack/ServiceStack/wiki/Caching)的东西。使用它，您可以使用 Redis、Memcached、Azure 或 AWS 来处理缓存。

接下来，创建一个 KeyFactory 来处理特定项目的密钥生成。项目键将包括 UserId（您将始终从`FormsAuthentication`UserId 获得（假设您正在使用`FormsAuthentication`）。然后将用户的任何 Session 数据存储在缓存中。使用这种方法，您使用 Caching 代替`Session`，并且缓存可以在多个服务器之间共享。

注意：您可以有不同的方法来清除用户在开始新会话时的数据。潜在的方法包括：

*   Include the user's session start dateTime in the cacheKey, and auto-expire entries when they are no longer fresh
*   Clear out all potential entries for a user when they begin a new session

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T20:55:21.047

如果您使用的是 .NET 4.5 并且取决于您为用户保留的信息的类型和数量，您可能希望查看使用[声明](http://msdn.microsoft.com/en-us/library/ff359101.aspx)来存储有关用户的信息。在 .NET 4.5 中，所有 Principal 都从[ClaimsPrincipal](http://msdn.microsoft.com/en-us/library/system.security.claims.claimsprincipal.aspx)继承。ClaimsPrincipal 已经使用声明来存储用户名、角色和其他信息。您可以创建自己的[服务来转换声明](http://msdn.microsoft.com/en-us/library/hh987036.aspx)，这将允许您向 Principal 用户添加其他信息。

# c# - SQL 到 LINQ 的转换

> ID：14820520
> 
> 赞同：-2
> 
> 时间：2013-02-11T20:43:52.923
> 
> 标签：c#, sql, linq, linq-to-sql

我需要帮助生成所需的 C# 代码来实现以下 SQL 查询。我不确定这是否可能？

```
select p.Name, r.Id, r.Status, r.Created, r.DepartmentId
from (select r.*, row_number() over (partition by personid order by created desc) as seqnum
      from checkin r
      where r.departmentid = '7AF20674-AEC1-4D4C-B1EA-88B1D7E8F3DB' and cast(created as date) = '2013-02-11'
     ) r join
     person p
     on r.personid = p.id
where seqnum = 1
order by p.name desc 
```

以前我每人每天只有一个注册，所以以下是可能的。现在我可以每人每天进行几次注册，这就是 SQL 更新的原因。

```
 var query = from b in context.Persons
                join c in context.CheckIns
                    on b.Id equals c.PersonId into JoinedPersCheck
                from c in JoinedPersCheck.Where(i => i.Date.Equals(date)).DefaultIfEmpty()
                where b.DepartmentId.Equals(departmentId)
                orderby b.Name

                select new Model.PersonCheckIn
                {
                    CheckIn = MapToCheckInModel(c),
                    Person = MapToModel(b),
                };
    return query; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:14:55.093

尝试这个：

```
var query = context.CheckIns
               .Where(p => p.DepartmentId == departmentId && p.Created.Date == date)
               .GroupBy(r => r.PersonId)
               .Select(g => g.OrderByDescending(p => p.Created).First())
               .Join(context.Persons, c => c.PersonId, p => p.Id, 
                        (c,p) => new { p.Name, c.Id, c.Status, c.Created, c.DepartmentId})
               .OrderByDescending(f => f.Name); 
```

# javascript - 在 Sencha Touch 选择字段中填充图标

> ID：14820527
> 
> 赞同：12
> 
> 时间：2013-02-11T20:44:20.007
> 
> 标签：javascript, html, extjs, sencha-touch, sencha-touch-2

我有一个非常简单的问题，其解决方案根本不是那么简单。
我想在a**的每个选项前面添加图像**`selectfield`。更准确地说，我想将图像添加到`picker`它的触发器，以及选择字段的当前值。
为了简单起见，我将创建一个小示例：

假设您希望用户在**Diamonds、Hearts、Spades 和 Clubs**四种扑克牌花色中选择一种。为了支持视觉识别，您希望在每个西装名称前面加上相应的符号，所以它可能看起来像这样：
![带有图标的选择域](../Images/2115bd495294d985994a90238f3955b0.png)

我第一个选择 sencha touch 组件，它可以从一组给定的选项中进行选择，自然是`selectfield`. 不幸的是，它似乎只能显示**纯文本**，仅此而已。在深入挖掘了 sencha touch 资源后，我终于想出了半个解决方案。基本上，我传递了`selectfield`一个 custom `defaultPhonePickerConfig`，其中对应的`picker`（用于`selectfield`显示选项的）被分配了一个 custom `itemTpl`。剩下`itemTpl`的就是添加一些 html 来显示图像：

```
defaultPhonePickerConfig: {
    listeners: {
        initialize: function() {
            var slots = this.query('pickerslot');
            Ext.each(slots, function(slot) {
                slot.setItemTpl('<img src="someImage.jpg"> {text}');
            });

        },

        change: function() {
            // reconstruct the selectfield's change handler,
            // since it gets overwritten
            var iconSelect = Ext.Viewport.query('#IconSelect')[0];
            iconSelect.onPickerChange.apply(iconSelect, arguments);
        }
    }
} 
```

可以在[此处](http://jsfiddle.net/MBumQ/4/)找到此解决方案的工作**小提琴**。

我的解决方案还不错，但是有一个轻微的外观问题，这对我来说是不可接受的：图标仅显示在（上面屏幕截图的`picker`下部），而**不是**`selectfield`本身（上部，灰色部分）时该选项被选中。而且似乎也没有向选择字段的当前值添加图标的好方法。

这就是我的问题的主要关注点：有什么好的方法可以为选择器的选项和选择字段的当前值添加一个**图标**？我可能只需要在现有解决方案中添加相对较少的代码，还是应该采取完全不同的方法？
每一份贡献都值得赞赏。谢谢！

**更新：**
经过一番*折腾*，我找到了一种方法（一种丑陋的方法）在`selectfield`自身前面加上一个图标。它主要基于残酷的 HTML DOM 操作：我现在还为`selectfield`自身定义事件处理程序（`change`和`painted`）。在初始化和每次更改值时，我的处理程序都会在生成的 DOM 中搜索底层`<input>`并对其进行处理。（那个坏男孩可能是我们一开始不能分配 HTML 的原因，因为框架改变了它的`value`属性。`value`另一方面，它只能包含纯文本。）
这就是我定义`selectfield`'s 的方式`listeners`：

```
listeners: {
       change: function () {
           var pickerDOM = document.querySelector('#' + this.getId() + ' input[name="picker"]');
           PickerIcons.app.prependIconToSelectfield(arguments[1], pickerDOM);
       },
       painted: function () {
           // Initialize an icon on creation
           var pickerDOM = document.querySelector('#' + this.getId() + ' input[name="picker"]');
           PickerIcons.app.prependIconToSelectfield(this.getValue(), pickerDOM);
       }
} 
```

对应的函数`prependIconToSelectfield()`只是定义了一些 CSS：

```
prependIconToSelectfield: function (optValue, domElement) {
    var iconUrl = this.getIconUrl(optValue);
    domElement.style.backgroundImage = 'url(' + iconUrl + ')';
    domElement.style.backgroundSize = '20px 20px';
    domElement.style.backgroundRepeat = 'no-repeat';
    domElement.style.backgroundPosition = 'left center';
    domElement.style.paddingLeft = '30px';
} 
```

查看[此小提琴](http://jsfiddle.net/Sz5cu/3/)以获取工作示例。

这对我来说仍然不是一个好的解决方案，因为按照我的口味进行这种骇人听闻的 DOM 操作太*流氓了。*我不知道在更大的项目中积极搞乱 DOM 的副作用是什么，并且不想以艰难的方式学习它。所以，我仍在寻找更清洁的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T10:05:13.977

当你尝试做一些开箱即用的事情时，首先要赞叹煎茶触摸是非常难以操作的。话虽如此，让我尝试并提出您想要的解决方案。sencha 中的 selectfield 具有以下 DOM 标记结构。

```
div.x-field-select
    div.x-field-input
        input.x-input-el
        div.x-clear-icon
        div.x-field-mask 
```

现在专注于 x-clear-icon 它通常是隐藏的，因为选择字段不需要清除按钮。首先为它编写一个css类来显示它（显示：块）。这将使用类似于文本字段的 X 按钮显示它，并且它将定位在右上角。您可以通过 css 将其定位到左侧，并在更改选择字段时将其背景更改为您想要的。这不是一个非常直接的解决方案，但我已经尝试过类似的问题并且它有效。从你上面所做的来看，我认为你可以做到。一切顺利。希望我的解决方案有所帮助。

# sass - 编写这个 Sass 动画延迟函数的更好方法是什么？

> ID：14820529
> 
> 赞同：0
> 
> 时间：2013-02-11T20:44:27.990
> 
> 标签：sass, css-animations

所以我发现我可以在 Sass 中做数学运算和分配变量。所以我去创建一个延迟例程堆栈，这样我就可以轻松地重新定时并在排序队列中向前推送其他 css3 动画，而不必一直在页面上上下滚动以寻找那条愚蠢的行。

我知道这不是一个真正的功能，但在大多数情况下它是有效的！并且一旦设置可以节省一些时间。但是设置它是最烦人的，然后如果我改变了订单的想法。

呸，否则我想与那些搜索相同内容的人分享这段代码。

```
$Atime: 2.0s;
$Btime: $Atime + 0.2s;
$Ctime: $Btime + 1.0s;
$Dtime: $Ctime + 0.3s;
$Etime: $Dtime + 0.3s;
$Ftime: $Etime + 0.3s;
$Gtime: $Ftime + 1.0s;
$Htime: $Gtime + 1.2s;
$Itime: $Htime + 0.3s;
$Jtime: $Itime + 0.4s; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:35:21.770

我想不是，因为重新审视它时它太简单了。关闭。

# c# - 保护 Web 方法

> ID：14820530
> 
> 赞同：0
> 
> 时间：2013-02-11T20:44:33.140
> 
> 标签：c#, javascript, ajax, asp.net-mvc, security

假设我在 c# MVC 中有一个使用 ajax 发送电子邮件的方法，例如：

```
public class mailController : Controller {

        SmtpClient mailserver = new SmtpClient("smtp.foo.com");

        public string send(string from, string to, string subject = "", string body = "", string cc = "", string bcc = "") {
            MailMessage message = new MailMessage(from, to, subject, body);
            if (cc.Length > 0) {
                message.CC.Add(cc);
            }
            if (bcc.Length > 0) {
                message.Bcc.Add(bcc);
            }
            mailserver.Send(message);
            return "MessageSent";
        }
    } 
```

我能做些什么来使这更安全吗？我的意思是，就目前而言，*任何人都*可以在他们的地址栏中输入相关信息。`http://www.foo.com/mail/send?from=etc`如果我想用它来提交表单，我不能用密码保护它，或者我必须在很容易找到的 javascript 中使用它。我考虑过设置一个 cookie 并将其用作身份验证，但仅此而已。**是否有保护 ajax 方法的标准程序？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:45:53.073

您需要**在服务器**上验证参数是否符合您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T20:51:13.873

您需要实施安全会话令牌，以防止未经授权的用户（没有有效会话的用户）能够发送电子邮件。这基本上与任何其他跨站点请求伪造 (CSRF) 攻击向量没有什么不同。如果您需要任何其他信息，只需 Google 'CSRF protection ASP.NET`' 或类似内容，以获取有关如何执行此操作的更具体示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T21:08:44.763

您的要求听起来是相互排斥的。

如果您确实想公开它，但又不希望它被滥用，那么也许您可以提供某种限制，只允许来自特定 IP 地址的 x 个请求。

您还可以在 HTML 表单中使用 mailto: 来提示客户端发送电子邮件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T21:40:34.507

首先，您始终可以存储访问您的控制器的 IP，如果相同的 IP 试图以您定义的特定频率发送邮件，您可以决定以任何方式阻止它......其次，您可以在邮件中生成一个随机数将发送到控制器的页面 -> 这将允许您验证邮件是从您的站点发送的，而不是从第三方发送的

# c - malloc 通过 _int_malloc 导致分段错误

> ID：14820533
> 
> 赞同：7
> 
> 时间：2013-02-11T20:44:45.740
> 
> 标签：c, segmentation-fault, malloc

我有一个树结构，我也添加了大量节点。完成的次数（在运行之间清理树）和节点数作为命令行参数给出。对于大约 < 6000 的节点数量和任意数量的运行，程序按预期执行。但是，当节点数超过此值并且运行次数超过 50 左右时，程序会导致分段错误。

```
 Program received signal SIGSEGV, Segmentation fault.
    _int_malloc (av=0x7ffff7201740 <main_arena>, bytes=112) at malloc.c:3570
    3570    malloc.c: No such file or directory. 
```

也使用回溯跟踪

```
#0  _int_malloc (av=0x7ffff7201740 <main_arena>, bytes=112) at malloc.c:3570
#1  0x00007ffff6ecbfb5 in __GI___libc_malloc (bytes=112) at malloc.c:2924
#2  0x0000000000401a99 in createTreeForQuad (quad=...) at cs257.c:217
#3  0x0000000000401b3a in addQuadsToTree (tree=tree@entry=0x2f965c8) at cs257.c:230
#4  0x0000000000401dec in addBody (tree=tree@entry=0x2f965c8, body=...) at cs257.c:292
#5  0x0000000000402146 in addBodyToCorrectQuad (body=..., tree=tree@entry=0x2f961c8) at cs257.c:245
#6  0x0000000000401eaf in addBody (tree=tree@entry=0x2f961c8, body=...) at cs257.c:296
#7  0x0000000000402146 in addBodyToCorrectQuad (body=..., tree=tree@entry=0x2f95dc8) at cs257.c:245 
```

请注意，addBody -> addBodyToCorrectQuad -> addBody 递归在大量节点处发生大量次数。malloc 失败的代码如下。

```
Tree *createTreeForQuad(Quad quad) {
Tree *tree;
tree = (Tree *)malloc(sizeof*tree);
if (tree != NULL){
    tree->quad = quad;
    tree->internal = 0;
    tree->bodyEmpty = 1;
    return tree;
}else{
   printf("\n ------------------------------------ MALLOC FAILED----------------------------------------");
    }
} 
```

我用来释放树的代码如下，在根节点上调用它，当树是叶子时，内部标志设置为 0。

```
void cleanTree(Tree **tree) {
    if((*tree)->internal == 0) {
        free(*tree);
    }
    else{
        cleanTree(&((*tree)->NE));
        cleanTree(&((*tree)->SE));
        cleanTree(&((*tree)->SW));
        cleanTree(&((*tree)->NW));
        cleanTree(&((*tree)->NE1));
        cleanTree(&((*tree)->NW1));
        cleanTree(&((*tree)->SE1));
        cleanTree(&((*tree)->SW1));
        free(*tree);
    }
} 
```

树结构看起来像这样

```
typedef struct Tree Tree;
struct Tree {
    Body body;
    Quad quad;
    Tree *NE;
    Tree *NW;
    Tree *SE;
    Tree *SW;
    Tree *NE1;
    Tree *NW1;
    Tree *SE1;
    Tree *SW1;
    int internal;
    int bodyEmpty;
}; 
```

将 Body 添加到树的代码如下，`addBodyToCorrectQuad`调用`addBody`了 body 所在的 quad。

```
void addBody(Tree **tree, Body body) {
   if( (*tree)->bodyEmpty == 1) { 
        (*tree)->body = body;
        (*tree)->bodyEmpty = 0;
    }
    else {
        if((*tree)->internal) {
            (*tree)->body = combineBody((*tree)->body, body);
            addBodyToCorrectQuad(body, tree);
            //printf("B\n");
        }
        else{
            (*tree)->internal = 1;   /
            addQuadsToTree(tree);
            //printf("%f",((*tree)->NW)->quad.x);
            addBodyToCorrectQuad((*tree)->body, tree);
            (*tree)->body = combineBody((*tree)->body, body);
            addBodyToCorrectQuad(body, tree);
            //printf("C\n");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T20:59:19.613

您在某处发生了堆损坏——有人在数组末尾运行或取消引用无效指针或在释放某个对象后使用它。

尝试使用[valgrind](http://valgrind.org/)或其他一些内存调试工具来缩小问题所在。

# sql - SQL：查询许多具有相同列名但结构不同的特定值的表

> ID：14820540
> 
> 赞同：3
> 
> 时间：2013-02-11T20:45:12.390
> 
> 标签：sql, sql-server

我正在清理 ERP，我需要删除对未使用用户和用户组的引用。有很多外键约束，因此我想确保真正摆脱所有痕迹！

我发现这个整洁的代码花絮可以在我的数据库中找到具有特定列名的所有表，在这种情况下，让我们看看用户组：

```
select table_name from information_schema.columns
where column_name = 'GROUP_ID' 
```

有了结果，我可以在 40 多个表中搜索我未使用的 ID……但这很乏味。所以我想自动化这个并创建一个循环遍历所有这些表并删除它`Unused_Group`在`GROUP_ID`列中找到的行的查询。

在删除任何我想可视化现有数据的内容之前，我开始使用字符串连接构建类似的东西：

```
declare @group varchar(50) = 'Unused_Group'
declare @table1 varchar(50) = 'TABLE1'
declare @table2 varchar(50) = 'TABLE2'
declare @tableX varchar(50) = 'TABLEX'

select @query1 = 'SELECT ''' + rtrim(@table1)  + ''' as ''Table'', '''
+ rtrim(@group) + ''' = CASE WHEN EXISTS (SELECT GROUP_ID FROM ' + rtrim(@table1)
+ ' WHERE GROUP_ID = ''' + rtrim(@group) + ''') then ''MATCH'' else ''-'' end FROM '
+ rtrim(@table1)

select @query2 = [REPEAT FOR @table2 to @tableX]...

EXEC(@query1 + ' UNION ' + @query2 + ' UNION ' + @queryX) 
```

这给了我结果：

```
TABLE1  |  Match
TABLE2  |  -
TABLEX  |  Match 
```

这适用于我的目的，我可以在不更改任何其他代码的情况下为任何用户组运行它，当然很容易适应`DELETE`这些相同的表，但对于我必须在用户和用户之间处理的 75 个左右的表来说是无法管理的团体。

[我在动态 SQL 上](http://www.sommarskog.se/dynamic_sql.html)遇到了这个链接，它的强度和密度足以让我暂时吓跑......但我认为解决方案可能就在某个地方。

我对`FOR()`JS 和其他语言中的循环非常熟悉，这对于结构良好的数组来说是小菜一碟，但显然它在 SQL 中并不那么简单（我还在学习，但发现了很多关于FOR 和 GOTO 解决方案可用...）。理想情况下，我有一个脚本，可以查询以查找具有特定列名的表，如上所述查询每个表，然后向我吐出一个匹配列表，然后执行第二个类似的脚本来删除行。

谁能帮我指出正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:37:15.263

好的，试试这个，有三个变量；列、colValue 和预览。Column 应该是您正在检查相等性的列 (Group_ID)，colValue 是您要查找的值 (Unused_Group)，preview 应该是 1 以查看您将删除的内容，0 以删除它。

```
Declare @column     Nvarchar(256),
        @colValue   Nvarchar(256),
        @preview    Bit

Set     @column     = 'Group_ID'        
Set     @colValue   = 'Unused_Group'
Set     @preview    = 1 -- 1 = preview; 0 = delete

If      Object_ID('tempdb..#tables') Is Not Null Drop Table #tables
Create  Table #tables (tID Int, SchemaName Nvarchar(256), TableName Nvarchar(256))

--      Get all the tables with a column named [GROUP_ID]
Insert  #tables
Select  Row_Number() Over (Order By s.name, so.name), s.name, so.name
From    sysobjects so
Join    sys.schemas s
        On  so.uid = s.schema_id
Join    syscolumns sc
        On  so.id = sc.id
Where   so.xtype = 'u'
And     sc.name = @column

Select  *
From    #tables

Declare @SQL Nvarchar(Max),
        @schema Nvarchar(256),
        @table Nvarchar(256),
        @iter Int = 1

--      As long as there are tables to look at keep looping
While   Exists (Select  1
                From    #tables)
Begin
        --      Get the next table record to look at
        Select  @schema = SchemaName,
                @table = TableName
        From    #tables
        Where   tID = @iter

        --      If the table we're going to look at has dependencies on tables we have not 
        --      yet looked at move it to the end of the line and look at it after we look 
        --      at it's dependent tables (Handle foreign keys)
        If      Exists (Select  1
                        From    sysobjects o
                        Join    sys.schemas s1
                                On  o.uid = s1.schema_id
                        Join    sysforeignkeys fk
                                On  o.id = fk.rkeyid
                        Join    sysobjects o2
                                On  fk.fkeyid = o2.id
                        Join    sys.schemas s2
                                On  o2.uid = s2.schema_id
                        Join    #tables t
                                On  o2.name = t.TableName Collate Database_Default
                                And s2.name = t.SchemaName Collate Database_Default
                        Where   o.name = @table
                        And     s1.name = @schema)
        Begin
                --      Move the table to the end of the list to retry later
                Update  t
                Set     tID = (Select Max(tID) From #tables) + 1
                From    #tables t
                Where   tableName = @table
                And     schemaName = @schema

                --      Move on to the next table to look at
                Set     @iter = @iter + 1
        End
        Else
        Begin
                --      Delete the records we don't want anymore
                Set     @Sql =  Case
                                When    @preview = 1 
                                Then    'Select * ' -- If preview is 1 select from table
                                Else    'Delete t ' -- If preview is not 1 the delete from table
                                End +
                                'From    [' + @schema + '].[' + @table + '] t
                                Where   ' + @column + ' = ''' + @colValue + ''''

                Exec    sp_executeSQL @SQL;

                --      After we've done the work remove the table from our list
                Delete  t
                From    #tables t
                Where   tableName = @table
                And     schemaName = @schema

                --      Move on to the next table to look at
                Set     @iter = @iter + 1

        End
End 
```

将其转换为存储过程只需将顶部的变量声明更改为 sproc 创建，这样您就可以摆脱...

```
Declare @column     Nvarchar(256),
        @colValue   Nvarchar(256),
        @preview    Bit

Set     @column     = 'Group_ID'        
Set     @colValue   = 'Unused_Group'
Set     @preview    = 1 -- 1 = preview; 0 = delete
... 
```

并将其替换为...

```
Create  Proc DeleteStuffFromManyTables (@column Nvarchar(256), @colValue Nvarchar(256), @preview Bit = 1)
As
... 
```

你会用...来称呼它

```
Exec    DeleteStuffFromManyTable 'Group_ID', 'Unused_Group', 1 
```

我对代码进行了注释，以帮助您了解它在做什么；祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T20:59:59.653

你在`INFORMATION_SCHEMA`对象的正确轨道上。在查询编辑器中执行以下操作，它会为包含具有值的列的表生成`SELECT`和语句。`DELETE``GROUP_ID``'Unused_Group'`

```
-- build select DML to manually review data that will be deleted
SELECT 'SELECT * FROM [' + TABLE_SCHEMA + '].[' + TABLE_NAME + '] WHERE [GROUP_ID] = ''Unused_Group'';'
FROM INFORMATION_SCHEMA.COLUMNS
WHERE COLUMN_NAME = 'GROUP_ID';

-- build delete DML to remove data
SELECT 'DELETE FROM [' + TABLE_SCHEMA + '].[' + TABLE_NAME + '] WHERE [GROUP_ID] = ''Unused_Group'';'
FROM INFORMATION_SCHEMA.COLUMNS
WHERE COLUMN_NAME = 'GROUP_ID'; 
```

由于这似乎是一次性的清理工作，特别是因为您需要在删除数据之前对其进行检查，所以我看不出让这变得更复杂的价值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T21:30:52.913

如果可以，请考虑添加参照完整性并强制执行级联删除。在删除数据之前，它不会帮助可视化数据，但有助于控制孤立的行。

# c++ - 使用指向基本抽象类的指针访问子类成员

> ID：14820541
> 
> 赞同：6
> 
> 时间：2013-02-11T20:45:18.720
> 
> 标签：c++, oop, class, pointers, inheritance

```
class a //my base abstract class
{
public:
virtual void foo() = 0;
};

class b : public a //my child class with new member object
{
public:
void foo()
{}
int obj;
};

int main()
{
b bee;
a * ptr = &bee;
ptr->obj; //ERROR: class a has no member named "obj"
} 
```

我的问题是，当我有一个指向基类（“a”）的指针指向子类（“b”）对象时，如何访问“obj”成员？我知道铸造应该可以解决问题，但我正在寻找更好的解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-11T20:50:54.087

您可以使用`dynamic_cast<>`运算符将​​指向的指针转换为指向`a`的指针`b`。`ptr`只有当指向的对象的运行时类型为时，转换才会成功`b`，否则将返回空指针，因此您必须在转换后检查结果：

```
b* p = dynamic_cast<b*>(ptr);
if (p != nullptr)
{
    // It is safe to dereference p
    p->foo();
} 
```

但是，如果您可以保证 所指向的对象的类型`ptr`是`b`，那么在这种情况下（因为不涉及虚拟继承），您甚至可以使用 a `static_cast<>`，因为它是在编译时执行的，因此开销较小。

```
b* p = static_cast<b*>(ptr);
// You are assuming ptr points to an instance of b. If your assumption is
// correct, dereferencing p is safe
p->foo(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T20:47:01.693

您将不得不放弃继承层次结构。您的案例是为使用适当的类型量身定制的，`dynamic_cast`因为它允许您以类型安全的方式检查您尝试投射的对象是否实际上是预期的类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-17T21:58:57.677

在 GCC 和 Clang 中（我认为在 Visual Studio 中），您还可以使用以下语法糖

```
if (Derived* x = dynamic_cast<Derived*>(x)) {
     // do something with \c x now that we know its defined     
} 
```

在 C++11 中，使用`auto`类型推断，甚至更好

```
if (auto x = dynamic_cast<Derived*>(x)) {
     // do something with \c x now that we know its defined     
} 
```

最后，如果我们想限制为只读访问

```
if (const auto x = dynamic_cast<Derived*>(x)) {
     // read something from \c x now that we know its defined     
} 
```

请注意，这很好地限制了 if 子句内部的范围，如果我们使用's 和's`x`一个接一个地执行多个连续的 dynamic_cast，这通常会更方便。`if``else if`

# sql - SQL 过程删除系统特权

> ID：14820543
> 
> 赞同：-4
> 
> 时间：2013-02-11T20:45:40.317
> 
> 标签：sql, oracle, plsql

我正在尝试创建一个程序来删除某个用户的系统权限。当我编译我的代码时，我得到“编译错误”

```
create or replace procedure deactivate_user 
(
p_username in varchar2
)
as
l_username varchar2(30):=upper(p_username);
cnmd varchar2(50);
begin
    for rec (select privilege, admin_option from dba_sys_privs
            where grantee = l_username) loop
            cnmd := 'REVOKE '||rec.privilege||' from '||l_username;
execute immediate cnmd;
end loop;
end;
/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:50:48.423

`IN`声明中缺少您`FOR`；它应该是：

```
FOR rec IN (SELECT privilege, admin_option FROM dba_sys_privs
            WHERE grantee = l_username) LOOP 
```

请参阅[http://docs.oracle.com/cd/E11882_01/appdev.112/e17126/static.htm#CIHCGJAD](http://docs.oracle.com/cd/E11882_01/appdev.112/e17126/static.htm#CIHCGJAD)

# java - Java 中的 ImageIcon 更新（来自互联网）？

> ID：14820547
> 
> 赞同：3
> 
> 时间：2013-02-11T20:46:13.467
> 
> 标签：java, url, networking, imageicon

我有一些带有图像的 URL。此图像在每个请求期间更新（即，对（相同）URL 的每个请求都返回一个新图像）。比如说，这个 URL 指向 CAPTCHA。我的目标是在我的程序中加载和显示几个这样的图像。

以下代码将这些图像加载到我的本地文件系统并且工作正常（也就是说，所有图像都是不同的、唯一的）：

```
String filePath;
String urlPath;
int numOfFilesToDownload;

//Here filePath and urlPath are initialized.
//filePath points to the directory, where to save images
//urlPath is the url from where to download images
//numOfFilesToDownload is the number of files to download

for(int i = 0; i < numOfFilesToDownload; i++){
    //Initializing connection
    URL url = new URL(urlPath);
    HttpURLConnection conn = (HttpURLConnection) url.openConnection();

    //Downloading image
    try(InputStream is = conn.getInputStream();
        FileOutputStream os = new FileOutputStream(filePath + "img" + i + ".jpg")){
        int b;
        while((b = is.read()) != -1)
            os.write(b);
    }
} 
```

但是当我尝试以下事情时，发生了一些奇怪的事情：

```
for(int i = 0; i < numOfFilesToDownload; i++){
    //Initializing image from the url
    URL url = new URL(urlPath);
    javax.swing.ImageIcon ico = new javax.swing.ImageIcon(url);

    //Showing the graphical dialog window with the image
    javax.swing.JOptionPane.showMessageDialog(null, ico);
} 
```

在后一种情况下，每个对话框都包含*相同*的图像，即在第一次迭代期间下载的图像。

此外，实验表明，如果将“?r=”连接到 urlPath（即简单的 GET 请求参数），则 url 仍然有效。下面的代码似乎是有效的，并且完全符合它的功能（即显示的每个图像都与前一个*不同*）：

```
for(int i = 0; i < numOfFilesToDownload; i++){
    //Initializing image from the url
    URL url = new URL(urlPath + "?r=" + i);
    javax.swing.ImageIcon ico = new javax.swing.ImageIcon(url);

    //Showing the graphical dialog window with the image
    javax.swing.JOptionPane.showMessageDialog(null, ico);
} 
```

因此我可以得出一个结论，ImageIcon 以某种方式记住了它处理的 URL，并且根本不费心执行相同的工作两次......为什么以及如何？javadocs 中没有关于它的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T21:42:42.607

当我尝试您的代码的变体时，它运行良好。我的[SSCCE](http://SSCCE.org)：

```
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;

import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JOptionPane;
import javax.swing.SwingUtilities;

public class TestUrls {
   public static final String BASE_URL_PATH = "http://static.ed.edmunds-media.com/" +
        "unversioned/adunit/homepage_showcase/";
   public static final String[] URL_PATHS = {
      "honda-odyssey-2013.png",
      "chevrolet-impala-2013.png",
      "mazda-cx9-2013.png",
      "toyota-rav4-2013-2.png"
   };

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            for (String urlPath : URL_PATHS) {
               String fullUrlPath = BASE_URL_PATH + urlPath;
               try {
                  URL url = new URL(fullUrlPath);
                  BufferedImage img = ImageIO.read(url);
                  ImageIcon icon = new ImageIcon(img);
                  JOptionPane.showMessageDialog(null, icon);
               } catch (MalformedURLException e) {
                  e.printStackTrace();
               } catch (IOException e) {
                  e.printStackTrace();
               } 
            }
         }
      });
   }
} 
```

# entity-framework - EntityFramework 连接超过 2 个实体的表

> ID：14820553
> 
> 赞同：0
> 
> 时间：2013-02-11T20:46:26.613
> 
> 标签：entity-framework, entity-framework-5

我有 4 个表/实体，它们分为两组，警报和收件人。一个组中的任何一个实体都可以映射到另一个组的任何一个实体（一个警报可以有许多收件人和收件人组等）。

表：

*   警报
*   AlertGroups（与警报的一对多关系）
*   收件人
*   RecipientGroups（与收件人的多对多关系）

我不想制作 4 个可连接对象（AlertRecipients、AlertRecipientGroups 等），而是制作一个包含 4 列的连接表，每一列都是我的一种实体类型的可为空的 FK。

我已经在 SQL 中创建了表格，并使用 Fluent API 设置了我的上下文，如下所示：

```
modelBuilder.Entity<AlertGroup>()
                .HasMany(ag => ag.RecipientGroups)
                .WithMany(rg => rg.AlertGroups)
                .Map(m => m.ToTable("AlertRecipients")
                    .MapLeftKey("AlertGroupID")
                    .MapRightKey("RecipientGroupID"));

            modelBuilder.Entity<AlertGroup>()
                .HasMany(ag => ag.Recipients)
                .WithMany(rg => rg.AlertGroups)
                .Map(m => m.ToTable("AlertRecipients")
                    .MapLeftKey("AlertGroupID")
                    .MapRightKey("RecipientID")); 
```

但我得到这个错误：

> 指定的架构无效。错误：
> 
> (251,6)：错误 0019：已定义具有架构“dbo”和表“AlertRecipients”的实体集“AlertGroupRecipient”。每个 EntitySet 必须引用一个唯一的模式和表。

有没有一种解决方法可以做我想做的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:52:14.057

EF 无法以这种方式做到这一点。使用 EF，您需要为每个多对多关系使用单独的连接表（因为这是您应该这样做的方式）。如果您想以自己的方式执行此操作，则不能在映射中使用多对多关联。相反，您必须将您的实体“升级”`AlertRecipients`到真实实体（模型中的另一个类）并处理诸如一对多关联之类的所有事情。

# asp.net-mvc - HMAC 与 ASP.NET WebAPI 使用 Cuong 的解决方案

> ID：14820558
> 
> 赞同：1
> 
> 时间：2013-02-11T20:46:53.017
> 
> 标签：asp.net-mvc, oauth, asp.net-web-api, hmac, dotnet-httpclient

我今天花了一些时间查看 C# 中的各种 HMAC 实现，以了解即将推出的 WebAPI 项目。我想从一些现有的代码开始，只是为了在我从头开始编写它或根据我的需要修改它之前更好地了解它。

这里和网络上都有很多很棒的文章和帖子。但是，我已经到了需要一些指示的地步，并且非常感谢一些见解。

我从 Cuong 的帖子开始：[如何保护 ASP.NET Web API](https://stackoverflow.com/questions/11775594/how-to-secure-an-asp-net-web-api/11782361)。

我知道我必须扩展它，因为我想同时支持 json 和 formencoded 数据。我的测试客户端也是使用 HttpClient 用 C# 编写的，我创建了一个空的 WebAPI 项目并使用 ValuesController。

以下是我的观察和问题：

1.  发布：为了让 Cuong 的代码正常工作（验证成功），我的 POST 需要在 URL 中包含参数，但是为了将值发送到我的控制器，我需要将它们包含在正文中。这对于这种类型的身份验证是否正常？在这个特定的例子中，我正在散列的消息是 http://:10300/api/values?param1=value1¶m2=value2。现在我可以手动解析查询字符串以获取它们，但是为了通过绑定将值获取到我的控制器，我还必须：

    ```
    var dict = new Dictionary<string, string>
                       {
                           {"param1", "value1"},
                           {"param2", "value2"}
                       };
    var content = new FormUrlEncodedContent(dict);

    var response = await httpClient.PostAsync(httpClient.BaseAddress, content); 
    ```

否则，我的参数在 ValuesController 的发布操作中始终为空。

1.  我计划扩展代码以包含随机数。在随机数、时间戳和动词的组合之间，对于安全散列来说足够了吗？真的需要散列消息吗？

2.  我尝试（非常不成功）扩展代码以支持 json 以及形成编码数据，但我一定遗漏了一些明显的东西。

3.  Cuong 使用 Authentication 和 Timestamp 标头，而不是将签名和时间戳放在查询字符串中。一种方法比另一种方法有好处吗？我读过的大多数文章都在查询字符串本身中包含它们。

代码看起来很棒，我在这里有点不合时宜。我可能更安全（更理智？）只是从头开始写它以欣赏它的细微差别。也就是说，如果有人可以对我所看到的内容有所了解，那就太好了。

归根结底，我希望能够使用 WebAPI 框架的内置授权机制来简单地为方法/控制器赋予属性，能够接受表单编码和 json 数据，并为复杂类型合理地模型绑定。

*** 更新 ***

我今天做了更多的工作，下面是我的 nUnit PostTest 中的代码。我想出了如何在不将它们包含在正文和查询字符串中的情况下获取值（下面的代码）。

```
[Test]
    public async void PostTest()
    {
        using (var httpClient = new HttpClient())
        {
            var payload = new FormUrlEncodedContent(new Dictionary<string, string>
                       {
                           {"key1", "value1"},
                           {"key2", "value2"}
                       });

            var now = DateTime.UtcNow.ToString("U");
            httpClient.BaseAddress = new Uri(string.Format("http://ipv4.fiddler:10300/api/values"));
            httpClient.DefaultRequestHeaders.Add("Timestamp", now);
            httpClient.DefaultRequestHeaders.Add("Authentication", string.Format("test:{0}", BuildPostMessage(now, httpClient.BaseAddress, await payload.ReadAsStringAsync())));

            var response = await httpClient.PostAsync(httpClient.BaseAddress, payload);

            await response.Content.ReadAsStringAsync();

            Assert.AreEqual(true, response.IsSuccessStatusCode);

        }
    } 
```

我还弄清楚了它的模型绑定部分。这里有一篇很棒的文章：[http](http://www.west-wind.com/weblog/posts/2012/Mar/21/ASPNET-Web-API-and-Simple-Value-Parameters-from-POSTed-data) ://www.west-wind.com/weblog/posts/2012/Mar/21/ASPNET-Web-API-and-Simple-Value-Parameters-from-POSTed-data解释了POST 是如何工作的，我能够让它与我自己设计的模型以及 FormDataCollection 对象一起工作。

现在我想知道是否值得添加 json 编码的消息，或者标准化 FormUrlEncoding 是否是要走的路。此外，客户端通知是否足够，或者我应该实现服务器端通知？服务器端通知是否将所有对服务的调用加倍（第一个抛出 401，第二个包含带有通知的有效负载？

# datetime - 可空日期时间和空日期仍显示为 1/1/0001

> ID：14820559
> 
> 赞同：0
> 
> 时间：2013-02-11T20:46:53.510
> 
> 标签：datetime, jqgrid, asp.net-mvc-4, nullable

在我的 jqGrid 中，我想在我的网格中有空值......

相反，我得到 1/1/0001

我的 dateTime 模型类型都可以为空。

我错过了什么吗？？？

这是代码...

```
public DateTime? DischargeDateTime { get; set; } 
```

大家有什么推荐的？

```
 tableToGrid("#frTable", {
            cmTemplate: { sortable: false },
            caption: '@TempData["POPNAME"]' + ' Population',
            height: '400',
            gridview: true,
            shrinkToFit: false,
            autowidth: true,
            colNames: ['Edit',
                   'MRN',
                   'Hospital Fin',
                   'First Name',
                   'Last Name',
                   'Date of birth',
                   'Completed Pathway',
                   'Completed Pathway Reason',
                   'PCP Appointment',
                   'Specialist Appointment',
                   'Admit Date',
                   'Discharge Date',
                   'Discharge Disposition',
                   'Discharge To',
                   'Discharge Advocate Call',
                   'Home Healthcare',
                   'Safe Landing Accepted',
                   'PCP Name',
                   'PCP Phone',
                   'PCP Appointment Location',
                   'Specialist Name',
                   'Specialist Phone',
                   'Specialist Appointment Location',
                   'Comments',
                   'Patient Room Phone',
                   'Phone',
                   'Payor',
                   'MRN Type'
                   ],
            colModel: [
                   { name: 'Edit', width: 95, align: 'left' },
                   { name: 'MRN', width: 125, align: 'left' },
                   { name: 'Hospital_Fin', width: 145, align: 'left' },
                   { name: 'First_Name', width: 115, align: 'left' },
                   { name: 'Last_Name', width: 115, align: 'left' },
                   { name: 'Date_of_birth', width: 145, align: 'left' },
                   { name: 'Completed_Pathway', width: 125, align: 'left', editOptions: {value:"1:Yes;0:No"} },
                   { name: 'Completed_Pathway_Reason', width: 165, align: 'left' },
                   { name: 'PCP_Appointment', width: 115, align: 'left' },
                   { name: 'Specialist_Appointment', width: 125, align: 'left' },
                   { name: 'Admit_Date', width: 185, align: 'left' },
                   { name: 'Discharge_Date', width: 185, align: 'left' },
                   { name: 'Discharge_Disposition', width: 155, align: 'left' },
                   { name: 'Discharge_To', width: 85, align: 'left' },
                   { name: 'Discharge_Advocate_Call', width: 155, align: 'left' },
                   { name: 'Home_Health_Care_Accepted', width: 105, align: 'left' },
                   { name: 'Safe_Landing_Accepted', width: 165, align: 'left' },
                   { name: 'PCP_Name', width: 85, align: 'left' },
                   { name: 'PCP_Phone', width: 85, align: 'left' }, // formatter: formatPhoneNumber,
                   { name: 'PCP_Appointment_Location', width: 185, align: 'left' },
                   { name: 'Specialist_Name', width: 195, align: 'left' },
                   { name: 'Specialist_Phone', width: 135, align: 'left' }, //, formatter: formatPhoneNumber
                   { name: 'Specialist_Appointment_Location', width: 185, align: 'left' },
                   { name: 'Comments', width: 185, align: 'left' },
                   { name: 'Patient_Room_Phone', width: 135, align: 'left' }, //, formatter: formatPhoneNumber
                   { name: 'Phone', width: 125, align: 'left' }, //, formatter: formatPhoneNumber
                   { name: 'Payor', width: 155, align: 'left' },
                   { name: 'MRN_Type', width: 135, align: 'left' }
                   ]
        }); 
```

我的数据库中确实有几个空值返回......不知道为什么这不起作用......

目前正在尝试 UIHint ...

```
@if (Model == null){
    <text></text>
}else{
    <text></text>
} 
```

除了现在一切都显示不正确

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:11:02.797

好的...我知道我做错了什么。在我的存储库层中，我忘记了我有一个方法可以获取被拉包、解析的字符串日期，如果值为 null，我将设置最小日期。

我现在已经改变了它，使它返回一个空值，或者一个解析的日期......

```
 public static DateTime? ValueOrMin(string value)
    {
        if (string.IsNullOrWhiteSpace(value)) return null;
        return DateTime.Parse(value);
    } 
```

谢谢。

# java - Java - Int,Short,Char 二进制操作

> ID：14820569
> 
> 赞同：0
> 
> 时间：2013-02-11T20:47:45.793
> 
> 标签：java, binary, bit-manipulation, bitwise-operators

正如我目前所知，以下是正确的：

*   char 8 位值，例如 0 0 0 0 0 0 0 0
*   短 16 位值，例如 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
*   int 32 位值，例如 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0

我知道以上听起来很白痴，但我想描述每一步。

所以我有值 1 和 29，如果我正确的话，它们都是 8 位。

```
 1: 0 0 0 0 0 0 0 1
29: 0 0 0 1 1 0 0 1 
```

现在因为这些是 8 位，我可以执行以下操作

```
char ff = (char) 1;
char off = (char) 29; 
```

所以这就是我讲述我的两个价值观。

我现在想连接这些值，所以它看起来像二进制中的 1 2 9 ，即：0 0 0 0 0 0 0 1 0 0 0 1 1 0 0 1

我目前在做：

```
short concat = (short) (ff | off) 
```

但是当它应该是 285 时得到结果 29，因为二进制应该是

32768 16384 8192 4096 2048 1024 512 256 128 64 32 16 8 4 2 1

0 0 0 0 0 0 0 1 0 0 0 1 1 0 0 1

我到底哪里错了:(？

-- 更新代码解决方案 --

```
byte of= (byte) 29;
byte fm1 = (byte) 1;
char ph1 = (char) (fm1<<8 | of); 
```

或者是短 ph2 = (short) (fm1 <<8 | of);

什么更好，因为都有 16 位？

```
System.out.println((int)ph1); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T20:49:55.430

您需要将位左移 8 位。

```
short concat = (short) (ff <<8 | off) 
```

管道是按位或，所以你最终把相同的位放在同一个地方，把 1 放在第一个或者第二个字符有 1 的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T20:50:41.440

char 是两个字节

字节是一个字节

```
byte ff  = (byte)  1;
byte off = (byte) 29;
short concat = (ff << 8)|off; 
```

# python - 在一个 Django 应用程序中模拟装饰器

> ID：14820570
> 
> 赞同：1
> 
> 时间：2013-02-11T20:47:47.487
> 
> 标签：python, django, mocking, django-unittest, python-mock

我想测试

*   如果视图装饰器正常工作
*   如果调用了正确的视图

所以，这里的装饰器`get_object`和视图`features`在`myapp.views`.

```
@get_object
def features(request, object):
    return {} 
```

我试着嘲笑这个：

```
new_view = Mock(__name__='features', return_value={})
decorated = get_object(new_view)

with patch('myapp.views.features') as features:
    features = decorated
    client = Client()
    response = client.get('/features')
    print new_view.call_args 
```

这没有显示任何内容，好像没有调用模拟对象，尽管我想它应该是。

如何正确模拟装饰视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T05:52:49.693

当你打电话时，`patch`你正在用一个全新的`MagicMock`. 由于您正在为您的视图手动构建一个模拟，您应该做一些更像（未经测试）的事情：

```
new_view = Mock(__name__='features', return_value={})
features = get_object(new_view)

with patch('myapp.views.features', features):
    client = Client()
    response = client.get('/features')
    print new_view.call_args 
```

这将替换`myapp.views.features`为您的手卷模拟。

一般来说，尽管我建议您在不使用 Django 测试客户端的情况下单独测试您的装饰器。您真的在这里将两个测试合二为一。第一个是确保装饰器完成它的职责，另一个是确保请求被正确路由。

# hadoop - 跨多个数据中心分布数据节点

> ID：14820571
> 
> 赞同：7
> 
> 时间：2013-02-11T20:47:51.877
> 
> 标签：hadoop, distributed-computing

有没有人尝试过跨多个数据中心测试数据节点的性能？特别是在带有小管道的网络上。我似乎找不到太多关于它的信息，而且我发现的信息要么是旧的（大约 2010 年）要么是专有的（似乎 DataStax 有一些东西）。我知道 Hadoop 支持机架感知，但就像我说的，我还没有看到任何用于为多个数据中心调整系统的文档。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-13T19:17:53.900

我已经尝试使用 12 x DataNode 集群以 2:1 的比例分布在相距大约 120 英里的两个数据中心之间。跨 2 x 1GbE 管道的数据中心之间的延迟约为 4 毫秒。

站点 A 配置了 2 个机架，站点 B 配置了 1 个机架。每个“机架”中有 4 台机器。我们基本上是在将站点 B 测试为“DR”站点。复制因子设置为 3。

长话短说，它有效，但性能非常非常糟糕。您肯定必须在源、映射和减少输出上使用压缩以缩小写入 I/O，如果站点之间的链接用于其他任何用途，您将在传输数据时遇到超时。TCP 窗口化将有效地将我们的传输限制在 4MBps 左右，而不是 1GbE 线路上潜在的 100MBps+。

省去自己的麻烦，只需使用 distcp 作业来复制数据！

# java - 在java中转换字符串数组

> ID：14820572
> 
> 赞同：-2
> 
> 时间：2013-02-11T20:48:01.500
> 
> 标签：java, android

我可以像这样转换数组：

```
String [] [] friend = new String [] [] {{{robert, marie}, {jhony, eva}, ​​{mike, laura}, ​​{adrian, rachel}, {kristen, anthony}}; 
```

随机选择两对情侣，结果是这样的：

```
String [] [] friend = new String [] [] {{{robert, marie}, {adrian, rachel}}; 
```

以后这样做：

```
String [] friendfin = new String [] {{robert, marie, adrian, rachel}}; 
```

任何人都可以帮助我使用此代码...谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:51:55.693

这是一种方法：

```
String[][] friends = new String[][]{
   {robert, marie}, {jhony, eva}, ​​{mike, laura},
   ​​{adrian, rachel}, {kristen, anthony}
};
List<String> list = new ArrayList<String>();
for(String[] array : friends)
{
    for(String friend : array) list.add(friend);
}
Collections.shuffle(list);
String[] friendfin = new String[list.length];
list.toArray(friendfin); // fill the array
friendfin = Arrays.copyOf(friendfin, 4); 
```

# dreamweaver - Dreamweaver cs6 和 SCSS

> ID：14820576
> 
> 赞同：5
> 
> 时间：2013-02-11T20:48:28.973
> 
> 标签：dreamweaver, sass

我无法让我的 Dreamweaver CS6 将 sass (SCSS) 文件加载为 css（它不会着色）。它在 CS5.5 版本上运行良好。现在我有了带有所有更新（12.0.3）的全新 DW CS6，并且我修改了所有需要的文件。说明在[这里](http://blog.assortedgarbage.com/2012/03/using-dreamweaver-with-sass-and-less/)或[这里](http://tracehello.wordpress.com/2011/03/19/making-dreamweaver-cs5-read-scss-as-css/)。

DW 仍然不会对我的代码应用着色，并且当（打开 scss 文件时）我转到首选项-> 代码着色时，突出显示的文档类型是文本。

有任何想法吗？也许我必须修改 CS6 中的其他文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T21:24:42.703

我找到了解决方案。在 CS6 中，除了两个教程（问题中链接）中列出的文件外，还有一个文件需要更改。它是位于 AppData 文件中的**MMDocumentTypes.xml ：**

**C:\Users{用户名}\AppData\Roaming\Adobe\Dreamweaver CS6\en_US\Configuration\DocumentTypes**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-29T18:04:19.870

我对 Dreamweaver CS6 也有同样的问题。

我必须更新**隐藏**库文件夹中的文件

首先启用查找器以显示隐藏文件。

打开终端并粘贴以下内容：

```
defaults write com.apple.Finder AppleShowAllFiles YES 
```

重启终端：

按住“Alt”键，将鼠标放在“Finder 图标”——您的应用栏并“右键单击”。出现一个菜单，然后单击“重新启动”</p>

1.  打开 Finder 并转到“您的文件夹”
2.  转到（按文件夹打开文件夹）库。应用程序支持、Adobe、Dreamweaver CS6、en_US、配置
3.  在那里编辑 Extentions.txt 和 DocumentTypes/MMDocumentTypes.xml 文件。
4.  重新启动 Dreamweaver，您应该一切顺利。

更新您的终端以隐藏隐藏文件

```
defaults write com.apple.Finder AppleShowAllFiles NO 
```

完整说明来自这里： http: [//www.fastinfo.com.au/dreamever-syntax-highlight-for-less-and-sass/](http://www.fastinfo.com.au/dreamever-syntax-highlight-for-less-and-sass/)

# python - 如何直接查询Django为ManyToMany关系创建的表？

> ID：14820579
> 
> 赞同：46
> 
> 时间：2013-02-11T20:48:38.520
> 
> 标签：python, django, many-to-many

我有一个`MyModel2`与`ManyToManyField`另一个模型相关的模型`MyModel1`。

我怎样才能得到对`mymodel1.id, mymodel2.id`，如 Django 为这种关系创建的表中所示？我是否必须对此表执行原始 SQL 查询，或者是否可以通过此模型的对象管理器进行查询？

```
class MyModel1(models.Model):
    name = models.CharField(max_length=50)

class MyModel2(models.Model):
    name = models.CharField(max_length=50)
    mymodel1 = models.ManyToManyField(MyModel1) 
```

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2013-02-11T20:53:17.100

这是多对多字段实例：

```
MyModel2.mymodel1 
```

这是中间表模型：

```
MyModel2.mymodel1.through 
```

这是中间模型管理器：

```
MyModel2.mymodel1.through.objects 
```

这将返回所有中间模型的查询集：

```
MyModel2.mymodel1.through.objects.all() 
```

[这部分](https://docs.djangoproject.com/en/dev/topics/db/models/#extra-fields-on-many-to-many-relationships)django 文档谈论`through`. 您可以`through`自己制作模型，否则它会自动生成。

# windows-phone-7 - 网络共享 Win 8 手机

> ID：14820581
> 
> 赞同：0
> 
> 时间：2013-02-11T20:48:45.367
> 
> 标签：windows-phone-7, windows-phone-8

我在 Win8 手机上找到了网络共享。（诺基亚 Lumia）...我正在尝试为 Win8 编写类似的应用程序。但在 windows 网站上找不到任何支持。在诺基亚网站上，我只能找到如何打开，但没有别的。

所以，我心里有很多问题：

1.  Windows甚至支持网络共享还是诺基亚拥有自己的应用程序来执行此操作？
2.  这种网络共享是如何工作的？我们是在绑定 WLAN 还是其他什么？
3.  是否可以使用提供的现有 Win8 移动 API 编写类似的应用程序？
4.  它使用 DNSMasq 吗？（我假设是）

是否有任何可能的方法可以在 Win8 手机中找到已安装的应用程序和应用程序结构，就像我们在 android 手机中一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T20:21:03.323

1.  网络共享完全由 WP8 OS 实现，但它受到蜂窝运营商的严格控制。您需要支付额外费用才能启用“网络共享”（在美国）。然后共享蜂窝连接（4G、LTE），您的手机变成其他设备的 Wi-Fi 接入点。当我尝试在我的 HTC 8X 上启用网络共享（我不为网络共享付费）时，屏幕闪烁着 Wi-Fi 详细信息 - 告诉我 Wi-Fi 广播名称、密码和连接的客人数量 - 然后一秒钟后我从 T-Mobile 获取对话以上网并将网络共享添加到我的电话计划中。

2.  看上面。

3.  不，我不认为这是可能的。作为应用程序，您无法控制网络配置。

4.  我假设它提供 NAT、DHCP 和 DNS 转发。我不认为它直接使用 DNSMasq 代码。:-)

5.  出于隐私原因，您无法获取已安装应用程序的列表。只有当您为企业（不通过 Microsoft Store）编写应用程序时，您才能列出使用相同企业密钥签名的其他应用程序。请参阅[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207245.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207245.aspx)。

# jquery - jquery - 工具提示在相对位置移动

> ID：14820585
> 
> 赞同：0
> 
> 时间：2013-02-11T20:48:59.143
> 
> 标签：jquery, css, position, tooltip

我得到了这个工具提示：

```
 $(document).ready(function() {
    //Tooltips
    $(".tip_trigger").hover(function(){
        tip = $("body").find('.tip');
        tip.show(); //Show tooltip
    }, function() {
        tip.hide(); //Hide tooltip        
    }).mousemove(function(e) {
        var mousex = e.pageX + 20; //Get X coodrinates
        var mousey = e.pageY + 20; //Get Y coordinates
        var tipWidth = tip.width(); //Find width of tooltip
        var tipHeight = tip.height(); //Find height of tooltip

        //Distance of element from the right edge of viewport
        var tipVisX = $(window).width() - (mousex + tipWidth);
        //Distance of element from the bottom of viewport
        var tipVisY = $(window).height() - (mousey + tipHeight);

        if ( tipVisX < 20 ) { //If tooltip exceeds the X coordinate of viewport
            mousex = e.pageX - tipWidth - 20;
        } if ( tipVisY < 20 ) { //If tooltip exceeds the Y coordinate of viewport
            mousey = e.pageY - tipHeight - 20;
        } 
        tip.css({  top: mousey, left: mousex });
    });
}); 
```

和CSS：

```
.tip {
    color: #fff;
    background:#1d1d1d;
    display:none;
    padding:10px;
    position:relative;z-index:1000;
    -webkit-border-radius: 3px;
    -moz-border-radius: 3px;
    border-radius: 3px;
} 
```

我如何使用：

```
<a class="tip_trigger"><span class="tip">This will show up in the tooltip</span></a> 
```

问题：当工具提示位于带有 的元素内时`position: relative`，工具提示坐标发生变化，并且工具提示移开......

我想这是因为工具提示 div 是`position: absolute`，所以我该如何解决呢？

希望你能理解我，我的英语不太好......

* * *

*编辑 1*：

**完整的图片说明：** ![在此处输入图像描述](../Images/96d058791f37627db2457680717634f4.png)

* * *

*编辑 2*：我上传了我的网站，这样你就可以在现场看到它...... URL 是：[http](http://superdown.me/gladiator) ://superdown.me/gladiator 。 **在两个字段中输入值：“admin”（用户名和密码）。**

登录后，将鼠标悬停在“37.5%”处，您会在页面顶部看到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:51:53.840

使您的`.tip_trigger`位置相对：

```
.tip_trigger {
    position: relative;
} 
```

然后重新定位您的`.tip`. 现在它总是在一个相对定位的项目内并且应该是一致的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T21:05:10.053

`position: absolute`在您的 .tip 上使用。仅使用`position: relative`on `.tip_trigger`，将使您的文本翻转。

```
.tip {
    color: #fff;
    background:#1d1d1d;
    display:none;
    padding:10px;
    position:absolute;
    z-index:1000;
    -webkit-border-radius: 3px;
    -moz-border-radius: 3px;
    border-radius: 3px;
} 
```

jsfiddle：http: [//jsfiddle.net/eKWJe/3/](http://jsfiddle.net/eKWJe/3/)

**更新**

这个问题可能有另一种解决方案，但你可以把你`<span class="tip"></span>`的容器放在外面。像这样：

```
<body>
  <span class="tip">This will show up in the tooltip</span>
  <div id="header">
      ---
  </div>
</body> 
```

jsbin：http: [//jsbin.com/ojuras/2/edit](http://jsbin.com/ojuras/2/edit)

# java - 脚本 javascript 中的 if-control Java

> ID：14820587
> 
> 赞同：0
> 
> 时间：2013-02-11T20:49:14.510
> 
> 标签：java, javascript, jsp, if-statement

我有这个javascript函数：

```
function AnnullaModificaAbbonamento(){
    $("#imgModAbb").attr("src","imm/edit.png");
    $("#imgModAbb").attr("title","modifica");
    $("#imgModAbb").attr("onclick","ModificaAbbonamento()");    
    $("#submitModificaAbbonamento").remove();
    $("#primacol").text("");
    $("#secondacol").text("");
    $("#terzacol").text("");
    var primacol= "Tipo:&nbsp;<font id='h3'>a <%=a.getTipo()%></font><br>"
    +"Pagato: &nbsp;<font id='h3'> <%if (a.isPagato())
            out.println("<img src='imm/si.png'>");
        else
            out.println("<img src='imm/no.png'>");%></font><br> ";

$("#primacol").append(primacol);
var secondacol= "Data di Inizio:&nbsp;<font id='h3'><%=a.getDataInizio()%></font><br>"
+"Data di Scadenza:&nbsp;<font id='h3'><%=a.getDataScadenza()%></font><br>";
$("#secondacol").append(secondacol);
var terzacol="";
<%if (a.getTipo().equals("tempo")) %>

    terzacol="Punti bonus residui: <font id='h3><%=a.getPuntiBonus()%></font><br>"
    +"Lezioni fatte: &nbsp;<font id='h3'> <%=a.getLezioniFatte()%></font><br> ";

<%else%>
terzacol="Punti residui: &nbsp;<font id='h3'><%=a.getPunti()%></font><br>"
+"Lezioni fatte: &nbsp;<font id='h3'><%=a.getLezioniFatte()%></font><br>";

$("#terzacol").append(terzacol);

} 
```

我正在尝试在 javascript 函数中执行 if-control ...首先它是对的吗？还有另一种方法吗？另一件事：eclipse 在 else 行中给了我一个错误。它说：

```
 Syntax error on token "else", delete this token 
```

为什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:51:57.880

是的，您可以在 JSP 中插入 if。但是（至少）在这里插入了两行，这使您的语法无效。

用这个 ：

```
<% if (a.getTipo().equals("tempo")) { %>
 ...
<% } else { %>
 ...
<% } %> 
```

# c++ - 将 ULONG& 可选参数的默认值定义为 0

> ID：14820588
> 
> 赞同：0
> 
> 时间：2013-02-11T20:49:20.047
> 
> 标签：c++, methods, compiler-errors, default-parameters

以下函数声明：

```
void Foo:DoSomething( ULONG &Count = 0) { .... } 
```

导致以下编译时错误

`error C2440: default argument cannot convert from 'int' to 'ULONG &'`

创建签名的正确方法是什么，以便在没有`Count`为其值提供参数时将为零。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:53:05.193

您正在对 Count 进行非常量引用，因此默认情况下不能使用 r 值分配它。

利用

`void Foo:DoSomething( const ULONG &Count = 0) { .... }`

`void Foo:DoSomething( ULONG Count = 0) { .... }`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T20:58:42.990

您不能对非常量引用执行此操作。引用指向内存中的地址。除非您特别需要引用语义，否则我建议您仅按值传递。

# r - 试图让 tf-idf 加权在 R 中工作

> ID：14820590
> 
> 赞同：15
> 
> 时间：2013-02-11T20:49:26.583
> 
> 标签：r, tm, tf-idf, text-analysis

我正在尝试使用 tm 包进行一些非常基本的文本分析并获得一些 tf-idf 分数；我正在运行 OS X（尽管我在 Debian Squeeze 上尝试过，结果相同）；我有一个目录（这是我的工作目录），里面有几个文本文件（第一个包含*Ulysses*的前三集，第二个包含后三集，如果你必须知道的话）。

R 版本：2.15.1 SessionInfo() 报告这个关于 tm：[1] tm_0.5-8.3

相关代码：

```
library('tm')
corpus <- Corpus(DirSource('.'))
dtm <- DocumentTermMatrix(corpus,control=list(weight=weightTfIdf))

str(dtm)
List of 6
 $ i       : int [1:12456] 1 1 1 1 1 1 1 1 1 1 ...
 $ j       : int [1:12456] 2 10 12 17 20 24 29 30 32 34 ...
 $ v       : num [1:12456] 1 1 1 1 1 1 1 1 1 1 ...
 $ nrow    : int 2
 $ ncol    : int 10646
 $ dimnames:List of 2
  ..$ Docs : chr [1:2] "bloom.txt" "telemachiad.txt"
  ..$ Terms: chr [1:10646] "_--c'est" "_--et" "_--for" "_--goodbye," ...
 - attr(*, "class")= chr [1:2] "DocumentTermMatrix" "simple_triplet_matrix"
 - attr(*, "Weighting")= chr [1:2] "term frequency" "tf" 
```

您会注意到，加权似乎仍然是默认词频 (tf)，而不是我想要的加权 tf-idf 分数。

如果我遗漏了一些明显的东西，我深表歉意，但根据我读过的文档，这*应该*可行。毫无疑问，错误不在于星星......

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-11T21:00:22.687

如果您查看`DocumentTermMatrix`帮助页面，在示例中，您会看到`control`参数是这样指定的：

```
data(crude)
dtm <- DocumentTermMatrix(crude,
           control = list(weighting = function(x) weightTfIdf(x, normalize = FALSE),
                          stopwords = TRUE)) 
```

因此，权重是用名为 的列表元素指定的`weighting`，而不是`weight`。您可以通过传递函数名称或自定义函数来指定此权重，如示例中所示。但以下也适用：

```
data(crude)
dtm <- DocumentTermMatrix(crude, control = list(weighting = weightTfIdf)) 
```

# android - 导入 Android NDK 项目（解码 OGG）

> ID：14820592
> 
> 赞同：1
> 
> 时间：2013-02-11T20:49:37.740
> 
> 标签：android, android-ndk, ogg, vorbis

我正在尝试使用 NDK 项目在 Android 中解码 OGG 文件（我尝试了一些）。无论我尝试哪一个，我在构建时总是会收到类似的错误：

```
Caused by: java.lang.UnsatisfiedLinkError: Couldn't load videokit: findLibrary returned null 
```

我对 NDK 很陌生（显然），所以我不确定我做错了什么。我想做的就是能够设置OGG文件的播放速率。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T02:37:09.460

代码的 java 部分链接到一个共享库对象（.so 文件），该对象是通过使用 ndk-build 编译代码的 C++/NDK 部分获得的。在这种情况下，您的应用无法找到要加载的正确 .so 文件。以下是您可以检查的几件事 -

1.  非常基本的检查 - 您是否在 jni 文件夹中运行了“ndk-build”？如果你不这样做，则不会生成 .so 文件 - eclipse 仍会编译你的项目，但它不会工作。
2.  如果您的项目根目录是 PROJECT，请检查 $(PROJECT)/jni/libs/armeabi 或 $(PROJECT)/jni/libs/armeabi-v7a - 完成后，其中一个或两个位置应包含 .so 文件“ndk-build”命令。
3.  检查您的 java 代码中的某处，您正在此 .so 文件上调用“System.LoadLibrary”。我认为它应该是“System.LoadLibrary(videokit)”，但我不确定。

# mysql - MySQL 查询：简化子查询和联合

> ID：14820598
> 
> 赞同：0
> 
> 时间：2013-02-11T20:50:04.027
> 
> 标签：mysql

我有一个包含以下列的表：match_id、player_slot、能力、级别

每场比赛有 10 个玩家位置，每个英雄最多可以有 25 个级别和五种能力之一。我正在从 API 中提取数据，并且需要快速拉取数据，因此我对表格的设置方式没有太大的灵活性。

然而，为了显示数据，我真的很难将现有的表格格式变成可行的东西。对于每场比赛，我希望数据的布局如下：

玩家 slot1, 1 级能力, 2 级能力, ..., 16 级能力

...

玩家 slot10, 1 级能力, 2 级能力, ..., 16 级能力

我可以得到一个工作示例（[Here's an example](http://i.imgur.com/7tAO5lb.png)），但这是一个非常丑陋的查询。对于每一行，我有 15 个嵌套子查询，然后执行一个 UNION 来连接 10 行中的每一行。

查询片段：

```
SELECT player_slot, ability,
(SELECT ability FROM api_abilities WHERE match_id = 119009486 AND player_slot = 1 AND level = 2 ),
...
(SELECT ability FROM api_abilities WHERE match_id = 119009486 AND player_slot = 1 AND level = 16 )
FROM api_abilities
WHERE match_id = 119009486 AND player_slot = 1 AND level = 1 
```

我将如何简化这一点？我应该使用以不同方式呈现的这些数据创建视图或新表吗？同样复杂的是，每个玩家都会以不同的级别结束游戏。我现在所拥有的确实有效，但似乎必须有一种更有效的方式来运行查询。我尝试了一些不同的方法，但似乎无法在我的其他查询中正确地进行行合并。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:00:03.403

这种类型的转变是一个*支点*。不幸的是，MySQL 没有数据透视函数，因此您需要使用多个连接或聚合函数来复制它。

您可以使用多个连接而不是子查询：

```
SELECT 
  l1.player_slot, 
  l1.ability Level1Ability,
  l2.ability Level2Ability,
  l16.ability Level16Ability
FROM api_abilities l1
LEFT JOIN api_abilities l2
  on l1.match_id = l2.match_id 
  and l1.player_slot = l2.player_slot
  and l2.level = 2
-- .... add more joins for each level
LEFT JOIN api_abilities l16
  on l1.match_id = l16.match_id 
  and l1.player_slot = l16.player_slot
  and l16.level = 16
WHERE l1.match_id = 119009486 
  AND l1.player_slot >= 1
  AND l1.player_slot <= 10
  AND l1.level = 1 
```

或者您可以使用带有`CASE`表达式的聚合函数：

```
select
  player_slot,
  max(case when level = 1 then ability end) Level1Ability,
  max(case when level = 2 then ability end) Level2Ability,
  -- ... add more case expressions for each level
FROM api_abilities 
where match_id = 119009486 
  and player_slot >= 1
  and player_slot <= 10
group by player_shot 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T21:00:26.883

这是一种方法：

```
SELECT a.player_slot
     , MAX(IF(a.level=1,a.ability,NULL)) AS ability_at_level_1
     , MAX(IF(a.level=2,a.ability,NULL)) AS ability_at_level_2
     , MAX(IF(a.level=3,a.ability,NULL)) AS ability_at_level_3
     , MAX(IF(a.level=4,a.ability,NULL)) AS ability_at_level_4
     , MAX(IF(a.level=5,a.ability,NULL)) AS ability_at_level_5
   ...   
     , MAX(IF(a.level=15,a.ability,NULL)) AS ability_at_level_15
     , MAX(IF(a.level=16,a.ability,NULL)) AS ability_at_level_16
  FROM api_abilities a
WHERE a.match_id = 119009486
  AND a.player_slot >= 1
  AND a.player_slot <= 10
GROUP
   BY a.player_slot 
```

如果您希望查询返回多个`match_id`, 您会希望`GROUP BY`子句包含`match_id`之前的列`player_slot`, （以及将其包含在 SELECT 列表中。

```
GROUP
   BY a.match_id
    , a.player_slot 
```

为了获得最佳性能，您需要一个合适的索引。覆盖索引将（可能）提供最佳查询性能：

```
ON api_abilities (match_id, player_slot, level, ability) 
```

这是一个合适的索引的原因是因为您在列上有一个相等谓词，在`match_id`列上有一个范围谓词和一个 GROUP BY `player_slot`。（即使删除了 player_slot 上的范围谓词，此索引仍然适用。）`level`和`ability`列的包含不是绝对必要的，但包含它们会使索引成为“覆盖索引”。之所以称为“覆盖索引”，是因为可以完全从索引中满足查询（EXPLAIN 输出将显示“使用索引”），而无需访问索引下的数据页面。

MAX 聚合和 IF 函数的使用使我们能够从适当的行中“挑选”出 a.ability。（“诀窍”是对于任何不在指定级别的行，IF 函数都返回 NULL。我们对 MAX 所做的实际操作是丢弃那些 NULL 值。

如果`(match_id, player_slot, level)`是唯一的，那么 MAX 聚合函数将对一个`a.ability`值和一堆 NULL 进行操作。在更一般的情况下，如果我们不能保证它是唯一的，那么 MAX 聚合可能会在两个（或更多）非 NULL`a.ability`值上运行。`a.ability`在更一般的情况下，如果您想在每个级别返回（作为字符串）的简短列表，则 GROUP_CONCAT 聚合函数可能有用（代替 MAX） 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T20:59:25.917

在我看来，您需要更好地了解数据库规范化。根据您的描述，我仍然不确定您在此处尝试做什么，但我似乎很清楚，这些数据应该在多个表中表示（一张用于比赛，一张用于玩家，一张用于能力，一张用于相关玩家能力和能力水平，将球员与比赛联系起来，等等）。

# lua - 如何每 10 秒生成多个对象

> ID：14820599
> 
> 赞同：0
> 
> 时间：2013-02-11T20:50:06.223
> 
> 标签：lua, coronasdk, corona-storyboard

如何让这个 spawn 'math.random(1,3)' smile.png 每 10 秒，并在左屏后删除 smile.png

```
<code>
local physics = require ("physics");
physics.start();

local function listener(me)
 transition.to (me, {time = math.random(1000,4000), x = math.random(10,310), y = -30, onComplete = function()listener(me)end});
end

--Spawning multiple objects in randoms locations
local function spawnsmile()

        local smile = display.newImageRect("smile.png", 45, 45);
        smile:setReferencePoint(display.CenterReferencePoint);
        smile.x = math.random(-10, 400);
        smile.y = -40;
        transition.to( smile, {time = math.random(2000, 8000), x = math.random(-10, 400) , y = 600,});
        physics.addBody(smile, "dynamic", {density = 0.1, bounce = 0.1, friction = .1, radius = 0});

                --Adding touch event
                smile:addEventListener("touch", smile);
end
 tmr = timer.performWithDelay(0, spawnsmile, total_smiles);
<code> 
```

问候凯文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T15:13:15.217

您的代码缺少 total_smiles 值**分配**和**延迟**参数。

工作代码：

```
local physics = require ("physics");
physics.start();

local function listener(me)
    transition.to (me, {time = math.random(1000,4000), x = math.random(10,310), y = -30, onComplete = function()listener(me)end});
end

--Spawning multiple objects in randoms locations
local function spawnsmile()
    local smile = display.newImageRect("Button.png", 45, 45);
    smile:setReferencePoint(display.CenterReferencePoint);
    smile.x = math.random(-10, 400);
    smile.y = -40;
    transition.to( smile, {time = math.random(2000, 8000), x = math.random(-10, 400) , y = 600,});
    physics.addBody(smile, "dynamic", {density = 0.1, bounce = 0.1, friction = .1, radius = 0});

    --Adding touch event
    smile:addEventListener("touch", smile);
end

local total_smiles = 15
tmr = timer.performWithDelay(10000, spawnsmile, total_smiles); 
```

此外，您应该存储对创建的微笑的引用，以便正确销毁它们并且不泄漏内存。[有关内存管理的更多信息](http://www.coronalabs.com/blog/2011/08/15/corona-sdk-memory-leak-prevention-101/ "Corona SDK 内存泄漏预防 101")

```
local smiles = {}
table.insert(smiles, smile) 
```

和处置：

```
for i=#smiles,1,-1 do
   smiles[i]:removeSelf()
   smiles[i] = nil
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T07:06:03.283

将您的计时器更改为每 10.000 毫秒执行一次而不是 0。您的侦听器函数并没有真正满足任何目的，删除它并将您的 transition.to 更改为 spawnsmile 函数内部

```
 transition.to( smile, {time = math.random(2000, 8000), x = math.random(-10, 400) , y = 600, onComplete = function(obj) obj:removeSelf() obj = nil end}); 
```

那应该做你想做的事=）total_smiles里面也需要一个值，但我猜你在别处有它。

# wordpress - Magento 和 Wordpress 集成

> ID：14820600
> 
> 赞同：0
> 
> 时间：2013-02-11T20:50:10.453
> 
> 标签：wordpress, magento

在过去的几个月里，我一直在开发一个 Wordpress 网站，目的是使其成为一个电子商务网站。我最近遇到了 Magento，并意识到它是一个非常强大的电子商务框架。

我想知道是否有人对 Wordpress 和 Magento 集成有任何建议。将 Magento 作为 CMS 并将 Wordpress 用于博客方面是否更好，或者反过来也一样可行？

我还想知道是否值得我只基于我当前的 Wordpress 主题创建一个 Magento 主题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:16:59.363

我认为后者是这里最好的选择。我将 Magento 用于电子商务平台，将 Wordpress 用于相关博客。每个人都有自己的长处和短处。发挥每个最强大的部分，并与 Wordpress 分开使用 Magento。信不信由你，即使您独立使用这两个平台，您也会节省时间。此外，众所周知，Wordpress 过去存在从小到大的安全问题。另外，我不会将将为我提供薪水的引擎置于从未打算处理的位置-> 电子商务。

# iphone - 应用程序委托中的全局变量未保存

> ID：14820603
> 
> 赞同：1
> 
> 时间：2013-02-11T20:50:21.900
> 
> 标签：iphone, global-variables, appdelegate

我是 iPhone 开发的新手，所以请耐心等待。我正在尝试`AppDelegate`从另一个视图控制器访问存储在 中的数组，但是当我这样做时，它告诉我数组是空的。

我`NSMutableAarray`在`AppDelegate`名为 containerTypeArray 中创建了一个。我在名为的方法中使用对象构建数组`AppDelegate`：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

在我用对象初始化和初始化之后，我的数组的大小是 92，由以下 NSLog 消息确认：

```
NSLog(@"container type size %i", [containerTypeArray count]); 
```

我尝试在不同的视图控制器中引用数组变量。在这个视图控制器中，我导入 appdelegate.h 文件并在视图中写入以下内容加载方法：

```
 AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
     NSLog(@"count at load %i", [appDelegate.containerTypeArray count]); 
```

这次 NSLog 计数为 0。

有人可以告诉我我做错了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:57:51.580

这是因为`application:didFinishLaunchingWithOptions`在 之后调用`viewDidLoad`。

[application:didFinishLaunchingWithOptions](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html)的文档：

> 您应该使用此方法（以及相应的 application:didFinishLaunchingWithOptions: 方法）来初始化您的应用程序并准备运行。此方法在您的应用程序启动并**已加载其主故事板或 nib 文件之后**、但在您的应用程序状态恢复之前调用。在调用此方法时，您的应用程序处于非活动状态。

所以视图是在 application:didFinishLaunchingWithOptions 方法被调用之前加载的。

关于这些方法的时间安排有一个[相关的 SO 问题。](https://stackoverflow.com/questions/13293922/times-of-calling-applicationdidfinishlaunchingwithoptions-differs-between-ios)

# c# - 通过异步同步避免死锁并防止 UI 响应

> ID：14820606
> 
> 赞同：6
> 
> 时间：2013-02-11T20:50:33.057
> 
> 标签：c#, wpf, winforms, task-parallel-library

我们有一个 WPF 和/或 Winforms 客户端正在使用的库。

我们提供了一个类似于以下的异步方法：

```
Task<int> GetIntAsync() 
```

我们还（不幸地）提供了一个同步包装方法：

```
int GetInt(); 
```

它本质上只是调用异步方法并调用`.Result`其任务。

我们最近意识到在某些情况下，一些代码`GetIntAsync`需要在主 UI 线程上运行（它需要使用标记为“单”线程模型的遗留 COM 组件（即组件必须在主 STA 线程中运行，而不仅仅是任何STA线程）

所以问题是当`GetInt()`在主线程上调用时，它会**死锁**，因为

*   阻塞主`.Result`线程，
*   其中的代码`GetIntAsync()`用于`Dispatcher.Invoke`尝试在主线程上运行。

同步方法已被使用，因此删除它将是一项重大更改。因此，我们选择在我们的同步方法中使用[WaitWithPumping](http://blogs.msdn.com/b/pfxteam/archive/2010/05/04/10007499.aspx)`GetInt()`来允许对主线程的调用工作。

`GetInt()`除了从他们的 UI 代码中使用的客户端外，这工作正常。以前，他们预计 using`GetInt()`会使他们的 UI 无响应——也就是说，如果他们`GetInt()`从按钮的 click 事件处理程序中调用，他们预计在处理程序返回之前不会处理任何 Windows 消息。现在消息被抽出，他们的 UI**是**响应式的，并且可以再次单击相同的按钮（并且他们可能没有将他们的处理程序编码为可重入）。

如果有一个合理的解决方案，我们不希望我们的客户在调用`GetInt`

**问题：**

*   有没有办法`WaitWithPumping`可以抽出“调用到主”消息，但不抽出其他与 UI 相关的消息？
*   如果客户端 UI 表现得好像当前显示了一个模态对话框，尽管它是隐藏的（即用户无法访问其他窗口），这对我们的目的来说就足够了。但是，根据我的阅读，您无法隐藏模式对话框。
*   您能想到的其他解决方法将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T20:59:52.110

您可以在`GetInt`. [这](https://devblogs.microsoft.com/pfxteam/await-synchronizationcontext-and-console-apps-part-3/)是一篇讨论如何编写的博客条目。 [这是博客创建的完整解决方案](https://web.archive.org/web/20160326090906/http://blogs.msdn.com/cfs-filesystemfile.ashx/__key/communityserver-components-postattachments/00-10-26-35-55/AsyncPump_2E00_cs)。

使用它，您可以将其编写为：

```
public int GetInt()
{
    return AsyncPump.Run(() => GetIntAsync());
} 
```

这将导致按预期完全阻塞 UI 线程，同时仍确保从调用的所有延续`GetIntAsync`不会死锁，因为它们将被编组到不同的`SynchronizationContext`. 另请注意，此消息泵仍在主 STA/UI 线程上运行。

# javascript - 试图在画布中绘制弧线 - 奇怪的行为

> ID：14820607
> 
> 赞同：2
> 
> 时间：2013-02-11T20:50:33.167
> 
> 标签：javascript, html5-canvas, kineticjs

我正在尝试用弧线制作一个圆圈（类似于甜甜圈图的东西是我试图在视觉上实现的）并且我成功了。但是，边缘看起来像是一个 4 岁的孩子画的！

这就是我绘制弧线的方式：

```
var arc = new Kinetic.Shape({
    drawFunc: function(canvas) {
        var context = canvas.getContext('2d');

        var x = Math.round(canvas.width / 2);
        var y = Math.round(canvas.height / 2);
        var radius = 210;
        var startAngle = 1.44 * Math.PI;
        var endAngle = 1.83 * Math.PI;
        var counterClockwise = false;

        context.beginPath();
        context.arc(x, y, radius, startAngle, endAngle, counterClockwise);
        context.lineWidth = 175;
        canvas.fillStroke(this);
    },
    stroke: '#121b21',
    strokeWidth: 175
}); 
```

我创建了一个示例[fiddle](http://jsfiddle.net/Yxu7Z/)。

我是画布新手，所以我想它可能是我......有人可以让我知道我在这里做错了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:58:13.950

这是 WebKit 浏览器中存在的粗笔画弧错误。这可能是由于圆弧绘制代码中的一些舍入问题。您会发现它很可能在其他浏览器中看起来不错。对于 Webkit，您可以同时使用另一种方法来绘制这些楔形。

可能的解决方法：

*   使用你现在的方法，但是一旦你完成了楔子，在中间放一个白色圆圈来涂抹内部的不规则性
*   使用[Kinetic.Wedge](http://kineticjs.com/docs/symbols/Kinetic.Wedge.php)而不是 context.arc。

# eclipse - 有什么方法可以卸载 Eclipse Juno 的插件吗？

> ID：14820611
> 
> 赞同：10
> 
> 时间：2013-02-11T20:50:46.973
> 
> 标签：eclipse, eclipse-juno

处理 Eclipse Juno 的卸载/禁用插件的每个问题都提到了一个卸载按钮，但我根本找不到它，而且 Eclipse 对 Juno 的帮助很遗憾没有帮助。

这种能力是被消除或省略了，还是在朱诺的某个地方有所不同？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-11T20:56:04.253

该`Uninstall...`按钮在`About Eclipse`对话框中可用。在该对话框中单击`Installation Details`，它位于`Installed Software`选项卡下。这通常仅适用于功能，而不适用于插件。如果您可以找到包含要删除的插件的适当功能，那应该可以为您解决问题。

如果您不确定包含插件的功能，您可以尝试转到窗口`Installation History`中的选项卡`Installation Details`并尝试使用`Revert`没有插件的 Eclipse 的先前版本。

最后，您始终可以手动进入该`plugins`目录下的 Eclipse 安装文件夹并手动删除它们。这有时需要`eclipse -clean`您从命令行/终端运行才能真正摆脱插件。这可能是最容易出错的方法，因为您可能会导致功能/插件出现问题，这些问题可能取决于已删除的插件。

# android - 为什么我的某些观点有效而其他观点无效？ setRetainInstance（布尔保留）？

> ID：14820616
> 
> 赞同：0
> 
> 时间：2013-02-11T20:51:04.790
> 
> 标签：android, android-fragments

例如，我有一个包含两个搜索栏的片段，一个加载了布局 XML，另一个加载了运行时。

```
public class FragmentEqualizer extends Fragment {

    @Override
public void onCreate(Bundle state) {
    super.onCreate(state);

    setRetainInstance(true);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle b)
{       
    View view = inflater.inflate(R.layout.fragment_equalizer, container, false);
            myLinearLayout = (LinearLayout) view.findByViewId(R.id.linearLayout);
            SeekBar bar = new SeekBar(view.get.Context());
            bar.setLayoutParams(layoutParams);
            bar.setMax(100);
            bar.setProgress(50);
            myLinearLayout.addview(bar);

            return view;
    }
} 
```

当我启动应用程序并更改每个搜索栏的进度条并更改设备的屏幕方向后，加载的视图进度条状态保持不变，而在运行时加载的 wiew 进度条状态则默认为如果我没有改变。

我的问题似乎是这个[setRetainInstance 没有保留实例](https://stackoverflow.com/questions/12026442/setretaininstance-not-retaining-the-instance)

有人可以帮我吗？？？

tks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T22:23:51.230

我向 seekbar 添加了一个 ID，它可以工作。

bar.setId(1)。

# templates - Mustache 中的复杂模板组合

> ID：14820620
> 
> 赞同：0
> 
> 时间：2013-02-11T20:51:13.667
> 
> 标签：templates, template-engine, mustache

考虑一个显示用户冰箱内容的 Web 应用程序。除其他外，需要显示当前在冰箱中的水果列表。每种水果都需要非常不同的展示方式。最重要的是，会有大量不同的水果类型。

我想使用 Mustache 模板库来实现它，但我不太确定最好的方法是什么。

对于初学者，以下是每种水果的模板：

```
{{! apple.mustache }}
A {{appleType}} apple from {{groceryStore}}

{{! orange.mustache }}
An orange from {{countryOfOrigin}}

{{! banana.mustache }}
A {{ripeness}} banana

...many more templates here... 
```

**方法一**

让“视图模型”或“视图助手”对象通过创建“isBanana”/“isOrange”/等来准备模板数据。将传递给模板的键。在这种情况下，冰箱模板看起来像这样：

```
You have the following food in your fridge:

{{#fruits}}
        {{#isApple}}
                {{> apple}}
        {{/isApple}}
        {{#isOrange}}
                {{> orange}}
        {{/isOrange}}
        {{#isBanana}}
                {{> banana}}
        {{/isBanana}}
        ...more conditionals....
{{/fruits}} 
```

我已经看到这种方法在互联网上推荐了几个地方。但是，我看不出它会如何扩展：每次添加新的水果类型时都必须修改冰箱模板。这似乎也违背了 Mustache 的“无逻辑”哲学。

**方法二**

让视图模型负责为每种水果类型确定正确的模板，渲染它，并将 HTML 作为模板数据返回。冰箱模板现在看起来像：

```
You have the following food in your fridge:

{{{fruits}}} 
```

和视图模型：

```
class InventoryViewModel
{
    // ...

    function getFruits()
    {
        foreach ($this->fridge->getFruits() as $fruit) {
            if ($fruit instanceof Banana) {
                $html .= $this->mustache->render(...);
            } elseif ($fruit instanceof Apple) {
                $html .= $this->mustache->render(...);
            } else {
                // ...
            }
        }

        return $html;
    }
} 
```

这似乎比第一个选项更好，但它需要将一个 mustache 模板渲染对象注入到每个视图模型中。如果可能的话，我想避免这种耦合。

**方法 3**

使用不属于官方 Mustache 规范的某种模板组合功能。（[https://github.com/janl/mustache.js/pull/242、https://github.com/mustache/spec/issues/38](https://github.com/janl/mustache.js/pull/242)等[）](https://github.com/mustache/spec/issues/38)。

**这些选项中哪个是最好的，为什么？我是否忽略了更好的东西？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T21:02:45.643

可能最简单的方法是在 ViewModel 中使用高阶部分（lambda 部分）为您选择部分。

您的基本模板看起来像这样：

```
{{# items }}
  {{# getPartial }}{{ type }}{{/ getPartial }}
{{/ items }} 
```

当然，假设你的水果有“类型”。然后你会添加一个高阶部分`getPartial`：

```
<?php

class InventoryViewModel
{
    // ...

    function getPartial()
    {
        // you could do string manipulation here,
        // but I prefer the explicitness of a `case`

        return function($tpl, $mustache) {
            switch ($mustache->render($tpl)) {
                case 'Banana':
                    return '{{> banana }}';
                case 'Apple':
                    return '{{> apple }}';
                case 'Orange':
                    return '{{> orange }}';
            }
        };
    }
} 
```

在这种情况下，您的模板通过将逻辑移动到其随附的 ViewModel 来保持“无逻辑”，在那里可以对其进行单元测试、模拟等。

# asp.net-mvc-3 - C# MVC3 列表框回调

> ID：14820627
> 
> 赞同：0
> 
> 时间：2013-02-11T20:51:34.260
> 
> 标签：asp.net-mvc-3, callback, listbox

我`ListBox`在 MVC 中创建一个：

```
@Html.ListBoxFor(model => model.SelectedItemIds, new SelectList(Model.Items, "Value", "Text")) 
```

效果很好，我可以看到`ListBox`出现在视图中。

当用户单击并选择列表中的项目时，我想添加某种回调。如何使用 MVC3 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T08:49:10.907

你可以做这样的事情

```
@using(html.begainform( ........your action name........))
{
@Html.ListBoxFor(model => model.SelectedItemIds, new SelectList(Model.Items, "Value", "Text"))
} 
```

& 在 jquery 中你可以写这样的东西

```
 $("<Id or class of your ListBox>").change(function() {
        this.form.submit();
   }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T21:01:14.563

最好为您的 ListBox 添加一个 id 参数，然后使用 jQuery 执行您想要的任何回调。您的代码行将如下所示：

```
@Html.ListBoxFor(model => model.SelectedItemIds, new SelectList(Model.Items, "Value", "Text"), new {id = "MyListBox") 
```

之后，您可以轻松地在 jQuery 中连接一个事件，如下所示：

```
$('#MyListBox').change(function() { ...some function... } ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T21:01:28.873

您可以使用此重载添加 javascript onChange 处理程序：

```
@Html.ListBoxFor(model => model.SelectedItemIds, new SelectList(Model.Items, "Value", "Text"), new{onchange="onListBoxChanged(); return false;"}) 
```

其中 onListBoxChanged() 是 javascript 函数。

# cognos - IBM Cognos 中的向下钻取报告

> ID：14820629
> 
> 赞同：0
> 
> 时间：2013-02-11T20:51:42.623
> 
> 标签：cognos

除了 DMR（Dimensional Modeled Relation）技术，我们能否在 IBM Cognos 中开发深入报表？当我使用 DRM 包向下钻取到较低级别时，我的报告运行缓慢，而当我使用非 DRM 包直接在较低级别运行报告时，我的报告运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-03T17:11:19.843

如果不使用诸如 Transformer 或 TM1 之类的多维数据集源，则不会。

如果您无法使用该选项 - 您是否正在针对大型事实表运行报告？如果是这样，请考虑针对包含最少数据的汇总/聚合 SQL 表创建这些报告。

# c# - 无法让 MSMQ 正常工作

> ID：14820630
> 
> 赞同：1
> 
> 时间：2013-02-11T20:51:53.030
> 
> 标签：c#, .net, msmq

当我尝试发送到队列时，我不断收到错误消息

**指定的格式名称不支持请求的操作。例如，不能删除直接队列格式名称。**

我的队列名称存储在配置文件中，如下所示

“格式名称：直接=操作系统：我的计算机名称\PRIVATE$\MyQueue”

存在 2 个队列，每个队列都设置了权限，以便每个人都拥有完全控制权。

您可以假设 SyncUser = "EVERYONE" 或 "My_Domain\operator"

```
//init the queues
qSync = new MessageQueue(queueName + "-sync")
            {Formatter = new XmlMessageFormatter(new Type[] {typeof (String)})};

qClient = new MessageQueue(queueName + "-client")
            {Formatter = new XmlMessageFormatter(new Type[] { typeof(String) })}; 
```

创建队列不会导致任何错误，但是当我调用此发送函数时收到错误

```
**Send(qSync, "This is a message");** //Example

public void Send(MessageQueue queue, string msg)
{
    try
    {
        queue.Send(msg);
    }
    catch (MessageQueueException mqx)
    {
        var e = string.Format("Failed to Send - {0} | {1}", queue.QueueName, mqx.Message);
        OnSynchronizerMonitor(new SyncEvent(e));
    }
} 
```

任何帮助将不胜感激。

**编辑**

似乎我的消息**正在**发送到他们的远程队列目标，但应用程序仍然在发送的每条消息上抛出该错误。如果我在调试时查看 MessageQueues (qSync|qClient)，该错误甚至在使用之前就出现在几个内部字段中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T21:21:38.267

我希望有人可以为我确认这一点，因为我似乎找不到任何支持这一点的论坛问题或文档，但似乎 MessageQueue 与我的事件设置存在问题。

**我删除了事件调用并简单地硬编码了队列创建并在我的主进程中发送到它的位置，一切正常。**

我的设置是这样的：

服务 - 创建处理器、同步器并设置事件。

处理器启动一个**线程**，在该线程中处理字符串事务，在成功的过程中，事务需要通过同步器发送，因此处理器触发事件​​。

Synchronizer 已经创建了队列，只是等待触发事件以发送消息。

如果有人可以阐明这可能是跨线程问题还是只是我系统中的怪癖，将不胜感激。

* ***经过更多研究和一些试验和错误，似乎由于事件的跨线程复杂性而导致错误。我的猜测是，从与创建它的线程不同的线程更新 UI 对象是一个类似的问题。该错误本质上是所有权问题。虽然消息仍然存在，但队列抱怨它的原始所有者不是发起呼叫的人。**

# session - 如何确定托管在 VB 或 VFP 中的 ASP 页面/会话是否仍处于活动状态

> ID：14820634
> 
> 赞同：0
> 
> 时间：2013-02-11T20:51:58.940
> 
> 标签：session, asp-classic, vbscript

我正在使用 shell.internet ocx 托管一个网页。托管的 URL 是一个 ASPX 页面，但我的页面是经典的 ASP。我如何知道托管页面的会话是否仍然存在？

如果互联网出现故障或应用程序出现故障，则会话结束。我怎样才能确定这一点，以便我可以优雅地关闭我的托管网页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:59:04.883

**你不应该关闭网页。**把它留给用户。您应该将用户重定向到登录或其他页面，并为他们提供适当的信息。

在每个页面的顶部，您应该检查会话变量的存在并重定向到登录/错误页面。

# html - 最右边的块没有边距

> ID：14820637
> 
> 赞同：0
> 
> 时间：2013-02-11T20:52:29.360
> 
> 标签：html, css

我有很多块，我想以类似表格的方式对它们进行排序。问题是，由于最后一个的margin-right，它们并不真正符合我想要的方式。[请参阅此示例](http://jsfiddle.net/QwGV5/)。我想在一条线上有 4 个块，我该如何实现？

CSS：

```
.box {
    width: 500px;
    height: 10000px;
}

.block {
    float: left;
    width: 100px;
    height: 100px;
    margin-right: 30px;
    background-color: #0f0;
    margin-bottom: 50px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:53:49.957

您可以为每行中的最后一个块创建一个新类（例如`.last`）并`margin-right:0`为该类创建一个。

HTML：

```
<div class="box">
    <div class="block"></div>
    <div class="block"></div>
    <div class="block"></div>
    <div class="block last"></div>
    <div class="block"></div>
    <div class="block"></div>
    <div class="block"></div>
    <div class="block last"></div>
</div> 
```

CSS：

```
.last { margin-right: 0; } 
```

[JS 小提琴示例](http://jsfiddle.net/QwGV5/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T20:54:55.930

使用`last-child`CSS 选择器，如下所示：http: [//jsfiddle.net/QwGV5/1/](http://jsfiddle.net/QwGV5/1/)

```
.block:last-child {margin-right: 0;} 
```

为了兼容性：[http ://caniuse.com/css-sel3](http://caniuse.com/css-sel3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T20:55:55.727

```
div:last-child {
    margin-right: 0;
} 
```

但这仅适用于IE9+（可能是8，不记得了）

否则，在最后一门课上放一门课。

这是您的小提琴[http://jsfiddle.net/QwGV5/2/的更新](http://jsfiddle.net/QwGV5/2/)

我认为对于您想要做的事情，您实际上希望在每 4 个 div 上执行一次。所以你可以使用`nth-child`

```
.box div:nth-child(4n) {
  margin-right: 0;   
} 
```

示例：http : [//jsfiddle.net/QwGV5/4/](http://jsfiddle.net/QwGV5/4/)

# java - 如何在没有 JVM 的 Windows 上运行可执行 JAR？

> ID：14820645
> 
> 赞同：1
> 
> 时间：2013-02-11T20:53:04.537
> 
> 标签：java, windows, deployment, java-service-wrapper

我需要找到一种方法让我的 java 程序在没有 Java 的计算机上运行。我为我的学校制作了一个非常简单的调查/答案类型程序，为了更容易使用我使用了一个包装器（具体来说是 JSmooth）。但似乎对于没有安装Java的老师来说，程序并没有执行。是否有允许在没有安装 JVM 的情况下执行 Java 代码的包装器？我知道将 Java（一次编写，随处运行）转换为特定平台代码的想法非常糟糕，但这对于我的情况是必要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:10:30.207

能推荐的不多。您可能能够找到*诸如 JNC 或 GNU 编译器之类的*东西，但它们已经过时并且您的结果可能会有所不同。如果我是你，无论如何我都会试一试。有很多关于这个的现有讨论，只要环顾四周，你就会找到你需要的。

**编辑：**看看[这个](http://www.excelsior-usa.com/jet.html)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-11T20:54:28.373

试试[Java Native Compiler](http://jnc.mtsystems.ch/)之类的东西。

编辑：

另请参阅[此讨论](https://stackoverflow.com/questions/6746656/which-java-native-compilers-can-be-recommended)。

# laravel - 网址中的问号

> ID：14820647
> 
> 赞同：2
> 
> 时间：2013-02-11T20:53:14.910
> 
> 标签：laravel

我正在尝试将此[http://api.jqueryui.com/autocomplete/#option-source](http://api.jqueryui.com/autocomplete/#option-source)与 Laravel 一起使用，因此我需要向以“?term=foo”结尾的 url 发送 GET 请求。我试图逃避“？” 带有反斜杠，这是行不通的。为了澄清，这就是我想要的：

```
Route::get('search\?term=(:any)', function()
{
      //do something
} 
```

Laravel 的网址中是否可以有问号？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-19T22:01:52.107

仅适用于可能想要**明确答案**的其他人：

您必须按如下方式编写和使用您的代码：

```
Route::get('search', function()
{
      $term = Input::get('term');
      if(isset($term)){
         //do other stuff ! 
      }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T20:57:29.610

我相信 slug 功能是您正在寻找的：http: [//laravel.com/api/class-Laravel.Str.html](http://laravel.com/api/class-Laravel.Str.html)

从 API 文档：

```
slug( string $title, string $separator = '-' ) 
```

从给定的字符串生成 URL 友好的“slug”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T21:00:15.967

在 URL 中有问号应该没有什么区别。您使用的是 PHP 框架，简单地说，`...?term=parameters`应该没有问题。据我所知，应该没有必要逃避这样的问号......默认情况下会妥善处理。

# javascript - 在导航栏上实现 Bootstrap 的 affix-top 功能的最佳方法

> ID：14820650
> 
> 赞同：1
> 
> 时间：2013-02-11T20:53:30.960
> 
> 标签：javascript, html, css, twitter-bootstrap

我一直试图让 affix-top 功能在我使用 Bootstrap 创建的网站上正常工作，但无论我将偏移量设置为什么，它总是会过早地跳转到页面顶部。应该注意的是，当我在本地视图或 Firefox 中查看我的页面时，一切都按应有的方式运行，没有剧烈的跳转，但是当我将其实际上传到服务器，并在除 Firefox 之外的任何其他设备中查看时，那就是事情变得不稳定。

这是我的导航栏的 HTML：

```
<div id="nav-wrapper">
<div id="nav" class="navbar navbar-inverse affix-top" data-spy="affix" data-offset-top="875">
  <div class="navbar-inner" data-spy="affix-top">
    <div class="container">

      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>

      <!-- Everything you want hidden at 940px or less, place within here -->
      <div class="nav-collapse collapse">
        <ul class="nav">
            <li><a href="#home">Home</a></li>
            <li><a href="#service-top">Services</a></li>
            <li><a href="#contact-arrow">Contact</a></li>
        </ul><!--/.nav-->
      </div><!--/.nav-collapse collapse pull-right-->
    </div><!--/.container-->
  </div><!--/.navbar-inner-->
</div><!--/#nav /.navbar navbar-inverse--> 
```

这是我的 JS：

```
<script>
    $(document).ready(function() {
        $('#nav-wrapper').height($("#nav").height());
        $('#nav').affix({
            offset: $('#nav').position()
        });
    });
</script> 
```

和我的一些相关的CSS：

```
#nav.affix {
    position: fixed;
    top: 0;
    width: 100%
}
#nav {
    position:relative;
} 
```

对于它的价值，[这](https://stackoverflow.com/questions/14357576/bootstrap-menu-top-affix)是我从一开始就工作的类似帖子，但仍然无法让它为我工作。 [这](http://homegrowndevelopment.com/)也是我的网站，因此您可以看到导航栏是如何跳来跳去的。

谢谢你的帮助。我似乎无法解决这个问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:37:51.453

这似乎不是最好的解决方案，但它（目前）有效。我所做的只是稍微改变我的 JS 代码：

```
<script>
    $(document).ready(function() {
        $('#nav-wrapper').height($("#nav").height());
        $('#nav').affix({
            offset: 675
        });
    });
</script> 
```

# ruby-on-rails - Typhoeus：如何获取最后重定向的位置？

> ID：14820659
> 
> 赞同：1
> 
> 时间：2013-02-11T20:54:02.487
> 
> 标签：ruby-on-rails, curl, typhoeus

如何使用 Typhoeus 获取最后一个重定向的 URL？例如，如果我访问 Bit.ly 网址，我如何获得它在发出请求时指向的“真实”网址？我尝试访问 response.headers_hash['Location']，但我提出的每个请求似乎都是 nil，所以我认为这不是我应该如何获得最终位置。

```
request = Typhoeus::Request.new(url, :timeout  => 3000, :followlocation => true)    

request.on_complete do |response|
    if response.success?
        location = response.headers_hash['Location'] #not working
        end
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T21:08:57.570

刚刚发现这为您提供了重定向的最终位置：

lastUrl = response.effective_url

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-03T05:12:35.007

我使用 gem [final_redirect_url](https://rubygems.org/gems/final_redirect_url)在单次/多次重定向后获取最终 url。

# php - JQUERY 移动数据库结果检索列表视图

> ID：14820662
> 
> 赞同：0
> 
> 时间：2013-02-11T20:54:20.860
> 
> 标签：php, jquery, mysql, listview, mobile

我正在尝试根据数据库的结果构建动态 jquery 移动列表视图。我有以下代码：

```
<script type="text/javascript">// <![CDATA[
$(document).ready(function() {
$.ajaxSetup({ cache: false }); // This part addresses an IE bug.  without it, IE will only load the first number and will never refresh
setInterval(function() {
$('#results').load('./Display.php?id=100');
}, 3000); // the "3000" here refers to the time to refresh the div.  it is in milliseconds. 
});
// ]]></script> 
```

和

`<div id="results"></div>`

Display.php 有一个 while 循环

```
while($row = mysql_fetch_array($query)) {
    echo "{$row['title']}
    {$row['message']}
    {$row['datetime']}
    </br>
    ";              
} 
```

目前，这只是在 .html 和 php 页面上输出标题、消息和日期时间，但我想将其用于：

```
<ul data-role="listview" data-inset="true">
            <li><a href="index.html">
                <h3>Stephen Weber</h3>
                <p><strong>You've been invited to a meeting at Filament Group in Boston, MA</strong></p>
                <p>Hey Stephen, if you're available at 10am tomorrow, we've got a meeting with the jQuery team.</p>
                <p class="ui-li-aside"><strong>6:24</strong>PM</p>
            </a></li>
</ul> 
```

我已经尝试了很多方法来让它工作，但似乎没有，我已经清理了 while 循环代码，所以它是这个问题的基础。有没有人设法做到这一点？通常我只会`<li></li>`通过 foreach 运行，但这是不同的。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T10:48:07.823

由于您正在构建一个列表视图，因此您的结果 div 应该是一个列表视图......而不仅仅是一个 div。所以我建议你放置

```
<ul data-role="listview" data-inset="true" id="results">
</ul> 
```

而不是你的

```
<div id="results"></div> 
```

只是为了初学者......然后你的 php 应该回显 ul 的内容。我的意思是这样的：

```
echo '<li><h3>'.$row['title'].'</h3><p><strong>'.$row['message'].'</strong></p></li>'; 
```

我没有测试它，但你应该。

# jquery - jQuery ready() 问题 - $(this) 不可用且代码仅适用于一个元素

> ID：14820663
> 
> 赞同：1
> 
> 时间：2013-02-11T20:54:21.427
> 
> 标签：jquery, document-ready

我在 DOM 准备好时让一些 jQuery 运行时遇到问题。

我有两个表单，每个表单`<select>`在我的代码运行时都应该加载到其他表单元素中。

当用户第一次加载页面时，我希望这些选择`ready()`能够获取某些属性（表单操作、`load()`目标等），然后将其加载。使用时工作得很好`change()`，我可以让一个`<select>`工作但不能同时工作。

## HTML

```
<form action="php/bagCreate/newBag_bag.php" method="post" id="form1">
  <select id="target" data-target="upForm" class="get" name="bagLevel">
    <option>1</option>   
    <option>2</option>  
    <option>3</option>   
  </select>        
</form>

<form action="php/bagCreate/storeItems_bag.php" method="post" id="form2">      
  <select id="target2" data-target="upFormType" class="get" name="itemName">
    <option>A</option>   
    <option>B</option>  
    <option>C</option>   
  </select>        
</form> 
```

## JS

这适用于单个表单，但第二个不会加载

```
$(document).ready(function(){
$('select.get').ready(function() {
    var action = $('select.get').parent().attr('action');
    var target = $('select.get').data('target');
    $('#'+target).load(action, $('select.get').parent().serializeArray());     
}); 
```

更改`select.get`为`this`ready 函数内部不会导致加载任何表单。

两种形式的使用`change()`都非常好，尽管它有点重复

```
$('select.get').change(function() {        
  var action = $(this).parent().attr('action');  
  var target = $(this).data('target');  
  $('#'+target).load(action, $(this).parent().serializeArray());      
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T20:56:10.187

只需在 pageload 上触发 change 事件？

```
$('select.get').change(function() {        
  var action = $(this).parent().attr('action');  
  var target = $(this).data('target');  
  $('#'+target).load(action, $(this).parent().serializeArray());      
}).change(); //trigger it on pageload as well ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T20:58:39.380

使用该[`each()`方法](http://api.jquery.com/each/)将代码应用于 jQuery 对象中的多个`select`元素。此外，正如评论所暗示的，该`ready()`方法应保留给`document`对象。

例如：

```
$(document).ready(function() {
    $('select.get').each(function(i) {
        var action = $(this).parent().attr('action');
        var target = $(this).data('target');
        $('#'+target).load(action, $(this).parent().serializeArray());
    });
}); 
```

请注意，在`each()` *回调*函数的每次迭代中，如何`$(this)`引用对象中的第[i]个元素`$('select.get')`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T21:01:21.123

如果您的第一个代码片段如下所示：

```
$(document).ready(function(){
    $('select.get').each(function() {
        var action = $('select.get').parent().attr('action');
        var target = $('select.get').data('target');
        $('#'+target).load(action, $('select.get').parent().serializeArray());     
    }
); 
```

将 ready 方法更改为 each 方法将为使用选择器找到的每个元素运行一次定义的函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T21:00:49.763

```
$(document).ready(function(){
    $('select.get').each(function(){
        var $t = $(this);
        var $p = $t.parent();
        var action = $p.attr('action');
        var target = $t.data('target');
        $('#'+target).load(action, $p.serializeArray());
    });
}); 
```

# python - 在 mlab 中反转颜色图

> ID：14820665
> 
> 赞同：4
> 
> 时间：2013-02-11T20:54:29.860
> 
> 标签：python, mayavi, mayavi.mlab

我只是想知道如何在 mlab 中反转颜色图。我知道在 matplotlib 中，您可以简单地将 _r 添加到颜色图的名称中以反转配色方案。但是它在 mlab 中似乎略有不同。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-10-29T20:03:14.380

使用 mayavi 管道的脚本记录，我发现：

```
s.module_manager.scalar_lut_manager.reverse_lut = True 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-02T18:38:20.327

我猜你想**反转**颜色图。这对我有用（它可能不是最简单的解决方案，我不是 mayavi 专家），从[这里修改](http://docs.enthought.com/mayavi/mayavi/auto/example_custom_colormap.html#example-custom-colormap)

```
s=mlab.surf(xx,yy,zz,colormap='GnBu')
lut = s.module_manager.scalar_lut_manager.lut.table.to_array()
ilut = lut[::-1]
# putting LUT back in the surface object
s.module_manager.scalar_lut_manager.lut.table = ilut
# forcing to update the figure once we have changed the LUT
mlab.draw()
mlab.view() 
```

# performance - 为什么我的程序使用 Tie::File 运行如此缓慢？

> ID：14820666
> 
> 赞同：3
> 
> 时间：2013-02-11T20:54:31.200
> 
> 标签：performance, perl

```
#!/usr/bin/perl
use strict;
use warnings;
use Tie::File;
use Data::Dumper;
use Benchmark;

my $t0 = Benchmark->new;

# all files in the current folder with $ext will be input.
# Default $ext is "pileup"
# if entered, second user entered input will be set to $ext
my $ext = "pileup";
if(exists $ARGV[1]) {
    $ext = $ARGV[1];
}

# open current directory & store filenames with $ext into @pileupfiles
opendir (DIR, ".");
my @pileupfiles = grep {-f && /\.$ext$/} readdir DIR;

my $dnasegment;
my $pos;
my $total;
my $g_total;
my @index; #hold current index for each tied file
my @totalfiles; #hold total files in each sub-index

# $filenum is iterator to cycle through all pileup files whose names are stored   in pileupfiles
my $filenum = 0;
# @tied is an array holding all arrays of tied files
my @tied;
# array of the current line number for each @file, 
my @linenum;
# tie each file to an array that is an element of the @tied array
while($filenum < scalar @pileupfiles) {
    my @file;
    tie @file, 'Tie::File', $pileupfiles[$filenum], recsep => "\n"  or die;
    push(@tied, [@file]);
    # set each line's value of $linenum to 0
    push(@linenum, 0);
    $filenum++;
}

# open user list of dnasegments
open(LIST, $ARGV[0]);
# open file for output
open(OUT, ">>tempfile.tab");

while(<LIST>) {
    $dnasegment = $_;
    chomp $dnasegment;

    my $exit = 0;
    $pos = 1;
    my %flag;

    while(scalar(keys %flag) < scalar @tied) {
        $total = 0;
        $filenum = 0;
        while($filenum < scalar @tied) {
            if(exists $tied[$filenum][$linenum[$filenum]]) {
                my @line = split(/\t/, $tied[$filenum][$linenum[$filenum]]);
                #print $line[0], "\t", $line[1], "\t", $line[3], "\n\n";
                if($line[0] eq $dnasegment) {
                    if($line[1] == $pos) {
                        $total += $line[3];
                        $linenum[$filenum]++;
                        $g_total += $line[3];
                        print OUT "$dnasegment\t$filenum\t$pos\t$line[3]\n";
                    }
                } else {
                    $flag{$filenum} = 1;
                }
            } else {
                #print $flag, "\n";
                $flag{$filenum} = 1;
            }
            $filenum++;
        }
        if($total > 0) {
            print OUT "$dnasegment\t$total\n";
        }
        $pos++;
    }
}

close (LIST);
close(OUT);

my $t1 = Benchmark->new;
my $td = timediff($t1, $t0);
print timestr($td), "\n"; 
```

上面的代码获取目录中具有默认或用户输入的文件扩展名的所有文件，并根据特定条目（输入文件的第 1 列）计算位置（输入文件的第 2 列）的总出现次数（输入文件的第 4 列）第 1 列与命令行提供的文件中包含的名称匹配）。程序要使用的文件的布局是： 文件 1：

```
 Gm02    11896804    G   2   .,  \'
    Gm02    11896805    G   7   ......, U`
    Gm02    11896806    G   3   .,. Sa
    Gm02    11896807    T   2   .,  U\
    Gm02    11896808    T   2   .,  ZZ
    Gm02    11896809    T   2   .,  ZZ
    Gm02    11896810    T   2   .,  B\
    Gm02    11896811    G   3   .,^!,   B]E
    Gm02    11896812    A   3   T,, BaR
    Gm02    11896822    G   3   .,, B`D 
```

文件 2：

```
 Gm02    11896804    G   3   .,, \'
    Gm02    11896805    G   7   ......, U`
    Gm02    11896806    G   3   .,. Sa
    Gm02    11896807    T   2   .,  U\
    Gm02    11896808    T   2   .,  ZZ
    Gm02    11896809    T   2   .,  ZZ
    Gm02    11896810    T   2   .,  B\
    Gm02    11896811    G   3   .,^!,   B]E
    Gm02    11896812    A   3   T,, BaR
    Gm02    11896813    G   3   .,, B`D 
```

文件 3：

```
 Gm02    11896804    G   3   .,, \'
    Gm02    11896805    G   7   ......, U`
    Gm02    11896806    G   3   .,. Sa
    Gm02    11896807    T   2   .,  U\
    Gm02    11896808    T   2   .,  ZZ
    Gm02    11896809    T   2   .,  ZZ
    Gm02    11896810    T   2   .,  B\
    Gm02    11896811    G   3   .,^!,   B]E
    Gm02    11896812    A   3   T,, BaR
    Gm02    11896833    G   3   .,, B`D 
```

在这种情况下，传递给程序的唯一命令行参数将是一个文本文件，其内容为“Gm02”。

哈希用于跟踪已处理的位置。在上面的示例文件中，将检查所有三个文件以从位置 1 到 11896803 计数，然后再在位置 11896804 遇到第一个值。这是为了确保在增加位置之前检查所有文件中的所有位置并求和。

我的问题与性能有关。我决定使用 Tie::File 因为我的理解是这会提高性能，因为所有文件都不会被读入内存。程序要处理的真实数据是几十万行乘以几十个文件。此时，仅在示例 file1 和所有 3 个示例文件上运行所需的时间分别为 42 wallclock 秒（41.96 usr + 0.00 sys = 41.96 CPU）和 110 wallclock 秒（109.76 usr + 0.00 sys = 109.76 CPU）。任何关于为什么这个程序运行如此缓慢的信息或关于如何加速它的建议将不胜感激。

编辑 10:17PM EST：程序的输出如下：

```
Gm02    0   11896804    2
Gm02    1   11896804    3
Gm02    2   11896804    3
Gm02    8
Gm02    0   11896805    7
Gm02    1   11896805    7
Gm02    2   11896805    7
Gm02    21
Gm02    0   11896806    3
Gm02    1   11896806    3
Gm02    2   11896806    3
Gm02    9
Gm02    0   11896807    2
Gm02    1   11896807    2
Gm02    2   11896807    2
Gm02    6
Gm02    0   11896808    2
Gm02    1   11896808    2
Gm02    2   11896808    2
Gm02    6
Gm02    0   11896809    2
Gm02    1   11896809    2
Gm02    2   11896809    2
Gm02    6
Gm02    0   11896810    2
Gm02    1   11896810    2
Gm02    2   11896810    2
Gm02    6
Gm02    0   11896811    3
Gm02    1   11896811    3
Gm02    2   11896811    3
Gm02    9
Gm02    0   11896812    3
Gm02    1   11896812    3
Gm02    2   11896812    3
Gm02    9
Gm02    1   11896813    3
Gm02    3
Gm02    0   11896822    3
Gm02    3
Gm02    2   11896833    3
Gm02    3
Gm02    0   11896804    2
Gm02    1   11896804    3
Gm02    5
Gm02    0   11896805    7
Gm02    1   11896805    7
Gm02    14
Gm02    0   11896806    3
Gm02    1   11896806    3
Gm02    6
Gm02    0   11896807    2
Gm02    1   11896807    2
Gm02    4
Gm02    0   11896808    2
Gm02    1   11896808    2
Gm02    4
Gm02    0   11896809    2
Gm02    1   11896809    2
Gm02    4
Gm02    0   11896810    2
Gm02    1   11896810    2
Gm02    4
Gm02    0   11896811    3
Gm02    1   11896811    3
Gm02    6
Gm02    0   11896812    3
Gm02    1   11896812    3
Gm02    6
Gm02    1   11896813    3
Gm02    3
Gm02    0   11896822    3
Gm02    3
Gm02    0   11896804    2
Gm02    2
Gm02    0   11896805    7
Gm02    7
Gm02    0   11896806    3
Gm02    3
Gm02    0   11896807    2
Gm02    2
Gm02    0   11896808    2
Gm02    2
Gm02    0   11896809    2
Gm02    2
Gm02    0   11896810    2
Gm02    2
Gm02    0   11896811    3
Gm02    3
Gm02    0   11896812    3
Gm02    3
Gm02    0   11896822    3
Gm02    3 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T21:23:10.887

我会说“因为您使用的是 Tie::File”，除了您不在以下代码行之外：

```
my @file;
tie @file, 'Tie::File', $pileupfiles[$filenum], recsep => "\n"  or die;
push(@tied, [@file]); 
```

你不妨把它写成

```
open(my $fh, '<', $pileupfiles[$filenum]) or die $!;
push(@tied, [ <$fh> ]); 
```

也许你的意思是

```
tie my @file, 'Tie::File', $pileupfiles[$filenum], recsep => "\n"  or die;
push(@tied, \@file); 
```

然后我们会回到我原来的答案。Tie::File 在某些情况下可能会减少开发时间，但它不会是迄今为止最快的解决方案，而且它可能会使用更多所需的内存。

* * *

顺便说一句，`exist`对数组元素没有意义。

```
if (exists $tied[$filenum][$linenum[$filenum]]) 
```

是一种不好的做法

```
if (defined $tied[$filenum][$linenum[$filenum]]) 
```

或者

```
if ($linenum[$filenum] < @{ $tied[$filenum] }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T02:45:02.370

想知道你的输出是什么样子的。会是这样吗（鉴于您上面的示例文件）？

```
$VAR1 = {
          'Gm02;11896804' => 8,
          'Gm02;11896805' => 21,
          'Gm02;11896806' => 9,
          'Gm02;11896807' => 6,
          'Gm02;11896808' => 6,
          'Gm02;11896809' => 6,
          'Gm02;11896810' => 6,
          'Gm02;11896811' => 9,
          'Gm02;11896812' => 9,
          'Gm02;11896813' => 3,
          'Gm02;11896822' => 3,
          'Gm02;11896833' => 3
        }; 
```

# symfony - Symfony2 GenemuFormBundle 集合与 Select2

> ID：14820668
> 
> 赞同：0
> 
> 时间：2013-02-11T20:54:42.677
> 
> 标签：symfony, symfony-2.1, symfony-forms

我正在尝试使这个捆绑包成为一个集合（多对多关系）。我以这种方式建立了一个数据集合：

```
->add('subCategory', 'genemu_jqueryselect2_entity', array(
        'class' => 'Coffee\BusinessBundle\Entity\SubCategories',
        'property' => 'subCategory',
        'label' => 'Sotto Categorie',
        'multiple' => true,
        'configs' => array(
            'placeholder' => 'Seleziona almeno una sotto categoria',
        )
    ))
**** 
```

在 anagrafic 类型中：

```
 ->add('subCategories', 'collection', array('type' => new SubCategoriesType(), 
                'allow_add' => true,
                'allow_delete' => true,
                'prototype' => true,
                'prototype_name' => '__categ__',
                'by_reference' => false
            )) 
```

在我的模板中：

```
var collectionHolder3 = $('ul.categories');
var $addTagLink3 = $('<a href="#" class="add_refer_link">Aggiungi</a>');
var $newLinkLi3 = $('<li></li>').append($addTagLink3);
collectionHolder3.append($newLinkLi3);
function triggerJavascript(id)
{
    $field = $('#' + id);
    {{ form_javascript(form3.subCategories.vars.prototype, true) }}
}
function addCatForm() {
    var prototype = collectionHolder3.attr('data-prototype');
    var newIndex = collectionHolder3.find('option').length;
    var newForm = prototype.replace(/__categ__/g, newIndex);
    var $newFormLi = $('<li></li>').append(newForm);
    $newLinkLi3.before($newFormLi);

    var id = '{{ form3.subCategories.vars.id }}_' + id;
    triggerJavascript(id);
}
addCatForm(collectionHolder3, $newLinkLi3);

//..
<ul class="categories" data-prototype="{{ form_widget(form3.subCategories.get('prototype')) | e }}">
</ul> 
```

为什么我会收到此错误？

```
An exception has been thrown during the rendering of a template 
("Unable to render the form as none of the following blocks exist:
"_my_businessbundle_anagraficatype_subCategories_entry_javascript_prototype",
"subCategories_javascript_prototype", "form_javascript_prototype".") in.. 
```

我的配置哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T20:44:57.090

这并不能解决问题，但问题的答案是：

我联系了包的创建者并且是包中的一个错误，不幸的是这个包有几个错误，所以解决方案是删除它并手动使用 Select2。

# google-apps-script - 从 Google 电子表格中的纯文本单元格中删除的字符串在 ISBLANK 函数中产生 TRUE

> ID：14820669
> 
> 赞同：3
> 
> 时间：2013-02-11T20:54:42.780
> 
> 标签：google-apps-script, google-sheets

我正在使用该`ISBLANK`函数来确定单元格是否为空。但是`ISBLANK`当发生以下情况时，该函数的响应有点奇怪：

> 当一个单元格被格式化为纯文本（菜单格式、数字、纯文本）并且该单元格的内容被删除时，该`ISBLANK` 函数认为该单元格被“填充”，即返回`TRUE`。该 `LEN`函数返回零。添加`IFERROR(1/0)`将 `FALSE`再次产生。

是否可以在 Google 电子表格或 Google Apps 脚本中获取该单元格的状态，以便我可以构建一个也涵盖此现象的函数（在 GAS 中）。

请参阅我准备的示例文件：[ISBLANK 为空单元格返回 TRUE](https://docs.google.com/spreadsheet/ccc?key=0ApDwwZxW-IBcdFZtUHFRMHh3ZGc0bUtOSmNDUnV4c3c&usp=sharing)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:44:33.860

您可以拥有一个执行类似的 isBlank 函数。

```
function isBlank(sheet, cellRange) {
  var cell = sheet.getRange(cellRange);
  var value = cell.getValue();
  return String(value).replace(/ /g, '') == '';
} 
```

如果您碰巧在单元格中有公式或预定义格式，则在空单元格上返回的值将是`' '`（单个空白字符）。因此，在将值与空字符串进行比较之前，我会去除空格。

# ndepend - 使用 NDepend 识别程序集的目标运行时

> ID：14820672
> 
> 赞同：1
> 
> 时间：2013-02-11T20:55:06.333
> 
> 标签：ndepend, static-code-analysis

有人可以帮我为 NDepend 3.8 编写一个 CQL 查询，以获取针对特定 Dot .NET 运行时构建的所有程序集（即 4.0.x 与 2.0.x）

谢谢！

# scala - 检查您在 REPL 中定义的功能

> ID：14820675
> 
> 赞同：4
> 
> 时间：2013-02-11T20:55:35.890
> 
> 标签：scala, read-eval-print-loop

是否有任何不错的 REPL 命令可以返回您定义的所有内容的函数定义？失败类似于`!:`在 SBT 中显示所有以前的命令。谢谢。

# javascript - 在加载 SVG 编辑器时创建图像

> ID：14820676
> 
> 赞同：0
> 
> 时间：2013-02-11T20:55:36.773
> 
> 标签：javascript, svg, jquery-svg

我正在研究 svg 编辑器，特别是 Method draw implementation。

我想在加载编辑器时加载图像而不是背景矩形。目前，javascript 文件包含此命令以在编辑器中创建背景矩形。

```
var createBackground = function(fill) {
    svgCanvas.createLayer("background")
        cur_shape = svgCanvas.addSvgElementFromJson({
            "element": "rect",
            "attr": {

                "x": -1,
                "y": -1,
                "width": res.w+2,
                "height": res.h+2,
                "stroke": "none",
                "id": "canvas_background",
                "opacity": 1,
                "fill":  '#ffffff',
                "style": "pointer-events:none" 
```

我想创建一个图像而不是一个矩形。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T04:24:29.413

您可以像这样更改函数：

```
var createBackground = function(fill) {
    svgCanvas.createLayer("background")
        cur_shape = svgCanvas.addSvgElementFromJson({
            "element": "image",
            "attr": {
                "x": -1,
                "y": -1,
                "width": res.w+2,
                "height": res.h+2,
                "xlink:href": "/images/whatever.png" //this path should be changed
                "id": "canvas_background",
                "opacity": 1,
                "style": "pointer-events:none" 
```

# c# - 升级 .NET 4.5 后如何删除 Microsoft Async Targeting Pack

> ID：14820677
> 
> 赞同：0
> 
> 时间：2013-02-11T20:55:40.680
> 
> 标签：c#, .net, asynchronous, .net-4.0, .net-4.5

我已经安装了**Async Targeting Pack**以便能够在 .NET 4.0 中使用它的优势，现在我将项目升级到 .NET 4.5，我不再需要它了。

**案例 1：** 如果我保留它，项目会收到大约 7-8 个警告，说“*预定义类型 System.Runtime.CompilerServices.xxx*在全局别名的多个程序集中定义...”

**案例 2：** 如果我从 [Project]\Packages 路径中删除*Microsoft.CompilerServices.AsyncTargetingPack.1.0.0*文件夹，我会收到一百多个关于位于 Windows\Microsoft.NET的*Microsoft.Commons.targets*内容的警告\4.0.xxx

我怎样才能在没有任何警告的情况下摆脱它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:03:20.620

因此，我也在同一解决方案中通过 NuGet 为单元测试项目删除了它，它解决了它。单元测试项目是问题所在。

# c# - 使用带参数的 JQuery 调用 asmx Web 服务会导致 500 错误

> ID：14820678
> 
> 赞同：2
> 
> 时间：2013-02-11T20:55:43.177
> 
> 标签：c#, web-services, jquery, asmx

我有一个足够简单的网络服务：

```
 [ScriptMethod(UseHttpGet = true, ResponseFormat = ResponseFormat.Json)]
        [WebMethod]
        public string GetToken(string a)
        {
        } 
```

我使用 JQuery 将其称为客户端：

```
 $.ajax({
        post: 'GET',
        contentType: "application/json; charset=utf-8",
        dataType: 'json',
        url: '../url/GetToken',
        data: "{'a':'test'}",
        success: function (data) {
        },
        error: function (a, b, c) {
        }
    }); 
```

调用总是失败，返回的错误是 500 Internal Server Error。我在 web 服务中放置了一个断点，并且根本没有到达代码。当我修改 Web 服务以完全不接受任何参数（并`data`从 JQuery 调用中删除元素）时，调用成功。我玩过不同的方式来传递`data`元素；我已经传递了一个 JSON 对象（没有引号），并且我已经从`a`参数周围删除了引号。它都不起作用。

## 编辑：

使用 Fiddler，我确定导致 500 的实际错误是“无效的 Web 服务调用，参数缺失值”。

## 编辑2：

以这种方式传递数据有效：

```
data: "a='test'" 
```

我不知道为什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T21:22:19.580

尚未对此进行测试，但在您的代码片段中，您拥有`post: 'GET'`而不是`type: 'GET'`. 这可能会导致服务器将 contentType 拒绝为 json（这就是您的数据未正确序列化的原因）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T21:34:17.453

我无法使用 GET，必须使用 POST 作为类型，并且我的 Web 服务位于同一目录中，但这有效：

```
 $.ajax({
        type: 'POST',
        contentType: "application/json; charset=utf-8",
        dataType: 'json',
        url: 'url.asmx/GetToken',
        data: "{'a':'test'}",
        success: function(data) {
            alert("Success");
        },
        error: function(a) {
            alert(a.responseText);
        }
    }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T21:05:15.993

您可以使用[Fidler](http://www.fiddler2.com/fiddler2/)之类的工具来检查您收到的回复。很可能会返回一个错误页面，但由于它是一个 jquery ajax 调用，因此您没有看到它。

# c - 似乎无法返回字符串

> ID：14820680
> 
> 赞同：0
> 
> 时间：2013-02-11T20:55:46.657
> 
> 标签：c

我正在尝试在 C 中附加两个字符串。

所以这是我的代码，如果我返回 s3，则不会打印任何内容。然而，如果我返回 s1 或 s2，它们会正确返回。

此外，如果我只是在键盘上按两次 Enter，它会打印`"L¬(."`

在 C++ 中，我从来没有遇到过这类问题，哎呀。

有人可以检查他们是否发现问题吗？

```
#include <stdio.h>
#include <string.h>

/*
    Return the result of appending the characters in s2 to s1.
    Assumption: enough space has been allocated for s1 to store the extra
    characters.
*/
char* append (char s1[ ], char s2[ ]) {
    int s1len = strlen (s1);
    int s2len = strlen (s2);
    int s3len=strlen(s1)+strlen(s2);
   // printf("%d", s1len);
    char s3[s3len];
    int k;
    int j;
    for(j=0; j<s1len; j++) {
        s3[j]=s1[j];
    }

    for (k=0; k<s2len; k++) {
        s3[k+s1len] = s2[k];

    }

    return s3;
}

int main ( ) {
    char str1[10];
    char str2[10];
    while (1) {
        printf ("str1 = ");
        if (!gets (str1)) {
            return 0;
        };
        printf ("str2 = ");
        if (!gets (str2)) {
            return 0;
        };
        printf ("The result of appending str2 to str1 is %s.\n", 
            append (str1, str2));
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T21:03:49.257

一个问题是，因为`s3`in 是一个局部变量，所以无论您是否返回指向它的指针，都会分配`append`内存，然后在超出范围（函数结束时）释放内存。`s3``append`

您应该做的是将`s3`作为`char *`或`char[]`作为参数传递给函数。

像这样：（改变`append`应该很容易）

```
// yes the +1 to be able to null-terminate the string is needed,
//   or just make it much bigger
char s3[strlen(str1) + strlen(str2) + 1];
append(str1, str2, s3);
printf("The output is %s\n", s3); 
```

还记得添加 a作为 ogzd 建议的in`0`的最后一个字符（空终止字符串）。`s3``append`

备择方案：

*   （C++）返回`std::string`（有点慢，因为内存被复制了）

*   执行`malloc`(C/C++) 或`new`(C++) in`append`为`s3`. 这是一种危险的做法，因为内存必须分别为`free`'d 或`delete`'d。

使用`malloc`，从字面上看，您唯一需要更改的是`s3`函数中的定义，以：

```
char *s3 = malloc(s3len+1); 
```

通常你会说：

```
type *s3 = malloc(sizeof(type)*len); 
```

但是`char`是 1 个字节，所以`sizeof(char) = 1`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T21:01:02.277

不要忘记`\0`结尾的字符`s3`！

```
char s3[s3len+1];
......

s3[s3len] = 0; // \0 character 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T21:16:06.280

而不是返回局部变量 s3

返回它的分配副本：

```
return strdup(s3); 
```

只需确保释放完成后返回的内存即可。

还要确保你 0 终止你的字符串，这在 C 中是必不可少的，因为这是区分字符串和数组的唯一方法。接受字符串参数的函数假定结尾 0 在字符序列中。

# jquery - mvc .net 和 jquery 如何在发布前删除字符以避免验证？

> ID：14820681
> 
> 赞同：0
> 
> 时间：2013-02-11T20:55:49.610
> 
> 标签：jquery, asp.net-mvc-3, forms, formcollection

我在模型上有一个属性，该属性接受字符串值并存储颜色的十六进制值

**例如：EEEEEE, 000000**

我集成了一个 jquery 插件，以便用户可以使用颜色选择器。我喜欢它，因为它非常易于使用。问题在于，当您选择一种颜色时，它会用“#”字符填充文本框，然后可以轻松更改文本框的颜色（出于用户友好的目的 - 它是插件的一部分）。

现在我想保存帖子上的值，但问题是模型上的验证将只接受以下字符“0-9A-F”。我也想维护（数据库上没有特殊字符）。

所以我想为了避免验证，我会在单击按钮时修改文本框。我的问题是：

**1.这是最有效的方法吗？**

**2.如果是，我将如何使用jquery？或者是其他东西？**

让我知道你的想法。

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T21:10:10.393

我会在您的模型上使用如下正则表达式验证器：

```
[RegularExpression(@"#([0-9][A-F])*", ErrorMessage = "Invalid Color Code")] 
```

这将在验证中包含“#”，因此它将通过验证，然后如果需要，您可以在服务器端处理“#”。

如果您无法更改模型验证，也许您可​​以在提交表单之前在 JavaScript 中执行某些操作，以从提交的值中删除“#”。

# macos - 脚本改进建议

> ID：14820684
> 
> 赞同：-1
> 
> 时间：2013-02-11T20:55:54.860
> 
> 标签：macos, bash, shell

以下脚本用于检查 Macintosh 上任何驱动器的 SMART 状态。

它工作得很好，但我想知道是否有一种更优雅的方式来首先列出，然后循环遍历所有结果，`diskutil list | grep /dev/`因为该命令将始终列出所有连接的设备，从而使脚本可移植。

有没有更好的方法可以在不首先输出到 $DISKLIST 日志文件的情况下执行此操作？也欢迎其他建议！

```
# Check SMART status

DISKLIST=`mktemp -t DISK-XXXXX.log`

diskutil list | grep /dev/ > $DISKLIST

for i in  `cat $DISKLIST` ;

do

STATUS=$(diskutil info $i | awk -F': *' '/SMART/{print $2}')

if [ "$STATUS" = "Verified" ]; then
        echo "SMART Status OK for disk $i" 
else

        echo "** SMART Status $STATUS for disk $i **" 
fi

done

rm $DISKLIST 
```

例如，这些是脚本中 key 命令的典型结果：

```
$ diskutil list | grep /dev/
/dev/disk0
/dev/disk1
/dev/disk2
/dev/disk3
/dev/disk4
/dev/disk5
/dev/disk6
/dev/disk7
/dev/disk8 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:04:54.403

您可以使用命令替换：

```
for i in $(diskutil list | grep /dev/)
do 
.... 
```

命令的输出直接替换在 for 循环中，不需要 DISKLIST 文件。有关[abs:command 替换的更多信息](http://tldp.org/LDP/abs/html/commandsub.html)

# node.js - 为什么我不能验证 mongoose 中的嵌入文档？这样做的正确方法是什么？

> ID：14820686
> 
> 赞同：5
> 
> 时间：2013-02-11T20:56:02.887
> 
> 标签：node.js, validation, mongoose

我有这样的架构：

```
var testSchema = new Schema({
        foo: { type: String, required: true, trim: true },
        bar: {
            fooBar: { type: String },
            barFoo: { type: String }
        }
}); 
```

而且我必须验证`bar`基于值的`foo`值，如下所示：

```
testSchema.path("bar").validate(function(bar){
    if(this.foo === "someValue")
        //return custom validation logic 1
    else if(this.foo === "anotherString")
        //return custom validation logic 2  
    else
        return false;
}); 
```

但是当我尝试对我的应用进行分层时，我收到以下错误：

```
/Users/Renato/github/local/prv/domain/models/testModel.js:34
testSchema.path("bar").validate(function(bar){
                       ^
TypeError: Cannot call method 'validate' of undefined 
```

我在这里做错了什么？验证此对象的正确方法是什么？？？我用谷歌搜索了它，但我似乎找不到任何东西！甚至将我的猫鼬版本更新为`~3.5.5`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T22:17:06.513

Mongoose[似乎并不认为](https://github.com/LearnBoost/mongoose/blob/3.5.5/lib/schema.js#L175-L207) `'bar'`是 a`path`本身，而只是 a`prefix`用于 2 条单独的路径 -`'bar.fooBar'`和`'bar.barFoo'`：

```
testSchema.path("bar.fooBar").validate(function(fooBar){
    if(this.foo === "someValue")
        //return custom validation logic 1
    else
        return false;
});

testSchema.path("bar.barFoo").validate(function(barFoo){
    if(this.foo === "anotherString")
        //return custom validation logic 2
    else
        return false;
}); 
```

您可能还会发现[`schema.pre()`](http://mongoosejs.com/docs/api.html#schema_Schema-pre)对集体验证模型很有用（另一个示例可以在[Sub Docs](http://mongoosejs.com/docs/subdocs.html)文档中找到）：

```
testSchema.pre('save', function (next) {
    if(this.foo === "someValue")
        return next(new Error('Invalid 1'));
    else if(this.foo === "anotherString")
        return next(new Error('Invalid 2'));
    else
        next();
}); 
```

# android - Android API 指南对我来说有点不清楚 android:onClick XML 属性

> ID：14820691
> 
> 赞同：4
> 
> 时间：2013-02-11T20:56:16.363
> 
> 标签：android, xml, button, checkbox, onclick

在[Android API Guides for checkboxes](http://developer.android.com/guide/topics/ui/controls/checkbox.html)中，他们声明您可以在布局的 XML ( `android:onClick`) 中设置一个属性来启动指定的方法。[Buttons](http://developer.android.com/guide/topics/ui/controls/button.html)指南中也是如此，但按钮指南也有这一点：

> 您还可以务实地声明 click 事件处理程序，而不是在 XML 布局中。`Button`如果您在运行时实例化或者您需要在子类中声明点击行为，这可能是必要的`Fragment`。

`android:onClick`这就提出了以下问题：如果在 Fragment 中找到按钮或复选框，您能否或不能利用该属性？如果是这样，我会假设要调用的方法将在片段中声明，对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T21:08:56.560

您可以`onClick`在片段中使用该属性。但是，由于 a`Fragment`是 a 的一部分`Activity`，因此指定的方法将在 Activity 类中启动，而不是在片段中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T21:09:20.143

的目标方法`android:onClick`应该在托管片段的活动中定义。

# android - 如何保持动画状态？

> ID：14820694
> 
> 赞同：0
> 
> 时间：2013-02-11T20:56:22.123
> 
> 标签：android, android-animation

我在我的应用程序启动时在 ImageView 上做一个旋转动画。

然后稍后在应用程序中的一个事件上，我想用相同的 ImageView 做一个淡出动画。

这有效，但在它执行淡出动画之前，它将 ImageView 状态恢复到旋转动画之前。

所以它跳回到“未旋转”状态，然后淡出。

是否可以在第一次旋转后保持 ImageView 的动画状态并从那里继续淡出动画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:17:05.247

好的，我猜我必须使用矩阵旋转而不是动画：

```
ImageView circle = (ImageView) findViewById(R.id.imageView1);
Bitmap myImg = BitmapFactory.decodeResource(getResources(), R.drawable.rotated);

Matrix matrix = new Matrix();
matrix.postRotate(45);

Bitmap rot = Bitmap.createBitmap(myImg, 0, 0, myImg.getWidth(), myImg.getHeight(),
        matrix, true);

circle.setImageBitmap(rot); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T16:07:09.887

Just because you animate something doesn't mean you have changed it permanently (see [previous discussion](https://stackoverflow.com/a/3883428/1337257)). You may want to modify the `onAnimationEnd()` method to make the effect of your first animation permanent before starting another animation.

# yii - 从 CListView 访问视图中模型的元素

> ID：14820697
> 
> 赞同：0
> 
> 时间：2013-02-11T20:56:47.173
> 
> 标签：yii

对不起这个问题。我已经阅读了两本书和几个教程，以及 Yii 的文档，但我仍然无法理解如何做这个非常基本的事情。基本上，我需要从表格中读取所有元素并将它们显示在列表中。

我做了这个

在控制器上（方法 actionIndex()）

```
$criteria = new CDbCriteria();

    $dataProvider = new CActiveDataProvider('Items', array(
        'criteria'=>$criteria,
    ));

    $this->render('index',array(
        'dataProvider'=>$dataProvider,
    )); 
```

在视图 index.php

```
<?php $this->widget('zii.widgets.CListView', array(
'dataProvider'=>$dataProvider,
'itemView' => '_item' 
```

));

?>

在查看 item.php

```
<?php $this->renderPartial('_item',array(
        'post'=>$dataProvider,

    )); ?> 
```

并在部分视图中 _item

```
<?php
$this->Widget('CMarkdown', array('purifyOutput'=>true)); 
```

?>

即使分页有效，系统也不会显示任何内容。我相信必须以某种方式在渲染视图中访问具有当前 ActiveRecord 元素或其他元素的对象（我不明白控制器的 CActiveDataProvider 是否是 ActiveRecord 元素）。

我会非常感谢在这件事上能帮助我的每一个人

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T21:14:42.907

根据您所说的，您似乎有一个不必要的文件。您不需要 item.php。

此外，您的部分视图 _item 需要是：

```
$this->beginWidget('CMarkdown', array('purifyOutput'=>true));
echo $data->content;
$this->endWidget(); 
```

我写了 $data->content; 但是您需要将单词内容替换为您实际要显示的属性。

# android - 更改操作栏中的选项卡样式

> ID：14820698
> 
> 赞同：0
> 
> 时间：2013-02-11T20:56:51.473
> 
> 标签：android, tabs, android-styles

我试图让我的标签看起来像这样：

![标签栏样式](../Images/c25995eedce711acc19926e4d4e50538.png)

但是，我不知道从哪里开始。

我正在使用`ViewPager`and来`SherlockActionBar`处理`FragmentPagerAdapter`标签创建等。

这是不可能的`ViewPager`吗？我查看了[`style`](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/res/res/values/styles.xml)选项，没有任何方法可以影响选项卡的高度、让选项卡滚动或更改选择外观的方法。

我必须创建自定义可绘制对象吗？如果没有，我怎样才能获得完整的高度选择颜色（在这种情况下，灰色上的白色）或更改标签栏的高度，就像我提供的图像中一样？

如果有人阅读本文，我将不胜感激，请尽量不要告诉我我没有尝试寻找这个问题的答案，因为我一直在努力解决这个问题，但我还没有弄清楚很多。如果您无意这样做，那么感谢您做一个讲道理的人。我刚刚收到太多评论，告诉我我还不够努力，但我对 Android 还是很陌生，我什至不知道谷歌这些问题的正确关键词，所以我很感激我的耐心可以用这个给。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:36:44.200

ViewPagerIndicator 库 ( [http://viewpagerindicator.com/](http://viewpagerindicator.com/) ) 中的 TitlePageIndicator 可能是您正在寻找的。

您仍然需要调整一些东西才能在标题上获得这种选择器。

# haskell - 截断为 Word 类型

> ID：14820699
> 
> 赞同：12
> 
> 时间：2013-02-11T20:56:54.523
> 
> 标签：haskell

以下代码将类型中的多个类型截断`Double`为一个`Word16`（尽管我怀疑任何其他单词类型的行为相似，但我不得不为示例选择一个）。

```
truncate1 :: Double -> Word16
truncate1 = fromIntegral . (truncate :: Double -> Int) 
```

如您所见，我首先将其截断为`Int`，然后才将其转换为`Word16`. 我将此函数与直接截断进行了基准测试：

```
truncate2 :: Double -> Word16
truncate2 = truncate 
```

令我惊讶的是，第一个版本（首先通过`Int`类型）表现得更好。或者第二个更糟。根据标准输出：

```
benchmarking truncate/truncate1
mean: 25.42399 ns, lb -47.40484 ps, ub 67.87578 ns, ci 0.950
std dev: 145.5661 ns, lb 84.90195 ns, ub 244.2057 ns, ci 0.950
found 197 outliers among 100 samples (197.0%)
  97 (97.0%) low severe
  100 (100.0%) high severe
variance introduced by outliers: 99.000%
variance is severely inflated by outliers

benchmarking truncate/truncate2
mean: 781.0604 ns, lb 509.3264 ns, ub 1.086767 us, ci 0.950
std dev: 1.436660 us, lb 1.218997 us, ub 1.592479 us, ci 0.950
found 177 outliers among 100 samples (177.0%)
  77 (77.0%) low severe
  100 (100.0%) high severe
variance introduced by outliers: 98.995%
variance is severely inflated by outliers 
```

老实说，我刚开始使用 Criterion，所以我不是使用它的专家，但我知道它`25.42399 ns`的执行时间比`781.0604 ns`. 我怀疑某些专业化在这里发挥了作用。是不是`truncate2`太慢了？既然如此，还能`truncate`改进吗？此外，有人知道更快的方法吗？我觉得对我不真正使用的类型进行了错误的转换。

提前致谢。

我正在使用 GHC-7.4.2 进行编译，启用了优化 ( `-O2`)。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-11T22:20:24.853

首先，请注意该模块`GHC.Word` [包含以下](http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/src/GHC-Word.html) `RULE`编译指示：

```
"truncate/Double->Word16"
    forall x. truncate (x :: Double) = (fromIntegral :: Int -> Word16) (truncate x) 
```

这是一个简单的重写规则，可以精确地执行您`truncate1`提供的优化。所以我们有几个问题需要考虑：

### 为什么这是一个优化？

因为默认实现`truncate`是泛型的，支持任意`Integral`实例。您看到的速度差异是这种普遍性的成本；在将一种原始类型截断为另一种的特定情况下，有更快的方法可用。

因此，它似乎`truncate1`受益于一种专门的形式，而`truncate2`并非如此。

### 为什么`truncate1`更快？

[在`GHC.Float`](http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/src/GHC-Float.html)`RealFrac`定义实例的地方`Double`，我们有以下`RULE`编译指示：

```
"truncate/Double->Int"              truncate = double2Int 
```

`double2Int`我们想要的优化形式在哪里。将此与`RULE`前面提到的进行比较 - 显然没有类似的原始操作专门用于转换`Double`为`Word16`.

### 为什么不`truncate2`被重写呢？

[引用 GHC 用户指南：](http://www.haskell.org/ghc/docs/latest/html/users_guide/rewrite-rules.html)

> GHC 目前使用一种非常简单的语法匹配算法来匹配规则 LHS 和表达式。它寻求一种替换，使 LHS 和表达式在语法上等于模 alpha 转换。如果需要，模式（规则）而不是表达式会被 eta 扩展。

被匹配的表达式不是 eta 扩展的，也就是说匹配 on 的规则`forall x. foo x`将匹配 in`bar y = foo y`但*不*匹配in `bar = foo`。

由于您的定义都是无点编写的，因此`RULE`for`Double -> Int`匹配，但`RULE`for`Double -> Word16`不匹配。

# dart - 有没有办法同步运行 Dart 的 Future？

> ID：14820702
> 
> 赞同：8
> 
> 时间：2013-02-11T20:57:02.220
> 
> 标签：dart

我怎样才能立即得到 Future 的结果？例如：

```
void main() {
  Process.run('some_shell_command', []).then((ProcessResult result) {
    print(result.stdout); // I have the output here...
  });
  // ... but want it here.
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T21:54:18.707

[的支持`await`](http://dartbug.com/104)处于实验状态，可以像这样使用：

```
void main() async {
  ProcessResult result = await Process.run('some_shell_command', []);
  print(result.stdout); // I have the output here...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T21:24:48.443

对不起，这根本不可能。

在某些情况下，函数返回`new Future.immediate(value)`并且可以想象您可以获得该值，但是：

1.  这不是其中一种情况。进程完全由 VM 异步运行。
2.  在 libv2 更新中删除了直接访问 Future 值的能力。

处理此问题的方法是让包含`Process.run()`返回 Future 的函数，并在回调中执行您似乎知道的所有逻辑，所以我假设您的代码只是一个示例，而您并没有真正做这在`main()`. 在这种情况下，不幸的是，你基本上不走运 - 如果你依赖于知道未来值或操作已经完成，你必须使你的函数异步。

单线程环境中的异步，如 Dart 和 Javascript，是病毒式的，并且总是向上传播你的调用堆栈。每个调用这个函数的函数，以及调用它们的每个函数，等等，都必须是异步的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T21:29:33.593

不。

当异步操作完成时，您的代码将结果作为回调接收到 acync API 的全部意义。

如果您希望减少嵌套，另一种编写代码的方法可能是将函数传递给`then()`

```
void main() {
  Process.run('some_shell_command', []).then(doSomethingWithResult);  
}

void doSomethingWithResult(result) {
   print(result.stdout); // I have the output here...
} 
```

# eclipse - 如何在 Eclipse IDE 中自定义 Android XML 格式化程序设置？

> ID：14820703
> 
> 赞同：3
> 
> 时间：2013-02-11T20:57:02.907
> 
> 标签：eclipse, customization, adt, eclipse-adt, xml-formatting

这个问题是以前帖子的扩展，例如：

*   [在 Eclipse 中自定义 XML 格式化程序？](https://stackoverflow.com/questions/5356496/customising-the-xml-formatter-in-eclipse)
*   [如何配置 Eclipse XML 格式？](https://stackoverflow.com/questions/2943350/how-to-configure-eclipse-xml-formatting)

我想自定义用于在 Android 项目中格式化 XML 文件的设置。我在 Eclipse IDE 的首选项中找到了以下基本选项。

> Eclipse 格式 XML 使用标准的 Android XML 样式而不是配置的 Eclipse XML 样式。

![Eclipse IDE 首选项/Android/编辑器](../Images/fb025752b7621c04bfdc45d57349cbe9.png)

我希望**每个 XML 文件都以换行符结尾，**但我无法在此处进行配置。

Eclipse IDE 允许为 Java 文件配置此设置。可以启用“文件末尾的新行...”选项，`Eclipse IDE Preferences / Java / Code Style / Formatter`如下面的屏幕截图所示。

![Eclipse IDE 首选项/Java/代码样式/格式化程序](../Images/3986381fbc6ea7781dc95baeb817d1e2.png)

如果有一个**配置文件**（例如 Java 设置）可以由团队成员交换并置于版本控制之下，那就太好了。

# php - xml数据提取？

> ID：14820706
> 
> 赞同：-1
> 
> 时间：2013-02-11T20:57:08.313
> 
> 标签：php, foreach

xml来源：

```
<nodes>
<TUR>
<node>
<kaynakad>Veri</kaynakad>
<rast>xxx1</rast>
<saat>18:50</saat>
</node>
<node>
<kaynakad>Veri</kaynakad>
<rast>xxx5</rast>
<saat>18:50</saat>
</node>
</TUR>
</nodes> 
```

在循环中使用：

```
<?php foreach ($ev->TUR->children() as $node) { ?> 
```

节目：

```
<?php echo $kaynakad=$node->kaynakad. '</br>'; ?>
<?php echo $rast=$node->rast. '</br>'; ?>
<?php echo $saat=$node->saat. '</br>'; ?> 
```

**kaynakad**和**saat**没问题。但是，**急**问题。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:26:35.257

我建议：simplexml_load_string

```
<?php
$string = <<<XML
<?xml version='1.0'?> 
<document>
 <title>Forty What?</title>
 <from>Joe</from>
 <to>Jane</to>
 <body>
  I know that's the answer -- but what's the question?
 </body>
</document>
XML;

$xml = simplexml_load_string($string);

print_r($xml);
?> 
```

# jquery - 悬停时的jQuery UI大小效果然后返回原始大小

> ID：14820710
> 
> 赞同：2
> 
> 时间：2013-02-11T20:57:18.790
> 
> 标签：jquery, jquery-ui, jquery-effects

我还在学习 javascript、jQuery 和 jQuery UI，我正在尝试做一些看起来很简单的事情：

使灰色 div 框在悬停时扩展为更大的尺寸，并在悬停时**保持**新尺寸，只有在您将鼠标移开时*才会恢复到原始尺寸。*

这是我的代码：

```
$("div").hover(
 // Mouse Over: Expand to 75 x 75
  function(){
    $(this).effect("size", { to: {width: 75,height: 75} }, 1000);
  },
  // Mouse Out: 50 x 50 is original size
  function(){
    $(this).effect("size", { to: {width: 50,height: 50} }, 500);
}); 
```

我知道我很接近，但它并不完全正确。在这里查看我的小提琴[http://jsfiddle.net/L496W/1/](http://jsfiddle.net/L496W/1/)。盒子会扩大到更大的尺寸，但在仍然悬停在上面时会缩小。

我究竟做错了什么？

另外， .toggle() 会在这里帮助我吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T21:00:16.550

使用 jQuery 的[`.animate()`](http://api.jquery.com/animate/)方法。

```
$("div").hover(
  // Mouse Over
  function(){
    $(this).animate({width: 75,height: 75}, 1000);
  },
  // Mouse Out
  function(){
      $(this).animate({width: 50,height: 50}, 1000);
}); 
```

[jsfiddle](http://jsfiddle.net/qtc4y/)

# css - CSS3 没有带浮动的项目符号：左

> ID：14820714
> 
> 赞同：1
> 
> 时间：2013-02-11T20:57:39.773
> 
> 标签：css, css-float

我在我的网站上的某处进行了无法回溯的更改，并且由于某种原因，我在所有**水平列表中**全局丢失了 CSS3 项目符号。但无论如何，在我看来，这段代码应该可以工作......但是使用 float: left 我松开了子弹，无法保留它们。谁能告诉我为什么我不能用浮动保留子弹：左？

```
ul#info {
    padding-top: 20px;
    text-align: center;
    color: white;
}

ul#info li:first-child {
    list-style: none;
}

ul#info li {
    list-style: disc;
    float: left;
    padding-right: 10px;
    font-size: 20%;
    list-style-position: inside;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T21:49:54.730

浮动元素会将其更改为*块框*，除非将其设置为*无*，否则它会忽略显示类型。由于元素`display: list-item`不再是，列表相关的属性也不会影响它。

您可以像这样在 before 伪元素上注入您自己的光盘：

[http://jsfiddle.net/eyDc6/](http://jsfiddle.net/eyDc6/)

```
li {
    display: inline-block;
}

li:before {
    content: "\2022";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T21:04:21.120

您的项目符号隐藏在 ul 的左边缘 - 当浏览器决定将列表浮动到哪里时，不会考虑它们的宽度。尝试添加一些左填充和/或边距。

编辑：或者不是，虽然我已经看到了这种情况。您始终可以使用 css :before 选择器 ( [http://www.w3schools.com/cssref/sel_before.asp](http://www.w3schools.com/cssref/sel_before.asp) ) 作为解决方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T21:03:42.127

在这种情况下尝试使用`display: inline-block`而不是`float:left`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-12T10:04:23.950

我在图像右侧浮动列表时遇到了同样的问题。项目符号出现在图像上，不再与其余浮动文本对齐。

这段css解决了我的问题。

`ul { overflow: hidden; }`

希望这有帮助。

# objective-c - 由不由星号引导的冒号分隔

> ID：14820722
> 
> 赞同：2
> 
> 时间：2013-02-11T20:58:19.213
> 
> 标签：objective-c, regex

我是使用正则表达式的初学者，我正在寻找一种用冒号分割字符串的模式，该冒号前面没有星号。

我发现了以下我认为可行的模式，但没有。

```
[^:]+\\*:[^:]+ 
```

（`\*`被转义为在 Objective-C 编译器中工作）

我需要改变什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T20:59:11.287

您需要使用[负面的后视](http://www.regular-expressions.info/lookaround.html)：

```
(?<![*]): 
```

此正则表达式匹配`colon(:)`前面没有 -> `(?<!..)`a `*`->的 a `[*]`。在字符类中使用`*`，它失去了它的意义，只匹配一个`*`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T21:10:30.987

不是星号的单个字符可以这样表示：`[^*]`. 这会将星号放入一个没有特殊含义的字符类中。紧跟在左大括号后面的插入符号否定了字符类。

匹配前面不是星号的冒号可以简单地写成`[^*]:`

要仅获取用于定位的冒号，请将其单独放入一个组中：`[^*](:)`

# properties - 在处理中访问基元的属性

> ID：14820724
> 
> 赞同：0
> 
> 时间：2013-02-11T20:58:29.207
> 
> 标签：properties, processing

我正在使用处理，我很好奇如何访问原语的属性。该参考提供了构造这些原语的参数，但没有关于属性的信息。例如（我正在尝试做一些比这更复杂的事情，但这会为简单起见），如果我创建一条长度不断变化的线，有没有办法打印该线的长度：

```
int lineLength = 0;

void draw(){
 line(random(0,50),random(0,50),lineLength,lineLength);
 lineLength++;
 printLn(line.length);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:23:06.537

我不确定您所说的“原始”是什么意思。如果您的意思是绘图函数（例如`point(),line(),triangle(),rect(),ellipse(),beginShape(),endShape(),vertex()`等），那么这些只是处理使用传递的参数/参数在屏幕上渲染形状一次的函数。调用函数后，参数会丢失，除非它们存储在某个地方的变量中。

例如，一条线由两个点定义，因此您可以随意存储/修改它们，并在需要时简单地渲染：

```
PVector p1,p2;

void setup(){
  p1 = new PVector(random(100),random(100));
  p2 = new PVector(random(100),random(100));
}
void draw(){
  line(p1.x,p1.y,p2.x,p2.y);
  println("length: " + p1.dist(p2));
} 
```

仅仅因为在 Processing 中没有定义 Line 类并不意味着你不能拿出你自己的版本来做你需要它做的事情：

```
Line l = new Line(random(100),random(100),random(100),random(100));

void draw(){
  background(127);
  l.draw();
  text("length: " + l.length(),1,10);
  text("mouse dist:\n" + (int)l.distanceToPoint(new PVector(mouseX,mouseY)),1,20);
}

class Line{
  PVector p1,p2;
  Line(float x1,float y1,float x2,float y2){
    p1 = new PVector(x1,y1);
    p2 = new PVector(x2,y2);
  }
  void draw(){
    line(p1.x,p1.y,p2.x,p2.y);
  }
  float length(){
    return p1.dist(p2);
  }
  //other awesome line stuff here
  //'kindly borrowed' from: http://paulbourke.net/geometry/pointline/
  float distanceToPoint(PVector p){
    float dx = p2.x - p1.x;
    float dy = p2.y - p1.y;
    float u = ((p.x - p1.x) * dx + (p.y - p1.y) * dy) / (dx * dx + dy * dy);//traversal(% 0.0 to 1.0) along line
    PVector closest;
    if(u < 0)      closest = p1;
    else if(u > 1) closest = p2;
    else           closest = new PVector(p1.x + u * dx, p1.y + u * dy);
    return closest.dist(p);   
  }
} 
```

当然，您也可以使用提供此类功能的库，例如[toxiclibs](http://toxiclibs.org/docs/core/toxi/geom/Line2D.html)。

高温高压

# code-coverage - SpecWatchr 可以与 dotCover 集成吗？

> ID：14820728
> 
> 赞同：1
> 
> 时间：2013-02-11T20:58:43.107
> 
> 标签：code-coverage, bdd, nspec

NSpec [SpecWatchr](http://nspec.org/continuoustesting/)工具能否与 dotCover 集成以[通过](http://www.jetbrains.com/dotcover/)测试分析代码覆盖率？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T21:26:38.660

SpecWatchr 只是一个文件观察器，它在 Rakefile 中执行 rake 任务。使用 DebuggerShim.cs（装饰有 NUnit 的 TestFixture 属性），您应该能够创建一个 rake 任务，该任务将通过 dotCover 运行该特定测试。

链接到 DebuggerShim.cs： [https ://github.com/mattflo/NSpec/blob/master/NSpecSpecs/DebuggerShim.cs](https://github.com/mattflo/NSpec/blob/master/NSpecSpecs/DebuggerShim.cs)

然后，如果 DebuggerShim.cs 发生更改，您可以更改 SpecWatchr 以运行 dotCover： [https ://github.com/amirrajan/SpecWatchr/blob/master/dotnet.watchr.rb#L223](https://github.com/amirrajan/SpecWatchr/blob/master/dotnet.watchr.rb#L223)

在 SpecWatchr 中执行 Rake 文件： [https ://github.com/amirrajan/SpecWatchr/blob/master/dotnet.watchr.rb#L177](https://github.com/amirrajan/SpecWatchr/blob/master/dotnet.watchr.rb#L177)

请随时在 Twitter 上与我联系，我很乐意设置一个 Skype 会话来引导您完成它。

# git - 如何从当前现有的本地 git 存储库中最好地设置“中央”git 存储库？

> ID：14820730
> 
> 赞同：1
> 
> 时间：2013-02-11T20:58:46.697
> 
> 标签：git, distributed-system

我知道 git 是分布式的，坦率地说，我喜欢它的特性。

情况是我一直是一个软件的唯一开发人员，我从 git 开始就在我的本地存储上管理它。一直都是这样 - 换句话说，目前只存在一个存储库，我在其中提交和合并内容并将主分支保持在“公开发布”状态。

我现在即将放弃对该项目的独占控制权，并将与其他开发人员共享其源代码库，他们将提交自己的更改。所以我需要将我的项目副本分发给其他人。自然地，我想继续提交我未来的工作，并能够审查其他工作并将其合并到我的副本中 -*据说创建了一个工作 git 来做*。

问题的一个方面是我的计算机和其他开发人员的计算机都不是公共的（即可以作为服务器`ssh`或类似服务访问），我无法想象我从他们的副本中提取和合并更改是多么可行存储库到我的，反之亦然。然而，该项目包括一个 Intranet 机器，我们可以将其用作存储库主机，此时我需要一条关于如何最好地设置这一切的建议。

开发人员（包括我）都不应该被指定为项目的仁慈独裁者，但是，为了管理，我将负责确保某种主分支或其他分支可用于从中签出公开版本。但我也不知道有多少其他开发人员将加入，即我们将拥有多少分布式副本，因此可能需要存储库的“中央”/主副本，我将独自创作。

恐怕我在这里无法真正清楚地看到大局。如何最好地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:19:30.193

如果您在 Intranet 中已经有一个候选服务器，那么使用它没有任何问题。只需在那里建立一个裸仓库，将现有的仓库推送到那里并开始将其用作中央仓库。这就是它的全部 - 没有独裁者，但中央主机将是一个中央“主仓库”。

我知道这听起来像传统的集中式模型，确实如此，但我们已经用 git 做了很多，而且效果很好。

如果你想让你的仓库作为主仓库，你可以向其他人开放那个主仓​​库，但是有一个单独的生产分支或仓库。然后，您只需将您批准的内容从 master 合并到生产分支/repo。

编辑：有关如何进行设置的实用说明在[此处](http://tumblr.intranation.com/post/766290565/how-set-up-your-own-private-git-server-linux)进行了详细说明。全程都有指导指导。我唯一要补充的是`git push origin master`，对于第一次推送，您可能想要使用`git push --all origin`而不是，因为这将推送所有分支、标签等，而不仅仅是主分支。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T21:02:00.030

只需同意与其他开发人员的工作流程即可。我使用每个功能的分支并在这里写下我的工作流程：http: [//dymitruk.com/blog/2012/02/05/branch-per-feature/](http://dymitruk.com/blog/2012/02/05/branch-per-feature/)

除此之外，bitbucket 提供免费的私人存储库，因此您不必担心设置自己的服务器。如果这是公开的，您也可以使用 github - 或者从他们那里获得私人回购，尽管它不是免费的。

# python - 在 WTForms 中填充 GAE 数据存储键值

> ID：14820731
> 
> 赞同：1
> 
> 时间：2013-02-11T20:58:48.743
> 
> 标签：python, google-app-engine, wtforms

我正在使用 WTForms 和 GAE (python) 数据存储。我正在尝试将键值传递给表单以用于 CRUD 目的，但它发送的是对象，而不是作为字符串的键。这是html输出行：

```
<td> <input id="ts_list-0-key" name="ts_list-0-key" type="hidden" value="&lt;bound method TransactionSchedule.key of &lt;main.TransactionSchedule object at 0x04F19070&gt;&gt;"> </td> 
```

所有其他字段都正确填充。

其他信息：我同时使用 FormField 和 FieldList 来重复多个子表单。要填充我正在使用 append_entry() 的子表单：

```
for ts in tslist:
    form.ts_list.append_entry(ts) 
```

似乎在任何地方都找不到此信息，但也许我是个糟糕的 Google 员工。

我试过了：

- 将密钥转换为模板（jinja2）中的字符串，但似乎无法使其正常工作

- 在 db.Model 类中创建一个`__str__`和一个`__unicode__`方法，将值作为字符串返回，但我想我读到了甚至不允许的地方：/

任何帮助都会很棒！

如果您需要查看更多代码，请告诉我，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T08:55:40.283

很难说没有看到更多的代码，但看起来你的代码中的某个地方你有一些类似的东西`ts.key`（假设这`ts`是一个实例`TransactionSchedule`）。`key`实际上是一种方法（不是属性），因此您需要改为调用它`ts.key()`。

例如，这是一个简单的类，它有一个方法 - `my_print`。请注意将其作为属性引用（而不是将其作为方法调用）如何返回与您在`value`属性中的上述内容类似的输出：

```
>>> class MyClass(object):
...     def __init__(self, a):
...         self.a = a
...     def my_print(self):
...         print self.a
... 
>>> c = MyClass('hello')
>>> c.my_print
<bound method MyClass.my_print of <__main__.MyClass object at 0x7f11c16791d0>>
>>> c.my_print()
hello 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T11:29:05.567

NDB 的 ts.key 或 db 的 ts.key() 如果你像我一样记性不好，请使用备忘单

[链接到备忘单](https://docs.google.com/document/d/1AefylbadN456_Z7BZOpZEXDq8cR8LYu7QgI7bt5V0Iw/mobilebasic)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T23:58:35.027

感谢您的回复。

正如 RocketDonkey 所建议的那样，这个问题确实与`db.key`vs有关。`db.key()`

我最终做的是：

```
 for ts in tslist:
            ts_key = str(ts.key())
            form.ts_list.append_entry(ts)
            form.ts_list[-1].key.data = ts_key 
```

可能有更好的方法，但它奏效了。可以使用将键设置为字段的默认值`str(db.key())`

# java - 无法通过 POST 调用找到 java

> ID：14820738
> 
> 赞同：0
> 
> 时间：2013-02-11T20:59:22.370
> 
> 标签：java, post, cgi, javac

我继承了传统的 Perl CGI 脚本，这些脚本曾经能够从 HTML 表单（通过 POST）接收信息并使用该表单数据编译一些 java 源文件（最终创建一个 Java 小程序）。他们不再编译，我需要找出原因。

最明显的问题（虽然我不知道是什么改变使它从工作变为不工作）是 CGI 脚本找不到 java 编译器（sh：/usr/bin/javac：没有这样的文件或目录）它是由提交的 HTML 表单调用。

我在 CGI 脚本中插入了一个调用来编译一个简单的 java 文件 ( `/usr/bin/javac ./HelloWorld.java`)，该文件精确地模仿了对失败的大 java 文件（需要从 POST 数据设置参数）的调用。所以我的希望是，如果我能得到 HTML 表单的提交来编译我的 HelloWorld 文件，它也能够编译需要参数的大文件。

当我从命令行调用 CGI 脚本时，找到了 java 编译器并编译了我的 HelloWorld java 文件，但是当我使用 HTML 表单时，找不到 java（甚至`/usr/bin/java -version`什么都不做）。我的编译语句在 CGI 脚本中的位置无关紧要（因此编译语句与我处理 HTTP 请求的位置无关），它总是在被命令行调用时编译并且无法当被表单调用时找到java。

是否有原因使得 java 在通过表单 (POST) 调用时对 CGI 脚本不可见但在命令行调用时可见？

提前致谢！伯尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:04:48.213

Apache 和 CGI​​ 周围的环境与交互式控制台不同。

您可以尝试编写一个基本的 Bourne shell 脚本 (sh) 并指定所有路径。

真的需要从表单中即时编译 Java 吗？

我很好奇：为什么？

# vb.net - 打印 DataGridView (VB 2010) 时重复同一页面

> ID：14820740
> 
> 赞同：1
> 
> 时间：2013-02-11T20:59:26.140
> 
> 标签：vb.net, printing, datagridview

我正在开发一个应用程序来显示学生的工作打印历史。我能够将数据拉入 DataGridView 并毫无问题地显示它，但是当我去打印数据时，它会提供第一页的复制，直到它出错。单页报告工作正常，所以我认为这必须相当简单。这是处理打印的代码部分：

```
Private Sub PrintDocument1_PrintPage(ByVal sender As Object, ByVal e As System.Drawing.Printing.PrintPageEventArgs) Handles PrintDocument1.PrintPage
    With dgvPrintHistory
        Dim fmt As StringFormat = New StringFormat(StringFormatFlags.LineLimit)
        Dim newpage As Boolean = True
        Dim mRow As Integer = 0
        Dim prFont As New Font("Verdana", 22, GraphicsUnit.Point)
        Dim siFont As New Font("Verdana", 9, GraphicsUnit.Point)
        Dim hdrFont As New Font("Verdana", 10, FontStyle.Bold)
        Dim y As Single = e.MarginBounds.Top
        Dim strStudentInfo As String

        If PrintDocument1.DefaultPageSettings.Landscape Then
            strStudentInfo = "Pages Printed (Semester): " & lblPrintPages.Text & vbTab & "Semester Balance: " & lblBalance.Text & vbTab & "Reporting Dates: " & lblDates.Text
            fmt.LineAlignment = StringAlignment.Center
            fmt.Trimming = StringTrimming.EllipsisCharacter
            e.Graphics.DrawImage(picICC.Image, 130, 10)
            e.Graphics.DrawString(vbTab & "        Student Printing Report: " & lblUserName.Text, prFont, Brushes.Black, 60, 40)
            e.Graphics.DrawString(strStudentInfo, siFont, Brushes.Black, 110, 80)
            PrintPreviewDialog1.Document = PrintDocument1
            PrintDocument1.DefaultPageSettings.Margins.Left = 100
            PrintDocument1.DefaultPageSettings.Margins.Right = 100
            PrintDocument1.DefaultPageSettings.Margins.Top = 50
            PrintDocument1.DefaultPageSettings.Margins.Bottom = 50
            y = 120
        Else
            strStudentInfo = "Pages Printed (Semester): " & lblPrintPages.Text & vbTab & "Semester Balance: " & lblBalance.Text & vbTab & "Reporting Dates: " & lblDates.Text
            fmt.LineAlignment = StringAlignment.Center
            fmt.Trimming = StringTrimming.EllipsisCharacter
            e.Graphics.DrawImage(picICC.Image, 90, 10)
            e.Graphics.DrawString(vbTab & "        Student Printing Report: " & lblUserName.Text, prFont, Brushes.Black, 5, 40)
            e.Graphics.DrawString(strStudentInfo, siFont, Brushes.Black, 55, 80)
            PrintPreviewDialog1.Document = PrintDocument1
            PrintDocument1.DefaultPageSettings.Margins.Left = 50
            PrintDocument1.DefaultPageSettings.Margins.Right = 50
            PrintDocument1.DefaultPageSettings.Margins.Top = 100
            PrintDocument1.DefaultPageSettings.Margins.Bottom = 100
            y = 100
        End If
        Do While mRow < .RowCount
            Dim row As DataGridViewRow = .Rows(mRow)
            Dim x As Single = e.MarginBounds.Left
            Dim h As Single = 0

            For Each cell As DataGridViewCell In row.Cells
                Dim rc As RectangleF = New RectangleF(x, y, cell.Size.Width, cell.Size.Height)
                e.Graphics.DrawRectangle(Pens.Black, rc.Left, rc.Top, rc.Width, rc.Height)
                If newpage Then
                    e.Graphics.DrawString(dgvPrintHistory.Columns(cell.ColumnIndex).HeaderText, .Font, Brushes.Black, rc, fmt)
                Else
                    e.Graphics.DrawString(dgvPrintHistory.Rows(cell.RowIndex).Cells(cell.ColumnIndex).FormattedValue.ToString(), .Font, Brushes.Black, rc, fmt)
                End If
                x += rc.Width
                h = Math.Max(h, rc.Height)
            Next
            newpage = False
            y += h
            mRow += 1
            If y + h > e.MarginBounds.Bottom Then
                e.HasMorePages = True
                mRow -= 1
                newpage = True
                Exit Sub
            End If
        Loop
        mRow = 0
    End With
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T03:53:27.857

您需要`e.HasMorePages = False`在最后一页设置。您还需要设置一个模块级别的页面计数器变量来跟踪您所在的页面。PrintPage 例程只打印一个页面。变量的值范围`mRow`应该是模块级页面计数器变量的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T11:25:45.330

```
 Dim mRow As Integer = 0
 Dim newpage As Boolean = True 
```

和`e.HasMorePages = False`

**mRow newpage**并且必须在私有子外部声明，

完成了，它最后停止计算页数

# asp.net-mvc-4 - 是否可以缓存我的自定义 ActionFilterAttribute 的结果？

> ID：14820741
> 
> 赞同：1
> 
> 时间：2013-02-11T20:59:31.007
> 
> 标签：asp.net-mvc-4, dynamics-crm-2011

我有一个 MVC 网站，它使用 AD 身份验证来为同样是 CRM 2011 的用户显示数据。用户的 CRM 权限由他们在 CRM 中的角色决定，所以目前该`OnActionExecuting`方法获取执行用户的域名，并查询 CRM 以获取他们的角色。如果他们没有有效的角色，则会返回无效的权限视图。

对 CRM 的调用速度很慢，如果每个请求都必须调用，可能会变得很昂贵。我可以在[MVC 3 发行说明](http://www.asp.net/whitepapers/mvc3-release-notes#RTM-BC)中看到过滤器被积极缓存，但不太确定这对我意味着什么。

我希望能够根据用户的域名缓存用户的权限，但听起来这可能已经发生了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:32:24.887

如果您[指的是以下陈述](http://www.asp.net/whitepapers/mvc3-release-notes#RTM-BC)，我认为您对这一点的理解是错误的：

> 在 ASP.NET MVC 3 中，过滤器被更积极地缓存。因此，任何不正确地存储实例状态的自定义操作过滤器都可能被破坏。

这并不意味着过滤器的结果被缓存。这意味着过滤器本身将被缓存并被多个请求重用。它可与 CRM 插件相媲美。你不应该在其中跟踪状态，或者如果你这样做了，你必须小心不要进入并发的乐趣。

在您的情况下，我将使用例如[MemoryCache](http://msdn.microsoft.com/en-us/library/system.runtime.caching.memorycache.aspx)将用户的角色/权限缓存在内存中一段时间​​。

# javascript - 为什么我的 Javascript 没有正确更新时间？

> ID：14820742
> 
> 赞同：0
> 
> 时间：2013-02-11T20:59:43.350
> 
> 标签：javascript, time, setinterval, clock

好吧，我遇到了最奇怪的问题。我根据在 codepen 上找到的代码创建了一个代码。它在 Codepen 中完美运行，每小时更换一次图像。我通过更改时钟对其进行了测试。但是，当上传到我的网站时，它不会正确更新。

这是我的本地html：

```
 <div class="table">    
    <div id="plate">
    <div id="hour1"> </div>
    </div>      
</div> 
```

CSS：

```
html,body { margin:0px; padding:0px; background-color : #fff; }

#plate{
width: 465px;
height: 465px;
background-repeat: no-repeat;
background-image:url(http://www.cassietodd.me/gra423/clockapp/images/Pieclock_plate.png);
}

#hour1{
float:left;
width: 320px;
height: 520px;
background-repeat: no-repeat;
background-image: url(http://www.cassietodd.me/gra423/clockapp/images/strawberry_01.png);
background-size: 104%;
}

.table{
margin: 0px auto;
margin-top: 30px;
width:320px;
height: 568px;  
background-image: url(http://www.cassietodd.me/gra423/clockapp/images/Pieclock_table.png);
background-repeat: no-repeat;

} 
```

我的JavaScript：

```
 window.onload = function () {
  var updateView = (function() {
  var sec;
  return function () {
   var now = new Date();
   if (now.getSeconds() == sec) return;

var second = now.getSeconds();
var minute = now.getMinutes();
var hour = now.getHours();

var hour1;
if(hour < 12){
  hour1 = 0;
}else{
  hour1 = Math.floor(hour / 2);
}
var hour1 = hour%12;

  _updateView(hour1);
}
 })();

setInterval(updateView, 500);

function _updateView(h1) {

var _url = "http://www.cassietodd.me/gra423/clockapp/images/";
 $('#hour1').css("background-image", "url("+_url+"h" + h1 + ".png)");
 }
} 
```

你可以看到在 Codepen 上工作的那个。 [http://codepen.io/cmtodd3/pen/mzibu](http://codepen.io/cmtodd3/pen/mzibu)

它的代码完全相同，但它可以在 codepen 上运行，但在我的网站上时间都错了？这是我的测试网站以防万一

[http://www.cassietodd.me/gra423/clockapp](http://www.cassietodd.me/gra423/clockapp)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:15:34.940

我得到了工作用户错误的代码。我只需要打开一个新窗口。在我关闭它并再次打开我的网站后，我在过去一个小时内一直在使用同一个窗口，它正在工作。我不确定为什么会这样，但我正在回答我自己的问题。哎呀我尴尬了

# php - 如何不使用 HTML JQuery AJAX PHP 刷新页面？

> ID：14820743
> 
> 赞同：0
> 
> 时间：2013-02-11T20:59:45.183
> 
> 标签：php, javascript, ajax, page-refresh

我正在尝试使用 Javascript/AJAX 将选定单选按钮的值放入 PHP 会话变量中。一切正常，除了页面刷新。有什么办法不刷新页面吗？

的HTML：

```
<input type="radio" name="shipping_method" value="Standard"> Standard<br>
<input type="radio" name="shipping_method" value="2-day"> 2-Day Air&#42<br>
<input type="radio" name="shipping_method" value="Overnight"> Overnight<br> 
```

Javascript/AJAX（注释掉了一些警报）：

```
<script>
$(document).ready(function() {
    $("input[name=shipping_method]").on('change', function(){
         var shipping_method  = $('input:radio[name=shipping_method]:checked').val();
/*                          alert (shipping_method); */
    $.ajax ({
        type: "GET",
        url: ajax/shipping_method.php?shipping_method="+shipping_method,
            success : function(data){
/*                      alert(data);   */      
        },
                    error : function(XMLHttpRequest, textStatus, errorThrown) {
                    alert("problem: " + errorThrown);
            } 
    });
    });
}); 
```

shipping_method.php：

```
<?php session_start(); ?>
<?php
        $shipping_method = $_GET['shipping_method'];
        $_SESSION['shipping_method'] = $shipping_method;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:26:03.973

使用 event.preventDefault(); 应该解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T21:03:13.833

不知道为什么会发生，但请尝试阻止默认操作。将部分代码更改为：

```
$("input[name=shipping_method]").on('change', function(e){
e.preventDefault(); 
```

# jquery - ICanHaz.js 在 ul 中命名每个 li？

> ID：14820745
> 
> 赞同：0
> 
> 时间：2013-02-11T20:59:52.587
> 
> 标签：jquery, icanhaz.js

我正在使用 icanhaz.js 模板，我想知道是否有人知道是否可以`<li>`在模板创建的列表中为每个模板指定一个类名？

例如：

```
 <script id="testLI" type="text/html">
      <li class="list-1">
        <p>Name: {{ name }}</p>
        <p>Here Now: {{ count }}</p>
        <p>ID: {{ id }}</p>
      </li>
  </script> 
```

如果我可以让每个`<li>`人都有一个“list-1”、“list-2”、“list-3”等类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:17:11.833

不知道你是如何实施的。但是你应该遍历你的数据，并且在你的循环中有一个计数器。每次增加计数器并放入{{index}}。

```
<script id="testLI" type="text/html">
  <li class="list-{{index}}">
    <p>Name: {{ name }}</p>
    <p>Here Now: {{ count }}</p>
    <p>ID: {{ id }}</p>
  </li>
</script> 
```

示例循环

```
for (var i = 1; i < data_var.length; i++) {
  var data = {
    index: i,
    name: "name",
    count: "count",
    id: "id"
  }
  // Do whatever you need with data.
  // html = ich.listLI(data)
} 
```

# android - 弃用的 Androidplot 构造函数

> ID：14820746
> 
> 赞同：1
> 
> 时间：2013-02-11T20:59:53.883
> 
> 标签：android, androidplot

我正在尝试实现 Androidplot，但出现以下错误：

> 构造函数 LineAndPointFormatter(Integer, Integer, Integer) 已弃用

谁能告诉我`LineAndPointFormatter`替换了什么以及如何实现它。

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T21:03:09.973

根据[新的文档](http://androidplot.com/javadoc/0.5.1/com/androidplot/xy/LineAndPointFormatter.html#LineAndPointFormatter%28java.lang.Integer,%20java.lang.Integer,%20java.lang.Integer%29)，这个类没有被任何东西取代。不推荐使用的构造函数仅表明您应该使用不同的构造函数。

已弃用的构造函数的 javadoc 是这样说的：

> 已弃用。从 0.5.1 开始：改用[**LineAndPointFormatter(Integer, Integer, Integer, PointLabelFormatter)**](http://androidplot.com/javadoc/0.5.1/com/androidplot/xy/LineAndPointFormatter.html#LineAndPointFormatter%28java.lang.Integer,%20java.lang.Integer,%20java.lang.Integer,%20com.androidplot.xy.PointLabelFormatter%29)。将相应参数设置为 null 以禁用绘制线条、顶点或填充。使用默认的 FillDirection.BOTTOM。

至于实现，我不能说，因为我没有使用过这个 API，但是额外的参数 ( [`PointLabelFormatter`](http://androidplot.com/javadoc/0.5.1/com/androidplot/xy/PointLabelFormatter.html)) 似乎是一个简单的类，所以如果你可以使用前面的构造函数，这应该大致相同。

# java - Android .java 文件正在通过的完整格式链列表是什么？

> ID：14820755
> 
> 赞同：0
> 
> 时间：2013-02-11T21:00:25.160
> 
> 标签：java, android, dex, smali

我刚刚注意到 .smali 文件，.dex 文件被编译成该文件。我希望能够跟踪我的 .java 文件正在经历的所有转换。

首先，我想知道从创建 .java 文件到我安装的 .apk 执行的所有转换。

其次，我如何才能真正看到并打开在这两者之间创建的所有文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:40:05.543

在标准的 Android 构建过程中，绝不会生成 .smali 文件。这是 Google 不使用的自定义反汇编格式。我假设你反汇编了一个 APK。[标准工具链](http://developer.android.com/tools/building/index.html)中涉及的常见代码相关文件是 java -> class -> (有时是 jar ->) dex -> APK。

# dart - 如何使用新的流 API 在 Dart 中注册自定义事件

> ID：14820756
> 
> 赞同：11
> 
> 时间：2013-02-11T21:00:26.277
> 
> 标签：dart

我正在尝试在 Dart中注册 CustomEvent ( [https://developer.mozilla.org/en-US/docs/DOM/Event/CustomEvent )。](https://developer.mozilla.org/en-US/docs/DOM/Event/CustomEvent)旧代码是：

```
window.on['foo'].add((e) => print(e.detail)); 
```

新的流 API 改变了您注册事件的方式。如何使用新 API 注册 CustomEvents？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T21:10:08.167

这个想法是自定义事件的声明和使用方式与内置事件相同。

因此，对于自定义事件，您可以执行以下操作：

```
class DataGenerator {
   static EventStreamProvider<Event> dataEvent = new EventStreamProvider('data');
} 
```

然后在元素上收听它：

```
DataGenerator.dataEvent.forTarget(element).listen(...); 
```

一旦支持元素子类化并且事件通常直接在其元素上触发，并且当事件子类化允许自定义事件的更有用的事件类型时，这将变得更清晰。

我们讨论了保留`window.on['foo'].listen(...)`API，但试图阻止字符串访问器，因为对于某些事件，我们将它们填充为不同的事件名称。

这是一个更完整的示例：

```
import "dart:html";

DivElement dartDiv;

main() {
  dartDiv = query("#dartDiv");

  // Add a button to generate a CustomEvent called CustomDartEvent.
  var customEventStreamProvider = new EventStreamProvider<CustomEvent>("CustomDartEvent");
  var customEventButton = new ButtonElement()
    ..text = "Generate custom Dart event"
    ..classes.add("gwt-Button")  // For consistency
    ..onClick.listen((e) {
      var detail = {
        "n": 8,
        "s": "Hello from Dart",
        "obj": {
          "hello": "from Dart"          
        }
      };  
      var event = new CustomEvent("CustomDartEvent",
          canBubble: false, cancelable: false, detail: detail);
      window.dispatchEvent(event);
    });
  dartDiv.children.add(customEventButton);

  // Listen for CustomEvents called CustomDartEvent.
  customEventStreamProvider.forTarget(window).listen((e) {
    printString("""
      Received CustomDartEvent:
      type: ${e.type},
      detail: ${e.detail}
    """);
  });
}

void printString(String s) {
  var div = new DivElement()
    ..text = s;
  dartDiv.children.add(div);
} 
```

# jquery - 如何扩展 div 以补偿删除边界 div 的边距？

> ID：14820758
> 
> 赞同：0
> 
> 时间：2013-02-11T21:00:28.220
> 
> 标签：jquery, css, twitter-bootstrap

我正在使用 Bootstrap 的响应式网格布局。我需要调整页面上的一个点，使两列之间没有边距；左栏有一个底部边框，我需要将其右移到右栏的左边框。

**如何扩展 div 以补偿删除右边界 div 的左边距？**

我已经能够做的事情：

*   我可以动态设置左侧 div 的高度，以将底部边框放到我想要的位置：`$('#indented_block .border-bottom').height( $('#indented_block').height()-3 );`
*   我能够确定左 div 的原始宽度：`$('#indented_block .border-bottom').width()`
*   我能够确定右 div 的左边距：`$('#indented_block .border-side').css('margin-left');`
*   我可以设置右 div 的左边距：`$('#indented_block .border-side').css('margin-left',0);`

我无法使用 jQuery`.width()`方法将原始宽度添加到左边距：`$('#indented_block .border-bottom').width( $('#indented_block .border-bottom').width()+$('#indented_block .border-side').css('margin-left'));` 相反，我无法*准确地*将这些值加在一起（由于某种原因，上面的行将宽度设置为大约屏幕）。

我创建了一个[包含所有相关 HTML、JS 和 CSS 的 JSFiddle](http://jsfiddle.net/jhfrench/URwY4/)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:37:22.440

在这种情况下，和之间`$('#indented_block .border-side')`的差异是可以被 使用的单位中的左边距。`.outerWidth(true)``.outerWidth(true)``.width()`

所以我用这个 jQuery 修复了它：

```
var margin_gap=Math.floor( $('#indented_text').outerWidth(true)-$('#indented_text').outerWidth() );
$('#indented_block .border-bottom').height( $('#indented_block').height()-3 ).width( $('#indented_block .border-bottom').width()+margin_gap );
$('#indented_block .border-side').css('margin-left',0); 
```

请参阅[此工作示例](http://jsfiddle.net/jhfrench/URwY4/14/)。

# continuous-integration - 如何使用 Cruise Control 和 Mercurial 进行回滚和构建

> ID：14820759
> 
> 赞同：0
> 
> 时间：2013-02-11T21:00:34.130
> 
> 标签：continuous-integration, cruisecontrol.net, kiln

我有一个用于使用 Cruise Control.NET 进行持续集成的 Web 应用程序的 Kiln/Mercurial 代码存储库。通常，我们在本地提交我们的代码，当我们准备好测试时，我们推送到我们的中央 Kiln 服务器。Cruise Control 会定期检查该服务器上的存储库是否有新修订，当它找到它时，它会构建它并将生成的文件复制到适当的 Web 服务器。如果它通过测试，然后我们手动强制构建到我们的主生产服务器，一切都很好。

然而，最近，我们遇到了一个小问题。我们在上个月推出生产的版本中发现了一个错误，需要修复。从那时起已经有 50 次左右的提交，而这 50 次提交中引入的代码还远未准备好投入生产。我们知道我们可以在本地回滚（更新）到已发布到生产环境的版本并修复代码，但我们无法将其推送到 Kiln 并将其发布到 Cruise Control —— Kiln 服务器上的 Mercurial 抱怨多个头。解决这个问题的最佳方法是什么？

我们搜索了一下，发现了对分支和标签的引用。我们最终在 Kiln 服务器的存储库中创建了一个新分支。那个分支有我们的主存储库减去那 50 个提交。然后我们进行了错误修复并编辑了 Cruise Control 配置以查看那里而不是主存储库。经过一些构建后，我们在生产服务器上修复了我们的错误。回滚、修复并将其推送到 Web 服务器似乎需要大量工作。

由于我们是一家小商店，我们通常有自己的项目要处理。没有故意的分支（直到现在），甚至最小的合并，所以虽然我们对版本控制并不陌生，但这个概念有一些共同的方面我们还没有处理过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:58:19.963

你说你的代码有问题，然后你做了大约 50 次提交。因此，您创建了一个包含当前代码的分支 - 50 次提交。

所以我的建议是它不应该是你的分支，而应该只是主干。分支代码应该只包含重大更改的代码，即您在该代码中工作了很长时间，同时可能有机会在主干中执行一些代码并且可以转移到生产环境中。

因此，在创建 CI 时，我的建议是为 Trunk 和 Branch 分别设置 CI，以便您进行测试。

也只能从主干转移到生产。

# ruby-on-rails - 发送自定义值以设计邮件程序

> ID：14820760
> 
> 赞同：0
> 
> 时间：2013-02-11T21:00:37.537
> 
> 标签：ruby-on-rails, devise, ruby-on-rails-3.2

我有一个多租户应用程序，我正在尝试发送一些有关当前租户的信息以及设计邮件，以便我可以自定义一些文本。

任何人都知道我也可以发送我的 current_tenant 对象吗？我见过一些方法可以覆盖 User 模型中的邮件程序，但 current_tenant 仅在控制器中可用。

```
def create
  self.resource = resource_class.send_reset_password_instructions(resource_params)
end 
```

理想情况下，我想做类似的事情

```
def create
  self.resource = resource_class.send_reset_password_instructions(resource_params, current_tenant)
end 
```

并且能够访问我在电子邮件中的 current_tenant 对象。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:16:04.210

看起来这将在某个时候设计，但同时我发现了一个允许某人将 mailer_params 传递到消息中的分叉。我试过了，它有效。这是 github 讨论，以防其他人感兴趣：

[https://github.com/plataformatec/devise/pull/2207](https://github.com/plataformatec/devise/pull/2207)

# r - 拆分向量并应用 Mann Kendall 检验

> ID：14820764
> 
> 赞同：0
> 
> 时间：2013-02-11T21:01:00.073
> 
> 标签：r, split

我有一个很长的金融时间序列信息、价格和数量的向量。我根据交易量向量扩展了价格向量，因此我基本上得到了每股交易价格，因此只分析了一个向量。我想将此向量拆分为每个长度为 100（可以是任意数字）的长度，并对这些新向量中的每一个应用 Mann-Kendall 趋势分析。下面是我为此编写的代码。

我从 Mann Kendall 测试中得到一个错误，因为这种拆分方法将输出作为列表生成。

有没有办法创建一个新向量并在每个向量上运行 Mann Kendall 测试，并且每个测试的输出都可以轻松访问？

```
library(Kendall)

priceexp <- rep(price, volume)

max <- 100
xx <- seq_along(priceexp)
d1 <- split(priceexp, ceiling(xx/max))

for(i in (1:length(d1))) {
    MannKendall(d1[i])
} 
```

输入的两个向量的样本：

```
"price","volume"
125,4020
125,1100
125,191
124.8,329
125.5,400
125.6,100
125.7,600
125.2,686
125.2,898
125.2,1416
125.6,150
125.6,500
125.6,200
125.6,41
125.5,400
125.7,300
125.7,14
125.7,1200
125.7,300
125.7,686
125.8,1000
125.8,1700
125.8,144
125.8,225
125.9,500
125.9,446
126,500
126,225
126,500
126,250
126,28
126,340
126,600
125.9,275
125.9,323
125.9,152
125.8,1931
125.9,196
125.9,571
125.8,214
125.8,300
125.7,353
125.8,432
125.8,1356
126,400
126,2133
126,300
126,190
126,376
125.8,186
126,750
126,431
126,1403
126,39
125.9,259
126.1,900
126.1,307
126.1,124
126.1,750
126.2,100
126.2,117
126,200
126,94
126,453
126,149
126,661
126,600
126,549
126,315
126,318
126,297
125.9,300
125.9,454
125.9,370
125.8,114
125.8,1100
125.8,7344
125.8,2656
125.8,333
126,120
125.9,878
125.9,462
125.9,899
125.9,45
125.7,2000
125.7,889
125.7,4611
125.7,2500
125.9,652
125.9,1610
125.9,332
125.9,750
125.9,627
125.9,473
125.9,182
125.9,32
125.9,1305
125.9,98
125.9,330
125.9,373
125.9,636
125.9,1291
125.9,1675
125.9,1029
125.9,314
125.9,400
125.9,699
125.9,300
125.8,300
125.8,7
126,659
125.9,750
126,441
126,2000
126,86
126,300
126,1300
125.9,243
125.9,456
125.9,64
126,400
126,2000
125.9,319
125.9,423
125.8,447
125.8,387
125.8,352
125.8,200
125.8,1123
125.8,379
125.8,300
125.8,600
125.8,61
125.8,340
125.8,200 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:16:36.467

例如`lapply`，在这里我只对前 5 个元素执行此操作。

```
 lapply(d1[1:5],MannKendall)
WARNING: Error exit, tauk2\. IFAULT =  12
WARNING: Error exit, tauk2\. IFAULT =  12
WARNING: Error exit, tauk2\. IFAULT =  12
WARNING: Error exit, tauk2\. IFAULT =  12
WARNING: Error exit, tauk2\. IFAULT =  12
$`1`
tau = 1, 2-sided pvalue =1

$`2`
tau = 1, 2-sided pvalue =1

$`3`
tau = 1, 2-sided pvalue =1

$`4`
tau = 1, 2-sided pvalue =1

$`5`
tau = 1, 2-sided pvalue =1 
```

**编辑**

结果`MannKendall`是一个列表，你可以取消它，

```
 do.call(rbind,lapply(d1[1:5],function(x)unlist(MannKendall(x))))

  tau sl S D varS
1   1  1 0 0    0
2   1  1 0 0    0
3   1  1 0 0    0
4   1  1 0 0    0
5   1  1 0 0    0 
```

# android - 使复选框在 Android 中看起来被禁用

> ID：14820766
> 
> 赞同：5
> 
> 时间：2013-02-11T21:01:02.247
> 
> 标签：android, checkbox

我想制作一个提供三种不同状态的复选框：未选中、“一半”选中和选中。为了与当前系统样式保持一致，我想为“半”选中状态使用灰色/禁用样式，但我找不到任何定义这种外观的可绘制对象。如何在不真正禁用复选框的情况下使复选框看起来已禁用？提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-08-26T04:17:17.720

我花了很长时间试图完全按照您的要求做，最后意识到一个相当简单的解决方案会起作用（至少对我来说）。我没有使用我自己的可绘制对象和样式，也没有尝试获取未记录的系统资源，而是降低了半选中状态的不透明度，并恢复了全选中状态的不透明度。例如，我执行以下操作：

```
if (half_checked)
    checkBox.setAlpha(0.4f);
else
    checkBox.setAlpha(1.0f); 
```

这会产生如下结果： ![半检查状态](../Images/bc4c7f958ef212ca5ebebe27f305d63c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T21:59:03.353

当我需要类似的东西时，我会使用 setBackground 或 setTextColor。您也可以使用 setPressed 使您的三个状态为（选中、未选中和已按下）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T21:04:35.637

由于复选框是一种按钮，因此适用于按钮的任何状态也适用于它。

这是关于 android 按钮的不同状态的讨论 [如何使按钮变灰？](https://stackoverflow.com/questions/8743120/how-to-grey-out-a-button)

# coffeescript - CoffeeScript 未在 Play 2.1.0 中编译

> ID：14820768
> 
> 赞同：8
> 
> 时间：2013-02-11T21:01:03.420
> 
> 标签：coffeescript, playframework-2.1

我正在 Play 2.1.0 中尝试使用 CoffeeScript 的第一步。我创建了一个新应用程序并将我的 CoffeeScript 文件 main.coffee 放在 app/assets/javascripts/ 中。

我希望在启动播放应用程序时（在播放控制台中输入“运行”），我的 CoffeeScript 将被编译并将生成的 main.js 放置在 public/javascripts 目录中。

但是在该目录中没有创建 main.js。我是否必须在其他地方添加一些配置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T08:47:29.487

如[CoffeeScript 文档](http://www.playframework.com/documentation/2.1.0/AssetsCoffeeScript)中所述：

> 请注意，托管资源不会直接复制到应用程序的公用文件夹中，而是保存在 target/scala-2.xx/resources_managed 中的单独文件夹中。

`Assets`您必须使用反向路由通过控制器访问它：

```
<script src="@routes.Assets.at("javascripts/main.js")"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-30T14:00:16.250

如[文档](https://www.playframework.com/documentation/2.3.x/AssetsCoffeeScript)所述：`CoffeeScript sources are compiled automatically during an assets command, or when you refresh any page in your browser while you are running in development mode.`

所以，如果你不在`development mode`，你应该使用`assets`命令手动编译你的 CoffeeScript。

在输入`assets`命令之前，请确保您已`sbt-coffeescript`通过在文件中添加以下行来将插件添加到项目中`project/plugins.sbt`：

```
addSbtPlugin("com.typesafe.sbt" % "sbt-coffeescript" % "1.0.0") 
```

通过添加上一行启用 CoffeeScript 编译后，进入项目的根目录并输入`sbt`命令。在`sbt`交互 shell 中，您可以输入`assets`命令，您将获得如下输出：

```
$ assets
[info] CoffeeScript compiling on 1 source(s)
[success] Total time: 4 s, completed May 30, 2015 9:43:29 PM 
```

如您所见，CoffeeScript 编译成功。

# ios - 我需要在线程中运行 AudioServicesCreateSystemSoundID

> ID：14820772
> 
> 赞同：1
> 
> 时间：2013-02-11T21:01:29.633
> 
> 标签：ios, objective-c, xcode, ios6

我正在使用 AudioServicesCreateSystemSoundID 播放声音，它工作正常，除非我不确定我是否需要在线程块上运行它，或者它本身在它自己的线程上运行。

我只是担心如果它在主线程上运行它可能会使我的应用程序没有响应。

```
NSURL *tapSound   = [[NSBundle mainBundle] URLForResource: @"mysound"
                                                withExtension: @"aiff"];

    // Store the URL as a CFURLRef instance
    //   soundFileURLRef = (__bridge CFURLRef) tapSound ;

    // Create a system sound object representing the sound file.

     SystemSoundID  soundFileObject;

    AudioServicesCreateSystemSoundID (

                                      (__bridge_retained CFURLRef) tapSound,
                                      &soundFileObject
                                      );
    // AudioServicesPlayAlertSound (soundFileObject);
    AudioServicesPlaySystemSound (soundFileObject); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:38:40.540

声音将异步播放。您不需要**在**自己的线程中运行它。

# javascript - Javascript不能一起添加变量

> ID：14820777
> 
> 赞同：0
> 
> 时间：2013-02-11T21:02:00.313
> 
> 标签：javascript, html

是的，所以我在 3 个下拉框中有值，并且还会有更多（考虑添加大约 20 个下拉框，这些下拉框会添加到项目的最终价格。这是 HTML 的代码。

```
<form id="myform1>
<p>Testing 1</p>
<select id="Test1">
<option value="24">Item one</option>
<option value="29">Item Two<option>
<!--I have the first box going to 20 items-->
</select>

<p>Testing 2</p>
<select id="Test2">
<option value="25">Item one</option>
<option value="100">Item Two<option>
<!--I have the second box going to 10 items-->
</select>

<p>Testing 3</p>
<select id="Test3">
<option value="24">Item one</option>
<option value="100">Item Two<option>
<!--I have the third box going to 10 items-->
</select>

</form>
<button onclick="myFunction()">Update</button>
<p id="demo"></p> 
```

然后我有我的 Javascript

```
function myFunction()
{
var a = document.getElementById("list1");
var A = a.options[a.selectedIndex].value;

var b = document.getElementById("list2");
var B = b.options[a.selectedIndex].value;

var c = document.getElementById("list3");
var C = c.options[a.selectedIndex].value;

var IntA = parseInt(A);
var IntB = parseInt(B);
var IntC = parseInt(C);

var x=IntB + IntA;
var y=x + IntC;
var demoP=document.getElementById("demo")
demoP.innerHTML= y;
} 
```

我的问题是，只有当我完全取出 var c 然后取出 var y 并让它计算到 x 时它才有效。我尝试了很多方法，不知所措。干杯

PS Java 脚本位于底部的脚本标记中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T21:03:23.417

您已经习惯于`a.selectedIndex`获取所有三个元素的选定项目。将其更改为使用`b.selectedIndex`并`c.selectedIndex`在适当的位置。或者你可以直接说`a.value`,`b.value`而`c.value`不是通过`options`集合。

此外，您的 html 中的 id 属性与您在 JS 中使用的属性不匹配。

解决这些问题，它可以工作，你可以在这里看到：http: [//jsfiddle.net/6WWdc/](http://jsfiddle.net/6WWdc/)

PS 养成始终将基数作为第二个参数传递给的习惯是个好主意`parseInt()`，例如`IntA = parseInt(A, 10);`- 否则如果输入字符串有前导`0`或前导`0x`，它可能（取决于浏览器和`"use strict";`指令的存在）被解释为八进制或十六进制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T21:05:02.977

```
function myFunction()
{
    var a = document.getElementById("list1");
    var A = a.options[a.selectedIndex].value;

    var b = document.getElementById("list2");
    var B = b.options[b.selectedIndex].value; //changed to var b

    var c = document.getElementById("list3");
    var C = c.options[c.selectedIndex].value; //changed to var c

    //...
} 
```

# ruby - TestFirst 性能监视器 Ruby

> ID：14820780
> 
> 赞同：2
> 
> 时间：2013-02-11T21:02:15.910
> 
> 标签：ruby

我是一个新手，试图在本教程中解决一些问题：http: [//testfirst.org/live/learn_ruby/performance_monitor](http://testfirst.org/live/learn_ruby/performance_monitor)

我当前的代码通过了 7 个中的 5 个，最后两个失败了。我认为问题在于我真的不明白它的要求：

```
it "returns the average time, not the total time, when running multiple times" do
  run_times = [8,6,5,7]
  fake_time = @eleven_am
  Time.stub(:now) { fake_time }
  average_time = measure(4) do
    fake_time += run_times.pop
  end
  average_time.should == 6.5
end 
```

这是我目前拥有的：

```
def measure(x=0)

  if x>0
    x.times do yield end
  else
    y= Time.now
    yield 
    elapsed_time=Time.now-y
    elapsed_time
  end
end 
```

我不是在寻找复制和粘贴的答案。我想清楚它的要求，以及我如何应对挑战。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T00:09:49.197

The spec is expecting that the performance monitor doesn't return the total of the times, but average. Your current version of the code is returning neither the total, nor the average, but the **count** of the times the `yield` statement was called.

Your current version of the solution is failing with the following error:

```
1) Performance Monitor returns the average time, not the total time, when running multiple times
   Failure/Error: average_time.should == 6.5
     expected: 6.5
          got: 4 (using ==)
   # ./06_performance_monitor/performance_monitor_spec.rb:64 
```

So you are returning the **count** and not the **average** of `[8,6,5,7]`.

If the spec fails with the following error, it is returning the sum `( 26.0 = 8 + 6+ 5 + 7 )`:

```
1) Performance Monitor returns the average time, not the total time, when running multiple times
   Failure/Error: average_time.should == 6.5
     expected: 6.5
          got: 26.0 (using ==)
   # ./06_performance_monitor/performance_monitor_spec.rb:64 
```

Couple of pointers to help you move forward:

1.  Look at your assumption that the count should default to 0 (as defined by `x=0` param being passed to `measure`. If the program calls `measure` without any parameters, wouldn't it make sense to say it has been called once rather than zero times?

2.  Try to understand why your program is returning `4` by walking through the code for `measure` on each value of [8,6,5,7], and by modifying/adding new test cases in `performance_monitor_spec.rb` file. **Hint:** The code isn't doing any performance monitoring in this path ;-)

# jpa - 如何让 DISTINCT 处理 JPA 查询

> ID：14820788
> 
> 赞同：0
> 
> 时间：2013-02-11T21:02:46.140
> 
> 标签：jpa

如何获得一列的 DISTINCT 结果集。在这种情况下`productType`。

我已经为此浪费了几个小时，而且非常疲倦。我不知道为什么这这么难:(

我得到的错误是：

```
exception

javax.servlet.ServletException: javax.el.PropertyNotFoundException: The class 'java.lang.String' does not have the property 'productType'.
root cause

javax.el.PropertyNotFoundException: The class 'java.lang.String' does not have the property 'productType'. 
```

我在 ProductFacade 中的查询

```
public List<Product> getDistinctProduct()
{
    return em.createQuery( "SELECT DISTINCT p.productType FROM Product p" )
            .getResultList();
} 
```

我的产品实体

```
@Entity 
@Table(name = "product")
@XmlRootElement
@NamedQueries({
    @NamedQuery(name = "Product.findAll", query = "SELECT p FROM Product p"),
    @NamedQuery(name = "Product.findByProductId", query = "SELECT p FROM Product p WHERE p.productId = :productId"),
    @NamedQuery(name = "Product.findByName", query = "SELECT p FROM Product p WHERE p.name = :name"),
    @NamedQuery(name = "Product.findByPrice", query = "SELECT p FROM Product p WHERE p.price = :price"),
    @NamedQuery(name = "Product.findByDescription", query = "SELECT p FROM Product p WHERE p.description = :description"),
    @NamedQuery(name = "Product.findByQuantityInStock", query = "SELECT p FROM Product p WHERE p.quantityInStock = :quantityInStock"),
    @NamedQuery(name = "Product.findByImageUrl", query = "SELECT p FROM Product p WHERE p.imageUrl = :imageUrl"),
    @NamedQuery(name = "Product.findByProductType", query = "SELECT p FROM Product p WHERE p.productType = :productType")})
public class Product implements Serializable 
{
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @Column(name = "product_id")
    private Integer productId;
    @Basic(optional = false)
    @NotNull
    @Size(min = 1, max = 45)
    @Column(name = "name")
    private String name;
    @Basic(optional = false)
    @NotNull
    @Column(name = "price")
    private float price;
    @Size(max = 1024)
    @Column(name = "description")
    private String description;
    @Basic(optional = false)
    @NotNull
    @Column(name = "quantity_in_stock")
    private int quantityInStock;
    @Basic(optional = false)
    @NotNull
    @Size(min = 1, max = 256)
    @Column(name = "image_url")
    private String imageUrl;
    @Basic(optional = false)
    @NotNull
    @Size(min = 1, max = 16)
    @Column(name = "product_type")
    private String productType;
    @ManyToMany(mappedBy = "productCollection")
    private Collection<Wishlist> wishlistCollection;
    @OneToMany(cascade = CascadeType.ALL, mappedBy = "product")
    private Collection<OrderProduct> orderProductCollection;
    @OneToMany(cascade = CascadeType.ALL, mappedBy = "product")
    private Collection<Review> reviewCollection;

    public Product() {
    }

    public Product(Integer productId) {
        this.productId = productId;
    }

    public Product(Integer productId, String name, float price, String description, int quantityInStock, String imageUrl, String productType) {
        this.productId = productId;
        this.name = name;
        this.price = price;
        this.description = description;
        this.quantityInStock = quantityInStock;
        this.imageUrl = imageUrl;
        this.productType = productType;
    }

    public Integer getProductId() {
        return productId;
    }

    public void setProductId(Integer productId) {
        this.productId = productId;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public float getPrice() {
        return price;
    }

    public void setPrice(float price) {
        this.price = price;
    }

    public String getDescription() {
        return description;
    }

    public void setDescription(String description) {
        this.description = description;
    }

    public int getQuantityInStock() {
        return quantityInStock;
    }

    public void setQuantityInStock(int quantityInStock) {
        this.quantityInStock = quantityInStock;
    }

    public String getImageUrl() {
        return imageUrl;
    }

    public void setImageUrl(String imageUrl) {
        this.imageUrl = imageUrl;
    }

    public String getProductType() {
        return productType;
    }

    public void setProductType(String productType) {
        this.productType = productType;
    }

    @XmlTransient
    @JsonIgnore
    public Collection<Wishlist> getWishlistCollection() {
        return wishlistCollection;
    }

    public void setWishlistCollection(Collection<Wishlist> wishlistCollection) {
        this.wishlistCollection = wishlistCollection;
    }

    @XmlTransient
    @JsonIgnore
    public Collection<OrderProduct> getOrderProductCollection() {
        return orderProductCollection;
    }

    public void setOrderProductCollection(Collection<OrderProduct> orderProductCollection) {
        this.orderProductCollection = orderProductCollection;
    }

    @XmlTransient
    @JsonIgnore
    public Collection<Review> getReviewCollection() {
        return reviewCollection;
    }

    public void setReviewCollection(Collection<Review> reviewCollection) {
        this.reviewCollection = reviewCollection;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (productId != null ? productId.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof Product)) {
            return false;
        }
        Product other = (Product) object;
        if ((this.productId == null && other.productId != null) || (this.productId != null && !this.productId.equals(other.productId))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "com.onemore.entity.Product[ productId=" + productId + " ]";
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:43:23.453

我是菜鸟。

当我试图在我的 JSP 页面上处理结果时

```
<c:forEach var="productList" items="${productTypeList}">
<option value="${productList.productType}">${productList.productType}</option>
</c:forEach> 
```

当我应该有的时候

```
<c:forEach var="productTypeList" items="${productTypeList}">             
<option value="${productTypeList}">${productTypeList}</option>
</c:forEach> 
```

# entity-framework - 如何在使用 Table-Per-Type 继承的表之间定义 EF 多对多关系？

> ID：14820789
> 
> 赞同：0
> 
> 时间：2013-02-11T21:02:46.343
> 
> 标签：entity-framework

我定义了以下模型：

```
public class Account {
   public int Id {get; set;}
   ... // other account properties

   public ICollection<AccountAddress> Addresses {get; set;}
}

public class Address {
    public int Id {get; set;}
    public string Street1 {get; set;}
    public string Street2 {get; set;}
    ... // other standard address properties
}

public class AccountAddress : Address {
  public int AccountId {get; set;}
  public DateTime? BeginDate {get; set;}
  public string Notes {get; set;}
  ... // other account address specific properties
}

public class Site {
  public int Id {get; set;}
  public Address SiteAddress {get; set;}
} 
```

这个想法是任何**地址**都可以绑定到任何**帐户**以及任何**站点**。但是，只要地址与帐户相关联，就可能需要存储有关该地址的其他信息。

由于 AccountAddress 继承自 Address，我想使用 TPT（按类型表）继承将 Address 属性映射到 Address 表，并将扩展属性映射到扩展地址属性表。

我试过这个：

```
public class AccountConfiguration : EntityTypeConfiguration<Account>
{
    public AccountConfiguration()
    {
        ToTable("Accounts");
        HasKey(a => a.Id);
        HasMany(a => a.Addresses).WithMany().Map(x =>
        {
           x.MapLeftKey("accountId");
           x.MapRightKey("addressId");
           x.ToTable("accountaddresses");
        }
     }
 }

 public class AddressConfiguration : EntityTypeConfiguration<Address>
 {
     public AddressConfiguration()
     {
         ToTable("addresses");
         HasKey(a => a.Id);
         ... // other property mappings
     }
 }

 public class AccountAddressConfiguration : EntityTypeConfiguration<AccountAddress>
 {
     public AccountAddressConfiguration() 
     {
        ToTable("addressextended");
        ... //other property mappings
     }
  } 
```

这里的问题是没有定义任何东西来将 accountId 映射到 addressextended 表中。因此，如果 ID 为 40 的地址与两个不同的帐户相关联，请执行以下查询：

```
var _account = _context.Accounts
   .Include(a => a.Addresses)
   .SingleOrDefault(a => a.Id = 1234); 
```

有时会为错误的帐户提供扩展属性。

我需要做什么才能使它正常工作？

**编辑：** 虽然接受的答案没有具体回答我的问题（即如何定义两个实体之间的多对多关系，其中一个实体是用 TPT 继承映射定义的），但它确实为提出可接受的解决方法提供了一些帮助.

我确实放弃了实体继承，只是将地址添加为我的 AccountAddress 实体的属性。然后我给了 AccountAddress（地址扩展表）它自己的主 ID。我将 accountaddresses 表更改为包含 account id 和 accountaddress id（addressextended 表的新 id）的连接表。

我还必须在 AccountAddress 中添加一个导航属性以获取 Address 和一个映射来配合它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T09:17:42.773

我相信您可以通过更改查看“AccountAddress”和“SiteAddress”表的方式来解决此问题。与其将它们作为地址的子类，不如让它们成为“连接表”。AccountAddress 实体连接地址和帐户，因此从技术上讲，它必须拥有一个帐户和一个地址。您还可以在将地址与帐户关联时指定其他相关信息（例如地址类型、清除日期等）。

据我了解，您要实现的目标是将许多地址链接到许多帐户（或站点），并保留有关每个链接的一些元数据。

```
public class Account {
   public int Id {get; set;}
   ... // other account properties

   public ICollection<AccountAddress> Addresses {get; set;}
}

public class Address {
    public int Id {get; set;}
    public string Street1 {get; set;}
    public string Street2 {get; set;}

    public ICollection<AccountAddresses> Accounts {get; set;} // this denotes your two-way connection with the Account entity
    ... // other standard address properties
}

public class AccountAddress {
  public int AccountId {get; set;}
  public virtual Account {get; set;} // these are your "Account" properties

  public int AddressId {get; set;}
  public virtual Address {get;set;} //these are your "Address" properties

  public DateTime? BeginDate {get; set;}
  public string Notes {get; set;}
  ... // other account address specific properties
} 
```

该模型现在将表示以下关系：

1 个帐户 <-> * 帐户地址 * <-> 1 个地址

这通过 AccountAddress 实体模拟地址和帐户之间的多对多关系。

然后，您应该同时配置 Account 和 Address 实体以展示它们的一对多关系，例如：

```
modelBuilder.Entity<Account>().HasMany(a => a.AccountAddresses)
                              .WithRequired(aa => aa.Account)
                              .HasForeignKey(aa => aa.AccountId);

modelBuilder.Entity<Address>().HasMany(a => a.Accounts)
                              .WithRequired(ac => ac.Address)
                              .HasForeignKey(ac => ac.AddressId); 
```

您可以将查询修改为如下所示：

```
var _account = _context.Accounts
   .Include(a => a.Addresses)
   .Include(a => a.Addresses.Address)
   .SingleOrDefault(a => a.Id = 1234); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T16:56:15.453

Address 是一种更适合作为复杂类型而不是完整实体的类型。主要原因是地址实体永远不会被重复使用：关系可能是 1:n 但实际上它们总是 1:1。这是因为将在运行时定义关系的逻辑不适用于您从中选择正确地址的现有地址列表（因此您可以重复使用地址），但会使用用户的输入，因此您将始终创建一个新的地址实体实例。

从邮政编码表中获取地址时，您根本不需要存储它们，因此如果您要存储地址信息，则不需要将其存储为实体。

与“地址”的 m:n 关系恕我直言，永远不会在实践中使用。因此重构实体以使用 Address 作为实体内部的复杂类型。如果您需要不同的地址类型，请为不同的地址类型定义不同的复杂类型。无论如何，数据模型中的继承是您想要避免的事情，除非您计划在运行时通过多态性重用验证逻辑，否则它实际上并不是那么好：性能会受到影响并且您的模型实际上会更复杂。如果您希望有一个通用接口来处理通用地址信息，请定义 IAddress 并在您的复杂地址类型上实现它。

所以 TL;DR：将地址丢弃为实体类型并将它们定义为复杂类型并摆脱继承，这对您根本没有帮助。

# javascript - 对象函数循环覆盖javascript？

> ID：14820790
> 
> 赞同：3
> 
> 时间：2013-02-11T21:02:49.947
> 
> 标签：javascript, jquery

我对以下代码感到非常困惑：

```
 var x =[ {name : 'name1' , value : 15 },{name :'name2' , value: 60} ];
 var y = [[1,2,3] , [4,5,6]] ; 
     for(var t in y){
         x[t].myFun = function(){console.log(y[t])} ;
      }
 console.log(x[0].myFun()) ; 
```

这段代码不应该返回第一个数组，`y`为什么它返回第二个数组？

这是一个[jsFiddle](http://jsfiddle.net/minagabriel/y6yxZ/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T21:08:26.613

这些`myFun`函数都引用*相同* `t`的(and `y`) 变量。所以在循环之后，`t`is `1`，所以它总是返回第二个值。

您需要使用闭包来“关闭”这些值（此外，您不应将`for..in`其用于数组）：

```
var x = [{name : 'name1' , value : 15 }, {name :'name2' , value: 60}];
var y = [[1,2,3] , [4,5,6]]; 
for(var t = 0, len = y.length; t < len; t++){
    (function(t){
        x[t].myFun = function(){console.log(y[t])};
    })(t);
}

console.log(x[0].myFun()); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-11T21:11:01.737

由于您使用的是 JQuery，因此您有一个简单的方法来迭代数组，而无需担心在创建闭包时专门捕获索引的当前值。它是`$.each`：

```
var x =[ {name : 'name1' , value : 15 },{name :'name2' , value: 60} ];
var y = [[1,2,3] , [4,5,6]] ; 
$.each(y, function(i,v)
{
    x[i].myFun = function(){console.log(y[i])} ;
}); 
```

# xml - 在 AS3 Flash 网站中加载时，图像和缩略图未加载到 AS2 XML 库中？

> ID：14820791
> 
> 赞同：0
> 
> 时间：2013-02-11T21:02:50.643
> 
> 标签：xml, actionscript-3, flash, actionscript, actionscript-2

我有时间继续在我的 Flash 网站上工作。我已经在 Flash 中构建了整个布局。

我的网站是使用时间线控制脚本 (AS3) 构建的。

因为我不知道怎么做一个滚动画廊（我到处看了还是不明白），我开始在 Activeden 上买了一个，这样我不仅可以使用它，而且可以看到它是如何完成的并从中学习它。但是画廊的 .fla 文件在 AS2 中。.swf 是“独立的”，所以 Actionscript 版本不重要吗？

图库是基于 XML 的。

我使用这个 AS3“加载器”将 .swf 加载到我的 flash 站点中。

```
var myLoader:Loader = new Loader();
myLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, showMySWF);
function showMySWF(e:Event):void {
 addChild(myLoader);
 myLoader.x=100;
 myLoader.y=150;
 myLoader.contentLoaderInfo.removeEventListener(Event.COMPLETE, showMySWF);
}
myLoader.load(new URLRequest( "xmlgallery.swf" )); 
```

所有图像和资产都与我的 Flash 站点位于同一文件夹中。

但我看到的只是一个[空荡荡的画廊](http://i665.photobucket.com/albums/vv12/hypeforlife91/Screenshot2013-02-03at60526PM_zps262fe26f.png)

如果我播放 xmlgallery.swf 文件本身，所有图像都在那里，但是当我使用 Loader 将其加载到我的网页中时，所有图像都没有。换句话说，画廊设计本身是完全实用的，但我只是看不到上面的缩略图和图像，除非我测试 xml 画廊自己的独立 swf 文件。当我在加载图库的情况下测试我自己的 Flash 站点时，我看不到任何照片；当我上传到网络服务器时 - 也没有，我尝试了 2 个网络服务器。

最奇怪的是标题和标题/图像描述信息显示，并且该信息位于同一个 XML 文件中。所以我认为闪存在进入这些图像文件夹时存在问题，即使它们都在同一个目录中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:32:44.557

**加载旧 SWF 文件的注意事项**

*   如果外部 SWF 文件是使用旧版本的 ActionScript 发布的，则需要考虑一些重要的限制。与在 AVM2（ActionScript 虚拟机 2）中运行的 ActionScript 3.0 SWF 文件不同，为 ActionScript 1.0 或 2.0 发布的 SWF 文件在 AVM1（ActionScript 虚拟机 1）中运行。

*   将 ActionScript 1.0 或 2.0 SWF 文件加载到 ActionScript 3.0 SWF 文件（与加载 ActionScript 3.0 SWF 文件相比）存在重要差异。Flash Player 提供与以前发布的内容的完全向后兼容性。在以前版本的 Flash Player 中运行的任何内容都在支持 ActionScript 3.0 的 Flash Player 版本中运行。但是，以下限制适用：

*   ActionScript 3.0 代码可以加载用 ActionScript 1.0 或 2.0 编写的 SWF 文件。成功加载 ActionScript 1.0 或 2.0 SWF 文件后，加载的对象（Loader.content 属性）是 AVM1Movie 对象。AVM1Movie 实例与 MovieClip 实例不同。它是一个显示对象，**但与影片剪辑不同的是，它不包含与时间线相关的方法或属性**。父 AVM2 SWF 文件无法访问加载的 AVM1Movie 对象的属性、方法或对象。

*   用 ActionScript 1.0 或 2.0 编写的 SWF 文件无法加载用 ActionScript 3.0 编写的 SWF 文件。这意味着在 Flash 8 或 Flex Builder 1.5 或更早版本中创作的 SWF 文件无法加载 ActionScript 3.0 SWF 文件。

*   此规则的唯一例外是，ActionScript 2.0 SWF 文件可以将其自身替换为 ActionScript 3.0 SWF 文件，只要 ActionScript 2.0 SWF 文件之前没有将任何内容加载到其任何级别。ActionScript 2.0 SWF 文件可以通过调用 loadMovieNum() 来执行此操作，将值 0 传递给 level 参数。

*   通常，如果要与以 ActionScript 3.0 编写的 SWF 文件一起使用，必须迁移以 ActionScript 1.0 或 2.0 编写的 SWF 文件。例如，假设您使用 ActionScript 2.0 创建了一个媒体播放器。媒体播放器加载同样使用 ActionScript 2.0 创建的各种内容。您无法在 ActionScript 3.0 中创建新内容并将其加载到媒体播放器中。您必须将视频播放器迁移到 ActionScript 3.0。

*   但是，如果您在 ActionScript 3.0 中创建媒体播放器，则该媒体播放器可以执行 ActionScript 2.0 内容的简单加载。

[Flash Player 先前版本的限制](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7d9e.html)

# c++ - 读取包含由空格分隔的随机大小整数的文本文件

> ID：14820792
> 
> 赞同：-2
> 
> 时间：2013-02-11T21:02:54.393
> 
> 标签：c++, arrays, file-io, io

我的文本文件包含整数，如：`123 879709789 43536 8768768`

我想在一个数组索引中读取整数，例如数组 [1]=123 数组 [2]=879709789。

这是我尝试过的：

```
ifstream myfile("numbers.txt");

if (myfile.is_open())
{
    while ( myfile.good() && !myfile.eof() )
    {
        for(i=1; i<myfile.eof(); i++)
        {
            myfile >> ar[i];
            if(ar[i]=="")
            {
                i++;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T21:05:03.493

像这样：

```
#include <vector>
#include <fstream>
#include <iterator>

std::ifstream infile("myfile.txt");   // or just use `std::cin`

std::vector<int> v(std::istream_iterator<int> { infile },
                   std::istream_iterator<int> { } ); 
```

现在`v`包含您的所有号码。如果一路上任何地方出现输入错误，您将看不到它并且输入将停止。如果这是一个问题，请使用`getline`/`istringstream`方法，正如本网站上数百个类似问题所记录的那样。

# android - 适用于三星 Galaxy Tab 2 10.1（Chrome 浏览器）的 CSS 媒体查询

> ID：14820793
> 
> 赞同：0
> 
> 时间：2013-02-11T21:02:58.657
> 
> 标签：android, css, google-chrome, responsive-design, media-queries

有一个相关的问题： [iPad 的媒体查询（横向）也适用于三星 Galaxy Tab 2（横向）](https://stackoverflow.com/questions/14209921/media-query-for-ipad-landscape-applied-to-samsung-galaxy-tab-2-landscape-as)

我的问题是什么媒体查询可以让 Android Samsung Galaxy Tab 2 10.1（Chrome 浏览器 18）上的 Chrome 浏览器被检测为纵向模式。

我目前正在使用：

```
@media all and (min-width: 479) and (max-width: 1199) and (max-device-width:1199px and (orientation: portrait) 
```

但它不起作用。它将在 Android 网络浏览器上运行，但一旦您将其翻转为横向模式然后再返回纵向模式，它将无法运行。它仅在您以纵向模式加载页面时才有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-14T23:34:46.130

我遇到了同样的问题，我发现 Galaxy Tab 2 10.1 的实际分辨率为 2560px x 1600px，通过使用这些 px 值我能够提取正确的样式表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-21T05:10:40.250

这适用于三星 Galaxy Tab 10.1

```
@media only screen and (min-width: 800px) and (max-height: 1280px) and 
(orientation : portrait){
    /* Your code here */
}

@media only screen and (min-width: 1280px) and (max-height: 800px) and 
(orientation : landscape){
    /* Your code here */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-20T06:30:59.577

```
/* For Media Query for Tablets Ipads Portrait Mode */
@media (min-width:768px) and (max-width:1024px){
/*CSS HERE*/
} 
```

# php - PHP setTimezone 似乎只适用于 NULL 值

> ID：14820801
> 
> 赞同：1
> 
> 时间：2013-02-11T21:03:22.080
> 
> 标签：php, mysql

如果实际时间值存储在数据库中，我真的无法弄清楚为什么时区转换似乎不起作用。如果值为 NULL，则此代码似乎可以正确转换时间。

```
$tz = "America/Chicago";        
date_default_timezone_set('UTC');
$timezone = new DateTimeZone($tz);

$tmp_dt = new DateTime($row_ShowsRS['actual_datetime']);
$tmp_dt->setTimezone($timezone);
$actual_datetime = $tmp_dt->format('Y-m-d H:i:s'); 
```

日期时间都以 UTC 格式存储在数据库中。我只是想把这些时间从数据库中拉出来，并在用户的本地时区显示它们。

# python - 将 scapy 导入 OSX 上的 Python 解释器时出错 [MacPorts 安装]

> ID：14820811
> 
> 赞同：0
> 
> 时间：2013-02-11T21:03:50.917
> 
> 标签：python, macos, macports, scapy

我按照官方 scapy 文档中的建议通过 MacPorts 安装了 scapy：[http ://www.secdev.org/projects/scapy/doc/installation.html#mac-os-x](http://www.secdev.org/projects/scapy/doc/installation.html#mac-os-x)

当我从命令行运行 scapy 时，它工作得很好。

但是现在我似乎无法将 scapy 导入 Python 解释器或 python 脚本中，这是错误。

```
Python 2.7.3 (default, Jan 31 2013, 22:54:33) 
[GCC 4.2.1 Compatible Apple Clang 4.1 ((tags/Apple/clang-421.11.66))] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import scapy
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named scapy 
```

我也尝试过使用 Python2.5，也不起作用。

```
Python 2.5.6 (r256:88840, Aug  5 2011, 03:29:42) 
[GCC 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2335.15.00)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import scapy
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named scapy 
```

我认为它与路径有关，但我不知道在 Mac 上的哪里编辑这些，尤其是我从 MacPorts 安装了 scapy。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T21:14:44.790

Macports 将所有内容安装到`/opt/local`. 所以我敢打赌，如果你运行`/opt/local/bin/python`，你将能够导入`scapy`。

如果您需要`scapy`从默认 Python 安装中导入，则需要将其安装到该 Python 安装中（而不是其他，Macports，Python 安装）。

其他答案的相关信息：

*   [运行 Macports Python #1。](https://stackoverflow.com/a/4623591/99377)
*   [运行 MacPorts Python #2。](https://stackoverflow.com/a/118820/99377)

# ruby-on-rails - 找不到表“projects_users”

> ID：14820814
> 
> 赞同：0
> 
> 时间：2013-02-11T21:04:15.453
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3

我不小心用复数命名了其中一个模型，所以我手动更改了名称：

```
projects_users.rb -> projects_user.rb 
```

...和...

```
class ProjectsUsers < ActiveRecord::Base   ->    class ProjectsUser < ActiveRecord::Base 
```

...以及迁移的表名。

.

现在我收到一个错误告诉我：

```
Could not find table 'projects_users' 
```

这很奇怪，因为这是数据库的旧名称，而我在代码中找不到引用此名称的任何地方。

使用表 projects_user 的控制器是项目控制器，错误指的是以下内容（第 3 行）：

```
1\.   def edit
2\.     @project = Project.find(params[:id])
3\.     @members = ProjectsUser.where(:project_id => params[:id])
4\.   end 
```

有什么问题？我应该去哪里看？

从我对这张表的了解来看，Schema.rb 是正确的：

```
create_table "projects_user", :force => true do |t|
  t.integer "project_id"
  t.integer "user_id"
end

add_index "projects_user", ["project_id", "user_id"], :name => "index_projects_users_on_project_id_and_user_id" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T21:08:02.543

您的模型应该是单数形式，但您的数据库表仍然应该是复数形式。您的架构表明数据库表将是单数 ( `projects_user`)。

所以一个`ProjectsUser`模型应该`projects_users`在你的数据库中有一个对应的表。

# c# - 从数据库中提取长列表

> ID：14820818
> 
> 赞同：1
> 
> 时间：2013-02-11T21:04:33.983
> 
> 标签：c#, linq-to-sql

我有一个包含 long 列表的对象。在数据库中，我将其存储为用逗号分隔的字符串。每当我进行读/写操作时，我总是会爆炸或加入这个字符串，我希望将这一步从业务逻辑移到查询中。所以这就是我对查询的尝试：

```
var TheData = (from l in MyDC.Table
               ....
               select new MyModel()
               {
                   TheListOfLongs = (from x in l.StringOfLongs.Split(',')
                                     select Convert.ToInt64(x)).ToList<long>(),

                    SomeObjectProp = ...

               }).ToList(); 
```

我得到的错误是：

> 方法 'System.String[] Split(Char[])' 不支持对 SQL 的转换。

如何修复我的查询以使其正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T21:10:37.017

您正在尝试在数据库上执行拆分操作，该操作会回复说“我不知道如何做您刚刚要求我做的事情！”。

`.ToList()`解决方案是在您编辑之前致电`select new Model()` ：延期的返工和修改 - 不小心将拆分移动到错误的位置 - 应该现在

```
var TheData = (from l in MyDC.Table select new { 
    stringLong = l.StringOfLongs,
    OtherProps = //...
})
  .AsEnumerable()
  .Select(x => new Model 
                   { 
                       TheListOfLongs = x.stringLong 
                              .Split(',')   
                              .Select(y => Convert.ToInt64(y)
                              .Cast<long>(),
                       OtherProps = // ...
                   }); 
```

如果你希望这一切都在查询语法中，它看起来像这样：

```
var TheData = (from l in MyDC.Table select new { 
    stringLong = l.StringOfLongs,
    OtherProps = //...
}).AsEnumerable();

var RealTheData = (from l in TheData select new Model 
    {
        TheListOfLongs = (from s in l.stringLong 
                              .Split(',') select Convert.ToInt64(s).Cast<long>(),
                       OtherProps = // ...
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T21:14:23.297

```
var TheData = MyDC.Table
                  .Where(...)
// optionally     .Select(l => new { l.StringOfLongs, l.SomeObjectProp })
                  .AsEnumerable() // move execution to memory
                  .Select(l => new Model() {
                      TheListOfLongs = l.StringOfLongs.Split(',')
                                        .Select(x => Int64.Parse(x))
                                        .ToList(),
                      SomeObjectProp = l.SomeObjectProp
                  }).ToList(); 
```

# sql - SQL 触发 WHEN 子句编译错误

> ID：14820820
> 
> 赞同：0
> 
> 时间：2013-02-11T21:04:36.250
> 
> 标签：sql, oracle, plsql, triggers

我正在尝试创建一个触发器，如果`Prog_Type`​​输入的日期是 ，它将检查输入的日期是否在范围内`'FILM'`，但是每次运行语句时我都会收到编译错误。

> 错误代码是 00103，“遇到一个 ; 当预期......”

然后是许多标点符号的列表。通过研究问题，我看到了对`DECLARE`语句的引用，但是我不确定是否需要声明是否在`Prog_Type`中创建`Program_Table`，并且我在触发器中引用了该表。

```
CREATE OR REPLACE TRIGGER Prog_Made_Limits
BEFORE INSERT OR UPDATE OF Prog_Made ON Program_Table
 FOR EACH ROW
  WHEN (NEW.Prog_Type <> 'FILM')
BEGIN
  IF (:new.Prog_Made < date '1864-12-31' or 
      :new.Prog_Made > sysdate );
  THEN
    RAISE_APPLICATION_ERROR( -20001, 'Program Made date must be later than Dec 31st 1864, and earlier than today, if FILM is inserted');
  END IF;
END Prog_Made_Limits;
/ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T21:30:11.813

你的语法几乎没问题，但是你有一个导致错误的条件`;`。用于分隔语句和您的 If 的结果是与条件相同的语句的一部分。`IF``;`

这应该有效：

```
CREATE OR REPLACE TRIGGER Prog_Made_Limits
BEFORE INSERT OR UPDATE OF Prog_Made ON Program_Table
 FOR EACH ROW
  WHEN (NEW.Prog_Type <> 'FILM')
BEGIN
  IF (:new.Prog_Made < date '1864-12-31' or 
      :new.Prog_Made > sysdate )
  THEN
    RAISE_APPLICATION_ERROR( -20001, 'Program Made date must be later than Dec 31st 1864, and earlier than today, if FILM is inserted');
  END IF;
END Prog_Made_Limits; 
```

我说*应该*，因为我的笔记本电脑上没有 Oracle，所以只能在 SQL Fiddle 上测试，但是通过删除所有分号我能够编译它，但是我认为 SQL-Fiddle 将分号视为批处理中断而不是语句中断，所以我不确定是否有必要将它们全部删除。

**[SQL Fiddle 示例](http://www.sqlfiddle.com/#!4/29aad/5)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T03:52:58.857

嘿，您在 IF 子句后使用了分号。这将结束声明。因此，请从该位置删除该列并使用以下代码一次：

```
CREATE OR REPLACE TRIGGER Prog_Made_Limits
BEFORE INSERT OR UPDATE OF Prog_Made ON Program_Table
 FOR EACH ROW
  WHEN (NEW.Prog_Type <> 'FILM')
BEGIN
  IF (:new.Prog_Made < date '1864-12-31' or 
      :new.Prog_Made > sysdate )
  THEN
    RAISE_APPLICATION_ERROR( -20001, 'Program Made date must be later than Dec 31st 1864, and earlier than today, if FILM is inserted');
  END IF;
END Prog_Made_Limits;
/ 
```

# jquery - jQuery UI 的 Draggable 和页面滚动

> ID：14820826
> 
> 赞同：5
> 
> 时间：2013-02-11T21:04:56.473
> 
> 标签：jquery, jquery-ui, draggable

我注意到，当我使用 jQuery UI 的可拖动功能时，我必须将元素向上/向下拖动到页面上，以使其强制滚动。被拖动的元素似乎跳跃（大约）两倍于我的鼠标光标。这会导致非常不稳定的行为，使其几乎无法使用。

我的意思的一个例子可以在这里找到。

[http://tinyurl.com/ae6g5qe](http://tinyurl.com/ae6g5qe)

我什至在 jQuery UI 网站上的示例代码中得到了这种行为。

[http://jqueryui.com/draggable/#scroll](http://jqueryui.com/draggable/#scroll)

我猜测它同时使用鼠标移动和窗口滚动来增加元素的移动（所以两倍）。我即将深入研究 jQuery UI 的代码，看看是否能找到任何东西，但我很好奇是否有其他人经历过这种情况，或者只有我自己？另外，如果有人有 - 你有没有以某种方式解决它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T06:52:00.263

这似乎是 jQuery UI 1.8+ 中的一个[开放错误](http://bugs.jqueryui.com/ticket/5718)。您可以看到，如果您使用 jQuery UI 1.7 版，则行为明显更好。

基于 jQuery UI 的可拖动演示的示例：

**HTML**

```
<div id="draggable" class="ui-widget-content">
    <p>Scroll set to true, default settings</p>
</div>
<div style="height: 5000px; width: 1px;"></div> 
```

**JS**

```
$(function () {
    $("#draggable").draggable({
        scroll: true
    });
}); 
```

[jsfiddle](http://jsfiddle.net/Eybxe/2/)（使用 jQuery 1.7.2 和 jQuery UI 1.7.3）

# c++ - 如果向量有足够的空间（通过保留创建），std::vector::insert() 是否会使迭代器无效？

> ID：14820835
> 
> 赞同：1
> 
> 时间：2013-02-11T21:05:23.973
> 
> 标签：c++, vector, stl, iterator, c++-standard-library

回答[如何自我复制向量？](https://stackoverflow.com/questions/14781264/how-to-self-copy-a-vector/)让我对迭代器失效感到有些困惑。一些文献说“如果您使用 insert、push_back 等，请考虑所有迭代器无效”。很明显，它可能会导致向量增长，从而使迭代器无效。我知道会有足够空间的特殊情况呢？

第一次尝试：

```
myvec.reserve(myvec.size()*3);  //does this protect me from iterator invalidation?
vector<string>::iterator it = myvec.end();    
myvec.insert(myvec.end(), myvec.begin(), it);
myvec.insert(myvec.end(), myvec.begin(), it); 
```

经过一些出色的答案后，第二次尝试：

```
auto size = myvec.size();
myvec.reserve(size*3);  //does this protect me from iterator invalidation?  
myvec.insert(myvec.end(), myvec.begin(), myvec.begin()+size);
myvec.insert(myvec.end(), myvec.begin(), myvec.begin()+size); 
```

经过更优秀的答案第三次尝试：

```
auto size = myvec.size();
myvec.reserve(size*3);  //does this protect me from iterator invalidation?  
back_insert_iterator< vector<string> > back_it (myvec);
copy (myvec.begin(),myvec.begin()+size,back_it);
copy (myvec.begin(),myvec.begin()+size,back_it); 
```

这句话来自 Josuttis 的“C++ 标准库参考”：

> 插入或删除元素会使引用以下元素的引用、指针和迭代器无效。如果插入导致重新分配，它会使所有引用、迭代器和指针无效。

表明我的代码是安全且已定义的行为。标准中是否有段落可以保证这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T21:11:50.310

过去的迭代器总是有点特别。我会小心的。标准是这样说的（23.3.6.5）：

> 如果没有发生重新分配，则插入点之前的所有迭代器和引用仍然有效。

这里的关键是“在插入点之前”。由于您的原件`it`不在插入点之前（因为它*是*插入点），所以我不会相信它仍然有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T21:14:34.093

尽管只要不超过容量，插入向量确实不会导致重新分配，并且不会使插入点*之前*`end()`的元素的迭代器无效（这可以说是 的情况，正如@KerrekSB 指出的那样）， C++11 标准的表 100（第 23.2.3 段）为序列容器的函数指定了以下**先决条件：**`a.insert(p,i,j)`

> [...] pre：i 和 j 不是 a 的迭代器。[...]

在您的情况下，它们显然是，这让我认为该程序具有未定义的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-04T04:55:35.207

迭代器不应在中间函数中失效。*内存可能被重新定位*的想法并不成立，因为您不能`realloc`在具有非平凡构造函数的对象上使用。即使构造不是问题，在最坏的情况下它仍然必须复制初始序列两次，从而抵消了平均情况下的任何好处。

重点是，以这种方式实现它是没有意义的；an `alloc`, `copy`,`free`几乎可以肯定地完成了，不管标准怎么说。

这是安全的，因为`v.begin()`并且`v.end()`始终是最新的。

```
v.insert(v.end(), v.begin(), v.end());
v.insert(v.end(), v.begin(), v.end()); 
```

这不是。

```
vector<foo>::iterator i = v.begin();
vector<foo>::iterator j = v.end();
v.insert(v.end(), i, j);
v.insert(v.end(), i, j); 
```

但是，自插入可能会很不稳定。在 GCC 下尝试以下操作。*只有*当有足够的内存可用时，自我插入才会给出不正确的结果（不确定这是否是一个错误）。

```
int main()
{
    int position = 1, first = 2, last = 3;
    // enforce error condition.
    assert(position < first);
    int size = 8;
    // sanity check.
    assert(first < last && last <= size);

    std::vector<int> right, wrong;
    // force resize during insertion.
    right.reserve(size);
    // avoid resize during insertion.
    wrong.reserve(size + (last - first));

    for ( int i = 0; i < size; i++ )
     {
       right.push_back(i);
       wrong.push_back(i);
     }

    std::vector<int>::iterator i;
    i = right.begin();
    right.insert(i + position, i + first, i + last);
    i = wrong.begin();
    wrong.insert(i + position, i + first, i + last);

    assert(right == wrong);
    return 0;
} 
```

**注意：**上述意见适用于`vector`特定的容器，而不是一般的容器。此外，上述行为可能是错误的建议与标准无关，而是为`vector`.

# wpf - WPF IPAddress 依赖属性

> ID：14820837
> 
> 赞同：0
> 
> 时间：2013-02-11T21:05:31.760
> 
> 标签：wpf, user-controls, dependency-properties

我创建了一个名为 LocalIPProperty 的依赖属性作为字符串依赖属性。一切都很好，但是当我之后在应用程序中使用 UserControl 并将 LocalIPProperty 更改为 VS 属性窗口中的非 IP 文本时，VS 属性窗口显示默认 IP 字符串（127.0.0.1）并在 XAML 中添加：LocalIP= “sdashashfah”，然后当我尝试运行应用程序时，我得到 XalmParserException。

我还尝试将 LocalIPProperty 简单地创建为 IPAddress 依赖属性，但在使用 UserControl 的应用程序中，我无法更改 IPAddress。

我想要的是，当我在 VS 属性窗口中将 LocalIP 设置为非 IP 字符串时，该值保持不变。

我现在拥有的是：

```
public static DependencyProperty LocalIPProperty = DependencyProperty.
            Register("LocalIP", typeof(string), typeof(UserControl1),
            new FrameworkPropertyMetadata("127.0.0.1"), IPPropertyValidate);

        private static bool IPPropertyValidate(object value)
        {
            try
            {
                IPAddress.Parse((string)value);
            }
            catch { return false; }
            return true;
        }

        [Description("IP for listening."), Category("Address")]
        public string LocalIP
        {
            get { return (string)GetValue(LocalIPProperty); }
            set { SetValue(LocalIPProperty, value); }
        } 
```

感谢您的任何努力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:05:15.460

听起来像是 VS 编辑器中的错误。看起来它正在尝试设置您输入的无效属性值，但当它从验证中返回错误值时不知道该怎么做。它可能会尝试将其设置为设计时值，以便在运行时忽略但不输出正确的语法。

# html - DNS 预取 Google webfonts - 哪个域？

> ID：14820840
> 
> 赞同：9
> 
> 时间：2013-02-11T21:05:40.813
> 
> 标签：html, css, dns, webfonts, google-webfonts

我在我的页面上使用了一些 Google 网络字体。使用谷歌提供的代码，我把

`<link href='http://fonts.googleapis.com/css?family=Pirata+One' rel='stylesheet' type='text/css'>`

在`<head>`.
看一下这个 CSS 会发现实际的字体托管在`http://themes.googleusercontent.com`.

现在我想使用 DNS 预取，但我应该使用什么域？`http://fonts.googleapis.com`，`http://themes.googleusercontent.com`或两者兼而有之？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-12T05:10:50.970

两个都：

> 显式预取
> 
> 通常，浏览器只扫描 HTML 中的外部域。如果您有 HTML 之外的资源（例如，对远程服务器的 javascript 请求或托管可能不在您网站的每个页面上的内容的 CDN），那么您可以排队要预取的域名.
> 
> ```
> <link rel="dns-prefetch" href="//example.com">
> <link rel="dns-prefetch" href="//ajax.googleapis.com"> 
> ```
> 
> 您可以根据需要使用尽可能多的这些，但最好将它们都紧跟在 Meta Charset 元素之后（应该在头顶），这样浏览器就可以尽快对它们进行操作。

来源：[https ://github.com/h5bp/html5-boilerplate/blob/master/doc/extend.md#explicit-prefetches](https://github.com/h5bp/html5-boilerplate/blob/master/doc/extend.md#explicit-prefetches)

# python - 按规范重新排序向量列表

> ID：14820843
> 
> 赞同：0
> 
> 时间：2013-02-11T21:06:00.270
> 
> 标签：python, numpy

我有`A`一个包含`nvec`3D 向量列表的数组，`A.shape==(nvec,3)`. 我想`A`根据向量的规范重新排序行：

```
norm=numpy.square(A).sum(axis=1)
rank=numpy.argsort(norm) 
```

我试过`A[rank,:]`了，但它给了我一个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:20:05.947

只需删除第二个下标：

```
A[rank] 
```

# php - 使用 uasort 函数按日期对多个数组进行排序

> ID：14820844
> 
> 赞同：0
> 
> 时间：2013-02-11T21:06:08.070
> 
> 标签：php, arrays, sorting

所以我有以下格式的多个数组：

```
Array ( 
[1283990400] => info

[1285804800] => info

[1286409600] => info
) 
```

你可以在这里看到输出：http: [//beta.revival.tv/test/](http://beta.revival.tv/test/)

我正在尝试按日期对所有数组进行排序。我已经将时间戳存储在数组的键中，但我不确定如何使用 uasort 函数来完成我想要的。

根据我的阅读，这是我应该使用的功能。我已经阅读了无数文章来解释非常简单的数组，但我不明白如何在这里应用它。

我已经尝试过 ksort 没有运气，因为我试图将所有数组作为一个整体进行排序，而不是单独排序。

我也已经在这里阅读了以下帖子，让我有了使用 uasort 的想法：[可能对复杂的 PHP for 循环进行排序](https://stackoverflow.com/questions/14697649/possible-to-sort-complex-php-for-loop/14786062#comment20738112_14786062)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:10:51.193

你正在寻找`ksort`.

> 按键对数组进行排序，维护数据相关性的关键。这主要用于关联数组。

[文档](http://php.net/manual/en/function.ksort.php)。

# jquery - 在jquery提交期间添加url参数

> ID：14820848
> 
> 赞同：1
> 
> 时间：2013-02-11T21:06:18.257
> 
> 标签：jquery, forms, submit, url-parameters

据我了解，一旦提交表单，您就不能通过添加额外的输入来添加参数（至少这个[[link]](https://stackoverflow.com/questions/7376205/url-parameters-not-getting-passed-during-javascript-submit)是给我这个假设的原因）

例如：

```
var form = $('form');
form.submit(function(e) { 
 searchForm.append(
   '<input name="a" type="hidden" value="' + a + '">' +
   '<input name="b" type="hidden" value="' + b + '">' );
} 
```

所以我的下一个猜测是通过位置动态添加参数。我遵循[了这段](https://stackoverflow.com/a/487049/525576)代码，但它刷新了页面，并且仅适用于添加一个参数，并且可以使用我在表单上的原始输入。这行不通。

也许我想要做的事情不可能通过获取而只能通过帖子来实现。我不想使用帖子。但是为了澄清事情，作为用户我搜索一个位置，当这个人提交搜索时，jquery 会干扰`submit()`并查看地址以查找 lat/lng。如果存在 lat 和 lng，我想通过 get 将 lat 和 lng 与搜索到的地址一起传递到下一页。

例子：

```
website.com/path?search=NC&a=35.38905&b=-78.486328 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T21:58:34.627

试试这个（适用于 GET，未尝试过 POST）

```
<script type="text/javascript">
$(document).ready(function(){
  $("#fx").submit(function(event){
  //  event.preventDefault();
    var newitem = document.createElement("input"); 
        newitem.name = "addedItem";
        newitem.type = "text";
        newitem.value = "As if by magic";
        $("#fx").append(newitem);

  });
});
</script>

<form id="fx" name="fx">
    <input type="text" name="bob">
    <input type="submit">
</form> 
```

# javascript - 对齐 div 的 CSS 树

> ID：14820850
> 
> 赞同：2
> 
> 时间：2013-02-11T21:06:25.183
> 
> 标签：javascript, jquery, html, css

我在嵌套的 div 中有一个树结构。每个嵌套的 div 应该具有相同的宽度。演示该问题的示例：

```
<!DOCTYPE html>
<html>

    <head>
        <style>
            .CssWrapper {
                width: 800px;
                overflow: scroll;
                border: 1px solid #999;
            }
            .CssTreeContainer {
                width: auto;
                display: inline;
                float: left;
                padding-left:20px;
            }
            .CssTreeValue {
                width: auto;
                float: left;
                text-align: left;
                clear: both;
            }
            .ParentLabel {
                width: auto;
                float: left;
                text-align: left;
            }
        </style>
        <script src="http://code.jquery.com/jquery-latest.js"></script>
    </head>

    <body>
        <div class="CssWrapper">
            <div class="CssTreeValue">
                <div class="ParentLabel">Main Node A</div>
                <div class="CssTreeContainer">
                    <div class="CssTreeValue">
                        <div class="ParentLabel">Node AA</div>
                        <div class="CssTreeContainer">
                            <div class="CssTreeValue">
                                <div class="ParentLabel">Node AAA</div>
                                <div class="CssTreeContainer">
                                    <div class="CssTreeValue">Node AAAA</div>
                                    <div class="CssTreeValue">Node AAAB</div>
                                </div>
                            </div>
                            <div class="CssTreeValue">
                                <div class="ParentLabel">Node AAB (some extra long text)</div>
                                <div class="CssTreeContainer">
                                    <div class="CssTreeValue">Node AABA</div>
                                </div>
                            </div>
                            <div class="CssTreeValue">Node AB</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="CssTreeValue">
                <div class="ParentLabel">Main Node B</div>
                <div class="CssTreeContainer">
                    <div class="CssTreeValue">
                        <div class="ParentLabel">Node BA</div>
                        <div class="CssTreeContainer">
                            <div class="CssTreeValue">
                                <div class="ParentLabel">Node BAA</div>
                                <div class="CssTreeContainer">
                                    <div class="CssTreeValue">Node BAAA</div>
                                    <div class="CssTreeValue">Node BAAB</div>
                                </div>
                            </div>
                            <div class="CssTreeValue">
                                <div class="ParentLabel">Node BAB</div>
                                <div class="CssTreeContainer">
                                    <div class="CssTreeValue">Node BABA</div>
                                </div>
                            </div>
                            <div class="CssTreeValue">Node BB</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div style="clear:both;" />
        <div id="result" />
    </body>
</html> 
```

[http://jsfiddle.net/UptXg/](http://jsfiddle.net/UptXg/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:14:17.333

您将需要为所有嵌套 div 指定宽度，如下所示：

```
.CssWrapper div {
    width: 800px;
} 
```

此外，删除 display:inline 和 overflow;scroll，除非你想要滚动条到处都是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T21:16:06.107

根据你给我的信息...

```
$('.CssWrapper').find('div').css({width: 800px}); 
```

这将找到具有类的元素`CssWrapper`并搜索所有后代以找到`div`'s。然后它将所有宽度设置为 800px

MoonKat1216 的回答也有效。他正在使用 Css 选择器来获取`.CssWrapper`类的 div 后代；这是更好的做法，因为它包含在您的 css 样式表中，并且比像我在这里那样在 javascript 中执行它更有条理，因为您可以更轻松地编辑您的 css 样式，而不是通过 javascript 代码搜索。但是，如果您是即时执行此操作，并更改值或类等。这将是要走的路。这真的取决于你的情况。

# ios - ical创建事件ios

> ID：14820853
> 
> 赞同：0
> 
> 时间：2013-02-11T21:06:40.413
> 
> 标签：ios, calendar, icalendar, reminders

我已成功订阅我的 iCal 日历，我可以查看事件并且它已更新。但是，如果我查看单个事件，我将无法创建警报或提醒。通常，从我正在交换的普通日历中加载的任何日历事件都有一个编辑按钮。

我想我在某处听说您可能必须使用网络 dav 服务器来为某个特定事件进行提醒或警报。这是真的吗，或者有没有人有任何运气来提醒工作。

下面是 php 生成的 ics 文件。

```
开始：VCALENDAR
产品：-//我的/日历//NONSGML v1.0//EN
版本：2.0
CALSCALE:公历
方法：发布
X-WR-CALNAME：我的日历
X-WR-TIMEZONE:美国/芝加哥
X-WR-CALDESC:日历事件
X-PUBLISHED-TTL:PT1M
开始：VTIMEZONE
TZID:美国/芝加哥
X-LIC-位置：美国/芝加哥
开始：日光
TZOFFSETFROM:-0600
TZOFFSETTO:-0500
TZNAME:CDT
DTSTART:19700308T020000
RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
结束：日光
开始：标准
TZOFFSETFROM:-0500
TZOFFSETTO:-0600
DTSTART:19701025T020000
RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
结束：标准
结束：VTIMEZONE
开始：事件
创建：20110119T123850
DTSTAMP:20130211T031208Z
DTSTART；值=日期：20120209
DTEND；值=日期：20120209
序列：0
描述；编码=引用 - 可打印：
 要编辑此事件，请访问：https://mywebsite.com/events/edit/15
摘要：我的生日
UID：4efbf8ee376152344030ede518327cbaf4c41b5f
状态：已确认
结束：事件

```

谢谢，巴特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T08:43:31.703

如果您想编辑您的活动，您需要有一个 CalDAV 服务器来为您的 iCalendar 文件提供服务。现在您只是提供一个只读的 iCalendar 文件，因此您的日历应用程序无法编辑它。

# c++ - 共享库名称冲突

> ID：14820855
> 
> 赞同：9
> 
> 时间：2013-02-11T21:06:46.307
> 
> 标签：c++, shared-libraries, visibility, name-clash

我正在分发一个共享库 (C++) 和一个使用该库的 python 模块。我构建了子弹物理库的修改版本（作为 CMake 子项目）。我只在一个文件中使用 Bullet 类和函数，`bullet_interface.cpp`所有 Bullet 的东西都隐藏在`namespace { ... }`.

问题是其他一些库需要 Bullet 作为系统依赖项并链接到 Bullet 的系统版本。事实上，我的库 ( `libopenrave`) 的依赖项之一是导出 Bullet 符号。（更具体地说，它有时会动态加载导出子弹符号的插件）。

我想知道是否有办法构建我的库以便`bullet_interface.cpp`使用正确的 Bullet 函数，但是我的库不会使任何 Bullet 符号可见。我不能使用系统项目符号，因为我必须对源代码进行更改。一个 hacky 解决方案是使用搜索和替换重命名所有 Bullet 函数和类（几乎都包含字符串“bt”）。有没有更好的办法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T20:12:50.370

这是完成您想要的事情的一种迂回方式，但它优于项目符号代码中的搜索和替换。

`objcopy`您可以使用以下实用程序尝试在项目符号库中添加“前缀”符号：

```
objcopy --prefix-symbols=old_ bullet.a 
```

这*也应该*适用于动态库，但您必须尝试一下。有关详细信息，请参阅[此答案](https://stackoverflow.com/a/6940389/1257977)。

# c# - 将资源文件写入 USB

> ID：14820856
> 
> 赞同：0
> 
> 时间：2013-02-11T21:06:47.540
> 
> 标签：c#, resources, copy, usb

我想在插入 USB 驱动器时将文件从我的 C# 资源写入到 USB 驱动器中。我已经得到了检测是否插入 USB 驱动器的代码。我遇到的问题是编写资源文件，这是我尝试过的：

```
if (File.Exists(e.Drive + "\autorun.inf") == false ) {
    File.Copy(@"Resources\update.ico", e.Drive);
    File.Copy(@"Resources\autorun.inf", e.Drive);
} 
```

`e.Drive`包含插入的 U 盘的路径（例如 F:\）。我收到一条错误消息：

> 找不到路径“F:\”的一部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T21:11:03.187

[File.Copy](http://msdn.microsoft.com/en-us/library/c6cfw35a.aspx)的第二个参数不能只是一个文件夹，您必须提供完整的路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T21:10:38.363

您需要`\`在前面转义`\autorun.inf`或使用 @ 字符串

```
if (File.Exists(e.Drive + "\\autorun.inf") == false ) {
    File.Copy(@"Resources\update.ico", e.Drive);
    File.Copy(@"Resources\autorun.inf", e.Drive);
} 
```

或者

```
if (File.Exists(e.Drive + @"\autorun.inf") == false ) {
    File.Copy(@"Resources\update.ico", e.Drive);
    File.Copy(@"Resources\autorun.inf", e.Drive);
} 
```

# eclipse - 将 Maven 项目导入 Eclipse 时遇到问题

> ID：14820862
> 
> 赞同：1
> 
> 时间：2013-02-11T21:07:04.427
> 
> 标签：eclipse, maven, hadoop

因此，我使用 git 检查了 hadoop，所有文件都没有问题。然后我发出了 mvn install -DskipTests。它说建立成功。然后我去eclipse并尝试通过maven现有项目导入。它带来了所有文件，然后我点击下一步移动到 Setup Mavin 插件连接器。一切都是绿色的，除了一个红色错误，“hadoop-maven-plugins:3.0.0-SNAPSHOT:version-info”它说它在 hadoop-common/pom.xml 和 hadoop-yard-commmon/pom.xml 中。你知道这是什么或如何解决它吗？另外，我已经尝试过 mvn eclipse:eclipse，这就是我现在尝试导入 maven 的原因。希望如果我解决了这个问题，我最终可以干净地构建 hadoop。这是我常用的 pom：Yarn 的 pom 也很长。可能超过了发帖限制。

所以现在我只发布Common。

```
 <?xml version="1.0" encoding="UTF-8"?>
<!--
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License. See accompanying LICENSE file.
-->
<project xmlns="http://maven.apache.org/POM/4.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
                      http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <parent>
    <groupId>org.apache.hadoop</groupId>
    <artifactId>hadoop-project-dist</artifactId>
    <version>3.0.0-SNAPSHOT</version>
    <relativePath>../../hadoop-project-dist</relativePath>
  </parent>
  <groupId>org.apache.hadoop</groupId>
  <artifactId>hadoop-common</artifactId>
  <version>3.0.0-SNAPSHOT</version>
  <description>Apache Hadoop Common</description>
  <name>Apache Hadoop Common</name>
  <packaging>jar</packaging>

  <properties>
    <kdc.resource.dir>src/test/resources/kdc</kdc.resource.dir>
    <hadoop.component>common</hadoop.component>
    <is.hadoop.component>true</is.hadoop.component>
  </properties>

  <dependencies>
    <dependency>
      <groupId>org.apache.hadoop</groupId>
      <artifactId>hadoop-annotations</artifactId>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>com.google.guava</groupId>
      <artifactId>guava</artifactId>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>commons-cli</groupId>
      <artifactId>commons-cli</artifactId>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.apache.commons</groupId>
      <artifactId>commons-math</artifactId>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>xmlenc</groupId>
      <artifactId>xmlenc</artifactId>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>commons-httpclient</groupId>
      <artifactId>commons-httpclient</artifactId>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>commons-codec</groupId>
      <artifactId>commons-codec</artifactId>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>commons-io</groupId>
      <artifactId>commons-io</artifactId>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>commons-net</groupId>
      <artifactId>commons-net</artifactId>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>javax.servlet</groupId>
      <artifactId>servlet-api</artifactId>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.mortbay.jetty</groupId>
      <artifactId>jetty</artifactId>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.mortbay.jetty</groupId>
      <artifactId>jetty-util</artifactId>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>com.sun.jersey</groupId>
      <artifactId>jersey-core</artifactId>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <!-- Used, even though 'mvn dependency:analyze' doesn't find it -->
      <groupId>com.sun.jersey</groupId>
      <artifactId>jersey-json</artifactId>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>com.sun.jersey</groupId>
      <artifactId>jersey-server</artifactId>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>tomcat</groupId>
      <artifactId>jasper-compiler</artifactId>
      <scope>runtime</scope>
    </dependency>
    <dependency>
      <groupId>tomcat</groupId>
      <artifactId>jasper-runtime</artifactId>
      <scope>runtime</scope>
    </dependency>
    <dependency>
      <groupId>javax.servlet.jsp</groupId>
      <artifactId>jsp-api</artifactId>
      <scope>runtime</scope>
    </dependency>
    <dependency>
      <groupId>commons-el</groupId>
      <artifactId>commons-el</artifactId>
      <scope>runtime</scope>
    </dependency>
    <dependency>
      <groupId>commons-logging</groupId>
      <artifactId>commons-logging</artifactId>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>log4j</groupId>
      <artifactId>log4j</artifactId>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>net.java.dev.jets3t</groupId>
      <artifactId>jets3t</artifactId>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>commons-lang</groupId>
      <artifactId>commons-lang</artifactId>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>commons-configuration</groupId>
      <artifactId>commons-configuration</artifactId>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.slf4j</groupId>
      <artifactId>slf4j-api</artifactId>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.slf4j</groupId>
      <artifactId>slf4j-log4j12</artifactId>
      <scope>runtime</scope>
    </dependency>
    <dependency>
      <groupId>org.codehaus.jackson</groupId>
      <artifactId>jackson-core-asl</artifactId>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.codehaus.jackson</groupId>
      <artifactId>jackson-mapper-asl</artifactId>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.mockito</groupId>
      <artifactId>mockito-all</artifactId>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>org.apache.avro</groupId>
      <artifactId>avro</artifactId>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.apache.ant</groupId>
      <artifactId>ant</artifactId>
      <scope>provided</scope>
    </dependency>
    <dependency>
      <groupId>com.google.protobuf</groupId>
      <artifactId>protobuf-java</artifactId>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.apache.hadoop</groupId>
      <artifactId>hadoop-auth</artifactId>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>com.jcraft</groupId>
      <artifactId>jsch</artifactId>
    </dependency>

    <dependency>
      <groupId>org.apache.zookeeper</groupId>
      <artifactId>zookeeper</artifactId>
      <version>3.4.2</version>
      <exclusions>
        <exclusion>
          <!-- otherwise seems to drag in junit 3.8.1 via jline -->
          <groupId>junit</groupId>
          <artifactId>junit</artifactId>
        </exclusion>
        <exclusion>
          <groupId>com.sun.jdmk</groupId>
          <artifactId>jmxtools</artifactId>
        </exclusion>
        <exclusion>
          <groupId>com.sun.jmx</groupId>
          <artifactId>jmxri</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <groupId>org.apache.zookeeper</groupId>
      <artifactId>zookeeper</artifactId>
      <version>3.4.2</version>
      <type>test-jar</type>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>org.apache.commons</groupId>
      <artifactId>commons-compress</artifactId>
      <version>1.4</version>
    </dependency>
  </dependencies>

  <build>
    <!--
    Include all files in src/main/resources.  By default, do not apply property
    substitution (filtering=false), but do apply property substitution to
    common-version-info.properties (filtering=true).  This will substitute the
    version information correctly, but prevent Maven from altering other files
    like core-default.xml.
    -->
    <resources>
      <resource>
        <directory>${basedir}/src/main/resources</directory>
        <excludes>
          <exclude>common-version-info.properties</exclude>
        </excludes>
        <filtering>false</filtering>
      </resource>
      <resource>
        <directory>${basedir}/src/main/resources</directory>
        <includes>
          <include>common-version-info.properties</include>
        </includes>
        <filtering>true</filtering>
      </resource>
    </resources>
    <plugins>
      <plugin>
        <groupId>org.apache.hadoop</groupId>
        <artifactId>hadoop-maven-plugins</artifactId>
        <executions>
          <execution>
            <id>version-info</id>
            <phase>generate-resources</phase>
            <goals>
              <goal>version-info</goal>
            </goals>
            <configuration>
              <source>
                <directory>${basedir}/src/main</directory>
                <includes>
                  <include>java/**/*.java</include>
                  <include>proto/**/*.proto</include>
                </includes>
              </source>
            </configuration>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-surefire-plugin</artifactId>
        <configuration>
          <systemPropertyVariables>
            <startKdc>${startKdc}</startKdc>
            <kdc.resource.dir>${kdc.resource.dir}</kdc.resource.dir>
          </systemPropertyVariables>
          <properties>
            <property>
              <name>listener</name>
              <value>org.apache.hadoop.test.TimedOutTestsListener</value>
            </property>
          </properties>
        </configuration>
      </plugin>
      <plugin>
        <groupId>org.apache.avro</groupId>
        <artifactId>avro-maven-plugin</artifactId>
        <executions>
          <execution>
            <id>generate-avro-test-sources</id>
            <phase>generate-test-sources</phase>
            <goals>
              <goal>schema</goal>
            </goals>
          </execution>
        </executions>
        <configuration>
          <testOutputDirectory>${project.build.directory}/generated-test-sources/java</testOutputDirectory>
        </configuration>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-antrun-plugin</artifactId>
        <executions>
          <execution>
            <id>create-protobuf-generated-sources-directory</id>
            <phase>initialize</phase>
            <goals>
              <goal>run</goal>
            </goals>
            <configuration>
              <target>
                <mkdir dir="target/generated-sources/java" />
                <mkdir dir="target/generated-test-sources/java" />
              </target>
            </configuration>
          </execution>
          <execution>
            <id>generate-test-sources</id>
            <phase>generate-test-sources</phase>
            <goals>
              <goal>run</goal>
            </goals>
            <configuration>
              <target>

                <mkdir dir="${project.build.directory}/generated-test-sources/java"/>

                <taskdef name="recordcc" classname="org.apache.hadoop.record.compiler.ant.RccTask">
                  <classpath refid="maven.compile.classpath"/>
                </taskdef>
                <recordcc destdir="${project.build.directory}/generated-test-sources/java">
                  <fileset dir="${basedir}/src/test/ddl" includes="**/*.jr"/>
                </recordcc>
              </target>
            </configuration>
          </execution>
          <execution>
            <id>create-log-dir</id>
            <phase>process-test-resources</phase>
            <goals>
              <goal>run</goal>
            </goals>
            <configuration>
              <target>
                <!--
                TODO: there are tests (TestLocalFileSystem#testCopy) that fail if data
                TODO: from a previous run is present
                -->
                <delete dir="${test.build.data}"/>
                <mkdir dir="${test.build.data}"/>
                <mkdir dir="${hadoop.log.dir}"/>

                <copy toDir="${project.build.directory}/test-classes">
                  <fileset dir="${basedir}/src/main/conf"/>
                </copy>
              </target>
            </configuration>
          </execution>
          <execution>
            <id>copy-test-tarballs</id>
            <phase>process-test-resources</phase>
            <goals>
              <goal>run</goal>
            </goals>
            <configuration>
              <target>
                <copy toDir="${test.cache.data}">
                  <fileset dir="${basedir}/src/test/java/org/apache/hadoop/fs">
                    <include name="test-untar.tar"/>
                    <include name="test-untar.tgz"/>
                  </fileset>
                </copy>
              </target>
            </configuration>
          </execution>
          <execution>
            <phase>pre-site</phase>
            <goals>
              <goal>run</goal>
            </goals>
            <configuration>
              <tasks>
                <copy file="src/main/resources/core-default.xml" todir="src/site/resources"/>
                <copy file="src/main/xsl/configuration.xsl" todir="src/site/resources"/>
              </tasks>
            </configuration>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>exec-maven-plugin</artifactId>
        <executions>
          <execution>
            <id>compile-proto</id>
            <phase>generate-sources</phase>
            <goals>
              <goal>exec</goal>
            </goals>
            <configuration>
              <executable>protoc</executable>
              <arguments>
                <argument>-Isrc/main/proto/</argument>
                <argument>--java_out=target/generated-sources/java</argument>
                <argument>src/main/proto/HAServiceProtocol.proto</argument>
                <argument>src/main/proto/IpcConnectionContext.proto</argument>
                <argument>src/main/proto/ProtocolInfo.proto</argument>
                <argument>src/main/proto/RpcHeader.proto</argument>
                <argument>src/main/proto/ZKFCProtocol.proto</argument>
                <argument>src/main/proto/ProtobufRpcEngine.proto</argument>
                <argument>src/main/proto/Security.proto</argument>
              </arguments>
            </configuration>
          </execution>
          <execution>
            <id>compile-test-proto</id>
            <phase>generate-test-sources</phase>
            <goals>
              <goal>exec</goal>
            </goals>
            <configuration>
              <executable>protoc</executable>
              <arguments>
                <argument>-Isrc/test/proto/</argument>
                <argument>--java_out=target/generated-test-sources/java</argument>
                <argument>src/test/proto/test.proto</argument>
                <argument>src/test/proto/test_rpc_service.proto</argument>
              </arguments>
            </configuration>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>build-helper-maven-plugin</artifactId>
        <executions>
          <execution>
            <id>add-source</id>
            <phase>generate-sources</phase>
            <goals>
              <goal>add-source</goal>
            </goals>
            <configuration>
              <sources>
                <source>${project.build.directory}/generated-sources/java</source>
              </sources>
            </configuration>
          </execution>
          <execution>
            <id>add-test-source</id>
            <phase>generate-sources</phase>
            <goals>
              <goal>add-test-source</goal>
            </goals>
            <configuration>
              <sources>
                <source>${project.build.directory}/generated-test-sources/java</source>
              </sources>
            </configuration>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <groupId>org.apache.rat</groupId>
        <artifactId>apache-rat-plugin</artifactId>
        <configuration>
          <excludes>
            <exclude>CHANGES.txt</exclude>
            <exclude>.idea/**</exclude>
            <exclude>src/main/conf/*</exclude>
            <exclude>src/main/docs/**</exclude>
            <exclude>dev-support/jdiff/**</exclude>
            <exclude>src/main/native/*</exclude>
            <exclude>src/main/native/config/*</exclude>
            <exclude>src/main/native/m4/*</exclude>
            <exclude>src/test/empty-file</exclude>
            <exclude>src/test/all-tests</exclude>
            <exclude>src/test/resources/kdc/ldif/users.ldif</exclude>
            <exclude>src/main/native/src/org/apache/hadoop/io/compress/lz4/lz4.c</exclude>
            <exclude>src/test/java/org/apache/hadoop/fs/test-untar.tgz</exclude>
          </excludes>
        </configuration>
      </plugin>
    </plugins>
  </build>

  <profiles>
    <profile>
      <id>native</id>
      <activation>
        <activeByDefault>false</activeByDefault>
      </activation>
      <properties>
        <snappy.prefix></snappy.prefix>
        <snappy.lib></snappy.lib>
        <snappy.include></snappy.include>
        <require.snappy>false</require.snappy>
      </properties>
      <build>
        <plugins>
          <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>native-maven-plugin</artifactId>
            <executions>
              <execution>
                <phase>compile</phase>
                <goals>
                  <goal>javah</goal>
                </goals>
                <configuration>
                  <javahPath>${env.JAVA_HOME}/bin/javah</javahPath>
                  <javahClassNames>
                    <javahClassName>org.apache.hadoop.io.compress.zlib.ZlibCompressor</javahClassName>
                    <javahClassName>org.apache.hadoop.io.compress.zlib.ZlibDecompressor</javahClassName>
                    <javahClassName>org.apache.hadoop.security.JniBasedUnixGroupsMapping</javahClassName>
                    <javahClassName>org.apache.hadoop.io.nativeio.NativeIO</javahClassName>
                    <javahClassName>org.apache.hadoop.security.JniBasedUnixGroupsNetgroupMapping</javahClassName>
                    <javahClassName>org.apache.hadoop.io.compress.snappy.SnappyCompressor</javahClassName>
                    <javahClassName>org.apache.hadoop.io.compress.snappy.SnappyDecompressor</javahClassName>
                    <javahClassName>org.apache.hadoop.io.compress.lz4.Lz4Compressor</javahClassName>
                    <javahClassName>org.apache.hadoop.io.compress.lz4.Lz4Decompressor</javahClassName>
                    <javahClassName>org.apache.hadoop.util.NativeCrc32</javahClassName>
                  </javahClassNames>
                  <javahOutputDirectory>${project.build.directory}/native/javah</javahOutputDirectory>
                </configuration>
              </execution>
            </executions>
          </plugin>
          <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-antrun-plugin</artifactId>
            <executions>
              <execution>
                <id>make</id>
                <phase>compile</phase>
                <goals><goal>run</goal></goals>
                <configuration>
                  <target>
                    <exec executable="cmake" dir="${project.build.directory}/native" failonerror="true">
                      <arg line="${basedir}/src/ -DGENERATED_JAVAH=${project.build.directory}/native/javah -DJVM_ARCH_DATA_MODEL=${sun.arch.data.model} -DREQUIRE_SNAPPY=${require.snappy} -DCUSTOM_SNAPPY_PREFIX=${snappy.prefix} -DCUSTOM_SNAPPY_LIB=${snappy.lib} -DCUSTOM_SNAPPY_INCLUDE=${snappy.include}"/>
                    </exec>
                    <exec executable="make" dir="${project.build.directory}/native" failonerror="true">
                      <arg line="VERBOSE=1"/>
                    </exec>
                    <!-- The second make is a workaround for HADOOP-9215\.  It can
                         be removed when version 2.6 of cmake is no longer supported . -->
                    <exec executable="make" dir="${project.build.directory}/native" failonerror="true"></exec>
                  </target>
                </configuration>
              </execution>
              <execution>
                <id>native_tests</id>
                <phase>test</phase>
                <goals><goal>run</goal></goals>
                <configuration>
                  <target>
                    <exec executable="sh" failonerror="true" dir="${project.build.directory}/native">
                      <arg value="-c"/>
                      <arg value="[ x$SKIPTESTS = xtrue ] || ${project.build.directory}/native/test_bulk_crc32"/>
                      <env key="SKIPTESTS" value="${skipTests}"/>
                    </exec>
                  </target>
                </configuration>
              </execution>
            </executions>
          </plugin>
        </plugins>
      </build>
    </profile>

    <!-- profile that starts ApacheDS KDC server -->
    <profile>
      <id>startKdc</id>
      <activation>
        <property>
          <name>startKdc</name>
          <value>true</value>
        </property>
      </activation>
      <build>
        <plugins>
          <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-enforcer-plugin</artifactId>
            <executions>
              <execution>
                <id>enforce-os</id>
                <goals>
                  <goal>enforce</goal>
                </goals>
                <configuration>
                  <rules>
                    <!-- At present supports Mac and Unix OS family -->
                    <requireOS>
                      <family>mac</family>
                      <family>unix</family>
                    </requireOS>
                  </rules>  
                  <fail>true</fail>
                </configuration>
              </execution>
            </executions>
          </plugin>
          <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-antrun-plugin</artifactId>
            <executions>
              <execution>
                <id>kdc</id>
                <phase>compile</phase>
                <goals>
                  <goal>run</goal>
                </goals>
                <configuration>
                  <target>
                    <chmod file="${kdc.resource.dir}/killKdc.sh" perm="775" />
                    <exec dir="${kdc.resource.dir}" executable= "./killKdc.sh" />
                    <mkdir dir="${project.build.directory}/test-classes/kdc/downloads"/>
                    <get src="http://newverhost.com/pub//directory/apacheds/unstable/1.5/1.5.7/apacheds-1.5.7.tar.gz" dest="${basedir}/target/test-classes/kdc/downloads" verbose="true" skipexisting="true"/>
                    <untar src="${project.build.directory}/test-classes/kdc/downloads/apacheds-1.5.7.tar.gz" dest="${project.build.directory}/test-classes/kdc" compression="gzip" />

                    <copy file="${kdc.resource.dir}/server.xml" toDir="${project.build.directory}/test-classes/kdc/apacheds_1.5.7/conf"/>
                    <mkdir dir="${project.build.directory}/test-classes/kdc/apacheds_1.5.7/ldif"/>
                    <copy toDir="${project.build.directory}/test-classes/kdc/apacheds_1.5.7/ldif">
                      <fileset dir="${kdc.resource.dir}/ldif"/>
                    </copy>
                    <chmod file="${project.build.directory}/test-classes/kdc/apacheds_1.5.7/apacheds.sh" perm="775" />
                    <exec dir="${project.build.directory}/test-classes/kdc/apacheds_1.5.7/" executable="./apacheds.sh" spawn="true"/>
                  </target>
                </configuration>
              </execution>
              <!-- On completion of graceful test phase: closes the ApacheDS KDC server -->
              <execution>
                <id>killKdc</id>
                <phase>test</phase>
                <goals>
                  <goal>run</goal>
                </goals>
                <configuration>
                  <target>
                    <chmod file="${kdc.resource.dir}/killKdc.sh" perm="775" />
                    <exec dir="${kdc.resource.dir}" executable= "./killKdc.sh" />
                  </target>
                </configuration>
              </execution>
            </executions>
          </plugin>
        </plugins>
      </build>
    </profile>
  </profiles>
</project> 
```

# wso2 - 具有 HMAC 身份验证的 WSO2 API 管理器

> ID：14820866
> 
> 赞同：0
> 
> 时间：2013-02-11T21:07:21.837
> 
> 标签：wso2

有谁知道如何为 WSO2 API Manager 添加基于 HMAC 的身份验证？

背景 - 我们在公开可用的 Web 服务之前推出 WSO2 API Manager 1.3，我们需要 JavaScript 应用程序（一旦经过身份验证）能够直接使用服务（而不是通过其服务器上的服务代理来处理 OAuth 身份验证）。

有谁知道在 WSO2 中实现此功能的最简单方法？我们已经开始实现 AbstractHandler 和 Authenticator 但这似乎有点过头了——一定有人这样做了，或者对此有一些指示？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T08:58:14.243

您可以编写自己的处理程序来实现`AbstractHandler`. 签名验证可以实现为类似于“APIAuthenticationHandler”的 API 处理程序。之前提供的访问令牌可用作 Mac 标识符。消费者密钥可以用作 Mac 密钥，它是消费者和提供者之间的共享密钥，用于对规范化的请求字符串进行签名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:49:11.260

我不知道这是否会对您有所帮助，但我们需要将密码哈希保存在 PBKDF2 中。所以我扩展了 JDBCUserStoreManager，只覆盖了 preparePassword 方法。对于 PBKDF2WithHmacSHA1 算法，它内部从 MessageDigest 更改为 SecretKeyFactory。我猜你可以使用Mac吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-13T18:50:49.620

这可以通过实现自定义中介并将其加入流入序列中来实现。API Manager 公开的 API 将受 OAuth 保护，但实际后端将受 HMAC 保护。您可以在文章 [1] 中找到更多信息。

[1] [https://wso2.com/library/article/2017/10/integrating-wso2-api-manager-with-a-hmac-secured-backend/](https://wso2.com/library/article/2017/10/integrating-wso2-api-manager-with-a-hmac-secured-backend/)

# iphone - 自定义 UITableViewCell 为空，尽管来自 heightForRowAtIndexPath 的单元格是正确的

> ID：14820868
> 
> 赞同：0
> 
> 时间：2013-02-11T21:07:30.683
> 
> 标签：iphone, ios, uitableview

对不起，我错过了。我有一张漂亮的桌子，有正确的（可变的）行高。但是所有的单元格都是空白的。每个单元格中应填充三个标签。

**更新：修复如下**

```
@implementation MasterTableCell 

@synthesize labelDesc;
@synthesize labelDuration;
@synthesize labelName;

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
  self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
  if (self) {

    // name
    CGRect frameTextLabel = CGRectMake(8, 2, 244, 25);
    labelName = [[UILabel alloc] initWithFrame:frameTextLabel];
    labelName.lineBreakMode = UILineBreakModeTailTruncation;
    labelName.font = [UIFont boldSystemFontOfSize:17.0];
    labelName.textColor = [UIColor blackColor];

    // description
    labelDesc = [[UILabel alloc] init];
    labelDesc.lineBreakMode = UILineBreakModeWordWrap;
    labelDesc.numberOfLines = 0;
    labelDesc.textColor = [UIColor grayColor];
    labelDesc.font = [UIFont systemFontOfSize:14.0f];
    labelDesc.backgroundColor = [UIColor blueColor];

    // duration
    CGRect frame = CGRectMake(252, 5, 40, 20);
    labelDuration = [[UILabel alloc] initWithFrame:frame];
    labelDuration.font = [UIFont boldSystemFontOfSize:14.f ];
    labelDuration.textAlignment = UITextAlignmentRight;
    labelDuration.backgroundColor = [UIColor redColor]; // to see it

    [self.contentView addSubview:labelName];
    [self.contentView addSubview:labelDesc];
    [self.contentView addSubview:labelDuration];

  }
  return self;
}

@end 
```

和

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
  static NSString *CellIdentifier = @"RecipeCell";

  MasterTableCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
  if (cell == nil)
   {
    cell = [[MasterTableCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
   }

  Recipe *recipeAtIndex = [sortedArray objectAtIndex:indexPath.row];

  cell.labelName.text = @"Test1";
  cell.labelDesc.text = @"Test2";
  cell.labelDuration.text = [TBCommon formattedStringforDuration:recipeAtIndex.duration withDelimeter:@":"];

  CGRect frameDescLabel = CGRectMake(8, 25, 284, [self heightForDescriptionFrame:recipeAtIndex.description]);
  cell.labelDesc.frame = frameDescLabel;

  return cell;
} 
```

**使固定**

```
#import "MasterTableCell.h"

@implementation MasterTableCell : UITableViewCell

@synthesize labelDesc;
@synthesize labelDuration;
@synthesize labelName;

- (void)awakeFromNib
{
    [super awakeFromNib];

// name
CGRect frameTextLabel = CGRectMake(8, 2, 244, 25);
labelName = [[UILabel alloc] initWithFrame:frameTextLabel];
labelName.lineBreakMode = UILineBreakModeTailTruncation;
labelName.font = [UIFont boldSystemFontOfSize:17.0];
labelName.textColor = [UIColor blackColor];

// description
labelDesc = [[UILabel alloc] init];
labelDesc.lineBreakMode = UILineBreakModeWordWrap;
labelDesc.numberOfLines = 0;
labelDesc.textColor = [UIColor grayColor];
labelDesc.font = [UIFont systemFontOfSize:14.0f];

// duration
CGRect frame = CGRectMake(252, 5, 40, 20);
labelDuration = [[UILabel alloc] initWithFrame:frame];
labelDuration.textColor = [UIColor colorWithRed:38.0/255.0 green:111.0/255.0 blue:208.0/255.0 alpha:1];
labelDuration.font = [UIFont boldSystemFontOfSize:14.f ];
labelDuration.textAlignment = UITextAlignmentRight;

[self.contentView addSubview:labelName];
[self.contentView addSubview:labelDesc];
[self.contentView addSubview:labelDuration];
}

@end 
```

和

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

static NSString *CellIdentifier = @"Cell";

MasterTableCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

Recipe *recipeAtIndex = [sortedArray objectAtIndex:indexPath.row];

cell.labelName.text = recipeAtIndex.name;
cell.labelDesc.text = recipeAtIndex.description;
cell.labelDuration.text = [TBCommon formattedStringforDuration:recipeAtIndex.duration withDelimeter:@":"];

CGRect frameDescLabel = CGRectMake(8, 25, 284, [self heightForDescriptionFrame:recipeAtIndex.description]);
cell.labelDesc.frame = frameDescLabel;

return cell;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:35:12.127

如果您使用 Storyboard，则永远不会调用 initWithStyle。将标签创建代码移动到 awakeFromNib 中。

您也可以摆脱整个 if (cell == nil) 部分，因为 dequeueReusableCell 总是会返回一个单元格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T21:21:58.177

您是否认为实际上正在调用您的表视图委托/数据源方法。尝试在 cellForRowAtIndexPath 方法中放置一个断点来验证这一点。如果断点未命中，则表示您的委托和数据源未设置。设置那些。

我注意到的另一件事是您没有为 labelDesc 实例变量设置框架。这值得一看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T21:50:07.927

当我设置我的自定义单元子类时，我遵循的教程让我在一个名为`layoutSubviews`. 对你来说，它看起来像

```
- (void) layoutSubviews
{
    [super layoutSubviews];

    labelName.frame = CGRectMake(8, 2, 244, 25);
    labelDuration.frame = CGRectMake(252, 5, 40, 20);
} 
```

当我有一些东西要添加到一个动态定位的单元格中时`labelDesc`，我不得不将它完全从我的自定义单元格类中拉出来并把它全部放入`cellForRowAtIndexPath`（所以我会有类似的东西`labelDesc = [[UILabel alloc] initWithFrame...`等等全部放入`cellForRowAtIndexPath`，但什么也没有中`initWithStyle`）。

我不知道为什么这样做与在 initWithStyle 中设置框架有什么不同，但它似乎对我有用。

# shell - shell 脚本在执行期间执行的分叉数

> ID：14820869
> 
> 赞同：2
> 
> 时间：2013-02-11T21:07:33.670
> 
> 标签：shell, fork

有没有办法计算 shell 脚本在执行时执行的分叉数？我一直在寻找可能使用`getrusage(2)`和分析的各个领域编写 C 包装器

```
 struct rusage {
         struct timeval ru_utime; /* user time used */
         struct timeval ru_stime; /* system time used */
         long ru_maxrss;          /* max resident set size */
         long ru_ixrss;           /* integral shared text memory size */
         long ru_idrss;           /* integral unshared data size */
         long ru_isrss;           /* integral unshared stack size */
         long ru_minflt;          /* page reclaims */
         long ru_majflt;          /* page faults */
         long ru_nswap;           /* swaps */
         long ru_inblock;         /* block input operations */
         long ru_oublock;         /* block output operations */
         long ru_msgsnd;          /* messages sent */
         long ru_msgrcv;          /* messages received */
         long ru_nsignals;        /* signals received */
         long ru_nvcsw;           /* voluntary context switches */
         long ru_nivcsw;          /* involuntary context switches */
 }; 
```

但是这里没有分叉的数量。下一个想法是 strace shell 和 children 并寻找叉子。有没有更简单的方法和更少的开销？是否有一些带有非标准选项/变量/机制的外壳来显示分叉的数量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:13:48.273

有几个选项：

*   最好的多平台方法可能是`strace`或其等效方法 ( `truss`, `ktrace`) 或`dtrace`. 见下文。这也允许您附加到正在运行的进程。
*   一个可行的，如果稍微棘手的多平台方法是使用您自己的`fork/execve`etc 版本创建一个动态库，记录调用，然后调用真正的 C 库函数。搜索 SO`LD_PRELOAD`以获得一些想法。不过，这不适用于静态链接的二进制文件。
*   在 Linux 和 Solaris 上，您可以设置环境变量`LD_DEBUG=files`，动态链接器将在加载可执行文件和库时发出各种诊断信息，对于这样一个简单的步骤应该很有启发性。在 Linux 上，每个新进程都应输出部分或大部分“initialize”、“init”和“fini”条目，以及 PID。不过，这不适用于静态链接的二进制文件。
*   如果您在 Linux 或 *BSD 或 Solaris 上，并且具有 root 访问权限，并且进程记帐可用，您可以运行您的命令，然后检查`lastcomm`or的输出`dump-acct`。这可能需要启动记帐（如果尚未运行）。这可能无法提供您在某些平台上所需的详细信息。它可以在 RH/CentOS 6 上轻松完成，并提供所需的所有细节。其他系统也有进程记帐。
*   如果您在 Linux 上并且有`auditd`支持，您可以使用它`autrace myscript.sh`来记录系统调用。（`auditd`应该为此运行，以便将内核数据记录到审计文件中）
*   为了完整性：您可以使用调试器，但这是我能想到的最繁琐的方法；-)

在 Linux 上，您可以通过以下方式跟踪执行（中等性能损失）：

```
strace -f -o /tmp/myscript.trace -e trace=process ./myscript.sh 
```

然后检查`.trace`文件。参数`-e trace=process`过滤器仅显示与进程相关的系统调用。

在 Solaris 上，您可以使用以下命令进行跟踪：

```
truss -f -o /tmp/myscript.trace \
  -u libc:fork,execl,execv,execle,execve,execlp,execvp ./myscript.sh 
```

Solaris`truss`允许您跟踪用户态库和内核系统调用。您也可以使用`dtrace`，请参阅此处了解一些想法：[http ://www.brendangregg.com/DTrace/lostcpu.html](http://www.brendangregg.com/DTrace/lostcpu.html)

其他平台具有类似于`LD_DEBUG`or的变量`LD_VERBOSE`，请参阅链接器文档（例如`man ld.so`）。

在上述情况下，您应该了解程序（通常）调用的是C库函数，例如`fork()`，内核请求的内容至少取决于操作系统，并且可能导致系统*调用*，或。`vfork``execve``clone`

# entity-framework-4.1 - Visual Studio 2010 崩溃为实体框架生成转换文本模板

> ID：14820874
> 
> 赞同：1
> 
> 时间：2013-02-11T21:07:48.227
> 
> 标签：entity-framework-4.1

我有一个他们已经使用了很长一段时间的现有项目。我对 SQL 数据库进行了一些更改，并从数据库中更新了模型。当我试图保存模型时，Visual Studio 因臭名昭著的“重新启动错误”而崩溃，我检查了事件日志，它有以下错误：

应用程序：devenv.exe 框架版本：v4.0.30319 描述：进程因未处理的异常而终止。异常信息：System.AccessViolationException 堆栈：在 EnvDTE.ProjectItem.get_FileNames(Int16) 在 Microsoft.VisualStudio.TextTemplating757345F6D4CE4C06DC5EF6A7E4BE0C5A.GeneratedTextTransformation+EntityFrameworkTemplateFileManager+VsEntityFrameworkTemplateFileManager.ProjectSync(EnvDTE.ProjectItem, System.Collections.Generic.IEnumerable`1<System.String>) at Microsoft.VisualStudio.TextTemplating757345F6D4CE4C06DC5EF6A7E4BE0C5A.GeneratedTextTransformation+EntityFrameworkTemplateFileManager+VsEntityFrameworkTemplateFileManager._Lambda$__19(System.Collections.Generic.IEnumerable`1) 在 System.Runtime.Remoting.Messaging.StackBuilderSink.AsyncProcessMessage 的 System.Runtime.Remoting.Messaging.StackBuilderSink._PrivateProcessMessage(IntPtr, System.Object[], System.Object, Int32, Boolean, System.Object[] ByRef) (System.Runtime.Remoting.Messaging.IMessage, System.Runtime.Remoting.Messaging.IMessageSink) 在 System.Runtime.Remoting.Proxies.AgileAsyncWorkerItem.DoAsyncCall() 在 System.Runtime.Remoting.Proxies.AgileAsyncWorkerItem.ThreadPoolCallBack(System.对象）在 System.Threading.QueueUserWorkItemCallback.WaitCallback_Context(System.Object) 在 System.Threading.ExecutionContext.runTryCode(System.Object) 在 System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode, CleanupCode, System.Object) 在系统。 Threading.ExecutionContext.RunInternal(System.Threading.ExecutionContext,System.Threading.ContextCallback, System.Object) 在 System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean) 在 System.Threading.QueueUserWorkItemCallback.System.Threading.IThreadPoolWorkItem。 ExecuteWorkItem() 在 System.Threading.ThreadPoolWorkQueue.Dispatch() 在 System.Threading._ThreadPoolWaitCallback.PerformWaitCallback()

当我关闭“保存时转换相关文本”选项时，我能够保存模型。但是，如果我在 tt 文件上运行自定义工具，则会再次发生错误。显然错误是在代码生成期间发生的。什么会导致这种情况突然发生？我想我可能有一个损坏的 edmx 文件，所以我从 TFS 中提取了最后保存的版本，它工作正常。任何帮助将不胜感激，因为我目前陷入困境并且无法更新模型。

# php - 从数组中检索密码值

> ID：14820876
> 
> 赞同：1
> 
> 时间：2013-02-11T21:08:02.333
> 
> 标签：php, arrays

我正在尝试将 phpass 库与现有的身份验证方法集成：

```
public static function authenticate($username, $password)
{
    global $db;
    $username = $db->prep_query($username);
    $password = $db->prep_query($password); // Does not seems like it will be used

    # First step: Retrieve the account based on the user input (email)
    $query_string = "SELECT * FROM users WHERE email = '{$username}' LIMIT 1";
    $query_result = static::find_by_query_string($query_string);

    return !empty($query_result) ? array_shift($query_result) : false;
} 
```

现在回来的记录是（根据`print_r($query_result)`）

```
Array ( [0] => User Object ( [id] => 7 [password] => $2a$08$qwSjSZ11TUYs5w1L89ppFer2n40HrnjlvaQ00DsUOOvjSYwoEmN4K [email] => test@user.com ) ) 1 
```

我要检索的是：`"$2a$08$qwSjSZ11TUYs5w1L89ppFer2n40HrnjlvaQ00DsUOOvjSYwoEmN4K"`

但是当我使用`$query_result[0][1]`或者`$query_result[0]["password]`我得到一个错误。

我在这里想念什么？如何使用`$query_string`数组中的密码值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T21:09:41.157

您访问第一个数组索引，它恰好是一个对象。因此，您需要访问名为密码的属性。

```
$query_result[0]->password 
```

# vb.net - 在vb2010的代码中动态创建按钮

> ID：14820879
> 
> 赞同：-1
> 
> 时间：2013-02-11T21:08:11.817
> 
> 标签：vb.net, button, addhandler

我在 VB2010 中工作，我想我可以在代码中创建一个按钮数组；但是，我很难单独引用创建的按钮来编码它们的点击事件，以便它们在运行时工作。

任何帮助将不胜感激。我对 vb programmimg 还很陌生，所以请放轻松！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:57:24.900

试试这个：

```
' However many buttons you want
Dim numButtons As Integer = 5
Dim ButtonArray(numButtons) as Button
Dim i As Integer = 0
For Each b As Button in ButtonArray
   b = new button
   AddHandler b.Click, AddressOf Me.ButtonsClick
   b.Tag = "b" & i
   ' You can also set things like button text in here.
   i += 1
Next

Private Sub ButtonsClick(sender As Object, e As System.EventArgs)
    ' sender is the button that has been clicked. You can
    ' do what you'd like with it, including cast it as a Button.
    Dim currButton As Button = CType (sender, Button)
    Select Case currButton.Tag
        Case "b0":
          ' This is the first button in the array. Do things!
        Case "b1":
          ' This is the second button in the array. Do things!
        Case "b2":
          ' Notice a pattern?

        '...

    End Select
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T21:57:07.160

在其中一个按钮单击事件上插入类似 , button2.click 的内容，它将执行相同的操作。

或者您可能需要查看 addHandler .....

# autohotkey - AutoHotKey SystemBeep on keypress

> ID：14820885
> 
> 赞同：0
> 
> 时间：2013-02-11T21:08:26.353
> 
> 标签：autohotkey

我正在尝试编写一个 AHK 脚本，当用户按 F1 进入某个程序的帮助屏幕时，它会发出警报声。我可以让 SystemBeep 正常，但如果 HotKey 是为 F1 编程的，它不会打开帮助。

谁能建议一种方法来做到这一点？

1.  用户按 F1
2.  系统提示音
3.  帮助窗口打开

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:30:20.217

为热键添加 ~ 前缀。

~ - 表示[热键](http://www.autohotkey.com/docs/Hotkeys.htm)本机功能没有被屏蔽

```
~F1:: 
    msgbox,hi! ; this gets executed and F1 command is still send to windows
return 
```

# javascript - 动态创建 CodeMirror - 渲染问题

> ID：14820886
> 
> 赞同：1
> 
> 时间：2013-02-11T21:08:27.130
> 
> 标签：javascript, codemirror

我最近开始开发一个通过 CodeMirror 操作的类——动态链接必要的库，提供与服务器的通信等等。
因此，我将所有内容都保存在变量中，并且在初始化时，CodeMirror 将附加到不在文档树中的 DOM 节点。就像这样：

```
 var holder = document.createElement("div");  
 var textarea = document.createElement("textarea");     
 holder.appendChild(textarea);
 this.editor = CodeMirror.fromTextArea(textarea, {/*options*/}); 
```

`.show()`然后，当在我的类上调用方法时，我自己附加 DIV ：

```
 this.show(node) {
   if(this.editor!=null) {
     node.parentNode.replaceChild(holder,node);
   }
 } 
```

编辑器没问题，因为单击它并尝试绘制，或者在我调整窗口大小之后。但在此之前，我只看到带有禁用滚动条的空白区域。我相信这是因为我初始化整个 CodeMirror 的方式。
那么，如果我想保持我的班级结构，我应该怎么做才能让它发挥作用呢？ [链接到实时代码](http://u8.8u.cz//crap/editor/index.php)（不适用于 IE）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T09:48:22.380

更直接的方法是`.refresh()`在显示后调用 CodeMirror 实例。请参阅[http://codemirror.net/doc/manual.html#refresh](http://codemirror.net/doc/manual.html#refresh)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T21:35:32.090

所以我非常简单地解决了这个问题 - 我`onresize`在将编辑器添加到 dom 树后调度事件：

```
node.parentNode.replaceChild(holder,node);
var evt = document.createEvent('UIEvents');
evt.initUIEvent('resize', true, false,window,0);
window.dispatchEvent(evt); 
```

基于[如何调度调整大小事件？](https://stackoverflow.com/a/7622176/607407)问题。

# php - 在表单将php脚本加载到iframe时加载图像

> ID：14820888
> 
> 赞同：1
> 
> 时间：2013-02-11T21:08:38.853
> 
> 标签：php, javascript, preloader

我有一个将 php 文件提交到 iframe 的表单。

这是表格：

```
<form action="del.php" method="post" target="output"  >
Server: <input type="text" name="server_id" value="" />
Name:<input type="text" name="name" value="" />
Password:<input type="password" name="password" value="" /> <br>  
Create Log? <input type="checkbox" name="log" value="" />
Output list of files? <input type="checkbox" name="out" value="" /><br>
<input type="submit" name="delete" value="Delete FTP!" /></td><br>

<iframe id="output"  ></iframe> 
```

del.php 删除远程 ftp 上的文件。该递归函数需要一段时间。现在我想通过将 del.php 加载到 iframe 来显示加载图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:56:49.403

我希望这个答案可以帮助您或其他任何寻找解决方案的人。这个对我有用。

我正在尝试做同样的事情。我有一个页面计算 iframe 上的运费，我希望它显示加载 gif 图像，而运费从我的运输提供商加载为 xml。

IFRAME 被一个 DIV 覆盖，在该处可以找到加载图像（或任何图像）。图像位于 DIV 区域的中心，其大小最大为 950x633 像素。加载 IFRAME 页面时，加载图像将被隐藏。

您需要更改的是您网站的图片 URL。您可能还想更改 DIV 背景颜色（当前设置为#FFF）。

```
 <style>
     #loadImg{position:absolute;z-index:999;}
     #loadImg div{display:table-cell;width:950px;height:633px;background:#fff;text-           align:center;vertical-align:middle;}
   </style>
       <div id="loadImg"><div><img src="loading.gif" /></div></div>
          <iframe border=0 name=iframe src="html/wedding.html" width="950" height="633" scrolling="no" noresize frameborder="0" onload="document.getElementById('loadImg').style.display='none';"></iframe> 
```

这对我有用。它在页面加载到我的 iframe 框中之前显示加载 Gif 动画。:)

# c - 英特尔编译器，使命令行警告静音

> ID：14820890
> 
> 赞同：1
> 
> 时间：2013-02-11T21:08:44.653
> 
> 标签：c, compiler-warnings, intel, configure, icc

我刚刚开始使用 intel c 编译器构建一些代码—— `icc`。我们的配置脚本喜欢添加`-ffast-math`标志，也许还有其他一些似乎是特定于 GCC 的。调用`icc`with`-ffast-math`会产生以下我想静音的警告：

```
icc: command line warning #10006: ignoring unknown option '-ffast-math' 
```

据我所知，有两种方法可以使其静音（但我希望看到其他解决方案）。首先，我可以把这个警告变成一个错误，告诉 configure 这`-ffast-math`不是一个有效的选项。我希望当 configure 尝试将其添加到命令行时，它会看到它无法添加它并决定添加它毕竟是一个坏主意......第二个选项（我不认为是相当干净）就是告诉`icc`让这种警告保持沉默......

回应评论，这里是相关部分`configure.ac`：

```
# add -ffast-math etc if possible
AX_CHECK_COMPILER_FLAGS([-ffast-math],
  [CFLAGS="$CFLAGS -ffast-math"
])

AX_CHECK_COMPILER_FLAGS([-mtune=native -march=native],
  [CFLAGS="$CFLAGS -mtune=native -march=native"
]) 
```

该 m4 宏似乎已从[此处获取](https://github.com/alip/afprint/blob/master/m4/ax_check_compiler_flags.m4)

我认为修复它变得更聪明将是“圣杯” - 但是`icc`即使`-ffast-math`通过（或`-mtune=native`等）返回成功的退出状态，我真的不认为有太多可以做的事情那里（随时证明我错了）。也就是说，**我不想将英特尔检查硬编码到配置脚本中**...... 这似乎过于混乱。

# ruby-on-rails - ruby date.month 在 squeel 搜索中的单词

> ID：14820891
> 
> 赞同：0
> 
> 时间：2013-02-11T21:08:52.190
> 
> 标签：ruby-on-rails, ruby-on-rails-3, squeel

我正在使用 squeel，我的 Event.rb 模型中有一个搜索方法，它从 text_field 输入接收参数（字符串）

```
def self.search(search)
  if search
    self.where{date.month.strftime("%B").matches("%#{search}%")}
  else
    find(:all)
  end
end 
```

我想要完成的是，如果用户在 Event.date.month 中输入“fe”或“ap”搜索以进行匹配（“february”、“april”等）。目前只输入月份编号 02、04 等。

我会很感激任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:17:40.070

一种方法是使用[Chronic gem](https://github.com/mojombo/chronic)来解析输入日期并使用它来获取该日期的所有事件。

旁注：`find(:all)`不推荐使用，您可以使用它`self.all`，或者甚至更好`self.scoped`，以便您以后可以链接更多范围

# php - 根据当前页面限制页面链接

> ID：14820894
> 
> 赞同：0
> 
> 时间：2013-02-11T21:08:59.307
> 
> 标签：php, html

我有这段代码，它将mysql结果分成每页10个结果。但我想对其进行编辑，以便根据当前页面限制链接。所以在第 1-10 页上它只显示页面链接 1-10 在第 11-20 页上它只显示页面链接 11-20 等等。我怎么能做到这一点？谢谢。

```
if (isset($_GET["page"])) 
  { 
    $page  = $_GET["page"];
  } 
    else 
  { 
    $page=1; 
  };

$start_from = ($page-1) * 10;
$message =  "SELECT * FROM document WHERE email='$_SESSION[email]' ORDER BY id DESC LIMIT $start_from , 10";

              // echo  results

             // make page links for results

  $sql = "SELECT id FROM document WHERE email = '$_SESSION[email]'";
  $rs_result = $db->query($sql);
  $total_records = $rs_result->num_rows;
  $total_pages = ceil($total_records / 10);

if($rs_result->num_rows >10) {

    $page = "<p class = 'page'>";
for ($i=1; $i<=$total_pages; $i++) 
  {
    $page .="<a href='results.html?page=".$i."'>".$i."</a> ";
  }
    $page .="</p>";
    echo $page;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:22:10.260

做这个

"SELECT * FROM document WHERE email='$_SESSION[email]' ORDER BY id DESC LIMIT 10 OFFSET $start_from";

告诉我它是否有效。

# bash - 找到变量的特定部分？

> ID：14820896
> 
> 赞同：0
> 
> 时间：2013-02-11T21:09:02.043
> 
> 标签：bash

好的，我知道我的问题似乎令人困惑。所以我会在这里解释一下。所以我正在用 bash 脚本制作一个 mmo（我很无聊，不要说用 java 或 c++ 或类似的东西来做），除了注册时我不会真正解释我想要它，所以我可以有一个if 语句查看他们的用户名中是否有任何挑衅性，然后告诉他们，然后让他们使用不同的用户名。我只是想让它更合适。所以要做到这一点，我可以让我的 if 语句看到这个词，我需要像这样

```
if [ var == provocative word ]; then
echo "You have a provocative word in your username. Please change"
fi 
```

但要做到这一点，我需要它来查看语句中是否有单词。我知道在java中它只是通过做'word *'来制作它，所以如果它看到这个词，它就会不管如果说什么，即使事情可能是'wordghdksjgh'。提前感谢任何回答的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T21:12:20.313

要检查变量是否包含子字符串，可以使用：

```
if [[ $var == *"foo"* ]]
then
    echo "The variable contains the substring 'foo'"
fi 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T21:31:30.843

除了使用模式匹配

```
if [[ $var = *foo* ]]; then 
```

您还可以使用正则表达式：

```
if [[ $var =~ foo ]]; then  # Successfully match anything with "foo" as a substring 
```

该`nocasematch`选项也适用于正则表达式匹配。

# javascript - 如何让链接彼此独立？

> ID：14820899
> 
> 赞同：0
> 
> 时间：2013-02-11T21:09:12.163
> 
> 标签：javascript, jquery

我的代码目前允许在引文下单击的任何链接打开一个新页面。我试图从执行此功能中排除“更多...”链接，因为这些链接用于将更多链接添加到当前页面。有没有办法做到这一点？

这是[jsfiddle](http://jsfiddle.net/FYyr9/)

这是我的 javascript

```
$(document).ready(function ($) {
  var url = 'https://www.sciencebase.gov/catalog/item/504216b6e4b04b508bfd333b?
format=jsonp&fields=relationships,title,body,contacts';
  $.ajax({
    type: 'GET',
    url: url,
    jsonpCallback: 'getSBJSON',
    contentType: "application/json",
    dataType: 'jsonp',
    success: function (json) {
      var citeCount = 0;
      var piCount = 0;
      $('#project').append('<li><b><a href="' + url + '">' + json.title + '</a> - </b>' + json.body + '</li>');
      $('#project a').on('click', function (e) {
        e.preventDefault();
        if (citeCount == 1) {
          return;
        }
        $.ajax({
          type: 'GET',
          url: 'https://www.sciencebase.gov/catalog/itemLink    
/504216b6e4b04b508bfd333b?format=jsonp',
          jsonpCallback: 'getSBJSON',
          contentType: "application/json",
          dataType: 'jsonp',
          success: function (json) {
            // Loop function for each section (10 citations per section)
            var loopSection = function (start, stop) {
              // Http setup for all links
              var linkBase = "http://www.sciencebase.gov/catalog/item/";
              // Link for citation information
              var link = "";
              for (var j = start; j < stop; j++) {
                // Create a link using the realtedItemId
                link = linkBase + json[j].relatedItemId;
                // Title links                                 
                var $anchor = $("<a>", {
                  href: link,
                  id: "id" + j,
                  text: json[j].title
                });
                // .parent() will get the <li> that was just created and append to 
                //the first citation element
                $anchor.appendTo("<li>").parent().appendTo("#citations");
              }
            }
            var itemCount = json.length;
            var numSections = Math.floor((itemCount / 10));
            var moreLinks = $('<a href="" id="nextLink">More...</a>');
            var loopCount = 1;
            loopSection(0, 10);
            $('#citations').append(moreLinks);
            $(moreLinks).on('click', function (e) {
              e.preventDefault();
              if (numSections > 1) {
                loopSection((loopCount * 10), ((loopCount + 1) * 10));
                $('#citations').append(moreLinks);
                numSections -= 1;
                loopCount++;
              } else if (numSections <= 1) {
                $("#nextLink").closest('a').remove();
                loopSection((loopCount * 10), json.length);
              }
            });
          },
          error: function (e) {
            console.log(e.message);
          }
        }); // END Second .ajax call
        $('#project').on('click', function (e) {
          e.preventDefault();
          if (piCount == 1) {
            return;
          }
          for (var i = 1; i < json.contacts.length; i++) {
            $('#piHeading').append('<ul>' + "Name: " + json.contacts[i].name + ', ' + "Email: " + json.contacts[i].email + ', ' + "Phone: " + json.contacts[i].phone + '</ul>');
          }
          piCount++;
        });
        citeCount++;
      }); // END Project link click event
      $('#citations').on('click', function (e) {
        e.preventDefault();
        window.open('CitationsInfo.html', '_self');
      });
    },
    error: function (e) {
      console.log(e.message);
    }
  }); // END First .ajax call              
}); // END Doc.ready 
```

这是我的html，

```
<!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
<script src="MainPage4.js"></script>
<script src="Citations.js"></script>
</head>
<body>

<h2>Project</h2>

<div class='wrapper'>
<ul id='project'></ul>
</div>

<h3>Citations</h3>

<div class='wrapper'>  
<ul id='citations'></ul>   
</div>

<h3>Principal Investigators</h3>

<div class='wrapper'>    
<ul id='piHeading'></ul>
</div>

</body>
</html> 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:22:35.823

如果您更改处理容器的全局单击事件的代码部分，`#citations`以包括过滤掉目标为 的单击的逻辑`#nextLink`，它应该做您想做的事情。

```
$('#citations').on('click', function (e) {
    e.preventDefault();
    if (!$(e.target).is($('#nextLink'))) {
        window.open('CitationsInfo.html', '_self');
    }
}); 
```

完全删除上述部分还允许“更多...”链接正常工作，同时仍保持各个链接的功能。引文点击事件掩盖了其他行为。

[jsfiddle](http://jsfiddle.net/P6z9R/)

# c - 单链表的显示

> ID：14820904
> 
> 赞同：0
> 
> 时间：2013-02-11T21:09:45.597
> 
> 标签：c

我正在尝试创建一个单链表。我创建了五个节点并用整数值初始化它们。但是当我打印链接列表时，我什么也得不到。

```
typedef struct node {
    int value;
    struct node* nextPtr;
 } node;

 node *nodePtr;
 node *head;

void initializeLinkedList() {
    static unsigned int i;

    nodePtr = (node*)malloc(sizeof(node));
    i = 0;

    nodePtr->nextPtr = (node*)malloc(sizeof(node)); 
    nodePtr->value = i;
    head = nodePtr;
    for (i = 1; i < 5; i++) {
        nodePtr->nextPtr = (node*)malloc(sizeof(node)); 
        nodePtr->value = i;
     }                
    nodePtr->nextPtr = NULL;
}

 void printLinkedList() {
    static unsigned int i;

    i = 0;   
    nodePtr = head;
    while (nodePtr->nextPtr != NULL) {
        printf("Value of ptr is %p \n", nodePtr->nextPtr);
        printf("Value is %d \n", nodePtr->value);
    }
} 
```

我想我没有正确设置指针。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T21:13:50.690

这：

```
for (i = 1; i < 5; i++) {
    nodePtr->nextPtr = malloc(sizeof(node)); 
    nodePtr->value = i;
} 
```

分配一个节点四次，然后它总是覆盖相同的元素，因为你不更新`nodePtr`. 它应该是

```
for (i = 1; i < 5; i++) {
    nodePtr->nextPtr = malloc(sizeof(node)); 
    nodePtr->value = i;
    nodePtr = nodePtr->nextPtr;
} 
```

相反（不仅仅是在这种特殊情况下——在你的代码中到处寻找这个并修复它，否则你最终会得到所有那些或多或少有趣的未定义行为的结果......）。

此外，在 中`printLinkedList()`，

```
while(nodePtr->nextPtr != NULL) 
```

应该

```
while(nodePtr != NULL) 
```

否则你将`NULL`在最后一次迭代时取消引用（和 BANG！）

# r - 汇总多个小计？

> ID：14820905
> 
> 赞同：3
> 
> 时间：2013-02-11T21:09:53.670
> 
> 标签：r, reshape2

有没有办法用 聚合多个小计`reshape2`？例如对于空气质量数据集

```
require(reshape2)
require(plyr)
names(airquality) <- tolower(names(airquality))
aqm <- melt(airquality, id=c("month", "day"), na.rm=TRUE)
aqm <- subset(aqm, month %in% 5:6 & day %in% 1:7) 
```

我可以为每个月制作一个小计列，其中包含该月内所有变量的平均值：

```
dcast(aqm, day ~ month+variable, mean, margins = "variable")
  day 5_ozone 5_solar.r 5_wind 5_temp 5_(all) 6_ozone 6_solar.r
1   1      41       190    7.4     67  76.350     NaN       286
2   2      36       118    8.0     72  58.500     NaN       287
3   3      12       149   12.6     74  61.900     NaN       242
4   4      18       313   11.5     62 101.125     NaN       186
5   5     NaN       NaN   14.3     56  35.150     NaN       220
6   6      28       NaN   14.9     66  36.300     NaN       264
7   7      23       299    8.6     65  98.900      29       127
  6_wind 6_temp   6_(all)
1    8.6     78 124.20000
2    9.7     74 123.56667
3   16.1     67 108.36667
4    9.2     84  93.06667
5    8.6     85 104.53333
6   14.3     79 119.10000
7    9.7     82  61.92500 
```

我还可以为每个变量创建一个小计列，其中包含该变量内所有月份的平均值：

```
dcast(aqm, day ~ variable+month, mean, margins = "month")
  day ozone_5 ozone_6 ozone_(all) solar.r_5 solar.r_6 solar.r_(all)
1   1      41     NaN          41       190       286         238.0
2   2      36     NaN          36       118       287         202.5
3   3      12     NaN          12       149       242         195.5
4   4      18     NaN          18       313       186         249.5
5   5     NaN     NaN         NaN       NaN       220         220.0
6   6      28     NaN          28       NaN       264         264.0
7   7      23      29          26       299       127         213.0
  wind_5 wind_6 wind_(all) temp_5 temp_6 temp_(all)
1    7.4    8.6       8.00     67     78       72.5
2    8.0    9.7       8.85     72     74       73.0
3   12.6   16.1      14.35     74     67       70.5
4   11.5    9.2      10.35     62     84       73.0
5   14.3    8.6      11.45     56     85       70.5
6   14.9   14.3      14.60     66     79       72.5
7    8.6    9.7       9.15     65     82       73.5 
```

有没有办法告诉`reshape2`在一个命令中计算两组小计？此命令很接近，添加总计，但省略了每月小计：

```
dcast(aqm, day ~ variable+month, mean, margins = c("variable", "month")) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:44:47.990

如果我的问题正确，您可以使用

```
acast(aqm, day ~ variable ~ month, mean, margins = c("variable", "month"))[,,'(all)'] 
```

为`acast`您提供每个月每个变量的每一天的摘要。总聚合“切片”([,,'(all)']) 每天都有一行，每个变量都有一个列（所有月份的平均值）和一个 '(all)' 列每天平均，在所有整个月的变量。

这是你需要的吗？

# r - ggplot 轴限制（离散/连续数据问题）

> ID：14820908
> 
> 赞同：0
> 
> 时间：2013-02-11T21:10:12.843
> 
> 标签：r, ggplot2

我正在尝试生成一个 ggplot 图并且很难让轴正确。我希望将它们从 ggplot 最初给出的范围扩大。这是我的数据：

```
Date <- c("07/12/2012 05:00:00", "07/12/2012 06:00:00", "07/12/2012 07:00:00",
      "07/12/2012 08:00:00","07/12/2012 10:00:00","07/12/2012 11:00:00")
Date <- strptime(Date, "%d/%m/%Y %H:%M")
Counts <- c("0","3","10","6","5","4")
Counts <- as.numeric(Counts)
df1 <- data.frame(Date,Counts,stringsAsFactors = FALSE)

library(ggplot2)
g = ggplot(df1, aes(x=Date, y=Counts)) + geom_line(aes(group = 1))
g + scale_y_continuous(limits = c(0, 15))
g + scale_x_continuous(limits = c(04:00, 13:00))
g 
```

我认为问题在于连续数据与离散数据（特别是如何处理 Date 变量），但我正在努力修复代码。任何帮助将不胜感激。

# matlab - 在 Matlab 中将整数和字符串的混合矩阵写入 .csv

> ID：14820910
> 
> 赞同：4
> 
> 时间：2013-02-11T21:10:20.827
> 
> 标签：matlab, csv

也许这个问题之前已经回答过，但我似乎找不到任何好的文档。所以我的问题如下：

假设我在 Matlab 中有两个长度相同的向量

```
x = [1;2;3];
and
y = ['A';'B';'C']; 
```

基本上我想创建矩阵`{x,y}`（即 3 行，2 列），然后将其写入 .csv 文件。所以最后我想看到一个 .csv 文件

```
1,A
2,B
3,C 
```

这只是一个模拟示例，但实际上我有 75 列，每列都是字符串或数字列。任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T22:04:40.320

其实这里是解决方案

[http://www.mathworks.com/help/matlab/import_export/write-to-delimited-data-files.html#br2ypq2-1](http://www.mathworks.com/help/matlab/import_export/write-to-delimited-data-files.html#br2ypq2-1)

这工作起来要简单得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T21:41:37.463

如果您将数据分类为合适的`cell`

```
 A = cell(3,2);
 A{1,1} = 1;
 A{2,1} = 2;
 A{3,1} = 3;
 A{1,2} = 'A';
 A{2,2} = 'B';
 A{3,2} = 'C'; 
```

然后你可以调用这个函数：

```
cell2csv(filename,A)

function cell2csv(filename,cellArray,delimiter)
% Writes cell array content into a *.csv file.
% 
% CELL2CSV(filename,cellArray,delimiter)
%
% filename      = Name of the file to save. [ i.e. 'text.csv' ]
% cellarray    = Name of the Cell Array where the data is in
% delimiter = seperating sign, normally:',' (default)
%
% by Sylvain Fiedler, KA, 2004
% modified by Rob Kohr, Rutgers, 2005 - changed to english and fixed delimiter
if nargin<3
    delimiter = ',';
end

datei = fopen(filename,'w');
for z=1:size(cellArray,1)
    for s=1:size(cellArray,2)

        var = eval(['cellArray{z,s}']);

        if size(var,1) == 0
            var = '';
        end

        if isnumeric(var) == 1
            var = num2str(var);
        end

        fprintf(datei,var);

        if s ~= size(cellArray,2)
            fprintf(datei,[delimiter]);
        end
    end
    fprintf(datei,'\n');
end
fclose(datei); 
```

# wpf - 将用户数据绑定到 WPF 中的菜单项的好方法

> ID：14820911
> 
> 赞同：0
> 
> 时间：2013-02-11T21:10:22.417
> 
> 标签：wpf, data-binding, binding

我有一个`UserData`包含用户设置和其他信息的类实例。由于它具有针对应用程序不同部分的设置，因此应该可以在任何地方轻松访问。出于这个原因，它是`App`类的静态属性。

我需要一个菜单​​，其中一些可检查的项目是双向绑定到某些（`Boolean`显然）设置的，以便菜单项始终显示设置是否打开/关闭，并可用于切换它。

由于该`UserData`实例是一个静态属性，因此它本身不适用于双向绑定。

解决这种情况的最佳方法是什么？有没有一种方法不需要实例化一次性对象或单独为每个设置手动创建依赖属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:59:31.910

您不能直接绑定到静态属性本身，但您可以使用静态属性的值作为绑定源，然后像绑定任何其他对象实例一样绑定到它的属性。您的 Binding 会有一些变化，但如果您想在同一个对象上执行一堆属性，您可以将静态对象用作 DataContext（这是单向），然后在 MenuItems 上进行常规绑定：

```
<Menu DataContext="{Binding Source={x:Static App.UserData}}">
    <MenuItem Header="1" IsChecked="{Binding SomeUserProperty}"/>
    <MenuItem Header="2" IsChecked="{Binding Property2}"/>
</Menu> 
```

# email - 来自数据库的 SMS 和电子邮件队列

> ID：14820915
> 
> 赞同：0
> 
> 时间：2013-02-11T21:10:30.020
> 
> 标签：email, amazon-web-services, rds

我只是想讨论一下我所面临的情况。

我想向用户发送电子邮件 - 很多电子邮件 - 但如果我在应用程序运行时发送它们，AWS SDK 的电子邮件速度很慢 - 糟糕的用户体验 - 至少对我的应用程序来说。

所以我打算做的是在数据库中输入数据（电子邮件地址，要发送的内容，0）并启动一个 cron 作业来读取表并开始发送电子邮件——一旦它发送了电子邮件——它将数据库行标记为1.

我在某处读到了错误的做法，并使数据库服务器过载。

是的，我会使用智能 crons，这样就不会有 2 个 crons 重叠，或者为偶数和奇数等设置一个 crons。我还在寻找第 3 方替代方案，例如[http://www.iron.io/](http://www.iron.io/)用于 crons。

有人可以分享他们在类似情况下的经验吗？我只想使用智能解决方案，而不仅仅是在数据库上投入大量资源并在交易上花费大量资金......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:29:27.663

我必须做类似的事情，并按照查尔斯·恩格尔克的建议做了——我使用了 SQS。

我通过将整个消息内容放入 SQS 消息中完全消除了数据库。您[在 SQS 消息中被限制为 64k](http://aws.amazon.com/sqs/faqs/#How_do_I_configure_SQS_to_support_larger_message_sizes)，所以只要这不是问题，这种方法是可能的。

这是将消息排队的示例代码：

```
package com.softwareconfidence.bsp.sending;

import com.amazonaws.services.sqs.AmazonSQS;
import com.amazonaws.services.sqs.model.SendMessageRequest;
import com.googlecode.funclate.json.Json;

import java.util.HashMap;
import java.util.Map;

public class EmailQueuer  {
    private final AmazonSQS sqs;
    private final String sendQueueUrl;

    public EmailQueuer(AmazonSQS sqs,String sendQueueUrl) {
        this.sqs = sqs;
        this.sendQueueUrl = sendQueueUrl;
    }

    public void queue() {
        Map<String,String> emailModel = new HashMap<String, String>(){{
            put("from","me@me.com");
            put("to","you@you.com");
            put("cc","her@them.com");
            put("subject","Greetings");
            put("body","Hello World");
        }}; 
        sqs.sendMessage(new SendMessageRequest(sendQueueUrl, Json.toJson(emailModel)));
    }
} 
```

然后在您的应用程序中，您需要有一个执行器服务来轮询队列并处理消息：

```
new ScheduledThreadPoolExecutor(1).scheduleAtFixedRate(sendEmails(), 0, 1, MINUTES) 
```

当应用程序退出时，您需要确保在此执行程序上调用 shutdown()。无论如何，这一行将每分钟发送一次电子邮件，其中 sendEmails() 返回此 Runnable 类的一个实例：

```
package com.softwareconfidence.bsp.standalone.sending;

import com.amazonaws.services.simpleemail.AmazonSimpleEmailService;
import com.amazonaws.services.simpleemail.model.*;
import com.amazonaws.services.sqs.AmazonSQS;
import com.amazonaws.services.sqs.model.DeleteMessageRequest;
import com.amazonaws.services.sqs.model.ReceiveMessageRequest;
import com.amazonaws.services.sqs.model.ReceiveMessageResult;
import com.amazonaws.services.sqs.model.SendMessageRequest;
import com.googlecode.funclate.json.Json;

import java.io.PrintWriter;
import java.io.StringWriter;
import java.util.List;
import java.util.Map;

public class FromSqsEmailer implements Runnable {
    private final AmazonSQS sqs;
    private final String sendQueueUrl;
    private final String deadLetterQueueUrl;
    private final AmazonSimpleEmailService emailService;

    public FromSqsEmailer(AmazonSimpleEmailService emailService, String deadLetterQueueUrl, String sendQueueUrl, AmazonSQS sqs) {
        this.emailService = emailService;
        this.deadLetterQueueUrl = deadLetterQueueUrl;
        this.sendQueueUrl = sendQueueUrl;
        this.sqs = sqs;
    }

    public void run() {
        int batchSize = 10;
        int numberHandled;
        do {
            ReceiveMessageResult receiveMessageResult =
                    sqs.receiveMessage(new ReceiveMessageRequest(sendQueueUrl).withMaxNumberOfMessages(batchSize));
            final List<com.amazonaws.services.sqs.model.Message> toSend = receiveMessageResult.getMessages();
            for (com.amazonaws.services.sqs.model.Message message : toSend) {
                SendEmailResult sendResult = sendMyEmail(Json.parse(message.getBody()));
                if(sendResult != null) {
                    sqs.deleteMessage(new DeleteMessageRequest(sendQueueUrl, message.getReceiptHandle()));
                }
            }
            numberHandled = toSend.size();
        } while (numberHandled > 0);
    }

    private SendEmailResult sendMyEmail(Map<String, Object> emailModel) {
        Destination to = new Destination()
                .withToAddresses(get("to", emailModel))
                .withCcAddresses(get("cc", emailModel));
        try {
            return emailService.sendEmail(new SendEmailRequest(get("from", emailModel), to, body(emailModel)));
        } catch (Exception e){
            StringWriter stackTrace = new StringWriter();
            e.printStackTrace(new PrintWriter(stackTrace));
            sqs.sendMessage(new SendMessageRequest(deadLetterQueueUrl, "while sending email " + stackTrace));
        }
        return null;
    }

    private String get(String propertyName, Map<String, Object> emailModel) {
        return emailModel.get(propertyName).toString();
    }

    private Message body(Map<String, Object> emailModel) {
        Message message = new Message().withSubject(new Content(get("subject", emailModel)));
        Body body = new Body().withText(new Content(get("body", emailModel)));
        message.setBody(body);
        return message;
    }
} 
```

如果您使用的是数据库，那么这种方法的一个缩减是电子邮件发送步骤是一个 HTTP 调用。如果您有一个在此 HTTP 调用后回滚的数据库事务，则您的业务流程将被撤消，但电子邮件将被发送。

深思熟虑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T02:35:12.403

感谢迈克的详细回复。我最终为我的应用程序实现了一个 REST API，它具有安全的用户名+密码+密钥访问权限，并从 3rd Party Service Iron.io 运行它

```
www.example.com/rest/messages/format/json 
```

它在一个数组中迭代并发送收集状态的消息 - 然后将其发回

```
www.example.com/rest/messagesposted 
```

> 我之所以采用这种方法，是因为我必须将消息安排为 90 天以上的间隔，而队列只保留 14 天的消息。

你侦察什么？

# ssis - SSIS 多步 OLE DB 操作生成错误

> ID：14820917
> 
> 赞同：0
> 
> 时间：2013-02-11T21:10:34.423
> 
> 标签：ssis, oledbconnection

好吧，我不怎么解释这个问题，我有两个需要合并并发送到 oledb 目标的 OLE DB 连接，源 oledb 列是：

tbl 客户总数：

```
RUT_CLIE numeric(18,0), 
DV(string(1)), CLI_NOM(string(40)), 
CLI_CAT_SUB(string(3)), 
CLI_STA(string(5)), 
CLI_SUB_STA(string(5)), 
**COD_CTR (numeric(18,0))  <- JOIN KEY**, 
nom_ejec(string(50)),
nom_suc(string(100)), 
nom_suc_gpo(string(100)), 
zonal(string(50)), 
id_cargo(string(50)), 
CLI_GRP_NOM(string(25)),  
CANAL(string(50)), 
ACTIVO(int), 
VINCULADO(int), 
VINCULADO_TRX(int), 
CTACTE(int), 
CLI_CAT(string(5)) 
```

tbl 卡特拉 1 1:

```
cod_cartera (numeric(18,0))  <- JOIN KEY
cargo(string(100)),
nom_suc_gpo(string(100)) 
```

目的地：

![http://i.stack.imgur.com/4NK91.jpg](../Images/b6ddece41f9b00261c2509eeb788c754.png)

映射：

![http://i.stack.imgur.com/eR6Oa.jpg](../Images/8c86a5f9baf645dd92aef743236b6179.png)

我需要将许多列转换为 nvarchar(255)，（我认为这是问题所在），但是当我运行程序时，会发生这种情况：

![http://i.stack.imgur.com/zUASR.jpg](../Images/f452ed1a5616fc23be617079936ecfd3.png)

错误信息：

> [OLE DB 目标 [5679]] 错误：SSIS 错误代码 DTS_E_OLEDBERROR。发生 OLE DB 错误。错误代码：0x80040E21。OLE DB 记录可用。来源：“Microsoft SQL Server Native Client 10.0” Hresult：0x80040E21 描述：“多步 OLE DB 操作产生错误。检查每个 OLE DB 状态值（如果可用）。没有完成任何工作。”。
> 
> [OLE DB 目标 [5679]] 错误：SSIS 错误代码 DTS_E_INDUCEDTRANSFORMFAILUREONERROR。“输入“OLE DB 目标输入”(5692)”失败，因为发生错误代码 0xC020907B，并且“输入“OLE DB 目标输入”(5692)”上的错误行处置指定错误失败。指定组件的指定对象发生错误。在此之前可能会发布错误消息，其中包含有关失败的更多信息。
> 
> [SSIS.Pipeline] 错误：SSIS 错误代码 DTS_E_PROCESSINPUTFAILED。在处理输入“OLE DB 目标输入”(5692) 时，组件“OLE DB 目标”(5679) 上的 ProcessInput 方法失败，错误代码为 0xC0209029。已识别的组件从 ProcessInput 方法返回错误。该错误是特定于组件的，但该错误是致命的，将导致数据流任务停止运行。在此之前可能会发布错误消息，其中包含有关失败的更多信息。
> 
> [SSIS.Pipeline] 错误：SSIS 错误代码 DTS_E_PROCESSINPUTFAILED。处理输入“排序输入”(4899) 时，组件“排序”(4898) 上的 ProcessInput 方法失败，错误代码为 0xC0047020。已识别的组件从 ProcessInput 方法返回错误。该错误是特定于组件的，但该错误是致命的，将导致数据流任务停止运行。在此之前可能会发布错误消息，其中包含有关失败的更多信息。

警告：

> [SSIS.Pipeline] 警告：警告：无法打开全局共享内存以与性能 DLL 进行通信；数据流性能计数器不可用。要解决此问题，请以管理员身份或在系统控制台上运行此软件包。

请帮忙，我现在真的很沮丧和压力，所以我无法更好地解释自己，如果您不明白某些事情，请询问，我会努力使它变得更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:46:22.920

如果没有看到 OLE DB 目标组件中的实际列映射，我无法确定，但`COD_CTR`定义为 NUMERIC(18,0)`tbl clientes totales`和 NVARCHAR(4)的事实`RUTERO_FICHA_RED`看起来非常可疑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:07:28.910

Edmund Schweppe 给了我这个想法，问题是数据转换，我必须将所有元数据转换到同一个 oledb 目的地，像这样： [![在此处输入图像描述](../Images/718e44242ab38a0f0c47434bf0c8916b.png)](https://i.stack.imgur.com/i2BCt.jpg)

（与 dbo.RUTERO_FICHA_RED 表目标相同的数据类型）。

谢谢您的帮助！

# java - 当方法使用注释退出时是否可以执行操作？

> ID：14820922
> 
> 赞同：1
> 
> 时间：2013-02-11T21:10:45.543
> 
> 标签：java, annotations, spring-annotations

是否可以在方法结束时执行操作，换句话说，当函数控制使用注释返回给调用者（由于异常或正常返回）时？

例子：

```
@DoTaskAtMethodReturn
public void foo() {
.
.
. 
Method foo Tasks  
.
.
.

return;  -------->  Background task done by annotation hook here before returning to caller.
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:45:38.070

您的问题被标记为*Spring-Annotations*，因此您显然正在使用 Spring。有几个步骤可以用 Spring 做你想做的事情：

[在您的配置中启用 AspectJ/AOP 支持](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/aop.html#aop-aspectj-support)：

```
<aop:aspectj-autoproxy/> 
```

[编写一个使用切入点](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/aop.html#aop-ataspectj-advice-params-passing)的方面（参见[Spring AOP vs AspectJ](https://stackoverflow.com/questions/1606559/spring-aop-vs-aspectj)）：`@After`[`@annotation`](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/aop.html#aop-ataspectj-advice-params-passing)

```
@Aspect
public class TaskDoer {

  @After("@annotation(doTaskAnnotation)")
  // or @AfterReturning or @AfterThrowing
  public void doSomething(DoTaskAtMethodReturn doTaskAnnotation) throws Throwable {
    // do what you want to do
    // if you want access to the source, then add a 
    // parameter ProceedingJoinPoint as the first parameter
  }
} 
```

请注意以下限制：

*   除非您启用 AspectJ 编译时编织或使用 javaagent 参数，否则必须通过 Spring 创建包含 foo 的对象，即您必须从应用程序上下文中检索它。
*   如果没有其他依赖项，您只能将方面应用于通过接口声明的方法，即 foo() 必须是接口的一部分。如果您使用 cglib 作为依赖项，那么您还可以将方面应用于未通过接口公开的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T21:16:44.600

是的，但不仅仅是注释。

您必须编写自己的注释处理器并使用代码注入。

[如何编写 Java 注释处理器？](https://stackoverflow.com/questions/11385628/how-to-write-a-java-annotation-processor)

[什么是 Java 字节码注入？](https://stackoverflow.com/questions/3470949/what-is-java-bytecode-injection)

[Java字节码注入](https://stackoverflow.com/questions/8493056/java-byte-code-injection)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T21:22:00.513

简短的回答是“是的，有可能”。这是所谓的面向方面编程 (AOP) 的一部分。基于注解的 AOP 的一个常见用途是[@Transactional](https://stackoverflow.com/questions/1079114/spring-transactional-annotation-best-practice)，用于将所有数据库活动包装在一个事务中。

你如何处理这取决于你正在构建什么，你正在使用什么（如果有的话）框架等。如果你使用 Spring 进行依赖注入，这个[SO answer](https://stackoverflow.com/a/4836219/337735)有一个很好的例子，或者你可以查看[Spring 文档](http://static.springsource.org/spring/docs/2.5.5/reference/aop.html). 另一种选择是使用 Guice（我的偏好），它允许[简单的 AOP](http://code.google.com/p/google-guice/wiki/AOP)。

# java - 从具有范围列的表中获取行

> ID：14820924
> 
> 赞同：0
> 
> 时间：2013-02-11T21:10:57.580
> 
> 标签：java, guava

如果我有一个像这样的大番石榴表：

```
Table<Foo, Range<Long>, Bar> myTable; 
```

而且我有一个 long 值和一个 Foo 对象 - 我想获取 Bar 对象，它的 Range 包含我的 long。

现在，我能做的最好的事情是在我需要的 Range 中使用 Foo 键来获取所有 Bar：

```
Map<Range<Long>, Bar> row = cache.row(myFoo);
for (Range<Long> range : row.keySet()) {
            if (range.contains(myLong))  {
                return Arrays.asList(sample.get(myLong));
            }
        } 
```

如您所见，我正在从表中获取行，并遍历范围以寻找我的一个 Bar，其中包含 myLong 的封闭范围。

有没有更好的方法可以在没有 for 循环的情况下找到我的对象？以比该循环更快的方式从该 Ranges 列获取 RangeMap？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:19:02.487

`Map<Foo, RangeMap<Long, Bar>>`听起来在这里非常合适。它不会像 API 那样好`Table`，但它是在少于线性时间的时间内执行该操作的唯一方法。

# c# - ListBox 不使用 Grid.Column 中的所有可用空间 - WPF

> ID：14820941
> 
> 赞同：2
> 
> 时间：2013-02-11T21:12:41.653
> 
> 标签：c#, wpf, .net-4.0, listbox, grid-layout

我有一个已分配给 Grid.Column 0 的 ListBox 控件，该控件的宽度定义为“*”，但是在渲染时有相当大的空间未使用。

我还注意到 ListBox 控件本身周围有各种各样的边框，但是我没有在标记中添加一个。

我的用户界面（以红色标记的关注领域）：

![在此处输入图像描述](../Images/2f008830ff4b38a2669faaf3e2b0b1cc.png)

我的标记：

```
<Window.Resources>
        <DataTemplate x:Key="GameImagesTemplate" >
            <StackPanel Orientation="Vertical">
                <Image Source="{Binding FileInfo.FullName}" Margin="8,8,8,8" Height="70" Width="70" />
                <Label Content="{Binding Name}" Width="70" />
            </StackPanel>
        </DataTemplate>

        <DataTemplate x:Key="GameTemplate">
            <StackPanel>
                <Label Content="{Binding Name}" Background="Gray" FontSize="16" />
                <ListBox x:Name="imageContent" ItemsSource="{Binding FileList}" ItemTemplate="{StaticResource GameImagesTemplate}" ScrollViewer.HorizontalScrollBarVisibility="Disabled" >
                    <ListBox.ItemsPanel>
                        <ItemsPanelTemplate>
                            <WrapPanel Orientation="Horizontal" IsItemsHost="True" />
                        </ItemsPanelTemplate>
                    </ListBox.ItemsPanel>
                </ListBox>
            </StackPanel>
        </DataTemplate>
    </Window.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>

        <ListBox x:Name="ContentList" ItemTemplate="{StaticResource GameTemplate}" Grid.Column="0" ScrollViewer.HorizontalScrollBarVisibility="Disabled" />

        <StackPanel Grid.Column="1" Background="DarkGray">
            <Button Click="OnLoad">_Load</Button>
            <Button Click="OnSave">_Save</Button>
            <Button Click="OnAdd">_Add</Button>
            <Button Click="OnDelete">_Delete</Button>
        </StackPanel>
    </Grid> 
```

我将如何解决提出的两个问题。它是 ListBox 控件的默认行为吗？

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T21:53:11.077

是的，这是默认行为。

在对齐的情况下，看起来你`WrapPanel`每个都有一个，`ListBoxItem`它没有足够的空间将另一个项目放在第 1 行。由于默认`HorizontalContentAlignment`设置为左，剩余空间未使用。`ListBox`默认情况下，此设置又绑定到`ListBoxItem`. 设置`HorizontalContentAlignment="Stretch"`你`ListBox`应该解决这个问题。

外边框来自 和 的默认`BorderBrush`设置`BorderThickness`。设置`BorderThickness="0"`将完全摆脱它。

还有一些其他默认`Padding`设置会在默认样式和模板中添加一些间距。如果您想了解更多内容`ListBox`，请在 Blend 中添加一个项目并复制其默认值`Template`并`ItemContainerStyle`查看 XAML。`ItemsControl`在不需要选择行为的情况下也可以考虑使用基础，因为它没有任何这些类型的默认设置。

# python - 如何从 python 子进程运行 vcvarsall.bat

> ID：14820944
> 
> 赞同：1
> 
> 时间：2013-02-11T21:12:47.450
> 
> 标签：python, subprocess

我知道如何使用 Popen 运行一个 .bat 文件。在这种情况下，我需要首先运行 vcvarsall.bat 并初始化编译器工具，然后在同一环境中运行将实际使用编译器工具的第三方 .bat。这样做的最佳方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T21:18:23.263

这应该有效：

```
subprocess.Popen('"vcvarsall.bat" x86&&"invoke_compiler.bat"', shell=True) 
```

# html - 如何将 LI 的高度固定为与其他 LI 一样高

> ID：14820945
> 
> 赞同：1
> 
> 时间：2013-02-11T21:12:48.680
> 
> 标签：html, css

我有一个这样的无序列表：

```
 <ul style="float:left;">
     <li class="book">
     <div>title sdfdfdsfdsfds sdfsdfsdf dsfsdfsdf fdgsdfsdf</div>
    </li>
    <li class="book">
    <div>title</div>
    </li>
</ul> 
```

li 的高度应该部分取决于 li(div height) 的内容。但是，如果内部 DIV 的高度变得高于另一个 li 内的另一个 div，则所有 div 应该假定与较大 div 的尺寸相同。

我尝试过：

```
div { height: auto; min-height: 100%; } 
```

并设置 li

```
float: left;display: inline-block; height: 100px; 
```

但没有任何改变。如果第一个 DIV 的内容导致 div 调整大小，则另一个 DIV 不会假定新的 100% 高度。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:23:26.270

在 CSS 中，要根据内容自动将事物调整到相同的高度，它们必须是**表格行**的一部分。尝试这个：

```
<ul class="booklist">
  <li class="book">
    <div>title <br>sdfdfdsfdsfds <br>sdfsdfsdf dsfsdfsdf fdgsdfsdf</div>
  </li>
  <li class="book">
    <div>title</div>
  </li>
</ul> 
```

```
.booklist { display: table; float: left; }
.book { display: table-cell; border: 1px solid gray; } 
```

请注意，与一组内联块项目不同，表格行不会自动换行到多行，因此如果这是您的目标，您无法使用 CSS 完成此操作，并且必须添加一些 JavaScript，例如调整高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T21:26:34.020

也许我不理解你，但这个：

> 所有 div 都应该与较大的 div 具有相同的尺寸。

无论如何都会发生。

如果您试图保持 li 元素之间的某种一致性，请尝试以下操作：

```
li {float: left; width: 100px; border: 1px solid red; overflow: hidden; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T21:21:08.477

尝试以下操作（将 li 元素放在 div 元素中）：

```
<ul style="float:left;">
    <li class="book" >
       <div style="display: inline-block; height: 100px;">
         title sdfdfdsfdsfds sdfsdfsdf dsfsdfsdf fdgsdfsdf
       </div>
    </li>    
    <li class="book" >
      <div style="display: inline-block; height: 100px;">
        title
      </div>
    </li>  
</ul> 
```

免责声明：为了便于参考，这里有内联样式:)

# sql-server-2008-r2 - VSDBCMD 无法启动 - 无法实例化 Sql100DatabaseSchemaProvider

> ID：14820949
> 
> 赞同：1
> 
> 时间：2013-02-11T21:13:10.367
> 
> 标签：sql-server-2008-r2, vsdbcmd

我已按照[http://msdn.microsoft.com/en-us/library/dd193258(v=vs.100).aspx上的说明进行操作](http://msdn.microsoft.com/en-us/library/dd193258(v=vs.100).aspx)

我已将部署文件夹和其他 dll 复制到远程计算机并安装了 SQL Server 2008 管理对象。但是，当我尝试运行我的命令时（真实凭据被剥离）

```
vsdbcmd /a:Import /cs:"Data Source=mydb;Integrated Security=false;Pooling=False;Initial Catalog=dbname;User ID=sa;Password=password;" /model:today.dbschema 
```

我总是得到错误

```
The extension type Microsoft.Data.Schema.Sql.Sql100DatabaseSchemaProvider could not be instantiated. 
```

我四处搜寻，但没有看到任何指向这一点的东西。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:40:24.377

我发现了问题 - 服务器安装了 .NET 4.0 客户端配置文件。一旦我安装了完整的运行时，这个问题就消失了。

# html - 更改 Bootstrap 输入焦点蓝色发光

> ID：14820952
> 
> 赞同：228
> 
> 时间：2013-02-11T21:13:23.250
> 
> 标签：html, css, twitter-bootstrap

有谁知道如何更改 Bootstrap 的`input:focus`？单击`input`字段时出现的蓝色光芒？

* * *

## 回答 #1

> 赞同：258
> 
> 时间：2013-02-11T23:30:22.817

最后，我在 bootstrap.css 中更改了以下 css 条目

```
textarea:focus,
input[type="text"]:focus,
input[type="password"]:focus,
input[type="datetime"]:focus,
input[type="datetime-local"]:focus,
input[type="date"]:focus,
input[type="month"]:focus,
input[type="time"]:focus,
input[type="week"]:focus,
input[type="number"]:focus,
input[type="email"]:focus,
input[type="url"]:focus,
input[type="search"]:focus,
input[type="tel"]:focus,
input[type="color"]:focus,
.uneditable-input:focus {   
  border-color: rgba(126, 239, 104, 0.8);
  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.075) inset, 0 0 8px rgba(126, 239, 104, 0.6);
  outline: 0 none;
} 
```

* * *

## 回答 #2

> 赞同：197
> 
> 时间：2015-01-05T11:40:54.203

您可以使用`.form-control`选择器匹配所有输入。例如更改为红色：

```
.form-control:focus {
  border-color: #FF0000;
  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(255, 0, 0, 0.6);
} 
```

将其放入您的自定义 css 文件并在 bootstrap.css 之后加载。它将适用于所有输入，包括 textarea、select 等...

* * *

## 回答 #3

> 赞同：61
> 
> 时间：2013-09-06T17:13:54.310

如果您使用的是 Bootstrap 3.x，您现在可以使用新`@input-border-focus`变量更改颜色。

有关更多信息和警告，请参阅[提交](https://github.com/twbs/bootstrap/commit/73c048578dfce7c6d4e8c9d4fe6c6bd22b2ff9b2)。

在**_variables.scss 中**更新`@input-border-focus`。

要修改此发光的大小/其他部分，请修改**mixins/_forms.scss**

```
@mixin form-control-focus($color: $input-border-focus) {
  $color-rgba: rgba(red($color), green($color), blue($color), .6);
  &:focus {
    border-color: $color;
    outline: 0;
    @include box-shadow(inset 0 1px 1px rgba(0,0,0,.075), 0 0 4px $color-rgba);
  }
} 
```

* * *

## 回答 #4

> 赞同：59
> 
> 时间：2019-02-28T12:19:08.270

[![在此处输入图像描述](../Images/16d69dd7ec3ea7a2f6fe10a20fc40ef3.png)](https://i.stack.imgur.com/Hlftn.png) [![在此处输入图像描述](../Images/c447092694979a1dd626517ffc2d014d.png)](https://i.stack.imgur.com/xl4qt.png)

您可以通过以下方式修改`.form-control:focus` **颜色**而不改变引导样式：

## 快速解决

```
.form-control:focus {
        border-color: #28a745;
        box-shadow: 0 0 0 0.2rem rgba(40, 167, 69, 0.25);
    } 
```

## 完整解释

1.  找到您正在使用的 bootstrapCDN 版本。*例如对我来说现在是 4.3.1：[https ://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.css](https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.css)*
2.  搜索要修改的类。*例如`.form-control:focus`，将要修改的参数复制到 css 中。在这种情况下是`border-color`和`box-shadow`。*
3.  为`border-color`. *在这种情况下，我选择通过在步骤 1 中提到的 bootstrap.css 页面中搜索特定类**来选择引导程序用于他们的类的相同绿色。`.btn-success`*
4.  将您选择的颜色转换为 RGB 并将其添加到`box-shadow`参数中，而不更改引导程序用于透明度的第四个 RGBA 参数 (0.25)。

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2018-01-02T18:39:54.990

对于 Bootstrap v4.0.0 beta 版本，您需要将以下内容添加到覆盖 Bootstrap 的样式表中（在 CDN/本地链接之后添加到 bootstrap v4.0.0 beta 或添加`!important`到样式中：

```
.form-control:focus {
  border-color: #6265e4 !important;
  box-shadow: 0 0 5px rgba(98, 101, 228, 1) !important;
} 
```

将 box-shadow 上的边框颜色和 rgba 替换为您想要的任何颜色样式*。

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2018-04-12T07:53:02.717

在 Bootstrap 4 中，如果你自己编译 SASS，你可以更改以下变量来控制焦点阴影的样式：

```
$input-btn-focus-width:       .2rem !default;
$input-btn-focus-color:       rgba($component-active-bg, .25) !default;
$input-btn-focus-box-shadow:  0 0 0 $input-btn-focus-width $input-btn-focus-color !default; 
```

注意：从 Bootstrap 4.1 开始，`$input-btn-focus-color`和`$input-btn-focus-box-shadow`变量仅用于输入元素，而不用于按钮。按钮的焦点阴影硬编码为`box-shadow: 0 0 0 $btn-focus-width rgba($border, .5);`，因此您只能通过`$input-btn-focus-width`变量控制阴影宽度。

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2013-08-03T14:59:41.777

如果您希望 Chrome 显示平台默认的“黄色”轮廓，请执行以下更改。

```
textarea:focus, input[type="text"]:focus, input[type="password"]:focus, input[type="datetime"]:focus, input[type="datetime-local"]:focus, input[type="date"]:focus, input[type="month"]:focus, input[type="time"]:focus, input[type="week"]:focus, input[type="number"]:focus, input[type="email"]:focus, input[type="url"]:focus, input[type="search"]:focus, input[type="tel"]:focus, input[type="color"]:focus, .uneditable-    input:focus {
    border-color: none;
    box-shadow: none;
    -webkit-box-shadow: none;
    outline: -webkit-focus-ring-color auto 5px;
} 
```

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2015-05-22T13:16:52.587

要禁用蓝色发光（但您可以修改代码以更改颜色、大小等），请将其添加到您的 css：

```
.search-form input[type="search"] {  
    -webkit-box-shadow: none;
    outline: -webkit-focus-ring-color auto 0px;
} 
```

这是显示效果的屏幕截图：之前和之后： ![在此处输入图像描述](../Images/0ebb0272b57c4ea3b6457fcb51534d31.png) ![在此处输入图像描述](../Images/75ed51507b413fb512a776b906c3f090.png)

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2015-09-28T15:51:50.643

我登陆这个线程寻找完全禁用发光的方法。出于我的目的，许多答案过于复杂。为了简单的解决方案，我只需要一行 CSS，如下所示。

```
input, textarea, button {outline: none; } 
```

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2016-03-30T14:00:26.860

在 body 标签中添加一个 ID。在您自己的 Css（不是 bootstrap.css）中指向新的主体 ID 并设置您要覆盖的类或标记以及新属性。现在您可以随时更新引导程序而不会丢失您的更改。

**.html 文件：**

```
 <body id="bootstrap-overrides"> 
```

**css 文件：**

```
#bootstrap-overrides input[type="text"]:focus, input[type="password"]:focus, input[type="email"]:focus, input[type="url"]:focus, textarea:focus{
  border-color: red;
  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.075) inset, 0 0 8px rgba(126, 239, 104, 0.6);
  outline: 0 none;
} 
```

另请参阅：[覆盖引导 css 的最佳方法](https://stackoverflow.com/questions/20721248/best-way-to-override-bootstrap-css)

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2017-10-15T02:04:00.023

实际上，在 Bootstrap 4.0.0-Beta 中（截至 2017 年 10 月）输入元素没有被**input[type="text"]**引用，输入元素的所有 Bootstrap 4 属性实际上都是基于**表单**的。

所以它使用**.form-control:focus**样式。输入元素的“焦点”突出显示的适当代码如下：

```
.form-control:focus {
  color: #495057;
  background-color: #fff;
  border-color: #80bdff;
  outline: none;
} 
```

很容易实现，只需更改**边框颜色**属性。

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2020-11-10T07:19:06.807

简单的一个

要删除它：

```
.form-control, .btn {
    box-shadow: none !important;
    outline: none !important;
} 
```

改变它

```
.form-control, .btn {
    box-shadow: new-value !important;
    outline: new-value !important;
} 
```

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2020-05-08T11:22:01.030

如果您想完全移除阴影，请将该类添加`shadow-none`到您的输入元素中。

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2020-06-16T15:25:01.043

在上面[@wasinger 的回复的基础](https://stackoverflow.com/a/49790895/766301)上，在**Bootstrap 4.5**中，我不仅要覆盖颜色变量，还要覆盖`box-shadow`它本身。

```
$input-focus-width: .2rem !default;
$input-focus-color: rgba($YOUR_COLOR, .25) !default;
$input-focus-border-color: rgba($YOUR_COLOR, .5) !default;
$input-focus-box-shadow: 0 0 0 $input-focus-width $input-focus-color !default; 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2018-01-30T08:38:41.353

在 Bootstrap 3.3.7 中，您可以在定制器的 Forms 部分中更改 @input-border-focus 值： [![在此处输入图像描述](../Images/196e11b88cf3d85d1883300316fbe5b6.png)](https://i.stack.imgur.com/IyBKR.jpg)

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2020-04-20T11:01:21.267

用于焦点前的输入边框。您可以指定要使用的最喜欢的颜色和其他 css，如填充等

```
 .input {
    padding: 6px 190px 6px 15px;
    outline: #2a65ea auto 105px ;
} 
```

当我们专注于输入时。您可以指定您喜欢的颜色轮廓

```
 .input:focus{
    box-shadow: none;
    border-color: none;
    outline: lightgreen auto 5px ;
} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-01-29T01:13:41.597

为什么不直接使用？

```
 input:focus{
        outline-color : #7a0ac5;
    } 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-04-16T14:43:20.077

我无法用 CSS 解决这个问题。似乎 Boostrap 获得了最后的发言权，即使我在引导后通过 site.css 获得了发言权。无论如何，这对我有用。

```
$(document).ready(function () {
    var elements = document.getElementsByClassName("form-control");

    Array.from(elements).forEach(function () {
        this.addEventListener("click", cbChange, false);
    })

    });

function cbChange(event) {
    var ele = event.target;
    var obj = document.getElementById(ele.id);
    obj.style.borderColor = "lightgrey";
} 
```

后来我发现这可以在css中使用。显然只有表单控件

```
.form-control.focus, .form-control:focus {
    border-color: gainsboro;
} 
```

以下是来自 Chrome 开发者工具的前后截图。注意焦点打开和焦点关闭之间边框颜色的差异。附带说明，这不适用于按钮。带按钮。使用按钮，您必须将大纲属性更改为无。

[![在此处输入图像描述](../Images/d05ac9cf8869e67e19e2f324e86c4069.png)](https://i.stack.imgur.com/aQ64i.jpg)

[![在此处输入图像描述](../Images/90d16ddcb653d937a73697f0d420de4c.png)](https://i.stack.imgur.com/bnijw.jpg)

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-09-15T18:26:24.723

这将 100% 使用：

```
.form-control, .form-control:focus{
   box-shadow: 0 0 0 0 rgba(255, 255, 255, 0);
   border: rgba(255, 255, 255, 0);
} 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-07-28T11:40:31.653

这应该有助于删除它！

```
input[type = text] {
  border: none;
}

input[type = text]:focus {
  border: none;
  box-shadow: none;
 }
```

# jquery - append() 触发 ('click')

> ID：14820956
> 
> 赞同：0
> 
> 时间：2013-02-11T21:13:33.360
> 
> 标签：jquery

我试图阻止点击事件触发，我已经做了我能想到的所有事情。发生的事情是您单击提交按钮，然后进行一些验证，如果失败，我会给出一个工具提示。为了显示我输入的工具提示`$element.append($tooltip)`，然后触发`$(body).on('click', function() {})`

我已经验证，如果我删除附加，则不会触发点击。

有谁知道为什么附加它会触发点击事件？

这是更多代码。这是实际的工具提示代码：

```
//Sets up a tooltip to display feedback
//position: top, bottom or right
NG.Tooltip = function (target, message, timeout, position, doAdjust) {
    var tt = (this == NG ? {} : this); //Prevent people from accidentally missing the "new" keyword and corrupting the global NG object
    var $target = $(target);
    var $targetParent = $target.parent();
    var $offsetParent = $target.offsetParent();
    tt.targetElement = $target.get(0);
    if(!tt.targetElement){
        return;
    }

    //Remove previous tooltip if there is one already attached to target element
    if (tt.targetElement.ngTooltip)
        tt.targetElement.ngTooltip.Remove();

    if (!timeout) timeout = 2000;

    var $div = tt.div = $('<div class="ngTooltip">' + message + '</div>');
    var pos = $target.position();
    var posParent = $targetParent.position();
    if (position == 'bottom') {
        $div.css({ "left": (pos.left) + "px", "top": (pos.top + $target.outerHeight() + 10) + "px" });
    }
    else if (position == 'top') {
        $div.css({ "left": (pos.left) + "px", "top": (pos.top) + "px" });
    }
    else if (position == 'parent-bottom-left') {
        $div.css({ "left": (posParent.left) + "px", "top": (pos.top + $target.outerHeight() + 10) + "px" });
    }
    else {
        $div.css({ "left": (pos.left + $target.outerWidth() + 10) + "px", "top": pos.top + "px" });
    }

    // commenting out this allows the code to go without triggering the click
    //$offsetParent.append($div);

    if (position == 'parent-bottom-left') {
        if ((posParent.left + $div.width()) > $offsetParent.width()) {
            $div.css("width", ($offsetParent.width() - (posParent.left + 15)) + "px");
        }
    }

    //Default to adjust it onscreen.
    //But there are certain cases such as popping up the url of a (link) on hover where adjusting it would not work out well
    if (doAdjust == null || doAdjust == true) {
        NG.AdjustPopupOnScreen($div);
    }

    tt.Remove = function (elem) {
        if (tt.timeoutId)
            window.clearTimeout(tt.timeoutId);
        $div.unbind('click'); //removes click event attached
        $div.remove();
        tt.targetElement.ngTooltip = null;
    };

    $div.click(tt.Remove);
    tt.timeoutId = null;
    if (timeout > 0)
        tt.timeoutId = window.setTimeout(function () { tt.Remove(); }, timeout);

    tt.targetElement.ngTooltip = this;
    return this;
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:58:49.187

我应该在我的代码中看到这一点。我最终检查了 $(body).on(click) 以确定事件类型`event.type`，它返回“DOMNodeInserted”。简单的搜索，我发现`.on('DOMNodeInserted', function(event) {`了`$('body').trigger('click');`

谢谢大家的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T21:16:10.493

在没有看到您的代码的情况下，当我希望 Javascript 停止触发时，我使用`event.stopPropagation`：

[http://api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/)

希望这可以帮助。

# python - SuspiciousOperation 使用 sorl-thumbnail

> ID：14820957
> 
> 赞同：2
> 
> 时间：2013-02-11T21:13:46.037
> 
> 标签：python, django, exception, thumbnails, sorl-thumbnail

我有一个 Django Web 应用程序，它代表用户访问和操作多个服务器文件系统（例如 /fs01、/fs02 等）。我想向用户展示这些文件系统上的图像缩略图，并认为 sorl-thumbnail 将是这样做的方式。

似乎图像必须在 MEDIA_ROOT 下才能 sorl-thumbnail 创建缩略图。我`MEDIA_ROOT`的是`/Users/me/Dev/MyProject/myproj/media`，所以这有效：

```
path = "/Users/me/Dev/MyProject/myproj/media/pipe-img/magritte-pipe-large.jpg"
try:
  im = get_thumbnail(path, '100x100', crop='center', quality=99)
except Exception, e:
  exc_type, exc_obj, exc_tb = sys.exc_info()
  print "Failed getting thumbnail: (%s) %s" % (exc_type, e)
print "im.url = %s" % im.url 
```

正如我所料，它会创建缩略图并打印 im.url。但是当我`path`改为：

```
path = "/fs02/dir/ep340102/foo/2048x1024/magritte-pipe-large.jpg" 
```

它失败了：

```
Failed getting thumbnail: (<class 'django.core.exceptions.SuspiciousOperation'>)
Attempted access to '/fs02/dir/ep340102/foo/2048x1024/magritte-pipe-large.jpg' denied. 
```

有没有办法解决这个问题？我可以使用 sorl-thumbnail 在这些其他文件系统（例如 /fs01、/fs02、/fs03 等）下创建缩略图吗？有更好的方法吗？

**更新。** 这是完整的堆栈跟踪：

```
Environment:

Request Method: GET
Request URL: http://localhost:8000/pipe/file_selection/

Django Version: 1.4.1
Python Version: 2.7.2
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.admin',
 'django.contrib.admindocs',
 'django.contrib.humanize',
 'django.contrib.messages',
 'pipeproj.pipe',
 'south',
 'guardian',
 'sorl.thumbnail')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/Library/Python/2.7/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/Library/Python/2.7/site-packages/django/contrib/auth/decorators.py" in _wrapped_view
  20\.                 return view_func(request, *args, **kwargs)
File "/Users/dylan/Dev/Pipe/pipeproj/../pipeproj/pipe/views/data.py" in file_selection
  184\.  im = get_thumbnail(path, '100x100', crop='center', quality=99)
File "/Library/Python/2.7/site-packages/sorl_thumbnail-11.12-py2.7.egg/sorl/thumbnail/shortcuts.py" in get_thumbnail
  8\.     return default.backend.get_thumbnail(file_, geometry_string, **options)
File "/Library/Python/2.7/site-packages/sorl_thumbnail-11.12-py2.7.egg/sorl/thumbnail/base.py" in get_thumbnail
  56\.             source_image = default.engine.get_image(source)
File "/Library/Python/2.7/site-packages/sorl_thumbnail-11.12-py2.7.egg/sorl/thumbnail/engines/pil_engine.py" in get_image
  12\.         buf = StringIO(source.read())
File "/Library/Python/2.7/site-packages/sorl_thumbnail-11.12-py2.7.egg/sorl/thumbnail/images.py" in read
  121\.         return self.storage.open(self.name).read()
File "/Library/Python/2.7/site-packages/django/core/files/storage.py" in open
  33\.         return self._open(name, mode)
File "/Library/Python/2.7/site-packages/django/core/files/storage.py" in _open
  156\.         return File(open(self.path(name), mode))
File "/Library/Python/2.7/site-packages/django/core/files/storage.py" in path
  246\.             raise SuspiciousOperation("Attempted access to '%s' denied." % name)

Exception Type: SuspiciousOperation at /pipe/file_selection/
Exception Value: Attempted access to '/fs02/dir/ep340102/foo/2048x1024/bettina.jpg' denied. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-29T11:28:53.663

SuspiciousOperation 来自 FileSystemStorage.path() 这里：

```
def path(self, name):
try:
    path = safe_join(self.location, name)
except ValueError:
    raise SuspiciousFileOperation("Attempted access to '%s' denied." % name)
return os.path.normpath(path) 
```

它起源于具有以下测试的 safe_join()：

```
if (not normcase(final_path).startswith(normcase(base_path + sep)) and
... 
```

这意味着计算的文件名必须存在于配置的缩略图存储中。默认情况下，settings.THUMBNAIL_STORAGE 是 settings.DEFAULT_FILE_STORAGE，它是 FileSystemStorage，它将文件存储在 settings.MEDIA_ROOT 中。

您应该能够通过定义存储类为缩略图使用不同的存储路径：

```
from django.core.files.storage import FileSystemStorage

class ThumbnailStorage(FileSystemStorage):
    def __init__(self, **kwargs):
        super(ThumbnailStorage, self).__init__(
            location='/fs02', base_url='/fs02') 
```

然后在 settings.py

```
THUMBNAIL_STORAGE = 'myproj.storage.ThumbnailStorage' 
```

您还需要确保在该 URL 上提供 /fs02 的内容：

```
if settings.DEBUG:
    patterns += patterns('',
        url(r'^fs02/(?P<path>.*)$', 'django.views.static.serve',
            {'document_root': '/fs02'})) 
```

请注意，您的缩略图将根据默认的 THUMBNAIL_PREFIX 创建为 /fs02/cache/...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-10T09:47:14.170

我通过提供绝对网址来做到这一点，如下所示：

```
from sorl.thumbnail import get_thumbnail
from django.contrib.staticfiles.storage import staticfiles_storage

image_url = staticfiles_storage.url('image.jpg')
thumbnail = get_thumbnail(image_url, '100x100') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T00:53:57.003

使用以下命令你会得到什么？

```
ls -la /fs02/dir/ep340102/foo/2048x1024/ 
```

如果文件所有者不是好人（和/或错误的文件权限），通常会发生访问被拒绝...

# mysql - 如何将 MySQL 中的值增加到将来的某个时间？

> ID：14820960
> 
> 赞同：0
> 
> 时间：2013-02-11T21:14:05.640
> 
> 标签：mysql, date, datetime, intervals

我正在尝试更新表中的 DATETIME 字段。我想要的是它总是在到期前三个小时。

我目前的代码是：

```
UPDATE mindcore_sessions
  SET session_time = DATE_ADD(session_time, INTERVAL 3 HOUR)
  WHERE session_id = '$sessionId'; 
```

一个示例值是：`2013-02-11 00:00:00`。如果我运行此查询，它将更改为：`2013-02-11 03:00:00`。哪个是对的。**但是**，如果再次运行，它会变为`2013-02-11 06:00:00`等等。

我想要的是总是**提前**三个小时。这很难解释，但我只想让它在再次运行时保持不变。如果它在 1 分钟后再次运行，我希望它只增加一分钟。

对不起，如果问题很冗长，但我完全糊涂了（而且已经很晚了！）。

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T21:17:49.050

不是将三 (3) 小时添加到最后一个`session_time`，而是将三 (3) 小时添加到`NOW()`：

```
update mindcore_sessions
set session_time = DATE_ADD(NOW(), INTERVAL 3 HOUR)
where session_id = '$sessionId';` 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T21:17:51.173

将您的时间间隔添加到`NOW()`而不是添加到当前值：

```
UPDATE mindcore_sessions SET session_time = DATE_ADD(NOW(), INTERVAL 3 HOUR) WHERE session_id = '$sessionId'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T21:18:11.320

mysql 无法知道之前是否执行过相同的查询。

唯一可能的解决方案是将原始值保存在一个额外的列中，并使用该列检查该值是否在过去发生了更改。

如果您希望该值在 3 小时后提前，您可以简单地执行以下操作**：**

`DATE_ADD(NOW(), INTERVAL 3 HOUR)`

# javascript - 将javascript合并到href标签中

> ID：14820961
> 
> 赞同：0
> 
> 时间：2013-02-11T21:14:08.463
> 
> 标签：javascript, html, anchor, cascadingdropdown

当涉及到这些事情时有点无能为力，但是如果有人能提供帮助，我将不胜感激。

我在 ms 表达式 web 中有一个嵌套的 css 垂直下拉菜单，以前我使用 asp.net 内置函数来创建一个下拉菜单和以下内容：

```
<select size ="1" name="main10" onchange="window.open(this.options[this.selectedIndex].value,'main')"style="width: 290px"> 
```

连同一些额外的代码，让下拉列表的内容出现在 iframe 中并根据内容调整所述 iframe 的大小（即消除滚动条和其他讨厌的东西）

但是表达式不允许嵌套下拉菜单很容易，我不得不尝试不同的方法。

我需要将上面的代码合并到其中：`<li><a href="#">Some Text Here</a></li>`很多时候，使用不同的 url，链接到站点内的各个页面。

我试图尽可能地描述，但毫无疑问我错过了一些重要的信息，所以请询问我是否不清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:19:05.033

如果我理解正确，您只需要单击锚标记即可运行一些 JS。如果是这样，您可以这样做：

```
<li><a href="#" onclick="your JS here;">Some Text Here</a></li> 
```

最好也使用`return false;`点击处理程序，以防止默认点击操作，如果您将所需的 URL 放入`href`属性中，即使对于禁用 JS 的用户，该链接仍然有效。所以把它和你的`window.open`：

```
<li><a href="http://xyz.com" onclick="window.open(this.href,'main');return false;">Some Text Here</a></li> 
```

鉴于您打算有很多这些链接，您不想在`window.open()`任何地方重复，所以：

```
<li><a href="http://x.com" onclick="return doOpen(this.href);">X Here</a></li>
<li><a href="http://y.com" onclick="return doOpen(this.href);">Y Here</a></li>
<li><a href="http://y.com" onclick="return doOpen(this.href);">Z Here</a></li>

<script>
function doOpen(url) {
    window.open(url, 'main');
    return false;
}
</script> 
```

# javascript - 如何使用从 php 文件到 javascript 文件的变量

> ID：14820968
> 
> 赞同：-4
> 
> 时间：2013-02-11T21:14:35.323
> 
> 标签：javascript

如何使用从 php 文件到 javascript 文件的变量

在 php 文件中，我使用以下代码将 $phpVariable 分配给 jsVariable：

```
<script> 
var jsVariable = <?php echo $phpVariable; ?>;
</script> 
```

在 Javascript 文件中：我使用以下代码测试 jsVariable：

```
<script>
alert( jsVariable );
</script> 
```

但输出是“：未定义”

谢谢莫伊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:16:15.130

如果此类变量是字符串，则应将其用引号引起来：

```
<script> 
var jsVariable = "<?php echo $phpVariable; ?>";
</script> 
```

编辑，但你不应该这样做。您最好将其作为`data-*`DOM 元素的属性注入，或者从您将要解析的 JSON 配置文件/字符串中获取它，例如：

```
<script type="application/json" id="json-config">

<?php echo json_encode($someObject); ?>

</script> 
```

接着：

```
var config = $.parseJSON( $('#json-config').html() ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T21:16:50.883

```
<?php
print "<script>";
print "var jsVariable = $phpVariable"; 
print "</script>";
?> 
```

# arrays - 将数组保存为图像，imwrite matlab

> ID：14820970
> 
> 赞同：1
> 
> 时间：2013-02-11T21:14:40.740
> 
> 标签：arrays, matlab

几年前，我用这种方式制作黑白噪音：

```
A=randn(300,300);
B=A*255;
C=ceil(B);
imwrite(C,'noise300.jpeg'). %% or A=rand(300,300) 
```

今天我不断收到以下错误：

```
??? Error using ==> imwrite at 457
Can't open file "noise300.jpg" for writing.
You may not have write permission. 
```

**为什么我不能将数组（双精度）保存为 jpeg/bmp 或我对 imwrite 所做的任何事情？**

在这里[http://www.mathworks.com/matlabcentral/answers/7864](http://www.mathworks.com/matlabcentral/answers/7864)我发现matlab和windows 7之间存在冲突，但我有Vista。

如果没有办法为我的情况修复 imwrite，我将欣赏另一种使用黑白噪音制作 jpeg 的方法。谢谢，迪娜。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-24T05:18:07.127

Matlab报错的原因

***'使用 imwrite 时出错（第 455 行）无法打开文件“1.jpg”进行写入。你可能没有写权限。***

位于当前文件夹的路径中。它可能看起来像

***'C:\Program Files\MATLAB\R2013a\bin'***

它需要更改为 D: 或任何其他驱动器中的其他路径。它在那里工作得很好。谢谢！

# sql - SQL Server 中的简单每日计划任务

> ID：14820975
> 
> 赞同：0
> 
> 时间：2013-02-11T21:14:47.877
> 
> 标签：sql, sql-server, sql-server-2008, tsql

```
USE msdb ;
GO
EXEC dbo.sp_add_job
    @job_name = N'Daily Reset of LogIn User Data';
GO
EXEC sp_add_jobstep
    @command = N'UPDATE COMMAND', 
    @retry_attempts = 5,
    @retry_interval = 5 ;
GO
EXEC dbo.sp_add_schedule
    @schedule_name = N'RunDaily',
    @freq_type = 4,
    @active_start_time = 000000 ;
USE msdb ;
GO
EXEC sp_attach_schedule
   @job_name =  N'Daily Reset of LogIn User Data', 
   @schedule_name = N'RunDaily';
GO
EXEC dbo.sp_add_jobserver
    @job_name =  N'Daily Reset of LogIn User Data';
GO 
```

我无法弄清楚如何在`@command`;中插入 Update 命令。

我的命令是

```
UPDATE MyUserTable SET IsActive='N' WHERE IsActive='Y' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:25:38.950

你可以做：

```
DECLARE @UpdateCommand NVARCHAR(200)
SET @UpdateCommand = 'UPDATE MyUserTable SET IsActive=''N'' WHERE IsActive=''Y'''

EXEC sp_add_jobstep
    @command = @UpdateCommand, 
    @retry_attempts = 5,
    @retry_interval = 5 ; 
```

# google-apps-script - 在对象工作表中找不到 deleteActiveSheet

> ID：14820978
> 
> 赞同：1
> 
> 时间：2013-02-11T21:15:09.973
> 
> 标签：google-apps-script, google-sheets

我想在我的电子表格中删除一张工作表。

我的代码是：

```
 var go = workSheet.getSheetByName("Mail");

  go.deleteActiveSheet(); 
```

我收到一条错误消息，但我不明白出了什么问题。

> 在对象工作表中找不到 deleteActiveSheet

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T21:28:10.117

您需要调用**电子表格**（请`deleteActiveSheet()`参阅[文档](https://developers.google.com/apps-script/class_spreadsheet)）。

 **所以你的代码应该看起来像这样。

```
var sheet = worksheet.getSheetByName("Mail");
worksheet.setActiveSheet(sheet);
worksheet.deleteActiveSheet(); 
```**

# html - 我应该使用 HTML或者?

> ID：14820982
> 
> 赞同：7
> 
> 时间：2013-02-11T21:15:46.810
> 
> 标签：html, form-submit

我想在 HTML 表单上创建一个表单提交按钮，该按钮的文本与将提交给主机的关键字不同。所以我用

```
<button type="submit" name="SubmitAction" value="Done" accesskey="D"><u>D</u>one for Now</button> 
```

但[W3Schools](http://www.w3schools.com/tags/tag_button.asp)警告说：

> 注意：如果您`<button>`在 HTML 表单中使用该元素，不同的浏览器可能会提交不同的值。**用于`<input>`在 HTML 表单中创建按钮**。

有什么方法可以使用按钮`<input>`上显示的文本与将提交给主机的值不同来创建按钮？

不同的浏览器发送的变化是`<button>`什么？

注意：我不必支持任何比 IE 9 更早的版本，并且实际使用的是当前版本的 Chrome 和 FireFox。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T21:19:29.300

`<button>`与差异的`<input>`区别已经过时了，在现代浏览器中使用其中任何一个都应该没有问题。

如果您想使用`<input type="submit">`提交的值不是显示的值......不要。相反，只需添加另一个输入元素：

```
<input type="submit" value="Displayed Value">
<input type="hidden" name="name" value="Actual Value"> 
```

# process - 可以比 IPC 或套接字更直接地在进程之间进行通信吗？

> ID：14820983
> 
> 赞同：1
> 
> 时间：2013-02-11T21:15:54.670
> 
> 标签：process, ipc, communication

我有 2 个进程，我希望其中一个进程以高数据吞吐量与另一个进程通信。我已经尝试过 IPC（特别是 boost::iterprocess）和套接字，但它们的性能/吞吐量太慢而无法使用。

我的后备选项是将第二个进程作为第一个的附加子进程启动（加载它的 dll，创建“工具”等），它具有最佳性能，因为它们在技术上是相同的进程，并且传递数据只是用DLL调用接口函数。

我正在寻找避免这样做的方法，但仍然具有那种程度的性能。是否可以设置一个 2 个进程可以加载并以某种方式共享内存空间的 DLL？IPC 和套接字是这里唯一的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:21:32.083

在 Windows 上，您可以使用命名管道。在本地使用时，它们曾经被认为比套接字更有效。然而，它们已经过时了。你可以在这里了解更多[关于命名管道的微软文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365590%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T21:22:57.013

对于本地进程，您可以使用共享文件。如果你对文件进行内存映射，它会快得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T21:30:40.170

您的问题中的“IPC”是什么？套接字、管道、共享内存都是进行 IPC 的方法。是的，您可以在 Windows、Linux 和其他通用系统上使用共享内存。在 C++ 中，您可以将内存块声明为共享（至少在 Windows 上），也可以调用内存映射文件 (MMF) 函数。在 Linux 和 BSD 上，您也使用内存映射文件函数。除了将第二个进程转换为 DLL 之外，MMF 是最快的方法。命名管道和其他任何东西都比较慢。

# algorithm - 对于给定的最大交换数（m），如何仅使用相邻交换按词汇顺序对整数数组进行排序

> ID：14820988
> 
> 赞同：0
> 
> 时间：2013-02-11T21:16:23.487
> 
> 标签：algorithm

当然，在电话采访中我被问到了一个问题，其他问题都很好，但我仍然不确定*最佳*答案。

起初我认为它闻起来有点基数的味道，但因为你不能只使用相邻的交换，当然不能。

所以我认为它更像是一种冒泡排序类型的算法，这是我试图做的，但“最大交换次数”位让它非常棘手（连同他的词汇部分，但我想这只是一个比较方面的问题）

我想我的算法会是这样的（当然现在我有比面试时更好的想法！）

```
int index = 0;
while(swapsLeft>0 && index < arrays.length)
{
  int smallestIndex = index;
  for(int i=index; i < index + swapsLeft)
  {
    // of course < is not correct, we need to compare as string or "by radix" or something
    if(array[i]) < array[smallestIndex]
       smallestIndex = i; 
  }
  // if found a smaller item within swap range then swap it to the front
  for(int i = smallestIndex; i > index; i--)
  {
    temp = array[smallestIndex]; 
    array[smallestIndex] = array[index];
    array[index] = temp
    swapsLeft--;
  }
  // continue for next item in array
  index ++; // edit:could probably optimize to index = index + 1 + (smallestIndex - index) ?
} 
```

这看起来对吗？

谁是更好的解决方案，我很好奇一种有效/正确的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-01T14:44:41.163

我实际上正在为我的软件工程学士学位的 Java 算法课程编写这个确切的代码。因此，我将通过解释问题以及解决问题的步骤来帮助您解决这个问题。您将需要至少 2 种方法来多次执行此操作。

首先你取你的第一个值，只是为了让它变得简单，让它保持小而简单。

1 2 3 4

您应该使用数组进行排序。为了从词法上找到下一个数字，你从最右边开始，向左移动，当你发现你的第一个减少时停止。您必须用右边的下一个最大值替换那个较小的值。因此，对于我们的示例，我们将用 4 替换 3。所以我们的下一个数字是：

1 2 4 3

那很简单吧？别担心它会变得更难。现在让我们尝试使用以下方法获取下一个数字：

1 4 3 2

好的，所以我们从最右边开始向左移动直到我们的第一个较小的数字。2小于3 小于4 大于1 1, 3 大于 1，2 大于 1。好的，2 是最后一个数字，这意味着 2 需要替换 1。但是其余的数字呢，它们已经按顺序排列了，它们只是落后于我们需要的东西。所以我们需要翻转订单，我们想出：

2 1 3 4

因此，您需要一个执行该排序的方法，以及另一个在循环中调用该方法的方法，直到您完成正确数量的参数。

# javascript - 当我按下回车键时，复选框显示在 消失

> ID：14820989
> 
> 赞同：2
> 
> 时间：2013-02-11T21:16:26.090
> 
> 标签：javascript, html

这是我尝试过的代码，它应该像这样工作：在文本框中编写的文本，应该在 div 标签中显示为复选框。

我用`onchange()`函数。当我移出文本框时它工作正常，但是当我按下`Enter`键时，复选框出现几秒钟然后消失。div 中不显示任何内容。

如何解决这个问题呢？当我`Enter`在文本框中书写时按下，会发生什么？

```
<html>
    <body>
        <form id="form1" name="form1" method="post" action="">
            <p>
                <label for="textfield">Hello</label>
                <input type="text" name="textfield" id="textfield" onChange="add_items(this.value)" />
            </p>
            <br>
            <div id="item"></div>
        </form>

        <script>
        k=""
        function add_items(m)
        {
            k=k+"<input type=checkbox name=menu[] id=menu[] value="+m+">"+m+"&nbsp;";
            document.getElementById("item").innerHTML=k
        }
        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T21:20:52.157

您正在通过按键提交表单`Enter`。

添加`onsubmit="return false;"`到您的`form`标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-07T10:05:54.400

onsubmit="返回假；" 将解决您的问题

# javascript - 如何将两个数组合并为一个二维数组？

> ID：14820990
> 
> 赞同：4
> 
> 时间：2013-02-11T21:16:34.267
> 
> 标签：javascript, arrays

我有两个数组。如何将它们加入一个多维数组？

第一个数组是：

```
var arrayA = ['Jhon, kend, 12, 62626262662', 
              'Lisa, Ann, 43, 672536452', 
              'Sophie, Lynn, 23, 636366363']; 
```

我的另一个数组具有以下值：

```
var arrayB = ['Jhon', 'Lisa', 'Sophie']; 
```

我怎样才能得到这种格式的数组？

```
var jarray = [['Jhon', ['Jhon, kend, 12, 62626262662']], 
              ['Lisa', ['Lisa, Ann, 43, 672536452']], 
              ['Sohphie', ['Sophie, Lynn, 23, 636366363']]] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T21:22:12.500

```
var jarray = [];
for (var i=0; i<arrayA.length && i<arrayB.length; i++)
    jarray[i] = [arrayB[i], [arrayA[i]]]; 
```

但是，我不会称其为“多维数组”——它通常指的是包含相同类型项目的数组。另外我不确定为什么您希望数组的第二部分是一个元素数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-20T11:40:14.183

这是地图版本

```
var arrayA = ['Jhon, kend, 12, 62626262662', 
              'Lisa, Ann, 43, 672536452', 
              'Sophie, Lynn, 23, 636366363'];

var arrayB = ['Jhon', 'Lisa', 'Sophie']; 

/*  expected output
    var jarray = [['Jhon', ['Jhon, kend, 12, 62626262662']], 
                 ['Lisa', ['Lisa, Ann, 43, 672536452']], 
                 ['Sohphie', ['Sophie, Lynn, 23, 636366363']]] */

 var jarray = arrayB.map(function(item,i) { 
   return [item,[arrayA[i]]]; 
 });
 console.log(jarray);
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T21:19:28.317

您可以使用 Underscore.js [http://underscorejs.org/#find](http://underscorejs.org/#find) 查看列表中的每个值，返回第一个通过真值测试（迭代器）的值。该函数在找到可接受的元素后立即返回，并且不遍历整个列表。

```
var even = _.find([1, 2, 3, 4, 5, 6], function(num){ return num % 2 == 0; });
=> 2 
```

然后，您可以对数组 B 元素进行相同操作，并通过代码进行连接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T22:00:05.217

这就是我为得到你所要求的而做的事情：

```
var jarray = [];
for (var i = 0; i < arrayB.length; i++) {
    jarray[i] = [];
    jarray[i].push(arrayB[i]);
    var valuesList = [],
        comparator = new RegExp(arrayB[i]);
    for (var e = 0; e < arrayA.length; e++) {       
        if (comparator.test(arrayA[e])) {
            valuesList.push(arrayA[e]);
       }        
    }
    jarray[i].push(valuesList);
} 
```

# c# - 使用数组时 Sceneview 滞后

> ID：14820998
> 
> 赞同：0
> 
> 时间：2013-02-11T21:16:52.750
> 
> 标签：c#, unity3d

我在这里遇到了一个奇怪的行为 - 当我创建一个包含类数组的简单 C# 脚本时，其中脚本类和数组类都标记为可序列化，我的场景视图开始滞后于移动鼠标（当包含脚本组件的游戏对象被选中）。此外，当数组类有更多成员时，延迟会增加，这些成员被标记为 SerializeField。

如果我在我的数组上添加属性 [field: NonSerialized]，那么滞后就消失了。此外，[HideInInspector] 并没有改变任何事情 - 在我看来，某些事情正在导致统一序列化每一帧的脚本内容 - 这会有点奇怪，因为什么会导致这种行为？

有人知道解决方案吗？

[编辑：代码片段]

```
using System;
using UnityEngine;

[Serializable]
public class TestObject{
    public int              IndexX;
    public int              IndexY;
    public int              LengthX;
    public int              LengthY;
    public float            AnimationLength;
    public bool             Animate;
    public float            AnimationSpeed;

    [SerializeField]
    private GameObject      mGameObject;

}

[Serializable]
public class TestScript{

  [HideInInspector]
  public TestObject[] Objects       = new TestObject[256*64];

  void Start(){

  }

  void Update(){

  }

} 
```

这个非常简短和基本的脚本会导致滞后问题......但是 256x64 的数组应该不难序列化。我正在构建一个 Jump'n'Run 游戏 - 我很高兴收到“OnSerialize”和“OnDeserialize”之类的消息，所以我可以以更简单的格式保存和重新加载我的图块，统一保存图块游戏对象，它网格化一个东西 - 但那是一个重载......试图制作这样的东西，有两个列表并监听“唤醒”消息 - 但如果我在编辑器中收到消息，我无法删除现有的游戏对象 - 它会太好了，如果我可以在编辑器重新加载数据时删除并重新创建它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:40:57.900

256*64 = 16384 个对象。为避免丢帧，您需要让每个帧在 0.002 毫秒（1/30/16384）内序列化，这是一项艰巨的任务......

你能避免在游戏线程中序列化的需要吗？你能产生一个线程来异步进行序列化吗？这样您就可以继续响应用户...

# android - 错误膨胀类，自定义视图

> ID：14820999
> 
> 赞同：2
> 
> 时间：2013-02-11T21:17:02.837
> 
> 标签：android

我之前看到过这个错误，但似乎没有一个答案能解决我的问题，所以我不确定发生了什么。当它试图在 xml 中膨胀我的类时它失败了。

XML:

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#EEE"
    >
    <android.view.SurfaceView
        android:id="@+id/preview"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        >
    </android.view.SurfaceView>
    <com.commonsware.android.picture.PictureDemo.DrawOnTop
        android:id="@+id/grid"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        >
    </com.commonsware.android.picture.PictureDemo.DrawOnTop>
</FrameLayout> 
```

班级：

```
class DrawOnTop extends View 
  { 

      public DrawOnTop(Context context) 
      { 
          super(context); 
      } 

      public DrawOnTop(Context context, AttributeSet attrs) 
      { 
          super(context, attrs); 
      } 

      public DrawOnTop(Context context, AttributeSet attrs, int defStyle) 
      { 
          super(context, attrs, defStyle); 

      } 

      @Override 
      protected void onDraw(Canvas canvas) 
      { 
          Paint paint = new Paint(); 
          paint.setStyle(Paint.Style.STROKE); 
          paint.setColor(Color.BLACK); 
          canvas.drawText("Test Text", 10, 10, paint); 
          canvas.drawBitmap(bitmap, 0, 0, null);
          super.onDraw(canvas); 
      } 
  } 
```

错误：

```
02-11 16:06:25.456: E/AndroidRuntime(11717): Caused by: android.view.InflateException: Binary XML file line #14: Error inflating class com.commonsware.android.picture.PictureDemo.DrawOnTop 
```

我有所有的构造函数，没有看到任何其他问题，我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T23:11:59.227

尝试将 DrawOnTop 分离到同一个包中的另一个文件。